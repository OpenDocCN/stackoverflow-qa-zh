# StackOverflow 问答 11292000-11292999

# ios - 使用 Objective C Google Plus 客户端库获取当前用户配置文件

> ID：11292000
> 
> 赞同：0
> 
> 时间：2012-07-02T10:39:08.180
> 
> 标签：ios, google-plus

我正在使用此处提供的用于 Objective C 的 Google 客户端库。我已经成功地授权用户并获取刷新令牌。（使用嵌入的 GTMOAuthenticaion api）。

在成功授权后调用的选择器中，我按如下方式发出获取用户配置文件请求..（我需要当前登录/经过身份验证的用户的 id）

```
-(void)viewController:(GTMOAuth2ViewControllerTouch *)viewController
      finishedWithAuth:(GTMOAuth2Authentication *)auth
                 error:(NSError *)error {

    if (error != nil) {
        NSLog(@"Stop");
    } else {

        if ([auth canAuthorize]){
            [Mediator plusService].authorizer = auth;

            // Problematic Line
            GTLQueryPlus *profileQuery = [GTLQueryPlus queryForPeopleGetWithUserId:@"me"]; // Notice the UserId Param

            profileQuery.completionBlock = ^(GTLServiceTicket *ticket, id object, NSError *error) {
                if (error == nil) {
                    self.mediator.gProfile = object;
                } else {
                    NSLog(@"GPlus Service Error %@", error);
                }
            };

            [[Mediator plusService] executeQuery:profileQuery completionHandler:
            ^(GTLServiceTicket *ticket, id result, NSError *error) {
                if (error)
                    NSLog(@"Some Service Error %@", error);
            }];
        }
    }
} 
```

如果我将“me”作为参数，我会在 jSON 响应中得到无效的用户 ID 错误字符串。

但是，如果我提供一些 userId，例如我自己的 113632923069489732066，它可以正常工作并返回适当的 JSON 响应..！！

示例文件夹中的 Google Plus 示例也无法获取以以下错误结尾的当前用户配置文件。

```
Error Domain=com.google.GTLJSONRPCErrorDomain Code=400 "The operation couldn’t be completed. (Invalid user ID: {0})" UserInfo=0x7a670fa0 {NSLocalizedFailureReason=(Invalid user ID: {0}), GTLStructuredError=GTLErrorObject 0x7a67b130: {message:"Invalid user ID: {0}" code:400 data:[2]}, error=Invalid user ID: {0}} 
```

PS 我的 API 控制台应用程序不适用于已安装应用程序下的 iOS 选项，但需要使用“其他”选项进行配置。使用 iOS 选项配置时，oAuth 失败并显示 invalid_client 错误响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:32:53.830

我的错 .. ！！还有一个非常愚蠢的.. !!

我使用尚未与 GPlus 关联的 Gmail 帐户登录 .. !! =/

# iphone - MapKit 仅在地图加载时查找用户

> ID：11292001
> 
> 赞同：0
> 
> 时间：2012-07-02T10:39:10.267
> 
> 标签：iphone, mapkit

我希望有人可以为我指出一个方便的委托方法来回答以下问题。

我的问题是：我怎么知道用户第一次被 MapKit 定位？

当我的视图出现时，我会告诉我的 MKMapView 定位用户并设置用户周围的地图区域。在最初找到用户后，我不想继续将地图更新到他/她的位置。我想让用户自由地在地图上平移，而不是自动回到他们的位置。

当定位用户出现延迟时我遇到了麻烦（例如，用户第一次打开应用程序时，MapKit 在他/她同意分享他们的位置之前不会定位用户）。结果是地图在大西洋上空的某个地方打开，一旦找到用户，它就不会自行纠正。

不幸的是， -(void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation 在确定用户的真实位置之前被调用了几次（测试时，我在同意分享我的位置之前看到了它的 NSLog 语句）。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.mapView.delegate=self;
}

-(void)viewWillAppear:(BOOL)animated{
    [self.mapView setShowsUserLocation:YES];
    [self.mapView setUserTrackingMode: MKUserTrackingModeNone];

    hasUpdatedRegion=NO;
}

//MapKit Delegate Methods
-(void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation
{
    NSLog(@"didUpdateUserLocation");

    if(!hasUpdatedRegion)
    {
        hasUpdatedRegion=YES;
        MKCoordinateSpan span=MKCoordinateSpanMake(0.3, 0.3);
        MKCoordinateRegion currentRegion=MKCoordinateRegionMake(mapView.userLocation.coordinate, span);
        [mapView setRegion:currentRegion];
    }
}

-(void)mapView:(MKMapView *)mapView didChangeUserTrackingMode:(MKUserTrackingMode)mode animated:(BOOL)animated{
    NSLog(@"didChangeTrackingMode");

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-09T09:19:04.007

我也有同样的问题。换了个方式...

```
- (void)viewDidLoad
{
    self.mapView.userTrackingMode = YES;
}

- (void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation
{
    self.mapView.userTrackingMode = NO;
} 
```

首先，设置`userTrakingMode`为`YES`在用户移动时跟踪用户。

其次，在将地图更新为用户位置后`didUpdateUserLocation`，当我禁用了跟踪模式时。

这会阻止地图再跟踪用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:47:18.747

你为什么不尝试设置 mapview 区域，以便显示整个世界地图而不是特定位置（如你所说的“大西洋”），以防用户不允许 mapkit 使用当前位置（我意思是在视图中确实加载方法，设置地图区域。），如果他允许..然后根据用户的坐标设置区域，。

# r - 治疗效果的定量分析

> ID：11292004
> 
> 赞同：0
> 
> 时间：2012-07-02T10:39:25.373
> 
> 标签：r

我需要分析一项生物学研究。研究设计相当简单。它包括3组。1个对照组和2个测试组。两个测试组用相同的药物治疗，但剂量不同。每组大约有 14 个观察值，我查看了大约 600 个变量。我已经使用单向方差分析来确定组之间的显着命中。但是，我现在想知道治疗剂量之间是否存在定量效应。换句话说，当您将测试组 1（较低剂量）与对照组进行比较时，治疗效果在统计学上是否更大，或者当您将测试组 2（较高剂量）与对照组进行比较时，治疗效果是否更大。我还需要在分析中包含 1 或 2 个协变量。

不幸的是，我不知道 R 中是否有可以用来回答这个问题的统计测试/技术。非常感谢任何建议。

西文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:34:41.403

这听起来像是 multcomp-package 的工作，那里有很多资源。也可以看看[这](https://rads.stackoverflow.com/amzn/click/com/1584885742)本书。

这是一个将两组的响应与对照组进行比较的示例：

```
require(multcomp)
mice <- data.frame(group=as.factor(rep(c("C","1","2"),rep(6,3))), 
                   score=c(58, 32, 59, 64, 55, 49, 73, 70, 68, 71, 60, 62, 53, 74, 72, 62, 58, 61))
# reoder factor, so that Control is the 1st level
levels(mice$group) <- c("C", "1", "2")

plot(score ~ group, data = mice) 
```

![在此处输入图像描述](../Images/58c7695a5c997a6d8c302e259c16ee9a.png)

```
# Anova
mod <- aov(score ~ group, data = mice)
# Multiple Comparisons with Dunnett contrasts (=Compare to control)
summary(glht(mod, linfct=mcp(group = "Dunnett")))

     Simultaneous Tests for General Linear Hypotheses

Multiple Comparisons of Means: Dunnett Contrasts

Fit: aov(formula = score ~ group, data = mice)

Linear Hypotheses:
           Estimate Std. Error t value Pr(>|t|)  
1 - C == 0   -4.000      4.965  -0.806   0.6427  
2 - C == 0  -14.500      4.965  -2.920   0.0195 *
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 
(Adjusted p values reported -- single-step method) 
```

高温下，

# android - 来自 Facebook Android 的直接个人资料

> ID：11292005
> 
> 赞同：3
> 
> 时间：2012-07-02T10:39:26.600
> 
> 标签：android, facebook, redirect

我想问一下成功登录 Facebook 后如何重定向到某人的个人资料？
示例：如果成功登录并授权，它将直接进入此页面：

[http://www.facebook.com/torasanshochiku](http://www.facebook.com/torasanshochiku)。

我使用[本教程连接 Facebook](http://www.helloandroid.com/tutorials/using-facebook-sdk-android-development-part-2)

这是我的**FacebookConnectionActivity**：

```
public abstract class FBConnectionActivity extends Activity {
public static final String TAG = "FACEBOOK";
private Facebook mFacebook;
public static final String APP_ID = "271496479563642";
private AsyncFacebookRunner mAsyncRunner;
private static final String[] PERMS = new String[] { "read_stream" };
private SharedPreferences sharedPrefs;
private Context mContext;

private TextView username;
private ProgressBar pb;

public void setConnection() {
        mContext = this;
        mFacebook = new Facebook(APP_ID);
        mAsyncRunner = new AsyncFacebookRunner(mFacebook);
}

public void getID(TextView txtUserName, ProgressBar progbar) {
        username = txtUserName;
        pb = progbar;
        if (isSession()) {
                Log.d(TAG, "sessionValid");
                mAsyncRunner.request("me", new IDRequestListener());
        } else {
                // no logged in, so relogin
                Log.d(TAG, "sessionNOTValid, relogin");
                mFacebook.authorize(this, PERMS, new LoginDialogListener());
        }
}

public boolean isSession() {
        sharedPrefs = PreferenceManager.getDefaultSharedPreferences(mContext);
        String access_token = sharedPrefs.getString("access_token", "x");
        Long expires = sharedPrefs.getLong("access_expires", -1);
        Log.d(TAG, access_token);

        if (access_token != null && expires != -1) {
                mFacebook.setAccessToken(access_token);
                mFacebook.setAccessExpires(expires);
        }
        return mFacebook.isSessionValid();
}

private class LoginDialogListener implements DialogListener {

        @Override
        public void onComplete(Bundle values) {
                Log.d(TAG, "LoginONComplete");
                String token = mFacebook.getAccessToken();
                long token_expires = mFacebook.getAccessExpires();
                Log.d(TAG, "AccessToken: " + token);
                Log.d(TAG, "AccessExpires: " + token_expires);
                sharedPrefs = PreferenceManager
                                .getDefaultSharedPreferences(mContext);
                sharedPrefs.edit().putLong("access_expires", token_expires)
                                .commit();
                sharedPrefs.edit().putString("access_token", token).commit();
                mAsyncRunner.request("me", new IDRequestListener());
        }

        @Override
        public void onFacebookError(FacebookError e) {
                Log.d(TAG, "FacebookError: " + e.getMessage());
        }

        @Override
        public void onError(DialogError e) {
                Log.d(TAG, "Error: " + e.getMessage());
        }

        @Override
        public void onCancel() {
                Log.d(TAG, "OnCancel");
        }
}

private class IDRequestListener implements RequestListener {

        @Override
        public void onComplete(String response, Object state) {
                try {
                        Log.d(TAG, "IDRequestONComplete");
                        Log.d(TAG, "Response: " + response.toString());
                        JSONObject json = Util.parseJson(response);

                        final String id = json.getString("id");
                        final String name = json.getString("name");
                        FBConnectionActivity.this.runOnUiThread(new Runnable() {
                                public void run() {
                                        username.setText("Welcome: " + name+"\n ID: "+id);
                                        pb.setVisibility(ProgressBar.GONE);

                                }
                        });
                } catch (JSONException e) {
                        Log.d(TAG, "JSONException: " + e.getMessage());
                } catch (FacebookError e) {
                        Log.d(TAG, "FacebookError: " + e.getMessage());
                }
        }

        @Override
        public void onIOException(IOException e, Object state) {
                Log.d(TAG, "IOException: " + e.getMessage());
        }

        @Override
        public void onFileNotFoundException(FileNotFoundException e,
                        Object state) {
                Log.d(TAG, "FileNotFoundException: " + e.getMessage());
        }

        @Override
        public void onMalformedURLException(MalformedURLException e,
                        Object state) {
                Log.d(TAG, "MalformedURLException: " + e.getMessage());
        }

        @Override
        public void onFacebookError(FacebookError e, Object state) {
                Log.d(TAG, "FacebookError: " + e.getMessage());
        }

}

//@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        mFacebook.authorizeCallback(requestCode, resultCode, data);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:44:53.770

您可以将用户重定向到某人的个人资料的方法是使用通用个人资料页面链接。
它看起来像这样 -

`//facebook.com/profile.php?id=USER_FBID`

`USER_FBID`用户 Facebook ID在哪里。因此，您需要做的就是让用户 FBID，然后您可以使用链接直接导航到他们的个人资料。请注意，我使用协议相对 URL 来使用户在重定向时使用相同的协议。如果用户正在安全地浏览，`HTTPS`那么他们将被重定向到安全链接。如果用户浏览不安全，那么他们将被引导至正常`HTTP`链接。

# actionscript-3 - AS3 在嵌入的文本字段上设置 htmlText 会导致它消失

> ID：11292006
> 
> 赞同：0
> 
> 时间：2012-07-02T10:39:27.573
> 
> 标签：actionscript-3, flash, fonts, flash-cs5

我在字体方面遇到了很大的问题（然后没有任何变化，谢谢 adobe）。所以我做了一个小测试，试图确定发生了什么。

我正在使用 FontLoader 库动态加载字体，Font.enumerate 字体显示所有可用字体。

我创建了两个文本字段，一个在影片剪辑中并添加到舞台，一个是动态的。在下面的代码中，电影文本字段不会呈现，但动态文本字段会呈现。当我将 .htmlText 行设置为 .text 时，文本将呈现。这很奇怪。

```
 private function loadComplete(event : Event) : void{
    trace(Font.enumerateFonts().toString())
    const tf : TextFormat = new TextFormat("Desdemona", 18, 0, true);

    _textView.username.embedFonts = true;
    _textView.username.setTextFormat(tf);
    _textView.username.defaultTextFormat = tf;
    _textView.username.htmlText = "test";

    const dymanicTextField : TextField = new TextField();
    addChild(dymanicTextField);
    dymanicTextField.embedFonts = true;
    dymanicTextField.setTextFormat(tf);
    dymanicTextField.defaultTextFormat = tf;
    dymanicTextField.htmlText = "test";
} 
```

关于为什么这只发生在现有文本字段（即不是动态文本字段）上的 html 文本的任何想法？

干杯

# c# - 删除 doxygen 中的系统命名空间

> ID：11292007
> 
> 赞同：1
> 
> 时间：2012-07-02T10:39:29.143
> 
> 标签：c#, doxygen

当我使用 Doxygen 生成文档时，我得到了几个代表系统名称空间的空包，如“Linq”等。问题是如何摆脱它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T07:44:47.023

我遇到了同样的问题并找到了一种解决方案。在 \cond 和 \endcond 标记之间放置 using ... 行会将它们隐藏在帮助文件输出中。
我对此不太高兴，更改 doxy 文件中的某些内容会更容易。也许还有另一个更好的解决方案？
这个问题是新的 doxygen 版本 v1.8.1.1 的新问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-22T06:52:29.393

我已经通过在 Doxyfile 中添加它来删除它们

```
EXCLUDE_SYMBOLS        = System 
```

# bash - 如何使用 shell 脚本自动化 dos2unix？

> ID：11292010
> 
> 赞同：8
> 
> 时间：2012-07-02T10:39:32.750
> 
> 标签：bash, shell, dos2unix

我在一个目录中有一堆 xml 文件，需要对它们执行 dos2unix 命令，并且每隔一段时间就会添加新文件。我不是每次都想用脚本自动执行每个文件时手动执行 dos2unix 命令。在我的生活中，我什至从未看过一个 shell 脚本，但到目前为止，我从一些教程中读到了这个：

```
FILES=/tmp/testFiles/*
for f in $FILES
do
  fname=`basename $f`
  dos2unix *.xml $f $fname
done 
```

但是，我不断显示“使用”输出。我认为问题在于我没有正确分配新文件的名称（fname）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T11:31:11.597

您收到使用消息的原因是它`dos2unix`不接受您提供的额外参数。但是，它将接受多个文件名（也通过 glob）。除非您正在处理的文件多于命令行可以接受的文件，否则您不需要循环。

```
dos2unix /tmp/testFiles/*.xml 
```

应该是你所需要的，除非你需要递归：

```
find /tmp/testFiles -name '*.xml' -exec dos2unix {} + 
```

（对于 GNU 查找）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T11:22:25.413

如果所有文件都在一个目录中（不需要递归），那么你就快到了。

```
for file in /tmp/testFiles/*.xml ; do
    dos2unix "$file"
done 
```

默认情况下`dos2unix`应就地转换并覆盖原始文件。

如果需要递归，您还必须使用`find`：

```
find /tmp/testFiles -name '*.xml' -print0 | while IFS= read -d '' file ; do
    dos2unix "$file"
done 
```

`.xml`这将适用于所有以in结尾的文件`/tmp/testFiles/`及其所有子目录。

如果不需要其他步骤，您可以完全跳过 shell 循环：

非递归：

```
find /tmp/testFiles -maxdepth 1 -name '*.xml' -exec dos2unix {} + 
```

对于递归：

```
find /tmp/testFiles -name '*.xml' -exec dos2unix {} + 
```

在您的原始命令中，我看到您找到每个文件名的基本名称并尝试将其传递给`dos2unix`，但您的意图尚不清楚。后来，在评论中，您说您只想覆盖文件。我的解决方案执行转换，不创建备份并用转换后的版本覆盖原始版本。我希望这是你的意图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T10:43:09.563

```
mkdir /tmp/testFiles/converted/
for f in /tmp/testFiles/*.xml
do
  fname=`basename $f`
  dos2unix $f ${f/testFiles\//testFiles\/converted\/}
  # or for pure sh:
  # dos2unix $f $(echo $f | sed s@testFiles/@testFiles/converted/@)
done 
```

结果将保存在`converted/`子目录中。

构造`${f/testFiles\//testFiles\/converted\/}`（感谢*Rush*）或`sed`在这里用于`converted/`在文件名之前添加：

```
$ echo /tmp/testFiles/1.xml | sed s@testFiles/@testFiles/converted/@
/tmp/testFiles/converted/1.xml 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-23T09:31:08.353

目前尚不清楚您使用的是哪个 dos2unix 实现。不同的实现需要不同的参数。周围有许多不同的实现。

在 RedHat/Fedora/Suse Linux 上，您只需键入

```
 dos2unix /tmp/testFiles/*.xml 
```

在 SunOS 上，您需要提供输入和输出文件名，上述命令会破坏您的几个文件。

# wpf - 点击 wpf 中的适合屏幕按钮时，动态画布内容适合 c# 中的画布

> ID：11292014
> 
> 赞同：1
> 
> 时间：2012-07-02T10:39:44.000
> 
> 标签：wpf, wpf-controls, screen

我有一个画布在`scrollviewer`. 此画布是一个动态画布，可以在其上放置许多其他控件。当控件被拖出画布区域（即右侧和底部）时，将显示滚动查看器。

我已经实现了放大和缩小画布的代码，效果很好，但找不到代码来实现使动态画布内容适合实际画布大小。

我正在寻找能够自动使画布内容适合其大小的东西，即计算缩放比例以使内容适合画布大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:55:10.330

This is a complicated one. You should work with some properties of the ScrollViewer to get the desired result: **ContentHorizontalOffset, ContentVerticalOffset, ViewportWidth, ViewportHeight (among others existing in the component..)**

Here is a snippet of code that helped me:

```
 Point realSize = new Point(this.canvasAreas.ActualHeight, this.canvasAreas.ActualWidth);
        Point sizeAvailable = new Point(this.scroolMain.ActualHeight, this.scroolMain.ActualWidth);

        double scaleX = sizeAvailable.X / realSize.X;
        double scaleY = sizeAvailable.Y / realSize.Y;

        double newScale = Math.Round(Math.Min(scaleX, scaleY), 2);

        this.gridScaleZoom.ScaleX = newScale;
        this.gridScaleZoom.ScaleY = newScale; 
```

There are several articles on CodeProject and looking on google that can assist you in working with ScrollViewer zoom. Although most are complicated and complex. Hope this helps you a bit.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T07:03:40.227

这是我的 xaml 代码：

并在按钮上单击我想相应地缩放。我已经尝试了下面的代码。

```
 Point realSize = new Point(this.formCanvas.ActualHeight, this.formCanvas.ActualWidth);
        Point sizeAvailable = new Point(this.myScrollViewer.ActualHeight, this.myScrollViewer.ActualWidth);

        double scaleX = sizeAvailable.X / realSize.X;
        double scaleY = sizeAvailable.Y / realSize.Y;

        double newScale = Math.Round(Math.Min(scaleX, scaleY), 2);

        this.canvasScale.ScaleX = newScale;
        this.canvasScale.ScaleY = newScale; 
```

结果也是一样的。如果代码不正确，请更正代码。

# android - android直接移植wifi

> ID：11292021
> 
> 赞同：1
> 
> 时间：2012-07-02T10:40:15.860
> 
> 标签：android, android-wifi, wifi-direct

我正在开发一个安卓应用程序。

我必须在两个设备之间建立临时连接。

我已经阅读了关于 android api level 14 及更高版本的 WiFi direct 的存在，但是是否可以将 wifi direct 库移植到 android api level 8？

**更新**
我已经阅读了有关在 Android 2.x 及更高版本上启用 WiFi ad hoc 的补丁，但存在一些风险。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:43:39.283

值得怀疑，因为它可能需要操作系统本身的帮助，但如果是，那么它将在[Android 支持库](http://developer.android.com/tools/extras/support-library.html)中，这是通过自定义库将有用的功能反向移植到以前的 API 的努力

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T22:53:59.483

抱歉，Wifi Direct API 不仅仅是操作系统库。没有反向移植工作。

# javascript - Javascript getJSON 不工作（可能跨域）

> ID：11292025
> 
> 赞同：0
> 
> 时间：2012-07-02T10:40:31.473
> 
> 标签：javascript, jquery

我从服务器获取 JSON，当我在浏览器中输入 url 时，我可以看到 JSON 数据。当我使用 curl 获取 JSON 时，我还可以看到数据。但是当我尝试在本地使用 html 页面来访问数据时，我得到了一个错误。我试过使用

```
$.support.cors = true; 
```

但我仍然得到一个错误，无论如何我可以解决这个可能的跨域问题吗？

谢谢，马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:46:41.430

其他答案提出了合适的替代方案（JSONP），但要解释*为什么*它不起作用；

的支持`cors`不是你可以*打开的*。这是浏览器和服务器必须支持的东西。

有关更多信息，请参见[此处](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)，但要总结一下：

*   服务器需要发出一个`Access-Control-Allow-Origin: *`标头（或定制`*`为您希望允许的域）。
*   您需要使用 Firefox 3.5、Safari 4、Chrome 3、IE 8 或 Opera 12。

您还可以查看[API 文档](http://api.jquery.com/jQuery.support/)`jQuery.support.cors`上的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:43:53.747

对跨域请求使用[JSONP（带填充的 JSON） 。](http://en.wikipedia.org/wiki/JSONP)另请参阅[jquery 插件](https://github.com/jaubourg/jquery-jsonp)以更轻松地处理 jsonp（甚至是基本错误处理）。这是一个很好的[示例页面](http://www.jquery4u.com/json/jsonp-examples/#.T_F8VbAe4eA)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T10:45:37.673

如果服务器支持`JSONP`，那么您可以`getJSON`通过附加`?callback=?`到 url 来获取数据。

但如果响应只是 json 格式，例如：

```
{a: 1, b:2} 
```

那么你不能使用ajax直接获取数据。一种解决方案是在您的服务器端制作一个代理，获取远程 json 数据，然后再次输出，以避免跨域问题。

# ruby-on-rails - Rails - 在隐藏字段中传递会话信息 - 出现错误

> ID：11292028
> 
> 赞同：0
> 
> 时间：2012-07-02T10:40:34.803
> 
> 标签：ruby-on-rails, session, hidden-field

我正在尝试从任务表单的隐藏字段中的会话中传递项目 ID，以便在创建任务时，它具有分配给它的项目的 ID。我以前做得很好，甚至尝试复制我在它工作时使用的代码，但是更改名称并且无论我做什么我都会遇到错误 - 如果有人可以帮助指出我要去哪里错了，不胜感激，谢谢！

我使用此配置遇到的错误是：“未知属性：project_id”

查看代码（任务/_form）：

```
<%= form_for(@task) do |f| %>
  <div class="field">
  <%= f.hidden_field :project_id, :value => session[:project_id] %>
  </div>
...
<% end %> 
```

型号代码（任务）：

```
attr_accessible :project_id

belongs_to :project 
```

控制器代码（tasks_controller）：

```
def new
  @task = Task.new
  @project_id = session[:project_id]

  respond_to do |format|
    format.html # new.html.erb
    format.json { render json: @task }
  end
end

def create
  project_id = session[:project_id]
  @task = Task.new(params[:task])

  respond_to do |format|
    if @task.save
      format.html { redirect_to @task, notice: 'Task was successfully created.' }
      format.json { render json: @task, status: :created, location: @task }
    else
      format.html { render action: "new" }
      format.json { render json: @task.errors, status: :unprocessable_entity }
    end
  end
end 
```

这是应用程序跟踪 - 它指向第 46 行，在我的代码中是创建操作中的 '@task = Task.new(params[:task])' 行...？

```
app/controllers/tasks_controller.rb:46:in `new'
app/controllers/tasks_controller.rb:46:in `create' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:16:54.123

任务模型是否有`project_id`列？

# javascript - 使用html5的互联网连接代码

> ID：11292033
> 
> 赞同：0
> 
> 时间：2012-07-02T10:40:52.657
> 
> 标签：javascript, html

> **可能重复：**
> [HTML5 是否允许 Web 应用程序进行点对点 HTTP 连接？](https://stackoverflow.com/questions/1032006/will-html5-allow-web-apps-to-make-peer-to-peer-http-connections)

我想建立从一台设备到另一台设备的 Internet 连接如何使用 html5 和 javascript 对其进行编码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:43:39.747

你不能——至少不能直接。

不仅 JS 不包含任何合适的 API，而且诸如 NAT 设备之类的东西往往会妨碍设备到设备的连接。

可能的解决方法包括让两个设备都连接到中央服务器，可能使用 WebSockets。

# c# - WPF ListBox 选择问题

> ID：11292037
> 
> 赞同：0
> 
> 时间：2012-07-02T10:41:07.777
> 
> 标签：c#, wpf

我正在开发带有一堆自定义控件的应用程序。我有一个带有 ListBox 的自定义控件，其中包含其他自定义控件的集合。

这是这 2 个自定义控件（容器和元素）的控件模板

容器（继承控件）：

```
<ControlTemplate TargetType="{x:Type local:Container}">
<Border Background="LightBlue"
        BorderBrush="RoyalBlue"
        BorderThickness="2" CornerRadius="5">                                               
    <StackPanel>                                                    
        <TextBlock TextAlignment="Center" Text="{TemplateBinding Name}" />
        <ListBox ItemsSource="{TemplateBinding Items}">
        </ListBox>
    </StackPanel>
</Border>
</ControlTemplate> 
```

元素（继承 ListBoxItem）：

```
<ControlTemplate TargetType="{x:Type local:Element}">
    <Border IsHitTestVisible="True" >                        
        <TextBlock Text="{TemplateBinding ElementName}" />
    </Border>
</ControlTemplate> 
```

问题是我无法在容器列表框中选择任何这些元素（HitTest 有问题）。

有什么方法可以使项目可选择或类似的东西？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:08:42.677

尝试按照下面的说明为 ListBox 设置 ItemsTemplate，而不是使用显式的 ControlTemplate。

[ItemsControl.ItemTemplate 属性](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemtemplate.aspx)

# c# - c# windows phone中使用反序列化json数据的数据绑定图片链接

> ID：11292039
> 
> 赞同：0
> 
> 时间：2012-07-02T10:41:13.440
> 
> 标签：c#, json, windows-phone-7, serialization, binding

我有一些 json 数据，所以我反序列化它并将数据绑定到列表框以在文本块中显示数据....现在问题是我试图在同一个列表框中添加图像并想要绑定图像源使用反序列化对象的数据

我的意思是图像的链接包含一些文本，这些文本存在于反序列化数据中，这些文本会随着数据的变化而变化......

**谁能告诉我如何使用反序列化对象的数据，然后创建一个新字符串来传递图像源以将其绑定到列表框中的图像？**

提前致谢...

更新：

**这是 xaml 的列表框部分**

```
<ListBox x:Name="listdata" ScrollViewer.VerticalScrollBarVisibility="Visible" ItemsSource="{Binding data}" Height="0" Margin="0,72,0,0">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <Grid>
                    <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0" DataContext="{Binding}">
                        <Image Grid.Row="1" Height="50" HorizontalAlignment="Left" Name="image1" Stretch="None" VerticalAlignment="Top" Width="50" Source="{Binding PicLink}" />
                        <TextBlock Height="50" HorizontalAlignment="Left" Margin="12,6,0,0" Name="textBlock1" Text="{Binding name}" VerticalAlignment="Top" Width="Auto" TextAlignment="Center" TextWrapping="Wrap" />
                        <TextBlock Height="Auto" HorizontalAlignment="Left" Margin="6,42,0,0" Name="textBlock3" Text="{Binding timedata}" VerticalAlignment="Top" Width="Auto" MinHeight="0" TextWrapping="Wrap" />
                    </Grid>
                </Grid>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

**这是c#代码的一部分：**

```
public class Datum
    {
        public string timedata { get; set; }
        string part = string.Empty;
        public string parts { get { return part; } set { part = value; } }
        public string name { get; set; }
        public string PicLink { get { return string.Format("google.com/{0}/image",part); } }
    } 
```

一切正常，除了图像.....当我替换 PicLink 以返回静态 url 而不是变量 1 时，图像部分也可以工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T13:33:44.473

如果要显示来自网络的图像，则必须先下载它们。这对于列表来说可能是个问题，因为它很耗时。

看看这个问题，看看它是如何完成的：[How to display an image from web in wp7?](https://stackoverflow.com/questions/8909974/how-to-display-an-image-from-web-in-wp7)

如果可以将图像包含到您的包中或以某种方式将它们缓存在隔离存储中，那就更好了！

**更新：**

您必须将“BitmapImage”类型的属性添加到您的类中。（也许 byte[] 也可以，现在不知道，请尝试一下）比您可以将 DataTemplate 中的 Image 的 ImageSource 绑定到此属性。如果您将此类用于 json 序列化程序，则无关紧要，因为序列化程序只会在反序列化时忽略它。为了更安全，请不要使用“DataMember”属性标记 ist。它可能看起来像：

```
private string _urlString;
[DataMember]
public string UrlPart
{
    get { return _urlString;}
    set 
    {
        _urlPart = value;
        LoadImage(); // in this function you do the downloading stuff
    }
}

private BitmapImage _itemImage;
public BitmapImage ItemImage
{
    get {return _itemImage;}
    // you can also add a setter if needed
} 
```

# iphone - 拖动图像时如何更改 alpha 值

> ID：11292041
> 
> 赞同：0
> 
> 时间：2012-07-02T10:41:31.387
> 
> 标签：iphone, ios, uiimageview

**目标：**我希望当我拖动图像时它会变淡，这样我们就可以看到背景视图。

我们如何在拖动时间增加或减少图像的 alpha 值？

**谢谢**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:43:03.963

减少你`image.alpha`的`touchesBegan`. 增加它在`touchesEnd`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T10:47:10.667

我认为您要求提供示例代码。您可以创建 UIImageView 的类子类。像：

。H

```
@interface YourImageController : UIImageView
{
    CGPoint startLocation;
}
@end 
```

.m

```
@implementation YourImageController
- (void) touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event {   
    [self setAlpha:x.x];

    // Retrieve the touch point
    CGPoint pt = [[touches anyObject] locationInView:self];
    startLocation = pt;
}

-(void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    [self setAlpha:x.x];
    CGPoint pt = [[touches anyObject] locationInView:self];
    CGFloat dx = pt.x - startLocation.x;
    CGFloat dy = pt.y - startLocation.y;

    CGPoint newCenter = CGPointMake(self.center.x + dx, self.center.y + dy);

    self.center = newCenter;
}
 -(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
 {
    [self setAlpha:1.0];
 } 
```

# android-layout - 对于膨胀的布局，注入的视图保持为空

> ID：11292042
> 
> 赞同：0
> 
> 时间：2012-07-02T10:41:33.170
> 
> 标签：android-layout, layout-inflater, roboguice

我可以在将被膨胀的布局中包含的元素上使用 Roboguice @InjectView 吗？在我看来，这些元素最初被声明为 @Nullable 似乎是正确的，因为它们在膨胀完成之前是未知的。但是在膨胀之后，元素仍然保持为空，直到完成“findViewById”。

举个例子：我使用下面的代码来注入一个可以为空的文本视图（标题），它包含在 title_layout 中，它会在主布局中膨胀：

```
@Nullable @InjectView(R.id.title) TextView title;
@InjectView(R.id.title_info) LinearLayout titleContainer; 
```

然后在 onCreate() 方法中我这样做：

```
setContentView(R.layout.main);
inflater.inflate(R.layout.title_layout, titleContainer); 
```

我有**main.xml**：

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
  <LinearLayout
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:id="@+id/title_info">
  </LinearLayout>
</LinearLayot> 
```

和**title_layout.xml**：

```
 <LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
    <TextView
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:id="@+id/title" 
      android:text="my title" />
</LinearLayot> 
```

膨胀视图的标题 (TextView) 始终为**null**，即使在 title_layout 膨胀之后也是如此。

这样做：

```
setContentView(R.layout.main);
inflater.inflate(R.layout.title_layout, titleContainer);
title = (TextView)findViewById(R.id.title);\ 
```

解决问题。

有什么方法可以使用@InjectView？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T15:09:21.660

我遇到了同样的问题——原来我是在扩展`Activity`而不是`RoboActivity`，所以它从来没有处理过注射。

# android - 如何为所有元素设置相同的选择器？

> ID：11292052
> 
> 赞同：1
> 
> 时间：2012-07-02T10:42:06.363
> 
> 标签：android, user-interface, checkbox, css-selectors

我需要有自定义复选框，这不是那么棘手。我将 checkbox_selector 设置为可绘制文件夹：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_enabled="false" android:drawable="@drawable/checkbox_disabled" /><!-- disabled -->
    <item android:state_checked="false" android:state_pressed="true" android:drawable="@drawable/checkbox_unchecked_focused" /><!-- pressing unchecked box -->
    <item android:state_checked="true" android:state_pressed="true" android:drawable="@drawable/checkbox_checked_focused" /><!-- pressing checked box -->
    <item android:state_checked="true" android:drawable="@drawable/checkbox_checked" /><!-- checked box -->
    <item android:state_checked="false" android:drawable="@drawable/checkbox_unchecked" /><!-- unchecked box -->

</selector> 
```

但问题是我所做的每个检查按钮，我都必须添加

```
<Checkbox
   android:button="@drawable/checkbox_selector" /> 
```

尝试谷歌回答一段时间，也许我找不到合适的词。

我可以在某个地方说这个应用程序中的每个复选框都应该使用这个@drawable/checkbox_selector 吗？

**编辑：** 在styles.xml中说

```
<style name="customCheckBox">
   <item android:button>@drawable/checkbox_selector</item>
</style> 
```

在 Android 2.3.3 中为我工作但是当我尝试使用 Android 4.0.3 时它不起作用。任何想法为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:24:34.493

您可以在清单中为所有控件定义它们（主题包含您的样式）

```
android:theme="@style/CustomCheckBox" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T10:46:09.010

您可以为此目的使用样式：只需在您的 style.xml 中设置：

```
 <style name="CustomCheckBox" >
    <item name="android:button">"@drawable/checkbox_selector</item>
 </style> 
```

然后只需将您的主题应用于所有复选框，执行以下操作：

```
 <Checkbox style="@style/CustomCheckBox" /> 
```

有关样式的更多参考，请阅读：

[http://developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html)

# java - 使用 java 代码对文本进行编码

> ID：11292053
> 
> 赞同：0
> 
> 时间：2012-07-02T10:42:07.763
> 
> 标签：java

我的代码使用 servlet 语言逐行读取文本并在字符串缓冲区中每 5000 个单词填充字符串缓冲区，然后在 jsp 页面中显示内容，然后我将标题显示文本放入 utf-8 问题是当文本在utf-8 编码代码以未知字符读取它，我希望我的代码以 utf-8 读取文本，以 utf-8 编码向用户显示的文本是我用于读取文本的代码

```
 try{
   File file = new File(p);         
   l = (int) file.length(); 
   String s = null,strr=null;
   String g = null,m=null;
   int i = 0;
   Scanner input = new Scanner(file); 
   s1 = new StringBuffer();
   s2 = new StringBuffer();
   while (input.hasNextLine()) {
     g = input.nextLine();
     String[] d = g.split(" ");
     int h = d.length;
     i = i + h;
     if (i > 5000) {
       break;
     }
     s1.append(g).append(System.getProperty("line.separator"));
   }
   if(i > 5000) {
     s2.append(g).append(System.getProperty("line.separator"));
     while( input.hasNextLine()) {
     s = input.nextLine(); 
     String[] d = s.split(" ");
     int h = d.length;
     i=0;
     i=i+h;
     if (i > 5000) {
       break;
     }
     s2.append(s).append(System.getProperty("line.separator"));}
     if (input.hasNextLine()) {
       s3.append(s).append(System.getProperty("line.separator"));
       while(input.hasNextLine()) {
         strr = input.nextLine(); 
         s3.append(strr).append(System.getProperty("line.separator"));
       }
     }
   }
 input.close(); 
 } catch (Exception e) {
   e.getMessage();
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:56:17.250

检查您正在使用的方法的 javadocs - [Scanner(File)](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#Scanner%28java.io.File%29)构造函数让您知道：

> 使用底层平台的默认字符集将文件中的字节转换为字符。

相反，您可以调用[Scanner(File, String)](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#Scanner%28java.io.File,%20java.lang.String%29)构造函数来显式指定文件编码：

```
Scanner input = new Scanner(file, "UTF-8"); 
```

# windows - 没有工作树就不能使用 Git-Windows-git-pull

> ID：11292057
> 
> 赞同：2
> 
> 时间：2012-07-02T10:42:16.603
> 
> 标签：windows, git, github

我在 Windows 上面临与 Git 相关的问题，无法从 git 上的 repo 中提取更改。我能够添加、提交和推送我的更改，但不能拉取。

它给了我一个错误：致命：C：** **\Git/libexec/git-core/git-pull 不能在没有工作树的情况下使用。**

在搜索此错误后，我得到了一些关于 SO 的链接，这些链接要求删除工作树或工作目录环境变量。这个链接似乎更多地解释了 git 是如何工作的，而不是引用如何解决它，而且似乎没有一个特定于 windows。所以我发布这个问题

我的不是一个裸仓库，这里是 git 配置文件内容：

```
 [core]
    repositoryformatversion = 0
    filemode = false
    bare = false
    logallrefupdates = true
    symlinks = false
    ignorecase = true
    hideDotFiles = dotGitOnly
[remote "origin"]
    fetch = +refs/heads/*:refs/remotes/origin/*
    url = https://username@github.com/Project/projectname.git
[branch "master"]
    remote = origin
    merge = refs/heads/master 
```

我第一次在 Windows 上使用 git 我正在使用 mysgit。我是否需要设置其他参数或一些特定于 Windows 的环境变量，就像在 ubuntu 上使用 git 一样，没有特殊步骤。

也提到了这个链接，但似乎不是最新的，因为这篇文章中指定的东西都不存在。[关联](http://ryanalberts.com/402/fatal-cprogram-filesgitlibexecgit-coregit-pull-cannot-be-used-without-a-working-tree/)

任何建议或帮助表示赞赏。

谢谢，让我知道这个问题是否适合这个论坛，或者我应该将它发布给超级用户。

**编辑：**

在 Eckes 发布之后，它帮助我找出了缺少工作树的错误。

我正在使用的工作站安装了另一个版本的 git，当我检查环境变量时，它被设置为它，一旦我清理它，我就不再收到以前的错误，但是 pull 仍然不起作用，出现错误：

* * *

**编辑**

```
 remote: Counting objects: 132, done.
 remote: Compressing objects: 100% (64/64), done.
 remote: Total 104 (delta 74), reused 70 (delta 40)
 Receiving objects: 100% (104/104), 33.05 KiB, done.
 Resolving deltas: 100% (74/74), completed with 24 local objects.
 fatal: write failure on 'stdout': Bad file descriptor
 error: https://github.com/Project/projectname.git did not send all necessary objects 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:51:15.047

那很奇怪。看着`Git/libexec/git-core/git-pull`（截至`git version 1.7.11.msysgit.0`），有命令

```
require_work_tree_exists 
```

该命令在以下位置实现`Git/libexec/git-core/git-sh-setup`：

```
require_work_tree_exists () {
  if test "z$(git rev-parse --is-bare-repository)" != zfalse
  then
    die "fatal: $0 cannot be used without a working tree."
  fi
} 
```

所以，如果你**真的不在**一个裸仓库中（即你发布`.git/config`的确实是你的仓库之一），这不会打印出消息。

但是`Git/libexec/git-core/git-sh-setup`打印出该字符串还有另一个命令：

```
require_work_tree () {
  test "$(git rev-parse --is-inside-work-tree 2>/dev/null)" = true ||
  die "fatal: $0 cannot be used without a working tree."
} 
```

我建议更改两条消息**之一**，以便能够确定哪一条与您真正相关。如果您在`git`没有 git repo 目录的目录上发出命令，则会发出第二个。只是为了确定：`git pull`必须在 git repo 中运行...

* * *

**编辑：**
为了检查出了什么问题，请尝试`require_work_tree_exists`git bash 上的代码。它不应该输入`then`代码的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-10T16:27:38.877

看这里：[git pull 疑难解答](https://stackoverflow.com/questions/8565828/troubleshooting-git-pull)

裸存储库没有工作树。git pull 在功能上与 git fetch 后跟 git merge 的功能相同，并且要进行合并，您必须有一个工作树（以防有冲突需要解决）。

你必须推送到一个裸仓库。Pull 将不起作用，因为它需要合并到一个工作目录，这就是您看到的错误消息所说的内容。因此，从您将要处理的存储库中设置一个远程到裸存储库并从中推送。PS：创建裸仓库的理想方法是执行 git init --bare

谢谢~

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-16T07:29:29.497

当路径输入的*大小写*`cannot be used without a working tree.`不正确时，可以在 Windows 上看到此错误 (" ") 。 这**将通过 git 2.7（2015 年第四季度）修复***`GIT_WORK_TREE`* 

 ***请参阅[Johannes Schindelin (](https://github.com/dscho) [)的](https://github.com/dscho)[提交 63ec5e1](https://github.com/git/git/commit/63ec5e1fecc14b0dd5452f0a2b80641600b03437)（2015 年 9 月 28 日） 。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 6652939](https://github.com/git/git/commit/6652939ce8cacb147bce2f0c3503486915ca5a73))^(中，2015 年 10 月 15 日）)[`dscho`](https://github.com/dscho)
^([`gitster`](https://github.com/gitster))

> 在不区分大小写的文件系统上，`GIT_WORK_TREE`使用与文件系统认为的内容不一致的随机案例设置变量会使 Git 感到困惑，因为它不在工作树内。

更确切地说：

> ### `setup`：修复不区分大小写的文件系统上的“内部工作树”检测
> 
> Git 有一个配置变量来指示它在不区分大小写的文件系统上运行：`core.ignoreCase`.
> 但该`dir_inside_of()`功能不尊重这一点。
> 结果，如果 Git 对当前工作目录的想法在其大写/小写中与`GIT_WORK_TREE`变量（例如`C:\test`vs `c:\test`）不一致，则用户将收到错误消息：

```
fatal: git-am cannot be used without a working tree. 
```

> 尝试运行变基时。
> 
> 这修复[了 git-for-windows#402](https://github.com/git-for-windows/git/issues/402)（由[Daniel Harding [living180]](https://github.com/living180)报告）。***

# xcode - 如何将沙盒应用程序添加到登录项

> ID：11292058
> 
> 赞同：22
> 
> 时间：2012-07-02T10:42:19.077
> 
> 标签：xcode, macos, cocoa, sandbox

如果用户选择该选项，我希望我的应用程序自动启动。沙盒应用程序不再允许我使用的方法。

我知道我必须创建一个助手来实现这一点？是否有一个带有示例代码的简单教程来激活它？

我找到了本教程，但它对我不起作用：http: [//www.delitestudio.com/2011/10/25/start-dockless-apps-at-login-with-app-sandbox-enabled/](http://www.delitestudio.com/2011/10/25/start-dockless-apps-at-login-with-app-sandbox-enabled/)

这是一件非常标准的事情，我不明白为什么没有可用的示例项目。

**更新：**

我上传了一个示例项目：[http ://ge.tt/6DntY4K/v/0?c](http://ge.tt/6DntY4K/v/0?c)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-05T20:52:48.490

您应该通过使用这个（免责声明：我的）[教程](http://blog.timschroeder.net/2012/07/03/the-launch-at-login-sandbox-project/)取得成功，包括示例项目。

**更新：**我现在已经测试了您上传的示例项目：它对我来说工作得很好，没有任何修改，并且在登录时启动成功。唯一的技巧是 AutoStart.app 文件必须放在 /Applications 或 ~/Applications 文件夹中才能在登录时成功启动。无论应用程序是否被沙盒化，这都是必要的。但是，恐怕没有关于此的官方文档。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-07T09:19:40.577

[我刚刚在Tim 的教程](http://blog.timschroeder.net/2012/07/03/the-launch-at-login-sandbox-project/)上重新做了大约 100 次试用。最后我让它工作了。虽然我发誓它在我第一次尝试时有效。在我的情况下，当我将“登录时启动”切换为开时，我只能在登录后看到帮助应用程序启动一秒钟。然后它就消失了。手动启动应用程序，我看到开关已关闭。

这是我发现的：

1.  我的包标识符已经在列表中 `NSArray *running = [[NSWorkspace sharedWorkspace] runningApplications]`
2.  的状态`NSRunningApplication *app (bundle name equal to my app)`是： `[app isActive] == NO`, `[app isHidden] == NO`,`[app isTerminated] = NO`

所以我对代码进行了一些修改，例如：

```
BOOL alreadyRunning = NO;
BOOL isActive = NO; // my modification
NSArray *running = [[NSWorkspace sharedWorkspace] runningApplications];
for (NSRunningApplication *app in running) {

    if ([[app bundleIdentifier] isEqualToString:@"com.mybundleidentifier"]) {
        alreadyRunning = YES;
        isActive = [app isActive]; // my modification
    }
}

if (!alreadyRunning || !isActive) { // my modification
  .... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T17:06:40.407

您可以尝试使用`Service Management Framework`

[http://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingLoginItems.html#//apple_ref/doc/uid/10000172i-SW5-SW1](http://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingLoginItems.html#//apple_ref/doc/uid/10000172i-SW5-SW1)

从[http://developer.apple.com/library/mac/#documentation/Security/Conceptual/AppSandboxDesignGuide/DesigningYourSandbox/DesigningYourSandbox.html](http://developer.apple.com/library/mac/#documentation/Security/Conceptual/AppSandboxDesignGuide/DesigningYourSandbox/DesigningYourSandbox.html)引用...

要为您的沙盒应用程序创建登录项，请使用守护程序和中所述的`SMLoginItemSetEnabled`函数（在 中声明`ServiceManagement/SMLoginItem.h`）。`Adding Login Items Using the Service Management Framework``Services Programming Guide`

（对于App Sandbox，不能使用`LSSharedFileList.h`头文件中的函数创建登录项，比如不能使用函数`LSSharedFileListInsertItemURL`，也不能操纵启动服务的状态，比如使用函数`LSRegisterURL`）。

# android - 如何在 Android UIThread 中监听传入事件

> ID：11292059
> 
> 赞同：0
> 
> 时间：2012-07-02T10:42:25.450
> 
> 标签：android, multithreading, communication

阅读了很多片段和教程后，我仍然（甚至更多）对要走的路感到困惑。我需要一个线程/后台任务，它侦听套接字上的传入事件并将任何传入事件报告给 UIThread。什么是首选的选择方式？自己的线程还是多任务处理？将数据传输到主线程的最佳方式？

感谢您对此事的任何想法。

问候， 马库斯

考虑到您在下面的答案，我尝试了以下方法：

主要活动：

```
public class MainActivity extends Activity {

Handler handler = new Handler() {

    @Override
       public void handleMessage(Message msg) {
            toastSomething();
      };
};

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    threadstarter();
}

protected void threadstarter() {

    super.onStart();

    Thread backgroundthread = new Thread(new WorkerThread(handler));
    backgroundthread.start();
}

public void toastSomething() {
    Toast.makeText(this, "hello", Toast.LENGTH_SHORT).show();
} } 
```

我的可运行文件：

```
public class WorkerThread implements Runnable {

Handler messageHandler;

WorkerThread(Handler incomingHandler) {
    messageHandler = incomingHandler;
}

public void run() {

    while (true) {

        for (int i = 0; i <= 100000; i++) {
            // wait a moment
        }
        messageHandler.sendEmptyMessage(1);
    }
} } 
```

我的布局只包含一个额外的复选框：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello" />

<CheckBox
    android:id="@+id/checkBox1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="CheckBox" /> 
```

好消息是，吐司出现了。糟糕的是，cehckbox 没有响应，应用程序崩溃得很快。是不是，应该怎么做？

编辑： WorkerThread 中的 sendMessage 中的消息似乎是麻烦制造者，因为异常说，消息都在使用中读取？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:30:25.810

您可以使用`AsyncTask`该类，并在 、 或 方法内的 UI 线程`onPreExecute(...)`上`onPostExecute(...)`发布`onProgressUpdate(...)`。

另一种方法是使用新线程进行后台工作，并将 a 发布`Runnable`到`Handler`.

如果您`Handler`在 UI 线程上实例化 ，那么您发布到处理程序的所有内容都将在 UI 线程上运行。如果您在后台线程上实例化处理程序，那么您发布到处理程序的所有内容都将在后台线程上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:46:42.460

从后台与 UIThread 通信的唯一方法是

```
runOnUIThread(new Runnable {.// your ui stuff goes here.});

handler.post(new Runnable{.// your ui stuff goes here.}); 
```

我想不出别的了..这两个在所有情况下都非常方便..

在汝

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T11:13:58.333

你可以像这样从后台线程到 UIThread

```
Runnable runnable = new Runnable() 
{
@Override
public void run() {
    for (int i = 0; i <= 10; i++) {
        handler.post(new Runnable() {
            @Override
                public void run() {
                    progress.setProgress(value);
                }
            });
        }
    }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T07:12:32.147

这是代码，终于可以工作了：

界面线程：

```
public class MainActivity extends Activity {

    public static final String LOG_TAG = "UIThread";

    Handler handler = new Handler() {

        @Override
           public void handleMessage(Message msg) {
                toastSomething();
                //Log.v(LOG_TAG, "main thread");
          };
    };

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        threadstarter();
    }

    protected void threadstarter() {

        super.onStart();

        Thread backgroundthread = new Thread(new WorkerThread(handler));
        backgroundthread.start();
    }

    public void toastSomething() {
        Toast.makeText(this, "hello", Toast.LENGTH_SHORT).show();
    }
} 
```

工作线程：

```
public class MainActivity extends Activity {

    public static final String LOG_TAG = "UIThread";

    Handler handler = new Handler() {

        @Override
           public void handleMessage(Message msg) {
                toastSomething();
                //Log.v(LOG_TAG, "main thread");
          };
    };

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        threadstarter();
    }

    protected void threadstarter() {

        super.onStart();

        Thread backgroundthread = new Thread(new WorkerThread(handler));
        backgroundthread.start();
    }

    public void toastSomething() {
        Toast.makeText(this, "hello", Toast.LENGTH_SHORT).show();
    }
} 
```

某人。感谢所有的输入。

# apache - WSDL2Java。阿帕奇 CXF。ArrayOf{Type} 列出

> ID：11292063
> 
> 赞同：9
> 
> 时间：2012-07-02T10:42:28.943
> 
> 标签：apache, wsdl, jaxb, cxf

如何生成`List<Type>`ArrayOf{Type} ？例如方法返回

```
[WebMethod]
public List<long> GetSimple() 
```

WSDL2Java 将生成：

```
public ru.test.ws.ArrayOfLong GetSimple(); 
```

长数组：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "ArrayOfLong", propOrder = {
    "_long"
})
public class ArrayOfLong
    implements Serializable
{
    @XmlElement(name = "long", type = Long.class)
    protected List<Long> _long;

    public List<Long> getLong() {
        if (_long == null) {
            _long = new ArrayList<Long>();
        }
        return this._long;
    }
} 
```

如何配置 CXF 和 JAXB 以使用`List<Long>`ArrayOfLong？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:46:43.990

2件事：

1）确保`<jxb:globalBindings collectionType="indexed"/>` **不**存在。它将所有集合转换为数组。

2）尝试使用`@WebResult`注释强制类型

希望这可以帮助。

# javascript - 将音频数据加载到 AudioBufferSourceNode 从 通过 createMediaElementSource 的元素？

> ID：11292076
> 
> 赞同：17
> 
> 时间：2012-07-02T10:43:05.647
> 
> 标签：javascript, html, html5-audio, web-audio-api

是否可以`<audio/>`通过-element 加载音频文件`createMediaElementSource`，然后将音频数据加载到**AudioBufferSourceNode 中**？

*使用音频元素作为源 (MediaElementSource) 似乎不是一种选择，因为我想使用 Buffer 方法`noteOn`和`noteGrain`.*

*不幸的是，通过 XHR 将音频文件直接加载到缓冲区也不是一种选择* （请参阅[Open stream_url of a Soundcloud Track via Client-Side XHR?](https://stackoverflow.com/questions/11165726/open-stream-url-of-a-soundcloud-track-via-client-side-xhr)）

不过，从音频元素加载缓冲区内容似乎是可能的：

[http://www.w3.org/2011/audio/wiki/Spec_Differences#Reading_Data_from_a_Media_Element](http://www.w3.org/2011/audio/wiki/Spec_Differences#Reading_Data_from_a_Media_Element)

或者甚至可以直接使用 -element 的缓冲区`<audio/>`作为 sourceNode 吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-14T22:45:24.237

似乎无法从 MediaElementSourceNode 中提取音频缓冲区。

见[https://groups.google.com/a/chromium.org/forum/?fromgroups#!topic/chromium-html5/HkX1sP8ONKs](https://groups.google.com/a/chromium.org/forum/?fromgroups#!topic/chromium-html5/HkX1sP8ONKs)

非常欢迎任何证明我错的回复！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-08T13:52:38.503

这个有可能。请参阅我在[http://updates.html5rocks.com/2012/02/HTML5-audio-and-the-Web-Audio-API-are-BFFs](http://updates.html5rocks.com/2012/02/HTML5-audio-and-the-Web-Audio-API-are-BFFs)上的帖子。那里还有一个代码片段和示例。有一些突出的错误，但将一个加载`<audio>`到 Web Audio API 应该可以按您的意愿工作。

```
// Create an <audio> element dynamically.
var audio = new Audio();
audio.src = 'myfile.mp3';
audio.controls = true;
audio.autoplay = true;
document.body.appendChild(audio);

var context = new webkitAudioContext();
var analyser = context.createAnalyser();

// Wait for window.onload to fire. See crbug.com/112368
window.addEventListener('load', function(e) {
  // Our <audio> element will be the audio source.
  var source = context.createMediaElementSource(audio);
  source.connect(analyser);
  analyser.connect(context.destination);

  // ...call requestAnimationFrame() and render the analyser's output to canvas.
}, false); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2022-01-18T10:00:04.863

今天 2020+ 可以通过 audioWorklet 节点

[https://developer.mozilla.org/en-US/docs/Web/API/AudioWorkletProcessor/AudioWorkletProcessor](https://developer.mozilla.org/en-US/docs/Web/API/AudioWorkletProcessor/AudioWorkletProcessor)

在 AudioWorkletContext 中运行，只有这样你才能通过消息传递二进制原始数据

```
// test-processor.js
class RecorderWorkletProcessor extends AudioWorkletProcessor {
  constructor (options) {
    super()
    console.log(options.numberOfInputs)
    console.log(options.processorOptions.someUsefulVariable)
  }
  // @ts-ignore 
  process(inputs, output, parameters) {
      /**
      * @type {Float32Array} length 128 Float32Array(128)
      * non-interleaved IEEE754 32-bit linear PCM 
      * with a nominal range between -1 and +1, 
      * with each sample between -1.0 and 1.0.
      * the sample rate depends on the audioContext and is variable
      */
      const inputChannel = inputs[0][0];  //inputChannel Float32Array(128)
      const { postMessage } = this.port;
      postMessage(inputChannel)  // float32Array sent as byte[512] 
      return true; // always do this!
  }
} 
```

主要代码

```
const audioContext = new AudioContext()

const audioMediaElement = audioContext.createMediaElementSource(
  /** @type {HTMLAudioElement} */ audio
);

await audioContext.audioWorklet.addModule('test-processor.js')
const recorder = new AudioWorkletNode(audioContext, 'test-processor', 
  {
     processorOptions: {
     someUsefulVariable: new Map([[1, 'one'], [2, 'two']])
  }
});

/**
 *   
 * Objects of these types are designed to hold small audio snippets, 
 * typically less than 45 s. For longer sounds, objects implementing 
 * the MediaElementAudioSourceNode are more suitable. 
 * The buffer contains data in the following format: 
 * non-interleaved IEEE754 32-bit linear PCM (LPCM)
 * with a nominal range between -1 and +1, that is, a 32-bit floating point buffer, 
 * with each sample between -1.0 and 1.0\.  
 * @param {ArrayBufferLike|Float32Array} data 
 */
 const convertFloatToAudioBuffer = (data) => {
    const sampleRate = 8000 | audioContext.sampleRate
    const channels = 1;
    const sampleLength = 128 | data.length; // 1sec = sampleRate * 1
    const audioBuffer = audioContext.createBuffer(channels, sampleLength, sampleRate); // Empty Audio
    audioBuffer.copyToChannel(new Float32Array(data), 0); // depending on your processing this could be already a float32array
    return audioBuffer;
}
let startAt = 0
const streamDestination = audioContext.createMediaStreamDestination();
/**
 * Note this is a minimum example it plays only the first sound 
 * it uses the main audio context if it would use a
 * streamDestination = context.createMediaStreamDestination();
 * 
 * @param {ArrayBufferLike|Float32Array} data 
 */
const play = (data) => {
    const audioBufferSourceNoce = audioContext.createBufferSource();  
    audioBufferSourceNoce.buffer = convertFloatToAudioBuffer(data);

    const context = audioContext; // streamDestination; // creates a MediaStream on streamDestination.stream property
    audioBufferSourceNoce.connect(context);    

    // here you will need a hugh enqueue algo that is out of scope for this answer
    startAt = Math.max(context.currentTime, startAt);
    source.start(startAt);
    startAt += buffer.duration;
    audioBufferSourceNoce.start(startAt);
}

// Here is your raw arrayBuffer ev.data
recorder.port.onmessage = (ev) => play(ev.data);

// connect the processor with the source
audioMediaElement.connect(recorder); 
```

## 笔记

这只是 console.log 记录来自记录器处理器的数据的最低要求，当您真的想要处理该数据时，我们只采用 1 个通道，您应该考虑在工作人员中再次注册一个将数据直接发布到的处理程序如果您进行大量处理，该工作人员以及您的主进程可能会变得无响应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-13T09:52:55.483

我不确定您是否找到了更好的解决方案，我还检查了您发布的 W3C 链接：http: [//www.w3.org/2011/audio/wiki/Spec_Differences#Reading_Data_from_a_Media_Element](http://www.w3.org/2011/audio/wiki/Spec_Differences#Reading_Data_from_a_Media_Element)

但为了让它真正起作用，你必须使用[`AudioContext.createScriptProcessor()`](https://developer.mozilla.org/en-US/docs/Web/API/AudioContext/createScriptProcessor). 我还没有尝试过，但基本上你将源节点（音频元素）连接到脚本处理器，但如果你不需要它甚至不输出音频。在`onaudioprocess`回调中，您可以直接访问音频缓冲区数据（当然是指定大小的块）。上面的链接中有例子。

此外，我认为您可以以某种方式调整播放速度，以便更快地获得更多缓冲区数组。

# subsonic - 使用 Subsonic 2.2 转换为 varchar

> ID：11292080
> 
> 赞同：0
> 
> 时间：2012-07-02T10:43:18.193
> 
> 标签：subsonic, subsonic2.2

我怎样才能重现

```
SELECT CAST(ID AS varchar(20)) AS IdAsString
FROM Table 
```

使用亚音速 2.2？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:56:46.067

```
DAL.DB.Select(
    string.Format("CAST({0} AS varchar(20)) AS IdAsString", DAL.Table.Columns.ID)
    )
.From<DAL.Table>()
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T05:11:16.003

从数据库生成类后，如下所示：

```
TableCollection tc = new TableCollection ();
TableCollection.Load();
string s = "";
foreach (Table t in tc) {
    s += " " + t.ID.ToString();
} 
```

我假设你想要整张桌子，否则你可能会从 ID 开始。你也可以使用

```
TableCollection.WHERE("OtherColumn", 23).Load(); 
```

限制返回的表记录。

# java - 如何删除所有重复的字符

> ID：11292081
> 
> 赞同：3
> 
> 时间：2012-07-02T10:43:30.817
> 
> 标签：java, regex

我不喜欢使用 Java 来删除所有重复字符的 Regex 示例。

此代码效果不佳：'g' 和 '<' 被删除，两个以上的字符没有明显减少为一个，'454' 减少为 '5'。

```
s = "aa  hgjii2222 22    FFonn;;;,,1111111111 22< 454";
p = Pattern.compile("(.)(.)");
m = p.matcher(s);
System.out.println(m.replaceAll("$1") ); 
```

输出 ：

> 一个 hji222 Fon;,11111 2 5

我尝试了其他不太成功的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T10:46:34.247

你可以做：

```
String s= "aa  hgjii2222 22    FFonn;;;,,1111111111 22< 454";
s = s.replaceAll("(.)\\1+","$1"); 
```

使用的正则表达式是：`(.)\\1+`

```
(.)  - Matches any non-newline character and remembers it
\\1+ - One or more repetitions of the remembered character 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T10:46:35.770

利用

```
"(.)\\1+" 
```

反而。

第一个符号重复一次或多次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T10:46:43.573

这种模式根本无法达到您的期望。

它找到**任意字符**，后跟**任意字符**（不一定与第一个相同），然后将这两个字符串替换为第一个匹配项（第一个字符）。

换句话说，它会删除所有其他字符。

我不认为正则表达式是您正在寻找的工作的正确工具。考虑如何将其作为 FSA 来实现，并且应该清楚的是，常规语言根本不能很好地描述问题。

简单地在代码中执行此操作会更简单，并且可以说更清晰。保留迄今为止遇到的所有字符的集合，并在迭代时删除任何匹配的字符 - 例如：

```
final Set<Character> charsSeen = new HashSet<Character>();
final StringBuilder out = new StringBuilder();
for (char c : s.toCharArray()) {
    if (!charsSeen.contains(c)) {
        out.append(c);
        charsSeen.add(c);
    }
}
return out.toString(); 
```

# php - 将字符串分成多个部分

> ID：11292085
> 
> 赞同：1
> 
> 时间：2012-07-02T10:43:44.677
> 
> 标签：php, string, parsing

我想要做的是取一个字符串并将其分成更小的部分。输入字符串具有固定的结构：

```
{something here}loremipsum;loremipsum2;{something else here} ... 
```

我想做的是每次找到括号或“;”时创建一个子字符串，即：

```
{ something here }
lorem ipsum
lorem ipsum 2
{ something else here } 
```

到目前为止，我编写的 PHP 代码并不总是能很好地工作，这意味着有时我会得到类似于`{something here}loremipsum`单个部分的东西，而当它应该分成两个部分时。

```
public function divide() {
    $item = "";
    $splitted_instructions = str_split($this->instructions);
    for($i=0; $i<count($splitted_instructions); $i++) {
        if ($splitted_instructions[$i] == "{") {
            while ($splitted_instructions[$i+1] != "}") {
                $i++;
                $item .= $splitted_instructions[$i];
            }
            $item = "{" . $item . "}";
            $items[] = $item;
            $item = "";
        } else {
            while ($splitted_instructions[$i+1] != ";" && $i<count($splitted_instructions)) {
                $i++;
                $item .= $splitted_instructions[$i];
            }
            $items[] = $item;
            $item = "";
        }
    }
    print_r($items);
} 
```

当然，如果有更好的方法，请告诉我:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T10:48:33.883

```
$parts = preg_split("/((?<=\\})|\\;|(?=\\{))/", $source, -1, PREG_SPLIT_NO_EMPTY); 
```

它通过正则表达式定义的分隔符拆分`$source`：即，通过以下之一：

1.  `}`以字符开头的光标位置
2.  `;`特点
3.  后跟一个`{`字符的光标位置

[`Working DEMO`](http://codepad.viper-7.com/C9UfNT)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T10:48:16.237

正则表达式的简单应用：

```
$string = preg_replace('/({.*?})(.*?);(.*?);({.*?})/', "\\1\n\\2\n\\3\n\\4\n", $string); 
```

# postgresql - heroku db:push Taps 加载错误：

> ID：11292089
> 
> 赞同：1
> 
> 时间：2012-07-02T10:43:54.947
> 
> 标签：postgresql, heroku, gem, taps

根据将数据推送到heroku postgres，是否有人面临这个问题`heroku db:push`

这是错误

```
D:\workspace\gitrepo\xxx> heroku db:push

 !    Taps Load Error: no such file to load -- taps/operation
 !    You may need to install or update the taps gem to use db commands.
 !    On most systems this will be:
 !
 !    sudo gem install taps 
```

发生此错误后，我尝试使用添加类似这样的 Database_url

```
D:\workspace\gitrepo\xxx> heroku db:push postgres://postgres:mypassword@localhost:5432 
```

它显示相同的错误

所以我尝试使用命令重新安装新水龙头

```
sudo heroku install taps 
```

显示错误

```
'sudo' is not recognized as an internal or external command,
operable program or batch file. 
```

### 我的工作站信息

*   操作系统：窗口 7
*   Heroku Toolbelt 最新版本于 2012 年 7 月 2 日下载
*   宝石

    ```
    D:\workspace\gitrepo\xxx> gem list

    *** LOCAL GEMS ***

    foreman (0.47.0, 0.45.0)
    mime-types (1.18)
    minitest (1.6.0)
    rack (1.4.1)
    rake (0.8.7)
    rdoc (2.5.8)
    rest-client (1.6.7)
    sequel (3.20.0)
    sinatra (1.0)
    taps (0.3.24)
    thor (0.15.0) 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:48:16.703

sudo 是一个linux命令。从您的问题看来，您使用的是 Windows 7。因此，这对您不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:53:26.880

确保您已安装 ruby​​，然后：

打开命令 shell`(‘Start’ >> ‘Run’ >> ‘cmd’)`并导航到 ruby`bin`​​ 目录。通常这将`C:\ruby`运行`gem install taps –include-dependencies`；这应该安装 gem。

# c++ - 多线程返回与单线程不同的结果

> ID：11292091
> 
> 赞同：0
> 
> 时间：2012-07-02T10:44:04.637
> 
> 标签：c++, multithreading, mutex

我的代码有一个问题，即多线程和单线程之间的结果不同。

我有一个函数，它获取输入图像，并围绕中心旋转 n 步，并对该图像进行一些分析。为了提高速度，我重写了函数以将起始角度和结束角度作为输入，并计算两者之间的值。

原型是

`void rotateImageConvolution(float* image, int startMin, int startMax)`

现在，当我用 0..180 调用该函数时，它每次都会返回相同的结果，效果很好。由于我有一个 4 核 CPU，我有 3 个线程在运行，运行 0..60、60..120、120..180，因为它运行 (int i = startMin; i < startMax)

对全局内存的唯一写入是

```
 if(convolution_image[i] < convrst)
            {
                WaitForSingleObject( mLock[i],    // handle to mutex
                    INFINITE);  // no time-out interval
                if(convolution_image[i] < convrst)
                {   
                    convolution_image[i] = convrst;
                    r_map_image[i] = (unsigned char)r0;
                    orientation_map_image[i] = (unsigned char)a;
                }
                ReleaseMutex(mLock[i]);
            } 
```

其中convrst是卷积的结果，convolution_image保存计算值。i 是图像中的索引并且变为 0..imagesize mLock 是一个句柄块

```
mLock = new HANDLE[imgsize];
for(int i = 0; i < imgsize; ++i)
{
    mLock[i] = CreateMutex( NULL, FALSE, NULL);
} 
```

所有其他使用的内存都在函数中分配并再次释放。有趣的是，如果我在 convrst 部分禁用 Mutex，我会得到随机结果，很多不同的结果。如果我启用它们，我会得到两个结果之一，一个是正确的结果（与单线程相同），一半是不同的结果。

我无法弄清楚这里发生了什么，也看不出那里出了什么问题。

可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:55:15.363

如果您的互斥体包装了整个 if 语句怎么办？请记住，您的 if 语句可能正在读取 convolution_image[i] 而另一个线程正在编写它。

*可能*会绊倒你的场景：

1.  线程 1 刚刚完成锁定关键部分
2.  然后线程 2 评估 if 语句。
3.  然后线程 2 被互斥锁阻塞
4.  线程 1 解锁了互斥锁（并且隐含地计算了卷积图像 [i]）。
5.  然后线程 2 锁定临界区，然后继续计算与线程 1 在步骤 4 中相同的卷积图像 [i]。

# c# - 在 C# 中使用 post 请求上传到 box.net

> ID：11292092
> 
> 赞同：3
> 
> 时间：2012-07-02T10:44:11.247
> 
> 标签：c#, asp.net, httpwebrequest, box-api

我想通过 api 在 box.net 上上传文件，并以这种方式通过发布请求发布我的文件

根据 Box.NET 的文档，这里是请求 url

```
https://upload.box.net/api/1.0/upload/<auth token>/<folder id> 
```

这是文档[http://developers.box.net/w/page/12923951/ApiFunction_Upload%20and%20Download](http://developers.box.net/w/page/12923951/ApiFunction_Upload%20and%20Download)

```
WebRequest request = WebRequest.Create("https://upload.box.net/api/1.0/upload...;
request.Method = "POST";

byte[] byteArray = File.ReadAllBytes(@"C:\a.docx");

request.ContentType = "application/x-www-form-urlencoded";
request.ContentLength = byteArray.Length;
Stream dataStream = request.GetRequestStream();
dataStream.Write(byteArray, 0, byteArray.Length);
dataStream.Close();
WebResponse response = request.GetResponse();
Console.WriteLine(((HttpWebResponse)response).StatusDescription);
dataStream = response.GetResponseStream();
StreamReader reader = new StreamReader(dataStream);
string responseFromServer = reader.ReadToEnd();
reader.Close();
dataStream.Close();
response.Close(); 
```

我收到这条消息“upload_no_files_found”的异常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:14:33.000

根据示例上传请求上的[此页面](http://developers.box.net/w/page/12923951/ApiFunction_Upload%20and%20Download)，Box.net 请求一些参数`new_file1`，例如`share`和`emails[]`。

因此，您需要发送此参数而不仅仅是文件。从[MSDN 示例中了解如何发布参数](http://msdn.microsoft.com/en-us/library/d4cek6cc.aspx)的关键点是使用您要发送的文件制作这个完整的字符串。我专注于将参数与要发送的文件一起制作的这一行。

```
 string postData = "firstone=" + inputData;
    ASCIIEncoding encoding = new ASCIIEncoding ();
    byte[] byte1 = encoding.GetBytes (postData); 
```

对于您的情况，这看起来像

```
 string postData = "share=1&emails[]=test@domain.com&new_file1=" + FileData;
    ASCIIEncoding encoding = new ASCIIEncoding ();
    byte[] byte1 = encoding.GetBytes (postData); 
```

你的最终代码必须是这样的：

```
 WebRequest request = WebRequest.Create("https://upload.box.net/api/1.0/<auth_token>/<file_id>/<version_id>;
     request.Method = "POST";

    // open and read file
    byte[] byteArray = File.ReadAllBytes(@"C:\a.docx");

    // make the parametres
    string postData = "share=1&emails[]=test@domain.com&new_file1=";
    ASCIIEncoding encoding = new ASCIIEncoding ();
    byte[] parametres = encoding.GetBytes (postData);

    // set the Type
    request.ContentType = "application/x-www-form-urlencoded";
    // the full length.
    request.ContentLength = parametres.Length + byteArray.Length;

    // now we go for post
    Stream dataStream = request.GetRequestStream();
    // send the parametres
    dataStream.Write(parametres, 0, parametres.Length);
    // follow the file
    dataStream.Write(byteArray, 0, byteArray.Length);

    // flush and close what you have send  
    dataStream.Close(); 
```

现在是这个想法，但我无法调试这段代码来测试它，也许从一开始就无法正常工作，需要进行一些更改和调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T12:06:23.233

这可能会有所帮助。我正在使用 v2 API 和 RestSharp。

```
 // as per http://developers.box.com/docs/#files-upload-a-file
        RestClient client1 = new RestClient();
        client1.BaseUrl = "https://upload.box.com";
        var request = new RestRequest(Method.POST);
        request.Resource = "api/2.0/files/data";
        string Headers = string.Format("BoxAuth api_key={0}&auth_token={1}",
                api_key,
                AuthToken);
        request.AddHeader("Authorization", Headers);
        request.AddParameter("folder_id", FolderID);
        request.AddFile("filename", filePath);

        //request.RequestFormat = DataFormat.Json;
        var response = client1.Execute(request);
        return response.Content; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-25T13:02:58.680

通过 Box.net 和 BOX API 创建文件夹和上传文档

```
public void Upload_Doc(string folder_id, string accessToken)
    {
   var client = new RestClient("https://upload.box.com/api/2.0");
    var request = new RestRequest("files/content", Method.POST);
    request.AddParameter("parent_id", folder_id);

    request.AddHeader("Authorization", "Bearer " + accessToken);

    string path = @"D:\Project\21Teach\Documents\screenshots.docx";
    byte[] byteArray = System.IO.File.ReadAllBytes(path);

    request.AddFile("filename", byteArray, "screenshots.docx");

    var responses = client.Execute(request);
    var content = responses.Content;
}
static string folderCreation(string APIKey, string authToken)
{

    RestClient client = new RestClient();
    client.BaseUrl = "https://api.box.com/2.0/folders";
    var request = new RestRequest(Method.POST);
    string Headers = string.Format("Bearer {0}", authToken);
    request.AddHeader("Authorization", Headers);
    request.AddParameter("application/json", "{\"name\":\"Youka\",\"parent\":{\"id\":\"0\"}}", ParameterType.RequestBody);
    var response = client.Execute(request);
    return response.Content;

} 
```

# php - 写入或读取文件时出现服务器错误

> ID：11292097
> 
> 赞同：0
> 
> 时间：2012-07-02T10:44:22.663
> 
> 标签：php, apache, file

我开发以下代码：

```
if (time() - filemtime('current.txt') > 5)
{
$xml = simplexml_load_file("http://live.liveradio.ir:8000/liveradiomp3_48.xspf");
    foreach($xml->children() as $child)
    {
        if ($child->getName() == 'trackList')
        {
            foreach($child as $child2)
            {
                if ($child2->getName() == 'track')
                {
                    foreach($child2 as $child3)
                    {
                        if ($child3->getName() == 'title')
                        {
                            $fp = fopen('current.txt', 'w');
                            fwrite($fp, json_encode(array('data',$child3)));
                            fclose($fp);
                        }
                    }
                }
            }
        }
    }
}
echo (file_get_contents('current.txt')); 
```

但是当我运行它时，显示以下页面：

```
服务器错误
该网站在检索 http://liveradio.ir/temp.php 时遇到错误。它可能因维护而停机或配置不正确。
以下是一些建议：
稍后重新载入此网页。
HTTP 错误 500（内部服务器错误）：服务器尝试完成请求时遇到了意外情况。
```

`temp.php`和的权限`current.txt`是777。当我评论以下行时，问题解决了。

```
$fp = fopen('current.txt', 'w');
fwrite($fp, json_encode(array('data',$child3)));
fclose($fp);
echo (file_get_contents('current.txt')); 
```

问题出在哪里？此代码在 localhost 上正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:47:55.003

网址离线。这是你的主要问题；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:20:03.573

您需要检查远程服务器配置中是否允许通过此特殊端口 8000 获取 XML。

# visual-studio-2010 - 如何在项目/解决方案中添加现有文件夹

> ID：11292099
> 
> 赞同：1
> 
> 时间：2012-07-02T10:44:34.920
> 
> 标签：visual-studio-2010

我在文件夹中组织了许多源文件，我需要将它们集成到我的解决方案中。但是，无法将所有这些文件夹转移到我的项目中。只有文件传输（通过拖放或通过选择添加现有项目）是可能的。是否可以将文件夹与其中的文件一起传输？

# jquery - 正确获取 jquery 选择器

> ID：11292103
> 
> 赞同：2
> 
> 时间：2012-07-02T10:44:56.813
> 
> 标签：jquery

我有以下html：

```
<div class="mainmenu">
    <ul class="blue">
                <li class=""><a href="tst/" id="a1_up"><span class="all">tst1</span></a></li>
              <li class=""><a href="tst1/" id="a2_up"><span class="all">tst2</span></a></li>
              <li class=""><a href="tst3/" id="a3_up"><span class="all">tst3</span></a></li>
              <li class=""><a href="tst4/" id="a4_up"><span class="all">tst3</span></a></li>
              <li class=""><a href="tst5/" id="a5_up"><span class="all">tst4</span></a></li>
              <li class=""><a href="tst6/" id="a6_up"><span class="all">tst5</span></a></li>
              <li class=""><a href="tst7/" id="a7_up"><span class="all">tst6</span></a></li>
          </ul>
  </div> 
```

我需要收集所有跨度值这部分`<span class="all">tst6</span>`我在 jsbin 上试过这个：

```
$(document).ready(function() {
  $(".mainmenu ul li > span").each(function() {
    alert($(this).val());
    });
 }); 
```

但什么也没有发生。它在这里上传：

[http://jsbin.com/emulah](http://jsbin.com/emulah)

现场编辑：

[http://jsbin.com/emulah/edit#javascript,html,live](http://jsbin.com/emulah/edit#javascript,html,live)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:46:36.947

试试这个：**工作演示** [http://jsfiddle.net/mHfUs/5/](http://jsfiddle.net/mHfUs/5/)

```
$(document).ready(function() {
    $(".mainmenu > ul > li > span").each(function() {
        alert($(this).text());
    });
});​ 
```

ps jsfiddle 表现得很有趣，否则我已经准备好了演示`:)`

`a`介于两者之间`li`，`span`正如您在上面的演示中所见：< 这将起作用 >

```
$(document).ready(function() {
    alert('f');
    $("div.mainmenu ul li a span").each(function() {
        alert($(this).text());
    });
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T10:52:48.640

您的选择器完全错误：

`">"`表示`direct child`, 并且`span`不是 , is 的直接`li`子代`a`。

要么将其重写为`.mainmenu ul li span`，或者更好的是，使用更短的选择器，例如：

```
$('.mainmenu span.all') 
```

或者

```
$('.blue span') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T10:46:15.727

您的 span 元素没有值 ( `val()`)。

尝试`text()`改为：

```
alert($(this).text()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T10:52:41.523

您可以使用[.map](http://api.jquery.com/map/)来获得结果。（span 没有价值，你应该使用`.text()`获取 innerHtml 文本）

```
var values = $(".mainmenu ul li > span").map(function() {
  return $(this).text();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T10:55:19.297

1-您的`span`元素不是元素的直接后代`li`，因此选择器

```
(".mainmenu ul li > span") 
```

不会匹配任何元素。改写`$(".mainmenu li span")`

2-代替`val()`方法使用`text()`方法

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-02T11:24:08.220

以下是使用 jquery 选择正确选择器并在其上应用适当属性的解决方案。

```
$(document).ready(function() {
var result = '';
$(".mainmenu ul li span.all").each(function() {
    result += '<div><a href="#">' + $(this).text() + '</a></div>';
});
$('#result').html(result);
$("#result").addClass("output") 
```

});

我在[http://codebins.com/codes/home/4ldqpcb上创建了一个带有解决方案的 bin](http://codebins.com/codes/home/4ldqpcb)

# javascript - javascript在单个语句中混合数字和字符串

> ID：11292104
> 
> 赞同：0
> 
> 时间：2012-07-02T10:44:59.327
> 
> 标签：javascript, types

我想将一个数字更改为这样的字符串：

```
var i = slides.length*100;
i += '%';
el.style.height = i; 
```

但我发现我也可以在一个语句中完成所有操作：

```
el.style.height = slides.length*100 + '%'; 
```

可以在这样的单个语句中混合数字和字符串吗？还是我应该避免它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T07:42:09.637

事实证明，只要您了解运算符优先级，以这种方式混合字符串和数字就可以了：

例如：

```
3 * 100 + '%'; -> String = '300%'
3 + 100 + '%'; -> String = '103%'
'%' + 100 + 3; -> String = '%1003'
'%'+(100 + 3); -> String = '%103'
3 + 100 * '%'; -> Number = NaN 
```

希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:54:54.753

通常，您可以将许多方法连接在一起以将它们加入到单个参数中。如果您是新手，一般规则是您的测试是否适用于四大渲染引擎（Gecko/Firefox、Presto/Opera、Trident/Internet Explorer 和 WebKit（Safari 和 Chrome 分支），那么通常这是预期行为或你最终真的很幸运，但几乎总是第一个。继续试验并记住一些关于 JavaScript 的小事......

JavaScript 不是 DOM，尽管很容易混淆两者。DOM 基本上是 (X)HTML 代码的表示，getElementById 等方法是 DOM 规范的一部分，而不是 Ecmascript。

不要使用 innerHTML，它没有正确注册 DOM。

不要使用框架，它们写得很糟糕（并且使用了 innerHTML），与原生渲染相比速度非常慢，并且与应用程序不兼容（而且大多数人不知道脚本和应用程序级别之间的区别）。

使用警报（typeof my_variable）；确定对象的类型。

请记住，JavaScript 中没有数组，只有每个人都喜欢将其称为数组的对象。

没有愚蠢的问题，只有糟糕的问题；我投票支持你，这里可能有很多态度不好的人，忽略他们。您的问题很简短，简洁且不涉及很多主观性（例如您未发布或参考的代码）。

# c# - 提高获取 json 字符串的 ajax 调用的性能

> ID：11292105
> 
> 赞同：0
> 
> 时间：2012-07-02T10:45:01.253
> 
> 标签：c#, asp.net, ajax, json, entity-framework

我正在开发一个 ASP.NET C# 应用程序，并且希望提高操作的性能。

我有一个按钮，当用户单击它时，我发送一个 Ajax 调用以从数据库中获取数据并显示数据。

数据库的架构是这样的：

![数据库架构](../Images/678c0f77a664621b81ce8943648cd5ba.png)

我有一个国家列表，每个国家都有多个系列（人口、石油、水......），每个系列都有多年（每年都有一个值）。所以基本上它是每个国家多年来一系列的演变。

为了获取数据，我使用 AJAX 调用 Web 服务。该网络服务将一个系列名称作为输入，我需要输出该系列多年来每个国家/地区的数据。输出数据应该是一个 Javascript 对象，如下所示：

水= {“1990”：{“美国”：0.1，“加拿大”：0.3，“澳大利亚”：0.4}，“1991”：{“美国”：0.1，“加拿大”：0.5}}

ajax 调用：

```
 $.ajax({
                type: "POST",
                url: "Service/WebService.asmx/GetData",
                dataType: "json",
                async: false,
                data: "{'Series':'" + Series+ "'}",
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    mapValues = JSON.parse(data.d); 
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    alert(errorThrown);
                }
            }); 
```

该服务使用实体框架从数据库中读取。

```
var Context = new DataModel.DBEntities();
IEnumerable<YearClass> r = (from y in Context.Years
                                          where y.Series.Name == Variable
                                          select new YearClass
                                          {
                                              year = y.Name,
                                              value = y.Value,
                                              CountryCode = y.Series.Country.Code
                                          }); 
```

yearClass 是一个强类型类型，只是为了在这里使用它。

然后我遍历所有年份并通过连接字符串以匹配所需格式来构建 JSON。

然而这个过程需要很多时间，我需要找到一种方法来提高它的性能。

哪些部分可以改进？非常感谢任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T13:26:27.897

不要自己生成 JSON。一旦您构建了具有正确属性的对象图，请从控制器操作中将其作为[`JsonResult`](http://msdn.microsoft.com/en-us/library/system.web.mvc.jsonresult.aspx)使用[`Json()`](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.json.aspx)函数返回。您还可以考虑使用第三方 JSON 序列化程序，例如[JSON.net](http://nuget.org/packages/newtonsoft.json)。

# java - 为什么在 Java 代码中实现单例模式（有时）被认为是 Java 世界中的反模式？

> ID：11292109
> 
> 赞同：37
> 
> 时间：2012-07-02T10:45:34.057
> 
> 标签：java, design-patterns, singleton

我在 SO 中看到有人评论说单例模式是一种反模式。我想知道为什么？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-07-02T10:47:45.520

**测试**

一个原因是单例不容易通过单元测试来处理。您无法控制实例化，并且它们的本质可能会在调用之间保留状态。

[出于这个原因，依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)的原理很流行。每个类都被注入（配置）了它们需要运行的类（而不是通过单例访问器派生），因此测试可以控制要使用的依赖类实例（并在需要时提供模拟）。

Spring 等框架会控制其对象的生命周期，并且经常会创建单例，但这些对象是由框架注入到它们的依赖对象中的。因此，代码库本身不会将对象视为单例。

例如而不是这个（例如）

```
public class Portfolio {
   private Calculator calc = Calculator.getCalculator();
} 
```

你会注入计算器：

```
public class Portfolio {
   public Portfolio(Calculator c) {
      this.calc = c;
   }
} 
```

因此，该`Portfolio`对象不知道/关心存在多少个实例`Calculator`。`Calculator`测试可以注入一个使测试变得容易的虚拟对象。

**并发**

通过将自己限制在一个对象的一个​​实例上，线程的选项是有限的。可能必须保护对单例对象的访问（例如通过同步）。如果您可以维护这些对象的多个实例，那么您可以根据正在运行的线程调整实例数量，并增加代码库的并发能力。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-07-02T10:47:49.267

我个人的看法是，它违反了单一责任原则。单例对象负责它们的目的和控制它们产生的实例数量，我认为这是错误的。

这就是为什么很多人将控制权委托给工厂对象的原因。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-02T11:30:43.643

[可变] Singleton 是一种反模式的反模式。

重要的底层反模式是全局状态（或环境状态）。使用全局状态，您可以在整个程序中拥有一个很大的依赖关系博客。这确实会影响测试，但这只是不良编程后果的一部分。

`static`在此基础上，与简单地声明可变字段相比，Singleton 增加了完全不必要的复杂性。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-07-02T10:56:00.787

像这样的单例不一定是反模式，但它们只有很少的好处，并且在使用错误时会成为反模式（这种情况经常发生）。

通常，单例根本不是单例，而是“伪装的全局变量”。此外，当“只有一个实例”属性实际上不是优势时，通常会使用它们。（这再次被许多次实施同时错误的事实所平衡）。

除此之外，考虑到多线程实现它们可能会很棘手（通常做错或效率低下），如果你想控制它们的实例化，它们就会失去大部分好处。

如果您想控制实例化，您需要在程序早期的某个时间点手动完成，但是您也可以只创建一个普通对象的实例并继续传递。
如果破坏顺序有任何问题，您也需要手动实现它。主函数中的单个自动对象更加简洁和容易。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-07-02T10:54:35.047

您可能对单例有许多要求：

1.  延迟初始化；
2.  妥善处置；
3.  作用域（例如，每个线程一个）。

通常，您的应用程序中还会有很多单例，并且*单例*模式不允许可重用​​代码。因此，如果您想为所有单例实现所有这些问题，您将立即看到它的*反模式*质量。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-09-11T16:29:46.370

奇怪的。似乎单例的错误实现是一种“反模式”，而不是单例本身。

我想我们忘记了每个程序都必须从某个地方开始。每个抽象都必须有一个具体的实现，最终每个依赖项最终都会得到解决，否则您的应用程序将没有多大用处。

大多数 DI 框架允许将类实例化为单例，它只是为您处理。如果你选择自己做 DI，注入单例不是问题。Singleton 也是可测试的，如果您使用 DI 注入它，不会使类变得不稳定。

IMO，就像其他所有模式（包括 DI 和 IoC）一样，它是一个工具。有时适合，有时不适合。

# ruby-on-rails - 遗留数据库 - 模型验证

> ID：11292110
> 
> 赞同：0
> 
> 时间：2012-07-02T10:45:36.677
> 
> 标签：ruby-on-rails

我在我的 Rails 应用程序中使用旧数据库。

我想在我的应用程序中加入模型验证，但它似乎不适用于旧数据库。

** 模型人 **

```
class Person < ActiveRecord::Base

set_table_name "EMI_PERSON"
set_primary_key "PER_ID"
attr_accessor :person_title
validates :PER_FORENAME, :presence => true

end 
```

当我包含`'validates :PER_FORENAME, :presence => true'`在我的模型中时，我收到以下错误消息：

```
NoMethodError in PersonsController#edit

undefined method `validates' for Person(Table doesn't exist):Class 
```

我非常感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:04:18.110

尝试使用`validates_presence_of`而不是`validates`.

# sql-server - 如何计算此类查询中的值？

> ID：11292115
> 
> 赞同：0
> 
> 时间：2012-07-02T10:45:45.210
> 
> 标签：sql-server

我有 2 个查询...如何组合这个...

```
SELECT ID,COUNT(ID)
FROM TABLE_NAME
WHERE ID IN(2,3) GROUP BY ID 
```

结果喜欢

```
2 5
3 9 
```

我必须加 5+9

```
SELECT ID,COUNT(ID)
FROM TABLE_NAME
WHERE ID NOT IN(5)
GROUP BY ID 
```

我想结合这些查询并得到一个结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:57:28.590

试试这个，如果你只想获取 id 在 {2,3} 中的行数

```
SELECT COUNT(*) FROM TABLE WHERE ID IN (2,3) 
```

# c++ - 带有类的 C++ 模板部分特化

> ID：11292116
> 
> 赞同：1
> 
> 时间：2012-07-02T10:45:46.973
> 
> 标签：c++, templates, template-specialization

我正在尝试使用类进行 C++ 部分模板专业化。这个问题更多的是关于语法而不是语义。其实我想要有如下的东西：

```
int main()
{
   ...
   Reduce<int, float> r(new int, new float);
   Reduce<int> r2(new int); // partial template specialization?
   ...
} 
```

为了实现上述目标，我尝试了：

```
template <typename T, typename U>
class Reduce {
  public:
    Reduce(T *t, U *u) { }
};

template <typename T>
class Reduce<T,T> {
  public:
    Reduce(T *t) { }
}; 
```

使用上面的代码，我不能使用以下语句：

```
Reduce<int> r2(new int); // error: wrong number of template arguments (1, should be 2) 
```

我仍然必须这样做：

```
Reduce<int, int> r2(new int); 
```

有人可以解释一下：（1）我怎样才能实现我想要的语法（如果可能）（2）如果不可能，为什么？（即技术问题）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T10:52:25.630

指定第二个模板类型的默认类型：

```
template <typename T, typename U = int>
class Reduce {
  public:
    Reduce(T *t, U *u) { }
}; 
```

或默认与第一个模板类型相同：

```
template <typename T, typename U = T>
class Reduce {
  public:
    Reduce(T *t, U *u) { }
}; 
```

例如，请参阅[http://ideone.com/5RcEG](http://ideone.com/5RcEG)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T10:54:14.063

根据您最终想要的，这可能是也可能不是解决方案，但至少它可以编译：

```
template <typename... T>
class Reduce;

template <typename T, typename U>
class Reduce<T,U> {
  public:
    Reduce(T *t, U *u) { }
};

template <typename T>
class Reduce<T> {
  public:
    Reduce(T *t) { }
};

int main()
{
   Reduce<int, float> r(new int, new float);
   Reduce<int> r2(new int); // partial template specialization?
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T10:50:10.977

从您的模板声明

```
template <typename T>
class Reduce<T,T> {
  public:
    Reduce(T *t) { }
}; 
```

您可以看到您需要为 Reduce 提供 2 个模板参数。所以也要改变你的用法

```
Reduce<int,int> r2(new int) 
```

# dns - 我的老板能看到我的 iPod DNS 设置吗？

> ID：11292120
> 
> 赞同：1
> 
> 时间：2012-07-02T10:46:09.597
> 
> 标签：dns, ipod

我正在使用来自 unblock-us.com 的 DNS 服务来访问 BBC iPlayer。

我们有无线网络在工作，我的问题是我的老板是否可以查看我的 iPod 是否在使用 dns 服务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T11:48:21.623

系统管理员将能够监视通过其控制的网络传输的*任何*数据包，所以是的，理论上他们可以看到有人正在向给定的服务器发出请求，并可能通过将其与其他请求相关联来追踪某人回给您. 请注意，我在这里只谈论技术方面，我不知道法律方面。

# xpath - 从输入标签中提取正确的值..提供的图像:)

> ID：11292121
> 
> 赞同：1
> 
> 时间：2012-07-02T10:46:11.013
> 
> 标签：xpath, scrapy

我正在使用scrapy crawl spider并尝试解析输出页面以选择一些输入标签参数（type、id、name），每种数据类型都被选择到一个项目中，以便稍后将其存储在数据库中，如下所示：

```
 Database Table_1
 ╔════════════════╗
 ║      text      ║ 
 ╠════════════════╣
 ║  id  │ name    ║ 
 ╟──────┼─────────╢
 ║      │         ║ 
 ╟──────┼─────────╢
 ║      │         ║ 
 ╚══════╧═════════╝ 
```

密码和文件也是如此，但是，

我面临的问题是 xpath 提取了整个标签！

```
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.selector import HtmlXPathSelector
from scrapy.item import Item, Field
from isa.items import IsaItem

class MySpider(CrawlSpider):
    name = 'example.com'
    allowed_domains = ['testaspnet.vulnweb.com']
    start_urls = ['http://testaspnet.vulnweb.com']

    rules = (
            Rule(SgmlLinkExtractor(allow=('/*' ) ),callback='parse_item'),)

    def parse_item(self, response):
        self.log('%s' % response.url)

        hxs = HtmlXPathSelector(response)
        item=IsaItem()
        text_input=hxs.select("//input[(@id or @name) and (@type = 'text' )]").extract()
        pass_input=hxs.select("//input[(@id or @name) and (@type = 'password')]").extract()     
        file_input=hxs.select("//input[(@id or @name) and (@type = 'file')]").extract()

        print text_input , pass_input ,file_input  
        return item 
```

**输出**

```
me@me-pc:~/isa/isa$ scrapy crawl example.com -L INFO -o file_nfffame.csv -t csv
2012-07-02 12:42:02+0200 [scrapy] INFO: Scrapy 0.14.4 started (bot: isa)
2012-07-02 12:42:02+0200 [example.com] INFO: Spider opened
2012-07-02 12:42:02+0200 [example.com] INFO: Crawled 0 pages (at 0 pages/min),    scraped 0 items (at 0 items/min)
[] [] []
[] [] []
[] [] []
[u'<input name="tbUsername" type="text" id="tbUsername" class="Login">'] [u'<input name="tbPassword" type="password" id="tbPassword" class="Login">'] []
[] [] []
[u'<input name="tbUsername" type="text" id="tbUsername" class="Login">'] [u'<input name="tbPassword" type="password" id="tbPassword" class="Login">'] []

[] [] []
2012-07-02 12:42:08+0200 [example.com] INFO: Closing spider (finished) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T13:09:05.643

**使用**：

```
//yourCurrentExpression/@id 
```

来获取`id`属性。

**使用**：

```
//yourCurrentExpression/text() 
```

获取任何被`yourCurrentExpression`元素选择的文本节点子节点。

**最后，您可以将这两个表达式组合成一个表达式**：

```
//yourCurrentExpression/@id | //yourCurrentExpression/text() 
```

这会生成一个节点列表，其中的项目按如下顺序排列：`(id-attribute, text-node)*`，换句话说，所选节点按文档顺序表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T12:39:34.460

如果我理解正确，您想从输入中提取属性值。

您当前的 XPath 为您提供了整个节点，因为这正是您所要求的。XPath 选择器上升到节点的位置，但不会超出节点的特定属性。

要获取节点的`id`属性而不是节点本身：

```
some/xpath/query/@id 
```

# android - 从 MediaStore.Audio.Playlists 获取歌曲

> ID：11292125
> 
> 赞同：1
> 
> 时间：2012-07-02T10:46:32.563
> 
> 标签：android, playlist

在此代码中，我正在使用 Id 和 name 创建播放列表，但是当我尝试显示已创建歌曲的歌曲时，它显示没有名为的列`Media Store.audio.Playlists.Members.audio_Id`，`MediaStore.Audio.Playlists.Members.Tracks`

如何从播放列表中提取歌曲？

```
public static Cursor query(context context, Uri uri, String[] projection,
              String selection, String[] selectionArgs, String sortOrder, 
                  int limit) 
{
    ContentResolver resolver = context.getContentResolver();
    if (resolver == null) {
        return null;
    }

    if (limit > 0) {
        uri = uri.buildUpon().appendQueryParameter("limit", "" + limit).build();
    }

    return resolver.query(uri, projection, selection, selectionArgs, sortOrder);
} 

public static Cursor query(Context context, Uri uri, String[] projection,
          String selection, String[] selectionArgs, String sortOrder)
{

    String[] projection1 = new String[]{MediaStore.Audio.Playlists.Members.AUDIO_ID};

    return query(context, uri, projection1, selection, selectionArgs, sortOrder, 0);
}

private static int intFromCursor(Cursor c) {
    int id = -1;

    if (c != null) {
        c.moveToFirst();

        if (!c.isAfterLast()) {
            id = c.getInt(0);
        }
    }

    c.close();
    return id;
}

public static int idForplaylist(Context context, String name) {
    Cursor c = query(context, MediaStore.Audio.Playlists.EXTERNAL_CONTENT_URI,
                            new String[] { MediaStore.Audio.Playlists._ID },
                            MediaStore.Audio.Playlists.NAME + "=?",
                            new String[] { name },
                            MediaStore.Audio.Playlists.NAME);
    return intFromCursor(c);
}

public static int idFortrack(Context context, String path) {
    Cursor c = query(context, MediaStore.Audio.Playlists.EXTERNAL_CONTENT_URI,
                            new String[] { MediaStore.Audio.Media._ID },
                            MediaStore.Audio.Media.DATA + "=?",
                            new String[] { path },
                            MediaStore.Audio.Media.DATA);
    return intFromCursor(c);
}

public static void writePlaylist(Context context, String playlistName, ArrayList<String> paths) {
    Cursor cursor;
    ContentResolver resolver = context.getContentResolver();
    int playlistId = idForplaylist(context, playlistName);
    String[] cols = new String[]{ MediaStore.Audio.Playlists._ID };

    Uri  uri;
    if (playlistId == -1) { 
        ContentValues values = new ContentValues(1);
        values.put(MediaStore.Audio.Playlists.NAME, playlistName);
        uri = resolver.insert(MediaStore.Audio.Playlists.EXTERNAL_CONTENT_URI, values);
        playlistId = idForplaylist(context, playlistName);
    } else {
        uri = MediaStore.Audio.Playlists.Members.getContentUri("external", playlistId); 
    }

    Log.d(TAG, String.format("Writing playlist %s", uri));

    // Add all the new tracks to the playlist.
    int size = paths.size();
    ContentValues values [] = new ContentValues[size];

    for (int k = 0; k < size; ++k) {
        values[k] = new ContentValues();
        values[k].put(MediaStore.Audio.Playlists.Members.PLAY_ORDER, k);
        values[k].put(MediaStore.Audio.Playlists.Members.AUDIO_ID, idFortrack(context, paths.get(k)));
        //values[k].put(MediaStore.Audio.Playlists.Members.TRACK,idFortrack(context,paths.get(k)));
    }

    resolver.bulkInsert(uri, values);
    PlaylistName.setText("");
}

public void displayPlaylistSongs(long playlistId)
{
    String[] projection = new String[] { MediaStore.Audio.Playlists.Members.TRACK,
                                    MediaStore.Audio.Playlists.Members.ARTIST};

    final String[] columns = new String[]{MediaStore.Audio.Playlists.Members.TRACK};
    int[] to = new int[]{android.R.id.text1};

    try {
        Cursor c = getContentResolver().query(
                       MediaStore.Audio.Playlists.Members.getContentUri("external",                         
                        playlistId), projection, null, null, null);

        pAdapter = new SimpleCursorAdapter(getBaseContext(),
                            android.R.layout.simple_list_item_1, c,columns, to);
        list.setAdapter(pAdapter); 
```

# php - 从php执行perl命令

> ID：11292134
> 
> 赞同：-2
> 
> 时间：2012-07-02T10:47:01.170
> 
> 标签：php, perl, system

我想使用来自 php 页面的 perl 调用替换文本文件中的一个单词。

我试过以下

```
`perl -pi -e 's/foo/bar/g' /tmp/newxml.xml`;

system('perl -pi -e \'s/foo/bar/g\' /tmp/newxml.xml', $retval1);

exec('perl -pi -e \'s/foo/bar/g\' /tmp/newxml.xml', $retval1, $retval2); 
```

它不工作。

我试过以下

```
system('perl -v > /tmp/newxml.xml', $retval1); 
```

及其工作，因此我想这不是权限问题。

我直接在 shell 上执行了命令并且它工作正常。知道有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:55:49.617

尝试：

```
 system('perl -pi -e ''s/foo/bar/g'' /tmp/newxml.xml', $retval1); 
```

或者

```
system("perl -pi -e 's/foo/bar/g' /tmp/newxml.xml", $retval1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T11:00:57.627

```
#!/usr/bin/perl
use strict;

`echo 'mypassword' | gpg --passphrase-fd 0 --output outfile --decrypt inputfile` 
```

# unix - 'find -delete' 和 'rm -rf' 的区别？

> ID：11292146
> 
> 赞同：11
> 
> 时间：2012-07-02T10:47:57.593
> 
> 标签：unix, delete-file, rm

我想递归地从特定目录中删除文件。所以，我用过

```
find . -wholename "*.txt" -delete 
```

我们也可以使用删除文件

```
rm -rf *.txt 
```

`rm`使用和删除文件有什么区别`find`？？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T11:02:32.253

`find . -name abd.txt -delete`尝试删除`abd.txt`目录树中某处命名的所有文件`.`

`find . -wholename abd.txt -delete`尝试删除`abd.txt`目录树中某处具有完整路径名的所有文件`.`

永远不会存在这样的文件：使用 时`find .`，找到的所有文件的完整路径名都将以 开头`./`，因此即使当前目录中名为的文件`abd.txt`也将具有 path `./abd.txt`，并且不会匹配。

`find . -wholename ./abd.txt -delete` *将*删除当前目录中名为`abd.txt`.

`find -wholename ./abd.txt -delete`也会这样做。

`abd.txt`如果是非空目录，则删除将失败。

（我刚刚用 GNU find 4.6.0 尝试了上述方法；其他版本的行为可能有所不同。）

`rm -rf abd.txt`也尝试`abd.txt`在当前目录中删除，如果它是一个非空目录，它将删除它，以及其中的所有内容。

为此`find`，您可以使用

`find . -depth \( -wholename ./abd.txt -o -wholename ./abd.txt/\* \) -delete`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T12:47:40.160

虽然`find -wholename GLOBPATTERN`尝试匹配当前目录下的每个文件（与深度无关），但您使用该命令的 glob仅与当前目录下**直接**`rm`（深度 1）的文件匹配。

 **顺便提一句。除非您想递归删除目录，否则不需要`-r`切换到（由于扩展名，我假设您只想删除常规文件）`rm``.txt`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-19T06:35:23.787

`find`与 ,一起使用`-delete`，查找文件并删除它们。`Find`命令接受查找文件的路径，然后`-delete`标志删除在给定路径中找到的文件。所以，你可以说 find 更像是一种**选择性删除**

而`rm -rf`命令无论如何都会递归删除文件/目录。这意味着`rm`将删除特定路径下的**所有**文件和目录。`-r`代表递归，`-f`是强制删除。因此，`rm`加上`-rf`将继续删除目标路径下目录中的目录和文件，直到找不到更多。**

# javascript - Javascript 清理：插入可能的 XSS html 字符串的最安全方法

> ID：11292147
> 
> 赞同：5
> 
> 时间：2012-07-02T10:48:00.050
> 
> 标签：javascript, xss, html-sanitizing

目前我正在将此方法与 jQuery 解决方案一起使用，以从可能的 XSS 攻击中清除字符串。

```
sanitize:function(str) {
    // return htmlentities(str,'ENT_QUOTES');
    return $('<div></div>').text(str).html().replace(/"/gi,'&quot;').replace(/'/gi,'&apos;');   
} 
```

但我有一种感觉，它不够安全。我想念什么吗？

我在这里尝试了 phpjs 项目中的 htmlentities：http://phpjs.org/functions/htmlentities:425 [/](http://phpjs.org/functions/htmlentities:425/)

但它有点错误并返回一些额外的特殊符号。也许它是一个旧版本？

例如：

```
htmlentities('test"','ENT_QUOTES'); 
```

产生：

```
test&amp;quot; 
```

但应该是：

```
test&quot; 
```

你如何通过javascript处理这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T11:07:55.450

如果您的字符串应该是没有 HTML 格式的纯文本，只需使用`.createTextNode(text)`/assigning 到`.data`现有文本节点的属性。无论您放在那里，都将始终被解释为文本，并且不需要额外的转义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T11:14:08.773

> 是的，动态使用 javascript。字符串来自不受信任的来源。

然后，您无需手动对其进行消毒。使用 jQuery，您可以编写

```
​var str = '<div>abc"def"ghi</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​';

​$​('test').text(str);
$('test').attr('alt', str); 
```

浏览器将为您将数据与代码分开。

示例：http: [//jsfiddle.net/HNQvd/](http://jsfiddle.net/HNQvd/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T11:11:54.767

您也应该引用其他字符：

```
'
"
<
>
(
)
; 
```

它们都可以用于 XSS 攻击。

# php - PHP 的 crypt 函数在内部是如何工作的？

> ID：11292148
> 
> 赞同：0
> 
> 时间：2012-07-02T10:48:05.650
> 
> 标签：php, hash, crypt

如果我在 PHP 中进行以下调用，它将使用我的密码和 salt 使用 sha512 对其进行多次散列：

```
echo crypt('password', '$6$rounds=1000$salt'); 
```

但是，我想知道这个过程是如何运作的。是这样的吗？：

```
$hash = hash('sha512', 'password' . 'salt');
for ($i = 1; $i < 1000; $i++) {
    $hash = hash('sha512', $hash);
}
echo base64_encode($hash); 
```

或者这是一个非常复杂的过程？

我问的原因是因为我想要一个易于用其他语言实现的加密哈希系统。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T10:52:01.070

您可以在此处查看实际的 crypt() 源代码：

[https://github.com/php/php-src/blob/master/ext/standard/crypt.c](https://github.com/php/php-src/blob/master/ext/standard/crypt.c)

也就是说，正如其他人指出的那样，如果您正在对密码进行哈希处理，您可能应该使用 bcrypt。这是一篇关于密码哈希方法的热门文章：

[http://codahale.com/how-to-safely-store-a-password/](http://codahale.com/how-to-safely-store-a-password/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T10:50:14.600

如果您正在寻找跨不同语言实现的强大密码哈希算法，请使用[bcrypt](http://en.wikipedia.org/wiki/Bcrypt)。有用于 Java、C#、JavaScript、PHP、obj-C、Python、Perl 等的库。

如果这是用于登录表单，一个好主意是使用 JavaScript bcrypt 库，并将哈希传输到服务器。这允许工作因素相当大，而不会使您的服务器超载或引入 DoS 漏洞。

# c# - SQLDataReader 连接关闭

> ID：11292150
> 
> 赞同：0
> 
> 时间：2012-07-02T10:48:16.707
> 
> 标签：c#, database-connection, sqldatareader, stylecop

如何在 stylecop 中定义规则以强制开发人员关闭 SQLDataReader() 或连接？

如果存在任何其他解决方案，那么也请提出建议。

所需的解决方案是强制开发人员关闭 sqldatareader

或者

我们可以在 DAL 或任何其他方法中进行任何其他更改，以确保 datareader 的连接关闭..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:07:01.470

使用委托怎么样？我不知道你的确切架构，但我们已经将`ExecuteReader()`方法包装在我们自己的方法中，让我们称之为`ExecuteReaderWrapper()`确保使用正确的数据库连接等。 `ExecuteReaderWrapper()`基本上只是返回`SqlDataReader`返回的`ExecuteReader()`.

现在我们不使用这些方法编写任何自定义代码（我们使用这些方法`DataSets`），所以我们没有您遇到的问题。但是一种选择是更改`ExecuteReaderWrapper()`为期望一个代表而不是返回`SqlDataReader`. 然后`ExecuteReaderWrapper()`将其传递`SqlDataReader`给代表并随后传递给所有必需的清理。然后开发人员根本不用担心关闭。

# sparql - 如何使用 DBpedia 查找属于两个给定类别的所有维基百科页面？

> ID：11292152
> 
> 赞同：1
> 
> 时间：2012-07-02T10:48:49.107
> 
> 标签：sparql, wikipedia, dbpedia

`DBpedia`几年前我涉足过它并发现它很吸引人，但现在我想在多年未使用它后执行查询，我发现它完全无法理解。

我应该发出什么`SPARQL`查询来检索同时属于“Category ABC”和“Category XYZ”的所有维基百科页面的集合？

我能找到的所有例子似乎都比我看似基本的问题要复杂得多，因此很难提炼出一些最小的东西。

（作为一个例子，我想找到所有为意大利球队踢过职业足球的澳大利亚球员。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T00:12:15.430

资源和类别之间的链接使用`dcterms:subject`关系表示（例如，您可以看到[Elvis Presley](http://dbpedia.org/page/Elvis_Presley)的 DBPedia 表示）。

因此，要查询属于两个类别的所有资源（例如“美国男歌手”和“同卵双胞胎”），只需执行以下操作：

```
SELECT ?res    
WHERE { 
 ?res dcterms:subject category:American_male_singers, category:Identical_twins .
} 
```

一般来说，当尝试通过 DBPedia 制定 SPARQL 查询时，首先浏览一下（就像我通过查看 Elvis 页面所做的那样），以尝试找出哪些属性和关系可用是有帮助的。

***编辑***顺便说一下，上面的查询检索 DBPedia 资源本身。如果您想获取实际的 Wikipedia 页面，您应该像这样调整您的查询：

```
SELECT ?wikiPage   
WHERE { 
 ?res dcterms:subject category:American_male_singers, category:Identical_twins ;
      foaf:page ?wikiPage .
} 
```

# android - ADT20 NDK 调试失败

> ID：11292154
> 
> 赞同：4
> 
> 时间：2012-07-02T10:48:55.820
> 
> 标签：android, debugging, gdb, adt, android-ndk

我一直在android的ndk下开发一些本机代码，当然需要调试。

我使用了 ADT20 的预览版 3 和相应的工具，但随后官方更新发布了，所以我下载了 Eclipse、SDK、ADT 和 NDK 的干净版本（crystax 构建，我也使用了预览版并且工作正常）但现在我无法连接调试器。我在控制台中看到的内容如下：

```
warning: .dynamic section for "/home/user/Development/Projects/MyDevProject/Android/ProjectName/obj/local/armeabi/libcrypto.so" is not at the expected address (wrong library or version mismatch?)
warning: Could not load shared library symbols for 63 libraries, e.g. /system/bin/linker.
Use the "info sharedlibrary" command to see the complete listing.
Do you need "set solib-search-path" or "set sysroot"?
warning: Unable to find dynamic linker breakpoint function.
GDB will be unable to debug shared library initializers
and track explicitly loaded dynamic code.
[New Thread 1614]
[New Thread 1617]
[New Thread 1618]
[New Thread 1619]
[New Thread 1620]
[New Thread 1621]
[New Thread 1622]
[New Thread 1623]
[New Thread 1624]
No symbol table is loaded.  Use the "file" command.
No symbol table is loaded.  Use the "file" command.
No symbol table is loaded.  Use the "file" command.
No symbol table is loaded.  Use the "file" command.
No symbol table is loaded.  Use the "file" command. 
```

我确认我已经定义了 NDK_DEBUG=1 并且所有的东西都设置好了，因为我上周使用了这个配置并且像一个魅力一样工作。

有任何想法吗？

# asp.net-mvc-2 - MVCSiteMapProvider 的资源文件

> ID：11292155
> 
> 赞同：2
> 
> 时间：2012-07-02T10:48:59.700
> 
> 标签：asp.net-mvc-2, sitemap, mvcsitemapprovider

我正在使用 MVCSiteMapProvider 为我的应用程序生成带有本地化的菜单。只要菜单的资源文件位于 App_GlobalResources 文件夹中，我的程序就可以正常工作。当我将资源移动到另一个文件夹时，它会给出一个错误，提示无法找到资源。我`$resources:Resource,menu_Home`用于访问 MVC.sitemap 文件中的资源。我想将资源文件保存在自定义文件夹中，而不将它们存储在 App_GlobalResources 文件夹中。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-02T21:14:23.223

发生这种情况是因为 MvcSiteMapNode.Title 属性中的以下代码：

```
var implicitResourceString = GetImplicitResourceString("title");
if (implicitResourceString != null && implicitResourceString == this["title"])
{
    return implicitResourceString;
}
implicitResourceString = GetExplicitResourceString("title", this["title"], true);
if (implicitResourceString != null && implicitResourceString == this["title"])
{
    return implicitResourceString;
} 
```

在 GetExplicitResourceString() 方法中，最后一个参数为 true，表示 throwIfNotFound。这就是抛出异常的原因。我通过用以下代码替换上面的代码来修复它：

```
if (!string.IsNullOrEmpty(title))
{
    if (Provider.EnableLocalization)
    {
        try
        {
            if (!string.IsNullOrEmpty(title) && title.Contains("."))
            {
                int idx = title.LastIndexOf(",");
                string res = title.Substring(0, idx);
                string assembly = title.Substring(idx + 1);

                idx = res.LastIndexOf(".");
                string type = res.Substring(0, idx);
                string key = res.Substring(idx + 1);
                var rm = new ResourceManager(type, Assembly.Load(assembly));
                return rm.GetString(key);
            }
        }
        catch
        {
        }
        return title;
    }
} 
```

并且在 .sitemap 文件中而不是 title="$resources:Resource,Key" 语法使用 title="Namespace.Class.Property,Assembly" 语法，这在使用具有强类型生成类的嵌入式资源时更合适。

# java - 如何在java中保护文件上传

> ID：11292165
> 
> 赞同：3
> 
> 时间：2012-07-02T10:49:41.790
> 
> 标签：java, javascript, struts, xss

我正在使用 java 开发一个 Web 应用程序，用户将在其中上传一个 zip 文件。此文件将包含 css 文件、图像、javascript 文件、flash 文件等。zip 文件将上传到 tomcat 的 webapp 目录中。目的是用户将皮肤作为 zip 文件上传，我的 servlet 会将其提取到 webapp 中的某个位置。

我关心的是如何处理这里的安全性。用户可以在 js 文件或其他文件中编写 xss 攻击代码。所有文件都在 zip 文件中。我可以检查 zip 文件的扩展名或 mime 类型。除此之外，我还可以采取哪些其他措施来防止任何形式的攻击。任何类型的示例，代码片段都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:39:23.550

您的问题没有具体说明您将如何处理上传的内容，但是如果您想在您的网站上运行它，那么答案是您真的不希望人们能够上传他们自己的 JavaScript。任何在您身边运行的外来代码都可能改变任何东西，并使您的网站以您无法承担责任的方式运行。只需阅读[有关点击劫持的 Wikipedia 条目](http://en.wikipedia.org/wiki/Clickjacking)即可。

通过删除标签来清除所有 HTML`script`以防止 JavaScript 执行，不允许自定义 JavaScript，并且对于所有自定义需求，请遵循 @greyfairer 的建议，即使用带有脚本检查的配置文件。

如果您担心用户将对您的网站做什么，请确保限制上传文件的大小（请参阅 Web 服务器文档）。

# http - 使用 mocha 对 nodejs（连接）应用程序进行 http-request 测试？

> ID：11292166
> 
> 赞同：1
> 
> 时间：2012-07-02T10:49:41.837
> 
> 标签：http, node.js, testing, connect, mocha.js

我想为我的连接中间件编写一些集成测试，并使用 real-http-requests 而不是模拟请求对其进行测试。

中间件堆栈的行为取决于传递的配置，这就是为什么我想将中间件服务器作为子进程运行，我可以在每次测试后使用不同的配置重新启动。

问题是测试服务器运行没有问题（ether 直接启动或在测试文件中启动）并且可以通过浏览器访问，但我没有通过 http.get(..) 得到响应，因为连接被拒绝。

```
Error: connect ECONNREFUSED 
```

这是我的设置...

```
//MOCHA TEST FILE: testServer.test.js

function runTestServer(configEnv) {

    var cmd = "node " + path.resolve(__dirname, "runTestServer.js");

    var testSrv = exec(cmd, { "env" : configEnv },
    function (error, stdout, stderr) {
        if (error !== null) {
            console.log('exec error: ' + error);
        }
    });

    return testSrv;
}

describe("onRequest", function(){
    it("should return a response", function (done) {

        this.timeout(100000);

        var serverInstance = runTestServer({
            "appDir" : path.resolve(__dirname, "../../handleHttp/app")
        });

        http.get({host:'localhost', port:9090, path:'/'}, function (res) {
            //error thrown before this callback gets called
        });

    });
}); 
```

这是我的 testServer.js 文件的内容，它作为子进程运行。

```
//Test-Process-File: runTestServer.js
var connect = require("connect"),
handleHttp = require("...")

var server = connect();
handleHttp.init(server); //this methods applies the middleware
console.log("TEST-SERVER listening on 9090");
server.listen(9090); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:58:20.253

***我在发布问题时想出了这个问题并想在这里回答，以防其他人遇到同样的问题。***

## 所以有什么问题？

**整个事情是异步的！**

因此，在将请求发送到服务器之前，服务器不会被初始化。

## 解决方案

给子进程一些时间来初始化并使 testServer-Loader 异步！

```
function runTestServer(configEnv, callback) {

    var cmd = "node " + path.resolve(__dirname, "../runTestServer.js"),
    testSrv;

    testSrv = exec(cmd, { "env" : configEnv },
                 function (error, stdout, stderr) {
                   if (error !== null) {
                     console.log('exec error: ' + error);
                  }
              });

    setTimeout(function() {
        callback(testSrv);
    }, 1000);
} 
```

我的摩卡测试文件：

```
describe("handleHttp", function() {
  describe("#Basic Requesting", function() {

    var serverInstance;

    before(function(done) {
        runTestServer({
            "appDir" : path.resolve(__dirname, "...")
        }, function(srvInstance) {
            serverInstance = srvInstance;
            done();
        });
    });

    //run your tests here 
```

固定超时并不是一个很好的解决方案。也许可以在主进程和子进程之间启用一些通信，以便找出 http-server 何时准备好。建议表示赞赏。

# ajax - 将 Open Graph 与 Ajax Overlay 一起使用

> ID：11292169
> 
> 赞同：0
> 
> 时间：2012-07-02T10:49:51.247
> 
> 标签：ajax, facebook-opengraph

想知道是否有人在使用以下用例实现 Open Graph 方面有任何经验：

想象一下，您有一个标签应用程序，它正在向用户提供内容。在此选项卡应用程序上，您正在以轮播格式提供许多促销活动。轮播中的每个促销活动都有一个号召性用语，可在叠加层中加载一些内容。我想要一个与该行动号召相关的开放式图表行动。目的是当朋友看到已发布的动作时，单击它会将他们带到选项卡应用程序，并通过 app_data 中的参数弹出属于该动作相关促销的叠加层。

我的自动叠加弹出窗口已经在工作了。

*不过，对于 Open Graph 部分，据我从文档中得知，您需要将打开的图元数据标签附加到表示内容（实际上就是*内容）的独立文档中。从默认行为看来，该页面需要以自己的方式存在，并且不能是包含多个促销的页面上的 ajax 加载片段。

任何人都可以添加自己的经验来尝试获得比使用 Open Graph 的平面页面更复杂的东西吗？例如，是否有可能有一个“终点”页面，元数据将指向该页面以创建提要故事，但当用户单击故事时仍将被带到轮播页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:18:18.663

> 例如，是否有可能有一个“终点”页面，元数据将指向该页面以创建提要故事，但当用户单击故事时仍将被带到轮播页面？

当然，只需将用户从您的端点重定向到您希望他们实际看到的站点……</p>

# assembly - 将字符串移动到位置

> ID：11292171
> 
> 赞同：0
> 
> 时间：2012-07-02T10:49:59.637
> 
> 标签：assembly, x86, nasm

我正在使用 NASM 编译器来创建小型 asm 应用程序。我需要在位置上加载我的字符串，我想稍后访问它。我的问题是：有没有办法将字符串存储在内存中并稍后加载它们？在某个地方我骑过它是可能的，`offset`但我不知道如何在 NASM 中使用它。任何人都可以在这里放置链接或代码以进行解释或示例吗？请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T11:26:17.750

与 MASM 和 TASM 不同，NASM 不使用`offset`.

MASM/TASM 代码：

```
mov eax, offset MyString
MyString db "Hello World!", 10, 0 
```

或者

```
lea eax, MyString
MyString db "Hello World!", 10, 0 
```

NASM 等价物：

```
mov eax, MyString
MyString db "Hello World!", 10, 0 
```

或者

```
lea eax, [MyString]
MyString db "Hello World!", 10, 0 
```

请阅读 NASM 文档。

# mysql - libmysqlclient_r.a 未生成

> ID：11292173
> 
> 赞同：0
> 
> 时间：2012-07-02T10:50:11.087
> 
> 标签：mysql, database, linux, cmake, mysql-connector

我已经下载了 mysql-connector-c-6.0.2。我使用以下命令构建它：

```
cmake -G "Unix Makefiles" -DCMAKE_INSTALL_PREFIX=<install_dir_path>
make
make install 
```

这将创建以下库文件：

```
libmysqlclient.a  libmysqlclient_r.so  libmysqlclient.so  libmysql.so  libmysql.so.16  libmysql.so.16.0.0 
```

这不会生成 libmysqlclient_r.a。如何启用 libmysqlclient_r.a 的生成？

预先感谢您的帮助。

**更新：**

libmysqlclient_r.so 实际上是 libmysql.so 的符号链接（libmysqlclient_r.so 和 libmysqlclient.so 都是 libmysql.so 的符号链接。所以它们都是相同的）。可以通过从 libmysql/CMakeLists.txt 中的以下行中删除 SHARED 关键字来生成静态库 (libmysql.a)：

```
ADD_LIBRARY(libmysql          SHARED ${CLIENT_SOURCES} libmysql.def) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T06:04:31.100

如果它没有生成，那么它是由开发人员有意完成的。

检查一些构建选项，也许有启用静态构建的选项`libmysqlclient_r`。如果不是 - 您必须在其中之一中找到它的目标声明`CMakeLists.txt`并对其进行调整以启用静态构建。

# php - 如何使用 liveValidation 在提交时验证表单？

> ID：11292175
> 
> 赞同：2
> 
> 时间：2012-07-02T10:50:11.637
> 
> 标签：php, html, livevalidation

我有以下代码来验证提交时的表单：

```
<form enctype='multipart/form-data' 
   action='ad_posting_process.php' 
   method='post'>
   Price: <input type=text name=price 
                  id="price" style=width:90px;>
<script type="text/javascript"> 
  var f3 = new LiveValidation('price');
  f3.add( Validate.Numericality );
</script>
Email: <input type=text name=email 
                  id="email" style=width:240px;>
<script type="text/javascript"> 
  var f20 = new LiveValidation('email');
  f20.add( Validate.Email );
</script>
<script type="text/javascript">
  var title = new LiveValidation( 'title', {onlyOnSubmit: true } );
  title.add( Validate.Email );
  var field2 = new LiveValidation( 'price', {onlyOnSubmit: true } );
  field2.add( Validate.Acceptance );
  var field3 = new LiveValidation( 'email', {onlyOnSubmit: true } );
  field3.add( Validate.Presence );
</script>
<input type=submit name=action value=Post>
</form> 
```

电子邮件验证正在工作，但如何在提交时验证整个表单？

问候：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T11:28:04.503

我对这个库不是很熟悉，但似乎你应该能够通过简单地添加来做到这一点：

```
{onlyOnSubmit: true } 
```

作为要验证的每个元素的参数，例如：

```
var f20 = new LiveValidation('email');
f20.add( Validate.Email, {onlyOnSubmit: true }); 
```

顺便说一下，你看过这个页面吗？： http: [//livevalidation.com/examples#exampleForms](http://livevalidation.com/examples#exampleForms)

此外，您是否对每个元素使用不同的脚本部分进行验证（或者它们只是以这种方式剪切和粘贴在这里？）。您可能可以在同一个脚本块中完成所有这些操作。

**更新，扩展答案：**

您可能会尝试修复您的代码的一些问题，因为它们可能会导致 JS 出现问题：

*   确保在所有字段（如 name="price" 等）周围使用 "（双引号，而不是单引号！）
*   您是否有一个名为“标题”的字段，因为我看不到它 - 这可能导致脚本失败（？）。

确保以其中一种方式关闭每个 html 元素。

```
<input></input>
<input /> 
```

您的代码可能看起来像这样：

```
<form enctype="multipart/form-data"
  action="ad_posting_process.php" 
  method="post">

Price: <input type="text" name="price"
              id="price" style="width:90px;">
Email: <input type="text" name="email"
              id="email" style="width:240px;">

<script type="text/javascript"> 
var f3 = new LiveValidation('price');
  f3.add( Validate.Numericality );
  var f20 = new LiveValidation('email');
  f20.add( Validate.Email );
  var title = new LiveValidation( 'title', {onlyOnSubmit: true } );
  title.add( Validate.Email );
  var field2 = new LiveValidation( 'price', {onlyOnSubmit: true } );
  field2.add( Validate.Acceptance );
  var field3 = new LiveValidation( 'email', {onlyOnSubmit: true } );
  field3.add( Validate.Presence );
</script>
<input type="submit" name="action" value="Post" />
</form> 
```

此外，请检查您的浏览器是否存在任何与 javascript 相关的错误。大多数现代浏览器都有某种形式的错误面板或 js 调试工具。

# c++ - 在终端中更智能地查看程序输出 - 显示/隐藏较低优先级输出的按钮，允许深入了解程序输出

> ID：11292183
> 
> 赞同：3
> 
> 时间：2012-07-02T10:50:38.857
> 
> 标签：c++, python, xterm

我的许多程序将运行时信息输出到终端，例如：

```
running minimisation  

    ----rep 10\.  val=2.30498  
    ----rep 20\.  val=1.98377  
    ----...  
    ----...  
    ----...  
    ----rep 90\. vsl=1.77921  

minimisation finished. val=1.76221\.  93 reps. 
```

有没有办法隐藏这些信息（例如缩进部分）但能够通过使用 +/- 按钮来扩展/隐藏它？

（在大多数情况下，我使用 python 或 c++，从例如 Linux 上的 xterm 调用）

我没有找到任何类似的东西，所以指向相关解决方案的指针也会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:45:23.303

如果您需要将此信息作为程序工作的日志，您可以将其输出到文件中，并将文件格式化为 XML 或类似的格式，这样您就可以轻松查看文件并做任何您想做的事情。

如果您需要它进行调试，请考虑使用带有调试 GUI 的 IDE。

# c++ - 获取 CString 的结束位置

> ID：11292185
> 
> 赞同：0
> 
> 时间：2012-07-02T10:50:45.100
> 
> 标签：c++, substring, cstring

如何找到 CString 结尾的位置？我正在尝试

```
int end = str.Find(L'\n'); 
```

但它返回-1。我特别想从 CString 中的某个位置获取 CString 的子字符串，直到它结束。问题是我无法得到结尾的位置。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:59:16.417

使用`CString::Mid(beginPos)`, 作为`CString sub = str.Mid(begin)`。它将返回从开始`beginPos`并一直延伸到字符串末尾的子字符串。如果您确实想要字符串的长度，请使用`GetLength`. 搜索`'\n'`是没有意义的，因为它可能不在字符串中，如果是，它可能不在该字符串的末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:57:07.327

查找字符会`L'\n'`搜索换行符而不是字符串的“结尾”。CString 不支持 size() 或 length() 方法，您可以使用获取可用于计算所需子字符串长度的总长度吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T10:58:33.327

首先，字符串以零结尾，所以至少你应该找到 '\0' 而不是 '\n'。

实际上，您应该检查字符串的大小并将其减 1，这就是最后一个字符的索引位置。

# iphone - nsstring 和 nsinteger 转换

> ID：11292187
> 
> 赞同：-1
> 
> 时间：2012-07-02T10:50:53.800
> 
> 标签：iphone, objective-c

我有两个数组，第一个包含数字，第二个使用这个数字作为索引。

```
NSArray *dayOfWeek = [NSArray arrayWithObjects:@"D",@"L",@"M", @"X",@"J",@"V",@"S", nil];

NSArray *arrayDays = [days componentsSeparatedByString:@" "];     

 //arrayDays  2 3 4 5 6 

     NSString *daysPrint;

     for (NSString *theDay in arrayDays) {
         NSLog(@"string %@",theDay);
         NSInteger dayIndex = (NSInteger)theDay;
         NSLog(@"integer %d", dayIndex);
         daysPrint = [NSString stringWithFormat:@"%@ %@", daysPrint, [dayOfWeek objectAtIndex:dayIndex]];

     } 
```

在日志中：

```
2012-07-02 12:49:27.322 usualBike[1698:f803] string 2
2012-07-02 12:49:27.323 usualBike[1698:f803] integer 109471840 
```

显然，当我尝试获取 dayOfWeek[109461840] 时，它会崩溃。

我该如何解决这个问题？

先感谢您

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-02T10:57:44.380

daysPrint 即将为空。您需要将其设置为空白值，这是导致崩溃的原因

```
NSArray *dayOfWeek = [NSArray arrayWithObjects:@"D",@"L",@"M", @"X",@"J",@"V",@"S", nil];

NSArray *arrayDays = [days componentsSeparatedByString:@" "];     

//arrayDays  2 3 4 5 6 

NSString *daysPrint=@"";

for (NSString *theDay in arrayDays) {
    NSLog(@"string %@",theDay);
    NSInteger dayIndex = [theDay intValue];
    NSLog(@"integer %d", dayIndex);
    daysPrint = [NSString stringWithFormat:@"%@ %@", daysPrint, [dayOfWeek objectAtIndex:dayIndex]];

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T10:58:04.093

用这个

```
 for (NSString *theDay in arrayDays) {
    NSLog(@"string %@",theDay);
    NSInteger dayIndex = [theDay intValue];     // change this code
    NSLog(@"integer %d", dayIndex);
    daysPrint = [NSString stringWithFormat:@"%@ %@", daysPrint, [dayOfWeek objectAtIndex:dayIndex]];

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-02T10:54:31.287

```
for (NSString *theDay in arrayDays) {
     NSLog(@"string %@",theDay);
     int dayIndex = [theDay intValue];
     NSLog(@"integer %d", dayIndex);
     daysPrint = [NSString stringWithFormat:@"%@ %@", daysPrint, [dayOfWeek objectAtIndex:dayIndex]];

 } 
```

这可能会帮助你...

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-02T10:55:00.560

您可以使用像 [theDay intValue] 这样的 NSString 实例方法进行整数转换。无需自己施展。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-02T10:58:03.263

采用

```
NSInteger dayIndex = [theDay intValue]; 
```

反而

# php - 带有表单值和 Google Analytics 会话的 PHP 重定向

> ID：11292188
> 
> 赞同：0
> 
> 时间：2012-07-02T10:50:54.417
> 
> 标签：php, html

[http://www.spiritofphiladelphia.com/](http://www.spiritofphiladelphia.com/) -> 表格视图

页面右侧的表单需要进行一些调整。我需要将用户重定向到不同的页面以及表单值和 Google Analytics 跟踪代码，具体取决于派对的大小。对于派对规模，他们只有两种可能的选择。

我认为这很简单，只需将表单值收集在一个数组中并通过 using 传递它们`header()`。那是在我意识到我还需要跟踪用户会话之前。我从未编写过使用`session()`数据的脚本，或者如何检索我需要的数据。

请帮助这位由于缺乏理解而避免编写任何代码的前端开发人员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:47:10.717

我建议您通读 PHP 的简单教程（例如 w3schools）。您需要学习如何使用带有 $_POST 的表单，以及如何处理 $_SESSION 数组。

在这里回答有点大和笼统。浏览本教程中的基本章节：http: [//www.w3schools.com/php/default.asp](http://www.w3schools.com/php/default.asp) 或此处： [http ://www.tizag.com/phpT/](http://www.tizag.com/phpT/)

这将使您在几个小时内启动并运行 PHP。你不会后悔的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T21:20:54.000

```
$city = $_POST['metro']; 
$product = $_POST['product'];
$event = $_POST['tod'];
$date = $_POST['cruiseDate'];
$party = $_POST['pax'];

if($party == '1-19'){
    header("Location:url/contact-us?rfp[date]=$date&amp;$event");
}
elseif($party == '30-74'){
    $data = http_build_query($_POST);
    header("Location:url.com/search/?".$data);  
} 
```

这最终做了我需要的。

# sharepoint-2010 - 创建自定义 Web 部件，用于在单击超链接后获取对话框

> ID：11292189
> 
> 赞同：0
> 
> 时间：2012-07-02T10:51:02.553
> 
> 标签：sharepoint-2010

想象; 在共享点站点中，我们可以添加文档、列表等。将出现一个超链接，单击它时，我们会看到一个对话框，提示我们浏览和添加文档。

现在我需要创建一个自定义 webpart，它有一个点击它的超链接我需要一个像（添加文档）这样的对话框。我需要该对话框是默认的，而不是自定义生成的。我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:42:08.313

1) 使用[SP.UI.ModalDialog.showModalDialog(options)](http://msdn.microsoft.com/en-us/library/ff410058.aspx)方法 javascript Client 对象模型打开网页或在对话框中隐藏 div 元素

2) 上传文档页面的 URL 通常为 webURL/_layouts/Upload.aspx?List={List Guid}&RootFolder=。查找 url 的一种简单方法是右键单击“添加文档”链接并复制快捷方式。

# php - Mysql 检索最近 4 分钟内插入的行

> ID：11292191
> 
> 赞同：0
> 
> 时间：2012-07-02T10:51:24.180
> 
> 标签：php, mysql

我希望能够检索在过去 4 分钟内插入到 mysql 表中的行。我有一个名为'when'的mysql datetime字段可能会有所帮助，我在插入点插入mysql时间，现在'NOW（）'例如

```
$query = "INSERT INTO user_actions SET user='" . $user_id . "'" .
             ", action='" . $server_action . "'" .
             ", `when`=NOW()"; 
```

是否有一种优雅的方式来 SELECT * FROM user_actions WHERE ...（行的年龄小于 4 分钟并且 action = 'some value'）如果不需要，请随意忽略“何时”。

问候，斯图尔特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T10:54:54.270

```
SELECT * FROM user_actions 
WHERE `when` >= addtime(now(), '-00:04:00') 
```

或者

```
SELECT * FROM user_actions 
WHERE `when` >= now() - interval 4 minute 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T10:58:26.587

您可以使用 DATE_ADD，请参阅[此处获取文档](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_adddate)。

例子：

```
SELECT * FROM `user_actions` WHERE `when` >= DATE_ADD( NOW(), INTERVAL -4 MINUTE ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T11:37:30.313

```
SELECT * FROM user_actions 
WHERE `when` >= DATE_ADD(now(), INTERVAL -4 MINUTE)
and `action` ='someAction' 
```

# python - 在python中获取查询结果行集的确切sql类型

> ID：11292192
> 
> 赞同：0
> 
> 时间：2012-07-02T10:51:27.280
> 
> 标签：python, sql, sql-server, database

据我所知，标准 Python DB api 不提供结果行集的确切 SQL 类型信息。

无论如何，是否可以获得精确的 SQL 类型和一些更详细的信息，比如一些结果行集的 tinyint、bigint、nvarchar(100)，而不是像 int、str ... 这样的截断 python 类型？

我认为可移植性或模块依赖性并不重要——只要能工作就可以了。（我正在使用 Windows，MS-SQL。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:55:15.840

在您的查询之后使用`.description`以检索有关您的数据类型的信息等。

```
cursor.execute('select some_column from some_table')
print cursor.description 
```

> [。描述](http://www.python.org/dev/peps/pep-0249/)

```
 This read-only attribute is a sequence of 7-item
        sequences.  

        Each of these sequences contains information describing
        one result column: 

          (name, 
           type_code, 
           display_size,
           internal_size, 
           precision, 
           scale, 
           null_ok) 
```

# encryption - GnuPG：如何使用某个密钥加密/解密文件？

> ID：11292196
> 
> 赞同：10
> 
> 时间：2012-07-02T10:51:40.657
> 
> 标签：encryption, gnupg

**长话短说，我的问题是：**如何强制 GnuPG 在加密/解密文件时使用哪个私钥/公钥？

* * *

# 一些解释/长篇大论

我有一个应用程序必须在将文件发送到 S3 之前对其进行加密。

用户可以使用他们的浏览器从我的网站下载他们的文件，在这种情况下，我必须在提供文件之前先解密文件。

客户端（**delphi 2010**）：我很可能会选择[OpenPGPBlackbox](https://www.eldos.com/)

服务器端（PHP 5），我需要弄清楚如何使用非交互式命令加密/解密文件。

我在我的服务器上安装了 GnuPG，尝试了以下代码：

```
clear_file='/full/path/my-file.zip'
encrypted_file='/full/path/my-file.zip.pgp'

# Encrypt file
/usr/bin/gpg2 --encrypt "$clear_file"

# Decrypt file
/usr/bin/gpg2 --decrypt "$encrypted_file" 
```

但似乎我无法在命令行中指定要使用哪些键。

每个用户都有自己的公钥/私钥，所以我需要能够指定使用哪个密钥来加密/解密相关文件。

**我的问题是：**如何强制 GnuPG 在加密/解密文件时使用哪个私钥/公钥？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T12:18:17.400

您正在寻找的选项是：

```
--default-key $name$
          Use $name$ as the default key to sign with. If this option is not used, the default key is
          the first key found in the secret keyring.  Note that -u or --local-user overrides  this
          option.
--local-user $name$
   -u     Use  $name$  as  the  key  to sign with. Note that this option overrides --default-key. 
```

或者可能：

```
--recipient $name$
   -r     Encrypt for user id $name$. If this option or --hidden-recipient is not specified, 
          GnuPG asks for the  user-id unless --default-recipient is given.
--default-recipient $name$
          Use  $name$  as default recipient if option --recipient is not used and don't ask if 
          this  is a  valid  one. $name$ must be non-empty. 
```

这些可用于指定谁是预期的接收者，例如用于签名/加密的公钥。解密文件时，如果当前密钥环中存在 GnuPG 会自动选择正确的密钥`--keyring`，如果存在多个，可以通过选项进行选择。GnuPG 也可以配置为从密钥服务器获取必要的密钥，如果它们在那里可用的话。

您可能还对`--batch`确保在执行期间不询问交互式问题的选项感兴趣。

我建议您通读 GnuPG 手册页。有很多选项可能时不时有用。

# jquery - Jquery：动画到另一个对象的中心

> ID：11292207
> 
> 赞同：0
> 
> 时间：2012-07-02T10:52:51.683
> 
> 标签：jquery, jquery-animate

我正在尝试构建一个导航滑块，它就像在导航链接下滑动的箭头。我想将它设置为 div 的中心。

这是我的导航代码：

```
<nav>

        <ul class="tabs">
            <li id="tab1"><a href="#">Cursussen</a></li>
            <li id="tab2"><a href="#">Resultaten</a></li>
            <li id="tab3"><a href="#">Inbox</a></li>
            <li id="tab4"><a href="#">Profiel</a></li>
            <li id="tab5"><a href="#">Aanbod</a></li>
        </ul>

        <a id='slider'><img src="img/arrow.png"></a>

</nav> 
```

这是我用来制作动画的 jquery：

```
$(function(){
        $('li#tab1').click(function(evt) {
            evt.preventDefault();
            $('#slider').animate({
                left : '32'
            });
        });
}); 
```

我在想我可以创建一个像下面这样的变量，它计算我想要移动到中心的 div 的宽度。但我不完全知道如何为动画部分编写代码。

```
var w = '$(#slider).parent().width()'/2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:37:24.230

请试试这个js小提琴：

[http://jsfiddle.net/Q4efa/2/](http://jsfiddle.net/Q4efa/2/)

特别是，我使用了以下方法：

```
$('ul.tabs li').click(function(event){

    event.preventDefault();

    var ulOffsetLeft = $('ul.tabs').offset().left;
    var currentOffset = $(this).offset().left;

    var delta = currentOffset - ulOffsetLeft;

    $('#slider').clearQueue().animate({'margin-left': delta});

});​ 
```

更新：我在这里为这个新小提琴添加了一些自动填充计算：

[http://jsfiddle.net/Vt2dv/8/](http://jsfiddle.net/Vt2dv/8/)

# magento - OR 和 AND STATEMENT addAttributeToFilter magento

> ID：11292208
> 
> 赞同：0
> 
> 时间：2012-07-02T10:52:59.737
> 
> 标签：magento

我创建了以下代码。

```
$todayDate  = Mage::app()->getLocale()->date()->toString(Varien_Date::DATETIME_INTERNAL_FORMAT);
$tomorrow = mktime(0, 0, 0, date('m'), date('d')+1, date('y'));
$dateTomorrow = date('m/d/y', $tomorrow);

$collection = Mage::getResourceModel('catalog/product_collection');
$collection->setVisibility(Mage::getSingleton('catalog/product_visibility')->getVisibleInCatalogIds());

$collection = $this->_addProductAttributesAndPrices($collection)
->addStoreFilter()
->addAttributeToFilter('special_price', array('neq' => ""))
->addAttributeToFilter('special_from_date', array('date' => true, 'to' => $todayDate))
->addAttributeToFilter('special_to_date', array('or'=> array(0 => array('date' => true, 'from' => $dateTomorrow), 1 => array('is' => new Zend_Db_Expr('null')))), 'left'); 
```

这工作正常。但我现在想要的是使用 OR 语句。我想我可以用这个来解决它：

```
$collection->addAttributeToFilter(array(
array('attribute'=> 'someattribute','like' => 'value'),
array('attribute'=> 'otherattribute','like' => 'value'),
array('attribute'=> 'anotherattribute','like' => 'value'),
)); 
```

但没有成功。所以我的问题是如何添加 OR 语句。

```
$todayDate  = Mage::app()->getLocale()->date()->toString(Varien_Date::DATETIME_INTERNAL_FORMAT);
$tomorrow = mktime(0, 0, 0, date('m'), date('d')+1, date('y'));
$dateTomorrow = date('m/d/y', $tomorrow);

$collection = Mage::getResourceModel('catalog/product_collection');
$collection->setVisibility(Mage::getSingleton('catalog/product_visibility')->getVisibleInCatalogIds());

$collection = $this->_addProductAttributesAndPrices($collection)
->addStoreFilter()
->addAttributeToFilter('special_price', array('neq' => ""))
->addAttributeToFilter('special_from_date', array('date' => true, 'to' => $todayDate))
->addAttributeToFilter('special_to_date', array('or'=> array(0 => array('date' => true, 'from' => $dateTomorrow), 1 => array('is' => new Zend_Db_Expr('null')))), 'left'); 
```

或者

谢谢你。

太好了，莱克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T16:10:52.737

来自 Magento 维基：

```
// Add OR condition:
$collection->addAttributeToFilter(array(
    array(
        'attribute' => 'field_name',
        'in'        => array(1, 2, 3),
        ),
    array(
        'attribute' => 'date_field',
        'from'      => '2000-09-10',
        ),
    )); 
```

所以写你的查询，据我所知，是

```
"....WHERE special_price <> "" AND special_from_date <= '2012-07-02' AND (special_to_date >= '2012-07-03' OR special_to_date IS NULL)..." 
```

您将使用以下内容：

```
$collection = $this->_addProductAttributesAndPrices($collection)
->addStoreFilter()
->addAttributeToFilter('special_price', array('neq' => ""))
->addAttributeToFilter('special_from_date', array('date' => true, 'to' => $todayDate))
->addAttributeToFilter(array(
    array(
        'attribute' => 'special_to_date',
        'date' => true,
        'from' => $dateTomorrow
    ),
    array(
        'attribute' => 'special_to_date',
        'null' => 1
    )
)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T15:41:30.103

检查以下链接。

*   [在 Magento 中使用集合](http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/using_collections_in_magento)
*   [Magento 集合中的 addAttributeToFilter 和 OR 条件](https://stackoverflow.com/questions/5301231/addattributetofilter-and-or-condition-in-magentos-collection)

# ruby-on-rails - Private_pub ：如何取消订阅频道

> ID：11292209
> 
> 赞同：1
> 
> 时间：2012-07-02T10:53:02.693
> 
> 标签：ruby-on-rails, faye

我正在使用 private_pub 制作私人聊天应用程序，我的问题是如何使用 private_pub 取消订阅频道？

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:06:47.573

如果您在您的网站中大量使用 pjax 或 ajax 并且您正在使用 ajax 加载的页面您有 private_pub subscribe 方法，您会发现它在搜索了很多关于我发现这些来自 privat_pub javascript 文件的 fork 后订阅了很多次解决了这些问题

```
var PrivatePub = (function (doc) {
 var self = {
connecting: false,
fayeClient: null,
fayeCallbacks: [],
subscriptions: {},
subscriptionCallbacks: {},

faye: function(callback) {
  if (self.fayeClient) {
    callback(self.fayeClient);
  } else {
    self.fayeCallbacks.push(callback);
    if (self.subscriptions.server && !self.connecting) {
      self.connecting = true;
      if (typeof Faye === 'undefined') {
        var script = doc.createElement("script");
        script.type = "text/javascript";
        script.src = self.subscriptions.server + ".js";
        script.onload = self.connectToFaye;
        doc.documentElement.appendChild(script);
      } else {
        self.connectToFaye();
      }
    }
  }
},

connectToFaye: function() {
  self.fayeClient = new Faye.Client(self.subscriptions.server);
  self.fayeClient.addExtension(self.fayeExtension);
  for (var i=0; i < self.fayeCallbacks.length; i++) {
    self.fayeCallbacks[i](self.fayeClient);
  };
},

fayeExtension: {
  outgoing: function(message, callback) {
    if (message.channel == "/meta/subscribe") {
      // Attach the signature and timestamp to subscription messages
      var subscription = self.subscriptions[message.subscription];
      if (!message.ext) message.ext = {};
      message.ext.private_pub_signature = subscription.signature;
      message.ext.private_pub_timestamp = subscription.timestamp;
    }
    callback(message);
  }
},

sign: function(options) {
  if (!self.subscriptions.server) {
    self.subscriptions.server = options.server;
  }
  if (!self.subscriptions[options.channel]) {
    self.subscriptions[options.channel] = options;
    self.faye(function(faye) {
      faye.subscribe(options.channel, self.handleResponse);
    });
  }
},

handleResponse: function(message) {
  if (message.eval) {
    eval(message.eval);
  }
  if (callback = self.subscriptionCallbacks[message.channel]) {
    callback(message.data, message.channel);
  }
},

subscribe: function(channel, callback) {
  self.subscriptionCallbacks[channel] = callback;
}
 };
  return self;
   }(document)); 
```

试试看。

# sparql - 使用 DBpedia 查找几个给定页面共有的 Wikipedia 类别？

> ID：11292212
> 
> 赞同：2
> 
> 时间：2012-07-02T10:53:19.370
> 
> 标签：sparql, wikipedia, dbpedia

我已经忘记了关于 DBpedia 的所有新知识，`SPARQL`并且当我用 Google 搜索这些示例时，我发现所有示例都太复杂且难以理解。

我希望做的是传入两个或三个维基百科页面，并取回所有页面都属于的维基百科类别集。

这似乎应该非常简单，`SPARQL`所以我希望有一个非常简单的例子来帮助我开始。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T21:43:10.830

这实际上是您之前关于[获取属于两个类别的所有页面](https://stackoverflow.com/questions/11292152/how-to-find-all-wikipedia-pages-which-are-members-two-given-categories-using-dbp)的问题的变体。唯一的区别是这一次，您需要两个/三个*subject*而不是*objects*，因此您不能使用逗号分隔的值枚举，而是必须写出您想要匹配的三元组模式。

例如，要获取西班牙和葡萄牙都属于的所有类别，您可以简单地执行如下查询：

```
SELECT ?cat   
WHERE { 
 <http://dbpedia.org/resource/Spain> dcterms:subject ?cat .
 <http://dbpedia.org/resource/Portugal> dcterms:subject ?cat .
} 
```

这个查询的作用是为主题“西班牙”和“葡萄牙”选择所有具有相同值的三元组`?cat`模式`dcterms:subject`。换句话说，它准确地检索两种资源都属于的那些类别。

诀窍是用图形来思考，或者用连接的主题和对象来思考三元组。这是一种精神上的转变，但一旦你有了它，查询编写就会变得容易得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T11:25:47.683

wikipedia 和 dbpedia URI 之间的映射如下：

为了

[http://en.wikipedia.org/wiki/Spain](http://en.wikipedia.org/wiki/Spain)

DBPedia uri 是：

[http://dbpedia.org/resource/Spain](http://dbpedia.org/resource/Spain)

所以要找出上面的类别

```
PREFIX dcterms: <http://purl.org/dc/terms/>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
SELECT ?categoryUri ?categoryName
WHERE {
  <http://dbpedia.org/resource/Spain> dcterms:subject ?categoryUri.
  ?categoryUri rdfs:label ?categoryName.
  FILTER (lang(?categoryName) = "en")
} 
```

# mongodb - mongodb 在 CAP 定理中处于什么位置？

> ID：11292215
> 
> 赞同：149
> 
> 时间：2012-07-02T10:53:27.233
> 
> 标签：mongodb, cap-theorem, database, nosql

我到处看，我看到 MongoDB 是 CP。但是当我深入研究时，我发现它最终是一致的。使用safe=true时是CP吗？如果是这样，这是否意味着当我使用 safe=true 编写时，所有副本都会在得到结果之前更新？

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2012-07-02T16:33:11.693

默认情况下，MongoDB 是强一致的——如果你先写然后再读，假设写成功，你将始终能够读取刚刚读到的写的结果。这是因为 MongoDB 是单主系统，默认情况下所有读取都转到主系统。如果您有选择地启用从辅助节点读取，那么 MongoDB 最终会变得一致，可以读取过时的结果。

MongoDB 还通过副本集中的自动故障转移获得高可用性：[http ://www.mongodb.org/display/DOCS/Replica+Sets](http://www.mongodb.org/display/DOCS/Replica+Sets)

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2017-06-08T15:45:05.820

我同意卢卡斯的帖子。您不能只说 MongoDB 是 CP/AP/CA，因为它实际上是**C、A 和 P 之间的权衡，取决于数据库/驱动程序配置和灾难类型**：这是一个视觉回顾，下面是更详细的解释。

```
Scenario                   | Main Focus | Description
---------------------------|------------|------------------------------------
No partition               |     CA     | The system is available 
                           |            | and provides strong consistency
---------------------------|------------|------------------------------------
partition,                 |     AP     | Not synchronized writes 
majority connected         |            | from the old primary are ignored                
---------------------------|------------|------------------------------------
partition,                 |     CP     | only read access is provided
majority not connected     |            | to avoid separated and inconsistent systems 
```

### 一致性：

当您使用单个连接或正确的[写入](https://docs.mongodb.com/manual/reference/write-concern/)/[读取关注级别](https://docs.mongodb.com/manual/reference/read-concern/#read-concern-levels)（[这将降低您的执行速度](http://techidiocy.com/write-concern-mongodb-performance-comparison/)）时，MongoDB 具有很强的一致性。一旦您不满足这些条件（尤其是当您从辅助副本读取时），MongoDB 就会变得最终一致。

### 可用性：

MongoDB 通过[Replica-Sets](https://docs.mongodb.com/manual/replication/#replication-in-mongodb)获得高可用性。一旦主节点出现故障或变得不可用，辅助节点将确定一个新的主节点再次可用。这样做有一个缺点：由旧主节点执行但未同步到辅助节点的每次写入都将被[回滚](https://docs.mongodb.com/manual/core/replica-set-rollbacks/)并保存到回滚文件中，只要它重新连接到集合（旧主节点是辅助节点）现在）。因此，在这种情况下，为了可用性而牺牲了一些一致性。

### 分区容差：

通过使用上述 Replica-Sets MongoDB 还实现了分区容错性：只要一个 Replica-Set 的一半以上的服务器相互连接，[就可以选择一个新的 Primary](https://docs.mongodb.com/manual/core/replica-set-elections/)。为什么？确保两个分离的网络不能同时选择一个新的主。当没有足够的辅助节点相互连接时，您仍然可以从中读取（但不能确保一致性），但不能写入。为了保持一致性，该集合实际上是不可用的。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2015-05-15T00:19:32.237

由于出现了[一篇精彩的新文章以及](https://martin.kleppmann.com/2015/05/11/please-stop-calling-databases-cp-or-ap.html)[Kyle 在该领域的](https://aphyr.com/posts/322-call-me-maybe-mongodb-stale-reads)一些很棒的实验，在将 MongoDB 和其他数据库标记为 C 或 A 时，您应该小心。

当然 CAP 有助于不费吹灰之力地追踪数据库的优势，但人们经常忘记 CAP 中的 C 意味着原子一致性（线性化）。这让我在尝试分类时很难理解。所以，除了 MongoDB 提供强一致性之外，这并不意味着它是 C。这样，如果有人进行这种分类，我建议也更深入地了解它的实际工作原理，以免留下疑问。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-07-02T13:16:38.903

是的，使用时是CP `safe=true`。这仅仅意味着，数据进入了主磁盘。如果您想确保它也到达某个副本，请查看“w=N”参数，其中 N 是必须保存数据的副本数。

有关更多信息，请参阅[此](http://www.mongodb.org/display/DOCS/Verifying+Propagation+of+Writes+with+getLastError)和[此](http://www.quora.com/MongoDB/How-durable-is-MongoDB-2)。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-04-22T20:08:26.397

只要有分区，MongoDB 就会选择 Consistency over Availability。这意味着当有一个分区（P）时，它会选择一致性（C）而不是可用性（A）。

为了理解这一点，让我们了解一下 MongoDB 是如何实现副本集的。一个副本集有一个主节点。提交数据的唯一“安全”方式是写入该节点，然后等待该数据提交到集合中的大多数节点。（发送写入时，您将看到 w=majority 的标志）

分区可能在以下两种情况下发生：

*   当主节点关闭时：系统变得不可用，直到选择新的主节点。
*   当 Primary 节点与太多 Secondary 节点断开连接时：系统不可用。其他辅助节点将尝试选举一个新的主节点，当前的主节点将下台。

Basically, whenever a partition happens and MongoDB needs to decide what to do, it will choose Consistency over Availability. It will stop accepting writes to the system until it believes that it can safely complete those writes.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-08-28T11:07:21.723

Mongodb 从不允许写入辅助。它允许从辅助读取但不允许写入。因此，如果您的主服务器出现故障，您将无法写入，直到辅助服务器再次成为主服务器。这就是在 CAP 定理中牺牲高可用性的方式。通过只从主数据库中读取数据，您可以获得强一致性。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-10-10T10:16:39.190

我不确定Mongo的P。想象一下情况：

*   您的副本被分成两个分区。
*   Writes continue to both sides as new masters were elected
*   分区已解决 - 现在所有服务器都已重新连接
*   发生的情况是新的 master 被选出 - 具有最高 oplog 的那个，但是来自另一个 master 的数据被恢复到分区之前的公共状态，并且它被转储到一个文件以进行手动恢复
*   所有的次要都赶上了新的主人

这里的问题是转储文件的大小是有限的，如果你有一个分区很长时间，你可能会永远丢失你的数据。

你可以说它不太可能发生——是的，除非在云中它比人们想象的更常见。

这个例子就是为什么在将任何字母分配给任何数据库之前我会非常小心。有这么多的场景和实现并不完美。

如果有人知道这种情况是否已在以后的 Mongo 版本中得到解决，请发表评论！（我已经有一段时间没有关注正在发生的一切了..）

# java - 从“远程”异常中的通用异常链工具中排除

> ID：11292216
> 
> 赞同：0
> 
> 时间：2012-07-02T10:53:28.893
> 
> 标签：java, jms, rmi, rpc

考虑任何“*远程*”异常：
`javax.jms.JMSException`或`java.rmi.RemoteException`
两者都通过具有*详细*或*链接异常*属性而从异常链接的常见模式中排除。
当您打印包含此异常之一的堆栈跟踪时，您将获得修剪的堆栈跟踪。要获得*完整*的堆栈跟踪，您需要额外的手鼓跳舞。

以这种方式设计 *远程*异常的原因是什么？

编辑：

我正在浏览 java 1.6.0_26 的源代码。查看 的两个参数构造函数`public RemoteException(String s, Throwable cause)`。`java.rmi.RemoteException`你可以看到下一个代码`initCause(null); // Disallow subsequent initCause`。这似乎是 Java SE 6 中有意做出的决定。
**但是**按照[惯例，构建](http://docs.oracle.com/javase/tutorial/essential/exceptions/chained.html) *异常链*`initCause()`有它的宏伟目的！ 我不记得来源，但我对创建自定义异常的最佳实践充满信心： 1\. 公开超类 2 的所有构造函数。不要制动*异常链*（换句话说，调用）。这可以通过调用超级构造函数来简单地实现。 **`Throwable.initCause()`**

 **谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:50:04.190

猜猜是时候更新你的java了:)

> 从 1.4 版开始，此异常已被改进以符合通用异常链机制。可以在构建时提供并通过公共详细信息字段访问的“包装的远程异常”现在称为原因，可以通过 Throwable.getCause() 方法以及上述“遗留字段”进行访问。

[http://docs.oracle.com/javase/1.5.0/docs/api/java/rmi/RemoteException.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/rmi/RemoteException.html)

编辑：

并回答你的问题：这是一个糟糕的设计决定，在 1.4 中得到了纠正

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T23:43:10.063

你的问题是基于一个错误的前提。`Throwable`向上的每个异常都有一个[getCause()](http://docs.oracle.com/javase/6/docs/api/java/lang/Throwable.html#getCause%28%29)方法。**

# django - 在子路径中通过 nginx+uwsgi 运行 django app

> ID：11292217
> 
> 赞同：16
> 
> 时间：2012-07-02T10:53:33.150
> 
> 标签：django, nginx

我想在我们的开发服务器上的子目录别名中运行一个简单的测试项目。基本设置是一个 nginx，其位置将子目录中的所有内容传递给 wsgi 应用程序。

Django 显然不明白它运行在一个子目录别名中，这完全破坏了 URL 的生成和解析。
我在文档中找不到任何类似前缀的设置，我的 google fu 也没有太大帮助......所以我在这里问。

我唯一找到的是设置 FORCE_SCRIPT_NAME 至少修复了 URL 生成。（参见：[http](http://docs.webfaction.com/software/django/config.html#mounting-a-django-application-on-a-subpath) ://docs.webfaction.com/software/django/config.html#mounting-a-django-application-on-a-subpath ）
遗憾的是，这并不能修复 urlconf 解析，即使提到的网站建议那。

是否可以在子目录别名中运行 django 应用程序，如果可以，如何？

nginx配置：

```
server {
        location /fancyprojectname/static {
                alias /srv/fancyprojectname/static;
        }

        location /fancyprojectname/ {
                uwsgi_pass unix://var/run/uwsgi/app/fancyprojectname/socket;
                include uwsgi_params;
        }
} 
```

**编辑**

因此，设置“uwsgi_param SCRIPT_NAME /fancyprojectname;” 在 nginx 位置使 FORCE_SCRIPT_NAME 变得不必要 - 遗憾的是 URL 匹配仍然不起作用。

```
from django.conf.urls import patterns, include, url

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls)),
) 
```

我认为发生了什么：由于管理员正则表达式以“^admin”开头并且实际 URL 是“fancyprojectname/admin/”，因此即使设置了 SCRIPT_NAME，Django 也无法正确匹配 URL。

**解决方案**

所以，这确实是 SCRIPT_NAME 的问题。

[WSGI 规范](http://www.python.org/dev/peps/pep-0333/)说明如下：

> SCRIPT_NAME 请求 URL 的“路径”的初始部分，对应于应用程序对象，以便应用程序知道其虚拟“位置”。如果应用程序对应于服务器的“根”，这可能是一个空字符串。
> 
> PATH_INFO 请求 URL 的“路径”的其余部分，指定应用程序中请求目标的虚拟“位置”。如果请求 URL 以应用程序根目录为目标并且没有尾部斜杠，则这可能是一个空字符串。

Nginx 不会自动设置 SCRIPT_NAME，所以无论如何都需要设置。之后 PATH_INFO 是错误的，因为在默认设置中 Nginx 将其设置为 $document_uri，这将是完整的 URL。

“uwsgi_modifier1 30；” 告诉 Nginx 设置 UWSGI_MODIFIER_MANAGE_PATH_INFO，这反过来告诉 UWSGI 去除 PATH_INFO 的 SCRIPT_NAME。

这些设置的组合似乎有效，因为 Django 现在可以正确生成和匹配 URL。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T11:18:10.643

这是错误的：

> Django 显然不明白它运行在一个子目录别名中，这完全破坏了 URL 的生成和解析。

Django*确实*理解这一点，并且透明地处理它。服务器应该自行设置`SCRIPT_NAME`：您发现自己正在使用的事实`FORCE_SCRIPT_NAME`表明问题出在您的 Nginx 配置中，而不是在 Django 中。

我怀疑问题在于使用`location`，而不是更合适的指令。不幸的是，我不是 Nginx/uwsgi 方面的专家。在 Apache/mod_wsgi 中，您可以这样做：

```
WSGIScriptAlias /mysite /usr/local/django/mysite/apache/django.wsgi 
```

告诉 mod_wsgi 该站点从 开始`mysite`，而不是根。几乎可以肯定 nginx/uwsgi 有一个类似的命令。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-04-12T11:59:32.240

`http://www.example.com/`如果在（您的基本域）托管 Django 站点时此 Nginx 位置块有效：

```
location / {
    uwsgi_pass unix:/tmp/fancyprojectname.socket;
    include /etc/nginx/uwsgi_params;
} 
```

然后这将适用于`http://www.example.com/subpath/`（您的基本域上的子路径）：

```
location /subpath {
    uwsgi_pass unix:/tmp/fancyprojectname.socket;
    uwsgi_param SCRIPT_NAME /subpath; # explicitly set SCRIPT_NAME to match subpath
    uwsgi_modifier1 30; # strips SCRIPT_NAME from PATH_INFO (the url passed to Django)
    include /etc/nginx/uwsgi_params;
} 
```

...并且无需在您的 Django 设置中设置 FORCE_SCRIPT_NAME 。

**参考：**

*   Strayer 在问题中发布的原始评论和解决方案。
*   [https://uwsgi-docs.readthedocs.org/en/latest/Nginx.html](https://uwsgi-docs.readthedocs.org/en/latest/Nginx.html)
*   [https://www.python.org/dev/peps/pep-0333/](https://www.python.org/dev/peps/pep-0333/)（完整的 WSGI 规范）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-05-29T15:49:15.937

现在，在最新版本的 Nginx 和 uWSGI`uwsgi_modifier1 30`中已将其**删除**（而且我不想使用一些 hacky 的重写规则），我必须找到一种更新的方法来让它工作：

*uWSGI 配置：*

```
[uwsgi]
# Requires PCRE support compiled into uWSGI
route-run = fixpathinfo: 
```

*Nginx 配置*：

```
server {
    location /fancyprojectname/static {
        alias /srv/fancyprojectname/static;
    }

    location /fancyprojectname {
        uwsgi_pass unix://var/run/uwsgi/app/fancyprojectname/socket;
        uwsgi_param SCRIPT_NAME /fancyprojectname; # Pass the URL prefix to uWSGI so the "fixpathinfo:" route-rule can strip it out
        include uwsgi_params;
    }
} 
```

**如果无法解决：**尝试安装 libpcre 和 libpcre-dev，然后使用`pip install -I --no-cache-dir uwsgi`. uWSGI 的内部路由子系统需要在编译/安装 uWSGI*之前安装 PCRE 库。*[有关 uWSGI 和 PCRE 的更多信息。](https://stackoverflow.com/a/22645915/1951234)

# c# - 双导航时 Windows Phone 应用程序崩溃

> ID：11292219
> 
> 赞同：2
> 
> 时间：2012-07-02T10:53:38.123
> 
> 标签：c#, silverlight, windows-phone-7

在我的 Windows Phone 应用程序中，当我按下按钮导航到 Page1 并且在它完成加载之前，我按下按钮导航到 Page2，我的应用程序崩溃了。是否正确，实施此行为的最佳做法是什么？

**更新** 一般我认为，对我来说最好的方法是在按下其中一个按钮后阻止屏幕上的所有按钮，并在导航完成后将它们激活，那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:03:18.000

最佳做法是在第一次单击后禁用 Click 事件。如果您的按钮名为 b 并且您在 xaml 或代码隐藏中分配了事件处理程序，例如

```
b.Click += new RoutedEventHandler(ButtonOnClick);

void ButtonOnClick(object sender, RoutedEventArgs e)
{
    b.Click -= new RoutedEventHandler(ButtonOnClick);

    // Navigate away now.
} 
```

实际上，我的示例只会停止双击当前按钮，但您也可以禁用其他按钮。

在我的一个应用程序中，我维护一个列表，我对其进行迭代和显示/隐藏，启用/禁用所需的。您所做的就是迭代并设置正确的属性。

```
foreach(var button in myButtons)
    button.IsEnabled = false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:03:33.460

将调用包装`NavigationService.Navigate(Page2Uri)`成`Dispatcher.BeginInvoke(()=> {...} );`如下：

```
Dispatcher.BeginInvoke (()=> { NavigationService.Navigate(Page2Uri) }); 
```

# java - Java 中的项目 Euler #19

> ID：11292220
> 
> 赞同：1
> 
> 时间：2012-07-02T10:53:41.460
> 
> 标签：java, project

您将获得以下信息，但您可能更愿意自己做一些研究。

```
1 Jan 1900 was a Monday.
Thirty days has September,
April, June and November.
All the rest have thirty-one,
Saving February alone,
Which has twenty-eight, rain or shine.
And on leap years, twenty-nine.
A leap year occurs on any year evenly divisible by 4, but not on a century unless it is divisible by 400. 
```

在 20 世纪（1901 年 1 月 1 日至 2000 年 12 月 31 日）有多少个星期日是每月的第一天？

解决方案 ：

我的以下逻辑给了我 173 个星期日，而有 171 个星期日！额外的 2 天从哪里来？

```
public static void main(String args[]) {

    Date startDate = new Date(1901, Calendar.JANUARY, 01);
    Date endDate = new Date(2000, Calendar.DECEMBER, 31);

    checkSundays(startDate, endDate);
}

private static void checkSundays(Date start, Date end) {
    int dayNum;

    Calendar startDate = Calendar.getInstance();
    startDate.setTime(start);
    System.out.println(startDate.getTime());

    Calendar endDate = Calendar.getInstance();
    endDate.setTime(end);
    System.out.println(endDate.getTime());
    int count = 0;

    while (startDate.before(endDate)) {
        for (int i = 1; i < 13; i++) {
            dayNum = startDate.get(Calendar.DAY_OF_WEEK);
            if (dayNum == 1) {
                count++;
            }

            System.out.println(startDate.getTime());
            startDate.add(Calendar.MONTH, 1);

        }
            System.out.println("Count " + count);

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T10:57:21.217

您的以下代码使用不推荐使用的构造函数`Date`

```
Date startDate = new Date(1901, Calendar.JANUARY, 01);
System.out.println(startDate); 
```

这是不正确的，它打印

```
Thu Jan 01 00:00:00 IST 3801 
```

所以使用`Calendar`构造`Date`，

```
 Calendar startDateCal = createDateInstance(0,1901,1)

    Calendar endDateCal = createDateInstance(11,2000,13) 
```

和工厂方法

```
public static Date createDateInstance(int month, int year, int date){
  Calendar cal= Calendar.getInstance();
  cal.set(Calendar.YEAR, year);
  cal.set(Calendar.MONTH, month);
  cal.set(Calendar.DATE, date);

  return cal.getTime();

} 
```

查看[您的工作代码](http://ideone.com/AdINY)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-08T06:13:36.067

您可以使用概率，只需一个计算器即可。

一个世纪有 100 年，每年有 12 个月的第一天。将其除以 7，您就有了答案。

它很便宜，但它有效。

# c# - 将 PDF 文件中的“文档参考”更改为“超链接”

> ID：11292227
> 
> 赞同：2
> 
> 时间：2012-07-02T10:54:10.407
> 
> 标签：c#, .net, pdf, itextsharp, abcpdf

如何将参考（链接到另一个 PDF 文件）更改为超链接并将其 URI 设置为例如`google.com`？

超链接和引用似乎是 iTextSharp 库中的不同对象或更确切地说是类。因此，引用对象必须有某种类型的切换。

使用 iTextSharp，我可以轻松更改超链接的 URI，我在[这里](https://stackoverflow.com/questions/8140339/using-itextsharp-to-extract-and-update-links-in-an-existing-pdf)找到了。但这不适用于参考。

而且我没有找到使用 abcpdf 库的方法。

我需要一些提示、片段或基于 iTextSharp 或 abcpdf (websupergoo) 库的使用的解决方案。

参考和链接的技术 ASCII 实现：

参考：

```
55 0 obj<</F 56 0 R/S/Launch/NewWindow true>>
endobj
56 0 obj<</F(Testdokument_2.pdf)/Type/Filespec>>
endobj
57 0 obj<</Rect[65.0666 447.627 190.233 473.951]/Subtype/Link/BS<</S/S/W1/Type/Border>>/A 59 0 R/C[0.0 1.0 0.0]/H/I/Border[0 0 1]/Type/Annot>>
endobj 
```

关联：

```
6 0 obj
<</Subtype/Link/Rect[68.6 643.86 93.312 669.3]/BS<</W 0>>/F 4/A<</Type/Action/S/URI/URI(http://www.bing.com/)>>/StructParent 1>>
endobj 
```

也许这将有助于理解差异。

# c# - 如何改进插入列表，使用多核

> ID：11292230
> 
> 赞同：1
> 
> 时间：2012-07-02T10:54:16.577
> 
> 标签：c#, list, parallel-processing

我必须从数据库中读取 100.000 行，我使用以下代码：

```
List<elementClass> Listelement = new List<elementClass>();
using (DbDataReader reader = cmd.ExecuteReader())
{
    while (reader .Read())
    {
        elementClass element= new elementClass();
        DatabaseClass.ReadFromObject(reader , element);
        Listelement.Add(element);
    }
} 
```

读取对象：

```
public static void ReadFromObject(DbDataReader dr, Object obj)
{
    DataTable tableDescriptor = dr.GetSchemaTable();

    try
    {
        //Id - Identifier
        obj.GetType().GetProperty("Id").SetValue(obj, dr.GetValue(dr.GetOrdinal("Id")), null);

        PropertyInfo[] properties = obj.GetType().GetProperties();
        foreach (PropertyInfo pi in properties)
        {
            if (!ExistColumn(tableDescriptor, pi.Name)) continue;   // field not found
            if (dr[pi.Name] == DBNull.Value) continue;

            if (pi.PropertyType.IsEnum) { }
            else
            {
                switch (pi.PropertyType.Name)
                {
                    case "DateTime":
                        object dateValue = null;
                        if (dr[pi.Name].GetType().Name == "String")
                            dateValue = F24Common.Utility.DateFromString(dr.GetString(dr.GetOrdinal(pi.Name)));
                        else
                            dateValue = dr.GetDateTime(dr.GetOrdinal(pi.Name));
                        pi.SetValue(obj, dateValue, null);
                        break;
                    default:
                         pi.SetValue(obj, dr.GetValue(dr.GetOrdinal(pi.Name)), null);
                        break;
                }
            }
        }

    }
    catch (Exception )
    {

    }
} 
```

这段代码肯定有问题，太慢了（整个处理过程需要 45-50 分钟）。是否可以同时使用多个 CPU 内核（我有一个四核 CPU）来填充列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:57:34.547

乍一看，我认为瓶颈在于反射量。我建议阅读 Jon Skeets 出色的[使反射飞起来的文章](http://msmvps.com/blogs/jon_skeet/archive/2008/08/09/making-reflection-fly-and-exploring-delegates.aspx)。然后，您可以缓存以`obj`.

我会犹豫是否从多个线程访问 DataReader，因为我怀疑这样做是否安全。

# jquery - 使用漂亮的过渡效果更改背景图像 - Jquery

> ID：11292238
> 
> 赞同：0
> 
> 时间：2012-07-02T10:54:48.513
> 
> 标签：jquery, css, background, jquery-animate

我必须以特定的时间间隔更改背景图像。背景中将有大约 4-5 张图像将被更改。我还想要一个很好的过渡效果，其中一个图像开始褪色，甚至在它完全褪色之前下一张图像开始褪色。

有关所需功能，请查看[http://www.virgin-atlantic.com/gb/en.html](http://www.virgin-atlantic.com/gb/en.html)

我的结构如下：

```
<div class="items">
            <div id="backWallpaper" style="left: 0px; top: 0px; overflow: hidden; position: absolute;
                z-index: -1; margin: 0px; padding: 0px; display: none;" class="carousel_item">
                <img class="bg_slider" src="images/bg_img_01.jpg" alt="Get the most out of your Trade In">
            </div>
            <div id="backWallpaper" style="left: 0px; top: 0px; overflow: hidden; position: absolute;
                z-index: -1; margin: 0px; padding: 0px; display: none;" class="carousel_item">
                <img class="bg_slider" src="images/bg_img_02.jpg" alt="Get the most out of your Trade In">
            </div>
            <div id="backWallpaper" style="left: 0px; top: 0px; overflow: hidden; position: absolute;
                z-index: -1; margin: 0px; padding: 0px; display: none;" class="carousel_item">
                <img class="bg_slider" src="images/bg_img_03.jpg" alt="Get the most out of your Trade In">
            </div>
            <div id="backWallpaper" style="left: 0px; top: 0px; overflow: hidden; position: absolute;
                z-index: -1; margin: 0px; padding: 0px; display: none;" class="carousel_item">
                <img class="bg_slider" src="images/bg_img_04.jpg" alt="Get the most out of your Trade In">
            </div>
        </div> 
```

交换图像的代码如下：

```
$(window).load(function () {
            //load first background after page loads.
            $('.carousel_item').eq(0).fadeIn(2000);
            setTimeout(changeBackground, 4000);
        });

        //indexers
        var fadeOut = 0;
        var fadeIn = 1;

        function changeBackground() {
            //fadeOut the first image
            $('.carousel_item').eq(fadeOut).fadeOut(1000);
            //fadeIn the second image
            $('.carousel_item').eq(fadeIn).fadeIn(1500);
            //increament indexers
            fadeOut += 1;
            fadeIn += 1;
            //if indexer becomes greater than 3 reset it to 0
            if (fadeOut > 3)
                fadeOut = 0;
            if (fadeIn > 3)
                fadeIn = 0;

            //again set the timeout to loop.
            setTimeout(changeBackground, 4000);
        } 
```

现在的问题是代码的行为很奇怪。直到最后一张图像，即（索引：3）图像显示正常。之后，最后一张图片似乎卡住了。好像由于某种原因，fadeOut 对最后一个索引不起作用。

请告知此代码设置中可能出现的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T11:25:54.757

这个[jsfiddle](http://jsfiddle.net/pG8kt/131/)有效：

```
var current = 0,
    speed = 1500,
    $imgs = $('img', '#slider'),
    imgAmount = $imgs.length;

$imgs.css('position', 'absolute').hide().first().show();

function swapImages() {
    var $currentImg = $($imgs[current]);
    if(current == imgAmount-1) current = -1;
    var $nextImg = $($imgs[++current]);
    // animation speed should be the same for both images so we have a smooth change
    $currentImg.fadeOut(speed);
    $nextImg.fadeIn(speed);
}

window.setInterval(swapImages, 4000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T12:39:38.153

为了进一步测试这个问题，我将 carousel_item div 上的样式负载移至 css 类，并注意到 fadeOut 没有删除 div 上的**display:block**属性。

fadeOut 似乎对具有 0 宽度和 0 高度的元素有问题，所以当我*`postion:absolute`*从 carousel_item div 中删除它们时，它们会增长到包含图像的大小，瞧问题就解决了。

要进一步了解该问题，请检查此链接上接受的答案 [jQuery fadeOut is not changed display property](https://stackoverflow.com/q/6274097/168371)

感谢 simon 和 jfrej 的帮助和 jsFiddle 设置。

# sql - SQL SERVER 批量插入忽略变形的行

> ID：11292239
> 
> 赞同：3
> 
> 时间：2012-07-02T10:54:50.477
> 
> 标签：sql, sql-server, sql-server-2008, bulkinsert, openrowset

我必须导入 SAP 未转换列表。这些报告看起来很丑陋，不太适合自动化处理。然而，没有其他选择。数据以减号和竖线符号为界，类似于以下示例：

```
02.07.2012
--------------------
Report name
--------------------
|Header1 |Header2  |
|Value 11|Value1 2 |
|Value 21|Value2 2 | 
-------------------- 
```

我使用格式文件和如下语句：

```
SELECT Header1, Header2
FROM  OPENROWSET(BULK  'report.txt',
FORMATFILE='formatfile_report.xml'  ,
errorfile='rejects.txt',
firstrOW = 2,
maxerrors = 100 ) as report 
```

不幸的是，我收到以下错误代码：

```
Msg 4832, Level 16, State 1, Line 1
Bulk load: An unexpected end of file was encountered in the data file.
Msg 7399, Level 16, State 1, Line 1
The OLE DB provider "BULK" for linked server "(null)" reported an error. The provider did not give any information about the error.
Msg 7330, Level 16, State 2, Line 1
Cannot fetch a row from OLE DB provider "BULK" for linked server "(null)". 
```

拒绝 txt 文件包含文件的最后一行，其中只有减号。rejects.txt.Error.Txt 文件：

```
Row 21550 File Offset 3383848 ErrorFile Offset 0 - HRESULT 0x80004005 
```

引发错误的罪魁祸首显然是最后一行不符合格式文件中声明的格式。然而，丑陋的标题不会引起太多问题（至少是最顶部的那个）。

尽管我定义了 maxerror 属性，但只有一条变形的线会杀死整个操作。如果我手动删除包含所有减号 (-) 的最后一行，一切正常。由于该导入将经常运行且特别无人看管，因此额外的后处理不是严肃的解决方案。

任何人都可以帮助我让 sql server 分别变得不那么挑剔和敏感。它记录了无法加载的行很好，但为什么它会中止整个操作？并且在执行导致创建 reject.txt 的语句之后，在手动删除 txt 文件之前不能执行其他（或相同）语句：

```
Msg 4861, Level 16, State 1, Line 1
Cannot bulk load because the file "rejects.txt" could not be opened. Operating system error code 80(The file exists.).
Msg 4861, Level 16, State 1, Line 1
Cannot bulk load because the file "rejects.txt.Error.Txt" could not be opened. Operating system error code 80(The file exists.). 
```

我认为这是一种奇怪的行为。请帮我压制它。

**编辑 - 跟进：** 这是我使用的格式文件：

```
<?xml version="1.0"?>
<BCPFORMAT xmlns="http://schemas.microsoft.com/sqlserver/2004/bulkload/format" 
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
 <RECORD>
   <FIELD ID="EMPTY" xsi:type="CharTerm" TERMINATOR="|" MAX_LENGTH="100"/>
   <FIELD ID="HEADER1" xsi:type="CharTerm" TERMINATOR="|" MAX_LENGTH="100"/>
   <FIELD ID="HEADER2" xsi:type="CharTerm" TERMINATOR="|\r\n" MAX_LENGTH="100"/>
 </RECORD>
 <ROW>
   <COLUMN SOURCE="HEADER1" NAME="HEADER2" xsi:type="SQLNVARCHAR"/>
   <COLUMN SOURCE="HEADER2" NAME="HEADER2" xsi:type="SQLNVARCHAR"/>
 </ROW>
 </BCPFORMAT> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T01:02:56.513

`BULK INSERT`在处理不符合所提供规范的数据时，这是出了名的繁琐和无益。

我没有对格式文件做很多工作，但是您可能要考虑替换的一件事是使用`BULK INSERT`将文件的每一行放入具有单列的临时登台表中`nvarchar(max)`。

这使您可以将数据放入 SQL 中以供进一步检查，然后您可以使用各种字符串操作函数将其分解为最终要插入的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-20T21:04:07.730

我遇到了同样的麻烦，但是使用 bcp 命令行问题解决了，它根本不占用最后一行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-06T15:53:26.193

我有同样的问题。我有一个包含 1150 亿行的文件，因此无法手动删除最后一行，因为我什至无法手动打开该文件，因为它太大了。

我没有使用 BULK INSERT 命令，而是使用了 bcp 命令，如下所示：（在管理员中打开 DOS cmd 然后写入）

```
bcp DatabaseName.dbo.TableNameToInsertIn in C:\Documents\FileNameToImport.dat -S ServerName -U UserName -P PassWord 
```

据我所知，它与批量插入的速度差不多（我只花了 12 分钟来导入我的数据）。在查看活动监视器时，我可以看到批量插入，所以我猜它在数据库处于批量恢复模式时以相同的方式记录。

# java - 在 Java 中从 ArrayList 中添加、访问或删除元素的算法成本是多少

> ID：11292247
> 
> 赞同：0
> 
> 时间：2012-07-02T10:55:06.170
> 
> 标签：java, algorithm, big-o

我有一个 Web 应用程序，它`ArrayList's`广泛用于存储和操作其自身的数据。然而，最近我明白这`HashMap's`可能是一个更好的选择。谁能告诉我在`Big O(n)`两者中添加、访问和删除元素的算法成本（）究竟是什么，以及为了效率而进入代码并更改它们是否明智？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T10:57:58.187

对于数组列表：

> size、isEmpty、get、set、iterator 和 listIterator 操作在恒定时间内运行。添加操作在摊销常数时间内运行，即添加 n 个元素需要 O(n) 时间。所有其他操作都以线性时间运行（粗略地说）。与 LinkedList 实现相比，常数因子较低。

从文档： [http ://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)

对于哈希映射：

> 此实现为基本操作（get 和 put）提供恒定时间性能，假设哈希函数将元素正确地分散在桶中。集合视图的迭代需要的时间与 HashMap 实例的“容量”（桶的数量）加上它的大小（键值映射的数量）成正比。因此，如果迭代性能很重要，则不要将初始容量设置得太高（或负载因子太低），这一点非常重要。

从文档： [http ://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T17:00:00.333

请查看[http://www.coderfriendly.com/wp-content/uploads/2009/05/java_collections_v2.pdf](http://www.coderfriendly.com/wp-content/uploads/2009/05/java_collections_v2.pdf)

*   O(1) 获取/添加
*   O(n) 包含
*   O(1) 下一个

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T10:58:50.887

[ArrayList](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ArrayList.html)的文档对这些操作的性能进行了讨论。至于`HashMap`，这将是`O(1)`所有三个。但是，这确实假设您的`hashCode`方法实现良好，并且也是`O(1)`.

# windows - BSOD错误代码说明

> ID：11292251
> 
> 赞同：2
> 
> 时间：2012-07-02T10:55:17.330
> 
> 标签：windows, hex, error-code, bsod

我正在从事件日志中检索系统故障信息以诊断系统崩溃并显示可能的问题列表。

在一般的 BSOD 中，括号中的四个十六进制值表示什么。除了主要错误代码之外，它们是否可以用于进一步诊断问题？即`0x000000A`。如果是，如何？

![蓝屏](../Images/b1e6632d8e3c09a0b494e1baeb84dbc9.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T12:14:51.593

第一个数字是[错误检查代码](http://msdn.microsoft.com/en-us/library/windows/hardware/hh994433(v=vs.85).aspx)。

以下数字将是驱动程序传递给[KeBugCheckEx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551961(v=vs.85).aspx)的任何数字，因此只有在您拥有驱动程序源代码时它们才真正有用。

# linux - 将基于 linux 的应用程序移植到 uC/OS-II 平台

> ID：11292254
> 
> 赞同：0
> 
> 时间：2012-07-02T10:55:25.933
> 
> 标签：linux, networking, rtos, microc

我计划在非 Linux 平台上实现 Hiawatha Web 服务器，即 uC/OS-II RTOS。

我需要帮助将依赖 Linux 的 API 移植到 RTOS 平台。

如果已经有可用于在 RTOS 上移植 Linux 的构建库，请告诉我。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T20:35:44.430

任何不只是使用标准 C 库的代码都需要一些移植工作 - 进行非标准和操作系统特定的库和调用的程度将决定所需的工作，甚至是这种移植的可行性。

大多数任何复杂的 Linux 代码都需要 POSIX API，而网络代码可能会使用 BSD 套接字。多线程代码可能会使用 pthreads。uC/OS-II 没有这些；它只处理调度、定时、同步和进程间通信；它是一个调度内核，而不是与 Linux 相同的完整操作系统——它甚至没有文件系统——这是大多数 Linux 代码的要求。当然，添加额外的库和扩展可能会提供您可能需要的部分或全部内容。

此外，uC/OS-II 的简单的每个优先级一个线程的调度程序将使典型的 Linux 多线程代码难以按预期的方式调度。大多数 RTOS（包括 uC/OS-III）支持相同优先级任务的循环/时间片调度，但 uC/OS-II 不支持；可能使它不适合这项任务。

uC/OS-II 可能需要更复杂的东西，或者可能使用更适合 uC/OS-II 的代码。 [例如， eCos](http://ecos.sourceware.org/)是一个更完整的嵌入式系统 RTOS；它是开源的，包括一个 POSIX API、文件系统支持和一个套接字 API。将Linux代码移植到那里会容易得多。同样，还有许多轻量级嵌入式 Web 服务器示例可能更适合 uC/OS-II 和其他简单的 RTOS 甚至根本没有操作系统。[例如， LwIP](http://savannah.nongnu.org/projects/lwip/)是用于小型嵌入式系统的 TCP/IP 堆栈，其中存在 uC/OS-II 端口并且有[Web 服务器示例](http://lwip.wikia.com/wiki/Sample_Web_Server)。

关键是Linux跟uC/OS-II没有可比性；一个需要 < 10Kb 的代码，另一个需要大约 4Mb 的最小占用空间！要让 Linux 代码在这样的系统上运行，您需要添加大量额外的代码来提供缺失的服务，而且这在您的目标平台上可能不可行。

* * *

**[编辑：2012 年 7 月 8 日]**

您是否考虑过使用[Micrium 自己的 TCP/IP 堆栈和 μC/HTTPS 网络服务器插件](http://micrium.com/page/products/rtos/tcp-ip)？可以更好地集成到 uC/OS-II 并提供比非 RTOS 特定的第三方代码更好的性能。

# java - @Valid (jsr 303) 在 Spring mvc 3.0 中不起作用

> ID：11292255
> 
> 赞同：1
> 
> 时间：2012-07-02T10:55:28.597
> 
> 标签：java, spring-mvc, bean-validation

我正在尝试通过使用简单的登录用例在 Spring 3.0 中实现 JSR 303 bean 验证。问题是，如果我提交没有任何值的表单，则不会发生验证（即 BindingResult 方法 hasErrors() 总是返回“false”并打印*我很酷！*。以下是代码片段：

```
@Controller
public class AnnotatedController {
    @RequestMapping(value = "login")
    public String validateLogin(@Valid LoginForm loginForm, BindingResult result, HttpServletRequest request) {
        if(result.hasErrors())
            System.out.println("Got Errors !");
        else
            System.out.println("I'm cool !");
        return "login";
    }
} 
```

豆看起来像这样：

```
 public class LoginForm {
    @NotEmpty
    private String userName;
    @Size(min=2, max=3)
    private String password;

    public String getUserName() {
        return userName;
    }
    public void setUserName(String userName) {
        this.userName = userName;
    }
    public String getPassword() {
        return password;
    }
    public void setPassword(String password) {
        this.password = password;
    }
} 
```

最后是观点：

```
<table>
    <form:form action="login.htm" modelAttribute="loginForm">
        <tr>
            <td>User :</td>
            <td><form:input path="userName" /></td>
        </tr>
        <tr>
            <td>Password :</td>
            <td><form:input path="password" /></td>
        </tr>
        <tr><td><input type="submit" value="Ok"> </tr>
    </form:form>
</table> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T03:27:01.273

添加`<mvc:annotation-driven/>`servlet 上下文 XML 为我解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-30T04:26:19.870

你缺少表单错误标签。使用喜欢

```
<table>
<form:form action="login.htm" commandName="logindetails">
    <tr>
        <td>User :</td>
        <td><form:input path="userName" /></td>
        <td><form:errors path="userName" /></td>
    </tr>
    <tr>
        <td>Password :</td>
        <td><form:input path="password" /></td>
        <td><form:errors path="password"  /></td>
    </tr>
    <tr><td><input type="submit" value="Ok"> </tr>
</form:form> 
```

而且您还必须维护带有错误消息的属性文件。

```
NotEmpty.logindetails.userName = userName is required!
Range.logindetails.password= password value must be between 2 and 3 
```

示例：点击[这里](http://www.mkyong.com/spring-mvc/spring-3-mvc-and-jsr303-valid-example/)

# php - sscanf 忽略空格？

> ID：11292257
> 
> 赞同：1
> 
> 时间：2012-07-02T10:55:40.837
> 
> 标签：php, string

以下代码采用`$input`类似的方式：`"a banana is a fruit"`

```
$t = sscanf($input,"a %s is a %s",$child,$parent);
echo $t.",".$child.",".$parent; 
```

它输出：`2,banana,fruit`，这是完美的！

但是，如果`$input = "a cow is an animal"`我们得到输出：`2,cow,n`. 这并不理想。

理想情况下，因为`$input = "a cow is an animal"`它会返回`1,cow,`，我将使用一个单独的格式化字符串： `"a %s is an %s"`对于这个将返回的输入`2,cow,animal`。

那么：为什么第二个`a`in之后的空间不能`"a %s is a %s"`阻止这个问题的发生？有没有办法明确声明必须在之后出现一个空格`a`才能找到正确的匹配项？

希望这是有道理的。任何帮助表示赞赏！

编辑：这是实际的代码：

```
$teachArray = array("a %s is a %s","an %s is a %s","a %s is an %s","an %s is an %s");
$i=0;
$t = -1;
while( (t <= 2) && (i < count($teachArray)) ) {
    $t = sscanf($input,$teachArray[i],$child,$parent);
    $i++;
} 
```

所以它会一直循环，直到找到匹配的句子结构，或者用完句子模板（存储在 $teachArray 中）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T12:39:47.087

而不是 scanf，您应该使用[正则表达式](http://php.net/manual/en/function.preg-match.php)：

```
$input = "a cow is an animal";
preg_match("/^an? (.+?) is an? (.+?)$/", $input, $matches);
echo (count($matches)-1) . ',' . $matches[1] . ',' . $matches[2]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T07:37:30.650

我认为你仍然可以使用 sscanf ，即使 regexp 更灵活。

```
$t = sscanf($input,"%s %s is %s %s",$a1, $child, $a2, $parent);
echo $t.",".$child.",".$parent; 
```

# mysql - 过程中的 MySQL 错误 #1351 - 视图的 SELECT 包含变量或参数

> ID：11292258
> 
> 赞同：7
> 
> 时间：2012-07-02T10:55:42.287
> 
> 标签：mysql, sql, phpmyadmin, mamp

PhpMyAdmin 不接受过程中的参数“id_jugador_IN”。

这是我们正在执行的过程：

```
SET GLOBAL event_scheduler = 1;

use traviandatabase;

DELIMITER $$

DROP PROCEDURE IF EXISTS sp_monitoritzacio_jugador $$

CREATE PROCEDURE sp_monitoritzacio_jugador(IN id_jugador_IN INT(10))

BEGIN

    CREATE OR REPLACE 
    VIEW dades_ususari AS 
    SELECT j.nom AS jugador, j.sexe AS sexe, j.edat AS edat, j.correu AS correu, a.nom AS alianca, p.nom AS pais, c.nom_ciutat AS ciutat
    FROM jugador AS j
    JOIN alianca AS a
    JOIN pais AS p
    JOIN ciutat AS c
    ON j.id_jugador = id_jugador_IN
    GROUP BY id_jugador_IN;

END $$

DELIMITER ;

CALL sp_monitoritzacio_jugador(1); 
```

这是表“jugador”：

```
DROP TABLE IF EXISTS `jugador`;
CREATE TABLE `jugador` (
  `id_jugador` int(10) NOT NULL AUTO_INCREMENT,
  `id_raca` int(10) NOT NULL,
  `id_pais` int(10) NOT NULL,
  `id_alianca` int(10) DEFAULT '0',
  `nom` varchar(20) NOT NULL,
  `sexe` enum('Home','Dona') NOT NULL,
  `edat` int(10) NOT NULL,
  `correu` varchar(20) NOT NULL,
  PRIMARY KEY (`id_jugador`),
  KEY `jugador-alianca` (`id_alianca`),
  KEY `id_pais` (`id_pais`),
  KEY `id_raca` (`id_raca`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

所以它不会停止显示相同的错误：

MySQL 说：1351 - View's SELECT contains a variable or parameter

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-02T13:23:30.533

如您所见 - 视图不能使用变量，这是一个限制。您正在尝试创建具有确切 WHERE 条件的视图；首先构造 CREATE VIEW 语句文本，然后使用[准备好的语句](http://dev.mysql.com/doc/refman/5.1/en/sql-syntax-prepared-statements.html)执行语句，它会帮助你。但是，您真的需要它来创建、创建和创建新视图吗？

编辑：这是评论中参考的内容。

[Olexandr Melnyk](https://dev.mysql.com/doc/refman/5.5/en/create-view.html#c8695)对于 MySQL 对视图中局部变量使用的限制，一个简单的解决方法是使用一个函数，该函数返回变量的值：

```
create function book_subject
returns varchar(64) as
return @book_subject;

create view thematical_books as
select title
, author
from books
where subject = book_subject(); 
```

# jquery - 比较 2 个元素中的文本，如果为真则隐藏该类

> ID：11292259
> 
> 赞同：0
> 
> 时间：2012-07-02T10:55:45.630
> 
> 标签：jquery

我如何比较这两个元素：

`<a class="MenuSelected" href="c-4-kayaks-canoes.aspx">Kayaks &amp; Canoes</a>`

和这个：

`<div class=title>Kayaks &amp; Canoes</div>`

如果它发现文本`div.title`相同，则添加 css`display:none`

我不确定要尝试什么，因为它里面的文字我需要比较！我**不能**像下面的例子那样对字符串进行硬编码。

`$("div.title:contains('John')").css("display", "none");`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:59:06.263

```
$("div.title:contains('" + $("a.MenuSelected").text() + "')").hide(); 
```

或者，更明确但也更通用（例如，它允许进行不区分大小写的比较）：

```
$("div.title")
.filter(function () {
  return $(this).text().toLowerCase() == $("a.MenuSelected").text().toLowerCase();
})
.hide(); 
```

`$.trim()`正如@JaredFarrish 在评论中建议的那样，你也可以在那里做。

比较中的`:contains`选择器区分大小写和空格，因此它只选择完全匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T10:59:14.830

这在某些情况下会起作用，为了更好地理解，您应该提供相关的 html 代码

```
if ($('a.MenuSelected').text() == $('div.title').text())
{
    $('div.title').hide(); //same as css disaplay: none
} 
```

# c# - 列表索引搜索

> ID：11292260
> 
> 赞同：1
> 
> 时间：2012-07-02T10:55:46.590
> 
> 标签：c#

我有一个列表项

```
List<string> xmlValue = new List<string>(); 
```

在此我有 Item`{"English","Spanish","French","Hindi","English","English"}` 我需要搜索所有英文项目及其`Index(item index)`. 我写了下面的代码，它只返回一项的索引。如何也可以获得下一项的索引。

```
 string search = "English";
    int index = xmlValue.Select((item, i) => new { Item = item, Index = i })
    .First(x => x.Item == search).Index; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T10:58:22.287

```
List<string> xmlValue = new List<string>() 
                 {"English", "Spanish", "French", "Hindi", "English", "English"};

string search = "English";

int[] result = xmlValue.Select((b, i) => b.Equals(search) ? i : -1)
                       .Where(i => i != -1).ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T11:03:40.580

在这种情况下，我会选择不使用 LINQ 扩展方法并使用“老式”循环：

```
string search = "English";

var foundIndices = new List<int>(xmlValue.Count);
for (int i = 0; i < xmlValue.Count; i++) {
    if (xmlValue[i] == search) {
        foundIndices.Add(i);
    }
} 
```

在我看来，它只是更具可读性；此外，该`foundIndices`列表永远不会包含任何不需要的值。

# ms-access - 在 Access 2007 中实现基本 VBA 的问题

> ID：11292263
> 
> 赞同：2
> 
> 时间：2012-07-02T10:55:50.620
> 
> 标签：ms-access, vba, ms-access-2007

我正在尝试为我的数据库编写一些代码，以在查询的参数提示中启用一个下拉框，但它什么也没做，而不是它的预期目的。这个：

[Access 2007 参数查询中的下拉列表](https://stackoverflow.com/questions/2864624/dropdown-in-access-2007-parameter-query)

一直是我灵感的源泉。虽然我似乎无法实现最基本的 VBA 代码：

```
 Private Sub cmdReset_Click()
    Me.cboSelectName = Null
  End Sub 
```

（是的，这不是我的全部代码！只是其中的一个）

在相关表单上，我有一个名为“cmdReset”的按钮，其中包含事件“On-Click”的“[Event Procedure]”。我在所述表单上还有一个名为“cboSelectName”的下拉框。我还尝试关闭数据库，并确保在启动时启用宏。

所以本质上，当我单击重置按钮时，这段代码应该使下拉框中的值为空。但是它什么也不做，它只是取消选择下拉框。谁能帮我解决这个问题？我很想开始在我的数据库中实现一些 VBA！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:35:20.917

正如 Remou 所建议的，代码甚至没有运行。我发现了我的问题 - 我已将代码保存在新模块中，而不是保存在表单的 VBA 代码中。一旦我将代码转移到表单对象中，重置按钮就起作用了。我现在也有一些漂亮的代码与实际的“生成报告”命令一起工作。VBA 确实有能力将您的数据库提升到一个全新的水平！

# crystal-reports - 根据参数的值隐藏交叉表中的列（Crystal Reports XI）

> ID：11292270
> 
> 赞同：0
> 
> 时间：2012-07-02T10:56:34.700
> 
> 标签：crystal-reports, crystal-reports-xi

我正在使用 Crystal Reports XI (R2) 并有一个显示航班信息的交叉表。由于分组条件，自动创建了“总计”列以及到达和出发列。我想要做的是拥有“飞行方向”参数，用户可以在其中选择“所有，仅出发或仅到达”值，并且根据此选择，交叉表将具有一列或两列。如何做到这一点？我尝试使用以下公式（并启用了抑制空列选项）：

```
if {?Pm-@flight_direction_description} = "Departures Only"
then
if ({Command_1.IsArrival} = 1)
then 0
else {Command_1.IsArrival} 
```

这确实有效（仅显示一列），但在 Departures 列下，它列出了所有航班（因此离开列与 Total 列相同），而它应该只显示有关离开航班的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T19:44:29.857

我也遇到过类似的情况；虽然肯定不理想，如果没有人有更好的建议，您可以创建细节 A、细节 B 和细节 C 部分，所有这些部分都被抑制。从那里...

*   你可以把你的“全部”交叉表放在细节 A
*   仅为 Destinations 创建第二个交叉表，并将其放入 Detail B
*   仅为 Arrivals 创建第三个交叉表，并将其放在详细信息 C 中

然后，在您的详细信息 A、B 和 C 部分中，您可以根据传入的参数有条件地取消抑制所需的部分。

# asp.net - Sql server 和 Asp.net 关闭连接不会关闭 Sql Server Session

> ID：11292271
> 
> 赞同：0
> 
> 时间：2012-07-02T10:56:38.930
> 
> 标签：asp.net, sql-server-2008-r2, connection-pooling

我正在使用带有 MSSQL Server 的 Asp.NET Web 应用程序。在我的页面中，我打开一个连接并在页面末尾关闭它。但是在 Sql Analyzer 中，Sql 会话仍然存在，在一段时间后给我一个连接池限制超出错误。只有当我关闭网络服务器时，会话才会被清除。

有人可以解释如何解决这个问题吗？谢谢

这是我正在使用的代码：

```
Conn = new SqlConnection(StrConn);
Conn.Open();

.....

Conn.Close(); // In the debugger i can see connection state = closed
Conn = null; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-12-02T09:48:15.837

这似乎是一个连接池问题。

添加`Pooling=false`到连接字符串，数据库不会保持连接打开。

# database - 从 DB 模式生成 DB 关系概览的工具

> ID：11292278
> 
> 赞同：0
> 
> 时间：2012-07-02T10:57:09.100
> 
> 标签：database, eclipse, oracle, netbeans

我正在寻找可以连接到 oracle DB 并可以创建 DB 映射图的 eclipse 插件或开源免费工具。我需要显示表关系、主键、外键约束的图形视图

对于我的 sql，SQL 工作台可以完成这项工作。oracle 怎么样？

有没有这样的工具可用？

我知道netbeans hibernate插件可以生成对应于db表的bean。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:17:34.353

您可能会查看[SQL Developer Data Modeler](http://www.oracle.com/technetwork/developer-tools/datamodeler/overview/index.html)。您应该能够对 ER 图进行逆向工程。

# javascript - 不应该是变量的未定义变量错误

> ID：11292285
> 
> 赞同：0
> 
> 时间：2012-07-02T10:57:30.490
> 
> 标签：javascript, jquery, variables

我在 jquery 中编写了一段代码，将 href 属性分配给变量。这是代码：

```
$('#reactions' + i).attr('href', 'javascript:comments ('+entry.url+','+i+');'); 
```

这应该分配对 javascript 函数注释的调用。现在我想在 jquery 移动按钮上使用该调用，如下所示：

```
document.write('<a href="#" id="reactions' + i + '" data-role="button" class="ui-btn-right">Reactions</a>'); 
```

但是这样做给了我一个 FF 和 Chrome。这是来自 FF± 的误差

> 未捕获的异常：ReferenceError：未定义变量：i_heart_chaos_ihc_after_dark_independence_day_through_a_bullhornthis_is_what javascript 中第 1 行第 0 列抛出错误：comments (i_heart_chaos_ihc_after_dark_independence_day_through_a_bullhornthis_is_what,1);: comments (i_heart_chaos_ihc_after_dark_independence_day)bullhornthis_is_day

其中，`i_heart_chaos_ihc_after_dark_independence_day_through_a_bullhornthis_is_what`是 的值`entry.url`。

我只是不明白为什么会出现这个错误，据我所知，一切都应该工作。我知道有些问题看起来与我的相似，但我无法找到答案。如果您想查看整个源代码，请[点击此处](http://scoutline.3owl.com/test/index.html)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T11:05:04.150

用引号包围 entry.url：

```
 $('#reactions' + i).attr('href', 'javascript:comments ("'+entry.url+'",'+i+');'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:10:01.270

解决此问题的最佳方法是使用“jQuery 方式”。添加一个单击事件，而不是添加执行 JavaScript 的 href 属性：

```
$('#reactions' + i).click( function() {
    comments( entry.url, i );
}); 
```

同样，不要使用`document.write()`，而是使用 jQuery 函数将元素添加到文档中。

# video - 使用 Azure 媒体服务使用 SWF 文件录制视频

> ID：11292288
> 
> 赞同：0
> 
> 时间：2012-07-02T10:57:44.780
> 
> 标签：video, azure, flash, media, azure-media-services

我们开发了一个 SWF 文件来捕获用户的视频和音频。

我们想使用 Azure 媒体服务来摄取和编码录音。

不幸的是，我们发现 SWF 文件与 Adob​​e 的 Flash Media Server 集成得更好。有谁知道是否有任何解决方法？还是我们是木偶，这已经成为可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:04:33.013

最好的办法是将此问题发布到专门的 Windows Azure 媒体服务论坛，您可能会直接从 Windows 媒体服务开发人员那里得到一些关于这方面的信息：

[http://social.msdn.microsoft.com/Forums/en-US/MediaServices/threads](http://social.msdn.microsoft.com/Forums/en-US/MediaServices/threads)

# spring - 每个线程设计的实体管理器 - 如何实现

> ID：11292289
> 
> 赞同：0
> 
> 时间：2012-07-02T10:57:53.460
> 
> 标签：spring, hibernate, design-patterns, jpa

我想知道如何为每个用户线程设计实现一个 JPA EntityManager。由于 EM 是轻量级对象，因此为每个用户线程创建它们不应该是开销。我要解决的问题是单个 JSP 页面，其中包含对后端服务的多个（并行）JSON/AJAX 调用（通过控制器）。

我有一个实体管理器（具有扩展的持久性上下文），带有 Open EM In View Filter。它确实工作得很好，但只有当每页有一个用户线程（例如，一个 json 调用）时，或者换句话说，当我以串行方式访问 em 时。然而，当我从多个线程调用我的服务时，它并没有解决我的目的，因为 em 实例是共享的并且我得到了奇怪的错误（有时是对集合的共享访问，有时是关闭连接，我相信这是预期的）。

我在 Spring 3 和 hibernate 3.5 上使用 JPA。我将实体管理器（扩展）注入到我的服务中，如下所示：

```
@PersistenceContext(type = PersistenceContextType.EXTENDED)
protected EntityManager em; 
```

我的只读服务方法被注释为

```
<tx:method name="get*" read-only="true" propagation="SUPPORTS"/> 
```

所有其他方法，都注释为

```
<tx:method name="*" propagation="REQUIRED" rollback-for="Exception"/> 
```

我想避免应用程序管理 em，因此没有去注入 EntityManagerFactory。另外，如果我选择将 EntityManager 注入 spring 控制器，当从两个线程并行调用同一个控制器时，我仍然会遇到问题！

有没有一种优雅的方式来实现对 em.xml 的线程安全访问？我还想避免锁定任何实体对象，这会使事情进一步复杂化。

由于来自同一页面的多个 ajax 调用是现代 Web 应用程序中非常常见的设计，我相信必须有一种简单且声明性的方式来实现这一点（无需回到使用拦截器等手动管理休眠会话）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:31:40.167

我不太明白你的问题。

每个线程的实体管理器是默认行为，但您使用`EXTENDED`. 您是否有任何具体原因将其配置为`EXTENDED`？如果没有，您只需将其删除：

```
@PersistenceContext
protected EntityManager em; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:28:49.813

这是使用 EM/Sessions 的最标准方式，并且有一些标准工具，如 OpenSessionInViewFilter（或 Interceptor），当 HTTP 请求进入您的 servlet 容器时创建一个会话。或者它可以是一个 Spring Transactional 支持，它在 AOP 的帮助下创建一个会话。这里的关键是使用已经存在的机制，或者，如果你有一些扩展，至少复制粘贴它们。Spring 在 TransactionSynchronizationManager 的帮助下通过将资源绑定/取消绑定到线程来实现这一点。您可以查看 Spring 源代码，或者[这里](http://fisheye.jtalks.org/browse/~br=dionis_branch/Poulpe/poulpe-view/poulpe-web-controller/src/main/java/org/jtalks/poulpe/web/osod/OpenSessions.java?r=89f6148d552fa1e2a5b4e6c34ad2e8237a546c44)是 session-per-conversation 模式的示例，它也使用相同的方法将资源绑定到线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T11:01:08.873

Spring 有一个 Thread 范围，默认情况下是禁用的（请参阅第[4.5 节 Bean 范围](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/beans.html#beans-factory-scopes)）：

> **线程范围的 bean**
> 从 Spring 3.0 开始，线程范围是可用的，但默认情况下没有注册。有关详细信息，请参阅[`SimpleThreadScope`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/context/support/SimpleThreadScope.html). 有关如何注册此或任何其他自定义范围的说明，请参阅第 4.5.5.2 节，[“使用自定义范围”。](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/beans.html#beans-factory-scopes-custom-using)

如果您激活范围，您可以将您的 entitymanagers 定义为`scope=thread`

# java - 使用字节数组将图像上传到 picasa

> ID：11292291
> 
> 赞同：0
> 
> 时间：2012-07-02T10:57:58.500
> 
> 标签：java, google-app-engine, bytearray, picasa

我有一个图片的字节 []，我需要将其作为图片上传到 picasa。根据文档，图像上传如下。

```
MediaFileSource myMedia = new MediaFileSource(new File("lights.jpg"), "image/jpeg"); 
```

这意味着我需要从字节 [] 创建一个文件。

问题是，我必须在不使用 FileOutputStream 的情况下执行此操作，因为 Google App Engine 不支持它（这是我正在使用的环境）

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:33:53.767

您不必使用 MediaFileSource 上传照片，您可以使用[MediaByteArraySource](https://developers.google.com/gdata/javadoc/com/google/gdata/data/media/MediaByteArraySource) 并将其传递给 photo.setMediaSource(...)。

# javascript - 从javascript更改td的“onclick”值

> ID：11292295
> 
> 赞同：2
> 
> 时间：2012-07-02T10:58:04.247
> 
> 标签：javascript, onclick

我正在尝试从 javascript 中的函数更改 td 的“onclick”值。我已经尝试了所有我能想到的东西，我已经在互联网上搜索了它但没有任何效果，除了下面的这段代码，但它的问题是它正在执行我想要的 onclick 值而不是改变它.

```
<div align="center" id="bodyC">
<table width="800" height="410">
<td class="bodyCC">
    <table id="MYtable" class="MYtable" border="0" width="100%" height="100%" cellpadding="50">
    <td id="one" class="one" onclick=""></td>
    <td id="two" class="two" onclick=""></td>
    <td id="three" class="three" onclick=""></td>
    </table>
</td>
</table>
</div>

function download()
{
<!-- this function is called when the "Download" button on the website's menu is pressed, and is soppused to change the "body" table so when the sells are clicked an alert will pop.-->
document.getElementById('one').onclick=alert("A..!");
document.getElementById('two').onclick=alert("B..!");
document.getElementById('three').onclick=alert("C..!");
} 
```

有什么帮助吗？

ps没有错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T10:59:48.810

当你写

```
document.getElementById('one').onclick=alert("A..!"); 
```

您将`onclick`返回的值设置为处理程序`alert("A..!")`：它是`undefined`. 所以这行不通。

你需要的是一个函数定义：

```
document.getElementById('one').onclick = function() {alert("A..!");}; 
```

或者，您可以：

```
function myfunc() {
    alert("A..!");
} 
document.getElementById('one').onclick = myfunc; 
```

但是编写匿名函数定义很好，因为它将代码保存在使用它的地方，因此通常更干净。

您还需要在脚本元素中包含 javascript：

```
<script>
    document.getElementById('one').onclick = function() {alert("A..!");};
    document.getElementById('two').onclick = function() {alert("B..!");};
    document.getElementById('three').onclick = function() {alert("C..!");};
</script> 
```

这是您页面的完整、固定、经过测试的版本：

```
<div align="center" id="bodyC">
<table width="800" height="100"><tr>
<td class="bodyCC">
    <table id="MYtable" class="MYtable" border="0" width="100%" cellpadding="50"><tr>
    <td id="one" class="one" onclick="">ONE</td>
    <td id="two" class="two" onclick="">TWO</td>
        <td id="three" class="three" onclick="">THREE</td></tr>
    </table>
    </td></tr>
</table>
    <span onclick="download();">CLICK HERE</span>
</div>
<script>
// this function is called when the "Download" button on the website's menu
// is pressed, and is soppused to change the "body" table so when the sells
// are clicked an alert will pop.
function download() {
   document.getElementById('one').onclick=function(){alert("A..!");};
   document.getElementById('two').onclick=function(){alert("B..!");};
   document.getElementById('three').onclick=function(){alert("C..!");};
} 
</script>​​​​​​​​​​ 
```

（我还修复了 HTML 注释和缺失的 tr）

您可以**[在此处](http://jsfiddle.net/dystroy/c3Bj6/)**单击测试：单击“单击此处”以激活单击其他三个部分（一、二、三）的功能。

# wix - 尝试创建 WiX 补丁时出现错误 PYRO0227

> ID：11292296
> 
> 赞同：1
> 
> 时间：2012-07-02T10:58:04.193
> 
> 标签：wix, patch

我正在尝试使用 WiX 3.6 创建一个补丁，[此示例](http://wix.sourceforge.net/manual-wix3/wix_patching.htm)包含 2 个 C# 项目（可执行文件和库）。但我收到了这个错误：

```
warning PYRO1079 : The cabinet 'RMT.cab' does not contain any files.  If this patch contains no files, this warning can likely be safely ignored.  Otherwise, try passing -p to torch.exe when first building the transforms, or add a ComponentRef to your PatchFamily authoring to pull changed files into the cabinet.
error PYRO0227 : The transform being built did not contain any differences so it could not be created. 
```

执行的命令：

```
set w="c:\Program Files (x86)\WiX Toolset v3.6\bin\"

%w%torch.exe -p -xi 1.0.0.0\PatchMe.Installer.wixpdb 1.1.1.1\PatchMe.Installer.wixpdb -out Patch\Diff.wixmst
%w%candle.exe Patch.wxs
%w%light.exe Patch.wixobj -out Patch\Patch.WixMsp
%w%pyro.exe Patch\Patch.WixMsp -out Patch\Patch.msp -t RTM Patch\Diff.wixmst 
```

目录“1.0.0.0”和“1.1.1.1”包含相同项目的两个不同版本的输出（更改了 AssemblyVersion 和一些代码更改）。补丁.wxs 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
  <?include Variables.wxi ?>
  <Patch AllowRemoval="yes"
         Manufacturer="$(var.Manufacturer)"
         DisplayName="$(var.ProductName) $(var.ProductVersion)"
         Description="Small Update Patch"
         Classification="Update"
         TargetProductName="$(var.ProductName)"
         >

        <Media Id="5000" Cabinet="RMT.cab">
            <PatchBaseline Id="RTM">
            </PatchBaseline>
        </Media>

        <PatchFamilyRef Id="SamplePatchFamily"/>
    </Patch>

    <Fragment>   
        <PatchFamily Id="SamplePatchFamily" Version="$(var.ProductVersion)" Supersede="yes">
            <ComponentRef Id="cmp981D9885AA29DD578D66D32ED919EBFB"/>
            <ComponentRef Id="cmpD5E6EA59DB565F052E0217CB3248DAE5"/>
        </PatchFamily>
    </Fragment>
</Wix> 
```

ComponentRef Id 是指前面提到的项目的 heat.exe 收获创建的组件片段。

**任何想法，可能是什么问题，为什么转换不包含任何更改？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:11:33.200

我认为这可能是 3.6 中的错误。我尝试了几个小时以使其与版本 3.6.3303.1 一起使用，但我总是收到 PYRO1079 错误。我终于降级到3.5.2519.0版本，错误没有再出现。

降级后，我不得不放弃我的 MediaTemplate 节点和我的 ComponentGroup 节点的 Directory 属性。我不知道这是否是解决方案的一部分（即这可能解决了问题而不是降级）。

# c++ - 自己的共享指针的析构函数中的分段错误

> ID：11292298
> 
> 赞同：2
> 
> 时间：2012-07-02T10:58:08.900
> 
> 标签：c++, segmentation-fault, shared-ptr, smart-pointers

出于培训目的，我正在尝试编写自己的智能指针，模仿`std::shared_ptr`. 我有一个`static std::map<void *, int> ref_track`跟踪内存中是否还有引用某个块的共享指针。

我的概念是这样的：

```
template <typename PType>
class shared_ptr
{
    public:
        shared_ptr()
        : value_(nullptr), ptr_(nullptr)
        {}

        template <typename T>
        explicit shared_ptr(T * ptr)
        : shared_ptr()
        {
            reset(ptr);
        }

        template <typename T>
        shared_ptr(shared_ptr<T> const & other)
        : shared_ptr()
        {       
            reset(other.get());
        }

        ~shared_ptr()
        {
            reset();
        }

        void reset()
        {
            if(value_)
            {
                delete value_; // Segmentation fault here!
                value_ = 0;
                ptr_ = 0;
            }
        }

        template <typename T>
        void reset(T * ptr)
        {   
            reset();
            if(ptr)
            {
                value_ = new shared_ptr_internal::storage_impl<
                    T
                >(ptr);
                ptr_ = ptr;
            }
        }

        PType * get() const
        {
            return ptr_;
        }

        typename shared_ptr_internal::ptr_trait<PType>::type operator *()
        {
            return *ptr_;
        }

    private:
        shared_ptr_internal::storage_base * value_;
        PType * ptr_;
}; 
```

在运行我的测试套件时，我注意到

```
shared_ptr<int> a(new int(42));
a.reset(new int(13)); 
```

工作正常，但是

```
shared_ptr<int> a(new int(42));
a = shared_ptr<int>(new int(13)); 
```

导致问题：`*a`is`0`而不是`13`，并且由于 .`delete value_`的析构函数中的分段错误而崩溃`a`。我在源代码中用注释标记了崩溃。

使用的内部类是

```
namespace shared_ptr_internal
{

    typedef std::map<void *, int> ref_tracker;
    typedef std::map<void *, int>::iterator ref_tracker_iterator;
    typedef std::pair<void *, int> ref_tracker_entry;

    static ref_tracker ref_track;

    struct storage_base
    {
        virtual ~storage_base() {}
    };

    template <typename PType>
    struct storage_impl : storage_base
    {
        storage_impl(PType * ptr)
        : ptr_(ptr)
        {
            ref_tracker_iterator pos = ref_track.find(ptr);
            if(pos == ref_track.end())
            {
                ref_track.insert(
                    ref_tracker_entry(ptr, 1)
                );
            }
            else
            {
                ++pos->second;
            }
        }

        ~storage_impl()
        {
            ref_tracker_iterator pos = ref_track.find(ptr_);
            if(pos->second == 1)
            {
                ref_track.erase(pos);
                delete ptr_;
            }
            else
            {
                --pos->second;
            }
        }

        private:
            PType * ptr_;
    };

    template <typename PType>
    struct ptr_trait
    {
        typedef PType & type;
    };

    template <>
    struct ptr_trait<void>
    {
        typedef void type;
    };
} 
```

对于大量源代码感到抱歉，但我真的不知道如何进一步缩小范围。我将不胜感激任何可能导致段错误的想法，以及为什么在手动使用重置时不会发生这种情况。

**更新**

我的（不工作的）赋值运算符：

```
template <typename T>
shared_ptr<PType> & operator =(shared_ptr<T> const & other)
{
    if(this != &other)
    {
        value_ = nullptr;
        ptr_ = nullptr;
        reset(other.get());
    }
    return *this;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:08:04.330

您缺少赋值运算符。

这意味着在以下代码中：

```
a = shared_ptr<int>(new int(13)); 
```

创建一个临时共享指针；然后默认的赋值运算符只是简单地复制指针，`a`而不释放旧值或更新引用计数；然后临时删除该值，留下`a`一个悬空指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T11:08:46.307

似乎违反了[三规则](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)：您有一个自定义复制构造函数和一个自定义析构函数，但没有自定义赋值运算符。因此`a = shared_ptr<int>(new int(13))`只会从临时复制两个指针`value_`，`ptr_`而无需对您的参考跟踪进行任何更新。因此，当您销毁临时对象时，将不再有对该指针的跟踪引用，这将导致其删除。另请注意，旧指针将在分配中泄露。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T11:11:11.393

您忘记在指针类中添加一个赋值运算符，它应该减少对旧对象的引用数并增加对分配对象的引用数。大多数时候，它是实现 operator= 的最简单的方法，它是一个复制 d'tor 和一个交换函数：

```
shared_ptr& shared_ptr<T>::operator=( shared_ptr<T> other ) 
{
    other.swap( this );

    return *this;
} 
```

# c# - 使用 Entity SQL 查询概念模型

> ID：11292299
> 
> 赞同：0
> 
> 时间：2012-07-02T10:58:10.510
> 
> 标签：c#, entity-framework, entity-sql

我的应用程序基于实体框架。我提供用户通过将查询保存在另一个表中来查询特定表。例如，数据库中的 TopQuery 表存储了所有受用户欢迎的查询。这些查询在表“TableData”上执行

出于测试目的，我尝试了以下方法并且它有效。唯一的问题是它返回所有列，因为我想使用用户在查询中提到的列。

```
string queryString =
        @"SELECT VALUE table FROM TestEntities.TableData AS table where table.col1 = 'test'";

    ObjectQuery<TableData> productQuery2 =
        new ObjectQuery<TableData>(queryString, context); 
```

我的问题是，如果用户像这样在数据库中存储查询，它就不起作用。

```
SELECT table.col1, table.col2, table.col3 FROM TestEntities.TableData AS table where table.col1 = "test" 
```

我得到了异常：从物化 System.Data.Objects.MaterializedDataRecord' 到'TestEntities.TableData' 类型的指定转换无效。

我也试过这个没有任何运气。

```
"SELECT it.col1, it.col2 FROM TableData WHERE it.col1 = 'test'" 
```

在这种情况下我该怎么办？

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:06:10.650

`ObjectQuery<TableData>`一旦您尝试仅选择列的子集，您将永远不会得到。`ObjectQuery<TableData>`仅当您像第一个查询那样选择整个实体时，使用才有效 - 这是 Entity 框架强制执行的强类型方法。

ESQL 不像 Linq-to-entities 那样支持投影（通过允许您投影到新的匿名或非映射类型）。将投影[与 ESQL 一起使用时，您必须使用`ObjectQuery<DbDataRecord>`](https://stackoverflow.com/questions/38647/linq-to-entities-vs-esql).

# c#-4.0 - 有没有最快的方法可以使字符串在水晶报告中成为数字条形码？（在 c#.net 中使用）

> ID：11292307
> 
> 赞同：0
> 
> 时间：2012-07-02T10:58:38.140
> 
> 标签：c#-4.0, crystal-reports

目前，我已经创建了一个水晶报表并将其数据源设置为数据表。我想以条形码 39 样式打印一串数字。

以前，我设法通过在系统中安装barcode39字体并使用水晶报表公式将字符串格式化为“ *00000001* ”来实现。

但是，我想要的是动态条码生成，无需相互安装额外的字体。我在网上找到了一些好东西：

1) 我从 .NETbarcodelib.com 下载了一个 .NET Barcode Generator，添加对 BarcodeLib.Barcode.dll 文件的引用，然后按照指南创建一个条形码对象；但它根本不起作用

2）我正在寻找一种以编程方式向对象添加字体路径的方法，因为我有一个创建代码 39 字体文件的类

希望我的描述足够简单以便理解:)

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:27:35.447

@Roy 没有直接的优化方法，我建议您应该在单独的线程中调用您的条形码生成方法。这样，条形码将花费一些时间，但您的应用程序不会停止。

# php - jQuery DatePicker，如何在数据库的输入字段中显示值

> ID：11292312
> 
> 赞同：0
> 
> 时间：2012-07-02T10:58:55.420
> 
> 标签：php, jquery

找不到此问题的解决方案。所以我有 datepicker 输入字段，它工作正常，我可以选择日期并将其保存到数据库。但是当我想在 edit_profile.php 中编辑这个保存的值时，这个字段是空的，我需要查看用户指定的日期。怎么做？

日期选择器功能：

```
$(function() {
    $( "#datepicker" ).datepicker({
      dateFormat: "yy-mm-dd",   
      changeMonth: true,
      changeYear: true
    }).val('<?php echo $age;?>');

}); 
```

输入：

`<input name="datepicker" type="text" id="datepicker" class="date_picker" value="" />`

该怎么办 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:01:50.177

你不能这样做： -

```
<input name="datepicker" type="text" id="datepicker" class="date_picker" value="<?php echo $age;?>" > 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T11:05:07.857

我认为你应该使用 defaultDate 选项，例如

```
$( "#datepicker" ).datepicker({ dateFormat: "yy-mm-dd", changeMonth: true, changeYear: true, defaultDate: yourDate }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T11:15:48.973

您可以使用日期选择器的 SetDate 或 Defaultdate 选项：

```
$('#dateselector').datepicker("setDate", new Date(2008,9,03) ); 
```

# java - 为什么我的 GXT 表格看起来不像示例？

> ID：11292314
> 
> 赞同：0
> 
> 时间：2012-07-02T10:58:57.117
> 
> 标签：java, layout, gxt

我已经从[这里](http://www.java2s.com/Code/Java/GWT/TwocolumnformExtGWT.htm)复制了所有代码，但它看起来不像示例，它看起来像下面的屏幕截图。显然，我缺少一些基本的东西，但是在 Java、GXT 和 Web 开发中完全是绿色的，我不确定从哪里开始。任何指点都感激不尽。![GXT 截图](../Images/10f635a78ecf601456d32485fb1f2a4f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T05:20:39.153

您使用的是 GXT 2 还是 3？检查以确保 gxt-all.css 文件正确加载。我假设您将 gxt 资源复制到您的项目中，并且您在主机/入口点页面中引用了它们的 CSS 文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-02T11:12:58.953

对于 gxt 开发，我建议使用 eclipse。我不知道您使用的是哪个编辑器。你删除了一些图像。 [Ext Gwt 2.0: Beginner's Guide](http://books.google.co.in/books?id=JnbPZ2Jy63IC&pg=PT402&dq=gxt%20pdf&hl=en&sa=X&ei=t4HxT57mEZDJrQeS1uy9DQ&ved=0CDMQ6AEwAA#v=onepage&q=gxt%20pdf&f=false)适合初学者的最佳书籍，请按照每个步骤操作。这真的很容易学习。欢呼

# c - unix 套接字上的连接数

> ID：11292317
> 
> 赞同：4
> 
> 时间：2012-07-02T10:59:04.203
> 
> 标签：c, sockets, unix, posix, unix-socket

给定一个任意的 unix 套接字地址，我是否能够通过 POSIX api 调用获取其上的连接数？

还是我必须通过 /proc 文件系统？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T11:53:55.743

我假设您的意思是端口上的当前连接数，而不是我首先想到的套接字 fd 生命周期内的总连接数。恐怕最便携的方法是 popen("netstat -n", "r") 并尝试解析它。POSIX 在系统/网络管理工具方面为我们提供的很少。

# jsp - 通过 jstl 检索 servlet 变量

> ID：11292323
> 
> 赞同：0
> 
> 时间：2012-07-02T10:59:24.877
> 
> 标签：jsp, jstl

我的 servlet 中有一个字符串数组列表，我使用它传递转发：

```
//in servlet

ArrayList<String> output = new ArrayList<String>();
//populate arraylist with values here

//forward the string
request.setAttribute("myData ", output);
request.getRequestDispatcher("Home.jsp").forward(request, response); 
```

我知道我可以用 scriplet 表示法访问它：

```
ArrayList<String> myData = (ArrayList<String>)request.getAttribute("myData"); 
```

我如何在 jstl 中访问它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:02:01.530

您可以使用`<c:forEach />`迭代列表 - [JSTL](http://docs.oracle.com/javaee/5/tutorial/doc/bnakh.html#bnakk)参考文档。

```
<c:forEach var="name" items="${myData}">
   <br/>${name}
</c:forEach> 
```

# extjs4 - 更新 extjs4 网格中的记录

> ID：11292324
> 
> 赞同：0
> 
> 时间：2012-07-02T10:59:32.313
> 
> 标签：extjs4

我正在使用 Extjs4，我有 1 个带有复选框的网格，我需要更新用户选择的记录。

我正在获取用户选择的所有记录，但问题是它没有更新...代码如下所示

```
{
                xtype: 'button',
                text: 'Save/Update',
                   iconCls : 'icon-save',
                   handler:function(){

                        //saveAndUpdate();

                        var s=grid.getSelectionModel().getSelection();

                        alert(s.length);

                        if(s.length==0){

                            alert(" No Records Selecteds");
                        }else{

                            for(var i=0;i<s.length;i++){

                                var menuKey=s[i].get('menuKey');
                                var addYN=s[i].get('addYN')==true?'Y':'N';
                                var editYN=s[i].get('editYN')==true?'Y':'N';
                                var viewYN=s[i].get('viewYN')==true?'Y':'N';
                                var deleteYN=s[i].get('deleteYN')==true?'Y':'N';
                                var exportYN=s[i].get('exportYN')==true?'Y':'N';

                                    alert(menuKey+addYN+editYN+viewYN+deleteYN+exportYN);

                                    var record = Ext.create('RoleMenuLinks');

                                    record.set({
                                        roleKey:roleKey.value,
                                        menuKey:menuKey,
                                        addYN:addYN,
                                        editYN:editYN,
                                        viewYN:viewYN,
                                        deleteYN:deleteYN,
                                        exportYN:exportYN
                                     });

                                     alert("All Record Set ");

                                    tempStore.sync();

                            }

                        } 
```

它没有调用java控制器....？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:28:15.637

您正在创建一条记录，而不是将其放在此代码中的任何位置，您需要对其进行处理：

```
var record = Ext.create('RoleMenuLinks');

record.set({
    roleKey:roleKey.value,
    menuKey:menuKey,
    addYN:addYN,
    editYN:editYN,
    viewYN:viewYN,
    deleteYN:deleteYN,
    exportYN:exportYN
});

// do something with the record here 
```

还是您应该检索记录并更新它？因为这段代码没有这样做。

# ios - iPad 应用程序从 iTunes 同步后崩溃

> ID：11292329
> 
> 赞同：1
> 
> 时间：2012-07-02T11:00:01.843
> 
> 标签：ios, ipad, itunes, sync

嗨，我的应用程序在从 iTunes 同步后崩溃。当我在编译同步过程后触摸应用程序图标打开应用程序时，应用程序将崩溃。我可以在 iPad 上看到应用程序图标，但它也是空白的。我不知道为什么会这样？请帮助我。提前致谢。

# ruby-on-rails-3 - ActiveRecord::RecordNotFound in UsersController#show

> ID：11292330
> 
> 赞同：0
> 
> 时间：2012-07-02T11:00:08.630
> 
> 标签：ruby-on-rails-3

我只是在**7.3.2 name 和 Gravatar阶段关注 Ruby on Rails 3 Tutorials (** **Mhartl** ) 第 7 章。

 **当我在浏览器上打开它时，我遇到了一个问题：

```
ActiveRecord::RecordNotFound in UsersController#show
Couldn't find User with id=1
Rails.root: C:/RubyOnRails/MyWorkPlace/sample_app_1
Application Trace | Framework Trace | Full Trace
app/controllers/users_controller.rb:5:in `show'
Request
Parameters:
{"id"=>"1"}
Show session dump
Show env dump
Response
Headers:
None 
```

我也粘贴在 User_controller.rb 和 user.rb 下面

**用户.rb：**

```
require 'digest'

class User < ActiveRecord::Base

    attr_accessor :pasword
    attr_accessible :login,
                    :username,
                    :email,
                    :password,
                    :password_confirmation,
                    :remember_me

    email_regex = /\A[\w+\-.]+@[a-z\-.]+\.[a-z]+\z/i

    validates :name, :presence => true,
                     :length => { :maximum => 50 }

    validates :email, :presence => true,
                      :format => { :with => email_regex }, 
                      :uniqueness => { :case_sensitive => false }

    validates :pasword, :presence     => true,
                        :confirmation => true,
                        :length       => { :within => 6..40 }

    def self.authenticate(email, submitted_password)
        user = find_by_email(email)
        return nil if user.nil?
        return user if user.has_password?(submitted_password)
    end

    before_save :encrypt_password

    def has_password?(submitted_password)
        encrypted_password == encrypt(submitted_password)
    end

    private

    def encrypt_password
        self.salt = make_salt if new_record?
        self.encrypted_password = encrypt(password)
    end

    def encrypt(string)
        secure_hash("#{salt}--#{string}")
    end

    def make_salt
        secure_hash("#{Time.now.utc}--#{password}")
    end

    def secure_hash(string)
        Digest::SHA2.hexdigest(string)
    end                      

end 
```

**users_controller.rb：**

```
class UsersController < ApplicationController

    def show
        @user = User.find(params[:id])
        @title = @user.name
    end

    def new
        @title = "Sign up"
    end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:13:44.933

您确定您创建了任何 id=1 的用户吗？要检查，请转到 rails 控制台并获取 id 为 1 的用户。如果没有用户，则创建一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:26:14.633

在最火的时候，我看到你有 attr_accessor :pasword

我认为应该是 :password

主题：

restful 控制器中缺少一些操作，因此无法创建用户。有关 RESTful 控制器的更多详细信息，请参阅[http://guides.rubyonrails.org/getting_started.html#rest](http://guides.rubyonrails.org/getting_started.html#rest)。

```
class UsersController < ApplicationController

  def show
    @user = User.find(params[:id])
    @title = @user.name
  end

  def new 
    @user = User.new #this creates a empty user object to be filled with signup data
    @title = "Sign up"
  end

  def create 
    @user = User.new(params[:user]) #this creates a new user object with the data you entered before.
    if @user.save #if the data is valid, save it
      redirect_to user_path(@user) #and go to the @user show action
    else
      render :action => :new #edit the invalid user data
    end
  end

  def edit
    @user = User.find(params[:id])
  end

  def update
    @user = User.find(params[:id])
    if @user.update_attributes(params[:user])
      redirect_to user_url(@user)
    else
      render edit_user_url(@user)
    end
  end

  def index
    @users = User.all
  end

  def destroy
    @user = User.find(params[:id]
    @user.destroy
    redirect_to :action => :index
  end

end 
```

编辑：完成宁静的动作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-22T18:48:08.983

我有同样的问题。就我而言，我的销毁操作中的“redirect_to”在“posts_path”中缺少一个“s”。这是 post_path Noob，但值得我检查一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-05T23:29:14.287

您找不到“user/1”的原因是当您通过键入将微帖子添加到示例数据（db/seeds.rb）时

```
users = User.order(:created_at).take(6)
50.times do
  content = Faker::Lorem.sentence(5)
  users.each { |user| user.microposts.create!(content: content) }
end 
```

你忘记了前面代码的“END”，所以 db/seeds.rb 的全貌是

```
User.create!(name:  "Example User",
         email: "example@railstutorial.org",
         password:              "foobar",
         password_confirmation: "foobar",
         admin:     true,
         activated: true,
         activated_at: Time.zone.now)

99.times do |n|
    name  = Faker::Name.name
    email = "example-#{n+1}@railstutorial.org"
    password = "password"
    User.create!(name:  name,
          email: email,
          password:              password,
          password_confirmation: password,
          activated: true,
          activated_at: Time.zone.now)
end

users = User.order(:created_at).take(6)
50.times do
  content = Faker::Lorem.sentence(5)
  users.each { |user| user.microposts.create!(content: content) }
end 
```**

# java - Ajax 调用不起作用

> ID：11292331
> 
> 赞同：1
> 
> 时间：2012-07-02T11:00:09.120
> 
> 标签：java, javascript, ajax, jsp, servlets

我对 ajax 概念很陌生，我想提交表单而不刷新页面

**阿贾克斯**

```
function ajaxFunction() {
  if(xmlhttp) { 
   var txtname = document.getElementById("txtname");
    xmlhttp.open("POST","Listservlet",true);
    xmlhttp.onreadystatechange  = handleServerResponse;
    xmlhttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    xmlhttp.send("txtname=" + txtname.value);
  }
}

function handleServerResponse() {
   if (xmlhttp.readyState == 4) {
     if(xmlhttp.status == 200) {
       document.fname.message.innerHTML=xmlhttp.responseText;
     }
     else {
        alert("Error during AJAX call. Please try again");
     }
   }
} 
```

**JSP**

```
<form name="fname" action="Listservlet" method="post">
<input type="text" name="txtname" id="txtname" />
<input type="button" value="Submit"  onclick="ajaxFunction();" />
<div id="message"></div>
</form> 
```

**小服务程序**

```
public void doPost(HttpServletRequest request,HttpServletResponse response) throws IOException, ServletException {
  String name = null;
  PrintWriter out = response.getWriter();
  if(request.getParameter("txtname") != null) {
   name = request.getParameter("txtname");
  }
                else {
                       name = "";
                }
           out.println("You have successfully made Ajax Call:" + name);
 } 
```

我从谷歌得到的这个 ajax 想法，bt 它不起作用，点击按钮时，什么也没显示。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:16:22.530

代替

```
 document.fname.message.innerHTML=xmlhttp.responseText; 
```

经过

```
document.getElementById("message").innerHTML=xmlhttp.responseText; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T11:10:29.557

**找出问题所在的一般步骤**：

*   使用浏览器调试器判断ajax请求是否成功发送；
    *   调试您的接收 Servlet，以判断请求是否实际传递到您的 Servlet；
    *   使用浏览器调试器来判断是否需要响应文本；

    对于您的问题，我认为您需要更改 `document.fname.message.innerHTML=xmlhttp.responseText;`
    为
    `document.getElementById("message").innerHTML = xmlhttp.responseText;`

    **还记得关闭你的输出**

# ruby-on-rails - Rake Cucumber 错误：没有要加载的文件——可喂食 (LoadError)

> ID：11292332
> 
> 赞同：1
> 
> 时间：2012-07-02T11:00:10.513
> 
> 标签：ruby-on-rails, cucumber, rake

系统：操作系统：Linux (Debian) rails：3.1.4 ruby​​：1.9.3p194 rvm：1.14.5

黄瓜：1.2.1 黄瓜导轨：1.3.0

我安装了以下内容，但是当我尝试在我的应用程序的主目录中运行以下内容时：

耙黄瓜——跟踪

我收到以下错误：

```
/home/user/.rvm/rubies/ruby-1.9.3-p194/bin/ruby -S bundle exec cucumber  --profile default
Using the default profile...

No such file to load -- feedable (LoadError)

/home/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.1.4/lib/active_support
/dependencies.rb:306:in `rescue in depend_on'
/home/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.1.4/lib/active_support
/dependencies.rb:301:in `depend_on'
/home/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.1.4/lib/active_support
/dependencies.rb:214:in `require_dependency'
/home/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.1.4/lib/rails/engine.rb:417:in `block (2 levels) in eager_load!'
/home/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.1.4/lib/rails/engine.rb:416:in `each'
/home/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.1.4/lib/rails/engine.rb:416:in `block in eager_load!'
/home/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.1.4/lib/rails/engine.rb:414:in `each'
/home/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.1.4/lib/rails/engine.rb:414:in `eager_load!'
/home/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.1.4/lib/rails/application/finisher.rb:51:in `block in <module:Finisher>'
/home/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.1.4/lib/rails/initializable.rb:30:in `instance_exec'
/home/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.1.4/lib/rails/initializable.rb:30:in `run'
/home/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.1.4/lib/rails/initializable.rb:55:in `block in run_initializers'
/home/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.1.4/lib/rails/initializable.rb:54:in `each'
/home/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.1.4/lib/rails/initializable.rb:54:in `run_initializers'
/home/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.1.4/lib/rails/application.rb:96:in `initialize!'
/home/user/.rvm/gems/ruby-1.9.3-p194/gems/cucumber-rails-1.3.0/lib/cucumber/rails/application.rb:15:in `initialize!'
/home/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.1.4/lib/rails/railtie/configurable.rb:30:in `method_missing'
/var/www/currienet/config/environment.rb:5:in `<top (required)>'
/home/user/.rvm/gems/ruby-1.9.3-p194/gems/cucumber-rails-1.3.0/lib/cucumber/rails.rb:7:in `require'
/home/user/.rvm/gems/ruby-1.9.3-p194/gems/cucumber-rails-1.3.0/lib/cucumber/rails.rb:7:in `<top (required)>'
/var/www/currienet/features/support/env.rb:7:in `require'
/var/www/currienet/features/support/env.rb:7:in `<top (required)>'
/home/user/.rvm/gems/ruby-1.9.3-p194/gems/cucumber-1.2.1/lib/cucumber/rb_support/rb_language.rb:129:in `load'
/home/user/.rvm/gems/ruby-1.9.3-p194/gems/cucumber-1.2.1/lib/cucumber/rb_support    /rb_language.rb:129:in `load_code_file'
/home/user/.rvm/gems/ruby-1.9.3-p194/gems/cucumber-1.2.1/lib/cucumber/runtime/support_code.rb:171:in `load_file'
/home/user/.rvm/gems/ruby-1.9.3-p194/gems/cucumber-1.2.1/lib/cucumber/runtime/support_code.rb:83:in `block in load_files!'
/home/user/.rvm/gems/ruby-1.9.3-p194/gems/cucumber-1.2.1/lib/cucumber/runtime/support_code.rb:82:in `each'
/home/user/.rvm/gems/ruby-1.9.3-p194/gems/cucumber-1.2.1/lib/cucumber/runtime/support_code.rb:82:in `load_files!'
/home/user/.rvm/gems/ruby-1.9.3-p194/gems/cucumber-1.2.1/lib/cucumber/runtime.rb:175:in `load_step_definitions'
/home/user/.rvm/gems/ruby-1.9.3-p194/gems/cucumber-1.2.1/lib/cucumber/runtime.rb:40:in `run!'
/home/user/.rvm/gems/ruby-1.9.3-p194/gems/cucumber-1.2.1/lib/cucumber/cli/main.rb:43:in `execute!'
/home/user/.rvm/gems/ruby-1.9.3-p194/gems/cucumber-1.2.1/lib/cucumber/cli/main.rb:20:in `execute'
/home/user/.rvm/gems/ruby-1.9.3-p194/gems/cucumber-1.2.1/bin/cucumber:14:in `<top (required)>'
/home/user/.rvm/gems/ruby-1.9.3-p194/bin/cucumber:19:in `load'
/home/user/.rvm/gems/ruby-1.9.3-p194/bin/cucumber:19:in `<main>'
/home/user/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
/home/user/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>'
rake aborted!
Command failed with status (1): [/home/user/.rvm/rubies/ruby-1.9.3-p194/bin...] 
```

我不知道什么是“可喂食”或它被加载到哪里。谷歌搜索这两条错误消息没有得到任何答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T00:45:48.367

我意识到我应该在我的应用程序目录上运行一个 grep 以获取“可喂食”，并发现我编写的类中有剩余的代码，然后删除了——这是在我使用版本控制之前。一旦我删除了错误的要求，问题就消失了。

感谢那些花时间考虑这个问题的人。

# javascript - 在javascript中删除数组

> ID：11292333
> 
> 赞同：2
> 
> 时间：2012-07-02T11:00:13.460
> 
> 标签：javascript, jquery

我们如何从中删除数组条目：

```
 var a = [],b = [],c = [],d = [];
            var multi = {
                a: a, b: b, c: c, d: d
            }; 
```

表示如果我想`a`从 multi 中删除数组。我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:02:12.653

使用`delete`关键字：

```
delete multi.a 
```

**例子：**

```
var a = [], b = [], c = [], d = [];
var multi = { a: a, b: b, c: c, d: d };

delete multi.a;
console.log(multi); 
```

**结果：**

```
Object
  b: Array[0]
  c: Array[0]
  d: Array[0] 
```

**文件：**

*   [https://developer.mozilla.org/en/JavaScript/Reference/Operators/delete](https://developer.mozilla.org/en/JavaScript/Reference/Operators/delete)

> 删除操作符从对象中删除一个属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T11:02:34.750

要删除对象的属性，[`delete`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/delete)它。

```
delete multi.a 
```

属性的值是什么并不重要（它可以是数组或其他任何东西）。

不过，该变量`a`仍将包含对同一数组的引用。如果你想完全摆脱它，你必须覆盖那个变量或者让它超出范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T11:03:28.273

```
var a = [],b = [],c = [],d = [];
var multi = {
   a: a, b: b, c: c, d: d
};
delete multi.a;
console.log(multi); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T11:03:05.610

你可以[删除](https://developer.mozilla.org/en/JavaScript/Reference/Operators/delete)它：

```
delete multi.a 
```

# google-chrome-extension - 单击 chrome 扩展的弹出图标运行 javascript 函数

> ID：11292334
> 
> 赞同：1
> 
> 时间：2012-07-02T11:00:17.233
> 
> 标签：google-chrome-extension

由于 chrome.browserAction.onClicked 仅在没有弹出窗口时才有效，因此单击浏览器操作图标时是否有任何替代方法可以触发查询？

让我说清楚.. 我有多个视图，即扩展中的 html 文件。我在 index.html 中的默认弹出窗口每当我点击我想从服务器获取一些数据的图标时。如果我在 index.html 或 index.js 中包含此函数，则每次访问该页面时都会调用此函数。谁能帮我？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:46:45.880

我会做的是：

1.  让行为发生在`onload`页面的处理程序中。因为它听起来像默认弹出页面，`index.html`可以在用户不创建初始弹出窗口时加载，所以我将创建一个页面，它是一个*专用的初始弹出加载页面*，在其他任何地方都没有使用。此页面可以重定向到`index.html`iframe 或将其包含为 iframe。

2.  另一种选择是`index.html`获取一个查询字符串来指示它是如何使用的。您的初始弹出窗口可能是`index.html?init=1`页面的所有其他内容，只需使用`index.html`. 然后用于`window.location.search.substring(1)`测试是否存在查询字符串并采取适当的措施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T13:46:59.817

我也在寻找解决方案，我想知道是否可以在没有弹出窗口的情况下启动浏览器操作，[检测点击](http://code.google.com/chrome/extensions/browserAction.html#event-onClicked)，然后使用“ [setPopup()](http://code.google.com/chrome/extensions/browserAction.html#method-setPopup) ”设置弹出窗口。如果它有效，它似乎不是最好的方法，我希望有人知道更好的解决方案。

# database - 在关系数据库表中表示多维数组数据？

> ID：11292335
> 
> 赞同：0
> 
> 时间：2012-07-02T11:00:18.383
> 
> 标签：database

假设我有一个类似对象的数据记录，如下所示：

```
$article = array(
    'title' => '',
    'tagline' => '',
    'content' => '',
    'stats' => array(
        'words' => 0,
        'paragraphs' => 0,
        'tables' => 0
    ),
    'references' => array(
        'reference 1',
        'reference 2',
        'reference 3'
    ),
    'attachments' => array(
        'images' => array(
            'image 1',
            'image s'
        ),
        'videos' => array(
            'video 1',
            'video 2'
        )
    )
); 
```

我的问题是如何将这组数据记录存储在关系数据库中？我应该如何设计表结构？

我知道我总是可以设置平面字段，例如 stats_words、stats_paragraphs 等等，但是还有更多的结构化方法吗？而不是将 JSON 或序列化字符串存储在单个字段中......

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:08:57.513

例如这种方式：

```
article
  ID
  title _
  tagline _
  content ___
  stat_words
  stat_paragraphs
  stat_tables

article_reference
  ID
  article_id -> article
  reference _

article_attachment
  ID
  article_id -> article
  att_type // image or video
  path _
  title _ 
```

（`_`表示 varchar/text 字段，其他字段为数字）

或者作为 MySQL DDL：

```
CREATE TABLE IF NOT EXISTS article (
   id               INT NOT NULL AUTO_INCREMENT,
   title            VARCHAR(255) NOT NULL,
   tagline          VARCHAR(255) NOT NULL,
   content          MEDIUMTEXT NOT NULL,
   stat_words       INT NOT NULL,
   stat_paragraphs  INT NOT NULL,
   stat_tables      INT NOT NULL,
   PRIMARY KEY ( id )
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1;

CREATE TABLE IF NOT EXISTS article_reference (
   id               INT NOT NULL AUTO_INCREMENT,
   article_id       INT NOT NULL,
   reference        VARCHAR(255) NOT NULL,
   PRIMARY KEY ( id ),
   FOREIGN KEY ( article_id ) REFERENCES article( id )
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1;

CREATE TABLE IF NOT EXISTS article_attachment (
   id               INT NOT NULL AUTO_INCREMENT,
   article_id       INT NOT NULL,
   att_type         INT NOT NULL,
   path             VARCHAR(255) NOT NULL,
   title            VARCHAR(255) NOT NULL,
   PRIMARY KEY ( id ),
   FOREIGN KEY ( article_id ) REFERENCES article( id )
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1; 
```

# system.reactive - Rx 队列实现和 Dispatcher 的缓冲区

> ID：11292339
> 
> 赞同：3
> 
> 时间：2012-07-02T11:00:42.063
> 
> 标签：system.reactive

我想实现一个队列，该队列能够从多个线程中的多个生产者那里获取事件/项目，并在单个线程上使用它们。这个队列将在一些关键环境中工作，所以我很关心它的稳定性。

我已经使用 Rx 功能实现了它，但我有两个问题：

1.  这个实现好吗？或者也许它在某种我不知道的方面存在缺陷？（作为替代方案 - 使用队列和锁手动实现）
2.  Dispatcher 的缓冲区长度是多少？它可以处理 10 万个排队的项目吗？

下面的代码使用简单的 TestMethod 说明了我的方法。它的输出显示所有值都是从不同的线程输入的，但在另一个单线程上处理。

```
[TestMethod()]
public void RxTest()
{
    Subject<string> queue = new Subject<string>();

    queue
        .ObserveOnDispatcher()
        .Subscribe(s =>
                        {
                            Debug.WriteLine("Value: {0}, Observed on ThreadId: {1}", s, Thread.CurrentThread.ManagedThreadId);
                        },
                    () => Dispatcher.CurrentDispatcher.InvokeShutdown());

    for (int j = 0; j < 10; j++)
    {
        ThreadPool.QueueUserWorkItem(o =>
        {
            for (int i = 0; i < 100; i++)
            {
                Thread.Sleep(10);
                queue.OnNext(string.Format("value: {0}, from thread: {1}", i.ToString(), Thread.CurrentThread.ManagedThreadId));
            }
            queue.OnCompleted();
        });
    }

    Dispatcher.Run();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T11:27:21.133

我不确定`Subject`在大量多线程场景中的行为。我可以想象，尽管在您所谈论的情况下，类似`BlockingCollection`（及其底层）的东西都很好用。`ConcurrentQueue`并且易于启动。

```
var queue = new BlockingCollection<long>();

// subscribing
queue.GetConsumingEnumerable()
     .ToObservable(Scheduler.NewThread)
     .Subscribe(i => Debug.WriteLine("Value: {0}, Observed on ThreadId: {1}", i, Thread.CurrentThread.ManagedThreadId));

// sending
Observable.Interval(TimeSpan.FromMilliseconds(500), Scheduler.ThreadPool)
          .Do(i => Debug.WriteLine("Value: {0}, Sent on ThreadId: {1}", i, Thread.CurrentThread.ManagedThreadId))
          .Subscribe(i => queue.Add(i)); 
```

你当然不想接触队列和锁。该`ConcurrentQueue`实现非常出色，并且肯定会有效地处理您正在谈论的大小队列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T11:52:55.097

看看`EventLoopScheduler`。它内置在 RX 中，我认为它可以满足您的所有需求。

您可以采用任意数量的可观察对象，调用`.ObserveOn(els)`（`els`是您的实例`EventLoopScheduler`），您现在正在将多个线程中的多个可观察对象编组到单个线程上，并将每个调用`OnNext`串行排队。

# multithreading - 如何防止冻结MainForm并等待子线程的返回值

> ID：11292346
> 
> 赞同：1
> 
> 时间：2012-07-02T11:01:23.970
> 
> 标签：multithreading, delphi, delphi-7, tthread

我有线程在哪里下载 xml 文件和我想在其他类中解析的这个 xml 文件。现在我有准备线程，我可以在哪里下载它。在 MainForm 中我使用的是 WaitForSingleObject，但是这个函数冻结了 MainFrom，那么我怎样才能防止 reezing 并等待值呢？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T13:17:13.020

首先，使用事件设计线程并使用 Synchronize 调用它们。

在 MainForm 中创建线程并为其分配事件处理程序：

```
Thread := TMyThread.Create(True);
Thread.OnDownload := DoDownload;
Thread.OnParse := DoParse;
// Other Events
Thread.Start; 
```

您不应该在 MainForm 中等待*。避免使用 Windows 消息方法，因为您的应用程序将失去平台可移植性，只是链接到 WinXX 编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:18:24.200

在主线程上等待并不是一个好的设计，但在某些情况下它可能是必要的。但是，在等待期间，您仍然需要处理进入线程的消息。

看看MSDN上的[MsgWaitForMultipleObjects 。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684242%28v=vs.85%29.aspx)

# aspectj - Aspectj：来自外部 jar 的拦截方法

> ID：11292352
> 
> 赞同：16
> 
> 时间：2012-07-02T11:02:00.600
> 
> 标签：aspectj

我正在使用 X.jar 并添加到我的 AspectJ 项目（在 Eclipse 中）。我已经为 X.jar 中的 myMethod() 方法编写了切入点和建议。

但是 aspectj 并没有拦截这个方法调用。

我怎样才能告诉aspectj拦截外部罐子上的方法调用。或者不可能吗？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-02T11:05:05.503

有两种选择：

a) 将方面编译到 JAR
b) 使用加载时间编织（我会使用那个）

这两个都是高级主题，我建议您阅读[Ramnivas Laddad 的 AspectJ in Action (2nd Ed)](http://www.manning.com/laddad2/)以了解更多信息。

澄清一下：有不同类型的切入点。如果您的代码调用库的方法，您当然可以拦截这些调用，因为它们发生在您的代码中。所以`call()`切入点会起作用，但是`execute()`（和许多其他的）切入点不会，因为它们会改变执行方法，这不在您的代码库中。因此，您必须更改库的字节码（选项 a）或更改将其加载到应用程序中的方式（选项 b）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-05T10:09:08.327

这是 GitHub 上 AspectJ Load-Time Weaving 的简单示例[https://github.com/medvedev1088/aspectj-ltw-example](https://github.com/medvedev1088/aspectj-ltw-example)

它使用 Joda Time 库来演示如何拦截 DateTime#toString() 方法调用。

方面：

```
@Aspect
public class DateTimeToStringAspect {

    public static final String TO_STRING_RESULT = "test";

    @Pointcut("execution(* org.joda.time.base.AbstractDateTime.toString())")
    public void dateTimeToString() {
    }

    @Around("dateTimeToString()")
    public Object toLowerCase(ProceedingJoinPoint joinPoint) throws Throwable {
        Object ignoredToStringResult = joinPoint.proceed();
        System.out.println("DateTime#toString() has been invoked: " + ignoredToStringResult);
        return TO_STRING_RESULT;
    }
} 
```

aop.xml

```
<aspectj>

    <aspects>
        <!-- Aspects -->
        <aspect name="com.example.aspectj.DateTimeToStringAspect"/>
    </aspects>

    <weaver options="-verbose -showWeaveInfo">
        <include within="org.joda.time.base.AbstractDateTime"/>
    </weaver>

</aspectj> 
```

测试：

```
public class DateTimeToStringAspectTest {
    @Test
    public void testDateTimeToString() throws Exception {
        assertThat(new DateTime().toString(), is(DateTimeToStringAspect.TO_STRING_RESULT));
    }
} 
```

来自 pom.xml 的 Surefire 插件配置：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.9</version>
    <configuration>
        <argLine>-XX:-UseSplitVerifier</argLine>
        <argLine>-javaagent:${user.home}/.m2/repository/org/aspectj/aspectjweaver/${aspectjweaver.version}/aspectjweaver-${aspectjweaver.version}.jar</argLine>
    </configuration>
</plugin> 
```

# jquery - 可以在 Mvc4 中使用与 mvc3 相同的代码

> ID：11292355
> 
> 赞同：0
> 
> 时间：2012-07-02T11:02:07.833
> 
> 标签：jquery, asp.net-mvc-4

我的jQuery是

```
 <script type="text/javascript">
    $(document).ready(function () {
        $('p').click(function () {
            var textbox = $('<input id="Text1" type="text"  name="Name" />')
            var oldText = $(this).text();
            $(this).replaceWith(textbox);
            textbox.blur(function () {
                var newValue = $(this).val();
                $(this).replaceWith($('<p>' + newValue + '</p>').after($('<input id="Text1" type="text" name="Name" />',{ type: 'hidden', name: 'Name', value: newValue })));
            });
            textbox.val(oldText);
        });

    }); 

</script> 
```

然后进行 2 个控制器操作（GET 和 POST）：

```
public ActionResult Viewdetails()
{
    User ur = new User();
    ur.Name = "Danny";
    return View(ur);
}

[HttpPost]
public ActionResult Display(User model)
{
    return View(model);
} 
```

在里面`Viewdetails.cshtml`：

```
@model User
@using (Html.BeginForm("Display", "Home", FormMethod.Post))
{
    <div>Name: <a>@Model.Name</a><br /></div>
    <input type="submit" value="Submit" /> 
    <br />
} 
```

在里面`Display.cshtml`：

```
@model User
<div>You have selected: @Model.Name</div> 
```

我无法在运行时编辑名称，这在 mvc3 中运行良好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:34:44.933

试试这样：

```
textbox.blur(function () {
    var newValue = $(this).val();
    $(this).replaceWith(
        $('<a />', { text: newValue })
        .after(
            $('<input />', { type: 'hidden', name: 'Name', value: newValue })
        )
    );
}); 
```

* * *

更新：

完整示例：

模型：

```
public class User
{
    public string Name { get; set; }
} 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        User ur = new User();
        ur.Name = "Danny";
        return View(ur);
    }

    [HttpPost]
    public ActionResult Index(User model)
    {
        return Content(model.Name);
    }
} 
```

查看 ( `~/Views/Home/Index.cshtml`):

```
@model AppName.Models.User
@{
    Layout = null;
}
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function () {
        $('a').click(function () {
            var textbox = $('<input id="Text1" type="text" name="Name" />')
            var oldText = $(this).text();
            $(this).replaceWith(textbox);
            textbox.blur(function () {
                var newValue = $(this).val();
                $(this).replaceWith(
                    $('<a/>', { text: newValue })
                    .after(
                        $('<input />', { type: 'hidden', name: 'Name', value: newValue })
                    )
                );
            });
            textbox.val(oldText);
        });
    }); 
    </script>
</head>
<body>
    @using (Html.BeginForm())
    {
        <div>Name:<a>@Html.DisplayFor(x => x.Name)</a></div>
        <input type="submit" value="Submit" /> 
    }
</body>
</html> 
```

# wcf - WCF 数据合同解析器

> ID：11292357
> 
> 赞同：3
> 
> 时间：2012-07-02T11:02:11.027
> 
> 标签：wcf, datacontractserializer, datacontract

我正在尝试按照[http://kellabyte.com/2010/11/13/building-extensible-wcf-service-interfaces-with-datacontractresolver/](http://kellabyte.com/2010/11/13/building-extensible-wcf-service-interfaces-with-datacontractresolver/)的指南来创建和附加 DataContractSerializer。

我已经声明了序列化程序并实现了方法，然后使用以下代码将其附加到客户端和服务器：

```
public class ModuleDataContractResolver : DataContractResolver {
    public override bool TryResolveType(Type type, Type declaredType,
                                            DataContractResolver knownTypeResolver,
                                            out System.Xml.XmlDictionaryString typeName,
                                            out System.Xml.XmlDictionaryString typeNamespace) {
       ....// I return a true/false here
    }

    public override Type ResolveName(string typeName, string typeNamespace,
                                         Type declaredType, DataContractResolver knownTypeResolver) {
       ....// I return a type here
    } 
```

-

```
 var endpoint = _svcHost.Description.Endpoints.FirstOrDefault()
        ContractDescription cd = endpoint.Contract;
        foreach (OperationDescription opdesc in cd.Operations) {
            DataContractSerializerOperationBehavior serializerBehavior = opdesc.Behaviors.Find<DataContractSerializerOperationBehavior>();

            if (serializerBehavior == null) {
                serializerBehavior = new DataContractSerializerOperationBehavior(opdesc);
                opdesc.Behaviors.Add(serializerBehavior);
            }

            serializerBehavior.DataContractResolver = new ModuleDataContractResolver();
        } 
```

尽管附加了解析器，但服务和客户端都没有调用这两个方法，因此服务会抛出异常。我错过了一步吗？

**更新：**我不完全相信这不是因为使用 MEF 返回这些类型。有问题的类型是 MEF 类型，它被服务检测到，但仅作为接口公开给客户端，因此不会加载程序集。

想法是让服务加载 MEF 模块列表，然后通过此 WCF 服务将它们作为接口公开给客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:23:50.453

服务端：

```
foreach (OperationDescription operation in endpoint.Contract.Operations)
    {
        operation.Behaviors.Find<DataContractSerializerOperationBehavior>()
            .DataContractResolver = new ModuleDataContractResolver();
    } 
```

客户端：

```
foreach (var operation in factory.Endpoint.Contract.Operations)
{
    operation.Behaviors.Find<DataContractSerializerOperationBehavior>()
        .DataContractResolver = new ModuleDataContractResolver();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T13:35:21.377

最终找到了我没有尝试过的最后一个解决方案，[dpblogs](http://blogs.msdn.com/b/adonet/archive/2010/01/05/poco-proxies-part-2-serializing-poco-proxies.aspx)的一篇文章展示了如何在服务接口的方法声明中使用属性。这最终导致我的解析方法被调用。

# android - 如何检查sd卡目录中是否存在文件

> ID：11292359
> 
> 赞同：7
> 
> 时间：2012-07-02T11:02:13.277
> 
> 标签：android, file, android-sdcard

我想检查给定的文件是否存在于 android sd 卡中。我正在尝试使用绝对路径创建文件并进行检查，`file.exists()`但它不起作用。该文件的 URL 是 `"file:///mnt/sdcard/book1/page2.html"`并且该文件确实存在。但不知何故`file.exists()`显示不一样。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-07-02T11:09:00.820

```
File extStore = Environment.getExternalStorageDirectory();
File myFile = new File(extStore.getAbsolutePath() + "/book1/page2.html");

if(myFile.exists()){
    ...
} 
```

这应该有效。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-02T11:10:08.527

试试这样：

```
File file = new File(Environment.getExternalStorageDirectory() + "/book1/page2.html");
if (file.exists()) {
    /*...*/
} 
```

还要确保你有：

```
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" /> 
```

在您的清单文件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T11:08:31.900

您可以检查如下：

```
 File file = new File(getExternalCacheDirectory(), "mytextfile.txt" );
  if (file.exists()) {
      //Do action
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T11:07:30.153

```
File logFile = new File(
        android.os.Environment.getExternalStorageDirectory()
                + "/book1/", "page2.tml");
if (logFile.exists())
    System.out.println("file exists");
else
    System.out.println("file does not exist 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T11:09:50.897

做这样的事情：

```
File dir = Environment.getExternalStorageDirectory();
File yourFile = new File(dir, "your/file/path");

if(yourFile.exists())
{

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-02T11:11:09.913

```
String filepath = getFilesDir().getAbsolutePath(); 
String FileName = "Yourfilename" ;
File FileMain = new File(filepath, FileName); 
if (FileMain.exists()){ 
do somthing here                     
}else{} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-23T07:23:07.090

```
File file = new File(path+filename);
if (file.exists())
{
//Do something
} 
```

检查，这将工作

# iphone - 错误！Twitter 无法从我的 iPhone 连接

> ID：11292365
> 
> 赞同：0
> 
> 时间：2012-07-02T11:02:43.900
> 
> 标签：iphone, objective-c, ios, xcode, twitter

我`AddThis SDK`用于 facebook、twitter 和电子邮件共享，facebook 和电子邮件运行良好，而 Twitter 在从我的 Iphone 连接时出错。
我的模拟器做得很好，但 iphone twitter 没有连接，只是在控制台`"Error!"`
代码中显示一条消息：
`[AddThisSDK setTwitterViaText:@"QuotesApp"];`
`[AddThisSDK shareURL:@"http://HazratAliQuotes.com" withService:@"twitter" title:string description:@"QuotesApp"];`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:16:42.667

这是您的可选答案。在**IOS 5 中有框架 Tweeter.Framework。**添加此框架并导入，我使用它来上传图像（作为链接）和消息。可能对你有帮助。:)

# 导入“推特/推特.h”

和按钮点击..

```
- (void)postImageOnTweeterWall
{

if (imageView.image)
{

    NSLog(@"tweetbutton pressed called");
    // Create the view controller
    TWTweetComposeViewController *twitter = [[TWTweetComposeViewController alloc] init];

    // Optional: set an image, url and initial text
    [twitter addImage:[UIImage imageNamed:@"img1.jpeg"]];
    // [twitter addURL:[NSURL URLWithString:[NSString stringWithString:@"http://MobileDeveloperTips.com/"]]];
    [twitter setInitialText:@"Tweet from iOS 5 app using the Twitter framework."];

    // Show the controller
    [self presentModalViewController:twitter animated:YES];

    // Called when the tweet dialog has been closed
    twitter.completionHandler = ^(TWTweetComposeViewControllerResult result) 
    {
        NSString *title = @"Tweet Status";
        NSString *msg; 

        if (result == TWTweetComposeViewControllerResultCancelled)
        msg = @"Tweet compostion was canceled.";
        else if (result == TWTweetComposeViewControllerResultDone)
        msg = @"Tweet composition completed.";

        // Show alert to see how things went...
        UIAlertView* alertView = [[UIAlertView alloc] initWithTitle:title message:msg delegate:self cancelButtonTitle:@"Okay" otherButtonTitles:nil];
        [alertView show];

        // Dismiss the controller
        [self dismissModalViewControllerAnimated:YES];
    };
}
else
{   UIAlertView  *alertView = [[[UIAlertView alloc] initWithTitle:@"Tweeter" message:@"Select photo to Upload" 
                                                             delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil] autorelease];

        [alertView show];

} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:46:05.460

尝试此[链接](http://mobile.tutsplus.com/tutorials/iphone/twitter-api-iphone/)以在您的应用程序中为以前版本的 iOS 实现 Twitter

twitter 的 Previos API 被称为 MGTTwitter

对于 AddThis：

要使用启用 Twitter OAuth 的共享，您需要告诉库这样做，然后配置您的 Twitter 使用者密钥、使用者密码和回调 URL。

```
[AddThisSDK setTwitterAuthenticationMode:ATTwitterAuthenticationTypeOAuth];
[AddThisSDK setTwitterConsumerKey:@"yourconsumerkey"];
[AddThisSDK setTwitterConsumerSecret:@"yourconsumersecret"];
[AddThisSDK setTwitterCallBackURL:@"yourcallbackurl"]; 
```

以下是添加的新答案。

删除线`[AddThisSDK setTwitterViaText:@"QuotesApp"];`

添加行`[AddThisSDK setTwitterAuthenticationMode:ATTwitterAuthenticationTypeOAuth];`

并在按下 twitter 按钮时创建一个选择器并将以下代码添加为

```
[AddThisSDK shareURL:@"http://www.addthis.com"
             withService:@"twitter"
                   title:@"AddThis - The #1 Bookmarking & Sharing Service"
             description:@"AddThis is a free way to boost traffic back to your site by making it easier for visitors to share your content."]; 
```

# java - 如何在java程序中访问html表单数据

> ID：11292366
> 
> 赞同：-2
> 
> 时间：2012-07-02T11:02:47.637
> 
> 标签：java, xml, html, jakarta-ee

我在eclipse中创建了一个java项目，在这个项目中我有一个html表单customer.html，如下所示

```
<form>
Name :<input type="text" id="name"/>
Address: <input type="text" id="add"/>
Age:<input type="int" id="age"/>
<input type="submit" onclick="what should i call here in my program"/>
</form> 
```

一旦用户填写表单并提交它我想访问java代码中的表单字段是可能的。如果是这样，否则有没有其他解决方案来为这个表单创建一个xml文件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T11:31:52.180

```
<input type="submit" onclick="only Javascript function can be called here"/> 
```

如果您想在 java 代码中访问 html 表单元素，您需要在某个控制器或另一个 jsp 上提交您的表单。像..

```
<form name="new_employee" method="post" action="../admin/newEmployee.do">
  Name :<input type="text" name="employeeName"/>
  Address: <input type="text" name="add"/>
  Age:<input type="text" name="age"/>
  <input type="submit" value="Submit"/>
</form> 
```

表单元素可以通过它们的名称从生成的请求中访问，例如..

```
request.getParameter("employeeName"); 
```

# python - web2py 中的子进程使用

> ID：11292373
> 
> 赞同：1
> 
> 时间：2012-07-02T11:03:32.283
> 
> 标签：python, frameworks, web2py

我正在尝试使用 subprocess.call 方法从 web2py 的控制器函数运行 python 脚本。但是脚本不会从那里执行，但是当我从 python shell 内部运行相同的方法时，它运行没有任何问题。

我在 web2py 控制器的函数中写的命令是：

```
subprocess.call(['python','script.py', args]) 
```

其中 args 是一个字符串，其中包含我要传递给脚本的命令行参数我在 python shell 中编写的命令是：

```
>>>subprocess.call(['python','script.py','args']) 
```

在这里，我直接传递论点。

script.py 在目录中创建多个文件，但它不会在 web2py 中这样做。

我在 web2py 控制器函数中多次使用 subprocess 没有任何问题，我也尝试将 script.py 的权限更改为 777，但它也没有任何帮助。

谁能告诉我我的错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:07:36.497

也许您应该尝试提供 script.py 的完整路径？

# javascript - 如何在播放 10 秒的 youtube 视频时触发 JavaScript 函数

> ID：11292376
> 
> 赞同：-3
> 
> 时间：2012-07-02T11:03:40.667
> 
> 标签：javascript, youtube, youtube-javascript-api

我想知道当用户在嵌入我博客的 youtube 上观看了 10 秒的视频时如何触发 JavaScript 功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T22:44:05.573

[您可以使用getCurrentTime](https://developers.google.com/youtube/js_api_reference#getCurrentTime)方法知道玩家的时间，您可以在传递给 setInterval 的函数中调用该方法。您可以在发送到[onStateChange](https://developers.google.com/youtube/iframe_api_reference#onStateChange)处理程序的播放和暂停事件上启动和停止计时器。

如果您希望播放十秒，而不是超过视频中的十秒标记，那么启动倒数计时器以在开始事件上调用您的函数并在缓冲和暂停事件上停止它是您最好的选择选项。

# php - PHP - 引用的数组变量的索引是否也是引用？

> ID：11292379
> 
> 赞同：0
> 
> 时间：2012-07-02T11:03:45.477
> 
> 标签：php, pass-by-reference

```
$cars = array(
     array('name' => 'Toyota', price => 10000, ...),
     array('name' => 'Ford', price => 20000, ...),
     ...
);

foreach($cars as &$car)
{
   do_something($car['name']);
}
unset($car);

function do_something($name)
{
    ....
} 
```

在 do_something() 函数中，$name 是引用还是值？如果它是一个引用，我如何在循环中检索值并将其传递给函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T11:07:17.053

不，`$name`in `do_something()`function 不是引用，它不是通过引用传递，只传递`$car['name']`to的值`$name`。

如果你想通过引用传递，你可以像下面这样，`$car`作为引用传递。

```
$cars = array(
     array('name' => 'Toyota', price => 10000),
     array('name' => 'Ford', price => 20000)
);

foreach($cars as &$car)
{
   do_something($car);
}

var_dump($cars);

function do_something(&$car)
{
    $car['name'] .= '_changed';
} 
```

# ios - Flash Builder - iPad 3 分辨率

> ID：11292381
> 
> 赞同：0
> 
> 时间：2012-07-02T11:03:51.160
> 
> 标签：ios, ipad, apache-flex

所以我知道我在 iPad 3 发布时在某处读到过，您必须使用更新的 iOS SDK 构建您的应用程序才能获得完整的分辨率。

从那以后有什么事情发生吗？

对我来说，在 Flash Builder 的新 iPad 3 上发布使用全分辨率视网膜显示屏的应用程序的最简单方法是什么？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:10:14.970

这应该让你开始：[http ://www.overdigital.com/2012/05/08/the-new-retina-ipad-and-adobe-air/](http://www.overdigital.com/2012/05/08/the-new-retina-ipad-and-adobe-air/)

# c - 将 C99 功能用于跨平台应用程序

> ID：11292391
> 
> 赞同：1
> 
> 时间：2012-07-02T11:04:41.757
> 
> 标签：c, visual-c++, gcc, c99

我正在用 C 编写一个新项目，我想知道使用 C99 特性是一种好习惯吗？我知道它适用于 GCC 而不是 MSVC。所以我必须在 Windows 中使用像 MinGW 这样的东西来进行编译。还有其他问题吗？

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T11:08:09.450

我很确定您可以为任何合理的平台找到符合 C99 的编译器。
所以是的 - 继续使用 C99。
符合标准始终是一种很好的做法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T11:16:38.500

C99 现在已经 13 岁了，MS 已经多次明确表示他们对 VS 中的现代 C 开发不感兴趣。幸运的是，还有其他几个可用于 Windows 的编译器工具链，它们支持 C99 / C11 / 标准的未来版本。

有一些微控制器缺少 C99 开发工具，但如果您正在做“跨平台应用程序”开发，您可能不会针对它们。基本上所有主流平台都有一个或多个现代 C 编译器可用于目标，所以你应该没问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T13:53:58.507

我认为在有用的地方*不*使用 C99 功能是一种不好的做法。C89 已经过时了，现在将布尔值存储在 int 中或在函数开头声明所有变量等操作都被认为是不好的风格。

忘记 MSVC。MSVC 是一个 C++ 编译器，既不打算也不适合编译 C。

# c# - ASP.NET 4.0 路由和 Default.aspx（如何写一个 Handler？有没有必要）

> ID：11292398
> 
> 赞同：0
> 
> 时间：2012-07-02T11:05:19.480
> 
> 标签：c#, url-routing, asp.net-4.0

我想在页面启动时将 Default.aspx 路由到另一个 URL。
我的 global.asax 是这样的：

```
protected void Application_Start(object sender, EventArgs e)
{
    RegisterRoutes(RouteTable.Routes);
}

public static void RegisterRoutes(RouteCollection routes)
{
    routes.MapPageRoute(
        "Default",                                                          // Route name
        "My Site",                                                          // URL with parameters
        "~/Default.aspx"                                                    // Parameter defaults
    );
} 
```

我应该为我的目的编写一个处理程序吗？
（我找到了一些 .net 3.5 和 MVC 的示例，但是 .net 4 Web 表单呢）
如果是，我该怎么写？

**编辑：**
这条线到底是做什么的？

```
 routes.Add("Default", new Route(string.Empty, new RouteHandler("~/Default.aspx"))); 
```

我正在使用 Web 表单 -> 不是 MVC

提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T20:52:09.283

下面是一个如何处理asp.net 4.0 web表单上的路由的具体示例（它就在mvc部分下面）。

[http://weblogs.asp.net/scottgu/archive/2009/10/13/url-routing-with-asp-net-4-web-forms-vs-2010-and-net-4-0-series。 aspx](http://weblogs.asp.net/scottgu/archive/2009/10/13/url-routing-with-asp-net-4-web-forms-vs-2010-and-net-4-0-series.aspx)

你接近它的方式很好。您的路线的第二个参数确实有错误。好吧，也许不是错误，我不喜欢 url 中的空格，因为它们实际上是编码的空格。查看指南。

刚刚注意到您的编辑。添加路由本质上会在 url 或 url 模式（你有作为 string.Empty 这是一个问题）和服务请求的处理程序之间创建一个映射（你指定 RouteHandler ，我认为它实际上不存在？）。.net 提供了一个 PageRouteHandler，它允许您指定哪个页面响应您的请求并处理其他一些细节，例如在您的站点物理结构上定义的安全性。在内部，MapPageRoute 只是调用 routes.Add 但使用 PageRouteHandler。

# jquery - 如何在 Servlet request.getParameter 中从 jQuery 读取复杂的 JSON 对象

> ID：11292400
> 
> 赞同：1
> 
> 时间：2012-07-02T11:05:27.870
> 
> 标签：jquery, json, ajax, servlets, http-request-parameters

我正在使用 jQuery 创建和发送 JSON 对象，但我无法弄清楚如何使用 org.json.simple 库在我的 Ajax servlet 中正确解析它。

我的 jQuery 代码如下：

```
var JSONRooms = {"rooms":[]};
       $('div#rooms span.group-item').each(function(index) {
           var $substr = $(this).text().split('(');
           var $name = $substr[0];
           var $capacity = $substr[1].split(')')[0];           
           JSONRooms.rooms.push({"name":$name,"capacity":$capacity});
       });        
       $.ajax({
           type: "POST",
           url: "ParseSecondWizardAsync",          
           data: JSONRooms,        
           success: function() {
               alert("entered success function");
               window.location = "ctt-wizard-3.jsp";
           }
       }); 
```

在 servlet 中，当我使用 request.getParameterNames() 并将其打印到我的控制台时，我得到了参数名称`rooms[0][key]`等，但我无法以任何方式解析 JSON 数组房间。我尝试解析返回的对象`request.getParameter("rooms")`或`.getParameterValues("rooms")`变体，但它们都返回空值。

我在 jQuery 中格式化 JSON 数据的方式是否有问题，或者有没有办法解析我缺少的 servlet 中的 JSON？

请求更多代码，即使 servlet 仍然是空的，因为我不知道如何解析数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:52:48.687

的`data`参数`$.ajax()`接受一个表示请求参数映射的 JS 对象。因此，您提供给它的任何 JS 对象都将转换为请求参数。由于您将 JS 对象简单地传递给它，因此它被视为请求参数映射。您需要通过准确的请求参数名称表示来访问各个参数。

```
String name1 = request.getParameter("rooms[0][name]");
String capacity1 = request.getParameter("rooms[0][capacity]");
String name2 = request.getParameter("rooms[1][name]");
String capacity2 = request.getParameter("rooms[1][capacity]");
// ... 
```

您可以通过方法找到它们[`HttpServletRequest#getParameterMap()`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameterMap%28%29)：

```
Map<String, String[]> params = request.getParameterMap();
// ... 
```

您甚至可以动态收集所有参数，如下所示：

```
for (int i = 0; i < Integer.MAX_VALUE; i++) {
    String name = request.getParameter("rooms[" + i + "][name]");
    if (name == null) break;
    String capacity = request.getParameter("rooms[" + i + "][capacity]");
    // ...
} 
```

如果您的意图是将其作为真正的 JSON 对象传递，以便您可以使用 JSON 解析器将其进一步分解为属性，那么您必须`String`在使用 JS/jQuery 发送之前将其转换为 a 并指定`data`如下参数：

```
data: { "rooms": roomsAsString } 
```

通过这种方式，它可以作为 JSON 字符串使用`request.getParameter("rooms")`，您可以反过来使用任意 JSON API 进行解析。

* * *

**与具体问题无关**，不要`$`在 jQuery 中为非 jQuery 对象使用变量前缀。这会使您的代码对 JS/jQuery 专家更加困惑。仅将它用于真正的 jQuery 对象，而不用于普通的香草字符串或原语。

```
var $foo = "foo"; // Don't do that. Use var foo instead.
var $foo = $("someselector"); // Okay. 
```

# unicode - 在 IE6 中以不同大小呈现的 Unicode 字符

> ID：11292401
> 
> 赞同：4
> 
> 时间：2012-07-02T11:05:29.560
> 
> 标签：unicode, fonts, web, internet-explorer-6

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T11:12:29.830

This is because the specified character is missing from the font you specified. So the browser looks for a suitable font to use for that character so it can still display it. Different browsers pick different fonts, so you'll see it a little bit differently on each.

There isn't much in general you can do to avoid this because missing fonts are very common on the web and thus you cannot really rely on any font to be present on the user's machine. You can try mitigating it, though:

1.  You can put the U+25C6 in a span that's styled to use a different but specific font that has the character (and which works well with your main font).
2.  Same as above, but distribute a web font ([WOFF](http://en.wikipedia.org/wiki/WOFF) seems to be a reasonable choice nowadays) that contains the glyph. That way you have more control about what is displayed.
3.  Stay far, far away from specifying fallback fonts like Arial Unicode MS. Just don't use them at all.
4.  If you're just after the looks of U+25C6 and don't care about having it actually in text form you can use an image or a [CSS hack](http://css-tricks.com/examples/ShapesOfCSS/#diamond).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-18T15:43:01.977

# scala - 有哪些基于 Scala 的开源 DSL 项目？

> ID：11292402
> 
> 赞同：1
> 
> 时间：2012-07-02T11:05:29.480
> 
> 标签：scala, dsl

我目前正在寻找可以开发的开源 scala 项目。任何人都可以提供基于 scala 的开源 DSL 项目列表吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:36:09.203

还可以查看[wiki 工具和库](https://wiki.scala-lang.org/display/SW/Tools+and+Libraries)部分，其中存在许多开源项目。大多数都会有语法细节，我当然有偏见，但我也推荐[Scales](https://github.com/chris-twiner/scalesXml)（[当前文档](http://scala-scales.googlecode.com/svn/sites/scales/scales-xml_2.9.2/0.3-RC7/index.html)）来查看 - 我相信对于所有了解 XPath 或构建器方法的人来说，它是一种可识别的方法。

# ruby-on-rails - 将数据从复选框存储到rails中的数据库

> ID：11292403
> 
> 赞同：-3
> 
> 时间：2012-07-02T11:05:31.557
> 
> 标签：ruby-on-rails, checkbox

```
<script>
  function checkValue(){
     var checkboxes = $("input[type='checkbox']");

     if ( $('#student').val() == ""  ) {
        alert('Please select any student!');
        return false;
     }
     else {
        if(checkboxes.is(":checked")) {
           return true;
        }
     } 
```

我的复选框工作得很好；我需要知道如何处理它，以便将复选框的值存储到 DB。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:46:39.127

您可以使用以下方法之一：

```
<%= form_for :model %>
  <% f.check_box :field_name %>
<% end %> 
```

或者

```
<%= form_for :model %>
  <% check_box_tag :model_field_name %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T11:09:54.097

根据您的需要使用`simple_form`。它非常受欢迎，并且建立在 formtastic 之上。

有关详细信息，请参阅[https://github.com/plataformatec/simple_form/](https://github.com/plataformatec/simple_form/)。

您还可以在以下位置查看出色的实现细节：[http ://railscasts.com/episodes/234-simple-form](http://railscasts.com/episodes/234-simple-form)

# php - MySQL 与 PHP 中的 PDO 语句

> ID：11292405
> 
> 赞同：-1
> 
> 时间：2012-07-02T11:05:43.140
> 
> 标签：php, mysql, pdo

以下代码有什么问题，因为我的数据丢失，并且有返回记录：

```
 $db_stmt = new PDOStatement();
    $db_stmt = $this->db->prepare("SELECT id_translation AS ID, content AS Label FROM ?");        
    $language = "language_translation_" . $request->request_object->language; 
    $db_stmt->bindParam(1, $language);        
    $db_stmt->execute();        
    while ($obj = $db_stmt->fetchObject()){
        $response->response_list[] = $obj;
        unset($obj);
    } 
```

编辑：我正在创建一个 Web 服务来从 mysql 数据库中获取一些数据。我用休息客户端测试我的服务。（我不需要回声！！！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:21:07.690

我认为您不能将参数绑定到表名。请尝试类似

```
$db_stmt = $this->db->prepare("SELECT id_translation AS ID, content AS Label FROM `$language`"); 
```

希望这可以帮助。

# php - 如何在我的网站中重定向 htacces 的干净 url？

> ID：11292406
> 
> 赞同：0
> 
> 时间：2012-07-02T11:05:49.393
> 
> 标签：php, .htaccess

我搜索了很多次但没有找到正确的答案

我想要这个

我的网址是 domain.com/privacy.php

我想 domain.com/privacy/

如果可以，请告诉我如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:30:17.997

要重写 URL：

```
Options +FollowSymlinks
RewriteEngine On
RewriteBase /
######
############
############
######
RewriteRule ^privacy/ privacy.php [NC] 
```

更新：您是否希望 privacy.php 也将您重定向到 /privacy？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:26:08.207

使用类似的东西

```
Options +FollowSymlinks All -Indexes
RewriteEngine On

RewriteBase /

RewriteRule ^privacy.php$ privacy/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T12:20:18.093

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

不知道你的意思，但这是我对你的意思的猜测的回答

# c# - 如何使静态构造函数成为非私有的？

> ID：11292408
> 
> 赞同：13
> 
> 时间：2012-07-02T11:05:58.777
> 
> 标签：c#, static-constructor

C# 中的静态构造函数上不允许使用`public`,之类的访问修饰符。`private`然而，Visual Studio 代码分析在 C# 安全类别中有一条警告，上面写着“ [CA2121：静态构造函数应该是私有](http://msdn.microsoft.com/en-us/library/ms182320%28v=vs.100%29.aspx)的”。

是否可以将静态构造函数设为非私有？或者这是 Visual Studio 代码分析的错误？

**澄清**：我不想让任何构造函数成为非私有的。所以为什么？” 问题无关紧要。我只是对两个微软工具之间的矛盾感到好奇，想看看是否有什么我不知道的关于静态构造函数是如何处理的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T11:19:05.417

AC# 静态构造函数始终是私有的。您永远不会看到 C# 代码的警告，并且警告在那里没有用处。不过，代码分析也可用于其他语言，正是这些其他语言可能会导致您使用非私有静态构造函数编写类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T11:10:14.590

如果您阅读文档，它会清楚地说明

> 如果静态构造函数不是私有的，它可以被系统以外的代码调用。根据在构造函数中执行的操作，这可能会导致意外行为。

我想更重要的问题是*你为什么要这样做*？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T11:13:46.903

> 是否可以将静态构造函数设为非私有？

它的意义是什么？

在从链接器加载类的那一刻，在任何方法执行之前调用静态构造函数。因此，在链接器的自动调用之外调用静态构造函数是不明智的，这意味着它没有任何访问修饰符的意义。

基本上你不能在没有静态修改器执行的情况下引用一个类 - 并且在你的包含引用的代码执行之前。

# sql - SQL - 使用 while 循环插入（列名取决于循环）

> ID：11292409
> 
> 赞同：0
> 
> 时间：2012-07-02T11:06:09.567
> 
> 标签：sql, sql-server-2008

我们有一个报告需要将 7 天的数据放入结果表中，如下所示：

```
declare @table table (ProductId int, product nvarchar(255), supplier nvarchar(255), day1 int,  day2 int, day3 int, day4 int, day5 int, day6 int, day7 int) 
```

然而问题是我目前运行 7 个几乎相同的插入语句。

```
insert @table (ProductId, product, supplier, day1)
select 
   productId,
   product, 
   supplier,
   COUNT(productId)
from 
   @results
where 
   createdDate = @Date   
group by
   CreatedDate, ProductId, Product, supplier 
```

这个插入到第 1 天，但是我必须对第 2 天、第 3 天做同样的事情......只需更改@Date

我想做的是创建一个循环，该循环将根据当前循环插入正确的列（即正在处理第 1 天或第 2 天......）。

有没有办法将其动态设置为插入语句的正确列名？

我正在使用：sql server 2008R2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:58:20.867

您不能尝试使用 SQL-Server 2008 中的 PIVOT 函数在一个查询中执行全部插入操作吗？

我假设你的日子是连续的，你的专栏是 Day1、Day2 等。

```
;WITH Data AS
(   SELECT  ProductID,
            Product,
            Supplier,
            DATEDIFF(DAY, @Date, CreatedDate) + 1 AS DayNumber,
            ProductID AS [Counter]
    FROM    @Results
    WHERE   CreatedDate BETWEEN @Date AND DATEADD(DAY, 7, @Date)
)
INSERT @table (ProductID, Product, Supplier, Day1, Day2, Day3, Day4, Day5, Day6, Day7)
SELECT  *
FROM    Data
        PIVOT
        (   COUNT([Counter])
            FOR DayNumber IN ([1], [2], [3], [4], [5], [6], [7])
        ) pvt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:00:31.710

如果您发现自己在处理 SQL 问题时对循环的使用提出了疑问，那么您可能没有以适当的思维方式解决问题。

下面的起点。

```
SELECT  productId
      , product
      , supplier
      , day1 = SUM(CASE WHEN createdDate = @date THEN 1 ELSE 0 END)
      , day2 = SUM(CASE WHEN createdDate = DATEADD(d,1,@date) THEN 1 ELSE 0 END)...   

FROM    @results
WHERE   createdDate >= @Date
GROUP BY CreatedDate
      , ProductId
      , Product
      , supplier 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T12:17:06.053

与其这样做，我建议您更改目标表结构，使其多了两个名为 day_count 的列，用于存储当天的计数和 createdDate

```
create table @table (productId int,product int, supplier int,
    createdDate date,day_count int) 
```

可以使用以下查询填充此表

```
insert @table (ProductId, product, supplier,createdDate, day_count)
select 
   productId,
   product, 
   supplier,
   createdDate,
   COUNT(productId)
from 
   @results
where 
   createdDate between @Date and dateadd(dd, 7, @Date)
group by
   CreatedDate, ProductId, Product, supplier 
```

然后使用以下查询获得所需的输出

```
 declare @startDate date ='2012-07-02';
 with cte as(
select productId ,product , supplier ,createdDate, datediff(dd,
    @startDate,createdDate)+1 [day_num],
    day_count from #tmp)
 select productId ,product , supplier ,createdDate , 
 case when day_num=1 then day_count end [day1],
 case when day_num=2 then day_count end [day2],
 case when day_num=3 then day_count end [day3],
 case when day_num=4 then day_count end [day4],
 case when day_num=5 then day_count end [day5],
 case when day_num=6 then day_count end [day6],
 case when day_num=7 then day_count end [day7]
  from cte 
```

# android - Android 设备 UDID 或唯一 ID？

> ID：11292411
> 
> 赞同：7
> 
> 时间：2012-07-02T11:06:18.493
> 
> 标签：android

我想为我的 android 应用程序生成 android 设备唯一 id，以根据用户设备 udid 创建收藏夹。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-02T11:09:44.890

所有设备都有一个唯一的 ID。

```
 import android.provider.Settings.Secure;
 private String android_id = Secure.getString(getContext().getContentResolver(),
                                                            Secure.ANDROID_ID); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-21T22:07:17.477

```
private String uDiD = Secure.getString(getContext().getContentResolver(),
                                                        Secure.ANDROID_ID); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-26T08:14:53.963

您可以使用不同的值作为 udid。上面提到的 Secure.ANDROID_ID 有一些缺点 它可以为 null 在 2.2 和某些 4.2 设备上相同 您可以使用设备的 MacAddress 或 IMIE 地址（在没有蜂窝连接的设备上可以为 null）

# jquery - jQuery动画元素的左侧

> ID：11292412
> 
> 赞同：1
> 
> 时间：2012-07-02T11:06:24.330
> 
> 标签：jquery, colors, jquery-animate, block

我有一个色块，每次按下它我都希望它缩小。

```
$('#blue').click(function(){
    $(this).animate({width: '90%'},1000);
}); 
```

但它在右边。如何让它在左侧缩小？

CSS：

```
#blue{
height:250px;
width:500px;
background-color:blue; 
```

}

html:

```
<div id='blue'></div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T11:10:31.710

您可以`float: right`在`#blue`父元素中使用元素（如果需要，您可能希望在其上应用某种浮动清除）。

或者只是将`position: absolute`和分配`right : 0;`给`#blue`元素，在父级内部`position: relative;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T11:14:59.477

利用

```
#blue {
float: right;
} 
```

或更改父级的 CSS 和 #blue

```
#blue's_parent {
text-align: right;

}

#blue {
display: inline-block;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T11:55:52.993

试试下面的代码

```
<div id='blue'>
</div>

#blue{
  height:250px;
  width:500px;
  background-color:blue;

}

$('#blue').click(function() {
$(this).animate({
    "width": "-=50px"

}, 1000); 
```

});

[在 Bin http://codebins.com/codes/home/4ldqpca](http://codebins.com/codes/home/4ldqpca)上试试这个

# java - 解密不正确

> ID：11292413
> 
> 赞同：0
> 
> 时间：2012-07-02T11:06:28.483
> 
> 标签：java, encryption

我将一个 XML 文件作为字节数组导入到项目中

```
RandomAccessFile rnd = new RandomAccessFile(filePath, "r");
byte[] fileData = new byte[(int) rnd.length()];
rnd.read(fileData); 
```

我使用 java.crypto 加密了数组

```
Cipher cipher = Cipher.getInstance("DESede/CBC/PKCS5Padding");

byte[] encypted = new byte[cipher.getOutputSize(fileData.length)];
int len = cipher.update(fileData, 0, fileData.length, encypted, 0);
len += cipher.doFinal(encypted, len); 
```

当我解密字节数组并使用打印它时

```
System.out.println(new String(decrypted, "UTF-8")); 
```

我得到了 XML 文件，但最后有一些未知字符（它们只在最后）。有什么办法可以删除这个吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:10:41.130

[在这里](https://stackoverflow.com/questions/9000999/decrypt-aes-encrypted-file-in-java)看到一个类似的问题，但答案可能与您的情况非常相关：

> 1.如果您不知道使用什么填充进行加密，则使用“无填充”设置解密。这将解密所有内容，包括填充，并且不会因为填充不匹配而引发错误。
> 
> 2.解密密文后，查看输出的最后一个块，看看使用了哪些填充。不同的填充会留下不同的字节模式，因此通常很容易分辨。
> 
> 3.将您的解密方法设置为期望正确的填充类型，它将自动为您删除。

如果这与您相关，这里有一个关于填充模式等的链接：[Padding Wikipedia](http://en.wikipedia.org/wiki/Padding_%28cryptography%29.)

这在这里也是一个非常好的使用 DES 加密的教程：[http](http://www.exampledepot.com/egs/javax.crypto/desstring.html) ://www.exampledepot.com/egs/javax.crypto/desstring.html这里是 DES 中的 PBE： [PBE with HMAC(SHA1) and DES( EDE)](http://www.rsa.com/products/bsafe/documentation/cryptoj35html/doc/dev_guide/group__CJ__SAMPLES__PBEH.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T00:43:31.113

有很多缺失的代码可能很重要。我注意到的一件事是，您在没有指定任何字符编码的情况下读取数据，然后在解密时使用 UTF-8 解码器创建字符串。仅当原始 XML 文件是 UTF-8 编码时才有意义，这是完全可能的。此外，`RandomAccessFile.read()`返回一个包含实际读取的字节数的 int。您应该使用该数字，而不是假设读入整个数组。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-04T04:56:27.270

我改变了填充，它工作。

```
cipher = Cipher.getInstance("DESede/CFB8/NoPadding"); 
```

# unix - grep -f 只返回第一个匹配（许多）

> ID：11292414
> 
> 赞同：3
> 
> 时间：2012-07-02T11:06:32.737
> 
> 标签：unix, command-line, grep

尝试从命令行中获得更多信息：

我有一个文件：

```
CHR25   1192279 Y       Exonic  NA      exon    2       [1/1]   1192145 1192322
CHR25   1192279 Y       Exonic  NA      CDS     2       [1/1]   1192145 1192322  
CHR25   1739394 Y       Exonic  NA      CDS     2       [1/2]   1739294 1739456 
```

我想根据第 2 列获得唯一的行。我已经完成了

```
cat file | cut -f 2 | uniq > grepfile 
```

但我不确定现在如何`grep -f`像以前一样使用每行匹配一个。使用`-m1 or | head -n 1`仅给出第一个匹配行。我希望第一行匹配“grepfile”中的每一行。

期待答案=）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T11:29:06.687

这个 awk 命令通过构建一个已经见过的第二字段值的关联数组来工作。

```
awk '!s[$2]++' 
```

关联数组称为`s`。该表达式查找 $2（输入行的第二列）并应用一个后增量，它将在第一次调用时返回 0，此后返回非零。然后我反转它，第一次看到每 2 美元时产生 1，之后每次都产生 0。如果选择表达式为真，则 awk 的默认操作是打印。

只需注意行数何时足够大以再次回绕到 0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T11:46:08.927

这也可以：

```
sort -u  -k2,2 file 
```

给予：

```
CHR25   1192279 Y       Exonic  NA      exon    2       [1/1]   1192145 1192322
CHR25   1739394 Y       Exonic  NA      CDS     2       [1/2]   1739294 1739456 
```

`-u`调用`uniq`,`-k2,2`表示对字段 2（且仅字段 2）进行排序，如排序[手册页](http://linux.die.net/man/1/sort)所示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T11:17:04.997

如果 Perl 没问题，你可以这样做：

```
perl -nale '$h{$F[1]}=$_ if(!$h{$F[1]});END{print $h{$_}for(keys(%h));}' file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T11:57:38.783

因为 uniq 只看相邻的行，而 sort 改变了顺序。你需要更多的代码。

```
cat -n input-file | sort --key=3,3 --unique | sort | cut -f2- >output-file 
```

1.  `cat -n`添加序列号。
2.  `sort --key=3,3 --unique`删除字段 2 上的重复项。注意：键号高一，因为`cat -n`.
3.  `sort`放回原来的顺序。
4.  `cut -f2-`获取序列号的钻机。

# android - 如何将pdf转换为图像？

> ID：11292417
> 
> 赞同：9
> 
> 时间：2012-07-02T11:06:50.817
> 
> 标签：android, pdf, image-conversion

使用 pdfbox 显示错误：

```
import java.awt
import javax` 
```

基于以下代码：

```
imageType = BufferedImage.TYPE_INT_ARGB; //need to specifies java.awt
String[] formats = ImageIO.getReaderFormatNames(); //need to specifies javax 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T13:08:51.743

最后我找到了解决方案。我们不能在 Android 上使用 awt，所以，最后去[http://sourceforge.net/projects/andpdf/files/上的 pdf 查看器库](http://sourceforge.net/projects/andpdf/files/)

找出apk以及pdf到图像的来源。

这是将pdf转换为图像的myclass：

```
package com.print;

import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.RandomAccessFile;
import java.nio.channels.FileChannel;

import net.sf.andpdf.nio.ByteBuffer;
import net.sf.andpdf.refs.HardReference;
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.RectF;
import android.os.Bundle;
import android.os.Environment;
import android.os.Handler;
import android.util.Log;
import android.widget.ImageView;
import android.widget.TextView;

import com.sun.pdfview.PDFFile;
import com.sun.pdfview.PDFImage;
import com.sun.pdfview.PDFPage;
import com.sun.pdfview.PDFPaint;
import com.sun.pdfview.decrypt.PDFAuthenticationFailureException;
import com.sun.pdfview.font.PDFFont;

public class Transformer  extends Activity{
    /////////////////////////////////////////////
    private static final int STARTPAGE = 1;
    private static final float STARTZOOM = 1.0f;

    private static final String TAG = "PDFVIEWER";
    Bitmap _bitmap=null;

//  private GraphView mGraphView;
    private String pdffilename;
    private PDFFile mPdfFile;
    private int mPage;
    private float mZoom;
    private File mTmpFile;

    private PDFPage mPdfPage; 

    private Thread backgroundThread;
   private Handler uiHandler;

    ImageView myimg;
    TextView command;
    Context context;
    ProgressDialog _p=null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.trans);
        context=Transformer.this;
          uiHandler = new Handler();
        initContrils();
    }

    private void initContrils() {
        // TODO Auto-generated method stub
         boolean showImages = getIntent().getBooleanExtra(printDemo.EXTRA_SHOWIMAGES, true);
            PDFImage.sShowImages = showImages;
            boolean antiAlias = getIntent().getBooleanExtra(printDemo.EXTRA_ANTIALIAS, true);
            PDFPaint.s_doAntiAlias = antiAlias;
            boolean useFontSubstitution = getIntent().getBooleanExtra(printDemo.EXTRA_USEFONTSUBSTITUTION, false);
            PDFFont.sUseFontSubstitution= useFontSubstitution;
            boolean keepCaches = getIntent().getBooleanExtra(printDemo.EXTRA_KEEPCACHES, false);
            HardReference.sKeepCaches= keepCaches;

            if (this.getIntent() != null) {
                pdffilename = getIntent().getStringExtra(printDemo.EXTRA_PDFFILENAME);
        }
        mPage = STARTPAGE;
        mZoom = STARTZOOM;
        myimg=(ImageView)findViewById(R.id.imageView1);
        command=(TextView)findViewById(R.id.textView1);
        _p=new ProgressDialog(context);
        _p.setMessage("Converting........");
        _p.setCancelable(false);
        _p.show();
        setContent();
    }

    private void setContent() {
        try { 
            parsePDF(pdffilename);
            startRenderThread(mPage, mZoom);

        }
        catch (PDFAuthenticationFailureException e) {
            Log.e("Amit...","Error....");
        }
    }
    private synchronized void startRenderThread(final int page, final float zoom) {
          Log.e("Amit","renderrar");
        if (backgroundThread != null)
            return;
        backgroundThread = new Thread(new Runnable() {
            @Override
            public void run() {
                try {
                    if (mPdfFile != null) {

                        showPage(page, zoom);
                    }
                } catch (Exception e) {
                    Log.e(TAG, e.getMessage(), e);
                }
                backgroundThread = null;
            }
        });
        updateImageStatus();
        backgroundThread.start();

    }

    private void updateImageStatus() {
        if (backgroundThread == null) {
            updateTexts();
            return;
        }

        uiHandler.postDelayed(new Runnable() {
            @Override public void run() {
                updateImageStatus();
            }
        }, 1000);
    }

/*
        private void setPageBitmap(Bitmap bi) {
            if (bi != null)
                _bitmap = bi;
            else {
                _bitmap = Bitmap.createBitmap(100, 100, Config.RGB_565);
                Canvas can = new Canvas(_bitmap);
                can.drawColor(Color.RED);

                Paint paint = new Paint();
                paint.setColor(Color.BLUE);
                can.drawCircle(50, 50, 50, paint);

                paint.setStrokeWidth(0);
                paint.setColor(Color.BLACK);
                can.drawText("Bitmap", 10, 50, paint);
            }
        }*/

        protected void updateTexts() {
            int maxCmds = PDFPage.getParsedCommands();
            int curCmd = PDFPage.getLastRenderedCommand()+1;
            if(maxCmds==curCmd){

                    _p.dismiss();
                    finish();

                Log.e("Amit","check update_finish()");
            }else {
                setContent();
                Log.e("Amit","check update_again");

            }

     }

        private Bitmap showPage(int page, float zoom) throws Exception {
            Bitmap b=null;
            try {
                Log.e("amit","Go to page bitmap");
                mPdfPage = mPdfFile.getPage(page, true);
                float wi = mPdfPage.getWidth();
                float hei = mPdfPage.getHeight();

                RectF clip = null;

                Bitmap bi = mPdfPage.getImage((int)(wi*zoom), (int)(hei*zoom), clip, true, true);
                b=bi;

                ByteArrayOutputStream bytes = new ByteArrayOutputStream();
                b.compress(Bitmap.CompressFormat.JPEG, 90, bytes);
                File f = new File(Environment.getExternalStorageDirectory()+ File.separator + "Firstpdf.jpg");
                f.createNewFile();
                FileOutputStream fo = new FileOutputStream(f);
                fo.write(bytes.toByteArray());
                Log.e("amit","Go to page bitmap______SAVE");

            } catch (Throwable e) {
                Log.e(TAG, e.getMessage(), e);

            }

            return b;
        }

        private void parsePDF(String filename) throws PDFAuthenticationFailureException {

            try {
                File f = new File(filename);
                long len = f.length();
                if (len == 0) {
                    Log.e("amit","No file found");
                }
                else {
                    Log.e("amit","file '" + filename + "' has " + len + " bytes");
                    openFile(f);
                }
            }
            catch (PDFAuthenticationFailureException e) {
                throw e; 
            } catch (Throwable e) {
                e.printStackTrace();

            }

        }

        /**
         * <p>Open a specific pdf file.  Creates a DocumentInfo from the file,
         * and opens that.</p>
         *
         * <p><b>Note:</b> Mapping the file locks the file until the PDFFile
         * is closed.</p>
         *
         * @param file the file to open
         * @throws IOException
         */
        public void openFile(File file) throws IOException {
            // first open the file for random access
            RandomAccessFile raf = new RandomAccessFile(file, "r");

            // extract a file channel
            FileChannel channel = raf.getChannel();

            // now memory-map a byte-buffer
            ByteBuffer bb =
                    ByteBuffer.NEW(channel.map(FileChannel.MapMode.READ_ONLY, 0, channel.size()));
            // create a PDFFile from the data

                mPdfFile = new PDFFile(bb);

           Log.e("Amit","Pages-----"+mPdfFile.getNumPages());
        }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-14T10:21:12.450

浪费了几天时间搜索适用于 Android 的 LGPL PDF 库。[API 级别 21 中引入的PdfRenderer](https://developer.android.com/reference/android/graphics/pdf/PdfRenderer.html)是 PDF 转图像的最佳解决方案。

示例代码：

```
 // create a new renderer
 PdfRenderer renderer = new PdfRenderer(getSeekableFileDescriptor());

 // let us just render all pages
 final int pageCount = renderer.getPageCount();
 for (int i = 0; i < pageCount; i++) {
     Page page = renderer.openPage(i);

     // say we render for showing on the screen
     page.render(mBitmap, null, null, Page.RENDER_MODE_FOR_DISPLAY);

     // do stuff with the bitmap

     // close the page
     page.close();
 }
 // close the renderer
 renderer.close();

    private ParcelFileDescriptor getSeekableFileDescriptor()
    {
        ParcelFileDescriptor fd = null;
        try
        {
            fd = ParcelFileDescriptor.open(new File("PATH TO YOUR PDF"),
                    ParcelFileDescriptor.MODE_READ_ONLY);
        }
        catch (FileNotFoundException e)
        {
            e.printStackTrace();
        }
        return fd;
    } 
```

希望这可以帮助某人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-24T21:49:50.420

查看这个库[https://github.com/barteksc/AndroidPdfViewer](https://github.com/barteksc/AndroidPdfViewer) 经过几周的搜索，这是我发现的唯一一个库：

*   支持 Android API 14（可能更低，但我还没有测试过）。
*   使用符合我需要的许可证（Apache 许可证 2.0）。
*   实际上加载 PDF 而不会引发错误。

# objective-c - Facebook SDK IOS登录问题

> ID：11292418
> 
> 赞同：1
> 
> 时间：2012-07-02T11:07:14.693
> 
> 标签：objective-c, ios, facebook

我已按照说明从我的应用程序实现登录到 Facebook 的过程：

[https://developers.facebook.com/docs/mobile/ios/build/#implementsso](https://developers.facebook.com/docs/mobile/ios/build/#implementsso)

这是我的代码：

```
- (IBAction)facebookButton:(id)sender {

    facebook = [[Facebook alloc] initWithAppId:@"383032031757454" andDelegate:self];

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if ([defaults objectForKey:@"FBAccessTokenKey"] 
        && [defaults objectForKey:@"FBExpirationDateKey"]) {
        facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
        facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
    }

    if (![facebook isSessionValid]) {
        NSArray *permissions = [[NSArray alloc] initWithObjects:
                                @"user_likes", 
                                @"read_stream",
                                nil];
        [facebook authorize:permissions];
        permissions=nil;
    }    
}

- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
    return [facebook handleOpenURL:url]; 
}

- (void)fbDidLogin {
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:[facebook accessToken] forKey:@"FBAccessTokenKey"];
    [defaults setObject:[facebook expirationDate] forKey:@"FBExpirationDateKey"];
    [defaults synchronize];

} 
```

登录并允许应用程序权限后，Safari 仍处于打开状态，我必须手动返回我的应用程序，但 SDK 提供的示例应用程序“Hackbook”在接受权限并在 Safari 中登录后，它会关闭 Safari 并返回到应用程序。我也想做同样的事，但我没有成功。

这是 .plist 文件：

![在此处输入图像描述](../Images/cc11920ad78f17b1fc35855b8e30e752.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:24:46.800

您是否在`info.plist`iOS 应用程序的文件中设置了您的 Facebook 应用程序 ID？

类似的案例在[这个链接](https://stackoverflow.com/questions/10625210/native-ios-facebook-sso-wont-return-to-app)和[这个链接](https://stackoverflow.com/questions/7666684/facebook-ios-sdk-not-returning-to-my-app)。希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:36:58.393

您可以通过深入挖掘一下轻松确定它为什么不起作用`Facebook.m`。检查中的方法`handleOpenURL:`。`Facebook.m`

```
 // Facebook.m
- (BOOL)handleOpenURL:(NSURL *)url {
    // If the URL's structure doesn't match the structure used for Facebook authorization, abort.
    if (![[url absoluteString] hasPrefix:[self getOwnBaseUrl]]) {
        return NO;
    }

    NSString *query = [url fragment];

    // Version 3.2.3 of the Facebook app encodes the parameters in the query but
    // version 3.3 and above encode the parameters in the fragment. To support
    // both versions of the Facebook app, we try to parse the query if
    // the fragment is missing.
    if (!query) {
        query = [url query];
    }

    NSDictionary *params = [self parseURLParams:query]; 
```

在下面设置一个断点`NSDictionary *params = [self parseURLParams:query];`并读取它的内容。您应该会看到为什么登录失败的错误消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T12:15:30.577

在应用程序 Facebook 页面上，您是否为 iOS SSO 配置了应用程序？

您使用的是什么操作系统？您的代码仅适用于 4.2+

您没有完全按照说明进行操作，您的 plist 文件略有错误（我认为这不是问题）。

# joomla - 首先在 joomla 中读取 index.html 文件

> ID：11292421
> 
> 赞同：1
> 
> 时间：2012-07-02T11:07:18.010
> 
> 标签：joomla, joomla2.5, joomla-template

我在 joomla 中有一个没有 index.php 的模板我只有 index.html、css 文件、javascript 文件和 tempalteDetails

如何更改 joomla 配置以查看 index.html 文件拳头到 index.php？

我做了一个测试并创建了 index.php 文件，是的，joomla 读取了这个文件，因为现在它向我显示了一个白页。

我更改了我的 htaccess.html 文件...我先写了这个

DirectoryIndex index.html index.php 和第二个扩展名.. 第一个 htaccess.html 现在是 .htaccess

但我有同样的问题，我没有看到 index.html。

任何的想法！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:46:43.620

我不确定你下载的是什么模板，但我可以肯定地告诉你，开发人员一定不知道他们在做什么。`.html`文件仅用于 Joomla 中的安全性，它们不用于模板结构。我不会回答你的问题，而是说，找到一个新模板。

# android - 如何制作在 GSM 和 CDMA 设备上运行的 Android 应用程序？

> ID：11292424
> 
> 赞同：0
> 
> 时间：2012-07-02T11:07:25.670
> 
> 标签：android

我有一个 android facebook 应用程序，它在我的 GSM 上运行良好。但是当我在 CDMA 设备上运行相同的 apk 时，它甚至没有登录。我需要用那个 apk 文件注册任何东西才能在 CDMA 上运行它吗设备？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:14:15.833

如果您只需要使用设备的核心网络功能，则设备使用的无线电并不重要。

该应用程序无法在 CDMA 上运行的事实是巧合，真正的问题是其他问题，可能与手机本身的问题有关。它是什么设备，这是您自己的应用程序，是堆栈跟踪还是显示连接失败的日志？

# c# - 使用 C# 反透视数据集

> ID：11292426
> 
> 赞同：3
> 
> 时间：2012-07-02T11:07:31.350
> 
> 标签：c#, asp.net, dataset, unpivot

如何使用 C# 作为 SQL 中的 unpivot 将数据集列转换为行。我找到了一种将行转换为列的方法。[C# 行到列](http://www.tek-tips.com/viewthread.cfm?qid=1598754)。`DataTable`将列转换为行的任何想法？谢谢 ..

我在下面提到的 Ivan 代码

```
OracleDatabase database = null;               
DbCommand command = null;
 protected void Button1_Click(object sender, EventArgs e)
        {
            database = new OracleDatabase("Connection String");
            command = database.GetSqlStringCommand("select avg(PRMTN_PRDCT_GROUP_SK),avg(STORE_CLSTR_SK) from ALG_AVERAGE_BASELINE_SALE");
            DataSet ds = new DataSet();
            ds = database.ExecuteDataSet(command);               
            DataTable dt = new DataTable();
            dt = ds.Tables[0];
            dt.Columns.AddRange(new DataColumn[] { 
               new DataColumn("col1"), 
               new DataColumn("col2") });
            foreach (DataRow row in dt.Rows)
            {
                foreach (var column in row.ItemArray)
                    Response.Write(column);                    
            }
            Response.Write("\n");
            var result = dt.Columns
                          .Cast<DataColumn>()
                          .Select(column =>
                             dt.AsEnumerable()
                               .Select(row =>
                                  row.ItemArray[column.Ordinal].ToString()));
            Response.Write("\n");
            foreach (var row in result)
            {
                foreach (var column in row)
                    Response.Write(column);
                Response.Write("\n");
            }                  
        } 
```

它在控制台中运行良好。但是这些行在我的 Web 应用程序中并没有旋转。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T21:53:25.850

## [用于取消透视数据表的Linqpad](http://www.linqpad.net)演示

据我了解，您希望将行放入列中。下面的示例适用于 3 行（标题 + 2 数据行）。

![反透视数据表](../Images/539a7291bb07a7b727bd80fe5b2bc20a.png)

如果您有更多行，则必须更改该部分`dt2.Rows.Add(columnNames[i], dt.Rows[0].ItemArray[i],dt.Rows[1].ItemArray[i]);`以使其与行数匹配。对于很多行，这个灵魂必须得到改进。

```
void Main() {
    var dt = GetDataTable("Sales");
    dt.Dump();
    UnpivotDataTable(dt).Dump();
}

public DataTable GetDataTable(string name) {
    var dt = new DataTable(name);   
    dt.Columns.Add("Id", typeof(string)); // dt.Columns.Add("Id", typeof(int)); 
    dt.Columns.Add("Apartement", typeof(string));   
    dt.Columns.Add("Monday", typeof(int));
    dt.Columns.Add("Tuesday", typeof(int));
    dt.Columns.Add("Wednesday", typeof(int));
    dt.Columns.Add("Thursday", typeof(int));
    dt.Columns.Add("Friday", typeof(int));      
    dt.Rows.Add(1, "Food", 300, 270, 310, 280, 500);
    dt.Rows.Add(2, "Electronics", 600, 470, 410, 380, 1500);    
    return dt;
}

public DataTable UnpivotDataTable(DataTable dt){
    string[] columnNames = dt.Columns.Cast<DataColumn>().Select(x => x.ColumnName).ToArray();           
    var dt2 = new DataTable("unpivot"); 
    dt2.Columns.Add("Headers", typeof(string)); 
    for(int rowIndex = 0; rowIndex < dt.Rows.Count; rowIndex++){
        dt2.Columns.Add("Row" + rowIndex.ToString(), typeof(string)); 
    }

    for(int i=0; i < columnNames.Length; i++){
        // flaw: hardcoded is the amount of rows that are unpivoted
        dt2.Rows.Add(columnNames[i], dt.Rows[0].ItemArray[i],dt.Rows[1].ItemArray[i]);
    }
    return dt2;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-03T14:42:54.623

surfmuggle 的答案就是我所说的“转置”表格（切换列和行）。在 excel 中，当您透视数据时，您通过另一列（公寓/部门）的属性聚合（总和/分钟/平均/等）一列（在他的示例中为费用或销售额）的值。您可以按另一列（星期几）进一步细分费用。

因此，当我想“取消透视”数据时，我想回到那些看起来重复的原始数据，以便我可以以其他方式重新透视它，通常是先过滤它，这样我的列中就没有那么多列了新的透视表。

这就是我希望 surfmuggle 的数据变成的内容：

[![在此处输入图像描述](../Images/53d8c7bfee3675828d3920665163d7d2.png)](https://i.stack.imgur.com/qMCnb.png)

这是我的 C# 代码，用于将他的原始数据表转换为我想要的数据格式：

```
public static DataTable UnpivotDataTable(DataTable pivoted)
{
    string[] columnNames = pivoted.Columns.Cast<DataColumn>()
        .Select(x => x.ColumnName)
        .ToArray();

    var unpivoted = new DataTable("unpivot");
    unpivoted.Columns.Add(pivoted.Columns[0].ColumnName, pivoted.Columns[0].DataType);
    unpivoted.Columns.Add("Attribute", typeof(string));
    unpivoted.Columns.Add("Value", typeof(string));

    for (int r = 0; r < pivoted.Rows.Count; r++)
    {
        for (int c = 1; c < columnNames.Length; c++)
        {
            var value = pivoted.Rows[r][c]?.ToString();
            if (!string.IsNullOrWhiteSpace(value))
            {
                unpivoted.Rows.Add(pivoted.Rows[r][0], columnNames[c], value);
            }
        }
    }

    return unpivoted;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T12:10:23.763

尝试以下代码创建一个数据表，然后在其中填充数据。

```
 public DataTable getdatw()
{

    DataTable dtExcel = new DataTable();
    dtExcel.Columns.Add("Id", typeof(Int32));
    dtExcel.Columns.Add("Name", typeof(String));
    DataRow row;
    row = dtExcel.NewRow();
    row["Id"] = "1";
    row["Name"] = "kamal";
    dtExcel.Rows.Add(row);
    return dtExcel;
} 
```

还有一件事，数据可以用多种方式填充，这取决于我们的要求，例如，您想从数组、集合等中填充。

# jquery - HTML 表单不会在 IE9 中验证

> ID：11292429
> 
> 赞同：0
> 
> 时间：2012-07-02T11:07:41.063
> 
> 标签：jquery, html

这是一个简单的 HTML 表单，可以在 Firefox 和 Chrome 上正常工作和验证，但在 IE9 上却不行。在 IE 上，当您重复按下提交按钮而不输入任何内容时，验证消息会重复打印在屏幕上。

当我将 IE 切换到兼容模式时，没有打印验证消息，也没有任何反应:(

这是HTML代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="description" content="" />

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="jquery.validate.js"></script>
<script type="text/javascript">

</script>
  <script type="text/javascript" charset="utf-8">
        $(document).ready(function() {         

             $("#contactform").validate({
                rules: {
                firstname   : "required",
                surname     : "required", 
                emessage    : "required",
                pcode1      : "required",               
                phone       : "required",
                cname       : "required",

              email: {                // compound rule
                        required: true,
                        email: true
                    }            
             },
                messages: {             
                   firstname : " *Required",                
                   surname   : " *Required",    
                   email     : " *Required",
                   emessage  : " *Required",    
                   pcode1    : " *Required",
                   phone     : " *Required",
                   cname     : " *Required",
              }
            });                             

        });     

    </script>
<title>Example</title>

</head>
<body>

<p>
<form id="contactform" method="post" action="email.php" class="form">
      <table>
       <tr>
           <td>
                Name*
           </td>
           <td>
                <input type="text" name="firstname" id="firstname">
           </td>
       </tr>
       <tr>
           <td>
                Surname*
           </td>
           <td>
                <input type="text" name="surname" id="surname">
           </td>
       </tr>
       <tr>
           <td>
                Company name*
           </td>
           <td>
                <input type="text" name="cname" id="cname">
           </td>
       </tr>
       <tr>
           <td>
                Email*
           </td>
           <td>
                <input type="text" name="email" id="email">
           </td>
       </tr>

       <tr>
           <td>
                Telephone*
           </td>
           <td>
                <input type="text" name="phone" id="phone">
           </td>
       </tr>

       <tr>
           <td>
                Postcode*
           </td>
           <td>
                <input type="text" name="pcode1" id="pcode1" size="" maxlength="8">
           </td>
       </tr>

       <tr>
           <td>
                Message*
           </td>

           <td>
                 <textarea id="emassage" name="emessage" cols="67" rows="6"></textarea>
           </td>
       </tr>

        <tr>
           <td>
                <button name="submit" id="submit" class="shiny-blue">Submit</button>

           </td>

           <td>

           </td>
       </tr>
    </table>
    </form>
</p>

</div> 
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-12T22:13:23.653

根据[caniuse](http://caniuse.com/#feat=form-validation)的说法，IE9 不支持 HTML 表单验证。

# php - 使用 PHP 输入框值设置 Mysql 列的默认值

> ID：11292431
> 
> 赞同：0
> 
> 时间：2012-07-02T11:08:03.937
> 
> 标签：php, mysql

我对 PHP 和 MySql 很陌生。有没有什么方法可以使用 PHP 脚本通过输入框取值，我们可以使用具有该值的更新查询来设置列的默认值，而不是更改表函数？

**更新1：**

我希望通过表单发送的任何值成为该列的默认值。将有一些其他列的值应更改而不设置为默认值，而其他默认值应出现在输入框中以供进一步更新。

例如，有 3 列：`A`、`B`、`C`。列有价值`A`。`currdate`B 和 C 列是一些整数值。假设用户打开表单，他看到 currdate 是`02-07-2012`A 列。然后他输入一些值：B = 5，C = 6。第二天当用户打开表单时，currdate 将变为 03-07-2012 . 同时 和 的值`B`会`C`自动从`null`5 和 6 变为 5 和 6，前一行的值与默认值相同。

那么是否有可能每一个新行都将以前从表单输入的值作为mysql表中设置的列的默认值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:26:17.313

据我了解，您有更新 MySQL 表的输入字段。并且您在数据库中有一些信息将被更新。未填充的字段在mysql中没有更新，所以它不会空行？如果是这样，您可以从数据库中获取数据，然后在提交表单后，检查字段是否为空，如果字段为空，则添加从数据库获取的字段值。

```
<?php
$sql = "SELECT * FROM users WHERE id = 1";
$result = $dbh->query($sql);
$data = $result->fetch_assoc();
?>
<form action="#" method="post" id="form">
<input type="text" id="name" class="aa"/>
<input type="text" id="email" class="aa"/>
<input type="button" id="subm" value="Update" />
</form>
<script>
$(document).ready(function () {
    $("#subm").click(function () {
        $(".aa").each(function () {
            var value = $(this).val();
            if (value == "") {
                var id = $(this).attr("id");
                $("#"+id).attr("value", "<?=$data['"+id+"']?>");
            }
        });
        $("#form").submit();
    });
});
</script> 
```

我不记得如何通过每个输入，所以我添加了类，这不好。在 google 中搜索 - 输入字段 jquery 的每个循环。

# android - Android 4.x+ 中的 Nfc 切换？

> ID：11292435
> 
> 赞同：0
> 
> 时间：2012-07-02T11:08:19.957
> 
> 标签：android, toggle, nfc

我知道可以通过编程方式在 Gingerbread 中禁用 NFC，但是有没有人设法创建一个解决方法来为 ICS 及更高版本实现相同的功能？

如果它涉及更改操作系统的源代码，我也可以，如果有人冒险这样做:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:36:15.157

从 Gingerbread 2.3.5 开始，应用需要特殊权限`"android.permission.WRITE_SECURE_SETTINGS"`才能更改 NFC 的状态。通常，只有由 Google 签名的应用程序才能拥有此权限，但我假设如果您根设备，您可以通过将您的应用程序添加到系统映像或将您的签名密钥添加到存储在某处的某个列表中来规避这一点。这个答案似乎也很相关：[https ://stackoverflow.com/a/3477237/1202968](https://stackoverflow.com/a/3477237/1202968)

# actionscript-3 - 使用 ActionScript 3 动态创建的多个形状

> ID：11292436
> 
> 赞同：1
> 
> 时间：2012-07-02T11:08:20.197
> 
> 标签：actionscript-3, flash, actionscript

我正在尝试在 AS 中动态创建动画。我想创建多个形状，这些形状将一一设置动画。因此，首先，从 dot1 创建一个形状并为其设置动画。之后，应制作第二个形状并将动画设置为 dot2。数字数组保存点的位置。我使用 drawLine 函数画线。在此之前，我设置了 10 个点。在字符串 fullDate 中，我保存点列表。此代码的结果只是第一个动画。我认为该代码不会生成很好的新形状，因此动画会在第一个动画之后完成。有谁知道如何解决这个问题？提前致谢！

```
 import flash.display.Shape;

var startPoint:Point = new Point();
var endPoint:Point = new Point();

var prog:Number = 0;
var bonus:Number = 1;
var frames:int = 150;

var numbers:Array = new Array();

numbers[0] = new Array();
numbers[0][0] = 460;
numbers[0][1] = 100;

numbers[1] = new Array();
numbers[1][0] = 10;
numbers[1][1] = 20;

numbers[2] = new Array();
numbers[2][0] = 10;
numbers[2][1] = 100;

numbers[3] = new Array();
numbers[3][0] = 10;
numbers[3][1] = 180;

numbers[4] = new Array();
numbers[4][0] = 160;
numbers[4][1] = 20;

numbers[5] = new Array();
numbers[5][0] = 160;
numbers[5][1] = 100;

numbers[6] = new Array();
numbers[6][0] = 160;
numbers[6][1] = 180;

numbers[7] = new Array();
numbers[7][0] = 310;
numbers[7][1] = 20;

numbers[8] = new Array();
numbers[8][0] = 310;
numbers[8][1] = 100;

numbers[9] = new Array();
numbers[9][0] = 310;
numbers[9][1] = 180;

var fullDate:String = "271524";

var i:Number;
var pom:Number;
var shapes:Vector.<Shape> = new Vector.<Shape>();
for (i=0; i < fullDate.length; i++){

    pom = int(fullDate.charAt(i));
    shapes[i] = new Shape();
    addChild(shapes[i]);

    trace(numbers[pom+1][0]);
    drawLine(numbers[pom][0], numbers[pom][1], numbers[pom+1][0], numbers[pom+1][1], 120);
}

function drawLine(startX:Number, startY:Number, endX:Number, endY:Number, time:Number = 120):void {
    startPoint.x = startX;
    startPoint.y = startY;
    endPoint.x = endX;
    endPoint.y = endY;

    frames = time;
    prog = 0;
    this.addEventListener(Event.ENTER_FRAME, tick);
}

function drawLineTick(progress:Number):void{
    for each(var shape:Shape in shapes)
    {
        shape.graphics.clear();
        shape.graphics.lineStyle(14,0x2dfdfd);

        shape.graphics.moveTo(startPoint.x,startPoint.y);
        shape.graphics.lineTo(startPoint.x + ((endPoint.x - startPoint.x) * progress), startPoint.y + ((endPoint.y - startPoint.y) * progress));

    }

}

function tick(e:Event):void {
    if(prog >= frames){
        this.removeEventListener(Event.ENTER_FRAME, tick);
    }

    drawLineTick(prog / frames);    
    prog += bonus;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T13:16:17.590

由于 ActionScript 的异步特性，在执行`drawLine`第一个形状之前，会在每个形状上调用该方法`tick`。然后，该`drawTickLine`方法使用与您创建的每个形状中日期的最后一部分相关的点绘制（相同的）线。

以下内容可能并不完美，因为您的问题并不是 100% 清楚结果应该是什么，但希望它可以推动您朝着正确的方向前进。我试图加入评论来解释我的想法。

```
import flash.display.Shape;
import flash.geom.Point;
import flash.events.Event;

var startPoint:Point = new Point();
var endPoint:Point = new Point();

var count:int = 0;
var prog:Number = 0;
var bonus:Number = 1;
var frames:int = 150;

// Pushing a bunch of point objects onto the array is a neater
// method than using a multi-dimensional array. If you want the clarity of the 
// index to help with debugging you could also do this: 
// numbers[0] = new Point(460, 100);
var numbers:Array = [];
numbers.push(new Point(460, 100));
numbers.push(new Point(10, 20));
numbers.push(new Point(10, 100));
numbers.push(new Point(10, 180));
numbers.push(new Point(160, 20));
numbers.push(new Point(160, 100));
numbers.push(new Point(160, 180));
numbers.push(new Point(310, 20));
numbers.push(new Point(310, 100));
numbers.push(new Point(310, 180));

var fullDate:String = "271524";

// Vector for shapes seems overkill unless you need to loop over 
// your shapes again later. For now, we store a reference to the 
// current shape only
var shape:Shape; 

// Set up the first line
drawLine();

// Probably easier to run a single enter frame for the duration of the whole animation
this.addEventListener(Event.ENTER_FRAME, tick);

function drawLine(time:Number = 120):void {

    // Get the appropriate index for start and end points in the numbers array
    var startIndex:int = int(fullDate.charAt(count));
    var endIndex:int = int(fullDate.charAt(count + 1));

    startPoint = Point(numbers[startIndex]);
    endPoint = Point(numbers[endIndex]);    

    // create a new shape and add it to stage
    shape = new Shape();
    this.addChild(shape);

    frames = time;
    prog = 0;
}

function drawLineTick(progress:Number):void{
    shape.graphics.clear();
    shape.graphics.lineStyle(14,0x2dfdfd);

    shape.graphics.moveTo(startPoint.x,startPoint.y);
    shape.graphics.lineTo(startPoint.x + ((endPoint.x - startPoint.x) * progress), startPoint.y + ((endPoint.y - startPoint.y) * progress));
}

function tick(e:Event):void {
    drawLineTick(prog / frames);    
    prog += bonus;

    // Finished drawing a shape
    if(prog >= frames){
        // Increment count, reset progress and set up the next line
        count ++;
        prog = 0;
        drawLine();
    }

    // Finished drawing all shapes
    if (count == fullDate.length + 1) {
        // Good practice to remove the eventlistener when finished
        this.removeEventListener(Event.ENTER_FRAME, tick);
    }
} 
```

# symfony - 认证ajax FOSUserBundle

> ID：11292438
> 
> 赞同：1
> 
> 时间：2012-07-02T11:08:27.297
> 
> 标签：symfony, fosuserbundle

> **可能重复：**
> [Symfony2 AJAX 登录](https://stackoverflow.com/questions/8607212/symfony2-ajax-login)

我安装了 FOSUserBundle，没关系。

我想使用 ajax 进行身份验证，我的问题是：是否有教程逐步显示此解决方案？

因为我找到了一些没有明确的解决方案。

# android - Android：在 SPP 蓝牙设备之间切换

> ID：11292441
> 
> 赞同：2
> 
> 时间：2012-07-02T11:08:33.050
> 
> 标签：android, bluetooth, spp

我有两个不同的蓝牙打印机。Bixolon SPP-R200 和富士通 FTP-628WSL110。我可以分别连接到它们（使用三星 Galaxy SII）打印、断开连接和重新连接就好了。但是，如果我关闭 Bixolon 并尝试与 Fujitsu 配对（之前未配对，Bixolon 仍然配对），那么在尝试连接到创建的套接字时它会失败。反过来也一样。

这是错误消息：

```
07-02 13:00:11.040: E/MyApp.BluetoothConnection(9380): Failed to connect to rfcomm socket.
07-02 13:00:11.040: E/MyApp.BluetoothConnection(9380): java.io.IOException: Service discovery failed
07-02 13:00:11.040: E/MyApp.BluetoothConnection(9380):  at android.bluetooth.BluetoothSocket$SdpHelper.doSdp(BluetoothSocket.java:406)
07-02 13:00:11.040: E/MyApp.BluetoothConnection(9380):  at android.bluetooth.BluetoothSocket.connect(BluetoothSocket.java:217)
07-02 13:00:11.040: E/MyApp.BluetoothConnection(9380):  at MyApp.BluetoothConnection.connect(BluetoothConnection.java:171)
07-02 13:00:11.040: E/MyApp.BluetoothConnection(9380):  at MyApp.AbstractBluetoothPrinter.connect(AbstractBluetoothPrinter.java:34) 
```

这是进行连接尝试的代码，在解释的情况下失败的行是 btSocket.connect(); - 例外见上文：

```
/** Is set in connect() */
private BluetoothSocket btSocket = null;
/** Is set prior to connect() */
private BluetoothSocket btDevice;

public boolean connect(){

        try {
            btSocket = btDevice.createRfcommSocketToServiceRecord("00001101-0000-1000-8000-00805F9B34FB");
            if (btDevice.getName().startsWith("FTP")) {
                //Special treatment for the fujitsu printer
                SystemClock.sleep(1000);
            }
        } catch (Throwable e) {
            LogCat.e(TAG, "Failed to create rfcomm socket.", e);
            return false;
        }

        try {
            // Stop Bluetooth discovery if it's going on
            BluetoothHandler.cancelDiscovery();
            // This fails under the described circumstances
            btSocket.connect();
        } catch (Throwable e) {
            LogCat.e(TAG, "Failed to connect to rfcomm socket.", e);
            return false;
        }

        // Obtain streams etc...
} 
```

我使用**相同**的UUID 连接到**两个**设备（但一次只打开一个设备，它们不会同时打开），SDK API 中众所周知的 SPP UUID：

```
00001101-0000-1000-8000-00805F9B34FB 
```

这让我想知道：难道我需要为每个设备使用不同的 UUID？如果是的话，有什么想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T08:20:57.703

好的，经过几天尝试不同的解决方案，我现在可以在上述打印机之间切换。由于我不完全确定我的哪些措施是成功的原因，所以我将它们全部列出，所以偶然发现这篇文章的人会对如何解决他的蓝牙问题有一些线索。但是我很确定一件事：您不需要不同的 UUID 来连接两台不同的打印机 - 您可以使用相同的 UUID（但我只打开过其中一个）。

我缓存了上次打印到的设备 - 但是与以前不同的是，我不再缓存实际的[BluetoothDevice](http://developer.android.com/reference/android/bluetooth/BluetoothDevice.html)，而是只缓存它的 MAC 地址，该地址可通过以下方式获得：

```
BluetoothDevice bluetoothDevice; 

//Obtain BluetoothDevice by looking through paired devices or starting discovery

bluetoothDevice.getAddress(); 
```

[getAddress()](http://developer.android.com/reference/android/bluetooth/BluetoothDevice.html#getAddress%28%29)返回一个字符串：设备的硬件地址。我缓存了那个mac地址，下次用户想要打印时，我将缓存的mac地址与所有配对打印机的mac地址进行匹配——如果mac地址与其中一个匹配，我会尝试连接到该打印机。如果失败，我会重置我的缓存mac地址并尝试通过首先检查我的配对设备是否可以连接来找到另一个设备（如果我可以成功连接，我会相应地更新我的缓存mac地址），如果失败我开始一个寻找其他潜在设备的蓝牙发现。

现在，为了不让我的一台打印机打开任何套接字连接，我的例程如下（我将省略我在每个调用周围的 try-catch 以简化阅读）：

**创建套接字**

```
BluetoothSocket btSocket = btDevice.createRfcommSocketToServiceRecord(MY_UUID); 
```

MY_UUID 指的是众所周知的用于连接 SPP 设备的 UUID：

```
00001101-0000-1000-8000-00805F9B34FB 
```

如果[套接字创建](http://developer.android.com/reference/android/bluetooth/BluetoothDevice.html#createRfcommSocketToServiceRecord%28java.util.UUID%29)失败（这种情况很少见，如果发生这种情况很可能是由于权限不足或蓝牙被禁用/不可用），我们无法继续进行，因为我们需要一个套接字来连接。因此，在您的 catch 块中，您应该触发 disconnect 方法（稍后会详细介绍）。

**连接到创建的套接字**

```
bSocket.connect(); 
```

如果连接失败，我们将无法继续进行，因为我们需要一个有效的套接字连接来获取输入和输出流。因此，在您的 catch 块中，您应该触发 disconnect 方法（稍后会详细介绍）。

**获取输入输出流**

下一步是从套接字获取输入和输出流。我在一个 for 循环中执行此操作，该循环运行了几次（5 次就足够了） - 在每次迭代中，我检查是否有输出流，如果没有，我尝试获取它，与输入流相同。在循环结束时，我检查我是否有两个流，如果是，我退出循环（以及整个连接方法），如果没有，我继续循环并重试。通常我在第一次循环迭代中得到两个流，但有时我需要两个或三个迭代来获得两个流。

如果我到达循环声明之后的代码，我显然没有得到我的流或其他错误。此时连接被认为失败了，我执行了我的断开代码（它会清理打开的流和套接字，稍后会详细介绍）。

**读/写**

现在您已经连接到目标蓝牙设备，您可以执行读写操作。完成后，您应该通过关闭所有流和套接字来进行清理，下一段将详细介绍：断开连接。请记住：如果在读/写操作期间发生异常，请务必触发断开连接方法以清理您的资源。如果您的打印机需要某种初始化命令，请务必在连接到打印机之后和执行读/写操作之前立即发送该命令。

**断开连接**

通常有两种情况您应该断开连接：

*   完成读/写操作后
*   如果沿途某处发生异常，清理您的资源

**关闭您的信息流**

你要做的第一件事是清理你的流，检查你的输入和输出流，如果它们不为空，关闭它们并将它们设置为空。确保将每个操作（关闭输入流、关闭输出流等）包装到自己的 try-catch 中，否则无法进行一次清理（因为引发异常）将跳过所有其他清理措施。

**关闭插座**

现在您已经确保您的输入流已被清理，继续关闭您的套接字连接，然后将其设置为 null。

还有一件事：我的断开方法的开头和结尾都有一个 Thread.sleep 。一开始的时间约为 2.5 秒（= 2500 毫秒），目的是确保打印机没有其他任何事情发生（例如挂起的读/写操作或打印机仍在打印等）。第二个 Thread.sleep 在我的断开方法结束时，大约 800 毫秒长。最后睡眠的原因与我在关闭一个套接字后立即尝试打开一个新套接字时遇到的问题有关。有关更多详细信息，请参阅[此答案](https://stackoverflow.com/a/11307016/1041533)。

**问题？**

如果有人对我的 OP 或我的回答有任何疑问，请在评论中告诉我，我会尽力回答。

# ios - 如何在适用于 iOS 的 Cordova/Phonegap 1.9.0 中实施 AdMob

> ID：11292444
> 
> 赞同：0
> 
> 时间：2012-07-02T11:08:57.030
> 
> 标签：ios, cordova, admob

我使用 Cordova 1.9.0，尝试为 iOS 实施 Admob 广告并在 self.viewController 处收到错误...: property viewController not found。我尝试了 modalViewController、parentViewController、...但它不能正常工作。如何实施适用于 iOS 的 AdMob？我需要启用/禁用来自 javascript 的广告。指令链接：[https](https://groups.google.com/forum/?fromgroups#!topic/phonegap/_Lf4o6xiUK0) ://groups.google.com/forum/?fromgroups#!topic/phonegap/_Lf4o6xiUK0 谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:34:53.453

要在 ios phonegap 中集成 admob，请按照以下步骤操作

1.  在 xcode 中创建您正常的日常 phonegap (1.0.0) 项目

2.  导入 GoogleAdMobAdsSDK 文件夹和所需的 AdMob 框架（我相信 phonegap 项目中唯一没有的就是 MessageUI.framework）

3.  在 AppDelegate.h - 然后执行 #import “GADBannerView.h” 并添加 GADBannerView *bannerView_; 到你的@interface

4.  在 AppDelegate.m 中 – #define MY_BANNER_UNIT_ID @“您的 AdMob 发布商 ID# 这里”现在是棘手的部分。这导致我把头撞在墙上一段时间

    5.) 将您的方法 webViewDidFinishLoad 更改为 this 。. .

    (void)webViewDidFinishLoad:(UIWebView *)theWebView {

    ```
    bannerView_ = [[GADBannerView alloc]init];
    [bannerView_ setDelegate:self];
    [bannerView_ setFrame:CGRectMake(0, 0, 320, 50)];

    // Specify the ad's "unit identifier." This is your AdMob Publisher ID.
    bannerView_.adUnitID = MY_BANNER_UNIT_ID;

    // Let the runtime know which UIViewController to restore after taking
    // the user wherever the ad goes and add it to the view hierarchy.
    bannerView_.rootViewController = self.viewController;
    [self.viewController.view addSubview:bannerView_];

    // Initiate a generic request to load it with an ad.
    [bannerView_ loadRequest:[GADRequest request]];

    // only valid if AdGap.plist specifies a protocol to handle
    if(self.invokeString)
    {
        // this is passed before the deviceready event is fired, so you can access it in js when you receive deviceready
        NSString* jsString = [NSString stringWithFormat:@"var invokeString = \"%@\";", self.invokeString];
        [theWebView stringByEvaluatingJavaScriptFromString:jsString];
    }
    return [ super webViewDidFinishLoad:theWebView ]; 
    ```

    }

完成了

如果您仍然发现任何疑问，请仔细查看本指南 [APPLYING ADMOB TO PHONEGAP(IOS)](http://iphone.keyvisuals.com/iphonedev/implementing-admob-ads-in-a-phonegap-project-for-ios-no-plugins-required/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-29T18:12:54.453

试试这个插件[点击查看](https://github.com/appfeel/admob-google-cordova)
添加插件

```
cordova plugin add cordova-admob 
```

然后将下面的代码添加到您的 javascript 文件中，并将 ca-app-pub-XXXXXXXXXXXXXXXX/BBBBBBBBBB 更改为您的 id。

```
function onDeviceReady() {
  document.removeEventListener('deviceready', onDeviceReady, false);

  // Set AdMobAds options:
  admob.setOptions({
    publisherId:          "ca-app-pub-XXXXXXXXXXXXXXXX/BBBBBBBBBB",  // Required
    interstitialAdId:     "ca-app-pub-XXXXXXXXXXXXXXXX/IIIIIIIIII",  // Optional
  });

  // Start showing banners (automatic when autoShowBanner is set to true)
  admob.createBannerView();

  // Request interstitial (will present automatically when autoShowInterstitial is set to true)
  admob.requestInterstitialAd();
}

document.addEventListener("deviceready", onDeviceReady, false); 
```

# javascript - 点击时jQuery调用自定义函数

> ID：11292449
> 
> 赞同：3
> 
> 时间：2012-07-02T11:09:04.123
> 
> 标签：javascript, jquery, function

在单击 h1 后，我将如何正确调用 specialHouse 函数，以仍然允许 $(this) 表示 div.content。目前，以下内容不适用于错误“Uncaught TypeError: Object [object Object] has no method 'specialHouse'”

```
function specialHouse()
{
    $(this).slideDown(500, function(){
      $(this).delay(2000).slideUp();
    });
 };

$('div.content').hide();
$('h1').on('click', function(){
    $(this).next('div.content').specialHouse();
}) 
```

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T11:10:55.183

你必须告诉 jQuery 你的新函数：

```
jQuery.fn.specialHouse = function() {
   return this.slideDown(500, function(){
     $(this).delay(2000).slideUp();
   }
} 
```

当我们返回时，`this`我们的函数是链式的：

```
$("a").specialHouse().text("Hello World"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-02T11:11:31.023

您尝试过的方式仅适用于 jQuery 插件。但是，您可以像这样调用函数（上下文`this`将按预期设置）：

```
$('h1').on('click', function() {
    $(this).next('div.content').each(specialHouse);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T11:10:31.383

尝试 ：

```
$('div.content').hide();
$('h1').on('click', function(){
    specialHouse($(this).next('div.content'));
}) 

function specialHouse(elem){
  $(elem).slideDown(500, function(){
     $(this).delay(2000).slideUp();
   });
}; 
```

# foursquare - 添加新的 Foursquare 忠诚度优惠

> ID：11292454
> 
> 赞同：0
> 
> 时间：2012-07-02T11:09:39.190
> 
> 标签：foursquare

我想请教在从以下 2 个选项中选择时创建新的忠诚度特价时要传递的正确参数（在网站上可见）：

分别在每个
场馆 一起跨越所有场馆

它没有反映在 api [https://developer.foursquare.com/docs/specials/add](https://developer.foursquare.com/docs/specials/add)如何传递选项之一。

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:05:07.140

目前无法通过 API 指定忠诚度特价商品的粒度级别。我已经在内部要求将此添加到 API 端点，并会在发生这种情况时回复您！

# matlab - 使用 NaN 添加 2x2 矩阵

> ID：11292462
> 
> 赞同：3
> 
> 时间：2012-07-02T11:09:59.680
> 
> 标签：matlab, sum, nan

更多的是一般的 MATLAB 问题，而不是寻找编程建议——如果我有：

```
y = cellfun(@(x)sum(x(:)), Z, 'un', 0); 
```

每个单元格矩阵中都有 ' 和实数的组合`NaN`，当我对每个单元格中这些矩阵的所有元素求和时，我总是会得到 total =`NaN`因为那里有`NaN`'，或者它们会被忽略而只是求和实数。我问的原因是因为我得到：

```
y = [NaN] [NaN] [NaN]
    [NaN] [NaN] [NaN]
    [NaN] [NaN] [NaN] 
```

一个示例单元矩阵（单元元素）将是：

```
x{1,1} = NaN 2   3
         4   5   6
         7   8   9 
```

所以我希望第一个元素`y`是：

```
y{1,1} = 44 
```

我怎么没有得到这个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T11:14:05.977

您应该使用`nansum`（来自统计工具箱）而不是`sum`.

如果您没有统计工具箱，那么您可以通过以下方式`nansum`轻松定义：

```
function x = nansum(array,dim)

if nargin < 2
    if size(array,1) == 1
        dim = 2;
    else
        dim = 1;
    end
end

array(isnan(array)) = 0;

x  = sum(array,dim); 
```

本质上，问题在于`sum`试图对输入向量的每个元素求和。如果其中一个元素是，`NaN`那么整个总和就是`NaN`（您可以将其`NaN`视为表示未知数据 - 显然，如果您不知道其中一个数据是什么，那么您就无法知道所有数据的总和是多少数据要么）。

该函数`nansum`将所有丢失的数据视为零，因此以下代码给出了您期望的结果：

```
>> nansum( [NaN 2 3 4 5 6 7 8 9] )
ans =
    44 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T11:18:35.457

如果你没有统计工具箱，你应该[`ignoreNan`](http://www.mathworks.com/matlabcentral/fileexchange/15776-ignore-nan#comments)从文件交换中使用。

```
 ignoreNan(array,@sum,dim) 
```

在您的情况下，您应该首先重塑矩阵：

```
 ignoreNan(x(:),@sum); 
```

它也比 更通用`nansum`，因为它可以用于任何功能 - 无论是自定义的还是内置的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T11:25:42.697

要忽略 NaN，只需在匿名函数中使用向量索引，将冒号 ( `:`)
替换为`~isnan(x)`：

```
@(x)sum(x(~isnan(x))) 
```

所以你得到：

```
y = cellfun(@(x)sum(x(~isnan(x))), Z, 'un', 0); 
```

# php - 如何检查值是否存在于 MySQL 数据库中

> ID：11292468
> 
> 赞同：36
> 
> 时间：2012-07-02T11:10:18.740
> 
> 标签：php, mysql, exists

假设我有这张桌子：

```
id | name | city
------------------
1  | n1   | c1
2  | n2   | c2
3  | n3   | c3
4  | n4   | c4 
```

我想检查`c7`变量下是否存在该值`city`。

如果是这样，我会做点什么。
如果没有，我会做其他事情。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-07-02T11:16:06.043

首选方式，使用 MySQLi 扩展：

```
$mysqli = new mysqli(SERVER, DBUSER, DBPASS, DATABASE);
$result = $mysqli->query("SELECT id FROM mytable WHERE city = 'c7'");
if($result->num_rows == 0) {
     // row not found, do stuff...
} else {
    // do other stuff...
}
$mysqli->close(); 
```

已弃用：

```
$result = mysql_query("SELECT id FROM mytable WHERE city = 'c7'");
if(mysql_num_rows($result) == 0) {
     // row not found, do stuff...
} else {
    // do other stuff...
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-02T11:11:26.937

### 精确匹配

```
"SELECT * FROM yourTable WHERE city = 'c7'" 
```

### 对于模式/通配符搜索

```
"SELECT * FROM yourTable WHERE city LIKE '%c7%'" 
```

当然，您可以更改`'%c7%'`为`'%c7'`或`'c7%'`取决于您要如何搜索它。对于完全匹配，使用第一个查询示例。

### PHP

```
$result = mysql_query("SELECT * FROM yourTable WHERE city = 'c7'");
$matchFound = mysql_num_rows($result) > 0 ? 'yes' : 'no';
echo $matchFound; 
```

您也可以`if`在那里使用条件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-11T05:01:17.143

假设连接已建立并且在全局范围内可用；

```
//Check if a value exists in a table
function record_exists ($table, $column, $value) {
    global $connection;
    $query = "SELECT * FROM {$table} WHERE {$column} = {$value}";
    $result = mysql_query ( $query, $connection );
    if ( mysql_num_rows ( $result ) ) {
        return TRUE;
    } else {
        return FALSE;
    }
} 
```

用法：假设要检查的值存放在变量$username中；

```
if (record_exists ( 'employee', 'username', $username )){
    echo "Username is not available. Try something else.";
} else {
    echo "Username is available";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T11:14:51.810

```
SELECT
    IF city='C7'
    THEN city
    ELSE 'somethingelse'
    END as `city`
FROM `table` WHERE `city` = 'c7' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-20T05:34:01.770

我尝试了一段时间， 如果有两个相同的条目就可以工作，但是，如果你用它替换 它只 适用于一个匹配的记录，希望这会有所帮助。 `$sqlcommand = 'SELECT * FROM database WHERE search="'.$searchString.'";';
$sth = $db->prepare($sqlcommand); $sth->execute(); $record = $sth->fetch(); if ($sth->fetchColumn() > 0){}``if ($sth->fetchColumn() > 0){}``if ($result){}`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-09T10:36:26.943

**用于匹配 ID：**

```
Select * from table_name where 1=1 
```

**对于匹配模式：**

```
Select * from table_name column_name Like '%string%' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-01T15:43:44.497

这对我有用：

```
 $db = mysqli_connect('localhost', 'UserName', 'Password', 'DB_Name') or die('Not Connected');
mysqli_set_charset($db, 'utf8');

$sql = mysqli_query($db,"SELECT * FROM `mytable` WHERE city='c7'");
$sql = mysqli_fetch_assoc($sql);
$Checker = $sql['city'];

if  ($Checker != null) {

    echo 'Already exists';

} else {

    echo 'Not found';
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-13T05:07:03.077

采用

```
select count(city) from mytable where city = 'c7' 
```

这将只从查询中发送一个值。如果为 0，则不存在，否则存在。由于您不会使用其他列值。

# php - 使用 SimpleXML 从 URL 解析 XML

> ID：11292475
> 
> 赞同：0
> 
> 时间：2012-07-02T11:10:41.597
> 
> 标签：php, xml, url, simplexml

我正在尝试在此 URL 处回显 XML 内容，但我遇到了困难。这是我到目前为止所拥有的：

```
$url = "GetVideosServlet?queryId=1";

$xml = simplexml_load_file($url);

$value = (string) $xml->results->item[0]->id;

echo $value; 
```

我不断收到我试图获取非对象属性的错误。但我的印象是 simplexml_load_file 将我的 XML 字符串转换为一个对象？

如果有人能告诉我如何回应任何内容，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T11:15:47.913

我认为您只是错过了一个标签，请`query`尝试：

```
$value = (string) $xml->query->results->item[0]->id;
echo $value; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T11:27:51.570

在调试时[print_r](http://php.net/manual/en/function.print-r.php)和[var_dump](http://php.net/manual/en/function.var-dump.php)非常方便！例如在这种情况下，如果您在加载 $xml 后立即转储它，您会注意到您错过了 SimpleXMLElement Object 查询。

```
$url = "http://176.34.224.80/REMPADRecSys/GetVideosServlet?queryId=1";
$xml = simplexml_load_file($url);
echo "<pre>";
print_r($xml); 
```

会给你输出：

```
SimpleXMLElement Object
(
    [query] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [id] => 1
                )

            [results] => SimpleXMLElement Object
                (
                    [item] => Array
                        (
                            [0] => SimpleXMLElement Object
                                (
                                    [id] => GZ7w39jpqwo
                                    [rank] => 1
                                    [explanation] => Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla a massa lectus, sed convallis sapien. Curabitur sem mauris, ullamcorper ut. 
                                ) 
```

所以正确的参考`$xml->query->results->item[0]->id;`就像提到的@Lake。调试愉快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T11:16:39.290

```
simplexml_load_file(rawurlencode('http://176.34.224.80/REMPADRecSys/GetVideosServlet?queryId=1')); 
```

试试这个。

# c# - 替换包装标签并反转

> ID：11292477
> 
> 赞同：2
> 
> 时间：2012-07-02T11:10:45.967
> 
> 标签：c#, xslt, ckeditor, xslt-1.0

我们有一个遗留系统，它需要一种不是 html 但足够接近以至于令人困惑的格式。在我们闪亮的前端网站上，我们有一个 CKEditor 实例，它允许用户编辑这种有点像 html-but-not-really 的格式。

*最大*的不同是我们的格式不理解`<p>`标签。它希望新行被格式化`<br />`。CKEditor 可以设置为在`BR`模式下运行，但不出所料，这会导致一些烦人的用户界面错误。

作为替代方案，我正在考虑允许它以默认`P`模式运行并用一些 XSLT 替换服务器上的标签。这在一个方向上很容易：

转型：

```
<root>
<p>Test</p><p>Test</p><p>Test</p>
<p><b>Test</b></p>
</root> 
```

和：

```
<xsl:template match="@*|node()">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
</xsl:template>
<!-- Replace `[p]contents[/p]` with `contents[br /]` -->
<xsl:template match="p">
    <xsl:apply-templates/><br/>
</xsl:template> 
```

结果是：

```
<root>Test<br/>Test<br/>Test<br/><b>Test</b><br/></root> 
```

问题是，我是否丢失了太多信息而无法反向执行相同的过程？如果没有，解决这个问题的最佳方法是什么？XSLT 甚至是正确的选择吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T11:47:57.233

怎么样：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:key name="k1"
  match="root/node()[not(self::br)]" 
  use="generate-id(following-sibling::br[1])"/>

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="root">
  <xsl:copy>
    <xsl:apply-templates select="br" mode="wrap"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="br" mode="wrap">
  <p>
    <xsl:apply-templates select="key('k1', generate-id())"/>
  </p>
</xsl:template>

</xsl:stylesheet> 
```

使用 Saxon 6.5.5 进行转换

```
<root>Test<br/>Test<br/>Test<br/><b>Test</b><br/></root> 
```

进入

```
<root><p>Test</p><p>Test</p><p>Test</p><p><b>Test</b></p></root> 
```

# objective-c - 使用 NSPredicate 搜索带有数组的数组

> ID：11292479
> 
> 赞同：20
> 
> 时间：2012-07-02T11:11:02.717
> 
> 标签：objective-c, ios, nspredicate

我有一个`Card`对象数组（NSObjects），每个对象都有一个名为 的字段`tags`，它是 NSStrings 的 NSArray。

然后，我想将用户的搜索词拆分为一个称为`keywords`字符串的数组`componentsSeparatedByString`，然后使用 NSPredicate 根据哪些元素具有包含至少 1 个关键字的标签来过滤我的卡片数组`keywords`。

我希望这不会太复杂！我尝试使用 NSPredicate`IN`子句无济于事。我该怎么做？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-07-02T13:25:30.987

考虑`array`包含卡片对象。

```
 NSArray *keyWordsList = [keywords componentSeparatedByString:@","];
 [array filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"ANY %K IN %@",@"tags",keyWordsList]] 
```

编辑：

要部分搜索，您可以使用 LIKE 运算符。

```
[array filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"ANY %K LIKE[cd] %@",@"tags",[partialkeyWord stringByAppendingString:@"*"]]] 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-02T11:51:48.023

如果这不完全正确，请不要杀了我，但是这样的事情会起作用。

```
NSArray* arrayOfCards = [NSArray array];
NSArray* keywords = [NSArray array];
NSPredicate* containsAKeyword = [NSPredicate predicateWithBlock: ^BOOL(id evaluatedObject, NSDictionary *bindings) {
    Card* card = (Card*)evaluatedObject;
    NSArray* tagArray = card.tags;
    for(NSString* tag in tagArray) {
       if( [keywords containsObject: tag] ) 
          return YES;
    }

    return NO;
}];

NSArray* result = [arrayOfCards filteredArrayUsingPredicate: containsAKeyword]; 
```

# android - Android肥皂代码不起作用但是没有错

> ID：11292481
> 
> 赞同：1
> 
> 时间：2012-07-02T11:11:08.493
> 
> 标签：android, ksoap

我是新的安卓。我尝试使用 ksoap。我通过一个罐子添加了这些库。我认为一切正常，但我的代码不起作用。如果我评论 ksoap 代码一切正常。我不明白是什么问题？请帮我。代码如下：

```
package com.hndnn;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.AndroidHttpTransport;
import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class TermometreActivity extends Activity {
final static String NAMESPACE = "http://tempuri.org/";

    final static String METHOD_NAME = "CelsiusToFahrenheit";

    final static String SOAP_ACTION = "http://tempuri.org/CelsiusToFahrenheit";

    final static String URL = "http://www.w3schools.com/webservices/tempconvert.asmx";
    TextView txt;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        txt=(TextView) findViewById(R.id.textView1);
       SoapObject Request=new SoapObject(NAMESPACE, METHOD_NAME);
        Request.addProperty("Celsius", "20");
        SoapSerializationEnvelope sse=new SoapSerializationEnvelope(SoapEnvelope.VER11);
       sse.dotNet=true;
       sse.setOutputSoapObject(Request);
       AndroidHttpTransport aht=new AndroidHttpTransport(URL);
        try {
            aht.call(SOAP_ACTION, sse);
            SoapPrimitive sonuc= (SoapPrimitive) sse.getResponse();
            txt.setText("Derece:"+sonuc);
            //txt.setText("try içinde");``

        } catch (Exception e) {
          e.printStackTrace();
          txt.setText("handan");
        } 
```

# ruby-on-rails - 如何在 Rails 页面上添加可编辑的“静态”文本

> ID：11292490
> 
> 赞同：1
> 
> 时间：2012-07-02T11:11:31.363
> 
> 标签：ruby-on-rails, ruby, database, gem

我正在为一个客户构建一个 Rails 博客，他想要一个可以编辑的站点描述。我不知道该怎么做。在 PHP 中，我只需将其保存到数据库中的单独表中并将其保存在列中，然后通过查询进行检索，但是我的 PHP 时间还很远。

如何才能做到这一点？有宝石什么的吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:18:31.720

您可以为它创建一个模型，并使用它将文本保存到数据库中。如果你能以某种方式将它附加到一个已经存在的模型上，那就更好了。

# java - WCF 通过 Java 接收使用它的空参数

> ID：11292493
> 
> 赞同：0
> 
> 时间：2012-07-02T11:11:46.357
> 
> 标签：java, wcf, interop, java-metro-framework

我在尝试从 Java 中使用 WCF 服务时遇到问题。WCF 使用 basicHttpBinding 和非常简单的定义：

```
public class MyService : IMyService
{
    public int MyMethod(MyObject obj)
    {

    }
} 
```

MyObject 仅包含 String 属性，如下所示：

```
[DataContract]
public class MyObject
{
    [DataMember]
    public String Client { get; set; }

    ....
} 
```

现在在 Java 中，使用 Metro 库，我正在创建必要的类，如下所示：

```
wsimport -extension -keep -p com.myproject -Xnocompile http://localhost:3720/MyService.svc?wsdl 
```

最后像这样消费它：

```
MyService service = new MyService();
IMyService soap = service.getBasicHttpBindingIMyService();

ObjectFactory fact = new ObjectFactory();
MyObject obj = new MyObject();

obj.setClient(fact.createString("Someone"));

soap.MyMethod(obj); 
```

用 Fiddler 嗅探它，似乎数据已正确发送到包含 Client 属性的“Someone”值的服务。虽然在调试 WCF 服务时 Client 属性接收到 null 值。任何想法如何进行？

下面是 Java 客户端发送的 SOAP 消息：

```
<?xml version="1.0" encoding="UTF-8"?>
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
    <S:Body>
        <MyMethod xmlns="http://tempuri.org/" xmlns:ns2="http://schemas.datacontract.org/2004/07/MyProject.MyService" xmlns:ns3="http://schemas.microsoft.com/2003/10/Serialization/">
            <MyObject>
                <ns3:string>Someone</ns3:string>
                <ns3:string>123-456-789</ns3:string>
                <ns3:string>Details</ns3:string>
                <ns3:string>12345</ns3:string>
                <ns3:string>Other</ns3:string>
                <ns3:string>user</ns3:string>
                <ns3:string>2012-01-01</ns3:string>
                <ns3:string>Registered</ns3:string>
            </MyObject>
        </MyMethod>
    </S:Body>
</S:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:37:02.873

最后我设法解决了这个问题。似乎问题出在 Java 代码中，因为替代的 .NET 客户端工作正常。参数的属性设置不正确，如下所示：

```
obj.setClient(fact.createString("Someone")); 
```

相反，正确的方法是

```
obj.setClient(fact.createMyObjectClient("Someone")); 
```

# visual-studio-2008 - 如何通过 Visual Studio 2008 表达式设计器对 Reporting Services 中的值求和？

> ID：11292494
> 
> 赞同：0
> 
> 时间：2012-07-02T11:11:53.597
> 
> 标签：visual-studio-2008, reporting-services, designer, expression

我有这样的报告

```
person | lead count | support count | ...
p1     | 10         | 20            | ...
p2     | 20         | 30            | ... 
```

我需要在一列中有计数总和。我试过这个表达： `=Sum(IIf(ISNOTHING(Fields!lead_count.Value) Or Fields!lead_count.Value = "", 0, Fields!lead_count.Value))`

但它给了我`#Error`，以及尝试： `=Sum(IIf(ISNOTHING(Fields!lead_count.Value) Or Fields!lead_count.Value = "", 0, Int(Fields!lead_count.Value)))`

任何想法我做错了什么以及如何获得正确的计数总和（30 代表领先，50 代表支持）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:47:40.237

我认为您可以直接使用 SUM：

```
=Sum(Fields!lead_count.Value) 
```

无需检查空白值。

# for-loop - 带填充数字的 /L 循环

> ID：11292497
> 
> 赞同：4
> 
> 时间：2012-07-02T11:11:55.407
> 
> 标签：for-loop, batch-file, range

我希望创建一个嵌套的 for 循环来处理一些文件。我已经广泛寻找解决方案，并找到了许多类似的版本，但由于这是我第一次在组合方法来做我想做的事情时遇到麻烦。

基本上 - 我想要一个 FOR /L 循环，它在从 001 到 500 的填充数字范围内循环。

我知道我可以指定一个范围 (1,1,500)，但显然不能指定为 (001,001,500)。如何添加 00，然后当 %%a > 9 时添加 0？我想这是一种刺痛，但也许还有另一种方法？

我希望的代码（显然是错误的）：

```
@echo off
for %%a in (001,001,500) do (
echo %%a
for %%s in (control scenario) do (
echo %%s
svic_ensemble.exe 28009_Trent_at_Colwick.cal Trent_%%s_%%a.txt 28009_Trent_at_Colwick.txt     Trent_%%s_%%a.out
)
)
pause 
```

非常感谢

埃德

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-02T11:28:16.140

您可以通过字符串操作来解决它。
首先在数字前加上两个零，然后只取最后三个字符。

```
setlocal EnableDelayedExpansion
for /L %%n in (1 1 500) do (
  set "num=00%%n"
  set "num=!num:~-3!"
  echo !num!
) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-02T11:27:49.883

获得零填充的最简单方法是填充大量零，然后使用子字符串：

```
set Number=1
set PaddedNumber=000000%Number%
set PaddedNumber=%PaddedNumber:~-3% 
```

您可以调整它以在循环中使用，尽管您需要延迟扩展：

```
setlocal enabledelayedexpansion
for /l %%a in (1, 1, 500) do (
  set num=000%%a
  set num=!num:~-3!
  for %%s in (control scenario) do (
    svic_ensemble.exe 28009_Trent_at_Colwick.cal Trent_%%s_!num!.txt 28009_Trent_at_Colwick.txt     Trent_%%s_!num!.out
  )
) 
```

# django - 如何复制 Django Celery 工人？

> ID：11292498
> 
> 赞同：1
> 
> 时间：2012-07-02T11:11:57.113
> 
> 标签：django, rabbitmq, celery

我在 Celery 中有一个记录器（使用 RabbitMQ），并希望在紧急情况下复制它的工作。

```
# tasks.py
@task
def log(message):
    with open('test.txt', 'a') as f:
        f.write(message)

# views.py
log.delay(message) 
```

如何在`log()`调用时使不同机器上的 2 个 Celery 实例运行？

这样做有意义吗？

这在 RabbitMQ 中是可能的。如果你有一个[基于主题的交换](http://www.rabbitmq.com/tutorials/tutorial-five-python.html)，很明显可以将一条消息放入两个不同的队列中并独立地传递给 2 个接收者。

```
sender =>
[message, routing_key=event.logging.log] => [queue A, topic=event.#]     
                                                      => receiver 1
                                         => [queue B, topic=*.logging.*]
                                                      => receiver 2 
```

消息将被发送到两个队列，并且它们都不会从另一个队列中窃取消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:21:05.960

尝试在两台不同的机器上开始这项任务对我来说没有意义。至少 Celery 不能保证一个任务会在不同的机器上运行——它是 RabbitMQ 分配负载，如果一个节点的负载比另一个节点少——运行的两个任务可能会在那台机器上执行......

使用[任务。`retry`](http://celery.github.com/celery/reference/celery.app.task.html#module-celery.app.task)反而。如果执行失败，Celery 将重试任务。Celery 足够聪明，可以理解任务是否失败。只需确保在任务失败时引发一些异常，如果无法成功记录则不要静默返回。

更新：

一个可能的工作流程可能是 - 尝试执行任务，如果它失败，在 on_retry 更改路由键，并尝试在不同的交换/队列中执行任务，这可能是您的故障转移队列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T15:35:41.527

为此，您必须将交换配置为主题交换（如您所说）：

```
CELERY_QUEUES = {
   'celery': {
       'exchange': 'celerytopic',
       'exchange_type': 'topic',
       'routing_key': 'celery',
   },
} 
```

然后您可以使用 AMQP api 创建备份交换：

```
 from celery import current_app as celery

 with celery.broker_connection() as conn:
     conn.default_channel.queue_declare(queue='celery.backup', durable=True)
     conn.default_channel.queue_bind(queue='celery.backup',
                                     exchange='celerytopic',
                                     routing_key='celery',
                                     durable=True) 
```

由于您已经有一个名为 celery 的队列，您可能必须先删除它：

```
$ camqadm queue.delete celery 
```

# iphone - OpenCV iPhone摄像头，更改CV_CAP_PROP_IOS_DEVICE_ *没有效果

> ID：11292500
> 
> 赞同：0
> 
> 时间：2012-07-02T11:12:17.050
> 
> 标签：iphone, cocoa, opencv, camera

我在玩 OpenCV2 + iPhone 相机捕捉

```
self.capture = cvCreateCameraCapture(CV_CAP_ANY);
...   
IplImage * frame = cvQueryFrame(self.capture); 
```

_

```
NSLog(@"CV_CAP_PROP_IOS_DEVICE_WHITEBALANCE = %f", cvGetCaptureProperty(self.capture ,CV_CAP_PROP_IOS_DEVICE_WHITEBALANCE));
NSLog(@"CV_CAP_PROP_IOS_DEVICE_TORCH = %f", cvGetCaptureProperty(self.capture ,CV_CAP_PROP_IOS_DEVICE_TORCH));
NSLog(@"CV_CAP_PROP_IOS_DEVICE_FOCUS = %f", cvGetCaptureProperty(self.capture ,CV_CAP_PROP_IOS_DEVICE_FOCUS));
NSLog(@"CV_CAP_PROP_IOS_DEVICE_FLASH = %f", cvGetCaptureProperty(self.capture ,CV_CAP_PROP_IOS_DEVICE_FLASH));
NSLog(@"CV_CAP_PROP_IOS_DEVICE_EXPOSURE = %f", cvGetCaptureProperty(self.capture, CV_CAP_PROP_IOS_DEVICE_EXPOSURE)); 
```

但是，更改任何 CV_CAP_PROP_IOS_DEVICE_* 都没有效果，我发现它们中的大多数都可以更改为 0、1、2（在使用 cvGetCaptureProperty() 查询回值之后）

但它没有效果:(

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:38:14.183

iOS OpenCV 端口仍在[开发中](http://code.opencv.org/projects/opencv/wiki/2012#2012-06-26)- 请耐心等待几个月以获得更好的支持。

或者，更好的是，只需获取源代码，阅读它们，实现功能并将它们作为补丁推送回来。您将获得荣耀、感谢和宝贵的开源开发经验。

# jquery - 将 WordPress 站点移动到新域后，jQuery 无法正常工作

> ID：11292501
> 
> 赞同：0
> 
> 时间：2012-07-02T11:12:19.133
> 
> 标签：jquery, wordpress

我刚刚将我的网站移动到 hostgator 上的新域，现在该网站的内容没有显示。不工作的网站是[http://alcaldarone.com](http://alcaldarone.com)，我开发和工作的网站是[http://atcjr.alcaldarone.com](http://atcjr.alcaldarone.com)。

如果我在 Chrome 中查看问题站点并刷新主页，我可以看到内容闪烁一瞬间然后消失。我认为问题在于 jQuery 没有加载。博客页面内容出现，但 jQuery 幻灯片功能也未执行。

我已经浏览了数据库并将 wp-options 中 home 和 siteurl 的 URL 设置更改为指向 alcaldarone.com 并对 wp-posts 表中的记录做了同样的事情，但仍然没有运气......有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T01:10:07.973

好的，我找到了这个。由于某种原因，我的 jquery-ui.min.js 没有被加载。我刚打电话

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.12/jquery-ui.min.js"> 
```

代替

```
<script type="text/javascript" src="<?php bloginfo('template_url'); ?>/js/jquery-ui.min.js"></script> 
```

并且做到了。移动文件时脚本可能已损坏..

# mysql - 过度使用 MySQL 视图

> ID：11292503
> 
> 赞同：0
> 
> 时间：2012-07-02T11:12:25.007
> 
> 标签：mysql, views

最近发现了使用 MySQL Views 来积累数据以进行演示的便利。我发现这很方便，因为可以直接从数据库解析具有引用完整性（外键）的表。例如，`Users`具有外键的表`role_id`将被解析为具有实际角色的名称，也可能来自该`Roles`表，而不仅仅是`role_id`对查看者而言基本上没有意义的表。

我开始习惯这一点，并且已经有很多观点，因此担心如果我使用它们太多，我可能会遇到一些无法预料的问题。任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:24:49.110

视图基本上是准备好的服务器端`SELECT`语句。如果您尝试避免使用您正在使用的视图，您会发现自己在应用程序中显式地执行相同的查询，这不会比在服务器上使用准备好的视图更有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T11:50:12.047

> > *“MySQL 内部没有限制，因此理论上只有操作系统的限制适用。但它们通常高到与实际用途无关。”*

参考mysql论坛上的文章：
[***MySQL Forums::Views::Maximum number of views (resolved: no max)***](http://forums.mysql.com/read.php?100,215704,215909#msg-215909)

# scheme - 我应该从 shift、align 和 shuffle 中获得什么指南？

> ID：11292506
> 
> 赞同：2
> 
> 时间：2012-07-02T11:12:29.937
> 
> 标签：scheme, the-little-schemer

在《The Little Schemer》第9章的开头部分，有looking、shift、align、shuffle等几个例子，

```
 (define looking
    (lambda (a lat)
      (keep-looking a (pick 1 lat) lat)))

(define shift
    (lambda (pair)
      (build (first (first pair))
        (build (second (first pair))
          (second pair)))))

(define align
  (lambda (pora)
    (cond ((atom? pora) pora)
          ((a-pair? (first pora)) (align (shift pora)))
          (else (build (first pora)
                       (align (second pora)))))))

(define shuffle
  (lambda (pora)
    (cond ((atom? pora) pora)
          ((a-pair? (first pora))(shuffle (revpair pora)))
          (else (build (first pora)
                       (shuffle (second pora))))))) 
```

我想我大概理解了它们，但我不知道这些例子的提示，我是否需要有一些先决条件，有人可以告诉我吗？

最好的祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:11:37.337

阅读“The Little Schemer”没有任何先决条件，这是一本非常独立的书。如果您一直在阅读第 9 章，那么您已经知道了理解示例所需的所有知识，也许您需要稍微回溯一下，但请放心，这一切都在书中。

现在如果你直接跳到第9章会有一些漏洞，最好回去按顺序阅读所有前面的章节。

# android - 在安卓中购买

> ID：11292507
> 
> 赞同：0
> 
> 时间：2012-07-02T11:12:35.180
> 
> 标签：android, in-app-billing

我想在 Android 操作系统中实现购买。我们想通过该应用程序销售数字内容。是否可以不使用 In-app Billing 并且不向 Google 支付 30% 的费用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:27:47.527

如果您通过 Play 商店分发它并且数字内容仅在您的应用程序中有用，那么不会。请参阅[Android Market 开发者计划政策](http://www.android.com/us/developer-content-policy.html#showlanguages)。

# android - 在Android中使用地理的默认谷歌地图具有多个纬度

> ID：11292508
> 
> 赞同：3
> 
> 时间：2012-07-02T11:12:39.413
> 
> 标签：android, google-maps

我正在使用以下代码使用**地理在默认谷歌地图上显示位置**

```
 Uri uri = Uri.parse("geo:"+Global.detail_lat+","+Global.detail_long+"?q="+Global.detail_lat+","+Global.detail_long+"");
 Intent in = new Intent(Intent.ACTION_VIEW, uri);
 startActivity(in); 
```

它工作正常。现在我想知道，我可以使用地理在默认地图上显示多个位置（多个纬度、经度）吗？我可以传递数组或其他任何东西吗？

谢谢，杰伊帕特尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:46:47.513

您可以这样做，因为您需要有用于在 Android 中的 Google 地图上显示多个标记的 SDK，您可以从此处下载该 SDK。 [SDK](https://github.com/jgilfelt/android-mapviewballoons)

在这里您可以找到有关[如何在 Android GOOGLE MAP中显示多个标记的完整指南](http://mobile.tutsplus.com/tutorials/android/android-sdk-build-a-mall-finder-app-points-of-interest/)

在下面的类数组中已为不同的位置传递

```
public void drawMalls(){
Drawable marker = getResources().getDrawable(R.drawable.malls);
MallOverlay mallsPos = new MallOverlay(marker,mapView);
    GeoPoint[] mallCoords = new GeoPoint[6];

    //Load Some Random Coordinates in Miami, FL
    mallCoords[0] = new GeoPoint(29656582,-82411151);//The Oaks Mall
    mallCoords[1] = new GeoPoint(29649831,-82376347);//Creekside mall
    mallCoords[2] = new GeoPoint(29674146,-8238905);//Millhopper Shopping Center
    mallCoords[3] = new GeoPoint(29675078,-82322617);//Northside Shopping Center
    mallCoords[4] = new GeoPoint(29677017,-82339761);//Gainesville Mall
    mallCoords[5] = new GeoPoint(29663835,-82325599);//Gainesville Shopping Center      

    List<Overlay> overlays = mapView.getOverlays();
OverlayItem overlayItem = new OverlayItem(mallCoords[0], "The Oaks Mall", "6419 W Newberry Rd, Gainesville, FL 32605");
mallsPos.addOverlay(overlayItem);
overlayItem = new OverlayItem(mallCoords[1], "Creekside Mall", "3501 Southwest 2nd Avenue, Gainesville, FL");
mallsPos.addOverlay(overlayItem);
overlayItem = new OverlayItem(mallCoords[2], "Millhopper Shopping Center", "NW 43rd St & NW 16th Blvd. Gainesville, FL");
mallsPos.addOverlay(overlayItem);
overlayItem = new OverlayItem(mallCoords[3], "Northside Shopping Center", "Gainesville, FL");
mallsPos.addOverlay(overlayItem);
overlayItem = new OverlayItem(mallCoords[4], "Gainesville Mall", "2624 Northwest 13th Street Gainesville, FL 32609-2834");
mallsPos.addOverlay(overlayItem);
overlayItem = new OverlayItem(mallCoords[5], "Gainesville Shopping Center", "1344 N Main St Gainesville, Florida 32601");
mallsPos.addOverlay(overlayItem);
overlays.add(mallsPos); 

mallsPos.setCurrentLocation(currentLocation); 
```

}

# mongodb - Mongodb NULL 而不是删除

> ID：11292510
> 
> 赞同：0
> 
> 时间：2012-07-02T11:12:47.433
> 
> 标签：mongodb

我设法找到了如何删除字段但我有一个问题它并没有真正删除它只是将它设置为NULL。

```
db.user.update({'username': 'mezo', 'person': {'$in' : ['masidnadi241479214']}}, {'$unset': {'person.$': 1}}) 
```

我的结构是这样的：

```
{
    "_id" : ObjectId("4ff14c7461d69af811000000"),
    "confirmed" : true,
    "person" : [
            null,
            null,
            "194724198274192",
            "3"
    ],
    "username" : "mezo" 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:15:09.227

是的，这种行为是意料之中的。要从数组中删除空元素，请运行

```
 db.collection.update(query, {$pull: {'person': null}}) 
```

在 $unset 操作之后。

# sql - 奇怪的sql查询行为

> ID：11292511
> 
> 赞同：1
> 
> 时间：2012-07-02T11:12:52.253
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2

我有两张桌子`Test1`和`Corr_table`

Test1 表创建脚本：

```
CREATE TABLE [dbo].[Test1](
    [id] [bigint] NOT NULL,
    [Country] [varchar](3) NULL,
    [PeriodKey] [varchar](max) NULL,
    [a] [varchar](3) NULL,
    [b] [varchar](3) NULL,
    [c] [varchar](3) NULL
) 
```

`Test1`数据：

```
id  Country  PeriodKey  a   b   c
1   E      201201   1   5   9
1   E      201202   1   5   9
3   G      201203   3   7   11
4   H      201204   4   8   12 
```

`Corr_table`创建脚本：

```
CREATE TABLE [dbo].[corr_table](
    [Country] [varchar](5) NULL,
    [id] [bigint] NULL,
    [Field] [varchar](10) NULL,
    [Value] [varchar](50) NULL,
    [Start_date] [varchar](50) NULL,
    [End_date] [varchar](50) NULL
) 
```

`corr_table`数据：

```
Country     id  Field   Value   Start_date  End_date
E            1  a   4       201201  201202
E            1  b   6       201201  201202 
```

现在，如果我写这个查询，

```
select
    a = case when x.Field = 'a' then x.value else a end,
    b = case when x.Field = 'b' then x.value else b end,
    y.*
from 
    dbo.Test1 y,dbo.corr_table x
where  
     y.id = 1
     and y.Country = 'E'
     and y.PeriodKey in (201201) 
```

它给出以下结果：

```
a   b   id  Country  PeriodKey  a   b   c
4   5   1   E    201201         1   5   9
1   6   1   E    201201         1   5   9 
```

而我期待以下结果：

```
a   b   id    Country   PeriodKey   a   b   c
4   6   1   E    201201         1   5   9 
```

为什么两列都没有在一行中更新？一次它只更新一列，但应该同时更新两列

即 a 应该是 4，b 应该是 6 in a single row 。但是只更新了一个，这是为什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T13:02:01.807

为了使@marc_s 的注释更加明确，生成的 SQL 如下所示：

```
select
    a = case when x.Field = 'a' then x.value else a end,
    b = case when x.Field = 'b' then x.value else b end,
    y.*
from 
    dbo.Test1 y
    INNER JOIN dbo.corr_table x ON y.Country = x.Country
where  
     y.id = 1
     and y.Country = 'E'
     and y.PeriodKey in (201201) 
```

此外，您的数据模型的列名应该更明确一点，以便关系结构显而易见 - 我不得不猜测连接条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T13:41:26.167

**为什么您的查询返回两行**

要了解为什么您的查询返回两行而不是您期望的那一行，它有助于理解 SQL Server 在执行查询时理论上采取的逻辑步骤。

第一个逻辑步骤是处理 FROM 子句。您的查询指定了两个表之间的交叉连接，`dbo.Test1`并生成一个包含 8 行`dbo.corr_table`的中间虚拟表（我们称之为）：`V1`

```
ID  COUNTRY PERIODKEY   A   B   C   FIELD   VALUE   START_DATE  END_DATE
1   E   201201  1   5   9   a   4   201201  201202
1   E   201202  1   5   9   a   4   201201  201202
3   G   201203  3   7   11  a   4   201201  201202
4   H   201204  4   8   12  a   4   201201  201202
1   E   201201  1   5   9   b   6   201201  201202
1   E   201202  1   5   9   b   6   201201  201202
3   G   201203  3   7   11  b   6   201201  201202
4   H   201204  4   8   12  b   6   201201  201202 
```

第二个逻辑步骤是处理 WHERE 子句。您的查询指定只有 ID 为 1、国家/地区为“E”和 PeriodKey 为 201201 的行应该通过。中间表中的两行满足此条件以填充另一个中间表（我们称之为`V2`）：

```
ID  COUNTRY PERIODKEY   A   B   C   FIELD   VALUE   START_DATE  END_DATE
1   E   201201  1   5   9   a   4   201201  201202
1   E   201201  1   5   9   b   6   201201  201202 
```

第三个也是最后一个逻辑步骤是处理 SELECT 子句。您的查询指定了两个新列`a`，并且`b`应该根据现有列中的值进行计算，并且表中的所有列都`dbo.Test1`应该不加修改地返回。SELECT 子句基本上是定义结果集结构的列列表。它不控制结果集中有多少行。这个中间表（我们称之为`V3`）与结果集相同：

```
a   b   id  Country  PeriodKey  a   b   c
4   5   1   E    201201         1   5   9
1   6   1   E    201201         1   5   9 
```

两者中的两行都`V2`包含您希望在结果集中看到的单行的元素。基表`dbo.Test1`中的所有列都包含相同的值，因为这些列中的值仅从`dbo.Test1`. 第一列`a`和`b`中的值是从 中的两个不同行复制而来的`dbo.corr_table`。

如果我们能够将这两行`V2`组合在一起，我们就可以制作出符合我们期望的一行。幸运的是，我们可以用 SQL 轻松地表达这一点。

**如何产生预期的结果集**

在 SQL 中，SELECT 语句具有 GROUP BY 子句，该子句将多行分组为代表组的一行。从逻辑上讲，它是在 WHERE 子句之后和 SELECT 子句之前处理的。

在您的查询中，我添加了一个 GROUP BY 子句并为每个计算列调用了一个聚合函数。此查询产生您预期的结果：

```
SELECT
  MAX(
    CASE
      WHEN dbo.corr_table.Field = 'a'
      THEN dbo.corr_table.Value
    END
  ) AS corr_a,
  MAX(
    CASE
      WHEN dbo.corr_table.Field = 'b'
      THEN dbo.corr_table.Value
    END
  ) AS corr_b,
  dbo.Test1.*
FROM dbo.Test1
INNER JOIN dbo.corr_table ON
  dbo.Test1.id = dbo.corr_table.id
WHERE
  dbo.Test1.id = 1
  and dbo.Test1.Country = 'E'
  and dbo.Test1.PeriodKey in (201201)
GROUP BY
  dbo.Test1.id,
  dbo.Test1.Country,
  dbo.Test1.PeriodKey,
  dbo.Test1.a,
  dbo.Test1.b,
  dbo.Test1.c; 
```

我现在没有更多时间解释，但稍后我会扩展我的答案，解释为什么会这样。现在，我建议您阅读有关逻辑查询处理和 SELECT 语句的内容。Itzik Ben-Gan 发布了一个有用的[PDF 流程图](http://www.sql.co.il/books/insidetsql2008/Logical%20Query%20Processing%20Poster.pdf)，解释了逻辑步骤。它被复制为下面的图像，从[sqlwithmanoj.wordpress.com](http://sqlwithmanoj.wordpress.com/2010/10/28/sql-logical-query-processing-order/)复制：

![在此处输入图像描述](../Images/c651ddacc5653ae16d13f8ca6b9397fa.png)

# sql - 选择表格的一部分供以后使用

> ID：11292512
> 
> 赞同：-2
> 
> 时间：2012-07-02T11:12:53.003
> 
> 标签：sql, sql-server

我目前正在尝试优化我的程序。我有一个大型数据库，其中包含带有时间戳的数据。我需要更新的数据只是当天的数据，所以我不想多次搜索整个数据库来只找到今天的条目。有没有办法选择一些东西，然后在几个不同的（MERGE INTO）命令中使用它？

我想选择今天的所有数据，然后在今天的每个数据条目上运行一个 while 循环（在 java 中）以更新它们。那么这甚至可能吗？或者我是否必须为每个 while 循环迭代遍历整个数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:18:25.340

如果您正在优化程序并且您的数据库带有时间戳。然后您可以做的第一件事就是为时间戳字段创建索引。这将减少您的查询执行时间，因为您的过滤条件与该时间戳字段相关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:29:06.617

使用适当的数据缓存技术，如[memcached](http://memcached.org/)，以最大程度地减少对读取量大、变化缓慢的数据的数据库命中。

# ruby-on-rails-3 - CScript 错误：Windows 脚本宿主的执行失败 - Rails rake assets:precompile

> ID：11292514
> 
> 赞同：1
> 
> 时间：2012-07-02T11:13:04.237
> 
> 标签：ruby-on-rails-3

我正在 Heroku 上部署 Rails 项目。当我使用 rake assets:precompile 它给出以下错误 -

```
rake aborted!
CScript Error: Execution of the Windows Script Host failed. (0x800A0007)

(in c:/Rails Projects/sheets_vip_rails/app/assets/javascripts/application.js)

Tasks: TOP => assets:precompile:primary
(See full trace by running task with --trace)
rake aborted!
Command failed with status (1): [c:/Ruby193/bin/ruby.exe c:/Ruby193/bin/rak...]

Tasks: TOP => assets:precompile
(See full trace by running task with --trace) 
```

谢谢你的帮助。

# rubymotion - 在 ruby motion 中更改 Map aonnation 视图的图像

> ID：11292515
> 
> 赞同：0
> 
> 时间：2012-07-02T11:13:09.930
> 
> 标签：rubymotion

我想用 ruby​​motion 语言更改 mapkit 上的 UIAnnotationView 图像。

任何人都知道这一点，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-06T19:00:26.350

一个完整的工作示例怎么样？我刚刚测试了它:)

我和一个朋友将很多 iOS 代码从 iOS Cookbook 转换为 RubyMotion

地图有一整章，但最能回答您问题的一章是：

[https://github.com/IconoclastLabs/rubymotion_cookbook/tree/master/ch_6/06_custompins](https://github.com/IconoclastLabs/rubymotion_cookbook/tree/master/ch_6/06_custompins)

就像彩色别针一样，但您的主要区别在于

```
pinImage = UIImage.imageNamed("ilpin.png")
annotationView.image = pinImage 
```

祝你好运！- 来自 Iconoclast Labs 的 Gant

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T05:29:13.950

以下代码可以很好地更改 UIAnnotationView 的图像

```
 view = MKAnnotationView.alloc.initWithAnnotation(annotation, reuseIdentifier:ViewIdentifier)
         view.image = UIImage.imageNamed("ptr.jpg")
         view.canShowCallout = true 
```

我已将图像 ptr.jpg 保存在资源文件夹中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T21:28:56.823

我想你的意思是，一个 MKAnnotationView？如果是这样，您只需要将图像属性设置为新的 UIImage。看到这个要点：

[https://gist.github.com/3049611](https://gist.github.com/3049611)

基于 RubyMotionSamples Beer 项目 - [https://github.com/HipByte/RubyMotionSamples/blob/master/Beers/app/beer_map_controller.rb](https://github.com/HipByte/RubyMotionSamples/blob/master/Beers/app/beer_map_controller.rb)

我在“资源”下添加了一个名为“signpost.png”的新图像文件，并使用新的自定义图像将代码从使用 pin 更改为使用直接注释。

# php - Magento 以编程方式保存商店地址

> ID：11292516
> 
> 赞同：0
> 
> 时间：2012-07-02T11:13:09.977
> 
> 标签：php, magento

我可以通过以下方式以编程方式保存商店地址

```
$_address=nl2br('123\nTest',false);
$config->saveConfig('general/store_information/address',$_address,'default',0); 
```

但问题是`\n`即使我使用也没有转换成新行`nl2br`。可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:49:21.960

在 php 字符串中使用 \n、\r 或 $someVar 时，您需要使用双引号。

试试这个：

```
$_address=nl2br("123\nTest",false); 
```

# java - java并发编程中所有线程都将同时启动吗？

> ID：11292517
> 
> 赞同：0
> 
> 时间：2012-07-02T11:13:13.750
> 
> 标签：java, java.util.concurrent

在我的程序中，我正在创建 2 个任务。这些任务实现了`Callable`接口。我将这些传递给 2 个线程以执行线程池类。我的问题是这两个线程会同时启动吗？在java并发编程中，所有线程都会同时启动吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T11:16:07.387

> 在Java并发编程中，所有线程将同时启动？

不，他们不会。传统的 Java SE 无法强制两个线程同时启动。（确实，如果你没有多核处理器，物理上不可能同时启动两个线程。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T22:32:59.273

如果您希望它们几乎同时开始，有几种结构可以帮助您。

您可以使用 CyclicBarrier - 您创建一个具有 2 个许可证的新 CyclicBarrier。然后每个线程调用 cbarrier.await() - 在两个线程都调用 await 之前，两个线程都不会继续执行，这使您非常接近同时执行，这就是我相信您想要的。

此外，在 Java 7 中，有一个 Phaser，它可以做几乎相同的事情，但性能应该更高。

# javascript - ckeditor getData() 不返回所有内容

> ID：11292521
> 
> 赞同：0
> 
> 时间：2012-07-02T11:13:21.630
> 
> 标签：javascript, ckeditor

当我对大量数据调用 getData() 时，我没有得到 ckeditor 的所有内容。返回的数据被截断。使用 firefox 并转到 _samples/api.html 添加大量内容并单击“Get Editor Contents”，您将看到数据被截断。由于我需要能够在 ckeditor 中处理大型文档，有什么可以帮助我的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:35:00.597

WFM。

我多次粘贴到示例站点的编辑器内容并`getData`返回整个内容。

API 示例用于`alert()`显示编辑器的内容，并且操作系统/浏览器正在截断数据以适应屏幕。请在一些 JS 控制台中检查这个。

# jquery - css旋转和对齐

> ID：11292523
> 
> 赞同：1
> 
> 时间：2012-07-02T11:13:31.787
> 
> 标签：jquery, html, css, printing, pretty-print

我试图动态创建 html，然后将自身作为 iframe 注入 jquery 以打开带有分页符的打印窗口。

我收到一个包含 id 列表的会话变量。对于每个我想创建一个块：

```
<div class="card">
    <div class="top-center">
        <div class="first-line">
            some text
        </div>
        <div class="second-line">
            some text
        </div>
        <div class="second-line">
            some text
        </div>
    </div>
    <div class="bottom-center">
        <div class="first-line">
            some text
        </div>
        <div class="second-line">
            some text
        </div>
        <div class="second-line">
            some text
        </div>
    </div>
</div> 
```

我正在使用的 JQuery 插件是：[http](http://www.position-absolute.com/creation/print/) ://www.position-absolute.com/creation/print/ 。

我想要做什么：将文本旋转 90°

```
*
{
    margin: 0px;
    padding: 0px
}
.card { 
    -webkit-transform: rotate(90deg);
    page-break-after:always;
    /* this is taken from w3schools*/
    margin-left:auto;
    margin-right:auto;
    width: 70%;
} 
```

我想您可以将其视为横向页面然后我想要的是当您将头部倾斜所需的 90° 时，顶部中心是左侧，底部中心是右侧，因为您将通过短边折叠每一页.

在垂直和水平旋转后，每个 div 底部/顶部都应该死在页面中间。

我如何使用 css 获取上述页面设置

应该看起来像这样：http: [//goo.gl/lNP8J](http://goo.gl/lNP8J)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T14:30:35.323

为了旋转内容，首先，您需要设置`transform-origin`应该用作旋转中心的点。您可能还必须为旋转的元素提供以 px 或 em 为单位的固定宽度（当我尝试以 % 为单位的宽度时，它似乎效果不佳）。并且一定要使用全范围的选择器前缀`transform`来`transform-origin`支持不同的浏览器。

类似于以下内容：

```
-webkit-transform-origin: 0 0;
-moz-transform-origin:    0 0;
-ms-transform-origin:     0 0;
transform-origin:         0 0;

-webkit-transform: rotate(90deg);
-moz-transform:    rotate(90deg);
-ms-transform:     rotate(90deg);
transform:         rotate(90deg); 
```

**编辑：**

这是一个简化版本，可能会让您更接近。在下面的 CSS 中，我为内容设置了固定宽度（在本例中为 400 像素），并强制旋转内容的顶部和左侧间距为 100 像素。在此示例中，我没有尝试将内容居中，但可以通过编辑 CSS 来调整位置（使其看起来更居中）。这不涉及多页打印（尤其是如何使用旋转内容），但希望这是朝着正确方向迈出的一步：

```
.card {
    width: 400px;
    background-color: #eee;  /* Temporary bg color, for testing */

    -webkit-transform-origin: 0 0;
    -moz-transform-origin:    0 0;
    -ms-transform-origin:     0 0;
    transform-origin:         0 0;

    -webkit-transform: translate(100px, 500px) rotate(-90deg);
    -moz-transform:    translate(100px, 500px) rotate(-90deg);
    -ms-transform:     translate(100px, 500px) rotate(-90deg);
    transform:         translate(100px, 500px) rotate(-90deg);
} 
```

这是一个[jsfiddle 演示](http://jsfiddle.net/vFmFd/)。在翻译函数中，`500px`是`400px`宽度加上`100px`顶部间距。根据需要调整宽度和`translate()`值以进行试验。

您可能必须避免使用 % 作为内容的宽度或高度（或者至少，如果您可以避免这样做，它可能会简单得多）。

# sql - UNPIVOT 后如何获取空列？

> ID：11292524
> 
> 赞同：1
> 
> 时间：2012-07-02T11:13:32.783
> 
> 标签：sql, sql-server-2008, tsql

我有以下查询：

```
WITH data AS( 
    SELECT * FROM partstat WHERE id=4
)
SELECT id, AVG(Value) AS Average
FROM (
    SELECT id, 
    AVG(column_1) as column_1, 
    AVG(column_2) as column_2, 
    AVG(column_3) as column_3 
    FROM data
    GROUP BY id
) as pvt
UNPIVOT (Value FOR V IN (column_1,column_2,column_3)) AS u
GROUP BY id 
```

如果`column_1`，`column_2`和`column_3`（或其中一列）有值，那么我得到如下结果：

> 编号，平均
> 
> 4、5.12631578947368

如果`column_1`，`column_2`并且`column_3`有`NULL`值，则查询不会返回任何行，如下所示：

> 编号，平均

我的问题是，如果列内容值，我如何获得以下结果`NULL`？

> 编号，平均
> 
> 4、空

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:23:41.673

您是否尝试过使用 COALESCE 或 ISNULL？

例如

```
ISNULL(AVG(column_1), 0) as column_1, 
```

这确实意味着您将得到 0 作为结果而不是 'NULL' -当它们都为 NULL 时你**需要null 吗？**

编辑：

另外，有没有需要一个unpivot？既然您指定了所有 3 列，为什么不这样做：

```
SELECT BankID, (column_1 + column_2 + column_3) / 3 FROM partstat
WHERE bankid = 4 
```

这为您提供相同的结果，但使用 NULL

当然，这是假设您每个 bankid 有 1 行

编辑：

据我所知，UNPIVOT 不应该像这样使用 - 我会先 unpivot 然后尝试 AVG ......让我试一试......

编辑：

啊，我收回了，这只是 NULL 的问题 - 其他帖子建议使用 ISNULL 或 COALESCE 来消除空值，您可以使用像 -1 这样可以工作的占位符值，例如

```
SELECT bankid, AVG(CASE WHEN value = -1 THEN NULL ELSE value END) AS Average 
FROM ( 
    SELECT bankid,  
    isnull(AVG(column_1), -1) as column_1 ,
    AVG(Column_2) as column_2 ,
    Avg(column_3) as column_3 
    FROM data     
    group by bankid
) as pvt 
UNPIVOT (Value FOR o in (column_1, column_2, column_3)) as u
GROUP BY bankid 
```

您需要确保这将起作用，就好像您在 column2/3 中有一个值，那么 column_1 将不再 = -1。可能值得做一个案例，看看它们是否都是 NULL，在这种情况下，用 -1 替换第一个 null

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T13:25:49.653

这是一个没有 UNPIVOT 的示例：

```
DECLARE @partstat TABLE (id INT, column_1 DECIMAL(18, 2), column_2 DECIMAL(18, 2), column_3 DECIMAL(18, 2))
INSERT @partstat VALUES 
(5, 12.3, 1, 2)
,(5, 2, 5, 5)
,(5, 2, 2, 2)
,(4, 2, 2, 2)
,(4, 4, 4, 4)
,(4, 21, NULL, NULL)
,(6, 1, NULL, NULL)
,(6, 1, NULL, NULL)
,(7, NULL, NULL, NULL)
,(7, NULL, NULL, NULL)
,(7, NULL, NULL, NULL)
,(7, NULL, NULL, NULL)
,(7, NULL, NULL, NULL)

;WITH data AS( 
    SELECT * FROM @partstat
)
SELECT  

        pvt.id,
        (ISNULL(pvt.column_1, 0) + ISNULL(pvt.column_2, 0) + ISNULL(pvt.column_3, 0))/ 
        NULLIF(
            CASE WHEN pvt.column_1 IS NULL THEN 0 ELSE 1 END +
            CASE WHEN pvt.column_2 IS NULL THEN 0 ELSE 1 END +
            CASE WHEN pvt.column_3 IS NULL THEN 0 ELSE 1 END
        , 0)
        AS Average
FROM (
    SELECT id, 
    AVG(column_1) as column_1, 
    AVG(column_2) as column_2, 
    AVG(column_3) as column_3 
    FROM data
    GROUP BY id
) as pvt 
```

# jquery - 将 jQuery.getJSON 的响应数据显示为 html

> ID：11292525
> 
> 赞同：0
> 
> 时间：2012-07-02T11:13:38.337
> 
> 标签：jquery, jsp, getjson

我需要动态创建两个选择框。我正在使用以下代码

```
function getAvailableArticlePages()
{
var maga_arti_id=jQuery('#new_article_id').val();
jQuery.getJSON("/admin/availablearticlepages.do?method=getArticlesAvailablePage"
,{maga_arti_id: ""+maga_arti_id+""}, function(data){    
jQuery('#pages td#leftpage select').html(data.Options);
jQuery('#pages td#rightpage select').html(data.Option1);
});        
} 
```

在响应 JSP 页面中，我使用以下代码

```
Options+="<option value=\""+page_id+"\">"+page_name+"</option>";
Options1+="<option value=\""+page_id+"\">"+page_name+"</option>";
out.print("{\"Options\":");
out.print("\""+Options+"\"");   
out.print(",\"Options1\":");
out.print("\""+Options1+"\"");  
out.print("}"); 
```

但它没有创建 html 选择框选项。任何人都可以说如何在 jquery.getjson() 方法中响应 html 代码本身 JSP 的内容类型应该是什么

提前谢谢托尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T13:02:43.430

是否有任何理由需要将 HTML 作为 JSON 对象传递？

看看 jQuery 函数[.load()](http://api.jquery.com/load/)。

这应该能够将选项作为 HTML 直接加载到 select 元素中。

如果您需要使用不同的选项加载两个单独的选择框，那么要么执行两个单独的查询，要么进行一个查询，返回两个选择框及其选项的 HTML。

# java - 带有 mysql 的 Tomcat：“无法为连接 URL 'null' 创建类 '' 的 JDBC 驱动程序”

> ID：11292529
> 
> 赞同：4
> 
> 时间：2012-07-02T11:13:50.477
> 
> 标签：java, mysql, tomcat, database-connection, jndi

这个问题已被多次询问和回答，但仍然无法解决我的问题。

主机操作系统是 Fedora 17

Tomcat 包 tomcat-7.0.27-2.fc17.noarch

这是我的 $CATALINA_HOME/logs/catalina.out

```
[DEBUG]: Failed to establish connection with datastore
org.apache.tomcat.dbcp.dbcp.SQLNestedException: Cannot create JDBC driver of class '' for connect URL 'null'
    at org.apache.tomcat.dbcp.dbcp.BasicDataSource.createConnectionFactory(BasicDataSource.java:1452)
    at org.apache.tomcat.dbcp.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1371)
    at org.apache.tomcat.dbcp.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044)
...
...
Caused by: java.sql.SQLException: No suitable driver
    at java.sql.DriverManager.getDriver(DriverManager.java:289)
    at org.apache.tomcat.dbcp.dbcp.BasicDataSource.createConnectionFactory(BasicDataSource.java:1437)
... 
```

这是我的 $CATALINA_HOME/conf/Catalina/localhost/ABC/ABC.xml

```
<Context path="/ABC">

<!-- maxActive: Maximum number of dB connections in pool. Make sure you
     configure your mysqld max_connections large enough to handle
     all of your db connections. Set to -1 for no limit.
     -->

<!-- maxIdle: Maximum number of idle dB connections to retain in pool.
     Set to -1 for no limit.  See also the DBCP documentation on this
     and the minEvictableIdleTimeMillis configuration parameter.
     -->

<!-- maxWait: Maximum time to wait for a dB connection to become available
     in ms, in this example 10 seconds. An Exception is thrown if
     this timeout is exceeded.  Set to -1 to wait indefinitely.
     -->

<!-- username and password: DB username and KeyDB password key (not the password itself)  -->

<!-- driverClassName: Class name for the JDBC KeyDB wrappers.  These wrappers
     replace the 'mysql_keydb_key' with its corresponding value from KeyDB
     -->

<!-- url: The JDBC connection url for connecting to your MySQL dB.
     The autoReconnect=true argument to the url makes sure that the
     mm.mysql JDBC Driver will automatically reconnect if mysqld closed the
     connection.  mysqld by default closes idle connections after 8 hours.
     -->

<Resource name="jdbc/last_db" auth="Container" type="javax.sql.DataSource" maxActive="100" maxIdle="30" maxWait="10000" username="****" password="****" driverClassName="com.mysql.jdbc.Driver" url="jdbc:mysql://localhost:3306/last_db"/>
</Context> 
```

这是我的 $CATALINA_HOME/lib 目录

```
$ ls /usr/share/tomcat/lib
annotations-api.jar      commons-collections.jar    log4j.jar                          tomcat-i18n-es.jar      tomcat-servlet-3.0-api.jar
apache-commons-dbcp.jar  commons-dbcp.jar           mysql-connector-java-5.1.0.jar  tomcat-i18n-fr.jar      tomcat-util.jar
catalina-ant.jar         commons-logging-1.1.1.jar  tomcat-api.jar                  tomcat-i18n-ja.jar
catalina-ha.jar          jasper-el.jar              tomcat-coyote.jar               tomcat-jdbc.jar
catalina.jar             jasper.jar                 tomcat-dbcp.jar                 tomcat-jsp-2.2-api.jar
catalina-tribes.jar      jasper-jdt.jar             tomcat-el-2.2-api.jar           tomcat-juli.jar 
```

这是我的 WEB-INF/web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
version="2.5">

<servlet>
    <servlet-name>jersey</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>jersey</servlet-name>
    <url-pattern>/v1/*</url-pattern>
</servlet-mapping>
<resource-ref>
    <description>DB Connection</description>
    <res-ref-name>jdbc/last_db</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
</resource-ref>

</web-app> 
```

执行代码：

```
try {
    Context initContext = new InitialContext();
    Context envContext  = (Context)initContext.lookup("java:/comp/env");
    dataSource = (DataSource) envContext.lookup("jdbc/"+dbName);
 } catch (NamingException ex) {
    System.out.println("[DEBUG]: Failed to initiate JDBC context");
    ex.printStackTrace();
    return;
 }

 try {
     connection = dataSource.getConnection();
 } catch (SQLException ex){
     System.out.println("[DEBUG]: Failed to establish connection with datastore");
     ex.printStackTrace();
     return;
 } catch (ClassNotFoundException ww){
     ww.printStackTrace();
 } 
```

mysql-connector jar 似乎在 WEB-INF/lib 中可用

```
$ jar tf ABC.war | grep mysql-connector
WEB-INF/lib/mysql-connector-java-5.1.0.jar 
```

我不知道这是否有用，但这里是端口 3306 的侦听端口信息

```
$ netstat -tln
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State      
tcp        0      0 0.0.0.0:3306            0.0.0.0:*               LISTEN 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T18:14:36.530

我想把头撞在桌子上。

问题是，而不是保留 ABC.xml $CATALINA_HOME/conf/Catalina/localhost/ABC/ABC.xml 它应该保留在这里： $CATALINA_HOME/conf/Catalina/localhost/ABC.xml

StackTrace 关于连接器驱动程序的错误非常具有误导性。

# asp.net-mvc-3 - 显示和下载带有扩展名的文本文件

> ID：11292533
> 
> 赞同：0
> 
> 时间：2012-07-02T11:14:07.120
> 
> 标签：asp.net-mvc-3, c#-4.0

我想读取一个日志文件（txt 文件）并在 txt 文件中查看它并以 txt 格式保存。这是我的代码，它可以很好地显示和下载 txt 文件中的读取内容，我在这方面几乎没有问题..

```
public FileResult Download(string id)
    {
        int rowId = Convert.ToInt32(id);
        LoadFileInfoCache();
        var fileDetails = from ff in _currentFileDetails
                          where ff.FileId == rowId
                          select new
                          {
                              name = ff.FileName,
                              location = ff.FileLocation
                          };
        var fileDetailsList = fileDetails.ToList();
        string fileLocation = fileDetailsList[0].location;
        string fileName = fileDetailsList[0].name;            
        string contentType = "application/txt";
        var file = System.IO.File.Open(fileLocation, FileMode.Open, FileAccess.Read, FileShare.ReadWrite);
        var stream = (Stream)(file);
        return File(stream, contentType, fileName);
    } 
```

当我单击保存按钮时，在另存为窗口中我想要带有扩展名的文件名。但它只为我显示文件名。而且在文本文件中，标题名称应该是 filename.txt 但它显示了我的代码的 Filename[1]。任何人都可以给出一些想法，在标题中显示带有 extn 的文件名并另存为窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:23:24.627

**更新代码**

```
public FileResult FileOutput()
            {
                string filename = "alokdida.txt";
                string filepath = "C:\\logs\\Structured_Exception_Log.txt";

                return File(filepath, "application/octet-stream", filename);
            } 
```

这应该适合你。

***第二次编辑（以粗体查看更改的代码）***

```
public FileResult Download(string id)
    {
        int rowId = Convert.ToInt32(id);
        LoadFileInfoCache();
        var fileDetails = from ff in _currentFileDetails
                          where ff.FileId == rowId
                          select new
                          {
                              name = ff.FileName,
                              location = ff.FileLocation
                          };
        var fileDetailsList = fileDetails.ToList();
        string fileLocation = fileDetailsList[0].location;
        string fileName = fileDetailsList[0].name+".txt"; // Here you need to append the .txt
        string contentType = "application/txt";
        var file = System.IO.File.Open(fileLocation, FileMode.Open, FileAccess.Read, FileShare.ReadWrite);
        var stream = (Stream)(file);
        return File(stream, contentType, fileName);
    } 
```

# perl - Perl 哈希元信息

> ID：11292539
> 
> 赞同：2
> 
> 时间：2012-07-02T11:14:35.123
> 
> 标签：perl, hash, metadata

是否可以在其中存储有关哈希的信息？我的意思是，没有以普通方式将信息添加到哈希中，这会影响键、值等。

事情是我正在将 twod_array 读入哈希，但想将顺序存储在原始数组中，而不影响如何遍历哈希等。

例如：

```
my @the_keys=keys %the_hash; 
```

不应返回有关哈希顺序的信息。

有没有办法在哈希中存储元数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T12:29:06.787

You can store arbitrary metadata with the [`tie` mechanism](http://p3rl.org/perltie). Minimal example with a package storage that does *not* affect the standard hash interface:

```
package MetadataHash;
use Tie::Hash;
use base 'Tie::StdHash';
use Scalar::Util qw(refaddr);
our %INSERT_ORDER;
sub STORE {
    my ($h, $k, $v) = @_;
    $h->{$k} = $v;
    push @{ $INSERT_ORDER{refaddr $h} }, $k;
}
1; 
```

* * *

```
package main;
tie my %h, 'MetadataHash';
%h = ( I => 1, n => 2, d => 3, e => 4 );
$h{x} = 5;
# %MetadataHash::INSERT_ORDER is (9042936 => ['I', 'n', 'd', 'e', 'x'])
print keys %h;
# 'enIxd' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T11:18:11.080

好吧，我想总是可以使用[Tie::Hash::Indexed ：](https://metacpan.org/module/Tie%3a%3aHash%3a%3aIndexed)

```
use Tie::Hash::Indexed;

tie my %hash, 'Tie::Hash::Indexed';
%hash = ( I => 1, n => 2, d => 3, e => 4 );
$hash{x} = 5;

print keys %hash, "\n";    # prints 'Index'
print values %hash, "\n";  # prints '12345' 
```

# python - Windows azure 上的 python 云应用程序

> ID：11292540
> 
> 赞同：1
> 
> 时间：2012-07-02T11:14:35.380
> 
> 标签：python, azure

您好，我是云计算和 python 的绝对初学者。我想开始使用 Python 为 Azure 开发一个密码管理器应用程序。请你能给我一些工具来开始我的项目吗？（哪些应用程序 - 要使用的框架）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:31:32.423

Python 应用程序通常在 Windows Azure 中运行，因为它们可以在其他任何地方运行，因为它们将在 Web 或 Worker 角色（基本上是 Windows Server 2008 R2 或 SP2 VM）或虚拟机（Windows Server 或 Linux）中运行您管理的图像）。您只需要为您的应用程序提供 python sdk 和支持库。

话虽如此：Windows Azure 有一个 python sdk 来与 Windows Azure 的服务交互（今天这包括服务总线和存储，Windows Azure 服务的一个子集）。安装 Windows Azure sdk 时，您还将安装 python 2.7。您可以在 Python 的 Python 开发门户中获取安装程序，[此处](https://www.windowsazure.com/en-us/develop/python/)为。在此门户中，您还可以找到一些在 Windows Azure 中使用 python 的教程。

如果您想查看适用于 Python 的 Windows Azure SDK 的源代码，可以在 github 上找到它，[这里](https://github.com/WindowsAzure/azure-sdk-for-python)是。

# javascript - 用于 16mb ram ARM 设备的 V8 javascript

> ID：11292542
> 
> 赞同：2
> 
> 时间：2012-07-02T11:14:51.050
> 
> 标签：javascript, v8

我是为 ARM9 设备开发嵌入式应用程序的团队的一员，该设备具有 16mb 内存和自己的操作系统。我们目前正在使用 C 语言进行开发，但都致力于将语言转换为其他语言。

目前 C++ 和 Haskell 是不错的候选者，但我正在考虑 Coffee-script。问题是 Chrome 的 v8 引擎是否会使用大量内存来使其成为可行的替代方案？如果是这样，还有其他可能适合该法案的吗？

忘了提一下，我需要与系统上安装的 C 库轻松互操作。由于我们今天拥有的大多数代码都是 C 代码，并且将有很长的重写周期，因此使用 C 函数不应该是一件麻烦事（必须创建绑定等）。

不幸的是，我们还受到旧编译器（GCC 3.4.3）的约束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:32:19.740

任何具有自动内存管理的语言总是会有内存开销，而任何动态类型的语言总是会增加一些开销。因此，如果您被限制在 16 MiB 并且想要挤出很多空间，请使用静态类型和显式内存管理的东西，这意味着 C++。

现代 C++（好的，gcc 3.4.3 中没有 C++11 功能，但标准库已经存在并且应该可以编译）仍然会为您完成大部分内存管理，同时仍然保持较低的开销。并且几乎向后兼容 C 使得与现有库的互操作变得微不足道。

如果您不需要挤出那么多，许多语言都可以。[Mono](http://mono-project.org)似乎很有前途，因为它是最小的托管运行时之一，速度相当快，可移植，并且有多种针对它的语言（C#、F#、boo 等）。但我想即使是 JavaScript 也应该这样做；它的解释器非常小，如果您不需要内存中有那么多对象，即使单独分配所有内容的所有开销，它们也能适应。

# php - 我如何将 NSMutable 数组发布到目标 c 中的 php 文件

> ID：11292544
> 
> 赞同：1
> 
> 时间：2012-07-02T11:14:52.767
> 
> 标签：php, iphone, xml, nsmutablearray

我是 iPhone 编程的新手。

我有一个`NSMutableArray`我想`POST`将该阵列添加到服务器`php`文件并更新我的服务器`xml`文件。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:34:48.523

你可能需要这个代码..

*在 .h 中声明NSURLConnection* * *postConnection*的引用并使其成为属性并在 .m 文件中合成...

```
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:@"yourPhpUrl.php"]];

[request setHTTPMethod:@"POST"];

NSMutableDictionary *jsonDict = [[NSMutableDictionary alloc] init];
[jsonDict setValue:yourArray forKey:@"userName"];
NSLog(@"JSON Dict: %@",jsonDict);//Check your array here...

NSData *jsonData = [NSJSONSerialization dataWithJSONObject:jsonDict options:kNilOptions error:nil];
NSString *jsonString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];
NSLog(@"JSON String: %@",jsonString); //Check your post String here...

[request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];

[request setValue:@"json" forHTTPHeaderField:@"Data-Type"];
[request setValue:[NSString stringWithFormat:@"%d", [jsonData length]] forHTTPHeaderField:@"Content-Length"];
[request setHTTPBody: jsonData];

self.postConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:true]; 
```

这可能会帮助你

# iphone - iOS 中缓存的 NSURLRequest 内存大小

> ID：11292551
> 
> 赞同：0
> 
> 时间：2012-07-02T11:15:12.140
> 
> 标签：iphone, objective-c, ios, nsurlconnection, nsurlcache

您为缓存（内存）指定的 memorySize 是映射到磁盘还是正在使用的实际内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:12:41.643

`memoryCapacity`指定内存缓存的大小。它没有映射到磁盘，它是真正的内存。

`diskCapacity`指定磁盘缓存的大小 -[在 iOS 5 及更高版本上。](http://petersteinberger.com/blog/2012/nsurlcache-uses-a-disk-cache-as-of-ios5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:30:12.050

IT 是映射到磁盘的缓存（内存），而不是真正的内存。

# sparql - 如何使用 SPARQL 将我在 dbpedia 中的搜索限制为仅“人员”

> ID：11292552
> 
> 赞同：0
> 
> 时间：2012-07-02T11:15:16.857
> 
> 标签：sparql, dbpedia

我正在使用查询来输出维基百科中列出的所有人的影响（如果可能）。我正在使用[http://dbpedia.org/snorql/](http://dbpedia.org/snorql/)。到目前为止，我的代码是：

```
SELECT *
WHERE {
?p a
<http://dbpedia.org/ontology/Person> .
?p <http://dbpedia.org/ontology/influenced> ?influenced.
} 
```

问题是受影响的输出包括诸如流派和政治意识形态之类的东西。我想将其限制为仅输出“人”和“受这些**人**影响的人”。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T11:25:24.407

尝试：

```
SELECT *
WHERE {
?p a
<http://dbpedia.org/ontology/Person> .
?p <dbpedia-owl:birthYear> ?birthYear.
?p <http://dbpedia.org/ontology/influenced> ?influenced.
?influenced a <http://dbpedia.org/ontology/Person>.
} 
```

**编辑添加出生年份**

# android - Android：下载后图片在图库中不可见

> ID：11292553
> 
> 赞同：2
> 
> 时间：2012-07-02T11:15:18.150
> 
> 标签：android

我想知道是否有人可以对以下问题有所了解。

我正在将图像从网站下载到我的移动 Android 设备 (HTC Desire HD) 上的特定文件夹中。图像下载完美（我使用 ES Explorer 看到了这一点）。它们没有损坏，因为我可以查看图像。

当我的应用程序使用 Gallery 控件查看图像时，Gallery 是空白的！！！

玩了一段时间后，我发现如果我卸载 SD 卡然后重新安装它，图像就会显示在 Gallery 控件中。

有谁知道为什么会发生这种情况，如果是，有解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-27T09:09:03.730

我试试这个，它对我有用..希望它对其他人有帮助..

```
 MediaScannerConnection.scanFile(this, new String[] { f.getAbsolutePath()},
            null,
 new MediaScannerConnection.OnScanCompletedListener() {
    @Override
    public void onScanCompleted(String path, Uri uri) {

    }
    }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T11:22:45.737

从网络下载文件后，只需将广播发送到您的设备 MediaScanner，

向您设备中的**MediaScannerConnection**发送广播，例如，

```
mContext.sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://" + Environment.getExternalStorageDirectory()))); 
```

实际上，在 android 设备库应用程序中，在重新安装 SD 卡或重新启动设备时扫描所有媒体文件。根据您的要求，您必须通过代码手动完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T11:39:04.213

请检查您是否已授予权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

在您的清单文件中。

这将不允许您的应用程序在 sd 卡上写入图像，如果不是这种情况，另一个问题可能是您在 sd 卡中没有存在的文件夹。

# java - Java 堆空间 outOfMemoryError

> ID：11292554
> 
> 赞同：-6
> 
> 时间：2012-07-02T11:15:20.193
> 
> 标签：java, parameters, runtime, heap-memory

为了避免`java.lang.outOfMemoryError`我去控制面板-->Java-->Java-->查看并设置运行时参数。但它不会产生任何变化。

这是一个简单的程序，我通过命令提示符运行。最初我使用运行代码`java -Xmx1024m PercolExp(class_name)`并且它运行了。但是，当我在 Java 控制面板中更改 Java 运行时参数设置并通过简单地键入来运行代码`java PercolExp`时，不会考虑堆大小参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:25:54.420

您找到的控制面板是（我认为）[这个](http://docs.oracle.com/javase/1.5.0/docs/guide/deployment/deployment-guide/jcp.html#java)。如果您阅读我链接的页面，您会发现它是您的 Web 浏览器使用的 Java 插件的控制面板。它只影响用于在网页中运行小程序的嵌入式 JVM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T13:57:36.457

Java 控制面板控制小程序和 Java Web Start 应用程序的 Java 运行时环境的设置。如果您从命令行 ( `java AppName`) 运行应用程序，则不会考虑这些参数：您每次都需要手动指定它们。

# spring - 有人用 Spring-Hibernate 配置了 Coldfusion 8 吗？

> ID：11292556
> 
> 赞同：1
> 
> 时间：2012-07-02T11:15:28.337
> 
> 标签：spring, hibernate, coldfusion, coldfusion-8

我想用 Spring 框架中的模型和 Hibernate 中的数据访问层、Coldfusion 中的视图和控制器运行应用程序 [MVC]。

有没有人配置过这样的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:22:40.453

[Palladium](https://github.com/mnimer/palladium)允许您使用ColdFusion 作为视图层，但其他一切都由 Spring MVC 控制。

Mike Nimer 有[一篇](http://www.mikenimer.com/?p=371)关于在 ColdFusion 中设置 Spring 的博客文章。

我用连接到 FW/1 的 Spring bean 工厂编写了一个概念证明，但它从未超出原型设计阶段。即它可以工作，但还没有被测试为生产价值。

# sql - SQL Server 插入特殊字符

> ID：11292562
> 
> 赞同：0
> 
> 时间：2012-07-02T11:15:49.567
> 
> 标签：sql

嗨，我试图插入`'s`SQL 服务器，我搜索了要替换`'s`的解决方案，`''s`然后插入它是有效的解决方案还是给我其他解决方案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T11:17:22.473

如果要使用单引号插入值`'`，则必须通过单引号对其进行转义。所以你做的是对的。

您可能会看到这篇文章：[SQL SERVER – 如何转义单引号](http://blog.sqlauthority.com/2008/02/17/sql-server-how-to-escape-single-quotes-fix-error-105-unclosed-quotation-mark-after-the-character-string/)

# mysql - 条件JOIN根据主表字段的INSTR判断表

> ID：11292563
> 
> 赞同：0
> 
> 时间：2012-07-02T11:15:50.203
> 
> 标签：mysql, join, conditional

这里有点不寻常的要求，不幸的是，这归结为一个糟糕的表设计，在开发过程中很长一段路要走！

我有 3 张桌子`repairs`，，，，`staff``technicians`

维修表包含有关在我的系统中预订的维修任务的所有信息。这包含一个“技术人员”字段，该字段将包含工作人员的 ID（来自表工作人员）或外包（异地）技术人员（来自表技术人员）的 ID，在后一种情况下，ID 将具有“T”的前缀

因此，由于后一种情况前缀，我需要能够获取该 T 并使用它来确定我的 SQL 查询是否需要 JOIN 表`staff`或表`technicians`

所以，我有一个相当简单的 SQL 查询：

```
SELECT technicians.screenName,

    repairs.turnAround, repairs.technician, repairs.dateIn, repairs.Type, 
    invoices.status, invoices.grossTotal 

    FROM repairs 
    LEFT JOIN invoices ON repairs.invNo=invoices.id 
    LEFT JOIN technicians ON technicians.id = REPLACE(repairs.technician, 'T','')

WHERE repairs.id ='REQUIRED JOB ID' ORDER BY repairs.dateIn DESC 
```

这可以正常工作，并且在我有外包技术人员的所有情况下都可以克服“T”前缀。

但...

如果我尝试加入`staff`表，ID 会混淆。

所以我需要一个条件连接，例如：

```
 LEFT JOIN
      WHEN instr(repairs.technican,'T') > 0 THEN 
          JOIN TECHNICIANS TABLE
      ELSE
          JOIN STAFF TABLE
      END 
```

我在这里可以看到的另一个问题是，`technicans.screenName`如果我不加入表，则包含在字段列表中的字段将不起作用`technicians`，但是，因为`staff`表包含一个字段`screenName`，如果我加入了该表，我将需要该字段一个没有表前缀的模棱两可的字段名称`screenName`应该可以工作，不是吗？

编辑：我可能应该补充一点，上面的条件连接示例不起作用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:55:12.197

您可以使用包含/排除`INSTR`条件加入两个表，然后显示非空值：

```
SELECT COALESCE(technicians.screenName, staff.screenName) AS screenName,

repairs.turnAround, repairs.technician, repairs.dateIn, repairs.Type, 
invoices.status, invoices.grossTotal 

FROM repairs 
LEFT JOIN invoices ON repairs.invNo=invoices.id 
LEFT JOIN technicians ON instr(repairs.technican,'T') > 0 AND technicians.id = REPLACE(repairs.technician, 'T','')
LEFT JOIN staff ON instr(repairs.technican,'T') = 0 AND staff.id = repairs.technician

WHERE repairs.id ='REQUIRED JOB ID' ORDER BY repairs.dateIn DESC 
```

# javascript - 在javascript中检索json对象的值

> ID：11292569
> 
> 赞同：0
> 
> 时间：2012-07-02T11:16:29.817
> 
> 标签：javascript, ajax, json

我正在向服务器发送 AJAX 请求，并使用 javascript 代码从服务器将响应作为 json 对象检索到我的 android 应用程序。我知道 json 对象的键值（ID、名称、状态等），但我不知道如何获取它们的值。（100、标记、成功等）我需要这些数据来处理其他一些任务. 有人可以告诉我如何从该 json 对象中提取数据。当我使用 alert(http.responseText); 如下我得到显示的json对象。我需要从中获取价值。

**用于接收响应的方法**

```
http.onreadystatechange = function() { //Handler function for call back on state change.
    if(http.readyState == 4) {
        alert(http.responseText); 
```

**我收到的 json 对象**

```
{"header": {"ID":100,"name:"Mark"},"body":{"status":"success"}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:19:44.713

您需要使用以下方法将其转换为 JavaScript 对象[`JSON.parse`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/parse)：

```
var obj = JSON.parse(http.responseText); 
```

由于一些旧版浏览器不支持原生 JSON，因此您应该包含[json2.js](https://github.com/douglascrockford/JSON-js/raw/master/json2.js)来为这些浏览器填充它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T11:20:08.977

您必须通过执行将字符串转换为对象`var response=JSON.parse(http.responseText);`

就像对待任何物体一样对待它 -`console.log(response['name'])`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T11:20:34.960

您将不得不评估 http.responseText 以获取 json 对象...

但不推荐使用 eval，所以可以使用[json2](https://github.com/douglascrockford/JSON-js)库将文本解析为 json 对象。

否则您甚至可以使用 jquery 之类的库并使用函数 parseJSON 将其转换为 json 对象

# windows-mobile - 无法获取新的服务器锚点

> ID：11292570
> 
> 赞同：0
> 
> 时间：2012-07-02T11:16:34.023
> 
> 标签：windows-mobile, synchronization, microsoft-sync-framework

我收到错误消息：

> 无法获取新的服务器锚点。确保您可以建立到服务器数据库的连接并且正确指定了 DbServerSyncProvider 的 SelectNewAnchorCommand 属性。

在 Windows Mobile 中将 SQL Server DB 与 Compact DB 同步时发生这种情况：

```
Dim syncStats As Microsoft.Synchronization.Data.SyncStatistics = syncAgent.Synchronize() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:55:13.643

> 我在 Visual Studio 2008 中制作了一个智能设备项目。我使用设计器向导在 SQL Server DB（存在于其他计算机）和 Compact DB（存在于当前应用程序）之间创建同步。向导使用 WCF 服务库与服务器 DB 进行交互。当我更改 WCF 的 app.config 中的连接字符串时出现上述错误。

我首先想到的是该设备无法连接到您的服务器数据库。*如果设备本身*无权建立与服务器的连接，您的连接字符串是使用*集成安全性*还是*包含 SQL 用户名和密码*都无关紧要。

 *使用这个不同的连接字符串，你可以直接连接到服务器（不使用同步）吗？

**例子：**

```
Private Function DatabaseConnect(ByVal connection As String) As DateTime
  Dim dateTime As DateTime = New DateTime(1900, 1, 1)
  Dim obj As New Object()
  Using cmd As New SqlCommand("SELECT GETDATE();", New SqlConnection(connection))
    cmd.Connection.Open()
    obj = cmd.ExecuteScalar()
  End Using
  If (Not obj Is DBNull.Value) Then
    dateTime = DirectCast(obj, DateTime)
  End If
  Return dateTime
End Function 
```

另一件要注意的事情：*您要连接的其他数据库是否支持同步？*我们这里有多个数据库，包括一个较旧的 SQL 2000 数据库。它不支持同步。

尝试简化您的项目以缩小发生错误的范围。

目前，使用向导、同步和 WCF 有太多未知数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:41:14.633

我的问题已经解决了。我没有使用 sql 2008，而我的复制紧凑型数据库是从 SQL Server 2008 创建的。数据库的架构也不正确。现在在 sql server 和 compact DB 之间完成了同步。*

# python - Python列表理解和多次引用一个对象

> ID：11292578
> 
> 赞同：2
> 
> 时间：2012-07-02T11:16:57.713
> 
> 标签：python, list-comprehension

这是一个人为的示例，用于演示在 for 循环和列表理解中多次引用同一个字典项。首先，for循环：

```
dict_index_mylists = {0:['a', 'b', 'c'], 1:['b', 'c', 'a'], 2:['c', 'a', 'b']}

# for-loop
myseq = []
for i in [0, 1, 2]:
    interim = dict_index_mylists[i]
    if interim[0] == 'b' or interim[1] == 'c' or interim[2] == 'a':    
        myseq.append(interim) 
```

在 for 循环中，临时列表从字典对象中引用，然后在 if 条件中被多次引用，如果字典非常大和/或在存储中，这可能特别有意义。再说一次，“临时”引用可能是不必要的，因为 Python 字典已针对性能进行了优化。

这是 for 循环的列表理解：

```
# list-comprehension
myseq = [dict_index_mylists[i] for i in [0, 1, 2] if dict_index_mylists[i][0] == 'b' or dict_index_mylists[i][1] == 'c' or dict_index_mylists[i][2] == 'a'] 
```

问题是：

一种。列表理解是否多次引用字典项目，还是引用并保留一个本地“临时”列表以进行处理？

湾。在同一个字典项上包含多个条件并且字典非常大的最佳列表理解表达式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:34:47.207

You seem to be asking only about optimization of common sub-expressions. In your list comprehension, it will index into the dictionary multiple times. Python is dynamic, it is difficult to know what side effects an operation like `dict_index_mylists[i]` might have, so CPython simply executes the operation as many times as you tell it to.

Other implementations like PyPy use a JIT and may optimize away subexpressions, but it is difficult to know for sure what it will do ahead of time.

If you are very concerned with performance, you need to time various options to see which is best.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:42:54.857

我不是查看 python 字节码的专家，但这是我今天早上尝试学习新东西的尝试：

```
def dostuff():
    myseq = [dict_index_mylists[i] for i in [0, 1, 2] if dict_index_mylists[i][0] == 'b' or dict_index_mylists[i][1] == 'c' or dict_index_mylists[i][2] == 'a']

import dis
dis.dis(dostuff) 
```

如果您查看输出（如下），则有 4 次调用`LOAD_GLOBAL`，因此看起来 python 没有存储临时列表。至于你的第二个问题，你所拥有的可能是你能做到的。不过，它并没有你想象的那么糟糕。 `dict`对象通过散列函数访问项目，因此它们的查找复杂度`O(1)`与字典大小无关。当然，您总是可以使用`timeit`和比较这两种实现（使用循环和列表比较），然后选择更快的一种。剖析（一如既往）是您的朋友。

**APENDIX (output of dis.dis(dostuff))**

```
5           0 BUILD_LIST               0
            3 DUP_TOP             
            4 STORE_FAST               0 (_[1])
            7 LOAD_CONST               1 (0)
           10 LOAD_CONST               2 (1)
           13 LOAD_CONST               3 (2)
           16 BUILD_LIST               3
           19 GET_ITER            
      >>   20 FOR_ITER                84 (to 107)
           23 STORE_FAST               1 (i)
           26 LOAD_GLOBAL              0 (dict_index_mylists)
           29 LOAD_FAST                1 (i)
           32 BINARY_SUBSCR       
           33 LOAD_CONST               1 (0)
           36 BINARY_SUBSCR       
           37 LOAD_CONST               4 ('b')
           40 COMPARE_OP               2 (==)
           43 JUMP_IF_TRUE            42 (to 88)
           46 POP_TOP             
           47 LOAD_GLOBAL              0 (dict_index_mylists)
           50 LOAD_FAST                1 (i)
           53 BINARY_SUBSCR       
           54 LOAD_CONST               2 (1)
           57 BINARY_SUBSCR       
           58 LOAD_CONST               5 ('c')
           61 COMPARE_OP               2 (==)
           64 JUMP_IF_TRUE            21 (to 88)
           67 POP_TOP             
           68 LOAD_GLOBAL              0 (dict_index_mylists)
           71 LOAD_FAST                1 (i)
           74 BINARY_SUBSCR       
           75 LOAD_CONST               3 (2)
           78 BINARY_SUBSCR       
           79 LOAD_CONST               6 ('a')
           82 COMPARE_OP               2 (==)
           85 JUMP_IF_FALSE           15 (to 103)
      >>   88 POP_TOP             
           89 LOAD_FAST                0 (_[1])
           92 LOAD_GLOBAL              0 (dict_index_mylists)
           95 LOAD_FAST                1 (i)
           98 BINARY_SUBSCR       
           99 LIST_APPEND         
          100 JUMP_ABSOLUTE           20
      >>  103 POP_TOP             
          104 JUMP_ABSOLUTE           20
      >>  107 DELETE_FAST              0 (_[1])
          110 STORE_FAST               2 (myseq)
          113 LOAD_CONST               0 (None)
          116 RETURN_VALUE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T11:44:03.220

First point: nothing (expect 'myseq') is "created" here, neither in the forloop nor in the listcomp versions of your code - it's just a reference to the existing dict item.

Now to answer you questions : the list comp version will make a lookup (a call to `dict.__getitem__` for each of the `dict_index_mylists[i]` expressions. Each of these lookup will a return a reference to the same list. You can avoid these extra lookups by retaining a local reference to the dict's items, ie :

```
myseq = [
    item for item in (dict_index_mylists[i] for i in (0, 1, 2)) 
    if item[0] == 'b' or item[1] == 'c' or item[2] == 'a'
    ] 
```

but there's no point in writing a listcomp just for the sake of writing a listcomp.

Note that if you don't care about the original ordering and want to apply this to your whole dict, using `dict.itervalues()` would be simpler.

wrt/ the second question, "optimal" is not an absolute. What do you want to optimize for ? space ? time ? readability ?

# plone - LinguaPlone - 仅链接到可用的翻译

> ID：11292587
> 
> 赞同：3
> 
> 时间：2012-07-02T11:17:42.140
> 
> 标签：plone, linguaplone

当在 Plone (v4) 中与 LinguaPlone 产品 (v4.1.2) 一起使用页面翻译时，会生成指向在 LinguaPlone 设置 ( `/<PORTAL>/@@language-controlpanel`) 中选择的所有可用语言的链接。我想知道是否可以将其配置为仅链接到页面的可用翻译（也不包括链接中的当前语言）。即使在`/<PORTAL>/portal_languages/manage_configForm`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T13:59:59.157

您必须自定义`plone.app.i18n.locales.languageselector`viewlet 并调整`available`方法以仅显示那些有 ( `context.getTranslations`)翻译的语言

但是，这将阻止访问者切换到门户的另一种语言，以防当前上下文没有翻译成该语言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T12:53:05.993

您应该为此使用 [http://pypi.python.org/pypi/collective.portlet.lingualinks](http://pypi.python.org/pypi/collective.portlet.lingualinks)插件。

全局语言切换器在头部显示支持的语言，不应用于在翻译内容之间导航。

# c# - 在客户端-服务器之间传递可空值的最佳方式

> ID：11292588
> 
> 赞同：2
> 
> 时间：2012-07-02T11:17:55.260
> 
> 标签：c#, .net, parameters, nullable

假设我有双倍长度，它可以是真实长度，也可以是尚未准备好，因为我们在服务器中还没有长度，也没有任何东西可以发送给客户端。我们需要将此长度从服务器传递给客户端，作为固定数据协议的一部分。客户端当前只使用一次长度，但将来可能会使用更多。

1.  通过 double length 和 bool isLengthValid，并在每个使用长度的地方，检查是否 isLengthValid -没有混合数据类型的清洁设计，但用户必须记住检查

2.  双传？长度，并且在您使用长度的每个地方，检查长度==空 - 设计是否清晰（因为它是可空的），但如果您查看和类型。另外——如果有人在没有检查的情况下使用也会有例外（好与坏，取决于你如何看待它）

3.  制作一个类 Length 而不是 double。该类将具有 GetLengthIfYouCheckedIt 或其他内容的清晰接口。可读性很强，很难出错，但设计有点过头了。

你的解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T11:26:52.583

我说选项2：

*   您想要的正是引入可空值的原因。
*   与其添加方法来检查它是否是有效数字，不如使用内置的`Nullable<double>.HasValue`，就像它本来的意思一样。
*   为 Length 创建一个类使其双重封闭：它仅适用于 LENGTH 并且它拥有一个`Double`. `DateTime`想想你必须为 TIME/ 、 MONEY/等创建和维护多少这样的类`Decimal`。它永远不会结束。
*   选项 1 只是您自己`Nullable<T>`用另一个名称滚动重新包装。

换句话说，执行 DRY 原则，并使用[`Nullable<T>`](http://msdn.microsoft.com/en-us/library/1t3y8s4s%28v=vs.80%29.aspx);)

高温下，

呸。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T11:21:53.090

我会通过一个`double?`. 这本质上是一个双精度值 + 一个布尔值，表示它是否有效，因此使用 1) 选项只会重新发明可空值。我认为 3) 选项是矫枉过正。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T11:39:18.630

我的建议是使用可空的像这个公共双精度？长度;

您将获得诸如 Length.HasValue 和 Length.Value 之类的方法，这将使代码易于阅读和更快地使用（我的意思是无需为您更快地编写新类等）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T11:19:45.710

为什么不将其保留为长度参数而是返回`-1`？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T11:53:03.433

如果可能的话，我建议使请求异步，以便在数据实际准备好之前不要向客户端返回任何内容。

如果这不可能，请使用第二个选项。

# objective-c - 在 iOS 中逐字符读取文件

> ID：11292589
> 
> 赞同：3
> 
> 时间：2012-07-02T11:17:58.227
> 
> 标签：objective-c, ios, xcode, file

基本上我有一个问题，需要单独使用Objective C来解决。（我试过用C）

*   目标C中是否有任何适当的方法可以从放置在文档目录中的文件中逐个字符（直到EOF）读取。因此，我将在文件中的所有引号之前附加一个转义字符，并在每行之前附加一个特殊字符（比如 /）。

    *代替*

    （类型==“项目”）

    *和*

    /(doc.type == \"项目\")

如果您觉得我的方法不正确，还有其他方法可以有效地完成此任务吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T11:54:05.760

从文件中获取所有行，进行更改，例如替换字符或添加更多文本，然后保存文件。

```
NSString *objPath = [[NSBundle mainBundle] pathForResource:@"textfile" ofType:@"txt"];
NSData *objData = [[NSData alloc] initWithContentsOfFile:objPath];

NSString *objString = [[NSString alloc] initWithData:objData encoding:NSUTF8StringEncoding];
NSMutableArray *lines = [NSMutableArray arrayWithArray:[objString componentsSeparatedByString:@"\n"]];

for (int i = 0; i < lines.count; i++) {
    NSString *oneLine = [lines objectAtIndex:i];
    if (oneLine.length < 2) {
        continue;
    }
    oneLine = [NSString stringWithFormat:@"/%@", oneLine];
    oneLine = [oneLine stringByReplacingOccurrencesOfString:@"`" withString:@"\`"];

    [lines replaceObjectAtIndex:i withObject:oneLine];        
}
NSString *finalString = [lines componentsJoinedByString:@"\n"];
//save the file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T11:23:12.340

您可以使用 NSFileHandle 并调用 readDataAtLength: 值为 1。

# c# - 将图像保存到 ASP.NET 服务器上的虚拟文件夹时出现“GDI+ 中发生一般错误”

> ID：11292595
> 
> 赞同：1
> 
> 时间：2012-07-02T11:18:29.647
> 
> 标签：c#, asp.net, image, gdi+

我有以下编码来调整图像大小并将其保存到我的虚拟文件夹“vicpic/scimages”

```
 if (FileUpload5.PostedFile != null)
    {
        if (FileUpload5.PostedFile.ContentLength > (1024 * 1024))
        {
            Label4.Text = "Upload status: The file has to be less than 1 MB. Please resize your photo and than upload it again.";
        }
        else
        {
            System.Drawing.Image imageToBeResized = System.Drawing.Image.FromStream(FileUpload5.PostedFile.InputStream);
            int imageHeight = imageToBeResized.Height;
            int imageWidth = imageToBeResized.Width;
            int maxHeight = 660;
            int maxWidth = 560;
            imageHeight = (imageHeight * maxWidth) / imageWidth;
            imageWidth = maxWidth;
            if (imageHeight > maxHeight)
            {
                imageWidth = (imageWidth * maxHeight) / imageHeight;
                imageHeight = maxHeight;
            }
            Bitmap bitmap = new Bitmap(imageToBeResized, imageWidth, imageHeight);
            System.IO.MemoryStream stream = new MemoryStream();
            // bitmap.Save(stream, System.Drawing.Imaging.ImageFormat.Jpeg);
            stream.Position = 0;
            byte[] image = new byte[stream.Length + 1];
            stream.Read(image, 0, image.Length);

            string FileName = Path.GetFileName(FileUpload5.PostedFile.FileName);
            //Save files to disk
            string extension = Path.GetExtension(FileUpload5.PostedFile.FileName);
            //Path.Combine(Server.MapPath("~/vicpic/scimages"), imageName);
            string imagename = DropDownList2.SelectedItem.Text + "4" + extension;

            bitmap.Save(Server.MapPath("~/vicpic/scimages/") + imagename);

            bitmap.Dispose();
            imageToBeResized.Dispose();
            GC.Collect();

            try
            {
                con.Open();
                cmd.ExecuteNonQuery();
            }

            catch (Exception ex)
            {
                Response.Write(ex.Message);
            }

            finally
            {
                con.Close();
                con.Dispose();
                Label4.Text = "Upload status:Successfully.";

            }
        }

    } 
```

但它显示 GDI+ 中发生一般错误

谁能建议问题出在哪里？

我想将图像保存在我的主机服务器上的“vicpic/scimages”文件夹中。它是虚拟目录，我还授予了该目录所需的所有权限。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T11:34:30.193

我遇到过同样的问题。似乎在保存对象时必须打开创建对象的内存流。不要重复代码和文本，只需看看这个问答：[GDI+, JPEG Image to MemoryStream 发生一般错误](https://stackoverflow.com/questions/1053052/a-generic-error-occurred-in-gdi-jpeg-image-to-memorystream)

因此，`bitmap.Save(Server.MapPath("~/vicpic/scimages/") + imagename);`您的代码可能看起来像这样：

```
using (var m = new MemoryStream())
{
       bitmap.Save(m, ImageFormat.Jpeg);
       var img = Image.FromStream(m);
       img.Save(Server.MapPath("~/vicpic/scimages/") + imagename);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-20T06:31:53.403

我知道这是一个老问题，但这只是我想提供的意见，如果它可以帮助有同样问题的人，那么这就是我想要的。我在我的一个网站上遇到了这个错误，我不知道发生了什么，所以在 STACK 上找到了一些答案后，我意识到这是一个权限错误。修复后一切都很好，但后来我在我的另一个网站上遇到了同样的错误，我立即更改了文件夹的权限，但这次它没有修复它。经过几天的努力，我意识到问题只是文件夹名称拼写错误。

# javascript - 如何在 WebGL 中使用多个纹理？

> ID：11292599
> 
> 赞同：8
> 
> 时间：2012-07-02T11:18:35.967
> 
> 标签：javascript, opengl-es, textures, webgl

我想在一个立方体上使用 6 种不同的纹理，每边一个，但找不到错误。这是我当前的代码：

```
 var texturen = new Array();
function initTexture(sFilename,texturen)  
{
  var anz = texturen.length;
  texturen[anz] = gl.createTexture();
  texturen[anz].image = new Image();
  texturen[anz].image.onload = function()    
  {
  gl.bindTexture(gl.TEXTURE_2D, texturen[anz]);
  gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);
  gl.texImage2D
  (gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, texturen[anz].image);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
  gl.bindTexture(gl.TEXTURE_2D, null);
  }
  texturen[anz].image.src = sFilename;
} 

var mvMatrix = mat4.create();
var mvMatrixStack = [];
var pMatrix = mat4.create();

function mvPushMatrix() {
    var copy = mat4.create();
    mat4.set(mvMatrix, copy);
    mvMatrixStack.push(copy);
}

function mvPopMatrix() {
    if (mvMatrixStack.length == 0) {
        throw "Invalid popMatrix!";
    }
    mvMatrix = mvMatrixStack.pop();
}

function setMatrixUniforms() {
    gl.uniformMatrix4fv(shaderProgram.pMatrixUniform, false, pMatrix);
    gl.uniformMatrix4fv(shaderProgram.mvMatrixUniform, false, mvMatrix);
}

function degToRad(degrees) {
    return degrees * Math.PI / 180;
}

var cubeVertexPositionBuffer;
var cubeVertexTextureCoordBuffer;
var cubeVertexIndexBuffer;
var cubeVertexPositionBuffer1;
var cubeVertexTextureCoordBuffer1;
var cubeVertexIndexBuffer1;

function initBuffers() {
    cubeVertexPositionBuffer = gl.createBuffer();
    gl.bindBuffer(gl.ARRAY_BUFFER, cubeVertexPositionBuffer);
    vertices = [
        // Front face
        -1.0, -1.0,  1.0,
         1.0, -1.0,  1.0,
         1.0,  1.0,  1.0,
        -1.0,  1.0,  1.0,

        // Back face
        -1.0, -1.0, -1.0,
        -1.0,  1.0, -1.0,
         1.0,  1.0, -1.0,
         1.0, -1.0, -1.0,

        // Top face
        -1.0,  1.0, -1.0,
        -1.0,  1.0,  1.0,
         1.0,  1.0,  1.0,
         1.0,  1.0, -1.0,
    ];
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);
    cubeVertexPositionBuffer.itemSize = 3;
    cubeVertexPositionBuffer.numItems = 12;

cubeVertexPositionBuffer1 = gl.createBuffer();
    gl.bindBuffer(gl.ARRAY_BUFFER, cubeVertexPositionBuffer1);
    vertices = [
       // Bottom face
        -1.0, -1.0, -1.0,
         1.0, -1.0, -1.0,
         1.0, -1.0,  1.0,
        -1.0, -1.0,  1.0,

        // Right face
         1.0, -1.0, -1.0,
         1.0,  1.0, -1.0,
         1.0,  1.0,  1.0,
         1.0, -1.0,  1.0,

        // Left face
        -1.0, -1.0, -1.0,
        -1.0, -1.0,  1.0,
        -1.0,  1.0,  1.0,
        -1.0,  1.0, -1.0,
    ];
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);
    cubeVertexPositionBuffer1.itemSize = 3;
    cubeVertexPositionBuffer1.numItems = 12;

    cubeVertexTextureCoordBuffer = gl.createBuffer();
    gl.bindBuffer(gl.ARRAY_BUFFER, cubeVertexTextureCoordBuffer);
    var textureCoords = [
      // Front face
      0.0, 0.0,
      1.0, 0.0,
      1.0, 1.0,
      0.0, 1.0,

      // Back face
      1.0, 0.0,
      1.0, 1.0,
      0.0, 1.0,
      0.0, 0.0,

      // Top face
      0.0, 1.0,
      0.0, 0.0,
      1.0, 0.0,
      1.0, 1.0,
    ];
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(textureCoords), gl.STATIC_DRAW);
    cubeVertexTextureCoordBuffer.itemSize = 2;
    cubeVertexTextureCoordBuffer.numItems = 12;

cubeVertexTextureCoordBuffer1 = gl.createBuffer();
    gl.bindBuffer(gl.ARRAY_BUFFER, cubeVertexTextureCoordBuffer1);
    var textureCoords = [
   // Bottom face
      1.0, 1.0,
      0.0, 1.0,
      0.0, 0.0,
      1.0, 0.0,

      // Right face
      1.0, 0.0,
      1.0, 1.0,
      0.0, 1.0,
      0.0, 0.0,

      // Left face
      0.0, 0.0,
      1.0, 0.0,
      1.0, 1.0,
      0.0, 1.0,
    ];
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(textureCoords), gl.STATIC_DRAW);
    cubeVertexTextureCoordBuffer1.itemSize = 2;
    cubeVertexTextureCoordBuffer1.numItems = 12;

cubeVertexIndexBuffer = gl.createBuffer();
    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, cubeVertexIndexBuffer);
    var cubeVertexIndices = [
        0, 1, 2,      0, 2, 3,    // Front face
        4, 5, 6,      4, 6, 7,    // Back face
        8, 9, 10,     8, 10, 11,  // Top face
    ];
    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(cubeVertexIndices), gl.STATIC_DRAW);
    cubeVertexIndexBuffer.itemSize = 1;
    cubeVertexIndexBuffer.numItems = 18;

cubeVertexIndexBuffer1 = gl.createBuffer();
    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, cubeVertexIndexBuffer1);
    var cubeVertexIndices = [
        12, 13, 14,   12, 14, 15, // Bottom face
        16, 17, 18,   16, 18, 19, // Right face
        20, 21, 22,   20, 22, 23  // Left face
    ];
    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(cubeVertexIndices), gl.STATIC_DRAW);
    cubeVertexIndexBuffer1.itemSize = 1;
    cubeVertexIndexBuffer1.numItems = 18;

}

var xRot = 0;
var yRot = 0;
var zRot = 0;

function drawScene() {
    gl.viewport(0, 0, gl.viewportWidth, gl.viewportHeight);
    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);

    mat4.perspective(45, gl.viewportWidth / gl.viewportHeight, 0.1, 100.0, pMatrix);

    mat4.identity(mvMatrix);

    mat4.translate(mvMatrix, [0.0, 0.0, -5.0]);

    mat4.rotate(mvMatrix, degToRad(xRot), [1, 0, 0]);
    mat4.rotate(mvMatrix, degToRad(yRot), [0, 1, 0]);
    mat4.rotate(mvMatrix, degToRad(zRot), [0, 0, 0]);
    setMatrixUniforms();

 gl.activeTexture(gl.TEXTURE0);
 gl.bindTexture(gl.TEXTURE_2D, texturen[0]); 
 gl.vertexAttribPointer
 (textureCoordAttribute, cubeVertexTextureCoordBuffer.itemSize,  gl.FLOAT, false, 0,  0);
   gl.bindBuffer(gl.ARRAY_BUFFER, cubeVertexPositionBuffer);
  gl.vertexAttribPointer
  (shaderProgram.vertexPositionAttribute,cubeVertexPositionBuffer.itemSize, 
  gl.FLOAT, false, 0, 0);

  gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, cubeVertexIndexBuffer);

    gl.drawElements(gl.TRIANGLES, cubeVertexIndexBuffer.numItems, gl.UNSIGNED_SHORT, 0);

 gl.activeTexture(gl.TEXTURE1);
 gl.bindTexture(gl.TEXTURE_2D, texturen[1]); 
 gl.vertexAttribPointer
 (textureCoordAttribute, cubeVertexTextureCoordBuffer1.itemSize,  gl.FLOAT, false, 0, 0);
 gl.bindBuffer(gl.ARRAY_BUFFER, cubeVertexPositionBuffer1);
 gl.vertexAttribPointer
 (shaderProgram.vertexPositionAttribute,cubeVertexPositionBuffer1.itemSize, 
  gl.FLOAT, false, 0, 0);

    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, cubeVertexIndexBuffer1);

    gl.drawElements(gl.TRIANGLES, cubeVertexIndexBuffer1.numItems, gl.UNSIGNED_SHORT, 0);

} 
```

我只是把它分成两部分，试着用两张不同的照片做一个测试。究竟什么是 cubeVertexIndexBuffers？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-02T20:06:18.370

首先，简短的回答：用以下代码替换代码的最后 10 行，我认为它应该可以工作。

```
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, texturen[1]); 
gl.vertexAttribPointer(textureCoordAttribute, cubeVertexTextureCoordBuffer1.itemSize,  gl.FLOAT, false, 0, 0);
gl.bindBuffer(gl.ARRAY_BUFFER, cubeVertexPositionBuffer1);
gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute,cubeVertexPositionBuffer1.itemSize, gl.FLOAT, false, 0, 0);

gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, cubeVertexIndexBuffer);
gl.drawElements(gl.TRIANGLES, cubeVertexIndexBuffer.numItems, gl.UNSIGNED_SHORT, 0); 
```

主要变化是：

*   `activeTexture`仍然`TEXTURE0`（您一次只使用一种纹理）
*   使用`cubeVertexIndexBuffer`而不是`cubeVertexIndexBuffer1`，其中包含超出范围的索引

为了更好地解释索引的实际用途，我将向您[推荐这个 SO question](https://stackoverflow.com/questions/8547112/what-are-vertexindices-in-webgl)，因为我不想在这里重复所有这些。

现在，转向更一般的答案。

有两种基本方法可以处理在不同面上使用不同纹理的问题。第一个也是更简单的方法是完全按照您在此处所做的操作：将对象分段渲染，为每块绑定不同的纹理。虽然严格来说不是实现效果的最有效方式，但它是在游戏等高性能应用程序中处理它的最常用方式，因为它提供了很大的灵活性，尤其是当您的材质比简单的漫反射纹理更复杂时.

不过，有一种简单的方法可以在这种情况下提高像您这样的代码的性能。顶点/索引不必为每个纹理分解成单独的缓冲区。您可以将它们全部组合到一个缓冲区中，并使用不同的偏移量渲染它们，如下所示：

```
// On Init
var vertBuffer = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, vertBuffer);
var vertices = [
    // Vertex values for all 6 faces
];
gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);

var indexBuffer = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);
var indices = [
    // Index values for all 6 faces
];
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(indices), gl.STATIC_DRAW);

// On Draw
// Setup the shader and uniforms and all that jazz

gl.bindBuffer(gl.ARRAY_BUFFER, vertBuffer);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);
gl.vertexAttribPointer(// Blah blah blah...);

// Draw face 0
gl.bindTexture(gl.TEXTURE_2D, texture[0]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0);

// Draw face 1
gl.bindTexture(gl.TEXTURE_2D, texture[1]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 12);

// Draw face 2
gl.bindTexture(gl.TEXTURE_2D, texture[2]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 24);

// .. And so on to face 5
// Draw face 2
gl.bindTexture(gl.TEXTURE_2D, texture[5]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 60); 
```

这里发生的情况是，每次调用`drawElements`只绘制 2 个三角形（6 个顶点，调用的第二个参数），但每次调用都会偏移到索引缓冲区中，以便从不同的面开始。（调用的第四个参数，表示字节偏移量。每个索引是一个 Uint16，因此每个索引 2 个字节。12 == "start on index[6]"）这样所有的绑定和设置只发生一次，并且每个绘图调用只需更改实际需要的状态（纹理）。

另一种更快但更难泛化的处理方法是将纹理数组绑定到着色器制服，并使用另一个顶点属性索引到着色器中的数组。我不会详细介绍这种方法的代码，但是一旦您对 WebGL 着色器的使用感到满意，它应该相对容易设置。如果您对这种特定方法还有其他问题，最好在另一个 SO 问题中提问，以免使这个问题超载。

# iframe - XPage iFrame 到另一个数据库 (XPiNC)

> ID：11292602
> 
> 赞同：0
> 
> 时间：2012-07-02T11:18:47.153
> 
> 标签：iframe, lotus-notes, xpages

我有 2 个 Notesdatabase 都在 Xpages、我的地址和通信上完全运行。一个持有所有地址，另一个持有这些地址的所有通信。

现在我想将 iframe 放入我的地址 xpage 以从那里访问通信，这一切在浏览器中运行良好，但是一旦我切换到 Notes，iframe 将不会加载。

```
<iframe 
src="#{javascript:getParaValueByKey('CorrespondenceDB')+'/xpCorrespondenceView.xsp?rows='+compositeData.rows+'&amp;key='+compositeData.key}" 
style="border: none; width: 99%; height: 400px;" ></iframe> 
```

我注意到当前的笔记 URL 看起来像这样：

```
http://127.0.0.1:50136/xsp/DEV!!adresse.nsf/xpAdresse.xsp?documentId=589CBCAEAADE52F2C12579D40020BF4B&action=editDocument 
```

所以我尝试将其切换为：

```
<iframe 
    src="#{javascript:@Word(context.getUrl().toString(),'!!', 1)+getParaValueByKey('CorrespondenceDB')+'/xpCorrespondenceView.xsp?rows='+compositeData.rows+'&amp;glAdrID='+compositeData.key}}" 
    style="border: none; width: 99%; height: 400px;" >
</iframe> 
```

上面的 src 显示了一个 computedText：

```
http://127.0.0.1:50136/xsp/DEV!!correspondence.nsf/xpCorrespondenceView.xsp?rows=5&key=833C5C1633E34E6CC1256CD20041DBE5 
```

路径和一切看起来都不错，但它仍然无法打开 iframe，有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:17:58.173

不要使用 iFrame。在 XPiNC 中工作时，您应该为此使用复合应用程序。您的地址数据库发布通信使用的密钥。

当然，大卫建议使用视图（或重复或休息）控件并将其指向其他数据库也有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:03:23.727

为什么不直接放入指向另一个数据库的视图控件，按类别名称或列值过滤？使用 Xpages 本机控件而不是强制 HTML“方钉”适合“圆孔”？

# c - 我们如何使用 GDB 在 cygwin 1.7 环境中使 gettimeofday 函数调用失败？

> ID：11292605
> 
> 赞同：0
> 
> 时间：2012-07-02T11:19:11.513
> 
> 标签：c, linux, linux-kernel, cygwin, time.h

我正在寻找一种在使用 GDB 的 cygwin 1.7 环境下使函数调用失败的方法。任何人都知道我们是否以下面提到的方式使用它 gettimeofday(&tv, NULL);

提前感谢阿曼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:13:10.593

您可以在 gettimeofday 的出口处设置断点并修改返回码。或者，可以在调用 gettimeofday 之前设置断点，然后修改调用参数。但是，在后一种情况下，您无能为力，除了将第一个参数修改为 NULL。这应该使 libc 实现返回 EFAULT（或崩溃，我认为 cygwin 实现更有可能这样做）。

# forms - 如何使用上下文菜单将图像加载到 Web 服务器

> ID：11292608
> 
> 赞同：0
> 
> 时间：2012-07-02T11:19:19.533
> 
> 标签：forms, registry, contextmenu, setup-project

我可以将项目添加到上下文菜单中，单击后打开我的站点，文件名作为获取数据。但是我想使用的不是文件名，而是文件数据，例如图像，如何将其写入注册表或其他地方？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-02T13:16:15.487

将其设置为

火狐[http://www.google.com?q=somedata](http://www.google.com?q=somedata)

这是你需要的吗？

# python - Flask-SQLAlchemy：如何有条件地插入或更新一行

> ID：11292612
> 
> 赞同：19
> 
> 时间：2012-07-02T11:19:32.810
> 
> 标签：python, flask, flask-sqlalchemy, wtforms, flask-wtforms

我的应用程序使用了 Flask、Flask-SQLAlchemy、Flask-WTF 和 Jinja2 的组合。

在它目前的化身中，我有一个设置表。该表将只有一个记录和一个字段。最初，该表包含零条记录。

我想要实现的是：

*   鉴于 db 中不存在任何条目，则显示准备好供用户输入的空表单
*   鉴于存在条目，显示该条目，然后
*   如果用户更改了值，则更新数据库中的记录。

这是我的代码：

**模型.py**

```
class Provider(db.Model):
    id = db.Column(db.Integer, primary_key = True)
    rssfeed = db.Column(db.String(120), unique = True)

    def __init__(self, rssfeed):
        self.rssfeed = rssfeed

    def __repr__(self):
        return '<NZBMatrix feed url %r>' % self.rssfeed 
```

**表格.py**

```
class SettingsForm(Form):
    rssfeed = TextField('rssfed', validators= [Required()]) 
```

**视图.py**

```
 @app.route('/settings', methods=["GET","POST"])
    def settings():
    """ show settings """
        provider = Provider.query.get(1)
        form = SettingsForm(obj=provider)
        print provider

        if request.method == "POST" and form.validate():
            if Provider.query.get(1) is None:
                provider = Provider(rssfeed=form.rssfeed.data)
                form.populate_obj(provider)
                db.session.add(provider)
                db.session.commit()
                flash("Settings added")

        return render_template("settings.html", form=form) 
```

就目前而言，如果该代码不存在但该`rssfeed`列为空，则该代码将创建一条记录。

`INSERT`如果记录不存在并且`UPDATE`如果存在，我该如何更改此代码？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-02T21:50:07.207

一旦您的表格经过验证等，

添加新记录：

```
new_provider = Provider(form.rssfeed.data)
db.session.add(new_provider)
db.session.commit() 
```

要更新现有记录：

```
existing_provider = Provider.query.get(1) # or whatever
# update the rssfeed column
existing_provider.rssfeed = form.rssfeed.data
db.session.commit() 
```

更新的诀窍是您只需要更改特定字段并进行提交。db 会话负责休息。我认为您正在使用 SQLAlchemy 中现已弃用的合并功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T08:27:00.707

我已经设法解决了对**view.py**文件进行这些更改的问题：

```
@app.route('/settings', methods=["GET","POST"])
def settings():
    """ show settings """
    provider = Provider.query.get(1)
    form = SettingsForm(request.form,obj=provider)

    if request.method == "POST" and form.validate():
        if provider:
            provider.rssfeed = form.rssfeed.data
            db.session.merge(provider)
            db.session.commit()
            flash("Settings changed")
            return redirect(url_for("index"))
        else:
            provider = Provider(form.rssfeed.data)
            db.session.add(provider)
            db.session.commit()
            flash("Settings added")
            return redirect(url_for("index"))
    return render_template("settings.html", form=form) 
```

# c++ - 在析构函数中删除指向 char* 向量的指针（不工作）

> ID：11292613
> 
> 赞同：0
> 
> 时间：2012-07-02T11:19:33.100
> 
> 标签：c++, pointers, vector, destructor, delete-operator

我有一个包含几个向量的类，我不确定哪种方法最好，但是当我调用析构函数时，它们应该从内存中删除。

标题：

```
class Test
{
public:
    Test();
    ~Test();

    void AddString(char* text);
    void AddString(string text);

private:
    char * StringToCharPointer(string value);

    vector<char*> *pVector;
} 
```

CPP 文件：

```
Test::Test()
{
};

Test::~Test()
{
    vector<char*>::iterator i;

    for ( i = pVector->begin() ; i < pVector->end(); i++ )
    {
        delete * i;
    }

    delete pVector;
};

char * Test::StringToCharPointer(string value)
{
    char *pChar = new char[value.length()];
    strcpy(pChar, value.c_str());

    return pChar;
};

Test::AddString(char* text)
{
    pVector->push_back(text);
};

Test::AddString(string text)
{
    pVector->push_back(StringToCharPointer(text));
}; 
```

所以这几乎是我使用的所有方法，但有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T11:27:31.800

首先，`i`是向量上的迭代器，它不是存储在向量中的指针。`*i`是存储在向量中的指针，所以如果你要删除任何东西，它应该是那个。

其次，`delete *i`仅当 指向的对象`*i`被分配时才有效`new`。不是`new[]`，不是 malloc，它不指向字符串文字。由于您没有说明您的数据是如何分配的，因此我们无法说明您是否正确释放它。

您似乎应该使用`std::vector<std::string>`.

更新更新问题：

标题：

```
class Test
{
public:
    Test();
    ~Test();

    void AddString(const string &text);
private:
    vector<string> mVector;
}; 
```

CPP 文件：

```
Test::Test()
{
};

Test::~Test()
{
};

void Test::AddString(const string &text)
{
    mVector.push_back(text);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:31:13.520

您的销毁代码看起来不错（尽管我猜您的意思是`delete *i;`在第二个片段中，否则 ti 甚至都不会编译。

但是，您得到的错误表明您在向量中放入了不好的东西。唯一`char*`可以插入带有这种破坏代码的向量中的 s 是由`new char`. 特别是，您不得将文字 ( `"abc"`) 或作为其他字符串 ( `strtok(NULL, ":")`,的一部分制作的字符串`strchr(str, ':')`插入其中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T12:12:53.480

您似乎应该使用`std::vector<std::string>`, 来缩短 [Steve Jessop](https://stackoverflow.com/questions/11292613/delete-pointer-to-vector-of-char-in-destructor-not-working/11292732#11292732)的明智之词。

再详细一点：你说你想“使内存分配更小”，但如果你不知道指针，听起来你走错路了，如果我猜错了过早优化，请纠正我（在这类问题中缺乏经验的开发人员通常是这种情况）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T12:03:49.223

这是一个明显的问题：`char *pChar = new char[value.length()];`. 您正在做`new[]`但`delete`在调用未定义行为的析构函数中做。您应该使用`delete[]`删除这些指针。但是使用`delete[]`可能会给`Test::AddString(char* text)`方法带来问题，因为您无法确定如何`text`分配内存，即使用`new`or`new[]`或`malloc`。最简单的方法是`std::vector<std::string>`按照 Steve Jossep 的建议使用。

# ios - 如何在 Xcode 4.3 上查看复制到 build 文件夹的 asstes？

> ID：11292614
> 
> 赞同：0
> 
> 时间：2012-07-02T11:19:37.383
> 
> 标签：ios, xcode, osx-lion, xcode4.3

我在 Mac 10.7.4 (Lion) 上运行 Xcode 4.3。

我的应用程序的所有资源（图像、音频）都位于我系统上的一个单独文件夹（类似于 DropBox 或安装在根目录上的 Sugar Sync 文件夹）中。

我编写了一个 shell 脚本（在运行脚本中），以便在编译代码时将应用程序所需的资源复制到包中。

有没有办法查看我的运行脚本已复制到构建文件夹中的资产（图像和音频）？如果是这样，我将如何去做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:39:45.060

选择 iOS 设备作为构建目标，然后构建您的应用程序。这将生成产品 .app 文件。从 Project Navigator 中展开 Products 文件夹，然后右键单击 yourappname.app 并选择“Show in Finder”。右键单击查找器中的应用程序，然后选择“显示包内容”。您将在那里找到所有捆绑的资产。请注意，您可能无法打开这些图像。

# ruby-on-rails - Rails 3.1 - 每个循环的额外结果？

> ID：11292617
> 
> 赞同：0
> 
> 时间：2012-07-02T11:19:41.190
> 
> 标签：ruby-on-rails, ruby-on-rails-3

这真的很简单，但我有点生气，可能错过了一些盯着我看的东西。任何人都可以帮忙吗？

基本上，我有一个简单的 each 循环，它返回一条额外的流氓行。即使数据库中没有任何内容，我也会返回一行！

我的显示视图包括循环是：

```
 <p id="notice"><%= notice %></p>

<p>
  <b>Header:</b>
  <%= @mailer.header %>
</p>

<p>
  <b>Subtext:</b>
  <%= @mailer.subtext %>
</p>

<div id="" class="" padding-left: 30px;>    
<h3>Mailer Products </h3>

<ol id="mailer-Product-list">
<% @mailer.mailer_products.sort_by { |mailer_products| mailer_products.position }.each  do |mailer_product| %>
    <%= content_tag_for :li, mailer_product do %>
    <%= mailer_product.product.cat_no %>
<% end %>
<% end %>
</ol>   

    <%#= link_to 'Done', @product, :class => "standard-button" %>
</div>

<%= form_for([@mailer,@mailer.mailer_products.build]) do |f| %>

    <div class="field">
    <%= f.label :product_id %><br />
    <%= f.text_field :product_id %>
    </div>

    <div class="field">
    <%= f.hidden_field :mailer_id, :value => @mailer.id %>
    </div>

    <div class="actions">
    <%= f.submit "Add Product" %>
    </div>
<% end %>

<%= link_to 'Edit', edit_mailer_path(@mailer) %> |
<%= link_to 'Back', mailers_path %> 
```

控制器代码为：

```
class MailersController < ApplicationController

  def show
    @mailer = Mailer.find(params[:id])
     respond_to do |format|
      format.html # show.html.erb
      format.json { render :json => @mailer }
     end
   end

class MailerProductsController < ApplicationController

  def index
    @mailer_products = MailerProduct.find(:all)

    respond_to do |format|
      format.html # index.html.erb
      format.json { render :json => @mailer_products }
    end
  end
end

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T17:41:28.587

你的电话`form_for`看起来像这样

```
form_for([@mailer,@mailer.mailer_products.build]) do |f| 
```

你会得到一个额外的空白项，因为这就是调用`.build`的`mailer_products`作用：它将一个新实例附加到数组

当表单在循环之后，这无关紧要，但是当事情相反时，循环将在修改后的数组上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:22:48.880

我通常的错误是在循环中添加 a`<%=`而不是 a ...`<%`

```
<%= @foo.each do |itme| %>
# do stuff
<% end %> 
```

应该是

```
<% @foo.each do |itme| %>
# do stuff
<% end %> 
```

仔细检查您的标签...

# node.js - node.js 作为 cron 作业运行时内存不足

> ID：11292620
> 
> 赞同：0
> 
> 时间：2012-07-02T11:19:58.550
> 
> 标签：node.js, azure, cron

我编写了一些在 node.js 下运行的 JavaScript 代码，用于将一个大 (~20 MB) 文件备份到 Azure blob。这在从 bash shell 运行时有效，但在作为 cron 作业运行时失败并出现以下错误（在两种上下文中以 root 身份运行）：

*致命错误：v8::Context::New() V8 不再可用*

大概这意味着它耗尽了堆空间，但是为 cron 作业设置的限制在哪里？

（这是在 64 位 RHEL 6.2 服务器上，具有 8GB RAM 和 426 GB 可用磁盘空间。Node.js 版本为 0.8.1，Azure 来自文件 azure-2012-06.tar.gz。）

谢谢基思

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T22:28:54.130

当您说大时，您真的是指〜20MB作为大文件吗？您的 cron 作业在返回 OOM 之前运行了多长时间？此外，当您运行 cron 作业时，您是否检查了内存使用情况以验证实际使用情况是否是原因。

关于 cron 作业中的内存/堆限制，cron 只是充当作业调度引擎，因此 node.js 仍然使用自己的内存/堆设置，这不应该特定于 cron 调度程序。如果要更改/修改 V8 内存，可以使用 --max-old-space-size 选项将其提升到更高的值。

我很想知道您如何将 node.js 代码作为 cron 作业运行。您编写 cron 作业的方式可能会在调用 Azure 存储时消耗大量内存。

# mysql - 打开太多连接时如何使mysqlconnection等待

> ID：11292621
> 
> 赞同：0
> 
> 时间：2012-07-02T11:20:04.417
> 
> 标签：mysql, sql, vb.net, max, mysqlconnection

我在连接字符串中添加了 Max Pool Size=50。这似乎没有帮助。

我收到一个错误 dreamhost2.vshost.exe 错误：0：用户 gensurv_general 已经有超过 'max_user_connections' 的活动连接

基本上我只想等到连接数量可控。

我的程序是这样的

```
For i = 0 To 2000000 Step 10
    Dim j = i
    Threading.ThreadPool.QueueUserWorkItem(
        Sub()
            Using connect1 As New MySqlConnection(ConnectLocalhost.serverString)
                connect1.Open()

                Dim cmd = New MySqlCommand("set net_write_timeout=99999; set net_read_timeout=99999", connect1) ' // Setting tiimeout on mysqlServer
                cmd.ExecuteNonQuery()

                Dim BusinessReader = selectSomeQuery("Select * from tablebusiness limit " + j.ToString + "," + 10.ToString + "", connect1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:23:08.237

问题显然不在于最大池大小。相反，您将最大池大小值设置**得太高**。

同时连接数有两个限制：

1.  应用程序中的最大池大小。一旦有指定数量的活动连接，任何新的打开连接的尝试都必须等到一些连接将返回到池中。所以这并不意味着您的客户会收到错误，这只是意味着您将能够同时为不超过 50 个客户提供服务，其余的将不得不等待。
2.  数据库中的 max_user_connections。一旦有指定数量的活动连接，数据库将拒绝接受任何进一步的连接（发出您收到的错误）。

基本上，最大池大小**不应**超过 max_user_connections 限制（当然，如果您有 10 个应用程序同时运行并使用相同的数据库，那么不仅每个应用程序的最大池大小，而且所有应用程序的最大池大小总和不应超过max_user_connections 限制也是如此）。

您可以增加最大池大小以使您的应用程序在高并发负载下更好地执行，但是一旦您将其设置得太高，max_user_connections 将被耗尽并且您将开始收到这些错误消息。

# testing - 使用 cpsuite 运行 JMockit

> ID：11292624
> 
> 赞同：3
> 
> 时间：2012-07-02T11:20:17.027
> 
> 标签：testing, ant, junit, jmockit

我们在使用 CPsuite 和 JMockit 运行单元测试时遇到问题。

测试在 Eclipse 中执行时运行良好，但如果我们使用 Ant 脚本运行所有测试（请参阅本问题末尾的脚本），我们会得到以下异常：

```
Testcase: initializationError took 0 sec
    Caused an ERROR
(class: mockit/internal/startup/JDK6AgentLoader, method: getVirtualMachineImplementationFromEmbeddedOnes signature: ()Lcom/sun/tools/attach/VirtualMachine;) Wrong return type in function
java.lang.VerifyError: (class: mockit/internal/startup/JDK6AgentLoader, method: getVirtualMachineImplementationFromEmbeddedOnes signature: ()Lcom/sun/tools/attach/VirtualMachine;) Wrong return type in function
    at mockit.internal.startup.AgentInitialization.initializeAccordingToJDKVersion(AgentInitialization.java:21)
    at mockit.internal.startup.Startup.verifyInitialization(Startup.java:86)
    at mockit.Invocations.<clinit>(Invocations.java:22)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:169)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513) 
```

这只发生在 Ant 上，并且只有在 CPSuite 集中有一个使用 JMockit 的类时才会发生。

有谁知道我们为什么会收到这个错误？

蚂蚁脚本：

```
<project name="chughtai.junit" default="run" basedir=".">

    <taskdef resource="net/sf/antcontrib/antlib.xml"/>

    <!-- https://junit-anttask.dev.java.net/ -->
    <!--
    <taskdef name="junit2" classname="com.sun.ant.junit.JUnitTask">
        <classpath>
            <pathelement path="lib/junit-anttask.jar" />
            <pathelement path="lib/junit-4.4.jar" />
        </classpath>
    </taskdef>
    -->
    <property environment="env"/>

    <property file="junit.build.properties"/>

    <filelist id="third-party_jars" dir="lib">
        <file name="${ext.classpath}/bin/lib/j2ee.jar"/>
    </filelist>

    <path id="project.path">
      <pathelement path="${env.JAVA_HOME}/lib/tools.jar"/>
      <pathelement location="classes/"/>
      <fileset dir="lib">
        <include name="**/*.jar"/>
        <include name="**/*.properties"/>       
      </fileset>
      <dirset dir="${build.dir}">
        <include name="apps/**/classes"/>
        <exclude name="apps/**/*Test*"/>
      </dirset>
      <pathelement location="${basedir}/junittestcases"/>     
      <filelist refid="third-party_jars"/>
      <pathelement path="${ext.classpath}"/>
      <pathelement location="${ext.classpath}/WEB-INF/classes"/>      
    </path>

    <target name="init">
        <mkdir dir="${prd.junit.test.report.dir}" />
        <mkdir dir="${prd.junit.test.report.dir}/html" />
    </target>

    <!-- default target -->
    <target name="run" depends="init">
        <property name="myclasspath" refid="project.path"/>
        <property name="java.class.path" refid="project.path"/>

        <echo message="***Junit Controller Application***"/>    
        <echo message="basedir is ${basedir}"/> 
        <!--<echo message="${myclasspath}" />-->

    <junit dir="${basedir}/junittestcases/" printsummary="yes" haltonfailure="no" fork="no" forkmode="once" reloading="false" maxmemory="1024m">
        <jvmarg value="-Xms768M"/>
        <jvmarg value="-Xmx1024M"/>     
        <jvmarg value="-XX:MaxPermSize=256M"/>
        <sysproperty key="tests" value="${tests}"/>
        <sysproperty key="java.class.path" value="${myclasspath}"/>
        <formatter type="plain" usefile="true" extension=".txt" />
        <formatter type="xml" />
        <classpath refid="project.path"/>

        <test name="${use.testcase}" haltonfailure="no" fork="false" todir="${prd.junit.test.report.dir}" if="use.testcase">
            <formatter type="xml" />
        </test>

    </junit>
        <!--  Generate the Unit Test reports -->

    <junitreport todir="${prd.junit.test.report.dir}">
      <fileset dir="${prd.junit.test.report.dir}">
        <include name="*.xml" />
      </fileset>
      <report todir="${prd.junit.test.report.dir}/html"  styledir="${xsl.templates}" format="frames"> 
        <param name="build.number" expression="${app.build}" />
        <param name="application.name" expression="${app.name}" />
      </report>
    </junitreport>

    </target>

    <target name="emma.report" depends ="" description="Creates 3 EMMA report formats based on the coverage data gathered.">
        <if>
            <available file="coverage.ec" />
            <then>
                <move file="coverage.ec" tofile="${coverage.dir}/junits.ec" overwrite="true"/>
            </then>     
        </if>

        <emma>
            <report sourcepath="src" sort="+block,+name,+method,+class" metrics="method:70,block:80,line:80,class:100">
                <!-- collect all EMMA data dumps (metadata and runtime)
                 [this can be done via nested <fileset> fileset elements
                 or <file> elements pointing to a single file]:
                -->

                <fileset dir="${coverage.dir}">
                    <include name="*.em" />
                    <include name="*.ec" />
                </fileset>

                <!-- for every type of report desired, configure a nested
                 element; various report parameters
                 can be inherited from the parent <report>
                 and individually overridden for each report type:
                -->
                <txt outfile="${coverage.dir}/coverage.txt" depth="package" columns="class,method,block,line,name" />
                <xml outfile="${coverage.dir}/coverage.xml" depth="package" />
                <html outfile="${coverage.dir}/coverage.html" depth="method" columns="name,class,method,block,line" />
            </report>
        </emma>

    </target>

    <target name="clean">
        <delete file="${coverage.dir}/coverage.*" />
    </target>
</project> 
```

# plugins - Extjs4 在 extjs 中添加插件的最佳方法是什么？

> ID：11292628
> 
> 赞同：0
> 
> 时间：2012-07-02T11:20:35.593
> 
> 标签：plugins, extjs4

我想在我的应用程序中添加一个插件（http://www.sencha.com/forum/showthread.php?150918-Grid-Header-Filters）。

考虑到我使用 sencha SDK-tools，最好的安装方法是什么...插件的类名是：Ext.ux.grid.plugin.HeaderFilters

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:00:41.970

在此处检查基本设置：

[http://www.sencha.com/learn/html-page-setup/](http://www.sencha.com/learn/html-page-setup/)

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Velociraptor Owners</title>
<!--Ext JS-->
<link rel="stylesheet" type="text/css" href="extjs/resources/css/ext-all.css">
<!-- script type="text/javascript" src="extjs/bootstrap.js"></script-->
<script src="extjs/ext-all-debug.js"></script>
<script src="extjs/GridHeaderFilters.js"></script>
<!--Application JS-->
<script src="grid.js"></script>
<!-- script src="php/api.php"></script -->
<!--Application Aesthetics-->
<link rel="stylesheet" href="style.css" type="text/css">
</head> 
```

# php - jQuery自动完成太慢了

> ID：11292632
> 
> 赞同：0
> 
> 时间：2012-07-02T11:20:42.513
> 
> 标签：php, jquery, mysql

我已经编写了这段代码，如果用户键入邮政编码或城市名称，它使用类似查询从数据库中获取，现在问题是我有大约 1260 条记录，其中两个字段一个是城市，另一个是邮政编码

```
 SELECT code, area FROM post_codes WHERE code LIKE '$q%' or area LIKE '$q%'  ORDER BY area LIMIT 4 
```

我已经阅读了用户发布的许多问题并在网上进行了研究，但也没有任何工作使用查询延迟。我什至在数据库中为这两个字段编制了索引。它获取记录的速度太慢，这是第一个问题，现在我的第二个问题是当用户在该文本字段中进行搜索并按下选项卡时，他可以绕过搜索并编写他想要如何限制的任何无效代码，这是我的代码供参考。

```
 $("#Postcode").autocomplete("get_codes2.php", {

        width: 260,
 queryDelay:0, 

   dataType: 'json',
   parse: function(data) {
            var array = new Array();
            for(var i=0;i<data.length;i++)
            {

            array[array.length] = { data: data[i], value: data[i].areacode, result: data[i].areacode};

            }
            return array;
    }, 

    formatItem: function(row) {                     

    return row.areacode;
    }

}).result(function (){ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:28:57.863

我认为[Drupal 的 API 搜索](http://api.drupal.org/api/drupal)有一个非常好的方法来解决这个问题。他们让每个增量搜索都命中后端的替代方法是提供一个大的[JSON 文件](http://api.drupal.org/sites/default/files/api/api-7-1341219199.json)，该文件用于在客户端自动完成。

在他们的实现中，他们正在监听搜索输入的焦点事件，仅在实际需要时获取 JSON。

# ruby-on-rails-3 - 导航栏下拉菜单不起作用

> ID：11292635
> 
> 赞同：1
> 
> 时间：2012-07-02T11:21:02.143
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, haml

我有下面的代码，但下拉菜单不起作用，有什么想法吗？我是否需要添加“$('.dropdown-toggle').dropdown();” 到我的 javascript 文件？

```
.navbar.navbar-fixed-top
  .navbar-inner
    .container
      %button.btn.btn-navbar{"data-target" => ".nav-collapse", "data-toggle" => "collapse", :type => "button"}
        %span.icon-bar
        %span.icon-bar
        %span.icon-bar
      = link_to I18n.t(:site_title), root_url, :class => "brand"
      .nav-collapse
        %ul.nav
          %li= link_to I18n.t(:nav_thelist)
          %li= link_to I18n.t(:nav_themap)
          %li= link_to I18n.t(:nav_the92)
          %li.dropdown
            %a.dropdown-toggle{"data-toggle" => "dropdown", "data-target" => "#", :href => "#"}
              = I18n.t(:nav_admin)
              %b.caret
            %ul.dropdown-menu
              %li= link_to I18n.t(:nav_leagues), leagues_url
              %li= link_to I18n.t(:nav_clubs), clubs_url
              %li= link_to I18n.t(:nav_visits), visits_url 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T18:10:03.587

Twitter-Bootstrap 中的下拉菜单不仅需要适当的属性和 CSS，还需要适当的 javascript 插件。检查此处以确保您为下拉菜单安装了正确的 javascript 插件：

[http://twitter.github.com/bootstrap/javascript.html](http://twitter.github.com/bootstrap/javascript.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-04T20:51:58.090

如果您使用的是 twitter-bootstrap-rails gem，它会在 application.js 中错误地命名 require 路径 将其更改为 //= require bootstrap

# php - 删除 htmlspecialchars？

> ID：11292638
> 
> 赞同：0
> 
> 时间：2012-07-02T11:21:12.373
> 
> 标签：php

我`$_GET['search']`在 page2 上使用 htmlspecialchars 吗？`$_GET['search']`在我添加`mysql_real_escape_string`到变量之前，我是否必须从 page3 上删除 htmlspecialchars ？如果是这样..我如何删除 htmlspecialchars？

第 1 页

```
 $searchterm = "test"; //users search term
echo "<a href='page2?seach=test'>test</test>"; 
```

第2页

```
$var = htmlspecialchars($_GET['search']);
<form action='page3' method='post'><input type='text' name='test' value='$var' /><input type='submit' value='submit'/></form> 
```

第3页

```
$search = mysql_real_escape_string($_POST['test']);
//insert into mysql database 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:25:42.440

> 我`$_GET['search']`在 page2 上使用 htmlspecialchars 吗？

当您`htmlspecialchars`有一些*文本*并将其输出为*HTML*时使用。

这就是你在第二个例子中所做的，所以是的，你会的。

> `$_GET['search']`我是否必须从page3中删除 htmlspecialchars

不会。浏览器会解析 HTML 以生成文本值。

（这也意味着浏览器不会提交 HTML 安全数据，因此当您从数据库中**取出**数据时，您会在将`htmlspecialchars`其输出到 HTML 文档之前使用它）。

> 在我添加`mysql_real_escape_string`到变量之前

不要使用`mysql_real_escape_string`，[使用准备好的语句和参数化查询](https://stackoverflow.com/a/60496/19068)。

# google-apps-script - 在应用程序脚本 Gui 中显示图像裁剪对话框

> ID：11292639
> 
> 赞同：0
> 
> 时间：2012-07-02T11:21:12.783
> 
> 标签：google-apps-script

我有一个应用程序脚本，它根据从电子表格中提取的一些细节将化学结构图插入到 gdocs 文档中，但是通常图像通常不会像这样很好地居中；

* * *

![](../Images/04197c5d8e30485115e42e1eb81090e7.png)

* * *

> 青霉素图片由 DrugBank.ca 提供（[http://www.drugbank.ca/drugs/DB01053](http://www.drugbank.ca/drugs/DB01053)）

因此，我想给用户最后一次机会在插入之前裁剪图像。

有一个名为[Jcrop](http://deepliquid.com/content/Jcrop_API.html)的工具可以与 jQuery 一起使用，但是当我尝试运行它时，我认为它会与 caja 编译器发生冲突。（我得到“节点不可编辑；未执行任何操作。”）库加载时。

我有任何选择留在应用程序脚本 gui 中吗？

显然我可以将前端拆分到其他一些非 caja-sandbox，然后发送要由应用程序脚本处理的操作，但这需要我进行一些应用程序设置，而应用程序脚本很好并且包含.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:18:32.317

在短期内，如果它没有通过 Caja，我们将无能为力。从中期来看，我们正试图显着改善将通过 Caja 的情况，希望情况会有所改善。

如果你能找到一个用“纯”jQuery 本身编写的裁剪实现——即示例代码而不是插件——你可能会使用它。

# facebook - Facebook Like Box 不适用于 Facebook 个人资料 URL

> ID：11292640
> 
> 赞同：2
> 
> 时间：2012-07-02T11:21:15.923
> 
> 标签：facebook, facebook-like

我发现 Facebook 的 Like Box 应用程序无法识别某些页面和个人资料。我认为这可能是一个隐私问题，但事实并非如此。正如它显示的页面，我没有足够好的从属关系。但我自己的个人页面和我的客户页面将显示。

客户页面是 www.facebook.com/scottish.p.drumming

我看到的只是这个错误信息：

```
There was an error fetching the like box for the specified page. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T15:59:26.203

Igy 是对的，点赞框只能在 facebook 页面上使用，而不能在 facebook 用户个人资料上使用。

一种选择是将您的用户个人资料转换为 Facebook 页面。这可以按照以下链接上的步骤完成：

[https://www.facebook.com/help/?faq=116067818477568#How-do-I-convert-my-personal-account-to-a-Facebook-Page](https://www.facebook.com/help/?faq=116067818477568#How-do-I-convert-my-personal-account-to-a-Facebook-Page)？

完成后，您可以访问[插件页面](https://developers.facebook.com/docs/reference/plugins/like-box/)并获取您喜欢的框所需的代码

# php - 是否有一个 wordpress 插件可以在帖子中显示所有照片

> ID：11292641
> 
> 赞同：0
> 
> 时间：2012-07-02T11:21:16.830
> 
> 标签：php, wordpress

...以画廊类型的方式。我希望我帖子中的所有图片都在画廊中展示。我已经提交了帖子，但我正在寻找一个插件，它将获取帖子中的所有图像并将它们呈现为画廊。有这样的插件吗？

**更新：**

```
<img id="breeOne" src="http://www.frontpagejunky.com/wp-content/uploads/2011/05/charlie-olson3.jpg" alt="" width="150px" height="150px" /> 
```

[nggallery id="breeOne"] [nggallery id="breeTwo"] [nggallery id="breeThree"] [nggallery id="breeFour"]

这是我上面的更新......那不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:45:37.863

如果您想在帖子中插入图库，请查看`NextGEN`位于[http://wordpress.org/extend/plugins/nextgen-gallery/的图库](http://wordpress.org/extend/plugins/nextgen-gallery/)

此插件将画廊选项附加到`wordpress`可视选项卡下的帖子编辑器。

让我知道这是否是您正在寻找的。

# css - Twitter Bootstrap：底部对齐图像旁边的文本

> ID：11292644
> 
> 赞同：2
> 
> 时间：2012-07-02T11:21:24.040
> 
> 标签：css, twitter-bootstrap, vertical-alignment

我的页面顶部有一个徽标。它的高度约为 250 像素。在此旁边，我想让三个文本字段底部对齐（与图像）。这些字段代表英语、法语和德语的缩写，用于翻译目的。

我正在使用完整的 bootstrap.css 并添加了两行（如帖子中所建议的：[在网格中对齐文本/图像/链接，](https://stackoverflow.com/questions/9455927/how-can-i-align-text-image-links-within-a-grid-div-of-the-twitter-bootstrap-cs)但仍然无法使其正常工作。

```
.fixedheight { height: 250px; position:relative; }
.bottomaligned {position:absolute; bottom:0; } 
```

用于 ENG 和 FRA 的额外 css 行

```
.bottomaligned2 {position:static; bottom:0; } 
```

HTML 代码是：

```
<body>
<div class="container">
    <div class="row fixedheight">
        <div class="span3 offset4">
            <img src="./images/logo.jpg" alt="Logo">
        </div><!-- /span -->
        <div class="span1 bottomaligned">
            NED
        </div><!-- /span -->
        <div class="span1 bottomaligned2">
            ENG
        </div><!-- /span -->
        <div class="span1 bottomaligned2">
            FRA
        </div><!-- /span -->
    </div><!-- /row -->
</div><!-- /container -->
</body> 
```

有人可以指出我完成这项工作的正确方向吗？
谢谢，
格特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T20:05:23.270

经过一些实验和@DaveP的提示，终于找到了解决方案。

新的 CSS 代码：

```
.fixedheight { height: 250px; position:relative; }
.bottomaligned {position:relative; top:80%; height:10em; margin-top:-5em} 
```

无需选择`position:absolute`，因为 Twitter Bootstrap 中的 div 会处理这些问题。

的HTML：

```
<body>
<div class="container">
    <div class="row fixedheight">
        <div class="span3 offset4">
            <img src="./images/logo.jpg" alt="Logo">
        </div><!-- /span -->
        <div class="bottomaligned">
        <div class="span1">
            ENG                          
        </div><!-- /span -->
        <div class="span1">
            NED
        </div><!-- /span -->
        <div class="span1">
            FRA
        </div><!-- /span -->
        </div>
    </div><!-- /row -->
</div><!-- /container -->
</body> 
```

现在这给了我一个从第 5 列开始的图像，其中文本几乎底部对齐在图像的右侧。

# jquery - 将参数添加到链接，然后将结果重定向到 amp; 在 $_GET

> ID：11292645
> 
> 赞同：1
> 
> 时间：2012-07-02T11:21:24.300
> 
> 标签：jquery

如何正确地将参数添加到带有 jquery 的链接？我现在已经在这里阅读了有关此的各种主题，但我无法使其正常工作。

详细地说，如果用户在点击时点击某个链接，我想获取输入的值，然后将其添加到点击的链接中，并使用带有添加参数的新 url 重定向用户。

一切正常，但是当我在目标 URL 上使用 Php 转储 $_GET 时，我总是以 amp;parameter_name 而不是 parameter_name 结束。我所做的：

```
$('#add-item-wishlist').bind('click', function(e) {
// get quantity from input
var current_qty = $('.inp-qty').val();

//redirect user
e.preventDefault();
window.location.href = $(this).attr("href") + '&qty=' + current_qty;

}); 
```

如果我使用 php 转储，&qty 总是会导致 amp;qty，因此 php 脚本内部的检查也会失败。

// 编辑我可以提一下我在 Smarty 模板引擎的环境中使用这个片段吗？

* * *

### 固定的

我通过将代码移动到 HTML 头来修复它，将其从 Smart html 模板文件中删除。似乎聪明在某种程度上把它搞砸了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:27:22.567

我使用一个像这样重定向用户的函数：

```
function reloadPageAfterSomeAction(value_1, value_2) {
    self.location='somePageIHaveAndRedirectTo.php?value_1=' + value_1 + '&value_2=' + value_2;
} 
```

请注意，您应该`?`在“页面名称”之后和`&`您传递的每个值之间开始，如下所示：

```
http://www.mypage.com/index.html?value_1=123&value_2=456&value_3=789 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:22:35.540

尝试使用[`encodeURI`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/encodeURI)

```
window.location.href = encodeURI($(this).attr("href") + '&qty=' + current_qty); 
```

所以要正确编码`&`字符

# python - 如何为以下场景（HTML）创建正则表达式？

> ID：11292648
> 
> 赞同：0
> 
> 时间：2012-07-02T11:21:47.163
> 
> 标签：python, html, regex

我在 HTML 页面中有一些已知格式，我需要解析标签的内容

```
<TR>
    <TD align=center>Reissue of:</TD>
    <TD align=center> **VALUES_TO_FIND** </TD>
    <TD> </TD> 
</TR>
<TR>
    <TD align=center> </TD>
</TR> 
```

基本上我认为我可以将 HTML 与一个正则表达式连接起来，该表达式将匹配我正在寻找的位置内的任何内容。

我知道 VALUES_TO_FIND 之前和之后的文本总是相同的。如何使用 RE 找到它？（我正在处理几种情况，格式可以在页面的多个位置重复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:09:39.397

这就是您要查找的内容：

```
import re

s="""
<TR>
    <TD align=center>Reissue of:</TD>
    <TD align=center> **VALUES_TO_FIND** </TD>
    <TD> </TD> 
</TR>
"""

p="""
<TR>
    <TD align=center>Reissue of:</TD>
    <TD align=center>(.*)</TD>
    <TD> </TD> 
</TR>
"""

m=re.search(p, s)
print m.group(1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:56:40.307

不要使用正则表达式来解析 HTML（它不是正则语言）。stackoverflow 上有很多关于该主题的主题。

我推荐你使用：BeautifulSoup、Pattern 和类似的模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T11:58:38.653

此正则表达式将执行以下操作：

```
re.findall(r'<TR>\s+<TD.+?</TD>\s+<TD align=center>(.*?)</TD>',html,re.DOTALL) 
```

但我建议使用解析器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T12:39:21.530

从 HTML 中获取数据有很多比正则表达式更好的选择。例如，试试[Scrapy](http://doc.scrapy.org/en/0.14/intro/overview.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T13:49:25.723

HTML 不是常规语言，使用正则表达式处理它很困难。

BeautifulSoup 是一个不错的解析器，下面是一个如何使用它的示例：

```
from BeautifulSoup  import BeautifulSoup 

html = u'''
<TR>
    <TD align=center>Reissue of:</TD>
    <TD align=center> **VALUES_TO_FIND** </TD>
    <TD> </TD> 
</TR>
<TR>
    <TD align=center> </TD>
</TR>'''

bs = BeautifulSoup(html)

print [td.contents for td in bs.findAll('td')] 
```

输出：

```
[[u'Reissue of:'], [u' **VALUES_TO_FIND** '], [u' '], [u' ']] 
```

你知道从这里做什么。:)

安装`pip install BeautifulSoup`。以下是文档：

[http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html)

# javascript - Javascript 彩色动画

> ID：11292649
> 
> 赞同：10
> 
> 时间：2012-07-02T11:21:48.533
> 
> 标签：javascript, animation, colors, transition

我想在原始javascript中从一种颜色动画（过渡）到另一种颜色。

我不想使用任何框架（jquery、mootools）或 css3。普通的原始javascript。

我真的很难做到这一点，有人可以帮助我吗？:)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-02T12:07:14.343

也许是这样的：

```
lerp = function(a, b, u) {
    return (1 - u) * a + u * b;
};

fade = function(element, property, start, end, duration) {
    var interval = 10;
    var steps = duration / interval;
    var step_u = 1.0 / steps;
    var u = 0.0;
    var theInterval = setInterval(function() {
        if (u >= 1.0) {
            clearInterval(theInterval);
        }
        var r = Math.round(lerp(start.r, end.r, u));
        var g = Math.round(lerp(start.g, end.g, u));
        var b = Math.round(lerp(start.b, end.b, u));
        var colorname = 'rgb(' + r + ',' + g + ',' + b + ')';
        el.style.setProperty(property, colorname);
        u += step_u;
    }, interval);
}; 
```

您可以[尝试使用 jsfiddle](http://jsfiddle.net/At3Zm/)或查看下面的完整工作示例。您可能希望通过使用 HSL/HSV 颜色来改进这一点，这可以为您提供更漂亮的过渡，但我将把它留给您。

```
<html>
<head>
  <title>Fade</title>
  <style type="text/css">
    #box {
      width: 100px;
      height: 100px;
      background-color: rgb(255,0,0);
    }
  </style>
</head>
<body>
  <div id="box"></div>

  <script type="text/javascript" charset="utf-8">
    // linear interpolation between two values a and b
    // u controls amount of a/b and is in range [0.0,1.0]
    lerp = function(a,b,u) {
        return (1-u) * a + u * b;
    };

    fade = function(element, property, start, end, duration) {
      var interval = 10;
      var steps = duration/interval;
      var step_u = 1.0/steps;
      var u = 0.0;
      var theInterval = setInterval(function(){
        if (u >= 1.0){ clearInterval(theInterval) }
        var r = parseInt(lerp(start.r, end.r, u));
        var g = parseInt(lerp(start.g, end.g, u));
        var b = parseInt(lerp(start.b, end.b, u));
        var colorname = 'rgb('+r+','+g+','+b+')';
        el.style.setProperty(property, colorname);
        u += step_u;
      }, interval);
    };

    // in action
    el = document.getElementById('box'); // your element
    property = 'background-color';       // fading property
    startColor = {r:255, g:  0, b:  0};  // red
    endColor   = {r:  0, g:128, b:128};  // dark turquoise
    fade(el,'background-color',startColor,endColor,1000);

    // fade back after 2 secs
    setTimeout(function(){
      fade(el,'background-color',endColor,startColor,1000);
    },2000);
  </script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-12T15:03:57.010

如果画布没问题，您可以尝试这样做；）

```
var context = document.getElementsByTagName('canvas')[0].getContext('2d');

var hue = 0;

function bgcolor() {
    hue = hue + Math.random() * 3 ;
    context.fillStyle = 'hsl(' + hue + ', 100%, 50%)';
    context.fillRect(0, 0, context.canvas.width, context.canvas.height);
}

setInterval(bgcolor, 20 ); 
```

是的；）它并不完美，只是一个例子，但试一试。[这是codepen](http://codepen.io/bastian_fiessinger/pen/pvdGOo)上的完整笔。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T12:35:58.267

这也是我的解决方案：

```
<html><head>
<script type="text/javascript">
<!-- 
function animate(id,color0,color1,duration){
    //public attributes
    this.elem = document.getElementById(id);
    //private attributes
    var r0= parseInt(color0.substring(0,2),16);
    var g0= parseInt(color0.substring(2,4),16);
    var b0= parseInt(color0.substring(4,6),16);
    var r1= parseInt(color1.substring(0,2),16);
    var g1= parseInt(color1.substring(2,4),16);
    var b1= parseInt(color1.substring(4,6),16);
    var wait = 100; //100ms
    var steps = duration/wait;
    var rstep = (r1 - r0) / (steps);
    var gstep = (g1 - g0) / (steps);
    var bstep = (b1 - b0) / (steps);
    var self = this;
    //public functions
    this.step  = function() {
        steps--;
        if ( steps>0 ) {
            r0 = Math.floor(r0 + rstep);
            g0 = Math.floor(g0 + gstep);
            b0 = Math.floor(b0 + bstep);
            elem.style.backgroundColor = 'rgb('+r0+','+g0+','+b0+')';
            //alert(steps + ' ; ' + elem.style.backgroundColor);
            window.setTimeout(function(){self.step();}, wait);
        } else {
            elem.style.backgroundColor = '#'+color1;
        }
    }
    step();
    //alert(this.r0);
}
//-->
</script>
</head><body>
<div id="anim" style="width:100px; height:100px; background-color:#ff0000"></div>
<input type="button" onclick="animate('anim','1122ff','ff2211',1000)" value="test" />
</body>
</html> 
```

[在 pastebin 的 html 中](http://pastebin.com/8tbgM868)[，](http://blog.vorpal.cc/category/development/javascript-class-event-handlers.html)如何调用超时函数 - 参见示例[1、2](http://www.west-wind.com/weblog/posts/2006/Mar/28/JavaScript-windowSetTimeout-to-a-JavaScript-Class-method-or-function-with-parameters#5042)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T11:28:02.410

一种方法可能是使用 setTimeout 调用某个函数，该函数每次调用时都会以少量增量改变颜色（我假设背景颜色）。在每次迭代中，只需检查您是否已达到目标颜色，如果没有，则根据需要增加或减少 RGB 值。

# subquery - 使用 JPA 的 select 子句中的查询

> ID：11292651
> 
> 赞同：2
> 
> 时间：2012-07-02T11:22:14.133
> 
> 标签：subquery, jpa-2.0, jpql

我需要使用 Apache Openjpa 2 在 select 子句中执行子查询。JPA 是否支持 SELECT 子句中的子查询？

我的查询是这样的：

```
SELECT t.date, t.value, 
  (SELECT COUNT(DISTINCT t2.value2) FROM table t2 WHERE t2.date = t.date)
FROM table t
WHERE ... 
```

当我执行查询时，我得到一个类转换异常：

```
Exception in thread "main" <openjpa-2.1.1-SNAPSHOT-r422266:1141200 nonfatal user error> org.apache.openjpa.persistence.ArgumentException: 
    at org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:872)
    at org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:794)
    at org.apache.openjpa.kernel.DelegatingQuery.execute(DelegatingQuery.java:542)
    at org.apache.openjpa.persistence.QueryImpl.execute(QueryImpl.java:315)
    at org.apache.openjpa.persistence.QueryImpl.getResultList(QueryImpl.java:331)
Caused by: java.lang.ClassCastException: org.apache.openjpa.jdbc.sql.LogicalUnion$UnionSelect incompatible with org.apache.openjpa.jdbc.sql.SelectImpl
    at org.apache.openjpa.jdbc.sql.SelectImpl.setParent(SelectImpl.java:579)
    at org.apache.openjpa.jdbc.kernel.exps.SelectConstructor.newSelect(SelectConstructor.java:147)
    at org.apache.openjpa.jdbc.kernel.exps.SelectConstructor.evaluate(SelectConstructor.java:87)
    at org.apache.openjpa.jdbc.kernel.exps.SubQ.appendTo(SubQ.java:209)
    at org.apache.openjpa.jdbc.kernel.exps.SubQ.appendTo(SubQ.java:203)
    at org.apache.openjpa.jdbc.kernel.exps.SubQ.newSQLBuffer(SubQ.java:167)
    at org.apache.openjpa.jdbc.kernel.exps.SubQ.selectColumns(SubQ.java:153)
    at org.apache.openjpa.jdbc.kernel.exps.SubQ.select(SubQ.java:148)
    at org.apache.openjpa.jdbc.kernel.exps.SelectConstructor.select(SelectConstructor.java:372)
    at org.apache.openjpa.jdbc.kernel.JDBCStoreQuery.populateSelect(JDBCStoreQuery.java:295)
    at org.apache.openjpa.jdbc.kernel.JDBCStoreQuery.access$100(JDBCStoreQuery.java:86)
    at org.apache.openjpa.jdbc.kernel.JDBCStoreQuery$1.select(JDBCStoreQuery.java:267)
    at org.apache.openjpa.jdbc.sql.LogicalUnion.select(LogicalUnion.java:297)
    at org.apache.openjpa.jdbc.kernel.JDBCStoreQuery.populateUnion(JDBCStoreQuery.java:265)
    at org.apache.openjpa.jdbc.kernel.JDBCStoreQuery.executeQuery(JDBCStoreQuery.java:211)
    at org.apache.openjpa.kernel.ExpressionStoreQuery$DataStoreExecutor.executeQuery(ExpressionStoreQuery.java:782)
    at org.apache.openjpa.datacache.QueryCacheStoreQuery$QueryCacheExecutor.executeQuery(QueryCacheStoreQuery.java:346)
    at org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:1005)
    at org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:863)
    ... 6 more 
```

这是可能的还是我必须使用 NativeQuery / Single Queries？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T12:51:51.473

不，不支持在 SELECT 子句中使用子查询。在 JPA 2.0 规范中，这是用以下词语来说明的：

> 子查询可以用在 WHERE 或 HAVING 子句中。

# c++ - c++ 中的预期表达式

> ID：11292658
> 
> 赞同：-2
> 
> 时间：2012-07-02T11:22:45.530
> 
> 标签：c++, xcode

> **可能重复：**
> [cout 没有输出](https://stackoverflow.com/questions/11292984/no-output-for-cout)

我用 c++ 为我的 uni 编写了这段代码，但返回 0 时出错，代码不起作用。我正在使用 xcode 开发

```
#include <iostream>
#include <string>

using std::string;    
int main( void )
{ 
    string portF("PORTOFINO IM SOMMER 2012");
    std::cout<<portF<<
    portF.erase(0,5);
    portF.insert(3,"IT");
    portF.erase(7,3);
    portF.insert(13,"SEMESTER");
    portF.append("!");
    std::cout<<portF<<
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:24:09.280

```
std::cout<<portF<< 
```

应该

```
std::cout<<portF; 
```

请注意，您已经两次犯了同样的错误。分号是语句的结尾。当您放置一个插入运算符而不是它时，编译器需要另一个表达式（这就是它告诉您的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:26:23.523

利用：

```
std::cout<<portF; 
```

代替，

```
std::cout<<portF<< 
```

1.你没有在语句后添加分号。
2.您正在使用一个额外的`<<`运算符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T11:26:42.393

```
#include <iostream>
#include <string>
using std::string;

int main( void )
{
    string portF("PORTOFINO IM SOMMER 2012");
    // You have to end this statement with semi colon
    std::cout<<portF;
    portF.erase(0,5);
    portF.insert(3,"IT");
    portF.erase(7,3);
    portF.insert(13,"SEMESTER");
    portF.append("!");
    // Similarily here
    std::cout<<portF;
    return 0;
} 
```

# pthreads - 通过 pthread 在多台计算机上运行线程？

> ID：11292661
> 
> 赞同：2
> 
> 时间：2012-07-02T11:22:49.433
> 
> 标签：pthreads, cloud

我的问题是如何通过 pthread 在多台计算机上运行 C 中的多线程程序？是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:28:00.977

按照@goldenmean 的建议`multi-threading`尝试使用可能无法跨多台计算机运行程序。`multiple processes`

PS：你可以在网上找到我的教程这种类型的应用程序可以很容易地使用`MPI`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:23:01.080

单独使用 pthreads 库不会帮助您在不同的物理 CPU/机器上执行代码/应用程序的分布式版本。为此，您可能需要查看以下用于分布式计算的库/框架是如何工作的

-- 消息传递接口 (MPI)

-- Hadoop 和 MapReduce

-- 使用基本构建块编写您自己的分布式并行编程框架（

# android - 无法在 Mac 模拟器上输入 editText

> ID：11292669
> 
> 赞同：8
> 
> 时间：2012-07-02T11:23:37.940
> 
> 标签：android, macos, android-emulator, android-edittext

我是一个新的 Mac OS 用户，在安装 Eclipse 和所有必要的要求后，我将我的 Android 项目转移到了 Mac。我的应用程序运行正常，但我似乎无法在模拟器中输入。

我正在使用 Eclipse Juno 运行 Android 4.1 模拟器。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-02T11:39:24.967

这是新版 Android 工具的问题。您将需要编辑 AVD 以添加一个选项，如下所示：

从 Eclipse 转到 AVD Mananger。

*   选择特定的 AVD 并单击编辑
*   转到硬件部分，单击新建。
*   选择属性名称：键盘支持
*   默认情况下，它会添加一个值“no”。只需单击值列并将其更改为“是”。
*   再次单击编辑 AVD。

`hw.keyboard=yes`这将在`config.ini`文件中为 AVD添加一个属性。它应该从那里正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T21:30:26.580

@Romin 发布的答案看起来很有希望，但不幸的是在 SDK 4.0.3 中对我不起作用。不，我将其更改为“是”多少次，单击“编辑 AVD”后它仍会恢复为“否”（为什么没有“保存”按钮？）

我的解决方案是直接编辑`.ini`文件：

1.  编辑`$HOME/.android/avd/your-device.avd/config.ini`.
2.  改变`hw.keyboard=yes`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-31T20:06:11.460

在**Genymotion 上**，编辑 AVD 并设置“使用虚拟键盘进行文本输入”。

# jsf - Primefaces Schedule 组件 - 在延迟模型加载期间处理异常

> ID：11292671
> 
> 赞同：0
> 
> 时间：2012-07-02T11:23:47.720
> 
> 标签：jsf, jsf-2, primefaces

为我的 PF 计划加载事件时，有时可能会发生异常。是否可以以某种方式通知用户（使用咆哮组件）发生这种情况？

编辑：

这是捕获异常的方式：

```
catch (Exception e) {
    FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,"Sample error message", "Sample Error"));
    RequestContext.getCurrentInstance().update("scheduleForm:scheduleGrowl");
    e.printStackTrace();
} 
```

这是定义 schedule 组件的 xhtml 部分：

```
<ui:define name="content">
        <h:form id="scheduleForm">
            <p:growl id="scheduleGrowl" showDetail="true" autoUpdate="true" sticky="true"/> 
            <p:schedule value="#{scheduleController.scheduleModel}"
                view="agendaDay" slotMinutes="15" resizable="false"
                draggable="false" firstHour="8"
                locale="${localeResolver.staticLocale}"
                axisFormat="${localeResolver.defaultTimeFormat}"
                timeFormat="${localeResolver.defaultTimeFormat}"
                >
            </p:schedule>

        </h:form>
    </ui:define> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:07:41.827

将异常敏感代码放在 a中`try-catch`，并在中使用[`FacesContext#addMessage()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#addMessage%28java.lang.String,%20javax.faces.application.FacesMessage%29)以`catch`将消息添加到上下文中。

例如

```
try {
    // ...
} catch (SomeException e) {
    FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(
        FacesMessage.SEVERITY_FATAL, e.getClass().getName(), e.getMessage()));
    // Log the exception as well?
} 
```

但是，如果您对此无法控制，则需要创建一个自定义[`ExceptionHandler`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExceptionHandler.html). 在这个答案中可以找到一些提示：[处理 AJAXified 组件的 JSF 2.0 异常的正确方法是什么？](https://stackoverflow.com/questions/10449862/what-is-the-correct-way-to-deal-with-jsf-2-0-exceptions-for-ajaxified-components)您不一定需要显示完整的错误页面（尽管这更可取，因为这种异常通常是不可恢复的，假设这实际上不是您的代码中的错误/错误配置），您还可以在 faces 上下文中添加一条消息在那里。

# r - 将文件列表传递给 XLConnect

> ID：11292673
> 
> 赞同：0
> 
> 时间：2012-07-02T11:23:50.467
> 
> 标签：r, for-loop

我编写了一个基于 for 循环的脚本来读取多个 .xls 文件的列，将它们组合到一个数据框，搜索负值并使用这些值和文件名编写一个 .txt 文件。
该脚本基本上可以工作，但是我要处理数百个文件，而且速度有点慢。这个版本的脚本只是后期统计分析的一个基本框架，我想并行执行以加快速度。
我试图通过 lapply 和 plyr-package 应用函数来避免 for 循环，但是在将文件列表传递给“readWorkSheetFromFile”时遇到问题（path.expand（文件名）中的错误：“路径”参数无效）。

这是工作脚本：

```
require(XLConnect)
setwd(choose.dir())

input = list.files(pattern = ".xls$")

# creates empty data frame 
df = data.frame(Name=NULL, PCr=NULL, bATP=NULL, Pi=NULL)

for(i in seq(along=input)){
    data = data.frame(readWorksheetFromFile(input[i], sheet="Output Data", 
    startRow=2, startCol=c(10, 13, 16), endCol=c(10, 13, 16), header=TRUE))

    head(data, n = -1L)

    colnames(data) = c("PCr", "bATP", "Pi")
    data$Name = file.path(input[i])

    attach(data)
    df = rbind(data, df)
    attach(df)
    rm(data)
}

# searches for negative values in df and writes to txt file 
neg_val = subset(df, bATP<0 | Pi<0 | PCr<0)
write.table(neg_val, file = "neg_val.txt", sep = "\t", quote=F) 
```

这个问题的任何解决方案，或其他加快执行速度的建议？

谢谢，马库斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T08:11:33.610

我仍然不知道为什么 Martins 代码无法处理我的数据，但我找到了另一种解决方案。在第一次测试中，它比我原来的方法快了大约 4 倍。

```
# load required packages
require(XLConnect)
# set working dir
setwd(choose.dir())

# creates list of files of chosen dir and all subdirectories
files = list.files(pattern = ".xls$", recursive=T, full.names=T)

data = do.call("rbind", lapply(files, function(fl) {
   # Read data from file
   data.tmp = data.frame(readWorksheetFromFile(file = fl, sheet="Output Data", 
                         startRow=2, startCol=c(10, 13, 16), 
                         endCol=c(10, 13, 16), header=TRUE))

  # deletes last row of data frame
  head(data.tmp, n = -1L)

  # add file names as column 
  data.tmp$File = file.path(fl)
  data.tmp
}))

# rename columns
colnames(data) = c("PCr", "bATP", "Pi", "File")
# list negative values 
neg.val = subset(data, bATP<0 | Pi<0 | PCr<0)
# write output file
write.table(neg.val, file = "neg_val.txt", sep = "\t", quote=F) 
```

感谢所有和最好的问候，
马库斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T18:42:12.217

请在下面找到有关如何潜在改进的建议。请注意，我在这里提供了一个更通用的示例，以便其他人可以轻松复制。

```
require(XLConnect)

# *** Generate some dummy files ***

for(i in 1:10) {
  data = as.data.frame(matrix(rnorm(10000), ncol = 10))
  names(data) = LETTERS[1:10]
  writeWorksheetToFile(file = sprintf("test%s.xls", i), data = data, sheet = "data", header = TRUE)
}

# *** Process files ***

# Get files to process
files = list.files(pattern = "^test[0-9]+.xls$")
# Read chunks of data from files and subset
data.negative = lapply(files, function(fl) {
  # Read data from file
  data = readWorksheetFromFile(file = fl, sheet = "data", header = TRUE)
  # Which rows have all values < 0
  idx = apply(data, 1, function(x) all(x < 0))
  data[idx,]
})
# How many rows of all zeros does each chunk have?
nrows = sapply(data.negative, nrow)
# Combine data.negative into one data.frame
data.negative = do.call(rbind, data.negative)
# For each row add from which file it is originating
data.negative$File = rep(files, times = nrows)
# Write output file
write.table(data.negative, file = "neg_val.txt", sep = "\t", quote = FALSE) 
```

这个想法是不要随后 rbind data.frames 这会使事情变慢（取决于你的 data.frames 的大小）。在您的情况下，我建议通过 lapply 进行读取和子集，然后将子集组合在一起以写入文件。另请注意，您可以轻松地将 lapply 切换到例如 plyr 的 llply 并将并行后端连接到它以并行化该任务（但是，如果您尝试多次并行读取，您的磁盘可能会成为瓶颈）。

希望有帮助。

最好的问候，马丁

# c - 如何仅包含标题中的定义

> ID：11292676
> 
> 赞同：0
> 
> 时间：2012-07-02T11:24:07.657
> 
> 标签：c, linux, macros, posix, flags

我现在正在实现来自 unistd.h 和 fcntl.h 的一些系统调用（打开、读取、关闭等） 一些需要特殊标志和宏（O_CREAT、O_RDWR）

有没有办法只包含标志和宏而没有来自 unistd.h 和 fcntl.h 的函数定义？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:55:00.283

也许`-imacros`选项`gcc`就是您正在寻找的。

> `-imacros FILE`
> 
> ```
>  Exactly like `-include`, except that any output produced by
>  scanning FILE is thrown away.  Macros it defines remain defined.
>  This allows you to acquire all the macros from a header without
>  also processing its declarations. 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T12:07:48.087

一般来说 - 没有。如果您查看有问题的标题，您会发现没有原型被明确的宏包围，这只会排除它们。

您可能会设法通过包括 sys/types.h、stddef.h 等来获得*一些*定义，但不是全部。

所有的函数原型都被声明为“extern”，顺便说一句，因此应该不会成为您实现的障碍。

# android - 在 Android 中使用 Gama 组件

> ID：11292679
> 
> 赞同：1
> 
> 时间：2012-07-02T11:24:18.650
> 
> 标签：android, tile

我想在 Android 中使用 Gama 组件来使我们的应用程序变得更好。我已经下载了 Gama 的 jar，即使它抛出错误。我遵循以下链接[http://developer.digitalaria.com/devguide/gama/en/gama/tile_android .php](http://developer.digitalaria.com/devguide/gama/en/gama/tile_android.php) _

**爪哇**

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.Button;
import com.digitalaria.gama.tile.Tile;

public class GamaAndroidActivity extends Activity {
    Button button;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

} 
```

**XML**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <com.digitalaria.gama.tile.Tile
        android:id="@+id/tile"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal" /> 
```

**错误**

```
 07-02 16:52:02.623: E/AndroidRuntime(1849): FATAL EXCEPTION: main
07-02 16:52:02.623: E/AndroidRuntime(1849): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.test.gama/com.test.gama.GamaAndroidActivity}: android.view.InflateException: Binary XML file line #7: Error inflating class com.digitalaria.gama.tile.Tile
07-02 16:52:02.623: E/AndroidRuntime(1849):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
07-02 16:52:02.623: E/AndroidRuntime(1849):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
07-02 16:52:02.623: E/AndroidRuntime(1849):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
07-02 16:52:02.623: E/AndroidRuntime(1849):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
07-02 16:52:02.623: E/AndroidRuntime(1849):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-02 16:52:02.623: E/AndroidRuntime(1849):     at android.os.Looper.loop(Looper.java:123)
07-02 16:52:02.623: E/AndroidRuntime(1849):     at android.app.ActivityThread.main(ActivityThread.java:4627)
07-02 16:52:02.623: E/AndroidRuntime(1849):     at java.lang.reflect.Method.invokeNative(Native Method)
07-02 16:52:02.623: E/AndroidRuntime(1849):     at java.lang.reflect.Method.invoke(Method.java:521)
07-02 16:52:02.623: E/AndroidRuntime(1849):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-02 16:52:02.623: E/AndroidRuntime(1849):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-02 16:52:02.623: E/AndroidRuntime(1849):     at dalvik.system.NativeStart.main(Native Method)
07-02 16:52:02.623: E/AndroidRuntime(1849): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class com.digitalaria.gama.tile.Tile
07-02 16:52:02.623: E/AndroidRuntime(1849):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:576)
07-02 16:52:02.623: E/AndroidRuntime(1849):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
07-02 16:52:02.623: E/AndroidRuntime(1849):     at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
07-02 16:52:02.623: E/AndroidRuntime(1849):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
07-02 16:52:02.623: E/AndroidRuntime(1849):     at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
07-02 16:52:02.623: E/AndroidRuntime(1849):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
07-02 16:52:02.623: E/AndroidRuntime(1849):     at android.app.Activity.setContentView(Activity.java:1647)
07-02 16:52:02.623: E/AndroidRuntime(1849):     at com.test.gama.GamaAndroidActivity.onCreate(GamaAndroidActivity.java:15)
07-02 16:52:02.623: E/AndroidRuntime(1849):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-02 16:52:02.623: E/AndroidRuntime(1849):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
07-02 16:52:02.623: E/AndroidRuntime(1849):     ... 11 more
07-02 16:52:02.623: E/AndroidRuntime(1849): Caused by: java.lang.ClassNotFoundException: com.digitalaria.gama.tile.Tile in loader dalvik.system.PathClassLoader[/data/app/com.test.gama-1.apk]
07-02 16:52:02.623: E/AndroidRuntime(1849):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
07-02 16:52:02.623: E/AndroidRuntime(1849):     at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
07-02 16:52:02.623: E/AndroidRuntime(1849):     at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
07-02 16:52:02.623: E/AndroidRuntime(1849):     at android.view.LayoutInflater.createView(LayoutInflater.java:466)
07-02 16:52:02.623: E/AndroidRuntime(1849):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:565)
07-02 16:52:02.623: E/AndroidRuntime(1849):     ... 20 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T11:30:34.143

错误说

> android.view.InflateException: Binary XML file line #7: Error inflating class com.digitalaria.gama.tile.Tile

这意味着您在声明 com.digitalaria.gama.tile.Tile 的 xml 文件的第 7 行有错误，因此请检查该类是否可用。

在您使用 xml 文件的班级中：

```
 import com.digitalaria.gama.tile.Tile; 
```

**编辑 ：**

要添加 Gama 库，请将其从 javaBuildpath 中删除，然后改为：

```
 1\. Create a new folder, libs, in your Eclipse/Android project.
 2\. Right-click libs and choose Import -> General -> File System, then
    Next, Browse in the filesystem to find the library's parent
    directory and add your GAMA jar.
 3\. Right-click on your project, choose Build Path -> Configure Build
    Path, then click the Libraries tab, then Add JARs..., navigate to
    your new JAR in the libs directory and add it.
 4\. Clean the project 
```

# linux - linux中的scull设备驱动程序

> ID：11292680
> 
> 赞同：6
> 
> 时间：2012-07-02T11:24:18.767
> 
> 标签：linux, linux-kernel, linux-device-driver

我正在阅读 rubini、corbet 和 hartmen 的 linux 设备驱动程序书。我不明白这些关于 scull 设备驱动程序的内容。这就是书上所说的

**在设备上执行的唯一实际操作是在打开设备进行写入时将其截断为长度 0。这是因为，按照设计，用更短的文件覆盖 scull 设备会导致更短的设备数据区域。**

如果有人解释修剪是如何完成的，那会很有帮助？用较短的文件覆盖 scull 设备是什么意思？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T17:37:56.947

书中的 scull 设备只是一块内存（RAM）区域。因此，当使用更短的文件覆盖它时，它只会变成更小的内存区域（也就是更短的设备数据区域）。因此，当设备打开写入时，长度应该被截断为0字节（因为我们还没有写入任何东西。我们刚刚打开它进行写入）。

# c++ - 在 unix 上从 c/c++ 断点/调试其他用户进程

> ID：11292681
> 
> 赞同：1
> 
> 时间：2012-07-02T11:24:19.703
> 
> 标签：c++, c, macos, unix, gdb

正如标题所说，我正在寻找一种方法来从 ac/c++ 应用程序中的其他进程上设置断点，最好是通过一些现有的库，并在触发这些断点时做出反应（不中断主机进程）。

最终目标是一个小型且非常通用的脚本引擎，可跨单元移植，用于用户域进程。

那么，是否有人对如何实现这一点有想法，或者听说过类似的项目或功能？如果我的一般方法不可行，我很乐意就如何以另一种方式实现这一目标提出反馈。

**编辑：**按照 SO 标准，具体问题是断点/进程交互是否可以通过库或 c/c++ 中的 unix 系统调用获得。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:23:30.830

> 具体问题是断点/进程交互是否可以通过库或 c/c++ 中的 unix 系统调用获得。

是的：`ptrace`是唯一可移植的 Unix 系统调用。

您会很快发现，要使用它做*任何*有用的事情，您必须编写*大量*代码。

我希望您必须先实现约 50% 的 GDB，然后才能拥有任何可编写脚本且通常有用的东西，因此更好的方法可能是从 GDB*开始*，并改用其内置的 python 脚本。

在 , 上也有特定于平台的改进`ptrace`（Solaris`ptrace`在`/procfs`; Linux 方面实现了`utrace`，尽管它似乎是死胎）。

您还可以查看特定于 Linux 的`frysk`想法。

# java - 如果我只从集合中读取，我是否需要担心线程安全？

> ID：11292683
> 
> 赞同：3
> 
> 时间：2012-07-02T11:24:31.060
> 
> 标签：java, concurrency

我想将预先构建的 Map 传递给多个线程，这些线程只会同时从 Map 中读取值。在这种情况下，我是否需要担心并发访问并使用 ConcurrentHashMap 而不是 HashMap？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T11:31:39.867

您仍然需要确保在创建和初始化 Map 的线程与随后读取它的线程之间存在“happens-before”关系。如果没有这样的关系，*理论上*读线程有可能看到陈旧的数据。

如果您在启动其他线程的线程中创建并填充 Map ......在它执行此操作之前......你应该没问题。

确保安全的另一种简单方法是执行以下操作：

```
public class Foo {
    private final Map map;

    public Foo(....) {
        map = new HashMap();
        // populate
    }

    public Map getMap() {
        // If the 'map' is final, and nothing changes it apart from 
        // the constructor, this method doesn't need to be synchronized.
    } 
```

这两者都会导致创建/初始化和每个线程第一次使用 Map 之间的“先发生”关系。

您也可以`map`在上面声明为`volatile`，但可能会导致比严格需要的更多的缓存刷新；即你会受到小的性能影响。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T11:31:26.247

此外，为了确保仅针对读取操作进行处理，您可以做的是返回[Collections.unmodifiableMap(Map)](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collections.html#unmodifiableMap%28java.util.Map%29)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T11:26:05.523

理论上，并发读取不应该对集合造成问题。

但是如果你修改一次，很容易出错，那么你应该使用并发版本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-02T11:29:37.233

如果所有线程都在读取它，则传递 HashMap 是安全的。但是，在传递地图之前，我会调用 Collections.unmodifiableMap() 以确保如果其中一个线程意外修改它，因为将来某些程序员不尊重当前的合同，你会得到一个例外。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-02T11:33:31.127

你总是需要担心线程安全。在您的具体示例中，如果您

1.  在单个线程中完全构建地图；
2.  `volatile`通过设置一个变量来引用它，将它发布到其他线程。

或者，如果这是一个选项，请确保在映射准备好之前不启动线程。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-02T11:26:19.653

**不**，您不必担心。
除非有人在线程访问它时更改预建地图。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-02T11:30:20.403

不，你不需要使用它。仅在以下情况下会产生冲突：

*   当一些线程可能会读取数据，而其他线程可能会尝试覆盖它。
*   第二个是当每个线程都尝试更新数据时。

当每个线程仅尝试读取值时，不会产生冲突。

# href - 链接在同一个窗口中打开两次

> ID：11292694
> 
> 赞同：0
> 
> 时间：2012-07-02T11:25:11.340
> 
> 标签：href, new-window

我有下一个 html 代码，打开一个链接到一个新窗口：

```
<a rel="nueva_ventana" href="http://www.google.es">
</a> 
```

当我单击它时，它会在两个新窗口中打开同一页面两次。这可能是问题所在？（我只想打开一次）谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:52:09.677

抱歉，问题解决了，我导入了两次 my `commons.js`，我正在执行`rel="nueva_ventana"`... 所以它打开了两次，谢谢大家！

# javascript - javascript比较后打开led

> ID：11292700
> 
> 赞同：0
> 
> 时间：2012-07-02T11:25:45.343
> 
> 标签：javascript, html, ajax, cgi

好的，所以我正在监控房间的温度并使用微芯片的 PIC-WEB 控制一些 LED。我必须比较两种温度：温度传感器读取的温度和我在网页中指定的温度）。我设法使用

```
if( temp0 < temp2 )
{
document.getElementById('rez').innerHTML = '<font color="#FF0000">Heating</font>';
}
else
{
document.getElementById('rez').innerHTML = '<font color="#00FF00">Cooling</font>';
} 
```

在我的网页中显示加热或冷却。

温度值是从 status.xml 中读取的，看起来像这样

```
<temp0>~temp~</temp0> // the temp sensor
<temp2>~tempt~</temp2> // the temperature i specify in my webpage 
```

我想做的是，除了显示加热/冷却之外，还要打开 LED

我使用的管理请求的代码是

```
 newAjax.ajaxReq = new XMLHttpRequest();
    newAjax.ajaxReq.open("POST", newAjax.url, true);
    newAjax.ajaxReq.send(null); 
```

我的网页中有用于控制其他 LED 的按钮

```
<input type="button" value="Turn ON/OFF LED 5" onclick="newAJAXCommand('leds.cgi?led=5');"></input> 
```

leds.cgi 文件看起来像这样

```
~led(0)~ 
```

据我了解，javascript函数newAJAXCommand为“leds.cgi”创建了一个html GET请求，其“POST”值为“led=5”

我不知道如何在比较中引入 ('leds.cgi?led=5') 所以

```
if (temp0 < temp2)
display Heating and turn on LED5
else
display Cooling and turn of LED5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:46:03.357

显然我只需要添加`newAJAXCommand('leds.cgi?led=5')`

像这样

```
if( temp0 < temp2 )
{
document.getElementById('rez').innerHTML = '<font color="#FF0000">Heating</font>';
newAJAXCommand('leds.cgi?led=5')
}
else
{
document.getElementById('rez').innerHTML = '<font color="#00FF00">Cooling</font>';
newAJAXCommand('leds.cgi?led=6')
} 
```

# java - 检测类文件时出错 (asm.ClassWriter.getCommonSuperClass)

> ID：11292701
> 
> 赞同：6
> 
> 时间：2012-07-02T11:25:52.317
> 
> 标签：java, classloader, instrumentation

仪器出现错误

```
java.lang.RuntimeException: java.lang.ClassNotFoundException: Deposit
    at org.objectweb.asm.ClassWriter.getCommonSuperClass(Unknown Source)
    at org.objectweb.asm.ClassWriter.a(Unknown Source)
    at org.objectweb.asm.Frame.a(Unknown Source)
    at org.objectweb.asm.Frame.a(Unknown Source)
    at org.objectweb.asm.MethodWriter.visitMaxs(Unknown Source)
    at com.jConSequence.instrumentor.methodProber.AdddataBaseDetailsInstructions$AdddataBaseDetailsMethodInstructions.visitMaxs(AdddataBaseDetailsInstructions.java:131)
    at org.objectweb.asm.ClassReader.accept(Unknown Source)
    at org.objectweb.asm.ClassReader.accept(Unknown Source)
    at com.jConSequence.instrumentor.PrintLoadedClasses.print(PrintLoadedClasses.java:31)
    at com.jConSequence.tooGUI.RevEnggToolGUI.jButton1ActionPerformed(RevEnggToolGUI.java:487)
    at com.jConSequence.tooGUI.RevEnggToolGUI.access$0(RevEnggToolGUI.java:471)
    at com.jConSequence.tooGUI.RevEnggToolGUI$1.actionPerformed(RevEnggToolGUI.java:127)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$1.run(Unknown Source)
    at java.awt.EventQueue$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$2.run(Unknown Source)
    at java.awt.EventQueue$2.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

在检测类时

```
D:\workspaces\workspace\bankManagement\bin\Account.class
D:\workspaces\workspace\bankManagement\bin\ATM.class
D:\workspaces\workspace\bankManagement\bin\ATMCaseStudy.class
D:\workspaces\workspace\bankManagement\bin\BalanceInquiry.class
D:\workspaces\workspace\bankManagement\bin\BankDatabase.class
D:\workspaces\workspace\bankManagement\bin\CashDispenser.class
D:\workspaces\workspace\bankManagement\bin\Deposit.class
D:\workspaces\workspace\bankManagement\bin\DepositSlot.class
D:\workspaces\workspace\bankManagement\bin\Keypad.class
D:\workspaces\workspace\bankManagement\bin\Screen.class
D:\workspaces\workspace\bankManagement\bin\Transaction.class 
```

我正在使用 apache commonsIO 将上述类集作为字节流读取。

然后使用 asm 库检测它们。

最后它们被转换成类文件。

正是在仪器的这一点上，我收到了这个错误任何人都可以解释原因和可能的解决方案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T03:00:52.060

发生此错误是因为 ASM 正在生成堆栈映射帧，并且对于某些字节码，堆栈映射帧必须包含两个类的公共超类。默认情况下，ASM**通过 Class.forName**加载类来实现这一点，然后使用反射实现正确的算法。据推测，ASM 库无法从其类加载器加载您的 Deposit 类。

为避免该错误，您需要使用 SKIP_FRAMES （注意：Java 7 使用的类文件版本 51.0 需要堆栈映射帧，因此如果您正在生成 Java 7 字节码，则这是一个非选项），或者您需要继承 ClassWriter 并覆盖 getCommonSuperClass。根据您的代码在做什么，也许您可​​以使用字符串比较对答案进行硬编码，或者您可以采用 ASM 实现并将其重写为使用您指定的 ClassLoader。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-18T06:29:05.057

我也遇到了这个问题。在尝试编写自己的 ClassWriter 并在互联网上搜索后，我终于找到了一个非常适合我的实现：[SafeClassWriter.java](https://github.com/rohanpadhye/JQF/blob/master/instrument/src/main/java/janala/instrument/SafeClassWriter.java)

希望它会有所帮助。

# php - 如何优化大型内容网站的网页和数据库

> ID：11292707
> 
> 赞同：0
> 
> 时间：2012-07-02T11:26:11.070
> 
> 标签：php, mysql

与购物电子商务相关的网站。该网站有大量数据要存储在数据库中。到目前为止，db 中的 products 表有近 18K 条记录，有 20 个字段。我创建了如下的数据库结构

```
 - brands
 - products
 - shopslist
 - shopping_details 
```

该网站有 100 多页与产品和品牌相关的所有内容。

```
eg.pages are 
www.example.com/nokia-mobile-phones.php , www.example.com/samsung-mobile-phones.php 
www.example.com/samsung-galaxy-s3-price.php,www.example.com/android-mobile-phones.php 
```

我已经编写了查询以动态获取与页面对应的产品详细信息。这使我的网站在从 db ans 显示中获取数据时有些慢。

目前，网站每天的访问量接近 14k 到 15k。突然，网站变得非常缓慢，每天停止响应超过 10 小时。托管方面的技术人员表示，问题是由于一天内的请求数量较多，而您的数据库占用了75％的内存，请优化您的站点和数据库以获得更好的结果。该网站托管在具有更好配置的 VPS 中。

请提供优化网站、查询和数据库的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:49:02.643

1.  使用缓存系统

2.  避免在 HTML 中调整图像大小，如果图像最初的尺寸为 1280x900 像素。（即`<img width="400" height="280" src="myimage.jpg" />`）

3.  使用外部 JS 和 CSS 文件

4.  优化编写代码的方式 - 例如`<h1><em>Your heading</em></h1>`，您可以轻松地使用 CSS 使用 font-style 属性使标题变为斜体，而不是使用

5.  使用内容交付网络 ( [CDN](http://aws.amazon.com/s3/) )

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T12:15:35.297

**分析您的代码以查明瓶颈**

Hoare 的格言指出，过早的优化是万恶之源，在试图使您的网站更快时要牢记这一点。在更改代码之前，您需要确定导致代码变慢的原因。当问题可能与数据库或网络相关时，您可以阅读本指南以及许多其他关于优化 PHP 的指南。通过分析您的 PHP 代码，您可以尝试查明瓶颈。

**升级您的 PHP 版本**

多年来，维护 PHP 引擎的开发人员团队取得了许多显着的性能改进。如果您的 Web 服务器仍在运行旧版本，例如 PHP 3 或 PHP 4，您可能需要在尝试优化代码之前研究升级。

**使用缓存**

使用缓存模块（如 Memcache）或支持缓存的模板系统（如 Smarty）可以通过缓存数据库结果和渲染页面来帮助提高网站的性能。

**使用输出缓冲**

PHP 使用内存缓冲区来存储脚本尝试打印的所有数据。这个缓冲区会使您的页面看起来很慢，因为您的用户必须等待缓冲区填满才能向他们发送任何数据。幸运的是，您可以进行一些更改，强制 PHP 更快、更频繁地刷新输出缓冲区，从而让您的用户感觉您的网站更快。

**避免编写幼稚的 setter 和 getter**

在 PHP 中编写类时，您可以通过直接使用对象属性而不是编写幼稚的 setter 和 getter 来节省时间并加快脚本速度。在下面的示例中，dog 类使用`setName()`和`getName()`方法来访问 name 属性。

```
class dog {
  public $name = '';

  public function setName($name) {
    $this->name = $name;
  }

  public function getName() {
    return $this->name;
  }
} 
```

请注意，`setName()`and`getName()`仅分别存储和返回 name 属性。

```
$rover = new dog();
$rover->setName('rover');
echo $rover->getName(); 
```

直接设置和调用 name 属性可以将运行速度提高 100%，并减少开发时间。

```
$rover = new dog();
$rover->name = 'rover';
echo $rover->name; 
```

**不要无缘无故复制变量**

有时 PHP 新手试图通过在使用它们之前将预定义变量复制到名称较短的变量来使他们的代码“更干净”。这实际上导致内存消耗加倍（当变量被更改时），因此脚本速度变慢。在下面的示例中，如果用户在 textarea 字段中插入了 512KB 的字符。此实现将导致使用近 1MB 的内存。

```
$description = strip_tags($_POST['description']);
echo $description; 
```

没有理由复制上面的变量。您可以简单地内联执行此操作并避免额外的内存消耗：

```
echo strip_tags($_POST['description']); 
```

**避免在循环中执行 SQL 查询**

一个常见的错误是将 SQL 查询放在循环中。这会导致多次往返数据库，并显着降低脚本速度。在下面的示例中，您可以更改循环以构建单个 SQL 查询并一次插入所有用户。

```
foreach ($userList as $user) {
  $query = 'INSERT INTO users (first_name,last_name) VALUES("' . $user['first_name'] . '", "' . $user['last_name'] . '")';
  mysql_query($query);
  } 
```

产生：

```
INSERT INTO users (first_name,last_name) VALUES("John", "Doe") 
```

您可以将数据组合到单个数据库查询中，而不是使用循环。

```
$userData = array();
foreach ($userList as $user) {
    $userData[] = '("' . $user['first_name'] . '", "' . $user['last_name'] . '")';
 }
$query = 'INSERT INTO users (first_name,last_name) VALUES' . implode(',', $userData);
mysql_query($query); 
```

产生：

```
INSERT INTO users (first_name,last_name) VALUES("John", "Doe"),("Jane", "Doe")... 
```

处理`SQL`优化时的一个好方法是只选择您需要的字段，而不是您的情况下的所有字段。这几乎总是会对性能产生巨大影响，尤其是当字段是`BLOB`'s 时。而且，索引也非常重要，但前提是您已正确创建它。`LIMIT`如果您不需要立即显示结果，在查询中使用 of子句也是一个好主意。

[这里是关于优化](https://developers.google.com/speed/articles/optimizing-javascript)**JavaScript**代码的更多信息，[这里](https://developers.google.com/speed/articles/optimizing-images)是关于优化**网络图形**的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T11:57:24.603

*   从静态域中获取图像、样式等。
*   为您的数据库使用 Master & Slave
*   检查表中的索引、模式和数据类型。

我可以向您保证，您的数据库设置、索引等正在遭受痛苦。如果您提供有关数据库表的更多信息，那么我们将为您提供更好的答案；）

# php - 使用 PHP 访问多维数组

> ID：11292709
> 
> 赞同：1
> 
> 时间：2012-07-02T11:26:14.400
> 
> 标签：php, arrays, multidimensional-array, nested-loops

我不想发布这个，但我时间紧迫，需要一些帮助来访问这个庞大的多维数组中的值。熬夜后，我没有更多的脑力或耐力来玩它了。那么有人可以帮助我使用一组嵌套的 for 循环来获取这些值吗？！谢谢大家。

```
Array
(
    [0] => Array
        (
            [120] => Array
                (
                    [field_1_textbox_text] => Panel 1
                    [field_2_textbox_text] => p1
                    [field_3_wysiwyg_content] => Pane 1
                    [field_4_textbox_text] => P1
                )

        )

    [1] => Array
        (
            [121] => Array
                (
                    [field_1_textbox_text] => Panel 2
                    [field_2_textbox_text] => p2
                    [field_3_wysiwyg_content] => Panel 2
                    [field_4_textbox_text] => p2
                )

        )

    [2] => Array
        (
            [122] => Array
                (
                    [field_1_textbox_text] => Panel 3
                    [field_2_textbox_text] => p3
                    [field_3_wysiwyg_content] => panel 3333
                    [field_4_textbox_text] => p3
                )

        )

) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:29:21.710

```
foreach ($array as $key => $arr) {
    foreach ($arr as $key => $arr) {
        echo $key, PHP_EOL;
        foreach ($arr as $key => $value) {
            echo $key, ': ', $value, PHP_EOL;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T11:30:38.823

没看懂问题。你认为 - $array[0][120]['field_1_textbox_text']？要不然是啥？每个维度都有一个循环。如果我有 2D 数组，我在其他 foreach 循环中有 foreach 循环。在 3D 数组中，您将在另一个 foreach 循环中的其他 fooreach 循环内有 foreach 循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T11:32:49.007

```
/* foreach example 4: multi-dimensional arrays */
$a = array();
$a[0][0] = "a";
$a[0][1] = "b";
$a[1][0] = "y";
$a[1][1] = "z";

foreach ($a as $v1) {
  foreach ($v1 as $v2) {
    echo "$v2\n";
  }
} 
```

阅读[http://php.net/manual/en/control-structures.foreach.php](http://php.net/manual/en/control-structures.foreach.php)或使用递归函数

# c++ - 获取按地图值排序的地图键向量的最快方法？

> ID：11292719
> 
> 赞同：2
> 
> 时间：2012-07-02T11:26:39.573
> 
> 标签：c++, stl

我有一个`map<int int>`. 我需要获取第一个 int （键）的向量，但按第二个 int 的顺序（值）排序。最快的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T11:45:55.043

任何告诉您他们拥有“最快”方式的人都是骗子，因为他们不知道您使用的是什么硬件/C++ 实现等。

这是一种方法：

```
typedef pair<int,int> item;

vector<item> mytmp(mymap.begin(), mymap.end());
sort(mytmp.begin(), mytmp.end(), [](item lhs, item rhs) { return lhs.second < rhs.second; });

vector<int> myvec;
myvec.reserve(mytmp.size());
transform(
    mytmp.begin(), mytmp.end(),
    back_inserter(myvec);
    [](item i) { return i.first; }
); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T11:31:20.430

您可以创建第二张地图，在其中将`<key,value>`配对交换为`<value,key>`. 但是，如果您有重复的值，您将遇到麻烦。

您可能真正想要的是双向地图。例如，参见[http://www.boost.org/doc/libs/1_47_0/libs/bimap/doc/html/index.html](http://www.boost.org/doc/libs/1_47_0/libs/bimap/doc/html/index.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T11:46:52.517

您可以将其放入 a 中`std::vector<std::pair<int, int> >`，然后编写一个谓词以对第二个值进行排序。然后通过对中的第一个值访问密钥：

```
std::map<int, int>         the_map;
typedef std::pair<int,int> pair_type;

the_map[1] = 2;
the_map[2] = 1;
the_map[3] = 8;
the_map[4] = 8;
the_map[5] = 3;

struct Pred {
    bool operator()(pair_type const& a, pair_type const& b) const {
        return (a.second < b.second);
    }   
};  
struct Tran {
    int operator()(pair_type const& a) const {
        return a.first;
    }   
};  

std::vector<pair_type>     vec(the_map.begin(), the_map.end());
std::sort(vec.begin(), vec.end(), Pred());

std::vector<int>           result;
transform(vec.begin(), vec.end(),  std::back_inserter(result), Tran());

BOOST_FOREACH(int const& r, result) {
    cout << r << endl;
} 
```

# java - 存储过程无法从 java 正确执行

> ID：11292723
> 
> 赞同：1
> 
> 时间：2012-07-02T11:26:59.930
> 
> 标签：java, sql, sql-server-2008, tsql, stored-procedures

我在 T-SQL 中有一个从[这里](https://stackoverflow.com/questions/11282441/dynamically-search-columns-for-given-table#comment14842545_11282441)开始的过程，当我在 SMSS 中执行它时它工作得很好。例如，我有一个动物表，如果我想搜索其中包含“猫”一词的所有列，我会这样做：

```
EXEC SearchTable 'animals' 'cat' 
```

正如我所说，这非常有效。但是当我从java执行同样的事情时，就像这样：

```
Statement statement = ProjectServer.dbConnection.createStatement();
String sql = "EXEC SearchTable '" + tblname + "' '" + searchTerm + "'";
System.out.println(sql);
ResultSet results = statement.executeQuery(sql); 
```

并且 tblname = 动物和 searchTerm = cat，它会打印出：

```
EXEC SearchTable 'animals' 'cat' 
```

这正是我在 SMSS 中所做的。但我得到了这个例外：

```
java.sql.SQLException: [Microsoft][SQL Server Native Client 10.0][SQL Server]Incorrect syntax near 'cat'. 
```

我不知道是怎么回事。我将 JDK 7 与 NetBeans 7.1.2 和 SQL Server 2008 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:29:53.330

你少了一个逗号，不是吗？

SQL 应该是 EXEC SearchTable 'animals', 'cat'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T11:31:24.560

尝试添加逗号

```
EXEC SearchTable 'animals', 'cat' 
```

您还可以像这样指定 var 名称：

```
EXEC SearchTable 
   @tblname = 'animals', 
   @term = 'cat' 
```

但是..仍然必须有那个逗号。

# android - Android手机元数据的唯一性

> ID：11292725
> 
> 赞同：0
> 
> 时间：2012-07-02T11:27:12.727
> 
> 标签：android

我需要从标准 android 智能手机中列出的信息中了解：

*   IMEI*   IMEI SV*   系统版本*   基带版本*   内核版本*   内部编号

    1.  这里有多少项目是设备独有的。
    2.  防篡改多少钱 - 除了我知道可以非法“解锁”的 IMEI（第一项）。
    3.  任何两个设备可以复制数据的几率（百分比）是多少。

    “唯一”是指特定于设备的实际实例；不是模型。就像我们都有指纹一样，但你的指纹对你来说是独一无二的。

# c - 理解 C 中的地址

> ID：11292729
> 
> 赞同：2
> 
> 时间：2012-07-02T11:27:23.787
> 
> 标签：c, pointers

对于某些结构`splab`：

```
int main() {

   int a;
   struct splab *s1;
   int b;

   printf("%x\n",&a);
   printf("%x\n",&b);

   return 0;
 } 
```

我想我应该进入第二个打印：（`bfc251e8 - 8`即占 的空间`s1`）。

相反，我得到了：

```
bfc251e8
bfc251ec 
```

为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T11:49:28.260

这不仅仅是关于变量的顺序。您从不使用`s1`，编译器可以（并且*可能*）简单地优化它而不在堆栈上分配空间。

`a`如果我尝试只打印and的地址，这就是我得到的结果`b`，就像你做的那样：

```
ffeb7448 (&a)
ffeb7444 (&b) 
```

即4个字节的差异。

`s1`如果我尝试打印也的地址（因此最终*使用*声明） ，这是我得到的`s1`：

```
ffe109cc (&a)
ffe109c8 (&s1)
ffe109c4 (&b) 
```

您可以看到它实际上确实位于`a`和`b`这一次之间（并不总是，正如其他答案已经指出的那样），并且`a`由`b`8 个字节而不是 4 个字节分隔。

* * *

另一个稍微相关的点与对齐有关：

例如：

```
struct foo
{
  int a;
  char b;
}; 
```

虽然这个结构在具有 4 字节整数的机器上看起来可能是 5 字节宽，但我的编译器说，`sizeof (struct foo) == 8`.

这样`foo`总是在 8 字节边界对齐（这包括使用`struct foo`局部变量）。

例如

```
int bar (void)
{
  struct foo a;
  struct foo b;

  /* Do some work.  */
} 
```

在这里，`a`并且`b`在我的机器编译器上被 8 个字节分隔，即使每个`foo`实际上只使用 5 个字节。

所有这一切都表明：在编写代码时，*永远不要*假设与宽度、对齐、相对位置等有关的任何事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T11:35:01.893

编译器可以自由地重新排序变量在堆栈上的位置，因此变量可能位于指针`b`之前`s1`，尽管后者是在中间声明的。

由于某些数据类型需要对齐，因此此类重新排列可能会提高内存利用率，从而消除任何可能的间隙。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T11:31:22.020

你是说因为指针`s1`被分配在`a`和`b`需要的地址之间根据指针使用内存的数量而变化？（我不太清楚）。

如果是这样，我认为您不能指望这一点，如何在不同变量之间分配内存不在您的控制之下。看起来内存是以线性方式分配的，但这不是您可以依赖的。

如果我对您的问题的解释有误/您能否重新措辞/澄清一下？

# c# - 使用深度缓冲区和深度测试初始化 OpenGL

> ID：11292733
> 
> 赞同：0
> 
> 时间：2012-07-02T11:27:33.267
> 
> 标签：c#, opengl

我想在不使用 GLUT 的情况下以独立于平台的方式使用深度缓冲区初始化 OpenGL。

如何使用 c# 包装器删除 OpenGL 场景中的隐藏表面。我没有使用 GLUT，所以我不能使用 glutInitDisplayMode。任何想法？

* * *

更多细节：

我找到了有关 Hidden-Surface 移除的这些步骤：

1.  通过 glutInitDisplayMode 请求 z 缓冲区：

    ```
    // GLUT_DEPTH to request for depth-buffer
    glutInitDisplayMode(GLUT_RGBA | GLUT_DOUBLE | GLUT_DEPTH); 
    ```

2.  启用 z-buffer 进行深度测试：

    ```
    glEnable(GL_DEPTH_TEST); 
    ```

3.  当我们清除颜色缓冲区时清除 z 缓冲区：

    ```
    // Clear color and depth buffers
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); 
    ```

据我所知， glutInitDisplayMode 是 GLUT 函数之一。我可以消除这个电话而不会产生不良影响。如果不是，那么可以解决问题的替代纯opengl调用是什么。

我正在使用由[(Colin P. Fahey)编写的 ac# 包装器](http://www.colinfahey.com/opengl/csharp.htm)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:15:23.573

*GLUT 不是 OpenGL！*

无论 GLUT 做什么，您的 C# 包装器都可能提供它，而且可能更好。您需要的是**深度缓冲区**并启用**深度测试**。

* * *

### 反映问题编辑的更新

获取深度缓冲区的确切步骤完全取决于您使用的包装器。所以有必要告诉我们它是哪个包装器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T13:24:51.437

OpenGL 是一个平台无关的渲染 API。为窗口系统创建 OpenGL 上下文是窗口系统接口（例如[WGL](http://en.wikipedia.org/wiki/WGL_%28software%29)）的工作。

根据您使用的 C# 绑定，您可能有直接的 wgl 或 glx 调用或类似 GLUT 的平台独立的窗口调用集（例如在[OpenTK](http://opentk.svn.sourceforge.net/viewvc/opentk/trunk/Source/OpenTK/Platform/INativeGLWindow.cs?revision=3125&view=markup)的情况下）。如果您让我们知道您使用什么绑定，我可以提供更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T15:53:36.453

你有没有考虑过使用一个不那么……古怪的界面？我完全赞成寻找由随机人编写的不同且有趣的工具，但该文档非常糟糕。

我查看了它，它的 InitializeOpenGL 命令似乎不允许您为 GL 初始化设置*任何*参数。完全没有。这意味着您几乎受制于控制。

现在，默认情况下它*可能*会给你一个深度缓冲区（坦率地说，如果它没有，那么它完全没有价值，你应该立即放弃它，如果不是更早的话）。但是由于没有办法告诉它你想用你的缓冲区做什么，所以你不能做任何事情来*确保*它。

就个人而言，我建议您放弃此工具并使用更主流的工具，例如[OpenTK](http://sourceforge.net/projects/opentk/)。诚然，OpenTK 的稳定版本非常古老，但它仍然比您现在使用的要好。

# android - 无法使用 playn eclipse 和 maven 从原型创建项目

> ID：11292736
> 
> 赞同：0
> 
> 时间：2012-07-02T11:27:36.923
> 
> 标签：android, eclipse, maven, playn

这很令人沮丧。我按照 PlayN 页面上的 GettingStarted 说明进行操作，在命令行中一切正常，但是在尝试在 Eclipse 中创建骨架 PlayN maven 项目时，我不断收到错误消息。我在 Mac OS X 和 eclipse 4.2.0 经典版上运行它。

> 无法从原型创建项目 [com.googlecode.playn:playn-archetype:1.3.1]

在细节下它说：定义的工件不是原型

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T23:01:08.437

我找到了一种更好的解决方案，它确实有效。我抛弃了 eclipse 并按照 netbeans [http://www.gamefromscratch.com/post/2012/05/24/Using-Netbeans-712-with-PlayN-13.aspx这个教程](http://www.gamefromscratch.com/post/2012/05/24/Using-Netbeans-712-with-PlayN-13.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:31:23.557

我想出了一个可行的解决方案，尽管不太漂亮。本质上，如果您使用 Maven（而不是 Eclipse）创建一个新项目，然后将其导入，您将不会看到此错误。有关更多信息，请参阅[此问题的](https://stackoverflow.com/questions/11357237/unable-to-create-skeleton-playn-project-in-eclipse/11366975#11366975)答案。

# asp.net - 在gridview的模板字段内打开gridview

> ID：11292737
> 
> 赞同：0
> 
> 时间：2012-07-02T11:27:37.750
> 
> 标签：asp.net, html, c#-4.0, gridview

我在gridview的模板字段中有图像按钮。我想在单击加号按钮的行下方打开另一个 gridview，但我的问题是内部 gridview 作为父网格视图的列打开，而不是在所选行下方打开。我尝试了各种设计方法，但仍然无法正常工作。我正在使用 Jquery 在单击图像按钮时打开子网格视图。下面是我的网格设计和 Jquery 代码。

```
<div class="gridContentholder">
    <asp:GridView ID="grdsamplestock" runat="server" AlternatingRowStyle-CssClass="alt"
                AutoGenerateColumns="False" CssClass="styleGrid" GridLines="None" OnSelectedIndexChanged="grdsamplestock_SelectedIndexChanged"
                OnRowDataBound="grdsamplestock_RowDataBound" OnRowCreated="grdsamplestock_RowCreated">
          <AlternatingRowStyle CssClass="alt" />
          <Columns>
               <asp:TemplateField>
                   <ItemTemplate>
                     <asp:HiddenField ID="hdnSampleStockMasterID" runat="server" Value='<%#Eval("SampleStockMasterID") %>' />
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:BoundField HeaderText="DoctorName" DataField="DoctorName" />
                    <asp:BoundField HeaderText="Comments" DataField="Comments" />
                    <asp:BoundField HeaderText="TotalSampleStockQuantity" DataField="TotalSampleStockQuantity" />
                    <asp:BoundField HeaderText="SampleDate" DataField="SampleDate" SortExpression="SampleDate"
                        DataFormatString="{0:dd/MM/yyyy}" HtmlEncode="false" NullDisplayText="N/A" />
                    <asp:TemplateField>
                       <ItemTemplate>
                            <a href="javascript:expandcollapse('div<%# Eval("SampleStockMasterID") %>', 'one');">
                                <img id="imgdiv<%# Eval("SampleStockMasterID") %>" alt="Click to show/hide Orders for Customer <%# Eval("SampleStockMasterID") %>"
                                    width="9px" border="0" src="../Images/plus.gif" />
                            </a>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField>
                        <ItemTemplate>
                            <%--<asp:Panel ID="pnlInnerGrid" runat="server" >--%>
                            <tr style="display: none;" id="div<%# Eval("SampleStockMasterID") %>">
                                <td colspan="5">

                                    <asp:GridView ID="grdItems" CssClass="styleGrid" PagerStyle-CssClass="pgr" runat="server"
                                        AutoGenerateColumns="false" GridLines="None" OnRowCreated="grdItems_RowCreated"
                                        AlternatingRowStyle-CssClass="alt" >
                                        <AlternatingRowStyle CssClass="alt"></AlternatingRowStyle>
                                        <Columns>
                                            <asp:BoundField HeaderText="Reference No" DataField="ReferenceNo" />
                                            <asp:BoundField DataField="ProductName" HeaderText="Product" SortExpression="ProductName" />
                                            <asp:BoundField DataField="Specification" HeaderText="Specification" SortExpression="Specification" />
                                            <%--  <asp:BoundField DataField="StoreKeeparID" HeaderText="StoreKeeparID" SortExpression="StoreKeeparID" />--%>
                                            <%--<asp:BoundField DataField="Name" HeaderText="StoreKeeper Name" SortExpression="Name" />--%>
                                            <asp:BoundField DataField="WarehouseName" HeaderText="Warehouse" SortExpression="WarehouseNmae" />
                                            <asp:BoundField HeaderText="Expiry Date" DataField="ExpiryDate" DataFormatString="{0:d}"
                                                HtmlEncode="false" />
                                            <asp:BoundField HeaderText="Lot No" DataField="LotNo" />
                                            <asp:TemplateField>
                                                <ItemTemplate>
                                                    <asp:HiddenField ID="SampleStockTrsID" runat="server" Value='<%# Eval("SampleStockTrsID") %>' />
                                                </ItemTemplate>
                                            </asp:TemplateField>
                                        </Columns>
                                    </asp:GridView>

                                </td>
                            </tr>
                            <%--   </asp:Panel>--%>
                        </ItemTemplate>
                    </asp:TemplateField>
                </Columns>
            </asp:GridView>
   </div> 
```

//jQuery的代码。

```
<script language="javascript" type="text/javascript">
    $(document).ready(function () {
        //            var=$('div[id^="player_"]')

    });
    function expandcollapse(obj, row) {
        var div = document.getElementById(obj);
        var img = document.getElementById('img' + obj);
        if (div.style.display == "none") {
            div.style.display = "";
            $(div).hide().show(1000);
            if (row == 'alt') {
                img.src = "../Images/minus.gif";
            }
            else {
                img.src = "../Images/minus.gif";
            }
            img.alt = "Close to view other Sample Transaction";
        }
        else {
            $(div).hide(1000, function () {
                div.style.display = "none";
            });
            if (row == 'alt') {
                img.src = "../Images/plus.gif";
            }
            else {
                img.src = "../Images/plus.gif";
            }
            img.alt = "Expand to show Available Stock";
        }
    } 
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:50:46.630

我在以前的一个项目中使用过这个。从我的项目中提供 exect 代码示例。只需根据您的需要进行修改。随意问的问题。

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" OnRowDataBound="GridView1_RowDataBound">
    <Columns> 
        <asp:TemplateField>
            <ItemStyle BackColor="#C2D88B" Width="250px" />
            <ItemTemplate>
                <div>
                    //Draw your table here by placing a html table
                </div>
                <div>
                    <p>
                        <asp:ListView ID="ListView1" runat="server">
                            <ItemTemplate>
                                <asp:Label ID="Label1" runat="server" Text='<%# Eval("item_id") %>'></asp:Label>
                                <asp:Label ID="Label2" runat="server" Text='<%# Eval("quantity") %>'></asp:Label>
                            </ItemTemplate>
                            <ItemSeparatorTemplate>
                            <br />                                        
                            </ItemSeparatorTemplate>
                        </asp:ListView>
                    </p>
                </div>
            </ItemTemplate>
        </asp:TemplateField>                 
    </Columns>
</asp:GridView> 
```

# delphi - 当我给它一个负数时，为什么带有'％u'的格式会打印错误的值？

> ID：11292741
> 
> 赞同：5
> 
> 时间：2012-07-02T11:27:42.710
> 
> 标签：delphi, string-formatting

为什么会`Format('%u', [-100])`导致`'4294967196'`？我在 D7 和 XE2 中对此进行了测试。

该函数的[文档](http://docwiki.embarcadero.com/Libraries/en/System.SysUtils.Format#Format_Strings)`Format`说：

> %u 无符号十进制。与 %d 类似，但不输出符号。

所以我本来期望结果为`'100'`.

这是一个错误吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-02T11:36:02.160

不，这不是错误。

你说[`Format`](http://docwiki.embarcadero.com/Libraries/en/System.SysUtils.Format)第一个参数是一个无符号整数，但实际上你传递了一个有符号整数。该有符号整数被解释为无符号，并且 -100 的有符号值的位模式等同于 的无符号值`4294967196`。

事实上你的代码是错误的。格式字符串定义了一个编译器无法强制执行的协定，因为 to 的参数`Format`是弱类型的。您有责任确保当您承诺传递一个无符号值时，您确实传递了一个无符号值。此处代码中的错误在逻辑上等同于传递字符串或浮点值，这是您更容易识别的错误。

# css - 获取 Rails 日期选择表单助手以显示在单行上

> ID：11292747
> 
> 赞同：4
> 
> 时间：2012-07-02T11:28:09.670
> 
> 标签：css, ruby-on-rails, forms, twitter-bootstrap

我在引导框架中使用了 form_for 助手。当我使用 date_select 时，它会为年、月和日期创建一个下拉框，但它们都在不同的行上。我想知道是否有任何方法可以让它们全部显示在同一行？我当前的表单 CSS 如下所示：

```
input, textarea, select, .uneditable-input {
  border: 1px solid #bbb;
  width: 100%;
  padding: 10px;
  height: auto;
  margin-bottom: 15px;
  @include box_sizing;
} 
```

作为对评论的回应，这里是 HTML：

```
<div class="row">
   <div class="span8 offset2">
      <%=form_for(@service) do|f|%>

         <%=f.label :date, "Date" %>
         <%=f.date_select :date, id: "dateField" %

         <%=f.submit "Add to Rota", class: "btn btn-large btn-primary" %>
      <% end %>
    </div>
</div> 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:33:33.780

你有没有尝试过

```
float: left;
width: 150px; 
```

宽度必须用左浮动来固定，以使元素“跟随”彼此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T22:20:51.793

Wawa Loo 的答案还可以，但它仍然让我有些头疼，找出在正确位置用“-”和“：”排列我的字段的最终解决方案，所以我也在这里发布我的答案。

这是我的广告系列 css 文件（我有开始和结束日期，我希望在其中设置日期时间）：

```
#campaign_startdatetime_1i,#campaign_enddatetime_1i{
  float:left;
  width: 100px;
  margin-right: 5px;

}
#campaign_startdatetime_2i,#campaign_enddatetime_2i{
  width: 150px;
}
#campaign_startdatetime_3i,#campaign_startdatetime_4i,#campaign_startdatetime_5i,
#campaign_enddatetime_3i,#campaign_enddatetime_4i,#campaign_enddatetime_5i{
  width: 75px;
} 
```

正如您将注意到的，我只将 float:left 放在第一个输入上，因为如果我将其应用于所有“选择”框，那么分割日期和时间的“-”和“：”只会显得格格不入.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-23T11:46:08.293

另一种解决方案是在 html 输出中添加一个 Bootstrap 网格类，如下所示：

```
<%= f.date_select :date, {}, { :class => "col-md-4" } %> 
```

由于“col-md-4”设置为使用父列宽度的三分之一，我相信这将使您将所有三个字段都放在一行中。

# android - Android 应用程序未连接到 Wifi，但在通过 Wifi 共享的 3G 中工作正常

> ID：11292751
> 
> 赞同：4
> 
> 时间：2012-07-02T11:28:31.897
> 
> 标签：android, xml, wifi, android-manifest

嗨，我无法理解为什么我的 android 应用程序在通过 WiFi 访问互联网时无法运行。该应用程序在使用自己的 3G 连接时能够工作。它没有连接到WIFI。但是，如果我通过 WiFi（网络共享）共享我在 iPhone 中的 3g 连接，则 android 设备可以访问服务器。我检查了各种设备中的应用程序，并将清单更改如下，仍然没有响应。
未连接的代码是登录页面。我遵循了普通的 php 脚本，但它没有连接到 WiFi 中的那个脚本，

提前致谢

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="cs.nott.ac.uk.app"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />

    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.CHANGE_WIFI_STATE" />
    <uses-permission android:name="android.permission.CHANGE_NETWORK_STATE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <uses-feature android:name="android.hardware.wifi" />

    <supports-screens
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true"
        android:xlargeScreens="true" />

    <application
        android:icon="@drawable/launch"
        android:label="@string/app_name" >
        <activity
            android:name=".activities.LoginActivity"
            android:clearTaskOnLaunch="true"
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".activities.MainActivity"
            android:clearTaskOnLaunch="true" >
        </activity>
        <activity android:name=".activities.qr.RefresherActivity" >
        </activity>
        <activity android:name=".activities.SummaryActivity" >
        </activity>
        <activity android:name=".activities.management.ManagementandReflection" >
        </activity>
        <activity android:name=".activities.qr.QR_MaterialActivity" >
        </activity>
        <activity android:name=".activities.qr.Starting_offActivity" >
        </activity>
        <activity android:name=".activities.qr.DifferentialActivity" >
        </activity>
        <activity android:name=".activities.qr.ThingsActivity" >
        </activity>
        <activity android:name=".activities.qr.InvestigationsActivity" >
        </activity>
        <activity android:name=".activities.qr.RisksActivity" >
        </activity>
        <activity android:name=".activities.qr.TeachingActivity" >
        </activity>
        <activity android:name=".activities.management.SocialActivity" >
        </activity>
        <activity android:name=".activities.management.PsychologicalActivity" >
        </activity>
        <activity android:name=".activities.management.BiologicalActivity" >
        </activity>
        <activity android:name=".activities.management.AssessmentActivity" >
        </activity>
        <activity android:name=".activities.management.ReflectionsActivity" >
        </activity>
        <activity android:name=".activities.management.learningActivity" >
        </activity>
        <activity android:name=".activities.SummaryPatientsActivity" >
        </activity>
        <activity android:name=".activities.FinalSummaryActivity" >
        </activity>

        <activity
            android:name=".activities.ConfirmActivity"
            android:clearTaskOnLaunch="true" >
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T10:23:45.867

该问题已通过创建一个新线程进行身份验证解决，这是应用程序在 4.0 或更高版本上工作所必需的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-14T21:44:32.577

IPv6路由器设置。切换到 ipv4 验证

# html - CSS-垂直对齐属性不起作用

> ID：11292752
> 
> 赞同：0
> 
> 时间：2012-07-02T11:28:32.510
> 
> 标签：html, css, internet-explorer

我有以下 css 和 html 代码。对于垂直菜单项的列表。

```
<table border="0" cellspacing="0" cellpadding="0" align="center">
        <tbody>
        <tr>
            <td valign="" width="15%" nowrap="">   
            <div id="LeftOne">
            <ul id="LeftTwo">
              <li>
             </li>
            </ul>       
           </div>
           </td>
           <td valign="top" width="70%" >    
           </td>
           <td valign="" width="15%" nowrap="">  </td>
       </tr>
    </tbody>
   </table>

ul#LeftTwo {
    display: block;
    clear: both;
    margin: 35px 0px 12px 0px;
    border-bottom: 1px solid 
    #C8C8C8;
}

#LeftOne {
    display: block;
    width: 180px;
    min-height: 50px;
    float: left;
}

td
{
margin: 0;
padding: 0;
border: 0;
outline: 0;
font-size: 100%;
vertical-align: baseline;
background: 
transparent;
} 
```

当我使用时`vertical-align: top;`，列表排在最前面。但我需要知道为什么会这样？`vertical-align:top !ie;`使用破解ie有什么问题吗？

![请找到图片](../Images/24335d8ca6620a87053138ef529028fa.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:42:11.047

嘿，现在你可以像这样定义**你的第**`valign top`一个 **`td`**

 **```
 <table border="0" cellspacing="0" cellpadding="0" align="center">
        <tbody>
        <tr>
            <td valign="top" width="15%" nowrap="">   
            <div id="LeftOne">
            <ul id="LeftTwo">
              <li>
             </li>
            </ul>       
           </div>
           </td>
           <td valign="top" width="70%" >    
           </td>
           <td valign="" width="15%" nowrap="">  </td>
       </tr>
    </tbody>
   </table> 
```**

# android - 根据屏幕大小调整背景android

> ID：11292753
> 
> 赞同：0
> 
> 时间：2012-07-02T11:28:35.770
> 
> 标签：android

我正在使用 WallpaperManager 在背景中显示位图。我正在使用`wallpaperManager.setBitmap(wallPaper);`// 壁纸当然是位图。

我想将此位图调整为屏幕大小并将其显示在每个虚拟屏幕中（重复）。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:24:05.353

您可以检测设备的密度，然后相应地设置壁纸：

```
 DisplayMetrics displayMetrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(displayMetrics);
    switch(displayMetrics.densityDpi){ 
        case DisplayMetrics.DENSITY_LOW: 
            // Wallpaper for small sized devices.
            break; 
        case DisplayMetrics.DENSITY_MEDIUM: 
            // Wallpaper for medium-sized devices.
            break; 
        case DisplayMetrics.DENSITY_HIGH: 
            // Wallpaper for big-sized devices.
            break; 
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:37:49.270

Android 开发者网站上的这篇文章显示了每种密度的屏幕分辨率范围。

我相信壁纸必须与屏幕分辨率相匹配，并且不会被拉伸。例如，如果您创建一个具有高屏幕密度（如 480x854）的新模拟器，您就会看到这一点。默认主屏幕背景居中，顶部和底部有大黑带。

WallpaperManager API 指示您必须使用 PNG 或 JPEG 格式的图像，即使您使用 setResource() 方法 - 资源必须是位图，因此不能是九个补丁或其他类型的 Drawable。

# c# - 计算两条曲线之间的面积

> ID：11292755
> 
> 赞同：5
> 
> 时间：2012-07-02T11:28:40.460
> 
> 标签：c#, math, graph

我正在开发一个比较两条曲线的程序（由二极管输出导致其电压/电流曲线）。

我想计算这两条曲线之间的面积（蓝色曲线是第一个二极管，红色是第二个）。

![在此处输入图像描述](../Images/94a0885726385560c093f62505b759a6.png)

每条曲线有 51 个数据点（它们始终具有相同数量的数据点）。我现在正在做的事情是这样的：

```
public double CalculateArea(double[,] pin1, double[,] pin2)
{
    double voltageArea = 0;
    double currentArea = 0; //Current (Vertical axis) not yet!
    double max = 0;
    double min = 0;

    for (int i = 0; i < pin1.GetLength(0); i++)
    {
        max = Math.Max(Math.Abs(pin1[i, 0]), Math.Abs(pin2[i, 0]));
        min = Math.Min(Math.Abs(pin1[i, 0]), Math.Abs(pin2[i, 0]));

        voltageArea += max - min;
    }

    return voltageArea;
} 
```

该代码以某种方式起作用，请记住我对当前（垂直轴）不做任何事情。如果结果接近 0，例如 0.05，那么曲线之间的差异是可以忽略的。但我确信这不是正确的方法，我完全不知道我写的方法的结果是什么......似乎只是电压点之间的差异。

如果你能帮助我改进这种方法，我真的很感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T13:19:17.480

首先从另一个二极管中减去一个二极管得到值的差异。然后使用梯形规则，它考虑分段线性函数下的区域。

```
class Program
{
    /// <summary>
    /// Calculate integral with trapezoidal rule
    /// </summary>
    /// <param name="h">The step size in x-axis</param>
    /// <param name="y">The array of values to integrate</param>
    /// <returns>The area under the curve y[i,0]</returns>
    public static double Integrate(double h, double[,] y)
    {
        int N=y.GetLength(0);

        double sum=(y[0, 0]+y[N-1, 0])/2;

        for(int i=1; i<N-1; i++)
        {
            sum+=y[i, 0];
        }

        return h*sum;
    }

    static void Main(string[] args)
    {
        int N = 100;
        double[,] y=new double[N, 1];

        for(int i=0; i<y.GetLength(0); i++)
        {
            y[i, 0]=5+5*Math.Sin(2*Math.PI*i/(N-1));
        }

        double x_min=0.5;
        double x_max=3.5;
        double h = (x_max-x_min)/N;

        double area=Integrate(h, y);
        // expected answer is   area = 15.00
        // actual answer is     area = 14.85
    }
} 
```

# c# - 为什么 System.Transactions TransactionScope 默认 Isolationlevel 可序列化

> ID：11292763
> 
> 赞同：79
> 
> 时间：2012-07-02T11:29:11.363
> 
> 标签：c#, transactionscope, isolation-level

我只是想知道在创建[System.Transactions](https://docs.microsoft.com/en-us/dotnet/api/system.transactions?view=netframework-4.7.2) **TransactionScope时****使用 Serializable 作为默认 Isolationlevel 的充分理由是**什么，因为我想不出任何（而且您似乎无法更改默认通过，因此您始终必须将其设置为你的代码） **`web/app.config`**

 **```
using(var transaction = TransactionScope()) 
{
    ... //creates a Transaction with Serializable Level
} 
```

相反，我总是必须像这样编写样板代码：

```
var txOptions = new System.Transactions.TransactionOptions();
txOptions.IsolationLevel = System.Transactions.IsolationLevel.ReadCommitted;

using(var transaction = new TransactionScope(TransactionScopeOption.Required, txOptions)) 
{
    ...
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2014-04-28T14:14:31.013

事实上`Serializable`，默认值来自于 .NET 甚至还没有发布的时候（1999 年之前），来自 DTC（[分布式事务协调](http://msdn.microsoft.com/library/ms684146.aspx)器）编程。

DTC 使用本机[ISOLATIONLEVEL](http://msdn.microsoft.com/library/ms679234.aspx)枚举：

> **ISOLATIONLEVEL_SERIALIZABLE** 在当前事务完成之前，当前事务读取的数据不能被另一个事务更改。不能插入会影响当前事务的新数据。**这是最安全的隔离级别，也是默认级别，但允许最低级别的并发。**

.NET`TransactionScope`建立在这些技术之上。

现在，下一个问题是：为什么 DTC 定义`ISOLATIONLEVEL_SERIALIZABLE`为默认事务级别？我想这是因为 DTC 是在 1995 年左右设计的（肯定是在 1999 年之前）。当时，SQL 标准是 SQL-92（或 SQL2）。

下面是[SQL-92](http://www.contrib.andrew.cmu.edu/~shadow/sql/sql1992.txt)关于事务级别的说明：

> SQL 事务的隔离级别为 READ UNCOMMITTED、READ COMMITTED、REPEATABLE READ 或 SERIALIZABLE。SQL 事务的隔离级别定义了对该 SQL 事务中的 SQL 数据或模式的操作受并发 SQL 事务中的 SQL 数据或模式的操作影响的程度，并且可以影响对 SQL 数据或模式的操作。**SQL 事务的隔离级别默认为 SERIALIZABLE**。级别可以由`<set transaction statement>`.
> 
> 在隔离级别 SERIALIZABLE 的并发 SQL 事务的执行保证是可序列化的。可串行执行被定义为并行执行 SQL 事务的操作的执行，其产生与那些相同 SQL 事务的某些串行执行相同的效果。串行执行是每个 SQL 事务在下一个 SQL 事务开始之前执行完成。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2013-03-07T01:45:02.167

减少编写样板代码的一种有用方法是将其包装在构建器类中，如下所示：

```
public static class TransactionScopeBuilder
{
    /// <summary>
    /// Creates a transactionscope with ReadCommitted Isolation, the same level as sql server
    /// </summary>
    /// <returns>A transaction scope</returns>
    public static TransactionScope CreateReadCommitted()
    {
        var options = new TransactionOptions
        {
            IsolationLevel = IsolationLevel.ReadCommitted,
            Timeout = TransactionManager.DefaultTimeout
        };

        return new TransactionScope(TransactionScopeOption.Required, options);
    } 
} 
```

然后在创建事务作用域时可以这样使用：

```
using (var scope = TransactionScopeBuilder.CreateReadCommitted())
{
    //do work here
} 
```

您可以根据需要将其他常见事务范围默认值添加到构建器类。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2012-07-02T11:48:46.350

好吧，我想这是“只有设计师肯定知道”类型的问题之一。但无论如何，这是我的两分钱：

虽然 Serializable 是最具“限制性”的隔离级别（关于锁定，在基于锁的 RDBMS 中，因此并发访问、死锁等），但它也是最“安全”的隔离级别（关于数据的一致性）。

因此，虽然在像您这样的场景中需要额外的工作（在那里做过;-)，但默认情况下选择最安全的变体是有意义的。SQL Server (T/SQL) 选择使用[READ COMMITTED](http://msdn.microsoft.com/en-us/library/ms173763.aspx)，显然应用了其他原因:-)

让它可以通过配置改变，这将是一个坏主意，因为通过摆弄配置，您可以将一个完美运行的应用程序渲染为一个损坏的应用程序（因为它可能根本无法与其他任何东西一起使用）。或者为了扭转争论，通过“硬编码”隔离级别，您可以确保您的应用程序按预期工作。可以说，隔离级别不适合配置选项（而[事务超时](http://msdn.microsoft.com/en-us/library/system.transactions.configuration.defaultsettingssection)确实如此）。**

# facebook - 如何使用 Javascript 从 facebook 查看我网站上的照片？

> ID：11292767
> 
> 赞同：0
> 
> 时间：2012-07-02T11:29:19.070
> 
> 标签：facebook, facebook-javascript-sdk, photos

我在 facebook 上有一个页面。[https://www.facebook.com/pages/2playcz-Tenisov%C3%A1-%C5%A1kola/190320081093741](https://www.facebook.com/pages/2playcz-Tenisov%C3%A1-%C5%A1kola/190320081093741)

我想使用 ajax 在我的网站上查看照片。

如何使用 javascript 查看我网站上的照片？

我试过这个：

```
 <script type="text/javascript">

   $(function() {
    $.post('https://graph.facebook.com/190322704426812/photos',{

        }, function(data) {

    $.each(data, function(key, value) {
    //alert(key + ': ' + value);
});
 },"json");

});
    </script> 
```

数据：

```
{
   "data": [
      {
         "id": "190322817760134",
         "from": {
            "name": "2play.cz - Tenisov\u00e1 \u0161kola",
            "category": "Sports league",
            "id": "190320081093741"
         },
         "picture": "http://photos-h.ak.fbcdn.net/hphotos-ak-snc7/303504_190322817760134_142853251_s.jpg",
         "source": "http://a8.sphotos.ak.fbcdn.net/hphotos-ak-snc7/303504_190322817760134_142853251_n.jpg",
         "height": 149,
         "width": 187,
         "images": [
            {
               "height": 1631,
               "width": 2048,
               "source": "http://a8.sphotos.ak.fbcdn.net/hphotos-ak-snc7/s2048x2048/303504_190322817760134_142853251_n.jpg"
            },
            {
               "height": 149,
               "width": 187,
               "source": "http://a8.sphotos.ak.fbcdn.net/hphotos-ak-snc7/303504_190322817760134_142853251_n.jpg"
            },
            {
               "height": 149,
               "width": 187,
               "source": "http://a8.sphotos.ak.fbcdn.net/hphotos-ak-snc7/303504_190322817760134_142853251_n.jpg"
            },
            {
               "height": 382,
               "width": 480,
               "source": "http://a8.sphotos.ak.fbcdn.net/hphotos-ak-snc7/s480x480/303504_190322817760134_142853251_n.jpg"
            },
            {
               "height": 254,
               "width": 320,
               "source": "http://a8.sphotos.ak.fbcdn.net/hphotos-ak-snc7/s320x320/303504_190322817760134_142853251_n.jpg"
            },
            {
               "height": 143,
               "width": 180,
               "source": "http://photos-h.ak.fbcdn.net/hphotos-ak-snc7/303504_190322817760134_142853251_a.jpg"
            },
            {
               "height": 103,
               "width": 130,
               "source": "http://photos-h.ak.fbcdn.net/hphotos-ak-snc7/303504_190322817760134_142853251_s.jpg"
            },
            {
               "height": 103,
               "width": 130,
               "source": "http://photos-h.ak.fbcdn.net/hphotos-ak-snc7/s75x225/303504_190322817760134_142853251_s.jpg"
            }
         ],
         "link": "https://www.facebook.com/photo.php?fbid=190322817760134&set=a.190322704426812.39225.190320081093741&type=1",
         "icon": "http://static.ak.fbcdn.net/rsrc.php/v2/yz/r/StEh3RhPvjk.gif",
         "created_time": "2012-06-09T13:34:24+0000",
         "updated_time": "2012-06-09T13:34:25+0000"
      }
   ],
   "paging": {
      "next": "https://graph.facebook.com/190322704426812/photos?value=1&redirect=1&limit=25&after=MTkwMzIyODE3NzYwMTM0"
   }
} 
```

有一个错误：

```
{
   "error": {
      "message": "A user access token is required to request this resource.",
      "type": "OAuthException",
      "code": 102
   }
} 
```

我需要阅读以下行：

```
"picture": "http://photos-h.ak.fbcdn.net/hphotos-ak-snc7/303504_190322817760134_142853251_s.jpg"
"source": "http://a8.sphotos.ak.fbcdn.net/hphotos-ak-snc7/303504_190322817760134_142853251_n.jpg" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:04:37.827

当它应该是 $.get 时，您正在使用 $.post。看一下这个。这是你想要的吗？

[http://jsfiddle.net/gz9HJ/](http://jsfiddle.net/gz9HJ/)

# c++ - 混合 decltype 和 enable_if

> ID：11292771
> 
> 赞同：8
> 
> 时间：2012-07-02T11:29:23.417
> 
> 标签：c++, c++11

似乎`decltype`与 SFINAE 一起使用`enable_if`并不简单。我尝试以三种不同的方式编写`go`using `enable_if`。它们都因编译器错误而失败（对于 GCC，字面意思是：“错误：'thing' 不是 'foo' 的成员”和实例化上下文）。

```
#include <type_traits>

struct foo {
  enum { has_thing = false };
};

struct bar {
  enum { has_thing = true };
  static int thing() { return 0; }
};

template <typename T>
struct Test {
  /*auto go(typename std::enable_if<T::has_thing, int>::type=0) 
  -> decltype(T::thing()) {
    return T::thing();
  }*/

  /*typename std::enable_if<T::has_thing, decltype(T::thing())>::type go() {
    return T::thing();
  }*/

  template <bool B=T::has_thing, typename std::enable_if<B, int>::type = 0>
  auto go() -> decltype(T::thing()) {
     return T::thing();
  }
};

int main() {
  Test<bar> b;
  Test<foo> f;
} 
```

我可以看到问题所在 -`decltype`需要在`enable_if`甚至有机会排除该功能之前发生。剩下的问题是如何解决并获得类似的行为？有没有一种简单、通用的方法来做到这一点，而无需 `has_thing`在`enable_if`?

使用 G++ 4.7 和 clang++ 3.0 测试。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T11:55:41.827

`go`如果方法是模板方法，SFINAE 将起作用：

```
template <typename T>
struct Test {
  template <class U = T>
  auto go() -> decltype(U::thing()) {
     return T::thing();
  }
}; 
```

您也可以使用该`has_thing`值，但没有必要这样做，因为 SFINAE 将在上面的示例中处理该问题：

```
template <class U = T, typename std::enable_if<U::has_thing, int>::type = 0>
auto go() -> decltype(U::thing()) {
   return T::thing();
} 
```

然后：

```
int main() {
  Test<bar> b;
  Test<foo> f;

  b.go(); // Works!
  f.go(); // Fails!
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:51:12.373

当然，您的 SFINAE 不起作用。该`go`函数*不是模板*，因此任何 SFINAE 都不能应用。除此之外，它应该可以正常工作`decltype`（您实际上不需要任何`has_thing`标志）。

例如。这很好用（并且可以很好地与其他重载一起使用）：

```
template <class U>
auto go(Test<U> t)
  -> decltype(U::thing()) {
  return U::thing();
} 
```

# asp.net-mvc - 在 Asp.net MVC 中异步调用 Ajax.ActionLink 的语法是什么？

> ID：11292773
> 
> 赞同：2
> 
> 时间：2012-07-02T11:29:29.090
> 
> 标签：asp.net-mvc

我有一个 Web 表单，我想异步调用 Ajax.ActionLink()。请帮我找出调用它的语法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:33:44.033

这就是您可以在 Controller 中异步调用 Gettime 函数的方式。

```
 <%= Ajax.ActionLink("UTC", "GetTime", new { zone = "utc" },
         new AjaxOptions { UpdateTargetId = "myResults" }) %>
         <%= Ajax.ActionLink("BST", "GetTime", new { zone = "bst" },
         new AjaxOptions { Confirm="bst" }) %>
         <%= Ajax.ActionLink("MDT", "GetTime", new { zone = "mdt" },
         new AjaxOptions { UpdateTargetId = "myResults" }) %> 
```

# xpages - 选择值组合框后文档不会保存

> ID：11292774
> 
> 赞同：0
> 
> 时间：2012-07-02T11:29:33.283
> 
> 标签：xpages

我有一个带有 3 个相互关联的组合框的 Xpage。在 Combobox1 的 onchange 事件中，我对 combobox2 进行了部分刷新（因为 combobox2 的 dblookup 的键是 combobox1 的值）。作为服务器选项，我有“不验证或更新数据”与组合框 2 和 3 相同。然后我有一个按钮，它将获取组合框的提交值，并使用这些值保存文档。问题：当我为 combobox1 选择一个值并单击“保存”按钮时，一个文档被保存。当我单击第二个和第三个按钮时，我无法再保存文档......我也没有收到任何错误消息。编辑 ; 代码的简化版本：

`<?xml version="1.0" encoding="UTF-8"?> <xp:view xmlns:xp="http://www.ibm.com/xsp/core"> <xp:br></xp:br> <xp:this.data> <xp:dominoDocument var="document1" formName="bestelbon"></xp :dominoDocument> </xp:this.data>`

```
<xp:table>
    <xp:tr>
        <xp:td><xp:comboBox id="comboBox1" value="#{sessionScope.item}">
                                            <xp:selectItem itemLabel="Please select">
                                            </xp:selectItem><xp:selectItems id="selectItems2">
                                                <xp:this.value><![CDATA[#{javascript:@Unique(@DbColumn("product/Bestelbon.nsf","item",1));    
}]]></xp:this.value>
                                            </xp:selectItems>
                                            <xp:eventHandler event="onchange" submit="true" refreshMode="partial" refreshId="comboBox2" immediate="true">
                                            </xp:eventHandler>

                                        </xp:comboBox></xp:td>
        <xp:td><xp:comboBox id="comboBox2" value="#{sessionScope.subitem}">

                                            <xp:selectItem itemLabel="Please select">
                                            </xp:selectItem>
                                            <xp:selectItems id="selectItems3">
                                                <xp:this.value><![CDATA[#{javascript:var combo1 = getComponent("comboBox1").getSubmittedValue();
@Unique(@DbLookup("product/Bestelbon.nsf","subitem2",combo1,2));
}]]></xp:this.value>
                                            </xp:selectItems>
                                            <xp:eventHandler event="onchange" submit="true" refreshMode="partial" refreshId="comboBox3" immediate="true">
                                            </xp:eventHandler>
                                        </xp:comboBox></xp:td>
        <xp:td><xp:comboBox id="comboBox3" value="#{sessionScope.subsubitem}">
                                            <xp:selectItem itemLabel="Please select">
                                            </xp:selectItem>
                                            <xp:selectItems id="selectItems4">
                                                <xp:this.value><![CDATA[#{javascript:var combo1 = getComponent("comboBox2").getSubmittedValue();
@Unique(@DbLookup("product/Bestelbon.nsf","subsubitem2",combo1,2));
}]]></xp:this.value>
                                            </xp:selectItems>
                                        </xp:comboBox></xp:td>
        <xp:td><xp:comboBox id="comboBox4" value="#{sessionScope.optie}" defaultValue="Gratis optie">
                                        <xp:selectItems>
                                            <xp:this.value><![CDATA[#{javascript:@Unique(@DbColumn("product/Bestelbon.nsf","mogelijkheid",1));}]]></xp:this.value>
                                        </xp:selectItems>
                                    </xp:comboBox></xp:td>
        <xp:td><xp:comboBox id="comboBox5" value="#{sessionScope.combinatie}">
                                        <xp:selectItem itemLabel="Please select">
                                        </xp:selectItem>
                                        <xp:selectItems>
                                            <xp:this.value><![CDATA[#{javascript:@Unique(@DbColumn("product/Bestelbon.nsf","subsubitem",1));}]]></xp:this.value>
                                        </xp:selectItems>
                                    </xp:comboBox></xp:td>
    </xp:tr>
    <xp:tr>
        <xp:td></xp:td>
        <xp:td></xp:td>
        <xp:td></xp:td>
        <xp:td></xp:td>
        <xp:td></xp:td>
    </xp:tr>
</xp:table>
<xp:br></xp:br>
<xp:button id="button1" value="Save">
    <xp:eventHandler event="onclick" submit="true"
        refreshMode="complete">
        <xp:this.action><![CDATA[#{javascript:var combo1 = getComponent("comboBox1")
var value1= combo1.getSubmittedValue();
if (null == value1){
value1 = combo1.getValue();
}
var combo2 = getComponent("comboBox2")
var value2= combo2.getSubmittedValue();
if (null == value2){
value2 = combo1.getValue();
}
var combo3 = getComponent("comboBox3")
var value3= combo3.getSubmittedValue();
if (null == value3){
value3 = combo3.getValue();
}
var combo4 = getComponent("comboBox4")
var value4= combo4.getSubmittedValue();
if (null == value4){
value4 = combo4.getValue();
}
var combo5 = getComponent("comboBox5")
var value5= combo5.getSubmittedValue();
if (null == value5){
value5 = combo5.getValue();
}
document1.replaceItemValue("bbitem",value1);
document1.replaceItemValue("bbpsubitem",value2);
document1.replaceItemValue("bbsubsubitem",value3);
document1.replaceItemValue("bbmogelijkheid",value4);
document1.replaceItemValue("bbopmerking",value5);
document1.replaceItemValue("bbland","VF");
document1.replaceItemValue("bbproduct","NAVIX");
document1.save();
}]]></xp:this.action>
    </xp:eventHandler></xp:button></xp:view> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:35:01.477

为了获取提交的值，您必须使用`getComponent("comboBoxX").getSubmittedValue()`（而不是 .getValue() ）。

我需要有关数据源的更多详细信息，以便了解您无法保存的原因。但是尝试使用 .getSubmittedValue() 看看是否对你有帮助。

# javascript - 用一个 AJAX 请求更新两个 div？

> ID：11292775
> 
> 赞同：0
> 
> 时间：2012-07-02T11:29:36.937
> 
> 标签：javascript, ajax, html

我将 AJAX 与 struts1.x 一起使用，在我的应用程序中，一旦选择第一个选择项，然后第二个选择项将使用 AJAX 更新。一旦我选择了第二个选择项目，它将使用 AJAX 显示结果。
现在如果用户选择了第一个选择项目的不同项目，那么我必须在第二个选择项目中显示更新的结果并消失由第二个选择项目引起的先前结果。
例如。选择国家：印度
选择国家：德里
德里 信息将在此处打印...
Ajax 响应

```
document.getElementById("processStates").innerHTML = xmlHttp.responseText;  

document.getElementById("StateInfoDisplay").innerHTML = xmlHttp.responseText;  

  select country:<select name="countryName"
onchange="showStates(this.value);">  

<span id="processStates"> <select
name="stateName" onchange="showStateInfo(this.value);">  

<div id="StateInfoDisplay"></div> 
```

我能够实现这一点。但是新的要求来了..根据这个，一旦他选择了其他状态，我就必须消失状态信息并显示状态列表。

接下来，一旦用户选择国家为：美国，我必须显示美国的所有州并消失德里信息。
怎么做？
我只使用 javascript ......不是 jquery ..

拉克斯曼乔达里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:57:38.077

因为你还没有发布你的代码。我将给出一个总体看法。

在选择国家时，您需要进行 ajax 调用并从 db 或您存储和填充它的任何地方获取与该国家相关的城市列表。

之后，如果用户选择城市，您将再进行一次 ajax 调用，将国家和城市从表中获取城市的详细信息。

要消失旧数据，更改国家或城市，您可以将元素设为空

`$(selector).empty()`（基本上在每个国家或城市的 ajax 电话中，您都必须这样做）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:41:23.577

县点击处理程序的伪代码：

```
if (selectedCountry != previousCountry) {
   states.clear()
   states.reload(selectedCountry)
} 
```

你可以在处理程序中做几乎任何你想做的事情——为什么要停在 2 个 div 上？重写整个页面或其他内容。如果您有一些特定的问题，请将其与您的代码一起发布。

# javascript - 使用 jQuery 获取选中复选框的值

> ID：11292778
> 
> 赞同：98
> 
> 时间：2012-07-02T11:29:49.823
> 
> 标签：javascript, jquery

我想遍历复选框组'locationthemes'并构建一个包含所有选定值的字符串。So when checkbox 2 and 4 are selected the result would be: "3,8"

```
<input type="checkbox" name="locationthemes" id="checkbox-1" value="2" class="custom" />
<label for="checkbox-1">Castle</label>
<input type="checkbox" name="locationthemes" id="checkbox-2" value="3" class="custom" />
<label for="checkbox-2">Barn</label>
<input type="checkbox" name="locationthemes" id="checkbox-3" value="5" class="custom" />
<label for="checkbox-3">Restaurant</label>
<input type="checkbox" name="locationthemes" id="checkbox-4" value="8" class="custom" />
<label for="checkbox-4">Bar</label> 
```

我在这里检查：http: [//api.jquery.com/checked-selector/](http://api.jquery.com/checked-selector/)但没有示例如何按名称选择复选框组。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：209
> 
> 时间：2012-07-02T11:30:59.373

在 jQuery 中，只需使用属性选择器，如

```
$('input[name="locationthemes"]:checked'); 
```

选择名称为“locationthemes”的所有选中输入

```
console.log($('input[name="locationthemes"]:checked').serialize());

//or

$('input[name="locationthemes"]:checked').each(function() {
   console.log(this.value);
}); 
```

> [演示](http://jsfiddle.net/LfjSG/1/)

* * *

在*VanillaJS 中*

```
[].forEach.call(document.querySelectorAll('input[name="locationthemes"]:checked'), function(cb) {
   console.log(cb.value); 
}); 
```

> [演示](http://jsfiddle.net/f0vkwqc3/1/)

* * *

在 ES6/扩展运算符中

```
[...document.querySelectorAll('input[name="locationthemes"]:checked')]
   .forEach((cb) => console.log(cb.value)); 
```

> [演示](http://jsfiddle.net/1Lze76jd/)

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-07-02T11:33:24.390

```
$('input:checkbox[name=locationthemes]:checked').each(function() 
{
   // add $(this).val() to your array
}); 
```

工作[演示](http://jsfiddle.net/gydhT/1/)

或者

使用 jQuery 的[`is()`](http://api.jquery.com/is/)功能：

```
$('input:checkbox[name=locationthemes]').each(function() 
{    
    if($(this).is(':checked'))
      alert($(this).val());
}); 
```

​</p>

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2016-03-03T19:08:35.197

映射数组是最快和最干净的。

```
var array = $.map($('input[name="locationthemes"]:checked'), function(c){return c.value; }) 
```

将返回值作为数组，如：

```
array => [2,3] 
```

假设城堡和谷仓被检查，而其他人没有。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2016-05-16T15:37:19.923

`$("#locationthemes").prop("checked")`

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2015-03-24T19:13:24.210

使用jquery的`map`功能

```
var checkboxValues = [];
$('input[name=checkboxName]:checked').map(function() {
            checkboxValues.push($(this).val());
}); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-02-24T11:05:39.727

```
You can also use the below code
$("input:checkbox:checked").map(function()
{
return $(this).val();
}).get(); 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2020-08-27T09:51:57.237

一种更现代的方法：

```
const selectedValues = $('input[name="locationthemes"]:checked').map( function () { 
        return $(this).val(); 
    })
    .get()
    .join(', '); 
```

我们首先找到所有具有给定名称的选中复选框，然后 jQuery 的 map() 遍历它们中的每一个，调用回调以获取值，并将结果作为新的 jQuery 集合返回，该集合现在包含复选框值。然后我们调用 get() 来获取一个值数组，然后 join() 将它们连接成一个字符串 - 然后将其分配给常量 selectedValues。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-03-06T18:57:39.840

```
var SlectedList = new Array();
$("input.yorcheckboxclass:checked").each(function() {
     SlectedList.push($(this).val());
}); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-07-02T23:05:32.083

所以全部在一行中：

```
var checkedItemsAsString = $('[id*="checkbox"]:checked').map(function() { return $(this).val().toString(); } ).get().join(","); 
```

..关于选择器的注释`[id*="checkbox"]`，它将抓取其中包含字符串“复选框”的任何项目。这里有点笨拙，但如果您试图从 .NET CheckBoxList 之类的东西中提取选定的值，那就太好了。在这种情况下，“复选框”将是您为 CheckBoxList 控件指定的名称。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-08-12T06:12:42.780

[来源 - 更多细节](https://www.thecodedeveloper.com/get-selected-checkboxes-value-using-jquery/)

**使用 jQuery 获取选定的复选框值**

然后我们编写 jQuery 脚本来使用 jQuery each() 在数组中获取选中的复选框值。使用这个 jQuery 函数，它运行一个循环来获取检查的值并将其放入一个数组中。

```
<!DOCTYPE html>
    <html lang="en">
    <head>
    <meta charset="utf-8">
    <title>Get Selected Checkboxes Value Using jQuery</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $(".btn").click(function() {
                var locationthemes = [];
                $.each($("input[name='locationthemes']:checked"), function() {
                    locationthemes.push($(this).val());
                });
                alert("My location themes colors are: " + locationthemes.join(", "));
            });
        });
    </script>
    </head>
    <body>
        <form method="POST">
        <h3>Select your location themes:</h3>
        <input type="checkbox" name="locationthemes" id="checkbox-1" value="2" class="custom" />
        <label for="checkbox-1">Castle</label>
        <input type="checkbox" name="locationthemes" id="checkbox-2" value="3" class="custom" />
        <label for="checkbox-2">Barn</label>
        <input type="checkbox" name="locationthemes" id="checkbox-3" value="5" class="custom" />
        <label for="checkbox-3">Restaurant</label>
        <input type="checkbox" name="locationthemes" id="checkbox-4" value="8" class="custom" />
        <label for="checkbox-4">Bar</label>
        <br>
        <button type="button" class="btn">Get Values</button>
    </form>
    </body>
    </html> 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-04-27T17:17:10.653

> Jquery 3.3.1，在按钮单击时获取所有选中复选框的值

```
$(document).ready(function(){
 $(".btn-submit").click(function(){
  $('.cbCheck:checkbox:checked').each(function(){
	alert($(this).val())
  });
 });			
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<input type="checkbox" id="vehicle1" name="vehicle1"  class="cbCheck" value="Bike">
  <label for="vehicle1"> I have a bike</label><br>
  <input type="checkbox" id="vehicle2" name="vehicle2"  class="cbCheck" value="Car">
  <label for="vehicle2"> I have a car</label><br>
  <input type="checkbox" id="vehicle3" name="vehicle3"  class="cbCheck" value="Boat">
  <label for="vehicle3"> I have a boat</label><br><br>
  <input type="submit" value="Submit" class="btn-submit">
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-05-21T13:26:59.033

```
var voyageId = new Array(); 
$("input[name='voyageId[]']:checked:enabled").each(function () {
   voyageId.push($(this).val());
}); 
```

# javascript - JavaScript 变量如何从数据库或 XML（或其他）文件中读取值？是否可以？

> ID：11292780
> 
> 赞同：2
> 
> 时间：2012-07-02T11:29:53.627
> 
> 标签：javascript, xml, ajax, database

我有一个 JavaScript 文件，其中有一个变量：

```
var ads = new Array;
ads[0] = "/images/banners/buttonLO_apr.jpg";
... 
```

如何为 ads[0] 提供来自数据库或 XML 文件或任何其他文件的值？我无法对 JavaScript 文件进行重大更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:42:43.680

这是你可以做的（据我所知）：

*   XML 文件 - 如果文件与您的脚本具有[相同的来源](http://en.wikipedia.org/wiki/Same_origin_policy)，则对该资源执行 AJAX 调用（您可以使用[jQuery.get()](http://api.jquery.com/jQuery.get/)快速简单地执行此操作），您将获得 XML 文件的字符串表示形式然后你可以开始解析并做所有的事情。

*   DB - 据我所知，没有仅限客户端的解决方案（即仅使用 JS）。您应该放置一些很酷的服务器端脚本来接受您的 jQuery.get() 并为您阅读数据库。这很容易用 PHP 完成，但你需要一个 PHP 服务器来运行它（例如[wamp](http://www.wampserver.com/en/)）

# javascript - 创建书签以填写表格

> ID：11292786
> 
> 赞同：11
> 
> 时间：2012-07-02T11:30:12.190
> 
> 标签：javascript, forms, bookmarklet, autofill

我想创建一个小书签，用文本填充第一个、第二个、第五个和第六个文本框，这样我就可以更轻松地在网站上使用该工具，因为我经常使用它并且它不记得我的输入。这些是前面有这段文字的`"Vertrek gemeente :" , "Straat :", "Aankomst gemeente :" and "Straat :".`

让我给出一些测试值（按顺序）

```
"gent"
"PATIJNTJESTRAAT"
"OOSTAKKER"
"HERMAN TEIRLINCKSTRAAT" 
```

关于[该站点：](http://reisinfo.delijn.be/reisinfo/?taal=nl)这是一个荷兰公共交通站点，您可以输入您的街道和目的地街道，然后 Web 应用程序将计算您应该乘坐哪些公共汽车以及何时应该乘坐它们。

关于我：我是 javascript 的菜鸟。我知道你可以使用`getElemenbyId`，但是这个网站有很多脚本，这样很难获得 id。我知道有一个（firefox）插件​​+插件可以让你检查元素（获取id）。它被称为萤火虫。我希望这有任何帮助。我不是 100% 确定书签是解决我问题的方法，如果您有其他建议，请随时回复（我听说 cookie 可能是一个解决方案？或者也许是一个 Firefox 插件？）

提前感谢您是否可以帮助获取此（javascript书签）代码或可能的解决方案，如果您为我提供工作代码，则更加感谢。如果您愿意为我提供代码并解释它是如何工作的，请感谢一百万。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-02T21:35:49.973

尝试这个 ：

```
javascript: { document.getElementById('form1:vertrekGemeenteInput').value = 'Zedelgem';document.getElementById('form1:vertrekStraatInput').value = 'Berkenhagestraat';document.getElementById('form1:vertrekNrInput').value = '44';document.getElementById('form1:aankomstGemeenteInput').value = 'Oostakker';document.getElementById('form1:aankomstStraatInput').value = 'Herman Teirlinkcstraat';document.getElementById('form1:aankomstNrInput').value = '1'; void(0) } 
```

我在 Chrome 上测试了这个，它在那里工作。

至于获取元素，打开 Chrome，然后打开检查器（在 Windows 上是 Control Shift J ），然后点击左下角的放大镜，然后你将鼠标悬停在网页上，你会看到元素变成蓝色，如果你单击您将在“元素”选项卡中看到的相关标签中的任何元素，您将看到 id，这就是我找到这些 id 的方式。杰本特欢迎 ;)

# selenium - DefaultSelenium 相对于 SeleneseTestCase 类有什么好处？

> ID：11292795
> 
> 赞同：1
> 
> 时间：2012-07-02T11:30:46.107
> 
> 标签：selenium, selenium-rc

我想知道`DefaultSelenium`超`SeleneseTestCase`课有什么好处？？

有什么`DefaultSelenium`好的？

有什么`SeleneseTestCase`好的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T18:31:04.993

首先：Selenium RC 在一年多前就被弃用了。不会有更多的发展。尽可能使用 Selenium WebDriver，它带来了很多好处！

第二：`SeleneseTestCase`已被*双重*弃用，因为它是 JUnit 3 的辅助类，但 JUnit 4 自 2006 年以来一直在我们身边。尽可能使用 JUnit 4，它带来了很多好处！

反正，

[`DefaultSelenium`](http://selenium.googlecode.com/svn/trunk/docs/api/java/com/thoughtworks/selenium/DefaultSelenium.html)控制浏览器。它是Selenium WebDriver`FirefoxDriver`和（以及其他）内容的直接镜像。`InternetExplorerDriver`它是您应该与之交互的基本类（通过与WebDriver 的接口[`Selenium`](http://selenium.googlecode.com/svn/trunk/docs/api/java/com/thoughtworks/selenium/Selenium.html)相同的[`WebDriver`](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.html)接口）。它是 Selenium RC 背后的大脑，它允许您像这样使用所有 Selenium RC 方法：

```
Selenium selenium = new DefaultSelenium("localhost", 4444, "*iexplore", "http://google.com");
selenium.start();
selenium.doWhateverYouWantToDoNow(); 
```

[`SeleneseTestCase`](http://selenium.googlecode.com/svn/trunk/docs/api/java/com/thoughtworks/selenium/SeleneseTestCase.html)，另一方面，一点也不像。你可以（但不应该，记得吗？）`extend`它给你带来好处。它包含多个适合与 Selenium 一起使用的 JUnit 3 便捷方法，最值得注意的是[`setUp()`](http://selenium.googlecode.com/svn/trunk/docs/api/java/com/thoughtworks/selenium/SeleneseTestCase.html#setUp%28java.lang.String,%20java.lang.String%29)，[`tearDown()`](http://selenium.googlecode.com/svn/trunk/docs/api/java/com/thoughtworks/selenium/SeleneseTestCase.html#tearDown%28%29)它们在内部启动（停止）`DefaultSelenium`. 这是一个可以扩展的便利类，可以节省一些打字时间，但它仍然使用`DefaultSelenium`.

# jsp - 遍历arraylist并通过jstl将值传递给整个表

> ID：11292802
> 
> 赞同：0
> 
> 时间：2012-07-02T11:31:16.110
> 
> 标签：jsp, jstl

我的 jsp 页面中有一个 HTML 表格。这包括文本字段和下拉框。从我的 servlet 中，我想传递一个名为`myData`.

因此，我尝试使用 foreach 将数据传输到我的 html 表中：

```
<table border="1" >
  <c:forEach items="${myData}" var="result">
  <tr>
    <td><input name="from0" type="text" value="${result}"/></td>
  </tr>

  <tr>
     <td>
    <select name="from8" id="from8" value="${result}">
       <option>Yes</option>
       <option>No</option>
    </select>
      </td>
  </tr>
  </c:forEach>
</table> 
```

arraylist 是一个简单的字符串数组列表：

```
ArrayList<String> output = new ArrayList<String>();
//populate arraylist with values here

//forward the arraylist of strings
request.setAttribute("myData ", output);
request.getRequestDispatcher("Home.jsp").forward(request, response); 
```

不幸的是，输出生成了多个表，其值都对应于我的数组列表中的每个元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T13:53:16.727

根据您提供的信息，我试图恢复您的情况。老实说，我不能那样做。这是我的恢复尝试：

```
<%
    ArrayList output = new ArrayList();
    output.add("Yes");
    output.add("No");
    request.setAttribute("myData", output);
%>
<table border="1">
  <c:set var="counterVar" value="0"/> //added because form field names and ids -in genral- must be unique.
  <c:forEach items="${myData}" var="result">
  <tr>
    <td><input name='from<c:out value="${counterVar}"/>_text' type="text" value='<c:out value="${result}"/>'></td>
  </tr>

  <tr>
     <td>
    <select name='from<c:out value="${counterVar}"/>_select' id='from<c:out value="${counterVar}"/>' value='<c:out value="${result}"/>'>
       <option value="Yes">Yes</option>
       <option value="No">No</option>
    </select>
      </td>
  </tr>
  <c:set var="counterVar" value="${counterVar + 1}"/>
  </c:forEach>
</table> 
```

这会生成一个好看的表格。您能否提供有关您的问题的示例链接？

# tcp - 握手后的 TCP：seq ack 作业

> ID：11292810
> 
> 赞同：2
> 
> 时间：2012-07-02T11:31:35.077
> 
> 标签：tcp, handshake

好的，所以我有这个家庭作业的问题，我得到'Host X'发送'Host Z'一个数据包并且Seq = 46和Ack = 87并且有效负载/数据='你好？

从那里我得到：从主机 Z 发送到主机 X 的数据包，有效载荷 =“离开”，最后一个数据包从主机 X 发送到主机 Z，数据 =“否！”

作业是找出最后两个数据包的 Seq 和 Ack 的值是多少。我知道握手已经结束，所以它不仅仅是将 1 添加到 Seq 并将其放入下一个数据包的 Ack 中那么简单。我在某处读到，当接收到有效负载时，接收者会发出一个等于 1 + 有效负载长度（以字节为单位）的 Ack。如果这是正确的，我将如何将这些字符串转换为字节？Seq 会发生什么？那仍然是从先前的数据包 Ack 中直接抓取的吗？

非常感谢大家。

假设每个字符等于一个字节，我会继续回答我的问题，如果我错了，希望有人能纠正我。

我假设我得到的 Seq 和 Ack 是握手的第一个传输，所以：

```
X->Z Seq=45 Ack=NULL
X<-Z Seq=86 Ack=46
X->Z Seq=46 Ack=87

X->Z Seq=46 Ack=87 data='Hello?'  (6 bytes)
X<-Z Seq=87 Ack=52 data='Go away' (7 bytes)
X->Z Seq=52 Ack=94 data='No!'     (3 bytes) 
```

我相信这就是全部，我上面的内容是正确的，但是如果我做错了什么，请告诉我。再次感谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T22:24:51.533

我建议安装wireshark，然后玩。您可以查看各个 TCP 段、标志和数据。一段时间后你会感觉到它是如何工作的。

我认为您的答案是正确的，您也可以像这样添加标志和 len 以帮助理解。

```
X->Z [SYN]      Seq=45
X<-Z [SYN, ACK] Seq=86 Ack=46
X->Z [ACK]      Seq=46 Ack=87

X->Z [ACK]      Seq=46 Ack=87 Len=6 data='Hello?'  
X<-Z [ACK]      Seq=87 Ack=52 Len=7 data='Go away'
X->Z [ACK]      Seq=52 Ack=94 Len=3 data='No!' 
```

请注意，至少还有一个序列，即使应用程序层没有其他任何操作。

# android - 选项菜单样式

> ID：11292814
> 
> 赞同：3
> 
> 时间：2012-07-02T11:31:53.710
> 
> 标签：android, android-optionsmenu

我正在尝试创建自己的菜单项样式，但还没有成功。

我有一些方法： **1）**

```
@Override 
public boolean onCreateOptionsMenu(Menu menu) {
    boolean result = super.onCreateOptionsMenu(menu);
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.drawable.menu, menu);
    return result;      
} 
```

**菜单.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/add"
          android:icon="@android:drawable/ic_menu_add"
          android:title="@string/add" />
</menu> 
```

**2)**

```
@Override 
public boolean onCreateOptionsMenu(Menu menu) {
    boolean result = super.onCreateOptionsMenu(menu);
    MenuItem m1 = menu.add(0, 0, 0, R.string.add);
    m1.setIcon(android.R.drawable.ic_input_add);
    return result;      
} 
```

但在这两种情况下，我的菜单项都保持“标准”。我应该怎么做才能改变它的大小、位置等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T20:20:24.973

首先，我不建议您定义自己的菜单样式。在我个人看来，这不是应该改变的事情。它对于 ICS+ 设备也没有用，因为它们没有专用的菜单按钮。

但是，如果您希望这样做，您将不得不离开现有的菜单设置，因为无法更改默认行为。

您需要做的是在现有布局中为您的活动创建一个隐藏布局，然后挂钩 getKeyDown 事件以隐藏/显示此布局。

```
@Override 
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_MENU) {
        myCustomMenu.toggleVisibility();
        return true;
    } else {
        return super.onKeyDown(keyCode, event);
    }       
} 
```

该方法可能看起来像这样

```
public void toggleVisibility() {
    LinearLayout myCustomMenuLayout = (LinearLayout) findViewById(R.id.myCustomMenu);
    if (myCustomMenuLayout.getVisibility() == View.GONE) {
        myCustomMenuLayout.setVisibility(View.VISIBLE);
    } else {
        myCustomMenuLayout.setVisibility(View.GONE);
    }
} 
```

当涉及到布局时，最好在一个单独的布局中创建它，然后像下面这样引用它。这样您就可以多次引用它而无需重复代码。

```
<include android:id="@+id/myCustomMenu" layout="@layout/customMenu" visibility="gone"> 
```

从那里你只需要填充菜单并定义 onclicklisteners 等

# scala - 是否可以使用任意类型参数定义返回类型？

> ID：11292815
> 
> 赞同：0
> 
> 时间：2012-07-02T11:32:02.680
> 
> 标签：scala, types

假设，我们有一个带有类型参数的类

```
class A[T] 
```

我们想编写一个方法，它返回`A`具有任意类型参数的类型的对象，例如：

```
def f: A = { ... } 
```

编译器会抱怨 type 缺少类型参数`A`。

我们不能通过编写来解决这个问题`A[Any]`，因为 eg`A[String]`不是 的子类型`A[Any]`。但是我们可以通过 的协变注释来达到这种子类型关系`+T`。

`f`是否可以在不使用协变注释的情况下编写这样的方法`+T`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T11:40:26.060

您可以使用存在类型：

```
def f: A[_] = { ... } 
```

这是以下的简写：

```
def f: A[T forSome { type T }] = { ... } 
```

您甚至可以使用上限（或下限）：

```
def f: A[_ <: SomeType] = { ... } 
```

您可以为此分配任何类型`T`，但是，您可能无法对结果做任何有用的事情

# javascript - Windows 上的 Node.js：express.js app.get 文件路由不起作用

> ID：11292816
> 
> 赞同：1
> 
> 时间：2012-07-02T11:32:03.283
> 
> 标签：javascript, node.js, express, url-routing

带有 express 的 Windows 上的 nodejs 0.8：

自定义路由：

```
app.get("/less/file.less",  function(req, res){
  res.send("XXX");
}); 
```

如果文件通过 URL 可用（例如 /less/file.less - public），它建议下载文件，而不是返回“XXX”响应。我在 linux 机器上有其他行为。

什么是错的？有可能修复吗？

一个

# geometry - THREE.js ImmediateRenderObject：共面三角形获得不同的阴影？

> ID：11292820
> 
> 赞同：0
> 
> 时间：2012-07-02T11:32:12.083
> 
> 标签：geometry, three.js

我是一名计算机图形学初学者（已经学习了 1 个学期的 CG 基础知识）。

关于在 THREE.js 中使用 ImmediateRenderObject 进行着色（平坦和平滑）的一个问题：

为什么在平面和平滑阴影中共面三角形的阴影不同？正如您在下图中看到的那样，三角形具有正确的面法线（即，完全相同，垂直于三角形所在的平面，它们是下图中的蓝色）。顶点法线看起来也是正确的（即，除了位于非常边界的顶点的顶点法线（下图中的红色法线）之外，也垂直于平面）。

我有一个菱形几何体（作为 ImmediateRenderObject），我从中减去底部的 CubeGeometry（使用 THREE.CSG）。

在 CSG 操作之前和之后，共面三角形得到不同的阴影，虽然面法线似乎完全正确（顶点法线在钻石的锐边似乎并不完全正确，但这不应该影响共面部分顶部和不同的侧面）。

一些想法为什么会发生这种情况以及我可以做些什么来获得正确的阴影？我真的很感激任何帮助！

提前致谢！:)

以下是图片：

带有平面阴影的完整钻石：http: [//i.stack.imgur.com/kWt6J.png](http://i.stack.imgur.com/kWt6J.png)

切工钻石顶部平底纹：http: [//i.stack.imgur.com/0OJZv.png](http://i.stack.imgur.com/0OJZv.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:12:49.570

为那些感兴趣的人找到了我的问题的解决方案：

使用 ImmediateRenderObject 时，我已经用顶点法线填充了法线数组。现在，我用面法线填充它们，使其全部变平。但是，使用此解决方案似乎不支持平滑着色。但它解决了我的问题！

祝你好运！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:09:34.220

如果它们的光照不同是因为它们并不完全在同一个平面上。四边形在渲染时被分成两个三角形，如果这两个三角形不在同一个平面上，它们的光照会不同。

# visual-c++ - 无需密钥的蓝牙配对

> ID：11292835
> 
> 赞同：3
> 
> 时间：2012-07-02T11:33:44.810
> 
> 标签：visual-c++, passwords, core-bluetooth

我将在 VC++ 中开发一个用于蓝牙通信的应用程序。我的目标是在没有密钥通信的情况下配对两个蓝牙设备。因为我的应用程序正在使用蓝牙 API。任何人都可以通过提供代码来帮助我完成任务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:45:59.557

```
string BTMac = "00:01:58:08:3D:ED";

BluetoothAddress BTAddress;

BluetoothClient BTClient = new BluetoothClient();

BluetoothEndPoint BTEndPoint;

Guid spguid = BluetoothService.SerialPort;

BTAddress = BluetoothAddress.Parse(BTMac);

BTEndPoint = new BluetoothEndPoint(BTAddress, spguid);

try

{

BluetoothSecurity.PairRequest(BTAddress, strDevicePassKey);

Application.DoEvents();

BTClient = new BluetoothClient();

BTClient.Connect(BTEndPoint);

return true;

}

catch { return false; } 
```

使用 PC 和设备通用的密钥代替`strDevicePassKey`.

# php - php 和 j2me 应用程序之间的加密/解密

> ID：11292837
> 
> 赞同：1
> 
> 时间：2012-07-02T11:33:53.880
> 
> 标签：php, encryption, java-me, bouncycastle, mcrypt

我有一个黑莓应用程序 (j2me) 加密数据并将其发送到服务器、php 页面，然后再返回。对于应用程序，我使用 lcrypto-j2me-147 (Bouncy Castle) 和 mcrypt 作为 php 部分。问题是他们加密相同的文本并产生不同的结果。因此，两者无法相互发送加密数据。

我的测试系统： PHP 代码：

```
<?php 
function printStringToHex($text)
{
    $size = strlen($text);
    for($i = 0; $i < $size; $i++)
    {
        echo dechex(ord($text[$i])) . " ";
    }
}

function encrypt($key, $input) 
{ 
    echo "<PRE>*** Encrypt *** </PRE>";
    echo "<PRE>Raw input: " . $input . "</PRE>";
    $size = mcrypt_get_block_size('twofish', 'ecb'); 
    echo "<PRE>Block: " . $size . "</PRE>";
    $input = pkcs5_pad($input, $size); 
    echo "<PRE>PKCS#5 padding: ";
    echo printStringToHex($input);
    echo "</PRE>";

    $td = mcrypt_module_open('twofish', '', 'ecb', ''); 
    $iv = mcrypt_create_iv (mcrypt_enc_get_iv_size($td), MCRYPT_RAND); 
    mcrypt_generic_init($td, $key, $iv); 
    $data = mcrypt_generic($td, $input); 
    echo "<PRE>Raw output: " . $data . "</PRE>";
    echo "<PRE>Hex output: ";
    echo printStringToHex($data);
    echo "</PRE>";
    mcrypt_generic_deinit($td); 
    mcrypt_module_close($td); 
    $data = base64_encode($data); 
    echo "<PRE>B64 output: " . $data . "</PRE>";
    echo "<PRE>B64 output len: ";
    echo strlen($data) . "</PRE>";
    return $data; 
} 

function pkcs5_pad ($text, $blocksize) 
{ 
    $pad = $blocksize - (strlen($text) % $blocksize); 
    return $text . str_repeat(chr($pad), $pad); 
} 

$enc = encrypt("The key string", "The plain text string"); 
```

输出是：

```
Encrypt:
Raw input: The plain text string
Block: 16
PKCS#5 padding: 54 68 65 20 70 6c 61 69 6e 20 74 65 78 74 20 73 74 72 69 6e 67 b b b b b b b b b b b 
Raw output: Þˆ2L4ýé6öò8?‰ÛŒÇY˜W‘Š…HEÅ8=a[
Hex output: de 88 32 4c 34 8 fd e9 36 f6 f2 38 3f 89 db 8c c7 59 98 57 91 8a 85 48 45 16 2 c5 38 3d 61 5b 
B64 output: 3ogyTDQI/ek29vI4P4nbjMdZmFeRioVIRRYCxTg9YVs=
B64 output len: 44 
```

对于 Java 部分，我使用了一个示例：

```
public static byte[] encryptDecrypt(byte[] inputBytes, String keyString, boolean encrypt)
{ 
    try
    {
        if(encrypt) System.out.println("*** Encrypting *** "); else System.out.println("*** Decrypting *** ");
        System.out.println("Key: " + keyString);
        System.out.println("Input bytes (String): " +  new String(inputBytes));
        System.out.print("\nInput bytes (byte[]): ");
        printOutBytes(inputBytes);

        byte[] keyBytes = keyString.getBytes();
        KeyParameter key = new KeyParameter(keyBytes);
        TwofishEngine twofish = new TwofishEngine();
        BufferedBlockCipher cipher = new PaddedBufferedBlockCipher(twofish);
        cipher.init(encrypt, key);
        byte[] cipherBytes = new byte[cipher.getOutputSize(inputBytes.length)];
        int cipherLength = cipher.processBytes(inputBytes, 0, inputBytes.length, cipherBytes, 0);
        cipher.doFinal(cipherBytes, cipherLength);

        System.out.println("Cipher bytes (String): " + new String(cipherBytes));
        System.out.print("\nCipher bytes (byte[]): ");
        printOutBytes(cipherBytes);
        return cipherBytes;
    }   
    catch(InvalidCipherTextException e)
    {
        System.err.println(e.getMessage());
    }
    return null;
} 
```

输出是：

```
Encrypting 
Key: The key string
Input bytes (String): The plain text string
Input bytes (byte[]): 54 68 65 20 70 6c 61 69 6e 20 74 65 78 74 20 73 74 72 69 6e 67 
Cipher bytes (String): ²Rð?=
r¾=??ùUí?9?rtæ?0ÊÃ(½~Å3
Cipher bytes (byte[]): b2 52 f0 87 81 3d 14 a 72 be 3d 85 80 f9 55 ed 9a 39 82 72 74 e6 91 30 ca c3 1 28 bd 7e c5 33 
B64 of encText: slLwh4E9FApyvj2FgPlV7Zo5gnJ05pEwysMBKL1+xTM=
B64 len: 44 
```

有任何想法吗？我怀疑它是 Java 未使用的初始化向量？

非常感谢，安德烈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-29T06:58:45.750

我最终使用 Telmo Pimentel Mota 建议的相同加密库创建了一个 Servlet

# scala - Scala - 查找属于某种类型的子类型的序列成员

> ID：11292840
> 
> 赞同：1
> 
> 时间：2012-07-02T11:34:02.363
> 
> 标签：scala, type-systems

我有以下情况：

Java库类：

```
class LibClass {
  ArrayList<LibClass> children;
} 
```

我的程序 Scala 代码：

```
abstract class MyClass extends LibClass {
  def boom { }
  def boomMyClassInstances  // ???
}

class Lala extends MyClass
class Hoho extends MyClass 
```

问题是：在方法`boomMyClassInstances`中，获取所有 的最 Scala-ish 方法是什么`children`，`MyClass`存储在 中，`children` `ArrayList`以便我可以`boom`对它们调用通用方法？

我的尝试是：

```
def boomMyClassInstances {
  children.toArray.map { case mc: MyClass => mc.boom }
} 
```

这是一个正确的方法吗？它会选择所有的孩子，`MyClass`这是正确的 Scala 方式，还是我必须说一些关于类型边界的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T11:57:54.073

```
import collection.JavaConverters._

children.asScala.foreach { 
  case mc: MyClass => mc.boom 
  case _ => ()
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T11:55:54.050

退房`GenTraversableLike.collect`。它的签名本质上是`Traversable[A].collect[B <: A](f: A ~> B): Traversable[B]`，也就是说，它接受一个包含类型元素的集合`A`和一个to的**偏**函数`f`，并返回一个静态元素类型的集合，其中是 的一个子类型。`A``B``B``B``A`

```
val myClassInstances: List[MyClass] =
  children.toList.collect{case mc: MyClass => mc} 
```

由于`map`需要一个总函数，因此您上面的尝试将失败，`scala.MatchError`以防万一`children`不仅包含`MyClass`. 您可以使用`Option`or来解决这个问题`flatMap`，但这`collect`似乎是实现您想要的最 Scala-ish 的方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T11:58:25.917

我不是类型专家，所以我不能肯定地说你的解决方案会起作用，但它似乎确实应该起作用。它的优点是直截了当，这总是好的。

不过，您确实需要添加一个包罗万象的案例（以免得到 a `scala.MatchError`）。

```
case _ => // do nothing 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T13:19:32.110

您想要`collect`相关部分：

```
children.iterator collect { case mc: MyClass => mc } foreach (_.boom()) 
```

# javascript - 无法让 JSON 输出循环

> ID：11292841
> 
> 赞同：1
> 
> 时间：2012-07-02T11:34:02.563
> 
> 标签：javascript, json, for-loop, local-storage

我想循环真正的某些元素，在这种情况下，所有元素都使用“小部件”类，并获得 id 和标题（稍后会介绍更多内容），将其作为 JSON 存储在 localStorage 中（必须是字符串，因此我们将数据字符串化） ，从 localStorage 中获取数据并循环结果。一切都很顺利，直到我想循环它（JSON输出有效），这不起作用，我已经工作了一天多，所以我希望任何人都能看到我做错了什么。

（是的，我在网上看过）

我仍然是一个菜鸟，所以如果有更好的方法来存储和循环，请告诉我。

// html

```
<div class="widget" id="w1">
   <h2>some text</h2>
</div>

...
...
... 
```

// 设置数据

```
var storeStr = '';
    storeStr += '{"widget":[';
$('.widget').each(function(){                   
    storeStr += '{';                                
    storeStr += '"id": "'+$(this).attr('id')+'",';
    storeStr += '"title": "'+$(this).children('h2').text()+'"';
    storeStr += '},';
});
storeStr += ']}';
var storeStr = storeStr.replace(/\},]/g,'}]');// comma cleanup
localStorage.setItem('thelskey', storeStr); 
```

// 输出（json 有效）

```
{ 
  "widget":[
     {"id": "w1","title": "xxxxx"},
     {"id": "w2","title": "xxxxx"},
     {"id": "w3","title": "xxxxx"},
     {"id": "w4","title": "xxxxx"}
  ]
} 
```

// 循环

```
var json = JSON.parse(localStorage.getItem('thelskey'));

for(var key in json){
    //output
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:45:53.483

与其在循环中形成字符串，为什么不简单地创建一个对象文字然后将数据推入其中。

```
var store = [];
var i = 0;
$('.widget').each(function(){
 var obj = {};
 obj['id'] = $(this).attr('id');
 obj['title'] = $(this).children('h2').text();
 store.push(obj);
});
storeObj = {'widget':store};
localStorage.setItem('thelskey', storeObj); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T11:44:38.443

您的 JSON 对象只有一个*键*, `"widget"`。所以循环遍历它是没有意义的。如果要获取所有的widget数据，需要循环遍历`widget`property下的每一项，即

```
for (var key in json.widget) {
  // output
} 
```

否则，不要将数组包装在额外的对象中，只需将 JSON 构造为：

```
[
  {"id": "w1","title": "xxxxx"},
  {"id": "w2","title": "xxxxx"},
  {"id": "w3","title": "xxxxx"},
  {"id": "w4","title": "xxxxx"}
] 
```

* * *

我觉得您不了解 JSON 对象的结构，目前是：

```
{
  widget: [
    {
      id: "w1",
      title: "xxxxx"
    },
    {
      id: "w2",
      title: "xxxxx"
    },
    {
      id: "w3",
      title: "xxxxx"
    },
    ...
  ]
} 
```

您可以将其视为一个 3 维关联数组（或相互嵌套的 3 层关联数组）：

```
/* in PHP code because JS doesn't have associative arrays */

$json = array( // first layer
  'widget' => array( // second layer
    0 => array( // third layer
      'id' => 'w1',
      'tit;e' => 'xxxxx'
    ),
    1 => array( // third layer
      'id' => 'w2',
      'tit;e' => 'xxxxx'
    ),
    2 => array( // third layer
      'id' => 'w3',
      'tit;e' => 'xxxxx'
    ),
    ...
  )
); 
```

您当前正在尝试遍历 的第一个维度`$json`，该维度只有一个项目。所以你得到的错误是因为你试图访问：

```
$json[$key]['widget']['id'] // $key = 'widget' 
```

实际上，您应该尝试访问：

```
$json['widget'][$key]['id'] // $key = 1, 2, 3, 4 
```

*或者*您可以简单地删除数据结构的第一层并访问：

```
$json[$key]['id'] // $key = 1, 2, 3, 4 
```

为避免将来出现此类问题，请使用诸如 Firebug 或 node.js 之类的 JS 控制台或大多数现代浏览器现在拥有的内置 JS 控制台。只需执行以下操作：

```
console.log(json); 
```

或者

```
foreach (key in json) {
  console.log(key);
  console.log(json[key]);
} 
```

会暴露问题的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T11:52:07.960

```
var widget = [];
widget[0] = {"id":"w1", "title":"123"};
widget[1] = {"id":"w2", "title":"12322"};
widget[2] = {"id":"w3", "title":"12333"};
widget[3] = {"id":"w4", "title":"12344"};
widget[4] = {"id":"w5", "title":"12355"};

localStorage.setItem("db", JSON.stringify(widget));

var widget1 = JSON.parse(localStorage.getItem('db')); 
```

# mysql - 这个 MySQL 连接查询可以优化吗？

> ID：11292842
> 
> 赞同：1
> 
> 时间：2012-07-02T11:34:05.263
> 
> 标签：mysql, sql, query-optimization

我有这个查询需要 27 秒才能执行：

```
SELECT ocal_files.*, count(DISTINCT ocal_favs.username) as favs 
FROM ocal_files
   INNER JOIN ocal_favs on ocal_favs.clipart_id = ocal_files.id 
GROUP BY ocal_files.id 
ORDER BY favs DESC​ 
```

（而不是用户名，它应该是 user_id，因为我有用户表）

`ocal_files`有 37457 行，`ocal_favs`有 18263

**编辑**解释的结果

```
mysql> EXPLAIN SELECT ocal_files.*, count(DISTINCT ocal_favs.username) as favs FROM ocal_files INNER JOIN ocal_favs on ocal_favs.clipart_i
d = ocal_files.id GROUP BY ocal_files.id ORDER BY favs DESC;                                                                             
+----+-------------+------------+--------+----------------+---------+---------+---------------------------------+-------+---------------------------------+
| id | select_type | table      | type   | possible_keys  | key     | key_len | ref                             | rows  | Extra                           |
+----+-------------+------------+--------+----------------+---------+---------+---------------------------------+-------+---------------------------------+
|  1 | SIMPLE      | ocal_favs  | ALL    | rlb_clipart_id | NULL    | NULL    | NULL                             | 18622 | Using temporary; Using filesort|
|  1 | SIMPLE      | ocal_files | eq_ref | PRIMARY        | PRIMARY | 4       | openclipart.ocal_favs.clipart_id |     1 | Using where                    |
+----+-------------+------------+--------+----------------+---------+---------+---------------------------------+-------+---------------------------------+
2 rows in set (0.00 sec) 
```

**为什么慢？可以优化吗？如果是，那怎么办？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:59:16.537

尝试创建索引

```
ocal_favs ( clipart_id, username ) 
```

并确保有`NOT NULL`约束`ocal_favs.username`或添加`ocal_favs.username IS NOT NULL`为条件。

`ocal_files`这应该允许从该索引中获取所有信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T11:59:36.317

处理`SQL`优化时的一个好方法是只选择您需要的字段，而不是您的情况下的所有字段。这几乎总是会对性能产生巨大影响，尤其是当字段是`BLOB's`. 而且，正如其他用户所指出的 - 索引也非常重要，但前提是您已正确创建它。使用 of`LIMIT`子句也是个好主意，如果您不需要立即显示结果（我怀疑这里是这种情况，因为我不相信您会显示 30000+ 记录的结果到用户浏览器）...

# java - Wifi Socket地址无效，Android

> ID：11292851
> 
> 赞同：0
> 
> 时间：2012-07-02T11:34:48.543
> 
> 标签：java, android, sockets

每当我通过调用创建`ServerSocket`并观察套接字地址时`getLocalSocketAddress()`，我都会看到：

> 0.0.0.0/0.0.0.0:xxxx(xxxx是随机端口号)

我的服务器代码是：

```
try{
    Boolean end = false;
    ServerSocket ss = new ServerSocket(0);
    System.out.println("Program running, Server address:" + ss.getLocalSocketAddress().toString());
    while(!end){
        //Server is waiting for client here, if needed

        Socket s = ss.accept();
        System.out.println("Socket Connected !");  
        BufferedReader input = new BufferedReader(new InputStreamReader(s.getInputStream()));
        PrintWriter output = new PrintWriter(s.getOutputStream(),true); //Autoflush
        String st = input.readLine();
        System.out.println("Tcp Example From client: "+st);
        output.println("Good bye and thanks for all the fish :)");
        s.close();

    }
    ss.close();  
 } catch (Exception ex) {
     ex.printStackTrace();
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:20:38.967

**不要**在 ServerSocket 中分配**“0”**

**端口是从 0-65535 ，但要使用它的 1 - 65534 .. MoreOver 尝试使用 1024 以上的端口，因为它被其他知名服务使用，如 Telnet、FTP、HTTP 等......**

查看我的代码......它可能会帮助你执行你的代码......

**服务器端代码示例：**

```
 public class ServerTest {

        ServerSocket s;

        public void go() {

            try {
                s = new ServerSocket(4445);

                while (true) {

                    Socket incoming = s.accept();
                    Thread t = new Thread(new MyCon(incoming));
                    t.start();
                }
            } catch (IOException e) {

                e.printStackTrace();
            }

        }

        class MyCon implements Runnable {

            Socket incoming;

            public MyCon(Socket incoming) {

                this.incoming = incoming;
            }

            @Override
            public void run() {

                try {
                    PrintWriter pw = new PrintWriter(incoming.getOutputStream(),
                            true);
                    InputStreamReader isr = new InputStreamReader(
                            incoming.getInputStream());
                    BufferedReader br = new BufferedReader(isr);
                    String inp = null;

                    boolean isDone = true;

                    System.out.println("TYPE : BYE");
                    System.out.println();
                    while (isDone && ((inp = br.readLine()) != null)) {

                        System.out.println(inp);
                        if (inp.trim().equals("BYE")) {
                            System.out
                                    .println("THANKS FOR CONNECTING...Bye for now");
                            isDone = false;
                            s.close();
                        }

                    }
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    try {
                        s.close();
                    } catch (IOException e1) {
                        // TODO Auto-generated catch block
                        e1.printStackTrace();
                    }
                    e.printStackTrace();
                }

            }

        }

        public static void main(String[] args) {

            new ServerTest().go();

        }

} 
```

# php - 为输入验证返回 NULL

> ID：11292859
> 
> 赞同：0
> 
> 时间：2012-07-02T11:35:33.223
> 
> 标签：php, null, validation

在我的 PHP Web 应用程序中，我通常使用自定义函数验证用户输入，如果输入与验证条件不匹配，则返回 NULL，如果满足验证条件，则返回原始输入值。所以一个基本的流程看起来像这样：

```
$user_input = $_POST['fieldname'];
$user_input = validation_function($user_input);

if (isset($user_input)) {
  // do stuff
} 
```

这样做的好处是我可以接受任意数量的用户输入，验证它们，然后将它们`isset()`作为参数粘贴到函数中，因为`isset()`函数接受可变数量的参数。

现在，我已经阅读了很多关于 NULL 返回如何不好的内容，以及这个 SO 问题，[“返回 null 是错误的设计吗？”](https://stackoverflow.com/questions/1274792/is-returning-null-bad-design) 有一个很好的答案，基本上说*“不返回 null 背后的理由是您不必检查它，因此您的代码不需要根据返回值遵循不同的路径”*。我了解这对应用程序的内部工作有何好处，但是如何将这一原则应用于输入验证？

问题的关键是，我如何处理输入验证，而不必像上面提供的代码示例那样返回 NULL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:17:03.430

首先，不要这样使用`isset`，你在滥用它。

```
 if at all, use isset here, because
     this variable *may* actually not be set
              vvvvvvvvvvvvvvvvvvv
$user_input = $_POST['fieldname'];

if (isset($user_input)) {
    ^^^^^^^^^^^^^^^^^^
 do not use isset here, because
 this variable is definitely set 
```

`isset`具有特定目的并用于适当的错误处理/抑制。如果您`isset`以这种方式使用，您只会通过抑制错误输入变量的错误报告来使您的生活更加艰难。

然后，您应该概括您的代码。创建一个要验证的字段数组。在该数组上运行一个循环，标记字段`true`或`false`. 弄清楚所有字段是否为真。

```
$validate = array_fill_keys(array('firstname', 'lastname', ...), null);

foreach ($validate as $field => &$valid) {
    // your validation logic here!
    $valid = !empty($_POST[$field]) ? $_POST[$field] : false;
}

if (array_filter($validate, function ($i) { return $i === false; })) {
    die('Some fields are invalid!');
} 
```

那是一个简单的骨架。您可以扩展它来为数组中的失败字段设置单独的错误消息、单独的验证规则等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:40:10.487

```
if(isset($user_input))
 {
$flg = true;
}
if($flg)
{
//do stuff
} 
```

我想这就是你要找的。您可以设置一个变量 true 和 false 作为我的验证方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T11:40:34.693

对于输入验证，我总是返回原始值，然后以某种方式将该字段标记为无效。这样做的原因是我通常希望为每个字段显示一条验证错误消息。而不是一个函数，我会使用一个类，这样跟踪所有这一切要容易得多。

如果您对这种方法感兴趣，请查看如何`Zend_Form`协同`Zend_Validate`工作来为用户输入提供可扩展的验证界面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T12:01:04.647

从 baig772 的答案中得出的稍微紧凑的方式：

```
if(validation_function($user_input)) 
{
// do stuff
} 
```

让我们`validation_function()`返回一个布尔值，并据此决定要做什么。不需要`isset()`。您当然可以在该块中设置标志，并稍后在代码中使用这些标志。`isset()`允许您添加混合变量，但可以假设根据输入类型需要不同的验证函数。所以你可以这样做：

```
if(validation_function_fname($first_name) && validation_function_email($email))
{
//do stuff
} 
```

或者，像这样：

```
$name_ok = validation_function_fname($first_name);
$email_ok = validation_function_email($email);

if($name_ok && $email_ok)
{
// do stuff
} 
```

# html - 网络网络中的黑莓广告服务

> ID：11292863
> 
> 赞同：0
> 
> 时间：2012-07-02T11:35:51.787
> 
> 标签：html, blackberry

我在我的 webworks 应用程序中使用黑莓广告服务。横幅正在显示。如果我点击横幅，它什么也不做。以下是我的代码。

```
<script type="text/javascript" src="http://www.blackberry.com/app_includes/asdk/adBanner.js"></script>

<center> <div id='bannerDiv'></div> </center>

 <script type="text/javascript">
 var bannerObj = new blackberry.advertising.Banner(31848, "bannerDiv" , {
 "bannerTransitions" : true,
 "mmaSize" : "auto",
 "metadata" : { "age" : "12", "activity" :
 "low" },
 "refreshRate" : 90000,
 "focusBorderColor" : "blue",
 "focusBorderWidth" : "1px",
 "placeholder" : "http://www.bbmanimated.com/bbmapp2/images/banner.png"
 });
</script> 
```

我该怎么办 ？请帮忙。

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:48:41.510

您正在创建横幅，但没有将任何功能与其关联。您需要执行“onClick()”之类的操作并为其提供说明。

我希望这会有所帮助。

谢谢

纳文 M

# vb.net - 如何关联不同形式的数据网格事件？

> ID：11292865
> 
> 赞同：0
> 
> 时间：2012-07-02T11:36:04.017
> 
> 标签：vb.net, winforms, datagrid, event-handling

我当前的应用程序中有很多表单（这些表单是从一个基类继承而来的），并且这些表单中有太多不同的数据网格。每个数据网格都有自己的事件处理程序。并且有可能为该应用程序中的每个数据网格创建一个具有大规模数据网格的表单。我需要关联一些“父”和“子”数据网格的事件（例如选择更改、双击行等） - 当一个事件以“父”形式引发时，它应该以“子形式”引发并且反之亦然。

有没有一种简单的方法来关联这些事件？（例如，通过使用中间类）

我正在使用winforms，vb.net。

# c++ - 在 boost::python vector_indexing_suite 上迭代的意外结果

> ID：11292869
> 
> 赞同：2
> 
> 时间：2012-07-02T11:36:30.043
> 
> 标签：c++, python, boost-python, stdvector

我已经成功包装了一个名为 Composite 的类。这个类有以下方法：

```
std::vector<Composite*> Composite::getChildren(); 
```

我尝试使用vector_indexing_suite包装返回的std::vector，以这种方式：[snippet]

```
typedef std::vector<Composite*> CompositeArray;

BOOST_PYTHON_MODULE(composite)
{   
    class_<CompositeArray>("CompositeArray")
        .def(vector_indexing_suite<CompositeArray, true>());

    class_<Composite>("Composite", init<>())
        ... more wrapper
        .def("getChildren", &Composite::getChildren)
        ... more wrapper
        ;
} 
```

现在一切似乎都正常工作，当我从 python 调用 getChildren() 方法时，它会正确返回一个包装好的 CompositeArray。我可以这样做，例如：

```
from composite import Composite
myComp = Composite()

myComp.addChild('childA')
myComp.addChild('childB')

len(myComp.getChildren())  #returns 2
myComp.getChildren()[0] # returns the first child of type Composite 
```

但是当我尝试迭代 CompositeArray 时，就像这样：

```
for child in myComp.getChildren():
    # do something with child... 
```

我收到此错误消息：

```
TypeError: No to_python (by-value) converter found for C++ type: class Composite * __ptr64 
```

考虑到按索引访问非常有效，这对我来说没有任何意义！我被困在这个......你知道我做错了什么吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-23T14:58:41.773

尝试

```
class_<Composite, Composite*>("Composite", init<>()) 
```

代替

```
class_<Composite>("Composite", init<>()) 
```

# debugging - 我怎么知道从哪里调用了函数？

> ID：11292872
> 
> 赞同：1
> 
> 时间：2012-07-02T11:36:40.417
> 
> 标签：debugging, linux-kernel, kernel, linux-device-driver

我正在尝试调试我的代码中的一些函数。不幸的是，gdb 在系统中不可用，因此目前通过 printk 消息（它是一个 linux 内核驱动程序）完成了调试。

有一个带有一些参数的函数被调用。我想知道是否有可能知道谁以及如何调用该函数。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T11:42:03.253

您可以启用堆栈转储以查看堆栈和调用跟踪。您可以使用函数 dump_stack() 在默认控制台上打印堆栈和调用跟踪。

看一下 ：

*   [http://processors.wiki.ti.com/index.php/Enabling_Stack_Dumping_in_Linux_Kernel](http://processors.wiki.ti.com/index.php/Enabling_Stack_Dumping_in_Linux_Kernel)
*   [http://kernelnewbies.org/KernelHacking-HOWTO/Debugging_Kernel](http://kernelnewbies.org/KernelHacking-HOWTO/Debugging_Kernel)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T04:13:58.263

您还可以通过 Ctags 和 cscope 离线阅读代码。

在 vim 中使用 cscope fc Function_name，你会得到调用跟踪。

在 Windows 中，您可以尝试 Source Insight。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T07:01:06.803

GCC 提供了函数`__builtin_return_address`。
`__builtin_return_address(0)`应该在调用函数中为您提供调用站点的地址。搜索最接近的值`/proc/kallsyms`以找到函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T07:09:42.127

在内核代码中调用 dump_stack() 是可行的方法。

# gwt - tablayoutpanel 未正确显示

> ID：11292878
> 
> 赞同：2
> 
> 时间：2012-07-02T11:37:28.100
> 
> 标签：gwt

我正在使用普通的 GWT 并尝试在弹出面板中显示 tablayoutpanel，但是当我显示弹出面板时布局完全混乱，我不知道是什么问题。如果你们中的任何人能告诉我这条鳕鱼有什么问题。

```
 <ui:UiBinder xmlns:ui='urn:ui:com.google.gwt.uibinder'
xmlns:g='urn:import:com.google.gwt.user.client.ui'
ui:generateFormat='com.google.gwt.i18n.rebind.format.PropertiesFormat'
ui:generateKeys='com.google.gwt.i18n.rebind.keygen.MD5KeyGenerator'
ui:generateLocales='default'>

<ui:style>
    .tabPanelExample1
    {
        margin: 10px;
    }
    </ui:style>

<!-- Defining constant variable for using VRS internationalisation messages --> 
<ui:with field='constants'    type='com.vermilionsoftware.vrsgwtp.client.VRSGWTConstants'/>

<g:DialogBox width="800" height="600">
    <g:HTMLPanel>
        <g:TabLayoutPanel ui:field="tabPanel" barUnit="PX"
            barHeight="60" width="375px" height="150px">
            <g:tab>
                <g:header>
                    UiBinder Tab 1
                </g:header>
                <g:HTML>
                    Hello tab 1
                    <br />
                    Good bye!
                </g:HTML>
            </g:tab>
            <g:tab>
                <g:header>
                    UiBinder Tab 2
                </g:header>
                <g:HTML>
                    <h2>Hello tab 2</h2>
                </g:HTML>
            </g:tab>
            <g:tab>
                <g:header>
                    UiBinder Tab 3
                </g:header>
                <g:HTML>
                    <strong>
                        <i>
                            <u>Hello tab number 3</u>
                        </i>
                    </strong>
                </g:HTML>
            </g:tab>
        </g:TabLayoutPanel>
    </g:HTMLPanel>
</g:DialogBox> 
```

MyView 类是：

```
 public class ColourSelectorView extends PopupViewWithUiHandlers<ReportLayoutUiHandlers> implements ColourSelectorPresenter.MyView {

private final Widget widget;
private static ColourSelectorViewUIBinder uiBinder = GWT.create(ColourSelectorViewUIBinder.class);

public interface ColourSelectorViewUIBinder extends UiBinder<Widget, ColourSelectorView> {
}

@Inject
public ColourSelectorView(EventBus eventBus) {
super(eventBus);
widget = uiBinder.createAndBindUi(this);
}

@Override
public Widget asWidget() {
    return widget;
} 
```

}

我的主持人是：

```
 public class ColourSelectorPresenter extends
    PresenterWidget<ColourSelectorPresenter.MyView> {

public interface MyView extends PopupView {
    // TODO Put your view methods here
}

@Inject
public ColourSelectorPresenter(final EventBus eventBus, final MyView view) {
    super(eventBus, view);
}

@Override
protected void onBind() {
    super.onBind();
}

@Override
protected void onReveal() {
    super.onReveal();

    Window.alert(this.getWidget().getElement().getInnerHTML());
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:10:45.107

尝试将 包装`TabLayoutPanel`在[ResizeLayoutPanel](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/ResizeLayoutPanel.html)而不是 a`HTMLPanel`或为`HTMLPanel`

# r - 将 R 循环的输出写入文件

> ID：11292880
> 
> 赞同：5
> 
> 时间：2012-07-02T11:37:33.393
> 
> 标签：r, loops

目前我的 R 循环（见下文）在每次迭代期间都会覆盖自身。我想将每个循环的结果输出到一个文本文件中。

更详细：R初学者在这里想知道如何在我的脚本中包含一行，以便将每个文件的平均值计算写入文本文件。这样脚本会创建一个新的空文本文件，然后每次脚本计算文件中第 4 列的平均值时，该值都会输出到文本文件中的一行，该行包含第 1 列中的文件名和第 1 列中的平均值第2栏。感谢您的帮助！

```
filename <- system("ls /dir/",intern=TRUE)

for(i in 1:length(filename)){

file <- read.table(filename[i],header=FALSE) ## if you have headers in your files ##
mean <- mean(as.numeric(file$V4))

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T11:51:38.513

要在循环运行时执行此操作，请在循环中添加：

```
write.csv(data.frame(fname=filename[i],mean=mean),file="output.csv",append=TRUE) 
```

但是，这将意味着大量的文件系统开销，并且在 R 中生成整个数据帧然后将文件作为一个整体写入会更快。所以代替你的循环写：

```
means <- sapply(filename, function(x) mean(as.numeric(read.table(x,header=FALSE)$V4))) 
```

然后将文件作为一个整体写入：

```
write.csv(data.frame(fname=filename,mean=means),file="output.csv") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T12:21:37.037

以下脚本将首先创建仅包含列名的文件，然后附加每个结果。

```
filename <- system("ls /dir/",intern=TRUE)

column_names <- data.frame(filename = "filename", mean = "mean")
write.table(column_names, file = "output.csv", row.names = FALSE, 
            append = FALSE, col.names = FALSE, sep = ", ", quote = TRUE)

for(i in 1:length(filename)){
  file <- read.table(filename[i],header=FALSE)
  newline <- data.frame(t(c(filename[i], mean(as.numeric(file$V4)))))
  write.table(newline, file = "output.csv", row.names = FALSE, 
              append = TRUE, col.names = FALSE, sep = ", ")
} 
```

但是，在每个步骤中写入文件的效率不是很高，您可能会考虑仅在最后执行此操作：

```
filename <- system("ls /dir/",intern=TRUE)

results <- data.frame(filename = "filename", mean = "mean")

for(i in 1:length(filename)){
  file <- read.table(filename[i],header=FALSE)
  newline <- data.frame(t(c(filename = filename[i], mean = mean(as.numeric(file$V4)))))
  results <- rbind(results, newline)
}
write.table(results, file = "output.csv", row.names = FALSE, 
            append = FALSE, col.names = TRUE, sep = ", ") 
```

# javascript - 将javascript函数的输出重定向到变量

> ID：11292881
> 
> 赞同：0
> 
> 时间：2012-07-02T11:37:36.773
> 
> 标签：javascript, variables, redirect, return

是否可以在 Javascript 中将用于网页的输出重定向到变量？

我正在调用托管在另一台服务器上的函数，它将 HTML 数据写入我的网页。但我想将该数据保存在变量中，而不是直接显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:40:06.480

您可以创建一个`DocumentFragment`和`appendChild()`HTML。然后，您可以稍后在需要时附加它。

```
var frag = document.createDocumentFragment(htmldata);
//...
//later:
document.getElementById("mydiv").append(frag); 
```

这就是你要找的那种东西……？

# asp.net - 如果内容是静态的，是否可以始终为带有“If-Modified-Since”的请求返回 http 状态 304

> ID：11292882
> 
> 赞同：5
> 
> 时间：2012-07-02T11:37:40.547
> 
> 标签：asp.net, caching, http-headers

在我们的 Asp.Net 应用程序中，我们有一个 IHttpHandler 处理图像请求。Handler 使用一个特殊的 id 来调用，该 id 标识了我们的图像缓存中的图像。一旦图像投入现金，它就永远不会改变。我的问题是：

是否可以始终为带有“If-Modified-Since”标头的请求返回 http 状态代码 304，而无需实际检查给定日期？原因是浏览器必须已经拥有图像的副本（因为它提供了 modified-since 标头）。

这将使生活更轻松，因为我们（还）不跟踪图像创建日期。

这是实际代码（更新：我现在按照 Aristos 的建议在服务器响应中包含了 if-modified 标头）：

```
public void ProcessRequest(HttpContext context)
{
    if (!String.IsNullOrEmpty(context.Request.Headers["If-Modified-Since"])) {
        //Is this okay?
        context.Response.StatusCode = 304;
        context.Response.StatusDescription = "Not Modified";
        return;
    }
    var thumbnailId = context.Request.QueryString["thumbnail"];
    using (var thumbnailCache = new CThumbnailCache()) {
        var imageBytes = thumbnailCache.GetImageById(thumbnailId);

        context.Response.ContentType = "image/png";
        var outputStream = context.Response.OutputStream;
        outputStream.Write(imageBytes, 0, imageBytes.Count());
        context.Response.Cache.SetCacheability(HttpCacheability.Public);
        context.Response.Cache.SetLastModified(DateTime.UtcNow);
        // added after Aristos post
        context.Response.AddHeader("If-Modified-Since", DateTime.UtcNow.ToString("r"));

        const int maxAge = 86400 * 14; // 14 Tage
        context.Response.Cache.SetExpires(DateTime.Now.AddSeconds(maxAge));
        context.Response.Cache.SetMaxAge(new TimeSpan(0, 0, maxAge));
        context.Response.CacheControl = "private";
        context.Response.Cache.SetValidUntilExpires(true);

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T11:42:07.857

没关系，从您获得`If-Modified-Since`资源在浏览器上的那一刻起，您就可以决定是否让它保持原样。

我喜欢在这里说你们两个的想法。您似乎没有设置此标头，因此您可能无法通过浏览器获取它。

要使此实际工作，您需要添加此行

```
context.Response.AddHeader("If-Modified-Since", LastModifledOfImage.ToString()); 
```

或者像您发送当前日期时间一样：

```
context.Response.AddHeader("If-Modified-Since", DateTime.UtcNow.ToString()); 
```

当你发送图像。我看到[您使用的是，`SetLastModified`](http://msdn.microsoft.com/en-us/library/system.web.httpcachepolicy.setlastmodified.aspx)但这是设置`Last-Modified`标题而不是您检查的标题。

如果可能，请考虑将这些图像设为实际静态，因为即使这样也会`If-Modified-Since`调用服务器，但实际静态资源会直接从浏览器缓存中获取图像，而无需询问服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T11:43:09.240

按规范：

> 如果客户端已经执行了一个条件 GET 请求并且允许访问，但是文档没有被修改，服务器应该用这个状态码来响应。

所以，是的，看起来这些条件都满足了。请务必在您的回复中再次包含 Date 标头。

# blackberry - 黑莓设备中的调试应用程序

> ID：11292883
> 
> 赞同：1
> 
> 时间：2012-07-02T11:37:42.517
> 
> 标签：blackberry

我在黑莓设备中调试我的应用程序时遇到问题，我能够在模拟器中成功运行我的应用程序。

当我右键单击我的应用程序并单击调试为 -> Blackberry 设备时，我会弹出一个询问签名密码（最少 8 个字符）的窗口，然后我输入我给定的密码。

在此签名工具自动启动并尝试发送 RRT、RBB、RCR 请求但每次失败时。当我尝试在设备中打开我的应用程序图标时，它会显示“APPLICATIONNAME 尝试访问安全 API”。

同时，当签名工具运行时，我在详细信息部分收到一条消息，“代码文件不包含来自此 SignerID 的签名。请请求签名。” 当签名工具完成执行时，我收到详细消息“一般失败。请重试。服务器可能不可用。”

我能够在设备中调试我简单生成的应用程序（不包括任何安全 api）。此外，相同的密钥在其他 pc 中工作正常（我可以使用相同的密钥和过程从其他 pc 调试设备中的应用程序）。

这是我第一次尝试在黑莓设备中调试（运行）我的应用程序，所以我可能遗漏了任何/一些重要部分，如果是这样，请告诉我哪里出错了。我正在使用 Blackberry Java 插件用于 Eclipse 和黑莓设备管理器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:16:15.060

每个插件都需要单独的密钥。一旦使用过的密钥将不适用于其他插件....您必须使用其他新密钥登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T12:01:32.777

请按照以下步骤操作。1.首次签名申请。2\. 在黑莓设备上安装签名的应用程序。3.在eclipse模拟器上右键项目，“Debug As -> Blackberry Device”。

现在您的应用程序已经签名，那么就没有机会询问签名密码了。并显示已签名的消息。请关闭那个窗口。

现在开始在黑莓设备上调试。

# c - 相当于 SSE 内在函数的 Neon

> ID：11292884
> 
> 赞同：8
> 
> 时间：2012-07-02T11:37:45.563
> 
> 标签：c, arm, sse, multiplication, neon

我正在尝试使用霓虹内在函数将交流代码转换为优化的代码。

这是对 2 个操作符而不是对操作符向量进行操作的 c 代码。

```
uint16_t mult_z216(uint16_t a,uint16_t b){
unsigned int c1 = a*b;
    if(c1)
    {
        int c1h = c1 >> 16;
        int c1l = c1 & 0xffff;
        return (c1l - c1h + ((c1l<c1h)?1:0)) & 0xffff;
    }
    return (1-a-b) & 0xffff;
} 
```

此操作的 SEE 优化版本已通过以下方式实现：

```
#define MULT_Z216_SSE(a, b, c) \
    t0  = _mm_or_si128 ((a), (b)); \ //Computes the bitwise OR of the 128-bit value in a and the 128-bit value in b.
    (c) = _mm_mullo_epi16 ((a), (b)); \ //low 16-bits of the product of two 16-bit integers
    (a) = _mm_mulhi_epu16 ((a), (b)); \ //high 16-bits of the product of two 16-bit unsigned integers
    (b) = _mm_subs_epu16((c), (a)); \ //Subtracts the 8 unsigned 16-bit integers of a from the 8 unsigned 16-bit integers of c and saturates
    (b) = _mm_cmpeq_epi16 ((b), C_0x0_XMM); \ //Compares the 8 signed or unsigned 16-bit integers in a and the 8 signed or unsigned 16-bit integers in b for equality. (0xFFFF or 0x0)
    (b) = _mm_srli_epi16 ((b), 15); \ //shift right 16 bits
    (c) = _mm_sub_epi16 ((c), (a)); \ //Subtracts the 8 signed or unsigned 16-bit integers of b from the 8 signed or unsigned 16-bit integers of a.
    (a) = _mm_cmpeq_epi16 ((c), C_0x0_XMM); \ ////Compares the 8 signed or unsigned 16-bit integers in a and the 8 signed or unsigned 16-bit integers in b for equality. (0xFFFF or 0x0)
    (c) = _mm_add_epi16 ((c), (b)); \ // Adds the 8 signed or unsigned 16-bit integers in a to the 8 signed or unsigned 16-bit integers in b.
    t0  = _mm_and_si128 (t0, (a)); \ //Computes the bitwise AND of the 128-bit value in a and the 128-bit value in b.
    (c) = _mm_sub_epi16 ((c), t0); ///Subtracts the 8 signed or unsigned 16-bit integers of b from the 8 signed or unsigned 16-bit integers of a. 
```

我几乎已经使用霓虹内在函数转换了这个：

```
#define MULT_Z216_NEON(a, b, out) \
    temp = vorrq_u16 (*a, *b); \
    // ??
    // ??
    *b = vsubq_u16(*out, *a); \
    *b = vceqq_u16(*out, vdupq_n_u16(0x0000)); \
    *b = vshrq_n_u16(*b, 15); \
    *out = vsubq_s16(*out, *a); \
    *a = vceqq_s16(*c, vdupq_n_u16(0x0000)); \
    *c = vaddq_s16(*c, *b); \
    *temp = vandq_u16(*temp, *a); \
    *out = vsubq_s16(*out, *a); 
```

我只是错过了和的霓虹灯等价`_mm_mullo_epi16 ((a), (b));`物`_mm_mulhi_epu16 ((a), (b));`。要么我误解了某些东西，要么 NEON 中没有这样的内在函数。如果没有等效的如何使用 NEONS 内在函数归档这些步骤？

更新 ：

我忘了强调以下一点：函数的操作符是**uint16x8_t** NEON 向量（每个元素都是 uint16_t => 0 到 65535 之间的整数）。在一个答案中，有人建议使用内在的`vqdmulhq_s16()`. 使用这个与给定的实现不匹配，因为乘法内在函数会将向量解释为有符号值并产生错误的输出。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T18:30:50.593

您可以使用：

```
uint32x4_t vmull_u16 (uint16x4_t, uint16x4_t) 
```

它返回一个 32 位乘积的向量。如果您想将结果分成高低部分，您可以使用 NEON unzip 内在函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T22:02:13.933

vmulq_s16() 相当于 _mm_mullo_epi16。_mm_mulhi_epu16 没有完全等价的；最接近的指令是 vqdmulhq_s16() ，它是“饱和、加倍、乘法、返回高位部分”。它仅对有符号的 16 位值进行操作，您需要将输入或输出除以 2 以消除加倍。

# svn - 如何查看特定用户在 SVN 存储库中所做的更改？

> ID：11292886
> 
> 赞同：2
> 
> 时间：2012-07-02T11:37:52.087
> 
> 标签：svn

基本上我希望 svn status -u 只显示特定用户更改的文件，因为这样我就可以只更新那些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:59:10.527

这种类型的分析/报告问题在 PowerShell 中相当简单（当然仅限于 Windows）。从这个主力开始将 svn 日志数据转换为 PowerShell 对象：

```
Function Get-SvnLogData()
{
    ([xml](svn log -v --xml)).log.logentry | % {
        $nestedEntry = $_
        $_.paths.path | % {
            $path = $_
            $nestedEntry | Select-Object -Property `
                Author, `
                @{n='Revision'; e={([int]$_.Revision)}}, `
                @{n='Date';     e={Get-Date $_.Date  }}, `
                @{n='Action';   e={$path.action      }}, `
                @{n='Path';     e={$path.InnerText   }}`
        }
    }
} 
```

将日志转换为对象后，PowerShell 的本机 cmdlet 提供了无数方法来处理数据。以下是解决手头问题的几种可能性：

**问题1：作者x是什么时候接触过每个文件的？**

显示特定作者提交的文件；一个文件可能会出现多次（包括作者每次触摸文件的时间）。

```
Get-SvnLogData |
where { $_.Author -eq 'smith' } |
select Revision,Date,Path | 
sort -property `
    @{ Expression="Path";     Descending=$false }, `
    @{ Expression="Revision"; Descending=$true  } |
Format-Table -AutoSize
# To sort by latest changes instead of by file,
# swap Path and Revision properties in sort statement. 
```

**问题 2：作者 x 最后一次触碰每个文件是什么时候（顺便说一下触碰了多少次）？**

显示特定作者提交的文件；每个文件只出现一次，带有触摸次数和上次触摸日期。

```
Get-SvnLogData |
where { $_.Author -eq 'smith' } |
group Path |
select `
    @{ n='Last Touched'; e= {@($_.group | sort date -Descending)[0].date} }, `
    @{ n='NumberOfTimesTouched'; e={$_.count} }, `
    name |
sort name | Format-Table -AutoSize
# To sort by latest changes instead of by file change last line to:
# sort date | Format-Table -AutoSize 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T17:44:04.223

您将需要解析`svn log`(or `svn status`) 的输出以仅搜索该用户的条目。

如果使用`svn log --xml`，则可以对结果执行 XPath 查询或应用 XSLT 来执行此过滤，从而捕获具有包含所需用户名`<logentry>`的节点的所有节点。`<author>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T11:46:46.290

请参考下面的示例，使用带有用户名 'jainendra'的[svn log 命令：](http://svnbook.red-bean.com/en/1.5/svn.ref.svn.c.log.html)

```
svn log | sed -n '/jainendra/,/-----$/ p' 
```

这里*sed*是一个 linux 命令。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T11:48:44.787

尝试使用

```
svn log --username <username> 
```

命令

此外，您可以添加 --limit 参数，这样您的屏幕就不会被提交填满。这是在 sed'ing svn 的输出作为用户名时无法轻易实现的。

```
svn log --username ankit --limit 2 
```

# android - 需要通过接受 android 中的所有证书通过 https 访问 xml 文件

> ID：11292887
> 
> 赞同：2
> 
> 时间：2012-07-02T11:38:06.027
> 
> 标签：android, xml, https

我刚刚开始在 android 中编程，我正在使用代码从 https 加密服务器检索 xml 文件。

```
public String getXmlFromUrl(String url) {
    String xml = null;

    try {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
    xml = EntityUtils.toString(httpEntity);
    Log.w(TAG,"xml recieved");
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    // return XML
    return xml;
} 
```

我读过一些文章，告诉我关于`SSLScoketFactory`信任经理和所有的事情。它非常混乱。谁能告诉我现在应该做什么或如何进行？我不担心中间人攻击。我只需要检索 xml 文件。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:14:52.840

您可以通过以下方式执行此操作......

**1.**如果您访问的站点没有经过认证，那么您需要创建一个自定义证书。

**2.**然后你需要将xml作为String传递给Server。

例如：

**自定义证书类，带有返回 HttpClient 对象的方法**

```
public class MySSLSocketFactory extends SSLSocketFactory {
    SSLContext sslContext = SSLContext.getInstance("TLS");

    public MySSLSocketFactory(KeyStore truststore) throws NoSuchAlgorithmException, KeyManagementException, KeyStoreException, UnrecoverableKeyException {
        super(truststore);

        TrustManager tm = new X509TrustManager() {
            public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {
            }

            public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException {
            }

            public X509Certificate[] getAcceptedIssuers() {
                return null;
            }
        };

        sslContext.init(null, new TrustManager[] { tm }, null);
    }

    @Override
    public Socket createSocket(Socket socket, String host, int port, boolean autoClose) throws IOException, UnknownHostException {
        return sslContext.getSocketFactory().createSocket(socket, host, port, autoClose);
    }

    @Override
    public Socket createSocket() throws IOException {
        return sslContext.getSocketFactory().createSocket();
    }

public static HttpClient getNewHttpClient() {
    try {
        KeyStore trustStore = KeyStore.getInstance(KeyStore.getDefaultType());
        trustStore.load(null, null);

        SSLSocketFactory sf = new MySSLSocketFactory(trustStore);
        sf.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);

        HttpParams params = new BasicHttpParams();
        HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
        HttpProtocolParams.setContentCharset(params, HTTP.UTF_8);

        SchemeRegistry registry = new SchemeRegistry();
        registry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));
        registry.register(new Scheme("https", sf, 443));

        ClientConnectionManager ccm = new ThreadSafeClientConnManager(params, registry);

        return new DefaultHttpClient(ccm, params);
    } catch (Exception e) {
        return new DefaultHttpClient();
    }
}

} 
```

**将 xml 发布到服务器的代码：**

```
public String postData(String url, String xmlQuery) {

        final String urlStr = url;
        final String xmlStr = xmlQuery;
        final StringBuilder sb  = new StringBuilder();

        Thread t1 = new Thread(new Runnable() {

            public void run() {

                HttpClient httpclient = MySSLSocketFactory.getNewHttpClient();

                HttpPost httppost = new HttpPost(urlStr);

try {

List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);

nameValuePairs.add(new BasicNameValuePair("xml", xmlStr));

httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

HttpResponse response = httpclient.execute(httppost);

    Log.d("Vivek", response.toString());

                    HttpEntity entity = response.getEntity();
                    InputStream i = entity.getContent();

                    Log.d("Vivek", i.toString());
                    InputStreamReader isr = new InputStreamReader(i);

                    BufferedReader br = new BufferedReader(isr);

                    String s = null;

                    while ((s = br.readLine()) != null) {

                        Log.d("YumZing", s);
                        sb.append(s);
                    }

                    Log.d("Check Now",sb+"");

                } catch (ClientProtocolException e) {

                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                } /*
                 * catch (ParserConfigurationException e) { // TODO
                 * Auto-generated catch block e.printStackTrace(); } catch
                 * (SAXException e) { // TODO Auto-generated catch block
                 * e.printStackTrace(); }
                 */
            }

        });

        t1.start();
        try {
            t1.join();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        System.out.println("Getting from Post Data Method "+sb.toString());

        return sb.toString();
    } 
```

# php - Zend translate 翻译成英语，而语言环境设置为荷兰语

> ID：11292894
> 
> 赞同：0
> 
> 时间：2012-07-02T11:38:49.987
> 
> 标签：php, locale, gettext, zend-translate, poedit

我的 Zend_translate 正在工作，但由于某种原因它只能翻译成英文。即使我的语言环境手动设置为荷兰语，它也会显示英文翻译。当我删除英语 mo/po 文件时，它将使用荷兰语翻译。

这是在引导程序中设置的：

```
 $translate = new Zend_Translate('gettext',
                    APPLICATION_PATH . "/languages/",
                    null,
                    array('scan' => Zend_Translate::LOCALE_DIRECTORY));

    $registry = Zend_Registry::getInstance();
    $registry->set('Zend_Translate', $translate);
    //$translate->setLocale('nl_NL'); 
```

在语言目录中有：en_US.mo、en_US.po、nl_NL.mo、nl_NL.po。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T19:23:34.050

这是我的解决方案：将此方法添加到您的 bootstrap.php 文件中。

```
protected function _initTranslate()
{
    $locale = new Zend_Locale(Zend_Locale::BROWSER);
    $langcode = $locale->getLanguage();

    $translate = new Zend_Translate(
                                    array(
                                        'adapter' => 'gettext',
                                        'content' => APPLICATION_PATH . "/langs/$langcode/$langcode.mo",
                                        'locale'  => $langcode,
                                    ));

    $registry = Zend_Registry::getInstance();
    $registry->set('Zend_Translate', $translate);
    $translate->setLocale('en');
} 
```

让我及时了解问题！

再见

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T14:34:45.920

您需要使用 Zend_Translate::LOCALE_FILENAME 而不是 Zend_Translate::LOCALE_DIRECTORY，如您在此处看到的： http://framework.zend.com/manual/1.12/en/zend.translate.additional.html#zend.translate.additional [。选项](http://framework.zend.com/manual/1.12/en/zend.translate.additional.html#zend.translate.additional.options)

正确的代码是：

```
$translate = new Zend_Translate('gettext',
                APPLICATION_PATH . "/languages/",
                null,
                array('scan' => Zend_Translate::LOCALE_FILENAME));

$registry = Zend_Registry::getInstance();
$registry->set('Zend_Translate', $translate); 
```

# sql - SQL 匹配查询

> ID：11292896
> 
> 赞同：-1
> 
> 时间：2012-07-02T11:38:57.757
> 
> 标签：sql

我有两张桌子：

## 表一

```
ida     valuea
1       a
2       b
3       c
1       d
1       e
2       f 
```

## 表b

```
idb      valueb
1 
2 
```

我将 valueb 作为组合框，如果只有 ida = current idb.and table b 变为，则需要从选择 valuea 的查询中获取它：

## 表b

```
idb      valueb
1        (a,d,e)
2        (b,f) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T12:55:24.240

很难确切地说出你在问什么，但我认为你要么只是在寻找一个简单的 INNER JOIN：

```
SELECT  TableB.IDB, TableA.ValueA
FROM    TableB
        INNER JOIN TableA
            ON TableA.IDA = TableB.IDB 
```

或者您需要使用 IDB 将 tableA 中的行连接成一行。这样做的方法取决于 DBMS，因为您没有指定一个 DMBS，我已经回答了我所知道的许多问题。每个都有一个关于 SQL Fiddle 的示例。

* * *

**[SQL 服务器](http://sqlfiddle.com/#!3/d784d/1)**

```
SELECT  TableB.IDB,
        STUFF(( SELECT  ', ' + ValueA
                FROM    TableA
                WHERE   TableA.IDA = TableB.IDB
                FOR XML PATH(''), TYPE
                ).value('.', 'VARCHAR(MAX)'), 1, 2, '') AS ValueB
FROM    TableB 
```

* * *

**[MySQL](http://sqlfiddle.com/#!2/d784d/1) / [SQLite](http://sqlfiddle.com/#!5/c713b/1)**

```
SELECT  IDB, 
        GROUP_CONCAT(ValueA) AS ValueB
FROM    TableB
        INNER JOIN TableA
            ON TableA.IDA = TableB.IDB
GROUP BY IDB 
```

* * *

**[PostgreSQL](http://sqlfiddle.com/#!1/c713b/1)**

```
SELECT  IDB,
        ARRAY_AGG(ValueA) AS ValueB
FROM    TableB
        INNER JOIN TableA
            ON TableA.IDA = TableB.IDB
GROUP BY IDB 
```

* * *

**[甲骨文](http://sqlfiddle.com/#!4/c713b/1)**

```
SELECT  IDB, 
        LISTAGG(ValueA, ', ') WITHIN GROUP (ORDER BY IDB) AS ValueB
FROM    TableB
        INNER JOIN TableA
            ON TableA.IDA = TableB.IDB
GROUP BY IDB 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:46:30.880

```
SELECT distinct valuea
FROM tablea
WHERE ida = @idb 
```

`@idb`是一个包含您选择的值的参数

# c# - html 敏捷包 - 选择特定节点

> ID：11292897
> 
> 赞同：0
> 
> 时间：2012-07-02T11:39:01.737
> 
> 标签：c#, html-agility-pack

我需要选择具有特定值的节点：

```
<td class='formlabel'>Name:</td> 
```

所以我有这样的事情：

```
HtmlNode selectedNote = html.DocumentNode.SelectSingleNode("//td[@class='formlabel'][starts-with(., 'Name:')]"); 
```

这行得通。但问题是这是一个带有开头的选择，例如，如果我有这样的代码：

```
<td class='formlabel'>Name: some text</td> 
```

它还将选择节点。我需要一些只有在节点存在时才会选择节点的东西

```
<td class='formlabel'>Name:</td> 
```

所以它会选择只有innerText等于“名称：”的节点

嗯……这可能吗。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:42:50.130

我相信你想要：

```
HtmlNode selectedNote = html.DocumentNode.SelectSingleNode("//td[@class='formlabel'][text()='Name:']"); 
```

或者

```
HtmlNode selectedNote = html.DocumentNode.SelectSingleNode("//td[@class='formlabel'][.='Name:']"); 
```

# mysql - 如何在 Mysql 中插入印地语

> ID：11292898
> 
> 赞同：9
> 
> 时间：2012-07-02T11:39:02.413
> 
> 标签：mysql, hindi

我更改了字符集但不起作用

```
CREATE TABLE `tbl_hindi` (
  `data` varchar(1000) character set utf8 collate utf8_bin default NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
INSERT INTO `tbl_hindi` VALUES ('कंप्यूटर'); 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-02T12:08:46.823

数据库的字符集需要是`utf8_unicode_ci`.

尝试创建一个新数据库以及一个新表。

```
CREATE DATABASE hindi_test
    CHARACTER SET utf8
    COLLATE utf8_unicode_ci;

USE hindi_test;

CREATE TABLE `hindi` (
    `data` varchar(200) COLLATE utf8_unicode_ci NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

INSERT INTO `hindi` (`data`) VALUES
    ('कंप्यूटर'); 
```

这适用于我的安装。如果它对您不起作用，则您的服务器设置可能有问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-12-29T15:48:54.433

您不需要更改数据库，您只需要更改表列。

```
ALTER TABLE `YOUR TABLE` CHANGE `data ` `data ` VARCHAR(1000) 
CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL; 
```

此更改工作正常且非常可行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-15T13:36:44.737

如果表已经创建并且问题在于存储（您的）本地语言字符，`utf8_general_ci`或者`utf16_general_ci`适合您：触发以下查询：

```
ALTER TABLE 'tbl_hindi' CHANGE 'data' 'data' VARCHAR(100) CHARSET utf8 COLLATE utf16_general_ci DEFAULT '' NOT NULL; 
```

如果这也不能解决您的问题，请尝试将数据库排序规则更改为`utf16_general_ci`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-28T03:47:37.163

您必须使用此代码修改表以插入印地语值

```
`ALTER TABLE 'your table name' MODIFY 'column name' VARCHAR(20) CHARACTER SET UTF8;` 
```

要在您的网页上显示印地语，您需要使用代码

```
`<meta charset="UTF-8">` 
```

在`<head>`标签之间。

有关此的详细说明，您可以[单击此处](http://www.techlifediary.com/how-display-hindi-website-from-table-database/)了解更多信息。

快乐编码！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-15T17:25:34.750

从您的 phpmyadmin 将表的排序规则更改为 utf16_general_ci ... 注意：它对我有用..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-29T05:23:55.597

![](../Images/fa7cb4bca4d330d76fc2532175026d62.png)

尝试这个：

```
CREATE TABLE tbl_hindi (
    data nvarchar(1000),
);
INSERT INTO tbl_hindi VALUES (N'कंप्यूटर');
SELECT * FROM tbl_hindi; 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2015-08-27T12:30:01.083

只需在这样的值之前使用 N $sql="insert into indextbl Values('Null',N'$abc')";

# git - 在提交中找不到特定的贡献者

> ID：11292900
> 
> 赞同：0
> 
> 时间：2012-07-02T11:39:07.690
> 
> 标签：git, github

我的组织在 github.com 上有一个私人仓库

现在有很多用户，我可以看到他们的贡献以及他们使用各自用户名所做的每一次提交，这些用户名与他们的个人资料超链接。

但是有一个用户我看不到他的名字在[用户名]中显示的超链接，但没有超链接

谁能告诉是为什么？

问候温塞斯劳斯·迪席尔瓦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T11:46:22.847

GitHub 用户的电子邮件很可能与提交作者的电子邮件不匹配。

从[文档](https://help.github.com/articles/why-are-my-commits-linked-to-the-wrong-user)中：

> GitHub 使用保存在提交标头中的电子邮件将提交链接到 GitHub 用户。如果你发现你的提交被归咎于另一个用户，或者根本没有链接到一个用户，你应该检查你的设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T11:48:45.257

编辑：我刚刚做了一些测试，似乎 GitHub 现在只依赖电子邮件地址来找出用户。正如@Stefan 建议的那样，这可能是您应该看的地方。

在我看来，最好的办法是让你的同事将他们的（组织？）电子邮件地址 ( `git config user.email`) 添加到他们的[GitHub 帐户](https://github.com/settings/emails)。

另一种解决方案是将他们的电子邮件地址更改为他们的 GitHub （`git config --global user.email my@email.com`），但第一个解决方案要好得多。

* * *

那是因为他们的 Git`user.name`与他们的 GitHub 用户名不匹配。

需要做的是：

```
git config --global user.name MyGitHubUsername 
```

# java - 容器首次加载 Web 应用程序时初始化 QuartzScheduler

> ID：11292901
> 
> 赞同：1
> 
> 时间：2012-07-02T11:39:07.457
> 
> 标签：java, struts2, quartz-scheduler

我正在尝试按照“ **Quartz 调度框架工作**”一书“**在 Web 应用程序中初始化 Quartz** ”示例中提到的步骤进行操作。这是程序的链接[https://gist.github.com/5777d9f27c700e716a5a](https://gist.github.com/5777d9f27c700e716a5a)。但是这个例子是在 Struts1 框架上的。

我们的是一个带有 Hibernate 3.5 ORM 的 struts2 框架。我应该如何在 Struts2 上配置确切的步骤。任何帮助，将不胜感激。

但是，如果我在 contextInitialized() 方法中编写代码，则会收到异常“java.lang.RuntimeException：java.io.FileNotFoundException：src/hibernate.cfg.xml（没有这样的文件或目录）”

```
Xml config = new Xml("src/hibernate.cfg.xml", "hibernate-configuration");
Properties prop = new Properties();
prop.setProperty("org.quartz.dataSource.tasksDataStore.driver", config.child("session-
                                      factory").children("property").get(1).content());
prop.setProperty("org.quartz.dataSource.tasksDataStore.URL", config.child("session-
                                      factory").children("property").get(2).content());
prop.setProperty("org.quartz.dataSource.tasksDataStore.user", config.child("session-
                                      factory").children("property").get(3).content());
prop.setProperty("org.quartz.dataSource.tasksDataStore.password", config.child("session-
                                      factory").children("property").get(4).content());
prop.setProperty("org.quartz.dataSource.tasksDataStore.maxConnections", "20");

SchedulerFactory sf = new StdSchedulerFactory(prop);
Scheduler sched = sf.getScheduler(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T17:27:03.783

要在容器加载时初始化调度程序，您可以这样做。

```
import javax.servlet.ServletContext;
import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;

import org.quartz.SchedulerException;
import org.quartz.impl.StdSchedulerFactory;

public class QuartzServletContextListener implements ServletContextListener
{
    public static final String QUARTZ_FACTORY_KEY = "org.quartz.impl.StdSchedulerFactory.KEY";
    private StdSchedulerFactory factory = null;

    /**
     * Called when the container is shutting down.
     */
    public void contextDestroyed(ServletContextEvent sce)
    {
        try
        {
            factory.getDefaultScheduler().shutdown();
        } catch (SchedulerException ex)
        {
        }

    }

    /**
     * Called when the container is first started.
     */
    public void contextInitialized(ServletContextEvent sce)
    {
        ServletContext ctx = sce.getServletContext();
        try
        {
            factory = new StdSchedulerFactory();

            // Start the scheduler now
            factory.getScheduler().start();
            ctx.setAttribute(QUARTZ_FACTORY_KEY, factory);

        } catch (Exception ex)
        {
        }
    }
} 
```

在您的 web.xml 中，添加

```
<listener>
    <description>A Listener Class to initialize Quartz Scheduler</description>
    <listener-class>full_package_path.QuartzServletContextListener</listener-class>
</listener> 
```

这基本上在容器加载时创建调度程序。然后，您可以使用我以前的帖子`StdSchedulerFactory`从`StdSchedulerFactory`. 让我知道是否有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:47:35.147

1.  首先你需要在你的 web.xml中配置[QuartzInitializerServlet 。](http://quartz-scheduler.org/api/2.0.0/org/quartz/ee/servlet/QuartzInitializerServlet.html)
2.  其次，您的 Struts2 动作需要实现[ServletContextAware](http://struts.apache.org/2.0.11.2/struts2-core/apidocs/org/apache/struts2/util/ServletContextAware.html)接口。这个接口有一个设置[ServletContext](http://docs.oracle.com/javaee/5/api/javax/servlet/ServletContext.html)的方法。
3.  然后您可以继续接收您的 StdSchedulerFactory。

`public class MyClass implements ServletContextAware` {

```
private ServletContext context;

public void setServletContext(ServletContext context)
{
    this.context = context.
}

public String execute()
{
    StdSchedulerFactory factory = (StdSchedulerFactory)context.getAttribute(QuartzFactoryServlet.QUARTZ_FACTORY_KEY);

    // Retrieve the scheduler from the factory
    Scheduler scheduler = factory.getDefaultScheduler();
}

} 
```

希望这更清楚。

# c# - GridView编辑表单的填充文本框

> ID：11292903
> 
> 赞同：1
> 
> 时间：2012-07-02T11:39:17.083
> 
> 标签：c#, asp.net

我制作了一个表格，我使用了多个文本框，然后填充了 gridview

在gridview中可见编辑后我想填充表单的文本框单击编辑

gridview 我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:58:33.253

textbox1=datagridView1.SelectedRow[0].Cells["CellName1 or CellIndex1"].value; textbox2=datagridView1.SelectedRow[0].Cells["CellName2 or CellIndex2"].value;

像所有人一样

# c# - 如何在 WP7 C# 中获取控件的位置

> ID：11292907
> 
> 赞同：1
> 
> 时间：2012-07-02T11:39:31.693
> 
> 标签：c#, windows-phone-7

谁能告诉我如何获得控件的位置？显然`controlName.Margin.Top` 对我不起作用。当我设置一个断点时，Left 值显然不是，我得到 0.0，控件位于屏幕的一半。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T11:54:30.003

有点像

点位置 = child.TransformToVisual(ancestor).Transform(new Point(0, 0));

其中祖先是 LayoutRoot 或 Page 和 child 是有问题的控件。

编辑：我刚刚阅读了您的评论“我想知道控件在我的画布上的位置”。祖先当然也可以是直接父母。

但是，在这种情况下（直接父级是 Canvas），以下可能会更好： var top = myCanvas.GetTop(child);

# javascript - 如何销毁javascript中的对象？

> ID：11292909
> 
> 赞同：4
> 
> 时间：2012-07-02T11:39:46.667
> 
> 标签：javascript, arrays, object, garbage-collection, destroy

我想知道如何正确销毁 Javascript 中包含其他数据中的数组的对象。

例如（这是对象的初始状态）：

```
acme.models.nomination = {
    recipients : [], // array will be added to later.
    awardType: {}, // this object will be filled out later.
    privacy: 'private',
    ...
}; 
```

在使用应用程序时，将添加 nomination.recipients 对象以及其他数据元素。完成以下操作是否足以清除整个对象：

```
acme.models.nomination = {}; 
```

还是这更好（或矫枉过正）：

```
acme.models.nomination.privacy = undefined;
acme.models.nomination.awardType = {};
acme.models.nomination.recipients = {};
acme.models.nomination = {}; 
```

我认为前一个语句（即`acme.models.nomination = {}`）就足够了，因为这有效地使整个内容无法访问，因此有资格进行垃圾收集。不过，我想听听其他人对此的看法。顺便说一句，答案可以在现代浏览器上下文中给出，比如 2012 年 1 月后的浏览器，因为我知道过去的内存管理有点不一致。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:45:50.470

我认为[delete](https://developer.mozilla.org/en/JavaScript/Reference/Operators/delete) -Operator 是您正在寻找的：

```
delete acme.models.nomination; 
```

# algorithm - 糖果 - interviewstreet

> ID：11292913
> 
> 赞同：4
> 
> 时间：2012-07-02T11:39:58.727
> 
> 标签：algorithm

爱丽丝是幼儿园的老师。她想给班上的孩子们一些糖果。所有的孩子排成一排，每个孩子都根据自己平时的表现打分。Alice 想给每个孩子至少 1 颗糖果。因为孩子们在某种程度上嫉妒。Alice 必须根据他们对任何相邻 2 个孩子的评分主题给她糖果，如果一个人的评分高于另一个孩子，他/她必须比另一个孩子获得更多的糖果。爱丽丝想省钱，所以她想总共只给糖果。

## 输入

输入的第一行是一个整数`N`，即 Alice 班级的孩子数。以下每一`N`行都包含一个整数，表示每个孩子的评分。

## 输出

在输出的唯一一行打印一个整数，描述爱丽丝必须提供的最小糖果数量。

## 样本输入

```
3
1
2
2 
```

## 样本输出

```
4 
```

## 解释

爱丽丝必须给的糖果数量是 1,2 和 1。

## 约束：

`N`每个孩子的评分不超过10^5。

谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-14T09:27:18.920

您可以分两次执行此操作。从每个人都有一颗糖果开始。

第一个循环 i 从 1 到 n-1（从零开始），如果 rating[i] > rating[i-1] then candies[i] = candies[i-1]+1

然后将 i 从 n-2 循环到 0；如果 rating[i] > rating[i+1] 那么 candies[i] = max(candies[i], candies[i+1]+1)

很容易证明这给了你一个有效的糖果分配，因为第二个循环不能破坏第一个循环所修复的任何东西，并且所有可能的评级差异必须被两个循环中的一个捕获。这将使用最少数量的糖果并不明显，但如果您仔细检查每个作业，您可以证明条件证明每个步骤所需的糖果数量（由特定个人）的下限。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-02T12:28:39.690

To make the analysis of this algorithm more interesting I will the following input:

```
9
2
3
4
4
4
2
1
3
4 
```

Firstly, notice if a kid sits next to a kid who is getting `x` candies and that kid has a lower rating then the first kid should get at least `x+1` candies. Making the difference more than 1 will just waste candies. The difference sometimes must be greater than 1, but I'll get to when that happens later.

Now on to finding the kids who should get only one candy. I visualise the ratings as a mountain range (The greater the rating the higher the mountains at that point) and finding the kids who should get one candy as finding valleys (points where both neighbours have a higher rating or **the same rating**) in the mountain range. The example given would look like (the valleys are indicated by the arrows):

```
 ***   *
 ****  **
****** **
*********
^  ^  ^ 
```

For the purpose of this process I assume there are 2 peaks of "infinite" height before the beginning and after the end of this line. (When I say infinite I just mean larger than any possible value in the input so you can just use `10^5+1` for "infinity". In practice, I'd use a value larger than that in case the problem setters have bugged input data.)

You can easily find the valleys using the following code:

```
ratings = ...
N = ...
valleys = []

def get_rating(i):
    if i < 0 or i > N-1:
        return INFINITY
    return ratings[i]

for i from 0 to N-1:
    if get_rating(i) <= get_rating(i-1) and get_rating(i) <= get_rating(i+1):
        valleys.append(i) 
```

The array `valleys` contains the indices of the valleys. We know each kid representing a valley should get one candy. For illustration assume the valley is at index 4\. Now we know the kids at index 3 and 5 should get at least 2 candies. If the kid at index 2 has a higher rating than the kid at index 3 that kid should get at least 3 candies. And so on for 2 and down. Similarly for 6 and up.

Note I say "at least", this is because of peaks (kids whose ratings are higher than both of their neighbour's, note unlike valleys I don't include equality in this definition). Peaks can have two minimum constraints and we simply choose the greater of the two.

Now we can find the number of candies each kid should get with the following code:

```
candies = [0] * N # An array of N 0s
for valley_idx in valleys:
    candies[valley_idx] = 1

    cur_idx = valley_idx-1
    cur_candies = 2
    while cur_idx >= 0 and ratings[cur_idx] > ratings[cur_idx+1]:
        candies[cur_idx] = max(candies[cur_idx], cur_candies)
        cur_idx -= 1
        cur_candies += 1

    cur_idx = valley_idx+1
    cur_candies = 2
    while cur_idx < N and ratings[cur_idx] > ratings[cur_idx-1]:
        candies[cur_idx] = max(candies[cur_idx], cur_candies)
        cur_idx += 1
        cur_candies += 1 
```

Then the number of candies the teacher needs to buy is the sum of the values in the `candies` array.

Doing this the answer turns out to be `18` for our sample input or in the form of a graph:

```
 * *   *
 ** ** **
********* 
```

### Solution to slightly altered problem statement

In the above solution I assumed that adjacent kids with the same rating don't place any restrictions on the amount of candy either should get with relation to the other. If it is instead the case that both kids need to get the same amount of candy we can quite easily alter the algorithm to take this into account.

The basic idea is that we do a sort of run length encoding, because we can notice that whether there are 1 or more kids in a row that have the same rating it doesn't alter the amount of candies their neighbours should get. We need to keep track of the number of kids in a row though since 5 kids in a row getting 5 candies means we have to dole out 25 candies and not just 5\. We do this with a `multipliers` array. Using the following code we find the new `ratings` array and the `multipliers` array:

```
new_ratings = [ratings[0]]
multipliers = [1]
for i from 1 to N-1:
    if ratings[i] == new_ratings[len(new_ratings)-1]:
        multipliers[len(new_ratings)-1] += 1
    else:
        new_ratings.append(ratings[i])
        multipliers.append(1) 
```

Now we just run the original algorithm on the `new_ratings` array and get a `candies` array. Then to get the actual amount of candies we can just run:

```
answer = 0
for i from 0 to len(new_ratings)-1:
    answer += multipliers[i] * candies[i] 
```

Doing this the answer turns out to be `20` for our sample input or in the form of a graph:

```
 ***   *
 ***** **
********* 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-02-24T21:53:57.030

我使用简单的DP方法来解决这个问题。如果您获得的评分大于前一个评分，则增加 DP 表中的第 i 个值，否则可能有两种情况。一个条件是前一个索引的 DP 值为 1，然后以相反的顺序遍历，直到您获得的值小于其下一个值并不断更新 DP。另一个条件是先前索引的 DP 值大于 1，在这种情况下，DP 中的当前索引被分配为 1。

```
for(int i=1; i <= n; i++){
    scanf("%d", ra+i);
    if( ra[i] > ra[i-1] )
        dp[i] = dp[i-1] + 1;
    else if( dp[i-1] == 1 ){
        dp[i] = 1;
        for( int j=i-1; j>0; j-- )
            if( ra[j] > ra[j+1] )
                dp[j] = max ( dp[j+1] + 1, dp[j] );
            else
                break;
    }       
    else
        dp[i] = 1;
}
long long sum = 0;
for(int i = 1;i <= n; i++)sum+= dp[i];
printf("%lld\n",sum); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-10-28T21:12:15.710

实际上这个问题可以通过在数组上传递两次来解决。解决方案将是 O(N) 时间。我通过使用 geeksforgeeks Trapping Rain Water ( [http://www.geeksforgeeks.org/trapping-rain-water/](http://www.geeksforgeeks.org/trapping-rain-water/) ) 问题解决了这个问题。同样的原则也适用于这个问题。

首先，我们有两个规则。- 每个学生至少得到 1 颗糖果。- 每个比他/她的邻居（下一个或上一个学生）评分更高的学生都会比他们至少多得到一个糖果。

正如我所说，我们需要两个通过数组。第一个是从左到右；- 首先我们会给第一个糖果分配一个糖果。- 然后通过检查当前学生是否有更大的评分来循环数组，然后给他一个比前一个学生多一个，否则给他 1 个糖果。

第二遍将是从右到左。- 这次我们首先将一颗糖果分配给最后一颗。- 然后从右到左循环数组并在第一个循环中执行类似的操作。

在这两个循环之后，我们将通过获取数组的最大值来循环左右，并将这个值添加到糖果总数中。

```
    测试用例 ：
    输入：{ 1, 2, 2 }
    输出：{ 1, 2, 1 } => 4
    输入：{ 9, 2, 3, 4, 4, 4, 2, 1, 3, 4 }
    输出：{ 2, 1, 2, 3, 1, 3, 2, 1, 2, 3 } => 20

```

您可以在下面找到针对此问题的 Java 解决方案。

 `````
public int calculate(int[] arr) {
    int m = arr.length;
    int[] left = new int[m];
    int[] right = new int[m];
    int candies = 0;
    left[0] = 1;
    for (int i = 1; i < m; i++)
        left[i] = arr[i] > arr[i - 1] ? left[i - 1] + 1 : 1;
    right[m - 1] = 1;
    for (int i = m - 2; i >= 0; i--)
        right[i] = arr[i] > arr[i + 1] ? right[i + 1] + 1 : 1;
    for (int i = 0; i < m; i++)
        candies += Math.max(left[i], right[i]);
    return candies;
} 
````  `* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-11-25T05:23:22.770

假设我们有

1, 5, 2, 10, 10 3, 8, 9 , 1 , 1, 2 作为 11 名 S1 至 S11 学生的评分

假设我们在 y 轴上绘制评分与学生的图表，然后

1.  局部最小值总是会得到一颗糖果，因此学生 S1、S3、S6、S9 和 S10 将是局部最小值并且会得到一颗糖果。我们可以通过说存在一个与我们所说的不同的最小解决方案（So）来争论，然后我们可以创建另一个解决方案（So1），其中所有学生都得到相同的糖果，而偏离的局部最小值得到一个糖果，那么 So1 将是最小值，因此不存在局部最小值获得大于 1 的糖果的最小解。

2.  一旦你得到了局部最小值，你就可以横向左右最小值来计算其他学生的糖果。

3.  对于局部最大值，其相邻节点 +1 的值将更大。工作代码如下，时间复杂度为 O(n)，空间复杂度为 O(n)

    ```
    public static int candy(ArrayList<Integer> a) {
        int size = a.size();
        int[] cand = new int[size];

        // give all children candies equal to 1
        // local minimas will get 1
        for(int i = 0; i < size; i++)
        {
            cand[i] = 1;
        }     
        // increase count on the right of local minimas
        for(int i = 1; i < size; i++)
        {
            if(a.get(i) > a.get(i-1))
            {
                cand[i] = cand[i-1]+1;
            }
        }
        // increase count on the left of local minimas
        // local maximas should be max of left and right
        for(int i = size-2; i >= 0; i--)
        {
            if(a.get(i) > a.get(i+1))
            {
                cand[i] = Math.max(cand[i], cand[i+1]+1);
            }

        }

        // get the sum
        int count = 0;
        for(int i = 0; i < size; i++)
        {
            count = count + cand[i];
        }
        return count;
    } 
    ```

您可以在 HackerEarth Problem 使用测试用例进行测试：[https ://www.hackerrank.com/challenges/candies](https://www.hackerrank.com/challenges/candies)

Leetcode：[https ://leetcode.com/problems/candy/](https://leetcode.com/problems/candy/)

你可以找到更详细的解释为什么这有效@http [://stackandqueue.com/ ?p=108](http://stackandqueue.com/?p=108)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-01-19T21:09:23.183

一个非常简单的实现

空间复杂度：O(n) 时间复杂度：O(n)

步骤1：开始从左到右遍历数组，并将值1分配给dp数组中的每个索引。

第2步：开始从左到右遍历数组，如果这个人得分更多，那么坐在他左边的那个人的dp就是dp[i-1]+1；

第 3 步：开始从右到左遍历数组，如果这个人得分更多，那么坐在他右边的那个人的 dp 将是 max(dp[i],dp[i+1]+1);

第 4 步：添加 dp 数组中的所有值。

```
#include<bits/stdc++.h>
using namespace std;
long int arr[100005];
long int dp[100005];
int main()
{
    int n,i;
    scanf("%d",&n);
    for(i=0;i<n;i++)
      scanf("%ld",&arr[i]);
    long int ans=0;
    dp[0]=1;
    for(i=1;i<n;i++)
         {
            if(arr[i]>arr[i-1])
                dp[i]=dp[i-1]+1;
            else
                dp[i]=1;
         }
      for(i=n-2;i>=0;i--)
      {
          if(arr[i]>arr[i+1])
            dp[i]=max(dp[i],dp[i+1]+1);
      }
     for(i=0;i<n;i++)
     {
         ans=ans+dp[i];
     }
    cout<<ans<<endl;
    return 0;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-05-12T21:50:18.217

也许是最简单的解决方案：

```
#include <cmath>
#include <cstdio>
#include <vector>
#include <iostream>
#include <algorithm>
using namespace std;

int main() {

int children;
int sum=0;

cin >> children;
int ratings[children];
int candies[children];

//give all children 1 candy to start
for(int i=0;i<children;++i)
{
     cin >> ratings[i];  
     candies[i] = 1;
}

//if the current child has a better rating than the child
//before him he is entitled to +1 greater candy than that child
for(int i=1;i<children;++i) 
{
     if(ratings[i] > ratings[i-1])
         candies[i] = candies[i-1]+1;
}

// work backwards to break any discrepancies ex.
// rating[5,4,3] -> candies[1,1,1] -> candies [1,1,1] -> candies [3,2,1]
// starting ratings  give everyone 1   first loop         second loop
for(int i=children-1;i>=0;--i)
{
     if(ratings[i] > ratings[i+1])
     {
          candies[i] = max(candies[i],candies[i+1]+1);   
     }
}

for(int i=0;i<children;++i)
{ 
     sum+=candies[i];
}

cout << sum;
return 0; 
```

}

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-11-27T19:24:52.423

我使用两个队列来存储未分配索引的递增和递减序列，并枚举相邻评分的所有可能情况，并在评分达到高原或底部时分配糖果（即当当前评分为局部最小值或与以前相同时）。

这是我的解决方案：

```
#include <iostream>
#include <cstdlib>
#include <cstdio>
#include <deque>

void assigncandies(std::deque<int>& incr, std::deque<int>& decr, unsigned int& total) {
  int incrlen = incr.size();
  int decrlen = decr.size();
  if (incrlen >= decrlen) {
    int num=incrlen;
    int last = incr.back();
    while(!incr.empty()) { 
      int idx = incr.back();
      total += num;
      incr.pop_back();
      num --;
    }
    if (!decr.empty()) {
      if (last == decr.front()) decr.pop_front(); 
      num=1;
      while(!decr.empty()) {
       int idx = decr.back();
        //candies[idx]=num;
        total += num;
        decr.pop_back();
          num ++;
      }
    }
  } else {
    int num=decrlen;
    int last = decr.front();
    while (!decr.empty()) {
      int idx = decr.front();
      //candies[idx]=num;
      total += num;
      decr.pop_front();
      num --;
    }
    if (!incr.empty()) {
      if (last == incr.back()) incr.pop_back();
      num=1;
      while(!incr.empty()) {
        int idx = incr.front();
        //candies[idx]=num;
        total += num;
        incr.pop_front();
          num ++;
      }
    }
  }
}

int main () {
  int N;
  unsigned int total=0;
  int PrevR, CurR, NextR;
  std::cin >> N;
  std::deque<int> incr;
  std::deque<int> decr;
  for (int i = 0; i<N;i++) {
    if (i==0) {
      std::cin>>CurR;
      std::cin >> NextR;
    } else if (i != N-1) std::cin >> NextR;

    if (i==0) {
      if (CurR>NextR) decr.push_back(0);
      else if (CurR<NextR) incr.push_back(0);
      else total=1;
    } else if (i==N-1) {
      if (PrevR<CurR) {
        incr.push_back(i);
      }
      if (PrevR>CurR) {
        decr.push_back(i);
      }
      if (PrevR==CurR) {
        total += 1;
      }
      assigncandies(incr,decr,total);
    } else {
      if (PrevR == CurR && CurR == NextR) {
        assigncandies(incr,decr,total);
        total += 1;
      }
      if (PrevR == CurR && CurR < NextR) {
        assigncandies(incr,decr,total);
        incr.push_back(i);
      }
      if (PrevR == CurR && CurR > NextR) {
        assigncandies(incr,decr,total);
        decr.push_back(i);
      }
      if (PrevR < CurR) {
        incr.push_back(i);
        if (CurR > NextR) decr.push_back(i);
      }
      if (PrevR > CurR && CurR >= NextR) {
        decr.push_back(i);
      }
      if (PrevR > CurR && CurR < NextR) {
        decr.push_back(i);
        assigncandies(incr,decr,total);
        total -= 1;
        incr.push_back(i);
      }
    }
    PrevR = CurR;
    CurR = NextR;
  }

  std::cout<<total<<std::endl;
  return 0;
} 
```

它通过了测试用例并且 3/10 用例正确，但其余部分我遇到了分段错误。
我想知道是否有人可以指出我的代码有什么问题。
非常感谢！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-09-13T17:24:58.183

我觉得这可能是可能的解决方案之一......

```
def candy(N,r):
    H=[0]*N
    R=r
    cur_can=1
    cand=[0]*N
    cand[0]=1
    #print R#,'\n',cand
    for i in range(0,N):
        if i!=0:
            #print R[i],'  ',R[i-1]
            if R[i]>R[i-1]:
                cand[i]=cand[i-1]+1
            else:
                cand[i]=1
##            print R[i],i
    sum=0
##    print i
    print cand
    for j in range(0,N):
        sum+=cand[j]
    return sum
r=[1,2,2,4,1,2,4]
N=len(r)
print candy(N,r) 
```

在 th 代码中用作样本的值的输出给出了 12 作为答案，这对我来说似乎是正确的......你怎么看？

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-09-23T03:12:48.400

我不认为这是一个非常困难的问题。如果你仔细想想，你会得到你自己的答案。

```
#include <iostream>
#include <queue>

using namespace std;

#define CALC(n) (n)+(n)*((n)-1)/2

struct PAIR {
int n;int up;//up=0,1,2; 0是升，1是平，2是降
public:
PAIR(int _n,int _u){
    n=_n;up=_u;
}
};

int N;

queue<PAIR> q;

int calc(int up,int p){
    if(up==1)
        return p;
    else {
        return p+p*(p-1)/2;
    }
}

int getType(int lc,int c){
    int up=-1;
    if(c>lc)
    up=0;
    else if(c==lc)
    up=1;
else
    up=2;
return up;
}

int main(int argc, const char * argv[])
{
scanf("%d",&N);
int lastChild,child,n=2;
long long result=0;
scanf("%d%d",&lastChild,&child);N-=2;
int up=getType(lastChild, child);
lastChild=child;
while (N--) {
    scanf("%d",&child);
    int tu=getType(lastChild, child);
    if(tu==up)
        n++;
    else {
        q.push(PAIR(n,up));
        n=2;
        up=tu;
    }
    lastChild=child;
}
q.push(PAIR(n,up));
q.push(PAIR(1,1));
/*其实主要就是看转折点是属于上一段还是当前段。
 如果是正V的话，转折点属于后一段。前一段的和-1.
 如果是倒V的话，转折点属于长的一段。
 然后是平的和别的有搭配的话，转折点属于别的
 */
PAIR lastp=q.front();q.pop();
while(q.size()){
    PAIR pir=q.front();q.pop();
    if(pir.up==1){
        result+=calc(lastp.up,lastp.n);//如果下一段是平的，就把转折点分到上一段
        pir.n-=1;
    }
    else if(lastp.up==1){
        result+=calc(lastp.up,lastp.n-1);//如果上一段是平的，就把转折点分到下一段
    } else if((lastp.up==0)&&(pir.up==2)){//如果是倒V型的，转折点属于长的
        if(lastp.n>pir.n){
            result+=calc(lastp.up,lastp.n);
            pir.n-=1;
        } else {
            result+=calc(lastp.up,lastp.n-1);
        }
    } else if((lastp.up==2)&&(pir.up==0)){//如果是正V型的，转折点属于后一个
        result+=calc(lastp.up,lastp.n)-1;
    } else {
        printf("WRONG!");
    }
    lastp=pir;
}
printf("%lld\n",result);
return 0;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-09-26T08:03:33.747

总结一下：

```
#include <vector>
#include <iostream>
using namespace std;

int main() {
    int N;
    cin>>N;
    vector<int> A(N,0),B(N,1);
    for(int i=0;i<N;++i) cin>>A[i];
    for(int i=0;i<N;++i) if(A[i]>A[i-1]) B[i]=B[i-1]+1;
    for(int j=N-2;j>=0;--j) if (A[j]>A[j+1]) B[j] = max(B[j], B[j+1]+1);
    int sum=0;
    for(int i=0;i<N;++i) sum+=B[i];
    cout<<sum<<endl;
    return 0;
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-08-10T12:34:17.260

1.`Ratings[]`使用给定的评级初始化。

2.我们先给`Candy`每个孩子1个。所以用 1 初始化所有成员`Val[]`。

3.现在遍历并检查两个相邻的孩子（`i + 1`和`i - 1`）是否满足条件。

4.继续这样做，直到我们得到一个条件永远不会被破坏的完整遍历。那我们就完成了！

```
bool done = false;
while (!done) 
{
    done = true;
    for (int i = 0 to i = Ratings.size() - 1) 
    {
        for (int k = 1 and k = -1) 
        {
            int adjacent = i + k;
            if (adjacent >= 0 && adjacent < N) 
            {
                if (Ratings[adjacent] > Ratings[i] && Val[adjacent] <= Val[i]) 
                {                       
                    Val[adjacent] = Val[i] + 1;
                    done = false;
                }
            }
        }
    }

} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-12-18T08:55:13.553

```
# this python code solves the problem for all test cases on interviewstreet

#!/usr/bin/python

if __name__ == "__main__":
N = int(raw_input().strip())
scores = []
for i in range(N):
    scores.append(int(raw_input().strip()))
nc = []
if(scores[0]>scores[1]):
    nc.append(-1)
    else:
    nc.append(0)
    for i in range(1,N-1):
        if (scores[i] > scores[i-1]) and (scores[i]>scores[i+1]):
        nc.append(2)
    elif (scores[i] > scores[i-1]):
        nc.append(1)
    elif (scores[i]>scores[i+1]):
        nc.append(-1) 
    else:
        nc.append(0)

    if(scores[N-1]> scores[N-2]):
        nc.append(1)
    else:
    nc.append(0)

    noc = []
    for i in range(N):
    noc.append(0)

    for i in range(N):
    if(nc[i]==0):
            noc[i] = 1

    for i in range(N):
    if(nc[i]==1) and (noc[i-1]!=0):
        noc[i] = noc[i-1]+1 

    for i in range(N-1,-1,-1):
    if(nc[i]==-1) and (noc[i+1]!=0):
        noc[i] = noc[i+1]+1

    for i in range(N):
    if(nc[i]==2) and (noc[i-1]!=0) and (noc[i+1]!=0):
        noc[i] = max((noc[i-1],noc[i+1]))+1 
    nt = sum(noc)

    print nt 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-01-18T20:51:23.363

想想这些可能的评级配置：1 2 3 4 5 或任何递增序列和 5 4 3 2 1 或任何递减序列

在第一种情况下可以做什么？1 2 3 4 5 是在第二种情况下分配的糖果 5 4 3 2 1

可以通过从左到右扫描阵列并识别增加的间隔并从右到左扫描并再次识别增加的间隔并在此过程中分配最少数量的糖果来获得解决方案。具体细节请看代码：

```
#include <stdio.h>
#include <algorithm>
using namespace std;

#define N 100000

int c[N];
int val[N];

int solve(int n)
{
  int res=n;
  int i=0,value=0;
  while(i<n)
  {
    value=0;
    i+=1;
    while(i<n && c[i]>c[i-1])
    {
      value+=1;
      val[i]=value;
      i+=1;
    }
  }

  i=n-1;
  while(i>=0)
  {
    value=0;
    i-=1;
    while(i>=0 && c[i]>c[i+1])
    {
      value+=1;
      val[i]=max(val[i],value);
      i-=1;
    }
  }

  for(i=0;i<n;++i) res+=val[i];

  return res;
}

int main()
{
  int n,i;
  scanf("%d",&n);
  for(i=0;i<n;++i) scanf("%d",&c[i]);
  printf("%d\n",solve(n));
  return 0;
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-11-19T11:26:20.190

```
AS mentioned by others,scanning left to right and then right to left,and getting max candies used at certain postion is working.

Before this, i used other way,which seemed to be working and i checked it with many different inputs,although i couldnt clearly write it in code,Here is the Algo:

Algorithm:
1.Use an int[]index array  and store all the indexes in the sorted value of thie ranks.

so here
int values[]=9 2 3 6 5 4 3 2 2 2
so index sorted array would be
int index[]= 1 7 8 9 2 6 5 4 3 0

now int[] result=new result[10];
and initialize it with -1.

sending each value from index[]in the order and make sure that each one is satifying the given condtions.
that

i=index;
while(i>=0)
{
if(i-1>=0 && arr[i]>arr[i-1])
break;
if(i-1>=0 && arr[i]<arr[i-1])
result[i-1]=result[i]+1;
else
if(i-1>=0 && arr[i]==arr[i-1])
 result[i-1]=1
 i--;
}

//similary towards the right

i=index;
while(i<arr.length)
{
if(i+1<arr.length && arr[i]>arr[i+1])
break;
if(i+1<arr.length && arr[i]<arr[i+1])
 result[i+1]=1+result[i];
else
if(i+1<arr.length && arr[i]==arr[i+1])
 result[i+1]=1

 i++;
}

so result array will be like this for index 1

2 1 2 3 - - - - - -

then for index 7
2 1 2 5(its modifed from 3) 4 3 2 1 1

followe by indeices :8 9 2 6 5 4 3 0 

which all satifies the condtion and more modification occurs in this case..so total number of candies =22 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-05-14T07:31:14.687

以数组作为输入的简单工作代码，采用 Java 语言。时间复杂度：O(n)。

```
import java.util.Arrays;
public class MyClass {
    public static void main(String[] args) {
        int []childrenRating = {9, 8, 7, 10, 11, 12, 14, 1, 5};
        int []expectedDistribution = {3, 2, 1,  2,  3,  4,  5, 1, 2};
        int []resultingDistribution = new int[childrenRating.length];
        int v = 1;
        int k, j = 0;
        while(j < childrenRating.length){
            k = j;
            if(k >0 && childrenRating[k] == childrenRating[k-1]) { v=1; } 
            resultingDistribution[k] = v;
            while(j+1 < childrenRating.length && childrenRating[j+1] < childrenRating[j]){
                j++;
            }
            v = 1;
            for(int i = j; i > k; i--){
                resultingDistribution[i] = v++; 
            }
            resultingDistribution[k] = Math.max(resultingDistribution[k], v);
            j++;
            v = resultingDistribution[j-1]+1;
        }
        if(Arrays.equals(expectedDistribution, resultingDistribution)) {
            System.out.println("Correct Distribution");
        }
        else {
            System.out.println("Wrong Distribution!");
        }
    }
} 
`````

# c# - 为什么 Process.StandardInput.WriteLine 不向我的流程提供输入？

> ID：11292917
> 
> 赞同：4
> 
> 时间：2012-07-02T11:40:06.590
> 
> 标签：c#, c, input, process

这是我在这里的第一个问题，所以我会尽可能详细。我目前正在开发一个 C# 程序（我们将其称为 TestProgram），该程序测试用 C 编写的不同程序（我将其称为 StringGen）。TestProgram 应该在命令窗口中运行 StringGen，然后为其提供一组输入字符串并记录每个字符串的输出。当 StringGen 运行时，它会启动一个等待输入的 while 循环，将该输入提交给处理函数，然后返回结果。

我的问题来自于我尝试让 TestProgram 向 StringGen 提交一个字符串。我将 StringGen 作为一个进程启动，并尝试使用 Process.StandardInput.WriteLine() 为其提供输入，然后使用 Process.StandardOutput.ReadLine() 查找输出。在进一步阐述之前，我将提供一些代码。

这是 StringGen 的主要功能：

```
int main() {
    char result[255];
    char input[255];

    do {
        fgets(input, 100, stdin);
        result = GetDevices(input); //Returns the string required
        printf("%s", result);
    } while (input != "quit");

    return 0;
} 
```

这是我将 StringGen 定义为进程的 C# 代码：

```
Process cmd = new Process();

ProcessStartInfo info = new ProcessStartInfo(command, arguements); // Command is the path to the C executeable for StringGen
info.WorkingDirectory = workingDirectory; // Working Directory is the directory where Command is stored
info.RedirectStandardInput = true;
info.RedirectStandardOutput = true;
info.RedirectStandardError = true;
info.UseShellExecute = false;
cmd.StartInfo = info;
cmd.Start(); 
```

然后我继续使用这个过程：

```
using (var cmd)
        {
            // Loop through the input strings
            String response;

            foreach (exampleString in StringSet) // Loops through each string
            {
                cmd.StandardInput.WriteLine(exampleString.text); // This is the problem line
                response = cmd.StandardOutput.ReadLine(); // System comes to a halt here
                cmd.StandardOutput.Close();
                if (response == "Something")
                {
                     // Do this
                }
                else
                {
                     // Do that
                }
            }
       } 
```

WriteLine 命令似乎没有向 StringGen 提供任何输入，因此系统在 ReadLine 处挂起，因为 StringGen 没有返回任何输出。我试过在命令行运行 StringGen，它工作正常，从键盘输入并输出正确的字符串。我已经尝试了我能想到的所有东西，并在整个网站上进行了搜索，其他人也试图找到解决方案，但这种代码的每个示例似乎对其他人都适用。我看不出我做错了什么。如果有人能建议一种方法，我可以从 TestProgram 向我的 StringGen 程序提交输入，我将不胜感激。如果我遗漏了任何重要内容或有任何不清楚的地方，请告诉我。

注意：我在 StringGen 中尝试过 scanf 和 fgets，两者都产生相同的结果。

我尝试使用带有 WriteLine() 的文字字符串，但仍然没有输入。

我曾尝试在 TestProgram 中使用 Write() 和 Flush() 但无济于事。

我试图关闭（）输入缓冲区以强制刷新，但这也没有效果。

我对 C# 不太熟悉，因为我正在编辑其他人的代码以在 StringGen 上执行测试。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T12:15:55.460

我认为问题出在您的 C 程序中，而不是在您的 C# 程序中。当你产生你的输出时，你不会把它放在`\n`最后。因此`StandardOutput.ReadLine()`将永远等待，因为流中没有行尾标记。

由于 C 程序的输出用于同步协作程序的步骤，因此在等待下一部分输入之前将其刷新到输出也是一个非常好的主意：

```
printf("%s\n", result);
fflush(stdout); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T12:36:16.457

您的 C# 代码似乎很好，我用另一个 C# 程序尝试过：

```
static void Main(string[] args)
{
    String line = Console.ReadLine();
    Console.WriteLine("I received " + line);
} 
```

以下代码输出“我收到了 Hello world！”。所以问题一定出在你的 C 代码中。正如 dasblinkenlight 已经提到的，新行符号可能会丢失。

```
static void Main(string[] args)
{
    Process cmd = new Process();

    ProcessStartInfo info = new ProcessStartInfo(@"AnotherApp.exe", "");
    info.WorkingDirectory = @"path\to\folder";
    info.RedirectStandardInput = true;
    info.RedirectStandardOutput = true;
    info.RedirectStandardError = true;
    info.UseShellExecute = false;
    cmd.StartInfo = info;
    cmd.Start();

    cmd.StandardInput.WriteLine("Hello world!");

    String output = cmd.StandardOutput.ReadLine();
    Console.WriteLine(output);

    Console.ReadKey();
} 
```

# .net - DNN皮肤中的表格不起作用

> ID：11292920
> 
> 赞同：0
> 
> 时间：2012-07-02T11:40:17.007
> 
> 标签：.net, dotnetnuke, dotnetnuke-module

我正在使用 dnn6.1，我有一个皮肤，我在该皮肤中创建了模块。我的问题是我没有在该皮肤中获取文本框值。

那个皮肤里有一个cde，比如

```
 <li>
  <form action="http://letmegooglethat4u.com/" method="GET">
  <input type="text" name="q" value="" placeholder="Type then press Enter.." />
  </form>
 </li> 
```

当我删除这个特定的代码片段时，它的工作意味着文本框值在代码后面。我的问题是当我们在 DNN 中使用表单标签时有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:29:16.257

您不能在 DNN 模块内容中嵌入表单。

您必须重新编写它以做不同的事情，例如我如何根据[这篇博客文章](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CGMQFjAA&url=http://www.webstrategiesinc.com/blog/how-to-add-a-paypal-form-to-dnn/&ei=RszxT-TuCIH28gTX3PG6DQ&usg=AFQjCNFEiDsosciPaemImlRh4vcLCl2p0w&sig2=DasoboQdEy0Vb_FaxN0amg)处理某些事情。

或者 iFrame 一个表格。

# magento - 无需登录即可调用 Magento Soap API

> ID：11292925
> 
> 赞同：1
> 
> 时间：2012-07-02T11:40:35.740
> 
> 标签：magento

有没有办法绕过magento中soap api调用的登录。我只想基于过滤器以 XML 格式显示产品列表。该信息是公开的，不需要登录。额外的登录导致 API 调用非常慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:44:29.847

SOAP 登录旨在禁止其他服务以易于使用的格式获取您站点的公共数据。

即使数据是公开的，您也可能不希望其他人：

*   在您自己的产品上与您竞争；
*   用繁重的操作加载您的服务器，这可能会减慢用户的整个站点速度；

# c++ - 为什么_CrtDumpMemoryLeaks 在这里报告内存泄漏？

> ID：11292930
> 
> 赞同：5
> 
> 时间：2012-07-02T11:40:57.207
> 
> 标签：c++, memory-leaks, visual-studio-2012

我想在 DEBUG 模式下检查内存泄漏。[我使用 Windows，并使用函数_CrtDumpMemoryLeaks](http://msdn.microsoft.com/en-us/library/d41t22sb(v=vs.110).aspx)来完成这项工作。

现在，为什么这段代码会发现内存泄漏？

```
#include <Windows.h>
#include <iostream>

int main()
{
    if(_CrtDumpMemoryLeaks() == TRUE)
        std::cerr << "MEMORY LEAK!" << std::endl;

    return 0;
} 
```

## 编辑：

我将此代码添加到将输出定向到控制台：

```
_CrtSetReportMode( _CRT_WARN, _CRTDBG_MODE_FILE );
_CrtSetReportFile( _CRT_WARN, _CRTDBG_FILE_STDOUT );
_CrtSetReportMode( _CRT_ERROR, _CRTDBG_MODE_FILE );
_CrtSetReportFile( _CRT_ERROR, _CRTDBG_FILE_STDOUT );
_CrtSetReportMode( _CRT_ASSERT, _CRTDBG_MODE_FILE );
_CrtSetReportFile( _CRT_ASSERT, _CRTDBG_FILE_STDOUT ); 
```

输出是：

![在此处输入图像描述](../Images/303774202f97db5f0ea2a1e7999a3513.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:57:12.967

你包括了`<crtdbg.h>`吗？

你确定你在调试模式下运行吗？

在非调试模式下 - 调用`_CrtDumpMemoryLeaks()`被预处理器删除，只剩下`if(TRUE)`

编辑：还要检测内存泄漏，您需要添加以下行以使用 malloc 和 free 的调试版本 - 请参见[此处](http://msdn.microsoft.com/en-us/library/e5ewb1h3%28v=vs.80%29.aspx)。你可以尝试添加这些吗？

```
#define _CRTDBG_MAP_ALLOC
#include <stdlib.h>
#include <crtdbg.h> 
```

# c# - 无法阻止详细跟踪日志在 Windows Azure 上传送

> ID：11292932
> 
> 赞同：3
> 
> 时间：2012-07-02T11:41:01.477
> 
> 标签：c#, logging, azure, azure-diagnostics

我们使用 Windows Azure 诊断监视器跟踪侦听器将跟踪日志发送到 Azure 诊断。由于我们有大量详细日志，因此我们决定停止将这些日志发送到 Azure 诊断，以进行简单的调试。

但是，当我们设置`ScheduledTransferLogLevelFilter`属性时，Azure 诊断似乎会忽略它；所以所有`Verbose`的日志仍然发货。

我们使用的配置部分是：

```
<system.diagnostics>
    <trace>
        <listeners>
            <add type="Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener, Microsoft.WindowsAzure.Diagnostics, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
                name="AzureDiagnostics">
                <filter type="" />
            </add>
        </listeners>
    </trace>
</system.diagnostics> 
```

虽然代码是：

```
var config = DiagnosticMonitor.GetDefaultInitialConfiguration();

config.Logs.ScheduledTransferLogLevelFilter = LogLevel.Information;
config.Logs.ScheduledTransferPeriod = TimeSpan.FromMinutes(1d);

DiagnosticMonitor.Start(CONNECTION_STRING, config); 
```

有没有其他人遇到过这个问题？是否需要设置额外的一组配置值来阻止跟踪日志发送详细条目？

编辑：

Avkash Chauhan 让我走上了正轨；您需要显式保存配置；最终代码看起来像这样并且按预期运行。

```
public static void StartLogging()
{
    var cloudStorageAccount = 
        CloudStorageAccount.Parse(RoleEnvironment.GetConfigurationSettingValue(DEFAULT_CONNECTION_STRING));

    var roleInstanceDiagnosticManager =
        cloudStorageAccount.CreateRoleInstanceDiagnosticManager(
            RoleEnvironment.DeploymentId,
            RoleEnvironment.CurrentRoleInstance.Role.Name,
            RoleEnvironment.CurrentRoleInstance.Id);

    var config = roleInstanceDiagnosticManager.GetCurrentConfiguration();

    config.Logs.ScheduledTransferLogLevelFilter = LogLevel.Information;
    config.Logs.ScheduledTransferPeriod = TimeSpan.FromMinutes(1d);

    roleInstanceDiagnosticManager.SetCurrentConfiguration(config);

    // Start the diagnostic monitor with the modified configuration.
    DiagnosticMonitor.Start(DEFAULT_CONNECTION_STRING, config);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T18:30:50.887

我相信您没有正确保存配置设置，这可能会导致问题。在过去，我已经看到，如果您不将 SetCurrentConfiguration() 与配置对象一起使用，则不会保存设置，因此当诊断监视器运行时，您将看不到效果。尝试添加 SetCurrentConfiguration() 以检查是否是这种情况。

# c++ - C++ 函数中的复杂参数 - 指针、引用或...？

> ID：11292936
> 
> 赞同：0
> 
> 时间：2012-07-02T11:41:18.333
> 
> 标签：c++, function, pointers, reference, parameters

我有代码：

```
class Vector3D : public Vector{
protected:
    Point3D * start;
    Point3D * end;

public:
    ~Vector3D(){delete start; delete end;}
    Vector3D(Point3D * start, Point3D * endOrLength, bool fromLength){
        this->start = start;
        if(fromLength){
            this->end = new Vector3D(*start+*endOrLength); //the operator '+' is defined but I won't put it here,
            //because it's not important now
        }else
            this->end = endOrLength;
    }

    Point3D * getStart(){return start;}
    Point3D * getEnd(){return end;}
}; 
```

现在，我有代码：

```
Vector3D v(new Point3D(1,2,3), new Point3D(2,3,4), 0); //FIRST CREATION
Vector3D v(new Point3D(1,2,3), new Point3D(1,1,1), 1); //SECOND CREATION 
```

第一次和第二次创建给了我相同的 Vector3D，但我认为它可能会产生内存泄漏。

是真的吗？**以及如何解决？**我想这样做并不优雅：

```
...
if(fromLength){
    this->end = new Vector3D(*start+*endOrLength);
    delete endOrLength;
}else
... 
```

也许最好放 const Point3D &endOrLenght，**我不知道有什么好方法？**与 getStart/getEnd 相同 -**它是否应该返回指针**：

```
Point3D * getStart(){return start;} 
```

**或者只是变量**：

```
Point3D getStart()(return *start) 
```

**?**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T11:52:04.837

首先，我不会像 3d 点那样动态分配值对象。只需使用值，这可能会为您节省很多麻烦。其次，如果你有两种方法来构造你的向量，只需提供两个不同的构造函数：

```
class Vector3D {
public:
    Vector3D( const Point3D& s, const Point3D& e )
      : start( s )
      , end( e )
    {
    }

    Vector3D( const Point3D& s, const Vector3D& v )
      : start( s )
      , end( s + v )
    {
    }
}
private:
    Point3D start;
    Point3D end;
}; 
```

拥有一个根据函数参数执行两种不同操作的函数从调用方甚至难以理解。很难记住最后的 1 或 0 有什么用。

亲切的问候，托斯滕

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T11:47:28.063

您在此处编写代码可能不是处理此问题的最佳方式，而是直接解决您的问题：

```
Vector3D(Point3D * start, Point3D * endOrLength, bool fromLength){
    this->start = start;
    if(fromLength){
        this->end = new Vector3D(*start+*endOrLength); // I think you mean to use endOrLength here and not length.
        if (endOrLength)
            delete endOrLength;
    }else
        this->end = endOrLength;
} 
```

* * *

我认为解决您的问题的更好方法是使用智能指针，最好的解决方案是查看是否可以替换指针。

```
class Vector3D : public Vector
{
protected:
    Point3D _start;
    Point3D _end;

public:
    Vector3D(const Point3D& start, const Point3D& endOrLength, bool fromLength) :
    _start(start),
    _end(fromLength ? Vector3D(start + endOrLength) : endOrLength)
    {
    }

    const Point3D& getStart() const { return _start; }
    const Point3D& getEnd() const { return _end; }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T11:44:00.597

我认为正确的方法是：

```
Vector3D(const Point3D& start, const Point3D& endOrLength, bool fromLength) 
```

这样，所有权就没有歧义。此外，成员可能不应该是指针，否则这可能会导致悬空指针，而是数据成员。

或者更好的是智能指针。

如果使用智能指针，则可以从 get 函数返回智能指针。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T12:15:26.007

您的设计可能看起来效率较低，因为它的本质（每个元素都是孤立的）倾向于违反操作的局部性。在在一起的事物之间进行复制可能比对稀有事物的取消引用操作更有效。

而且由于您的向量只是 .... 2*3 数字，因此请避免动态内存的所有复杂性，而只需使用正常值语义。

如果您到达更大尺寸的对象（例如 3d 投影矩阵，可能有多达 16 个系数），请考虑仅将动态内存处理到类内部的想法。在你的情况下，这可以是

```
class Vector3d
{
    struct data
    { Point3d start, end; };

    Vector3d() :dp(new data) {}
    Vector3d(const Point3d& a, const Point3d& b) :p(new data({a,b})) {}

    Vector3d(const Vector3d& a) :p(new data(*a.p)) {}
    Vector3d(Vector3d&& a) :p(a.p) { a.p=nullptr; }
    Vector3d& operator=(Vector3d a) { delete p; p=a.p; a.p=nullptr; return *this; }
    ~Vector3d() { delete p; }

    const Poin3d& start() const { return p->start; }
    const Poin3d& end() const { return p->end; }

    //here define the compound assignment arithmetic
    //e.g.:
    Vector3d& operator+=(const Point3d& ofst)
    { p->start += ofst; p->end += ofst; return *this; }

    //alternativelly you can define assign in term of arithmetic
    Vector3d& operator-=(const Poinr3d& ofst)
    { *this = *this - ofst; return *this; } //will create a temporary that will be moved

private:
    data* p;
};

//and here define the point3d, vectopr3d and mixed arithmetic
//e.g.:
Vector3d operator+(Vector3d a, const Point3d& s)
{ a += s; return std::move(a); }

//this follow the alternative example
Vector3d operator-(const Vecotr3d& a, const Point3d& s)
{ return Vector3d(a.start()-s, a.end()-s); } 
```

通过这种方式，动态内存的所有管理以及副本的生成（在需要时）或移动（在可能的情况下）都留在了类中。其他一切都适用于标准值语义。

注意：我假设 Poin3d 有 += -= + 和 - 定义....

# liferay-6 - 如何关闭 Liferay.util.openWindow 弹出窗口？

> ID：11292939
> 
> 赞同：5
> 
> 时间：2012-07-02T11:41:34.687
> 
> 标签：liferay-6

我使用以下代码在弹出窗口上加载 WebContent 编辑 portlet：

```
<liferay-ui:icon 
    image="edit" 
    message="Edit" 
    url="<%= editUrl %>"
/> 
```

editUrl 的值为：

```
editUrl = "javascript:Liferay.Util.openWindow({ 
dialog:{
    width: 960, 
    modal:true, 
    destroyOnClose: true
}, 
id: '" + liferayPortletResponse.getNamespace() + "', 
title: '" + article.getTitle(Locale.UK, true) + "', 
uri:'" + HtmlUtil.escapeURL(editPortletURLString) + "'});"; 
```

保存或发布内容时，将在弹出窗口中加载 portlet。我希望关闭弹出窗口并刷新带有 editURL 链接的 portlet。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T06:06:42.550

**只有在**编辑成功并且弹出窗口被刷新时，您才能从弹出窗口中调用以下 javascript 函数：

```
Liferay.provide(
        window,
        'closePopUpAndRefreshPortlet',
        function(customPopUpId) {

            var A = AUI();

            A.DialogManager.closeByChild('#' + customPopUpId);

            var curPortletBoundaryId = '#p_p_id<portlet:namespace />';

            Liferay.Portlet.refresh(curPortletBoundaryId);
        },
        ['aui-dialog','aui-dialog-iframe']
    ); 
```

**解释**

`id: '" + liferayPortletResponse.getNamespace() + "'`通过将弹出窗口的 提供给`DialogManager`'`closeByChild`函数将关闭弹出窗口。

Liferay 已经定义了一个通过ajax 刷新portlet 的实用方法，因此您可以将portlet 传递`<div id="p_p_id_MyWCDPortlet_">`给`refresh`函数。

因此，在成功更新后刷新弹出窗口时，如果您调用该函数`closePopUpAndRefreshPortlet("customPopUpID")`，它首先会自行关闭，然后刷新`<div>`包含 portlet 的父级。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-09T08:33:11.993

此页面可能会有所帮助 -[如何在 Liferay 6.2 中关闭对话框 IFrame](http://www.marconapolitano.it/en/liferay/41-how-to-close-a-dialog-iframe-in-liferay-6-2.html)

如果您像这样定义模态窗口（假设在**view.jsp**中）：

```
<aui:button name="openDialog" type="button" value="open-dialog" />

    <liferay-portlet:renderURL var="dialogURL" windowState="<%=LiferayWindowState.POP_UP.toString() %>">
        <liferay-portlet:param name="mvcPath" value="/dialog.jsp" />
    </liferay-portlet:renderURL>
    <aui:script use="liferay-util-window">
    A.one('#<portlet:namespace/>openDialog').on('click', function(event) {
        Liferay.Util.openWindow({
            dialog: {
                centered: true,
                height: 300,
                modal: true,
                width: 400
            },
            id: '<portlet:namespace/>dialog',
            title: '<liferay-ui:message key="i-am-the-dialog" />',
            uri: '<%=dialogURL %>'
        });
    });
</aui:script> 
```

**并在对话框页面（ dialog.jsp** ）内创建按钮触发器（或在您的情况下为 onsubmit 事件侦听器）：

```
<aui:button name="closeDialog" type="button" value="close" />

<aui:script use="aui-base">
    A.one('#<portlet:namespace/>closeDialog').on('click', function(event) {
        // Let's suppose that "data" contains the processing results
        var data = ...
        // Invoke a function with processgin results and dialog id
        Liferay.Util.getOpener().<portlet:namespace/>closePopup(data, '<portlet:namespace/>dialog');
    });
</aui:script> 
```

您将通过 getOpener() 函数获得打开对话框的窗口。在创建对话框 ( **view.jsp** ) 的页面中，您必须像这样提供 closePopup 函数：

```
<aui:script>
    Liferay.provide(
        window,
        '<portlet:namespace/>closePopup',
        function(data, dialogId) {
            var A = AUI();

            // Here you can use "data" parameter

            // Closing the dialog
            var dialog = Liferay.Util.Window.getById(dialogId);
            dialog.destroy();
        },
        ['liferay-util-window']
    );
</aui:script> 
```

# c# - 在asp.net c#中使用SQL Server存储过程输出

> ID：11292940
> 
> 赞同：4
> 
> 时间：2012-07-02T11:41:39.337
> 
> 标签：c#, asp.net, sql-server, stored-procedures, ado.net

我是使用存储过程的新手。

我们有一个现有的系统，它使用检查用户名和 url 路径的存储过程。存储过程将检查用户详细信息是否存在。如果存在则返回 1，如果不存在则返回 0。

我正在尝试编写 asp.net 代码来调用此存储过程，方法是为其提供用户详细信息和路径，然后在 asp.net 中使用返回的 0 或 1 值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T11:57:44.317

看起来您需要带有输出参数的存储过程

```
int errorId = 0;

using(SqlConnection sqlConnection = new SqlConnection(connectionString))
{
    using(SqlCommand cmd = new SqlCommand("YourStoredProcedureName", sqlConnection))
    {
    cmd.CommandType=CommandType.StoredProcedure;
    SqlParameter parm=new SqlParameter("@username", SqlDbType.VarChar); 
    parm.Value="mshiyam";
    parm.Direction =ParameterDirection.Input ; 
    cmd.Parameters.Add(parm); 

    SqlParameter parm2=new SqlParameter("@path",SqlDbType.VarChar); 
    parm2.value = "Some Path";
    parm2.Direction=ParameterDirection.Output;
    cmd.Parameters.Add(parm2); 

    SqlParameter parm3 = new SqlParameter("@errorId",SqlDbType.Int);
    parm3.Direction=ParameterDirection.Output; 
    cmd.Parameters.Add(parm3); 

    sqlConnection.Open(); 
    sqlConnection.ExecuteNonQuery();

    errorId = cmd.Parameters["@errorId"].Value; //This will 1 or 0
   }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T11:57:27.657

使用以下代码，

```
SqlCommand cmd = new SqlCommand("MyStoredProcedure", cn);
cmd.CommandType=CommandType.StoredProcedure;
SqlParameter parm=new SqlParameter("@username",SqlDbType.VarChar);
parm.Value=strUser;
parm.Direction =ParameterDirection.Input ; 
cmd.Parameters.Add(parm); 
parm=new SqlParameter("@url",SqlDbType.VarChar);
parm.Value=strUrl;
parm.Direction =ParameterDirection.Input ; 
cmd.Parameters.Add(parm); 
parm=new SqlParameter("@errorID",SqlDbType.Int); 
parm.Direction=ParameterDirection.Output; // This is important!
cmd.Parameters.Add(parm); 
cn.Open(); 
cmd.ExecuteNonQuery();
cn.Close(); 

// Print the output value
Console.WriteLine(cmd.Parameters["@errorID"].Value); 
Console.ReadLine(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T13:20:33.053

```
int errorId = 0;

SqlCommand cmd = new SqlCommand("YourSPName", cn);
cmd.CommandType=CommandType.StoredProcedure;
SqlParameter parm=new SqlParameter("@username",SqlDbType.VarChar);
parm.Value=strUser;
parm.Direction =ParameterDirection.Input ; 
cmd.Parameters.Add(parm); 
parm=new SqlParameter("@url",SqlDbType.VarChar);
parm.Value=strUrl;
parm.Direction =ParameterDirection.Input ; 
cmd.Parameters.Add(parm); 
parm=new SqlParameter("@errorID",SqlDbType.Int); 
parm.Direction=ParameterDirection.Output; // This is important!
cmd.Parameters.Add(parm); 
cn.Open(); 
errorId = (int)cmd.ExecuteNonQuery();
cn.Close(); 

sqlConnection.Open(); 
sqlConnection.ExecuteNonQuery(); 
```

放置条件：

```
if(errorId == 1)
{
   `"Allow User here"`
}
if(errorId==0)
{
   `Redirect when you to redirect to use.`
} 
```

# java - 不鼓励在 Web 应用程序中使用线程吗？

> ID：11292941
> 
> 赞同：5
> 
> 时间：2012-07-02T11:41:53.960
> 
> 标签：java, multithreading, web-applications

我们与同事就在 Java 的 Web 应用程序中使用线程进行了一次大讨论。

他们的观点是不建议在 Java Web 应用程序中使用线程，因为它们不是由容器管理的。一般来说，我可以接受，因为线程可能会干扰容器。但是，如果它不是一个 Java EE 应用程序而是一个简单的 servlet-app，那么应该用什么来代替它呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-02T11:52:55.633

在 webapp 中使用线程本身不是问题。这仅取决于您使用它们的原因和方式。特别是，如果您有 1000 个用户，并且为每个用户启动一个线程，那么您将让 JVM 崩溃。

但是，如果线程很少启动，对于特定的、减少的用户和用例集，并且如果您使用线程池来限制此类线程的数量，那么您应该没有任何问题。了解你在做什么很重要。

另外，请确保不要将 HttpServletRequest 或 HttpServletResponse 对象传递给这样的线程，因为它们不打算由多个并发线程使用，并且一旦处理了请求，它们就不应再使用了。

# ruby-on-rails - 如何在 Helper 文件方法中访问字段搜索参数

> ID：11292943
> 
> 赞同：1
> 
> 时间：2012-07-02T11:42:01.857
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的帮助文件中有这个方法

```
def created_on_column(record)
  p params[:search]
end 
```

当我尝试打印时`params[:search]`，但将其打印为`nil`.

有没有办法`params[:search]`在助手中访问变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:49:14.153

我认为您不是在这里尝试进行调试打印（并且使用`p`也是错误的方法）。

也许你只需要这个：

```
def created_on_column(record)
  params[:search]
end 
```

此代码将返回值`params[:search]`而不是将其打印到标准输出并返回`nil`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:56:29.917

这很奇怪，`params`可以提供给助手。你可以试试：

```
def created_on_column(record)
  p request.parameters[:search]
end 
```

或`params`调用时通过`created_on_column`

```
def created_on_column(record, params)
  p params[:search]
end 
```

# android - 单击编辑文本时上推内容

> ID：11292950
> 
> 赞同：60
> 
> 时间：2012-07-02T11:42:15.323
> 
> 标签：android

我到处寻找解决问题的方法，但找不到答案。这就是问题所在。

我有一个看起来像这样的布局

![图片在这里](../Images/a0eac6202a34d9d82f98e70f62564f04.png)

现在，当我单击编辑文本（搜索栏）时，我希望发生以下情况

![图片在这里](../Images/aa63d085781b7621cf161376502fd7d8.png)

软键盘基本上需要将整个屏幕内容向上推，使搜索栏在顶部，其列表视图在其下方，以便在搜索内容时显示结果。我尝试在清单中设置`android:windowSoftInputMode="adjustPan"`，`Activity`但这不起作用。我将滚动视图设置为包含片段的主布局中的主容器，但这也不起作用。我尝试将编辑文本（搜索栏）作为标题添加到列表视图，但这也不起作用。每次键盘向上推编辑文本但覆盖列表视图。有什么办法可以使这项工作？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2015-01-18T17:17:46.123

实际上，如果您希望整个布局向上平移，则应该使用：

SOFT_INPUT_ADJUST_PAN

意义：

```
getActivity().getWindow().setSoftInputMode(
                WindowManager.LayoutParams.SOFT_INPUT_ADJUST_PAN); 
```

这将使键盘保持关闭状态，打开时它将推动您的整个活动。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-04-17T10:12:42.103

这可以在片段类中用于向上移动编辑文本并滚动到最后。

```
getActivity().getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_VISIBLE|WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE); 
```

如果您的 Fragment Activity 主题不在全屏中，这肯定会起作用。

希望这会有所帮助！

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-06-14T14:26:22.507

这对我有用。

```
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_VISIBLE|WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-12-19T18:11:04.487

我遇到了类似的问题，解决方案很简单。

如果活动中的主题设置为 Fullscreen `@android:style/Theme.Holo.NoActionBar.FullScreen`，则键盘没有向上推动内容。

在我将活动更改为 后`@android:style/Theme.Holo.NoActionBar`，键盘现在将活动内容向上推。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-10-16T15:08:48.177

尝试这个

```
android:windowSoftInputMode="adjustResize" 
```

为我工作。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2012-07-02T12:29:20.130

Try `android:windowSoftInputMode="adjustResize"` in your manifest file.

You might need to do `android:windowSoftInputMode="adjustResize|adjustPan"`... I don't really have anything comparable to your setup to test on...

Your problem is becasue of this (from the docs for adjustPan, emphasis mine):

> The activity's main window is not resized to make room for the soft keyboard. Rather, the contents of the window are automatically panned so that the **current focus** is never obscured by the keyboard and users can always see what they are typing

Given that, your list is being obscured becasue the EditText on top has the focus. The only thing I can currently think of is to move the EditText so it is below the list. Then when pushed up, your list should still be visible above the EditText.

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-11-04T10:34:21.407

这对我有用，对于片段，只需在带有活动的清单中声明它：

```
android:windowSoftInputMode="adjustPan" 
```

祝你好运！

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-07-04T09:32:07.303

我找不到让布局自动更改的解决方案，所以我不得不破解它。我使用在我的主要活动中找到的代码[来](https://stackoverflow.com/questions/2150078/android-is-software-keyboard-shown/)检测键盘何时打开。我刚刚添加了代码来调用一个方法，该方法在打开键盘时隐藏了我的前两个片段。这不是我真正想做的，但它确实有效。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-11-23T01:50:34.873

**我用它来`EditText`登录：**

```
this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN|WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE); 
```

**关于此方法的一些注意事项：**

`this`是指上下文，因为`getActivity()`并不总是可取的

```
.SOFT_INPUT_STATE_HIDDEN  //for default hidden state when activity loads

.SOFT_INPUT_STATE_VISIBLE //for auto open keyboard when activity loads 
```

每次都有效！

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-12-21T10:50:19.337

如果有人仍然面临这个问题：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:id="@+id/view"
    android:fitsSystemWindows="true"
    android:layout_height="match_parent"> 
```

添加您的布局：

```
android:fitsSystemWindows="true" 
```

我希望这可以解决您的问题 - 它对我有用。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-12-03T08:40:25.927

在 kotlin 中： - 在您的 Activity on Create 和 In Fragment onCreateView 方法中添加这一行

```
activity!!.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE); 
```

# xtext - Xtext：使用 Xbase 时堆栈图帧不一致导致代码生成中断

> ID：11292951
> 
> 赞同：0
> 
> 时间：2012-07-02T11:42:16.230
> 
> 标签：xtext

我遇到了似乎是标记为已修复的 Eclipse 错误 380313 的一个实例。我的语法如下：

```
grammar org.xtext.example.hyrule.HyRule with org.eclipse.xtext.common.Terminals
//  with org.eclipse.xtext.xbase.Xbase  

generate hyRule "http://www.xtext.org/example/hyrule/HyRule"

Start:
    rules+=Rule*;

Rule:
    'FOR' 'PAYLOAD' PAYLOAD 'ELEMENTS' elements+=ID+ 'CONSTRAINED''BY'name=ID '!';

PAYLOAD:
    "sse"| "stacons"
; 
```

哪个工作正常，以及哪个代码生成编辑器等都可以工作。然而，一旦我改变

```
with org.eclipse.xtext.common.Terminals 
```

至

```
with org.eclipse.xtext.xbase.Xbase 
```

并启动生成的 IDE，我得到了 Inconsistent stackmap frames at branch target 错误，与错误 380313 中的详细信息完全相同，因此代码生成和自动完成不再起作用。

如果我将编译器合规级别更改为 1.6，分支目标错误处的堆栈图帧不一致就会消失，并且自动完成工作，但代码生成仍然不起作用（在 src-gen 中没有生成代码）。

我正在使用从头开始安装的 Xtext 2.3 和 java 7。xtext 项目的构建路径未修改，并且我已将 org.eclipse.xtext.xbase.lib_2.3.0.v201206120633.jar 添加到DSL 项目（即在运行时启动的eclipse 实例中的那个）。

任何帮助将不胜感激，我一直在绞尽脑汁试图找到问题所在。

更新：在上面的示例中，我使用 generator.xtend 生成代码。相反，如果我使用 JvmModelInferrer，那么在合规性设置为 1.7 的情况下，我仍然会收到上述错误，并且自动完成功能完全被破坏，但代码生成确实有效。当然，在这种情况下，将合规级别设置为 1.6 一切正常。但是我当然应该能够使用生成器而不是 JvmModelInferrer，并且不必将编译器合规级别设置为 t 1.6？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:10:35.400

Sebastian Zarnekow：Eclipse 的 Java 编译器中的错误已在 Eclipse 3.8 中得到修复。恐怕您必须将您的发行版升级到 Juno 版本或坚持使用 Java 1.6。

# java - 在java中将数组转换为字符串

> ID：11292952
> 
> 赞同：-6
> 
> 时间：2012-07-02T11:42:28.520
> 
> 标签：java, arrays, str-replace

大家好

我需要将 long 数组转换为数组 (1,2,3,4,5)

```
new String[] {arrayTeste.toString().replace("[","(").replace("]",")")} 
```

这个对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:50:36.880

如果我明白你的意思，你必须这样做：

```
long[] array = ...;
String string = Arrays.toString(array).replace('[', '(').replace(']', ')'); 
```

如果要将数组转换`long`为`Strin`g 数组，可以执行以下操作：

```
long[] array = ...;
String[] strings = new String[array.length];
for (int i=0; i < array.length; i++) {
    strings[i] = String.valueOf(array[i]);
} 
```

在一行中：

```
String[] strings = Arrays.toString(array).replaceAll("(\\s+|\\[|\\])","").split(","); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:48:01.580

根据您的帖子标题，我想您想将数组的内容转换为一个格式化的字符串。

遍历数组中的每个项目并相应地格式化：

```
string s = "";

for (int i = 0; i < array.length; i++) {

    if (i == 0) s += "(" + array[i];
    if (i == array.length - 1) s += array[i] + ")";
    if (i != 0 && i != array.length - 1) {

        s += array[i] + ",";
    }
} 
```

大致上，这应该可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T11:48:29.960

您可以使用`Arrays.toString(long[])`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T11:48:47.673

使用 a`StringBuilder`并将所有数组元素附加到它。它比直接连接字符串更有效。

这与工作非常相似`Arrays.toString()`，但之后不需要更换括号：

```
StringBuilder b = new StringBuilder();
b.append("(");

for(int i = 0; i < arrayTeste.length; ++i) {
   if(i != 0)
     b.append(",");

   b.append(arrayTeste[i]);
}
b.append(")");
String s = b.toString(); 
```

# .net - 回发数据不保留

> ID：11292955
> 
> 赞同：2
> 
> 时间：2012-07-02T11:42:39.910
> 
> 标签：.net, asp.net-mvc, postback

我刚从 ASP.NET Web 窗体中出来，现在是 MVC 新手。我读过 MVC 不像 ASP.NET Web 窗体那样管理 ViewState。我想知道如何实现数据持久性。

我有一个带有强类型模型的简单表单：

```
class MyModel
{
    public string TextboxData { get; set; }
    public string HiddenData { get; set; }
} 
```

使用以下形式：

```
@using (Html.BeginForm())
{
     @Html.TextBoxFor(m => m.TextboxData)
     @Html.HiddenFor(m => m.HiddenData)
} 
```

我的控制器是一个简单的控制器。它只是处理模型中的数据并将其传递回视图：

```
[HttpPost]
public ActionResult PerformAction(MyModel mv)
{
    mv.DoSomething();
    return View(mv);        
} 
```

由于控制器只是重用模型，我是否正确假设所有通过先前提交输入的数据将在下次刷新时保留？

实际上，保留了 TextboxData 的那个（回发后，文本框仍然包含输入的数据），但没有保留 HiddenData 的那个。我在这里做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:56:03.583

似乎你在做正确的事情，它应该在发回服务器时发送隐藏的文本数据。

似乎隐藏字段的 ID 重复或无效。请参考

[Razor MVC 模型正在丢失保存操作的数据](https://stackoverflow.com/questions/5435809/razor-mvc-model-is-losing-data-on-save-action)

[ASP.Net MVC 隐藏字段未按预期工作](https://stackoverflow.com/questions/5021116/asp-net-mvc-hidden-field-not-working-as-expected)

希望这些帖子可以解决您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T13:14:49.567

如果在内部`mv.DoSomething();`修改`TextboxData`或`HiddenData`属性的值，则在渲染视图时不会反映这些更改。这样做的原因是因为 HTML 助手（如`TextBoxFor`和`HiddenFor`）在绑定时首先查看 ModelState 内部，然后在模型中查看。这是设计使然。

因此，如果您需要修改 POST 操作中最初发布的值，您需要首先将它们从 ModelState 中删除：

```
[HttpPost]
public ActionResult PerformAction(MyModel mv)
{
    // we intend to modify the values => we must remove them from ModelState
    // or the HTML helpers will reuse the old values
    ModelState.Remove("TextboxData");
    ModelState.Remove("HiddenData");

    mv.TextboxData = "some new value";
    mv.HiddenData = "some new hidden value";

    return View(mv);        
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T12:54:35.333

在 POST 上，您的模型会自动填充。

[请参阅此 dotnetslackers 文章](http://dotnetslackers.com/articles/aspnet/Understanding-ASP-NET-MVC-Model-Binding.aspx)中有关模型绑定如何工作的说明

现在你的问题 - 查看问题中发布的代码，看起来你做对了。要找出这里的问题是您应该做的 1\. 查看页面的源代码。2.检查隐藏字段是否以值呈现（无论您期望什么值）

如果渲染的隐藏字段没有设置您期望看到的值，这可能意味着在获取时，创建模型时，“m.HiddenData”没有设置正确的值。

希望这可以帮助！！

# git - DHCP 网络中的中央 git 服务器

> ID：11292959
> 
> 赞同：2
> 
> 时间：2012-07-02T11:42:58.027
> 
> 标签：git, gitolite, dhcp

我有一台 linux (debian) 计算机和一台通过 dhcp 路由器连接的 mac (10.4)。现在我在 linux 机器上安装了 gitolite 以拥有一个中央 git 存储库。我现在的问题是，当我启动 linux 计算机时，我将始终拥有不同的 IP，并且我无法将路由器配置为为网络中的计算机提供固定 IP。所以我的问题是：最好的方法是什么？是否可以在域名下的 /etc/hosts 中定义当前的 linux box IP？还是我应该每次都输入 IP 以手动推送更改？或者您知道其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:55:27.103

您从哪些其他客户端访问 git 机器？使用 Linux 框的集合，您可以安装 Avahi 和 mdns 主机查找方法：然后引用`hostname.local`将通过使用本地网络上的多播查询来解析主机名。

（在 Debian 上，只需安装`avahi-daemon`在服务器和客户端机器上就足够了，`/etc/nsswitch.conf`默认情况下它包含这个魔法：

```
hosts:          files mdns4_minimal [NOTFOUND=return] dns mdns4 
```

)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:16:30.327

你不能在你的linux机器上定义一个静态IP吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T11:48:05.063

笔记：

您无需安装 Gitolite 即可拥有中央存储库。
它只是一个[授权层](http://sitaramc.github.com/gitolite/auth.html)。

您只需要在您的 Linux 机器上运行ssh 守护进程或 http 服务器（带有[`git-http-backend`CGI 脚本）。](https://stackoverflow.com/a/5265022/6309)
如果你的 Linux 机器有一个主机名，你可以使用它来引用你的 linux 服务（`ssh://`或`http://`）

# iphone - 隐藏 UIBarButtonItem 但不是 make 是 nil

> ID：11292960
> 
> 赞同：0
> 
> 时间：2012-07-02T11:43:01.653
> 
> 标签：iphone, uibarbuttonitem

是否可以隐藏 UIBarButtonItem（导航栏的右按钮）但不能使其为零？在我的申请中，我有一个条件

```
if(self.navigationItem.rightBarButtonItem == nil) 
```

这真的很重要。但是隐藏 barButton 也同样重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:01:59.060

您可以做的一件事是使用`initWithCustomView`. `UIBarButtonItem`设置一个`UIButton`并使用`initWithCustomView`并将其分配给此按钮。`UIButton`具有隐藏和不隐藏属性。

```
UIButton*someButton=[UIButton UIButtonTypeRoundedRect];
UIBarButtonItem*someBarButton=[[UIBarButtonItem alloc] initWithCustomView:someButton];

//To Hide/Unhide
[someButton setHidden:YES/NO]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:09:34.793

您可以隐藏您制作 barbutton 的按钮....

```
UIButton *button1=[UIButton buttonWithType:UIButtonTypeCustom];
[button1 setFrame:CGRectMake(10.0, 2.0, 45.0, 40.0)];
[button1 addTarget:self action:@selector(showLeft:) forControlEvents:UIControlEventTouchUpInside];
[button1 setImage:[UIImage imageNamed:@"anyImage.png"] forState:UIControlStateNormal];
UIBarButtonItem *button = [[UIBarButtonItem alloc]initWithCustomView:button1];
self.navigationItem.leftBarButtonItem = button;

[button1 setHidden:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-04T14:36:06.030

请[在此处查看我](https://stackoverflow.com/a/44355059/8089019)对类似问题的回答。这里也适用。

它将`isHidden`属性添加到 UIBarButtonItem。

# ssl - SSL 会影响网站的工作方式吗？

> ID：11292967
> 
> 赞同：0
> 
> 时间：2012-07-02T11:43:38.373
> 
> 标签：ssl, integration

我很快将不得不在我的网站上激活 SSL 证书，我想知道这是否会影响网站的工作方式。

诸如设置 cookie、会话、ajax 请求、文件上传等之类的事情会一样吗？还是需要任何代码修改？

我基本上需要在我要求付款信息的用户私人区域中以一种形式启用它，我应该只在那里激活它吗？还是在私人区域的所有页面上？

谢谢，亚历克斯。

# codeigniter - Backbone JS 和 CodeIgniter REST 服务器

> ID：11292968
> 
> 赞同：3
> 
> 时间：2012-07-02T11:43:41.563
> 
> 标签：codeigniter, rest, backbone.js

我有一个标准的 CI Web 应用程序，但我决定使用主干来获取混乱的 javascript。我对各种控制器方法有一大堆序列化表单/jQuery AJAX 请求：authenticate、change_password、register_member、request_new_password 等，但不太了解 REST 是如何工作的。我正在为 CI 使用 Phil Sturgeon 的 REST 库[https://github.com/philsturgeon/codeigniter-restserver](https://github.com/philsturgeon/codeigniter-restserver)

每个主干模型都应该有不同的 api url 吗？我应该实际调用控制器方法什么？

```
<?php  
    require(APPPATH.'/libraries/REST_Controller.php');  
    class RestApi extends REST_Controller  
    {  
        function get()  
        { 
```

但它只是404s。

我只是不知道如何根据少数 HTTP 方法替换到我的 50 种旧方法的路由。骨干模型的名称是否需要与服务器端的某些内容相匹配？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T07:26:06.897

您必须将函数命名为 index_HTTPMETHOD。在您的示例中，它将是：

```
class RestApi extends REST_Controller {
    // this will handle GET http://.../RestApi
    function index_get() {
    }

    // additionally this will handle POST http://.../RestApi
    function index_post() {
    }
    // and so forth

    // if you want to POST to http://.../RestApi/somefunc
    function somefunc_post() {
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:18:33.517

模型的`url`-attribute 应该与返回构成模型属性的 JSON 的服务器端“url”相匹配。Backbone.js 对此具有默认功能，即将模型的集合 url 与它的 id 属性相匹配。可以通过覆盖`urlRoot`-function 来放弃集合 url 要求，以便在集合之外操作模型。

如果你也想独立于 id -attribute，你应该重写`url`-attribute/function 以提供你自己的与服务器上的模型匹配的 url，如下所示：

```
url: 'path/to/my/model' 
```

或者

```
url: function() { // Define the url as a function of some model properties
  var path = this.model_root + '/' + 'some_other_url_fragment/' + this.chosen_model_identifier;
  return path; 
} 
```

# jquery - 突出显示 iframe 中的内容

> ID：11292974
> 
> 赞同：0
> 
> 时间：2012-07-02T11:44:07.623
> 
> 标签：jquery, html, iframe

我有 2 个名为 try1 和 try2 的文件的以下代码。

1.try1.php

```
 <html>
<head>
    <title></title>
</head>
<body style="height: 1000px">

    <iframe name="frametest" id="frameDemo" src="try2.php" style="height:     100%;width: 100%;z-index: 10"></iframe>
</body>
</html> 
```

2.try2.php

```
<html>
<head>
    <title></title>
</head>
<body>
    <div>
        <pre>
                <?php echo       htmlentities(@file_get_contents("http://stackoverflow.com")); ?>
        </pre>    
    </div>

</body> 
```

如何在 try1.php 中突出显示 iframe 中的所有 a href 链接？我认为这可以通过 jquery bt 来完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:55:59.933

在 javascript 本身上，您可以使用它:)

```
var aElement = document.getElementById('frameDemo').contentWindow.getElementsByTagName("a"); 
```

# matlab - 在 MATLAB 中扩展索引图像的调色板

> ID：11292978
> 
> 赞同：0
> 
> 时间：2012-07-02T11:44:17.640
> 
> 标签：matlab, image-processing, bitmap, steganography, color-palette

我提取了索引图像的调色板 - 一个 256x3 矩阵，将调色板复制到 512x3 矩阵，每一半都有重复值。我想做的是隐写术。当秘密信息位为0时，我想参考调色板的一半，否则参考另一半。通过这种方式，我们可以在索引图像中获得无损隐写术！

但是当我尝试使用新的颜色图将图像保存为位图时，它说 bmp/gif 文件在调色板中不能有超过 256 个条目！

```
[im,map]=imread('mandril_color.gif');
nmap=zeros(512,3);
nmap(1:256,1:3)=map(1:256,1:3);
nmap(257:512,1:3)=map(1:256,1:3);
imwrite(im,nmap,'palette1.gif'); 
```

以上是我的代码，用于测试是否使用扩展调色板保存图像。不幸的是，它没有。如何避免此问题并拥有超过 256 个值的自定义调色板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T13:12:42.567

.bmp 和 .gif 的标准只支持长度为 256 的调色板。你没有办法解决这个问题。

例如，要使用超过 256 个条目的调色板，您可以使用 .jpg。确保您选择无损压缩，否则您的消息将被打乱。

# c++ - 找到包含给定 k 个单词中的每个单词的第一个最短子段至少一次

> ID：11292980
> 
> 赞同：-3
> 
> 时间：2012-07-02T11:44:22.757
> 
> 标签：c++, algorithm

[https://amazonindia.interviewstreet.com/challenges/dashboard/#problem/4fd648244715d](https://amazonindia.interviewstreet.com/challenges/dashboard/#problem/4fd648244715d) 我对两个测试用例的回答是错误的，请告诉我它们是什么。我已经采用了一个包含 k 个元素的队列，如果新的元素形成一个小于前一个的新队列，它会删除前面的元素

```
vector<string> gud(vector<string> str,map<string,int> mymap,int tc,int cnt) {

    int siz1=tc;
    int count=0,count1=0,min=cnt,min_i=0;
    int start=0,point=0;
    bool first=true,neww=true;
    list<string> window;
    bool prev=false;
    for(int i=1; i<str.size(); i++) {
        string sr=str[i];
        transform(sr.begin(), sr.end(),     sr.begin(), ::tolower);

        if(first) {
            if( mymap.count(sr)>0) {
                mymap[sr]-=1;
                point=i;
                start=sr.length();
                window.push_back(sr);
                first=false;
                count++;
            }
        } else {

            if(prev && count==tc) {
                if(min>start) {
                    min=start;
                    min_i=point;
                }

            }

            if(mymap.count(sr)>0) {
                prev=true;
                if(mymap[sr]>0) {
                    start+=sr.length();
                    window.push_back(sr);
                    count++;
                    mymap[sr]-=1;

                }
                else if((!window.empty()) && (sr.compare(window.front())==0)) {
                    point++;
                    window.pop_front();
                    window.push_back(sr);
                    while((!window.empty()) && (mymap.count(window.front())<1)) {
                        point++;
                        start-=window.front().length();

                        window.pop_front();
                    }
                    while((!window.empty()) && (mymap[window.front()]<0) ) {
                        point++;
                        start-=window.front().length();
                        mymap[window.front()]+=1;

                        window.pop_front();
                        while((!window.empty()) && (mymap.count(window.front())<1)) {
                            point++;
                            start-=window.front().length();
                            window.pop_front();
                        }
                    }
                }//else if clse
                else {
                    start+=sr.length();
                    window.push_back(sr);
                    mymap[sr]-=1;
                    prev=false;
                }

            }
            else {
                prev=false;
                window.push_back(sr);
                start+=sr.length();
                //  cout<<"inserting "<<sr<<endl;
            }

        }
    }

    if(prev && count==tc) {
        if(min>start) {
            min=start;
            min_i=point;
        }

    }

    if(count!=tc) {
        cout<<"NO SUBSEGMENT FOUND";
        vector<string> f;
        f.push_back("");
        return f;
    }

    int uo=0;
    vector<string> give;
    give.push_back("");
    for(int i=min_i; i<str.size(); i++) {
        if(uo>=min)break;
        uo+=str[i].length();
        give.push_back(str[i]);
    }

    return give;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:50:37.490

明显错误：

```
for(int i=1;i<str.size();i++) 
```

数组（向量）的索引是从 0 而不是 1。所以你错过了第一个字符串。

这可能不是你想要的：

```
if( mymap.count(sr)>0) 
```

作为 std::map 的关键是存在或不存在。永远不会超过 1。由于您使用密钥进行计数，因此您的意思可能是：

```
if( mymap[sr] > 0) 
```

其余的对我来说都是毫无意义的胡言乱语。

# android - 如何清除Android中另一个应用程序的缓存？

> ID：11292985
> 
> 赞同：2
> 
> 时间：2012-07-02T11:44:37.510
> 
> 标签：android

我需要什么许可？文件夹 appDir.exists() 但不是 appDir.canRead()。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:54:25.353

我认为您需要在两个清单中定义一个共同的用户 ID（`android:sharedUserId="com.xxx.xxx"`）：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.your.package"
    android:sharedUserId="com.xxx.xxx"
    android:versionCode="1"
    android:versionName="1.0" > 
```

但是，如果其他应用程序是第 3 方应用程序，则您不能这样做。在这种情况下，您需要有根电话。让我知道是否是这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:55:17.943

你不能，如果一个应用程序可以清除另一个应用程序，这将是 Android 中的一个巨大的安全漏洞。如果您参与了要清除的其他应用程序的开发，最好的办法是发送一个 Intent 并让其他应用程序侦听该意图并在收到它时清除自己的缓存。

# delphi - 在 Delphi 中使用 REST 请求

> ID：11292988
> 
> 赞同：7
> 
> 时间：2012-07-02T11:44:54.767
> 
> 标签：delphi, rest

我需要在 Delphi 中编写一个简单的 REST 服务器，并在 Ruby on Rails 中编写一个客户端。我看过 Marco Cantu 的所有关于 Delphi 中 REST 的视频，我有一个问题：

Delphi 如何处理请求，例如用户 ID 在`"/users/1"`哪里？`1`

我见过的所有示例都使用简单的函数（如`EchoString(value)`or `ReverseString(Value)`）并且请求是`"Datasnap/rest/ClassName/EchoString/Value"`，但我需要一个类似的请求`"Datasnap/rest/classname/123"`。

例如：`TContractsCollection`是合同的集合，我想查看合同`ID=324556`。所以在浏览器（和 RoR 客户端）中，它将是（例如）：

```
"http://localhost:3000/DataSnap/rest/TContractsCollection/324556" 
```

但德尔福写道：

`"TContractsCollection method not found in the server method list"`

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T06:58:01.180

您可以在类似函数的 TdmServerModule 中定义一个函数

```
ProcessContract(ContractNo:Integer): String 
```

什么时候

```
http://localhost:3000/DataSnap/rest/ProcessContract/324556 
```

被调用，ContractNo 将被设置为 324556

# extjs - 按钮单击事件未从控制器触发 - 初学者

> ID：11292989
> 
> 赞同：1
> 
> 时间：2012-07-02T11:44:57.813
> 
> 标签：extjs, sencha-touch, extjs4, extjs-mvc, extjs4.1

我有一个视图调用`User.js`，我有一个按钮。

```
...
buttons: [{
    text: 'Reset',
    id:'button'
}
... 
```

现在我的控制器名为`User.js`，当用户单击按钮时，我需要显示一条 console.log 消息。控制台消息应从控制器打印。我的控制器代码如下；

```
Ext.define('Tangle.controller.User', {
    extend: 'Ext.app.Controller',

    init: function() {
        console.log('works  ');
        this.control({
            'button': {
                click: this.refresbut
            }
        });
    },

    refreshbut: function() {
        console.log('button clicked ');
    }
}); 
```

根据这个没有任何问题，控制台消息没有打印出来。有人可以看看这个吗？

代码

```
Ext.define('Tangle.view.user.User' ,{
    extend: 'Ext.form.Panel', 

    items: [{
        xtype: 'textfield',
        fieldLabel: 'Name',
        name: 'name'
    }],

    buttons: [{
        text: 'Submit',
        id:'button',
        name:'button'
    }]
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:15:01.060

正如评论中所讨论的那样。您忘记在您的应用程序中包含控制器。

# java - Spring：如何下载文件？

> ID：11292990
> 
> 赞同：2
> 
> 时间：2012-07-02T11:45:01.660
> 
> 标签：java, spring

我想将 zip 存档从服务器保存到用户计算机。我的网页显示了有关此文件的一些信息，并有一个下载按钮。在我对按钮的控制器操作中，只需在主页上重定向，但我想从数据库中获取数据并将其保存到用户机器，路径**由用户定义**

问题是我不知道如何获得这条路。你能给我一个例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:55:51.930

在您的控制器方法中，您可以添加此代码以获取文件下载

```
File file = new File("fileName");
FileInputStream in = new FileInputStream(file);
byte[] content = new byte[(int) file.length()];
in.read(content);
ServletContext sc = request.getSession().getServletContext();
String mimetype = sc.getMimeType(file.getName());
response.reset();
response.setContentType(mimetype);
response.setContentLength(content.length);
response.setHeader("Content-Disposition", "attachment; filename=\"" + file.getName() + "\"");
org.springframework.util.FileCopyUtils.copy(content, response.getOutputStream()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-02T17:22:20.647

如果您想从某个外部 URL 或 S3::: 下载

```
@RequestMapping(value = "asset/{assetId}", method = RequestMethod.GET)
public final ResponseEntity<Map<String, String>> fetch(@PathVariable("id") final String id)
    throws IOException {
String url = "<AWS-S3-URL>";
HttpHeaders headers = new HttpHeaders();
headers.set("Location", url);

Map<String, String> map = null;

ResponseEntity<Map<String, String>> rs =
      new ResponseEntity<Map<String, String>>(map, headers, HttpStatus.MOVED_PERMANENTLY);

return rs; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T11:59:10.123

您不必知道如何获取路径，因为路径是由用户定义的 :) 但是如果您要查找下载路径，请检查网站的源代码以及下载按钮链接到的位置。通常你可以在开头看到它`<form>`。

如果您只是在寻找下载文件：

```
public void download(String filename, String url) {

    URL u;
    InputStream is = null;
    DataInputStream dis;
    String s;

    try{
      u = new URL(url);

      // throws an IOException
      is = u.openStream();

      dis = new DataInputStream(new BufferedInputStream(is));
      FileWriter fstream = new FileWriter(filename);
      BufferedWriter out = new BufferedWriter(fstream);

      while ((s = dis.readLine()) != null) {

          // Create file 
          out.write(s);
          //Close the output stream
          out.close();
      }

    }catch (Exception e){ //Catch exception if any
        System.err.println("Error: " + e.getMessage());
    }

    is.close();
} 
```

希望这可以帮助...

# android - 始终在通知栏中显示服务

> ID：11292993
> 
> 赞同：11
> 
> 时间：2012-07-02T11:45:11.957
> 
> 标签：android, notifications, android-service

我想将我的应用添加到通知栏，以便它始终显示，就像 Google Play 商店中的某些应用一样。

我希望它像这样的屏幕截图：

![在此处输入图像描述](../Images/3c73fa692a262af8bd27ac36bc1e59fa.png)

我希望我的通知不会被清除，并希望在单击通知时打开我的应用程序。

**这是我的服务类代码：**

```
package com.demo;

import java.util.Random;

import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.app.Service;
import android.content.Intent;
import android.os.Handler;
import android.os.IBinder;
import android.os.Message;
import android.widget.Toast;

public class ServiceExample extends Service {

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onCreate() {
        super.onCreate();
        Toast.makeText(this,"Service Created",300).show();
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        Toast.makeText(this,"Service Destroy",300).show();
    }

    @Override
    public void onLowMemory() {
        super.onLowMemory();
        Toast.makeText(this,"Service LowMemory",300).show();
    }

    @Override
    public void onStart(Intent intent, int startId) {
        super.onStart(intent, startId);
        Toast.makeText(this,"Service start",300).show();
        Notification notification = new Notification(R.drawable.ic_launcher,
                "Rolling text on statusbar", System.currentTimeMillis());

        PendingIntent contentIntent = PendingIntent.getActivity(this, 0,
                new Intent(this, ServiceDemoActivity.class), PendingIntent.FLAG_UPDATE_CURRENT);

        notification.setLatestEventInfo(this,
                "Notification title", "Notification description", contentIntent);

        startForeground(1, notification);
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {

        Toast.makeText(this,"task perform in service",300).show();
        /*ThreadDemo td=new ThreadDemo();
        td.start();*/
        Notification notification = new Notification(R.drawable.ic_launcher,
                "Rolling text on statusbar", System.currentTimeMillis());

        PendingIntent contentIntent = PendingIntent.getActivity(this, 0,
                new Intent(this, ServiceDemoActivity.class), PendingIntent.FLAG_UPDATE_CURRENT);

        notification.setLatestEventInfo(this,
                "Notification title", "Notification description", contentIntent);

        startForeground(1, notification);

        return super.onStartCommand(intent, flags, startId);
    }

    private class ThreadDemo extends Thread{
        @Override
        public void run() {
            super.run();
            try{
            sleep(70*1000); 
            handler.sendEmptyMessage(0);
            }catch(Exception e){
                e.getMessage();
            }
        }
    }
   private Handler handler=new Handler(){
    @Override
    public void handleMessage(Message msg) {
        super.handleMessage(msg);
        showAppNotification();
    }
   };

   void showAppNotification() {
       try{
        NotificationManager nm = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);
        // The PendingIntent to launch our activity if the user selects this
        // notification.  Note the use of FLAG_CANCEL_CURRENT so that, if there
        // is already an active matching pending intent, cancel it and replace
        // it with the new array of Intents.
//      PendingIntent contentIntent = PendingIntent.getActivities(this, 0,
//             "My service completed", PendingIntent.FLAG_CANCEL_CURRENT);

        // The ticker text, this uses a formatted string so our message could be localized
        String tickerText ="djdjsdjkd";

        // construct the Notification object.
        Notification notif = new Notification(R.drawable.ic_launcher, tickerText,
                System.currentTimeMillis());

        // Set the info for the views that show in the notification panel.
//      notif.setLatestEventInfo(this, from, message, contentIntent);

        // We'll have this notification do the default sound, vibration, and led.
        // Note that if you want any of these behaviors, you should always have
        // a preference for the user to turn them off.
        notif.defaults = Notification.DEFAULT_ALL;

        // Note that we use R.layout.incoming_message_panel as the ID for
        // the notification.  It could be any integer you want, but we use
        // the convention of using a resource id for a string related to
        // the notification.  It will always be a unique number within your
        // application.
        nm.notify(0, notif);
       }catch(Exception e){
           e.getMessage();
       }
    }
} 
```

我在我的项目清单文件中声明了我的服务：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.demo"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".ServiceDemoActivity"
            android:label="@string/app_name"  >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <service android:name=".ServiceExample"></service>
    </application>

</manifest> 
```

这是我启动和停止服务的课程：

```
package com.demo;

import android.app.Activity;
import android.content.Intent;
import android.content.IntentFilter;
import android.content.ReceiverCallNotAllowedException;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;

public class ServiceDemoActivity extends Activity implements OnClickListener {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        findViewById(R.id.start).setOnClickListener(this);
        findViewById(R.id.stop).setOnClickListener(this);
    }

    private Intent inetnt;
    @Override
    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.start:

            inetnt=new Intent(this,ServiceExample.class);
            startService(inetnt);
            break;
        case R.id.stop:

            inetnt=new Intent(this,ServiceExample.class);
            stopService(inetnt);
            break;
        }
    }

    @Override
    protected void onResume() {
        super.onResume();
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
//      
    }
} 
```

这是我的布局代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="StartService" 
        android:id="@+id/start"/>

        <Button
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="StopService"
        android:id="@+id/stop" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-02T13:18:16.307

为了让您的通知始终存在，您需要设置这两个标志：

```
notification.flags |= Notification.FLAG_ONGOING_EVENT | Notification.FLAG_NO_CLEAR; 
```

请注意，虽然将您的服务设置在前台也会让您获得一个持续的事件，但这是一件非常不合适的事情，除非您确实需要您的服务在前台运行。音乐播放器是应用程序的一个很好的例子——用户期望他们的音乐可以不间断地播放，即使在使用设备做许多其他事情时也是如此。

但是，大多数服务可以在内存不足时由系统临时停止，然后在内存再次可用时自动重新启动。所以正确的思考方式是将这两个想法分开。

1.  如果您希望您的通知始终可见，请使用我提到的两个标志。
2.  如果您碰巧还需要您的服务在前台运行，您可以并且应该调用`Service.startForeground()`，但不要认为这是获取持续通知的一种方式。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-02T11:51:07.883

如果你想让你的应用程序一直出现在状态栏上，你必须编写一个服务并`startForeground(id, notification)`在`onStart(...)`和方法中调用，并在服务`onStartCommand(...)`的方法中分别调用`stopForeground()`方法`onDestroy()`。

id 是一个可以分配给通知的整数，而通知是一个`Notification`对象（您可以在此处阅读更多信息：http: [//developer.android.com/guide/topics/ui/notifiers/notifications.html](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)）。

这样，只要您的服务正在运行，就会显示状态栏通知。

```
Notification notification = new Notification(R.drawable.statusbar_icon,
        "Rolling text on statusbar", System.currentTimeMillis());

PendingIntent contentIntent = PendingIntent.getActivity(this, 0,
        new Intent(this, YourActivity.class), PendingIntent.FLAG_UPDATE_CURRENT);

notification.setLatestEventInfo(this,
        "Notification title", "Notification description", contentIntent);

startForeground(1, notification); 
```

您可以将此代码放在服务`onStart(...)`和`onStartCommand(...)`方法中。

您还可以在此处阅读有关服务的更多信息：http: [//developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-08T05:57:30.110

只需使用以下代码始终显示通知栏。

```
 Notification.Builder builder = new Notification.Builder(MainActivity.this);
    builder.setSmallIcon(R.mipmap.ic_launcher)
            .setContentText("Call Recorder")
            .setAutoCancel(false);
    Notification notification = builder.getNotification();

    notification.flags |= Notification.FLAG_NO_CLEAR
            | Notification.FLAG_ONGOING_EVENT;

    NotificationManager notificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
    notificationManager.notify(1, notification); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-04T09:15:01.257

这是使用 NotificationCompact.Builder 类的示例，该类是构建通知的最新版本。

```
private void startNotification() {

     //Sets an ID for the notification

  int mNotificationId = 001;

    // Build Notification , setOngoing keeps the notification always in status bar
    NotificationCompat.Builder mBuilder =
            new NotificationCompat.Builder(this)
                    .setSmallIcon(R.drawable.ldb)
                    .setContentTitle("Stop LDB")
                    .setContentText("Click to stop LDB")
                    .setOngoing(true);

    // Gets an instance of the NotificationManager service
    NotificationManager mNotifyMgr =
            (NotificationManager) getSystemService(NOTIFICATION_SERVICE);

    // Build the notification and issues it.
    mNotifyMgr.notify(mNotificationId, mBuilder.build());

} 
```

# php - 如何在不影响主题的情况下在 Tumblr 环境中引入 CSS 规则？

> ID：11292998
> 
> 赞同：-2
> 
> 时间：2012-07-02T11:45:40.690
> 
> 标签：php, html, css, themes, tumblr

我需要对样式表文件进行一些简单的更改，并且我成功地通过 Google Chrome Inspector 离线进行了这些更改，但是当我每次尝试在 Tumblr 主题上实现这些更改时，博客就会崩溃并变得一团糟。

请问各位大大能告诉我怎么解决这个问题吗？在不破坏主题的情况下引入这种性质的变化的正确方法或适当的工作流程是什么？

提前感谢您的时间和合作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T21:18:38.737

Tumblr 主题应该能够插入自定义 CSS。

在“自定义主题”面板中，打开“高级”选项卡（在底部），将出现一个允许您添加自定义 CSS 的框。在此处添加您要进行的更改。

如果您没有看到更改，则您的主题可能没有经过优化以接受您输入的自定义 CSS。

单击“编辑 HTML”按钮并搜索`{CustomCSS}`. 如果找不到，则需要在标记前添加以下代码`</head>`。

```
<style type="text/css">
    {CustomCSS}
</style> 
```

应该这样做！

# jquery - 使 dataLabel 可拖动

> ID：11292999
> 
> 赞同：4
> 
> 时间：2012-07-02T11:45:41.530
> 
> 标签：jquery, jquery-ui, highcharts

在 highcharts 中，我正在尝试向点的数据标签添加拖动效果。我找到了几种定位给定标签的方法。在这个小提琴中，你可以看到我的一些尝试。（我在这里的一个小提琴中结合了不同的尝试来炫耀我尝试过的东西）

[http://jsfiddle.net/EjwaX/3/](http://jsfiddle.net/EjwaX/3/)

现在使用 chart.series[0].data[0].dataLabel 和使用点单击事件都使我能够更改 dataLabel 的属性。但是我无法将 jquery ui .draggable() 附加到标签上。是否有可能使图表内的元素可拖动？

如果需要更多信息，请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T11:24:44.893

您实际上可以将`draggable`小部件附加到数据标签上。但是，由于数据标签是[SVG](http://en.wikipedia.org/wiki/Scalable_Vector_Graphics)元素，它们完全忽略了对其`position`,`left`和`top`CSS 属性所做的更改。

相反，`<g>`包装标签的元素公开了一个`transform`属性：

```
<g zIndex="1" transform="translate(9, 152)">
    <!-- data label content -->
</g> 
```

我们仍然可以使用`draggable`小部件（这非常方便，因为它抽象了较低级别的拖动事件）并在[拖动](http://jqueryui.com/demos/draggable/#event-drag)事件处理程序中更新`transform`数据标签包装器的属性。由于拖动坐标是相对的，我们必须解析原始属性并使用生成的坐标作为原点。`transform`

现在，所有标签包装器本身都是用该类装饰的组的子`highcharts-data-labels`级。这为我们提供了一个很好的起点，因此我们可以编写如下内容：

```
$(".highcharts-data-labels").children().filter(function() {
    var $this = $(this);
    // Parse original translation.
    var coords = $this.attr("transform")
                      .match(/translate\((-?\d+),\s*(-?\d+)\)/);
    if (coords) {
        // Associate origin with element.
        return $this.data("origin", {
            x: +coords[1],
            y: +coords[2]
        });
    } else {
        // Parsing failed, reject element.
        return false;
    }
}).draggable({
    drag: function(event, ui) {
        var $this = $(this);
        // Fetch back origin.
        var origin = $this.data("origin");
        // Update current transform.
        $this.attr("transform", "translate("
            + (origin.x + ui.position.left) + ", "
            + (origin.y + ui.position.top) + ")");
    }
}); 
```

[你会在这里](http://jsfiddle.net/EjwaX/8/)找到一个更新的小提琴。

关于上面代码的几点说明：

*   [使用filter()](http://api.jquery.com/filter/)而不是[each()](http://api.jquery.com/each/)因为它允许我们过滤掉`transform`属性无法解析的元素（你永远不知道），而不是彻底失败或向`drag`处理程序中的计算提供垃圾，

*   [使用attr()](http://api.jquery.com/attr/)代替[prop()](http://api.jquery.com/prop/)来强调我们正在修改 SVG 片段中的属性这一事实。`prop()`可能会以完全相同的方式工作，所以这只是风格和个人喜好的问题。

最后，一个警告：我现在只能在 Firefox 上进行测试，但似乎很难`mousedown`在某些标签上触发事件，尤其是在曲线和数据提示争夺空间的“拥挤”区域。调整`zIndex`数据标签包装器的属性并没有太大的作用。多次点击有时会有所帮助。如果这在所有浏览器上都是一致的，则可能必须设计其他解决方案（可能是透明覆盖，或者只是将`mousedown`事件从数据点本身中继到数据标签）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T21:08:53.047

[工作的jsFiddle](http://jsfiddle.net/minagabriel/EjwaX/6/)

```
$(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'line'
        },
        title: {
            text: 'Monthly Average Temperature'
        },
        subtitle: {
            text: 'Source: WorldClimate.com'
        },
        xAxis: {
            categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
                'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
        },
        yAxis: {
            title: {
                text: 'Temperature'
            },
            plotLines: [{
                value: 0,
                width: 1,
                color: '#808080'
            }]
        },
        plotOptions: {
            series: {
                dataLabels: {
                    enabled: true
                },
                events: {
                    //Here I'm able to move the labels by using the click and shift-click. 
                    //I wish to do this by dragging
                    click: function(event) {
                        var current_y = event.point.dataLabel.attr('y');                        
                        if(event.shiftKey) {
                            var new_y = current_y + 2;
                            event.point.dataLabel.attr({y: new_y});
                        } else {
                            var new_y = current_y - 2;
                            event.point.dataLabel.attr({y: new_y});                            
                        }
                    }
                }                    
            }
        },
        series: [{
            name: 'Tokyo',
            data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6]
        }, {
            name: 'New York',
            data: [-0.2, 0.8, 5.7, 11.3, 17.0, 22.0, 24.8, 24.1, 20.1, 14.1, 8.6, 2.5]
        }, {
            name: 'Berlin',
            data: [-0.9, 0.6, 3.5, 8.4, 13.5, 17.0, 18.6, 17.9, 14.3, 9.0, 3.9, 1.0]
        }]
    });

    //Second attempt to grab a point. Works for chaning attributes
    var point = chart.series[0].data[0].dataLabel;

} , function(chart){

});

 $(function() {
   console.log(chart) ;
       $( "#draggable" ).draggable()
       .text(chart.series[0].data[0].y + 'drag and drop me     ');
     }); 
```

​</p>