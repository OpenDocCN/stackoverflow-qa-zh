# StackOverflow 问答 11283000-11283999

# android - exec（“su”）权限被拒绝？

> ID：11283002
> 
> 赞同：1
> 
> 时间：2012-07-01T14:58:16.213
> 
> 标签：android, su, root

当我使用此代码时

```
Runtime.getRuntime().exec("su"). 
```

并听听它给我的 ErrorStream：权限被拒绝。但是 SuperUser 成功授予权限。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T15:27:58.123

您需要添加到您的***AndroidManifest.xml***

```
<uses-permission android:name="android.permission.ACCESS_SUPERUSER"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T21:21:07.887

我的ROM搞砸了。我不得不重新安装它。添加权限应该**没有**帮助。编辑：如果您没有定义权限，SuperUser 现在会发出警告，但它仍然会授予 su.

# ruby-on-rails - 如何在 RABL 生成的视图中过滤结果

> ID：11283003
> 
> 赞同：0
> 
> 时间：2012-07-01T14:58:20.283
> 
> 标签：ruby-on-rails, rest, devise, rabl

我正在使用 RABL 来呈现 JSON。我有这些模型：

1.  `Project`
2.  `Task`
3.  `User`

“显示项目”操作应导致项目详细信息的呈现，**包括项目中的任务列表，但仅允许用户查看**。

到目前为止，我已将所有 Tasks 添加到 Project`show.rabl`中，并且运行良好：

```
child tasks: :tasks do
  extends "task/show"
end 
```

有没有办法告诉 RABL 只渲染满足给定条件的任务？- 我已经在控制器中有逻辑，但我不知道如何告诉 RABL...

**- 更新 -**

我想出了一种方法，方法是添加一个“代码”部分，传入项目对象，然后从可见任务构建散列并渲染它。这可行，但它非常难看，并且首先破坏了使用 RABL 的目的。它看起来大致是这样的：

```
code :tasks do |project|
  project.tasks.visible_by(current_user).inject([]){|arr, task| ...}
end 
```

我确信我的用例不是那么独特。有没有更直接的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T15:09:26.510

我会将查询重构为您的模型中的一个方法`specific_tasks`，然后从 RABL 调用类似这样的方法：

```
child specific_tasks: :tasks do
  extends "task/show"
end 
```

# c# - Visual Studio 2012 Extension VSIX 中的测试资源管理器列表

> ID：11283007
> 
> 赞同：4
> 
> 时间：2012-07-01T14:59:02.843
> 
> 标签：c#, visual-studio-2012, envdte, vsix, test-runner

我想从 Visual Studio 2012 扩展中的测试资源管理器中检索测试列表。

这是否可以使用 Package.GetGlobalService 或通过 DTE？

[编辑] 由于这没有得到回应，我将提供更多信息。

目前，希望运行解决方案测试的 IDE 扩展或插件通过提供自己的运行器来实现。Gallio 就是一个这样的测试运行器示例，它具有运行多种类型测试的插件。Resharper 是一个包含测试运行器的 IDE 扩展示例

VS2012 引入了一个新的 Test Runner，3rd 方测试库可以针对 nunit、xunit、qunit 进行开发。通过此更改，可以在 VS 本身内运行这些不同类型的测试，即通过“测试资源管理器”窗口。

对于与 IDE 测试交互的第 3 方，必须能够获取测试列表、运行测试并接收测试输出。

那么考虑到这一点，是否可以访问 VS 2012 IDE 中的测试接口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T08:44:13.120

这看起来是一个很好的起点：

[Visual Studio ALM 测试工具的 API 参考](http://msdn.microsoft.com/en-us/library/dd465178)

# jquery - 使用 AJAX 在 Orchard CMS 中刷新投影仪

> ID：11283014
> 
> 赞同：0
> 
> 时间：2012-07-01T14:59:43.060
> 
> 标签：jquery, asp.net-mvc-3, orchardcms

我使用管理面板创建了一个投影仪和一个查询，并按内容类型“课程”过滤了查询。

和我使用 jQuery 对话框的弹出表单相同的页面，它使用 AJAX 创建了一个内容类型为“Course”的新元素，效果很好，但是在创建它之后我想关闭对话框并**刷新投影仪**显示我刚刚创建的项目。

我应该使用 AJAX 调用哪种方法来刷新自定义投影仪？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T23:47:26.580

好吧， location.reload() 应该可以工作。

# c++ - 屏幕截图特定窗口

> ID：11283015
> 
> 赞同：13
> 
> 时间：2012-07-01T14:59:54.113
> 
> 标签：c++, windows, winapi, gdi

是否可以屏幕捕获特定窗口（也可能是另一个进程）？

目前我正在捕获特定显示器的整个桌面，但是我真正想要的是捕获特定窗口的内容（无论其位置如何）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-01T15:05:43.460

是的。您所需要的只是获取要捕获和使用 WinAPI 函数 PrintWindow 的窗口的句柄，例如：

```
// Get the window handle of calculator application.
HWND hWnd = ::FindWindow( 0, _T( "Calculator" ));

// Take screenshot.
PrintWindow( hWnd, getDC(hWnd), 0 ); 
```

[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162869%28v=vs.85%29.aspx)有 PrintWindow 文档。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-02T09:50:34.453

是的，就像捕获全屏一样简单。您只需`GetWindowDC()`在所需窗口上使用，而不是`GetDesktopWindow()`，然后`BitBlt()`从该窗口到目标 DC。您还可以使用`GetWindowRect()`.

请注意，此方法还允许您从隐藏/覆盖的窗口中捕获带有边界矩形的完整屏幕截图没有。

有关更多详细信息，请参阅[此问题。](https://stackoverflow.com/a/10123008/588306)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-04-30T07:17:12.463

Windows 10 中有一个新 API，Microsoft 在`winrt/Windows.Graphics.Capture.h` 这里有一个非常复杂的示例： [https ://github.com/microsoft/Windows.UI.Composition-Win32-Samples/tree/master/cpp/Scr​​eenCaptureforHWND](https://github.com/microsoft/Windows.UI.Composition-Win32-Samples/tree/master/cpp/ScreenCaptureforHWND)

我想创建一些脏示例（非常脏），在我的示例中，您有一个简单的函数可以获取`HWND`窗口并捕获它，并将其保存为`ScreenShot.bmp`

请注意，此函数中的错误处理很糟糕。欢迎您改进此答案！

笔记：

*   它应该适用于任何窗口。即使窗口没有`WDA_NONE`显示亲和力（[https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-setwindowdisplayaffinity](https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-setwindowdisplayaffinity)）
*   当窗口不在屏幕或被另一个窗口覆盖时，它也应该工作。即使部分窗口在屏幕上不可见，它也会获得完整的窗口框架
*   有一个限制是在捕获过程中您会在很短的时间内在窗口周围看到黄色边框

代码：

```
#include <iostream>
#include <Windows.h>
#include <dxgi.h>
#include <inspectable.h>
#include <dxgi1_2.h>
#include <d3d11.h>
#include <winrt/Windows.Foundation.h>
#include <winrt/Windows.System.h>
#include <winrt/Windows.Graphics.Capture.h>
#include <windows.graphics.capture.interop.h>
#include <windows.graphics.directx.direct3d11.interop.h>
#include <roerrorapi.h>
#include <shlobj_core.h>
#include <dwmapi.h>
#pragma comment(lib,"Dwmapi.lib")
#pragma comment(lib,"windowsapp.lib")

void CaptureWindow(HWND hwndTarget)
{
    // Init COM
    winrt::init_apartment(winrt::apartment_type::multi_threaded);

    // Create Direct 3D Device
    winrt::com_ptr<ID3D11Device> d3dDevice;

    winrt::check_hresult(D3D11CreateDevice(nullptr, D3D_DRIVER_TYPE_HARDWARE, nullptr, D3D11_CREATE_DEVICE_BGRA_SUPPORT,
                                           nullptr, 0,D3D11_SDK_VERSION, d3dDevice.put(), nullptr, nullptr));

    winrt::Windows::Graphics::DirectX::Direct3D11::IDirect3DDevice device;
    const auto dxgiDevice = d3dDevice.as<IDXGIDevice>();
    {
        winrt::com_ptr<::IInspectable> inspectable;
        winrt::check_hresult(CreateDirect3D11DeviceFromDXGIDevice(dxgiDevice.get(), inspectable.put()));
        device = inspectable.as<winrt::Windows::Graphics::DirectX::Direct3D11::IDirect3DDevice>();
    }

    auto idxgiDevice2 = dxgiDevice.as<IDXGIDevice2>();
    winrt::com_ptr<IDXGIAdapter> adapter;
    winrt::check_hresult(idxgiDevice2->GetParent(winrt::guid_of<IDXGIAdapter>(), adapter.put_void()));
    winrt::com_ptr<IDXGIFactory2> factory;
    winrt::check_hresult(adapter->GetParent(winrt::guid_of<IDXGIFactory2>(), factory.put_void()));

    ID3D11DeviceContext* d3dContext = nullptr;
    d3dDevice->GetImmediateContext(&d3dContext);

    RECT rect{};
    DwmGetWindowAttribute(hwndTarget, DWMWA_EXTENDED_FRAME_BOUNDS, &rect, sizeof(RECT));
    const auto size = winrt::Windows::Graphics::SizeInt32{rect.right - rect.left, rect.bottom - rect.top};

    winrt::Windows::Graphics::Capture::Direct3D11CaptureFramePool m_framePool =
        winrt::Windows::Graphics::Capture::Direct3D11CaptureFramePool::Create(
            device,
            winrt::Windows::Graphics::DirectX::DirectXPixelFormat::B8G8R8A8UIntNormalized,
            2,
            size);

    const auto activationFactory = winrt::get_activation_factory<
        winrt::Windows::Graphics::Capture::GraphicsCaptureItem>();
    auto interopFactory = activationFactory.as<IGraphicsCaptureItemInterop>();
    winrt::Windows::Graphics::Capture::GraphicsCaptureItem captureItem = {nullptr};
    interopFactory->CreateForWindow(hwndTarget, winrt::guid_of<ABI::Windows::Graphics::Capture::IGraphicsCaptureItem>(),
                                    reinterpret_cast<void**>(winrt::put_abi(captureItem)));

    auto isFrameArrived = false;
    winrt::com_ptr<ID3D11Texture2D> texture;
    const auto session = m_framePool.CreateCaptureSession(captureItem);
    m_framePool.FrameArrived([&](auto& framePool, auto&)
    {
        if (isFrameArrived) return;
        auto frame = framePool.TryGetNextFrame();

        struct __declspec(uuid("A9B3D012-3DF2-4EE3-B8D1-8695F457D3C1"))
            IDirect3DDxgiInterfaceAccess : ::IUnknown
        {
            virtual HRESULT __stdcall GetInterface(GUID const& id, void** object) = 0;
        };

        auto access = frame.Surface().as<IDirect3DDxgiInterfaceAccess>();
        access->GetInterface(winrt::guid_of<ID3D11Texture2D>(), texture.put_void());
        isFrameArrived = true;
        return;
    });

    session.IsCursorCaptureEnabled(false);
    session.StartCapture();

    // Message pump
    MSG msg;
    clock_t timer = clock();
    while (!isFrameArrived)
    {
        if (PeekMessage(&msg, NULL, 0, 0, PM_REMOVE) > 0)
            DispatchMessage(&msg);

        if (clock() - timer > 20000)
        {
            // TODO: try to make here a better error handling
            return;
        }
    }

    session.Close();

    D3D11_TEXTURE2D_DESC capturedTextureDesc;
    texture->GetDesc(&capturedTextureDesc);

    capturedTextureDesc.Usage = D3D11_USAGE_STAGING;
    capturedTextureDesc.BindFlags = 0;
    capturedTextureDesc.CPUAccessFlags = D3D11_CPU_ACCESS_READ;
    capturedTextureDesc.MiscFlags = 0;

    winrt::com_ptr<ID3D11Texture2D> userTexture = nullptr;
    winrt::check_hresult(d3dDevice->CreateTexture2D(&capturedTextureDesc, NULL, userTexture.put()));

    d3dContext->CopyResource(userTexture.get(), texture.get());

    D3D11_MAPPED_SUBRESOURCE resource;
    winrt::check_hresult(d3dContext->Map(userTexture.get(), NULL, D3D11_MAP_READ, 0, &resource));

    BITMAPINFO lBmpInfo;

    // BMP 32 bpp
    ZeroMemory(&lBmpInfo, sizeof(BITMAPINFO));
    lBmpInfo.bmiHeader.biSize = sizeof(BITMAPINFOHEADER);
    lBmpInfo.bmiHeader.biBitCount = 32;
    lBmpInfo.bmiHeader.biCompression = BI_RGB;
    lBmpInfo.bmiHeader.biWidth = capturedTextureDesc.Width;
    lBmpInfo.bmiHeader.biHeight = capturedTextureDesc.Height;
    lBmpInfo.bmiHeader.biPlanes = 1;
    lBmpInfo.bmiHeader.biSizeImage = capturedTextureDesc.Width * capturedTextureDesc.Height * 4;

    std::unique_ptr<BYTE> pBuf(new BYTE[lBmpInfo.bmiHeader.biSizeImage]);
    UINT lBmpRowPitch = capturedTextureDesc.Width * 4;
    auto sptr = static_cast<BYTE*>(resource.pData);
    auto dptr = pBuf.get() + lBmpInfo.bmiHeader.biSizeImage - lBmpRowPitch;

    UINT lRowPitch = std::min<UINT>(lBmpRowPitch, resource.RowPitch);

    for (size_t h = 0; h < capturedTextureDesc.Height; ++h)
    {
        memcpy_s(dptr, lBmpRowPitch, sptr, lRowPitch);
        sptr += resource.RowPitch;
        dptr -= lBmpRowPitch;
    }

    // Save bitmap buffer into the file ScreenShot.bmp
    WCHAR lMyDocPath[MAX_PATH];

    winrt::check_hresult(SHGetFolderPath(nullptr, CSIDL_PERSONAL, nullptr, SHGFP_TYPE_CURRENT, lMyDocPath));

    std::wstring lFilePath = L"ScreenShot.bmp";

    FILE* lfile = nullptr;

    if (auto lerr = _wfopen_s(&lfile, lFilePath.c_str(), L"wb"); lerr != 0)
        return;

    if (lfile != nullptr)
    {
        BITMAPFILEHEADER bmpFileHeader;

        bmpFileHeader.bfReserved1 = 0;
        bmpFileHeader.bfReserved2 = 0;
        bmpFileHeader.bfSize = sizeof(BITMAPFILEHEADER) + sizeof(BITMAPINFOHEADER) + lBmpInfo.bmiHeader.biSizeImage;
        bmpFileHeader.bfType = 'MB';
        bmpFileHeader.bfOffBits = sizeof(BITMAPFILEHEADER) + sizeof(BITMAPINFOHEADER);

        fwrite(&bmpFileHeader, sizeof(BITMAPFILEHEADER), 1, lfile);
        fwrite(&lBmpInfo.bmiHeader, sizeof(BITMAPINFOHEADER), 1, lfile);
        fwrite(pBuf.get(), lBmpInfo.bmiHeader.biSizeImage, 1, lfile);

        fclose(lfile);
    }

    return;
} 
```

如何使用：

```
auto targetHwnd = FindWindow(L"Notepad",NULL); // Or user any other HWND
CaptureWindow(targetHwnd); // If it worked, it will create ScreenShot.bmp file 
```

# sql - SQL 错误：向 Ireport 插入 sql 查询时参数太少

> ID：11283027
> 
> 赞同：0
> 
> 时间：2012-07-01T15:01:17.407
> 
> 标签：sql, ms-access

这是我用于插入 ireport 的 sql 查询。

```
SELECT Format([DatePaid],"mmmm") AS Expr1
    , Sum(Payment.[TotalAmount]) AS TotalAmountOfCount
FROM Payment
GROUP BY Format([DatePaid],"mmmm"); 
```

问题来了。。

> SQL问题：[Microsoft][ODBC Microsoft Access Driver]参数太少。预期 1。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T15:14:15.707

将查询粘贴到查询设计窗口中。它将突出问题。字段名称可能拼写错误。

# c# - 如何交换列表中的 2 个元素

> ID：11283028
> 
> 赞同：2
> 
> 时间：2012-07-01T15:01:23.427
> 
> 标签：c#, list, xna, swap

> **可能重复：**
> [交换 List<T> 中的两个项目](https://stackoverflow.com/questions/2094239/swap-two-items-in-listt)

编辑：也许这将有助于获得'b'值？

```
for (int i = 0; i < inventory.Count; i++)
{
    if (inventory[a].ItemRectangle.Intersects(inventory[i].ItemRectangle))
    {
        itemB = inventory[i];
    }
} 
```

编辑：这是我的进展。

```
Item itemA;
Item itemB;

int a = -1;
int b = -1;

if (a != -1 && b != -1)
{
    itemA = inventory[a];
    itemB = inventory[b];

    Swap(ref itemA, ref itemB);

    inventory[a] = itemA;
    inventory[b] = itemB;
} 
```

这就是我得到“a”值的地方。

```
if (item.ItemSelected == true)
{
    a = item.ItemIndex;
}
else
    a = -1; 
```

我还没有弄清楚如何获得“b”值，因为我必须检查一个项目是否与同一个列表中的另一个项目发生冲突。如果有人知道我该怎么做，请告诉我。我猜它看起来像这样：

```
if (item.ItemRectangle.Intersects(//the other item.ItemRectangle)
{
    b = item.ItemIndex;
}
else
    b = -1; 
```

我制作了一个名为清单的列表<项目>。所以现在我想实现一个交换功能，如下所示：

```
foreach (Item item in inventory)
{
    if (mouseRectangle.Intersects(item.ItemRectangle))
    {
        if (Input.EdgeDetectLeftMouseDown())
        {
            switch (item.ItemSelected)
            {
                case false:
                    item.ItemSelected = true;
                    break;
                case true:
                    item.ItemSelected = false;
                    break;
            }
        }  
    }
    else if (Input.EdgeDetectLeftMouseDown())
    {
        switch (item.ItemSelected)
        {
            case true:
                item.ItemSelected = false;
                break;
        }
    }
    else if (item.ItemSelected == true)
    {
        item.ItemPosition = new Vector2(mouseRectangle.X, mouseRectangle.Y);
        item.ItemRectangle = new Rectangle(mouseRectangle.X, mouseRectangle.Y, 32, 32);
    }
    else if (item.ItemSelected == false && //a lot of checks to determine it is not intersecting with an equip slot
    {
        item.ItemPosition = item.OriginItemPosition;
        item.ItemRectangle = item.OriginItemRectangle;
    }
    else if (item.ItemRectangle.Intersects(item.ItemRectangle))
    {
        //SwapItem(inventory, item, item);
    } 
```

这就是我需要帮助的代码部分。我希望列表中的任何项目都能够与列表中的任何其他项目交换。我的 SwapItem 方法只是一个占位符，我实际上还没有 SwapItem 方法。

我希望您传递给方法的参数与我要交换的项目相关。所以第一个项目是我用鼠标选择的项目，另一个项目应该是第一个项目与之相交的项目。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-01T15:15:40.783

要交换列表的元素，您可以编写[扩展方法](http://msdn.microsoft.com/en-us/library/bb383977.aspx)。

```
public static class ExtensionMethods
{
    public static void Swap<T>(this List<T> list, int index1, int index2)
    {
         T temp = list[index1];
         list[index1] = list[index2];
         list[index2] = temp;
    }
} 
```

请记住将扩展方法放在静态类中。

那么你可以这样做：

```
yourList.Swap(0,1); // swap element at index 0 with element at index 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T15:07:16.220

要交换两个变量的值，最简单的方法是使用引用。这是 C++ 中的经典指针练习，但它也适用于 C#。

```
// Replace int with any data type / class you need
void Swap (ref int a, ref int b)
{
   int c = a; 
   a = b; 
   b = c;
} 
```

使用的算法很简单，解释通常是这样的：你有两个杯子，一个是水的，一个是油的。要将油放入第一个玻璃杯中，您需要使用第三个玻璃杯，将水放入其中，然后将油放入第一个玻璃杯中，然后将水放入第二个玻璃杯中。

* * *

这是我的想法。查找评论，以便您了解发生了什么。：

```
// Unlike foreach, with for I can change the values in the list
for (int i = 0; i < inventory.Count; i++)
{
    if (mouseRectangle.Intersects(inventory[i].ItemRectangle))
    {
        if (Input.EdgeDetectLeftMouseDown())
        {
            // You can replace the switch with this shorter structure
            // if A is a bool value, !A will have the opposite value
            inventory[i].ItemSelected = !inventory[i].ItemSelected;
        }  
    }
    else if (Input.EdgeDetectLeftMouseDown())
    {
        // You don't need a case-switch for a single condition. An if should suffice
        if (inventory[i].ItemSelected) 
            inventory[i].ItemSelected = false;
    }
    else if (inventory[i].ItemSelected == true)
    {
        inventory[i].ItemPosition = new Vector2(mouseRectangle.X, mouseRectangle.Y);
        inventory[i].ItemRectangle = new Rectangle(mouseRectangle.X, mouseRectangle.Y, 32, 32);
    }
    else if (inventory[i].ItemSelected == false && //a lot of checks to determine it is not intersecting with an equip slot
    {
        inventory[i].ItemPosition = inventory[i].OriginItemPosition;
        inventory[i].ItemRectangle = inventory[i].OriginItemRectangle;
    }

    // Something definitely wrong with this line, a rectangle to instersect with itself??
    else if (inventory[i].ItemRectangle.Intersects(inventory[PROBABLY_SOMETHING_ELSE].ItemRectangle))
    {
        Swap (ref inventory[i], ref inventory[PROBABLY_SOMETHING_ELSE])
    }
} 
```

# android - 如何为 Android 构建可插拔应用程序？

> ID：11283029
> 
> 赞同：1
> 
> 时间：2012-07-01T15:01:32.420
> 
> 标签：android, themes, android-theme, pluggable

如何为 android 创建可插拔应用程序？
如果您使用过[GoSMS Pro](https://play.google.com/store/apps/details?id=com.jb.gosms)，您可以看到主题可以单独安装，然后用于更改主要应用程序的外观。
我想知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T15:05:26.240

一些应用程序支持第三方主题，例如 ADW Launcher 和 GO Launcher。但是，制作它们的过程因应用程序而异。对于这个应用程序，他们发布了一个工具，您可以在[此处](http://gosms.goforandroid.com/?p=207)了解。完成后，您可以使用@Force 答案中的详细信息发布它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T15:04:13.433

好吧，您可以简单地发送所有插件都接收到的广播（确保它们具有基于签名的权限！）

您可能想看看[如何使用 Android Market 发布应用程序插件？](https://stackoverflow.com/questions/4803342/how-to-release-application-plugin-using-android-market)

# arrays - Drupal 在数组中搜索

> ID：11283031
> 
> 赞同：0
> 
> 时间：2012-07-01T15:01:59.260
> 
> 标签：arrays, drupal, views, cck

我在视图中有一个 CCK 字段，其中有分类术语。不同的类别在页面上有不同的部分，并且有重叠的类别。

我想搜索数组，查找它是否具有特定的分类值，然后相应地打印 html 我没有找到重叠类别的任何内容。

```
<?php
$vu=array('value' => $fields['tid']->content);
if (in_array("Film", $vu)) {
echo "Got Films";
}
?> 
```

这是我得到的，但这并没有产生预期的效果。'tid' 是分类 CCK。我在视图字段模板下执行此操作，这就是我不使用 $node-> 等的原因。

如果我只是打印出 $vu 我会得到“Array Array Array Array”等。

对不起，如果我问的问题很简单，但我试图在谷歌上搜索，但我失败了。

编辑1：

print_r $vu 的结果

产品标题数组 ( [value] =>

*   分类术语 1
*   分类术语 2

)

EDIT2：我想我正在解决问题的“部分”。CCK 字段输出为 A.，html 列表格式为 B.，因为数组被搞砸了。任何想法如何设置视图给我“原始”输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T20:47:53.370

我认为你应该安装[devel 模块](http://drupal.org/project/devel)，然后使用 dpm() 函数来查看你的变量。现在只需要多花一点时间，但它会在将来为您节省大量时间，当您想知道 Drupal 的某些对象和数组的疯狂结构时。:-)

安装模块后，只需使用 dpm($fields); 看看你在里面有什么。这是一个非常用户友好的输出。

让我知道这是否对您有帮助！

# oracle - PL/SQL 调用包外的函数

> ID：11283032
> 
> 赞同：0
> 
> 时间：2012-07-01T15:01:59.593
> 
> 标签：oracle, plsql

我在包外定义了一个函数，试图调用这个函数，失败了。

如何解决？谢谢

```
create or replace
package body test_erp AS    
    procedure init_data is
    begin             
        logMessage('procedure init_data');
    end init_data;        
end test_erp;
/

show error 
```

错误是

```
PLS-00221: 'LOGMESSAGE' is not a procedure or is undefined 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T15:09:42.690

正如错误所暗示`logmessage`的，这不是一个程序。这是一个功能。当函数返回一些东西时，你需要将它分配给一个变量。你知道它`logmessage`返回一个数字，所以你需要声明一个变量来放入这个返回值。

```
create or replace package body test_erp AS    
    procedure init_data is

    l_success number;

    begin        

        l_message := logMessage('procedure init_data');
        dbms_output.put_line(to_char(l_success));

    end init_data;        

end test_erp;
/ 
```

但是，看起来实际上应该是一个程序`logmessage` *。*我假设您正在执行 DML 语句（更新/插入）。除非是这种情况，否则在语句中使用函数调用`select`，这意味着总是有可能发生错误。如果`logmessage`是一个过程，您可以声明一个[`out`](http://psoug.org/snippet/FUNCTIONS-IN-OUT-parameter_873.htm)参数来告诉调用过程是否一切正常；类似于以下内容：

```
create or replace procedure logmessage( msg in varchar2, success out number) is

begin

   insert into logs values(msg);
   success := 1;
exception when others then
   success := 0;
end logmessage; 
```

然后，您可以按如下方式调用它：

```
create or replace package body test_erp AS    
   procedure init_data is

       l_success number;

   begin        

      logMessage('procedure init_data', l_success);
      dbms_output.put_line(to_char(l_success));

   end init_data;        
end test_erp;
/ 
```

如果`logmessage`不打算在包装外使用，`test_erp`我会把它放在包装内；它使命名空间保持清洁并避免它被错误地用作另一个包/调用等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T15:09:53.110

假设这`logMessage`是与[这篇](https://stackoverflow.com/questions/11282735/pl-sql-function-parameter)文章相同的功能：

由于`logMessage`是一个函数（并返回一个数字），因此您需要像这样调用它：

```
procedure init_data is
    i number;
begin             
    i := logMessage('procedure init_data');
end init_data; 
```

# macos - 从 gtk.Window 获取底层 NSWindow

> ID：11283036
> 
> 赞同：2
> 
> 时间：2012-07-01T15:02:27.247
> 
> 标签：macos, pygtk, pyobjc

以下是关于 Mac 上带有 Quartz 后端的 gtk2。如果我有一个 gtk.Window（或一个 gdk.Window），我如何获得底层的 NSWindow（最好是一个 pyobjc 对象，或者如果这不可能，只是一个指针）？

（我正在尝试获取 [window windowNumber]，这是启用模糊透明窗口所必需的。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T15:11:59.510

不确定 pygtk 中函数的确切名称，但我相信在 C 中你可以调用`gdk_quartz_window_get_nswindow()`.

# java - apache poi evaluateall() 不可用

> ID：11283037
> 
> 赞同：0
> 
> 时间：2012-07-01T15:02:34.173
> 
> 标签：java, apache-poi

我创建了一个工作簿并想要评估所有公式：

```
Workbook wbTemp = new HSSFWorkbook(inp);

//do workbook stuff here

wbTemp.getCreationHelper().createFormulaEvaluator().evaluateAll(); 
```

我收到此错误：

```
The method evaluateAll() is undefined for the type FormulaEvaluator 
```

当它[在这里](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/FormulaEvaluator.html)清楚地说明 evaluateAll 是现有方法时。可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T15:45:34.887

您几乎可以肯定在您的类路径中有两个 POI 副本。一个是包含您要使用的功能的最新版本。另一个是旧版本，没有，而且您的系统似乎更喜欢旧版本......

这是一个很常见的问题，[POI FAQ 涵盖了这种情况](http://poi.apache.org/faq.html#faq-N10006)。理想情况下，只需查看您的类路径，并尝试识别更旧的 POI jar。但是，如果这不起作用，请尝试 POI FAQ 中的这段代码：

```
ClassLoader classloader =
   org.apache.poi.poifs.filesystem.POIFSFileSystem.class.getClassLoader();
URL res = classloader.getResource(
         "org/apache/poi/poifs/filesystem/POIFSFileSystem.class");
String path = res.getPath();
System.out.println("Core POI came from " + path); 
```

这将打印出您正在使用的 POI jar 的文件名，因此您可以确定旧副本的来源并删除它！

# java - 禁用时禁用 selectOne 的验证

> ID：11283038
> 
> 赞同：0
> 
> 时间：2012-07-01T15:02:48.363
> 
> 标签：java, jsf, richfaces, selectonemenu

我试图找出以下问题。我有一个简单的富人：选择

```
<rich:select listWidth="310" id="userSelect" value="#{departmentBacking.selectedUserId}" 
disabled="#{departmentBacking.unassignCheckbox}"enableManualInput="true" defaultLabel="#{not departmentBacking.unassignCheckbox ? 'start typing a surname...' : 'Uncheck unassign departments first'}">

        <f:selectItems value="#{departmentBacking.userList}" var="user" itemValue="#{user.id}" itemLabel="#{user.surname} #{user.name} - #{user.email}" />

</rich:select> 
```

它选择一个人，后来被设置为某些部门的领导。效果很好。但是，如果我只需要取消分配部门而不选择新部门，就会开始出现问题。如果选择了 unnassignCeckbox，我根本不想使用这个值。但是，我无法让 jsf 引擎进行回发，因为我总是收到验证错误。

```
MyForm:userSelect: Validation Error: Value is not valid 
```

我认为这是因为 #{user.id} 的默认值为 0，并且在 userList 中找不到具有此 id 的用户。bean 是视图范围的。有没有办法以某种方式跳过验证或排除富人：从提交表单中选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T15:14:40.640

尝试添加`<f:selectItem>`0 值和“SELECT”标签（或其他）。这将解决您的问题，并添加一个验证，即当取消选择 unnassignCeckbox 时， selectedUserId 值必须大于 0（仅当它尚未实现时才最后）。

```
<rich:select listWidth="310" id="userSelect" value="#{departmentBacking.selectedUserId}" 
    disabled="#{departmentBacking.unassignCheckbox}"enableManualInput="true"
    defaultLabel="#{not departmentBacking.unassignCheckbox ? 'start typing a surname...' : 'Uncheck unassign departments first'}">

    <f:selectItem itemValue="0" itemLabel = "SELECT SURNAME" />
    <f:selectItems value="#{departmentBacking.userList}" var="user"
        itemValue="#{user.id}"
        itemLabel="#{user.surname} #{user.name} - #{user.email}" />

</rich:select> 
```

# c# - 将 XML 字符串反序列化为复杂类型

> ID：11283040
> 
> 赞同：2
> 
> 时间：2012-07-01T15:02:56.367
> 
> 标签：c#, xml, deserialization

我的 Xml（我无法更改）：

```
<result>
    <type>MAZDA</type>
    <make>RX-8</type>
    <country>JAPAN</country>
</result> 
```

我的模型：

```
[Serializable, XmlRoot("result")]
public class VehicleDetails
{
    public string Type { get; set; }
    public string Make { get; set; }
    public string Country { get; set; }
} 
```

反序列化此 XML 按预期工作，但我想将`Country`属性更改为复杂类型，如下所示：

```
public Country Country { get; set; } 
```

并在`Country.Name`属性中输入国家名称“JAPAN”，有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T15:09:45.303

您可以使用如下属性装饰`Name`您的`Country`类的[`[XmlText]`](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmltextattribute.aspx)属性：

```
[XmlRoot("result")]
public class VehicleDetails
{
    public string Type { get; set; }
    public string Make { get; set; }
    public Country Country { get; set; }
}

public class Country
{
    [XmlText]
    public string Name { get; set; }
} 
```

另请注意，我已经摆脱了该`[Serializable]`属性。它对 XML 序列化毫无用处。此属性用于二进制/远程序列化。

这是一个完整的示例，将按`JAPAN`预期打印：

```
using System;
using System.IO;
using System.Xml;
using System.Xml.Serialization;

[XmlRoot("result")]
public class VehicleDetails
{
    public string Type { get; set; }
    public string Make { get; set; }
    public Country Country { get; set; }
}

public class Country
{
    [XmlText]
    public string Name { get; set; }
}

class Program
{
    static void Main()
    {
        var serializer = new XmlSerializer(typeof(VehicleDetails));
        var xml = 
        @"<result>
            <Type>MAZDA</Type>
            <Make>RX-8</Make>
            <Country>JAPAN</Country>
        </result>";
        using (var reader = new StringReader(xml))
        using (var xmlReader = XmlReader.Create(reader))
        {
            var result = (VehicleDetails)serializer.Deserialize(xmlReader);
            Console.WriteLine(result.Country.Name);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:55:32.113

这是VB 2010等效...

```
Imports System.IO
Imports System.Xml
Imports System.Xml.Serialization

Public Module Module1

    Public Sub Main()
        Dim serializer = New XmlSerializer(GetType(VehicleDetails))
        Dim xml = "<result>             <Type>MAZDA</Type>             <Make>RX-8</Make>             <Country>JAPAN</Country>         </result>"

        Using reader = New StringReader(xml)
            Using xmlReader__1 = XmlReader.Create(reader)
                Dim result = DirectCast(serializer.Deserialize(xmlReader__1), VehicleDetails)
                Console.WriteLine(result.Country.Name)
            End Using
        End Using
    End Sub

    <XmlRoot("result")> _
    Public Class VehicleDetails

        Public Property Type() As String
            Get
                Return m_Type
            End Get
            Set(value As String)
                m_Type = value
            End Set
        End Property
        Private m_Type As String

        Public Property Make() As String
            Get
                Return m_Make
            End Get
            Set(value As String)
                m_Make = value
            End Set
        End Property
        Private m_Make As String
        Public Property Country() As Country
            Get
                Return m_Country
            End Get
            Set(value As Country)
                m_Country = value
            End Set
        End Property
        Private m_Country As Country

    End Class
    Public Class Country
        <XmlText()> _
        Public Property Name() As String
            Get
                Return m_Name
            End Get
            Set(value As String)
                m_Name = value
            End Set
        End Property
        Private m_Name As String
    End Class

End Module 
```

# sql - 访问小计 - 按字段分组应该只出现一次

> ID：11283041
> 
> 赞同：1
> 
> 时间：2012-07-01T15:02:56.960
> 
> 标签：sql, ms-access

我在访问中有一个查询，如下所示

```
select field1, column_date, sum(qty) from table
group by field1, column_date
union all
select field1, 'subtotal' as column_date, sum(qty) from table
group by field1
union all
select '', 'Grand Total' as column_date, sum(qty) from table 
```

上面的代码显示输出如下：

```
field1 | column_date | qty1 | qty2 | qty3 | qty4
xyz    | 1 June 2012 | 23   | 36   | 343  | 45
xyz    | 2 June 2012 | 24   | 33   | 123  | 12
xyz    | 3 June 2012 | 55   | 25   | 21   | 45
**xyz    | subtotal    | 102  | 94   | 487  | 102**
abc    | 1 June 2012 | 15   | 23   | 46   | 21
abc    | 2 June 2012 | 24   | 81   | 25   | 21
abc    | 7 June 2012 | 33   | 25   | 43   | 21 
**abc    | subtotal    | 72   | 129  | 114  | 63**
etc...... 
```

但我不想每次都重复 field1 值。我只想在顶部显示一次，如下所示。

```
field1 | column_date | qty1 | qty2 | qty3 | qty4
xyz    | 1 June 2012 | 23   | 36   | 343  | 45
       | 2 June 2012 | 24   | 33   | 123  | 12
       | 3 June 2012 | 55   | 25   | 21   | 45
       | subtotal    | 102  | 94   | 487  | 102
abc    | 1 June 2012 | 15   | 23   | 46   | 21
       | 2 June 2012 | 24   | 81   | 25   | 21
       | 7 June 2012 | 33   | 25   | 43   | 21 
       | subtotal    | 72   | 129  | 114  | 63**
etc...... 
```

是否可以使用查询或 VBA 代码？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:24:34.857

OP已经表达了对VBA的初学者理解，所以对于可能使用此代码的其他人，请在阅读时牢记这一点并注意代码中的注释。

请将此 VBA 视为可能的解决方案。我已经在 access 2007 数据库中对此进行了测试。我用一个按钮创建了一个表单，它的 on_click 事件调用了这个子例程。

执行此操作后，您可以让按钮 on_click 事件调用 VBA 模块，该模块将“tbl_output”中包含的数据导出到 Excel 电子表格。

下面是一个屏幕截图，显示了它按要求工作的证明：

![正确汇总的记录证明](../Images/d6d8e46c83f4b519aba06dacf249840c.png)

这是我提出的使这成为可能的代码。这是我对如何实现最终结果的解释：

```
Option Explicit

Public Sub QueryRollUp()

Dim db As Database
Dim rst_Input As DAO.Recordset
Dim rst_Output As DAO.Recordset
Dim strSQL As String
Dim tdfNew As TableDef
Dim tdfLoop As TableDef
Dim prpLoop As Property
Dim s_tdef As String
Dim s_CurrentRollUp As String
Dim s_CurrentField1 As String
Dim s_CurrentDate As String
Dim s_CurrentQty1 As Integer
Dim s_CurrentQty2 As Integer
Dim s_CurrentQty3 As Integer
Dim s_CurrentQty4 As Integer
Dim i As Integer

' If the subroutine is going to access parts of the database (tables, queries, etc.)
' you must have a representation of the database in the code.
' In this code, I use 'db' as that representation.
' VBA has a shortcut for defining the database that is currently open, and that is         'CurrentDB'.
' You can define an external database if necessary, but that goes beyond the scope of     this example.
' The below line sets the database code object 'db' equal to this database

Set db = CurrentDb

' The next step is to create a new table programaitcally for the output to go
' I choose to do this in code instead of building it in table designer
' because I want to ensure you get the correct tbl_Output that my code is
' expecting.  If you were desining a new module, and new how the correct table needed
' to be designed, you can omit everything between the hash marks

'#####################################################################################

' This current database.
' I like to use 'With' so I don't have to keep typing the name.
' I can just type .something and the code knows I really mean db.something
' Each 'With' must have an 'End With' to let the code know when you are no longer
' wanting it to assume you are using the short cut.

With db

'this loops trough all of the items in the table definitions
'the looping logic takes place between the % signs
'%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
For Each tdfLoop In .TableDefs
    ' Check the name of an item 'tdfLoop.Name' to see if it the
    ' same as "tbl_Output".
    If tdfLoop.Name = "tbl_Output" Then
        ' We are going to create this table later.
        ' If the table already exists, it will cause an error and
        ' the code will halt.  Deleting the table prevents the
        ' conflict.

        db.TableDefs.Delete "tbl_Output"

    End If

' This bit of code moves to the next item in the table definitions collection
' and then loops back and tests for tbl_Output again.
Next tdfLoop
'%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
End With

' Create a new TableDef object.
' This assigns the object "tbl_Output" to a variable so I can access it
' shorthand.  The variable is called 'tdfNew'
Set tdfNew = db.CreateTableDef("tbl_Output")

' Using the 'With' again, but this time is tdfNew, and not db that
' I am shortcutting.  Remember that there is an implied 'tdfNew'
' in front of each .Fields.Append an also .CreateField(...)

With tdfNew
' Create fields and append them to the new TableDef
' object. This must be done before appending the
' TableDef object to the TableDefs collection of the
' database.

' Each line here adds a new field to the table
' This is the code equivilent of designing a table
' in the graphical UI
.Fields.Append .CreateField("name", dbText)
.Fields.Append .CreateField("column_date", dbText)
.Fields.Append .CreateField("qty1", dbInteger)
.Fields.Append .CreateField("qty2", dbInteger)
.Fields.Append .CreateField("qty3", dbInteger)
.Fields.Append .CreateField("qty4", dbInteger)

' Append the new TableDef object to the database.
' The net effect of this is to create a new table
' within the database using the information above.
db.TableDefs.Append tdfNew

End With

'#####################################################################################
' Open rst_Output as a recordset tied to new 'tbl_Output' table\
' the .OpenRecordset creates an incode representation of a database table.
' All of the specified table columns are recreated, and populated.  If no
' specific columns are listed (such as in a query), then it defaults to all columns.

' When using the .OpenRecordset("table_name", [type]) method, there are several [types]
' you can choose.  The type you choose determines the way it opens in the code
' and what you can do with it.  The most flexible is dbOpenDynaset, but is generally     slower
' in performacne with huge amounts of data.  dbOpenTable is equivelant to opening the     table directly

Set rst_Output = db.OpenRecordset("tbl_Output", dbOpenTable)

' Create query string to pull data from the database.
' For readability I have split this process up on several lines.
' Each time a new line is needed you must add the
' new information to the information you already have
' This is accomplished by doing strSQL = strSQL & "..." on each line after the first
' If you just did strSQL = "..." for each line, you would overwrite what was there     before

strSQL = "select field1, column_date, sum(qty1) as Total1, sum(qty2) as Total2,     sum(qty3) as Total3, sum(qty4) as Total4 "
strSQL = strSQL & " from [table]"
strSQL = strSQL & " group by field1, column_date"
strSQL = strSQL & " union all"
strSQL = strSQL & " select field1, 'subtotal' as column_date, sum(qty1) as Total1, sum(qty2) as Total2, sum(qty3) as Total3, sum(qty4) as Total4 "
strSQL = strSQL & " from [table]"
strSQL = strSQL & " group by field1"
strSQL = strSQL & " union all"
strSQL = strSQL & " select '', 'Grand Total' as column_date, sum(qty1) as Total1,     sum(qty2) as Total2, sum(qty3) as Total3, sum(qty4) as Total4 "
strSQL = strSQL & " from [table]"
strSQL = strSQL & " order by field1 desc, column_date asc"

' After the above code, your whole query is now stored in strSQL.

' Execute query and populate rst_Input with the result set.
' Ensure full recordset has been retrieved before continuing.
' This becomes more important the larger the result set is.
' The dbOpenSnapshot type is like creating a virtual image
' of the data just queried.  Like a photo, it can't be changed,
' only looked at.  Since we only want to read the data, this
' is a more optimal type of OpenRecordset than a dynaset.
' All of the contents are moved into rst_Input.

Set rst_Input = db.OpenRecordset(strSQL, dbOpenSnapshot)

' Now we are going to manipulate the information
' returned by the query as it is stored inside the
' rst_Input variable.
With rst_Input
' The .MoveLast forces the recordset to go the very last
' record of the returned query.  Omitting this step could
' result in the code starting before all of the data is
' returned by the query.
' .MoveFirst returns to the top of the list once all data
' is returned

.MoveLast
.MoveFirst

' Begin process of evaluating query results
' This will keep looping until the current record is the
' end of the returned data.
Do Until .EOF

    ' Use 'i' as the index of the current roll-up value.
    ' Default this value to 1 for the first each time the field1 value changes.
    ' The example  has 'xyz' and 'abc'.
    i = 1

    ' Move the data from the query which is stored in
    ' the rst_Input from the fields to variables
    s_CurrentRollUp = .Fields("field1").Value
    s_CurrentField1 = .Fields("field1").Value
    s_CurrentDate = .Fields("column_date").Value
    s_CurrentQty1 = .Fields("total1").Value
    s_CurrentQty2 = .Fields("total2").Value
    s_CurrentQty3 = .Fields("total3").Value
    s_CurrentQty4 = .Fields("total4").Value

    ' While working with all field1 values (i.e. 'xyz') values which are the same
    ' the following 'Do While' loop will execute.
    Do While s_CurrentRollUp = s_CurrentField1
        ' If this is the firs time the values match do everything betwen the '#' marks
        If i = 1 Then
        '#############################################

            ' If the CurrentDate value is not a real date
            ' do the following
            If s_CurrentDate = "Grand Total" Then

                With rst_Output

                    ' .AddNew tells the recordset we are adding a new record
                    .AddNew

                    ' Here we use a '!' (pronounced 'bang') to let VBA know
                    ' we are accessing members of a collection, and not a
                    ' method of doing something with rst_Output.
                    !column_date = s_CurrentDate
                    !qty1 = s_CurrentQty1
                    !qty2 = s_CurrentQty2
                    !qty3 = s_CurrentQty3
                    !qty4 = s_CurrentQty4

                    ' .Update tells the recordset we are done adding, and to save it
                    .Update
                End With

            ' If the CurrentDate value is a real date
            ' do the following
            Else
                With rst_Output
                    .AddNew

                    !Name = s_CurrentField1
                    !column_date = s_CurrentDate
                    !qty1 = s_CurrentQty1
                    !qty2 = s_CurrentQty2
                    !qty3 = s_CurrentQty3
                    !qty4 = s_CurrentQty4
                    .Update
                End With
            End If
            ' set index to optimistically reflect second record of rollup
            ' Values above '1' tell the logic that we are still using the
            ' same field1 ('xyz') value, but are no longer on the first
            ' occurance of the 'xyz' value.
            i = i + 1

            ' move to the next record of the input recordset
            .MoveNext

            'test if last move is the end of file
            If .EOF Then
                'exit sub if the end of file has been reached.
                Exit Sub
            End If

            ' get next field1 value to test in the do while exit condition
            If IsNull(.Fields("field1").Value) Then
                s_CurrentField1 = " "
            Else
                s_CurrentField1 = .Fields("field1").Value
            End If

        '#############################################
        ' If there is another record with the same field1 value (i.e. 'xyz'
        ' then do the following logic.
        ' This will replace the 'xyz' with an empty value so it does not
        ' show up in the tbl_Output table
        ElseIf i > 1 Then

            ' Move the data from the query which is stored in
            ' the rst_Input from the fields to variables
            s_CurrentField1 = " "
            s_CurrentDate = .Fields("column_date").Value
            s_CurrentQty1 = .Fields("total1").Value
            s_CurrentQty2 = .Fields("total2").Value
            s_CurrentQty3 = .Fields("total3").Value
            s_CurrentQty4 = .Fields("total4").Value

            With rst_Output
                .AddNew
                !Name = s_CurrentField1
                !column_date = s_CurrentDate
                !qty1 = s_CurrentQty1
                !qty2 = s_CurrentQty2
                !qty3 = s_CurrentQty3
                !qty4 = s_CurrentQty4
                .Update
            End With

            ' Set index to optimistically reflect second record of rollup
            i = i + 1

            ' Move to the next record of the input recordset
            .MoveNext

            ' Get next field1 value to test in the do while exit condition
            ' The IsNull makes sure that in the event that no information
            ' exists in the field1 column of the table, it is replaced with
            ' a " " character to avoid an invalid use of NULL in the variable
            If IsNull(.Fields("field1").Value) Then
                s_CurrentField1 = " "
            Else
                s_CurrentField1 = .Fields("field1").Value
            End If

        End If

    Loop  'do while

Loop 'do until

End With

' Now that everything has finished, it's proper coding technique
' to release all of the resources consumed by our data containing
' variables.
db.Close
rst_Output.Close
rst_Input.Close
Set db = Nothing
Set rst_Output = Nothing
Set rst_Input = Nothing

End Sub 
```

# c++ - 如何从大文本文件中选择行数？

> ID：11283045
> 
> 赞同：1
> 
> 时间：2012-07-01T15:03:24.203
> 
> 标签：c++, algorithm

我想知道如何从某个文本文件中选择行数。例如：我有一个包含以下行的文本文件：

```
branch 27 : rect id 23400
rect:   -115.475609 -115.474907
    31.393650   31.411301
branch 28 : rect id 23398
rect:   -115.474907 -115.472282
    31.411301   31.417351
branch 29 : rect id 23396
rect:   -115.472282 -115.468033
    31.417351   31.427151
branch 30 : rect id 23394
rect:   -115.468033 -115.458733
    31.427151   31.438181
Non-Leaf Node:  level=1  count=31  address=53
branch 0 : rect id 42
rect:   -115.768539 -106.251556
    31.425039   31.717550
branch 1 : rect id 50
rect:   -109.559479 -106.009361
    31.296721   31.775299
branch 2 : rect id 51
rect:   -110.937401 -106.226143
    31.285870   31.771971
branch 3 : rect id 54
rect:   -109.584412 -106.069092
    31.285240   31.775230
branch 4 : rect id 56
rect:   -109.570961 -106.000954
    31.296721   31.780769
branch 5 : rect id 58
rect:   -115.806213 -106.366188
    31.400450   31.687519
branch 6 : rect id 59
rect:   -113.173859 -106.244057
    31.297440   31.627750
branch 7 : rect id 60
rect:   -115.811478 -106.278252
    31.400450   31.679470
branch 8 : rect id 61
rect:   -109.953888 -106.020111
    31.325319   31.775270
branch 9 : rect id 64
rect:   -113.070969 -106.015968
    31.331841   31.704750
branch 10 : rect id 68
rect:   -113.065689 -107.034576
    31.326300   31.770809
branch 11 : rect id 71
rect:   -112.333344 -106.059860
    31.284081   31.662920
branch 12 : rect id 73
rect:   -115.071083 -106.309677
    31.267879   31.466850
branch 13 : rect id 74
rect:   -116.094414 -106.286308
    31.236290   31.424770
branch 14 : rect id 75
rect:   -115.423264 -106.286308
    31.229691   31.415510
branch 15 : rect id 76
rect:   -116.111656 -106.313110
    31.259390   31.478300
branch 16 : rect id 77
rect:   -116.247467 -106.309677
    31.240231   31.451799
branch 17 : rect id 78
rect:   -116.170792 -106.094543
    31.156429   31.391781
branch 18 : rect id 79
rect:   -116.225723 -106.292709
    31.239960   31.442850
branch 19 : rect id 80
rect:   -116.268013 -105.769913
    31.157240   31.378111
branch 20 : rect id 82
rect:   -116.215424 -105.827202
    31.198441   31.383421
branch 21 : rect id 83
rect:   -116.095734 -105.826439
    31.197460   31.373819
branch 22 : rect id 84
rect:   -115.423264 -105.815018
    31.182640   31.368891
branch 23 : rect id 85
rect:   -116.221527 -105.776512
    31.160931   31.389830
branch 24 : rect id 86
rect:   -116.203369 -106.473831
    31.168350   31.367611
branch 25 : rect id 87
rect:   -115.727631 -106.501587
    31.189100   31.395941
branch 26 : rect id 88
rect:   -116.237289 -105.790756
    31.164780   31.358959
branch 27 : rect id 89
rect:   -115.791344 -105.990044
    31.072620   31.349529
branch 28 : rect id 90
rect:   -115.736847 -106.495079
    31.187969   31.376900
branch 29 : rect id 91
rect:   -115.721710 -106.000130
    31.160351   31.354601
branch 30 : rect id 92
rect:   -115.792236 -106.000793
    31.166620   31.378811
Leaf Node:  level=0  count=21  address=42
branch 0 : rect id 18312
rect:   -106.412270 -106.401367
    31.704750   31.717550
branch 1 : rect id 18288
rect:   -106.278252 -106.253387
    31.520321   31.548361 
```

我只想要那些在非叶节点级别 = 1 到叶节点级别 = 0 之间的线，并且还有很多这样的段，我需要它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T17:15:45.350

最简单的方法是将尽可能多的文件读入内存，然后扫描乞求令牌。复制或处理所有数据，直到找到终止令牌。某些平台具有为您将文件拖入内存的功能，例如`mmap()`，尽管这不是标准语言。

如果文件没有改变，你可以保存标记行的偏移量。

如果您确实需要按行号索引，请创建一个`std::map<line number, offset>`变量。逐行读取文件并在读取文件时存储行号和偏移量。

# r - 用于 R 统计的 XML - OSX 版本 2.15.1

> ID：11283047
> 
> 赞同：1
> 
> 时间：2012-07-01T15:03:43.410
> 
> 标签：r

我试图找到上述 R 版本的 XML 包，但没有成功。我查看了[http://www.omegahat.org/](http://www.omegahat.org/)并进入了 404 页面：[http ://www.omegahat.org/XML](http://www.omegahat.org/XML)

基本上我正在尝试安装 RGoogleAnalytics 包，但也失败了，尽管我怀疑这是因为我没有安装 XML。有谁知道我可以从哪里获得 XML 包？

谢谢彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T15:59:01.713

经过一番搜索，我发现了[这个指南](http://techpad.co.uk/content.php?sid=220)，它提供了一些关于安装的很好的提示`RGoogleAnalytics`。这是一个轻微的修改，以防`XML`在 omegahat 上真的找不到该库：

第 2 步的最后一部分要求您`XML`从 omegahat 安装库。但是，我可以从 CRAN 成功安装该软件包。所以只要`install.packages("XML")`在 R 提示符下就可以了。

接下来，指南说你需要直接从谷歌下载`RGoogleAnalytics` ***源***包，[网址](http://code.google.com/p/r-google-analytics/downloads/detail?name=RGoogleAnalytics_1.1.tar.gz)如下。

一旦下载（并且在我安装了`RCurl`软件包之后），我就可以`RGoogleAnalytics`成功安装。

有关从源代码安装 R 包的说明，您可以查看r-bloggers.com 上的[这篇文章或](http://www.r-bloggers.com/how-to-install-r-packages-from-source-on-mac-os-x/)[R 安装和管理文档的相应部分](http://cran.r-project.org/doc/manuals/R-admin.html#Building-from-source-on-_0028Mac_0029-OS-X)

**编辑：**

RGoogleAnalytics的[Google 代码页面](http://code.google.com/p/r-google-analytics/)确实建议使用`XML`来自 omegahat 的包，并且看起来该包与 CRAN 上的包不同。我可以使用 R 2.15.1 成功安装 omegahat 版本，并在 R 提示符下执行以下操作

```
install.packages("XML",repos="http://www.omegahat.org/R",type="source") 
```

**EDIT2：从源安装 RGA**

如果一切都按照[Google 页面](http://code.google.com/p/r-google-analytics/)上的 RGA 说明准备好，您应该准备好使用以下行*从源代码*安装 RGA 包（我必须添加`--no-multiarch`，因为`XML`不是为 32 位架构安装的）：

```
install.packages("~/Downloads/RGoogleAnalytics_1.1.tar.gz",
  repos=NULL,type="source",INSTALL_opts="--no-multiarch") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T18:48:45.517

我想你可能想要：

```
http://www.omegahat.org/RSXML/ 
```

尽管您也有可能使用 CRAN 的 XML 包。我刚刚使用当前的二进制安装更新了我的旧版本（MacOS 10.5.8 上的 R 2.14.2）。

# java - 在布局内的 TextView 中动态设置文本 - Android

> ID：11283048
> 
> 赞同：4
> 
> 时间：2012-07-01T15:03:47.857
> 
> 标签：java, android, android-layout, textview

我有这个布局，包含一个`TextView`，但我希望能够使用 java 代码以动态方式更改它的内容（要可视化的文本）。

```
<LinearLayout

    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

     <TextView 

        android:id="@+id/list_header"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center_vertical"
        android:layout_alignParentTop="true"
        android:layout_alignParentBottom="true"
        android:textStyle="bold"
        android:textSize="22dp"
        android:textColor="#FFFFFF"
        android:padding="10dp"
        android:background="#336699" 

     />

</LinearLayout> 
```

正如您所看到的，我没有定义`android:text="blablabla"`原因，它在我使用它的代码处没有固定。

我想要一些方法，例如：

```
TextView headerValue = (TextView) findViewById(R.id.list_header);
headerValue.setText( "blablabla" ); 
```

但这不起作用，因为我使用此布局来定义列表标题的样式，并且这些行与我需要使用的以下内容冲突：

```
View header = (View)getLayoutInflater().inflate(R.layout.list_header_layout, null);
listView.addHeaderView(header); 
```

你能帮我解决这个问题吗？

* * *

**日志猫：**

```
E/AndroidRuntime( 1468):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
E/AndroidRuntime( 1468):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
E/AndroidRuntime( 1468):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
E/AndroidRuntime( 1468):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
E/AndroidRuntime( 1468):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime( 1468):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime( 1468):    at android.app.ActivityThread.main(ActivityThread.java:4424)
E/AndroidRuntime( 1468):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime( 1468):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime( 1468):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
E/AndroidRuntime( 1468):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
E/AndroidRuntime( 1468):    at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime( 1468): Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.DVA_HLUI/com.DVA_HLUI.DVA_HLUISuperviseActivity}: java.lang.NullPointerException
E/AndroidRuntime( 1468):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
E/AndroidRuntime( 1468):    at android.app.ActivityThread.startActivityNow(ActivityThread.java:1797)
E/AndroidRuntime( 1468):    at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:135)
E/AndroidRuntime( 1468):    at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:347)
E/AndroidRuntime( 1468):    at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:682)
E/AndroidRuntime( 1468):    at android.widget.TabHost.setCurrentTab(TabHost.java:346)
E/AndroidRuntime( 1468):    at android.widget.TabHost.addTab(TabHost.java:236)
E/AndroidRuntime( 1468):    at com.DVA_HLUI.DVA_HLUIActivity.onCreate(DVA_HLUIActivity.java:41)
E/AndroidRuntime( 1468):    at android.app.Activity.performCreate(Activity.java:4465)
E/AndroidRuntime( 1468):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
E/AndroidRuntime( 1468):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
E/AndroidRuntime( 1468):    ... 11 more
E/AndroidRuntime( 1468): Caused by: java.lang.NullPointerException
E/AndroidRuntime( 1468):    at com.DVA_HLUI.DVA_HLUISuperviseActivity.onCreate(DVA_HLUISuperviseActivity.java:41)
E/AndroidRuntime( 1468):    at android.app.Activity.performCreate(Activity.java:4465)
E/AndroidRuntime( 1468):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
E/AndroidRuntime( 1468):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
E/AndroidRuntime( 1468):    ... 21 more 
```

* * *

**活动课：**

```
public class MyActivity extends ListActivity 
{

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    { 

        super.onCreate(savedInstanceState);
        setContentView(R.layout.list_activity);

        ListView listView = (ListView) findViewById(android.R.id.list);

        listEntryClass listEntries[] = new listEntryClass[]
        {
            new listEntryClass( "bla", "bla"),
            new listEntryClass( "bla", "bla" )
        };

        listEntryArrayAdapter adapter = new listEntryArrayAdapter(this, R.layout.list_entry_layout, listEntries);

        TextView headerValue = (TextView) findViewById(R.id.list_header);
        headerValue.setText( this.getString(R.string.headerSupervise) );

        View header = (View)getLayoutInflater().inflate(R.layout.list_header_layout, null);
        listView.addHeaderView(header);
        listView.setAdapter(adapter);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-01T15:07:49.200

```
TextView headerValue = (TextView) header.findViewById(R.id.list_header); 
```

应该从标题视图中引用。

因此，将您的代码更改为以下。

```
 View header = (View)getLayoutInflater().inflate(R.layout.list_header_layout, null);
    TextView headerValue = (TextView) header.findViewById(R.id.list_header);
    headerValue.setText( this.getString(R.string.headerSupervise) );

    listView.addHeaderView(header);
    listView.setAdapter(adapter); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T15:09:30.277

采用

```
View header = (View)getLayoutInflater().inflate(R.layout.list_header_layout, null);
TextView headerValue = (TextView)header . findViewById(R.id.list_header);
headerValue.setText( this.getString(R.string.headerSupervise) ); 
```

代替

```
TextView headerValue = (TextView) findViewById(R.id.list_header);
headerValue.setText( this.getString(R.string.headerSupervise) );

View header = (View)getLayoutInflater().inflate(R.layout.list_header_layout, null); 
```

# forms - 从 Jquery 移动单选按钮获取价值 - 在 JSFiddle 上工作但不在 HTML 文件中

> ID：11283052
> 
> 赞同：0
> 
> 时间：2012-07-01T15:04:16.313
> 
> 标签：forms, jquery-mobile, radio

我一直在研究多种方法来做到这一点，现在我确信我缺少一些东西，因为我的代码在 JSfiddle 上运行良好 - [http://jsfiddle.net/ccsnet/dK7NX/5/](http://jsfiddle.net/ccsnet/dK7NX/5/)

```
<div id="eventscontent" data-role="content">

            <div id="eventlistcontrolsdiv1" align="center" >
              <form id="eventlistcontrols" name="eventlistcontrols" class="eventlistcontrols" method="post" action="">
                  <div id="eventlistbutton" align="center">
                      <div data-role="fieldcontain">
                          <fieldset data-role="controlgroup" data-type="horizontal" >
                          <input id="bydistance" type="radio" name="eventsortby" checked="true" />
                          <label for="bydistance">By Distance</label>
                          <input id="bytype" type="radio" name="eventsortby" />
                          <label for="bytype">By Type</label>
                          <input id="byimpact" type="radio" name="eventsortby" />
                          <label for="byimpact">By Impact</label>
                          </fieldset>
                      </div>
                  </div>
              </form>
            </div>
        </div>​

$(document).ready(function() {
    $(function() {
        $("input[name='eventsortby']").click(function() {
            alert($("input[name=eventsortby]:radio:checked").attr("id"));
        })

    });
}); 
```

我不明白为什么会这样。唯一的区别是我在一个单独的文件中将 javascript 放在了 html 表单中，但我认为我正确地引用了它。我试过做...

```
input[name=document.eventlistcontrols.eventsortby] 
```

……这怎么也行不通……

任何人都可以看到我做的不对吗？

谢谢

人族

# ios - 如何使用 Copy.asmx 的 CopyIntoItems api 覆盖 SharePoint 文档

> ID：11283053
> 
> 赞同：0
> 
> 时间：2012-07-01T15:04:19.523
> 
> 标签：ios, sharepoint

我需要将文件从 iPhone/iPad 保存到 SharePoint 网站。当我尝试上传与实际存在的一个文档同名的内容时，它成功了，甚至文件大小也显示为新文件的大小。但内容仍然作为初始文件本身。

有人对此有解决方案吗？如果有什么东西，请告诉我。

# php - 如何使用 PHP 获取 PostgreSQL ROW 值

> ID：11283054
> 
> 赞同：0
> 
> 时间：2012-07-01T15:04:28.633
> 
> 标签：php, postgresql, row

我有这个查询：

```
SELECT  a.apartment_id, a.building_id, a.apartment_num, a.floor, at.app_type_desc_en AS app_type_desc,
    (SELECT ROW(e.e_name, ot.otype_desc_en)
    FROM    TABLE_TENANTS t INNER JOIN TABLE_OWNERSHIP_TYPES ot ON ot.otype_id=t.ownership_type INNER JOIN TABLE_ENTITIES e ON
t.entity_id = e.entity_id
WHERE   a.apartment_id = t.apartment_id AND t.building_id = a.building_id
ORDER BY t.ownership_type DESC LIMIT 1
    ) AS t_row
    FROM    TABLE_APARTMENTS a INNER JOIN TABLE_APPARTMENT_TYPES at ON at.app_type_id = a.apartment_type LEFT OUTER JOIN TABLE_TENANTS t ON a.building_id = t.building_id AND t.entity_id=1 AND t.status=true LEFT OUTER JOIN TABLE_COMMITTEE_DELEGATE cd ON
     a.building_id = cd.building_id AND cd.entity_id=1 AND cd.status=true
                WHERE a.building_id = 1 AND (t.entity_id=1 OR cd.entity_id=1)
                ORDER BY    a.apartment_num ASC 
```

当我使用 PHP 读取结果时，我使用：

```
while($ap = pg_fetch_array($_qry)){ 

} 
```

并尝试读取“e_name”，它是 ROW(e.e_name) 的一部分，但我无法成功。

需要你的想法......请。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T15:45:38.163

使用`pg_fetch_assoc`, 检索 asoc-array 中的数据；但我的建议是 - 使用[PDO](http://php.net/manual/book.pdo.php)在 PHP 中使用 db。

# android - 如何在 ViewPager 中设置 setOnTouchListener

> ID：11283065
> 
> 赞同：0
> 
> 时间：2012-07-01T15:05:11.857
> 
> 标签：android, android-viewpager

我有一个 ViewPager，每个视图都有一个 ImageView。我需要为视图中的 currentItem 设置一个 OnTouchListener。我有以下代码，但是当我尝试设置侦听器时不断得到 NULL。下面是我的代码。如何获得对我当前项目 ImageView 的有效引用？？？

```
private class CalendarPagerAdapter extends PagerAdapter {

        public int getCount() {
            return NUM_VIEW;
        }

        public Object instantiateItem(View collection, int position) {

            View view=null;

            LayoutInflater inflater = (LayoutInflater) collection.getContext()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            int resId = 0;
            switch (position) {
            case 0:
                resId = R.layout.cal_july;
                view = inflater.inflate(resId, null);
                calendar = (ImageView) findViewById(R.id.imageView1);
                                // IT IS ALWAYS NULL HERE
                if(calendar == null) {
                    System.out.println("its null!!!!!!");
                } else {
                    System.out.println("its NOT NULL!!!!!");
                }
                // Breaks here, obviously!!!
                calendar.setOnTouchListener(getOnTouchListener());
                break;
            case 1:
                resId = R.layout.cal_august;
                view = inflater.inflate(resId, null);
                calendar = (ImageView) findViewById(R.id.imageView1);
                calendar.setOnTouchListener(getOnTouchListener());
                break;              
            case 2:
                resId = R.layout.cal_september;
                break;
            case 3:
                resId = R.layout.cal_october;
                break;
            case 4:
                resId = R.layout.cal_november;
                break;

            }

            ((ViewPager) collection).addView(view, 0);

            return view;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T15:42:07.447

你打电话时：

```
view = inflater.inflate(resId, null);
calendar = (ImageView) findViewById(R.id.imageView1); 
```

它会在您的 Activity 的 contentView 中查找 ID 为 R.id.imageView1 的 ImageView（即：您最初在 onCreate() 中设置的布局。我认为这不是您想要的。

您可能希望在刚刚膨胀的视图中找到该视图。试试这个：

```
view = inflater.inflate(resId, null);
calendar = (ImageView) view.findViewById(R.id.imageView1); 
```

# android - 发送彩信确实包含“sms_body”

> ID：11283085
> 
> 赞同：3
> 
> 时间：2012-07-01T15:07:17.853
> 
> 标签：android, mms

我正在尝试使用以下代码通过彩信发送图像

```
Intent sendIntent = new Intent(Intent.ACTION_SEND); 
sendIntent.putExtra("sms_body", "Hi there"); 
sendIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse(url));
sendIntent.setType("image/png"); 
```

它打开消息应用程序并附加消息，但它没有写“sms_body”，在我的情况下是“你好”。为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T15:23:42.260

试试这个：

```
Intent intent = new Intent(Intent.ACTION_SEND);
intent.setClassName("com.android.mms", "com.android.mms.ui.ComposeMessageActivity");
intent.putExtra("subject", "subject");
intent.putExtra("sms_body", "Hi there");
intent.putExtra("address", "Phonenumber");
intent.putExtra(Intent.EXTRA_STREAM, Uri.parse(url));
intent.setType("image/png");
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-27T18:36:48.060

似乎运作良好的是我刚刚添加了 EXTRA_TEXT （@yasserbn 在评论中提供的解决方案）：

```
intent.putExtra(intent.EXTRA_TEXT, default_message); 
```

此外：

```
intent.putExtra("sms_body", default_message); 
```

无论是转换为彩信还是作为普通短信发送，它似乎都有效。

# java - 如何在 EC2 上运行 AWS 示例 JAVA 代码

> ID：11283088
> 
> 赞同：1
> 
> 时间：2012-07-01T15:07:48.017
> 
> 标签：java, amazon-ec2, amazon-web-services, amazon-dynamodb

我刚开始使用 Amazon Web 服务，并且我有一个 EC2 实例。我下载了 JAVA SDK 和 Eclipse 工具箱。我可以在我的 PC 上本地运行示例程序并连接到 Amazon 数据库等。我的问题是，我需要做什么才能在我的 EC2 实例上运行它？这甚至可能并非特定于 AWS。在 Eclipse 上，我可以“作为应用程序运行”并运行任何代码。在服务器端，我需要做什么？我应该对我的 .java 文件进行 ftp 吗？我应该将它导出到 jar 并上传吗？我需要安装任何特殊的东西才能真正运行它吗？

我只是想运行连接到数据库并添加新表和行的基本 DynamoDB 示例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T15:12:55.230

最简单的方法是将您的 .class（或 .jar）上传到您的 EC2 并在那里运行它。

如果您不限于 EC2 的特定实例，您可以使用[Amazon Beanstalk](http://aws.amazon.com/elasticbeanstalk/)，比如说一个 tomcat 容器来运行您的代码。这样您就可以从 Eclipse 部署“应用程序”。

# iphone - 视图控制器导航

> ID：11283094
> 
> 赞同：0
> 
> 时间：2012-07-01T15:08:23.533
> 
> 标签：iphone, ios, xcode

我有 4`ViewControllers`作为`startViewController`初始视图控制器。这包含我的介绍。完成后，它将`[self presentViewController:vc animated:YES completion:NULL];`进入我的`menuViewController`.

* * *

```
startViewController ------> menuViewController ------> C1ViewController
                                          \
                                           \ ------> ImportantViewController 
```

* * *

在我`menuViewController`的是两个按钮，`ViewController`如上图所示。我也用这个在视图中展示了它们：我用这个`[self presentViewController:vc animated:YES completion:NULL];`返回`menuViewController``[self dismissModalViewControllerAnimated:YES];`

`ImportantViewController`即使我转到其他视图，我想要的是使其成为父视图或 mainVIew。我需要的是`ImportantViewController`当我去的时候出现`C1ViewController`或者`menuViewController`它不会被释放，或者它的内容仍然会被保留。

是否可以？如何？

我不太了解父视图控制器和子视图控制器的用途，所以我不知道在我的问题中要实现什么。谢谢你。

顺便说一句，我使用故事板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T15:18:39.317

我不是 100% 知道你想要做什么，但如果你使用 ARC，将 ImportantViewController 设置为 __strong 它将为你保留。为什么不通过在 ImprotantViewController.m 中以编程方式创建所需的视图控制器来使 ImportantViewController 成为父级？

```
// ImportantViewController.m
// non ARC
FirstChildViewController *firstChild = [[FirstChildViewController alloc] initWithNib@"FirstChildViewController" bundle:nil];

//set firstChild.view position here if needed. e.g. .center = CGPointMake(x,y);

//now add firstChild to the parent
[self addSubview:firstChild];
[firstChild release]; 
```

您可以对第二个视图或任意数量的视图执行相同操作。我发现这比展示视图控制器更好。您还可以将核心动画添加到子视图并创建一个漂亮的 UI。

这是否回答你的问题？也许我没有得到你想要的。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T15:21:07.817

制作`ImportantViewController`a 的根视图`UINavigationController`，您将呈现 a`UINavigationController`而不是 ImportantViewController，

```
UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:YourImportantViewControllerOBject];

//insted of presentModalViewControlle with YourImportantViewControllerOBject you do
[self presentModalViewController:navigationController animated:YES]; 
```

现在在重要视图控制器中展示新的视图控制器，您将执行以下操作

```
[self.navigationController pushViewController:yourC1ViewController animated:YES]; 
```

# eclipse - 如何删除 RCP 视图图标？

> ID：11283095
> 
> 赞同：0
> 
> 时间：2012-07-01T15:08:37.667
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

在每个视图的 plugin.xml 中，我都有图标文本框。在视图标题的文本旁边显示图标。

我只想要没有图标的视图标题。我怎样才能做到这一点 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:34:47.230

在扩展 ViewPart 的类中，您可以覆盖 getTitleImage 方法：

```
@Override
public Image getTitleImage() {
    return null;
} 
```

然后，您应该只获取视图标题中没有图标的文本。

**编辑** 上面的代码适用于 Eclipse 4.1.2。对于 Eclipse 3.7.0，您可以使用空图像：

```
@Override
public Image getTitleImage() {
    return new Image(getSite().getShell().getDisplay(), new Rectangle(0, 0,
            1, 1));
} 
```

# jsf-2 - Spring Security 3 和 JSF 2 集成，无需重定向页面

> ID：11283098
> 
> 赞同：2
> 
> 时间：2012-07-01T15:08:48.653
> 
> 标签：jsf-2, spring-security

是否可以集成 Spring Security 3 和 JSF 2，保持 JSF 默认工作，而不是在用户导航时显示新 url，保留旧 url，而不使用**重定向**JSF 属性来导航页面？

我找不到有关此的文档。我发现作者的所有文章在导航时都会重定向页面。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T04:44:36.093

默认情况下，FilterSecurityInterceptor 只会对每个请求执行一次，并且不会进行安全重新检查，除非 url 发生变化，但是使用 JSP/JSF 转发页面将呈现为对当前请求的响应，并且 url 在浏览器包含上一页的地址。因此，为此只需在 applicationContext 中的 http 元素中将每个请求属性设置为 false ，从而强制重新检查安全性。

```
<http auto-config="true" use-expressions="true" once-per-request="false"> 
```

并在您的 web.xml 中的 springSecurityFilterChain 过滤器映射中添加转发调度程序

```
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>REQUEST</dispatcher>
</filter-mapping> 
```

更多[信息](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/web/access/intercept/FilterSecurityInterceptor.html#isObserveOncePerRequest%28%29)

或者，您也可以通过将参数 faces-redirect=true 附加到结果中来启用页面重定向，如下所示：

```
<h:form>
    <h:commandButton action="page1?faces-redirect=true" value="Page1" />
</h:form> 
```

但请记住，在您的情况下，GET 请求看起来更合适，正如[BalusC](https://stackoverflow.com/users/157882/balusc)所说，使用 POST 进行可书签的页面到页面导航**并不是一个好习惯。**

使用`<h:link>`or`<h:button>`或 faces-redirect=true 的 GET 也会导致 GET 请求。

另见：

*   [何时应该使用 houtputlink-instead-of-hcommandlink](https://stackoverflow.com/questions/4317684/when-should-i-use-houtputlink-instead-of-hcommandlink)

*   [重定向后获取模式](http://balusc.blogspot.com/2007/03/post-redirect-get-pattern.html)

# jquery - Rails 3，如何将 jquery 脚本移动到 application.js 文件？

> ID：11283106
> 
> 赞同：0
> 
> 时间：2012-07-01T15:09:31.160
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

我的表单底部有以下脚本：

**_form.html.erb**

```
<% end %>

<script>
<% auth_params = Panda.signed_params('post', "/videos.json") %>
jQuery("#returned_video_id").pandaUploader(<%=raw auth_params.to_json %>, {
upload_progress_id: 'upload_progress'
});
</script> 
```

我已经尝试将此脚本移动到我的 application.js 文件中，但无论我似乎以哪种方式调整它，它都不起作用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T16:02:34.770

您只需在 app/assets/javascripts 中创建一个 .js 文件，它将成为 application.hs 的一部分，前提是您有

```
require_tree . 
```

作为 application.js 的一部分

请参阅[资产管道指南](http://guides.rubyonrails.org/asset_pipeline.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T15:45:45.177

它包含红宝石代码。将您的 application.js 重命名为 application.js.erb。它应该工作。

# javascript - 使用不同级别的节点解析 JSON

> ID：11283114
> 
> 赞同：0
> 
> 时间：2012-07-01T15:09:58.663
> 
> 标签：javascript, jquery, ajax, json

我很难将数据附加到 JSON 文件中的元素。我有以下

[链接到 JSON](http://json.parser.online.fr/)

这是我正在尝试使用的 jQuery -

```
$.ajax({
    url: 'https://www.googleapis.com/books/v1/volumes?q=:isbn=0-13-727827-6',
    dataType: 'json',
    success: function(data){
        $.each(data.items, function(index){
            $(".tab1").append("<div>"+data.title+"</div>");
        });
    }
}); 
```

来自[JSFiddle](http://jsfiddle.net/Fd778/1/)

你可以看到我错了！我希望从`Item->volumeInfo->title`每次尝试引用节点 volumeInfo 时提取书名，我得到一个错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T15:16:28.110

`data`这是顶级对象，而不是您尝试遍历的每个项目。JQuery`each`函数提供了两个参数，索引和您正在循环的当前项目。所以改用第二个参数：

```
$.ajax({
    url: 'https://www.googleapis.com/books/v1/volumes?q=:isbn=0-13-727827-6',
    dataType: 'json',
    success: function(data){
        $.each(data.items, function(index, item){
            $(".tab1").append("<div>"+item.volumeInfo.title+"</div>");
        });
    }
}); 
```

# parallel-processing - 优化线程同时检查

> ID：11283118
> 
> 赞同：1
> 
> 时间：2012-07-01T15:10:48.203
> 
> 标签：parallel-processing, cuda, gpgpu

我有一个设备函数，它使用线程检查字节数组，每个线程检查数组中不同字节的某个值并返回 bool true 或 false。

我怎样才能有效地确定所有支票是否都返回真或其他？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T00:05:50.227

```
// returns true if predicate is true for all threads in a block
__device__ bool unanimous(bool predicate) { ... }

__device__ bool all_the_same(unsigned char* bytes, unsigned char value, int n) {
    return unanimous(bytes[threadIdx.x] == value);
} 
```

的实现`unanimous()`取决于硬件的计算能力。对于计算能力 2.0 或更高版本的设备，这是微不足道的：

```
__device__ bool unanimous(bool predicate) { return __syncthreads_and(predicate); } 
```

对于计算能力 1.0 和 1.1 的设备，您需要实现 AND 缩减（读者练习，因为它有详细的文档）。`__all()`对于计算能力 1.3 的特殊情况，您可以使用CUDA 标头中提供的内在函数，使用扭曲投票指令优化 AND 减少。

**编辑：**

好的，因为玩家在评论中询问。在 sm_13 硬件上，您可以执行此操作。

```
// returns true if predicate is true for all threads in a block
// note: supports maximum of 1024 threads in block as written
__device__ bool unanimous(bool predicate) {
    __shared__ bool warp_votes[32];
    if (threadIdx.x < warpSize) warp_votes[threadIdx.x] = true;
    warp_votes[threadIdx.x / warpSize] = __all(pred);
    __syncthreads();
    if (threadIdx.x < warpSize) warp_votes[0] = __all(warp_votes[threadIdx.x];
    __syncthreads();
    return warp_votes[0];
} 
```

# jquery - 手动停止元素的jquery-ui滑动事件

> ID：11283120
> 
> 赞同：0
> 
> 时间：2012-07-01T15:10:55.657
> 
> 标签：jquery, jquery-ui, events, slider

我需要手动阻止一个元素被滑动（我用来`.slider()`创建滑块）。我怎样才能做到这一点？

我需要这样做，因为 jquery-ui 滑块在 iframe 内时会出现问题。到目前为止，我已经设法创建了一个更改滑块值的函数，但是我没有运气尝试激活滑块的停止或 mouseup 事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:14:51.337

我还没有找到解决这个问题的方法，所以我所做的是阻止滑动事件从这个开始做任何事情：

```
 $('.slider',$document).slider({start:function(event,ui){return false;}}); 
```

这样我就可以完全手动控制滑块。

如果您对我为什么需要这样做感到好奇，您可以查看这个[问题](https://stackoverflow.com/questions/10817109/creating-a-draggable-object-in-a-iframe-from-outside)

# python - 如何打印图像？

> ID：11283122
> 
> 赞同：0
> 
> 时间：2012-07-01T15:11:12.237
> 
> 标签：python, python-2.7, web-scraping

我想打印首轮选秀的 30 支 nba 球队的图像。但是，当我告诉它打印时，它会打印出链接而不是图像。我如何让它打印出图像而不是给我图像链接。这是我的代码：

```
import urllib2
from BeautifulSoup import BeautifulSoup
# or if your're using BeautifulSoup4:
# from bs4 import BeautifulSoup

soup = BeautifulSoup(urllib2.urlopen('http://www.cbssports.com/nba/draft/mock-draft').read())

rows = soup.findAll("table", attrs = {'class': 'data borderTop'})[0].tbody.findAll("tr")[2:]

for row in rows:
  fields = row.findAll("td")
  if len(fields) >= 3:
    anchor = row.findAll("td")[1].find("a")
    if anchor:
      print anchor 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T01:00:43.123

您需要将文件转换为 base64 编码，这将提供一串数据，可以根据需要移动和存储。我通常用 PHP 来做这件事，如果 Python 有点粗糙，我很抱歉

```
import urllib2
import base64
url = 'http://somesite.com/images/team_one.jpg'
grab = urllib2.urlopen(url)
encoded_image_string = base64.b64encode(grab.read()) 
```

# java - 在计算中使用多个 Spinner

> ID：11283126
> 
> 赞同：1
> 
> 时间：2012-07-01T15:11:45.530
> 
> 标签：java, android

好的，所以我正在尝试创建一个活动来计算给定空间的面积。

我希望用户能够在“m”或“ft”中输入尺寸。答案需要在最后以米为单位给出。

对，现在解决问题。

下面的代码有效，问题是程序假设 num1 和 num2 都等于上次使用的微调器中选择的值。因此，如果您为 num1 输入 100 ft，然后为 num2 输入 10m，它会给出 1000m 的答案，因为您最后选择了 m 单位。它应该给出92.9的答案......

这几天一直很头疼...

谁能帮我！？！

提前致谢

```
private OnClickListener myClickListener = new OnClickListener()
{
    public void onClick(View v) {
        try{

        a=Double.parseDouble(num1.getText().toString());
        b=Double.parseDouble(num2.getText().toString());}
        catch(Exception e)
        {
            if(num1.getText().length()==0)
            {
                num1.setError("please input width");
            }
            if(num2.getText().length()==0)
            {
                num2.setError("please input length");
            }

        }

        if (opselected=="ft" && opselected1=="ft")
        {c=((a * 0.0929) * (b * 0.0929));tv1.setText(Double.toString(c));}
        else if (opselected=="m" && opselected1=="m")
        {c=( a * b);tv1.setText(Double.toString(c));}
        else if (opselected=="m" && opselected1=="ft")
        {c= (a * (b * 0.0929));tv1.setText(Double.toString(c));}
        else if (opselected=="ft" && opselected1=="m")
        {c= ((a * 0.0929) * b);tv1.setText(Double.toString(c));}

        else {tv1.setText("select units");}
        //tv1 = (TextView)findViewById(R.id.TextView01);

    }
};
    @Override
    public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.car);

       tv1 = (TextView)findViewById(R.id.TextView01);

       button01 = (Button)findViewById(R.id.Button01);
       button01.setText("Display Air Volume");
       button01.setOnClickListener(myClickListener);

       num1 = (EditText)findViewById(R.id.EditText01);
       num2 = (EditText)findViewById(R.id.EditText02);

       spinOps = (Spinner)findViewById(R.id.Spinner01);
       ArrayAdapter<String> adapter = new ArrayAdapter<String>(
         this, android.R.layout.simple_spinner_item, ops);
       adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
       spinOps.setAdapter(adapter);
       spinOps.setOnItemSelectedListener(this);

       spinOps1 = (Spinner)findViewById(R.id.Spinner02);
       ArrayAdapter<String> adapter1 = new ArrayAdapter<String>(
         this, android.R.layout.simple_spinner_item, ops1);
       adapter1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
       spinOps1.setAdapter(adapter);
       spinOps1.setOnItemSelectedListener(this);

    }   
    public void onItemSelected (AdapterView<?> p,View v,int position,long id) {
        opselected=ops[position];
        opselected1=ops1[position];
        tv1.setText("");
    }
    public void onNothingSelected(AdapterView<?> p) { 
        tv1.setText(""); 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T15:45:54.310

在 onItemSelected() 中，您可以使用 v.getId() 查看是否为 R.id.Spinner01 或 R.id.Spinner02 调用它，并更新 opselected 或 opselected1，而不是两者。例如：

```
public void onItemSelected (AdapterView<?> p,View v,int position,long id) {
    if (v.getId() == R.id.Spinner01)
        opselected=ops[position];
    else if (v.getId() == R.id.Spinner02)
        opselected1=ops1[position];
    tv1.setText("");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T02:39:54.987

给每个微调器自己的监听器。例如，您在哪里

```
 spinOps.setOnItemSelectedListener(this); 
```

用更像这样的东西替换它：

```
 spinOps.setOnItemSelectedListener(new onItemSelectedListener() {
      public void onItemSelected(AdapterView<?> p, View v, int position, long id) {
         // get the value entered and the unit selected (e.g., val0, unit0)
      }
  }); 
```

做同样的事情（除了使用 val1 和 unit1，它会是 spinOps1....），如果单位不同，选择一个并将另一个转换为匹配。换句话说，如果用户选择第一个为 39 英寸，第二个为 2 米，并且您希望它以米为单位，39 英寸 = 1 m，那么结果将是 3 米。

有关详细信息，请参阅[http://developer.android.com/reference/android/widget/AdapterView.OnItemSelectedListener.html](http://developer.android.com/reference/android/widget/AdapterView.OnItemSelectedListener.html)。（只需搜索 onItemSelectedListener 并获取第一个结果......）

后来，--jim

PS：是的，我知道，我用英寸而不是英尺......保持简单:-)

# operating-system - ThreadX 的哪些方面使其成为实时操作系统？

> ID：11283127
> 
> 赞同：1
> 
> 时间：2012-07-01T15:11:50.607
> 
> 标签：operating-system, real-time, threadx

ThreadX 被认为是一个 RTOS。我知道 RTOS 的一般定义和要求，但是，任何人都可以帮助阐明为什么 ThreadX 可以被称为 RTOS，或者操作系统的哪些功能使其具有实时能力？

谢谢~

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-11T17:06:38.410

当程序员谈论实时操作系统时，他们经常提到与管理多个进程或线程相关的特性：互斥体、信号量和进程间（或线程间）通信等。

然而，真正的定义是系统必须保证某些给定的操作总是在一个已知的、确定的时间内发生（即以秒为单位的时间，而不是相对的时间）。Linux 或 Windows 都不是真正实时的。Linux 或 Windows 计算机可以非常快，以至于您想要完成的任何事情几乎总是足够快地发生 - 但不能保证它*总是*在最长时间内。如果您正在构建一个软件系统来控制医疗设备或大型工厂设备，那么您需要在 x 毫秒内停止或启动某些东西，而不是“很快”或“通常足够快”。

现在在实践中，要在一个有用的、非平凡的系统中提供这种保证，通常需要先发制人的多任务、多线程以及通常提到的所有功能，因此如果没有它们，您将很难找到一个 RTOS。但是，RTOS 的定义特征名副其实：可以知道事情会在**真实**的时间内发生。

至于您的具体问题，来自 ThreadX 网站：

```
ThreadX is deteriminstic. A high priority thread starts responding to 
an external event on the order of the time it takes to perform a 
highly optimized ThreadX context switch.

    - Boot time: 300 cycles
    - Context switch time: <100 cycles
    - Semaphore get: 30 cycles 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T21:45:43.610

这一切都意味着您的响应时间是确定性的。这是您在 RTOS 中想要的最重要的事情之一。

在 threadx 中，您的线程具有优先级。操作系统由硬件中断计时器驱动，调度程序确保线程根据它们的优先级正确调度。

例如，如果线程 A（高优先级）正在等待一个信号量而线程 B（低优先级）正在运行，那么一旦信号量可用，线程 B 将被中断并启动线程 A。

Threadx 具有许多其他功能来优化上下文切换时间。例如，每个线程都有自己的堆栈。

有关更多详细信息，您应该得到这个：[http ://www.amazon.com/Real-Time-Embedded-Multithreading-Using-ThreadX/dp/1578201349/ref=sr_1_2?s=books&ie=UTF8&qid=1390859108&sr=1-2&keywords=实时+时间+线程x](https://rads.stackoverflow.com/amzn/click/com/1578201349)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-05T21:38:49.097

无论系统大小，ThreadX 都会有相同的响应时间：如果系统有一个线程或多个、一个信号量或多个等，响应时间将是相同的。所有操作都有恒定的响应时间。线程抢占时间是有界且恒定的。中断响应时间是有界且恒定的。ThreadX 提供的功能水平有时在学术文献中被描述为“硬实时”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-11T15:17:03.343

不是专家，但是，当您对应用程序线程/进程施加时间限制时，它被称为实时软件。

在 RTOS 中，如果高优先级线程来了，那么低优先级线程将被挂起，直到高优先级线程完成（或进入空闲/挂起状态）。在任何高优先级线程处于活动状态之前，低优先级线程永远不会获得时间（启用事件时间片）。

在相同线程优先级的情况下，如果启用时间片，则每个线程将获得特定的时间量。

您还应该检查 RTOS 情况下的优先级反转。

# hashtable - 在哈希表中搜索哈希表的复杂性？

> ID：11283130
> 
> 赞同：1
> 
> 时间：2012-07-01T15:12:09.980
> 
> 标签：hashtable, time-complexity

假设我们有一个大小为 m 的哈希表，并且在每个桶中我们存储一个大小为 p 的哈希表。最坏情况/平均情况搜索复杂度是多少？

我倾向于说，由于计算哈希函数仍然是原子的，唯一最坏的情况是如果值位于大小为 p 的哈希表中链表的末尾，那么 O(n)？

我不知道如何计算这种情况的平均情况，并希望得到任何指点！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T23:23:03.427

是的，如果通过添加到链表来解决冲突，在最坏的情况下它仍然是线性的。`n`在第一级和第二级具有插槽的两级`p`哈希表与具有插槽的单级哈希表相同`np`。您添加的所有元素最终都可能在同一个二级槽中，都被添加到同一个链表中，等等。根据这一观察，平均情况复杂度与具有使用`np`槽的单级哈希表相同链表来解决冲突。

# f# - 获得 F# 中的最大素数

> ID：11283133
> 
> 赞同：1
> 
> 时间：2012-07-01T15:12:29.840
> 
> 标签：f#

我有 VS 11 beta 并且以下代码可以正常工作：

```
let rec fac x y =
    if x = y then y
    elif x % y = 0I then fac (x / y) y
    else fac x / (y + 1I) 
```

现在我安装了 VS 2012 RC，我收到以下错误：

```
The type 'System.Numerics.BigInteger -> System.Numerics.BigInteger' is not compatible with the type 'System.Numerics.BigInteger' 
```

代码不正确还是 F# 交互不正确？这是 F# 3.0。

**编辑**：

实际上问题不在 F# 中，而是在我的代码中，应该是：

```
else fac x (y + 1I) 
```

当我在 VS 11 中工作时，我刚刚保存了错误的版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T15:20:12.850

`fac`需要两个数字，所以当你有 时`fac x`，它不是一个数字，因此不能被一个数字除。

# c# - 将 viewmodel 传递给 actionresult 创建新的 viewmodel

> ID：11283135
> 
> 赞同：1
> 
> 时间：2012-07-01T15:12:43.217
> 
> 标签：c#, asp.net-mvc-3, entity-framework

我正在使用视图模型，然后我何时将其发送到操作结果以使用（修改后的视图模型）

但是在控制器中，我丢失了视图模型中的列表和对象。这是我的看法：

```
@using PigeonFancier.Models
@model PigeonFancier.Models.InschrijvingModel
@using (Html.BeginForm("UpdateInschrijvingen","Melker",Model))
{
<div>
    <fieldset>
        <table>

            @foreach (var item in Model.inschrijvingLijst)
            {
                <tr>
                    <td>@Html.DisplayFor(model => item.Duif.Naam)</td>                              
                    <td> @Html.CheckBoxFor(model => item.isGeselecteerd)</td>                              
                </tr>
            }
        </table>   
        <input type="submit" value="Wijzigen"/>
    </fieldset>
</div>
} 
```

这是我的控制器，目前它什么都不做，直到我可以从视图中获取完整的视图模型。

```
public ActionResult UpdateInschrijvingen(InschrijvingModel inschrijvingsModel)

    {
        // inschrijvingsModel is not null, but it creates a new model before 
            it comes here with 
        //Use the model for some updates

        return RedirectToAction("Inschrijven", new { vluchtId = 
                   inschrijvingsModel.vlucht.VluchtId });
    } 
```

这是具有 List 和其他一些对象的模型，这些对象变为空，因为它在从视图返回到 actionresult 时创建了一个新模型

```
public class InschrijvingModel
{
    public Vlucht vlucht;
    public Duivenmelker duivenmelker;
    public List<CheckBoxModel> inschrijvingLijst { get; set; }

    public InschrijvingModel()
    {
        // Without this i get, No parameterless constructor defined exception. 
        // So it uses this when it comes back from the view to make a new model
    }

    public InschrijvingModel(Duivenmelker m, Vlucht vl)
    {
        inschrijvingLijst = new List<CheckBoxModel>();
            vlucht = vl;
            duivenmelker = m;

        foreach (var i in m.Duiven)

        {
            inschrijvingLijst.Add(new CheckBoxModel(){Duif = i, 
            isGeselecteerd =  i.IsIngeschrevenOpVlucht(vl)});
        }

    } 
```

出了什么问题，我应该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T17:29:40.050

我通过使用找到了列表的部分解决方案

for 和 [i] 而不是 foreach

但对象仍然为空，即使使用 int Id 而不是对象

也已经尝试使用 Html.hiddenfor 来处理那些对象不起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T17:58:52.363

您需要将所有列表和属性包含到您明确定义的模型中。

在 POST 操作中获取视图模型后，您将执行操作（创建、编辑等），如果您想**返回相同的视图**（具有发布操作），则需要**重新填充所有 List 值**（如下拉列表和复选框列表）并将它们设置在您返回的视图模型上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T20:46:44.603

本文中使用的方法可能是您的解决方案：

[http://erraticdev.blogspot.com/2010/09/preparing-list-of-objects-so-they-can.html](http://erraticdev.blogspot.com/2010/09/preparing-list-of-objects-so-they-can.html)

# symfony - 虚拟主机服务器上的 symfony2 空白页面

> ID：11283139
> 
> 赞同：2
> 
> 时间：2012-07-01T15:13:04.157
> 
> 标签：symfony

我尝试在我的远程 Web 服务器上部署我的项目。我认为 sf2 安装没问题我有 app_dev.php 和 config.php 页面，check.php 没有返回任何错误，我在目录 app/cache 和 app/logs 上设置了 acl。

但我不能从我的控制器中获得我的任何页面。如果我尝试类似 .../Symfony/web/app_dev.php/myurl 我有一个空白页。我能做些什么？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T16:58:50.767

很可能有一个 php 错误，您应该检查您的 web 服务器/php 错误日志文件。它们的确切位置取决于配置，如果您自己找不到它们，请询问您的托管服务提供商。

作为一个疯狂的猜测，检查`app/cache`文件夹的权限 - 我相信这是一个常见的问题。您应该始终`app/console cache:clear --no-debug --env=prod`使用网络服务器用户运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:11:01.627

我不确定您是否检查了明显的但 app_dev 包含以下内容：

```
if (isset($_SERVER['HTTP_CLIENT_IP'])
|| isset($_SERVER['HTTP_X_FORWARDED_FOR'])
|| !in_array(@$_SERVER['REMOTE_ADDR'], array(
    '127.0.0.1',
    '::1',
))
) {
header('HTTP/1.0 403 Forbidden');
exit('You are not allowed to access this file. Check '.basename(__FILE__).' for more information.');
} 
```

确保添加您的 IP、完全删除 IP 块或提供登录解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-16T12:58:16.260

我只需在项目根目录上执行此命令即可解决空白页：

```
app/console assets:install web 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T09:14:34.027

您还可以检查您的服务器中是否启用了 mod_rewrite。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-31T12:43:16.070

我打开我的 Linux 终端并执行：

```
php app/check.php 
```

它向我展示了错误：

*   必须设置 date.timezone 设置

    > 在 php.ini* 中设置“date.timezone”设置

**我设置服务器时区并重新启动我的服务器，我的空白页消失了，symfony 2.7.3 版本开始工作**

# iphone - 如何将 rss 提要保存到 Core Data 数据库中？

> ID：11283140
> 
> 赞同：0
> 
> 时间：2012-07-01T15:13:12.297
> 
> 标签：iphone, objective-c, core-data, rss

我从网站解析 rss 提要并使用 GDataXML 在表格视图中显示，但我希望我的应用程序可以离线工作。我是 iPhone 开发的新手，我不知道如何将它保存在 Core Data 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T15:20:55.377

您在 XCode 中创建一个核心数据模型。您可能需要一个`Post`实体来表示 RSS 帖子。可能的属性可能是`Title`,`Content`等`Date`。也许您还需要一个`Feed`实体来存储用户订阅的所有提要。

然后，在下载 XML 并对其进行解析后，使用上下文中的这些实体初始化这些托管对象并保存它们。

我建议阅读[本教程](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)。

当然[还有文档](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/coredata/cdprogrammingguide.html)。这是一篇冗长的文章，但如果你想构建一个稳定且高质量的应用程序，你将无法绕过它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T15:23:58.087

你的问题很笼统，很难详细回答。

关于核心数据，我真的建议阅读[core-data-on-ios-5-tutorial-getting-started](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)。

这是对核心数据的一个很好的介绍。

阅读后，您可以理解我将建议的模型。例如，您可以创建一个名为的简单实体`RSSFeed`，它具有以下两个属性：

*   `guid`：`NSString`供稿的标识符
*   `title`:`NSString`供稿的标题
*   `text`：`NSString`允许您显示供稿文本的文本
*   `date`：`NSDate`供稿插入日期的日期

可能还有其他道具（和/或实体），但这取决于您想为您的提要显示什么。

此外，[核心数据编程指南](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/coredata/cdprogrammingguide.html)是你的朋友。

希望有帮助。

# matlab - 从 3-D 图形中提取信息

> ID：11283141
> 
> 赞同：1
> 
> 时间：2012-07-01T15:13:17.743
> 
> 标签：matlab, matlab-figure, matlab-guide

我使用了`plot3`创建 3-D 图形的方法。现在我想提取*z* > 0的所有点。
我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T15:41:35.137

首先，您需要有用于制作绘图的数据；如果你直接拥有它们，那就是简单的情况。如果没有 - 例如，如果您有来自其他脚本的绘图，或者您刚刚加载的其他人保存的图形文件 - 您可以从绘图中获取数据，如下所示：

```
%# make sure the plot is the current axes object by clicking on it
%# or else use the actual axes handle instead of gca
X = get(gca,'xdata');
Y = get(gca,'ydata');
Z = get(gca,'zdata'); 
```

接下来，使用逻辑索引：

```
index = Z > 0;
X_of_interest = X(index);
Y_of_interest = Y(index);
Z_of_interest = Z(index); 
```

新变量包含`X,Y,Z`条件`Z>0`为真的所有点的值。

# jsp - 当值可能为空时，JSP 遍历列表的映射

> ID：11283144
> 
> 赞同：1
> 
> 时间：2012-07-01T15:13:41.617
> 
> 标签：jsp, struts2, guava

**如何从 as:iterator 的堆栈中清除值？**

我正在尝试对具有如下结构的 TreeMultimap 进行迭代：

```
TreeMultimap<person, lineItems> persons; 
```

使用类似的东西：

```
<s:iterator value="attendeesForParticipantTypeEvents.asMap()">
  <div>
    <s:property value="key.name" /><br />
    <s:iterator var="currentSku" value="value">
      <s:property value="currentSku.name" /><br />
    </s:iterator>
  </div>
</s:iterator> 
```

这工作正常，除非 treeMultimap 的 lineItems 为 null，否则它会从上一次迭代中获取值。

所以，像这样的结构：

```
persons = {{"Person1",["Line1","line2"]},
           {"Person2",["Line3","line4"]},
           {"Person3",null}} 
```

呈现为：

```
<div>
   Person1<br />
   Line1<br />
   Line2<br />
</div>
<div>
   Person2<br />
   Line3<br />
   Line4<br />
</div>
<div>
   Person3<br />
   Line3<br />
   Line4<br />
</div> 
```

这似乎表明每个迭代器上的值都没有被清除。我需要做什么来处理 value 可能为 null 的情况？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T06:47:30.843

我建议您在将地图交付给 Struts/JSP 之前对其进行预过滤。关注点分离表明您的表示层不应该做出那种决定。

我相信 Multimap 不能（当然也不应该）有空值；所以你的结构可能是：

```
persons = {{"Person1",["Line1","line2"]},
           {"Person2",["Line3","line4"]},
           {"Person3",[]}} 
```

# perl - 如何将三个小的perl程序合二为一？

> ID：11283145
> 
> 赞同：0
> 
> 时间：2012-07-01T15:13:42.780
> 
> 标签：perl

我用perl写了三个小程序。我有 Program1.pl，然后是 Program2.pl（使用 Program1.pl 生成的输出作为输入），然后是 Program3.pl（使用 Program2.pl 生成的输出作为输入）。

现在我想编写一个“调用”所有三个程序的程序，这样用户只需运行一个程序，即 MainProgram.pl。

我该怎么做呢？

提前致谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T15:16:20.877

我取决于您对*combine*的含义是什么，但如果您能做到这一点，例如，创建一个管道：

```
open(PIPE, "perl Program1.pl | perl Program2.pl | perl Prograp3.pl |") or die "can't create pipe: $!";
while(<PIPE>){
  print;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T18:33:53.287

根据您想要更改代码的程度，它可能非常简单，例如：

```
#!/usr/bin/perl

system('perl Program1.pl');
system('perl Program2.pl');
system('perl Program3.pl'); 
```

或者，您可以将脚本重写为单个脚本，其中包含要执行的每个部分的子例程。就像是：

```
#!/usr/bin/perl

part_A();
part_B();
part_C();
exit;

sub part_A {
    # code from Program1.pl goes in here
}

sub part_B {
    # code from Program2.pl goes here
}

sub part_C {
    # code from Program3.pl here
} 
```

但老实说，听起来您只需要编写一个新脚本来执行您需要的所有逻辑，然后 git 摆脱其他脚本。不写所有这些“临时”文件只是为了再次读取它们以继续处理会更简单。您可以将散列和数组传递到子例程中并让它们返回散列或数组，或者只是让它们修改您传入的那些（如果您传入引用）。

哦，提到使用管道 - 管道仅在取出一个程序的标准输出和/或标准错误并将其发送到另一个程序的标准时才有用。并且由于您说您的脚本写入文件并从文件中读取，那么它们不会打印到标准输出，也不会从标准输入读取。因此，将它们连接在一起不会对您有任何好处，而不仅仅是按顺序调用每个脚本。您也可以像这样在线执行它们（来自 bash shell）：

```
$ Program1.pl && Program2.pl && Program3.pl 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T15:17:48.627

听起来这里有点设计问题；将数据从 sub 传递到 sub，或者使用 OO 结构，而不是将一个脚本传递到另一个脚本然后传递到另一个脚本，这将是有意义的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T17:42:21.253

除非人类需要“输出 [n]”文件，否则您只需将结果推送到数组中，然后在后续步骤中将数组读入哈希。这仅适用于项目数量适合内存的情况。如果您正在处理千兆字节的数据，则可能需要中间文件。

push 是一个数组运算符。

管道不能轻易使用，因为您有多个输出，并且输出有多个条件。

# android - 按下主页按钮时退出应用程序。

> ID：11283157
> 
> 赞同：0
> 
> 时间：2012-07-01T15:15:09.033
> 
> 标签：android, android-intent

我有一个安全程序，所以我需要在按下 HOME 按钮时退出应用程序。但我知道无法实现 HOME 按钮操作。

然后，我知道我可以使用

```
android:noHistory="true" 
```

去做吧。但是我用过

```
startActivityForResult(intent, 0); 
```

调用一个新的活动。当活动被回调时

```
this.setResult(RESULT_OK, intent);
this.finish(); 
```

原来的活动已经退出。

如何在按下 HOME 按钮时退出应用程序，但 startActivityForResult 不会退出活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T15:30:59.793

不要退出应用程序 - 这不是 android 的工作方式。

相反，在需要的情况下，可能是 onPause()，销毁让您的应用程序运行的安全凭证。在下一次运行或恢复时，用户必须重新进行身份验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T15:33:03.053

也许您可以使用`onUserLeaveHint()`作为您应该完成（）的指示。当用户有意离开您的活动时调用此方法（即：通过按 HOME 键）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T15:21:10.257

作为一般规则，您不应该像这样退出您的应用程序。它打破了大多数人在使用应用程序时所期望的直观工作流程。但是，如果您真的想这样做，请覆盖[onPause()](http://developer.android.com/reference/android/app/Activity.html#onPause%28%29)和[onStop()](http://developer.android.com/reference/android/app/Activity.html#onStop%28%29)并实现代码以退出它们。请记住在您的重写方法中调用 super()。

# youtube - Youtube 订阅按钮事件

> ID：11283159
> 
> 赞同：1
> 
> 时间：2012-07-01T15:15:24.853
> 
> 标签：youtube, youtube-api, youtube-javascript-api, youtube-channels

当用户在我的网站上订阅我的 Youtube 频道时，我如何捕捉事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T04:54:00.130

您可以使用图片、按钮或横幅来记录将他们带到 YouTube 订阅页面的操作（点击）。

```
<p> <a href="DOMAIN" onClick="_gaq.push(['_trackEvent', 'ChannelSubcription', 'SUBSCRIBED', 'SUBSCRIPTION');"><img src="Title.jpg"></a></p> 
```

如果您尝试从嵌入式播放器录制动作，则需要使用 YouTube 的 API - 参考他们的 beta API 是明智的。您还可[以为您的频道使用自定义 iframe 订阅按钮](http://www.labnol.org/internet/youtube-subscribe-button/18089/)并进行录制，而无需让他们退出您的网站。

# gcc - 位域的 GCC 实现中的一个错误

> ID：11283164
> 
> 赞同：9
> 
> 时间：2012-07-01T15:15:39.377
> 
> 标签：gcc, c99, bit-fields, c11, compiler-bug

在 C11 中工作，以下结构：

```
struct S {
  unsigned a : 4;
  _Bool    b : 1;
}; 
```

由 GCC 布局为一个`unsigned`（4 个字节），其中使用了 4 个位，然后是一个`_Bool`（4 个字节），其中使用了 1 个位，总大小为 8 个字节。

请注意，C99 和 C11 特别允许`_Bool`作为位域成员。C11 标准（可能还有 C99）还在 §6.7.2.1 'Structure and union specifiers' ¶11 中声明：

> 实现可以分配任何大到足以容纳位字段的可寻址存储单元。如果有足够的空间剩余，紧跟在结构中另一个位域之后的位域将被打包到同一单元的相邻位中。

所以我认为`b`上面的 member 应该已经被打包到为 member 分配的存储单元中`a`，从而产生了一个总大小为 4 字节的结构。

GCC 行为正确，并且在对两个成员使用相同类型时，或者当一个 is`unsigned`和另一个时，确实会发生打包，但是GCC 似乎认为`signed`类型`unsigned`和类型过于不同，无法正确处理它们。`_Bool`

有人可以确认我对标准的解释，这确实是一个 GCC 错误吗？

我也对解决方法感兴趣（一些编译器开关，编译指示，`__attribute__`...）。

我正在使用 gcc 4.7.0 `-std=c11`（尽管其他设置显示相同的行为。）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-01T15:56:41.493

所描述的行为与 C99 和 C11 标准不兼容，但提供了与 MSVC 编译器（具有不寻常的结构打包行为）的二进制兼容性。

幸运的是，它可以在`__attribute__((gcc_struct))`应用于结构的代码中禁用，也可以使用命令行开关禁用`-mno-ms-bitfields`（请参阅[文档](http://gcc.gnu.org/onlinedocs/gcc/x86-Options.html#x86-Options)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T17:16:26.717

在 64 位编译的 Mac OS X 10.7.4 上使用 GCC 4.7.1（自制）和 GCC 4.2.1（LLVM/clang†），此代码`4`在`-std=c99`模式下产生：

```
#include <stdio.h>

int main(void)
{
    struct S
    {
        unsigned a : 4;
        _Bool    b : 1;
    };
    printf("%zu\n", sizeof(struct S));
    return 0;
} 
```

这是您在 Windows 上报告的大小的一半。它对我来说似乎大得惊人（我希望它的大小为 1 字节），但平台的规则就是它们。基本上，编译器没有义务遵循您想要的规则；它可能会遵循运行平台的规则，如果有机会，它甚至可以定义运行平台的规则。

以下程序的行为有点可疑（因为它在最后一次写入`u.i`之后访问`u.s`），但显示该字段`a`存储在 4 个最低有效位中，并且该字段`b`存储在下一位中：

```
#include <stdio.h>

int main(void)
{
    union
    {
        struct S
        {
            unsigned a : 4;
            _Bool    b : 1;
        } s;
        int i;
    } u;
    u.i = 0;
    u.s.a = 5;
    u.s.b = 1;
    printf("%zu\n", sizeof(struct S));
    printf("%zu\n", sizeof(u));
    printf("0x%08X\n", u.i);
    u.s.a = 0xC;
    u.s.b = 1;
    printf("0x%08X\n", u.i);
    return 0;
} 
```

输出：

```
4
4
0x00000015
0x0000001C 
```

* * *

† i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1（基于 Apple Inc. build 5658）（LLVM build 2336.9.00）

# c# - 如何在 C# 控制台的测验应用程序中实现简单的高分系统？

> ID：11283167
> 
> 赞同：0
> 
> 时间：2012-07-01T15:15:55.943
> 
> 标签：c#, console

我正在尝试创建一个简单的多项选择测验游戏，该游戏计算一个人的分数并在最后向他们展示。

问题是我的教授给了我们一个可选功能来添加，我不知道如何编码。他希望程序在游戏结束时显示前 5 名的最高分数，经过大量搜索，由于我缺乏编程经验，我无法弄清楚。

这是代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace TeamYeahGame
{
    class Program
    {
        static void Main(string[] args)
        {
            Beginning:
            string username;
            int YourScore = 0;
            Console.SetWindowSize(75, 50);

            Console.ForegroundColor = ConsoleColor.Yellow;//yellow's pretty good aesthetically and functionally
            Console.WriteLine("           ___________________________________________________            ");
            Console.WriteLine("          |                                                   |           ");
            Console.WriteLine("          |      Salutations! Brave hero of the class!        |           ");// "/" cannot be used for some reason in writelines
            Console.WriteLine("          |           Welcome to the legendary quiz           |           ");
            Console.WriteLine("          |              of IntrDev class TCOB2!              |           ");
            Console.WriteLine("          |                                                   |           ");
            Console.WriteLine("          |___________________________________________________|           ");
            Console.WriteLine();
            Console.WriteLine();
            Console.WriteLine();
            Console.WriteLine("First, you must enter your name."); 
            username = Console.ReadLine();
            Console.WriteLine();
            Console.WriteLine();
            Console.WriteLine("Good day, " + username + ", the following quiz will test your knowledge of"); // leave spaces for sentences between concatenated data
            Console.WriteLine("close strangers, goodluck.");
            Console.WriteLine();
            Console.ReadLine();
            Console.Clear();  //Clears the current screen, needs action such as "readline" so it won't supercede writelines

            Console.WriteLine("Quiz Time!");

            Console.WriteLine("Question 1: What is Frederick Bunao's favorite hobby?");
            Console.WriteLine("a) Writing");
            Console.WriteLine("b) Reading");
            Console.WriteLine("c) Gaming");
            Console.WriteLine("d) Sports");
            Console.WriteLine();
            string answer1 = "C";
            string usersAnswer1;

            Console.Write("Answer: ");
            usersAnswer1 = Console.ReadLine();
            if (usersAnswer1 == answer1)
                YourScore++;
            if (usersAnswer1 == answer1)
                Console.Beep(2500, 200);
            else Console.Beep(500, 800);

            Console.Clear();
            Console.WriteLine("What is Frederick Bunao's second favorite hobby?");
            Console.WriteLine("a) Writing");
            Console.WriteLine("b) Reading");
            Console.WriteLine("c) Gaming");
            Console.WriteLine("d) Sports");
            string answer2 = "A";
            string usersAnswer2;

            Console.Write("Answer: ");
            usersAnswer2 = Console.ReadLine();
            if (usersAnswer2 == answer2)
                YourScore++;
            if (usersAnswer2 == answer2)
                Console.Beep(2500, 200);
            else Console.Beep(500, 800);
            Console.Clear();
            Console.WriteLine("Which weapon would Frederick Bunao choose?");
            Console.WriteLine("a) Sword");
            Console.WriteLine("b) Dagger");
            Console.WriteLine("c) Staff");
            Console.WriteLine("d) Rocket Launcher");

            string answer3 = "C";
            string usersAnswer3;

            Console.Write("Answer: ");
            usersAnswer3 = Console.ReadLine();
            if (usersAnswer3 == answer3)
                YourScore++;
            if (usersAnswer3 == answer3)
                Console.Beep(2500, 200);
            else Console.Beep(500, 800);

            Console.Clear();
            Console.WriteLine("Who is Frederick Bunao's favorite writer?");
            Console.WriteLine("a) Stephen King");
            Console.WriteLine("b) Stephenie Meyer");
            Console.WriteLine("c) Mark Twain");
            Console.WriteLine("d) Edgar Allan Poe");
            string answer4 = "D";
            string usersAnswer4;

            Console.Write("Answer: ");
            usersAnswer4 = Console.ReadLine();
            if (usersAnswer4 == answer4)
                YourScore++;
            if (usersAnswer4 == answer4)
                Console.Beep(2500, 200);
            else Console.Beep(500, 800);

            Console.Clear();
            Console.WriteLine("What is Frederick Bunao's favorite game?");
            Console.WriteLine("a) FPS");
            Console.WriteLine("b) TPS");
            Console.WriteLine("c) RPG");
            Console.WriteLine("d) RTS");
            string answer5 = "C";
            string usersAnswer5;

            Console.Write("Answer: ");
            usersAnswer5 = Console.ReadLine();
            if (usersAnswer5 == answer5)
                YourScore++;
            if (usersAnswer5 == answer5)
                Console.Beep(2500, 200);
            else Console.Beep(500, 800);
            Console.Clear();
            Console.WriteLine("What is Lloyd Abella's favorite color?");
            Console.WriteLine("a) Blue");
            Console.WriteLine("b) Red");
            Console.WriteLine("c) Green");
            Console.WriteLine("d) Orange");
            string answer6 = "B";
            string usersAnswer6;

            Console.Write("Answer: ");
            usersAnswer6 = Console.ReadLine();
            if (usersAnswer6 == answer6)
                YourScore++;
            if (usersAnswer6 == answer6)
                Console.Beep(2500, 200);
            else Console.Beep(500, 800);
            Console.Clear();
            Console.WriteLine("What is Lloyd Abella's favorite number?");
            Console.WriteLine("a) 1");
            Console.WriteLine("b) 3");
            Console.WriteLine("c) 18");
            Console.WriteLine("d) 20");
            string answer7 = "C";
            string usersAnswer7;

            Console.Write("Answer: ");
            usersAnswer7 = Console.ReadLine();
            if (usersAnswer7 == answer7)
                YourScore++;
            if (usersAnswer7 == answer7)
                Console.Beep(2500, 200);
            else Console.Beep(500, 800);
            Console.Clear();
            Console.WriteLine("What is Lloyd Abella's favorite hobby?");
            Console.WriteLine("a) Basketball");
            Console.WriteLine("b) Table Tennis");
            Console.WriteLine("c) Volleyball");
            Console.WriteLine("d) Badminton");
            string answer8 = "A";
            string usersAnswer8;

            Console.Write("Answer: ");
            usersAnswer8 = Console.ReadLine();
            if (usersAnswer8 == answer8)
                YourScore++;
            if (usersAnswer8 == answer8)
                Console.Beep(2500, 200);
            else Console.Beep(500, 800);
            Console.Clear();
            Console.WriteLine("Who is Lloyd Abella's favorite celebrity?");
            Console.WriteLine("a) Jake Cuenca");
            Console.WriteLine("b) Coco Martin");
            Console.WriteLine("c) John Lloyd");
            Console.WriteLine("d) Gabriel Gaerlan");
            string answer9 = "C";
            string usersAnswer9;

            Console.Write("Answer: ");
            usersAnswer9 = Console.ReadLine();
            if (usersAnswer9 == answer9)
                YourScore++;
            if (usersAnswer9 == answer9)
                Console.Beep(2500, 200);
            else Console.Beep(500, 800);
            Console.Clear();

            Console.WriteLine("How old is Lloyd Abella?");
            Console.WriteLine("a) 16");
            Console.WriteLine("b) 17");
            Console.WriteLine("c) 15");
            Console.WriteLine("d) 12");
            string answer10 = "B";
            string usersAnswer10;

            Console.Write("Answer: ");
            usersAnswer10 = Console.ReadLine();
            if (usersAnswer10 == answer10)
                YourScore++;
            if (usersAnswer10 == answer10)
                Console.Beep(2500, 200);
            else Console.Beep(500, 800);
            Console.Clear();
            Console.WriteLine("Your score is being calculated. Please type any key to continue...");
            Console.ReadLine();
            Console.Clear();
            if (YourScore == 10)
                Console.WriteLine("Congratulations! You got a perfect score of 10!");
            else if (YourScore == 9 || YourScore == 8 || YourScore == 7)
                Console.Write("Great Job!! You got a " + YourScore + "!!");
            else if (YourScore == 6 || YourScore == 5)
                Console.Write("You got a " + YourScore + ", kinda good I guess");
            else if (YourScore < 5)
                Console.Write("Your score is...     " + YourScore + "    unfortunately, you failed the quiz");

            Console.WriteLine();
            string usersChoice;
            string answer = "Y";

            Console.WriteLine("Would you like to play again? (Y/N)");
            usersChoice = Console.ReadLine();
            Console.Clear();
            if (usersChoice == answer) //use this type of if statement for Y/N stuff
            {
                goto Beginning;
            }

                Console.ReadKey();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-01T15:18:12.950

既然这是作业，我会给你一个起点。

将所有分数存储在一个列表中。如果您对列表进行排序（或者更好……使用为您排序的列表实现……）您可以通过查看排序列表的前 5 个条目来获得最高分。

看

[http://msdn.microsoft.com/en-us/library/system.collections.sortedlist.aspx](http://msdn.microsoft.com/en-us/library/system.collections.sortedlist.aspx)

# javascript - jquery 对象没有方法'xyz'

> ID：11283174
> 
> 赞同：0
> 
> 时间：2012-07-01T15:16:18.610
> 
> 标签：javascript, jquery, object

```
var $content    = $('#SomeDivContainingTwoImages');
$content.children().each(function(i){
    $(this).showImage = showImageStatic;
    $(this).showImage();
}); 
```

返回

```
Uncaught TypeError: Object #<Object> has no method 'showImage' 
```

运行时。这在 jquery 每个迭代器之外工作，即如果我只是将它应用于单个元素。这是怎么回事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T15:21:44.800

每次调用 $(this) 都会重新创建一个 jQuery 对象。

这应该有效：

```
$content.children().each(function(i) {
    var $this = $(this);
    $this.showImage = showImageStatic;
    $this.showImage();
}); 
```

但我认为这不是一个很好的处理方式。您可以直接调用 showImageStatic() ：

```
showImageStatic.call($(this)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T15:21:36.597

`$(this)`每次创建一个新实例。
第二个`$(this)`没有您添加到第一个的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T15:18:43.450

我认为这不是添加功能的正确方法，您应该这样做

```
$.fn.extend({ "showImage" : showImageStatic }); 
```

它应该允许您正确调用 showImage() 。

# jquery - 使用 jquery 加载外部 html 内容 - 带有拉丁扩展字符

> ID：11283187
> 
> 赞同：0
> 
> 时间：2012-07-01T15:17:57.247
> 
> 标签：jquery, html, ajax, encoding, escaping

我有一个小的 jquery 脚本，它允许我通过单击具有相同 ID 的 Li 元素来加载外部 html 内容，例如 HTML 文件中的部分内容，结果被加载到特定的 div 中，**但我遇到了编码问题**（扩展的拉丁字符）。有谁知道如何解决这个问题。

下面是关于非工作 JSFiddle 的链接，因为我无法从我的服务器加载 JSFiddle 中的内容，但一切都在那里。

这里是 JSFiDDLE：http: [//jsfiddle.net/QQz5W/](http://jsfiddle.net/QQz5W/)

小提琴中缺少的部分代码实际上是需要加载的 html 文件，其中包含带有拉丁扩展字符的文本。

这是那部分：

```
 <div id="section_first">
        <div class="LeftDiv">
            <h2>Opći uvjeti za montiranje drvenih podnih obloga</h2>
        </div>

            <h3>1\. PRIJE POLAGANJA</h3>
            <p><b>1.1\. Dozvoljena vlažnost podloge:</b><br>
            - cementna košuljica do 2,0%, cementna košuljica s podnim grijanjem do 1,8%<br>
            - anhidridna košuljica do 0,5%, anhidridna košuljica s podnim grijanjem do 0,3%<br>
            - ploče od iverice 9+4% / 8+2%</p>
    </div>
<div id="section_second">
        <div class="LeftDiv">
            <h2>Title</h2>
        </div>
<p><b>bla bla čćšđž ČĆŽŠĐ</b></p>
    </div> 
```

我已经尝试添加

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta content="hr" http-equiv="Content-Language" />
</head> 
```

到那个html文件，但似乎这部分在加载时被忽略了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T15:51:12.083

加载内容（尝试 utf-8 或 ISO-8859-1）：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

和

```
$.ajax({
    type: "GET",
    url: "test.html #section_first",

    /* VERY IMPORTANT */
    contentType: "application/x-www-form-urlencoded; charset=utf-8",// or ISO-8859-1

    success: function(data){
           content.html(data);        
           hideLoading();           
    }
}); 
```

# biztalk - biztalk 2010 中的自定义确认，

> ID：11283190
> 
> 赞同：0
> 
> 时间：2012-07-01T15:18:25.760
> 
> 标签：biztalk, biztalk-2010

需要创建一个类似于 biztalk 内置 977 确认的自定义确认。

我打算在 `IBaseMessage IComponent.Execute(IPipelineContext pContext, IBaseMessage pInMsg)`方法中这样做。

这是正确的方法吗？

谁能告诉我是否有更好/不同的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T04:26:50.000

在请求-响应接收位置的接收管道中提升请求消息的以下 2 个属性

EpmRRCorrelationToken 和 RouteDirectToTP

并根据需要编写或使用自定义发送管道来创建 ack

参考： http: [//niharmalali.blogspot.com/2012/10/acknowledgements-in-biztalk-today-i.html](http://niharmalali.blogspot.com/2012/10/acknowledgements-in-biztalk-today-i.html)

# php - 使用数据库中的值和列名动态创建输入字段

> ID：11283191
> 
> 赞同：1
> 
> 时间：2012-07-01T15:18:38.760
> 
> 标签：php, mysql, arrays

我使用列中的信息创建输入，例如，如果一个字段被调用`about_content`，它会输出一个带有输入字段的 About Content 标签。这适用于插入，但是我想以类似的方式使用此代码，`UPDATE`并且我想向用户显示在数据库中输入的字段的当前值。例如，如果`about_content = Hello World!`我希望输入值反映这一点。有没有办法动态地做到这一点？

```
<?php

require('dbc.php');

mysql_select_db($db);
$resultInput = mysql_query("SHOW COLUMNS FROM about WHERE Field NOT IN 
('id', 'created', 'date_modified', 'last_modified', 'update', 'type', 'bodytext') 
AND Field NOT REGEXP '_image'"); // selects only the columns I want

$result = mysql_query("SELECT * FROM about WHERE id=".$_GET['id']); // values I want to put into the values for <input>

while ($row = mysql_fetch_assoc ($result) && $column = mysql_num_rows ($resultInput)) {

    foreach($row as $column => $value){
        echo '<label>'.$column.'<input name="'.$column.'" type="input" value="'.$value.'"></label><br>';
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T16:03:25.870

见[mysql_fetch_field](http://php.net/manual/en/function.mysql-fetch-field.php)。

```
if (mysql_num_rows($result) > 0) {
//loop creates inputs
//make $resultInput object to array.
$i=0;
while ($row = mysql_fetch_assoc($result)) {
    $meta = mysql_fetch_field($result, $i);
    if(in_array($meta->name, $resultInput )){
    echo '<div class="wrapper"><label>' . ucfirst(str_replace('_', ' ',$meta->name)) . 
    '<br><input name="' . $meta->name . 
    '" type="text" class="input" value="$row[$meta->name]"><br></label></div>';
    }
    $i++;
 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T15:28:55.747

看到你用箭头标记的地方了吗？而不是 string `(1)`，设置`value`为您读取的相应数据库值`$result`（而不是 in `$resultInput`）。

方法如下：`mysql_fetch_assoc`用于您的`SELECT`查询，而不是`mysql_fetch_row`. 只有一行，所以在开始生成表单*之前获取它。*然后，您将拥有一个包含行值的命名数组，您可以按名称获取每个字段并将其放入表单中。

如果您不明白如何执行此操作，请查看 php 文档`mysql_fetch_assoc`。

`$_GET['id']`就像你在上一个问题中所说的那样逃避你。你乞求被pwned！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-05T10:14:37.867

```
<?php
include('db.php');
if (isset($_POST['btn'])) {

    $dcolumn = $_POST['dyncolumns'];
    $dvalue = $_POST['dynfields'];

    $name = $_POST['name'];
    $mobile = $_POST['mobile'];
    $address = $_POST['address'];
    $query = "INSERT into addtable(name,mobile,address)VALUES('" . $name . "','" . $mobile . "','" . $address . "')";
    $result = mysql_query($query)or die(mysql_error());
    $id = mysql_insert_id();

    if ($dcolumn) {
        foreach ($dcolumn as $key => $value) {
            $result1 = "show COLUMNS from addtable like '.$value.'";
            $exists = mysql_query($result1)or die(mysql_error());
            $data = mysql_fetch_assoc($exists);

            if ($data==TRUE) {
                $query = "update addtable set $value = '" . $dvalue[$key] . "' where id=$id";
            } else {
                $query1 = "ALTER TABLE addtable ADD $value varchar(45)";
                $result2 = mysql_query($query1)or die(mysql_error());
                $query = "update addtable set $value = '" . $dvalue[$key] . "' where id=$id";
                $result = mysql_query($query)or die(mysql_error());
            }
        }
    }

}
?>
<script>
    function myFunction() {
        var table = document.getElementById("insert");
        var row = table.insertRow(3);
        var cell1 = row.insertCell(0);
        var cell2 = row.insertCell(1);
        cell1.innerHTML = "<input type='text' name='dyncolumns[]'>";
        cell2.innerHTML = "<input type='text' name='dynfields[]' >";
    }
</script>
<html>
    <body>
        <form name="insert" method="post">

            <table border="2" align="center" id="insert">
                <tr>
                    <td>Name</td><td><input type="text" name="name" /></td>
                </tr>
                <tr>
                    <td>Mobile</td><td><input type="text" name="mobile" maxlength="10"/></td>
                </tr>
                <tr>
                    <td>Address</td><td><input type="text" name="address" /></td>
                </tr>

                <tr>
                    <td colspan="2" align="center"><input type="submit" name="btn" value="submit"></td>
                </tr>

            </table>
            <input type="button" onclick="myFunction()" name="add" value="Add">
            <a href="logout.php">Logout</a>
        </form>
    </body>
</html> 
```

# web-services - 使用 JAX-WS 进行异步 Web 服务调用：使用 wsimport 支持异步还是自己滚动？

> ID：11283195
> 
> 赞同：5
> 
> 时间：2012-07-01T15:18:54.927
> 
> 标签：web-services, asynchronous, jax-ws, jax-ws-customization

[Young Yang](http://today.java.net/pub/a/today/2006/09/19/asynchronous-jax-ws-web-services.html)有一篇优秀的文章解释了如何使用 wsimport 创建具有异步 Web 服务调用的 Web 服务客户端工件。异步要求 WSDL 具有标记

`<enableAsyncMapping>true</enableAsyncMapping>`

在其绑定部分。如果您对带有 JAX-WS 注释的 Java 类使用自下而上的方法，则不能直接在 WSDL 中执行此操作，因为 WSDL 是 Web 服务器上生成的工件。相反，当在 WSDL 上执行 wsimport 时，您可以使用 Ant 或 Maven 等构建工具来包含此绑定。

生成的客户端工件具有异步方法调用，这些方法调用返回

```
Future<?> 
```

或一个

```
Response 
```

这是一个未来。

阅读 Yang 的文章后，我的问题是为什么不使用 Executors 和 Futures 来滚动我自己的异步 Web 服务调用。wsimport 创建的工件是否提供了一些我无法通过自己滚动的方法看到的优势？

如果有人对这两种方法都有经验或见解，我将不胜感激您的反馈。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-01T21:37:28.757

理论上，生成的异步客户端不需要阻塞线程。通过传递 AsyncHandler，系统可以在 Web 服务调用完成时使用 NIO 注册事件，并且可以调用该处理程序。根本没有线程需要阻塞。

如果你把你的*同步*Web 服务调用放到一个 executor 中，它仍然会阻塞一个线程直到结果到达，尽管至少这个阻塞仅限于 executor 中的线程池。

一旦您有数百个线程浮动，您的系统性能就会由于上下文切换而降低。

底层的 Web 服务库是否真的使用 NIO 是另一回事。JAX-WS 规范似乎不需要它。使用 JDK 1.6 并设置断点服务器端，我设置 100 个客户端关闭以调用服务器。我使用 JVisualVM 连接到客户端，可以看到它在每次调用服务器时创建了一个新线程。垃圾！

在网上环顾四周，我发现 Apache CXF 支持限制异步调用中使用的线程池。果然，使用由 CXF 生成的客户端并将正确的库放在[此处](http://cxf.apache.org/docs/asynchronous-client-http-transport.html)讨论的类路径中，重新测试表明只使用了 25 个线程。

那么为什么要使用 jax-ws API 而不是自己构建呢？因为建立自己的需要更多的工作;-)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-04-22T15:16:47.917

我知道它没有达到提示的问题，而只是补充了问题中包含的一个信息：

“相反，当在 WSDL 上执行 wsimport 时，您可以使用 Ant 或 Maven 等构建工具来包含此绑定。”

可以通过使用选项 -b 向 wsimport 添加自定义 xml 文件来生成异步客户端：

例子：

```
wsimport -p helloAsyncClient -keep http://localhost:8080/helloservice?wsdl -b customAsync.xml 
```

customAsync.xml 内容：

```
<jaxws:bindings
        wsdlLocation="http://localhost:8080/helloservice?wsdl"
        xmlns:jaxws="http://java.sun.com/xml/ns/jaxws">
        <jaxws:enableAsyncMapping>true</jaxws:enableAsyncMapping>
</jaxws:bindings> 
```

这只是使用 ant 或 maven 生成异步客户端的另一种方法:)

# c# - 以编程方式取消订阅 YouTube 用户 C#

> ID：11283197
> 
> 赞同：3
> 
> 时间：2012-07-01T15:19:12.340
> 
> 标签：c#, .net, api, youtube

这是我正在制作的大规模取消订阅者的代码，目前一切正常 - 除了取消订阅功能..（典型的呵呵）

```
 public void UnSubUsers()
   {
        string feedUrl = "http://gdata.youtube.com/feeds/api/users/" + username.Text + "/subscriptions";
        YouTubeQuery query = new YouTubeQuery(feedUrl);
        subFeed = service.GetSubscriptions(query);
        YouTubeRequestSettings yts = new YouTubeRequestSettings("Unsubscriber", DEVKEY, username.Text, password.Text);
        YouTubeRequest request = new YouTubeRequest(yts);
        int i = 0;
        int x = 0;
        x = (listBox1.Items.Count);
        for (i=0;i<x ;i++ )
        {
            string uname = listBox1.Items[i].ToString();
            uname=uname.Substring(42);
            uname = uname.Remove(uname.LastIndexOf("/"));
            Subscription s = new Subscription();
            s.Type = SubscriptionEntry.SubscriptionType.channel;
            s.UserName = uname;
            //MessageBox.Show(uname); //Displays the username so that we know if it is correct
            try
            {
                s.AtomEntry.EditUri = "http://gdata.youtube.com/feeds/api/users/" + username.Text + "/subscriptions";
                s.SubscriptionEntry.EditUri = "http://gdata.youtube.com/feeds/api/users/" + username.Text + "/subscriptions";
                request.Delete(s);
            }
            catch (ArgumentNullException e)
            {
                MessageBox.Show(e.ToString(), "Error");
            }
            catch (GDataRequestException e)
            {
                MessageBox.Show(e.ToString(), "Error");
            }
        }
    } 
```

（也可在[http://pastebin.com/LnKMYCJp](http://pastebin.com/LnKMYCJp)获得）

当代码“到达” request.Delete(s) 它给了我这个错误：

```
Google.GData.Client.GDataRequestException: Execution of request failed: http://gdata.youtube.com/feeds/api/users/iWinterHD/subscriptions --->System.Net.WebException: The remote server returned an error: (400) Bad Request.
    at System.Net.HttpWebRequest.GetResponse()
    at Google.GData.Client.GDataRequest.Execute()
    --- End of inner exception stack trace ---
    at Google.GData.Client.GDataRequest.Execute()
    at Google.GData.Client.GDataGAuthRequest.Execute(Int32 retryCounter)
    at Google.GData.Client.GDataGAuthRequest.Execute()
    at Google.GData.Client.Service.Delete(Uri uriTarget, String eTag)
    at Google.GData.Client.FeedRequest1.Delete[Y](Y entry)
    at Unsubscriber.SubForm.UnSubUsers() in C:\Users\iWinterHD\documents\visual studio 2010\Projects\Unsubscriber\Unsubscriber\SubForm.cs:line 112 
```

有谁知道如何解决这个问题，我一直试图让它工作大约 2 个小时，但我仍然收到这个错误，无论我尝试什么

当我使用提琴手来查找有关连接的信息时，这是标题：

```
DELETE /feeds/api/users/iWinterHD/subscriptions HTTP/1.1
Content-Type: application/atom+xml; charset=UTF-8
User-Agent: G-Unsubscriber/GDataGAuthRequestFactory-CS-Version=2.1.0.0--IEnumerable
X-GData-Key: key=DEVELOPER_KEY
Authorization: GoogleLogin auth=DQAAAMgAAAAfAWmos6z7rpaY8JrK2RNK4Urf7Riu_putKeGgV1KFH5OEmAYA2t5w0DWXbVQJnizQiPmLSl-4D0eCozYn5jVp4DWs4Rpao3udc3eTIC9wibBGRe640m7zZjl96UnFMyf-fJDk0VrTIcAw74S7_WhwBaRDjLS77EOWfERw066NmcYO-2QB_6WZ4Y0o3Y4haVn_pRokm8ckyuTRWJf6cES1yVlZ4fP5diUySVsH7EaHLiUcAquUl7GWCMdF_JbjRVVxvgeMW1zV757JW8l841uk
GData-Version: 2.0
Host: gdata.youtube.com
Connection: Keep-Alive 
```

然而，谷歌开发者的例子是这样的：

```
DELETE /feeds/api/users/default/subscriptions/SUBSCRIPTION_ID HTTP/1.1
Host: gdata.youtube.com
Content-Type: application/atom+xml
Authorization: Bearer ACCESS_TOKEN
GData-Version: 2
X-GData-Key: key=DEVELOPER_KEY 
```

希望这会引起一些注意:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T20:35:27.983

在玩了一些 API 之后，我想我已经找到了解决方案。

`AtomEntry.EditUri`需要与单个订阅的 URI 相同。碰巧这已经存储在`SubscriptionEntry`对象中（您正在覆盖）。

您的代码应类似于：

`itemToRemove.AtomEntry.EditUri = itemToRemove.SubscriptionEntry.EditUri;`

这是我用来测试的代码：

```
 var subscriptionsUrl = 
             "http://gdata.youtube.com/feeds/api/users/warmthonthesoul/subscriptions";
            var settings = new YouTubeRequestSettings([...]);
            var request = new YouTubeRequest(settings);

            var query = new YouTubeQuery(subscriptionsUrl);
            var feed = request.GetSubscriptionsFeed("warmthonthesoul").Entries;

            var itemToRemove = feed.SingleOrDefault(x =>
                                         x
                                         .SubscriptionEntry
                                         .Title.Text.Contains("Triforcefilms"));

            if(itemToRemove != null)
            {
                itemToRemove.AtomEntry.EditUri = itemToRemove
                                                    .SubscriptionEntry
                                                    .EditUri;
                request.Delete(itemToRemove);
                Console.WriteLine("Item removed");
            }

            Console.ReadLine();
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T21:49:23.973

在搜索所有变量大约 4 小时后，我最终偶然发现了 ID 变量，后来我发现需要将其传递到最终 URL 才能删除带有该 ID 的订阅，我对其进行了测试，它运行良好！

```
 public void ListSubs()
             {
                 string feedUrl = "http://gdata.youtube.com/feeds/api/users/" + username.Text + "/subscriptions";
                 YouTubeQuery query = new YouTubeQuery(feedUrl);
                 try
                 {

                     subFeed = service.GetSubscriptions(query);

                     foreach (SubscriptionEntry entry in subFeed.Entries)
                     {
                         string id = entry.Id.AbsoluteUri;
                         id = id.Substring(id.LastIndexOf(":")+1);
                         listBox1.Items.Add(id);
                         string usrname = entry.Content.Src.Content;
                         usrname = usrname.Substring(42);
                         usrname = usrname.Remove(usrname.LastIndexOf("/"));
                         listBox2.Items.Add(usrname);
                     }
                 }
                 catch(GDataRequestException e)
                 {
                     MessageBox.Show(e.ToString(), "Error:");
                 }

             }

    public void UnSubUsers()
            {
                YouTubeRequestSettings yts = new YouTubeRequestSettings("Unsubscriber", DEVELOPER_KEY, username.Text, password.Text);
                YouTubeRequest request = new YouTubeRequest(yts);
                int i = 0;
                int x = 0;
                x = (listBox1.Items.Count);
                for (i=0;i<x ;i++ )
                {
                    string uname = listBox1.Items[i].ToString();
                    yts = new YouTubeRequestSettings("Unsubscriber", DEVELOPER_KEY, username.Text, password.Text);
                    request = new YouTubeRequest(yts);
                    Subscription s = new Subscription();
                    s.Type = SubscriptionEntry.SubscriptionType.channel;
                    s.UserName = uname;
                    s.Id = listBox1.Items[i].ToString()
                    try
                    {
                        s.AtomEntry.EditUri = "http://gdata.youtube.com/feeds/api/users/" + username.Text + "/subscriptions" + "/" + listBox1.Items[i].ToString();
                        request.Delete(s);
                    }
                    catch (ArgumentNullException e)
                    {

                    }
                    catch (GDataRequestException e)
                    {

                    }
                }
            } 
```

我必须将订阅 ID 添加到我用来删除订阅的 URL，这是我将订阅 ID 添加到我最初用于存储用户名的列表框的代码，事实证明你不能将用户名传递给 Delete 方法，但这同样有效，因为我添加了第二个列表框来查找订阅 ID 的用户名

```
 string id = entry.Id.AbsoluteUri;
    id = id.Substring(id.LastIndexOf(":")+1);
    listBox1.Items.Add(id); 
```

此代码从条目变量中获取订阅 ID，然后将订阅 ID 添加到 EditUri 变量：

```
 s.AtomEntry.EditUri = "http://gdata.youtube.com/feeds/api/users/" + username.Text + "/subscriptions" + "/" + listBox1.Items[i].ToString();
    request.Delete(s); 
```

我的大规模退订现已完成！

非常感谢@JamieDixon 的大力帮助！

# list - 如何在风景肖像中制作列表

> ID：11283198
> 
> 赞同：0
> 
> 时间：2012-07-01T15:19:13.533
> 
> 标签：list, blackberry, landscape-portrait

单击按钮时，我创建了一个列表，该列表出现在下一个屏幕上现在我想将其设置为横向纵向如果分辨率中的高度大于其宽度，我该如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T21:43:49.380

使用 Blackberry，您无法将设备方向设置为横向/纵向，除非用户以这种方式握住然后您在应用程序中进行设置。

您可以使用以下代码将设备设置为横向。

```
Ui.getUiEngineInstance().setAcceptableDirections(Display.DIRECTION_LANDSCAPE); 
```

请记住，如果您以纵向模式握住设备，则此代码将**不起作用。**将设备设置为横向模式，然后运行此代码，然后应用程序将设置为横向模式。

# sql - Rails find_by 在较低的层次结构级别

> ID：11283200
> 
> 赞同：0
> 
> 时间：2012-07-01T15:19:37.100
> 
> 标签：sql, ruby-on-rails, ruby, has-many, find-by-sql

我有以下型号：

```
Company has_many Employees has_many Projects

Projects have a deadline:dateTime 
```

现在，我想通过一条生成单个 SQL 的语句，从给定公司的任何项目中获取下一个截止日期。

IE

```
def get_next_deadline
   * * * select deadline from projects where employee_id in (employees.each |i| )) * * *
end 
```

我不想要的是遍历所有公司员工并检查下一个截止日期，为每个员工访问一次数据库。

有没有比 find 命令更优雅的

```
find_by_sql? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T15:23:18.673

如果你添加

```
has_many :projects, :through => :employees 
```

到你的公司模式，那么你可以做

```
some_company.projects.order('deadline').first 
```

找到该公司第一个截止日期的项目

# scala - Scala中反射的奇怪行为

> ID：11283204
> 
> 赞同：6
> 
> 时间：2012-07-01T15:20:25.290
> 
> 标签：scala, reflection, scala-2.10

我试图从另一个问题中举一个例子，但我遇到了一些我无法解释的事情：

```
scala> import scala.reflect.runtime.{currentMirror => m}
import scala.reflect.runtime.{currentMirror=>m}

scala> m.mkToolBox()
<console>:12: error: value mkToolBox is not a member of reflect.runtime.universe.Mirror
              m.mkToolBox()
                ^

scala> import scala.tools.reflect.ToolBox
import scala.tools.reflect.ToolBox

scala> m.mkToolBox()
res3: scala.tools.reflect.ToolBox[reflect.runtime.universe.type] = scala.tools.reflect.ToolBoxFactory$ToolBoxImpl@225765b0 
```

怎么`mkToolBox`不是`m`import前的成员`ToolBox`，而是之后的成员？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T22:01:10.563

`ToolBox`是一个隐式类，皮条客`mkToolBox`到`Mirror`. 同样的故事`Eval`，皮条客`eval`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T15:20:26.910

如果我用 来检查它`reify`，我会看到：

```
scala> reify{ m.mkToolBox() }.tree
res4: reflect.runtime.universe.Tree = 
{
  val qual$1 = scala.tools.reflect.`package`.ToolBox(scala.reflect.runtime.`package`.m);
  val x$1 = qual$1.mkToolBox$default$1;
  val x$2 = qual$1.mkToolBox$default$2;
  qual$1.mkToolBox(x$1, x$2)
} 
```

`ToolBox`这意味着对包对象内命名的函数有一个方法调用`scala.tools.reflect`。它不是一个对象，因为`reify`会暴露`apply`方法。

因此，即使[编译器的 API 文档](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/compiler/index.html#scala.tools.reflect.package)只显示左侧的特征，但如果您查看包，您会看到隐式方法定义。

PS：是的，这是一个真正的问题。直到我想到将事物具体化以获取树时，我才想到使用具有相同名称的特征的大写开头方法。

# c++ - 非类型模板参数

> ID：11283208
> 
> 赞同：2
> 
> 时间：2012-07-01T15:20:45.763
> 
> 标签：c++, templates

我正在阅读一篇关于非类型模板参数的文章，它说：

实例化时，只能传递编译时常量整数。这意味着`100`,`100+99`等`1<<3`是允许的，因为它们是编译的时间常数表达式。`abs(-120)`不允许使用涉及函数调用的参数，例如。

例子 ：

```
template<class T, int SIZE>
class Array{};

int main(){
Array<int, 100+99> my_array; // allowed
Array<int, abs(-120)> my_array; // not allowed
} 
```

100+99 和 abs(-120) 有什么区别？
为什么 100+99 是编译时间而 abs(-120) 不是？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T15:25:16.957

无，`abs(-120)`在 C++11 中完全合法。正如您充分指出的那样，C++03 没有可以在编译时评估的函数的范围，但 C++11 有。直接来说`abs`，您可以将其替换为执行相同计算并`abs_template<-120>::value`在 C++03 中使用的模板。

编辑：我的意思是说，即使is `abs`not `constexpr`，您也可以简单地编写自己的`abs`is `constexpr`。可以发誓我在里面编辑过。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T15:25:08.843

`100+99``199`在编译时进行了优化。

`abs()`是函数，它可能会或可能不会被标记`constexpr`（C++11 功能，这将允许您这样做；您可以轻松检查 cppreference 或标准以查看它是否`constexpr`在 C++11 中）。需要执行；编译器无法推断它是无状态函数，每次使用相同参数运行时返回相同值。

# c# - Windows 窗体：如何将位图直接绑定到 PictureBox？

> ID：11283212
> 
> 赞同：2
> 
> 时间：2012-07-01T15:21:19.500
> 
> 标签：c#, .net, data-binding, picturebox

我只是想使用 Windows 窗体构建一个小型 C# .Net 4.0 应用程序（WPF 我根本不知道，Windows 窗体至少有一点:-)）。

是否可以直接将`System.Drawing.Bitmap`对象绑定到 a 的`Image`属性`PictureBox`？我尝试使用`PictureBox.DataBindings.Add(...)`，但这似乎不起作用。

我怎样才能做到这一点？

谢谢和最好的问候，
奥利弗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-05T04:43:13.443

您可以使用 PictureBox.DataBindings.Add(...)
技巧是在您要绑定的对象上创建一个单独的属性来处理空图片和空图片之间的转换。

我是这样做的。

在我使用的表单加载中

```
this.PictureBox.DataBindings.Add(new Binding("Visible", this.bindingSource1, "HasPhoto", false, DataSourceUpdateMode.OnPropertyChanged));

this.PictureBox.DataBindings.Add(new Binding("Image", this.bindingSource1, "MyPhoto",false, DataSourceUpdateMode.OnPropertyChanged)); 
```

在我的对象中，我有以下内容

```
[NotMapped]
public System.Drawing.Image MyPhoto
{
    get
    {            
        if (Photo == null)
        {
           return BlankImage;        
        }
        else
        {
           if (Photo.Length == 0)
           {
              return BlankImage;     
           }
           else
           {
              return byteArrayToImage(Photo);
           }
        }
    }
    set
    {
       if (value == null)
       {
          Photo = null;
       }
       else
       {
           if (value.Height == BlankImage.Height)  // cheating
           {
               Photo = null;
           }
           else
           {
               Photo = imageToByteArray(value);
           }
        }
    }
}

[NotMapped]
public Image BlankImage {
    get
    {
        return new Bitmap(1,1);
    }
}

public static byte[] imageToByteArray(Image imageIn)
{
    MemoryStream ms = new MemoryStream();
    imageIn.Save(ms, ImageFormat.Gif);
    return ms.ToArray();     
}

public static Image byteArrayToImage(byte[] byteArrayIn)
{
    MemoryStream ms = new MemoryStream(byteArrayIn);
    Image returnImage = Image.FromStream(ms);
    return returnImage;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T15:33:16.457

这对我有用：

```
Bitmap bitmapFromFile = new Bitmap("C:\\temp\\test.bmp");

pictureBox1.Image = bitmapFromFile; 
```

或者，在一行中：

```
pictureBox1.Image = new Bitmap("C:\\temp\\test.bmp"); 
```

您可能过于复杂了 - 根据[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.picturebox.image.aspx)，您可以简单地将位图直接分配给 PictureBox.Image 属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T15:34:02.157

你可以做：

```
System.Drawing.Bitmap bmp = new System.Drawing.Bitmap("yourfile.bmp");
picturebox1.Image = bmp; 
```

# ruby-on-rails - Rails：控制器助手

> ID：11283214
> 
> 赞同：3
> 
> 时间：2012-07-01T15:21:35.753
> 
> 标签：ruby-on-rails, module, controller, dry

如果我有一个方法要在多个控制器中使用，以保持我的代码干燥。这样做的rails方式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T15:24:27.173

如果你想让你的代码可重用，我认为这`application_controller`是最好的地方。创建您认为可以在多个控制器中重用的任何方法，`application_controller`并在您想要的任何控制器中调用它们。

# iphone - 如何在 UINavigationController 的 RootViewController 上显示返回按钮？

> ID：11283218
> 
> 赞同：18
> 
> 时间：2012-07-01T15:21:49.540
> 
> 标签：iphone, ios, xcode, uinavigationcontroller, uibarbuttonitem

这是我的代码。我想在打开的 rootviewController 上放一个后退按钮。

```
- (void)selectSurah:(id)sender {

    SurahTableViewController * surahTableViewController = [[SurahTableViewController alloc] initWithNibName:@"SurahTableViewController" bundle:nil];
    surahTableViewController.navigationItem.title=@"Surah";

    surahTableViewController.navigationItem.backBarButtonItem.title=@"Back";

    UINavigationController *aNavigationController = [[UINavigationController alloc] initWithRootViewController:surahTableViewController];

    [self presentModalViewController:aNavigationController animated:YES];   
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-01T15:50:37.547

我不相信有可能将根视图控制器从导航堆栈中弹出，但您可以通过`UIButton`添加 a 作为自定义视图来伪造它`UIBarButtonItem`：

```
UIButton *b = [[UIButton alloc]initWithButtonType:UIButtonTypeCustom];
[b setImage:[UIImage imageNamed:@"BackImage.png"] forState:UIControlStateNormal];
[b addTarget:self action:@selector(back:) forControlEvents:UIControlEventTouchUpInside];
self.leftBarButtonItem = [[UIBarButtonItem alloc]initWithCustomView:b]; 
```

可以在[此处](http://www.teehanlax.com/downloads/iOS_5_GUI_iPhone4S.psd.zip)找到合适的 iOS UI 元素 PSD 。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-01T15:54:04.407

法赞，

**Helium3**评论是有道理的。

我想您的按钮需要关闭以模态方式呈现的控制器，是真的吗？如果我错了，请纠正。

如果是这样，您可以创建一个新的`UIBarButtonItem`并设置为`UINavigationController` `navigationItem`. 为了不破坏封装，请在控制器的`viewDidLoad`方法中创建它。`SurahTableViewController`

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // make attention to memory leak if you don't use ARC!!!
    self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Close"
           style:UIBarButtonItemStyleBordered
             target:self
             action:@selector(close:)];
}

-(void)close:(id)sender
{
    // to dismiss use dismissViewControllerAnimated:(BOOL)flag completion:(void (^)(void))completion
    // dismissModalViewControllerAnimated: is deprecated

    [self dismissViewControllerAnimated:YES completion:^{ NSLog(@"controller dismissed"); }];
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-01T15:51:26.920

由于`SurahTableViewController`是导航控制器中的根视图控制器，因此您无法返回根目录，因为您已经在那里。由于您已从其他方式以模态方式呈现它，因此您需要在导航栏上放置一个按钮，该按钮具有`IBAction`调用功能：

```
[self dismissModalViewControllerAnimated:YES]; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-01T15:49:54.037

UINavigationController 中后退按钮的外观和行为依赖于 UINavigationController 堆栈之间的交互。在第一个控制器上放置一个后退按钮打破了这个约定，没有什么可以返回的，这就是你的代码不起作用的原因。

您需要手动将 UIBarButtonItem 添加到标题栏代码，例如：

```
self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStylePlain target:self action:@selector(back:)]; 
```

如果您真的希望它看起来像一个后退按钮，您需要手动创建 UIBarButtonItem 并使用镜像后退按钮的图像。

不过，另一个建议是，因为您似乎正在尝试使用后退按钮来关闭模态视图控制器，所以我会坚持使用更传统的东西，例如“关闭”或“完成”按钮来关闭模态视图控制器。后退按钮确实更适合在 UINavigationController 堆栈中导航。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-14T15:01:25.677

这是我认为每个人都在寻找的答案。

只需在自定义初始化程序中提供一个空的**UIViewController**作为**UINavigationController子类的****rootViewController 。**然后在呈现之前推送您的实际**rootViewController**而不使用动画：

 ****```
init(backButtonRootViewController: UIViewController) {
    super.init(rootViewController: UIViewController())

    interactivePopGestureRecognizer?.isEnabled = false
    pushViewController(backButtonRootViewController, animated: false)
} 
```

您还需要禁用**interactivePopGestureRecognizer**以防止用户滑回空的**rootViewController**。

然后扩展您的子类以实现**UINavigationBarDelegate的****shouldPop**方法，并在**rootViewController**上按下后退按钮时关闭导航控制器：

 ****```
func navigationBar(_ navigationBar: UINavigationBar, shouldPop item: UINavigationItem) -> Bool {

    if children.count >= 2 && children[1] == topViewController {
        presentingViewController?.dismiss(animated: true, completion: nil)
        return false
    } else {
        return true
    }
} 
```

奇迹般有效！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-11T20:07:58.130

对于 Swift，请尝试以下操作：

```
override func viewDidLoad() {
    super.viewDidLoad();
    self.navigationItem.hidesBackButton = true;
    let backButton = UIBarButtonItem(
        image: UIImage(named: "my_back_asset"), style: .plain,
        target: self, action: #selector(self.onBack));
    self.navigationItem.leftBarButtonItem = backButton;
}

@objc private func onBack() {
    let controller = self.navigationController?.popViewController(animated: true);
    if controller == nil {
        // Handle pressing back when on root here.
    }
} 
```

> **注意**将“ `my_back_asset`”更改为您自己的后退按钮图像。********

# python - python中的内存错误

> ID：11283220
> 
> 赞同：48
> 
> 时间：2012-07-01T15:22:21.257
> 
> 标签：python, memory

```
Traceback (most recent call last):
File "/run-1341144766-1067082874/solution.py", line 27, in 
main()
File "/run-1341144766-1067082874/solution.py", line 11, in main
if len(s[i:j+1]) > 0:
MemoryError
Error in sys.excepthook:
Traceback (most recent call last):
File "/usr/lib/python2.7/dist-packages/apport_python_hook.py", line 64, in apport_excepthook
from apport.fileutils import likely_packaged, get_recent_crashes
File "/usr/lib/python2.7/dist-packages/apport/__init__.py", line 1, in 
from apport.report import Report
MemoryError

Original exception was:
Traceback (most recent call last):
File "/run-1341144766-1067082874/solution.py", line 27, in 
main()
File "/run-1341144766-1067082874/solution.py", line 11, in main
if len(s[i:j+1]) > 0:
MemoryError 
```

当我尝试运行以下程序时出现上述错误。有人可以解释什么是内存错误，以及如何克服这个问题？. **该程序将字符串作为输入并查找所有可能的子字符串并从中创建一个集合（按字典顺序），它应该在用户询问的相应索引处打印该值，否则它应该打印“无效”**

```
def main():
    no_str = int(raw_input())
    sub_strings= []
    for k in xrange(0,no_str):
        s = raw_input()
        a=len(s)
        for i in xrange(0, a):
            for j in xrange(0, a):
                if j >= i:
                    if len(s[i:j+1]) > 0:
                        sub_strings.append(s[i:j+1])
    sub_strings = list(set(sub_strings))
    sub_strings.sort()
    queries= int(raw_input())
    resul = []
    for i in xrange(0,queries):
        resul.append(int(raw_input()))
    for p in resul:
        try:
            print sub_strings[p-1]
        except IndexError:
            print 'INVALID'

if __name__ == "__main__":
   main() 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2016-06-09T12:30:36.947

如果您遇到意外`MemoryError`并且您认为应该有足够的 RAM 可用，这可能是因为您使用的是 32 位 python 安装。

如果您有 64 位操作系统，简单的解决方案是切换到 64 位安装的 python。

问题是 32 位 python 只能访问 ~4GB 的 RAM。如果您的操作系统是 32 位，由于操作系统开销，这可能会进一步缩小。

您可以在此处了解有关 32 位操作系统限制为 ~4GB RAM 的更多信息：[https ://superuser.com/questions/372881/is-there-a-technical-reason-why-32-bit-windows- is-limited-to-4gb-of-ram](https://superuser.com/questions/372881/is-there-a-technical-reason-why-32-bit-windows-is-limited-to-4gb-of-ram)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-07-01T18:34:27.093

这个在这里：

```
s = raw_input()
a=len(s)
for i in xrange(0, a):
    for j in xrange(0, a):
        if j >= i:
            if len(s[i:j+1]) > 0:
                sub_strings.append(s[i:j+1]) 
```

对于大字符串来说似乎效率很低而且成本很高。

最好做

```
for i in xrange(0, a):
    for j in xrange(i, a): # ensures that j >= i, no test required
        part = buffer(s, i, j+1-i) # don't duplicate data
        if len(part) > 0:
            sub_Strings.append(part) 
```

缓冲区对象保留对原始字符串以及开始和长度属性的引用。这样，就不会发生不必要的数据重复。

一个长度的字符串具有平均长度`l`的`l*l/2`子字符串`l/2`，因此内存消耗大致为`l*l*l/4`。使用缓冲区，它要小得多。

请注意，`buffer()`仅存在于 2.x 中。3.x 有`memoryview()`，使用方式略有不同。

更好的是计算索引并按需删除子字符串。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-07-01T15:59:41.807

[内存错误](http://docs.python.org/library/exceptions.html#exceptions.MemoryError)意味着您的程序内存不足。这意味着您的程序以某种方式创建了太多对象。

在您的示例中，您必须查找可能会消耗大量内存的算法部分。我怀疑您的程序被赋予了很长的字符串作为输入。因此，`s[i:j+1]`可能是罪魁祸首，因为它创建了一个新列表。不过，第一次使用它时，没有必要，因为您不使用创建的列表。您可以尝试看看以下是否有帮助：

```
if  j + 1 < a:
    sub_strings.append(s[i:j+1]) 
```

要替换第二个列表创建，您绝对应该使用[glglgl建议的](https://stackoverflow.com/a/11284642/191191)[缓冲区](http://docs.python.org/library/functions.html#buffer)对象。

另请注意，由于您使用`if j >= i:`，您不需要从`xrange`0 开始。您可以拥有：

```
for i in xrange(0, a):
    for j in xrange(i, a):
        # No need for if j >= i 
```

一个更激进的选择是尝试重新设计你的算法，这样你就不会预先计算所有可能的子字符串。相反，您可以简单地计算被询问的子字符串。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-08-25T20:10:51.857

您的代码中存在错误或内存不足，您可以升级它或为了快速解决方案尝试增加您的虚拟内存。

1.  打开我的电脑
2.  右键单击并选择属性
3.  转到高级系统设置
4.  单击高级选项卡
5.  [点击性能下的设置](https://i.stack.imgur.com/ChcZa.png)
6.  [单击高级选项卡下的更改](https://i.stack.imgur.com/pwFES.png)
7.  增加内存大小，这将增加虚拟内存大小。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-08-15T21:51:16.723

您可以尝试创建弹出该错误的相同脚本，通过从外部脚本导入将脚本分成几个脚本。例如，hello.py 预计会出现错误内存错误，所以我将 hello.py 分成几个脚本 h.py e.py ll.py o.py 所有这些都必须进入文件夹“hello hello”进入该文件夹 create **init**。 py 进入 init 写 import h,e,ll,o 然后在 ide 你写 import hello hello

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-06-24T14:46:45.880

使用此输入检查程序：abc/如果您有类似*ab ac bc abc*程序运行良好并且您需要更强大的 RAM，否则程序错误。

* * *

## 回答 #7

> 赞同：-5
> 
> 时间：2015-06-25T05:06:12.920

使用 python 64 位解决了很多问题。

# perl - Perl 从一个数组映射到另一个数组（更新简化了它）

> ID：11283221
> 
> 赞同：1
> 
> 时间：2012-07-01T15:22:51.310
> 
> 标签：perl, map

感谢您的阅读。

目标：

1.  我想将电子邮件地址 aa@gmail.com、bb@yahoo.com 从一个阵列转移到另一个阵列。

2.  每次我都想用200个这个列表。

3.  这些电子邮件必须来自不同的域名。但是列表已经按域名排序，（它是用 MAP 完成的）

4.  所以更简单地说：它是关于通知循环遍历数组的指针，它必须在哪里获取电子邮件，并且每次它找到不同的域名时，最多会收到 200 封电子邮件。

所以，我想出了（为此道歉）损坏的伪代码，因为这是我今天第一次阅读关于 MAP 的内容，结果发现这个块有点复杂。

如何：

```
 @destination_list =

map {$_->[0]}  # map back

for(my $i = 1; $i<201; ++$i) # this is to do the round of 200 emails per day
if($_ != $1 ) # compares 2 domains 

{

shift(@oldlist); # extract one from the old list and send it to the new list

}

map { m/@([a-zA-Z0-9\-.]*)\b/; [$_, $1]} # this gets what the domain name is
  @oldlist 
```

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T18:13:38.903

通过始终首先从具有最多电子邮件地址的域中进行选择来最大限度地减少组的数量。

```
my %addrs_by_domain;
for my $addr (@addrs) {
   my $domain = ... extract domain of $addr ...;
   push @{ $addrs_by_domain{$domain} }, $addr;
}

while (%addrs_by_domain) {
   my @domains_by_freq =
      sort { @{ $addrs_by_domain{$b} } <=> @{ $addrs_by_domain{$a} }
       keys(%addrs_by_domain);

   splice @domains_by_freq, 200;

   my @group;
   for my $domain (@domains_by_freq) {
      push @group, shift( @{ $addrs_by_domain{$domain} } );
      delete( $addrs_by_domain{$domain} )
         if !@{ $addrs_by_domain{$domain} };
   }

   do_it(@group);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T11:01:18.500

这是我们在聊天中提出的。它每次都处理整个列表并产生一个充满列表的数组引用，每天一个。可以提供想要的那一天，以及“在第 x 天之后不再使用此域”黑名单。

```
use strict;
use warnings;
use feature 'say';
use Data::Dumper;

my $only_index = 3; # Read from command line with $ARGV[0] or use Getopt::Long

my %blacklist = (       # Each key in this hash represents one index/day
  '2' => [ 'a', 'b' ],  # and has an arrayref of domains that have replied on
  '3' => [ 'c' ],       # that day. We look at all keys smaller than the current
);                      # index in each iteration and ignore all these domains 

my @domains; # holds the domains we have already seen for each list
my @lists = ([]); # Holds all the lists
my %moved; # the addresses we moved to the back
my $i = 0;
my @addresses = <DATA>;

while (@addresses) {
  my $address = shift @addresses;
  chomp $address;
  $address =~ m/@([a-zA-Z0-9\-.]*)\b/;
  my $domain = $1;

  # If the domain has answered, do not do it again (finally, your map ;-))
  next if 
    grep { /$domain/ } 
    map { exists $blacklist{$_} ? @{ $blacklist{$_} } : () }  (0..$i);
  next if exists $moved{$address}; # THIS line was  missing
  $i++ if (@{ $lists[$i] } == 2 
           || (exists $moved{$address} && @addresses < 1));
  if (exists $domains[$i]->{$domain}) {
    push @addresses, $address;
    $moved{$address}++;
#     say "pushing $address to moved"; # debug
  } else {
    $domains[$i]->{$domain}++;
    # send the email
#     say "added $address to $i";      # debug
    push @{ $lists[$i] }, $address;
  }
}
# print Dumper \@lists;           # Show all lists
print Dumper $lists[$only_index]; # Only show the selected list
1;

__DATA__
1@a
2@a
3@a
1@b
2@b
1@c
2@c
3@c
1@d
2@d
3@d
4@d
1@e
1@f
1@g
1@h
4@a
5@a
4@c 
```

# winapi - 递归移动文件/复制文件

> ID：11283233
> 
> 赞同：1
> 
> 时间：2012-07-01T15:24:39.150
> 
> 标签：winapi, recursion, console-application, file-copying, movefileex

我正在开发一个控制台程序，需要使用`MoveFile`/`CopyFile`来允许移动和复制文件和目录（可能跨卷）。当然，问题在于将目录复制或移动到另一个卷不适用于上述功能，因为它们不是递归的。

`SHFileOperation`不会这样做，因为这是一个控制台应用程序，我正在使用允许进度显示 ( `MoveFileWithProgress`/ `CopyFileEx`) 的变体，并`SHFileOperation`使用 GUI 而不是控制台来显示进度。

我考虑过使用`FindNextFile`，但即便如此，我也找不到任何可以递归`(Move|Copy)File`使用`FindNextFile`或以其他方式使用的代码示例——这有点令人费解，因为这个问题之前*肯定*已经出现过。

有没有一种简单的方法可以做到这一点，还是我必须求助于重新发明轮子？

# r - 在R中过滤没有循环的数据

> ID：11283234
> 
> 赞同：1
> 
> 时间：2012-07-01T15:24:52.993
> 
> 标签：r, loops, filtering, dataframe

我有相当大的数据框（几百万条记录）。
由于以下规则，我需要对其进行过滤：
- 对于每个产品，删除第一条记录之后的第五条记录之前的所有记录，其中 x>0。

所以，我们只对两列感兴趣——ID 和 x。数据框按 ID 排序。
使用循环很容易做到这一点，但循环在如此大的数据帧上表现不佳。

如何在“矢量风格”中做到这一点？

**示例：**
过滤前

```
ID  x  
1 0  
1 0  
1 5  # First record with x>0  
1 0  
1 3  
1 4  
1 0   
1 9   
1 0  # Delete all earlier records of that product  
1 0  
1 6  
2 0  
2 1  # First record with x>0   
2 0  
2 4  
2 5  
2 8  
2 0  # Delete all earlier records of that product  
2 1  
2 3 
```

过滤后：

```
ID  x  
1 9   
1 0  
1 0  
1 6   
2 0  
2 1  
2 3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T15:55:05.640

对于这些拆分、应用、组合问题 - 我喜欢使用[plyr](http://plyr.had.co.nz/)。如果速度成为问题，还有其他选择，但对于大多数事情 - plyr 易于理解和使用。我编写了一个函数来实现您上面描述的逻辑，然后将其提供`ddply()`给基于 ID 对每个数据块进行操作。

```
fun <- function(x, column, threshold, numplus){
  whichcol <- which(x[column] > threshold)[1]
  rows <- seq(from = (whichcol + numplus), to = nrow(x))
  return(x[rows,])
} 
```

然后把这个喂给`ddply()`

```
require(plyr)
ddply(dat, "ID", fun, column = "x", threshold = 0, numplus = 5)
#-----
  ID x
1  1 9
2  1 0
3  1 0
4  1 6
5  2 0
6  2 1
7  2 3 
```

# database - 使手机与数据库保持同步

> ID：11283242
> 
> 赞同：2
> 
> 时间：2012-07-01T15:26:09.693
> 
> 标签：database, database-design, relational-database

在我正在开发的系统上，我们有一个 PostgreSQL 数据库，其中包含设置数据，当这些手机“对接”时，更新时必须将其传输到手机。当手机插接时，我们的“服务软件”可以与它们通话，但在它们未插接时不能（它们不是无线的）。

目前，与手机通话的服务软件在启动时从数据库中加载设置数据并缓存。此后，它每 5 秒查询一次设置数据的最新时间戳，如果查询的时间戳高于最新缓存的时间戳，则重新加载部分设置。

但是，我发现这种方法很随意。例如，如果更新事务花费的时间超过一秒，或者至少如果提交事务和事务完成之间的时间超过 1 秒的边界（now() 函数是在事务开始时由 PostgreSQL 解决）。我能想到的唯一方法是在查询最新时间戳之前执行表级锁定。我不是桌锁的粉丝，但这是我能想到的解决问题的唯一方法。

这种方法的另一个问题是，我必须根据更新时间戳 >= 最后一个最新时间戳来查询新数据，而不仅仅是 > 最后一个最新时间戳。为什么？因为一条记录可能会在同一秒内提交，就在我查询之后——所以我会错过这条记录。

我想到的另一种方法是，将“最后同步的日期时间”数据存储在数据库中，用于必须存储在手机上的每个逻辑数据项。我会在每部手机的基础上做到这一点。然后，我可以定期查询当前未在特定手机上同步的所有数据，然后在手机更新后将其标记为已同步（我已经制定了一种机制，使其具有故障安全性，考虑到在同步）。

我对这种方法的唯一问题是它意味着数据库正在存储非以业务为中心的数据——因为它正在存储数据以使系统正常工作。我不相信关于哪些手机同步的数据是“商业”数据。对我来说，手机服务软件/手机软件有更多的责任知道如何让自己保持最新，尽管它很诱人，因为它完美地描述了每部手机上的数据是什么，什么不是，并且允许查询只返回数据需要。

然而，第一种方法至少只使用适合业务的数据——即数据最后一次更改的时间戳。

理想的方法是使用某种通知系统，但不幸的是，postgres 只有一个基本的 NOTIFY / EVENT 系统，而且它似乎不适用于 ODBC（我愚蠢地决定使用它，现在没有时间改变）。如果我使用 Oracle，我可以使用 Streams..

想法？

注意：数据库是纯关系型的——我对解决这个问题的任何“面向对象”方法或任何基于框架的解决方案都不感兴趣。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T21:50:55.480

首先，如果您使用的 PostgreSQL 版本至少为 7.2，则该`now`函数以微秒精度而不是秒精度返回值；尽管该值最终是从操作系统中得出的，并且精度最高只有百分之几秒。

您描述的方法似乎可以安全地防止永久丢失任何更新。只需确保*每次都*重新加载数据，除非时间戳证明您在上次更新后重新加载了足够长的时间。或者，您可以在单独的事务中更新数据时更新时间戳；在这种情况下，看到这样的时间戳证明所有更新都在时间戳值之前完成。

> 我想到的另一种方法是，将“最后同步的日期时间”数据存储在数据库中，用于必须存储在手机上的每个逻辑数据项。我会在每部手机的基础上做到这一点。然后，我可以定期查询特定手机上当前未同步的所有数据，然后在手机更新后将其标记为已同步

我不能推荐这个，原因如下：

*   由于同步是手机的一种状态而不是数据的状态，因此最好将此信息存储在手机上。
*   该数据库应该可以扩展到许多手机，理想情况下它不应该跟踪它们。
*   如果手机可以更改其身份，或者在不更改身份的情况下被擦除或恢复（重新成像）到以前的状态，则数据库将与耳机的真实状态不同步，并且没有任何机制可以确保正确同步。

虽然`NOTIFY`肯定比持续轮询更可取，但这是一个与存储同步进度的位置正交的问题。您仍然需要具有轮询功能才能处理新连接的设备，并且通知只是带宽/延迟优化。

# iphone - 如何使用 AVFundation 将视频捕获的最后几分钟保存在文件中 - iPhone

> ID：11283243
> 
> 赞同：3
> 
> 时间：2012-07-01T15:26:27.557
> 
> 标签：iphone, video-streaming, avfoundation

我正在寻找一种使用 AVFundation 将 RT 捕获的最后几分钟保存到 iPhone 中的文件的方法。

# javascript - 没有输入的Javascript剩余字符

> ID：11283244
> 
> 赞同：1
> 
> 时间：2012-07-01T15:26:31.457
> 
> 标签：javascript, html, counter

是否有可能有一个纯 Javascript 文本剩余计数器输出 a `<span>`or`<p>`标签而不是`input`字段中的值？我只能找到 Jquery 解决方案或在`input`字段中输出的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T15:35:46.707

在网上看到很多人想要一个纯 Javascript 的剩余字符计数器，并且不预览输入框中的数字。昨晚我在搞乱 JSFiddle 并做了一些工作，并且能够让剩余的字符显示在其他标签中，例如`<span>`. 所以我只想和大家分享这个，希望它可以派上用场。

**HTML：**

```
<textarea id="message" cols="20" rows="5" name="message" onKeyDown="textCounter('message','messagecount',100);" onKeyUp="textCounter('message','messagecount',100);"></textarea>
<span id="charsleft"></span> 
```

**Javascript：**

```
<script>
    function textCounter(textarea, countdown, maxlimit) {
        var textareaid = document.getElementById(textarea);
        if (textareaid.value.length > maxlimit)
          textareaid.value = textareaid.value.substring(0, maxlimit);
        else
          document.getElementById('charsleft').innerHTML = '('+(maxlimit-textareaid.value.length)+' characters available)';
      }
</script>

<script type="text/javascript">
    textCounter('message','messagecount',100);
</script> 
```

这里也是一个工作的[JSFiddle](http://jsfiddle.net/MLf85/1/)

注意：如果有人想为脚本做出贡献以使其变得更好，请随时这样做。我不是 Javascript 方面的专家，所以它很可能是一个对用户更友好的解决方案。

亲切的问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T15:46:47.047

如果您将 jQuery 放在页面上，类似以下的内容也应该可以工作（为什么不这样做:)）：

```
$('#text-input-area').keyup(function(){
  $('#target-div').text(max_length-$(this).val().length + " characters remaining");
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-10T14:32:30.647

Lodder 的答案是完美的——除了我无法在同一页面上重复使用它。我已经调整了代码以传递跨度的名称，因此它可以在同一页面上重复使用。

```
<script>
 function textCounter(textarea, countdown, maxlimit, nameofspan) {
   var textareaid = document.getElementById(textarea);
    if (textareaid.value.length > maxlimit)
      textareaid.value = textareaid.value.substring(0, maxlimit);
    else
      document.getElementById(nameofspan).innerHTML = '('+(maxlimit-textareaid.value.length)+' characters available)';
  }
</script>

<textarea id="message" cols="20" rows="5" name="message" onKeyDown="textCounter('message','messagecount',100,'messagespan');" onKeyUp="textCounter('message','messagecount',100,'messagespan');"></textarea>
<span id="messagespan"></span>

<script type="text/javascript">
    textCounter('message','messagecount',100,'messagespan');
</script> 
```

# python - 如何让 Cherry Py 将浏览器重定向到网站？

> ID：11283245
> 
> 赞同：2
> 
> 时间：2012-07-01T15:26:37.527
> 
> 标签：python, cherrypy

我试图制作一个 Cherry Py 页面，该页面将在一周中的某一天将客户重定向到某个站点。我试过这样做`webbrowser.open('sitename.com')`，但这只是在控制台中打开了网站。有没有办法让它重定向？注意：这是托管在我有异地而不是客户端的 Linux 机器上。感谢所有帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T15:53:26.733

自从我玩 CherryPy 以来已经有一段时间了，但我认为以下应该可以工作：

```
raise cherrypy.HTTPRedirect("www.newsite.com") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-01T18:20:18.823

@EricS 答案是完全正确的并且有效，但您需要注意它默认为 303 http 错误代码。如果您需要 301 或 302，您需要执行以下操作：

```
raise cherrypy.HTTPRedirect("www.newsite.com", status=301) 
```

# emacs - .emacs 文件中的函数在手动执行之前不会覆盖外部文件中的函数

> ID：11283250
> 
> 赞同：0
> 
> 时间：2012-07-01T15:27:25.497
> 
> 标签：emacs, elisp, require

我已经覆盖`erc-match-message`了函数 erc-mode 并将它放在我的 .emacs 文件中`erc`

```
error in process filter: Wrong number of arguments: (lambda (match-type
nickuserhost msg notification) (interactive) (if (and (eq match-type
(quote current-nick)) (not notification)) (progn (async-exec-command 
"mpg123 -q /home/kuba/Pobrane/beep-8.mp3") (notify "ERC" msg)))), 3 
```

我的钩子函数如下所示：

```
(defun mention-notify (match-type nickuserhost msg notification)
  (interactive)
  (if (and (eq match-type 'current-nick)
           (not notification))
      (progn
        (async-exec-command "mpg123 -q /home/kuba/Pobrane/beep-8.mp3")
        (notify "ERC" msg)))) 
```

（一个额外的`notification`参数）当我`erc-match-message`使用`eval-last-sexp`.

我有这个

```
(require 'erc)
(defun erc-match-message ()
   ;; my overwritten function that's defined in erc.el
   ...)
(defun mention-notify (match-type nickuserhost msg notification)
   ;; notify hook handler
   ...)
(defun irc ()
  "Connect to the freenode"
  (interactive)
  (erc :server "barjavel.freenode.net"
       :port 6667
       :nick "jcubic"
       :password "<PASS>"))

(global-set-key (kbd "C-c i")  'irc) 
```

**为什么 .emacs 文件中定义的函数不会覆盖使用 require 添加的外部文件中定义的函数？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T18:14:43.570

`erc-match-message`实际上是在 中定义的`erc-match.el`，之后可能会以某种方式加载。尝试`(require 'erc-match)`在重新定义之前添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T15:08:01.113

我建议您使用`defadvice`来更改函数的定义。即使在定义函数之前，它也会正确处理您遇到更改定义的情况。

# javascript - 如何构建我的 angularjs 应用程序

> ID：11283253
> 
> 赞同：0
> 
> 时间：2012-07-01T15:27:47.570
> 
> 标签：javascript, html, templates, angularjs

我不知道如何在模板中“包含”部分内容。例如，我有一个模板“索引”。当用户导航到“/”时，我喜欢从部分（登录框和其他一些文本 div）重新渲染“索引”上的一些 div，当用户导航到“/newAccount”时，我喜欢在“索引”上重新渲染相同的 div，但是与其他部分。

问题是，这是正确使用 AngularJS 的方式吗？类似于 Facelets 上的包含？

谢谢！;)

这是我想法的伪代码：

**模板：**

```
<html>
  <body>....{include:mainBox}....{include:foot}...</body>
</html> 
```

**/newAccount 的部分内容：**

{定义主框}

```
<div>New user</div>
<div>Username:<input/></div> 
```

{定义脚}

```
<div>...</div> 
```

**更新：**

像这样的一些是错误的？

```
function IndexCtrl($scope) {
    $scope.mainPage = 'partials/index/loginbox.html',
    $scope.footPage = 'partials/index/footer.html',
} 
```

在模板中我放了：

```
<div ng-include="mainPage"></div>
...
<div ng-include="footPage"></div> 
```

和路线：

```
when('/', {
       templateUrl: 'partials/index/layout.html',
       controller: IndexCtrl
   }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T17:19:09.110

为此使用[ng-include](http://docs.angularjs.org/api/ng.directive%3angInclude)。也许你想要的是[ng-view](http://docs.angularjs.org/api/ng.directive%3angView) + [$routeProvider](http://docs.angularjs.org/api/ng.%24routeProvider)

# ruby-on-rails - 堆栈级别到深 Rails 2.3.14

> ID：11283255
> 
> 赞同：0
> 
> 时间：2012-07-01T15:28:11.277
> 
> 标签：ruby-on-rails, redmine, redmine-plugins

我正在为管理框架开发一个插件，当我在开发模式下启动 webrick 服务器时，出现了一个奇怪的错误（堆栈级别太深）。它发生在动作（例如`show`动作）开始呈现模板时。不幸的是，我不知道为什么会这样。

```
SystemStackError in Stories#show

Showing vendor/plugins/stories/app/views/stories/show.rhtml where line #5 raised:

stack level too deep

Extracted source (around line #5):

    5: link_to_if_authorized 'aa', {:controller => "stories", :action => "index", :id => @story.id, :project_id => @story.project.id}, :title => l(:view_story), :class => 'icon icon-zoom-out'
    6: link_to_if_authorized 'bb', {:controller => "stories", :action => "edit", :id => @story.id, :project_id => @story.project.id}, :title => l(:button_edit), :class => 'icon icon-edit'
    7: link_to 'bb', {:id => @story.id, :project_id => @story.project.id}, :confirm => 'Really  delete?', :method => :delete, :class => 'icon icon-del' if User.current.allowed_to? (:delete_stories, @project)

    RAILS_ROOT: /home/haendwic/Documents/Aptana Studio 3 Workspace/1.4-stable-SVN
    Application Trace | Framework Trace | Full Trace

    /var/lib/gems/1.8/gems/activerecord-2.3.14/lib/active_record/attribute_methods.rb:248:in method_missing'
    /var/lib/gems/1.8/gems/activerecord-2.3.14/lib/active_record/attribute_methods.rb:249:in method_missing'
     /var/lib/gems/1.8/gems/activerecord-2.3.14/lib/active_record/associations /association_proxy.rb:215:in send'
     /var/lib/gems/1.8/gems/activerecord-2.3.14/lib/active_record/associations/association_proxy.rb:215:in method_missing'
     /home/haendwic/Documents/Aptana Studio 3 Workspace/1.4-stable-SVN/vendor/plugins/stories/app/views/stories/show.rhtml:5:in  _run_rhtml_vendor47plugins47stories47app47views47stories47show46rhtml'
     /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_view/renderable.rb:34:in send'
      /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_view/renderable.rb:34:in render'
      /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_view/base.rb:306:in with_template'
      /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_view/renderable.rb:30:in render'
      /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_view/template.rb:205:in render_template'
     /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_view/base.rb:265:in render'
     /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_view/base.rb:348:in _render_with_layout'
     /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_view/base.rb:262:in render'
     /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/base.rb:1252:in render_for_file'
     /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/base.rb:936:in render_without_benchmark'
    /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/benchmarking.rb:51:in render'
    /var/lib/gems/1.8/gems/activesupport-2.3.14/lib/active_support/core_ext/benchmark.rb:17:in ms'
    /usr/lib/ruby/1.8/benchmark.rb:308:in realtime'
    /var/lib/gems/1.8/gems/activesupport-2.3.14/lib/active_support/core_ext/benchmark.rb:17:in ms'
    /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/benchmarking.rb:51:in render'
/home/haendwic/Documents/Aptana Studio 3 Workspace/1.4-stable-SVN/vendor/plugins/stories/app/controllers/stories_controller.rb:104:in show'
     /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/mime_responds.rb:135:in call'
      /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/mime_responds.rb:135:in custom'
     /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/mime_responds.rb:179:in call'
     /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/mime_responds.rb:179:in respond'
     /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/mime_responds.rb:173:in each'
     /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/mime_responds.rb:173:in respond'
      /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/mime_responds.rb:107:in respond_to'
    /home/haendwic/Documents/Aptana Studio 3 Workspace/1.4-stable-SVN/vendor/plugins/stories/app/controllers/stories_controller.rb:102:in show'
     /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/base.rb:1333:in send'
     /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/base.rb:1333:in perform_action_without_filters'
/var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/filters.rb:617:in call_filters'
     /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/filters.rb:610:in perform_action_without_benchmark'
     /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/benchmarking.rb:68:in perform_action_without_rescue'
     /var/lib/gems/1.8/gems/activesupport-2.3.14/lib/active_support/core_ext/benchmark.rb:17:in ms'
     /usr/lib/ruby/1.8/benchmark.rb:308:in realtime'
     /var/lib/gems/1.8/gems/activesupport-2.3.14/lib/active_support/core_ext/benchmark.rb:17:in ms'
     /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/benchmarking.rb:68:in perform_action_without_rescue'
     /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/rescue.rb:160:in perform_action_without_flash'
     /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/flash.rb:151:in perform_action'
     /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/base.rb:532:in send'
     /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/base.rb:532:in process_without_filters'
     /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/filters.rb:606:in process'
     /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/base.rb:391:in process'
     /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/base.rb:386:in call'
     /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/routing/route_set.rb:438:in call'
     /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/dispatcher.rb:87:in dispatch'
    /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/dispatcher.rb:121:in _call'
    /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/dispatcher.rb:130:in build_middleware_stack'
    /var/lib/gems/1.8/gems/activerecord-2.3.14/lib/active_record/query_cache.rb:29:in call'
    /var/lib/gems/1.8/gems/activerecord-2.3.14/lib/active_record/query_cache.rb:29:in call'
    /var/lib/gems/1.8/gems/activerecord-2.3.14/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in cache'
     /var/lib/gems/1.8/gems/activerecord-2.3.14/lib/active_record/query_cache.rb:9:in cache'
     /var/lib/gems/1.8/gems/activerecord-2.3.14/lib/active_record/query_cache.rb:28:in call'
     /var/lib/gems/1.8/gems/activerecord-2.3.14/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in call'
    /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/string_coercion.rb:25:in call'
    /var/lib/gems/1.8/gems/rack-1.1.3/lib/rack/head.rb:9:in call'
    /var/lib/gems/1.8/gems/rack-1.1.3/lib/rack/methodoverride.rb:24:in call'
    /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/params_parser.rb:15:in call'
    /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/session /cookie_store.rb:99:in call'
    /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/failsafe.rb:26:in call'
    /var/lib/gems/1.8/gems/rack-1.1.3/lib/rack/lock.rb:11:in call'
    /var/lib/gems/1.8/gems/rack-1.1.3/lib/rack/lock.rb:11:in synchronize'
    /var/lib/gems/1.8/gems/rack-1.1.3/lib/rack/lock.rb:11:in call'
    /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/dispatcher.rb:114:in call'
    /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/reloader.rb:34:in run'
    /var/lib/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/dispatcher.rb:108:in call'
    /var/lib/gems/1.8/gems/rails-2.3.14/lib/rails/rack/static.rb:31:in call'
    /var/lib/gems/1.8/gems/rack-1.1.3/lib/rack/urlmap.rb:47:in call'
    /var/lib/gems/1.8/gems/rack-1.1.3/lib/rack/urlmap.rb:41:in each'
    /var/lib/gems/1.8/gems/rack-1.1.3/lib/rack/urlmap.rb:41:in call'
    /var/lib/gems/1.8/gems/rails-2.3.14/lib/rails/rack/log_tailer.rb:17:in call'
    /var/lib/gems/1.8/gems/rack-1.1.3/lib/rack/content_length.rb:13:in call'
    /var/lib/gems/1.8/gems/rack-1.1.3/lib/rack/handler/webrick.rb:48:in service'
    /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in service'
    /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in run'
    /usr/lib/ruby/1.8/webrick/server.rb:173:in start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in start'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:95:in start'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in each'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in start'
    /usr/lib/ruby/1.8/webrick/server.rb:23:in start'
    /usr/lib/ruby/1.8/webrick/server.rb:82:in start'
    /var/lib/gems/1.8/gems/rack-1.1.3/lib/rack/handler/webrick.rb:14:in run'
    /var/lib/gems/1.8/gems/rails-2.3.14/lib/commands/server.rb:111
    script/server:3:in require'
    script/server:3
Request

Parameters:

{"project_id"=>"1",
 "id"=>"2"}

Show session dump
Response

Headers:

{"Cache-Control"=>"no-cache",
 "Content-Type"=>"text/html"} 
```

这是控制器的动作

```
def show 
 @edit_allowed = User.current.allowed_to?(:edit_stories, @project)
 respond_to do |format|
  format.html {
    render :template => 'stories/show'
  }
  format.api
  format.pdf  { send_data(story_to_pdf(@story), :type => 'application/pdf', :filename => "#{@project.identifier}-#{@story.id}.pdf") }
 end                                
end 
```

最后是视图的一部分

```
 link_to_if_authorized 'aa', {:controller => "stories", :action => "index", :id => @story.id, :project_id => @story.project.id}, :title => l(:view_story), :class => 'icon icon-zoom-out'
     link_to_if_authorized 'bb', {:controller => "stories", :action => "edit", :id => @story.id, :project_id => @story.project.id}, :title => l(:button_edit), :class => 'icon icon-edit' 
    link_to 'bb', {:id => @story.id, :project_id => @story.project.id}, :confirm => 'Really delete?', :method => :delete, :class => 'icon icon-del' if User.current.allowed_to?(:delete_stories, @project) 
```

也许重要的是要说，在生产模式下，插件是稳定的并且可以正确地路由动作（包括显示）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:46:57.637

这通常是由于您（或其他人）`Project`从插件中修补核心模型（可能是模型）而没有考虑到 rails reloader。

如果你重写方法（例如使用`alias_method_chain`）并且你的补丁被加载了两次，你可以很容易地在调用旧方法时创建一个无限循环。

```
# This is our initial class
class MyClass
  def foo
    puts "original foo"
  end
end

module Patch
  def self.included(base)
    base.alias_method_chain :foo, :feature
  end

  def foo_with_feature
    foo_without_feature # call the "original" method
    puts "foo with feature"
  end
end

# patch the class
MyClass.send(:include, Patch)

# Now call the patched method
MyClass.new.foo
# prints:
#   original foo
#   foo with feature 
```

`foo`现在指的是方法`foo_with_feature`，而原始`foo`方法现在可以从`foo_without_feature`

好吧，直到现在一切看起来都很好。现在让我们看看会发生什么，如果我们再次加载我们的补丁

```
# patch again
MyClass.send(:include, Patch)

# And call the method again
MyClass.new.foo
# SystemStackError: stack level too deep
#   from (irb):7:in `foo_without_feature'
#   from (irb):7:in `foo'
#   from (irb):27 
```

您会看到由无限循环引起的 SystemStackError。这是因为第二次加载补丁后，`foo_without_feature`现在指的是`foo_with_feature`第一个补丁的方法。调用它时，它会一遍又一遍地调用`foo_without_feature`，直到堆栈满为止。

你说它只在第二个请求时崩溃。当类重新加载器出现异常时，这正是典型的行为。默认情况下，Rails 会在开发模式下的每个请求上重新加载所有类，但在生产模式下只会重新加载一次。

有时驯服 rails reloader 有点棘手。作为一些一般准则，您应该

1.  加载补丁时使用`require_dependency`而不是`require`
2.  加载你的补丁使用[`Dispatcher.to_prepare`](http://theadmin.org/articles/how-to-modify-core-redmine-classes-from-a-plugin/)
3.  总是声明修补的类`unloadable`

最关键的部分是使用`Dispatcher.to_prepare`. 它是一个回调，在生产模式和开发模式的每个请求之前调用一次，因此是加载补丁的理想场所。

不过附带说明：当使用 Redmine 2（或即将推出的 ChiliProject 4），即 Rails 3 时，类修补将与这种方法有很大不同——很可能更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T18:06:31.763

“堆栈级别太深”错误意味着您有堆栈溢出（它经常发生以至于有一个以它命名的站点）。当一个函数无限期地调用自身或两个函数无限期地相互调用时，就会发生这种情况。

您的错误发生在第 5 行，所以我会检查`link_to_if_authorized`. 里面的东西导致了无限循环。

# python - cx_freeze：标识符中的无效字符

> ID：11283256
> 
> 赞同：1
> 
> 时间：2012-07-01T15:28:16.640
> 
> 标签：python, character, cx-freeze

cx_freeze 注释错误：

```
module.code = compile(codeString, path, "exec
  File "update.py", line 1
    \ufeffimport os
            ^
SyntaxError: invalid character in identifier 
```

**cx_freeze 版本**：`cx_Freeze-4.2.3.win32-py3.1 , python version:python-3.1.3**`

无论使用comand还是step.py编译这段代码，它总是注意到错误：“ `invalid character in identifier`”。我已经删除了所有不是英文的字符。文件路径也是英文的。ps：我已经尝试编译一个“helloWorld.py”，它成功了。

请帮助我，我是一个新的学习python。

该代码用于将一些文件复制到我在配置文件中编写的路径。并且代码运行没有错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T16:54:18.033

`0xfeff`是 Unicode 字节顺序标记。另存`update.py`为不带字节顺序标记的 UTF-8。（UTF-8 开始时不应该有 BOM，但有些编辑器还是会添加一个。）

# c# - 如何在 ASP.NET Web 应用程序中打开弹出窗口？

> ID：11283257
> 
> 赞同：0
> 
> 时间：2012-07-01T15:28:29.560
> 
> 标签：c#, asp.net, web, popup

我在 ASP.NET Web 应用程序中使用 GridView，并且想要打开类似于“新表单”（如在 Windows 窗体应用程序中）的东西，它将包含选定的 GridView 行数据。我没有选择行和数据的问题，我只想知道如何打开一个新的弹出窗口或二级页面或类似的东西，以及如何将信息传递给新打开的弹出窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T15:34:02.913

几年前，我写了一个简单的教程：

[http://netpl.blogspot.com/2007/12/autocompleteextender-key-value-issue.html](http://netpl.blogspot.com/2007/12/autocompleteextender-key-value-issue.html)

[http://netpl.blogspot.com/2007/12/autocompleteextender-and-key-value.html](http://netpl.blogspot.com/2007/12/autocompleteextender-and-key-value.html)

# javascript - 如何在下拉菜单中获取所选项目

> ID：11283259
> 
> 赞同：1
> 
> 时间：2012-07-01T15:29:31.290
> 
> 标签：javascript, select, option

我需要从下拉菜单中选择一个项目，

我正在使用这个脚本：[LINK](http://www.marghoobsuleman.com/jquery-image-dropdown) 这是我的代码，我只需要在 javascript 中获取值：

```
function checkData() {
    var pagesObj = document.getElementById("website2"); 
    alert(pagesObj.options[pagesObj.selectedIndex].value);
}

$(document).ready(function() {
    $.ajax({
        url: "get_data.php",
        cache: false,
        dataType: 'json',
        data: {},
        success: function(data) {
            for (var i = 0; i < data.results.length; i++) {
                if(data.results[i].value != '0' ) {
                    oHandler = $("#websites2").msDropDown().data("dd");
                    oHandler.add({text:'', value:'', title:''});
                    oHandler.add({text:data.results[i].text,value:data.results[i].value,title:data.results[i].title});
                }
             }
         }
    });
}); 
```

此`checkData()`函数给我错误，选项未定义且为空

编辑：

html:

```
<select name="websites2" id="websites2" onChange="checkData()" style="width:200px;"tabindex="1"></select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T15:39:51.660

既然你有 jQuery

```
$('#websites2').val() 
```

应该这样做，尽管我最近发现在 Opera 上有点不可靠。在我测试过的所有浏览器上，以下内容对我来说都是可靠的：

```
$('#websites2 option:selected').val() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T15:34:45.937

I believe it is as simple as this (using jQuery):

```
var selectedIndex = $("#websites2").val(); 
```

# content-management-system - 从在线商店按时购买产品 - Drupal、Joomla、Wordpress？

> ID：11283260
> 
> 赞同：-1
> 
> 时间：2012-07-01T15:29:36.470
> 
> 标签：content-management-system, e-commerce

有谁知道允许客户按时购买产品的任何流行 CMS 的插件等？

例如：产品售价 500 美元。客户可以存入押金，然后在接下来的 4 个月内每月支付 100 美元。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T20:57:07.667

The only way I have found a viable solution to this is to have a recurring setup option set with the CC processing company. The user agrees they will be pay $X twice or four times and the processor bills the card X times. It needs to be handled by the processor in order to stay away from storing CC info in your db.

# java - 初始化前调用方法的正确Java异常类型

> ID：11283261
> 
> 赞同：0
> 
> 时间：2012-07-01T15:29:41.433
> 
> 标签：java, exception

我有一个类，它有一个显式的初始化方法和其他一些做实际工作的方法：

```
public class Worker {

    public void init(Context context) { /* ... */ };

    public void doWork() { /* ... */ };
} 
```

`Init`必须在完成任何实际工作之前调用该方法，这在类和方法描述中记录。

`DoWork`如果在调用之前没有执行初始化，我想从方法中抛出一个异常。这种情况下正确的异常类型是什么？`UnsupportedOperationException`，`IllegalStateException`还是别的什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T15:32:41.107

[`IllegalStateException`](http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html). 但理想情况下，尽量确保对象*始终*具有有效状态。:-) 在这种情况下，通过`Context`在构造函数中要求而不是单独的“init”函数：

```
public class Worker {

    // Note this is a constructor now, not a method
    public Worker(Context context) {
        /* ... */
    }

    public void doWork() {
        /* ... */
    }
} 
```

# java - java获取当前计算机的日期

> ID：11283264
> 
> 赞同：1
> 
> 时间：2012-07-01T15:30:15.730
> 
> 标签：java

我如何在java上获取计算机的日期，我只想要年，月，日我试图像这样获得日历

```
Calendar c =Calendar.getInstance();
        c.clear(Calendar.HOUR) 
```

却不知如何应对，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T15:32:30.877

谷歌上的第一个链接：

```
import java.util.Date;
import java.text.DateFormat;
import java.text.SimpleDateFormat;

private String getDateTime() {
        DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
        Date date = new Date();
        return dateFormat.format(date);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T15:48:02.507

试试这一行代码.....

**// 打印 01-07-2012**

```
 System.out.println(new SimpleDateFormat("dd-MM-YYYY").format(new Date())); 
```

**// 打印 2012 年 7 月 1 日**

```
System.out.println(new SimpleDateFormat("dd-MMM-YYYY").format(new Date())); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T15:35:53.417

`year/month/day`您可以像这样以字符串形式获取当前日期：

```
String strDate = new SimpleDateFormat("yyyy-MM-dd").format(new Date());
System.out.println(strDate);
> 2012-07-01 
```

请注意，一个[`Date`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html)对象将*始终*包含年、月、日、小时、分钟、秒、毫秒等，并且通过调用`new Date()`您可以获得具有当前时间的日期对象。

如果您只需要日期的某些字段（例如，年、月和日），则需要使用格式化程序来格式化日期，例如[SimpleDateFormat](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)。检查链接以了解有关 Java 中可用的字符串格式化选项的更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-01T15:37:54.383

```
 Calendar rightNow = Calendar.getInstance();
    int y = rightNow.get(Calendar.YEAR);
    int m = rightNow.get(Calendar.MONTH) + 1;
    int d = rightNow.get(Calendar.DAY_OF_MONTH);
    System.out.println("year "+y+"  month "+m+"  day "+d); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-19T08:44:38.017

# 乔达时间

[一些使用Joda-Time](http://www.joda.org/joda-time/) 2.4 库的示例代码。

java.util.Date 和 .Calendar 类是出了名的麻烦。避开他们。使用 Joda-Time 或 Java 8 中的新 java.time 包（受 JSR 310 定义的 Joda-Time 启发）。

## 时区

注意时区的使用。时区是确定日期所必需的。加尔各答和巴黎的同一时刻在日历上可能有不同的日期。如果省略时区，将应用 JVM 当前的默认时区。这意味着您的结果可能会有所不同，因此最好明确指定您想要的时区。

## 示例代码

```
String output = LocalDate.now( TimeZone.forID( "Asia/Kolkata" ) ).toString(); 
```

# sql - sql 中的错误...在选择列表中无效，因为它既不包含在聚合函数中，也不包含在 group by

> ID：11283268
> 
> 赞同：0
> 
> 时间：2012-07-01T15:30:53.013
> 
> 标签：sql

我的查询有问题！执行该指令时，会出现以下错误：

```
SELECT   counter, ArticleID, username
FROM     ArticleRev
GROUP BY username 
```

在选择列表中无效，因为它既不包含在聚合函数中，也不包含在 sql 中的 group by cluse 错误中

请帮助我...谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T15:33:33.600

查询毫无意义，错误告诉您原因。让我们详细说明一下。

您已经编写`GROUP BY username`了 ，这意味着从具有相同 的行的所有值中`counter`，该查询将只返回一个。但是*哪一个*？您没有指定从所有可能选项中选择值的方法，因此服务器会告诉您查询无效。`ArticleID``username`

 *您应该在这里更好地解释您的意图；虽然我们可以解释为什么查询无效，但如果没有更多信息，就不可能提出有效的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T01:50:21.033

由于您是按 对结果进行分组，因此必须`username`对`counter`和进行***聚合***。例如：`ArticleID`

 *```
SELECT   COUNT(counter), COUNT(ArticleID), username
FROM     ArticleRev
GROUP BY username 
```

**COUNT( )**是**[聚合函数](http://en.wikipedia.org/wiki/Aggregate_function)**的一个例子。
**[有关 GROUP BY 条款，请参见此处。](http://www.devguru.com/technologies/t-sql/7080.asp)****

# java - JVM 在 CentOS 6 中的 CPU 使用率总是超过 100%

> ID：11283271
> 
> 赞同：5
> 
> 时间：2012-07-01T15:31:14.087
> 
> 标签：java, jvm, centos, cpu-usage, centos6

下午好。我的 CentOS 6（64 位）服务器上的 Java VM 遇到了一个非常令人费解的问题。它是具有四核 CPU（具有超线程）、16GB RAM 和 2TB 硬盘空间（在软件 RAID1 上）的服务器。我想我会在这里问，因为根据常见问题解答，关于开发人员使用的“常用工具”的问题是适当的。希望有人可以对这个问题有所了解。

我每天 24 小时在服务器上运行一个 Java 软件。今天早些时候（在服务器区域设置的午夜后几个小时检测到，这是值得注意的，因为这是本月的第一天）我收到连接到该软件的用户报告，因为客户端突然变得无法使用。JVM 从未中断或重新启动。上一次重启是在几天前，从那以后一直正常运行（使用大约 5% 或更少的 CPU，这是正常的）。

这一次，当我检查该进程时，它实际上正在吞噬所有可以与服务器上运行的其他应用程序搏斗的 CPU 时间（如 top 所报告的那样），或者超过 100%（如 ps 所报告的那样）。我尝试停止并重新启动应用程序，但一旦它运行，CPU 使用率会立即再次飙升至 100% 以上。内存使用正常。我尝试了不同的 JVM 标志，但无济于事。我尝试下载最新版本的软件并进行全新安装，但这也无济于事。最后，我尝试下载*另一个*完全不同的 Java 软件，但是当我在服务器上运行它时，它遇到了同样的问题。

当我下载该软件并在我的计算机上运行它时，CPU 使用率是正常的。因此，我假设服务器出错了，但我无法想象它可能是什么。服务器的 JVM 是最新的，来自标准的存储库包（没有任何定制）。

从 java -版本：

```
java version "1.6.0_24"
OpenJDK Runtime Environment (IcedTea6 1.11.3) (rhel-1.48.1.11.3.el6_2-x86_64)
OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode) 
```

来自 uname -a：

```
2.6.32-131.21.1.el6.x86_64 #1 SMP Tue Nov 22 19:48:09 GMT 2011 x86_64 x86_64 x86_64 GNU/Linux 
```

来自 centos-release/redhat-release/system-release：

```
CentOS release 6.2 (Final) 
```

免费报告大约 14.5gb 可用 RAM。df 报告 /home 分区（有问题的软件及其所有文件所在的位置）中有大约 1.4tb 的可用磁盘空间。

有任何想法吗？请询问您是否需要更多数据，并随时建议我尝试/检查的程序。在查找问题时，我发现有几个人在 JVM 窃取 CentOS 上的所有 CPU 时遇到问题，但似乎没有一个与我的问题相符。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T04:28:04.757

您可能想尝试以下命令

```
# service ntpd stop; date -s "`date`";service ntpd start; 
```

我有内核 2.6.32-220.el6.x86_64 和 jdk1.7.0_04 的 CentOS6，通过上述命令观察并解决了高 CPU。无需重新启动操作系统。

这似乎是 linux 内核的错误，如[https://access.redhat.com/knowledge/solutions/154793](https://access.redhat.com/knowledge/solutions/154793)中所述。上述修复在[http://blog.wpkg.org/2012/07/01/java-leap-second-bug-30-june-1-july-2012-fix/](http://blog.wpkg.org/2012/07/01/java-leap-second-bug-30-june-1-july-2012-fix/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T23:22:53.937

我还可以确认 RHEL 6、Tomcat 7 和 Sun/Oracle Java 7 & Java 6 中存在的问题。

`ntpd stop; date; ntpd start`命令起作用了。

```
uname:
2.6.32-220.2.1.el6.x86_64 #1 SMP Fri Dec 23 02:21:33 CST 2011 x86_64 x86_64 x86_64 GNU/Linux 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T17:46:23.073

我可以确认 Fedora 14、Tomcat 6 和 OpenJDK 1.6 上存在这个问题。Mysticial 的解决方案也对我有用。

unname -ar:

```
2.6.35.14-103.fc14.x86_64 #1 SMP Thu Oct 27 15:41:25 UTC 2011 x86_64 x86_64 x86_64 GNU/Linux 
```

java-版本：

```
java version "1.6.0_20"
OpenJDK Runtime Environment (IcedTea6 1.9.10) (fedora-55.1.9.10.fc14-x86_64)
OpenJDK 64-Bit Server VM (build 19.0-b09, mixed mode) 
```

# sql - 查询 Joining 2 个表并根据输出创建一个新列

> ID：11283272
> 
> 赞同：1
> 
> 时间：2012-07-01T15:31:15.893
> 
> 标签：sql, oracle, join

有人可以帮我弄这个吗。我正在使用 SQL 开发人员。

说这是我的查询

```
select
ac.customer_name, 
acra.receipt_number,
acra.receipt_amount amount_value,
rcta.trx_number,
rcta.attribute5 as office_code
from
ar_customers ac,
ar_cash_receipts_all acra,
ra_customer_trx_all rcta
where
ac.customer_id=acra.customer_id and
acra.cash_receipt_id = rcta.cash_receipt_id and
acra.receipt_amount > 5000; 
```

在这个输出中，我想添加一个应该包含值 1 的列 stamp_value 。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T15:42:08.133

这是你需要的吗？

```
SELECT CASE WHEN amount_value > 5000 THEN 1
            ELSE NULL
       END stamp_value
  FROM t1 JOIN t2 ... 
```

# ruby-on-rails - Rails 报告对象

> ID：11283273
> 
> 赞同：0
> 
> 时间：2012-07-01T15:31:23.017
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3

我目前正在尝试在 rails 应用程序中实现报告模块。感谢这里提供的一些帮助：[Ruby on Rails 对象报告](https://stackoverflow.com/questions/11280983/ruby-on-rails-object-reporting)，我决定走上编写通用指标并用这些指标填充报告的道路。

我必须解决的是如何创建指标 - 基本上我需要有一个`metric`可以在我的定位框架中使用的对象（例如，如果我有一个0.5 的`target`对象`target.value`，我必须`target.metric_id`知道哪个指标是目标，并因此报告它）。

我的问题是如何在模型结构中存储度量的公式。一个简单的指标示例是利润，我可以这样做`sales.selling_prices.sum - sales.cost_prices.sum`。如何设置一些允许存储此公式的列？所有公式都将使用其他对象进行计算，如利润示例。

任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T18:44:17.867

根据您的公式的野心程度，您可以从以下指标开始：

```
operation_type:string, one of %w(add sub mult div)
left_operand:decimal
right_operand:decimal 
```

然后，要计算，您可能有一个度量方法，例如：

```
def result
  if operation_type == 'add'
    left_operand + right_operand
  elsif operation_type == 'sub'
    left_operand - right_operand
  ...
end 
```

当您创建指标（可能是某种管理面板）时，您可以有选择源输入的方法（例如，left_operand 设置为 sales. sell_prices.sum 等）。

# java - 匹配冒号两侧的文本

> ID：11283274
> 
> 赞同：1
> 
> 时间：2012-07-01T15:31:24.213
> 
> 标签：java, regex

我正在尝试学习正则表达式的基础知识（在 Java 中），并设想了一些示例场景来练习，并且 - 正如您可能已经预料到的那样 - 最后一个（因此对我来说最难）不起作用。这里是：

```
<[a-zA-Z]>:[a-zA-Z] 
```

我想要它做的是识别`<SOME TEXT>:SOME MORE TEXT`. 使用类似的输入：`<foo>:bar`，它不起作用。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T15:32:49.267

你只匹配一个字符。要匹配多个，您需要添加“+”：

```
<[a-zA-Z]+>:[a-zA-Z]+ 
```

如果文本是可选的，您还可以指定“*”，表示“零个或多个”。'+' 表示“1 个或多个”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T15:50:00.290

如果你还想从字面上捕捉“某些文本”，你也需要捕捉空白。

```
 String teststring = "<SOME TEXT>:SOME MORE TEXT";
    String regex = "<[\\sa-zA-Z]+>:[\\sa-zA-Z]+";
    Matcher m = Pattern.compile(regex).matcher(teststring);
    while (m.find())
    {
        System.out.println(teststring.substring(m.start(), m.end()));
    } 
```

# c++ - Qt LEFT CTRL 键码

> ID：11283276
> 
> 赞同：6
> 
> 时间：2012-07-01T15:32:01.057
> 
> 标签：c++, qt, events, keyboard-events, ctrl

在 Qt 中，`QKeyEvent`我可以通过检查 if is来检查是否`Ctrl`被按下。但是如何区分左右键呢？`ev->key()``Qt::Key_Control``Ctrl`

我也需要`Alt`和`Shift`钥匙一样的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T15:37:39.627

`Qt`据我所知，没有办法使用纯方法来做到这一点。

但是，根据您的平台，您可能能够使用[`QKeyEvent::nativeScanCode()`](http://doc.qt.nokia.com/4.7-snapshot/qkeyevent.html#nativeScanCode)方法而不是`QKeyEvent::key()`.

例如，在 Windows 上，您应该能够测试按下了哪个`Ctrl`键，如下所示：

```
if (event->nativeScanCode() == VK_LCONTROL) {
  // left control pressed
} else if (event->nativeScanCode() == VK_RCONTROL) {
  // right control pressed
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-21T18:25:28.700

左右键是虚拟键代码的一部分 -> 用于`nativeVirtualKey()`与 windows`VK_*`枚举而不是`nativescancode()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-06T08:47:38.330

根据[Qt 命名空间参考](http://qt-project.org/doc/qt-4.8/qt.html)， 和具有`enum Qt::Key`不同的值。`Qt::Key_Alt``Qt::Key_AltGr`

但是，`enum Qt::KeyboardModifier`不要`enum Qt::Modifier`将这对键视为不同的修饰符。

*（注意：我会将此作为评论发布，但我没有足够的代表。但）*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-15T15:43:59.710

如果`VK_RCONTROL`不起作用，请检查您的 nativeScanCode 值`ctrl`- `right`：

`std::cout<<keyEvent->nativeScanCode();`并使用这个值：

```
int control_right = 285;
if(key->nativeScanCode() == control_right){... 
```

# iphone - 我想添加一个按钮，当点击该按钮时，将向用户显示他/她 iPhone 中的联系人列表。请帮我找到一些有效的 API

> ID：11283280
> 
> 赞同：0
> 
> 时间：2012-07-01T15:32:40.130
> 
> 标签：iphone, objective-c, xcode4, addressbook, abaddressbook

我已经搜索了很多地方很多人使用了 ABAddressBookRef 类，但是我的 xcode 4 无法识别这个我已经导入并且我也添加了库/框架但仍然无法识别代码请帮助我找到一些工作函数/类/我调用的 API，他们在那里执行任务 谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T15:35:05.837

[AddressBook API](http://developer.apple.com/library/ios/#DOCUMENTATION/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Introduction.html)应该可以满足您的需求。使用指向按钮的 IBAction 或手势链接来呈现它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T15:36:14.377

您将不得不使用 AddressBook 框架，首先将引用添加到框架中，

然后在您的班级中导入 AddressBook.h

`#import "AddressBook/AddressBook.h"`

然后开始使用`ABAddressBookRef`

`ABAddressBookRef ref;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T15:38:27.020

我认为你在 ABPeoplePickerNavigationController 之后......

[http://developer.apple.com/library/ios/#DOCUMENTATION/AddressBookUI/Reference/ABPeoplePickerNavigationController_Class/Reference/Reference.html#//apple_ref/occ/cl/ABPeoplePickerNavigationController](http://developer.apple.com/library/ios/#DOCUMENTATION/AddressBookUI/Reference/ABPeoplePickerNavigationController_Class/Reference/Reference.html#//apple_ref/occ/cl/ABPeoplePickerNavigationController)

# model-view-controller - request.getParameter() 返回 null

> ID：11283282
> 
> 赞同：0
> 
> 时间：2012-07-01T15:32:43.297
> 
> 标签：model-view-controller, jsf

得到了一个给我带来问题的家庭作业......它修改了一个带有两个页面和一个 bean 的 JSF 项目，通过添加另外两个页面和一个控制器 servlet 和另一个 bean 来适应 MVC2 两个附加页面。新的主页转发到第二个新页面或旧的第一页。我的问题是 response.getParameter() 总是导致 null。

```
<%@page session="false" import="java.util.Iterator"%>
<%@taglib prefix="f" uri="http://java.sun.com/jsf/core"%>
<%@taglib prefix="h" uri="http://java.sun.com/jsf/html"%>
<jsp:useBean id="status" scope="request" class="JSFRegistration.Status" />
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">

    <html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <title>JSP Page</title>
    </head>
    <body>
        <% if (status!=null && !status.isSuccessful()){%>
            <font color="red">Processing errors:
                <ul><%Iterator errors=status.getExceptions();
            while (errors.hasNext()){
                Exception e = (Exception) errors.next();%>
                <li><%= e.getMessage()%><%}%></ul></font><%}%>
        <form action="LoginServlet" method="POST">
            <% String username = request.getParameter("username");
            if (username==null) username="";%>
            <input type="text" name="usernameTF" value="<%=username%>" />
            <% String password = request.getParameter("password");
            if (password==null) password="";%>
            <input type="password" name="passwordTF" value="<%=password%>" />
            <input type="submit" value="Login" />
        </form>

    </body>
</html> 
```

这基本上是我们书中的直接副本，但是我需要新主页的字段。与控制器 servlet 相同，直接复制除了只包含我需要的字段。

```
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    RequestDispatcher view = null;
    Status status = new Status();
    request.setAttribute("status", status);
    String username = request.getParameter("username");
    String password = request.getParameter("password");
    if (username==null || username.length()==0)
        status.addException(new Exception("Please enter username"));
    if (password==null)
        status.addException(new Exception("Please enter password"));
    if (!status.isSuccessful()){
        view = request.getRequestDispatcher("Login.jsp");
        //view.forward(request, response);
    }
    else
        try{
            request.setAttribute("username", username);
            request.setAttribute("password", password);
        view = request.getRequestDispatcher("Registration.jsp");
        } catch (Exception e) {
            status.addException(new Exception("Error"));
            view = request.getRequestDispatcher("Login.jsp");
        }
    view.forward(request, response);
} 
```

和 Status 类，同样是本书的直接副本。

```
public class Status {
private ArrayList exceptions;

public Status(){
    exceptions = new ArrayList();
}
public void addException(Exception exception) {
    exceptions.add(exception);
}
public boolean isSuccessful(){
    return (exceptions.isEmpty());
}
public Iterator getExceptions(){
    return exceptions.iterator();
} 
```

无论在两个框中键入什么，单步调试都会显示未传递给参数的值。如果两个字段都有文本，如果只有一个有文本并且两个字段都为空，我会在屏幕上方打印创建的异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T15:44:42.197

您的请求参数名称与输入字段名称不匹配。您已为输入字段分配了`usernameTF`和的名称`passwordTF`。然后它们可以通过这些名称作为请求参数使用，但您正在尝试使用名称`username`和`password`. 因此，您需要修复输入字段名称或请求参数名称，以便它们相互匹配。

顺便说一句，为什么要从像 JSF 这样的现代 MVC 框架退回到笨拙的 90 年代风格的混杂业务代码的 JSP？这*真的*是家庭作业要求你的吗？此外，HTML`<font>`元素自 1998 年以来已被弃用。您从哪里了解到它的？课程质量真的好吗？

# ios - Facebook帖子分页？

> ID：11283289
> 
> 赞同：-1
> 
> 时间：2012-07-01T15:33:59.517
> 
> 标签：ios, facebook

我看到我可以限制从 fbconnect 返回的帖子数量。但是，我不知道如何浏览帖子？例如，出于速度目的，我只返回前 25 个。然后在用户表格视图的底部放置一个加载下一个 25 按钮，依此类推。如何更改 @"platform/posts?limit=25" 以包含数据的开始和结束位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T15:41:39.420

使用`offset`参数。例如，`@"platform/posts?limit=25&offset=25`, 并记录按下加载下一个 25 按钮的次数。

# android - 使用游标查询我的数据库

> ID：11283290
> 
> 赞同：1
> 
> 时间：2012-07-01T15:34:01.250
> 
> 标签：android, sqlite, sqliteopenhelper, android-sqlite

我有一个数据库设置，我知道我正确地插入它。但是，我很难通过查询从中返回任何数据。这是我的主类和数据库助手类。

```
public class DBTesterActivity extends Activity {

MyDBAdapter db;
Cursor cursor;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    Item item1;
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    db = new MyDBAdapter(this);
    db.open();
    db.insertEntry(item1 = new Item("Bathtub", "Bathroom", "Typical", "Clean", "fill, wash", "Round, deep", "Bathroom", "Toilet, Bathroom", R.drawable.ic_launcher));
    //this.populateDatabase();
    //Cursor entryCursor = db.getAllEntries();
    item1 = db.getEntry(1);
    Log.i("db", item1.toString());
} 
```

和我的数据库适配器类在这里......

```
public class MyDBAdapter {
private static final String DATABASE_NAME = "myDatabase.db";
private static final String DATABASE_TABLE = "mainTable";
private static final int DATABASE_VERSION = 1;

//main table columns
public static final String KEY_ITEM              = "itemName";
public static final String KEY_GROUP             = "itemGroup";
public static final String ITEM_CLASSIFICATION   = "classification";
public static final String KEY_USE               = "use";
public static final String KEY_ACTION            = "action";
public static final String KEY_PROPERTIES        = "properties";
public static final String KEY_ASSOCIATION       = "association";
public static final String KEY_IMG_ID            = "imgId";

// The index (key) column name for use in where clauses.
public static final String KEY_ID="_id";

// The name and column index of each column in your database.
public static final int NAME_COLUMN = 1;
public static final int GROUP_COLUMN = 2;
public static final int CLASSIFICATION_COLUMN = 3;
public static final int USE_COLUMN = 4;
public static final int ACTION_COLUMN = 5;
public static final int PROPERTIES_COLUMN = 6;
public static final int ASSOCIATION_COLUMN = 7;
public static final int IMG_ID_COLUMN = 8;
// TODO: Create public field for each column in your table.

// SQL Statement to create a new database.
private static final String DATABASE_CREATE = "create table " + 
        DATABASE_TABLE + " (" 
        + KEY_ID + " integer primary key autoincrement, " 
        + KEY_ITEM + " TEXT, " 
        + KEY_GROUP + " TEXT, " 
        + ITEM_CLASSIFICATION + " TEXT, " 
        + KEY_USE + " TEXT, " 
        + KEY_ACTION + " TEXT, " 
        + KEY_PROPERTIES + " TEXT, " 
        + KEY_ASSOCIATION + " TEXT, " 
        + KEY_IMG_ID + " INTEGER);";

// Variable to hold the database instance
private SQLiteDatabase db;
// Context of the application using the database.
private final Context context;
// Database open/upgrade helper
private myDbHelper dbHelper;

public MyDBAdapter(Context _context) {
    context = _context;
    dbHelper = new myDbHelper(context, DATABASE_NAME, null, DATABASE_VERSION);
}

public MyDBAdapter open() throws SQLException {
    try {  
        db = dbHelper.getWritableDatabase();
    } catch (SQLiteException e) {
        db = dbHelper.getReadableDatabase();
    }
    return this;
}

public void close() {
    db.close();
}

public void insertEntry(Item item) {
    // TODO: Create a new ContentValues to represent my row
    // and insert it into the database.
    SQLiteDatabase db = dbHelper.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_ITEM, item.get_item_name());
    values.put(KEY_GROUP, item.get_group());
    values.put(ITEM_CLASSIFICATION, item.get_item_classification());
    values.put(KEY_USE, item.get_use());
    values.put(KEY_ACTION, item.get_action());
    values.put(KEY_PROPERTIES, item.get_properties());
    values.put(KEY_ASSOCIATION, item.get_association());
    values.put(KEY_IMG_ID, item.get_img_id());

    // insert row to table
    try{
        db.insertOrThrow(DATABASE_TABLE, null, values);
        Log.i("success", "insert was successful");
    }catch (Exception e){Log.w("insertFail", "insert failed: " + e.toString());}

}
  public Item getEntry(long _rowIndex) {
// TODO: Return a cursor to a row from the database and
// use the values to populate an instance of MyObject
  SQLiteDatabase db = dbHelper.getReadableDatabase();

  Cursor cursor = db.query(false, DATABASE_TABLE, new String[] { KEY_ID,
          KEY_ITEM, KEY_GROUP, ITEM_CLASSIFICATION, KEY_USE, KEY_ACTION, KEY_PROPERTIES, KEY_ASSOCIATION, KEY_IMG_ID}, KEY_ID + "=?",
          new String[] { String.valueOf(_rowIndex) }, null, null, null, null);
  if (cursor != null)
      cursor.moveToFirst();

  Item item = new Item(Integer.parseInt(cursor.getString(0)),
          cursor.getString(1), cursor.getString(2), cursor.getString(3), cursor.getString(4), cursor.getString(5), cursor.getString(6), cursor.getString(7), cursor.getString(8),  Integer.parseInt(cursor.getString(9)));
  // return contact
  return item; 
```

}

我在我的 logCat 中得到这些 ---- 对字段插槽 0,9 的错误请求。numRows = 1, numColumns = 9
and ---- java.lang.IllegalStateException: get field slot from row 0 col 9 failed

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T15:43:42.523

所以你想得到所有的列，所以我认为更清晰的方法是你使用`rawQuery`方法。你可以这样做：

```
SELECT_QUERY = "Select * from " + DATABASE_TABLE + " where " + KEY_ID + " = ?";
Cursor c = db.rawQuery(SELECT_QUERY, new String[] {String.valueOf(_rowIndex)});
if (c.getCount() > 0 && c.moveToFirst()) {
   Item item = new Item(Integer.parseInt(cursor.getString(0)),
      cursor.getString(1), cursor.getString(2), cursor.getString(3), cursor.getString(4), cursor.getString(5), cursor.getString(6), cursor.getString(7), cursor.getString(8));
} 
```

**笔记：**但是，你不是指什么样的问题，有什么错误吗？

**更新：**

你的问题很可能是这样的：

```
Integer.parseInt(cursor.getString(9)) 
```

列的编号从**0**开始，而不是从**1**开始，所以：

*   **_id** - 0*   **_itemGroup** - 1*   **分类**- 2*   **使用**- 3*   **行动**- 4*   **属性**- 5*   **协会**- 6*   **imgId** - 7*   **属性**- 8

所以你试图得到不存在的列。修复它，然后它应该可以工作。

# c# - 如何使用 XNA 调整窗口大小

> ID：11283294
> 
> 赞同：12
> 
> 时间：2012-07-01T15:34:07.473
> 
> 标签：c#, xna, resize, window, resolution

我知道这个问题已经被问过很多次了。但是，我在谷歌搜索一个多小时后找到的所有解决方案基本上都是一样的。每个人都说，为了在 XNA 中调整窗口大小，您只需将以下代码行（或这些代码行的一些细微变化）添加到 Game1 类的 Initiate() 方法中：

```
 //A lot of people say that the ApplyChanges() call is not necessary,
    //and equally as many say that it is.
    graphics.IsFullScreen = false;
    graphics.PreferredBackBufferWidth = 800;
    graphics.PreferredBackBufferHeight = 600;
    graphics.ApplyChanges(); 
```

这对我不起作用。代码编译并运行，但绝对没有任何变化。我一直在搜索 GraphicsDevice 和 GraphicsDeviceManager 类的文档，但我找不到任何信息表明我需要做除上述之外的任何事情。

我也相当确定我的显卡是足够的（ATI HD 5870），虽然看起来 XNA 显卡兼容性的 wiki 条目已经有一段时间没有更新了。

我在 Windows 7 上运行，使用上述显卡、Visual C# 2010 Express 和最新版本的 XNA。

所以我只是希望有人可以帮助我找到我搞砸的地方。我将在下面发布我的整个 Game1 类（我将其重命名为 MainApp）。如果有人想查看任何其他被调用的课程，请询问，我会发布它们。

```
public class MainApp : Microsoft.Xna.Framework.Game
{
    GraphicsDeviceManager graphics;
    SpriteBatch spriteBatch;

    Player player;

    public MainApp()
    {
        graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Content";
    }

    protected override void Initialize()
    {
        player = new Player();

        //This does not do ANYTHING
        graphics.IsFullScreen = false;
        graphics.PreferredBackBufferWidth = 800;
        graphics.PreferredBackBufferHeight = 600;
        graphics.ApplyChanges();

        base.Initialize();
    }

    protected override void LoadContent()
    {
        spriteBatch = new SpriteBatch(GraphicsDevice);

        Vector2 playerPosition = new Vector2(GraphicsDevice.Viewport.TitleSafeArea.X,
                                             GraphicsDevice.Viewport.TitleSafeArea.Y
                                             + 2*(graphics.GraphicsDevice.Viewport.TitleSafeArea.Height / 3));
        player.Initialize(Content.Load<Texture2D>("basePlayerTexture"),
                          playerPosition);
    }

    protected override void UnloadContent()
    {
    }

    protected override void Update(GameTime gameTime)
    {
        if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
            this.Exit();
       base.Update(gameTime);
    }

    protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.CornflowerBlue);
        spriteBatch.Begin();

        player.Draw(spriteBatch);

        spriteBatch.End();

        base.Draw(gameTime);
    }
} 
```

PS 这是我使用 C# 的第二天，所以如果这是由于一个非常愚蠢的错误，我很抱歉浪费你的时间。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-02T02:51:58.473

令人沮丧的是（正如你所说）“很多人说 ApplyChanges() 调用是不必要的，同样许多人说它是必要的”——事实上，*这取决于*你在做什么以及你在哪里做的！

（我怎么知道这一切？我已经[实现了](http://andrewrussell.net/exen/)。另请参阅：[this answer](https://stackoverflow.com/a/8025319/165500)。）

* * *

## 当您在游戏启动时设置*初始分辨率时：*

在您的*构造函数*中执行此操作（显然，如果您重命名`Game1`，请在重命名的构造函数中执行此操作！）

```
public class Game1 : Microsoft.Xna.Framework.Game
{
    GraphicsDeviceManager graphics;

    public Game1()
    {
        graphics = new GraphicsDeviceManager(this);
        graphics.PreferredBackBufferHeight = 600;
        graphics.PreferredBackBufferWidth = 800;
    }

    // ...
} 
```

**期间*请勿*触摸`Initialize()`！**并且*不要*打电话`ApplyChanges()`。

当`Game.Run()`被调用时（默认模板项目调用它`Program.cs`），它会在调用***之前***`GraphicsDeviceManager.CreateDevice`调用设置初始显示！这就是为什么您必须在游戏类的构造函数中创建并设置您想要的设置（在之前调用）。 *`Initialize()``GraphicsDeviceManager``Game.Run()`*

 *如果您尝试在 中设置分辨率`Initialize`，则会导致图形设备设置两次。坏的。

（老实说，我很惊讶这会导致如此混乱。这是默认项目模板中提供的代码！）

* * *

## 当您在游戏运行时*修改*分辨率时：

如果您在游戏中的某处显示“分辨率选择”菜单，并且您想要响应用户（例如）单击该菜单中的选项 -*那么*（并且只有这样）您应该使用`ApplyChanges`. 你应该只从内部调用它`Update`。例如：

```
public class Game1 : Microsoft.Xna.Framework.Game
{
    protected override void Update(GameTime gameTime)
    {
        if(userClickedTheResolutionChangeButton)
        {
            graphics.IsFullScreen = userRequestedFullScreen;
            graphics.PreferredBackBufferHeight = userRequestedHeight;
            graphics.PreferredBackBufferWidth = userRequestedWidth;
            graphics.ApplyChanges();
        }

        // ...
    }

    // ...
} 
```

最后，请注意这`ToggleFullScreen()`与执行以下操作相同：

```
graphics.IsFullScreen = !graphics.IsFullScreen;
graphics.ApplyChanges(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T16:25:16.390

我的计算机上默认的`GraphicsDevice.Viewport`宽度和高度是 800x480，尝试将尺寸设置为高于该尺寸会引人注目 - 例如 1024x768。

```
graphics.PreferredBackBufferHeight = 768;
graphics.PreferredBackBufferWidth = 1024;
graphics.ApplyChanges(); 
```

上面的代码`Initialize`足以为我扩展窗口。*

# java - 将大字节数组发送到 php 服务器

> ID：11283295
> 
> 赞同：0
> 
> 时间：2012-07-01T15:34:12.443
> 
> 标签：java, http, url, byte

我尝试将视频文件 (.mp4) 发送到服务器。我知道发送字节数组是一种非常过时的方法，但问题是我不能更改服务器，不允许这样做。

发送小于 1 mb 的文件时，一切都很好，但对于较大的文件，它就不起作用了。有谁知道如何解决这个问题？？有可能吗？

服务器代码：（$data中为实际字节数组，前面的128个字符仅用于文件管理，如文件名和id）

```
 <?php

//get data
if (!isset($HTTP_RAW_POST_DATA))
$HTTP_RAW_POST_DATA = file_get_contents("php://input");

//cass -------------------------------------------------------------
$filename = substr($HTTP_RAW_POST_DATA, 0, 128);    
$filename = trim($filename, " ");               
$filename = explode(";",$filename);     
$fname = $filename[0];
$q_id = $filename[1];
$data = substr($HTTP_RAW_POST_DATA, 128);

$length = strlen($data);

$file = fopen("cassDebug.txt","w");
$textout = "QID: $q_id NAME: $fname LENGTH: $length";

fwrite($file,$textout);
fclose($file);

// write file
if(strlen($data)>0){
        $FSize = strlen($data);
        $f = fopen("media/$fname",'w');
        fwrite($f,$data,$FSize);
         fclose($f);
 }

?> 
```

Java代码：

```
try
    {
    FileInputStream fileInputStream = new FileInputStream(new File(pathToOurFile) );

    URL url = new URL(urlServer);
    connection = (HttpURLConnection) url.openConnection();

    // Allow Inputs & Outputs
    connection.setDoInput(true);
    connection.setDoOutput(true);
    connection.setUseCaches(false);

    connection.setRequestMethod("POST");
    connection.setRequestProperty("Content-Type", "application/octet-stream");

    connection.connect();

    OutputStream os = connection.getOutputStream();

    String fileName = makeLength(fname, fname.length());
    String comma = ";";
    String audioQuestionId = makeLength(QID, 128 - fname.length() - comma.length());

    os.write(fileName.getBytes());
    os.write(comma.getBytes());
    os.write(audioQuestionId.getBytes());

    // Initialize byte array for data transfer
    byte[] dataBuffer = new byte[2*1024];

    // Get total bytes in the file
            long totalBytes = fileInputStream.available();

            System.out.println("Total bytes: "+totalBytes);

            long bytesRead = 0; 
        int n = 0;
        while ((n = fileInputStream.read(dataBuffer, 0, 2*1024)) != -1) {
              os.write(dataBuffer, 0, n);
              bytesRead += n;
        }

            System.out.println(connection.getResponseCode());
    System.out.println(connection.getResponseMessage());

    fileInputStream.close();
    os.flush();
    os.close();
    connection.disconnect();
    }
    catch (Exception ex){
        System.out.println(ex);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T15:41:03.290

检查您的[php.ini](http://www.fengoffice.com/web/wiki/doku.php/php.ini)文件。默认 POST 限制为 1MB。你可能没有提出来。

# python - 使用python的kmeans实现中的空列表

> ID：11283298
> 
> 赞同：0
> 
> 时间：2012-07-01T15:34:27.430
> 
> 标签：python, cluster-analysis, k-means

我正在为一个使用集群来识别对象的项目编写一个 K-Means 集群，因此机器人几乎是自主的。相机基本上以半秒的
速度拍摄一张图片，该图片存储在一个“斑点”像素中。这个 blob 被发送到数据挖掘算法 k-means，它将对象的“阴影”识别为一个集群，因此可以对机器人进行编程以避开这些区域。我发布了我的 k-means 代码。它是用python编写的。

```
import sys, math, random

class Point:

    def __init__(self, coords, reference=None):
        self.coords     = coords
        self.n          = len(coords)
        self.reference  = reference

    def __repr__(self):
        return str(self.coords)

class Cluster:

    def __init__(self, points):

        if len(points) == 0: 
            raise Exception("ILLEGAL: empty cluster")

        self.points = points
        self.n      = points[0].n       # make the first element to be the number of clusters

        for p in points:
            if p.n != self.n:
                raise Exception("ILLEGAL: wrong dimension")

        self.centroid = self.calculateCentroid()

    def __repr__(self):
        return str(self.points)

    def update(self, points):
        old_centroid    = self.centroid
        self.points     = points
        self.centroid   = self.calculateCentroid()
        return getDistance(old_centroid, self.centroid)

    def calculateCentroid(self):
        reduce_coord = lambda i:reduce(lambda x,p : x + p.coords[i], self.points, 0.0)
        if len(self.points) == 0:
            print "Dividing by 0"
            self.points = [1]
        centroid_coords = [reduce_coord(i) / len(self.points) for i in range(self.n)]

        return Point(centroid_coords)

def kmeans(points, k, cutoff):

    initial = random.sample(points, k)
    clusters = [Cluster([p]) for p in initial]
    print clusters
    while True:
        lists = [ [] for c in clusters]
        for p in points:
            smallest_distance   = getDistance(p, clusters[0].centroid)
            index = 0

            for i in range(len(clusters[1:])):
                distance = getDistance(p, clusters[i+1].centroid)
                if distance < smallest_distance:

                    smallest_distance = distance
                    index = i+1

                lists[index].append(p)
            biggest_shift = 0.0

            for i in range(len(clusters)):
                shift = clusters[i].update(lists[i])
                biggest_shift = max(biggest_shift, shift)

            if biggest_shift < cutoff:
                break

    return clusters

def getDistance(a, b):

    if a.n != b.n:
        raise Exception("ILLEGAL: non comparable points")

    ret = reduce(lambda x, y: x + pow((a.coords[y] - b.coords[y]), 2), range(a.n), 0.0)
    return math.sqrt(ret)

def makeRandomPoint(n, lower, upper):
    return Point([random.uniform(lower, upper) for i in range(n)])

def main():
    num_points, dim, k, cutoff, lower, upper = 10, 2, 3, 0.5, 0, 200
    points = map(lambda i: makeRandomPoint(dim, lower, upper), range(num_points))

    clusters = kmeans(points, k, cutoff)

    for i, c in enumerate(clusters):
        for p in c.points:
            print "Cluster: ", i, "\t Point: ", p

if __name__ == "__main__":
    main() 
```

果然，它不工作！

```
 Traceback (most recent call last):
  File "C:\Users\philippe\Documents\workspace-sts-2.7.2.RELEASE\scribber\kmeans\kmeans.py", line 100, in ?
    main()    
  File "C:\Users\philippe\Documents\workspace-sts-2.7.2.RELEASE\scribber\kmeans\kmeans.py", line 92, in main
[    clusters = kmeans(points, k, cutoff)
[[89.152748179548524, 81.217634455465131]], [[83.439023369838509, 169.75355953688432]], [[1.8622622156419633, 41.364078271733739]]]
Dividing by 0
  File "C:\Users\philippe\Documents\workspace-sts-2.7.2.RELEASE\scribber\kmeans\kmeans.py", line 69, in kmeans
    shift = clusters[i].update(lists[i])
  File "C:\Users\philippe\Documents\workspace-sts-2.7.2.RELEASE\scribber\kmeans\kmeans.py", line 35, in update
    self.centroid   = self.calculateCentroid()
  File "C:\Users\philippe\Documents\workspace-sts-2.7.2.RELEASE\scribber\kmeans\kmeans.py", line 43, in calculateCentroid
    centroid_coords = [reduce_coord(i) / len(self.points) for i in range(self.n)]
  File "C:\Users\philippe\Documents\workspace-sts-2.7.2.RELEASE\scribber\kmeans\kmeans.py", line 39, in <lambda>
    reduce_coord = lambda i:reduce(lambda x,p : x + p.coords[i], self.points, 0.0)
  File "C:\Users\philippe\Documents\workspace-sts-2.7.2.RELEASE\scribber\kmeans\kmeans.py", line 39, in <lambda>
    reduce_coord = lambda i:reduce(lambda x,p : x + p.coords[i], self.points, 0.0)
AttributeError: 'int' object has no attribute 'coords' 
```

当我`lists`在函数中进行打印时，`kmeans(points, k, cutoff)`我得到 `[[], [], []]`. 我试图弄清楚，为什么给我一个空列表。我发布了整个代码，因此可以运行代码并复制错误。在错误日志中，可以看到“集群”是什么：点列表。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T15:51:47.653

问题是，如果最接近给定集群的点列表是空的（所有点都更接近不同的集群），那么您将得到除以 0 错误，此时您将垃圾数据分配给 self.points这会导致您看到的最终错误。

如果两个集群具有相同的质心，这是可能的，在这种情况下，第二个集群将永远不会分配给它的点。

顺便说一句，还有另一个错误。您在 lists[index].append(p) 前面有一个额外的缩进，您应该考虑使用 enumerate 和 min 重写整个循环以使其更清晰。

这是我建议重写的方法。

```
while True:
    newPoints = dict([(c,[]) for c in clusters])
    for p in points:
        cluster = min(clusters, key = lambda c:getDistance(p, c.centroid))
        newPoints[cluster].append(p)

    biggest_shift = 0.0

    for c in clusters:
        if newPoints[c]:
            shift = c.update(newPoints[c])
            biggest_shift = max(biggest_shift, shift)

    if biggest_shift < cutoff:
        break 
```

# java - 如何在 dev_appserver 中进行干净的部署？

> ID：11283301
> 
> 赞同：0
> 
> 时间：2012-07-01T15:34:52.287
> 
> 标签：java, google-app-engine, caching

如何在应用引擎开发服务器中进行干净的部署？

我正在使用 google app-engine java 和命令行工具（ant、ant runserver）。

当我通过 chrome 提交新请求时，我收到了旧代码的响应。

我不确定我的旧代码缓存在哪里。我错过了什么吗？

检查了以下内容，

1.  类文件时间戳，~\app1\war\WEB-INF\classes

2.  servlet 映射

3.  jsp中的缓存设置，

4.  我无法找到为 .jsp 编译的 .class 文件

其他详情，

*   应用引擎 java sdk 1.6.3。
*   JAVA_HOME=C:\glassfish3\jdk7
*   JRE_HOME=C:\glassfish3\jdk7\jre
*   铬（最新）
*   视窗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T15:38:34.677

也许您正在通过僵尸进程两次运行该应用程序？使用 netstat -o （在命令行中）检查哪个进程正在持有端口并将其杀死或只是重新启动。

# asp.net - A simple query about control validators in ASP.NET

> ID：11283303
> 
> 赞同：0
> 
> 时间：2012-07-01T15:35:17.030
> 
> 标签：asp.net, visual-studio-2010, validation, comparevalidator

I'm using the following Compare Validator :

```
<asp:CompareValidator ID="CompareValidator1" runat="server" ControlToValidate="DropDownList1"  ErrorMessage="None can't be selected!" 
                    Operator="NotEqual" ValueToCompare="None"></asp:CompareValidator> 
```

over the following Dropdown List:

```
<asp:DropDownList ID="DropDownList1" runat="server" Height="17px" Width="181px">
                    <asp:ListItem>None</asp:ListItem>
                    <asp:ListItem>One</asp:ListItem>
                    <asp:ListItem>Two</asp:ListItem>
                    <asp:ListItem>Three</asp:ListItem>
                </asp:DropDownList> 
```

Here's what happens : Initially, nothing happens, and 'None' is selected by default. If I choose any other option and THEN choose 'None', it give me the error.

What I want to do is have the validator display the error right away when the page is first loaded, and not wait for the user to change to some other option and back over to 'None' or wait for the user to submit the form before displaying the form again.

How can I achieve this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:54:37.190

尝试这样的事情：

```
protected void Page_PreRender(object sender, EventArgs e)
{
    Page.Validate();
} 
```

在我的简单测试页面中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T16:15:07.087

阅读您的方案后，我认为您必须设置 `Operator="Equal"`，如果值为“无”，则会发生错误“无法选择无！”。

# objective-c - SoundCloud 错误（clang 失败，退出代码为 1）

> ID：11283307
> 
> 赞同：1
> 
> 时间：2012-07-01T15:35:23.997
> 
> 标签：objective-c, ios, soundcloud

[我正在尝试从此处](https://github.com/soundcloud/CocoaSoundCloudAPI)执行 SoundCLoudApi ，但是没有任何描述的 clang 错误：

```
Ld /Users/dimakorolcenko/Library/Developer/Xcode/DerivedData/scapitest-dbwrumaigeiklgcvrmtokdvcppfu/Build/Products/Debug-iphonesimulator/scapitest.app/scapitest normal i386
    cd /Users/dimakorolcenko/Documents/SoundCloudIssues/scapitest
    setenv MACOSX_DEPLOYMENT_TARGET 10.6
    setenv PATH "/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/clang -arch i386 -isysroot /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk -L/Users/dimakorolcenko/Library/Developer/Xcode/DerivedData/scapitest-dbwrumaigeiklgcvrmtokdvcppfu/Build/Products/Debug-iphonesimulator -F/Users/dimakorolcenko/Library/Developer/Xcode/DerivedData/scapitest-dbwrumaigeiklgcvrmtokdvcppfu/Build/Products/Debug-iphonesimulator -filelist /Users/dimakorolcenko/Library/Developer/Xcode/DerivedData/scapitest-dbwrumaigeiklgcvrmtokdvcppfu/Build/Intermediates/scapitest.build/Debug-iphonesimulator/scapitest.build/Objects-normal/i386/scapitest.LinkFileList -mmacosx-version-min=10.6 -Xlinker -objc_abi_version -Xlinker 2 -ObjC -fobjc-arc -Xlinker -no_implicit_dylibs -D__IPHONE_OS_VERSION_MIN_REQUIRED=50000 /Users/dimakorolcenko/Library/Developer/Xcode/DerivedData/scapitest-dbwrumaigeiklgcvrmtokdvcppfu/Build/Products/Debug-iphonesimulator/JSONKit/JSONKit /Users/dimakorolcenko/Library/Developer/Xcode/DerivedData/scapitest-dbwrumaigeiklgcvrmtokdvcppfu/Build/Products/Debug-iphonesimulator/libJSONKit.a /Users/dimakorolcenko/Library/Developer/Xcode/DerivedData/scapitest-dbwrumaigeiklgcvrmtokdvcppfu/Build/Products/Debug-iphonesimulator/libOAuth2Client.a /Users/dimakorolcenko/Library/Developer/Xcode/DerivedData/scapitest-dbwrumaigeiklgcvrmtokdvcppfu/Build/Products/Debug-iphonesimulator/libOHAttributedLabel.a /Users/dimakorolcenko/Library/Developer/Xcode/DerivedData/scapitest-dbwrumaigeiklgcvrmtokdvcppfu/Build/Products/Debug-iphonesimulator/libSoundCloudAPI.a /Users/dimakorolcenko/Library/Developer/Xcode/DerivedData/scapitest-dbwrumaigeiklgcvrmtokdvcppfu/Build/Products/Debug-iphonesimulator/libSoundCloudUI.a /Users/dimakorolcenko/Library/Developer/Xcode/DerivedData/scapitest-dbwrumaigeiklgcvrmtokdvcppfu/Build/Products/Debug-iphonesimulator/OAuth2Client/OAuth2Client /Users/dimakorolcenko/Library/Developer/Xcode/DerivedData/scapitest-dbwrumaigeiklgcvrmtokdvcppfu/Build/Products/Debug-iphonesimulator/SoundCloudAPI/SoundCloudAPI /Users/dimakorolcenko/Library/Developer/Xcode/DerivedData/scapitest-dbwrumaigeiklgcvrmtokdvcppfu/Build/Products/Debug-iphonesimulator/SoundCloudUI/SoundCloudUI -framework CoreText -framework CoreGraphics -framework Security -framework CoreLocation -framework AddressBook -framework AddressBookUI -framework QuartzCore -framework UIKit -framework Foundation -o /Users/dimakorolcenko/Library/Developer/Xcode/DerivedData/scapitest-dbwrumaigeiklgcvrmtokdvcppfu/Build/Products/Debug-iphonesimulator/scapitest.app/scapitest

Command /Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/clang failed with exit code 1 
```

我已完成说明中的所有步骤，但它不起作用。我没有想法，如何解决它。请帮助我找到解决方案。可能是更常见的错误，而不是 SoundCloud 问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T15:39:26.703

您的部署目标可能是错误的。

在左侧的项目导航器中选择您的项目。转到构建设置选项卡。确保您的部署目标是 iOS，而不是 OS X。

# git - 两个阶段之间的 git log

> ID：11283310
> 
> 赞同：0
> 
> 时间：2012-07-01T15:35:58.607
> 
> 标签：git, github

我想创建一个**自动发行说明**机制。
我要做的是在每次部署之前检查我使用 git 所做的所有提交并从中生成提交日志。
我已经看过这里： http: [//gitref.org/inspect/#log](http://gitref.org/inspect/#log)并找到了如下命令：

```
git log --oneline --before={3.weeks.ago} --after={2010-04-18} --no-merges 
```

问题是我不知道日期、作者或任何其他过滤。我唯一能知道的是这是一个新的doploy，所以我需要一种方法来在每次部署时存储一些索引并grep自上次索引以来的所有提交。我使用 github 作为主机。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T15:43:10.833

您可以为此使用[标签。](http://git-scm.com/docs/git-tag)在每个版本中，您都会创建一个标签，您可以稍后在需要更改日志时参考该标签。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T15:49:15.063

好的 - 所以你需要一个范围，但你说你不知道“日期或作者”，但你至少应该知道提交 sha？

```
git log XXXX..XXXXX --format='%ad %an: %s' --no-merges --date=short 
```

XXXX 是你的提交

或者`Ikke`说使用标签，每次发布到生产环境时，使用内部版本号进行标记，所以你只需要最后一个生产标签和新的生产标签

```
git log p-5010..p-5011 --format='%s' --date=short 
```

.

* * *

*如果有人觉得有用，请离开本节：不是答案，而是与 git log 相关*

```
git log --format='%ad %an: %s' --before={3.weeks.ago} --after={2012-05-18} --no-merges --date=short 
```

刚刚从我的 .gitconfig 中抓取了一些代码并将其与您拥有的内容合并

我的 .gitconfig 别名`git l`

```
[alias]
    l = log -20 --format='%h %ad %d %an: %s' --date=short

git l
# returns last 20 commits
e42c322 YYYY-MM-DD  (tag-if-exists) John Doe: commit message
849c968 YYYY-MM-DD  John Doe: commit message
... 
```

# ruby-on-rails - Paperclip::Attachment 在使用 FactoryGirl 时作为字符串传递

> ID：11283318
> 
> 赞同：1
> 
> 时间：2012-07-01T15:37:29.317
> 
> 标签：ruby-on-rails, ruby-on-rails-3, testing, paperclip, factory-bot

我正在尝试使用 FactoryGirl 3.0 在 rails 3.2.6 上为回形针 3.1.2 创建功能测试，当我传递文件附件时，我的控制器收到一个字符串，该字符串是文件位置，而不是 Paperclip::Attachment 对象。

我的工厂是：

```
include ActionDispatch::TestProcess
FactoryGirl.define do
   factory :artist do
    id 1
    name 'MyString'
    photo {fixture_file_upload("#{Rails.root}/test/fixtures/files/rails.png",'image/png')}
  end
end 
```

我的测试是：

```
test "should create artist" do
  assert_difference('Artist.count') do
    post :create, :artist => { name: @artist.name, photo: @artist.photo }, :html => { :multipart => true }
  end

  assert_redirected_to artist_path(assigns(:artist))
end 
```

在我的控制器中：

```
params[:artist][:photo].class.name 
```

等于“字符串”，但是当我将它添加到测试时它通过了

```
assert @artist.photo.class.name == "Paperclip::Attachment" 
```

我目前的解决方法是在测试中创建 fixture_file_upload ：

```
test "should create artist" do
  assert_difference('Artist.count') do
    photo = fixture_file_upload("/files/rails.png",'image/png')
    post :create, :artist => { name: @artist.name, photo: photo }, :html => { :multipart => true }
  end

  assert_redirected_to artist_path(assigns(:artist))
end 
```

它有效但创建了一个“Rack::Test::UploadedFile”，所以我很困惑为什么我的工厂在调用相同的方法来创建它们时返回一个“Paperclip::Attachment”。

提前感谢您对此有所了解，因为显然我想使用工厂而不是在它之外定义fixture_file_upload。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T17:02:43.047

您是否尝试过更换

```
photo {fixture_file_upload("#{Rails.root}/test/fixtures/files/rails.png",'image/png')} 
```

和

```
photo File.new("#{Rails.root}/test/fixtures/files/rails.png") 
```

在你的工厂里面。

# c++ - std::shared_ptr 或 std::unique_ptr 赋值运算符重载

> ID：11283323
> 
> 赞同：2
> 
> 时间：2012-07-01T15:38:22.167
> 
> 标签：c++, shared-ptr, smart-pointers, unique-ptr

我看不出为什么这些没有为它们模板化的类型的普通旧指针的赋值运算符重载的原因。如果使智能指针接口尽可能接近普通旧指针的目标，那么他们为什么不像这样为赋值运算符进行重载呢？

```
inline std::shared_ptr<type> &operator=( const type * pointer)
{
    reset(a);
} 
```

这样你就可以像使用普通指针一样使用它们，如下所示：

```
std::shared_ptr<int> test = new int; 
```

这根本不是问题，只是想知道他们为什么要麻烦地重载几个运算符。

还想知道是否有办法重载全局赋值运算符来执行此操作，或者是否有任何理由我不应该这样做。

**编辑**：在此处添加对 Nawaz 关于代码格式的回答的回复。我刚刚写了这个测试程序，看看你说的是否正确：

```
template<class T>
class peh
{
public:
    peh() {meh = 3;}
    const peh<T> & operator=(const int * peh)
    {
    }
};

void f( peh<int> teh)
{

}

int main()
{
    int * meh = new int;

    f(meh);

    system("PAUSE");
    return 0;
} 
```

这里的错误是说没有从`peh<int>`to的可用转换`int *`。那么为什么 to 可以接受`std::shared_ptr<int>`呢`int *`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T15:41:27.690

> 还想知道是否有办法重载全局赋值运算符来执行此操作，或者是否有任何理由我不应该这样做。

不能。赋值运算符重载必须是成员函数。

顺便说一句，如果您想要以下功能，那么您不应该谈论赋值运算符，而应该问：为什么要构造以原始指针作为参数的构造函数`explicit`？为什么它不是隐含的？

```
//this code requires an implicit constructor, not assignment!
std::shared_ptr<int> test = new int;  //illegal 
```

这是非法的，但假设有一段时间这是允许的，那么您将能够调用以下函数，将原始指针作为参数传递：这样的功能将是**危险**的，正如答案的其余部分所解释的那样（阅读评论） ：

```
void f(std::shared_ptr<int> test)
{
     //code

} //test will be destructed here  (when it goes out of scope)
  //if test.use_count() == 1, then the pointer which it manages 
  //will be destructed as well. (NOTE THIS POINT) 
```

现在看看*危险*的部分：

```
int *ptr = new int;

f(ptr); 
//note that calling f is allowed if it is allowed:
//std::shared_ptr<int> test = new int;
//it is as if ptr is assigned to the parameter:
//std::shared_ptr<int> test = ptr;

//Question : now what happened in f()?
//Answer : inside f(), test (the shared_ptr) will infer that no one else
//refers to the pointer it contains, because test.use_count() == 1
//test is obviously wrong in this case, because it cannot prove that!

//DANGER
*ptr = 10; //undefined behavior, because ptr is deleted by the shared_ptr 
```

请阅读评论。它解释了上面代码片段的每个部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T16:04:04.037

您显示的`operator=`内容实际上不会启用您想要的语法。`shared_ptr<int> p = new int;`将使用来自 T* 的 shared_ptr 的构造函数和 shared_ptr 的复制构造函数。shared_ptr 两者都有，但你的语法不起作用，因为 T* 的构造函数是`explicit`.

这样做的原因是，如果该构造 ,`std::shared_ptr<int> test = new int;`可以隐式完成，则意味着 shared_ptr 可以在没有任何人明确要求的情况下获得指针的所有权。Nawaz 给出了一个非常容易出错的原因。您必须非常小心，您正在使用的指针不会在您不知情的情况下突然被某处的 shared_ptr 采用，然后从您的下方销毁。

这是一个显示这种危险的隐式构造的示例：

```
#include <iostream>

template<typename T>
struct owning_pointer {
    T *t;
    owning_pointer(T *t) : t{t} {}
    ~owning_pointer() {
        std::cout << t << " deleted\n";
        delete t;
    }
};

void foo(owning_pointer<int> thief) {}

int main() {
    int *i = new int;
    std::cout << i << " allocated\n";
    foo(i);
} 
```

输出将类似于：

```
0x10d400880 allocated
0x10d400880 deleted 
```

`explicit`并查看添加到 owning_ptr 的构造函数时出现的错误。我得到：

```
main.cpp:18:5: error: no matching function for call to 'foo'
    foo(i);
    ^~~
main.cpp:13:6: note: candidate function not viable: no known conversion from 'int *' to 'owning_pointer<int>' for 1st argument;
void foo(owning_pointer<int> thief) {}
     ^ 
```

* * *

此外，没有必要允许从 T* 进行隐式构造，因为已经有一些非常简单的分配方法，而不会产生同样的错误可能性：

```
std::shared_ptr<int> test(new int); // one extra character isn't a hardship. I typically prefer () construction anyway.
std::shared_ptr<int> test{new int}; // although I might start preferring {} construction in C++11
auto test = std::make_shared<int>(); // this is slightly different in that the allocated int is zero-initialized 
```

如果您正在初始化一个成员 shared_ptr 那么您可以在初始化列表中初始化它，而不是使用赋值或`reset()`在构造函数的主体中：

```
struct foo {
    std::shared_ptr<int> m_meh;
    foo()
      : m_meh(new int)
    {
        // no need for m_meh.reset(new int) here
    }
}; 
```

可以实现的是`operator=`：

```
shared_ptr<int> s;
s = new int; 
```

这似乎不像从 T* 隐式构造 shared_ptr 那样容易出错，但我也看不出它真的有任何价值。

# java - 尝试打开一个简单的 JSP 文件会产生 HTTP 状态 500

> ID：11283328
> 
> 赞同：0
> 
> 时间：2012-07-01T15:39:01.367
> 
> 标签：java, mysql, jsp, servlets, jdbc

在我之前的帖子之后[，](https://stackoverflow.com/questions/11282231/jsp-page-wont-move-the-another-page-after-user-enters-the-input)我已将所有源文件删除到一个名为的包`model`中，现在该项目在执行时拒绝加载`http://localhost:8080/MyFirstServlet`。

我怀疑罪魁祸首是`web.xml`，这是文件：

**网页.xml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>MyFirstServlet</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>

  <servlet>
   <description></description>
   <display-name>LoginServlet</display-name>
   <servlet-name>LoginServlet</servlet-name>
   <servlet-class>model.LoginServlet</servlet-class>
 </servlet>

  <servlet-mapping>
    <servlet-name>LoginServlet</servlet-name>
    <url-pattern>/model/LoginServlet</url-pattern>
  </servlet-mapping>
</web-app>

  [1]: https://stackoverflow.com/questions/11282231/jsp-page-wont-move-the-another-page-after-user-enters-the-input/11283006#11283006 
```

**这是 index.jsp：**

```
<%@ page language="java" contentType="text/html; charset=windows-1255"
    pageEncoding="windows-1255"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1255">
<title>Insert title here</title>
</head>
<body>
<form action="model/LoginServlet" method="POST">
        First Name: <input type="text" name="firstName" size="20"><br>
        Last Name: <input type="text" name="lastName" size="20">
        <br><br>
        <input type="submit" value="Submit">
</form> 

</body>
</html> 
```

这是项目的层次结构：

![等级制度](../Images/bdb605ddabf1961bd4c914418e16f5bc.png)

当我执行`http://localhost:8080/MyFirstServlet`并到达这里时：

![在此处输入图像描述](../Images/eb761b0f43843021b590c26e0209fc57.png)

我输入`first`并`second`进入文本字段，然后得到这个：

![在此处输入图像描述](../Images/d1a3ce6fa0ceaa062870c99e4c649fc0.png)

我试图修复它，但没有任何效果，所以我很感激任何建议，谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T15:50:11.993

```
<servlet>
   <description></description>
   <display-name>LoginServlet</display-name>
   <servlet-name>LoginServlet</servlet-name>
   <servlet-class>model.LoginServlet</servlet-class>
 </servlet> 
```

您错过了 servlet 类的包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T10:27:11.470

你形成行动应该是

```
<form action="model/LoginServlet" /> 
```

并且您的登录 servlet 应该正确定义包。

```
package model; 
```

此外，您的 web.xml 必须通过完全限定名称声明此 servlet 类

```
model.LoginServlet 
```

您的 servlet 必须扩展 HttpServlet。

如果您确保上述所有内容都正确到位并且仍然无法正常工作。然后，您可能需要在 Eclipse 中检查此项目的构建路径设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T16:21:31.670

堆栈跟踪清楚地显示了错误是什么，ClassNotFoundException 表示 servlet 容器无法在 web.xml 中找到指定的类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T16:32:35.793

LoginServlet.java 中的第一行代码应该是

```
package model; 
```

# php - GoDaddy 托管网站未收到 CodeIgniter 帖子

> ID：11283331
> 
> 赞同：0
> 
> 时间：2012-07-01T15:39:15.013
> 
> 标签：php, codeigniter, post, codeigniter-2

无论我做什么，我都无法在 $_POST 数组中得到任何结果。我对 CI 使用标准的 .htaccess，但没有填充 $_POST。

它适用于非 CI 脚本。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T15:41:54.890

我敢打赌这是问题所在：[http ://www.highonphp.com/php-fastcgi-post-requests-failing](http://www.highonphp.com/php-fastcgi-post-requests-failing)

当 4G 主机为客户推出时，我遇到了类似的事情。

改变

```
RewriteRule ^(.*)$ index\.php?/$1 [R=301,L] 
```

到

```
RewriteRule ^(.*)$ index\.php?/$1 [L] 
```

# javascript - 鼠标悬停时单元格颜色会发生变化而不影响文本颜色

> ID：11283332
> 
> 赞同：0
> 
> 时间：2012-07-01T15:39:16.580
> 
> 标签：javascript, html, colors, styles

我想要一个表格，其中每个单元格都有不同的颜色，鼠标悬停时会更改为指定的特定颜色，而不会影响文本的颜色。没有 JavaScript 有可能吗？
我的三个不同颜色的单元格的简单表格是

```
<table>
<tr>
<td bgcolor="red">Red</td>
<td bgcolor="blue">Blue</td>
<td bgcolor="green">Green</td>
</tr>
</table> 
```

重新渲染文本颜色对任何单元格都没有影响。我想要这个简单的脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T15:40:36.037

是的，通过使用 CSS 而不是十年前的`bgcolor`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T15:50:41.890

添加一个类（对于我的示例“tablecell”），并删除 bgcolor。

CSS方式：

```
.tablecell:hover {
    background-color:#000000; // Put color you want it to be on hover here.
}
.tablecell {
    background-color:#FF0000; // Put color you wan tit to be on not-hover here (optional)
} 
```

Javascript方式：

```
myElement.addEventListener("onmouseover", mouseIn);
myElement.addEventListener("onmouseout", mouseOut);

function mouseIn() {
    this.style.backgroundColor = "#000000";
}

function mouseOut() {
    this.style.backgroundColor = "#FF0000";
} 
```

jQuery方式：

```
$(".tablecell").on("hover", mouseIn, mouseOut); // functions above 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T15:53:10.950

像这样的东西：

```
<style type="text/css">
        .td_hover { background-color: white; }
        .td_hover:hover { background-color: yellow; }
        .bg_red { background-color: red; }
        .bg_blue { background-color: blue; }
        .bg_green { background-color: green; }
</style>
<table>
    <tr>
        <td class="td_hover bg_red">Red</td>
        <td class="td_hover bg_blue">Blue</td>
        <td class="td_hover bg_greed">Green</td>
    </tr>
</table> 
```

# ruby - 以编程方式将指南针转换为 css

> ID：11283334
> 
> 赞同：1
> 
> 时间：2012-07-01T15:39:19.700
> 
> 标签：ruby, sass, compass-sass

我的红宝石代码中有一串指南针样式。我想把它转换成一个css字符串。我有 config.rb 的值作为哈希值。

如何通过函数调用将字符串格式的指南针转换为 css（字符串）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T18:06:13.770

是的，你可以这样做：

```
require 'sass'

scss_string = '@mixin test{width: auto}; div {@include test}'

print Sass::compile(scss_string) 
```

这将输出：

```
div {
  width: auto; } 
```

[在这里，您可以获得此方法的 ruby​​ 文档的链接，其中包含有关如何自定义它的信息](http://ruby-doc.org/gems/docs/s/sass-3.1.19/Sass.html#method-c-compile)。

# android - 在 onCreate 中启动Camera Intent（由于先前的意图额外），在配置更改时相机再次出现

> ID：11283336
> 
> 赞同：0
> 
> 时间：2012-07-01T15:39:40.927
> 
> 标签：android, android-camera, android-camera-intent

以下问题：我正在调用带有附加功能的活动“B”。如果 B 启动并有额外内容，则 ACTION_IMAGE_CAPTURE 意图正在进行中。这真的很好用。

但是，我在 onCreate() 中完成了此操作，因此，每次我更改设备的方向（并在之前启动活动时使用附加功能）时，相机都会启动。

我试图做 clear(); 以及 remove() 但这对我不起作用。

有什么建议么？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T16:08:04.743

您可以使用 onSaveInstanceState 来保存一个布尔值来决定是否保持相机打开。此方法提供了一个捆绑包，您可以在其中插入该数据，您可以在 onCreate 或 onRestoreInstanceState 期间再次访问该数据包。这是在方向更改期间保持应用按预期工作的首选方法。

例如，您可以检查一张照片是否真的是用相机拍摄的，然后根据该信息，通过 onSaveInstanceState 回调将一个布尔值插入到 savedInstanceState Bundle 中。调用 onCreate 时，检查提供的 Bundle 是否为您的布尔值，并选择是否使用该布尔值打开相机。

# android - ActivityManager: java.lang.SecurityException: Permission Denial: 开始 Intent { act=android.intent.act

> ID：11283337
> 
> 赞同：2
> 
> 时间：2012-07-01T15:39:43.143
> 
> 标签：android, eclipse, android-intent, android-manifest, emulation

我有一个问题......我正在制作一个关于 GIS 的简单程序，当我尝试将它从 eclipse 启动到我的设备时，我在检查控制台时收到警告。

> ActivityManager: java.lang.SecurityException: Permission Denial: 从 null 开始 Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.warteg.GIS/.Splash } (pid=16196, uid=2000) 需要空

并且该程序未安装在我的设备中，但是当我尝试使用 eclipse 中的模拟器时，该程序已启动。

有人可以解决我的问题吗？这是我的清单 XML。

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"></uses-permission>
<uses-permission android:name="android.permission.INTERNET"></uses-permission>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >

  <activity 
        android:name="Splash"
        android:label="@string/app_name">
        <intent-filter>
            <category android:name="android.intent.category.LAUNCHER" />
            <action android:name="android.intent.action.MAIN" />

        </intent-filter>
    </activity>
        <uses-library android:name="com.google.android.maps"></uses-library>
    <activity android:name=".Splash"></activity>
    <activity android:name=".FormPetunjuk"></activity>
    <activity android:name=".Peta"></activity>
</application> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T15:42:10.763

你在 manifest.xml 中注册了两次 Splash 活动，所以删除这个：

```
<activity android:name=".Splash"></activity> 
```

# ruby-on-rails - Bundler - 找不到 gem 的兼容版本

> ID：11283340
> 
> 赞同：1
> 
> 时间：2012-07-01T15:39:59.967
> 
> 标签：ruby-on-rails, ruby, gem, hudson, bundler

我尝试为我的 BitNami Redmine 2.0.3 (Windows 7) 安装 Husdon 1.0.8.1

```
rake redmine:migrate:plugins 
```

结果：

```
Bundler could not find compatible versions for gem "builder":
  In Gemfile:
    cucumber (= 0.9.4) x86-mingw32 depends on
      builder (~> 2.1.2) x86-mingw32

    builder (3.0.0) 
```

我的宝石清单没问题：

```
builder (3.0.0, 2.1.2)
cucumber (0.9.4) 
```

... 还有很多 ;）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T17:34:41.793

bundler 所做的是尝试匹配 gemfile 中所有 gem 的所有依赖项。

这包括**将所有 gem 的版本**与要求匹配。

您有多种版本要求，捆绑程序无法满足：

```
builder (~> 2.1.2) x86-mingw32 
```

...表示匹配版本 > 2.1.2，但 < 2.2.0（非常严格的要求）。

```
builder (3.0.0) 
```

...意味着仅匹配 3.0.0（甚至更严格）。

所以你看到你不能同时匹配 2.1.2-2.2.0 和 3.0.0。您需要放宽要求或更改版本号，以便匹配要求。

# javascript - jquery禁用点击直到动画完全完成

> ID：11283341
> 
> 赞同：3
> 
> 时间：2012-07-01T15:40:04.140
> 
> 标签：javascript, jquery, animation, click, bind

我想禁用点击功能，直到其中的每个代码；初始化并完成。

我阅读了这些文章并尝试了他们所说的但无法实现： [event.preventDefault() vs. return false](https://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false) + [在 jQuery 中删除事件处理程序的最佳方法？](https://stackoverflow.com/questions/209029/best-way-to-remove-an-event-handler-in-jquery) + [jQuery - 禁用单击，直到所有链接的动画都完成](https://stackoverflow.com/questions/1271828/jquery-disable-click-until-all-chained-animations-are-complete)

我为这个问题准备了简单的例子：

[这是演示](http://jsfiddle.net/Aw39W/22/)

html

```
<div class="ele">1</div>
<div class="ele">2</div>
<div class="ele">3</div> 
```

​</p>

jQuery

```
$('.ele').click(function() {

    if ( !$('.ele').is(':animated') ) {//this works too but;
                         //is:animate duration returns = 2000 but need to be 4000
        $('.ele').stop().animate({'top':'0px'},2000);
        $(this).stop().animate({'top':'100px'},4000);
    } 
    return false;
});
​ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T16:00:46.720

使用 on() 和 off() 打开/关闭点击功能：

```
$('.ele').on('click', animateEle);

function animateEle(e) {
    $('.ele').stop().animate({'top':'0px'},2000);
    $(e.target).off('click').stop().animate({'top':'100px'},4000, function() {
        $(e.target).on('click', animateEle);
    });
}​ 
```

**[示范](http://jsfiddle.net/UJG6P/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T15:49:26.080

你可以试试这个：

```
var exec_a1 = true, exec_a2 = true;
$('.ele').click(function() {
    if (exec_a1 && exec_a2) {
        exec_a1 = false;
        exec_a2 = false;

        $('.ele').stop().animate({'top': '0px'}, 2000, function() {
            exec_a1 = true;
        });
        $(this).stop().animate({'top': '100px'}, 4000, function() {
            exec_a2 = true;
        });
    }
    return false;
}); 
```

# facebook - 移动 Web URL 和 signed_request

> ID：11283350
> 
> 赞同：1
> 
> 时间：2012-07-01T15:41:38.137
> 
> 标签：facebook, mobile

我已经设置了我的 FB 应用程序，使其具有移动 Web URL 组件。我从测试中注意到，每当我在移动设备上导航到我的应用程序的画布 URL 时，Facebook 都会自动将移动设备重定向到定义的移动 Web URL。

如果我从桌面执行相同操作，则画布 URL 会加载到浏览器中。换句话说，如果 FB 在导航到应用程序的画布 URL 时检测到移动设备，它将立即重定向到定义的移动 Web URL，而不加载画布 URL 内容。

这样做的问题是，当画布 URL 加载时，FB 会向它传递一个 signed_request 表单参数。然而，当它重定向到移动 Web URL 时，它不会。

我在检查网络嗅探器时注意到，当在移动设备上 Facebook 将 app.facebook.com URL 重定向到 m.facebook.com 时，我认为签名请求可能在此过程中丢失了。但是当检查对画布 URL 的第一次调用时，那里也没有 signed_request。

就像 Facebook 只在处理画布 URL 时提供 signed_request 一样，在移动设备的情况下永远不会。

有没有人对如何获得签名请求有任何见解或建议？目前我唯一的想法是强迫用户在重定向后立即在移动设备上授权应用程序，但如果可能的话我宁愿不这样做（我不喜欢门控技术）

干杯

李

- - 编辑 - -

关闭 - 请参阅我的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:30:26.727

从那以后，我得出的结论是，移动 URL 不会收到签名请求，并且要获得相同类型的数据，需要让用户完成 FB Auth 流程。结束问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T18:05:17.407

如果此人已授权您的应用程序，则应在查询字符串中向您的移动应用程序传递一个“代码”。您的后端可以将该代码交换为 access_token，然后您可以通过请求 https://graph.facebook.com/me?access_token=[从代码交换中检索到的令牌] 来使用它来获取当前用户信息。这将允许您自动登录当前用户。

但是，是的，如果当前用户未通过身份验证，您将不会收到当前用户的国家、地区和年龄等信息。这是目前移动网络应用程序的限制。

# objective-c - 即使我已将 self.navigationController.toolbarHidden 指定为 NO，iOS 工具栏也隐藏在导航控制器中？

> ID：11283352
> 
> 赞同：0
> 
> 时间：2012-07-01T15:41:39.607
> 
> 标签：objective-c, ios

我无法使用 StoryBoard 显示已添加到 UIViewController 的工具栏。我进行了搜索，发现几个答案说要设置：

```
self.navigationController.toolbarHidden = NO; 
```

我在初始化时这样做了，甚至在加载时尝试过，然后甚至尝试使用按钮以确保我没有发疯。但无论我做什么，我都无法在 UIViewController 中显示工具栏。

知道我做错了什么吗？

# javascript - 可以将 GWT 与基于 javascript 的框架进行比较吗？

> ID：11283354
> 
> 赞同：6
> 
> 时间：2012-07-01T15:41:59.077
> 
> 标签：javascript, gwt, backbone.js

GWT 如何与 Javascript 框架（例如`backbone.js`、`angularJS`、`Ember`、`JQuery`等）进行比较（或可以进行比较）？它们的目标是完成相同的工作，使它们成为竞争对手，还是可以一起使用？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-01T20:26:08.200

是和不是。虽然 GWT 的编译器本质上是一个 Java 到 Javascript 的转换器，但它提供的好处远远超过了我从任何流行的 JS 库中看到的任何东西。

由于基于 GWT 的应用程序是用 Java 编写的，因此它们获得了许多好处，例如强类型和极易重构。如果某些更改影响了另一个班级，您会立即知道。而对于那些Java不擅长的事情，你总是可以使用Javascript来处理JSNI的情况。Google 还为 Eclipse 提供了一个很棒的插件，它允许您调试代码，就像我从未见过的 JS 库一样。这样做的另一个好处是您可以用相同的语言编写客户端和服务器端代码，而 GWT 负责将它们捆绑在一起的繁重工作。

自动生成多个排列也有好处。GWT 在最常用的浏览器上踢出一个外观和行为相同（尽可能）的代码副本。您的客户在没有您承担额外重量的情况下都会看到相同的东西。您无需负责编写无穷无尽的代码行来处理那些永远困扰 Web 开发人员的无数浏览器特性。虽然在某种程度上这些事情是由一些 JS 库处理的，但 GWT 使它完全不费吹灰之力。

以我的经验，您提到的库本身都很棒，但根本无法提供 GWT 开箱即用的强大调试、可移植性、可扩展性、可维护性和可移植性。GWT 并不是真正为与其他库一起工作而构建的，而是让您能够（大部分）在没有他们帮助的情况下完成这些库所能做的所有事情。（当然这并不是说你*不能*在任何你想使用的地方使用其他库……如果你真的觉得有必要，你可以这样做。）

所以在我看来，不，没有竞争。GWT是这个舞台上的象征性重量级冠军。

# ruby-on-rails - Rails：关联模型记录的嵌套路由

> ID：11283358
> 
> 赞同：0
> 
> 时间：2012-07-01T15:42:20.103
> 
> 标签：ruby-on-rails, controller, routes, nested-resources

我的主要目标是通过参数哈希传递个人资料 ID 和公司 ID，以便更新 2 个模型之间的连接

模型已设置好，其中个人资料属于公司，公司有可能的员工（个人资料），如底部代码所示。

我想使用员工控制器来添加、删除和显示与公司的配置文件关联。

但是当我尝试这样做时，我收到以下错误

```
No route matches {:action=>"show", :controller=>"employees", :company_id=>#<Profile id: 1, user_id: 1, first_name: "Aaron", last_name: "Dufall", created_at: "2012-06-30 07:49:00", updated_at: "2012-07-01 14:03:24", deleted: false, company_id: 1>} 
```

当我将删除指定为方法时，它何时想要显示，如下面的代码所示

显示.html.erb

```
<% @employees.each do |employee| %>
   <%= link_to full_name(employee), employee %>
   <%= link_to "Remove", company_employee_path(employee), :method => :delete %>
<% end %> 
```

路线.rb

```
resources :companies do
  resources :employees
  resources :requests do
    put 'accept', :on => :member
  end
end 
```

公司.rb

```
class Company < ActiveRecord::Base
  attr_accessible :name

  has_many :employees, 
           :foreign_key => 'company_id', 
           :class_name => "Profile"

  has_many :requests, as: :requestable

  validates :name,  presence: true, length: { maximum: 50 }, uniqueness: true 
```

结尾

配置文件.rb

```
class Profile < ActiveRecord::Base
  belongs_to :user
  belongs_to :company
  has_many :requests
  has_many :requested, as: :requestable

  attr_accessible :first_name, :last_name

  validates :first_name, presence: true
  validates :last_name, presence: true

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T16:18:53.563

在 routes.rb 中使用`resource`而不是。`resources`

# javascript - 如何通过Javascript将onclick事件添加到现有元素？(document.getElementbyID)

> ID：11283360
> 
> 赞同：1
> 
> 时间：2012-07-01T15:42:37.057
> 
> 标签：javascript, onclick, dom-events, getelementbyid

我的项目中有一个按钮，当您单击它时，它会调用一个函数并将`onclick`事件添加到我的项目中的所有某些元素并显示我隐藏的弹出元素容器。

我有一个功能可以搜索页面中所有存在`onclick`的元素，并将事件添加到它们具有特定类的某些元素中。

我的元素存储在列表数组中。在这个数组的每个单元格（数组名是`list`）中存储了一个元素，如下所示：

```
list[0] = document.getElementById("my_div_id");
list[1] = document.getElementById("my_div_id_1");
list[2] = document.getElementById("my_div_id_2");
...
list[n] = document.getElementById("my_div_id_n"); 
```

我的Javascript代码顶部有一个如下函数：

```
function say_hello(e, msg) {
    if (e == null) e = window.event;
    //now e handler mouse event in all browser !!!
    alert (e + "::" + msg);
} 
```

我有一个函数可以将`onclick`事件添加到数组中的每个元素。我添加`onclick`了以下类型的事件（用 (*) 注释分隔），但其中任何一个都不起作用：

```
function search_and_add_events_to_all_dragable_elements (list) {
    for (var z = 0; z < list.length; z++) {
        list[z].href = "javascript:;";

        var e;
        var test_msg = "VAYYYYYYYYYY";

        /**************
        element.onclick = new Function { alert ('hi'); };
        element.onclick = new Function () { alert ('hi'); };
        element.onclick = new function { alert ('hi'); };
        element.onclick = new function () { alert ('hi'); };
        element.onclick = new function () { return alert ('hi'); };
        element.onclick = function () { return alert ('hi'); };
        element.onclick = alert ('hi');
        element.onclick = "alert ('hi');";
        element.onclick = say_hello(e, test_msg);
        element.onclick = "say_hello();";
        element.onclick = (function (e, test_msg) { return function(e) { sib(e, test_msg); };
        element.onclick = (function () { return function() { alert("ahaaay"); };
        **************/

        list[z].style["padding"] = "20px";
        list[z].style["border"] = "solid 10px";
        list[z].style["backgroundColor"] = "#CCC";
    }
} 
```

我改变`style`了我的代码以执行我的代码是工作并真正结束。每次都会更改样式，但`onclick`事件不会添加到我的`div`.
只有一种方法可以添加`onclick`到我的项目中。这与以下相同：

```
list[z].setAttribute("onclick", "alert(\"hi\");"); 
```

但是有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T16:04:07.627

有一个更好的办法。我的第一个错误是在页面上加载所有元素之前使用 JavaScript。要解决它，您必须在页面加载结束时调用元素或将您的 javascript 代码放在项目的末尾。那么当您的元素存在于您的页面中时，您的代码就会准确执行。
有关它的更多详细信息，请参见下面的链接：
[页面加载后执行的 JavaScript](https://stackoverflow.com/questions/807878/javascript-that-executes-after-page-load)

[http://www.w3schools.com/jsref/event_onload.asp](http://www.w3schools.com/jsref/event_onload.asp)

我的第二个错误受到了伤害:(
我有一个 div 本身包含所有其他元素。它是`display: none;`在加载时设置样式的。当我调用我的函数时，它没有显示并且所有的东西都很好（就像我的新样式一样）但`onclick`事件没有'不起作用 :(( 我花了两天时间来解决这个问题 :((
只注意在将事件`display: none`添加到元素时不要为元素设置样式`onclick`。
然后您可以将这种类型的创建`onclick`事件动态地用于您的项目：

```
list[z].onclick = (function (e, test_msg) {
    return function(e) {
        sib(e, test_msg);
    };
})(e, test_msg); 
```

这是我所知道的最好的方式。您可以管理事件处理程序并将您的参数也发送到您的函数。

我多次使用另一种方式`onclick`在我的项目中动态添加事件。

# c++ - 为什么衰减到数组参数的指针似乎不适用于 sizeof()？

> ID：11283361
> 
> 赞同：8
> 
> 时间：2012-07-01T15:42:39.620
> 
> 标签：c++, c, pointers

我之前读过一个由于与此完全相同而关闭的问题

[当一个函数有一个特定大小的数组参数时，为什么用指针替换它？](https://stackoverflow.com/questions/1328223/sizeof-array-passed-as-parameter)

和

[如何找到“sizeof”（指向数组的指针）？](https://stackoverflow.com/questions/492384/how-to-find-the-sizeofa-pointer-pointing-to-an-array)

但是在阅读完这篇文章后，我仍然对 sizeof() 的工作原理感到困惑。我知道将数组作为参数传递给函数，例如

```
 void foo(int a[5]) 
```

将导致数组参数衰减为指针。我在上面的 2 个问题链接中没有找到一个明确的答案，即为什么`sizeof()`函数本身不受（或至少看似不受）这种指针衰减行为的影响。如果 sizeof() 的行为与任何其他函数一样，那么

```
 int a[5] = {1,2,3,4,5};
   cout << sizeof(a) << endl; 
```

那么上面应该输出`4`而不是`20`. 我是否错过了一些明显的东西，因为这似乎与指针行为的衰减相矛盾？？？很抱歉再次提出这个问题，但我真的很难理解为什么会发生这种情况，尽管多年来一直愉快地使用该功能而没有真正考虑过它。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-01T15:46:52.907

因为标准是这样说的（强调我的）：

> (C99, 6.3.2.1p3) "**除非它是 sizeof 运算符**或一元 & 运算符的操作数，或者是用于初始化数组的字符串字面量，否则类型为 "array of type" 的表达式将转换为类型为“类型指针”的表达式，它指向数组对象的初始元素并且不是左值。”

请注意，对于 C++，标准明确表示大小是数组的大小：

> (C++11, 5.3.3p2 sizeof) "[...] 当应用于数组时，结果是数组中的总字节数。这意味着包含 n 个元素的数组的大小是 n 倍元素的大小。”

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-01T15:43:49.420

`sizeof`是一个运算符，而不是一个函数。这也是一个特定的。如果它是一个表达式，括号甚至不是必需的：

```
int a;
sizeof (int); //needed because `int` is a type
sizeof a; //optional because `a` is an expression
sizeof (a); //^ also works 
```

如您所见，它也在此[优先级](http://en.cppreference.com/w/cpp/language/operator_precedence)图表上。它也是不可重载的运算符之一。

# javascript - Javascript 逻辑运算符和结果

> ID：11283366
> 
> 赞同：2
> 
> 时间：2012-07-01T15:43:31.177
> 
> 标签：javascript, operators, logical-operators

我知道大多数语言中逻辑运算的结果是真、假或 1,0。在 Javascript 中，我尝试了以下操作：

```
alert(6||5)  // => returns 6
alert(5||6)  // => returns 5
alert(0||5)  // => returns 5
alert(5||0)  // => returns 5
alert(5||1)  // => returns 5
alert(1||5)  // => returns 1
alert(5&&6)  // => returns 6
alert(6&&5)  // => returns 5
alert(0&&5)  // => returns 0
alert(5&&0)  // => returns 0
alert(-1&&5) // => returns 5
alert(5&&-1) // => returns -1 
```

那么逻辑运算符的结果是什么？如果一个操作数是 0 或 1，那么它会按预期工作。如果两者都是非零且不是 1，则

1.  在逻辑的情况下`or`，返回第一个操作数
2.  在逻辑`and`的情况下，返回第二个操作数

这是一般规则吗？

我不知道的另一件事是运营商`|`。

我尝试了运算符`|`并得到了不同的结果：

```
alert(5|8)  // => returns 13 
alert(8|5)  // => returns 13 
alert(-5|8) // => returs -5
alert(8|-5) // => returns -5
alert(0|1)  // => returns 1 
alert(1|0)  // => returns 1
alert(1|1)  // => returns 1 
```

这个运算符实际上是做什么的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T15:48:15.347

由于 javascript 不是类型化语言，因此任何对象都可以用于逻辑运算符，如果该对象为 null、false 布尔值、空字符串、0 或未定义变量，那么它的行为就像 a`false`如果它是其他任何东西，那么它就像一个`true`

在逻辑操作结束时，最后检查的值返回。

所以

6||2

```
Check first value -> "6"
6 = true
Go to next value -> "2"
2 = true 
```

~~操作结束，返回最后一个值。2 如果传递给另一个逻辑操作，它的工作方式与 true 相同。~~

*编辑：这是一个错误的说法。`6||2`返回`6`，因为`6`行为`true`足以知道条件`OR`为真，而无需检查下一个值。*

这真的是一样的方式

真||真

```
Check first value -> "true"
Check next value -> "true"
return last value -> "true" 
```

对于 6 && 0 && 2

```
First value 6 = true
Next value 0 = false 
```

在此停止操作并返回最后检查的值：0。

该| 运算符是完全不同的东西，它只是对输入值的位执行逻辑 OR，正如 akp 的另一个答案所解释的那样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-01T15:50:42.827

实际上你得到的是纯数字结果......就像......

```
 3 in binary is 011......
   4 in binary is 100.....

   when u perform 3|4......

   it is equivalent to 011|100......i.e the OR operator which is the one of the bases of all logical operations

       011
       100

   will give 111 ie 7.............

   so u will get 3|4  as 7......

   hope u understand.. 
```

# java - ThreadLocal 的使用如何降低可重用性

> ID：11283369
> 
> 赞同：7
> 
> 时间：2012-07-01T15:43:54.217
> 
> 标签：java, multithreading, concurrency, synchronization, thread-local

广受好评的书[JCIP](http://books.google.co.in/books?id=fv4tEfwgcjsC&pg=PA46&lpg=PA46&dq=It+is+easy+to+abuse+ThreadLocal&source=bl&ots=bD67iGAb7I&sig=ZowdCRqu54vXWEsYblEpyAllhMM&hl=en&sa=X&ei=h27wT86OIs6GrAfx_pW-DQ&ved=0CFAQ6AEwAA#v=onepage&q=It%20is%20easy%20to%20abuse%20ThreadLocal&f=false)说这关于 ThreadLocal 的使用：

> 通过将其线程限制属性视为使用全局变量的许可或作为创建“隐藏”方法参数的一种手段，很容易滥用 ThreadLocal。线程局部变量会降低可重用性并在类之间引入隐藏的耦合，因此应谨慎使用。

说线程局部变量会降低可重用性并在类之间引入隐藏耦合是什么意思？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-01T15:51:08.287

它们以与全局变量几乎相同的方式降低可重用性：当您的方法的计算依赖于方法外部的状态，但不作为参数传递（例如类字段）时，您的方法的可重用性较低，因为它是紧密耦合的到它所在的对象/类的状态（或者更糟，完全在不同的类上）。

**编辑**：好的，这是一个更清楚的例子。我`ThreadLocal`只是为了这个问题而使用它，但它通常适用于全局变量。假设我想在多个线程上并行计算前 N 个整数的总和。我们知道最好的方法是计算每个线程的局部总和，并在最后将它们相加。出于某种原因，我们决定`call`each 的方法`Task`将使用`ThreadLocal sum`在不同类中定义的变量作为全局（静态）变量：

```
class Foo {
    public static ThreadLocal<Long> localSum = new ThreadLocal<Long>() {
        public Long initialValue() {
            return new Long(0);         
        }
    };
}

class Task implements Callable<Long> {

    private int start = 0;
    private int end = 0;    

    public Task(int start, int end) {
        this.start = start;
        this.end = end;
    }

    public Long call() {
        for(int i = start; i < end; i++) {
            Foo.localSum.set(Foo.localSum.get() + i);
        }
        return Foo.localSum.get();
    }
} 
```

代码正常工作，并为我们提供了全局总和的预期值，但我们注意到类`Task`及其`call`方法现在与`Foo`类严格耦合。如果我想`Task`在另一个项目中重用该类，我还必须移动`Foo`该类，否则代码将无法编译。

尽管这是一个故意复杂的简单示例，但您可以看到“隐藏”全局变量的危险。它也会影响可读性，因为阅读代码的其他人也必须搜索该类`Foo`并查看其定义`Foo.localSum`是什么。你应该让你的类尽可能的独立。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T15:52:31.047

每个线程都声明A `ThreadLocal`- 通常每个该类的对象声明一个字段 - 从这个开始 - 如果`ThreadLocal`滥用可能会出现很多错误。

如果一个线程通过多个对象（单个类或多个类），则`ThreadLocal`该线程使用的对象是所有这些实例中的同一个实例。这就是BG所说的耦合。有耦合的那一刻 - 可重用性变得困难且容易出错。

# c++ - 并发，任务

> ID：11283370
> 
> 赞同：-1
> 
> 时间：2012-07-01T15:44:08.477
> 
> 标签：c++, microsoft-metro, concurrency-runtime

我是 Microsoft 并发运行时（以及一般的异步编程）的新手，我试图了解可以用它做什么和不能做什么。是否可以创建一个任务组，使任务按添加顺序执行，并且任何任务直到前一个任务结束才开始？

与在单个成员函数中链接多个任务相比，我试图了解是否有一种更通用和更分散的方式来处理任务。例如，假设我有一个程序在程序的不同点创建资源，资源分配的顺序很重要。任何被调用的资源分配函数是否可以简单地将任务附加到中央任务列表的末尾，结果任务按照它们被添加的顺序执行（即资源分配函数被调用的顺序）？

谢谢，

罗伯特F

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T23:23:50.553

我不确定我是否理解您想要实现的目标，但是，您是在寻找[Agent](http://msdn.microsoft.com/en-us/library/dd492627.aspx)还是[Actor 模型](http://en.wikipedia.org/wiki/Actor_model)？

您将消息发布到[异步代理](http://msdn.microsoft.com/en-us/magazine/ff959205.aspx)并处理它们。然后它可以向其他代理发送消息。

# html - 如何并排放置 3 张桌子

> ID：11283372
> 
> 赞同：2
> 
> 时间：2012-07-01T15:44:31.220
> 
> 标签：html, css, html-table

我正在尝试并排对齐 3 个表格。当我把一张桌子放在另一张桌子里面时它不起作用，因为中间的桌子有很多内容，这使得我的第一张桌子垂直太大而且看起来不正确。

我要做的是制作一个简单的页面，在其中我的第一个表格有 3 行。我的第二张表只是 1 列、1 行的内容布局，我的第三张表也是 1 列和 1 行。我需要这些桌子并排。

我在网上搜索过，找不到任何可以做到这一点的人。当我添加表格时，它们会堆叠在一起。有人可以帮我让我的 3 张桌子并排吗？

```
 <table width="100" border="1">
        <tr>
       <td>&nbsp;</td>
       </tr>
       <tr>
      <td>&nbsp;</td>
      </tr>
      <tr>
      <td>&nbsp;</td>
      </tr>
      </table>
      <table width="100" border="1">
      <tr>
      <td>&nbsp;</td>
      </tr>
      </table>
      <table width="100" border="1">
      <tr>
      <td>&nbsp;</td>
      </tr>
      </table> 
```

如果这需要 CSS 编码，您是否也可以提供这个，将不胜感激，我仍在学习高级 CSS 和 HTML。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-01T15:48:53.310

添加 style="float:left;" 到每张桌子。例如：

```
<table width="100" border="1" style="float:left;"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T15:49:14.130

（高级）CSS：

```
table{
 float:left;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T15:52:43.183

如果您必须使用表格（并且您为 HTML 电子邮件之类的事情做），您应该能够使用嵌套表格完成大多数事情。您是否尝试过使用一个包含三个单元格的包装表，然后将您的三个表分别放在包装表中的一个单元格中？Dreamweaver 是一个非常好的表格工具。如果这不是表格数据或 HTML 电子邮件，您应该考虑不基于表格的布局。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-27T22:58:03.897

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<table width="900" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td>&nbsp;</td>
    <td rowspan="3">&nbsp;</td>
    <td rowspan="3">&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
  </tr>
</table>
</body>
</html> 
```

这个怎么样

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-28T10:44:19.840

由于 CSS 和 Flexbox 等发生了变化。有几种方法。

1.  将所有表格包装在一个 div 中。

```
<div class="main">
    <div id="table1">
        <table>
            <tr>
                <td>Content</td>
                <td>Content</td>
                <td>Content</td>
            </tr>
        </table>
    </div>
    <div id="table2">
        <table>
            <tr>
                <td>Content</td>
                <td>Content</td>
                <td>Content</td>
            </tr>
        </table>
    </div>
    <div id="table3">
        <table>
            <tr>
                <td>Content</td>
                <td>Content</td>
                <td>Content</td>
            </tr>
        </table>
    </div>
</div> 
```

然后在主类上使用一个flex显示，然后justify-content如下：

```
.main {
    width: 1800px; //depending on how wide you want the table window
    min-height: 615px;  //same as width
    margin: 0 auto; //to center the content on your screen
    display: flex;
    justify-content: space-between;
} 
```

这会将您的表格分隔在一行中。

2.  另一种选择是使用 css 网格，但不会在这里讨论。网上有很多教程。

# asp.net - 继承类应该存储在哪里？

> ID：11283374
> 
> 赞同：1
> 
> 时间：2012-07-01T15:44:46.917
> 
> 标签：asp.net

我想创建可以被其他类继承以在我的项目中使用的类。即我想为每个 Mail 方法创建一个单独的类，每个类将实现不同的 Compose 方法，并且将来会创建更多的 Mail 类。

我的问题是 - 我应该在哪里创建这些类/接口？在 App_Code 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T15:49:58.440

我建议创建一个单独的程序集并将该程序集作为参考包含在您的 Web 项目中。这将使您能够针对您的类/接口编写独立的测试用例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T15:49:34.033

除了用户控件，您还可以将源文件存储在 App_Code 中。在您的情况下，您可以将接口/类存储在 App_Code 中。您可以在 AppCode 中为类/接口组设置多个文件夹。

[应用代码](http://msdn.microsoft.com/en-us/library/t990ks23%28v=vs.80%29.aspx)

> 您可以将源代码存储在 App_Code 文件夹中，它会在运行时自动编译。Web 应用程序中的任何其他代码都可以访问生成的程序集。因此，App_Code 文件夹的工作方式与 Bin 文件夹非常相似，只是您可以在其中存储源代码而不是编译后的代码。App_Code 文件夹及其在 ASP.NET Web 应用程序中的特殊状态使得创建自定义类和其他仅源代码文件并在 Web 应用程序中使用它们成为可能，而无需单独编译它们。

编辑：你可能会看到这个讨论：[如何组织 ASP.NET app_code 文件夹？](https://stackoverflow.com/questions/922719/how-to-organize-asp-net-app-code-folder)

# android - 等待N秒做某事，当用户在此期间点击，取消它

> ID：11283378
> 
> 赞同：0
> 
> 时间：2012-07-01T15:45:14.373
> 
> 标签：android

我想完成以下任务：

```
if (already wait for 3 seconds) {
    // do the task
} else {
    // keep waiting ...
    if (user tap the UI widget) {
        return; // do nothing
    }
} 
```

首先，我想使用处理程序，使用`sendMessageDelayed`(Message msg, long delayMillis) 在之前的所有待处理消息之后将消息排入消息队列（当前时间 + delayMillis）。当用户点击时，我`removeMessages`（int what）。但它不起作用。

有谁知道如何实现这一目标？谢谢。

==================================================== ======

谢谢大家。

我发现这个解决方案效果很好，我太粗心了，`removeMessages`没有使用错误的 Handler 引用，所以它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T22:05:25.380

我更喜欢使用普通的旧 Java API [ScheduledExecutorService](http://developer.android.com/reference/java/util/concurrent/ScheduledExecutorService.html)和[ScheduledFuture](http://developer.android.com/reference/java/util/concurrent/ScheduledFuture.html)：

```
// This schedule a runnable task in 3 seconds:
ScheduledExecutorService scheduledExecutorService = Executors.newScheduledThreadPool(1);
ScheduledFuture scheduledFuture = scheduledExecutorService.schedule(new Runnable() {
  public void run() {
    doSomethingUseful();
  }
}, 3, TimeUnit.SECONDS);

... ...

// some times later if user tap the screen:
if (user tap the UI widget) {
  if (!scheduledFuture.isDone())
    scheduledFuture.cancel(true);
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T15:51:27.147

您可以在用户点击时设置一个标志，并在收到处理程序消息时检查该标志。

您还可以使用 Timer，安排 TimerTask，并在用户点击时取消任务。

# android - 以编程方式将内容添加到 Android 上的 TableLayout

> ID：11283381
> 
> 赞同：0
> 
> 时间：2012-07-01T15:45:37.010
> 
> 标签：android, layout, tablelayout

我试图在单击按钮后将行添加到表中（因此在生成活动之后）。

我的 XML 代码是：

```
 <TableLayout 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:stretchColumns="0,1"
            android:id="@+id/result_table">
            <TableRow 
                android:layout_width="fill_parent"
                android:layout_height="wrap_content">
                <TextView
                    style="@style/MyHeader"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Col1" />
                <TextView
                    style="@style/MyHeader"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Col2"  />
            </TableRow>
        </TableLayout> 
```

因此，当我加载活动时，我的桌子上只有我一行。然后当我点击我的按钮时，我会：

```
 resultTable = (TableLayout)findViewById(R.id.result_table);

    LayoutParams rowLayoutParams = new TableRow.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
    LayoutParams cellLayoutParams = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

    TableRow tableRow;
    TextView cellValue;
    for(Asdf a : as) {
        tableRow = new TableRow(this);
        tableRow.setLayoutParams(rowLayoutParams);

        cellValue = new TextView(this);
        cellValue.setText(a.getText());
        cellValue.setLayoutParams(cellLayoutParams);
        cellValue.setTextAppearance(this, R.style.MyText);
        tableRow.addView(cellValue);

        cellValue = new TextView(this);
        cellValue.setText("asdf");
        cellValue.setLayoutParams(cellLayoutParams);
        cellValue.setTextAppearance(this, R.style.MyText);
        tableRow.addView(cellValue);

        resultTable.addView(tableRow);
    }

    resultTable.invalidate(); 
```

但它没有添加任何东西，我确信循环会迭代。我在 logcat 中没有收到任何警告/异常。

你能帮我吗 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T15:54:23.650

尝试像这样更改`LayoutParams`添加的`Views`：

```
TableLayout.LayoutParams rowLayoutParams = new TableLayout.LayoutParams(TableLayout.LayoutParams.FILL_PARENT, TableLayout.LayoutParams.WRAP_CONTENT);
TableRow.LayoutParams cellLayoutParams = TableRow.new LayoutParams(TableRow.LayoutParams.WRAP_CONTENT, TableRow.LayoutParams.WRAP_CONTENT); 
```

# android - Ksoap2 将复杂对象作为参数传递

> ID：11283387
> 
> 赞同：1
> 
> 时间：2012-07-01T15:46:15.557
> 
> 标签：android, android-ksoap2, custom-object

我通过与请求一起发送对象来与 Web 服务进行通信。

这是 Web 服务的 WSDL 格式。

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
<soap:Body>
<UpdateLocation xmlns="http://tempuri.org/">
  <location>
    <Id>int</Id>
    <TabletId>int</TabletId>
    <SpeedVisibility>boolean</SpeedVisibility>
    <BeltVisibility>boolean</BeltVisibility>
    <LightVisibility>boolean</LightVisibility>
    <ProjectorVisibility>boolean</ProjectorVisibility>
    <DefStart>int</DefStart>
    <DefEnd>int</DefEnd>
    <DefPickerCount>int</DefPickerCount>
    <DefSlotCount>int</DefSlotCount>
    <ServerIP>string</ServerIP>
    <WebURL>string</WebURL>
  </location>
</UpdateLocation>
</soap:Body>
</soap:Envelope> 
```

这是我发出请求的java代码。

```
private void updateSettingsOnServer() {
    SoapObject request = new SoapObject(NAMESPACE, METHOD_UPDATE_SETTINGS);

    Location serverObject = new Location(currentLocation.databaseId, currentLocation.tabletId, currentLocation.isSpeedVisible, currentLocation.isBeltVisible, currentLocation.isLightVisible, currentLocation.isProjectorVisible, currentLocation.slotStarting, currentLocation.slotEnding, prefPickerCount, prefSlotCount, prefServerIPString, prefWebURL);

     PropertyInfo pi = new PropertyInfo();
        pi.setName("serverObject");
        pi.setValue(serverObject);
        pi.setType(serverObject.getClass());
        request.addProperty(pi);

    SoapSerializationEnvelope envelope = 
        new SoapSerializationEnvelope(SoapEnvelope.VER11); 
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);

    envelope.addMapping(NAMESPACE,"Location",new Location().getClass());

    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    try {
        androidHttpTransport.call(SOAP_ACTION_UPDATE_SETTINGS, envelope);

        SoapObject result=(SoapObject)envelope.getResponse(); //To get the data.
        tempText.setText("Received :" + result.toString());

    }
    catch(Exception e)
    {

        tempText.setText("Error");
        //Toast.makeText(context, "Error", Toast.LENGTH_LONG).show();
        e.printStackTrace();
    }

} 
```

我通过以下方式制作了我的自定义类 KVMSerializable。

```
class Location implements KvmSerializable
{
    public Location(int id, int tabletid, boolean speed, boolean belt, boolean light, boolean projector, int start, int end, int picker, int slot, String server, String web)
    {
        databaseId =id;
        tabletId = tabletid;
        isSpeedVisible = speed;
        isBeltVisible = belt;
        isLightVisible = light;
        isProjectorVisible = projector;
        slotStarting = start;
        slotEnding = end;
        pickerCounting = picker;
        slotCounting = slot;
        serverUrlLink = server;
        webUrlLink = web;

    }

    public Location() {
        // TODO Auto-generated constructor stub
    }

    boolean isSpeedVisible, isLightVisible, isBeltVisible, isProjectorVisible;
    int slotStarting, slotEnding , pickerCounting, slotCounting;
    int databaseId, tabletId;
    String serverUrlLink, webUrlLink;

    public Object getProperty(int arg0) {
        // TODO Auto-generated method stub

         switch(arg0)
            {
            case 0:
                return databaseId;
            case 1:
                return tabletId;
            case 2:
                return isSpeedVisible;
            case 3:
                return isBeltVisible;
            case 4:
                return isLightVisible;
            case 5:
                return isProjectorVisible;
            case 6:
                return slotStarting;
            case 7:
                return slotEnding;
            case 8:
                return pickerCounting;
            case 9:
                return slotCounting;
            case 11:
                return serverUrlLink;
            case 12:
                return webUrlLink;

            }

         return null;
    }

    public int getPropertyCount() {
        // TODO Auto-generated method stub
        return 12;
    }

    public void getPropertyInfo(int arg0, Hashtable arg1, PropertyInfo info) {
        // TODO Auto-generated method stub

        switch(arg0)
        {
        case 0:
            info.type = PropertyInfo.INTEGER_CLASS;
            info.name = "databaseId";
            break;
        case 1:
            info.type = PropertyInfo.INTEGER_CLASS;
            info.name = "tabletId";
            break;
        case 2:
            info.type = PropertyInfo.BOOLEAN_CLASS;
            info.name = "isSpeedVisible";
            break;
        case 3:
            info.type = PropertyInfo.BOOLEAN_CLASS;
            info.name = "isBeltVisible";
            break;
        case 4:
            info.type = PropertyInfo.BOOLEAN_CLASS;
            info.name = "isLightVisible";
            break;
        case 5:
            info.type = PropertyInfo.BOOLEAN_CLASS;
            info.name = "isProjectorVisible";
            break;
        case 6:
            info.type = PropertyInfo.INTEGER_CLASS;
            info.name = "slotStarting";
            break;
        case 7:
            info.type = PropertyInfo.STRING_CLASS;
            info.name = "slotEnding";
            break;
        case 8:
            info.type = PropertyInfo.STRING_CLASS;
            info.name = "pickerCounting";
            break;
        case 9:
            info.type = PropertyInfo.INTEGER_CLASS;
            info.name = "slotCounting";
            break;
        case 11:
            info.type = PropertyInfo.STRING_CLASS;
            info.name = "serverUrlLink";
            break;
        case 12:
            info.type = PropertyInfo.STRING_CLASS;
            info.name = "webUrlLink";
            break;

        default:break;
        }

    }
    public void setProperty(int index, Object value) {
        // TODO Auto-generated method stub

        switch(index)
        {
        case 0:
            databaseId = Integer.parseInt(value.toString());
            break;
        case 1:
            tabletId = Integer.parseInt(value.toString());
            break;
        case 2:
            isSpeedVisible = Boolean.parseBoolean(value.toString());
            break;
        case 3:
            isBeltVisible = Boolean.parseBoolean(value.toString());
            break;
        case 4:
            isLightVisible = Boolean.parseBoolean(value.toString());
            break;
        case 5:
            isProjectorVisible = Boolean.parseBoolean(value.toString());
            break;
        case 6:
            slotStarting = Integer.parseInt(value.toString());
            break;
        case 7:
            slotEnding = Integer.parseInt(value.toString());
            break;
        case 8:
            pickerCounting = Integer.parseInt(value.toString());
            break;
        case 9:
            slotCounting = Integer.parseInt(value.toString());
            break;
        case 10:
            serverUrlLink = (value.toString());
            break;
        case 11:
            webUrlLink = (value.toString());
            break;

        default:
            break;
        }

    }
} 
```

但是，不幸的是，它不起作用。

我收到此**错误**。我环顾四周，但仍然无法找到解决此问题的方法。

```
SoapFault - faultcode: 'soap:Server' faultstring: 'Server was unable to process request. ---> Object reference not set to an instance of an object.' faultactor: 'null' detail: org.kxml2.kdom.Node@410cdac8 
```

请帮忙。我现在被困在同样的问题上超过 3 天了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T06:29:15.623

你为什么不使用简单的方法。

```
final SoapObject request = new SoapObject(AppConsts.NAMESPACE,
                usecaseString);
        request.addProperty("Id", 1);
        request.addProperty("TabletId", 2);
        request.addProperty("SpeedVisibility", true); 
```

依此类推，直到 WebURL。之后您可以使用此代码。

```
final SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);
        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);
        final HttpTransportSE androidHttpTransport = new HttpTransportSE(
                AppConsts.URL);
        androidHttpTransport.debug = true;
        String soapAction = AppConsts.NAMESPACE + usecaseString;

        try {
            androidHttpTransport.call(soapAction, envelope);
            SoapPrimitive resultSoapPrimitive;
            resultSoapPrimitive = (SoapPrimitive) envelope.getResponse();
            if (resultSoapPrimitive != null) {
                result = resultSoapPrimitive.toString();
                if (AppConsts.ENABLE_LOG)
                    Log.d(AppConsts.GAME_TITLE, "result json : " + result);
            } else {
                if (AppConsts.ENABLE_LOG)
                    Log.d(AppConsts.GAME_TITLE, "result json is NULL!!! ");

            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:35:02.923

哦，我明白了..[这](http://seesharpgears.blogspot.com/2010/10/ksoap-android-web-service-tutorial-with.html)是将告诉你如何去做的教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-23T14:32:41.593

在服务器端处理该对象怎么样，当服务器应用程序获取您的对象时，服务器源代码如何处理该对象？

# safari-extension - Safari 扩展 - 如何使用 setContextEventUserInfo 方法

> ID：11283395
> 
> 赞同：0
> 
> 时间：2012-07-01T15:47:21.593
> 
> 标签：safari-extension

我正在构建一个 Safari 扩展。

在手册上，在关于“添加上下文菜单项”的页面上，在“以编程方式添加上下文菜单项”段落中，它说：

> 您可以通过响应全局页面或扩展栏中的“contextmenu”事件的扩展版本来将菜单项添加到上下文菜单。如果您通过在注入脚本中调用 setContextEventUserInfo() 来存储有关事件的信息，则可以使用该信息来帮助您决定要添加哪些菜单项。

来源： [https ://developer.apple.com/library/archive/documentation/Tools/Conceptual/SafariExtensionGuide/AddingContextualMenuItems/AddingContextualMenuItems.html#//apple_ref/doc/uid/TP40009977-CH4-SW1](https://developer.apple.com/library/archive/documentation/Tools/Conceptual/SafariExtensionGuide/AddingContextualMenuItems/AddingContextualMenuItems.html#//apple_ref/doc/uid/TP40009977-CH4-SW1)

现在，我在注入的脚本中有这段代码（因为我试图将选定的文本传递给后台脚本）：

```
function handleContextMenu(event) {
  var htmlClip = getHtmlClip(event);
  setContextEventUserInfo(htmlClip);
} 
```

不幸的是，这会产生此错误：

> ReferenceError：找不到变量：setContextEventUserInfo

不幸的是，当我在 Google 上搜索 setContextEventUserInfo 时，唯一的结果是 Safari 手册的页面！

有人可以向我解释我应该如何使用 setContextEventUserInfo 方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T01:54:09.990

这就是你需要的：

```
function handleContextMenu(event) {
    var htmlClip = getHtmlClip(event);
    safari.self.tab.setContextEventUserInfo(event, htmlClip);
} 
```

# c++ - 发送 void 类型定义的函数指针作为要调用的参数

> ID：11283397
> 
> 赞同：0
> 
> 时间：2012-07-01T15:47:36.040
> 
> 标签：c++, function, pointers, arguments

我不知道我正在尝试做的事情是否可能，但它会很高兴。它将真正证明 C++ 是一门强大的语言。

所以，我有一个 DLL 和一个使用 DLL 导出的函数的 EXE。该函数接受一个参数，该参数是或必须是指向另一个函数的指针，并执行它。像这样的东西：

```
extern void RunFunction(void (*FunctionPonter)()) {
    (*FunctionPonter)();
} 
```

我这样称呼它：

```
RunFunction(&FunctionToExecute); 
```

作为参数发送的函数将没有参数，只是一个 void 函数。

因此，所有这些都有效，正如这里介绍的那样。现在，我想进一步定义`(*void)()`为，例如`Action`.

```
typedef (*void)() Action;

Action FunctionToExecute() {
    // My code. This function won't return results - void
} 
```

我想将指针发送到我的 DLL 中的函数，如下所示：

```
// This is how it would be declared now in the DLL
extern void RunFunction(void (ACTION) {
    (*FunctionPonter)();
}

// and this is how I would like to use it
RunFunction(FunctionToExecute); 
```

我正在使用 VC2010，如果可能的话，我不知道该怎么做。感谢您的想法、解释和帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T16:05:36.687

好的，如果我正确理解了您的问题，您正在寻找一种仅允许将某些函数作为参数传递给 DLL 函数的方法。

使用 typedef 是行不通的，因为它只会创建一个别名；`Action`并且`void (*)()`在您的代码中与编译器无法区分。相反，您必须创建一个全新的类型。在 C++ 中，您应该强烈考虑使用[*仿函数*](http://en.wikipedia.org/wiki/Function_object#In_C_and_C.2B.2B)：

```
// Abstract functor
struct Action {
    virtual void operator() () const = 0;
};

// The DLL function
void RunFunction(const Action &action) {
    action();
}

// Define your function as a derived functor
struct FunctionToExecute : Action {
    void operator() () const { std::cout << "Hello\n"; }
};

// Run a function
RunFunction(FunctionToExecute()); 
```

演示：http: [//ideone.com/5pl23](http://ideone.com/5pl23)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T16:22:07.817

首先，函数类型的正确语法`typedef`是

```
typedef void (*Action)(); 
```

其次，函数类型的 typedef-name 可用于*声明*该类型的函数，但不能用于*定义*此类函数。即，如果`FunctionToExecute`是您要通过指针执行的函数，则必须将其定义为

```
void FunctionToExecute() {
  /* whatever */
} 
```

调用函数将被定义为

```
void RunFunction(ACTION p) {
  p();
} 
```

对它的调用如下所示

```
RunFunction(FunctionToExecute); 
```

就是这样。一元`*`和`&`运算符对于函数指针是可选的。

# javascript - window.onload 函数 - 如何让它忽略谷歌广告？

> ID：11283398
> 
> 赞同：1
> 
> 时间：2012-07-01T15:47:47.007
> 
> 标签：javascript

有没有办法让 window.onload 函数忽略页面谷歌广告？如果页面上的某些广告需要一段时间才能加载（例如视频广告等），该功能将不会触发。

**例子..**

```
function pageLoaded() {
        alert('Loaded');
}
window.onload = pageLoaded; 
```

在所有广告完全加载之前，不会出现警告框。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T15:51:50.643

尝试将其放在结束`</body>`标记之前：

```
<script type="text/javascript">
pageLoaded();
</script>
</body> 
```

# javascript - 使用 Javascript 获取页面的 url 并在链接中使用它

> ID：11283399
> 
> 赞同：1
> 
> 时间：2012-07-01T15:47:56.320
> 
> 标签：javascript, html, url

我一直在寻找并寻找这个问题的答案。因此，当解决方案非常简单时，我提前道歉。

我想获取当前页面的网址，例如。www.example.com/example.html 并使用 javascript 将其放入链接（以及其他用途）中。

所以它看起来像这样：

```
<a href"www.example.com/example.html"></a> 
```

我已经尝试了很多我知道我需要使用 location.href 但似乎无法让它工作的东西。

这是我最接近它的工作，：

```
<a href"javascript:write.location.href;"></a> 
```

谢谢，再次抱歉。我是 JS 和 html 的新手。

Ĵ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T16:08:13.270

使用 ID 命名您的元素，例如：`<a id="pageLink"></a>`然后当文档加载时，您可以运行此代码段：

```
var link = document.getElementById("pageLink");
link.setAttribute("href", window.location.href); 
```

或者，使用 jQuery 之类的东西：

```
$("#pageLink").attr("href", window.location.href); 
```

**编辑**针对您在评论中的问题：

我不确定我是否完全理解你，但如果它是固定的，那么你只需在设置它之前连接到 href，例如

```
$("#pageLink").attr("href", staticUrl + window.location.href); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T16:00:47.097

可以`document.location.href`用来查找当前页面的地址

```
<a id="cool-link">click it!</a>
<script>
jQuery('#cool-link').attr('href', document.location.href)
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T16:03:52.050

我认为你必须使用`window.location.href`. 我不是 JS 专家，所以让我知道它是否有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T16:08:29.740

你可以试试这个：

```
<a href="" onclick="window.location.href=document.URL">same url link</a> 
```

您可以将 href 保留为空，只使用 onclick 事件。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-01T16:12:54.133

您可以`this`在 href 中使用（它是全局对象），但可以在 onclick 中使用。

```
<a onclick="this.setAttribute('href', location);this.setAttribute('onclick', '');">foo</a> 
```

它清除了 onclick，因此您只获得一次，因此如果再次单击它，您可以点击该链接。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-01T16:30:39.800

```
<script>
function gotolink(){
    location.href = location.href;
}
</script>

<a href"#" onclick="gotolink();">Click here!</a> 
```

# json - 为什么 Jersey 拒绝编组泛型类型？

> ID：11283402
> 
> 赞同：0
> 
> 时间：2012-07-01T15:48:12.210
> 
> 标签：json, jaxb, jersey, marshalling

我有一个具有泛型类型属性的基类泛型和几个从它继承的类。像这样的东西：

```
public abstract class BaseClass<T extends Number> { 
    @XmlAnyElement
    public T getId() { return id; }
    private T id ; // init for hibernate bug workaround 
.....
}

@XmlRootElement
public class A extends BaseClass<Integer> {
    private String name;
    private String error;
    private String url; 

    public String getError() { return error; }  
    public void setError(String error) { this.error = error; }

    public String getName() { return name; }
    public void setName(String name) { this.name = name; }

    public void setUrl(String url) { this.url = url; }
    public String getUrl() { return url; }
} 
```

当泽西试图编组时，它会抛出：

```
 javax.xml.bind.MarshalException
    - with linked exception:
   [com.sun.istack.SAXException2: unable to marshal type "java.lang.Integer" as an        element because it is missing an @XmlRootElement annotation]
at com.sun.xml.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:318)
at com.sun.xml.bind.v2.runtime.MarshallerImpl.marshal(MarshallerImpl.java:172)
at com.sun.jersey.json.impl.JSONMarshallerImpl.marshal(JSONMarshallerImpl.java:94)
at com.sun.jersey.json.impl.BaseJSONMarshaller.marshallToJSON(BaseJSONMarshaller.java:103)
at com.sun.jersey.json.impl.BaseJSONMarshaller.marshallToJSON(BaseJSONMarshaller.java:91)
    ...... 
```

我无法将 XmlRootElement 注释添加到 Integer，那我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:10:04.207

您应该尝试将`@XmlRootElement`注释添加到您的`BaseClass`.

# sql - Varchar 到数字的转换 - CLR 或 'e0'

> ID：11283404
> 
> 赞同：2
> 
> 时间：2012-07-01T15:48:16.810
> 
> 标签：sql, sql-server, isnumeric

我想将 Varchar 列中的数据转换为数字数据类型 -
所以在转换之前我调用 ISNUMERIC 函数来检查数据是否为数字，如果是则将其转换为数字数据类型。但我面临一个问题 -
IsNumeric 函数的行为不符合预期 -

```
- IsNumeric(x) returns true - when varchar value has both comma and a tab character (Char(9)), 
- IsNumeric(x) returns false - when varchar value has only tab character and no comma 
```

它在以下 SQL 的帮助下进行了解释-

```
DECLARE @propValue AS VARCHAR(50)
SET @propValue = '1,592 ' -- contains comma + tab (Char(9))
SELECT ISNUMERIC(@propValue)  -- Returns 1 

--If ISNUMERIC func returns true for this value, lets convert this Varchar value to Numeric
SELECT CAST(@propValue AS Numeric(19, 4)) -- :-( Error converting data type varchar to numeric. 
```

我用谷歌搜索并找到了解决这个问题的各种解决方案 -

```
--Solution 1: use 'e0'
SELECT ISNUMERIC(@propValue + 'e0')  -- Returns 0

--Solution 2: remove comma before calling IsNumeric()
SELECT ISNUMERIC(REPLACE(@propValue, ',', ''))  -- Returns 0

--Solution 3
--Call CLR function to parse Varchar value 
```

在上述情况下推荐的解决方案是什么？为什么？
另外，如果有人能解释为什么 IsNumeric(x) 返回 false - 当 varchar 值只有制表符而没有逗号时，我将不胜感激？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T01:59:21.027

请记住，`ISNUMERIC() = 1`这并不意味着“可以转换为每种数字类型”，而是“可以转换为至少一种数字类型”。很多情况下，值可以转换为至少一种数字类型，但不是您想要的。一个更基本的例子：

```
IF ISNUMERIC(256) = 1
  SELECT CONVERT(TINYINT, 256); 
```

如果您有已知违规的字符串（例如制表符），那么为什么不替换制表符呢？为什么不首先阻止垃圾数据进入这个值呢？

这有效，但它很丑陋：

```
DECLARE @x TABLE (propValue VARCHAR(50));

INSERT @x SELECT '1,592' + CHAR(9)
UNION ALL SELECT '55' + CHAR(9) + '32'
UNION ALL SELECT CHAR(9) + '7,452.32    '
UNION ALL SELECT 'foo'
UNION ALL SELECT '74';

SELECT CONVERT(NUMERIC(19,4), 
LTRIM(RTRIM(REPLACE(REPLACE(propValue, CHAR(9), ''), ',', '')))
)
FROM @x
WHERE ISNUMERIC(LTRIM(RTRIM(REPLACE(REPLACE(propValue, 
  CHAR(9), ''), ',', ''))) + 'e0') = 1; 
```

虽然不适用于您的确切问题，但我在 10 年前写了一个关于此的常见问题解答：http: [//classicasp.aspfaq.com/general/what-is-wrong-with-isnumeric.html](http://classicasp.aspfaq.com/general/what-is-wrong-with-isnumeric.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-01T19:57:02.817

```
ISNUMERIC(RTRIM(LTRIM(x))) = 1 
```

# windows-8 - Toast 通知每 15 秒

> ID：11283405
> 
> 赞同：1
> 
> 时间：2012-07-01T15:48:18.510
> 
> 标签：windows-8, microsoft-metro, windows-runtime

当应用程序在后台时，如何每 15 秒显示一次 toast 通知？DispatcherTimer 不起作用，因为我的应用程序已暂停并且后台任务无法以该频率运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T15:56:57.967

您可以使用后台任务执行 toast 通知，但最短间隔为 15 分钟。迈克尔

# java - 在 ubuntu 10.10 上安装 jdk1.7.0

> ID：11283409
> 
> 赞同：5
> 
> 时间：2012-07-01T15:49:03.973
> 
> 标签：java, ubuntu

我是 ubuntu 10.10 的新手，并将其用作 VM。我尝试安装 jdk 1.7 以从终端运行 java 程序。我按照链接中的说明进行操作：[如何在 Ubuntu Linux 上安装 Oracle Java](http://www.wikihow.com/Install-Oracle-Java-on-Ubuntu-Linux)。安装完成后，我尝试运行一个Hello World java程序。当我这样做时，程序编译成功`javac Hello.java`。但是，当我尝试使用 运行程序时`java Hello`，它没有在终端上给出任何输出，而是给了我以下信息：

> 无法启动应用程序。

例外：

```
CouldNotLoadArgumentException[ Could not load file/URL specified: Hello]
at com.sun.javaws.Main.launchApp(Unknown Source)
at com.sun.javaws.Main.continueInSecureThread(Unknown Source)
at com.sun.javaws.Main$1.run(Unknown Source)
at java.lang.Thread.run(Thread.java:722) 
```

包装异常

```
java.io.FileNotFoundException: Hello (No such file or directory)
at java.io.FileInputStream.open(Native Method)
at java.io.FileInputStream.<init>(FileInputStream.java:138)
at java.io.FileInputStream.<init>(FileInputStream.java:97)
at com.sun.javaws.jnl.LaunchDescFactory.buildDescriptor(Unknown Source)
at com.sun.javaws.Main.launchApp(Unknown Source)
at com.sun.javaws.Main.continueInSecureThread(Unknown Source)
at com.sun.javaws.Main$1.run(Unknown Source)
at java.lang.Thread.run(Thread.java:722) 
```

此外，我尝试检查我的版本以供`java`使用`java -version`，它给出了以下输出：

```
 Java(TM) Web Start 10.0.0.147-fcs 
Usage:  javaws [run-options] <jnlp-file>    
        javaws [control-options]        
    where run-options include:          
  -verbose          display additional output   
  -offline          run the application in offline mode 
  -system           run the application from the system cache only
  -Xnosplash        run without showing a splash screen 
  -J<option>        supply option to the vm 
  -wait             start java process and wait for its exit    

control-options include:    
  -viewer           show the cache viewer in the java control panel
  -clearcache       remove all non-installed applications from the cache
  -uninstall        remove all applications from the cache
  -uninstall <jnlp-file>                remove the application from the cache   
  -import [import-options] <jnlp-file>  import the application to the cache 

import-options include:                     
  -silent           import silently (with no user interface)    
  -system           import application into the system cache    
  -codebase <url>   retrieve resources from the given codebase  
  -shortcut         install shortcuts as if user allowed prompt 
  -association      install associations as if user allowed prompt 
```

我在这里看到它`javaws`在我尝试使用`java`.

我不明白为什么会发生这种情况或出了什么问题。任何帮助将不胜感激。我只是 Ubuntu 的初学者。提前致谢！！

* * *

**编辑 1** Hello.java：

```
public class Hello
{
    public static void main(String... s)
    {
        System.out.println("Hello World.!!!");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:00:32.520

您`java -version`的输出为您提供 javaws -version 的输出。所以这似乎是您的文件系统中的链接错误。如果您使用 update-alternatives，您将在二进制文件夹 (/usr/bin) 中创建一个符号链接。也许您在阅读教程时遇到了一些错字？我很确定它是类似的东西 `sudo update-alternatives --install "/usr/bin/java" "java" "/usr/local/java/jre1.7.0_05/bin/javaws" 1`或类似的东西。

您可以尝试重新输入“update-alternative”命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T16:15:45.997

当 12.04 可用时，我不确定你是否想要 10.10。我安装了 Sun/Oracle 版本，它第一次工作。您所要做的就是下载它，解压缩并将其添加到您的路径中。

错误消息表明 Java 未正确安装。

我建议你也安装一个免费的 IDE，比如 IntelliJ CE。这将使您的应用程序的编写、编译、运行和调试变得更加容易。

# sql - 从数据库中查询多个值到一个用逗号分隔的 id

> ID：11283416
> 
> 赞同：0
> 
> 时间：2012-07-01T15:49:50.407
> 
> 标签：sql, comma

如何从具有多个值的数据库中获取结果到以逗号分隔的相同 id....

请帮忙解决这个问题。。

谢谢你

```
Id     |    Code
----------------------
0001   |   IN,ON,ME,OH
0002   |   ON,VI,AC,ZO
0003   |   QA,PS,OO,ME 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T16:19:28.737

假设您使用的是 MySQL：

```
SELECT 
Id,
GROUP_CONCAT(Code SEPARATOR ',')
FROM
yourTable
GROUP BY Id 
```

[在这里您可以找到更多信息](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)。

# entity-framework - 如何为 EF Code First 实体声明和映射进行 TDD 和单元测试？

> ID：11283417
> 
> 赞同：0
> 
> 时间：2012-07-01T15:49:54.007
> 
> 标签：entity-framework, unit-testing, tdd, ef-code-first, entity-framework-4.3

我即将为新的 MVC4 应用程序重新编写一套单元测试。因为我在 EF 数据项目中的几乎所有代码都是直接从 VS2012 EF 逆向工程工具生成的代码中复制而来的，所以我决定在应用程序的这一部分中跳过单元测试，除非我能以某种方式自动生成它们。我在这里没有业务逻辑，我想首先集中精力确保业务方面更好的质量保证。但是，我想知道第一个 TDD 是如何进行的，其次，这里只是一般的单元测试。

假设我还不需要或不想模拟数据库。我以前经常对测试数据库副本进行单元测试，但使用更传统的、家庭滚动的 ORM。

那么，我是否从一个实例化我驱动的 DbContext 的测试开始，然后派生一个 DbContext 直到该测试通过。然后，测试实例化实体并创建实体，继续测试这些实体的 DbSet，该测试还将包括检查表是否已创建。一切仍然很好，如果不是非常费力的话，但是当我开始考虑为我的所有实体测试我的流利映射类时，我的头就会爆炸。现在怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T13:41:49.677

针对数据库的测试不是单元测试——它是集成测试，集成测试通常不遵循单元测试的粒度。为什么不是单元测试？因为单元测试测试单个自包含单元 - 所有外部依赖项都是伪造的。当您的测试跨越您的单元代码和数据库时，它也会测试依赖关系=它是集成测试。

所有依赖 EF 的代码都应该通过集成测试进行测试。对微软的代码进行单元测试是没有意义的。例如你关于映射的问题。映射的正确单元测试执行以下操作：

*   准备：使用您的实体映射配置准备编译模型
*   执行：从编译模型创建 DbContext 并从上下文中获取元数据工作空间
*   验证：断言元数据上下文包含您的映射实体

现在，您可以对要在该实体中映射的每个属性重复类似的测试。

这显然是应该已经工作的框架代码——这些测试应该由开发框架的人来完成。

在您的情况下，对本地数据库进行简单的集成测试，该数据库将尝试加载、保存、更新和删除实体，并断言您对这些操作的期望。如果映射中有任何错误，这些测试中至少有一个会失败。

# php - 从 HTML 表单使用 PHP/AJAX 发送电子邮件

> ID：11283422
> 
> 赞同：4
> 
> 时间：2012-07-01T15:50:06.320
> 
> 标签：php, jquery, html, ajax

我想将用户填写的信息从 HTML 表单发送到我的电子邮件地址。据我了解，由于电子邮件工作方式的性质，这不能通过仅使用客户端编码来完成，并建议使用 PHP（结合 AJAX）来处理服务器端代码。我按照[此处](https://stackoverflow.com/questions/5051772/jquery-php-mail-send-the-easy-way)的指南进行操作，但我的电子邮件地址没有收到任何电子邮件。在将代码部署到客户的 Web 空间 (goDaddy) 之前，我正在我的机器上进行本地测试（使用 XAMPP）。我想指出我以前从未使用过 PHP。

Javascript：

```
var data = "This is my email";
$.ajax({
    type: "POST",
    url: "email.php",
    data: data,
    dataType: "text"
}); 
```

PHP（电子邮件.php）：

```
<?php
$to = "myself@hotmail.com";
$subject = "This is my email";
$message = $_REQUEST;
$send = mail($to, $subject, $message);
if(!$send){    
    die();  
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T15:56:44.307

您应该替换`$_REQUEST`为`$_REQUEST["data"]`或类似的东西，因为`$_REQUEST`它是一个数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T16:03:19.637

默认情况下，XAMPP 本身没有电子邮件发送功能。您可以查看以下链接；

[xampp中的php邮件设置](https://stackoverflow.com/questions/4652566/php-mail-setup-in-xampp)

[如何让 XAMPP 在本地使用 php 的 mail() 函数，这样我就可以在本地测试我的 mail() 脚本而无需上传到我的服务器？](https://stackoverflow.com/questions/4486155/how-do-i-enable-xampp-to-locally-use-the-phps-mail-function-so-i-can-test-my)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T12:35:30.463

页面一直在刷新。下面是我的代码：

HTML 5：

```
<form method="post" data-ajax="false">
<input type="text" name="email" placeholder="jack@example.com, jil@example.com">
<input type="submit" name="submit" value="Invite" class="submitBtn"> 
</form> 
```

JS：

```
$('form').bind('submit',function(){
$.ajax({
type    : 'POST',
url     : 'data/invite.php',
data    : $(this).serialize(),
cache   : false,
dataType: 'text',
success : function (serverResponse) { alert('mail sent successfully.'); },
error   : function (jqXHR, textStatus, errorThrown) {alert('error sending mail');}
});
}) 
```

PHP：

```
<?php
$to         = $_POST['mail'];
$name       = 'Indusnet Technologies';
$subject    = 'Think Recycle';
$text       = 'Welcome to our site';

$message =' You received  a mail from '.$name;
$message .='Text of the message : '.$text;

if(mail($to, $subject,$message)){
    echo 'mail successful send';
}
else{
    echo 'there’s some errors to send the mail, verify your server options';
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-05T21:12:09.183

您可能应该将 false 返回到表单。尝试这个：

```
$('form').submit(function(){
  $.ajax({
    type    : 'POST',
    url     : 'data/invite.php',
    data    : $(this).serialize(),
    cache   : false,
    dataType: 'text',
    success : function (serverResponse) { alert('mail sent successfully.'); },
    error   : function (jqXHR, textStatus, errorThrown) {alert('error sending mail');}
  });

return false;
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T08:05:13.647

```
var data = "This is my email";
$.ajax({
    type: "POST",
    url: "email.php",
    data: data,
    dataType: "text"
}); 
```

这段代码应该是这样的

```
var data = "This is my email";
$.ajax({
    type: "POST",
    url: "email.php",
    data: {"data": data},
    dataType: "text"
}); 
```

并通过 $_POST['data'] 或 $_REQUEST['data'] 获取代码

# wcf - Silverlight 项目中没有数据库选项

> ID：11283424
> 
> 赞同：0
> 
> 时间：2012-07-01T15:50:13.207
> 
> 标签：wcf, ria

我正在创建一个 silverlight 4 项目（带有网站）。当我尝试向项目添加数据源时，我在选项列表中看不到数据库选项。只有“服务”、“对象”和“共享点”选项。但是那里没有“数据库”选项。所以我无法在设计时绑定到数据库。

我想知道是什么原因，为什么会这样，是未安装的东西还是配置错误？

有人可以告诉我。

我正在使用 Visual Studio 2010 Professional。

谢谢

# cocos2d-iphone - 如何将 SneakyJoyStick 重置回其中心位置？

> ID：11283426
> 
> 赞同：0
> 
> 时间：2012-07-01T15:50:21.780
> 
> 标签：cocos2d-iphone, reset, joystick, touches

我需要知道如何将 SneakyJoyStick 重置回原来的中心位置。我遇到的问题是我有控制我的玩家的操纵杆，当玩家到达 TMX 地图上的门瓷砖时，我让它推动新场景/地图，当我尝试离开新场景/地图时出现问题，因为当我弹出场景（回到第一个场景）时，操纵杆仍然卡在门的方向上，所以它又把我推了进去，所以我基本上不能离开房间。我认为这与我最后一次触摸屏幕的地方有关，所以也许我需要清除触摸或其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T13:25:05.370

如果其他人有同样的问题，我找到了一种解决方法，`SneakyJoystick.h`如果您更改`@property (nonatomic, readonly) CGPoint velocity;`为，`@property (nonatomic, readwrite) CGPoint velocity;`那么您可以`JoyStickName.velocity = CGPointZero;`重置速度。更改`@property (nonatomic, readonly) CGPoint stickPosition;`为 然后使用`SneakyJoystick.h`将重置实际的“棒”图像。`@property (nonatomic, readwrite) CGPoint stickPosition;``JoyStickName.stickPosition = CGPointZero;`

# php - 用mysql隐藏显示div？

> ID：11283429
> 
> 赞同：1
> 
> 时间：2012-07-01T15:50:37.957
> 
> 标签：php, javascript, mysql, html

我希望能够在加载时不显示评论 div，当单击评论时，我希望它打开评论 div。

我该怎么做呢？我环顾四周，但是...我从阅读有关何时付诸行动中得到的所有信息仅适用于一个 div，该 div 观察每个帖子的内容 div 结果和单独的评论，如您在代码中看到的那样。

```
<?

$data = mysql_query("SELECT `i`.*, `a`.* FROM `Wall` `i` LEFT JOIN `WallComments` `a` ON (`i`.`ID` = `a`.`Comments_ID`) WHERE `i`.`Username` = '{$view}'");

while($Comments = mysql_fetch_array($data)){ 

$walldate = gmdate('g:i a j F, Y', ($Comments['WallDate']));
$postdate = gmdate('g:i a j F, Y', ($Comments['Date']));

        echo
        "<div id='Wall'><a class='menuLink' href='Profile.php?view={$Comments['MessageBy']}' onclick='return false;'>{$Comments['MessageBy']}</a> - On: {$walldate}<br />Wrote: {$Comments['Message']}</div><br /><br />

<div id='Wall'><br />Comments<br /><br />{$Comments['CommentUsername']} Commented - On: {$postdate}<br />Wrote: {$Comments['Post']}</div><hr><br />

        ";
      }
      ?> 
```

每次用户发表帖子时，它都会在数据库中插入新行，并在评论中插入相同的行，所以我需要它来自动制作 div 之类的东西，而不是让 div id=1 div id =2 之类的东西，这就是我得到的我在网上看到的一切。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T16:00:23.267

最初隐藏 div：

```
<div id='Wall' style="visibility: hidden;"> 
```

使用 JavaScript 让 div 出现：

```
<button onclick="document.getElementById('Wall').style.visibility='visible';">
Show
</button> 
```

您可以在锚标记中包含注释：

```
<a href="#" onclick="document.getElementById('Wall').style.visibility='visible';">
Comments here
</a> 
```

# c# - 在 Windows 应用程序的 Gridview 中打印徽标和数据

> ID：11283432
> 
> 赞同：0
> 
> 时间：2012-07-01T15:50:44.603
> 
> 标签：c#, .net, winforms

我有一个包含公司徽标的 Windows 窗体和一个列出一组记录（例如：200 条记录）的网格视图，下面是一组文本框和标签。

有没有办法打印所有东西，即带有gridview记录和文本框和标签的标志？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T01:03:19.353

是的，这是可以做到的。为了让您朝着正确的方向前进，您首先需要在表单上放置一个 PrintDocument 并连接它的 BeginPrint 和 PrintPage 事件。要使其正常工作，您可能希望打印预览而不是打印，因此您还需要一个 PrintPreviewDialog，其 Document 属性指向 PrintDocument。然后你可以调用以下来查看打印预览：

```
 printPreviewDialog1.ShowDialog(); 
```

我从现有的应用程序中挖出了下面的代码。

在 BeginPrint 处理程序中，您需要计算出网格的总宽度，以便在打印时可以相应地缩放它，类似于：

```
 totalWidth = 0;
    foreach (DataGridViewColumn col in dataGridView1.Columns)
      totalWidth += col.Width; 
```

在 PrintPage 处理程序中，您首先需要按照下面的代码行打印列标题。您可能希望将此代码包含在主循环（如下）中以在每一页上打印列标题。

```
 foreach (DataGridViewColumn col in dataGridView1.Columns)
      {
        e.Graphics.DrawString(col.HeaderText,
            col.InheritedStyle.Font,
            new SolidBrush(col.InheritedStyle.ForeColor),
            new RectangleF(l, t, w, h),
            format);
      } 
```

然后你可以打印每一行：

```
 while (row <= dataGridView1.Rows.Count - 1)
    {
      DataGridViewRow gridRow = dataGridView1.Rows[row];
      {
        foreach (DataGridViewCell cell in gridRow.Cells)
        {
          if (cell.Value != null)
          {
            if (cell is DataGridViewTextBoxCell)
              e.Graphics.DrawString(cell.Value.ToString(),
                  cell.InheritedStyle.Font,
                  new SolidBrush(cell.InheritedStyle.ForeColor),
                  new RectangleF(l, t, w, h),
                  format);
            else if (cell is DataGridViewImageCell)
              e.Graphics.DrawImage((Image)cell.Value,
                  new RectangleF(l, t, w, h));
          }
        }
      }
      row++;
    } 
```

需要注意的几点：

*   每个页面都会调用事件处理程序。您需要决定页面何时结束，并`e.HasMorePages = true`在适当时返回。变量“行”用于知道从下一页开始的行。您可能想要打印单元格边框
*   您需要跟踪要打印的矩形（上面我刚刚提到了'l，t，w，h'），以便为打印的每一列调整左侧，为打印的每一行调整顶部。此外，这是您将单元格宽度乘以`e.MarginBounds.Width / totalWidth`缩放每个单元格的地方。
*   我没有在上面做任何事情来保持图像的纵横比。

希望这可以帮助。

# actionscript-3 - 图像更改事件

> ID：11283447
> 
> 赞同：0
> 
> 时间：2012-07-01T15:52:57.023
> 
> 标签：actionscript-3, flash

我有一个 mx:Image 组件，我正在使用以下代码更改图片：

```
image.source = "path_to_picture"; 
```

这工作正常。现在我想知道，图片加载的时候，所以注册了一个COMPLETE-Event

```
image.addEventListener(Event.COMPLETE, completeHandler); 
```

但我不开火。我应该使用另一个事件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T16:00:39.433

在您添加侦听器之前，可能已经触发了 complete 事件。如果路径在您的本地磁盘上，那么它可能会加载得非常快。`image.percentLoaded`您可以通过在添加侦听器时进行跟踪来检查它是否已加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T13:19:41.500

这是一个国家问题。当我触发图像更改时，图像控件不处于可见状态，因此没有触发任何事件。该死的，弯曲;P

# c# - 连接表，插入和选择

> ID：11283455
> 
> 赞同：1
> 
> 时间：2012-07-01T15:54:22.637
> 
> 标签：c#, asp.net, sql, sql-server, relational-database

![在此处输入图像描述](../Images/5daaa7d10bfec96b23be3e1ffc3b58f9.png)

我正在自己学习这一点，并且我已经到了想要插入新类别和新国家/地区的地步，但我不知道该怎么做。

例如，要添加一个新类别，我会执行以下操作：

```
public int Insert()
{
    string sqlString = "INSERT INTO Categories (name, image) VALUES (@Name, @Image);";
    SqlConnection sqlConnection = new
       SqlConnection(ConfigurationManager.ConnectionStrings["OahuDB"].ConnectionString);
    SqlCommand sqlCommand = new SqlCommand(sqlString, sqlConnection);
    sqlCommand.Parameters.AddWithValue("@Name", this.Name);
    sqlCommand.Parameters.AddWithValue("@Image", this.Image);
    sqlConnection.Open();
    int x = sqlCommand.ExecuteNonQuery();
    sqlConnection.Close();
    sqlConnection.Dispose();
    return x;
} 
```

但是我应该如何插入两个表之间的关系，然后根据联结表检索数据呢？

如果您可以为此提供示例和好的教程，或者您可以详细说明一下。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T16:27:28.773

像这样发送 SQL：

```
INSERT INTO Categories (name, image) VALUES (@Name, @Image);
SELECT scope_identity() as NewCategoryId; 
```

这会将新添加的类别的 ID 作为行集返回。您可以使用熟悉的方法检索新 ID `ExecuteReader()`：

```
using (var read = sqlCommand.ExecuteReader())
{
    read.Read();
    int newCategoryId = (int) read["NewCategoryId"];
} 
```

甚至更短`ExecuteScalar()`：

```
int newId = (int)sqlCommand.ExecuteScalar(); 
```

顺便说一句，考虑将您的连接包装在`using`：

```
using (var sqlConnection = new SqlConnection("...connection string...")
{
    sqlConnection.Open();
    var sqlCommand = sqlConnection.CreateCommand();
    ...
} 
```

这有助于防止连接泄漏。无论是超时还是网络问题，其中一种方法总是有可能`Execute`引发异常。

# javascript - 全局变量 javascript，更快的 "varname" 或 "window.varname"

> ID：11283463
> 
> 赞同：1
> 
> 时间：2012-07-01T15:56:16.210
> 
> 标签：javascript, performance, scope, global

```
var testvar = 'boat';

function testA() {

    console.log(testvar);

}

function testB() {

    console.log(window.testvar);

} 
```

我知道如果我不放“窗口”。对于我的全局变量，然后 javascript 从方法 testA 开始搜索所有范围，直到找到变量 testvar，所以如果我执行 window.testvar 会使其更快，因为我直接告诉 javascript 在哪个范围中查找变量? 还是因为我首先告诉 javascript 查找窗口对象然后查找变量而变慢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T16:21:51.600

分别尝试下面的两个代码并亲自查看结果。实际上，这可能不是最准确的测试用例，但是通过避免所有其他操作并在足够长的 for 循环内进行简单分配，它应该足够准确。

我不得不说，我也很惊讶地发现，通过不指定`window`Chrome，第二个代码的执行速度持续提高了 20%。

**代码 1**

```
// window.testvar testcase.
window.testvar = 'Hi there! I am a testvar!';
var tmp;
var start = new Date();
for(var i = 0; i < 1000000; i++){
    tmp = window.testvar;
}
var stop = new Date();
console.log('This took exactlly ' + (stop.getTime() - start.getTime()) + ' milliseconds!'); 
```

**结果：**

*   1695毫秒
*   1715毫秒
*   1737毫秒
*   1704毫秒
*   1695毫秒

**代码 2**

```
// direct testvar testcase
testvar = 'Hi there! I am a testvar!';
var tmp;
var start = new Date();
for(var i = 0; i < 1000000; i++){
    tmp = testvar;
}
var stop = new Date();
console.log('This took exactlly ' + (stop.getTime() - start.getTime()) + ' milliseconds!'); 
```

**结果：**

*   1415毫秒
*   1450毫秒
*   1422毫秒
*   1428毫秒
*   1450毫秒

在 Chrome 20.0.1132.47 中测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T19:28:58.137

Vedaant 的 jsperf 没有帮助。它只是创建函数，而不是执行它们。试试这个：http: [//jsperf.com/epictest/9](http://jsperf.com/epictest/9)。它也表明不指定窗口更快。我还添加了一个测试来表明复制到局部变量的速度要快得多。改变循环计数器，看看你赢得的不仅仅是对全局的单一引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T16:08:05.673

Chrome 有一个有用的 javascript CPU 分析器。只需创建一个循环来运行该函数数千次并启动分析器。我猜差异很小，但这是确定的好方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T16:16:36.443

我刚刚为您做了一个 jsPerf 测试，请访问：http: [//jsperf.com/epictest](http://jsperf.com/epictest)。看起来

```
function testA() {

   console.log(testvar);

} 
```

有点快。

# java - 在java中使用动态变量解析文本

> ID：11283465
> 
> 赞同：1
> 
> 时间：2012-07-01T15:56:26.107
> 
> 标签：java, parsing, variables, text, dynamic-variables

我需要解析文本，并将变量放入其中。像这样的东西：

```
lorem ${var} dolor sit amet consectetur adipiscing elit 
```

结束`String var = "ipsum"`安装`${var}`

最简单的方法是什么？我将使用正则表达式和匹配器。但可能是弹簧（或其他东西）已经具有此功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T16:35:17.457

Java 标准类[MessageFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/MessageFormat.html)与您想要的比较接近，但它不处理任意占位符名称。如果需要，最好的选择确实是正则表达式。如果您不认为它们很快，我建议您在拒绝它们之前进行测量。这是一个大纲：

```
final Map<String, String> vars = new HashMap<String, String>();
vars.put("var", "ipsum");
final String s = "lorem ${var} dolor sit amet consectetur adipiscing elit";
final Matcher m = Pattern.compile("\\$\\{(.*?)\\}").matcher(s);
final StringBuffer b = new StringBuffer(s.length());
while (m.find()) m.appendReplacement(b, vars.get(m.group(1)));
m.appendTail(b);
System.out.println(b); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T16:01:26.000

`String`有一个用于正则表达式的内置包装器：`String replaceAll(String regex, String replacement)`

尝试：

```
 String result = "lorem ${var} dolor sit amet consectetur adipiscing elit".replaceAll("\\$\\{var\\}", "ipsum"); 
```

# android - 用于播放 Windows 媒体流的 Android 和 iOS 库 ( mms:// )

> ID：11283469
> 
> 赞同：1
> 
> 时间：2012-07-01T15:56:44.093
> 
> 标签：android, ios, mms, mms-gateway

我需要在 android 和 iOS 中播放 windows 媒体。我做了搜索，只是找到了一些商业图书馆。

有人知道一些免费/开源库，用于在 android 和 iOS 中播放 mms:// 吗？

# eclipse - 你如何将ada安装到eclipse中？

> ID：11283473
> 
> 赞同：4
> 
> 时间：2012-07-01T15:57:49.920
> 
> 标签：eclipse, ada

我已经尝试了很多网站来让 GNATBench 进入我的 Eclipse IDE，但似乎找不到正确的链接。如果我可以通过 ide 中的帮助菜单下载它，那将是完美的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T13:52:22.180

Eclipse Marketplace 网站上没有任何乐趣。

Gnatbench 2.6 在那里，但没有可见/可管理的下载方式。

所以去：

[http://libre.adacore.com/download/configurations](http://libre.adacore.com/download/configurations)

单击 GNAT 2012 和 GNATBench 2.6.0，确保所有组成包也被选中。单击 GNAT 和 GNATBench 的“源”。然后为每个选择所有包。

通过相同的过程选择并检查您感兴趣的所有其他包。

单击“下载选定文件”并将下载文件夹保存在桌面上。将下载文件夹移动到您的管理员帐户，解压缩，阅读 README 文件并首先安装 GNAT 2012。然后解压缩 GNATBench 2.6，阅读 README 并开始从 Eclipse 安装它：

打开 Eclipse。帮助 > 添加 > 本地 > 现在浏览到解压缩的 GNATBench 所在的文件夹。单击确定。

这将使您返回 Eclipse 安装窗口，您将看到 GNATBench 安装单元列在该窗口的中心。仅检查适用于 Eclipse/CDT 的 AdaCore 插件的 GNATBench 选项。不选中 WindRiver 界面 -- 除非您的 PC 上安装了 WindRiver。完成安装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-14T17:36:48.880

打开 Eclipse。帮助 > 添加 > 本地 > 现在浏览到解压缩的 GNATBench 所在的文件夹。单击确定。

应该

打开 Eclipse。帮助 > 添加 > 存档并浏览压缩后的 GNATBench 所在的文件夹。至少这对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-17T21:29:44.960

如果您使用的是 Mac OS X，您可能在列表中找不到可用的 gnatbench，您需要从 2012 年到 2014 年的 x86 Windows（32 位）和 GNAT GPL 中获取它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-26T18:08:49.747

在 Eclipse IDE for Windows 10 Professional 64 位环境下安装 Ada 的 GNATbench 插件期间，我使用了一些提示来最终解决问题......

查看第 5 步的安装说明：

1.  仅使用 32 位版本的 GNATbench (2014: [https://www.adacore.com/download/more](https://www.adacore.com/download/more) gnatbench-2.8.1-bin.zip) [平台是 x86 Windows (32-bit)]

2.  安装最新的 64 位和 32 位版本的 Oracle JDK 8
    [https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html](https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html)

3.  仅使用 32 位版本的 Eclipse（Oxygen.3a Release (4.7.3a)： [https ://www.eclipse.org/downloads/download.php?file=/technology/epp/downloads/release/oxygen/3a /eclipse-java-oxygen-3a-win32.zip](https://www.eclipse.org/downloads/download.php?file=/technology/epp/downloads/release/oxygen/3a/eclipse-java-oxygen-3a-win32.zip) )

4.  安装 C/C++ Eclipse 工具集

5.  按照此处的安装说明进行操作：http: [//docs.adacore.com/live/wave/gnatbench-src/html/gnatbench_ug/src/getting_started/getting_started.html#](http://docs.adacore.com/live/wave/gnatbench-src/html/gnatbench_ug/src/getting_started/getting_started.html#)

在多次尝试使用 64 位版本的 Eclipse IDE（版本：2018-09 (4.9)）之后，这最终对我有用

# c# - 使用未赋值的局部变量

> ID：11283477
> 
> 赞同：1
> 
> 时间：2012-07-01T15:58:35.210
> 
> 标签：c#, arrays, winforms

当我尝试调试此代码（在 C# WinForms 中）时，它显示错误

> “使用未分配的局部变量”在**“arrlist [i]”**

由于我将它与数据库变量进行比较，因此我无法初始化数组的大小。

这是代码：

```
if (count != 0)
{
    OleDbCommand cmd1 = new OleDbCommand(
        "select seat_no, booking_date, show_time "+
        "from tickets "+
        "where ticket_no = (select max(ticket_no) from tickets)", c);
    OleDbDataReader oledb1 = cmd1.ExecuteReader();
    oledb1.Read();
    string retr_seats = oledb1.GetString(0);
    char comma = ',';
    string[] strarray = retr_seats.Split(comma);
    int ticket_length = strarray.Length;
    string[] arrlist;
    int i = 0;      
    foreach(var control in this.Controls)
    {
        if(control is Label)
        {           
            arrlist[i] = control.ToString();
            i++;
        }
   }       
   for(var j=0;j<=ticket_length;j++)
   {
       for (var k = 0; k <= i-1; k++)
       {
            if (arrlist[k].Contains(strarray[j]))
            {
                MessageBox.Show(strarray[j]);
            }
       }
   }
} 
```

请帮我

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-01T16:00:51.823

您需要初始化变量`arrlist`。更改此行：

```
string[] arrlist; 
```

对此：

```
string[] arrlist = new string[this.Controls.Count]; // Must be big enough. 
```

* * *

或者更好的是，使用动态大小的容器，例如`List<string>`.

```
List<string> arrList = new List<string>();
foreach(var control in this.Controls)
{
    if(control is Label)
    {
        arrlist.Add(control.ToString());
    }
} 
```

* * *

或者使用 LINQ 直接获取结果：

```
string[] arrlist = this.Controls
    .OfType<Label>()
    .Select(control => control.ToString())
    .ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T16:09:24.067

将数组更改为列表，并将值添加到列表中。然后您可以直接索引列表元素，或者如果您需要一个数组，您可以`.ToArray()`在列表实例上使用。

另请注意，除非您将比较更改为from ，否则您的 for 循环`j`将超出范围。`strarray``< ticket_length``<= ticket_length`

```
...

var arrlist = new List<string>();

foreach(var control in this.Controls) 
if(control is Label) 
{ 
    arrlist.Add(control.ToString()); 
} 

for(var j=0;j<ticket_length;j++)  
    for (var k = 0; k < arrlist.Count; k++)  
        if (arrlist[k].Contains(strarray[j]))  
             MessageBox.Show(strarray[j]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T16:02:23.740

字符串[] 列表；.... arrlist[i] = control.ToString();

您丢失了初始化，例如： arrlist = new string[count];

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T16:02:31.523

问题是 arrlist 已定义，但未初始化。

您需要初始化它，如下所示：

```
string[] arrlist = new arrlist[size]; 
```

如果你不知道它会有多大，最好使用一个列表：

```
List<string> arrlist = new List<string>(); 
```

并添加项目：`arrlist.add("some string");`

# iphone - 如何制作表情符号应用程序？(iOS)

> ID：11283481
> 
> 赞同：-3
> 
> 时间：2012-07-01T15:59:16.177
> 
> 标签：iphone, ios, keyboard, emoji

> **可能重复：**
> [制作表情符号启用应用程序](https://stackoverflow.com/questions/1225514/making-an-emoji-enabeling-app)

我想了解如何使用代码创建表情符号类型的应用程序。但我似乎无法找到它的教程。所以我想我会在这里问是否有人会帮助我。我也有 Xcode 和 99 美元的许可证，可以在我的设备上进行测试。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T16:11:19.947

Emoji 字符只是 Unicode 字符，只是随着您在 iOS 历史中的倒退而提供更有限的支持。要使用键盘输入表情符号，iOS 5 和 6 提供了系统标准的表情符号键盘（设置>通用>国际>键盘>表情符号）。在代码中，任何标准文本渲染对象都会显示您传递给它们的大多数转义字符：

```
UITextView *example = [[UITextView alloc]initWithFrame:CGRectMake(0,0,320,460)];
[example setText:@"\U0001F604"];
[self.view addSubview: example]; 
```

就那么简单。

请注意，在 iOS 5 之前，作为 Emojis 呈现和发送的文本会利用 iOS 私有 Unicode 空间，这意味着任何不在 iOS 设备上的人都会得到很多 ? 和 [] 代替字符。请参阅[此处](https://stackoverflow.com/questions/1225514/making-an-emoji-enabeling-app)，了解在商店中的大多数表情符号应用程序中启用表情符号键盘的技巧。

# javascript - 获取背景图像以调整页面大小

> ID：11283483
> 
> 赞同：0
> 
> 时间：2012-07-01T15:59:27.837
> 
> 标签：javascript, jquery, css

我正在寻找一种方法来让背景图像调整为页面大小（注意：不仅仅是浏览器窗口大小）。例如说页面加载，页面高度需要滚动。考虑到屏幕可见部分下方的内容，有没有办法调整背景图像的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T16:11:41.803

如果使用 CSS3 不是问题：

```
$('body').css('background-size', document.width+'px '+document.height+'px');​ 
```

[小提琴](http://jsfiddle.net/UpAv2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T16:14:19.880

如果您不需要支持 IE8 或更早版本：

```
body {
    background: url(image.jpg) no-repeat 0 0;
    background-size: auto 100%;
} 
```

这样可以保持图像的纵横比，因此图像不一定会覆盖页面的整个宽度。

# ios - 将数据从 plist 加载到 tableview

> ID：11283486
> 
> 赞同：1
> 
> 时间：2012-07-01T15:59:43.320
> 
> 标签：ios, objective-c, xcode, tableview, plist

> **可能重复：**
> [如何使用 plist 填充 UITableView](https://stackoverflow.com/questions/8133812/how-to-populate-uitableview-with-plist)

我像这样将数据保存到 plist：

```
- (IBAction)save:(id)sender
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);

    NSString *documentsPath = [paths objectAtIndex:0];
    NSString *plistPath = [documentsPath stringByAppendingPathComponent:@"data.plist"];
    NSMutableArray *data = [NSMutableArray arrayWithContentsOfFile:plistPath];

    if (nil == data) {
        data = [[NSMutableArray alloc] initWithCapacity:0];
    }
    else {
        [data retain];
    }

    NSMutableDictionary *array = [[NSMutableDictionary alloc]init];
    [array setObject:label1.text forKey:@"Test1"];
    [array setObject:label2.text forKey:@"Test2"];
    [array setObject:label3.text forKey:@"Test3"];
    [array setObject:label4.text forKey:@"Test4"];

    NSLog(@"%@", array);
    [data addObject:array];
    [array release];

    [data writeToFile:plistPath atomically: TRUE];
    [data release];
} 
```

NS日志：

```
2012-07-01 18:52:19.566 testapp[22651:707] {
    Test1 = 40;
    Test2 = 102;
    Test3 = 153;
    Test4 = 255;
} 
```

如何将保存的数据加载到`uitableview`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T16:29:46.027

要阅读它，请执行以下操作：

```
NSMutableDictionary* plistDict = [[NSMutableDictionary alloc] initWithContentsOfFile:plistPath]; 
```

然后，您应该能够读取所有键的值，如下所示：

```
NSString *myValue = [plistDict objectForKey:@"someKey"]; 
```

**编辑：**

重新阅读您的代码后，您似乎正在做一些您不想做的事情。您当前的 plist 结构是一个顶级数组，每次调用“保存”时都会为其自身添加一个字典。这是你想要做的吗？如果是这样，什么代表表格中的单元格，数组中的索引？

如果是这样，那么你想做

```
// top level array
NSMutableDictionary* plistArray = [[NSMutableDictionary alloc] initWithContentsOfFile:plistPath];

// individual dictionary at one array index (such as indexPath.row in cellForRowAtIndexPath)
NSMutableDictionary *dictionary = [plistArray objectAtIndex:yourIndex]; 
```

在任何情况下，您命名为“array”的对象实际上是一个字典，因此您应该重命名它（或者如果您想要的话，将其更改为一个数组）。

# python - 在特定条件下附加到列表

> ID：11283488
> 
> 赞同：0
> 
> 时间：2012-07-01T15:59:50.420
> 
> 标签：python

我正在尝试制作一个程序，当满足某些条件时，该值将附加到列表中。

前任：

假设最后一个限制是 1000 如果计数值是 50 的倍数，则从 1 开始计数，将其附加到列表中

所以列表应该有数字，50,100,150,200 ......等等......我被困在第三步，我怎么让python知道这个值是50的倍数

谢谢你帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T16:01:47.937

使用`%`operator ，它返回余数。因此，如果一个数字是 50 的倍数，那么它的余数将为 0，除非数字本身为 0。（即 0 除以 50 将得到 0 作为余数）

```
>>> lis=[]
>>> for x in range(1,1001):
      if x%50==0:        
        lis.append(x)
>>> lis
[50, 100, 150, 200, 250, 300, 350, 400, 450, 500, 550, 600, 650, 700, 750, 800, 850, 900, 950, 1000] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T16:04:43.840

如果一个 int`i`是 50 的倍数，那么根据定义，它除以 50 时余数为零 - Python 与大多数编程语言一样，有一个[模运算符](http://docs.python.org/reference/expressions.html#binary-arithmetic-operations)来准确检查 - “ia 是 50 的倍数吗？” 拼写为：

```
if i % 50 != 0:
   # i is a multiple of 50 
```

或等效地：

```
if not i % 50:
   # i is a multiple of 50 
```

您使用哪一个取决于您将其视为“余数为零”还是“没有余数”-但它们总是会给出相同的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T16:10:31.427

```
>>>a = [i for i in range(1,1001) if i%50==0]
>>>print a 
```

或者

```
>>>a = [i for i in range(1,1001) if not i%50]
>>>print a 
```

# jaxb - WebLogic clientgen 在 WebLogic 中不起作用

> ID：11283489
> 
> 赞同：2
> 
> 时间：2012-07-01T15:59:57.310
> 
> 标签：jaxb, weblogic, jax-ws

我正在使用**clientgen** ant 任务（它是 WebLogic 的一部分）从 WSDL 生成 JAX-WS 客户端。当我在命令行和类路径中使用 wlfullclient.jar 时，生成的代码运行良好。但它不适用于部署到生成 wlfullclient.jar 的同一实例的 EJB。错误很长，看起来像链接到类加载器，这很烦人，因为我使用的是相同的 JAVA 版本和其他嵌入 WebLogic 的库。关于什么是错的任何想法？
错误日志是：

```
<1341096792539> <BEA-010065> <MessageDrivenBean threw an Exception in onMessage(). The exception was:
java.lang.ExceptionInInitializerError.
java.lang.ExceptionInInitializerError
                at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
                at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
                at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
                at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
                at java.lang.Class.newInstance0(Class.java:355)
                at java.lang.Class.newInstance(Class.java:308)
                at javax.xml.ws.spi.FactoryFinder.newInstance(FactoryFinder.java:36)
                at javax.xml.ws.spi.FactoryFinder.find(FactoryFinder.java:95)
                at javax.xml.ws.spi.Provider.provider(Provider.java:83)
                at javax.xml.ws.Service.<init>(Service.java:56)
                at s.mra.ws.client.proxy.MRADataExchangeService.<init>(MRADataExchangeService.java:115)
                at s.mra.ws.client.impl.WSMraClient.initialize(WSMraClient.java:222)
                at s.mra.ws.client.impl.WSMraClient.sendMessageToWS(WSMraClient.java:93)
                at s.mra.message.router.WSMessageRouterBean.onMessage(WSMessageRouterBean.java:171)
                at weblogic.ejb.container.internal.MDListener.execute(MDListener.java:466)
                at weblogic.ejb.container.internal.MDListener.transactionalOnMessage(MDListener.java:371)
                at weblogic.ejb.container.internal.MDListener.onMessage(MDListener.java:327)
                at weblogic.jms.client.JMSSession.onMessage(JMSSession.java:4547)
                at weblogic.jms.client.JMSSession.execute(JMSSession.java:4233)
                at weblogic.jms.client.JMSSession.executeMessage(JMSSession.java:3709)
                at weblogic.jms.client.JMSSession.access$000(JMSSession.java:114)
                at weblogic.jms.client.JMSSession$UseForRunnable.run(JMSSession.java:5058)
                at weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:516)
                at weblogic.work.ExecuteThread.execute(ExecuteThread.java:201)
                at weblogic.work.ExecuteThread.run(ExecuteThread.java:173)
javax.xml.ws.WebServiceException: Error creating JAXBContext for W3CEndpointReference.
                at com.sun.xml.ws.spi.ProviderImpl$2.run(ProviderImpl.java:226)
                at com.sun.xml.ws.spi.ProviderImpl$2.run(ProviderImpl.java:221)
                at java.security.AccessController.doPrivileged(Native Method)
                at com.sun.xml.ws.spi.ProviderImpl.getEPRJaxbContext(ProviderImpl.java:221)
                at com.sun.xml.ws.spi.ProviderImpl.<clinit>(ProviderImpl.java:88)
                at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
                at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
                at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
                at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
                at java.lang.Class.newInstance0(Class.java:355)
                at java.lang.Class.newInstance(Class.java:308)
                at javax.xml.ws.spi.FactoryFinder.newInstance(FactoryFinder.java:36)
                at javax.xml.ws.spi.FactoryFinder.find(FactoryFinder.java:95)
                at javax.xml.ws.spi.Provider.provider(Provider.java:83)
                at javax.xml.ws.Service.<init>(Service.java:56)
                at s.mra.ws.client.proxy.MRADataExchangeService.<init>(MRADataExchangeService.java:115)
                at s.mra.ws.client.impl.WSMraClient.initialize(WSMraClient.java:222)
                at s.mra.ws.client.impl.WSMraClient.sendMessageToWS(WSMraClient.java:93)
                at s.mra.message.router.WSMessageRouterBean.onMessage(WSMessageRouterBean.java:171)
                at weblogic.ejb.container.internal.MDListener.execute(MDListener.java:466)
                at weblogic.ejb.container.internal.MDListener.transactionalOnMessage(MDListener.java:371)
                at weblogic.ejb.container.internal.MDListener.onMessage(MDListener.java:327)
                at weblogic.jms.client.JMSSession.onMessage(JMSSession.java:4547)
                at weblogic.jms.client.JMSSession.execute(JMSSession.java:4233)
                at weblogic.jms.client.JMSSession.executeMessage(JMSSession.java:3709)
                at weblogic.jms.client.JMSSession.access$000(JMSSession.java:114)
                at weblogic.jms.client.JMSSession$UseForRunnable.run(JMSSession.java:5058)
                at weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:516)
                at weblogic.work.ExecuteThread.execute(ExecuteThread.java:201)
                at weblogic.work.ExecuteThread.run(ExecuteThread.java:173)
javax.xml.bind.JAXBException
- with linked exception:
[com.sun.xml.bind.v2.runtime.IllegalAnnotationsException: 2 counts of IllegalAnnotationExceptions
org.w3c.dom.Element is an interface, and JAXB can't handle interfaces.
                this problem is related to the following location:
                                at org.w3c.dom.Element
                                at public java.util.List com.sun.xml.ws.developer.MemberSubmissionEndpointReference$Elements.elements
                                at com.sun.xml.ws.developer.MemberSubmissionEndpointReference$Elements
                                at public com.sun.xml.ws.developer.MemberSubmissionEndpointReference$Elements com.sun.xml.ws.developer.MemberSubmissionEndpointReference.referenceProperties
                                at com.sun.xml.ws.developer.MemberSubmissionEndpointReference
org.w3c.dom.Element does not have a no-arg default constructor.
                this problem is related to the following location:
                                at org.w3c.dom.Element
                                at public java.util.List com.sun.xml.ws.developer.MemberSubmissionEndpointReference$Elements.elements
                                at com.sun.xml.ws.developer.MemberSubmissionEndpointReference$Elements
                                at public com.sun.xml.ws.developer.MemberSubmissionEndpointReference$Elements com.sun.xml.ws.developer.MemberSubmissionEndpointReference.referenceProperties
                                at com.sun.xml.ws.developer.MemberSubmissionEndpointReference
]
                at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:226)
                at javax.xml.bind.ContextFinder.find(ContextFinder.java:372)
                at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:574)
                at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:522)
                at com.sun.xml.ws.spi.ProviderImpl$2.run(ProviderImpl.java:224)
                at com.sun.xml.ws.spi.ProviderImpl$2.run(ProviderImpl.java:221)
                at java.security.AccessController.doPrivileged(Native Method)
                at com.sun.xml.ws.spi.ProviderImpl.getEPRJaxbContext(ProviderImpl.java:221)
                at com.sun.xml.ws.spi.ProviderImpl.<clinit>(ProviderImpl.java:88)
                at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
                at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
                at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
                at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
                at java.lang.Class.newInstance0(Class.java:355)
                at java.lang.Class.newInstance(Class.java:308)
                at javax.xml.ws.spi.FactoryFinder.newInstance(FactoryFinder.java:36)
                at javax.xml.ws.spi.FactoryFinder.find(FactoryFinder.java:95)
                at javax.xml.ws.spi.Provider.provider(Provider.java:83)
                at javax.xml.ws.Service.<init>(Service.java:56)
                at s.mra.ws.client.proxy.MRADataExchangeService.<init>(MRADataExchangeService.java:115)
                at s.mra.ws.client.impl.WSMraClient.initialize(WSMraClient.java:222)
                at s.mra.ws.client.impl.WSMraClient.sendMessageToWS(WSMraClient.java:93)
                at s.mra.message.router.WSMessageRouterBean.onMessage(WSMessageRouterBean.java:171)
                at weblogic.ejb.container.internal.MDListener.execute(MDListener.java:466)
                at weblogic.ejb.container.internal.MDListener.transactionalOnMessage(MDListener.java:371)
                at weblogic.ejb.container.internal.MDListener.onMessage(MDListener.java:327)
                at weblogic.jms.client.JMSSession.onMessage(JMSSession.java:4547)
                at weblogic.jms.client.JMSSession.execute(JMSSession.java:4233)
                at weblogic.jms.client.JMSSession.executeMessage(JMSSession.java:3709)
                at weblogic.jms.client.JMSSession.access$000(JMSSession.java:114)
                at weblogic.jms.client.JMSSession$UseForRunnable.run(JMSSession.java:5058)
                at weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:516)
                at weblogic.work.ExecuteThread.execute(ExecuteThread.java:201)
                at weblogic.work.ExecuteThread.run(ExecuteThread.java:173)
com.sun.xml.bind.v2.runtime.IllegalAnnotationsException: 2 counts of IllegalAnnotationExceptions
org.w3c.dom.Element is an interface, and JAXB can't handle interfaces.
                this problem is related to the following location:
                                at org.w3c.dom.Element
                                at public java.util.List com.sun.xml.ws.developer.MemberSubmissionEndpointReference$Elements.elements
                                at com.sun.xml.ws.developer.MemberSubmissionEndpointReference$Elements
                                at public com.sun.xml.ws.developer.MemberSubmissionEndpointReference$Elements com.sun.xml.ws.developer.MemberSubmissionEndpointReference.referenceProperties
                                at com.sun.xml.ws.developer.MemberSubmissionEndpointReference
org.w3c.dom.Element does not have a no-arg default constructor.
                this problem is related to the following location:
                                at org.w3c.dom.Element
                                at public java.util.List com.sun.xml.ws.developer.MemberSubmissionEndpointReference$Elements.elements
                                at com.sun.xml.ws.developer.MemberSubmissionEndpointReference$Elements
                                at public com.sun.xml.ws.developer.MemberSubmissionEndpointReference$Elements com.sun.xml.ws.developer.MemberSubmissionEndpointReference.referenceProperties
                                at com.sun.xml.ws.developer.MemberSubmissionEndpointReference

                at com.sun.xml.bind.v2.runtime.IllegalAnnotationsException$Builder.check(IllegalAnnotationsException.java:102)
                at com.sun.xml.bind.v2.runtime.JAXBContextImpl.getTypeInfoSet(JAXBContextImpl.java:438)
                at com.sun.xml.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:286)
                at com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:139)
                at com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:117)
                at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
                at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
                at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
                at java.lang.reflect.Method.invoke(Method.java:597)
                at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:211)
                at javax.xml.bind.ContextFinder.find(ContextFinder.java:372)
                at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:574)
                at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:522)
                at com.sun.xml.ws.spi.ProviderImpl$2.run(ProviderImpl.java:224)
                at com.sun.xml.ws.spi.ProviderImpl$2.run(ProviderImpl.java:221)
                at java.security.AccessController.doPrivileged(Native Method)
                at com.sun.xml.ws.spi.ProviderImpl.getEPRJaxbContext(ProviderImpl.java:221)
                at com.sun.xml.ws.spi.ProviderImpl.<clinit>(ProviderImpl.java:88)
                at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
                at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
                at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
                at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
                at java.lang.Class.newInstance0(Class.java:355)
                at java.lang.Class.newInstance(Class.java:308)
                at javax.xml.ws.spi.FactoryFinder.newInstance(FactoryFinder.java:36)
                at javax.xml.ws.spi.FactoryFinder.find(FactoryFinder.java:95)
                at javax.xml.ws.spi.Provider.provider(Provider.java:83)
                at javax.xml.ws.Service.<init>(Service.java:56)
                at s.mra.ws.client.proxy.MRADataExchangeService.<init>(MRADataExchangeService.java:115)
                at s.mra.ws.client.impl.WSMraClient.initialize(WSMraClient.java:222)
                at s.mra.ws.client.impl.WSMraClient.sendMessageToWS(WSMraClient.java:93)
                at s.mra.message.router.WSMessageRouterBean.onMessage(WSMessageRouterBean.java:171)
                at weblogic.ejb.container.internal.MDListener.execute(MDListener.java:466)
                at weblogic.ejb.container.internal.MDListener.transactionalOnMessage(MDListener.java:371)
                at weblogic.ejb.container.internal.MDListener.onMessage(MDListener.java:327)
                at weblogic.jms.client.JMSSession.onMessage(JMSSession.java:4547)
                at weblogic.jms.client.JMSSession.execute(JMSSession.java:4233)
                at weblogic.jms.client.JMSSession.executeMessage(JMSSession.java:3709)
                at weblogic.jms.client.JMSSession.access$000(JMSSession.java:114)
                at weblogic.jms.client.JMSSession$UseForRunnable.run(JMSSession.java:5058)
                at weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:516)
                at weblogic.work.ExecuteThread.execute(ExecuteThread.java:201)
                at weblogic.work.ExecuteThread.run(ExecuteThread.java:173)
> 

<1341096792650> <BEA-010065> <MessageDrivenBean threw an Exception in onMessage(). The exception was:
java.lang.NoClassDefFoundError: Could not initialize class weblogic.wsee.jaxws.spi.WLSProvider.
java.lang.NoClassDefFoundError: Could not initialize class weblogic.wsee.jaxws.spi.WLSProvider
                at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
                at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
                at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
                at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
                at java.lang.Class.newInstance0(Class.java:355)
                at java.lang.Class.newInstance(Class.java:308)
                at javax.xml.ws.spi.FactoryFinder.newInstance(FactoryFinder.java:36)
                at javax.xml.ws.spi.FactoryFinder.find(FactoryFinder.java:95)
                at javax.xml.ws.spi.Provider.provider(Provider.java:83)
                at javax.xml.ws.Service.<init>(Service.java:56)
                at s.mra.ws.client.proxy.MRADataExchangeService.<init>(MRADataExchangeService.java:115)
                at s.mra.ws.client.impl.WSMraClient.initialize(WSMraClient.java:222)
                at s.mra.ws.client.impl.WSMraClient.sendMessageToWS(WSMraClient.java:93)
                at s.mra.message.router.WSMessageRouterBean.onMessage(WSMessageRouterBean.java:171)
                at weblogic.ejb.container.internal.MDListener.execute(MDListener.java:466)
                at weblogic.ejb.container.internal.MDListener.transactionalOnMessage(MDListener.java:371)
                at weblogic.ejb.container.internal.MDListener.onMessage(MDListener.java:327)
                at weblogic.jms.client.JMSSession.onMessage(JMSSession.java:4547)
                at weblogic.jms.client.JMSSession.execute(JMSSession.java:4233)
                at weblogic.jms.client.JMSSession.executeMessage(JMSSession.java:3709)
                at weblogic.jms.client.JMSSession.access$000(JMSSession.java:114)
                at weblogic.jms.client.JMSSession$UseForRunnable.run(JMSSession.java:5058)
                at weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:516)
                at weblogic.work.ExecuteThread.execute(ExecuteThread.java:201)
                at weblogic.work.ExecuteThread.run(ExecuteThread.java:173)
> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:35:40.823

问题是通过类加载 JAXB 库覆盖的。依赖项清理后，它工作正常。

# android - ListView 和适配器

> ID：11283506
> 
> 赞同：1
> 
> 时间：2012-07-01T16:02:54.863
> 
> 标签：android, android-listview

我为 ListView 创建了自己的适配器。ListView 的每一行由两个 TextVew 表示。我需要在我的 ListView 中显示一些信息。

这是我的活动代码：

```
public class MyCountriesActivity extends ListActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);    
        int row_ID = R.layout.list_item;
        ListAdapter adapt = new MyAdapter(this,row_ID); 
        setListAdapter(adapt);
        }
} 
```

这是我的适配器代码：

```
public class MyAdapter extends ArrayAdapter<String> {

    Activity a;
    int row_ID;
    String[] countries = { "USA", "France" };
    String[] years = { "1992", "2010" };

    public MyAdapter(Context context, int textViewResourceId) {
        super(context, textViewResourceId);
        a = (Activity) context;
        row_ID = textViewResourceId;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row;
        if (convertView == null) { // Create new row view
            LayoutInflater inflater = a.getLayoutInflater();
            row = inflater.inflate(row_ID, parent, false);
        } else
            // reuse old row view to save time/battery
            row = convertView;

        /* Add new data to row object */
        TextView country = (TextView) row.findViewById(R.id.country);
        TextView year = (TextView) row.findViewById(R.id.year);
        country.setText(countries[position]);
        year.setText(years[position]);
        return row;
    }
} 
```

但不幸的是，这个应用程序崩溃了。我的程序有什么问题？

**日志：**

```
03-04 17:41:11.044: E/AndroidRuntime(1277): FATAL EXCEPTION: main
03-04 17:41:11.044: E/AndroidRuntime(1277): java.lang.RuntimeException: Unable to start activity ComponentInfo{android.ledinov.namespace/android.ledinov.namespace.MyCountriesActivity}: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
03-04 17:41:11.044: E/AndroidRuntime(1277):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
03-04 17:41:11.044: E/AndroidRuntime(1277):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
03-04 17:41:11.044: E/AndroidRuntime(1277):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
03-04 17:41:11.044: E/AndroidRuntime(1277):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
03-04 17:41:11.044: E/AndroidRuntime(1277):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-04 17:41:11.044: E/AndroidRuntime(1277):     at android.os.Looper.loop(Looper.java:137)
03-04 17:41:11.044: E/AndroidRuntime(1277):     at android.app.ActivityThread.main(ActivityThread.java:4424)
03-04 17:41:11.044: E/AndroidRuntime(1277):     at java.lang.reflect.Method.invokeNative(Native Method)
03-04 17:41:11.044: E/AndroidRuntime(1277):     at java.lang.reflect.Method.invoke(Method.java:511)
03-04 17:41:11.044: E/AndroidRuntime(1277):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-04 17:41:11.044: E/AndroidRuntime(1277):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-04 17:41:11.044: E/AndroidRuntime(1277):     at dalvik.system.NativeStart.main(Native Method)
03-04 17:41:11.044: E/AndroidRuntime(1277): Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
03-04 17:41:11.044: E/AndroidRuntime(1277):     at android.app.ListActivity.onContentChanged(ListActivity.java:243)
03-04 17:41:11.044: E/AndroidRuntime(1277):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:254)
03-04 17:41:11.044: E/AndroidRuntime(1277):     at android.app.Activity.setContentView(Activity.java:1835)
03-04 17:41:11.044: E/AndroidRuntime(1277):     at android.ledinov.namespace.MyCountriesActivity.onCreate(MyCountriesActivity.java:21)
03-04 17:41:11.044: E/AndroidRuntime(1277):     at android.app.Activity.performCreate(Activity.java:4465)
03-04 17:41:11.044: E/AndroidRuntime(1277):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
03-04 17:41:11.044: E/AndroidRuntime(1277):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
03-04 17:41:11.044: E/AndroidRuntime(1277):     ... 11 more 
```

**主.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

    <ListView
        android:id="@+id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1" >
    </ListView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T16:14:51.903

如果我猜你在布局文件或行布局文件中没有`ListView`带有 id 的元素， ，可能不是由单个元素组成，并且在这种情况下会崩溃，因为它需要一个元素。`@android:id/list``R.layout.main``R.layout.list_item``Textview``ArrayAdapter``ClassCastException``TextView`

此外，您可能希望将此方法添加到您的适配器：

```
public void getCount() {
  return countries.length;
} 
```

否则，即使您的应用程序可以运行，您也不会在`ListView`. 如果你有两个`TextViews`，`R.layout.list_item`这是错误的。像这样修改适配器：

```
public MyAdapter(Context context, int textViewResourceId, int textId) {
        super(context, textViewResourceId, textId);
        a = (Activity) context;
        row_ID = textViewResourceId;
} 
```

以及实例化适配器的位置：

```
int row_ID = R.layout.list_item;
int theId = R.id.the_id_of_one_of_the_textview_fromthelayout_above; (the id of the TextView from the R.layout.list_item)
ListAdapter adapt = new MyAdapter(this,row_ID, theId); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T16:27:16.683

试试这个方法

```
public class MyAdapter extends ArrayAdapter<String> {

    Activity a;
    int row_ID;
    String[] countries = { "USA", "France" };
    String[] years = { "1992", "2010" };

    public MyAdapter(Context context, int textViewResourceId) {
        super(context, textViewResourceId);
        this.context = context;
        row_ID = textViewResourceId;
    }

public View getView(int position, View convertView, ViewGroup parent) {

View row = convertView;

Holder ho = null;

if (row == null )
{

LayoutInflater inflater = ((Activity)context).getLayoutInflater();
row = inflater.inflate(row_ID, parent, false);

ho = new Holder();

txtCountry = (TextView) row.findViewById(R.id.country);
txtYear = (TextView) row.findViewById(R.id.year);

row.setTag(ho);

}

else{

  ho = (Holder)row.getTag();

}

txtCountry.setText(countries[position]);
txtYear.setText(years[position]);

return row;
}

static class Holder
    {
        TextView txtCountry;
        TextView txtYear;
    }

} 
```

# php - 插入和选择嵌套查询中的 SQL 语法错误

> ID：11283507
> 
> 赞同：1
> 
> 时间：2012-07-01T16:02:58.100
> 
> 标签：php, mysql

我有这个查询：

```
$FullName = mysql_real_escape_string($_REQUEST['name']);
$EmailAdd = mysql_real_escape_string($_REQUEST['email_address']);
$City = mysql_real_escape_string($_REQUEST['city']);
$State = mysql_real_escape_string($_REQUEST['state']);

$SqlEInsert= "INSERT INTO `td_email` VALUES ((SELECT ownerid FROM 'td_events' where event_id = '$EvID'),'$EmailAdd','$FullName', '$City'  ,'$State')";

$RsEmail = mysql_query($SqlEInsert) or die('Error :' . mysql_error()); 
```

但是当我运行应用程序时出现以下错误

> 错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ''td_events' where event_id = '394')、'email@hotmail.com'、'Full Name'、'Atl' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T16:08:20.180

这`td_event`是一个字段名而不是一个值。用撇号转义它。

```
$SqlEInsert= "INSERT INTO `td_email` VALUES ((SELECT ownerid FROM `td_events` where event_id = '$EvID'),'$EmailAdd','$FullName', '$City'  ,'$State')"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T16:09:00.360

当您想使用引号时，您不需要**'作为表名，那么您必须使用****`**

```
$SqlEInsert= "INSERT INTO td_email VALUES ((SELECT ownerid FROM td_events WHERE event_id = '$EvID'),'$EmailAdd','$FullName', '$City'  ,'$State')"; 
```

请看一下 SQL 注入和安全性

```
$SqlEInsert= "INSERT INTO td_email VALUES ((SELECT ownerid FROM td_events WHERE event_id = '".(int)$EvID."'),'".mysql_real_escape_string($EmailAdd)."','".mysql_real_escape_string($FullName)."', '".mysql_real_escape_string($City)."'  ,'".mysql_real_escape_string($State)."')"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T16:05:29.887

确保您的值被转义。你可以运行它们：`mysql_real_escape_string()`这样做。

# xcode - 如何使用来自 A 的谓词获取记录，该谓词与 A<-->B<-->C 和 coredata 有关系

> ID：11283508
> 
> 赞同：1
> 
> 时间：2012-07-01T16:03:00.183
> 
> 标签：xcode, core-data, fetch, using, predicate

我有三个实体A，B，C。EntityA：属性：Id，名称关系：ABRelation（A-->>B）

EntityB：属性：Id，名称关系：BARelation（B-->A）BCRelation（B-->>C）

EntityC: RoleId CBRelation(C-->>B)

现在我需要从包含在 C 中的具有某些 RoleId = 23 的实体 A 中获取记录。

能否请您尽快帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T16:16:34.927

```
SELECT a.Id, a.Name,
FROM EntityA a INNER JOIN EntityB b
   ON a.Id= b.EntityA_Id(foriegn key) JOIN EntityC as c
   ON b.EntityC_Id(foriegn key) = c.Id
WHERE c.RoleId=23 
```

# objective-c - 单例中的 Objective-C 调用实例方法

> ID：11283513
> 
> 赞同：1
> 
> 时间：2012-07-01T16:03:30.870
> 
> 标签：objective-c, ios

我创建了一个名为`DataManager`. 我已经设置了一些缓存。但是，当尝试从 的另一个实例方法中调用缓存实例方法时`DataManager`，`EXC_BAD_ACCESS`出现以下错误：

```
NSMutableArray *stops = [[DataManager sharedInstance] getCacheForKey:@"stops"]; 
```

**数据管理器.h**

```
@interface DataManager : NSObject {
    FMDatabase *db;
    NSMutableDictionary *cache;
}

+ (DataManager *)sharedInstance;
// ... more methods
- (id)getCacheForKey:(NSString *)key;
- (void)setCacheForKey:(NSString *)key withValue:(id)value;
- (void)clearCache; 
```

**数据管理器.m**

```
- (NSArray *)getStops:(NSInteger)archived {
    NSMutableArray *stops = [[DataManager sharedInstance] getCacheForKey:@"stops"];
    if (stops != nil) {
        NSLog(@"Stops: %@", stops);
        return stops;
    }

    stops = [NSMutableArray array];
    // set stops...

    [[DataManager sharedInstance] setCacheForKey:@"stops" withValue:stops];

    return stops;
} 
```

从另一个视图控制器调用时似乎会发生这种情况。那是第一个视图控制器没有错误，第二个视图控制器，错误。

这是我第一次尝试单例，所以我确定我犯了一个简单的错误。但我自己看不到。

**注意：**我尝试`[self getCache...]`过相同的结果。

### 更新

这是我的单例实现。改编自[http://www.galloway.me.uk/tutorials/singleton-classes/](http://www.galloway.me.uk/tutorials/singleton-classes/)

```
+ (DataManager *)sharedInstance {
    @synchronized(self) {
        if (!instance) {
            instance = [[super allocWithZone:NULL] init];
        }
    }

    return instance;
}

+ (id)allocWithZone:(NSZone *)zone {
    return [[self sharedInstance] retain];
}

- (id)copyWithZone:(NSZone *)zone {
    return self;
}

- (id)retain {
    return self;
}

- (unsigned)retainCount {
    return UINT_MAX;
}

- (oneway void)release {
    // never release
}

- (id)autorelease {
    return self;
}

- (id)init {
    if (self = [super init]) {        
        if (db == nil){
            BourbonAppDelegate *appDelegate = (BourbonAppDelegate *)[[UIApplication sharedApplication] delegate];
            [appDelegate createEditableCopyOfDatabaseIfNeeded];
            db = [[FMDatabase alloc] initWithPath:[appDelegate getDBPath]];
        }

        if (![db open]) {
            NSAssert(0, @"Failed to open database.");
            [db release];

            return nil;
        }

        [db setTraceExecution:YES];        
        [db setLogsErrors:TRUE];

        cache = [NSMutableDictionary dictionary];
        NSLog(@"cache: %@", cache);
    }

    return self;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T16:13:53.277

您的`cache`对象是自动释放的，因此当您尝试访问它时它不再在内存中。

使用`[NSMutableDictionary alloc] init]`而不是`[NSMutableDictionary dictionary]`获取保留的实例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-01T16:21:25.610

不是您的问题的直接答案，已经回答了。

但是，我只想指出您的单例实现是次优的。`@synchronized`非常昂贵，每次访问单例时都可以避免使用它：

```
if (!instance) {
    @synchronized(self) {
        if (!instance) {
            instance = [[super allocWithZone:NULL] init];
        }
    }
} 
```

初始化单例的更好方法是：

```
+ (DataManager *)sharedInstance {
    static DataManager *instance;

    static dispatch_once_t donce;
    dispatch_once(&donce, ^{
        instance = [[self alloc] init];
    });

    return instance;
} 
```

# php - 什么是“有效载荷”？例如 XML 有效负载

> ID：11283514
> 
> 赞同：8
> 
> 时间：2012-07-01T16:03:43.077
> 
> 标签：php, xml, rest, soap, payload

在浏览一些网络服务文档时，我遇到了“ **payload** ”、“ **xml payload** ”这个词……

![在此处输入图像描述](../Images/284eeff95aa4c2826c254b400e172815.png)

* * *

![在此处输入图像描述](../Images/eda99ad981903cffb445f7be27a9a507.png)

* * *

![在此处输入图像描述](../Images/bb0c930024085e3aa6fba28c723279f4.png)

* * *

来自[维基百科](http://en.wikipedia.org/wiki/Payload_%28computing%29)：“*计算中的有效负载（有时称为实际数据或主体数据）是数据传输的货物。*”

在这里没有多大意义。谁能解释一下payload / xml payload是什么意思？谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-01T16:05:01.103

“有效负载”是实际内容，与包装器相反，*包装器*是周围的样板 XML（元数据、文档类型等）。因此，它是回复的*可变*部分。

维基百科的定义对我来说*非常*有意义，因为这些示例中的“非有效负载”XML 完全无趣。外部的 XML 是包装，有效负载是内容（“货物”）。

请注意，“转义的有效负载”表示内容实际上是某种其他格式，可能是 XML 转义的。例如，它可能是二进制数据，通常转义为 CDATA 或 Base64。例如，那里*可能*有一个 JPEG 图像（如果它被正确转义）。或 HTML，用 XML 实体编码。那么有效载荷将是例如：

```
&lt;div&gt;example&lt;/div&gt; 
```

这是 XML 转义 HTML 有效负载的一个简单示例，当消息 XML 解析器没有理由解析（类似 XML）有效负载时。

# c# - 如何向用户报告标准异常？

> ID：11283518
> 
> 赞同：10
> 
> 时间：2012-07-01T16:04:16.907
> 
> 标签：c#, exception, localization, usability

考虑一个 C# GUI 应用程序，它使用 a`FileStream`来读取文件，由用户通过“打开文件”对话框选择。

如果读取失败并[出现异常之一](http://msdn.microsoft.com/en-us/library/47ek66wy.aspx)，以用户友好的方式向用户报告失败的正确方法是什么？

我应该为每个例外情况都发明自己的消息，还是有办法获得**本地化的、用户友好的**消息，可以逐字呈现给用户？

## 编辑

我在问.NET 本身是否能够为我提供一个我可以呈现的描述性字符串（并且与其他.NET 程序一致）。*我知道我可以自己卷起来，但如果有标准的替代方案*，我想避免这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T16:26:30.927

您可以拥有一组可本地化的用户异常，其中一个是 say `FileUploadError`。您可以在此处放置本地化的一般信息。抛出一些技术细节可能有点挑战性，因为很难在技术细节和用户修复错误需要采取的简单步骤之间取得适当的平衡。

我的建议是：

1.  拥有一个用户级别`FileUploadErrorException`
2.  里面有一个 details 属性
3.  根据实际异常，建议用户尝试一些事情

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T16:41:19.290

如果您正在捕获由 .Net 框架的 File 类之一引发的异常，那么异常`.Message`属性的内容很可能已经被本地化。该`.Message`属性应该包含本地化的、人类可读的文本。我猜它有多“友好”取决于它，但它可能包含一些你可以嵌入到更一般和友好的段落中的东西。

假设您可能编写一些方法`AlertUserWithMessage()`来向用户显示错误，这可能很有用：

```
try
{
    fileStream.Read(...);  // or some other operation
}
catch(Exception e)
{
    AlertUserWithMessage(e.Message);
} 
```

如果您想包含可能有助于支持人员诊断问题的其他信息，那么您还可以从异常中获取堆栈跟踪作为字符串。

```
try
{
    fileStream.Read(...);  // or some other operation
}
catch(Exception e)
{
    AlertUserWithMessageAndStackTrace(e.Message, e.StackTrace);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T13:05:15.053

异常消息本质上是技术性的，描述了哪里出了问题（在实现级别），而不是如何解决最终用户的问题。另一方面，向用户显示错误消息的目的是解释什么失败以及采取什么措施来解决问题。异常消息和最终用户错误消息的目的不同，也不是为相同的受众编写的。

因此，为了获得良好的用户体验，最好将这些异常映射到本地化的用户友好建议，以解决该问题。当然，对于技术用户来说，拥有一些可以提供异常详细信息的诊断功能可能会很好（在这种情况下，英语异常消息并不重要——英语确实是世界上的技术语言），或者只是指出将它们记录到包含所有详细信息的日志中。但只是向最终用户抛出异常消息，即使是本地化的，也可能会让他们感到困惑。

出于这个原因，我认为本地化异常消息没有多大用处。.NET 框架确实为主要语言提供了本地化异常消息，但我认为这更多是因为有些开发人员使用这些语言作为他们的基础语言，并且不一定能很好地掌握英语。因此，这些本地化异常消息的受众仍然是开发人员，而不是使用 .NET 构建的软件产品的最终用户。

# google-apps-script - 使用 HTMLService 创建的密码输入字段丢失 type=password

> ID：11283520
> 
> 赞同：4
> 
> 时间：2012-07-01T16:04:35.590
> 
> 标签：google-apps-script, google-sites, google-caja

我正在创建一个密码重置表单，供使用 Google Apps for Education 的学校工作人员使用。我正在使用 HTMLService API 导入一个 html 文件并将其用作模板。该文件的一部分是此表：

```
 <table id=passwords>
    <tr>
      <td>New Password</td>
      <td>
        <input name='password1' id='password1' type='password'/>
      </td>
    </tr>
    <tr>
      <td>Confirm New Password</td>
      <td>
        <input name='password2' id='password2' type='password'/>
      </td>
    </tr>
  </table> 
```

当我在 Google 协作平台页面上将其显示为小工具时，它`type='password'`会从 html 中丢失，因此当用户输入密码时不会隐藏密码：

```
 <table id="passwords-caja-guest-0___">
    <tbody><tr>
      <td>New Password</td>
      <td>
        <input autocomplete="off" id="password1-caja-guest-0___" name="password1">
      </td>
    </tr>
    <tr>
      <td>Confirm New Password</td>
      <td>
        <input autocomplete="off" id="password2-caja-guest-0___" name="password2">
      </td>
    </tr>
  </tbody></table> 
```

我可以改用 UIService，它有一个隐藏密码的密码输入小部件，但是在我之后将维护该站点的其他人也必须学习 UIService 相当冗长的 API。

因此，我正在寻找有关如何在此上下文中隐藏密码输入的想法（即，当用户输入密码时只显示星号或项目符号）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T14:10:43.687

恭喜！您已经在新的 HtmlService 上提交了第一个错误 :)。

似乎 type=password 在清理步骤中丢失了。它被归档为[错误 1487](http://code.google.com/p/google-caja/issues/detail?id=1487)

作为一种解决方法，这将在今天正常工作。

```
<input name='password1' id='password1' />
<script>document.getElementById('password1').type='password'</script> 
```

也就是说，在 JavaScript 中自己设置类型是有效的。不过，这只是一个临时的解决方法；我们将尽快修复潜在的错误。感谢您的报告。

更新：底层错误已在 Caja 中修复，我们将在下一个 Apps 脚本版本中修复。

# c# - 使用 WebClient 验证 Google 帐户

> ID：11283525
> 
> 赞同：-2
> 
> 时间：2012-07-01T16:05:10.503
> 
> 标签：c#, webclient

我正在尝试使用 WebClient 验证 Google 帐户。

```
class PostDataBuilder 
{
    private static Dictionary<string, string> 
        ToPropertyDictionary(object data) 
    { 
        var values = data
            .GetType()
            .GetProperties()
            .Select(x => new { 
                                Key = x.Name, 
                                Value = x.GetValue(data, null) 
                             });

        var result = new Dictionary<string, string>();
        foreach (var item in values)
            result.Add(item.Key, item.Value.ToString());

        return result;
    }

    public static string Build(object data)
    {
        string result = "";
        var dict = ToPropertyDictionary(data);
        foreach (var name in dict.Keys)
            result += name + "=" + HttpUtility.UrlEncode(dict[name]) + "&";
        return result.Substring(0, result.Length - 1);
    }
}

class Program
{
    static void Main(string[] args)
    {
        string postText = PostDataBuilder.Build(
        new
        {
            dsh = "-1903339439726094408",
            GALX = "-Ggrv6gqusk",
            timeStmp = "",
            secTok = "",
            Email = "WrongEmail@gmail.com",
            Passwd = "WrongPassword",
            signIn = "?????",
            rmShown = "1"
        });

        byte[] data = Encoding.UTF8.GetBytes(postText);

        WebClient wc = new WebClient();
        byte[] result = wc.UploadData(
            new Uri("https://accounts.google.com/ServiceLoginAuth"), 
            "POST", data);

        string resultText = Encoding.UTF8.GetString(result);
    }
} 
```

ResultText 变量已设置，即使数据正确。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T17:22:29.583

您永远不应该乱搞诸如 Google 之类的登录服务或试图伪造浏览器。最后，它可能被认为是黑客攻击或其他任何事情，并且很可能会在他们下次更新页面时中断（或者甚至只是因为您的 IP 更改）。

而是使用[此处](https://developers.google.com/accounts/docs/GettingStarted)所述的 OpenID 或 OAuth 。

# scheme - 如何理解这种延续？

> ID：11283526
> 
> 赞同：4
> 
> 时间：2012-07-01T16:05:12.210
> 
> 标签：scheme, the-little-schemer

```
(let ([x (call/cc (lambda (k) k))])
    (x (lambda (ignore) "hi")))  => "hi" 
```

我该如何编写这个延续的执行步骤？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T18:54:42.833

`call/cc`运算符用于调用具有*当前延续*的给定过程（因此名称为`call-with-current-continuation`）。所以要理解它是如何工作的，我们需要知道当前的延续是什么。

在您的程序中，在`call/cc`执行时，延续看起来像这样：

```
CONT = (let ([x HOLE])
         (x (lambda (ignore) "hi"))) 
```

where`HOLE`是要插入的值的占位符。换句话说，延续是剩余的计算。如果你想进步，你可以在延续中加入一个价值。

现在，`call/cc`捕获此延续并将其传递给过程`(lambda (k) k)`。你可以看到这个过程只是立即返回延续。所以程序简化为：

```
(let ([x CONT])
  (x (lambda (ignore) "hi"))) 
```

应用由 捕获的延续`call/cc`将当前计算替换为插入您给它的值的延续。所以应用程序`(x (lambda (ignore) "hi"))`变成：

```
(let ([x (lambda (ignore) "hi")])
  (x (lambda (ignore) "hi"))) 
```

其余的应该遵循您已经了解的有关 lambda 和应用程序的知识。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T19:23:41.250

在第一行`[x (call/cc (lambda (k) k))]`中，我们创建了一个新的延续，它绑定到`k`接收的参数`lambda`。它`k`被返回并反过来绑定到`x`局部变量 - 因此，`x`它是一个延续。

在第二行中，`x`使用单个参数调用`lambda`；参数被忽略，调用的结果`(lambda (ignore) "hi")`是`"hi"`，最终作为延续的结果返回。这相当于简单地调用：

```
(call/cc
 (lambda (k)
   (k "hi"))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T16:51:43.120

为什么这个表达式的计算结果为 "hi" ？

```
(let ([x (call/cc (lambda (k) k))])
  (x (lambda (ignore) "hi"))) 
```

第一步是决定是什么`k`样子：

```
(define k
  (lambda (value)
    (let ((x value))
      (x (lambda (ignore) "hi"))))) 
```

我们立即看到这与

```
(define k
  (lambda (x)
    (x (lambda (ignore) "hi")))) 
```

但是，我没有提到一个小细节。如果`k`曾经被调用，就好像它是在尾部位置调用的。

因此，对于所有由 构建的`(f (k 3))`延续都与. 这总是有点棘手。`k``call/cc``(k 3)`

所以，我们用`lambda^`来表示它引入的函数将被调用，就好像它在尾部位置一样。

```
(define k
  (lambda^ (x)
    (x (lambda (ignore) "hi")))) 
```

现在我们知道了`k`是什么，我们还需要知道，返回`(call/cc (lambda (k) k))`实际上是使用默认值。

它应该正确地写为

```
(call/cc (lambda (k) (k k))). 
```

在传递给 的 lambda 表达式主体的顶部总是隐含调用 k `call/cc`。

我们知道是什么`k`。

因此，我们知道这必须与，（为了便于阅读，让我们将`x`参数位置中的 's 变成`y`'s。）

```
((lambda^ (x) (x (lambda (ignore) "hi")))
 (lambda^ (y) (y (lambda (ignore) "hi")))) 
```

因此，我们将这两个位置都评估为函数。

一旦我们在函数位置调用函数，我们就完成了，因为它以 So 为首`lambda^` ，我们需要知道

```
((lambda^ (x) (x (lambda (ignore) "hi")))
 (lambda^ (y) (y (lambda (ignore) "hi")))) 
```

计算为，代入`x`

```
((lambda^ (y) (y (lambda (ignore) "hi")))
 (lambda (ignore) "hi")) 
```

还有一步，代替`y`

导致

`((lambda (ignore) "hi") (lambda (ignore) "hi"))`, 它忽略它的参数并返回 "hi"

# android - 如何通过java编码删除复选框的按钮图像？

> ID：11283528
> 
> 赞同：3
> 
> 时间：2012-07-01T16:05:21.337
> 
> 标签：android, button, checkbox

我知道使用以下代码删除xml中复选框的按钮图像：

```
<CheckBox
                android:layout_width="wrap_content"
                android:layout_height="25dp"
                android:button="@null"
                android:background="@drawable/notxtcheckboxbtn"
                android:layout_weight="1"/> 
```

但我需要在我的 java 代码中添加复选框。和“newCheckBox.setButtonDrawable(null);” 不工作！

有人知道如何在java代码中删除它吗？提前致谢！！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-01T16:17:24.257

如果您只想让图像透明，您可以尝试将图像设置为 android.R.color.transparent。这应该会给你你正在寻找的效果。

否则，如果您想隐藏按钮并禁用它，您可以使用 set visibility() 并将其设置为消失或不可见。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-13T19:07:39.023

尝试：

```
android:button="@android:color/transparent" 
```

# java - 使用JS将文件写入本地网络中的另一台计算机

> ID：11283530
> 
> 赞同：0
> 
> 时间：2012-07-01T16:05:31.943
> 
> 标签：java, javascript, file, firefox, networking

目前我正在通过以下命令写入本地存储上的文件：

```
var localFileName="localFile.txt";
netscape.security.PrivilegeManager.enablePrivilege('UniversalXPConnect');
var localFile = Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);
localFile.initWithPath("C:\\MyLocalPath\..." + localFileName); 
```

现在，如果我想在同一本地网络中的另一台 PC 上写入文件，我是否也可以使用上述模式，只需将“initWithPath”更改为另一台计算机的 IP（和路径）还是必须使用不同的方法或Java实现？

注意：这只需要在 Mozilla Firefox 上运行，其他浏览器无关紧要。

此致。

编辑：正如下面评论中提到的，使用 Java 可能是一个很好的解决方案。目前我有以下代码（从“localhost”到“localhost”）：

```
public static void startSender() {
        (new Thread() {
            @Override
            public void run() {
                try {
                    Socket mySocket = new Socket("127.0.0.1", 60014);   // IP, Port
                    BufferedWriter outputStream = new BufferedWriter(new OutputStreamWriter(mySocket.getOutputStream()));
                    outputStream.write("it works... ");
                    outputStream.flush();
                }
// (+ catch Exceptions)
            }
        }).start();
    }

    public static void startServer() {
        (new Thread() {
            @Override
            public void run() {
                ServerSocket myServerSocket;
                try {
                    myServerSocket = new ServerSocket(60014);
                    Socket mySocket = myServerSocket.accept();
                    BufferedReader inputStream = new BufferedReader(
                            new InputStreamReader(mySocket.getInputStream()));
                    String line = null;
                    while ((line = inputStream.readLine()) != null) {
                        System.out.println(line);
                    }
                }
// (+ catch Exceptions)
                }
            }
        }).start();
    } 
```

# javascript - 正则表达式替换

> ID：11283533
> 
> 赞同：0
> 
> 时间：2012-07-01T16:05:50.953
> 
> 标签：javascript, regex

我怎么能使用正则表达式来替换这样的东西：
`abc-123456789`
到不同的东西？`ABC`始终是一样的，但变化`123456789`。

我知道像这样的正则表达式`/abc-/`会选择第一部分，但我不知道如何选择数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T16:15:51.523

用这个：

```
str.replace(/abc-\d+/gi,"something"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T16:09:17.310

```
mystring.replace("/abc/-[0-9]{9}", "Something else"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T16:17:36.330

```
var s = "abc-12345";
var replacement = "REPLACEMENT";
var t = s.replace(/abc-[0-9]+/, replacement); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T16:09:46.263

```
str = str.replace(/(abc-)([0-9]+)/gi, function(str, group1, group2) {
    return group1 + someFunction(group2)
} 
```

`group1`是第一个括号内的内容；`group2`——第二个是什么。该函数获取字符串和这两个组作为其参数。您可以重写`group2`并返回更改此部分的新字符串。

# javascript - 为页面动态创建 og 元数据 - 客户端

> ID：11283536
> 
> 赞同：0
> 
> 时间：2012-07-01T16:06:00.627
> 
> 标签：javascript, jquery, facebook, client

我正在尝试在 FB 抓取页面之前在客户端设置页面的 Facebook 开放图元数据。

我尝试过的一切，似乎 FB 在任何 JS 采取行动之前都会抓取页面。它是否正确？有没有办法做到这一点？

这是它在 html 文件中的样子：

```
<meta id="ogImage" content='http://www.blueglass.com/wordpress/wp-content/uploads/2012/04/stand-out-in-crowd.jpg' property='og:image' />
<meta id="ogDescription" content='testd' property='og:description' />
<meta id="ogTitle" content='testt' property='og:title' /> 
```

页面加载后，根据url参数，我想更改元数据。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T16:25:28.507

Javascript 主要是由浏览器执行的客户端技术（尽管存在服务器端实现）。当 Facebook 抓取您的页面时，它只查看 HTML 结构和内容；页面内的任何 JS 都不会被执行。将您的 URL 放入[Facebook Linter 调试工具](https://developers.facebook.com/tools/debug)，以准确查看 linter 所看到的内容。

如果您想动态设置元数据，您需要通过服务器端脚本（例如 PHP 或 ASP.NET）来执行此操作，很可能是通过询问 URL 查询字符串参数并适当调整 META 标记。

# javascript - node.js 是否支持 'let' 语句？

> ID：11283538
> 
> 赞同：39
> 
> 时间：2012-07-01T16:06:44.073
> 
> 标签：javascript, node.js

node.js 是否支持类似于[MDN 上描述的 let 语句？](https://developer.mozilla.org/en/JavaScript/Reference/Statements/let)?

```
var x = 8,
    y = 12;

let ( x = 5, y = 10) {
    return x + y;
} //15 
```

如果没有，有没有办法用自动执行的匿名函数或其他东西来复制功能？

和/或是否有另一个 js 环境

1.  有`let`和 和
2.  有一个REPL，就像节点一样？犀牛？

**编辑**：

这个问题是很久以前被问到的。截至 2015 年底，答案是“是的，是的”。Harmony 功能默认包含在 io.js 3.3 中，最近在 4.x 版本中被带回 node.js。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-07-04T09:53:09.930

是的，你可以在 node.js 中使用 let，但是你必须使用可选的 --harmony 标志来运行 node。试试下面的*test.js*：

```
"use strict"
var x = 8,
    y = 12;

{ let x = 5, y = 10; console.log(x + y); }

console.log(x + y); 
```

然后运行文件`node --harmony test.js`，结果是：

```
15
20 
```

我不建议在重要的生产应用程序中使用它，但该功能现在可用。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2016-06-26T01:23:17.853

这是一个老问题，接受的答案不再正确。

`let`在 Node.js **4.x**中添加了支持。

有关完整版本的支持矩阵，请参见[此处。](http://node.green/#let)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2014-11-24T12:12:51.640

```
node --use_strict --harmony_scoping 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-07-01T16:23:25.687

我不认为 N​​ode 支持`let`，但你可以这样做：

```
var a = 5;

(function () {
  var a = 6;
  console.log(a); // => 6
})();

console.log(a); // => 5 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-01T06:02:15.580

您可以使用 Babel 转译器并使用`let`许多其他 ES6/ES2015 功能。

要使用 babel：

```
$ npm install --save-dev babel 
```

然后在你的`package.json`：

```
"scripts": {
  "start": "babel-node index.js"
} 
```

内部`index.js`：

```
let foo  = 'bar; 
```

然后启动服务器：

```
$ npm start 
```

# node.js - 在多核服务器中使用带有集群的 socket.io 的好方法？

> ID：11283539
> 
> 赞同：7
> 
> 时间：2012-07-01T16:06:58.387
> 
> 标签：node.js, redis, socket.io

我创建了一个 nodejs 应用程序，它可以在单核中正常工作。此应用程序使用 socket.io 进行轻快的通信。

`cluster`现在，我想通过使用nodejs 中的模块使其能够在多核系统上运行来垂直扩展我的应用程序。

我的应用程序中的所有内容都将数据存储在 Redis 中，因此，处理一些基本数据和会话没有问题。

但是，当我使用集群生成多个工作进程时，似乎每个工作进程都有自己的套接字处理。

例如，假设有一个名为“guest”的聊天室。

用户 A 和用户 B 连接到房间，他们被分配到不同的工作进程。

由于它们在不同的进程中，并且这些进程不共享套接字侦听器，因此用户 A 和用户 B 无法相互交谈。

解决这个问题的好方法是什么？socket.io 是否支持多核系统？

socket.io 是否仅用于单核？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T16:31:19.173

您可以正常使用 socket.io，但在后台使用 redis 存储。它还将支持 socket.io 上的多个实例，而无需任何外部库。它甚至支持多个实例的房间。

链接到如何使用 redis 设置 socket.io：Using [Multiples Nodes/Processes with socket.io](http://socket.io/docs/using-multiple-nodes/)

# iphone - 如何找到精灵和贝塞尔曲线之间的碰撞检测

> ID：11283541
> 
> 赞同：0
> 
> 时间：2012-07-01T16:07:10.490
> 
> 标签：iphone, objective-c, cocos2d-iphone, collision-detection, box2d-iphone

我通常使用 box2d 来检测两个精灵之间的碰撞，如下面的代码

```
- (void)beginContact:(b2Contact *)contact {

b2Fixture *fixtureA = contact->GetFixtureA();
b2Fixture *fixtureB = contact->GetFixtureB();
b2Fixture *fixtureC = contact->GetFixtureA();

b2Body *bodyA = fixtureA->GetBody();
b2Body *bodyB = fixtureB->GetBody();
b2Body *bodyC = fixtureC->GetBody();
CCSprite *spriteA = (CCSprite *) bodyA->GetUserData();
CCSprite *spriteB = (CCSprite *) bodyB->GetUserData()
LHBezierNode* bez = (LHBezierNode *) bodyC->GetUserData();
if ((spriteB == _enemy && spriteB == _hero) ||
(spriteA == _enemy && spriteA == _hero)) {
NSLog(@"enemy touched");
}
} 
```

但我很困惑如何检测 bazier 和 sprite 之间的碰撞检测。感谢任何帮助。谢谢

这是我的贝塞尔曲线

```
LHBezierNode* myBezier = [LH bezierNodeWithUniqueName:@"BezierName"]; 
```

注意：我使用贝塞尔的水平助手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:19:35.513

我已经通过向 brezier 添加标签来解决它，谢谢

# php - 覆盖 SonataUserBundle 的 ProfileFormType

> ID：11283542
> 
> 赞同：4
> 
> 时间：2012-07-01T16:07:23.787
> 
> 标签：php, symfony

我正在尝试覆盖 SonataUserBundle 的 ProfileFormType。我在该表单中添加了一些额外的字段，并且所有字段都呈现在页面上。所以这行得通。但是现在我想知道为什么用户的数据没有加载，因为名字、姓氏……是已知的，但只是没有显示在表单的文本框中。

被覆盖的 ProfileController 类的 editProfileAction：

```
/**
 * @return Response
 *
 * @throws AccessDeniedException
 */
public function editProfileAction()
{
    $user = $this->container->get('security.context')->getToken()->getUser();
    if (!is_object($user) || !$user instanceof UserInterface) {
        throw new AccessDeniedException('This user does not have access to this section.');
    }

    $form = $this->container->get('sonata.user.profile.form');
    $formHandler = $this->container->get('sonata.user.profile.form.handler');

    $process = $formHandler->process($user);
    if ($process) {
        $this->setFlash('fos_user_success', 'profile.flash.updated');

        return new RedirectResponse($this->generateUrl('sonata_user_profile_show'));
    }

    // This doesn't show the firstname
    die($form->getData()->getFirstname());

    return $this->render('SonataUserBundle:Profile:edit_profile.html.twig', array(
        'form' => $form->createView(),
        'theme' => $this->container->getParameter('fos_user.template.theme')
    ));
} 
```

重写的 ProfileFormHandler 类的处理函数：

```
public function process(UserInterface $user)
{
    $this->form->setData($user);

    // This DOES show the firstname 
    die($this->form->getData()->getFirstname());

    if ('POST' == $this->request->getMethod()) {
        $this->form->bindRequest($this->request);

        if ($this->form->isValid()) {
            $user->upload();
            $this->onSuccess($user);

            return true;
        }

        // Reloads the user to reset its username. This is needed when the
        // username or password have been changed to avoid issues with the
        // security layer.
        $this->userManager->reloadUser($user);
    }

    return false;
} 
```

服务.yml：

```
services:
    application_sonata_user.registration.form.type:
        class: Application\Sonata\UserBundle\Form\Type\RegistrationFormType
        arguments: [%fos_user.model.user.class%]
        tags:
            - { name: form.type, alias: application_sonata_user_registration }

    application_sonata_user.profile.form.type:
        class: Application\Sonata\UserBundle\Form\Type\ProfileType
        arguments: [%fos_user.model.user.class%]
        tags:
            - { name: form.type, alias: application_sonata_user_profile }

    application_sonata_user.search.form.type:
        class: Application\Sonata\UserBundle\Form\Type\SearchFormType
        arguments: [%fos_user.model.user.class%]
        tags:
            - { name: form.type, alias: application_sonata_user_search }

    application_sonata_user.form.handler.profile:
        class: Application\Sonata\UserBundle\Form\Handler\ProfileFormHandler
        arguments: ["@fos_user.profile.form", "@request", "@fos_user.user_manager", "@ewz_search.lucene"]
        scope: request
        public: false 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:55:11.620

在 services.yml 文件中，我必须输入：

```
arguments: ["@sonata.user.profile.form", "@request", "@fos_user.user_manager", "@ewz_search.lucene"] 
```

代替

```
arguments: ["@fos_user.profile.form", "@request", "@fos_user.user_manager", "@ewz_search.lucene"] 
```

# parsing - 在 Menhir/Ocamlyacc 中为操作员指定动态优先级和优先级

> ID：11283544
> 
> 赞同：6
> 
> 时间：2012-07-01T16:08:02.147
> 
> 标签：parsing, ocaml, operator-precedence, ocamlyacc, menhir

我正在尝试使用 Menhir 解析器（类似于 Ocamlyacc）解析运算符具有动态属性（优先级和优先级）的语言。在词法分析阶段，所有运算符都填充一个`OP:string`标记（因此“+”变成`(OP "+")`，等等）。

运算符属性在解析时确定并填充关联运算符及其属性的表。鉴于此表，我如何指示 Menhir 根据此表的数据动态更改解析运算符的规则的优先级？

谢谢，查理P。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-02T08:30:47.383

我很抱歉回答“你做错了”这样的评论。我有三个反对意见，我希望是建设性的，按相关性降序排列：

1.  Menhir 不适用于动态语法更新。如果您坚持在解析时更改语法，则应使用提供此功能的工具，例如 GLR 解析器[Dypgen](http://dypgen.free.fr/)。Dypgen 手册提到了以受限方式动态更新运算符优先级的可能性（似乎您可以添加新运算符和相应的优先级，但不能更改现有运算符的优先级），这可能符合您的需求，也可能不符合您的需求。[请参阅Dypgen 手册 (PDF)](http://dypgen.free.fr/dypgen-doc.pdf)的第 6.6 节，第... 42 页。

2.  我认为，动态更新 CFG 语法并不是处理用户定义的运算符优先级的最佳方式。Agda 有非常通用的用户定义的 mixfix 运算符，它们的解决方案大致如下：使用您的 CFG 解析器来解析静态已知的语法结构，但是对于可能使用花哨的优先级和关联性的表达式，只需将它们解析成一个列表令牌。例如，`let x = if foo then x + y * z else bar`将被解析为类似`Let(x, If(foo, Expr(x, +, y, *, z), bar)`. 稍后的专用通道可以收集所需的信息，以将这些信息后解析为`Expr`节点，使其成为专用结构。使用解析器生成器来处理它们擅长的事情（静态已知的富 CFG），并对复杂、定义不明确的动态内容使用后处理过程。例如，Agda 家伙有一些关于该主题的文献[解析 Mixfix 运算符](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.157.7899)，Danielsson 和 Norell，2009 年。

    从设计的角度来看，我强烈建议您将您的词法分析和解析分成几个不同的通道，每个通道都经过良好定义，并且仅使用在先前结构上收集的信息，而不是尝试动态地改变其自身的行为。您将拥有更简单、更强大的东西。

3.  在我看来，动态或用户定义的优先级和优先级有点邪恶。OCaml 有一个不同的系统，其中运算符的优先级由它们的前几个字符确定（例如`@`，`@@`并且`@+`都是右关联的）。对于选择中缀运算符的人来说，这有点限制，但让代码*阅读*者的生活更加舒适，因为他们只需要学习一套语法规则，而不必动态地让他们的眼睛适应任何新的代码。如果您想允许插入具有完全不同语法的狂野的外来代码，引用机制（例如 camlp4 `<:foo< ... >>`）比摆弄操作员级别的关联性和优先级要强大得多，而且解析起来也更简单。

    也就是说，项目有不同的需求，如果您坚持让某些我不知道的应用程序动态更改运算符优先级和关联性，我会完全理解。请记住，这不是唯一的方法，有时一致性和简单性比绝对的灵活性更好。

# wordpress - 限制其他用户访问作者页面 wordpress

> ID：11283547
> 
> 赞同：1
> 
> 时间：2012-07-01T16:08:07.793
> 
> 标签：wordpress, limit, restrict, author

我在 wordpress 中有自定义作者模板：mysite.com/author/john/ 并且我想限制对此页面的访问，因此只有 john 登录时才能访问此页面，而其他用户无论是否登录都不能访问。

有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T13:28:10.307

试试下面的代码..

```
$logged_in_user_id = 0;
// get author info 
$user_info  = get_userdata($post->post_author); 
$author_id  = $user_info->ID;   

// get logged in user info 
$user_logged_in = is_user_logged_in();
$user_data = array();
if($user_logged_in){ 
global $current_user;
get_currentuserinfo();          
$logged_in_user_id = $current_user->ID;
}

// check the logged in user id is same as author id

if($logged_in_user_id == $author_id ){

// Show blog information...

}else{

 // Show blog access denied message
} 
```

# java - JPanel 的幻灯片效果

> ID：11283554
> 
> 赞同：4
> 
> 时间：2012-07-01T16:08:34.877
> 
> 标签：java, swing

我尝试创建可以像这样滑动 JPanel 的简单类：

```
+----------+ +------+---+ +----------+
| | | | | | |
| JPanel1 | => | 日语| JP| => | JPanel2 |
| | | | | | |
+----------+ +------+---+ +----------+
```

我创建了 javax.swing.Timer 并添加到类中

```
timer = new Timer(50, this);
timer.start();

static final int frames = 5;
int counter = 0;

actionPerformed(ActionEvent e) {
    if (counter >= frames) {
        timer.stop();
        counter = 0;
    } else {
        counter++;
        jPanel2.setBounds(800 - 800 * counter / frames, 0, 800, 600);
    }
} 
```

这是工作，但非常缓慢。我只有 2-3 fps，不知道如何加快这种方法。你能帮帮我吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-01T16:12:30.217

也许将计时器的间隔从 50 更改为更小的数字。

即，由此：

```
timer = new Timer(50, this); 
```

对此：

```
timer = new Timer(10, this); 
```

注意：你应该避免在这里使用幻数。

哎呀，像...

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.*;

public class SlideEg extends JPanel {
   private SlideContainer slideContainer = new SlideContainer();

   public SlideEg() {
      setLayout(new BorderLayout());
      add(slideContainer, BorderLayout.CENTER);

      JLabel helloLabel = new JLabel("Hello", SwingConstants.CENTER);
      slideContainer.add(helloLabel);

      Timer myTimer = new Timer(5000, new ActionListener() {

         @Override
         public void actionPerformed(ActionEvent e) {
            JLabel goodbyeLabel = new JLabel("Goodbye", SwingConstants.CENTER);
            goodbyeLabel.setOpaque(true);
            goodbyeLabel.setBackground(Color.pink);
            slideContainer.add(goodbyeLabel);
         }
      });
      myTimer.setRepeats(false);
      myTimer.start();
   }

   private static void createAndShowGui() {
      SlideEg mainPanel = new SlideEg();

      JFrame frame = new JFrame("SlideEg");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
}

class SlideContainer extends JLayeredPane {
   private static final int PREF_W = 400;
   private static final int PREF_H = PREF_W;
   private static final int SLIDE_DELAY = 20;
   protected static final int DELTA_X = 2;
   Component oldComponent;

   public SlideContainer() {
      setLayout(null);
   }

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(PREF_W, PREF_H);
   }

   @Override
   public Component add(Component comp) {
      Component[] comps = getComponents();
      if (comps.length > 0) {
         oldComponent = comps[0];
      }
      if (oldComponent == comp) {
         return super.add(comp);
      }
      if (oldComponent != null) {
         putLayer((JComponent) oldComponent, JLayeredPane.DEFAULT_LAYER);
      }
      Component returnResult = super.add(comp);
      putLayer((JComponent) comp, JLayeredPane.DRAG_LAYER);
      comp.setSize(getPreferredSize());
      comp.setVisible(true);
      comp.setLocation(getPreferredSize().width, 0);
      slideFromRight(comp, oldComponent);
      return returnResult;
   }

   private void slideFromRight(final Component comp,
         final Component oldComponent2) {
      new Timer(SLIDE_DELAY, new ActionListener() {

         @Override
         public void actionPerformed(ActionEvent aEvt) {
            int x = comp.getX();
            if (x <= 0) {
               comp.setLocation(0, 0);
               putLayer((JComponent) comp, JLayeredPane.DEFAULT_LAYER);
               if (oldComponent2 != null) {
                  remove(oldComponent2);
               }
               ((Timer) aEvt.getSource()).stop();
            } else {
               x -= DELTA_X;
               comp.setLocation(x, 0);
            }
            repaint();
         }
      }).start();
   }
} 
```

# php - PHP 和请求之间的资源共享

> ID：11283568
> 
> 赞同：4
> 
> 时间：2012-07-01T16:09:46.653
> 
> 标签：php, xml, resources, shared-memory

我正在寻找一种在请求之间共享 PHP 资源的方法。首先，我想分享解析后的 XML。我有一些在只读模式下使用的大型 XML，目前我必须为每个 HTTP 请求加载和解析它。

我读过这个： http: [//php.net/manual/en/function.shm-put-var.php](http://php.net/manual/en/function.shm-put-var.php)和其他共享内存 API 文档，我知道没有直接的方法将资源存储在共享内存中. 这就是我在这里问的原因。

所以，我有 XML，我在只读模式下使用它（执行 XPath 请求），这个 XML 很大，我正在寻找某种方法来消除为每个 HTTP 请求加载和解析它的需要。对此有何想法或建议？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T16:16:49.933

如果您在服务器上启用了 APC，请查看`apc_store`

[http://php.net/manual/de/function.apc-store.php](http://php.net/manual/de/function.apc-store.php)

> 与 PHP 中的许多其他机制不同，使用 apc_store() 存储的变量将在请求之间持续存在（直到从缓存中删除该值）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T16:16:39.780

您可以为此[http://www.tizag.com/phpT/phpsessions.php](http://www.tizag.com/phpT/phpsessions.php)使用会话，这就是它们的构建目的。

> 随着网站变得越来越复杂，支持它的代码也必须如此。当您的网站需要将用户数据从一个页面传递到另一个页面时，可能是时候开始考虑使用 PHP 会话了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T16:18:13.333

也许您可以使用[memcache](http://php.net/manual/en/book.memcache.php)并将对象或文件保存在 memcache 中。然后任何 Web 服务都可以加载该文件并使用它。Memcache 非常快，您可以从许多 Web 服务器访问它。

# java - AppEngine sun.misc.Unsafe 限制

> ID：11283572
> 
> 赞同：1
> 
> 时间：2012-07-01T16:10:04.377
> 
> 标签：java, google-app-engine, gson

Appengine 似乎限制了“sun.misc.Unsafe”的使用。不幸的是，Gson 序列化库使用它来提供即时的无参数构造函数。它与 Scala 案例类完美配合。

这是一个有效的限制吗？如果是，请求一个功能允许它是否合理？

我意识到这种类型的反射具有一些安全后果，但 App Engine 确实允许对我自己的代码库中的代码进行反射。也许对于“sun.misc.Unsafe”也是如此

**更新**：我现在意识到 Unsafe 实际上“太不安全”而不能被允许，更好的解决方案是找到一种替代方法来实例化无参数构造函数，而 Gson 团队无法实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T16:44:50.430

> 我意识到这种类型的反射具有一些安全后果，但 App Engine 确实允许对我自己的代码库中的代码进行反射。也许对于“sun.misc.Unsafe”也是如此。 Unsafe 顾名思义，具有非常不安全的方法，可能会破坏整个 JVM。例如，您可以更改内存中的任意位置，因此不可能将 Unsafe 仅限制在您的类中。以下是方法：

```
setMemory(long l, long l1, byte b)
long getAddress(long l)
void putAddress(long l, long l1) 
```

# php - 在 jquery 中获取 fakepath

> ID：11283576
> 
> 赞同：1
> 
> 时间：2012-07-01T16:10:35.230
> 
> 标签：php, javascript, jquery

我正在尝试通过将文件浴从 javascript 传递到 php 文件然后返回结果来获取文件的大小，问题是 javascript 将文件浴传递为以下 ex, c:\fakepath\NAME OF THE FILE ，因此 php 文件得到一个错误的路径，所以总是返回错误！

```
 $(document).ready(function (){

        $("#file").click(function (){

            fileBath=$("#name").val();

                $.get('newfile2.php','fileBath='+fileBath,function(data){
                alert(data);

                    });
            });
}); 
```

.php 文件

```
getmax($_GET['fileBath']);

function getmax($fileBath){

    $value=filesize($fileBath);
    echo  $value;

} 
```

正如我所说的 php 文件中的返回值 FALSE 因为文件浴是错误的！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T16:20:17.153

文件输入的目的是允许上传文件。访问者文件系统的结构被认为是网站不应该需要的机密信息。

没有办法绕过 fakepath 替换，因为它可以保护访问者的隐私。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T16:33:27.880

由于 HTML5 浏览器的出现执行了严格的规则来保护用户的隐私，而 fakepath 用于隐藏文件的真实路径，即使在 MAC 上路径也是`C:\\fakepath..`

所以你只能检测文件的名称而不是它的真实路径，试试这个::

```
var filename = $('#name').val().replace(/C:\\fakepath\\/i, ''); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T16:19:46.320

使用 php str_replace 或 preg_replace 。它将替换不必要的空间或任何你想要的，那么就不会有任何问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-27T09:12:37.863

JavaScript 解决方案：

```
document.getElementById("fileInput").files[0].name; 
```

jQuery解决方案：

```
$("#fileInput")[0].files[0].name; 
```

# iphone - iPhone问题上的多点触控

> ID：11283577
> 
> 赞同：0
> 
> 时间：2012-07-01T16:11:02.130
> 
> 标签：iphone, objective-c, touchesbegan

我怎样才能做到这一点，当用户在操纵杆上玩游戏以移动中心的角色时，他们也可以触摸屏幕的右下角（第二次触摸）来开枪？我看过其他问题，但我仍然无法弄清楚......

这基本上是代码....：

```
-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
//make the touch point...
UITouch *touch = [[event allTouches]anyObject];  
CGPoint point = [touch locationInView:touch.view];

if (//touching a certain area (on the joystick)) {
//do stuff
}

else if (point.x > 300 && point.y > 200) {
/fire method

}

} 
```

所以基本上我如何再次调用 touchesBegan 来找到 CGPoint 点的位置，并确定是否应该调用 fire 方法？

谢谢

编辑：

我试图做第二个选项并做到了这一点：在 view controller.h 我添加了：

```
@interface fireView: UIView 
@end 
```

在 .m 中我添加了：

```
@implementation fireView -(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {         
NSLog(@"hi");
} 

@end 
```

....但它不记录/打印“嗨”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T16:52:16.820

使用 2 个[UIGestureRecognizers](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html)。您可以创建 2 个所需大小的不可见视图 - 一个用于操纵杆，一个用于启动按钮。对于每个视图，使用单个手势识别器。然后，您将能够通过不同的方法处理这些视图上的点击，而无需检查它是火还是操纵杆。

假设您已经有 2 个视图 - joystickView 和 fireView。然后像这样

```
 UITapGestureRecognizer* fireTapGestureRec= [[UITapGestureRecognizer alloc] 
                             initWithTarget:self action:@selector(fireTapped:)];
    fireTapGestureRec.delegate = self;
    fireTapGestureRec.numberOfTapsRequired = 1;
    fireTapGestureRec.numberOfTouchesRequired = 1;
    [fireView addGestureRecognizer:fireTapGestureRec];
    [fireTapGestureRec release]; 
```

并写`fireTapped:`来处理事件。操纵杆也是如此。

**编辑** 第二个选项（在评论中建议）制作 UIView 的子类，例如

```
@interface fireView: UIView
@interface joystickView: UIView 
```

并为每个子类编写它自己的`touchesBegan:`或`touchesEnded:`

# c - 连接字符串 (2)

> ID：11283583
> 
> 赞同：0
> 
> 时间：2012-07-01T16:12:36.183
> 
> 标签：c, pointers, char

```
char *val1 = "/root";
char *val2 = "/p";
val1 = val1+val2; 
```

我想添加 2 个字符指针值并将其分配给第一个值。以上是代码片段。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T16:16:38.953

不能那样做。由于您有两个指针，因此尝试添加它们将尝试添加指针本身，而不是操纵它们指向的内容。要连接两个字符串，您需要拥有/分配一个足够大的缓冲区来容纳两者：

```
char *both = malloc(strlen(val1) + strlen(val2) + 1);
if (both != NULL) {
    strcpy(both, val1);
    strcat(both, val2);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T16:15:41.397

使用`strcat`or`strncat`函数连接字符串。C 没有字符串连接运算符。

# java - 清洁代码：依赖注入强制程序代码，如何重构

> ID：11283586
> 
> 赞同：1
> 
> 时间：2012-07-01T16:13:27.790
> 
> 标签：java, design-patterns, refactoring, ooad

我有以下课程：

```
  类验证器 {
    私有最终 SchemaFetcher schemaFetcher；

    @注入
    验证器（SchemaFetcher schemaFetcher）{...}
  }

  类 DatabaseSchemaFetcher 实现 SchemaFetcher {
     @覆盖
     Schema loadSchema(final SchemaDefinition schemaDef);

     @覆盖
     boolean compareSchemaWithSource(final SchemaDefinition schemaDef, final Schema updatedSchema);
  }

```

这只是其中一个示例，我还有一些其他类似的类，我将它们作为依赖项注入到其他类中。但它使我的 SchemaFetcher 类像一个单例，我不断地将 schemaDefinition 传递给它的每个方法。这似乎非常程序化，我实际上想让 SchemaDefinition 成为 DatabaseSchemaFetcher 类的实例变量，但在这种情况下，我将无法将 SchemaFetcher 对象注入到我的 Validator 类中，而我应该这样做

```
   验证（字符串模式名称）{
     SchemaDefinition schemaDef = buildSchemaDefinitionFrom(schemaName);
     SchemaFetcher fetcher = new DatabaseSchemaFetcher(schemaDef);
   }

```

但这使我与 fetcher 紧密耦合，这就是我想首先使用依赖注入的原因。

我可以看到我可能有一个 DatabaseSchemaFetcher 的默认构造函数，然后是一个 setSchemaDefintion() 设置器来实现这一点，但这违反了完全使用构造函数构建对象的原则。

如何改进这一点，使其没有程序样式获取器，但也将我的依赖项注入构造函数？我更喜欢构造函数注入，因为它清楚地定义了我的依赖项，而无需任何人查看类的实现来找出类在我使用工厂或服务定位器时使用的依赖项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T18:24:21.093

依赖注入是那些非常好的想法之一，它看起来非常好，以至于它被严重过度使用。我不会使用 DI 框架将 Fetcher 注入到验证器中。相反，我会让 DI 框架将工厂注入“main”。工厂使用适当的 SchemaDefinition 创建 Fetcher 并将其传递给 Validator。

请记住，我们想要一个将“main”与应用程序的其余部分分开的边界，并且所有依赖项都应该从“main”指向应用程序。应用程序不应该知道“main”。即“main”是应用程序的插件。

一般来说，应该使用 DI 注入到“main”中，然后 main 使用更传统的技术将工厂、策略或只是常规的旧抽象接口传递到应用程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T18:40:51.660

在这种情况下，我不确定彼此的用途`Dependecy Injection`和相互关系。`Procedural`

我认为真正的问题是您选择的对象建模方式并未反映既定目标。

在您提供的代码`Validator`中，我看不到任何用途。如果它的目的是验证`SchemaFetcher`对象，那么它可能不应该有超出验证规则的状态，然后接受任意`SchemaFetcher`对象进行验证。

至于`DataBaseSchemaFetcher`我再次难以理解这是做什么的。如果其声明的目的只是获取模式，那么它不需要关于`DatabaseSchema`对象的状态，因此应该接受`DatabaseSchema`它负责对`DatabaseSchema`. 任何内部状态都应该只与类的获取行为有关。

克服这些情况的一种尝试过且真正的方法`painted in a corner`是坐下来，非常努力地为每个班级分配一个单一的职责，并牢记以下几点：

1.  关于您要解决的确切问题的领域真的很难。

2.  不要解决任何你没有的问题。把你的可扩展性梦想扔掉。他们几乎总是错的，只会浪费大量时间。

3.  接受您的设计必然有缺陷，您将不得不在以后更改它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T16:43:09.460

为什么说您在第二个解决方案中与 SchemaFetcher 紧密耦合？
您在那里提供了一个接口，因此您不会与任何特定的实现耦合，而只是与 SchemaFetcher 的定义（即 SchemaFetcher 的合同）耦合
您可以考虑拥有一个 Validator 类，该类将其 CTOR SchemaDefinition，并且您的 DatabaseSchemaFetcher 可以为其保存一个字段。这样，如果需要，您还可以扩展 Validator 类更改验证逻辑。
但是，如何传递模式定义对象的问题又一次出现了。不确定是否应该在此处使用注入 - 考虑更改您的设计。

# ruby-on-rails - 遇到一个奇怪的错误：未定义的方法“user_profiles_path”

> ID：11283589
> 
> 赞同：1
> 
> 时间：2012-07-01T16:13:51.270
> 
> 标签：ruby-on-rails

这个错误告诉我 - 未定义的方法'user_profiles_path'，而我的路线就像'user_profile_path'。Profile 是用户的单例子资源。不知道是什么导致了这个错误。该错误由`<%= form_for [@user, @profile] do |f| %>`_form.html.erb 引发。

路线.rb：

```
devise_for :users, :path_names => { :sign_in => "login", :sign_up => "register" } do   
   get "/login", :to => "devise/sessions#new"
   get "/register", :to => "devise/registrations#new"
   get "/logout", :to => "devise/sessions#destroy"
   get '/account' => 'devise/registrations#edit'
 end

  root :to => "questions#redirect_on_visit" 

  match 'home', :to => "questions#index"

  resources :questions do
    resources :question_responses
  end

  resources :users do
    resource :profile
  end 
```

_form.html.erb：

```
<%= form_for [@user, @profile] do |f| %>

 <%= f.error_messages %>    

 <div class="field">
    <%= f.label :display_name, "Display Name" %><br />
    <%= f.text_field :display_name, :size => "43" %><br />
 </div>

 <div class="field">
    <%= f.label :current_location, "Current Location" %><br />
    <%= f.text_field :current_location, :size => "43" %><br />
 </div>

 <div><%= f.label :nationality, "Nationality" %><br />
    <%= f.collection_select :nationality, Profile::NATIONALITY, :include_blank => true %>
 </div><br />

 <div><%= f.label :home_place, "Home Place" %><br />
    <%= f.collection_select :home_place, Profile::HOME_PLACE, :include_blank => true %>
 </div><br />

  <div><%= f.label :occupation, "Occupation" %><br />
    <%= f.collection_select :occupation, Profile::OCCUPATION, :include_blank => true %>
  </div><br />

  <div><%= f.label :interest, "Interests" %><br />
    <%= f.collection_select :interest, Profile::INTERESTS, :include_blank => true %>
  </div><br />

  <div><%= f.label :hobby, "Hobbies" %><br />
    <%= f.collection_select :hobby, Profile::HOBBIES, :include_blank => true %>
  </div><br />

  <div class="field">
    <%= f.label :bio, "Short Bio" %><br />
    <%= f.text_area :bio, :size => "50x5" %>
  </div>

  <div class="submit">
    <%= f.submit "Create Profile" %>
  </div>

<% end %> 
```

profile_controller.rb：

```
class ProfilesController < ApplicationController

  before_filter :find_user

  def new
    @profile = @user.build_profile    
  end

  def edit

  end

  private

  def find_user
    @user = User.find(params[:user_id])
  end
end 
```

应用程序.html.erb：

```
<% if user_signed_in? %>
            <% if !current_user.try(:profile) %>
                Signed in as<div><%= link_to current_user.email, new_user_profile_path(current_user.id) %></div><br /><br />
            <% else %>
                Signed in as<div><%= link_to current_user.email, edit_user_profile_path(current_user.id) %></div><br /><br />
            <% end %>           
            Not you? <%= link_to "Sign out", logout_path %>
        <% else %>
            <%= link_to "Sign up", new_user_registration_path %> or <%= link_to "Sign in", new_user_session_path %>
        <% end %> 
```

路线：

```
user_profile POST   /users/:user_id/profile(.:format)                             profiles#create
               new_user_profile GET    /users/:user_id/profile/new(.:format)                         profiles#new
              edit_user_profile GET    /users/:user_id/profile/edit(.:format)                        profiles#edit
                                GET    /users/:user_id/profile(.:format)                             profiles#show
                                PUT    /users/:user_id/profile(.:format)                             profiles#update
                                DELETE /users/:user_id/profile(.:format) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:40:07.437

好的，此错误是此处报告的已知错误：[https ://github.com/rails/rails/issues/1769](https://github.com/rails/rails/issues/1769)

我找到了指定 URL 的正确方法。

`form_for([@user, @profile], url: user_profile_path(@user))`

在语法上，大括号很重要，form_for 和括号之间没有空格也很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T16:27:32.687

您可以通过在表单中​​手动指定 URL 来更正此问题：

```
<%= form_for [@user, @profile], :url => user_profile_path(@user) do |f| %> 
```

# google-maps - 谷歌室内地图 API

> ID：11283591
> 
> 赞同：0
> 
> 时间：2012-07-01T16:14:14.593
> 
> 标签：google-maps, google-maps-api-3, google-maps-mobile, indoor-positioning-system

如何在我的 Android 应用上访问 Google 室内地图？我目前有一个使用 Google Maps API 的 GPS 应用程序，但它没有显示瑞士的室内地图。

我可以使用 Android 上的官方 Google Maps 应用程序访问瑞士（Sihlcity，苏黎世机场）的室内地图，因此理想情况下它也可以在我的个人 Android 应用程序中使用。

它是使用相同的 Google Maps API 工作，还是有单独的室内地图逻辑？

非常感谢您的回复。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T21:38:23.637

Android 的“Google APIs”SDK 插件附带的“MapView”组件刚刚更新到“v2”，它看起来像：

[http://google-latlong.blogspot.com/2012/12/better-maps-in-your-android-apps.html](http://google-latlong.blogspot.com/2012/12/better-maps-in-your-android-apps.html)

文档在这里： [https ://developers.google.com/maps/documentation/android/](https://developers.google.com/maps/documentation/android/)

而取代旧 MapView 的 MapFragment（现在基于矢量和 3D）包括室内地图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T07:15:45.907

据我所知，它应该与用于户外/传统导航的 API 相同。在 Google Maps API 文档中，没有什么让我认为室内导航使用了不同的 API。

也许您在“官方”Android 设备（Google Maps 6.0/API 3.0，最新官方版本）和 GPS“定制”设备（不支持室内地图的旧版 Google Maps）上使用不同版本的 Google Maps API和导航），因此行为不同。

# python - python ldap属性查询

> ID：11283593
> 
> 赞同：2
> 
> 时间：2012-07-01T16:14:31.480
> 
> 标签：python, ldap

我正在尝试修改基于 python 的身份验证器以用于 murmur（voip 软件）以与我的 ldap 树一起使用。

LDAP 身份验证器可在以下位置获得：

[http://www.winex.org/linux/zealot/src/mumble-scripts/Authenticators/LDAP/LDAPauth.py](http://www.winex.org/linux/zealot/src/mumble-scripts/Authenticators/LDAP/LDAPauth.py)

它可以工作，但不太适合我的 ldap 布局，所以我必须对其进行一些修改。我知道一种可行的方法，但不幸的是，我对 python 的了解并不比我从谷歌学到的更多（不过我还有一些其他的编程专业知识）。

我的 ldap 布局如下所示：

```
charName=xxx, ou=people, dc=xxx, dc=com 
```

在此之下，存储了诸如此类的`userPassword`属性`login`。

上面的 python 脚本被定制为使用 ldap 绑定来进行身份验证。在这种情况下，我必须绑定为`"charName=logindatafromapp, ou=people, dc=xxx, dc=com"`. 不幸的是，人们不会登录，`"charName"`但使用`"login"`which 是一个属性，但与`"charName"`.

我不知道绑定到属性的方法，所以这是我的想法：

*   我首先以 ldap admin 身份绑定，然后搜索所有条目`"logindatafromapp"`并将该值与`"login"`. 如果找到匹配项，我会抓取匹配项并按照最初的预期`"charName"`重新绑定。`charName`

我目前坚持查询该`"charName"`值并将该值分配给一个变量，所以我可以在第二个 ldap 绑定中使用它（谷歌并没有真正帮助我）。

这是我的代码：

```
ldap_conn = ldap.initialize(ldap_uri, 0)
ldap_conn.bind_s("cn=admin,dc=xxxxxxxx,dc=com","pass")
res = ldap_conn.search_s('ou=people,dc=xxxxxx,dc=com', ldap.SCOPE_ONELEVEL,'login=trony',['charName'])
print(res) 
```

然后打印`"[('charName=Trony,ou=people,dc=xxxxxxx,dc=com', {'charName': ['Trony']})]"`.

( `"login=trony"`) 是一个临时过滤器，我必须用`applogin`var 替换它。我现在的问题是如何将`"Trony"`（在这种情况下）分配给变量？输出似乎是一个特殊的结构？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T16:18:23.513

“特洛尼”在

```
res[0][1]['charName'][0] 
```

你取列表的第一个元素——它是一个元组；然后是元组的第一个元素；这是一本字典；然后是键 'charName' 的字典值；这又是一个清单；然后是列表的第一个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T01:40:22.137

至少有两种选择：

*   使用您描述的方法使用您拥有的信息搜索条目，在这种情况下是`login`用户输入的属性值，然后使用在简单或 SASL 绑定中找到的 DN 或
*   使用带有身份映射的 SASL 来映射 authId（`login`属性的值），这样 SASL 绑定将在只有`login`属性值已知的情况下成功

第一种方法需要搜索然后绑定，第二种方法可能要求用户条目具有可逆密码（AES 是用于此目的的良好加密方案），具体取决于所选的 SASL 机制。使用带有 DIGEST-MD5 机制的 SASL 将提供一种映射身份的方法（所有专业质量的 LDAP 服务器都支持这种映射机制），并且无需通过网络以明文形式发送密码，但有缺点不像使用简单绑定那样安全，其中密码存储为加盐 SHA-2 摘要。尽管不应该使用 DIGEST-MD5，因为它需要可逆密码，因此不如使用强 SHA-2（带盐）安全，但它可用于需要它的应用程序。

# .net - 服务定位器 - 值得吗？

> ID：11283595
> 
> 赞同：7
> 
> 时间：2012-07-01T16:14:47.277
> 
> 标签：.net, design-patterns, service-locator

我们有一个大型解决方案（> 100 个项目），几乎每种类型都使用服务定位器（示例 1）或我们自己的类型字典（示例 2）进行实例化。

例如我们有：

```
IQuote quote = Registry.Resolve<IQuote>(); 
```

或者

```
IQuote quote = Registry.Find<IQuote>(args); 
```

第二个示例转到配置文件以查找要使用反射实例化的具体对象。

跟踪代码时会变得更加困难——因为不清楚使用的是什么具体类型——所以我们必须多次检查映射，因为我们试图学习代码的一部分。以上面的例子为例，按下 F12 on:`quote.DoSomething()`将带您进入界面定义。

实现起来也有点困难——我们需要一个接口 + 具体类 + 配置映射，而替代方案只有 1 个类。

想一想——我不知道有任何东西被“换掉”为另一种类型——所以虽然我们已经实现了 IoC，但我们没有使用它，或者至少——很少使用它。

所以 - 它真的值得吗？我们是否错误地/太多地实施了它？我是不是误会了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T08:02:31.997

你们正在使用的是被认为是反模式的**服务定位器，因为：**

1.  所有单元测试都必须使用**服务定位器**（使用 DI 不涉及**DI 容器**）
2.  您将整个架构耦合到服务定位器（在**DI**中，只有[Composition Root](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)使用**DI Container**）
3.  您无法立即看到组件的依赖关系（使用**DI**有**Constructor Injection**）
4.  您的单元测试变得更加复杂，因为您必须关心您的配置，以免其他测试错误地使用另一个配置（Tear Down）。

[http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx](http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-01T16:21:26.750

在我看来，你不需要在每个班级都考虑到 DI。我会使用以下策略：

1.  确定模块边界。
2.  在同一个模块中，尽可能使用具体的类。
3.  对于模块间通信，尽可能使用 DI。

模块应该是相对细粒度的。

在一些常见的地方您需要使用 DI，通常是可替换的数据源和（不经常）算法。使用常识来检查某些东西是否需要更换。如果您发现某些东西需要 DI 或受其影响，请不要犹豫，尽早进行重构。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-01T16:28:42.720

你展示的不是依赖注入，它是一个可配置的注册表（这也是一种模式，但完全不同）。所以，是的，看起来是个坏主意，也是一种误解。

为了能够从某些设计模式中获益，您必须预先了解这些好处。如果你不认识他们，那么你可能不应该打扰。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-01T16:17:11.027

如果您进行单元测试，则某种依赖注入对于存根或模拟...依赖项至关重要。（单元测试不应该遇到依赖，比如文件系统、数据库、网络等）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-01T17:12:24.287

我认为您将依赖注入的更一般概念与使用 DI 容器混淆了，这是实现非常灵活的 DI 形式的一种手段。[这](http://martinfowler.com/articles/injection.html)是一篇很好的文章，将 DI 解释为一个概念。

在您的场景中，在我看来，您可以摆脱 DI 容器，但如果只是为了可测试性，可能仍希望保留某种形式的 DI（正如其他人已经指出的那样）。一个常见的实现模式是实现“广泛的”构造函数，通过它*可以*注入依赖项并在单元测试中使用。此外，还会有“更窄”的构造函数，它们将实例化具体类并将它们传递给“广义”构造函数。这些可以在生产代码中使用，直到需要实际交换依赖项。

## 例子：

```
class MyClass
{   
    // This will be called from production code
    public MyClass() : this(new Foo(), new Bar())
    {}        

    // This will be called from tests and can be used in production code if needed
    public MyClass(IFoo foo, IBar bar)
    {
       //do whatever you want to do in the ctor here
    }
} 
```

# sql-server - SQL Server / .NET - 获取连接池大小

> ID：11283602
> 
> 赞同：0
> 
> 时间：2012-07-01T16:15:35.700
> 
> 标签：sql-server, connection-pooling

我有一个跨多个线程执行一系列任务的应用程序。当每个线程完成其工作单元时，它会通过生成一个新线程然后终止将其保存到 SQL Server 数据库（这是因为工作线程被限制为大约 10 个，但我从未遇到过 SQL Server 连接线程的限制，直到现在...）

最近，我遇到了这样的用例，其中 SQL Server 连接太多以至于池太大，SQL Server 客户端抱怨然后死了。

我可以控制我的 SQL 服务器连接拥有线程并让它们等待池中的其他连接返回，但是我必须首先知道允许多少个连接，但我能找到的所有信息都是关于如何设置池大小，而不是如何获得它。

# javascript - 在 IE 7 中，如果链接是使用 jQuery 创建的，如何获取链接的 href 属性的字面值？

> ID：11283607
> 
> 赞同：4
> 
> 时间：2012-07-01T16:16:15.747
> 
> 标签：javascript, jquery, internet-explorer-7

`attr`如果您在 HTML 中有一个常规链接，您可以使用 jQuery 的函数获取其 href 属性的值：

```
<a id="testLink" href="test/link.html">Test Link</a>`

>>> $('#testLink').attr('href');
testLink.html 
```

例子：

*   [http://jsfiddle.net/63RsQ/1/](http://jsfiddle.net/63RsQ/1/)

但是，如果链接是使用 jQuery 创建的，那么**在 IE 7**中，如果您单击链接，此函数将返回浏览器将访问的绝对 URL（例如[https://stackoverflow.com/questions/ask/testLink.html](https://stackoverflow.com/questions/ask/testLink.html)） ，而不是`href`属性的字面值。

例子：

*   [http://jsfiddle.net/xtrEB/10/](http://jsfiddle.net/xtrEB/10/)

我也试过`this`,`this.href`和`this.getAttribute('href')`, 它们都返回一个绝对 URL。

有什么方法可以`href`在 IE 7 中获取 jQuery 创建的链接属性的文字值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T16:43:29.573

如果您以 jQuery 强制使用的方式创建链接`.innerHTML`，它将无法正常工作，并记录在：[http](http://api.jquery.com/html/) ://api.jquery.com/html/ （也 [http://api.jquery.com/ jQuery/#creating-new-elements](http://api.jquery.com/jQuery/#creating-new-elements)）：

> 此方法使用浏览器的 innerHTML 属性。某些浏览器可能无法生成完全复制所提供的 HTML 源的 DOM。例如，版本 8 之前的 Internet Explorer 会将链接上的所有 href 属性转换为绝对 URL，版本 9 之前的 Internet Explorer 将无法正确处理 HTML5 元素，除非添加单独的兼容层。

要修复它，请以不强制 jQuery 使用的方式创建链接`.innerHTML`：

```
$('#test').append( $("<a>", {href: "test/link.html", text: "Test Link"})); 
```

[http://jsfiddle.net/xtrEB/12/](http://jsfiddle.net/xtrEB/12/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T16:39:11.480

我认为这是不可能的，至少在 IE7 中是不可能的。JQuery 使用`innerHTML`, 并且 IE 似乎在呈现时将 href 属性重写为完全限定域名 (FQDN)（已知早期版本的 IE 这样做）。因此，文字值在渲染时会丢失。如果你知道路径，你可以尝试使用一些字符串方程来找到它，从 url 中剥离域或其他东西。或者如果可能的话，完全忘记 IE<8。

[这篇文章](http://thingsinjars.com/post/371/investigating-ies-innerhtml/)可能会有所启发

如果您使用纯 javascript 和 DOM 方法添加元素，即使在 IE7 中也*可以*检索文字值。看到[这个jsfiddle](http://jsfiddle.net/uZqwJ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T16:24:56.990

试试这个：

```
$('a').click(function () {
    var hrf = this.href;
    alert('this.href: \n' + hrf.slice(hrf.lastIndexOf('/')+1, hrf.length) );
    return false;
}); 
```

[http://jsfiddle.net/xtrEB/5/](http://jsfiddle.net/xtrEB/5/)

# jquery - jQuery - 等待函数返回值

> ID：11283618
> 
> 赞同：3
> 
> 时间：2012-07-01T16:17:18.630
> 
> 标签：jquery, function, return, wait

我有一个 jquery 函数，用于发送带有 ajax 请求的电子邮件；

```
function sendMail(from,to,subject,message){
    var datastr="from="+from+"&to="+to+"&subject="+subject+"&message="+message;
    $.ajax({
        type: "POST",
        url: "mail.php",
        data: datastr,
        cache: false,
        success: function(html){
            return true;
        },
        error: function(jqXHR,status,error){
            return false;
        }
    });
} 
```

现在我想告诉用户邮件是否成功发送，如下所示：

```
$("#feedback").html("Sending email...");
if(sendMail("from@email.com","to@email.com","MySubject","MyMessage"))
   $("#feedback").html("Email sent.");
else
   $("#feedback").html("Error sending email."); 
```

但当然 jQuery 在发送邮件之前会处理 if 条件，因此条件为 false :-( 我如何告诉 jQuery 等到 sendMail 完成并返回一些东西？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-01T16:31:32.243

虽然给定的答案是有效的，但我会考虑将`sendmail`函数和 DOM 修改分开（即远离`$("#feedback").html...`回调`success/error`）。您可以通过返回`ajax`调用结果来做到这一点：

```
function sendMail(from,to,subject,message){
    var datastr="from="+from+"&to="+to+"&subject="+subject+"&message="+message;
    return $.ajax({
        type: "POST",
        url: "mail.php",
        data: datastr,
        cache: false
    });
} 
```

返回值[实现了 Promise 接口](http://api.jquery.com/jQuery.ajax/#jqXHR)，因此您可以这样做：

```
$("#feedback").html("Sending email...");
sendMail("from@email.com","to@email.com","MySubject","MyMessage")
    .done(function(){
        $("#feedback").html("Email sent.");
    })
    .fail(function(){
        $("#feedback").html("Error sending email.");
    }); 
```

请注意，我从 ajax 调用中删除了`success`and`error`字段，因为它们不是必需的，但是如果您需要它们来做其他事情，例如日志记录，您仍然可以使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T16:24:26.403

```
$("#feedback").html("Sending email...");
$.ajax({
    type: "POST",
    url: "mail.php",
    data: datastr,
    cache: false,
    success: function(html){
       if (sendMail("from@email.com","to@email.com","MySubject","MyMessage")) {
          $("#feedback").html("Email sent.");
       } else {
          $("#feedback").html("Error sending email.");
       }
    },
    error: function(jqXHR,status,error){
        $("#feedback").html("Error sending email.");
    }
}); 
```

不知道 sendMail 是什么，但如果那是您检查电子邮件是否已发送，是这样吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T18:02:16.977

您的函数不可能`sendMail`根据 AJAX 调用的结果返回 true/false（除非您使用同步请求，这几乎总是一个糟糕的主意）。这正是浏览器中 JavaScript 的工作方式，出于充分的理由，我不会在这里讨论。

相反，你必须告诉`$.ajax`即使成功或失败该做什么。

一种方法如下所示：

```
$.ajax({
  // omitting arguments for clarity
  success: function(){
    $("#feedback").html("Email sent.");
  },
  error: function(){
    $("#feedback").html("Error sending email.");
  }
}); 
```

# jquery - 两个先执行的关键帧

> ID：11283621
> 
> 赞同：0
> 
> 时间：2012-07-01T16:17:47.430
> 
> 标签：jquery, jquery-ui, css

我有一个 div，它需要两个效果，必须一个接一个地实现。我在两个动画之间使用延迟（）（在 jquery 中），但它不需要结果。实际上我想链接两个关键帧。建议的解决方案是什么？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T16:21:21.820

jQuery 的 animate() 有一个内置的回调函数：

```
$("#elementID").animate({top: 0}, 1000, function() {
    $(this).animate({top: 1000}, 1000);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T16:41:52.473

Webkit 有一个动画延迟属性，但那只是 Webkit。我强烈建议您在动画中使用 jQuery。

看看这个堆栈溢出问题： **http ://stackoverflow.com/questions/7825509/css3-chain-animations**

jQuery transit 也是一个很好的使用 CSS3 动画的插件，同时使用 jQuery 语法。 **http://ricostacruz.com/jquery.transit/**

# c# - 在 C# 中检测 HTTP 302 重定向到哪个 URI

> ID：11283623
> 
> 赞同：0
> 
> 时间：2012-07-01T16:18:01.043
> 
> 标签：c#, .net, windows

我正在尝试使用 HTTP 302 找出 URI 重定向到的 URL

例如，我有一个网页：[http://www.example.com/pagenothere.php](http://www.example.com/pagenothere.php)重定向到[http://www.google.com](http://www.google.com)

我使用了一种方法来尝试检索详细信息，但我无法通过它找到响应代码或重定向 url：

```
 HttpWebRequest request = (HttpWebRequest)WebRequest.Create(urlString);
        HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        request.Accept = "text/plain";

        MessageBox.Show("Response headers");
        MessageBox.Show("  Protocol version: " + response.ProtocolVersion);
        MessageBox.Show("  Status code: " + response.StatusCode);
        MessageBox.Show("  Status description: " + response.StatusDescription);
        MessageBox.Show("  Content encoding: " + response.ContentEncoding);
        MessageBox.Show("  Content length: " + response.ContentLength);
        MessageBox.Show("  Content type: " + response.ContentType);
        MessageBox.Show("  Last Modified: " + response.LastModified);
        MessageBox.Show("  Server: {0}", response.Server);
        MessageBox.Show("  Length using method: {0}\n", response.GetResponseHeader("Content-Length")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T16:29:27.963

尝试关闭 AllowAutoRedirect，这应该可以让您看到重定向响应。

[http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.allowautoredirect.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.allowautoredirect.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T16:21:14.580

重定向位置在响应的 Location 标头中返回。

[请参阅http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)的 14.30

# bash - 覆盖终端上的最后一行

> ID：11283625
> 
> 赞同：85
> 
> 时间：2012-07-01T16:18:09.023
> 
> 标签：bash, terminal, escaping

我的 bash 脚本如下所示：

```
echo "Description:"
while [ $finishInput -eq 0 ]; do
  read tmp
  desc="$desc"$'\n'"$tmp"
  if [ -z "$tmp" ]; then
    finishInput="1"
  fi
done
echo -n "Maintainer:"
read maintainer 
```

它读取 desc var，直到传递一个空行。在那之后，我想读其他的东西。

执行我当前的脚本时，它看起来像这样：

```
Description:
Line 1
Line 2

Maintainer: 
```

我想用“维护者：”覆盖最后一个空行。

我搜索了一个解决方案，但只找到了类似的建议

```
echo -n "Old line"
echo -e "\r new line" 
```

它保持在线并覆盖它。在我的情况下这是不可能的。

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2012-07-01T16:24:06.693

在您的示例中，您删除了同一行的文本。当您想返回上一行使用`\e[1A`并清除该行时，请使用`\e[K`：

```
echo 'Old line'
echo -e '\e[1A\e[Knew line' 
```

当你想`N`排队时，使用`\e[<N>A`

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2018-08-15T12:06:48.033

找到了一个很棒的[转义序列指南][1]，并想在这里展开一些讨论。

当你写到终端时，你会移动一个不可见的光标，就像你在任何文本编辑器中写一样。使用时`echo`，它会自动以换行符结束输出，将光标移动到下一行。

```
$ echo "Hello" && echo " World"
Hello
 World 
```

您可以使用`-n`来阻止新行，如果您在此之后再次回显，它将附加到该行的末尾

```
$ echo -n "Hello" && echo " World"
Hello World 
```

光标保持在原来的位置，就它自己而言，我们不能用它`-n`来覆盖上一行，我们需要将光标向左移动。为此，我们需要给它一个转义序列，让我们`echo`知道我们将使用它，然后通过提供一个将光标放在行首的`-e`回车来移动光标。`\r`

```
$ echo -n "Hello" && echo -e "\rWorld"
World 
```

这可能看起来有效，但看看会发生什么

```
$ echo -n "A longer sentance" && echo -e "\rShort sentance"
Short sentancence 
```

看到多余的字符了吗？简单地写在行上只会改变我们写它们的字符。

为了解决这个问题，上面接受的答案`\e[0K`在光标向左移动后使用转义字符擦除光标后的所有内容。即`\r`移动到开始`\e[0K`擦除结束。

```
$ echo -n "A longer sentance" && echo -e "\r\e[0KShort sentance"
Short sentance 
```

**重要** `\e`的是开始转义序列适用于`zsh`但不适用`sh`且不一定适用于`bash`，但`\033`适用于所有转义序列。如果你想让你的脚本在任何地方工作，你应该优先`\033`

```
$ echo -n "A longer sentance" && echo -e "\r\033[0KShort sentance"
Short sentance 
```

但是转义字符可以提供更多的实用性。例如`\033[1A`，将光标移动到上一行，这样我们就不需要`-n`上一个回显：

```
$ echo "A longer sentance" && echo -e "\r\033[1A\033[0KShort sentance"
Short sentance 
```

`\r`移到开头`\033[1A`上移`\033[0K`擦除到结尾

最后，这在我的书中有点乱，所以你可以把它变成一个函数：

```
overwrite() { echo -e "\r\033[1A\033[0K$@"; } 
```

using`$@`只是将函数的所有参数放入字符串中

```
$ echo Longer sentance && overwrite Short sentence
Short sentence 
```

希望对想了解更多的人有所帮助。[1]：[https ://shiroyasha.svbtle.com/escape-sequences-a-quick-guide-1](https://shiroyasha.svbtle.com/escape-sequences-a-quick-guide-1)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-12-05T23:59:50.303

[我从Dennis Williamsons Comment](https://stackoverflow.com/questions/11283625/bash-overwrite-last-terminal-line#comment14841764_11283860)构建了一个函数：

```
function clearLastLine() {
        tput cuu 1 && tput el
} 
```

感谢丹尼斯威廉姆森

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2018-04-17T22:34:34.227

如果您回显时没有换行符`echo -n "Something"`，您可以使用`\r`下一个回显来将“*光标*”移动到行首`echo -e "\\rOverwrite something"`。

[![bash覆盖终端行](../Images/d28dbc101e53fa0bec065f2e2c4dec98.png)](https://i.stack.imgur.com/0W2i1.gif)

```
#!/bin/bash

CHECK_MARK="\033[0;32m\xE2\x9C\x94\033[0m"

echo -e "\n\e[4mDoing Things\e[0m"
echo -n "doing thing 1..."
sleep 1
echo -e "\\r${CHECK_MARK} thing 1 done" 
```

请注意，如果您的新弦比旧弦短，旧弦的尾部仍然可见。注意`done..`上面的gif。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-10-31T20:54:43.907

如果您想在循环中运行脚本并且不破坏您的回滚，您可以使用以下模式：

```
while sleep 10s; do 
  echo -n $(script)
  echo -n -e "\e[0K\r"
done 
```

只需将`script`命令替换为您自己的命令即可。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-01T16:47:46.923

```
#!/bin/bash

echo "Description:"
while test -z $finishInput; do
 read -s tmp
 desc="$desc"$'\n'"$tmp"
 if [ -z "$tmp" ]; then
 finishInput=1
 else
    echo $tmp
 fi
 #echo "fi="$finishInput;
done
echo -n "Maintainer:"
read maintainer 
```

此解决方案避免了空行，但在行完成之前不会回显输入。

提示：我的 bash 版本不接受“[ $finishInput -eq 0 ]”。

# java - jsoup 选择元素

> ID：11283632
> 
> 赞同：0
> 
> 时间：2012-07-01T16:19:00.400
> 
> 标签：java, html, jsoup

我正在尝试使用 jsoup 抓取网站的数据。但是在获取一些文本时遇到了一些问题。

部分 html 看起来像这样

```
<p class="time">9:00</p> 
```

我可以使用代码行很好地抓住它：

```
Document doc = Jsoup.connect(url).get();
doc.select("p.time").text()); 
```

但下一点 html 看起来像这样：

```
<p class="date"><strong>FRIDAY 27<sup>th</sup></strong> JULY 2012</p> 
```

我不知道如何得到。使用该行：

```
doc.select("p.date").text()); 
```

只是给我一个空字符串。我已经尝试过它的变体（即选择“p.date”，然后尝试 date.select("strong")），但只是不断提出一个空字符串。

我该如何获取该日期文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T21:08:52.637

Unable to reproduce your problem.

```
Document doc = Jsoup.parse("<html><body><p class=\"date\"><strong>FRIDAY 27<sup>th</sup></strong> JULY 2012</p></body></html>");
String s = doc.select("p.date").text();
System.out.println(s); 
```

This prints: "FRIDAY 27th JULY 2012"

# c# - 解决方案中的 2 个项目，只有 1 个 COM 可见

> ID：11283640
> 
> 赞同：0
> 
> 时间：2012-07-01T16:19:38.980
> 
> 标签：c#, visual-studio-2010

我创建了一个包含 2 个项目的解决方案。我很困惑为什么其中一个项目在 COM 中是可见和可用的，而另一个则不是。我已将这两个项目标记为 COM 互操作。两者都是 COM 可见的。

```
Solution
 - ProjectA -> works with CreateObject
 - ProjectB -> Dependent on ProjectA, does not work with CreateObject 
```

这是已知的行为吗？

编辑 -

附加信息：两个项目属于不同的命名空间。两者都由 ProgId、ComVisible、ClassInterface、ComDefaultInterface 和 Guid 属性标记。

# php - 获取类别名称、永久链接和描述

> ID：11283646
> 
> 赞同：1
> 
> 时间：2012-07-01T16:19:59.527
> 
> 标签：php, wordpress

所以我需要列出一些类别，我可以列出它们，`wp_list_categories`但我还需要该类别的描述，我需要做这样的事情：

```
<a href="permalink">Category name</a>
The description here 
```

现在我被困住了，我不知道如何用 wordpress 做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T16:23:00.803

此页面显示如何添加类别描述：[http ://codex.wordpress.org/Function_Reference/category_description](http://codex.wordpress.org/Function_Reference/category_description)

它应该有你需要的一切，但为了快速参考，最简单的方法是：

```
<?php echo category_description(); ?> 
```

（在 Wordpress 循环中）

*编辑* 刚刚意识到，由于您将其与 wp_list_categories() 结合使用，因此您必须创建一个遍历类别列表并显示标题和描述的循环。

试试这个 Wordpress 支持页面：[http ://wordpress.org/support/topic/have-wp_list_categories-output-the-category-descpription](http://wordpress.org/support/topic/have-wp_list_categories-output-the-category-descpription)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T16:32:16.180

解决了：

```
 <?php 
        foreach(get_categories() as $category):
            echo $category->cat_name;
        echo category_description($category->cat_ID);
        endforeach;
    ?> 
```

# android - 真正的自定义按钮形状

> ID：11283653
> 
> 赞同：7
> 
> 时间：2012-07-01T16:20:57.110
> 
> 标签：android, transparent, android-custom-view, onclicklistener

给定任何形状（实心圆、星形、三角形、带透明区域的位图等），我想知道是否有可能（使用最新的 Android API）知道用户是否点击了视图，或者在视图之外.

例如，如果我有一个圆形按钮，我想知道用户是否点击了圆圈内，而不是在圆圈外。

是否可以？

如果不是，也许我可以轮询触摸事件的像素，如果它是透明的，则忽略它，如果不是，将其作为点击事件处理？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T11:46:15.203

```
ImageView image=(ImageView) findViewById(R.id.imageView1);
image.setOnTouchListener(this);
Bitmap bitmap = ((BitmapDrawable)image.getDrawable()).getBitmap();    

@Override
public boolean onTouch(View v, MotionEvent event) {
    // TODO Auto-generated method stub
    int pixel = bitmap.getPixel((int)event.getX(), (int)event.getY());
    int alphaValue=Color.alpha(pixel);
    return true;
} 
```

通过这种方式，您可以获得所触摸像素的 alpha 值。现在您可以轻松检查触摸的像素是否透明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T11:31:06.667

我也想做类似的事情，最后我用 FrameLayout 进行了调整。FrameLayout 允许您在彼此之上添加多个视图。

添加一个框架布局。在其中您可以添加一个“视图”并将其高度和宽度设置为 match_parent。在视图顶部，添加您想要的按钮。

然后在您的代码中，获取 View 的引用并在其上设置 onClickListener 以便每当用户触摸该 View 时，您就可以处理该事件。在其他按钮上设置点击侦听器。

现在只需处理您的触摸事件。您现在将知道用户是否单击了按钮或按钮外部（用户单击了视图）。

如果要创建透明或半透明按钮，请查看[https://stackoverflow.com/a/11689915/1117338](https://stackoverflow.com/a/11689915/1117338)。我希望这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T11:41:01.420

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    FrameLayout root = (FrameLayout)findViewById(R.id.root);
    root.setOnTouchListener(new OnTouchListener() {         
        public boolean onTouch(View v, MotionEvent event) {
            if (v.getId() == ID){
                // Your code
            }
            return true;
        }
    });
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-28T21:28:11.773

好的，我找到了适用于任何类型视图的有效解决方案。

一些注意事项：

*   遗憾的是，它使用了视图大小的位图，但只使用了很短的时间。

    之后，它保持在可见区域上的位置和可见区域之外的位置。

*   我可以通过制作一个带有标志的整数数组来使其对内存更加友好。目前它是一个简单的布尔数组。

*   我可以改为在 JNI 中检查位图的 alpha 值，并避免我将位图和数组放在一起的（短）时间。

*   如果有人可以帮助使它变得更好，那真的很棒。

这是代码：

```
public class MainActivity extends Activity
  {
  boolean[] _inVisibleAreaMap;
  private int _width,_height;

  @Override
  protected void onCreate(final Bundle savedInstanceState)
    {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    final View view=findViewById(R.id.imageView1);
    view.setDrawingCacheEnabled(true);
    runJustBeforeBeingDrawn(view,new Runnable()
      {
        @Override
        public void run()
          {
          final Bitmap bitmap=view.getDrawingCache();
          _width=bitmap.getWidth();
          _height=bitmap.getHeight();
          _inVisibleAreaMap=new boolean[_width*_height];
          for(int y=0;y<_width;++y)
            for(int x=0;x<_height;++x)
              _inVisibleAreaMap[y*_width+x]=Color.alpha(bitmap.getPixel(x,y))!=0;
          view.setDrawingCacheEnabled(false);
          bitmap.recycle();
          }
      });
    view.setOnTouchListener(new OnTouchListener()
      {
        @Override
        public boolean onTouch(final View v,final MotionEvent event)
          {
          final int x=(int)event.getX(),y=(int)event.getY();
          boolean isIn=x>=0&&y>=0&&x<_width&&y<_height;
          // if inside bounding box , check if in the visibile area
          if(isIn)
            isIn=_inVisibleAreaMap[y*_width+x];
          if(isIn)
            Log.d("DEBUG","in");
          else Log.d("DEBUG","out");
          return true;
          }
      });
    }

  private static void runJustBeforeBeingDrawn(final View view,final Runnable runnable)
    {
    final ViewTreeObserver vto=view.getViewTreeObserver();
    final OnPreDrawListener preDrawListener=new OnPreDrawListener()
      {
        @Override
        public boolean onPreDraw()
          {
          runnable.run();
          final ViewTreeObserver vto=view.getViewTreeObserver();
          vto.removeOnPreDrawListener(this);
          return true;
          }
      };
    vto.addOnPreDrawListener(preDrawListener);
    }
  } 
```

如果 imageView 已经将它的 width&height 设置为 wrap_content，并且它确实得到了它需要的大小，那么只有这样你才能使用[Adnan Zahid 解决方案](https://stackoverflow.com/a/11739393/878126)，它可以这样写：

```
public class MainActivity extends Activity
  {
  private int _width,_height;

  @Override
  protected void onCreate(final Bundle savedInstanceState)
    {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    final ImageView image=(ImageView)findViewById(R.id.imageView1);
    final Bitmap bitmap=((BitmapDrawable)image.getDrawable()).getBitmap();
    _width=bitmap.getWidth();
    _height=bitmap.getHeight();
    image.setOnTouchListener(new OnTouchListener()
      {
        @Override
        public boolean onTouch(final View v,final MotionEvent event)
          {
          final int x=(int)event.getX(),y=(int)event.getY();
          boolean isIn=x>=0&&y>=0&&x<_width&&y<_height;
          if(isIn)
            {
            final int pixel=bitmap.getPixel((int)event.getX(),(int)event.getY());
            final int alphaValue=Color.alpha(pixel);
            isIn=alphaValue!=0;
            }
          if(isIn)
            Log.d("DEBUG","in");
          else Log.d("DEBUG","out");
          return true;
          }
      });
    }
  } 
```

编辑：替代 runJustBeforeBeingDrawn：[https ://stackoverflow.com/a/28136027/878126](https://stackoverflow.com/a/28136027/878126)

# c++ - 如何向量化这个程序

> ID：11283655
> 
> 赞同：1
> 
> 时间：2012-07-01T16:21:12.483
> 
> 标签：c++, eigen

下面的程序（嗯，“从这里”之后的行）是一个我必须经常使用的结构。我想知道是否有可能（最终使用 eigen 库中的函数）矢量化或以其他方式使该程序运行得更快。

本质上，给定一个向量`float` `x`，这个构造恢复了向量 中已排序元素`x`的`int`索引`SIndex`。例如，如果 的第一个条目`SIndex`是 10，则表示 的第 10 个元素`x`是 的最小元素`x`。

```
#include <algorithm>
#include <iostream>
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <vector>

using std::vector;
using namespace std;

typedef pair<int, float> sortData;
bool sortDataLess(const sortData& left, const sortData& right){
    return left.second<right.second;
}

int main(){
    int n=20,i;
    float LO=-1.0,HI=1.0;
    srand (time(NULL));
    vector<float> x(n);
    vector<float> y(n);
    vector<int> SIndex(n);  
    vector<sortData> foo(n);
    for(i=0;i<n;i++) x[i]=LO+(float)rand()/((float)RAND_MAX/(HI-LO));
    //from here:
    for(i=0;i<n;i++) foo[i]=sortData(i,x[i]);
    sort(foo.begin(),foo.end(),sortDataLess);
    for(i=0;i<n;i++){
        sortData bar=foo[i];
        y[i]=x[bar.first];
        SIndex[i]=bar.first;
    }
    for(i=0;i<n;i++) std::cout << SIndex[i] << std::endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T19:44:55.950

这是一个排序问题，这是无法回避的事实，并且矢量化不一定能大大改善排序。例如，快速排序的分区步骤可以并行进行比较，但它需要选择并存储通过比较的 0-<em>n 个值。这绝对可以做到，但它开始抛弃你从矢量化中获得的优势——你需要从比较掩码转换为随机掩码，这可能是一个查找表（不好），并且你需要一个可变大小的存储，这意味着没有对齐（不好，虽然[可能没那么坏](http://lemire.me/blog/archives/2012/05/31/data-alignment-for-speed-myth-or-reality/)）。Mergesort 需要合并两个排序列表，在*某些*情况下可以通过向量化来改进，但在最坏的情况下（我认为）需要与标量情况相同的步数。

而且，当然，您从矢量化中获得的任何主要速度提升都很有可能已经在您的标准库的`std::sort`实现中完成。但是，要获得它，您需要使用默认比较运算符对原始类型进行排序。

不过，如果您担心性能，您可以轻松避免最后一个循环。只需使用浮点数组作为比较对索引列表进行排序：

```
struct IndirectLess {
    template <typename T>
    IndirectLess(T iter) : values(&*iter) {}

    bool operator()(int left, int right)
    {
        return values[left] < values[right];
    }

    float const* values;
};

int main() {
    // ...
    std::vector<int> SIndex;
    SIndex.reserve(n);
    for (int i = 0; i < n; ++i)
        SIndex.push_back(n);

    std::sort(SIndex.begin(), SIndex.end(), IndirectLess(x.begin()));
    // ...
} 
```

现在您*只*生成了排序索引列表。您可能会丢失一些缓存位置，因此对于非常大的列表*可能*会更慢。到那时，可能会根据架构对最后一个循环进行矢量化。不过，这只是数据操作——读取四个值，将第一个和第三个存储在一个地方，将第二个和第四个存储在另一个地方——所以我不指望 Eigen 在这一点上有多大帮助。

# visual-studio-2010 - 摆脱 VS2010-Silverlight5 中的设计时 ArgumentNullException 警告

> ID：11283658
> 
> 赞同：0
> 
> 时间：2012-07-01T16:21:21.907
> 
> 标签：visual-studio-2010, silverlight-5.0, design-time

我有一个 Silverlight 表单，它执行基于异常的数据验证。我学习了如何通过以下方式进行数据验证：

设置要验证的控件如下：

```
<TextBox Text="{Binding Mode=TwoWay,NotifyOnValidationError=True, Source={StaticResource docSan}, Path= metadati.paziente.residenza, ValidatesOnExceptions=True}"/> 
```

使目标属性按如下方式工作

```
public new string residenza
    {
        get { return base.residenza; }
        set
        {
            if (string.IsNullOrEmpty(value)) throw new ArgumentNullException("value");
            base.residenza = value;
        }
    } 
```

基类以某种`INotifyPropertyChanged`方式定义非验证属性

不幸的是，VS2010 在设计时警告我每个文本框的异常。这不会阻止应用程序运行（它工作**正常**），但它只是烦人。

有人知道如何告诉 VS，如果在设计时没有指定任何值，那么代码自然会抛出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T18:41:37.863

如果我理解正确，是`if ... throw`设置器中的语句导致设计器发出警告吗？

我认为您可以使用`DesignerProperties.IsInDesignTool`来防止此行在设计时运行：

```
set
{
    if (!System.ComponentModel.DesignerProperties.IsInDesignTool)
    {
        if (string.IsNullOrEmpty(value)) throw new ArgumentNullException("value");
    }
    base.residenza = value;
} 
```

# android - 如何从 ContextMenu 上的 menuInfo 获取列表项 id

> ID：11283668
> 
> 赞同：1
> 
> 时间：2012-07-01T16:22:06.123
> 
> 标签：android

当我运行调试器时，我可以`ContextMenuInfo menuInfo`从方法中查看该变量，`onCreateContextMenu`并看到它保存了长时间按下的列表项的 id，但我怎样才能使用该值？

**编辑** 这里是我需要信息的地方

```
@Override
    public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo){
        if(mNum == 1){
            menu.setHeaderTitle("Incident List Menu");
            menu.add(Menu.NONE,6,0,"- Take Photo");
            menu.add(Menu.NONE, INCIDENT_DELETE, 1, "- Delete");
            menu.add(Menu.NONE, INCIDENT_DELETE_ALL, 2, "- Delete All");
        }else if(mNum == 2){
            Cursor c = getActivity().getContentResolver().query(StatusList.STATUS_URI,new String[] {StatusList.STATUS_PERMISSIONS},StatusList.STATUS_ID+"="+, selectionArgs, sortOrder)
            Log.d("MainActivity", "status list");
        }else if(mNum == 3){
            menu.setHeaderTitle("Distribution List Menu");
            menu.add(Menu.NONE, DL_DELETE, 0, "- Delete");
            menu.add(Menu.NONE, DL_DELETE_ALL, 1, "- Delete All");
        }else if(mNum == 4){

        }else if(mNum == 5){

        }
    } 
```

我需要这里的 ID 进行查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T16:39:41.650

将提供的`ContextMenuInfo`对象转换为`AdapterView.AdapterContextMenuInfo`对象，然后使用`info.position`or`info.id`或其他。

# xslt - 使用 xslt 删除 xsi:type

> ID：11283670
> 
> 赞同：2
> 
> 时间：2012-07-01T16:22:12.973
> 
> 标签：xslt

我有以下 XML。我能够删除所有命名空间，但无法使用 XSL 删除 xsi:type。

XML:

```
<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<StudentResult xmlns='http://ns.xyz.org/2004-08-02' xmlns:xsd='http://www.w3.org/2001/XMLSchema' xmlns:ns1='http://ns.xyz.org/2004-08-02' xmlns:soapenv='http://schemas.xmlsoap.org/soap/envelope/' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:type='ns1:StudentResult'>
<StudentId idOwner='xyz'><IdValue name='ClientId'>9103-XML</IdValue></StudentId>
<ClientOrderId idOwner='Cloud'><IdValue name='OrderNumber'>272454</IdValue></ClientOrderId>
<Results>false</Results>
</StudentResult> 
```

期望的输出：

```
<?xml version="1.0" encoding="utf-8"?>
<StudentResult>
<StudentId idOwner="xyz"><IdValue name="ClientId">9103-XML</IdValue></StudentId>
<ClientOrderId idOwner="Cloud"><IdValue name="OrderNumber">272454</IdValue></ClientOrderId>
<Results>false</Results>
</StudentResult> 
```

这是我使用的 xslt，但没有帮助。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output indent="yes" method="xml" encoding="utf-8" />
<xsl:template match="/|comment()|processing-instruction()">
<xsl:copy>
<xsl:apply-templates/>
</xsl:copy>
</xsl:template>
<xsl:template match="*">
<xsl:element name="{local-name()}">
<xsl:apply-templates select="@*|node()"/>
</xsl:element>
</xsl:template>
<xsl:template match="@*">
<xsl:attribute name="{local-name()}">
<xsl:value-of select="."/>
</xsl:attribute>
</xsl:template>
<xsl:template match="/">    
<xsl:apply-templates select="@*|node()|processing-instruction()"/>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T16:49:14.557

添加模板

```
<xsl:template match="@xsi:type"/> 
```

加

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  exclude-result-prefixes="xsi"> 
```

在样式表的根元素上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T20:57:01.570

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()[not(self::*)]">
  <xsl:copy/>
 </xsl:template>

 <xsl:template match="*">
  <xsl:element name="{local-name()}">
   <xsl:apply-templates select="@*[not(name()='xsi:type')]|node()"/>
  </xsl:element>
 </xsl:template>

 <xsl:template match="@*">
  <xsl:attribute name="{local-name()}">
    <xsl:value-of select="."/>
  </xsl:attribute>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<StudentResult
 xmlns='http://ns.xyz.org/2004-08-02'
 xmlns:xsd='http://www.w3.org/2001/XMLSchema'
 xmlns:ns1='http://ns.xyz.org/2004-08-02'
 xmlns:soapenv='http://schemas.xmlsoap.org/soap/envelope/'
 xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'
 xsi:type='ns1:StudentResult'>
    <StudentId idOwner='xyz'>
        <IdValue name='ClientId'>9103-XML</IdValue>
    </StudentId>
    <ClientOrderId idOwner='Cloud'>
        <IdValue name='OrderNumber'>272454</IdValue>
    </ClientOrderId>
    <Results>false</Results>
</StudentResult> 
```

**产生想要的正确结果：**

```
<StudentResult>
   <StudentId idOwner="xyz">
      <IdValue name="ClientId">9103-XML</IdValue>
   </StudentId>
   <ClientOrderId idOwner="Cloud">
      <IdValue name="OrderNumber">272454</IdValue>
   </ClientOrderId>
   <Results>false</Results>
</StudentResult> 
```

# php - mysql_real_escape_string 不适用于 post PHP

> ID：11283671
> 
> 赞同：1
> 
> 时间：2012-07-01T16:22:21.203
> 
> 标签：php, mysql, post

也许我错了，但对我来说它不起作用，

我正在尝试使用这样的`mysql_real_escape_string()`功能`$_POST['value'];`，

```
mysql_real_escape_string($_POST['value']); 
```

但它不起作用，但如果我尝试这个，

```
$value = $_POST['value'];
mysql_real_escape_string($value); 
```

它工作得很好，有什么建议吗？

编辑：

我的代码是这样的，

```
$post = array('id', 'name');
$postArray = array();
foreach($post as $pa){
    $postArray[$pa] = mysql_real_escape_string($_POST[$pa]);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T16:24:59.353

您是否将结果分配`mysql_real_escape_string()`给任何东西？它不会就地修改变量。

```
$value = mysql_real_escape_string($_POST['value']); 
```

* * *

**回应您的编辑-您不`foreach`应该循环`$post`吗`$postArray`？**

```
foreach($postArray as $pa){ 
```

应该...

```
foreach($post as $pa){ 
```

* * *

**第二次编辑：请使用此代码并告诉我们它的输出：**

```
var_dump($_POST);
$post = array('id', 'name');
$postArray = array();
foreach($post as $pa){
    $postArray[$pa] = mysql_real_escape_string($_POST[$pa]);
}
var_dump($postArray); 
```

* * *

**最终编辑：**

好的，您的问题是您传入的 post 变量被读取为数组，因此您不能`mysql_real_escape_string()`直接调用这些变量（因为它是为字符串设计的，而不是数组）。

将您的代码更改为：

```
$post = array('id', 'name');
$postArray = array();
foreach($post as $pa){
    if(is_array($_POST[$pa])) {
        $postArray[$pa] = mysql_real_escape_string($_POST[$pa][0]);
    } else {
        $postArray[$pa] = mysql_real_escape_string($_POST[$pa]);
    }
} 
```

事情应该会奏效。

# tcl - 什么是好的Tcl编译器

> ID：11283673
> 
> 赞同：-1
> 
> 时间：2012-07-01T16:22:38.857
> 
> 标签：tcl

我想学习 Tcl 编程，但是我在编译源代码时遇到了麻烦。我需要好的编译工具。你能帮助我吗？我应该使用什么编译器或最好的编译器？谢谢 ！！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T20:33:10.990

Tcl 是一种编程语言。它有许多实现，但您最有可能掌握的是`tclsh`. 基于 Linux 的系统通常已经安装了一个（如果没有，肯定有一种方法可以从您的发行版的软件包存储库中获取它）。*在 Windows 上，强烈*建议使用来自 ActiveState 的 ActiveTcl 分发。我不知道是否所有的 MacOS X 系统都有它（我的有），但无论如何建议你获得 ActiveTcl，因为它还包括许多额外有用的包，用于你可以用 Tcl 做的事情，而且更有可能是最新的-日期。

您可能还会遇到`wish`and`expect`程序；这些实际上只不过是`tclsh`加载了一个额外的库并为您预先激活。（对于`wish`，该库是执行 GUI 的 Tk，对于`expect`该库是执行终端交互的 Expect。）它们包含的 Tcl与in*相同*`tclsh`，但有一些额外的命令。

在此处询问有关 Tcl 的未来问题时，如果您提及`info patchlevel`正在使用的确切版本（如 Tcl 的命令所报告的那样），将会有很大帮助。

* * *

就编译器而言，您通常不需要一个。使用的实现引擎`tclsh`实际上根据需要动态编译您的 Tcl 程序（到字节码），并且速度如此之快，以至于加载字节码实际上比从头开始重新编译要慢。（我们做了一些测试并决定，无论我们应该做什么加速，保存字节码都不会成为策略的一部分，因为没有意义。）使用带有 Tcl 的编译器的唯一真实案例是你在哪里使用它*掩盖*_*代码，使用户难以查看和更改。但唯一合理的情况是在做商业应用程序时（这违反了开源软件的基本原则），所以如果你需要它，你将被引导到商业解决方案。（ActiveState 销售这样的产品。） OTOH，如果你真的更多地考虑打包——把你的代码放在一个整洁的包裹中——那么我们有一个不同的技术，starkit，它确实非常整洁。但这离主题有点远了……</p>*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T17:04:54.960

如果您使用的是 linux，那么您的系统中可能已经安装了 Tcl。在控制台中输入 tclsh 看看是否有效，或者在软件安装工具中查找 Tcl。

如果您使用的是 Windows 或 MacOSX，您可以从[此处](http://www.activestate.com/activetcl/downloads)的 ActiveState 下载它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T16:27:51.723

[tcl](http://tcl.tk/)是一种[脚本语言](http://en.wikipedia.org/wiki/Scripting_language)（恕我直言，不是特别好的语言；我认为 Ruby、Python、Ocaml、Lua 更好）。它的实现通常不会被编译（也许一些实验性的实现可能会使用[JIT](http://en.wikipedia.org/wiki/Just-in-time_compilation)技术）。是构建在解释器`Tk`之上的图形工具包。`Tcl`

特别是，使用 Tcl 没有“编译”步骤（因为您不需要任何“编译器”来*使用*-ie 在*Tcl*中编写一些脚本）；你只需要它的[解释器](http://en.wikipedia.org/wiki/Interpreter_%28computing%29)。（您可能需要一个*C*编译器来从其源代码构建`tcl`解释器，您通常可以安装解释器二进制文件；详细信息取决于您的系统）。

因此，您只需要使用您的编辑器（例如，Emacs、Gedit 甚至是记事本，如果您仅限于 Windows）来开始编写一些*Tcl*脚本。

如果您正在学习编码，我强烈建议您在学习*Tcl之前学习一些更好的编程语言（例如**Scheme*或*Ocaml*或*Python*）。*Tcl*中缺乏模块化很快就会咬你！*

# ruby-on-rails - 在渲染中传递参数 - Rails 3

> ID：11283675
> 
> 赞同：13
> 
> 时间：2012-07-01T16:22:47.600
> 
> 标签：ruby-on-rails, ruby-on-rails-3, parameters, partial, renderpartial

我已经看到了一些关于此的问题，但一直无法解决...

我试图在渲染部分时传递参数（类似于 domainname.com/memory_books/new?fbookupload=yes）

现在，我使用这条线：

```
<%= render :partial => '/memory_books/new', :fbookupload => "yes" %> 
```

在部分中，我尝试使用以下方法获取 fbookupload 的内容：

```
<%= fbookupload %> 
```

这给出了“未定义的局部变量”错误和

```
<%= params.inspect %> 
```

它不显示 fbookupload 作为参数。

我怎样才能部分传递参数：fbookupload？

谢谢你。

**更新：**

这与我在渲染中渲染这个事实有什么关系吗？

即具有的页面（/fbookphotos/show）

```
<%= render :partial => '/memory_books/new', :fbookupload => "yes" %> 
```

正在由具有（帖子/显示）的另一个页面通过以下方式呈现：

```
<%= render :partial => '/fbookphotos/show' %> 
```

所以我在渲染中渲染它。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-01T16:26:35.530

试试这个：

```
<%= render :partial => '/memory_books/new', :locals => {:fbookupload => "yes"} %> 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-11-17T14:11:42.170

将其从评论中删除以供后代使用。这个语法是正确的：

```
render '/memory_books/new', fbookupload: "yes" 
```

但是，如果在没有指定局部变量的情况下渲染相同的局部变量，例如

```
render '/memory_books/new' 
```

然后`fbookupload`变量变得不可用。这同样适用于多个局部变量，例如

```
render 'my_partial', var1: 'qq', var2: 'qqq' 
```

如果只发生一次就会起作用。但是如果代码中的其他地方有类似的东西

```
render 'my_partial', var1: 'qq' 
```

然后`var2`将变得不可用。去搞清楚 ...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T16:42:42.487

按照自己的方式进行：

在主视图中：

```
<% fbookupload = "yes" %>
<%= render :partial => '/memory_books/new', :locals => {:fbookupload => fbookupload} %> 
```

在部分：

```
<%= fbookupload %> 
```

第二个选项：

理想情况下，在控制器中，否则在视图中，定义一个实例变量：`@fbookupload = "yes"`. 然后它无处不在。部分将是：`<%= @fbookupload %>`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-01T16:47:34.277

参数只是请求参数，所以如果你想在参数中传递它，你必须将它添加到你的 url`?fbookupload=yes`或分配它`params[:fbookupload] = "yes"`，但我认为这不是一个好主意。

但是如果你需要使用`params[:fbookupload]', u can replace it with`params[:fbookupload] || fbookupload'，并在局部哈希中传递 fbookupload。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-11-06T16:23:24.310

`render`可以带或不带`partial`参数调用，这两种形式之间的差异似乎有些混乱。

以下两个是等价的：

```
<%= render "my_partial', my_param: true %> 
```

和：

```
<%= render partial: "my_partial', locals: { my_param: true } %> 
```

第一个是允许您省略的速记`partial:`。使用这种简写方式，局部变量也不会嵌套在`locals:`. 这在[文档](https://api.rubyonrails.org/classes/ActionView/PartialRenderer.html)中有很好的解释（请参阅“呈现默认情况”）。

在上述两种情况下，您可以`my_param`直接使用`my_param`.

另一个令人困惑的来源是，如果您在某处渲染部分而没有传递`my_param`，那么当它尝试访问它时，部分将失败。为了解决这个问题，您可以使用而不是访问本地，`local_assigns[:my_param]`如果未定义参数而不是错误，`my_param`这将为您提供，如[本文档](https://api.rubyonrails.org/classes/ActionView/Base.html#class-ActionView::Base-label-Passing+local+variables+to+sub+templates)中所述。另一种选择是在访问它之前使用。`nil``defined?(my_param)`

# arrays - 如何计算滚动波动率

> ID：11283677
> 
> 赞同：1
> 
> 时间：2012-07-01T16:23:05.183
> 
> 标签：arrays, r

我正在尝试设计一个计算 30 天滚动波动率的函数。我有一个包含 3 列的文件：日期和 2 只股票的每日回报。

我怎样才能做到这一点？我在总结前 30 个条目以获得我的 vol 时遇到问题。

编辑：

因此它将读取一个包含 3 列的 excel 文件：日期和每日收益。

daily.ret = read.csv("abc.csv")

例如日期 stock1 stock2 01/01/2000 0.01 0.02

等等等等，有多年的数据。我想计算滚动 30 天的年化成交量。这是我的功能：

```
calc_30day_vol = function()
{
stock1 = abc$stock1^2
stock2 = abc$stock1^2
j = 30
approx_days_in_year = length(abc$stock1)/10
vol_1 = 1: length(a1) 
vol_2 = 1: length(a2)

for (i in 1 : length(a1))
{
vol_1[j] = sqrt( (approx_days_in_year / 30 ) * rowSums(a1[i:j])

vol_2[j] = sqrt( (approx_days_in_year / 30 ) * rowSums(a2[i:j])

j = j + 1
}

} 
```

所以 stock1 和 stock 2 是来自 excel 文件的每日收益的平方，需要计算 vol。vol_1 和 vol_2 的条目 1-30 为空，因为我们正在计算 30 天的 vol。我正在尝试使用 rowSums 函数对前 30 个条目的每日收益平方求和，然后在每次迭代中向下移动索引。所以从第 1-30 天、第 2-31 天、第 3-32 天等开始，这就是我定义“j”的原因。

我是 R 的新手，如果这听起来很愚蠢，我深表歉意。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T19:22:54.767

这应该让你开始。

首先，我必须创建一些看起来像您描述的数据

```
library(quantmod)
getSymbols(c("SPY", "DIA"), src='yahoo')
m <- merge(ROC(Ad(SPY)), ROC(Ad(DIA)), all=FALSE)[-1, ]
dat <- data.frame(date=format(index(m), "%m/%d/%Y"), coredata(m))
tmpfile <- tempfile()
write.csv(dat, file=tmpfile, row.names=FALSE) 
```

现在我有一个 csv，其中包含您非常特定格式的数据。用于`read.zoo`读取 csv 然后转换为 xts 对象（有很多方法可以将数据读入 R。请参阅[R Data Import/Export](http://cran.r-project.org/doc/manuals/R-data.html)）

```
r <- as.xts(read.zoo(tmpfile, sep=",", header=TRUE, format="%m/%d/%Y"))
# each column of r has daily log returns for a stock price series
# use `apply` to apply a function to each column.
vols.mat <- apply(r, 2, function(x) {
    #use rolling 30 day window to calculate standard deviation.
    #annualize by multiplying by square root of time
    runSD(x, n=30) * sqrt(252)
})
#`apply` returns a `matrix`; `reclass` to `xts`
vols.xts <- reclass(vols.mat, r) #class as `xts` using attributes of `r`
tail(vols.xts)
#           SPY.Adjusted DIA.Adjusted
#2012-06-22    0.1775730    0.1608266
#2012-06-25    0.1832145    0.1640912
#2012-06-26    0.1813581    0.1621459
#2012-06-27    0.1825636    0.1629997
#2012-06-28    0.1824120    0.1630481
#2012-06-29    0.1898351    0.1689990

#Clean-up
unlink(tmpfile) 
```

# java - ImageIO 和 URL

> ID：11283680
> 
> 赞同：3
> 
> 时间：2012-07-01T16:23:32.100
> 
> 标签：java, url, bufferedimage, javax.imageio

由于图像名称中有空格，使用 ImageIO.read 将图像加载到 BufferedImage（示例中的图像）时会遇到一些烦人的问题；

```
image = ImageIO.read(new File(getClass().getResource("/Pictures/H ello.jpg").getPath())); 
```

如果我将 url(?) "/Pictures/Hello ello.jpg" 重命名为 "/Pictures/Hello.jpg" 并将源图像重命名为 Hello.jpg 它工作得很好。

我已经尝试用 %20 替换空格，如在其他问题中发现的那样，并将 ' ' 的字符替换为 '+'。那么我做错了什么？编码能解决我的问题吗？我该怎么做？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T16:36:17.980

以下可能有效。

```
image = ImageIO.read(getClass().getResourceAsStream("/Pictures/H ello.jpg")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T16:36:37.970

```
java.net.URL path = getClass().getResource("/Pictures/H ello.jpg");
ImageIO.read(new File(path.toURI())); 
```

这行得通吗？我认为应该。URL 会将空间解码为 %20 并且`File`构造函数应将其正确处理为`URI`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T16:41:05.057

如果你想要这种方式，那么你需要解码 url：

```
image = ImageIO.read(new File(URLDecoder.decode(getClass().getResource("/Pictures/H ello.jpg").getPath(), "UTF-8"))); 
```

但是，如果我需要使用资源，我会使用重载方法 ImageIO.read(URL) 或 ImageIO.read(InputStream) ：

```
image = ImageIO.read(getClass().getResource("/Pictures/H ello.jpg"));
image = ImageIO.read(getClass().getResourceAsStream("/Pictures/H ello.jpg")); 
```

见[apidoc](http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageIO.html)

# java - 当其他用户“通过使用 java 代码”在我的网站上邀请他时，如何向用户发送自动生成的电子邮件

> ID：11283681
> 
> 赞同：-2
> 
> 时间：2012-07-01T16:23:32.770
> 
> 标签：java, email, email-templates

我有个问题; 当其他用户邀请他时，我想编写一个 java 代码，用于向我网站上的注册用户发送自动电子邮件。然后被邀请者将接受或拒绝电子邮件中的邀请。请指导我…………

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T16:57:41.887

让他单击该电子邮件中的链接。

电子邮件代码：

```
import java.util.*;
import java.io.*;
import javax.mail.*;
import javax.mail.internet.*;
public void sendEmail(String aFromEmailAddr, String aToEmailAddr,
    String aSubject, String aBody){
    //Here, no Authenticator argument is used (it is null).
    //Authenticators are used to prompt the user for user
    //name and password.
    Session session = Session.getDefaultInstance( fMailServerConfig, null );
    MimeMessage message = new MimeMessage( session );
    try {
      //the "from" address may be set in code, or set in the
      //config file under "mail.from" ; here, the latter style is used
      //message.setFrom( new InternetAddress(aFromEmailAddr) );
      message.addRecipient(
        Message.RecipientType.TO, new InternetAddress(aToEmailAddr)
      );
      message.setSubject( aSubject );
      message.setText( aBody );
      Transport.send( message );
    }
    catch (MessagingException ex){
      System.err.println("Cannot send email. " + ex);
    }
  } 
```

您可以在该电子邮件中放置一个链接。我相信邮件客户端支持基本的 HTML，因此您可以执行以下操作：

```
Hi PersonWithANameEnteredByTheGuyWhoInvitedYou,

NameOfTheGuyWhoInvitedYou invited you, click here to accept his invitation:

<a href="http://mydomain.com/accept?param=ridiculousLongTokenToVerifyTheRequestAndIdentifyThePersonThatClickedIt">ACCEPT!</a> 
```

# python - 从 numpy 数组中动态读取 pyopengl 缓冲区

> ID：11283683
> 
> 赞同：8
> 
> 时间：2012-07-01T16:23:49.760
> 
> 标签：python, opengl, numpy, buffer, pyopengl

我正在尝试在 python 中编写一个模块，它将一个 numpy 的颜色数据（rgb）数组绘制到屏幕上。目前我正在使用这样的 3 维颜色数组：

```
numpy.ones((10,10,3),dtype=np.float32,order='F')   # (for 10x10 pure white tiles) 
```

将其绑定到缓冲区并使用 a`glVertexAttribArray`将数据广播到瓦片数组（点精灵）（在本例中为 10x10 数组），这适用于静态图像。

但我希望能够更改数组中的数据并让缓冲区反映此更改，而无需从头开始重建它。

目前我已经建立了缓冲区：

```
glBufferData(GL_ARRAY_BUFFER, buffer_data.nbytes, buffer_data, GL_DYNAMIC_DRAW) 
```

其中 buffer_data 是 numpy 数组。我可以传递什么（如果有的话）（也许是一些指向内存的指针？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T03:05:28.100

如果你想快速渲染一个快速变化的 numpy 数组，你可以考虑看看[glumpy](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDQQFjAA&url=http%3A%2F%2Fcode.google.com%2Fp%2Fglumpy%2F&ei=0dvPUIe1BqqO0AXd74DgBA&usg=AFQjCNHFvdrK_PzmQV4KFBolBMCx_scPMg&bvm=bv.1355534169,d.d2k)。如果您确实使用纯 pyopengl 解决方案，我也很想知道它是如何工作的。

编辑：有关如何使用 Glumpy 查看不断更新的 numpy 数组的示例，[请参阅我的答案here](https://stackoverflow.com/questions/3942549/display-numpy-array-as-continuously-updating-image-with-glumpy/14494168#14494168)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T07:56:01.580

glBufferData 用于更新整个缓冲区，因为它每次都会创建一个新缓冲区。

你想要的是：

[glMapBuffer / glUnmapBuffer](http://www.opengl.org/sdk/docs/man/xhtml/glMapBuffer.xml)。

glMapBuffer 将缓冲区复制到客户端内存并在本地更改值，然后使用 glUnmapBuffer 将更改推送回 GPU。

[glBufferSubData](http://www.opengl.org/sdk/docs/man/xhtml/glBufferSubData.xml)

这允许您更新缓冲区的一小部分，而不是整个内容。

听起来您还想要一些自动获取这些更改的类。我无法确认这是否是个好主意，但您可以包装或扩展 numpy.array 并覆盖内置方法[setitem](http://docs.python.org/2/reference/datamodel.html#object.__setitem__)。

# c# - 如何创建元素列表？

> ID：11283688
> 
> 赞同：0
> 
> 时间：2012-07-01T16:24:20.523
> 
> 标签：c#, animation, xna

我正在制作一个有很多 hitspark 的格斗游戏，但我不知道如何制作一个元素列表来绘制多个 hitspark（到目前为止，屏幕上只能有一个 hitspark）。我知道存在 List 的东西，但我真的不知道如何使用它。这是我现在处理 hitspark 的方法。

```
 AnimationElement HitElement;
    private Preparationanimation Hit4;

 public override void  LoadContent()
 {
        HitElement = new AnimationElement();
        Hit4 = new Preparationanimation(SpriteSheetElements1, new Color(255, 255, 255, 128), 1f, false)
 }

 if (IntersectPixels(Player1.HitboxAtt, Player1.playerTextureData, Player2.Hitbox, Player2.playerTextureData))
 {
        HitElement.PlayAnimation(Hit4, content);
 }

 public override void Draw(GameTime gameTime)
 {
         HitElement.Draw(spriteBatch, gameTime, positionElement, false, true);
 } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:39:04.767

```
List<AnimationElement> HitElements;
private Preparationanimation Hit4;

 public override void LoadContent()
 {
        HitElements = new List<AnimationElement>();
        Hit4 = new Preparationanimation(SpriteSheetElements1, new Color(255, 255, 255, 128), 1f, false)
 }

 if (IntersectPixels(Player1.HitboxAtt, Player1.playerTextureData, Player2.Hitbox, Player2.playerTextureData))
 {
     foreach (AnimationElement a in HitElements)
     {
       a.PlayAnimation(Hit4, content);
     }
 }

 public override void Draw(GameTime gameTime)
 {
     foreach (AnimationElement a in HitElements)
     {
         a.Draw(spriteBatch, gameTime, positionElement, false, true);
     }

 } 
```

您需要多个对象的列表。您可以使用 HitElements.Add 添加。另外为什么在你的代码中间有一个 If 语句？

更多信息可以在[这里](http://www.dotnetperls.com/list)找到。

# python - setuptools 'entry_points' 参数用法

> ID：11283693
> 
> 赞同：1
> 
> 时间：2012-07-01T16:24:40.530
> 
> 标签：python, setuptools

通过一些 python 代码，我找到`entry_points`了 setuptools.setup 函数的参数。我在 setuptools / distutils 的任何 API 文档中都看不到这个参数。谁能澄清这个参数应该采用什么格式，或者更好的是，它在 API 文档中的定义？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T16:26:49.820

看一下 Distribute 的文档，它好多了。您要查看的部分是[服务和插件的动态发现](http://setuptools.readthedocs.io/en/latest/setuptools.html#dynamic-discovery-of-services-and-plugins)：

> setup() 的 entry_points 参数接受带有 .ini 样式部分的字符串，或将入口点组名称映射到包含入口点说明符的字符串或字符串列表的字典。入口点说明符由名称和值组成，由 = 号分隔。该值由一个带点的模块名称组成，可选地后跟一个 : 和一个命名模块内对象的点标识符。

另一个很好的解释可以在[Hitchhiker's Guide to Packaging](https://the-hitchhikers-guide-to-packaging.readthedocs.io/en/latest/)中找到；有一个部分[专门介绍 entry_points 功能](http://the-hitchhikers-guide-to-packaging.readthedocs.io/en/latest/creation.html#entry-points)：

> 入口点是一个设置工具/分发功能，在一个特定情况下非常方便：在包 A 中的特定键下注册一些东西，包 B 可以查询。

# google-maps-api-3 - 按纬度和经度放置标记

> ID：11283697
> 
> 赞同：2
> 
> 时间：2012-07-01T16:24:59.720
> 
> 标签：google-maps-api-3, location, gwt2

我有这段代码假设将标记放置在 latlng

```
public void initialize() {  
    geocoder = Geocoder.create();
    myOptions = MapOptions.create();        
    myOptions.setZoom(18);
    myOptions.setMapTypeId(MapTypeId.HYBRID);
    myOptions.setMapMaker(true);
    map = GoogleMap.create(
        Document.get().getElementById("map_canvas"),myOptions);      

    GeocoderRequest request = GeocoderRequest.create();                 
    request.setLocation(LatLng.create(lat,lng));

    geocoder.geocode(request, new Callback() {
        public void handle(JsArray<GeocoderResult> rslts, GeocoderStatus status)
        {
            if (status == GeocoderStatus.OK) {
                location = rslts.get(0);
                map.setCenter(location.getGeometry().getLocation());
                marker = Marker.create();
                marker.setMap(map);
                marker.setPosition(location.getGeometry().getLocation());
            } 
        }
    }); 
```

当我使用这些坐标 ( `45.48592686713835`, `-73.49009937672122`) 进行测试时，我只得到最近的地址，即图标 A。但我真正想要的是用绿色箭头显示的确切位置。

[![在此处输入图像描述](../Images/64267d979ec9f4b9873418b0c0b11ab3.png)](https://i.stack.imgur.com/GA2i9.gif)

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T16:54:32.867

`Geocoder`在使用进行反向地理编码（将 LatLng 转换为地址）时，您将始终获得最近的地址（如果可以确定的话）。如果要使用原始坐标，只需`Marker`使用原始坐标放置即可。如果您要将 LatLng 转换为地址或 Google`Geocoder`可以获取的最接近地址的地址，结果将始终为您提供最近已知的 LatLng `street_address`、`route`、`airport`、`transit_station`、`neighborhood`、`sublocality`、`locality`等。

# graphviz - 如何在graphviz中指定边的长度？

> ID：11283701
> 
> 赞同：25
> 
> 时间：2012-07-01T16:25:36.497
> 
> 标签：graphviz

在有向图中，如果存在循环，则 graphviz 会使该边非常短。

是否有一个参数可以让我改变循环边的长度，使图形看起来有点统一。

```
digraph ER {
  rankdir="LR";
  //orientation=landscape;
    node [shape=ellipse, fontsize=30];
  {node [label="Original"] old;}
  {node [label="Final"] new;}
  {node [label="Intermediate"] ir;}

old -> ir [label="suggest", fontsize=30];
ir -> ir [label="validate", fontsize=30, len=f];
ir -> new [label = "finalize", fontsize=30];
} 
```

![在此处输入图像描述](../Images/9090ac99d75d9d822b2014a993b093db.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2019-04-01T06:39:44.373

编辑：对不起，我的回答会使边缘更长，但不是您需要的自引用边缘。

*len*在 dot 中不起作用，但*minlen*可以。

[https://www.graphviz.org/doc/info/attrs.html#d:minlen](https://www.graphviz.org/doc/info/attrs.html#d:minlen)

```
x->y
[minlen=5] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-02-25T07:12:34.147

`len`在 dot 中不起作用，但你可以试试这个技巧：

```
digraph G {
rankdir=LR
a->b[dir=both]
b->c[dir=both,label="        "]// Just use the space to increase the edge length
} 
```

如果`rankdir=TB`，使用`label="\n"`（根据需要重复`\n`）增加长度。

![](../Images/ca18b35c97904d808b56fb43e11310d9.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-13T00:02:10.963

我发现以下属性“nodesep”可以用 sfdp 解决这个问题。

[https://www.graphviz.org/doc/info/attrs.html#a:nodesep](https://www.graphviz.org/doc/info/attrs.html#a:nodesep)

对于除`dot`

> nodeep 影响单个节点上循环之间的间距，或一对节点之间的多重边。

请注意，这是一个图形属性，因此图形中所有边的值都相同。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-01T16:27:09.360

从点（1）开始：

```
len=f sets the optimal length of an edge.  The default is 1.0. 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-09-22T20:18:20.810

您可以通过在可见边缘之前添加一堆不可见的循环边缘来使循环边缘更长，如下所示：

```
digraph ER {
  rankdir="LR";
  //orientation=landscape;
    node [shape=ellipse, fontsize=30];
  {node [label="Original"] old;}
  {node [label="Final"] new;}
  {node [label="Intermediate"] ir;}

old -> ir [label="suggest", fontsize=30];
ir -> ir [style="invis"]
ir -> ir [style="invis"]
ir -> ir [style="invis"]
ir -> ir [style="invis"]
ir -> ir [label="validate", fontsize=30, len=f];
ir -> new [label = "finalize", fontsize=30];
} 
```

![OP的校正图](../Images/1c1f1769a4f86b33d0c8e9f3ae41f76c.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-04-26T19:01:35.737

在 .dot 语言中，边缘连接具有不同等级的两个音符。边的长度等于（等级差）*ranksep

默认的ranksep（在图形属性中）为0.75英寸，因此相邻节点的边缘将为0.75英寸。

为了减少边长，你在图属性中将ranksep设置为一个较小的值

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-10-13T06:03:43.730

我现在使用另一种方法：

我使用graphviz以点格式输出文件

```
dot -T dot -Kneato -o ./positioned.dot ./input.dot 
```

该文件将包含每条边的 Bezier 曲线定义。我手动更改点以按照我想要的方式绘制曲线。

起初这可能看起来有点令人生畏，但一旦你弄清楚它们是如何工作的，这并不难，我正在慢慢接近一个可以自动为我做这件事的脚本

然后使用您编辑的定位文件作为输入重新运行 dot

```
dot -T png -Kneato -O ./positioned.dot 
```

通过这种方法，我几乎将 dot 变成了基于文本的 visio 替换

# yii - Yii + Zend gdata。优酷上传

> ID：11283702
> 
> 赞同：1
> 
> 时间：2012-07-01T16:25:40.397
> 
> 标签：yii, youtube-api, zend-gdata

我想用下一种方式上传视频：

1.  我只是将文件上传到服务器（像往常一样）
2.  我的服务器端 Yii 应用程序获取该视频并从 YouTube 上的一个特殊帐户将其上传到 Youtube

我有什么：

*   我的 YouTube (google) 帐户名称和电子邮件。“姓名”或“姓名@gmail.com”
*   我的密码
*   开发人员密钥，我在 Google 的“产品仪表板”中找到
*   应用程序的名称，命名为“myapp”：

> 产品仪表板：myapp

所以，我在谷歌阅读了一些文档，并决定对我来说最好的方法是使用 ClientLogin 身份验证类型，因为我只有一个帐户可以使用，而且我拥有所有必要的数据。我找到了 ZendFramework 的 GData 示例，并将其导入到我的 Yii 应用程序中。

我特别简化了代码，只是为了从 /upload 目录上传一个视频来测试它是否有效。我希望在我上传的 YT 帐户中找到一个视频。当然没有视频，我在这里 :-) 完整的操作代码如下：

```
Yii::import('application.vendors.*');
require_once 'Zend/Loader.php';
Zend_Loader::loadClass('Zend_Gdata_YouTube');
Zend_Loader::loadClass('Zend_Gdata_ClientLogin');

$yt_user = 'myYTname';
$yt_pass = 'myYTpass';
$yt_source = 'myapp';
$yt_api_key = 'veryVERYlongKEYhere';

$authenticationURL= 'https://www.google.com/accounts/ClientLogin';
$httpClient = Zend_Gdata_ClientLogin::getHttpClient(
    $username = $yt_user,
    $password = $yt_pass,
    $service = 'youtube',
    $client = null,
    $source = $yt_source,
    $loginToken = null,
    $loginCaptcha = null,
    $authenticationURL
);
$yt = new Zend_Gdata_YouTube($httpClient, $yt_source, null, $yt_api_key);
$myVideoEntry = new Zend_Gdata_YouTube_VideoEntry();
$filesource = $yt->newMediaFileSource(Yii::getpathOfAlias('webroot').'/upload/videos/video.mp4');
$filesource->setContentType('video/mp4');
$filesource->setSlug('video.mp4');
$myVideoEntry->setMediaSource($filesource);
$myVideoEntry->setVideoTitle('My Test Movie');
$myVideoEntry->setVideoDescription('My Test Movie description');
$myVideoEntry->setVideoCategory('Autos');
$myVideoEntry->SetVideoTags('cars, funny');
$myVideoEntry->setVideoDeveloperTags(array('mydevtag', 'anotherdevtag'));

$uploadUrl = "http://uploads.gdata.youtube.com/feeds/api/users/{$yt_user}/uploads";
try {
    $newEntry = $yt->insertEntry($myVideoEntry, $uploadUrl, 'Zend_Gdata_YouTube_VideoEntry');
} catch (Zend_Gdata_App_HttpException $httpException) {
    echo $httpException->getRawResponseBody();
} catch (Zend_Gdata_App_Exception $e) {
    echo $e->getMessage();
} 
```

如您所见，官方示例中有很多默认代码。但它不起作用。没有人**回声**向我显示信息。但是当我删除 try-catch 时，我得到了一个错误：

```
Zend_Gdata_App_HttpException
Read timed out after 10 seconds 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:04:20.073

所以，这个问题自己解决了：）首先：不要尝试从localhost上传！然后在我的情况下，我得到了一个错误，我没有说我的开发密钥！因此，如果您遇到相同的错误，请尝试更改：

```
 $newEntry = $yt->insertEntry($myVideoEntry, $uploadUrl, 'Zend_Gdata_YouTube_VideoEntry'); 
```

通过添加第 4 个参数 - 额外的标题：

```
$yt->insertEntry($myVideoEntry, $uploadUrl, 'Zend_Gdata_YouTube_VideoEntry', array(
    'X-GData-Key' => 'key=yourBIGbigBIGdeveloperKEYhere'
)); 
```

祝你好运，享受 youtube API 的乐趣！

# javascript - 将 Javascript 字符串变量作为 Firebug 命令传递

> ID：11283703
> 
> 赞同：0
> 
> 时间：2012-07-01T16:25:49.523
> 
> 标签：javascript, dom, firebug

使用 Firebug，我使用以下方法提取了网页的所有链接：

```
var links = document.getElementsByTagName("a");
for(var i=0; i<links.length; i++) {
    console.log(links[i].href);
} 
```

现在所有链接都在控制台中，格式如下：

```
javascript:tenderLog1('abcd.pdf','test','23'); 
```

现在我想将此字符串输出作为 Firebug js 命令传递，以便自动打开所有链接。

是否有任何函数可以将 js 变量作为 Firebug 命令传递？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T00:36:15.937

很难猜测您到底想要达到什么目标。我猜你想要而不是

```
console.log(links[i].href); 
```

去做

```
eval(links[i].href.replace("javascript:","")); 
```

? 这相当于`tenderLog1('abcd.pdf','test','23')`在您提供的示例中从 Firebug 控制台调用。结果当然取决于`tenderLog1`函数的作用。

但也许看看函数做了什么（`window.open`？）会更清楚，并在使用一些正则表达式解析参数后提供命令。

# java - 总是对 JPA @Id 使用原始对象包装器而不是原始类型？

> ID：11283709
> 
> 赞同：12
> 
> 时间：2012-07-01T16:26:39.253
> 
> 标签：java, jpa, parent-child, spring-data-jpa

我发现将原始类型用作 JPA 的对象 @Id 与 Spring Data JPA 结合使用的问题。我在父方与 Cascade.ALL 有父/子关系，并且子有 PK，同时也是父的 FK。

```
class Parent {
    @Id
    private long id;

    @OneToOne(mappedBy = "parent", cascade = ALL)
    private Child child;
}

class Child {
    @Id
    @OneToOne
    private Parent parent;
} 
```

所以，当我运行时：

```
...
Parent parent = new Parent();
Child child  = new Child(parent);
parent.setChild(child);  
em.persist(parent)
... 
```

一切正常。但是我使用 Spring Data JPA 来持久化实体，所以我改为运行：

```
parentRepository.save(parent); // instead of em.persist(parent); 
```

这个失败了，但有以下例外：

```
Caused by: org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: Parent 
```

问题是 Spring Data JPA *save()*方法检查实体是否是新的，如果是新的，则使用 em.persist *()*，否则使用*em.merge()*。

这里有趣的部分是 Spring 如何检查实体是否是新的：

```
getId(entity) == null; 
```

而且，当然，这是错误的，因为我使用 long 作为@Id 的类型，而 long 的默认值为 0。当我将 long 更改为 Long 时，一切也适用于 Spring Data JPA。

因此，建议的做法是始终对原始类型（如 Long 而不是 long）使用对象包装器而不是原始类型。任何将此描述为推荐做法的第三方资源都会非常好。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-01T16:59:14.973

我会说是的，由于您所看到的情况，建议使用对象类型而不是原语。无法区分实体是新实体还是具有原始标识符的预先存在的实体。我已经使用休眠多年了，我总是使用对象作为标识符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T21:43:15.530

我会使用对象类型。在 xml 映射中，您可以放置​​一个“未保存的值”属性，但我认为没有直接翻译为此注释。因此，坚持使用对象类型更安全。

大多数程序员都希望标识符中的“空”值无论如何都意味着未保存。

# python - django在admin中自动填充manytomany字段

> ID：11283711
> 
> 赞同：2
> 
> 时间：2012-07-01T16:26:43.970
> 
> 标签：python, django, django-models, django-admin

美好的一天，不久前，与 Django 一起工作。遇到以下问题。

有两种型号

```
class Product(models.Model):
    productID       = models.AutoField(primary_key=True)
    brandID         = models.ForeignKey(Brand, verbose_name=u'Бренд')
    categoryID      = models.ForeignKey(Category, verbose_name=u'Категория')
    productPhotos   = models.ManyToManyField("ProductPhoto", verbose_name = "Фотографии товара", related_name="photos", blank=True)

class ProductPhoto(models.Model):
    productPhotoID      = models.AutoField(primary_key=True)
    productID           = models.ForeignKey(Product)
    imageFile           = models.FileField(u'Путь к изображение', upload_to=makeUploadPath)
    dateModified        = models.DateField(auto_now=True) 
```

对于管理员，请使用以下 TabularInline

```
class ProductPhotoInline(admin.TabularInline):
    model = ProductPhoto
    verbose_name = u"Фото"
    verbose_name_plural = u"Фотографии"

class ProductAdmin(admin.ModelAdmin):
    list_display = ('title')
    search_fields = ...
    fieldsets = ...
    )
    inlines = [ ProductPhotoInline, ] 
```

问题是在表 ProdcutPhoto 中添加产品时 productId 字段被填满，而表 Products productPhotos 中的字段为空。如何最好地填写这两个字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T21:02:11.907

您应该删除 productPhotos ManyToMany 字段，它是多余的。如果每张照片仅附加到一个产品，那么您只需要 productID ForeignKey。

要从产品实例访问照片，您可以使用`productphoto_set`，例如

```
product = Product.objects.get(pk=1)
photos = product.productphoto_set.all() 
```

# android - Android 创建自定义按钮

> ID：11283713
> 
> 赞同：0
> 
> 时间：2012-07-01T16:26:59.907
> 
> 标签：android

我的应用程序中有很多按钮，它们的大小根据里面的文本而有所不同。我想自定义按钮，但我不确定是否应该使用

A) Ninepatch pngs

B）创建的Android xml

C) Photoshop png

我希望按钮可以很好地缩放，因此不会因屏幕尺寸而变形。上述方法的优缺点是什么？有没有理想的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T16:37:02.073

It depends on what they should look like. Rounded corners? Complicated images? Drop shadows? Plain colors?

If you want simple buttons that are monotone in color, xml drawables are the best solution. You can do rounded corners through xml, so if plain is what you are looking for this is the best option.

If you are working with an image, then a 9 patch is the way to go. Play around with the draw9patch tool that comes with the sdk to get the hang of it. You also don't necessarily only need to leave the corners in tack, sometimes you may want to break up the resizable area depending on the image.

PNGs are the last resort as they are the least flexible of the 3 options.

By the way, you should also consider using a state list for all of your buttons, regardless of how you implement the drawable that the button uses. See the link below:

[http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)

# xamarin.android - 更改列表视图中的图像

> ID：11283715
> 
> 赞同：0
> 
> 时间：2012-07-01T16:27:10.443
> 
> 标签：xamarin.android

我正在使用[http://redth.info/2010/10/12/monodroid-custom-listadapter-for-your-listview](http://redth.info/2010/10/12/monodroid-custom-listadapter-for-your-listview)上的教程代码，并在修改代码使其在 monodroid 4.2.3 下构建之后，我'已经对其进行了扩展，使得列表类看起来像这样

公共类动物{公共字符串名称{获取；放; }

```
 public string Description
    {
        get;
        set;
    }

    public int Image
    {
        get;
        set;
    }

    public int ImageCheck
    { get; set; }

    public bool Checked
    { get; set; }
} 
```

ItemClick 事件代码如下所示

```
// ViewGroup parent = listView;

    void listView_ItemClick(object sender, Android.Widget.AdapterView.ItemClickEventArgs e, ViewGroup parent)
    {
        var item = this.listAdapter.GetItemAtPosition(e.Position);
        var view = (e.View ?? this.LayoutInflater.Inflate(Resource.Layout.customlistitem, parent, false)) as LinearLayout;
        ImageView iv = FindViewById<ImageView>(Resource.Id.imageChecked);
        if (item.Checked == false)
        {
            item.Checked = true;
            item.ImageCheck = Resource.Drawable.@checked;
        }
        else
        {
            item.Checked = false;
            item.ImageCheck = Resource.Drawable.checkbox;
        }
        iv.SetImageResource(item.ImageCheck);
    } 
```

虽然这在我添加的情况下有效

```
Console.WriteLine("Animal clicked = {0}", item.Name); 
```

模拟器输出会显示被点击的动物的名字，ImageView 总是在列表的顶部。

有没有办法在正确的位置打勾（例如，如果我单击第 5 个项目。第 5 个 ImageView 显示一个勾号或只是一个框）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T20:15:53.953

最简单的方法

```
ImageView iv = e.View.FindViewById<ImageView>(Resource.Id.imageChecked); 
```

任务完成！

# html - HTML5 继承（标签？）问题

> ID：11283717
> 
> 赞同：0
> 
> 时间：2012-07-01T16:27:13.113
> 
> 标签：html

我想在 HTML5 中创建灯箱结构。

这是我的代码：

```
<p>
   <a href="images/1.jpg" class="lightbox">
      <img src="images/1.jpg" style="width: 320px; height: 200px" alt="" />
      <div class="zoom">Zoom.</div>
      test test
   </a>
   Paragraph text.        
</p> 
```

现在，“zoom”div 和“test test”文本应该是名为“lightbox”的链接的子节点，但是浏览器将上面的代码呈现为三个单独的链接（这怎么可能？）：

```
<p>
   <a href="images/1.jpg" class="lightbox">
      <img src="images/1.jpg" style="width: 320px; height: 200px" alt=""/>
   </a>
</p>
<div class="zoom">
   <a href="images/1.jpg" class="lightbox">Zoom.</a>
</div>
<a href="images/1.jpg" class="lightbox"> test test </a>
   Text 
<p/> 
```

这是jsfiddle：

[http://jsfiddle.net/amMMV/1/](http://jsfiddle.net/amMMV/1/)

我 100% 确定标签有问题，但我找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T16:33:03.203

`<div>`将 a作为 a 的子元素是无效的`<a>`，除非`<a>`将 a 设置为块级元素。

无论如何，在标签中包含任何块级元素（例如`<div>`）永远是无效的。`<p>`

# c# - 在 C# 中保存数据

> ID：11283722
> 
> 赞同：0
> 
> 时间：2012-07-01T16:27:34.383
> 
> 标签：c#, database

我正在设计一个银行系统，并且已经到了要存储帐户信息的步骤，以便在关闭系统时可以轻松检索它。

我该如何存储它？我应该在这里使用线程还是现在是使用数据库并将类与数据库链接的时候了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T16:36:28.750

If you are designing a banking system, you need to have a thorough understanding of [transactional integrity](http://en.wikipedia.org/wiki/Database_transaction).

For example:

If you move money from one account to another, you do at least two steps

1.  Deduct money from one account
2.  Add that money to another account

It would be a very bad result if you completed Step 1 and then your program failed for some reason before completing Step 2.

Read about and fully understand transactions before proceeding.

Having said that...

[Entity Framework](http://msdn.microsoft.com/en-us/data/ef.aspx) provides a nice level of abstraction for data storage and allows you to manage database transactions. I suggest you look into that technology, along with how to use [database transactions with Entity Framework](http://msdn.microsoft.com/en-us/library/bb738523.aspx).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T16:30:02.513

在 sql server 或 oracle 中创建数据库... 使用 Entity 框架进行数据操作。我会建议您创建 WCF 服务（它将执行您的所有数据库事务）并在您的应用程序中使用该 wcf 服务。

如果您想让您的应用程序更好，那么我建议使用依赖注入（结构映射、ninject 或任何其他类似的......）..它将帮助您使您的代码干净、可维护和可测试..

# java - 如何使用 java 运行 JSON

> ID：11283724
> 
> 赞同：1
> 
> 时间：2012-07-01T16:27:36.847
> 
> 标签：java, json

几天前我开始研究json。我有一个 json 代码，但我无法运行此代码。请指导我该怎么做！我应该在哪里以及如何运行此代码？

```
{
"title":"About Canada",
"rows":[
    {
    "title":"Beavers",
    "description":"Beavers are second only to humans in their ability to manipulate and change their environment. They can measure up to 1.3 metres long. A group of beavers is called a colony",
    "imageHref":"http://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/American_Beaver.jpg/220px-American_Beaver.jpg"
    },
    {
    "title":"Flag",
    "description":null,
    "imageHref":"http://images.findicons.com/files/icons/662/world_flag/128/flag_of_canada.png"
    },
    {
    "title":"Transportation",
    "description":"It is a well known fact that polar bears are the main mode of transportation in Canada. They consume far less gas and have the added benefit of being difficult to steal.",
    "imageHref":"http://1.bp.blogspot.com/_VZVOmYVm68Q/SMkzZzkGXKI/AAAAAAAAADQ/U89miaCkcyo/s400/the_golden_compass_still.jpg"
    },
    {
    "title":"Hockey Night in Canada",
    "description":"These Saturday night CBC broadcasts originally aired on radio in 1931\. In 1952 they debuted on television and continue to unite (and divide) the nation each week.",
    "imageHref":"http://fyimusic.ca/wp-content/uploads/2008/06/hockey-night-in-canada.thumbnail.jpg"
    },
    {
    "title":"Eh",
    "description":"A chiefly Canadian interrogative utterance, usually expressing surprise or doubt or seeking confirmation.",
    "imageHref":null
    },
    {
    "title":"Housing",
    "description":"Warmer than you might think.",
    "imageHref":"http://icons.iconarchive.com/icons/iconshock/alaska/256/Igloo-icon.png"
    },
    {
    "title":"Public Shame",
    "description":" Sadly it's true.",
    "imageHref":"http://static.guim.co.uk/sys-images/Music/Pix/site_furniture/2007/04/19/avril_lavigne.jpg"
    },
    {
    "title":null,
    "description":null,
    "imageHref":null
    },
    {
    "title":"Space Program",
    "description":"Canada hopes to soon launch a man to the moon.",
    "imageHref":"http://files.turbosquid.com/Preview/Content_2009_07_14__10_25_15/trebucheta.jpgdf3f3bf4-935d-40ff-84b2-6ce718a327a9Larger.jpg"
    },
    {
    "title":"Meese",
    "description":"A moose is a common sight in Canada. Tall and majestic, they represent many of the values which Canadians imagine that they possess. They grow up to 2.7 metres long and can weigh over 700 kg. They swim at 10 km/h. Moose antlers weigh roughly 20 kg. The plural of moose is actually 'meese', despite what most dictionaries, encyclopedias, and experts will tell you.",
    "imageHref":"http://caroldeckerwildlifeartstudio.net/wp-content/uploads/2011/04/IMG_2418%20majestic%20moose%201%20copy%20(Small)-96x96.jpg"
    },
    {
    "title":"Geography",
    "description":"It's really big.",
    "imageHref":null
    },
    {
    "title":"Kittens...",
    "description":"Éare illegal. Cats are fine.",
    "imageHref":"http://www.donegalhimalayans.com/images/That%20fish%20was%20this%20big.jpg"
    },
    {
    "title":"Mounties",
    "description":"They are the law. They are also Canada's foreign espionage service. Subtle.",
    "imageHref":"http://3.bp.blogspot.com/__mokxbTmuJM/RnWuJ6cE9cI/AAAAAAAAATw/6z3m3w9JDiU/s400/019843_31.jpg"
    },
    {
    "title":"Language",
    "description":"Nous parlons tous les langues importants.",
    "imageHref":null
    }
]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:28:52.037

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

**领域模型**

您将需要某种数据结构来表示您的 JSON 数据，以便您可以在 Java 应用程序中使用它。下面是使用类型化域模型的示例。其他 JSON 库提供更通用的类似 DOM 的结构。

***搜索***

```
package forum11283724;

import java.util.List;
import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
public class Search {

    String title;
    List<Book> rows;

} 
```

***书***

```
package forum11283724;
import javax.xml.bind.annotation.*;
@XmlAccessorType(XmlAccessType.FIELD)
public class Book {
    String title;
    String description;
    String imageHref;
} 
```

**演示代码**

下面是将 JSON 文档读入 Java 对象，然后将它们写回 JSON 的代码示例。当数据为对象形式时，您可以对其进行操作：添加、删除、修改等。

***演示***

```
package forum11283724;

import java.io.*;
import java.util.*;
import javax.xml.bind.*;
import javax.xml.transform.stream.StreamSource;
import org.eclipse.persistence.jaxb.JAXBContextProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        Map<String,Object> properties = new HashMap<String, Object>(2);
        properties.put(JAXBContextProperties.MEDIA_TYPE, "application/json");
        properties.put(JAXBContextProperties.JSON_INCLUDE_ROOT, false);
        JAXBContext jc = JAXBContext.newInstance(new Class[] {Search.class}, properties);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        StreamSource json = new StreamSource(new FileReader("src/forum11283724/input.json"));
        Search search = (Search) unmarshaller.unmarshal(json, Search.class).getValue();

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(search, System.out);
    }

} 
```

**输入输出**

以下是您的 JSON 文档，它是此示例的输入/输出

```
{
   "title" : "About Canada",
   "rows" : [ {
      "title" : "Beavers",
      "description" : "Beavers are second only to humans in their ability to manipulate and change their environment. They can measure up to 1.3 metres long. A group of beavers is called a colony",
      "imageHref" : "http://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/American_Beaver.jpg/220px-American_Beaver.jpg"
   }, {
      "title" : "Flag",
      "imageHref" : "http://images.findicons.com/files/icons/662/world_flag/128/flag_of_canada.png"
   }, {
      "title" : "Transportation",
      "description" : "It is a well known fact that polar bears are the main mode of transportation in Canada. They consume far less gas and have the added benefit of being difficult to steal.",
      "imageHref" : "http://1.bp.blogspot.com/_VZVOmYVm68Q/SMkzZzkGXKI/AAAAAAAAADQ/U89miaCkcyo/s400/the_golden_compass_still.jpg"
   }, {
      "title" : "Hockey Night in Canada",
      "description" : "These Saturday night CBC broadcasts originally aired on radio in 1931\. In 1952 they debuted on television and continue to unite (and divide) the nation each week.",
      "imageHref" : "http://fyimusic.ca/wp-content/uploads/2008/06/hockey-night-in-canada.thumbnail.jpg"
   }, {
      "title" : "Eh",
      "description" : "A chiefly Canadian interrogative utterance, usually expressing surprise or doubt or seeking confirmation."
   }, {
      "title" : "Housing",
      "description" : "Warmer than you might think.",
      "imageHref" : "http://icons.iconarchive.com/icons/iconshock/alaska/256/Igloo-icon.png"
   }, {
      "title" : "Public Shame",
      "description" : " Sadly it's true.",
      "imageHref" : "http://static.guim.co.uk/sys-images/Music/Pix/site_furniture/2007/04/19/avril_lavigne.jpg"
   }, {
   }, {
      "title" : "Space Program",
      "description" : "Canada hopes to soon launch a man to the moon.",
      "imageHref" : "http://files.turbosquid.com/Preview/Content_2009_07_14__10_25_15/trebucheta.jpgdf3f3bf4-935d-40ff-84b2-6ce718a327a9Larger.jpg"
   }, {
      "title" : "Meese",
      "description" : "A moose is a common sight in Canada. Tall and majestic, they represent many of the values which Canadians imagine that they possess. They grow up to 2.7 metres long and can weigh over 700 kg. They swim at 10 km/h. Moose antlers weigh roughly 20 kg. The plural of moose is actually 'meese', despite what most dictionaries, encyclopedias, and experts will tell you.",
      "imageHref" : "http://caroldeckerwildlifeartstudio.net/wp-content/uploads/2011/04/IMG_2418%20majestic%20moose%201%20copy%20(Small)-96x96.jpg"
   }, {
      "title" : "Geography",
      "description" : "It's really big."
   }, {
      "title" : "Kittens...",
      "description" : "√âare illegal. Cats are fine.",
      "imageHref" : "http://www.donegalhimalayans.com/images/That%20fish%20was%20this%20big.jpg"
   }, {
      "title" : "Mounties",
      "description" : "They are the law. They are also Canada's foreign espionage service. Subtle.",
      "imageHref" : "http://3.bp.blogspot.com/__mokxbTmuJM/RnWuJ6cE9cI/AAAAAAAAATw/6z3m3w9JDiU/s400/019843_31.jpg"
   }, {
      "title" : "Language",
      "description" : "Nous parlons tous les langues importants."
   } ]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T16:51:53.307

Take a look at this [http://www.json.org/java/](http://www.json.org/java/).

JSon is data similiar to XML . However without end tags . So you would point to that file and have one of the json parsers look at it and call functions to get the data inside each attribute . If you are having problems using one of the json libraries post up the code your trying to use and we will help you out .

[http://code.google.com/p/json-simple/](http://code.google.com/p/json-simple/)

That's a really simple json library ( pun intended ) I think the easiest to get started with , let us know if you have any trouble with it .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T16:43:14.980

一旦您拥有 json 格式的数据，您就可以将其用作某些请求的响应，并将其显示给客户端（浏览器），您需要使用**javascript** for loop 遍历它。

# javascript - 在 Javascript 中将 dd/mm/yyyy 或 d/m/yyyy 等转换为 yyyymmdd

> ID：11283725
> 
> 赞同：1
> 
> 时间：2012-07-01T16:27:42.307
> 
> 标签：javascript, node.js

我试图**在这个例子中将日期格式转换为新格式是 d/m/Y 到 Ymd，**这就是我在 PHP 中的`DateTime::createFromFormat()`做法，在 javascript 中是否有类似的函数来执行此操作？

```
 // 12/04/2012 work
    // 12/4/2012 work
    // 4/4/2012 work
    // 04/4/2012 work
    // 42/24/1234 not work

$date = DateTime::createFromFormat('d/m/Y', '12/04/2012');
$train_date = $date->format('Ymd'); change the format to // 20120412 
```

简而言之，我怎样才能在 javascript 或 nodejs 中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T02:07:08.937

使用外部库很好，因为 node.js 具有最小核心库的理念。让我们看一下[moment.js](http://momentjs.com/)。

```
var moment = require('moment');
var date = moment('12/04/2012', 'DD/MM/YYYY');
var train_date = date.format('YYYYMMDD');
console.log(train_date);// 20120412 
```

# iphone - Parse 的可扩展性如何？

> ID：11283729
> 
> 赞同：55
> 
> 时间：2012-07-01T16:28:50.087
> 
> 标签：iphone, parsing, scalability, parse-platform

我一直在考虑将 Parse.com 的服务用于我的后端，但我对它的可扩展性持怀疑态度。

它*真的*可以同时处理几千个用户吗？如果没有，他们有什么好办法摆脱它吗？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2014-06-17T00:04:26.963

我知道这个问题可能很老了，但想为可能正在考虑解析的其他人提供我的 2 美分。

在最简单的情况下，解析可能会很好地工作。一旦你需要扩展到更复杂的查询，我个人发现除了头痛什么都没有。

1.  查询限制为 1000 条记录。最初，您可能认为这不是问题，直到您开始处理子查询，并意识到返回了奇怪的数据，因为子查询在没有警告或错误的情况下切断了记录。（仅供参考，默认为 100 条记录，除非您指定上限为 1000 条，因此如果您不注意，问题会更严重）。

2.  由于某种奇怪的原因，您在一分钟内可以发出计数查询的次数是有限制的。（而且这个限制似乎真的很低）。准备好尝试限制您的代码，以免达到此限制，否则会引发错误。

3.  后台作业运行不可靠。我有一个后台作业设置为每 5 分钟运行一次，有时需要 20 多分钟才能开始作业。

4.  很多超时。这是最让我心痛的一个。A. 如果您有一个需要一段时间来处理的云功能，您有大约 6 或 7 秒的时间来完成它，否则它会打断您。
    B. 我感觉系统普遍不稳定。定期地，我遇到的问题似乎持续了大约一个小时左右，其中超时发生得更频繁（并且相对简单的函数应该立即返回）。

我对我使用 parse 的决定感到非常遗憾，我正在尽我所能让应用程序保持足够长的时间让我们获得资金，这样我们就可以离开平台。如果有人有更好的解析替代方案，我全神贯注。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-07-02T17:01:08.187

[编辑：在团队度过了令人惊叹的三年之后，我决定继续前进，不再是 Parse 或 Facebook 的员工。团队掌握在伟大的手中，并做了令人惊叹的事情。整个后端已被重写，以显着提高性能和可靠性。路线图很棒，我希望团队能做出伟大的事情。在我离开时，Parse 为超过 600,000 个应用程序提供支持，并且每天处理数量惊人的请求。如果每次 Parse 推送都发送给一个独特的人，他们可以在一天内形成世界第四大国家。如需 Parse 的未来帮助，请在此处使用 parse.com 标签发布问题或发布到 parse-developers Google 小组。]

完全披露：我是一名 Parse 工程师。

Parse 已经托管了数千个*应用程序*，更不用说用户了。当我们在 3 月下旬退出测试版时，我们[宣布](http://techcrunch.com/2012/03/26/parse-beta/)有超过 10,000 个应用程序在 Parse 上运行，环比增长率为 40%。Parse 拥有一支世界一流的团队，其中许多人在大数据和大流量方面拥有多年经验。

我们张开双臂欢迎您的流量；您将与[Band of the Day](http://itunes.apple.com/us/app/band-of-the-day-music-free/id459664402?mt=8)和[Hipmunk](http://hipmunk.com/)等伟大的团队合作。我们对我们的服务非常有信心，因此我们构建了[One Click Export](http://blog.parse.com/2012/03/09/one-click-export/)系统，因此像您这样的人可以无风险地试用 Parse。如果您觉得 Parse 没有达到您的性能预期，我们很乐意将您的所有数据完好无损地送走。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2014-09-06T10:53:43.060

我们选择 Parse 作为我们应用程序的后端。结论：不要。

稳定性是一场灾难，性能也是一场灾难，支持也是如此（可能是因为它们无法真正帮助您，因为所有问题都是不可重现的）。

即使是运行最简单的函数也会导致 Parse 中的随机超时（例如，我说的是简单的 PFUser 登录调用）：

```
Error: Error Domain=NSURLErrorDomain Code=-1001 "The request timed out." UserInfo=0x17e42480 {NSErrorFailingURLStringKey=https://api.parse.com/2/client_events, NSErrorFailingURLKey=https://api.parse.com/2/client_events, NSLocalizedDescription=The request timed out., NSUnderlyingError=0x17d10e60 "The request timed out."} (Code: 100, Version: 1.2.20) 
```

我们每天都会遇到超时，这是我们正在测试的一个应用程序，最多有 10 个用户！

这是我们一直得到的典型，在完全任意的时刻，不可能重现。调用执行一些查询和一些插入的 Cloud Code 函数：

```
 {"code":124,"message":"Request timed out"} 
```

10 分钟后尝试相同的操作，它会在不到一秒的时间内运行。20 分钟后重试，执行需要 30 秒。

因为没有事务性，所以在 1 个 Cloud Code 函数中存储例如 3 个对象时确实很有趣，其中 Parse 决定在保存 3 个对象中的 2 个之后随机退出该函数。很好地保持您的数据库一致。

我们在这些地方得到了“最好的”。请注意，这是从 Cloud Code 函数返回的实际数据：

```
 {"code":107,"message":"Received an error with invalid JSON from Parse: <!DOCTYPE html>\n<html>\n<head>\n  <title>We're sorry, but something went wrong (500)</title>\n  <style type=\"text/css\">\n    body { background-color: #fff; color: #666; text-align: center; font-family: arial, sans-serif; }\n    div.dialog {\n      width: 25em;\n      padding: 0 4em;\n      margin: 4em auto 0 auto;\n      border: 1px solid #ccc;\n      border-right-color: #999;\n      border-bottom-color: #999;\n    }\n    h1 { font-size: 100%; color: #f00; line-height: 1.5em; }\n  </style>\n</head>\n\n<body>\n  <!-- This file lives in public/500.html -->\n  <div class=\"dialog\">\n    <h1>We're sorry, but something went wrong.</h1>\n    <p>We've been notified about this issue and we'll take a look at it shortly.</p>\n  </div>\n</body>\n</html>\n"} 
```

我在这里描述的东西在我们的项目中不是千载难逢的事情。除了 500 错误（我在一个月内遇到两次）之外，其他所有错误都是每天都会看到的。

所以是的，它很容易上手，但你必须考虑到你在一个不稳定的平台上工作，所以确保你的重试和指数退避系统启动并运行，因为你需要这个！

最让我担心的是，我不知道一旦 20.000 人开始在这个后端使用我的应用程序会发生什么。

编辑：

现在我在进行 PFUser 登录时有这个：

```
Error: Error Domain=PF_AFNetworkingErrorDomain Code=-1011 "Expected status code in (200-299), got 502" UserInfo=0x165ec090 {NSLocalizedRecoverySuggestion=<html><body><h1>502 Bad Gateway</h1>
The server returned an invalid or incomplete response.
</body></html>
, PF_AFNetworkingOperationFailingURLResponseErrorKey=<NSHTTPURLResponse: 0x16615c10> { URL: https://api.parse.com/2/get } { status code: 502, headers {
    "Cache-Control" = "no-cache";
    Connection = "keep-alive";
    "Content-Length" = 107;
    "Content-Type" = "text/html; charset=utf-8";
    Date = "Mon, 08 Sep 2014 13:16:46 GMT";
    Server = "nginx/1.6.0";
} }, NSErrorFailingURLKey=https://api.parse.com/2/get, NSLocalizedDescription=Expected status code in (200-299), got 502, PF_AFNetworkingOperationFailingURLRequestErrorKey=<NSMutableURLRequest: 0x166f68b0> { URL: https://api.parse.com/2/get }} (Code: 100, Version: 1.2.20) 
```

不是很棒吗？

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2015-02-07T22:02:30.263

如果您正在编写一个小型/简单的应用程序（或一次性原型），后端几乎没有逻辑，那么就去做吧，但是对于更大/可扩展的东西，最好避免它，我可以从第一手经验中说。他们的用户管理、推送通知、抽象存储等等听起来都不错，但最终不值得麻烦。也就是说，我正在为 Parse 上的一个应用程序开发后端，客户非常喜欢它，因为它听起来很酷而且很有前途（我猜是强大的营销），被 Facebook 收购等等，但是几周后生产的主要问题/限制平台开始出现，原本应该是一个简单的应用程序的开发和扩展变成了一场噩梦。

项目的结果/结论： - 打破了一个相对简单的应用程序的时间窗口 - 它应该持续了 2-3 个月，持续了将近一年，但仍然不稳定/可靠，如果我们使用自定义堆栈它' d 肯定会在时间窗口内完成，因为我在 5-10 天内使用自定义节点堆栈制作了一个类似的演示项目 - 失去了客户的信任，他们现在正在与另一个将使用自定义堆栈的团队重新制作应用程序 -因打破时间窗口并试图使其发挥作用而损失了大量现金 - 加班太多导致它开始反映我的健康状况 - 从不使用一些承诺拥有一切的平台/解决方案，总是使用自定义/尝试堆栈

首先是稳定性问题和平台的持续故障，例如服务器停机时间和随机错误，但它们已经解决了所有问题（那是在 2014 年年中），但以下问题仍然存在：

*   你不能调试你的代码，至少目前是这样（有一些方法可以让它与额外的节点服务器和一些不起眼的库一起工作）
*   限制是荒谬的，一个可扩展的平台，每秒可以执行 50-60 个 API 请求（或更多取决于您的订阅），在您开始进行应变测试之前听起来并不低，当您点击它时，您的代码会不断失败
*   API 调用的测量方式如下：调用服务器函数（解析作业） - 1 次调用，查询数据库 - 1 次调用，另一个查询（因为他们没有一些高级/复杂的查询系统，如果您有更复杂的数据库模式你很快就会意识到我的意思） - 1 次调用，如果你需要获得超过 1000 个查询，猜猜是什么 - 再次查询等等，查询计数（你需要作为一个单独的查询来做）这是不可靠（倾向于返回几千个条目的近似值）
*   创建/保存约 1000 多个简单对象对平台/数据库来说是一种压力，删除 1000 个或更多对象，甚至更多，这对于普通数据库来说快得离谱，但在 Parse 上往往需要 5-10 分钟（如果你检查它更紧密地每批删除 20 个对象）
*   无法使用大多数 npm 包（只有纯 JS 包，直接包含源代码）
*   如果你去阅读 Parse 论坛，你会看到用户不断对 Parse 团队投反对票/批评，因为该平台缺乏功能，并且需要跳过任意逻辑实现，例如获取随机条目和类似的东西
*   他们支持 Stripe 集成，但是如果你想使用 Paypal 或其他一些支付服务（我们决定使用 Paypal，因为它在国家/地区的支持比 Stripe 好得多），你不能让它在 Parse 上工作，因为我必须使用 Paypal 集成使用单独的服务器将其关闭
*   没有简单的方法来同步用户和处理并发问题，你必须使用 hacks 和一些你不会使用或承认使用 nowhere never 的有趣逻辑
*   想要 100+，更不用说 1000+ 同时用户了，祝你好运
*   当您想找出表中的条目数时，您可以达到调用计数查询的限制，这很有趣，没有记录并且完全荒谬，最后返回一个近似数字
*   模块化对平台来说是陌生的，你从工作中调用的函数不能持续超过几秒钟（我认为是 7 秒），当你考虑到查询时间时，更复杂的查询必然会发生很多一些复杂的逻辑
*   您可以拥有诸如 Cron 作业之类的东西，但它们不能持续超过 15 分钟（由于平台的性能低下，例如非常非常短的多个查询），它们仅限于 2-3-4 个同时作业，具体取决于您的订阅费，并且有一个非常有限/差的调度系统（例如，你不能从你的代码中编辑它，它非常有限，所以你必须使用黑客在一天中的 2 个确切时间或类似的时间运行相同的工作，它不能看节省时间等）
*   当您在服务器上遇到错误时，它可能会完全产生误导，请查看论坛是否有此错误，我不记得任何事情
*   推送通知通常会延迟 20-30 分钟

任意示例：您想从他们的数据库中获取随机项目，您的应用程序调用将提供它的作业（1 个 API 调用），该作业查询数据库，但您必须进行 2 次调用，首先获取项目的数量（1 个 API 调用），然后第二个获取随机项目（1 个 API 调用），这是针对该功能的 3 个 API 调用，每秒 60 个请求，20 个用户可以在在达到请求限制和平台失控之前的给定时间，在您包括浏览应用程序屏幕和内容的其他用户之后，您会看到这会导致什么......

如果它有任何好处，Facebook 不会每次提到都使用它来购买它的一些应用程序吗？我建议三件事：-第一-不要听 Parse 的家伙，这是他的平台，所以他必须推广它，听那些一直在使用它的人使用它来制作东西
-第二-如果你需要一个严肃的和可扩展的平台，不想完全定制，去亚马逊云服务或类似的经过测试和可靠的东西 - 第三 - 如果你有任何服务器端经验，请远离平台，如果你不去雇佣该项目的后端开发人员，它会更便宜，你最终会得到一个可行的解决方案

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2012-10-30T21:28:14.907

我花了一天时间研究 parse.com，这是我目前根据我发现的观点得出的结论（请记住，我目前只有非常简短的 SDK 开发经验）..

Parse.com 显然有一些非常吸引人的积极因素，这就是为什么我发现自己正在研究它，但为了辩论，我将专注于批评，因为伟大的积极因素都列在他们的网站上。（干得好 parse.com 试图解决如此大的问题！）...

*   在推荐中，Hipmunk 是我想说的最大的名字。它被列为使用 SDK 数据部分的应用程序。如果不接触 Hipmunk 开发人员，我无法确定，但我无法想象他们将所有数据存储在 parse.com 云中。
*   在尝试并浏览了列出的大多数应用程序之后。没有一个真正脱颖而出，因为它非常依赖服务器后端，所以我发现无法了解基于这些使用 parse.com 是否解决了可伸缩性问题。
*   该网站列出了 40,000 个应用程序并且还在不断增加。我觉得（但不知道）基于应用程序库，这个数字是基于用户群中的应用程序数量，而不是应用程序商店中真实的实时生产应用程序。如果有那么多应用程序使用 parse.com，那么应用程序库将拥有更多大牌。

Parse.com 是一个非常新的概念，甚至与其最接近的竞争对手也大不相同。因此，如果没有关于它的可扩展性和稳定性（以及所有其他方面）的具体证据，那么项目的开发人员很难考虑投入它，因为风险太大。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2012-11-09T16:12:48.267

[我为自己对类似问题](https://www.parse.com/questions/rest-api-or-android-sdk-for-real-time-messaging-and-data)的答案进行了测试，它可能非常非常快。但是，您获得的结果可能取决于您的实施细节......

使用本机 HTTP 堆栈进行 Parse/REST 调用的测试将 Android SDK 与 Android 进行了比较...

测试详情：

测试环境 - 在 10 个月大的手机上通过快速 WIFI 连接使用最新的 Android 版本。

（上传63张图片，平均文件大小=80K）

使用 android SDK 测试 1 RESULT=Slow performance

测试 2 在 android RESULT=VERT FAST 上使用本机 REST 调用

--编辑--因为这里有兴趣....

关于 http thruput 、 parse SDK(android) 和性能，可能是 parse.com 在 parse.android SDK 中实现 android asyncTask() 的方式上没有优化性能？需要8分钟的工作如何。在 parse.sdk 上可以在 3 秒内在优化的 REST、DIY 框架上完成（有关实现的详细信息，请参阅链接），我真的不知道。如果 parse 自从这些比较测试运行以来还没有修复他们的 SDK 实现，那么你可能不希望他们的默认 SDK asnycTask 东西做任何接近网络上实际工作负载的事情。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2013-07-30T20:21:45.083

Parse（和类似的 SaaS）的最大吸引力在于您可以节省数以万计的后端开发成本。鉴于后端通常是 Web 应用程序中最昂贵的部分；那种头痛是突然*噗*。

Parse 和大多数（所有）SaaS 的问题在于区域、功率、内存、带宽、可扩展性、阈值、警报和各种操作都超出了您的控制范围。

与 Shopify 相同。这是一个伟大的SaaS，可以全面控制产品、订单、库存和美观——但对机器的控制为零。所以，今天的 SaaS 与 Godaddy 并没有太大的不同。他们总是超卖或最大化他们的机器以赚钱；如果你真的关心踢屁股的表现，你就会被困住。您甚至无法购买那种级别的服务。

我想要至少与 AWS 控制台一样强大和全面的东西。大多数技术人员都知道并接受 Heroku 和 Parse 都托管在 AWS 上。谁在乎。因此，对附加服务收取更高的费用，但不要拒绝访问那些使站点和应用程序以及用户体验变得有趣的关键低级工具。提示那些 Parse 员工。

无论如何，回答这个问题：

Parse API 是简单的 JSON。因此，您可以以 Parse 应用程序期望的相同 JSON 格式提取数据。

您甚至可以使用他们的 PFObject (iOS)。在某些时候，所有高级 API 都用于一个常见的 HTTP 请求/响应。REST 通用性的好处是通用的。诸如 http、url、字符串和 utf 之类的东西。这里没有时髦的 Orb。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2014-10-14T11:36:49.000

Parse 非常适合从有关用户管理的特别辅助功能/特性开始。但我开始遇到问题..

执行/ping 时间长，1000 个对象限制，包括子查询，欧洲没有数据中心（据我所知）

如果他们可以解决性能和稳定性问题，那将是一个神圣的平台。我不知何故后悔使用它进行开发，但我输入了 5000 多行代码，所以我会坚持使用它。

也许他们应该将他们的 DEV 应用程序和 PROD 应用程序环境分开，并且在某种监督之后才允许 PROD 应用程序，或者创建一个只有付费客户的不同环境？

我们在 2014 年，每月 20 美元的服务器可以处理未优化的网站（主页上 60 个未缓存的数据库查询），每月访问量为 100 万次，这对 Parse 来说应该不难！

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-03-12T08:12:43.400

可以对应用程序进行原型设计，特别是如果 iOS/Android 开发人员不知道如何自己构建 DB/API 后端。

在开发具有比以下逻辑更复杂的查询的应用程序时，这根本不好：

```
SELECT * FROM 'db' WHERE 'column' = 'value' LIMIT 100; 
```

Parse 上不存在相关查询和内部连接。如果你需要，祝你好运更新/删除 320 000 条记录（这是我现在正在使用的数字）。

唯一真正有用的是通过 SDK 处理用户。如果我能找到一个好的文档甚至教程如何使用 Django 和 DRF/Tastypie 通过 iOS/Android 应用程序处理/创建用户，我会立即将我们公司正在开发的所有东西都转换为使用它。

# javascript - 如何使javascript变量全局化

> ID：11283732
> 
> 赞同：8
> 
> 时间：2012-07-01T16:29:28.377
> 
> 标签：javascript, global-variables

我需要使这个`data`变量全局：

```
$.ajax({
    url: "get_data.php",
    cache: false,
    dataType: 'json',
    data: {},
    success: function(data) {
        for(var i = 0; i < data.results.length; i++) {
            if(my_data.hasOwnProperty(data.results[i].id)) {
                my_data[data.results[i].id].name = data.results[i].name;
            }
        }
    }); 
```

我想在全球范围内声明这个。我需要将其声明为数组吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-01T16:30:58.413

任何变量都可以通过将其附加为窗口的属性来“全局化”。

```
window.data = data; 
```

您现在可以`data`作为全局变量访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T16:32:04.770

设置一个等于您希望等于的变量`data`。并且在给出`data`它的值时，引用变量。像这样：

```
var obj = {};

$.ajax({
    // ....

    data: obj,

    // ....
}); 
```

# excel - 使用 MS Excel 创建应用程序

> ID：11283742
> 
> 赞同：0
> 
> 时间：2012-07-01T16:30:45.853
> 
> 标签：excel, excel-2007

我有一个excel文档，里面有日历。它显示了 1990-2078 年的日历。只需输入年份并按下回车键，它就会显示输入年份的整个日历。我想学习如何做到这一点。有人得到这个吗？

您可以在链接中找到 Excel 文档，下载并自己查看。任何熟悉它的人，帮我稍微过一下。如何开发和部署此类应用程序。提前感谢您！

[带有 excel 的日历应用程序文档的链接](https://www.box.com/s/8fcf4ef9f99a824e4bdc)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T16:37:02.917

As there are no lang. specified, here's an example in C: [http://www.codingunit.com/how-to-make-a-calendar-in-c](http://www.codingunit.com/how-to-make-a-calendar-in-c)

# css - CSS：阴影覆盖

> ID：11283747
> 
> 赞同：0
> 
> 时间：2012-07-01T16:31:25.017
> 
> 标签：css

我正在尝试在对话框后面添加阴影覆盖。我遇到了一个我不太知道如何解决的问题。

这是我的代码：[jsfiddle](http://jsfiddle.net/kxbP4/)

有类 shadowDialog 的 div。

```
.shadowDialog {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #000;
    filter: alpha(opacity=50);
    -moz-opacity: 0.5;
    -khtml-opacity: 0.5;
    opacity: 0.5;
    z-index: 665;
    //display: none;
} 
```

它应该覆盖整个空间。但是，它仅涵盖我打开对话框时可以看到的空间，而不是我可以滚动到的其余空间（在下方）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T16:35:11.017

尝试`position: fixed`改用。

# sql - T-sql 获取每天的最小值和最大值

> ID：11283749
> 
> 赞同：3
> 
> 时间：2012-07-01T16:31:36.420
> 
> 标签：sql, tsql, max, min

我正在尝试编写一个查询，每天我从价格详细信息表中获取每个项目的最低和最高价格。

在价格详细信息表中，价格每天设置多次，因此同一日期有许多记录。所以我想要一个表，其中每个日期都有一行，然后将该表连接到同一个表，因此对于每个不同的日期，我想要最小值和最大值。

```
USE [a_trading_system]
GO

/****** Object:  Table [dbo].[price_details]    Script Date: 07/01/2012 17:28:31 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

SET ANSI_PADDING ON
GO

CREATE TABLE [dbo].[price_details](
    [price_id] [int] IDENTITY(1,1) NOT NULL,
    [exch_ticker] [varchar](8) NOT NULL,
    [price_set_date] [datetime] NOT NULL,
    [buy_price] [decimal](7, 2) NOT NULL,
    [sell_price] [decimal](7, 2) NOT NULL,
 CONSTRAINT [PK_price_detail] PRIMARY KEY CLUSTERED 
(
    [price_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF,   ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

SET ANSI_PADDING OFF
GO

ALTER TABLE [dbo].[price_details]  WITH CHECK ADD  CONSTRAINT    [FK_price_details_Contract] FOREIGN KEY([exch_ticker])
REFERENCES [dbo].[Contract] ([exch_ticker])
GO

ALTER TABLE [dbo].[price_details] CHECK CONSTRAINT [FK_price_details_Contract]
GO 
```

**SQL 查询**

```
select distinct 
substring(convert(varchar(12),p1.price_set_date), 0, 12),
p2.exch_ticker,
(select MIN(buy_price) from price_details ),
(select MAX(buy_price) from price_details )
from price_details as p1

left join price_details as p2 on p2.exch_ticker = p1.exch_ticker 

where p1.exch_ticker = p2.exch_ticker

group by p1.price_set_date, p2.exch_ticker 
```

**概括**

表在同一天设置了许多价格。想要每个交易所代码每天的最小值和最大值。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T16:34:38.663

一个简单的`group by`应该工作：

```
select  cast(price_set_date as date) as [Date]
,       exch_ticker 
,       min(buy_price) as MinPrice
,       max(buy_price) as MaxPrice
from    price_details as p
group by 
        exch_ticker
,       cast(price_set_date as date) 
```

不确定为什么您的示例查询使用自联接。如果有充分的理由，请为您的问题添加解释。

# archive - 7Zip 为文件添加加密

> ID：11283750
> 
> 赞同：13
> 
> 时间：2012-07-01T16:31:55.380
> 
> 标签：archive, 7zip

我有一个使用 7zFM（文件管理器）管理的 .7z 存档，我可以轻松地将对象添加到该存档中。但是，存档中的对象像我希望的那样使用 AES 加密，但是当我添加新内容时，我似乎无法为存档中的该文件添加加密，除非我解密整个存档，然后重新加密。

是否有一种简单的方法可以对 .7z 存档中的特定文件添加加密或删除加密？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-04T06:59:52.740

1.  选择要添加的新文件
2.  右键单击（上下文菜单）-> 7-Zip -> 添加到存档..
3.  选择现有档案
4.  加密，输入密码
5.  点击确定

# .net - Sandcastle 2.7 - 它使用什么安装程序？

> ID：11283751
> 
> 赞同：0
> 
> 时间：2012-07-01T16:31:57.563
> 
> 标签：.net, installation, sandcastle

刚刚下载并安装了最新版本的 Sandcastle，我对安装过程印象深刻。有谁知道是用来制作安装程序的吗？

[http://sandcastlestyles.codeplex.com/releases/view/86091](http://sandcastlestyles.codeplex.com/releases/view/86091)

特别是，安装中的优雅点包括：

1.  左侧的进度树指示完成的步骤总数。
2.  为安装过程的每个步骤明确定义的说明。
3.  如果某些步骤不是强制性的，则用户可以选择跳过该步骤。

我想为即将到来的 C# 项目使用类似的东西吗？
感谢您提供有关他们使用过的任何信息...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:17:58.840

在快速查看安装程序后，我会说 EXE 是自定义构建的，没有使用任何专用的设置创作工具。如果您查看旁边的“InstallResources”文件夹，您会发现实际的 MSI 包，它具有标准 UI，我怀疑 EXE 使用动态命令行调用它，因此它会根据用户的选择安装资源。

此外，我必须假设其余的软件包设置为从其发布服务器自动下载，因为这是标准做法。

但是，源代码应该为您提供有关其实现的更多详细信息。

# jquery - 未检测到点击事件

> ID：11283752
> 
> 赞同：2
> 
> 时间：2012-07-01T16:31:58.803
> 
> 标签：jquery, click

正如前面的问题所建议的那样，这里的代码不起作用：

```
 <div class="comments"></div>

    <textarea cols="" rows="" name="proposition" id="propo-textarea-spec"></textarea>

   <button id="my-btn">Make m'y request!</button>

    <div class="my-btn-spec invisible">
        <div class="section">

        <div class="info tag-comment-spec"></div>
            <p class="targetting"></p>
        </div>
    </div>

    <script>

        $('#my-btn').click(function() {
            var comment = $('#propo-textarea-spec').val();

            $('.targetting:last').text(comment);

            var content = $('div.my-btn-spec').html();
            $('div .comments').append(content);

        });

        $('.comments .tag-comment-spec').click(function(){
            alert('hello');

        });

    </script> 
```

事实是代码可以很好地附加 div，但是在单击新的附加 div 时不可能触发警报消息。奇怪的是，我的检查员正确检测到 tag-comment-spec div，但点击什么也没触发。

有人有想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T16:34:27.440

当您`.tag-comment-spec`动态附加到 DOM 时，您需要使用`.on()`.

```
$('.comments').on('click', '.tag-comment-spec', function() {
  alert('hello');
}); 
```

`.on()`使用动态元素处理委托事件的语法是：

```
$(StaticElement).on( eventName, target, handlderFunction); 
```

其中，`StaticElement`指在页面加载时属于 DOM 的元素，包含该`target`元素，并且`target`是您要在其上绑定事件的元素。

**相关参考：**

*   jQuery**[`.on()`](http://api.jquery.com/on)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T16:34:49.717

对附加的 div 使用 jQuery .on 函数，而不是 .click 事件。

[http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T16:35:34.560

When you attach the on click function with the alert inside you are only attaching that event handler to currently existing elements matching the passed selector.

You need to use event delegation to attach event handlers to events that may exist down the line. Try:

```
$('.comments').on('click', '.tag-comment-spec', function() {
   alert('hello');
   // Do more stuff
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T16:34:48.300

可能你想看看`.live()`。或者，因为这已被弃用，`.on()`.
我认为新内容没有事件监听器，因为添加事件监听器是在页面加载时。有`.on()`或者`.live()`你没有这个问题。

```
$("#myEl").on("click", dosomething); // live and click are exchangeable here. (Only in syntax. Effectivity may be discussed.) 
```

# iphone - 如何从网页获取数据到 NSString

> ID：11283754
> 
> 赞同：0
> 
> 时间：2012-07-01T16:32:14.037
> 
> 标签：iphone, ios, sdk, nsstring

是否有可能（使用 ASIHTTPRequest 或其他东西）从网页获取数据并将其保存到 NSString 变量？

我在网页上有以下代码：

```
<span id="ctl06_ctl06_spDailySMSSection">RANDOM TEXT xxxxxxxxxxxxxxxxxxxxxxxxxx <strong><span id="ctl06_ctl06_spNumberOfDailySMSLeft"></span></strong> AGAIN RANDOM TEXT.</span> 
```

如何从字段**ctl06_ctl06_spNumberOfDailySMSLeft**获取数据并在 iOS 应用程序中使用它？

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T16:35:58.580

To do this correctly, you need an NSXMLParser that works with the correct tags and takes in the attribute you need parsed. If you're looking for a less generic solution:

```
 NSString *urlStr = [NSString stringWithContentsOfURL:[NSURL URLWithString:@"http://your.url"] encoding:NSUTF8StringEncoding error:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:37:16.973

If you are using webview to load that webpage, following code will help you:

```
- (BOOL)webView: (UIWebView*)webView shouldStartLoadWithRequest: (NSURLRequest*)request navigationType: (UIWebViewNavigationType)navigationType {

 NSString* urlString=[NSString stringWithFormat:@"%@",[request URL]];

    return YES;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T10:50:36.500

如果您在 web 视图中显示页面，则可以简单地使用 JavaScript：

```
NSString *innerTextOfSpan = [webView stringByEvaluatingJavaScriptFromString:@"document.getElementById('ctl06_ctl06_spDailySMSSection').innerText"]; 
```

如果您不打算显示该网站，我强烈建议您使用 stavash 答案。

如果页面结构足够简单，一个简单的 Regex 可能会起作用。

# java - JFrame 外观和风格

> ID：11283761
> 
> 赞同：0
> 
> 时间：2012-07-01T16:33:21.397
> 
> 标签：java, swing, windows-7, jframe, look-and-feel

我想知道是否有创建看起来像 Windows 7 Aero 任务栏的 JFrame。我的意思是我希望整个框架看起来像这样，透明并模糊背景中的场景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T16:51:51.713

As **Swing** is a **PLAF** (Pluggable Look And Feel), there are few options to get look and feel of windows with UIManager class....

Pls try this link... it will give you some idea

[http://www.scribd.com/doc/44575030/13-Basic-Swing](http://www.scribd.com/doc/44575030/13-Basic-Swing)

# c# - 将 C# 中的字符串与 if 语句中的 OR 进行比较

> ID：11283764
> 
> 赞同：3
> 
> 时间：2012-07-01T16:33:32.240
> 
> 标签：c#, string

我是 C# 的新手，但似乎找不到关于这个问题的任何信息。这是我正在尝试做的事情：

```
string testString = txtBox1.Text;
string testString2 = txtBox2.Text;

if ((testString == "") || (testString2 == ""))
{
    MessageBox.Show("You must enter a value into both boxes");
    return;
} 
```

基本上我需要检查 txtBox1 或 txtBox2 是否为空白。但是，运行此程序时出现错误。这样做的正确方法是什么（或者我的方法全错了）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T16:38:33.117

Since you want to check whether textboxes contains any value or not your code should do the job. You should be more specific about the error you are having. You can also do:

```
if(textBox1.Text == string.Empty || textBox2.Text == string.Empty)
   {
    MessageBox.Show("You must enter a value into both boxes");
   } 
```

EDIT 2: based on @JonSkeet comments:

Usage of string.Compare is not required as per OP's original unedited post. [String.Equals](http://msdn.microsoft.com/en-us/library/c64xh8f9.aspx) should do the job if one wants to compare strings, and `StringComparison` may be used to ignore case for the comparison. string.Compare should be used for order comparison. Originally the question contain this comparison,

```
string testString = "This is a test";
string testString2 = "This is not a test";

if (testString == testString2)
{
    //do some stuff;
} 
```

the if statement can be replaced with

```
if(testString.Equals(testString2)) 
```

or following to ignore case.

```
if(testString.Equals(testString2,StringComparison.InvariantCultureIgnoreCase)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T17:02:31.073

这是一种更有效的方法，它还可以检查您的文本框是否仅填充空白。

```
// When spaces are not allowed
if (string.IsNullOrWhiteSpace(txtBox1.Text) || string.IsNullOrWhiteSpace(txtBox2.Text))
  //...give error...

// When spaces are allowed
if (string.IsNullOrEmpty(txtBox1.Text) || string.IsNullOrEmpty(txtBox2.Text))
  //...give error... 
```

*@Habib.OSU 的编辑答案也很好，这只是另一种方法。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T16:35:56.513

try

```
if (testString.Equals(testString2)){
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-01T16:37:14.973

The code provided is correct, I don't see any reason why it wouldn't work. You could also try `if (string1.Equals(string2))` as suggested.

To do `if (something OR something else)`, use `||`:

```
if (condition_1 || condition_2) { ... } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-01T16:35:25.733

use `if (testString.Equals(testString2))`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-24T17:42:14.837

尝试：

```
 if (textBox1.Text == "" || textBox2.Text == "")
    {
        // do something..
    } 
```

代替：

```
 if (textBox1.Text == string.Empty || textBox2.Text == string.Empty)
    {
        // do something..
    } 
```

因为 string.Empty 不同于 -""。

# objective-c - 在 UITextField 的 editingDidBegin 中显示 UIMenuController

> ID：11283765
> 
> 赞同：1
> 
> 时间：2012-07-01T16:33:41.713
> 
> 标签：objective-c, ios, cocoa-touch, uitextfield, uimenucontroller

我只想在文本字段变为活动状态后立即显示 UIMenuController。
我现在正在做的是：

```
- (IBAction)textFieldeditingDidBegin:(UITextField *)sender {
    // textfield menu item
    UIMenuController *menu = [UIMenuController sharedMenuController];
    [menu setTargetRect:sender.frame inView:self.view];
    [menu setMenuVisible:YES animated:YES];
} 
```

该方法被调用，但它不会显示菜单......
如果我在文本字段上执行触摸+按住手势，它会定期出现。

我希望有一个简单的解决方案，谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T13:19:38.747

我为您的问题找到了一个很好的解决方案。

`UIMenuController`当您开始使用此方法编辑文本字段时，您可以轻松地使其出现：

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    double delayInSeconds = 0.1;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
        UIMenuController *menu = [UIMenuController sharedMenuController];
        [menu setTargetRect:textField.frame inView:textField.superview];
        [menu setMenuItems:[NSArray arrayWithObjects:
                            [[UIMenuItem alloc] initWithTitle:@"Test" action:@selector(test)],
                            nil]];
        [menu setMenuVisible:YES animated:YES];
    });
} 
```

我使用该`dispatch_after`调用来确保在完成所有默认系统调用**后**`UITextField`显示菜单。

我还更改了方法的`inView:self.view`一部分，以确保菜单在文本字段的容器视图中正确显示。`setTargetRect::``inView:textField.superview`

如果您还想禁用 a 的默认菜单控件，`UITextField`可以将此方法添加到控制器：

```
- (BOOL)canPerformAction:(SEL)action withSender:(id)sender
{
    if (action == @selector(cut:))
        return NO;
    else if (action == @selector(copy:))
        return NO;
    else if (action == @selector(paste:))
        return NO;
    else if (action == @selector(select:) || action == @selector(selectAll:))
        return NO;
    else
        return [super canPerformAction:action withSender:sender];
} 
```

这在模拟器中工作得非常好。我希望这能帮到您！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T21:03:54.617

一个更简单的解决方案：

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    [[NSOperationQueue mainQueue] addOperationWithBlock:^{
        [textField select:nil];
        UIMenuController *menuController = [UIMenuController sharedMenuController];
        [menuController setMenuVisible:YES animated:YES];
    }];
} 
```

# algorithm - 检索相似条目的最快（现实）存储实现是什么？

> ID：11283767
> 
> 赞同：2
> 
> 时间：2012-07-01T16:34:02.290
> 
> 标签：algorithm, distance

几个月前我读到了[BK-trees](http://en.wikipedia.org/wiki/BK-tree) (Burkhard-Keller-Trees)，据说这是一种保存你想通过**distance-metrics**再次读出的东西的好方法。因此，在每种情况下，您都想通过相似性检索某些东西。

然而，这些 BK 树对我来说**似乎并不快**。当我尝试一个实现并进行一些输出时，只要我允许更长的距离，它就必须在树中四处走动（我用 levenshtein 验证了它并允许最多 6 次编辑）。

最快的实现（如果它只是关于速度的话）当然是将**每个条目**的距离存储在一个表中并直接查找它们，但这是太多的开销。

因此，我在标题中添加了*现实主义。***需要更多内存**是可以的，但实现应该仍然是现实的和可用的（我对这些技术的了解不够多，无法说出什么是现实，但我想有一些边界）。

有没有比 BK-trees 更快的东西，或者 BK 真的是山顶（还）？

# 设想

我没有真正的用例，但场景如下：我有 1 个 mio 条目，它们彼此之间有一定的距离（由距离函数定义）。现在我得到一个条目并想知道：

*   哪 5 个条目与给定条目最匹配
*   哪些其他条目（与数量无关）低于或等于给定阈值

**数据库**无所谓。

我猜最终最好的算法会同时匹配两者吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T03:54:54.627

另一个基于树的最近邻度量是[http://en.wikipedia.org/wiki/Cover_tree](http://en.wikipedia.org/wiki/Cover_tree)。它声称是实用的，并且[http://www.cs.waikato.ac.nz/ml/weka/](http://www.cs.waikato.ac.nz/ml/weka/)已经接受了它，所以我确实是这样。然而，最近的邻居似乎很难准确地做到，对于树木，或其他任何东西，因为有许多关于近似最近邻居的建议，我认为如果不难的话，这将是相当愚蠢的。[我可以在http://people.csail.mit.edu/indyk/edit.ps](http://people.csail.mit.edu/indyk/edit.ps)看到一个编辑距离。

进行近似最近邻搜索的另一种方法是希望最近邻将具有恰好出现在查询字符串中的连续字符部分。然后对于数据库中的所有字符串，将它们切成所有连续的 k 长子字符串，并构建一个可以用于完全匹配的表。然后对于您的查询字符串，考虑所有 k 长的连续子字符串，对它们进行精确匹配，并计算您通过精确搜索 k 长子字符串找到的数据库中所有字符串的编辑距离。

# iphone - 将对象保存到文件

> ID：11283768
> 
> 赞同：0
> 
> 时间：2012-07-01T16:34:05.260
> 
> 标签：iphone, objective-c, ios, c, cocoa-touch

我有以下代码将对象保存到文件中......

```
-(int) saveObject: (id)object forKey: (NSString *) key 
{
    //save object into file

    NSLog(@"PRESENT");
    if(filePath == nil) 
    {
        [self setFilePath:nil];
    }

    mainDict = [NSMutableDictionary dictionaryWithContentsOfFile:filePath];
    if(mainDict == nil) 
    {
        mainDict = [[NSMutableDictionary alloc] init];
    }

    [mainDict setObject:object forKey:key];

    if(![mainDict writeToFile:filePath atomically:YES]) 
    {
        return 2; //ERROR could not write object to file
        if(object == nil) {
            return 3;
        }
        if(key == nil) {
            return 4;
        }
    } 
    else 
    {
        if(shouldUseCache == YES) {
            cacheStatus = 2; //New Caches need to be updated
        }
        return 1; //SUCCESS object saved to file
    }

    //RETURN KEY's
    // *1 SUCCESS object saved to file
    // *2 ERROR could not write object to file
    // *3 ERROR object variable = nil
    // *4 ERROR key variable = nil
} 
```

如您所见，该方法应该清楚地返回一个介于 1 和 4 之间的数字，但是当我在视图控制器中调用该方法时，我得到 0？

最奇怪的部分是我什至没有在我的控制台中收到 NSLog(@"Present") ？？？

这是什么问题，是什么原因造成的？？？

这是我的简单视图控制器...

```
NSLog(@"%d",[mainDict saveObject:@"HELLO" forKey:@"foo"]); 
```

我的 .h 文件也是...

```
#import <UIKit/UIKit.h>
#import "ObjectSaver.h"

@interface ViewController : UIViewController {
    ObjectSaver *mainDict;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T16:43:23.807

刚开始：这个语句没有做任何事情：

```
 if(filePath == nil) {
     [self setFilePath:nil]; } 
```

如果您的 NSLog 没有被击中，那么该函数根本不会被调用。您是否在函数中设置了断点并进行了调试以查看它是否真的被输入过？

同样正如评论所说，您的功能目前永远不会`return 3`or `return 4`。为了能够做到这一点，`return 2`应该在这 2`if`个块之后移动，以便如果其他 2 个无效，它可能是默认错误。

# javascript - 本地存储事件在 UIWebview 中不起作用

> ID：11283777
> 
> 赞同：4
> 
> 时间：2012-07-01T16:34:50.123
> 
> 标签：javascript, objective-c, web-applications, uiwebview, local-storage

我想使用本地存储在两个 uiwebview 之间共享数据。这样他们就可以通过javascript相互通信。

它适用于 chrome(pc) 和 safari(iphone) 的两个选项卡，但不适用于两个 uiwebviews。

这是一个简单的演示：

```
var txt = document.getElementById("txt");
window.addEventListener("storage",function(e){
    if(e.key=="txt"){
        txt.value = e.newValue;
    }
},false);

txt.addEventListener("input",function(){
    localStorage["txt"]=txt.value;
},false); 
```

和 Obj-c：

```
webview = [[UIWebView alloc]initWithFrame:CGRectMake(0, 0, 320, 240)];
[self.view addSubview:webview];
[webview loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://172.22.182.29:8000/onstoragetest.html"]]];

UIWebView *webview2 = [[UIWebView alloc]initWithFrame:CGRectMake(0, 240, 320, 240)];
[self.view addSubview:webview2];
[webview2 loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://172.22.182.29:8000/onstoragetest.html"]]]; 
```

问题是存储事件永远不会被触发。

# ios - Custom UIStoryboardSegue Push and Pop matching animations

> ID：11283782
> 
> 赞同：9
> 
> 时间：2012-07-01T16:35:35.873
> 
> 标签：ios, uistoryboardsegue

I have the following code in a `UIStoryBoardSegue` to do a curl-up push segue.

```
 (void) perform {

    UIViewController *src = (UIViewController *) self.sourceViewController;
    UIViewController *dst = (UIViewController *) self.destinationViewController;

    [UIView transitionWithView:src.navigationController.view duration:1
                       options:UIViewAnimationOptionCurveEaseInOut | UIViewAnimationOptionTransitionCurlUp
                    animations:^{
                        [src.navigationController pushViewController:dst animated:NO];
                    }
                    completion:NULL];

} 
```

It works fine, but when I tap on the "back" buttons on the app, it slides backwards instead of curling down. Because this is a push, I need to pop the current view controller instead of adding another segue.

How do I do a "curl-down pop segue" ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-03T05:03:02.210

对于现在关注此内容的任何人，iOS 7 允许您以两种方式制作动画：

将 segue 设置为 Push，然后查看下面的代码以了解推送实现。

[https://github.com/Dzamir/OldStyleNavigationControllerAnimatedTransition](https://github.com/Dzamir/OldStyleNavigationControllerAnimatedTransition)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T22:42:43.447

我在 SO 上发现了这个问题，这可能会对您有所帮助：[Reversal of Custom Segue with Storyboard](https://stackoverflow.com/questions/9316233/reversal-of-custom-segue-with-storyboarding)

但这可能不是一个完美的解决方案。

# wpf - Nested data template

> ID：11283784
> 
> 赞同：1
> 
> 时间：2012-07-01T16:35:55.437
> 
> 标签：wpf, datatemplate

I need to reuse an existing data template, defined as a reource, in a data template defined in a control

...this is my customer data template as a resource so it can be a reusable object

Customer DataTemplate:

```
<ResourceDictionary ... >

    <DataTemplate DataType="{x:Type Model:Customer}">

        <StackPanel Orientation="Vertical" Width="Auto">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition Width="140" />
                    </Grid.ColumnDefinitions>                   

                    <Grid.RowDefinitions>
                        <RowDefinition Height="20"/>
                        <RowDefinition Height="25"/>
                    </Grid.RowDefinitions>

                    <TextBox Text="{Binding CustomerName}"
                        Grid.Column="0" Grid.Row="0" />
        </StackPanel>

    </DataTemplate>

</ResourceDictionary> 
```

now I need to reuse the Customer data template defined above in a user control data template

```
<UserControl x:Class="MyCustomerControl"

    <UserControl.Resources >

        <DataTemplate DataType="{x:Type frnri:CustomerViewModel}">

            question: How can I reuse customer data template here?

        </DataTemplate>

    </UserControl.Resources>

</UserControl> 
```

Is possibile this scenario WITHOUT defined the customer data template inline in the MyCustomerControl?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T16:51:45.663

Place your datatemplate in App.xaml, then it will be available throughout your program.

Declare the resource as follows

```
<Application.Resources>
<DataTemplate DataType="{x:Type Model:Customer}" x:Key="customerTemplate">

    <StackPanel Orientation="Vertical" Width="Auto">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                    <ColumnDefinition Width="140" />
                </Grid.ColumnDefinitions>                   

                <Grid.RowDefinitions>
                    <RowDefinition Height="20"/>
                    <RowDefinition Height="25"/>
                </Grid.RowDefinitions>

                <TextBox Text="{Binding CustomerName}"
                    Grid.Column="0" Grid.Row="0" />
    </StackPanel>

</DataTemplate>
</Application.Resources> 
```

Then you can reference it in your UserControl like

```
<ListBox ItemTemplate="{StaticResource customerTemplate}" /> 
```

The same will work for the ResouceDictionary

# sql-server - Accessing both stored procedure output parameters AND the result set in Entity Framework?

> ID：11283787
> 
> 赞同：0
> 
> 时间：2012-07-01T16:36:01.433
> 
> 标签：sql-server, .net-4.0, entity-framework-4.1, output-parameter

Is there any way of accessing both a result set and output parameters from a stored procedure added in as a function import in an Entity Framework model?

I am finding that if I set the return type to "None" such that the designer generated code ends up calling `base.ExecuteFunction(...)` that I can access the output parameters fine after calling the function (but of course not the result set).

Conversely if I set the return type in the designer to a collection of complex types then the designer generated code calls `base.ExecuteFunction<T>(...)` and the result set is returned as `ObjectResult<T>` but then the `value` property for the `ObjectParameter` instances is `NULL` rather than containing the proper value that I can see being passed back in Profiler.

I speculate the second method is perhaps calling a DataReader and not closing it. Is this a known issue? Any work arounds or alternative approaches?

**Edit**

My code currently looks like

```
 public IEnumerable<FooBar> GetFooBars(
        int? param1, 
        string param2, 
        DateTime from, 
        DateTime to, 
        out DateTime? createdDate, 
        out DateTime? deletedDate)
    {
        var createdDateParam = new ObjectParameter("CreatedDate", typeof(DateTime));
        var deletedDateParam = new ObjectParameter("DeletedDate", typeof(DateTime));

        var fooBars = MyContext.GetFooBars(param1, param2, from, to, createdDateParam, deletedDateParam);

        createdDate = (DateTime?)(createdDateParam.Value == DBNull.Value ? 
            null : 
            createdDateParam.Value);

        deletedDate = (DateTime?)(deletedDateParam.Value == DBNull.Value ? 
            null : 
            deletedDateParam.Value);

        return fooBars;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T18:15:30.260

根据[this](https://stackoverflow.com/a/7183184/1342632) SO post，在您迭代结果集之前，存储过程实际上不会执行。我模拟了您的场景，进行了一些测试并确认是这种情况。您没有添加代码示例，所以我看不到您在做什么，但是根据您在下面的回复，尝试将结果集缓存在列表中（例如，Context.MyEntities.ToList()）然后检查ObjectParameter 的值

# android - ImageView not replaced with other drawable

> ID：11283788
> 
> 赞同：0
> 
> 时间：2012-07-01T16:36:11.807
> 
> 标签：android, drawable, android-imageview

When taping on an `ImageView`, I want to replace it with other drawable depending on the previous drawable, with some researches I made this:

```
ImageView imgview = (ImageView) findViewById(R.id.imageView1);
imgview.setOnClickListener(new OnClickListener() {
    public void onClick(View view) {

        ImageView imageView = (ImageView) view;
        assert(R.id.imageView1 == imageView.getId());
        Integer integer = (Integer) imageView.getTag();

        integer = integer == null ? 0 : integer;

        switch (integer) {
        case R.drawable.number1:

            imageView.setImageResource(R.drawable.number2);
            imageView.setTag(R.drawable.number2);
            break;

        case R.drawable.number2:
            imageView.setImageResource(R.drawable.number3);
            imageView.setTag(R.drawable.number3);
            break;

        case R.drawable.number3:
            imageView.setImageResource(R.drawable.number4);
            imageView.setTag(R.drawable.number4);
            break;
        default:
            Toast.makeText(MainActivity.this, "exceeded", Toast.LENGTH_SHORT).show();
        }
    }
});

} 
```

The problem is the app always calls to the `toast` message in `default`. It ingores all other treatments/verifications in `case` sections.

Any idea please to solve that problem?

Thank you very much.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T16:50:31.360

You probably don't set a drawable id as the tag for the `ImageView` when you create it, like:

```
ImageView imgview = (ImageView) findViewById(R.id.imageView1);
imgview.setImageResource(R.drawable.number1);
// ... 
```

and integer becomes `0`, avoiding all the `switch`'s cases. Test and see what is the value of integer(I would say it's `0`).

You can't set an integer as the tag in xml so the only option is to set it in code, thing that you probably didn't do(at least not in the code you posted).

Another approach:

```
 final int[] ids = {R.drawable.number1, R.drawable.number2, R.drawable.number3};     
        b1.setOnClickListener(new OnClickListener() {

            int counter = 0;

            @Override
            public void onClick(View v) {
                if (counter % 3 == 0) {
                    v.setBackgroundResource(ids[0]);
                } else if (counter % 3 == 1){
                    v.setBackgroundResource(ids[1]);
                } else if (counter % 3 == 2){
                    v.setBackgroundResource(ids[2]);
                }
                counter++;
            }
        }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T16:54:29.937

原因是

你写了以下声明

```
integer = integer == null ? 0 : integer; 
```

因此，在单击块中第一次达到控制时，时间标签将为空，上面的语句将使其为 0。**但是您没有做任何事情来处理 case 0**。

因此，在每种情况下，您的标签都将为 0，它将导致默认块执行。如果您将标签设置为 0，那么您必须为 0 设置 switch case。否则它将始终为 0，并且默认块继续执行。

您的代码片段应如下所示。

```
ImageView imgview = (ImageView) findViewById(R.id.imageView1);
imageView.setImageResource(R.drawable.number1);
imageView.setTag(R.drawable.number1);

imgview.setOnClickListener(new OnClickListener() {
    public void onClick(View view) {

        ImageView imageView = (ImageView) view;
        assert(R.id.imageView1 == imageView.getId());
        Integer integer = (Integer) imageView.getTag();

        switch (integer) {
        case R.drawable.number1:

            imageView.setImageResource(R.drawable.number2);
            imageView.setTag(R.drawable.number2);
            break;

        case R.drawable.number2:
            imageView.setImageResource(R.drawable.number3);
            imageView.setTag(R.drawable.number3);
            break;

        case R.drawable.number3:
            imageView.setImageResource(R.drawable.number4);
            imageView.setTag(R.drawable.number4);
            break;
        default: 
            Toast.makeText(MainActivity.this, "exceeded", Toast.LENGTH_SHORT).show(); 
            imageView.setImageResource(R.drawable.number1);  <----You should reset it to number 1
            imageView.setTag(R.drawable.number1);
        }
    }
});

} 
```

# linux - 为什么此代码以相反的顺序输出？

> ID：11283797
> 
> 赞同：2
> 
> 时间：2012-07-01T16:37:05.297
> 
> 标签：linux, assembly, x86

为什么第一个代码打印 DCBA 和第二个 ABCD？0x44434241 不等于 DCBA 吗？

```
mov eax,4
push dword  "DCBA"
mov ebx,1
mov ecx,esp
mov edx,4
int 0x80
add esp,4

mov eax,4
push dword  0x44434241
 mov ebx,1
 mov ecx,esp
mov edx,4
int 0x80
  add esp,4 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T16:50:52.173

好吧，不，你甚至设法找到了它的证据:)

x86 是[little-endian](http://en.wikipedia.org/wiki/Endianness)，`0x44434241`数值是内存将在第一个字节位置（最低字节地址）存储 0x41，在第二个字节位置存储 0x42，依此类推。

# php - How to check my server's upload and download speed?

> ID：11283801
> 
> 赞同：7
> 
> 时间：2012-07-01T16:37:16.490
> 
> 标签：php, performance, download, monitor

I bought a server and I need to check it's internet connection (speed).

Is there an easy way to do that?

I googled but I couldn't find anything...

I did this:

```
<?php

$link = 'http://speed.bezeqint.net/big.zip';
$start = time();
$size = filesize($link);
$file = file_get_contents($link);
$end = time();

$time = $end - $start;

$speed = $size / $time;

echo "Server's speed is: $speed MB/s";

?> 
```

Is it correct?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-01T16:39:37.780

尝试：

```
<?php

$link = 'http://speed.bezeqint.net/big.zip';
$start = time();
$size = filesize($link);
$file = file_get_contents($link);
$end = time();

$time = $end - $start;

$size = $size / 1048576;

$speed = $size / $time;

echo "Server's speed is: $speed MB/s";

?> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-01T16:48:16.560

如果您有远程桌面，请安装网络浏览器并访问[speedtest.net](http://speedtest.net)并测试速度。

如果没有，以下是测试服务器下载速度的方法：

*   以 root 身份登录
*   类型`wget http://cachefly.cachefly.net/100mb.test`
*   你会看到类似`100%[======================================>] 104,857,600 10.7M/s`- 10.7M/s 是下载速度。

如果您有超过 1 台服务器，您可以通过在 2 台服务器之间传输文件来测试上传速度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-01T16:50:50.637

Have it connect to a server you know runs fast (such as Google). Then, measure how long it takes from sending the first packet to receiving the first packet - that's your upload time. The time from receiving the first to last packets is the download time. Then divide by the amount of data transferred and there's your result.

Example:

```
$times = Array(microtime(true));
$f = fsockopen("google.com",80);
$times[] = microtime(true);
$data = "POST / HTTP/1.0\r\n"
       ."Host: google.com\r\n"
       ."\r\n"
       .str_repeat("a",1000000); // send one megabyte of data
$sent = strlen($data);
fputs($f,$data);
$firstpacket = true;
$return = 0;
while(!feof($f)) {
    $return += strlen(fgets($f));
    if( $firstpacket) {
        $firstpacket = false;
        $times[] = microtime(true);
    }
}
$times[] = microtime(true);
fclose($f);
echo "RESULTS:\n"
    ."Connection: ".(($times[1]-$times[0])*1000)."ms\n"
    ."Upload: ".number_format($sent)." bytes in ".(($times[2]-$times[1]))."s (".($sent/($times[2]-$times[1])/1024)."kb/s)\n"
    ."Download: ".number_format($return)." bytes in ".(($times[3]-$times[2]))."s (".($return/($times[3]-$times[2])/1024)."kb/s)\n"; 
```

(You will get an error message from Google's servers, on account of the `Content-Length` header missing)

Run it a few times, get an average, but don't run it too much because I don't think Google would like it too much.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T16:49:37.117

For the download, you can create a script that will calculate the average download speed:

```
$start = time(true);

$fileSize = '10240'; // if the file's size is 10MB

for ($i=0; $i<10; $i++) {
    file_get_contents('the_url_of_a_pretty_big_file');
}

$end = time(true);

$speed = ($fileSize / ($end - $start)) / $i * 8;

echo $speed; // will return the speed in kbps 
```

# java - 在 Java 中使用 StreamWriter.close()

> ID：11283802
> 
> 赞同：0
> 
> 时间：2012-07-01T16:37:29.910
> 
> 标签：java, streamwriter

有什么理由在 StreamWriter 类上调用 close 方法吗？为什么我必须这样做？如果我不关闭 StreamWriter 我会得到某种未定义的行为吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-01T16:50:21.173

假设您正在谈论[java.io.OutputStreamWriter](http://docs.oracle.com/javase/6/docs/api/java/io/OutputStreamWriter.html)，是的，当您不想再写任何内容时，您应该在 finally 块中关闭它。这允许关闭底层的 OutputStream。如果底层的OutputStream是一个FileOutputStream，它将释放文件描述符（这是一个有限的OS资源），并允许其他aps读取文件。如果它是一个 SocketOutputSTream，它将向另一方发出信号，表明它不应该期望来自套接字输入流的更多内容。

通常，流和读取器/写入器必须始终正确关闭。如果使用 Java 7，请使用新的 try-with-resources 构造来确保它会自动为您完成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T16:47:44.873

**操作系统**管理文件，如果在 java 中文件没有关闭，系统范围的资源就会丢失。

但是，在 java 7 中，您可以使用

```
try (OutputStreamWriter outWriter = new OuputStreamWriter(outStream, "UTF-8")) {
   ...
} 
```

没有`close`。（输出流和编写器实现`Closeable`）。

*顺便说一句，@PriestVallon 只是想让你把你的问题表述得更好/更有吸引力。如您所见，对此的“轻”反应可能会被误解。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T16:48:46.537

写入和读取流经常涉及到操作系统资源的使用，如套接字、文件句柄等。如果你在流上写入，你也应该关闭它，我是为了释放你可能获得的资源（这取决于您在流下方使用的实际资源）。有时关闭流写入器涉及释放资源的独占分配，或将临时数据刷新到流中。有时关闭是无效的，这取决于您拥有的流类型，但接口必须处理所有必须关闭流的情况。

# eclipse - Eclipse Post build step with command 'scp' should prompt for password

> ID：11283803
> 
> 赞同：1
> 
> 时间：2012-07-01T16:37:53.880
> 
> 标签：eclipse

I want to configure a post build step that copies the binary via ssh:

```
scp MyProgramm root@192.168.2.113:/bin 
```

I remember having done smth like that before and I was asked for the root password by a Dialog Box in eclipse! Does anyone know if I need to put smth else in the textfield? Or how can I pass the password? `echo password | scp...` does not work...

Thanks guys!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T07:43:54.857

这是灵魂：

```
bash -c "scp MyProgram root@192.167.1.111:/bin/" 
```

现在我仍然不知道如何传递密码，所以我不必输入它！任何人？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-23T19:00:58.200

pscp -pw 'PASSWORD' ${PWD}/SRCFILE root@192.168.0.164:/root/DSTFILE

# android - Displaying a sequence of images with a time delay

> ID：11283804
> 
> 赞同：0
> 
> 时间：2012-07-01T16:37:55.890
> 
> 标签：android

I wanted to display 9 images one after the other. I have included the 9 images as an array:

```
imageHolders = new ArrayList<ImageView>();
    imageHolders.add((ImageView) view.findViewById(R.id.imgOne));
    imageHolders.add((ImageView) view.findViewById(R.id.imgTwo));
    imageHolders.add((ImageView) view.findViewById(R.id.imgThree));
    imageHolders.add((ImageView) view.findViewById(R.id.imgFour));
    imageHolders.add((ImageView) view.findViewById(R.id.imgFive));
    imageHolders.add((ImageView) view.findViewById(R.id.imgSix));
    imageHolders.add((ImageView) view.findViewById(R.id.imgSeven));
    imageHolders.add((ImageView) view.findViewById(R.id.imgEight));
    imageHolders.add((ImageView) view.findViewById(R.id.imgNine)); 
```

This is what I have tried:

```
public void handleMessage(Message msg) {
        int currentImage = 0;
        int nextImage = 0;
        // Logic to change the images
        for (final ImageView imageView : imageHolders) {
            currentImage = Integer.parseInt(imageView.getTag().toString());
            if (currentImage > 1) {
                nextImage = currentImage - 1;
            } else {
                nextImage = 9;
            }
                     imageView.setTag(""+nextImage);

            new CountDownTimer(10000, 1000) {

                 public void onTick(long millisUntilFinished) {

                 }

                 public void onFinish() {
                        imageView.setVisibility(VISIBLE);
                 }
              }.start();        

        }
        super.handleMessage(msg);
    }

} 
```

There is a delay between the first and the second images. I am not able to introduce a delay between the rest. I have no clue about introducing the delay. Any suggestions would be appreciated.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T17:02:17.293

您可以使用[AnimationDrawable](http://developer.android.com/reference/android/graphics/drawable/AnimationDrawable.html)为您执行此操作，并允许您使用 android:duration 属性设置持续时间（以毫秒为单位）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T17:02:22.860

AnimationDrawable 可能是最好的答案，但对于另一种解决方案，您可以查看 AsyncTask。

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

然后，您可以在后台休眠一段时间，然后显示下一张图像。

您可能希望在此任务完成时处理一个事件，并在侦听器中调用下一个事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-17T18:23:53.603

如果你只想制作一个简单的静态动画（所有图像在同一位置），你可以使用 AnimationDrawable 但你不能轻易地动态改变它——比如改变速度或其他东西。我刚刚为此编写了一个简单的类，因此我可以为一个 ImageView 设置多个动画并更改速度。

```
public class ImageSequence extends ImageView {

ArrayList<Drawable> draws = new ArrayList<Drawable>();
ArrayList<Integer> bnds = new ArrayList<Integer>(); //bounds of sequences - index of first and last frame.
ArrayList<String> names = new ArrayList<String>(); //sequences names.
Timer timer = new Timer(true);
TimerTask task;
int p = -1; //current playback position.
int cS = -1; //current sequence.

public ImageSequence(Context context) {
    super(context);
    createTask();
}

public void addSequence(String name, int[] res){
    names.add(name);
    bnds.add(draws.size());
    bnds.add(draws.size() + res.length - 1);
    for (int i = 0; i < res.length; i++){
        draws.add(getContext().getResources().getDrawable(res[i]));
    }
}

public void play(String sequence, float speed){     
    cS = -1;
    for(int i = 0; i < names.size(); i++){
        if(names.get(i) == sequence){ cS = i; break;}
    }
    if(cS<0) return;
    p = -1;
    task.run();
    task.cancel();
    if(speed <= 0) return;
    createTask();
    timer.schedule(task, (long) (1000/speed), (long) (1000/speed));
}

public void stop(){
    task.cancel();
}

public void cancelTimer(){
    timer.cancel();
}

private void createTask() {
    task = new TimerTask(){
        public void run() {
            p++;
            mHandler.obtainMessage(1).sendToTarget();
        }
    };
}

public Handler mHandler = new Handler() {
    public void handleMessage(Message msg) {
        int l = p;
        if(l > bnds.get(cS*2+1) || l < bnds.get(cS*2)) l = bnds.get(cS*2);
        p = l;
        ImageSequence.this.setImageDrawable(draws.get(l));
    }
};
} 
```

从外面你可以像这样使用它：

```
seq.addSequence("orange", new int[]{R.drawable.ic_oval_diode_orange, R.drawable.ic_oval_diode_off});
seq.addSequence("green", new int[]{R.drawable.ic_oval_diode_green, R.drawable.ic_oval_diode_off});
seq.addSequence("red", new int[]{R.drawable.ic_oval_diode_red, R.drawable.ic_oval_diode_off});
seq.play("red", 4); 
```

我在 Android 和 Java 方面并没有真正的经验，但它确实有效，并且为我完成了这项工作。希望它会帮助某人。

# python - Easiest way to substitute characters in the string

> ID：11283806
> 
> 赞同：-1
> 
> 时间：2012-07-01T16:38:17.107
> 
> 标签：python

Suppose I have a main form named "`main_form`" and I have few more forms name like "`w_main_form`","`g_main_form`" etc etc which are based on "`main_form`" and they vary according to the '`category`'.

Now is there any easy way to *generate* names of derived forms and how to call them.

Suppose the category is "`iron`" then the form name should be "`w_main_form`" and when the category is "`coal`" the form name should be "`g_main_form`".

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T16:41:21.593

```
>>> main_name = "main_form"
>>> derived_names = []
>>> for prefix in ["w_", "g_"]:
    derived_names.append("%s%s" % (prefix, main_name))

>>> derived_names
['w_main_form', 'g_main_form'] 
```

或者，使用列表推导（我的首选方法）：

```
>>> derived_names = ["%s%s" % (prefix, main_name) for prefix in ["w_", "g_"]]
>>> derived_names
['w_main_form', 'g_main_form'] 
```

一般来说，因此您可以自己应用相同的原则，您想根据函数来考虑要执行的转换`f(main_name, data)`，以及`data`提供给它的 。在这种情况下，操作是“前置”（我用 实现`"%s%s" % (prefix, main_name)`）并且数据是所有前缀。

编辑：是的。

```
>>> category_to_prefix = {'iron': 'w_', 'coal': 'g_'}
>>> def category_to_form_name(category):
    return '%s%s' % (category_to_prefix.get(category,""), 'main_form')

>>> category_to_form_name('iron')
'w_main_form'
>>> category_to_form_name('coal')
'g_main_form'
>>> category_to_form_name(None)
'main_form' 
```

如果您正在寻找答案，请投票并接受答案（单击向上箭头和绿色复选标记）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T16:47:31.443

这将按照您的评论说明..

```
def generate_Name(base, category):
    if category == 'iron':
        derived_name = 'w_'+base
    elif category == 'coal':
        derived_name = 'g_'+base

    return derived_name

iron_form = generate_Name('main_form', 'iron')
coal_form = generate_Name('main_form', 'coal')

print iron_form
print coal_form 
```

给

```
w_main_form
g_main_form 
```

# sql-server - Return single row from joined tables where > 1 rows in child table

> ID：11283808
> 
> 赞同：1
> 
> 时间：2012-07-01T16:38:53.573
> 
> 标签：sql-server, tsql

I have several tables, `books, bookcategories, categories`

`bookcategories` is a join table to allow the many to many relationship between `books` and `categories`.

I want to be able to run a category search on books such that the search returns one row per book even when the book has many categories.

**Books**

```
ID   | Title
1    | Once upon...
2    | How many...
3    | How much... 
```

**Categories**

```
ID   | Category
1    | x
2    | y
3    | z 
```

**BookCategories**

```
 BookId | CategoryId
     1    |     1
     1    |     2
     2    |     2
     2    |     3
     2    |     1
     3    |     1 
```

I thought I could get away with this:

```
SELECT  b.Id,
    b.Title,
FROM    ( books b
    INNER JOIN bookcategories bc ON b.ID= bc.BookId
    )
WHERE (bc.categoryId =1 AND bc.categoryId=2)
GROUP BY b.Id, b.Title 
```

but as soon as I add the AND, the query returns no rows. But that is the criteria I need to apply - I only want to return book rows where the book has both category 1 and 2 as above (i.e. not category 1 OR category 2)

Can't help thinking that I am missing something quite basic. Can anyone help?

Do I need to change the structure of the tables or is there a way of achieving what I need.

Wing

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T16:44:43.307

这应该返回同时具有第一类和第二类的书籍：

```
select  b.Id
,       b.Title
from    books b
join    bookcategories bc
on      bc.BookId = b.Id
group by
         b.Id
,        b.Title
having   sum(case when bc.categoryId = 1 then 1 end) > 0
         and sum(case when bc.categoryId = 2 then 1 end) > 0 
```

或者，您可以使用双重`exists`子句：

```
select  b.Id
,       b.Title
from    books b
where   exists
        (
        select  *
        from    bookcategories bc
        where   bc.BookId = b.Id
                and bc.CategoryId = 1
        )
        and exists
        (
        select  *
        from    bookcategories bc
        where   bc.BookId = b.Id
                and bc.CategoryId = 2
        ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T17:48:25.327

另一种选择（至少基于我*认为*你想要的）：

```
SELECT ID, Title
FROM 
(
  SELECT b.ID, b.Title, c = COUNT(bc.BookID)
  FROM dbo.Books AS b
  INNER JOIN dbo.BookCategories AS bc
  ON b.ID = bc.BOokID
  AND bc.CategoryID IN (1,2)
  GROUP BY b.ID, b.Title
) AS x
WHERE c >= 2; -- in case there is no unique constraint on BookCategories 
```

虽然这也应该有效：

```
SELECT b.ID, b.Title
  FROM dbo.Books AS b
  INNER JOIN dbo.BookCategories AS bc
  ON b.ID = bc.BOokID
  AND bc.CategoryID IN (1,2)
GROUP BY b.ID, b.Title
HAVING COUNT(*) >= 2; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-01T16:52:40.070

Try adding `select distinct` and changing the `and` to an `or`.

```
SELECT      DISTINCT b.Id, b.Title
FROM        books b
INNER JOIN  bookcategories bc ON b.ID= bc.BookId
WHERE       (bc.categoryId=1 OR bc.categoryId=2)
ORDER BY    b.ID 
```

The `distinct` keyword will NOT return duplicate rows; so you can now use `categoryID = 1 OR categoryID = 2`.

# c++ - 我可以写一些像 make_tuple 那样使用类型推导的东西吗？

> ID：11283816
> 
> 赞同：0
> 
> 时间：2012-07-01T16:40:32.750
> 
> 标签：c++, templates, template-argument-deduction

我可以写也可以写`make_tuple<int,bool>(1,true)`，`make_tuple(1,true)`编译器会推断出它的类型。这种能力是否适用于我编写的代码，或者它是否以某种方式内置在我无法访问的编译器中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T18:41:49.170

这是一个例子：

```
template <typename... Ts>
tuple<Ts...> my_make_tuple(Ts... ts)
{
    return tuple<Ts...>(ts...);
} 
```

注意：这不使用完美转发或任何其他技巧。这只是一个示例，说明如何编写自己的参数推导函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T16:42:20.007

模板参数推导（此名称的专有名称）是所有函数模板的标准规定的。应遵循的过程在 C++11 第 14.8.2 节中进行了说明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T16:44:09.780

只要推导是明确的，编译器将能够推导类型。否则，您可能需要以这些模板参数的形式为编译器提供提示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T16:44:13.760

make_tuple 函数只是一个普通的函数模板。你可以自己做同样的事情。

# objective-c - 有没有更简单的方法将文本附加到 NSString？

> ID：11283828
> 
> 赞同：-1
> 
> 时间：2012-07-01T16:42:29.760
> 
> 标签：objective-c, nsstring

我正在尝试编写一个动态 URL，除了以这种方式附加字符串之外，还有其他更简单的方法吗？这似乎效率低下。

```
NSString *folder1 = @"sonic";
NSString *folder2 = @"usr";
NSString *url = @"http://www.mydomain.com";

url = [url stringByAppendingFormat:@"/"];
url = [url stringByAppendingFormat:folder2];
url = [url stringByAppendingFormat:@"/"];
url = [url stringByAppendingFormat:folder1]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T17:00:29.193

可能：

```
NSString *url = [NSString stringWithFormat:@"http://www.mydomain.com/%@/%@", folder2, folder1]; 
```

# database - 快速、可靠的 nosql db，用于索引单个文档，但一次检索全部

> ID：11283829
> 
> 赞同：0
> 
> 时间：2012-07-01T16:42:29.947
> 
> 标签：database, json, nosql

我需要一个基于文档的数据库，我可以在其中更新单个文档，但是当我获得它们时，我会立即获得所有文档。在我的应用程序中，我不需要搜索，最多会有 100k 个文档。

db 应托管在专用机器或 VM 上，并具有 web api。

什么是最好的选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T22:38:13.450

这可能不太聪明。如果您只更新一个文档，那么当您知道其他 99,999 个文档没有更改时，为什么还要检索所有其他文档？

除非您基于此进行计算，否则您可能希望数据库为您执行此操作并且只获取结果？

# android - 多个联系人选取器列表

> ID：11283831
> 
> 赞同：2
> 
> 时间：2012-07-01T16:42:36.450
> 
> 标签：android, checkbox, android-listview, android-contacts, contactscontract

我有一个联系人选择器列表，其中包含具有电话号码的联系人的复选框。现在，我的问题是似乎无法获取已检查联系人的姓名和电话号码。

这是我的代码：

```
 import android.app.ListActivity;
    import android.content.ContentResolver;
    import android.content.Intent;
    import android.database.Cursor;
    import android.net.Uri;
    import android.os.Bundle;
    import android.provider.ContactsContract;
    import android.provider.ContactsContract.CommonDataKinds.Phone;
    import android.util.Log;
    import android.util.SparseBooleanArray;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.EditText;
    import android.widget.ListAdapter;
    import android.widget.ListView;
    import android.widget.SimpleCursorAdapter;

    public class Create_Group extends ListActivity implements OnClickListener{

        // List variables
        public String[] Contacts = {};
        public int[] to = {};
        public ListView myListView;

        Button save_button;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.create_group);

            // Initializing the buttons according to their ID
            save_button = (Button)findViewById(R.id.save_group_button);

            // Defines listeners for the buttons
            save_button.setOnClickListener(this);

            Cursor mCursor = getContacts();
            startManagingCursor(mCursor);

            ListAdapter adapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_multiple_choice, mCursor,
                                                          Contacts = new String[] {ContactsContract.Contacts.DISPLAY_NAME },
                                                          to = new int[] { android.R.id.text1 });
            setListAdapter(adapter);
            myListView = getListView();
            myListView.setItemsCanFocus(false);
            myListView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);

        } 

        private Cursor getContacts() {
            // Run query
            Uri uri = ContactsContract.Contacts.CONTENT_URI;
            String[] projection = new String[] { ContactsContract.Contacts._ID,
                                            ContactsContract.Contacts.DISPLAY_NAME};
            String selection = ContactsContract.Contacts.HAS_PHONE_NUMBER + " = '"
                    + ("1") + "'";
            String[] selectionArgs = null;
            String sortOrder = ContactsContract.Contacts.DISPLAY_NAME
                    + " COLLATE LOCALIZED ASC";

            return managedQuery(uri, projection, selection, selectionArgs,
                    sortOrder);
        }

        public void onClick(View src) {
            Intent i;
            switch (src.getId())
            {
            case R.id.save_group_button:

                int checked_Names_Counter = 0;

                // Goes over the list of contacts and checks which were checked
                for (int j = 0; j < myListView.getCount(); j++)
                {
                    if (myListView.isItemChecked(j) == true)
                    {   
                        Cursor cur = getContacts();
                        ContentResolver contect_resolver = getContentResolver();
                        cur.moveToFirst();

                        /**
                        * Here I tried to compare the IDs but each list has different IDs so it didn't really help me...
                        // Converts the current checked name ID into a String
                        String Checked_ID = String.valueOf(myListView.getCheckedItemIds()[checked_Names_Counter]);

                        // Checks if the current checked ID matches the cursors ID, if not move the cursor to the next name
                        while (Checked_ID != cur.getString(cur.getColumnIndexOrThrow(ContactsContract.Contacts._ID)))
                        {
                            cur.moveToNext();
                        }
                        */

                        /**
                        * Here I tried to compare the names, even though it's not a good pratice, and it didn't work either...
                        String Checked_Name = myListView.getAdapter().getItem(checked_Names_Counter).toString();

                        // Checks if the current checked ID matches the cursors ID, if not move the cursor to the next name
                        while (Checked_Name != cur.getString(cur.getColumnIndexOrThrow(ContactsContract.Contacts.DISPLAY_NAME)))
                        {
                            cur.moveToNext();
                        }
                        */
                        String id = cur.getString(cur.getColumnIndexOrThrow(ContactsContract.Contacts._ID));
                        String name = "";
                        String no = "";

                        Cursor phoneCur = contect_resolver.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,
                                ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = ?", new String[] { id }, null);

                        name = phoneCur.getString(phoneCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
                        no = phoneCur.getString(phoneCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

                        id = null;
                        name = null;
                        no = null;
                        phoneCur = null;
                        checked_Names_Counter++;

                    }
                }

                // Goes back to the Manage Groups screen
                i = new Intent(this, Manage_Groups.class);
                startActivity(i);
                break;  
        }

      }
    } 
```

有任何想法吗？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T17:04:28.007

看起来你很亲密，我使用 ListView.getCheckedItemIds() 返回所选联系人的唯一 ID：

```
public void onClick(View view) {
    long[] ids = myListView.getCheckedItemIds();
    for(long id : ids) {
        Cursor contact = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, 
                ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = ?", new String[] { id + "" }, null);

        // Do whatever you want with the data
    }
} 
```

**添加**

我有一个关于这段代码的快速问题：

```
// Goes back to the Manage Groups screen
i = new Intent(this, Manage_Groups.class);
startActivity(i); 
```

Does this bring the user back to a *previous* Activity? If so you should use `finish();` instead. finish() ends the current Activity, taking it off the stack and freeing up any memory (less memory wasted means a faster app.) It also allows the previous Activity to restore the saved state when it left (filled in EditTexts, previous Spinner selections, toggle button and checkmarks, etc.) The Activity resumes where the user left off.

# sql-server - SQL WHERE 子句性能下降

> ID：11283834
> 
> 赞同：1
> 
> 时间：2012-07-01T16:43:07.403
> 
> 标签：sql-server, performance, tsql

我有一个正在处理的查询，它显示了我没有预料到的性能问题。这是到目前为止的查询。

```
INSERT INTO @Bridge (PolicyNumber, ProducerCode, BridgeDate, EffectiveDate, FirstName, LastName, LicenseNumber, BirthDate, Address, City, State, ZipCode)
SELECT     tab.col.value('@PolicyNumber', 'VARCHAR(10)') AS PolicyNumber,
           tab.col.value('@ProducerCode','VARCHAR(10)') as ProducerCode,
           tab.col.value('@BridgeDate','DATETIME') AS BridgeDate,
           tab.col.value('@EffectiveDate', 'DATETIME') as EffectiveDate,
           tab.col.value('@FirstName', 'VARCHAR(200)') as FirstName,
           tab.col.value('@LastName', 'VARCHAR(200)') as LastName,
           CASE 
              WHEN tab.col.value('@LicenseNumber','VARCHAR(50)') LIKE '%0000%' THEN NULL
              WHEN tab.col.value('@LicenseNumber','VARCHAR(50)') LIKE '%1111%' THEN NULL
              WHEN tab.col.value('@LicenseNumber','VARCHAR(50)') LIKE '%2222%' THEN NULL
              WHEN tab.col.value('@LicenseNumber','VARCHAR(50)') LIKE '%3333%' THEN NULL
              WHEN tab.col.value('@LicenseNumber','VARCHAR(50)') LIKE '%4444%' THEN NULL
              WHEN tab.col.value('@LicenseNumber','VARCHAR(50)') LIKE '%5555%' THEN NULL
              WHEN tab.col.value('@LicenseNumber','VARCHAR(50)') LIKE '%6666%' THEN NULL
              WHEN tab.col.value('@LicenseNumber','VARCHAR(50)') LIKE '%7777%' THEN NULL
              WHEN tab.col.value('@LicenseNumber','VARCHAR(50)') LIKE '%8888%' THEN NULL
              WHEN tab.col.value('@LicenseNumber','VARCHAR(50)') LIKE '%9999%' THEN NULL
              ELSE tab.col.value('@LicenseNumber','VARCHAR(50)')
           END as LicenseNumber,
           tab.col.value('@BirthDate','DATETIME') as BirthDate,
           REPLACE(tab.col.value('@Address1','VARCHAR(300)'), ' APT ',' #') as Address1,
           tab.col.value('@City','VARCHAR(300)') as City,
           tab.col.value('@State','VARCHAR(5)') as State,
           tab.col.value('@ZipCode','VARCHAR(10)') as Zip
FROM       @xml.nodes('//rows/datarow') as tab(col)

SELECT     B.PolicyNumber, 
           B.ProducerCode, 
           B.BridgeDate,
           B.EffectiveDate,
           H.current_policy,
           H.cancel_date,
           H.first_eff_date,
           H.display_address,
           H.city,
           H.state,
           H.zip
FROM       @Bridge B
LEFT JOIN  (
SELECT     P.policy_id,
           P.current_policy,
           CASE 
              WHEN A.pobox <> '' THEN 'PO BOX ' + REPLACE(A.pobox,'PO BOX ','')
              ELSE RTRIM(A.house_num + ' ' + A.street_name + ' ' + CASE
                                                                      WHEN A.apt_num = '' THEN ''
                                                                      ELSE '#' + A.apt_num
                                                                    END)
           END as display_address,
           A.pobox,
           A.house_num,
           A.street_name,
           A.apt_num,
           A.city,
           MAX(A.policyimage_num) as policimage_num, --this is just to limit the results to the most recent
           S.state,
           A.zip,
           P.first_eff_date,
           P.cancel_date
FROM       Diamond.dbo.Policy P WITH (NOLOCK)
LEFT JOIN  Diamond.dbo.Address A WITH (NOLOCK)
ON         P.policy_id = A.policy_id
AND        A.nameaddresssource_id = 3
LEFT JOIN  Diamond.dbo.State S WITH (NOLOCK)
ON         A.state_id = S.state_id
WHERE      A.state_id IS NOT NULL
AND        P.current_policy NOT IN (SELECT PolicyNumber FROM @Bridge)
GROUP BY   P.policy_id,
           P.current_policy,
           P.cancel_date,
           P.first_eff_date,
           A.pobox,
           A.house_num,
           A.street_name,
           A.apt_num,
           A.city,
           S.state,
           A.zip) AS H
ON         B.Address = H.display_address
AND        B.State = H.state
AND        B.City = H.city
AND        SUBSTRING(B.ZipCode,1,5) = SUBSTRING(H.Zip,1,5)
AND        B.PolicyNumber != H.current_policy
WHERE      H.current_policy IS NOT NULL 
```

此查询自行运行，大约在 1:30 秒内完成。但是如果我在 WHERE 子句中添加以下内容

```
AND       B.EffectiveDate != H.first_eff_date 
```

突然，查询需要更长的时间才能返回结果。（在我写这篇文章的时候，我们已经超过 15 分钟了，而且还在继续）我认为简单地有一个子句来清除一些额外的行不会产生如此剧烈的效果，但显然它确实如此。我如何解决它，我只是好奇是否有人对它为什么会产生这种效果有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T14:32:25.713

没有动手我只能猜测，但这里有一些地方我认为你可以整理并可能节省运行时间。

1，您重复了确保保单编号不匹配所需的工作。选择你拥有的两个之一，而不是两个。我建议尝试两者看看哪个更快。

即：

```
AND        P.current_policy NOT IN (SELECT PolicyNumber FROM @Bridge) 
```

会做同样的事情，你不需要两者。

```
AND        B.PolicyNumber != H.current_policy 
```

2，值得尝试从您的子查询中删除所有分组 - 您实际上并没有`policimage_num`用于任何事情。那么为什么要分组呢？如果您担心从 Address 返回许多行，那么您可以在列集上使用 DISTINCT，这可能会更快。

3、A.state_id 是可以为空的值吗？如果不考虑尝试 INNER JOIN 到地址并删除空检查。

4，老实说，我根本没有看到该子查询的明显原因，这似乎使事情过于复杂。如果没有它，您是否不能简单地将表连接在一起（如果需要，再次使用 DISTINCT）？

换句话说，进行调整，我敢打赌，如果您尝试其中的一些想法，您可以将其低于原始运行时间。

# assembly - 汇编中的推送指令（intel 8086）

> ID：11283840
> 
> 赞同：0
> 
> 时间：2012-07-01T16:43:52.223
> 
> 标签：assembly, x86

我需要选择正确的工具来调用函数 foo 而不是用 c 编写的。foo 得到 1 个参数 0x100fa500。

第一个答案是：

```
sub esp,2
mov word[esp],0xa500
sub esp,2
mov word[esp] , 0x100f
call foo
add esp 4 
```

第二个：

```
 sub esp,2
 mov word[esp],0x100f
 sub esp,2
 mov word[esp] , 0xa500
 call foo 
```

为什么第二个是真的？我认为首先实现正确的推送参数，然后调用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T16:49:47.663

除了`add esp, 4`最后的缺失，第二个版本是正确的，因为 Intel 架构是 little-endian。这意味着 DWORD 存储在内存中，其最低有效 BYTE 或 WORD 占用较低的内存地址。在您的情况下，`0xA500`是 DWORD 的最低有效字，第二个版本正确地将其放置在堆栈的 4 字节区域的低 2 字节中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T16:49:28.693

这取决于调用约定，但对于“cdecl”，由调用者来清理堆栈。这意味着您的第一个答案是正确的，因为它确实“添加了 esp,4”。然而，就像他的答案中的 ndkrempel 通知一样，参数应该像第二个答案一样以小端方式传递。

[http://en.wikipedia.org/wiki/X86_calling_conventions](http://en.wikipedia.org/wiki/X86_calling_conventions)

# mysql - 仅当存在多个不等于 0 的值时，SQL 才查询平均值？

> ID：11283843
> 
> 赞同：0
> 
> 时间：2012-07-01T16:44:37.183
> 
> 标签：mysql, sql

如果特定 item_id 存在两个或多个非零值，我只想计算值的 AVG。如果不存在两个或多个非零值，我不想计算 AVG。

当前的 SQL 如下。也许应该先有一个 if 子句？......有什么想法吗？

```
SELECT AVG( days_since ) AS days_out
  FROM (
    SELECT days_since
    FROM user_123
    WHERE item_id = 645
AND days_since <> 0
ORDER BY id DESC
    LIMIT 5
  ) AS recent 
```

似乎 If 子句可能有效；

```
IF SELECT COUNT (*), item_id, days_since >= 2 
where days_since <>0, then perform AVG... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T16:52:40.093

关于什么：

```
SELECT AVG(days_since) AS days_out
  FROM User_123
 WHERE Item_ID = 645
   AND Days_Since <> 0
HAVING COUNT(*) > 1 
```

我不确定 ORDER BY 和 LIMIT 子句的用途，因此您必须调整答案以重新施加它们所暗示的条件。

* * *

> 如何在重新应用 Order By 和 Limit 时保持工作。使用这些以便在平均计算中仅使用 5 个最近的条目。

```
SELECT AVG(days_since) AS days_out
  FROM (SELECT days_since
          FROM User_123
         WHERE Item_ID = 645
           AND Days_Since <> 0
         ORDER BY ID DESC
         LIMIT 5
       ) AS u
HAVING COUNT(*) > 1; 
```

# symfony - Symfony2 在类型事件监听器中添加集合

> ID：11283846
> 
> 赞同：0
> 
> 时间：2012-07-01T16:45:08.493
> 
> 标签：symfony

让我先解释一下我要做什么。

所以我有一个名为 property 的实体，它有一个名为 type 的字段（可以是 text、email 或 multi_option）和另一个名为 propertyValue 的实体，它是属性的值

所以我找到[了本教程](http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html)，我的问题是在 EventListener 而不是一个简单的字段中如何添加具有其他实体值的选择或一组复选框？

在这里你有我的 EventListener 代码，你可以看到我面临的问题

```
 <?php
namespace Comehoy\AdBundle\Form\EventListener;

use Symfony\Component\Form\Event\DataEvent;
use Symfony\Component\Form\FormFactoryInterface;
use Symfony\Component\EventDispatcher\EventSubscriberInterface;
use Symfony\Component\Form\FormEvents;

class AddValueFieldSubscriber implements EventSubscriberInterface
{
    private $factory;

    public function __construct(FormFactoryInterface $factory)
    {
        $this->factory = $factory;
    }

    public static function getSubscribedEvents()
    {
        // Tells the dispatcher that we want to listen on the form.pre_set_data
        // event and that the preSetData method should be called.
        return array(FormEvents::PRE_SET_DATA => 'preSetData');
    }

    public function preSetData(DataEvent $event)
    {
        $data = $event->getData();
        $form = $event->getForm();

        // During form creation setData() is called with null as an argument
        // by the FormBuilder constructor. We're only concerned with when
        // setData is called with an actual Entity object in it (whether new,
        // or fetched with Doctrine). This if statement let's us skip right
        // over the null condition.
        if (null === $data) {
            return;
        }

        // check if the ProprertyValue object is "new"
        $type = $data->getI18nField()->getProperty()->getType();

        if ('multi_option' === substr($type, 0, 12)) {
            /*
             * 
             * Here is the problem since I'm kind of sure this is not the way to do this
             * 
             */
            $builder = $this->factory->createNamedBuilder('entity', 'value');
            $builder->add('value', 'entity', array(
                'class' => 'ComehoyAdBundle:Translation\AdPropertyOption',
                'query_builder' => function(EntityRepository $er) {
                    return $er->createQueryBuilder('po')
                        ->orderBy('po.value', 'ASC');
                }
            ));
        } else {
            //It's not a multi option field so we use the type directly
            $form->add($this->factory->createNamed($type, 'value'));
        }
    }
} 
```

所以我基本上尝试做的就是我可以在使用 $bulder 参数的类型的 buildForm 中做同样的事情

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T06:01:32.707

```
public function preSetData(DataEvent $event)
{
    $data = $event->getData();
    $form = $event->getForm();

    $form->add($this->factory->createNamed('type', 'name', $data->getValue(), array(
            'class' => 'ComehoyAdBundle:Translation\AdPropertyOption',
            'query_builder' => function(EntityRepository $er) {
                return $er->createQueryBuilder('po')
                     ->orderBy('po.value', 'ASC');
            }
    )));
} 
```

如果您使用的是 SF 2.1，那么：

```
public function preSetData(DataEvent $event)
{
    $data = $event->getData();
    $form = $event->getForm();

    $form->add($this->factory->createNamed('name', 'type', $data->getValue(), array(
            'class' => 'ComehoyAdBundle:Translation\AdPropertyOption',
            'query_builder' => function(EntityRepository $er) {
                return $er->createQueryBuilder('po')
                     ->orderBy('po.value', 'ASC');
            }
    )));
} 
```

# wordpress - users.php 中用户旁边的帖子数，不包括自定义帖子类型

> ID：11283847
> 
> 赞同：1
> 
> 时间：2012-07-01T16:45:38.510
> 
> 标签：wordpress

我注意到，在我的仪表板中由 users.php 生成的用户列表在显示每个用户的帖子数量时没有考虑自定义帖子类型。

因此，即使用户有 20 个自定义帖子类型的帖子，它仍然会在他们的姓名旁边显示“0”。

有谁知道如何解决这个问题并将自定义帖子类型添加到这个号码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:13:47.307

对于其他希望实现相同目标的人，我设法使用此解决方案解决了它...

```
function my_manage_users_columns($columns) {
    $columns['post_type_count'] = __( 'Books', 'textdomain' );

    return $columns;
}
add_filter('manage_users_columns', 'my_manage_users_columns'); 
```

使用“书籍”作为自定义字段的名称

# c++ - 带有构造函数的模板 SFINAE

> ID：11283850
> 
> 赞同：3
> 
> 时间：2012-07-01T16:46:50.927
> 
> 标签：c++, c++11

考虑以下两个模板函数：

```
template <typename T, typename A>
T* create(A i) {
   return new T(i);
}

template <typename T, typename A>
T* create(A i) {
   return new T();
} 
```

它们具有相同的签名，但对于给定的 T 和 A，只能实例化一次。

有没有办法将一些 SFINAE 成语应用于上述模板函数，以便当且仅当 T 具有接受 A 作为参数类型的构造函数时，可以实例化的模板函数的版本是第一个版本，否则第二个版本带有默认构造函数将被实例化，例如：

```
// S is given, cannot be changed:
struct S {
   S(int) {}
}

int main() {
   // the first template function should be instantiated since S has S(int)
   create<S, int>(0); // the only call in the program
   // ...
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T16:53:53.930

使用[`is_constructible`](http://en.cppreference.com/w/cpp/types/is_constructible)：

```
template <typename T, typename A>
typename std::enable_if<std::is_constructible<T, A>::value, T*>::type create(A i)
{
    return new T(i);
}

template <typename T, typename A>
typename std::enable_if<!std::is_constructible<T, A>::value, T*>::type create(A i)
{
    return new T();
} 
```

# mysql - 用MYSQL中多行的值更新多行

> ID：11283851
> 
> 赞同：0
> 
> 时间：2012-07-01T16:46:52.330
> 
> 标签：mysql

表1如下

```
A  B
1  x
2  y
3  z
4  t 
```

表2如下

```
A2 B2
1  k
2  l
3  m
4  n 
```

我想`Table2.B2`用值`Table1.B`第 2 行和第 3 行更新第 2 行和第 3 行

所以得到的表 2 将是

```
A2 B2
1  k
2  y
3  z
4  n 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T17:20:57.823

```
UPDATE table1, table2 
SET table2.b2= table1.b 
WHERE table1.a= table2.a2 
AND table2.a2 IN (2, 3); 
```

**更新**

```
UPDATE `table1`, `table2` 
SET `table2`.`b2`= `table1`.`b` 
WHERE (`table2`.`a2`- 4)= `table1`.`a` 
AND `table2`.`a2`> 4 
AND `table2`.`a2`< 9 ; 
```

# qt - 如何为 Qt App 提供许可证？

> ID：11283852
> 
> 赞同：2
> 
> 时间：2012-07-01T16:47:01.630
> 
> 标签：qt, licensing

我在 Qt 的下载页面 (http://qt.nokia.com/downloads) 中看到 Qt 在 GPL v3、LGPL v2 和商业许可下可用。我使用从该下载页面下载的 Windows 离线安装程序安装了 Qt。我完成了我的应用程序，我想在许可区域中完美地制作所有内容。我的应用程序是封闭源代码、免费和动态链接，因此 LGPL v2 可以。但是，我在哪里以及如何通知用户有关许可的信息？我必须将它写在txt或程序中吗？我必须为每个 qt .dll 文件提供许可证吗？我该怎么做？无论如何，我在哪里知道我使用的是 Qt 的 LGPL 版本而不是 GPL v3？或者两者相同（从已安装的 QT SDK 视图），我可以决定在发布我的作品时要使用哪个许可证？因此，如果我改变主意并且想将我的应用程序置于 GPL v3 许可下，

（注意：我知道 GPL v3 和 LGPL 的要求之间存在差异，但现在我对许可证部署的过程感兴趣。）

（抱歉英语不好）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T01:44:31.983

对于 Qt Licensing，您无需说明您使用的 Qt 版本。或者，如果需要，您可以放置​​一个“关于 Qt”功能，以显示有关框架的弹出窗口（带有`qApp->aboutQt();`）。

如果您想将您的应用程序置于 (L)GPL 下，您必须这样做：

1.  你必须释放你的代码（当然）
2.  在您的程序中提供 LGPL 的副本（例如，在 LGPL 的名为“COPYING.LESSER”或 GPL 的名为“COPYING”的文件中）。
3.  在每个源文件的开头，您必须编写如下内容（此处为 LGPLv3 许可证）：

    > *MySoft*是免费软件：您可以根据自由软件基金会发布的 GNU 宽通用公共许可证的条款重新分发和/或修改它，许可证的第 3 版或（由您选择）任何更高版本。
    > 
    > *MySoft*的分发是希望它有用，但没有任何保证；甚至没有对适销性或特定用途适用性的默示保证。有关更多详细信息，请参阅 GNU 通用公共许可证。
    > 
    > *您应该随MySoft*一起收到 GNU 宽通用公共许可证的副本。如果没有，请参阅[http://www.gnu.org/licenses/](http://www.gnu.org/licenses/)。

欲了解更多信息，您可以在此处访问 GNU 网站：[http ://www.gnu.org/licenses/gpl-howto.html](http://www.gnu.org/licenses/gpl-howto.html)

# c++ - 类的内存位置（参考《C++ 对象模型内幕》一书）

> ID：11283853
> 
> 赞同：3
> 
> 时间：2012-07-01T16:47:08.853
> 
> 标签：c++, heap-memory, stack-memory

我目前正在阅读内部 C++ 对象模型。在第 9 页，它有一个图表显示了一个类的内容是如何在内存中布局的。它指出对象中实际驻留在类内存中的唯一部分是非静态数据成员。

这是 SO 关于程序内存内容的帖子：

[C++ 中的堆栈或堆中的全局内存管理？](https://stackoverflow.com/questions/1169858/global-memory-management-in-c-in-stack-or-heap)

在第二个答案中，它详细说明了程序的内存布局 - 显示了堆栈和堆。

静态数据成员/任何类函数的位置（基本上是类中未存储在对象中的部分——参见第 9 页）是否会根据对象是在堆栈上还是在堆上而改变？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T16:52:47.507

Static data members reside in the same area of memory that global variables and plain static variables would reside. It is the "class memory" that could either be on the stack or heap, depending on how the instance of the class was created.

A static data member is not too different from a global variable. However, it is scoped by the class name, and its access by name can be controlled via `public`, `private`, and `protected`. `public` gives access to everyone. `private` would restrict access to only members of the class, and `protected` is like `private` but extends access to a class that inherits from the class with the static data member.

In contrast, a global variable is accessible by name by everyone. A plain static variable is accessible by name by code in the same source file.

A plain class method is actually just a regular function (modulo access controls), but it has an implicit `this` parameter. They do not occupy any space in a class. However, a `virtual` class method would occupy some memory in the class, since it has to resolve to a derived class's implementation of the method. But, polymorphism is likely not yet covered where you are in your textbook.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T16:53:23.713

No, where variables are allocated doesn't affect the storage of static data or code. These are generally stored in separate memory areas, that are neither stack or heap.

Functions and static data members are special in that that there is only one copy of each in the whole program.

Variables of class, or other, types are most often created and destroyed multiple times during a program run.

# php - 如何使用部分访问应用程序的脚本？

> ID：11283854
> 
> 赞同：0
> 
> 时间：2012-07-01T16:47:09.163
> 
> 标签：php, zend-framework, partial

我知道要从另一个模块访问脚本，您只需将模块名称作为第二个参数传递，但我找不到如何从 application/views 文件夹访问脚本。

我尝试如下，但没有奏效：

```
echo $this->partial('myscript.phtml', 'application', $this);
echo $this->partial('myscript.phtml', '', $this); 
```

但没有一个奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T17:04:00.433

试试这个：

```
echo $this->partial('myscript.phtml', 'default', $this); 
```

主应用程序通常被称为“默认”模块。

# hibernate - 休眠员工和国家/地区的一对一映射

> ID：11283856
> 
> 赞同：0
> 
> 时间：2012-07-01T16:47:29.177
> 
> 标签：hibernate, hibernate-mapping

我是新来的冬眠。请帮我。

我有 2 个名为 Employee 和 Country 的表。我需要用选定的国家/地区保存 E​​mployee。我们使用 .net 作为前端，java 作为后端。我们是否需要为选定的国家加载国家对象并将其设置为员工对象，因为我们在员工和国家之间有一对一的映射？有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T16:59:09.763

是的，这就是你应该做的。请注意：

*   除非您在给定国家/地区只有一名员工，否则您没有一对一的关联，而是多对一的关联
*   using`session.load(countryId)`可以为您提供对给定国家/地区的引用（当然，如果您知道其 ID），甚至无需执行选择查询。如果该国家尚未加载到会话中，它将简单地返回一个统一的代理到该国家，这足以初始化关联。当然，如果你想确保国家确实存在，你应该使用`session.get(countryId)`，它执行一个选择查询并在会话中加载国家的数据（当然，除非它已经被加载）。

# iphone - 为什么 iPhone w/4.3 上带有 Google Admob 中介的 iAd 在设备旋转之前不显示？

> ID：11283864
> 
> 赞同：0
> 
> 时间：2012-07-01T16:48:26.847
> 
> 标签：iphone, objective-c, admob, iad

我目前正在将我的应用程序从 AdWhirl 切换到 admob 中的中介。除了在 iPhone 的 4.3 模拟器上，我让它在任何地方都能正常工作。它适用于 4.3 iPad 和 >=5 iPhone/iPad。（我的 4.3 设备不幸结束了，所以我现在无法测试...）

在 iPhone 上 AdMob 广告可以正常显示，但在显示 iAd 时，需要旋转设备才能显示广告。我不知道我做错了什么，或者它是否是框架中的错误。

我在这里有一个示例项目[来](http://walz.me/TEST.tgz)演示该问题。

任何想法是什么原因造成的？

谢谢你的帮助！

编辑：我已经在实际设备上进行了测试，这似乎也是一个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T02:30:52.843

看来这是框架中的一个错误。这是我想出的解决方法：

```
if ([self.controller.admobView.mediatedAdView isKindOfClass:[ADBannerView class]]) {
   if (![self.controller.admobView.mediatedAdView isDescendantOfView:self.controller.admobView]) {
      [self.controller.admobView addSubview:self.controller.admobView.mediatedAdView];
   }
   if (self.controller.admobView.mediatedAdView.frame.size.height == 0) {
      CGRect iadFrame;
      iadFrame.origin.x = iadFrame.origin.y = 0;
      iadFrame.size = [ADBannerView sizeFromBannerContentSizeIdentifier:((ADBannerView*)self.controller.admobView.mediatedAdView).currentContentSizeIdentifier];
      self.controller.admobView.mediatedAdView.frame = iadFrame;
   }
} 
```

我还没有遇到任何问题，但时间会证明它是否会导致任何其他问题......（请注意，我将高度与零进行比较，而不是检查零矩形，因为该比较由于某种原因失败在我的测试中......）

（我也在admob群发过[帖子](https://groups.google.com/d/msg/google-admob-ads-sdk/zZYQzdA6G3M/X1pxoTTghVMJ)，说不定会有人知道更多……）

# android - 显示键盘时，全屏活动正在隐藏列表视图内容

> ID：11283865
> 
> 赞同：0
> 
> 时间：2012-07-01T16:48:33.967
> 
> 标签：android, android-layout, android-widget

当键盘弹出我的列表视图中的前几行时无法查看，我真的不想因此在我的应用程序的一个活动中恢复为非全屏，我相信其他人不会 - 所以任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T16:58:15.567

在您的清单使用中`android:windowSoftInputMode="adjustResize":`

```
<activity android:name=".YourActivity"
          android:windowSoftInputMode="adjustResize">
</activity> 
```

# apache - 使用 .htaccess 和 .htpasswd 保护文件

> ID：11283866
> 
> 赞同：1
> 
> 时间：2012-07-01T16:48:37.973
> 
> 标签：apache, .htaccess, .htpasswd

我在配置 .htaccess 文件以保护文件的访问时遇到了一些麻烦。要保护的文件是：www.mydomain.com/admin/stats.php

我使用以下代码将 .htaccess 文件放入 www.mydomain.com/admin 文件夹：

```
AuthName "Restricted Area" 
AuthType Basic 
AuthUserFile /
<Files stats.php>
require valid-user
</Files> 
```

.htpasswd 文件也在 www.mydomain.com/admin 文件夹中，它包含用户名和密码。

如果我尝试访问 www.mydomain.com/admin/stats.php，我会收到“内部服务器错误”。我认为错误可能出现在“AuthUserFile”的路径中，但我怎样才能告诉文件要保护的文件位于.htpasswd 的同一文件夹中？

服务器是基于 Linux 的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T16:58:40.143

我认为您需要将完整路径放入 htpasswd 文件：即。

> AuthUserFile /home/-user-/-site-/.htpasswd

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-24T10:54:32.927

你好，你可以试试这个：

这是一个 path.php 文件，它将显示其父文件夹的真实路径

```
<?php 

     echo realpath('path.php'); 

?> 
```

在你的 .htpasswd 你需要有这样的东西：

```
username:password 
```

但密码需要加密，你可以用

```
<?php 

echo crypt('your_password'); 

?> 
```

最后这是 .htaccess 文件

```
<Files page_to_protect.php>
AuthName "Message" 
AuthUserFile \realpath_to_htpasswd\.htpasswd 
AuthType Basic
require valid-user
</Files> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T16:59:28.747

从 Apache[文档](http://httpd.apache.org/docs/2.0/mod/mod_auth.html#authuserfile)：

> File-path 是组文件的路径。如果它不是绝对的，则将其视为相对于 ServerRoot。

这意味着您要么指定文件的完整（绝对）路径，要么指定`.htpasswd`相对于您的文件的路径`ServerRoot`。例子：

```
AuthUserFile /www/passwords/.htpasswd 
```

# ios - UITableView 在更新 NSFetchedResultsController 时保持滚动在正确的位置

> ID：11283869
> 
> 赞同：8
> 
> 时间：2012-07-01T16:48:55.980
> 
> 标签：ios, uitableview, nsfetchedresultscontroller, infinite-scroll

我正在开发一个主要使用`UITableView`. 它从服务器检索文章页面。我们有>25000篇文章；所以我实现了一个下拉刷新和无限滚动来遍历标题集合。下载的那些使用核心数据持久化；`NSFetchedResultsController`用于自动更新`UITableView`.

但是，我已经实现了双向滚动；上和下。由于允许用户向下滚动 25000 个文章标题，因此我必须删除用户已经滚动的标题。如果用户向上滚动，我必须在当前标题上方重新插入标题。这样做，我在文章集合中有一个移动窗口。

我使用部分和标题按日期组显示我的文章。

问题是因为无限滚动是双向的，所以我经常在表格的较高位置删除或添加文章。事实上，要实现这一点，我必须将关联的谓词更改为`NSFetchedResultsController`.

滚动被搞砸的结果。我已经让它跳回到它应该是ish的位置。这不好，因为它是一个跳跃（动画：否），如果我把动画打开，它会在回到正确的位置之前绕整个地方。而且这个位置并不完全是它应该的位置。

我不确定我是否很好地解释了我的问题。我认为问题可能出在我使用的方式上，`UITableView`但我不确定应该如何使用它来使它变得更好。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-11T09:03:08.073

如果您只在 Core Data 中存储文章标题，我认为它可以处理 25.000 个标题。

但是我认为您遇到的问题是表格可见元素的分页

这是我用来处理您请求的内容的[链接。](http://www.oodlestechnologies.com/blogs/Pagination-in-UITableview)您必须稍作调整才能使用 Core Data 和远程源。

如果可以的话，请发布一些代码，以便我们看看。

# matlab - 绘制曲线的导数

> ID：11283870
> 
> 赞同：0
> 
> 时间：2012-07-01T16:48:57.760
> 
> 标签：matlab, matlab-figure, matlab-guide

我在 MATLAB 中有一条 3D 曲线，现在我想在另一个图中绘制该曲线的导数？
例如，对于*y* = *x* ^(2 ，对)*x*的导数是*y* = 2 *x*。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T18:23:20.983

我不明白“3D”部分。为什么 y=x^2 是 3D 曲线？

但是如果你想在同一个图上绘制 y=x^2 及其导数，请使用 ezplot

```
clear all; close all;
syms x 
y=x^2;
h=ezplot(y,[-6,6]);
set(h, 'Color', 'r'); 
hold on;
ezplot(diff(y,x),[-6,6]); 
```

![在此处输入图像描述](../Images/b34779a7a37e19635d86da76ab84ba6f.png)

# javascript - 暂停 youtube 视频，youtube api

> ID：11283871
> 
> 赞同：13
> 
> 时间：2012-07-01T16:48:59.660
> 
> 标签：javascript, youtube, youtube-api, youtube-javascript-api

我正在尝试使用以下代码暂停和播放 YouTube 视频，这几乎是[Youtube API 页面](https://developers.google.com/youtube/iframe_api_reference)的副本：

```
// 2\. This code loads the IFrame Player API code asynchronously.
var tag = document.createElement('script');
tag.src = "http://www.youtube.com/player_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

// 3\. This function creates an <iframe> (and YouTube player)
//    after the API code downloads.
var player;
function onYouTubePlayerAPIReady() {
    player = new YT.Player('player', {
        height: '315',
        width: '560',
        videoId: 'bpOR_HuHRNs',
    });
} 
```

[**这是 jsFiddle 中的演示**](http://jsfiddle.net/4WPmY/1/)

但是，它不起作用。任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-01T17:09:57.763

播放器准备好后使用`player.playVideo();`（恢复）和`player.pauseVideo();`（暂停）：http: [//jsfiddle.net/4WPmY/6/](http://jsfiddle.net/4WPmY/6/)

```
function onYouTubePlayerAPIReady() {
    player = new YT.Player('player', {
        height: '315',
        width: '560',
        videoId: 'bpOR_HuHRNs',
    });
    document.getElementById('resume').onclick = function() {
        player.playVideo();
    };
    document.getElementById('pause').onclick = function() {
        player.pauseVideo();
    };
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-04T19:53:10.700

在您的 HTML 中，有一些按钮来控制视频：

```
<input type="button" id="play">
<input type="button" id="pause"> 
```

使用 jQuery，绑定一个事件监听器（点击）来触发你的播放器对象上的一个函数：

```
$(function() {
  $('#play').click(function() {
    player.playVideo();
  });
  $('#pause').click(function() {
    player.pauseVideo();
  });
}); 
```

我使用 YouTube 的 Player and Data api 构建了一个应用程序。拿走你需要的东西： [https ://github.com/HunterMeyer/YouTV](https://github.com/HunterMeyer/YouTV)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-03T21:00:52.520

```
<div id="player"></div>
<a href="#" id="resume">Play</a> 
```

**在此代码中，我将“恢复”和“暂停”按钮合二为一**：[示例](https://jsfiddle.net/jmsmarcelo/unrkt65x/)

```
// 2\. This code loads the IFrame Player API code asynchronously.
var tag = document.createElement('script');
tag.src = "https://www.youtube.com/player_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

// 3\. This function creates an <iframe> (and YouTube player)
//    after the API code downloads.
var player;
function onYouTubePlayerAPIReady() {
    player = new YT.Player('player', {
        height: '315',
        width: '560',
        videoId: '0Bmhjf0rKe8',
        events: {
            'onStateChange': onPlayerStateChange
        }
    });
    document.getElementById('resume').onclick = function() {
        PlayPause();
        return false;
    };
}
// 4\. This function change name of tag click.
var playerState;
function onPlayerStateChange(event) {
    var getId = document.getElementById('resume');
    if(event.data === 0) {
        getId.innerText = 'Play';
    }
  else if(event.data === 1) {
        getId.innerText = 'Pause';
    }
  else if(event.data === 2) {
        getId.innerText = 'Resume';
    }
  else if(event.data === 3) {
        getId.innerText = 'Loading...';
    }
    playerState = event.data;
}
// 5\. This function Play/Pause the video.
function PlayPause() {
    if(playerState == '1') {
        player.pauseVideo();
    }
    else {
        player.playVideo();
    }
} 
```

# java - GAE 不支持 com.sun.net.httpserver

> ID：11283872
> 
> 赞同：0
> 
> 时间：2012-07-01T16:49:03.703
> 
> 标签：java, google-app-engine, web

我正在尝试将已经在本地服务器中运行的 Web 应用程序部署到 GAE。问题是我无法克服这些错误：

com.sun.net.http 服务器。Google App Engine 的 Java 运行时环境不支持 HttpExchange

Google App Engine 的 Java 运行时环境不支持 com.sun.net.httpserver.Headers

Google App Engine 的 Java 运行时环境不支持 com.sun.net.httpserver.HttpHandler

Google App Engine 的 Java 运行时环境不支持 java.net.InetSocketAddress

Google App Engine 的 Java 运行时环境不支持 com.sun.net.httpserver.HttpContext

这些类很重要，因为让服务器响应/请求处理程序运行，但 GAE 似乎不支持这些包。有 servlet 的解决方案，但我不确定它们如何替换这个包的类。任何想法或替代方案?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T16:54:28.330

查看 AppEngine [Java servlet 环境文档](https://developers.google.com/appengine/docs/java/runtime)。

AppEngine 本身提供服务器；您的应用程序不应尝试提供该功能。您提供的只是 servlet（使用 中的类`javax.servlet.http`）。

# java - Java Group 布局、垂直布局问题

> ID：11283875
> 
> 赞同：4
> 
> 时间：2012-07-01T16:49:26.433
> 
> 标签：java, swing, vertical-alignment, layout-manager, grouplayout

我正在尝试制作一个两列三行的布局。类似于以下内容：

```
----------------------
| Username |Textbox| |
| Email    |Textbox| |
---------------------- 
```

然而，即使我很确定这些组管理正确，它仍然会像这样在一行中结束： ![单行](../Images/ccb13c9dcdca40b2767606a68145fe62.png)

我将垂直组分开就好了

```
gl_contentPanel.setHorizontalGroup(
        gl_contentPanel.createSequentialGroup()
                  .addGroup(gl_contentPanel.createParallelGroup(GroupLayout.Alignment.LEADING)
                           .addComponent(usernameLabel)
                           .addComponent(emailLabel))
                  .addGroup(gl_contentPanel.createParallelGroup(GroupLayout.Alignment.LEADING)
                           .addComponent(usernames)
                           .addComponent(email))
             );
        gl_contentPanel.setVerticalGroup(
                gl_contentPanel.createSequentialGroup()
                   .addGroup(gl_contentPanel.createParallelGroup(GroupLayout.Alignment.BASELINE)
                        .addComponent(usernameLabel)
                        .addComponent(usernames))
                   .addGroup(gl_contentPanel.createParallelGroup(GroupLayout.Alignment.BASELINE)
                        .addComponent(emailLabel)
                        .addComponent(email))
             ); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T18:43:11.713

您需要设置容器的布局 - 请参阅下面第三行中的标记 [1]。在我看来，您似乎错过了这一点，并且容器使用了 FlowLayout。

```
JFrame frame = new JFrame("GroupLayout Test");
GroupLayout gl_contentPanel = new GroupLayout(frame.getContentPane());
frame.setLayout(gl_contentPanel); // [1]

JLabel usernameLabel = new JLabel("User name");
JLabel emailLabel = new JLabel("Email");
JTextField usernames = new JTextField("usernames");
JTextField email = new JTextField("email");

// your snippet
gl_contentPanel.setHorizontalGroup(
        gl_contentPanel.createSequentialGroup()
                  .addGroup(gl_contentPanel.createParallelGroup(GroupLayout.Alignment.LEADING)
                               .addComponent(usernameLabel)
                               .addComponent(emailLabel))
                      .addGroup(gl_contentPanel.createParallelGroup(GroupLayout.Alignment.LEADING)
                               .addComponent(usernames)
                               .addComponent(email))
                 );
    gl_contentPanel.setVerticalGroup(
            gl_contentPanel.createSequentialGroup()
               .addGroup(gl_contentPanel.createParallelGroup(GroupLayout.Alignment.BASELINE)
                    .addComponent(usernameLabel)
                    .addComponent(usernames))
               .addGroup(gl_contentPanel.createParallelGroup(GroupLayout.Alignment.BASELINE)
                    .addComponent(emailLabel)
                    .addComponent(email))
         );
// end of your snippet

frame.pack();
frame.setVisible(true); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T19:08:00.867

[作为参考，这里](https://stackoverflow.com/a/8504753/230513)有一个两列三行布局的工作示例，如下图所示，可能有助于指导您。

![图片](../Images/aba51f1c897c991db7f52100c661b442.png)

# c# - "System.InvalidOperationException" - xsd XSD2Code Stylesheet XML C# Visual Studio

> ID：11283878
> 
> 赞同：0
> 
> 时间：2012-07-01T16:49:38.163
> 
> 标签：c#, xml, visual-studio, xsd, xsd2code

I created an .xsd from an xml file using XSD.Exe from the Visual Studio Tools (now Win 7 SDK Tools). My .xsd file:

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema id="SceneFile" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema"   xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
<xs:element name="Scene">
<xs:complexType>
  <xs:sequence>
    <xs:element name="VNESceneName" type="xs:string" minOccurs="0" maxOccurs="1"/>
    <xs:element name="VNEPlayerName" type="xs:string" minOccurs="0" maxOccurs="1"/>
    <xs:element name="VNEButtons" minOccurs="0" maxOccurs="1"> 
```

(cutted sicne it's too long) I then used XSD2Code (an add-in for VS) to create an .Designer.cs file:

```
namespace VNEngine
{
using System;
using System.Diagnostics;
using System.Xml.Serialization;
using System.Collections;
using System.Xml.Schema;
using System.ComponentModel;
using System.IO;
using System.Text;
using System.Collections.Generic;

public partial class Scene
{

    private string vNESceneNameField;
    private string vNEPlayerNameField;
    private List<SceneVNEButton> vNEButtonsField;
    private SceneVNETextBox vNETextBoxField;
    private SceneVNEBackground vNEBackgroundField;
    private List<SceneVNESprite> vNESpritesField;
    private SceneVNEMusic vNEMusicField;
    private static System.Xml.Serialization.XmlSerializer serializer;

    public Scene()
    {
        this.vNEMusicField = new SceneVNEMusic();
        this.vNESpritesField = new List<SceneVNESprite>();
        this.vNEBackgroundField = new SceneVNEBackground();
        this.vNETextBoxField = new SceneVNETextBox();
        this.vNEButtonsField = new List<SceneVNEButton>();
    }

    public string VNESceneName
    {
        get
        {
            return this.vNESceneNameField;
        }
        set
        {
            this.vNESceneNameField = value;
        }
    } 
```

(cutted sicne it's too long)

Now I want to create a "Scene"(the root xml tag) in my C# code:

```
 Scene testscene = new Scene();
            testscene.VNEPlayerName = "hallo"; 
```

All up to this point is Working, but when i want to save or Serialize (or Deserialize) like this:

```
 testscene.SaveToFile(@"Content/Scenes/testscene.xml"); 
```

And now when executing I get an Error at the Line (in SceneFiles.designer.cs)

```
 private static System.Xml.Serialization.XmlSerializer Serializer
    {
        get
        {
            if((serializer == null))
            {
       --->  serializer = new System.Xml.Serialization.XmlSerializer(typeof(Scene));
            }
            return serializer;
        }
    } 
```

And my Error goes like this:

> //
> 
> Eine nicht behandelte Ausnahme des Typs "System.InvalidOperationException" ist in System.Xml.dll aufgetreten.
> 
> Zusätzliche Informationen: Fehler beim Reflektieren des Typs 'VNEngine.Scene'.
> 
> //
> 
> My rough english translation:
> 
> A not handled Exception: System.InvalidOperationException appeared in System.Xml.dll Additional Information: Error at Reflecting the type 'VNEngine.Scene'
> 
> //

Does anyone know what I made wrong?

The same thing worked with an smaller not as complex and not with xsd.exe generatet .xsd stylesheet.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:09:29.637

好的，我找到了，XSD2Code 确实有一个选项 GenerateXMLAttributes 需要设置为 true。

# backbone.js - Backbone.js: Best way to handle multiple nullable filter parameters

> ID：11283881
> 
> 赞同：0
> 
> 时间：2012-07-01T16:49:46.090
> 
> 标签：backbone.js

have the following function on my **collection**:

```
getFiltered: function (status, city) {
        return this.filter(function (trainer) {
            return ((status === null) ? trainer : trainer.get("TrainerStatusName") === status) &&
                    ((city === null) ? trainer : trainer.get('City') === city);
        });
    } 
```

What is is best way to deal with nullable params passed in i.e. if city it null then ignore filter/fetch all and if status is null then ignore filter/fetch all

The code above works, but curious about alternatives

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T18:21:38.460

~~好的，首先，我对你的问题有点困惑；标题说它是关于处理“可空”参数的，但是您的代码看起来像是在处理“特殊情况”参数（特别是“全部”）......除了培训师为空的情况，但我不认为甚至在遍历 Backbone 集合时也是可能的。~~

*** * 编辑 * *** OP 更新了问题，因此上述内容不再相关。我也相应地更新了我的答案。

在任何情况下，您的代码都没有任何错误或不寻常之处。三元运算符是处理一次性特殊情况的标准方法。但是，如果您正在寻找替代想法，这里有一个使用额外功能来干燥（消除重复）您的代码的想法：

```
function matchesOrAll(expected, actual) {
    return expected === null || expected === actual;
}

getFiltered: function (status, city) {
    return this.filter(function (trainer) {
        return matchesOrAll(status, trainer.get("TrainerStatusName") &&
               matchesOrAll(city, trainer.get("City"));
} 
```

*** * 编辑 * ***

既然我们谈论的是空值而不是“全部”，值得指出的是，对于更简单的空值/未定义情况，有一个更好的模式。例如，如果您只是过滤城市，则代码可能只是：

```
getFiltered: function (expectedCity) {
    return this.filter(function (currentCity) {
        return expectedCity === (currentCity || expectedCity);
} 
```

换句话说，您可以利用 Javascript 的“真实性”，以及析取（即`||`）布尔表达式返回第一个真实值的事实。这消除了对三元组的需要，许多库使用这种模式来填充未提供的参数；例如，下面是 jQuery 中的一行，如果没有提供，则将“target”参数设置为新对象：

```
target = arguments[1] || {}; 
```

不幸的是，当您处理事物的属性/属性（例如`trainer.get('foo')`）而不是直接处理对象（例如`trainer`）时，没有什么好的捷径可以使用（除了创建一个函数）。

# oracle - oracle PL/SQL stored procedure

> ID：11283885
> 
> 赞同：0
> 
> 时间：2012-07-01T16:50:22.253
> 
> 标签：oracle, plsql

I have finished my first real PL/SQL stored proc, this stored proc works as expected. I am new to PL/SQL, could you please point anything wrong or bad coding ?

This code is assuming a naming convention, for example, 't_company' table will use 'companyId' as its primary key and its type is number.

Thank you very much.

```
create or replace
package body test_erp AS    
    procedure init_data is        
    begin         
       logMessage('procedure init_data');
       SAVEPOINT do_insert; 
       insert into t_company(companyId, companyName) values(gen_key('t_company'), 'IBM');
       COMMIT;
    exception
       WHEN OTHERS THEN  
            rollback to do_insert;  
            logMessage('roll back , due to '|| SQLERRM);
    end init_data;        
end test_erp; 
```

It will call this function

```
create or replace
function gen_key(tblName varchar2)
return number is
    l_key number := 1000;

    l_tmpStr varchar(2000); -- not good, how to fix it  ?
begin
    l_tmpStr := substr(tblName, 3, length(tblName));   
    EXECUTE IMMEDIATE ' SELECT CASE WHEN MAX('||l_tmpStr||'Id) IS NULL THEN 1000 ELSE MAX('||l_tmpStr||'Id)+1 END FROM '|| tblName into l_key; 

     logmessage('gen primary key '|| tblName ||' '||l_key);
    return l_key;
end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T17:46:59.860

在您的情况下使用函数**gen_key**非常慢，并且它是不正确的数据库编写并且效率也非常低。

所以我的建议是创建`SEQUENCE`通常用于此的。然后你应该创建为每个`TRIGGER`生成新的或直接添加它。`PK``INSERT``NEXTVAL`

所以，你的`SEQUENCE`罐头看起来像这样：

```
CREATE SEQUENCE YOUR_COMP_SEQ
  MINVALUE 1
  MAXVALUE 999999
  START WITH 1
  INCREMENT BY 1
  NOCACHE
; 
```

然后我建议你使用 mean `TRIGGER`：

```
CREATE OR REPLACE TRIGGER AUTOSET_ID_COMP
BEFORE INSERT ON t_company
FOR EACH ROW
BEGIN
   SELECT YOUR_COMP_SEQ.NEXTVAL INTO :NEW.companyId FROM DUAL;
END; 
```

最后只需调用查询：

```
INSERT INTO t_company(companyName) VALUES('SomeValue'); 
```

如果您不想创建 TRIGGER，那么您可以直接这样做：

```
INSERT INTO t_company(companyId, companyName)
VALUES(YOUR_COMP_SEQ.NEXTVAL, 'SomeValue'); 
```

**注意：**当然，您可以为每个`TABLE`自己创建`SEQUENCE`，然后`TRIGGERS`为每个`TABLE`.
**注 2：**序列非常好，但存在一些问题，例如您添加到表 20 行，`IDs`1,2,3，...等也是如此，例如您将删除 15\. 行，因为这`ID`15 行，您可以不再使用了。

**更新：**

与**@Ben**讨论后更新答案和解决方案，谢谢。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T17:34:33.980

你的`key_gen`程序是相当有问题的。通过执行 a 生成密钥`MAX(key)+1`很慢，并且在多用户环境中不起作用。`MAX(key)`假设您有两个用户，两个用户看到相同的内容并尝试插入具有相同主键的行 相对容易。

Oracle 提供序列以便在多用户环境中有效地生成主键。使用序列生成密钥会更好。按照惯例，您会为每个表创建一个序列，即

```
CREATE SEQUENCE company_seq; 
```

您的`INSERT`陈述将类似于

```
insert into t_company(companyId, companyName) values(company_seq.nextval, 'IBM'); 
```

或者您可以在表上创建一个触发器来自动填充主键。

此外，虽然捕获异常以便记录它们很好，但您确实希望重新引发该异常，以便调用者知道`INSERT`失败了。

# c++ - C++11: when move ctor/operator= is called?

> ID：11283887
> 
> 赞同：3
> 
> 时间：2012-07-01T16:50:35.533
> 
> 标签：c++, c++11

```
#include <iostream>

class Class
{
    public:
    Class() { std::cerr << "ctor" << std::endl; }
    ~Class() { std::cerr <<"dtor" << std::endl; }

    Class(Class&)  { std::cerr << "copy ctor" << std::endl; }
    Class & operator=(const Class &)
    {
            std::cerr << "copy operator=" << std::endl;
            return *this;
    }

    Class(Class&&) { std::cerr << "move ctor" << std::endl;}
    Class & operator=(Class &&)
    {       
            std::cerr << "move operator="<< std::endl;
            return *this;
    }
 };

int main(int, char**)
{
    Class object;
    Class && rvr = Class(); 
    object = rvr; // (*)
} 
```

Output is

```
ctor
ctor
copy operator=
dtor
dtor 
```

1) Why "copy ctor" is called at line (*)?

2) If i have to use std::move() every-time, what is the difference between "move semantics" and any method that will move data, like `object.destructive_move();`?

3) when exactly move ctor/operator is called?

thanks!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T17:07:35.760

在 (*) 行不调用复制 ctor，而是调用复制赋值运算符。我想这就是你的意思。

调用的是复制赋值运算符而不是移动赋值运算符，因为`rvr`它是左值。请注意，表达式的类型与它是否是左值是正交的。

如果您将赋值语句修改为`object = Class();`or `object = static_cast<Class&&>(rvr)`，您会发现调用了移动赋值运算符，因为在这两种情况下 RHS 是一个右值。

这种行为是明智的：比如说，考虑一个移动赋值运算符的实现。它的参数具有类型右值引用，但它仍然是一个左值。如果它是一个右值，那么第一次使用参数可能会修改其状态以成为一个“空”对象（移动语义），然后第二次使用该参数可能无法按预期工作。

它的实际工作方式是，`std::move`当您想以一种使其保持“空”状态的方式使用参数时，您将明确使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T20:00:14.007

```
Class && rvr = Class(); 
```

我要说的没有意义，但这是 C++11 规则。

`rvr`是一个变量，它是对 a 的右值引用`Class`。这很容易理解。但重要的是要理解这一点：命名变量永远不是右值表达式。***即使它是一个右值引用！***

再说一次，我知道这没有意义，但这是规则。右值引用变量*不是右值表达式*。

临时是一个右值表达式，所以`Class()`给你一个右值。从函数返回的临时值也是一个右值表达式，所以如果你有一些`Class`按值返回的函数，你会得到一个右值返回。

这很重要，因为如果您有两个基于左值和右值引用重载的函数（如复制/移动构造函数/赋值），则*只有*当表达式类型是右值时，C++11 才会选择右值引用版本。

这就是`std::move`存在的原因。它的存在是为了明确说明您何时想要移动某物。它通过将您给它的值转换为右值表达式来做到这一点。即，它返回`Class&&`.

这是真正令人困惑的部分。如果您有一个命名的右值引用变量，那不是右值表达式。但是如果你有一个*未命名的右值引用*，比如`Class&&`从一个函数返回，*那就是一个右值表达式*。

`std::move`返回`Class&&`。所以如果你想从一个命名变量中移动，你必须*总是*调用`std::move`它。所以如果你想从 移动`rvr`，你必须这样做：

```
object = std::move(rvr); // (*) 
```

这将返回一个`Class&&`to `rvr`。将发生 C++11 重载决议。由于参数 to`operator=`是一个右值表达式，它将选择 的右值引用版本`operator=`。从而调用了一个动作。

请注意，这`std::move`实际上只是半复杂演员表的包装。它不会移动；它是`operator=`移动的。

# node.js - Node.js 初学者 - 无法通过 nodetuts 教程 2 - 标准输出和子进程

> ID：11283892
> 
> 赞同：1
> 
> 时间：2012-07-01T16:51:32.503
> 
> 标签：node.js

我正在尝试阅读教程[nodetuts.com - 教程 2](http://nodetuts.com/tutorials/2-webtail-nodejs-child-processes-and-http-chunked-encoding.html#video)，不幸的是无法使示例正常工作，我对 node.js 非常陌生，并且正在阅读我能掌握的任何教程。我知道 node.js 仍然是测试版，我认为使这项工作的代码现在已经过时了。（这是代码）：

```
var http = require('http');
var spawn  = require('child_process').spawn;

http.createServer(function(request, response){

    response.writeHead(200, {
        'Content-Type' : 'text/plain'
    });

    var tail_child = spawn('tail', ['-f', 'test.txt']);

    tail_child.stdout.on('data', function(data){
        console.log(data.toString());
        response.write(data);
    });

}).listen(4000); 
```

无论如何，决心继续我一直在查看节点网站上的文档并发现：[http](http://nodejs.org/api/all.html#all_child_pid) ://nodejs.org/api/all.html#all_child_pid这不是我想要的（我想完成那个教程链接到顶部），但我想与子进程工作有关，并将该代码合并到此：

```
var http = require('http');

var server = http.createServer(function(res, req){
    res.writeHead(200);
    res.end('testing');

    var spawn = require('child_process').spawn,
        grep  = spawn('grep', ['ssh']);

    console.log('Spawned child pid: ' + grep.pid);
    grep.stdin.end();

}).listen(4000); 
```

不幸的是，当我刷新页面时，`http://localhost:4000/`我什么也没有得到，命令提示符吐出：（我知道它说 writeHead 是一个问题，但在其他示例中它工作正常 - （如 nodetuts - 教程 1））

```
 res.writeHead(200);
            ^
TypeError: Object #<IncomingMessage> has no method 'writeHead'
    at Server.<anonymous> (Z:\Joseph Goss Folder\Google Drive\Code\javascript_first\nodejs_first\stdoutTest.js:20:6)
    at Server.EventEmitter.emit (events.js:91:17)
    at HTTPParser.parser.onIncoming (http.js:1785:12)
    at HTTPParser.parserOnHeadersComplete [as onHeadersComplete] (http.js:111:23)
    at Socket.socket.ondata (http.js:1682:22)
    at TCP.onread (net.js:404:27) 
```

我想知道为什么我不能让这个工作，我显然错过了一些东西，但我不知道是什么，我什至无法通过第二个教程。:(

*   我正在运行 Windows 7
*   我也看过这段代码[为什么 response.write 似乎在 Node.js 中阻止了我的浏览器？](https://stackoverflow.com/questions/9012123/why-does-response-write-appear-to-block-my-browser-in-node-js?rq=1)而且他的代码也根本不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T17:06:17.213

您交换`req`并`res`在传递给的函数中`createServer`

```
var http = require('http');

var server = http.createServer(function(req, res){
    res.writeHead(200);
    res.end('testing');

    var spawn = require('child_process').spawn,
        grep  = spawn('grep', ['ssh']);

    console.log('Spawned child pid: ' + grep.pid);
    grep.stdin.end();

}).listen(4000); 
```

# playframework-2.0 - Play Framework 2\. Multiple file uploading and processing

> ID：11283893
> 
> 赞同：0
> 
> 时间：2012-07-01T16:51:32.927
> 
> 标签：playframework-2.0

I am trying to load multiple files at the same time with Play 2 and build some thumbnails for them with asynchronous api. Uploading is work quite ok and great troubles come when image processing starts. The problem is as follows(a bit of desciption): files, which were fetched from request and collected into list are disappearing while image processing(take a lot of time).

And some samples here:

```
//part of controller
public static Result addPictures2(Long galleryId) {

        MultipartFormData body              = request().body().asMultipartFormData();
        final List<FilePart> fileList       = body.getFiles(); 
        final Long fGalleryId               = galleryId;

        Promise<Boolean> promiseOfBool = Akka.future( 
                new Callable<Boolean>() {
                    public Boolean call() {

                        Gallery gallery = Gallery.find.byId(fGalleryId);

                        for(FilePart part : fileList) {
                            File    picFile     = part.getFile();
                            Logger.debug("picFile: " + picFile.exists());
                            String  extension   = FilenameUtils.getExtension(part.getFilename());
                            GalleryItem item    = new GalleryItem("", "", picFile, extension);
                            gallery.addItem(item);
                        }

                        gallery.update();
                        return true;
                    }
                }
        );

        return async(
            promiseOfBool.map(
                new Function<Boolean, Result>() {
                    public Result apply(Boolean b) {
                        return redirect(
                                controllers.backend.routes.GalleryContentController.showGalleryItemsPage(fGalleryId)
                            );
                    }
                }
            )
        );

    } 
```

So

> gallery.addItem(item);

takes a lot of time, and next call for

> Logger.debug("picFile: " + picFile.exists());

says that picFile do not exists. I know, this is because those files are temporary... but should they exists emm a little bit longer? And the question is: how to solve this trouble. Should I look at temporary files in java?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T17:08:05.737

看起来解决方案非常简单。我应该将文件保存在我自己的缓存中，直到我在 Akka worker 中使用它们。用 Akka 处理后，我可以自己删除它。这种行为的原因是不浪费文件描述符。从请求中获取的文件将在 Akka 启动之前被删除。无论如何，这只是一个猜测。我现在就试试。

PS是的。这儿存在一个问题。解决方案是将这些文件保留为临时文件，仅在处理后删除。

# lwuit - 将 lwuit 移植到代号一时的绘画问题

> ID：11283900
> 
> 赞同：0
> 
> 时间：2012-07-01T16:52:30.353
> 
> 标签：lwuit, lwuit-form, codenameone

我正在将我的 lwuit 应用程序移植到[代号一](http://www.codenameone.com)

但是，我的表格没有在 emulator 中正确绘制。为什么会这样？

例如，您可以在下面看到一条穿过字母的黑色直线。如何防止这种情况？

![在此处输入图像描述](../Images/76b4496a82206c0c6189e0a7af3813e0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T18:23:26.973

在皮肤中选择缩放 100% 以避免绘制伪影并且不调整皮肤大小。

# php - 如何只显示打印 print_r 的第一行？

> ID：11283904
> 
> 赞同：1
> 
> 时间：2012-07-01T16:52:50.060
> 
> 标签：php, string

你如何只回显 print print_r 的第一行？

更多信息：

我有这个 PHP 代码：

```
preg_match_all('/MbrDtlMain.php\?([^ ]+)>/i', $string, $matches);
foreach(end($matches) as $key=> $value){
    print print_r($value, 1).'<br>';
} 
```

这导致：

```
12567682
12764252
12493678
14739908 
```

（或其他数字，取决于用户输入）

我试过：

```
preg_match_all('/MbrDtlMain.php\?([^ ]+)>/i', $string, $matches);
foreach(end($matches) as $key=> $value){
    $id = print_r($value, 1).'<br>';
}
echo $id 
```

但它会从列表中产生 1 个随机数。换句话说，结果仅在使用 print like 时显示`' print print_r($value, 1).'<br>';'`。问题是我只想显示第一个有序的结果。仿佛：

```
$firstlineofnumbers = '12567682';
echo $firstlineofnumbers; 
```

希望这是有道理的。谢谢 （：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T16:59:55.093

如果我理解您要做什么，只需`break;`在输出第一个值后添加一条语句就足够了：

```
foreach(end($matches) as $key=> $value){
    print print_r($value, true).'<br>'; // print_r() expects true, not 1
    break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T16:58:55.333

如果 $matches 中的键总是数字键，那么这段代码就足够了：

```
echo $matches[0]; 
```

否则，请尝试以下代码：

```
$keys = array_keys($matches);
echo $matches[array_shift($keys)]; 
```

$keys 将包含 $matches 的所有键。
array_shift 将返回 $keys 的第一个值（第一个键）。
所以最后一行会显示对应的值。

如果只需要显示第一个元素，则无需遍历整个数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T16:59:30.873

```
preg_match_all('/MbrDtlMain.php\?([^ ]+)>/i', $string, $matches);
$i=0;
foreach(end($matches) as $key=> $value){
    $i++;
    if ($i == 1) {
      echo $value."<br />";
    }

} 
```

`$i`这从每个匹配增加 1的变量开始。如果`$i == 1`, 那么它将回显`$value`.

# android - Android setStreamVolume to ZERO doesn't work in Android 4

> ID：11283910
> 
> 赞同：0
> 
> 时间：2012-07-01T16:53:50.380
> 
> 标签：android, android-audiomanager

I noticed that under Android 4.x setting ring volume to 0 is not possible. If I execute this code and then I go to Settings--> Sound --> Volumes I can see it is set to 1\. I

```
audiomanager.setStreamVolume(AudioManager.STREAM_RING, 0, 0); 
```

Do you know why? I know I could use audiomanager.setRingerMode(RINGER_MODE_SILENT) but annoys me!! because in this case I would have to "remember" if vibration is on or off for activating again sound.

Of course, all this works in other Android versions.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-16T17:30:42.593

不要使用[setStreamMute()](http://developer.android.com/reference/android/media/AudioManager.html#setStreamMute%28int,%20boolean%29)，因为它对您的流程的生命周期有奇怪的副作用。请参阅文档：

> 静音命令可防止客户端进程死亡：如果在流上具有活动静音请求的进程死亡，则该流将自动取消静音。

恐怕带有[RINGER_SILENT](http://developer.android.com/reference/android/media/AudioManager.html#RINGER_MODE_SILENT)或[RINGER_VIBRATE的](http://developer.android.com/reference/android/media/AudioManager.html#RINGER_MODE_VIBRATE)[setRingerMode()](http://developer.android.com/reference/android/media/AudioManager.html#setRingerMode%28int%29)是要走 的路，这将产生将流音量归零的效果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T17:06:05.323

尝试[setStreamMute](http://developer.android.com/reference/android/media/AudioManager.html#setStreamMute%28int,%20boolean%29)代替，这相当于将音量设置为 0。

# objective-c - 如何在一个 UITableView 单元格/行中异步重新加载 UIImage？

> ID：11283917
> 
> 赞同：1
> 
> 时间：2012-07-01T16:54:35.767
> 
> 标签：objective-c, uitableview

在有一些单元格的 UITableView 中，每个单元格都有两个 UIImage，我将更新 UIImage 异步以提高性能。但是有一个问题，当从 Web 中提取图像时，我如何才能仅在单元格中重新加载 UIImageView。

我知道可以使用方法“reloadRowsAtIndexPaths”重新加载整个单元格，但我只想知道是否有一种方法只能重新加载单元格中必须重新加载的 UIView 对象（即图像或标签）。

顺便说一句，当我重新加载一个单元格时，我发现方法“reloadRowsAtIndexPaths”将为所有单元格执行“heightForRowAtIndexPath”方法。有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T17:02:32.250

也许来自苹果的示例代码[LazyTableImages](https://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009394)就是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T17:08:30.260

获取对您的自定义单元格调用的引用`tableView:cellForRowAtIndexPath:`。然后更新它的 image 属性运行这个：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
    NSData *imageData = [NSData dataWithContentsOfURL:someURL];
    dispatch_async(dispatch_get_main_queue(), ^{
        cell.someImage = [UIImage imageWithData:imageData];
    });
}); 
```

您将最多同时加载 6 张图像，因为这是 NSURLConnection 的限制。

# javascript - 如何找出用户在文本输入中按下“输入”？

> ID：11283918
> 
> 赞同：0
> 
> 时间：2012-07-01T16:54:38.070
> 
> 标签：javascript, jquery, javascript-events

当用户按下“输入”键时，我正在尝试将文本输入的元素添加到我的数组中。但我不知道该怎么做。我尝试了这个 if 语句，但它们不起作用：

```
var val = $("#txbxfeeds").val();
if (val[val.length-1] == "\r") {
    alert("HI");
}
if (val[val.length-1] == "\n") {
    alert("HI");
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T16:56:16.780

我可以提出以下建议：

```
var vals = [];

$("#txbxfeeds").on("keypress", function(e) {
    if (e.which == 13) {
        vals.push(this.value);
    }
}); 
```

**演示：http:** [//jsfiddle.net/Q4CUf/](http://jsfiddle.net/Q4CUf/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T16:56:38.887

```
$("#txbxfeeds").on('keyup', function(e) {
   //13 is the code for enter button

   var val = $(this).val(); // or this.value

   if(e.which == 13) {
    alert( val );
   }
}); 
```

**[工作样本](http://jsfiddle.net/Q4CUf/1/)**

阅读更多关于 jQuery **[event.which](http://api.jquery.com/event.which/)**

# windows - 我发现这段代码可以获得 Windows 写入权限，但它不起作用

> ID：11283919
> 
> 赞同：3
> 
> 时间：2012-07-01T16:54:40.277
> 
> 标签：windows, privileges

我试图在 D: 使用 c/c++ 驱动器上创建新文件

我发现这段代码可以获得 Windows 写入权限，但它不起作用

任何人都可以帮助我我是 C++ 新手吗？

```
BOOL SetPrivilege(
    HANDLE hToken,               // access token handle
    LPCTSTR lpszPrivilege,    // name of privilege to enable/disable
    BOOL bEnablePrivilege    // to enable (or disable privilege)
    )

{
    // Token privilege structure
    TOKEN_PRIVILEGES tp;
    // Used by local system to identify the privilege
    LUID luid;

    if(!LookupPrivilegeValue(
        NULL,                // lookup privilege on local system
        lpszPrivilege,    // privilege to lookup
        &luid))               // receives LUID of privilege
    {
        printf("LookupPrivilegeValue() error: %u\n", GetLastError());
        return FALSE;
    }
    else
        printf("LookupPrivilegeValue() is OK\n");

    tp.PrivilegeCount = 1;
    tp.Privileges[0].Luid = luid;

    // Don't forget to disable the privileges after you enabled them,
    // or have already completed your task. Don't mess up your system :o)
    if(bEnablePrivilege)
    {
        tp.Privileges[0].Attributes = SE_PRIVILEGE_ENABLED;
        printf("tp.Privileges[0].Attributes = SE_PRIVILEGE_ENABLED\n");
    }
    else
    {
        tp.Privileges[0].Attributes = 0;
        printf("tp.Privileges[0].Attributes = 0\n");
    }
    // Enable the privilege (or disable all privileges).
    if(!AdjustTokenPrivileges(
        hToken,
        FALSE, // If TRUE, function disables all privileges, if FALSE the function modifies privilege based on the tp
        &tp,
        sizeof(TOKEN_PRIVILEGES),
        (PTOKEN_PRIVILEGES) NULL,
        (PDWORD) NULL))
    {
        printf("AdjustTokenPrivileges() error: %u\n", GetLastError());
        return FALSE;
    }
    else
    {
        printf("AdjustTokenPrivileges() is OK, last error if any: %u\n", GetLastError());
        printf("Should be 0, means the operation completed successfully = ERROR_SUCCESS\n");
    }
    return TRUE;
} 
```

我的主要功能

```
int main()
    {
    LPCTSTR lpszPrivilege = L"SeSecurityPrivilege";
    // Change this BOOL value to set/unset the SE_PRIVILEGE_ENABLED attribute
    BOOL bEnablePrivilege = TRUE;
    HANDLE hToken;
    // Open a handle to the access token for the calling process. That is this running program
    if(!OpenProcessToken(GetCurrentProcess(), TOKEN_ADJUST_PRIVILEGES, &hToken))
    {
        printf("OpenProcessToken() error %u\n", GetLastError());
        return FALSE;
    }
    else
        printf("OpenProcessToken() is OK\n");

    // Call the user defined SetPrivilege() function to enable and set the needed privilege
    BOOL test = SetPrivilege(hToken, lpszPrivilege, bEnablePrivilege);
    printf("The SetPrivilege() return value: %d\n\n", test);

        ofstream myFile;
        myFile.open("C:\\test.txt");
        myFile << "I am C";
        myFile.close();

        bEnablePrivilege = FALSE;
        BOOL test1 = SetPrivilege(hToken, lpszPrivilege, bEnablePrivilege);
        printf("The SetPrivilage() return value: %d\n", test1);
        system("PAUSE");

        return 0;
    } 
```

控制台中的输出如下所示：

```
OpenProcessToken() is OK
LookupPrivilegeValue() is OK
tp.Privileges[0].Attributes = SE_PRIVILEGE_ENABLED
AdjustTokenPrivileges() is OK, last error if any: 1300
Should be 0, means the operation completed successfully = ERROR_SUCCESS
The SetPrivilege() return value: 1

LookupPrivilegeValue() is OK
tp.Privileges[0].Attributes = 0
AdjustTokenPrivileges() is OK, last error if any: 1300
Should be 0, means the operation completed successfully = ERROR_SUCCESS
The SetPrivilage() return value: 1
Press any key to continue . . . 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T21:34:35.030

1.  `SeSecurityPrivilege`是“管理审计和安全日志”用户权限（参见[权限常量列表](http://msdn.microsoft.com/en-us/library/bb530716%28v=vs.85%29)）。它与写入文件完全无关。事实上，在正常情况下，您不需要启用*任何*权限即可将文件写入驱动器的根目录，尽管该进程确实需要以管理员身份运行。

2.  [错误 1300](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681385%28v=vs.85%29.aspx)表示“并非所有引用的权限或组都分配给调用者”。也就是说，该权限未成功启用，因为该进程无权获得它。这将是因为该进程没有以管理员身份运行。

因此，首先，您可以删除示例中的几乎所有代码，除了实际写入文件的四行之外的所有代码。然后，您只需要以管理员身份运行该应用程序。

为此，请右键单击可执行文件并选择“以管理员身份运行”。如果您以这种方式运行应用程序，它将能够写入文件。（注意：在 Windows XP 中，您不需要这样做，但您需要以具有管理权限的用户身份登录。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T10:47:41.847

**AdjustTokenPrivileges**无法从令牌中添加或删除权限。它只能启用当前禁用的现有权限或禁用当前启用的现有权限。

ERROR 1300 表示您还没有**"SeSecurityPrivilege"**。因此您无法启用或禁用它。

有关更多信息，请查看： [更改令牌中的权限](http://msdn.microsoft.com/en-us/library/windows/desktop/ms717797%28v=vs.85%29.aspx)

# asp.net - 如果 Exception.Message 包含 ASP.Net AJAX 中的某些内容，则忽略并清除错误

> ID：11283921
> 
> 赞同：1
> 
> 时间：2012-07-01T16:55:17.517
> 
> 标签：asp.net, error-handling

我想在 web.config 文件中编写一些配置，当这些异常的 Exception.Message 包含“**这是一个无效的 webresource 请求**”时，这将使我的 ASP.Net 应用程序***忽略/清除***任何未捕获的异常。这可能只使用 web.config 吗？我知道我可以在 Application_Error 事件代码中做到这一点，但我一直在寻找一种无代码的方法。

 **此外，我正在使用 ELMAH 进行错误处理，并且该应用程序在 IIS 7 中运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T22:08:18.280

不存在这样的 web.config 元素来做到这一点。我建议不要使用网站应用程序，Web 应用程序项目类型会创建一个程序集，如果您所做的只是更改 global.asax.cs 中的代码而不是任何标记，那么您需要做的就是复制单个程序集。

在 global.asax.cs 中，您可以使用 Application_Error 处理程序来捕获未处理的异常，根据需要记录它们并清除错误。例子：

```
 protected void Application_Error(object sender, EventArgs e)
        {
            Exception ex = Server.GetLastError().GetBaseException();
            if(!ex.Message.Contains("File does not"))
            PAB.ExceptionHandler.ExceptionLogger.HandleException(ex,"connectionname");
            Server.ClearError();

        } 
```**

# django - 每当我尝试在模板中使用过滤器时出现 TemplateSyntaxError

> ID：11283923
> 
> 赞同：6
> 
> 时间：2012-07-01T16:55:48.123
> 
> 标签：django, django-templates

testlist 只是一个对象列表。例如

```
testlist.0.name 
```

只是“Test3”

我有一个文件 temp.html

```
{% extends 'base.html' %}
{% block content %}
{{testlist.0.name | safe}}
{% endblock %} 
```

这就是 temp.html 文件中的全部内容，并且 base.html 可以与使用它的所有其他 html 文件一起正常工作

temp.html 给了我

```
TemplateSyntaxError at /mytests/
Could not parse the remainder: ' | safe' from 'testlist.0.name | safe'
Request Method: GET
Request URL:    http://127.0.0.1:8000/mytests/
Django Version: 1.4
Exception Type: TemplateSyntaxError
Exception Value:    
Could not parse the remainder: ' | safe' from 'testlist.0.name | safe' 
```

当我将其更改为：

```
{% extends 'base.html' %}
{% block content %}
{{testlist.0.lastedited |date:"SHORT_DATE_FORMAT" }} 
{% endblock %} 
```

它给了我

```
TemplateSyntaxError at /mytests/
could not parse some characters: testlist.0.lastedited| ||date:"SHORT_DATE_FORMAT"
Request Method: GET
Request URL:    http://127.0.0.1:8000/mytests/
Django Version: 1.4
Exception Type: TemplateSyntaxError
Exception Value:    
Could not parse some characters: testlist.0.lastedited| ||date:"SHORT_DATE_FORMAT" 
```

你明白了。似乎我不能在我的 django 模板中使用任何过滤器。我尝试了其他过滤器，但仍然得到相同的结果。我是否缺少一些启用管道字符的选项？难道是“|” 我的 macbook pro 上的键不是管道字符，而是 django 无法识别的其他字符？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-01T16:59:17.250

看起来您需要删除您的`testlist.0.lastedited`和过滤器之间的空格。尝试类似：

```
{% extends 'base.html' %}
{% block content %}
{{testlist.0.name|safe}}
{% endblock %} 
```

我猜这是你的问题，因为在文档中，他们没有任何空格，并且他们将模板解析为字符串或接近它的东西，所以空格会影响它。

[模板示例](https://docs.djangoproject.com/en/1.4/topics/templates/#templates)

# python - 不同文件夹中的不同页面

> ID：11283927
> 
> 赞同：0
> 
> 时间：2012-07-01T16:56:05.350
> 
> 标签：python, google-app-engine

我在 Google App Engine 中阅读了一些教程，在这些教程中有相同的结构：每个页面指向每个类，并且所有此类在`main.py`. 我想在新文件上创建新页面。所以我这样做：

在项目文件夹中。我创建文件夹，在此我创建一个具有类名`hello`的简单脚本。例如这个文件是：`hello.py``Hello`

```
 class Hello(webapp2.RequestHandler):
        def get(self):
            self.response.out.write('hello world')

    app = webapp2.WSGIApplication([('/hello',Hello)], debug=True) 
```

但是当我运行这个应用程序时，当我指向：`localhost:port/hello`我会收到`404:Error Resource not found.`.

如果我在`app.yaml`. 我无法部署此应用程序：

```
- url: /hello
  script: hello.app 
```

所以，请教我如何在不同的文件夹中运行不同的文件。在我的例子中是这个文件中的`hello.py`和`Hello`类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T17:39:50.310

试试这个：

```
- url: /hello
  script: hello/hello.py 
```

该`script`字段应该是您的处理程序所在的 Python 文件的完整路径。

# html - 将悬停和单击事件居中并添加到 CSS3 按钮

> ID：11283928
> 
> 赞同：1
> 
> 时间：2012-07-01T16:56:05.527
> 
> 标签：html, css

我刚刚通过[http://css3button.net/36045](http://css3button.net/36045)开发了一个 CSS3 按钮，我想知道如何添加悬停和单击状态更改（*即*定义与配色方案一起使用的正确颜色）。我对颜色代码了解不多，希望能提供任何帮助。

另外，在 CSS 中居中按钮的最佳方式是什么？

[http://jsfiddle.net/methuselah/snmSq/](http://jsfiddle.net/methuselah/snmSq/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T17:01:30.397

```
#element:hover { color: #fff; }
#element:active { color: #000; } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T17:03:02.590

您是否尝试过将 :hover 添加到课堂？例如：

```
 button.signup:hover {background:red;} 
```

要居中，我会将按钮包装在 div 中，然后将其居中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T17:05:24.610

对于水平居中使用 margin-left:auto; 边距右：自动，垂直：边距顶部：自动；margin-bottom:auto 或简单地 float:center 对于所有这些，但要小心，因为浮动总是会产生问题

# linux - Linux - 使用 wine 运行 .exe 时避免 x 服务器消息

> ID：11283929
> 
> 赞同：6
> 
> 时间：2012-07-01T16:56:14.570
> 
> 标签：linux, ubuntu, exe, wine

我正在尝试在 Ubuntu 11.04 命令行中使用 wine 运行一个 .exe 文件（使用其他一些 .dll 文件），但是我收到一个关于 x 服务器未启动并且正在创建一个窗口的错误（我附上截图）。

当我正常运行它时（正常的ubuntu启动，x服务器运行）一切正常，但实际上没有显示窗口，这是正常的，因为程序运行不需要窗口。所以我只想知道是否有办法避免这种情况：以某种方式模拟 x 服务器是打开的，或者以某种方式设置 $DISPLAY 以“欺骗”程序。

![错误信息](../Images/e82947953ee3e240cdfad98af256e22b.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-01T16:59:25.257

只需使用 Xvfb。

```
Xvfb :1 &
DISPLAY=:1 wine ... 
```

# android - 我不能使用“内容：//短信”？

> ID：11283932
> 
> 赞同：0
> 
> 时间：2012-07-01T16:56:19.920
> 
> 标签：android

我不能使用“内容：//短信”？适用于所有 Android 设备？我正在使用“SmsManager”，但没有在电话亭输出中添加短信。我使用“content://sms/outbox”来保存信息。如何使用“SmsManager”？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T17:07:10.230

发送消息后，您必须将 SMS 写入 cr。

```
ContentValues values = new ContentValues();
values.put("address", phone);
values.put("body", message);
getContentResolver().insert(Uri.parse("content://sms/sent"), values); 
```

这需要短信写入权限，并且必须在发送短信后完成。

# json - 从 jar 中的 json 文件创建 JSON/GSON

> ID：11283933
> 
> 赞同：1
> 
> 时间：2012-07-01T16:56:23.947
> 
> 标签：json, jar, gson

我使用 Google 的`GSON`库来生成 GSON/JSON 对象。

但是，现在我有一个问题，我需要为 jar 中的文件创建一个 GSON 对象。我可以从我想要解析为 GSON 对象的 json 文件中获取或`InputStream`，但是无法从上述任何内容生成 GSON 对象。`BufferedReader``Properties``Gson().toJson()``Gson().fromJson`

那么，如何访问 jar 中的 json 文件并将其传递给 GSON 库以获取 GSON 文件？

现在我有这样的事情：

```
public class Main {
    public static void main(String[] args) throws IOException {
        JarFile jar;
        jar = new JarFile("path.jar");
        InputStream inputStream = jar.getInputStream(jar.getEntry("file.json"));
} 
```

# c++ - 是否可以从外部进程注入和执行应用程序？

> ID：11283936
> 
> 赞同：1
> 
> 时间：2012-07-01T16:56:57.940
> 
> 标签：c++, resources, execute, inject

我喜欢将 DLL 注入进程，因为我可以更改程序的某些值。

dll 的唯一缺点是它们对便携性不太友好，并且使它们具有便携性会消耗大量代码。

我只是想知道是否可以注入存储在资源中的应用程序（到进程），然后再执行它？

如果是这样，哪些代码部分可能与 dll 的注入不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T17:29:48.190

您的问题未标记为“Windows”，但从措辞来看，我仍然假设您指的是 Windows。

给定必要的访问权限，*可以*将可执行文件注入另一个进程，`fork`cygwin 中的实现是概念验证。Windows 不支持任何类似的东西`fork`，至少不公开在公共 API 中。Cygwin 通过创建一个新进程并将自己的进程注入另一个进程（包括所有数据）来实现它。而是从资源中读取并注入它几乎是同一件事。

差异（和困难）之一可能是图像库，它（通常）在 Win32 下总是相同的。对于 DLL，重新定位是很常见的事情，而对于可执行文件则不是。另一方面，如果您想在已经存在的进程代码*之外*注入代码，那么您想要的地址可能不是免费的。

# android - 同步方法与进度对话框

> ID：11283938
> 
> 赞同：-1
> 
> 时间：2012-07-01T16:57:23.150
> 
> 标签：android

我有 loadData() 用于加载我的 Neuroph 网络。

我想用进度对话框运行它，但如果执行 loadData() 的一部分，我会增加我的进度对话框。

我需要它的教程。

我知道带有处理程序的线程，AsyncTask。但不能用这两种方法做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T17:18:59.320

因此，我建议您使用`AsyncTask`为更新而指定的手段，`UI`并取得一些进展。该工具包含三个最重要的方法：

*   **doInBackground** - 它在后台线程中做你的工作。*   **onProgressUpdate** - 用于更新您的`UI`（在您的情况下，您可以增加 ProgressDialog 的进度）*   **onPostExecute** - 在您的工作完成后调用。

    然后，`AsyncTask`它是一个强大的工具，非常高效，并且使用泛型，因此是类型安全的。但是您需要阅读更多关于它的信息，因此首先查看[参考](http://developer.android.com/reference/android/os/AsyncTask.html)，然后我建议您查看 Vogella 上的[Android 线程、处理程序和 AsyncTask](http://www.vogella.com/articles/AndroidPerformance/article.html)，这是很好的来源。

    然后你想使用`ProgressDialog`. 因此，只需`show()`在执行之前创建它和它`AsyncTask`。然后在**onPostExecute**方法中，您只需调用**dismiss**方法来关闭**ProgressDialog**。

    ```
    ProgressDialog pd = new ProgressDialog(this);
    pd.setProgress(0);
    pd.setTitle("Some title");
    pd.setMessage("Some message...");
    pd.show();
    yourTask.execute(); // here you are executing your AsyncTask 
    ```

    然后在你的 OnPostExecute 方法中调用dismiss：

    ```
    @Override
    protected void onPostExecute(Void unused) {
       pd.dismiss(); // dismissing your ProgressDialog
    } 
    ```

# php - 如何将 PHP 时间转换为可读形式？

> ID：11283939
> 
> 赞同：-2
> 
> 时间：2012-07-01T16:57:24.683
> 
> 标签：php, sql, date

> **可能重复：**
> [使用 php 格式化 mysql 日期时间](https://stackoverflow.com/questions/136782/format-mysql-datetime-with-php)

嗯.. 我已经在 Mysql DB 中存储了 date(c) 和我在 varchar 中使用的数据类型。所以它以 2012-07-01T22:03:02+05:30 格式存储。好吧，它看起来有点难以阅读。

谁能帮我把它转换成 2012 年 7 月 1 日晚上 10:03 之类的东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T17:00:54.773

php.net/日期 php.net/strtotime

```
date( "F d, Y \a\t g:i a", strtotime( $databaseValue ) ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T17:14:20.780

您仍然可以使用 MySQL 日期函数 - mysql 会将它们隐式转换为日期。

假设您有一个表 bla，以及一个 varchar 字段“mydate”，那么只需使用以下 SQL：

```
select date_format(mydate, '%M %e, %Y at %l:%i %p') as my_formatted_date from bla 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T17:39:02.687

自 PHP 5.3 起：

```
$dateMySQL = '2012-07-01T22:03:02+05:30';
$inputFormat = 'Y-m-d\TH:i:sP';
$outputFormat = 'F j,Y \a\t h:i A';
$date = DateTime::createFromFormat($inputFormat, $dateMySQL);
echo $date->format($outputFormat); 
```

它将打印“2012 年 7 月 1 日晚上 10:03”。

# c++ - 如何从函数模板类成员中的变换算法参数指向一元运算符函数？

> ID：11283943
> 
> 赞同：2
> 
> 时间：2012-07-01T16:58:10.973
> 
> 标签：c++, function, templates, pointers, member

我的课看起来像这样：

```
class A
{
    public:
        class variables_map vm /*! A boost::program_options variable map containing all program_options in use. */;
        char sep_to_space(char c);
        template <typename T>
        void VectorFromOption(char * sOption, vector<T> & n);
};

char A::sep_to_space(char c){
  return c == ',' || c == '<' || c == '>' ? ' ' : c;
}

template <typename T>
void A::VectorFromOption(char * sOption, vector<T> & n)
    string s=A::vm[sOption].as<string>();
    transform(s.begin(), s.end(), s.begin(), &A::sep_to_space );
    stringstream ss(s);
    copy(istream_iterator<T>(ss), istream_iterator<T>(), std::back_inserter(n));
} 
```

这些在课堂外工作得很好，但我无法找到正确的方法在他们作为类成员的上下文中传递`sep_to_space()`' `transform`s 的第四个参数。如果我将它们注释掉，其他所有东西都会编译并正确运行。

以上`&A::sep_to_space`产生了神秘的错误：

`1>c:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\algorithm(671) : error C2064: term does not evaluate to a function taking 1 arguments`

恐怕目前在我头上。建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T17:21:51.333

为什么`sep_to_space`甚至是（非静态）成员`A`？它不访问任何成员，显然也不需要。使其成为自由函数或静态成员，一切都很好。

但是，要回答一般问题，您需要将成员*绑定*到正在调用它的对象。

一种选择是使用`bind`C++11 或 Boost 中的函数：

```
#include <functional> // or <boost/bind.hpp>

using std::placeholders::_1; // placeholder for the first argument
std::transform(s.begin(), s.end(), s.begin(), std::bind(&A::sep_to_space, this, _1)); 
```

或者，如果您已经有 C++11 可用，只需使用 lambda：

```
std::transform(s.begin(), s.end(), s.begin(),
    [this](char c){
      return sep_to_space(c);
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T17:09:11.620

尝试：

```
using std::placeholders::_1;
transform(s.begin(), s.end(), s.begin(), std::bind( &A::sep_to_space, this, _1)); 
```

（或 boost::bind）

# objective-c - 如何防止只有一行被订购-obj c

> ID：11283953
> 
> 赞同：0
> 
> 时间：2012-07-01T16:59:19.300
> 
> 标签：objective-c, uitableview, setediting

我有一个表格视图。而且我有多行。在编辑模式下进行重新排序时，我希望一行始终保留在第一个索引中。因此，如果用户想要将一行与第一行交换，它不应该允许它。但是在第二排和第三排之间应该是可以的。

我怎样才能做到这一点？非常感谢您提前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T17:06:19.333

将第一个表格视图单元格设置为`showsReorderControl`并`NO`返回第一行。`NO``tableView:canMoveRowAtIndexPath:`

你也可以实现 UITableViewDelegate 方法[`tableView:targetIndexPathForMoveFromRowAtIndexPath:toProposedIndexPath:`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView%3atargetIndexPathForMoveFromRowAtIndexPath%3atoProposedIndexPath%3a)

如果建议的索引路径是 (0, 0)，您可以在此处返回备用索引路径。

> **返回值**
> 
> 为移动操作定位所需行目标的索引路径对象。如果该位置合适，则返回建议的目的地索引路径。
> 
> **讨论**
> 
> 此方法允许在特定行在表视图中上下移动时自定义目标行。当拖动的行悬停在另一行上时，目标行向下滑动以在视觉上为重定位腾出空间；这是由proposedDestinationIndexPath 标识的位置。

# c# - 单击按钮时在表单之间传递变量

> ID：11283959
> 
> 赞同：2
> 
> 时间：2012-07-01T16:59:49.837
> 
> 标签：c#, .net, winforms, parameter-passing

我有两个表格。一个与所有主要代码正在执行的地方。使用此方法单击菜单项时会显示另一种形式：

```
Form2 videoSettings = new Form2();       

private void videoToolStripMenuItem_Click(object sender, EventArgs e)
{
    videoSettings.Show();
} 
```

然后打开的表单包含用户可以为应用程序设置一些设置的字段。 ![在此处输入图像描述](../Images/4f236bfaa3321ea4cec101f4903babeb.png) 然后，当单击“保存”按钮时，我想要这个变量：`public int deviceIndex;` 从原始表单中获取。

所以我想知道我是否可以在 Form1 中添加任何事件或东西来检测在 videoSettings (Form2) 中单击保存按钮的时间？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T17:07:25.947

我会以不同的方式来做。我会将 UI 处理和业务逻辑层之间的代码分开。所以你的场景将以这样的方式运行：

1.  第一种形式发出一个事件，通知具有特定语义的按钮已被激活。处理所需的数据包含在事件数据中。
2.  业务逻辑侦听此事件，并决定在第二个表单上发出命令。它在表单的类上调用适当的方法，将所需的信息作为参数传递（如果需要，可能会预处理参数）。
3.  第二种形式接收来自业务逻辑的命令并更新视图。

这样问题就完全不会出现了。

* * *

示例：（我不是 Winforms 专家，请注意，从最佳 Winforms 实践的 POV 来看，这可能是完全错误的。）

第 1 部分（第一种形式）：

```
class ProcessingActivatedEventArgs : EventArgs
{
    public ProcessingActivatedEventArgs(int data) { MoreData = data; }
    public int MoreData { get; protected set; }
}

class Form1 : Form
{
    private int currentData;
    public event EventHandler<ProcessingActivatedEventArgs> ProcessingActivated;
    void OnButtonClick(object sender, EventArgs args)
    {
        // ...
        if (ProcessingActivated != null)
            ProcessingActivated(new ProcessingActivatedEventArgs(currentData));
    }
} 
```

第 2 部分：（业务逻辑）

```
class Controller
{
    Form1 f1;
    Form2 f2;

    void StartFirstForm()
    {
        f1 = new Form1();
        f1.ProcessingActivated += OnProcessingActivated;
        f1.Show();
    }

    void OnProcessingActivated(object sender, ProcessingActivatedEventArgs args)
    {
        int data = args.MoreData;
        f1.DisableProcessingRequests();
        model.ProcessingFinished += OnProcessingFinished;
        model.StartProcessing(data);
        if (data > 0)
            f2.DisplayDataProcessing(0, data);
        else if (data < 0)
            f2.DisplayDataProcessing(data, 0);
        else
            throw new SomeCoolException("impossible data");
    }
} 
```

第 3 部分：（第二种形式）

```
class Form2 : Form
{
    public void DisplayDataProcessing(int lower, int upper)
    {
        // ... update the UI
    }
} 
```

请注意，此实现将`Controller`和 形式联系在一起比它可以做的更紧密。在 WPF 中，解耦是通过使用适当的来实现的`DataContext`（但我不知道如何在 WinForms 中正确地做到这一点）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T17:21:50.677

有很多建议，但我想加两分钱。

您可以使用 form2.ShowDialog(); 这将停止执行您的 form1 线程，直到 form2 关闭。这意味着您可以从 form1 执行此操作：

```
Form2 videoSettings = new Form2();  

//show options
videoSettings.ShowDialog();

//at this point, the user has either clicked save, cancel, or closed the form 
//(because the form is closed, obviously :) )
int device = videoSettings.deviceIndex; 
```

如果你不能让它像那样锁定你的表单，这是在 Form2 中使用事件的另一种方法：

```
Form2 : Form
{
    public event EventHandler Saved;

    OnSaveButtonClicked(...)
    {
        if(Saved != null) Saved(this, new EventArgs());
    }
} 
```

然后从 Form1：

```
Form2 frm = new Form2();
frm.Saved += (s, e) =>
{
    //saved button clicked, retrieve value.
    //also could be handled as a method, or really any way.
};
frm.Show(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T17:41:24.083

让我建议另一种方式，介于最简单的 ShowDialog() 和精细的业务逻辑和接口分离方式之间。

我希望在 Form2 中创建一个新事件。我称这个事件`SettingsSaved`

在 Form2 中添加为全局声明

```
public delegate void SettingsSavedEventHandler(object sender, SettingsSavedEventArgs e);
public event SettingsSavedEventHandler SettingsSaved; 
```

并在 cmdSave_Click 事件中

```
if(SettingsSaved != null)
{
    SettingsSavedEventArgs ss = new SettingsSavedEventArgs() { DeviceIndex = deviceIndex};
    SettingsSaved(this, ss); 
} 
```

SettingsSavedEventArgs 类的骨架

```
public class SettingsSavedEventArgs: EventArgs
{
    public int DeviceIndex {get; set;}  
    // Other settings could be added here
} 
```

现在在调用 Form2 的代码中，我们可以订阅事件并在用户单击 Form2 保存按钮时收到通知

```
Form2 videoSettings = new Form2();
videoSettings.SettingsSaved += new SettingsSavedEventHandler(SavedHandler);
videoSettings.Show();     
....

private void SavedHandler(object sender, SettingsSavedEventArgs ss)
{
    int deviceIndex = ss.DeviceIndex;
} 
```

[观察者模式](http://ondotnet.com/pub/a/dotnet/2002/04/15/events.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T17:10:23.123

也许您可以尝试让您的第二种形式来实现[INotifyPropertyChanged](http://msdn.microsoft.com/fr-fr/library/system.componentmodel.inotifypropertychanged%28v=VS.80%29.aspx)接口。然后，当您单击保存时，您会引发**PropertyChanged**事件，并在第一个表单中捕获它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-01T17:16:02.443

你可以传递这样的信息

```
private Form1 mainForm = null;
public Form2(Form callingForm)
{
    mainForm = callingForm as Form1; 
    InitializeComponent();
} 
```

然后，您可以像这样从 Form2 访问 Form1 属性：

```
//Call this in Save button click event 
this.mainForm.deviceIndex; 
```

# python - 部分字符串格式化

> ID：11283961
> 
> 赞同：155
> 
> 时间：2012-07-01T17:00:01.463
> 
> 标签：python, string-formatting

是否可以使用类似于字符串模板`safe_substitute()`功能的高级字符串格式化方法进行部分字符串格式化？

例如：

```
s = '{foo} {bar}'
s.format(foo='FOO') #Problem: raises KeyError 'bar' 
```

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2013-08-20T19:39:51.260

如果您知道格式化内容的顺序：

```
s = '{foo} {{bar}}' 
```

像这样使用它：

```
ss = s.format(foo='FOO') 
print ss 
>>> 'FOO {bar}'

print ss.format(bar='BAR')
>>> 'FOO BAR' 
```

您不能同时指定`foo`和`bar`- 您必须按顺序执行。

* * *

## 回答 #2

> 赞同：141
> 
> 时间：2016-12-13T00:15:41.070

您可以使用简短、最易读并且还描述了编码器意图的`partial`函数：`functools`

```
from functools import partial

s = partial("{foo} {bar}".format, foo="FOO")
print s(bar="BAR")
# FOO BAR 
```

* * *

## 回答 #3

> 赞同：67
> 
> 时间：2012-07-01T17:07:17.783

您可以通过覆盖映射将其欺骗为部分格式：

```
import string

class FormatDict(dict):
    def __missing__(self, key):
        return "{" + key + "}"

s = '{foo} {bar}'
formatter = string.Formatter()
mapping = FormatDict(foo='FOO')
print(formatter.vformat(s, (), mapping)) 
```

印刷

```
FOO {bar} 
```

当然，这个基本实现只适用于基本情况。

* * *

## 回答 #4

> 赞同：58
> 
> 时间：2014-04-26T01:25:42.393

这种限制`.format()`——无法进行部分替换——一直困扰着我。

在评估了`Formatter`此处许多答案中描述的自定义类，甚至考虑使用第三方包（如[lazy_format](https://pypi.python.org/pypi/lazy_format) ）后，我发现了一个更简单的内置解决方案：[模板字符串](https://docs.python.org/2/library/string.html#template-strings)

它提供了类似的功能，但也提供了部分替换彻底`safe_substitute()`的方法。模板字符串需要有一个`$`前缀（感觉有点奇怪——但我认为整体解决方案更好）。

```
import string
template = string.Template('${x} ${y}')
try:
  template.substitute({'x':1}) # raises KeyError
except KeyError:
  pass

# but the following raises no error
partial_str = template.safe_substitute({'x':1}) # no error

# partial_str now contains a string with partial substitution
partial_template = string.Template(partial_str)
substituted_str = partial_template.safe_substitute({'y':2}) # no error
print substituted_str # prints '12' 
```

基于此形成了一个方便的包装器：

```
class StringTemplate(object):
    def __init__(self, template):
        self.template = string.Template(template)
        self.partial_substituted_str = None

    def __repr__(self):
        return self.template.safe_substitute()

    def format(self, *args, **kws):
        self.partial_substituted_str = self.template.safe_substitute(*args, **kws)
        self.template = string.Template(self.partial_substituted_str)
        return self.__repr__()

>>> s = StringTemplate('${x}${y}')
>>> s
'${x}${y}'
>>> s.format(x=1)
'1${y}'
>>> s.format({'y':2})
'12'
>>> print s
12 
```

同样，基于 Sven 的回答的包装器使用默认字符串格式：

```
class StringTemplate(object):
    class FormatDict(dict):
        def __missing__(self, key):
            return "{" + key + "}"

    def __init__(self, template):
        self.substituted_str = template
        self.formatter = string.Formatter()

    def __repr__(self):
        return self.substituted_str

    def format(self, *args, **kwargs):
        mapping = StringTemplate.FormatDict(*args, **kwargs)
        self.substituted_str = self.formatter.vformat(self.substituted_str, (), mapping) 
```

* * *

## 回答 #5

> 赞同：29
> 
> 时间：2015-04-07T11:07:26.897

不确定这是否可以作为一种快速解决方法，但是怎么样

```
s = '{foo} {bar}'
s.format(foo='FOO', bar='{bar}') 
```

? :)

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2012-07-01T17:06:33.093

如果您定义自己的`Formatter`覆盖该方法的`get_value`方法，则可以使用它将未定义的字段名称映射到您想要的任何内容：

[http://docs.python.org/library/string.html#string.Formatter.get_value](http://docs.python.org/library/string.html#string.Formatter.get_value)

例如，您可以映射`bar`到`"{bar}"`if `bar`is not in the kwargs。

但是，这需要使用`format()`Formatter 对象的方法，而不是字符串的`format()`方法。

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2015-08-17T09:19:39.303

```
>>> 'fd:{uid}:{{topic_id}}'.format(uid=123)
'fd:123:{topic_id}' 
```

试试这个。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2013-03-31T09:57:51.230

感谢[Amber](https://stackoverflow.com/users/148870/amber)的评论，我想出了这个：

```
import string

try:
    # Python 3
    from _string import formatter_field_name_split
except ImportError:
    formatter_field_name_split = str._formatter_field_name_split

class PartialFormatter(string.Formatter):
    def get_field(self, field_name, args, kwargs):
        try:
            val = super(PartialFormatter, self).get_field(field_name, args, kwargs)
        except (IndexError, KeyError, AttributeError):
            first, _ = formatter_field_name_split(field_name)
            val = '{' + field_name + '}', first
        return val 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2020-04-08T09:12:24.967

我发现的所有解决方案似乎都存在更高级规格或转换选项的问题。@SvenMarnach 的[FormatPlaceholder](https://ideone.com/DZJO1I)非常聪明，但它不能与强制（例如`{a!s:>2s}`）一起正常工作，因为它调用`__str__`方法（在这个例子中）而不是`__format__`你失去任何额外的格式。

这是我最终得到的结果以及其中的一些关键功能：

```
sformat('The {} is {}', 'answer')
'The answer is {}'

sformat('The answer to {question!r} is {answer:0.2f}', answer=42)
'The answer to {question!r} is 42.00'

sformat('The {} to {} is {:0.{p}f}', 'answer', 'everything', p=4)
'The answer to everything is {:0.4f}' 
```

*   提供与`str.format`（不仅仅是映射）类似的接口
*   支持更复杂的格式化选项：
    *   强迫`{k!s}` `{!r}`
    *   嵌套`{k:>{size}}`
    *   获取属性`{k.foo}`
    *   获取项目`{k[0]}`
    *   强制+格式化`{k!s:>{size}}`

```
import string

class SparseFormatter(string.Formatter):
    """
    A modified string formatter that handles a sparse set of format
    args/kwargs.
    """

    # re-implemented this method for python2/3 compatibility
    def vformat(self, format_string, args, kwargs):
        used_args = set()
        result, _ = self._vformat(format_string, args, kwargs, used_args, 2)
        self.check_unused_args(used_args, args, kwargs)
        return result

    def _vformat(self, format_string, args, kwargs, used_args, recursion_depth,
                 auto_arg_index=0):
        if recursion_depth < 0:
            raise ValueError('Max string recursion exceeded')
        result = []
        for literal_text, field_name, format_spec, conversion in \
                self.parse(format_string):

            orig_field_name = field_name

            # output the literal text
            if literal_text:
                result.append(literal_text)

            # if there's a field, output it
            if field_name is not None:
                # this is some markup, find the object and do
                #  the formatting

                # handle arg indexing when empty field_names are given.
                if field_name == '':
                    if auto_arg_index is False:
                        raise ValueError('cannot switch from manual field '
                                         'specification to automatic field '
                                         'numbering')
                    field_name = str(auto_arg_index)
                    auto_arg_index += 1
                elif field_name.isdigit():
                    if auto_arg_index:
                        raise ValueError('cannot switch from manual field '
                                         'specification to automatic field '
                                         'numbering')
                    # disable auto arg incrementing, if it gets
                    # used later on, then an exception will be raised
                    auto_arg_index = False

                # given the field_name, find the object it references
                #  and the argument it came from
                try:
                    obj, arg_used = self.get_field(field_name, args, kwargs)
                except (IndexError, KeyError):
                    # catch issues with both arg indexing and kwarg key errors
                    obj = orig_field_name
                    if conversion:
                        obj += '!{}'.format(conversion)
                    if format_spec:
                        format_spec, auto_arg_index = self._vformat(
                            format_spec, args, kwargs, used_args,
                            recursion_depth, auto_arg_index=auto_arg_index)
                        obj += ':{}'.format(format_spec)
                    result.append('{' + obj + '}')
                else:
                    used_args.add(arg_used)

                    # do any conversion on the resulting object
                    obj = self.convert_field(obj, conversion)

                    # expand the format spec, if needed
                    format_spec, auto_arg_index = self._vformat(
                        format_spec, args, kwargs,
                        used_args, recursion_depth-1,
                        auto_arg_index=auto_arg_index)

                    # format the object and append to the result
                    result.append(self.format_field(obj, format_spec))

        return ''.join(result), auto_arg_index

def sformat(s, *args, **kwargs):
    # type: (str, *Any, **Any) -> str
    """
    Sparse format a string.

    Parameters
    ----------
    s : str
    args : *Any
    kwargs : **Any

    Examples
    --------
    >>> sformat('The {} is {}', 'answer')
    'The answer is {}'

    >>> sformat('The answer to {question!r} is {answer:0.2f}', answer=42)
    'The answer to {question!r} is 42.00'

    >>> sformat('The {} to {} is {:0.{p}f}', 'answer', 'everything', p=4)
    'The answer to everything is {:0.4f}'

    Returns
    -------
    str
    """
    return SparseFormatter().format(s, *args, **kwargs) 
```

在编写了一些关于我希望这种方法如何表现的测试之后，我发现了各种实现的问题。如果有人发现它们很有见地，它们就在下面。

```
import pytest

def test_auto_indexing():
    # test basic arg auto-indexing
    assert sformat('{}{}', 4, 2) == '42'
    assert sformat('{}{} {}', 4, 2) == '42 {}'

def test_manual_indexing():
    # test basic arg indexing
    assert sformat('{0}{1} is not {1} or {0}', 4, 2) == '42 is not 2 or 4'
    assert sformat('{0}{1} is {3} {1} or {0}', 4, 2) == '42 is {3} 2 or 4'

def test_mixing_manualauto_fails():
    # test mixing manual and auto args raises
    with pytest.raises(ValueError):
        assert sformat('{!r} is {0}{1}', 4, 2)

def test_kwargs():
    # test basic kwarg
    assert sformat('{base}{n}', base=4, n=2) == '42'
    assert sformat('{base}{n}', base=4, n=2, extra='foo') == '42'
    assert sformat('{base}{n} {key}', base=4, n=2) == '42 {key}'

def test_args_and_kwargs():
    # test mixing args/kwargs with leftovers
    assert sformat('{}{k} {v}', 4, k=2) == '42 {v}'

    # test mixing with leftovers
    r = sformat('{}{} is the {k} to {!r}', 4, 2, k='answer')
    assert r == '42 is the answer to {!r}'

def test_coercion():
    # test coercion is preserved for skipped elements
    assert sformat('{!r} {k!r}', '42') == "'42' {k!r}"

def test_nesting():
    # test nesting works with or with out parent keys
    assert sformat('{k:>{size}}', k=42, size=3) == ' 42'
    assert sformat('{k:>{size}}', size=3) == '{k:>3}'

@pytest.mark.parametrize(
    ('s', 'expected'),
    [
        ('{a} {b}', '1 2.0'),
        ('{z} {y}', '{z} {y}'),
        ('{a} {a:2d} {a:04d} {y:2d} {z:04d}', '1  1 0001 {y:2d} {z:04d}'),
        ('{a!s} {z!s} {d!r}', '1 {z!s} {\'k\': \'v\'}'),
        ('{a!s:>2s} {z!s:>2s}', ' 1 {z!s:>2s}'),
        ('{a!s:>{a}s} {z!s:>{z}s}', '1 {z!s:>{z}s}'),
        ('{a.imag} {z.y}', '0 {z.y}'),
        ('{e[0]:03d} {z[0]:03d}', '042 {z[0]:03d}'),
    ],
    ids=[
        'normal',
        'none',
        'formatting',
        'coercion',
        'formatting+coercion',
        'nesting',
        'getattr',
        'getitem',
    ]
)
def test_sformat(s, expected):
    # test a bunch of random stuff
    data = dict(
        a=1,
        b=2.0,
        c='3',
        d={'k': 'v'},
        e=[42],
    )
    assert expected == sformat(s, **data) 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2016-03-03T15:06:22.647

对我来说这已经足够好了：

```
>>> ss = 'dfassf {} dfasfae efaef {} fds'
>>> nn = ss.format('f1', '{}')
>>> nn
'dfassf f1 dfasfae efaef {} fds'
>>> n2 = nn.format('whoa')
>>> n2
'dfassf f1 dfasfae efaef whoa fds' 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-04-24T09:48:59.330

一个非常丑陋但对我来说最简单的解决方案就是：

```
tmpl = '{foo}, {bar}'
tmpl.replace('{bar}', 'BAR')
Out[3]: '{foo}, BAR' 
```

这样，您仍然可以将`tmpl`其用作常规模板并仅在需要时执行部分格式化。我发现这个问题太简单了，无法使用像 Mohan Raj 这样的过度杀伤性解决方案。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-06-07T08:39:36.340

我的建议如下（使用 Python3.6 测试）：

```
class Lazymap(object):
       def __init__(self, **kwargs):
           self.dict = kwargs

       def __getitem__(self, key):
           return self.dict.get(key, "".join(["{", key, "}"]))

s = '{foo} {bar}'

s.format_map(Lazymap(bar="FOO"))
# >>> '{foo} FOO'

s.format_map(Lazymap(bar="BAR"))
# >>> '{foo} BAR'

s.format_map(Lazymap(bar="BAR", foo="FOO", baz="BAZ"))
# >>> 'FOO BAR' 
```

**更新：**这里显示了 一种更优雅的方式（子类化`dict`和重载`__missing__(self, key)`）：[https ://stackoverflow.com/a/17215533/333403](https://stackoverflow.com/a/17215533/333403)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-11-25T16:24:50.127

如果您想解压缩字典以将参数传递给`format`，[就像在这个相关问题](https://stackoverflow.com/q/59035110/5858851)中一样，您可以使用以下方法。

首先假设字符串`s`与此问题中的相同：

```
s = '{foo} {bar}' 
```

并且值由以下字典给出：

```
replacements = {'foo': 'FOO'} 
```

显然这行不通：

```
s.format(**replacements)
#---------------------------------------------------------------------------
#KeyError                                  Traceback (most recent call last)
#<ipython-input-29-ef5e51de79bf> in <module>()
#----> 1 s.format(**replacements)
#
#KeyError: 'bar' 
```

但是，您可以首先[从其中获取`set`所有命名参数`s`](https://stackoverflow.com/a/24181068/5858851)并创建一个字典，将参数映射到用花括号括起来的自身：

```
from string import Formatter
args = {x[1]:'{'+x[1]+'}' for x in Formatter().parse(s)}
print(args)
#{'foo': '{foo}', 'bar': '{bar}'} 
```

现在使用`args`字典来填充`replacements`. 对于 python 3.5+，您可以[在单个表达式中执行此操作](https://stackoverflow.com/a/26853961/5858851)：

```
new_s = s.format(**{**args, **replacements}}
print(new_s)
#'FOO {bar}' 
```

对于旧版本的 python，您可以调用`update`：

```
args.update(replacements)
print(s.format(**args))
#'FOO {bar}' 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-09-16T16:13:05.567

这是一个基于正则表达式的轻度hacky 解决方案。请注意，这*不适*用于嵌套格式说明符，例如`{foo:{width}}`，但它确实解决了其他答案存在的一些问题。

```
def partial_format(s, **kwargs):
    parts = re.split(r'(\{[^}]*\})', s)
    for k, v in kwargs.items():
        for idx, part in enumerate(parts):
            if re.match(rf'\{{{k}[!:}}]', part):  # Placeholder keys must always be followed by '!', ':', or the closing '}'
                parts[idx] = parts[idx].format_map({k: v})
    return ''.join(parts)

# >>> partial_format('{foo} {bar:1.3f}', foo='FOO')
# 'FOO {bar:1.3f}'
# >>> partial_format('{foo} {bar:1.3f}', bar=1)
# '{foo} 1.000' 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-08-28T22:16:41.583

还有另一种方法可以实现这一点，即使用`format`和`%`替换变量。例如：

```
>>> s = '{foo} %(bar)s'
>>> s = s.format(foo='my_foo')
>>> s
'my_foo %(bar)s'
>>> s % {'bar': 'my_bar'}
'my_foo my_bar' 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-05-22T18:16:43.330

假设您在完全填写之前不会使用字符串，您可以执行类似此类的操作：

```
class IncrementalFormatting:
    def __init__(self, string):
        self._args = []
        self._kwargs = {}
        self._string = string

    def add(self, *args, **kwargs):
        self._args.extend(args)
        self._kwargs.update(kwargs)

    def get(self):
        return self._string.format(*self._args, **self._kwargs) 
```

例子：

```
template = '#{a}:{}/{}?{c}'
message = IncrementalFormatting(template)
message.add('abc')
message.add('xyz', a=24)
message.add(c='lmno')
assert message.get() == '#24:abc/xyz?lmno' 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-07-26T18:32:39.280

[在从这里](https://stackoverflow.com/q/11283961/5218354)和[那里](https://stackoverflow.com/q/17215400/5218354)测试了最有希望的解决方案之后，我意识到它们都没有真正满足以下要求：

1.  严格遵守模板认可的语法`str.format_map()`；
2.  能够保留复杂的格式，即完全支持[Format Mini-Language](https://docs.python.org/2/library/string.html#formatspec)

因此，我编写了自己的解决方案，满足上述要求。（*编辑*：现在@SvenMarnach 的版本——正如这个答案中所报告的——似乎可以处理我需要的极端情况）。

基本上，我最终解析了模板字符串，找到匹配的嵌套`{.*?}`组（使用`find_all()`辅助函数）并逐步构建格式化字符串，并**直接**使用`str.format_map()`同时捕获任何潜在`KeyError`的 .

```
def find_all(
        text,
        pattern,
        overlap=False):
    """
    Find all occurrencies of the pattern in the text.

    Args:
        text (str|bytes|bytearray): The input text.
        pattern (str|bytes|bytearray): The pattern to find.
        overlap (bool): Detect overlapping patterns.

    Yields:
        position (int): The position of the next finding.
    """
    len_text = len(text)
    offset = 1 if overlap else (len(pattern) or 1)
    i = 0
    while i < len_text:
        i = text.find(pattern, i)
        if i >= 0:
            yield i
            i += offset
        else:
            break 
```

```
def matching_delimiters(
        text,
        l_delim,
        r_delim,
        including=True):
    """
    Find matching delimiters in a sequence.

    The delimiters are matched according to nesting level.

    Args:
        text (str|bytes|bytearray): The input text.
        l_delim (str|bytes|bytearray): The left delimiter.
        r_delim (str|bytes|bytearray): The right delimiter.
        including (bool): Include delimeters.

    yields:
        result (tuple[int]): The matching delimiters.
    """
    l_offset = len(l_delim) if including else 0
    r_offset = len(r_delim) if including else 0
    stack = []

    l_tokens = set(find_all(text, l_delim))
    r_tokens = set(find_all(text, r_delim))
    positions = l_tokens.union(r_tokens)
    for pos in sorted(positions):
        if pos in l_tokens:
            stack.append(pos + 1)
        elif pos in r_tokens:
            if len(stack) > 0:
                prev = stack.pop()
                yield (prev - l_offset, pos + r_offset, len(stack))
            else:
                raise ValueError(
                    'Found `{}` unmatched right token(s) `{}` (position: {}).'
                        .format(len(r_tokens) - len(l_tokens), r_delim, pos))
    if len(stack) > 0:
        raise ValueError(
            'Found `{}` unmatched left token(s) `{}` (position: {}).'
                .format(
                len(l_tokens) - len(r_tokens), l_delim, stack.pop() - 1)) 
```

```
def safe_format_map(
        text,
        source):
    """
    Perform safe string formatting from a mapping source.

    If a value is missing from source, this is simply ignored, and no
    `KeyError` is raised.

    Args:
        text (str): Text to format.
        source (Mapping|None): The mapping to use as source.
            If None, uses caller's `vars()`.

    Returns:
        result (str): The formatted text.
    """
    stack = []
    for i, j, depth in matching_delimiters(text, '{', '}'):
        if depth == 0:
            try:
                replacing = text[i:j].format_map(source)
            except KeyError:
                pass
            else:
                stack.append((i, j, replacing))
    result = ''
    i, j = len(text), 0
    while len(stack) > 0:
        last_i = i
        i, j, replacing = stack.pop()
        result = replacing + text[j:last_i] + result
    if i > 0:
        result = text[0:i] + result
    return result 
```

（此代码也可在[FlyingCircus](https://pypi.org/project/flyingcircus/)中找到——免责声明：我是它的主要作者。）

* * *

此代码的用法是：

```
print(safe_format_map('{a} {b} {c}', dict(a=-A-)))
# -A- {b} {c} 
```

* * *

让我们将此与我最喜欢的解决方案（@SvenMarnach[在这里](https://ideone.com/DZJO1I)和[那里](https://ideone.com/xykV7R)分享他的代码）进行比较：

```
import string

class FormatPlaceholder:
    def __init__(self, key):
        self.key = key
    def __format__(self, spec):
        result = self.key
        if spec:
            result += ":" + spec
        return "{" + result + "}"
    def __getitem__(self, index):
        self.key = "{}[{}]".format(self.key, index)
        return self
    def __getattr__(self, attr):
        self.key = "{}.{}".format(self.key, attr)
        return self

class FormatDict(dict):
    def __missing__(self, key):
        return FormatPlaceholder(key)

def safe_format_alt(text, source):
    formatter = string.Formatter()
    return formatter.vformat(text, (), FormatDict(source)) 
```

这里有几个测试：

```
test_texts = (
    '{b} {f}',  # simple nothing useful in source
    '{a} {b}',  # simple
    '{a} {b} {c:5d}',  # formatting
    '{a} {b} {c!s}',  # coercion
    '{a} {b} {c!s:>{a}s}',  # formatting and coercion
    '{a} {b} {c:0{a}d}',  # nesting
    '{a} {b} {d[x]}',  # dicts (existing in source)
    '{a} {b} {e.index}',  # class (existing in source)
    '{a} {b} {f[g]}',  # dict (not existing in source)
    '{a} {b} {f.values}',  # class (not existing in source)

)
source = dict(a=4, c=101, d=dict(x='FOO'), e=[]) 
```

以及使其运行的代码：

```
funcs = safe_format_map, safe_format_alt

n = 18
for text in test_texts:
    full_source = {**dict(b='---', f=dict(g='Oh yes!')), **source}
    print('{:>{n}s} :   OK   : '.format('str.format_map', n=n) + text.format_map(full_source))
    for func in funcs:
        try:
            print(f'{func.__name__:>{n}s} :   OK   : ' + func(text, source))
        except:
            print(f'{func.__name__:>{n}s} : FAILED : {text}') 
```

导致：

```
 str.format_map :   OK   : --- {'g': 'Oh yes!'}
   safe_format_map :   OK   : {b} {f}
   safe_format_alt :   OK   : {b} {f}
    str.format_map :   OK   : 4 ---
   safe_format_map :   OK   : 4 {b}
   safe_format_alt :   OK   : 4 {b}
    str.format_map :   OK   : 4 ---   101
   safe_format_map :   OK   : 4 {b}   101
   safe_format_alt :   OK   : 4 {b}   101
    str.format_map :   OK   : 4 --- 101
   safe_format_map :   OK   : 4 {b} 101
   safe_format_alt :   OK   : 4 {b} 101
    str.format_map :   OK   : 4 ---  101
   safe_format_map :   OK   : 4 {b}  101
   safe_format_alt :   OK   : 4 {b}  101
    str.format_map :   OK   : 4 --- 0101
   safe_format_map :   OK   : 4 {b} 0101
   safe_format_alt :   OK   : 4 {b} 0101
    str.format_map :   OK   : 4 --- FOO
   safe_format_map :   OK   : 4 {b} FOO
   safe_format_alt :   OK   : 4 {b} FOO
    str.format_map :   OK   : 4 --- <built-in method index of list object at 0x7f7a485666c8>
   safe_format_map :   OK   : 4 {b} <built-in method index of list object at 0x7f7a485666c8>
   safe_format_alt :   OK   : 4 {b} <built-in method index of list object at 0x7f7a485666c8>
    str.format_map :   OK   : 4 --- Oh yes!
   safe_format_map :   OK   : 4 {b} {f[g]}
   safe_format_alt :   OK   : 4 {b} {f[g]}
    str.format_map :   OK   : 4 --- <built-in method values of dict object at 0x7f7a485da090>
   safe_format_map :   OK   : 4 {b} {f.values}
   safe_format_alt :   OK   : 4 {b} {f.values} 
```

如您所见，更新版本现在似乎可以很好地处理早期版本失败的极端情况。

* * *

从时间上看，它们在大约。彼此的 50%，取决于实际`text`的格式（可能是实际的`source`），但`safe_format_map()`在我执行的大多数测试中似乎都有优势（当然，不管它们是什么意思）：

```
for text in test_texts:
    print(f'  {text}')
    %timeit safe_format(text * 1000, source)
    %timeit safe_format_alt(text * 1000, source) 
```

```
 {b} {f}
3.93 ms ± 153 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
6.35 ms ± 51.9 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
  {a} {b}
4.37 ms ± 57.1 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
5.2 ms ± 159 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
  {a} {b} {c:5d}
7.15 ms ± 91.9 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
7.76 ms ± 69.5 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
  {a} {b} {c!s}
7.04 ms ± 138 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
7.56 ms ± 161 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
  {a} {b} {c!s:>{a}s}
8.91 ms ± 113 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
10.5 ms ± 181 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
  {a} {b} {c:0{a}d}
8.84 ms ± 147 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
10.2 ms ± 202 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
  {a} {b} {d[x]}
7.01 ms ± 197 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
7.35 ms ± 106 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
  {a} {b} {e.index}
11 ms ± 68.8 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
8.78 ms ± 405 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
  {a} {b} {f[g]}
6.55 ms ± 88.6 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
9.12 ms ± 159 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
  {a} {b} {f.values}
6.61 ms ± 55.9 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
9.92 ms ± 98.8 µs per loop (mean ± std. dev. of 7 runs, 100 loops each) 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-02-04T13:40:58.700

我喜欢@sven-marnach 的回答。我的回答只是它的扩展版本。它允许非关键字格式并忽略额外的键。以下是使用示例（函数名称是对 python 3.6 f-string 格式的引用）：

```
# partial string substitution by keyword
>>> f('{foo} {bar}', foo="FOO")
'FOO {bar}'

# partial string substitution by argument
>>> f('{} {bar}', 1)
'1 {bar}'

>>> f('{foo} {}', 1)
'{foo} 1'

# partial string substitution with arguments and keyword mixed
>>> f('{foo} {} {bar} {}', '|', bar='BAR')
'{foo} | BAR {}'

# partial string substitution with extra keyword
>>> f('{foo} {bar}', foo="FOO", bro="BRO")
'FOO {bar}'

# you can simply 'pour out' your dictionary to format function
>>> kwargs = {'foo': 'FOO', 'bro': 'BRO'}
>>> f('{foo} {bar}', **kwargs)
'FOO {bar}' 
```

* * *

这是我的代码：

```
from string import Formatter

class FormatTuple(tuple):
    def __getitem__(self, key):
        if key + 1 > len(self):
            return "{}"
        return tuple.__getitem__(self, key)

class FormatDict(dict):
    def __missing__(self, key):
        return "{" + key + "}"

def f(string, *args, **kwargs):
    """
    String safe substitute format method.
    If you pass extra keys they will be ignored.
    If you pass incomplete substitute map, missing keys will be left unchanged.
    :param string:
    :param kwargs:
    :return:

    >>> f('{foo} {bar}', foo="FOO")
    'FOO {bar}'
    >>> f('{} {bar}', 1)
    '1 {bar}'
    >>> f('{foo} {}', 1)
    '{foo} 1'
    >>> f('{foo} {} {bar} {}', '|', bar='BAR')
    '{foo} | BAR {}'
    >>> f('{foo} {bar}', foo="FOO", bro="BRO")
    'FOO {bar}'
    """
    formatter = Formatter()
    args_mapping = FormatTuple(args)
    mapping = FormatDict(kwargs)
    return formatter.vformat(string, args_mapping, mapping) 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-03-12T15:30:58.657

如果您正在做大量的模板化并发现 Python 的内置字符串模板功能不足或笨拙，请查看[Jinja2](https://jinja.palletsprojects.com/en/2.11.x/)。

从文档：

> Jinja 是一种现代且对设计人员友好的 Python 模板语言，以 Django 的模板为模型。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-07-03T16:33:49.187

阅读@Sam Bourne 的评论，我修改了@SvenMarnach 的[代码](https://ideone.com/DZJO1I)`{a!s:>2s}`以在不编写自定义解析器的情况下 使用强制（如）正常工作。基本思想不是转换为字符串，而是将缺少的键与强制标签连接起来。

```
import string
class MissingKey(object):
    def __init__(self, key):
        self.key = key

    def __str__(self):  # Supports {key!s}
        return MissingKeyStr("".join([self.key, "!s"]))

    def __repr__(self):  # Supports {key!r}
        return MissingKeyStr("".join([self.key, "!r"]))

    def __format__(self, spec): # Supports {key:spec}
        if spec:
            return "".join(["{", self.key, ":", spec, "}"])
        return "".join(["{", self.key, "}"])

    def __getitem__(self, i): # Supports {key[i]}
        return MissingKey("".join([self.key, "[", str(i), "]"]))

    def __getattr__(self, name): # Supports {key.name}
        return MissingKey("".join([self.key, ".", name]))

class MissingKeyStr(MissingKey, str):
    def __init__(self, key):
        if isinstance(key, MissingKey):
            self.key = "".join([key.key, "!s"])
        else:
            self.key = key

class SafeFormatter(string.Formatter):
    def __init__(self, default=lambda k: MissingKey(k)):
        self.default=default

    def get_value(self, key, args, kwds):
        if isinstance(key, str):
            return kwds.get(key, self.default(key))
        else:
            return super().get_value(key, args, kwds) 
```

像这样使用（例如）

```
SafeFormatter().format("{a:<5} {b:<10}", a=10) 
```

以下测试（受@norok2 的测试启发）在两种情况下检查传统`format_map`和`safe_format_map`基于上述类的输出：提供正确的关键字或不提供正确的关键字。

```
def safe_format_map(text, source):
    return SafeFormatter().format(text, **source)

test_texts = (
    '{a} ',             # simple nothing useful in source
    '{a:5d}',       # formatting
    '{a!s}',        # coercion
    '{a!s:>{a}s}',  # formatting and coercion
    '{a:0{a}d}',    # nesting
    '{d[x]}',       # indexing
    '{d.values}',   # member
)

source = dict(a=10,d=dict(x='FOO'))
funcs = [safe_format_map,
         str.format_map
         #safe_format_alt  # Version based on parsing (See @norok2)
         ]
n = 18
for text in test_texts:
    # full_source = {**dict(b='---', f=dict(g='Oh yes!')), **source}
    # print('{:>{n}s} :   OK   : '.format('str.format_map', n=n) + text.format_map(full_source))
    print("Testing:", text)
    for func in funcs:
        try:
            print(f'{func.__name__:>{n}s} : OK\t\t\t: ' + func(text, dict()))
        except:
            print(f'{func.__name__:>{n}s} : FAILED')

        try:
            print(f'{func.__name__:>{n}s} : OK\t\t\t: ' + func(text, source))
        except:
            print(f'{func.__name__:>{n}s} : FAILED') 
```

哪个输出

```
Testing: {a} 
   safe_format_map : OK         : {a} 
   safe_format_map : OK         : 10 
        format_map : FAILED
        format_map : OK         : 10 
Testing: {a:5d}
   safe_format_map : OK         : {a:5d}
   safe_format_map : OK         :    10
        format_map : FAILED
        format_map : OK         :    10
Testing: {a!s}
   safe_format_map : OK         : {a!s}
   safe_format_map : OK         : 10
        format_map : FAILED
        format_map : OK         : 10
Testing: {a!s:>{a}s}
   safe_format_map : OK         : {a!s:>{a}s}
   safe_format_map : OK         :         10
        format_map : FAILED
        format_map : OK         :         10
Testing: {a:0{a}d}
   safe_format_map : OK         : {a:0{a}d}
   safe_format_map : OK         : 0000000010
        format_map : FAILED
        format_map : OK         : 0000000010
Testing: {d[x]}
   safe_format_map : OK         : {d[x]}
   safe_format_map : OK         : FOO
        format_map : FAILED
        format_map : OK         : FOO
Testing: {d.values}
   safe_format_map : OK         : {d.values}
   safe_format_map : OK         : <built-in method values of dict object at 0x7fe61e230af8>
        format_map : FAILED
        format_map : OK         : <built-in method values of dict object at 0x7fe61e230af8> 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-02-01T10:43:52.093

**TL; DR**：问题：如果未设置则`defaultdict`失败：`{foobar[a]}``foobar`

```
from collections import defaultdict

text = "{bar}, {foo}, {foobar[a]}" # {bar} is set, {foo} is "", {foobar[a]} fails
text.format_map(defaultdict(str, bar="A")) # TypeError: string indices must be integers 
```

`DefaultWrapper`解决方案：从**Edit**复制类，然后：

```
text = "{bar}, {foo}, {foobar[a]}"
text.format_map(DefaultWrapper(bar="A")) # "A, , " (missing replaced with empty str)

# Even this works:
foobar = {"c": "C"}
text = "{foobar[a]}, {foobar[c]}"
text.format_map(DefaultWrapper(foobar=foobar)) # ", C" missing indices are also replaced 
```

* * *

请注意，索引和属性访问在已发布的解决方案之一中不起作用。以下代码引发了一个**`TypeError: string indices must be integers`**.

```
from collections import defaultdict

text = "{foo} '{bar[index]}'"
text.format_map(defaultdict(str, foo="FOO")) # raises a TypeError 
```

为了解决这个问题，可以将该[`collections.defaultdict`](https://docs.python.org/3/library/collections.html#collections.defaultdict)解决方案与支持索引的自定义默认值对象一起使用。对象在索引和属性访问时返回自身，`DefaultWrapper`允许无限次索引/使用属性而不会出错。

请注意，这可以扩展为允许包含部分请求值的容器。看看下面的编辑。

```
class DefaultWrapper:
    def __repr__(self):
        return "Empty default value"

    def __str__(self):
        return ""

    def __format__(self, format_spec):
        return ""

    def __getattr__(self, name):
        return self

    def __getitem__(self, name):
        return self

    def __contains__(self, name):
        return True

text = "'{foo}', '{bar[index][i]}'"
print(text.format_map(defaultdict(DefaultWrapper, foo="FOO")))
# 'FOO', '' 
```

* * *

## 编辑：部分装满的容器

上述类可以扩展为支持部分填充的容器。所以例如

```
text = "'{foo[a]}', '{foo[b]}'"
foo = {"a": "A"}

print(text.format_map(defaultdict(DefaultWrapper, foo=foo)))
# KeyError: 'b' 
```

这个想法是`defaultdict`用`DefaultWrapper`. `DefaultWrapper`对象环绕返回的`container`容器请求值（用`DefaultWrapper`对象包裹）或容器作为字符串。这样可以模拟无限深度的地图，但会返回所有当前值。

`kwargs`仅为了方便而添加。这样它看起来更像是`defaultdict`解决方案。

```
class DefaultWrapper:
    """A wrapper around the `container` to allow accessing with a default value."""
    ignore_str_format_errors = True

    def __init__(self, container="", **kwargs):
        self.container = container
        self.kwargs = kwargs

    def __repr__(self):
        return "DefaultWrapper around '{}'".format(repr(self.container))

    def __str__(self):
        return str(self.container)

    def __format__(self, format_spec):
        try:
            return self.container.__format__(format_spec)
        except TypeError as e:
            if DefaultWrapper.ignore_str_format_errors or self.container == "":
                return str(self)
            else:
                raise e

    def __getattr__(self, name):
        try:
            return DefaultWrapper(getattr(self.container, name))
        except AttributeError:
            return DefaultWrapper()

    def __getitem__(self, name):
        try:
            return DefaultWrapper(self.container[name])
        except (TypeError, LookupError):
            try:
                return DefaultWrapper(self.kwargs[name])
            except (TypeError, LookupError):
                return DefaultWrapper()

    def __contains__(self, name):
        return True 
```

现在所有显示的示例都可以正常工作：

```
text = "'{foo[a]}', '{foo[b]}'"
foo = {"a": "A"}
print(text.format_map(DefaultWrapper(foo=foo)))
# 'A', ''

text = "'{foo}', '{bar[index][i]}', '{foobar[a]}', '{foobar[b]}'"
print(text.format_map(DefaultWrapper(foo="Foo", foobar={"a": "A"})))
# 'FOO', '', 'A', ''

# the old way still works the same as before
from collections import defaultdict
text = "'{foo}', '{bar[index][i]}'"
print(text.format_map(defaultdict(DefaultWrapper, foo="FOO")))
# 'FOO', '' 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-12-13T10:43:52.577

这就是我们设法做到这一点的方法：

```
import traceback

def grab_key_from_exc(exc):
    last_line_idx = exc[:-1].rfind('\n')
    last_line = exc[last_line_idx:]

    quote_start = last_line.find("'")
    quote_end = last_line.rfind("'")

    key_name = last_line[quote_start+1:quote_end]
    return key_name

def partial_format(input_string, **kwargs):
    while True:
        try:
            return input_string.format(**kwargs)
        except:
            exc = traceback.format_exc()
            key = grab_key_from_exc(exc)
            kwargs[key] = '{'+key+'}' 
```

* * *

## 回答 #23

> 赞同：-3
> 
> 时间：2012-07-01T17:07:48.553

您可以将其包装在一个采用默认参数的函数中：

```
def print_foo_bar(foo='', bar=''):
    s = '{foo} {bar}'
    return s.format(foo=foo, bar=bar)

print_foo_bar(bar='BAR') # ' BAR' 
```

# ruby-on-rails-3 - 带绑定的rails activerecord插入

> ID：11283962
> 
> 赞同：2
> 
> 时间：2012-07-01T17:00:10.413
> 
> 标签：ruby-on-rails-3, insert, mysql2, bind-variables

我在 rails 3.2.6 中使用带有 activerecords 的 mysql2 适配器

我想在进行原始插入时使用绑定变量。我不能使用常规模型，因为我正在插入到选择中。

就像是：

```
insert into t(col1, col2)
select ?, c
from t1
where t1.x = ? 
```

我是 Rails 的新手，很惊讶做到这一点有多难。我知道这不是使用模型类等的常规 rails 约定。出于性能和安全原因，我想使用绑定变量。理想情况下，我不想使用[如何使用 Rails 中的动态绑定执行原始更新 sql中指定的 raw_connection](https://stackoverflow.com/questions/4483049/how-to-execute-a-raw-update-sql-with-dynamic-binding-in-rails)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:56:55.920

尝试这个：

```
query = <<-SQL
insert into t(col1, col2)
select ?, c
from t1
where t1.x = ?
SQL

col1 = Model.columns.find{|x| x.name == 'col1'}
col2 = Model.columns.find{|x| x.name == 'col2'}

ActiveRecord::Base.connection.insert(query, nil, nil, nil, nil, [[col1, col1_value], [col2, col2_value]]) 
```

我如何进行绑定的来源： [https ://github.com/rails/rails/blob/master/activerecord/test/cases/bind_parameter_test.rb](https://github.com/rails/rails/blob/master/activerecord/test/cases/bind_parameter_test.rb)

我如何进行插入的来源：http: [//api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/DatabaseStatements.html#method-i-insert](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/DatabaseStatements.html#method-i-insert)

# drupal-6 - 如何将 Drupal 网站从服务器复制到本地主机

> ID：11283965
> 
> 赞同：1
> 
> 时间：2012-07-01T17:00:15.413
> 
> 标签：drupal-6

我必须更新、添加和修复一个 drupal 网站。该网站位于实时工作服务器上，我可以完全访问所有内容。

Drupal 版本为：`Drupal 6.22`, 2011-05-25

我想在我的机器上制作一个副本（**win7+iis+（需要任何 php））**，以便能够在不接触服务器的情况下更改和测试我的更新。

我已经复制了项目文件夹并找到了数据库文件。

数据库是**odb**文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:18:36.643

下载整个数据库。您可以使用[drush](http://drupal.org/project/drush)或[Backup_migrate](http://drupal.org/project/backup_migrate)。然后[设置](http://drupal.org/node/350271)一个新的drupal系统并在那里注入整个数据库。

幸运的是，我从未使用过 Windows，因此很遗憾，我无法为您提供操作系统的具体细节。但是有 xampp 或类似的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T05:01:18.543

从 c 面板或服务器文件夹和 SQL 命令提示符获取项目文件文件夹和数据库的备份

然后在本地系统中安装 wamp 或 xampp 将项目文件夹放在 c:/wamp/www 文件夹中，并在**phpMyAdmin**中创建一个数据库并使用 db 备份文件导入数据库。

然后像在浏览器中那样运行你的项目，`localhost/YouProjectFolder`配置 default.ini 站点文件夹，然后你就全部设置好了

# javascript - $(this).html 在 jquery 中不起作用

> ID：11283967
> 
> 赞同：1
> 
> 时间：2012-07-01T17:00:20.790
> 
> 标签：javascript, jquery

```
<globemedia id="1"></globemedia>

<script type="text/javascript">
        $("globemedia").each(function(index, value) {
            var globeIDxMedia = $(this).attr("id");
            $.get("getmedia.jsp?mediaID="+globeIDxMedia,function(a){
                $(this).html(a);
            });
        });
</script> 
```

我用来将内容加载到我的自定义标签的上述脚本说`<getmedia id="1"></getmedia>`

脚本工作正常，直到从页面 getmedia.jsp 获取数据，但是当我使用`$(this).html(a);`它时不加载数据。

**从 jquery 论坛得到答案** 它也适用于自定义标签

```
<script type="text/javascript">
        $(document).ready(function(){
            $("div[data-globalmedia]").each(function(index, value) {
                var globeIDxMedia = $(this).attr("id");
                $(this).load("getmedia.jsp?mediaID="+globeIDxMedia);
            });
        });
</script> 
```

jQuery 专家给了我你必须使用的解决方案`$(document).ready(function(){});`，它就像一个魅力

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-01T17:01:33.523

`$(this)`保留对函数外部的引用`$.get()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T17:02:45.317

```
<script type="text/javascript">
    $("globemedia").each(function(index, value) {
        var globeIDxMedia = $(this).attr("id");
        var self = $(this);
        $.get("getmedia.jsp?mediaID="+globeIDxMedia,function(a){
            $(self).html(a);
        });
    });
</script> 
```

在的回调中的含义与在外部回调中的含义`this`不同。您可以在此处阅读有关语义的更多信息：[http ://www.sitepoint.com/javascript-this-gotchas/](http://www.sitepoint.com/javascript-this-gotchas/)`$.get``$().each``this`

通常，如果您想`this`在回调函数中引用“外部”值，您首先必须将其绑定到回调中可访问的变量（在这种情况下，我使用了通用约定变量名为`self`)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-01T17:02:08.477

您不能`this` ***（指的是 globemedia ）***在`$.get()`回调函数范围内。`$.get()`回调函数内`this`指的是别的东西，但不是`globemedia`。

因此，请参考以下`this`内容：`$.get()``globalmedia`

```
 $("globemedia").each(function(index, value) {
            var globeIDxMedia = $(this).attr("id");

            // keep referece to this
            // ie. globemedia

            var media = $(this);
            $.get("getmedia.jsp?mediaID="+globeIDxMedia,function(a){

                // here self refers to
                // globemedia element

                media.html(a);

            });

        }); 
```

### 笔记

我认为`$("globemedia")`应该是`$(".globemedia")`。这意味着您应该使用`class`选择器。

## 您不能制作自己的自定义 HTML 标记。看**[这里](https://stackoverflow.com/questions/2802687/is-there-a-way-to-create-your-own-html-tag-in-html5)**

由于您无法创建自己的 HTML 标记（此处为`globalmedia`），因此您可以对它们使用`data`属性。例如：

```
<div data-globalmedia="media1" id="id_1">Media 1</div>
<div data-globalmedia="media2" id="id_2">Media 2</div> 
```

等等。对于 jQuery，您可以使用：

```
$('[data-globalmedia]').each(function() {
    var globeIDxMedia = $(this).attr("id");

    // keep referece to this
    // ie. globemedia
    var self = $(this);
    $.get("getmedia.jsp?mediaID=" + globeIDxMedia, function(a) {

        // here self refers to
        // globemedia element
        self.html(a);

    });
}); 
```

**[工作样本](http://jsfiddle.net/QStkd/562/)**

# java - 尝试提取 HTML 属性时，我的正则表达式失败

> ID：11283971
> 
> 赞同：0
> 
> 时间：2012-07-01T17:00:47.307
> 
> 标签：java, regex

我正在尝试从名为“this”的 HTML 页面中获取值，例如：

```
name="this" value="XXXX-XXX-xxxxx-xxxxx" 
```

我试着用

```
Pattern pat = Pattern.compile("name=\"this\" value=\"(.*?)\"");
Matcher match = pat.matcher(sb);
        if(match.matches())
            return match.group(); 
```

但什么也没回来。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T17:36:18.060

就像乔普说的那样；使用“查找”：

```
Pattern pat = Pattern.compile("name=\"this\" value=\"(.*?)\"");
Matcher match = pat.matcher(sb);
if(match.find())
    return match.group(1); 
```

另请注意，您需要检索“group(1)”，因为只有 group() 返回整个模式匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:44:10.373

我认为你应该考虑更多的条件，比如

```
name = "this" id = "something" value = 'xxx' 
```

那么你的模式将不符合“name”和“=”之间的空格以及属性“name”和属性“value”之间的字符串等要求，所以我认为模式应该像下面的形式：

```
private final String matchString = "name\\s*=\\s*(?:\"this\")|(?:'this')" +
                                    ".*?" +
                                    "value\\s*=\\s*" +
                                    "(?:\"([^\"]*)\") |(?: '([^']*)')";
private final Pattern pattern = Pattern.compile(matchString,Pattern.DOTALL|Pattern.COMMENTS); 
Matcher matcher = pattern.matcher(content);

    while(matcher.find())
    {
        System.out.println(matcher.group(1));
    } 
```

同时，需要楼上的小费！

# haskell - Haskell 中的引用透明度和 mmap

> ID：11283975
> 
> 赞同：10
> 
> 时间：2012-07-01T17:01:06.863
> 
> 标签：haskell, file-io, io, mmap, virtual-memory

我希望同时使用[System.INotify](http://hackage.haskell.org/packages/archive/hinotify/0.3.2/doc/html/System-INotify.html)和[System.IO.MMap](http://hackage.haskell.org/packages/archive/mmap/0.2/doc/html/System-IO-MMap.html)来监视文件修改，然后快速执行差异以通过网络发送补丁。但是，在[System.IO.MMap](http://hackage.haskell.org/packages/archive/mmap/0.2/doc/html/System-IO-MMap.html)的文档中，有几个关于引用透明度的警告：

该文件指出

> 只有当您知道自己是唯一用户时，才可以安全地映射文件。否则，参考透明度可能会或可能不会受到损害。遗憾的是，操作系统之间的语义差异很大。

MMap 返回的值`IO ByteString`肯定是，当我使用这个值时，`putStr`我每次都期待不同的结果？我假设作者的意思是在 IO 操作期间该值可能会发生变化，例如`putStr`崩溃？

*开始编辑：想一想，我想这部分问题的答案有些明显......如果在拆箱后的任何时间值发生变化，那将是有问题的。*

```
do 
  v <- mappedValue :: IO ByteString
  putStr v
  putStr v  -- Expects the same value of v everywhere 
```

*编辑结束*

难道不能在映射区域或文件上获得某种锁吗？

或者，是否可以编写一个函数`copy :: IO ByteString -> IO ByteString`以安全的方式获取文件当前状态的快照？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-01T18:52:33.183

我认为作者的意思是，即使在可以将其视为普通`ByteString`（无 IO）的提升函数内部，该值也可以更改。

The meory mapped file is a region of memory. It doesn't make much sense to copy its content back and forth, for performance reasons (otherwise one could just do plain old stream-based I/O). So the ByteString you are getting is live.

If you want to have a snapshot, just use a stream-based I/O. That's what reading a file does: creates a file snapshot in the memory! I guess an alternative would be using the `ForeignPtr` interface which does not carry the referential transparency warning. I'm not familiar with ForeignPtrs so I cannot guarantee it will work, but it looks promising and I would investigate it.

You can also try calling `map id` on your ByteString but it is not guaranteed you will get a copy distinct from the original.

Mandatory file locking, especially on Linux, is a mess that is better avoided. Advisory file locking is OK, except nobody is using it, so it effectively does not exist.

# python - 提高无头 Selenium 的性能

> ID：11283976
> 
> 赞同：4
> 
> 时间：2012-07-01T17:01:15.683
> 
> 标签：python, ubuntu, selenium

我正在使用 Xvfb 在无头 Ubuntu 服务器上运行 Selenium，如此[处](http://www.alittlemadness.com/2008/03/05/running-selenium-headless/)[所述](http://seleniumhq.org/)。

我正在启动 Xvfb：

```
#!/bin/bash
disp=${1:-"99"}
/usr/bin/Xvfb :$disp -ac 2>&1 | tee /var/log/run-xvfb.log 
```

我正在启动 Selenium-Server：

```
#!/bin/bash
disp=${1:-"0"}
export DISPLAY=":$disp" && java -jar selenium-server-standalone-2.21.0.jar 2>&1 | tee /var/log/run-selenium-server.log 
```

我的启动代码如下所示：

```
from selenium import selenium
sel = selenium('localhost', 4444, '*firefox', 'http://www.google.com')
sel.start() # This takes forever!!!
<do stuff> 
```

我发现它通常有效，但`sel.start()`可能需要 15 分钟或更长时间才能完成。奇怪的是，日志文件从未被写入，所以我不知道是否发生了任何错误。它似乎只是“挂起”。

当我在本地机器上运行相同的代码时，这也是 Ubuntu，但具有正常的桌面 GUI 设置，不到一分钟，所以我知道服务器上出现了可怕的错误。如何诊断问题所在并改善 Selenium 糟糕的性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-18T14:18:12.707

Your question does not contain enough details to give you a good answer but I can give you some tips that might help. Without logs this is an incredible hard problem to debug.

By default Selenium tries to emulate a real user as close as possible. This means that it will wait until pages are fully loaded before doing anything on them. A slow third-party script can cause long hangups.

If found that by default the Selenium BaseTest(unittest.TestCase) also contained this line:

```
self.driver.implicitly_wait(20) 
```

Removing this line should speedup every test quite a bit. This line could be ignored by your normal Selenium setup (because it uses a different initialization).

For further speedups I recommend you take a look at PhantomJS. Even with optimization the Firefox test is going to take a few minutes.

# c++ - 构造函数初始值设定项列表中的 lambda 可以使用哪些标识符

> ID：11283977
> 
> 赞同：8
> 
> 时间：2012-07-01T17:01:18.673
> 
> 标签：c++, constructor, lambda

更重要的是，这段代码有什么问题：

```
#include <assert.h>
#include <functional>
using namespace std;

    template< class BaseObjectId >
    class Check
    {
    protected:
        Check( function<bool()> const f ) { assert( f() ); }
    };

    template< int tpMinValue, int tpMaxValue >
    class IntegerSubrange
        : private Check< IntegerSubrange< tpMinValue, tpMaxValue > >
    {
    private:
        int     value_;

    public:
        enum :int { minValue = tpMinValue, maxValue = tpMaxValue };

        static bool rangeContains( int const x )
        {
            return (minValue <= x && x <= maxValue);
        }

        operator int() const
        {
            return value_;
        }

        void operator/=( int const rhs )
        {
            value_ /= rhs;
            assert( rangeContains( value_ ) );
        }

        explicit IntegerSubrange( int const value )
            : Check< IntegerSubrange< tpMinValue, tpMaxValue > >(
                [=]() -> bool { return rangeContains( value ); }
                )
            , value_( value )
        {}
    };

int main() {} 
```

Visual C++ 报告*语法错误*：

```
foo.cpp
foo.cpp(41)：错误 C2059：语法错误：')'
        foo.cpp(44) : 请参阅正在编译的类模板实例化“IntegerSubrange”的参考
foo.cpp(42)：错误 C2059：语法错误：'，'
foo.cpp(43) : 错误 C2334: '{' 之前的意外标记；跳过明显的函数体

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T18:04:24.500

总结评论：**提问者的代码是有效的。**显然，一些早于 GCC 4.4 或 Visual C++ 2011 的编译器会拒绝它，因为这些编译器不完全支持 C++11 样式的 lambda。但是现代编译器（当然还有任何声称支持新 C++11 标准的编译器）应该可以很好地处理它。

从字面上回答您的问题：在*ctor-initializer-list 中*，如果您将它们移动到构造函数本身的花括号内，则可以使用相同的标识符（并引用相同的内容）。特别是，这意味着您可以

```
class C {
    const char *p_ = "foo";
    char c_;
    C(int): p_(__func__) { }      // referring to "__func__"
    C(double): c_(*this->p_) { }  // referring to "this"
}; 
```

以下是标准对这个主题的看法：

> *mem-initializer的**expression-list*或*braced-init-list*中的名称在为其指定*mem-initializer* 的构造函数的范围内进行评估 。... [*注意：*因为*mem-initializer**是* 在构造函数的范围内评估的，所以指针可以在*mem-initializer的**表达式列表*中使用，以引用正在初始化的对象。—<em>尾注]     [（N3337 §12.6.2 #12）](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3337.pdf)*****`this`*****

# mongodb - hadoop-mongodb驱动和mahout

> ID：11283993
> 
> 赞同：1
> 
> 时间：2012-07-01T17:02:50.490
> 
> 标签：mongodb, hadoop, mahout

我已经使用 hadoop-mongodb 驱动程序在 mongodb 之上设置了 hadoop。目前，我可以成功地将 M/R 作业的结果输出到 mongo 集合。我想使用 mahout 来利用一些提供的算法。是否可以在 mongodb 之上使用 mahout 并直接输出到 mongo 集合？是否有我可以阅读的方法或示例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T18:14:58.947

是的，但这与 Mahout 没有直接关系。您以选择 MongoDB 位置的方式指定输入和输出 URL。剩下的就是 Hadoop-Mongo 集成和设置的问题了。

# c# - 获取其中一列中包含某个值的行数，并在标签中显示该数字

> ID：11283996
> 
> 赞同：0
> 
> 时间：2012-07-01T17:03:17.563
> 
> 标签：c#, asp.net

我有一个gridview 和sqldatasource。

我想在标签中显示来自gridview的行数，该行数在其中一列中包含某个值（在`form_load`事件中）

我考虑过遍历gridview的所有列，但这将花费很多时间，也许还有另一种方法可以做到这一点。

有人可以帮我找到“其他方式”吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T17:13:21.030

最好的解决方案是让数据库处理过滤 - 与循环应用程序服务器上的数据相比，您将获得更好的性能。

也许`SqlDataSource`使用包含适当`WHERE`条件的 SQL 语句创建另一个并将其绑定到您的标签？

# javascript - 重力和冲击错误

> ID：11283998
> 
> 赞同：0
> 
> 时间：2012-07-01T17:03:20.427
> 
> 标签：javascript, jquery, html, canvas

我开始使用物理/粒子模拟器，但在碰撞检测方面遇到了一些问题：

[http://mmhudson.com/physics.html](http://mmhudson.com/physics.html)

我不是在寻找代码解决方案，而是在概念上向我解释这个问题。

它的工作方式是我检查粒子在下次移动时是否会在对象内部/相交。如果是，则重力乘数反转，因此其方向反转。

我使用的运动方程是：

下一个位置 = 当前速度 + 重力 + 当前位置

速度是重力乘数

希望有人以前见过这样的问题，或者愿意查看我的页面的来源。

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:35:50.173

没有概念上的解释，而是一堆随机观察：

我建议添加画布宽度/高度变量并将它们与粒子位置进行比较。现在，即使粒子从画布上掉下来，它们也会不断下落。就像是：

```
if( particles[i][1] > height )
    particles.splice(i,1); 
```

* * *

```
newPY < objects[k][2] + objects[k][3] + radius 
```

真的很奇怪。你从中得到什么？添加对象的宽度和高度以及粒子半径？如果你去掉这部分，粒子只要有“动量”就会从物体上反弹。

* * *

至于动量，我假设您想弄清楚如何阻止粒子从物体中落下。给定当前代码，我会这样做：向粒子添加第五个变量，默认为画布的高度。然后，一旦你发现你有一个影响，将影响位置保存到粒子并在循环之后，检查粒子是否低于该点。如果是这样，请将其重置为该点。肮脏的修复，但是，嘿，它有效。我在下面添加了对我有用的完整循环。要阻止对象被 clearRect 方法清除，可以考虑重新绘制它们。

* * *

您只检查对象顶部的粒子，但我认为“掉落”方面是您询问的错误的一部分，因此目前不太重要：

```
particles[i][1] < objects[k][1] + objects[k][3] + radius 
```

但是，如果您决定四处玩耍并减少重力，则可能是这样，这样粒子就会获得动量并反弹到上方的物体上。

* * *

至于您的 objCheck 变量，您混淆了最后 && 部分中 y 的宽度。它应该是：

```
mY < objects[i][1] + objects[i][3] + radius 
```

代替

```
mY < objects[i][2] + objects[i][3] + radius 
```

现在，您的 objCheck 无法正常工作。

* * *

还

```
for(var i=0; i < particles.length; i++) {
    var clrRadius = 2*radius;
    canvas.clearRect(particles[i][0]-radius, particles[i][1]-radius, clrRadius, clrRadius);
} 
```

好于

```
for(var i=0; i < particles.length; i++){
    var clrRadius = radius + 4;
    canvas.clearRect(particles[i][0]-(clrRadius/2), particles[i][1]-(clrRadius/2), clrRadius, clrRadius);
} 
```

编辑：似乎您更改了代码，因为我上次检查它，所以上面可能不再相关！

edit2：添加了粒子停止修复。这是完整的重力循环：

```
for(var i=0; i<particles.length; i++){
var clrRadius = 2*radius;
canvas.clearRect(particles[i][0]-radius, particles[i][1]-radius, clrRadius, clrRadius);
}

for(var i=0; i < particles.length; i++){
var newPY = particles[i][1] += particles[i][2] + particles[i][3];

for(var k=0; k<objects.length; k++){
    if(
        //particle
        particles[i][0] > objects[k][0] - radius && 
        particles[i][0] < objects[k][0] + objects[k][2] + radius && 
        particles[i][1] > objects[k][1] - radius &&
        particles[i][1] < objects[k][1] + objects[k][3] + radius //&& 
    ){
            //reverse gravity
            particles[i][2] = particles[i][2] * -1;
            particles[i][5] = objects[k][1] - radius;
    }
}

particles[i][2] += particles[i][3]*weight;
particles[i][1] += particles[i][2];

if( particles[i][1] > particles[i][5] )
    particles[i][1] = particles[i][5];

if( particles[i][1] > height )
    particles.splice(i,1);
}

for(var i=0; i <particles.length; i++){
canvas.fillStyle = "#000";
canvas.beginPath();
canvas.arc(particles[i][0], particles[i][1], radius, 0, Math.PI*2, true);
canvas.closePath();
canvas.fill();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T02:22:46.827

我不会使用重力倍增器。

每个对象应如下所示：

```
var circle = {
    x: 0,   // x position
    y: 0,   // y position
    dx: 0,  // x velocity
    dy: 0   // y velocity
} 
```

要更新粒子，请将速度 (dx, dy) 乘以某个时间间隔并将其添加到当前位置。

在每个循环中，由于重力而增加一些速度变化。

如果您检测到碰撞改变速度，使圆圈相互反弹。这方面的一个例子是：

```
// In a collision, simply reverse the direction of movement
// so the circles move away from each other.

function onCollision(circleA, circleB) {
    circleA.dx *= -1;
    circleA.dy *= -1;

    circleB.dx *= -1;
    circleB.dy *= -1;
} 
```

# google-app-engine - Google App Engine - 完整应用程序的数据存储读取统计信息

> ID：11283999
> 
> 赞同：1
> 
> 时间：2012-07-01T17:03:39.430
> 
> 标签：google-app-engine

为了降低过度消耗数据存储读取的现有应用程序的成本，我试图获取整个应用程序的统计信息。

对于整个应用程序，我想获得的是关于在生产的一整天中返回最多行数的查询的统计信息。检索数据的成本为 0.70 美元 / 百万美元，有很大的动力去优化/缓存一些查询，但首先我必须了解哪个查询检索了太多数据。

Appstats 显然不提供此信息，因为该工具的主要驱动力是优化一个 RPC 调用。

有没有人对此有一个神奇的解决方案？我想到的一种替代方法是自己构建一个工具，用于在每次查询后记录返回的行数，但这看起来有点矫枉过正，需要打开代码。

非常感谢你的帮助 ！

雨果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T00:06:27.960

请参阅此相关帖子：[https ://stackoverflow.com/questions/11282567/calculating-datastore-api-usage-per-request/](https://stackoverflow.com/questions/11282567/calculating-datastore-api-usage-per-request/)

衡量和优化可以看LogService提供的cost字段。（在管理面板中称为 cpm_usd）。

使用此信息，您可以找到最昂贵的 url，从而优化其查询。