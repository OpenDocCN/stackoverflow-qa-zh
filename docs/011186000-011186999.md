# StackOverflow 问答 11186000-11186999

# android - 又一个 getView 被多次调用

> ID：11186004
> 
> 赞同：20
> 
> 时间：2012-06-25T08:42:35.580
> 
> 标签：android, listview

我包含的每个项目都`ListView`包含一个`ImageView`和一个`TextView`，这将填充远程信息。

我得到了 的 URL `ImageView`，因此我启动了一个`AsyncTask`下载图像并`setImageBitmap`使用下载的位图调用的 URL。

这很顺利，但是在创建 ListView 时，`getView()`经常调用它。它调用前 10 行的大约 7 次`getView`（只有 7 行可见）。（所以：0、1 等，10、0、1 等）。

然后我可以顺利滚动到第 10 项。但在那之后，对于每个新行，listview 再次调用`getView`前 10 个项目的大约 7 倍。（这会导致滞后..）

但是当我从 中删除 时`setImageBitmap`，`AsyncTask`这一切都不会发生！

可能是什么问题呢？会不会是某些布局太大而导致另一条 getViews ？

这里有一些代码：

```
<ListView
    android:id="@+id/mylist"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_alignParentBottom="true"
    android:layout_below="@+id/mydivider"
    android:divider="@+color/mycolor"
    android:dividerHeight="2dp"
    android:fadingEdge="none"
    android:fastScrollEnabled="true"
    android:listSelector="@android:color/transparent"
    android:scrollbars="horizontal"
    android:scrollingCache="false"
    android:smoothScrollbar="false" /> 
```

异步任务：

```
public static class MyTask extends AsyncTask<String, Integer, Bitmap> {
    private LruCache<String, Bitmap> mMap;
    private String mUri;
    private int mPosition;
    private ViewHolder mHolder;

    public MyTask (ViewHolder holder, int position, LruCache<String, Bitmap> map) {
        mMap = map;
        mHolder = holder;
        mPosition = position;
    }

    @Override
    protected Bitmap doInBackground(String... url) {
        mUri = url[0];
        return getBitmapFromURL(mUri);
    }

    @Override
    protected void onPostExecute(Bitmap b) {
        if (b != null) {
            mMap.put(mUri, b);
            if (mPosition == mHolder.position) {
                holder.image.setImageBitmap(b);
            }
        }
    };
} 
```

获取视图（）

```
row = convertView;
ViewHolder holder;
if (row == null) {
    row = vi.inflate(R.layout.mylayout, null);
    holder = new ViewHolder();
    holder.image = (ImageView) row.findViewById(R.id.myimage);
    holder.title = (TextView) row.findViewById(R.id.mytext);
    row.setTag(holder);
} else {
    holder = (ViewHolder) row.getTag();
}

holder.title.setText("text");
holder.image.setImageResource(R.drawable.mydefaulticon);
holder.position = position;
startMyTask(content, holder, position); 
```

更多信息：

当创建一个新视图时，显示的堆栈跟踪显示 getView 被调用`ListView.makeAndAddView()` 但在 getViews 的无用条纹中它来自`ListView.measureHeigthOfChildren()`

所以当我设置位图时，布局似乎发生了变化......

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-25T10:17:43.860

问题出在 ListView 的布局中。

参数`layout_width`设置为`wrap_content`我改`fill_parent`的时候问题消失了...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T09:07:24.890

我建议您观看此视频[http://www.youtube.com/watch?v=wDBM6wVEO70](http://www.youtube.com/watch?v=wDBM6wVEO70)

基本上android会多次调用getView来计算视图高度和东西，所以你需要在你的异步中实现某种缓存，检查[http://code.google.com/p/android-query/](http://code.google.com/p/android-query/)如果你不使用身份验证

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T09:58:00.507

问题是您的 ListView 不知道每个项目是什么。初始化时，ListView 将测量其所有子项并根据此信息绘制自身。您对 AsyncTask 所做的是更改列表中项目的大小，而不是让 ListView 再次完全绘制自己。这会导致您的 ListView 行为异常。

解决方案：您应该通过在您的 AsyncTask 的 PostExecute 中使用**notifyDataSetChanged()**通知适配器来更新您的 ListView 。这将允许 ListView 使用新信息绘制自己。

我希望它有效！

一些有用的链接：

[http://thinkandroid.wordpress.com/2012/06/13/lazy-loading-images-from-urls-to-listviews/](http://thinkandroid.wordpress.com/2012/06/13/lazy-loading-images-from-urls-to-listviews/)

[ListView 中图像的延迟加载](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-24T11:59:39.983

我尝试在 ListView 中使用 fill_parent 作为高度，但我无法完美地实现它，但是我如何通过阻止创建 convertViews（如果它已经存在）来尝试它。它在我的方法中运行良好。

```
 @Override
        public View getView(final int position, View convertView, ViewGroup parent) {
         if (convertView != null)
            return convertView;
         else {
            //your code...
         }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-23T10:13:52.670

抱歉回复晚了。我在我的画廊小部件适配器中遇到了同样的问题。我使用了通用图像加载器。**Martijn 的**解决方案对我有用。我所要做的就是在图像完全下载并设置 imageView 时添加**notifyDataSetChanged() 。**

# objective-c - 是 imageWithCGImage:scale:orientation: 裁剪原始图像吗？

> ID：11186007
> 
> 赞同：0
> 
> 时间：2012-06-25T08:42:39.073
> 
> 标签：objective-c, ios

是 UIImage 方法：

```
+ (UIImage *)imageWithCGImage:(CGImageRef)imageRef scale:(CGFloat)scale orientation:(UIImageOrientation)orientation 
```

裁剪原始图像或只是旋转它？

有没有办法显示这样的图像而不必在我的应用程序用户界面中显示它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:10:09.433

不，不会被裁剪，只是按该大小旋转和缩放：

[UIImage 参考](http://developer.apple.com/library/ios/documentation/uikit/reference/UIImage_Class/Reference/Reference.html#//apple_ref/occ/clm/UIImage/imageWithCGImage%3ascale%3aorientation%3a)

而且，关于如何在不“显示”的情况下显示它，将隐藏参数设置为 YES 或将 alpha 设置为 0.0 可能是个好主意

# mysql - MySQL在左连接后消除行

> ID：11186008
> 
> 赞同：0
> 
> 时间：2012-06-25T08:42:39.303
> 
> 标签：mysql

我发现了 mysql 如何做某事的一种奇怪方式。有人请解释为什么会这样。

我从表 A 中选择所有列，并从表 B 中以特定条件左连接，每个表 A 行可能满足也可能不满足。

现在，在连接之后，在 WHERE 语句中，如果有表 B 结果（如果没有，我确实希望保留该行）。

所以在我做的地方`WHERE tableB.categoryId != 14`。没有结果（应该有的时候）。出于好奇，我尝试将运算符重写为 =,so `WHERE tableB.categoryId = 14`，结果是我想要的结果我没有得到，a 和我不想要的结果我确实得到了。

我不明白，这很奇怪。
不等于不应该起作用吗？
我也尝试了！（`tableB.categoryId = 14`），但这也没有产生任何结果。最后，我尝试了`WHERE IF(tableB.categoryId = 14, 0, 1)`，并且出于某种原因确实有效。为什么这行得通，为什么不等于和否定运算符不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T08:45:53.630

你需要`WHERE tableB.categoryId IS NULL OR tableB.categoryId != 14`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T09:00:09.903

我认为您的问题与左连接无关。

对于调试，您应该尝试一个没有左连接的更简单的查询。只是`SELECT * FROM tableB WHERE categoryId = 14`

还要检查 categoryId 的类型，问题可能是从 int 到 string 的隐式转换并非在所有上下文中都有效，因此最好将它们明确化。

# mysql - 如何显示图像的预览

> ID：11186011
> 
> 赞同：0
> 
> 时间：2012-06-25T08:42:44.113
> 
> 标签：mysql, asp.net-mvc

我正在浏览图像，并且能够将其保存到数据库并显示数据库中的图像。

但我想在将图像保存到数据库之前显示图像的预览。我在预览图像时遇到问题。请向我建议有关如何执行此操作的任何想法。

```
 //enter code here
    public ActionResult GetImage(int id)
    {
        //var Id == 1;
        var query = dbContext.Pictures.Where(i => i.Id == id).FirstOrDefault();
        {
            System.IO.MemoryStream outStream = new System.IO.MemoryStream();

            byte[] imageBytes = outStream.ToArray();

            if (query.Name != null)
            {
                byte[] image = query.Name;

                return File(image, "image/jpg");
            }
            else
            {
                return null;
            } 
         }
     } 
```

这就是我在数据库中显示图像所做的。它对我有用，但是如何在将图像保存到数据库之前在视图页面中预览图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:03:46.337

快速谷歌搜索“html文件上传预览”给了我以下页面

*   [http://blogs.adobe.com/cantrell/archives/2004/06/how_to_implemen.html](http://blogs.adobe.com/cantrell/archives/2004/06/how_to_implemen.html)

*   [通过 Javascript 预览 Html 文件上传](https://stackoverflow.com/questions/1259754/html-file-upload-preview-by-javascript)

根据另一个stackoverflow问题，在获取图像的实际路径方面存在一些安全问题，否则很容易在图像标签中显示相同的路径。

# php - 日期功能上个月的第一天不起作用？

> ID：11186013
> 
> 赞同：1
> 
> 时间：2012-06-25T08:42:54.690
> 
> 标签：php

我有下面的代码，

```
$lastmonthLastDay =   date('Y-m-d', strtotime("last day of last month"));
$lastmonthFirstDay= date('Y-m-d', strtotime("first day of -1 month")); 
```

这在本地主机中完全有效。但是当我在现场直播时总是返回`1970-01-01`。

我在服务器设置中有什么遗漏吗？好心劝告

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T10:02:21.580

你可以试试这个：

```
$firstDay = date('d-m-Y', mktime(0, 0, 0, date("m", strtotime("-1 month")), 1, date("Y",strtotime("-1 month"))));
$lastDay = date('d-m-Y', mktime(-1, 0, 0, date("m"), 1, date("Y"))); 
```

这是一种更通用的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T02:33:16.807

我知道这有点老了，但是... PHP 5.x 中的标准 DateTime 类可以很好地解决这个问题：

```
 $last_month = new DateTime('now');
    $last_month->modify('-1 month');
    echo "Last month: ".$last_month->format('Y-m-1 00:00:00')."\n"; 
```

格式与 date() 函数的格式相同。

# iphone - 如何使用此 URL“http://www.youtube.com/watch?v=JPUWNcGDyvM&feature=player_embedded”在 MPMoviePlayerController 中播放视频

> ID：11186019
> 
> 赞同：1
> 
> 时间：2012-06-25T08:43:22.740
> 
> 标签：iphone, objective-c, mpmovieplayercontroller

我想播放此 URL 的视频[http://www.youtube.com/watch?v=JPUWNcGDyvM&feature=player_embedded](http://www.youtube.com/watch?v=JPUWNcGDyvM&feature=player_embedded)我上次暂停的地方...我可以播放视频但是当我离开此页面并返回查看这个视频将从之前开始。但我想在我上次暂停的地方继续播放这个视频。代码..

```
- (void)viewDidLoad
{   
 player = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL URLWithString:[NSString    stringWithFormat:@"%@video.mp4",urlVideo]]];   
[[NSNotificationCenter defaultCenter]
 addObserver:self
 selector:@selector(movieFinishedCallback:)
 name:MPMoviePlayerPlaybackDidFinishNotification
 object:player];
//---play movie---
[player prepareToPlay];
[player pause];
player.view.frame = CGRectMake(0, 0, 320, 367);
[self.view addSubview:player.view];   
[[NSNotificationCenter defaultCenter]
 addObserver:self
 selector:@selector(movieFinishedCallback:)
 name:MPMoviePlayerPlaybackDidFinishNotification
 object:player];
[super viewDidLoad];
} 
```

我的 movieFinishedCallbackm 方法是：-

```
- (void) movieFinishedCallback:(NSNotification*) aNotification {
player = [aNotification object];
[[NSNotificationCenter defaultCenter]
 removeObserver:self
 name:MPMoviePlayerPlaybackDidFinishNotification
 object:player];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T08:53:28.323

使用 MPMoviePlayerController 你可以实现 MPMediaPlayback 协议，所以在你的播放器上，你可以发送一个暂停消息：

```
[myMoviePlayer pause]; 
```

使用 viewWillDisappear 或 viewDidDisappear 暂停视频，使用 viewWillAppear 或 viewdidAppear 继续播放。

```
- (void)viewWillAppear:(BOOL)animated
{
    [myMoviePlayer play];
}

- (void)viewWillDisappear:(BOOL)animated
{
   [myMoviePlayer pause];
} 
```

# java - 如何在 liferay portlet 中发送 POST？

> ID：11186029
> 
> 赞同：2
> 
> 时间：2012-06-25T08:43:59.690
> 
> 标签：java, jsp, liferay, portlet

嗨，我开始学习 liferay 并遇到一个问题。我无法从 jsp 在 portlet 中发送 POST。

在jsp中我有：

```
<%@ taglib uri="http://java.sun.com/portlet_2_0" prefix="portlet" %>
<%@ page language="java" contentType="text/html; charset=UTF-8"
pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<portlet:defineObjects />

<div>
  <form action="HelloWorld" method="post" enctype="multipart/form-data">
   <div id="up">
    <input id="fileUpload1" type="button" name="filename" value="Привет">
   </div>
   </form>
 </div> 
```

在 portlet 中：

```
public class HelloWorld extends GenericPortlet {
protected void doGet(ActionRequest request,
     ActionResponse response) throws ServletException, IOException
     { 
 // reading the user input 
 //String color= request.getParameter("color");
 HttpServletResponse servletResponse = PortalUtil.getHttpServletResponse(response);
 PrintWriter out = servletResponse.getWriter(); 
    out.println("<HTML>");
    out.println("<HEAD <TITLE> Upload4 </TITLE> </HEAD>");
    out.println("<BODY>");
    out.println("<FORM action = \"HelloWorld\" method = \"post\" enctype = \"multipart/form-data\">");
    out.println("<div id='up'>");
    out.println("Hello World!!");
    out.println("<input id='fileUpload1' type='button' name='filename' value='Привет'>");
    out.println("</div>");
    out.println("</FORM>");
    out.println("</BODY>");
    out.println("</HTML>");
 } 
     } 
```

我哪里会出错？我要在portlet 的XML 文件中写一些东西吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T08:52:23.497

这在很多层面上都是错误的 - 抱歉 - 我不知道从哪里开始：

*   你应该发帖到`<portlet:actionURL />`，而不是“ `HelloWorld`”
*   您应该实现`processAction`而不是`doGet`（这听起来很像 servlet）
*   `HttpServletRequest`为了编写内容，您不得访问您的操作处理程序中的原始内容
*   在动作处理中你只是处理动作，在渲染阶段你渲染你需要的 HTML
*   您生成的 HTML 不包含`<html>`, `<head>`，而只是门户将嵌入页面的某些部分
*   我觉得我错过了更多的东西......

我建议从一些教程开始——比如[Liferay in Action](http://www.manning.com/sezov/)这本书——来了解基本概念。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T08:46:06.267

表单标签中的动作属性应该是`<portlet:actionURL />`

```
<form action="<portlet:actionURL />" method="post" enctype="multipart/form-data"> 
```

同样在 portlet java 文件中实现`processAction(ActionRequest request, ActionResponse response)`POST 方法。

# php - 通过 ajax 在按键上提交 textarea 并动态加载内容

> ID：11186030
> 
> 赞同：0
> 
> 时间：2012-06-25T08:44:02.490
> 
> 标签：php, jquery, mysql, ajax

是的，我解决了我之前的问题，即无法在返回键上提交 textarea，但它提出了一个新问题。它通过 ajax 提交评论，然后在第一个状态下正常加载。无论我尝试将评论添加到哪个帖子，它都会将评论附加到页面上的第一个状态 div，而不是正在执行操作的那个。但是，如果我刷新页面，评论会出现在正确的状态，所以我知道正在提交正确的 ID，它只是被附加在错误的位置，但我不明白为什么。

我的提交代码：

```
$(function() {  
    $('textarea#scat').bind('keydown', function(e) {
        if(e.keyCode==13){
            var myClass = $(this).attr("class");  
            var comment = $("textarea." + myClass).val();  
            if (comment == "") {  
                return false;  
            }

            if (!$.trim($("textarea." + myClass).val())) {  
                return false;  
            }

            var cid = $("input.c_" + myClass).val();  
            var itemid = $("input.i_" + myClass).val();  
            var type = $("input.t_" + myClass).val();  
            var top = $("input.l_" + myClass).val();  

            var dataString = 'comment='+ comment + '&cid=' + cid + '&itemid=' + itemid + '&type=' + type;  

            $.ajax({  
                type: "POST",  
                url: "addcomment.php",  
                data: dataString,  
                success: function() {  
                    $('#c').load('ajax/querylc.php?oid=' + myClass); 
                    $("textarea." + myClass).val('');
                }  
            });  
        return false;  
        }
    });  
}); 
```

我的 ajax/querylc.php （加载评论并将其附加到所述状态）

```
$onuid = strip_tags(stripslashes(htmlentities(mysql_real_escape_string($_GET['oid']))));

  $re = ("SELECT * FROM (SELECT comment as comment, byuid as byuid, comuid as comuid, likes as likes, dislikes as dislikes, UNIX_TIMESTAMP(timestamp) as timestamp FROM mingle_comments WHERE onuid = '$onuid' AND type = 'status' ORDER BY timestamp DESC LIMIT 2) mingle_comments ORDER BY timestamp ASC") ; //query
   $result = mysql_query($re)  or die (mysql_error());
  if(mysql_num_rows($result) >= 2) {
        ?>
        <div id="sa" style="background:#E0E0E0; padding:5px 5px 5px 5px;">
            <a href="#" style="font-family:Arial; font-size:12px; color:#3a3a3a; text-decoration:none;">View all comments...</a>
        </div>
        <?php
    }

  while($st = mysql_fetch_assoc($result)) {
    $comment = $st['comment'];
    $by = $st['byuid'];
    $comuid = $st['comuid'];
    $time = $st['timestamp'];
    $l = $st['likes'];
    $d = $st['dislikes'];

    $bq = "SELECT * FROM users WHERE uid = '$by' LIMIT 1";
    $bqq = mysql_query($bq) or die (mysql_error());

    while($bqr = mysql_fetch_assoc($bqq)) {
        $dp = $bqr['dp'];
        $fbq = $bqr['fname'];
        $sbq = $bqr['sname'];
    }
    ?>

    <div id="commentbox" class="<?php echo $comuid; ?>" style="padding:5px 5px 5px 5px;">
        <div id="cbi" style=" display:inline; position:relative; ">
            <img src="<?php if ($dp == null) { echo 'img/unknown_user.jpg'; } else { echo "pf/" . $by . "/" . $dp; } ?>" width="36px" style=" display:inline; position:relative;"/>
        </div>
        <div id="cbt" style="position:relative; margin-left:32px; margin-top:-35px;">
            <a href="profile.php?uid=<?php echo $uid; ?>" style="position:relative; font-size:13px; margin-left:10px; font-family:Arial; color:#3a3a3a; text-decoration:none;"><?php echo $fbq . " " . $sbq; ?></a>
            <p class="<?php echo $comuid; ?>" style="position:relative; margin-left:5px;"><?php echo $comment; ?></p>
        </div>
        <div id="clb" style="background:#E0E0E0; padding-left:5px;">
            <a href="#">Like</a> <a href="#">Dislike</a> <a href="#" id="time"><?php echo time_since($time); ?></a>
        </div>
    </div>

<?php
}
?> 
```

任何想法为什么会发生这种情况？：/另外，如果我按住返回键，它会多次提交，有什么想法可以防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:06:12.253

> 另外，如果我按住返回键，它会多次提交，有什么想法可以防止这种情况发生吗？

使用 keypress 事件而不是 keydown

```
$('#c').load('ajax/querylc.php?oid=' + myClass); 
```

'#c' 选择器选择 id 为“c”的第一个元素。因此，尝试将此 id 生成为唯一的（“#c1”、“#c2”等）。

# asp.net - asp.net mschart X 轴显示 12 小时时间格式

> ID：11186032
> 
> 赞同：0
> 
> 时间：2012-06-25T08:44:38.557
> 
> 标签：asp.net, mschart

如何在 MS 图表控件的 X 轴上以 12 小时格式显示 1-12 AM 和 1-12 PM 的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:28:10.240

您可以更改此属性

```
Chart1.ChartAreas[0].AxisX.LabelStyle.Format = "t"; 
```

在此处检查格式

[日期时间格式字符串](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)

# c - RAW Socket发送不起作用

> ID：11186035
> 
> 赞同：0
> 
> 时间：2012-06-25T08:44:50.713
> 
> 标签：c, sockets, send

嗨，我正在尝试借助简单的 RAW 套接字功能向电路板发送一些命令。这是我正在使用的界面设置。在命令行中，我将接口作为 eth0 传递。我的代码如下：

```
int CreateRawSocket(int proto)
{
    int i;
    struct timeval timeout;
    printf("\n creating a raw socket for protocol %d",proto);
    if((rawsock=socket(PF_PACKET,SOCK_RAW,htons(proto)))==-1)
    {
        perror("\n cannot create socket");
        return -1;
    }
    printf("\n setting the timeout for the raw socket equal to one microsecond");
    timeout.tv_sec = 0;
    timeout.tv_usec =1;
    setsockopt(rawsock, SOL_SOCKET, SO_RCVTIMEO, &timeout, sizeof(timeout));
    setsockopt(rawsock, SOL_SOCKET, SO_SNDTIMEO, &timeout, sizeof(timeout));
    i = 1;
    setsockopt(rawsock, SOL_SOCKET, SO_DONTROUTE, &i, sizeof(i));
    return rawsock;
}

int BindRawSocketToInterface(char *device,int proto)
{
    struct sockaddr_ll sll;
    struct ifreq ifr;
    printf("\n initiating  socket address and interface address to null");
    bzero(&sll,sizeof(sll));
    bzero(&ifr,sizeof(ifr));
    printf("\n setting up the interface to bind");
    strcpy((char *)ifr.ifr_name, device);
    if((ioctl(rawsock,SIOGIFINDEX, &ifr))==-1)
    {
        printf("\n something went wrong while resetting the interface with name");
        return -1;
    }
    //setting up the flags and index in one step-ifr.ifr_flags = 0;
    strcpy((char *)ifr.ifr_name, device);
    ifr.ifr_flags = ifr.ifr_flags || IFF_PROMISC || IFF_BROADCAST;
    printf("\n setting up the socket for this interface and protocol");
    sll.sll_family = AF_PACKET;
    sll.sll_ifindex =ifr.ifr_ifindex;
    sll.sll_protocol=htons(proto);
    printf("running ioctl");
    if((ioctl(rawsock,SIOGIFINDEX, &ifr))==-1)
    {
        printf("\n something went wrong while setting flags");
        return -1;
    }
    printf("running bind");
    int r;
    if((r = bind(rawsock, (struct sockaddr *)&sll, sizeof(sll)))==-1)
    {
        printf("\n socket is not binding properly");
        return -1;
    }
    return r;

   /*you can use this command to make it non blocking
   r = fcntl(rawsock, F_SETFL, fl | O_NDELAY);*/
} 
```

一切正常，发送返回 30，这是正确的，但我没有在 Wireshark 中看到数据包。我确定wireshark设置没问题。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:50:57.530

我看到另一个有类似问题的： [原始套接字未发送](https://stackoverflow.com/questions/1037242/raw-socket-not-sending)

“数据包确实正在发送，但 Wireshark 只能在 6 分钟左右的间隙后显示它们”。

您可以尝试通过抛出 HTTP 请求来检查 Wireshark 的延迟。

# c++ - 在调用不同类的函数时刷新 Windows 窗体

> ID：11186037
> 
> 赞同：0
> 
> 时间：2012-06-25T08:45:05.977
> 
> 标签：c++, winforms, timer

我的 Windows 窗体应用程序调用来自不同类的函数。此功能需要大约 20 分钟才能运行..我想每 5 秒更新一次我的 windows 窗体..（不再调用该函数......但刷新 windows 窗体）。我知道我必须使用计时器功能.. 有人可以帮我吗？计时器结束后我可以再次调用函数..但我只想刷新表单..

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:10:37.673

看看[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)组件。这个基于事件的对象将在 UI 线程 ( [DoWork](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.dowork) ) 之外运行您的函数，并且可以将进度报告回 UI ( [ProgressChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.progresschanged.aspx) ) 并在函数完成时通知 UI ( [RunWorkerCompleted](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.runworkercompleted.aspx) )。

# php - Flex PHP 服务生成的端点和 gateway.php

> ID：11186038
> 
> 赞同：2
> 
> 时间：2012-06-25T08:45:08.417
> 
> 标签：php, apache-flex, flash-builder

我最近更新了一个 Flex 3 项目，以利用**Flash Builder 4.6 for PHP Premium**中提供的 Zend 服务。现在已经完成，我准备将我的站点部署到实时服务器。

我的意图是将 PHP 资源部署到一台服务器上，然后在另一台服务器上拥有主要的“闪存”站点。这样做的原因是因为我有另一个项目也将访问另一台服务器上的相同 PHP 资源。

在我的 PHP 文件上使用“为 Flex 创建 PHP 服务”选项时，我注意到 Flash Builder 会自动生成等效的 .as 文件，但它也会为端点输入一个**完整的 URL**，例如：

```
_serviceControl.operations = operations;
_serviceControl.convertResultHandler = com.adobe.serializers.utility.TypeUtility.convertResultHandler;
_serviceControl.source = "serviceName";
_serviceControl.endpoint = "http://localhost/php-resources-folder/gateway.php"; 
```

我环顾四周，但看不到任何动态控制此端点 URL 的方法，因此它可以在我的本地开发站点和实时部署站点上运行。这肯定是可能的吗？

我[在 Adob​​e 论坛上找到了这篇文章，](http://forums.adobe.com/message/3850560)它解释了如何覆盖类以设置不同的端点 URL，但肯定有更简单的方法吗？我拒绝相信 Adob​​e 只是忘了处理这个问题。

* * *

我的另一个问题是，在我网站的所有调试/导出版本中，我得到了一个生成的**gateway.php**和**amf_config.ini**文件。这些是干什么用的？从我的测试中，我看不到它们被使用的任何时间，尤其是端点直接指向资源 gateway.php 文件时。

对不起，这是相当多的文字，任何帮助将不胜感激。

# ruby-on-rails - 将模型映射到多个数据库表

> ID：11186040
> 
> 赞同：0
> 
> 时间：2012-06-25T08:45:11.697
> 
> 标签：ruby-on-rails, orm, ruby-on-rails-3.2

我的数据库中有 2 个表，用于国定假日（日期，国家 ID）和一个用于当地假日（日期，城镇 ID）。我不能将这两个表合并，因为在每种情况下，第二个属性都是不同表的 FK。

因为这 2 种类型的假期将像一个视图一样从相同的视图进行管理，所以我想将这些表映射到一个单一的 rails 模型（日期、id、isNational），其中 isNational 将是一个布尔值来指示类型。我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:09:59.337

你为什么不创建一个唯一的表，例如以假日命名，具有以下属性：

```
add_column :holidays, :date, :datetime
add_column :holidays, :is_national, :boolean, default: false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T09:08:59.680

你想看看多态关系。

```
Holiday
 # area_type: string, area_id: integer, date: date
 belongs_to :area, :polymorphic => true

Town
  has_many :holidays, :as => area
  belongs_to :country

  def all_holidays
    # array of all holidays, both local and national.
    self.holidays + self.country.holidays
  end

Country
  has_many :holidays, :as => area 
```

# email - Magento - 在发送之前解析交易电子邮件

> ID：11186044
> 
> 赞同：0
> 
> 时间：2012-06-25T08:45:20.443
> 
> 标签：email, magento

目标：每次发送事务性电子邮件时，在发送前通过帮助程序类传递模板文本字符串。

我基本上已经按照我的意愿进行了工作。除了一件有点烦人的事情。我已将 /app/code/core/Mage/Model/Email/Template.php 复制到它的本地变体中，并在 getProcessedTemplate() 方法中添加了一行（~第 319 行）

在返回结果之前，我将它传递给助手，我的电子邮件现在很棒；但是，我宁愿让它工作而不必破坏核心。我需要创建一个新的事件和观察者来做到这一点吗？有没有更友好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:00:16.857

不幸的是，在课堂上没有实用/有用的事件挂钩`core/email_template`。此外，有两个类扩展了此类，这意味着使用包含路径优先级是确保在所有情况下都使用您的定义的唯一方法。

您会注意到该`getProcessedTemplate()`方法调用了`_templateFilter`对象的`filter()`方法。您*可以*`core/email_template`通过配置实现类重写，`_templateFilter` 并将覆盖设置`_construct`为使用您自己的模板过滤器类，在`filter()`. 但是，没有什么可以阻止其他代码调用`setTemplateFilter()`，因此您需要适应这种情况。请注意，Mage_Newsletter_Model_Queue 执行此操作。

不是您希望的答案，而是 HTH。

# asp.net - 应用程序对象中的 Unity RegisterInstance

> ID：11186048
> 
> 赞同：0
> 
> 时间：2012-06-25T08:45:24.177
> 
> 标签：asp.net, dependency-injection, unity-container

我想在我现在正在做的项目中应用依赖注入并使用 Unity。在 Global.asax 文件的事件中注册类型`Application_Start`并将 Unity Conatiner 保留在 Application 对象全局变量中。但是，在解析演示者实例之前，我需要将当前 webform 的实例作为构造函数参数传递给演示者。我在页面的 OnInit 事件中执行此操作。

```
protected override void OnInit(EventArgs e)
{
    IUnityContainer container = (IUnityContainer)
        HttpContext.Current.Application["container"];

    container.RegisterInstance<IAddRoleView>(this, 
        new ExternallyControlledLifetimeManager());

    _presenter = container.Resolve<AddRolePresenter>();
    base.OnInit(e);
} 
```

我的问题是：

1.  `AddRoleView`服务请求后，实例会发生什么？
2.  它会被垃圾收集还是 Unity 容器在应用程序关闭之前始终保持引用，因为 Unity Conatiner 实例已保存在应用程序对象中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:49:23.257

你正在做的事情是行不通的。您正在将页面实例注册为容器中的单例。这行不通。根据 Unity 的构建方式，它会在您第二次调用时抛出异常`RegisterInstance<IAddRoleView>`，永久缓存所有已注册的实例，或者替换之前的实现。但是，即使它替换了之前的注册，您的代码中也存在并发错误，因为可能会在`AddRolePreventer`针对此`Page`实例解决的问题中注入不同的页面。

我了解您要达到的目标。你想要解析`AddRolePresenter`，并且想要将页面注入到演示者的构造函数中。您通过它们的构造函数使两种类型相互依赖，这会导致循环依赖。您需要通过将页面注入到演示者的属性中来打破这种依赖循环。但是不要让 Unity 将页面注入到构造函数中；手动执行此操作：

```
_presenter = container.Resolve<AddRolePresenter>();
_presenter.View = this; 
```

一些技巧：

*   防止在初始化阶段后（运行*后*`Application_Start`）进行任何注册。在初始化阶段之后添加注册通常被认为是不好的做法，因为它会使配置变得脆弱，并且难以维护。
*   将此页面初始化在您解析演示者的位置移动到页面的构造函数。这使您可以更轻松地验证是否可以创建页面并在启动应用程序期间（甚至在单元测试中）执行此操作。看一下[这里](http://simpleinjector.codeplex.com/wikipage?title=Web%20Forms%20Integration)的例子，看看如何做到这一点的例子（它是另一个 DI 框架的文档，但它也适用于 Unity）。
*   防止将容器存储在 HttpContext.Application 字典中。这使得在错误的地方使用容器变得很容易，并且将您的应用程序与 Unity 耦合太多。这可以防止您为另一个框架进行重构或更改 Unity（您将来肯定会这样做）。再看看[这个例子](http://simpleinjector.codeplex.com/wikipage?title=Web%20Forms%20Integration)。它还展示了将容器与 Web 表单集成的更好方法

# facebook - Graph API 照片返回图片带问号

> ID：11186050
> 
> 赞同：1
> 
> 时间：2012-06-25T08:45:43.373
> 
> 标签：facebook, facebook-graph-api

我试图通过调用这个来获得更大版本的照片图片：

[https://graph.facebook.com/101510465867446xxx/图片](https://graph.facebook.com/101510465867446xxx/picture)。

有时我会得到一张合适的大图片，但我大多会得到一张带有大问号的图片。

我一定在这里遗漏了一些东西。有人可以告诉我我做错了什么吗？是的，我可以调用照片 API 来获取更多信息，包括照片的不同尺寸和来源，但我想尽量减少对服务器的更多 http 调用以加快速度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T10:02:48.253

对于大图使用以下获取公共图片网址

[https://graph.facebook.com/xxyyzz/picture?type=large](https://graph.facebook.com/xxyyzz/picture?type=large)

对于用户特定的图片`access_token`与 url 一起使用

[https://graph.facebook.com/xxyyzz/picture?type=large&access_token=xyxaaa](https://graph.facebook.com/xxyyzz/picture?type=large&access_token=xyxaaa)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T08:51:58.787

这种检索某人照片的方法仅在某人设置了其照片的隐私以便当前用户可见（登录到发出请求的浏览器/客户端）时才有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-20T12:07:16.340

我尝试了类似使用事件图片的图像。我有几个问号，答案是这些事件不公开。

有时，该对象是私有的或仅对“朋友的朋友”开放，因此 facebook 限制了对图像的访问。

唯一的“修复”是更改对象机密性。

# codeigniter - 使用 Codeigniter 生成站点地图

> ID：11186051
> 
> 赞同：20
> 
> 时间：2012-06-25T08:45:43.610
> 
> 标签：codeigniter, frameworks, sitemap

*我需要在Codeigniter*应用程序中生成站点地图。我发现了一些库，但它们都已经过时并且有错误。

**我真的需要一个单独的库吗？**

我想知道在*Codeigniter*中生成站点地图的最佳方法。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-06-25T12:55:01.543

你可以使用我的代码：

控制器/seo.php

```
Class Seo extends CI_Controller {

    function sitemap()
    {

        $data = "";//select urls from DB to Array
        header("Content-Type: text/xml;charset=iso-8859-1");
        $this->load->view("sitemap",$data);
    }
} 
```

意见/sitemap.php

```
<?= '<?xml version="1.0" encoding="UTF-8" ?>' ?>

<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
    <url>
        <loc><?= base_url();?></loc> 
        <priority>1.0</priority>
    </url>

    <!-- My code is looking quite different, but the principle is similar -->
    <?php foreach($data as $url) { ?>
    <url>
        <loc><?= base_url().$url ?></loc>
        <priority>0.5</priority>
    </url>
    <?php } ?>

</urlset> 
```

添加行到 config/routes.php

```
$route['seo/sitemap\.xml'] = "seo/sitemap"; 
```

对不起，如果代码中有一些错误，我是专门为你做的。如果有错误，您可以通过了解原理来轻松修复它们。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-16T14:25:59.980

必须设置标题：

```
<?php header('Content-type: text/xml'); ?>
<?= '<?xml version="1.0" encoding="UTF-8" ?>' ?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
    <url>
        <loc><?= base_url();?></loc> 
        <priority>1.0</priority>
    </url>
    <!-- My code is looking quite different, but the principle is similar -->
    <?php foreach($data as $url) { ?>
    <url>
        <loc><?= base_url().$url ?></loc>
        <priority>0.5</priority>
    </url>
    <?php } ?>
</urlset> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-05-24T09:21:36.840

强烈建议将站点地图的链接添加到 robots.txt，如下所示：

```
Sitemap: http://www.yoursite.com/seo/sitemap 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-07T20:42:11.137

I've written a CodeIgniter model which enabled you to call functions from a sitemap controller and spit out the XML when you're all done feeding the sitemap.

Feel free to have a look and reuse the CodeIgniter model:

[https://github.com/alphabase/CodeIgniter-Sitemap-Generator](https://github.com/alphabase/CodeIgniter-Sitemap-Generator)

# llvm - 将 GetElementPtrInst 与包含多个值的 ArrayRef 一起使用时出现段错误

> ID：11186052
> 
> 赞同：4
> 
> 时间：2012-06-25T08:45:47.230
> 
> 标签：llvm, llvm-c++-api

我正在尝试用 LLVM 和 C++ 编写一个玩具编译器。但是，每当我尝试创建具有多个索引的 GetElementPtrInst 时，都会出现 Segfault。有关此指令的文档对我没有帮助（[API-Documentation](http://llvm.org/doxygen/classllvm_1_1GetElementPtrInst.html#a3e10b4db1ded36654416d3aed2bc56ba) [Language-Documentation](http://llvm.org/docs/LangRef.html#i_getelementptr)）

我的 llvm 版本是 3.1，这是在 Arch Linux 上。刚刚在另一台 Arch 机器上测试它并得到了同样的错误。

难道我做错了什么？

这是一个小的工作程序来说明我的问题。它可以编译为：

```
g++ -o segfault_example segfault_example.cpp -Wall -Wextra -pedantic \
    `llvm-config --libs core jit native --cxxflags --ldflags` 
```

```
#include <llvm/Module.h>
#include <llvm/Constants.h>
#include <llvm/DerivedTypes.h>
#include <llvm/LLVMContext.h>
#include <llvm/Instructions.h>
#include <llvm/Analysis/Verifier.h>
#include <llvm/ADT/ArrayRef.h>
#include <string>
#include <iostream>

static llvm::LLVMContext& global = llvm::getGlobalContext();
static llvm::Type* int32ty = llvm::Type::getInt32Ty(global);

llvm::ConstantInt* getInt32(int n)
{
    return llvm::ConstantInt::get(llvm::Type::getInt32Ty(global), n);
}

int main()
{
    //setup everything for a minimal example
    llvm::Module* mainModule = new llvm::Module("main", global);

    llvm::FunctionType* ftype = llvm::FunctionType::get(int32ty, false);

    llvm::Function* mainFunction = llvm::Function::Create(
        ftype, llvm::GlobalValue::InternalLinkage, "main", mainModule);

    llvm::BasicBlock* bblock = llvm::BasicBlock::Create(
        global, "entry", mainFunction, 0);

    llvm::AllocaInst* mem = new llvm::AllocaInst(llvm::Type::getInt32PtrTy(global, 0x1000)
        , getInt32(0x1000), 0x1000, "mem", bblock);

    //tests
    //this works
    std::cout << "Testing with one element vector" << std::endl;
    std::vector<llvm::Value*> vect_1;
    vect_1.push_back(getInt32(0));
    llvm::GetElementPtrInst* gep1 =
        llvm::GetElementPtrInst::CreateInBounds(mem, llvm::ArrayRef<llvm::Value*>(vect_1)
        , "retval", bblock);
    std::cout << "done" << std::endl;

    //this works too, but I can't find this signature in the documentation
    std::cout << "Testing with Value* instead of ArrayRef" << std::endl;
        llvm::GetElementPtrInst::CreateInBounds(mem, getInt32(0), "retval", bblock);
    std::cout << "done" << std::endl;

    //this segfaults
    std::cout << "Filling two element vector" << std::endl;
    std::vector<llvm::Value*> vect_2;
    vect_2.push_back(getInt32(0));
    vect_2.push_back(getInt32(1));
    std::cout << "Testing with two element vector" << std::endl;
    //segfault
    llvm::GetElementPtrInst* gep2 =
        llvm::GetElementPtrInst::CreateInBounds(mem, llvm::ArrayRef<llvm::Value*>(vect_2)
        , "retval", bblock);
    std::cout << "done" << std::endl;

    mainModule->dump();
    llvm::verifyFunction(*mainFunction);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T14:40:05.310

发现错误。我将尝试解释原因和我的解决方案，但解释可能是错误的。

的类型`mem`是错误的。（在我的情况下）它需要使用`new llvm::AllocaInst(llvm::ArrayType::get(int32ty, 100), "mem", bblock);`. 创建两个间接级别（[解释为什么有两个间接](http://llvm.org/docs/GetElementPtr.html#why-is-the-extra-0-index-required)）。以前的类型只有一个间接和取消引用它，`GetElementPtrInst`因此没有两个元素向量。

[在浏览器中使用 llvm](http://llvm.org/demo/)并发出 LLVM C++ Api 代码时，我注意到了这一点。

您可以在命令行上为 C 示例文件创建 C++ Api 代码，如下所示：

```
clang -c -emit-llvm -o ex.bf example.c
llc -march=cpp -o ex.cpp ex.bf 
```

# java - 为什么“返回错误”只适用于异常？

> ID：11186056
> 
> 赞同：0
> 
> 时间：2012-06-25T08:46:09.603
> 
> 标签：java, jsp, redirect, error-handling, struts2

在我使用的 struts.xml 中：

```
<result name="error">error</result> 
```

然后在我的行动中我使用：

```
addActionError("ERROR RETURNED");
return ERROR; 
```

当我提交表单时，它只是进入一个空白页面并且什么都不做。但是，如果我强制在操作中引发异常，那么它会转到错误页面并显示 ActionError 消息。那我做错了吗？如果是这样，我应该如何告诉 struts 使用“if 语句”而不是仅仅依赖昂贵的 try catch 来显示错误页面？

请查看下面的编辑以获取更多详细信息。

**编辑1：**

我正在使用 struts 2 版本：2.1.8.1

**编辑2：**

例如，这是我用来测试的操作代码：

```
String test = "";
int number = 0;
        try {
        if (number == 1) {
            test = SUCCESS;
        } else if (number == 2) {
            addActionError("ERROR RETURNED?");
            test = ERROR;
        } else if (number == 3) {
            addActionError("ERROR RETURNED?");
            test = INPUT;
        } else {
            test = LOGIN;
        }
        } catch (Exception e) {
            addActionError("ERROR RETURNED? " + e);
        }
        return test; 
```

这是我的 number.jsp 代码：

```
<s:form action="number_save" method="post">
     <s:textfield name="number" label="Enter number" />
</s:form>
<s:actionerror /> 
```

**编辑 3：**

这是我的 struts.xml 的更长版本：

```
 <action name="number" method="numberCreate" class="NumberActionBean">
       <result>number.jsp</result>
 </action>

<action name="error">
    <result>error.jsp</result>
</action>

<action name="number_save" method="numberSave" class="NumberActionBean">
            <interceptor-ref name="defaultStack"></interceptor-ref>
            <result name="success" type="redirect">index</result>
            <result name="input" type="redirect">number</result>
            <result name="error">error</result>
            <result name="login" type="redirect">login</result>
            <result name="none">number</result>
</action> 
```

**编辑4：**

My`error.jsp`只是一个`<s:actionerror />`带有通用 taglibs 和 html 标签的标签...

**结论**

`AddActionError`除非有例外，否则我无法显示消息。我无法`if`在我的行动中使用陈述。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T09:02:14.020

也许你应该这样做：

```
<result name="error">error.jsp</result> 
```

然后在error.jsp中：

```
<s:actionerror/> 
```

我不确定，如果你只输入“error”而不是“error.jsp”，struts 会将“error”作为一个动作，所以你不会收到错误消息。

最好的，j

对于您的编辑 3：

```
<action name="error">
  <result name="error">error.jsp</result>
</action>

<action name="number_save">
  <result name="error" type="redirectAction">error</result>
</action> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:40:01.797

如果您在这里唯一关心的是“昂贵的尝试捕获”，我不会继续这样做。它是次优化，它会引入复杂性，从长远来看，维护成本将比您在毫秒级性能中获得的成本更高。

除非实际抛出异常，否则 try 块不会增加任何显着的成本开销。当我们在这种情况下谈论“重大开销”时，它处于低毫秒范围内。

你为什么要优化错误页面？这不是经常被调用的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T11:29:07.173

解决方案总结：

# 1

不要将“错误”重定向为操作，只需使用

```
<result name="error"> **error.jsp** </result> 
```

# 2

如果您想用错误消息来纠正错误操作。检查此链接：[implement-message-store-interceptor](http://struts.apache.org/2.3.1/docs/message-store-interceptor.html)

# powershell - PowerShell 测试连接 -TimeToLive 错误？

> ID：11186057
> 
> 赞同：1
> 
> 时间：2012-06-25T08:46:18.747
> 
> 标签：powershell

我不知道发生了什么，但每次我输入以下命令：

```
Test-Connection -ComputerName TARGET -TimeToLive 6 
```

我收到以下错误：

```
Test-Connection : Testing connection to computer 'TARGET' failed: Problem with some part of the filterspec or providerspecific buffer in general
At line:1 char:16
+ Test-Connection <<<<  -ComputerName TARGET -TimeToLive 6
    + CategoryInfo          : ResourceUnavailable: (TARGET:String) [Test-Connection], PingException
    + FullyQualifiedErrorId : TestConnectionException,Microsoft.PowerShell.Commands.TestConnectionCommand 
```

有趣的是，如果我没有`-TimeToLive`参数，例如：

```
Test-Connection -ComputerName TARGET
Test-Connection -ComputerName TARGET -Count 2 
```

命令按预期工作！并且`Get-Help Test-Connection`诱人地表明这`-TimeToLive`确实*是*一个有效的参数。

我哪里做错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T09:09:19.140

每个发出的 IP 数据包都有一个 TTL 字段，该字段设置为相对较高的数字（在 LAN 中 ping 的情况下为 128）。当数据包穿越网络时，TTL 字段会随着它经过的每个路由器而减一；当 TTL 降为 0 时，该数据包被路由器丢弃。IP 规范说 TTL 应该设置为 60（虽然它是 255 用于 ping 数据包）。这样做的主要目的是使数据包不会在网络上永远存在，并且最终会在被视为“丢失”时死亡。

在您的 LAN 中，6 的 TTL 可能不足以到达目的地。

在我的环境中，两跳子网上只有 1 个 ping 的 TTL 会返回您的错误，这是正确的，我只有一个用于多个 vlan 的核心路由器/交换机和一个本地路由器，每个不同的子网/域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-16T05:25:02.903

^(这个答案是基于我自己的实验。如果我错了，请告诉我。
这个答案借鉴了[CB.'s有用的答案](https://stackoverflow.com/a/11186363/45375)。)

**tl;博士**

*   **`-TimeToLive`，尽管[`Test-Connection`文档](https://docs.microsoft.com/en-us/powershell/module/Microsoft.PowerShell.Management/Test-Connection?view=powershell-5.1)说了什么（仍然是 PSv5.1 以及[GitHub](https://github.com/PowerShell/PowerShell-Docs/blob/staging/reference/6/Microsoft.PowerShell.Management/Test-Connection.md) ^([1])上的源代码存储库 ），但不是以*秒为单位的**超时*，而是****数据包在被视为过期之前可以进行的***最大跳数***.**

     ***   因此，它类似于`ping.exe`'s`-i <TTL>`参数。
    *   `Test-Connection``-TimeToLive`- -的默认值`80`提供了一个线索，表明它*不是以**秒*为单位的超时，因为它会过高。
    *   `Test-Connection`没有等效于`ping.exe`的真正基于时间的`-w <ms>`超时参数。** 
***   在这种情况下 ( )中的**模糊错误消息****很可能源于传输中已过期的数据包，因为 TTL**（跳数限制）值较低。`problem with some part of the filterspec or providerspecific buffer in general`

     ***   `ping.exe``TTL expired in transit`会报告在该事件中更有帮助。**** 

 ***** * *

**TTL（生存*时间）在实践中是**用词不当***[，正如Wikipedia](https://en.wikipedia.org/wiki/Time_to_live#IP_packets)告诉我们的那样（强调我的），IPv6 中已经纠正了这个问题：

> ***理论上*，在 IPv4 下，生存时间以*秒***为单位，尽管每个传递数据报的主机都必须将 TTL 至少减少一个单位。***在实践*中，TTL 字段*在每一跳都减少一个*。**为了反映这种做法，该**字段在 IPv6中被重命名为*hop limit***。

因此，可以理解围绕 TTL 真正代表的含义出现混淆，但不幸的是，`Test-Connection`文档中的错误信息多年来一直没有得到纠正。

* * *

^([1] 我在[那里打开了一个问题](https://github.com/PowerShell/PowerShell-Docs/issues/1504)来跟踪问题。)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-26T05:20:43.617

好的，经过几个星期的不间断工作，我昨晚在回家前重新启动了我的笔记本电脑。

今天早上，`-TimeToLive`再次惊人地工作！

所以，我“无法使用”的*主要*`-TimeToLive`问题已经解决了......

...但我仍然想知道，以前发生了什么`-TimeToLive`导致错误...****

# c# - 使用 linq (c#) 读取 xml

> ID：11186058
> 
> 赞同：0
> 
> 时间：2012-06-25T08:46:24.360
> 
> 标签：c#, .net, xml, linq

如何阅读以下 xml 文档？

我的代码是：

```
var vb =
    (from vbs in XMLDoc.Descendants("Response").Descendants("Records ")
    select new
        {
           ref = vbs.Element("ref").Value
        }).ToList(); 
```

XML 文档：

```
<Response>
  <Msg>
       <Code>30</Code>
    <Query/>
  </Msg>
<Rec>
    <Records price="1989" no="838976" ref="1927A64FF6B03527E5BFD8424F647848005143DB" query="00"/>
</Rec>
</Response> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T08:51:58.740

`"Records "`应该是`"Records"`，并且您`Element()`在匿名类成员初始化程序中的调用应该是`Attribute()`因为您正在读取一个属性，它不是一个元素。

```
var vb =
    (from vbs in XMLDoc.Descendants("Response").Descendants("Records")
    select new
        {
           ref = (string)vbs.Attribute("ref")
        }).ToList(); 
```

读取属性时首选转换为`string`IMO，因为它会`null`在找不到属性时返回。如果改为使用，则如果该属性不存在`vbs.Attribute("ref").Value`，则会导致 a 。`NullReferenceException`

# twitter - 对于已删除的推文，twitter api 总是给出“抱歉，该页面不存在”错误

> ID：11186068
> 
> 赞同：3
> 
> 时间：2012-06-25T08:47:03.080
> 
> 标签：twitter

我正在使用带有 OAuth 的 twitter api。

当我尝试检查我使用此 API 发送的推文时，如果推文存在，API 工作正常。但是，如果我删除了 API 发布的推文，推文检查响应总是给我：

> ```
>  (
>                 [message] => Sorry, that page does not exist
>                 [code] => 34
>             ) 
> ```

回复。

我正在尝试使用此代码块：

```
$connection = new TwitterOAuth(CONSUMER_KEY, CONSUMER_SECRET, $userKey, $userKeySecret);
$postResult = $connection->get('statuses/show', array('id' => "209985431515828224")); 
```

在此 API 正常运行前 1 个月，它会给我“未找到状态”响应，但现在它给出了该错误。

这是一个错误还是这是已删除推文的默认响应？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-29T10:43:55.063

1.  确保您使用了正确的 API 方法：[GET statuses/show/:id](https://dev.twitter.com/docs/api/1.1/get/statuses/show/%3Aid)
2.  确保推文仍然存在
3.  确保您始终依赖 id_str

使用 abraham 的 twitteroauth 方法的示例来自：[https ://github.com/abraham/twitteroauth](https://github.com/abraham/twitteroauth)

```
$valid_id_str="209985431515828224";

$parameters = array('trim_user' => 1 );

$status = $connection->post('statuses/show/'.$valid_id_str,$parameters); 
```

# java - struts2 有类似 requireddate 的东西吗？

> ID：11186073
> 
> 赞同：0
> 
> 时间：2012-06-25T08:47:38.037
> 
> 标签：java, forms, date, struts2, validation

我正在尝试验证用户的出生日期。我的jsp页面是这样的：

```
<s:form>
...
<s:date name="birthDate" var="formattedVal" />
<s:textfield value="%{#formattedVal}" key="birthDate" />
...
</s:form> 
```

我`action-validation.xml`的是这样的：

```
 <field name="birthDate">
    <field-validator type="required">
        <param name="trim">true</param>
        <message key="birthDate.required" />
    </field-validator>
    <field-validator type="date">
        <param name="min">01/01/1900</param>
        <param name="max">01/01/9999</param>
        <message />
    </field-validator>
 </field> 
```

问题是当我在这个文本字段中输入错误的输入时，例如：“asñdlkfa”，struts2 认为用户没有输入任何内容，然后输入错误`birthDate.required`。

有没有办法避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:01:49.610

没有任何内置的东西可以一次性完成验证并以我*认为*您希望它们处理的方式处理错误。同时，我不确定是否值得编写自定义验证器，尽管这样做真的很容易。

如果不编写验证器对您来说非常重要，那么您可以使用正则表达式验证器执行操作并在操作中处理转换，否则我可能需要几分钟来编写验证器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:03:55.977

## 使用 struts ajax 和 dojo 标签

* 导入标签库 `<%@ taglib prefix="sj" uri="/struts-jquery-tags"%> <%@ taglib prefix="sd" uri="/struts-dojo-tags"%>` * *根据您的要求`<head> <sj:head /> <sd:head compressed="false" cache="false" /> </head>` 在正文 `<sj:datepicker name="date achat" label="Format (yyyy-MM-dd)" displayFormat="yyyy-MM-dd" maxDate="2012-06-25" /> <sd:datetimepicker name="date achat" label="Format2 (yyyy-MM-dd)" displayFormat="yyyy-MM-dd" startDate="2012-06-25"></sd:datetimepicker>`指定日期之间放置 *

# javascript - 理解“this”关键字

> ID：11186078
> 
> 赞同：16
> 
> 时间：2012-06-25T08:48:07.343
> 
> 标签：javascript, jquery

[在这个提交](https://github.com/jquery/jquery/commit/6e066a4db72ff6b0d12dd8a43faec0a80e4a1fed#L0L31)中有一个我无法解释的变化

```
deferred.done.apply( deferred, arguments ).fail.apply( deferred, arguments ); 
```

变成

```
deferred.done( arguments ).fail( arguments ); 
```

[AFAIK](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this#section_5)，当您将函数作为某个对象的成员调用时，函数`obj.func()`内部`this`是绑定到的`obj`，因此`apply()`仅通过绑定`this`到调用函数是没有用的`obj`。相反，根据评论，这是必需的，因为之前的一些`$.Callbacks.add`实施。

我的疑问不是关于 jQuery，而是关于 Javascript 语言本身：当你调用一个类似 的函数时`obj.func()`，怎么可能里面`func()`的`this`关键字**没有绑定**到`obj`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T09:08:39.447

虽然其他答案处理您关于`this`关键字的问题，但它们并没有回答您关于为什么`apply`要使用的问题。这是踢球者：在该示例`apply`中未用于设置`this`关键字。相反，它被用来`arguments`作为`done`and`fail`函数的参数传递。

举个例子：

```
var x = {
    a: function(a1, a2, a3) {
        console.log(a1, a2, a3);
    }
}

function callA() {
    x.a.apply(x, arguments);
    x.a(arguments);
}

callA('red', 'blue', 'green'); 
```

`x.a.apply(x, arguments);`如果您执行此代码，您应该会看到和之间的区别`x.a(arguments);`。在第一个中`a1`，`a2`、 和`a3`是各自的颜色“红色”、“蓝色”和“绿色”。在第二个中，`a1`是一个类似数组的对象`[ "red", "blue", "green" ]`，`a2`并且`a3`是`undefined`。

同样，在您发布的示例`apply`中，用于`arguments`正确传递对象，而不是设置`this`关键字。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-25T09:09:00.683

> 我怀疑的不是 jQuery，而是 Javascript 语言本身：当你调用像 obj.func() 这样的函数时，怎么会在 func() 内部 this 关键字没有绑定到 obj？

好吧，唯一可能的方法是如果`obj.func`引用一个[`bound`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)函数，那么你如何调用它并不重要。在这种情况下，如何调用函数并不重要，是否调用`obj.func()`, `func()`, `func.call({})`,`func.apply({})`根本不重要。但是，我不确定提交与此有何关系。

为了澄清，我正在回答引用的问题，解释为：

给定这样的调用签名：`obj.func()`，怎么可能**不在**`this`调用的被调用函数内？ **`obj`**

 *** * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T08:51:48.683

这只能通过像这样从另一个对象引用函数来实现

```
obj2.func = obj.func;
obj2.func(); // 'this' now refers to obj2

var func2 = obj.func;
func2(); // 'this' now refers to the global window object 
```

或通过调用 .apply() 或 .call() 绑定`this`到任意对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T08:54:28.477

函数总是用接收器调用`this`，在函数内部调用，在调用时给出。

当你写作

```
obj.someFunc = function() {... 
```

你不是说 someFunc 必须有作为接收者 obj，你只是说 obj 有一个名为 someFunc 的属性，它的值是一个函数。

如果你这样做

```
var aFunc = obj.someFunc; 
```

喜欢在很多地方完成（例如引用回调），然后

```
 aFunc(); 
```

在这种情况下，接收器 ( `this`) 是窗口。

这是因为 javascript 中的函数与 java 之类的语言相反，是“第一类”对象，这意味着您可以将它们作为值传递，并且不绑定到唯一的预先指定的接收器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-25T08:57:00.563

我使用的简写版本是，`this`在 JavaScript 中总是指当前执行的函数是其方法的对象——除非在方法是回调的特殊情况下，当`this`指的是回调绑定到的对象（例如一个按钮）。

**编辑**：请注意，全局函数就像`window`对象的方法。

[这个 QuirksMode 页面](http://www.quirksmode.org/js/this.html)在我学习它时帮助了我。**

# asp.net - ASPX 中的 SQL 存储过程未执行

> ID：11186080
> 
> 赞同：0
> 
> 时间：2012-06-25T08:48:14.890
> 
> 标签：asp.net, sql-server, stored-procedures

我创建了一个存储过程来将 Excel 文件转换为 SQL Server 2008 R2。当我在 Visual Studio 2008 中对其进行测试时，它运行良好。

但是，当我在使用`SqlDataSource`控件的 ASPX 页面中使用存储过程时，虽然没有显示错误消息，但存储过程不会执行，也不会发生转换。这是 ASPX 代码：

```
<%@ Page Title="Home Page" Language="VB" MasterPageFile="~/Site.Master" 
         AutoEventWireup="false" CodeFile="Processing.aspx.vb" Inherits="_Default" %>
<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
         ConnectionString="<%$ ConnectionStrings:MyConnectionString %>" 
         SelectCommand="MyStoredProcedure" 
         SelectCommandType="StoredProcedure">
    </asp:SqlDataSource>
</asp:Content> 
```

SQL Server 存储过程代码：

```
ALTER PROCEDURE dbo.MyStoredProcedure 
AS

SELECT * 
INTO [dbo].[MySQLtable] 
FROM OPENROWSET('Microsoft.ACE.OLEDB.12.0', 'Excel 8.0;Database=C:\MyExceltable;', 
                'SELECT * FROM [Sheet1$]')
RETURN 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:00:02.013

你有：

```
SelectCommand="MyStoredProcedure" 
```

查看您的 SQL 脚本，这应该是：

```
SelectCommand="StoredProcedureExcelToSQL" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T08:57:29.143

aspx 页面是从服务器提供的吗？如果是这样，文件（MyExceltable）需要在服务器上而不是用户的机器上。

# android - 如何在android中挂载USB路径？

> ID：11186083
> 
> 赞同：4
> 
> 时间：2012-06-25T08:49:16.823
> 
> 标签：android, usb, mount

我正在使用 android tab`Ice Cream Sandwich`版本 4.0.3 来运行我的应用程序。我正在连接外部 USB 设备和 android Tab。如何以编程方式挂载外部 USB 设备的路径。因为我需要从 USB 设备浏览文件到我的 android 选项卡。

那么如何在android中挂载USB路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T08:58:46.667

我同意[user370305](https://stackoverflow.com/questions/11186083/how-to-mount-usb-path-in-android#comment14679674_11186083)。

您可以查看存储设置。挂载路径似乎在那里（例如，/mnt/usbdisk_1.0/）。此外，您也许可以只查看 /mnt 并查看列出的内容；我相信这就是各种文件管理器应用程序所做的。USB 驱动器似乎有许多挂载点；尚未安装的显示为空，而已安装的可让您浏览它们（使用诸如 Astro 之类的文件浏览器应用程序）。

通过[这个链接](http://community.developer.motorola.com/t5/Android-App-Development-for/What-s-the-USB-path-in-different-tablets/m-p/23590)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-11T12:34:16.600

[已经给出答案检查Android检测usb挂载点路径](https://stackoverflow.com/questions/34513537/android-detect-usb-mount-point-path/37162793#37162793)

```
 private String getAllStoragePath() {
    String finalPath = "";
    try {
        Runtime runtime = Runtime.getRuntime();
        Process process = runtime.exec("mount");
        InputStream inputStream = process.getInputStream();
        InputStreamReader inputStreamReader = new InputStreamReader(inputStream);
        String line;
        String[] pathArray = new String[4];
        int i = 0;

        BufferedReader br = new BufferedReader(inputStreamReader);
        while ((line = br.readLine()) != null) {
            String mount = "";
            if (line.contains("secure"))
                continue;
            if (line.contains("asec"))
                continue;

            if (line.contains("fat")) {// TF card
                String columns[] = line.split(" ");
                if (columns.length > 1) {
                    mount = mount.concat(columns[1] + "/someFiles");

                    pathArray[i++] = mount;

                    // check directory inputStream exist or not
                    File dir = new File(mount);
                    if (dir.exists() && dir.isDirectory()) {
                        // do something here
                        finalPath = mount;
                        break;
                    }
                }
            }
        }

        for(String path:pathArray){
            if(path!=null){
                finalPath =finalPath + path +"\n";
            }
        }

    } catch (Exception e) {
        e.printStackTrace();
    }
    return finalPath;
} 
```

# c++ - 返回值 char* 的函数返回垃圾

> ID：11186089
> 
> 赞同：0
> 
> 时间：2012-06-25T08:49:52.380
> 
> 标签：c++

我正在尝试构建一个可以重用的实用程序类，它可以转换`std::string to a char*`：

```
char* Foo::stringConvert(std::string str){
      std::string newstr = str;
      // Convert std::string to char*
      boost::scoped_array<char> writable(new char[newstr.size() + 1]);
      std::copy(newstr.begin(), newstr.end(), writable.get());
      writable[newstr.size()] = '\0'; 
      // Get the char* from the modified std::string
      return writable.get();
} 
```

当我尝试从 stringConvert 函数中加载输出时，该代码有效，但是在我的应用程序的其他部分使用时，此函数返回垃圾。

例如：

```
Foo foo;
char* bar = foo.stringConvert(str); 
```

上面的代码返回垃圾。这类问题有什么解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T08:51:13.690

我将假设`writable`是一个具有自动持续时间的对象，它破坏了`char*`它在析构函数中包含的内容——这是你的问题——无论`writable.get()`返回什么都不再有效。

只是返回 a `std::string`，你到底为什么需要 raw `char *`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T08:57:30.253

为什么不直接使用`std::string.c_str()`？这是一个库方法，可以满足您的需要。

# c - 关于错误“重新定义结构”的谜题

> ID：11186091
> 
> 赞同：2
> 
> 时间：2012-06-25T08:50:08.330
> 
> 标签：c, struct, case-sensitive, redefinition

我的 IDE 是[C-free 5.0](http://www.programarts.com/cfree_en/index.htm)，编译器是[MinGW](http://www.mingw.org/)。

我有两个文件：'list.h'，'list.c'

列表.h：

```
typedef int elementType; 
#ifndef _LIST_H
#define _LIST_H

struct node;

typedef struct node* ptrToNode;
typedef ptrToNode list;
typedef ptrToNode position;

list makeEmpty(list l);
#endif 
```

列表.c：

```
#include <stdio.h> 
#include "list.h"
#include <stdlib.h>

struct node{
    elementType element;
    position next;
};

list makeEmpty(list l){
if(l == NULL){
    //delete list
}
l = malloc(sizeof(struct node));
if(l == NULL){
    printf("fail to malloc memory");
    exit(-1);
}
l->next = NULL;
return l;
} 
```

我尝试编译这些文件然后出现错误

```
"list.c:5: redefinition of 'struct node'" 
```

然后我将所有的“**节点**”替换为“**节点**”，神奇的事情发生了！编译正常！我真的无法理解这一点。这可能与C库有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:59:30.467

至少对我来说，关于 struct 和 typedef 的事情可能非常令人困惑。由于 struct 在您使用 C++ 感知编译器时已经创建了一个类型，因此您必须重新编写您的语句。将定义推入标题而不是前向声明。就是这个“typedef struct node* ptrToNode;” 如果我没记错的话，它会创建双重声明。这里有很多很好的文章讨论关于 typedef 和结构的主题。祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-01T12:11:47.857

我认为这都是**编译器依赖**。它适用于视觉工作室。如果您不想将“node”重命名为“Node”，您可以尝试以下方式（我希望它能够工作，直到 MinGW 定义了自己的节点）：

列表.h：

```
typedef int elementType; 
#ifndef _LIST_H
#define _LIST_H

typedef struct node{
    elementType element;
    struct node* next;
}*ptrToNode;

//typedef struct node* ptrToNode;
typedef ptrToNode list;
typedef ptrToNode position;

list makeEmpty(list l);
#endif 
```

和你的清单.c

```
#include <stdio.h> 
#include "poly.h"
#include <stdlib.h>

list makeEmpty(list l){
if(l == NULL){
    //delete list
}
l = malloc(sizeof(struct node));
if(l == NULL){
    printf("fail to malloc memory");
    exit(-1);
}
l->next = NULL;
return l;
} 
```

# html - 文本垂直对齐

> ID：11186093
> 
> 赞同：1
> 
> 时间：2012-06-25T08:50:14.310
> 
> 标签：html, css, vertical-alignment

这是我的问题的图像：http: [//i48.tinypic.com/2roszr9.jpg](http://i48.tinypic.com/2roszr9.jpg)。我想问你是否知道如何将蓝色框中的数字居中，在绿色的中间。因此，如果绿色框中的文本更长，我想在此文本中间居中显示标题编号。这是代码：

```
<style>
.right-content-text {
    width: 235px;
}
.right-content-text p {
    background: red;
    float: left;
    width: 235px;
    height: auto;
}
span.index {
    background: blue;
    width: 35px;
    float: left;
    text-align: center;
    font-size: 14px;
    color: #373A40;
    font-weight: bold;
}
span.text {
    width:200px;
    background: green;
    vertical-align:middle;
    float: right;

}
span.text a {
    text-decoration: none;
    font-size: 14px;
    font-weight: normal;
    color: #373A40;

}   
</style>
<div class="right-content-text">
    <p><span class="index">2.</span><span class="text"><a href="#">Lorem ipsum dolor sit amet</a></span><div class="clear"></div></p>
    <p><span class="index">3.</span><span class="text"><a href="#">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</a></span><div class="clear"></div></p>
    <p><span class="index">4.</span><span class="text"><a href="#">Pellentesque aliquet pulvinar tortor, sed pretium nisl mollis eget. </a></span><div class="clear"></div></p>
    <p><span class="index">5.</span><span class="text"><a href="#">Fusce vestibulum molestie quam, et lacinia nibh egestas quis.</a></span><div class="clear"></div></p>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T08:53:12.893

嘿，现在你可以使用

`display: table-cell;`在您的文本课程中。

```
span.index {
    background: blue;
    width: 35px;
    display:table-cell;
    vertical-align:middle;

    text-align: center;
    font-size: 14px;
    color: #373A40;
    font-weight: bold;
}
span.text {
    width:200px;
    background: green;
    display:table-cell;
    vertical-align:middle;

} 
```

**现场演示** [http://jsfiddle.net/EHM5p/](http://jsfiddle.net/EHM5p/)

# c++ - 检查稠密图中是否存在汉密尔顿环

> ID：11186097
> 
> 赞同：2
> 
> 时间：2012-06-25T08:50:27.507
> 
> 标签：c++, graph, hamiltonian-cycle

先来几个定义：

定义 1

> 如果对于每对不相邻的顶点 u 和 v，d(u) + d(v)>=n，其中 n = |V|，则图 G = (V, E) 称为“密集”。d(*) 表示顶点的度数 *

定义 2

> G 上的“哈密顿循环”是一个顶点序列 (vi1, vi2,....vin, vi1) 使得 vil != vih 对所有 l!=h 和 {vil, vil} 是 G 的一条边.

问题是：编写一个程序，给定一个稠密的无向图 G = (V; E) 作为输入，确定 G 是否承认 G 上的哈密顿循环并输出该循环，如果有的话，或者输出“N”如果没有。

我的解决方案是查找从源开始的所有可能路径，并检查是否存在返回该源的路径。不幸的是，这个解决方案效率不高。

有什么建议么？谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T09:00:36.547

根据[Ore's theorem](http://en.wikipedia.org/wiki/Ore%27s_theorem)，满足定义 1 的图总是有一个哈密顿循环，而[Palmer 的算法](http://en.wikipedia.org/wiki/Ore%27s_theorem#Algorithm)会给你一个 O(n ² )。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-25T08:54:01.390

问题是NP难的。所以我不希望任何解决方案比蛮力更快。

# php - 如何使用 Symfony 生成模块后端菜单？

> ID：11186100
> 
> 赞同：0
> 
> 时间：2012-06-25T08:50:45.887
> 
> 标签：php, symfony-1.4

我正在做一个旧项目！后端正常生成，有一个菜单。现在我想添加一些模块，然后为了减少所有模块链接占用的空间，生成一个带有子菜单的菜单。子菜单可以是模块链接的集合或只是一个模块链接。

如何使用 symfony 生成它？

有没有办法在 symfony 中自定义后端菜单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:47:00.680

你说的是 symfony 1.4 吗？我知道的唯一方法是生成您需要的所有模块，然后使用您需要的 HTML 代码和 JS 手动创建链接、菜单和子菜单。

# android - android didUpdateHeading（位置管理器）？

> ID：11186104
> 
> 赞同：5
> 
> 时间：2012-06-25T08:51:06.840
> 
> 标签：android, locationmanager

是否有 Android 相当于 didUpdateHeading （来自 iOS）？任何使用它来旋转地图视图的示例代码？

搜索了很多，但找不到有用的提示。

提前致谢。

编辑：让我解释一下我的问题：在 IOS 中，当设备更改其标题时，委托对象会调用其方法：“didUpdateHeading”。在 Android 中，我可以找到“onLocationChanged”来获取坐标，但没有标题信息。如何在 Android 中获取航向信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T13:49:31.723

```
package com.exercise.AndroidCompass;

import java.util.List;

import android.app.Activity;
import android.content.Context;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.os.Bundle;
import android.widget.Toast;

public class AndroidCompass extends Activity {

private static SensorManager mySensorManager;
private boolean sersorrunning;
private MyCompassView myCompassView;

 /** Called when the activity is first created. */
 @Override
 public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.main);

     myCompassView = (MyCompassView)findViewById(R.id.mycompassview);

     mySensorManager = (SensorManager)getSystemService(Context.SENSOR_SERVICE);
     List<Sensor> mySensors = mySensorManager.getSensorList(Sensor.TYPE_ORIENTATION);

     if(mySensors.size() > 0){
      mySensorManager.registerListener(mySensorEventListener, mySensors.get(0), SensorManager.SENSOR_DELAY_NORMAL);
      sersorrunning = true;
      Toast.makeText(this, "Start ORIENTATION Sensor", Toast.LENGTH_LONG).show();

     }
     else{
      Toast.makeText(this, "No ORIENTATION Sensor", Toast.LENGTH_LONG).show();
      sersorrunning = false;
      finish();
     }
 }

 private SensorEventListener mySensorEventListener = new SensorEventListener(){

@Override
public void onAccuracyChanged(Sensor sensor, int accuracy) {
 // TODO Auto-generated method stub

}

@Override
public void onSensorChanged(SensorEvent event) {
 // TODO Auto-generated method stub
 myCompassView.updateDirection((float)event.values[0]);
}
 }; 
```

来源：[http ://android-er.blogspot.com/2010/08/simple-compass-sensormanager-and.html](http://android-er.blogspot.com/2010/08/simple-compass-sensormanager-and.html)

[http://developer.android.com/reference/android/hardware/SensorManager.html](http://developer.android.com/reference/android/hardware/SensorManager.html)

应该是你要找的。该`OnSensorChanged`方法应提供相同的功能。`(float)event.values[0]`是你的标题。

只需阅读您的赏金文本。这是唯一的方法，从我所研究的一切，以及我的一般经验来看。但是，我提供的示例将通过复制和粘贴快速为您提供所需的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T12:19:09.187

如果您需要实时航向，那么您应该使用@jack57 的答案并使用设备中的 G 传感器。

如果您在获得新位置时只需要航向，则可以使用 获取`Location.getBearing()`，但请注意，这仅适用于 GPS 坐标，如果您从 获取坐标`LocationManager.NETWORK_PROVIDER`，则方位将为 0。

# java - 从 ip 摄像机捕获视频

> ID：11186105
> 
> 赞同：2
> 
> 时间：2012-06-25T08:51:09.710
> 
> 标签：java, video-streaming, ip-camera

我正在尝试将 ip camera 中的视频捕获到我的应用程序中，但它给出了异常

```
com.sun.image.codec.jpeg.ImageFormatException: Not a JPEG file: starts with 0x0d 0x0a
    at sun.awt.image.codec.JPEGImageDecoderImpl.readJPEGStream(Native Method)
    at sun.awt.image.codec.JPEGImageDecoderImpl.decodeAsBufferedImage(Unknown Source)
    at test.AxisCamera1.readJPG(AxisCamera1.java:130)
    at test.AxisCamera1.readMJPGStream(AxisCamera1.java:121)
    at test.AxisCamera1.readStream(AxisCamera1.java:100)
    at test.AxisCamera1.run(AxisCamera1.java:171)
    at java.lang.Thread.run(Unknown Source) 
```

它在 image = decoder.decodeAsBufferedImage(); 处给出异常；

这是我正在尝试的代码

```
private static final long serialVersionUID = 1L;
    public boolean useMJPGStream = true;
    public String jpgURL = "http://ip here/video.cgi/jpg/image.cgi?resolution=640×480";
    public String mjpgURL = "http://ip here /video.cgi/mjpg/video.cgi?resolution=640×480";
    DataInputStream dis;
    private BufferedImage image = null;
    public Dimension imageSize = null;
    public boolean connected = false;
    private boolean initCompleted = false;
    HttpURLConnection huc = null;
    Component parent;

    /** Creates a new instance of AxisCamera */
    public AxisCamera1(Component parent_) {
        parent = parent_;
    }

    public void connect() {
        try {
            URL u = new URL(useMJPGStream ? mjpgURL : jpgURL);
            huc = (HttpURLConnection) u.openConnection();

            // System.out.println(huc.getContentType());
            InputStream is = huc.getInputStream();

            connected = true;
            BufferedInputStream bis = new BufferedInputStream(is);
            dis = new DataInputStream(bis);
            if (!initCompleted)
                initDisplay();
        } catch (IOException e) { // incase no connection exists wait and try
                                    // again, instead of printing the error
            try {
                huc.disconnect();
                Thread.sleep(60);
            } catch (InterruptedException ie) {
                huc.disconnect();
                connect();
            }
            connect();
        } catch (Exception e) {
            ;
        }
    }

    public void initDisplay() { // setup the display
        if (useMJPGStream)
            readMJPGStream();
        else {
            readJPG();
            disconnect();
        }
        imageSize = new Dimension(image.getWidth(this), image.getHeight(this));
        setPreferredSize(imageSize);
        parent.setSize(imageSize);
        parent.validate();
        initCompleted = true;
    }

    public void disconnect() {
        try {
            if (connected) {
                dis.close();
                connected = false;
            }
        } catch (Exception e) {
            ;
        }
    }

    public void paint(Graphics g) { // used to set the image on the panel
        if (image != null)
            g.drawImage(image, 0, 0, this);
    }

    public void readStream() { // the basic method to continuously read the
                                // stream
        try {
            if (useMJPGStream) {
                while (true) {

                    readMJPGStream();
                    parent.repaint();
                }
            } else {
                while (true) {
                    connect();
                    readJPG();
                    parent.repaint();
                    disconnect();

                }
            }

        } catch (Exception e) {
            ;
        }
    }

    public void readMJPGStream() { // preprocess the mjpg stream to remove the
                                    // mjpg encapsulation
        readLine(3, dis); // discard the first 3 lines
        readJPG();
        readLine(2, dis); // discard the last two lines
    }

    public void readJPG() { // read the embedded jpeg image
        try {

            JPEGImageDecoder decoder = JPEGCodec.createJPEGDecoder(dis);
            image = decoder.decodeAsBufferedImage();

        } catch (Exception e) {
            e.printStackTrace();
            disconnect();
        }

    }

    public void readLine(int n, DataInputStream dis) { // used to strip out the
                                                        // header lines
        for (int i = 0; i < n; i++) {
            readLine(dis);
        }
    }

    public void readLine(DataInputStream dis) {
        try {
            boolean end = false;
            String lineEnd = "\n"; // assumes that the end of the line is marked
                                    // with this
            byte[] lineEndBytes = lineEnd.getBytes();
            byte[] byteBuf = new byte[lineEndBytes.length];

            while (!end) {
                dis.read(byteBuf, 0, lineEndBytes.length);
                String t = new String(byteBuf);
                System.out.print(t); // uncomment if you want to see what the
                                        // lines actually look like
                if (t.equals(lineEnd))
                    end = true;
            }
        } catch (Exception e) {
            e.printStackTrace();
        }

    }

    public void run() {
        System.out.println("in Run...................");
        connect();
        readStream();
    }

    @SuppressWarnings("deprecation")
    public static void main(String[] args) {

        JFrame jframe = new JFrame();
        jframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        AxisCamera1 axPanel = new AxisCamera1(jframe);
        new Thread(axPanel).start();
        jframe.getContentPane().add(axPanel);
        jframe.pack();
        jframe.show();
    }

} 
```

有什么建议我在这里做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T09:13:14.990

jpeg 魔术代码是“0xff 0xd8”而不是“0x0d 0x0a”（参见 [1]），这就是您的代码失败的原因。也许您在 readMJPGStream() 中删除行的代码部分太饿了:)

[1] [http://en.wikipedia.org/wiki/JPEG](http://en.wikipedia.org/wiki/JPEG)

# c++ - 需要一些源代码测试/评估工具的想法

> ID：11186110
> 
> 赞同：-1
> 
> 时间：2012-06-25T08:51:22.767
> 
> 标签：c++, c

我正在从事一个大学项目，其中包括测试学生提交的源代码。我是计算机专业的学生，​​和其他任何学院一样，我们会使用 C/C++/Java/Php 等语言解决一些简单的问题

例如。如果满足条件，则创建一个返回 false 或 true 的方法：

1) 条件 1

2)条件2

3) 条件 3

教授必须检查每个代码并相应地给出分数。所以我打算为此开发一个解决方案。是否可以使用某些工具自动化该过程。

还是我必须自己制作这样的应用程序（我想这不会那么容易）。如果需要更多信息，请询问。请帮我解决这个问题。只是一个想法。

只是想清除它不是家庭作业。我想开发这个应用程序，这样我就可以学到更多东西，它甚至可能对我的教授有所帮助。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T08:59:35.403

试试 Praktomat：http: [//sourceforge.net/projects/praktomat/](http://sourceforge.net/projects/praktomat/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:31:52.633

Google 有一个 C/C++ 测试框架。
您可以阅读并在此处获取：[http ://code.google.com/p/googletest/](http://code.google.com/p/googletest/)

# connection - 强制 html5 appcache 在连接不良时加载

> ID：11186113
> 
> 赞同：4
> 
> 时间：2012-06-25T08:51:36.710
> 
> 标签：connection, offline, html5-appcache

我创建了一个带有离线应用程序缓存的 webapp，它在飞行模式下运行良好，但是当我连接不良时，它会继续尝试加载正常站点，因为连接并没有完全失效。

是否可以通过使用 navigator.connection 属性来强制 webapp 在连接不良时使用 appcache（回退）？

发送！

# c# - 在 Windows phone 中跨页面使用值的最佳方式是什么？

> ID：11186121
> 
> 赞同：0
> 
> 时间：2012-06-25T08:52:06.153
> 
> 标签：c#, xaml, windows-phone-7.1

基本上我在第 1 页中获得了一些值，然后我需要在第 3 页和第 5 页中使用它。

所以我使用以下代码存储这些值。

```
if (!PhoneApplicationService.Current.State.ContainsKey(key))
   PhoneApplicationService.Current.State.Add(key, value);
else
   PhoneApplicationService.Current.State[key] = value; 
```

然后我将在第 3 页和第 5 页中检索它。

我将使用超过 50 - 100 个对象来使用上述代码。那么它会导致内存泄漏吗？...

或者有人建议我在不使用上述方法的情况下跨页面使用变量 [第 1 页到第 3 页]？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:01:23.703

也许您应该尝试实现 MVVM 模式并将所有页面绑定到单个 ViewModel，因此每个页面都可以访问相同的“状态”

[http://msdn.microsoft.com/en-us/library/gg521153(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/gg521153(v=vs.92).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T04:29:23.387

是变量修复的数量吗？如果是，也许您可​​以在 App.cs 中创建全局变量并将值保存到这些全局变量中，并在导航到这些页面后检索它们。

# c# - 创建FileStream.Open的接口c#

> ID：11186122
> 
> 赞同：1
> 
> 时间：2012-06-25T08:52:18.183
> 
> 标签：c#, .net

我正在尝试创建 FileStream.Open 方法的接口。我已经开始但有点困惑：

```
public interface IFileDataSource
{
    FileStream Open(string path,
                 FileMode mode,
                 FileAccess access,
                 FileShare share);
} 
```

我需要包装这是另一个类才能使用这个接口吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T08:55:05.693

您不需要“包装”它 - 但您确实需要*实现*它才能使用它。大概你会写一个简单的实现，它只是委托给`File.Open`：

```
public class BclFileDataSource : IFileDataSource
{
    public FileStream Open(string path,
                           FileMode mode,
                           FileAccess access,
                           FileShare share)
    {
        return File.Open(path, mode, access, share);
    }
} 
```

# java - JodaTime toDate 给出错误的日期

> ID：11186125
> 
> 赞同：2
> 
> 时间：2012-06-25T08:52:26.133
> 
> 标签：java, date, jodatime

今天我在代码中发现了一个非常神秘的错误。我使用 JodaTime 库已经有一段时间了，从那以后它就一直保持一致。

```
DateTime dateTime = DateHelper.formatDateTime("25/06/2012");
TestHelper.spot(dateTime);
TestHelper.spot(dateTime.toDate()); 
```

结果 -

```
2012-06-25T00:00:00.000+05:30
Mon Jun 25 00:00:00 IST 2012 
```

但是在不同的java应用程序中 -

```
2012-06-25T00:00:00.000+05:30
Sun Jun 24 18:30:00 GMT 2012 
```

## DateHelper.formatDateTime() 方法

```
public static DateTime formatDateTime(String text) {
    DateTimeFormatter format = DateTimeFormat.forPattern("dd/MM/yyyy");
    return format.parseDateTime(text);
} 
```

我怀疑的唯一问题是格式（GMT 和 IST）。我能做些什么来保持一致性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:43:46.353

这两个值代表相同的时刻。由于时区不同，它们的渲染方式不同。这*纯粹*是渲染问题；再一次，他们是*同一时间*。

为了可靠地将 a 转换`DateTime`为一致的“人类可读”字符串，您需要在渲染时指定时区、格式和语言环境：

```
String rendered = dateTime.withZone(DateTimeZone.UTC)
                          .toString("EEE MMM dd HH:mm:ss zzz yyyy", Locale.US); 
```

当然，`ISODateTimeFormat`如果您希望计算机解析结果，则应该使用；在紧要关头，这既一致又有点人类可读。（它也很容易排序。）只有在可读性比其他任何事情都重要时才使用其他格式。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-25T09:26:26.943

我放了一个VM参数说明

```
-Duser.timezone="+05:30" 
```

在我删除它之后，一切都正常工作。但现在的问题是我无法连接到 Oracle 9i 数据库。它给了我以下错误。

```
java.sql.SQLException: ORA-00604: error occurred at recursive SQL level 1
ORA-01882: timezone region  not found 
```

# amazon-web-services - 在 aws elastic beanstalk 上上传 java/spring/hibernate Web 应用程序

> ID：11186132
> 
> 赞同：1
> 
> 时间：2012-06-25T08:52:53.747
> 
> 标签：amazon-web-services, amazon-elastic-beanstalk

我想在 aws elastic beanstalk 上使用本地数据库上传我的 java web 应用程序。
到目前为止我做了什么：

1.  我有一个aws帐户
2.  我在 aws beanstalk 上创建了一个应用程序
3.  为此推出了新环境。

但这些都不起作用。任何人都可以告诉我必要的步骤，请。
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T05:12:05.363

现在它正在工作，我做了什么
1\. 上传 war 文件并为此创建一个环境，检查你的 WAR 文件是否在本地工作，否则它可能会在亚马逊上产生健康检查问题。
2.在rds中创建数据库。
3.都应该在同一个地区。4.检查EC2是否为它创建新实例，如果是，它将正常工作。5\. 现在点击 aws 提供的应用程序 url。

# javascript - 从外部脚本将图像/swf 写入页面

> ID：11186135
> 
> 赞同：0
> 
> 时间：2012-06-25T08:53:08.863
> 
> 标签：javascript, jquery

我目前正在处理广告网络的一些代码，我已经完成了主要的 PHP 后端，但正在努力处理广告/图像/swf 的实际服务。

我曾尝试使用 document.write，但这似乎摆脱了整个身体，这是意料之中的。但是，查看其他广告网络的代码，似乎有些人用这个来。

我尝试过创建一个元素；

```
 var element = document.createElement('div');

 element.innerHTML = '<a href="'+url+'"><img src="'+path+'"></a>'; 
```

有谁知道我如何将广告写入页面，广告代码放置在哪里？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:06:26.483

这就是我目前的做法，而且效果很好：

这是我提供给用户的代码，可以放在他们的网站上

```
<script type="text/javascript" src="http://yoursite.com/serve.php"></script> 
```

在 serve.php 中，我只是简单地回显了我想要包含在`<a>`标签中的广告图片

```
document.write('<a href="<?php echo $redirect_url ?>" target="blank"><img src="<?php echo $imageFile ?>" border="0" /></a>'); 
```

# android - 自定义列表视图的最后一行

> ID：11186138
> 
> 赞同：0
> 
> 时间：2012-06-25T08:53:25.623
> 
> 标签：android, listview, customization

我有一个 ListView，其中包含 1 个图像 + 2 个文本 + 1 个图像。这是我的 listview xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_height="20dp"
   android:gravity="left|center"
   android:layout_width="wrap_content"
   android:paddingLeft="5dp"
   android:paddingRight="5dp"
   android:background="@color/list_bg"
   >

    <ImageView
       android:id="@+id/avatar"
       android:layout_width="wrap_content"
       android:layout_height="48dp"
       android:layout_marginTop="10dp"
       android:layout_alignParentLeft="true"/>

    <LinearLayout
       android:orientation="vertical"
       android:layout_width="wrap_content"
       android:layout_height="48dp"
       android:layout_toRightOf="@+id/avatar"
       android:layout_marginLeft="5dp"
       android:layout_marginTop="5dp"
       >

    <TextView android:id="@+id/listitem1"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_marginTop="2dp"
      android:textColor="@drawable/textblack_selected"
      android:textSize="18dp"
      android:textStyle="bold" 
      />
    <TextView android:id="@+id/listitem2"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:textColor="@drawable/textorange_selected"
      />

    </LinearLayout>

    <ImageView
       android:id="@+id/arrowImage"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_marginTop="25dp"
       android:layout_alignParentRight="true"
       android:src="@drawable/arrow_selector"/>
</RelativeLayout> 
```

我需要从最后一行删除最后一个图像（箭头）。在我的适配器中，我尝试使用它：

```
if (position == 4) lastimg.setImageResource(0);

but nothing changed.Here is my adapter:

public class UserItemAdapter extends ArrayAdapter < UserRecord > {
    private ArrayList < UserRecord > users;

    public UserItemAdapter(Context context, int textViewResourceId, ArrayList < UserRecord > users) {
        super(context, textViewResourceId, users);
        this.users = users;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        if (v == null) {
            LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.mainmenurowlist, null);
        }

        UserRecord user = users.get(position);
        if (user != null) {
            TextView listitem1 = (TextView) v.findViewById(R.id.listitem1);
            TextView listitem2 = (TextView) v.findViewById(R.id.listitem2);

            if (listitem1 != null) {
                listitem1.setText(user.listitem1);
            }

            if (listitem2 != null) {
                listitem2.setText(user.listitem2);
            }
        }

        firstimg = (ImageView) v.findViewById(R.id.avatar);
        lastimg = (ImageView) v.findViewById(R.id.arrowImage);

        firstimg.setImageResource(FirstImage[position]);
        if (position == 4) {
            lastimg.setImageResource(0);
            System.out.println("Exit!!");
        }
        return v;
    }
}

public class UserRecord {
    public String listitem1;
    public String listitem2;

    public UserRecord(String listitem1, String listitem2) {
        this.listitem1 = listitem1;
        this.listitem2 = listitem2;
    }
}
} 
```

有谁知道我该如何解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T09:15:49.253

试试这样

```
if(position == (data_id.size()-1))
{
  lastimg.setVisibility(View.INVISIBLE);
} 
```

这里 data_id 只是一个数组列表

或尝试如下

```
if(position == 4)
{
  lastimg.setVisibility(View.INVISIBLE);
} 
```

两者都必须相同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T09:14:59.163

在 getView() 方法中使用这种方式

```
if((users.size()-1)==position){
   // do here your stuff what u want on last item of listview
 }else{
  // do here your stuff what u want on each item of listview except last item
 } 
```

# ruby-on-rails - 在 rails 应用程序中集成acts_as_rated 插件

> ID：11186140
> 
> 赞同：1
> 
> 时间：2012-06-25T08:53:26.967
> 
> 标签：ruby-on-rails, rating

我正在 Rails 中创建一个用户板应用程序，其中用户拥有任意数量的板并可以对板进行**评分**。我想在我的 rails 应用程序中安装**acts_as_rated插件。**由于这不能作为 gem 使用，我使用以下命令将其安装为插件：

```
rails plugin install svn://rubyforge.org/var/svn/acts-as-rated/trunk/acts_as_rated 
```

此命令在供应商目录中安装所有必需的插件文件。接下来，我在**Boards**模型中包含以下代码

```
class Board < ActiveRecord::Base
  acts_as_rated
end 
```

接下来我重新启动控制台并运行以下命令

```
u=User.first
 => #<User id: 1, first_name: "taroon", created_at: "2012-03-26 09:18:20", updated_at: "2012-03-26 09:18:20">

b=Board.first
 => #<Board id: 1, name: "boards_1", created_at: "2012-03-26 09:19:39", updated_at: "2012-03-26 09:19:39"> 

b.rate 5, u 
```

它给了我以下**错误**

```
ActiveRecord::StatementInvalid: Could not find table 'ratings'
from /home/swati/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.0.10/lib/active_record/connection_adapters/sqlite_adapter.rb:295:in `table_structure'
from /home/swati/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.0.10/lib/active_record/connection_adapters/sqlite_adapter.rb:186:in `columns'
from /home/swati/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.0.10/lib/active_record/base.rb:685:in `columns'
from /home/swati/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.0.10/lib/active_record/base.rb:698:in `column_names'
from /home/swati/projects/test_projects/dummy_project/vendor/plugins/acts_as_rated/lib/acts_as_rated.rb:193:in `rate'
from (irb):6
from /home/swati/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.0.10/lib/rails/commands/console.rb:44:in `start'
from /home/swati/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.0.10/lib/rails/commands/console.rb:8:in `start'
from /home/swati/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.0.10/lib/rails/commands.rb:23:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

我检查了迁移，但没有创建**评级**表的迁移。我也不知道这张表中的字段。

任何人都可以请建议我解决这个问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:01:33.037

[act_as_rated](https://github.com/jasherai/acts-as-rated)插件的 README说您需要根据此文件进行自己的迁移：`test/fixtures/migrations/001_add_rating_tables.rb`.

从自述文件中引用：

> 该文件`test/fixtures/migrations/001_add_rating_tables.rb` 显示了所有类型的迁移选项的示例。
> 
> 另请参阅有关如何声明 act_as_rated 方法的详细文档，以及有关如何生成迁移列/文件以及如何使用它的其余文档。

[所以从这里](http://rubyforge.org/frs/?group_id=3011)下载并解压你的模块，然后你可以找到相应的文件，你可以自己做迁移。

# ajax - atk4 错误无法切割名称=...的对象，未初始化

> ID：11186145
> 
> 赞同：0
> 
> 时间：2012-06-25T08:53:44.173
> 
> 标签：ajax, atk4

在敏捷工具包中，我显示了一组视图，并且在视图中，将外部 div 设置为 id=

```
 1 <div id='<?$_name?>' class='taskrow'>
  2   <div class=fleft nomargin>
  3     <?$Story?>
  4   </div>
  5   <div class='container'>
  6     <div id='<?$workspace?>' class='workspace'>
    ..
  34 </div> 
```

在页面中，我有一个从 mysql 检索数据并将其添加到页面的 foreach 循环。同时，它将$p->add的返回值存储到一个数组中，以id为key。

```
 foreach ($st as $row) {
        if (is_array($row)) {
            $storyid=$row[0];
            $scrumrow[$storyid]=$p->add('View_StoryRow')
               ->setWorkspace('ws-'.$storyid); 
```

当执行一个动作（在屏幕上拖动一个元素）时，我刷新页面并且一个 get 块将一些更新应用于数据库。然后我有以下代码来更新视图（这是执行操作的行）

```
 if($_GET['task'] && $_GET['status'])
   {
          .. do database updates here ..
          $js[]=$scrumrow[$ajaxstory]->js()->reload();
  //      $js[]=$p->js()->reload(array('member'=>$member, 'sprint'=>$sprint));

          $this->js(null,$js)->execute();
   } 
```

如果我注释掉 $scrumrow[$ajaxstory] ​​行并使用注释行刷新整个页面，它可以工作，但速度很慢（大约 12 秒），因为屏幕上有很多数据，但是当尝试只刷新查看，我收到标题中的错误，“无法剪切带有名称的对象......它没有被初始化。

![在此处输入图像描述](../Images/3fc027dec940c05b699bd517ea566575.png)

更新是在数据库中完成的，所以如果我手动刷新页面，它会起作用，并且错误确实出现在我想要刷新的行的位置，并且确实给出了正确的行名称（如使用 firebug 的 ID 所示）但是我错过了什么？如何初始化页面中已有的对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:39:38.790

我添加了

```
$p->api->memorize('scrumrow',$scrumrow); 
```

就在 if ($-GET[]..) 块之前，然后添加

```
$scrumrow=$p->api->recall('scrumrow'); 
```

在我对页面中的 $scrumrow 进行任何填充之前。

它确实更新了行，因此这回答了原始问题 - 当 ajax 正在绘制页面的一部分时，它会丢失数组并且不会重建它。

它确实会导致一些副作用，例如没有为新行重新执行拖放操作，而且奇怪的是，在 ajax 行刷新后通过菜单链接单击任何其他页面时，我也遇到了以下错误。

低级错误：类 Model_Table 未在 include_once() 的包含文件中定义

认为我会坚持刷新整个页面（因为只有刷新行存在另一个功能问题）所以我需要弄清楚为什么执行 POST 和 GET 需要 12 秒。

# text - 点击文本链接 selenium rc

> ID：11186148
> 
> 赞同：1
> 
> 时间：2012-06-25T08:53:52.803
> 
> 标签：text, selenium, hyperlink, click, selenium-rc

我在 Eclipse 中使用 selenium rc 和 testNG。我需要点击文本链接。这是我的页面的源代码：

```
<script type="text/javascript"> 
dmenu = new dTree('dmenu');
dmenu.add(0,-1,'');
dmenu.add(1,0,'<b>World</b>','','');
... 
```

在开发工具中，代码如下所示：

```
 <link type="text/css" href="../css/dtree.css" rel="StyleSheet"/>
   <script src="../script/dtree.js" type="text/javascript"/>
    <div class="dtree">
      <script type="text/javascript"> dmenu = new dTree('dmenu'); dmenu.add(0,-1,''); dmenu.add(1,0,'<b>World</b>','',''); ................
       <div class="dtree">
        <div id="ddmenu0" class="clip" style="display:block;">
         <div class="dTreeNode">
           <a class="node" href="javascript: dmenu.o(1);">
             <b>World</b>
           </a> 
```

我尝试这样的事情`selenium.click("xpath=//b[contains( text(),'World')]");`，但得到错误elememt not found。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:48:11.137

您可以使用其类作为 xpath 来单击该链接。IE，

```
selenium.click("class=node"); 
```

试一次。

# c# - 富文本框如何在不选择的情况下突出显示文本块

> ID：11186154
> 
> 赞同：3
> 
> 时间：2012-06-25T08:54:21.350
> 
> 标签：c#, .net, winforms, richtextbox

我需要在 RTB 中突出显示我的文本的特定部分，而不是在更改字体样式/颜色的意义上，而是在使用特定颜色进行块选择的意义上。这类似于 Visual Studio 在调试模式下突出显示一行的方式。

这里重要的是在不使用richtextbox.select函数的情况下实现上述**功能**，因为我拥有的richtextbox会定期更新，如果它在每次更新时调用select函数，用户将很难拖动文本而我不这样做不希望发生这种情况。

我在编辑 rtf 的某个地方听到了一个解决方案，但我不完全确定如何做到这一点。我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T09:07:12.007

编辑：刚刚意识到的问题是针对winforms的。以下答案适用于 WPF，而不是删除我会留下它，以防有人发现它有用。

使用 TextRange(...) 获取文本并应用 Background 例如：

```
TextRange tr = new TextRange(position, nextPosition);
var Br = new SolidColorBrush(Color.FromScRgb(alpha, 1f, 1f, 0f));
tr.ApplyPropertyValue(TextElement.BackgroundProperty, Br); 
```

但也许您应该研究一下您的更新机制并提出更好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T10:12:19.997

这不使用富文本框的 Select() 函数。它只是在那些坐标中使用`start and end index`选择的 适当的。`and updates the region``with``colour`

```
 // change the co-ordinates as per the selection in the run-time 
    richTextBox1.Text = "Select some text";
    richTextBox1.SelectionStart = 0;
    richTextBox1.SelectionLength = 4;
    richTextBox1.SelectionBackColor = Color.LightBlue; 
```

`Sele`将在`Light Blue`上面的代码中被选中。

# php - 正则表达式替换一对美元符号

> ID：11186155
> 
> 赞同：1
> 
> 时间：2012-06-25T08:54:21.607
> 
> 标签：php, regex, markdown, mathjax

我已经结合了**MathJax**和**Markdown**标记，因此我需要将所有标记替换`$$`为，`<span>$$</span>`以便 Markdown 不会呈现来自 MathJax 的 $$_^... 符号。也`\[ \]`必须全部替换为`<div>\[ \]</div>`.

我发现了类似的[问题](https://stackoverflow.com/questions/10556373/text-between-two-dollar-signs-javascript-regex)，但这并不是我所需要的。我需要转换这个

```
This is $some$ math \[equation\] which I $like$. 
```

对此

```
This is <span>$some$</span> math <div>\[equation\]</div> which I <span>$like$</span>. 
```

可能我需要做的只是在正则表达式中

```
text = text.replace(/\$.*?\$/g, "meow"); 
```

不知何故包括和`$$`标志（或`\[ \]`），只是`$1`将文本嵌入其中`<span>$$1$</span>`并适应PHP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T08:59:03.100

您需要分两步完成，因为替换文本不同。

首先，更换`$..$`：

```
$text = preg_replace('/\$.*?\$/', '<span>\0</span>', $text); 
```

然后，替换`\[...\]`：

```
$text = preg_replace('/\\\\\[.*?\\\\\]/', '<div>\0</div>', $text); 
```

# list - SharePoint“列表不存在”

> ID：11186163
> 
> 赞同：0
> 
> 时间：2012-06-25T08:54:43.627
> 
> 标签：list, sharepoint, sharepoint-2007, sharepoint-list

好的，我似乎是唯一代表 Health Service 管理 SharePoint 网站的管理员。然而，由于它与政府相关联，所以有人免费制作了这个网站。我还假设他自己制作了一些网络部件。

其中一个 Web 部件是 FAQ Webpart，它使您能够创建具有精美格式的常见问题解答。但是，现在每当我尝试制作常见问题解答时，我都可以选择它，它现在可以进行编辑了。但是现在当我去修改它时，它会带我到一个错误页面，上面写着：

“列表不存在

您选择的页面包含一个不存在的列表。它可能已被其他用户删除。解决 Windows SharePoint Services 的问题。”

有谁知道如何找出 webpart 正在寻找什么。这个列表叫什么，所以我可以再做一个来代替它？尝试在页面的“.aspx”中查找，但它没有在 webpart 上保留任何信息。任何想法或指示都会非常有用。

感谢您的关注

```
 <webParts>
     <webPart xmlns="http://schemas.microsoft.com/WebPart/v3">
        <metaData>
          <type         name="Microsoft.SharePoint.Publishing.WebControls.ContentByQueryWebPart,         Microsoft.SharePoint.Publishing, Version=12.0.0.0, Culture=neutral,         PublicKeyToken=71e9bce111e9429c" />
  <importErrorMessage>Cannot import this Web Part.</importErrorMessage>
</metaData>
<data>
  <properties>
    <property name="FilterType3" type="string" />
    <property name="PageSize" type="int">-1</property>
    <property name="SortBy" type="string">{8c06beca-0777-48f7-91c7-6da68bc07b69}</property>
    <property name="ChromeState" type="chromestate">Normal</property>
    <property name="AllowZoneChange" type="bool">True</property>
    <property name="ContentTypeBeginsWithId" type="string" />
    <property name="ServerTemplate" type="string">100</property>
    <property name="Height" type="string" />
    <property name="FilterField2" type="string" />
    <property name="SystemViewFields" type="string" />
    <property name="ParameterBindings" type="string" />
    <property name="FeedTitle" type="string" />
    <property name="AllowMinimize" type="bool">True</property>
    <property name="ContentTypeName" type="string" />
    <property name="TitleUrl" type="string" />
    <property name="AllowConnect" type="bool">True</property>
    <property name="DisplayColumns" type="int">1</property>
    <property name="XslLink" type="string" null="true" />
    <property name="ExportMode" type="exportmode">All</property>
    <property name="GroupBy" type="string" />
    <property name="DataSourcesString" type="string" />
    <property name="WebUrl" type="string">/sites/cerner</property>
    <property name="AllowHide" type="bool">True</property>
    <property name="AdditionalGroupAndSortFields" type="string" null="true" />
    <property name="FeedDescription" type="string" />
    <property name="WebsOverride" type="string" />
    <property name="CommonViewFields" type="string">Title,Text;Answer,Note;SME,Text</property>
    <property name="DisplayName" type="string" />
    <property name="ChromeType" type="chrometype">None</property>
    <property name="AdditionalFilterFields" type="string" null="true" />
    <property name="NoDefaultStyle" type="string" />
    <property name="FilterValue3" type="string" />
    <property name="BaseType" type="string" />
    <property name="FireInitialRow" type="bool">True</property>
    <property name="SortByDirection" type="Microsoft.SharePoint.Publishing.WebControls.ContentByQueryWebPart+SortDirection, Microsoft.SharePoint.Publishing, Version=12.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c">Desc</property>
    <property name="DataFields" type="string" />
    <property name="GroupStyle" type="string">DefaultHeader</property>
    <property name="DataColumnRenames" type="string" />
    <property name="HeaderXslLink" type="string">/Sites/cerner/Style Library/XSL Style Sheets/FAQHeader.xsl</property>
    <property name="AllowEdit" type="bool">True</property>
    <property name="MissingAssembly" type="string">Cannot import this Web Part.</property>
    <property name="HelpUrl" type="string" />
    <property name="ViewFieldsOverride" type="string" />
    <property name="FilterField1" type="string" />
    <property name="UseCache" type="bool">True</property>
    <property name="ShowUntargetedItems" type="bool">False</property>
    <property name="HelpMode" type="helpmode">Modeless</property>
    <property name="DataSourceID" type="string" />
    <property name="ListName" type="string">FAQ</property>
    <property name="FilterType1" type="string" />
    <property name="Default" type="string" />
    <property name="FilterType2" type="string" />
    <property name="FilterOperator1" type="Microsoft.SharePoint.Publishing.WebControls.ContentByQueryWebPart+FilterFieldQueryOperator, Microsoft.SharePoint.Publishing, Version=12.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c">Eq</property>
    <property name="ViewFlag" type="string" />
    <property name="FilterOperator3" type="Microsoft.SharePoint.Publishing.WebControls.ContentByQueryWebPart+FilterFieldQueryOperator, Microsoft.SharePoint.Publishing, Version=12.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c">Eq</property>
    <property name="FilterOperator2" type="Microsoft.SharePoint.Publishing.WebControls.ContentByQueryWebPart+FilterFieldQueryOperator, Microsoft.SharePoint.Publishing, Version=12.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c">Eq</property>
    <property name="GroupByFieldType" type="string" />
    <property name="UseCopyUtil" type="bool">True</property>
    <property name="Description" type="string">Use to display a dynamic view of content from your site on a web page</property>
    <property name="Filter1ChainingOperator" type="Microsoft.SharePoint.Publishing.WebControls.ContentByQueryWebPart+FilterChainingOperator, Microsoft.SharePoint.Publishing, Version=12.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c">Or</property>
    <property name="ItemLimit" type="int">15</property>
    <property name="SortByFieldType" type="string">DateTime</property>
    <property name="ListGuid" type="string">A72FB448-BAC3-4661-BEAB-F435E441AA1D</property>
    <property name="ViewContentTypeId" type="string" />
    <property name="ItemXslLink" type="string">/Sites/cerner/Style Library/XSL Style Sheets/FAQItemStyle.xsl</property>
    <property name="FeedEnabled" type="bool">False</property>
    <property name="MainXslLink" type="string">/Sites/cerner/Style Library/XSL Style Sheets/NHSContentQueryMain.xsl</property>
    <property name="TitleIconImageUrl" type="string" />
    <property name="Filter2ChainingOperator" type="Microsoft.SharePoint.Publishing.WebControls.ContentByQueryWebPart+FilterChainingOperator, Microsoft.SharePoint.Publishing, Version=12.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c">Or</property>
    <property name="FilterValue1" type="string" />
    <property name="ListsOverride" type="string" />
    <property name="GroupByDirection" type="Microsoft.SharePoint.Publishing.WebControls.ContentByQueryWebPart+SortDirection, Microsoft.SharePoint.Publishing, Version=12.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c">Desc</property>
    <property name="Direction" type="direction">NotSet</property>
    <property name="QueryOverride" type="string" />
    <property name="UseSQLDataSourcePaging" type="bool">True</property>
    <property name="Width" type="string" />
    <property name="FilterByAudience" type="bool">False</property>
    <property name="FilterValue2" type="string" />
    <property name="SampleData" type="string">&lt;dsQueryResponse&gt;
                &lt;Rows&gt;
                    &lt;Row Title="Item 1" LinkUrl="http://Item1" Group="Group Header" __begincolumn="True" __begingroup="True" /&gt;
                    &lt;Row Title="Item 2" LinkUrl="http://Item2" __begincolumn="False" __begingroup="False" /&gt;
                    &lt;Row Title="Item 3" LinkUrl="http://Item3" __begincolumn="False" __begingroup="False" /&gt;
                &lt;/Rows&gt;
                &lt;/dsQueryResponse&gt;</property>
    <property name="Xsl" type="string">&lt;xsl:stylesheet xmlns:x="http://www.w3.org/2001/XMLSchema" version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:cmswrt="http://schemas.microsoft.com/WebPart/v3/Publishing/runtime" exclude-result-prefixes="xsl cmswrt x" &gt; &lt;xsl:import href="/Style Library/XSL Style Sheets/Header.xsl" /&gt; &lt;xsl:import href="/Style Library/XSL Style Sheets/ItemStyle.xsl" /&gt; &lt;xsl:import href="/Style Library/XSL Style Sheets/ContentQueryMain.xsl" /&gt; &lt;/xsl:stylesheet&gt;</property>
    <property name="CacheXslStorage" type="bool">True</property>
    <property name="Hidden" type="bool">False</property>
    <property name="Title" type="string">FAQ Content Web Part</property>
    <property name="ShowWithSampleData" type="bool">False</property>
    <property name="CacheXslTimeOut" type="int">86400</property>
    <property name="ItemStyle" type="string">NoImage</property>
    <property name="AllowClose" type="bool">True</property>
    <property name="FilterField3" type="string" />
    <property name="CatalogIconImageUrl" type="string"></property>
  </properties>
</data> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:26:09.727

如果他自己编写了 Web 部件，请检查服务器上的应用程序日志，因为他可能在那里写了一条错误消息，指定它无法访问哪个列表。

解决此问题的另一种方法是查看 Web 部件是否在另一个站点或位置的其他任何地方工作。如果是比较查看所有站点内容区域，并查看与不存在的站点相比，出现故障的站点中不存在哪些列表。

另一条路线（可能需要一些时间）是获得一个名为反射器的工具。将 Web 部件 dll 放入此工具中，然后您就可以浏览代码。这完全取决于您在编码等方面的经验

希望这可以帮助

干杯特鲁兹

# ios - 在 iOS 上使用 json

> ID：11186165
> 
> 赞同：0
> 
> 时间：2012-06-25T08:54:51.623
> 
> 标签：ios, json, format

好的，我需要在我的 iOS 应用程序上使用 json 来向/从我的服务器发送/接收数据。问题是我对 json 文件的外观有点困惑。我需要发送到服务器的 json 文件看起来像这样：

```
NSString *jsonString = @"{\"eventData\":{\"eventDate\":\"Jun 13, 2012 12:00:00 AM\",\"eventLocation\":{\"latitude\":43.93838383,\"longitude\":-3.46},\"text\":\"lalalala\",\"imageData\":\"raw data\",\"imageFormat\":\"JPEG\",\"expirationTime\":1339538400000},\"type\":\"ELDIARIOMONTANES\",\"title\":\"accIDENTE\"}"; 
```

当我尝试在控制台中打印它时，我得到：

```
jsonString: {"eventData":{"eventDate":"Jun 13, 2012 12:00:00 AM","eventLocation":{"latitude":43.93838383,"longitude":-3.46},"text":"lalalala","imageData":"raw data","imageFormat":"JPEG","expirationTime":1339538400000},"type":"ELDIARIOMONTANES","title":"accIDENTE"} 
```

根据在线 json 验证器，这似乎是一种有效的 json 格式。

但是，在搜索了网络之后，当然还有 stackoverflow，并且在询问了另一个问题之后，我发现我应该将上面的 NSString 转换为这样的 json 文件：

```
NSString *jsonString = @"{\"eventData\":{\"eventDate\":\"Jun 13, 2012 12:00:00 AM\",\"eventLocation\":{\"latitude\":43.93838383,\"longitude\":-3.46},\"text\":\"lalalala\",\"imageData\":\"raw data\",\"imageFormat\":\"JPEG\",\"expirationTime\":1339538400000},\"type\":\"ELDIARIOMONTANES\",\"title\":\"accIDENTE\"}";

    NSData *jsonData = [jsonString dataUsingEncoding:NSUTF8StringEncoding];
    NSError *e;
    NSMutableArray *jsonList = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:&e]; 
```

但是，如果我尝试打印 jsonList 变量，我认为这将是 json 格式/文件，我会得到：

```
jsonList: {
    eventData =     {
        eventDate = "Jun 13, 2012 12:00:00 AM";
        eventLocation =         {
            latitude = "43.93838383";
            longitude = "-3.46";
        };
        expirationTime = 1339538400000;
        imageData = "raw data";
        imageFormat = JPEG;
        text = lalalala;
    };
    title = accIDENTE;
    type = ELDIARIOMONTANES;
} 
```

这不是一个有效的 json 文件！！！！所以我的问题是，如果我从一开始就有正确的格式到我的 json 文件，为什么所有这些额外的代码都将它“转换”为 json？我想，我一定是在这里遗漏了一些东西或误解了代码的功能。非常感谢您阅读我的帖子 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:01:33.793

你看到的是正确的行为：

> 如果我尝试打印 jsonList 变量，我认为这将是 json 格式/文件

你的`jsonList`变量是一个`NSMutableArray`. 该`-JSONObjectWithData`方法返回一个 Objective-C 对象（一个 Core Foundation 对象）——而不是一个 JSON 字符串。它已经解析了您的 JSON 字符串，并返回了一个表示该 JSON 数据的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T09:11:03.823

我认为你让自己有点纠结:-)如果你有一个 NSString 包含你想要发送的数据，那么使用 JSONObjectWithData 等是没有意义的，你不妨只发送你拥有的字符串已经。

但是，如果您想从服务器提取作为 JSON 接收的数据位，那么您将创建想要使用这些方法的时间。从解析的 JSON 对象中获取数据要容易和可靠得多，而这只是一个大的旧纯 JSON 字符串（正则表达式不是从 JSON 中提取数据的好方法）。

另一种情况是您想在代码中构建一个大而复杂的 JSON 对象，然后将其作为 JSON 字符串发送到您的服务器。您不想通过将 NSStrings 附加在一起来尝试此操作（很快就会变得讨厌），最好将您的数据放在 NSMutableArrays 或 NSDictionaries 中，然后转换为 JSON。

这是一个简单的例子（来自[这里](http://nathanhjones.com/2011/11/03/getting-started-with-json-in-ios/ "这里")）

```
NSDictionary *data = [NSDictionary dictionaryWithObjectsAndKeys:@"test@test.com", @"user",@"mypass", @"pass", nil];

NSError *error = nil;
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:data options:NSJSONWritingPrettyPrinted error:&amp;writeError];

NSString *jsonString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];
NSLog(@"JSON Output: %@", jsonString); 
```

# javascript - Liferay JSP 页面中的 AUI 内联对话框

> ID：11186166
> 
> 赞同：2
> 
> 时间：2012-06-25T08:54:59.877
> 
> 标签：javascript, jsp, liferay, liferay-6, alloy-ui

我试图在我的 Liferay 6.1 门户中显示一个内联对话框（即 aui-inline-dialog，而不是 aui-dialog）。但是我无法让[https://developer.atlassian.com/display/AUI/Inline+Dialog](https://developer.atlassian.com/display/AUI/Inline+Dialog)上的示例正常工作。

我试过这个：

```
<a href="#" id="inlineDialog"> Inline Dialog </a>
<script type="text/javascript">
AUI().ready('aui-inline-dialog', 'aui-overlay-manager', function(A) {
    A.InlineDialog(A.one("#inlineDialog"), "myDialog", function(content, trigger, showPopup) {showPopup();}, {onHover: true});
});
</script> 
```

但它只是说 InlineDialog 不是一个函数。

我错过了什么？（或者有没有更好的方法来显示不仅仅是文本内容的工具提示？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T12:17:26.940

刚刚发现问题：Liferay 中不包含 aui-inline-dialog。

我的解决方案：

*   下载最新的 Atlassian FlatPack（如本页所示：[https](https://developer.atlassian.com/display/AUI/AUI+4.2+Release+Notes) ://developer.atlassian.com/display/AUI/AUI+4.2+Release+Notes ）
*   将 aui.js 和 aui-dependencies.js 添加到 docroot/js/
*   添加`<header-portlet-javascript>/js/aui-dependencies.js</header-portlet-javascript>`和`<header-portlet-javascript>/js/aui.js</header-portlet-javascript>`到您的 liferay-portlet.xml 文件
*   将 aui.css 添加到 docroot/css/
*   添加`<header-portlet-css>/css/aui.css</header-portlet-css>`到您的 liferay-portlet.xml 文件

结果：您现在应该能够像在 FlatPack 示例中一样使用 AUI，例如

```
 <a href="#" id="popupLink">Hover Link</a>

    <script type="text/javascript">
    AJS.InlineDialog(AJS.$("#popupLink"), 1, 
            function(content, trigger, showPopup) {
                content.css({"padding":"16px"}).html('<a href="http://example.com">Appended content.</a>');
                showPopup();
                return false;
            }, {
                onHover:true
            }
        );
    </script> 
```

# c# - 以编程方式获取 C:\Users

> ID：11186171
> 
> 赞同：1
> 
> 时间：2012-06-25T08:55:36.683
> 
> 标签：c#, .net-3.5

据我所知，用户的标准文件夹（通常是 C:\Users）可以更改（例如 C:\xzy\Users）。

是否可以获取用户目录？

或者有没有办法获取 DefaultUser 目录的路径？

我必须在 .NET Framework 3.5 中处理这个问题

编辑：另一个问题是，当应用程序作为服务用户（例如系统）运行时，%userprofile% 将位于 C:\Windows 中的某个位置

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T08:57:51.493

```
string userFolderpath = System.IO.Directory.GetParent
(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData)).FullName;

string userFolderParentPath = System.IO.Directory.GetParent(path).FullName ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T08:57:34.390

你可以看到[http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T17:19:05.520

当我看到一些让我想起这个问题的东西时，我正在做其他事情。

您要查找的数据存在于注册表中。

像这样阅读它：

```
(string)Registry.GetValue(
  @"HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\ProfileList",
  "ProfilesDirectory","") 
```

您的应用将需要足够的权限来读取注册表。

# javascript - jQuery - Raphael - SVG - 将具有相同数据属性的元素的位置获取到数组中

> ID：11186173
> 
> 赞同：0
> 
> 时间：2012-06-25T08:55:50.190
> 
> 标签：javascript, jquery, svg, raphael

我已将自定义数据属性分配给添加到 Raphael 画布的一些圆圈，如下所示`each()`：

```
marker.data('transaction', transaction); 
```

如何在画布上找到具有相同事务数据值的元素，并将它们的位置放入 for 循环中的数组中，然后对该数组执行操作？

例如在伪代码中：

```
for (current_transaction = 1; current_transaction < 10; current_transaction++) {
    var array = find the location of elements with transaction data value of 
    current transaction;
    //perform some function with that array
} 
```

那么我的问题是，你如何'getElementByData'，然后搜索具有相同数据的元素。剩下的很简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:04:17.497

[document.querySelectorAll](https://developer.mozilla.org/en/DOM/Document.querySelectorAll%20for%20more%20information) ('[transaction]') 将使用属性事务获取所有内容。

使用 [transaction='foo'] 获取具有值 foo 的事务属性，例如

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">

  <path transaction="1"/>
  <path transaction="2"/>
  <path transaction="1"/>

  <script>
    for (var current_transaction = 1; current_transaction &lt; 2; current_transa
ction++) {
       var found = document.querySelectorAll("[transaction='" + current_transact
ion +"']");
       alert(found.length);
    }
  </script>

</svg> 
```

# node.js - PassportJS：如何在我的视图中获取 req.user

> ID：11186174
> 
> 赞同：18
> 
> 时间：2012-06-25T08:55:52.530
> 
> 标签：node.js, express, passport.js

我正在使用带有 express 2.x 和会话存储的 pssportjs。登录后，我只得到 req.User 一次。一旦我再次重定向**req.User 未定义。**

这是我的配置：

```
passport.serializeUser(function(user, done) {
  done(null, user._id);
});

passport.deserializeUser(function(userId, done) {
  User.findOne({_id: userId} ,function(err, user){
    done(err, user);
  });
});

// Authentication Strategy
passport.use(new FacebookStrategy({
    clientID: CONFIG.fb.appId,
    clientSecret: CONFIG.fb.appSecret,
    callbackURL: CONFIG.fb.callbackURL
  },
  function(accessToken, refreshToken, profile, done) {
    // asynchronous verification, for effect...
    process.nextTick(function () {

      User.findOne({ 'accounts.uid': profile.id, 'accounts.provider': 'facebook' }, function(err, olduser) {

          if(olduser) {
            done(null, olduser);
          } else {
            var newuser       = new User();
            var account       = {provider: "facebook", uid: profile.id};
            newuser.accounts.push(account);
            newuser.firstname = profile.name.givenName;
            newuser.lastname  = profile.name.familyName;
            newuser.email     = "TBD...";

            newuser.save(function(err) {
              if(err) { throw err; }
              done(null, newuser);
            });
          }
        });
    });
  }
));

var app = module.exports = express.createServer();

// configure express
app.configure(function(){
  app.set('views', __dirname + '/views');
  app.set('view engine', 'ejs');
  app.use(express.compiler({ src : __dirname + '/public', enable: ['less']}));
  app.use(express.cookieParser());
  app.use(express.bodyParser());
  app.use(express.methodOverride());

  //app.use(express.session({ secret: "keyboard cat" }));
  app.use(express.session({
    secret: "victory cat",
    store: new MongoStore({
      url: CONFIG.dbMongo.url
      })
  }));
  app.use(passport.initialize());
  app.use(passport.session());
  app.use(app.router);
  app.use(express.static(__dirname + '/public'));
}); 
```

这些是我的路线：

```
app.get('/auth/facebook', passport.authenticate('facebook', { scope: ['user_status', 'user_photos'] }));

app.get('/auth/facebook/callback', passport.authenticate('facebook', { successRedirect: '/index', failureRedirect: '/' }));

app.get('/index', function(req, res) {

            res.render('index.ejs', {
                siteTitle: "Welcome",
                siteUrl: CONFIG.server.siteUrl,
                user: req.user
            });
}); 
```

最后，这就是我试图在我的视图中访问用户对象的方式：

```
<div class="page-header">
    <h3><%= siteTitle %></h3>
</div>  

<% if (!user) { %>
     <p>Not logged in !</p>
<% } else { %>
     <p>Hello, <%= user.firstname %> <%= user.lastname %>.</p>
<% } %> 
```

使用 facebook 进行身份验证后，我的视图正确显示了名字和姓氏。在另一个页面请求 req.User 之后是 undefiend （不调用反序列化）。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-25T20:48:13.300

使用动态助手。`user`这是我的准系统对象的示例：

```
app.dynamicHelpers({
    user: function(req, res){
        var roles, name;

        if (req.session && req.session.auth == true) {
            roles = ['member'];
            name = (req.session.user) ? req.session.user.name : 'Registered member';
            id = (req.session.user) ? req.session.user.id : 0;
        }
        else {
            roles = ['guest'];
            name = 'Guest';
            id = null;
        }

        return {
            name: name, 
            id: id,
            roles: roles,
            isGuest: roles.indexOf('guest') !== -1,
            isAdmin: roles.indexOf('admin') !== -1
        }
    }
}); 
```

然后从视图中您可以简单地使用`#{user.name}`或 `if user.isAdmin`等作为对象`user`现在可以访问应用程序的其他部分。

您可以将其添加到 app.js 或从外部文件中获取。我将所有动态助手保存在 /utils/helpers.js 下

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T06:48:59.037

您是否设置了护照中间件？从[文件](http://passportjs.org/guide/configuration.html)中，你需要做

```
app.configure(function() {
  app.use(express.cookieParser());
  app.use(express.bodyParser());
  app.use(express.session({ secret: 'keyboard cat' }));
  app.use(passport.initialize());
  app.use(passport.session());
  app.use(app.router);
  app.use(express.static(YOUR_STATIC_DIR_PATH));
}); 
```

如果您使用 Express 3.x 或 Connect 2.x，请[设置 cookie 密码而不是会话密码](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x)

```
app.configure(function() {
  app.use(express.cookieParser('keyboard cat'));
  app.use(express.session());
  app.use(express.bodyParser());
  app.use(passport.initialize());
  app.use(passport.session());
  app.use(app.router);
  app.use(express.static(YOUR_STATIC_DIR_PATH));
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T12:45:26.957

好吧，我明白了：

我犯的错误不在我上面发布的代码中，这是正确的。我链接到 URL 的方式有误，所以每次我使用其中一个损坏的链接时，我都会以某种方式强制 express 创建一个新会话。在新会话中，我也丢失了 req.user 对象。

因此，如果您遇到类似问题，请同时检查您的 html 中的链接。

感谢大家的帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-09T15:01:56.993

app.post('/login', function(req, res){

```
const user = new User({
     username: req.body.username,
     password: req.body.password
});

req.login(user, function(err){
    if(!err){
        passport.authenticate("local")(req, res, function(){
            res.redirect('your rendered URL');
            // console.log(` username = ${user.username} and id = ${user.id}`);

        })

    }
    else{
        console.log(err);
    }

});

    req.session.user = user; 
```

}

然后我们可以在任何我们想要的地方使用这个用户我希望它有帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-07T15:07:22.770

您可以传递用户信息以在路由器中查看：

```
res.render('user/dashboad', {
    ...
    user: req.session.passport.user,
    ... 
```

# mysql - STORED 过程中的变量

> ID：11186176
> 
> 赞同：1
> 
> 时间：2012-06-25T08:56:13.920
> 
> 标签：mysql

我有一个 Web 应用程序，它在需要时调用许多存储过程。

在每个存储过程中，我在这些存储过程中声明了局部变量。

我希望这些局部变量特定于那个特定的存储过程。因此，当这个存储过程执行时，在该过程中声明的局部变量是特定于该存储过程的，并且一旦该过程退出就应该被丢弃。

我在存储过程中使用了相同名称的局部变量，但似乎在执行另一个存储过程时这些变量没有被重新设置。

我还使用执行查询的 PREPARE STATEMENTS，在执行这些语句后，我将释放它们。为什么我仍然没有重新设置这些变量问题？

这是存储的过程：

```
 CREATE DEFINER=`root`@`localhost` PROCEDURE `suggested_projects`(
               IN userName varchar(20),
               OUT projectCode int,
               OUT projectName text,
               OUT projectCreationDate DATETIME,
               OUT projectEndDate DATETIME,
               OUT projectStatus varchar(8),
               OUT noOf smallInt)
        BEGIN
        DECLARE
            l_cnt, l_occ int;

        DECLARE
            l_table_name varchar(30);

        DECLARE
            l_create,droptable, l_select_cnt, l_select_cnt2, l_select_cnt3, l_other_expertise, l_query1,
            l_delete_other, l_final_query longtext;

           set l_table_name = concat("tmp_rec_",userName);

           set @l_select_cnt = concat("SELECT count(1) into @l_cnt
                                       from information_schema.tables
                                      where table_schema = 'greptech'
                                      and table_name = '", l_table_name, "'");

           PREPARE stmt2 FROM @l_select_cnt;
           EXECUTE stmt2;
           DEALLOCATE PREPARE stmt2;

           if @l_cnt > 0 then
               set @droptable = concat("drop table ", l_table_name);

               PREPARE stmt1 FROM @droptable;
               EXECUTE stmt1;
               DEALLOCATE PREPARE stmt1;
           END IF;

           set @l_create = concat("CREATE TABLE ", l_table_name,
                               " SELECT a.expertise_desc
                                  from expertise a
                                 inner join users_expertise b
                                    on a.expertise_code = b.expertise_code
                                   and b.sp_user_name = '", userName , "'");

               PREPARE stmt3 FROM @l_create;
               EXECUTE stmt3;
               DEALLOCATE PREPARE stmt3;

           set @l_select_cnt2 = concat("SELECT other_expertise into @l_other_expertise
                                       from users_expertise
                                      where sp_user_name = '", userName, "' ",
                                      "and expertise_code = 'OTHER'");

           PREPARE stmt4 FROM @l_select_cnt2;
           EXECUTE stmt4;
           DEALLOCATE PREPARE stmt4;

           if (@l_other_expertise IS NOT NULL) then
                -- Example RESULT : INSERT INTO tmp_rec_n10000 VALUES('DWH'),('TESTING'),('ARCHITECTURE')
                set @l_query1 = concat("INSERT INTO ", l_table_name, " VALUES('", REPLACE(@l_other_expertise,',','\'),(\''), "')");

                PREPARE stmt5 FROM @l_query1;
                EXECUTE stmt5;
                DEALLOCATE PREPARE stmt5;
            END IF;

           set @l_delete_other = concat("DELETE from ", l_table_name,
                                       " where expertise_desc = 'Other'");

           PREPARE stmt6 FROM @l_delete_other;
           EXECUTE stmt6;
           DEALLOCATE PREPARE stmt6;

           set @l_final_query = concat("SELECT a.project_code as projectCode, a.project_name as projectName, a.project_creation_date as projectCreationDate, a.project_end_date as projectEndDate, a.project_status as projectStatus, count(c.project_code) as noOf from projects a inner join ", l_table_name, " b on a.project_name like concat(\"%\",trim(b.expertise_desc),\"%\") OR a.project_description like concat(\"%\",trim(b.expertise_desc),\"%\") left join project_ids c on c.project_code = a.project_code group by a.project_code");

           PREPARE stmt7 FROM @l_final_query;
           EXECUTE stmt7;
           DEALLOCATE PREPARE stmt7;

        END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T09:05:53.963

您可以像这样声明**局部**变量

```
DECLARE xname VARCHAR(5) DEFAULT 'bob'; 
```

**会话**变量可以像这样声明

```
SET @var := 1 
```

您应该在存储过程中使用局部变量。这些将被删除并结束它们被定义的块。

## 编辑

示例存储过程：

```
delimiter |
create procedure test_proc(myname varchar(100))
begin
    declare some_id int;
    select id into some_id
    from mytable
    where `name` = myname;

    select some_id;
end |
delimiter ; 
```

## 编辑 2

删除程序建议项目；

```
delimiter |

CREATE DEFINER=`root`@`localhost` PROCEDURE `suggested_projects`(
           IN userName varchar(20),
           OUT projectCode int,
           OUT projectName text,
           OUT projectCreationDate DATETIME,
           OUT projectEndDate DATETIME,
           OUT projectStatus varchar(8),
           OUT noOf smallInt)
    BEGIN
    DECLARE
        l_cnt, l_occ int;

    DECLARE
        l_table_name varchar(30);

    DECLARE
        l_create,droptable, l_select_cnt, l_select_cnt2, l_select_cnt3, l_other_expertise, l_query1,
        l_delete_other, l_final_query longtext;

       select concat("tmp_rec_",userName) into l_table_name;

       select concat("SELECT count(1) into @l_cnt
                                   from information_schema.tables
                                  where table_schema = 'greptech'
                                  and table_name = '", l_table_name, "'") 
                                  into l_select_cnt;

       set @query = l_select_cnt;
       PREPARE stmt2 FROM @l_select_cnt;
       EXECUTE stmt2;
       DEALLOCATE PREPARE stmt2;

       if l_cnt > 0 then
           select concat("drop table ", l_table_name) into droptable;

           set @query = droptable;
           PREPARE stmt1 FROM @query;
           EXECUTE stmt1;
           DEALLOCATE PREPARE stmt1;
       END IF;

       select concat("CREATE TABLE ", l_table_name,
                           " SELECT a.expertise_desc
                              from expertise a
                             inner join users_expertise b
                                on a.expertise_code = b.expertise_code
                               and b.sp_user_name = '", userName , "'")
                               into l_create;

           set @query = l_create;
           PREPARE stmt3 FROM @query;
           EXECUTE stmt3;
           DEALLOCATE PREPARE stmt3;

       select concat("SELECT other_expertise into @l_other_expertise
                                   from users_expertise
                                  where sp_user_name = '", userName, "' ",
                                  "and expertise_code = 'OTHER'")
                                  into l_select_cnt2;

       set @query = l_select_cnt2;
       PREPARE stmt4 FROM @query;
       EXECUTE stmt4;
       DEALLOCATE PREPARE stmt4;

       if (@l_other_expertise IS NOT NULL) then
            -- Example RESULT : INSERT INTO tmp_rec_n10000 VALUES('DWH'),('TESTING'),('ARCHITECTURE')
            set @l_query1 = concat("INSERT INTO ", l_table_name, " VALUES('", REPLACE(@l_other_expertise,',','\'),(\''), "')");

            PREPARE stmt5 FROM @query;
            EXECUTE stmt5;
            DEALLOCATE PREPARE stmt5;
        END IF;

       select concat("DELETE from ", l_table_name,
                                   " where expertise_desc = 'Other'")
                                   into l_delete_other;

       set @query = l_delete_other;
       PREPARE stmt6 FROM @query;
       EXECUTE stmt6;
       DEALLOCATE PREPARE stmt6;

       select  concat("SELECT a.project_code as projectCode, a.project_name as projectName, a.project_creation_date as projectCreationDate, a.project_end_date as projectEndDate, a.project_status as projectStatus, count(c.project_code) as noOf from projects a inner join ", l_table_name, " b on a.project_name like concat(\"%\",trim(b.expertise_desc),\"%\") OR a.project_description like concat(\"%\",trim(b.expertise_desc),\"%\") left join project_ids c on c.project_code = a.project_code group by a.project_code")
              into l_final_query;

       set @query = l_final_query;
       PREPARE stmt7 FROM @query;
       EXECUTE stmt7;
       DEALLOCATE PREPARE stmt7;

    END; |

delimiter ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T08:59:54.073

我只对在同一个数据库连接上调用的存储过程使用的临时表有这个问题。临时表当然是为此连接共享的：

这是我使用的解决方案，在每次创建之前删除：

```
drop table if exists t_tempTable;
create temporary table t_tempTable(. 
```

.

准备好的语句也是全局的，请参见此处： [http ://dev.mysql.com/doc/refman/5.0/en/local-variable-scope.html](http://dev.mysql.com/doc/refman/5.0/en/local-variable-scope.html)

# android - Robotium 活动测试取决于 SQLite 中的数据

> ID：11186177
> 
> 赞同：2
> 
> 时间：2012-06-25T08:56:15.063
> 
> 标签：android, sqlite, testing, android-activity, robotium

我想为我的活动编写 Robotium 测试用例。测试用例扩展了标准`ActivityInstrumentationTestCase2`，如 Robotium 示例中所示。Activity 表示一个数据值对象，它持久存储在语言环境存储中，并且必须将对象 id 作为 Intent Extras 中的参数。稍后`onCreate`将通过此 id 从 DB 中获取 data-value 对象。

因此，在`setUp`我想创建模拟数据值对象的方法中，将其持久化到本地存储中并通过意图附加将它们的 id 传递到活动中。但是为了坚持，我需要一个`Context`实例。只有一种方法可以做到这`ActivityInstrumentationTestCase2`一点`getActivity()`。但这将创建一个我的活动实例，然后模拟对象将被持久化。

在这种情况下我能做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T07:39:11.990

无需调用的上下文`getActivity`可以从`getInstrumentation().getTargetContext()`

# php - PHP - Zend 框架发送文件

> ID：11186179
> 
> 赞同：2
> 
> 时间：2012-06-25T08:56:26.537
> 
> 标签：php, zend-framework

我正在尝试将文件发送到 Zend Framework PHP 应用程序中的浏览器。我在这里找到了一个动作助手 - [https://github.com/noginn/noginn/blob/master/Noginn/Controller/Action/Helper/SendFile.php](https://github.com/noginn/noginn/blob/master/Noginn/Controller/Action/Helper/SendFile.php)

在我的控制器中，我有这样的动作

```
public function downloadfileAction()
{
    //get the file name and strip out all white spaces
    $title = preg_replace('/\s+/', '', $this->getRequest()->getParam('title')); 

    //create the file path          
    $path = 'downloads/'.$title.'.pdf';

    //call the action helper to send the file to the browser
    $this->_helper->SendFile->sendFile($path, 'application/x-pdf');
} 
```

我的文件位于我的公共文件夹中，即 MyApp/public/downloads/myFile.pdf

当我运行该操作时，我收到一个未找到视图文件的错误，并且没有开始下载。

```
exception 'Zend_View_Exception' with message 'script 'myController/downloadfile.phtml' not found ... 
```

谁能建议我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T09:01:03.257

这是关于找不到的脚本（视图）文件的错误。因为您在发送输出时不需要一个。

尝试通过以下方式禁用它：

```
public function downloadfileAction()
{
    //get the file name and strip out all white spaces
    $title = preg_replace('/\s+/', '', $this->getRequest()->getParam('title')); 

    //create the file path          
    $path = 'downloads/'.$title.'.pdf';

    //call the action helper to send the file to the browser
    $this->_helper->SendFile->sendFile($path, 'application/x-pdf');
    $this->_helper->viewRenderer->setNoRender();
} 
```

# sed - 使用 sed 编辑特定的虚拟主机块

> ID：11186180
> 
> 赞同：0
> 
> 时间：2012-06-25T08:56:26.757
> 
> 标签：sed

我必须在特定的虚拟主机块中添加一行

```
<VirtualHost *:80>
   #
   #Existing Lines
   #

   #--New line should go here
</VirtualHost> 
```

sed 脚本应该使得该行不应该被添加到任何其他虚拟主机块中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:03:38.053

一种使用方式`sed`。它选择 和 之间的行`<VirtualHost *:80>`，`</VirtualHost>`并在最后一个中插入文本。

```
sed -e '/^<VirtualHost[ ]\*:80>/,/<\/VirtualHost>/ { /<\/VirtualHost>/ i\NEW TEXT' -e '}' 
```

一个**例子**：

假设下一个内容为`infile`：

```
<VirtualHost more:80>
   #
   #Existing Lines
   #

   #--New line should go here
</VirtualHost>
<VirtualHost *:80>
   #
   #Existing Lines
   #

   #--New line should go here
</VirtualHost>
<VirtualHost *:8080>
   #
   #Existing Lines
   #

   #--New line should go here
</VirtualHost> 
```

像这样运行它：

```
sed -e '/^<VirtualHost[ ]\*:80>/,/<\/VirtualHost>/ { /<\/VirtualHost>/ i\NEW TEXT' -e '}' infile 
```

具有以下输出：

```
<VirtualHost more:80>
   #
   #Existing Lines
   #

   #--New line should go here
</VirtualHost>
<VirtualHost *:80>
   #
   #Existing Lines
   #

   #--New line should go here
NEW TEXT
</VirtualHost>
<VirtualHost *:8080>
   #
   #Existing Lines
   #

   #--New line should go here
</VirtualHost> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T09:51:22.267

*   如果 awk 被接受，请检查下面的示例/测试
*   如果您的文件是 xml，我想您的元素中必须有一个属性。例如`<VirtualHost url="server:port">`
*   您的 xml 文件应该格式正确。例如，它不会排在一条很长的线上。

如果满足上述条件，请检查以下内容：

```
kent$  cat vh.txt 
<VirtualHost url="bar:80">
    <bar>i am virtualHost bar</bar>
</VirtualHost>

<VirtualHost url="here:80">
   #
   #Existing Lines
   #
</VirtualHost>

<VirtualHost url="foo:80">
    <foo>i am fooo</foo>
</VirtualHost>

kent$  awk '/<VirtualHost url="here:80">/&& !x{x=1;print;next;}/<\/VirtualHost>/&&x==1{$0="NEW_NEW\n"$0;x=2}1' vh.txt
<VirtualHost url="bar:80">
    <bar>i am virtualHost bar</bar>
</VirtualHost>

<VirtualHost url="here:80">
   #
   #Existing Lines
   #
NEW_NEW
</VirtualHost>

<VirtualHost url="foo:80">
    <foo>i am fooo</foo>
</VirtualHost> 
```

上面的 awk onliner 将新行“NEW_NEW”添加到正确的 VirtualHost 元素。

# batch-file - 无法在 Windows 7-32 位上执行批处理文件

> ID：11186182
> 
> 赞同：0
> 
> 时间：2012-06-25T08:56:30.273
> 
> 标签：batch-file

我正在尝试在 win 7 上执行批处理文件。但是出现错误“bat。不是 valod win32 应用程序”。我尝试过使用 SFC，但它没有帮助，因为同样没有完成并且出现了一些错误也进来了... :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T08:59:52.210

确保在 Windows 资源管理器中启用视图扩展并将文件称为 abc.bat

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:25:20.773

尝试恢复扩展的注册表项。[从此处](http://www.sevenforums.com/tutorials/19449-default-file-type-associations-restore.html)下载默认`bat`文件扩展名关联。然后尝试运行批处理文件。

如果您仍然不满意，请确保您正在命名文件`filename.bat`，并在保存时更改文件类型以`All Files`确保（大概通过`notepad`）。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T09:23:51.693

尝试将扩展名更改为`.cmd`.
如果可行，您需要更改`.bat`注册表中的条目。

# sql - 散列一个 SQL 行？

> ID：11186183
> 
> 赞同：30
> 
> 时间：2012-06-25T08:56:35.447
> 
> 标签：sql, sql-server, sql-server-2008

有没有办法对 SQL 表中的一行进行 md5sum 以检查是否有任何列已被修改？

我想检查是否有任何特定列已更改与我保存在文本文件中的旧数据副本（我将在 C# 中 md5sum）。

编辑：只需 md5sum-ing 每一行

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-25T09:01:28.200

有[`CHECKSUM(*)`](http://msdn.microsoft.com/en-us/library/ms189788.aspx),[`BINARY_CHECKSUM(*)`](http://msdn.microsoft.com/en-us/library/ms173784.aspx)和[`CHECKSUM_AGG`](http://msdn.microsoft.com/en-us/library/ms188920.aspx). 他们像 checkum 一样执行 CRC32，但对于检测一行的更改来说，它应该绰绰有余（你说的是 40 亿分之一的假阴性碰撞机会）。

使用加密散列[`HASHBYTES`](http://msdn.microsoft.com/en-us/library/ms174415.aspx)需要您构造一个表示“行”的表达式。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-08-03T13:51:42.390

如果您有 SQL Server 2008 或更高版本，您可以使用：

```
SELECT HASHBYTES('SHA1', (SELECT TOP 1 * FROM dbo.Table FOR XML RAW)) 
```

或者

```
SELECT  
    HASHBYTES('SHA1',(
        SELECT  * 
        FROM    dbo.myTable as  tableToHash 
        where   tableToHash.myUniqueKey=myTable.myUniqueKey 
        FOR XML RAW
    ))                                              as  rowSHA1
from    dbo.myTable; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-02-20T15:22:41.623

我必须开发一个解决方案来比较表结构并运行一个程序来导入表之间的差异。

我使用下面的代码来选择数据

--> 表结构

```
create table #table1 (
campo varchar(10)
,campo1 varchar(10)
)

create table #table2 (
campo varchar(10)
,campo1 varchar(10)
) 
```

--> 插入值

```
insert into #table1 values ('bruno',1)
insert into #table1 values ('bruno',2)
insert into #table2 values ('bruno',1)
insert into #table2 values ('bruna',2) 
```

--> 创建一个哈希列进行比较

```
select *,HASHBYTES('SHA1', (select z.* FOR XML RAW)) as hash
    into #compare1
 from #table1 z 

select *,HASHBYTES('SHA1', (select k.* FOR XML RAW)) as hash
    into #compare2
 from #table2 k 
```

--> 检查有什么不同的行

```
select * from  #compare1 a
full outer join #compare2 b on a.hash = b.hash
where ( a.hash is null or b.hash is null ) 
```

[也许这对需要相同东西的人有用在这里](https://gist.github.com/brunotdantas/022157695a55c52e4d7eaa61ccf8230b)查找上面解释的代码

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T08:59:26.440

获取所有行，对每一列做md5，并与之前数据中对应列的md5进行比较。

# visual-studio-2010 - 想要获取时间字段的总和

> ID：11186184
> 
> 赞同：0
> 
> 时间：2012-06-25T08:56:38.800
> 
> 标签：visual-studio-2010

我在数据表中有 Over Time 字段，其中包含不同员工的数据，例如 12:75（12 小时和 75 分钟），而我希望它像 13:15 分钟。我想得到一段时间内的总和。我怎样才能在 VB.NET 2010 中得到这样的结果。请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:05:19.760

答案很简单。将分钟部分除以 60。金额（不包括小数部分）是小时数，然后将其添加到小时数。你乘以 60 的小数部分就是你的分钟数。

要在 VB 中编写代码，我们需要知道 OverTime 属性的类型，但我也认为您应该自己编写此代码，因为它非常简单。当您遇到特定问题时，您可以回来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T09:08:15.780

您可以使用

```
 DateTime.AddMinutes 
```

您将在其中指定 75 的函数，它将为您提供正确的时间。

或者你可以使用

```
 var ts = new TimeSpan(12, 75, 0);//h,m,s 
```

示例代码将是，

```
 var ts = new TimeSpan(25, 75, 0);
        var total = ts.Days*24 + ts.Hours + ":" + ts.Minutes; 
```

# java - 未在 MANIFEST.MF 中解析为包的外部 jar

> ID：11186185
> 
> 赞同：2
> 
> 时间：2012-06-25T08:56:57.620
> 
> 标签：java, eclipse

更新的问题：

我不得不从我得到的一些来源导入一个项目。该项目抱怨缺少进口。因此，我从互联网上下载了 .jar 并将它们添加为外部 jar。

在我的 Eclipse Indigo Java EE 中，我按照[如何在 Eclipse 中导入 jar将缺少的 .jar 文件添加到 Java 项目](https://stackoverflow.com/questions/3280353/how-to-import-a-jar-in-eclipse)

添加 jar 后，类中的 import 语句中的错误消失了。但是，MANIFEST.MF 会引发 bundle not resolved 错误。源中存在的 MANIFEST.MF 文件有一个“Require-Bundle”，在其中列出了这些（可能已经被他们捆绑但没有给出捆绑包），我得到的错误是：

例如：org.apache.commons.configuration;bundle-version="1.7.0"

捆绑“org.apache.commons.configuration”无法解析

如何解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T14:03:53.397

您需要检查该捆绑包是否为 OSGi 捆绑包。展开并查看其 MANIFEST.MF。您应该能够从获得您尝试导入的项目的同一位置获得该捆绑包的 OSGi 版本。然后将该捆绑包添加到您的目标平台。请参阅`Preferences>Plug-in Development>Target Platform` 您可以编辑您的活动平台或从全新安装的 eclipse 创建一个新平台。

# python - 在 Ubuntu/Quckly 中为命令行服务器提供基本 GUI 的一般布局和架构？

> ID：11186187
> 
> 赞同：5
> 
> 时间：2012-06-25T08:57:13.733
> 
> 标签：python, ubuntu, canonical-quickly

几年前，我为当地社区广播电台编写了一个 python 命令行实用程序。这项工作的目的是使用从谷歌日历获得的元数据来增强无线电流。这意味着任何收听广播电台的人都可以阅读有关当前正在播放的内容以及距离下一个节目开始还有多少分钟的最新信息流。

大多数情况下，这个脚本工作得很好，多年来一直提供良好的服务。

最近我有了一个新要求：这个应用程序的用户希望偶尔停止、启动或重新加载进程（例如，因为调度信息已更改）。我们没有教工作室的每个成员如何使用命令行，而是考虑给这个工具一个简单的 GUI。

由于该应用程序将仅在 Ubuntu 上开发和运行，因此我们选择 Quickly 作为简单的开发框架。它有据可查，并且为开发人员了解该平台提供了较低的负担。

我们希望应用程序的初始设计将包含一个类似浏览器的工具按钮功能区（开始、停止、重新加载）。包含滚动状态消息的大面板。下面会有一个小的状态栏，可以让您深入了解程序的当前内部状态。

作为 GUI 编程的新手，我仍然不确定如何构建 UI：主要的谜团仍然存在：

1.  什么样的控件应该用于日志消息流动的滚动文本面板。这需要是只读的，但每次生成日志消息时都会更新。我曾计划制作一个自定义 Python 日志处理程序，将任何日志消息重定向到此面板 - 但最简单的方法是什么？

2.  我现在拥有的脚本在它没有对 time.sleep() 做任何事情时会阻塞 - 这显然对 GUI 没有好处，那么对于一段时间内无事可做的 GUI 应用程序中的进程的正确行为是什么？

3.  我的进程最初设计为在终端中作为单个线程运行。鉴于我需要它或多或少地像以前一样运行，这是否意味着我应该考虑将 GUI 内容放在工作进程的单独线程上。是否有任何记录在案的模式可以说明如何在 Quickly 框架中执行此操作？

4.  继续前进 - 有没有一种好方法可以让使用 Quickly 开发的应用程序在 Ubuntu 以外的平台上运行？例如，我能否轻松调整我的应用程序以在任何其他基于 Linux 的操作系统上运行。像 OSX 或 Windows 这样不相关的东西呢？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T21:44:31.437

1.  您可以使用 GtkTextView，只读。也许您可以将其扩展为带有输出的管道。
2.  您可以在程序空闲时使用**idle_add() （在 Glib 中可用）来运行调用方法/函数。**
3.  您可能需要检查[如何在 pygtk 中使用线程](https://stackoverflow.com/a/810854/278878)。
4.  PyGTK 是可移植的。Quickly 是一个使用 PyGTK/PyGObject 和一些额外细节创建应用程序的包装器。根据您的代码，保持它的可移植性应该不是很困难。

# apache-flex - 如何读取 excel 表中的超链接值..？

> ID：11186190
> 
> 赞同：0
> 
> 时间：2012-06-25T08:57:22.727
> 
> 标签：apache-flex, data-binding, datagrid, flex4.5, flexbuilder

我正在将数据从 excel 文件导入到 flex 网格，但我的 excel 文件有一些超链接，当我读取单元格值时，它给了我显示在该单元格中的文本，而不是链接的实际路径。我正在使用 as3xls 库。

# c - 最小公因数

> ID：11186194
> 
> 赞同：0
> 
> 时间：2012-06-25T08:57:31.163
> 
> 标签：c, algorithm

谁能建议一些快速的方法来计算给定两个数字的最低公因数（不包括 1）？一种方法是检查 GCD(a,b)>1，素数分解（a 和 b），并选择最小的公共素数作为结果。

他们是更好的方法吗？

示例：LCF(20,30)=2 , LCF(13,39)=13

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T09:10:35.260

最后，我认为您不会找到比尝试将这两个数字除以素数更好的方法，直到您找到一个同时除以或达到`sqrt(min(a,b))`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-25T09:46:09.310

只需从 2 循环到值 n/2，其中 n 是两个数字中较小的一个。将条件放入给定的循环中 for(int i=2;i<=n/2;i++) if(n%i==0 && m%i==0)break;

i 是您需要的值。

# ios - sizeWithFont 返回随机值

> ID：11186197
> 
> 赞同：0
> 
> 时间：2012-06-25T08:57:43.617
> 
> 标签：ios, cocoa-touch, ios5

我正在尝试根据内容将是什么来计算表格视图中单元格的必要高度。这是在`- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath`.

但是，有时 sizeWithFont 返回 0。我不知道这是怎么可能的，因为除了一个之外，所有参数都是硬编码的，而且我可以看到该参数没有改变。

```
NSString *address = [properties objectAtIndex:1];

CGFloat calculatedSize = [address sizeWithFont:[[UIFont alloc] fontWithSize:15.f] constrainedToSize:CGSizeMake(207.f, 100.f) lineBreakMode:UILineBreakModeWordWrap].height;

NSLog(@"Calculated size for %@: %f", address, calculatedSize);

calculatedSize += 19.f;

return calculatedSize; 
```

如果我通过多次来回查看视图来尝试几次，这就是输出：

```
Calculated size for 1234 Fake St: 0.000000
Calculated size for 1234 Fake St: 0.000000
Calculated size for 1234 Fake St: 0.000000
Calculated size for 1234 Fake St: 38.000000
Calculated size for 1234 Fake St: 0.000000
Calculated size for 1234 Fake St: 38.000000 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T09:03:18.947

代替：

```
[[UIFont alloc] fontWithSize:15.0f] 
```

和：

```
[UIFont systemFontOfSize:15.f] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T09:06:04.833

我测试了这个并且它有效

```
NSString *address = @"Sample text Sample text Sample text Sample text Sample text Sample text Sample text";

CGFloat calculatedSize = [address sizeWithFont:[UIFont systemFontOfSize:15.0] 
                             constrainedToSize:CGSizeMake(207.f, 100.f) 
                                 lineBreakMode:UILineBreakModeWordWrap].height;    

NSLog(@"Calculated size for %@: %f", address, calculatedSize); //String... 76.000000 
```

# java - JavaQuartz 作业持久化

> ID：11186201
> 
> 赞同：8
> 
> 时间：2012-06-25T08:58:08.217
> 
> 标签：java, struts2, quartz-scheduler

我对 Java Quartz 不太熟悉，我们只是使用了一个每天安排的测试作业。对于我们的 Struts2 web 应用程序，我们希望运行一些安排在一天中不同时间的日常作业。作业应该处于持久状态，这样即使作业由于服务器关闭/应用程序失败而失败，它们也应该稍后在服务器启动时重新执行。我也可以将作业的状态/结果存储在数据库中，以便监控作业。任何的意见都将会有帮助。

- 谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T09:26:56.930

无论您提到什么，在 Quartz 调度程序中都是可能的，并且已经有一个带有触发器的功能，我们通常称之为`Misfire Instructions`这就是文档所说的

> 触发器的另一个重要属性是它的“失火指令”。如果由于调度程序关闭，或者因为 Quartz 的线程池中没有可用的线程来执行作业，持久性触发器“错过”其触发时间，则会发生不触发。不同的触发器类型有不同的失火指令可供它们使用。默认情况下，他们使用“智能策略”指令——该指令具有基于触发器类型和配置的动态行为。当调度程序启动时，它会搜索任何未触发的持久触发器，然后根据其单独配置的不触发指令更新每个触发器。当您开始在自己的项目中使用 Quartz 时，您应该熟悉在给定触发器类型上定义的失火指令，并在他们的 JavaDoc 中进行了解释。有关失火指令的更多具体信息将在针对每种触发器类型的教程课程中提供。

关于作业持久性 Quartz 几乎没有内置机制，您只需将 JobStore 设置为`JDBCJobStore`

我建议您使用[Quartz 调度程序文档](http://quartz-scheduler.org/documentation/quartz-2.x/tutorials/)，它非常简单，并且有很多教程和示例可供开始。

如果您的应用程序中没有使用 Spring，则无需添加额外级别的抽象和依赖项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T09:16:01.903

您可以将 Quartz 与[Sprig batch](http://static.springsource.org/spring-batch/)结合使用。

前者提供用于管理各种流的 API（根据您的需要复杂）、作业状态的持久存储以及用于根据作业执行状态监控和重新运行作业的 API。另一个方便的库是[Spring Batch admin](http://static.springsource.org/spring-batch-admin/reference/reference.pdf)。它有网络控制台和 5 分钟指南。

Quartz 用作调度程序作业状态持久性由 Spring 批处理处理。它可以作为独立的 Java 应用程序运行，也可以在 Web/应用程序容器中运行（对我来说 Tomcat 就足够了）。

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T09:10:24.120

我们`Job stores`在 Java Quartz 中有 api。这会将有关作业信息的数据保存在数据库中。所以我想这会对你有所帮助。您可以查看[此链接](http://www.ibm.com/developerworks/java/library/j-quartz/)以了解有关代码和数据库结构的信息。

# c++ - 使用 opencv 对线条进行分类

> ID：11186202
> 
> 赞同：6
> 
> 时间：2012-06-25T08:58:08.407
> 
> 标签：c++, image-processing, opencv, classification

我正在做一个图像分类项目，我已经使用边缘检测从图像中提取了曲线，并且需要根据它们的曲率对它们进行分类。

例如下图中有 3 种线，左边的线曲率好，中间的曲率不错，右边的线曲率很差。

![曲线](../Images/27d52ae2dc6abcd5c1a2d608cede48a9.png)

谢谢你的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T21:43:53.573

如果您正在处理图像，您可以知道像您展示的形状一样是否包含“平滑”或“锐利”边缘。您可以计算结构矩阵（或图像张量矩阵）的特征值和特征向量。对于属于直线或平滑边缘的像素，其中一个特征值将比另一个大得多。如果像素是角点或曲线点，则两个特征值都可能很大且相似。然后我建议在你的形状的像素上测量这些特征，并根据你的需要训练一个分类器。

您几乎可以在其他地方找到有关此类事情的更多详细信息，尽管我可以为您提供我自己的博士学位的参考，请查看第 2.4.2 节[http://oa.upm.es/4837/1/MARCOS_NIETO_DONCEL.pdf](http://oa.upm.es/4837/1/MARCOS_NIETO_DONCEL.pdf)

此致！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T10:20:57.427

我看到很少有可能的分类措施：

尝试使用一些近似 eps 的近似线，然后检查有多少段近似线，线段越少越好。（这可能会在大多数左侧情况下产生问题，当行包含几个段时）

检查边界框尺寸，尺寸越小线条越好

检查凸面缺陷。

# android - 当用户选择歌曲>使用对话框完成操作>进入我的应用程序时，我如何获取歌曲详细信息

> ID：11186206
> 
> 赞同：1
> 
> 时间：2012-06-25T08:58:25.353
> 
> 标签：android

如何从 sdcard 获取歌曲详细信息并使用我的应用程序完成操作。清单中的属性是什么，如何将歌曲详细信息提取到我的应用程序中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:11:45.133

```
<activity android:label="Name" android:name=".activity.ActivityName" android:configChanges="keyboard|orientation">
<intent-filter>
<action android:name="android.intent.action.VIEW" />
<category android:name="android.intent.category.DEFAULT" />
<data android:mimeType="audio/*" />
</intent-filter>
</activity> 
```

当对话框出现时，请尝试以上操作以使您的应用程序显示在默认列表中。另请参阅*[如何从 MediaPlayer 获取当前播放歌曲详细信息](https://stackoverflow.com/questions/3616956/how-to-get-current-playing-song-details-from-mediaplayer)*以获取当前播放歌曲详细信息。

# android - 加载 main.xml 之前我的 android 应用程序崩溃

> ID：11186209
> 
> 赞同：0
> 
> 时间：2012-06-25T08:58:51.993
> 
> 标签：android, android-manifest

我的 android 应用程序在加载 main.xml 之前崩溃。这是抛出的异常

java.lang.RuntimeException：无法恢复活动...：java.lang.NullPointerException

发生什么了？

为了完整起见，我附上了我的 manifest.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="saverio.puccia.nfcauth"
        android:versionCode="1"
        android:versionName="1.0" >

    //permission

        <uses-sdk android:minSdkVersion="10" />
        <uses-permission android:name="android.permission.NFC"></uses-permission>
        <uses-permission android:name="android.permission.READ_PHONE_STATE"></uses-permission>

    //main declaration

        <application
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name" >
            <activity
                android:name=".NFCAuthActivity"
                android:label="@string/app_name" >

                //intent filter declaration

                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />
                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
                <intent-filter>
                    <action android:name="android.intent.action.NDEF_DISCOVER" />

                    <category android:name="android.intent.category.DEFAULT" />
                </intent-filter>

            </activity>
        </application>

    </manifest> 
```

LOGCAT

```
06-25 11:03:23.670: E/AndroidRuntime(4323): FATAL EXCEPTION: main

06-25 11:03:23.670: E/AndroidRuntime(4323): java.lang.RuntimeException: Unable to resume activity {saverio.puccia.nfcauth/saverio.puccia.nfcauth.NFCAuthActivity}: java.lang.NullPointerException

06-25 11:03:23.670: E/AndroidRuntime(4323):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2456)

06-25 11:03:23.670: E/AndroidRuntime(4323):     at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2484)

06-25 11:03:23.670: E/AndroidRuntime(4323):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1998)

06-25 11:03:23.670: E/AndroidRuntime(4323):     at android.app.ActivityThread.access$600(ActivityThread.java:127)

06-25 11:03:23.670: E/AndroidRuntime(4323):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)

06-25 11:03:23.670: E/AndroidRuntime(4323):     at android.os.Handler.dispatchMessage(Handler.java:99)

06-25 11:03:23.670: E/AndroidRuntime(4323):     at android.os.Looper.loop(Looper.java:137)

06-25 11:03:23.670: E/AndroidRuntime(4323):     at android.app.ActivityThread.main(ActivityThread.java:4507)

06-25 11:03:23.670: E/AndroidRuntime(4323):     at java.lang.reflect.Method.invokeNative(Native Method)

06-25 11:03:23.670: E/AndroidRuntime(4323):     at java.lang.reflect.Method.invoke(Method.java:511)

06-25 11:03:23.670: E/AndroidRuntime(4323):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)

06-25 11:03:23.670: E/AndroidRuntime(4323):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)

06-25 11:03:23.670: E/AndroidRuntime(4323):     at dalvik.system.NativeStart.main(Native Method)

06-25 11:03:23.670: E/AndroidRuntime(4323): Caused by: java.lang.NullPointerException

06-25 11:03:23.670: E/AndroidRuntime(4323):     at saverio.puccia.nfcauth.NFCAuthActivity.onResume(NFCAuthActivity.java:103)

06-25 11:03:23.670: E/AndroidRuntime(4323):     at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1157)

06-25 11:03:23.670: E/AndroidRuntime(4323):     at android.app.Activity.performResume(Activity.java:4539)

06-25 11:03:23.670: E/AndroidRuntime(4323):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2446)

06-25 11:03:23.670: E/AndroidRuntime(4323):     ... 12 more

06-25 11:03:23.670: W/ActivityManager(1998):   Force finishing activity r.intent.getComponent().flattenToShortString() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:11:56.970

从 logcat 中的这一行可以看出：

> 06-25 11:03:23.670: E/AndroidRuntime(4323): 在 saverio.puccia.nfcauth.NFCAuthActivity.onResume(NFCAuthActivity.java:103)

`NullPointerException`你在第 103 行有一个`onResume`函数。去那里，这将是你的答案。

# jar - 签名时相同的jar，签名后不同的md5

> ID：11186212
> 
> 赞同：0
> 
> 时间：2012-06-25T08:59:02.133
> 
> 标签：jar, md5, hash, checksum

为什么当我签署文件时 md5 校验和总是改变？我在签名之前有相同的 jar 文件，但是如果我签名两次，则两个签名 jar 的 md5 校验和是不同的。我的问题是为什么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:01:59.527

可能是因为对文件进行签名会注入签名，从而更改文件的内容。更改文件的内容当然会更改摘要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T09:03:32.483

这取决于签名过程，但是出于安全原因，文档的签名使用随机（比如 256 位）数据进行。否则会成为一个障碍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T10:06:41.540

再会。这是因为您的哈希不仅创建了常量数据的形式。这种散列方法称为`salt`（熵）。

例如：

> > md5（名称+盐）

盐可能是时间或任何非恒定数据

[熵](https://www.google.ru/#hl=ru&newwindow=1&sclient=psy-ab&q=wiki+entropy+cryptography&oq=wiki+entropy+cr&aq=0KL&aqi=g-KL1g-bKL1&aql=&gs_l=hp.3.0.0i30i19j0i8i30i19.23643.24502.21.25852.3.3.0.0.0.0.479.751.0j2j4-1.4.0...0.0.J-iVVFnhw2A&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&fp=39938a686955499f&biw=1115&bih=619)

# sockets - 使用套接字编程和 ActiveMQ 的请求/响应

> ID：11186213
> 
> 赞同：-1
> 
> 时间：2012-06-25T08:59:02.413
> 
> 标签：sockets, activemq

使用 Java 套接字编程从 ActiveMQ 请求/响应的任何方式。我的 ActiveMQ 正在运行，我想使用 java 套接字编程请求 ActiveMQ，MQ 应该响应客户端请求。怎么做？任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:47:46.037

除非您在自己的代码中实现整个 OpenWire 协议或 STOMP 是不可能的。您最好使用现有客户端之一，例如 StompJMS 或在 activemq-core.jar 中找到的本机 ActiveMQ 客户端。如果您一心想通过自己的套接字代码来做这件事，那么请对 STOMP 规范进行一些研究，因为这是从您自己的套接字代码与 ActiveMQ 对话的最简单方法。

# android - 在 Android 中覆盖 EditText 的样式

> ID：11186222
> 
> 赞同：5
> 
> 时间：2012-06-25T08:59:40.637
> 
> 标签：android, styles, android-edittext

我需要覆盖两个 EditText 实例的样式。我对此有两个问题：

1) 一个 EditText 用于输入密码，但字体相同。如果我删除 password=true 它可以工作。默认字体=sans。

```
<style name="customEdit" parent="@android:style/Widget.EditText">
    <item name="android:password">true</item>
    <item name="android:typeface">serif</item>  //doesn work.
</style> 
```

2）两个字段都有提示。我需要设置这些提示的颜色；可能吗？我没有找到这样的东西：android：hintColor ...

```
<item name="android:textColor">#acacac</item> //works for text only. 
```

我尝试了两种密码类型的变体：

*   android:inputType="textPassword"
*   安卓：密码=真

两者都自动将字体更改为默认字体，即使在“UI 构造函数”中也是如此。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T09:25:03.830

对于您的第二个问题，这可能会有所帮助（在 EditText 标签下）：

```
 android:textColorHint="#3b64a8" 
```

在您的活动中：

```
 passwordText.setTypeface(Typeface.SERIF);
    passwordText.setTransformationMethod(new PasswordTransformationMethod()); 
```

这里“passwordText”是密码的EditText。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T10:27:08.107

这应该可以，试试看

```
<style name="customEdit" parent="@android:style/Widget.EditText">
        <item name="android:inputType">textPassword</item>
        <item name="android:password">true</item>
        <item name="android:typeface">serif</item> 
        <item name="android:textColorHint=">#F28EC1</item>
        <item name="android:textSize">20sp</item>
        <item name="android:textStyle">bold</item>         
    </style> 
```

# html - 测试出现在下一列图像的底部

> ID：11186227
> 
> 赞同：0
> 
> 时间：2012-06-25T09:00:01.237
> 
> 标签：html, css, xhtml, sass

我正在尝试添加图像，然后在该图像的右侧放置一些文本（标题）以及该标题下方的位置和 ul。但问题是当我使用 float left to img 时，文本出现在图像的右侧，但也出现在图像的底部。我想让文本和 ul 显示在右侧，同时也显示在图像的顶部。

目前如下图所示

![在此处输入图像描述](../Images/703ef7fc15af4cfcce073ff56b8bf801.png)

```
<img src="images/image1.png" width="48" height="48" class="intro" />
<p class="title">
    Inter
</p>
<p>
<ul>
<li>One statement</li>
<li>One statement</li>
<li>One statement</li>
</ul>
</p>

<img src="images/image1.png" width="48" height="48" class="intro" />
<p class="title">
    Inter
</p>
<p>
<ul>
<li>One statement</li>
<li>One statement</li>
<li>One statement</li>
</ul>
</p>

<img src="images/image1.png" width="48" height="48" class="intro" />
<p class="title">
    Inter
</p>
<p>
<ul>
<li>One statement</li>
<li>One statement</li>
<li>One statement</li>
</ul>
</p>

.intro {
    float: left;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T09:14:49.597

使用显示显示：inline-block；在 p 和 li 或使用

```
<div class="edit">
    <img src="images/image1.png" width="48" height="48" class="intro" />
    <p class="title">
        Inter
    </p>
    <p>
    <ul>
    <li>One statement</li>
    <li>One statement</li>
    <li>One statement</li>
    </ul>
    </p>
   </div> 
```

CSS：

```
.div{
 float:left;
 width:400px or 100%;
 }
 img
{
  width:50%
} 
```

像这样接近或使用 display:inline-block;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T09:22:48.377

正如 Arpit 所说，使用内联块。此外，图像非常小，因此您可以选择在图像和 ul 中添加一些边距/填充以使所有内容正确对齐

[例子](http://codepen.io/pen/5496/3)

# struts2 - 用于不同类型的多个文件上传的拦截器

> ID：11186232
> 
> 赞同：0
> 
> 时间：2012-06-25T09:00:25.210
> 
> 标签：struts2

我创建了两个不同的文件上传。一种用于媒体类型，一种用于相同形式的图像类型。我应该如何在 struts.xml 中编写拦截器，以便它只允许 mediaFileUpload 中的媒体上传和 imageFileUpload 中的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:34:51.413

另一种选择是在操作的`validate`方法（或在`execute`方法本身，尽管 IMO 在错误的地方做这项工作）中验证每个文件的 mime 类型。

请参阅[文件上传文档中的文件类型部分](http://struts.apache.org/2.x/docs/file-upload.html#FileUpload-FileTypes)。简而言之，每个文件的 mime 类型都设置为`setXxxContentType`（`xxx`文件属性名称在哪里）。可以将 mime 类型属性与您在`validate`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T09:29:15.057

创建您自己的自定义[拦截器堆栈](http://struts.apache.org/2.3.1/docs/interceptors.html#Interceptors-FrameworkInterceptors)并根据您的要求对其进行配置。您需要按照以下步骤操作

1.  创建自定义拦截器堆栈
2.  根据您的要求配置自定义堆栈

# c# - WPF 组合框数据绑定选定项

> ID：11186234
> 
> 赞同：5
> 
> 时间：2012-06-25T09:00:42.777
> 
> 标签：c#, wpf, data-binding, mvvm

我正在尝试将 a 数据绑定`ComboBox`到`strings`. 到目前为止，我得到了以下内容：

在我看来，我有：

```
<ComboBox Height="23" 
          HorizontalAlignment="Left" 
          Margin="133,180,0,0" 
          Name="comboBox1" 
          ItemsSource="{Binding Hours}" 
          VerticalAlignment="Top" 
          Width="38" /> 
```

在我的 ViewModel 中，我有：

```
private List<string> tripTimeHours = new List<string>();
private List<string> tripTimeMinutes = new List<string>();

public CreateTripViewModel()
{
    TripName = new DataWrapper<string>(this, tripNameChangeArgs);
    TripName.IsEditable = true;
    setObjects();
    CreateTripFiredCommand = new SimpleCommand<object, EventToCommandArgs>(ExecuteCreateTripCommand);
}

private void setObjects()
{
    for (int i = 0; i < 24; i++)
    {
        tripTimeHours.Add(i.ToString());
    }

    for (int i = 0; i < 60; i++)
    {
        tripTimeMinutes.Add(i.ToString());
    }
}

public List<string> Hours
{
    get
    {
        return tripTimeHours;
    }
}

public List<string> Minutes
{
    get
    {
        return tripTimeMinutes;
    }
} 
```

我想要做的是从这些组合框中返回选定的项目。我想我快到了，但只需要完成最后一步。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-25T09:06:59.577

添加绑定到ViewModel 上`ComboBox.SelectedItem`的新属性的绑定`string`

```
<ComboBox ITemsSource="{Binding Hours}" SelectedItem="{Binding SelectedItem}" />

class ViewModel
{
    public string SelectedItem {get; set;}
} 
```

# iphone - 在 UIAlertview 中均匀排列列表

> ID：11186235
> 
> 赞同：2
> 
> 时间：2012-06-25T09:00:49.153
> 
> 标签：iphone, ios, ipad, uialertview

所以我有一个我在游戏结束时显示的高分列表`UIAlertView`以及用户自己的分数。

![在此处输入图像描述](../Images/9a1b42b5b874ac8d44dc467221e45c14.png)

我想知道是否有办法格式化此文本，以便它出现在格式良好的列表中，不同名称和时间的间距均匀，或者我是否必须创建自己的界面而不是使用`UIAlertView`.

编辑：代码`UIAlertView`

```
UIAlertView *alertView =[[UIAlertView alloc] initWithTitle:nil message:[NSString stringWithFormat:@"Your Time: %.2f seconds.\n\n1\. %@    %@\n2\. %@    %@\n3\. %@    %@\n4\. %@    %@\n5\. %@    %@",currentTime,[array objectAtIndex:0],[scoreArray objectAtIndex:0],[array objectAtIndex:1],[scoreArray objectAtIndex:1],[array objectAtIndex:2],[scoreArray objectAtIndex:2],[array objectAtIndex:3],[scoreArray objectAtIndex:3],[array objectAtIndex:4],[scoreArray objectAtIndex:4] ] delegate:self cancelButtonTitle:nil otherButtonTitles:@"Main Menu",@"Play Again", nil]; 
```

两个数组都取自`NSUserDefaults`

编辑 2：此外，名称限制为 10 个字符

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T09:30:07.957

尝试使用 \t 和 % .2f 这应该会有所帮助。

您可以根据名称的长度计算您需要多少空间，并将其用作名称等之间的单独刺痛。它看起来很复杂，但应该可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T09:16:45.547

这将需要通过添加制表符和空格来进行一些字符串操作和格式化，我的意见是构建您自己的视图来表示您的自定义信息

# mercurial - 重命名旧提交

> ID：11186240
> 
> 赞同：1
> 
> 时间：2012-06-25T09:01:06.780
> 
> 标签：mercurial

有没有一种***安全的方法***来重命名一个旧的提交（同时没有发生分支），它是从当前提示开始的大约五到六个提交？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T09:46:15.330

这取决于您是否已经将此提交推送到公共存储库，或者包含合并。当提交已经公开可见时，之后就无法更改提交。此外，可能的 MQ 工作不允许在之后编辑合并提交。

当提交不公开可见时，您可以将所有提交导入 MQ（启用 mq 扩展并`hg qimport -r»Revision«`为您的提交是祖先的每个修订调用）。然后你取消应用所有的补丁`hg qpop --all`。之后，您可以使用 更改分支名称`hg branch »name«`，当提交确实引入了新的分支名称时，您还需要调用它（在 qpop 之后，如果没有分支名称，则提交的祖先的分支名称将用于下一个 qpush 命令是显式设置）。当您想要编辑提交消息时，您可以通过`hg qpush && hg qrefresh -e`. 要完成编辑，请调用`hg qpush --all && hg qfinish --applied`.

**编辑：示例工作流程**

假设这是初始状态，您要编辑 4：

```
8 [default] (tip)
|
7
|
6
|
5
|
4
|
3
|
2
|
1
|
0 
```

现在您将所有修订（包括 4）导入到 mercurial 队列中`hg qimport -r 4:8`，现在您有以下历史记录：

```
8 [default] (8.diff, qtip, tip)
|
7 (7.diff)
|
6 (6.diff)
|
5 (5.diff)
|
4 (4.diff, qbase)
|
3 (qparent)
|
2
|
1
|
0 
```

下一步是取消应用所有补丁：`hg qpop --all`

```
3 [default] (tip)
|
2
|
1
|
0 
```

不要惊慌，你的历史并没有消失，它仍然存在于 .hg/patches 中。现在可以使用 设置分支名称`hg branch newbranch`。在创建新提交之前，这在历史记录中是不可见的。但分支名称可以用`hg branch`.

现在第一个冻结的提交可以重新应用`hg qpush`：

```
4 [newbranch] (4.diff, qbase, qtip, tip)
|
3 [default] (qparent)
|
2
|
1
|
0 
```

现在您可以使用`hg qrefresh --edit`. 您还可以通过编辑工作副本中的一些文件来更改内容。因此，如果您只想更改提交消息，请确保在调用之前没有修改工作副本中的任何文件`hg qrefresh`。如果您`hg status`在调用`hg qrefresh`.

```
 4 [newbranch] (4.diff, qbase, qtip, tip) {new commit message}
 /
3 [default] (qparent)
|
2
|
1
|
0 
```

`hg qpush`您可以通过使用和导航到每个提交来编辑进一步的提交`hg qpop`。完成后，您需要将补丁转换回信息定期修订。这是通过应用所有补丁来完成的，并完成队列。这是由 完成的`hg qpush --all`，然后是``hg qfinish --all`。现在历史看起来是这样的：

```
 8 [newbranch] (tip)
  |
  7
  |
  6
  |
  5
  |
  4 {new commit message}
 /
3 [default]
|
2
|
1
|
0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T03:00:57.700

由于这是一个尚未推送到任何地方的私人仓库，因此编辑历史记录应该是完全安全的。（请注意，*在一般情况下*，历史编辑不是一个可行的选择。它仅适用于尚未发布回购的情况。）

有很多 Mercurial 扩展允许编辑历史，`mq`就是其中之一。但是，`histedit`在您的情况下，扩展可能更容易。它不包含在 Mercurial 中，但可以从[https://www.mercurial-scm.org/wiki/HisteditExtension](https://www.mercurial-scm.org/wiki/HisteditExtension)轻松安装。

设置好后：

```
$ hg histedit -r $ID_OF_THE_CHANGESET_YOU_WANT_TO_EDIT 
```

这将打开您通常用于的任何文本编辑器`hg commit`，并带有变更集列表；此列表包括您指定的变更集*之后*的每个变更集，因此请滚动到底部。对于每个变更集，您都会看到类似的内容：

```
pick 2d5657b340e5 The original message for that commit 
```

对于您需要修改的变更集，更改`pick`为`edit`. 然后保存退出。返回 shell 提示符，执行以下操作：

```
$ hg histedit --continue 
```

和往常一样，系统会提示您输入新的提交消息。

# foreach - BPEL foreach 完成条件不起作用

> ID：11186243
> 
> 赞同：1
> 
> 时间：2012-06-25T09:01:16.883
> 
> 标签：foreach, bpel, apache-ode

我正在尝试让 BPEL foreach 完成条件工作。因此我做了一个非常简单的测试用例。我有一个 foreach 循环等待 $Counter 秒，然后将 $Counter 值分配给输出。因此，在 4 个循环和属性“parallel”设置为 no 的情况下，我等待 10 秒（1 + 2 + 3 + 4）并得到响应“1234”。使用 "parallel" = yes 我等待 4 秒（由于并发行为）并得到相同的结果。

现在我添加完成条件。第 79 行[http://pastebin.com/MbLMcNag](http://pastebin.com/MbLMcNag)

规范说：

> 没有 a 的活动在其所有子项都完成后完成。可以选择指定该元素以防止某些子项执行（在串行情况下），或强制提前终止某些子项（在并行情况下）。

所以我希望只得到“12”作为结果，并在顺序情况下等待 3 秒，在并行情况下等待 2 秒。但我总是得到“1234”并等待 10 / 4 秒。所以完成条件完全被忽略了。你能告诉我我做错了什么吗？

我使用在 Tomcat 上运行的 Apache ODE 1.3.5。

这是完整的 bpel 流程： [http ://pastebin.com/MbLMcNag](http://pastebin.com/MbLMcNag)

# ruby-on-rails - 如何比较 Heroku 生产模式与本地开发模式？

> ID：11186244
> 
> 赞同：2
> 
> 时间：2012-06-25T09:01:19.397
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, postgresql, schema

我最近在尝试更改架构中的列名时遇到了错误。它在本地工作，但是当我在 Heroku 上进行 db:migrated 时，它给了我一个错误，说该列不存在。

过去，我一直不擅长统一我的生产模式和开发模式。这可能是因为我在本地创建了迁移，在本地运行了 db:migrate，然后由于某种原因在本地删除了迁移，然后推送到 heroku，导致迁移在本地运行但不在 prod 中运行。（我现在知道这是一件很糟糕的事情，我应该在 self.down 中输入相反的函数并执行 rake db:rollback）

我想知道的是，如何检查我的本地模式和产品模式是否不同，有没有办法可以更改本地表/列以适应产品？因为它似乎只适用于生产的东西，而且我知道我的本地环境中有无用的表/列。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T12:28:35.440

您可以使用以下命令在 Heroku 上运行 bash 控制台：

```
heroku run bash -a app_name 
```

从那里您可以使用标准 bash 命令导航文件系统，并将您的`schema.rb`文件与本地`schema.rb`.

为了统一架构，我建议阅读[Rails Guide to Migrations](http://guides.rubyonrails.org/migrations.html)中有关 Schema 转储的详细信息。您可以将架构文件复制到本地环境，然后运行“rake db:reset”，这将删除您的开发数据库并从新架构重新创建它。请务必阅读架构转储详细信息，因为根据数据库的需要转储架构的方法不止一种。显然，在开始之前备份你需要的任何东西。

从那时起，您应该回到干净的状态，在那里您可以再次正确地开始迁移以更新您的本地应用程序和 Heroku。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T22:05:45.910

`rake db:schema:dump`[记录在 Heroku 的文件系统上](https://devcenter.heroku.com/articles/rake)不能正常工作。

您可以使用这个单行打印在 Heroku 上运行的 Rails 应用程序的架构：

```
heroku run rails runner "\"sio = StringIO.new; ActiveRecord::SchemaDumper.dump(ActiveRecord::Base.connection, sio); puts sio.string\"" --app [YOUR APP NAME] 
```

# php - 在 php 中对抗 BOM

> ID：11186247
> 
> 赞同：1
> 
> 时间：2012-06-25T09:01:31.330
> 
> 标签：php, mysql, byte-order-mark

我已经`Coda`为 mac 编写了我的 php 脚本。一切都很好，直到我在网上发布了脚本。第一个问题是`session_start()`即使在第 1 行也不起作用。但是，解决方案是`BOM`文件中存在导致问题的字节。然后我将所有文件移动到我的 windows 计算机上并运行它们`notpad++`并将所有文件保存在`UTF-8 Without BOM`. 会话工作现在开始了，但我在一些文件中发现了一些字符，例如`login.php`在我的脚本中。

人物是这样的：`ï»¿ ï»¿ ï»¿ ï»¿ ï»¿ ï»¿ï»¿`

我在网上搜索并查看了这些主题

[从文件中删除 BOM](https://stackoverflow.com/questions/5565803/remove-bom-from-files)

[用 BOM 搜索 UTF-8 文件的优雅方式？](https://stackoverflow.com/questions/204765/elegant-way-to-search-for-utf-8-files-with-bom)

[使用 awk 去除字节顺序标记](https://stackoverflow.com/questions/1068650/using-awk-to-remove-the-byte-order-mark)

但还是一样的:(

提前致谢。

有关字符的更多信息，请参见图片。 ![在此处输入图像描述](../Images/b525a4db63d7116507d74335e0feb895.png)

![在此处输入图像描述](../Images/90b2c3bd2b09bb365341ed3f6e262d59.png)

# c# - c# UDP客户端服务器问题

> ID：11186250
> 
> 赞同：0
> 
> 时间：2012-06-25T09:01:36.023
> 
> 标签：c#, connection, udp, client-server

我有一个 udp 客户端和一个 udp 服务器。udp 客户端和服务器实际上是在物理上断开连接的。所以我只能向 udp 服务器发送消息，但我无法确认数据是否正确接收。

所以我正在做的是发送一个 4 字节的标头，它将指定我将要发送的数据量。然后我根据我之前发送的大小读取数据。

**客户端**

```
// Sending Header(header is the size of the data)
byte[] header = BitConverter.GetBytes(data.Count());
socket.SendTo(header, 0, header.Count(), SocketFlags.None, outEP);
// Sending Data
socket.SendTo(data, 0, data.Count(), SocketFlags.None, outEP); 
```

**服务器端**

```
// Receiving input size
int receivedCount = socket.EndReceive(result);
// Header is filled on BeginReceive
Int32 count = BitConverter.ToInt32(header, 0);
if(count != receivedCount) throw;
// Then I receive the count relevent
socket.Receive(data, 0, count, SocketFlags.None); 
```

出现了几个问题：

1.  计数！=收到计数

    这就是我进行检查的原因，但有时会发生，有时不会。我确实需要最大程度的保证。我发现当计数不同时，不是因为字节数下降或网络问题。我只是有时没有收到标题 - 只有数据，当我读取 4 个字节时，我实际上读取了 4 个字节的数据，这就是它失败的原因。

    数据有时会**覆盖**标题。 *这是为什么？我该如何解决这个问题？*

2.  有时我也会在 socket.Receive 上收到以下错误

    *在数据报套接字上发送的消息大于内部消息缓冲区或某些其他网络限制，或者用于接收数据报的缓冲区小于数据报本身*

    问题是有时会发生这种情况，而大多数情况下不会……我可以在最大缓冲区中接收所有内容……但是我会遇到内存问题。

    这应该是高性能和尽可能有保证的交付。这必须是udp，因为服务器端无法物理联系客户端它是一种方式 - 客户端到服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:49:55.933

使用 UDP 时，您将需要双向通信，并确保没有丢失、重复或混乱的数据包。
你看过像[PGM](http://www.google.de/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&sqi=2&ved=0CGEQFjAB&url=http://en.wikipedia.org/wiki/Pragmatic_General_Multicast&ei=sl3oT4SpCIPbtAaYrLWVAQ&usg=AFQjCNHNq-ji7hKAoZpy7eTILTVudz1fsQ&sig2=frqX7xzbXV4U1mKkMaD5Jw) - Pragmatic Multicast 这样的协议吗？
此外，您可能需要一个线程来快速清理网络堆栈，然后将数据发布到队列或其他一些内存数据结构中。网络堆栈比您想象的要小得多，而且比您想象的更快。
编辑：UDP的问题在于，根据定义，您可能丢失或重复包或订单更改，即使接收器检测到它们，当无法通信时接收器应如何请求更正它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T11:53:12.390

UDP 不保证数据包按照您发送它们的顺序到达（或者它们完全到达）。我怀疑任何东西都会被覆盖/覆盖。您必须在一个数据包中发送标头和有效负载。

~~你考虑过使用 TCP 吗？您可能会争辩说 UDP 更快，但如果您要自己实现数据包重新排序，您将失去这种优势。~~（错过了它*必须*是UDP）。

如果您查看 TCP（网络层处理重传）或UDP 上的[SIP](http://www.ietf.org/rfc/rfc3261.txt)（​​软件处理重传），有办法检测丢失的数据包并重新传输它们。例如，您可以为您的数据包编号，并让接收者确认收到每个数据包。

# c# - 当文本从 javascript 更改时，文本框的 TextChanged 事件未触发

> ID：11186254
> 
> 赞同：1
> 
> 时间：2012-06-25T09:01:57.123
> 
> 标签：c#, asp.net

我有一个文本框，我从日历扩展器中填充日期，代码如下：-

```
<label for="input-one" class="float"><strong>Date</strong></label><br />                  
<asp:TextBox ID="txtDate" runat="server" CssClass="inp-text" Enabled="false" AutoPostBack="true"
             Width="300px" ontextchanged="txtDate_TextChanged"></asp:TextBox>
<asp:ImageButton ID="btnDate2" runat="server" AlternateText="cal2" 
                 ImageUrl="~/App_Themes/Images/icon_calendar.jpg" style="margin-top:auto;" 
                 CausesValidation="false" onclick="btnDate2_Click" />
<ajaxToolkit:CalendarExtender ID="calExtender2" runat="server" 
                              Format="dddd, MMMM dd, yyyy" 
                              OnClientDateSelectionChanged="CheckDateEalier" 
                              PopupButtonID="btnDate2" TargetControlID="txtDate" />
<asp:RequiredFieldValidator ID="RequiredFieldValidator7" runat="server" 
                            ControlToValidate="txtDate" ErrorMessage="Select a Date" Font-Bold="True" 
                            Font-Size="X-Small" ForeColor="Red"></asp:RequiredFieldValidator><br /> 
```

Javascript代码是：-

```
function CheckDateEalier(sender, args) 
{
    sender._textbox.set_Value(sender._selectedDate.format(sender._format))
} 
```

我的要求是当日期输入到文本框中时，我想调用这个方法：

```
public void TimeSpentDisplay()
{
        string date = txtDate.Text.ToString();
        DateTime dateparsed = DateTime.ParseExact(date, "dddd, MMMM dd, yyyy", null);
        DateTime currentDate = System.DateTime.Now;
        if (dateparsed.Date > currentDate.Date)
        {
            divtimeSpent.Visible = true;
        }
        if (dateparsed.Date < currentDate.Date)
        {
            divtimeSpent.Visible = true;
        }
        if (dateparsed.Date == currentDate.Date)
        {
            divtimeSpent.Visible = false;
        }
} 
```

请帮助我，我是如何实现这一点的，因为我在方法内部调用此方法，`txtDate_TextChanged`但由于文本框内的文本发生更改，事件没有触发。

请建议我如何实现这一目标或给我一个替代想法来满足我的要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:14:13.960

我已经修复了它，因为我的文本框位于 ajax 更新面板内，这就是事件没有触发的原因。我在更新面板中为该文本框添加了一个触发器，它工作正常。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-25T09:13:56.153

您必须将文本框的 AutoPostBack 属性更改为 true。

希望这可以帮助你。

# c++ - 为什么'int i = i;' 合法的？

> ID：11186261
> 
> 赞同：29
> 
> 时间：2012-06-25T09:02:32.647
> 
> 标签：c++

> **可能重复：**
> [int var = 1; void main() { int i = i; }](https://stackoverflow.com/questions/3173462/int-var-1-void-main-int-i-i)

以下代码在 g++ 和 Visual C++ 下都可以通过编译。为什么是合法的？它看起来不合理，并且可能会导致隐藏的错误。

```
int main() {
  int i = i;
} 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-06-25T09:03:21.907

**编辑：**它在**语法上是合法**的，但如果你使用`x`.

这是**不**合法的，因为您正在为一个未初始化的变量分配另一个（好吧，相同的）未初始化的变量。仅仅因为它编译并不意味着它是合法的。这是有效的 C++ 语法，是的，但不合法。

赋值运算符的右侧必须在赋值时进行全面评估。在这种情况下，就是`i`，它没有被初始化。

感谢 Steve Jessop，他挖出了这句话：

**4.1/1，左值到右值的转换**

> [...] 如果对象未初始化，则需要此转换的程序具有未定义的行为。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-25T09:31:38.623

语法允许它的原因是，在某些奇怪的情况下，您可能想在自己的初始化程序中通过指针或引用来使用变量：

```
struct ThingManager {
    void *thing;
    ThingManager(void *thing) : thing(thing) {}
    void Speak() {
        if (thing == (void*)this) {
            std::cout << "I'm managing myself\n";
        } else {
            std::cout << "I'm managing " << thing << "\n";
        }
    }
};

ThingManager self_manager(&self_manager);
ThingManager other_manager(&self_manager); 
```

因此，C++ 允许您在其自己的初始化表达式中引用一个对象（其名称在范围内）。然后像以往一样在 C++ 中，确保您实际上不使用未初始化的值是您的问题（您的示例`int i = i;`确实使用了未初始化的值）。

您的编译器可能有助于识别未初始化值的使用，但标准并不要求这样做。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-25T09:08:05.100

您可以使用（与 结合使用）`g++`警告您有关此用例的信息，如果您将警告视为错误，它应该满足您的需求。`-Winit-self``-Wuninitialized`

这种使用复制构造函数进行自初始化的技术有时用于禁止执行全局对象的默认构造函数/初始化程序。如果全局对象的默认构造函数只是为了`0`初始化对象，但该对象在构造函数被执行之前被使用，这可能是必要的。作为对 C 的回归，全局变量`0`在程序启动时被初始化，然后 C++ 运行时开始执行全局构造函数。对于那些将执行的已定义构造函数仅用于`0`输出对象的狭窄情况，自初始化不会造成任何伤害。

在一般情况下，复制构造函数自初始化是不好的做法，因为它通常会导致与使用未初始化变量相同的问题（即未定义的行为）。在 OP 问题的特定示例中，`i`是本地的`main`，因此未初始化。读取未初始化变量的结果始终是未定义的行为。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-25T09:33:55.630

您可以使用任何先前声明的变量作为另一个变量的初始化程序。

在这种情况下，编译器一解析`int i`就将其添加到符号表中，因此当它看到`= i`初始化程序时，可以从前面的声明中解析符号。

这不是一个错误，因为编译器可以理解它，因为它可以生成明确地执行源代码指定的代码，即使它在语义上是可疑的。C 和 C++ 的哲学是编译任何可以在语法上编译的东西。语义错误通常只发出警告，并且只有在启用此类警告时才发出。

# jquery - 在 chrome/safari 中展开时如何折叠选择框？

> ID：11186264
> 
> 赞同：4
> 
> 时间：2012-06-25T09:02:49.860
> 
> 标签：jquery, google-chrome, safari, blur, drop-down-menu

我有一个要求——当用户将鼠标悬停在链接上时，我必须折叠一个选择框。

我的代码似乎适用于 FF 和 IE，但不适用于 Safari 和 Chrome。[这是](http://jsfiddle.net/SX8U6/ "http://jsfiddle.net/SX8U6/")它的简化版本。

请告知我错过了什么？

编辑：感谢 Rob 指出这一点。当我说“我必须失去焦点”时，我的意思是，“我必须折叠选择框并将焦点移出/模糊”。

编辑：我想我的问题和总结不正确/具有误导性。我试图改写它，以显示我的要求/问题。无论如何，[这](http://jsfiddle.net/SX8U6/2/ "http://jsfiddle.net/SX8U6/2/")就是我现在所拥有的。这是一个 hack，但它现在似乎也可以在 Chrome 上运行，但是 Safari 仍然很难获得。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:15:02.140

I'm guessing this is way past your need for this, and it's not a "good" solution, but in case anyone happens upon this. I was able to get it to work in Chrome with your existing code only by hiding the select on hover of the link, then showing it again when the mouse leaves (I didn't try Safari).

[http://jsfiddle.net/52enE/](http://jsfiddle.net/52enE/)

There's another solution to create a dummy select, but it was reported as not working in the latest chrome at the time:

[Close a SELECT dropdown list programatically with Javascript/jQuery](https://stackoverflow.com/questions/10851882/close-a-select-dropdown-list-programatically-with-javascript-jquery)

Since the browser controls the select and how form elements are viewed there's probably no good way around this...the "best" (still not good) solution would probably be to use a custom input that acts like a select but can be fully controlled with a hide() call...or find a way to change the requirements :)

# extjs4 - ExtJs JSONStore 输入数据格式

> ID：11186265
> 
> 赞同：0
> 
> 时间：2012-06-25T09:02:55.627
> 
> 标签：extjs4

这是我的代码：

```
function getStore (json) {
    var reader = new Ext.data.JsonReader({
       root : 'data',
       successProperty: 'success',
       totalProperty: "rows",
       fields : [
        {name: 'num', allowBlank:'true'},
        {name: 'date', dateFormat:'d.m.Y H:i:s', type: 'date'},
        {name: 'signerFIO', type: 'string'},
        {name: 'checkSign', type: 'boolean'}
       ]
   });

   var store = new Ext.data.JsonStore ({
     data   : json,
     reader : reader
   });

   return store;
} 
```

来自服务器的数据是：{`"data":[{"num":"111","signerFIO":"hello","checkSign":true,"date":"25.05.2012"}],"success":1,"rows":1}`

我尝试将“json”函数参数设置为原始 json（到达时）和 Ext.util.JSON.decode(response.responseText)

我已经在 FF 和 FireBug 中尝试过这段代码，但我遇到了奇怪的`h is undefined`错误。

有人知道出了什么问题吗？

**更新**

这

```
var store = new Ext.data.JsonStore ({
    data     : json,
    fields   : ['data']
}); 
```

在没有错误的情况下为我工作，但也没有加载数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:09:55.080

我真的不确定你想用这段代码做什么，但这会让它工作（假设 json 是一个解码的对象而不是一个字符串）：

```
Ext.define("MyItem", {
    extend: "Ext.data.Model",
    fields: [
        {name: 'num', allowBlank:'true'},
            {name: 'date', dateFormat:'d.m.Y H:i:s', type: 'date'},
            {name: 'signerFIO', type: 'string'},
            {name: 'checkSign', type: 'boolean'}
    ]
});
function getStore (json) {

   var store = new Ext.data.JsonStore ({
     data:  json.data,
     model: MyItem
   });

   return store;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:14:15.500

问题出在读者身上（其实我也不知道是什么问题）。这：

```
function getStore (jsonRequestUrl) {
var store = new Ext.data.JsonStore ({
    autoLoad : false,
    proxy    : new Ext.data.HttpProxy({ url: jsonRequestUrl, method: 'POST' }),
    root     : 'data',
    successProperty : 'success',
    totalProperty   : "rows",
    idProperty      : "id",
    fields : [
        {name: 'num', type: 'string', mapping: 'num'},
        {name: 'signerFIO', type: 'string', mapping: 'signerFIO'},
        {name: 'checkSign', type: 'boolean', mapping: 'checkSign'},
        {name: 'date', dateFormat:'d.m.Y', type: 'date', mapping: 'date'}
    ]
});
store.load();

return store;
} 
```

为我工作。

# c++ - 将用户的长数字保存在数组中（c ++）

> ID：11186268
> 
> 赞同：0
> 
> 时间：2012-06-25T09:02:58.847
> 
> 标签：c++, arrays, input, long-integer, getline

我需要从用户那里读取数字`1000101`并保存在一个数组中。

例如 ：

```
int array1 [6]={1,0,0,1,0,1}; 
```

但我需要用户在一行中输入数字。知道如何将用户的一个长数字保存在数组中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T09:08:08.220

您可以从`std::cin`例如[`std::getline`](http://en.cppreference.com/w/cpp/string/basic_string/getline). 获得该行后，一次获取一个字符并检查它是 1 还是 0，然后将其转换为整数并将其添加到数组中。

请记住检查字符串和数组的限制，以免超出范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T09:51:59.510

```
char c;
std::vector<int> number;
while (std::cin >> c)
    if (c == '0' || c == '1')
        number.push_back(c - '0');
    else if (c == '\n')
        break;
    else
        throw std::runtime_error("illegal characters in number"); 
```

# javascript - ExtJS 多视图实例

> ID：11186269
> 
> 赞同：2
> 
> 时间：2012-06-25T09:03:01.897
> 
> 标签：javascript, extjs, extjs4.1

我正在尝试向选项卡面板的每个选项卡添加相同类型的工具栏。

问题是，如果我将它们添加到一个`afterrender`函数中（使用`add()`and `doLayout()`），我只会在最后创建的选项卡上获得一个工具栏。

如果我在每个选项卡中添加正确的`xtype`，以便从一开始就添加工具栏，我也只会得到一个实例，它甚至无法正确呈现。

我应该如何创建同一视图的多个实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:34:28.880

问题不在于实例的数量，而在于我创建所需按钮的方式：它们是全局变量。这就是为什么他们从一个工具栏移到另一个工具栏，使工具栏本身看起来好像消失了。

# jquery - jQuery：2个fadeIn调用彼此在iPhone上不起作用

> ID：11186271
> 
> 赞同：2
> 
> 时间：2012-06-25T09:03:06.273
> 
> 标签：jquery, iphone, fadein

我正在开发一个 PhoneGap/JQueryMobile 应用程序。我有一个容器 div，其中包含另一个带有图像和文本的 div（两个 div 在动画开头都有“display:none;”css 属性）。我想淡入容器，然后淡入里面的 div。这是代码：

```
$(".container").fadeIn(350, function(){
    $(".innnerDiv").fadeIn(350);
}); 
```

这适用于计算机浏览器、iPad，但不适用于 iPhone。容器正确淡入淡出，但内部 div 仅在动画结束时显示。

有谁知道这可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T10:45:24.213

根据我的经验，我要补充一点，您应该始终`.stop(true, true)`在动画调用之前添加一个（无论是淡入淡出、滑动、动画......）。

如果在另一个动画开始之前没有停止并从队列中删除动画，它可能会产生奇怪的结果甚至冻结您的应用程序。

# python - 最新 100 次提及 - Twitter api

> ID：11186272
> 
> 赞同：0
> 
> 时间：2012-06-25T09:03:08.893
> 
> 标签：python, python-3.x, twitter, twitter-oauth

我希望实现以下目标：

对于特定的人，例如 BarackObama，我想获得**他被提及的最后 100 次/推文**。不是他自己的推文，而是包含@BarackObama 的其他人的推文。最后我想要：提到的人，位置，日期时间。此内容应写入**平面文件**。

我一直在尝试使用 Twitter API 和 Python，取得了成功，但还没有成功解决上述问题。

我知道 twitter 网站上有一个开发部分，但他们没有提供任何代码示例！ [https://dev.twitter.com/docs/api/1/get/statuses/mentions](https://dev.twitter.com/docs/api/1/get/statuses/mentions) count=100 ....

对我来说，脚本语言或做事方式无关紧要，它是结果。我刚刚在互联网上看到 python 和 Twitter api 是一个很好的匹配。

非常感谢提前！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T09:14:11.480

据我所知，您应该使用[GET 搜索](https://dev.twitter.com/docs/api/1/get/search)，而不是相对于`GET statuses/mentions`身份`statuses/mentions`验证用户而言。

只需使用用户名，在这种情况下`@BarackObama`作为搜索词，它应该会产生您正在寻找的内容。

至于示例代码，您可以查看[Python-Twitter 之](http://code.google.com/p/python-twitter/)类的项目，它们已经围绕 Twitter API 构建了库，因此除非您真的需要，否则您不必自己动手。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T09:25:09.580

该[`tweepy`模块](https://github.com/tweepy/tweepy)与 Python 3 不兼容，但应该为您提供如何从 python 与 Twitter API 对话的良好开端。

本质上，Twitter API 通过 HTTP 调用并返回 JSON，因此您需要阅读 the[`json`](http://docs.python.org/py3k/library/json.html)和 the[`urllib.request`](http://docs.python.org/py3k/library/urllib.request.html)或[`http.client`](http://docs.python.org/py3k/library/http.client.html)模块（`tweepy`使用模块的 python 2 等效项`http.client`）[`httplib`](http://docs.python.org/library/httplib.html)。

请注意，您链接到的 API 方法`mentions`不会给您任意提及，只有*当前 twitter 用户*的提及。因此，如果我要登录，它会显示提及`@zopatista`. 要显示提及，`@BarakObama`您必须改为通过[`search`API](https://dev.twitter.com/docs/api/1/get/search)搜索该字符串。

# c# - C#中重载[]运算符并给出多个返回值

> ID：11186275
> 
> 赞同：1
> 
> 时间：2012-06-25T09:03:20.983
> 
> 标签：c#, operator-overloading

> **可能重复：**
> [如何在 C# 中重载方括号运算符？](https://stackoverflow.com/questions/287928/how-do-i-overload-the-square-bracket-operator-in-c)

**对于一个类，是否可以在 C# 中重载运算符 []？**

如果是这样，声明 [] 重载函数的正确语法是什么？

*运算符 [] 也可以根据给定的参数返回不同的数据类型吗？如果不是，您认为我的其他解决方案是什么？我应该改用 Object 吗？*

```
public class MyClass {

     private Dictionary<string,Element> eAttribs;
     private Dictionary<string,string> defAttribs;

     // Also can the operator [] returns different data types based off the parameter given?
     // If not, what do you think is my other solution?
     public Element operator[](string attribKey) {
         if (eAttribs.containsKey(attribKey)
            return eAttribs[attribKey];
         else return null;
     }

     // COMPILE Error below: Unexpected symbol '['
     public string operator[](string attribKey) {
         if (defAttribs.containsKey(attribKey)
            return defAttribs[attribKey];
         else return null;
     }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T09:06:59.737

在 c# 中，这些称为索引器。

句法：

```
public object this[int key]
{
    get
    {
        return GetValue(key);
    }
    set
    {
        SetValue(key,value);
    }
} 
```

您只能返回一个对象。对必须返回的所有类型对象使用基类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T09:06:21.560

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T09:08:26.363

# php - PHP fopen 流并行

> ID：11186280
> 
> 赞同：1
> 
> 时间：2012-06-25T09:03:41.360
> 
> 标签：php, stream, parallel-processing, fopen

我有 php 文件`check_device.php`，可以通过 telnet 远程检查设备（开关）的某些选项。

在 html+jQuery 中我加载它

```
$.get('check_device.php?host=xyz', function(data)
{
    $("#device_1").html( $("#device_1").html()+data);
}); 
```

我在 html 中有很多这样的“负载”。但是它太慢了，它总是一个接一个，每次加载大约需要 7 秒（所以 3 次加载需要 3x7 = ~21 秒）。看起来“check_device.php”的每个实例都在等待之前的实例完成。

我想如果我将通过 jQuery Ajax 加载它，它将是并行和异步的，并且会更快。

php中是否有任何选项允许并行流fopen？

# javascript - 在 HTML5 视频元素中播放电影时，如何在 IOS 上显示非全尺寸视频？

> ID：11186281
> 
> 赞同：0
> 
> 时间：2012-06-25T09:03:43.027
> 
> 标签：javascript, ios, html

我正在尝试在 iPhone 的 Safari 上播放，所以我可以在视频下方有网站菜单栏，但是一旦我点击播放按钮，iOS 就会使用 iOS 控件以全屏模式打开视频。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T09:08:02.260

这将适用于 iPad，但在 iPhone 上，视频将自动全屏显示

# ios - 日历/提醒应用程序 (ios) 中的日历/列表之间的区别

> ID：11186285
> 
> 赞同：1
> 
> 时间：2012-06-25T09:03:50.407
> 
> 标签：ios, calendar, eventkit, reminders

我的 iOS 应用程序创建日历，用事件填充它，有时还会添加新事件。它存储创建日历的 ID 并仅使用它。无论如何，在某些情况下，此日历可能会被删除，例如，如果用户关闭与 iCloud 的同步并选择删除现有日历。我希望能够知道日历已被删除，以便我可以创建新日历并再次填充它。我尝试过的明显方法是查找我的应用程序存储的带有 ID 的日历，如果找不到带有此 ID 的日历，则认为它已被删除。但这种方法行不通。

问题是：当带有闹钟的事件被添加到日历时，这个日历不仅开始出现在日历应用程序中，而且还出现在提醒应用程序中。当用户关闭日历的 iCloud 并选择删除现有日历时，只会删除日历应用程序中的日历。提醒应用程序中的日历仍然存在。剩下的日历仍然有相同的ID，因此无法通过ID识别日历的删除。此日历也停止允许添加事件。当应用程序尝试向此日历添加事件时，会引发异常“该日历不支持该类型的项目”。

我想确定事件的“真实”日历已被删除。我尝试比较删除前后的日历。但以下属性保持不变：allowContentModifications、CGColor、immutable、title、type、source、subscribed、supportedEventAvailabilities、calendarIdentifier、description。

有没有人遇到过同样的问题？关于如何区分“事件和警报日历”与“仅警报日历”的任何想法？

（我唯一能想到的就是尝试添加测试预约，如果这个操作失败，考虑日历是“仅用于警报”。但这不方便）

# c# - 每个双工服务实例有多少个回调？

> ID：11186288
> 
> 赞同：1
> 
> 时间：2012-06-25T09:03:58.933
> 
> 标签：c#, .net, wcf, nettcpbinding

[官方文档](http://msdn.microsoft.com/en-us/library/system.servicemodel.operationcontext.current.aspx)说：

> 使用 Current 属性获取当前方法的执行和消息上下文。

在[这个例子](http://msdn.microsoft.com/en-us/library/ms731064.aspx)之后，我意识到每个服务方法都可以创建一个新的回调实例：我想这是因为任何服务方法都可以从不同的客户端调用，所以如果一个方法已经被客户端调用已连接，则返回相同的回调实例，而如果从新客户端调用，则创建服务的新实例并返回给回调将不同。这是对的吗？

然而，在[另一个示例](http://msdn.microsoft.com/en-us/library/ms752254.aspx)中，会话是手动管理的，这意味着客户端必须显式订阅服务：新客户端的每个订阅都发生在新服务实例中，然后回调对于给定客户端是唯一的。这是对的吗？

如果服务是单例类型的，那么所有客户端都会有一个服务实例：在这种情况下，如果我想应用发布-订阅模式，会创建多少个回调实例？

# javascript - 如何通过 javascript 访问 firefox 内部 url？

> ID：11186289
> 
> 赞同：-1
> 
> 时间：2012-06-25T09:04:00.627
> 
> 标签：javascript, firefox

如何通过 javascript 访问 firefox 内部 url？

我可以通过 javascript 访问例如 about:memory 吗？

如果无法通过javascript访问，我可以通过其他方式访问它吗？

谢谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:46:17.477

尝试这个：

```
chrome://global/content/aboutMemory.xhtml 
```

但我不确定[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)是否允许您通过 AJAX 访问该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:39:25.500

内部网页使用带有自己协议的 URL 访问 - `about:`. 尝试使用任何其他协议（在网络上最常使用`http:`or `https:`）从位置上下文执行 XHR 请求将失败，因为您尝试请求的页面并且您的上下文不是[同一来源](http://en.wikipedia.org/wiki/Same_origin_policy)。

我在下面引用了页面的相关部分并强调了：

> 术语“来源”是使用运行脚本的 HTML 文档的域名、**应用层协议**和（在大多数浏览器中）端口号来定义的。**当且仅当所有这些值完全相同**时，才认为两个资源具有相同的来源。

# .net - 如何通过 WCF 服务或其他技术将验证过程与将结果保存到数据库中分离？

> ID：11186292
> 
> 赞同：1
> 
> 时间：2012-06-25T09:04:17.130
> 
> 标签：.net, multithreading, wcf, performance

我建立了一些验证服务。

```
private static void Main(string[] args)
{            
    var service = new ValidationManager();
    service.Start();

    System.Console.ReadLine();

    service.Stop();
} 
```

`ValidationManager`用于`ThreadPool`执行`Validate`接收输入进行检查的方法。为了简化问题 -`Validate`方法只是做一些正则表达式检查。线程完成验证后，它应该将结果保存到数据库。如果不保存数据库，该服务会在 10 秒内完成 60,000 次验证。使用 DB 保存它可以进行大约 5,000 次验证。为了提高性能，我使用了一些`BulkManager`从线程接收验证结果并将结果批量保存到数据库的方法。`BulkManager`使用自己`ThreadPool`将批量保存到数据库。这确实有所改善。现在`ValidationManager`进行大约 11,000 次验证。

我认为如果我可以`BulkManager`从`ValidationManager`不同的**流程中**解耦出来，它会改进得更多。所以，我在同一个解决方案中创建了控制台 WCF 服务`netNamedPipeBinding`。

```
[ServiceContract]
public interface ISqlBulkWCFService
{
    [OperationContract]
    void SaveLog(string email, string summary);
    [OperationContract]
    void SaveFinalResult(string email, byte resultType, string summary);    
}

public class SqlBulkWCFService: ISqlBulkWCFService
{
    public void SaveLog(string email, string summary)
    {
    }
    public void SaveFinalResult(string email, byte resultType, string summary)
    {
    }
} 
```

我添加了对项目的 web 服务引用`ValidationManager`，而是这样`sqlManager.SaveLog(...)`做了`sqlBulkWCFServiceClient.SaveLog(...)`。但是，现在`ValidationManager`只进行**100 次验证**。

我认为它会更快，因为一个过程进行验证，另一个保存到数据库。而且我认为与 WCF 服务的通信会很快，因为客户端和服务器在同一台机器上。我的错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:31:24.337

如果我没听错，您已经创建了一项附加服务，用于进行保存。我不建议这样做，因为您会产生很多对我来说听起来不合理的开销。这解释了性能下降。

将验证与数据库保存分离真的可以吗？如果您进行验证，然后将其添加到缓冲区以进行批量操作，您可能会丢失数据，以防服务崩溃。如果这不行，我会保留链调用 -> 验证 -> 数据库保存，然后只玩 trottle 设置。随着 WCF 服务的更高并发性，如果数据库有容量，吞吐量应该会上升。

如果批量解决方案适合您，您可以使用 TPL 中的 BlockingCollection。因此，随着服务启动，您启动了一个保存线程，该线程使用 GetConsumingEnumerable 来保存传入的内容，并且所有 WCF 调用都在进行验证，最后将其结果添加到集合中。为了节省不必要的数据库调用，您可以使用一些线程休眠来等待一些结果在集合中累积。

hth，马丁

# blackberry - Blackberry webworks 应用程序和推送通知

> ID：11186294
> 
> 赞同：3
> 
> 时间：2012-06-25T09:04:20.603
> 
> 标签：blackberry, push-notification, blackberry-webworks

在网上搜索了很多天之后，我从来没有找到我的问题的答案，甚至没有找到任何人已经设法做我正在尝试的事情。

我正在尝试在 Blackberry 的 WebWorks 应用程序中实现推送通知，但没有任何运气。我已经尝试使用来自 Blackberry 的演示，但即使这些演示似乎也不起作用（其中大多数是用于 Java 中的本机应用程序），并且没有来自 BlackBerry 支持团队的任何反馈。

我想知道的是这是否可能，是否有人做过，是否有人有一个工作样本供我指导。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T10:45:04.217

您首先需要在[此处注册黑莓推送服务](https://www.blackberry.com/profile/?eventId=8121)

然后，他们将在几天内向您发送一封电子邮件，其中包含应用程序 ID、端口和推送启动器密码等。

然后，您可以在客户端侦听推送请求：

```
var port = 100; // Change this to the port you received from RIM
var appId = "The app ID you received from RIM";

var serverUrl = "http://pushapi.eval.blackberry.com";
var max = 100;

var wakeUpPage = "index.html";

function init() {
    var ops = {port : port, appId : appId, serverUrl : serverUrl, wakeUpPage : wakeUpPage, maxQueueCap : max};
blackberry.push.openBISPushListener(ops, pushReceive, pushRegister, simChange);
}

function pushReceive(data) {
    try {
        var message = blackberry.utils.blobToString(data.payload);
        return 0;
    }
    catch(err) {
    }
}

function pushRegister(status) {
if (status == 0) {
  alert("success");
}
else if (status == 1) {
  alert("network error");
}
else if (status == 2) {
  alert("rejected by server");
}
else if (status == 3) {
  alert("invalid parameters");
}
else if (status == -1) {
  alert("general error");
}
else {
  alert("unknown status");
}
}

window.onload = function() {
    init();
} 
```

`<feature id="blackberry.push" />`还要确保你有`<feature id="blackberry.utils" />`config.xml。

我还注意到，当应用程序关闭时 pushReceive() 不会被调用。您可以通过在后台运行应用程序来绕过此问题：

```
function handleExit() {
    blackberry.app.requestBackground();
}

blackberry.app.event.onExit(handleExit); 
```

并用于`blackberry.app.requestForeground();`将应用程序带到最前面。

我花了一段时间才弄清楚的另一件事是，在调用 pushRegister() 之前可能需要一段时间（这会在 BIS 上注册 PIN）。因此，请确保调用它，否则您将永远无法接收推送消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T18:31:25.717

WebWorks 应用程序中的推送服务是可能的，并且绝对可以实现。[Push API](https://developer.blackberry.com/html5/apis/blackberry.push.html)有更多关于在 WebWorks 中使用 BIS 和 BES 推送服务的详细信息。我们的支持论坛还有一个完整的[BlackBerry Push Sample App](http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/Sample-Emergency-Contact-List-Application-Demonstrating-Push/ta-p/1227875)可供您用作参考 - 文件可在文章末尾下载。

# html - 单击任何下载链接时，iframe 中的 Google 文档会变灰

> ID：11186295
> 
> 赞同：0
> 
> 时间：2012-06-25T09:04:21.850
> 
> 标签：html, iframe, browser, google-docs

我有一个带有 Google 文档和下载链接的页面（下面是人为的示例）。单击链接时，iframe 变为灰色并且根本不会返回。我已经剥离了页面，所以它只有这两个元素，它仍然会发生。

这肯定会发生在 Firefox、Chrome 和 Safari 中。

不包含 Google 文档的 iframe 似乎没有这个问题。

有任何想法吗？

```
<html>
<head></head>
<body>
<iframe src="http://docs.google.com/document/d/1mCYGLa8-Qsz_nYdk_f_8YefqWKMyulwVl223rebRMqM/preview" width="660" height="648"></iframe>
<a class="download_link" href="http://fastdl.mongodb.org/osx/mongodb-osx-i386-2.0.6.tgz">Download</a>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:11:04.833

有点讨厌的解决方案是`target='_blank'`在链接标签上设置。这会在单独的窗口中打开请求，但是一旦请求已注册为下载，该窗口将关闭并将用户留在原始页面上，而新的下载在后台。

这似乎在 Chrome 和 Firefox 上运行良好，但 Safari 在下载过程中会离开新窗口。

另一种解决方案是重新加载 iframe 设置，将其`src`属性设置为自身。唯一的问题是用户将失去他们的滚动位置。

我选择了混合解决方案，但确实做了一个巨大的假设，即所有版本的 Chrome 和 Firefox 都表现出相同的行为（下载开始时关闭选项卡）。这可能是不正确的，因此浏览器检测可能应该被改进。

或者，嘿，谷歌可以修复谷歌文档:)

```
 // preserve the google doc in the iframe. else the iframe goes gray when a download link is clicked
        if (navigator.userAgent.indexOf('Chrome') != -1 || navigator.userAgent.indexOf('Firefox') != -1){
            // Chrome and Firefox open new tabs with target='_blank' but close them again when the download begins
            // the page itself is unaffected
            $('a.download_link').attr('target', '_blank');
        }
        else{
            // the above doesn't work on Safari and probably others so fall back to reloading the iframe contents
            $('a.download_link').live('click', function(){
                $('iframe').each(function(id, frame){
                    frame.src = frame.src;
                });
            });
        } 
```

# perl - 查找数字，并删除等于该数字的相邻字符

> ID：11186303
> 
> 赞同：5
> 
> 时间：2012-06-25T09:05:24.093
> 
> 标签：perl, unix, sed, awk

我的 4 列输出的一部分如下所示：

```
5    cc1kcc1kc    5    cc1kcc1kc
5    cc2ppggg   5    cc2ppggg
6    ccg12qqqqqqqqqqqqggg    10 ccccg11qqqqqqqqqqqggggg 
3    4qqqqcgc1q   12    cgccgccgccgc 
```

我只想改变第二列和第四列，有没有办法用 awk/sed 删除旁边有字符的数字？或者使用 perl 脚本来执行这种转换会更容易/更好吗？

结果输出应如下所示：

```
5    ccccc    5    ccccc
5    ccggg    5    ccggg
6    ccgggg   10    ccccgggggg 
3    cgc    12    cgccgccgccgc 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T21:15:20.663

从字面上理解这个问题，对于嵌入在字段中的任何***n*** ，这将从字段 2 和 4中删除接下来的***n 个字符。***

 *```
perl -lane 'for $i (1, 3) {@nums = $F[$i] =~ /(\d+)/g; for $num (@nums) {$F[$i] =~ s/$num.{$num}//}}; print join("\t", @F)' 
```

其他答案删除了数字和所有相同的字符。

为了说明我的答案与其他答案之间的区别，请使用以下输入：

```
6    ccg8qqqqqqqqqqqqggg    10 ccccg3qqqqqqqqqqqggggg 
```

我的版本输出这个：

```
6    ccgqqqqggg     10      ccccgqqqqqqqqggggg 
```

而他们的输出：

```
6    ccgggg    10 ccccgggggg 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T09:15:01.563

与`perl`：

```
perl -pe 's/\d+([^\d\s])\1*//g' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T09:21:20.993

使用 sed：

```
sed 's/[0-9]\+\([a-z]\)\1*//g' 
```

匹配找到任何数字字符串 ( `[0-9]+`) 后跟任何字母 ( `[a-z]`)。`\1*`匹配该字符的任何后续出现。( `/g`global) 修饰符确保每行多次替换。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T16:59:33.697

这可能对您有用（GNU sed）：

```
sed 'h;s/\S*\s*\(\S*\).*/\1/;:a;s/[^0-9]*\([0-9]\+\).*/sed "s|\1.\\{\1\\}||" <<<"&"/e;ta;H;g;/\n.*\n/bb;s/\(\S*\s*\)\{3\}\(\S*\).*/\2/;ba;:b;s/^\(\S*\s*\)\(\S*\)\([^\n]*\)\n\(\S*\)/\1\4\3/;s/\(\S*\s*\)\n\(.*\)/\2/' file 
```*

# iphone - iTunes Connect 为新应用程序版本设定价格

> ID：11186308
> 
> 赞同：6
> 
> 时间：2012-06-25T09:05:46.793
> 
> 标签：iphone, app-store-connect

我有一个“等待审核”的应用程序的新版本，当它发布到应用程序商店时，我希望这个新版本是免费的，而当前版本是付费的。似乎没有办法为审核中的版本设置单独的价格。有没有其他人遇到过这个并解决了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T09:22:13.597

我的建议是确保新版本不会自动发布 - 使用“待开发者发布”系统 - 然后将价格设置为免费并同时发布新版本。

您可以通过将价格变化的日期设置为新版本的发布日期来自动化这部分 - 但我自己没有尝试过，所以我不知道它们是否会同时发生。

如果你做相反的事情——将你的应用程序从免费转换为付费——我知道没有任何苹果友好的方式可以阻止免费版本的用户获得付费更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T09:08:55.007

你是说允许已经购买它的人免费更新吗？

如果是这样，它的工作原理是更新替换应用商店中的旧应用，付费的人免费获得更新，而第一次想要购买的人必须付费，当他们支付时他们得到最新版本。

# netbeans - 如何在 NetBeans 中本地化 @Messages 注释

> ID：11186312
> 
> 赞同：7
> 
> 时间：2012-06-25T09:06:08.820
> 
> 标签：netbeans, localization, internationalization, netbeans-7, netbeans-platform

我想使用`@Messages`NetBeans 中的注释来简化我的应用程序中的本地化。但是，我找不到有关如何使用此机制为其他语言添加翻译（捆绑）的任何信息。

使用 的动作示例`@Messages`如下

```
@ActionID(category = "category",
id = "AddAction")
@ActionRegistration(iconBase = "actions/action-icon.png",
displayName = "#CTL_AddAction")
@ActionReferences({
    @ActionReference(path = "Menu/Shapes", position = 160),
    @ActionReference(path = "Toolbars/Shapes", position = 5133)
})
@Messages("CTL_AddAction=Add Action") 
```

如何使添加操作因语言而异？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T14:02:01.610

[http://bits.netbeans.org/dev/javadoc/org-openide-util/org/openide/util/NbBundle.Messages.html](http://bits.netbeans.org/dev/javadoc/org-openide-util/org/openide/util/NbBundle.Messages.html)

@Messages 注释将生成一个 Bundle.java 类和一个 Bundle.properties 文件。Bundle.java 类将包含用于本地化的函数，而 Bundle.properties 文件包含确定根区域设置的确切字符串的键值对。

为了正确本地化，您应该检查 Bundle.properties 文件，然后创建一个 Bundle_fr.properties 文件（用于法语）或一个 Bundle_whatever.properties 文件，其中“whatever”是您要添加的语言环境。

然后，为您的应用程序设置区域设置后，Bundle.java 类应该使用正确的 Bundle_xx.properties 文件来本地化您对 Bundle.java 类函数的调用。

```
package com.testmodule;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import org.openide.awt.ActionID;
import org.openide.awt.ActionReference;
import org.openide.awt.ActionReferences;
import org.openide.awt.ActionRegistration;
import org.openide.util.NbBundle.Messages;

@ActionID(category = "category",
id = "com.testmodule.AddAction")
@ActionRegistration(iconBase = "com/testmodule/action-icon.png",
displayName = "#CTL_AddAction")
@ActionReferences({
    @ActionReference(path = "Menu/Shapes", position = 160),
    @ActionReference(path = "Toolbars/Shapes", position = 5133)
})
@Messages({
    "CTL_AddAction=Add Action"
})
public final class AddAction implements ActionListener {

    @Override
    public void actionPerformed(ActionEvent e) {
        Locale.setDefault(Locale.FRENCH);
        System.out.println("I am action "+Bundle.CTL_AddAction());
    }
} 
```

我的捆绑包看起来像：

```
Bundle.properties
    OpenIDE-Module-Name=testmodule
Bundle_fr.properties
    OpenIDE-Module-Name=french testmodule
    CTL_AddAction=Ajouter une action 
```

# gwt - DisclosurePanel 内的 SplitLayoutPanel

> ID：11186317
> 
> 赞同：0
> 
> 时间：2012-06-25T09:06:30.703
> 
> 标签：gwt, uibinder

当在 DisclosurePanel 中嵌套 SplitLayoutPanel 时，SplitLayoutPanel 不会显示，当使用相对高度属性（例如，100%）打开 DisclosurePanel 时。检查生成的 HTML 会发现包含 SplitLayoutPanel 的行（DisclosurePanel 生成包含两行的表）的高度为 0px，但宽度确定正确。

我做错了什么吗？删除 DisclosurePanel 会正确显示 SplitLayoutPanel。也可以将SplitLayoutPanel 的高度设置为绝对值（例如500px）。

非常感谢任何建议。

```
<!DOCTYPE html>
<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder" xmlns:g="urn:import:com.google.gwt.user.client.ui">
<g:DisclosurePanel width="99%">
    <g:header>Some Header</g:header>
    <g:SplitLayoutPanel ui:field="mySplitLayoutPanel"
        width="100%" height="100%">
        <g:west size="200">
            <g:ScrollPanel ui:field="streamTreePanel" styleName="ccTreePanel" />
        </g:west>
        <g:center>
            <g:VerticalPanel ui:field="streamTablePanel"
                styleName="ccTablePanel" width="100%" />
        </g:center>
        <g:east size="400">
            <g:ScrollPanel ui:field="streamInfoPanel" styleName="ccInfoPanel" />
        </g:east>
    </g:SplitLayoutPanel>
</g:DisclosurePanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:10:42.680

`LayoutPanels`要求一个完整的链`ProvidesResize`和`RequiresResize`父小部件直到`RootLayoutPanel`正常工作。在您的情况下`DisclosurePanel`，不实现任何接口。
您可以：

*   把你`SplitLayoutPanel`放进一个[ResizeLayoutPanel](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/ResizeLayoutPanel.html)
*   在您的中指定明确的尺寸`DisclosurePanel`（有关更多信息，请参阅食谱）
*   添加您自己的并手动`ResizeHandler`调整大小（调用）。`SplitLayoutPanel``onResize()`

# blackberry - 在黑莓中打开 PDF 文件？

> ID：11186318
> 
> 赞同：0
> 
> 时间：2012-06-25T09:06:33.850
> 
> 标签：blackberry, browserfield

如何通过 BB 默认浏览器打开 PDF 文件？目前我正在使用下面的代码，但它抛出了一个**HTTP 错误 500：内部服务器错误**

```
public static void openBrowser(String url, String contentType, 
            Object objBody ) { 

        final HttpHeaders requestHeaders = new HttpHeaders();
        requestHeaders.addProperty(HttpHeaders.HEADER_CONTENT_TYPE, contentType);

        final URLEncodedPostData postData = 
            new URLEncodedPostData(URLEncodedPostData.DEFAULT_CHARSET, false);
        postData.setData(objBody);
        BrowserSession browserSession = Browser.getDefaultSession();
        browserSession.displayPage(url);//, null, requestHeaders, postData);
        browserSession.showBrowser();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:17:54.430

HTTP 错误 500 表示您的 Web 服务器上的内部服务器错误，而不是与 BlackBerry 有任何关系。调查您的 Web 服务器日志以找出原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:45:29.680

我不确定您限制在哪个操作系统版本，但是很多应用程序仍然需要支持 5.0 ...

...令人惊讶的是，该浏览器似乎还没有 PDF 支持。这是[使用 Google Docs 查看的解决方法](https://stackoverflow.com/a/6130983/119114)。

如果您检测到它是 PDF 文件，您只需重新格式化 URL。

**注意**：我不同意 donturner 关于**HTTP 500**是服务器错误的观点。但是，黑莓做了一些疯狂的事情，我认为如果这不是您的浏览器缺乏 PDF 支持的症状，您（或其他阅读这篇文章的人）可能会在以后遇到这种情况。此外，RIM 的操作系统或中间人网络基础设施完全*有可能*生成 500 响应，因为他们知道自己的局限性。

# jquery - Rhombus div menu

> ID：11186324
> 
> 赞同：2
> 
> 时间：2012-06-25T09:07:02.580
> 
> 标签：jquery, html, css

I'm trying to create a Rhombus style links menu which goes horizontal across the page. I will also have some java script drop downs on this.Something like this: \ \ \ \ \

I am using the skew css3 attributes on the divs but they skew the the text as well is there a way to un-skew the text in the div? ive tried a div in a div but no luck. And how can i get this to work in ie7/8?

```
 <div id="menu">
                <div class="MenuOptions"><div class= "menuRot"><a>Menu</a></div></div>
                <div class="MenuOptions"></div>
                <div class="MenuOptions">Menu 3</div>
                <div class="MenuOptions">Menu 4</div>
                <div class="MenuOptions">Menu 5</div>
                <div class="MenuOptions">Menu 6</div>
   </div>

**CSS**

.MenuOptions{

    height:50px;
    width: 100px;
    float: left;
    position: relative;
    transform: skew(35deg);
    -webkit-transform: skew(35deg);
    -moz-transform: skew(35deg);
    -ms-transform: skew(35deg);
    -o-transform: skew(35deg);
    border: 1px solid red;
    background-color: #d6dd31;
}​
.menuRot{
    transform: skew(-35deg);
    -webkit-transform: skew(-35deg);
    -moz-transform: skew(-35deg);
    -ms-transform: skew(-35deg);
    -o-transform: skew(-35deg);
} 
```

Many thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:27:34.260

Your code works. I copied your code and checked it with firebug and found something strange...

![CSS read bug](../Images/7330afe9098dec4d70a40ce2cb01cadc.png)

Replace your CSS with this.

```
.MenuOptions{

    height:50px;
    width: 100px;
    float: left;
    position: relative;
    transform: skew(35deg);
    -webkit-transform: skew(35deg);
    -moz-transform: skew(35deg);
    -ms-transform: skew(35deg);
    -o-transform: skew(35deg);
    border: 1px solid red;
    background-color: #d6dd31;
}

.menuRot{
    transform: skew(-35deg);
    -webkit-transform: skew(-35deg);
    -moz-transform: skew(-35deg);
    -ms-transform: skew(-35deg);
    -o-transform: skew(-35deg);
} 
```

# c - 非阻塞 TCP 接收器不从套接字读取

> ID：11186328
> 
> 赞同：0
> 
> 时间：2012-06-25T09:07:12.607
> 
> 标签：c, sockets, tcp

我有下面实现非阻塞 TCP 接受器的代码。客户端能够毫无问题地连接，并且写入似乎也在发生，但接受器不会从套接字读取任何内容，并且`read()`无限期地调用块。我是否为接受者使用了错误的设置？

亲切的问候 AFG

```
int main(){
    create_programming_socket();
    poll_programming_connect(); 
    while(1){
        poll_programming_read();
    }    
}

int create_programming_socket(){
   int cnt = 0;
   p_listen_socket = socket( AF_INET, SOCK_STREAM, 0 );
   if( p_listen_socket < 0 ){
       return 1;
   }      

   int flags = fcntl( p_listen_socket, F_GETFL, 0 );
   if( fcntl( p_listen_socket, F_SETFL, flags | O_NONBLOCK ) == -1 ){
       return 1;
   }

   bzero( (char*)&p_serv_addr, sizeof(p_serv_addr) );     

   p_serv_addr.sin_family = AF_INET;
   p_serv_addr.sin_addr.s_addr = INADDR_ANY;
   p_serv_addr.sin_port = htons( p_port );    

   if( bind( p_listen_socket, (struct sockaddr*)&p_serv_addr
   , sizeof(p_serv_addr) ) < 0 ) {
       return 1;
   }
   listen( p_listen_socket, 5 );
   return 0;
}

int poll_programming_connect(){
   int retval = 0;   
   static socklen_t p_clilen = sizeof(p_cli_addr);   
   int res = accept( p_listen_socket, (struct sockaddr*)&p_cli_addr, &p_clilen );
   if( res > 0 ){
       p_conn_socket = res;
       int flags = fcntl( p_conn_socket, F_GETFL, 0 );
       if( fcntl( p_conn_socket, F_SETFL, flags | O_NONBLOCK ) == -1 ){   
           retval = 1;
       }else{
           p_connected = true;       
       }
    }else if( res == -1 && ( errno == EWOULDBLOCK || errno == EAGAIN ) ) {
    //printf( "poll_sock(): accept(c_listen_socket) would block\n");    
    }else{
       retval = 1;
   }
   return retval;
  }

  int poll_programming_read(){
   int retval = 0;
   bzero( p_buffer, 256 );   
   int numbytes = read( p_conn_socket, p_buffer, 255 );
   if( numbytes > 0 ) {
       fprintf( stderr, "poll_sock(): read() read %d bytes\n", numbytes );
       int fred;
        int i;
   } else if( numbytes == -1 && ( errno == EWOULDBLOCK || errno == EAGAIN ) ) {
    //printf( "poll_sock(): read() would block\n");
   } else {
       close( p_conn_socket );
       p_connected = false;
       retval = 1;
   }
   return retval;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T09:13:35.430

调用`poll_programming_connect`在您的 while 循环之外 - 所以它很可能不接受连接（EWOULDBLOCK 失败）。所以你没有一个有效的套接字来读取。

您需要等到建立连接后才能调用`poll_programming_read`。

# c# - 在 DLL 程序集中检索有关调用程序集的信息

> ID：11186331
> 
> 赞同：1
> 
> 时间：2012-06-25T09:07:25.223
> 
> 标签：c#, vb.net

我创建了几个用于多个项目的 DLL (.NET) 库。在这些 DLL 库中，我想知道/检索哪个程序集 (EXE) 调用/使用该库，所以如果可能的话，我想知道程序集名称 (EXE)、强名称、版本号等信息。

注意：示例可能在 C# 或 VB 中。我使用两种语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:10:45.233

您可以使用 System.Reflection => Assembly.GetCallingAssembly() 来完成这项工作。 [http://msdn.microsoft.com/en-en/library/system.reflection.assembly.getcallingassembly.aspx](http://msdn.microsoft.com/en-en/library/system.reflection.assembly.getcallingassembly.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T09:11:23.067

您可以使用反射来完成此任务。

[http://msdn.microsoft.com/en-us/magazine/cc163750.aspx](http://msdn.microsoft.com/en-us/magazine/cc163750.aspx)

[http://www.intertech.com/Blog/Post/The-Role-of-Reflection-in-VB-(NET).aspx](http://www.intertech.com/Blog/Post/The-Role-of-Reflection-in-VB-(NET).aspx)

# mysql - 如何从多列中获取值的计数

> ID：11186338
> 
> 赞同：1
> 
> 时间：2012-06-25T09:07:56.643
> 
> 标签：mysql

我有带有以下列的 users_details 表

```
martial_status | religion | education 
```

我想从下表中获取值的计数，如下所示。

```
married (100)
single (200)
Muslim(50)
Jews (50)
Christian(50)
Graduates(100) 
etc, etc. 
```

我不知道是否可以使用单个 SELECT 获得所有计数，请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:12:38.963

它不完全是一个单一的`SELECT`语句，但您可以使用一个查询来检索它，如下所示（假设列是兼容的）：

```
( SELECT `martial_status`, COUNT(*) as `cnt` FROM user_details GROUP BY `martial_status` )
UNION
( SELECT `religion`, COUNT(*) as `cnt` FROM user_details GROUP BY `religion` )
UNION
( SELECT `education `, COUNT(*) as `cnt` FROM user_details GROUP BY `education` ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T09:13:58.173

您需要分别处理每一列，然后合并它-

```
 SELECT martial_status, count(*)
  FROM USER_DETAILS
  GROUP BY martial_status
UNION ALL
  SELECT religion, count(*)
  FROM USER_DETAILS
  GROUP BY religion
UNION ALL
  SELECT education, count(*)
  FROM USER_DETAILS
  GROUP BY education 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T09:11:10.530

你可以这样做：

```
select sum(case when religion = 'Muslim'
           then 1
           else 0 
           end) as muslims,
       sum(case when martial_status = 'married'
           then 1
           else 0 
           end) as married
       ...
from your_table 
```

一个较短的版本是：

```
select sum(religion = 'Muslim') as muslims,
       sum(martial_status = 'married') as married
       ...
from your_table 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T09:20:02.287

使用`select`没有子查询或类似查询的单个查询很棘手，但我相信*单个查询*也应该适合您。您可以通过一次选择来获取给定列的所有计数，然后使用它`union all`来合并结果，以便单个查询将为您获取所有列的所有计数。

```
select martial_status, count(*) from user_details group by martial_status
union all
select religion, count(*) from user_details group by religion
union all
select education, count(*) from user_details group by education 
```

如果您`NULL`的表中有值，您可能希望从结果中省略这些值。

如果它确实是您需要的*单个选择*，那么您将不得不更改表格的布局，但我无法想象这种要求的正当理由。

# codeigniter - 带有 Auto Crumb 助手的 URL 上的 CodeIgniter 加密密钥

> ID：11186344
> 
> 赞同：0
> 
> 时间：2012-06-25T09:08:04.273
> 
> 标签：codeigniter, helpers

我使用[从这里获得的 auto CodeIgniter 2.1 + Auto Crumb helper](https://bitbucket.org/ardinotow/autocrumb/)

![截屏](../Images/a690e48ce56474dbfd73f33951a4e838.png)

例如，我编辑联系页面的链接是`http://localhost/caster/contact/edit_contact/13/213bcf`

**13**是联系人 id，**213bcf**是**加密的联系人**id，以防止用户仅从 url 更改联系人 id。

所以我的面包屑现在显示无效的网址，如上图所示。所需的面包屑是`Contact \ Edit Contact`. 如何解决或防止此问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:44:21.603

目前，autocrumb 助手存在一个错误（或者可能是设计使然，但这样做似乎很愚蠢），这意味着除非特定段中有连字符 ( `-`) 或下划线 ( `_`)，否则不会运行正则表达式模式替换它。

通常在这里使用 config 变量`$config['strip_regexp']`就足以满足您的要求，但唉，在这种情况下并非如此。

在这种情况下（假设 URL 末尾没有更多参数），您可以执行以下操作：

```
$ci = get_instance();
if( preg_match( '#\d+/[a-z0-9]+$#i', $ci->uri->uri_string() ) ) {
    $config['exclude_segment'] = $config['exclude_segment'] + array(
        $total = $ci->uri->total_segments(),
        $total-1
    );
} 
```

这应该插入到文件的正下方`$config['exclude_segment'] = array();`，该`app/config/breadcrumb.php`文件基本上说如果 URL 以`numbers/letter-number-pattern`然后从面包屑中删除 URL 的最后两个部分。

它不太理想，但需要先修复该错误。显然，这是假设您的 URL 结构不会改变。您可以在 中添加其他条件，`if`以确保它仅出现在您想要的页面上。

# php - PHP：当没有“先前声明”时如何解决“无法重新声明类”

> ID：11186348
> 
> 赞同：4
> 
> 时间：2012-06-25T09:08:10.813
> 
> 标签：php

我想测试phpDocumentor-alpha，出现了一些人似乎**没有**的问题：

```
# sudo pear uninstall phpdoc/phpDocumentor-alpha
uninstall ok: channel://pear.phpdoc.org/phpDocumentor-2.0.0a6
olivier@olivier-ubuntu ~/Documents/pizzas/dev # phpdoc --help
bash: /usr/bin/phpdoc: Aucun fichier ou dossier de ce type
# 
# sudo pear install --alldeps -f phpdoc/phpDocumentor-alpha
downloading phpDocumentor-2.0.0a6.tgz ...
Starting to download phpDocumentor-2.0.0a6.tgz (1,107,853 bytes)
..................................done: 1,107,853 bytes
install ok: channel://pear.phpdoc.org/phpDocumentor-2.0.0a6
# phpdoc --help
PHP Fatal error:  Cannot redeclare class phpDocumentor\Plugin\Core\Listener in /usr/share/php/phpDocumentor/src/phpDocumentor/Plugin/Core/Listener.php on line 194

Fatal error: Cannot redeclare class phpDocumentor\Plugin\Core\Listener in /usr/share/php/phpDocumentor/src/phpDocumentor/Plugin/Core/Listener.php on line 194
# 
```

好的，我可以通过以下方式避免这个问题：

```
if ( !class_exists('MTIHelperEstadosLocal') ) {...} 
```

但这只是一个丑陋的解决方法。我想知道是否有办法知道声明的初始位置（= 其中包括或其他）。

任何的想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-02T09:45:56.270

这是简单的解决方案：

```
print_r(get_declared_classes()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-29T15:51:45.033

根据您的操作系统以及您构建文档根路径的方式，路径名中的大写字母与小写字母可能存在问题。这经常让我在大型 CMS 项目（如 Mac OSX 上的 drupal）上绊倒我

```
// Insert this debug code before require statement.
if (class_exists('classInQuestion')) {
  $reflector = new ReflectionClass('classInQuestion');
  echo $reflector->getFileName() . ' ' . $reflector->getStartLine() . "\n";
  echo $newClassFile;
  exit();
}
// Normal pre-existing require statement
require_once $newClassFile 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T18:43:15.260

在文件 {path-to-pear-directory}/PEAR/phpDocumentor/vendor/composer/ClassLoader.php 中，第 150 行是：

```
require $file; 
```

只需将其更改为

```
require_once $file; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-02T09:47:39.703

除了所有答案之外，您还可以考虑 php 声明的类。例如点网。当我为了使用 Dotnet 二进制文件而明确定义一个名为 Dotnet 的类时，它会在创建该类的第一个实例时引发错误。

如果您要使用自己修改过的类而不是 php 呈现给您的类，您应该给它们提供可区分的名称。

# sql - 为什么我在 dbo.sysssislog 表中看不到 onerror 事件

> ID：11186351
> 
> 赞同：0
> 
> 时间：2012-06-25T09:08:18.980
> 
> 标签：sql, sql-server, ssis, dts

我已经运行了一个 ssis 包并在其中一个任务中出错（该任务在序列容器内）。但是当我检查 msdb **sysssislog**表时，我看不到任何**ONERROR**事件（ONERROR）。让我知道可能会发生什么是这个原因。请注意，这个包在包的 ONERROR 事件中有一个任务，它会在包中发生错误时运行。

**ON ERROR**和**ON TASK FAILED**有什么区别

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:47:28.247

在为 SQL Server 选择 SSIS 日志提供程序时，检查需要跟踪的事件。我认为您可能错过了检查 ONERROR 事件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T09:54:33.773

当包因任何原因（包括任务失败）出现错误时引发 OnError

无论包状态如何，当任务失败时都会引发 OnTaskFailed

您应该在日志中收到错误消息。也许你的配置不正确。**

# jquery - jQuery UI 可排序 - 排除项目被删除

> ID：11186355
> 
> 赞同：2
> 
> 时间：2012-06-25T09:08:49.123
> 
> 标签：jquery, jquery-ui, user-interface, jquery-ui-sortable

是否可以排除单个分类项目被删除到另一个列表中？

这是一个[JsFiddle](http://jsfiddle.net/GGVeA/)。例如，第 2 项不应放在第二个列表中。

我真的不知道这是否可以通过一些黑客攻击，但不幸的是 UI 插件没有选项:(

任何帮助深表感谢。

**编辑：** 我忘了提到该项目（在示例中是项目 2）应该仍然是可排序的，但不能放在第二个列表中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T09:31:21.063

**新的** [http://jsfiddle.net/UKUfe/](http://jsfiddle.net/UKUfe/)（在这个演示中，项目 2 不能放在列表 2 中，但仍然可以排序`:)`

这将有所帮助：下面的其余代码和解释：

**代码**

```
$("#sortable1, #sortable2").sortable({
    connectWith: ".connectedSortable",
    items: "li:not(.ui-state-disabled)",
    receive: function(event, ui) {

        if ($(ui.item).hasClass("foohulk")) {
           $(ui.sender).sortable('cancel');

            return false;

        }

    }
}).disableSelection();

​ 
```

**老的**

**演示** [http://jqueryui.com/demos/sortable/items.html](http://jqueryui.com/demos/sortable/items.html) **或** [http://jsfiddle.net/GGVeA/2/](http://jsfiddle.net/GGVeA/2/)

Jquery 论坛中的类似问题：http: [//forum.jquery.com/topic/can-i-lock-an-li-in-place-in-a-sortable-list](http://forum.jquery.com/topic/can-i-lock-an-li-in-place-in-a-sortable-list)

与选项等的良好链接。：http: [//jqueryui.com/demos/sortable/](http://jqueryui.com/demos/sortable/)

如果你想禁用项目添加`.ui-state-disabled`到项目`li`，（我听说你说：为什么`ui-state-disabled` `:)`要转到以下链接并阅读 API 主题和内容：“交互提示” [http://jqueryui.com/docs/Theming/API](http://jqueryui.com/docs/Theming/API)

希望这可以帮助， ：）

**代码**

```
$( "#sortable1, #sortable2" ).sortable({
        connectWith: ".connectedSortable",
        items: "li:not(.ui-state-disabled)"
}).disableSelection(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T09:15:32.673

`items: "li:not(.ui-state-disabled)"`像这样添加

```
$( "#sortable1, #sortable2" ).sortable({
    connectWith: ".connectedSortable",
    items: "li:not(.ui-state-disabled)"
}).disableSelection();​ 
```

并像这样将`ui-state-disabled`类添加到*Item2*

```
<li class="ui-state-default ui-state-disabled">Item 2</li>` 
```

这里 jsfiddle 示例

[排除项目被丢弃 jsfiddle 示例](http://jsfiddle.net/wU3Vp/)

另外，看看另一个例子

[jQuery UI 可排序 - 包括/排除项目](http://jqueryui.com/demos/sortable/items.html)

* * *

**编辑**

由于您更新了答案，它完全改变了答案

您需要利用`update`sortable 的事件并检查即将被删除的元素是否是*禁止元素*

像这样

```
update:function(event, ui) {
    if(ui.item.hasClass('ui-state-disabled') && ui.item.parent()[0].id === 'sortable2') return false;                
} 
```

[将项目排除在其他可排序区域上](http://jsfiddle.net/wU3Vp/33/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-15T10:48:00.097

我发现 Tats_innit 的回答很有帮助。我需要添加的一个额外部分是在无法删除项目时隐藏占位符。

我想这是对问题的一个足够常见的补充，所以我想我会分享它 - 您只需要处理`sort`事件，执行相同的类检查，您就可以通过`ui.placeholder`对象访问占位符。

因此，在前面的答案示例（[http://jsfiddle.net/GGVeA/2/](http://jsfiddle.net/GGVeA/2/)）的上下文中，完整的添加将是：

```
$("#sortable1, #sortable2").sortable({
    connectWith: ".connectedSortable",
    items: "li:not(.ui-state-disabled)",
    receive: function (event, ui) {

        if ($(ui.item).hasClass("foohulk")) {
            $(ui.sender).sortable('cancel');

            return false;

        }
    },
    sort: function (event, ui) {
        if ($(ui.item).hasClass("foohulk")) {
            ui.placeholder.hide();
        } 
        else {
            ui.placeholder.show();
        }
    }
}).disableSelection(); 
```

# image - 使用 php mail 将 base 64 字符串作为图像嵌入到电子邮件中

> ID：11186361
> 
> 赞同：2
> 
> 时间：2012-06-25T09:09:10.007
> 
> 标签：image, base64, php

如何使用 php 邮件将 Base64 图像数据嵌入到电子邮件中？

```
<?php
$aImg = $_POST['aImage'];

$to = "abc@hotmail.com";
$subject = "Sending png image to email";

$message = "<html><head></head><body>";
$message .= '<img src="'.$aImg.'" alt="This is an Image" /></body></html>';

$headers = "Content-type: text/html";

if (mail($to, $subject, $message, $headers)) {
    echo("<p>Message successfully sent!</p>");
} else {
    echo("<p>Message delivery failed...</p>");
}
?> 
```

运行代码后，它显示“消息已成功发送”，但图像未显示出来。它显示了一个小的红十字图像。我已经调试了几个小时，但仍然无法得到我的图像。目前，我正在将电子邮件发送到 localhost 进行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:24:31.080

这有点草率。很久以前，我用我在网上找到的代码编写了它/将它捣碎在一起，并且可能已经破坏了它坐在这里拉出私人信息而没有戴眼镜。:-) 我当时通过这种方式学到的东西：chunk_split、连接 (.)、随机分隔符的使用。

```
<?
$to="x"; // For the file to be sent.
$from="xx"; // For the from line on the received email
$name="name.ext";
$type="application/x-gzip";
            $subject="subj"
            $mime_boundary="==Multipart_Boundary_x".md5(mt_rand())."x";
         // open the file for a binary read
            $file = fopen(**xxxxxxxxxx filepath xxxxxxxxxxxx**,'rb');
         // read the file content into a variable
         //   $data = chunk_split(base64_encode(fread($file,filesize($file))));

         // now we encode it and split it into acceptable length lines
            //ALREADY DONE, MOVE UP A FEW LINES
         // message body
            $message = "Here's that File I promised you";
         // build headers
            $headers = "From: ".$from." \r\n" .
            "MIME-Version: 1.0\r\n" .
            "Content-Type: multipart/mixed;\r\n" .
            " boundary=\"{$mime_boundary}\"";
         // put message body in mime boundries
            $message = "This is a multi-part message in MIME format.\n\n" .
            "--{$mime_boundary}\n" .
            "Content-Type: text/plain; charset=\"iso-8859-1\"\n" .
            "Content-Transfer-Encoding: 7bit\n\n" .
            $message . "\n\n";
         // attachment with mime babble
             $message .= "--{$mime_boundary}\n" .
            "Content-Type: {$type};\n" .
            " name=\"{$name}\"\n" .
            //"Content-Disposition: attachment;\n" .
            //" filename=\"{$backfile}\"\n" .
            "Content-Transfer-Encoding: base64\n\n" .
            chunk_split(base64_encode(fread($file,filesize(**xxxxxxxxxx filepath xxxxxxxxxxxx**)))) . "\n\n" .
            "--{$mime_boundary}--\n";
// close the file
fclose($file);
         // send mail
            mail($to, $subject, $message, $headers)
             ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T09:30:28.347

如果您尝试过“查看源代码”，它会给您提供关于这里发生了什么的第一个线索。

这不是微不足道的，有多种方法可以解决这个问题。但你还有很长的路要走。

假设您想将图像直接包含在电子邮件中，而不是作为 HTTP URL 或附件，那么您需要将其作为[数据 url](http://en.wikipedia.org/wiki/Data_URI_scheme)包含- 这仅适用于最近的浏览器/邮件代理。

或者，您可以简单地将其作为附件添加到任何电子邮件 - 但创建 mime 消息并非易事 - 使用现成的软件包之一，例如 swiftmailer 或 phpmailer。

第三种方法是创建一个封装的[MIME http web 存档文件](http://en.wikipedia.org/wiki/MHTML)，但我不知道有任何现成的包可以在 PHP 中创建此类文件。此外，我认为这些文件仅受 MSOutlook、MSIE 和 Opera 支持（即便如此，MS 实现也存在很多问题）。

# iphone - 如何知道两个日期相同

> ID：11186362
> 
> 赞同：-3
> 
> 时间：2012-06-25T09:09:13.237
> 
> 标签：iphone, objective-c, ios

嗨，我有两个日期选择器。

日期选择器 1，日期选择器 2。

我需要 datepicker1.date 与 datepicker2.date 进行比较

我需要验证这两个日期是否相同。这怎么可能。在此先感谢。我使用了以下一个，但它不起作用

```
if([datePicker.date isEqualToDate:FromPicker.date]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:12:12.690

使用标准比较方法，[比较：](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/nsdate_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDate/compare%3a)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T09:14:29.307

使用`-compare:`NSDate 的方法：

```
if([date1 compare:date2] == NSOrderedSame)
{
    //They are the sme    
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T09:18:37.467

我认为您想忽略时间部分。通过以下方式做到这一点：

```
 NSCalendar *cal = [NSCalendar autoupdatingCurrentCalendar];
 NSDateComponents *components1 = [cal components:NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit
                                       fromDate:YOUR_FIRST_DATE];
 NSDateComponents *components2 = [cal components:NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit
                                        fromDate:YOUR_SECOND_DATE];

 if ([components1 year] == [components2 year] &&
     [components1 month] == [components2 month] &&
     [components1 day] == [components2 day]) 
 {
           //dates are same...
 }
 else
 {
           //dates are different...
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T09:15:06.750

我建议使用`timeIntervalSince1970`

```
NSDate *date1; // your first date
NSDate *date2; // your second date

if ([date1 timeIntervalSince1970] == [date2 timeIntervalSince1970]) {
    //Equal
} 
```

# android - 删除元素后如何刷新数组列表？

> ID：11186364
> 
> 赞同：1
> 
> 时间：2012-06-25T09:09:21.853
> 
> 标签：android, listactivity, android-adapter

我有从 listactivity 扩展的类，并包含 hashmap 的 arraylist 我可以从数据库中删除元素，但我无法查看更新，直到切换到另一个活动并返回它。

每次删除后如何刷新数组列表？

编码 ：

```
public class RemoveEvent extends ListActivity {

    DBAdapter DB = new DBAdapter(this);
    ArrayList<HashMap<String, String>> mylist;
    RemoveArrayAdapter n;
    SimpleAdapter mSchedule;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mylist = new ArrayList<HashMap<String, String>>();
        mSchedule = new SimpleAdapter(this, mylist, R.layout.row, new String[] {
                "NoEnent", "Date", "Time" }, new int[] { R.id.TRAIN_CELL,
                R.id.FROM_CELL, R.id.TO_CELL });

        DB.open();
        Cursor c = DB.selectId();
        c.moveToFirst();

        for (int i = 0; i < c.getCount(); i++) {

            HashMap<String, String> map = new HashMap<String, String>();
            map.put("NoEnent", c.getString(0));
            map.put("Date", c.getString(1));
            map.put("Time", c.getString(2));
            mylist.add(map);

            c.moveToNext();
        }

        mSchedule.notifyDataSetChanged();
        n = new RemoveArrayAdapter(this, mylist);

        setListAdapter(n);

    }

    public void are_u_sure(int position) {
        final int p = position;
        AlertDialog.Builder message = new AlertDialog.Builder(this);
        message.setMessage("Are you sure you want to remove this event?");
        message.setCancelable(false);
        message.setPositiveButton("Yes", new DialogInterface.OnClickListener() {

            public void onClick(
                    @SuppressWarnings("unused") final DialogInterface dialog,
                    @SuppressWarnings("unused") final int id) {

                HashMap<String, String> ob;
                String s[] = new String[3];
                ob = (HashMap<String, String>) mylist.get(p);
                Iterator myVeryOwnIterator = ob.keySet().iterator();
                int i = 0;
                while (myVeryOwnIterator.hasNext()) {
                    String key = (String) myVeryOwnIterator.next();
                    String value = (String) ob.get(key);
                    s[i] = value;
                    i++;

                }
                DB.open();
                DB.del_spec(s[0], s[1], s[2]);

            }
        });
        message.setNegativeButton("No", new DialogInterface.OnClickListener() {

            public void onClick(final DialogInterface dialog,
                    @SuppressWarnings("unused") final int id) {
                dialog.cancel();
            }
        });
        final AlertDialog alert = message.create();
        alert.show();

    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {

        // get selected items
        are_u_sure(position);

    }

} 
```

RemoveArrayAdapter 的代码：

```
public class RemoveArrayAdapter extends ArrayAdapter<HashMap<String, String>> 
{
    private final Context context;
    private final ArrayList<HashMap<String, String>> values;
   public View vv;

    public RemoveArrayAdapter(Context context, ArrayList<HashMap<String, String>> values) {
        super(context, R.layout.removeevent, values);
        this.context = context;
        this.values = values;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View rowView = inflater.inflate(R.layout.removeevent, parent, false);
        TextView textView = (TextView) rowView.findViewById(R.id.TRAIN_CELL);
        TextView textView2 = (TextView) rowView.findViewById(R.id.FROM_CELL);
        TextView textView3 = (TextView) rowView.findViewById(R.id.TO_CELL);
        ImageView imageView = (ImageView) rowView.findViewById(R.id.logo);
        textView.setText(values.get(position).get("NoEnent"));
        textView2.setText(values.get(position).get("Date"));
        textView3.setText(values.get(position).get("Time"));
        // I'm guessing you want to modify the Logo?!? if yes pass another ArrayList to this adapter
       //contaning the info to set the ImageView

        return rowView;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T09:11:34.173

删除 .You 的对象后，`Hashmap from List<>.`您只需调用`notifyDataSetChanged()`

**删除元素：**

```
mylist.remove(position); 
```

所以解决方案是这样的：

```
mylist.remove(position);
adapter.notifyDataSetChanged(); 
```

# c# - 从离线 HTML5 WebDB (WebSQL) 更新 ASP 数据库

> ID：11186365
> 
> 赞同：1
> 
> 时间：2012-06-25T09:09:23.800
> 
> 标签：c#, asp.net, html, web-sql

我有一个 ASP.Net 4.0 应用程序 (C#)，它在服务器上包含一个数据库。我目前正在使用 HTML 5 appcache 和 WebDB (WebSQL) 添加离线功能。一切似乎都很顺利；我可以检测连接性，并且可以在离线时在本地存储数据库条目。

但是，我在尝试将离线数据添加到服务器上的数据库时遇到了一些困难。

对于如何以及在何处进行更新的概念，我有点迷茫。可以在 aspx 页面中用 C# 执行对 webDB 的更新吗？还是我需要学习一些新技术，例如 JQuery 或 JSON？

...我还需要将更新从服务器发送到本地 WebSQL（2 路同步），但我一次迈出一步。

# scripting - UTF-8 文件中的坏字符

> ID：11186367
> 
> 赞同：1
> 
> 时间：2012-06-25T09:09:50.180
> 
> 标签：scripting, utf-8

我有一个 geany 告诉我的文件是 UTF-8 文件，但包含以下字符：

Ã¹ 而不是 ù

等等。那是因为 0xC3 + 0xB9 被认为是两个字符，而不仅仅是 U+00F9，对吧？使用 geany，文件的编码已经是 UTF-8，如果我切换到 ISO-8859，我当然不会得到更正的字符。

有没有像 bash 命令、java 类、ruby 模块或魔法药水这样的东西可以自动改变这个东西，而无需手动操作？

编辑：

如果我尝试切换，则无法保存文件，因为出现以下错误：

> 错误消息：转换输入中的字节序列无效错误发生在“€”（行：1389，列：46）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:03:20.940

听起来 Geany 将文件解释为 ISO-8859-1，正如您所说，这意味着它显示的是两个字符而不是一个字符。

两个可能有用的命令：`od`和`iconv`. od 是“八进制转储”，您可以使用它来准确验证文件中的字节。[iconv](http://en.wikipedia.org/wiki/Iconv "图标v")用于将字符串从一种编码转换为另一种编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T09:52:51.833

这似乎是 Geany 的错误。如果您打开**ANSI**文件（在 Windows 中创建），Geany 会将文件解释为**ISO-8859-1**。当您尝试添加一些 unicode 符号并保存它时，您会得到

```
An error occurred while converting the file from UTF-8 in "ISO-8859-1". 
```

尝试**Document->Set Encoding->Unicode (UTF-8)**并保存文档。它有助于。

# emacs - Symbol的函数定义为void：x-cut-buffer-or-selection-value

> ID：11186370
> 
> 赞同：18
> 
> 时间：2012-06-25T09:10:06.500
> 
> 标签：emacs

刚刚在 Windows 7 下安装了 Emacs 24

尝试在 emacs 中剪切和粘贴（kill & yank）时出现以下错误，例如

```
C-k, C-y 
```

杀死一行并将其复制到其他地方：

```
Symbol's function definition is void: x-cut-buffer-or-selection-value 
```

我已从我的 .emacs 中注释掉以下内容并重新启动了 emacs，但错误仍然存​​在：

```
;; get copy and paste to work between emacs and other windows
;; (setq x-select-enable-clipboard t)
;; (setq interprogram-paste-function 'x-cut-buffer-or-selection-value) 
```

在linux下使用具有相同.emacs文件的emacs 24我没有类似的问题

我已经完成了最初的 googel 拖网，但我发现的所有信息都表明该错误已被修复，这并没有太大帮助

不幸的是，这使我无法在 Windows 下使用 emacs

**更新**

这条线似乎没有引起问题：

```
;; get copy and paste to work between emacs and other windows
(setq x-select-enable-clipboard t) 
```

但是这些行可以：

```
;; this line causes cut/paste errors under windows (emacs 24)
;; (setq interprogram-paste-function 'x-cut-buffer-or-selection-value)

;; this alternative fixes windows problems but causes errors under linux (emacs 24)
(setq interprogram-paste-function 'x-selection-value) 
```

我已经尝试过让我的 .emacs 平台有条件，例如：

```
;; this line causes cut/paste errors under windows (emacs 24)
(if (eq system-type 'gnu-linux) (setq interprogram-paste-function 'x-cut-buffer-or-selection-value) )
;; (setq interprogram-paste-function 'x-cut-buffer-or-selection-value)

;; this alternative causes errors under linux (emacs 24)
(if (eq system-type 'windows-nt) (setq interprogram-paste-function 'x-selection-value) )
;;(setq interprogram-paste-function 'x-selection-value) 
```

这解决了问题，但这似乎有点杂乱无章......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T20:11:11.967

EMACS 24 中更改了变量名称：

current-kill: Symbol 的函数定义为 void: x-cut-buffer-or-selection-value

打开您的 .emacs 并更改：'x-cut-buffer-or-selection-value)

to: (setq interprogram-paste-function 'x-selection-value)

我在这篇文章中找到了答案：http: [//lists.gnu.org/archive/html/emacs-devel/2010-09/msg00638.html](http://lists.gnu.org/archive/html/emacs-devel/2010-09/msg00638.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T10:41:11.233

如果您根本不进行自定义，Emacs 的行为会如何？即从

```
emacs -Q 
```

?

我面前没有 Windows 机器，但我的配置中没有任何特定于 Windows 的剪切/粘贴功能，而且我从未遇到过 24 的任何问题，尽管我还没有尝试过稳定版本。

# xpages - 附件上传后服务器的请求大小限制和连接重置

> ID：11186371
> 
> 赞同：0
> 
> 时间：2012-06-25T09:10:08.923
> 
> 标签：xpages, lotus-domino

在提交大小超过请求大小限制的附件后，domino 发送回我们的应用程序的连接重置错误，我们该怎么办？我们使用标准的上传控制。

有什么可以让我们处理这个错误吗？目前这是一个非常严重的问题，因为它可能导致数据丢失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T23:49:42.343

您可以检查您的浏览器是否支持 html5 文件 API。如果是 - 在上传之前检查文件大小是可能的（在某处有一个例子）。除此之外，我支持 Ferry 的建议

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:24:32.337

我实际上不使用 Xpage，但我在 domino 6 中遇到了类似的问题。为了纠正这个限制，我在弹出窗口中使用了一个临时文档。附件保存在临时文档中，当用户保存为文档时，代理将附件从临时文档复制到最终文档。

另一个代理每晚都会删除临时文档。

我希望这会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T21:46:59.707

上传限制可以在 Xpages 选项卡的应用程序属性中设置，并且您的网站文档的“Domino Web 引擎”选项卡上有一个“最大发布数据”设置。

我为 Xpages 编写了一个免费的异步文件上传控件，您可以在其中防止用户在上传开始之前上传太大的文件。你可以[在这里下载](http://www.openntf.org/Internal/home.nsf/project.xsp?databaseName=CN=NotesOSS2/O=NotesOSS!!Projects%5Cpmt.nsf&documentId=D5639B5FFB2823F8862578AF00705169&action=openDocument)

# sql - 快速删除早于 2 天前的行

> ID：11186374
> 
> 赞同：1
> 
> 时间：2012-06-25T09:10:17.647
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我有一个 Web 应用程序，它从包含消息跟踪日志的 SQL 数据库中读取数据，出于性能原因，我想确保数据库中的日志不会超过 2 天。

通常这是一个简单的挑战，只需使用删除语句删除记录即可？

不幸的是，对我来说不是那么简单，该表包含数百万的记录计数，并且删除语句需要一段时间才能运行。有没有办法让这个更快？

我目前正在这样做：

```
DECLARE @CutOffDate datetime;
SET @CutOffDate = DATEADD(d, -2, GETDATE());

WHILE @@ROWCOUNT > 0
BEGIN
    DELETE TOP (2000) E12_MessageTracking
    WHERE [TimeStamp] < @CutOffDate;

    DELETE TOP (2000) E12_MessageTracking_Recipients
    WHERE [TimeStamp] < @CutOffDate;
END 
```

我非常频繁地运行批量插入查询，因此我也需要能够频繁地运行删除，但目前该任务在删除语句上“超限”并且运行的脚本无法跟上实时。

更新：

这是你们要求的版本信息：

Microsoft SQL Server 2008 R2 (RTM) - 10.50.1810.0 (X64) Feb 3 2012 17:19:10 版权所有 (c) Microsoft Corporation Standard Edition (64-bit) o​​n Windows NT 6.1 (Build 7600:) (Hypervisor)

对于索引，表没有 PK/FK 关系，但它们“链接”在名为 MessageID 的字段上。问题是 MessageID 并不总是填写，所以我使用了一个名为 InternalMessageID 的子字段，它可以更好地链接。我遇到的问题之一是 E12_MessageTracking 表中的每条消息都有多行，它们链接到 E12_MessageTracking_Recipients 表。

我很想在这些表之间建立适当的关系，但现在我不能，因为如果不使用预先存在的 InternalMessageID 或 MessageID 列，我无法识别与消息相关的所有项目。

对于索引，它们如下所示：

E12_MessageTracking

InternalMessageID 列的索引，包括为时间戳和事件设置的列

E12_MessageTracking_Recipients

InternalMessageID 列的索引，包括为时间戳和收件人设置的列

谢谢，克里斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:18:16.153

我要考虑的第一件事是确保表有一个索引，`TimeStamp`第一个索引列在哪里。

更多详情：

如果 Timestamp 不是第一列，并且您的查询没有过滤它之前的列，则无法使用索引（想象一下在您知道第二个第一个字母的图书馆中寻找一本书单词）。

通过查看 SSMS 中脚本的执行计划，您可以有一个更好的想法。如果查询上`E12_MessageTracking`说 a `Table Scan`，那么没有使用索引。

# scorm - 前置条件规则

> ID：11186378
> 
> 赞同：2
> 
> 时间：2012-06-25T09:10:22.987
> 
> 标签：scorm, scorm2004

请参阅以下清单。假设我们要第一次启动以下内容包。当我们单击学习管理系统 (LMS) 中的开始按钮时，应该提供哪些活动？

```
<organization identifier = "OB-03c">
    <title>Content Package 1</title>
    <item identifier = "activity_1" identifierref = "SEQ01">
        <title>Activity 1</title>
        <imsss:sequencing>
            <imsss:sequencingRules>
                <imsss:preConditionRule>
                    <imsss:ruleConditions>
                        <imsss:ruleCondition operator="not" condition="objectiveStatusKnown"/>
                    </imsss:ruleConditions>
                    <imsss:ruleAction action = "skip"/>
                </imsss:preConditionRule>
            </imsss:sequencingRules>
            <imsss:objectives>
                <imsss:primaryObjective objectiveID = "PRIMARYOBJ">
                    <imsss:mapInfo targetObjectiveID="gObj-OB03-3" />
                </imsss:primaryObjective>
            </imsss:objectives>
        </imsss:sequencing>
    </item>
    <item identifier = "activity_2">
        <title>Activity 2</title>
        <item identifier = "activity_3">
            <title>Activity 3</title>
            <item identifier = "activity_4" identifierref = "SEQ01">
                <title>Activity 4</title>
            </item>
            <item identifier = "activity_5" identifierref = "SEQ01">
                <title>Activity 5</title>
                <imsss:sequencing>
                    <imsss:sequencingRules>
                        <imsss:preConditionRule>
                            <imsss:ruleConditions>
                                <imsss:ruleCondition condition = "satisfied"/>
                            </imsss:ruleConditions>
                            <imsss:ruleAction action = "skip"/>
                        </imsss:preConditionRule>
                    </imsss:sequencingRules>
                    <imsss:objectives>
                        <imsss:primaryObjective objectiveID = "PRIMARYOBJ">
                            <imsss:mapInfo targetObjectiveID="gObj-OB03-1" />
                        </imsss:primaryObjective>
                    </imsss:objectives>
                </imsss:sequencing>
            </item>
            <item identifier = "activity_6" identifierref = "SEQ01">
                <title>Activity 6</title>
            </item>
            <imsss:sequencing>
                <imsss:controlMode choice = "false" flow = "true"/>
                <imsss:sequencingRules>
                    <imsss:preConditionRule>
                        <imsss:ruleConditions>
                            <imsss:ruleCondition condition = "satisfied"/>
                        </imsss:ruleConditions>
                        <imsss:ruleAction action = "skip"/>
                    </imsss:preConditionRule>
                </imsss:sequencingRules>
                <imsss:objectives>
                    <imsss:primaryObjective objectiveID = "PRIMARYOBJ" satisfiedByMeasure = "true">
                        <imsss:minNormalizedMeasure>0.6</imsss:minNormalizedMeasure>
                        <imsss:mapInfo targetObjectiveID="gObj-OB03-3" readSatisfiedStatus = "false" writeSatisfiedStatus = "true" />
                    </imsss:primaryObjective>
                </imsss:objectives>
            </imsss:sequencing>
        </item>
        <item identifier = "activity_7" identifierref = "SEQ01">
            <title>Activity 7</title>
            <imsss:sequencing>
                <imsss:sequencingRules>
                    <imsss:preConditionRule>
                        <imsss:ruleConditions>
                            <imsss:ruleCondition operator = "not" condition = "satisfied"/>
                        </imsss:ruleConditions>
                        <imsss:ruleAction action = "skip"/>
                    </imsss:preConditionRule>
                </imsss:sequencingRules>
                <imsss:objectives>
                    <imsss:primaryObjective objectiveID = "PRIMARYOBJ">
                        <imsss:mapInfo targetObjectiveID="gObj-OB03-2" />
                    </imsss:primaryObjective>
                </imsss:objectives>
            </imsss:sequencing>
        </item>
        <item identifier = "activity_8" identifierref = "SEQ01">
            <title>Activity 8</title>
            <imsss:sequencing>
                <imsss:sequencingRules>
                    <imsss:preConditionRule>
                        <imsss:ruleConditions>
                            <imsss:ruleCndition operator = "not" condition = "satisfied"/>
                            <imsss:ruleCondition operator = "not" condition = "objectiveStatusKnown" referencedObjective = "obj1"/>
                        </imsss:ruleConditions>
                        <imsss:ruleAction action = "skip"/>
                    </imsss:preConditionRule>
                </imsss:sequencingRules>
                <imsss:objectives>
                    <imsss:primaryObjective objectiveID = "PRIMARYOBJ">
                        <imsss:mapInfo targetObjectiveID="gObj-OB03-2" />
                    </imsss:primaryObjective>
                    <imsss:objective objectiveID = "obj1" >
                        <imsss:mapInfo targetObjectiveID = "gObj-OB03-3" />
                    </imsss:objective>
                </imsss:objectives>
            </imsss:sequencing>
        </item>
        <imsss:sequencing>
            <imsss:controlMode choice = "false" flow = "true"/>
        </imsss:sequencing>
    </item>
    <item identifier = "activity_9" identifierref = "SEQ01">
        <title>Activity 9</title>
    </item>
    <imsss:sequencing>
        <imsss:controlMode choice = "false" flow = "true"/>
    </imsss:sequencing>
</organization> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:06:23.257

活动 4 将首先交付。说明： 1\. 由于 preConditionRule 的objectiveStatusKnown，Activity 1 将被跳过。2\. 活动 2 是父项。3\. 活动 3 是父项。4\. Activity 4 是第一个可用的叶子，它的父级（Activity 3）将“流”设置为 true。为了帮助您了解您的清单是如何工作的，请从[http://www.naseelco.com](http://www.naseelco.com)下载 Visual Manifest 2004 。它直观地显示您的清单。要测试您的清单，您可以从同一网站下载 LMS2004。它是一个功能齐全的 LMS，但它可以在没有服务器的本地机器上运行。以下是您在 Visaul Manifest 和 LMS2004 中加载的清单的快照。

![视觉清单](../Images/7418731a4a8b133c5fadbceb1b75474c.png)

![LMS2004](../Images/5db48ddf647590a3685a4024023bc680.png)

# c++ - 重用“&&”标记以进行右值引用的基本原理？

> ID：11186379
> 
> 赞同：6
> 
> 时间：2012-06-25T09:10:23.030
> 
> 标签：c++, c++11, rvalue-reference

我最近举办了一个关于 C++11 的演讲，主要关注右值和移动语义。在演示过程中，提出了一个问题，即为什么标准委员会决定重用“&&”-token，而不是引入一个新的，如“§”。

有没有人遇到过重用 && 的理由？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-25T10:00:53.443

委员会想要一个美国键盘上的令牌。我们还需要一些不会破坏现有代码的东西。 `&&`似乎是一个明显的使用标记。我们还在寻找对标准进行最小限度的更改，并且重用代币而不是发明新代币的想法很有吸引力。

我认为 John Spicer (EDG)`&&`在 2002 年 4 月的库拉索岛会议上首次建议将其作为代币。

# .net - 使用 linq 将 xml 解析为类

> ID：11186392
> 
> 赞同：2
> 
> 时间：2012-06-25T09:11:08.360
> 
> 标签：.net, linq

我有一个定义请求 xml 的类我想使用 linq 将 xml 解析为类（稍后做相反的事情）我得到 req 为空，并且在返回类所有属性的函数中“MidaClientID 名称“MidaClientID”在当前上下文中不存在“

```
public class Request
    {
        public int MidaClientID { get; set; }

        public int Password { get; set; }

        public int CandNum { get; set; }

        public string CandFirstName { get; set; }

        public string CandLastName { get; set; }

        public int CandPhone1 { get; set; }

        public int CandPhone2 { get; set; }

        public int CandPhone3 { get; set; }

        public string CandAttach1 { get; set; }

        public string CandAttach2 { get; set; }

        public string CandAttach3 { get; set; }

        public int ClientNum { get; set; }

        public string ClientName { get; set; }

        public int ContactNum { get; set; }

        public string ContactFirstName { get; set; }

        public string ContactLastName { get; set; }

        public string ContactEmail { get; set; }

        public int EventNum { get; set; }

        public DateTime EventDate { get; set; }

        public DateTime EventTime { get; set; }

        public int QuestNum { get; set; }

    }

 [WebMethod]
        public void GetXml()
        {
            XDocument doc = XDocument.Load(@".xml");
            List<Request> req = CreateRequest(doc);
        }

        public static List<Request> CreateRequest(XDocument input)
        {
            IEnumerable<Request> req = from r in input.Descendants("Request")
                                       select new Request()
                                       {
                                           //MidaClientID = (int)r.Attribute("MidaClientID"),
                                           MidaClientID = Convert.ToInt32(r.Element("MidaClientID").Value),
                                           Password = (int)r.Attribute("MidaClientPassword"),
                                           CandNum = (int)r.Attribute("CandNum"),
                                           CandFirstName = (string)r.Attribute("CandFirstName"),
                                           CandLastName = (string)r.Attribute("CandLastName"),
                                           CandPhone1 = (int)r.Attribute("CandPhone1"),
                                           CandPhone2 = (int)r.Attribute("CandPhone2"),
                                           CandPhone3 = (int)r.Attribute("CandPhone3"),
                                           CandAttach1 = (string)r.Attribute("CandAttach1"),
                                           CandAttach2 = (string)r.Attribute("CandAttach2"),
                                           CandAttach3 = (string)r.Attribute("CandAttach3"),
                                           ClientNum = (int)r.Attribute("ClientNum"),
                                           ClientName = (string)r.Attribute("ClientName"),
                                           ContactNum = (int)r.Attribute("ContactNum"),
                                           ContactFirstName = (string)r.Attribute("ContactFirstName"),
                                           ContactLastName = (string)r.Attribute("ContactLastName"),
                                           ContactEmail = (string)r.Attribute("ContactEmail"),
                                           EventNum = (int)r.Attribute("EventNum"),
                                           EventDate = (DateTime)r.Attribute("EventDate"),
                                           EventTime = (DateTime)r.Attribute("EventTime"),
                                           QuestNum = (int)r.Attribute("QuestNum")
                                       };
            return new List<Request> { };
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:16:04.703

您可以通过序列化对象来做到这一点。

“序列化是获取对象状态并以某种方式持久化的过程。Microsoft .NET Framework 包括可以将任何对象序列化为 XML 的强大对象。System.Xml.Serialization 命名空间提供了这种能力。”

[http://support.microsoft.com/kb/815813](http://support.microsoft.com/kb/815813)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T04:38:40.577

您获得 null 的原因是因为您正在返回列表的新实例。

```
return new List<Request> { }; 
```

您可以将上面的代码行替换为

```
return req; 
```

如以下代码所示。

```
public static List<Request> CreateRequest(XDocument input)
        {
            IEnumerable<Request> req = from r in input.Descendants("Request")
                                       select new Request()
                                       {
                                           //MidaClientID = (int)r.Attribute("MidaClientID"),
                                           MidaClientID = Convert.ToInt32(r.Element("MidaClientID").Value),
                                           Password = (int)r.Attribute("MidaClientPassword"),
                                           CandNum = (int)r.Attribute("CandNum"),
                                           CandFirstName = (string)r.Attribute("CandFirstName"),
                                           CandLastName = (string)r.Attribute("CandLastName"),
                                           CandPhone1 = (int)r.Attribute("CandPhone1"),
                                           CandPhone2 = (int)r.Attribute("CandPhone2"),
                                           CandPhone3 = (int)r.Attribute("CandPhone3"),
                                           CandAttach1 = (string)r.Attribute("CandAttach1"),
                                           CandAttach2 = (string)r.Attribute("CandAttach2"),
                                           CandAttach3 = (string)r.Attribute("CandAttach3"),
                                           ClientNum = (int)r.Attribute("ClientNum"),
                                           ClientName = (string)r.Attribute("ClientName"),
                                           ContactNum = (int)r.Attribute("ContactNum"),
                                           ContactFirstName = (string)r.Attribute("ContactFirstName"),
                                           ContactLastName = (string)r.Attribute("ContactLastName"),
                                           ContactEmail = (string)r.Attribute("ContactEmail"),
                                           EventNum = (int)r.Attribute("EventNum"),
                                           EventDate = (DateTime)r.Attribute("EventDate"),
                                           EventTime = (DateTime)r.Attribute("EventTime"),
                                           QuestNum = (int)r.Attribute("QuestNum")
                                       };
            return req; 
```

}

# ruby-on-rails - RoR 找不到没有 ID 的主题

> ID：11186398
> 
> 赞同：0
> 
> 时间：2012-06-25T09:11:27.733
> 
> 标签：ruby-on-rails, rails-activerecord

我是新手 RoR 开发人员。我陷入了一个问题。我正在尝试与可以创建主题的用户一起制作应用程序，其他人可以在主题下发表他们的评论。主题由用户创建并在主页上作为列表列出。我几乎完成了这些话题。但是，当我单击它们查看帖子时，我得到找不到没有 ID 错误的主题。

我想我的错误是主题有两个索引 id 和 user_id。这是我的主题模型：

```
class Topic < ActiveRecord::Base
  attr_accessible :content, :title
  belongs_to    :user
  has_many      :posts
  validates :title, presence: true, length: { maximum: 140 }
  validates :content, presence: true
  validates :user_id, presence: true
  default_scope order: 'topics.created_at DESC'
end 
```

还有我的帖子模型

```
class Posts < ActiveRecord::Base
  attr_accessible :content 
  belongs_to :topic
  belongs_to :user
  validates :user_id, presence: true
  validates :content, presence: true
  default_scope order: 'posts.created_at DESC'
end 
```

这是我的topics_controller.rb：

```
class TopicsController < ApplicationController
  before_filter :signed_in_user, only: [:create, :destroy]
  before_filter :correct_user, only: :destroy

    def show
        @topic = Topic.find(params[:id])
        @posts = @topic.posts.paginate :page => params[:page], :per_page => 20
    end
       .
       ..vs 
```

这是我的 config/routes.rb

```
MyPedia::Application.routes.draw do
    resources :users
    resources :sessions, only: [:new, :create, :destroy]
    resources :topics, only: [:show, :create, :destroy]
    resources :posts
    root to: 'static_pages#home'

    match '/topicin',   to: 'topics#show'
    match '/signup',  to: 'users#new'
  match '/signin',  to: 'sessions#new'
  match '/signout', to: 'sessions#destroy', via: :delete

    match '/help',    to: 'static_pages#help'
    match '/about',   to: 'static_pages#about'
    match '/contact', to: 'static_pages#contact' 
```

我的主题 show.html.erb

```
<% title @topic.title %>  
<div class ="center">
<h3><%= @topic.title %></h3>  

<% if @posts? %>  

  <% for post in @posts do %>  
    <p><strong><%= post.content %>  
  <% end %>  
<% end %>  
</div> 
```

我试图找到解决这个问题的方法。感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T09:21:06.587

尝试使用 GET /topic/1，这会有所帮助。您设置匹配路线的方式是错误的，可能是多余的。您可以在这里查看更多信息： http: [//guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T09:15:00.883

虽然主题有 restful 路由，但在 topic#show 的路由中没有`:id`：

```
 match '/topicin',   to: 'topics#show'  # <===== :id is missing 
```

也许这是造成问题的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T09:26:00.613

只需添加

```
 match '/topicin/:id',   to: 'topics#show' 
```

# google-app-engine - appegine 数据存储中的 JPA 查询不起作用

> ID：11186400
> 
> 赞同：1
> 
> 时间：2012-06-25T09:11:30.280
> 
> 标签：google-app-engine, jpa, persistence

我正在尝试进行查询，但没有运气。我正在 AppEngine 上开发，使用 JPA 进行数据访问。当我将查询字符串设置为：

```
"SELECT m FROM ModelLocationJPA m WHERE  m.latitude BETWEEN :lowerLatitude AND  :higherLatitude" 
```

它有效，而且：

```
 "SELECT m FROM ModelLocationJPA m WHERE  m.longitude BETWEEN :lowerLongitude AND :higherLongitude" 
```

作品。所以，我想那是因为我用多个“AND”弄乱了一些东西，但我不知道是什么。

我正在尝试进行以下工作，但出现错误：javax.persistence.PersistenceException: Illegal argument

```
EntityManager em = null;
    List<ModelLocationJPA> dbModelLocations = null;
    ArrayList<ModelLocation> modelLocations = new ArrayList<ModelLocation>();
    String aQuery = "SELECT m FROM ModelLocationJPA m WHERE  ( (m.latitude BETWEEN :lowerLatitude AND  :higherLatitude) AND ( m.longitude BETWEEN :lowerLongitude AND :higherLongitude ))";

    try {
         em = EMF.get().createEntityManager();
            Query query = em.createQuery(aQuery);
            query.setParameter("lowerLatitude",box.getMinLatitude());
            query.setParameter("higherLatitude",box.getMaxLatitude());
            query.setParameter("lowerLongitude",box.getMinLongitude());
            query.setParameter("higherLongitude",box.getMaxLongitude());

                 dbModelLocations = query.getResultList();

        } finally {
        em.close();
        } 
```

如果有人可以告诉我出了什么问题，那就太好了。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T09:25:44.117

[文档](https://developers.google.com/appengine/docs/java/datastore/queries#Restrictions_on_Queries)说：

> 查询只能在其所有过滤器中的一个属性上使用不等式过滤器（<、<=、>=、>、!=）。

# php - 计算项目和数量价格然后发送电子邮件

> ID：11186403
> 
> 赞同：1
> 
> 时间：2012-06-25T09:11:52.587
> 
> 标签：php, javascript, jquery, forms

我有一个网站，我们将提供一些产品供会员购买。请参阅[http://jsfiddle.net/TbeQx/](http://jsfiddle.net/TbeQx/)

```
<form action="" name="priceCalc" method="POST">
  I Am Paying For :
  <select name="product" onchange="price();">
      <option value="15">item 1 - $15.00</option>
      <option value="35">item 2 - $35.00</option>
      <option value="35">item 3 - $35.00</option>
      <option value="29.90">item 4 - $29.90</option>
      <option value="29.90">item 5 - $29.90</option>
      <option value="26.90">item 6 - $26.90</option>
      <option value="32.90">item 7 - $32.90</option>
      <option value="59.90">item 8 - $59.90</option>
      <option value="59.90">item 9 - $59.90</option>
    </select>
    <br />
    <br />

    Quantity :
  <select name="quantity" onchange="price();">
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
    </select>
    <br />
    <br />
    Please deposit the freight free full total of <br />
    <span style="color:red; font-size:18px;" id="prices">$</span> 
    into our account : 
    <br />
    <input type="submit" name="submit" value="BUY NOW!" />
</form>​

/* JavaScript */
    function price() {
        var qty = document.priceCalc.quantity;
        var itm = document.priceCalc.product;
        var price = parseInt(qty.value) * parseInt(itm.value);
        document.getElementById("prices").innerHTML = '$' + price;
    }​ 
```

如何自动计算价格并将其显示在两个下拉列表的 id="prices" 跨度标签之间。

这向用户显示总数是多少。

然后在提交时，我需要它向指定的电子邮件地址发送一封电子邮件，说..“数量”x“项目名称”=“数量”

（例如，2 x 项目 4 - 29.90 美元 = 59.80 美元）

我的 php 在这里[http://jsfiddle.net/8hzNV/](http://jsfiddle.net/8hzNV/)

```
<?php
$quantity = $_POST["quantity"];
$item = $_POST["product"];
$subject = "Website Sale!";
$emailto = "myemail@test.com";

// prepare email body text
$body .= "";
$body .= "To Sales Team";
$body .= "\n";
$body .= "\n";
$body .= "I have purchased  ";
$body .= $quantity;
$body .= "x  ";
$body .= $item;
$body .= "\n";
$body .= "\n";
$body .= "Please look out for my payment in the account over the next few days.";

// send email 
$success = mail($emailto, $subject, $body");

// redirect to success page 
if ($success){
  print "<meta http-equiv=\"refresh\" content=\"0;URL=../order_sent.php\">";
}
else{
  print "<meta http-equiv=\"refresh\" content=\"0;URL=../index.php\">";
}

?>​ 
```

我自己也尝试过。但这不是我的强项，希望我能寻求一些专家的建议。提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:12:55.867

首先，如果你将 jQuery 导入到你的项目中，为什么不使用 jQuery 选择器，这样更简单？

*   您应该使用，`parseFloat`而不是`parseInt`
*   您只是在发布`Item Price`，`Item Quantity`如果您想将项目名称附加到电子邮件正文，您也应该发布它。所以你可以用 intput[type=hidden]

# 这是更新的 HTML

```
<form action="" name="priceCalc" method="POST">
  I Am Paying For :
  <select name="product">
      <option>Select Item</option>
       <option value="15">item 1 - $15.00</option>
       <option value="35">item 2 - $35.00</option>
       <option value="35">item 3 - $35.00</option>
       <option value="29.90">item 4 - $29.90</option>
       <option value="29.90">item 5 - $29.90</option>
       <option value="26.90">item 6 - $26.90</option>
       <option value="32.90">item 7 - $32.90</option>
       <option value="59.90">item 8 - $59.90</option>
       <option value="59.90">item 9 - $59.90</option>
    </select>
    <br />
    <br />

    Quantity :
  <select name="quantity" >
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
    </select>
    <br />
    <br />
    Please deposit the freight free full total of <br />
    <span style="color:red; font-size:18px;" id="prices">$</span> into our account : 
    <br />
    <input type="hidden" id="itemname" name = "itemname" value= "">
    <input type="submit" name="submit" value="BUY NOW!" />
</form>​ 
```

您不需要设置内联函数 price()，

# 这是使用 jQuery 选择器更新的 JavaScript 代码

```
$(function() {
    $("select[name='product'],select[name='quantity']").change(function() {
        var qty = $("select[name='quantity'] option:selected");
        var itm = $("select[name='product'] option:selected");
        var price = parseFloat(qty.val()) * parseFloat(itm.val());
        $("#prices").html('$' + price);
        $("#itemname").val(itm.html());
    });
});
​ 
```

在 PHP 页面中，您应该从 POST 数组中获取 $itemname，

# PHP页面应该是这样的，

```
<?php
    $quantity = $_POST["quantity"];
    $item = $_POST["product"];
    $itemname = $_POST["itemname"];
    $subject = "Website Sale!";
    $emailto = "myemail@test.com";

    // prepare email body text
    $body .= "";
    $body .= "To Sales Team";
    $body .= "\n";
    $body .= "\n";
    $body .= "I have purchased  ";
    $body .= $quantity;
    $body .= "x  ";
    $body .= $itemname;
    $body .= " = ";
    $body .= $item * $quantity;
    $body .= "\n";
    $body .= "\n";
    $body .= "Please look out for my payment in the account over the next few days.";

    // send email 
    $success = mail($emailto, $subject, $body");

    // redirect to success page 
    if ($success){
      print "<meta http-equiv=\"refresh\" content=\"0;URL=../order_sent.php\">";
    }
    else{
      print "<meta http-equiv=\"refresh\" content=\"0;URL=../index.php\">";
    }

?>​ 
```

# javascript - 将监听器添加到 Ext.grid.ColumnModel

> ID：11186408
> 
> 赞同：0
> 
> 时间：2012-06-25T09:12:09.237
> 
> 标签：javascript, extjs, extjs3

我试图在 Ext.grid.GridPanel 内向 Ext.grid.ColumnModel 添加一个侦听器（columnshow），但没有调用我的侦听器函数。

请帮忙。

下面粘贴的部分代码。

```
 var gridCm = new Ext.grid.ColumnModel({
       columns  : data.result.columns,
       listeners    : {
            columnshow  : function( a , b ) {
                alert(1);   
            }   
       }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:28:11.293

因为不支持？`columnshow`Ext 3.4中没有

[http://docs.sencha.com/ext-js/3-4/#!/api/Ext.grid.ColumnModel](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.grid.ColumnModel)

columnshow 在 ExtJS 4.0+ 中可用。

[http://docs.sencha.com/ext-js/4-0/#!/api/Ext.grid.column.Column-event-columnshow](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.grid.column.Column-event-columnshow)

# jquery - jquery colorbox在实际弹出之前显示空弹出

> ID：11186411
> 
> 赞同：1
> 
> 时间：2012-06-25T09:12:13.840
> 
> 标签：jquery, colorbox

在 jquery colorbox 演示页面本身中，您可以看到在以正确的高度和宽度加载弹出窗口之前，将加载大约 600*500（大约）大小的一个空弹出窗口。然后它会根据内容大小自动调整大小。

我们是否可以更改此默认行为。我不想显示空弹出窗口，然后调整为实际宽度和高度。

注意：我在弹出内容中没有任何图像。它只是包装在 table 和 div 标签中的表单字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:24:27.743

我假设将`initialWidth`and设置`initialHeight`为零应该会让你得到你想要的。否则，源代码在 Github 上，因此您始终可以修改源代码以进行不同的加载。

如果困扰您的是空白的白色内容，您可以使用 Mike Alsup 的 BlockUI ( [http://jquery.malsup.com/block/](http://jquery.malsup.com/block/) ) 插件在弹出窗口中显示加载动画。

# java - 获取哪个应用程序使用 android 上的特定端口

> ID：11186412
> 
> 赞同：4
> 
> 时间：2012-06-25T09:12:21.653
> 
> 标签：java, android, port

我有一个 android 本机应用程序，它在其中托管一个 Web 服务器。我想知道哪个应用程序在我的应用程序处理请求之前发出请求。我拥有的是调用应用程序的端口。

如何找出哪个应用程序正在使用此端口？我尝试查找所有进程（cat /proc/net/tcp6），但未列出具有我拥有的端口的应用程序（在根设备上）。我还尝试使用 netstat 命令的许多选项，但我没有得到任何有价值的信息。

我需要找到一种方法来在常规设备（未植根）上找到调用应用程序名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:47:10.883

uid 是 /proc/net/tcp6 中的一个字段，至少目前可以从非特权应用程序中读取。

然后你可以使用 PackageManager.getNameForUid()

也就是说，您的目标似乎是一个奇怪的设计。

# windows-7-x64 - 蓝屏后自动重启

> ID：11186413
> 
> 赞同：0
> 
> 时间：2012-06-25T09:12:22.580
> 
> 标签：windows-7-x64, bsod

如何让 Windows 7 x64 在 BSOD 后自动重启？在系统属性 -> 高级 -> 启动和恢复中有一个众所周知的“自动重启”选项，但它似乎只影响启动时间。如果成功启动后出现蓝屏，系统会蓝屏挂起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:34:35.617

这不是预期的行为。自动重启应该适用于所有情况，而不仅仅是在引导期间。在某些极端情况下它不起作用，但这些情况很少见，并且与非常具体的场景有关。最好在 MS 支持下进行。

# windows-phone-7.1 - 有没有办法使用计时器触发视频？

> ID：11186417
> 
> 赞同：0
> 
> 时间：2012-06-25T09:12:26.420
> 
> 标签：windows-phone-7.1

我正在尝试构建一个应用程序，我想在其中使用计时器触发视频，即类似于警报而不是带有音乐的警报弹出（带有贪睡和关闭选项），我希望我的应用程序打开视频页面。

请建议我如何进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:21:51.427

不可能让应用程序在特定时间启动。应用程序只能在直接响应用户交互时启动。

当时间（倒计时）触发（到期）时，在媒体元素上调用播放应该没有问题。你有什么具体问题。

# python - 减少尝试次数，python除外

> ID：11186422
> 
> 赞同：1
> 
> 时间：2012-06-25T09:12:51.937
> 
> 标签：python, try-except

我正在编写一个类似于诊断程序的程序，它运行一个测试，然后在此基础上做更多的测试，所以大部分都是在内部完成的，``try,except`而且数量很多。有没有其他方法可以实现这一点，但减少数量`try except`？

这是一个示例代码。

```
try:
    treeinfo = subprocess.check_output(['C:\Python27\Scripts\scons.bat','-f' ,'scons_default.py' ,'--tree=all'])
    print "\n"
    print "Your machine type is ",platform.machine()
        print "Compiling using default compiler\n"
    print treeinfo

except subprocess.CalledProcessError as e:
    print "ERROR\n"

try:
    with open ('helloworld.exe')as f:
        subprocess.call('helloworld.exe')
        print"Build success"
        log64 =  subprocess.check_output(["dumpbin", "/HEADERS", "helloworld.exe"])
        if arch64 in log64:
            print "Architecture of the compiled file is 64-bit "
        elif arch32 in log64:
            print "Architecture of the compiled file is 32-bit"
except IOError as e:
    print "Build failed\n"

print "\n" 
```

上面相同的代码（具有不同的文件名）重复，我知道这样做不是一个好习惯。我对 python 很陌生，谷歌搜索没有给出任何有用的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T09:30:26.573

您可以将逻辑拆分为单独的函数，并在一个`try`块中一个一个地调用它们：

```
def a():
    treeinfo = subprocess.check_output(['C:\Python27\Scripts\scons.bat','-f' ,'scons_default.py' ,'--tree=all'])
    print "\n"
    print "Your machine type is ",platform.machine()
    print "Compiling using default compiler\n"
    print treeinfo

def b():
    subprocess.call('helloworld.exe')
    print"Build success"

def c():
    log64 =  subprocess.check_output(["dumpbin", "/HEADERS", "helloworld.exe"])
    if arch64 in log64:
        print "Architecture of the compiled file is 64-bit "
    elif arch32 in log64:
        print "Architecture of the compiled file is 32-bit"

def try_these(funs, catch):
    for fun in funs:
        try:
            fun()
        except catch:
            print 'ERROR!'

try_these([a, b, c], catch=(IOError, OSError)) 
```

在哪里“捕获”您要处理的异常元组。

# jmeter - 如何解析sample1的响应以在JMeter中创建新样本

> ID：11186423
> 
> 赞同：14
> 
> 时间：2012-06-25T09:12:53.840
> 
> 标签：jmeter

我使用 JMeter 对 Web 服务器进行性能测试。我的测试用例如下：

```
step1: send file update request to server.
step2: server will return some files URL as html response
step3: client need to create new request with the URL returned in step2,thus need to parse 
the response of step2. 
```

我是 JMeter 的新手，不知道如何实现它。我基本上了解了 JMeter 关于预处理器和后处理器的知识，但仍然不知道该怎么做。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-25T11:19:06.627

好的，让我们在第一步之前开始：

`Right click -> Add -> Threads (Users) -> Thread Group`

*   现在实际的第一步（如果您使用 REST）：

`Add -> Sampler -> Http Request`

你有在底部`Send Files With the Request`。如果这是您要求的，您可以添加文件附件。

*   从服务器提取响应：

假设您的回答是这样的：

```
<Response>
  <name>StackOverflow.com</name>
  <url>http://stackoverflow.com/questions/11186423/how-to-parse-response-of-sample1-to-create-new-sample-in-jmeter</url>
</Response> 
```

这是你要做的：

`Right click on The http request you previously added (in step 1) -> Post Processors -> Xpath Extractor`

`Reference Name`是要在其中存储值的变量的名称。让我们命名它`url`。并且`Xpath query`是`Response/url`或者`//Response/url`如果您获得更多响应标签。如果你想要第一个`//Response[1]/url`等等..

*   重复步骤 1（复制/粘贴采样器并删除`Xpath Extractor`您不再需要的），并将 更改为`Server Name or IP`先前`${url}`返回的值。

瞧，你去。如果您有更具体的问题，请告诉我。Jmeter很有趣。

**每格蕾丝评论：**

想提取`https://192.168.100.46/updserver/download?action=signature_download&amp;token=&#xd;`

没有响应数据：

```
<responseData class="java.lang.String">&lt;html&gt;&#xd;
&lt;body&gt;&#xd;
ERROR=0&#xd;
MSG=N/A&#xd;
FILELIST=1555;1340778737370;1526545487;&#xd;
VERSION=1.002&#xd;
URL=https://192.168.100.46/updserver/download?action=signature_download&amp;token=&#xd;
INTERVAL=0&#xd;
&lt;/body&gt;&#xd;
&lt;/html&gt;&#xd;
</responseData> 
```

这应该很简单。`Add a post processor -> Regular Expression Extractor`并输入以下内容：

```
Reference Name : url 
Regular Expression : (http[\S]+)
Template : $1$
Match No. (0 for Random): 1 
```

所以现在你有了`url`变量，你可以在测试中进一步使用`${url}`. 让我知道这是否适合你。我用虚拟采样器进行了测试，它对我有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-13T12:38:50.607

这就是我从 url 中提取一些值并将其作为变量进一步传递的方式，以便下一个请求将包含它。

这是一些关于在 JMeter [http://jmeter.apache.org/usermanual/build-web-test-plan.html中进行测试的漂亮屏幕截图和更广泛的描述](http://jmeter.apache.org/usermanual/build-web-test-plan.html)

添加`Thread Group`和`HTTP Requests`

当这 `HTTP Requests`响应包含一些数据（在此示例中为 URL）时，您希望提取它并在之后使用它

所以让我们开始吧：

1.  转到您的第一个**HTTP 请求**，之后您会收到带有变量的响应：

    **添加**->**后处理器**->**正则表达式提取器**

    在此窗口集中：

    **要检查的响应字段：URL**

    **参考名称：** `MY-CUSTOM-VARIABLE-NAME`

    *任意定义变量名*

    **正则表达式：** permanent.part.of.url.com/([a-zA-Z0-9]*)

    *所以表达式* **([a-zA-Z0-9]*)** *负责在开始时遇到永久 url 后获取所有出现的字母和数字字符*

    **模板：** $1$

    *在我们的例子中只提取了一个表达式，需要读取它*

    **比赛编号（0 表示随机）：** 1

    *在这种情况下只有一个匹配，但如果出现更多匹配，您可以选择使用哪一个*

2.  现在将提取的值放入下一个**HTTP 请求** **路径：** some.other.url.com/`${MY-CUSTOM-VARIABLE-NAME}`

    请记住，您使用此模式 ${} 读取 JMeter 变量，因此`${MY-CUSTOM-VARIABLE-NAME}`在需要此值时使用

运行您的测试并检查您在请求的 url 中得到了什么`MY-CUSTOM-VARIABLE-NAME`使用正则 表达式进行实验以获得所需的输出。

这是关于这些东西的博文：http: [//kenning.co.nz/development/extracting-variables-using-regular-expressions-in-jmeter/](http://kenning.co.nz/development/extracting-variables-using-regular-expressions-in-jmeter/)

并且总是有用的 JMeter 文档：http: [//jmeter.apache.org/usermanual/component_reference.html#Regular_Expression_Extractor](http://jmeter.apache.org/usermanual/component_reference.html#Regular_Expression_Extractor)

# ios - GCC日历重叠

> ID：11186424
> 
> 赞同：0
> 
> 时间：2012-06-25T09:12:54.773
> 
> 标签：ios, calendar

我正在使用 GCCalendar 代码来显示日历视图。我面临处理重叠事件的问题。有没有人使用 GCCalendar 并实施了解决重叠事件问题的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T05:26:20.193

通过将同一时间段内发生的事件合并为单个事件并根据应用程序的要求适当地为事件添加描述来解决。

# ruby-on-rails - 如何使用 attr_accessible 创建工厂？

> ID：11186425
> 
> 赞同：0
> 
> 时间：2012-06-25T09:12:57.253
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec, factory-bot

如何与工厂打交道`attr_accessible`？

我的例子：

```
# model
class SomeModel

  attr_accessible :name, full_name, other_name

end

#spec
require 'spec_helper'

describe "test" do
  it do
    create(:some_model, name: "test name", user: User.first) #factory
  end

end

#error
ruby(17122,0x12a055000) malloc: *** error for object 0x8: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug 
```

我认为错误是因为`user_id`不在`attr_accessible`属性中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T17:41:03.253

好的，但无论如何如果你用关联定义你的工厂，它应该分配记录，即使`attr_protected`

```
factory :some_model do |sm|

  sm.name "John"
  sm.full_name "John Smith"
  sm.other_name  "some other"

  sm.association :user, :factory => :user
end 
```

然后

```
describe "test" do
  it "should create models with associations" do
    Factory(:some_model, name: "test name", user: User.first) #factory
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:10:18.477

由于 attr_accessible，这似乎与我得到的不同。但是，您可以简单地将**:user**添加到 attr_accessible

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T14:20:05.050

你不需要那个`SomeModel`吗？

```
belongs_to :user 
```

# web-services - 如何允许本地网络中的人访问我机器中的 Web 服务？

> ID：11186431
> 
> 赞同：0
> 
> 时间：2012-06-25T09:13:28.127
> 
> 标签：web-services, axis2, jboss5.x, windows-firewall, local-network

我使用 Axis 2 框架编写了一个 Web 服务，在 JBoss 5 中发布应用程序后，我可以使用本地计算机上的测试客户端 (SoapUI) 成功调用它。我可以从本地计算机发布到 WS 端点并获取预期的反应。

现在我想允许其他机器访问网络服务。

我在端点位置将“localhost”更改为“我自己的固定 IP”地址，并关闭了防火墙，但无法访问 WS。

注意：windows Xp SP3。

任何想法 ？提前致谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:40:29.593

请确保您遵循以下步骤

例如，如果你的 ip 是 10.132.243.54

*   项目清单
*   检查您的 IP 是否可以被其他系统 ping 通
*   不要使用 eclipse 运行，而是从命令提示符运行 jboss
*   在 run.bat 中启动 jboss-server 后缀 -b。命令是**run.bat -b 10.132.243.54**
*   使用 IP 而不是使用 localhost 从 SOAP-UI 访问 WS
*   如果您的 IP 仍然无法 ping 通，请关闭防火墙，然后按照上述步骤操作

抱歉回复晚了，但是我想这会解决问题

# eclipse - Eclipse Juno：找不到快速视图栏

> ID：11186435
> 
> 赞同：20
> 
> 时间：2012-06-25T09:13:44.627
> 
> 标签：eclipse, eclipse-juno

版本：Eclipse 4.2 代号：Juno

我在 Eclipse 4.2 中看不到快速视图栏。我无法右键单击视图并启用快速视图。General -> Perspectives 下的快速查看选项什么也不做。

快速查看功能是否被删除或者我错过了什么？

我查看了[http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Ftasks%2Ftasks-9b.htm](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Ftasks%2Ftasks-9b.htm)，但这也没有帮助.

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-25T11:18:30.553

单个快速视图栏已被最小化的堆栈取代。现在您只需将视图拖到一个堆栈中，然后将其最小化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T13:56:34.357

我创建了一个请求以恢复原始行为（来自平台 3.x）：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=385105](https://bugs.eclipse.org/bugs/show_bug.cgi?id=385105)

如果您同样感兴趣，请为它投票。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T19:13:19.463

在 eclipse 文档中正确搜索快速视图栏的文档有点棘手。在`General -> Perspective`区域中将单选按钮设置为快速查看并启用隐藏空的快速查看栏。打开导航器后，最小化导航器现在重新打开导航器并单击 esc 它应该可以工作..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T14:05:32.467

如果您错过了先前位于快速视图中的视图？

使用“快速访问”搜索字段来查找视图。（位于透视图左侧的顶栏：Java、Debug 等）

要查看全部，请单击空格键。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-16T14:25:19.733

只需打开一个新窗口：主菜单 | 窗口 | 新窗户

新窗口的透视切换栏将恢复，您可以关闭原始窗口。

# c - 想要从 IPC 中的消息队列接收动态长度数据？

> ID：11186437
> 
> 赞同：1
> 
> 时间：2012-06-25T09:13:52.667
> 
> 标签：c, ipc, message-queue

在这里，我必须使用 SysV 消息队列发送和接收动态数据。

所以在结构文件中我有动态内存分配`char *`，因为它的大小可能会有所不同。

那么我怎样才能在接收方接收这种类型的消息。

请让我知道如何使用消息队列发送动态长度的数据。

我遇到了问题，我在下面发布了我的代码。

**发送.c**

```
/*filename   : send.c
 *To compile : gcc send.c -o send
 */
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <string.h>
#include <sys/types.h>
#include <sys/ipc.h>
#include <sys/msg.h>

struct my_msgbuf {
    long mtype;
    char *mtext;
};

int main(void)
{
    struct my_msgbuf buf;
    int msqid;
    key_t key;
    static int count = 0;
    char temp[5];
    int run = 1;
    if ((key = ftok("send.c", 'B')) == -1) {
        perror("ftok");
        exit(1);
    }

    printf("send.c Key is = %d\n",key);

    if ((msqid = msgget(key, 0644 | IPC_CREAT)) == -1) {
        perror("msgget");
        exit(1);
    }

    printf("Enter lines of text, ^D to quit:\n");

    buf.mtype = 1; /* we don't really care in this case */
    int ret = -1;
    while(run) {
        count++;
        buf.mtext = malloc(50);
        strcpy(buf.mtext,"Hi hello test message here");
        snprintf(temp, sizeof (temp), "%d",count);
        strcat(buf.mtext,temp);
        int len = strlen(buf.mtext);
        /* ditch newline at end, if it exists */
        if (buf.mtext[len-1] == '\n') buf.mtext[len-1] = '\0';
        if (msgsnd(msqid, &buf, len+1, IPC_NOWAIT) == -1) /* +1 for '\0' */
        perror("msgsnd");
        if(count == 100)
            run = 0;
        usleep(1000000);
    }

    if (msgctl(msqid, IPC_RMID, NULL) == -1) {
        perror("msgctl");
        exit(1);
    }

    return 0;
} 
```

**接收.c**

```
/* filename   : receive.c
 * To compile : gcc receive.c -o receive
 */
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <sys/types.h>
#include <sys/ipc.h>
#include <sys/msg.h>

struct my_msgbuf {
    long mtype;
    char *mtext;
};

int main(void)
{
    struct my_msgbuf buf;
    int msqid;
    key_t key;

    if ((key = ftok("send.c", 'B')) == -1) {  /* same key as send.c */
        perror("ftok");
        exit(1);
    }

    if ((msqid = msgget(key, 0644)) == -1) { /* connect to the queue */
        perror("msgget");
        exit(1);
    }

    printf("test: ready to receive messages, captain.\n");

    for(;;) { /* receive never quits! */
        buf.mtext = malloc(50);
        if (msgrcv(msqid, &buf, 50, 0, 0) == -1) {
            perror("msgrcv");
            exit(1);
        }
        printf("test: \"%s\"\n", buf.mtext);
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T09:20:37.493

解决您的问题的几种方法是：

1.  使消息固定长度。
2.  发送包含消息长度的固定长度“标头”。
3.  发送终止符，因为您似乎发送的字符串包括终止符`'\0'`。

**编辑：**如何使用`msgsnd`和`msgrcv`：

您对结构的使用`msgsnd`是错误的，因为该函数期望整个消息是一个连续的内存区域。诸如此类的示例使用其中包含普通字段的结构，或者像[这样（](http://publib.boulder.ibm.com/infocenter/iseries/v5r3/topic/apis/ipcmsgsn.htm)[在](http://pubs.opengroup.org/onlinepubs/009695399/functions/msgsnd.html)底部）使用固定长度的字符串数组。

您也可以发送结构大小为动态的动态数据。这里的技巧是使用一个小的固定大小的结构，并分配比需要更多的数据。

让我们重写部分示例发件人代码：

```
struct my_msgbuf {
    long   mtype;     /* Message type, must be > 0 */
    char   mtext[1];  /* Some compilers allow `char mtext[0]` */
};

/* ... */

int count = 0;
while (count < 100) {
    count++;

    /* Put string in a temporary place */
    char tmp[64];
    snprintf(tmp, sizeof(tmp), "Hi hello test message here %d", count);

    /* +1 for the terminating '\0' */
    size_t msgsz = strlen(tmp) + 1;

    /* Allocate structure, and memory for the string, in one go */
    struct my_msgbuf *buf = malloc(sizeof(struct my_msgbuf) + msgsz);

    /* Set up the message structure */
    buf->mtype = 1;
    memcpy(buf->mtext, tmp, msgsz);

    /* And send the message */
    msgsnd(msgid, buf, msgsz, IPC_NOWAIT);

    /* Remember to free the allocated memory */
    free(buf);
} 
```

上面的代码处理动态字符串的发送，只要少于 63 个字符（临时字符串的大小减一）。

不幸的是`msgrcv`，它并不真正支持接收动态大小的数据。这可以通过不使用`MSG_NOERROR`标志来帮助，检查错误`E2BIG`，然后使用`realloc`来获得更大的消息缓冲区。

像这样接收的东西：

```
/* Should start with larger allocation, using small just for example */
size_t msgsz = 8;
struct my_msgbuf *buf = NULL;

for (;;) {
    /* Allocate if `buf`  is NULL, otherwise reallocate */
    buf = realloc(buf, msgsz);

    /* Receive message */
    ssize_t rsz = msgrcv(msgid, buf, msgsz, 1, 0);

    if (rsz == -1) {
        if (errno == E2BIG)
            msgsz += 8;  /* Increase size to reallocate and try again */
        else {
            perror("msgrcv");
            break;
        }
    } else {
        /* Can use `buf->mtext` as a string, as it already is zero-terminated */
        printf("Received message of length %d bytes: \"%s\""\n", rsz, buf->mtext);
        break;
    }
}

if (buf != NULL)
    free(buf); 
```

上面的接收代码只接收一条消息。如果您希望它与发送大量消息的发送者匹配，则将接收代码放在一个函数中，并在循环中调用它。

**免责声明：**此代码直接在浏览器中编写，仅阅读手册页。我还没有测试过。

# jquery - ZendX jQuery Autocomplete 在框架中不起作用

> ID：11186440
> 
> 赞同：0
> 
> 时间：2012-06-25T09:14:04.923
> 
> 标签：jquery, zend-framework, autocomplete, zendx

*   我添加了 ZendX 库。
*   在控制器中添加了助手：

> ```
> public function init()
> {
>     $this->view->addHelperPath(
>         'ZendX/JQuery/View/Helper'
>         ,'ZendX_JQuery_View_Helper');
> } 
> ```

*   为查看页面创建了一个表单：

> ```
> public function indexAction()
> {
>     // Filter form 
>     $this->view->autocompleteElement = new ZendX_JQuery_Form_Element_AutoComplete('txtLocation');
>     $this->view->autocompleteElement->setAttrib('placeholder', 'Search Location');
>     $this->view->autocompleteElement->setJQueryParam('data', array('Manila', 'Pasay', 'Mandaluyong', 'Pasig', 'Marikina','Makati'));
> } 
> ```

*   在视图页面中加载 jQuery 和表单。

> ```
> <?php echo $this->jQuery(); ?> 
> <form>
>     <?php echo $this->autocompleteElement; ?>
> </form> 
> ```

该表单在视图页面中可见。但是自动完成功能不起作用。我什至在源页面中都没有看到任何 jQuery 脚本。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:25:20.277

我刚刚在这里找到了解决方案：[http ://forums.zend.com/viewtopic.php?f=69&t=1889](http://forums.zend.com/viewtopic.php?f=69&t=1889)

添加**echo $this->jQuery();** 在我的视图文件的末尾而不是在顶部解决了这个问题。我不知道有什么区别。Zend 的布局生成器可能存在问题。

# windows - 如何：从内核模式调用 exe 并取回布尔结果

> ID：11186441
> 
> 赞同：0
> 
> 时间：2012-06-25T09:14:10.887
> 
> 标签：windows, ipc, driver

我想**从内核模式驱动程序调用一个带有 2 个参数的 exe，并在驱动程序中取回布尔值（0 或 1）结果**。可能吗 ？它的任何 API。

# php - 显示多张图片 Codeigniter

> ID：11186443
> 
> 赞同：0
> 
> 时间：2012-06-25T09:14:16.537
> 
> 标签：php, codeigniter, imagettftext

我想使用创建多个图像`imagettftext`并将其显示在视图文件中。我用过这段代码： http: [//php.net/manual/en/function.imagettftext.php](http://php.net/manual/en/function.imagettftext.php)。

当我将上述代码放在我的控制器中时，它可以完美运行，但是想知道如何在视图文件中渲染多个图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:08:24.247

我认为使用 ci 图像处理库而不是使用核心 php 函数进行图像处理会更好。这里的文档[http://codeigniter.com/user_guide/libraries/image_lib.html](http://codeigniter.com/user_guide/libraries/image_lib.html)

# crystal-reports - 如何为每个id计算总和

> ID：11186444
> 
> 赞同：0
> 
> 时间：2012-06-25T09:14:22.030
> 
> 标签：crystal-reports

使用水晶报表 7

我想查看表1和表2的总和

表格1

```
id name

001 raja
002 vijay
003 suresh
.... 
```

表2

```
id value

001 100
001 200
001 150
002 200
003 150
003 200
... 
```

我想显示 table1 中的所有行和 table2 中的 sum(values)。如何在水晶报表中做到这一点

预期产出

```
id name value

001 raja 450
002 vijay 200
003 suresh 350
................
           1000 (sum of value) 
```

注意：我将表字段直接添加到报表中，我没有在报表中添加存储过程或视图或查询。

这该怎么做。

需要水晶报表帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T09:59:53.243

试试这个它会为你工作

1）在您的水晶报告中添加一个组，即按名称

![在此处输入图像描述](../Images/ae136fcb78778e00eee54ca59688effa.png)

2) 添加运行总计

![在此处输入图像描述](../Images/010dcb2fb38332ef18c75bad06ecf137.png)

![在此处输入图像描述](../Images/049c1018207dab45a9fb9e9a480b25b6.png)

3）您的报告将如下

![在此处输入图像描述](../Images/57b9b21e032fb697dd5f6f8bc5c4038e.png)

4）你的输出将是

![在此处输入图像描述](../Images/80e5292dcd21c446bebca821cb63fd7f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T22:03:04.153

在 ID 上加入表 1 和表 2。
将字段 ID、名称和值添加到您的报告中。
根据 ID 对报表进行分组，并在 VALUE 上将汇总字段 (SU​​M) 插入到组标题中。
将名称添加到组标题。
在值上添加总计（报表页脚）。
隐藏或抑制细节带。

这将为您提供您想要的相同结果，但无需运行总计和重置。

# email - PHP Mail 函数用于通过表单发送未经请求的电子邮件

> ID：11186446
> 
> 赞同：0
> 
> 时间：2012-06-25T09:14:30.460
> 
> 标签：email, validation, email-validation, php

最近我们发现有人从我们的服务器发送了未经请求的电子邮件。这导致服务器被列入黑名单。我认为这是黑客使用的表单没有正确转义数据，**或者它也可能是其他东西？**

我们有许多网站都有自己的“联系我们”类型的表格。我正在检查所有表格并确保帖子数据被转义。我发现一个表单将 POST 数据添加到消息中而没有先验证它。我刚刚在发送电子邮件之前添加了一张支票。您认为以下内容是否足够，或者**在通过 filter_var 运行电子邮件帖子值之前将其转义是更好的做法？**

```
 if(filter_var($_POST['email'], FILTER_VALIDATE_EMAIL))
    {
        $message = $email." says hello";
        $headers = "From: me@example.com";
        mail('to@example.com', 'Subject', $message, $headers);          
    } 
```

我是否应该检查传输日志以查找标头注入攻击/其他攻击，如果是，我会寻找什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:29:54.123

您可以做的最好的事情是检查您的日志以查看谁在发送这些电子邮件，因为您可能不会检查所有用户的脚本。此外，过滤/转义/编码您自己的表单输入（尽管您绝对应该这样做）没有任何意义，因为您的任何用户都可以使用您的 smtp 服务器。

以下是跟踪邮件日志的方法：

```
tail -f /var/mail/exim_mainlog
tail -f /var/log/exim_mainlog
tail -f /var/log/exim_paniclog
tail -f /var/log/exim_rejectlog 
```

# api - Script Tag error

> ID：11186458
> 
> 赞同：1
> 
> 时间：2012-06-25T09:15:05.000
> 
> 标签：api, shopify

I have read about [http://api.shopify.com/scripttag.html](http://api.shopify.com/scripttag.html) documentation and when i'm try to inject javascript into my shopify apps store using script_tag, i found error message "[API] You do not have script_tags write permissions". How to fix the problem?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T18:01:10.617

If you are using [OAuth2 Authentication](http://api.shopify.com/authentication.html), then you need the write_script_tags scope. The [list of scopes](http://api.shopify.com/authentication.html#scopes) is on the Authentication page in the api documentation.

If you are using the [Legacy Authentication](http://api.shopify.com/legacy_authentication.html), then you need to have an app with write access, as scotchi mentions.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T10:52:15.750

Apps are either read-write or read-only. It sounds like you have a read-only application and read-only apps are unable to create script tags. You'll need to either create a new app that is read-write (i.e. if you're still just doing development) or contact the Shopify folks about potentially switching the app to read-write.

# android - Android Instrumentation 测试：ListView 内容未加载

> ID：11186461
> 
> 赞同：0
> 
> 时间：2012-06-25T09:15:07.190
> 
> 标签：android, listview, testing, junit, android-cursorloader

我正在尝试为我的 android 项目编写测试类，但在填充列表视图时遇到了一些问题。

我的活动使用 Intents 提供的值对应用程序数据库执行请求：

```
 final String[] projection = {
             ...
            };

    final String[] selectionArgs={
            String.valueOf(intent_param_1),
            String.valueOf(intent_param_2)
    };
    final String selection = //.... ;

    vAdapter = new CustomCursorAdapter(this, R.layout.da_row, null, from, to,0);

    mListView = new LoaderUtils(vAdapter, projection, selection, selectionArgs, this, uri, null).populateListView(mListView); 
```

LoaderUtils 类实现了LoaderCallbacks，populateListView 方法使用了一个CursorLoader 将DB 数据加载到适配器，并绑定到我的ListView。运行我的应用程序时它工作正常，但是当我尝试实现测试用例时，我遇到了一些问题。

```
@Override
  protected void setUp() throws Exception {
    super.setUp();

    Intent i = new Intent();
    i.putExtra("intent_param_1", 1);
    i.putExtra("intent_param_2", 1);
    setActivityIntent(i);

    mActivity = getActivity();
    listeActivites = (ListView)mActivity.findViewById(R.id.listview);
    adapter = (CustomCursorAdapter) listeActivites.getAdapter();
  }

public void testInit(){
    Cursor c = adapter.getCursor();
            //...
    } 
```

当我执行我的 testInit 时，适配器返回的光标是空的，而当我使用模拟器“真正”运行我的应用程序时它不是。

问题可能是我的 Intent 初始化错误，或者测试用例不允许使用 Cursor Loaders？因此，如果有人能指出我做错了什么，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T03:08:29.947

原因是 CursorLoader 还没有完成。如果您添加一秒钟的睡眠（不是正确的方式），它将起作用。

我目前也在寻找如何最好地使用 CursorLoaders 测试活动。由于我不想添加睡眠代码......必须有更好的方法。

目前正在考虑添加一个我可以在测试中等待的监听器......

# c - 运行简单的 shell 程序时出现分段错误

> ID：11186462
> 
> 赞同：-1
> 
> 时间：2012-06-25T09:15:28.170
> 
> 标签：c, segmentation-fault

我正在尝试使用 C 语言制作一个简单的 shell 程序，该程序具有重定向标准输入和标准输出以及制作管道的选项，但它给了我一个分段错误错误。也许问题出在 getline 但我不确定。这是代码：

```
#include <stdio.h>
#include <string.h>
#include <unistd.h>
#include <sys/wait.h>
#include <stdlib.h>
#include <fcntl.h>
#include <sys/stat.h>

#define R 0
#define W 1
#define LINE_LEN 25

struct Job {
    char* command;
    char** argv;
    int stdin;
    int stdout;
} typedef Job;

int tokens_number = 0;
int sign_place = 0;
int contain_left = 0;
int contain_right = 0;
int contain_line = 0;

char** parse_cmdline (char * cmdline ){
    char** arg = calloc(15, sizeof(char*));
    char temp_cmd[LINE_LEN*10];
    strcpy(temp_cmd, cmdline);
    char * tmp;

    tmp = strtok(temp_cmd, " ");
    while(tmp != NULL) {
        arg[tokens_number] = (char*) malloc(LINE_LEN * sizeof(char*));
        strcpy(arg[tokens_number],tmp);
        tmp = strtok(NULL, " ");
        tokens_number++;
    }

    //LAST ELEMENT IS NULL
    arg[tokens_number+1] = NULL;
    return arg;
}

void check_for_special_signs(char** argv){
    int i;
    for(i=0; i<tokens_number; i++){
        if(strcmp(argv[i], "<") == 0){
            contain_left = 1;
            sign_place = i;
            return;
        }else if(strcmp(argv[i], ">") == 0){
            contain_right = 1;
            sign_place = i;
            return;
        }else if(strcmp(argv[i], "|") == 0){
            contain_line = 1;
            sign_place = i;
            return;
        }
    }
}

void fork_child(Job* my_job) {
    pid_t pid = fork();
    if (pid == 0) {
        execv(my_job -> command, my_job -> argv);
        perror(my_job -> command);
    } else if (pid > 0) {
        int status;
        wait(&status);
    } else
        perror("fork");
}

char** create_argv(char** argv){
    int i;
    int j = 0;
    char** argvs = calloc(sign_place,sizeof(char*));
    if(sign_place!=0){
        for(i=0; i < sign_place ; i++){
            argvs[i] = (char*) malloc(sizeof(char*));
            strcpy(argvs[i],argv[i]);
        }
        return argvs;
    }else{
        return argv;
    }   
}

void close_job(Job* my_job) {
    if (my_job -> stdin != STDIN_FILENO)
        close(my_job -> stdin);
    if (my_job -> stdout != STDOUT_FILENO)
        close(my_job -> stdout);
    free(my_job);
}

int main() {
    size_t s = 512;
    char* buffer = malloc(s * sizeof(char));
        char** sep_cmd = malloc(s * sizeof(char));

    while (getline(&buffer, &s, stdin) != EOF) {
        Job* my_job;
        int my_pipe[2];
        int in = 0;
        int out = 1;

                sep_cmd = parse_cmdline(buffer);

        my_job->command = sep_cmd[0];

        my_job->argv = sep_cmd;
        my_job->stdin = in;
        my_job->stdout = out;

        check_for_special_signs(my_job->argv);

        pid_t pid = fork();

        if (pid == 0) {
            if(contain_left == 1){
                in = open(my_job->argv[sign_place + 1], O_RDONLY);
                if(in < 0){
                    perror("open()");
                }

                my_job->argv = create_argv(my_job->argv);
                my_job->stdin = in;
            }else if(contain_right == 1){
                out = open(my_job->argv[sign_place + 1], O_WRONLY | O_CREAT,
                        S_IRUSR | S_IWUSR | S_IRGRP | S_IROTH);
                if (out < 0)
                    perror("open()");

                my_job->argv = create_argv(my_job->argv);
                my_job->stdout = out;
            }else if(contain_line == 1){
                pipe(my_pipe);
                if (my_job -> stdin == my_pipe[R])
                    close(my_pipe[W]);
                else
                    close(my_pipe[R]);
            }
            execv(my_job -> command, my_job -> argv);
            perror(my_job -> command);
        } else if (pid > 0) {
            int status;
            wait(&status);
        } else{
            perror("fork");
        }
        close_job(my_job);
        free(buffer);
        buffer = (char*) malloc(s * sizeof(char));

    }
    free(buffer);
    return 0;
} 
```

这样我就看不到代码中是否还有更多错误。如果您看到更多错误，请也列出它们。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T13:02:24.380

`my_job`您忘记在 main 函数中分配内存

# c - 是否可以混合多个声明/初始化？

> ID：11186464
> 
> 赞同：1
> 
> 时间：2012-06-25T09:15:33.260
> 
> 标签：c, initialization, declaration

我只使用 C99，昨天，我听说在 ANSI C 中混合多个声明和初始化是不可能的。因此，像这样的代码：

```
unsigned x = 42, y = 21;
double e = 3.14; 
```

将是，使用 gcc'`-pedantic`标志：

```
unsigned x, y;
double e;

x = 42, y = 21;
e = 3.14; 
```

我很惊讶，因为我在 C89 草案中没有找到任何相关信息，而且这样的代码可以正常工作......

```
unsigned x = 42, y = 21;
double e = 3.14; 
```

对不起，这似乎是一个微不足道的问题，但我做了一些研究，并没有告诉我这个规则......是真的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T09:22:56.850

初始化是声明的一部分，因此您可以在 C89/C99 的声明中进行初始化：

```
/* Valid in C89 and C99\. There are no statement, only declarations */
unsigned x = 42, y = 21;
double e = 3.14; 
```

你不能做的是在 C89 中混合声明和声明：

```
/* Not valid in C89, valid in C99: mixing declarations and statements */
unsigned x, y;
x = 42, y = 21;

double e;
e = 3.14; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T09:24:59.663

实际上，我正在使用您的第一个带有`-pedantic`标志的语法，它运行良好，没有任何警告。据我所知，你不能像这样混合你的代码：

```
int i;
i = 2;
int j;
j = 2; 
```

这是因为，在 C 语义中，每个程序都是一个块，一个块是一对[声明，命令]。但声明也包括变量的初始化。

每次您打开一个新块时，例如使用一段时间或一个 if，您将拥有第二个块，并且您可以再次拥有一个声明部分和一个命令部分。

# c# - 如何在 HtmlAgilityPack 中替换/添加根元素？

> ID：11186465
> 
> 赞同：2
> 
> 时间：2012-06-25T09:15:37.420
> 
> 标签：c#, html, html-agility-pack

假设我有以下 HTML 代码：

```
<p>Hello, bla-bla-bla</p>
<a href="somesite">Click here</a> 
```

如您所见，它没有 html/body 标签。我想要做的是在文档顶部添加 html 和 body 标签。

我尝试使用以下代码添加 html 标记：

```
 var el = doc.CreateElement("html");
 var nodes = doc.DocumentNode.ChildNodes;
 doc.DocumentNode.RemoveAllChildren();
 el.AppendChildren(nodes);    
 doc.DocumentNode.AppendChild(el); 
```

但在那之后，一个电话`doc.DocumentNode.WriteContentTo()`返回`<html></html>`。如果我更改最后几行的执行顺序：

```
var el = doc.CreateElement("html");
var nodes = doc.DocumentNode.ChildNodes;
doc.DocumentNode.RemoveAllChildren();
doc.DocumentNode.AppendChild(el); 
el.AppendChildren(nodes); 
```

我得到`System.StackOverflowException`了`doc.DocumentNode.WriteContentTo()`.

可能的解决方案可能是这样的：

```
doc.LoadHtml("<html>" + doc.DocumentNode.WriteContentTo() + "</html>") 
```

但由于完整的文档重新解析，它将无效。

你有什么想法，如何以高效的方式解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T13:47:55.480

最后，我让它工作了。第一个示例不起作用，因为`doc.DocumentNode.ChildNodes`返回的不是 的副本`HtmlNodeCollection`，而是节点集合本身。这导致集合中的所有节点在添加到`el`. 下面的代码可以解决问题：

```
var el = doc.CreateElement("html");
var nodes = doc.DocumentNode.ChildNodes;
el.AppendChildren(nodes);    
doc.DocumentNode.RemoveAllChildren();
doc.DocumentNode.AppendChild(el); 
```

# c# - 可以使用策略模式来应用程序保存日志

> ID：11186467
> 
> 赞同：1
> 
> 时间：2012-06-25T09:15:48.027
> 
> 标签：c#, asp.net

我的问题是我想应用策略模式来保存日志

![在此处输入图像描述](../Images/da2f7e992b15b5d8488697ea25453227.png)

从上图

我将使用替换我的班级来形象化

上下文 = 日志类策略 = ILog

具体策略A = CreateSituation

具体策略B = NameSituation

具体策略C = StatusSituation

[来自图像的附加]

具体策略D = PriceSituation

具体策略E = DiscountSituation

在 ILog 中有这些方法 SaveLog(Log log);

每个具体的StrategyA、B、C、D、E 实现 ILog

公共类 CreateSituation : ILog

{

```
public void SaveLog(Log log)

{

    using(var context = new ProductContext())

    {

      log.Message = "This product is created";

      context.productLog.InsertonSubmit(log);

      context.submitChange();

    }

} 
```

}

公共类 NameSituation : ILog

{

```
public void SaveLog(Log log)

{

    using(var context = new ProductContext())

    {

      log.Message = "this produce has updated name from \"oldProduct\" to \"newProduct\"";

      context.productLog.InsertonSubmit(log);

      context.submitChange();

    }

} 
```

}

公共类StatusSituation：ILog

{

```
public void SaveLog(Log log)

{

    using(var context = new ProductContext())

    {

      log.Message = "this produce has updated status from \"In stock\" to \"Sold Out\"";

      context.productLog.InsertonSubmit(log);

      context.submitChange();

    }

} 
```

}

公共课 PriceSituation : ILog

{

```
public void SaveLog(Log log)

{

    using(var context = new ProductContext())

    {

      log.Message = "this produce has updated price from $10 to $150";

      context.productLog.InsertonSubmit(log);

      context.submitChange();

    }

} 
```

}

公共类 DiscountSituation : Ilog

{

```
public void SaveLog(Log log)

{

    using(var context = new ProductContext())

    {

      log.Message = "this product has updated discount price from $0 to $20";

      context.productLog.InsertonSubmit(log);

      context.submitChange();

    }

} 
```

}

未来可以有比现在更多的情况

我展示的这些课程是解决这些问题的好方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:29:39.100

是的，这是一个可以使用策略模式的场景。

但是，对我来说，在每个日志记录场景中使用完全不同的记录器实例似乎有点太多了。但在不了解您的架构的情况下，这只是我个人的直觉。

作为一种替代方法，我可以想象实现一个工厂来*组装适当的日志消息，*具体取决于日志记录情况。

**[编辑]**

此外，我建议使用一些框架，如[log4net](http://logging.apache.org/log4net/download.html)，使日志记录变得非常简单和直观。例如，log4net 可以区分多个日志记录级别，例如`WARN, INFO, DEBUG, ERROR,`或`FATAL`允许您微调输出。

# html - 禁用 Gmaps 拖动，启用页面滑动？

> ID：11186468
> 
> 赞同：1
> 
> 时间：2012-06-25T09:15:48.637
> 
> 标签：html, css, google-maps, drag, swipe

我已禁用拖动我的 Google 地图组件，这是一个示例：http: [//jsfiddle.net/qr2BJ/7053/](http://jsfiddle.net/qr2BJ/7053/)

但是，当我在 iPhone 上浏览时，我无法“在”地图上向下滑动。因此，当地图占据大部分屏幕时，移动用户将无法向下滑动（滚动）以查看页面的其余部分。

除了在谷歌地图上贴一个额外的空 div 之外，有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T15:55:51.023

我在安卓设备上遇到了同样的问题。由于它们在 webkit 上运行，我猜原因与 iphone 相同。无论如何，以下链接上的帖子解决了这个问题，第一个答案对我有用：[Embed Google Maps on page without overriding iPhone scroll behavior](https://stackoverflow.com/questions/7534888/embed-google-maps-on-page-without-overriding-iphone-scroll-behavior)

# iphone - 导入框架后类类别上的“Unrecognizer selector sent to class”

> ID：11186471
> 
> 赞同：0
> 
> 时间：2012-06-25T09:15:53.333
> 
> 标签：iphone, objective-c, linker, categories, unrecognized-selector

将 MessageUI.framework 添加到我的 Xcode (4.3.2) iOS 项目后，我得到：

**由于未捕获的异常'NSInvalidArgumentException'而终止应用程序，原因：'+ [Message responseArrayKey]：**无法识别的选择器发送到类..**

对于我的课程扩展之一。

消息类只是 NSManagedObject 子类，我有 NSManagedObject(Synchronize) 类别：

```
 //
    //  Message.h
    #import <Foundation/Foundation.h>
    #import <CoreData/CoreData.h>

    #import "NSManagedObject+Synchronize.h"
    @class Message;

       @interface Message : NSManagedObject {
        @private
            }
        ...
    @end
    //
    //  NSManagedObject+Synchronize.h

    @interface NSManagedObject (Synchronize)
    +(NSString *)responseArrayKey;
    @end 
```

需要明确的是：代码之前工作过，我将链接器标志设置为：-Obj-C 和 -all_load。（关注：http: [//developer.apple.com/library/mac/#qa/qa1490/_index.html](http://developer.apple.com/library/mac/#qa/qa1490/_index.html)）

你不知何故 - 这个框架打破了链接。这个框架有什么特别之处？我正在使用更多框架，但没有一个是导致问题的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T08:37:52.910

我已通过将我的 Message 类重构为 CDMesage 来修复该问题。看起来与 MessageUI 框架有类名冲突。

# axapta - 之后如何更改 Dialog.AddFieldValue 的值？

> ID：11186473
> 
> 赞同：2
> 
> 时间：2012-06-25T09:16:03.840
> 
> 标签：axapta, dynamics-ax-2009

在 Axapta 中，我可以在对话框中添加一个字段：

Dialog.AddFieldValue

但是，之后是否可以更改该值？也许，当一个新事件被触发时？我找不到该字段的“名称”！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:14:57.773

使用的返回值`Dialog.addFieldValue`：

```
fld = dialog.addFieldValue(typeId(Counter), 117); 
```

稍后您可以：

```
fld.value(118); 
```

# spring - 从不同目录中不同 xml 文件中定义的其他 bean 读取 1 个 bean

> ID：11186479
> 
> 赞同：0
> 
> 时间：2012-06-25T09:16:40.223
> 
> 标签：spring, jakarta-ee, persistence

我们如何从不同目录中不同 xml 文件中定义的其他 bean 中读取一个。例如，如果有一个 bean 定义在

src\main\resources\serviceconfig\org\project\core_spring\file1.xml

需要引用 src\main\java\org\project\core\commons\persistence_spring\file2.xml 中定义的另一个 bean

有什么方法可以引用它或者将file2.xml的资源导入file1.xml？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:13:35.543

指定整个相对类路径，如

```
<import resource="\org\project\core\commons\persistence_spring\file2.xml" /> 
```

为我解决了这个问题。

虽然还没有尝试过Chao给出的答案。如果那个有效，那就太好了，因为每次我需要引用它时输入相对路径并导入一些资源可能会非常麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:45:10.617

您可以使用`<context-param>`web.xml 中的标记在您的应用程序中包含多个 bean 定义文件。您可以在类路径或 Web 文件夹中引用这两个上下文。并且您将能够使用这些文件中定义的 bean，就好像它们是在一个文件中定义的一样。

例如：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        classpath:/com/your-company/file1.xml
        /WEB-INF/file2.xml
    </param-value>
</context-param> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T09:22:09.500

您可以导入`file2.xml`到`file1.xml`. 使用

```
 <import resource="classpath:file2.xml" /> 
```

导入后，您可以使用中定义的`file2.xml`bean `file1.xml`。

# routing - kohana 3.2 电子商务路由示例.com/categoryname/productname/

> ID：11186482
> 
> 赞同：1
> 
> 时间：2012-06-25T09:16:49.243
> 
> 标签：routing, e-commerce, kohana, kohana-3.2

我正在 kohana 3.2 上开发我的电子商务。我需要设置路由才能使用这样的链接：

第一的：

example.com/categoryname/ - 这显示给定类别的所有产品。最好有分页，比如example.com/categoryname/1，example.com/categoryname/2等...

第二：

example.com/categoryname/productname - 这显示了选择的产品。

categoryname 和 productname 当然是字母数字。类别列表是动态的，所以我不能制作与类别一样多的控制器。我想省略 index.php 中的 hack 和主要的引导程序更改，以便能够轻松地将代码迁移到 ko3.3 和更高版本（如果有的话）。

我正在阅读有关 lambda 回调函数的信息，也许这就是解决方案。

无论如何，如果这是不可能的，也许路由：example.com/shop/categoryname/productname, example.com/shop/categoryname/1 是可能的。

谢谢你的帮助。开发者1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:23:44.773

这取决于其余的路线。如果这是仅有的两条路线，那么很容易做到：

```
Route::set('categories', "<category_name>(/<page>)", array('page' => "\d+")
->defaults(array(
    'controller' => "category",
    'page'       => 0   
);

Route::set('product', "<category_name>/<product_name>")
->defaults(
    array(
        'controller' => "product"
    )
); 
```

这只是一个例子。例如，您可以将两者路由到同一个控制器但不同的操作。这仅取决于您想要它的方式。

但是这种设置并不容易在根级别添加额外的路由。

希望这可以帮助。

# ajax - 多站点模板中的 Wordpress Ajax

> ID：11186483
> 
> 赞同：-1
> 
> 时间：2012-06-25T09:16:54.740
> 
> 标签：ajax, wordpress

我正在尝试在我的一个 wordpress 模板中使用 ajax。在我的functions.php中，我添加了以下代码。

```
function wp_ajax_nopriv_my_special_ajax_call()
{

    // generate the response
    $response = json_encode( array( 'success' => true ) );

    // response output
    header( "Content-Type: application/json" );
    echo $response;
    exit;
}
add_action('wp_ajax_nopriv_my_special_ajax_call', 'my_special_ajax_call'); 
```

在我的模板中，我称之为

```
jQuery('#category_id').change(function(){
    jQuery.get('/my_wordpress_folder/wp-admin/admin-ajax.php',    {action:'my_special_ajax_call'},function(response,status){ alert(response);alert(status);
    jQuery('select#subcategory_id').html(result);
    }); 
```

});

但我得到 -1 作为回应。

该站点是多站点wordpress。

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:58:44.427

您需要将函数名称从更改`wp_ajax_nopriv_my_special_ajax_call`为`my_special_ajax_call`

添加操作中的回调必须是执行 ajax 的函数的名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T19:19:04.570

它返回 -1 因为您以错误的方式调用它。将函数名称更改为“my_special_ajax_call”

# datagrid - 在运行时在 dojo 中加载数据网格

> ID：11186485
> 
> 赞同：1
> 
> 时间：2012-06-25T09:17:10.430
> 
> 标签：datagrid, dojo, runtime, treegrid

我正在使用 dojo 框架在 JavaScript 中构建一个 Web 应用程序。我想在运行时创建新选项卡（我有一个 TabPane 并添加 ContentPanes）并想在该窗格中创建数据网格。（特别是 LazyTreeGrids，但它们扩展了数据网格类，所以它应该是相同的）

当我这样做时，我得到了几个错误：

```
ReferenceError
../dojo-release-1.7.2-src/dojo/_base/Deferred.js:216
Error parsing in _ContentSetter#Setter_dijit_layout_ContentPane_0_0 
ReferenceError
../dojo-release-1.7.2-src/dijit/layout/ContentPane.js:543
Error undefined running custom onLoad code: This deferred has already been resolved 
```

当我在没有数据网格的情况下运行 TabPane 时，或者如果我在没有 TabPane 的情况下运行数据网格（并且在页面加载时），它工作得很好。你有什么想法可以解决我的问题吗？

相关代码：

```
 dojo.ready(function(){
    var tabPanel = new dijit.layout.TabContainer({
        style: "height: 100%; width: 100%;"
    }, "mainWindow");

    //console.error("tset");
    var console = new contentPane.console("test");  

    var cp1 = new dojox.layout.ContentPane({
         title: "HomeScreen",
         content: ""
    });

    tabPanel.addChild(cp1);

    var cp2 = new dojox.layout.ContentPane({
         title: "+",
        content: ""
    });
    tabPanel.addChild(cp2);

    tabPanel.startup();

    require(["dojo/dom-attr"], function(domAttr){
        domAttr.set(cp1, "content", console.getContent() );
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:19:46.750

您必须确保在启动网格之前加载窗格。请注意，您可以将网格作为 TabContainer 的直接子级。tabContainer.addChild(myGrid);

# android - 从 web 服务 IOException 获取数据

> ID：11186486
> 
> 赞同：0
> 
> 时间：2012-06-25T09:17:21.630
> 
> 标签：android

`下一个代码应该将来自baseurl（web服务）的数据解析到textView **问题：** **它给出IOException..我确定来自webservice但程序仍然给出错误任何帮助从webservice获取数据？**

```
public class NewParsActivity extends Activity {
    /** Called when the activity is first created. */
    static final String baseUrl="http://www.androidpeople.com/wp-content/uploads/2010/06/example.xml";

    TextView tv;
    EditText ed,ed2;
    Button b;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        tv=(TextView)findViewById(R.id.text);
        ed=(EditText)findViewById(R.id.edt);
        b=(Button) findViewById(R.id.button1);
        ed2=(EditText) findViewById(R.id.editText1);

        try{

    SAXParserFactory spf=SAXParserFactory.newInstance();
    SAXParser sp=spf.newSAXParser();
    XMLReader xr=sp.getXMLReader();
    URL link=new URL(baseUrl);
    handlXml doingWork=new handlXml();
    xr.setContentHandler(doingWork);
    xr.parse(new InputSource(link.openStream()));
    String information=doingWork.getInformation();
    tv.setText(information);
        }catch(Exception e){
         tv.setText("Error");
        }

//
public class handlXml  extends DefaultHandler {
   One  item=new One();

   public String getInformation(){
       return item.DataToString();

   }
    @Override

    public void startElement(String uri, String localName, String qName,
                Attributes attributes) throws SAXException {
            // TODO Auto-generated method stub
            if(localName.equals("website")){
                String uniN=attributes.getValue("category");
                item.setName(uniN);
            }
        }

    }

//
<i>
public class One {

    String UName;
    public void setName(String n){
    UName=n;    
    }

public String DataToString()
{
    return "In"+UName;
}
}
<i> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:20:42.147

与 API 相同的示例对我来说工作正常。

**XMLParsingExample.java**

```
public class XMLParsingExample extends Activity {

    /** Create Object For SiteList Class */
    SitesList sitesList = null;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        /** Create a new layout to display the view */
        LinearLayout layout = new LinearLayout(this);
        layout.setOrientation(1);

        /** Create a new textview array to display the results */
        TextView name[];
        TextView website[];
        TextView category[];

        try {

            /** Handling XML */
            SAXParserFactory spf = SAXParserFactory.newInstance();
            SAXParser sp = spf.newSAXParser();
            XMLReader xr = sp.getXMLReader();

            /** Send URL to parse XML Tags */
            URL sourceUrl = new URL(
                    "http://www.androidpeople.com/wp-content/uploads/2010/06/example.xml");

            /** Create handler to handle XML Tags ( extends DefaultHandler ) */
            MyXMLHandler myXMLHandler = new MyXMLHandler();
            xr.setContentHandler(myXMLHandler);
            xr.parse(new InputSource(sourceUrl.openStream()));

        } catch (Exception e) {
            System.out.println("XML Pasing Excpetion = " + e);
        }

        /** Get result from MyXMLHandler SitlesList Object */
        sitesList = MyXMLHandler.sitesList;

        /** Assign textview array lenght by arraylist size */
        name = new TextView[sitesList.getName().size()];
        website = new TextView[sitesList.getName().size()];
        category = new TextView[sitesList.getName().size()];

        /** Set the result text in textview and add it to layout */
        for (int i = 0; i < sitesList.getName().size(); i++) {
            name[i] = new TextView(this);
            name[i].setText("Name = "+sitesList.getName().get(i));
            website[i] = new TextView(this);
            website[i].setText("Website = "+sitesList.getWebsite().get(i));
            category[i] = new TextView(this);
            category[i].setText("Website Category = "+sitesList.getCategory().get(i));

            layout.addView(name[i]);
            layout.addView(website[i]);
            layout.addView(category[i]);
        }

        /** Set the layout view to display */
        setContentView(layout);

    }
} 
```

[XMLParsing 示例项目](http://www.ziddu.com/download/19759053/XMLParsing.zip.html)

这是我的输出窗口 -

![输出](../Images/44bb76108007878b996d55c204f14dc2.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T09:25:27.753

看看这个教程有一个很好的指南关于 android 中的 xml 解析。我希望这能解决你的查询

在这里我把tutrial内容

说我们需要解析这个xml文件 [http://api.androidhive.info/pizza/?format=xml](http://api.androidhive.info/pizza/?format=xml)

这是一个解析这个xml的类

```
public class AndroidXMLParsingActivity extends ListActivity {

// All static variables
static final String URL = "http://api.androidhive.info/pizza/?format=xml";
// XML node keys
static final String KEY_ITEM = "item"; // parent node
static final String KEY_ID = "id";
static final String KEY_NAME = "name";
static final String KEY_COST = "cost";
static final String KEY_DESC = "description";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_ITEM);
    // looping through all item nodes <item>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_ID, parser.getValue(e, KEY_ID));
        map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
        map.put(KEY_COST, "Rs." + parser.getValue(e, KEY_COST));
        map.put(KEY_DESC, parser.getValue(e, KEY_DESC));

        // adding HashList to ArrayList
        menuItems.add(map);
    }

    // Adding menuItems to ListView
    ListAdapter adapter = new SimpleAdapter(this, menuItems,
            R.layout.list_item,
            new String[] { KEY_NAME, KEY_DESC, KEY_COST }, new int[] {
                    R.id.name, R.id.desciption, R.id.cost });

    setListAdapter(adapter);

    // selecting single ListView item
    ListView lv = getListView();
            // listening to single listitem click
    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
            String cost = ((TextView) view.findViewById(R.id.cost)).getText().toString();
            String description = ((TextView) view.findViewById(R.id.desciption)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
            in.putExtra(KEY_NAME, name);
            in.putExtra(KEY_COST, cost);
            in.putExtra(KEY_DESC, description);
            startActivity(in);

        }
    });
} 
```

}

可以从此链接找到有关此内容的完整指南

[http://www.androidhive.info/2011/11/android-xml-parsing-tutorial/](http://www.androidhive.info/2011/11/android-xml-parsing-tutorial/)

# java - 如何解决： IllegalStateException: Config is null，请确保您的 init(config) 方法调用 super.init(config)

> ID：11186487
> 
> 赞同：0
> 
> 时间：2012-06-25T09:17:22.963
> 
> 标签：java, exception, liferay, portlet, liferay-6

我正在开发一个 MVCPortlet。我的view.jsp 中有一个链接，它调用liferay 的portlet 类中的一个方法。

```
<portlet:actionURL var="listComplexURL" name="listComplex"/>    
<a href="<%=listComplexURL%>">Comlex</a>
This is the <b>Refahi</b> portlet. 
```

这是portlet类中对应的方法：

```
public void listComplex(ActionRequest actionRequest, ActionResponse actionResponse)
    throws SQLException, ClassNotFoundException
{
    RFH_Complex rfh_complex = new RFH_Complex();
    ArrayList<Complex> complexList = rfh_complex.getComplexList();
    actionRequest.setAttribute("complexList", complexList);
    actionResponse.setRenderParameter("jspPage", "/complex.jsp");
} 
```

我部署 portlet 并单击链接，但出现以下错误：

> java.lang.IllegalStateException: Config 为空，请确保您的 init(config) > 方法调用 super.init(config)

即使我实现了 init() 方法并在其中调用 super.init() ，我仍然会收到此错误。

这是我的 getComplexList() 方法：

```
public ArrayList<Complex> getComplexList() throws ClassNotFoundException, SQLException
{
    ArrayList<Complex> complexList = new ArrayList<Complex>();
    ResultSet rs = dbOperation.executeQuery("SELECT * FROM rfh_complex");
    while(rs.next())
    {
        Complex complex = new Complex(rs.getInt("PKComplexID"), rs.getString("ComplexName"), 
                rs.getString("ComplexCity"), rs.getInt("IsActive"));
        complexList.add(complex);
    }
    return complexList;
} 
```

Complex.jsp 包含这行代码：

```
ArrayList<Complex> complexList = (ArrayList)actionRequest.getAttribute("complexList"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:53:43.427

您的 listComplex 方法签名是错误的。它应该只抛出 IOException 和 PortletException。您应该在方法体或其他地方处理 SQLException 和 ClassNotFoundException（我尝试让我的控制器从不抛出 SQLException）。在您的情况下，无需覆盖 init 方法。

# asp.net - 如何从 SQL 查询中过滤具有唯一 ID 的旧条目

> ID：11186489
> 
> 赞同：0
> 
> 时间：2012-06-25T09:17:44.410
> 
> 标签：asp.net, mysql, sql, database

我有一张桌子和一个关系

我可能有 10 个提交，但是当我查询数据库时，我只想获取具有唯一 CaseId 的那些，而要返回的应该是具有最新日期的那个。是否可以（并且建议）在单个查询中执行此操作，还是应该在我获取数据的 asp.nets 代码中进行过滤？

编辑：新图像

![在此处输入图像描述](../Images/0c7009312c136766d05123f249f51a83.png) ![在此处输入图像描述](../Images/0425d52b8901499deb4e2884bf1b8ff1.png)

在这里您可以看到我显示了许多具有相同案例 id 的项目，我只想显示最新的一个（基于日期）

这是我当前的 sql 查询

```
SELECT Submission.Id, Date, center.Name as CenterName, center.Id as CenterId, subject.Name as SubjectName, subject.Id as SubjectId, EmployeeName, Reason, Description, Explanation, Done, ChiefLevel, Action, CaseId 
                    FROM Submission, subject, center
                    WHERE center.Id=CenterId AND subject.Id=SubjectId
                    ORDER BY Date DESC; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T09:36:37.487

```
SELECT caseid 
FROM 
( 
SELECT caseid, max(date) AS max_date 
FROM submission 
GROUP BY caseid 
) a 
JOIN subject t ON a.subjectid=t.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:49:58.933

我的 QUERY 最终变成了这个

```
SELECT s.Id, s.Date, c.Name as CenterName, c.Id as CenterId, su.Name as SubjectName, su.Id as SubjectId, s.EmployeeName, s.Reason, s.Description, s.Explanation, s.Done, s.ChiefLevel, s.Action, s.CaseId
                    FROM submission as s
                      INNER JOIN 
                      ( 
                        SELECT CaseId, MAX(Date) AS MaxDateTime 
                          FROM submission 
                        GROUP BY CaseId 
                      ) as groupeds 
                      ON  s.CaseId = groupeds.CaseId 
                      AND s.`Date` = groupeds.MaxDateTime 
                      INNER JOIN
                      (
                        SELECT Id, Name 
                          FROM subject
                      ) as su 
                      ON su.Id=SubjectId
                      INNER JOIN 
                      (
                        SELECT Id, Name 
                          FROM center
                      ) as c 
                      ON c.Id=CenterId; 
```

# iphone - 触摸事件未从子视图内部触发

> ID：11186490
> 
> 赞同：1
> 
> 时间：2012-06-25T09:17:48.560
> 
> 标签：iphone, objective-c, uiview, event-handling, uiimageview

我在尝试通过 UIView 将触摸事件传递到其附加的子视图时遇到了麻烦。

我有许多图像我想做各种各样的事情，所以我有兴趣阅读它们上的触摸事件。在我决定将它们分组到 UIView 之前它工作得很好，所以我猜我需要打开或关闭一些设置以让事件通过。

```
[TouchImageView.h] -------------------------------------------------------

@interface TouchImageView : UIImageView

[TouchImageView.m] -------------------------------------------------------

- (id)initWithFrame:(CGRect)aRect {
    if (self = [super initWithFrame:aRect]) {
        // We set it here directly for convenience
        // As by default for a UIImageView it is set to NO
        self.userInteractionEnabled = YES;
        state = 0 ;
        rect = aRect ;
    }
    return self;
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    // Do what you want here
    NSLog(@"touchesBegan!" );
}

[in my delegate's didFinishLaunchingWithOptions] -------------------------

NSArray *myImages = [NSArray arrayWithObjects:
                     [UIImage imageNamed:@"front-photos.jpg"],
                     [UIImage imageNamed:@"front-films.jpg"],
                     [UIImage imageNamed:@"front-presentations.jpg"],

mainMenuView = [[UIView alloc] init ] ;
mainMenuView.userInteractionEnabled = YES;    // tried setting this to both YES and NO. Same result.
[self.viewController.view addSubview:mainMenuView] ;

myImage = [[TouchImageView alloc] initWithFrame:CGRectMake(0.0f, menuTopHeight, menuButtonWidth, menuButtonHeight)];
[myImage setImage:[myImages objectAtIndex:0]] ;
[mainMenuView addSubview:myImage] ; 
```

有人可以告诉我我做错了什么吗？我在这里看到了很多关于这个主题的类似帖子，但其中大部分是关于设置 userInteractionEnabled(?)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:58:26.250

事实证明，我需要为 UIView 定义一个框架。所以我改变了

```
mainMenuView = [[UIView alloc] init] ; 
```

进入这个：

```
mainMenuView = [[UIView alloc] initWithFrame:[UIScreen mainScreen] bounds] ; 
```

它再次起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T09:21:51.613

首先`mainMenuView.userInteractionEnabled = NO;`应该`YES` 也是默认设置`UIImageView`为`userInteractionEnabled`NO，所以你必须将它设置为YES

在这条线之后

```
[mainMenuView addSubview:myImage] ;
//add
myImage.userInteractionEnabled = YES; 
```

# sql - CodeIgniter - 分组 where 子句

> ID：11186491
> 
> 赞同：2
> 
> 时间：2012-06-25T09:17:50.637
> 
> 标签：sql, codeigniter, activerecord, where-clause

我对 CodeIgniter 有以下查询：

```
$q = $this->db->where('(message_from="'.$user_id.'" AND message_to="'.$this->auth_model->userdata['user_id'].'")')
            ->or_where('(message_from="'.$this->auth_model->userdata['user_id'].'" AND message_to="'.$user_id.'")')
            ->get('messages'); 
```

我想用完全活跃的记录编写这个查询。

我尝试过这样的事情：

```
$from_where = array('message_from'=>$user_id, 'message_to'=>$this->auth_model->userdata['user_id']);
            $to_where   = array('message_from'=>$this->auth_model->userdata['user_id'],'message_to'=>$user_id);    
            $q = $this->db->where($from_where)
            ->or_where($to_where)
            ->get('messages');

            die($this->db->last_query()); 
```

上面的代码产生了这个查询：

```
SELECT * FROM (`messages`) WHERE `message_from` = '2' AND `message_to` = '1' OR `message_from` = '1' OR `message_to` = '2' 
```

但这就是我想要制作的：

```
SELECT * FROM (`messages`) WHERE (message_from="2" AND message_to="1") OR (message_from="1" AND message_to="2") 
```

[这里](https://stackoverflow.com/questions/6470267/grouping-where-clauses-in-codeigniter)和[这里](https://stackoverflow.com/questions/8748140/codeigniter-active-record-where-or-grouping)也有类似的问题，但这些问题并没有为我提供真正的解决方案。

这怎么可能，如果不是通过核心库，是否有允许编写此类查询的扩展？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:41:14.617

为此，您可以使用 codeigniter 的子查询方式来执行此操作，您将不得不破解 codeigniter。像这样转到 system/database/DB_active_rec.php 从这些函数中删除 public 或 protected 关键字

```
public function _compile_select($select_override = FALSE)
public function _reset_select() 
```

现在子查询写入可用现在这是您的带有活动记录的查询

```
$this->db->where('message_from','2');
$this->db->where('message_to','1');

$subQuery1 = $this->db->_compile_select();
$this->db->_reset_select();

$this->db->where('message_from','1');
$this->db->where('message_to','2');

$subQuery2 = $this->db->_compile_select();
$this->db->_reset_select();

$this->db->select('*');
$this->db->where("$subQuery1");
$this->db->or_where("$subQuery2");
$this->db->get('messages'); 
```

看看我的这个回答。这显示了如何使用子查询。这将有助于
[在 codeigniter 中使用 Mysql WHERE IN 子句](https://stackoverflow.com/questions/11023318/using-mysql-where-in-clause-in-codeigniter/11031431#11031431)

编辑

是的，我已经做到了以您想要的方式重写查询

```
$this->db->where('message_from','2');
$this->db->where('message_to','1');

$subQuery1 = $this->db->_compile_select(TRUE);
$this->db->_reset_select();

$this->db->where('message_from','1');
$this->db->where('message_to','2');

$subQuery2 = $this->db->_compile_select(TRUE);
$this->db->_reset_select();

$this->db->select('*');
$this->db->where("($subQuery1)");
$this->db->or_where("($subQuery2)");
$this->db->get('messages'); 
```

编译选择带有 true 参数。不会产生 select 子句。这将产生

```
SELECT * FROM (`messages`) WHERE (`message_from` = '2' AND `message_to` = '1') OR (`message_from` = '1' AND `message_to` = '2') 
```

# c# - C#：是具有继承的泛型类型的运算符

> ID：11186493
> 
> 赞同：4
> 
> 时间：2012-06-25T09:18:12.123
> 
> 标签：c#, generics, operators

我对比较泛型类型的 is 运算符有疑问。

```
 public interface ISomeInterface<T> where T : SomeBaseClass{
 }

 public class SomeClass : SomeBaseClass{
 } 
```

现在我们想用 is 运算符检查类型。我们有一个实现接口 ISomeInterface 的类的实例。

不幸的是，我们面临以下问题：

```
 // someObject is an Instance of a class implementing interface ISomeInterface<SomeClass>
 bool isSomeBaseClass = someObject is ISomeInterface<SomeBaseClass>; // false
 bool isSomeClass = someObject is ISomeInterface<SomeClass>; // true 
```

是否可以检查变量泛型类型？

在此先感谢，托比

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-25T09:21:15.400

这称为泛型协方差，在 C# 4.0 中受支持。您可以使用关键字标记泛型`T`参数`out`：

```
public interface ISomeInterface<out T> where T : SomeBaseClass 
```

不过，这有一个限制。该`T`参数只能作为接口中方法的返回类型出现。

Eric Lippert 有[一系列关于这个主题的博客文章](http://blogs.msdn.com/b/ericlippert/archive/tags/covariance+and+contravariance/default.aspx)，我邀请您阅读。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-25T09:23:10.697

`in`是的，您可以使用and`out`关键字来利用协变和逆变：

```
public interface ISomeInterface<in T> where T : SomeBaseClass{

} 
```

或者：

```
public interface ISomeInterface<out T> where T : SomeBaseClass{

} 
```

但请记住，使用关键字`in`可以使用*T*作为参数，否则`out`可以使用*T*作为返回类型。

**协方差：**

当您可以从 转换为 时，类型是协变`X<S>`的`X<B>`。

**逆变：**

当您可以从 转换为 时，类型是逆变`X<B>`的`X<S>`。

*- 其中 S 是子类，B 是基类。*

* * *

我在阅读 C# 4.0 的书时学到的一个有趣的例子是关于堆栈的。

```
class Stack<T>{
   int i;
   T[] array = new T[1000];
   public void Push(T element){
       array[i++] = element;
   }
}

class BaseClass{
}

class SubClass : BaseClass{
} 
```

事实上，它解释了在这种情况下可以使用逆变，当 Stack 实现这个接口时：

```
interface IPushable<in T>{
    void Push(T element);
} 
```

然后：

```
IPushable<BaseClass> stackB = new Stack<BaseClass>();
IPushable<SubClass> stackS = stackB;
stackS.Push(new SubClass()); 
```

而协方差在这种情况下，当 Stack 实现以下接口时：

```
interface IPoppable<in T>{
    T Pop();
} 
```

那么：

```
IPoppable<SubClass> stackS = new Stack<SubClass>();
IPoppable<BaseClass> stackB = stackB;
BaseClass baseClass = stackB.Pop(); 
```

**这真的很有帮助，因为它允许向上转换和向下转换而没有任何问题和编译时错误。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T09:23:11.050

不确定我是否正确理解了您的问题，但您可能需要在[Check if a class is derived from a generic class](https://stackoverflow.com/questions/457676/check-if-a-class-is-derived-from-a-generic-class)中回答类似问题：

```
public static bool IsSubclassOfRawGeneric(Type generic, Type toCheck)
{
   while (toCheck != null && toCheck != typeof(object))
   {
      var cur = toCheck.IsGenericType ? toCheck.GetGenericTypeDefinition() : toCheck;
      if (generic == cur)
            return true;
      toCheck = toCheck.BaseType;
   }
   return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-28T07:06:34.207

答案从您的第二个问题开始，因为它似乎显示了您要实现的目标：

**`IList<string>`问：但是，如果我想对is的对象求真，我该如何检查呢`IList<object>`？**

您的推理似乎是，由于字符串继承自对象，因此您需要一个条件模式来检查一般情况下的情况。

```
IList<string> stringList = new List<string>();  
IList<object> objectList = new List<object>();

stringList is IList<string>;
//> true
stringList is IList<object>;
//> false
objectList is IList<string>;
//> false
objectList is IList<object>;
//>true
"someString" is object
//> true 
```

因此，您只需检查 Generic-Type 构造的类型：

以及分别对`IsGenericType`or进行的布尔检查。`IsGenericConstructedType`

```
objectList.GetType().GenericTypeArguments[0] is object
//> true
stringList.GetType().GenericTypeArguments[0] is object
//> true 
```

警告：检查空案例；如果在语言方面受支持，则使用 null 合并和/或 null 条件运算符等...为了简洁明了，示例中没有

* * *

**问：是否可以检查变量（继承的）泛型类型？**

除了 Darin 和 fuex 的答案之外，还有更多的指针：

*   您可以使用 IEquality 实现`Type`进行严格的类型检查：

    ```
    bool condition = (someObject != null 
                      && someObject.GetType().Equals(typeof(ISomeInterface<SomeClass>)) ); 
    ```

*   您检查明确检查接口：

    ```
    var interfaces = someType.GetType().GetInterfaces(); 
    //DotNet4.5: var interfaces = someType.GetType()
    //               .GetTypeInfo().ImplementedInterfaces;
    bool condition = (interfaces != null && interfaces.ToList()
                     .Contains(typeof(ISomeInterface<SomeClass>)) == true); 
    ```

您几乎可以使用 Type 和 TypeInfo 构建任何条件检查

# applescript - 在运行 argv 和其他处理程序时

> ID：11186497
> 
> 赞同：1
> 
> 时间：2012-06-25T09:18:39.003
> 
> 标签：applescript

我对 applescript 很陌生，我无法超越从命令行接受参数的地步。我读过我可以这样做：

```
on run argv
    log "SOMETHIG
end run

on readLines(unixPath)
    set targetFile to (open for access (POSIX file unixPath))
    set fileText to (read targetFile for (get eof targetFile) as text)
    set fileLines to every paragraph of fileText

    close access targetFile
    return fileLines
end readLines 
```

问题是它不允许我与定义`on run argv`的其他函数（或处理程序）一起定义，`on`而它允许我定义任意数量的 funciona（除了`on run argv`）。怎么会？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T13:14:39.080

```
on run
    log "Something"
end run 
```

和

```
log "Something" 
```

做同样的事。第一个脚本具有显式运行处理程序，而第二个脚本具有隐式运行处理程序。一个脚本对象只能有一个运行处理程序。

此脚本不起作用，因为您不能在处理程序中拥有处理程序

```
on run 
    log "SOMETHIG"

    on readLines(unixPath)
        set targetFile to (open for access (POSIX file unixPath))
        set fileText to (read targetFile for (get eof targetFile) as text)
        set fileLines to every paragraph of fileText
        close access targetFile
        return fileLines
    end readLines

end run 
```

但是，您可以在“运行时”之外定义一个处理程序并从内部调用它：

```
on run
    log "Something"
    readLines("/Users/pistacchio/Desktop/test.txt")
end run

on readLines(unixPath)
    set targetFile to (open for access (POSIX file unixPath))
    set fileText to (read targetFile for (get eof targetFile) as text)
    set fileLines to every paragraph of fileText

    close access targetFile
    return fileLines
end readLines 
```

或者，您可以简单地使用隐式运行处理程序：

```
log "Something"
readLines("/Users/pistacchio/Desktop/test.txt")

on readLines(unixPath)
    set targetFile to (open for access (POSIX file unixPath))
    set fileText to (read targetFile for (get eof targetFile) as text)
    set fileLines to every paragraph of fileText

    close access targetFile
    return fileLines
end readLines 
```

# jquery - 查询字符串在 ASP.NET MVC 3 中被缩短

> ID：11186500
> 
> 赞同：2
> 
> 时间：2012-06-25T09:19:03.147
> 
> 标签：jquery, asp.net-mvc-3

我有一个页面，其 url 如下所示：`/urlpart1/urlpart2?firstid=3`。

在那个页面上，我有一个下拉列表，它将附加到 url 所选项目的值。这是用 jQuery 完成的。

```
function categorieClicked()
{
  var categorieId = $("#Dropdownlist").val();
  window.location.href = '/urlpart1/urlpart2?firstid=@Model.FirstId' + '&categoryid=' + categorieId;
} 
```

页面重定向，我有类别值，但问题是 url 看起来像以前一样：

```
/urlpart1/urlpart2?firstid=3 
```

代替

```
/urlpart1/urlpart2?firstid=3&categoryid=5 
```

为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:23:55.687

问题是我的页面上有两个提交按钮。

# eclipse - 普通日食上的语言编辑器/生成器

> ID：11186501
> 
> 赞同：0
> 
> 时间：2012-06-25T09:19:11.163
> 
> 标签：eclipse, xtext

我已经使用 Xtext 和 Xtend 创建了我的 DSL 语言和代码生成器。但是当我想使用它时，我需要打开我的 Xtext 项目并单击“Run as-> Launch Runtime Eclipse”。是否可以让我的编辑器/生成器在正常的 Eclipse 中运行？换句话说，我想下载普通的 eclipse 安装，而不是安装一些插件或以某种方式配置我的 eclipse，而不是创建我的语言的文件，具有语法着色和所有编辑器功能，代码生成等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:10:16.207

您必须导出插件并将它们安装到 eclipse 中。

选项 1：用于`File>Export...>Deployable plugins and fragments`导出插件，然后将它们安装到 Eclipse 中。该向导可以选择将它们直接部署到正在运行的 eclipse 中。

选项 2：使用[PDE build](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.pde.doc.user/tasks/pde_feature_build.htm)或[maven/tycho](http://www.eclipse.org/tycho/documentation.php)构建您的插件并创建一个 p2 更新站点。然后您可以将它们安装到您拥有的任何 Eclipse 中。

如果您创建包含插件的功能，这两个选项都更易于管理。它更容易导出，也更容易安装该功能。

# c - C 中的 64 位哈希/摘要

> ID：11186502
> 
> 赞同：3
> 
> 时间：2012-06-25T09:19:11.540
> 
> 标签：c, encryption, hash, openssl

我试图找出 C 中是否有任何用于计算 64 位哈希的 API。我发现有些人使用 MD5/SHA1 等的前 64 位。这是一个好方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T12:20:52.027

您可以尝试[将 SipHash](http://131002.net/siphash/siphash.pdf)作为 MAC 的形式（不过这需要密钥管理）。它特别适合短输入消息并针对加密强度。AC[实施](https://github.com/emboss/siphash-c)也是可用的。

但是，如果您真的很在意有人主动弄乱您的文件，那么您不应该将自己限制为 64 位安全性。如果有足够的时间和资源，今天即使是蛮力也可以破解 64 位。为此，您应该使用 SHA-256 或更高版本。或者让我反过来说，将损坏的选项列入黑名单：不要使用 MD5（或 MD-anything）。仅当由于某种原因不能使用 SHA-256 时才使用 SHA-1。

使用散列还有一个优点，即您不需要管理任何密钥（与使用 MAC 相反）。您应该将计算的哈希值保存在与您将要监视的文件不同的位置 - 否则篡改您的文件的人也很容易篡改校验和。

### 关于截断哈希是好是坏

从理论上讲，我不明白为什么将 160 位哈希值截断为 64 位是错误的，无论您是采用最高有效位还是最低有效位，还是使用任意模式选择它们。我能想到的为什么不经常这样做的唯一原因是效率 - 如果有更有效的算法来处理较小的问题，为什么还要带大枪。

在下文中，我假设为此目的使用加密安全哈希，通用哈希是一个完全不同的主题 - 据我所知，它们可能会在截断时暴露攻击面。

但是，对于加密安全的哈希，除非算法被破坏，否则我们可以假设它的输出与均匀分布的随机变量的输出没有区别。

如果我们现在截断这个值，我们不会对算法的内部工作提供任何进一步的了解。尽管如此，我们*确实*通过一个简单的事实削弱了安全性，即根据概率法则，暴力破解（无论是碰撞还是寻找原像）现在花费的时间更少。

例如，查找 64 位哈希的冲突平均需要大约 2^32 次尝试 - 生日悖论说。如果您将输出截断为原始 64 位哈希的最低有效 32 位，那么您将在大约 2^16 的时间内发现冲突，因为您只需忽略最高有效 32 位，而事实上的均匀分布会完成其余的工作- 就像您首先开始搜索具有 32 位值的冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T09:20:39.613

这是个坏主意。**散列函数值总是被*视为一个整体*。**

对于“如何计算 64 位哈希”的隐含问题：您的预期用途是什么？请记住，对于加密强度哈希函数来说，64 位太少了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T10:31:35.563

使用 CRC 来防止随机更改。

使用 HMAC 防止攻击者更改您的文件。HMAC 使用生成和验证标签所必需的密钥。HMAC 的结果与底层散列函数一样长（例如，HMAC-SHA1 为 20 个字节），但它经常被截断。即根据 NIST SP 800-107 p.14 64-96 位对于大多数应用程序来说应该足够了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T09:22:26.177

64 位对于散列来说很小，通常，散列应该被视为一个整体。

现在，你需要这些 64 位来做什么？答案将取决于预期的使用情况。

请记住，现在 md5 已经很糟糕了，64 位的安全性非常低。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T11:21:47.690

如果您只需要针对随机更改进行完整性检查，那么其他答案中给出的简单校验和*可能*就足够了。

如果您需要加密强度来确保原始内容，那么 64 位太弱了。更好地使用完整算法的全部价值，即不是 MD5。SHA1 仍然可以，但为了长期安全，最好使用 SHA256。甚至如另一个答案中所述，使用 HMAC 更进一步。

使用加密哈希的截断值没有任何问题。实际上，SHA224/384 是通过使用不同的初始化向量计算一个 SHA256/512 哈希然后截断结果来计算的。但是，这仅对*加密*哈希有效。对于普通的校验和和表哈希来说，这可能是个坏主意。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-25T11:26:39.450

使用 OpenSSL 的 API 进行计算。(www.openssl.org)。

# asp.net-mvc-3 - 部署到 Azure 计算模拟器时缺少静态内容

> ID：11186503
> 
> 赞同：2
> 
> 时间：2012-06-25T09:19:16.467
> 
> 标签：asp.net-mvc-3, azure

基于现有 MVC3 项目创建了一个具有 Web 角色的新云服务项目。当我尝试在**azure 计算模拟器**网站中执行 web 角色时，工作正常，除了任何图像或 css 样式导致页面样式减少。当我尝试通过浏览器上的直接 URL 访问任何这些丢失的资源（例如 css 或图像文件）时，只会收到“内部服务器错误”。

我检查了 cloudService 项目下的 obj 文件夹，尽管存在所有视图和 dll，但当我在计算模拟器中运行项目时，Content 文件夹（css 和图像应该驻留的位置）是空的，但是当我执行时它被填充针对云的部署。

由于之前对论坛的调查，我检查并重新检查了这些文件是否具有“BuildAction=Content”，并且静态内容模块安装在我的本地 IIS 中，但没有得到肯定的结果。

我正在使用 Azure 工具 1.7 和 VS 2010

**更新：** 当尝试在模拟器中启动 Web 角色时（在 VS2010 中按下播放按钮），windows 应用程序事件日志中出现两个似乎与问题有关的警告（两个警告都起源于**IIS Express**）。

这是警告（首先是原始西班牙语版本，后来是个人英文翻译）

"El Directorio especificado para almacenar en caché el contenido comprimido C:\Users\dgarcia\AppData\Local\dftmp\Resources\c122a014-7804-49ec-b59f-c9f23c924050\temp\temp\RoleTemp\iisexpress\IIS 临时压缩文件\d42ecaeb -eabb-4dd2-89b8-aecd01f36ba3 no es válido. La compresión estática se está deshabilitando。”

“为缓存压缩内容指定的目录 [非常长的临时路径] 无效。正在禁用静态压缩。”

（2 秒后发出第二次警告）

“错误 del módulo FailedRequestTracing al crear el Directorio '\?\C:\Users\dgarcia\AppData\Local\dftmp\Resources\c122a014-7804-49ec-b59f-c9f23c924050\directory\DiagnosticStore\FailedReqLogFiles\Web\deployment17(8) .CloudService.BRAINVT.Web_IN_0_Web\'。No se generarán registros hasta que se corrija estuación。El problema se produjo al menos 1 veces en los últimos 5 minutos。El dato es el error。"

“模块 FailedRequestTracing 创建目录时出错 [奇怪的超长路径]。在纠正情况之前不会生成更多日志。在过去 5 分钟内至少发生 1 次问题。数据是错误 (?)。”

**UPDATE2：** 假设 httpCompression 是根本问题，尝试更改此设置的目录属性以指向像 c:\temp 这样的路径，该路径对所有人都具有开放权限（不幸的是，这不能在项目的 web.config 文件中完成，必须完成在 IIS Express 中通过 de **appcmd**命令行工具）只是发现 Azure Compute Emulator 为每个覆盖 IIS express 的全局配置的 WebRole 生成自己的 applicationHost.config 文件，因此覆盖了我更改的设置

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T06:58:04.273

终于解决了。我对解决此类问题的试验/错误方法不满意，我更愿意了解根本原因，但这是导致其起作用的过程：

1.  在我的解决方案中删除并重新创建了云服务项目（不确定这是否有关系）

2.  将我的 MVC 项目（基于 Web 角色的项目）的开发服务器从 IIS Express 更改为内置“Cassini”。这收回了我在模拟器中的静态内容（哇！）

3.  在那之后，我知道我需要 IIS Express 功能来测试我的项目的所有部分，然后改回 IIS Express 并且……天哪！静态内容仍然存在。

这适用于两台不同的机器。如前所述，我最好找到根本原因，但目前一切正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T09:48:28.177

如果文件丢失，您应该收到**File Not Found**错误，而不是**Internal Server Error**。如果您在部署到云时看到包中的文件，这意味着您的 VS 设置应该没问题。

我建议您查看事件日志（应用程序日志）。您可以通过配置诊断或通过远程桌面连接来执行此操作。如果发生了其他事情，您应该在事件日志中看到描述问题的 ASP.NET 警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T11:33:44.670

看起来像本地 IIS 设置问题 - 您能否尝试[http://technet.microsoft.com/en-us/library/cc735199(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc735199(v=ws.10).aspx)上的建议来更改压缩设置并重试。

# pdf - Ghostscript 在从 PDF 中提取页面时丢失字体

> ID：11186504
> 
> 赞同：0
> 
> 时间：2012-06-25T09:19:17.623
> 
> 标签：pdf, ghostscript

我在可用命令行的帮助下将 PDF 拆分为页面：

```
for G in $(seq 1 $(pdfinfo 47.pdf | sed -n 's/Pages:[^0-9]*\([0-9]*\).*/\1/p')) ; do 
   gs \
    -dSAFER \
    -sDEVICE=pdfwrite \
    -dBATCH \
    -dNOPAUSE \
    -dFirstPage=$G \
    -dLastPage=$G \
    -o $G.pdf \
     47.pdf ;
done 
```

但有些页面显示没有文字（图形仍然存在）

因此，我尝试从 PDF 中提取嵌入字体：

```
gs -q -dNODISPLAY extractFonts.ps -c "(47.pdf) extractFonts quit" 
```

这些字体我已经安装在系统字体文件夹中。

之后，我重复拆分，没有发生任何变化。

如何确保正确提取页面，我现在不知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T09:44:02.237

Ghostscript 和 pdfwrite 实际上并不是为了分割 PDF 文件，还有其他工具可能会更好，为什么不试试 pdftk 呢？

如果您真的想使用 Ghostscript，那么我建议您从 Git 存储库中获取最新的前沿代码，在该代码中，pdfwrite 设备将接受包含“%d”的输出文件名并将写入一个文件每页。

除此之外，在我看来，您最有可能只是遇到了一个错误，而不是“丢失字体”，如果字体丢失，文本仍然存在，但字体不同。你用的是哪个版本的GS？

# javascript - 如何以基于字符的编码发布二进制 html 多部分表单数据？

> ID：11186511
> 
> 赞同：8
> 
> 时间：2012-06-25T09:19:47.207
> 
> 标签：javascript, jquery, html, wicket

我有一个网页，允许用户使用多部分/表单数据（即输入类型=“文件”标签）上传文件。但是，这是一个以我的方式有效地阻止二进制表单数据提交的 Web 内容安全过滤器。

是否可以将二进制形式的数据转换为字符数据（例如base64）发送？如果可能的话，这最好由浏览器通过声明性指令自动完成。我认为不是，但我想我会问。

否则，是否可以通过编程来完成，让一些 JavaScript 拦截表单提交并更改随表单数据上传的文件内容？

最好使用基于 wicket 和/或 jquery 的解决方案。

注意：**我不是在问如何在 JavaScript 中进行 base64 编码**。请不要在没有真正理解问题的情况下将其标记为重复，就像投票结束我第一次尝试该问题的五个人一样！[如何将二进制多部分表单数据作为base64发送？](https://stackoverflow.com/questions/11149930/how-to-send-binary-multipart-formdata-as-base64)

问题更多是关于如何在多部分表单提交的上下文中进行任何此类编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T01:48:54.330

好的，经过更多研究后，我将对自己的问题进行回答。

这个关于 SO 的问题间接提供了答案，尽管**问题不一样**。

[是否可以从 javascript 中的 <input type=file> 截取文件？](https://stackoverflow.com/questions/809851/is-it-possible-to-intercept-the-file-from-a-input-type-file-in-javascript)

基本上，似乎没有标准的方式（无论如何在 HTML4 中，看起来可能使用 HTML5）从浏览器访问所选文件的实际内容）

因此，上传的文件在发送到浏览器之前不会发生重新编码。

# php - nl2br() 不会输出换行符，只是 'n'

> ID：11186512
> 
> 赞同：0
> 
> 时间：2012-06-25T09:19:47.530
> 
> 标签：php

这很简单，我的网站上有一个文本区域帖子，如果我输入：

```
line 1
line 2
line 3 
```

进入它，它输出：

```
line 1nline 2nline 3 
```

我的插入代码是：

```
 $status = strip_tags(stripslashes(htmlentities(mysql_real_escape_string($_POST['status']))));
    $uid = strip_tags(stripslashes(htmlentities(mysql_real_escape_string($_POST['uid']))));

    //more stuff

        $sid = rndTxt(16);
        $status = nl2br($status);
        if (!get_magic_quotes_gpc()) {
            $status = addslashes($status);
        }

    $insert = mysql_query("INSERT INTO mingle_status (uid,sid,status,`timestamp`) VALUES ('$uid','$sid','$status',now())") or
    print mysql_error(); 
```

和我的输出代码：

```
while($st = mysql_fetch_assoc($statussql)) {
    $status = stripslashes($st['status']);
    $sid = $st['sid'];
    $td = $st['timestamp'];
?>
<div id="n">
<div id="statuses" class="<?php echo $sid; ?>">
<p><?php echo $status; ?></p>
<div id="statuscomadd" style="background:#E0E0E0;">
<a href="ld.php?uid=<?php $uid; ?>&pid=<?php echo $sid;?>&method=like">Like</a> <a href="ld.php?uid=<?php $uid; ?>&pid=<?php echo $sid;?>&method=dislike">Dislike</a><a href="#" id="time"><?php echo time_since($td) . " ago"; ?></a>
</div>  
</div> 
```

任何帮助将不胜感激！：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T09:24:18.330

您不需要`nl2br()`在插入时使用，您必须在以 html 显示时使用它

并且必须`stripslashes`在插入之前删除

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T09:31:03.620

插入时只需`mysql_real_escape_string()`对值执行 a 即可。您只想更改数据（例如，`htmlentities()`当您要显示它时使用）。

还请考虑停止`mysql_*`对新代码使用函数。它们不再被维护并且社区已经开始了[弃用过程](http://goo.gl/KJveJ)。看到[**红框**](http://goo.gl/GPmFd)了吗？相反，您应该了解[准备好的语句](http://goo.gl/vn8zQ)并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。如果你不能决定，[这篇文章](http://goo.gl/3gqF9)将有助于选择。如果你想学习，[这里有一个很好的 PDO 教程](http://goo.gl/vFWnC)。

另一件事：你真的需要`htmlentities()`吗？因为 imo 更好的解决方案是使用`htmlspecialchars()`. 否则*所有*html 实体都将被替换。

此外，我认为您不需要使用`strip_tags()`，因为您已经在采取`htmlspecialchars()`措施保护您免受 XSS 攻击。

现在对你来说问题是因为你正在使用`stripslashes()`打破`\n`换行符。我想你可以放弃那些`add/stripslashes`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T09:25:19.410

您使用`strip_tags(stripslashes(htmlentities(mysql_real_escape_string())));`which 从`\n`.

只需使用`mysql_real_escape_string()`, 或`htmlentities( ,ENT_QUOTES)`用于 HTML。

此外，如果可能的话，可以使用 UTF-8 编码而`htmlspecialchars()`不是`htmlentities()`. `htmlentities()`转换具有 HTML 表示的每个字符，同时`htmlspecialchars()`仅转换必要的字符。无需转换所有内容。请参阅：[htmlentities 与 htmlspecialchars](https://stackoverflow.com/questions/46483/htmlentities-vs-htmlspecialchars)

# c# - Informix SELECT FIRST 返回更少的行

> ID：11186513
> 
> 赞同：1
> 
> 时间：2012-06-25T09:19:48.230
> 
> 标签：c#, odbc, informix

我正在开发一个导入应用程序，以从 Informix 数据库中检索大约 100 万条记录，并将其批量插入 MSSQL 数据库。查询很简单：`SELECT * FROM <view_name>`. 为了从 Informix 获取数据，我使用 ODBC 读取器，在执行命令后，我将它直接传递给 SQLBulkInsert。

问题就在这里：有时会检索到所有数据。但是，有时读者只能检索到记录 #181 — 发生此问题时，它始终取决于该记录。所以我做了一个`SELECT SKIP 180 FIRST 2 * FROM <view_name>`检查这些记录的数据没有损坏或任何东西，但似乎数据是好的。我还延长了连接超时时间（即使打开连接后这没有直接影响）。这是一个非常烦人的问题，因为它只是偶尔发生，而且总是 #182 记录会停止整个检索过程。

有没有其他人有任何类似的问题？或者有人对可能导致这种情况的原因有任何想法吗？

这是我用来通过 ODBC 检索数据的大纲代码：

```
 OdbcCommand cmd = _conn.CreateCommand();
            cmd.CommandText = //sql statement;
            OdbcDataReader reader = cmd.ExecuteReader();
            return reader; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:58:12.047

在某些情况下可能是这样。尤其是当您从视图中选择以及从加入中选择时，问题可能会发生。原因是：不同的访问路径可能无法保证数据的顺序。强烈建议在没有 where 子句、first、skip 等的情况下对视图（如 select * from）执行非常基本的查询。

# c# - 在 C# 中发送电子邮件

> ID：11186516
> 
> 赞同：-1
> 
> 时间：2012-06-25T09:20:04.533
> 
> 标签：c#, .net, email, smtp, credentials

我想用 c# 发送电子邮件。我实现了所有代码但收到错误......它
指出了 smtp.port=465 上的错误；我也使用代码来指定主机。但我不明白为什么我我收到这种类型的错误？？？？？？

**.aspx 代码**

```
 public void click(object sender, EventArgs sd)
            {

                try
                {

                    System.Net.Mail.MailMessage message = new   
   System.Net.Mail.MailMessage();
                    //smessage.To.Add(TextBox1.Text);
                    message.To.Add(System.Net.Mail.MailAddress(TextBox1.Text));
                    message.Subject = "This is the Subject line";
                    message.From = new System.Net.Mail.MailAddress(TextBox2.Text);
                    message.Body = "This is the message body";
                    System.Net.Mail.SmtpClient smtp = new        
               System.Net.Mail.SmtpClient("yoursmtphost");
                    smtp.Host = "smtp.yahoo.mail.com";
                    smtp.Port = 465;

                    smtp.Send(message);
                }
                catch (Exception gf)
                {

                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:24:57.603

您尚未向服务器提供任何凭据。雅虎怎么知道你是谁？

此外，您已经在构造函数中定义了主机（不是导致错误的原因，但只是想我会指出）`System.Net.Mail.SmtpClient("yoursmtphost");`，然后将其重新定义为`smtp.yahoo.mail.com`

有一篇文章可以帮助您通过 C# 连接到 Yahoo Mail，请点击此处：

[http://www.emailarchitect.net/easeendmail/kb/csharp.aspx?cat=3](http://www.emailarchitect.net/easendmail/kb/csharp.aspx?cat=3)

# c++ - GCC 默认 int 数据成员初始化

> ID：11186524
> 
> 赞同：-1
> 
> 时间：2012-06-25T09:20:35.263
> 
> 标签：c++

下面的代码永远不会打印出计数器，假设编译器做了一些智能的事情来将 int 数据成员类型初始化为零？

```
include <iostream>

using namespace std;

class A {
  public:
    int a;
    int b;

    A(): b(a), a(b) { }
};

int main()
{
    A* p = new A;
    int counter = 0;

    while (!(p->a)) {
        p = new A;
        counter++;
    }

    cout << counter << endl;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T09:26:16.887

> 下面的代码永远不会打印出计数器，假设编译器做了一些智能的事情来将 int 数据成员类型初始化为零？

假设是错误的。未初始化变量的值是不确定的。它可能是一些恰好在内存中的随机数。

将构造函数行更改为：

```
A(): b(0), a(0) { } 
```

这显式地将值初始化为零，并且还清楚地传达了意图。请记住，代码是供人类阅读的。计算机永远不会真正看到您的 C++ 代码。

另请注意，以下是等效的：

```
A(): b(), a() { } 
```

虽然我个人不使用这种初始化方法。

* * *

初始化不是代码的唯一问题。一方面，您的代码中存在大量内存泄漏，因为您没有编辑`delete`的实例。[去选择一本好的 C++ 入门书籍](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)并学习正确的现代 C++，因为您的帖子表明您对语言基础知识并不十分了解。`A``new`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T09:25:20.413

这是未定义的行为。`a`是第一个被初始化的，它被初始化为`b`，这是一个未初始化的变量。如果你想要值初始化（或`0`）：

```
A(): b(), a() { } 
```

注意初始化的顺序是成员在类定义中出现的顺序，而不是在成员初始化列表中。

# jenkins - Monodroid 和 CI 服务器

> ID：11186527
> 
> 赞同：1
> 
> 时间：2012-06-25T09:20:47.643
> 
> 标签：jenkins, xamarin.android

我想通过 Jenkins 自动化我的 Monodroid 应用程序的测试和发布过程。

我发现了一些将 Jenkins 与“普通”Android 项目一起使用的信息：

*   [https://jenkins-ci.org/content/getting-started-building-android-apps-hudson](https://jenkins-ci.org/content/getting-started-building-android-apps-hudson)
*   [http://androiddevresources.com/blog/2012/04/01/building-an-android-app-with-jenkins/](http://androiddevresources.com/blog/2012/04/01/building-an-android-app-with-jenkins/)

有没有人在 Jenkins 上构建 Monodroid 应用程序并运行 nunit 测试的经验？

是否有一些可以修改的脚本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T15:36:42.463

是的，它可以完成，嗯，几乎......实际上有一些可以工作的部分，遗憾的是目前还没有完全自动化。

## 好消息

可以从 Jenkins 中运行 .NET 构建。有一篇关于它的好博文，它逐步解释了您需要做什么。 [http://jenkinsheaven.blogspot.com.au/2011/04/building-build-first-net-build.html](http://jenkinsheaven.blogspot.com.au/2011/04/building-build-first-net-build.html)

由于适用于 Android 的 Mono（至少在 Windows 上）是 MSBuild 的盛宴，您可以简单地安排

```
MSBuild /t:Package /p:Configuration=Release MySolution.sln 
```

指南说您应该输入 MSBuild 命令的地方。这样，您将从构建中获得一个 .apk 文件。

## 坏消息

在这一点上，单元测试部门并没有发生太多事情。有一个用于 Android 的 Mono 的 NUnit Lite 端口，它允许您运行测试。但是我发现的那个不支持自动运行测试......但是。

如果您喜欢冒险并想自己添加对它的支持，可以在此处下载这些位：[https ://github.com/SpiritMachine/NUnitLite.MonoDroid](https://github.com/SpiritMachine/NUnitLite.MonoDroid)

## 专业提示（tm）：

*   确保在构建服务器上激活 Mono for Android 的许可证。没有它，您将创建无法在设备上运行的 APK 文件，因为它们缺少一些重要的代码。

*   将正确的签名属性添加到您的 .csproj 文件中，通常使用调试密钥对包进行签名，但通过覆盖一些 MSBuild 属性，您可以指定属性发布密钥。这里有一个关于如何做到这一点的手册：http: [//docs.xamarin.com/android/tutorials/Preparing_Package_for_Android_Marketplace ?highlight=signing](http://docs.xamarin.com/android/tutorials/Preparing_Package_for_Android_Marketplace?highlight=signing)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T18:23:12.867

看看[这个](https://stackoverflow.com/questions/7046596/mono-for-android-which-testing-frameworks-work/7118199)问题。

特别是，[Calabash](http://calaba.sh/)支持[Android](https://groups.google.com/forum/#!msg/calabash-android/4eVnpLu_1i8/ty3varYRqQIJ)。

我还没有时间仔细研究这个，但目前它看起来像 Jenkins，这是持续构建/部署的最佳选择。

# makefile - 懒惰的 C++ 的 makefile 规则

> ID：11186528
> 
> 赞同：1
> 
> 时间：2012-06-25T09:20:55.477
> 
> 标签：makefile, lazy-c++

我想在我的 makefile 中包含一个规则，用于将我的惰性 c++`.lzz`文件转换为它们各自`.h`的`.cpp`文件。

在我看来，这似乎是一个稍微不寻常的情况，其中两个文件依赖于一个文件，而且我不确定我是否能够正确设置依赖关系。

```
# something like...
%.cpp %.h : %.lzz
    lzz $< 
```

有人有一个很好的规则吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T09:34:09.563

这对我来说是正确的。

从制作信息页面：

> 具有多个目标的规则相当于编写许多规则，每个规则都有一个目标，除此之外都相同。相同的命令适用于所有目标，但它们的效果可能会有所不同，因为您可以使用 `$@' 将实际目标名称替换为命令。该规则也为所有目标提供相同的先决条件。

# python - 在管理员中获取“权限被拒绝”页面，而用户有权限

> ID：11186531
> 
> 赞同：2
> 
> 时间：2012-06-25T09:21:04.830
> 
> 标签：python, django, permissions

我在 Django 中遇到了一些用户权限问题。我为模型添加了一些权限，`Magasin`如下所示：

```
add_magasin=Permission.objects.get(codename="add_magasin")
change_magasin=Permission.objects.get(codename="change_magasin")
delete_magasin=Permission.objects.get(codename="delete_magasin")
user.user_permissions.add(add_magasin)
user.user_permissions.add(change_magasin)
user.user_permissions.add(delete_magasin)
user.save() 
```

~~然后当我检查我得到的权限时：~~

 ~~```
In [100]: user.has_perm(delete_magasin)
Out[100]: False

In [101]: user.has_perm(add_magasin)
Out[101]: False

In [102]: user.has_perm(change_magasin)
Out[102]: False 
```~~  ~~在管理员中，与同一个用户连接，我可以添加一个 Magasin 实例，但不能删除一个（“权限被拒绝”）。我什至无法使用超级用户删除 Magasin 实例。

我正在使用 Django 1.3，并且没有使用任何与外部权限相关的应用程序...

**编辑：sql查询**

```
mysql> select * from django_content_type;
+----+-----------------------+--------------+------------------+
| id | name                  | app_label    | model            |
+----+-----------------------+--------------+------------------+
***more stuff***
|  9 | magasin               | securite_v2  | magasin          |
***more stuff***

mysql> select * from auth_permission;
+----+----------------------------------+-----------------+-------------------------+
| id | name                             | content_type_id | codename                |
+----+----------------------------------+-----------------+-------------------------+
***more stuff***
| 25 | Can add magasin                  |               9 | add_magasin             |
| 26 | Can change magasin               |               9 | change_magasin          |
| 27 | Can delete magasin               |               9 | delete_magasin          |
***more stuff***

mysql> select * from auth_user where id=135;
+-----+---------------+------------+-----------+-------------------------------+-----------------------------------------------------+----------+-----------+--------------+---------------------+---------------------+
| id  | username      | first_name | last_name | email                         | password                                            | is_staff | is_active | is_superuser | last_login          | date_joined         |
+-----+---------------+------------+-----------+-------------------------------+-----------------------------------------------------+----------+-----------+--------------+---------------------+---------------------+
| 135 | admingrandest |            |           | admingrandest@xxx.com | sha1$14f21$02a50f37be16f27aba3f677618b663edfb0ce5a7 |        1 |         1 |            0 | 2012-06-25 11:16:35 | 2012-06-22 16:42:46 |
+-----+---------------+------------+-----------+-------------------------------+-----------------------------------------------------+----------+-----------+--------------+---------------------+---------------------+

mysql> select * from auth_user_user_permissions;
+----+---------+---------------+
| id | user_id | permission_id |
+----+---------+---------------+
|  1 |     135 |            25 |
|  2 |     135 |            26 |
|  3 |     135 |            27 |
***more stuff*** 
```

有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T09:41:15.623

的第一个参数[`User.has_perm()`](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.models.User.has_perm)必须是`<app label>.<permission codename>`格式的字符串。在您的代码中，您将`Permission`实例作为第一个参数传递，该参数被评估为`<app_label> | <content_type> | <name>`，因此`has_perm`将始终返回`False`。

而是使用`user.has_perm("<yourapp>.delete_magasin")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:08:32.243

似乎它与文件权限有关，而不是 Django 用户权限。~~

# ios - 无法将核心数据文件添加到我现有的项目（版本控制问题）...？

> ID：11186534
> 
> 赞同：4
> 
> 时间：2012-06-25T09:21:10.303
> 
> 标签：ios, core-data, version-control

我有 iOS 部署目标 4.0 的应用程序，现在我想添加位于 iOS-Core Data 下的数据模型文件。但是当我尝试将此文件添加到我的项目中时，下面的消息会提醒我...！？！

“无法执行该操作，因为该文件不受版本控制。”

我用测试项目尝试这个，我在其中创建了一个小项目，然后我添加了这个文件，但是没有问题请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:04:01.877

有2种可能：

1.  Xcode 找不到您的项目指向的文件。尝试在 Xcode 中右键单击该文件并选择**在 Finder 中显示**以查看该文件是否存在。如果没有，您需要将该文件复制到您的项目目录中，然后再次将其添加到 Xcode。
2.  您的 git repo 不知道该文件。

如果是 git 问题，请打开终端并

```
cd directoryName/OfYour/File
git add .
git commit -am "Added file." 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T12:32:31.310

你可以从一个包含核心数据的项目模板开始，这样你就有了任何东西。您可以尝试从新项目添加现有模型文件，而不是添加新文件（核心数据模型）。

有时（我使用 svn）在版本控制下添加/删除/替换文件时会感到非常困惑。在那种情况下，即使那个人失去了版本信息，我也会从头开始。我写了一个小工具（Automator），它会删除每个 .svn 目录/子目录，这样你就可以在没有任何版本控制的情况下开始。我你需要我可以提供链接的工具。

# c# - 使用 jQuery 动画 HTML“排名”表

> ID：11186539
> 
> 赞同：-2
> 
> 时间：2012-06-25T09:21:31.590
> 
> 标签：c#, jquery, .net, visual-studio, html-table

我想使用此处找到的 jQuery 插件创建动画 HTML 排名表：[http ://www.scottlogic.co.uk/2011/01/animating-html-ranking-tables-with-javascript/](http://www.scottlogic.co.uk/2011/01/animating-html-ranking-tables-with-javascript/)

我正在使用 Visual Studio 2010。我创建了一个新的 C# 网站，将以下 jQuery 文件保存在“Scripts/”中：

*   动画师.js
*   jquery-1.4.3.js
*   排名表更新.js

我的样式表位于此处：“App_Themes/Main Theme/Styles/Site.css”

我正在使用 Site.master 的母版页。我已将以下代码粘贴到“Default.aspx”中：

```
 <br />
      <table border="1" cellpadding="2" cellspacing="2" width="40%">
        <tr>
        <th>Researcher</th>
        <th>Close Ratio</th>
          </tr>
          <tr>
          <td><strong>John</strong> Doe</td>
          <td><strong>1</strong> in <strong>25</strong> CONV</td>
          </tr>
          <tr>
          <td><strong>John</strong> Zert</td>
          <td><strong>1</strong> in <strong>51</strong> CONV</td>
          </tr>
          <tr>
          <td><strong>Johnny</strong> Halliday</td>
          <td><strong>1</strong> in <strong>37</strong> CONV</td>
          </tr>
          <tr>
          <td><strong>Johnathan</strong> Bell</td>
          <td><strong>1</strong> in <strong>31</strong> CONV</td>
          </table> 
```

我想知道如何将此表连接到 JavaScript 并使其运行。

我需要参考上表中的“更新”和“常量”列吗？如果是，我在哪里可以找到资源来做到这一点？

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:19:57.907

[该页面的使用](http://www.scottlogic.co.uk/2011/01/animating-html-ranking-tables-with-javascript/#usage)部分有一些关于如何使用插件的文档。

查看您的代码，您的 html 似乎存在一些问题。该插件要求您有一个明确`thead`定义的表，这是您的`th`元素应该去的地方。在用法部分有一个预期表结构的示例。

此外，该插件的工作原理是采用两个表格元素，然后使一个动画到另一个 - 目前您只有一个表格，因此没有任何动画。如果您想使用它来显示表格排序的动画，请查看页面[中财务示例的代码](http://www.scottlogic.co.uk/wp-content/uploads/2010/12/financialExample.js)。这通过创建一个表的新副本来工作，当用户单击列标题时，它的行按排序顺序排列，然后将当前表动画化到这个新表。

*顺便说一句，我是这个插件的作者，我实际上并没有维护代码，所以如果由于浏览器更改而无法正常工作，那么我担心你可能需要自己修复它，或者找其他人到！*

# sharepoint-2010 - 顶级网站中的 SharePoint 元数据列

> ID：11186541
> 
> 赞同：0
> 
> 时间：2012-06-25T09:21:40.797
> 
> 标签：sharepoint-2010

在 SharePoint 中，可以在顶级站点中创建一个元数据列，该列可用于子站点的列表和库中。例如，我有一个名为 Projects 的顶级站点，我想在名为 ProjectId 的顶级站点中定义一个元数据列。在创建子站点时，我想为子站点的 ProjectId 元数据分配一个像 1001 这样的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:55:36.277

> 在 SharePoint 中，可以在顶级站点中创建一个元数据列，该列可用于子站点的列表和库中。

是的。在您的顶级网站中创建列，它将在整个网站集中可用。

> 在创建子站点时，我想为子站点的 ProjectId 元数据分配一个像 1001 这样的值。

不太确定你能做到这一点。该子网站没有您在上面定义的网站栏的“自己的”副本。您可以使用文档库上的“基于位置的默认值”之类的功能来“覆盖”默认值。

# iphone - 如何像摇摆一样为标签或uiview设置动画

> ID：11186542
> 
> 赞同：0
> 
> 时间：2012-06-25T09:21:43.127
> 
> 标签：iphone, ipad

如何像摇摆一样为 UIView 或 UILable 设置动画

```
CGPoint newLeftCenter = CGPointMake( 00.0f + label.frame.size.width / 2.0f, label.center.y);
[UIView beginAnimations:nil context:nil]; 
[UIView setAnimationDuration:1.0f];
label.center = newLeftCenter;
[UIView commitAnimations]; 
```

这将从左到右动画！

我也需要从右到左制作动画！

所以当我的动作触发它时 UIVIew 或标签需要从左到右和从右到左移动。

@提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:28:38.647

如果您的意思是要添加两个连续动画，您可以使用以下方法执行以下操作`setAnimationDidStopSelector`

```
- (void) animationDidStop:(NSString *)animationID 
                 finished:(NSNumber *)finished 
                  context:(void *)context
{
    CGPoint newRightCenter = CGPointMake( 00.0f + label.frame.size.width * 2, label.center.y);
    [UIView beginAnimations:nil context:nil]; 
    [UIView setAnimationDuration:1.0f];
    label.center = newRightCenter;
    [UIView commitAnimations];  
}

- (void) doAnimation
{
    CGPoint newLeftCenter = CGPointMake( 00.0f + label.frame.size.width / 2.0f, label.center.y);

    [UIView beginAnimations:nil context:nil]; 
    [UIView setAnimationDuration:1.0f];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector:@selector(animationDidStop:finished:context:)];

    label.center = newLeftCenter;
    [UIView commitAnimations];  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T09:28:25.490

您可以通过将动画自动反转设置为 YES 来做到这一点。

```
[UIView setAnimationRepeatAutoreverses:YES]; 
```

来自苹果文件：

```
If you enable autoreversing, a single animation cycle changes the properties being animated to their new values and then back to their original values. At the end of the animations, the affected views are then updated immediately to reflect the new values. This method does nothing if called from outside of an animation block. By default, autoreversing is disabled.

If you combine autoreversing with a repeat count (settable using the setAnimationRepeatCount: method), you can create animations that shift back and forth between the old and new values the specified number of times. However, remember that the repeat count indicates the number of complete cycles. If you specify an integral value such as 2.0, the animation ends on the old value, which is followed by the view immediately updating itself to show the new value, which might be jarring. If you want the animation to end on the new value (instead of the old value), add 0.5 to the repeat count value. This adds an extra half cycle to the animation.

Use of this method is discouraged in iOS 4.0 and later. Instead, you should use theanimateWithDuration:delay:options:animations:completion: method to specify your animations and the animation options. 
```

# php - 无法读取上传的文件

> ID：11186544
> 
> 赞同：0
> 
> 时间：2012-06-25T09:21:59.937
> 
> 标签：php, excel, filesystems

读取上传的文件时出现问题

```
$fileElementName = 'file_to_import';
$ext = end(explode(".", $_FILES['file_to_import']['name']));
$filename = (rand(1000, 9999) . time()) . "." . $ext;
$save_to = "upload/" . $filename;
$msg .= " File Name: " . $_FILES['file_to_import']['name'] . ",";
$msg .= " File Size: " . @filesize($_FILES['file_to_import']['tmp_name']);
move_uploaded_file($_FILES["file_to_import"]["tmp_name"], $save_to);
@unlink($_FILES['file_to_import']);
require 'Excel_Reader.php';
$data = new Spreadsheet_Excel_Reader($save_to); 
```

这`Excel_Reader.php`是一个使用 Excel 文件的库，但新`Spreadsheet_Excel_Reader($save_to)`文件没有打开文件，它输出以下错误

**文件名 45061340615478.xls 不可读**

# sql - 折叠具有连续时间戳的多行

> ID：11186545
> 
> 赞同：7
> 
> 时间：2012-06-25T09:22:01.897
> 
> 标签：sql, postgresql

我有一张代表产品使用情况的表格，有点像日志。产品使用记录为多个时间戳，我想使用时间范围表示相同的数据。

它看起来像这样（PostgreSQL 9.1）：

```
userid | timestamp          | product
-------------------------------------
001    | 2012-04-23 9:12:05 | foo
001    | 2012-04-23 9:12:07 | foo
001    | 2012-04-23 9:12:09 | foo
001    | 2012-04-23 9:12:11 | barbaz
001    | 2012-04-23 9:12:13 | barbaz
001    | 2012-04-23 9:15:00 | barbaz
001    | 2012-04-23 9:15:01 | barbaz
002    | 2012-04-24 3:41:01 | foo
002    | 2012-04-24 3:41:03 | foo 
```

我想折叠与上一次运行的时间差小于*增量*（例如：*2 seconds*）的行，并获取开始时间和结束时间，如下所示：

```
userid | begin              | end                | product
----------------------------------------------------------
001    | 2012-04-23 9:12:05 | 2012-04-23 9:12:09 | foo
001    | 2012-04-23 9:12:11 | 2012-04-23 9:12:13 | barbaz
001    | 2012-04-23 9:15:00 | 2012-04-23 9:15:01 | barbaz
002    | 2012-04-24 3:41:01 | 2012-04-24 3:41:03 | foo 
```

请注意，如果同一产品的使用时间间隔超过*delta*（在本例中为 2 秒），则连续使用同一产品将分为两行。

```
create table t (userid int, timestamp timestamp, product text);

insert into t (userid, timestamp, product) values 
(001, '2012-04-23 9:12:05', 'foo'),
(001, '2012-04-23 9:12:07', 'foo'),
(001, '2012-04-23 9:12:09', 'foo'),
(001, '2012-04-23 9:12:11', 'barbaz'),
(001, '2012-04-23 9:12:13', 'barbaz'),
(001, '2012-04-23 9:15:00', 'barbaz'),
(001, '2012-04-23 9:15:01', 'barbaz'),
(002, '2012-04-24 3:41:01', 'foo'),
(002, '2012-04-24 3:41:03', 'foo')
; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T15:33:37.043

受此[答案](https://stackoverflow.com/a/10624628/1154462)的启发，由@a_horse_with_no_name 给出了一段时间。

```
WITH groupped_t AS (
SELECT *, sum(grp_id) OVER (ORDER BY userid,product,"timestamp") AS grp_nr
  FROM (SELECT t.*,
          lag("timestamp") OVER
           (PARTITION BY userid,product ORDER BY "timestamp") AS prev_ts,
          CASE WHEN ("timestamp" - lag("timestamp") OVER
            (PARTITION BY userid,product ORDER BY "timestamp")) <= '2s'::interval
          THEN NULL ELSE 1 END AS grp_id
        FROM t) AS g
), periods AS (
SELECT min(gt."timestamp") AS grp_min, max(gt."timestamp") AS grp_max, grp_nr
  FROM groupped_t AS gt
 GROUP BY gt.grp_nr
)
SELECT gt.userid, p.grp_min AS "begin", p.grp_max AS "end", gt.product
  FROM periods p
  JOIN groupped_t gt ON gt.grp_nr = p.grp_nr AND gt."timestamp" = p.grp_min
 ORDER BY gt.userid, p.grp_min; 
```

1.  最里面的查询将根据`userid`,`product`和时间差分配分组 ID。`PARTITION BY`我认为实际上前两个字段应该是安全的。
2.  `groupped_t`给我所有的源列+一个额外的运行组号。我只`ORDER BY`在这里使用了`sum()`窗口功能，因为我需要组 ID 是唯一的。
3.  `periods`只是每个组中第一个和最后一个时间戳的帮助查询。
4.  最后，我加入了`groupped_t`（这就是为什么我需要它是唯一的）和每个组中第一个条目的时间戳。`periods``grp_nr`

您还可以在[SQL Fiddle](http://www.sqlfiddle.com/#!1/551dc/1)上查看此查询。

Note, that `timestamp`, `begin` and `end` are [reserved words in the SQL](http://www.postgresql.org/docs/current/interactive/sql-keywords-appendix.html) (`end` also for PostgreSQL), so you should either avoid or double-quote them.

# ios - 如何切换主视图控制器 ios5？

> ID：11186551
> 
> 赞同：0
> 
> 时间：2012-06-25T09:22:14.913
> 
> 标签：ios, uiview, uiviewcontroller

我想为我的应用程序实施授权。如果授权函数返回是，我想切换我的主视图控制器并将我的第二个视图控制器分配为初始视图控制器。函数返回 yes 后，我不想再看到授权视图。我应该尝试什么？

是否喜欢transitionFromViewController？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:25:56.623

只需加载主视图控制器，如果您需要验证在视图控制器上显示模式视图

```
[self presentModalViewController:myLoginViewController animated:NO]; 
```

或者

```
[self presentViewController:myLogingViewController animated:NO completion:NULL]; 
```

# performance - 在R中的矩阵中查找整数向量索引的最快方法

> ID：11186553
> 
> 赞同：3
> 
> 时间：2012-06-25T09:22:26.623
> 
> 标签：performance, r, vector, comparison, integer

我在 R 中有以下问题（对于马尔可夫链）。假设有一个状态空间矩阵 S，其中包含多行唯一整数向量（状态）。我从这个矩阵中得到一个向量 s，并且想要确定与这个向量对应的行的索引。有几个解决方案：

1.  使用`all.equal`如下的解决方案：

    ```
    which(apply(S,1,function(x){ isTRUE(all.equal(s,x)) }) ) 
    ```

2.  将向量映射到一个唯一的字符串并用这个字符串识别它们：

    ```
    statecodes <- apply(S,1,function(x) paste(x,collapse=" ") ) 
    check.equal <- function(s) {
        z <- which(statecodes == paste(s, collapse=" "))
        return(z)
    }
    check.equal(s) 
    ```

第一个（通常建议的）解决方案非常糟糕。对于长度为 4 的 16,000 个向量的状态空间，它已经需要 2.16 秒。第二种解决方案要快得多，对于相同的状态空间需要 0-0.01 秒。然而，当向量的长度增加时，它变得越来越慢。我觉得我的字符串方法是合理的，但必须有更好的东西。进行此类比较的更快方法是什么？

为了完整起见，我的问题的状态空间可以如下生成。如果向量有 N 个元素，并且 I 表示向量的每个元素可以达到的最大值（例如，10），则它由下式给出：

```
I <- rep(10,N)
S <- as.matrix(expand.grid( lapply(1:N, function(i) { 0:I[i]}) ) ) 
```

如何利用状态的完整性来进行尽可能快的比较？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T10:19:57.927

一种方法是您要查找的向量`which(colSums(abs(t(S)-V))==0)`在哪里。`V`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T15:57:09.107

为每个状态获取整数值的一种简单方法是将值转换为整数，然后将每列乘以正确的基数。

我的版本是`makecheck2`；使用的版本`paste`是`makecheck2`. 我还修改了`paste`要使用的版本，`match`以便它可以同时检查多个值。两个版本现在都返回一个用于获取匹配的函数。

我的版本设置更快；0.065 秒与 1.552 秒。

```
N <- 5
I <- rep(10,N)
S <- as.matrix(expand.grid( lapply(1:N, function(i) { 0:I[i]}) ) )
system.time(f1 <- makecheck1(S))
#   user  system elapsed 
#  1.547   0.000   1.552 
system.time(f2 <- makecheck2(S))
#   user  system elapsed 
#  0.063   0.000   0.065 
```

在这里，我用 1 到 10000 个值进行测试以进行检查。对于较小的值，该`paste`版本更快；对于大值，我的版本更快。

```
> set.seed(5)
> k <- lapply(0:4, function(idx) sample(1:nrow(S), 10^idx))
> s <- lapply(k, function(idx) S[idx,])
> t1 <- sapply(s, function(x) unname(system.time(for(i in 1:100) f1(x))[1]))
> t2 <- sapply(s, function(x) unname(system.time(for(i in 1:100) f2(x))[1]))
> data.frame(n=10^(0:4), time1=t1, time2=t2)
      n time1 time2
1     1 0.761 1.512
2    10 0.772 1.523
3   100 0.857 1.552
4  1000 1.592 1.547
5 10000 9.651 1.848 
```

两个版本的代码如下：

```
makecheck2 <- function(m) {
  codes <- vector("list", length=ncol(m))
  top <- vector("integer", length=ncol(m)+1)
  top[1L] <- 1L
  for(idx in 1:ncol(m)) {
    codes[[idx]] <- unique(m[,idx])
    top[idx+1L] <- top[idx]*length(codes[[idx]])
  }
  getcode <- function(x) {
    out <- 0L
    for(idx in 1:length(codes)) {
      out <- out + top[idx]*match(x[,idx], codes[[idx]])
    }
    out
  }
  key <- getcode(m)
  f <- function(x) {
    if(!is.matrix(x)) {
      x <- matrix(x, ncol=length(codes))
    }
    match(getcode(x), key)
  }
  rm(m) # perhaps there's a better way to remove these from the closure???
  rm(idx)
  f
}

makecheck1 <- function(m) {
  n <- ncol(m)
  statecodes <- apply(m,1,function(x) paste(x,collapse=" ") )
  rm(m)
  function(x) {
    if(!is.matrix(x)) {
      x <- matrix(x, ncol=n)
    }
    x <- apply(x, 1, paste, collapse=" ")
    match(x, statecodes)
  }
} 
```

# android - gps 应用程序的后台进程

> ID：11186555
> 
> 赞同：2
> 
> 时间：2012-06-25T09:22:32.713
> 
> 标签：android, gps, maps

我有一个“跟踪我的位置”按钮，它使用 GPS 并成功跟踪我的位置。但是当我点击后退按钮时，跟踪停止。我希望跟踪在后台进行，即使用户切换到任何其他应用程序

我希望这个功能在后台运行

```
private void centerOnLocation()
{
loc = locman.getLastKnownLocation(provider);
if(loc != null)
{
lat = loc.getLatitude();
    lon = loc.getLongitude();
    templat=lat;
    templon=lon;

    System.out.println("TrackedLat:"+loc);
    System.out.println("temporaryyyyyyyyyyyyyy");
    System.out.println("Templat:"+templat);
    System.out.println("TempLon:"+templon);
    System.out.println("matlat matlon");
    System.out.println("TrackedLon:"+matlat);
    System.out.println("TrackedLon:"+matlon);
Log.i(TAG+"_loc",loc.toString());   
Log.i(TAG, "Lat="+lat+" lon="+lon);
GeoPoint newPoint = new GeoPoint((int)(lat*1e6),(int)(lon*1e6));   
mapControl.animateTo(newPoint);
getSatelliteData();
if(displayOverlay != null){
displayOverlay.putSatStuff(lat, lon, satAccuracy, bearing, altitude,
speed, currentProvider, numberSats);
}

}
  functiontocompare(matlat,matlon,templat,templon);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T09:28:35.357

> 我希望跟踪在后台进行，即使用户切换到任何其他应用程序

那么您需要从后台集成跟踪[服务](http://developer.android.com/guide/components/services.html)，即使用户切换到任何其他应用程序

对于存储用户位置，请使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)或 Sqlite 数据库。

对于 Service 或 Activity 之间的通信，请使用 Custom [BroadcastReciver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)。

[服务和活动之间的通信](http://androidexperinz.wordpress.com/2012/02/14/communication-between-service-and-activity-part-1/)

# google-maps - 在 googlemap 上放置几百个图标非常慢 - 使用 GMap V3

> ID：11186564
> 
> 赞同：1
> 
> 时间：2012-06-25T09:23:00.967
> 
> 标签：google-maps

我遇到了 googlemaps 的问题。我的搜索返回德国的 676 家酒店。但如果我尝试将这些酒店放在 GoogleMap 上。我工作，但图标放置非常慢。如果地图上放置了太多酒店，缩放也有些奇怪。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:13:59.603

解决此问题的方法是仅在需要时创建标记。

看看这个例子和标记管理器的文档。

[http://google-maps-utility-library-v3.googlecode.com/svn/tags/markermanager/1.0/examples/weather_map.html](http://google-maps-utility-library-v3.googlecode.com/svn/tags/markermanager/1.0/examples/weather_map.html)

[http://google-maps-utility-library-v3.googlecode.com/svn/tags/markermanager/1.0/docs/reference.html](http://google-maps-utility-library-v3.googlecode.com/svn/tags/markermanager/1.0/docs/reference.html)

一种解决方案是在放大时创建更多标记，因此不会同时显示大量标记。

# sql - 打卡报表SQL查询

> ID：11186565
> 
> 赞同：0
> 
> 时间：2012-06-25T09:23:04.593
> 
> 标签：sql, sql-server, sql-server-2008

我想从下表生成 csv 文件中的报告。

```
 CARDNO       |      PAYCODE          |               OFFICEPUNCH
  00001210      |       1210            |           6/22/2012 9:49:00 AM     
  00001210      |       1210            |           6/22/2012 7:58:00 PM     
  00001211      |       1211            |           6/23/2012 9:31:00 AM     
  00001211      |       1211            |           6/23/2012 6:12:00 PM 
```

它保存了员工打卡数据，每张卡打卡存储在一行中，因此如果用户员工在早上打卡它会标记为**In time**，但同一天最后一次打卡将被视为**Out time**，一些时间员工打卡有卡很多次。所以我需要采取第一次和最后一次打卡时间。

**问题**

我想获得以下格式的 CSV

```
 Date     |  PayCode |   Card No   |   Intime  | Outtime  | Hrs Works
2012-06-22 |  1210    |   00001210  |   9:30    | 18:00    |  7.3 
2012-06-22 |  1211    |   00001211  |   9:30    | 18:00    |  7.3 
2012-06-23 |  1210    |   00001210  |   9:30    | 18:00    |  7.3 
2012-06-23 |  1211    |   00001211  |   9:30    | 18:00    |  7.3 
2012-06-24 |  1210    |   00001210  |   9:30    | 18:00    |  7.3 
2012-06-24 |  1211    |   00001211  |   9:30    | 18:00    |  7.3 
                                                                ... and continue 
```

请帮助我如何获得上述结果，我已经通过代码尝试过，但我无法实现它。

请使用 sql 查询发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:24:58.157

用SQL做逻辑不是更容易吗？

按 PAYCODE 和 OFFICEPUNCH 分组（也许按 OFFICEPUNCH 并截断时间），然后您可以为 Time In 执行 MIN(OFFICEPUNCH)，为 Time Out 执行 MAX(OFFICEPUNCH)。

**编辑**

SQL 示例：

```
SELECT DISTINCT
    CONVERT(VARCHAR(10), OFFICEPUNCH, 20) AS 'PunchDate'
INTO
    #Date
FROM
    MachineRawPunch
WHERE
    OFFICEPUNCH >= @p_StartDate
AND
    OFFICEPUNCH <= @p_EndDate

SELECT
    #Date.PunchDate AS 'Date',
    TblEmployee.PAYCODE,
    TblEmployee.PRESENTCARDNO AS 'CardNo',
    MIN(CASE MachineRawPunch.ISMANUAL WHEN 'Y' THEN MachineRawPunch.OFFICEPUNCH ELSE CAST(#Date.PunchDate + ' 9:30' AS datetime) END) AS 'TimeIn',
    CASE WHEN MachineRawPunch.ISMANUAL = 'N' THEN CAST(#Date.PunchDate + ' 18:00' AS datetime)
         WHEN MAX(MachineRawPunch.OFFICEPUNCH) > MIN(MachineRawPunch.OFFICEPUNCH)
         THEN MAX(MachineRawPunch.OFFICEPUNCH)
         ELSE NULL END AS 'TimeOut'
FROM
    #Date
CROSS JOIN
    TblEmployee
LEFT JOIN
    MachineRawPunch
ON
    MachineRawPunch.PAYCODE = TblEmployee.PAYCODE
AND
    CONVERT(VARCHAR(10), MachineRawPunch.OFFICEPUNCH, 20) = #Date.PunchDate
GROUP BY
    #Date.PunchDate,
    TblEmployee.PAYCODE,
    TblEmployee.PRESENTCARDNO
ORDER BY
    #Date.PunchDate,
    TblEmployee.PAYCODE,
    TblEmployee.PRESENTCARDNO

DROP TABLE #Date 
```

**环形**

```
while (sqlReader.Read())
{
    // get the results of each column
    string date = (string)sqlReader["Date"];
    string cardNumber = sqlReader["CARDNO"] == DBNull.Value ? string.Empty : (string)sqlReader["CARDNO"];
    DateTime inTime = sqlReader["TimeIn"] == DBNull.Value ? DateTime.MinValue : (DateTime)sqlReader["TimeIn"];
    DateTime outTime = sqlReader["TimeOut"] == DBNull.Value ? DateTime.MinValue : (DateTime)sqlReader["TimeOut"];
    string payCode = (string)sqlReader["PAYCODE"];

    //Stores single row as string 
    int hrsWorked = outTime == DateTime.MinValue ? 0 : outTime.Subtract(inTime).Hours;
    int minsWorked = outTime == DateTime.MinValue ? 0 : outTime.Subtract(inTime).Minutes;
    strRow = date + "," +
             payCode + "," +
             cardNumber + "," +
             (inTime == DateTime.MinValue ? string.Empty : inTime.ToString("H:mm")) + "," +
             (outTime == DateTime.MinValue ? string.Empty : outTime.ToString("H:mm")) + ", " +
             hrsWorked + "." + minsWorked + " , Staus";
    Console.WriteLine(strRow);
    //Write to file
    // sw.WriteLine(strRow);
    i++;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-10T12:17:48.317

```
select  *
,       datediff(minute, first_in, last_out) as duration
from    (
        select  emp_reader_id
        ,       min(case when Event_entry.event_entry_name = 'IN' then trnevents.DT end) as first_in
        ,       max(case when Event_entry.event_entry_name = 'OUT' then trnevents.DT end) as last_out
        ,       cast(min(trnevents.DT) as date) as date
        from    trnevents inner join Event_entry on trnevents.EventCatId=Event_entry.EventCatId
        group by
                emp_reader_id
        ,       cast(trnevents.DT as date)
        ) as SubQueriesMustBeNamed
        select * from trnevents 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-21T07:04:18.393

单个查询就足够了：

```
select
    PAYCODE, CARDNO,
    min(officepunch) as INtime,
    max(officepunch) as OutTime,
    timediff(max(officepunch),min(officepunch)) as HRSWork 
FROM database.tablename 
group by CARDNO, PAYCODE, cast(officepunch as date) 
order by cardno; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T12:05:27.107

在 Sql 中进行最小/最大和分组可能会更容易。

但以防万一你在代码中完成它我会做这样的事情：

创建一个方法以将数据作为可枚举行返回：

```
public IEnumerable<IDataRecord> ExecuteSelect()
{
  cmd = new SqlCommand();
  cmd.Connection = con;
  cmd.CommandText = "SELECT CARDNO, OFFICEPUNCH, PAYCODE FROM MachineRawPunch WHERE OFFICEPUNCH >= @p_StartDate AND OFFICEPUNCH <= @p_EndDate ORDER BY PAYCODE, OFFICEPUNCH";
  cmd.Parameters.Add("@p_StartDate", SqlDbType.DateTime).Value = startDate.Date;
  cmd.Parameters.Add("@p_EndDate", SqlDbType.DateTime).Value = endDate.Date.AddDays(1);

  using (var reader = cmd.ExecuteReader())
  {
    while (reader.Read()) yield return reader;
  }
} 
```

然后在您的导出按钮单击事件中使用 linq 使用 min 和 max 做一个漂亮的组。从这里开始，您应该能够进行其余的格式化和操作：

```
private void buttonExport_Click(object sender, EventArgs e)
{
  //Selects the rows into a list of typed objects. Easier for querying below:
  var rows =
    ExecuteSelect().Select(
      r =>
      new
        {
          CardNo = (string) r["CARDNO"],
          OfficePunch = (DateTime) r["OFFICEPUNCH"],
          PayCode = (string) r["PAYCODE"]
        }).ToList();

  var groupedRows = (from r in rows
                     group r by new {r.CardNo, r.OfficePunch}
                     into g
                     select new
                              {
                                CardNo = g.Select(f => f.CardNo).FirstOrDefault(),
                                PayCode = g.Select(f => f.PayCode).FirstOrDefault(),
                                InDateTime = g.Min(min => min.OfficePunch),
                                OutDateTime = g.Max(max => max.OfficePunch)
                              }).ToList();

  foreach (var row in groupedRows)
  {
    //write to CSV
    //row.CardNo, row.PayCode, row.InDateTime, row.OutDateTime
  }
} 
```

我希望这能引导你朝着正确的方向前进。基本上剩下的就是将日期格式化为时间并计算小时数。

# asp.net - 如何从数据库中添加会话？

> ID：11186566
> 
> 赞同：0
> 
> 时间：2012-06-25T09:23:09.993
> 
> 标签：asp.net, vb.net

我还是新手使用 Asp.net 和 vb.net

```
Protected Sub login_Click(ByVal sender As Object, ByVal e As EventArgs) Handles login.Click
        Dim querystrings As String = "Select Email, Password ,Roles, Nama_Depan, Nama_Belakang from Employee where Email = @email;"
        Dim con As New SqlConnection(connected)
        Dim cmd As New SqlCommand(querystrings, con)
        Dim myreader As SqlDataReader

   Session ("Namadepan")= cmd.Parameters("Nama_Depan")

end sub 
```

我想用会话存储角色、Nama_Depan、Nama_Belakang 但我不知道如何

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:28:52.347

制作一个处理此逻辑的类，`Session()`并且`Session.Add()`不会分散在您的网站中。

```
Public Shared ReadOnly Property Instance() As ClassStoredInSession
    Get
        'store the object in session if it is not already stored
        If Session("example") Is Nothing Then
            Session("example") = New ClassStoredInSession()
        End If

        'return the object stored in session
        Return DirectCast(Session("example"), ClassStoredInSession)
    End Get
End Property 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:24:31.140

会话（“用户名”）= myreader（“Nama_Depan”）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T09:31:18.150

请参阅：[在会话中保存值](http://msdn.microsoft.com/en-us/library/6ad7zeeb)

它很简单：

```
Session("Namadepan") = cmd.Parameters["Nama_Depan"].Value 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T09:31:46.117

您需要获取 SqlDataReader 的结果并将其存储在会话中。

在对您的服务器执行 sql 命令后，myReader 应该包含您需要的数据。 [http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executereader(v=vs.71](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executereader(v=vs.71) )

然后，您可以从阅读器中获取数据并将其存储在您的会话中。您可以制作特定的“UserData”对象并将其存储在会话中。

会话（“用户数据”）=新用户数据{}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T09:26:58.837

创建一个类`UserSession`，将其属性作为从数据库中检索到的数据，并将该类的实例插入到`Session`对象中。

伪代码：

```
UserSession user = new UserSession(name , roles .... )
Session["userData"] = user; 
```

# testing - 我应该如何模拟真实的 1000 个并发用户？

> ID：11186574
> 
> 赞同：6
> 
> 时间：2012-06-25T09:23:41.257
> 
> 标签：testing, concurrency, jmeter

我需要对 Web 服务进行负载测试。它需要至少 1000 个并发用户。

我知道一些测试工具（例如 JMeter）可以模拟一堆具有多线程的并发用户。但是这些用户并不是真正并发的。

如果我在只有 2 个 CPU 内核的机器上运行 JMeter 程序，即使有 1000 个使用测试工具生成的多个线程，一次也只有 2 个并发用户处于活动状态。

有没有办法创建真正的并发用户？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-25T09:51:43.220

从 Web 服务的角度来看，这些用户*是*并发的。具有两个内核的 CPU 可以轻松地在 1000 个线程之间进行交换；大多数时候，线程将等待网络 I/O，因此它与实际拥有 1000 个内核时的工作方式非常相似。

所以JMeter应该没问题。如果测试线程必须执行大量 CPU 密集型工作，那么这可能会使结果产生偏差。但通常，测试线程只是在等待响应。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T09:27:03.097

您可以在阅读[有关并发用户的常见问题解答](http://www.joedog.org/siege-faq/#a16)后尝试 *nix 工具[Siege](http://www.joedog.org)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T16:31:24.437

您还可以查看[Tsung](http://tsung.erlang-projects.org/)，它也[使用 HTTP 模式支持 SOAP](http://tsung.erlang-projects.org/user_manual.html)。

# php - 配置中定义的控制用户连接失败。xampp

> ID：11186588
> 
> 赞同：4
> 
> 时间：2012-06-25T09:24:33.467
> 
> 标签：php, phpmyadmin

当我尝试卸载 xampp 并重新安装 xampp 时。我去 phpmyadmin 时收到以下错误消息

需要帮助和指导来解决它。谢谢

错误

MySQL 说：文档

# 1045 - 用户 'root'@'localhost' 的访问被拒绝（使用密码：否）

配置中定义的 controluser 连接失败。

phpMyAdmin 尝试连接 MySQL 服务器，但服务器拒绝连接。您应该检查配置中的主机、用户名和密码，并确保它们与 MySQL 服务器管理员提供的信息相对应。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-22T09:49:03.787

基本上这里发生的情况是您的 [.../phpMyadmin/config.inc.php] 文件中有错误的凭据。如果您安装了另一个 mysql 实例并且您在此文件中使用的用户名和密码是不同。您必须更改上述文件中的用户名和密码才能匹配。

```
/* Authentication type and info */
$cfg['Servers'][$i]['auth_type'] = 'config';
$cfg['Servers'][$i]['user'] = 'root'; //Change this to your values
$cfg['Servers'][$i]['password'] = 'root';  //Change this to your values
$cfg['Servers'][$i]['extension'] = 'mysql';
$cfg['Servers'][$i]['AllowNoPassword'] = true;
$cfg['Lang'] = ''; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-09T05:56:13.203

尝试更改 `localhost`为`127.0.0.1`. 在我的机器上，这是罪魁祸首..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T09:39:34.110

也许您在安装 xampp 的过程中设置了新密码。

**第一个解决方案：**安装后删除完整的 XAMPP 文件夹，但之前保护 htdocs 文件夹。

**第二：**进入配置文件“phpmyadmin/config.inc.php”里面有控制用户的信息。检查值。

**第三个选项：**使用控制台调用程序**“xampp/mysql/bin/mysql.exe”**，当您使用 Windows 时，您可以连接到数据库。类似**"mysql.exe -uroot -p"**的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-17T14:16:23.760

导航到 XAMPP 中的 phpMyAdmin 文件夹，打开文件 config.inc.php，该文件可以在以下路径中找到：

在 Windows C:\xampp\phpmyadmin\config.inc.php

在 /* 高级功能用户 */ 下，替换

```
$cfg['Servers'][$i]['controluser'] = 'pma'; 
```

和

```
$cfg['Servers'][$i]['controluser'] = 'root'; 
```

如果您为用户“root”设置密码，则在同一文件中编辑这些行：

在 /* 身份验证类型和信息 */ 下写下你的密码

```
$cfg['Servers'][$i]['password'] = 'your_Password'; 
```

在 /* 高级功能用户 */ 下，输入您的密码

```
$cfg['Servers'][$i]['controlpass'] = 'your_Password'; 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-04-28T14:28:44.490

我有一个类似的问题，全新安装和同样的错误令人惊讶。在尝试了几个论坛帮助之后似乎没有任何效果，我认为这不会那么困难......我在新安装时缺少什么？

最后我想出了“COOKIES”啊哈，我喜欢那个美味的饼干，但在这里我们谈论的是浏览器饼干......

1.  在尝试任何配置更改之前，请尝试清理您的浏览器 cookie 并查看它是否有助于解决此问题。

2.  尝试使用 XAMPP 控制面板“管理”按钮而不是通常`http://localhost or http://localhost/phpmyadmin`

3.  尝试直接链接：`http://localhost/phpmyadmin/main.php`或`http://127.0.0.1/phpmyadmin/main.php`

4.  最后试试这个：`http://localhost/phpmyadmin/index.php?db=phpmyadmin&server=1&target=db_structure.php`

不知何故，如果您有旧安装并升级到新版本，它会通过 cookie 跟踪您的旧设置。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2016-05-12T06:16:10.590

[![在此处输入图像描述](../Images/d4078bae3a83fefc91f260871a9c202b.png)](https://i.stack.imgur.com/DcV03.png)

安装任何与Skype相同的软件都会产生问题...或者您稍后启动xampp登录到Skype所以请在xampp登录Skype之前启动...不会出现错误

# php - 如何存储不同的数据库连接

> ID：11186590
> 
> 赞同：0
> 
> 时间：2012-06-25T09:24:37.997
> 
> 标签：php, zend-framework, centos, zend-db

我正在尝试存储来自 crontoller 的数据库连接，并尝试使用 zend 注册表在不同的映射器类中使用它。我无法弄清楚我是如何遇到问题的。

索引控制器.php

```
public function indexAction()
{
    // action body

    $request = $this->getRequest();
    $form    = new Application_Form_Project();

    if ($this->getRequest()->isPost()) {
        if ($form->isValid($request->getPost())) {
            $x = $form->getValues();                
            //return $this->_helper->redirector('index');
            $dbAdapter = Zend_Db::factory("pdo_sqlite", array("dbname"=>"/../data/db/".$x["username"].".db"));
            Zend_Db_Table::setDefaultAdapter($dbAdapter);

            //print_r($dbAdapter);
            Zend_Registry::set('index', $dbAdapter);

            $this->_redirect('/line');

        }
    }

    $this->view->form = $form;

} 
```

PgeLine2DMapper.php

```
<?php

class Application_Model_PgeLine2DMapper
{
protected $_dbTable;

public function setDbTable($dbTable)
{
    $multidb = Zend_Registry::get("multidb");

    $registry = Zend_Registry::getInstance();
    //print_r($registry);

    /*
    try {
        //$db = Zend_Db::factory('Pdo_sqlite', $registry['multidb']);
        //$db->getConnection();

        //Zend_Db::factory("pdo_sqlite", array("dbname"=>"/../data/db/".$x["username"].".db"));
    } catch (Zend_Db_Adapter_Exception $e) {
        // perhaps a failed login credential, or perhaps the RDBMS is not running
    } catch (Zend_Exception $e) {
        // perhaps factory() failed to load the specified Adapter class
    }
    */

    foreach ($registry as $index => $value) {
        echo "Registry index $index contains: ";
        //var_dump($value);
        echo  "<br>";
    }

    if (is_string($dbTable)) {
        $dbTable = new $dbTable();
    }
    if (!$dbTable instanceof Zend_Db_Table_Abstract) {
        throw new Exception('Invalid table data gateway provided');
    }
    $this->_dbTable = $dbTable;
    return $this;
}

public function getDbTable()
{
    if (null === $this->_dbTable) {
        $this->setDbTable('Application_Model_DbTable_PgeLine2D');
    }
    return $this->_dbTable;
}

public function save(Application_Model_PgeLine2D $pgeLine2D)
{
    $data = array(
            'PGA_Name'   => $pgeLine2D->getPGA_Name()
    );

    if( null === ($id = $pgeLine2D->getPGA_Id()) ) {
        unset($data['id']);
        $this->getDbTable()->insert($data);
    } else {
        $this->getDbTable()->update($data, array('PGA_Id = ?' => $id));
    }
}

public function find($id, Application_Model_PgeLine2D $pgeLine2D)
{
    $result = $this->getDbTable()->find($id);
    if (0 == count($result)) {
        return;
    }
    $row = $result->current();
    $pgeLine2D->setPGA_Id($row->PGA_Id)
        ->setPGA_Name($row->PGA_Name);
}

public function fetchAll()
{
    $registry = Zend_Registry::getInstance();
    $resultSet = $registry['index']->getDbTable()->fetchAll();
    $entries   = array();
    foreach ($resultSet as $row) {
        $entry = new Application_Model_PgeLine2D();
        $entry->setPGA_Id($row->PGA_Id)
            ->setPGA_Name($row->PGA_Name);
        $entries[] = $entry;
    }
    return $entries;
}

} 
```

错误信息

```
Fatal error: Call to undefined method Zend_Application_Resource_Multidb::getDbTable() in /opt/eposdatatransfer/application/models/PgeLine2DMapper.php on line 80 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:38:49.057

```
$resultSet = $registry['index']->getDbTable()->fetchAll(); 
```

这是 /opt/eposdatatransfer/application/models/PgeLine2DMapper.php 的第 80 行吗？

我想应该是：

```
$resultSet = $this->getDbTable()->fetchAll(); 
```

Application_Model_PgeLine2DMapper 用在线路控制器上？

# php - 连接实例变量

> ID：11186591
> 
> 赞同：1
> 
> 时间：2012-06-25T09:24:38.073
> 
> 标签：php

我不知道为什么会出现此错误：

> 解析错误：语法错误，意外的 '.'，在第 5 行的 Settings.php 中需要 ',' 或 '

这是代码

```
class Settings
{
    public $appDir = 'app';
    public  $controllersDir = $appDir . '/controllers';

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T09:26:13.487

类属性中不能有变量。

```
class Settings
{
    public $appDir = 'app';
    public  $controllersDir = 'app/controllers';

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T09:28:43.713

您不能在类定义中执行任意代码。您只能声明值（具有静态信息的静态字符串、数字和数组）。

如果要动态添加值，则必须在构造函数中这样做。

```
class Settings 
{
    public $appDir = 'app';
    public $controllerDir = '/controllers';

    public function __construct()
    {
        $this->controllerDir = $this->appDir . $this->controllerDir;    
    }    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T09:27:49.290

我相信你想要的是这个

```
class Settings
{
    public $appDir = 'app';
    public  $controllersDir;

    function __construct(  ) {
        $this->$controllersDir = $this->appDir . '/controllers';
    }
} 
```

如果我没记错的话，你不能有依赖于另一个变量的变量初始化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T09:28:28.333

无论如何，这样做是不好的做法。值不应在声明中定义......您应该使用函数 getControllerDir 返回两个私有属性的连接。

# sql - 如何修改要执行的这个查询？

> ID：11186593
> 
> 赞同：1
> 
> 时间：2012-06-25T09:24:49.070
> 
> 标签：sql, sql-server-2008-r2

我有以下查询，我希望它显示“尚未”，而不是显示数据库中 Status 列的 NULL 值。**怎么做？**

```
SELECT     dbo.SafetySuggestionsLog.Title, dbo.SafetySuggestionsLog.Description, dbo.SafetySuggestionsLog.Username, dbo.SafetySuggestionsStatus.Status,
                 CASE WHEN dbo.SafetySuggestionsStatus.Status  IS NULL THEN 'NOT YET'
FROM         dbo.SafetySuggestionsLog INNER JOIN
                      dbo.employee ON dbo.SafetySuggestionsLog.Username = dbo.employee.Username LEFT OUTER JOIN
                      dbo.SafetySuggestionsStatus ON dbo.SafetySuggestionsLog.StatusID = dbo.SafetySuggestionsStatus.ID
WHERE     (dbo.employee.Username = @Username) 
```

供您参考，该数据库设计如下：

```
Employee Table: Username, Name
SafetySuggestionsLog Table: ID, Title, Description, Username, StatusID
SafetySuggestionsStatus: ID, Status 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T09:26:56.993

使用[COALESCE](http://msdn.microsoft.com/en-us/library/aa258244%28v=sql.80%29.aspx)或[ISNULL](http://msdn.microsoft.com/en-us/library/aa933210%28v=sql.80%29.aspx)。

```
SELECT     dbo.SafetySuggestionsLog.Title, dbo.SafetySuggestionsLog.Description, dbo.SafetySuggestionsLog.Username, COALESCE(dbo.SafetySuggestionsStatus.Status, "Not Yet") as 'Status'
FROM         dbo.SafetySuggestionsLog INNER JOIN
                      dbo.employee ON dbo.SafetySuggestionsLog.Username = dbo.employee.Username LEFT OUTER JOIN
                      dbo.SafetySuggestionsStatus ON dbo.SafetySuggestionsLog.StatusID = dbo.SafetySuggestionsStatus.ID
WHERE     (dbo.employee.Username = @Username) 
```

或者

```
SELECT     dbo.SafetySuggestionsLog.Title, dbo.SafetySuggestionsLog.Description, dbo.SafetySuggestionsLog.Username, ISNULL(dbo.SafetySuggestionsStatus.Status, "Not Yet") as 'Status'
FROM         dbo.SafetySuggestionsLog INNER JOIN
                      dbo.employee ON dbo.SafetySuggestionsLog.Username = dbo.employee.Username LEFT OUTER JOIN
                      dbo.SafetySuggestionsStatus ON dbo.SafetySuggestionsLog.StatusID = dbo.SafetySuggestionsStatus.ID
WHERE     (dbo.employee.Username = @Username) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T09:27:40.003

你几乎就在那里，你可以使用 ISNULL 或 CASE

```
CASE WHEN dbo.Blah.Status IS NULL THEN 'Not Yet' ELSE dbo.Blah.Status END 
```

或者

```
isnull(dbo.Blah.Status, 'Not Yet') 
```

# javascript - javascript不从url加载图像

> ID：11186598
> 
> 赞同：0
> 
> 时间：2012-06-25T09:24:59.287
> 
> 标签：javascript, html, url

我正在尝试制作一种在线画廊，这是第一个 .html 文档，当我单击其中一个图像缩略图时，它应该在 gallery.html 中打开该图像全尺寸的 html

```
<html >
<head>
<title>Untitled Document</title>
</head>
<body > 
<a href="gallery.html?image1.jpg"> <img  height="85" width="85"  src="image1.jpg" /> </a>
<a href="gallery.html?image2.jpg"> <img  height="85" width="85"  src="image2.jpg" /> </a>
<a href="gallery.html?image3.jpg"> <img  height="85" width="85"  src="image3.jpg" /> </a>
</body>
</html> 
```

画廊.html

```
<html>
<head>
<script language = "javascript">
function getUrl(){
var url = window.location.search;
path = url.substring(1);
changeImage(path);
}

function changeImage(path){
var imgDest = document.getElementById("image");
var imgSrc = path;
imgDest.setAttribute("src", imgSrc);
}
</script>
<title>Galerry</title>
</head>
<body>
<img src="" id="image"/>
<br>
</body>
</html> 
```

所有图像和 .html 文档都在同一个文件夹中...还有一些 .jpg 图像的名称中有空格，因此单击它们会将 %20 放​​在地址栏中而不是空格，我知道 %20 会替换空格，但问题可能存在吗？我是这么认为的，但它也想加载具有常规名称的图像。知道如何加载这些图像吗？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:33:14.263

在我看来，您的 javascript 函数从未被调用过。编辑您的脚本，以便在页面加载时调用它：

```
<script language="javascript">
// Assign an anonymous function to the onload event
window.onload = function(){
    // Place code to execute here.
}
</script> 
```

或者，编辑您的`<body>`标签：

```
 <body onload="getUrl();"> 
```

# python - 修改一个正在运行的python程序

> ID：11186600
> 
> 赞同：10
> 
> 时间：2012-06-25T09:25:00.867
> 
> 标签：python, on-the-fly

我启动了一个带有许多嵌套循环的 python 程序，该程序需要几天时间。我刚刚意识到其中一个循环值是错误的并形成了一个无限循环。

我不想从零开始重新启动程序，有没有办法中断当前程序并修改循环范围，以便它可以正常工作，如果它被无限循环困住来打破它？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:32:02.450

如果程序不时保存其状态或结果，您可以添加一个跳过已经执行的步骤的逻辑。

否则，我看不到改变这一点的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T21:51:13.107

我想很老的文章，但现在才看到。如果您仍想尝试，您可以执行以下操作：

使您的脚本在 pdb 下运行为： python -m pdb

这将在 pdb 下运行它。输入 pdb 后，只需输入命令“c”（继续）。这将开始您的程序。

当您遇到无限循环时，只需执行 ctrl+c 这将在调试器中停止程序。现在你可以运行任何你想要的 python 语句。可能您还可以定义一个新脚本导入它并从该脚本运行函数或退出。

我知道总是在调试器下运行不是一个好主意，但至少上面可以解决你想要的。

# kendo-ui - 列单元格中的数据要链接到另一个页面。KendoUI 网格小部件

> ID：11186601
> 
> 赞同：6
> 
> 时间：2012-06-25T09:25:03.440
> 
> 标签：kendo-ui

我正在研究 KendoUI 库以在 Asp.Net Mvc 3 项目中使用它。这是填充了一些本地数据的网格小部件的示例。我需要使一些列成为指向应用程序另一个页面的链接。例如，如果您点击存款，您应该导航到“主页/存款”视图。如何才能做到这一点？任何有关工作示例的帮助将不胜感激。谢谢。

这是提琴手示例：

[http://jsfiddle.net/MwHNd/245/](http://jsfiddle.net/MwHNd/245/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-26T18:20:42.723

您应该使用模板列，这是一个示例

[http://jsfiddle.net/aNCV4/11/](http://jsfiddle.net/aNCV4/11/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-26T22:24:26.510

以下是一些您可能会觉得有帮助的链接：

[http://demos.telerik.com/kendo-ui/grid/index](http://demos.telerik.com/kendo-ui/grid/index)

[http://bristowe.com/blog/2012/5/9/connecting-the-kendo-ui-datasource-to-remote-data.html](http://bristowe.com/blog/2012/5/9/connecting-the-kendo-ui-datasource-to-remote-data.html)

此外，这是一个主要在 Kendo JavaScript 中创建链接列的解决方案：

```
(function(myPage, $, undefined) {

    var IDS = {
        ...
        myGrid: "#my-grid",

        ...

        selectedMasterkey: "#selected-master-key",
        selectedChildkey: "#selected-child-key",
    };

    var Grids = {
        MyGrid: null,
    };

    function initMyGrid() {
        $(IDS.myGrid).kendoGrid({
            selectable: true,
            scrolable: true,
            sortable: true,
            columns: [
                { field: "Key", title: "key", width: "60%" },
                { field: "Weight", title: "Weight", width: "20%" },
                { field: "Link", title: "Link", width: "20%", template:"<a href="../MyData.mvc/Index?key=#=KEY#">#=KEY#</a>"} <!-- This is the hyperlinked column -->
            ],

            change: function() {
                var selectedDataItem = this.dataItem(this.select());
                if (PageState.Selected.ChildKey != selectedDataItem.KEY) {
                    PageState.Selected.ChildKey = selectedDataItem.KEY;
                    myGridSelectionChanged();
                }
            },

            ...

        });

        Grids.MyGrid = $(IDS.myGrid).data('kendoGrid');

        Grids.MyGrid .element.on("dblclick", "tbody>tr", "dblclick", function(e) {
            var dbClickedKey = Grids.MyGrid .dataItem($(this)).KEY;
            window.open('../MyData.mvc/Index?key='+dbClickedKey,'_blank');
        });
        bindMyGrid();
    }

    function bindMyGrid() {
        var dataSource = new kendo.data.DataSource({
            transport: {
                read: {
                    url: "MyData",
                    dataType: "json"
                },
                parameterMap: function(data) {
                    return {
                        myDataId: getQueryStringParameterByName('mydataid')
                    }
                }
            },
            schema: {
                data: function(response) {
                    return response;

                },
                total: function(response) {
                    return response.length;
                },
                parse: function(response) {
                    var myDataList= [];
                    $.each(response, function(i, key) {
                        myDataList.push({ "KEY": key });
                    });
                    return myDataList;
                },
            },
        });
        dataSource.fetch();
        dataSource.view();
        Grids.MyGrid.setDataSource(dataSource);
    }
    ...

    myPage.initialize = function() {
        initMyGrid();
    }

}(window.myPage = window.myPage || {}, jQuery));
```

HTH。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-13T10:23:58.423

```
 columns.Bound(c => c.Deposit).ClientTemplate("<a target='_blank' href='Home/Deposit'>#=Deposit#</a>").Title("Deposit"); 
```

# iphone - 带有各种警报消息的本地通知

> ID：11186606
> 
> 赞同：1
> 
> 时间：2012-06-25T09:25:20.223
> 
> 标签：iphone, uialertview, uilocalnotification

我想多次触发本地通知。每次通知警报消息应该不同，下面有两个方法和委托方法didreceivelocalnotification。这一直在发出相同的警报消息，但我想为不同的本地通知显示不同的警报。

方法一

```
{

UILocalNotification *local =[ [UILocalNotification alloc]init];

local.fireDate =  [NSDate dateWithTimeIntervalSinceNow:15];

local.fireDate = start_fire_date; 
```

}

方法二

```
{

UILocalNotification *local =[ [UILocalNotification alloc]init];

local.fireDate =  [NSDate dateWithTimeIntervalSinceNow:15];

local.fireDate = end_fire_date; 
```

}

```
application idReceiveLocalNotification:UILocalNotification {alert = [[UIAlertView alloc] initWithTitle:@"You come back ! (app was closed)" message:customInfo delegate:self cancelButtonTitle:nil otherButtonTitles:nil];}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:31:21.540

当你发出通知时，你必须设置消息..

```
localNotif.alertBody =[NSString stringWithFormat:@"message"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T09:31:29.953

来自本地通知 .h 文件

```
@property(nonatomic,copy) NSString *soundName;      // name of resource in app's bundle to play or UILocalNotificationDefaultSoundName 
```

将此设置为捆绑包中的声音文件

例子

```
UILocalNotification *local =[ [UILocalNotification alloc]init];

local.fireDate =  [NSDate dateWithTimeIntervalSinceNow:15];
local.soundName = @"yourSoundFile";
local.fireDate = end_fire_date; 
```

# visual-studio-2010 - 在删除和排序 usings 时防止 PowerCommands 删除 System.Linq

> ID：11186614
> 
> 赞同：3
> 
> 时间：2012-06-25T09:25:44.493
> 
> 标签：visual-studio-2010, powercommands

我将 PowerCommands 用于 Visual Studio 2010 [http://visualstudiogallery.msdn.microsoft.com/e5f41ad9-4edc-4912-bca3-91147db95b99](http://visualstudiogallery.msdn.microsoft.com/e5f41ad9-4edc-4912-bca3-91147db95b99)。我喜欢的一项功能是使用保存功能上的语句删除和排序。然而，它也有点烦人，因为它删除了 System.Linq 的 using 语句，该语句不能用 CTRL +“。”自动添加回来。组合键。

有谁知道破解 PowerCommands 以防止它删除特定 using 语句的方法，或者甚至更好的方法来增强 Visual Studio 以解决引用的程序集中（如 System.Linq）中的已知扩展方法？

# c# - 在 Windows Phone 7 中用于过滤的 AZ 网格视图/搜索视图

> ID：11186618
> 
> 赞同：0
> 
> 时间：2012-06-25T09:25:51.173
> 
> 标签：c#, silverlight, windows-phone-7

我正在寻找可以向我显示 AZ 网格视图的 Silverlight 组件。参考下图： ![Windows Phone 搜索视图](../Images/8d85d338f4e51029ec99f4666a1cb183.png) 有人能告诉我这个组件或库的名称，我可以从哪里得到这个视图。（它与一个长列表紧密集成，以过滤结果。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T09:52:15.753

[Windows Phone Toolkit](http://silverlight.codeplex.com/releases/view/75888 "Windows Phone 工具包")中有一个 LongListSelector 控件，可用于生成此类列表。

# wpf - “0xXXXXXXXX”处的指令引用了“0xXXXXXXXX”处的内存，无法“读取”内存。拔下显示器时抛出错误

> ID：11186629
> 
> 赞同：1
> 
> 时间：2012-06-25T09:26:18.843
> 
> 标签：wpf, windows-embedded

我正在运行带有 i3、4GB 内存和固态驱动器的 Windows 7 Embedded Standard。它运行一个 WPF 应用程序。但是，如果我在应用程序运行时拔下显示器并重新插入，我会收到以下错误：

“0x6f7cd318 处的指令引用了 0x00000019 处的内存。无法读取内存。”</p>

我尝试运行 RAM 内存测试，但没有返回错误。然后我用完全相同的硬件组装了一个全新的系统，但仍然出现同样的错误。我还下载了最新的驱动程序，并从不同的映像安装了 Windows 7 ES。还使用了我认为以前可以使用的旧版本的应用程序。

有什么建议可能导致这种情况吗？

# jquery - jQuery选择具有相同类的随机元素

> ID：11186631
> 
> 赞同：3
> 
> 时间：2012-06-25T09:26:24.220
> 
> 标签：jquery, class, random, element

我有“selectElement”类的元素。当我单击该类的元素时，我“选择”它，并给它另一个类“selectedElements”，如果它还没有的话。

但是，我有一个按钮，它应该随机选择一定数量（例如 10 个）具有“selectElement”类的元素并给它们“selectedElement”类。

我在这个答案中尝试过类似的东西 - > [https://stackoverflow.com/a/1764629/1011539](https://stackoverflow.com/a/1764629/1011539)，但它每次都返回相同的值......

编辑：在乔恩的帮助下解决。这是其他有类似问题的用户的代码:)

```
$("#chooseElementsRand").live("click",function(){
    $(".selectedElements").removeClass("selectedElements");
    var maxNum = parseInt($(".maxNum").html());
    var randomElements = shuffle($(".selectElement")).slice(0,maxNum).addClass("selectedElements");
    $(".selectedNum").html(randomElements.length);
    if(randomElements.length==maxNum) {
        $(".buttonToProceed").removeClass("notShown");
    }
}); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-25T09:36:01.743

每当您想从 X 中*真正*随机选择 N 个元素时，解决方案就是[Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)。[这个页面](http://bost.ocks.org/mike/shuffle/)有一个 Javascript 实现（加上基本原理，加上漂亮的动画，所以去看看）：

```
function shuffle(array) {
  var m = array.length, t, i;

  // While there remain elements to shuffle…
  while (m) {

    // Pick a remaining element…
    i = Math.floor(Math.random() * m--);

    // And swap it with the current element.
    t = array[m];
    array[m] = array[i];
    array[i] = t;
  }

  return array;
} 
```

给定随机播放，然后您可以随机选择 X 个元素

```
var items = shuffle($(".selectElement")).slice(0, X); 
```

这是一个可以玩**[的小提琴。](http://jsfiddle.net/fK8Xw/)**

脚注：由于您只对一定数量的随机选择感兴趣，因此无需像`shuffle`上面那样无条件地打乱整个输入数组；你可以只洗牌一小部分，然后用`.slice`它来切断它并使用它。我将把它留作练习；小心不要误抓 *un*shuffled 部分！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-12-24T05:45:30.240

您可以使用 jquery 方法按类名选择随机项`eq()`

见下面的例子。

```
var len = $(".someClass").length;
var random = Math.floor( Math.random() * len ) + 1;
$(".someClass").eq(random).css("background-color", "yellow"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-25T09:36:29.193

像这样的东西会起作用（通过点击一个元素来触发它）

```
$(".selectElement").on("click", function() {
    var randomElements = $(".selectElement").get().sort(function() {
        return Math.round(Math.random()) - 0.5;
    }).slice(0, 5);
    $(randomElements).css('border', '1px solid red');
});​ 
```

[http://jsfiddle.net/rKFfm/](http://jsfiddle.net/rKFfm/)

# sql-server - 从 xml 列 sql 中检索数据

> ID：11186633
> 
> 赞同：1
> 
> 时间：2012-06-25T09:26:35.280
> 
> 标签：sql-server, xml, xquery

我有一个带有 xml 类型列的表（列名是 Before）这是数据示例

```
<row ID="47" By="Test User" Date="2006-07-26T00:00:00" Status="Closed" 
     Closed_Date="2012-06-22T11:14:35.237" Closed_By="MrBig" /> 
```

当我使用此查询检索数据时，我得到 Nulls 而不是 ID 号

```
SELECT    before.value('ID[1]', 'int') ItemId
FROM dbo.Audit
CROSS APPLY Before.nodes('.') N(C) 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:34:25.213

这是一个属性，所以你必须在它前面加上前缀`@`，比如`@ID`. 属性必须始终以节点为前缀，因此 XPath 查询变为`/row/@ID`. 例如：

```
SELECT  Before.value('(/row/@ID)[1]', 'int') ItemId
FROM    Audit 
```

据我所知，这里没有必要`cross apply`。

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!3/af1b6/4/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T09:31:02.003

您需要将其更改为：

```
SELECT before.value('@ID[1]', 'int') ItemId
FROM @Audit
CROSS APPLY Before.nodes('/row') N(C) 
```

用于`.nodes('/row')`选择`<row>`节点 - 并用于`@ID`选择 XML 属性。

但是，使用这个，你会得到一个错误：

> 消息 2390，级别 16，状态 1，第 6 行
> XQuery [@Audit.before.value()]：不支持顶级属性节点

由于您的 XML 中只有一个`<row>`元素（这是正确的，对吗？），您可以使用它来代替：

```
SELECT 
    before.value('(row/@ID)[1]', 'int') ItemId
FROM dbo.Audit 
```

# asp-classic - 启动 ASP 会话

> ID：11186634
> 
> 赞同：3
> 
> 时间：2012-06-25T09:26:50.470
> 
> 标签：asp-classic

我正在使用需要会话控制的 ASP 系统。使用 ASP 启动和检索会话值的语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T09:33:06.740

句法：

```
<% Session[.collection|property|method|event] %> 
```

例子

```
<% Option Explicit %>
<html>
<head>
<title>First Page</title>
</head>
<body>
<%
    Session.TimeOut  = 60
    Session("SiteName") = "www.example.com"
    Session("Name") = "Mr.Incredible"
    Response.write("Session Created<br><br>")
    Response.write("<a href=redirect.asp>Check Session</a>")
%>
</body>
</html> 
```

重定向页面：

```
<% Option Explicit %>
<html>
<head>
<title>Redirect Page</title>
</head>
<body>
<%
    Response.write "Site Name = " & Session("SiteName") & "<br>"
    Response.write "Name = " & Session("Name")& "<br><br>"
%>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T09:29:24.357

在有人因为您不使用 Google 而大喊大叫之前，请先查看以下链接

[http://www.w3schools.com/asp/asp_sessions.asp](http://www.w3schools.com/asp/asp_sessions.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T09:33:20.333

```
 Session("name") = "something"   //storing value in session

      something = Session("name") //retrieving value from session 
```

# regex - Groovy 和 Oracle 编码问题

> ID：11186640
> 
> 赞同：1
> 
> 时间：2012-06-25T09:27:13.907
> 
> 标签：regex, oracle, groovy

使用 Groovy 连接到 Oracle 时遇到一个奇怪的问题。我创建了以下测试表：

```
CREATE TABLE t (text VARCHAR2 (256));

INSERT INTO t VALUES ('[Hallo][Hällo][Hello][Hi]'); 
```

我想找到方括号中的所有子字符串。以下 Groovy 代码无法找到第二个 ([Hällo])：

```
import groovy.sql.Sql

sql = Sql.newInstance('jdbc:oracle:thin:@server:1521:ORCL', 'user',
    'password', 'oracle.jdbc.OracleDriver');

sql.eachRow("select text from t") { row ->
    row.text.eachMatch(/\[[A-Za-zä\-]+\]/)  { match ->
        println match
    }
} 
```

直接使用字符串按预期工作：

```
'[Hallo][Hällo][Hello][Hi]'.eachMatch(/\[[A-Za-zä\-]+\]/)  { match ->
    println match
} 
```

从好的 ol' Java 做同样的事情也可以正常工作。所以我猜测问题应该存在于 Groovy SQL 对象内部的某个地方。

我注意到的最后一件事是这两个字符串（从结果集中获取字符串与将其嵌入到源代码）没有相同的编码。当我在里面打印 Hällo 时，`eachRow`我进入`H?llo`了 Windows 控制台，但是当我直接打印时，我得到`H├νllo`了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T09:56:43.050

经过进一步的实验，问题似乎是 Groovy 使用默认平台编码读取我的脚本。如果我传递`-c UTF8`给 Groovy 解释器，那么我会得到预期的结果。

# php - 用 JQuery 查看不起作用

> ID：11186642
> 
> 赞同：1
> 
> 时间：2012-06-25T09:27:23.157
> 
> 标签：php, jquery, codeigniter

我开发了一些脚本来检测用户何时向下滚动页面，它适用于简单的脚本，如果我使用 CodeIgniter，它现在不起作用。我已将库放入项目的根目录。从视图中有一些代码：

更新：**页面的完整代码**

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; 
              charset=UTF-8" />
        <link href="/bootstrap/css/bootstrap.css" rel="stylesheet">
        <link href="/bootstrap/css/bootstrap-responsive.css" rel="stylesheet">
        <style type="text/css">
            body {
                padding-top: 60px;
                padding-bottom: 40px;
            }
            .sidebar-nav {
                padding: 9px 0;
            }
        </style>
        <script type="text/javascript" src="jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="jquery.jeditable.js"></script>
        <script type="text/javascript" charset="utf-8"> 
        $(document).ready(function()
                {
            $(window).scroll(function()
                        {
                if  ($(window).scrollTop() == $(document).height() - $(window).height())
                                {
                                    alert('1');
                }
            }); 
        }); 
    </script>
    </head>
    <body>
        <div class="navbar navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container-fluid">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="#">Translation project</a>
                    <div class="btn-group pull-right">
                        <a class="btn btn-primary" href="<?=$fb_url;?>">
                            <i class="icon-user"></i>
                            <?=$user_title;?>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a href="#">Profile</a></li>
                            <li class="divider"></li>
                            <li><a href="#">Sign Out</a></li>
                        </ul>
                    </div>
                    <div class="nav-collapse">
                        <ul class="nav">
                            <li><a href="<?php echo $base_url.'view_testing' ?>">Home</a></li>
                            <li><a href="#about">About</a></li>
                            <li><a href="#contact">Contact</a></li>
                        </ul>
                    </div><!--/.nav-collapse -->
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span3">
                    <div class="well sidebar-nav">
                        <ul class="nav nav-list">
                            <li class="nav-header">Languages</li>
                            <?php
                                foreach ($languages as $language)
                                {
                                    $url=$base_url.'language_testing/'.$language['language_code'];
                                    if ($language['language_value']==$current_language['language_value'])
                                    {
                                        echo "<li class='active'><a href='{$url}'>".$language['language_value']." (".
                                            $language['translated']."/".$total_labels_number.")</a></li>";
                                    }
                                    else
                                    {
                                        echo "<li><a href='{$url}'>".$language['language_value']." (".
                                            $language['translated']."/".$total_labels_number.")</a></li>";
                                    }
                                }
                            ?>
                        </ul>
                    </div>
                </div><!--/span-->
                <div class="span9">
                    <div class="hero-unit-little">
                        <h2>
                            <?php
                                echo 'Translations for '.$current_language['language_value'].' ('.
                                    $current_language['translated'].'/'.$total_labels_number.')';
                            ?>
                        </h2>
                    </div>
                        <table>
                            <tbody>
                                <?php
                                    foreach ($records as $record) {
                                        echo "<tr style='border-bottom: 1px dotted silver;'>";
                                        echo "<td width='500'>" . strip_tags($record['language_value']) . "</td>";
                                        if ($record['approved_translation'])
                                        {
                                            echo "<td class ='output' id='".$record['index']."' style='vertical-align:middle' width='200'>" . "<b>".$record['approved_translation']['language_value'].
                                                "</b>"."</td>";
                                        }
                                        else
                                        {
                                            echo "<td class = 'output' id='".$record['index']."' style='vertical-align:middle' width='200'>" . "<b>Not translated</b>" . "</td>";   
                                        }                   
                                        echo '</tr>';
                                    }
                                ?>
                            </tbody>
                        </table>
                        <br/>                  
                </div>
            </div>
    </body>
</html> 
```

但现在它不响应滚动。请告诉我为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:44:52.173

我会尝试在你之前插入这个`$(document).ready()`：

```
!window.jQuery && alert('jQuery NOT loaded!'); 
```

如果您看到此对话框，则表示 jQuery 库无法加载（路径对我来说看起来不正确），因此您需要修复路径。**编辑：**`/`如果它在站点根目录中，只需在当前 URL 的开头添加一个正斜杠 - -。

# jsp - 如何使 JSP 标记属性的值动态化

> ID：11186643
> 
> 赞同：1
> 
> 时间：2012-06-25T09:27:27.107
> 
> 标签：jsp, tags, taglib

请建议，我怎样才能使“catalog.xml”动态化

```
 <XML:parsexml  resource = "catalog.xml" toXMLObjName = "XMLDocument" >  </XML:parsexml> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T10:12:57.820

我做了一些研究并做了以下解决问题的方法---

```
"${sessionScope.fileName}" 
```

代替

```
"catalog.xml" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T10:18:37.670

检查标签`resource` 中的属性是否支持和。如果它支持，您可以像这样传递运行时值：`parsexml``Runtime``EL expressions`

```
<XML:parsexml resource="${param.contextFileName}" toXMLObjName = "XMLDocument" >  
</XML:parsexml> 
```

其中，`${param.contextFileName}`是解析为`contextFileName` 请求参数的 EL 表达式。

# r - 将 R 代码转换为字节码

> ID：11186647
> 
> 赞同：1
> 
> 时间：2012-06-25T09:27:42.603
> 
> 标签：r, compilation, package

我正在尝试在 R 中制作一个包，它只是一个 R 代码，而不使用任何外部语言。现在，我读到将包转换为字节码会显着提高速度，这可以在包安装期间通过指定 `<R CMD INSTALL --byte-code>`

我想知道是否有一个选项通过 i 可以将 R 代码预编译为字节码并执行`R CMD INSTALL`编译后的字节码包，而不是要求用户编写`<R CMD INSTALL --byte-code>`

有没有办法让包只在字节码中构建？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T10:53:48.773

是的。在您的说明文件中，指定：

```
ByteCompile: yes 
```

然后，如果该功能存在，则默认情况下您的包将自动进行字节编译。

# java - 填充 JComboBox 的正确方法？

> ID：11186649
> 
> 赞同：5
> 
> 时间：2012-06-25T09:27:54.680
> 
> 标签：java, arrays, arraylist, text-files, jcombobox

我目前正在 Eclipse 上用 Java 构建一个应用程序，作为编程基础和基本 Java 编程的自助指南，这纯粹是教育性的，唯一的目的是能够轻松参考主题并在我通过编程学习它们时练习我的编程进入本教程应用程序。

随着时间的推移和我学习更多的编程组件，应用程序的内容将会扩展。

所以我的第一个问题归结为正确的形式。

我正在使用下拉框 ( `JComboBox`) 从 GUI 中选择特定主题。我想填充列表并保持程序干净整洁。所以我的问题是如何填充`JComboBox`以限制混乱的代码。也许是一个文本文件，我可以从中单独添加主题并更有效地编辑？我追求的是正确的编程过程，而不是我能做到的所有方式。我知道我可以使用`ArrayList`，但是我很想了解在使用大量内容而不是很少内容时所采取的选择。

谢谢，

西蒙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T09:29:47.553

我认为最干净的方法是定义一个自定义[ComboBoxModel](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)。

通过这种方式，您可以为组合框定义数据模型，将创建组合框的部分与数据管理本身分开。

可能使用文本文件是一件好事，因为您不必在插入新条目时修改代码。您可以在 ComboBoxModel 构造函数中定义读取文件过程。这样，每次运行程序时，您都会发现更新的组合框的内容。

如果应用程序本身无法更新内容，则 ArrayList 不是一个好的选择。如果您对数组列表的内容进行硬编码，则每次需要添加新条目时都将被迫修改代码。

一个小例子：

```
class YourModel implements ComboBoxModel{

//implements all interface methods required...
@override
public YourModel(String filename)
{
    comboBoxItemList = new ArrayList<String>();
    // open your file
    // add every entry to the the list
}
@override
public Object getElementAt(int index)
{
    return comboBoxItemList.get(index);
}
List<String> comboBoxItemList;
} 
```

一旦编写了您需要的内容，您将不再修改代码。您也可以对几个不同的 JComboBox 使用相同的模型。

```
YourModel model = new YourModel("path_to_a_file");
JComboBox box1 = new JComboBox();
box1.setModel(model);
JComboBox box2 = new JComboBox();
box2.setModel(model); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T09:49:33.663

填充 Combobox 的最简单方法是（如[Java 文档](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)所述）是：

```
String[] petStrings = { "Bird", "Cat", "Dog", "Rabbit", "Pig" };
//Create the combo box, select item at index 4.
//Indices start at 0, so 4 specifies the pig.
JComboBox petList = new JComboBox(petStrings); 
```

但是，这不是您可以选择的最佳选择。使用字符串数组填充组合框并不是提供灵活性和模型/UI 解耦的最佳选择。这就是 MVC 模型发挥作用的地方。MVC 模型基本上告诉您使用模型（在您的情况下为 a [`ComboBoxModel`](http://docs.oracle.com/javase/7/docs/api/javax/swing/ComboBoxModel.html)）来备份您的数据。拥有一个模型为您提供了从您想要的任何地方（文件、套接字、Web 服务......）获取数据的可能性和灵活性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T10:09:25.537

使用自定义 ComboBoxModel 的另一种方法是使用[JGoodies Binding](http://www.jgoodies.com/freeware/libraries/binding/)将您的视图绑定到视图模型。这样做您的视图模型不包含任何特定于视图的代码，而是使用标准的 Java bean 机制（例如属性更改支持）来按需更新视图，并通过 bean 属性自动接收所有视图更新。显示的数据实际来自哪里（在示例中，它直接来自 java 枚举）与视图实现无关。这是一个例子：

```
class View {
    private JComboBox chatPresenceCombo = new JComboBox();

    public bind(ViewModel viewModel) {
        BeanAdapter<ViewModel> beanAdapter = new BeanAdapter<ViewModel>(viewModel, true);
        Bindings.bind(chatPresenceCombo, new SelectionInList<ChatPresence>(viewModel.getChatPresenceValues(),
                beanAdapter.getValueModel(ViewModel.PROPERTY_CHAT_PRESENCE)));
    }
}

class ViewModel
{
    private ChatPresence chatPresence;

    private final PropertyChangeSupport changeSupport = new PropertyChangeSupport(this);

    public static final String PROPERTY_CHAT_PRESENCE = "chatPresence";

    public ChatPresence getChatPresence() {
        return chatPresence;
    }

    public void setChatPresence(ChatPresence chatPresence) {
        ChatPresence old = this.chatPresence;
        this.chatPresence = chatPresence;
        changeSupport.firePropertyChange(PROPERTY_CHAT_PRESENCE, old, chatPresence);
    }

    public void addPropertyChangeListener(PropertyChangeListener listener) {
        changeSupport.addPropertyChangeListener(listener);
    }

    public void removePropertyChangeListener(PropertyChangeListener listener) {
        changeSupport.removePropertyChangeListener(listener);
    }

    public ChatPresence[] getChatPresenceValues() {
         return ChatPresence.values();
    }
}

public enum ChatPresence {
    //....
} 
```

# jquery - 为什么单击删除按钮时它不起作用？

> ID：11186651
> 
> 赞同：-1
> 
> 时间：2012-06-25T09:28:03.653
> 
> 标签：jquery, asp.net

这是我项目的第一部分：

```
<div id="div_water" style="display: none" align="center">  
    <table width="100%" border="0" id="printTbl" align="center" cellpadding="5" cellspacing="1" class="table">
        <tr class="TR_BG_list" id="printsizescroll" style="display:none">
            <td align="right" class="list_link" style="width: 214px">
            Resize the pictrue：
            </td>
            <td align="left" class="list_link">
                Description:
            <asp:TextBox ID="PrintSizeDec" runat="server" CssClass="form"  style="width: 106px"/>
             width|height:
            <asp:TextBox ID="PrintSmallSize" runat="server" CssClass="form"  style="width: 50px"/>
    &nbsp;
            <label>
                 <input type="button" name="PintSizeAddClick" value="Add" class="form" id="ButtonAdd" style="width: 44px" onclick="createInputTexts(this)" />
            </label>
           <span class="helpstyle" style="cursor: help;" title="Click to get some help" onclick="Help('H_WaterParam_0008',this)">Help</span>
        </td>
        </tr>
        <tr class="TR_BG_list">
    <td align="center" colspan="2" class="list_link">
        <label>
        <input type="submit" name="Savewater" value=" Submit " class="form" id="Savewater" runat="server" onserverclick="Savewater_ServerClick" />
        </label>
    &nbsp;&nbsp;
            <label>
        <input type="reset" name="Clearwater" value=" Reset " class="form" id="Clearwater" runat="server" />
        </label>
    </td>
    </tr>
    </table>
</div> 
```

第二种：按钮的事件处理函数：

```
function createInputTexts() {

    var trOrigin = $("#printsizescroll");
    var trClone = trOrigin.clone(true);
    var target = $("#printTbl tr:last-child").prev();
    trClone.find(":button").val("Delete").bind("click", function () {
        $(this).parent().parent().parent().remove();
    });
    trClone.css('display', '');
    // Here you can also set new ID.
    target.after(trClone);
} 
```

当我单击删除按钮时，它不起作用，为什么它会这样？我试图通过 click() 替换 bind() 方法来做到这一点，click() 是 bind() 方法的快照，但很遗憾发现它仍然失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:30:18.350

您需要尝试使用委托事件处理程序，例如**[`.on()`](http://api.jquery.com/on)**

```
$('#printTbl').on('click','input[type=button][value=Delte]', function() {
  $(this).parent().parent().parent().remove();
}); 
```

这会将事件绑定`click`到所有`button`带有`value=Delte`动态附加到 DOM 的 s。您不需要在循环内绑定。

### 笔记

检查是`Delte`不是`Delete`

# python - 在 python.exe 中运行时 Python 代码不同

> ID：11186655
> 
> 赞同：0
> 
> 时间：2012-06-25T09:28:27.940
> 
> 标签：python

这是我的代码：

```
import win32api
import wmi

def username_func():
    uname = win32api.GetUserName()
    print "Username is:" ,uname, "\r "

def disk_func():
    c = wmi.WMI()
    for disk in c.Win32_LogicalDisk (DriveType=3):
            print disk.Caption, "%0.1f%% vrij \r" % (100.0 * long (disk.FreeSpace) / long     (disk.Size)),long (disk.FreeSpace) / long (1073741824),"gb van",long (disk.Size) / long     (1073741824),"gb"
            print

def main():
    username_func()
    disk_func()

main()

raw_input("Press Enter to continue...") 
```

当我运行这是 pyscripter 时，它给了我这个输出：

```
Username is: ****** 

C: 66.7% vrij 
79 gb van 119 gb

D: 21.9% vrij 
130 gb van 596 gb 
```

当我双击 python.py 时，我得到不同的输出：

```
sername is: *****
79 gb van 119 gb

130 gb van 596 gb 
```

为什么是这样？我忘记了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T09:37:11.233

除了正确格式化代码之外，您还应该将您的代码更改`\r`为`\n`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T09:42:10.450

尝试将您的代码放在 main() 函数中，然后编写：

```
if __name__ == '__main__':
    main() 
```

我记得我在 python api 中读到它在 Windows 上很重要。但我不记得为什么。如果我找到链接，我会稍后发布。

# ios - 以编程方式从目标 c 访问 SQL 服务器的任何方式

> ID：11186657
> 
> 赞同：-3
> 
> 时间：2012-06-25T09:28:34.560
> 
> 标签：ios

谁能告诉如何以编程方式从目标 c 访问 MS SQL Server

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:30:36.857

不，没有用于此的库，这种情况非常糟糕。您应该使用 或任何可以与数据库通信的方式创建 Web 服务（首选 json `PHP`）`ASP.NET`...

# java - 导入 XStream jar

> ID：11186661
> 
> 赞同：0
> 
> 时间：2012-06-25T09:28:40.480
> 
> 标签：java, xstream

我正在用java开发一个项目，该项目应该让用户输入一堆数据。然后，输入的数据将由程序处理，以便以图形方式向用户显示。输入数据后，我希望有一个“保存”按钮，主要是因为我想让用户有机会稍后继续他/她的工作。因此，在阅读了如何在 java 程序中保存数据之后，我认为使用 XStream 并将数据保存为 XML 文件是一个好主意。

所以，我现在的问题是我无法让我的程序找到 XStream 包。我已经下载了包含一堆 .jar 文件的 XStream 文件夹，并尝试将它们与我自己的 .java 文件放在同一个文件夹中，并在主程序编写中：import com.thoughtworks.xstream.XStream;

这在我编译时工作正常，但是当我运行程序时，会出现此错误：

线程“主”java.lang.NoClassDefFoundError 中的异常：org/xmlpull/v1/XmlPullParserException

所以我需要帮助的是如何让我的程序从我需要的 jar 文件中导入类。我应该把jar文件放在哪里？我是 Java 的初学者，我不是在 IDE 中编写代码，而是在 Mac 上的 Smultron 中编写代码。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:08:35.890

首先，Eclipse 是一个很棒的 IDE，我强烈推荐它。

现在问你的问题：这个错误意味着你的应用程序中的一个类正在使用类'org/xmlpull/v1/XmlPullParserException'但它在类路径中找不到它，所以你需要找到包含这个类的jar（您可以为此使用 Total Commander），然后在运行程序时通过添加“-cp”标志将其添加到类路径中：

```
java -jar myapp.jar -cp otherjar.jar 
```

# jsf-2 - 如何在视图中显示 JSF 配置？

> ID：11186662
> 
> 赞同：0
> 
> 时间：2012-06-25T09:28:41.933
> 
> 标签：jsf-2, mojarra

我正在使用 Spring 3.1.0.RELEASE、JSF 2.x (Mojarra)、JPA 2 和 Hibernate Provider 做一个 Web 应用程序。该应用程序在 Tomcat 7.x 上运行。

我有一个调试页面，我想显示 JSF 的所有属性，例如 numberOfViewsInSession、numberOfLogicalViews、facelets.REFRESH_PERIOD、facelets.SKIP_COMMENTS...

我找到了`javax.faces.PROJECT_STAGE`

```
javax.faces.PROJECT_STAGE = #{facesContext.application.projectStage} 
```

如何在视图中显示这些信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:14:33.263

您在谈论上下文初始化参数`<context-param>`，`web.xml`对吗？

它们可通过`#{initParam}`EL 中的隐式映射获得，该映射在幕后引用[`ExternalContext#getInitParameterMap()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#getInitParameterMap%28%29). 所以，这应该这样做：

```
<c:forEach items="#{initParam}" var="entry">
    #{entry.key}=#{entry.value}<br/>
</c:forEach> 
```

请注意，`<ui:repeat>`不能使用，因为它不支持`Map`.

# javascript - 禁用对 div 的点击

> ID：11186666
> 
> 赞同：4
> 
> 时间：2012-06-25T09:28:56.497
> 
> 标签：javascript

我想禁用单击某个特定`<div>`内容，以便当您选择其上的文本时，该文本不会被选中。

我尝试`onclick="return false;"`像在这个小提琴[http://jsfiddle.net/mageek/X6hqD/](http://jsfiddle.net/mageek/X6hqD/)中那样写，但它不起作用。

它如何工作？（我的目标不仅仅是禁用选择，而是整个点击）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T09:42:38.297

```
document.getElementById('div1').onmousedown = new function ("return false"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T09:38:26.820

如果您只想禁用文本选择，请使用：

```
<div onselectstart='return false;'>
    text
</div>

div{
   -moz-user-select: none;-webkit-user-select: none;
   -khtml-user-select:none;o-user-select:none;
   user-select: none;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T09:40:15.890

你可以试试这个 CSS

```
<style type="text/css" media="print,screen" >
  .unselectable {
     -webkit-touch-callout: none;
     -webkit-user-select: none;
     -khtml-user-select: none;
     -moz-user-select: none;
     -ms-user-select: none;
     user-select: none;
   }
    </style>

<div class="unselectable">
asdasdsadsadsad<br>asdasdasd
</div>

<br><br>

<div>
qqqqqqqqqqqqqqqq<br>asdasdasd
</div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T09:57:31.730

```
<div id="div-test-id" style="width:100px;height:100px;background-color:yellow;">Lorem ipsum</div>

<script type="text/javascript">
var div_click_escape=function(eventObject){
      return false;
};

$(function(){
    $("#div-test-id").click(div_click_escape);
    $("#div-test-id").mousedown(div_click_escape);
    $("#div-test-id").mouseup(div_click_escape);
}
</script> 
```

将避免选择文本。

# javascript - 当孩子来自另一个域时更改 iframe 高度

> ID：11186668
> 
> 赞同：1
> 
> 时间：2012-06-25T09:29:18.680
> 
> 标签：javascript, jquery, iframe, cross-domain

我正在使用 Facebook 应用程序，而 Facebook 应用程序需要将您的应用程序放在 iFrame 中，一切都很好，除了如果创建的 iframe 是静态的并且我想更改 iFrame 的高度，我尝试了以下操作：

```
jQuery(parent.document.body.getElementsByTagName('iframe')).load(function() {
  this.style.height =
  this.contentWindow.document.body.offsetHeight + 'px';
}); 
```

但是当试图访问父文档时

```
parent.document 
```

发生错误

```
Unsafe JavaScript attempt to access frame with URL  
http://www.facebook.com/somthing/app_100550322222338 from frame with URL 
http://z.me/facebook/whatsnew. Domains, protocols and ports must match. 
```

还有其他解决方案吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:33:20.767

没有客户端脚本解决方案，因为页面和 iframe 来自不同的域。

如果你在你的服务器上设置了一个代理页面来获取 facebook 页面，它们会在浏览器中显示为来自同一个域，那么脚本就可以工作。

# c# - 如何在一个 ModelVisual3D 中隐藏 GeometryModel3D 之间的“裂缝”？

> ID：11186670
> 
> 赞同：0
> 
> 时间：2012-06-25T09:29:24.407
> 
> 标签：c#, .net, wpf, 3d, modelvisual3d

我正在编写一个使用 wpf 3d 的地球科学可视化应用程序。用户需要能够以最少的资源快速放大细节并快速缩小。我决定将我的切片（ModelVisual3D）划分为子矩形（GeometryModel3D），这样每个子矩形都有自己的纹理，当相机放大时会发生变化（类似于谷歌地图）。

问题是子矩形之间出现了“裂缝”，即使它们之间实际上没有空白空间。

![在此处输入图像描述](../Images/4dbb213ef63ab0f84496720a5c78436d.png)

如何隐藏这些？或者有没有其他方法可以将多种不同尺寸的材料分配给一个 ModelVisual3D？

PS 我试过让背景变成灰色、浅灰色、银色和白色烟雾。它有一点帮助，但它是不可接受的。我也尝试过重叠子矩形，但没有结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:47:52.910

除了您当前的设置，您可能希望以不同的分辨率制作多个纹理，并根据缩放级别在这些纹理之间切换。（Mipmap）

当非常接近时，您可能会替换整个对象并将其切换为更小的对象）并使用高度详细的纹理。

它将需要更多的预处理，但您将能够使用单个几何体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:42:49.993

似乎将`ImageBrush`'s 拉伸更改为 Stretch.None 并使用大于子正方形的纹理有帮助。虽然现在我需要更精确地控制表面的纹理坐标。

# windows-8 - 如何在 C#、WinRT 中为 httpwebrequest 设置超时

> ID：11186673
> 
> 赞同：1
> 
> 时间：2012-06-25T09:29:39.937
> 
> 标签：windows-8, windows-runtime

我想在我的 C# WinRT 代码中为 httpwebrequest 设置超时值。但是 httpwebrequest 在 WinRT 中不可用。那么请告诉我如何设置 HttpWebRequest 的超时值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:35:38.037

使用[HttpClient](http://msdn.microsoft.com/en-us/library/windows/apps/system.net.http.httpclient%28v=vs.110%29.aspx)类发出您的请求。它有一个 TimeOut 属性，您可以根据自己的喜好进行设置。

您还可以使用[HttpWebRequest](http://msdn.microsoft.com/en-us/library/windows/apps/system.net.httpwebrequest%28v=vs.110%29.aspx)类，它还有一个[TimeOut](http://msdn.microsoft.com/en-us/library/windows/apps/system.net.httpwebrequest.timeout%28v=vs.110%29.aspx)属性。

在大多数情况下，HttpClient 是可行的方法，因为它更易于使用，并且您不需要 HttpWebRequest 提供的定制级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-24T12:04:01.480

要为您的 webrequest 设置超时，您需要设置 HttpWebRequest.Timeout ，这就是全部。

```
HttpWebRequest myHttpWebRequest = (HttpWebRequest) WebRequest.Create("your url");
myHttpWebRequest.Timeout = 1000 ; 
```

# android - 将用户重定向到 Android 中的 App Store

> ID：11186675
> 
> 赞同：6
> 
> 时间：2012-06-25T09:29:47.053
> 
> 标签：android, android-intent

众所周知，我们可以按照以下链接中的说明发送意图，然后将用户重定向到 Google Play。

```
Uri marketUri = Uri.parse("market://details?id=" + packageName);
Intent marketIntent = new Intent(Intent.ACTION_VIEW, marketUri);
startActivity(marketIntent); 
```

但问题是所有应用商店，尤其是亚马逊应用商店（在 Kindle 中），也可以处理这种意图吗？
我知道以下 URI 必须将用户重定向到亚马逊应用商店：

```
http://www.amazon.com/gp/mas/dl/android?p=package 
```

但是，**我不想拥有两个二进制文件**，一个用于普通 Android，另一个用于 Amazon。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T10:23:53.480

没有通用方法，这里要做的是在代码中设置一堆标志。

所以你会有类似的东西

```
boolean AMAZON_APK=true;
boolean ANDROID_APK =false;
.... 
```

然后，当您想发布到亚马逊和发布到 Android Play 时，您将设置适当的值。在启动市场之前的代码中，您将使用一堆 if 语句检查标志，并根据特定市场支持的内容启动适当的意图。这不是什么大问题，因为您只需要更改一些变量。

```
if(AMAZON_APK)
  //launch amazon intent
if(ANDROID_APK)
  //launch android market intent
.... 
```

您可以在此处查看更完整的示例。[如何使用 Intent 进行 Amazon App Store 搜索并按开发者名称过滤？](https://stackoverflow.com/q/8235581/329034)此外，如果某些市场不支持诸如市场意图之类的任何内容，您可以启动一个指向移动网站的链接，并将用户从那里指向您的应用程序。

# c# - 在 UserControl 上显示、选择和编辑文本

> ID：11186677
> 
> 赞同：0
> 
> 时间：2012-06-25T09:29:48.100
> 
> 标签：c#, .net, custom-controls, selection, word-processor

我正在编写一个小型文本编辑器，它应该具有非常基本的格式化功能，没有什么花哨的，但比 RichTextBox 所能提供的更复杂（包括“页面”显示功能）。

但是，我上次编写任何文本编辑器时是使用 C 语言中的 WinAPI for Windows 3.1。我不知道如何使用 .NET 来解决这个问题。在空白之前我得到的进一步发展是使用 TextRenderer.DrawText() 将我拥有的文本输出到一个矩形中......但有些东西告诉我在这种情况下这不是要走的路，因为我一直认为一方面，我想要 XML 格式的背景文本......虽然我可以用标签分解段落，但我不知道如何进行格式化，例如或不同的字体系列，所以它可能需要接近了一点不同。大概每个字都是分开的。我是否必须将每个单词保存在一个数组中（尊重 xml 标签）并将其绘制为一个单独的控件，并将其位置保持在数组中？如果我们'

所以...我正在寻找的是一些提示和技巧（我不能使用 Tx 文本编辑器、DevExpress 或 Telerik 的 RichTextEditors 有充分的理由加上它们的价格）。关于构建一个可以很好地用 C#.NET 扩展的“文字处理器”的最正确方法，因为这是我迄今为止从未涉足的一件事。

基本上：

1) 将文本绘制到自定义控件中的最佳方式。我应该如何保存我的文本？当我加载文件时，我可能会使用基本 Text 属性进行预格式化阶段。或者也许我会用我的自定义 XML 类来扩展它？使用退格键时，我应该保持单词的顺序并用手将它们连接起来吗？等等等等。

2）进行选择的最佳方式（我认为可能只有一种方式？），而在 WinAPI 中，我可以检测光标下的字符，因为它是标准文本，考虑到字体的数量和窗口绘制字符的方式，我要么有到 OCR，然后开始计算位置......所以我认为有更好的选择文本的方法？

3）编辑文本 - 一旦我有了光标位置，我会认为这很简单。

为阅读而欢呼……希望有人提出比我微弱的 DrawText 更好的解决方案……这并不是真正的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:46:30.227

如果您希望在 WPF 中创建功能更全面的文本编辑器，您可能希望从[这个](http://www.codeproject.com/Articles/37169/WPF-RichText-Editor)示例开始，然后从那里开始工作。

# android - 屏幕旋转后刷新活动

> ID：11186679
> 
> 赞同：1
> 
> 时间：2012-06-25T09:30:04.433
> 
> 标签：android, android-activity, rotation, refresh

我使用 Android 2.3.3。屏幕旋转后刷新我的活动视图时遇到问题。

我的活动有一个变量（计数器）、一个 TextView（显示计数器值）、一个按钮（增加计数器并显示它）和 TimerTask（增加计数器并显示它）。它工作正常。我的 TextView 在来自 Button 或 TimerTask 的每个事件之后显示一个新值。

在我旋转手机之前它一直有效。TimerTask 的事件不再刷新我的 TextView。按钮和旋转屏幕仍然可以修改我的视图。我的 TimerTask 仍然增加了我的变量，但屏幕没有变化。我检查了，TimerTask 仍然运行和执行。

这不是我真正的项目，它只是我的错误所在的部分。

我唯一的活动：

```
package com.test;

import java.util.Timer;
import java.util.TimerTask;

import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.util.Log;
import android.view.View;
import android.widget.TextView;
import android.widget.Toast;

public class TestRefreshActivity extends Activity {
    static TimerTask mTimerTask=null;
    static Timer t=new Timer();
    final Handler handler = new Handler();
    static int counter=0;

    //-------------------------------------------------
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        //create and run the timer
        if(mTimerTask==null){
            Log.d("Test","new TimerTask");
            mTimerTask = new TimerTask() {
                public void run() {
                    handler.post(new Runnable(){
                        public void run(){
                            counter++;
                            refreshCounter();
                            Log.d("TIMER", "TimerTask run");
                        }
                    });
                }
            };
            t.schedule(mTimerTask, 500, 3000); 
        }
        Log.d("Test","--onCreate--");
        refreshCounter();
    }

    //-------------------------------------------------
    @Override
    public void onBackPressed() {
        super.onBackPressed();
        mTimerTask.cancel();
        TestRefreshActivity.this.finish();
    }
    //-------------------------------------------------
    @Override
    protected void onDestroy() {
        super.onDestroy();
        Log.d("Test","--onDestroy--");
    }

    //-------------------------------------------------
    public void onBtnClick(View view){
        counter++;
        refreshCounter();
    }

    //-------------------------------------------------
    //the only function which refreshes the TextView
    private void refreshCounter(){
        Runnable run = new Runnable(){
            public void run(){
                TextView textView = (TextView)findViewById(R.id.textView1);
                textView.setText("counter="+counter);
                textView.invalidate();
            }
        };
        synchronized(run){
            TestRefreshActivity.this.runOnUiThread(run);
        }
    }
} 
```

我唯一的看法：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="onBtnClick"
        android:text="Button" />

</LinearLayout> 
```

我不明白为什么我的 TimerTask 在旋转后无法更改视图。据我所知，旋转破坏了我重新创建它的活动，但只有静态变量才能存活。

谢谢你的帮助。

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:47:13.090

`android:configChanges="keyboardHidden|orientation"`- 是一个糟糕的解决方案，指南不鼓励这样做。它只会为您节省屏幕旋转，但是当您的活动在后台时被android杀死后，您的应用程序仍然无法使用。

看看你在做什么。您提供对静态计时器的处理程序的引用。当您旋转手机时，活动会重新创建（意味着一个被销毁，另一个被创建）。您的活动被破坏，但静态成员仍然存在，并且它们仍然持有对已死活动的处理程序的引用。

然后使用新的处理程序创建一个新的活动，但您的 timertask 对此一无所知。

所以你有一个更新无效处理程序的静态计时器，以及什么都不做的活动。

我会删除静态数据并将当前计时器值保存在 onSaveInstanceState 中的捆绑包中。

或者（对您来说更容易）在 TimerTask 中为处理程序创建一个设置器，当您执行此检查`if(mTimerTask==null){`并查看该计时器已经实例化时，在其中设置一个新处理程序（`mTimerTask.setHandler(yourActivityHandler)`）以便在创建新活动时您的 timertask 将发布在新的处理程序中。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-25T09:36:49.530

打开您的android清单文件并更改Activity标签如下

```
 <activity android:name=".aaa"
                  android:configChanges="keyboardHidden|orientation"
                  android:label="@string/app_name"></activity> 
```

# c# - 元数据集合中不存在身份为 '' 的成员。参数名称：身份

> ID：11186680
> 
> 赞同：2
> 
> 时间：2012-06-25T09:30:06.770
> 
> 标签：c#, entity-framework, sqlite, linq-to-entities

在数据库中添加对象时出现异常（我目前正在使用的 Sqlite）。

例外：元数据集合中不存在身份为 '' 的成员。参数名称：身份

通常这段代码可以在我的本地运行，但我也想在我的上网本上运行这个项目，但无论我做什么，我都找不到让它运行的方法。

任何帮助将不胜感激。

```
 -- Original table schema
    CREATE TABLE [Content] (
        [Id] integer PRIMARY KEY AUTOINCREMENT NOT NULL,
        [Title] text NOT NULL,
        [Content] text NOT NULL,
        [PageId] integer NOT NULL,
        [CreatedAt] datetime,
        [UpdatedAt] datetime,
        [CreatedBy] text,
        [UpdatedBy] text,
        CONSTRAINT [FK_Content_PageId_Page_Id] FOREIGN KEY ([PageId]) REFERENCES [Page] ([Id])
    );
    -- Original table schema
    CREATE TABLE [Page] (
        [Id] integer PRIMARY KEY AUTOINCREMENT NOT NULL,
        [Title] text NOT NULL,
        [Url] text NOT NULL,
        [Visibility] bit NOT NULL,
        [CreatedAt] datetime,
        [UpdatedAt] datetime,
        [CreatedBy] text,
        [UpdatedBy] text
    );

    using (var entities = new PageEntities())
                {
                    var page = entities.Pages.FirstOrDefault(p => p.Id == id);
                    if (page != null)
                    {
                        var content = new Content
                                          {
                                              Title = model.Title,
                                              Explanation = model.Explanation,
                                              CreatedAt = DateTime.Now,
                                              UpdatedAt = DateTime.Now,
                                              PageId = page.Id
                                          };
                        entities.AddToContents(content);
                        entities.SaveChanges();
                        return RedirectToAction("PageContent/" + id, "Admin");

        } 
```

# javascript - 获取网格中选定行的单元格的原始值

> ID：11186682
> 
> 赞同：0
> 
> 时间：2012-06-25T09:30:08.377
> 
> 标签：javascript, extjs, grid, extjs4, extjs4.1

和

```
console.log(grid.getSelectionModel().getSelection()); 
```

我看不到我已经选择了一行，并且它下面是该行的所有值，`raw`但是我无法读取它。

我努力了

```
grid.getSelectionModel().getSelection().raw
grid.getSelectionModel().getSelection().raw.EMAIL 
```

等，没有工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T10:06:14.217

根据[http://docs.sencha.com/ext-js/4-0/#!/api/Ext.selection.Model-method-getSelection](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.selection.Model-method-getSelection) `getSelection()`返回数组`Ext.data.Model`。

所以你需要做的是

```
var sel = grid.getSelectionModel().getSelection(),
    model = sel[0],
    val = model.get('EMAIL'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T23:08:47.670

代替

```
grid.getSelectionModel().getSelection() 
```

是

```
grid.getSelectionModel().getSelections() 
```

所以它可能是

```
var sel = grid.getSelectionModel().getSelections(); 
```

或者

```
grid.getSelectionModel().getSelections()[0].get('field'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-03T13:41:42.737

```
{
    xtype: 'gridpanel',
    ....
    listeners: {
        select: function(selModel, record, index, options){
            alert(record.get('EMAIL'));
                }
        } 
```

# android - 在android中解析json

> ID：11186683
> 
> 赞同：0
> 
> 时间：2012-06-25T09:30:14.833
> 
> 标签：android, json, gson

> **可能重复：**
> [Android 中的 JSON 解析](https://stackoverflow.com/questions/3706515/json-parsing-in-android)

我发现我需要使用 Gson 类将 json 解析为 android 中的 Java 对象。解析简单的变量或数组很容易，但我不知道如何解析更复杂的 json 字符串，我的 json 看起来像这样：

```
{"selected_id":3, "data":[{"id":"3","score":"1534"},{"id":"1","score":"1234"}]} 
```

谁能帮助我如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:35:29.893

```
 //Model class 

    class Model {

         private  String mId ;
          private   String mScore;

         public Model (String id , String score){

             mId = id ;
             mScore= score
         }

      //getter and setter 

    } 
```

// 在你的班级

```
 private ArrayLsit getLsit(String str){
      ArrayLsit<Model > list = new  ArrayLsit<Model>();

        // getting JSON string from URL
        JSONObject json = new JSONObject(str);

        try {
            // Getting Array of Contacts
            contacts = json.getJSONArray("data");

            // looping through All Contacts
            for(int i = 0; i < contacts.length(); i++){
                JSONObject c = contacts.getJSONObject(i);

                // Storing each json item in variable
                String id = c.getString("id");
                String score= c.getString("score");
                list.add(new Model(id ,score))

            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

   return list

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T09:51:35.313

为 json 创建类，

Gson gson = 新 Gson(); Jsondata jsonddata = gson.fromJson(response, Jsondata .class);

===== JsonData.jave

```
@SerializedName("selected_id")
public String sid;

    @SerializedName("data") 
public List<data> dalalist; 
```

=== 数据.java

```
 @SerializedName("id")
public String id;

    @SerializedName("score")
public String score; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T09:37:20.437

看看代码..

```
 Result = jsonObject.getString("data");

        jsonArray = new JSONArray(Result);
        for (int i = 0; i < jsonArray.length(); i++) {
            jsonObject = jsonArray.getJSONObject(i);
            try {
                jsonObject.getString("Id");

            } catch (Exception ex) {
                cafeandbarsList.add(null);
                ex.printStackTrace();
            }
        } 
```

谢谢

# mysql - sql 按月搜索结果，格式为 2010-04-01 10:40:20

> ID：11186686
> 
> 赞同：4
> 
> 时间：2012-06-25T09:30:19.600
> 
> 标签：mysql, sql

如何从 2010 年选择月份为 04 的所有行，其中日期列的格式如下：2010-04-01 10:40:20 using mysql

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T09:36:58.097

您可以使用[MONTH](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_month) AND [YEAR](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_year)功能：

```
SELECT * FROM
table
WHERE MONTH(date) = 4 AND YEAR(date) = 2010 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T09:36:08.597

假设您的字段是时间戳，您可以使用

```
select * from mytable where year(thefield)=2010 and month(thefield)=4; 
```

或者

```
select * from mytable where thefield between '2010-04-00' and '2010-04-30 23:59:59'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T09:36:29.893

```
select * from month where month(my_date_column) = 4 and year(my_date_column) = 2010 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T09:41:27.370

也许你可以做这样的事情：

```
SELECT * FROM `table_name`
WHERE YEAR(`date_column`) = 2010
AND MONTH(`date_column`) = 4 
```

我不知道这是否是最好的方法......但它应该工作！

# .net - 如何为不同的目的使用创建视图？

> ID：11186687
> 
> 赞同：0
> 
> 时间：2012-06-25T09:30:21.157
> 
> 标签：.net, asp.net-mvc-3, entity-framework, ef-model-first

我是 ASP.NET MVC3 的新手。我使用 Model First 方法在 ASP.NET MVC3 中创建了一个项目。
我有以下实体：`Customer`和`Call`

这些实体之间的关系是一个（客户）有多个（呼叫）。我为这两个实体创建了控制器。

问题在于，在客户的索引视图中，我添加了 ActionLink 来为特定客户添加呼叫。代码如下：

```
@Html.ActionLink("+Call", "Create", "Call", new { id = item.CustomerId }, null) 
```

单击此链接后，它将打开通话的创建视图。在呼叫创建视图中，我想显示特定客户的姓名。
如何使用传递的 CustomerId？这个怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:49:05.363

在您`CallController`更改`Create`接受`id`参数的操作中：

```
public ActionResult Create(int id)
{
    // TODO: Query the database to get the customer and his name

    // If you use a ViewModel extend it to include the name of the customer
    // Example: viewModel.CustomerName = retrievedCustomer.Name;

    // Or you can pass it in the ViewBag
    // Example: ViewBag.CustomerName = retrievedCustomer.Name;

    return View(viewModel); // or return View();
} 
```

在视图中，您可以根据方法显示名称，如下所示：

```
@Model.CustomerName 
```

或者

```
@ViewBag.CustomerName 
```

# javascript - Javascript 弹出选择器

> ID：11186691
> 
> 赞同：-1
> 
> 时间：2012-06-25T09:30:30.757
> 
> 标签：javascript

当我单击 java script 按钮时，我希望它弹出一个模式选择器警报类型框，

```
|----------------------------------------------| 
|"Select Mode:"                                |
|mode A <radio button here>                    |
|mode B <radio button here>                    |
|                                              |
|----------------------------------------------| 
```

然后获取模式的值......作为 A 或 B 我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:34:33.320

尝试使用 CodeProject 中的以下用户控件

[http://www.codeproject.com/Articles/163069/Returning-a-value-from-a-modal-popup](http://www.codeproject.com/Articles/163069/Returning-a-value-from-a-modal-popup)

# java-me - 没有根证书的 j2me https 连接

> ID：11186692
> 
> 赞同：0
> 
> 时间：2012-06-25T09:30:36.653
> 
> 标签：java-me, https

我正在开发一个 javame 应用程序，该应用程序连接到安装了威瑞信证书的 Web 服务器。有没有办法实现 https 连接来连接这个服务器？如果 bouncycastle 是方式，有什么例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:18:38.050

您无需费心，因为：
“MIDP 2.0 添加了基于开放标准的强大的端到端安全模型，可保护网络、应用程序和移动信息设备。MIDP 2.0 支持 HTTPS 并利用现有标准，如 SSL 和WTLS 以启用加密数据的传输。”
来自[http://www.oracle.com/technetwork/java/whatsnew-138562.html#endtoend](http://www.oracle.com/technetwork/java/whatsnew-138562.html#endtoend)

另外，请参阅有关 SSL 如何工作的精彩视频：[http ://www.youtube.com/watch?v=SJJmoDZ3il8](http://www.youtube.com/watch?v=SJJmoDZ3il8)

# javascript - 是否可以为`goog.debug.Logger`（如`console.log`）获得更好的输出？

> ID：11186698
> 
> 赞同：5
> 
> 时间：2012-06-25T09:31:07.067
> 
> 标签：javascript, logging, google-closure

[google-closure](https://developers.google.com/closure/library/)库还包含一个大多数开发人员应该熟悉的[日志系统。](http://docs.closure-library.googlecode.com/git/class_goog_debug_Logger.html)这很好。不幸的是，您从中获得的输出不像`console.log`某些浏览器/插件提供的那样具有表现力。

例如，如果您`console.log(window)`在 Chrome 中编写，控制台将显示一个您可以交互检查的对象。使用 google-closure 记录器时，它不会那样做。我假设它会在内部简单地将对象的字符串表示形式传递给`console.log`. 所以你失去了很多便利。

正因为如此，我仍然继续使用`console.log`. 但是，如果运气不好，您忘记将其从生产代码中删除，您的代码将在没有的浏览器中中断`console.log`（例如：IE）。

或者，可以通过首先检查是否存在来防止这种情况，例如：

```
window.console && window.console.log && console.log(...) 
```

或者：

```
if (DEBUG) {
    console.log(...)
} 
```

但这两种解决方案都远非完美。而且，鉴于该库*有*一个日志框架，能够使用它会很好。就像现在一样，我发现`console.log`有时更有用。

所以我的问题（tl/dr）：`console.log(x)`当我写`myLogger.info(x)`而不是使用字符串表示时，我可以让 google-closure 用户`x`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T11:54:49.283

您还可以使用 goog.debug.FancyWindow 来拥有一个单独的窗口来显示日志记录。有关更多信息，请参阅 google 关闭演示页面：[https](https://github.com/google/closure-library/blob/master/closure/goog/demos/debug.html) ://github.com/google/closure-library/blob/master/closure/goog/demos/debug.html并查看源代码。

如果您仅使用控制台日志记录，另一个优点是框架将自动添加模块名称和时间......只需添加以下行以使用控制台日志记录：

```
goog.require('goog.debug.Console');

if (goog.DEBUG) {
    debugConsole = new goog.debug.Console;
    debugConsole.setCapturing(true);
} 
```

这也将阻止在生产代码中显示控制台日志记录。

问候，

雷内

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-31T07:14:30.507

> Google Closure 可以根据您的需要提供信息。有功能，没有对象的功能。参考下面的代码片段。

```
 goog.require('goog.debug');
 goog.require('goog.debug.Logger');

 var theLogger = goog.debug.Logger.getLogger('demo');
 theLogger.info('Logging examples');

 // Create a simple object.
 var someone = {
     'name': 'peder',
         'age': 33,
         'gender': 'm',
         'kids': ['hari', 'sam', 'sneha']
 };

 // Show the object, note that it will output '[object Object]'.
 theLogger.info(someone);

 // Use expose to walk through the object and show all data.
 theLogger.info('Person: ' + goog.debug.expose(someone));

 // Does not show the functions by default.
 theLogger.info('expose (no functions): ' + goog.debug.expose(yourObject));

 // Shows the functions as well.
 theLogger.info('expose (w/functions): ' + goog.debug.expose(yourObject, true));

 // Show deepExpose, which walks recursively through data.
 theLogger.info('deepExpose (no functions): ' + goog.debug.deepExpose(yourObject));

 theLogger.info('deepExpose (w/functions): ' + goog.debug.deepExpose(yourObject, true)); 
```

# iphone - 核心图 - 禁用某些刻度的轴标签

> ID：11186699
> 
> 赞同：1
> 
> 时间：2012-06-25T09:31:12.967
> 
> 标签：iphone, ios, uiview, graph, core-plot

我将如何禁用某些（不是全部）刻度的轴标签？

例如，我的 x 轴对应于事件的开始时间。x 轴标签显示开始时间的日期。但是，一天内可能有多个事件，而不是显示相同日期的多个标签，我希望只显示第一次出现的日期，并隐藏具有相同日期的其余标签。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:36:16.143

环顾四周，发现可以用`labelExclusionRanges`.

从核心情节文档：

> CPTAxis：[读，写，保留]
> 
> 一组 CPTPlotRange 对象。不会绘制任何落在数组中任何范围内的刻度线和标签。

# magento - 在管理区域启用 Magento Varien_Profiler

> ID：11186700
> 
> 赞同：6
> 
> 时间：2012-06-25T09:31:13.547
> 
> 标签：magento, profiling

如何在管理区域启用 Magento Profiler？

我已经设置了管理选项，`Varien_Profiler::enable();`之前添加`Mage::run($mageRunCode, $mageRunType);`并清除了缓存，但分析器结果只显示在前端？

我还缺少其他东西吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-25T10:26:06.563

检查**系统 > 配置 > 开发人员***的默认配置范围内*是否也启用了探查器，并且开发人员 IP 限制为空或配置正确。

 ****编辑：**基于这是公认的答案，系统配置中的“默认范围”将针对存储范围 ID 0 存储值，这是管理区域使用的存储范围，这是毫无价值的。**

# asp.net - 如何刷新网格视图并根据类型选择一次动态显示一个？

> ID：11186701
> 
> 赞同：0
> 
> 时间：2012-06-25T09:31:17.083
> 
> 标签：asp.net, gridview, grid

我的页面中有两个网格视图和一个类型选择下拉列表，其中 type1 可以键入 6 个列表项。

如果用户选择 type1 到 type4，则应显示 gridview1，如果选择 type5 到 type6，则应显示 gridview2，因此应一次显示两个 gridview 之一。

现在，对于每种类型选择，gridviews 都与数据绑定。

现在对于每个选择，我希望刷新网格并在其中显示最新数据......

这个怎么做....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:36:02.740

假设您首先将 Type1 到 Type4 用于下拉位置，其余两种类型位于这些位置之后。

**在 HTML 端**

```
 <asp:DropDownList ID="ddlSel" runat="server" AutoPostBack="true" OnSelectedIndexChanged="ddlSel_SelectedIndexChanged"> 
```

**在代码后面**

```
protected void ddlSel_SelectedIndexChanged(object sender, EventArgs e)
{    
  if(ddlSel.SelectedIndex < 4)
  {
     gridView1.DataSource = dt1; //This could be call to method returning datatable for gridview1
     gridView1.DataBind();
     gridView1.Visible = true;
     gridView2.Visible = false;
  }
  else
  {
     gridView2.DataSource = dt2; //This could be call to method returning datatable for gridview2
     gridView2.DataBind();
     gridView2.Visible = true;
     gridView1.Visible = false;    
  }    
} 
```

# jquery - 是否可以使用模型数据自定义 javascript 函数名称

> ID：11186702
> 
> 赞同：1
> 
> 时间：2012-06-25T09:31:17.477
> 
> 标签：jquery, asp.net-mvc-3

在javascript中，我知道我可以从我的模型中获取一个值到一个javascript变量中，如下所示：

```
function myFunctionName() 
{
    var id = @Model.ID;
    //etc
} 
```

我想做的是使用模型 ID 值自定义函数本身的名称，这样它就会像这样：

```
function myFunctionName_1() 
{       
   //etc
} 
```

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T14:58:16.533

是的，如果我理解正确的话。你可以这样做：

```
function myFunctionName_@(Model.ID)() 
{       
   //etc
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T09:34:22.727

您不能在**运行时**更改函数的名称，但您可以创建一个**别名**函数（使用您的模型数据）并使用它。

仅供参考，[`arguments.callee`](https://developer.mozilla.org/en/JavaScript/Reference/Functions_and_function_scope/arguments/callee)您可能也会感兴趣，这基本上是指代函数本身的另一种方式。

# ios - UIGraphicsGetCurrentContext() 生命周期短

> ID：11186708
> 
> 赞同：2
> 
> 时间：2012-06-25T09:31:37.363
> 
> 标签：ios, core-graphics, drawrect, ipad-3

我有一个实现手绘的视图，但我有一个小问题。我注意到在 iPad 3 上一切都变糟了，所以我尝试更新我的绘图代码（可能就像我一开始应该做的那样）只更新被描边的部分。但是，打开后的第一次冲程，以及怠速10秒左右后的第一次冲程都非常慢。一切都“热身”后，它像黄油一样光滑，每个 drawRect 只需要大约 0.15 毫秒。我不知道为什么，但是对于第一个 drawRect 和空闲后的第一个 drawRect ，整个视图矩形都被标记为脏（然后大约需要 150 毫秒才能更新）。堆栈跟踪显示我的矩形被覆盖`CABackingStoreUpdate_`

如果矩形很大，我尝试不绘制图层，但随后我的整个上下文变为空白（当我像乐透彩票一样在旧区域上绘制时会重新出现）。有谁知道 UIGraphicsGetCurrentContext() 发生了什么？这是我能想象的唯一麻烦的地方。也就是说，我的视图上下文被上下文精灵猛拉，因此它需要再次完全呈现自己。我可以使用任何设置来保持相同的上下文吗？或者这里是否发生了其他事情......在初始显示后无需更新整个矩形。

我的 drawRect 很简单：

```
- (void)drawRect:(CGRect)rect
{
    CGContextRef c = mDrawingLayer ? CGLayerGetContext(mDrawingLayer) : NULL;
    if(!mDrawingLayer)
    {
        c = UIGraphicsGetCurrentContext();
        mDrawingLayer = CGLayerCreateWithContext(c, self.bounds.size, NULL);
        c = CGLayerGetContext(mDrawingLayer);
        CGContextSetAllowsAntialiasing(c, true);
        CGContextSetShouldAntialias(c, true);
        CGContextSetLineCap(c, kCGLineCapRound);
        CGContextSetLineJoin(c, kCGLineJoinRound);
    }

    if(mClearFlag)
    {
        CGContextClearRect(c, self.bounds);
        mClearFlag = NO;
    }

    CGContextStrokePath(c);
    CFAbsoluteTime startTime = CFAbsoluteTimeGetCurrent();
    CGContextDrawLayerInRect(UIGraphicsGetCurrentContext(), self.bounds, mDrawingLayer);
    NSLog(@"%.2fms : %f x %f", (CFAbsoluteTimeGetCurrent() - startTime)*1000.f,  rect.size.width, rect.size.height);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T01:26:52.350

[我在Apple Dev Forums](https://devforums.apple.com/thread/129549?start=0&tstart=0)上找到了一个有用的线程来描述这个确切的问题。它只存在于 iOS 5.0 之后，理论上是因为 Apple 引入了双缓冲系统，所以前两个 drawRects 将永远是满的。但是，没有解释为什么空闲后会再次发生这种情况。理论上，底层缓冲区是 GPU 不保证的，这会被随意丢弃，需要重新创建。解决方案（直到 Apple 发布某种真正的解决方案）是 ping 缓冲区，以便它不会被释放：

```
mDisplayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(pingRect)];
[mDisplayLink addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];

- (void)pingRect
{
    //Already drawing
    if(mTouchCount > 0) return;

    //Even touching just one pixel will keep the buffer alive
    [self setNeedsDisplayInRect:CGRectMake(0, 0, 1, 1)];
} 
```

唯一的弱点是如果用户保持手指完全静止超过 5 秒，但我认为这是可以接受的风险。

**编辑**有趣的更新。事实证明，简单地调用 setNeedsDisplay 就足以让缓冲区保持活动状态，即使它立即返回。所以我将此添加到我的 drawRect 方法中：

```
- (void)drawRect:(CGRect)rect
{
   if(rect.size.width == 1.f)
       return;
    //...
} 
```

希望它能抑制这种刷新方法肯定会增加的功耗。

# iphone - object == nil 或 nil == object 检查对象是否为 nil？

> ID：11186715
> 
> 赞同：3
> 
> 时间：2012-06-25T09:32:03.930
> 
> 标签：iphone, objective-c

在检查对象是否为 nil 时，有人使用 1：

```
if (object == nil) {
    //...
} 
```

有人使用2：

```
if (nil == object) {
    //...
} 
```

1和2有区别吗？哪一个更好？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T09:35:36.103

不同之处主要在于，如果您错误地忘记了`=`这样的例子

```
 (nil = myObject) 
```

你会得到一个错误，因为你不能给 nil 赋值。所以它是某种故障安全的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T09:52:43.693

正如其他人指出的那样，它们是等价的。还有另一种方法：

```
if (!object) {
    // object is nil
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-25T09:37:07.317

使用 of实际上是一种成语，以防止您在表达式中`nil == object`错过 a 的不幸情况。`=`例如，你想写：

```
if (object == nil) 
```

但写：

```
if (object = nil) { 
```

这是一个典型的错误，很难追踪，因为赋值也有一个值作为表达式，因此条件将评估为假（无错误），但您也将清除您的对象...

另一方面，写作

```
if (nil == object) 
```

您确保编译器会检测到这种错误，因为

```
if (nil = object) 
```

不是常规任务。

实际上，现代编译器（默认设置）将为这种“意外”赋值提供警告，即：

```
if (object = nil) { 
```

会发出警告；但这仍然很棘手。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-25T09:36:53.977

一些开发人员更喜欢“[尤达条件](http://united-coders.com/christian-harms/what-are-yoda-conditions)”的原因是它不太可能无意中编写`if (object = nil)`（注意分配）。

这不再是一个问题，因为编译器在没有额外括号的条件表达式中进行赋值时会发出警告。

由于尤达条件句的可读性较差，因此应避免使用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-25T09:37:32.920

它们是等价的。在过去，写作`if (CONST == variable)`以减少意外分配的风险是很常见的。例如`if (variable = CONST)`，将为变量分配一个常量，并且 if 语句将根据常量的值而不是变量的值来评估为真或假。

如今，IDE 和编译器通常足够聪明，可以在这些行上发出警告。由于可读性，许多人更喜欢第一个版本。但实际上这是一个风格问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-25T09:33:09.267

不，只是在可读性方面我更喜欢第一个，而其他一些开发人员可能更喜欢另一个。

它只是一个编码风格问题，它根本没有技术差异。

有人可能会说第二个更好，因为它更明确，`nil`所以它更容易注意到我们正在测试`nil`，但这又取决于开发人员的品味。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-25T09:38:47.067

使用比较运算符 == 时的最佳做法是将常量放在操作数的左侧。这样就不可能不小心误输入赋值运算符而不是比较。

例子：

(iVarOne == 1)

在功能上等于

( 1 == iVarOne)

但

(iVarOne = 1)

与

（1 = iVarOne）

这个最佳实践解决了这样一个事实，即当您错误键入比较运算符的赋值时，编译器不会抱怨......

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-25T09:37:29.047

完全没有区别。这都是关于可读性的。如果您想编写干净的代码，则应该注意这一点。

如果您将“对象”放在评估的右侧，那么您真正在做什么就变得不那么明显了。

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2012-06-25T09:36:44.730

它不是 NIL，它是 NULL。他们是一样的。== 运算符是比较运算符。作为一般趋势，我们使用 (object==NULL)

# java - Spring 社交提供者 = ?error

> ID：11186717
> 
> 赞同：0
> 
> 时间：2012-06-25T09:32:17.953
> 
> 标签：java, spring-social

当我单击 /signIn/facebook 按钮时，它会将我重定向到我授权的 facebook 页面，然后将我重定向到我的 redirectUrl，但参数错误 = 提供者。我做错了什么？据我所知，它应该重定向到 SignInAdapter 并比较 userIds 或类似的东西。我该如何调试这些。为什么它不起作用。我的 signInController 应该将我重定向到注册页面，不是吗？这是我的配置：

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:aop="http://www.springframework.org/schema/aop" xmlns:util="http://www.springframework.org/schema/util"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/aop 
        http://www.springframework.org/schema/aop/spring-aop-3.0.xsd"
    default-lazy-init="true">

    <bean id="connectionFactoryLocator"
        class="org.springframework.social.connect.support.ConnectionFactoryRegistry">
        <property name="connectionFactories">
            <list>
                <bean
                    class="org.springframework.social.facebook.connect.FacebookConnectionFactory">
                    <constructor-arg value="${facebook.appId}" />
                    <constructor-arg value="${facebook.appSecret}" />
                </bean>
            </list>
        </property>
    </bean>

    <bean id="usersConnectionRepository"
        class="org.springframework.social.connect.jdbc.JdbcUsersConnectionRepository">
        <constructor-arg ref="dataSource" />
        <constructor-arg ref="connectionFactoryLocator" />
        <constructor-arg ref="textEncryptor" />
    </bean>

    <bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://localhost:3306/shop" />
        <property name="username" value="root" />
        <property name="password" value="root" />
    </bean>

    <bean id="connectionRepository" factory-method="createConnectionRepository"
        factory-bean="usersConnectionRepository" scope="request">
        <constructor-arg value="guest" />
        <aop:scoped-proxy proxy-target-class="false" />
    </bean>

    <bean class="org.springframework.social.connect.web.ProviderSignInController">
        <constructor-arg ref="simpleSignInAdapter" />
        <property name="applicationUrl" value="${application.url}" />
        <property name="signUpUrl" value="/signup" />
    </bean>
    <bean id="simpleSignInAdapter" class="com.social.SimpleSignInAdapter" />

    <bean class="org.springframework.social.connect.web.ConnectController">
        <!-- relies on by-type autowiring for the constructor-args -->
        <property name="applicationUrl" value="${application.url}" />
    </bean>

    <bean id="textEncryptor" class="org.springframework.security.crypto.encrypt.Encryptors"
        factory-method="noOpText" />
</beans> 
```

# c# - 混合 ref 和 params 关键字是不可能的？

> ID：11186718
> 
> 赞同：3
> 
> 时间：2012-06-25T09:32:23.047
> 
> 标签：c#, linq

我想要一个映射函数来做到这一点：

```
public static void Map<T>(IEnumerable<T> src, params T[] dst)
{
    for (int i = 0; i < dst.Length; i++)
        dst[i] = src.ElementAt(i);
} 
```

为了使这项工作 dst 也必须被声明为 ref，这似乎是不可能的。

在这里，它用于一个虚构的单元测试：

```
int a = 0, b = 0, c = 0;
int[] arr = { 1, 2, 3 };
Tools.Map(arr, a, b, c);
Assert.AreEqual(a, 1);
Assert.AreEqual(b, 2);
Assert.AreEqual(c, 3); 
```

这可能吗？它已经存在了吗？这会是个坏主意吗？

编辑：换句话说，我如何给这个实现任意数量的参数：

```
public static void Map3<T>(IEnumerable<T> src, ref T a, ref T b, ref T c)
{
   a = src.ElementAt(0);
   b = src.ElementAt(1);
   c = src.ElementAt(2);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T09:51:09.823

你不能那样做。参数是 C# 编译器的一种便利，它只是在现场创建一个数组，并用参数填充它。

由于数组不能包含“ref”变量，因此您也不能以这种方式将“ref”传递给 params。

您正在寻找某些语言具有的“多重分配”之类的东西。如果它存在，它将像这样工作：

```
my (a,b,c,d) = enumerable.ToArray(); 
```

请参阅：[C#：拆分字符串并将结果分配给多个字符串变量](https://stackoverflow.com/questions/5266207/c-split-string-and-assign-result-to-multiple-string-variables)

您可能会考虑一组扩展方法：

```
public static void ReadValues<T>(this T[] array, ref T t0){
   t0 = array[0];
}
public static void ReadValues<T>(this T[] array, ref T t0, ref T t1){
   t0 = array[0];
   t1 = array[1];
} 
```

依此类推，最多可以支持任意数量的参数。

这不是一个任意的数字，但 20 对于大多数用途来说应该足够高了。嘿，如果不是，那就再高一点。

然后你可以像这样使用它：

```
enumerable.ToArray().ReadValues(var1, var2, var3); 
```

你甚至可以将它与 Slice 结合来读取任意条目：

```
// reads indexes 3 to 7
enumerable.ToArray().Slice(3,4).ReadValues(var1, var2,var3,var4); 
```

请参阅此处的切片：

*   [从现有数组中获取子数组](https://stackoverflow.com/questions/943635/c-sharp-arrays-getting-a-sub-array-from-an-existing-array)

# wcf - WCF 服务中的安全模式

> ID：11186719
> 
> 赞同：1
> 
> 时间：2012-06-25T09:32:26.473
> 
> 标签：wcf, wcf-security

谁能告诉我传输和消息级安全码之间的区别。另外，如何使用它们。使用消息安全模式时出现以下错误：

```
<message algorithmSuite="Default" clientCredentialType="UserName"/> 
```

例外 ：

System.ServiceModel.CommunicationObjectFaultedException：通信对象 System.ServiceModel.ChannelFactory`1 无法用于通信，因为它处于故障状态。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T09:44:26.137

消息安全对每条单独的消息进行加密以保护敏感数据。传输安全保护端到端网络连接以保护网络流量。

**使用以下传输安全标准来决定是否使用它：**

点对点。传输安全支持点对点通信，不支持中间场景或协议转换。

流媒体。传输安全可以支持流数据场景。

绑定限制。传输安全性不适用于 wsDualHttpBinding。

身份验证限制。传输安全性不适用于协商、用户名或 Kerberos 直接身份验证。

**使用以下消息安全标准来决定是否使用它：**

中介。消息安全支持具有中介或协议转换的场景。

加密灵活性。消息安全性允许您加密部分消息，而将其他部分保留为明文。

绑定限制。消息安全性不适用于 netNamedPipeBinding。安全对话。安全对话仅适用于消息安全。

身份验证限制。消息安全性不适用于基本身份验证或摘要身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T09:44:44.403

您得到的错误可能不是问题的根源。要查看实际发生的情况，请尝试使用下面定义的服务代理：

```
public class ServiceProxy<T> : IDisposable where T : class, ICommunicationObject
{
    public ServiceProxy(T client)
    {
        Client = client;
    }

    public T Client { get; private set; }

    public void Dispose()
    {
        if (Client != null &&
            Client.State != CommunicationState.Closed &&
            Client.State != CommunicationState.Faulted)
        {
            Client.Close();
        }
    }
} 
```

并以这种方式使用它：

```
using (var c = new ServiceProxy<[yourservicetypehere]>(new [yourservicetypehere]()))
{
    try
    {
        var rep = c.Client.[yourservicemethodhere](......);
    }

    catch (Exception exception)
    {
        // Trap exception here to see what is really happening.
    }

    finally
    {
        c.Client.Close();
    }
} 
```

# triggers - 在 SQL 中为特定的更新情况更改表

> ID：11186721
> 
> 赞同：0
> 
> 时间：2012-06-25T09:32:29.687
> 
> 标签：triggers, oracle10g

我已经为表格库存创建了一个触发器

该表的架构如下：

```
create table stock(item_code varchar2(2) primary key, p_qty number(2),s_qty number(2)); 
```

触发器如下：

```
CREATE OR REPLACE TRIGGER TR_STOCK BEFORE UPDATE OF S_QTY ON STOCK FOR EACH ROW
DECLARE
    V_P STOCK.P_QTY%TYPE;
    V_S STOCK.S_QTY%TYPE;
    V_I VARCHAR2(2);
BEGIN
    V_S:=:NEW.S_QTY;
    V_I:=:NEW.ITEM_CODE;
    SELECT P_QTY INTO V_P FROM STOCK WHERE ITEM_CODE=V_I;
    IF V_S>V_P THEN
        RAISE_APPLICATION_ERROR(-20400,'SOLD QTY CANNOT EXCEED PURCHASED QTY...');
    END IF;
END;
/ 
```

现在每次我执行更新查询时，它都会说表正在变异并标记以下错误：

```
update stock set s_qty=2 where item_code='i4'
       *
ERROR at line 1:
ORA-04091: table HR.STOCK is mutating, trigger/function may not see it
ORA-06512: at "HR.TR_STOCK", line 8
ORA-04088: error during execution of trigger 'HR.TR_STOCK' 
```

对这个特定问题有任何帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:47:50.173

无需查询`STOCK`表。直接比较`:NEW.P_QTY`和`:NEW.S_QTY`字段

```
CREATE OR REPLACE TRIGGER TR_STOCK BEFORE UPDATE OF S_QTY ON STOCK FOR EACH ROW
DECLARE
BEGIN
    IF :new.s_qty > :new.p_qty THEN
        RAISE_APPLICATION_ERROR(-20400,'SOLD QTY CANNOT EXCEED PURCHASED QTY...');
    END IF;
END;
/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T23:16:04.583

您确实应该考虑使用数据库约束来实现此逻辑，在这种情况下您根本不需要触发器。

```
ALTER TABLE hr.stock 
ADD CONSTRAINT stock_ck1
CHECK (
  s_qty <= p_qty
) 
```

与约束相比，触发器有很多缺点：

*   触发器不考虑现有数据行，如果您愿意，约束可以这样做。
*   触发器必须`FOR EACH ROW`为*每一行在*SQL 引擎和 PL/SQL 引擎之间进行上下文切换，这增加了`INSERT`or`UPDATE`语句运行的开销。随着行数的增加，这会增加。
*   Oracle 在优化 SQL 语句时可以使用约束（它知道`WHERE`违反`CHECK`约束的子句将永远不会返回任何行而不需要检查行）。

如果您使用触发器来提供错误消息，您应该真正考虑将其移动到您的应用程序逻辑中，并使用约束作为保障。

# html - 双引号、“和”的Unicode转换

> ID：11186722
> 
> 赞同：-2
> 
> 时间：2012-06-25T09:32:30.877
> 
> 标签：html, unicode, query-string

我有一个文本字段，当我在其中输入一个值时。它存储在 DB 中，通过查询字符串传递。当手动输入包含“（双引号）的字符串时，它工作正常，但是当粘贴非 8 位文本时因此“（双引号），它无法对字符串进行uriDecode。

我参考了以下链接以了解该问题。

[http://www.rishida.net/tools/conversion/](http://www.rishida.net/tools/conversion/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:01:30.947

我猜你在谈论 PHP 变量传递问题。您没有向我们提供代码，但如果我理解您的问题，您可以在字段中同时输入“和”，但只有“被传递到下一页。可能的解决方案是不使用”或者您可以使用一些javascript来自动触发onkeydown事件，该事件将自动更正文本并从“切换到”

```
<script type="text/javascript">
function changetext(field_name) {
var myTextField = document.getElementById(field_name).value;
var myTextFieldEdited = myTextField.replace('”', '"');
document.getElementById(field_name).value = myTextFieldEdited;

return;
}
</script>

<form>
<textarea id="text_field" onkeydown="changetext('text_field');" onsubmit="changetext('text_field');"></textarea>
</form> 
```

onkeydown 在您编写文本时触发，如果您 ctrl+c 和 ctrl+v 提交时的文本应进行最终检查并更改以确保文本中没有“”。

# haskell - haskell 应用程序项目文档

> ID：11186723
> 
> 赞同：3
> 
> 时间：2012-06-25T09:32:31.363
> 
> 标签：haskell

> 什么是识字编程？引用 Knuth 博士的话：“主要思想是将程序视为与人类的交流，而不是对计算机的一组指令。”

生成haskell应用程序项目文档的流行方法是什么？请提及每种方法的主要优势领域/主要优势。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T09:43:07.737

最常见的方法是使用[Haddock 标记](http://www.haskell.org/haddock/doc/html/index.html)。

为此，您可以使用 . 开头的注释行`-- |`。文档一直持续到下一个非注释行：

```
-- |This is a doc comment
--  which continues onto the next line. 
```

如果要生成指向文档其他部分的链接，请在函数名称周围使用单引号。如果要指定固定宽度的字体，请将文本括在`@`符号中。如果要指定代码块，请以 . 开头的注释行`-- >`。

这是一个从[GHC Base 源代码中提取的真实示例，该示例编译](http://hackage.haskell.org/packages/archive/base/latest/doc/html/src/GHC-Base.html)[到此页面](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-List.html#v%3amap)上的文档中。

```
-- | 'map' @f xs@ is the list obtained by applying @f@ to each element
-- of @xs@, i.e.,
--
-- > map f [x1, x2, ..., xn] == [f x1, f x2, ..., f xn]
-- > map f [x1, x2, ...] == [f x1, f x2, ...]

map :: (a -> b) -> [a] -> [b]
map _ []     = []
map f (x:xs) = f x : map f xs 
```

# iphone - 使用 yahoo Finance api 的付费 iphone 应用程序

> ID：11186724
> 
> 赞同：2
> 
> 时间：2012-06-25T09:32:33.673
> 
> 标签：iphone, ios, yahoo-finance

我知道之前有人问过类似的问题（http://stackoverflow.com/questions/4254405/finance-api-for-iphone-commercial-app-use），但我无法从那里或其他人那里得到答案帖子和雅虎网站。

我正在开发一个投资跟踪应用程序（付费），并正在考虑使用 Yahoo Finance API 在启动我的应用程序时获取一些股票报价，因此我的用户不必为他们输入的股票手动输入股票报价进入我的应用程序。API 所需的数据并不多。在某种程度上，我不会重新分发从雅虎财经下载的数据。在这种情况下使用 API 是否合法？

或者这里有没有人在付费应用程序中使用过 Yahoo Finance API 并可以给我建议？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:18:01.257

@Rick，我现在处于类似情况，我一直在对 Yahoo Finance 和 Yahoo YQL 进行一些研究：据我了解，YQL 是建立在 Yahoo Finance 之上的，YQL 是一个简化访问 Yahoo 的接口财务数据。此外，YQL 声明它可以免费用于商业用途，但您*确实需要*任何其他许可或许可才能使用您可能与 YQL 一起使用的任何其他服务。

因此，正如我所见，您可以使用 YQL，但您还需要某种授权才能从 Yahoo Finance 检索数据。

这个对吗？当雅虎就您对 YQL 的请求回信给您时，雅虎是否明确允许您使用来自雅虎财经的数据？

# jquery - javascript 获取/发布跨域限制和 facebook/google+ 类似框

> ID：11186725
> 
> 赞同：0
> 
> 时间：2012-06-25T09:32:33.763
> 
> 标签：jquery, facebook-like, cross-domain, jquery-get

据我所知，存在不允许您从外部 url 获取内容的跨域限制，为了克服这一点，我们使用服务器端脚本。

我想知道 facebook/google 如何克服这些限制，并使用 javascript 代码设法用这样的简单代码生成他们的like box：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=254277301328504";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

我问这个的原因是因为我正在构建一个虚拟聊天机器人，并希望用户只使用一个简单的 javascript 在他们的站点中生成机器人（在外部域上，他们不必使用服务器端脚本）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:57:36.197

> 据我所知，存在不允许您从外部 url 获取内容的跨域限制

不是通过“正常”的 XMLHttpRequest。但这并不意味着根本无法加载外部资源。JSONP 将是它如何工作的一个例子。

> 我想知道 facebook/google 如何克服这些限制

他们在您的页面内创建一个 iframe 元素，并将他们自己域中的文档加载到其中。因此，他们从该 iframe 内的页面与自己的域进行任何通信都没有问题——因为这种通信根本**不是**跨域的。

# database - 说数据读取操作不需要在事务内部运行是否正确？

> ID：11186727
> 
> 赞同：1
> 
> 时间：2012-06-25T09:33:06.053
> 
> 标签：database, transactions, acid

假设一个方法只从数据库中读取数据而不写入数据。这种方法是否总是不需要在事务中运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T12:03:00.993

在许多数据库中，从不在显式事务中的数据库读取的请求会隐式创建一个事务来运行该请求。

`SELECT`在 SQL 数据库中，如果您正在运行多个语句并且您不希望其他事务的更改显示在一个`SELECT`而不是较早的一个中，则您可能希望使用一个事务。在`SERIALIZABLE`事务隔离级别上运行的事务将跨多个语句呈现一致的数据视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T12:13:54.447

不。如果您没有阅读特定的隔离级别，您可能无法获得足够的保证。例如，行可能会消失或可能会出现新行。

即使对于单个语句也是如此：

```
select * from Tab
except select * from Tab 
```

这个查询实际上可以在并发修改的情况下返回行，因为它扫描表两次。

SQL Server：有一种简单的方法可以获得快速、非阻塞、非锁定、一致的读取：启用快照隔离并在快照事务中读取。AFAIK Oracle 也具有此功能。Postgres 也是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T09:47:02.093

事务的目的是回滚或提交对数据库所做的操作，如果您只是选择值并且不对数据进行任何更改，则不需要事务。

# java - android.database.sqlite.SQLiteCantOpenDatabaseException 仅适用于 MD_LIFETAB_P9516

> ID：11186734
> 
> 赞同：1
> 
> 时间：2012-06-25T09:33:30.390
> 
> 标签：java, android

在我的分析工具中，我可以看到 MD_LIFETAB_P9516 (Medion Lifetab) 出现大量崩溃。它们因下面给出的堆栈跟踪而崩溃。

但是，任何其他设备都不会发生这种情况。在分析中，我可以看到在所有情况下都有足够的可用磁盘空间。我的 DatabaseHelper 没什么特别的。有一个带有一些 execSQL 语句的 onCreate()，一个空的 onUpgrade() 和 truncateAll() 在以下行崩溃：

```
 SQLiteDatabase db = getWritableDatabase(); 
```

堆栈跟踪：

```
0   android.database.sqlite.SQLiteCantOpenDatabaseException: unable to open database file
1   at android.database.sqlite.SQLiteDatabase.dbopen(Native Method)
2   at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1013)
3   at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:986)
4   at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:1051)
5   at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:770)
6   at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:221)
7   at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:157)
8   at com.unitedinternet.portal.android.photo.database.DatabaseHelper.getWritableDatabase(DatabaseHelper.java:61)
9   at com.unitedinternet.portal.android.photo.database.DatabaseHelper.truncateAll(DatabaseHelper.java:162)
10  at com.unitedinternet.portal.android.photo.activity.LoginActivity.onAuthenticationResult(LoginActivity.java:195)
11  at com.unitedinternet.portal.android.photo.activity.LoginRunnable$1.run(LoginActivity.java:305)
12  at android.os.Handler.handleCallback(Handler.java:605)
13  at android.os.Handler.dispatchMessage(Handler.java:92)
14  at android.os.Looper.loop(Looper.java:137)
15  at android.app.ActivityThread.main(ActivityThread.java:4424)
16  at java.lang.reflect.Method.invokeNative(Native Method)
17  at java.lang.reflect.Method.invoke(Method.java:511)
18  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
19  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
20  at dalvik.system.NativeStart.main(Native Method) 
```

任何想法，可能导致问题的原因是什么？你会去哪里调查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:00:08.850

经过进一步调查，我发现在 ICS 更新后经常发生崩溃。他们以某种方式设法破坏了许多（全部？）应用程序的应用程序数据。

Medion 建议重新安装所有损坏的应用程序。似乎我们 3rd 方开发人员对此无能为力。

进一步阅读（德语）： [http ://www.n-droid.de/android-4-0-update-fur-medion-lifetab-probleme-und-losungsansatze-im-uberblick.html](http://www.n-droid.de/android-4-0-update-fur-medion-lifetab-probleme-und-losungsansatze-im-uberblick.html)

# ruby-on-rails-3 - 在 Rails API 调用中设计注销

> ID：11186739
> 
> 赞同：0
> 
> 时间：2012-06-25T09:33:56.087
> 
> 标签：ruby-on-rails-3, api, devise

我正在使用 rails 3.2 并使用 jquery mobile 和 handlebar 进行移动应用程序。我正在尝试使用 API 调用编写注销功能。

在我的 lib/extras/api/users.rb 中，我正在尝试执行设计的注销功能。

怎么写

现在我写喜欢

```
resource :users do
        delete '/sign_out' do
          authenticate!
          user = User.find(params[:id]) rescue not_found
          # What to write here to signout the user 
          end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T23:47:34.930

您可以使用 Warden（Devise 将其用于身份验证）通过首先指定一个辅助方法来注销用户，该方法将为您提供warden 对象：

```
def warden
  env['warden']
end 
```

然后从 api 您可以访问帮助程序并在其上应用以下方法以注销用户：

```
warden.logout 
```

# c# - 在 Crystal Reports 中添加不同的最后一页

> ID：11186743
> 
> 赞同：1
> 
> 时间：2012-06-25T09:34:19.607
> 
> 标签：c#, crystal-reports

我有一个 C# 2010 应用程序，其中包含使用 Crystal Reports for VS2010 创建的报表。其目的是为客户打印发票。我需要添加一个页面（每张发票都相同），显示客户支付发票的方法。

这基本上需要我在报告末尾添加一个与报告其余部分不同的页面。我怎样才能做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:37:23.267

如果 Crystal for VS2010 支持它，我不记得 100%，但 Crystal Reports 确实有定义报表页脚部分的选项。如果您激活此部分并在此之前配置分页符，这应该会产生您想要的效果。

*Vlad Schnakovszki 的补充：*

要防止页眉部分出现在最后一页上，请执行以下操作：

右键单击页脚部分，选择格式化部分。单击 Common 选项卡下的 Suppress (No Drill-Down) 旁边的按钮并放置此代码。

```
if pagenumber=TotalPageCount then true
else false 
```

*Bob Vale* - 或者把公式写成`pagenumber=TotalPageCount`

来源[在这里](http://www.dbforums.com/crystal-reports/1212970-how-suppress-page-header-footer-last-page.html)。

# windows-phone-7 - 如何使用 Windows Phone 应用程序调用 PHP 文件？

> ID：11186748
> 
> 赞同：-1
> 
> 时间：2012-06-25T09:34:35.390
> 
> 标签：windows-phone-7, windows-phone-7.1

我想使用 PHP 作为后端的远程 MySQL 数据库在 WP7 应用程序中创建一个简单的登录功能。我从未在 C# 中使用过它，所以我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T09:48:20.887

您可以使用[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)或[HttpWebRequest](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)类发出 Web 请求并获取响应。

这是有关如何发出请求并获得响应的示例代码

```
WebClient client = new WebClient();
client.DownloadStringCompleted += new DownloadStringCompletedEventHandler(client_DownloadStringCompleted);
client.DownloadStringAsync(new Uri("http://someurl", UriKind.Absolute)); 
```

异步响应处理程序在这里

```
void client_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
{
    var response= e.Result; // Response obtained from the web service  
} 
```

上面的示例适用于任何 Web 服务（可能是**PHP**或 jsp 或 asp 等）。

您需要做的就是发出正确的请求并处理响应

# http - 如果某些参数不是无效的，我应该响应什么 http 代码？

> ID：11186749
> 
> 赞同：3
> 
> 时间：2012-06-25T09:34:36.953
> 
> 标签：http, rest

我正在创建一些宁静的 api。有一个“注册”API，用户可以发布一个“电子邮件”和“姓名”和“密码”来注册。

在服务器端，我会先检查电子邮件是否已被使用。如果我发现该电子邮件已被使用，我应该回复什么 http 代码？

我现在回复 400（错误请求），但我不知道它是否正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T09:40:32.770

`400 Bad Request`是正确的，因为没有用于验证错误的特定 HTTP 代码。

在 REST API 中，通常您只需要返回四个 HTTP 错误代码：

*   401 未经授权的访问
*   404未知资源
*   405 表示不受支持的方法（例如，GET 可用但 POST 不可用）
*   其他400

# javascript - JavaScript 闭包中的内存泄漏风险

> ID：11186750
> 
> 赞同：27
> 
> 时间：2012-06-25T09:34:40.943
> 
> 标签：javascript, memory-leaks, cross-browser, closures

***解决了***

关于这个主题，网络上有很多相互矛盾的信息。感谢@John，我设法弄清楚闭包（如下所示）不是内存泄漏的原因，而且 - 即使在 IE8 中 - 它们并不像人们声称的那样普遍。事实上，我的代码中只发生了 1 次泄漏，事实证明这并不难修复。

从现在开始，我对这个问题的回答将是：
*AFAIK，IE8 唯一一次泄漏，是在全局对象上附加事件/处理程序时。( `window.onload`, `window.onbeforeunload`,...)。要解决这个问题，请参阅下面的答案。*

* * *

***巨大的*更新：**

我现在完全迷失了......经过一段时间的新旧文章和tuts挖掘后，我至少留下了一个巨大的矛盾。虽然其中一位JavaScript 大师（Douglas Crockford）说*：*

> 由于 IE 无法完成它的工作并回收循环，我们就必须这样做。如果我们明确地打破循环，那么 IE 将能够回收内存。根据微软的说法，闭包是内存泄漏的原因。这当然是非常错误的，但它会导致微软在如何应对微软的错误方面给程序员提供了非常糟糕的建议。事实证明，打破 DOM 端的循环很容易。在 JScript 端破坏它们几乎是不可能的。

正如@freakish 指出的，我下面的代码片段与jQuery 的内部工作原理相似，我对我的解决方案不会导致内存泄漏感到非常安全。同时我发现[了这个 MSDN 页面](http://msdn.microsoft.com/en-us/library/bb250448(v=vs.85).aspx)，我对这个部分`Circular References with Closures`特别感兴趣。下图几乎是我的代码如何工作的示意图，不是吗：

![带闭包的循环引用](../Images/3a69284a7b82e220d272b3a582233ac8.png)

唯一的区别是我有不将我的事件侦听器附加到元素本身的常识。
尽管如此，*Douggie*还是非常明确的：闭包不是 IE 中内存泄漏的来源。这种矛盾让我不知道谁是对的。

我还发现泄漏问题在 IE9 中也没有完全解决（找不到链接 ATM）。

*最后一件事*：我还了解到 IE 在 JScript 引擎之外管理 DOM，当我`<select>`根据 ajax 请求更改元素的子元素时，这让我感到很麻烦：

```
function changeSeason(e)
{
    var xhr,sendVal,targetID;
    e = e || window.event;//(IE...
    targetID = this.id.replace(/commonSourceFragment/,'commonTargetFragment');//fooHomeSelect -> barHomeSelect
    sendVal = this.options[this.selectedIndex].innerHTML.trim().substring(0,1);
    xhr = prepareAjax(false,(function(t)
    {
        return function()
        {
            reusableCallback.apply(this,[t]);
        }
    })(document.getElementById(targetID)),'/index/ajax');
    xhr({data:{newSelect:sendVal}});
}

function reusableCallback(elem)
{
    if (this.readyState === 4 && this.status === 200)
    {
        var data = JSON.parse(this.responseText);
        elem.innerHTML = '<option>' + data.theArray.join('</option><option>') + '</option>';
    }
} 
```

如果 IE 确实管理 DOM，就好像 JScript 引擎不存在一样，那么使用此代码不释放选项元素的可能性有多大？
我特意添加了这个片段作为示例，因为在这种情况下，我将作为闭包范围一部分的变量作为参数传递给全局函数。我找不到关于这种做法的任何文档，但根据 Miscrosoft 提供的文档，它应该会破坏任何可能发生的循环引用，不是吗？

* * *

* * *

**警告**：冗长的问题......（*对不起*）

我已经编写了几个相当大的 JavaScript 来在我的 Web 应用程序中进行 Ajax 调用。为了避免大量的回调和事件，我充分利用了事件委托和闭包。现在我编写了一个函数，让我想知道可能的内存泄漏。虽然我知道 IE > 8 比它的前辈更好地处理闭包，但公司政策仍然支持 IE 8。

下面我提供了一个我正在讨论的例子，[在这里](http://jsfiddle.net/6xsRv/)你可以找到一个类似的例子，虽然它不使用 ajax，而是一个 setTimeout，结果几乎相同。（您当然可以跳过下面的代码，直接到问题本身）

我想到的代码是这样的：

```
function prepareAjax(callback,method,url)
{
    method = method || 'POST';
    callback = callback || success;//a default CB, just logs/alerts the response
    url = url || getUrl();//makes default url /currentController/ajax
    var xhr = createXHRObject();//try{}catch etc...
    xhr.open(method,url,true);
    xhr.setRequestMethod('X-Requested-with','XMLHttpRequest');
    xhr.setRequestHeader('Content-type','application/x-www-form-urlencoded');
    xhr.setRequestHeader('Accept','*/*');
    xhr.onreadystatechange = function()
    {
        callback.apply(xhr);
    }
    return function(data)
    {
        //do some checks on data before sending: data.hasOwnProperty('user') etc...
        xhr.send(data);
    }
} 
```

除了`onreadystatechange`回调之外，所有的东西都非常简单。我在直接绑定处理程序时注意到 IE 的一些问题：`xhr.onreadystatechange = callback;`，因此是匿名函数。不知道为什么，但我发现这是使其工作的最简单方法。

正如我所说，我使用了很多事件委托，因此您可以想象访问触发 ajax 调用的实际元素/事件可能会很有用。所以我有一些看起来像这样的事件处理程序：

```
function handleClick(e)
{
    var target,parent,data,i;
    e = e || window.event;
    target = e.target || e.srcElement;
    if (target.tagName.toLowerCase() !== 'input' && target.className !== 'delegateMe')
    {
        return true;
    }
    parent = target;
    while(parent.tagName.toLowerCase() !== 'tr')
    {
        parent = parent.parentNode;
    }
    data = {};
    for(i=0;i<parent.cells;i++)
    {
        data[parent.cells[i].className] = parent.cells[i].innerHTML;
    }
    //data looks something like {name:'Bar',firstName:'Foo',title:'Mr.'}
    i = prepareAjax((function(t)
    {
        return function()
        {
            if (this.readyState === 4 && this.status === 200)
            {
                //check responseText and, if ok:
                t.setAttribute('disabled','disabled');
            }
        }
    })(target));
    i(data);
} 
```

如您所见，`onreadystatechange`回调是函数的返回值，它`target`在调用回调时提供对元素的引用。多亏了事件委托，当我决定从 DOM 中删除它时（我有时会这样做），我不再需要担心可能绑定到该元素的事件。
然而，在我看来，回调函数的调用对象可能对 IE 的 JScript 引擎及其垃圾收集器来说太过分了：

> Event ==> handler ==> prepareAjax 是一个非常正常的调用序列，但是回调参数：
> 
> [匿名。func（参数 t = 目标）返回 anon。F（可以访问 t ，而 t 又引用回目标）]
>    ===> 传递给匿名回调函数，使用 xhr 对象的 .apply 方法调用，进而将*私有*变量传递给 prepareAjax 函数

我已经在 FF 和 chrome 中测试了这个“结构”。它在那里工作得很好，但是这种在关闭时关闭时关闭的调用堆栈，每次传递对 DOM 元素的引用都会在 IE 中成为问题（尤其是 IE9 之前的版本）？

* * *

不，我不会使用 jQuery 或其他库。我喜欢纯 JS，并且想尽可能多地了解这种被严重低估的语言。代码片段不是实际的复制粘贴示例，而是为 IMO 提供了我如何在整个脚本中使用委托、闭包和回调的良好表示。因此，如果某些语法不完全正确，请随时纠正它，但这当然不是这个问题的内容。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-26T13:52:04.140

我曾经与微软的 JavaScript 前项目经理一起工作，在一个非浏览器的 EcmaScript (err.. JScr ... JavaScript) 项目上。我们就关闭进行了一些冗长的讨论。最后，关键是它们更难 GC，并非不可能。我必须阅读 DC 关于 MS 如何“错误”导致内存泄漏的讨论——因为在 IE 的旧实现中，闭包肯定是有问题的，因为它们很难**用 MS 实现**进行垃圾收集。我觉得奇怪的是，雅虎的人会试图告诉 MS 架构师，他们的代码的一个已知问题在其他地方。尽管我很欣赏他的工作，但我看不出他有什么依据。

请记住，您上面引用的文章指的是 IE6，因为在撰写本文时 IE7 仍在大力开发中。

顺便说一句——谢天谢地，IE6 已经死了（不要让我挖掘葬礼图片）。虽然，不要忘记它的遗产......我还没有看到有人提出可信的论点，说它在发布的第一天就不是世界上最好的浏览器——问题是他们赢得了浏览器大战. 因此，这相当于他们历史上最大的错误之一——他们随后解雇了这支球队，这支球队停滞了近 5 年。多年来，IE 团队只有 4 或 5 个人进行错误修复，这造成了巨大的人才流失并大大落后于曲线。当他们重新雇用团队并意识到他们所处的位置时，他们已经落后了数年，因为处理一个没人真正理解的单一代码库增加了麻烦。这是我作为公司内部人员的看法，

还要记住，IE 从来没有针对闭包进行过优化，因为没有 ProtoypeJS（哎呀，没有 Rails），而 jQuery 在 Resig 的头脑中几乎没有一丝曙光。

在撰写本文时，他们还针对具有 256 兆 RAM 的机器，这些机器也没有报废。

在让我读完你的整本书之后，我认为给你上这堂历史课是公平的。

最后，我的意思是你引用的材料已经过时了。是的，避免 IE6 中的闭包，因为它们会导致内存泄漏——但 IE6 中没有什么？

最后，这是一个 MS 已经解决并将继续解决的问题。您将进行某种程度的关闭，即使在当时也是如此。

我知道他们在 IE8 周围的这个领域做了大量的工作（因为我无法提及的项目使用了非当时的标准 JavaScript 引擎），并且这项工作一直持续到 IE9/10。StatCounter (http://gs.statcounter.com/) 表明 IE7 的市场份额已从一年前的 6% 下降到 1.5%，并且在开发“新”站点时，IE7 变得越来越不重要。您还可以为引入 JavaScript 支持的 NetScape 2.0 进行开发，但这只会稍微不那么愚蠢。

真的......不要为了不再存在的引擎而过度优化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T10:19:39.977

是的，在使用该工具一段时间后`IEJSLeaksDetector`，我发现我在最初的问题中谈到的内容***不会导致 MEM LEAKS***。但是，确实出现了 1 个泄漏。幸运的是，我设法找到了解决方案：

我有一个主脚本，在底部，有一个老派：

```
window.onload = function()
{
    //do some stuff, get URI, and call:
    this['_init' + uri[0].ucFirst()](uri);//calls func like _initController
    //ucFirst is an augmentation of the String.prototype
} 
```

这会导致 IE8 中的泄漏，我无法使用`window.onbeforeunload`处理程序修复。看来您必须避免将处理程序绑定到全局对象。解决方案在于闭包和事件监听器，这有点小题大做，但这是我最终做的：

```
(function(go)
{//use closure to avoid leaking issue in IE
    function loader()
    {
        var uri = location.href.split(location.host)[1].split('/');
        //do stuff
        if (this['_init' + uri[0].ucFirst()] instanceof Function)
        {
            this['_init' + uri[0].ucFirst()](uri);
        }
        if (!(this.removeEventListener))
        {
            this.detachEvent('onload',loader);//(fix leak?
            return null;
        }
        this.removeEventListener('load',loader,false);
    }
    if (!(go.addEventListener))
    {
        go.attachEvent('onload',loader);//(IE...
    }
    else
    {
        go.addEventListener('load',loader,false);
    }
})(window); 
```

这样，(on)load 事件就在`window.load`处理程序返回之前解除绑定，根据 IEJSLeaksDetector 工具，*我*的应用程序中没有泄漏。我对此很满意。我希望这个片段对你们中的某个人有用 - 如果有人有改进这种方法的建议，请不要犹豫！

干杯，感谢所有在上面阅读和尝试我运球的人！

* * *

PS：如果有人关心，这里是 ucFirst String 方法：

```
if (!(String.prototype.ucFirst))
{
    String.prototype.ucFirst = function()
    {
        "use strict";
        return this.charAt(0).toUpperCase() + this.slice(1);
    };
} 
```

# javascript - 这个javascript日期解析有什么问题？为什么js讨厌数字8？

> ID：11186751
> 
> 赞同：3
> 
> 时间：2012-06-25T09:34:55.970
> 
> 标签：javascript, jquery, parsing, date

我有一个包含格式日期的对象`YYYY-MM-DD`。

我正在提取各种年、月和日整数，以便将它们发送到不同的`API`.

这是我的方法的一个例子，使用`substr()`

**演示：http:** [//jsfiddle.net/AppSynergy/tELsw/](http://jsfiddle.net/AppSynergy/tELsw/)

好的，它有效。不好了！- 它不 - 不完全.. 第三个元素有什么问题，4 月 8 日的“08”决定为 0？

如果我将“08”更改为另一个整数，例如“03”，就可以了。但是“08”会引起问题..

这个快把我逼疯了——怎么了？

如果你能发现它，你应该得到冰淇淋。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T09:37:48.630

`08`默认情况下被视为（无效）[八进制](http://en.wikipedia.org/wiki/Octal)文字。

您必须在对[parseInt()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt)的调用中明确指定基数，以便将此标记视为十进制（以 10 为底）数：

```
$("#debug").append(parseInt(date.substr(5, 2), 10) + " / "); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T09:36:47.920

您需要`parseInt`与 radix/base of一起使用，`10`因为前面`0`将您的数字转换为八进制表示法。

```
parseInt(yourNum, 10); 
```

由于这个原因，事实证明你应该在使用时总是指定基数，`parseInt`除非你不是在处理基数`10`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T09:36:47.523

如果字符串以“0”开头，javascript 会认为基数是八（八进制）。

您需要告诉 javascript 以 10 为底来解析字符串。

```
$.each(testData, function(i, val) {
    // sort out the date format
    var date = val.trim();
    $('#debug').append(date+' ==><br />');
    $('#debug').append(parseInt(date.substr(0, 4), 10)+' / ');
    $('#debug').append(parseInt(date.substr(5, 2), 10)+' / ');
    $('#debug').append(parseInt(date.substr(8, 2), 10)+'<br /><br />');
}); 
```

# java - java.lang.NullPointerException at sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:1009)

> ID：11186755
> 
> 赞同：1
> 
> 时间：2012-06-25T09:35:19.590
> 
> 标签：java, mysql, hibernate, nullpointerexception

```
 java.lang.NullPointerException
       at sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:1009)
       at java.lang.Float.parseFloat(Float.java:439)
       at ConvertReadings.Convertd(ConvertReadings.java:39)
       at UDPServer.main(UDPServer.java:73) 
```

休眠cfg文件

```
<hibernate-configuration>
             <session-factory>

        <property name="connection.driver_class">
            com.mysql.jdbc.Driver</property>
        <property name="connection.url">
        jdbc:mysql://localhost:1111/DB</property>
        <property name="connection.username">username</property>
        <property name="connection.password">password</property>
        <property name="dialect">org.hibernate.dialect.MySQLDialect</property>
        <property name="connection.autoReconnect"> true</property>
            <property name="connection.autoReconnectForPools">true</property>
        <!--  <property name="c3p0.validate">true</property> -->
            <property name="current_session_context_class">thread</property>
            <property name="hibernate.format_sql">false</property>
            <property name="hibernate.connection.pool_size">5</property> 
            <property name="hibernate.c3p0.acquire_increment">1</property> 
        <property name="hibernate.c3p0.idle_test_period">1000</property> 
        <property name="hibernate.c3p0.max_size">5</property> 
        <property name="hibernate.c3p0.max_statements">0</property> 
        <property name="hibernate.c3p0.min_size">3</property> 
        <property name="hibernate.c3p0.timeout">5000</property> 
```

ConvertReadings 代码是

```
public class ConvertReadings {
public String Convertd(String a, String b, String c1, String c0 ) throws Exception
{
    Converter con= new Converter();
    int x;
    double i = Float.parseFloat(a);
    if (b.equalsIgnoreCase("HUM"))
    {
        double c=Float.parseFloat(c1);
        double d=Float.parseFloat(c0);
        x=con.convert(c, d, i);
        return String.valueOf(x);
    }
    else if (b.equalsIgnoreCase("CO"))
    {
        double c=Float.parseFloat(c1);;
        double d=Float.parseFloat(c0);
        x=con.convert(c, d, i);
        return String.valueOf(x);
}
    return "Invalid sensor reading";
}
} 
```

我遇到异常的代码是

```
import java.util.Iterator;
import org.hibernate.HibernateException;
import org.hibernate.Query;
import org.hibernate.SessionFactory;
import org.hibernate.classic.Session;
public class FetchCoeff {
public SessionFactory factory;
public String[] testing(String x, String y) { ///here x=DevID and y= sensor type
//Session session= null ;
String c[] = new String[30];
Session session = factory.openSession(); 
    try{
String q= "SELECT d.c1, d.c0, d.DevID, d.SensorType FROM SensorReadings d WHERE d.DevID= :DevID AND d.SensorType= :SensorType";
Query query = session.createQuery(q);
query.setParameter("DevID",x);
query.setParameter("SensorType", y);
System.out.println("query executed");
for(Iterator it=query.iterate();it.hasNext();){
      Object[] ob = (Object[]) it.next();       // I am Facing problem here
        c[1]= (String)ob[0];  // contains coeff 1 c1
        c[0]= (String)ob[1];  // contains coeff 0 c0    
     }
}catch(HibernateException e){
    System.out.println("Hibernate exception occured");
    e.printStackTrace();
}catch(Exception d){
    System.out.println("exception occured");
    d.printStackTrace();
}
finally
{
session.close();
}
return c;
}
} 
```

几周前我已经发布了它，我从“JB Nizet”那里得到了解决方案，但它只解决了一部分，现在我在下面的部分面临空指针异常

```
 for(Iterator it=query.iterate();it.hasNext();){
             Object[] ob = (Object[]) it.next();
                c[1]= (String)ob[0];
                c[0]= (String)ob[1]; 
```

我认为这个对象正在抛出空指针异常，但我不知道如何解决它。任何人都可以在这方面帮助我.. 在这里我创建了查询和迭代结果集并将其传递给字符串数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:59:38.073

如果我理解正确，您正在多次执行上述方法，并且在一些调用之后，它会引发上述异常。

问题可能来自这样一个事实，即您正在阅读 Hibernate 配置并在每次方法调用时创建一个带有新连接池的全新会话工厂。

以下应该做一次且只做一次。然后应该在每次方法调用时重用相同的会话工厂：

```
Configuration cfg= new Configuration();
cfg.configure("Hibernate.cfg.xml");
SessionFactory sessionfactory = cfg.buildSessionFactory(); 
```

# ios - addChildViewController 和 presentModelViewController 有什么区别

> ID：11186758
> 
> 赞同：11
> 
> 时间：2012-06-25T09:35:32.687
> 
> 标签：ios, view, pushviewcontroller, presentmodalviewcontroller, addchild

我知道有三种方法可以改变 iOS 中的视图

1.

```
[self addChildViewController:thirdViewController]; 
[contentView addSubview:thirdViewController.view]; 
```

2.

```
First * sVC = [[First alloc] initWithNibName:@"First" bundle:[NSBundle mainBundle]]; 
[self presentModalViewController:sVC animated:YES]; 
```

3.

```
MyViewController *sampleViewController = [[[MyViewController alloc]initWithXXX] autorelease];       
[self.navigationController pushViewController: sampleViewController animated:true]; 
```

pushViewController 需要导航控制器，我理解。但是，何时使用 addChildViewController 和 presentModalViewController？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-25T09:41:16.113

这是四种完全不同的实现

*   `addChildViewController`在 iOS5 中用于执行 viewController 包含，这将使您能够轻松创建自己的`NavigationCotrollers`或`TabControllers`仅在 iOS5 中可用

*   `addSubview`是三个中的最低级别，这只会将一个视图添加到另一个视图中，作为一个孩子

*   `presentModalViewController`用于在屏幕上以模态方式呈现 viewController，从而覆盖旧的

*   `pushViewController`用于`UINavigationController`将新的 ViewController 推送到 viewcontrollers 堆栈，

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T09:41:49.483

1) 作为 Apple 范式转变的一部分引入 iOS 5 以允许视图控制器层次结构，它只是在当前视图控制器前面放置一个视图控制器。您必须管理控制器的流程。

2) 与 one 相同，只是一次只能为一个视图控制器完成。实际上，这种方法已被`[self presentViewController:animated:completion:]`

3) 将视图控制器添加到列表中，这样您可以在点击“返回”后返回到前一个。iOS 将为您管理控制器的流程。

# c# - WCF 列表 在客户端生成的代码上创建自己的 Stream:MarchalByRefObj 类型

> ID：11186759
> 
> 赞同：1
> 
> 时间：2012-06-25T09:35:34.913
> 
> 标签：c#, wcf, serialization, datacontractserializer

我正在创建一个 WCF 服务，我必须为其发送一个列表作为请求，

```
[MessageContract]
public class DocumentMergerRequest
{
     [MessageHeader]
     public OutputDocumentFileFormat OutputFileFormat;
     [MessageBodyMember(Order = 1)]
     public List<Stream> DocumentsToMerge;
} 
```

Stream 是`System.IO.Stream`，当我尝试使用该服务时，客户端生成的代码包含

```
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Xml", "4.0.30319.225")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(Namespace="http://schemas.datacontract.org/2004/07/System.IO")]
public partial class Stream : MarshalByRefObject {
} 
```

生成的 Stream 是 type`MarshalByRefObject`而不是`System.IO.Stream`.

我怎样才能解决这个问题。

# sql - 插入表格

> ID：11186762
> 
> 赞同：0
> 
> 时间：2012-06-25T09:35:41.850
> 
> 标签：sql, sql-server-2008

我试图简单地在表中添加一些数据，但我收到一个错误：

```
Msg 110, Level 15, State 1, Line 1
There are fewer columns in the INSERT statement than values specified in the VALUES clause. The number of values in the VALUES clause must match the number of columns specified in the INSERT statement. 
```

这是我正在使用的

```
INSERT INTO dbo.ReModalities
(ModalityId, Name, Description)
VALUES
(
    1,'A','A.',
    2,'B','B.'
); 
```

这应该让您了解表格列

```
INSERT INTO [XXX].[dbo].[ReModalities]
           ([ModalityId]
           ,[Name]
           ,[Description])
     VALUES
           (<ModalityId, int,>
           ,<Name, nvarchar(64),>
           ,<Description, nvarchar(256),>)
GO 
```

另外我想知道是否有办法避免输入 ID（表有 PK，所以它们应该自动创建）非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T09:36:44.557

语句的每一行都`values`应该用括号括起来。尝试：

```
VALUES
    (1,'A','A.'),
    (2,'B','B.'); 
```

如果 ID 具有默认值或者是`identity`，则可以省略它：

```
insert  dbo.ReModalities
        (Name, Description)
values  ('A','A.'),
        ('B','B.'); 
```

# selenium - 我应该如何为将在 selenium 服务器上运行的 Yii Web 应用程序编写功能测试？

> ID：11186769
> 
> 赞同：20
> 
> 时间：2012-06-25T09:36:11.300
> 
> 标签：selenium, yii, selenium-ide, functional-testing, htmlsuite

我目前正在为我的新项目建立一个开发环境，我正在努力思考一件事。我打算使用 Yii。我想让功能测试自动化，我已经有了 gerrit 和 Jenkins，正在工作。

我读[了这篇笔记](http://www.labelmedia.co.uk/blog/posts/setting-up-selenium-server-on-a-headless-jenkins-ci-build-machine.html)，发现 selenium 有类似 html 套件的东西。我以前从未听说过它，我总是编写通过 PHPUnit 运行的测试。[我使用了这里描述的](http://www.yiiframework.com/doc/guide/1.1/en/test.functional)默认 Yii 功能测试环境。

所以我的问题是，这两种方法的优缺点是什么？我已经可以想到 html 套件的优点和缺点。Pro 是，编写测试真的很容易——你只需在 Selenium IDE 中“单击”它们。缺点是，我可能必须在测试之前运行 db 固定装置，而我无法更改它们，或者像运行它们一样 - 加载固定装置、运行测试、加载固定装置、运行测试，但我想这会使测试变得很多邋遢。你怎么看/你在这件事上的经验是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-18T04:30:17.893

有一种编写功能测试的简单方法。你可以为[selenium IDE](https://addons.mozilla.org/en-us/firefox/addon/selenium-ide-button/)下载一个插件，然后为这个插件添加[php 格式化程序](https://addons.mozilla.org/en-us/firefox/addon/selenium-ide-php-formatters/)，你可以非常容易地制作和导出功能测试。

那么你应该配置你的 protected/config/test.php 和 protected/tests/bootstrap.php

您可能应该编辑 protected/tests/phpunit.xml 并删除除火狐之外的任何浏览器。

然后像 Willem Renzema 说的那样做，改变这个插件所做的测试，把类的名字改成 WebTestCase 并删除 setUp()

然后你就可以运行测试了！

干杯

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-01T18:44:04.433

与 Yii 完美集成的两个软件包是 PhPUnit 和 Selenium Remote Control。所以这两个在 Yii 开发者之间比较常见。

关于部署功能测试，我不确定你想走多远，但就我使用它而言，这很容易。功能测试，实际上是从 CWebTestCase 扩展而来的 php 类。 [Yii CWebTestCase 类描述](http://www.yiiframework.com/doc/api/1.1/CWebTestCase)

命名约定是您必须将类命名为以 Test 结尾的类，例如 ExampleTest.php，并将文件存储在 protected/tests/functional 下。您需要设置所有内容，包括软件包以及更改 Yii 配置文件和默认浏览器。如果一切顺利，样本测试可以是这样的：

```
class ExampleTest extends WebTestCase
{

public function testContact()
{
    $this->open('?r=site/contact');
    $this->assertTextPresent('A string on contact page');
    $this->assertElementPresent('name=ContactForm[name]');
    $this->type('name=ContactForm[name]','tester');
    $this->type('name=ContactForm[email]','tester@example.com');
    $this->type('name=ContactForm[subject]','test subject');
    $this->click("//input[@value='Submit']");
    $this->waitForTextPresent('Body cannot be blank.');
}
} 
```

这就是我所知道的一切，我希望它有所帮助。

# c# - 覆盖在服务器端定义的 JQGrid 参数

> ID：11186771
> 
> 赞同：0
> 
> 时间：2012-06-25T09:36:15.460
> 
> 标签：c#, javascript, jquery-plugins, jqgrid

我正在处理使用 C# 在服务器端通过 JQGrid 生成的表的 CSS。我试图覆盖客户端的布局定义（例如宽度）（当然是在代码中生成服务器端表之后），但什么也没得到。唯一有效的是创建一个全新的 jqgrid 对象，这显然会使所有服务器端定义无效，所以它没有用。

有没有办法以某种方式在客户端重新生成对象的 JavaScript 副本，然后对其应用更改？

非常欢迎您的友好帮助。

编辑：这是用于使用 C# 生成表的代码：

```
 this.projectGrid = new JQGrid
        {
            Columns = new List<JQGridColumn>()
            {
                new JQGridColumn { Visible=true,
                                   Editable=false,
                                 //  Width=70,
                                   DataField="compliance_colour",
                                   HeaderText="Comp.",
                                   Searchable=false,
                                    Formatter = new CustomFormatter
                                                             {
                                                              FormatFunction = "formatCmpImage"

                                                             }

                },
                new JQGridColumn{ DataField="ProjectID",
                                  PrimaryKey=true,
                                  Visible=true,
                                  Editable=false,
                                  HeaderText="ID",
                                //  Width=50,
                                  Searchable=false
                },
                new JQGridColumn{ DataField="OpsRegion",
                                  Visible=true,
                                  Editable=false,
                                  HeaderText="Ops Region",
                               //   Width=180,
                                  Searchable=false

                },
                  new JQGridColumn{DataField="customer",
                                 Visible=true,
                                 Editable=false,
                                 HeaderText="Customer Name",
                               //  Width=180,
                                 Searchable=false

                },
                  new JQGridColumn{ DataField="projectName",
                                  Visible=true,
                                  Editable=false,
                                  HeaderText="Project Name",
                                //  Width=300,
                                  Searchable=false,
                                  Formatter = new CustomFormatter
                                                             {
                                                              FormatFunction = "formatLink",

                                                             }

                },

                new JQGridColumn{DataField="projectManager",
                                 Visible=true,
                                 Editable=false,
                                 HeaderText="Project Manager",
                              //   Width=110,
                                    Searchable=false
                },
                new JQGridColumn{DataField="status",
                                 Visible=true,
                                 Editable=false,
                                 HeaderText="Status",
                              //   Width=70,
                                 Searchable=false

                },
                new JQGridColumn {DataField="type",
                                  Visible=true,
                                  Editable=false,
                                  HeaderText="Type",
                             //     Width=70,
                                  Searchable=false

                },
                new JQGridColumn {DataField="favorite",
                                  Visible=true,
                                  Editable=false,
                                  HeaderText="Favorite",
                              //    Width=60,
                                  Searchable=false,
                                  Formatter = new CustomFormatter
                                                                {
                                                                    FormatFunction = "formatFvImage",
                                                                    UnFormatFunction = "unformatCell"
                                                                }

                },
                 new JQGridColumn {DataField="compliance_reason",
                                  Visible=false      
                },
                 new JQGridColumn {DataField="lastUpdate",
                                  Visible=true,
                                  Editable=false,
                               //   Width=60,
                                  HeaderText="Last Update",
                                  Searchable=false,
                                  Formatter = new CustomFormatter
                                                                {
                                                                    FormatFunction = "formatReportLink",
                                                                    UnFormatFunction = "unformatCell"
                                                                }

                },
            },
           Width = Unit.Pixel(1400),
            ShrinkToFit=true,
            Height = Unit.Pixel(520),

        }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:49:12.667

如果您需要更改`width`网格，可以使用[setGridWidth](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3amethods)方法。要覆盖许多其他 jqGrid 选项，您可以`setGridParam`改用。您可以在创建网格*后使用这些方法。*一般来说，如果有人存在确切的选项（如, , , ...） ，您应该使用 jqGrid[方法。](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3amethods)如果您发现没有特殊的 jqGrid 方法来更改选项，您可能应该使用方法。`setCaption``setGridHeight``setColProp``setGridParam`

# cocoa - 显示与 setNeedsDisplay

> ID：11186773
> 
> 赞同：2
> 
> 时间：2012-06-25T09:36:23.463
> 
> 标签：cocoa, osx-lion, quartz-2d

我注意到我在 Mac OS X 10.7 上基于 Cocoa 的应用程序存在一个奇怪的问题。由于某种原因（这里不重要），有时我必须在自定义视图的 drawRect 方法之外进行绘制。

我必须在我的视图上调用 lockFocus/lockFocusIfCanDraw，询问当前上下文，使用 CGContext 系列函数（CoreGrapchis）进行实际绘图，最后执行 CGContextFlush（我也可以刷新窗口，或使用 NSGraphicsContext 类方法来执行冲洗）。

这个顺序实际上和我调用 NSView 的 -display 方法一样。

问题是......它比“自然”方式慢 3-4 倍（当 Cocoa 要求你这样做时，调用 setNeedsDisplay 或从 drawRect 绘制）。例如，我不能简单地调用 setNeedsDisplay 来获取视图，我需要这种“-display -like”功能。

在一个测试示例（使用计时器）中，为简单起见，我调用 -display（因为它通常与我的应用程序所做的工作相同）vs -setNeedsDisplay，我可以看到'-display' 的时间是 3-比“-setNeedsDisplay”长 4 倍。

这是我的 CustomView 类（实现）的示例：

```
#import <QuartzCore/QuartzCore.h>

#import "CustomView.h"

@implementation CustomView
{
   CFTimeInterval startTime;
   NSTimer *timer;
   unsigned step;
}

- (id)initWithFrame:(NSRect)frame
{
    return [super initWithFrame : frame];
}

- (void)drawRect:(NSRect)dirtyRect
{
   CGContextRef ctx = (CGContextRef)[[NSGraphicsContext currentContext] graphicsPort];

   if(!timer)
   {
      CGContextSetRGBFillColor(ctx, 1., 1., 1., 1.);
      CGContextFillRect(ctx, dirtyRect);
   }
   else
   {
      CGContextSetRGBFillColor(ctx, 0., 0., 0., 1.);
      CGContextFillRect(ctx, CGRectMake(step * 1.5, 100, 2., 2.));
   }
}

- (void) mouseDown : (NSEvent *)theEvent
{
   if (!timer)
   {
      startTime = CACurrentMediaTime();
      timer = [NSTimer scheduledTimerWithTimeInterval : 0.006 target : self selector : @selector(handleTimer:) userInfo : nil repeats : YES];
      step = 0;
   }
}

- (void) handleTimer : (NSTimer *) dummy
{
   if(step < 200)
   {
      ++step;
#if 1
      [self display];
#else
      [self setNeedsDisplay : YES];
#endif
   }
   else 
   {
      [timer invalidate];
      timer = nil;
      NSLog(@"animation time is: %g", CACurrentMediaTime() - startTime);
   }
}

@end 
```

我认为即使 CACurrentMediaTime 对我的目的来说不是很好的功能，它仍然可以显示明显的时差（并且在没有任何测量的情况下很容易注意到 - 显示速度真的很慢）。handleTimer 方法有两个部分 - 如果您在 pp-directive 中将“1”更改为“0”，则可以同时尝试 -display/-setNeedsDisplay。因此，例如，我有以下输出：

-显示：3.32 秒。（？）

-setNeedsDisplay：1.2 秒。

我查看了由“仪器”应用程序生成的调用树/花费的时间，但它对我没有多大帮助。

编辑： **嗯，我现在可以看到：实际上，setNeedsDisplay 视图不会在每个计时器事件上重新绘制！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:39:12.327

无需下拉到 drawRect 方法中的 CG 函数。

这段代码是等价的：

```
- (void)drawRect:(NSRect)dirtyRect
{
   if(!timer)
   {
      [[NSColor whiteColor] set];
      NSRectFill(dirtyRect);
   }
   else
   {
      [[NSColor blackColor] set];
       NSRectFill(NSMakeRect(step * 1.5, 100.0, 2.0, 2.0));
   }
} 
```

至于-display和-setNeedsDisplay，前者使绘制立即发生，后者设置一个标志，每次通过事件循环，如果该标志为真，窗口将发送-display到有问题的视图并清除旗帜。

还有一件事：这种使用 NSTimer 驱动动画的方法有点过时了。你应该阅读 Core Animation 上的文档来学习如何做这种事情。

# c++ - 如何创建一个非常愚蠢的 QWidget？

> ID：11186783
> 
> 赞同：0
> 
> 时间：2012-06-25T09:36:50.727
> 
> 标签：c++, qt

我需要一个`QWidget`不做任何事情的“哑巴”，只提供一个`HWND`并且可以作为孩子添加到其他`QWidget`s 中。具体来说，它不应该尝试管理鼠标光标（这是我简单实例化 a 的问题`QWidget`）。*（动机：我有一个就地激活的 ActiveX 控件，它有时会尝试更改鼠标光标，但 QWidget 将其更改回默认值，所以它在闪烁）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:01:00.887

更改光标的代码不在 QWidget 中，因此没有 QWidget 更改可以解决问题。是 QApplication 从内部`QApplication::dispatchEnterLeave(...)`. 最终，它`qt_win_set_cursor`完成了这项工作。

我不明白如何在不改变 Qt 源的情况下改变这种行为。

我建议将报告作为 Qt 错误。Qt 应该检查在离开外星小部件时是否更改了本机光标，如果是这样，则需要保留它。如果您提供补丁来实际修复问题，您将有更好的机会快速修复错误。

**解决方法：**为防止闪烁，请使用`QApplication::setCursorOverride()`. 这修复了闪烁，但不会修复无法更改光标的控件。

# jquery - 如何调整 jQuery 文本框自动扩展插件

> ID：11186786
> 
> 赞同：1
> 
> 时间：2012-06-25T09:36:56.333
> 
> 标签：jquery, textbox

[我在StackOverflow Page](https://stackoverflow.com/questions/931207/is-there-a-jquery-autogrow-plugin-for-text-fields/11183906#11183906)找到了一个 jQuery 插件，可以在用户从文本输入中粘贴/删除数据时自动扩展/收缩文本框。在我尝试将大量文本粘贴到其中之前，它工作正常。然后它根本不会扩展。但是，如果我继续输入字符，或者即使我粘贴少量文本，它也可以正常工作。任何人都可以告诉我如何调整它以同时扩展，即使粘贴了大量数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:35:10.067

您的问题是由于插件处理最大宽度的方式。

如果单个操作（例如粘贴）导致元素的宽度超过最大值，则插件不会将宽度扩展到最大值，而是保持原样。

为了解决这个问题，我修改了代码以在计算新宽度时考虑最大宽度：

```
// Calculate new width + whether to change
var testerWidth = testSubject.width(),
    newWidth = Math.min((testerWidth + o.comfortZone) >= minWidth
        ? testerWidth + o.comfortZone : minWidth, o.maxWidth - 1); 
```

[您将在此处](http://jsbin.com/awojer/)找到更新的 jsbin 。

# magento - Magento 错误：SQLSTATE [HY000] [2013] 在“读取初始通信数据包”时丢失与 MySQL 服务器的连接，系统错误：113

> ID：11186787
> 
> 赞同：0
> 
> 时间：2012-06-25T09:36:57.460
> 
> 标签：magento

我已经将magento网站从一台服务器复制到另一台服务器并完成了所有必要的更改，现在当我打开我的新网站时出现以下错误

处理您的请求时出错

出于安全原因，默认情况下禁用异常打印。

错误日志记录号：1237612538

它首先显示错误的数量是

```
a:4:{i:0;s:115:
"SQLSTATE[HY000] [2013] Lost connection to MySQL server at 'reading initial communication packet', system error: 113"
;i:1;s:2374:"
#0 /home/content/32/9503032/html/lib/Zend/Db/Adapter/Pdo/Mysql.php(96): Zend_Db_Adapter_Pdo_Abstract->_connect() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T02:47:34.420

这是解决方案：

您确定在 xml 文件中更改的 db 凭据正确吗？

1 .用用户名和密码重新检查数据库凭据是否正确？

1.  文件权限

2.  编译模式启用/禁用

3.  清除缓存

4.  清除会话

试试看

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-06T04:29:09.990

如果你想更详细的错误，你可以改变一点步骤如下去 Magento 文件夹

1.  Magento 文件夹
2.  错误
3.  local.xml.sample 到 local.xml
4.  刷新页面。您将看到更详细的错误。

# c# - 获取子元素的所有属性

> ID：11186794
> 
> 赞同：3
> 
> 时间：2012-06-25T09:37:12.693
> 
> 标签：c#, xsd

`XmlSchema`我在获取子元素的属性时遇到问题。

有一个`abstactElement`和一个`concreteElement`扩展了`abstractElement`. 使用 .获取基地的属性可以正常工作`XmlSchemaComplexType.BaseXmlSchemaType`。但是`concreteElement`使用 's 属性`XmlSchemaComplexType.Attributes`是行不通的。

这是我的示例 XML-Schema 文件：

```
<xs:schema id="XMLSchema1"
    targetNamespace="http://tempuri.org/XMLSchema1.xsd"
    elementFormDefault="qualified"
    xmlns="http://tempuri.org/XMLSchema1.xsd"
    xmlns:mstns="http://tempuri.org/XMLSchema1.xsd"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
>
    <xs:element name = "ConcreteElement" type="concreteElement" />

    <xs:complexType name="abstractElement">
        <xs:attribute name="aA1" type="xs:string" />
        <xs:attribute name="aA2" type="xs:string" />
        <xs:attribute name="aA3" type="xs:string" />    
    </xs:complexType>

    <xs:complexType name="concreteElement">
        <xs:complexContent>
            <xs:extension base="abstractElement">
                <xs:attribute name="cA1" type="xs:string"/>
                <xs:attribute name="cA2" type="xs:string"/>
                <xs:attribute name="cA3" type="xs:string"/>
            </xs:extension>    
        </xs:complexContent>
    </xs:complexType>
</xs:schema> 
```

我想获取`ConcreteElement`（cA1，cA2，cA3）的所有属性及其基本元素（aA1，aA2，aA3）的所有属性。

我的代码如下所示：

```
public Program()
{
    XmlSchema xsd =
          XmlSchema.Read(
              new StreamReader("/Path/To/My/Xsd/File.xsd"),
              null);

    var xss = new XmlSchemaSet();
    xss.Add(xsd);
    xss.Compile();

    XmlSchemaElement xsdRoot = null;
    /* Get the root element */
    foreach (DictionaryEntry curEle in xsd.Elements)
    {
        var xse = (XmlSchemaElement)curEle.Value;
        xsdRoot = xse;
        break;
    }

    List<XmlSchemaAttribute> lsAttributes = this.GetAllAttributes(
                          xsdRoot.ElementSchemaType as XmlSchemaComplexType);
    foreach (XmlSchemaAttribute curAtr in lsAttributes)
    {
        Console.WriteLine(curAtr.Name);
    }

    Console.ReadKey();
} 
```

这是我的`GetAllAttributes`方法：

```
private List<XmlSchemaAttribute> GetAllAttributes(
    XmlSchemaComplexType comCon)
{
    /* No Ancestor, no Attributes */
    if (comCon == null)
    {
        return new List<XmlSchemaAttribute>();
    }

    /* Get attributs of the acestors */
    List<XmlSchemaAttribute> allAttributes =
        this.GetAllAttributes(
            comCon.BaseXmlSchemaType as XmlSchemaComplexType);

    /* Ad the attributes of the given element */
    allAttributes.AddRange(comCon.Attributes.Cast<XmlSchemaAttribute>());

    return allAttributes;
} 
```

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T09:09:38.253

最后的解决方案是使用 Property `AttributeUses`，它包含一个元素的所有属性，甚至那些属于祖先的属性。

```
private List<XmlSchemaAttribute> GetAllAttributes(
    XmlSchemaComplexType comCon)
{        
    List<XmlSchemaAttribute> allAttributes = new List<XmlSchemaAttribute>();

    /* Add the attributes of the given element */
    foreach (DictionaryEntry curAttriEntry in comCon.AttributeUses)
    {
        XmlSchemaAttribute curAttri =
            curAttriEntry.Value as XmlSchemaAttribute;

        if (curAttri != null)
        {
            allAttributes.Add(curAttri);
        }
    }

    return allAttributes;
} 
```

# ruby - Ruby : %w 性能

> ID：11186797
> 
> 赞同：2
> 
> 时间：2012-06-25T09:37:24.897
> 
> 标签：ruby, arrays, performance

也许是一个简单的问题，但我们正在讨论使用这个sniper是否更好：

```
if %w(production staging).include?(Rails.env) 
```

相对

```
if ["production","staging"].include?(Rails.env) 
```

我们只想了解哪种方式最高效，忽略 Ruby 的语法。从我在网络上的内容来看， %w 文字似乎是提供的空白字符串上 string.split 的简写。

但实际上哪一个是最快的？

ps：答案的来源将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T09:57:27.837

以下是直接取自（有遗漏）的内容`%w`和操作：`%W``parse.y`

```
case '%':
[snip]
  switch (c) {
    [snip]
    case 'W':
      lex_strterm = NEW_STRTERM(str_dword, term, paren);
      do {c = nextc();} while (ISSPACE(c));
      pushback(c);
      return tWORDS_BEG;

    case 'w':
      lex_strterm = NEW_STRTERM(str_sword, term, paren);
      do {c = nextc();} while (ISSPACE(c));
      pushback(c);
      return tQWORDS_BEG; 
```

考虑到它是在解析器级别实现的，我不会太担心性能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T09:49:38.047

我在我的 c2d 上做了一些测试：

```
ruby -e "10000000.times { ['one', 'two'].include?('two')}"  
8.04s user 0.05s system 90% cpu 8.912 total

ruby -e "10000000.times { %w(one two).include?('two')}"  
8.03s user 0.05s system 93% cpu 8.608 total 
```

# android - 使用蓝牙打印机从 android 应用程序打印数据

> ID：11186798
> 
> 赞同：1
> 
> 时间：2012-06-25T09:37:28.850
> 
> 标签：android, bluetooth

我开发了一个应用程序，其中有一个活动，我需要填写一些详细信息，然后通过蓝牙打印机使用蓝牙打印该数据。

我已经实现了打开设备蓝牙的代码，扫描范围内的蓝牙设备。

谁能指导我如何进一步进行？

我已经阅读了用于打印`google cloud print`的内容。任何人都可以指导我谷歌云打印对我有用吗？

# postgresql - 在函数结果“错误：类型 0 的缓存查找失败”中使用 pgsql_fdw

> ID：11186800
> 
> 赞同：0
> 
> 时间：2012-06-25T09:37:32.403
> 
> 标签：postgresql

我们想使用 pgsql_fdw 来选择一个远程 postgresql 数据库的表。当我们在会话中选择表时没问题，但是当我们在函数中使用外部表时，结果显示“错误：类型 0 的缓存查找失败”。有人知道为什么吗？

## 一、基地资料

```
skytf=> \d ft_test;
       Foreign table "skytf.ft_test"
 Column |         Type          | Modifiers 
--------+-----------------------+-----------
 id     | integer               | 
 name   | character varying(32) | 
Server: pgsql_srv

skytf=> \des+ pgsql_srv
                                                List of foreign servers
   Name    | Owner | Foreign-data wrapper | Access privileges | Type | Version |                Options                 
-----------+-------+----------------------+-------------------+------+---------+----------------------------------------
 pgsql_srv | skytf | pgsql_fdw            |                   |      |         | {host=127.0.0.1,port=1923,dbname=mydb}
(1 row) 
```

## 2.目标表

```
mydb=> \d test
             Table "mydb.test"
 Column |         Type          | Modifiers 
--------+-----------------------+-----------
 id     | integer               | 
 name   | character varying(32) | 
Indexes:
    "idx_test_1" btree (id) 
```

## 3.功能

```
 CREATE or replace FUNCTION  func_sync_bill() RETURNS INTEGER  AS $$
    BEGIN

     begin
      insert into test_tf (id,name) select id,name from ft_test;
      return 1;
     end; 
    END;
  $$ LANGUAGE 'plpgsql'; 
```

## 4\. 它在会话中工作

```
skytf=> create table test_tf(id integer,name varchar(32));
CREATE TABLE

skytf=> insert into test_tf select * from ft_test;
INSERT 0 1990000 
```

## 5.函数调用错误

```
skytf=> truncate table test_tf;
TRUNCATE TABLE

skytf=> select func_sync_bill();
ERROR:  cache lookup failed for type 0
CONTEXT:  SQL statement "insert into test_tf (id,name) select id,name from ft_test"
PL/pgSQL function "func_sync_bill" line 5 at SQL statement 
```

当我调用将选择外部表的函数 func_sync_bill() 时，它会生成错误。

这是 pgsql_fdw 的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:01:44.960

看起来像是外部数据包装器或 plpgsql 或其他东西中的错误。鉴于`\d`命令正在工作，我希望目录很好，这表明真正的问题是数据损坏，尽管它在函数之外工作的事实表明情况可能并非如此。

解决问题的方法是尝试将您的函数重写为 SQL 语言函数而不是 plpgsql，看看是否能解决问题。如果是这样，你有一个解决方法。还可以尝试更新最新的 PostgreSQL 次要版本。如果问题解决了，那就太好了。但如果不是这样，则向项目报告错误可能会导致问题得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T09:40:35.813

```
 Finaly I use dynamic statements avoid the problem. 
```

**--动态语句**

```
skytf=> CREATE or replace FUNCTION  func_sync_bill() RETURNS INTEGER  AS $$
skytf$>     BEGIN
skytf$>      begin
skytf$>         EXECUTE 'insert into test_tf (id,name) select id,name from ft_test';
skytf$>        return 0;     
skytf$>      end; 
skytf$>     END;
skytf$> $$ LANGUAGE 'plpgsql';    
CREATE FUNCTION 
```

**- 再试一次**

```
skytf=> truncate table test_tf;
TRUNCATE TABLE

skytf=> select func_sync_bill();
 func_sync_bill 
----------------
              0
(1 row)

skytf=> select count(*) from test_tf;
  count  
---------
 1990000
(1 row) 
```

# javascript - 循环根据长度准确迭代，但每次迭代都插入相同的记录

> ID：11186802
> 
> 赞同：1
> 
> 时间：2012-06-25T09:37:35.557
> 
> 标签：javascript, jquery, servlets, for-loop

我正在使用带有 Java servlet 的[Datatables.net ：](http://datatables.net/)

```
$(document).ready(function () {
    $('#dayClosing').click(function () {
        $.post("RecallHoldTrx", {
            TrxHoldID: oData[0]
        }, function (data2) {
            for (k = 0; k < data2.length; k++) {
                var getItemCode = data2[k];
                $.post("GetItemDetail", {
                    itemCode: getItemCode
                }, function (data) {
                    oTable.fnAddData([data[0], data[1]]);
                });
            }
        });
    });
}); 
```

循环根据它的长度准确地迭代，但每次迭代都插入相同的记录；但是

当我`alert()`把`var getItemCode = data2[k];`as

```
var getItemCode = data2[k];
alert(getItemCode); 
```

当我按确定，确定时，每次迭代都会准确地在数据表中插入新行。但是当我删除警报时，在每次迭代中插入相同的记录，有时是第一条记录，有时是最后一条记录。

我们如何在没有警报的情况下插入包含新数据的行？

注意：[oTable.fnAddData()](http://datatables.net/api)用于在[Datatables.net中添加行](http://datatables.net/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T19:54:37.560

首先，我建议在第一个 ajax 响应中发送所有数据。如果可以由一个人完成，为什么要进行如此多的 ajax 调用？

我认为您的范围界定有问题。你可以使用 $.each 来循环你的结果集。像这样：

```
$(document).ready(function () {
    $('#dayClosing').click(function () {
        $.post("RecallHoldTrx", {
            TrxHoldID: oData[0]
        }, function (data2) {
            $.each(data2,function(index,item) {
                $.post("GetItemDetail", {
                    itemCode: item
                }, function (data) {
                    oTable.fnAddData([data[0], data[1]]);
                });
            });
        });
    });
}); 
```

# java - 将变量声明为某种类型

> ID：11186807
> 
> 赞同：7
> 
> 时间：2012-06-25T09:38:15.337
> 
> 标签：java, casting, type-conversion

假设我们有以下代码块：

```
if (thing instanceof ObjectType) {
    ((ObjectType)thing).operation1();
    ((ObjectType)thing).operation2();
    ((ObjectType)thing).operation3();
} 
```

所有的类型转换使代码看起来很难看，有没有办法在该代码块内将“事物”声明为 ObjectType？我知道我能做到

```
OjectType differentThing = (ObjectType)thing; 
```

并从那时起使用“不同的东西”，但这会给代码带来一些混乱。有没有更好的方法来做到这一点，可能是这样的

```
if (thing instanceof ObjectType) {
    (ObjectType)thing; //this would declare 'thing' to be an instance of ObjectType
    thing.operation1();
    thing.operation2();
    thing.operation3();
} 
```

我很确定这个问题过去曾被问过，但我找不到。请随时指出可能的重复项。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T09:41:22.677

不，一旦声明了变量，该变量的类型就固定了。我相信更改变量的类型（可能是暂时的）会带来*比*以下更多的混乱：

```
ObjectType differentThing = (ObjectType)thing; 
```

您认为令人困惑的方法。这种方法被广泛使用和惯用 - 当然，在所有需要它的地方。（这通常有点代码味道。）

另一种选择是提取方法：

```
if (thing instanceof ObjectType) {
    performOperations((ObjectType) thing);
}
...

private void performOperations(ObjectType thing) {
    thing.operation1();
    thing.operation2();
    thing.operation3();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T09:41:24.640

一旦声明了一个变量，它的类型就不能改变。你的`differentThing`方法是正确的：

```
if (thing instanceof ObjectType) {
    OjectType differentThing = (ObjectType)thing;
    differentThing.operation1();
    differentThing.operation2();
    differentThing.operation3();
} 
```

我也不会说它令人困惑：只要`differentThing`变量的范围仅限于`if`运算符的主体，读者就很清楚发生了什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T09:46:05.337

可悲的是，这是不可能的。

原因是此范围内的“事物”将始终具有相同的对象类型，并且您无法在代码块中对其进行重铸。

如果你不喜欢有两个变量名（比如 thing 和 castedThing），你总是可以创建另一个函数；

```
if (thing instanceof ObjectType) {
    processObjectType((ObjectType)thing);
}
..

private void processObjectType(ObjectType thing) {
    thing.operation1();
    thing.operation2();
    thing.operation3();
} 
```

# python - Python“if”语句语法错误

> ID：11186811
> 
> 赞同：-1
> 
> 时间：2012-06-25T09:38:48.930
> 
> 标签：python, syntax, if-statement

我对我得到的错误感到困惑。

我的代码如下：

```
result = getString(argument_x)
print result # it returns "PASS"
if result ="PASS" 
```

当我尝试启动它时，它显示最后一行的错误：

```
SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T09:39:36.510

相等性的比较是使用`==`运算符完成的（您使用的是一个`=`仅用于分配的单个）。此外，您缺少一个冒号：

```
if result == "PASS": 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-25T19:51:34.533

许多 Python 结构，如 if、while 和 for，都需要一个终止冒号`:`，并且后面的行必须全部缩进在同一级别。

缩进级别并不重要，因为与条件关联的所有语句都必须在同一级别缩进。

在您的情况下，您使用的是 if 语句：

```
result = getString(argument_x)
print result # it returns "PASS"
if result == "PASS":
  print("Result equals pass")
#Add any other statements here to be executed as a result
#of result == "PASS" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T09:39:46.270

你需要一个`colon`在行尾，这样`if result == "PASS":`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-05-14T16:50:50.330

您在 if 语句之后错过了冒号运算符。

```
result = getString(argument_x)
print result # it returns "PASS"
if result == "PASS":
    print 'something' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-09T10:35:08.617

您在 if 语句之后错过了冒号运算符。

```
result = getString(argument_x)
print result # it returns "PASS"
if result == "PASS":
   print 'something' 
```

# c# - LINQ to SQL 更新中的默认值（C# 变量）问题

> ID：11186813
> 
> 赞同：1
> 
> 时间：2012-06-25T09:39:02.773
> 
> 标签：c#, .net, sql-server, linq, linq-to-sql

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T09:44:09.640

这应该这样做：

```
int number = 4;
var acc1 = new accountRepository.Accounts.Where(a => a.Number == number).FirstOrDefault();

if (acc1 == null)
{
    // Not found by ID, create new
    acc1 = new RepositoryLayer.Account();
    acc1.Number = number;
    accountRepository.Accounts.AddObject(acc1);
}

acc1.AccountType = "Verify";

accountRepository.SubmitChanges(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T05:50:49.217

# ruby - 在 Ruby 中覆盖 == 运算符

> ID：11186815
> 
> 赞同：41
> 
> 时间：2012-06-25T09:39:18.563
> 
> 标签：ruby, overriding, equality

根据[文档](http://www.ruby-doc.org/core-1.9.3/Array.html)，`Array.include?`使用`==`对象的比较。我来自Java，这些事情（通常）完成`.equals()`，很容易为特定对象覆盖。

如何`==`在 Ruby 中重写以允许我`Array.include?`为我的特定对象指定行为？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-06-25T09:43:06.940

在 Ruby`==`中只是一种方法（顶部有一些语法糖，允许您编写`foo == bar`而不是），并且您可以像使用任何其他方法一样`foo.==(bar)`覆盖：`==`

```
class MyClass
  def ==(other_object)
    # return true if self is equal to other_object, false otherwise
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-09T14:31:39.570

如上所述，`==`是 Ruby 中的一个方法，可以被覆盖。您在方法中编写自定义相等条件。例如：

```
class Person
  attr_reader :name, :gender, :social_id
  attr_accessor :age

  def initialize(name, age, gender, social_id)
    self.name = name
    self.age = age.to_i
    self.gender = gender
    self.social_id = social_id
  end

  def ==(other)
    social_id == other.social_id
  end
end 
```

您不再需要覆盖其他方法。

# yii - Yii - 无法呈现静态页面 - 找不到索引错误

> ID：11186816
> 
> 赞同：1
> 
> 时间：2012-06-25T09:39:19.203
> 
> 标签：yii

试图遵循这个： [http ://www.yiiframework.com/wiki/22/how-to-display-static-pages-in-yii/](http://www.yiiframework.com/wiki/22/how-to-display-static-pages-in-yii/)

为了让我完全清楚这一点。

脚步：

**1)**

在这个剧院控制器上，我们创建了一个名为 actions 的方法：

```
 public function actions() {
            return array(
                'region'=>array('class'=>'CViewAction')
            );
        } 
```

**2)**

在 app/view/theater/ 上，我们将创建一个名为“region”的新文件夹，我们的静态页面应该驻留在其中；

**3)**

然后我们应该像这样编辑菜单？

```
$this->widget('zii.widgets.CMenu', 
                array('items'=>array(
                    array(
                        'label'=>'Specifc Theater A',
                        'url'=>array('theater/region/nomeofmyfilewithoutextension')
                    ),
                    array(
                      'label'=>'Specific Theater B',
                      'url'=>array('theater/region/nomeofmyfilewithoutextension')
                    ),

... 
```

**4)**

为了避免出现登录页面： 在我们的剧院控制器上，我们应该在我们的 accessRules 上允许一些对“区域”的访问；

我越来越：

> 未找到请求的视图“索引”。

请问有什么帮助吗？

我们应该在 config.php 上配置路由吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:07:08.150

`myfile`应该是参数的`view`参数。

它应该是`url=>array('/theather/region', 'view'=>'myfile')`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T10:08:58.637

您需要`pages`按照该站点上的说明创建文件夹：

```
/view/theater/pages/region.php 
```

你链接到这个页面就像

```
/theater/page/view/region 
```

# wpf - 创建一个应用程序，对同一个 Web 应用程序具有多个视图，但使用不同的凭据？

> ID：11186817
> 
> 赞同：2
> 
> 时间：2012-06-25T09:39:22.997
> 
> 标签：wpf, webbrowser-control

我希望构建一个 WPF（或 Windows 窗体，如果它可以解决问题），它可以同时显示具有不同凭据的同一网页（它是具有复杂用户操作流的 Web 应用程序的测试工具）。

到目前为止，我有一个非常简单的 WPF 应用程序：

```
<Window x:Class="TestTool.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="600" Width="800">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <WebBrowser Margin="8" Source="http://theapptotest" />
        <WebBrowser Margin="8" Source="http://theapptotest" Grid.Column="1" />
    </Grid>
</Window> 
```

这不是应用程序的目标布局，但它可以测试我的目标是否可行。

正如预期的那样，该应用程序并排显示同一个 Web 应用程序。但是，如果我登录第一个 Web 浏览器控件，则第二个也会登录。我想这是因为 cookie 是为当前用户共享的。

我检查了[WebBrowser 类文档](http://msdn.microsoft.com/en-us/library/system.windows.controls.webbrowser.aspx)，但没有发现任何有用的东西。

我怎样才能达到我的目标？

是否可以将一个浏览器与其他浏览器“隔离”？

是否可以“模拟”用户控件？就像某些应用程序（主要是 Web 浏览器）正在生成不同的进程一样，我可以在不同的帐户下“生成”进程并将其显示在我的主窗口中吗？

请注意，我不必与网页交互。我只想通过更改我的应用程序的一个选项卡（每个用户一个选项卡）来切换用户。

**PS：**我不坚持使用 Internet Explorer 引擎，如果存在替代浏览器的解决方案，请告诉我

**PS：**目标应用程序使用两种身份验证机制。用户可以使用 Windows 帐户或基于自定义表单的身份验证进行身份验证。如果需要，我只能使用表单身份验证（如果我可以插入它，一个单独的 cookie 容器可以完成这项工作）。

**[编辑]**我尝试使用其他用户凭据生成 Internet Explorer 的新实例，然后通过将其父窗口设置到我的一个 Windows 窗体主机来附加进程主窗口。然而，这是非常不可靠的（进程经常崩溃，如果任何现有的 IE 实例正在运行，则无法工作，等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:01:04.220

[好的，在Simon Mourrier 之前的回答](https://stackoverflow.com/a/5070001/588868)的帮助下，我终于找到了实现目标的方法。

我创建了一个自定义用户控件：

Xaml 部分：

```
<UserControl x:Class="WpfApplication1.AppIsolatedView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" SizeChanged="UserControl_SizeChanged"
             d:DesignHeight="300" d:DesignWidth="300" Loaded="UserControl_Loaded" Unloaded="UserControl_Unloaded">
    <Grid>
        <WindowsFormsHost Margin="12" Name="windowsFormsHost1" />

    </Grid>
</UserControl> 
```

有了这段代码：

```
using System;
using System.ComponentModel;
using System.Diagnostics;
using System.Runtime.InteropServices;
using System.Threading;
using System.Windows;
using System.Windows.Controls;

namespace WpfApplication1
{
    public partial class AppIsolatedView : UserControl
    {
        public AppIsolatedView()
        {
            InitializeComponent();   
            _panel = new System.Windows.Forms.Panel();
            windowsFormsHost1.Child = _panel;    
        }

        string url = "http://theapptotest";   
        System.Windows.Forms.Panel _panel;
        Process _process;    

        private void UserControl_Loaded(object sender, RoutedEventArgs e)
        {
            if (IsInDesignModeStatic) return; // Avoid consumer of the control to explode when in design mode

            ProcessStartInfo psi = new ProcessStartInfo("iexplore.exe", "-noframemerging -private \"" + url + "\"");
            _process = Process.Start(psi);
            _process.WaitForInputIdle();
            Thread.Sleep(2000);
            SetParent(_process.MainWindowHandle, _panel.Handle);

            // remove control box
            int style = GetWindowLong(_process.MainWindowHandle, GWL_STYLE);
            style = style & ~WS_CAPTION & ~WS_THICKFRAME;
            SetWindowLong(_process.MainWindowHandle, GWL_STYLE, style);

            // resize embedded application & refresh
            ResizeEmbeddedApp();

        }

        private void UserControl_Unloaded(object sender, RoutedEventArgs e)
        {
            if (_process != null)
            {
                _process.Refresh();
                _process.Close();
            }

        }

        private void ResizeEmbeddedApp()
        {
            if (_process == null)
                return;

            SetWindowPos(_process.MainWindowHandle, IntPtr.Zero, 0, 0, (int)_panel.ClientSize.Width, (int)_panel.ClientSize.Height, SWP_NOZORDER | SWP_NOACTIVATE);
        }

        protected override Size MeasureOverride(Size availableSize)
        {
            Size size = base.MeasureOverride(availableSize);
            ResizeEmbeddedApp();
            return size;
        }

        private static bool? _isInDesignMode;

        /// <summary>
        /// Gets a value indicating whether the control is in design mode (running in Blend
        /// or Visual Studio).
        /// </summary>
        public static bool IsInDesignModeStatic
        {
            get
            {
                if (!_isInDesignMode.HasValue)
                {
#if SILVERLIGHT
            _isInDesignMode = DesignerProperties.IsInDesignTool;
#else
                    var prop = DesignerProperties.IsInDesignModeProperty;
                    _isInDesignMode
                        = (bool)DependencyPropertyDescriptor
                        .FromProperty(prop, typeof(FrameworkElement))
                        .Metadata.DefaultValue;
#endif
                }

                return _isInDesignMode.Value;
            }
        }

        private void UserControl_SizeChanged(object sender, SizeChangedEventArgs e)
        {
            ResizeEmbeddedApp();

        }
        #region pinvoke stuff
        [DllImport("user32.dll")]
        private static extern int SetWindowLong(IntPtr hWnd, int nIndex, int dwNewLong);

        [DllImport("user32.dll", SetLastError = true)]
        private static extern int GetWindowLong(IntPtr hWnd, int nIndex);

        [DllImport("user32")]
        private static extern IntPtr SetParent(IntPtr hWnd, IntPtr hWndParent);

        [DllImport("user32")]
        private static extern bool SetWindowPos(IntPtr hWnd, IntPtr hWndInsertAfter, int X, int Y, int cx, int cy, int uFlags);

        private const int SWP_NOZORDER = 0x0004;
        private const int SWP_NOACTIVATE = 0x0010;
        private const int GWL_STYLE = -16;
        private const int WS_CAPTION = 0x00C00000;
        private const int WS_THICKFRAME = 0x00040000;
        #endregion
        }
} 
```

我必须作弊：

*   为了避免内部 IE 会话共享，我必须`-noframemerging`在触发时添加。`IExplore.exe`
*   启动该过程后，我必须睡一会儿。不知道确切原因，但在`MainWindowHandle`几毫秒后属性会发生变化（我猜 iexplore 有一个引导程序进程来连接到现有进程或产生一个新进程，使用新句柄或类似的东西）。

我仍然必须扩展用户控件以接受输入参数（url 是硬编码的），但想法就在这里。我只需要专注于应用程序本身。

# c - 如何证明 const char *p 与 char const *p 相同？

> ID：11186819
> 
> 赞同：2
> 
> 时间：2012-06-25T09:39:26.543
> 
> 标签：c

如何通过代码或内存空间模型或任何其他方式证明 const char *p 与 char const *p 相同。例如，我定义：

```
const char *p;
char const *p; 
```

现在从哪里我可以知道它们具有相同的效果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T09:44:53.863

这是一个风格比什么都重要的问题。

至于证明部分：它们是等价的，因为语言规则确保两种语法具有*相同*的语义。因此，*需要*实现以确保它们具有相同的效果。您可能想阅读 Stroustrup 的常见问题解答项目：[我应该将“const”放在类型之前还是之后？](http://www.stroustrup.com/bs_faq2.html#constplacement)（尽管请注意，C 和 C++ 是不同的语言，后者大量借鉴了前者，直到今天确实试图保持兼容性。）

关键字是一个例外，`const`因为在这种情况下，C 标准委员会从 C++ 中借用了一些东西并将其改进为 C。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T10:15:54.223

为了证明这一点，您可以查看标准，您可以通过在网上搜索 n1570.pdf 找到它的最佳近似值。在那里，您看到该术语`declaration specifiers`是递归定义的，如

```
declaration-specifiers:
type-specifier declaration-specifiers(opt)
type-qualifier declaration-specifiers(opt) 
```

（加上其他东西）。从中您可以推断出`type-qualifier`可能写在 之前或之后`type-specifier`。

# iphone - 为 iPhone sdk 中的应用程序定制键盘？

> ID：11186820
> 
> 赞同：2
> 
> 时间：2012-06-25T09:39:33.813
> 
> 标签：iphone, objective-c, ios, xcode, uikeyboard

我正在开发一个应用程序，其中我需要 3 个键盘，它应该看起来像 iPhone 默认键盘，如 F1、F2...f12、导航按钮、命令按钮，所以我的问题是。

1.  我是否可以使用 iPhone 键盘并编辑或添加额外功能或任何其他 API 来扩展键盘功能？
2.  我应该制作自己的键盘，例如添加`UIView`和添加按钮吗？
3.  如果我使用自己的，苹果会接受我的应用程序在 iTunes 上上传吗？请清除我的，如果您有任何帮助材料，请与我分享。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T09:47:30.417

> 我是否可以使用 iPhone 键盘并编辑或添加额外功能或任何其他 API 来扩展键盘功能？

您可以通过在其上方添加其他视图来扩展它，例如带有其他按钮的工具栏，它不会在键盘内部，而只会在键盘上方

> 我应该制作自己的键盘，比如添加 UIView 和添加按钮吗？

您可以创建自定义键盘，例如计算器应用程序中使用的键盘，因此它可以是带有自定义键的 uiview

> 如果我使用自己的，苹果会接受我的应用程序在 iTunes 上上传吗？请清除我的，如果您有任何帮助材料，请与我分享。提前致谢。

如果您的自定义键盘没有误导并且以正确的方式完成，那么它不应该被拒绝，请阅读以下[自定义 iPhone 键盘](https://stackoverflow.com/questions/1610542/custom-iphone-keyboard)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T09:45:16.003

1.  没有为 iPhone 原生键盘提供额外特性和功能的 api
2.  您可以使用`VSKeypadView`
3.  Apple 将接受该应用程序，因为应用商店中有许多应用程序实现了自定义键盘

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-11T17:46:40.957

您会注意到 UITextView 和 UITextField 都有以下形式的可选变量：

```
public var inputView: UIView?
public var inputAccessoryView: UIView? 
```

您应该进一步研究如何使用它们。我认为特别是 inputAccessoryView ，您可以将额外的按钮放入其中。

# android - 在画布上绘制大图像，同时保持缩放质量

> ID：11186822
> 
> 赞同：3
> 
> 时间：2012-06-25T09:39:35.740
> 
> 标签：android

我正在开发一个 android 项目并想创建一个交互式世界地图。
**期望的结果**：能够放大和缩小地图以及“滑动移动”的能力。该地图将只是一个图像，可能设置为背景，或首先在画布上绘制。在地图上将绘制人物位置（该应用程序将跟踪游戏、电影、书籍中的人物），因此人们的位置会经常更改并重新绘制图片。然后将显示结果。
我的第一个问题是当我尝试加载图像并将其绘制在画布上时。我的图像大约是 5000x5000 像素，我得到了

```
06-25 10:40:28.053: E/AndroidRuntime(1217): java.lang.OutOfMemoryError: bitmap size exceeds VM budget 
```

我已经阅读[了在 Android 中从文件中解码 Bitmap 的一部分，](https://stackoverflow.com/questions/10651881/decode-a-part-of-bitmap-from-file-in-android)希望这样的解决方案可以解决，但是在阅读响应时它似乎不起作用...
Q1：有没有办法加载大图像，绘制就可以了，然后在android中显示结果？
Q2：如果是这样，怎么做？
Q3：如果这不起作用，或者太难了，你能推荐一个替代方案吗？
提前感谢您的帮助！

# flash - 在 flv 的缩略图大小播放器方面需要帮助？

> ID：11186825
> 
> 赞同：0
> 
> 时间：2012-06-25T09:39:36.497
> 
> 标签：flash

我们需要一个缩略图大小的 flv 播放器，就像在 bing 中一样。

就像您将鼠标悬停在此 bing 搜索结果[Bing 搜索结果上](http://www.bing.com/videos/search?q=cat&go=&qs=n&form=VBREQY&pq=cat&sc=0-0&sp=-1&sk=)

是否已经有现有的播放器，或者我们需要自己制作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:56:45.983

是的，它可能，只需为创建的视频播放器对象提供适当的高度和宽度。您将看到一个小型视频播放器（与您在问题评论中的链接中看到的相同）。此外，在将 Flash 文件嵌入到您的网页时，在嵌入时提供上述指定的高度、宽度。这将确保您的 div（包含 Flash）不大于您的视频帧。干杯

# c# - 如何建立一个可以被2个线程同时访问的队列？

> ID：11186829
> 
> 赞同：1
> 
> 时间：2012-06-25T09:40:10.083
> 
> 标签：c#, .net

我需要一个可以由 2 个线程同时访问的队列，一个线程可以将一个项目入队，而另一个线程可以将另一个项目出队。班级是否`Queue<T>`符合这个要求？或者我应该从头开始实现它（例如使用像[这样](https://stackoverflow.com/questions/6839425/what-will-be-the-critical-section-code-for-a-shared-queue-accessed-by-two-thread)的单个生产者/消费者循环队列实现）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T09:45:37.990

如果您正在使用`.NET 4.0`，您可以使用[ConcurrentQueue](http://msdn.microsoft.com/en-us/library/dd267265.aspx)。这是推荐的方法。

关于`Queue<T>`其本身，MSDN 页面说明如下（向下滚动到该`Thread Safety`部分：

> 只要集合不被修改，一个队列可以同时支持多个读取器。即便如此，通过集合枚举本质上不是线程安全的过程。为了保证枚举过程中的线程安全，可以在整个枚举过程中锁定集合。要允许集合被多个线程访问以进行读写，您必须实现自己的同步。

除了这些解决方案，您还可以实现自己的线程安全队列。实现线程安全的一种方法是不变性（尽管这将涉及一些锁定）。您可以在 Eric Lippert 的博客中阅读有关编写不可变队列的信息，请[点击此处](http://blogs.msdn.com/b/ericlippert/archive/2007/12/10/immutability-in-c-part-four-an-immutable-queue.aspx)。或者，您可以使用[基于 F# 的数据类型](http://msdn.microsoft.com/en-us/library/ee353413.aspx)，其中大多数是不可变的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T09:44:16.800

如果您正在从您提到的生产者/消费者那里实现消费者，那么[BlockingCollection](http://msdn.microsoft.com/en-us/library/dd267312.aspx)是您的朋友。否则，正如其他人所说，[ConcurrentQueue](http://msdn.microsoft.com/en-us/library/dd267265)。BlockingCollection 允许您在没有要删除的元素时调用 .Take() 并将其阻塞，从而允许使用 .Take() 来简化消费者循环`while (true)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T09:43:05.810

[`ConcurrentQueue`](http://msdn.microsoft.com/en-us/library/dd267265.aspx)如果您运行的是 .NET 4，最简单的方法是直接使用Microsoft 提供的。:)

# excel - Globals.ThisAddIn.Application.Visible 总是返回 false

> ID：11186830
> 
> 赞同：1
> 
> 时间：2012-06-25T09:40:11.600
> 
> 标签：excel, vba, c#-4.0, vsto, excel-addins

我试图找出 Excel 的可见性并根据它进行一些活动。但这两个总是返回错误。

```
Globals.ThisAddIn.Application.ActiveWindow.Visible

Globals.ThisAddIn.Application.Visible 
```

任何想法为什么它总是错误的？我删除了我机器中的所有 Excel 插件，然后创建了一个全新的插件，但它仍然是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:53:20.113

是的，我也记得 Word 2010 的这个问题。很久以前它被作为一个错误提交，我不确定它是否已被纠正。如果您有权访问此链接，请查看此链接。

**主题**： Word 2010 的 VSTO 加载项在 ThisAddIn_Startup() 中显示 Application.Visible = False

**链接**：[http ://connect.microsoft.com/VisualStudio/feedback/details/541094/vsto-add-in-for-word-2010-shows-application-visible-false-in-thisaddin-startup](http://connect.microsoft.com/VisualStudio/feedback/details/541094/vsto-add-in-for-word-2010-shows-application-visible-false-in-thisaddin-startup)

但是，在 Word 2007 中看不到这种行为。如果需要，您可以使用 Excel 2007 进行检查，看看是否是这种情况。

**跟进**

**快照**

![在此处输入图像描述](../Images/39b73b754d82cbc12dbc7374175cfe51.png)

# biometrics - 多模式生物识别

> ID：11186834
> 
> 赞同：0
> 
> 时间：2012-06-25T09:40:25.787
> 
> 标签：biometrics

我很难绘制 ROC 曲线。因为他们以百分比绘制 GAR v/s FAR（对于生物识别中的单模双模）。我想知道 GAR 和 FAR 是如何计算的？以及它是如何绘制在 ROC 曲线中的？

作为参考，我附上了一个情节。！[在此处输入图像描述][1]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T15:01:35.993

*多模*/*单模*是什么意思？是*多式联运*/*单式联运*吗？如果是，绘制单一或多模式生物特征的 ROC 曲线是相似的......

当您评估您的生物识别系统时，您获得了两种分数：

*   内部分数（生物特征参考与同一用户的查询之间的比较）
*   间分数（生物特征参考与其他用户查询之间的比较）

假设您的系统使用阈值 t，分数是距离。

*   如果计算高于 t 的内部分数的数量，然后将其除以内部分数的总数，则获得 FRR。
*   如果计算低于或等于 t 的国米得分的数量，然后将其除以国米得分的总数，则得到 FAR。
*   GAR 是 1-FRR

如果对多个阈值重复该过程，则每次都会获得几个 (GAR,FAR)。

然后你只需要绘制每对（FAR，GAR）。绘图方法当然取决于您的实现语言......

互联网上有大量的实现可以用不同的语言显示 ROC 曲线。你应该搜索一下

# java - 为什么我的 web start 应用程序找不到现有文件？

> ID：11186838
> 
> 赞同：0
> 
> 时间：2012-06-25T09:40:44.697
> 
> 标签：java, windows, jenkins, java-web-start

我们使用 Jenkins-Slave 来执行 Selenium Gui 测试。从站使用 WebStart 启动并在 Windows 7 机器上运行。该测试包含下载 PDF 文件，应通过查找其中的文本来检查其是否存在以及正确性。问题是，正在运行的 Selenium 测试看不到 firefox 下载的文件。事实上，该过程似乎没有在目录中看到任何文件。

如果我在本地机器上直接从 IDE 执行测试，而不是使用 Jenkins 或 WebStart，测试运行得很好。

我已经考虑过以下几点：

*   我在检查错误的目录吗？不，我复制`file.getAbsolutePath()`到 Windows 资源管理器，可以看到文件。我也很确定我在正确的机器上。
*   是时间问题吗？例如，文件没有完成下载吗？不，我使用 WebDriverWait 并等待 30 秒来查找文件，而实际上创建和下载 PDF 需要大约 1 秒：

    ```
    WebDriverWait wait = new WebDriverWait(driver, 30, 1000);
       wait.until(new Predicate<WebDriver>(){
         public boolean apply(WebDriver driver){
           try{
             log.info("file: " + pdfFile.getAbsolutePath() + ", exists: " + pdfFile.exists() + ", size: " + pdfFile.length());
             // test files content ...
           }
           catch (IOException e){
             return false;
           }
         }
       }); 
    ```

有谁知道可能出了什么问题？欢迎大胆猜测……

**更新** 我检查了 jenkins.jnlp 文件，它包含“所有权限”，因此它应该能够访问文件系统。

```
<security>
   <all-permissions/>
</security> 
```

**更新 2** 明确一点：我使用 Jenkins 运行 Selenium 测试。Selenium 远程控制 Firefox，同时下载 PDF 文件。问题是，Java 进程，例如我的测试类找不到文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:19:24.313

您如何在 Windows 7 上运行 Jenkins？您是否将其安装为服务？你检查过这个常见问题列表吗？[https://wiki.jenkins-ci.org/display/JENKINS/My+software+builds+on+my+computer+but+not+on+Jenkins](https://wiki.jenkins-ci.org/display/JENKINS/My+software+builds+on+my+computer+but+not+on+Jenkins)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:12:14.217

改变我的相对路径：

```
new File("downloads/"); 
```

通过调用“getAbsoluteFile”或只使用“C:...”到绝对值：

```
new File("downloads/").getAbsoluteFile(); 
```

解决了问题~~（但我不明白为什么）~~。这是因为 Jenkins 设置了 user.id 并且由于 java.io.File 实现中的错误，这可能会导致问题。请参阅[此其他 SO 问题](https://stackoverflow.com/questions/2275362/java-file-exists-inconsistencies-when-setting-user-dir)和[此 Java 错误报告](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4117557)。

# .net - .NET 中的 HTTP 端口扫描

> ID：11186839
> 
> 赞同：1
> 
> 时间：2012-06-25T09:40:46.690
> 
> 标签：.net, http, port

假设我知道使用非标准 HTTP 端口的机器/设备的 IP 地址。.NET 中是否可以扫描所述设备的端口 - 不仅仅是查找其开放端口 - 而是查找用于 HTTP 的特定端口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:43:55.510

是的，您可以连接到每个端口（找到打开的端口），如果它是打开的，您可以向它发送 HTTP 请求，如果它响应，您就知道该端口对 HTTP 是打开的。

# python - func(*tuple) 'scatters' 元组，但是 func(**dictionary) 是如何工作的呢？

> ID：11186841
> 
> 赞同：0
> 
> 时间：2012-06-25T09:41:07.733
> 
> 标签：python, dictionary, args, keyword-argument

让我们创建一个简单的元组、字典和函数。

```
>>> tup = (7, 3)
>>> dic = {"kw1":7, "kw2":3}
>>> def pr(a, b):
...    print a, b 
```

下面显示了`*`在元组和字典作为参数之前所做的事情。

```
>>> pr(tup)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: pr() takes exactly 2 arguments (1 given)

>>> pr(*tup)  
7 3   

>>> pr(*dic)
kw1 kw2 
```

现在让我们`**`在争论之前尝试一下。

```
>>> pr(**tup)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: pr() argument after ** must be a mapping, not tuple 
```

好的，似乎 ** 仅在将字典用作参数时才有效。那么让我们用字典来试试吧。

```
>>> pr(**dic)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: pr() got an unexpected keyword argument 'kw1' 
```

什么？谁能给我看一个不会产生错误的最后一种情况的例子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T09:54:25.260

要添加到其他答案，您可以使用`*args`和`**kwargs`到您的函数定义来支持任意参数。这可能会使代码不那么明确。但出于调试目的、灵活性和开发速度，采用以下方法可能是有意义的：

（函数定义中的`*`/`**`符号类似于函数调用时参数解包操作的“逆”操作。）

```
def foo(*args, **kwargs): 
    for v in args: 
        print v
    for v in kwargs: 
        print v, "->", kwargs[v]

dic = {"kw1":7, "kw2":3}

foo(dic)
# prints:
# {'kw1': 7, 'kw2': 3}

foo(**dic)
# prints:
# kw1 -> 7
# kw2 -> 3 
```

* * *

文档的一些相关链接：

*   [http://docs.python.org/glossary.html#term-keyword-argument](http://docs.python.org/glossary.html#term-keyword-argument)
*   [http://docs.python.org/glossary.html#term-argument](http://docs.python.org/glossary.html#term-argument)
*   [http://docs.python.org/tutorial/controlflow.html#more-on-defining-functions](http://docs.python.org/tutorial/controlflow.html#more-on-defining-functions)
    *   [http://docs.python.org/tutorial/controlflow.html#keyword-arguments](http://docs.python.org/tutorial/controlflow.html#keyword-arguments)
    *   [http://docs.python.org/tutorial/controlflow.html#unpacking-argument-lists](http://docs.python.org/tutorial/controlflow.html#unpacking-argument-lists)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T09:43:47.103

该`**dict`符号意味着您的字典被转换为关键字参数。如果该函数没有必要的关键字，那么它将返回一个错误，正如您所经历的那样。

在您的情况下，如果您将函数定义如下*：*

```
>>> def pr(kw1, kw2):
...    print kw1, kw2 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T09:44:13.063

您的`pr`函数接受参数`a`and `b`，而不是`kw1`and `kw2`。

```
>>> def pr(a, b):
...   print a, b
... 
>>> 
>>> d = {'a': 1, 'b':2}
>>> pr(**d)
1 2 
```

# php - 将 PHP 数组传递给 Javascript

> ID：11186843
> 
> 赞同：1
> 
> 时间：2012-06-25T09:41:14.240
> 
> 标签：php, jquery, google-maps-api-3

我在 PHP 中有一个如下所示的数组

```
array(
    (int) 0 => array(
        'id' => '1',
        'name' => 'Mink7',
        'about' => 'Creative Design agency',
        'logo' => null,
        'lat' => '13.004870000000',
        'lng' => '77.576686084656'
    ),
    (int) 1 => array(
        'id' => '2',
        'name' => 'Bakasura',
        'about' => 'Live 2 Eat',
        'logo' => null,
        'lat' => '13.005643569006',
        'lng' => '77.577485382942'
    )
) 
```

我做了什么。我在 Header 中加载了 Function 并在 body 标签中写了以下内容。

```
<script type="text/javascript">
$(document).ready(function(){
        var startups = <?php echo json_encode($startups); ?>;
        $.each(startups, function(key, val) {
            markMe(val.lat, val.lng, val.name, val.description, val.logo);
        });
});
</script> 
```

我收到以下错误

> markMe 未定义
> 
> markMe(val.lat, val.lng, val.name, val.description, val.logo);

附加到 HEAD 的 Javascript 文件。

```
// JavaScript Document
$(document).ready(function () {
    var map = new GMaps({
        div: '#map',
        lat: 13.00487,
        lng: 77.576729,
        zoom: 13,
    });

    /*
    GMaps.geolocate({
        success: function (position) {
            map.setCenter(position.coords.latitude, position.coords.longitude);
        },
        error: function (error) {
            alert('Geolocation failed: ' + error.message);
        },
        not_supported: function () {
            alert("Your browser does not support geolocation");
        },
        always: function () {
            //alert("Done!");
        }
    });
    */

    map.addControl({
        position: 'top_right',
        text: 'Geolocate',
        style: {
            margin: '5px',
            padding: '1px 6px',
            border: 'solid 1px #717B87',
            background: '#fff'
        },
        events: {
            click: function () {
                GMaps.geolocate({
                    success: function (position) {
                        map.setCenter(position.coords.latitude, position.coords.longitude);
                    },
                    error: function (error) {
                        alert('Geolocation failed: ' + error.message);
                    },
                    not_supported: function () {
                        alert("Your browser does not support geolocation");
                    }
                });
            }
        }
    });

    map.addMarker({
        lat: 13.00487,
        lng: 77.576729,
        title: 'Lima',
        icon: "http://i.imgur.com/3YJ8z.png",
        infoWindow: {
          content: '<p>HTML Content</p>'
        }
    });

    function markMe(lat, lng, name, description, logo){
        map.addMarker({
            lat: lat,
            lng: lng,
            title: name,
            icon: "http://i.imgur.com/3YJ8z.png",
            infoWindow: {
              content: description
            }
        });
    }

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T09:45:43.403

在 PHP 中查找[json_encode](http://nl3.php.net/manual/fr/function.json-encode.php)`JSON.parse` ，并在 JavaScript 中使用（或者`jQuery.parseJSON`如果您需要广泛的浏览器支持，则可以使用类似的库）

-- 更新后

而不是函数 markMe(lat, lng, name, description, logo){

do: markMe = function (lat, lng, name, description, logo){

这是因为在函数中声明的函数在该函数之外不可用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T10:05:42.227

在回答 id 之前，我想指出我正在做一些假设。

1.  我假设上面的数组在 php
2.  我假设下面的函数是javascript

如果是这种情况，您只需将数组引用放入 javascript 函数中即可。

我猜测您的数据映射，我建议更好的方法是通过 php 构建整个函数并通过方法调用将其输出到屏幕，以使代码更易于阅读/理解

但是，通过猜测您的映射并在创建方法调用之前测试代码是否有效，我将使用类似这样的东西作为第一个 stab 运行。

```
<script type="text/javascript">
<?php
 foreach($array as $point)
 {
?>
 {
 map.addMarker({
  lat: <?php print $point["lat"]; ?>,
  lng: <?php print $point["lng"]; ?>,
  title: <?php print $point["name"]; ?>,
     icon: <?php if(!is_null($point["logo"]){ print $point["logo"];} ?>,
     infoWindow: {
       content: <?php print $point["about"]; ?>
     }
 });
 <?php } ?>
</script> 
```

谢谢

尼古拉斯

# java - COM4j 无法连接到 HP 质量中心

> ID：11186847
> 
> 赞同：1
> 
> 时间：2012-06-25T09:41:16.187
> 
> 标签：java, hp-quality-center, com4j

我正在尝试使用 com4j 生成 HP Quality Center OTACLien.dll 的接口。

我使用以下命令并收到此错误。

com4j 版本 20110322

OTAClient.dll 9.1 版

```
E:\dum>java -jar tlbimp.jar -o "e:\OutPutofDLL" -p ota "e:\dum\qcdll\OTAClient.dll"
Generating definitions from TDAPIOLELib
Unable to handle the type Date*
  method GetFollowUp
  interface IFollowUpManager
Unable to handle the type (IDISPATCH)*
  method get_ItemFromServer
  interface IComponentFactory 
```

生成了一些类，但是当我尝试使用以下代码连接到 QC 时，出现错误。

```
import com4j.ComException;

import ota.ClassFactory;
import ota.ITDConnection;

public class OCComtest {

    public static void main(String[] args) {
        try{

        ITDConnection connection = ClassFactory.createTDConnection();
        connection.initConnectionEx("http://qc_server_IP:8080/qcbin/");
        System.out.println(connection.connected());
        }catch (ComException e) {
            e.printStackTrace();
        }
        }
} 
```

**错误日志**

```
Exception in thread "main" com4j.ExecutionException: com4j.ComException: 80040154 CoCreateInstance failed : Class not registered : .\com4j.cpp:153
    at com4j.ComThread.execute(ComThread.java:203)
    at com4j.Task.execute(Task.java:25)
    at com4j.COM4J.createInstance(COM4J.java:97)
    at com4j.COM4J.createInstance(COM4J.java:72)
    at ota.ClassFactory.createTDConnection(ClassFactory.java:16)
    at tests.OCComtest.main(OCComtest.java:13)
Caused by: com4j.ComException: 80040154 CoCreateInstance failed : Class not registered : .\com4j.cpp:153
    at com4j.Native.createInstance(Native Method)
    at com4j.COM4J$CreateInstanceTask.call(COM4J.java:117)
    at com4j.COM4J$CreateInstanceTask.call(COM4J.java:104)
    at com4j.Task.invoke(Task.java:51)
    at com4j.ComThread.run0(ComThread.java:153)
    at com4j.ComThread.run(ComThread.java:134) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T21:10:25.327

OTAClient.dll 是一个 com 组件，因此它需要在系统中注册才能使用（如果使用 SxS，则需要在清单中声明）。

您似乎缺少 OTACLIENT.DLL 本身或 Webclient.dll 的注册。

使用 regsvr32 命令行实用程序注册 dll。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T00:10:29.700

尝试以下对我有用的连接代码：

```
public static void main(String[] args) {    
   //QC url
   String url = "http://101.147.167.201:8081/qcbin";
   //username for login
   String username = "username";
   //password for login
   String password = "password";
   //domain
   String domain = "domian name";
   //project
   String project = "project name";
   ITDConnection connection = ClassFactory.createTDConnection();
   connection.initConnectionEx(url);
   connection.connectProjectEx(domain, project, username, password);
} 
```

# php - 如何在 PHP 中使用 Facebook 共享器

> ID：11186852
> 
> 赞同：1
> 
> 时间：2012-06-25T09:41:30.600
> 
> 标签：php, facebook

我错过了什么吗？我使用这个简单的代码

```
<a name="fb_share" type="button" href="https://www.facebook.com/sharer.php?u=123.abc.comt=TEst">share on Facebook</a> 
```

并且共享的内容是空白的？谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-25T09:43:35.920

您的网址中缺少与符号（'&'）：

```
<a name="fb_share" type="button" href="https://www.facebook.com/sharer.php?u=123.abc.com&t=TEst">share on Facebook</a> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-22T21:46:00.173

分享按钮不再被弃用，并且作为分享对话回来了： [https ://developers.facebook.com/docs/reference/plugins/share-links/](https://developers.facebook.com/docs/reference/plugins/share-links/)

在buzzfeed.com 等网站上，他们的分享按钮仍然是重要的推荐来源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T18:10:37.973

啊，很简单，无论你想分享什么页面，只要把它放在 u= 之后的任何链接都将在 facebook 上分享，如果链接页面有 og:meta-tags、og:image、og:title 和 og：描述，它也将与该页面共享，使其具有交互性:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T09:47:56.447

不要使用共享器，它已被弃用并且不再受支持：

> Share 按钮已被弃用，取而代之的是 Like 按钮，并且将不再受支持。
> 请尽可能使用“赞”按钮为您的应用带来最大流量。

（[http://developers.facebook.com/docs/share/](http://developers.facebook.com/docs/share/)）

> **旧的“分享”按钮怎么了？**
> 
> 当我们启动“赞”按钮时，我们弃用了“分享”按钮，因为“赞”按钮允许用户一键连接，并允许他们查看他们的哪些朋友已经连接，从而提高了点击率。

（[http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)）

# python - 在 python 3.2 中选择使用 win32 api 发送击键的 GUI 窗口

> ID：11186853
> 
> 赞同：0
> 
> 时间：2012-06-25T09:41:34.257
> 
> 标签：python, winapi, user-interface, python-3.x, pywin32

我正在使用 python 在 python 中进行 GUI 自动化（winmerge）`win32api`。我必须选择 winmerge 窗口，以便我可以使用 sendkeys 函数向它发送一些键盘敲击。但是我的键盘敲击将发送到 python 活动 shell 而不是所需的窗口。我不知道窗口句柄，所以不能使用 findwindow 功能。你能建议一种选择winmerge窗口的方法吗？PS-我看到了一个名为 Enumwindow 的函数（它需要一个本地回调函数争论。你能不能告诉我传递什么作为本地调用函数争论）提前谢谢你。到目前为止我的代码-

```
import win32api
import win32com.client
import subprocess
import win32gui
subprocess.Popen(r'winmergeu {0} {1}'.format('file1','file2') )
shell=win32com.client.Dispatch("WScript.Shell")
shell.Sendkeys("""
                  %t
                  r
                  """) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:13:53.500

这是一个答案的链接，可以帮助您激活正确的窗口：[https](https://stackoverflow.com/a/2091530/117092) ://stackoverflow.com/a/2091530/117092它在每个打开的窗口的标题上运行一个正则表达式，并在第一个匹配窗口上返回一个句柄. 为 Python 2.x 开发，它也应该在 Python 3.x 中工作

然后您可以将密钥发送到此窗口。以下模块可能会有所帮助： [http ://www.rutherfurd.net/python/sendkeys/#sendkeys](http://www.rutherfurd.net/python/sendkeys/#sendkeys)

我希望它有帮助

卢克

# iphone - 在 iOS 中使用 AFNetworking 下载文件/图像？

> ID：11186854
> 
> 赞同：13
> 
> 时间：2012-06-25T09:41:38.930
> 
> 标签：iphone, objective-c, ios, ipad, afnetworking

我以为我已经弄清楚了，但我就是无法让它发挥作用。我有一个在数组中的每个 URL 上调用的方法。此方法有一个图片的 URL，应下载到应用程序支持文件夹中的特定路径以供离线使用。但也许我误解了 AFNetwork 库中的方法。我的方法如下所示：

```
- (void) downloadImageInBackground:(NSDictionary *)args{

  @autoreleasepool {

    NSString *photourl = [args objectForKey:@"photoUrl"];
    NSString *articleID = [args objectForKey:@"articleID"];
    NSString *guideName = [args objectForKey:@"guideName"];
    NSNumber *totalNumberOfImages = [args objectForKey:@"totalNumberOfImages"];

    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:photourl]];

    AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
    operation.inputStream = [NSInputStream inputStreamWithURL:[NSURL URLWithString:photourl]];

    [operation setShouldExecuteAsBackgroundTaskWithExpirationHandler:^{
        DLog(@"PROBLEMS_AF");
    }];
    DLog(@"URL_PHOTOURL: %@", photourl);
    DLog(@"indexSet: %@", operation.hasAcceptableStatusCode); 
    [operation  response];

    NSData *data = [args objectForKey:@"data"];

    NSString *path;
    path = [NSMutableString stringWithFormat:@"%@/Library/Application Support/Guides", NSHomeDirectory()];
    path = [path stringByAppendingPathComponent:guideName];
    NSString *guidePath = path;
    path = [path stringByAppendingPathComponent:photourl];

    if ([[NSFileManager defaultManager] fileExistsAtPath:guidePath]){
        [[NSFileManager defaultManager] createFileAtPath:path
                                                contents:data
                                              attributes:nil];
    }

    DLog(@"path: %@", path);
    operation.outputStream = [NSOutputStream outputStreamToFileAtPath:path append:NO];
    [operation start];

    DLog(@"isExecuting: %d",[operation isExecuting]);
    DLog(@"IS_FINISHED: %d",[operation isFinished]);

  }

} 
```

PhotoURL 是我要下载的图像的直接链接。

由于对所有图像调用此方法，因此多次调用所有日志，并且似乎是正确的。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-25T11:03:45.490

你在这里有几个问题。所以首先，你为什么要使用`@autoreleasepool`？我认为这里没有必要这样做。另外，你在使用ARC吗？对于我的其余答案，我考虑了这一点。

在 AFNetworking 中有一个名为 的类`AFImageRequestOperation`，所以这对你来说是个好主意。首先，导入它

```
#import "AFImageRequestOperation.h" 
```

那么你可以创建一个对象

```
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:photourl]];
AFImageRequestOperation *operation;
operation = [AFImageRequestOperation imageRequestOperationWithRequest:request 
    imageProcessingBlock:nil 
    cacheName:nil 
    success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image) {

    } 
    failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error) {
        NSLog(@"%@", [error localizedDescription]);
    }]; 
```

现在，在成功块中，您获得了所需的 UIImage。在那里您需要获取文档目录。您的代码将无法在 ios 设备上运行。

```
// Get dir
NSString *documentsDirectory = nil;
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
documentsDirectory = [paths objectAtIndex:0];
NSString *pathString = [NSString stringWithFormat:@"%@/%@",documentsDirectory, guideName]; 
```

然后你可以使用 NSDatas`writeToFile`

```
// Save Image
NSData *imageData = UIImageJPEGRepresentation(image, 90);
[imageData writeToFile:pathString atomically:YES]; 
```

最后，您需要开始操作

```
[operation start]; 
```

全部一起：

```
- (void)downloadImageInBackground:(NSDictionary *)args{

    NSString *guideName = [args objectForKey:@"guideName"];
    NSString *photourl = [args objectForKey:@"photoUrl"];

    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:photourl]];

    AFImageRequestOperation *operation = [AFImageRequestOperation imageRequestOperationWithRequest:request 
        imageProcessingBlock:nil 
        cacheName:nil 
        success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image) {

            // Get dir
            NSString *documentsDirectory = nil;
            NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
            documentsDirectory = [paths objectAtIndex:0];
            NSString *pathString = [NSString stringWithFormat:@"%@/%@",documentsDirectory, guideName];

            // Save Image
            NSData *imageData = UIImageJPEGRepresentation(image, 90);
            [imageData writeToFile:pathString atomically:YES];

        } 
        failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error) {
            NSLog(@"%@", [error localizedDescription]);
        }];

    [operation start];
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-25T10:38:38.217

这里的问题是，操作没有保留。它将立即被释放。

要么让操作成为你的类的属性，要么让操作队列（也是一个属性）为你处理请求（推荐）。在后一种情况下，不要调用`[operation start]`. 当你使用`AFHTTPClient`操作队列时也会为你管理。

此外，您应该为请求操作 ( `setCompletionBlockWithSuccess:failure:`) 注册一个完成回调。

# php - PHP中脚本标签的正则表达式

> ID：11186855
> 
> 赞同：0
> 
> 时间：2012-06-25T09:41:42.180
> 
> 标签：php, regex

我正在使用正则表达式来获取 html 页面的所有脚本标记的内容。我使用的正则表达式和代码如下：

```
$content = file_get_contents($url, false, stream_context_create(
                    array("http" => array("user_agent" => "any"))
            ));

$pattern = "/<script[^>]*?>([\s\S]*?)<\/script>/";
preg_match_all($pattern, $content, $inside_script_array);

echo "<pre>";
print_r($inside_script_array);
echo "</pre>"; 
```

当我拿 1.>

```
$url = 'http://www.bestylish.com/' ; 
```

它返回我所有的脚本标签。但是当我拿 2.>

```
$url = 'http://www.bestylish.com/sale' ; 
```

它没有回复我很多相同的标签，并且出现在上面的 url 1 中。应该是什么原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T10:01:11.713

原因是正则表达式不是操作 HTML 的好工具。如果您仍然可以选择切换到 DOM 解析器，那么获取`<script>`标签可以很简单：

```
$domd = new DOMDocument();
libxml_use_internal_errors(true);
$domd->loadHTML(file_get_contents('http://www.google.com'));
libxml_use_internal_errors(false);

$items = $domd->getElementsByTagName('script');
$data = array();

foreach($items as $item) {
  $data[] = array(
    'src' => $item->getAttribute('src'),
    'outerHTML' => $domd->saveHTML($item),
    'innerHTML' => $domd->saveHTML($item->firstChild),
  );
}

print_r($data); 
```

# php - 如何在 cookie 中存储日期？

> ID：11186859
> 
> 赞同：2
> 
> 时间：2012-06-25T09:42:02.917
> 
> 标签：php

我有一个以这种形式读取日期的 javascript 库：

```
12/31/2020 5:00 AM 
```

所以我需要以这种形式将日期保存在 cookie 中。我写了这段代码：

```
setcookie("invexpire", time()+3600*24, time()+3600*24*365);
echo $_COOKIE['invexpire']; 
```

但它显示如下：

```
1340702563 
```

那么，我怎样才能以这种形式将日期存储在 cookie 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:44:51.003

*以该格式格式化*时间戳：

```
date('m/d/Y g:i A', time()+3600*24) 
```

[http://php.net/date](http://php.net/date)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T09:44:52.050

用于[`date()`](http://de2.php.net/manual/en/function.date.php)格式化您的时间戳：

```
$timestamp = time()+3600*24;
setcookie("invexpire", date('m/d/Y g:i A', $timestamp)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T09:44:38.767

您显示的日期是一个 UNIX 时间戳。它可以进一步格式化为任何日期字符串。

```
$date = date('Y-m-d h:i:s A', time()+3600*24); For 2012-06-26 03:16:29 PM
$date = date('Y-m-d H:i:s', time()+3600*24); For 2012-06-26 15:16:29 
```

# mysql - sql子字符串性能

> ID：11186860
> 
> 赞同：1
> 
> 时间：2012-06-25T09:42:07.447
> 
> 标签：mysql, sql, performance, postgresql, string-matching

我有一个有 2 列的表：

```
id | word 
```

总行数约为 20 万。我想以最快的方式在第二列中找到子字符串。我尝试过使用索引 btree 和哈希，但这些方法仅在以下情况下才能提高性能：

```
SELECT * FROM tbl WHERE word like 'string'. 
```

但我想调整这个查询：

```
SELECT * FROM tbl WHERE word like '%sub-string%' 
```

这是问题示例：[http ://www.labdg.com/en/anagrammi.php?&lg=EN](http://www.labdg.com/en/anagrammi.php?&lg=EN)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T10:43:02.177

对于 PostgreSQL，`like '%sub-string%'`可以使用三元组索引来调整条件。

有关详细信息，请参阅此博客文章：

[http://www.depesz.com/2011/02/19/waiting-for-9-1-faster-likeilike/](http://www.depesz.com/2011/02/19/waiting-for-9-1-faster-likeilike/)
[http://www.postgresonline.com/journal/archives/212-PostgreSQL-9.1-Trigrams-教学-LIKE-and-ILIKE-new-tricks.html](http://www.postgresonline.com/journal/archives/212-PostgreSQL-9.1-Trigrams-teaching-LIKE-and-ILIKE-new-tricks.html)

使用两个引擎的全文搜索功能也是一种选择。

# php - 连接数据库时出错

> ID：11186863
> 
> 赞同：-3
> 
> 时间：2012-06-25T09:42:22.367
> 
> 标签：php, mysql, pdo

我第一次开始在 php 中使用 PDO。

这是我的代码：

```
$host="localhost";
$dbname="meme";
$user="root";
$pass="dream";

global $dbh;
try 
{ 
    //dbh : Database Handle  
    $dbh= new PDO("mysql:host=$host;dbname=$dbname,$user,$pass");  
}  
catch(PDOException $e)
{  
    echo $e->getMessage();  
} 
```

我收到了这个错误：

```
SQLSTATE[28000] [1045] Access denied for user 'www-data'@'localhost'
(using password: NO) 
```

我想这是一个常见错误，因为我可以在 Google 和 StackOverflow 上获得许多相关帖子，但我未能纠正它可能是因为我在该领域的知识有限。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T09:47:20.200

改用这个：

```
$dbh= new PDO("mysql:host=$host;dbname=$dbname",$user,$pass); 
```

您已经完全引用了 DSN、用户名和密码。这样，这 3 个参数实际上只是一个参数。因此，从 PDO 的构造函数 POV 中，您没有传递用户名和密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T09:47:12.417

这可能是由于 MySQL 的权限系统。您应该显式授予权限`@localhost`（使用命名套接字）而不是默认权限`@%`（使用网络套接字）：

```
GRANT ALL ON database_name.* TO `www-data`@localhost IDENTIFIED BY 'password'; 
```

顺便说一句，我假设你在你的馅饼上打错了。报价应该一直到之前`,$user,$pass);`

# go - 如何使 thrift 0.8 构建 go 库？

> ID：11186871
> 
> 赞同：0
> 
> 时间：2012-06-25T09:43:07.307
> 
> 标签：go, thrift

我下载了 thrift 0.8 tarball，我的 GOROOT 是“/home/alex/go”，应该修改什么以确保编译 thrift 时构建 go 库？

目前，当运行 ./configure 得到

```
.......
Building PHP Library ......... : no
Building Erlang Library ...... : yes
Building Go Library .......... : no     (is this saying go library won't be built?) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:44:53.343

thrift 还不支持 Go 1。配置脚本尝试查找旧的 go 命令来构建 go 库。

```
configure:19244: checking for 6g
configure:19274: result: /home/jarod/dev/go/go-hg/bin//6g
configure:19284: checking for 6l
configure:19314: result: /home/jarod/dev/go/go-hg/bin//6l
configure:19324: checking for gomake
configure:19354: result: /home/jarod/dev/go/go-hg/bin//gomake
configure:19364: checking for goinstall
configure:19394: result: /home/jarod/dev/go/go-hg/bin//goinstall 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:15:52.633

首先，运行`./configure --help`并寻找类似`--enable-go`或`--with-go`命令行选项的东西——很可能*默认情况下不尝试构建 Go 库。*我从来没有尝试过自己建立节俭，所以我不知道这是否正确；自行检查。

如果您确定默认启用 Go 库的构建，则必须检查为什么`configure`对您的环境不满意。查看运行`config.log`生成的文件`./configure`并在其中搜索“Building go Library”子字符串——在它出现的某个地方，你会发现`configure`脚本执行了哪些测试，以及它失败的原因。

如果调查后仍不清楚原因，请查看`configure`脚本代码——毕竟它只是一个 shell 脚本（复杂但对于程序员来说仍然可读）。

# asp.net - 内核模式输出缓存限制

> ID：11186876
> 
> 赞同：1
> 
> 时间：2012-06-25T09:43:39.983
> 
> 标签：asp.net, caching, iis-7, output-caching

根据 IIS 输出缓存文档，

**“内核模式输出缓存不支持必须在用户模式下运行的模块和功能，例如身份验证或授权。例如：如果启用了 Basic 或 Windows 身份验证等身份验证方案，则缓存策略将不起作用。”**

“***如果启用了 Basic 或 Windows 身份验证等身份验证方案，缓存策略将不起作用***”语句中的基本身份验证和授权是什么？

我的 ASP.NET MVC 3 Web 应用程序具有表单身份验证。内核模式缓存是否适用于我的站点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-01T08:23:45.190

转到您网站的 IIS 设置，然后选择“身份验证”屏幕。您应该在列表中看到“基本身份验证”，并且我观察到的大多数情况下，默认情况下它被禁用，例如我的。因此，只要您不使用身份验证来访问您的网络应用程序/站点，我认为这没有问题，并且使用内核模式输出。

# ruby-on-rails - Rails 通过 child 加入条件以获得输出

> ID：11186880
> 
> 赞同：0
> 
> 时间：2012-06-25T09:43:50.537
> 
> 标签：ruby-on-rails, ruby-on-rails-3, join, associations

我有一个列表模型，它附加了一个属性模型。该物业链接到一个位置。我正在尝试做的是通过 id 传入的属性位置选择所有列表。到目前为止，我一直在努力：

```
@location = Location.find(params[:id])

@listings = Listing.find(:all, :joins => [:property], :conditions => ["properties.location_id = ? ", @location]) 
```

理想情况下，我想要的是“查找 property.location_id = @location 的所有列表”

发生此错误，但我读过它是因为我使用的是 mysql gem 而不是 mysel2 gem（不幸的是我使用的是 Windows 机器）

> 未定义的方法“解释”#

任何帮助将不胜感激。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:57:52.490

您将整个位置对象提供给参数，但只需要 id：

```
@location = Location.find(params[:id])

@listings = Listing.find(:all, 
                         :joins => [:property], 
                         :conditions => ["properties.location_id = ? ",
                                         @location.id]) 
```

# ios - 如何从 iPhone/iOS 正确获取同步的音频/视频时间戳以进行实时流式传输

> ID：11186890
> 
> 赞同：2
> 
> 时间：2012-06-25T09:44:34.040
> 
> 标签：ios, core-audio

我正在尝试将实时视频 + 音频从 iPhone 流式传输到服务器。获取时间戳的正确方法是什么？

尤其是，

1.  如何从 AudioTimeStamp->mSampleTime 和 AudioTimeStamp->mHostTime 字段正确生成音频时间戳？
2.  mSampleTime 和 mHostTime 字段之间的真正区别是什么？那些是什么意思？
3.  CMSampleBufferGetOutputPresentationTimeStamp() 是否应该用于获取视频时间戳？
4.  或者应该使用 CVTimeStamp 结构，但是我可以从哪里（哪种方法）获得它？
5.  关于该主题的任何示例？

不用说，视频和音频应该是同步的，我希望这些时间戳能够匹配。

抱歉问得不好，如果我知道得更好，就不会问了:)

# android - 为什么我收到错误消息值ï»¿ 我用 JSON 创建了一个 web 服务，我想解析它然后把它们放在 listview 上。但是当我运行应用程序时，它会强制关闭并显示错误消息。请检查我的代码，有什么问题吗？ 这是我尝试运行我的应用程序时的错误消息： org.json.JSONEx 问问题 问问题 2012-06-25T09:44:39.120 3646 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我用 JSON 创建了一个 web 服务，我想解析它然后把它们放在 listview 上。但是当我运行应用程序时，它会强制关闭并显示错误消息。请检查我的代码，有什么问题吗？ 这是我尝试运行我的应用程序时的错误消息： org.json.JSONException: Value ï»¿> mylist = new ArrayList<hashmap<string, string="">>(); JSONObject json = JSONfunctions.getJSONfromURL("http://www.greenfields.co.id:502/Service1.svc/json/weeklyflash"); try{ JSONArray weeklyflash = json.getJSONArray("GetReportResult"); for(int i=0;i <weeklyflash.length();i++){ hashmap<string,="" string="">map = new HashMap<string, string="">(); JSONObject e = weeklyflash.getJSONObject(i); //map.put("type", String.valueOf(i)); map.put("type", e.getString("type")); map.put("total", e.getString("total")); mylist.add(map); } }catch(JSONException e) { Log.e("log_tag", "Error parsing data "+e.toString()); } ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.main, new String[] { "type", "total" }, new int[] { R.id.item_title, R.id.item_subtitle }); setListAdapter(adapter); final ListView lv = getListView(); lv.setTextFilterEnabled(true); lv.setOnItemClickListener(new OnItemClickListener() { public void onItemClick(AdapterView parent, View view, int position, long id) { @SuppressWarnings("unchecked") HashMap <string, string="">o = (HashMap<string, string="">) lv.getItemAtPosition(position); Toast.makeText(WeeklyFlashActivity.this, "Type " + o.get("type") + " was clicked.", Toast.LENGTH_SHORT).show(); } }); } } 这是我的 JSON 变量： {"GetReportResult":[{"total":"249319","type":"ESL500ML"},{"total":"19802","type":"CHEESE1K"},{"total":"3179380","type":"ESL"},{"total":"201243","type":"WHP"},{"total":"736744.136","type":"UHT"}]} 这是我的 JSON 函数： public class JSONfunctions { public static JSONObject getJSONfromURL(String url){ //initialize InputStream is = null; String result = ""; JSONObject jArray = null; //http post try{ HttpClient httpclient = new DefaultHttpClient(); HttpPost httppost = new HttpPost(url); HttpResponse response = httpclient.execute(httppost); HttpEntity entity = response.getEntity(); is = entity.getContent(); }catch(Exception e){ Log.e("log_tag", "Error in http connection "+e.toString()); } //convert response to string try{ BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8); StringBuilder sb = new StringBuilder(); String line = null; while ((line = reader.readLine()) != null) { sb.append(line + "\n"); } is.close(); result=sb.toString(); }catch(Exception e){ Log.e("log_tag", "Error converting result "+e.toString()); } //try parse the string to a JSON object try{ jArray = new JSONObject(result); }catch(JSONException e){ Log.e("log_tag", "Error parsing data "+e.toString()); } return jArray; } } 更新：我检查了我的结果，结果是一个 html 代码，并说Method not allowed.问题可能来自我的 wcf 服务。你有什么解决办法吗？ 这是我的 wcf 服务： [WebInvoke(Method = "GET", ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Wrapped, UriTemplate = "/json/weeklyflash")] 很多人都遇到过这个错误。它可以通过更改 charSet 来解决。尝试使用 UTF-8 而不是 iso-8859-1。 更改以下行： BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8); 到 BufferedReader reader = new BufferedReader(new InputStreamReader(is,"UTF-8"),8); androidjson 4 4 回答 4 This answer is useful 6 很多人都遇到过这个错误。它可以通过更改 charSet 来解决。尝试使用 UTF-8 而不是 iso-8859-1。 更改以下行： BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8); 至 BufferedReader reader = new BufferedReader(new InputStreamReader(is,"UTF-8"),8); 于 2012-06-25T10:05:36.147 回答 This answer is useful 2 最后我解决了自己的问题，问题出在我的 http 连接方法上，在我最近的帖子中，它使用HttpPost了，而我的 wcf 服务方法是GET，这就是为什么我从 wcf 服务收到错误消息Method not allowed 所以我通过在 http 连接上更改我的 http 方法来找到解决方案，HttpGet如下所示： HttpGet httpget = new HttpGet(url); 它对我来说很好。感谢所有评论回答我的问题的人:) 于 2012-06-26T02:57:23.610 回答 This answer is useful 1 看起来你正在使用 HttpPost 方法从 serer 获取数据 HttpPost httppost = new HttpPost(url); HttpResponse response = httpclient.execute(httppost); 但根据错误Method not allowed.和 [WebInvoke(Method = "GET", ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Wrapped, UriTemplate = "/json/weeklyflash")] 1-看起来你应该使用 HttpGet 而不是 HttpPost。 2-使用 response.getStatusLine().getStatusCode() == HttpStatus.SC_OK 或 200 （对于 OK ）和其他处理响应，如 HttpResponse response = httpclient.execute(new HttpGet(URL)); StatusLine statusLine = response.getStatusLine(); inst statusCode= statusLine.getStatusCode(); if( statusCode== HttpStatus.SC_OK){ ByteArrayOutputStream out = new ByteArrayOutputStream(); response.getEntity().writeTo(out); out.close(); String responseString = out.toString(); //..more logic }else if(statusCode == HttpStatus.SC_BAD_REQUEST){ //error bad request shoe message BAD_REQUEST }else if(statusCode == HttpStatus.SC_BAD_GATEWAY){ //error bad request shoe message BAD_GATEWAY } 还有更多但并非全部都必须只有 HttpStatus.SC_OK 是重要的一个... 于 2012-06-26T03:57:02.570 回答 This answer is useful -2 问题：java lang字符串类型的值ï»¿无法转换为jsonobject 答案：正确执行此工作 BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8); 到 BufferedReader reader = new BufferedReader(new InputStreamReader(is,"UTF-8"),8); 于 2017-04-17T05:50:00.393 回答 Related 1 android - 从主机的eclipse构建并运行第二台机器的androidx86（在virtualbox中） 1 mongodb - 锂中的 Mongo 查询 1 ruby - 从 RVM 切换到 rbenv 后服务器找不到 gem 1 ios - 将子视图的子类添加到 UIView 的子类中 0 amazon-web-services - EC2 弹性负载均衡器停止服务 0 r - 如何以人类可读的格式显示数字？ 1 android - 没有剪辑的android ProgressBar？ 1 autocomplete - Flashdevelop - 禁用 txt 文件的自动完成功能 1 .net - IIS 8 - FTP 隔离提供程序 - Microsoft.Web.Administration 1 css - 表单 Div 高度随内容扩展 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</string,></string,></string,></weeklyflash.length();i++){></hashmap<string,>

> ID：11186892
> 
> 赞同：0
> 
> 时间：
> 
> 标签：android, json

我用 JSON 创建了一个 web 服务，我想解析它然后把它们放在 listview 上。但是当我运行应用程序时，它会强制关闭并显示错误消息。请检查我的代码，有什么问题吗？

这是我尝试运行我的应用程序时的错误消息：

```
org.json.JSONException: Value ï»¿<?xml of type java.lang.String cannot be converted to JSONObject 
```

这是我的代码：

```
public class WeeklyFlashActivity extends ListActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listplaceholder);

        ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

        JSONObject json = JSONfunctions.getJSONfromURL("http://www.greenfields.co.id:502/Service1.svc/json/weeklyflash");

        try{

            JSONArray  weeklyflash = json.getJSONArray("GetReportResult");

            for(int i=0;i<weeklyflash.length();i++){                        
                HashMap<String, String> map = new HashMap<String, String>();    
                JSONObject e = weeklyflash.getJSONObject(i);

                //map.put("type",  String.valueOf(i));
                map.put("type", e.getString("type"));
                map.put("total", e.getString("total"));

                mylist.add(map);            
            }       
        }catch(JSONException e)        {
             Log.e("log_tag", "Error parsing data "+e.toString());
        }

        ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.main, 
                        new String[] { "type", "total" }, 
                        new int[] { R.id.item_title, R.id.item_subtitle });

        setListAdapter(adapter);

        final ListView lv = getListView();
        lv.setTextFilterEnabled(true);  
        lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              
                @SuppressWarnings("unchecked")
                HashMap<String, String> o = (HashMap<String, String>) lv.getItemAtPosition(position);                   
                Toast.makeText(WeeklyFlashActivity.this, "Type " + o.get("type") + " was clicked.", Toast.LENGTH_SHORT).show(); 

            }
        });
    }
} 
```

这是我的 JSON 变量：

```
{"GetReportResult":[{"total":"249319","type":"ESL500ML"},{"total":"19802","type":"CHEESE1K"},{"total":"3179380","type":"ESL"},{"total":"201243","type":"WHP"},{"total":"736744.136","type":"UHT"}]} 
```

这是我的 JSON 函数：

```
public class JSONfunctions {
    public static JSONObject getJSONfromURL(String url){

        //initialize
        InputStream is = null;
        String result = "";
        JSONObject jArray = null;

        //http post
        try{
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(url);
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();

        }catch(Exception e){
            Log.e("log_tag", "Error in http connection "+e.toString());
        }

        //convert response to string
        try{
            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            result=sb.toString();
        }catch(Exception e){
            Log.e("log_tag", "Error converting result "+e.toString());
        }

        //try parse the string to a JSON object
        try{
                jArray = new JSONObject(result);
        }catch(JSONException e){
            Log.e("log_tag", "Error parsing data "+e.toString());
        }

        return jArray;
    }

} 
```

更新：我检查了我的结果，结果是一个 html 代码，并说`Method not allowed.`问题可能来自我的 wcf 服务。你有什么解决办法吗？

这是我的 wcf 服务：

```
[WebInvoke(Method = "GET",
            ResponseFormat = WebMessageFormat.Json,
            BodyStyle = WebMessageBodyStyle.Wrapped,
            UriTemplate = "/json/weeklyflash")] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T10:05:36.147

很多人都遇到过这个错误。它可以通过更改 charSet 来解决。尝试使用 UTF-8 而不是 iso-8859-1。

更改以下行：

```
BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8); 
```

至

```
BufferedReader reader = new BufferedReader(new InputStreamReader(is,"UTF-8"),8); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T02:57:23.610

最后我解决了自己的问题，问题出在我的 http 连接方法上，在我最近的帖子中，它使用`HttpPost`了，而我的 wcf 服务方法是`GET`，这就是为什么我从 wcf 服务收到错误消息`Method not allowed`

所以我通过在 http 连接上更改我的 http 方法来找到解决方案，`HttpGet`如下所示：
`HttpGet httpget = new HttpGet(url);`

它对我来说很好。感谢所有评论回答我的问题的人:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T03:57:02.570

看起来你正在使用 HttpPost 方法从 serer 获取数据

```
 HttpPost httppost = new HttpPost(url);
        HttpResponse response = httpclient.execute(httppost); 
```

但根据错误`Method not allowed.`和

```
[WebInvoke(Method = "GET",
            ResponseFormat = WebMessageFormat.Json,
            BodyStyle = WebMessageBodyStyle.Wrapped,
            UriTemplate = "/json/weeklyflash")] 
```

1-看起来你应该使用 HttpGet 而不是 HttpPost。

2-使用 response.getStatusLine().getStatusCode() == HttpStatus.SC_OK 或 200 （对于 OK ）和其他处理响应，如

```
HttpResponse response = httpclient.execute(new HttpGet(URL));
    StatusLine statusLine = response.getStatusLine();
     inst statusCode= statusLine.getStatusCode();
    if( statusCode== HttpStatus.SC_OK){
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        response.getEntity().writeTo(out);
        out.close();
        String responseString = out.toString();
        //..more logic
    }else if(statusCode == HttpStatus.SC_BAD_REQUEST){
             //error bad request shoe message BAD_REQUEST

       }else if(statusCode == HttpStatus.SC_BAD_GATEWAY){
             //error bad request shoe message BAD_GATEWAY

       } 
```

还有更多但并非[全部](http://developer.android.com/reference/org/apache/http/HttpStatus.html)都必须只有 HttpStatus.SC_OK 是重要的一个...

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-04-17T05:50:00.393

问题：java lang字符串类型的值ï»¿无法转换为jsonobject

答案：正确执行此工作 BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8); 到

BufferedReader reader = new BufferedReader(new InputStreamReader(is,"UTF-8"),8);

# c# - 在 C# 中没有采用 0 个参数的构造函数

> ID：11186896
> 
> 赞同：1
> 
> 时间：2012-06-25T09:44:42.117
> 
> 标签：c#, constructor

我在 C# 中编程时遇到此错误：“BankSystem.Account”不包含采用 0 个参数的构造函数

我的课程是：

首先，Account 类：

```
 public abstract class Account : IAccount
{

    private static decimal minIncome = 0;
    private static int minAge = 18;

    private string name;
    private string address;
    private decimal age;
    private decimal balance;

    public Account(string inName, decimal inAge, decimal inBalance, string inAddress)
    {
        if (AccountAllowed(inBalance, inAge))
        {
            name = inName;
            address = inAddress;
            balance = inBalance;
            age = inAge;

            Console.WriteLine("We created the account. \nName is " + name + " \nThe address is: "
            + address + "\nThe balance is " + balance);

        }
        else
        {
            Console.WriteLine("We cann't create the account. Please check the balance and age!");
        }
    }

    //public CustomerAccount(string newName, decimal initialBalance)

    public Account(string inName, decimal initialBalance)
    {
    } 
```

其次，CustomerAccount 类：

```
 public class CustomerAccount : Account
{
    private decimal balance = 0;
    private string name;

    public CustomerAccount(string newName, decimal initialBalance)
    {
        name = newName;
        balance = initialBalance;
    }

    public CustomerAccount(string inName, decimal inAge, decimal inBalance, string inAddress)
        : base(inName, inAge)
    {

        // name = inName;
        //age = inAge;
    }

    public CustomerAccount(string inName, decimal inAge)
        : base(inName, inAge)
    {

        // name = inName;
        //age = inAge;
    } ...... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T09:46:12.937

因为你在你的类中定义了带参数的构造函数，所以默认不会得到默认的构造函数。

您的帐户类已定义构造函数：

```
public Account(string inName, decimal inAge, decimal inBalance, string inAddress)
public Account(string inName, decimal initialBalance) 
```

您可以定义一个默认构造函数，例如。

```
public Account() 
{
} 
```

您得到的错误是因为，您的以下构造函数`CustomerAccount`隐式调用 Account 基类的默认构造函数，因为您没有指定任何其他基构造函数，例如`:base(arg1,arg2);`

```
 public CustomerAccount(string newName, decimal initialBalance)
    {
        name = newName;
        balance = initialBalance;
    } 
```

以上与以下相同：

```
 public CustomerAccount(string newName, decimal initialBalance) : base() 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-25T09:48:04.193

您也需要在此处“链接”到基本构造函数：

```
public CustomerAccount(string newName, decimal initialBalance)
    : base(newName, 0)    // something like this
{
    name = newName;
    balance = initialBalance;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-25T09:52:03.960

简单的。您的`Account`课程不包含零参数的构造函数，例如

```
public Account()
{

} 
```

答案在错误消息中。

当您创建`Account`类的新实例时，请传入正确的参数，例如

`Account account = new Account("John Smith", 20.00);`

或者创建一个接受零参数的构造函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T09:46:40.607

您正在`Account`像这样初始化您的课程

```
new Account(); 
```

但应该做

```
new Account("name", ...); 
```

根据您的构造函数定义。

# .net - 具有多线程和存储库模式的 EF5 的 Unity 生命周期管理器

> ID：11186905
> 
> 赞同：0
> 
> 时间：2012-06-25T09:45:10.083
> 
> 标签：.net, entity-framework, unity-container, .net-4.5

我在 SO 上看到很多 Q/As 说使用 EF 进行多线程处理可能很困难。

我遇到的情况是 Web API 在数据库中排队作业。Windows 服务（目前实际上是一个控制台应用程序）获取这些作业，在多个线程上运行它们并将结果存储在数据库中。

我目前正在使用存储库模式，最初尝试仅使用主线程来更新数据库。这不起作用，因为工作的进入速度（比主线程更新数据库的速度要快得多）——尤其是在有很多结果（数万）的情况下。

下一种方法是转到每个线程的上下文，我可以通过更改容器上的生命周期管理器来轻松完成，但这（可能）会导致并发问题，其中工作线程将作业状态更新为“完成”但主线程不知道，因为它的缓存副本仍在“进行中”。

我想下一个方法是每个请求都有上下文，但我担心会有很多设置/拆卸 - 特别是有很多线程并排运行。无论如何，我会试一试，看看它有多好/多坏。

假设最后一个选项是要走的路，我怎样才能让 Unity 解决相同的上下文请求？也就是说，如果我这样做...

```
Dim UnitOfWork = Container.Resolve(Of IUnitOfWork)
Dim UserRepo = Container.Resolve(Of IUserRepository)
Dim RoleRepo = Container.Resolve(Of IRoleRepository)
''Do Stuff
UnitOfWork.Commit 
```

我需要所有对象使用相同的上下文。我是否需要推出自己的终身经理并为每个组使用独特的东西（比如新的 Guid）

```
Dim Key = Guid.NewGuid
Dim UnitOfWork = Container.Resolve(Of IUnitOfWork)(New MyLifetimeManager(Key))
Dim UserRepo = Container.Resolve(Of IUserRepository)(New MyLifetimeManager(Key)) 
```

或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:05:00.497

不，您只需要一个顶级对象来解析，它将成为其他对象的提供者。例如：

```
public interface IDalProvider
{
    IUnitOfWork { get; }
    IUserReposiotry { get; }
    ...
} 
```

此接口的实现将由 Unity 解决。是否让实现实际创建实现或者是否通过依赖注入传递它们取决于您。

在前一种情况下，您将向提供者实现注入上下文实例，并在构建工作单元和存储库实例时在内部使用它。在后一种情况下，您将直接将上下文实例注入工作单元和存储库实现，并且您将为上下文、uow 和存储库使用 Per-resolve 生命周期（同一实例将在单个解析中注入所有依赖对象）。

# javascript - 为什么要使用 ! 之前呢？

> ID：11186908
> 
> 赞同：1
> 
> 时间：2012-06-25T09:45:24.097
> 
> 标签：javascript

> **可能重复：**
> [函数前的感叹号有什么作用？](https://stackoverflow.com/questions/3755606/what-does-the-exclamation-mark-do-before-the-function)

`!`下面的片段中有什么意义？

```
!函数 ($) {

   // 代码

}(窗口.jQuery);

```

[此语法在Twitter 的 bootstrap.js](http://twitter.github.com/bootstrap/javascript.html)中广泛使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:49:20.280

他们在声明之后立即调用该函数（以 window.jQuery 作为参数）

另一种语法是：

```
(function ($) {

   // code

})(window.jQuery); 
```

有些人更关心一个字符而不是可读性

# java - 任何人都可以向我提供 Java 代码来生成用于 OAuth 请求的时间戳吗？

> ID：11186915
> 
> 赞同：0
> 
> 时间：2012-06-25T09:45:59.257
> 
> 标签：java, android, http, oauth, timestamp

OAuth 规范说**时间戳以自 1970 年 1 月 1 日 00:00:00 GMT 以来的秒数表示。** 时间戳值**必须是正整数**，并且必须等于或大于先前请求中使用的时间戳。

我需要它给我们，它是我的 Android 应用程序来发布 http 帖子

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T09:50:12.090

对于当前时间戳使用`System.currentTimeMillis()/1000`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T09:48:54.050

试试这个：

```
int authSeconds = (int)(new Date().getTime()/1000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T09:57:46.653

你可以使用：

```
int authSeconds = (int)(new Date().getTime()/1000); 
```

# c# - 如何为 Unity 中的所有注册类型配置日志拦截器？

> ID：11186918
> 
> 赞同：6
> 
> 时间：2012-06-25T09:46:03.320
> 
> 标签：c#, unity-container, aop, ioc-container

我将跟踪 Unity 容器管理的服务中发生的每个操作，作为文件系统中的日志。我想我可以定义一个名为 IService 的接口，并且所有其他接口或实现都应该从他那里继承。另一方面，我想开发一个自定义拦截行为或调用处理程序来将日志保存到文件中。

不幸的是，我发现使用此代码对我不起作用

```
IUnityContainer unity = new UnityContainer();

//Interception
unity.AddNewExtension<Interception>();
Interception interception = unity.Configure<Interception>();
unity.RegisterType<IService>(
    new DefaultInterceptor(new InterfaceInterceptor()),
    new DefaultInterceptionBehavior(new LoggingBehavior()));

string[] configFiles = Directory.GetFiles(".", "*.config");
foreach (string configFile in configFiles)
{
    var fileMap = new ExeConfigurationFileMap { ExeConfigFilename = configFile };
    System.Configuration.Configuration configuration =
        ConfigurationManager.OpenMappedExeConfiguration(fileMap,  
        ConfigurationUserLevel.None);
    var unitySection = (UnityConfigurationSection)
        configuration.GetSection("unity");
    unity = unitySection.Configure(unity);
}

IGateway imapGW = unity.Resolve<IGateway>("ImapGateway"); 
```

在 Unity 中使用拦截器对我有什么误解吗？如何处理此问题以自动记录所有内容而无需为每个服务配置拦截器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T04:18:24.893

实现记录器的方法有很多。很久以前写过一篇关于如何设置拦截器的文章：

[http://hmadrigal.wordpress.com/2010/12/25/aspect-orienting-programming-and-interceptor-design-pattern-with-unity-2/](http://hmadrigal.wordpress.com/2010/12/25/aspect-oriented-programming-and-interceptor-design-pattern-with-unity-2/)

对于日志记录，您可以使用 Debug.Write，并配置 TraceListeners。或者您也可以使用企业库或任何第三方日志库。

亲切的问候，赫伯

# rhino - 在 Sublime_text 中运行外部命令

> ID：11186920
> 
> 赞同：1
> 
> 时间：2012-06-25T09:46:07.360
> 
> 标签：rhino, sublimetext2

在 Win 7 上，我尝试在 Sublime_text2 (ST2) 中运行 JavaScript 脚本 (rhino)。由于对 ST2 比较陌生并且不精通 Python，我遇到了编码问题。这是我的“插件”：

```
import sublime
import sublime_plugin
from urllib import pathname2url(*) 

class RhinoCommand(sublime_plugin.TextCommand):
def run(self, edit):
    script = pathname2url(self.view.file_name())
    self.view.window().run_command("exec", {"cmd": ["java", "-cp", ".;/D:/Javascript/Rhino/rhino-1.7R4/js.jar", "org.mozilla.javascript.tools.shell.Main", "-version", "180", "-require", "-modules", "/path/to/a/module" -f", script]}) 
```

添加了一个键绑定：

```
{ "keys": ["ctrl+j"], "command": "rhino" } 
```

(*) 添加此导入以防止 java.net.URISyntaxException 并且显然很好。

但是，在某些情况下，某些异常会在没有更多信息的情况下生成此输出

```
[Decode error - output not utf-8] 
```

如何改变这种行为？我试过了

```
def run(self, edit, encoding="cp1252"): #or cp850 (as windows command "chcp" says 850 on my box) with no effect. 
```

我尝试使用构建而不是命令，但我不知道如何用 pathname2url 包装 $file。我的问题是如何在所有情况下摆脱 [Decode error - output not utf-8]。

# ruby-on-rails - destroy_user_session 使用 Devise 导致 Ruby 中的显示操作

> ID：11186924
> 
> 赞同：3
> 
> 时间：2012-06-25T09:46:14.600
> 
> 标签：ruby-on-rails, ruby, devise, routes, haml

为标题中的混乱道歉，但这正是它听起来的样子。我有一个由 devise 生成的路由作为 destroy_administrator_session 但每次我链接到它时，它都会将我带到该模型的 show 方法，该模型不存在。

模型名称是管理员，这里是路线

```
destroy_administrator_session DELETE /administrators/sign_out(.:format)        devise/sessions#destroy 
```

我的哈姆尔电话

```
= link_to('signout', destroy_administrator_session_path)
= link_to ('Logout', destroy_administrator_session_path), :method=>'delete'
= link_to 'Sign out', destroy_administrator_session_path, :method=>'delete' 
```

每一个都略有不同，但它们都将应用程序带回了我尚未实现的管理员显示方法。正如您从上面的设计路线中看到的那样，show 从未被触及。

最后是我的 routes.rb 文件

```
 get "/administrators/sign_out" => "devise/sessions#destroy", :as => :destroy_administrator_session
  devise_for :administrators
  resources :administrators 
```

我对可能发生的事情有一些预感。

1.  路线定义不正确
2.  我需要指定实际设计路线上发生的情况，并且需要更多配置
3.  我的资源正在发生冲突，但是删除它们无济于事。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:41:31.043

尝试这个

```
devise_for :administrators do
  delete "/administrators/sign_out" => "devise/sessions#destroy", :as => :destroy_administrator_session
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T09:50:09.437

仍然不知道发生了什么或为什么这会做出改变，但希望它会一路帮助某人

```
 devise_scope :administrator do
    get "/administrators/sign_out" => "devise/sessions#destroy", :as => :destroy_administrator_session
    devise_for :administrators
  end
  resources :administrators 
```

# copy - 制作 DB2 数据库的副本

> ID：11186931
> 
> 赞同：1
> 
> 时间：2012-06-25T09:46:23.197
> 
> 标签：copy, db2

我如何从一个工作站复制 DB2 数据库并在另一个工作站（两个 Windows）上基于该副本创建新数据库。我尝试使用控制中心备份现有数据库并在另一个工作站（从备份）中创建新数据库，但我没有导入自定义表。

编辑：我读到了 db2move 命令。但是当我尝试使用`db2move MY_DB_NAME import`命令时，我得到一个错误：

> 未使用 ansi 代码页 1208 确定应用程序代码页

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-03T13:16:28.177

通常，您在单个模式中拥有数据。

1.  创建一个新数据库： `db2 create database MyDstDb`

2.  复制架构： `db2move MySrcDb copy -sn MySrcSchema -co target_db MyDstDb -u MyDbUser -p`

我不确定这是否适用于 9.7。我目前使用 10.1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T09:58:57.427

DB2 提供了各种选项来移动数据。看看这个页面：[DB2 数据移动选项](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.admin.dm.doc/doc/r0024482.html)

您将不得不根据您的需要在这里选择最好的。

# .htaccess - google搜索结果是https:(如何重定向到http

> ID：11186935
> 
> 赞同：0
> 
> 时间：2012-06-25T09:46:56.767
> 
> 标签：.htaccess, redirect

我的网站页面在谷歌搜索结果中的索引方式存在问题。它们都是 https 而不是 http，我的网站中没有 https url，iv 将其索引为 www.emaxlple.com。我的站点地图还将所有网址显示为 http://...

这是我正在使用的 .htaccess 文件...

```
    选项 +FollowSymlinks
    重写引擎开启
    RewriteBase /
    RewriteCond %{SERVER_PORT} ^443$ [OR]
    RewriteCond %{HTTPS} =on
    重写规则 ^(.*)$ http://www.webheadz.ie/$1 [R=301,L]

```

是的，我之前从未尝试过 301 重定向，所以我不确定我是否接近我想要达到的目标！

任何帮助都会很棒....我想在上周让我的网站搜索结果用户友好，但我开始放弃...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T22:13:06.180

我认为这将实现您的意图：

```
RewriteEngine On
RewriteCond %{HTTPS} on
RewriteRule (.*) http://%{HTTP_HOST}%{REQUEST_URI} 
```

# java - json 从 Android 到 php 输入

> ID：11186940
> 
> 赞同：1
> 
> 时间：2012-06-25T09:47:19.627
> 
> 标签：java, php, android, post

我正在尝试将数据作为 json 从 Android 发布到 PHP 脚本，但它似乎并没有读取我发送的数据。

PHP

```
header('Content-type: application/json');
$json = file_get_contents('php://input');
print_r($json); 
```

数据

```
{"Date":"2012-05-31","Device_ID":"soaptester","Time":"15:22:59","Longitude":0.33,"Latitude":51.01} 
```

爪哇

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    sp = getSharedPreferences("SoapTester", Context.MODE_PRIVATE);
    setContentView(R.layout.main);
    String address = sp.getString("address", null);
    if (address == null) {
        sp.edit().putString("address", "http://192.168.0.8/lt_data/test.php").commit();
    }

    addressTextView = (EditText) findViewById(R.id.address);
    addressTextView.setOnEditorActionListener(new TextView.OnEditorActionListener() {

        @Override
        public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
            sp.edit().putString("address", String.valueOf(v.getText())).commit();
            return true;
        }
    });

    track = new LocationTrack();
    track.setDate("2012-05-31");
    track.setTime("15:22:59");
    track.setLatitude(51.01);
    track.setLongitude(0.33);
    track.setDevice_ID("soaptester");

    output = new Gson().toJson(track);

    outputTextView = (TextView) findViewById(R.id.output);
    outputTextView.setText(output);

}

@Override
protected void onResume() {
    super.onResume();
    addressTextView.setText(sp.getString("address", ""));
}

public void sendPost(View view) {

    ServiceResponse r = Resting.post(sp.getString("address", ""), 80, output, EncodingTypes.UTF8);
    ((TextView)findViewById(R.id.response)).setText(String.valueOf(r));

} 
```

经过大量测试后，我似乎无法找出为什么它没有从 android 应用程序接收数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:15:39.883

也许尝试使用诸如 netcat 之类的工具来查看您是否正确发送了 json 消息。或者尝试使用一些网络流量工具（wireshark、tcpdump）。

# iphone - 财产如何运作？

> ID：11186942
> 
> 赞同：0
> 
> 时间：2012-06-25T09:47:20.293
> 
> 标签：iphone, objective-c, properties

我正在学习财产，我阅读了各种文档，但仍然不清楚财产是如何工作的，并且遇到了让我感到困惑的场景。我创建了一个示例应用程序，其中我创建了一个属性，如下所示：

```
@property(nonatomic,retain)NSString *strValue; 
```

并合成它：

```
@synthesize strValue; 
```

1）第一个场景：

在 viewDidLoad 我写道：

```
strValue = [[NSString stringWithFormat:@"value"] retain]; 
```

在 dealloc 我写道：

```
NSLog(@"str value : %@",self.strValue);
[self.strValue release]; 
```

它运行良好，没有任何泄漏。我的问题是：创建保留属性 strValue(@property(nonatomic,retain)NSString *strValue;) 时保留的内存发生了什么？

2）第二种情况：

在 viewDidLoad 我写道：

```
self.strValue = [[NSString stringWithFormat:@"value"] retain]; 
```

在 dealloc 我写道：

```
NSLog(@"str value : %@",self.strValue);
[self.strValue release]; 
```

它在 self.strValue = [[NSString stringWithFormat:@"value"] retain] 行显示内存泄漏。这里的问题是：为什么在这里显示内存泄漏？这行是否不等于以下代码行：

```
[strValue release];
[strValue retain]; 
```

3）第三种情况：在 viewDidLoad 我写道：

```
self.strValue = [NSString stringWithFormat:@"value"]; 
```

在 dealloc 我写道：

```
NSLog(@"str value : %@",self.strValue);
[self.strValue release]; 
```

它工作得很好，没有任何内存泄漏或悬空引用，怎么样？谁能解释一下属性实际上是如何工作的？当我们使用属性时，内存是如何分配和释放的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:51:35.843

> 第一个问题，

由于您将实例设置为变量本身而不是属性，那么您将不得不分配（或保留）给定的实例，如果您给这个变量一个自动释放的对象，稍后属性将变成僵尸

> 第二个问题

不，它不相似，因为该属性已经保留了实例，另一个保留将使保留计数增加一个，因此您将拥有一个永远不会释放的额外保留计数。

> 第三个问题

正如我之前所说，该属性将保留该实例，因此将自动发布的实例传递给它不会有问题

这是一个示例保留属性设置器

```
- (void) setProperty:(BookItem *)prop
{
    if(_property != prop)
    {       
        [_property release];//release old
        _property = prop;
        [prop retain]; //retain new
    }
} 
```

# mysql - 获取 MySQL 中一行的最新状态

> ID：11186949
> 
> 赞同：0
> 
> 时间：2012-06-25T09:47:44.603
> 
> 标签：mysql, aggregate-functions

我有一件很奇怪的事情要做，只是不知道该怎么做。这是我的表格及其数据：

```
+------+-----------+-------------+-------+------------+
| uid  | entity_id | entity_type | state | created    |
+------+-----------+-------------+-------+------------+
| 3913 |      1105 |           1 |     0 | 1340617072 |
| 3913 |      1105 |           1 |     1 | 1340617042 |
| 3913 |      3930 |           1 |     0 | 1340617071 |
| 3913 |      3930 |           1 |     1 | 1340617036 |
+------+-----------+-------------+-------+------------+ 
```

`created`保存已执行操作的时间戳，是操作`state`的状态（已关注或未关注），`uid`是执行操作的人，并且`entity_id`是正在关注/取消关注的实体 ID。

我正在尝试进行查询，以获取`entity_id`当前用户关注的所有信息。首先我使用的是：

```
SELECT entity_id FROM follow_objects WHERE uid=? AND entity_type=? 
```

但是我注意到，如果我关注某人然后取消关注他们，我仍然会得到那个人的结果，因为它有 2 个条目（状态 = 1，然后状态 = 0）。

所以我需要获取具有最新`created`列的行，这意味着该操作是最新的。所以我试过：

```
SELECT entity_id FROM follow_objects WHERE uid=? AND entity_type=? group by entity_id HAVING created=MAX(created) 
```

它只返回垃圾数据。我没主意了。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:53:05.743

您需要按*组选择最大值*。您必须将最大值包装在子选择中，并在`entity_id`s 相等且子选择的最大时间戳等于创建的时间戳的地方加入表本身。结果是您将获得`entity_id`每组的顶行数据：

```
SELECT
    a.entity_id,
    b.state,
    b.created
FROM
    (
        SELECT entity_id, MAX(created) AS max_created
        FROM follow_objects
        WHERE uid = ? AND entity_type = ?
        GROUP BY entity_id
    ) a
INNER JOIN
    follow_objects b ON
        a.entity_id = b.entity_id AND
        a.max_created = b.created 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T09:58:43.260

首先选择所有匹配的行并按创建日期（最新的在前）对它们进行排序，然后从该结果中取第一个：

```
SELECT entity_id
FROM (
    select entity_id, created
    from follow_objects
    WHERE uid=?
    AND entity_type=?
    order by created desc
) x
limit 1 
```

易于理解和编码。

仅供参考，括号后的“x”在那里，因为您需要为从中选择的所有结果集提供别名，所以我将其称为“x”。

# perl - perl 特殊变量 $-[0] 和 $+[0] 是什么意思

> ID：11186959
> 
> 赞同：9
> 
> 时间：2012-06-25T09:48:42.167
> 
> 标签：perl, predefined-variables, special-variables

我想知道perl特殊变量的含义`$-[0]`和`$+[0]`

我用谷歌搜索，发现它`$-`代表页面上剩下的行数，`$+`代表最后一个搜索模式匹配的最后一个括号。

但我的问题是正则表达式上下文中的含义`$-[0]`和含义。`$+[0]`

让我知道是否需要代码示例。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-25T09:55:49.923

请参阅[`perldoc perlvar`](http://metacpan.org/module/perlvar)和。`@+``@-`

> `$+[0]`是整个匹配结束的字符串中的偏移量。
> 
> `$-[0]`是最后一次成功匹配开始的偏移量。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-25T09:55:30.930

这些都是数组中的元素（由方括号和数字表示），因此您要搜索 @-（数组）而不是 $-（不相关的标量变量）。

褒奖

```
perldoc perlvar 
```

解释 Perl 的特殊变量。如果你在那里搜索@- 你会找到。

`$-[0] is the offset of the start of the last successful match. $-[n] is the offset of the start of the substring matched by n-th subpattern, or undef if the subpattern did not match`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-25T13:37:22.347

添加示例以更好地理解`$-[0]`,`$+[0]`

还添加有关变量的信息`$+`

```
use strict;
use warnings;

my $str="This is a Hello World program";
$str=~/Hello/;

local $\="\n"; # Used to separate output 

print $-[0]; # $-[0] is the offset of the start of the last successful match. 

print $+[0]; # $+[0] is the offset into the string of the end of the entire match. 

$str=~/(This)(.*?)Hello(.*?)program/;

print $str;

print $+;                    # This returns the last bracket result match 
```

输出：

```
D:\perlex>perl perlvar.pl
10                           # position of 'H' in str
15                           # position where match ends in str
This is a Hello World program
 World 
```

# android - Android 视图中的 getOnClickListener()

> ID：11186960
> 
> 赞同：23
> 
> 时间：2012-06-25T09:48:44.520
> 
> 标签：android, onclicklistener

我需要一个 getOnClickListener() 用于 Android 中的视图。这样我可以为我的视图分配一个临时的 OnClickListener。我想像这样使用它：

```
private View.OnClickListener oldListener;

public void assignTempListener(View view) {
    oldListener = view.getOnClickListener(); // doesn't exist

    view.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // some code

            v.setOnClickListener(oldListener);
        }
    });
} 
```

问题是这个函数不存在。我也不能从 View 继承来创建这个方法，因为所有类型的 View 都可以传递给 assignTempListener。还有其他方法可以使用它吗？

编辑：在我的代码中犯了一个小错误。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-21T02:51:12.640

您可以使用... **REFLECTION**来做到这一点。*击鼓*

这条路线充满了危险。

我不推荐它，因为类的内部结构可以随时更改，但如果确实无法避免，您可以按照以下方式在 Android 4.2.2 之前执行此操作：

```
/**
 * Returns the current View.OnClickListener for the given View
 * @param view the View whose click listener to retrieve
 * @return the View.OnClickListener attached to the view; null if it could not be retrieved
 */
public View.OnClickListener getOnClickListener(View view) {
    if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
        return getOnClickListenerV14(view);
    } else {
        return getOnClickListenerV(view);
    }
}

//Used for APIs lower than ICS (API 14)
private View.OnClickListener getOnClickListenerV(View view) {
    View.OnClickListener retrievedListener = null;
    String viewStr = "android.view.View";
    Field field;

    try {
        field = Class.forName(viewStr).getDeclaredField("mOnClickListener");
        retrievedListener = (View.OnClickListener) field.get(view);
    } catch (NoSuchFieldException ex) {
        Log.e("Reflection", "No Such Field.");
    } catch (IllegalAccessException ex) {
        Log.e("Reflection", "Illegal Access.");
    } catch (ClassNotFoundException ex) {
        Log.e("Reflection", "Class Not Found.");
    }

    return retrievedListener;
}

//Used for new ListenerInfo class structure used beginning with API 14 (ICS)
private View.OnClickListener getOnClickListenerV14(View view) {
    View.OnClickListener retrievedListener = null;
    String viewStr = "android.view.View";
    String lInfoStr = "android.view.View$ListenerInfo";

    try {
        Field listenerField = Class.forName(viewStr).getDeclaredField("mListenerInfo");
        Object listenerInfo = null;

        if (listenerField != null) {
            listenerField.setAccessible(true);
            listenerInfo = listenerField.get(view);
        }

        Field clickListenerField = Class.forName(lInfoStr).getDeclaredField("mOnClickListener");

        if (clickListenerField != null && listenerInfo != null) {
            retrievedListener = (View.OnClickListener) clickListenerField.get(listenerInfo);
        }
    } catch (NoSuchFieldException ex) {
        Log.e("Reflection", "No Such Field.");
    } catch (IllegalAccessException ex) {
        Log.e("Reflection", "Illegal Access.");
    } catch (ClassNotFoundException ex) {
        Log.e("Reflection", "Class Not Found.");
    }

    return retrievedListener;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-09T09:00:59.917

您可以覆盖该类并为您的视图声明一个 onClicklistener 并为 onClickListener 字段编写 setter 和 getter：

```
public class SAutoBgButton extends ImageButton {

  public View.OnClickListener mOnClickListener;

  @Override
  public void setOnClickListener(OnClickListener l) {
    super.setOnClickListener(l);
    mOnClickListener = l;
  }
  public OnClickListener getmOnClickListener() {
    return mOnClickListener;
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-21T10:29:16.893

答案很简单

```
OnClickListener ocl = new OnClickListener { 
    @Override
    public void onClick(View view) {
        clickableView.performClick();
    }
} 
```

onclicklistener 的全部功能除了一件事 - 你不能将任何视图作为参数传递给它，`clickableView`它将是处理程序，但在大多数情况下它就足够了

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T09:54:48.247

采用

```
 oldListener = new view.OnClickListener() {

        @Override
        public void onClick(View v) {
            // some code

          v.setOnClickListener(oldListener);
        }
    }); 
```

代替

```
oldListener = view.getOnClickListener(); // doesn't exist 
```

**getOnClickListener**不是当前 API 中[View](http://developer.android.com/reference/android/view/View.OnClickListener.html)或[Button](http://developer.android.com/reference/android/view/View.OnClickListener.html)的任何方法，请参阅文档了解更多详细信息

[http://developer.android.com/reference/android/view/View.OnClickListener.html](http://developer.android.com/reference/android/view/View.OnClickListener.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T00:34:49.673

尼特！

给出的答案中的 oldListener 在每种情况下都被重新定义，并且它的旧状态或定义丢失，无论它的名称是否假装。

遵循此技术： [获取 Android View 对象](https://stackoverflow.com/questions/6610143/get-current-onclicklistener-of-an-android-view-object) 的当前 onClickListener 将在抽象类的 onClick 方法中设置“旧”侦听器，并且任何临时侦听器将使用 setOnClickListener 以及对 super 的调用，以便在以下情况下（重新）设置旧侦听器或酌情

临时侦听器设置代码不需要知道“旧”侦听器是什么，但是仍然需要某种形式的协调，以便该侦听器的作者或那些侦听器使它们抽象化并使用 onClick 方法设置点击侦听器，简而言之，遵循协议。

在特殊情况下，您可能希望绕过 onclicklistener View 成员的 protected 或 private 限定符：http: [//grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.1_r2/android/ view/View.java#View.0mOnClickListener](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.1_r2/android/view/View.java#View.0mOnClickListener) 然后做一点[http://www.jguru.com/faq/view.jsp?EID=321191](http://www.jguru.com/faq/view.jsp?EID=321191) 这会让你成为听众。

您甚至可能想编写自己的 getOnClickListener 或任何使用自省方法的 getter，如果它确实有效的话:)

:)

# android - 如何在主应用程序中获取“项目库”ID？

> ID：11186964
> 
> 赞同：0
> 
> 时间：2012-06-25T09:48:49.840
> 
> 标签：android, project

我有来自“项目库”的用户组件的“项目库”和“主应用程序”。我想从我的“主应用程序”中的“项目库”中获取视图。“主应用程序”的代码是：

```
package xliiv.sandbox;

import xliiv.sandbox.library.R;
import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class MyProjectMainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        TextView tv = (TextView) findViewById(xliiv.sandbox.library.R.??);
    }
} 
```

Eclipse 不提示任何 id，与 R 中的其他项目（布局、可绘制、字符串、..）相反。我手动检查 xliiv.sandbox.library.R （来自我的“项目库”的文件）：

```
/* AUTO-GENERATED FILE.  DO NOT MODIFY.
 *
 * This class was automatically generated by the
 * aapt tool from the resource data it found.  It
 * should not be modified by hand.
 */

package xliiv.sandbox.library;

public final class R {
    public static final class attr {
    }
    public static final class drawable {
        public static final int ic_launcher=0x7f020000;
    }
    public static final class id {
        public static final int tv=0x7f050000;
    }
    public static final class layout {
        public static final int main=0x7f030000;
    }
    public static final class string {
        public static final int app_name=0x7f040001;
        public static final int hello=0x7f040000;
    }
} 
```

所以... xliiv.sandbox.library.R（来自“项目库”）肯定包含 xliiv.sandbox.library.R.id ...，但我的“主应用程序”中的 xliiv.sandbox.library.R 没有吨

# python - python找到一个字符串&之前和之后的所有内容

> ID：11186966
> 
> 赞同：0
> 
> 时间：2012-06-25T09:48:57.290
> 
> 标签：python, find

我有一堆 HTML，我每周从一个站点下载一次，需要从中获取一些信息，但不知道从哪里开始。

我有大约 100 个这样的文件在一个文件中重复，并且只想从中获取 2 行。

> > number2 - 计算机
> > 3 天前 6 月 22 日，12
> > 11,589 个文件 / 4,363 MB

```
<td width="242"><div align="left"><span class="style9">
<span class="style9"><img src="pic.pn" width="32" height="32" border="0" style="vertical-align:text-top;" />number2 &nbsp;&#8209;&#8209;computer</span><br />
.....
<div align="left">License:<br />Backup:<br />Files:</div></td><td width="186" valign="top" nowrap><div align="left" nowrap>
<span class="black" nowrap><span class="black">Paid&nbsp;Unlimited</span>
<br />3&nbsp;days&nbsp;ago&nbsp;on&nbsp;Jun&nbsp;22,&nbsp;12<br />11,589 files / 4,363&nbsp;MB</span></td>
<td width="92" valign="top">&nbsp;</td></tr>
.....
</div></td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-28T09:14:01.120

您需要做的是在文本的每一行后面放置一个 '\n'，（如果您将文件作为字符串加载，它已经是那样了。）然后您需要在文本中搜索该部分并保存更短形式的文本。如果搜索和文本被正确的字符串替换，下面的脚本应该可以工作

```
#insurt text to search and to be searched
search = '<td width="242"><div align="left"><span class="style9">\n<span class="style9"><img         src="pic.pn" width="32" height="32" border="0" style="vertical-align:text-top;" />number2 &nbsp;&#8209;&#8209;computer</span><br />\n.....\n<div align="left">License:<br />Backup:<br />Files:</div></td><td width="186" valign="top" nowrap><div align="left" nowrap>\n<span class="black" nowrap><span class="black">Paid&nbsp;Unlimited</span>\n<br />3&nbsp;days&nbsp;ago&nbsp;on&nbsp;Jun&nbsp;22,&nbsp;12<br />11,589 files / 4,363&nbsp;MB</span></td>\n<td width="92" valign="top">&nbsp;</td></tr>\n.....\n</div></td>\n'

text = 'a\n'+98*search+'\nb'

changed = 0
for x in range(len(text)):
  if text[x:x+len(search)] == search:
    if changed >= 2:
       text = text[0:x]+' '+text[x+len(search):] # to place a replacement text, switch ' ' for 'replacement text'
    changed += 1

print(text) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:15:01.500

首先，尝试从字符串中删除所有 HTML 标记。

```
>>> import re
>>> def remove_html_tags(data):
...     p = re.compile(r'<.*?>')
...     return p.sub('', data)
...
>>> stripped = remove_html_tags(unescape(html_source))
>>> stripped
u'\nnumber2 \xa0\u2011\u2011computer\n.....\nLicense:Backup:Files:\nPaid\xa0Unlimited\n3\xa0days\xa0ago\xa0on\xa0Jun\xa022,\xa01211,589 files / 4,363\xa0MB\n\xa0\n.....\n' 
```

然后是正常搜索/拆分/重新匹配的问题

[`unescape`](http://effbot.org/zone/re-sub.htm#unescape-html)感谢 Fredrik Lundh

这应该让你继续前进。

# configuration - 以编程方式访问通过 JMX 公开的 MessageHandler

> ID：11186980
> 
> 赞同：0
> 
> 时间：2012-06-25T09:49:34.443
> 
> 标签：configuration, spring-integration, spring-jmx

我正在尝试访问 MessageHandler 端点以通过 JMX 启动和停止服务。我的上下文文件中有以下配置。我可以通过 JConsole 访问启动/停止方法。

我还可以从基于 spring 的客户端使用 MBeanServerConnectionFactoryBean 访问端点。

现在我想使用 MBeanProxyFactoryBean 访问端点，这样我就可以直接调用方法，就好像 bean 是本地的一样。这似乎不起作用。

您能否在下面查看我的配置并提出问题或需要做些什么？

服务器.xml

```
 <int-jms:message-driven-channel-adapter id="jmsIn" 
    connection-factory="connectionFactory" concurrent-consumers="3" max-concurrent-consumers="5" 
    destination-name="emsQueue" acknowledge="transacted" channel="jmsInChannel"  
    extract-payload="false" />

 <integration:service-activator id="serviceAct" input-channel="jmsInChannel" output-channel="fileNamesChannel" 
    ref="handler" method="process" /> 
```

客户端.xml

```
<bean id="mBeanServerClient" class="org.springframework.jmx.support.MBeanServerConnectionFactoryBean">
    <property name="serviceUrl" value="service:jmx:rmi:///jndi/rmi://localhost:9004/jmxrmi" />
</bean>

<bean id="jmxClient" class="com.abc.test.IBalJMXClient">
    <property name="connection" ref="mBeanServerClient" />
</bean>
<bean id="remoteJMSMBean" class="org.springframework.jmx.access.MBeanProxyFactoryBean">
    <property name="objectName" value="com.abc.test:name=serviceAct" />
    <property name="server" ref="mBeanServerClient" />
    <property name="proxyInterface" value="com.abc.client.intf.IBalJMSController" />
</bean> 
```

IBalJMSController 是我定义 start() 、 stop() 和 isRunning() 方法的接口，以便我可以从任何类访问它。

当我尝试测试它时，我得到调用异常。任何建议将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:00:37.650

你在 Spring 论坛上问过同样的问题；我在那里回答；[http://forum.springsource.org/showthread.php?127726-Programatically-access-MessageHandlers-exposed-via-JMX](http://forum.springsource.org/showthread.php?127726-Programatically-access-MessageHandlers-exposed-via-JMX)

但我会在这里重复答案......

首先，停止处理程序不是正确的做法 - 所做的只是取消订阅频道，消息将收到错误消息“调度程序没有订阅者”。您需要 stop() 消息驱动的通道适配器。

其次，您需要提供完整的 MBean 对象名称，例如“com.irebalpoc.integration:type=ManagedEndpoint,name=jmsin,bean=endpoint”。您可以在 MBean 元数据中找到它（例如在 VisualVM 中）。

# java - 当 SAXParserFactory.newSAXParser() 抛出 SAXException 时？

> ID：11186981
> 
> 赞同：0
> 
> 时间：2012-06-25T09:49:37.153
> 
> 标签：java

`SAXParserFactory.newSAXParser()`抛出`ParserConfigurationException`和`SAXException`。在[文档](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/parsers/SAXParserFactory.html#newSAXParser%28%29)中，我无法找出`SAXException`应该抛出的原因。

什么时候`SAXParserFactory.newSAXParser()`扔`SAXException`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:15:48.690

[如此处](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/parsers/SAXParserFactory.html#newSAXParser%28%29)所述：

```
Throws:
ParserConfigurationException - if a parser cannot be created which satisfies the requested configuration.
SAXException - for SAX errors. 
```

因此，对于 SaxParser 中不是解析配置错误的每个错误，似乎都会引发 SAXException。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T10:32:41.857

正如[文档](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/parsers/SAXParserFactory.html#newSAXParser%28%29)指出的那样，该`newSAXParser`方法是抽象的。但是，该`newInstance`方法会创建一个`SAXParserFactoryImpl`对象，`extends`该类`SAXParserFactory`并覆盖该`newSAXParser`方法。

这里的`newSAXParser`方法只抛出`ParserConfigurationException`，但如果你看里面它会捕获一个`SAXException`被翻译成的`ParserConfigurationException`。`com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl`方法在构造函数中抛出此异常`init`。

我搜索了完整的 java 5 源代码，没有其他类可以扩展 SAXParserFactory。所以基本上，你要求的方法永远不会抛出`SAXException`. 但是，如果它在途中被抛出，它会被捕获并翻译成`ParserConfigurationException`.

# ios - 从字符串中删除下划线

> ID：11186983
> 
> 赞同：-4
> 
> 时间：2012-06-25T09:49:44.637
> 
> 标签：ios, objective-c

我有一个字符串，如“aa_bb_cc”。我想将其转换为单个字符串“aa bb cc”，在 aa、bb 和 cc 之间有空格。我怎样才能做到这一点 ？？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-25T09:51:45.177

您可以使用：

```
 str = [str stringByReplacingOccurrencesOfString:@"_"
                                     withString:@" "]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T09:51:56.643

```
NSString* newString = [oldString stringByReplacingOccurencesOfString:@"_" withString:@" "]; 
```

[苹果文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)

```
- (NSString *)stringByReplacingOccurrencesOfString:(NSString *)target withString:(NSString *)replacement 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-25T09:53:58.763

使用 NSString 的**stringByReplacingOccurrencesOfString**

```
 NSString *str = @"aa_bb_cc";
 [str stringByReplacingOccurrencesOfString:@"_" withString:@""]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T09:53:34.977

```
[str replaceOccurrencesOfString:@"_" withString:@" " options:NSLiteralSearch range:NSMakeRange(0, [str length])]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-06-25T13:16:52.870

**斯威夫特 4.2**

```
var str = "aa_bb_cc"

str = str.replacingOccurrences(of: "_", with: " ") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-25T14:21:08.030

斯威夫特 2.2：

```
let input = "upload_FfAPfl-icon.png"

let output = input.stringByReplacingOccurrencesOfString("_", withString: "") // "uploadFfAPfl-icon.png" 
```

# openxml - 使用 Open XML SDK 修复 Word 中的单元格宽度

> ID：11186984
> 
> 赞同：2
> 
> 时间：2012-06-25T09:49:55.473
> 
> 标签：openxml, xmltable, wordprocessingml

我有一个 docx 文件中有一行的表，我想添加一些行。对于第一个现有行，我将 GridSpan 设置为 3。在下一个中，我只想添加一个包含两个单元格的行，然后我得到如图所示的结果。如何将新行宽固定为表格宽度？当我在新行中只添加一个单元格时，我也想做同样的事情。

![在此处输入图像描述](../Images/f2083e9718a1227821c2cf4b9c468301.png)

我的代码：

```
private static TableRow AddRow(WordprocessingDocument docx, Table tbl, int cellsQuantity)
        {
            TableRow newRow = new TableRow();

            var firstCell = tbl.Descendants<TableRow>().First()
                  .Descendants<TableCell>().First();

            firstCell.Append(new TableCellProperties(new GridSpan() { Val = 3 }));

            for (int i = 0, max = cellsQuantity; i < max; i++)
            {
                // TableCellProperties tcp = new TableCellProperties(new TableCellWidth() { Width = firstCell.TableCellProperties.TableCellWidth.Width, Type = firstCell.TableCellProperties.TableCellWidth.Type });
                TableCell cell = new TableCell(new Paragraph(new Run(new Text("test"))));
                newRow.AppendChild(cell);
            }

            tbl.Append(newRow);

            return newRow;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T10:38:26.593

好的，我明白了：）

```
 private static TableRow AddRow(WordprocessingDocument docx, Table tbl, int cellsQuantity)
        {
            TableRow newRow = new TableRow();

            var grid = tbl.Descendants<TableGrid>().First();

            var firstCell = tbl.Descendants<TableRow>().First()
                  .Descendants<TableCell>().First();

            firstCell.Append(new TableCellProperties(new GridSpan() { Val = 4 }));

            int ind = 0;
            int[] widthPerColumn = new int[] { 3070, 1536, 1535, 3071 };
            grid.Descendants<GridColumn>().ToList().ForEach(x =>
            {
                x.Width = widthPerColumn[ind++].ToString();
            });

            int[] gridSpan = null;
            switch (cellsQuantity)
            {
                case 4:
                    gridSpan = new int[] { 1, 1, 1, 1 };
                    break;
                case 3:
                    gridSpan = new int[] { 1, 2, 1 };
                    break;
                case 2:
                    gridSpan = new int[] { 2, 2 };
                    break;
                case 1:
                    gridSpan = new int[] { 4 };
                    break;
                default:
                    throw new InvalidOperationException("The cellsQuantity variable must have a value from [1,4] range");
            }

            for (int i = 0, max = cellsQuantity; i < max; i++)
            {
                TableCellProperties tcp = new TableCellProperties(new GridSpan() { Val = gridSpan[i] });
                TableCell cell = new TableCell(tcp, new Paragraph(new Run(new Text("test"))));
                newRow.AppendChild(cell);
            }

            tbl.Append(newRow);

            return newRow;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-07T13:23:46.623

```
TableCell tCell = new TableCell();

tCell.Append(new TableCellProperties(
    new GridSpan { Val = table.LastChild.ChildElements.Count },
    new Justification { Val = JustificationValues.Right })
); 
```

# python - 不可变的numpy数组

> ID：11186989
> 
> 赞同：1
> 
> 时间：2012-06-25T09:50:07.547
> 
> 标签：python, numpy, scipy

我的问题是该问题的扩展：不可变的[numpy 数组？](https://stackoverflow.com/questions/5541324/immutable-numpy-array)

此代码打印 False，因为即使`a`是不可变的，`b`也不是。

```
a = np.arange(10)
a.setflags(write=False)
b = a[1:]
b[1] = -1
print a == np.arange(10) 
```

这首先破坏了拥有只读数组的目的。有没有办法在 numpy 中继承 readonlibility？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T09:57:55.570

我得到：

```
>>> b[1] = -1
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
RuntimeError: array is not writeable 
```

这是 numpy 1.6.0（在 Python 2.6.2 上）。可能这是一个已修复的错误，或者是回归 - 您使用的是哪个版本的 numpy？

# android - Android C2DM 帐户

> ID：11186992
> 
> 赞同：0
> 
> 时间：2012-06-25T09:50:14.323
> 
> 标签：android, android-c2dm

我有一个使用 C2DM 服务的 Android 应用程序。我还有一个与 C2DM 集成的服务器。我成功地从 Android 和从服务器注册到 C2DM 服务器。

问题是我只能向登录到 C2DM 服务的帐户发送消息（在网站上并允许此服务）。这个帐户也是我的服务器帐户。

如何将 C2DM 邮件发送到其他 Gmail 帐户？我可以在 Android 上的 Gmail 帐户中接收 C2DM 邮件吗？

# jquery - 如何制作带有图像的下拉菜单？

> ID：11186993
> 
> 赞同：-3
> 
> 时间：2012-06-25T09:50:22.480
> 
> 标签：jquery, html, css, menu

我想创建一个带有图像的下拉菜单（它引用了子菜单。那么如何创建这个？我对网页设计有点陌生。

我想创建像[Blossomboxjewelry这样的菜单](http://www.blossomboxjewelry.com/)

到目前为止，我已经尝试过这个[Dropdownmenu](http://www.siyatechnologies.com/dropmenu/)，但我想像上面的链接一样在 div 中打开图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:54:17.540

这个问题的答案可能太长了，无法在这里给你，但[本教程](http://net.tutsplus.com/tutorials/html-css-techniques/how-to-build-a-kick-butt-css3-mega-drop-down-menu/)可能能够帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T09:54:51.480

试试这个： http: [//www.designchemical.com/lab/jquery-mega-drop-down-menu-plugin/getting-started/](http://www.designchemical.com/lab/jquery-mega-drop-down-menu-plugin/getting-started/)

# excel - 搜索 excel 依赖项的驱动器

> ID：11186995
> 
> 赞同：1
> 
> 时间：2012-06-25T09:50:50.210
> 
> 标签：excel, vba, dependencies

我目前正在简化公司的文件结构。这是一团糟。目前我在做财务部门，它在excel文件之间分配了依赖关系。这些文件我无法迁移到新结构，因为位置更改并且依赖项丢失。

因此，我正在寻找一种工具来扫描文件夹及其子文件夹以查找 excel 依赖项。我想列出这些并说：嘿，伙计们，这些文件呢？

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T10:54:15.327

下面的代码

*   `strStartFolder`在本示例中，使用递归打开位于（即“C:\temp”）指定目录中或之下的每个文件`Dir`
*   在每个文件中查找任何文件链接
*   使用数组保存然后填充最终结果

请改变你的路径`strStartFolder`以适应

*此代码以前作为文章发布在另一个论坛上*

![在此处输入图像描述](../Images/3bbca63a904a95957442d7f5aa7589fe.png)

```
Option Explicit

Public StrArray()
Public lngCnt As Long

Public Sub Main()
Dim objFSO As Object
Dim objFolder As Object
Dim WB As Workbook
Dim ws As Worksheet
Dim strStartFolder As String

'Setup Application for the user
With Application
    .ScreenUpdating = False
    .DisplayAlerts = False
End With

'reset public variables
lngCnt = 0
ReDim StrArray(1 To 4, 1 To 1000)

strStartFolder = "c:\temp"
Set objFSO = CreateObject("Scripting.FileSystemObject")

' Format output sheet
Set WB = Workbooks.Add(1)
Set ws = WB.Worksheets(1)
ws.[a1] = Now()
ws.[a2] = strStartFolder
ws.[a1:a3].HorizontalAlignment = xlLeft

ws.[A4:D4].Value = Array("Folder", "File", "Linked File", "Linked File Path")
ws.Range([a1], [c4]).Font.Bold = True
ws.Rows(5).Select
ActiveWindow.FreezePanes = True

Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objFolder = objFSO.GetFolder(strStartFolder)

' Start the code to gather the files
ShowSubFolders objFolder, True
ShowSubFolders objFolder, False

If lngCnt > 0 Then
    ' Finalise output
    With ws.Range(ws.[a5], ws.Cells(5 + lngCnt - 1, 4))
        .Value2 = Application.Transpose(StrArray)
        .Offset(-1, 0).Resize(Rows.Count - 3, 4).AutoFilter
        .Offset(-4, 0).Resize(Rows.Count, 4).Columns.AutoFit
    End With
    ws.[a1].Activate
Else
    MsgBox "No files found!", vbCritical
    WB.Close False
End If

' tidy up

Set objFSO = Nothing

With Application
    .ScreenUpdating = True
    .DisplayAlerts = True
    .StatusBar = vbNullString
End With
End Sub

Sub ShowSubFolders(ByVal objFolder, bRootFolder As Boolean)

Dim colFolders As Object
Dim objSubfolder As Object
Dim WB As Workbook
Dim lnkSources
Dim lnk

'strName must be a variant, as ParseName does not work with a string argument
Dim strFname
Set colFolders = objFolder.SubFolders
Application.StatusBar = "Processing " & objFolder.Path

If bRootFolder Then
    Set objSubfolder = objFolder
    GoTo OneTimeRoot
End If

For Each objSubfolder In colFolders
    'check to see if root directory files are to be processed
OneTimeRoot:
    strFname = Dir(objSubfolder.Path & "\*.xls*")
    Do While Len(strFname) > 0
        Set WB = Workbooks.Open(objSubfolder.Path & "\" & strFname, False)
        lnkSources = WB.LinkSources
        If Not IsEmpty(lnkSources) Then
            For Each lnk In lnkSources
                lngCnt = lngCnt + 1
                If lngCnt Mod 1000 = 0 Then ReDim Preserve StrArray(1 To 4, 1 To (lngCnt + 1000))
                StrArray(1, lngCnt) = WB.Path
                StrArray(2, lngCnt) = WB.Name
                StrArray(3, lngCnt) = Left$(lnk, InStrRev(lnk, "\"))
                StrArray(4, lngCnt) = Right$(lnk, Len(lnk) - InStrRev(lnk, "\"))
            Next

        End If
        WB.Close False
        strFname = Dir
    Loop
    If bRootFolder Then
        bRootFolder = False
        Exit Sub
    End If
    ShowSubFolders objSubfolder, False
Next
End Sub 
```

# three.js - 使用 XTK 进行对象实例化？

> ID：11186997
> 
> 赞同：0
> 
> 时间：2012-06-25T09:51:04.920
> 
> 标签：three.js, xtk

我在以下链接中看到了一个实例化示例。 [http://www.vasava.es/lab/webgl/instancing_batch/](http://www.vasava.es/lab/webgl/instancing_batch/)

是否可以使用 XTK 或three.js 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:26:44.860

关于 XTK：由于专注于医学成像数据，XTK 针对较少的大物体而不是大量小物体进行了优化。如果您查看您发布的示例代码，您会发现它们使用自定义着色器等和其他优化来获得出色的性能。Three.js 可能是执行此类操作的正确解决方案。

尽管如此，我还是很快在 XTK 中用 1000 个立方体制作了一个动画：http: [//jsfiddle.net/haehn/jjzuD/](http://jsfiddle.net/haehn/jjzuD/)

如果您比较 FPS，您会发现 XTK 在此用例中非常慢。

# sql - 在 Reporting Services 2008 中组合参数的值

> ID：11186998
> 
> 赞同：0
> 
> 时间：2012-06-25T09:51:09.320
> 
> 标签：sql, join, reporting-services, parameters, vbscript

嗨，我有一个名为“SiteOfClinic”的参数，其中列出了几个站点

1.  OHH YAC
2.  DHH 佩德斯
3.  QHH YAC
4.  TRP 垫
5.  MJH 佩德斯

到目前为止它工作正常，但现在我想将前两个（选项 1 和 2）组合在一起，所以我创建了另一个标签“OHH YAC/DHH Paeds”，但我不知道在表达式中添加什么来组合两者。

我尝试了以下但不成功

```
=SPLIT(JOIN(Parameters!HospitalSite.Value,"'OHH YAC,DHH Paeds"),"'OHH YAC,DHH Paeds") 
```

和

```
=JOIN(Parameters!HospitalSite.Value,"OHH YAC,DHH Paeds") 
```

请帮忙，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:59:57.317

```
>> ' Assuming "SiteOfClinic" (aka "Parameters!HospitalSite.Value")
>> ' is an array containing 3 string values:
>> SiteOfClinic = Array("A 0", "B 1", "C 2")
>> ' and you want an array holding the first two items, you have to create a copy:
>> Copy = SiteOfClinic
>> ' and keep just the first two items
>> ReDim Preserve Copy(1)
>> ' Use Join(array, separator) to build a string from Copy
>> s = Join(Copy, "<>")
>> WScript.Echo s
>> or Split(string, separator) to get an array from s
>> a = Split(s, "<>")
>> WScript.Echo CStr(UBound(Copy)=UBound(a)), CStr(a(0)=Copy(0))
>>
A 0<>B 1
True True 
```