# StackOverflow 问答 12070000-12070999

# android - Android：手势表现不佳

> ID：12070001
> 
> 赞同：5
> 
> 时间：2012-08-22T09:22:51.513
> 
> 标签：android

我想`Gesture`在我的应用程序中使用。所以我已经查看了这个[文档](http://android-developers.blogspot.com/2009/10/gestures-on-android-16.html)并已经创建了一个手势。然后将该手势复制到我`raw`位于的文件夹中`res/`。

从这里开始一切正常，然后我执行`OnGesturePerformedListener`如下所示：

```
if(!mLibrary.load()) {
    Log.d("Tag", "Couldn't load");
} else {
    Log.d("Tag", "Loaded");
    GestureOverlayView gesture = (GestureOverlayView) findViewById(R.id.gestures);
    gesture.addOnGesturePerformedListener(this);
} 
```

最后是我的听众：

```
public void onGesturePerformed(GestureOverlayView overlay, Gesture gesture) {
    ArrayList<Prediction> predictions = mLibrary.recognize(gesture);
    Log.d("Tag", "Performed");
    // We want at least one prediction
    if (predictions.size() > 0) {
        Prediction prediction = predictions.get(0);
        // We want at least some confidence in the result
        if (prediction.score > 1.0) {
            // Show the spell
            Toast.makeText(this, prediction.name, Toast.LENGTH_SHORT).show();
        }
    }
} 
```

问题是当我尝试绘制手势时没有任何变化。甚至`onGesturePerformed`不工作。什么问题？

我不确定，但也许布局可能会导致，这里是：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@drawable/splash_bg"
    android:screenOrientation="portrait" >

    <android.gesture.GestureOverlayView
        android:id="@+id/gestures"
        android:layout_width="fill_parent" 
        android:layout_height="0dip"
        android:layout_weight="1.0" />    

</RelativeLayout> 
```

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:04:32.177

您应该使用 GestureOverlayView 填充整个手势区域。改变

```
android:layout_height="0dip" 
```

至

```
android:layout_height="fill_parent" 
```

应该做的伎俩。

# html - 在创建两列网站时需要帮助

> ID：12070003
> 
> 赞同：-2
> 
> 时间：2012-08-22T09:23:03.107
> 
> 标签：html, frame, frameset

我必须创建一个两栏式网站，左侧是菜单，右侧是内容。我有这个索引文件-

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>Admin</title>
</head>
<frameset border="0" frameborder="0" rows="15%,*" framespacing="0">
    <frame src="atop.html">
    <frameset cols="22%,*">
        <frame src="amain.html" />
        <frame src="ad.php" name="content" id="content"/>
    </frameset>
</frameset>
</html> 
```

atop.html 在哪里-

```
<!DOCTYPE HTML>
<html>
<body>
<center><h1><u>Admin</u></h1></center>
</body>
</html> 
```

amain.html 是-

```
<!DOCTYPE html>
<html>
<body>
What do you want to do?<br />
<a target="content" href="ad.php?q=csr">CREATE STUDENT RECORD</a><br />
<a target="content" href="ad.php?q=dasr">DISPLAY ALL STUDENTS RECORD</a><br />
<a target="content" href="ad.php?q=dstr">DISPLAY SPECIFIC STUDENT RECORD</a><br />
<a target="content" href="ad.php?q=msr">MODIFY STUDENT RECORD</a><br />
<a target="content" href="ad.php?q=dsr">DELETE STUDENT RECORD</a><br />
<a target="content" href="ad.php?q=cb">CREATE BOOK</a><br />
<a target="content" href="ad.php?q=dab">DISPLAY ALL BOOKS</a><br />
<a target="content" href="ad.php?q=dsb">DISPLAY SPECIFIC BOOK</a><br />
<a target="content" href="ad.php?q=mb">MODIFY BOOK</a><br />
<a target="content" href="ad.php?q=db">DELETE BOOK</a><br />
<a target="content" href="ad.php?q=cp">CHANGE PASSWORD</a><br />
</body>
</html> 
```

和 ad.php 是-

```
<html>
<body>
<?php
$q=$_GET['q'];
echo $q;
?>
</body>
</html> 
```

主要问题是它不能正常工作。代码有什么错误，请告诉我。我会非常感谢你的！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:29:31.563

您有几件事可以改进：

*   框架已弃用。强烈不建议继续使用它们。将所有内容集中在一个页面上，如果您想拥有某种程度的模块化，请使用服务器端包含。
*   避免纯粹的表现性项目，例如`<center>`and `<u>`，使用 CSS 来达到预期的效果。

（不太重要的东西）

*   `<ul>`对菜单使用无序列表 ( )，`<br>`并不是这样使用的。
*   不要全部大写您的菜单文本，有 CSS 规则`text-transform: capitalize`可以为您做到这一点。您不应该这样做的原因是因为某些用户可能想要使用屏幕阅读器，并且会以不同的方式阅读您的文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T09:30:57.067

尝试删除框架并使用 div 来设置页面布局。按照 php 包含 3 个文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-22T10:22:49.053

只需将 ad.php 重命名为 asds.php 即可解决问题

# android - android中具有自己布局的对话框

> ID：12070005
> 
> 赞同：0
> 
> 时间：2012-08-22T09:23:20.020
> 
> 标签：android, android-layout

我有一个屏幕，上面有一些按钮。我想知道我该如何做这样的事情：当我点击按钮应用程序时，我会显示我的界面对话框，我可以在两个编辑框中编写文本，在这个对话框中我想要一个按钮。这可以用我自己的界面进行对话吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:31:44.260

是的，您实际上可以扩展布局并在警报对话框中生成它

```
 LayoutInflater factory = LayoutInflater.from(this);
        final View textEntryView = factory.inflate(R.layout.alert_dialog_text_entry, null);
        return new AlertDialog.Builder(AlertDialogSamples.this)
            .setIcon(R.drawable.alert_dialog_icon)
            .setTitle(R.string.alert_dialog_text_entry)
            .setView(textEntryView)
            .setPositiveButton(R.string.alert_dialog_ok, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {

                    /* User clicked OK so do some stuff */
                }
            })
            .setNegativeButton(R.string.alert_dialog_cancel, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {

                    /* User clicked cancel so do some stuff */
                }
            })
            .create(); 
```

这是来自 api 示例中提供的示例代码

# jquery - jQuery：提交后重置表单动作

> ID：12070008
> 
> 赞同：0
> 
> 时间：2012-08-22T09:23:24.530
> 
> 标签：jquery, forms, submit

我希望能够将表单提交到替代 URL（这不是问题） - 并在提交后将表单操作设置为原来的样子。

```
$(".submitForExport").click(function() {

    // Saves current form action
    var originalAction = $(this).parents('form').attr('action');

    // Sets form action to export URL, submits and resets form action to previous action
    $(this).parents('form').attr('action', $('#alternativeUrl').val());
    $(this).parents('form').submit();
    $(this).parents('form').attr('action', originalAction);
}); 
```

但是，上面的代码将表单提交给原始操作。好像提交动作是最后触发的？

如果最后一行被注释掉，则表单会按预期提交到备用 URL - 但现在表单操作已偏离设置为备用 URL。

有没有办法我提交后可以将操作设置为原来的样子？还是有更好的方法来做到这一点？也许是阿贾克斯？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:27:23.920

尝试`return false;`在函数末尾添加 a 。我猜您的点击事件被提交按钮捕获。因此，您的表单被提交了两次：一次使用您的手动触发`.submit()`方法，另一次在函数末尾，因为`type="submit"`按钮的原因。

# solr - Solr - 如何提高早期比赛的得分？

> ID：12070016
> 
> 赞同：10
> 
> 时间：2012-08-22T09:23:47.137
> 
> 标签：solr

如何提高我的查询与之前的特定字段匹配的文档的分数。例如，搜索“超人”应该给“超人回报”比“有我的超人”更高的分数。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T18:32:20.000

在网上阅读了很多关于此的内容后自己解决了这个问题。特别帮助我的是关于 nabble 的回复（我使用了 dismax，所以在这里解释）：

*   创建一个名为 say 'nameString' 的单独字段，该字段将值存储为`"_START_ <actual data>"`
*   将搜索查询更改为`"_START_ <actual query>"`
*   将新字段添加`nameString`为要在查询字段参数 (qf) 中查看的字段之一
*   搜索时使用参数 pf（短语字段）作为`nameString`短语 slop 为 1 或 2 的新字段（较低的值意味着更严格的搜索）

您的最终查询参数将类似于：

```
q=_START_ <actual query>
defType=dismax
qf=name nameString /* look in name field as well as nameString field */
pf=nameString /* phrase field in nameString */
ps=2 /* phrase slop */ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T18:32:21.140

检查选项@ [Ranking-based-on-term-position](http://lucene.472066.n3.nabble.com/Ranking-based-on-term-position-td979271.html)

# javascript - 在另一个下拉列表中的选择上切换下拉列表中选项的可见性

> ID：12070018
> 
> 赞同：0
> 
> 时间：2012-08-22T09:23:56.867
> 
> 标签：javascript, jquery, html

我想知道如何根据我们在另一个下拉列表中选择的内容来切换下拉列表中选项的可见性。

例如：考虑一个名为**continent**的下拉列表，其中包含以下选项：

```
 asia, europe, america, africa. 
```

**现在考虑另一个以国家为选项的名为country**的下拉列表。我需要的是，如果我从下拉**大陆中选择****亚洲**，则只有**亚洲**国家必须在下拉**国家**中可见。

 ******我无法完成这项工作。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:37:38.780

看看这个：不完全相同，但这是一个开始:)

[http://jsfiddle.net/Diabl0570/M82JF/4/](http://jsfiddle.net/Diabl0570/M82JF/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:48:07.873

这是另一个示例，比评论中的链接（我也 +1d）更简单

[http://jsfiddle.net/joevallender/Y6Rjz/1/](http://jsfiddle.net/joevallender/Y6Rjz/1/)

下面的代码

HTML

```
<label for="continent">Continent</label>
<select id="continent">
    <option value=""> -- Please select -- </option>
    <option value="asia">Asia</option>
    <option value="europe">Europe</option>
</select>

<label for="country">Country</label>
<select id="country"></select> 
```

JS

```
var data = {
    asia: [
         'china',
         'japan'
    ],
    europe: [
         'france',
         'germany'
    ]
}

$('#continent').change(function(){
    var value = $(this).val();
    var list = data[value];
    $('#country').empty();
    $('#country').append(new Option(' -- Please select -- ',''));
    for(var i = 0; i < list.length; i++) {
       $('#country').append(new Option(capitaliseFirstLetter(list[i]),list[i]))   
    }
})

// Helper from http://stackoverflow.com/questions/1026069/capitalize-the-first-letter-of-string-in-javascript
function capitaliseFirstLetter(string) {
    return string.charAt(0).toUpperCase() + string.slice(1);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T12:25:34.970

如果您对更通用的非 jquery 解决方案感兴趣，请参阅[此小提琴](http://jsfiddle.net/KooiInc/XH6vh/)******

# ruby-on-rails - Rails mail function sending emails twice

> ID：12070022
> 
> 赞同：1
> 
> 时间：2012-08-22T09:24:10.113
> 
> 标签：ruby-on-rails, ruby, email

Two emails are being sent by the code below, both with an identical message-ID, yet I suspect its probably my code.

controller:

```
 @payment.update_attributes(:status => "Confirmed") 
```

Payments Modal:

```
before_save :check_if_confirmed
before_update :check_if_confirmed

def check_if_confirmed
  if status == "Confirmed"
    tickets.each do |t|
     t.status = "Confirmed"
     t.save
  end
    Emailer.payment(self,user.id,user.full_name, user.email, self.total, self.id).deliver
end 
```

Emailer.rb

```
def payment(payment, user_id, buyer_name, email = payment.user.email, price, payment_id)
....
   mail(:from => "John Smith <john@smith.com>", :to => email, :subject => "Whatever") 
```

The email is being sent once then immediately being sent again. Its a receipt so naturally I need to stop it being sent twice.

Thoughts?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T09:36:22.590

`before_save :check_if_confirmed` is fired every time the record is being saved (even if its created)

`before_update :check_if_confirmed` is fired when record was already created and the data is just updated.

You are using the wrong callbacks, that are firing mail delivering twice. `before_save` should be enough.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:38:53.927

This is happening because of the callbacks before_save :check_if_confirmed before_update :check_if_confirmed

Use only one of them

# javascript - 计时器事件会使我在 JavaScript 中的代码变慢多少

> ID：12070023
> 
> 赞同：0
> 
> 时间：2012-08-22T09:24:10.190
> 
> 标签：javascript, jquery, performance, timer

我目前正在构建一个相当大的基于 Web 的应用程序。我的工作是使用 JavaScript 和 jQuery 构建界面。最终应用程序将使用 Ajax、C# 和 SQL。因此，在任何时间点都会发生很多事情。

我需要听一个事件。目前我正在使用 mouseover 和 mouseout 事件的组合来触发此事件，但它并没有涵盖我所有的低音。

因此，我正在考虑使用 JavaScript 间隔计时器来定期检查事件是否应该触发。我很犹豫是否这样做，因为担心我的代码太慢了。

那么我的问题是**这会减慢我的其余代码多少？**

我意识到这取决于相应函数中运行了多少代码，所以这里是发生的事情的快速列表：

*   我使用 e.pageX 和 e.pageY 获得鼠标坐标。
*   我使用 document.elementFromPoint 检查您当前悬停的元素。
*   我检查上面提到的元素是否有一个特定类的父类 .closest
*   如果是这样，则触发该事件。

所以总而言之，**我想知道每隔几毫秒执行一次上述操作是否会显着减慢我的应用程序**。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T04:48:03.653

[下面是](http://jsfiddle.net/8tfnk/1/)一个 Javascript 间隔计时器如何减慢应用程序的示例：

HTML：

```
Function calls: <span id="info"></span>
<br>
<input type="text"/>​ 
```

Javascript：

```
$(document).ready(function() {
    window.setInterval(function() {
        foo();
    }, 13);
});
var calls = 0;

function foo() {
    calls++;
    $("#info").html(calls);
    fib(35); // calculate fibonacci numbers
}

function fib(n) {
    return n < 2 ? n : fib(n - 1) + fib(n - 2);
}​ 
```

尝试在文本框中输入一些文本，您将看到应用程序的反应迟钝。根据您 PC 的硬件，您将看到您输入的文本或多或少有延迟。更改`fib()`函数的参数将使应用程序“更快”（作为参数的编号越小）或“越慢”（参数数量越多）。[较小的数字](http://jsfiddle.net/8tfnk/)（意味着函数执行速度很快）不会降低应用程序的性能。

因此，对于您当前的情况，我认为间隔计时器不会显着减慢您的应用程序。但有几点需要考虑：

*   该应用程序是否仅在具有快速硬件的桌面浏览器上使用？
*   该应用程序是否也被移动设备/平板电脑使用？这些通常具有更差的性能。
*   目前，间隔计时器只做非常简单的事情。但是未来呢？也许有时会添加越来越多的功能，因为它是开发人员最简单的方法。

因此，如果可能，我建议避免使用间隔计时器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T10:16:20.310

更多的是评论而不是答案，但对于评论框来说太多了。

当然这应该有效：

```
$('.myClass').on('click', '*', function () {
    ...
}); 
```

或者

```
$(documnt).on('click', '.myClass *', function () {
    ...
}); 
```

取决于`.myClass`元素是由 AJAX 创建`DOMContentLoaded`还是由 AJAX 创建。

# sql - 如何在sql查询Oracle Apex中的列之后添加新行

> ID：12070024
> 
> 赞同：2
> 
> 时间：2012-08-22T09:24:10.267
> 
> 标签：sql, newline, concatenation, oracle-apex, linefeed

我在我的 Oracle Apex 应用程序中运行以下 sql 查询：

```
SELECT column1 || chr(13) || chr(10) || column2 FROM table; 
```

我希望第二列显示在新行上。这似乎不适用于我的 Apex 应用程序。但是它在 SQL*PLUS 上运行。

有什么想法可能是这里的问题，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T19:42:06.713

您可以做的是将列的显示类型更改为“标准报告列”并将您的查询更改为

```
SELECT column 1 || '<br/>' || column2 FROM table; 
```

但是，您必须确保您的数据不包含有效的 HTML 或字符，因为诸如此类的内容`&gt;`会转换为 >

# android - 是否可以在 android 4.1 或任何版本中通过 android 应用程序获取浏览器 cookie 名称/值

> ID：12070026
> 
> 赞同：0
> 
> 时间：2012-08-22T09:24:21.643
> 
> 标签：android

在 android 4.1 或任何版本中是否可以通过 android 应用程序获取浏览器站点 cookie 名称/值。如果是，请提供步骤或链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:41:05.640

如果您所说的“浏览器站点 cookie”是指“某些 Web 浏览器应用程序持有的不是您编写的 cookie”，那么，不，这是不可能的，出于明显的隐私和安全原因。

# python - Django multi-db：将所有写入路由到多个数据库

> ID：12070031
> 
> 赞同：1
> 
> 时间：2012-08-22T09:24:30.700
> 
> 标签：python, django, redundancy, webfaction, django-orm

我目前正面临一个更具体的问题，该问题与将通过@WebFaction 托管的特定网站的故障转移支持/冗余有关。不幸的是，数据库级别的复制不是一个选项，因为我必须为每个帐户安装我自己的本地 PostgreSQL 实例，而且我担心性能等问题。所以我正在考虑使用 Django 的多数据库功能并将所有写入路由到所有（共享）数据库，并将读取平衡到最近的数据库。

我现在的问题是，我阅读的所有文档似乎都表明这很可能是不可能的。更准确地说，我需要什么：

*   将所有写入路由到一组特定的 dbs（相同类型，版本，...）
*   如果一个写入失败，所有其他的都将回滚（事务）
*   将所有读取路由到最近的数据库（可以静态配置）

目前这可以通过 Django 的多数据库支持实现吗？

非常感谢您提供任何帮助/提示...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:16:16.940

我正在寻找类似的东西。我发现的是：

**1)**试试 Xeround cloud DB 之类的东西——它建立在 MySQL 之上，兼容但不支持保存点。您必须在（自定义）数据库引擎中禁用此功能。好消息是它们在数据库级别进行复制并提供自动可扩展性和故障转移。您的应用程序就像有一个单独的数据库一样工作。他们目前遇到了一些连接问题，但这阻碍了我的迁移。

**2)** `django-synchro`包 - 看起来很有希望在应用层进行复制，但我对此有些担忧。它不适用于我在代码中经常使用的 objects.update()。

# php - 使用 iframe 在不同域的不同网站中显示相同数据的优点和缺点（以及可能的其他方法）

> ID：12070032
> 
> 赞同：2
> 
> 时间：2012-08-22T09:24:31.753
> 
> 标签：php, jquery, html, iframe

我需要在不同的站点（在不同的域）中集成日历 日历将是带有我们日历插件的 wordpress 安装。所有将显示日历的站点都将共享相同的数据库（因此，如果站点 A 具有“纽约”部分而站点 B 具有“纽约”部分，则显示的数据将相同，而演示文稿可能会有所不同
。网站都是用不同的技术创建的，有些是 java，有些是 asp...将日历集成到所有这些网站的明显想法是使用 iframe 并在 src 中传递一些配置参数。一个参数可以是城市，另一个可能是您正在访问的网站（相应地调整演示文稿）。例如，您将拥有

```
<iframe src="http://yourcalendar.com/new-york/site-a"> 
```

和

```
<iframe src="http://yourcalendar.com/new-york/site-b"> 
```

我想知道这种方法的缺点是什么，以及是否还有其他可能的方法。一个问题可能是无法为事件添加书签，但我认为您可以使用一些 javascript 解决此问题（我不知道是否可以从包含 iframe 的文档中捕获点击事件，因为它位于不同的域，但我认为某些事情可能会起作用）。

你怎么看？

编辑 - 也许我不清楚，我需要使用 wordpress 来显示日历（即使显示日历的网站是 Java 语言）并且这些网站不在本地网络上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:29:04.400

1.  如果 iframe 与您的网站位于同一域中，则您可以很好地在页面和 iframe 之间进行所有 javascript 对话以捕获事件。

2.  如果需要，您还可以使用 ajax 将日历的 HTML/Script 内容提取到页面，并将其写入`div`. 如果您的日历内容与您的网站位于同一域中，则此方法可以工作。

3.  如果您的日历内容需要从内容在您控制范围内的其他域中提取，那么您可以使用`jsonp`format 进行跨域内容提取。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-22T09:36:11.917

如果您的页面是动态的，我会亲自使用[JavaScript](http://api.jquery.com/load/)或[PHP 包含文件](http://php.net/manual/en/function.include.php)

IFRAMES 可以被浏览器插件或安全设置禁止或过滤，而 JavaScript 实际上从不

# ruby - 如何在自动化 Web 应用程序时捕获弹出窗口。？

> ID：12070034
> 
> 赞同：0
> 
> 时间：2012-08-22T09:24:42.003
> 
> 标签：ruby, selenium

我正在使用 ruby​​，但我的脚本无法捕获弹出窗口。我尝试了很多方法，但没有用。其中一些在这里

* * *

1.

```
@selenium.wait_for_pop_up "_blank","30000"
@selenium.select_window "_blank" 
```

* * *

2.

```
@selenium.window_focus "window title" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:39:15.313

使用水豚时，您可以执行以下操作：

```
driver = Capybara::Driver::Selenium.driver

# driver.window_handles returns a list of all current windows,
# just select the one you are interested in
window = driver.window_handles.detect {|w| ... }

driver.switch_to.window(window) do
  # do whatever you want with the selected window...
end 
```

希望这可以帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T10:14:13.260

我认为您可以获得窗口标题的总列表并选择所需的标题。希望你理解下面的java代码

```
 String wndwTitles[] = sel.getAllWindowTitles();
    sel.selectWindow(wndwTitles[1]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-12T10:19:33.653

**处理弹出窗口** *Ruby - Selenium WebDriver*

```
@driver.window_handles    
@driver.switch_to.window @driver.window_handles.<first/last> 
```

第一个 - 父窗口（从弹出窗口切换回来）
最后 - 子窗口（切换到弹出窗口）

# java - android manifest解析/从java程序读取

> ID：12070037
> 
> 赞同：1
> 
> 时间：2012-08-22T09:24:48.330
> 
> 标签：java, android, android-manifest

我需要读取 android 清单文件并从中复制一些值，例如 java 程序中的启动器活动、包名称、活动路径等。这是最好的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:30:57.837

我使用以下代码从 AndroidManifest.xml 读取版本号

```
PackageInfo pinfo = null;
try
{
     pinfo = getPackageManager().getPackageInfo(getPackageName(),0);
}
catch(Exception e)
{
    e.printStackTrace();
} 
```

您可以阅读以下版本信息，

```
String version = pinfo.versionName; 
```

同样的方式你可以使用其他属性

# .htaccess - 尝试在 Nextgen 图库中上传图像时出现 HTTP 错误

> ID：12070040
> 
> 赞同：0
> 
> 时间：2012-08-22T09:24:53.217
> 
> 标签：.htaccess, internal-server-error, nextgen-gallery, php-ini, mod-fcgid

尝试在 NextGen 图库上上传图像时出现错误。错误说：

> ERROR HTTP 错误。: HTTP 错误。

检查开发人员工具时，它说：

> POST nextgen-gallery/admin/upload.php 500（内部服务器错误）

我在网上读到可能是 php.ini 配置（限制了文件大小或进程持续时间，但我无法解决。
我也看到可以解决编辑 HTACCESS 文件但它没有导致我在任何地方。

据我所知，这与图像的大小有关。每当图像大于 100-150kb 时，它就会失败。但这不是肯定的问题。这可能会导致处理的持续时间很长，并且最终导致错误的时间有限。

你有什么建议吗？

谢谢。

* * *

更新：

php配置：

```
post_max_size 48M
upload_max_filesize 20M 
```

Apache 错误日志：

```
mod_fcgid: HTTP request length 131768 (so far) exceeds MaxRequestLen (131072) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:39:51.667

有两个限制上传文件大小的 php.ini 设置：

1.  [`post_max_size`](http://php.net/manual/en/ini.core.php#ini.post-max-size)- 设置允许的帖子数据的最大大小。此设置也会影响文件上传。要上传大文件，此值必须大于`upload_max_filesize`
2.  [`upload_max_filesize`](http://php.net/manual/en/ini.core.php#ini.upload-max-filesize)- 上传文件的最大大小。

您可以在 php.ini 中更改这些设置（如果它们不存在，您可以添加）。或者，您可以将它们设置在 .htaccess 中，如下所示：

```
php_value post_max_size 8M
php_value upload_max_filesize 1M 
```

* * *

[mod_fcgid`FcgidMaxRequestLen`指令](https://httpd.apache.org/mod_fcgid/mod/mod_fcgid.html#fcgidmaxrequestlen)只能在**服务器配置**或**虚拟主机配置中配置**（不能在 .htaccess 中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T07:58:57.620

正如 Poncha 所说，这里给出的任何 PHP 指令都与 Apache 错误日志中的错误无关。要在带有 Apache 的 CentOS 上修复 mod_fcid 包中的 128k 最大上传大小，请在终端窗口中键入以下内容：

```
vim /etc/httpd/conf.d/fcgid.conf 
```

然后将其添加到文件的末尾：

```
# Set a larger size for uploads other than the default 128k
MaxRequestLen 1073741824 
```

然后用这个重新启动Apache：

```
/etc/init.d/httpd restart 
```

全部完成！

# matlab - 具有多个参数的 levenberg marquardt 曲线拟合 MATLAB

> ID：12070044
> 
> 赞同：3
> 
> 时间：2012-08-22T09:24:57.487
> 
> 标签：matlab, curve-fitting, levenberg-marquardt

我正在尝试使用 Matlab 中的 levenberg-Marquardt 最小二乘法将具有四个未知参数的巨大函数拟合到我的数据中。我使用了这个命令：

```
[x, resnorm]=lsqcurvefit(@myfun1,[-100:100], xdata, ydata, ...
                         [-inf, -inf, -1.5, -inf], [inf, inf, 1.5, inf], options) 
```

这意味着我有兴趣限制第三个参数。但我面临这个问题：

```
??? Error using ==> lsqncommon at 102
Levenberg-Marquardt and Gauss-Newton algorithms do not handle bound constraints and trust-region-reflective algorithm
requires at least as many equations as variables; aborting.

Error in ==> lsqcurvefit at 258
[xCurrent,Resnorm,FVAL,EXITFLAG,OUTPUT,LAMBDA,JACOB] = ... 
```

我认为这个错误表明我的数据很小，因为它们是 36 个点，或者可能有太多未知参数，但我认为四个未知参数拟合就可以了！

那么，你怎么看？这是否意味着 MATLAB 无法将我的函数拟合到这 36 点数据？

我会很感激任何评论。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T09:33:22.190

根据这个[http://www.mathworks.co.uk/help/toolbox/optim/ug/lsqcurvefit.html](http://www.mathworks.co.uk/help/toolbox/optim/ug/lsqcurvefit.html)，第二个参数是您希望优化的参数的起始值。你传入

```
 [-100:100] 
```

其中（除非自从我上次使用 matlab 以来发生了很大变化）是 201 个参数的向量，因此您似乎要求 matlab 优化超过 201 个参数。正如@Dan 在下面的评论中指出的那样，您只有 36 个数据点，因此您的要求是不合理的。您只想优化 4 个参数，因此您应该只输入 4 个起始值。您正在为限制选项传递长度为 4 的向量，因此您在这里有不一致的地方。

我建议只为您的参数输入一个包含 4 个起始值的向量作为第二个参数，看看它是否会产生您期望的结果。

# codeigniter - Codeigniter 重写 URL

> ID：12070045
> 
> 赞同：2
> 
> 时间：2012-08-22T09:25:04.773
> 
> 标签：codeigniter, url-rewriting

当一个 url 模式匹配时，应该如何编写一个钩子来添加一个段附加 URL？

**例如：**

```
/site/product/id 
```

**路线：**

```
/site/product/id/title-from-query 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:24:48.197

正如您在评论中建议的那样，Codeigniter 的路线非常适合这一点。它们允许您准确控制用户/浏览器在 URL 中可以看到的内容，同时将其推送到对框架有意义的内容。

在您的 routes.php 中，您需要以下内容：

```
$route['site/product/(:num)/(:any)'] = 'controller/method/$1';
$route['site/product/(:num)] = 'controller/method/$1'; 
```

在第一行中，第二个参数`(:any)`只是允许路由接受`title-from-query`，第二行是可选的，用于处理没有`title-from-query`指定的情况。`'controller/method'`应替换为您的控制器的名称和正在使用的方法。

**更新：**

要创建这些 URL（如果数据库中还没有 slug），可以使用以下[`url_title()`](http://codeigniter.com/user_guide/helpers/url_helper.html)方法：

```
echo anchor('site/product/id'.url_title($title)); 
```

以上将在末尾创建一个带有“slug”的链接。要强制重定向，您需要检查控制器中是否设置了正确的段，如果没有则重定向。StackOverflow 的实现很可能是出于 SEO 目的，如果您删除 slug，您会被带到一个带有 slug 的地址，并且它必须使用 ID 来确定它是什么。如果未提供 slug，您将需要相同的逻辑来重定向：

```
redirect('/site/product/id/'.$slug, 'location', 301); 
```

# ios - 如何使用换行符文本字段？

> ID：12070050
> 
> 赞同：0
> 
> 时间：2012-08-22T09:25:17.913
> 
> 标签：ios, uitextfield

我在 ios 上创建一个消息应用程序。使用文本字段由用户输入消息。然后触发事件键盘输入应该从第二行开始。

请给我一个文本字段中换行符的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:32:16.723

如果要制作多行文本框，请使用 textview :)

[https://developer.apple.com/library/ios/#documentation/uikit/reference/UITextView_Class/Reference/UITextView.html](https://developer.apple.com/library/ios/#documentation/uikit/reference/UITextView_Class/Reference/UITextView.html)

好好利用开发中心，里面可以找到大部分东西：]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T09:32:36.117

每当实施换行符时，请使用以下命令：

```
 NSString *strText =  yourTextField.text;
[strText stringByAppendingString:@"\n"]; //just append string with '\n'
yourTextField.text = strText //changed value with line break 
```

最好使用 UITextView 来显示更多文本

# android - （Tabbar 隐藏）当用户从 Android 中的 Tabbar 转到下一个屏幕时？

> ID：12070052
> 
> 赞同：0
> 
> 时间：2012-08-22T09:25:22.533
> 
> 标签：android, listview, android-tabhost

目前我在Android应用程序中工作，使用Tabbar设置五个选项卡，然后我选择第三个选项卡它显示ListView，用户选择ListItem进入下一个屏幕（使用Intent），同时Tabbar被隐藏，所以我试图显示那个屏幕上的标签栏，但我不知道？请帮我

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:36:22.360

我也遇到了同样的问题。使用[这个](http://ericharlow.blogspot.com/2010/09/experience-multiple-android-activities.html) `ActivityGroup`类可以帮助我完成我的要求。您也可以尝试使用以下代码。

```
public class TabGroupActivity extends ActivityGroup {

    private ArrayList<String> mIdList;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);       
        if (mIdList == null) mIdList = new ArrayList<String>();
    }

    /**
     * This is called when a child activity of this one calls its finish method. 
     * This implementation calls {@link LocalActivityManager#destroyActivity} on the child activity
     * and starts the previous activity.
     * If the last child activity just called finish(),this activity (the parent),
     * calls finish to finish the entire group.
     */
  @Override
  public void finishFromChild(Activity child) {
      LocalActivityManager manager = getLocalActivityManager();
      int index = mIdList.size()-1;

      if (index < 1) {
          finish();
          return;
      }

      manager.destroyActivity(mIdList.get(index), true);
      mIdList.remove(index); index--;
      String lastId = mIdList.get(index);
      Intent lastIntent = manager.getActivity(lastId).getIntent();
      Window newWindow = manager.startActivity(lastId, lastIntent);
      setContentView(newWindow.getDecorView());
  }

  /**
   * Starts an Activity as a child Activity to this.
   * @param Id Unique identifier of the activity to be started.
   * @param intent The Intent describing the activity to be started.
   * @throws android.content.ActivityNotFoundException.
   */
  public void startChildActivity(String Id, Intent intent) {     
      Window window = getLocalActivityManager().startActivity(Id,intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
      if (window != null) {
          mIdList.add(Id);
          setContentView(window.getDecorView()); 
      }    
  }

  /**
   * The primary purpose is to prevent systems before android.os.Build.VERSION_CODES.ECLAIR
   * from calling their default KeyEvent.KEYCODE_BACK during onKeyDown.
   */
  @Override
  public boolean onKeyDown(int keyCode, KeyEvent event) {
      if (keyCode == KeyEvent.KEYCODE_BACK) {
          //preventing default implementation previous to android.os.Build.VERSION_CODES.ECLAIR
          return true;
      }
      return super.onKeyDown(keyCode, event);
  }

  /**
   * Overrides the default implementation for KeyEvent.KEYCODE_BACK 
   * so that all systems call onBackPressed().
   */
  @Override
  public boolean onKeyUp(int keyCode, KeyEvent event) {
      if (keyCode == KeyEvent.KEYCODE_BACK) {
          onBackPressed();
          return true;
      }
      return super.onKeyUp(keyCode, event);
  }

  /**
   * If a Child Activity handles KeyEvent.KEYCODE_BACK.
   * Simply override and add this method.
   */
  @Override
  public void  onBackPressed  () {
      int length = mIdList.size();
      if ( length > 1) {
          Activity current = getLocalActivityManager().getActivity(mIdList.get(length-1));
          current.finish();
      }  
  }
} 
```

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:42:42.580

试试这个

包含您的列表的 Activity1

```
 Activity1 extends ActivityGroup {

    ......

    yourListView.setOnItemClickListener(new OnItemClickListener() {

     public void onItemClick(AdapterView<?> arg0, View v, int position, long arg3) {
    Intent activity2Intent = new Intent(v.getContext(), Activity2.class);
    StringBuffer urlString = new StringBuffer();
    replaceContentView("activity2", activity2Intent);
    }
                        });
} 
```

并且 Activity2 必须扩展 Activity

```
public class Activity2 extends Activity {
........
} 
```

[在这里](http://gamma-point.com/content/android-how-have-multiple-activities-under-single-tab-tabactivity)看这个例子

尝试像这样将您的 listadapter 创建为单独的类

```
public class YourListAdapter extends BaseAdapter {

    private LayoutInflater mInflater;
    List<String> values;

    public YourListAdapter(Context context, List<String> values) {

        this.values = values;
        mInflater = LayoutInflater.from(context);
    }

    public int getCount() {
        return values.size();
    }

    public Object getItem(int position) {
        return values.get(position);
    }

    public long getItemId(int position) {
        return 0;
    }

    public View getView(int position, View convertView, ViewGroup parent) {

        View v = mInflater.inflate(R.layout.yourListRow, null);

        TextView txtTitre = (TextView) v.findViewById(R.id.rowTxt);
        txtTitre.setText( values.get(position););

        return v;
    }
} 
```

在您的活动中调用您的适配器以填写您的列表

```
yourListView = (ListView) findViewById(R.id.yourListView);
YourListAdapter lAdapter= new YourListAdapter(YourActivity.this, YourListStrings);
yourListView.setAdapter(lAdapter); 
```

# sitecore - 设置 __Renderings 字段未在 Sitecore 结果中共享？

> ID：12070053
> 
> 赞同：7
> 
> 时间：2012-08-22T09:25:24.467
> 
> 标签：sitecore, sitecore6

有没有人有将`__Renderings`Sitecore 中的字段设置为不共享的经验？我们正在构建一个多站点多语言解决方案，并且需要（子）布局在不同语言中有所不同。例如，英语站点可能有一个子布局，而瑞典语版本的同一项目没有，并且所有演示组件并不总是具有不同语言的相同数据源。

一个稍微简单的解决方案是简单地取消选中`__Renderings`字段中的“共享” `/sitecore/templates/System/Templates/Sections/Layout template`，但这是否有任何其他后果？还是有更好的方法来处理这个要求？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T13:05:21.217

当需要基于语言、原籍国等交换视觉元素时，我自己的偏好是使用 Sitecore 的个性化规则编辑来交换数据源并以这种方式更改呈现方式。它不涉及更改 Sitecore 的默认行为，并允许您利用内置的 Sitecore 功能。

如果您的不同“子布局”实际上只是各种个性化规则引入的数据源，您可以使用 OMS/DMS 配置所有这些，并依靠 Sitecore 引擎在当前状态下呈现您需要的组件。就性能而言，使用最新版本的 DMS 可能是最好的（我相信 6.5 Update 5 现在是推荐的版本）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T18:58:37.007

我们确实做到了这一点，而且在大多数情况下几乎没有副作用。事实上，这是获得 __Renderings 更改工作流的唯一方法。我们将它与[部分语言后备](http://sitecoreblog.alexshyba.com/2011/08/partial-language-fallback-module-update.html)相结合，以便语言可以继承英语的价值。但是要小心，就像一个项目被克隆一样，它总是会首先从克隆中提取其默认值，而不是标准值/回退。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T09:59:32.903

以这种方式修改 Sitecore 的默认行为通常不是一个好主意。对于将来可能使用该系统的其他人来说，这不是透明的，并且可能导致意想不到的结果。

Imo，最好在（子）布局内进行切换，以便根据当前语言加载不同的文件。

至于后果。当您将 _Renderings 字段设为非共享时，它将按预期工作。您将能够为每个语言版本设置不同的演示详细信息。结果是您现在必须为每个语言版本设置它......所以它不太容易管理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T11:02:52.020

我会改为使用 sitecore 的设备。对于每种语言，您都可以定义一个站点，每个站点都可以有自己的设备。如果您为每种语言（www.site.com、www.site.de、www.site.fr 等）拥有一个域名，这将是开箱即用的。

如果您有一个适用于所有语言的站点（一个主机名），则可以使用 httpRequestBegin 管道处理器切换设备。

这篇文章[http://briancaos.wordpress.com/2012/04/12/identifying-mobile-devices-in-sitecore/](http://briancaos.wordpress.com/2012/04/12/identifying-mobile-devices-in-sitecore/)描述了如何识别移动设备。重写逻辑以根据语言切换设备并不难。

当您为每种语言定义了不同的设备时，您只需将渲染放置在与您的语言匹配的设备上。对于所有渲染都相同的所有页面，您仍然可以使用备用设备。

修改 Sitecore 默认行为目前可能可行，但使用和扩展 Sitecore 平台是一种更好的前进方式。

# html - 在网站中使用 Helvetica Neue

> ID：12070055
> 
> 赞同：21
> 
> 时间：2012-08-22T09:25:25.743
> 
> 标签：html, css, fonts

通常，我`"Helvetica Neue"`在某些网站中使用字体，虽然在查看其他网站时，我看到了一些带有`"HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue"`.

有任何理由以这种方式引用 Helvetica Neue 吗？还是我应该坚持我使用的正常方式？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-22T09:46:46.573

我推荐 Chris Coyier 在 CSS Tricks 上写的这篇题为 Better Helvetica 的文章：

[http://css-tricks.com/snippets/css/better-helvetica/](http://css-tricks.com/snippets/css/better-helvetica/)

他基本上建议使用以下声明来涵盖所有基础：

```
body {
    font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; 
    font-weight: 300;
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-08-22T09:42:46.783

他们正在采用“shot弹枪”方法来引用字体。浏览器将尝试将每个字体名称与用户机器上安装的任何字体进行匹配（按照它们被列出的顺序）。

在您的示例`"HelveticaNeue-Light"`中，将首先尝试，如果此字体变体不可用，浏览器将尝试`"Helvetica Neue Light"`最后`"Helvetica Neue"`。

据我所知`"Helvetica Neue"`，它不被视为“网络安全字体”，这意味着您将无法依赖为您的整个用户群安装它。`"serif"`定义或`"sans-serif"`作为最终默认位置是很常见的。

为了使用不是“网络安全”的字体，您需要使用一种称为字体嵌入的技术。嵌入字体不需要安装在用户的计算机上，而是作为页面的一部分下载。请注意，这会增加整体有效负载（就像图像一样），并且可能会影响页面加载时间。

具有开源许可证的免费字体的一个很好的资源是[Google Fonts](http://www.google.com/fonts)。（在使用它们之前，您仍应检查各个许可证。）每种字体都有一个下载链接，其中包含有关如何将它们嵌入您的网站的说明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T09:41:32.603

假设您已经引用并正确地将您的字体集成到您的网站（可能使用@font-face 工具包），那么按照您的方式引用您的字体应该没问题。大概是这样的，所以如果某些浏览器无法正确呈现字体，它们会后退

# asp.net-mvc - 在 webgrid 中添加 sn

> ID：12070059
> 
> 赞同：2
> 
> 时间：2012-08-22T09:25:31.953
> 
> 标签：asp.net-mvc, asp.net-mvc-3, webgrid

```
 @{
      var custm = (List<custDis>)TempData["custom"];
    var count=1;    
    var grid = new WebGrid(custm, canPage: true, canSort: true, rowsPerPage: 5,ajaxUpdateContainerId:"grid");
}

@grid.GetHtml(
tableStyle:"webgrid",
headerStyle:"webgrid-header",
footerStyle: "webgrid-footer",
alternatingRowStyle: "webgrid-alternating-row",
rowStyle:"webgrid-row-style",
columns:
            grid.Columns(
            grid.Column("S.N.", format:@<text>@count </text> ),
            grid.Column("Name",format:@<text>@item.name</text>)

)) 
```

我有上面的网络网格。webgrid 显示名称。我想在网络网格中添加 sn 我该怎么做。我尝试使用计数器，但我不知道应该在哪里增加它的值。如何在上面的代码中添加 sn。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:29:47.287

如果我理解你，你想在视图上为你的 webgrid 添加计数器，看起来像这样：

```
grid.Column("S.N.", format:p=>count++) 
```

但是如果你想为 webgrid 添加分页，这是行不通的，因为每次计数器都会设置为 1。

# javascript - EmberJS 用于搜索引擎可抓取应用程序的技术堆栈

> ID：12070060
> 
> 赞同：7
> 
> 时间：2012-08-22T09:25:32.470
> 
> 标签：javascript, ruby-on-rails, node.js, playframework, ember.js

我读了很多关于客户端 JavaScript 应用程序和搜索引擎机器人爬取方法的东西。我发现了两种通用方法：

## 工作流程 1：

**前提条件：** 整个 Web 应用程序优雅地降级，并且可以在没有 JavaScript 的情况下使用。因此，搜索引擎机器人可以抓取。

1.  用户来自谷歌搜索到特定主题
2.  主题以纯 html 尽可能快地加载
3.  JS App Framework 在后台加载
4.  一旦它准备好，JS App Framework 就会接管所有的动作和路由等等。

## 工作流程 2：

**前提：** 服务器后端是按照谷歌的ajax-crawling指南（[https://developers.google.com/webmasters/ajax-crawling](https://developers.google.com/webmasters/ajax-crawling)）设计的，返回escaped_fragment urls（eg www.example.com/ajax.html?_escaped_fragment_=key =value ) 纯 html。据我了解，可以使用类似[http://phantomjs.org/](http://phantomjs.org/)的内容来确保没有前端代码重复。

1.  谷歌在他们的结果中显示了 ajax URL
2.  使用 ajax url #! 发出请求
3.  emberjs 应用程序已初始化，并根据 URL 加载所需的状态。

## 问题：

一个可抓取的 emberjs 应用程序堆栈应该是什么样子，为搜索引擎机器人和前端 js 框架提供服务器端渲染？emberjs 核心开发人员推荐什么来实现这一点？（例如 Node + Emberjs + phantomjs +- x OR Rails + Emberjs + y OR Playframework + Z）？

我知道可能有很多方法可以到达那里，但我觉得使用 stackoverflow 过滤掉常用方法会很好。

## 边注：

我已经看过一些想要创建开箱即用的完整堆栈的 JS 框架。在这里命名这些：

*   [http://derbyjs.com/](http://derbyjs.com/)（不错的方法，但仍然是 alpha）
*   [http://batmanjs.org/](http://batmanjs.org/)（不清楚生产准备如何（特别是后端））
*   [http://www.firebase.com/](http://www.firebase.com/)（有点不同，但如果他们获得正确的安全性也很有趣）
*   [http://meteor.com/](http://meteor.com/)（也是预览状态）
*   [http://developer.yahoo.com/cocktails/mojito/](http://developer.yahoo.com/cocktails/mojito/)

我特别询问了 emberjs，因为我喜欢他们的方法，而且我认为它背后的团队绝对有能力构建最好的框架之一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:07:38.610

我还没有看到像这样为 emberjs 构建的任何预先存在的东西。然而，早期尝试将 ember 集成为节点的服务器端模块。

要检查的是[derby.js](http://derbyjs.com/)，它实际上执行工作流 #1。您可能想查看他们的代码库，如果您能胜任这项任务，请将其调整为 ember。

# google-app-engine - 谷歌应用引擎 v Heroku

> ID：12070069
> 
> 赞同：2
> 
> 时间：2012-08-22T09:26:00.380
> 
> 标签：google-app-engine, heroku

现在已经大约 3 年了，我正在使用 AppEngine，根据我的应用程序问题，我也有很好的经验，最近我对[Heroku](http://www.heroku.com/)作为 PAAS 的了解很少，但坦率地说，我没有得到关于 Heroku 的确切功能，因为我可以将它用于我的下一个应用程序而不是 AppEngine，

请有人帮我介绍一下**Heroku**的基本功能，我们为什么要使用这项服务？

太谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-10T19:50:07.237

Heroku 的网站提供了所有功能：[https ://www.heroku.com/features](https://www.heroku.com/features)

在这里，我将列出它们：

1.  **建造**

    推送应用程序源代码后，Heroku 会通过检索特定于您在应用程序中使用的框架和语言的必要依赖项来准备执行它。Heroku 默认支持 Ruby、Node.js、Python、Java、Go 和 PHP，但您也可以使用自定义 buildback 选择其他语言。

2.  **配置**

    Heroku 允许您与源代码分开管理特定于环境的配置（例如支持服务的凭据），以提高安全性和可移植性。在 Heroku 中，这些数据可以通过配置变量进行管理，这些变量作为简单的环境变量提供给正在运行的应用程序。

3.  **跑**

    有时你想在你的应用程序上运行一次性 dynos——在你的应用程序环境中运行一个脚本，使用你的应用程序的控制台等。使用 heroku run，你可以快速启动你的应用程序环境的一次性实例来运行 ad-临时命令。

4.  **附加组件**

    通过 Elements Marketplace 中的 150 多个附加组件使用您喜爱的技术。附加组件是完全托管的服务，与 Heroku 集成使用。它们可以在一个命令中进行配置和扩展。附加组件为日志记录、缓存、监控、持久性等提供服务。

5.  **构建包**

    Buildpacks 是用于在 Heroku 上编译应用程序的开源脚本，特定于应用程序中的框架和语言。Heroku 支持 Ruby、Node.js、Python、Java、Go 和 PHP 的默认构建包，但您也可以从 Elements Marketplace 中的数百个社区构建包中进行选择。

6.  **纽扣**

    Heroku Buttons 让您可以一键配置、配置和部署第三方组件、库和模式应用程序。Elements Marketplace 可让您从数百个开源存储库中查看 Button 的趋势​​，因此您可以找到快速开始构建应用程序的完美秘诀。

7.  **使用 Git 部署**

    strong text 使用 git 在一个命令中将应用程序部署到 Heroku。我们将构建和运行源应用程序，处理编译、依赖项、资产和可执行文件，以便您可以专注于代码。推送到 heroku 远程的代码将在平台上快速上线和运行。学到更多。

8.  **Heroku Fork**

    Heroku fork 会为您的应用程序创建一个重复的实例，并立即在 Heroku 上运行。它可用于快速启动新的应用程序环境，在正在运行的应用程序上演示功能分支，或将应用程序迁移到 Heroku Europe。

9.  **发布**

    每当您将更改部署到您的应用程序时，Heroku 都会为您的应用程序创建一个新版本。我们保留您应用的发布历史，您可以列出所有发布、发布者和发布时间。如果某个版本出现问题，请使用 rollback 命令回滚到最新版本或特定版本，直到您可以解决问题。学到更多。

10.  **地区**

    Heroku 有两个地理区域——美国和欧洲——因此您可以将应用程序部署在离用户更近的地方，延迟更少。学到更多。

我刚开始使用 Heroku，但我喜欢的一个功能是**Config**功能。使用环境变量配置我的 Flask 应用程序时，它非常方便。看看这个 [教程]( *个人评论：这在配置 python Flask 应用程序时非常方便。例如，看看这个很棒的[教程](https://realpython.com/blog/python/flask-by-example-part-1-project-setup)。

# c++ - Boost::python with ACE , C++ 模糊符号

> ID：12070070
> 
> 赞同：1
> 
> 时间：2012-08-22T09:26:00.970
> 
> 标签：c++, visual-studio-2010, boost-python, ace

我正在尝试为 python 使用 C++ 库的接口`boost::python`，我的 C++ 代码正在使用`ACE`，现在当我包含以下代码时

```
#ifdef BUILD_PYTHON_EXT
  #include <boost/python.hpp>
  using namespace boost::python;
#endif 
```

它给了我以下错误

```
1>E:\thirdparty\ace.6.1.0_versioned_vc10\ace/ACE.h(150): error C2872: 'ssize_t' : ambiguous symbol
1>          could be 'E:\thirdparty\ace.6.1.0_versioned_vc10\ace/os_include/sys/os_types.h(126) : int ssize_t'
1>          or       'E:\thirdparty\boost_1_51_0\boost/python/ssize_t.hpp(15) : boost::python::ssize_t' 
```

我该如何解决这个错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:36:45.573

在这种情况下，您不应使用 using 指令。使用`namespace python = boost::python`或其他东西。或者，您应该包含 ACE 标头，或者在 之前包含 ACE 标头的东西`using namespace boost::python;`，但首先是更可取的。

# ios - 如何获取索引路径？

> ID：12070078
> 
> 赞同：0
> 
> 时间：2012-08-22T09:26:23.140
> 
> 标签：ios, uitableview

当我单击一个按钮时，我试图找到 UITableViewCell 的 IndexPath，它看起来并不容易，因为我也在使用 UIAlert。这是我正在使用的代码：

```
// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";

    UpdatesTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {

        NSArray* views = [[NSBundle mainBundle] loadNibNamed:@"UpdatesTableViewCell" owner:nil options:nil];

        for (UIView *view in views) {
            if([view isKindOfClass:[UITableViewCell class]])
            {
                cell = (UpdatesTableViewCell*)view;
            }
        }
    }

    cell.textLabel.text = [[dao libraryItemAtIndex:indexPath.row] valueForKey:@"Title"];
    cell.detailTextLabel.text = [[dao libraryItemAtIndex:indexPath.row] valueForKey:@"Description"];

    //////////This button is the one sending the action////////////////
    [cell.deletebutton addTarget:self action:@selector(deletetherow:) forControlEvents:UIControlEventTouchUpInside];

    imagepath = [[dao libraryItemAtIndex:indexPath.row] valueForKey:@"Photo"];

    if([imagepath isEqualToString:@"(null)"])
    {
        cell.imageView.image = [UIImage imageNamed:@"noimage.png"];
        cell.imageView.contentMode = UIViewContentModeScaleAspectFill;
        cell.imageView.clipsToBounds = YES; 

    }
    else {

        cell.imageView.image = [[[UIImage alloc] initWithContentsOfFile:imagepath] autorelease];

    }
    cell.backgroundColor = [UIColor clearColor];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    return cell;

}

- (void)deletetherow:(id)sender{

UIAlertView *message = [[UIAlertView alloc] initWithTitle:@"Title"
                                                  message:@"Delete it ?"
                                                 delegate:self
                                        cancelButtonTitle:@"Cancel"
                                        otherButtonTitles:@"delete", nil];
[message show];
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
NSString *title = [alertView buttonTitleAtIndex:buttonIndex];

if([title isEqualToString:@"Eliminar"])
{

        NSLog(@"OFFLINE");
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);        
        NSString *documentsDirectory = [paths objectAtIndex:0];        
        NSString *path = [documentsDirectory stringByAppendingPathComponent:@"datatesting.plist"];
        libraryContent = [[NSMutableArray alloc] initWithContentsOfFile:path];
        [libraryContent removeObjectAtIndex:0]; ///// Here instead 0, I want to put the indexpath to know what row content to delete.
        NSLog(@"delete the Row:%@",libraryContent);
        [libraryContent writeToFile:path atomically:YES];

        dao = [[Dfetch alloc] initWithLibraryName:@"Diario"];
        [self.tableviewnew reloadData];

    }
  }
} 
```

所以我的问题是，如何在 alertView 方法中获取 indexpath.row ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T09:34:18.633

您可以给 UIButton 一个标签并用 indexPath.row 标记它，然后当您按下按钮时，只需从 (id)sender 对象中检索它，然后从那里检索标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:34:26.337

我不确定我是否得到您的问题，但是对于将值传递给方法，您有多种可能性：

*   声明一个实例变量，赋值，在方法中使用
*   声明一个全局变量（**坏主意！**），赋值，并在方法中使用它
*   将其用作您的方法的参数（仅在未强制执行方法签名时有效，例如通过协议）

# jquery - jquery $.ajax 函数数据参数

> ID：12070079
> 
> 赞同：0
> 
> 时间：2012-08-22T09:26:24.133
> 
> 标签：jquery

我需要发送数据一个是数组另一个是单个数据。

```
var img=$('#image').val(); // image name

var formdatas=($(this).serialize()); // data from form, including to many data

data:formdatas, //legal
data:{f:formdatas,r:img}, //legal but formdatas is an array ı cant send it like this 
```

但我需要这样的东西。

```
data:{formdatas,r:img}, // this is not working 
```

这是我的完整代码，我只需要发送 2 个不同的数据。

```
$('#lastikekle').submit(function() {

    var resim=$('#resim').val();

    var formverileri=($(this).serialize());

    $.ajax({
              type:"POST",          
              url: "lastikekle.php",
              data:{formverileri,r:resim}, ????
              success: function(result){

                $( "#dialog" ).dialog();
                $("#dialog").html(result);
                                        }   
        });

    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:30:14.697

尝试：（`.serialize`返回一个字符串）

```
data: formdatas+'&r='+encodeURIComponent(img) 
```

编辑：或者你可以使用[serializeArray](http://api.jquery.com/serializeArray/)

```
$('#lastikekle').submit(function () {
    var resim = $('#resim').val();
    var formverileri = $(this).serializeArray();
    formverileri.r = resim;
    $.ajax({
        type: "POST",
        url: "lastikekle.php",
        data: formverileri,
        success : function (result) {
            $("#dialog").dialog();
            $("#dialog").html(result);
        }
    });
}); 
```

# jquery - jquery菜单手风琴样式问题

> ID：12070084
> 
> 赞同：2
> 
> 时间：2012-08-22T09:26:37.413
> 
> 标签：jquery, css, menu

我将代码发布到 jsfiddle： http: [//jsfiddle.net/kLNXa/](http://jsfiddle.net/kLNXa/)，基本上我希望整个菜单成为一个块，即如果您扩展 1 级，我不希望左侧有 15px 的间隙2 级，2 级仍保持缩进。（用红色和两个黑色边框填充的空白区域：当前是：

![](../Images/a2d0308a358fff22ea036e1781a6c27b.png)

我希望它看起来像什么：

![](../Images/c159a918805837e572b3e6fcbc1fa439.png)

然而，在我的网站上，不是颜色，而是动态背景图像，即：

![](../Images/aa7c2a9636861c211709153d6d9884fa.png)

所以我不确定每次对缩进进行分类是否有效......

以及带有背景图片的实际菜单：http: [//couch.betelnutmedia.com](http://couch.betelnutmedia.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:59:58.083

试试这个[小提琴](http://jsfiddle.net/gajjuthechamp/kLNXa/2/)

我刚刚将此代码添加到您的 CSS 底部

```
// Added Code
    .accordion li{ padding-left:0px;} 
.accordion li a{padding-left:15px; display:block } 
.accordion li ul li a{padding-left:30px;background-position:15px 50% !important;} 
.accordion li ul li ul li a {padding-left: 45px; background-position:30px 50% !important;} 
.accordion li ul li ul li ul li a {padding-left: 60px; background-position:45px 50% !important;}

​ 
```

但如果你有动态/可变级别，那么你应该选择 jQuery

# c++ - C++ 中的多线程事件处理

> ID：12070086
> 
> 赞同：2
> 
> 时间：2012-08-22T09:26:43.587
> 
> 标签：c++, multithreading, event-handling, signals

当我们想要设计一个通用的事件处理（I/O Demultiplexing）或反应器模式模型时。我们使用的底层系统调用是“select”或“poll”。但是这两个系统调用在常见的 FD 集上都不是线程安全的。不能在多线程环境中使用。

处理跨多个 I/O 的多线程事件的更好方法是什么。

我可以看到的一种方法是，主线程recv 的任何事件并推送到线程池的共享队列中。但是工作线程不能通过 I/O 发送数据导致同步问题。也有内存溢出的缺点。

欢迎所有可能的建议。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:27:21.497

大多数 Unix 提供了更多可扩展的选择/轮询替代方案，可用于多线程环境：

*   Linux有[epoll](http://linux.die.net/man/4/epoll)
*   BSD 有[kqueue](http://www.freebsd.org/cgi/man.cgi?query=kqueue&sektion=2)
*   Solaris 具有[事件完成端口](http://developers.sun.com/solaris/articles/event_completion.html)

但是在多线程环境中正确处理可能会很棘手，因此您可能需要查看现有的抽象层，例如[boost.asio](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio.html)

另一方面，boost.asio 确实引入了一些不可忽略的开销——我在[http://nginetd.cmeerw.org收集了一些关于此的信息和 epoll/kqueue 的替代抽象](http://nginetd.cmeerw.org)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T03:50:05.110

一种方法是拥有一个输入线程、一个输出线程、多个工作线程和两个阻塞队列。

输入线程解析输入消息并将它们放入队列 1。工作线程都在队列 1 上等待，处理一条消息并将它们的任何输出放入队列 2。输出线程在队列 2 上等待并将其输出序列化。

```
InputThread:
    Loop:
        M = ReadNextMessage
        Q1.push(M)

AddOutput(O):
    Q2.push(O)

WorkerThread:
    Loop:
        M = Q1.pop
        ProcessMessage(M) using AddOutput as needed

OutputThread:
    Loop:
        O = Q2.pop
        WriteOutput(O) 
```

但是我不知道你的意思是 select 不是线程安全的？所有系统调用在技术上都是线程安全的

它很古老，但仍然很有趣，是一个叫 Kegel 的人写的一篇名为“CY10K 问题”的文章。

[http://www.kegel.com/c10k.html](http://www.kegel.com/c10k.html)

它讨论了在 Linux 上构建“多 io”程序的不同方法以及每种方法的优缺点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T04:41:36.423

查看[“生产者 - 消费者问题”](http://en.wikipedia.org/wiki/Producer-consumer_problem)，这是线程安全问题的一个很好的起点。它还可以扩展到多个生产者和多个消费者。

# visual-studio-extensions - 扩展以删除代码行之间的冗余空格

> ID：12070087
> 
> 赞同：2
> 
> 时间：2012-08-22T09:26:43.463
> 
> 标签：visual-studio-extensions

我正在寻找一个 VS 2010 扩展来删除代码范围之间和内部的所有冗余空格。

有任何想法吗 ？

# windows - Ubuntu 启动菜单

> ID：12070089
> 
> 赞同：2
> 
> 时间：2012-08-22T09:26:48.267
> 
> 标签：windows, ubuntu, multiboot

我最近在 Windows 旁边安装了 ubuntu。启动时，会弹出一个来自 Ubuntu 的多重启动菜单。现在我不得不重新安装 Windows 并且多启动菜单消失了。只有 Windows 启动。有没有办法重新安装这个 Ubuntu 菜单？（有多种启动 Ubuntu 的选项，比如安全模式，......当然还有 Windows）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:29:13.957

发生这种情况的原因是因为 Windows 在安装后会安装自己的引导加载程序。您需要重置 ubuntu 引导加载程序 (GRUB)，您可以使用 ubuntu livecd 执行此操作 - 请参阅[此链接](http://www.thpc.info/how/reinstall_grub.html)

# php - 需要帮助以获取 PHP 中的操作系统信息

> ID：12070090
> 
> 赞同：-3
> 
> 时间：2012-08-22T09:26:57.117
> 
> 标签：php, operating-system

如何使用 php 找出客户端机器的操作系统签名、版本、名称

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:45:58.377

这应该对你有些用处。

```
<?php
/*
Author: Daniel Kassner
Website: http://www.danielkassner.com
*/
function getOS($userAgent) {
  // Create list of operating systems with operating system name as array key 
    $oses = array (
        'iPhone' => '(iPhone)',
        'Windows 3.11' => 'Win16',
        'Windows 95' => '(Windows 95)|(Win95)|(Windows_95)', // Use regular expressions as value to identify operating system
        'Windows 98' => '(Windows 98)|(Win98)',
        'Windows 2000' => '(Windows NT 5.0)|(Windows 2000)',
        'Windows XP' => '(Windows NT 5.1)|(Windows XP)',
        'Windows 2003' => '(Windows NT 5.2)',
        'Windows Vista' => '(Windows NT 6.0)|(Windows Vista)',
        'Windows 7' => '(Windows NT 6.1)|(Windows 7)',
        'Windows NT 4.0' => '(Windows NT 4.0)|(WinNT4.0)|(WinNT)|(Windows NT)',
        'Windows ME' => 'Windows ME',
        'Open BSD'=>'OpenBSD',
        'Sun OS'=>'SunOS',
        'Linux'=>'(Linux)|(X11)',
        'Safari' => '(Safari)',
        'Macintosh'=>'(Mac_PowerPC)|(Macintosh)',
        'QNX'=>'QNX',
        'BeOS'=>'BeOS',
        'OS/2'=>'OS/2',
        'Search Bot'=>'(nuhk)|(Googlebot)|(Yammybot)|(Openbot)|(Slurp/cat)|(msnbot)|(ia_archiver)'
    );

    foreach($oses as $os=>$pattern){ // Loop through $oses array
    // Use regular expressions to check operating system type
        if(eregi($pattern, $userAgent)) { // Check if a value in $oses array matches current user agent.
            return $os; // Operating system was matched so return $oses key
        }
    }
    return 'Unknown'; // Cannot find operating system so return Unknown
}

?> 
```

# java - 如何在 Playframework2 的 i18n 中使用单引号？

> ID：12070093
> 
> 赞同：8
> 
> 时间：2012-08-22T09:27:08.427
> 
> 标签：java, internationalization, playframework, playframework-2.0

在开发法语应用程序时（法语中充满了单引号），我需要将 i18n 与单引号和许多其他重音字符一起使用。

所以这是我的`messages.fr-FR`文件的摘录：

```
some.key=C'est la vie! 
```

这是输出：

```
Cest la vie! 
```

如何在消息中使用包含单引号的字符串？已经尝试过那些：

```
some.key=C\'est la vie! --> C\est la vie!
some.key="C'est la vie!" --> "Cest la vie!" 
```

* * *

**编辑**：感谢[KDavid](https://stackoverflow.com/users/1594880/kdavid)提供的链接，我能够找到解决方案。你必须双引号。

```
C''est la vie! --> C'est la vie! 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-22T12:29:48.073

在单引号前加上...单引号（所以只需使用两个单引号）：

```
some.key=C''est la vie! 
```

# silverstripe - Silverstripe 中的多个 many_many 关系

> ID：12070095
> 
> 赞同：0
> 
> 时间：2012-08-22T09:27:12.807
> 
> 标签：silverstripe

我只是想知道是否可以在同一个类上有多个 many_many 关系。例如，我有一个表 A、表 B 和表 C。我想要表 A 和表 B 之间的 many_many 关系以及表 A 和表 C 之间的另一个 many_many 关系。我已经尝试过了，但它没有将 ID 添加到它创建的表。我做了一些搜索，发现了这个[http://www.balbuss.com/multiple-many-many-s-of-the-same-class/](http://www.balbuss.com/multiple-many-many-s-of-the-same-class/)并且不确定现在是否可能。

很感谢任何形式的帮助。

我曾想过使用 onAfterWrite 来填充链接表，但我需要这样做吗？

```
class Table B extends DateObject {
static $belongs_many_many = array (
    'TableAs' => 'TableA'
);
}

class Table C extends DateObject {
static $belongs_many_many = array (
    'TableAs' => 'TableA'
);
}

class Table A extends Page {
    static $many_many = array (
    'TableB' => 'TableB',
    'TableC' => 'TableC'
);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:08:00.770

要在 SilverStripe 中管理 many_many 关系，您可以使用以下字段：

ss2.4:`ManyManyComplexTableField`或`ManyManyDataObjectManager`，都提供该类型所有记录的列表，并让您选择与复选框的关系

ss3.0: `GridField`，但您可能必须自己添加复选框，不确定

此外，在 2.4 和 3.0 中，还有一些下拉字段和其他支持 many_many 关系的字段（例如`TreeMultiselectField`）

* * *

我不确定评论中“遍历 TableA 的每个实例”是什么意思，如果您只想循环分配给 TableB 的单个记录的所有 TableA，那么您可以执行以下操作：

```
foreach ($tableBrecord->TableAs($filter = "", $sort = "", $join = "", $limit = "") as $tableArecord) {
   // do something with $tableArecord
} 
```

但是，如果您真的想对 TableA 的所有记录做一些事情，那么您可以这样做：

```
foreach(DataObject::get('TableA', $filter = "", $sort = "", $join = "", $limit = "") as $tableArecord) {
   // do something with $tableArecord
} 
```

如果您有很多 TableA 记录，这可能会有点慢，所以您也可以像这样进行本机查询

```
 DB::query('UPDATE TableA SET ...'); 
```

# ios - 推送通知：将设备令牌与设备相关联

> ID：12070102
> 
> 赞同：0
> 
> 时间：2012-08-22T09:27:26.630
> 
> 标签：ios, push-notification, apple-push-notifications

当发生这种情况时，我的应用程序当前正在接收与以前的应用程序用户帐户关联的推送通知：

1.  播放器安装应用程序并注册为“bob”
2.  bob 向 Web 服务注册的设备令牌
3.  播放器重新安装应用程序并注册为“phil”（在同一设备上）
4.  phil 向网络服务注册的设备令牌

即使玩家现在以“phil”身份登录，他们仍将继续接收与“bob”以及“phil”关联的帐户的推送通知。

如果我使用 UDID，我可以确保每个设备只注册一个设备令牌，因此从玩家的旧网络服务帐户“bob”中删除 UDID 和设备令牌，从而确保每个设备只有一个活动帐户。当玩家注册为“phil”并且网络服务器可以看到玩家已经使用相同的 UDID 注册了一个新帐户，然后从具有该 UDID 的任何旧帐户（即“bob”帐户）。在有人再次登录该帐户（在同一设备或新设备上）之前，不会再向 bob 帐户发送推送通知。

然而，这在使用 CFUDIDCreate 时效果不佳，因为它可能会在安装之间发生变化。

如何确保仅接收当前登录用户的推送通知？或者，换一种说法，如何确保我的 Web 服务器每个设备只存储一个设备令牌？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:59:50.317

您可以将 APNS 令牌设置为密钥服务器端，而不是设备特定标识符。重新安装应用程序时，您会将现有的（APNS 令牌，“bob”）记录替换为（APNS 令牌，“phil”），从而在重新安装应用程序时删除令牌与 bob 帐户之间的链接。

据我所知，APNS 令牌在重新安装应用程序之间不会发生变化，所以这应该可以工作。（如果它确实在未来版本的 iOS 中重新安装之间发生了变化，这不会成为问题，因为旧令牌将不再有效，因此设备不会收到发送给 bob 的通知）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T09:52:39.790

如果重新安装应用程序，生成的设备令牌是否与以前相同？我想不是。您在服务器上注册了两种不同的设备令牌，一种用于“bob”，另一种用于“phil”，或者没有？

在这种情况下，指向“bob”的令牌是无效的，您可以使用[APNS 反馈服务](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingWIthAPS/CommunicatingWIthAPS.html#//apple_ref/doc/uid/TP40008194-CH101-SW3)对其进行过滤，该服务会不断更新“每个应用程序的失败交付尝试的设备列表。这些设备是由以二进制格式编码的设备令牌标识。提供者应定期查询反馈服务以获取其应用程序的设备令牌列表，每个设备令牌都由其主题标识。然后，在验证该应用程序最近没有被重新在已识别的设备上注册，提供商应停止向这些设备发送通知。”

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-11T09:08:55.030

在 iOS 9.x 之后，每次安装应用程序时，设备令牌始终是不同且唯一的。您可以将 UUId 令牌保存到钥匙串。即使在重新安装应用程序后，钥匙串也始终持有令牌。您可以在[此处找到钥匙串文档](https://developer.apple.com/library/ios/samplecode/GenericKeychain/Introduction/Intro.html)

# compiler-construction - 在 LLVM jit 中内联函数

> ID：12070105
> 
> 赞同：1
> 
> 时间：2012-08-22T09:27:35.243
> 
> 标签：compiler-construction, llvm, jit, inlining

我是 LLVM 框架和编译器领域的新手。我正在尝试熟悉它。在编译器中做了一些初步阅读后，我有以下问题：

我想知道如何在 LLVM JIT 中完成函数内联。它是否与在 jit 编译时使用的静态内联中使用的传递相同，因为我觉得运行时（即 jit 编译时）的信息在静态编译时更好，因此一些更好的优化传递（价格便宜在时间方面）可以使用。

我错过了什么吗？我真的很感谢在这方面的一些帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T14:43:36.130

你没有错过任何东西。LLVM 过去、现在、将来可能会更适合静态编译器。它支持基本意义上的 JIT 编译（非常好，事实上，随着 MCJIT 的出现），您可以毫不费力地从 IR 转到内存中的机器代码。但它不*执行*跟踪执行或开箱即用分析等操作。您可以添加它们，但 AFAIK 对修补已经发出的代码的支持充其量是有限的（即您可能必须重新编译大量代码）。虽然您始终可以添加代码来收集指标并编写自己的优化通道以利用这些（或以其他方式针对 JIT 编译器的要求进行定制），但这需要付出很大的努力。另见：[空载燕子回顾展](http://qinsb.blogspot.de/2011/03/unladen-swallow-retrospective.html)（第三部分；请注意，该帖子已超过 1 年）。

# php - 如何在codeigniter中制作动态表单动作地址？

> ID：12070107
> 
> 赞同：3
> 
> 时间：2012-08-22T09:27:45.200
> 
> 标签：php, codeigniter

我的网站上有一个搜索表单，它看起来像这样：

```
<form action="/search/results">
<input type="text" name="keyword">
<button type="submit">  // etc...
</form> 
```

它让我进入`mysite.com/search/results/`处理帖子参数的页面。当然，我可以使用**GET**方法，然后就可以了

```
/search/results?keyword="some_keyword", 
```

但是是否可以使结果页面 URL 看起来像

```
mysite.com/search/results/keyword 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T09:37:32.947

我会使用 jQuery

```
$('#myform').submit(function(){
    $(this).attr('action', $(this).attr('action') + "/" + $(this).find(input[name="keyword"]).val());
}); 
```

另一种可能性是在您的控制器中创建一个代理方法，如果您想在 url 中包含所有帖子值，这很有用：

```
public function post_proxy() {
    $seg1 = $this->input->post('keyword');
    $seg2 = $this->input->post('keyword2');
    $seg3 = $this->input->post('keyword3');

    redirect('my_method/'.$seg1.'/'.$seg2.'/'.seg3);
} 
```

在这种情况下，我会在发布数据中使用数组来简化代码：

```
<input type="text" name="kw[1]">
<input type="text" name="kw[2]">
<input type="text" name="kw[3]">

$segment_array = $this->input->post('kw');
$segments = implode("/", $segment_array);
redirect('my_method'.$segments); 
```

# python - 如何实现这个 python 生成器

> ID：12070114
> 
> 赞同：1
> 
> 时间：2012-08-22T09:28:19.983
> 
> 标签：python, generator, yield

我尝试在 python 中创建一个生成器，它返回：

```
itemList = []
for i in myGenerator(12):
    itemList.append(i)
print itemList
>>> [0 0.334, 1, 2, 3, 4, 5, 6, 7, 8, 8.667, 9] 
```

这就是我目前所拥有的：

```
def myGenerator(index) :
    indexList = xrange(index)
    for i in indexList :
        if i == 0:
            yield 0
        elif i == 1:
            yield i/3.0
        elif i == indexList[-2]:
            yield indexList[-3] - (1 / 3.0)
        elif i == indexList[-1]:
             yield i-2
        else :
            yield i-1

for i in myGenerator(12):
    print(i) 
```

不过好像不干净……有没有别的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T09:39:05.980

我会分段构建范围：

```
from itertools import chain
def myGenerator(index):
    return chain([0, 1 / 3.0], xrange(1, index - 3), [index - 3 - 1 / 3.0, index - 3])

list(myGenerator(12))
[0, 0.33333333333333331, 1, 2, 3, 4, 5, 6, 7, 8, 8.6666666666666661, 9] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T12:42:39.183

如果您想保持原始想法但没有“if...elif...else”结构：

```
def myGenerator(index) :
    yield 0
    yield 1/3.0
    for i in xrange(1, index-3):
        yield i
    yield index - 3 - 1/3.0
    yield index - 3 
```

# perl - 在 perl 中读取和写入现有文件

> ID：12070115
> 
> 赞同：0
> 
> 时间：2012-08-22T09:28:20.363
> 
> 标签：perl

我想使用 perl 读取和写入现有文件。

谁能告诉我为此目的我必须使用什么模式：我对以下可用模式感到非常困惑。我试过了，`+>`但它没有写入文件。

```
mode operand create truncate 
read     <   
write    >    ✓      ✓ 
append  >>    ✓  

mode       operand create truncate 
read/write  +<   
read/write  +>       ✓      ✓ 
read/append +>>      ✓ 
```

例如：我有一个如下文件：

```
one
two 
four 
```

我想在两者之间插入一条线：

```
one
two
three
four 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:58:55.390

看看`perlopentut`关于[混合读取和写入](http://perldoc.perl.org/perlopentut.html#Mixing-Reads-and-Writes)的内容。结论是混合模式打开模式都不是理想的，就地编辑模式（使用`$^I`）是更好的解决方案。

对于这个特殊问题，我推荐使用该[`Tie::File`](https://metacpan.org/module/Tie%3a%3aFile)模块，它允许您将文件视为一个简单的数组。

例如，要将行`three`插入示例数据，请编写

```
use strict;
use warnings;

use Tie::File;

tie my @file, 'Tie::File', 'myfile.txt' or die $!;

splice @file, 2, 0, 'three';

untie @file or die $!; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T09:33:08.537

在[perldoc for 中`open`](http://perldoc.perl.org/functions/open.html)，您有两个直接的问题：

> +< 几乎总是首选用于读/写更新 - +> 模式将首先破坏文件。

和

> 您通常不能使用任何一种读写模式来更新文本文件，因为它们具有可变长度的记录。

更一般地说，您在尝试在文件中间插入数据时遇到了设计问题——文本文件不能这样工作。最简单的方法是：

1.  将整个文件读入内存，然后将修改后的文件写入
2.  逐行读取输入文件，将输出写入另一个经过修改的文件。然后删除原始文件并将新文件重命名为旧名称。

1) 是最简单的，但 2) 如果文件很大，则内存效率会更高。

编辑：还有[一个`-i`开关允许 Perl 就地编辑文件](http://perldoc.perl.org/perlrun.html)。它通过在幕后为您实现 2) 来实现。但是，我个人更愿意坚持自己做。这似乎比它的价值更令人困惑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T09:56:19.210

就地文件插入可能有点困难，因为必须移动数据。请参阅**[dan1111](https://stackoverflow.com/users/1584772/dan1111)**关于如何以另一种方式实现目标的[答案](https://stackoverflow.com/a/12070202/66353)（这是首选方式）。

但是，为了就地插入：

```
#!/usr/bin/env perl

use strict;
use warnings;

my $file = 'input';
open my $fh, '+<', $file or die "Failed to open $file: $!";

my $pos, @remaining_lines;
while (<$fh>) {
    if ($pos) {
        push @remaining_lines, $_;
    }
    elsif (m{^two$/$}) {
        $pos = tell;
    }
}

my $word = 'three';
seek $fh, $pos, 0;
print $fh $word, $/, @remaining_lines; 
```

# java - 以具有无限循环的线程（可调用）结束

> ID：12070117
> 
> 赞同：0
> 
> 时间：2012-08-22T09:28:30.047
> 
> 标签：java, multithreading, event-handling, thread-safety

我已经定义了一个名为“folderwatcher”的类（可调用），它正在监视特定文件夹的任何更改。主要代码在一个无限循环中，类似于： [Monitor a Directory for Changes using Java](http://www.venishjoe.net/2009/10/monitor-directory-for-changes-using.html)。我希望调用此“folderwatcher”的方法/类来侦听“folderwatcher”发现的任何事件并根据该事件执行一些操作。有谁知道我该怎么做？我需要事件处理程序吗？有什么例子吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T09:36:44.757

首先，使用无限循环的方法是错误的。如果您真的在使用，`Callable` 那么您已经在使用`ExecutorService`. 您应该使用的是 a`ScheduledExecutorService`并将您的代码安排为重复的任务。

就事件处理程序而言，这并不难实现，例如：

```
interface FileDetectedHandler { void fileDetected(File f); }

public static void main(String[] args) {
  final ScheduledExecutorService scheduler = 
     Executors.newSingleThreadScheduledExecutor();
  final FileDetectedHandler h = new FileDetectedHandler(File f) {
    public void fileDetected(File f) {
      System.out.format("File detected: %s\n", f);
  }};
  final Runnable r = new Runnable() { public void run() {
    File f = null;
    //detect file
    if (f != null) h.fileDetected(f);
  }};
  scheduler.scheduleWithFixedDelay(r, 0, 2, TimeUnit.SECONDS);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:31:51.577

使用回调。这可以通过在父对象上实现同步方法，然后将对父对象的引用传递给可运行对象的构造函数来完成。然后，runnable 可以调用父级的方法来通知它一些事情。

[http://en.wikipedia.org/wiki/Callback_(computer_programming](http://en.wikipedia.org/wiki/Callback_(computer_programming) )

# java - 在使用套接字的 java 同步方法中抛出 NullPointerException

> ID：12070118
> 
> 赞同：1
> 
> 时间：2012-08-22T09:28:31.133
> 
> 标签：java, android, sockets, nullpointerexception, synchronized

我有一个用java编写的android应用程序。

该应用程序基本上连接到发送应用程序消息的设备。在处理每条消息之前，应用程序会等待消息进入并报告它们。

我有一个**Connection**类和一个**Listener**类。

**Connection**类通过构造函数启动，该构造函数设置**Listener**类以侦听来自设备的消息。

当消息进入时，Listener 将消息发送到 Connection 类中的方法**reportMessage()**。这是处理消息的地方。

**Listener**类在一个单独的线程上。

代码如下所示。

```
public class Connection 
{
    private String response;
    private String newResponse;

    private DataInputStream reader;

    private DataOutputStream writer; 

    private Socket socket;

    private boolean keepListening;

    private Listener listener;

    public Connection (String _ipAddress, int portNumber)
    {
        newResponse = "";

        try 
        {
            socket = new Socket(_ipAddress, _port);   //Connect to the server and its socket

            writer = new DataOutputStream(socket.getOutputStream()); //Connect to the server to receive and send messages

            reader = new DataInputStream(socket.getInputStream());

            listener = new Listener(reader, this); //Create a new listener for the client

            new Thread(listener).start(); //Set the listener off running
        } 
        catch (Exception e) 
        {
            ...
        } 
    }

    public synchronized void reportMessage(String message)
    {
        try
        {
            if("".equals(newResponse))
            {
                newResponse = new String();
            }

            newResponse = newResponse + message;

            System.out.println("Message Received: " + newResponse);

            processMessage(); //Process the message
        }
        catch (Exception e)
        {
            response = e.getCause().toString();
        }
    }
}

public class Listener implements Runnable 
{
    private DataInputStream reader = null;

    private boolean keepListening;

    private String serverMessage;

    private Connection connection;

    public Listener (DataInputStream inFromServer, Connection connection)
    {
        reader = inFromServer;
                               //Get the client connection's message transfer
        keepListening = true;

        this.connection = connection;
    }

    public void run()
    {
        while (keepListening)
        {
            try
            {
                if (reader.available() > 0)
                {
                    byte[] readInData = new byte[reader.available()];  //Initialise the array

                    reader.read (readInData);  //Read in the data

                    serverMessage = Utils.byteToString(readInData);

                    connection.reportMessage(serverMessage);   //Report the message
                }
            }
            catch (IOException e)
            {
                System.out.println("Error reading." + e.getLocalizedMessage().toString());

                keepListening = false;
            }

            keepListening = connection.getKeepListening();
        }
    }
} 
```

这在一段时间内效果很好，然后有时我会收到一个导致程序崩溃的错误。

在调试模式下运行时，我会在**Connection**类中**reportMessage()**的第一行抛出**NullPointerException 。**

 ****无论是**System.out.println**还是一行实际代码，程序都挂起在第一行的任何一行。

并且错误不会被try and catch捕获。它使程序崩溃并且没有处理错误，即使它发生在 try 和 catch 中。

**这使我相信reportMessage()**方法中的任何内容都不会引发错误。如果是这种情况，那么可能是在 Listener 类**.run()**中引发了错误。

但是，我看不到可以从哪里抛出任何**NullPointerException**，因为我试图进行所有检查，并且当它被抛出时，它会在发送消息时被抛出。

调试器说“异常堆栈跟踪不可用”。

LogCat 说：

```
 08-21 10:35:57.894: E/AndroidRuntime(1118): FATAL EXCEPTION: Thread-12
  08-21 10:35:57.894: E/AndroidRuntime(1118): java.lang.NullPointerException
  08-21 10:35:57.894: E/AndroidRuntime(1118):atCom.que.wifiaudio.Connection.reportMessage(Connection.java:339)
  08-21 10:35:57.894: E/AndroidRuntime(1118):   at com.que.wifiaudio.Listener.reportIncomingMessage(Listener.java:93)
  08-21 10:35:57.894: E/AndroidRuntime(1118):   at com.que.wifiaudio.Listener.run(Listener.java:67)

  08-21 10:35:57.894: E/AndroidRuntime(1118):   at java.lang.Thread.run(Thread.java:1102) 
```

谁能帮我？

我需要知道什么是抛出 NullPointerException 以及如何阻止它！

编辑：多亏了很多帮助，现在事实证明这是我正在捕获的异常，并试图获取其原因为空。仍在尝试找出它的来源！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:32:51.407

```
 if((newResponse==null) || ("".equals(newResponse)) 
```

或者使用辉煌的番石榴：

```
 if(Strings.isNullOrEmpty(newResponse)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T09:52:28.727

我的猜测是 processMessage 中抛出了一个异常，被捕获在它下面的 catch 中，但 getCause 为空。

1/ 尝试在处理之前记录异常

2/ 查看processMessage，应该有抛出异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T09:36:43.437

我看到的一件事是，在 reportMessage() 中，您正在检查 newResponse 是否为空字符串 - 但是您之前没有对其进行初始化，因此它很可能为 null。可能你想要的是

```
if(newResponse == null) {
    newResponse = new String();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T09:31:00.313

`message`或者`newResponse`可能为 null，因为它将被编译器转换为`message.toString()`并由`newResponse.toString()`编译器转换。

为空检查添加条件：

```
if(message != null && newResponse!=null) {
   newResponse = newResponse + message;
} else {
   // throw exception ...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T09:31:41.910

代替：

```
if("".equals(newResponse)) 
```

用这个：

```
if(newResponse==null) 
```

空字符串与`null`对象不同；因此，在 is 的情况下`newResonse`，`null`它不会使用适当的`String`对象进行初始化，并且您最终会使用 NPE。****

# css - 如果导航 li:hover ul 中的绝对位置，则下拉菜单不会在 IE9 上显示

> ID：12070127
> 
> 赞同：3
> 
> 时间：2012-08-22T09:29:05.587
> 
> 标签：css, drop-down-menu, menu, position, nivo-slider

我请求你的帮助！我一直试图解决我的问题 2 天......但没有成功:(

我的问题是关于我的 CSS 菜单。当我在 CSS 文件的“nav li:hover ul”部分中指定“position:absolute”时，下拉菜单未显示在 IE9 上。但它在 Chrome、Firefox 和 Safari 中工作......如果我将其更改为“位置：相对”，菜单会下降但同时菜单的所有宽度......所以不是有一个 160px 的子菜单宽，它是 700px 宽...

我也试图找出它是否可以来自 NivoSlider 但我没有找到任何解决方案......

所以这是我的 HTML 代码：

```
 <!DOCTYPE html>
    <html id="html">
    <head>
        <meta charset="utf-8"/>
        <meta http-equiv="X-UA-Compatible" content="IE=9" />
        <meta http-equiv="X-UA-Compatible" content="IE=8" />
        <meta http-equiv="X-UA-Compatible" content="IE=7" />
        <!--[if lt IE 9]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <!--<script type="text/javascript" src="Javascript.js">
        </script>-->
        <link rel="stylesheet" href="style.css" />
        <link rel="stylesheet" href="nivo-slider.css" type="text/css" media="screen" />
        <link rel="stylesheet" href="default/default.css" type="text/css" media="screen" />
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
        <script src="jquery.nivo.slider.pack.js" type="text/javascript"></script>
        <title>McDonough & Co. Solicitors</title>
    </head>
    <body id="wrapper">
        <header>
            <section>
                <div id="logos">
                    <img alt="Logo" src="McDonough%20logo%20copy.png">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <img alt="Accredited by the Law Institute of Victoria"
                    src="file:///C:/Users/Paul/Desktop/Charlotte/McDonough%20Solicitors%20Website/LIV_Accreditation.png">
                <div id="address">
                    <br>68 Seymour Street,<br>Traralgon, 3844<br> Victoria
                    <br><br>&#9742; (03) 5176 1000<br>
                    <a href="mailto:law@mcdonough.com.au" target="_blank">&#9993; law@mcdonough.com.au</a><br>
                </div>
                </div>
                <div style="clear:both;"></div>             
            </section>
            <nav id="gradients">
                <ul>
                    <li><a href="file:///C:/Users/Paul/Desktop/Charlotte/McDonough%20Solicitors%20Website/Home.html">Home</a></li>
                    <li><a href="aboutus.html">About us</a></li>
                    <li><a href="services.html">Services</a>
                        <ul id="gradients2">
                            <li><a href="willsestates.html">&nbsp;Wills & Estate</a></li><br>
                            <li><a href="property.html">&nbsp;Property</a></li><br>
                            <li><a href="business.html">&nbsp;Business</a></li><br>
                            <li><a href="civillitigation.html">&nbsp;Civil Litigation</a></li><br>
                        </ul>
                    </li>
                    <li><a href="usefullinks.html">Useful Links</a>
                        <ul id="gradients3">
                            <li><a href="countycourt.html">&nbsp;County Court</a></li><br>
                            <li><a href="vicmagistratescourt.html">&nbsp;Victorian Magistrates</a></li><br>
                            <li><a href="supremecourt.html">&nbsp;Supreme Court</a></li><br>
                        </ul>
                    </li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </nav><br>
        </header>
        <article id="bloc_page">
            <p><section class="slider-wrapper theme-default">
                <div id="slider" class="nivoSlider">
                    <img src="images/image05.jpg" alt="">
                    <img src="images/image04.jpg" alt=""/>
                    <img src="images/image06.jpg" alt=""/>
                </div>
                <script type="text/javascript">
                    $(window).load(function() {
                    $('#slider').nivoSlider();
                    });
                </script>
                <div id="baseline">
                    "Your accredited Specialist in Business Law & Property Law since 1980"<br><br><br>
                </div>
                <div id="left">
                    "Lorem ipsum dolor sit amet, erat nominati efficiendi pri cu. Mea ut simul fabulas, mea id quot admodum. No nec interesset repudiandae, in vim dolore regione, 
                    nec possit alterum forensibus ut. Qui in magna summo scripserit, cu mel agam nullam suscipiantur. Cu admodum ponderum gubergren nec, euismod consequuntur his in.
                    Id nam diam mazim persius, quem scripserit vim ad, mei cu nulla vitae. Est ex principes posidonium, libris mediocrem pro an, has sonet diceret ex. Nec cu summo constituto. 
                </div>
                <div id="right">
                    Nibh forensibus est eu, eum et hinc commodo, id justo maiestatis usu. Velit mollis assueverit pro cu.
                    Ea mea facete scripserit repudiandae. Et ubique ocurreret dissentias sea, ferri noster malorum eu vel. Aliquip admodum liberavisse sea ne, sed in nulla solet nominati. 
                    Mei an clita vivendo assueverit, omnis lorem omittam vel at. Ut bonorum scripserit vis, cum erat erroribus omittantur te, ut tacimates honestatis sea.
                </div>
            <div style="clear:both;"></div>
            </section>
        </p></article>
    <br><br>
        <footer id="footer">
            <p>
            <a href="index.html">Home |</a>
            <a href="forum.html">About us |</a>
            <a href="contact.html">Services |</a>
            <a href="contact.html">Useful Links |</a>
            <a href="contact.html">Contact</a>
            <br><br>
            © McDonough & Co. Solicitors 2012 - All rights reserved.<br><br>
            </p>
        </footer>
    </body>
    </html> 
```

还有我的 CSS 代码：

```
 /* style.css
    ---------
    By Charlotte Routier */

    /* Structure générale */
    #html
    {
    width:740px;
    margin:auto;
    background:#e6f0fa;
    }

    /* Header */
    #logo, header h1
    {
    display: inline-block;
    margin-bottom: 20px;
    }

    /* Menu de navigation */
    nav
    {
    font-family: 'RawengulkBold';
    font-size: .9em;
    float: left;
    width: 700px;
    position:absolute;
    z-index:1200;
    -webkit-box-shadow: 0 1px 15px 0 #4a4a4a;
    -moz-box-shadow: 0 1px 15px 0 #4a4a4a;
    box-shadow: 0 1px 15px 0 #4a4a4a;
    }
    nav ul
    {
    padding: 0; /* pas de marge intérieure */
    list-style-type:none;
    text-align:center;
    left: 100%; 
    z-index:1300;
    }
    nav li
    {
    float: left;
    width:100px;
    margin-right: 40px;
    list-style-type:none;
    display:inline-block;
    }
    nav ul li a
    {
    display:inline-block;  
    width:140px;
    line-height:40px; /*hauteur de l'image de fond*/
    text-decoration:none;
    }
    nav li:hover ul, nav li li:hover ul, nav li.sfhover ul, nav li li.sfhover ul /* Sous-listes lorsque la souris passe sur un élément de liste ET sous-sous-lites lorsque la souris passe sur un élément de sous-liste */
    {
    left:auto; /* Repositionnement normal */
    font-size: .8em;
    list-style-type:none;
    position:absolute;
    z-index:900;
    display:block;
    }
    nav li ul /* Sous-listes */
    {
    z-index:100;
    position:absolute;
    float:left;
    text-align:left;
    width: 180px; /* Largeur des sous-listes */
    left: -999em; /* Hop, on envoie loin du champ de vision */
    text-decoration: none;
    min-height: 0;
    }
    nav a
    {
    font-size: 1.3em;
    color: #000;
    text-decoration: none;
    }
    nav a:hover
    {
    text-decoration: none;
    color: #A2C9EC;
        background: #444;
        background: -webkit-linear-gradient( #555, #2C2C2C);
        background:    -moz-linear-gradient( #555, #2C2C2C);
        background:     -ms-linear-gradient( #555, #2C2C2C);
        background:      -o-linear-gradient( #555, #2C2C2C);
        background:         linear-gradient( #555, #2C2C2C);
    }
    nav a:active
    {
    text-decoration: none;
    color: #a2c9ec;
        background: #444;
        background: -webkit-linear-gradient( #555, #2C2C2C);
        background:    -moz-linear-gradient( #555, #2C2C2C);
        background:     -ms-linear-gradient( #555, #2C2C2C);
        background:      -o-linear-gradient( #555, #2C2C2C);
        background:         linear-gradient( #555, #2C2C2C);
        box-shadow: 1px 1px 10px black inset, 
                    0 1px 0 rgba( 255, 255, 255, 0.4);
    }
    #gradients {
    background-image: -webkit-linear-gradient(top, #A2C9EC 0%, #e7f2fb 100%);
    background-image:    -moz-linear-gradient(top, #A2C9EC 0%, #e7f2fb 100%);
    background-image:     -ms-linear-gradient(top, #A2C9EC 0%, #e7f2fb 100%);
    background-image:      -o-linear-gradient(top, #A2C9EC 0%, #e7f2fb 100%);
    background-image:         linear-gradient(top, #A2C9EC 0%, #e7f2fb 100%);
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#A2C9EC',endColorstr='#e7f2fb', GradientType=1);
    }
    #gradients2 {
    background-image: -webkit-linear-gradient(top, #e7f2fb 0%, #A2C9EC 100%);
    background-image:    -moz-linear-gradient(top, #e7f2fb 0%, #A2C9EC 100%);
    background-image:     -ms-linear-gradient(top, #e7f2fb 0%, #A2C9EC 100%);
    background-image:      -o-linear-gradient(top, #e7f2fb 0%, #A2C9EC 100%);
    background-image:         linear-gradient(top, #e7f2fb 0%, #A2C9EC 100%);
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#e7f2fb',endColorstr='#A2C9EC', GradientType=0);
    }
    #gradients3 {
    background-image: -webkit-linear-gradient(top, #e7f2fb 0%, #A2C9EC 100%);
    background-image:    -moz-linear-gradient(top, #e7f2fb 0%, #A2C9EC 100%);
    background-image:     -ms-linear-gradient(top, #e7f2fb 0%, #A2C9EC 100%);
    background-image:      -o-linear-gradient(top, #e7f2fb 0%, #A2C9EC 100%);
    background-image:         linear-gradient(top, #e7f2fb 0%, #A2C9EC 100%);
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#e7f2fb',endColorstr='#A2C9EC', GradientType=0);
    }

    /* Slideshow */
    .nivoSlider {
    background:url(/nivo-slider/themes/bar/loading.gif) no-repeat 50% 50%;
    width: 700px !important;
    height: 230px !important;
    z-index:1;
    float:center;
    position:absolute;
    display:inline-block; 
    }
    .theme-default .nivoSlider img {
    width: 700px !important;
    height: 230px !important;
    z-index:1;
    }

    /* Corps du texte */
    body
    {
    background-color: #ffffff; /* Le fond de la page sera blanc */
    color: #000; /* Le texte de la page sera noir */
    padding-left: 40px;
    padding-right: 40px;
    -webkit-box-shadow: 0 1px 15px 0 #4a4a4a;
    -moz-box-shadow: 0 1px 15px 0 #4a4a4a;
    box-shadow: 0 1px 15px 0 #4a4a4a;
    }
    #wrapper 
    {
    width:700px;
    margin:0 auto;
    }
    @font-face {
    font-family: 'Rawengulk';
    src: url('RawengulkDemibold-webfont.eot');
    src: url('RawengulkDemibold-webfont.otf') format('truetype'),
         url('RawengulkDemibold-webfont.woff') format('woff'),
         url('RawengulkDemibold-webfont.eot?#iefix') format('embedded-opentype'),
         url('RawengulkDemibold-webfont.svg#QuadrantaBold') format('svg');
    }
    @font-face {
    font-family: 'RawengulkBold';
    src: url('RawengulkBold-webfont.eot');
    src: url('RawengulkBold-webfont.otf') format('truetype'),
         url('RawengulkBold-webfont.woff') format('woff'),
         url('RawengulkBold-webfont.eot?#iefix') format('embedded-opentype'),
         url('RawengulkBold-webfont.svg#QuadrantaBold') format('svg');
    }
    #address
    {
    font-family: 'RawengulkBold';
    color: #000;
    font-size: 1em;
    display: inline-block;
    text-align: right;
    margin-left:20px;
    vertical-align:middle;
    line-height: 18px;
    }
    #baseline
    {
    font-family: 'RawengulkBold';
    color: #000;
    font-size: 1.2em;
    text-align: center;
    }
    #left
    {
    font-family: 'Calibri';
    color: #323232;
    font-size: .8em;
    text-align: justify;
    width: 320px;
    float:left;
    margin-left:2px;
    }
    #right
    {
    font-family: 'Calibri';
    color: #323232;
    font-size: .8em;
    text-align: justify;
    width: 320px;
    float:right;
    margin-right:2px;
    }
    img
    {
    vertical-align:middle;
    }
    p
    {
    color: #000;
    font-size: .7em; 
    font-family: 'Rawengulk';
    width:100%; /* On a indiqué une largeur (obligatoire) */
    float: right;
    text-decoration: none;
    }
    a /* Liens par défaut (non survolés) */
    {
    text-decoration: none;
    color: #000;
    }
    a:hover /* Apparence au survol des liens */
    {
    text-decoration: underline;
    color: #000;
    }
    a:active 
    {
    background-color: none;
    }
    #footer
    {
    font-size: 1.1em;
    float: center;
    text-align: center;
    } 
```

不要犹豫，询问您是否需要更多详细信息。

希望你能帮助我！提前谢谢了。夏洛特

PS：这里有两张图片（一张显示下拉菜单与 Chrome 一起使用，另一张与 IE 一起使用，不工作）

*   [http://dl.dropbox.com/u/45202596/IE9.jpg](http://dl.dropbox.com/u/45202596/IE9.jpg)
*   [http://dl.dropbox.com/u/45202596/Chrome.jpg](http://dl.dropbox.com/u/45202596/Chrome.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:06:31.333

您是否检查了绝对定位元素的父元素，以确保它是相对定位的？绝对定位的元素将相对于其父容器定位。如果没有指定其他声明，一些浏览器将假定父级是相对定位的。其他浏览器会按字面意思理解您的代码，而不是那么友好。您是否还可以在 Firefox（或类似工具）中使用 Firebug 来确保元素正在页面上的某个位置“显示”并且只是遇到位置问题？如果不是，则可能是悬停目标的渲染，然后没有请求菜单显示。填充，显示：块；IE 中的宽度/高度声明是此类问题的常见原因。

# sql - 需要有关 sybase 查询的帮助

> ID：12070128
> 
> 赞同：0
> 
> 时间：2012-08-22T09:29:08.690
> 
> 标签：sql, sybase

我正在使用下面的查询来显示记录，但是如果提交的日期具有不同的时间戳，则查询将返回重复的记录 e`x:(07/30/2012 08:13:00 PM and 07/30/2012 08:14:00 PM)` 我需要时间戳同时显示在提交的日期中我不希望重复因为`group by clause convert(datetime, convert(varchar(17), fac.SUBMISSION_DT, 116)).`它应该只采用日期部分而不是带有时间戳的日期任何有助于更改查询以适应此要求的帮助将不胜感激。

```
SELECT  clm.REPRESENTATIVE as EMPLOYEE_ID , rep.USER_NM as EMPLOYEE_NAME,fac.SUBMITTED_BY as SUBMITTER_ID, srp.USER_NM as SUBMITTER_NAME,clm.CLAIM_AM as CLAIM_AM, sum(trn.ADJUSTED_AM) as SUBMITTED_AMOUNT,

**convert(datetime, convert(varchar(17), fac.SUBMISSION_DT, 116)) as SUBMITTED_DATE,**

csc.CLM_SCENARIO_DESC as SCENARIO_DESC, clm.CLAIM_TP as CLAIM_TP,fac.ACTION_ID as ACTION_ID, cac.ACTION_DESC as ACTION_DESC,  clm.CLAIM_NB as CLAIM_NB, cmp.CLAIM_ID as CLAIM_ID,cust.CUST_SGMNT_ID as CUST_SGMNT_ID,(CASE WHEN sum(trn.adjusted_am) <= 100000 THEN 'Y' ELSE 'N' END) as APPROVABLE, clm.LIABILITY_60DAYS_FLAG as LIABILITY_60DAYS_FLAG 

 FROM LIB clm, Book trn, CUST cust, FIN fac, secdbp01..SEC_USER rep, secdbp01..SEC_USER srp, ADO_CLM_SCENARIO_CD csc, ADO_CLAIM_ACTIONS cac, LCM_CLAIM_MAP cmp  

WHERE clm.CLAIM_NB = trn.CLAIM_NB  AND 
clm.CLAIM_NB = cust.CLAIM_NB  AND 
trn.STATUS_FLAG = 'P'         AND trn.TRAN_DISP = 'F'           AND 
trn.CLAIM_NB = fac.CLAIM_NB   AND
trn.POSTING_DT = fac.POSTING_DT   AND 
trn.TRANSACTION_ID = fac.TRANSACTION_ID  AND 
trn.BATCH_ID = fac.BATCH_ID   AND 
srp.USER_ID <> 'R300726'  AND 
clm.REPRESENTATIVE = rep.USER_ID  AND
srp.USER_ID = fac.SUBMITTED_BY  AND 
clm.CLM_SCENARIO = csc.CLM_SCENARIO  AND
clm.CLAIM_NB = cmp.REFERENCE_NUMBER  AND
fac.ACTION_ID = cac.ACTION_ID  AND 
clm.PROGRESS_CD IN ('03','04','15')  AND
isnull(clm.TRAINING_CLM_FLAG,'N') = 'N'  AND 
(clm.CLAIM_AM >= 0 AND 
clm.CLAIM_AM <= 1000) 

GROUP BY clm.REPRESENTATIVE, rep.USER_NM, fac.SUBMITTED_BY, srp.USER_NM, clm.CLAIM_AM,clm.CLAIM_NB,
**convert(datetime, convert(varchar(17), fac.SUBMISSION_DT, 116)),**

csc.CLM_SCENARIO_DESC, 
clm.CLAIM_TP, fac.ACTION_ID, cac.ACTION_DESC, cmp.CLAIM_ID, cust.CUST_SGMNT_ID, clm.LIABILITY_60DAYS_FLAG 
HAVING sum(trn.ADJUSTED_AM) <= 10000000
ORDER BY SUBMITTER_NAME asc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:31:43.417

利用

```
convert(datetime, convert(varchar(11), fac.SUBMISSION_DT, 116)) 
```

代替

```
convert(datetime, convert(varchar(17), fac.SUBMISSION_DT, 116)) 
```

# biztalk - 如何禁用段排序验证？

> ID：12070132
> 
> 赞同：0
> 
> 时间：2012-08-22T09:29:26.723
> 
> 标签：biztalk, esb, edi, edifact

我收到一条需要使用 Biztalk 处理的 EDIFACT 消息。当 Biztalk 拾取文件时，它会在事件日志中放置一个错误条目：

> 错误：2（段级别错误） SegmentID：MEA TS 中的位置：5442 15：此位置不支持使用段、数据类型或段

我调查了这个问题，发现 MEA 段的位置不正确。我尝试使用 Stylus Studio 转换此 EDI 文件，但在禁用段排序验证之前我遇到了同样的问题。之后，Stylus 成功地将文件转换为 XML。所以我想知道，有没有什么方法可以在 Biztalk 中禁用段排序验证？我在接收管道上禁用了 EdiDataValidation 和 XmlSchemaValidation，但我仍然收到错误消息。任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T01:46:38.577

这种情况有两种可能的解决方法：

1.  将 BizTalk 架构中父元素的“组订单类型”设置从“顺序”更改为“选择”。您还需要将“Group Max Occurs”设置从默认更改为“Unbounded”
2.  修改您的 BizTalk 架构，使 MEA 段位于您的规范所期望的位置。BizTalk 附带的 EDI 架构是一组基线，而不是确定的。大多数 B2B 场景都需要自定义这些模式以满足您与贸易伙伴的业务需求。

如前所述，以上两个是解决方法。最好的解决方案是说服您的贸易伙伴修改他们的出站文件以遵守记录在案的 EDIFACT 标准，并将 MEA 段移动到正确的位置。

# objective-c - Objective C 方法声明/调用

> ID：12070137
> 
> 赞同：1
> 
> 时间：2012-08-22T09:29:33.853
> 
> 标签：objective-c, iphone

我正在做一个关于 iPhone 编程的视频教程，它是一个非常简单的计算器应用程序。在某一时刻，我声明了以下方法：

```
- (NSString*)calculate:(NSString*)operation withNumber:(NSInteger)number 
{
    return nil; 
} 
```

目前尚未实施。然后我想用以下方法调用该方法：

```
self.display.text = [self calculate:[sender currentTitle] withNumber:[self.display.text intValue]]; 
```

Xcode 在这里给我一个错误：'expected expression'。这里有什么问题？方法是什么`withNumber`？我会理解的

```
- (NSString*)calculate :(NSString*)operation :(NSInteger)number; 
```

那是一种将字符串和int作为参数并返回String的方法。我不明白`withNumber`这里做什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T09:37:10.573

好的，要使其正常工作，您需要删除不必要的空格：

```
- (NSString*)calculate:(NSString*)operation withNumber:(NSInteger)number{
    ...
} 
```

当然也可以调用该方法。

至于'withNumber 是什么？' ：这是多输入法在 Objective-C 中的样子，方法的名称不位于参数之前。该方法实际上是`calculate:withNumber:`在运行时系统中命名的

我强烈建议阅读[一些初学者指南](http://cocoadevcentral.com/d/learn_objectivec/)

您可以这样做`- (NSString*)calculate:(NSString*)operation :(NSInteger)number`，然后您将不得不调用`[self calculate:myString :myNumber];`，但绝大多数 Objective-C 用户不会这样做：该语言使您有机会澄清您的代码并指定哪些参数是什么：抓住这个机会。

# c++ - OpenCV：读取矩阵值

> ID：12070139
> 
> 赞同：4
> 
> 时间：2012-08-22T09:29:35.703
> 
> 标签：c++, opencv, matrix, background-image, pixel

我想计算只有黑白的背景图像中白点的数量。我有这样的代码：

```
int count = 0; 
for ( int j = 0; j < Image.rows; j ++ )
    {
    for ( int i = 0; i < Image.cols; i ++ )
        {
            if ( Image.at<int>(i,j) >= 150 )
            {
                count ++ ;
            }
        }
    } 
```

由于某种原因，上面的代码不起作用，它只是停止反应。我检查了一下，“if (Image.at(i,j) >= 150)”这行导致了问题。我的“图像”是“cv::Mat”，类型为“CV_8UC3”。有人可以帮助我吗？谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-22T11:10:00.310

除了我对罗宾回答的评论之外，您的错误是您尝试将 CV_8UC3 类型的图像作为整数访问。如果你想检查灰度，做这样的事情（注意“unsigned char”而不是“int”，如罗宾的回答）。

```
cv::Mat greyscale;
cv::cvtColor(image,grayscale,CV_RGB2GRAY);
// either, most elegant:
int count = cv::countNonZero(greyscale >= 150);
// or, copied from Robin's answer:
int count = 0;
for(int i = 0; i < greyscale.rows; ++i) {
    const unsigned char* row = greyscale.ptr<unsigned char>(i);
    for(int j = 0; j < greyscale.cols; j++) {
        if (row[j] >= 150)
            ++count;
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-22T10:50:01.227

我相信这更整洁：

```
Mat result;
threshold(Image,result,150,255,THRESH_BINARY);
int white_count = countNonZero(result); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T09:45:13.717

如果您使用 i 表示列，使用 j 表示行，`Image.at<unsigned char>(j,i)`则不要写。`Image.at<unsigned char>(i,j)`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-22T09:46:52.397

我认为您必须访问列之前的行，这意味着您应该交换 i 和 j。
替换`if ( Image.at<int>(i,j) >= 150 )`为`if ( Image.at<int>(j,i) >= 150 )`

不过，有更简单的方法可以访问 Mat。
OpenCV 提供了一个类似 STL 的迭代器，它易于使用，如果您想访问所有元素，则非常易于使用。例子：

```
int count = 0;
MatConstIterator_<int> it = Image.begin<int>(), it_end = Image.end<int>();
for(; it != it_end; ++it)
    if ((*it) >= 150)
        ++count; 
```

最后但同样重要的是，您还可以获得指向每一行的指针并通过普通 [] 运算符访问数据：

```
int count = 0;
for(int i = 0; i < Image.rows; ++i) {
    const int* Ii = Image.ptr<int>(i);
    for(int j = 0; j < Image.cols; j++) {
        if (Ii[j] >= 150)
            ++count;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-22T11:47:01.087

您可以使用 opencv 字节向量（无符号字符像素）访问 CV_8UC3 像素！在这种情况下，您可以进行以下操作（现在您还可以使用一些特殊的颜色阈值）

```
int channel = 0;
Image.at<Vec3b>( row , col )[channel] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-25T04:49:30.207

访问 cv::Mat 图像的方法有很多，如果要直接访问彩色图像（**CV_8UC3**），可以通过以下方式实现：

```
int count = 0;
int threshold = 150;
for(int j = 0; j < img.rows; j++) {
   for(int i = 0; i < img.cols; i++) {
      //white point which means that the point in every channel(BGR)
      //are all higher than threshold!
      if(img.ptr<cv::Vec3b>(j)[i][0] > threshold && 
         img.ptr<cv::Vec3b>(j)[i][1] > threshold 
         img.ptr<cv::Vec3b>(j)[i][2] > threshold ) {
             count++;
         }

    }
 } 
```

但我建议如果您只想计算白点，您可以将图像转换为灰度（**CV_8UC1**），然后执行以下操作：

```
cv::Mat img;
cv::cvtColor(src,img,CV_BGR2RGB);
int count = 0;
int threshold = 150;
for(int j = 0; j < img.rows; j++) {
   for(int i = 0; i < img.cols; i++) {
      if(img.ptr<uchar>(j)[i] > threshold) {
            count++;
      }
   }
} 
```

最后要注意的是，通过**img.ptr< [Imagetype](https://stackoverflow.com/questions/17569097/opencv-c-how-access-pixel-value-cv-32f-through-uchar-data-pointer) >**访问cv::Mat图像不会检查访问点是否正确，所以如果你肯定知道图像的范围，那么通过ptr访问图像就可以了，否则，你可以这样做通过**img.at< Imagetype>()**，它会在每次调用时检查每个点是否正确，[为什么通过 ptr 访问图像更快](https://stackoverflow.com/questions/14277643/opencv-mat-array-access-which-way-is-the-fastest-for-and-why) ，所以如果有无效的访问点，它会断言你！

# android - iOS/android 混合应用分发/架构模型请帮助或建议

> ID：12070148
> 
> 赞同：0
> 
> 时间：2012-08-22T09:30:05.120
> 
> 标签：android, iphone, ios, mobile, cordova

我对开发的移动端还很陌生，所以请原谅我的天真。

我想知道是否有可能具有如下结构/分布模型：

Master App（有许多“中间人”实例）！！中间人（可以通过 Web 应用程序和重新分发自定义数据、外观和感觉）（拥有许多最终用户查看器）！！！最终用户查看器（可以使用中间人的自定义信息下载和安装中间人 abc 的应用程序）

这可能吗？我已经搜索了很多，但也许我正在搜索错误的术语？

我在想也许有几个选择，如果听起来不对，请告诉我。

选项 1 - 中间人提供一个特殊的密钥代码，最终用户在安装应用程序后输入它以解锁它，从而存储唯一的中间人 ID 并仅显示他们的自定义信息。用户只需输入一次代码。关系可能存储在mysql中？

选项 2 - 为每个中间人创建主模板的构建并提供二进制/安装链接以及自定义的 ini 文件以加载正确的 ID？或者类似的东西。

还有更好的选择吗？允许将升级/新功能轻松传递给所有实例的东西。

如果多个中间人决定他们想要在应用商店中使用这种类型的东西，苹果商店会有什么问题吗？

也许我让它比需要的更复杂，并且可以只为每个最终用户使用一个简单的“需要登录”，并且最终用户以某种方式与那个中间人联系在一起？

\根据中间人的要求，该应用也可以是安卓应用

提前感谢您提供任何建议或有用信息的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:15:16.747

如果我正确理解了您的问题，那么它是一个与后端绑定的直接移动应用程序。

*   中间人的用户凭证，应与您的特殊密钥代码相关联。
*   将您的参与者（用户）与访问后端内容的角色和权限相关联。
*   您的移动应用程序将提取仅与登录用户关联的内容。

除此之外，您还可以存储内容以供离线等使用。采用 phonegap 方法，它几乎可以满足您的需求。

# mysql - 我可以使用 phpMyAdmin 或 MySQL 在没有时间戳列的情况下检查记录的创建或修改时间吗？

> ID：12070149
> 
> 赞同：5
> 
> 时间：2012-08-22T09:30:07.693
> 
> 标签：mysql, phpmyadmin, admin

**设想。**

具有地址列表的简单数据库

```
addressID
FirstName
LastName
City
PostCode
CountyID
ZoneID 
```

问题是，默认情况下，该表最后没有创建或时间戳列。但是，我可以通过我的 Nginx SSH Ubuntu 11 设置完全访问 MySQL - 我也可以登录到 root phpMyAdmin。

例如，我可以检查特定条目的创建、修改等时间吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T09:34:53.823

**简而言之，没有**。这在 99% 的情况下并非不可能。尤其是在 MySQL 的环境中。NoSQL 和 MongoDB 等其他服务和其他环境有所不同。

现在在 phpMyAdmin 中运行此脚本以备将来使用（您已经建议您要制作邮票记录）。

```
ALTER  TABLE Addresses
ADD Column CreatedOrModified timestamp
NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP; 
```

您还可以使用 NULL 和 DateTime Stamp 作为默认值。您还可以让 PHP 在 MySQL 字段中发送数据：

```
$stamp=$date=date("Y-m-d H:i:s"); 
```

# javascript - 虚假的 Ajax 请求

> ID：12070152
> 
> 赞同：2
> 
> 时间：2012-08-22T09:30:27.910
> 
> 标签：javascript, backbone.js, jasmine

为了检查ajax请求的提交，当用户提交表单时，我使用jasmine（1）实现了以下测试。

测试成功通过，但查看 javascript 控制台我收到以下错误`500 (Internal Server Error)`。

由于我不关心服务器响应，我的问题是：
1）我应该还是不应该关心这个错误。
2）伪造ajax请求以避免更好`Internal Server Error`吗？如果是，在我的情况下如何？

* * *

(1)

```
define([
    'backendController'
], function (backendController) {
    // some code
    describe('When button handler fired', function () {
        beforeEach(function () {
            spyOn(backendController, 'submitRequest1').andCallThrough();
            this.view = new MyView({
                el: $('<div><form><input type="submit" value="Submit" /></form></div>')
            });
            this.view.$el.find('form').submit();
        });
        it('backendController.submitRequest1 should be called', function () {
            expect(backendController.submitRequest1).toHaveBeenCalled();
        });
    });
}); 
```

* * *

(2)

```
// backendController object
return {
    submitRequest1: function (message) {
        return $.ajax({
            url: 'someUrl',
            type: 'POST',
            dataType: 'json',
            data: {
                message: message
            }
        }).done(function () {
            // some code
        });
    }
} 
```

* * *

(3)

```
// submitForm in MyView
submitForm: function (event) {
    event.preventDefault();

    var formElement =  event.currentTarget;

    if (formElement.checkValidity && !formElement.checkValidity()) {
        this.onError();
    } else {
        backendController. submitRequest1('some data').done(this.onSuccess).fail(this.onError);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:35:52.683

您的测试*显示“应该调用 backendController.submitRequest1”*，因此您只关心要调用的方法。所以，不要这样`andCallThrough()`，你就没有麻烦了。

### 更新

也许您必须`preventDefault()`在*提交事件中*这样：

```
spyOn(backendController, 'submitRequest1').andCallFake(function(e) { e.preventDefault(); }); 
```

### 更新 2

在检查了您已添加到问题的其余代码后，我仍然建议您尽快停止代码执行。直到测试到达，这仍然​​是直到`backendController.submitRequest1()`被调用。

*在这种情况下，在方法中使用简单的模拟*是不够的，因为随后会使用此方法的*返回，并且您的**模拟*应该尊重这一点：

```
// code no tested
var fakeFunction = function(){
  this.done = function(){ return this };
  this.fail = function(){ return this };
  return this;
}

spyOn(backendController, 'submitRequest1').andCallFake( fakeFunction ); 
```

当事情开始变得如此复杂时，测试是一种症状，也许它们可以更好地组织起来。

# view - 查看 ClearCase 中元素列表的历史记录

> ID：12070154
> 
> 赞同：2
> 
> 时间：2012-08-22T09:30:36.647
> 
> 标签：view, timestamp, history, clearcase

我是 ClearCase 的新手，最近我将文件列表从 branch 合并`A`到 branch `B`。
当时我检查了为我合并的每个文件保留了时间戳选项。

现在，客户需要查看看起来的那个，因此他们要求为每个文件提供快照，并将其“**创建的时间戳**”和“**修改的时间戳**”作为列表。

我尝试使用**History**选项，但没有得到**Created date time stamp**。
我怎样才能得到那个时间戳信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:14:32.943

查看这些文件的一种方法是将它们选择到视图中：
您可以尝试在其配置规范中使用基于时间的选择规则的视图。
我会推荐一个动态视图（这样，您可以快速修改配置规范并进行多次尝试以选择正确的版本）

有关示例或此类配置规范，请参阅“[如何找出上个月分支中发生的所有活动？ ”。](https://stackoverflow.com/questions/1577980/how-to-find-out-all-the-activities-happend-in-a-branch-in-the-last-month)

* * *

但是，如果您要查看由视图选择的文件列表，但带有“修改日期”*和*“**创建日期**”，那么`cleartool find`使用[fmt_ccase 语法](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m1/topic/com.ibm.rational.clearcase.cc_ref.doc/topics/fmt_ccase.htm)的简单就足够了：

这将为您提供所有创建日期：

```
ct find . -type f -exec "cleartool descr -fmt \"%n %e:%d\n\" \"%CLEARCASE_PN%@@\"" 
```

这将为您提供所有最后修改日期：

```
ct find . -type f -exec "cleartool descr -fmt \"%n %e:%d\n\" \"%CLEARCASE_PN%\"" 
```

唯一的区别在于' `@@`'，在一种情况下是用于引用元素本身（具有创建日期），而在另一种情况下（没有' `@@`'）是用于引用版本（代表最后修改日期） .

# c# - C#中的目录重命名异常

> ID：12070160
> 
> 赞同：0
> 
> 时间：2012-08-22T09:30:57.817
> 
> 标签：c#

当我尝试使用以下代码重命名目录时：

```
 try
  {
        System.IO.Directory.Move(oldPath, newPath);
  }
  catch (System.IO.IOException e2)
  {
        Console.WriteLine(e2.Message);
  } 
```

我得到以下异常：该进程无法访问该文件，因为它正在被另一个进程使用。

1.  我不明白为什么它首先说“文件”。
2.  另外，目录是空的。它指的是什么文件？
3.  最后，如何无一例外地重命名目录？

**更新：**我想我找到了异常的原因，这是因为我试图重命名位于 Google Drive 中的文件/文件夹的文件/文件夹名称。Google Drive 应用程序是使用它的另一个进程！有什么解决方案可以重命名 Google Drive 中的文件夹？但奇怪的是，当我尝试通过 C# 重命名位于 Google Drive 中的文件时，我没有收到此异常。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:35:54.570

您的文件夹似乎正在被另一个进程使用。尝试关闭使用该文件夹的资源管理器或其他程序。如果没有任何帮助 - 尝试重新启动您的机器。如果这些都无济于事 - 考虑使用[Unlocker](http://www.emptyloop.com/unlocker/)将文件夹从另一个进程的使用中释放出来。注意，如果重启机器后非系统文件夹被占用，那就很奇怪了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:36:55.413

1.  它说“文件”是因为底层命令可能对目录和文件都使用通用移动命令，并且本地化错误字符串包含单词文件。
2.  即使目录是空的，如果您在应用程序中“打开”它，它也可以被锁定以进行任何编辑（您是否在目录中打开了资源管理器 Windows，命令提示符当前目录是否设置为您要移动的目录/删除）？
3.  不幸的是，除非您想开始以编程方式杀死有问题的进程，否则您无能为力。

您可以使用 Process Explorer 查找锁定该文件夹的进程。有关详细信息，请参阅[http://windowsxp.mvps.org/processlock.htm](http://windowsxp.mvps.org/processlock.htm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T09:37:01.403

1 验证 newPath 已经不存在

[http://msdn.microsoft.com/en-us/library/system.io.directory.move.aspx](http://msdn.microsoft.com/en-us/library/system.io.directory.move.aspx)

2 确认您的目录不包含打开的文件

# delphi - 如何使用 dbExpress 从 Firebird 获取表描述（字段和类型）

> ID：12070162
> 
> 赞同：15
> 
> 时间：2012-08-22T09:31:11.013
> 
> 标签：delphi, firebird, dbexpress

我使用 TSQLConnection 的 GetTableNames 和 GetFieldNames 方法编写了一个显示数据库结构的工具。如何获得类似于以下列表的每个字段名称的类型（这是构建表所需的 DDL 的一部分）？

```
TABLE: ARTICLES
ID INTEGER NOT NULL
PRINTED SMALLINT DEFAULT 0
ACADEMIC SMALLINT
RELEVANCE SMALLINT
SOURCE VARCHAR(64) CHARACTER SET WIN1251 COLLATE WIN1251
NAME VARCHAR(128) CHARACTER SET WIN1251 COLLATE WIN1251
FILENAME VARCHAR(128) CHARACTER SET WIN1251 COLLATE WIN1251
NOTES VARCHAR(2048) CHARACTER SET WIN1251 COLLATE WIN1251 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-22T13:47:37.753

这是不完整的（因为我从未使用过 Firebird 数组数据类型）并且没有经过太多测试，但也许它会给你一个很好的起点：

```
SELECT
  RF.RDB$FIELD_NAME FIELD_NAME,
  CASE F.RDB$FIELD_TYPE
    WHEN 7 THEN
      CASE F.RDB$FIELD_SUB_TYPE
        WHEN 0 THEN 'SMALLINT'
        WHEN 1 THEN 'NUMERIC(' || F.RDB$FIELD_PRECISION || ', ' || (-F.RDB$FIELD_SCALE) || ')'
        WHEN 2 THEN 'DECIMAL'
      END
    WHEN 8 THEN
      CASE F.RDB$FIELD_SUB_TYPE
        WHEN 0 THEN 'INTEGER'
        WHEN 1 THEN 'NUMERIC('  || F.RDB$FIELD_PRECISION || ', ' || (-F.RDB$FIELD_SCALE) || ')'
        WHEN 2 THEN 'DECIMAL'
      END
    WHEN 9 THEN 'QUAD'
    WHEN 10 THEN 'FLOAT'
    WHEN 12 THEN 'DATE'
    WHEN 13 THEN 'TIME'
    WHEN 14 THEN 'CHAR(' || (TRUNC(F.RDB$FIELD_LENGTH / CH.RDB$BYTES_PER_CHARACTER)) || ') '
    WHEN 16 THEN
      CASE F.RDB$FIELD_SUB_TYPE
        WHEN 0 THEN 'BIGINT'
        WHEN 1 THEN 'NUMERIC(' || F.RDB$FIELD_PRECISION || ', ' || (-F.RDB$FIELD_SCALE) || ')'
        WHEN 2 THEN 'DECIMAL'
      END
    WHEN 27 THEN 'DOUBLE'
    WHEN 35 THEN 'TIMESTAMP'
    WHEN 37 THEN 'VARCHAR(' || (TRUNC(F.RDB$FIELD_LENGTH / CH.RDB$BYTES_PER_CHARACTER)) || ')'
    WHEN 40 THEN 'CSTRING' || (TRUNC(F.RDB$FIELD_LENGTH / CH.RDB$BYTES_PER_CHARACTER)) || ')'
    WHEN 45 THEN 'BLOB_ID'
    WHEN 261 THEN 'BLOB SUB_TYPE ' || F.RDB$FIELD_SUB_TYPE
    ELSE 'RDB$FIELD_TYPE: ' || F.RDB$FIELD_TYPE || '?'
  END FIELD_TYPE,
  IIF(COALESCE(RF.RDB$NULL_FLAG, 0) = 0, NULL, 'NOT NULL') FIELD_NULL,
  CH.RDB$CHARACTER_SET_NAME FIELD_CHARSET,
  DCO.RDB$COLLATION_NAME FIELD_COLLATION,
  COALESCE(RF.RDB$DEFAULT_SOURCE, F.RDB$DEFAULT_SOURCE) FIELD_DEFAULT,
  F.RDB$VALIDATION_SOURCE FIELD_CHECK,
  RF.RDB$DESCRIPTION FIELD_DESCRIPTION
FROM RDB$RELATION_FIELDS RF
JOIN RDB$FIELDS F ON (F.RDB$FIELD_NAME = RF.RDB$FIELD_SOURCE)
LEFT OUTER JOIN RDB$CHARACTER_SETS CH ON (CH.RDB$CHARACTER_SET_ID = F.RDB$CHARACTER_SET_ID)
LEFT OUTER JOIN RDB$COLLATIONS DCO ON ((DCO.RDB$COLLATION_ID = F.RDB$COLLATION_ID) AND (DCO.RDB$CHARACTER_SET_ID = F.RDB$CHARACTER_SET_ID))
WHERE (RF.RDB$RELATION_NAME = :TABLE_NAME) AND (COALESCE(RF.RDB$SYSTEM_FLAG, 0) = 0)
ORDER BY RF.RDB$FIELD_POSITION; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-22T09:50:24.657

使用对 RDB$ 表的直接访问。例如：

```
SELECT * FROM rdb$relations 
```

将为您提供数据库中所有表的列表。

```
SELECT
  *
FROM
  rdb$relation_fields rf JOIN rdb$fields f
    ON f.rdb$field_name = rf.rdb$field_source
WHERE
  rf.rdb$relation_name = :RN 
```

将生成给定表的所有字段的列表，其中包含字段类型的信息。参数 RN 是表的名称。

使用 RDB$tables 中的信息可以轻松构建 DDL 语句。下面的查询为您提供了如何执行此操作的提示：

```
SELECT
  TRIM(rf.rdb$field_name) || ' ' ||
  IIF(rdb$field_source LIKE 'RDB$%',
  DECODE(f.rdb$field_type, 
    8,  'INTEGER', 
    12, 'DATE', 
    37, 'VARCHAR', 
    14, 'CHAR', 
    7,  'SMALLINT'),
  TRIM(rdb$field_source)) ||
  IIF((rdb$field_source LIKE 'RDB$%') AND (f.rdb$field_type IN (37, 14)),
    '(' || f.rdb$field_length || ')',
    '') ||
  IIF((f.rdb$null_flag = 1) OR (rf.rdb$null_flag = 1), 
    ' NOT NULL', '')
FROM
  rdb$relation_fields rf JOIN rdb$fields f
    ON f.rdb$field_name = rf.rdb$field_source
WHERE
  rf.rdb$relation_name = '<put_your_table_name_here>' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-23T04:19:51.430

使用 TLama 提供的链接，我找到了自己的解决方案，与上述解决方案有些相似，但更简单。

```
SELECT R.RDB$FIELD_NAME AS field_name,
CASE F.RDB$FIELD_TYPE
 WHEN 7 THEN 'SMALLINT'
 WHEN 8 THEN 'INTEGER'
 WHEN 9 THEN 'QUAD'
 WHEN 10 THEN 'FLOAT'
 WHEN 11 THEN 'D_FLOAT'
 WHEN 12 THEN 'DATE'
 WHEN 13 THEN 'TIME'     
 WHEN 14 THEN 'CHAR'
 WHEN 16 THEN 'INT64'
 WHEN 27 THEN 'DOUBLE'
 WHEN 35 THEN 'TIMESTAMP'
 WHEN 37 THEN 'VARCHAR'
 WHEN 40 THEN 'CSTRING'
 WHEN 261 THEN 'BLOB'
 ELSE 'UNKNOWN'
END AS field_type,
F.RDB$FIELD_LENGTH AS field_length,
CSET.RDB$CHARACTER_SET_NAME AS field_charset
FROM RDB$RELATION_FIELDS R
LEFT JOIN RDB$FIELDS F ON R.RDB$FIELD_SOURCE = F.RDB$FIELD_NAME
LEFT JOIN RDB$CHARACTER_SETS CSET ON F.RDB$CHARACTER_SET_ID = CSET.RDB$CHARACTER_SET_ID
WHERE R.RDB$RELATION_NAME= :p1
ORDER BY R.RDB$FIELD_POSITION 
```

p1 是作为参数传递给查询的表名。

在上下文中，我有一个树视图，它的节点是给定数据库的表名；对于每个节点，子节点是字段及其定义。

```
 sqlcon.GetTableNames (dbTables);    // sqlcon is the TSQLConnection
 tv.items.Clear;
 for i:= 1 to dbTables.count do
  begin
   node:= tv.items.Add (nil, dbTables[i - 1]);
   with qFields do                   // the above query
    begin
     params[0].asstring:= dbTables[i - 1];
     open;
     while not eof do
      begin
       tv.items.addchild (node, trim (fieldbyname ('field_name').asstring) + ', ' +
                                trim (fieldbyname ('field_type').asstring) + ', ' +
                                fieldbyname ('field_length').asstring + ', ' +
                                fieldbyname ('field_charset').asstring);
       next
      end;
     close
    end
  end; 
```

这是正在运行的程序的屏幕截图。我意识到格式与我引用的 DDL 不同，但每个字段的含义很明显（至少对我而言，这是我私人使用的程序）。

![在此处输入图像描述](../Images/3adf3c9ca76d342cb556ee12d8121956.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-25T21:29:47.923

我对支持按字段计算的第一个选项进行了一点更改，添加了 field_position 并制作了一个视图以使其更容易。

```
CREATE VIEW TABLES (
  TABLE_NAME,
  FIELD_NAME,
  FIELD_POSITION,
  FIELD_TYPE,
  FIELD_NULL,
  FIELD_CHARSET,
  FIELD_COLLATION,
  FIELD_DEFAULT,
  FIELD_CHECK,
  FIELD_DESCRIPTION
)
AS
SELECT
  RF.RDB$RELATION_NAME,
  RF.RDB$FIELD_NAME FIELD_NAME,
  RF.RDB$FIELD_POSITION FIELD_POSITION,
  CASE F.RDB$FIELD_TYPE
    WHEN 7 THEN
      CASE F.RDB$FIELD_SUB_TYPE
        WHEN 0 THEN 'SMALLINT'
        WHEN 1 THEN 'NUMERIC(' || F.RDB$FIELD_PRECISION || ', ' || (-F.RDB$FIELD_SCALE) || ')'
        WHEN 2 THEN 'DECIMAL'
      END
    WHEN 8 THEN
      CASE F.RDB$FIELD_SUB_TYPE
        WHEN 0 THEN 'INTEGER'
        WHEN 1 THEN 'NUMERIC('  || F.RDB$FIELD_PRECISION || ', ' || (-F.RDB$FIELD_SCALE) || ')'
        WHEN 2 THEN 'DECIMAL'
      END
    WHEN 9 THEN 'QUAD'
    WHEN 10 THEN 'FLOAT'
    WHEN 12 THEN 'DATE'
    WHEN 13 THEN 'TIME'
    WHEN 14 THEN 'CHAR(' || (TRUNC(F.RDB$FIELD_LENGTH / CH.RDB$BYTES_PER_CHARACTER)) || ') '
    WHEN 16 THEN
      CASE F.RDB$FIELD_SUB_TYPE
        WHEN 0 THEN 'BIGINT'
        WHEN 1 THEN 'NUMERIC(' || F.RDB$FIELD_PRECISION || ', ' || (-F.RDB$FIELD_SCALE) || ')'
        WHEN 2 THEN 'DECIMAL'
      END
    WHEN 27 THEN 'DOUBLE'
    WHEN 35 THEN 'TIMESTAMP'
    WHEN 37 THEN
     IIF (COALESCE(f.RDB$COMPUTED_SOURCE,'')<>'',
      'COMPUTED BY ' || CAST(f.RDB$COMPUTED_SOURCE AS VARCHAR(250)),
      'VARCHAR(' || (TRUNC(F.RDB$FIELD_LENGTH / CH.RDB$BYTES_PER_CHARACTER)) || ')')
    WHEN 40 THEN 'CSTRING' || (TRUNC(F.RDB$FIELD_LENGTH / CH.RDB$BYTES_PER_CHARACTER)) || ')'
    WHEN 45 THEN 'BLOB_ID'
    WHEN 261 THEN 'BLOB SUB_TYPE ' || F.RDB$FIELD_SUB_TYPE
    ELSE 'RDB$FIELD_TYPE: ' || F.RDB$FIELD_TYPE || '?'
  END FIELD_TYPE,
  IIF(COALESCE(RF.RDB$NULL_FLAG, 0) = 0, NULL, 'NOT NULL') FIELD_NULL,
  CH.RDB$CHARACTER_SET_NAME FIELD_CHARSET,
  DCO.RDB$COLLATION_NAME FIELD_COLLATION,
  COALESCE(RF.RDB$DEFAULT_SOURCE, F.RDB$DEFAULT_SOURCE) FIELD_DEFAULT,
  F.RDB$VALIDATION_SOURCE FIELD_CHECK,
  RF.RDB$DESCRIPTION FIELD_DESCRIPTION
FROM RDB$RELATION_FIELDS RF
JOIN RDB$FIELDS F ON (F.RDB$FIELD_NAME = RF.RDB$FIELD_SOURCE)
LEFT OUTER JOIN RDB$CHARACTER_SETS CH ON (CH.RDB$CHARACTER_SET_ID = F.RDB$CHARACTER_SET_ID)
LEFT OUTER JOIN RDB$COLLATIONS DCO ON ((DCO.RDB$COLLATION_ID = F.RDB$COLLATION_ID) AND (DCO.RDB$CHARACTER_SET_ID = F.RDB$CHARACTER_SET_ID))
WHERE (COALESCE(RF.RDB$SYSTEM_FLAG, 0) = 0)
ORDER BY RF.RDB$FIELD_POSITION
; 
```

# php - 如何隐藏apache服务器版本？

> ID：12070165
> 
> 赞同：1
> 
> 时间：2012-08-22T09:31:24.980
> 
> 标签：php, client-server, security

1]当我打开任何网页并查看源代码时。我们有 JS 和 CSS。单击该按钮时，我可以看到每个 JS 和 CSS 文件。

我们可以像在单击时一样管理它。js & .css 文件未打开

2] 网站托管在 linux 服务器上。通过工具，黑客能够查看 Apache 服务器版本。有什么办法隐藏吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T09:33:33.047

不，JavaScript 和 CSS 文件对浏览器开放，因此它们对用户开放。您可以尝试忽略它们，但这只会拖延坚定的用户。

发生错误（404、500）时会显示服务器版本，您可以使用自己的页面覆盖该默认消息`.htaccess`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T09:37:50.310

CSS 和 JS 文件将被任何人和每个人看到。他们在 HTTP 上工作；）顺便说一句......你想要隐藏的是你的服务器端代码，比如 asp、jsp、php。看不到这些文件的源代码。

对于您的第二个问题：打开您的 .htaccess 并输入以下内容。

```
ServerSignature Off 
```

这样，对于任何错误，它都不会显示您正在使用的服务器或版本。

希望它回答你:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T09:38:09.747

当用户获得程序时，他会获得将要执行的代码。例如，在桌面上它可能是二进制数据。在 Web 开发中，没有二进制数据，浏览器获取代码，用户获取代码。你可能只会忽略它。

# search - 哪些工具或库支持对树执行包含查询？

> ID：12070170
> 
> 赞同：0
> 
> 时间：2012-08-22T09:31:32.823
> 
> 标签：search, graph, tree, xquery

我一直在开发一种包含查询语言的实现，它的文档非常有限，并且没有可用作指南的参考实现。包含语言查询树结构中是否存在树模式，语法如下：

```
A CONTAINS B CONTAINS ((C contains A) AND (C CONTAINS D)) 
```

A、B、C 和 D 是树节点的类型，或者从更通用的角度来看，它们是节点的标签。A CONTAINS B 表示 A 在树中某处下方有一个子 B。

实现需要返回使用上述语句查询的树实例的所有匹配子树（表示部分定义的树）。它还需要考虑模式出现的组合，例如，在上面的查询中，如果 C 在其下方有 2 个 A 实例，则 C-A1 与 CD 和 C-A2 与 CD 是两个不同的匹配项等。

我已经设计了自己的解决方案，但是我没有任何可以用作参考的东西，或者在我的代码旁边的回归测试中更好，以确保我的实现始终如一且正确地运行。

最棘手的一点是查询语言中的逻辑运算符。我将研究使用 XML 作为参考实现的 XQuery（目前不确定它是否可以做我想做的事情），但我也很想听听其他选项。开源会很棒，但即使是专有工具也能胜任。支持这种类型查询的图形数据库，也许是一些带有 RDF 的语义工具等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:33:57.627

我尝试使用 XQuery（Zorba 实现）进行概念验证：

[http://www.zorba-xquery.com/html/demo#f63nK4ICLH22](http://www.zorba-xquery.com/html/demo#f63nK4ICLH22)

我希望这有帮助。

# kohana-auth - 我们可以在 kohana v 3.0 中全局打开或关闭 XSS 过滤器吗？

> ID：12070172
> 
> 赞同：0
> 
> 时间：2012-08-22T09:31:36.773
> 
> 标签：kohana-auth

我们可以在 Kohana v 3.0 中全局设置`on`或`off`XSS 过滤器吗？

我有以下搜索

```
 $config['global_xss_filtering'] = TRUE; 
```

它应该通过检查全局激活`xss`，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T21:08:35.677

'global_xss_filtering' 选项适用于 Kohana v2。我建议您阅读[Kohana 3.0 的 xss 安全安全指南](http://kohanaframework.org/3.0/guide/kohana/security/xss)。

# html - CSS子选择器问题

> ID：12070173
> 
> 赞同：4
> 
> 时间：2012-08-22T09:31:36.833
> 
> 标签：html, css, css-selectors

谁能告诉我在下面的例子中“标题”和“标题 2”是如何被染成红色的？[http://jsfiddle.net/zxfNU/1/](http://jsfiddle.net/zxfNU/1/)

HTML

```
<div id="root">
    <p>
        <p>Test 1</p>

        <h3>Heading</h3>

        <h3>Heading 2</h3>

    </p>
</div>

<h3>Heading 3</h3> 
```

CSS

```
div#root > h3
{
    color: red;
} 
```

如果它在 div 下，CSS 不是只选择一个 h3 元素，而实际上它在 p 元素下？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T09:34:32.763

`p`inside`p`不是有效的标记。所以结果html是：

```
<div id="root">
    <p></p>
    <p>Test 1</p>
    <h3>Heading</h3>       
    <h3>Heading 2</h3>
    <p></p>
</div> 
```

如您所见，浏览器修复了错误的标记以遵循规范。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-22T09:36:32.877

而不是`<p>`use `<div>`，因为`<p>`inside`<p>`不是有效的标记。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T09:37:11.650

这是因为 ap 标签内的 p 标签不是有效的 Html 使用 Inspect 元素，您会发现您的 html 为

```
 <div id="root">
    <p>
        </p><p>Test 1</p>

        <h3>Heading</h3>

        <h3>Heading 2</h3>

    <p></p>
</div>

<h3>Heading 3</h3> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T09:37:31.947

看看呈现的 HTML，例如在 Firebug 中：

![在此处输入图像描述](../Images/cf261ad1f8383b97c47233dc24a162f5.png)

那是因为你不能把一个`p`放在另一个里面`p`

@您编辑的小提琴：

现在呈现以下 HTML：

![在此处输入图像描述](../Images/e59996a552bd5bf9d1badc13e3aa9db5.png)

而且，当您还将 CSS 更改为 时`div > h3`，它仍然是红色的。

# php - Zend 项目的更改路径

> ID：12070174
> 
> 赞同：0
> 
> 时间：2012-08-22T09:31:37.070
> 
> 标签：php, zend-framework, netbeans, url-rewriting

我是新手，`ZF`并且正在使用`netbeans IDE`创建 zend 项目。当我运行这个项目时，它会打开一个`"Index of /ZendProject1"`带有目录的目录，当我点击文件夹“public”时，我会得到我在下面写的内容`"applicationiews\scripts\index\index.phtml"`。

我希望我的 Zend 项目可以通过`http://localhost/ZendProject1/`而不是通过 -->访问`http://localhost/ZendProject1/public/`。

我需要为 zend 文件夹更改哪些设置..因为我目前在我的 htdocs 下有很多项目，所以从 httpd.conf 设置更改不是一个合理的解决方案。我认为必须管理一些设置，尽管我用谷歌搜索但没有解决方案:(

> 注意——我在 Zend 学习模式，所以请给我一些链接，我可以在这些链接中找到更多关于 zend 的教程，除了 [http://devzone.zend.com/](http://devzone.zend.com/)和 [http://www.phpeveryday.com/articles/Zend-框架-基础-教程-P840.html](http://www.phpeveryday.com/articles/Zend-Framework-Basic-Tutorial-P840.html)。（熟悉PHP，了解MVC设计模式的基本概念）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:36:21.980

将`.htaccess`文件添加到每个项目的目录（项目的根目录，不公开）。它应该包含：

```
RewriteEngine On
RewriteRule ^(.*)/?$ public/$1 [L] 
```

# jquery - jquery - 如何使动态内容识别加载功能？

> ID：12070182
> 
> 赞同：2
> 
> 时间：2012-08-22T09:31:55.570
> 
> 标签：jquery

有人给我一些好的建议吗？，我有一个页面，我正在生成一些东西并将其附加到元素中。稍后在新页面中，我使用 jquery 加载函数加载元素，当我执行加载函数时，我只得到静态部分，没有任何动态元素或数据是我创建的。原因是什么？

我知道动态内容不在 dom 树中，如果是这样，我如何重新绘制我的 dom 树以加载由动态制作的任何内容以识别加载功能？

如果这根本不可能，那么有人给我正当的理由或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:39:08.717

与任何 AJAX 请求一样，`.load`只会向服务器发出请求，并且只会检索服务器发送给它的内容。目标服务器发送相同的响应，无论它是用户浏览页面，还是 AJAX 或其他 HTTP 请求获取页面上的信息：它只是按照指示发回内容 - 在您的情况下是一个 HTML 文档其中包含一些 JavaScript，以及如何创建新元素的说明。

如果用户浏览到该页面，浏览器将执行此 JavaScript 代码，这反过来会导致创建这些元素。如果您使用 请求页面`.load`，您将获得完全相同的信息，并将其放入容器中。如果您还希望执行 JavaScript，则必须手动执行它。

# ruby - Ruby：如何一次安全地要求目录中的所有类？

> ID：12070186
> 
> 赞同：0
> 
> 时间：2012-08-22T09:32:08.440
> 
> 标签：ruby, require

在`Ruby`我可以一次要求一个目录中的所有类文件：

```
Dir["/path/to/directory/*.rb"].each {|file| require file } 
```

但是如果类有继承关系呢？如何避免在超类之前要求子类？（或者这是不可能的？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:27:22.300

实际上有一个肮脏的技巧，假设您已将所有文件命名为对应于类名。但是这种方法只有在不同类之间 只有**继承关系时才有效。**不考虑多次**覆盖方法。**

假设您在需要的目录中有两个 rb 文件：*engineer.rb*和*human.rb*。

--*工程师.rb*

```
class Engineer < Human
end 
```

--*人类.rb*

```
class Human
end 
```

在另一个需要它们的文件中，如果你先指定工程师，你会得到一个错误：

```
require 'engineer' #=> uninitialized constant Human (NameError)
require 'human' 
```

所以我们可以简单地使用强大的武器**自动加载**：

```
Dir['/path/to/directory/*.rb'].each do |f|
  module_name = /\/([^\/\.]+?)\.rb$/.match(f)[1].capitalize.to_sym
  autoload(module_name, f)
end

#=> autoload :Engineer, 'engineer'
#=> autoload :Human, 'human'

puts Engineer.new #=> #<Engineer:0x007f91728847e8> 
```

基本上自动加载会按需加载文件，因此请求的顺序不再是问题。

如果您想了解更多关于自动加载的信息，请查看这里： [http ://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-autoload](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-autoload) [http://www.rubyinside.com/ ruby-techniques-revealed-autoload-1652.html](http://www.rubyinside.com/ruby-techniques-revealed-autoload-1652.html)

但请注意，自动加载很快就会失效（因为它不是线程安全的），请参阅此处（由 Matz 提供）： [http ://www.ruby-forum.com/topic/3036681](http://www.ruby-forum.com/topic/3036681)

# silverlight - 当索引名称包含“[]”特殊字符时如何在 Xaml 中绑定索引

> ID：12070189
> 
> 赞同：1
> 
> 时间：2012-08-22T09:32:24.603
> 
> 标签：silverlight, xaml, binding

我写 DateTemplate 绑定索引，像这样

```
<DataTemplate x:Key="VisitorCellTemplate">
     <TextBlock Text="{Binding [[GroupName].[ItemName]]}"/>
</DataTemplate> 
```

**[GroupName].[ItemName]**是索引键。

我试着写

> {绑定 ['[措施].[访问]']}

但不能建造。

帮我！谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:43:43.193

在此 MSDN 页面中[查看属性路径字符串](http://msdn.microsoft.com/en-us/library/ms742451.aspx#databinding_s)的转义

它解释了通常您可以通过使用反斜杠来转义特殊字符，`\`并且您需要在索引器中使用`^`carret`[]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:49:54.550

试试这个：对任何特殊字符使用反斜杠`\`（看这个例子`{Binding Path=\[Maxe\], Mode=OneWay"]}`：），除非你在一个索引器中，你应该使用这个`^`符号（例如，当你访问一个数组时`{Binding Path=Names['^[Maxe^]'], Mode=OneWay"}`：）

所以在你的情况下：

```
{Binding Path='\[Measures\].\[Visits\]'} 
```

# python - 为什么 datetime.strptime 在这个简单的例子中不起作用？

> ID：12070193
> 
> 赞同：62
> 
> 时间：2012-08-22T09:32:41.327
> 
> 标签：python, string, datetime, type-conversion, datetime-format

我正在使用[strptime](http://docs.python.org/library/datetime.html#datetime.datetime.strptime)将日期字符串转换为`datetime`. 根据链接页面，这样的格式应该可以工作：

```
>>> # Using datetime.strptime()
>>> dt = datetime.strptime("21/11/06 16:30", "%d/%m/%y %H:%M") 
```

我的代码是：

```
import datetime
dtDate = datetime.strptime(sDate,"%m/%d/%Y") 
```

哪里`sDate = "07/27/2012"`。（我从同一页理解，即`%Y`“*以世纪为十进制数的年份。”*）

我尝试将 sDate 的实际值放入代码中：

```
dtDate = datetime.strptime("07/27/2012","%m/%d/%Y") 
```

但这不起作用。我得到的错误是：

> AttributeError：“模块”对象没有属性“strptime”

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-08-22T09:45:59.073

你应该使用`datetime.datetime.strptime`. 请注意，非常旧的 Python 版本（2.4 和更早版本）没有`datetime.datetime.strptime`; 在这种情况下使用[`time.strptime`](http://docs.python.org/library/time.html#time.strptime)。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-08-22T09:35:10.003

您正在导入没有`strptime`功能的模块 datetime。

该模块*确实*有一个`datetime`具有该方法的对象：

```
import datetime
dtDate = datetime.datetime.strptime(sDate, "%m/%d/%Y") 
```

或者，您可以从模块中导入`datetime`对象：

```
from datetime import datetime
dtDate = datetime.strptime(sDate, "%m/%d/%Y") 
```

请注意，该`strptime`方法是在 python 2.5 中添加的；如果您使用的是旧版本，请改用以下代码：

```
import datetime, time
dtDate = datetime.datetime(*time.strptime(sDate, "%m/%d/%Y")[:6]) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-22T09:34:52.217

因为`datetime`是模块。班级是`datetime.datetime`。

```
import datetime
dtDate = datetime.datetime.strptime(sDate,"%m/%d/%Y") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T09:36:54.977

您应该使用模块中的类中的`strftime`静态方法。尝试：`datetime``datetime`

```
import datetime
dtDate = datetime.datetime.strptime("07/27/2012", "%m/%d/%Y") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-14T06:34:48.387

您还可以执行以下操作，导入日期时间

```
from datetime import datetime as dt

dt.strptime(date, '%Y-%m-%d') 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-03-12T08:10:57.953

如果在您的项目所在的文件夹中，您创建了一个名为“datetime.py”的文件

# perl - Perl ole 选择属性迭代

> ID：12070198
> 
> 赞同：2
> 
> 时间：2012-08-22T09:33:01.533
> 
> 标签：perl, ms-word, selection, ole

我搜索了答案，但没有找到答案，所以它让我在 stackowerflow 注册。我正在尝试使用 win32 ole 编写简单的 perl 脚本，它将遍历所有 M$ 单词段落（任何以硬返回结尾的文本）并仅打印与指定条件匹配的那些段落。问题是我需要访问字体大小属性。在我看来，这个属性在第一段中只设置了一次，之后没有更新。请看以下代码：

```
#!/usr/bin/perl
use strict;
use warnings;
use Win32::OLE::Const 'Microsoft Word';
#$Win32::OLE::CP = CP_UTF8;
binmode STDOUT, 'encoding(utf8)';

# OPEN FILE SPECIFIED AS FIRST ARGUMENT
my $fname=$ARGV[0];
my $fnameFullPath = `cygpath.exe -wa $fname`;
$fnameFullPath =~ s/\\/\\\\/g;
$fnameFullPath =~ s/\s*$//;
unless (-e $fnameFullPath) { print "Error: File did not exists\n"; exit 1;}

# STARTING OLE
my $Word = Win32::OLE->GetActiveObject('Word.Application')
    || Win32::OLE->new('Word.Application','Quit')
    or die Win32::OLE->LastError();

$Word->{'Visible'} = 0;
my $doc = $Word->Documents->Open($fnameFullPath);
my $paragraphs = $doc->Paragraphs() ;
my $enumerate = new Win32::OLE::Enum($paragraphs);

# PROCESSING PARAGRAPHS
while(defined(my $paragraph = $enumerate->Next())) {

    my $text = $paragraph->{Range}->{Text};
    my $sel = $Word->Selection;
    my $font = $sel->Font;

    if ($font->{Size} == 18){
        print "Text: ", $text, "\n";
        print "Font Bold: ", $font->{Bold}, "\n";
        print "Font Italic: ", $font->{Italic}, "\n";
        print "Font Name: ", $font->{Name}, "\n";
        print "Font Size: ", $font->{Size}, "\n";
        print "=========\n";
    }
}

# CLOSING OLE
$Word->ActiveDocument->Close ;
$Word->Quit; 
```

这是我得到的输出：

```
Text: This is a doc file containing different fonts and size, document also contain header and footer (Font: TNR, Size: 18)
Font Bold: 0
Font Italic: 0
Font Name: Times New Roman
Font Size: 18
=========
Text: This is a Perl example (Font TNR, Size: 12)
Font Bold: 0
Font Italic: 0
Font Name: Times New Roman
Font Size: 18
=========
Text: This is a Python example(Font: Courier New, Size: 10)
Font Bold: 0
Font Italic: 0
Font Name: Times New Roman
Font Size: 18
========= 
```

正如您在输出中看到的那样，字体大小为 18，即使原始文档中的大小不同（字体名称也未更新）。这让我假设 $font 在处理的第一段中只设置一次。因此以下条件

```
if ($font->{Size} == 18) 
```

仅在第一个处理的段落中进行评估。这也支持以下事实：如果我将条件更改为以下（匹配第 2 段）：

```
if ($font->{Size} == 12) 
```

输出什么都没有。因为第一段是 18 而不是 12，因此条件为假，$font 不再更新，所以它永远不会为真。我做错了什么？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-08T06:00:32.050

查看`#Insert this code`代码段中的它现在可以正常工作。

```
# PROCESSING PARAGRAPHS

while(defined(my $paragraph = $enumerate->Next())) {

    #Insert this code
    $paragraph->{Range}->Select(); 
    sleep(1);
    #-------------

    my $text = $paragraph->{Range}->{Text};    
    my $sel = $Word->Selection;
    my $font = $sel->Font;

    if ($font->{Size} == 18){
        print "Text: ", $text, "\n";
        print "Font Bold: ", $font->{Bold}, "\n";
        print "Font Italic: ", $font->{Italic}, "\n";
        print "Font Name: ", $font->{Name}, "\n";
        print "Font Size: ", $font->{Size}, "\n";
        print "=========\n";
    }
} 
```

# eclipse - 如何在 PyDev 中禁止创建运行配置

> ID：12070200
> 
> 赞同：1
> 
> 时间：2012-08-22T09:33:05.320
> 
> 标签：eclipse, pydev

每次我按下运行按钮（或使用它的快捷方式）时，eclipse 都会以某种不可预测的方式创建运行配置（看起来它使用 PyDev 包资源管理器中当前选择的文件，这很奇怪）。如何强制 Eclipse 仅使用手动创建的运行配置并禁止为当前项目创建新配置。我选中了“始终启动以前启动的应用程序”，但它没有帮助。

# java - 通过 Socket 发送的图像流 - 服务器死锁问题

> ID：12070203
> 
> 赞同：0
> 
> 时间：2012-08-22T09:33:08.020
> 
> 标签：java, android, c++, sockets, stream

我已经实现了一个 Android 应用程序，它使用 SP 相机拍照并通过套接字将其发送到服务器。

我正在使用以下（JAVA）代码来读取本地存储的图像文件并通过套接字以连续块的形式发送它：

```
FileInputStream fileInputStream = new FileInputStream( "my_image_file_path" );

int nRead;
byte[] data = new byte[16384];

try {
    while( (nRead = fileInputStream.read(data, 0, data.length)) != -1 ){
        networkOutputStream.write( data, 0, nRead );
    }

} catch( IOException e ){
    e.printStackTrace();
}
fileInputStream.close(); 
```

以及以下（C/C++）代码来读取它并将其存储在服务器上：

```
char newbuffer[MAX_BUF_SIZE];
int checkOperation;

ofstream outfile( "image_file_path".c_str(), ofstream::binary );

do{
    checkOperation = read( clientSocketDescriptor, newbuffer, sizeof(newbuffer) );

    if( checkOperation < 0 ){

        cout << "Error in recv() function, received bytes = " << checkOperation << endl;
        exit(1);
    }else if (checkOperation != 0 ){

       /*
        * some data was read
        */
       cout << endl << "READ Bytes: " << checkOperation << endl;
       outfile.write( newbuffer, checkOperation );

       /*
        * emptying buffer for new incoming data
        */
       for(int i = 0; i < sizeof(newbuffer); i++){
          newbuffer[i] = 0;
       }
    }
}while( checkOperation =! 0 );

outfile.close(); 
```

Android 客户端应用程序似乎正确地写入了套接字中的所有字节，并成功退出了`while`循环。

但是，服务器代码卡在其`while`循环的最后一次迭代中，无法继续执行。

*   为什么服务器无法读取`EOF`？
*   我发送图像或读取图像的代码不正确吗？

提前感谢您的任何帮助，因为我真的被卡住了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T09:37:42.377

您没有关闭`networkOutputStream`，因此 C++ 代码不知道您已完成。

要么你需要关闭输出流——显然，这只有在你不需要发送更多数据时才可行——或者你需要在协议中包含一些元数据，以便在开始写入更多数据之前进行指示有，或包括一些事后作为“完成”指标。一般来说，我更喜欢长度前缀 - 如果“完成”指示符自然地出现在数据中，它比担心转义要简单得多。

半途而废是重复说“这里有一段数据长度 X”，然后是“我完成了，没有更多的区块”消息（例如，可能是“这里有一段长度为 0 的数据”）。这样你就不需要事先知道总长度。

# java - 在 Java 中设置默认模式名称

> ID：12070204
> 
> 赞同：1
> 
> 时间：2012-08-22T09:33:09.253
> 
> 标签：java, sql, database, oracle, schema

我正在从我的 Java 代码执行以下查询：

```
SELECT * FROM JSTORE.EMPLOYEE 
```

其中“JSTORE”是模式名称，“EMPLOYEE”是表。

我可以将模式名称设置为用作 JSTORE，这样我就不必总是在查询中指定它吗？我正在使用 Oracle 数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:10:13.760

如果该架构名称与您的应用程序用于连接数据库的用户名相同，那么您不需要指定架构名称（通过 Java 或 SQL*Lite）。

如果模式名称因应用程序而异，那么我可能会在 SQL 中显示模式名称以避免错误。想想如果你在连接池中 ALTER SESSION 会出什么问题。它仍然是可配置的，并且可以使用一些 Java 代码自动为您生成 SQL（无论如何您可能应该拥有）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T10:21:27.637

您可以执行以下 SQL：

```
ALTER SESSION SET CURRENT_SCHEMA=JSTORE 
```

请注意，您需要为您创建的每个 now 连接执行此操作（一个 Oracle 会话 == 一个 Java Connection 对象）。

使用池连接时要小心；如果它们需要不同的模式，则需要在将它们返回池之前恢复默认值。

# iphone - 如何从 xml Webservices 中获取值并显示到 UITableView 中，包括 null 值？

> ID：12070205
> 
> 赞同：2
> 
> 时间：2012-08-22T09:33:16.523
> 
> 标签：iphone, ios

如何从 xml SOAP Webservices 获取值并显示到 UITableView 中，包括 null 值？

# c# - Autofac：检查实例是否已经解析

> ID：12070210
> 
> 赞同：3
> 
> 时间：2012-08-22T09:33:32.343
> 
> 标签：c#, asp.net-web-api, autofac

我这样做： [https ://stackoverflow.com/questions/12069002/autofac-resolve-with-and-without-named-parameter](https://stackoverflow.com/questions/12069002/autofac-resolve-with-and-without-named-parameter)

我注册了一个接口。对于初始化，需要一个参数。第一次调用将传递此参数。

在另一个地方我也想解析这个接口实例，但我不能传递这个参数。是否可以检查此接口是否已解析（在当前范围内。我使用 ASP.NET WEB API）？如果我在没有参数的情况下解决它，我会得到一个异常。

我需要检查当前 HttpRequest-scope 中是否已经解析（所以我可以在不传递参数的情况下获取它，因为如果它已经解析，注册的创建委托将不会被调用两次）

```
m_builder.Register<IMyClass((c, p) =>
    {
        //...
        return new MyClass;

    }).InstancePerHttpRequest();//.InstancePerApiRequest(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T01:36:55.603

首先，创建一个可以跟踪实例是否已解析的类：

```
public class Tracker
{
    public bool IsResolved { get; set; }
} 
```

（你可能希望把它美化一点:)）

将其注册到与您要跟踪的任何内容相同的范围内：

```
builder.RegisterType<Tracker>()
    .InstancePerHttpRequest(); 
```

然后，在`OnActivated`事件中，设置布尔值：

```
builder.Register((c, p) => {
        return new MyClass();
    })
    .As<IMyClass>()
    .InstancePerHttpRequest()
    .OnActivated(e => {
        e.Context.Resolve<Tracker>().IsResolved = true;
    }); 
```

您也可以在激活期间（在第一个委托中）设置该字段，但`OnActivated`如果您愿意，使用该事件可以更容易地概括这一点。

最后，检查字段：

```
if (container.Resolve<Tracker>().IsResolved) { ... } 
```

# html - 在右上角显示文本，就像在文档中一样？

> ID：12070212
> 
> 赞同：1
> 
> 时间：2012-08-22T09:33:34.447
> 
> 标签：html, css, layout, twitter-bootstrap, responsive-design

新的[twitter-bootstrap 文档](http://twitter.github.com/bootstrap/base-css.html)有一个很好的界面来分隔示例。

![截图](../Images/f19ce49d2961c8056891bc60064c17d7.png)

**我如何获得同样的效果，但在`well`?**

我的尝试：http: [//jsfiddle.net/YdusM/](http://jsfiddle.net/YdusM/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:01:46.190

那怎么样：[jsFiddle](http://jsfiddle.net/YdusM/3/)

`.well:before {...}`改为申请`.corner_text:before {...}`

**更新：**

为特定井块应用“示例元素”：[jsFiddle](http://jsfiddle.net/YdusM/10/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:59:27.983

你可以检查文档中的代码，你会发现这个 css，应用于 exmaple 包装器：

```
.bs-docs-example::after {
content: "Example";
position: absolute;
top: -1px;
left: -1px;
padding: 3px 7px;
font-size: 12px;
font-weight: bold;
background-color: whiteSmoke;
border: 1px solid #DDD;
color: #9DA0A4;
-webkit-border-radius: 4px 0 4px 0;
-moz-border-radius: 4px 0 4px 0;
border-radius: 4px 0 4px 0;
} 
```

将类似于自定义类的东西添加到您的 css 中，或者您甚至可以使用引导变量和 mixins 来减少它。如果您希望文本可添加，最好忘记 :after 并稍微调整此样式以将其应用于包含所需文本的特定元素并将其放置在包装器中。

**编辑：**
为了使定位起作用，您也应该将包装器设置`position: relative;`为。不知道你在追求什么，但我更新了你的小提琴来演示：http: [//jsfiddle.net/YdusM/9/](http://jsfiddle.net/YdusM/9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T10:03:49.000

而不是应用于`:before`外部div。我做到了`.well`并将填充顶部和左侧调整为`-20px`..

IE

```
.well:before {
  position: relative;
  content: "Example";
  top: -20px;
  left: -20px;
  padding: 3px 7px;
  font-size: 12px;
  font-weight: bold;
  background-color: #f5f5f5;
  border: 1px solid #ddd;
  color: #9da0a4;
  -webkit-border-radius: 4px 0 4px 0;
     -moz-border-radius: 4px 0 4px 0;
          border-radius: 4px 0 4px 0;
} 
```

检查小提琴[http://jsfiddle.net/YdusM/7/](http://jsfiddle.net/YdusM/7/)

# android - 从 Fragment 调用 Activity 方法

> ID：12070215
> 
> 赞同：3
> 
> 时间：2012-08-22T09:33:46.820
> 
> 标签：android, methods, android-activity, call, fragment

我正在处理碎片。
我有一个`Activity`和不同的`fragments`.
每个都`fragment`需要访问`Class(call it X)`允许它访问数据库的 a ，但是，因为我有很多片段，我不想`Class X`在每个片段中创建不同的实例，因为我认为它需要很多`memory`.
那我该怎么办？
我写了这样的东西（用吸气剂），但它不起作用！

```
public class MyActivity {
  private ClassX classx;

  .....

  public ClassX getClassX() {
     return classx;
  }   
  .....
} 
```

但是，我怎么能从`fragment`?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-22T09:45:40.243

从片段中调用您的活动方法

```
((MyActivity )  getActivity()).getClassX() ; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-21T10:36:49.167

你必须额外的演员需要做：

```
Activity activity123 = getActivity();

if(activity123 instanceof ParentActivity) {
    ((ParentActivity) activity123).someMethodInParentActivity();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T09:44:15.173

这更像是一个 Java 问题和 android。

如果您正在查看访问数据库，请查看创建数据库单例。

所以像：

```
public class Database {

    // This starts off null
    private static Database mInstance;

    /**
     * Singleton method, will return the same object each time.
     */
    public static final Database getInstance() {
        // First time this method is called by Database.getInstance() from anywhere
        // in your App. It will create this Object once.
        if(mInstance == null) mInstance = new Database();
        // Returns the created object from a statically assigned field so its never
        // destroyed until you do it manually.
        return mInstance;
    }

    //Private constructor to stop you from creating this object by accident
    private Database(){
      //Init db object
    }

} 
```

因此，然后从您的片段和活动中，您可以将以下字段放在您的班级中（最好使用基本活动和片段来节省您的重复代码）。

```
public abstract class BaseFragment extends Fragment {

    protected final Database mDatabase = Database.getInstance();

} 
```

然后你的具体片段可以扩展你的`BaseFragment`例如`SearchListFragment extends BaseFragment`

希望这可以帮助。

值得一读的[单例](http://www.javapractices.com/topic/TopicAction.do?Id=46)和[数据库](https://developer.android.com/guide/topics/data/data-storage.html#db)

问候，克里斯

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-22T09:43:04.000

定义一个调用的接口`Callbacks`（或者如果你想要的其他东西）。在其中，有一个名为`getClassX()`. 然后让你的 Activity 实现`Callbacks`接口。

在您的 Fragments 中`onAttach`，存储对`Callbacks`对象的引用（即您的活动通过以下方式：

```
if(activity instanceof Callbacks)
    mCallbacks = (Callbacks)activity; 
```

这将保证 Fragments 能够调用该函数。（如果您想稍后在另一个应用程序中重用片段）

然后在您的 Activity 中`onCreate()`，创建`ClassX`. 在您的`getClassX()`方法中，只需返回对它的引用。

当你想从你的片段中引用它时，打电话给你，`mCallbacks.getClassX()`你应该被排序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T09:36:39.427

您可以在活动中使用静态对象，并从片段中使用它，或者在片段中调用 getActivity() 方法来访问整个活动对象/方法

# iphone - 如何使启动屏幕在 xCode 项目中持续更长时间？

> ID：12070219
> 
> 赞同：2
> 
> 时间：2012-08-22T09:33:56.083
> 
> 标签：iphone, xcode, ipad

> **可能重复：**
> [显示启动画面的时间超过默认秒数](https://stackoverflow.com/questions/5618163/displaying-splash-screen-for-longer-than-default-seconds)

我正在从一个开源 xcode 项目开发一个简单的游戏。

我是 xcode 的完全初学者，我什么都不知道。

启动画面会在游戏加载时持续，但游戏非常简单，启动画面会在屏幕上停留大约半秒。

我不希望这样，我希望它停留大约 5 秒钟。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T09:37:41.763

您不应该延迟启动画面，因为它不是启动画面。它是应用程序加载时的占位符。

如果您阅读[Apple HIG](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/MobileHIG/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14-SW5)，您会看到不允许延迟。

> 如果您认为遵循这些准则会产生一个简单、无聊的启动图像，那么您是对的。请记住，发布图片并不意味着提供艺术表达的机会；它仅旨在增强用户对您的应用程序的感知，使其可以快速启动并立即准备好使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T09:36:59.797

在启动时从代码渲染相同的加载屏幕，直到您的加载完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T09:37:50.503

重复：[显示启动画面的时间超过默认秒数](https://stackoverflow.com/questions/5618163/displaying-splash-screen-for-longer-than-default-seconds)

您不需要启动画面持续更长时间。您需要制作一个 UIViewController 来显示启动画面的时间更长一些。您还可以向用户展示您的应用正在做什么（加载内容），这更符合 Apple 的思维方式。

# mercurial - Mercurial - 无法提交合并丢失文件错误

> ID：12070220
> 
> 赞同：35
> 
> 时间：2012-08-22T09:33:57.333
> 
> 标签：mercurial, dvcs

我已经完成了 'hg 合并' 但是当我尝试执行 'hg commit -m "my msg.." 时，我收到以下错误消息：

```
abort: cannot commit merge with missing files 
```

谁能解释如何解决这个问题以允许提交通过？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-08-22T10:19:13.800

尝试`hg status`查找处于状态`!`（丢失）的文件。

原因是作为合并一部分的文件之一已被删除。取消删除文件并重试。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-09-26T01:40:19.023

这是我的方法

`hg status`会告诉您缺少哪些文件。然后你可以从某处恢复文件

或输入`hg remove <path/name of missing file>`

然后提交。你的回购将再次理智，达尔文愿意。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-05T13:02:12.570

如果您使用的是 TortoiseHG，请单击查看/提交。它将向您显示处于状态`!`（丢失）的文件。

右键单击文件并选择`Revert`（取消删除文件）并提交。

# javascript - 如何在android中使用HTML/CSS给文本渐变颜色

> ID：12070222
> 
> 赞同：0
> 
> 时间：2012-08-22T09:34:11.907
> 
> 标签：javascript, android, css, gradient

我尝试了在 android 中给出文本渐变颜色的可能结果。我使用下面的 javascript 来让文本显示渐变色。但是，它不支持在android中。有没有人有解决方案来使用 HTML/CSS 为文本提供渐变颜色并在 android 中受支持？

```
<canvas id="canvas" width="250" height="400"></canvas>     

<script type="text/javascript">

var canvas = document.getElementById('canvas');

var ctx = canvas.getContext('2d');
ctx.font = "36px sans-serif";
var gradient = ctx.createLinearGradient(0, 0, 150, 100);
gradient.addColorStop(0, "rgb(255, 0, 0)");
gradient.addColorStop(1, "rgb(255, 255, 0)");
ctx.fillStyle = gradient;
ctx.fillText("Gradient Text", 10, 100);  
</script> 
```

感谢您的宝贵回复。但为了明确提出的问题，我有

```
<span style='font-family:  MalgunGothic; font-size:10 ;' >Gradient Text</span> 
```

对于上述 html 内容，必须添加文本“渐变文本”的渐变颜色。如果有人有解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:53:13.297

你应该看看`-webkit-gradient`哪个是 CSS3。这是一个很酷的[CSS3 渐变生成器](http://gradients.glrzad.com/)，它为您提供具有适当颜色的代码。希望这可以帮助。

# java - Eclipse 启动和 ant 启动以不同的编码生成文件

> ID：12070224
> 
> 赞同：0
> 
> 时间：2012-08-22T09:34:17.800
> 
> 标签：java, file, ant, encoding

我有一个简单的 Java 项目。我确实使用 Eclipse 4.2 编写代码。我也使用 ant 来构建和启动我的应用程序。我的启动结果是一个文件。我确实读取了一个输入文件并生成了输出文件。
问题是：我得到不同编码的结果。当我通过 Eclipse 启动应用程序时，我会以一种编码方式获得输出文件。当我使用 ant 运行相同的应用程序时，我会得到其他编码的结果输出文件。Eclipse 和 ant 使用相同的 jdk 构建和运行应用程序...我做错了什么...？

我认为这个问题是其他人。请查看我的 build.xml 的一部分：

```
<target name="compile" depends="init">
    <javac destdir="${bin.dir}" classpathref="project.classpath"
                source="1.7"
                target="1.7"
                debug="yes"
                encoding="UTF-8"
                srcdir="${src.dir}">
    </javac>
    <copy todir="${bin.dir}" >
        <fileset dir="${src.dir}" excludes="**/*.java" />
    </copy> 
</target> 
```

如您所见，指定了编码。源文件实际上是 UTF-8。

这是启动主类的代码：

```
<target name="prepare_inserts" depends="dist" description="Run preparation of SQL INSERT statements.">
    <java classname="${main.class}" fork="true">
         <classpath>
            <path refid="project.classpath" />
            <pathelement location="${dist.dir}/xBankImportDWHTestData-${DSTAMP}.jar" />
          </classpath>
    </java>
</target> 
```

如果我运行这个目标，我会得到错误编码的结果文件。如果我确实从 Eclipse 运行此文件（右键单击 java 文件 -> 运行为 .. -> Java 类），一切都可以。我确实在 Eclipse 项目属性中将编码设置为 UTF-8 ...我还能尝试什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:44:29.663

> 我做错了什么...

您做错的是依赖默认编码。这取决于启动应用程序的环境。使用 Ant，您最有可能获得 OS（或 shell）默认编码。对于 Eclipse，默认编码由 Eclipse 首选项和/或启动器配置确定。（在启动器配置的“通用”选项卡中查看优先设置。）

所以修复是以下之一：

*   确保默认编码相同；例如，通过更改应用程序的 Eclipse 启动配置。

*   更改您的代码以使用 FileWriter、OutputStreamWriter 或任何将编码名称或 Charset 作为参数的重载。并确保你的代码在它提供的参数上是一致的。

# web-services - 消息总线和 MOM - 同一个东西？

> ID：12070227
> 
> 赞同：5
> 
> 时间：2012-08-22T09:34:24.260
> 
> 标签：web-services, soa, messaging, message-queue, esb

消息总线架构上的每一个描述似乎都描述了一个用于路由消息的集中中介：

> 每个应用程序都有一个到消息总线的连接，而不是到每个其他应用程序的多个专用连接。

[http://msdn.microsoft.com/en-us/library/ff647328.aspx](http://msdn.microsoft.com/en-us/library/ff647328.aspx)

> 将这些应用程序之间的连接中间件构建为消息总线，使它们能够使用消息传递一起工作。

[http://www.eaipatterns.com/MessageBus.html](http://www.eaipatterns.com/MessageBus.html)

> 服务总线是位于应用程序之间的消息传递基础架构，允许它们以松散耦合的方式交换消息，以提高规模和弹性。

[http://www.windowsazure.com/en-us/home/features/messaging/](http://www.windowsazure.com/en-us/home/features/messaging/)

* * *

描述似乎与 Message Broker 架构相同；让我相信以下几点：

术语“消息总线”实际上与“MoM”相同——一个通用术语，用于指代消息传递基础设施，而不明确提及拓扑。即消息代理*是一种*消息总线。

这似乎是一个有争议的话题，虽然关于 SO 有一些类似的问题，但没有一个（IMO）有明确的答案。

*Ps 我知道企业服务总线是完全不同的，实际上是一个“功能丰富”的 MoM。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T14:26:11.633

你是对的，这个术语领域非常混乱，没有明确的答案，但这是我职业生涯的看法：

首先要做的是在不同的抽象层次上考虑这一点——架构概念与产品。

消息总线 (http://www.eaipatterns.com/MessageBus.html) 通常被称为架构原则，用于将应用程序与规范数据格式 (http://www.eaipatterns.com/CanonicalDataModel.html) 解耦)，无论技术如何。通常使用 MoM 产品实现。

MoM 通常是指实现异步消息传递的一系列中间件产品。通常构建支持标准，例如 JMS 和 AMQP（通常是 WebSphere MQ、ActiveMQ、Azure 消息传递、hornetQ、RabbitMQ 等）。

消息代理通常是 MoM，这两个术语都用于同一个消息传递产品。这里可能会造成混淆，因为 IBM 的主要 ESB 产品称为 WebSphere Message Broker，而它更像是与 MoM 产品 - WebSphere MQ 一起使用的 ESB。通常大多数 MoM 都称自己为代理，例如 RabbitMQ、ActiveMQ、QPid 等。

希望这不会引起更多的混乱:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T15:18:29.333

WebSphere Message Broker 属于 SOA 的 ESB 层，它也是 MOM。WebSphere MQ 也是 MOM。我认为很多混淆都围绕着抽象架构概念和实际软件产品。SOA 和 ESB 是抽象概念。整个企业架构行业IBM、微软、甲骨文、TIBCO等一直在争夺市场份额。软件公司经常假装他们发明了一些新的更好的东西，以吸引客户的注意。他们对他们的产品做出了很多疯狂的承诺，而实际上他们创造了一套全新的代价高昂的问题（例如，XML 转换会导致严重的性能和安全问题）。因为它是由企业贪婪驱动的并且“快速进入市场”，所以总是存在大量的混乱和 IT 问题，并给 IT 员工带来很大的压力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T08:14:14.290

差异**主要是**不同的供应商试图在市场上区分自己并增加他们的思想份额。由于供应商通常定义自己的术语，因此每个供应商所使用的术语的含义通常会略有不同。

然而，一般来说，它们是同一类或类型的系统。他们组织和管理从一个软件服务到另一个软件服务的消息的传输、排队和持久性（存储），除此之外，您还需要查看供应商针对其产品的特定功能列表。

# installshield - 如何使用 Install Shield 的安装脚本知道系统的总内存 (RAM)

> ID：12070238
> 
> 赞同：0
> 
> 时间：2012-08-22T09:35:00.810
> 
> 标签：installshield

我正在使用 Install Shield 5.5。我想知道使用 install shield 的 API 是否可以知道系统的总内存（RAM）？如果是，请让我知道我们该怎么做？

谢谢你的帮助，纳扬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:53:41.843

迈克尔是对的。您应该使用更新的工具，因为它现在已经有 15 年的历史了。

InstallScript 有/有一个 SysInfo 功能，但我怀疑它今天是否有效。您可以使用原型和 UseDLL() 调用来声明外部 DLL 函数，以直接使用 Win32 API 和/或 WMI 类来获取信息，但何必呢？

只需升级到使用 Windows Installer（InstallShield 或 WiX）的软件，并使用[PhysicalMemory 属性](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370818%28v=vs.85%29.aspx)来获取机器上的 RAM 量。

# .htaccess - 如果用户键入则禁止索引

> ID：12070241
> 
> 赞同：1
> 
> 时间：2012-08-22T09:35:12.653
> 
> 标签：.htaccess

如果链接是默认情况下`http://example.com`将重定向到`http://example.com/index.html`。
（或`.php`或类似的东西）。

但如果用户`http://example.com/index.html`输入 url，我想显示 404 错误。

我知道我能做到

RewriteEngine On RewriteRule index.html 404.html [R=304,L]

但我想要更通用的东西，它可以适用于每一页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:37:09.303

尝试：

```
RewriteEngine On
RewriteCond %{THE_REQUEST} (index.(html|php)|/foo/bar)
RewriteRule ^ 404.html [R=404,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T09:48:52.910

或者简单地说：

```
RewriteEngine On
RewriteRule index\.(php|html?)$ 404.html [R=404,L] 
```

# html - 需要修复图片主题主页

> ID：12070244
> 
> 赞同：0
> 
> 时间：2012-08-22T09:35:36.567
> 
> 标签：html, css

我目前正在为图像制作 Tumblr 主题，但我无法修复主页，

这是我主页的外观： [http ://tinyurl.com/bpm7uph](http://tinyurl.com/bpm7uph)

查看图像之间的空白，

我希望它像这样：i.imgur.com/dJWDR.jpg

这是我的 css 文件： [http ://tinyurl.com/8s9cfyx](http://tinyurl.com/8s9cfyx)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T09:43:29.957

创建您想要的布局的普遍认可的方法是使用 jQuery Masonry。

[http://masonry.desandro.com/](http://masonry.desandro.com/)

要仅使用 CSS 手动执行此操作，您只需创建两列并将您的项目单独添加到每一列。显然，这不是一个很好的动态解决方案。

# wpf - 如何退出 wpf 应用程序

> ID：12070247
> 
> 赞同：0
> 
> 时间：2012-08-22T09:35:41.620
> 
> 标签：wpf, events

我有一个 WPF 项目，它是解决方案的一部分，它是“ProjectFilesSelector”。一个名为 A 的项目，调用 ProjectFilesSelector 如下图：

！！！更新：

```
namespace ProjectFilesSelector
{
   ...
   public class ViewModel 
   {
        ...
        public ICommand cancel
        {
            get
            {
                return new WPFExtensions.RelayCommand(_ =>
                    {
                        this.window.Visibility = Visibility.Hidden;
                        this.window.Close();

                    });
            }
        }

   }   

public partial class Window1 : Window, IDisposable
   {
        public Window1(ProjectTypes.Project pro)
        {
            InitializeComponent();

```
 var context = new ViewModel(this, new ATChecker.ViewModel.ProjectModel(pro));
        this.DataContext = context;
    } 
```

...
   }

}

namespace ATCheckerView
{
    public class ViewerClientExt : INotifyPropertyChanged
    { 
        ...

 `public ICommand CheckPrinciplies
    {
        get
        {
            var cmnd =
                new RelayCommand(project =>
                {
                    var proj = (ViewModel.ProjectModel)project;

                    ProjectFilesSelector.ViewModel dc;

                    using (var a = new ProjectFilesSelector.Window1(proj.project))
                    {
                        a.ShowDialog(); // cancel command was called
                        dc = (ProjectFilesSelector.ViewModel)a.DataContext;
                    }
                    ....
                    // some code 
                    // and I can still see the window of Window1\. Why? 

                });` 
```

 `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:51:57.933

我认为您不想退出该应用程序。您可能只想关闭窗口。取消按钮只是将 IsCancel 设置为 true。对于 ok 按钮，最好的方法是在视图模型中创建一个事件以进入视图。`

# jquery - Jquery Animate Divs，Animate One In Animate The Rest Out

> ID：12070248
> 
> 赞同：0
> 
> 时间：2012-08-22T09:35:47.500
> 
> 标签：jquery, jquery-animate

我尽量不在 StackExchange 上发布很多问题，除非我似乎找不到解决方案。我仍在学习 jQuery，并且在为左侧菜单滑动面板设置动画时遇到问题。

滑动面板的目的是为用户提供从数据库中提取的信息和链接。我正在尝试研究如何为一个面板设置动画并制作动画（如果当前已经打开了一个）以制作动画。所以任何时候只能打开一个面板。

到目前为止，这是我的代码：

```
$(".editor_content").hide();

//Panel 1
$('#tab_editor').toggle(function(){
    $('#panel_editor').animate({width:"400px", opacity:1.0}, 500, function() {
        $('.editor_content').fadeIn('slow');
        $('.wrapper').animate({"left": "190px"}, "slow");
    });  
},function(){ 
    $('.editor_content').fadeOut('fast', function() { 
        $('#panel_editor').stop().animate({width:"0", opacity:0.0}, 200);
        $('.wrapper').animate({"left": "0px"}, "slow");
    });
});

//Panel 2
$('#tab_themer').toggle(function(){
    $('#panel_themer').animate({width:"400px", opacity:1.0}, 500, function() {
        $('.themer_content').fadeIn('slow');
        $('.wrapper').animate({"left": "190px"}, "slow");
    });  
},function(){ 
    $('.themer_content').fadeOut('fast', function() { 
        $('#panel_themer').stop().animate({width:"0", opacity:0.0}, 200);
        $('.wrapper').animate({"left": "0px"}, "slow");
    });
}); 
```

两个面板的 CSS 都设置为`fixed top:0 left:0`.

使用上面的代码，面板将动画进出​​，但是当一个被点击并动画化时，我无法理解如何为当前打开的动画制作动画。

任何帮助或指导将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:40:36.900

您应该熟悉 javascript“this”变量。这将允许您编写一个函数来打开单击的元素并关闭其他元素。

这是我为有类似问题的人制作的小提琴，他们想在关闭任何其他打开的面板的同时打开一个菜单面板。

[小提琴](http://jsfiddle.net/cYUXP/3/)

# php - 一次更新多行

> ID：12070252
> 
> 赞同：1
> 
> 时间：2012-08-22T09:36:04.807
> 
> 标签：php, mysql

我有这段代码，它允许我将数据库中的所有数据显示为文本区域，我需要通过单击更新按钮来更新它们！

基于这个，应该让我编辑它们，但是当我点击提交时它不会......

```
<form name="form1" method="post" action="">
<tr>
<td>
<table width="500" border="0" cellspacing="1" cellpadding="0">

<tr>
<td align="center"><strong>Id</strong></td>
<td align="center"><strong>Name</strong></td>
<td align="center"><strong>Lastname</strong></td>
<td align="center"><strong>Email</strong></td>
</tr>

<?php
    while($rows=mysql_fetch_array($result)){
?>

<tr>
    <td align="center">
        <? $id[]=$rows['id']; ?>
        <? echo $rows['id']; ?>
    </td>
    <td align="center">
        <input name="name[]" type="text" id="name" value="<? echo $rows['name']; ?>">
    </td>
    <td align="center">
        <input name="lastname[]" type="text" id="lastname" value="<? echo $rows['lastname']; ?>">
    </td>
    <td align="center">
        <input name="email[]" type="text" id="email" value="<? echo $rows['email']; ?>">
    </td>
</tr>

<?php
    }
?>

<tr>
    <td colspan="4" align="center">
        <input type="submit" name="Submit" value="Submit"/>
    </td>
</tr>
</table>
</td>
</tr>
</form>
</table>

<?php

// Check if button name "Submit" is active, do this
if($Submit)
{
    for($i=0;$i<$count;$i++)
    {
        $sql1="UPDATE $tbl_name SET name='$name[$i]', lastname='$lastname[$i]', email='$email[$i]' WHERE id='$id[$i]'";
        $result1=mysql_query($sql1);
    }
}

if($result1)
{
    header("location:update_multiple.php");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:38:46.313

是的，因为你忘记了你的身份证

`<? $id[]=$rows['id']; ?>`不能这样通过

```
<input type="hidden" name="id[]" value ="<?php echo $rows['id']; ?>" /><? echo $rows['id']; ?> 
```

和脚本`if($Submit){`应该是`if($_POST['Submit'] != ''){`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:39:04.980

您没有`$Submit`在帖子中定义，因此`{ ... }`永远不会执行中的内容。

您应该尝试这样的更新：

```
if(isset($_POST[$name]))
{
// update stuff
} 
```

在您的代码中，由于 if 语句永远不会执行，因此 $result 永远不会设置，因此不会将用户重定向 - 它每次只会显示相同的页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T09:49:26.750

要检查单击按钮时是否出现帖子，应设置如下：

在`<form>`标签中添加以下内容

```
<form name="form1" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>"> 
```

最后，检查按钮是否被点击：

```
if(isset($_POST['Submit'])) { 

//Update fields

} 
```

请记住，提交按钮名称字段在 php 中区分大小写

# c# - 中继器外部控件的绑定值

> ID：12070253
> 
> 赞同：0
> 
> 时间：2012-08-22T09:36:07.380
> 
> 标签：c#, asprepeater

只是为了好奇，我可以给中继器外部的控件一个分箱值吗

例如 ：

```
<asp:Repeater ID="topicRepeater" runat="server">
<ItemTemplate>
<table border="0" id="bodyTable" runat="server" style="width: 100%; height: 100%;">
<tr>
<td align="left" valign="top" style="padding-top: 6px; padding-right: 30px; padding-left: 5px; width: 50px;">
<img src='App_Themes/WebPortalTheme/images/ProfilePicSmall/<%# Eval("ProPic") %>'
 style="width: 50px; height: 50px;" />
<div runat="server" id="username" style="padding-left: 8px; color: #002D79;">
<%# Eval("UserName") %></div>
</td>
</tr>
</table>
 </ItemTemplate>
 </asp:Repeater>
 <telerik:RadTextBox ID="EditedReplyTxt" Text='<%# Eval("msg_text")%>' runat="server"  Width="300px" TextMode="MultiLine" Height="100px"></telerik:RadTextBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:40:11.913

是的，你可以，阅读这个例子

[http://msdn.microsoft.com/fr-fr/library/4hx47hfe(v=vs.80).aspx](http://msdn.microsoft.com/fr-fr/library/4hx47hfe(v=vs.80).aspx)

# javascript - $.ajax 获取数据不追加到 var

> ID：12070272
> 
> 赞同：1
> 
> 时间：2012-08-22T09:36:59.200
> 
> 标签：javascript, jquery, jquery-mobile

我的输出有问题：我想用 ajaxcall 中的一些数据填充输出。调用成功（每个内部的输出都填充了数据）但是每个内部的输出都附加到外部的输出。我总是“

```
<ul id="listname" data-inset=true></ul> 
```

并不是

```
 <ul id="listname" data-inset=true><li>some data</li></ul> 
```

```
$("div:jqmData(role='collapsible')").each(function(){
var id = $(this).data("id");
     var idDate=id.slice(7,18);
     var listapp="id_col_"+idDate;
      var listname="id_col_"+idDate;
                   output='<ul id="listname" data-inset=true>';

                             $.ajax({
                             url: 'lomodata.php',
                             data: 'timestamp='+idDate,
                             type: 'GET',
                             ContentType: "application/json",
                             dataType: "json",
                             success:function(res) {
                             if(res !='')
                            {
                            $.each(res, function(i, Object) {
                             output+='<li>'+Object.reg+'</li>';
                              console.log(output);
                            }); 
                             }
                             }

                             });

                    output+='</ul>';

                    $(this).append(output).trigger("create");
                    $(this).listview();
                    $(this).listview('refresh');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:40:17.797

请注意，`$.ajax`默认情况下是**asynchronous**，当您到达`$(this).append(output)`时，`output`尚未定义，因为`.ajax()`调用尚未完成。您需要将 移动`append`到`success`处理程序，或添加`async: false`选项，以便`$.ajax`成为阻塞调用（尽管这违背了 using 的目的`ajax`）：

```
success: function(res) {
  if (res !='') {
    var output='<ul id="listname" data-inset=true>';
    $.each(res, function(i, Object) {
      output+='<li>'+Object.reg+'</li>';
      console.log(output);
    });
    output+='</ul>';
    $(this).append(output).trigger("create");
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:41:13.753

AJAX 是异步的。当您编写`$.ajax( ... )`时，将向服务器发送一个 HTTP 请求，然后服务器将继续进行下一个操作，`output += '</ul>'`。`output`此时 HTTP 请求还没有完成，因此在您追加到文档时，您的回调还没有执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T09:42:20.120

```
$("div:jqmData(role='collapsible')").each(function () {
  var el = this;
  var id = $(this).data("id");
  var idDate = id.slice(7, 18);
  var listapp = "id_col_" + idDate;
  var listname = "id_col_" + idDate;

  $.ajax({
    url: 'lomodata.php',
    data: 'timestamp=' + idDate,
    type: 'GET',
    ContentType: "application/json",
    dataType: "json",
    success: function (res) {
      output = '<ul id="listname" data-inset=true>';

      if (res != '') {
        $.each(res, function (i, Object) {
          output += '<li>' + Object.reg + '</li>';
          console.log(output);
        });
      }

      output += '</ul>';

      el.append(output).trigger("create");
      el.listview();
      el.listview('refresh');
    }

  });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T09:43:25.983

如果将所有使用该`output`变量的代码行移到 ajax 调用的成功函数中，您将看到它有效。问题是您错误地使用了异步性。

像这样的东西：

```
$.ajax({
 url: 'lomodata.php',
 data: 'timestamp=' + idDate,
 type: 'GET',
 ContentType: "application/json",
 dataType: "json",
 success: function (res) {
   if (res != '') {
    var output = '<ul id="listname" data-inset=true>';
    $.each(res, function (i, Object) {
       output += '<li>' + Object.reg + '</li>';
     });
    output += '</ul>';

    console.log(output);

    $("#myObject").append(output).trigger("create");
    $("#myObject").listview();
    $("#myObject").listview('refresh');
  }
} 
```

});

# wcf-data-services - 从 .net 客户端使用服务操作给我一个错误

> ID：12070278
> 
> 赞同：2
> 
> 时间：2012-08-22T09:37:10.077
> 
> 标签：wcf-data-services, odata

如果我从浏览器使用我的服务操作，它会完美运行。

如果我从 .net 客户端使用我的服务操作，它会给我一个错误

“'System.Linq.IQueryable`1[MyEntity]' 类型没有可设置的属性。”

任何的想法？谢谢。

客户端代码：

```
public IQueryable<MyEntity> CallMyOperation(string param1 = "", string param2 = "") {
        DataServiceQuery<IQueryable<MyEntity>> q =
            CreateQuery<IQueryable<MyEntity>>("MyOperation")
                .AddQueryOption("param1", "'" + param1 + "'")
                .AddQueryOption("param2", "'" + param2 + "'");
        return
            Execute<IQueryable<MyEntity>>(
                new Uri(q.RequestUri.ToString().Replace("MyOperation()", "MyOperation"))).
                FirstOrDefault();
    } 
```

Wcf 服务代码：

```
 [WebGet]
    public IQueryable<MyEntity> MyOperation(string param1 = "", string param2 = "") {
     ...
    }

    public static void InitializeService(DataServiceConfiguration config) {
        config.DataServiceBehavior.MaxProtocolVersion =
            DataServiceProtocolVersion.V3;
        config.UseVerboseErrors = true;
        config.SetEntitySetAccessRule("MyEntity", EntitySetRights.AllRead);
        config.SetServiceOperationAccessRule("MyOperation", ServiceOperationRights.AllRead);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T16:13:45.493

调用`Execute<T>`应该只具有您想要物化的泛型类型，而不是`IQueryable<T>`. 当物化过程运行时，它会尝试从它在`WebResponse`. 由于`IQueryable<T>`没有您要返回的属性，因此实现失败。

如果你还想要一个`IQueryable`，你可以打电话`Execute<MyEntity>(...).AsQueryable()`。

# scala - 如何告诉 Scala 编译器 while 循环将返回一个值？

> ID：12070292
> 
> 赞同：2
> 
> 时间：2012-08-22T09:37:52.730
> 
> 标签：scala, loops

一些算法执行条件为 true 的 while 循环，并且（肯定）会在某个点以 while 循环体内的 return 语句结束。例如：

```
def foo: Int = {
  while(true) {
    // At some time, the while loop will do a return statement inside its body
    if( ... )
      return 0
  }
} 
```

简单示例（无语义）：

```
def foo: Int = {
  var i = 0
  while(true) {
    i += 1
    if(i == 10)
      return 0
  }
} 
```

Scala 编译器抱怨类型不匹配，因为 while 循环的类型为 Unit 并且编译器不知道 while 循环将在某个时候返回一个值。我们可以通过以下解决方法解决此问题：

```
def foo: Int = {
  var i = 0
  while(true) {
    i += 1
    if(i == 10)
      return 0
  }
  0 // !
} 
```

但这看起来很难看。有更好的解决方法吗？甚至是解决此类问题的更好方法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-22T09:41:14.067

你可以抛出一个异常：

```
def foo: Int = {
  var i = 0
  while(true) {
    i += 1
    if(i == 10)
      return 0
  }
  throw new IllegalStateException("This should never happen")
} 
```

编译器将停止抱怨类型不匹配，并且由于 while 循环总是返回一些东西，所以永远不会抛出异常。如果是这样，您将很快发现您做错了什么:)。

还有其他方法可以编写这个循环，它们更符合规范和 Scala 风格，但鉴于您提供的代码，这将以一种清晰简单的方式完成工作。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-22T09:50:46.623

也许您应该只使用尾递归。它应该最终编译成非常相似的字节码：

```
import scala.annotation.tailrec

def foo: Int = {
  @tailrec def bar(i: Int): Int = {
    val j = i + 1
    if (j == 10) return 0
    else bar(j)
  }
  bar(0)
} 
```

您甚至可能想要使用默认参数值支持：

```
@tailrec def foo(i: Int = 0): Int = {
  val j = i + 1
  if (j == 10) return 0
  else foo(j)
} 
```

请注意，这种方式需要您调用该函数，`foo()`因为`foo`它有一个参数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T09:56:07.540

更惯用的方法是使用递归。像这样的东西：

```
 def foo: Int = { 
    import scala.annotation.tailrec
    @tailrec def whileUnderTen(i: Int):Int = if ( i < 10) whileUnderTen(i+1) else 0
    whileUnderTen(0)
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T23:37:22.027

对于这些场合，我在我的个人标准库中定义了一个“永远”的构造。

```
forever{
} 
```

在所有方面都等同于

```
while(true){
} 
```

except that `forever` has type `Nothing` while the equivalent `while` construct has type `Unit`. Just one of those small extension capabilities that makes Scala such a joy.

# compression - 流式传输，就地二进制补丁

> ID：12070295
> 
> 赞同：2
> 
> 时间：2012-08-22T09:38:09.907
> 
> 标签：compression, diff

我有一系列大型二进制文件，每个文件都是通过修改前一个文件生成的。它们存储在服务器上（服务器只是一个哑文件存储，我们无法在其上运行程序）。

为了节省空间，我想将它们存储为差异。当我们下载文件时问题就来了：它们太大了，以至于客户端上没有足够的磁盘空间来存储原始文件和差异文件。

是否有一种差异算法允许我们将原始文件下载到磁盘，然后在从服务器流式传输时应用补丁？AIUI，xdelta和rdiff都不能修改原文件，只能新建一个副本（会占用太多磁盘空间）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:41:28.010

可悲的是，简短的回答是*否定*的。尽管...

就地修补的问题是**插入和引用旧数据的混合**。插入需要**移动现有数据以**留出足够的插入位置，即向后复制文件末尾（在一般情况下它会很慢，并且**在最坏的情况下会占用文件本身的大小**）。对旧数据的引用需要非常谨慎，以减少最坏的情况......

考虑到所有的限制，在修补期间在占用空间方面具有真正优势的客户端上实现这一点，补丁可能比 xdelta 或 rdiff 所做的要大得多。修补过程也会慢得多。

智能服务器的一种可能性是：

*   将所有补丁组合成一个元补丁
*   流式传输即时修补的原始文件（从而在线上进行重组）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-03T10:24:24.060

sync diff的实现思路：

1.  将数据裁剪成多个固定大小的块；
2.  计算旧数据中需要保留的块；（可以使用同步算法）
3.  按新数据顺序将保留的块排序到新位置；
4.  下载缺失的块进行填充；

其中，最难的是优化排序块的速度，需要充分利用内存或剩余磁盘空间以最小化磁盘I/O；</p>

# objective-c - 指针的目的

> ID：12070300
> 
> 赞同：3
> 
> 时间：2012-08-22T09:38:30.263
> 
> 标签：objective-c, pointers

我刚刚开始使用Objective C，虽然我对速度和学习曲线做得很好（我没有C背景） - 我不理解一个也是C ++一部分的概念 - 指针！

好的 - 我知道指针指向实际变量的物理位置，而不是变量本身的值。这到底什么时候能派上用场？

另外，什么时候使用它们，什么时候不使用它们？

我已经用谷歌搜索了很多，但我遇到的每个指南似乎都假设我是火箭科学博士。

有人可以用一个简单的例子来解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:45:00.333

使用指针的主要原因之一是节省内存。例如，如果您将数组传递给函数，最好将内存中的地址发送给函数，而不是发送值。

如果您继续使用 c 或其他较低级别的语言，那么您会发现数组和指针几乎可以互换。（C 风格的数组，不是 objc 中的 NSMutableArrays 或 c++ 中的向量或 c# 中的列表等）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T10:09:51.747

虽然它们当然是 C 指针，但我强烈建议将它们理解为对对象的引用。

您要么创建一个对象，要么从某个地方接收它，并将对该对象的引用存储在变量中。

当您将对对象的引用传递给某个函数或方法时，该方法可以访问您传递的对象。它不一定要处理数据的副本。如果它对对象的属性进行了更改（只要通过 poperty 声明和内容允许），那么您的引用所指的对象就会发生更改。

您当然可以复制它并在您认为合适时继续使用该副本。在这种情况下，原始对象保持不变。

当您真正遇到必须使用 c 样式指针的情况时，您最好退后一步并理解 C。我认为来自 Objecive-C 背景的理解 c 样式指针是不明智的。清除您的想法并从头开始学习 C，然后在非常罕见的情况下使用新的知识，您必须在 Objective-C 项目中处理这些基本数据类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T10:36:30.533

这是一个简单的原因：

想象一下，你有一个非常大的物体。- 当你将它传递给一个函数时，你真的想复制和复制整个对象吗？- 这将占用大量 CPU 和内存。

通过使用指针，您不必在每次传递原始对象时都复制它。（当然，另一方面是，如果您更改函数中的对象，它也会更改原始对象）。

# objective-c - 如果我强行将分配对象的指针指向 nil，ARC 会做什么？

> ID：12070301
> 
> 赞同：0
> 
> 时间：2012-08-22T09:38:31.823
> 
> 标签：objective-c, ios, cocoa-touch, ios5, automatic-ref-counting

我正在分配一个对象

> A *a = [[A alloc] init];

在另一点上，我正在强行设置

> a = 无；

它是否会向 ARC 发送一条消息，表明现在可以释放该对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:52:12.053

快速回答 - 是的。一旦你将你的对象设置为 nil，它就会被 Arc 杀死（大多数情况下，根据我的经验，你可以信任 ARC）

将为您创建 arc 中的 Dealloc 方法。您不能直接进行 dealloc 调用。但是，如果您需要释放实例变量以外的资源，您仍然可以创建自定义 dealloc 方法。创建自定义 dealloc 方法时，不要调用 [super dealloc] 方法。这将为您完成并由编译器强制执行。

[你可以在这里](http://longweekendmobile.com/2011/09/07/objc-automatic-reference-counting-in-xcode-explained/)阅读更多关于它的信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:57:02.437

我认为您指向的原始对象（您使用 alloc/init 创建的空 A 对象）将被释放，但您仍然可以使用“ **a** ”指针，并使其指向另一个对象。

# facebook - Facebook like 按钮将查询字符串添加到 url

> ID：12070304
> 
> 赞同：3
> 
> 时间：2012-08-22T09:38:48.687
> 
> 标签：facebook, facebook-like

我正在实现 facebook like 按钮，并为它指定要喜欢的 url，当我点击 LIKE 按钮时，在 facebook 中我看到了喜欢的正确页面，但是当我点击那里的链接时，链接是在附加了一些奇怪的 facebook 查询字符串的代码。

例如：我喜欢的页面是 [http://www.mydomain.com/path/to/the/page](http://www.mydomain.com/path/to/the/page)

当我在 facebook 中点击喜欢的链接时，网址是： [http](http://www.mydomain.com/path/to/the/page) **://www.mydomain.com/path/to/the/page ?fb_action_ids=#####&fb_action_types=og.likes&fb_source=timeline_og&action_object_map={"# ##"%###}&action_type_map={"###"%3A"og.likes"}&action_ref_map=[]**

并且页面没有正确加载，这是 Facebook 的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T14:22:30.453

使用社交插件的 xfbml 或 html5 版本并在您的元标记中包含此

```
<meta property="og:url" content="...." /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-03T07:30:43.110

我们可以在 .htaccess 文件的帮助下删除/剥离附加的查询字符串。将下面提到的代码放在您的 .htaccess 文件中：

```
RewriteCond %{QUERY_STRING} fb_action_ids=.*$
RewriteRule .* %{REQUEST_URI}? [R=301,L]
RewriteCond %{QUERY_STRING} fb_comment_id=.*$
RewriteRule .* %{REQUEST_URI}? [R=301,L] 
```

这会成功的:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-07T17:55:49.267

我通过在 fb:like 按钮和 og:url 中定义 URL 解决了这个问题。

```
<fb:like href="http://www.yourwebsite.com/yourfullurl.html" send="true" layout="button_count" width="300" show_faces="false"></fb:like> 
```

现在无论从 FB 发回的参数如何，它似乎都尊重计数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T12:21:35.003

Facebook 将各种参数添加到 URL，以便您可以跟踪访问的来源等。它可能是您的页面不使用这些参数，而不是 facebook。理想情况下，如果您不需要这些参数，您的页面应该忽略它们。

# eclipse - 在 Eclipse 中调试 FuseESB 应用程序

> ID：12070313
> 
> 赞同：6
> 
> 时间：2012-08-22T09:39:09.327
> 
> 标签：eclipse, eclipse-plugin, apache-karaf, fuseesb, apache-servicemix

Fuse ESB 使用 karaf 服务器和 OSGi。

对于代码，如果有人有步骤来获取应用程序的调试器，它将有所帮助。

我目前正在使用 Eclipse Indigo。由于使用了 OSGi，我们使用 Maven 来构建它。

哪个插件将有助于使用 OSGi 的 Karaf

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T08:31:09.140

Java 允许您远程调试任何正在运行的 JVM。

因此，如果您使用调试参数启动 ESB，那么它将在调试模式下运行，侦听端口 5005。

```
davsclaus:/opt/fuse-esb-7.0.1.fuse-084$ bin/fuseesb debug
Listening for transport dt_socket at address: 5005 
```

然后，您可以使用该端口号从 Eclipse 进行远程调试。这是标准的 Java 远程调试，Eclipse 已经为此提供了一个向导。它是具有远程调试功能的调试向导。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T14:59:40.783

您只需在 Fuse ESB 启动脚本（例如 fuseesb.bat 或 karaf.bat）中放入以下行：

设置 KARAF_DEBUG=true

之后，Fuse ESB 将使用 5005 端口以调试模式启动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-09T15:24:43.000

1) 只需运行 $fuse debug (jboss fuse 6.1.0 版本) 调试端口为 5005, 2) 在 eclipse 或 jboss dev studio 中执行以下操作 i) 运行 ii) 调试配置 iii) 远程 java 应用程序 -> 创建新的 iv) 主机： localhost，端口：5005 v) 点击调试 3) 在 java 类中放置断点

# string - 在 Clojure 中加入多个惰性字符串序列

> ID：12070314
> 
> 赞同：2
> 
> 时间：2012-08-22T09:39:15.260
> 
> 标签：string, clojure, concatenation, lazy-sequences

我有几个字符串：

```
(def a "some random string")
(def b "this is a text") 
```

现在我想连接它们的一部分来创建一个字符串“一些文本”。不幸的是，下面的两个字符串都不起作用。

```
(clojure.string/join " " [(take 4 a) (take-last 4 b)])
(str (take 4 a) " " (take-last 4 b)) 
```

这是因为函数`take`并`take-last`返回惰性序列。问题是：连接多个惰性字符串序列并返回一个字符串的正确方法是什么？

**编辑：**我找到了一种解决方案——`(apply str (concat (take 4 a) " " (take-last 4 a)))`但它是最正确的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T09:54:36.200

与其使用序列函数对输入字符串进行切片，不如使用更高效的*方法*（`subs`对于子字符串；请注意，有一个与 GC 相关的警告，见下文）：

```
(subs "asdf" 1 2)
; => "s"

;; a and b as in the question text
(clojure.string/join " " [(subs a 0 4) (subs b (- (count b) 4))])
; => "some text" 
```

前面提到的警告是，只要`"s"`这里第一个示例中返回的内容仍然没有资格进行垃圾收集，那么原始内容也是如此`"asdf"`（因为在没有分配新存储的情况下`subs`将“视图”返回到输入`String`中——这是 Java包装`substring`方法的行为`subs`）。如果您立即将其`"s"`交给`subs`并且不保留对它的其他引用，这不是问题，因为`join`在拉出字符后会丢弃它。

毕竟，如果您最终确实使用了惰性字符序列，那么除了使用`(map (partial apply str) [...your vector here...])`将输入转换`clojure.string/join`为字符串之类的方法外，别无他法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T09:56:38.660

试试这个，是的，因为你的代码结果不正确，因为懒惰。

```
(str (apply str (take 4 a)) " " (apply str (take-last 4 b))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T05:52:39.190

```
(str/join " " (map (fn [f col] (f col))
               [first last]
               (map #(str/split % #" ") [a b]))) 
```

# iphone - 从 NSMutableArray 中的数据填充 iPhone 中的单独数组

> ID：12070315
> 
> 赞同：0
> 
> 时间：2012-08-22T09:39:16.867
> 
> 标签：iphone

在我的一个应用程序中，我需要从一个获取数据`NSMutableArray`并将我们获得的数据存储在 iPhone 中的单独数组中。请为我提供解决方案。我该如何做到这一点？

要求如下：

1.  实际上，所有项目都在一个数组中可用（这是我从服务器获得的）。

2.  另一个数组中可用的过滤器总数（这也是我从服务器获得的）。

3.  基于每个过滤器（每个过滤器都与几个项目链接），我必须从项目数组中获取项目。

4.  我能够获取与单独过滤器相关的项目，但问题是在获取项目后，我必须将这些项目存储在与每个过滤器相关的单独新数组中（这意味着我必须在运行时创建新数组）。

    正是在这里，我遇到了麻烦。如何在运行时动态创建数组而不是提前声明它们？因为过滤器数量在服务器端的任何时间点都会发生变化，所以我无法提前预测我需要多少个阵列。

我正在遵循这种方法，但这是我面临的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:57:55.447

创建一个可变字典，在其中添加带有相应过滤器的项目并将该对象添加到新的 NSMutable 数组中。这将为每个不同的项目使用相应的过滤器。您可以从项目的相应密钥中获取项目。

# sql - 非规范化为管道分隔列表

> ID：12070316
> 
> 赞同：1
> 
> 时间：2012-08-22T09:39:18.493
> 
> 标签：sql, sql-server

> **可能重复：**
> [有没有办法创建一个 SQL Server 函数来将子查询中的多行“连接”到单个分隔字段中？](https://stackoverflow.com/questions/6899/is-there-a-way-to-create-a-sql-server-function-to-join-multiple-rows-from-a-su)

我有一个这样的表：

```
客户定制
------------
一个 1
b 2
b 3
c 4
c 5
c 6

```

我想将上面的非规范化为以下形式

```
客户定制
---------------
一个 1
b 2|3
c 4|5|6

```

请注意，acc 列现在应该包含任何客户的以竖线分隔的帐户列表。此外，客户的可能帐户数量也可以是可变的。

如何使用 SQL 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T09:43:35.223

试试这个：

```
SELECT cust, acc = 
    STUFF((SELECT '| ' +CAST( acc as varchar(20))
           FROM <table> b 
           WHERE b.cust = a.cust 
          FOR XML PATH('')), 1, 2, '')
FROM <table> a
GROUP BY cust 
```

# [SQL 小提琴演示](http://sqlfiddle.com/#!3/adcc6/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T09:58:52.307

如果您想按 Cust 分组（类似于`Group_Concate`MySQL），SQL Server 中没有任何方法。所以试试这个：

```
SELECT * FROM (
        SELECT  DISTINCT cust
        FROM    t
        ) table2
    CROSS APPLY
        (SELECT  CASE ROW_NUMBER() 
          OVER(ORDER BY acc) 
          WHEN 1 THEN '' ELSE ' | ' END + 
          (cast(acc as varchar))
        FROM    t table3
        WHERE   table3.cust = table2.cust
        ORDER BY acc
        FOR XML PATH ('')
        ) table3(acc) 
```

# [*看到这个 SQLFiddle*](http://sqlfiddle.com/#!3/b8e86/10)

另见：[Group columns into multiple rows and Group_concate like MySQL in SQL Server](https://stackoverflow.com/questions/11912740/group-columns-into-multiple-rows-and-group-concate-like-mysql-in-sql-server)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T09:54:00.757

试试这个：

```
 select cust,
STUFF((select '|'+cast(acc as varchar) from c1 where c1.cust = c2.cust for XML   path('')),1,1,'') as acc from c1 c2
group by cust 
```

# c# - VS的第一个版本 - 很多输出（不仅仅是一个.exe），我可以减少吗？

> ID：12070320
> 
> 赞同：1
> 
> 时间：2012-08-22T09:39:34.130
> 
> 标签：c#, .net, visual-studio-2010, dll, compilation

在为发布编译一个简单的控制台应用程序项目后，我得到了很多输出：

*   .exe => 很好，我肯定需要这个:)
*   MyApp.exe.config => 我正在使用和更改它，没关系
*   一些 .dll 文件 => 这些是我使用的外部库，我认为这也很好

未知：

*   我的应用程序.pdb
*   MyApp.vshost.exe
*   MyApp.vshost.exe.config
*   MyApp.vshost.exe.manifest
*   log4net.xml => 呵呵，log4net的配置已经在MyApp.exe.config里了，为什么这里还有另一个log4net config xml？

我可以删除其中一些而不会遇到以后的麻烦吗？我可以将 .dll 以某种方式添加*到*.exe 中（这样我就不必总是将所有 .dll 与 .exe 一起复制）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T09:42:28.743

这是意料之中的，而且都是有目的的——但你是对的：你不需要任何“未知”文件，并且可以删除它们（当然也不需要分发它们）。有关信息：

*   MyApp.pdb 是调试符号；对堆栈跟踪很有用，如果有问题也可以在以后进行调试；您可以通过“高级构建设置”对话框（项目属性、构建、高级...）中的“调试信息”选项禁用此功能，但我不推荐它
*   MyApp.vshost.* 是调试器宿主进程；您可以通过禁用“启用 Visual Studio 托管进程”选项（项目属性、调试）来禁用此功能
*   log4net.xml 是智能感知注释 - 在添加引用时对 IDE 使用很有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T09:42:46.747

这些文件不打算分发到客户端电脑，也不用于应用程序正常工作：它们在那里（也）用于调试目的。
如果您想将 dll“合并”到您的项目中，请尝试使用 Microsoft 实用程序[ILMerge](http://www.microsoft.com/en-us/download/details.aspx?id=17630)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T09:42:52.000

当您在发布配置中构建解决方案时，将没有 *.vshost.*.，这是用于调试托管过程的可执行文件。

log4net.xml 你可以删除，我相信。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T09:45:05.593

您应该可以删除/不部署其中的大部分。如果 dll 是托管程序集，您可以使用[IlMerge](http://research.microsoft.com/en-us/people/mbarnett/ILMerge.aspx)，它将为您将 dll 添加到 exe 中。

# c - 在 C 中实现通用链表库时的内存管理

> ID：12070321
> 
> 赞同：1
> 
> 时间：2012-08-22T09:39:40.280
> 
> 标签：c, memory-management, linked-list

我正在用 C 实现一个通用的链表

```
struct Node
{
  void* data;
  struct Node* next;
}; 
```

让用户担心分配和释放数据将指向什么更好，还是我们应该自己做？如果留给用户，他们可能会将堆栈对象存储到列表中，这可能会在以后引起问题。我只是想知道哪种设计更好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T09:43:57.137

一般**的经验法则**通常*是*：**谁分配内存——负责释放它**。

在您的情况下，您应该注意节点本身，并且用户应该对`data`.

这是有道理的，因为：

1.  通过对节点负责 - 它使您可以更自由地更改未来版本的实现，而无需担心向后兼容性。
2.  您不知道*如何*以及*是否*要释放`data`- 它可能是一个复杂类型，也需要在内部字段中释放，或者它可能指向堆栈分配的空间，如果尝试释放它会导致错误。
3.  此外，请记住，如果用户从列表中取出一个元素 - 这并不意味着他想要销毁数据。也许列表是一个[队列](http://en.wikipedia.org/wiki/Queue_%28abstract_data_type%29)，并且该元素当前正在由他处理？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-09T20:30:31.197

您还可以创建一个函数，该函数采用函数指针和数据类型在通用链接列表中释放。用户可以在函数中提供自定义代码并将指针传递给该函数以执行他们的代码版本以释放复杂数据类型中分配的内存，例如需要遍历的嵌套结构或具有多个指针变量的结构需要也被解除分配。以下是这个想法的一个片段。主程序

```
int int_data;  /* int can be replaced by any other data type */
deallocate_data(user_defined_free, &int_data);

void user_defined_free(void *data)
{
    int *i = (int *)data;    
    /* cast to your data type and 
     perform deallocation */
} 
```

在您的通用链表代码中的某处

```
void deallocate_data (void (*p)(void *), void *data)
{
  /* call user defined function to free their data structure */
    p(data);
} 
```

# php - 比较两个 stdClass 对象

> ID：12070326
> 
> 赞同：0
> 
> 时间：2012-08-22T09:40:10.393
> 
> 标签：php, mysql, wordpress, search, taxonomy

我目前正在 Wordpress 主题中进行修改后的搜索，该主题查询自定义分类`location`并将其术语显示为搜索结果。我找不到内置的 Wordpress 函数来处理这个问题，所以我使用了`$wpdb query`

```
$keywords = $_GET['s'];
$results = $wpdb->get_results( "SELECT * FROM $wpdb->terms WHERE name LIKE '%%$keywords%%'");

<ul>
<?php foreach ( $results as $result ) :?>
   <li><?php echo $result->name;?></li>
<?php endforeach;?>
</ul> 
```

问题在于该表`wp_terms`不仅存储自定义分类术语，还存储其他默认术语。因此，为了仅显示自定义分类法的搜索结果，而不是其他默认术语，我想使用`get_terms`来获取属于自定义分类法的所有术语，并根据结果`location`显示表中的术语`wp_terms``get_terms``in_array`

```
$keywords = $_GET['s'];
$results = $wpdb->get_results( "SELECT * FROM $wpdb->terms WHERE name LIKE '%%$keywords%%'");

$terms = get_terms("location");

<ul>
<?php foreach ( $results as $result ) :?>
  if(in_array($result->name, $terms)) :?>
     <li><?php echo $result->name;?></li>
  <?php endif;?>
<?php endforeach;?>
</ul> 
```

但是，`$results`and`$terms`都是 stdClass 对象，所以`in_array`不起作用。

是否有函数、方法或可能的 MySQL 查询允许我根据对象`$results`的内容显示对象的结果`$terms`？

提前致谢。

**编辑：** 内容`$terms`

```
Array ( 
  [0] => stdClass Object ( [term_id] => 32 [name] => US [slug] => us [term_group] => 0 [term_taxonomy_id] => 32 [taxonomy] => signs [description] => [parent] => 25 [count] => 1 ) 
  [1] => stdClass Object ( [term_id] => 22 [name] => EU [slug] => eu [term_group] => 0 [term_taxonomy_id] => 22 [taxonomy] => signs [description] => [parent]  => 0 [count] => 3 ) 
  [2] => stdClass Object ( [term_id] => 26 [name] => AU [slug] => au [term_group] => 0 [term_taxonomy_id] => 26 [taxonomy] => signs [description] => [parent] => 22 [count] => 1 ) 
  [3] => stdClass Object ( [term_id] => 27 [name] => IE [slug] => ie [term_group] => 0 [term_taxonomy_id] => 27 [taxonomy] => signs [description] => [parent] => 22 [count] => 2 ) 
  [4] => stdClass Object ( [term_id] => 23 [name] => PK [slug] => pk [term_group] => 0 [term_taxonomy_id] => 23 [taxonomy] => signs [description] => [parent] => 0 [count] => 2 ) 
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:53:40.807

您可以将它们转换为数组

```
(array) $variable; 
```

或者，如果您的 stdClass 包含嵌套的 stdClass，您可以执行以下操作：

```
function obj_to_array_recursive(stdClass $obj) {
    foreach ($obj as &$element) {
        if ($element instanceof stdClass) {
            obj_to_array_recursive($element);
            $element = (array)$element;
        }
    }
    $obj = (array)$obj;
    return $obj;
} 
```

# visual-studio-2010 - Visual Studio 2010 先决条件 x64 安装错误代码 1603

> ID：12070332
> 
> 赞同：0
> 
> 时间：2012-08-22T09:40:36.047
> 
> 标签：visual-studio-2010, installation

安装 Visual Studio 2010，安装在 Visual Studio 2010 Prerequisites x64 处停止

我有：Windows 7 Ultimate x64

我尝试手动安装它也失败了

消息显示安装失败，错误日志显示：

```
[08/22/12,12:31:29] Microsoft Visual Studio 2010 64bit Prerequisites (x64): [2] Error: Installation failed for component Microsoft Visual Studio 2010 64bit Prerequisites (x64). MSI returned error code 1603
[08/22/12,12:31:31] VS70pgui: [2] DepCheck indicates Microsoft Visual Studio 2010 64bit Prerequisites (x64) is not installed.
[08/22/12,12:31:31] VS70pgui: [2] DepCheck indicates Microsoft Visual F# 2.0 Runtime was not attempted to be installed.
[08/22/12,12:31:31] VS70pgui: [2] DepCheck indicates Microsoft Visual Studio Macro Tools was not attempted to be installed.
[08/22/12,12:31:31] VS70pgui: [2] DepCheck indicates TFS Object Model (x64) was not attempted to be installed.
[08/22/12,12:31:31] VS70pgui: [2] DepCheck indicates .NET Framework 4 Multi-Targeting Pack was not attempted to be installed.
[08/22/12,12:31:31] VS70pgui: [2] DepCheck indicates Microsoft Visual Studio 2010 Ultimate - ENU was not attempted to be installed.
[08/22/12,12:31:31] VS70pgui: [2] DepCheck indicates Microsoft Web Deployment Tool (x64) was not attempted to be installed.
[08/22/12,12:31:31] VS70pgui: [2] DepCheck indicates Microsoft ASP.NET MVC 2 - Visual Studio 2010 Tools was not attempted to be installed.
[08/22/12,12:31:31] VS70pgui: [2] DepCheck indicates Microsoft ASP.NET MVC 2 was not attempted to be installed.
[08/22/12,12:31:31] VS70pgui: [2] DepCheck indicates Microsoft Silverlight was not attempted to be installed.
.....
....
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:01:03.650

错误 1603 是一个非常普遍的安装错误，遗憾的是它没有提供太多信息。

然而，这可能**仍然**与权限相关。

[Microsoft 的知识库](http://www.microsofttranslator.com/BV.aspx?ref=CSSKB&lo=SS&from=en&to=fr&a=http://support.microsoft.com/kb/834484/)提供了有关错误 1603 的以下可能原因：

> 如果以下任一条件为真，您可能会收到此错误消息：
> 
> *   您尝试将 Windows Installer 程序包安装到的文件夹已加密。
> *   包含您尝试将 Windows Installer 程序包安装到的文件夹的驱动器将作为替代驱动器访问。
> *   SYSTEM 帐户对您尝试将 Windows Installer 程序包安装到的文件夹没有完全控制权限。您注意到错误消息是因为 Windows Installer 服务使用 SYSTEM 帐户安装软件。

[另一篇文章](http://www.symantec.com/connect/articles/understanding-error-1603-fatal-error-during-installation)提供了其他可能的失败原因，以及修复此错误的演练。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:00:13.480

在为这个问题挣扎了几个小时后，我记得过去也遇到过同样的问题。两次都出现问题是因为我之前已经成功安装了 Visual Studio 2010（或 Visual Studio 2010 Express），同时我已经在我现在尝试安装它的同一台 PC 上卸载了它。这意味着当我卸载它并尝试再次安装时，我遇到了安装问题。

然后我在安装日志中看到了错误2908。我用谷歌搜索并发现了这个：

[http://www.add-in-express.com/creating-addins-blog/2007/11/12/windows-installer-error-2908/](http://www.add-in-express.com/creating-addins-blog/2007/11/12/windows-installer-error-2908/)

问题是当我卸载 VS2010 时，一些注册表项没有被清除，所以安装程序认为这些组件已经安装。上面文章中的人在注册表中找到了这个条目并将其删除。之后，他能够再次安装 VS2010。

关于我的问题，我没有找到有问题的条目，所以我不得不从头重新安装 Windows 7，然后在我的新操作系统上成功安装 VS2010。

不幸的是，对于每台 PC，无法以相同的方式检测到该问题，因此没有特定的解决方案。无论如何，它与 Windows 注册表有关，所以如果有人发现更多内容，请添加评论以帮助他人。

顺便说一句，我注意到很多人在安装 VS2010 时遇到问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-22T05:44:40.900

1.  尝试在文件夹 WCU \ 64bitPrereq \ x64 中安装 VS_Prerequisites_x64_enu.msi
2.  如果出现错误窗口/符号，请在 windows 文件夹中创建文件夹“符号”。
3.  尝试再次安装 VS_Prerequisites_x64_enu.msi
4.  成功安装先决条件后再次运行 Visual Studio 安装程序

# javascript - 如何在 asp.net mvc 3 上的触摸屏上使用我的范围 silder

> ID：12070335
> 
> 赞同：3
> 
> 时间：2012-08-22T09:40:38.437
> 
> 标签：javascript, asp.net, html, asp.net-mvc-3

我在 asp.net mvc 3 razor 中有一个网站，并且有一些范围滑块。此范围滑块工作正常，但不适用于触摸屏。我的 HTML 代码：

```
<div id="slider-container-zucker" class="slider_style"></div> 
```

和js：

```
$(function () {
var str = document.URL.split("/");
var url = str[0] + "//" + str[2];

$('#slider-container-zucker').slider({
    range: true,
    min: 0,
    max: 9,
    values: [$("#zuckerMin").val(), $("#zuckerMax").val()],
    change: function (event, ui) {
        $.ajax({
            type: "GET",
            url: url + "/Slider/Zucker?max=" + ui.values[1] + "&min=" + ui.values[0],
            success: function (result) {
                $("#wineResult").html(result);
            }
        });            
        $('#sliderImage').load(url + "/Slider/ChangeSlider?max=" + ui.values[1] + "&min=" + ui.values[0] + "&sliderName=zucker");
    }
  });
 }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T09:48:32.627

您需要添加更多此 jquery 库，您必须在此处看到它： [https ://github.com/ghusse/jquery-ui-touch-punch/blob/master/jquery.ui.touch-punch.min.js](https://github.com/ghusse/jquery-ui-touch-punch/blob/master/jquery.ui.touch-punch.min.js)

```
/*
* jQuery UI Touch Punch 0.2.2
*
* Copyright 2011, Dave Furfero
* Dual licensed under the MIT or GPL Version 2 licenses.
*
* Depends:
*  jquery.ui.widget.js
*  jquery.ui.mouse.js
*/
(function(b){b.support.touch="ontouchend" in document;if(!b.support.touch){return;}var c=b.ui.mouse.prototype,e=c._mouseInit,a;function d(g,h){if(g.originalEvent.touches.length>1){return;}g.preventDefault();var i=g.originalEvent.changedTouches[0],f=document.createEvent("MouseEvents");f.initMouseEvent(h,true,true,window,1,i.screenX,i.screenY,i.clientX,i.clientY,false,false,false,false,0,null);g.target.dispatchEvent(f);}c._touchStart=function(g){var f=this;if(a||!f._mouseCapture(g.originalEvent.changedTouches[0])){return;}a=true;f._touchMoved=false;d(g,"mouseover");d(g,"mousemove");d(g,"mousedown");};c._touchMove=function(f){if(!a){return;}this._touchMoved=true;d(f,"mousemove");};c._touchEnd=function(f){if(!a){return;}d(f,"mouseup");d(f,"mouseout");if(!this._touchMoved){d(f,"click");}a=false;};c._mouseInit=function(){var f=this;f.element.bind("touchstart",b.proxy(f,"_touchStart")).bind("touchmove",b.proxy(f,"_touchMove")).bind("touchend",b.proxy(f,"_touchEnd"));e.call(f);};})(jQuery); 
```

# android - 我可以在 viewPager 中使用 setCurrentItem 并使用 onPageSelected 吗？

> ID：12070339
> 
> 赞同：1
> 
> 时间：2012-08-22T09:40:50.743
> 
> 标签：android, android-fragments

我的问题是最初直接加载片段，而且我想调用一个方法片段对用户可见。

为了加载正确的片段，我使用`viewPager.setCurrentItem()`in `onCreate`。它运作良好。

**`FragmentActivity code`**：

```
public void onCreate(final Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ...
    mTabsAdapter = new TabsPlayerAdapter(this, mRadioList);
    mMainViewPager.setAdapter(mTabsAdapter);
    mMainViewPager.setOnPageChangeListener(this);
    mMainViewPager.setCurrentItem(2);
} 
```

对于一个名为片段 Current 的方法，我使用`onPageSelected viewPager`. 它运作良好。

**`FragmentActivity code`**：

```
@Override
public void onPageSelected(int position) {
    Log.d(TAG, "onPageSelected - position: " + position);
    ((PlayerFragment) mTabsAdapter.mSparseFragment.get(position))
                                  .startAnnimation();
} 
```

**`FragmentStatePagerAdapter code:`**

```
@Override
public Fragment getItem(final int position) {
    Log.d(TAG, "getItem - position: " + position);
    Bundle args = new Bundle();  
        args.putString("num", mRadioModel.get(position).name);
        mSparseFragment.put(position, Fragment.instantiate  
                    (mContext,PlayerFragment.class.getName(), args));
        return mSparseFragment.get(position);
} 
```

**`FragmentStatePagerAdapter code :`**

```
@Override
public void destroyItem(ViewGroup container, int position, Object object) {
    super.destroyItem(container, position, object);
    Log.d(TAG, "destroyItem - position: " + position);
    mSparseFragment.remove(position);
} 
```

我可以分别做这两件事。但是当我尝试将两者一起使用时，`"NullPointerException"`当我调用我的`fragment`.
我看到`onPageSelected`在`getItem`我的`Adapter`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T20:06:30.053

解决方法很简单：

在你的适配器中写：

```
public static interface FirstShot
{
    public void onFirstShot();
}

private FirstShot firstShot;
private boolean shot = false;

@Override
public Fragment getItem(int arg0)
{
    if (!shot && firstShot != null)
    {
        shot = true;
        firstShot.onFirstShot();
    }

    // your code here
} 
```

现在在活动中实现 FirstShot：

```
@Override
public void onFirstShot()
{
    viewPager.post(new Runnable()
    {
        @Override
        public void run()
        {
            boolean needNotify = false;
            if (pager.getCurrentItem() == position) needNotify = true;
            viewPager.setCurrentItem(position, false);
            if (needNotify) onPageSelected(position);
        }
    });
} 
```

onPageSelected() 现在调用！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T09:56:59.863

当调用 onAttachedToWindow 时，您将知道项目可用。在您调用 setCurrentItem 的那一刻，适配器尚未用于创建视图。（setAdapter 不足以知道所有都被膨胀了）

否则，您可以考虑在设置 currentItem 之后设置您的监听器，因此在打开片段时没有动画。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-08T08:17:46.783

接受的解决方案对我不起作用，因为在 getItem 创建它们之前我仍在调用 onPageSelected。

我这样修复它：

```
public class MyAdapter extends FragmentPagerAdapter {

    ...
    ...

    @Override
    public Fragment getItem(int position) {
        Fragment fragment = createdFragments.get(position);
        if (fragment != null) {
            return fragment;
        }

        fragment = createNewFragment();
        createdFragments.put(position, fragment);

        return fragment;
    }

    public TabFragment getFragment(int position) {
        TabFragment fragment = createdFragments.get(position);
        if (fragment == null) {
            fragment = (TabFragment) getItem(position);
        }
        return fragment;
    }
} 
```

然后我用来`adapter.getFragment()`通过代码获取片段并且永远不会得到空值。

# php - PHP多个Ajax请求：第一个请求阻止第二个请求

> ID：12070345
> 
> 赞同：4
> 
> 时间：2012-08-22T09:41:28.293
> 
> 标签：php, jquery, ajax, multithreading, asynchronous

我在一页上有 2 个 ajax 请求。我运行了第一个请求并分别启动了第二个请求。但是第二个在第一个运行后停止工作。并在第一个结束时继续。第一次请求需要很长时间 - 大约需要 30 - 60 秒，此时我需要第二次请求来显示日志第一次请求会发生什么。我尝试使用 async: true 但这对我没有帮助。

这是我的代码

```
<script type="text/javascript">
    var auto_refresh = setInterval( function()
        { asyncGet('log.php') }, 1000
    );

    function asyncGet(addr) {
        $.ajax({
            url: addr,
            async: true,
            success: function (response) {
                $('#loadLog').html(response);
            }
        });
    }

    function getConn(addr) {
        $.ajax({
            url: addr,
            async: true,
            success: function (response) {
                stopGet();
            }
        });
    }

</script>

<div id="loadLog" class="lLog"></div> 
```

我以这种方式调用第一个 ajax 请求：getConn('main.php'); 按下按钮时的功能。第二个请求它正在运行，但在第一个请求完成之前不显示响应。

我将附上萤火虫的图片。main.php - 是需要较长时间的请求。log.php - 是被阻止的记录器。

![在此处输入图像描述](../Images/8339d8c953362b626893b220cd72e2d5.png)

真的很感激一些关于我哪里出错的指示

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T09:51:29.537

这可能是会话的问题。看看这篇[文章](http://konrness.com/php5/how-to-prevent-blocking-php-requests/)。假设您可能需要尽快关闭 main.php 中的会话。

# actionscript-3 - 将数据从dataGrid导出到excel

> ID：12070347
> 
> 赞同：1
> 
> 时间：2012-08-22T09:41:30.090
> 
> 标签：actionscript-3, apache-flex, flex4.5, export-to-excel

如何将数据从数据网格导出到 excel。我是 flex 的新手。我不知道。任何人都可以帮助我这样做或提出任何例子吗？请帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:35:39.687

请参阅下面的教程：

[在 Flex 中将数据导入/导出数据网格](http://cookbooks.adobe.com/post_Import_Export_data_in_out_of_a_Datagrid_in_Flex-17223.html)

[DataGrid 数据导出到 Excel](http://www.justskins.com/forums/datagrid-data-export-to-43645.html)

# json - 骨干+结合

> ID：12070353
> 
> 赞同：0
> 
> 时间：2012-08-22T09:41:54.517
> 
> 标签：json, backbone.js

```
var ListView = Backbone.View.extend({
el: $('hello'),
events: {                           
      'click .myName':  'namefunc',
},   
initialize: function() {
    var stuff = new FieldCollection();
    stuff.parse();
    var self = this;
    stuff.fetch({
        success: function (collection, response) {
            console.log(response);
            self.render(response);
            return response;
        }
    });
},
render:function(output){
    _.each(output, function(i){
        p=i.name;
        $(this.el).append("<button class='myName'>"+p+"</button><h1>"+i.img+"</h1><br/>");
    },this);     

},
namefunc:function(){
    alert('hiii');
} 
```

如何将更改警报的 hiii 输出与按下按钮的人的详细信息绑定...

```
{
    "name": "john",
    "img": "john.jpg",
    "loc": "delhi",
    "msg": "hello there"
} 
```

这是我得到的 json ......当我点击按钮（有约翰的名字）它应该显示它的味精......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:52:38.213

如果我理解了你的问题，你可以做类似的事情......

```
var _self = this, 
    obj = Object;

$("<button>"+someVariable+"</button>")
    .addClass('myName')
    .appendTo(this.$el)
    .on({
        "click": function() { _self.fn(obj) }
    }); 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T11:14:45.993

```
initialize: function() {
var self = this;
_.bindAll(this, 'render');
this.collection = new FieldCollection();
this.collection.parse();

this.collection.fetch({
    success: function (collection, response) {
        console.log(response);
        self.render();
    }
}); 
```

},

```
render:function(){
var self = this;
_.each(this.collection, function(model) {
    // here you should create subviews and delegate events within particular view
    // i.e:
    // self.buttonViews.push(new ButtonView({ model: model}));
    // but for now you can use data-id attribute to match the button you clicked
    $(self.el).append("<button class='myName' data-id=" + model.id + ">" + model.name + "</button><h1>" + model.img + "</h1><br/>");
}); 
```

},

```
namefunc:function(){
//use data-id attribute we put in button tag earlier to catch the id
//and use this.collection.get('id') function to get the model you want to get parameters of 
```

}

# wpf - 使用属性将 LINQ XDocument 绑定到 Treeview

> ID：12070357
> 
> 赞同：1
> 
> 时间：2012-08-22T09:41:59.467
> 
> 标签：wpf, xml, binding, treeview, linq-to-xml

我想绑定我`XDocument`的`TreeView`控制。节点工作正常，但我无法绑定属性（我想在树中列出整个 XML 文件 - 节点和属性应该是可见的）。我用`HierarchicalDataTemplate`. 问题出现了，因为没有像`Attributes`（[LINQ to XML Dynamic Properties](http://msdn.microsoft.com/en-us/library/bb669107.aspx)这样说）的属性。我该如何解决我的问题？我搜索了整个网络，甚至谷歌叔叔都没有帮助我：SI 阅读了一些关于`ObjectDataProvider`和`IValueConverter`界面的内容，但实际上并不了解如何使用这些来解决我的问题。提前感谢您的帮助。片

# php - 生成动态 docx 文档

> ID：12070359
> 
> 赞同：5
> 
> 时间：2012-08-22T09:42:19.317
> 
> 标签：php, templates, docx

我正在寻找一种使用 PHP 生成 docx 文件的方法。

我使用过[PHPWord](http://phpword.codeplex.com/)，但这对我的项目来说还不够。它没有足够的元素，模板引擎太基础。

我的系统必须能够：

*   嵌套表
*   合并表格单元格
*   循环模板
*   组合/嵌套模板

有什么好的解决办法吗？有没有人有这方面的经验？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T13:33:42.850

[OpenTBS](http://www.tinybutstrong.com/opentbs.php)可以使用模板技术在纯 PHP 中生成 Docx 文档。

*   嵌套表 => 是
*   合并表格单元格 => YES
*   循环模板 => 我不确定是什么意思，但可能是
*   组合/嵌套模板 => 您可以插入 XML 子模板，而不是 DOCX 子模板。或者您可以阅读其他 DOCX 子 XML 部分，并将它们合并到一个主 DOCX 中。

# javascript - 没有得到 datePicker 弹出窗口

> ID：12070361
> 
> 赞同：0
> 
> 时间：2012-08-22T09:42:19.733
> 
> 标签：javascript, asp.net-mvc-3, datepicker

嗨，我正在将 mvc3 与 asp.net 一起使用

在我看来，在网格中我有“选择行”（复选框）、开始日期（标签）和结束日期（标签）字段

当我单击选择行而不是标签时，应该出现一个日期选择器，以便用户可以更改结束日期

我在我看来写了以下代码

```
 <div class="cell" style="width:auto;"> <input type="checkbox" class="a" id="selected" onclick="Checked()" />
        </div>

      function Checked() {
if (document.getElementById('selected').checked) {
    document.getElementById('edit1').style.display = 'block';
    document.getElementById('edit2').style.display = 'none';

}
else {
    document.getElementById('edit2').style.display = 'block';
    document.getElementById('edit1').style.display = 'none';
}
} 
```

为了得到 datepicker 我写了这个

```
 <div class="cell" id="edit2" style="width:auto;">@Html.DisplayFor(modelItem => item.ExhibEndDate)</div>
        <div class="cell" id="edit1" style="width:auto; display:none;">@Html.Editor("ExhibEndDate")  </div> 

   $(document).ready(function () {
 $('#ExhibEndDate').datepicker({ dateFormat: 'dd-mm-yy' });
  }); 
```

但我无法获得日期选择器你能帮我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:26:02.643

我使用文本框而不是 editorfor 如下

```
 @Html.TextBox("Enddate", item.ExhibEndDate, new { @class = "date" })

   $(document).ready(function () {

    $('.date').datepicker({ dateFormat: 'dd/mm/yy' });
             }); 
```

# asp.net - 下拉列表 asp mvc

> ID：12070363
> 
> 赞同：6
> 
> 时间：2012-08-22T09:42:23.443
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor

我想为我的模型类的某些属性生成一个下拉列表。我正在开发一个 mvc .net 应用程序，并且我正在使用 razor 引擎来查看视图。这是我的课：

```
public class present
{       
    public DateTime jour { get; set; }
    public int entree_mat_h { get; set; }
    public int entree_mid_h { get; set; }
    public int sortie_mat_h { get; set; }
    public int sortie_mid_h { get; set; }
    public int entree_mat_m { get; set; }
    public int entree_mid_m { get; set; }
    public int sortie_mat_m { get; set; }
    public int sortie_mid_m { get; set; }
    public string mac { get; set; }
    public string ip { get; set; }
} 
```

例如，我想为每个整数属性显示一个从 0 到 60 的值的下拉列表。@html.dropdownlistfor() 在这种情况下有效吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T09:54:05.277

在您看来，声明可能值的列表，在您的情况下为 0 到 60

```
@{ var values = new SelectList(Enumerable.Range(0, 60)); } 
```

然后，您可以在`DropDownListFor`助手中使用它

```
@Html.DropDownListFor(m => m.entree_mat_h, values)
@Html.DropDownListFor(m => m.entree_mid_h, values)
.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:52:37.157

是的，但是您需要将自定义选择列表与您想要的值一起传递给它。

所以你会做这样的事情：

```
 var list = new List<SelectListItem>();

   for(int i=1; i < 61; i++)
   {
        list.Add(new SelectListItem{Text = i, Value = i});
   }

   var sl = new SelectList(items, "Value", "Text"); 
```

然后你需要将它传递给模型

然后在视图中，您将执行以下操作：

```
 @Html.DropDownListFor(x => x.Quantity, @Model.Quantity) 
```

或类似的规定。

显然我使用了假名字，所以你需要让它适合你自己的模型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T09:54:20.197

使用此扩展方法从源构建下拉列表（选择所有投影到键和值的值）。例子

```
public static IEnumerable<SelectListItem> ToDropDown<TSource>(this IEnumerable<TSource> source, Func<TSource, string> keySelector, Func<TSource, string> elementSelector, Func<TSource,bool> selected)
        {
            if (source == null)
            {
                return new List<SelectListItem>();
            }
            return source.Select(c => new SelectListItem { Value = keySelector(c), Text = elementSelector(c), Selected = selected(c) }).ToList();
        } 
```

填满你的viewBag

```
ViewBag.Languages = languageRepository().GetAll().ToList().ToDropDown(c => c.ID, c => c.Description, c => c.ID == "EN"); 
```

最后是剃须刀

```
 @Html.DropDownList("ddLanguages", (IEnumerable<SelectListItem>)ViewData.Languages, "Please Select") 
```

# openlayers - openlayers中锚定弹出窗口的偏移量

> ID：12070375
> 
> 赞同：1
> 
> 时间：2012-08-22T09:42:46.903
> 
> 标签：openlayers

我正在使用 Openlayers-2.12 版本。但是锚定的弹出偏移无法正常工作。尽管我已将相对定位指定为“tr”，但它会在地图的另一半显示左侧的弹出窗口。

```
var popup = new OpenLayers.Popup.Anchored("popup");
var offset = {'size':new OpenLayers.Size(10,12),'offset':new OpenLayers.Pixel(0,-12)};
popup.offset = offset;
popup.relativePosition = "tr"; 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:22:51.293

我通过认为它可以帮助其他人来回答我自己的问题。如果我只使用弹出窗口而不是锚定弹出窗口，它工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-27T16:27:22.000

它看起来而不是偏移属性，它们可以访问用于计算 x,y 位置的函数。

```
popup.calculateNewPx = function(px){
    // modify OpenLayers.Pixel object here
    return px;
} 
```

参考：[http ://dev.openlayers.org/docs/files/OpenLayers/Popup/Anchored-js.html#OpenLayers.Popup.Anchored.calculateNewPx](http://dev.openlayers.org/docs/files/OpenLayers/Popup/Anchored-js.html#OpenLayers.Popup.Anchored.calculateNewPx)

更具体地说，这就是我最终要做的。

```
popup.calculateNewPx = function(px){
    if (popup.size !== null){
        switch (popup.relativePosition){
            case 'tl':
                px = px.add((popup.size.w * -1) - popup.offset, (popup.size.h * -1) - popup.offset);
                break;
            case 'bl':
                px = px.add((popup.size.w * -1) - popup.offset, popup.offset);
                break;
            case 'tr':
                px = px.add(popup.offset, (popup.size.h * -1) - popup.offset);
                break;
            case 'br':
                px = px.add(popup.offset, popup.offset);
                break;
        }
    }
    return px;
}; 
```

# jstl - 数据截断：在mysql中

> ID：12070376
> 
> 赞同：0
> 
> 时间：2012-08-22T09:42:49.400
> 
> 标签：jstl

我有一个输入字段

```
 <body>
    <center>
    <div style="margin-top : 1px; border:1px solid #e4e4e4; width : 500px; background: #efefef; box-shadow : 0px 0px 20px 10px #e5e5e5 inset;">
        <p style="font-size: 18pt; font-family: verdana; text-shadow: 0px 0px 4px #000; color:#fff;">Student Exam Data</p>
        <form onsubmit="return message()">
            <p class="heading">Student Details</p>
            <p class="data">
                <label>Roll Number</label><input type="text" name="rollno" id="rollno" maxlength="4"/>
            </p>
            <p class="heading">Marks Obtained For Languages</p>
            <p class="data">
                <label>English</label><input type="text" name="english" id="english" onchange="calculate()" maxlength="3"/>
            </p>
            <p class="data">
                <label>Konkani</label><input type="text" name="konkani" id="konkani" onchange="calculate() maxlength="3""/>
            </p>

            <p class="heading">Marks Obtained For Natural Science</p>
            <p class="data">
                <label>Maths</label><input type="text" name="maths" id="maths" onchange="calculate() maxlength="3""/>
            </p>
            <p class="data">
                <label>Physics</label><input type="text" name="physics" id="physics" onchange="calculate() maxlength="3""/>
            </p>
            <p class="data">
                <label>Chemistry</label><input type="text" name="chemistry" id="chemistry" onchange="calculate() maxlength="3""/>
            </p>

            <p class="heading">Marks Obtained For Social Science</p>
            <p class="data">
                <label>Geography</label><input type="text" name="geography" id="geography" onchange="calculate() maxlength="3""/>
            </p>

            <p class="heading">Total Marks Obtained</p>
            <p class="data">
                <label>Total Marks</label><input type="text" name="total" id="total" readonly="readonly"/>
            </p>

            <p class="heading">Percentage</p>
            <p class="data">
                <label>Percentage</label><input type="text" name="percentage" id="percentage" readonly="readonly"/>
            </p>

            <p>
                <input type="submit" value="Submit">
            </p>

            <input type="hidden" name="mode" value="set">

        </form>
    </div>
    </center>

    <c:if test="${param.mode == 'set'}">

    roll number<c:out value="${param.rollno}"></c:out>
        <c:catch var="exception">
            <sql:setDataSource var="examDatabase" password="" user="root" driver="com.mysql.jdbc.Driver" url="jdbc:mysql://localhost/examination"/>
            <sql:update var="result" sql="insert into student_examdata values(?,?,?,?,?,?,?,?,?)" dataSource="${examDatabase}">

                <sql:param value="${param.rollno}.trim()"></sql:param>
                <sql:param value="${param.english}.trim()"></sql:param>
                <sql:param value="${param.maths}.trim()"></sql:param>
                <sql:param value="${param.physics}.trim()"></sql:param>
                <sql:param value="${param.chemistry}.trim()"></sql:param>
                <sql:param value="${param.konkani}.trim()"></sql:param>
                <sql:param value="${param.geography}.trim()"></sql:param>
                <sql:param value="${param.total}.trim()"></sql:param>
                <sql:param value="${param.percentage}.trim()"></sql:param>
            </sql:update>
        </c:catch>

        <c:if test="${exception != null }">
            <p class="error">
            <strong style="background : #fff; color:#000; width : 300px;">Exception</strong><br><br>
            <c:out value="${exception.message}"></c:out>
        </p>
        </c:if>

    </c:if>

</body> 
```

字段 roll_no 的数据类型是 varchar(4)。

错误是：插入 student_examdata 值（？，？，？，？，？，？，？，？，？）：数据截断：第 1 行的列“roll_no”的数据太长

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:26:52.013

这里有严重错误！

```
<sql:param value="${param.rollno}.trim()"></sql:param> 
```

如果你想修剪 rollno，请使用这个

```
<sql:param value="${param.rollno.trim()}"></sql:param> 
```

我希望这能回答你的问题！

# jquery - Drupal 7 - 在节点加载时调用 jquery 函数

> ID：12070377
> 
> 赞同：0
> 
> 时间：2012-08-22T09:42:50.480
> 
> 标签：jquery, drupal, drupal-nodes

我有一个节点（别名是“帮助”，节点 ID 是 12）并且想在这个节点加载时调用一个 jquery 函数。

如果它有助于节点拥有它自己的页面模板 page--node--12.tpl.php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:45:11.877

在您的主题的 template.php 文件中，您想使用在节点加载时调用的预处理钩子 - `hook_preprocess_node`。

在此处检查节点 ID，然后用于`drupal_add_js()`添加您的 jQuery 代码。

# c++ - 基本类型数组的迭代器类型

> ID：12070379
> 
> 赞同：1
> 
> 时间：2012-08-22T09:42:54.063
> 
> 标签：c++, templates, iterator, c++builder, typetraits

`std::copy<InputInterator, OutputIterator>( /*...*/ );`

如何确定`InputInterator`和`OutputIterator`键入双精度数组`double d[]`？有没有一种`iterator_traits<double*>::iterator_type`？

upd：我使用非常旧的编译器，所以我需要显式实例化

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:44:30.180

你为什么需要这个？`copy`是一个函数，所以，简单地使用

```
std::copy(d, d + size, d); 
```

此调用将自动推断参数的类型。

而且，还有`std::iterator_traits<T*>::pointer`, 评估`double*`as`double*`并且您可以简单地使用

`std::copy<double*, double*>(d, d + size, d);`

如果你想。

# python - Python大列表操作

> ID：12070382
> 
> 赞同：0
> 
> 时间：2012-08-22T09:42:59.583
> 
> 标签：python, algorithm, data-structures

我有如下 python 列表：

```
DEMO_LIST = [
    [{'unweighted_criket_data': [-46.14554728131345, 2.997789122813151, -23.66171024766996]},
     {'weighted_criket_index_input': [-6.275794430258629, 0.4076993207025885, -3.2179925936831144]},
     {'manual_weighted_cricket_data': [-11.536386820328362, 0.7494472807032877, -5.91542756191749]},
     {'average_weighted_cricket_data': [-8.906090625293496, 0.5785733007029381, -4.566710077800302]}],

    [{'unweighted_football_data': [-7.586729834820534, 3.9521665714843675, 5.702038461085529]},
     {'weighted_football_data': [-3.512655913521907, 1.8298531225972623, 2.6400438074826]},
     {'manual_weighted_football_data': [-1.8966824587051334, 0.9880416428710919, 1.4255096152713822]},
     {'average_weighted_football_data': [-2.70466918611352, 1.4089473827341772, 2.0327767113769912]}],

    [{'unweighted_rugby_data': [199.99999999999915, 53.91020408163265, -199.9999999999995]},
     {'weighted_rugby_data': [3.3999999999999857, 0.9164734693877551, -3.3999999999999915]},
     {'manual_rugby_data': [49.99999999999979, 13.477551020408162, -49.99999999999987]},
     {'average_weighted_rugby_data': [26.699999999999886, 7.197012244897959, -26.699999999999932]}],

    [{'unweighted_swimming_data': [2.1979283454982053, 14.079951031527246, -2.7585499298828777]},
     {'weighted_swimming_data': [0.8462024130168091, 5.42078114713799, -1.062041723004908]},
     {'manual_weighted_swimming_data': [0.5494820863745513, 3.5199877578818115, -0.6896374824707194]},
     {'average_weighted_swimming_data': [0.6978422496956802, 4.470384452509901, -0.8758396027378137]}]] 
```

我想操作列表项并进行一些基本的数学运算，例如获取每个数据类型列表（例如获取未加权数据的所有第一个元素并求和等）

目前我正在这样[做](http://pastebin.com/QqBA7QXH)。

当前的解决方案是一个非常基本的解决方案，我想这样做，如果列表长度增加，它可以自动计算结果。现在有四个列表，可以是5或8，最终结果应该是所有未加权值的第一个元素的总和，例如：

```
now I am doing result_u1/4,result_u2/4,result_u3/4
I want it like result_u0/4,result_u1/4.......result_n4/4 # n is the number of list inside demo list 
```

知道我该怎么做吗？

（对不起初学者的问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:17:52.053

您可以为自己实现一个特定的列表类，在 append 函数中添加带有新项目值的摘要，或者在删除时减少它们：

```
class MyList(list):
    def __init__(self):
        self.summary = 0
        list.__init__(self)

    def append(self, item):
        self.summary += item.sample_value
        list.append(self, item)

    def remove(self, item):
        self.summary -= item.sample_value
        list.remove(self, item) 
```

还有一个简单的用法：

```
my_list = MyList()
print my_list.summary  # Outputs 0
my_list.append({'sample_value': 10})
print my_list.summary # Outputs 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T10:20:29.910

首先替换这个：

```
for i in range(0,len(data_list)-1):
    result_u1+=data_list[i][0].values()[0][0]
    result_u2+=data_list[i][0].values()[0][1]
    result_u3+=data_list[i][0].values()[0][2]
print "UNWEIGHTED",result_u1/4,result_u2/4,result_u3/4 
```

有了这个：

```
sz = len(data_list[i][0].values()[0])
result_u = [0] * sz
for i in range(0,len(data_list)-1):
    for j in range(0,sz):
        result_u[j] += data_list[i][0].values()[0][j]
print "UNWEIGHTED", [x/len(data_list) for x in result_u] 
```

在其他地方应用类似的更改。这假设您的数据确实是“矩形”，也就是说每个相应的内部列表都具有相同数量的值。

稍微更“Pythonic”[*] 的版本：

```
for j in range(0,sz):
    result_u[j] += data_list[i][0].values()[0][j] 
```

是：

```
for j, dataval in enumerate(data_list[i][0].values()[0]):
    result_u[j] += dataval 
```

但是，您的代码存在一些问题：

*   `values()[0]`可能会给您字典中的*任何*值，因为字典是无序的。也许它恰好给你未加权的数据，也许不是。
*   我很困惑为什么你要在 0 到 的范围内循环`len(data_list)-1`：如果你想包括所有你需要的运动`0`，`len(data_list)`因为第二个参数 to `range`，上限，被*排除在外*。

您也许可以考虑像这样重新格式化您的数据：

```
DEMO_LIST = {
    'cricket' : {
        'unweighted' : [1,2,3],
        'weighted' : [4,5,6],
        'manual' : [7,8,9],
        'average' : [10,11,12],
    },
    'rugby' : ...
} 
```

一旦你在每项运动的字典中有相同的键，你可以用 替换`values()[0]`，`['unweighted']`这样你总是能得到正确的字典条目。并且一旦您拥有大量具有相同键的字典，您可以将它们替换为类或命名元组，以定义/强制这些值必须始终存在：

```
import collections
Sport = collections.namedtuple('Sport', 'unweighted weighted manual average')
DEMO_LIST = {
    'cricket' : Sport(
        unweighted = [1,2,3],
        weighted = [4,5,6],
        manual = [7,8,9],
        average = [10,11,12],
    ),
    'rugby' : ...
} 
```

现在您可以替换`['unweighted']`为`.unweighted`.

[*] “Pythonic”这个词的官方意思是“以 Python 程序员的风格完成，利用任何有用的 Python 特性来生成最好的惯用 Python 代码”。在实践中，它通常意味着“我更喜欢这个，而且我是一名 Python 程序员，因此这是编写 Python 的正确方法”。如果你是 Guido van Rossum，这是权威的争论，如果你不是，它是诉诸模糊的权威。在几乎所有情况下，它都可以替换为“good IMO”而不改变句子的含义；-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T10:26:35.607

在 Python 中，每当您开始计算可迭代对象（字符串、列表、集合、任何这些的集合）中有多少东西以循环遍历它时，这表明您的代码可以修改。

事情可以为 3 个东西工作，可以为 300、3000 和 300 万个相同的东西工作，而无需更改您的代码。

在您的情况下，您的逻辑是- *“对于每个`X`内部`DEMO_LIST`，做某事”*

这翻译成Python是：

```
for i in DEMO_LIST:
   # do something with i 
```

此代码段将贯穿任何大小，`DEMO_LIST`并且每次`i`都是 side 中的每一个`DEMO_LIST`。在您的情况下，它是包含您的字典的列表。

进一步扩展，您可以说：

```
 for i in DEMO_LIST:
      for k in i:
         # now you are in each list that is inside the outer DEMO_LIST 
```

扩展这个做一个实际的例子；总和`unweighted_criket_data`：

```
 all_unweighted_cricket_data = []
   for i in DEMO_LIST:
       for k in i:
         if 'unweighted_criket_data' in k:
             for data in k['unweighted_cricket_data']:
                  all_unweighted_cricked_data.append(data)

   sum_of_data = sum(all_unweighted_cricket_data) 
```

有各种“快捷方式”可以做同样的事情，但是一旦你理解了快捷方式试图做什么的“扩展”版本，你就会欣赏这些。

请记住，将其写出“很长的路”并没有错，尤其是当您不确定做某事的最佳方式时。一旦您对逻辑感到满意，您就可以使用列表推导等快捷方式。

# objective-c - 可变对象与不可变对象的性能

> ID：12070390
> 
> 赞同：3
> 
> 时间：2012-08-22T09:43:30.777
> 
> 标签：objective-c, performance, cocoa

我想问一下所有 Cocoa 的老手——在以下情况下使用可变对象和不可变对象之间**的性能有什么区别：**

*   `NSString`'s`stringByAppendingString:`与`NSMutableString`'s`appendString:`
*   `NSArray`'s`arrayByAddingObject:`与`NSMutableArray`'s`addObject:`
*   ...

谢谢你，编码愉快！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:58:55.337

这个问题很难回答：`NSArray`并且`NSString`不是实际的实现，它们是类集群，and`NSMutableArray`也是`NSMutableString`。无法确定底层的真正实现，因此很难比较性能。你可能不会找到一个明确的答案。

但我*猜*是：`stringByAppendingString`并`arrayByAddingObject`创建包含修改的新对象，*即将*当前项目复制到内存中的新位置，`NSMutableArray`并且`NSMutableString`应该具有更好的性能，因为它们的构建是为了在可能的情况下防止复制（实际上并非如此，因为`NSMutableArray`可能会重新复制内存当添加元素但不是每次都添加时）。

我认为你应该相信 CoreFoundation 的编码员：你不想改变对象吗？使用可变变量之一。

# jquery - 我的插件回调不起作用

> ID：12070392
> 
> 赞同：0
> 
> 时间：2012-08-22T09:43:35.283
> 
> 标签：jquery

我为不同 div 的上下文菜单开发了一个插件

```
<div>
  <div class='first'>some data</div>
  <div class='second'>some data</div>
  <div class='third'>some data</div>
  <div class='fourth'>some data</div>
</div> 
```

和菜单显示为上下文菜单

```
<ul id='cmenu'>
 <li id='menuItem1'>Item1</li>
<li id='menuItem2'>Item1</li>
<li id='menuItem3'>Item1</li>
<li id='menuItem4'>Item1</li>
<li id='menuItem5'>Item1</li>
<li id='menuItem6'>Item1</li>
</ul> 
```

我的插件是。

该插件的工作原理是更改每个部门的菜单项列表，并且菜单项的回调也发生了变化。

```
(function($) {
    $.fn.cnxtmenu = function(options) {
        var defaults = {
            'menuid' : '',
            item1 : function() {
            },
            item2 : function() {
            },
            item3 : function() {
            },
            item4 : function() {
            },
            item5 : function() {
            },
            item6 : function() {
            },
        }, opt = $.extend({}, defaults, options);
        console.log(opt);
        var mid = '#'+opt.menuid, seldiv;
        this.live({
            "contextmenu" : function(e) {
                //console.log(this);
                seldiv = $(this);
                if ($(this).hasClass('first')) {

                    //change the menu list

                } else if($(this).hasClass('second')){

                // change the menu list to display different items 

                } 
                else if($(this).hasClass('file-list')){
                //differ list

                }
                else if($(this).hasClass('dstore_file-list')){
                    //differ menu list
                }

                $(mid).css({
                    top : e.pageY + 'px',
                    left : e.pageX + 'px'
                }).show();
                return false;
            }
        });

        $(mid).children('li').unbind('click').click(function(e) {
            e.stopPropagation();
            e.preventDefault();
            //console.log(file + "at switch");
            switch(this.id) {
                case 'menuItem1':
                    opt.item1(this, seldiv);
                    break;
                case 'menuItem2':
                    opt.item2(this, seldiv);
                    break;
case 'menuItem3':
                    opt.item3(this, seldiv);
                    break;
case 'menuItem4':
                    opt.item4(this, seldiv);
                    break;
case 'menuItem5':
                    opt.item5(this, seldiv);
                    break;
case 'menuItem6':
                    opt.item6(this, seldiv);
                    break;

            }
            $(mid).hide();
            return false;
        });

        $(mid).click(function() {
            $(mid).hide();
        });
        $(document).click(function() {
            $(mid).hide();
        });

    }
})(jQuery); 
```

我正在像这样使用这个插件。

```
$('.first').cnxtmenu({menuid:'cmenu',
item1:some callbacks
...}); 
```

为所有三个 div 分配不同的回调。

我的问题是选择器的回调没有区别。并且回调被触发了很多次。

请帮我看看我的代码有什么问题

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T09:52:41.970

您在插件中分配脚本的回调加载时间，因此唯一最后分配的回调将起作用。

解决方案是您必须在 contextmenu 函数中分配回调。

# php - 计算表中的出现次数并打印计数和排名

> ID：12070394
> 
> 赞同：2
> 
> 时间：2012-08-22T09:43:45.703
> 
> 标签：php, mysql

在我的事件表中，我有一个名为 Pos1 的列，其中包含从 A 到 E 的 ID。我需要计算“E”在该列中出现的次数以及它与其他数字并排的位置。

例如，在此表中，“E”出现**1**次，排名第**4**（D=3，A=2，C=2，E=1，B=0）。

```
Pos1
E
C
D
C
D
D
A
A 
```

我是一个完整的 SQL 爱好者，所以我得到的最接近的是一个打印每个 ID 计数的数组，但我需要将此限制为计算单个 ID*并*打印排名。

```
$query = "SELECT Pos1, COUNT(Pos1) FROM Events GROUP BY Pos1"; 

$result = mysql_query($query) or die(mysql_error());

while($row = mysql_fetch_array($result)){

    echo $row['COUNT(Pos1)'] ."<br />";

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T09:48:34.720

尝试这个：

```
SELECT Pos1, a.cnt, rank
FROM(
    SELECT a.Pos1, a.cnt, (@rank := @rank + 1) AS rank
    FROM(
        SELECT Pos1, COUNT(Pos1) cnt
        FROM Events
        GROUP BY Pos1
    ) a, (SELECT @rank := 0) b
    ORDER BY a.cnt DESC
)a
WHERE a.pos1 = 'E'; 
```

[SQLFIDDLE 演示在这里](http://sqlfiddle.com/#!2/a1e4e/2)

编辑：php代码

```
$query = "SELECT Pos1, a.cnt, rank
          FROM(
            SELECT a.Pos1, a.cnt, (@rank := @rank + 1) AS rank
            FROM(
                SELECT Pos1, COUNT(Pos1) cnt
                FROM Events
                GROUP BY Pos1
            ) a, (SELECT @rank := 0) b
            ORDER BY a.cnt DESC
          )a
          WHERE a.pos1 = '$pos1'";

$result = mysql_query($query) or die(mysql_error());

$row = mysql_fetch_row($result);

echo $row['Pos1']." ".$row['cnt']." ".$row['rank']."<br />"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:52:32.953

或者在 PHP 中进行排名：

```
$query = "SELECT Pos1, COUNT(Pos1) AS qty FROM Events GROUP BY Pos1 ORDER BY qty DESC"; 

$result = mysql_query($query) or die(mysql_error());
$rank=1;
while($row = mysql_fetch_array($result))
{
    echo $rank.": ".$row['Pos1']."(".$row['qty'].")<br />";
    $rank++;
} 
```

# wpf - WPF 阴影效果

> ID：12070399
> 
> 赞同：2
> 
> 时间：2012-08-22T09:44:02.290
> 
> 标签：wpf, xaml, shadow

我正在尝试通过代码复制设计师制作的屏幕，但我遇到了他们在设计中包含的阴影效果的问题。这是他们实现的阴影效果：

![在此处输入图像描述](../Images/7ef4b45a90cc5178f7beb162d230adcd.png)

我已经尝试在 XAML 中使用投影 - 但它似乎不适合我的要求。由于设计师的阴影看起来更像是在对象上有垂直光，而投影看起来更像是对象从屏幕中弹出。

![在此处输入图像描述](../Images/491a49d22dfcc768acda193dfeaa8e9d.png)

有没有办法通过WPF实现第一个阴影效果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T10:06:24.370

你必须玩一点才能让它正确（`Margin`s等），但我会尝试`BlurEffect`在填充的矩形上使用 a 来模拟阴影：

```
<Grid>

  <!-- shadow -->
  <Rectangle HorizontalAlignment="Stretch" VerticalAlignment="Bottom" 
    Height="..." Fill="#77000000" ... >
    <Rectangle.Effect>
      <BlurEffect ... />
    </Rectangle.Effect>
  </Rectangle>

  <!-- white border on top of shadow -->
  <Border Background="#ffffff" ... >
    <!-- other controls -->
  </Border>

</Grid> 
```

# php - 我如何通过 php 附加 jsonp 数组返回

> ID：12070401
> 
> 赞同：2
> 
> 时间：2012-08-22T09:44:03.617
> 
> 标签：php, jquery, jsonp

我在访问由 php 脚本返回的 JSONP 数组时遇到问题，我正在处理跨域请求。我的代码是：

```
$('input#searchlocation').click(function () {
    $.ajax({
        url: 'http://mydomain/searchlocation.php',
        type: 'get',
        dataType: 'jsonp',
        data: $('form#searchlocfrm').serialize(),
        processData: false,
        crossDomain: true,
        contentType: "application/json",
        success: function (data) {
            $("#searchlocation_result").html("");
            $.each(data.items, function (i, locdata) {
                console.log(locdata);
            });
        }
    });
}); 
```

PHP：返回数组：

```
echo $_GET["callback"] . "(" . json_encode($res) . ")"; 
```

请帮助我如何将返回响应打印到我的页面中。
提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T09:50:16.027

您需要附加`?callback=?`到您的网址，并使用`.getJSON`

```
$('input#searchlocation').click(function () {
    $.getJSON('http://mydomain/searchlocation.php?callback=?', $('form#searchlocfrm').serialize(), function (data) {
        $("#searchlocation_result").html("");
        $.each(data.items, function (i, locdata) {
            console.log(locdata);
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:58:31.103

这应该足够了：

```
$.ajax({
    url: 'http://mydomain/searchlocation.php',
    dataType: 'jsonp',
    data: $('form#searchlocfrm').serialize(),
    success: function (data) {
        // ...
    }
}); 
```

同样在服务器端：

```
header('Content-type: application/javascript');
echo $_GET["callback"] . "(" . json_encode($res) . ")"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T09:53:03.373

```
$('input#searchlocation').click(function () {
    $.ajax({
        url: 'http://mydomain/searchlocation.php',
        type: 'get',
        dataType: 'jsonp',
        data: $('form#searchlocfrm').serialize() + "callback=returnData",
        processData: false,
        crossDomain: true,
        contentType: "application/json"
    });
});

function returnData(data){
     $("#searchlocation_result").html("");
     $.each(data.items, function (i, locdata) {
            console.log(locdata);
     });
} 
```

这应该是因为它使用 jsonp 的想法是你有一个回调函数，而在 ajax 中没有成功，因为它是 jsonp

# java - ASM 中的哪些指令仅用于调试？

> ID：12070402
> 
> 赞同：3
> 
> 时间：2012-08-22T09:44:12.930
> 
> 标签：java, java-bytecode-asm

我想简化我的 asm 代码。到目前为止，我正在使用 Eclipse 中的字节码大纲来学习如何编写我的代码。由于我只看到带有调试信息的字节码，我真的不知道我可以安全地遗漏哪些内容，我希望由知识渊博的人快速回答，而不是自己测试每个可能的情况。

这些假设是真的吗？

1.  我可以混合不同的风格，即使在同一个类或方法中（将没有调试信息的代码注入到有调试信息的方法中）
2.  `visitLabel`只需要作为跳转指令的目标，而不是围绕每条指令
3.  `visitLineNumber`可以省略（调试信息）
4.  `visitLocalVariable`可以省略（调试信息）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T18:57:02.767

您可以在没有调试信息的情况下编译代码以在字节码大纲视图中查看它，例如为此在 Eclipse 中使用单独的项目。

现在回答你的问题：

1.  您可以将代码与调试混合使用，也可以不使用调试。请注意，在调试此类代码时，调试器不会显示调试信息中省略的变量。
2.  visitLabel 调用用于标记字节码中的任何位置，例如跳转指令的目标、异常处理程序范围和异常处理程序入口点的边界、局部变量和行号的范围、一些新引入的类型注释（即[JSR308](http://jcp.org/en/jsr/detail?id=308)）等.
3.  visitLineNumber 生成有关主要由调试器使用的行号的信息，可以省略
4.  visitLocalVariable 生成有关主要由调试器使用的本地变量的信息，可以省略

# recursion - 函数式编程，递归游戏状态循环

> ID：12070404
> 
> 赞同：3
> 
> 时间：2012-08-22T09:44:19.107
> 
> 标签：recursion, functional-programming

我打算写一个简单的游戏来测试我对函数式编程的理解。执行主循环的功能方式是递归它，但是随着越来越多的堆栈帧的生成，这不会占用内存吗？

谢谢

没有可变状态的情况下[如何做任何有用的事情？](https://stackoverflow.com/questions/1020653/how-can-you-do-anything-useful-without-mutable-state)

```
// imperative version
pacman = new pacman(0, 0)
while true
    if key = UP then pacman.y++
    elif key = DOWN then pacman.y--
    elif key = LEFT then pacman.x--
    elif key = UP then pacman.x++
    render(pacman)

// functional version
let rec loop pacman =
    render(pacman)
    let x, y = switch(key)
        case LEFT: pacman.x - 1, pacman.y
        case RIGHT: pacman.x + 1, pacman.y
        case UP: pacman.x, pacman.y - 1
        case DOWN: pacman.x, pacman.y + 1
    loop(new pacman(x, y)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T11:29:52.063

您已经`loop`使用[tail recursion](http://en.wikipedia.org/wiki/Tail_call)实现了您的函数，即递归调用`loop`是函数中的最后一件事。这允许编译器/解释器（取决于语言）立即弹出当前堆栈帧并将其替换为递归调用的帧。

长话短说，您实现它的方式，不会有堆栈溢出，并且`loop`可以根据需要运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:39:40.663

递归是新的迭代 :) 博客插件：http: [//blogs.msdn.com/b/ashleyf/archive/2010/02/06/recursion-is-the-new-iteration.aspx](http://blogs.msdn.com/b/ashleyf/archive/2010/02/06/recursion-is-the-new-iteration.aspx)

您说您正在使用 Clojure，并且还热衷于了解 F#。

事实证明，基于 JVM 的语言（Java、Scala、Clojure 等）无法支持 VM 级别的尾调用优化，因此有诸如 Clojure 之类的变通方法`recur`。基于 CLR 的语言（F#、C#、VB...）可以并且确实`.tail`在 IL 中使用标记来导致堆栈帧的提前丢弃。

尾调用优化会使调试变得痛苦，例如 F# 在调试版本中不会这样做（但在发布时会这样做）。项目设置中有一个复选框可以在调试中启用。

# c++ - 在 Windows 编程中，有什么方法可以找出哪个模块（线程 ID 和 DLL）正在消耗 CPU 时间？

> ID：12070405
> 
> 赞同：1
> 
> 时间：2012-08-22T09:44:20.043
> 
> 标签：c++, windows

我制作了一个示例应用程序，它将显示当前在我的窗口智能手机设备中运行的所有进程详细信息。如 NK.exe、filesys.exe 等。

我想知道我们如何找出哪个模块（线程 ID 和 DLL）正在消耗 CPU 时间？大多数驱动程序线程在 device.exe / NK.exe 下运行，我很确定大部分 CPU 利用率将来自 device.exe / NK.exe 和 Services.exe。

我想知道在**device.exe、NK.exe、Services.exe、filesys.exe**等下运行的线程是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:52:34.227

如何获取进程和线程的 CPU 使用率 - [http://www.codeproject.com/Articles/10258/How-to-get-CPU-usage-of-processes-and-threads](http://www.codeproject.com/Articles/10258/How-to-get-CPU-usage-of-processes-and-threads)

CPU 使用率 - [http://www.codeproject.com/Articles/10258/How-to-get-CPU-usage-of-processes-and-threads](http://www.codeproject.com/Articles/10258/How-to-get-CPU-usage-of-processes-and-threads)

GetThreadTimes - [http://msdn.microsoft.com/en-us/library/ms683237%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms683237%28VS.85%29.aspx)

GetProcessTimes - [http://msdn.microsoft.com/en-us/library/ms683223%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms683223%28VS.85%29.aspx)

GetSystemTime - [http://msdn.microsoft.com/en-us/library/ms724390%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms724390%28VS.85%29.aspx)

处理器使用 - [http://www.codeproject.com/Articles/159461/Mobile-Processor-Usage](http://www.codeproject.com/Articles/159461/Mobile-Processor-Usage)

# c++ - 键鼠监听，自动化

> ID：12070410
> 
> 赞同：0
> 
> 时间：2012-08-22T09:44:53.367
> 
> 标签：c++, python, keyboard, mouse, capture

我正在寻找一个名为 Dune 2000 的策略游戏的叠加层。创建 10 名士兵很烦人，每次完成时都必须单击图标。没有队列。因此，在不干扰游戏运行方式的情况下，我想听鼠标的移动，当在位置 XY 上单击时，我想重复例如十次，中间有正确的时间。有没有允许我这样做的库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:10:57.790

下面是鼠标右键的 Autoclicker 代码。对于鼠标左键，使用 `mouse_event(MOUSEEVENTF_LEFTDOWN, 0, 0, 0, 0);`和 `mouse_event(MOUSEEVENTF_LEFTUP, 0, 0, 0, 0);`。

```
#include <windows.h>
#include <iostream>
#include <stdlib.h>
#include <time.h>
using namespace std;

bool KeyIsPressed( unsigned char k )
{
    USHORT status = GetAsyncKeyState( k );
    return (( ( status & 0x8000 ) >> 15 ) == 1) || (( status & 1 ) == 1);
}

int WINAPI WinMain( HINSTANCE hInst, HINSTANCE P, LPSTR CMD, int nShowCmd )
{

    MessageBox( NULL, "[CTRL] + [SHIFT] + [HOME]: Start/Pause\n [CTRL] + [SHIFT] + [END]: Quit", "Instructions", NULL );
    HWND target = GetForegroundWindow();

    POINT pt;
    RECT wRect;
    int delay;
    bool paused = true;

    srand( time(NULL) );

    while ( 1 )
    {
        if ( KeyIsPressed( VK_CONTROL ) && KeyIsPressed( VK_SHIFT ) && KeyIsPressed( VK_HOME ) )
        {
            paused = !paused;
            if ( paused )
            {
                MessageBox( NULL, "Paused.", "Notification", NULL );
            }
            else
            {
                cout << "Unpaused.\n";
                target = GetForegroundWindow();
                cout << "Target window set.\n";
            }
            Sleep( 1000 );
        }

        // Shutdown.
        if ( KeyIsPressed( VK_CONTROL ) && KeyIsPressed( VK_SHIFT ) && KeyIsPressed( VK_END ) )
        {
            MessageBox( NULL, "AutoClicker Shutdown.", "Notification", NULL );
            break;
        }

        if ( paused == false && GetForegroundWindow() == target )
        {
            GetCursorPos( &pt );
            GetWindowRect( target, &wRect );

            // Make sure we are inside the target window.
            if ( pt.x > wRect.left && pt.x < wRect.right && pt.y > wRect.top && pt.y < wRect.bottom )
            {
                mouse_event( MOUSEEVENTF_RIGHTDOWN, 0, 0, 0, 0 );
                mouse_event( MOUSEEVENTF_RIGHTUP, 0, 0, 0, 0 );
            }
            delay = (rand() % 3 + 1) * 100;
            Sleep( delay );
        }
    }

    return 0;
} 
```

# matrix - 单应矩阵中的元素是什么意思？

> ID：12070411
> 
> 赞同：12
> 
> 时间：2012-08-22T09:44:55.403
> 
> 标签：matrix, emgucv, homography

我是图像处理的新手，但我正在使用 EMGU 进行 C# 图像分析。但是，我知道单应矩阵并不是 EMGU 独有的，所以也许有另一种语言知识的人可以更好地解释。

请（尽可能简化）有人可以解释每个元素的作用。我在网上查过了，但找不到我能正确理解的答案（正如我所说，我对这一切有点陌生！）

我分析了 2 张图像，都是 2 维的。因此需要一个 3x3 矩阵来解释图像的旋转/平移。如果没有检测到运动，则单应矩阵为：100, 010, 001

我从研究中知道（例如[OpenCV Homography，Transform a point，这段代码在做什么？](https://stackoverflow.com/questions/9275567/opencv-homography-transform-a-point-what-is-this-code-doing)）：10Tx，01Ty，XXX

10,01 位是 x 和 y 坐标的旋转。Tx 和 Ty 位是平移运动，但 XXX 位是什么？这是我不明白的？它与仿射变换有关吗？请有人解释一下： 1\. 如果我目前在上面所说的内容是正确的。2\. XXX 位是什么意思

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-22T13:45:42.540

如果您掌握了矩阵乘法，这并不难理解。假设你的观点`x`是

```
/a\
\b/, 
```

并且您想通过以下方式旋转坐标系`A`：

```
/3 4\
\5 6/ 
```

并“移动”它`t`

```
/2\
\2/. 
```

后面的矩阵是获得新点的仿射变换的组成部分`y`：

```
y = A*x + t = <a'; b'>T //(T means transposed). 
```

如您所知，要做到这一点，可以构造一个 3d 矩阵`B`和一个`x'`看起来像

```
 /3 4 2\         /a\
B = |5 6 2| ,  x' = |b|
    \0 0 1/         \1/ 
```

这样

```
 /a'\
y' = |b'| = B*x'
     \ 1/ 
```

您可以从中提取`y`. 让我们看看它是如何工作的。在原始转换中（使用加法），第一步是执行乘法，即。旋转部分`y_r`：

```
y_r = A*x = <3a+4b; 5a+6b>T 
```

然后添加“绝对”部分：

```
y = y_r + t = <3a+4b+2; 5a+6b+2>T 
```

现在看看是如何`B`工作的。我将`y'`逐行计算：

```
1) a' = 3*a + 4*b + 2*1

2) b' = 5*a + 6*b + 2*1

3) the rest: 0*a + 0*b + 1*1 = 1 
```

正是我们所期望的。首先，计算旋转部分——加法和乘法。然后，将平移部分的 x 部分相加，乘以`1`--it 保持不变。第二行也一样。

在第三行中，`a`和`b`被删除（乘以`0`）。最后一部分保持不变，恰好是`1`. 因此，关于最后一行的所有内容都是“删除”该点的值并保留`1`.

* * *

可以说，一个 2x3 矩阵就足够了。这部分正确，但有一个明显的缺点：您失去了可组合性。假设您对 基本满意`B`，但想镜像一个坐标。然后你可以选择另一个变换矩阵

```
 /-1 0 0\
C = | 0 1 0|
    \ 0 0 1/ 
```

并有结果

```
y'' = C*B*x' = <-3a+4b+2; 5a+6b+2; 1>T 
```

这种简单的乘法不能用 2x3 矩阵那么容易地完成，仅仅是因为矩阵乘法的特性。

原则上，在上面，最后一行（the `XXX`）也可以是任何其他形式的`<0;0;x>`。它只是为了降低点值。然而，必须完全像这样才能通过乘法进行合成。

最后，在这种情况下，[维基百科](http://en.wikipedia.org/wiki/Affine_transformation)对我来说似乎提供了很多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T00:11:28.990

首先仿射变换是那些保留直线并且可以任意维度的变换

单应性描述了跨两个平面的映射或在纯相机旋转期间发生的情况。

最后一行代表各种剪切（即当 x 是 x、y 的函数时）

# c# - 在 WCF 服务通道调度程序上安装 IErrorHandler

> ID：12070412
> 
> 赞同：5
> 
> 时间：2012-08-22T09:44:55.857
> 
> 标签：c#, .net, wcf

我想在 WCF 服务上安装 IErrorHandler 的实现。

我目前正在使用这段代码，它似乎没有做任何事情：

```
logServiceHost = new ServiceHost(typeof(Logger));
logServiceHost.AddServiceEndpoint(typeof(ILogger), binding, address);

// Implementation of IErrorHandler.
var errorHandler = new ServiceErrorHandler();

logServiceHost.Open();

// Add error handler to all channel dispatchers.
foreach (ChannelDispatcher dispatcher in logServiceHost.ChannelDispatchers)
{
    dispatcher.ErrorHandlers.Add(errorHandler);
} 
```

我见过的所有代码示例（包括在我用于 WCF 的书中）都展示了如何使用自定义创建的*IServiceBehavior*来安装错误扩展。这是强制性的，还是我的方法也应该有效？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T18:28:14.073

这是我如何让它工作的：

创建一个实现 IServiceBehavior 的类。服务行为将添加实现 IErrorHandler 的类：

```
public class GlobalExceptionHandlerBehavior : IServiceBehavior
{

    public void AddBindingParameters(ServiceDescription serviceDescription, System.ServiceModel.ServiceHostBase serviceHostBase, System.Collections.ObjectModel.Collection<ServiceEndpoint> endpoints, System.ServiceModel.Channels.BindingParameterCollection bindingParameters)
    {
    }

    public void ApplyDispatchBehavior(ServiceDescription serviceDescription, System.ServiceModel.ServiceHostBase serviceHostBase)
    {
        foreach (ChannelDispatcherBase dispatcherBase in
             serviceHostBase.ChannelDispatchers)
        {
            var channelDispatcher = dispatcherBase as ChannelDispatcher;
            if (channelDispatcher != null)
                channelDispatcher.ErrorHandlers.Add(new ServiceErrorHandler());
        }

    }

    public void Validate(ServiceDescription serviceDescription, System.ServiceModel.ServiceHostBase serviceHostBase)
    {
    }
} 
```

在调用 .Open() 之前插入设置主机时的行为：

```
logServiceHost.Description.Behaviors.Insert(0, new GlobalExceptionHandlerBehavior()); 
```

然后，您应该能够在 ServiceErrorHandler 类中的 ErrorHandler() 方法中放置一个断点，它应该会为您中断。这不需要 xml 配置，完全由代码驱动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T23:31:05.847

根据[这篇文章](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.ierrorhandler.aspx)IErrorHandler 实例是通过行为添加的。没有提及任何其他机制，例如您的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-02T08:23:58.280

菲尔，我相信杰伊的回答遵循您提供的 MSDN 链接上的说明，他只注释掉了胆量并保留了本次讨论的必要内容。然后，他通过最后一行代码添加/注册 ServiceBehavior（以及 IErrorHandler）。

如果您问我，他的回答是对已发布问题的解决方案。我刚刚在一个最小的自托管项目中验证了它。

# java - 如何实现应用程序故障转移？

> ID：12070413
> 
> 赞同：2
> 
> 时间：2012-08-22T09:44:56.657
> 
> 标签：java, architecture, failover

我们有一个应用程序（服务器）在多台机器上运行，每台服务器服务于不同的客户端。我们需要使应用程序能够进行故障转移。那是当一个应用程序由于某种原因而关闭时，另一个可以在不丢失任何数据的情况下继续工作。

任何建议，材料表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:14:25.677

听起来最合适的地方是在网络级别。让客户端连接到位于实际应用服务器前面的某种负载平衡代理，并相应地引导流量。此负载均衡器通常会根据您的问题将客户端发送到不同的服务器 - 但是当它检测到服务器没有响应时，它会将失败的服务器列入黑名单并将客户端重定向到其他活动服务器。

许多负载均衡器都提供这种故障转移行为——我过去使用[HAProxy](http://haproxy.1wt.eu/)确实做到了这一点，但我确信这不是唯一可以完成这项工作的实现。

* * *

就服务器之间的通勤状态而言，这是非常困难的。当且仅当您的所有服务器都相同/可替代时，才能在网络级别（如上所述）以直接的方式处理故障转移。一旦您开始具有特定于服务器的状态，就不再可能将服务器 B 放入以替换服务器 A，因为 A 和 B 不同。

如果您需要处理这个问题，您需要编写某种逻辑，让服务器 B 注意到服务器 A 已关闭，然后以某种方式挽救 A 的状态并将其合并到自己的状态中。希望这可以在没有冲突的情况下完成，但这不能保证 - 服务器必须看起来/行为像 B 对先前的 B 客户端，并且看起来/像 A 对先前的 A 客户端，这实际上可能是不可能的。如果 A 没有完全关闭，则状态数据可能已损坏/过时。（同时，B 必须阻止服务器 C 或 D 执行相同的恢复，并且必须确保负载均衡器知道它是新的 A。）

在没有本地状态的情况下进行故障转移**要容易***得多* ，其中所有服务器实际上只是一堆 CPU 周期，并且您将状态存储在客户端 cookie 或某个中央数据库中。通过这种方式，单个机器可以透明地切换进出，如果可能的话，我鼓励您采用这种模式。

# c# - 从 C# 中的文件中提取扩展名？

> ID：12070415
> 
> 赞同：-2
> 
> 时间：2012-08-22T09:45:01.460
> 
> 标签：c#, file, extraction, information-extraction

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;

namespace Program
{

    class Program
    {

        public static string *GetExtension*(string cale) //GetExtension is an error
        {
            string fisier, extensie;
            cale = @"D:\dir1\dir2\";
            fisier = @"D:\dir1\dir2\fisier.txt";        

            extensie = Path.GetExtension(fisier);

            System.Console.WriteLine("Extensie: {0} returneaza {1}", fisier, extensie);

            extensie = Path.GetExtension(cale);

            System.Console.WriteLine("Extensie: {0} returneaza {1}", fisier, extensie);
        }
    }
} 
```

我为这个业余帖子道歉。

我不明白错误`"Program.Program.GetExtension(string)': not all code paths return a value"`

谁能告诉我我做错了什么，好吗？

（哦，fisier 在我的语言中表示文件，cale 表示路径，extensie 表示扩展名）。
提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T09:47:06.963

该函数应该返回一个字符串，但您没有返回语句

添加

```
return extensie; 
```

在第一个之前`}`

或者，如果您不想要返回值而只想将 console.writelines 简单地更改`public static string`为`public static void`，那么您将不需要返回值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T09:47:25.650

您的函数应返回一个字符串。您没有在整个函数中返回任何内容。

在函数的某处，您应该有如下语句：

```
return extensie; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T09:49:01.800

通过定义你的方法，比如

```
public static string GetExtension(string cale) //GetExtension is an error 
```

你说你的方法会返回一个字符串。

您的方法不会通过仅向屏幕输出某些内容来返回任何内容。所以像这样改变它：

```
public static void GetExtension(string cale) //GetExtension is an error 
```

或者，如果您确实想返回某些东西，请确保输入以下行：

```
return extensie; 
```

在您的方法结束时（在右大括号之前）

我建议查看[此页面](http://msdn.microsoft.com/en-us/library/ms173114%28v=vs.80%29.aspx)上的“返回值”部分:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T09:47:08.770

您必须将 return 添加到您的功能

```
public static string *GetExtension*(string cale) //GetExtension is an error
{

    string fisier, extensie;

    cale = @"D:\dir1\dir2\";

    fisier = @"D:\dir1\dir2\fisier.txt";

    extensie = Path.GetExtension(fisier);

    System.Console.WriteLine("Extensie: {0} returneaza {1}", fisier, extensie);

    extensie = Path.GetExtension(cale);

    System.Console.WriteLine("Extensie: {0} returneaza {1}", fisier, extensie);

    return extensie; //<----------------
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T09:47:58.230

是的，您需要从您的函数中返回一个字符串，例如

```
return extensie; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T09:50:36.410

我猜你的语言是法语，所以如果你愿意，我可以给你翻译，但用英文回答你的问题：

最好的方法是用 public static void 替换 public static String

另外，我不明白你为什么在 GetExtension 周围有星星

给予：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;

namespace Program {
    class Program
    {
        public static void GetExtension(string cale) //GetExtension is an error
        {
        string fisier, extensie;
        cale = @"D:\dir1\dir2\";
        fisier = @"D:\dir1\dir2\fisier.txt";

        extensie = Path.GetExtension(fisier);
        System.Console.WriteLine("Extensie: {0} returneaza {1}", fisier, extensie);
        extensie = Path.GetExtension(cale);
        System.Console.WriteLine("Extensie: {0} returneaza {1}", fisier, extensie);
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-22T09:49:23.500

您的方法被标记为“公共静态字符串”，这意味着您需要一个“返回字符串；” 陈述。如果您不希望该方法返回一个值，那么您可以将方法定义替换为“public static void”，这意味着“我不会返回任何东西”

附带说明：您可以使用[FileInfo](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx)类来获取相关文件的扩展名。它的代码更少，并且已经为您完成了:)

例如：

```
 FileInfo fInfo = new FileInfo(path);
        string extension = fInfo.Extension; 
```

# sql - 在 SQL 中执行多个“IN”查询的最快方法

> ID：12070420
> 
> 赞同：2
> 
> 时间：2012-08-22T09:45:19.353
> 
> 标签：sql, sql-server, tsql

我有一个相当可怕的查询，它使用需要在我们的数据库上运行的 2 个“IN”语句。首先是模式（此示例已简化）：

```
CREATE TABLE [dbo].[SystemUser]
(
    [SystemUserID] [int] IDENTITY(1,1) NOT NULL,
    [FirstName] [nvarchar](50) NULL,
    [Surname] [nvarchar](50) NULL
    CONSTRAINT [PK_ApplicationUser] PRIMARY KEY CLUSTERED 
    (
        [SystemUserID] ASC
    )
)
GO

CREATE TABLE [dbo].[Group]
(
    [GroupID] [int] IDENTITY(1,1) NOT NULL,
    [Name] [nvarchar](50) NULL
    CONSTRAINT [PK_Group] PRIMARY KEY CLUSTERED 
    (
        [GroupID] ASC
    )
)
GO

CREATE TABLE [dbo].[GroupMembership]
(
    [SystemUserID] [int] NOT NULL,
    [GroupID] [int] NOT NULL
    CONSTRAINT [PK_GroupMembership] PRIMARY KEY CLUSTERED 
    (
        [SystemUserID] ASC,
        [GroupID] ASC
    )
)
GO 
```

我想要做的是找到与 SystemUserID 列表匹配的所有“SystemUser”记录，这些 SystemUserID 不具有 GroupID 列表中的“组”的成员资格。

因此，在一个查询中比较了 2 个单独的 ID 列表。我目前能想到的最快方法如下：

```
SELECT SU.SystemUserID
FROM [dbo].[SystemUser] SU 
LEFT JOIN
(
    SELECT GM.SystemUserID
    FROM [dbo].[GroupMembership] GM
    WHERE GM.GroupID IN
    (
        1, 7, 8, 10, 32
    )
) GM ON GM.SystemUserID = SU.SystemUserID
WHERE SU.SystemUserID IN
(
    10, 61, 80, 93, 98
)
AND GM.SystemUserID IS NULL /* Not matched */ 
```

有什么我想念的吗？“WHERE NOT EXISTS”检查会更有效吗？或者你能想出更好的方法来处理和过滤这两个列表吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T09:54:34.030

假设 SQL Server 2005 或更高版本，

```
SELECT SU.SystemUserID
FROM [dbo].[SystemUser] SU 
WHERE SU.SystemUserID IN
(
    10, 61, 80, 93, 98
)
EXCEPT
SELECT GM.SystemUserID
FROM [dbo].[GroupMembership] GM
WHERE GM.GroupID IN
(
    1, 7, 8, 10, 32
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T09:47:49.337

而不是使用`IN`（发出单独的查询），使用`BETWEEN`包围范围：

```
SELECT SU.SystemUserID 
FROM [dbo].[SystemUser] SU  
LEFT JOIN 
( 
    SELECT GM.SystemUserID 
    FROM [dbo].[GroupMembership] GM 
    WHERE GM.GroupID BETWEEN 1 AND 5

) GM ON GM.SystemUserID = SU.SystemUserID 
WHERE SU.SystemUserID BETWEEN 10 AND 14
AND GM.SystemUserID IS NULL /* Not matched */ 
```

如果您的范围根本不是连续的，请创建一个临时表（或 CTE），填充值，然后对其进行内部连接。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T11:54:43.313

很少有问题查询可以通过重写查询文本来解决，您的也不例外。性能问题的罪魁祸首几乎总是缺少索引，你的也不例外。

```
SELECT SU.SystemUserID
FROM [dbo].[SystemUser] SU 
LEFT JOIN
(
    SELECT GM.SystemUserID
    FROM [dbo].[GroupMembership] GM
    WHERE GM.GroupID IN
    (
        1, 7, 8, 10, 32
    )
) GM ON GM.SystemUserID = SU.SystemUserID
WHERE SU.SystemUserID IN
(
    10, 61, 80, 93, 98
)
AND GM.SystemUserID IS NULL /* Not matched */ 
```

所以你需要：

1.  `GroupID`索引`GroupMembership`
2.  `SystemUserID`索引`SystemUser`
3.  `SystemUserID`索引`GroupMembership`（用于连接）

您的 DDL（这是为了添加它！）表明您已经解决了 2）和 3），但没有解决 1）。所以添加缺失的索引：

```
CREATE NONCLUSTERED INDEX idx_GroupMembership_GroupID ON GroupMembership(GroupID, SystemUserID) 
```

根据经验： (leftId, rightId) 形式的多对多表**总是**需要一个索引 on`(leftId, rightId)`和一个 on `(rightId, leftId)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T10:47:24.283

根据我的经验，我经常通过加入一个包含所需值的临时表获得更好的结果，而不是在值列表增加时使用 IN。有 100 个值，我首先是习惯性的，但可能会在它上线之前写下两者并比较计划和统计数据。

# c# - Sql Server：一旦我移动到另一台服务器，文化就会改变。c# .NET

> ID：12070422
> 
> 赞同：0
> 
> 时间：2012-08-22T09:45:29.307
> 
> 标签：c#, sql-server, datetime, decimal, culture

最近我决定搬到另一台服务器。现在我的应用程序运行在具有不同文化（IT 和 EN）的不同服务器上。

一切正常，但现在我在日期和数字方面面临许多问题。

主要问题似乎是 SQL Server。事实上，SQL SERVER 会抛出错误。我使用 ParseExact 方法解决了日期问题：

```
 e.Command.Parameters["@Expiry"].Value = 
             DateTime.ParseExact("31/12/2099", "dd/MM/yyyy", null); 
```

对于十进制数，我必须交换“。” 和“，”（取决于文化）如果我想让应用程序工作：

```
 Latitude.Value = Latitude.Value.Replace(".", ","); //ONLY for ITALIAN CULTURE
   e.Command.Parameters["@Latitude"].Value = Latitude.Value; 
```

我再说一遍：错误是由 SqlServer 生成的。有没有办法一劳永逸地设置文化？

PS：EN 服务器是 GoDaddy Hosting。

***更新：*** 问题是纯 Sql Server。事实上，检查我的服务器，我在第一个服务器上发现了一个“，”和一个“。” 在第二个作为货币和小数的分隔符。我发现：ALTER LOGIN 'MYDBLOGIN' WITH DEFAULT_LANGUAGE = Italian; 去

通过前面的查询，我能够更改 sql server 上的文化。但是，问题仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:33:52.050

```
 DateTime myDate;
 DateTime.TryParse(yourdate, new CultureInfo("en-US"), DateTimeStyles.None, out myDate); 
```

或者

```
 DateTime datet1=new DateTime(2012,5,1);
 string startdate = datet1.ToString("d", DateTimeFormatInfo.InvariantInfo); 
```

您可以更改您的数据库整理：

```
ALTER DATABASE test2 -- put your database name here
   COLLATE Latin1_General_CS_AS   -- replace with whatever collation you need 
```

您的问题不在于 sqlserver，您在根据 CultureInfo 插入/获取日期时间时修改了代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:25:57.387

而不是每次都改变 SQL Server 文化你为什么不使用

```
 Convert.ToDecimal(Latitude, CultureInfo.InvariantCulture); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T09:55:19.770

这会返回什么？

```
 select @@LANGID, @@LANGUAGE 
```

如果是意大利语，

```
 set language us_english 
```

（管他呢...）

# googletest - 将 gtest 与 glog 链接

> ID：12070425
> 
> 赞同：0
> 
> 时间：2012-08-22T09:45:54.973
> 
> 标签：googletest, glog

有没有办法在 glog 生成的日志文件中获取 gtest 的输出？理想情况下，当测试失败时它会出现严重错误，否则会显示信息。我可以手动完成，但我想知道这是否可以使用现有工具轻松完成。

我只对 glog 输出感兴趣，而不是 gtest 使用`RecordProperty`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:56:43.207

您可以定义将记录测试失败的[自定义侦听器。](http://code.google.com/p/googletest/wiki/AdvancedGuide#Extending_Google_Test_by_Handling_Test_Events)[您可以在 Google 测试示例代码](http://code.google.com/p/googletest/source/browse/trunk/samples/sample9_unittest.cc)中看到它是如何完成的。

# php - wordpress中的php条件

> ID：12070427
> 
> 赞同：0
> 
> 时间：2012-08-22T09:46:01.133
> 
> 标签：php, wordpress, conditional

有人可以向我解释一下我在 word press 中查看 php 使用时经常遇到的替代语法的使用。以条件为例：

我希望看到：

```
if(10==10)
echo 'this is true and will be shown'; 
```

相反，我看到：

```
if(10==10):
echo 'this is true and will be shown;
end if; 
```

另一个例子：

```
! empty ( $classes_names ) 
and  $class_names = ' class="'. esc_attr( $class_names ) . '"'; 
```

':' 和 'end if;' 是怎么回事 最后一个例子的语法不是我以前见过的那样放在一起的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T09:47:33.970

这是 PHP 中的替代逻辑语法 - 您可以在此处阅读所有相关信息 - [http://php.net/manual/en/control-structures.alternative-syntax.php](http://php.net/manual/en/control-structures.alternative-syntax.php)

如果您在 HTML 或其他代码中包含条件语句，那么它会使事情看起来更整洁。

例如：

```
<body>
<? if($_GET['name']=='Dave') {?>
<h3>Hello Dave!</h3>
<? } else { ?>
<h3>Hello Stranger!</h3>
<? }?>
</body> 
```

看起来更好的IMO：

```
<body>
<? if($_GET['name']=='Dave'):?>
<h3>Hello Dave!</h3>
<? else:?>
<h3>Hello Stranger!</h3>
<? endif;?>
</body> 
```

至于最后的代码示例——这是另一种编写 if 语句的方式——所以：

```
<? !empty ( $classes_names ) and  $class_names = ' class="'. esc_attr( $class_names ) . '"';?> 
```

是相同的：

```
<? 
if (!empty($classes_names)){
$class_names = ' class="'. esc_attr( $class_names ) . '"';
}
?> 
```

这肯定是令人困惑的！

# java - 在 jsf 中不会在 google chrome 中显示任何值

> ID：12070428
> 
> 赞同：-1
> 
> 时间：2012-08-22T09:46:04.800
> 
> 标签：java, jsf, google-chrome

```
<h:selectOneMenu class="medium" id="state" value="#{locationDataBean.stateSelected}" required="true" requiredMessage="Select State">
     <f:selectItem itemLabel="Select State" itemValue="-1"/>
     <f:selectItems value="#{systemResultViewUtil.stateList}"/>
     <a4j:ajax event="change" listener="#{locationServiceBean.retrieveStateDetails()}" render="district,taluka,centerNameList1,stateMsg"/>
</h:selectOneMenu>
<h:message for="state" style="color: red" id="stateMsg"/> 
```

这是我一直在使用的 JSF 标记，并且`value="#{locationDataBean.stateSelected}`“已经包含来自 back bean 的 vlaue。但我仍然没有在 chrome 中获得页面上选择的值。它在页面上显示空白记录。获得的值在页面上，即使当我检查元素时，它也会显示以下 html 脚本

`<option value="55" selected="selected">466-Assam </option>` 但是该值也未显示在页面上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:52:42.773

如果选择框 HTML 看起来正确但您在呈现的页面上看不到它，也许您的 CSS 类`medium`被定义为隐藏它？尝试删除该`class`属性，看看这是否有任何影响。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-22T10:24:30.957

你试过其他浏览器吗？

尝试 h:selectOneMenu 元素本身中的值更改侦听器，例如

```
<h:selectOneMenu class="medium" id="state" value="#{locationDataBean.stateSelected}" required="true" requiredMessage="Select State" valueChangeListener="#{locationServiceBean.retrieveStateDetails}">
 <f:selectItem itemLabel="Select State" itemValue="-1"/>
 <f:selectItems value="#{systemResultViewUtil.stateList}"/> 
```

# java - ehcache hibernate 二级缓存，hibernate 自动驱逐

> ID：12070431
> 
> 赞同：5
> 
> 时间：2012-08-22T09:46:25.187
> 
> 标签：java, spring, hibernate, caching, ehcache

在我的查询（查找）获得缓存会话关闭后，在一个新会话中，休眠在我通过随机写入 Sql 查询更改数据库后驱逐所有内容，我该如何阻止这种情况发生？我正在研究为很少改变的事物制定政策。

```
INFO    Executing [namedSqlQuery=dao.web_login, objs=[user1]] 
DEBUG   org.springframework.orm.hibernate3.SessionFactoryUtils user1- Opening Hibernate Session 
DEBUG   org.hibernate.impl.SessionImpl user1 - opened session at timestamp: 5511432318976000 
DEBUG   org.hibernate.impl.SessionFactoryImpl user1- evicting second-level cache: USERS_LOOKUP 
DEBUG   org.hibernate.impl.SessionFactoryImpl user1- evicting second-level cache: COUNTRY_LOOKUP 
```

ecache.xml

```
 <cache name="query.oneHourPolicy"
           maxElementsInMemory="10000"
           eternal="false"
           timeToLiveSeconds="3600"
           diskPersistent="true"
           overflowToDisk="true"/> 
```

春季休眠配置

```
 <prop key="hibernate.cache.use_second_level_cache">true</prop>
                <prop key="hibernate.cache.use_query_cache">true</prop>
                <prop key="hibernate.cache.provider_class">net.sf.ehcache.hibernate.SingletonEhCacheProvider</prop>
                <prop key="hibernate.cache.provider_configuration_file_resource_path">ehcache.xml</prop> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T17:13:35.657

发现休眠问题[https://hibernate.onjira.com/browse/HHH-2224](https://hibernate.onjira.com/browse/HHH-2224)

我用波纹管测试：

在我的随机查询中

```
<sql-query name="random_write_query" callable="false">
        <synchronize table="USER"/>
        <synchronize table="USER_ADDRESS"/>
        {CALL PACKAGE.FUNCTION(?)}
</sql-query> 
```

每当我调用上述内容并且它是数据库更改时，它只会使由 table = USER 或 USER_ADDRESS 同步的缓存无效

并且只有同步的随机读取查询或实体将被驱逐

```
<sql-query name="random_read_query">
         <synchronize table="USER"/>
         <synchronize table="USER_ADDRESS"/>
         <return-scalar column="USERNAME" type="string"/>
        <![CDATA[
            SELECT USERNAME FROM USER, USER_ADDRESS...
        ]]>
    </sql-query> 
```

# java - 一旦我选择了一个，JComboBox 内容就会消失

> ID：12070432
> 
> 赞同：1
> 
> 时间：2012-08-22T09:46:25.860
> 
> 标签：java, swing, jcombobox

我有一个 JCombobox，其内容以这种方式填充：

```
List<MyClass> l = getList();
for(MyClass ll : l)
  combo.addItem(ll.toString());
combo.setSelectedIndex(0); 
```

一切正常，直到我单击组合以显示项目列表：当我单击所选项目时消失（但出现列表）当我选择列表上的项目时，整个组合框消失！为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:56:12.750

1.  对于`JComboBox`s（添加、删除、管理） `Items`使用的是`ComboBoxModel`.

2.  `JComboBox`它`Model`基于数组`Vector<>`或`Object[]`, 因为`Java2`.

3.  所有更新（`JComboBox`及其`Model`）都必须在`Event Dispatch Thread`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:50:34.987

问题与我遇到的另一个问题有关， [当我最小化框架时，这个答案面板组件消失](https://stackoverflow.com/questions/12070911/panel-components-disappear-when-i-minimize-frame#comment16123679_12070911)

两个都解决了！

# javascript - jQuery附加到元素

> ID：12070433
> 
> 赞同：0
> 
> 时间：2012-08-22T09:46:37.573
> 
> 标签：javascript, jquery, html, jquery-mobile

我想要做的是，创建一个按钮并按下此按钮，它将更改我的 jQuery 移动测试站点上的主题颜色。

所以说我的 html 父 div 看起来像这样

```
<div id="firstPage" data-role="page"> 
```

我希望它在点击时附加`data-theme="theme letter here"` 到 div 以便它最终像这样`<div id="firstPage" data-role="page" data-theme="theme letter here">`

或者

如果我像这样启动 div`<div id="firstPage" data-role="page" data-theme="theme letter here">`按钮单击时，它会将 data-theme 属性更改为另一个字母

例如，像这样的东西

```
$('#themeBtn').click(function(){
        $('#firstPage').setAttribute("data-role","ANOTHER theme letter");   
    }); 
```

或者

```
$('#themeBtn').click(function(){
        $('#firstPage').append("data-role","a");    
    }); 
```

或类似的东西。我怎样才能正确地解决这个问题？

先谢谢了。

**编辑***根据回复，我试过**

```
/////////////TESTING THEME BUTTON (check STACK OVERFLOW for answer)
$('#themeBtn').click(function(){
    //$('#firstPage').jqmData("role","a");
    //$('#firstPage').attr("data-theme","a");
    //$('#firstPage').jqmData("theme","a");
    $('#firstPage').data('theme','a');
}); 
```

为了确保按钮被触发，我将所有这些行注释掉并做了一个简单的

```
$('#themeBtn').click(function(){
    alert("foo");
    }); 
```

果然它在按钮点击时触发了警报，所以我肯定它的工作原理。（我的意思是按钮）。

**我添加了一个 jsFiddle**，所以你可以看到它在运行（不工作大声笑） [http://jsfiddle.net/somdow/yRmKd/1/](http://jsfiddle.net/somdow/yRmKd/1/) 如果你取消注释警报，它会触发，当你取消注释其他行（根据回复）它不会更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:52:52.160

您可以执行以下操作来设置属性：

```
 $('#themeBtn').on('click', function() {
  $('#firstPage').attr("data-theme", "new Theme");   
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T10:17:06.623

你有没有尝试过？

```
$('#themeBtn').click(function(){
    $('#firstPage').attr("data-role","ANOTHER theme letter");   
}); 
```

这应该更新数据角色

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T09:48:47.713

您可以使用`jqmData`方法：

```
$('#firstPage').jqmData('role', 'a'); 
```

[文档](http://jquerymobile.com/test/docs/api/methods.html)

> 使用 jQuery Mobile 时，应使用 jqmData 和 jqmRemoveData 代替 jQuery 核心的 data 和 removeData 方法（注意这包括 $.fn.data、$.fn.removeData 和 $.data、$.removeData 和 $ .hasData 实用程序），因为它们会自动合并命名空间数据属性的获取和设置（即使当前没有使用命名空间）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T09:50:46.683

只需使用：`$('#firstPage').data('theme', 'ANOTHER theme letter');`

# java - 直接从IE打开下载文件时数据源引用无效

> ID：12070441
> 
> 赞同：1
> 
> 时间：2012-08-22T09:46:58.590
> 
> 标签：java, excel, internet-explorer, mime-types

我有服务器。有功能 - 下载 excel(XLS) 文件。我用 Jasper 构建报告并将二进制数据发送到响应流。我将 ContentType 设置为“application/vnd.ms-excel;charset=windows-1252”，因此浏览器能够识别文件的类型并提供用户直接打开文件或将文件保存到本地磁盘。

如果用户直接从 IE 打开文件（只能在 IE 中重现），他无法创建数据透视表。出现“数据源引用无效”错误：

![数据源引用无效](../Images/44fbb9213178e40614d771b9dbabfca1.png)

[我用ProcMon](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)收集日志，接下来是文件处理算法：

1.  IE 下载文件到 IE 临时存储，名称与 HTTP 标头相同。例如*exportToExclel_2012.xls*
2.  IE 使用 -Embedding 属性运行 Excel 进程。
3.  Excel 以*exportToExclel_2012.xls*标题打开。
4.  Excel 将文件复制到具有生成名称的临时存储。例如*30A27D77.xls*。
5.  关闭 IE 临时文件（*exportToExclel_2012.xls*）。
6.  使用 Excel 临时文件进行一些文件操作（似乎解析 xls 格式）。并关闭 Excel 临时文件*30A27D77.xls*。

所以似乎存在从 30A27D77.xls 文件到 exportToExclel_2012.xls 的一些引用（因为我们在 Excel 中*exportToExclel_2012.xls*标题）。

问题：您能否建议我接下来的研究步骤或提供一些证据证明服务器端不会影响数据透视表的行为？

# ipad - 使用modalPresentationStyle时如何关闭iPad上的键盘

> ID：12070445
> 
> 赞同：1
> 
> 时间：2012-08-22T09:47:19.287
> 
> 标签：ipad, keyboard, uitextfield, dismiss, uimodalpresentationstyle

对于我的 iPad 应用程序，当按下按钮时，我有一个视图以模态方式显示为表单。为了在文本字段中输入文本后关闭键盘，我按照建议尝试了；

“disablesAutomaticKeyboardDismissal”方法。

这不起作用，实际上，根据日志，该方法永远不会被调用。iPhone 或当我选择不以模态方式呈现时，键盘将关闭。

这是我的代码：

```
- (BOOL)disablesAutomaticKeyboardDismissal
{  
    NSLog(@"method calls");
    return NO;
}

- (IBAction)showNewView:(id)sender
{

    MyViewController *mvc = 
            [[MyViewController alloc] init];

// some lines about setting content
//...

    UINavigationController *navController = [[UINavigationController alloc] 
                                initWithRootViewController:mvc];

    [navController setModalPresentationStyle:UIModalPresentationFormSheet];
    [self presentViewController:navController animated:YES completion:nil];
} 
```

*-(BOOL)disablesAutomaticKeyboardDismissal* 与否，除非我删除 tis 行，否则不会关闭键盘：

```
 // [navController setModalPresentationStyle:UIModalPresentationFormSheet]; 
```

但是，它不再以我想要的方式呈现。

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T11:29:31.183

-(BOOL)disablesAutomaticKeyboardDismissal 需要被作为表单呈现的视图控制器而不是演示者覆盖以返回 NO；那是你的错误。在您的情况下，您可以继承 UINavigationController 以获得所需的行为：

```
@interface AutomaticKeyboardDismissingNavigationController : UINavigationController
@end

@implementation AutomaticKeyboardDismissingNavigationController
- (BOOL)disablesAutomaticKeyboardDismissal
{
    return NO;
}
@end 
```

（类名可能会短一些，但仍然可以理解。）

# facebook - 由于启用了“iOS 原生深度链接”，Apprequest 通知未引导至 App Store

> ID：12070446
> 
> 赞同：0
> 
> 时间：2012-08-22T09:47:19.777
> 
> 标签：facebook, facebook-graph-api, single-sign-on, facebook-app-requests

我的问题很简单。我向没有安装我的应用程序的人发送了一个应用请求，希望他们点击它并引导到 App Store，然后安装我的应用程序。

我的情况是我的测试用户在他的 Facebook iPhone 应用程序中收到了通知。他点击了它，屏幕转移了，什么也没发生。屏幕跳转到主屏幕。

这对我来说很奇怪。

我已经启用了“iOS Native Deep Linking”和“iOS SSO setting”以及一个有效的“iPhone App Store ID”，我希望我的测试用户会被引导下载它。

我在文档中找到了这样的句子，“当有人点击 Facebook for iPhone 应用程序中的深层链接时，用户会立即被定向到您的 iOS 应用程序。如果未安装该应用程序，用户将被带到 App Store 下载您的应用程序。”

我相信 Facebook iPhone App 应该在用户点击通知时将用户重定向到 App Store。但它没有，我不知道为什么。

有什么建议么？非常感谢。

# android - 带有端口发送/接收的android二进制短信

> ID：12070447
> 
> 赞同：0
> 
> 时间：2012-08-22T09:47:23.363
> 
> 标签：android, sms

我正在寻找具有以下要求的 API 的完整软件库：

1.  支持的平台：（希望）android 2.2.x 及更高版本；即如果只有android蜂窝和更高版本的解决方案，那可能没问题
2.  向/从手机发送和接收 GSM**多部分二进制短信**
3.  可以获取/设置短信用户数据头的**短信端口号**
4.  开源或商业，没问题

规格 2 和 3 是必需的。

更好地理解问题：

我正在将需要 JSR 120 的 j2me 应用程序移植到 android 平台；移植的 android 应用程序必须与现有的 j2me 应用程序通信，这些应用程序使用带有端口号的多部分二进制短信。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:42:15.107

我也有完全一样的问题。大约两个月前我在这里发布了一个问题，但没有收到任何答案：

[如何在 Android 中发送多部分二进制短信？](https://stackoverflow.com/questions/11057776/how-to-send-multipart-binary-sms-in-android/12179028#12179028)

就我而言，客户端总是将消息发送到服务器。因此解决方案是在 BASE64 中对消息进行编码并作为多部分 TEXT 短信发送。在服务器端，我检查了短信是否在特定端口上，以决定在重新发送之前将其视为二进制还是 BASE64。

我不知道它是否可以应用于您的案例，因为您必须修改现有的 j2me 应用程序（如果客户端直接通信）。

如果您找到更好的解决方案，我想知道。

# python - HTMLParser：处理 HTML 文档中格式错误的开始标记

> ID：12070453
> 
> 赞同：1
> 
> 时间：2012-08-22T09:47:31.163
> 
> 标签：python, html-parsing

我正在使用`HTMLParser`Python 中的类来解析 HTML 文档。但是，我偶尔会收到错误“格式错误的开始标签”。有没有办法处理这个问题，我只需删除格式错误的开始标签并仍然解析剩余的文档？

# java - 如何检查 Apache POI 中的数字单元格是否为空？

> ID：12070456
> 
> 赞同：3
> 
> 时间：2012-08-22T09:47:38.603
> 
> 标签：java, apache, int, apache-poi, cell

一切尽在标题中。

如何`CELL_TYPE_NUMERIC`使用 POI 检查 a 是否为空？使用字符串我可以使用该`isEmpty()`方法，但`int`我没有想法（不允许使用 null，而零不会这样做）。

先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T11:05:55.403

POI 中的空单元格不应该有格式，因为已经有空单元格的类型。

要检查单元格是否为空，您应该测试单元格类型是否为`Cell.CELL_TYPE_BLANK`. 有时空单元格不存在于`Row`; 他们将`null`在这种情况下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-28T23:26:42.490

您可以检查单元格的原始值

```
public BigDecimal determinePorpertyValue(XSSFCell cell) {
    String rawValue = cell.getRawValue();
    return rawValue == null ? null : BigDecimal.valueOf(cell.getNumericCellValue());
} 
```

# c# - 使用 ID 或操作名称的 ASP.NET MVC 路由

> ID：12070460
> 
> 赞同：5
> 
> 时间：2012-08-22T09:47:49.057
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing

我有一个 ASP.Net 应用程序，它有一个名为“客户”的区域。这个区域有一个同名的控制器，带有一个名为 Index 的方法。

我定义了以下路线：

```
context.MapRoute(null,
    "Customers/{controller}/{action}",
    new { controller = "customers", action = "Index" }
); 
```

这允许我导航以使用以下 URL 导航到我的客户控制器上的 index 方法。

> 我的域/客户

在我的客户区，我还有另一个控制器，称为产品。这有许多方法可以让我使用产品实体（目前主要由 Visual Studio 自动生成）。

使用我当前的路线，我可以使用如下 URL 导航到产品控制器：

> MyDomain/Customers/Products（显示产品控制器的索引页面） MyDomain/Customers/Products/Create（显示添加新产品的页面）。MyDomain/Customers/Products/Details?id=1234（显示 id 为 1234 的产品）

现在我想要做的是导航到具有更加用户友好的 URL 的详细信息页面，例如：

> 我的域/客户/产品/1234

我定义了一条如下所示的新路线：

```
context.MapRoute(null,
    "Customers/Products/{id}",
    new { controller = "Products", action = "Details" }
    ); 
```

该路线是在我演示的第一条路线**之前定义的。**这使我可以根据需要导航到产品页面，但是我无法再导航到产品控制器上的其他方法。

EG 以下网址

> 我的域/客户/产品/创建

给我以下错误：

> 参数字典包含方法“System.Web.Mvc.ViewResult Details(Int32)”的不可空类型“System.Int32”的参数“id”的空条目

如果我更改路由的顺序，那么我可以导航到产品控制器上的所有方法，但我的详细信息 URL 会恢复为具有查询参数的旧格式。

如果我将路线更新为如下所示：

```
context.MapRoute(null,
    "Customers/Products/{id}",
    new { controller = "Products", action = "Details", id = UrlParameter.Optional }
    ); 
```

然后我仍然遇到同样的问题。

谁能告诉我如何构建我的路线以获得我想要的结果？总之：

1.  如果我导航到客户区域，我希望我的 URL 看起来像“MyDomain/Customers”
2.  如果我导航到产品详细信息页面，我希望我的 URL 看起来像“MyDomain/Customers/Products/1234”。
3.  如果我导航到任何其他产品页面，我希望我的 URL 看起来像“MyDomain/Customers/Products/Create”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T10:04:42.233

如果 ID 始终是 int，那么您可以向路由添加约束，如下所示：

```
context.MapRoute(null,
                 "Customers/Products/{id}",
                 new {controller = "Products", action = "Details", id = UrlParameter.Optional},
                 new {id = @"\d+"} // Constraint to only allow numbers
                ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:12:33.943

尝试这样的事情：

```
public override void RegisterArea(AreaRegistrationContext context)
{
context.MapRoute(
        "Products_Details",
        "Customers/Products/{id}",
        new { controller="Products", action="Details" },
        new { id = @"\d+" }
    );

    context.MapRoute(
        "Customers_default",
        "Customers/{controller}/{action}/{id}",
        new { action = "Index", id = UrlParameter.Optional }
    );
} 
```

**更新：**增加了对路线的约束。

说明：第一个路由映射到您的详细信息页面，并强制用户提供具有数字格式的 id（第一个参数中的最后一个参数`MapRoute`）。如果 id 没有格式`\d+`，它将与路由不匹配，将使用默认值。这将为您提供以下路线：

```
Customers\Products (index)
Customers\Products\1234 (details of 1234)
Customers\Products\Create (create page for products)
Customers\Products\Edit\1234 (edit page for 1234) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T10:12:38.720

如果您想保留现有路线，请尝试执行以下操作：

```
context.MapRoute(null,
     "Customers/Products/{id}", // id is optional, so Customers/Products might reasonably return all products
     new { controller = "Products", action = "Details", id = UrlParameter.Optional },
     new {id = @"\d+"} // must be numeric if present
);

context.MapRoute(null,
     "Customers/Products/{action}/{id}", // Id is optional, so this needs an action.
     new { controller = "Products", action = "Details", id = UrlParameter.Optional }
     // maybe the id is not numeric for all actions? I don't know so I won't constrain it.
);

context.MapRoute(null,
     "Customers/{controller}/{action}", // Default Customers route
     new { controller = "customers", action = "Index" }
); 
```

前两个处理一个 URL，就像`/Customers/Products/...`一个或两个其他部分一样，最后一个处理其他任何以开头的部分`/Customers/`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T10:20:44.060

试试这个

```
 context.MapRoute(
                    "Customers_Products",
                    "Customers/Products/{productId}",
                    new { controller = "Products", action = "Details", productId= UrlParameter.Optional }
                );

    context.MapRoute(null,
                    "Customers/{controller}/{action}",
                     new { controller = "customers", action = "Index" }
); 
```

# symfony - getsymphony.com - 关于这个网站是什么？

> ID：12070464
> 
> 赞同：0
> 
> 时间：2012-08-22T09:47:59.807
> 
> 标签：symfony

我对**[http://getsymphony.com](http://getsymphony.com)**和**http://symfony.com/**网站有点困惑。我正在寻找可以开始学习 Symfony 框架的地方，但我不知道**http://getsymphony.com网站是否对****[Symfony 框架](http://www.symfony-project.org/)**有任何引用，或者这只是未知 CMS 的棘手名称。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T09:50:19.400

PHP Symfony 框架被命名为“Symfony”，带有一个`f`，而不是`ph`. 其文档可在[symfony.com](http://symfony.com)上找到。

[Symphony](http://getsymphony.com)`ph`似乎是一个 PHP CMS，与框架无关。

# android-progressbar - 带线程的进度条

> ID：12070465
> 
> 赞同：1
> 
> 时间：2012-08-22T09:48:00.430
> 
> 标签：android-progressbar

现在，这是我在 android 中的第一步。我只是想用“下载”按钮来实现进度条。当我按下下载按钮时，进度条继续进行，但是当整个进度结束时，我无法隐藏进度条。这是我的代码。请帮我。

```
public class ProgressBarDemo extends Activity
{

    ProgressBar pb;
    Button bt;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.progressbar);

        pb = (ProgressBar) findViewById(R.id.progressBar1);
        bt = (Button) findViewById(R.id.button1);

        pb.setVisibility(View.VISIBLE);

        bt.setOnClickListener(new OnClickListener() 
        {

            public void onClick(View v)
            {
                Thread timer = new Thread()
                {
                    public void run()
                    {
                        try
                        {
                            for(int i=0; i<=50; i ++)
                            {   
                                pb.incrementProgressBy(i);
                                sleep(1000);
                            }

                                pb.setVisibility(View.INVISIBLE);
                                Toast.makeText(ProgressBarDemo.this, "Thank you for downloading", Toast.LENGTH_SHORT).show();

                        }catch(Exception e){}

                    }
                };
                timer.start();
            }

        });

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:52:55.013

您应该只修改 mainThread（UI 线程）中的 ui 元素尝试

```
pb.post(new Runnable() {

        @Override
        public void run() {
            pb.setVisibility(View.INVISIBLE);
        }
    }) 
```

反而。

也许你必须使用相同的东西来增加你的进度条。或者，您可以使用 AsyncTask [http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)类。onProgressUpdate 和 onPostExecute 在 UIThread 中自动调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:59:44.760

你不应该从不同的线程做 UI 任务。使用这个......

```
public class ProgressBarDemo extends Activity
    {

        ProgressBar pb;
        Button bt;
   @Override
        protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    pb = (ProgressBar) findViewById(R.id.progressBar1);
    bt = (Button) findViewById(R.id.button1);

    pb.setVisibility(View.VISIBLE);

    bt.setOnClickListener(new OnClickListener() 
    {

        public void onClick(View v)
        {
            Thread timer = new Thread()
            {
                public void run()
                {
                    try
                    {
                        for(int i=1; i<=100; i ++)
                        {   
                            pb.setProgress(i);
                            sleep(100);
                        }

                                }catch(Exception e){}
                    finally{
                        runOnUiThread( new Runnable() {
                            public void run() {
                                 pb.setVisibility(View.INVISIBLE);
                            Toast.makeText(ProgressBarDemo .this, "Thank you for downloading", Toast.LENGTH_SHORT).show();
                            }
                        });
                    }

                }
            };
            timer.start();
        }

    });

}

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T11:12:44.763

你也可以使用 AsynTask 这是一个更好的解决方案......

```
public class ProgressBarDemo extends Activity
{

    ProgressBar pb;
    Button bt;
@Override
    protected void onCreate(Bundle savedInstanceState)
{
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

pb = (ProgressBar) findViewById(R.id.progressBar1);
bt = (Button) findViewById(R.id.button1);

pb.setVisibility(View.VISIBLE);

bt.setOnClickListener(new OnClickListener() 
{

    public void onClick(View v)
    {
        new AsynTasks().execute();
    }
});

}

class AsynTasks extends AsyncTask<Void, Integer, Void>
{

    @Override
    protected Void doInBackground(Void... params) {
        for(int i=1;i<=100;i++)
        {
            SystemClock.sleep(1000);
             publishProgress(i);
        }
        return null;
    }
    @Override
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);
          pb.setVisibility(View.INVISIBLE);
          Toast.makeText(ProgressBarDemo .this, "Thank you for downloading", Toast.LENGTH_SHORT).show();
    }
    @Override
    protected void onProgressUpdate(Integer... values) {
        super.onProgressUpdate(values);
          pb.setProgress(values[0]);
    }
}
} 
```

# javascript - Javascript中奇怪的for循环行为

> ID：12070468
> 
> 赞同：1
> 
> 时间：2012-08-22T09:48:14.673
> 
> 标签：javascript

我有下一个问题： arr 只有两个元素。下一个循环尝试执行他的身体 3 次：

```
var selectHTML = "";
for (var i = 0; i< arr.length; i++) {
    selectHTML += '<option value="' + arr[i].id + '">' + arr[i].name + '</option>';
} 
```

正如我所料，下一个循环只尝试执行他的身体 2 次：

```
var selectHTML = "";
for (var i = 0; i< arr.length; i++) {
    alert(i);
    selectHTML += '<option value="' + arr[i].id + '">' + arr[i].name + '</option>';
} 
```

为什么（在 Firefox 14.0.1 中测试）？

更新：对计数器增量后的分号感到抱歉，这是一个错字。但是没有它，代码仍然无法正常工作。

更新：好的，此代码已简化。整个代码本身：

```
var selectHTML = "";
timeSheet.steps = [ { name:"Leave as is", id:-1}, { name:"Approved", id:2} ];
for (var counter = 0; counter < timeSheet.steps.length; counter++) {
    selectHTML += '<option value="' + timeSheet.steps[counter].id + '">' + timeSheet.steps[counter].name + '</option>'; 
```

}

在 Firebug 中，我可以看到 timeSheet.steps.length 等于 2。顺便说一句，我没有放置“alert(i)”，而是添加了注释，并且正文执行了 2 次。魔法...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:10:48.127

请详细说明你所说的身体跑三遍是什么意思。如果您的数组仅包含 2 个元素，则 when `i == 2`，`arr[i]`is `undefined`，因此访问`id`并将`name`引发错误。

如果这是正在发生的事情，那么在循环中的某个时刻，数组的长度正在修改，有/没有添加元素。

通过添加解决的`alert`问题通常是时间问题。[请参阅有关警报](http://dev.opera.com/articles/view/timing-and-synchronization-in-javascript/)的此部分

> 警报框（以及相关的确认和提示框）有一些奇怪的属性。
> 
> 它们是同步的，因为启动对话框的脚本会暂停，直到对话框关闭。该脚本在继续之前等待 alert() 函数返回。
> 
> 棘手的部分是一些浏览器允许在对话框可见并等待用户操作时调度事件。这意味着当一个脚本被挂起，等待警报函数返回时，另一个函数可能作为不同事件调度的一部分被执行。
> 
> **用户界面事件（如 mouseup 和 click）在警报期间不会触发，因为警报是模态的并捕获所有用户输入，但非用户启动的事件（如页面加载、超时处理程序和异步 XMLHttpRequest 返回处理程序）可能会触发。**

您没有显示修改`arr`变量的代码。您可能有一个 ajax 调用，它正在修改`arr`. 在第一个代码示例中没有警报，因此可能整个 for 循环在 ajax 成功处理程序触发之前就结束了。在第二个示例中，警报会阻止执行 for 循环，直到您放弃警报。在您丢弃它的时间里，ajax 成功处理程序必须已经触发。

**请分享所有修改`arr`变量的相关代码。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:55:39.133

循环中有一个额外的分号

```
for (var i = 0; i< arr.length; i++;) { 
```

不试一下：

```
for (var i = 0; i< arr.length; i++) { 
```

这对我来说很好（在 Firefox 14.0.1 中测试）：

```
var arr = [{id:1, name: 'test2'}, {id:2, name: 'test2'}];
var selectHTML = "";
for (var i = 0; i< arr.length; i++) {
    selectHTML += '<option value="' + arr[i].id + '">' + arr[i].name + '</option>';
}
console.log(selectHTML);
var selectHTML = "";
for (var i = 0; i< arr.length; i++) {
    selectHTML += '<option value="' + arr[i].id + '">' + arr[i].name + '</option>';
}
console.log(selectHTML); 
```

退货

```
<option value="1">test2</option><option value="2">test2</option>
<option value="1">test2</option><option value="2">test2</option> 
```

# android - ActivityThread.setupGraphicsSupport() 中的异常

> ID：12070470
> 
> 赞同：1
> 
> 时间：2012-08-22T09:48:24.940
> 
> 标签：android

我收到了来自用户的异常消息。

```
java.lang.NullPointerException
at android.app.ActivityThread.setupGraphicsSupport(ActivityThread.java:3738)
at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3808)
at android.app.ActivityThread.access$1300(ActivityThread.java:127)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1197)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4507)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
at dalvik.system.NativeStart.main(Native Method) 
```

他使用三星 Galaxy S2（ICS 4.0.3，带有 tegrak 内核和 ADW 启动器 ex）

很难找到这个异常日志有什么问题。

任何人都可以提出一个起点来找出引发此异常的原因。

谢谢。

# c++ - SymGetModuleInfo64 返回空 GUID

> ID：12070472
> 
> 赞同：1
> 
> 时间：2012-08-22T09:48:27.793
> 
> 标签：c++, windows, guid, symbols, callstack

我试图通过使用**EnumerateLoadedModules64枚举加载的模块并在使用****SymLoadModuleEx**的枚举回调加载模块中获取模块 GUID，然后使用**SymGetModuleInfoW64**获取模块信息，从而从当前进程中获取模块 GUID 。

对于具有现有 PDB 的所有模块，此调用成功，并且**PdbSig70**包含模块的 GUID。但是，如果我删除 PDB 文件，则调用成功但*GUID 为空*。

我知道该信息在 exe 文件中，因为*dumpbin.exe /headers [exefile]*可以在没有 PDB 文件的情况下显示 GUID 信息。

问题是如何从正在运行的进程中获取这些信息。我希望这些信息能够让用户在没有带有调用堆栈地址和模块信息的 PDB 的情况下生成崩溃报告，以便我以后可以使用符号服务器查找符号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:53:29.710

试图做同样的事情并发现了这一点：

```
struct CV_INFO_PDB70
{
    DWORD  CvSignature;
    GUID Signature;
    DWORD Age;
    BYTE PdbFileName[];
};

ULONG dirEntrySize;
BOOLEAN mappedAsImage = TRUE;
size_t imageAddress = static_cast<size_t>(IMAGEHLP_MODULEW64_VAR.BaseOfImage);
IMAGE_DEBUG_DIRECTORY* debugDirectory = reinterpret_cast<IMAGE_DEBUG_DIRECTORY*>(sImageDirectoryEntryToDataEx(reinterpret_cast<PVOID>(imageAddress), mappedAsImage, IMAGE_DIRECTORY_ENTRY_DEBUG, &dirEntrySize, NULL));    size_t debugEnd = reinterpret_cast<size_t>(debugDirectory) + dirEntrySize;
while(reinterpret_cast<size_t>(debugDirectory) < debugEnd)
{
    if(debugDirectory->Type == IMAGE_DEBUG_TYPE_CODEVIEW)
    {
        break;
    }
    ++debugDirectory;
}
CV_INFO_PDB70* information = reinterpret_cast<CV_INFO_PDB70*>(static_cast<DWORD>(imageAddress) + debugDirectory->AddressOfRawData); 
```

这里有更多信息：http: [//www.debuginfo.com/articles/debuginfomatch.html](http://www.debuginfo.com/articles/debuginfomatch.html)

# performance - 如何加快网站的 HEADERS 加载时间？

> ID：12070473
> 
> 赞同：1
> 
> 时间：2012-08-22T09:48:27.120
> 
> 标签：performance, header, http-headers, pagespeed, yslow

在对我的网站进行彻底优化后（谷歌 PageSpeed 得分 95，Yahoo YSLOW 得分 96），我对为什么标题需要*相对*较长的加载时间感到困惑。11 KBytes的头信息不正常吗？应该如何优化由标题导致其缓慢的网站？非常感谢有关 php/htaccess 的建议、测试和技巧，以便找到并隔离此问题。

![在此处输入图像描述](../Images/21b60c2a27e62728901d1d5820914fb4.png)

![在此处输入图像描述](../Images/0741ffa0534e87f3aa74f715a7d554d7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:17:27.383

因此，将其制定为答案。看看加速您的网站的雅虎提示。 [雅虎开发者网络](http://developer.yahoo.com/performance/rules.html)

主要负责缓存、缓存控制和到期日期标头。这主要直接影响内容而不是标题，但你永远不知道。

看看这个[这个线程](https://stackoverflow.com/questions/5480773/how-to-speed-up-web-development-with-correct-apache-caching-headers-setup)

再次是关于缓存您还应该使用 gzip 或模块默认值，但这再次影响内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T17:29:31.637

11kb的标头正常吗？不幸的是，这并不罕见。11kb 很多 - 绝对。可以这样想：在任何页面数据通过网络传输*之前，您的浏览器必须下载 11kb 的数据。*如果您想让您的网站更快，那么减少在页面的第一个（有用的）字节之前必须交付的时间和数据量是一个很好的优化。

1）检查实际消耗所有标题空间的内容。很有可能，您可能拥有 cookie 和其他可以减小大小的数据。

话虽如此，这里的问题不仅仅是标题。相反，根据您的图表，您的服务器大约需要 100 毫秒才能开始提供标头。看起来您已经重定向，然后再过 50 毫秒来生成响应。

2）你能消除重定向吗？3) 综合考虑，50ms 生成响应**并非**不合理。如果您在本地服务器上捕获上述测试，那么也许您可以通过优化来减少服务器时间。但对于远程情况，50 毫秒实际上是相当快的——光速，我们对此无能为力。:-)

PS这里有一些关于延迟的更多信息：[http ://www.igvita.com/2012/07/19/latency-the-new-web-performance-bottleneck/](http://www.igvita.com/2012/07/19/latency-the-new-web-performance-bottleneck/)

# macos - cocoa：关于设计可可应用程序的建议

> ID：12070481
> 
> 赞同：-1
> 
> 时间：2012-08-22T09:49:13.377
> 
> 标签：macos, cocoa

我正在实现一个mac os程序，但是我不知道如何设计一个好的应用程序，例如如何设计用户交互。如果有任何书是关于设计一个 mac 应用程序或好的设计应用程序（比如 TweetDeck 和 sparrow 对我来说是新鲜的设计），请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:27:14.873

查看[OS X 人机界面指南](https://developer.apple.com/library/mac/#documentation/userexperience/Conceptual/AppleHIGuidelines/Intro/Intro.html)

> Mac OS X 人机界面指南描述了 OS X 平台的特征以及帮助您为 Mac 应用程序设计出色的用户界面和用户体验的指南和原则。
> Mac OS X Human Interface Guidelines 没有描述如何在代码中实现您的设计。

# c# - 无状态状态机框架和高 CPU 使用率

> ID：12070491
> 
> 赞同：3
> 
> 时间：2012-08-22T09:50:02.240
> 
> 标签：c#, .net, state-machine, stateless-state-machine

我正在使用无状态框架来创建状态机。我的主应用程序是一个控制台应用程序，它调用`DataManager`该类，该类调用`GetData`启动 a 的函数，然后使用状态机`Task`执行该函数。`Receiver`

我的问题是当 StateMachine 运行时我得到大约 50% 的 CPU 使用率！当我使用简单的 switch 语句和相同的 Task 实现 StateMachine 时，它​​以 0% 的 CPU 使用率运行！我有一些编码错误还是无状态框架的行为？

**获取数据函数**

```
public List<Byte[]> GetData()
{
    List<Byte> rawData = new List<Byte[]>();
    ReceiveTask = Task.Factory.StartNew<List<Byte[]>>(() => Receiver());
    //Wait until the Task is complete

    ReceiveTask.Wait();
    //return temp;
    rawData = ReceiveTask.Result;

    return rawData;
} 
```

**数据管理器类**

```
public partial class DataManager 
{

int _expectedBlocks;

Byte[] _currentMessage = null;
Byte[] _firstMessage = null;
int _currentBlockNumber = 0;

enum State { Idle, Start, Next, Check, End }
enum Trigger { DataOK, DataRequest, ReceivingFirstBlock, ReceivingNextBlock, LastPacketReceived, WaitForNext }

Dictionary<int, Byte[]> _receivedData;

List<Byte[]> _outputList;

StateMachine<State, Trigger> _machine;

private List<Byte[]> Receiver()
{
    _currentMode = Mode.Receive;
    m_source.MessageReceivedEvent +=new EventHandler<WSANMessageResponseEventArgs>(m_source_MessageReceivedEvent);
    m_source.StartConnection();
    _machine = new StateMachine<State, Trigger>(State.Idle);

    _receivedData = new Dictionary<int, byte[]>();

    _outputList = new List<byte[]>();

    //Config StateMachine
    _machine.Configure(State.Idle)
        .OnEntry(() => OnIdle())
        .OnExit(() => ExitIdle())
        .Permit(Trigger.ReceivingFirstBlock, State.Start);

    _machine.Configure(State.Start)
        .OnEntry(() => OnStart())
        .Permit(Trigger.ReceivingNextBlock, State.Next);

    _machine.Configure(State.Next)
        .OnEntry(() => OnNext())
        .Permit(Trigger.WaitForNext, State.Start)
        .Permit(Trigger.LastPacketReceived, State.Check);

    _machine.Configure(State.Check)
        .OnEntry(() => OnCheck())
        .Permit(Trigger.DataOK, State.End)
        .Permit(Trigger.DataRequest, State.Idle);

    _machine.Configure(State.End)
        .OnEntry(() => OnEnd());

     while (_machine.State != State.End)
     {

     }
    _currentMode = Mode.Idle;
    return _outputList;
} 
```

问候迈克尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T10:04:23.870

更改等待循环

```
 while (_machine.State != State.End)
     {
         Thread.Sleep(10); // Only check once in a while
     } 
```

另一种无需循环即可非常有效地执行此操作的方法；

创建一个 ManualResetEventSlim 对象；

```
 ManualResetEventSlim mre = new ManualResetEventSlim(false); 
```

等待循环变为

```
 mre.Wait(); // Waits untill the mre is signaled 
```

当 _machine.State 变为 State.End 它应该调用

```
 mre.Set(); 
```

这将向服务员发出信号并导致 mre.Wait() 停止等待

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:26:26.873

你的 CPU 是 50%，因为你有 2 个内核，你的线程正在使用 while 循环消耗 100% 的内核。

switch 语句没有等待循环，因此不会消耗 CPU。

无需手动等待，只需实现[基于事件的异步模式（EAP）](http://www.c-sharpcorner.com/UploadFile/nityaprakash/event-based-asynchronous-patterneap/)：

*   将 Receiver() 标记为 void，因此应删除 return 语句。
*   在 DataManager 类上声明一个事件，例如“OperationDone”。
*   在状态机的最后一步使用 _outputList 触发事件。
*   捕获事件以返回值。

现在唯一的 CPU 消耗将由状态机框架完成。

另一个有用的链接：How to: [Wrap EAP Patterns in a Task](http://msdn.microsoft.com/en-us/library/ee622454.aspx)。

# matlab - 如何在matlab中去除开头和结尾的空格？

> ID：12070492
> 
> 赞同：5
> 
> 时间：2012-08-22T09:50:06.857
> 
> 标签：matlab, cell, removing-whitespace

我有一个由细胞组成的结构。我想删除每个单元格开头和最后的所有空格，并且我想保留单元格中文本之间的所有空格。所以如果我有

```
s = '   bbb b bbbb   ' 
```

我想获得

```
s = 'bbb b bbbb' 
```

我想将此方法应用于此结构中未知数量的单元格（例如 2x3），可能使用循环。有谁知道怎么做？我失败了`regexp`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T10:39:56.300

您可以`strtrim()`与`structfun()`和单元格索引结合使用：

```
your_struct = structfun(@(x) strtrim(x{1}), your_struct); 
```

这仅在您的结构具有类似的布局时才有效

```
your_struct.a = {' some string  '};
your_struct.b = {' some other string  '};
... 
```

如果它有不同的结构，比如说，

```
your_struct.a = { {' some string  '}
                  {'   some other string '}};

your_struct.b = { {' again, some string  '}
                  {'   again, some other string '}};

... 
```

你可以试试

```
your_struct = structfun(@(x) ...
    cellfun(@strtrim, x, 'uni', false), ...
    your_struct, 'uni', false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:53:53.487

如果您的矩阵称为 a，请执行以下操作：

```
 newmatrix = cellfun(@strtrim, a, 'UniformOutput', false) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T10:24:47.353

如果`A`您的结构包含单元格，那么您可以执行以下操作：

```
New_A=structfun(@strtrim,A,'UniformOutput',false) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T13:14:35.133

strtrim 并不总是为我处理字符串的结尾，所以我使用[deblank](http://www.mathworks.com/help/techdoc/ref/deblank.html)

所以如果 strtrim 没有做你想要的一切，你可以将它与 deblank 结合使用来获得你想要的。

# objective-c - 设置 SOCKS 代理配置后 CFStream 崩溃

> ID：12070493
> 
> 赞同：7
> 
> 时间：2012-08-22T09:50:09.913
> 
> 标签：objective-c, ios, socks, cfnetwork, cfstream

下面的代码有什么问题？我使用 AsyncSocket 连接到 SOCKS 代理并在`onSocketWillConnect`委托方法上设置代理设置。如果我省略对的调用，`CFReadStreamSetProperty`套接字`CFWriteStreamSetProperty`连接将顺利进行。否则，我在没有可跟踪堆栈跟踪的已释放实例上得到 [Not A Type retain]（它可能与 CFNetwork 相关？）。有谁知道什么给了？

```
CFDictionaryRef proxyDict = CFNetworkCopySystemProxySettings();
CFMutableDictionaryRef socksConfig = CFDictionaryCreateMutableCopy(NULL, 0, proxyDict);
CFDictionarySetValue(socksConfig, kCFStreamPropertySOCKSProxyHost, CFSTR("192.168.1.148"));
CFDictionarySetValue(socksConfig, kCFStreamPropertySOCKSProxyPort, (__bridge CFNumberRef)[NSNumber numberWithInt:3129]);
CFDictionarySetValue(socksConfig, kCFStreamPropertySOCKSVersion, kCFStreamSocketSOCKSVersion4);

// set SOCKS for read streams
CFReadStreamRef readStream = [sock getCFReadStream];
if (!CFReadStreamSetProperty(readStream, kCFStreamPropertySOCKSProxy, socksConfig)) {
  CFStreamError error = CFReadStreamGetError(readStream);
  NSLog(@"[SEVERE] Web Socket Read Stream Error: %ld[%ld]", error.domain, error.error);
}

// set SOCKS for write stream
CFWriteStreamRef writeStream = [sock getCFWriteStream];
if (!CFWriteStreamSetProperty(writeStream, kCFStreamPropertySOCKSProxy, socksConfig)) {
  CFStreamError error = CFWriteStreamGetError(writeStream);
  NSLog(@"[SEVERE] Web Socket Write Stream Error: %ld[%ld]", error.domain, error.error);
}

// Release
CFRelease(socksConfig);
CFRelease(proxyDict); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:04:00.957

从 CFReadStream 的文档中：

> 可以设置的属性配置流的行为，并且只能在特定时间修改，例如在打开流之前。（实际上，除非另有说明，否则您应该假设只能在打开流之前设置属性。）

`onSocketWillConnect`设置这些属性可能为时已晚。

# android - 获取当前android系统主题的id？

> ID：12070494
> 
> 赞同：0
> 
> 时间：2012-08-22T09:50:15.107
> 
> 标签：android, dialog, styles, themes, alert

我有一个应用程序，我需要将警报对话框的样式设置为系统对话框当前使用的样式。该应用程序具有与系统不同的预定义主题集。有没有办法克服这个问题？

# html - 在 IE 中隐藏 CSS 元素

> ID：12070499
> 
> 赞同：6
> 
> 时间：2012-08-22T09:50:24.913
> 
> 标签：html, css, internet-explorer

我需要在 IE 的 CSS 中隐藏一个背景元素。

这是css文件中的类

```
.navbar-header .nav #presentacion {
    background:url("../img/horiz-line.png") no-repeat scroll 108px 20px transparent;
    display: block;
    height: 20px;
    margin-top: 20px;
} 
```

我想使用这种方法，在隐藏这部分的页面的头部插入 CSS：

```
 <!--[if IE]>
          <style>
         .navbar-header .nav #presentacion {
         display: block;
         height: 20px;
         margin-top: 20px;
         background: none;}
    </style>
   <![endif]--> 
```

它不工作，背景仍然显示在 IE 中，我做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-05-17T15:00:20.283

IE 10 + 不支持条件样式。所以你必须将它用于 IE10+：

```
<style>
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
    /* IE10+ styles */
  .navbar-header .nav #presentacion {
         display: block;
         height: 20px;
         margin-top: 20px;
         background: none;}
}
</style> 
```

此处的更多信息： [对于某些情况，如 Internet Explorer 特定的 CSS 或 Internet Explorer 特定的 JavaScript 代码，如何仅针对 Internet Explorer 10？](https://stackoverflow.com/questions/9900311/how-do-i-target-only-internet-explorer-10-for-certain-situations-like-internet-e)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T09:57:55.073

使用相反的方法。将 !IE 类应用于要显示背景图像的类。这仅在非 IE 浏览器中呈现。

```
<!--[if !IE]> -->
    <style>
    .navbar-header .nav #presentacion {
    background:url("../img/horiz-line.png") no-repeat scroll 108px 20px transparent;
    display: block;
    height: 20px;
    margin-top: 20px;
    }
    </style>
<!-- <![endif]--> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T09:55:07.617

也许您在通用样式表之前声明它，它被覆盖了。尝试这个：

```
<!--[if IE]>
  <style>
    .navbar-header .nav #presentacion {
      display: block;
      height: 20px;
      margin-top: 20px;
      background: none !important;
    }
  </style>
<![endif]--> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T10:03:42.760

```
 <!--[if IE]>
          <style>
         .navbar-header .nav #presentacion {
         display: block;
         height: 20px;
         margin-top: 20px;
         background-image: none !important;}
    </style>
   <![endif]--> 
```

# c - 启用优化的奇怪行为

> ID：12070501
> 
> 赞同：17
> 
> 时间：2012-08-22T09:50:35.247
> 
> 标签：c, debugging, gcc

我有一小段代码（这是我遇到的问题的一个最小工作示例）：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void xorBuffer(unsigned char* dst, unsigned char* src, int len)
{
    while (len != 0)
    {
        *dst ^= *src;
        dst++;
        src++;
        len--;
    }
}

int main()
{
    unsigned char* a = malloc(32);
    unsigned char* b = malloc(32);
    int t;

    memset(a, 0xAA, 32);
    memset(b, 0xBB, 32);

    xorBuffer(a, b, 32);

    printf("result = ");
    for (t = 0; t < 32; t++) printf("%.2x", a[t]);
    printf("\n");

    return 0;
} 
```

这段代码应该执行两个 32 字节内存缓冲区的异或（从概念上讲，应该这样做`a = a ^ b`）。由于 0xAA ^ 0xBB = 0x11，它应该打印“11”三十二次。

我的问题是，当我在 MinGW-GCC (Windows) 下编译它时，它在调试模式下完美运行（无优化），但是当启用从 -O3 开始的优化时，在 xorBuffer 循环中途出现 SIGILL 崩溃。此外，如果我将 printf 放入有问题的循环中，它会再次完美运行。我怀疑堆栈损坏，但我只是看不到我在这里做错了什么。

尝试在启用优化的情况下使用 GDB 进行调试是一个失败的原因，因为所有 GDB 都向我展示了针对每个变量的“变量优化”（当然，如果我尝试将变量打印出来，它会突然起作用）。

有人知道这里到底发生了什么吗？我在这个问题上花费了太长时间，我真的需要正确解决它才能继续前进。我的猜测是我缺少一些基本的 C 指针知识，但对我来说，代码看起来是正确的。它可能来自缓冲区增量，但据我所知，`sizeof(unsigned char) == 1`它应该一个一个地遍历每个字节。

值得一提的是，即使在我的 Linux 机器上对 GCC 进行了优化，该代码也能正常工作。

那么......这里有什么交易？谢谢！

根据要求，整个程序的汇编输出：

使用-O2：[点击](http://pastebin.com/CzvF9Hhv)

使用-O3：[点击](http://pastebin.com/RwtFadL2)

*我在 GCC 4.6.2 上观察到这种行为（与 MinGW 一起运行）*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T11:03:33.353

从我的评论：

确保编译器具有有关目标体系结构的正确信息。从读取`-O3`输出来看，编译器似乎正在为您设置 SIMD 优化，实际上是通过使用向量指令（例如`[movdqa](http://www.jaist.ac.jp/iscenter-new/mpc/altix/altixdata/opt/intel/vtune/doc/users_guide/mergedProjects/analyzer_ec/mergedProjects/reference_olh/mergedProjects/instructions/instruct32_hh/vc183.htm)`）使代码更加并行。如果目标处理器不能 100% 匹配编译器发出的代码，您可能会得到非法指令。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-22T11:30:06.450

我将此添加为 Unwind 答案的扩展（我接受它，因为它让我走上了正确的轨道）。

筛选优化后的代码后，我注意到了 AVX 指令。起初，我认为这不会造成问题，因为我的处理器支持 AVX 指令集。然而，事实证明有两个不同的 AVX 版本：AVX1 和 AVX2。而且，虽然我的处理器只支持 AVX1，但只要处理器支持这两个版本中的任何一个，gcc 就会不加选择地使用 AVX2 操作码（llvm 犯了同样的错误，对此有[错误报告](http://lists.cs.uiuc.edu/pipermail/llvmbugs/2011-November/020976.html)）。据我所知，这是不正确的操作和编译器错误。

结果是 AVX1 系统上的 AVX2 代码，这显然会导致非法指令。它解释了很多事情，从代码在小于 32 字节的输入上没有失败（因为 256 位寄存器宽度），到在我的 Linux 机器上运行的代码，它恰好是一个 CPU 支持仅限于 SSE3 的虚拟机。

修复方法是禁用 -O3 并返回到 -O2，其中 gcc 不会诉诸最核心的 SIMD 指令来优化简单代码，或者使用`volatile`强制它逐字节遍历缓冲区的关键字，煞费苦心，像这样：

```
*(unsigned char volatile *)dst ^= *(unsigned char volatile *)src; 
```

这当然非常慢，并且可能比仅使用 -O2 （忽略整个程序的影响）更糟糕，但可以通过 int 遍历缓冲区 int 并在最后填充来解决它，这在以下方面已经足够好了速度。

另一个好的修复方法是升级到没有这个 bug 的 gcc 版本（这个版本可能还不存在，我没有检查过）。

**编辑：最终的解决方法是在 GCC 上抛出 -mno-avx 标志，从而禁用任何和所有 AVX 操作码，完全消除错误而无需修改代码（一旦修补编译器版本可用，就可以轻松删除）。**

多么不正当的编译器错误。

# linux - Bash 'while read line' 成一个数组并求和

> ID：12070509
> 
> 赞同：3
> 
> 时间：2012-08-22T09:50:54.303
> 
> 标签：linux, arrays, bash, math, while-loop

我希望有人能帮帮忙...

我已将整数解析为由回车符分隔的文件，如下所示：

...
427562786
6834257
978539857
9742
578375
...

我希望将这些放入一个数组中并求和。然而，经过一番热切的谷歌搜索后，我只能找到一种合理的方法来使用 for 循环来做到这一点，我很有权威，这并不是逐行读取文件的最佳方法。

我知道在这个脚本的某个地方我需要声明这样的东西：

IFS='
'
while read line
do
***array creation magic here***
done < /tmp/file

SUM=0
while read line
do
SUM= ***sum array elements magic here***
done < /tmp/file

printf $总和

请比我更有知识的人告诉我我错过了什么？谢谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:59:15.343

如果数组只是一个中间步骤并且不需要超出该点，那么这将带您直接获得最终答案：

```
sum=0
while read N
do
    # sum=$((sum+N)) - the line below shows a more concise syntax
    ((sum += N))
    echo "Added $N to reach $sum"
done < /tmp/list_of_numbers

echo $sum 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T12:42:22.353

在 bash 4 中，有`mapfile`命令。

```
mapfile -t numbers < /tmp/list_of_numbers

for n in "${numbers[@]}"; do
    (( sum += n ))
done 
```

在早期版本的 bash 中，您可以使用`read`，但它有点冗长：

```
IFS=$'\n' read -d '' -a numbers < /tmp/list_of_numbers 
```

# java - JMock- java.lang.NoSuchMethodError: org.hamcrest.Matcher.describeMismatch()

> ID：12070514
> 
> 赞同：3
> 
> 时间：2012-08-22T09:51:18.697
> 
> 标签：java, jmock, hamcrest

我知道解决方案是以某种方式确保在 hamcrest 之后加载 Junit。我有一个 intellij 项目，我在其中设置了一个外部库，其中包含 JUnit 和 JMock 以及 hamcrest。如何确保不会出现此错误

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-30T16:52:09.807

1.  junit:junit:4.11 替换了以前的 junit:junit-dep
2.  JUnit 4.11 包含 org.hamcrest:hamcrest-core:1.3 jar 作为依赖项
3.  要在测试中使用显式 Hamcrest 匹配器，请包含 org.hamcrest:hamcrest-library:1.3。
4.  org.mockito:mockito-all:1.9.x - 包括旧版本的 Hamcrest，不是作为依赖项，而是包装在其 jar 中。这是罪魁祸首。（[https://code.google.com/p/mockito/issues/detail?id=459](https://code.google.com/p/mockito/issues/detail?id=459)）
5.  将 org.hamcrest:hamcrest-core:1.3 放在所有测试依赖项之前
6.  使用 Maven 的 dependencyManagement 部分来控制 junit、hamcrest 和 mockito jar 的所有传递版本。例如 spring-integration-test 传递地包括 mockito-all:1.9.0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T10:02:37.087

您应该确保库（jar）的兼容性。如果 jar 中的一个类使用另一个 jar 中的类中的某个方法，并且这个使用的方法是新添加的，并且您使用的是旧 jar，那么您肯定会得到`java.lang.NoSuchMethodError`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T15:20:28.460

您需要导入 junit-dep.jar（其中不包括 hamcrest 依赖项！？），而不是 junit.jar。如果您在一个大型项目中使用 Maven，这可能需要大量追逐以清除所有晦涩的 hamcrest 和 junit 导入。

即将发布的 junit 与 hamcrest 1.3 兼容可能会有所帮助

# python - 不同版本 Python 的条件 shebang 行

> ID：12070516
> 
> 赞同：16
> 
> 时间：2012-08-22T09:51:28.227
> 
> 标签：python, conditional, shebang

尝试在两台不同的计算机上运行 python 脚本时遇到问题。在每台计算机上，我想使用 python 版本 2.7.3 运行脚本，但是我遇到的问题是两台计算机以不同的方式命名 python 2.7.3。其中一台计算机运行arch linux，在这台计算机上它被命名为python2。另一台计算机正在运行 redhat linux，它使用名称 python2.7.3。

我应该在 shebang 行中使用什么，以便脚本可以在两台计算机上执行而无需任何更改？我真正想要的是某种可以选择使用哪个版本的 Python 的有条件的 shebang 行。我只是运气不好，我必须保留两个不同版本的脚本吗？

PS我不能只使用#!/usr/bin/env python，因为在arch linux计算机上它指的是python 3.2.3，而在redhat linux计算机上它是指python 2.4。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-10-21T08:17:05.023

```
#!/bin/sh
# -*- mode: Python -*-

""":"
# bash code here; finds a suitable python interpreter and execs this file.
# prefer unqualified "python" if suitable:
python -c 'import sys; sys.exit(not (0x020500b0 < sys.hexversion < 0x03000000))' 2>/dev/null \
    && exec python "$0" "$@"
for pyver in 2.6 2.7 2.5; do
    which python$pyver > /dev/null 2>&1 && exec python$pyver "$0" "$@"
done
echo "No appropriate python interpreter found." >&2
exit 1
":"""

import sys
print sys.version 
```

取自[https://github.com/apache/cassandra/blob/trunk/bin/cqlsh](https://github.com/apache/cassandra/blob/trunk/bin/cqlsh)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-22T11:04:54.073

您可以编写一个小的包装脚本，查看不同版本的 python 可执行文件并使用它找到的那个。

例如：

```
#!/bin/sh -e
pythons=('python2', 'python2.7.3')
for py_exec in ${pythons[@]}; do
    py_exec="/usr/bin/$py_exec"
    if [[ -f $py_exec ]]; then
        exec $py_exec $1
    fi
done 
```

当然，这个脚本只是一个开始示例，您当然可以通过多种方式对其进行改进。只是让你明白我的意思。

# .net-4.5 - .NET Framework 4.5 目录在哪里？

> ID：12070518
> 
> 赞同：150
> 
> 时间：2012-08-22T09:51:29.727
> 
> 标签：.net-4.5, installation-path

我已经安装了 Windows 8、Visual Studio 2012 但在`%WINDIR%\Microsoft.NET\Framework`.

我做错了什么，还是 .NET 4.5 与其他版本不同？

如果是因为我没有安装工具，有没有一套不同的工具可以下载？据我所知，我可以构建 .NET 4.5 应用程序。

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2012-08-22T09:53:00.323

.NET 4.5 是 4.0 的就地替代品 - 您将在 4.0 目录中找到程序集。

[请参阅Rick Strahl](http://www.west-wind.com/weblog/posts/2012/Mar/13/NET-45-is-an-inplace-replacement-for-NET-40)和[Scott Hanselman](http://www.hanselman.com/blog/NETVersioningAndMultiTargetingNET45IsAnInplaceUpgradeToNET40.aspx)关于此主题的博客。

您还可以在以下位置找到特定版本：

```
C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework 
```

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2012-03-03T13:13:32.180

编辑：这个答案在 2013 年年中之前是正确的，但你可能有一个更新的版本，因为[大的 msbuild 变化](https://devblogs.microsoft.com/visualstudio/msbuild-is-now-part-of-visual-studio/)。有关更多详细信息，请参阅[Jonny Leeds 的答案](https://stackoverflow.com/a/26039640/22656)。

`C:\Windows\Microsoft.NET\Framework\v4.0.30319`实际下的版本*是*.NET 4.5。这有点奇怪，但肯定`mscorlib`包含`AsyncTaskMethodBuilder`用于异步的 etc。

.NET 4.5 有效地*覆盖了*.NET 4。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2012-03-03T13:15:20.063

.NET 4.5*不是*并行版本，它*取代*了 4.0 的程序集。很像 .NET 3.0、3.5 和 3.5SP1 替换了 2.0 的程序集。并添加了一些新的。CLR 版本仍然是 4.0.30319。您只关心引用程序集，它们位于 c:\program files\reference 程序集中。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2014-09-25T13:16:36.953

虽然上述答案是正确的，但值得注意的是[MSBuild 已经改变](http://blogs.msdn.com/b/visualstudio/archive/2013/07/24/msbuild-is-now-part-of-visual-studio.aspx)并且不再随 .net 框架一起提供，它要么是独立的，要么是与 Visual Studio 一起提供的。结果它的二进制文件被移动了......所以你在 4.0.303619 目录下得到的那个实际上是旧的！

我刚刚被这个发现 - 我发现[自动绑定重定向](http://msdn.microsoft.com/en-us/library/2fc472t2%28v=vs.110%29.aspx)仅在从 VisualStudio 运行时才起作用，但在从命令行运行 msbuild 时不起作用......线索是在 VS 2013 中添加了绑定重定向（对于那个 read .净框架 4.5)。如果您打开 vs 命令提示符，您会看到它现在从程序文件中获取它，正如另一篇文章提到的那样。而我在我的路径上使用了一个链接到旧版本的批处理文件。

版本号

框架下：

```
PS C:\Windows\Microsoft.NET\Framework\v4.0.30319> .\msbuild.exe -version
Microsoft (R) Build Engine version 4.0.30319.33440
[Microsoft .NET Framework, version 4.0.30319.34014]
Copyright (C) Microsoft Corporation. All rights reserved.

4.0.30319.33440PS C:\Windows\Microsoft.NET\Framework\v4.0.30319> 
```

在程序文件下：

```
PS C:\Program Files (x86)\MSBuild\12.0\Bin> .\MSBuild.exe -version
Microsoft (R) Build Engine version 12.0.21005.1
[Microsoft .NET Framework, version 4.0.30319.34014]
Copyright (C) Microsoft Corporation. All rights reserved.

12.0.21005.1PS C:\Program Files (x86)\MSBuild\12.0\Bin> 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-08-22T11:52:57.540

该网页不正确，我已向 MS 指出了这一点，他们将对其进行更改。

如上所述，.NET 4.5 是 4.0 的就地升级，因此您将只有 Microsoft.NET\Framework\v4.0.30319。

MSBuild 的 ToolVersion 仍为“4.0”。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-07-12T15:44:37.037

确定您是否安装了 4.5（而不是 4.0）的官方方法是在注册表项中：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\NET Framework Setup\NDP\v4\Full 
```

Relesae DWORD 需要大于 378675 这是Microsoft [doc](https://msdn.microsoft.com/en-us/library/hh925568(v=vs.110).aspx)

不过，在 4.0.30319.xxxxx 之后检查次要版本的所有其他答案似乎都是正确的（msbuild.exe -version 或 clr.dll 的属性），我只需要记录一些东西（不是博客）

# c++ - 常量方法指针的类型是什么？

> ID：12070522
> 
> 赞同：3
> 
> 时间：2012-08-22T09:51:36.920
> 
> 标签：c++, member-function-pointers

给定一个班级

```
class C {
public:
    int f (const int& n) const { return 2*n; }
    int g (const int& n) const { return 3*n; }
}; 
```

`p`我们可以像这样定义一个函数指针`C::f`。

```
int (C::*p) (const int&) const (&C::f); 
```

的定义`p`可以使用 a 进行拆分`typedef`：

```
typedef int (C::*Cfp_t) (const int&) const;
Cfp_t p (&C::f); 
```

为了确保`p`不会改变（`p = &C::g;`例如），我们可以这样做：

```
const Cfp_t p (&C::f); 
```

现在，`p`这种情况下的类型是什么？我们如何在`p`不使用 typedef 的情况下完成最后一个定义？我知道`typeid (p).name ()`无法区分最外面的 const 因为它产生

```
int (__thiscall C::*)(int const &)const 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T09:55:39.263

变量的类型`p`是`int (C::*const) (const int&) const`，您可以在没有 typedef 的情况下将其定义为：

```
int (C::*const p) (const int&) const = &C::f; 
```

您的经验法则是：要使您定义的对象/类型为 const，请将`const`关键字放在对象/类型的名称旁边。所以你也可以这样做：

```
typedef int (C::*const Cfp_t) (const int&) const;
Cfp_t p(&C::f);
p = &C::f; // error: assignment to const variable 
```

# java - 如何将sql查询数组传递给函数

> ID：12070530
> 
> 赞同：1
> 
> 时间：2012-08-22T09:52:01.600
> 
> 标签：java, jdbc

代码有什么问题。请帮助我。如何将查询数组传递给函数 exeSearchQuery();

```
 public class  MyDBConnect
    {
    Connection dbCon = null;
        public String DB_USERNAME = "root";
        public String DB_PASSWORD = "root";
        private String DB_DRIVER_CLASS = "com.mysql.jdbc.Driver";
        private String DB_URL = "jdbc:mysql://localhost/yatin";
    public  boolean connectToDb( ) throws Exception{
        try{
    Class.forName (DB_DRIVER_CLASS);
            dbCon = DriverManager.getConnection(DB_URL, DB_USERNAME, DB_PASSWORD);
            //dbCon = DriverManager.getConnection(tns, DB_USERNAME, DB_PASSWORD);
            return true;
        }catch(Exception e){
            System.out.println("Error in DBConnect "+e);
            return false;
        }
    }

    public ArrayList exeSearchQuery(String sql[]) throws Exception{

        Statement stmt = null;
        ResultSet rs = null;
        ArrayList  data = null;
        int recordSize=0;
            try{

                connectToDb( );
                stmt = dbCon.createStatement( );
                rs = stmt.executeQuery(sql);
                ResultSetMetaData rsmd = rs.getMetaData();
                int numOfCols = rsmd.getColumnCount();

                data = new ArrayList( );
                String q="";
                for(int k=0;k<2;k++)
                {
                    boolean chkQuery=true;
                    q=sql[k];
                    while(rs.next()){
                    chkQuery=true;
                    recordSize=recordSize+1;
                    String row[] = new String[numOfCols];
                    for(int col=1;col<=numOfCols ;col++)
                    {
                        row[col-1] = rs.getString(col);
                    }
                    data.add(row);
                    }
                    System.out.println("data="+data);

                    if(chkQuery=true)
                        {
                        break;
                        }
                        else
                        {
                            q=sql[1];
                            while(rs.next())
                            {
                                chkQuery=true;
                                recordSize=recordSize+1;
                                String row[] = new String[numOfCols];
                                for(int col=1;col<=numOfCols ;col++)
                                {
                                    row[col-1] = rs.getString(col);
                                }
                                data.add(row);
                                System.out.println("data="+data);
                            }
                        }
                        if(chkQuery=true)
                        {
                        break;
                        }
                    }

            }catch(Exception e){
                System.out.println("Error in DBConnect "+e);
            }finally{
                if(rs !=null) rs.close();
                if(stmt !=null)stmt.close();
                if(dbCon !=null) dbCon.close();
            }
        return data;
        //return recordSize;
    }

        public static void main(String a[]) throws Exception{
            MyDBConnect db = new MyDBConnect( );
            //db.connectToDb();
                            System.out.println("Connected");
            String query[] ={"select a.ID,a.VDT,a.AID,a.NAME,a.ADD,a.CONTACT,a.PTM,a.DEPT_TEXT,a.FLOOR,b.LINK from tm_co123 a LEFT JOIN tm_co456 b ON a.ID=b.PID where a.NAME like 'anil' ORDER BY ID","select a.ID,a.VDT,a.AID,a.NAME,a.ADD,a.CONTACT,a.PTM,a.DEPT_TEXT,b.LINK from tm_co123 a LEFT JOIN tm_co456 b ON a.ID=b.PID where a.ADD like 'anil' ORDER BY ID"};       
            db.exeSearchQuery(query[]);
        }
    } 
```

如果我运行上面的代码，我会收到错误

```
MyDBConnect.java:473: '.class' expected
                db.exeSearchQuery(query[]);
                                         ^
1 error 
```

如果我用 query 替换 query[] 那么它会给我错误

```
MyDBConnect.java:406: executeQuery(java.lang.String) in java.sql.Statement canno
t be applied to (java.lang.String[])
                        rs = stmt.executeQuery(sql);
                                 ^
Note: MyDBConnect.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
1 error 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:57:00.067

您不能传递 a `String[]`to [`executeQuery`](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#executeQuery%28%29)，它需要一个单一`String`的参数。要么分别执行每个查询，要么使用也许将它们变成一个`UNION`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:01:11.843

您不能将数组传递给`executeQuery();`方法，只有您可以传递字符串，例如-`executeQuery(sql[0]);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T10:02:37.813

即使你的代码不是你能做的最好的，你的`sql`也是一个数组而不是一个`String`. 并且数组不能传递给`executeQuery`.

这是您的方法的快速编辑：

```
 ...
            connectToDb( );
            for(String str : sql){ //This way you're doing each query of your array
                stmt = dbCon.createStatement( );
                rs = stmt.executeQuery(str);
                ResultSetMetaData rsmd = rs.getMetaData();
                int numOfCols = rsmd.getColumnCount();
                data = new ArrayList( );
                String q="";
                for(int k=0;k<2;k++){
                    boolean chkQuery=true;
                    q=sql[k];
                    while(rs.next()){
                        chkQuery=true;
                        recordSize=recordSize+1;
                        String row[] = new String[numOfCols];
                        for(int col=1;col<=numOfCols ;col++){
                            row[col-1] = rs.getString(col);
                        }
                    data.add(row);
                }
            }
        ... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T10:03:11.463

`stmt.executeQuery()`方法只接受`String`参数。

1.  在您的 main() 调用`db.exeSearchQuery()`方法中，它接受参数`String[]`。但是对于写 like `exeSearchQuery(query[])`，`query`已经是一维数组了。这是第一个错误。

2.  在您的`exeSearchQuery(String sql[])`方法中， `stmt.executeQuery()`需要`String`参数。像这样写`stmt.executeQuery(sql)`。由于现在`sql`是一维数组。这是第二个错误。

我尝试这样，在 exeSearchQuery(String sql[]) 方法中

```
Edit rs = stmt.executeQuery(sql[0]); 
```

在 main() 方法中，

```
String[] query = {.........};
db.exeSearchQuery(query);// edited 
```

它连接到数据库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T05:09:20.140

我`executeSearchQuery(query)`按照我的定义通过了它`String query[]={}` ，它起作用了，我得到了想要的结果。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T10:07:23.133

`executeQuery`接受 `String`不要`String[]`做类似下面的事情。

```
List<ResultSet> lList=new ArrayList<ResultSet>();
for(String query :sql){
            ResultSet rs = stmt.executeQuery(query);
            lList.add(rs);
        } 
```

# windows - 如何在 Windows SAS 中获取 sas 文件的所有者信息？

> ID：12070533
> 
> 赞同：1
> 
> 时间：2012-08-22T09:52:13.660
> 
> 标签：windows, sas, file-ownership

有没有办法在 Windows SAS 中找到有关 sas 文件所有者的信息？我尝试了以下代码，但它没有提供有关代码所有者的任何信息。

```
data info;
   length infoname infoval $300;
   drop rc fid infonum i close;
   rc=filename('abc','C:\c-ae.sas');
   fid=fopen('abc');
   infonum=foptnum(fid);
   do i=1 to infonum;
      infoname=foptname(fid,i);
      infoval=finfo(fid,infoname);
      output;
   end;
   close=fclose(fid);
run; 
```

有什么方法可以获取有关代码/文件所有者的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:22:15.207

我不相信您可以从 SAS 文件属性中获取文件所有者。但是，您可以使用带有开关的 Windows`DIR`命令`/Q`来发现所有者。例如：

```
filename x pipe 'dir /q c:\c-ae.sas';
data a;
   infile x firstobs=6 truncover;
   input @1 file_date yymmdd10.
        @13 file_time time8.
            file_size
            file_owner $22.
            file_name $32.;
   format file_date yymmdd10\. file_time time8.; 
   output;
   stop;
run;
filename x clear; 
```

该`/B`开关应该抑制命令头和尾输出，但它不在我的系统上；因此， using`firstobs=6`会跳过标题，而`stop`命令会跳过其余的输出。

请注意，这实际上是一个 Windows 解决方案，而不是真正的 SAS。我会添加`Windows`标签以防其他人可以插入。

# svnant - 尽管我有命令行 svn，但找不到 javahl、svnkit 和命令行 svn 客户端

> ID：12070534
> 
> 赞同：0
> 
> 时间：2012-08-22T09:52:16.543
> 
> 标签：svnant

我正在尝试使用 svnant。这是我的xml：

```
<!-- SVN settings -->
<target name="init.svn">
    <path id="svnant.classpath">
        <fileset dir=".../svnant">
            <include name="**/*.jar" />
        </fileset>
    </path>
    <typedef resource="org/tigris/subversion/svnant/svnantlib.xml" classpathref="svnant.classpath" />
    <svnSetting svnkit="false" javahl="false" id="svn.settings"/>
</target>

<target name="checkouttag" depends="init.svn">
    <svn refid="svn.settings">
        <checkout url="${svn.tags}/${TAG_NAME}" destpath="${TAG_NAME}" />
    </svn>
</target> 
```

我希望使用命令行 svn，但我收到“找不到 javahl、svnkit 或命令行 svn 客户端”错误，尽管我可以从命令行运行 svn。我正在使用 ant-1.8.4 和 svn-1.6.4。谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:51:07.867

所以最后我对此无能为力，并决定根本不使用 svnant。只需直接从 ant 调用 svn 命令行即可。

# asp.net - 将名称与 & 传递到另一个网页

> ID：12070550
> 
> 赞同：0
> 
> 时间：2012-08-22T09:52:56.903
> 
> 标签：asp.net

我有一个客户名称。`e.g: D&G.`

此名称被传递到另一个网页。例如：

```
http://abc.com/test.aspx?client=D&G 
```

`query[0]`当我在另一个网页中检索第一个时，我只会`client=D`得到`&G`

如何解决**传递**名称的问题，包括`&`？

在传递之前我应该`&`​​用特殊字符替换吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T09:55:09.913

你可以使用`%26`.

该`&`字符已被 URL 编码（百分比编码）为`%26`.

我为你添加了这个链接，它非常有趣，所有特定字符的编码

[http://www.permadi.com/tutorial/urlEncoding/](http://www.permadi.com/tutorial/urlEncoding/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T10:01:12.953

您可以使用`Server.UrlEncode("D&G")`在服务器上对其进行编码。

# r - 从文本文件中提取行

> ID：12070554
> 
> 赞同：0
> 
> 时间：2012-08-22T09:53:03.550
> 
> 标签：r, extract

我有一个以下格式的文本文件，我希望使用`R`.

`read.table("")`似乎也不起作用...

```
FiberLab 3

Name:   3_0002  
Date:   08-06-12  
Time:   14:42  
Company:    SLU  
Sample ID-Place:    034-UPSC Spruce  
Fibers:     10006   526 526 pcs  
Weight:     0.000   mg  
L(n)/L(l)/L(w):  1.22    2.28    2.75   mm  
L(n)/L(l)/L(w):  1.11    2.05    2.44   mm  
Width:  29.97   µm  
CWT:     7.90   µm  
Coar:   0.000   mg/m 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-19T05:54:45.587

对于这种非表格数据，`read.table`是行不通的。我会尝试使用 读取数据`readLines`，并使用正则表达式（ , 等）从那里`grep`处理`sub`。

# java - java程序通过命令提示符运行时执行哪个文件？

> ID：12070556
> 
> 赞同：2
> 
> 时间：2012-08-22T09:53:17.247
> 
> 标签：java, command-prompt

我真的很好奇这个问题。

当我们使用 javac 编译 .java 文件时，即。`javac JavaFileName.java`，`JavaFileName.class`创建一个文件。但是当我们在命令提示符下使用 java 命令运行这个 java 程序时，我们会写`java JavaFileName`.

`java`我的问题是当我们通过命令提示符运行 java 程序时，哪个文件被传递给命令？

如果它使用`.class file`那么为什么它会给出错误`java JavaFileName.class`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T09:55:54.267

这不是您提名的文件。相反，您正在提名一个*class*，Java 将使用 中的条目`classpath`来查找它。

您`classpath`将包含目录或 .jar/.zip，Java 将按顺序搜索这些。

显然，对于目录，指定的类和文件之间存在映射。这也适用于 .jar/.zip。Java 将寻找相应的条目。

例如

```
 java a.b.c.D 
```

将导致搜索文件或 .jar 条目`a/b/c/D.class`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T09:54:37.980

它是 .class 被执行的，你只是不按字面意思写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T10:00:11.233

它不是在命令行参数中传递给 java 的文件引用。它是完全限定的类名（即 org.exemple.MyClass）。Java 将查看类路径中匹配的 .class 文件并调用 main() 方法（如果存在）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T12:29:53.987

它执行*.class*文件。
当你写

```
java MyClass 
```

它将在执行命令的文件夹中搜索*MyClass.class*文件，因此当您编写时：

```
java my.package.MyClass 
```

它将在子文件夹*./my/package/MyClass.class*中搜索文件，最后当您编写时：

```
java MyClass.class 
```

it will search for the file *./MyClass/class.class*

That's why you get the error.

# c# - VSTO Word 2010 getScreentip getSupertip 未触发

> ID：12070559
> 
> 赞同：2
> 
> 时间：2012-08-22T09:53:33.113
> 
> 标签：c#, ms-word, vsto

我的自定义 XML 功能区有问题，回调“onAction”、“getImage”和“getEnabled”工作正常，但 getScreentip 和 getSupertip 不起作用。

XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<customUI xmlns="http://schemas.microsoft.com/office/2009/07/customui" onLoad="Ribbon_Load">
  <ribbon startFromScratch="true">
    <qat>
      <sharedControls>
        <button id="Flag_fr-FR"
                onAction="OnActionCallback"
                getScreentip="GetScreentip"
                getSupertip="GetSupertip" 
                getImage="GetImage"/>
        <button id="Flag_en-EN"
                onAction="OnActionCallback" 
                getScreentip="GetScreentip" 
                getSupertip="GetSupertip"
                getImage="GetImage"/>
        <separator id="Sep1" insertAfterQ="FlagEn"/>
        <button id="Refresh"
                insertAfterQ="Sep1" 
                getScreentip="GetScreentip"
                getSupertip="GetSupertip"
                onAction="OnActionCallback"
                getImage="GetImage"/>
        <separator id="Sep2" insertAfterQ="Refresh"/>
        <button id="Search"
                insertAfterQ="Sep2"
                getScreentip="GetScreentip"
                getSupertip="GetSupertip"
                onAction="OnActionCallback"
                getImage="GetImage"/>
        <button id="OnScreenKeyboard" insertAfterQ="Search"
                getScreentip="GetScreentip"
                getSupertip="GetSupertip"
                onAction="OnActionCallback"
                getImage="GetImage"/>
        <button id="Logout" insertAfterQ="OSK"
                getScreentip="GetScreentip"
                getSupertip="GetSupertip"
                onAction="OnActionCallback"
                getEnabled="GetEnabled"
                getImage="GetImage"/>
      </sharedControls>
    </qat>
  </ribbon>
</customUI> 
```

代码隐藏：

```
public String GetScreetip(Office.IRibbonControl control)
 {
     return ("Test...");
 }

 public String GetSupertip(Office.IRibbonControl control)
 {
     return ("Test");
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T13:17:02.043

首先，您在您编写的 xml 中输入了错误的处理程序名称，`getScreentip="GetScreentip"`但在您编写的代码中`GetScreetip`并错过了`n`

其次，由于某种原因Office忽略了字符组合`...`，所以它只会显示`Test`

除此之外，一切似乎都很好。

例子：

功能区.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<customUI xmlns="http://schemas.microsoft.com/office/2006/01/customui">
    <ribbon>
        <tabs>
            <tab idMso="TabAddIns">
                <group label="MyAddIn">
                    <button id="buttonAbout"
                            onAction="buttonAbout_Click" 
                            label="About" 
                            getScreentip="buttonAbout_Screentip" 
                            getSupertip="buttonAbout_Supertip" />
                </group>
            </tab>
        </tabs>
    </ribbon>
</customUI> 
```

功能区.cs

```
public void buttonAbout_Click(Office.IRibbonControl control)
{
    if (control.Id != "buttonAbout")
        return;
    // it's not advised to use MessageBox in Office Addins
    // sometimes it gets blocked by Office
    MessageBox.Show("MyAddin v1.0");
}

public string buttonAbout_Screentip(Office.IRibbonControl control)
{
    if (control.Id != "buttonAbout")
        return string.Empty;
    return "About Screentip";
}

public string buttonAbout_Supertip(Office.IRibbonControl control)
{
    if (control.Id != "buttonAbout")
        return string.Empty;
    return "About Supertip";
} 
```

# .net - IObservable.Subscribe 导致 System.Delegate.CreateDelegate 抛出 ArgumentException

> ID：12070560
> 
> 赞同：0
> 
> 时间：2012-08-22T09:53:39.400
> 
> 标签：.net, f#, sdl, system.reactive

我希望将 cs-sdl 连接到 Rx。我已经让它在 C# 中工作，但在 F# 中开始发生一些相当奇怪的事情。我想坚持使用 F#，这样我可以节省一些编程时间并将 SDL 事件作为参数传递，以便将它们整齐地包装在 IObservables 中。这是我尝试这样做的方法：

```
let fromEvent (e: IEvent<'H,'T>) = Observable.FromEventPattern<'H,'T>((fun h -> e.AddHandler(h)),(fun h -> e.RemoveHandler(h))) 
```

到目前为止一切都很好。现在将其中一个 SDL 事件传递给它并获得一个 IObservable...

```
let MouseMotion = fromEvent(Events.MouseMotion) 
```

等等等等这组模块。所有推断的类型都是正确的。MouseMotion 是类型`IObservable<MouseMotionEventArgs>`

现在这是我在另一个项目中实际使用这个库的地方，我为它测试它：

```
let observer : IObserver<MouseMotionEventArgs> = Observer.Create(Action<MouseMotionEventArgs>(fun x -> System.Console.WriteLine(x.X.ToString())))
ignore <| SdlDotNet.Reactive.CoreInput.MouseMotion.Subscribe(Observer.AsObserver(observer)) 
```

这是我运行它时发生的情况：

```
 System.ArgumentException was unhandled
  Message="Type must derive from Delegate.\r\nParameter name: type"
  Source="mscorlib"
  ParamName="type"
  StackTrace:
       at System.Delegate.CreateDelegate(Type type, Object firstArgument, MethodInfo method, Boolean throwOnBindFailure)
       at System.Delegate.CreateDelegate(Type type, Object firstArgument, MethodInfo method)
       at System.Reactive.Linq.Observable.<>c__DisplayClass19d`2.<FromEvent>b__19b(IObserver`1 observer)
       at System.Reactive.AnonymousObservable`1.<>c__DisplayClass1.<Subscribe>b__0()
       at System.Reactive.Concurrency.Scheduler.Invoke(IScheduler scheduler, Action action)
       at System.Reactive.Concurrency.ScheduledItem`2.InvokeCore()
       at System.Reactive.Concurrency.ScheduledItem`1.Invoke()
       at System.Reactive.Concurrency.CurrentThreadScheduler.Trampoline.Run()
       at System.Reactive.Concurrency.CurrentThreadScheduler.Schedule[TState](TState state, TimeSpan dueTime, Func`3 action)
       at System.Reactive.Concurrency.CurrentThreadScheduler.Schedule[TState](TState state, Func`3 action)
       at System.Reactive.Concurrency.Scheduler.Schedule(IScheduler scheduler, Action action)
       at System.Reactive.AnonymousObservable`1.Subscribe(IObserver`1 observer)
       at <StartupCode$SdlDemo>.$Tutorial.main@() in C:\Users\Barend Venter\Documents\Visual Studio 2008\Projects\SdlDemo\SdlDemo\Tutorial.fs:line 77
  InnerException: 
```

我完全被难住了。为什么会这样？我需要在某个地方做一些 eta 扩展吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:10:24.653

经过一番摆弄，我能够将运行时异常变成一个方便的类型错误。似乎将观察者的类型从 更改为`IObserver<MouseMotionEventArgs>`在`IObserver<EventPattern<MouseMotionEventArgs>>`这里可以解决问题：

```
let observer = Observer.Create(fun (x : EventPattern<MouseMotionEventArgs>) -> System.Console.WriteLine(x.EventArgs.X.ToString()))
ignore <| SdlDotNet.Reactive.CoreInput.MouseMotion.Subscribe((observer)) 
```

不幸的是，在我发布了几天后，我很快就找到了一个解决方案。希望它对某人有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T12:39:49.713

与其创建自己的包装函数来使 F# 适应 Rx，为什么不直接使用标准 F#[`Control.Observable`](http://msdn.microsoft.com/en-us/library/ee370313.aspx)模块中的函数呢？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T19:16:02.960

这可能无法解决您的其余问题，但是您是否注意到[IEvent 继承自 IObservable](http://msdn.microsoft.com/en-us/library/ee340439.aspx)？您的`fromEvent`功能可以实现为一个简单的演员...

```
let fromEvent (e: IEvent<'H,'T>) = e :> IObservable<'T> 
```

# python - 模拟时间python

> ID：12070561
> 
> 赞同：3
> 
> 时间：2012-08-22T09:53:39.963
> 
> 标签：python, time

我想在 Python 中模拟时间。我想每秒应用一次“my_fct”，但是我不知道“my_fct”需要多长时间才能运行，所以我不能使用睡眠。我所做的是这样的：

```
 past_time =  datetime.datetime.utcnow()
    present_time =  datetime.datetime.utcnow()
    for i in range(10):
        while( (present_time - past_time).total_seconds()  < 1):
            present_time = datetime.datetime.utcnow()
        my_fct(......)
        past_time = present_time 
```

我不认为这是一个好方法吗？什么是正确的解决方案？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T09:56:51.847

运行您的代码给出：

```
>>> 

Traceback (most recent call last):
  File "C:\python\tester.py", line 6, in <module>
    while((present_time - past_time) < 1):
TypeError: can't compare datetime.timedelta to int 
```

你需要的是这样的：

```
import datetime

past_time =  datetime.datetime.utcnow()
present_time =  datetime.datetime.utcnow()
for i in range(10):
    while((present_time - past_time).seconds < 1):
        present_time = datetime.datetime.utcnow()
    my_fct(......)
    past_time = present_time 
```

time-time 给出一个 timedelta 值。你需要这个值的秒数。然后与您的 int 进行比较。

**编辑：**但是，我现在意识到这不是您正在寻找的解决方案。

这是一种使用线程的方法（一种非常简单的方法 - 容易出现问题，具体取决于做什么`my_fct()`。）

```
import time
from threading import Thread

 for i in range(10):
    time.sleep(1)
    t = Thread(target=my_fnc, args=(......))
    t.start() 
```

# php - 防止在页面刷新 PHP 上插入重复记录

> ID：12070562
> 
> 赞同：0
> 
> 时间：2012-08-22T09:53:39.863
> 
> 标签：php, ajax, row, insertion

我可以看到在这个问题上创建了几个主题，但我真的找不到可以应用于我的案例的解决方案。

我的问题是，当用户在我的页面上提交表单时，一些用户尝试在处理请求时刷新页面，并且在数据库中插入了两次行。脚本中间有两个 curl 调用，这可能需要几秒钟才能完成，这就是导致延迟的原因。我相信通过刷新页面，他们会打开一个具有相同会话详细信息的新连接并再次提交，但废弃的后端脚本仍在处理该过程。最重要（也是最糟糕的）事情是，表单发布到自身。

我们尝试应用多种措施（擦除 SESSION 以跟踪生成的会话变量等...）我相信表单上的隐藏字段不是一个选项，因为随后可能会使用伪造的浏览器攻击流程脚本。

我的建议是从视图中分离流程部分并将其迁移到单独的脚本并通过 Ajax 调用它。在调用 Ajax 时，禁用提交按钮会提示用户在处理页面时不要刷新页面。这样，即使他们刷新页面，它也不会再次提交，届时进程可以设置 SESSION 变量以防止重新提交。

您对此解决方案有何看法？

请**不要**向我发布这样的事情是坏的或对过程不好的事情并改变这个或那个，因为我无法在整个系统建立在它之上的过程中做出任何重大改变。

非常感谢。

////////////////////////////////////////// ///////////////////////

扩大：

*   将自发布怪物脚本的流程部分迁移到 Ajax 脚本中。
*   触发 ajax 后，我禁用提交按钮并显示带有文本的微调器，不要刷新浏览器
*   当在 Ajax 脚本中完成操作时，我设置了一个会话变量，指示该过程已完成
*   如果他们仍然刷新浏览器，表单数据将被清除，他们根本没有足够的时间再次填写，所以当他们再次提交表单时，会话变量已经设置并按下提交按钮他们会收到一条消息，然后重定向到确认页面。

到目前为止，经过几次测试运行，它似乎运行良好。

大家觉得这个解决方案怎么样？是否存在任何漏洞或安全隐患？（错误消息来自脚本通过 Json）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:41:05.303

好的，再来一个：

```
<?php
   session_start();
   $old_session_exists = false;
   while (isset($_SESSION['processing-'.$_SERVER['REMOTE_ADDR'].$_SERVER['HTTP_USER_AGENT']])) {
      $old_session_exists = true;
      sleep(5);
   }

   if (!$old_session_exists) {
      // process your cURL and save output into another session variable
      $_SESSION['processing-'.$_SERVER['REMOTE_ADDR'].$_SERVER['HTTP_USER_AGENT']] = 1;
      $_SESSION['result-'.$_SERVER['REMOTE_ADDR'].$_SERVER['HTTP_USER_AGENT']] = cURL(...);

      // remove processing session
      unset($_SESSION['processing-'.$_SERVER['REMOTE_ADDR'].$_SERVER['HTTP_USER_AGENT']]);
   }

   // return the result from session
   $ret = $_SESSION['result-'.$_SERVER['REMOTE_ADDR'].$_SERVER['HTTP_USER_AGENT']];
   unset($_SESSION['result-'.$_SERVER['REMOTE_ADDR'].$_SERVER['HTTP_USER_AGENT']]);
   return / echo $ret;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T10:01:54.883

格吉乌斯：

我对解决方案的看法取决于您发送的具体内容（例如，使用经典方法您不应该通过 JS 请求发送文件）。此外，使用 Ajax 会使应用程序依赖于启用 JS，这会是一个问题吗？最后，即使小心请求也可能被伪造......

鉴于此，我的观点是“请，不要”。我认为这给这件事增加了不必要的复杂性。

虽然邪恶肮脏，但您是否尝试过发送到隐藏的框架？这是一个典型的解决方案，允许您在提交表单后立即显示“请稍候消息”。与所有事物一样，它可以被伪造和破坏，但话又说回来，什么不是？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T10:08:05.067

使用[异步 cURL](http://www.paul-norman.co.uk/2009/06/asynchronous-curl-requests/)怎么样？

# c++ - 如何使用 NVidia GPU 在 Windows 下逐步调试 OpenCL GPU 应用程序

> ID：12070564
> 
> 赞同：7
> 
> 时间：2012-08-22T09:53:41.177
> 
> 标签：c++, debugging, opencl, gpgpu

我想知道您是否知道使用 Windows（我的 IDE 是 Visual Studio）逐步调试 OpenCL 内核并在 NVidia GPU 上运行 OpenCL 内核的任何方法。

到目前为止我发现的是：

*   使用 NVidias NSight，您只能分析 OpenCL 应用程序，但不能调试它们
*   AMD 的当前版本的 gDEBugger 仅支持 ATI/AMD GPU
*   旧版本的 gDEBugger 支持 NVidia GPU，但在 2010 年 12 月停止工作
*   GDB 调试器似乎支持它，但仅在 Linux 下可用
*   英特尔 OpenCL SDK 带来了一个调试器，但它仅在 CPU 上运行代码时有效，而在 GPU 上运行时无效

这种配置（Windows + NVidia GPU + OpenCL）真的有差距吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-28T15:51:03.683

目前没有在 nVidia 硬件上调试 OpenCL 内核的方法。

nSight 将仅调试 CUDA 内核。它将分析（“跟踪”）CUDA 和 OpenCL 内核。我听说 nVidia 有一个内部版本的 nSight 可以调试 OpenCL 内核，但由于商业原因，它还没有（恕我直言不太可能）发布，即推动 CUDA 作为首选的计算平台。

gDEBUgger 不再存在。它是几年前买的，后来变成了 CodeXL。出于显而易见的原因，AMD 将不支持其他供应商的硬件。

# php - 重新启动 Apache 杀死后台进程

> ID：12070565
> 
> 赞同：5
> 
> 时间：2012-08-22T09:53:42.893
> 
> 标签：php, apache, background-process

我有一个脚本`startbg.php`：

```
echo `/usr/bin/php $dir/runbg.php >> $dir/logbg.txt 2>&1 &`; 
```

我从网络上调用（通过 HTTP/Apache）。

它`runbg.php`在后台进程中运行。

但是如果我重新启动 Apache ( `/etc/init.d/apache2 restart`)，后台进程就会被杀死。

无论如何我可以让进程在后台运行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:30:26.113

您可以在我的测试中打开一个[PHP 的内部网络服务器](http://www.php.net/manual/en/features.commandline.webserver.php)实例（从 PHP 5.4.0 开始，CLI SAPI 提供了一个内置的网络服务器。）在我的测试中杀死`httpd.exe`没有效果`php.exe:8000`

```
<?php 
//Tested with windows

chdir('../php');
//S = Server, listen interface 0.0.0.0 = all : port 8000
//t = Served document root
echo `php -S 0.0.0.0:8000 -t C:\\xampp\\htdocs >> C:\\xampp\\htdocs\\logbg.txt 2>&1 &`;
?> 
```

所以可能（未经测试）：

```
echo `/usr/bin/php -S 0.0.0.0:8000 -t /srv/www/yoursite.com/public_html >> /srv/www/yoursite.com/public_html/logbg.txt 2>&1 &$dir/runbg.php >> $dir/logbg.txt 2>&1 &`; 
```

我不知道如何杀死它：s

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-05T22:36:29.523

允许进程在没有 apache 的情况下继续运行的一种方法是使其成为服务。然后使用您的命令激活服务 (service runbg start)。如果您没有使服务正常运行，那么它将取决于您在重新启动后启动的命令，但不会随着 apache 重新启动而死。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-08T12:29:15.277

`startbg.php`您应该更改or的进程组 ID `runbg.php`。

Apache/PHP 向其进程组的所有子进程发送信号。我找不到有关该功能的任何文档。但是，我解决了`setpgid()`从衍生进程调用的问题。

# drupal - 如何在 Drupal 中添加订单？

> ID：12070573
> 
> 赞同：0
> 
> 时间：2012-08-22T09:54:12.863
> 
> 标签：drupal, paypal

我是 Drupal 的新手 :(

我需要在 Drupal 中添加表单。在那我必须从下拉菜单中设置包裹，并根据该付款必须完成，

所以点击提交按钮我应该重定向到贝宝。

那么为此需要安装哪个模块？

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:56:04.500

对于几乎所有 Drupal 表单的需求，请查看 Webforms 模块 - [http://drupal.org/project/webform](http://drupal.org/project/webform)

**编辑：**

要将其与 PayPal 集成，您可以使用另一个模块 - [http://drupal.org/project/webform_paypal](http://drupal.org/project/webform_paypal)

安装两者，您将能够做您需要的事情。

# c++ - 如何使用 QScopedPointer

> ID：12070574
> 
> 赞同：2
> 
> 时间：2012-08-22T09:54:15.700
> 
> 标签：c++, qt, qscopedpointer

我有一个使用的例子

```
QApplication app(argc,argv);
QStandardItemModel* model = new QStandardItemModel(r,c,&app); 
```

但在我的程序中，我有

```
QScopedPointer<QApplication> app(createApplication(argc, argv));
QStandardItemModel* model = new QStandardItemModel(r,c,&app); //ERROR: no matching function 
```

如何正确使用此 QScopedPointer？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:56:24.217

使用`app.data()`. 虽然`QApplication`在堆上创建是非常不寻常的......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T09:56:42.360

```
QScopedPointer<QApplication> app(createApplication(argc, argv));
QStandardItemModel* model = new QStandardItemModel(r,c,app.data()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-28T10:00:11.580

**希望有用**

```
#include <QScopedPointer>
class  target
{
 public:
 int var;
};
class logic
{
 public:
 QScopedPointer<target> variable;
 target* variable2;
};
int main()
{
 logic LogicClass;
 LogicClass.variable.reset(new target);
 LogicClass.variable->var=10;
 cout<<LogicClass.variable->var<<endl;

LogicClass.variable2 = new target;
LogicClass.variable2->var = 20;
cout<<LogicClass.variable2->var<<endl;
delete LogicClass.variable2;
return 0;
} 
```

# android-emulator - 如何将 avd 重新调整为实际设备大小？

> ID：12070581
> 
> 赞同：0
> 
> 时间：2012-08-22T09:54:52.113
> 
> 标签：android-emulator, avd

嗨，我想我在这里问愚蠢的问题，但我真的对 avd 的事情感到困惑。首先我想在三星 Galaxy Ace 上测试我的应用程序，因为我找不到该设备的实际模拟器。是否有任何在线可用的实际设备模拟器？

我将它的皮肤添加到我的 AVD 并使用以下配置：

**目标：API 8 级**

**SD卡：大小：512mb**

**皮肤：内置：HVGA**

**硬件：抽象液晶密度：160**

在启动 AVD 期间，我检查了“将显示缩放为真实尺寸”并设置

**尺寸=3.5 和显示器 dpi =96（因为我的显示器尺寸是 1024x768）**

（如果我取消选中，那么我会得到真正的大模拟器）但我没有按照我的原始设备大小获得我的 avd。我的皮肤模拟器也有重叠的图标，我无法在其上正确运行我的应用程序。 ![在此处输入图像描述](../Images/a98993b526963e73d6329eb33926cc69.png)

对这个尺寸的东西真的很困惑，任何人都可以帮助了解如何获得真正的设备大小的模拟器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:31:31.907

终于解决了，我改变了 hw.lcd.density 问题就解决了:)

# git - 如何使用 Web Hooks 镜像 Github 存储库？

> ID：12070582
> 
> 赞同：2
> 
> 时间：2012-08-22T09:55:01.270
> 
> 标签：git, github, gitolite

我想使用 Web Hooks 或其他实时机制在我的服务器上镜像 Github 存储库。我不想使用轮询。

有没有现成的软件？如果没有，你会怎么做？

服务器已`gitolite`安装。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:23:36.120

Gitolite 是一种[授权机制](http://sitaramc.github.com/gitolite/auth.html)，如果您直接在本地 repo 服务器上获取新的提交引用，则可能不会涉及：您的监控过程可以直接将所述新提交推送到该服务器上的本地 repo，而无需使用受控的 ssh 地址由 gitolite。

如果您激活 [GitHub Post-Receive Hooks](https://help.github.com/articles/post-receive-hooks)，您可以注册您的服务器 httpd 地址，并使用其中引用的新提交侦听任何 POST。
当您收到这样的帖子时，您可以`git fetch`更新服务器上的本地裸仓库。

# gpl - 我可以只链接到 GPL 的 FSF 副本吗？

> ID：12070588
> 
> 赞同：4
> 
> 时间：2012-08-22T09:55:19.570
> 
> 标签：gpl

我有一些我想在 GPL v3 下获得许可的代码。FSF 建议的标题是：

```
This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>. 
```

“你应该已经收到了一份 GNU 通用公共许可证的副本以及这个程序”这句话让我大吃一惊。之后有一个指向他们的许可证副本的链接，我想让它构成我项目的许可证文本（这是一个单文件项目，我不想添加另一个文件许可证文本）。我是否因为没有准确的许可证文本副本而违反了任何规定？“应该”究竟有什么法律效力？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T15:33:12.543

您写道，您的项目只是一个文件。在这种情况下 - 正如您自己所见 - 将整个许可证文本放在辅助文件中可能有点令人沮丧。

但是 GNU GPL**要求**您传递许可证文本。GPL 常见问题解答中也涵盖了这一点：

*   [为什么 GPL 要求在程序的每个副本中都包含 GPL 的副本？](http://www.gnu.org/licenses/gpl-faq.html#WhyMustIInclude)

常见问题解答继续针对您的应用程序可能出现的情况，如果它只有大约 200 到 300 行，可能：

*   [如果工作不是很长怎么办？](http://www.gnu.org/licenses/gpl-faq.html#WhatIfWorkIsShort)

有些人可能会感到惊讶，但 GNU 实际上[建议](http://www.gnu.org/licenses/license-recommendations.html#software)在这种情况下使用[Apache License 2.0 (Apache-2.0) 。](http://spdx.org/licenses/Apache-2.0)

因此，您可能仍然会问您为什么他们在该车牌标题建议中提供链接。好吧，可悲的事实是——而且我已经看到，即使是在杰出的项目中——一些开发人员认为没有必要将许可证文本与软件一起传递（即使许可证也有相反的规定！）。这导致用户获得软件但无法轻松了解他们的权利的情况。因此，出于实际原因，在车牌中放置了一个 URI，以便这些用户可以快速了解他们应该已经使用该软件获得了许可证文本，然后可以戳分销商；）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T17:04:22.573

您是代码的版权所有者和许可人，您可以以任何方式处理此代码。您可以更改最后一段以仅将使用指向许可证。

最后，唯一可以抱怨它的人是版权所有者，那就是你。

# android - android中布局中的渐变颜色

> ID：12070592
> 
> 赞同：1
> 
> 时间：2012-08-22T09:55:33.610
> 
> 标签：android, android-layout

我想知道如何在布局中设置渐变颜色。我想从左边的深绿色开始，到中心变浅，从中心到右边，颜色应该变深。我怎么能这样做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T09:59:58.737

创建一个选择器文件并放入drawable文件夹。

```
<?xml version="1.0" encoding="utf-8"?>
    <shape>
        <gradient
            android:angle="90"
            android:startColor="#FFFF0000"
            android:centerColor="#0000FFFF" 
            android:endColor="#FF00FF00"
            android:type="linear" />
    </shape> 
```

根据您的要求更改颜色。也可以根据您的要求更改天使。

[在这里](http://www.dibbus.com/2011/02/gradient-buttons-for-android/)查看更多详细信息。从这里选择您的绿色代码。 [http://www.december.com/html/spec/color2.html](http://www.december.com/html/spec/color2.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T10:00:47.343

您必须创建一个可绘制的形状，如下所示：

[http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)

这是一个例子：

```
<?xml version="1.0" encoding="utf-8"?>
<shape
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >
    <gradient
        android:angle="90"
        android:endColor="#000"
        android:startColor="#fff"
        android:type="linear/>
</shape> 
```

# c# - 在 Windows 窗体应用程序的文本字段中输入特定学生 ID 时，我需要显示学生的信息

> ID：12070593
> 
> 赞同：-3
> 
> 时间：2012-08-22T09:55:33.250
> 
> 标签：c#, ado.net

```
command.CommandText = "SELECT * FROM student details WHERE StudentID=@StudentID"; 
```

如何修改它以在上述程序语句中包含用户输入的学生 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:58:09.083

如果我理解正确，请使用：

```
command.Parameters.AddWithValue("@StudentID", int.Parse(yourTextBox.Text)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T09:58:20.393

我猜你想要这个（虽然你的问题有点含糊）：

```
int studentId;
if (int.TryParse(textbox1.Text, out studentId)) {
    command.Parameters.AddWithValue("@StudentID", studentId);
} 
```

# algorithm - NQueen真的是在倒退吗？

> ID：12070601
> 
> 赞同：1
> 
> 时间：2012-08-22T09:55:55.657
> 
> 标签：algorithm, data-structures, backtracking, n-queens

[NQueen 问题](http://en.wikipedia.org/wiki/Eight_queens_puzzle)是[回溯](http://en.wikipedia.org/wiki/Backtracking)的一个著名例子。从[源代码](http://www.geeksforgeeks.org/archives/13387)阅读后，我尝试了以下代码片段。

```
int isSafe(int k,int i,int *x)
{
    int j;
    for(j=0;j<k;j++)
    {
              //old queen is placed at jth row of x[j] column
              //new queen to be placed at kth row of ith column
            if(i==x[j] || abs(k-j)==abs(i-x[j]))
                    return 0;
    }
    return 1;
}

int Nqueen(int k, int* sol, int N)
{
    int col;
    if( k == N )
    {
            printSol(sol,N);
            return 1;
    }
    else
    {
            for(col = 1;col <= N; col++)  //determines appropriate column number of the kth queen to be placed
            {
                    if( isSafe(k,col,sol) )
                    {
                            sol[k] = col;
                            if( Nqueen(k+1, sol, N) )
                                    return 1;
                            sol[k] = 0; // backtrack
                    }
            }
            return 0; // solution not possible
    }
} 
```

我得到的[输出](http://ideone.com/tjo69)为：

```
1 5 8 6 3 7 2 4 
```

但是，当我评论回溯的语句时，我会毫无问题地得到相同的[输出。](http://ideone.com/Rkfl5)

```
int Nqueen(int k, int* sol, int N)
{
    int col;
    if( k == N )
    {
            printSol(sol,N);
            return 1;
    }
    else
    {
            for(col = 1;col <= N; col++)  //determines appropriate column number of the kth queen to be placed
            {
                    if( isSafe(k,col,sol) )
                    {
                            sol[k] = col;
                            if( Nqueen(k+1, sol, N) )
                                    return 1;
                            // sol[k] = 0; <-------------- Notice this change
                    }
            }
            return 0;
    }
} 
```

究竟是什么让 NQueen 成为回溯问题？

这不是一个简单的递归方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T10:06:44.360

这`sol[k] = 0`不是回溯部分。回溯是在递归调用中完成的：`if( Nqueen(k+1, sol, N) )`.

回溯的想法是一种详尽的搜索——你试图搜索所有的可能性，直到找到一个。在这里，您正在尝试棋盘中所有可能的皇后分配，如果仍然安全，请“继续”。如果你发现它不安全，你会从递归中返回失败，并尝试下一个选项。

我相信注释掉的行只确保如果没有找到解决方案，则结果数组是`[0,...,0]`，而不是一些无意义的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T07:12:14.373

回溯问题是一种编程范式，您可以在其中尝试每一种可能的组合。然后对于每个组合，您检查到目前为止的组合是否正确。以下是 N（或 8）皇后问题的几个步骤。

1.  从第 0 行开始，将第 1 个皇后放置在第 0 列。
2.  现在将第二个皇后放在第 1 行和第 0 列。
3.  检查位置是否安全
4.  如果不安全，请在第 1 行第 1 列放置第二个皇后。
5.  不安全，现在将第二个皇后放在第 1 行第 2 列。

通过在每个可能的列上放置女王并检查它是否安全，这样继续下去。您可以省略明显的错误条件，例如您不会将 2 个皇后放在同一行。下面是我的 8 皇后问题代码，打印所有可能的解决方案。

```
#include<stdio.h>

int abs(int a){
        return a>0? a : -a;
}

int isSafe(int col[],int row){
        int row2,col2,i,yDiff,xDiff;
                if(row == 0) return 1;

    for(row2=0;row2<row;row2++){
                    if(col[row2] == col[row])
                            return 0;

                    xDiff = col[row2] - col[row];
                    xDiff = abs(xDiff);
                    yDiff = row - row2;
                    if(xDiff == yDiff)
                                    return 0;
            }

    return 1; 
```

}

```
int Nqueen(int col[],int n, int row){
        int i;
        if(row==n){
                printf("\n");
                for(i=0;i<n;i++)
                        printf("%d ",col[i]+1);

        }else{
                for(i=0;i<n;i++){
                    col[row] = i;
                    if(isSafe(col,row)){
                            queen(col,n,row+1);
                    }

            }
    } 
```

}

```
int main(){
        int col[8];
        queen(col,8,0);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T10:09:09.047

首先，您确实需要了解算法（这将告诉您将这些内容注释掉并不重要）。正如您所注意到的，此算法是递归的。这是回溯，因为你

*   将第 k 个皇后设置为一个位置
*   探索皇后 k+1,k+2,... 的可能位置
*   然后你回到第k个皇后，把它放在别的地方，然后重复

看，在第 3 步中，我们“返回”到第 k 个皇后。这就是我如何解释为什么它被称为回溯。

# javascript - 在不重定向页面的情况下更新表

> ID：12070602
> 
> 赞同：-1
> 
> 时间：2012-08-22T09:55:55.640
> 
> 标签：javascript, jsp, jquery, servlets

如何在不使用 javascript 或 jquery 重定向页面的情况下更新表这是我的脚本

```
 function doubleclick(table,id1)
        {
            table.innerHTML="<input type=text name=tab onBlur=\"javascript:submitNewName(this,'"+id1+"');\" value=\""+table.innerHTML+"\">";
            table.firstChild.focus();

        }
        function submitNewName(text,id2)
        {
            text.parentNode.innerHTML=text.value;
        $.ajax({
            url: 'update',
            data:{text1:text.value,id:id2},
            type:"POST",
            dataType:"json",
            error:function(data)
            {
                alert('error')
            },
            success: function(data) 
            {
               // alert('updated!')
            }
        });  
        } 
```

**html**

```
<td onDblclick="javascript:doubleclick(this,${item.id});">${item.filedesc}</td> 
```

当我双击表格时，列内将出现一个编辑框，当文本框失去焦点（通过单击表格外部）时调用 onblur 事件，当它失去焦点时，应调用更新 servlet 而无需重定向页面。更新过程应该在后台发生

**编辑**

抱歉编辑迟了。对我的脚本进行了一些编辑。我已经发布了我完整的工作 html 和 javascript 代码。一个月前解决了这个问题。用户请检查代码并建议是否可以进一步改进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:10:46.800

您可以使用 jquery 的 ajax 来实现这一点。您可以传递一个回调方法，以便在真正的更新完成时通知您。

这是一个表格单元格，它可以是任何东西，我在这个例子中使用了 div：

```
<div id="table-cell" editing="0">Value</div> 
```

js应该是这样的

```
$('#table-cell').dblclick(function(){
    if ($(this).attr('editing') == '0')
    {
        // only trigger this when the cell is not in edit mode
        $(this).attr('editing',1);

        // show the input
        var input = $('<input type="text" value="'+$(this).html()+'">');
        $(this).html('');
        $(this).append(input);

        // bind blur event to input
        input.blur(function(){

            // update value from input to the table cell
            var value = $(this).val()
            $(this).parent().html(value);
            $(this).parent().attr('editing',0);

            // send the data to the server for update
            $.ajax({
                url: '/save_data/',
                data: {data:value},
                type:"POST",
                dataType:"json",
                error:function(data){alert('error')},
                success: function(data) {
                    alert('updated!')
                }
            });
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T10:00:11.607

使用 $.post 速记方法。

看看[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T10:01:44.377

看看 jQuery 中的 $.ajax() 方法。在不触发页面刷新的情况下检索或发布内容非常简单。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# c# - 带参数的灯开关查询

> ID：12070603
> 
> 赞同：0
> 
> 时间：2012-08-22T09:56:00.020
> 
> 标签：c#, silverlight, parameters, visual-studio-lightswitch

我有一个列表，我可以在其中选择一个项目。基于此项目的某些字段，我想过滤另一个控件中的选择列表。

像这样的东西：

`Select * from choiceItems Where choiceItem.ID = (Select ID from anotherTable where anotherTable.ID = selectedItem.ID)`

问题是可能有更多的 ID 返回。也许我想要 ID = {3,2,1} 等的所有选择项。

我无法在服务器上预处理查询，因为我的参数取决于列表中的选定项目。如果我尝试在查询编辑器中过滤结果，我只能指定只能是单个值的参数（fe ID=2）。

我如何在 Silverlight 中做到这一点？

另外，另一个不相关的小问题：是否可以在 lightswitch 中加载自定义控件时显示等待光标（现在它只显示灰色区域，直到加载数据和控件）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:32:46.703

You should be able to preprocess the query even if the parameter for the query is selected from a list. You can then use LINQ to return a subset of your `choiceItems` or, based on the selected parameter, skip the LINQ which would return all of the `choiceItems`.

I give a detailed example of doing this in my answer to the SO question:

[Is there a way to create a search screen in Lightswitch based on a dropdown](https://stackoverflow.com/questions/11485962/is-there-a-way-to-create-a-search-screen-in-lightswitch-based-on-a-dropdown/11509644#11509644)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:23:32.213

> Select * from choiceItems Where choiceItem.ID = (Select ID from anotherTable where anotherTable.ID = selectedItem.ID)

这是一个多对多的场景，你需要使用查询参数制作一个 WCF RIA 服务，很多工作只是为了过滤。另一种方法是使这些表相关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-17T20:05:35.613

没有确切的语法，但应该是这样的：

首先使用 LINQ 获取 ID

```
var FilterOnThisId=this.Query1.Where(x=>x.ID==selectedItem.ID).FirstOrDefault(); 
```

然后查询你想要的colleciton

```
var filtedItems=this.Query2.Where(x=>x.ID==FilterOnThisId); 
```

# google-maps-api-3 - QWebKit 不处理 Google 地图的 click 和 dblclick

> ID：12070604
> 
> 赞同：0
> 
> 时间：2012-08-22T09:56:02.647
> 
> 标签：google-maps-api-3, qwebview, qwebkit

我只是在我的 index.html 中从谷歌地图 API 复制/粘贴了这段代码

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?key=MYKEY&sensor=false">
    </script>
    <script type="text/javascript">
      function initialize() {
        var mapOptions = {
          center: new google.maps.LatLng(-34.397, 150.644),
          zoom: 8,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);
      }
    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:100%"></div>
  </body>
</html> 
```

在像 chrome 这样的浏览器中，一切都很好。我的意思是当我双击地图时它会放大。当我拖动地图时，地图的中心点会发生变化。但是当我在 QWebView 对象中加载这个文件时，地图会加载但 QWebView 不注意点击和双击！

# php - Ajax 更新删除

> ID：12070607
> 
> 赞同：1
> 
> 时间：2012-08-22T09:56:11.083
> 
> 标签：php, jquery, html, ajax

我有一个通过 ajax/jquery 和 php 填充数据的 html 表。到目前为止，我已经为网站添加了插入/选择功能。

现在我想添加更新/删除。我正在考虑使用 value=table_column_id 向每个结果行添加按钮，然后在用户单击“EDIT”按钮时填充空文本框，或者在用户单击“DELETE”按钮时抛出一个要求确认的对话框。

这是一个好主意还是有更好的方法？如果是这样，你能解释一下如何

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:14:30.010

有几个功能强大、广为人知且非常出色的插件可以为您处理此类事情。看一眼：

*   [数据表](http://www.datatables.net)
*   [jqGrid](http://www.trirand.com)

享受。

# android - 如何在android应用程序中捕获当前意图

> ID：12070611
> 
> 赞同：0
> 
> 时间：2012-08-22T09:56:13.360
> 
> 标签：android, android-intent

我已经为我的 android 应用程序使用了 Intent Filter，并且我的应用程序在收到意图时运行。我想将**收到的意图**发送到我的代码中具有意图类型参数的方法之一。如何从收到的意图（运行我的应用程序）中创建一个对象并发送到我的代码中提到的方法。如果有人可以提供帮助，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:59:07.163

在`onCreate()`使用中

```
Intent intent = getIntent(); 
```

这将返回为启动 Activity 而发送的 Intent。

# php - ValidForm Builder - 处理提交的数据

> ID：12070619
> 
> 赞同：0
> 
> 时间：2012-08-22T09:56:41.457
> 
> 标签：php, validation

**NVM 我现在已经想通了，原来我只是完全智障......**

我一直在查看此 ValidForm Builder 的教程。我似乎找不到任何地方解释如何仅获取纯提交的数据。我不在乎数据是否存储在数组中，因为它们可以被操纵。我唯一能看到的是，当提交表单时，它会将数据存储在某种形式的电子邮件友好 html 代码中。

```
$objForm = new ValidForm("newsletterForm", "");
$objForm->addField("name", "Your name", VFORM_STRING, 
    array(
        "maxLength" => 255, 
        "required" => TRUE
     ), 
array(
    "maxLength" => "Your input is too long. A maximum of %s characters is OK.", 
    "required" => "This field is required.", 
    "type" => "Enter only letters and spaces."
     )
);
 $objForm->addField("email", "Email address", VFORM_EMAIL, 
    array(
         "maxLength" => 255, 
         "required" => TRUE
     ), 
     array(
        "maxLength" => "Your input is too long. A maximum of %s characters is OK.", 
        "required" => "This field is required.", 
        "type" => "Use the format name@domain.com"
     ), array(
         "tip" => "name@domain.com"
    )
);

 $objForm->setMainAlert("One or more errors occurred. Check the marked fields and try    again.");
$objForm->setSubmitLabel("Send");

$strOutput = "";

if ($objForm->isSubmitted() && $objForm->isValid()) {
    //Do something php here if the form is sumbitted correct
    //*** Set the output to a friendly thank you note.
    $strOutput = "Thank you for your interest.";
    } else {
    //*** The form has not been submitted or is not valid.
    $strOutput = $objForm->toHtml();
 } 
```

基本上我只需要原始数据，这样我就可以将它存储到我的数据库中......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T16:19:53.987

我是 ValidForm Builder 的开发者之一。让我帮你解决这个问题。

在 isSubmitted && isValid 语句中，您可以这样做：

```
if ($objForm->isSubmitted() && $objForm->isValid()) {

    // You can store it in a local variable or just use the result of getValue() directly.
    $strEmail = $objForm->getValidField("email")->getValue();

} 
```

事实上，如果您想直接将值作为电子邮件直接发布，我们也有一些内置支持（因为大多数网站表单都是联系表单，我们认为这会很方便）：

```
if ($objForm->isSubmitted() && $objForm->isValid()) {

    // Use strEmailBody as the HTML content of your e-mail message or wrap some fancy
    // styling around it before sending.
    $strEmailBody = $objForm->valuesAsHtml();

} 
```

此外，不建议在数据库中保存“原始”发布数据。这是 ValidForm Builder 的主要目的之一：通过验证用户输入来防止 SQL 注入。众所周知：用户输入是邪恶的。

# php - 如何放置符号'？和'='从变量到url？

> ID：12070621
> 
> 赞同：0
> 
> 时间：2012-08-22T09:56:47.820
> 
> 标签：php, url

在 php 中，我有函数 get_query_string() 返回字符串变量。例如

```
$end_of_url = get_query_string();
print $end_of_url; 
```

会打印我

```
?id=192 
```

我需要把它放在网址的末尾，但是当我附加它时，我有类似的网址

[http://mysite.com/device-information%3Fid%3D192](http://mysite.com/device-information%3Fid%3D192)

问号 (?) 在 ascii 值**%3F中替换，在****%3D**中替换等号 (=) 。

如何将问号和等号正确放入url？

**添加的代码：**

```
 <div id="navigationLang" class="clearfix" style="margin-right: 60px;"> 
            <?php 
                $path = $_GET['q'];
                $languages = language_list('enabled');
                $links = array();
                foreach ($languages[1] as $language) {
                    $links[$language->language] = array(
                        'href'       => $path.get_query_string(),
                        'title'      => ucfirst($language->prefix),
                        'language'   => $language,
                        'attributes' => array('class' => 'language-link'),
                    );
                } 
```

* * *

```
function get_query_string(){
    $request_url = apache_getenv("HTTP_HOST") . apache_getenv("REQUEST_URI");
    $request_url = "http://".$request_url;
    $parts = parse_url($request_url);
    $end_of_url = $parts['query'];
    if ($end_of_url != "") {
        $end_of_url = '?'.$parts['query'];
        $a = htmlentities($end_of_url);
        $b = html_entity_decode($a);
        return $b;
    }
    else {return ""; }
} 
```

主要问题是打印/回显工作正常，但是当我在网站链接中测试它时，链接带有 ascii 符号（%3F 和 %3D），我需要问号和等号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:59:28.927

那是因为你`get_query_string()`是 urlencoding。尝试：

```
print 'http://example.com/'.urldecode($end_of_url); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:55:13.730

问题由此解决：

```
$id = $_GET['id'];  // here i get id value (in example it's  192)

 $links[$language->language] = array(
                        'href'       => $path,
                        'title'      => ucfirst($language->prefix),
                        'language'   => $language,
                        'attributes' => array('class' => 'language-link'),
                        'query' => array('id' => $id),  // here i create end of url

                    ); 
```

要点是在drupal中我应该传递所有东西（？id = 192）而不是href，而是添加'query'参数，即数组。自动添加所有问号和等号，所以我得到了正确的链接

```
?id=192 
```

其中 192 是上一个 url 的变量。

# playframework-2.0 - Play框架模板编译错误

> ID：12070625
> 
> 赞同：5
> 
> 时间：2012-08-22T09:56:58.087
> 
> 标签：playframework-2.0

嗨，我正在尝试显示一个表单并按照正确的教程进行操作。但是我收到编译错误，这是..

方法的缺少参数以对象形式应用；如果您想将其视为部分应用的函数，请使用 `_' 遵循此方法

我的模板看起来像这样

```
@main("Example"){
    <h1>SignUp Form</h1>

    @helper.form(action = routes.Application.submit()) 
    {
        @helper.inputText(signupform("name"))
        @helper.inputText(signupform("password"))
        <input type="submit" value="Signup" />
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-22T11:03:18.153

你的牙套错了...

```
@helper.form(action = routes.Application.submit()) {
  @helper.inputText(signupform("name"))
  @helper.inputText(signupform("password"))
  <input type="submit" value="Signup" />
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-21T09:27:37.457

未定义注册表单。在第一行使用以下格式来定义注册表格：

```
@(signupform: Form[_]) 
```

# git - 使用 `git pull -s ours` 时，如何从拉取的“他们的”分支中保留一个文件的冲突更改？

> ID：12070628
> 
> 赞同：0
> 
> 时间：2012-08-22T09:56:58.973
> 
> 标签：git, integration

我必须从开发人员那里得到一些改变。因为我不想执行手动合并，所以我这样做：

```
git pull -s ours origin developers_branch 
```

问题是有时我需要对特定文件进行所有更改（即，如果存在冲突则进行合并）。

所以问题是如何获得除特定文件之外的所有更改（忽略对我有利的新兴冲突）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:26:48.043

只需使用`--no-commit`选项，然后进行适当的更改（撤消文件中的更改等），然后`git commit`.

此外，值得一提的是一种更好的方法：将更改拆分为不同的提交/分支：哪些需要合并，哪些不需要。之后，您可以轻松地进行合并。

# javascript - 如何在html代码中使用json文件

> ID：12070631
> 
> 赞同：61
> 
> 时间：2012-08-22T09:57:04.953
> 
> 标签：javascript, jquery, html, json, get

我有 json 文件`mydata.json`，这个文件中有一些 json 编码的数据。

我想在文件中获取这些数据`index.html`并在 JavaScript 中处理这些数据。但是不知道如何在 .html 文件中连接.json 文件？

请告诉我。这是我的**json**文件：

```
{
    "items": [
        {
            "movieID": "65086",
            "title": "The Woman in Black",
            "poster": "/kArMj2qsOnpxBCpSa3RQ0XemUiX.jpg"
        },
        {
            "movieID": "76726",
            "title": "Chronicle",
            "poster": "/853mMoSc5d6CH8uAV9Yq0iHfjor.jpg"
        }
    ]
} 
```

认为我正在从服务器获取 json 文件，如何在我的 html 中使用该文件，以便我可以在 html 页面的表格中显示数据。我正在使用 JavaScript 来解析 json 文件。我是这个领域的新手。请帮忙。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-08-23T12:03:36.083

```
<html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"> </script>

<script>

    $(function() {

   var people = [];

   $.getJSON('people.json', function(data) {
       $.each(data.person, function(i, f) {
          var tblRow = "<tr>" + "<td>" + f.firstName + "</td>" +
           "<td>" + f.lastName + "</td>" + "<td>" + f.job + "</td>" + "<td>" + f.roll + "</td>" + "</tr>"
           $(tblRow).appendTo("#userdata tbody");
     });

   });

});
</script>
</head>

<body>

<div class="wrapper">
<div class="profile">
   <table id= "userdata" border="2">
  <thead>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Email Address</th>
            <th>City</th>
        </thead>
      <tbody>

       </tbody>
   </table>

</div>
</div>

</body>
</html> 
```

我的`JSON`文件：

```
{
   "person": [
       {
           "firstName": "Clark",
           "lastName": "Kent",
           "job": "Reporter",
           "roll": 20
       },
       {
           "firstName": "Bruce",
           "lastName": "Wayne",
           "job": "Playboy",
           "roll": 30
       },
       {
           "firstName": "Peter",
           "lastName": "Parker",
           "job": "Photographer",
           "roll": 40
       }
   ]
} 
```

经过一天的工作，我成功地将`JSON`文件集成到表格中！！！`HTML`

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-08-23T05:19:51.267

使用 jQuery 的[$.getJSON](http://api.jquery.com/jQuery.getJSON/)

```
$.getJSON('mydata.json', function(data) {
    //do stuff with your data here
}); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-07-31T19:53:57.437

**您可以使用 JavaScript，例如...** 只需提供 json 文件的正确路径...

```
<!doctype html>
<html>
    <head>
        <script type="text/javascript" src="abc.json"></script>
        <script type="text/javascript" >
            function load() {
                var mydata = JSON.parse(data);
                alert(mydata.length);

                var div = document.getElementById('data');

                for(var i = 0;i < mydata.length; i++)
                {
                    div.innerHTML = div.innerHTML + "<p class='inner' id="+i+">"+ mydata[i].name +"</p>" + "<br>";
                }
            }
        </script>
    </head>
    <body onload="load()">
        <div id="data">

        </div>
    </body>
</html> 
```

只需获取数据并将其附加到 div... 最初在警报中打印长度。

**这是我的 Json 文件：abc.json**

```
data = '[{"name" : "Riyaz"},{"name" : "Javed"},{"name" : "Arun"},{"name" : "Sunil"},{"name" : "Rahul"},{"name" : "Anita"}]'; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2022-01-20T04:23:44.447

但是，您可以轻松地做到这一点，而无需像下面那样使用 Jquery 或 AJAX。

**索引.html**

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Title</title>
</head>
<body>
<div id="myData"></div>
<script type="text/javascript">
    fetch('data.json')
        .then(function (response) {
            return response.json();
        })
        .then(function (data) {
            appendData(data);
        })
        .catch(function (err) {
            console.log('error: ' + err);
        });

    function appendData(data) {
        let mainContainer = document.getElementById("myData");
        for (let i = 0; i < data.length; i++) {
            let div = document.createElement("div");
            div.innerHTML = 'Name: ' + data[i].firstName + ' ' + data[i].lastName;
            mainContainer.appendChild(div);
        }
    }
</script>
</body>
</html> 
```

**数据.json**

```
[
  {
    "id": "1",
    "firstName": "John",
    "lastName": "Doe"
  },
  {
    "id": "2",
    "firstName": "Mary",
    "lastName": "Peterson"
  },
  {
    "id": "3",
    "firstName": "George",
    "lastName": "Hansen"
  }
] 
```

# objective-c - ObjC：对象返回空描述？

> ID：12070635
> 
> 赞同：7
> 
> 时间：2012-08-22T09:57:23.610
> 
> 标签：objective-c

我的代码正在读取如下键/值对列表：

```
A:nodeAbc
...
Q:node2
R:
T:node3
... 
```

每对使用 NSString:componentsSeparatedByString 分割：

```
NSArray *kv = [@"R:" componentsSeparatedByString:@":"]; 
```

在上面的列表示例中，R 没有匹配值。当我要求打印时，这是我得到的：

(lldb) po [kv objectAtIndex:1] (id) $33 = 0x00007fff77a888e0

我怎样才能识别这个？

```
if ([kv objectAtIndex:1]) // returns YES 
```

我希望它被视为零，怎么办？谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-22T10:10:45.117

它不是零，它是一个空字符串（阅读文档，那里有说明）。你想要的是

```
if ([[kv objectAtIndex:1] length] > 0) 
```

# ios - iOS - 如何覆盖单页 PDF 文件？

> ID：12070639
> 
> 赞同：2
> 
> 时间：2012-08-22T09:57:39.383
> 
> 标签：ios, pdf

我想覆盖现有的 PDF 文件，而不是创建一个新文件。我不想绘制整个 PDF 文件，如果 PDF 文件有一百页，我只想绘制一页。

实际上，我想在 PDF 文件的页面上放置一些图像。如果用户点击保存按钮，它将被覆盖。不可能吗？有没有框架或sdk？

感谢您的任何回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T10:16:49.963

支持 iPhone 中的 PDF 操作。苹果的文档如下[http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_pdf/dq_pdf.html](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_pdf/dq_pdf.html)

```
-(void)createPDFFileFromSelectedPageNumber:(int)selectedPageNumber:(NSString*)fileName{
NSArray *arrayPaths = NSSearchPathForDirectoriesInDomains( NSDocumentDirectory, NSUserDomainMask, YES);
NSString *path = [arrayPaths objectAtIndex:0];

NSString *outpath = [[NSString alloc]initWithFormat:@"%@/output.pdf",path];

UIGraphicsBeginPDFContextToFile(outpath, CGRectZero, nil);
UIGraphicsBeginPDFPageWithInfo(CGRectMake(0, 0, 612, 792), nil);

NSURL *url = [[NSURL alloc] initFileURLWithPath:fileName];

CGPDFDocumentRef originalPDF = CGPDFDocumentCreateWithURL((__bridge CFURLRef)url);

CGPDFPageRef pdfPage = CGPDFDocumentGetPage(originalPDF, selectedPageNumber);

CGSize size = CGSizeMake(612.0, 792.0);
CGRect outRect = CGRectMake(0, 0, 612.0, 792.0);

UIGraphicsBeginImageContext(size);

CGContextRef context = UIGraphicsGetCurrentContext();

CGAffineTransform pdfTransform = CGPDFPageGetDrawingTransform(pdfPage, kCGPDFMediaBox, outRect, 0, true);
CGContextConcatCTM(context, pdfTransform);

CGContextDrawPDFPage(context, pdfPage);

UIImage *output = UIGraphicsGetImageFromCurrentImageContext();

CGContextSaveGState (context);

UIGraphicsEndImageContext();

[output drawInRect:outRect];

UIGraphicsEndPDFContext();} 
```

* * *

将源 PDF 文件的 filePath 和 pageNumber 传递给函数将为您提供具有单页的新 PDF。您可以根据您的要求进行进一步的增强。希望至少这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T08:25:19.133

直到现在，iOS 还没有提供编辑整个 PDF 文件的方法。喜欢[这个问题](https://stackoverflow.com/questions/5878538/cannot-create-pdf-document-with-400-pages-on-ios)，我以为他也想修改其中的一个页面。

第三方库会更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T06:54:20.727

非常相似：[在 iOS 上合并 PDF 文件](https://stackoverflow.com/questions/6553540/merge-pdf-files-on-ios)

无法重新打开并继续编辑 PDF 文件。只需再次阅读和重绘整个 PDF。

# wordpress - 导入后wordpress缩略图不会显示

> ID：12070646
> 
> 赞同：1
> 
> 时间：2012-08-22T09:57:54.967
> 
> 标签：wordpress, thumbnails

我一直在将我的`wp site` **帖子**导入另一个域，但帖子`thumbnails`不会显示。
我想在数据库中手动更正这种关系，但我不太了解结构。
有没有人能解释一下的秘密`_thumbnail_id`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:38:42.030

旧的 url 可能嵌入在数据库中，因此您可以[使用此工具](http://interconnectit.com/124/search-and-replace-for-wordpress-databases/)替换：

```
http://your-old-url-exactly-how-it-was/ 
```

和

```
http://www.your-new-url.com/ 
```

然后会显示您的图像，因为它们位于不同的域中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T10:03:25.173

您是否已将 wp_home 和 site_url 更改为您的新域？您可以通过数据库（在 wp_options 中找到）表来执行此操作，或者在 wp-config.php（在 wp-installs 根目录中找到）中定义值，如下所示：

```
define('WP_SITEURL', 'http://newaddress.com');
define('WP_HOME', 'http://newaddress.com'); 
```

如果这没有帮助，您可以使用 Wordpress 插件搜索和替换，将旧网站的实例替换为新网站。

# ios - 是否可以在静态方法中 OCMock 类调用？

> ID：12070652
> 
> 赞同：0
> 
> 时间：2012-08-22T09:58:17.273
> 
> 标签：ios, unit-testing, mocking, ocunit, ocmock

我刚刚开始使用 OCMock，所以请耐心等待 - 我一直在查看文档和大量示例，但还没有找到明确的答案 - 是否可以在静态方法中模拟 init 调用，例如：

```
+ (NSString *)addHeaderToRequest:(NSString *)request namespace:(NSString *)namespace
{        
    CTTeleInfo *netInfo = [[CTTeleInfo alloc] init];
    CTCarrier *carrier = [netInfo subscriberCell;
    NSString *mobileNetwork = [carrier carrierName];
    if ( mobileNetwork == nil )
        mobileNetwork = @"Unknown";

} 
```

是否可以在不更改代码的情况下模拟 CTTeleInfo 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:20:31.373

这不是 OCMock 可以帮助您解决的问题。即使它可以模拟它还不能模拟的类方法，那么您仍然必须将 netInfo 对象的创建提取到模拟可以覆盖的方法中。

如果您可以更改代码，那么明显的解决方案是：

```
+ (NSString *)addHeaderToRequest:(NSString *)request namespace:(NSString *)namespace
{   
    [self addHeaderToRequest:request namespace:namespace carrier:[[CTTeleInfo alloc] init]];
}

+ (NSString *)addHeaderToRequest:(NSString *)request namespace:(NSString *)namespace carrier:(CTCarrier *)carrier
{ 
    NSString *mobileNetwork = [carrier carrierName];
    if ( mobileNetwork == nil )
        mobileNetwork = @"Unknown";
} 
```

# sql - 拆分表以优化删除持续时间

> ID：12070656
> 
> 赞同：0
> 
> 时间：2012-08-22T09:58:32.033
> 
> 标签：sql

`invoice_data`考虑一个包含 12 年以上发票数据的表格。这些数据每天都会被加载到一个多维数据集中。每次加载，最新的 2 年都会被删除，`invoice_data`最近 2 年的数据会再次被实时系统导入。（我们这样做是因为旧数据集中的值也可能发生变化）

该`delete`语句大约需要 15 分钟，但我们不能使用 a `truncate`，因为我们必须加载整个 12 年，这将花费更长的时间。

**问题：**

`invoice_dat`像这样拆分大桌子是不是一个好设计

*   `invoice_data_old`， 其中包含`years < actual year - 2`
*   `invoice_data_new`， 其中包含 `years >= actual year -2`

这样一来，我们可以使用`truncate`on`invoice_data_new`而不需要使用`delete`语句？

有没有更好的方法？

**我正在使用 SQL SERVER 2008，但我认为这是一个普遍的问题。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:07:00.010

在 Oracle 中，您将使用分区表（按年份分区）。那时你可以

*   将数据加载到两个新表中
*   使用分区交换将现有分区与新数据交换
*   丢弃旧数据

分区的交换非常快。显然 SQL Server 有一些非常相似的东西 - 请参阅[SQL Server 中分区交换的 SO 问题](https://stackoverflow.com/questions/2011468/partition-exchange-as-publishing-technique-in-sql-server)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:11:49.530

我认为解决这个问题的最佳方法是“水平分区”。基本上，您创建了一个数据滑动窗口——随着新时期的数据在最后添加，旧数据在开始时被删除。

在 4 年的过程中，您可能有 48 个分区（每月一个）。

这种方法的最大优点是 SQL Server 知道数据是以这种方式分区的，并且可以自动优化查询以仅使用具有相关数据的分区 - 即当您`select`从上个月获取数据时，SQL Server 将只知道搜索一个分区，或 1/48 的数据。

另一个重要方面是删除最旧的分区成为元数据操作，因此不会锁定任何内容。

这种方法的缺点是在设置和维护方面确实需要更多的努力（除非您编写一些自动化的月末脚本，这可能是一个不平凡的练习）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T10:12:01.293

*   按天对表进行分区
*   删除过去两年的分区
*   导入新数据

# php - PHP：连接到可用的远程数据库，从数据库中检索数据并将该数据填充到 html 表单中，并将表单数据打印为 pdf

> ID：12070659
> 
> 赞同：0
> 
> 时间：2012-08-22T09:58:38.227
> 
> 标签：php, html, sql-server-2005, tcpdf

我创建了一个包含 20 多个字段的 html 表单，并希望从表单中打印数据或使用 php 打印输出的 pdf。

但是大多数字段数据都在我已经可用的 sql server 2005 数据库中可用。但我无法访问该数据库。我需要访问它。访问数据库后，我需要使用输入到“id”和“日期”字段中的数据从数据库中检索数据作为“id”和“日期”。（示例查询：Select * from tablename where id=" 123" 和 date="12/08/2012" ; 或类似的东西）之后，我需要将这些数据推送到我的 html 表单中的相关字段中。输入所有内容后，一旦我单击提交。我需要它将所有这些信息显示为浏览器中的表格或 pdf，以便我可以将其打印出来。我阅读了 tcpdf，但无法理解它。希望你能帮忙。

谁能帮我这个？

请记住，我是编码、php 和数据库的新手。我对html有一点经验。但我不擅长高级的东西。

如果你能用一个与我类似的示例程序来回答我，我会很高兴的，其中包含所有必要的元素。先感谢您！我希望我没有要求太多。

```
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>TEST PHP DB</title>
        <?php
        if (!isset($_POST=""))
        {
            $mydb="OASIS";
            $conn=mssql_connect("Server", "admin", "password") or die ("Error in Connection");
            $select=mssql_select_db($mydb,$conn) or die("Couldn't connect to db");

            $pid=$_POST("ID");        
            $strSQL = "SELECT [First Name] FROM [Data Table] where Patient='$pid'";
            $rs = mssql_query($strSQL);

            while($row = mssql_fetch_array($rs)) 
            {
                echo $row["First Name"];
            }

            if (!$strSQL) 
            {
                die('MSSQL error: ' . mssql_get_last_message());
            }

            mssql_close($conn);
        }
        ?>
    </head>

    <body>
        <form name="test" method="POST">
            ID : <input name="ID" type="text">
            <input type="submit" value="Search">
            NAME : <input name="FirstName" type="text">
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:11:04.913

对于您需要的第一部分`SQL Server drivers`，您可以在 php 和 SQL Server 之间建立连接。查看本[教程](http://www.easysoft.com/developer/languages/php/sql_server_unix_tutorial.html)以获取更多信息。

对于第二部分，它非常简单，您需要`AJAX`在您的网站上实现。输入 id 和日期后，必须对服务器进行 AJAX 调用以进行必要的查询，结果可以显示在其余字段中。这是一个关于 AJAX 和 PHP 的[教程](http://af-design.com/blog/2010/05/12/using-jquery-uis-autocomplete-to-populate-a-form/)，它可以从 MySql 数据库中动态实现表单自动填充。

要将您的 HTML 转换为 PHP，请查看此[示例](http://www.devarticles.com/c/a/PHP/Use-PHP-to-Create-Dynamic-pdf-Files/)。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:15:56.860

试试这个：

```
<?php
$mydb="OASIS";
echo $mydb;

$conn=mssql_connect("Server", "admin", "password") or die ("Error in Connection");
// this is only for debug purposes:
echo mssql_get_last_message();

$select=mssql_select_db($mydb,$conn) or die(mssql_get_last_message());

$pid=$_POST("ID");

$strSQL = "SELECT [First Name] FROM [Data Table] where Patient='$pid'";

$rs = mssql_query($strSQL);
// this is only for debug purposes:
echo mssql_get_last_message();

while($row = mssql_fetch_array($rs)) 
{

  echo $row["First Name"];

}

if (!$strSQL) 
{

        die('MSSQL error: ' . mssql_get_last_message());
}

mssql_close($conn);

?> 
```

# rtmp - Edgecast RTMP 流 URL

> ID：12070660
> 
> 赞同：0
> 
> 时间：2012-08-22T09:58:46.430
> 
> 标签：rtmp, amazon-cloudfront, edgecast

Edgecast RTMP URL 如下：

```
rtmp://abc.edgecast.com/a_folder/b_folder/mp4:astream.mp4 
```

Cloudfront 虽然要求它如下：

```
rtmp://abc.cloudfront.net/cfx/st/mp4:a_folder/b_folder/a_stream.mp4 
```

mp4 应位于用户文件夹结构之前。

这个 CDN 是特定的吗？可以边播吗：

```
rtmp://abc.edgecast.com/mp4:a_folder/b_folder/astream.mp4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:49:33.230

不，媒体标识符应该在流/文件名之前。第一个是正确的。据我所知，它不是特定于 CDN 的，这就是玩家对它们的期望。

# backbone.js - 如何在示例 Backbone.js 待办事项列表应用程序中构建两个嵌套列表？

> ID：12070666
> 
> 赞同：2
> 
> 时间：2012-08-22T09:59:04.920
> 
> 标签：backbone.js

我正在 Backbone 中处理一个示例 ToDo 列表项目，我想了解框架希望我如何在嵌套列表场景中组织其视图和模型。

为了澄清我的意思，我的单页 Backbone 应用程序应该显示待办事项列表。从后端的角度来看，有一个 List 资源和一个 Item（待办事项列表中的单个条目）资源。类似于以下内容：

*   **周一的家务**
    *   拿起邮件
    *   洗衣服
    *   拿起干洗
*   **购物清单**
    *   芹菜
    *   牛肉
    *   你明白了……

因为我的是一个 Rails 3.2 应用程序，所以我模糊地遵循 Railscasts Backbone.js 教程，所以这就是我从中获得当前设计的地方。我很想知道我是否完全偏离了 Backbone 规定的模式，或者我是否走在正确的轨道上！

到目前为止，我有：

```
ListsIndex View                         //index of all lists
\-- ListsCollection
     \-- ListView / Model               //individual list
          \-- ItemsIndex View           //index of items in one list
              \-- ItemsCollection
                  \-- Item View / Model //individual todo item 
```

流程将是：

1.  在路由器初始化时，/lists 后端路由上的 fetch() 列表集合。在 ListsIndex 的集合部分的“重置”事件上，对集合中的每个项目执行 render()，附加到列表索引视图模板。
2.  在每个项目视图的初始化方法中（*这是您连接第二级提取的地方吗？*） fetch() 从 /lists/:id/items 后端路由到特定于该视图的 ItemsCollection 中的项目。
3.  在同一方法中，实例化一个 ItemsIndex 对象并将集合传递给它。再一次，在 ItemsIndex 中，有一个“重置”事件处理程序，用于填充集合时，它应该呈现从项目集合中获取的每个模型并将它们附加到自己的视图中。

我实质上是在采用 List 的设计并将其镜像到其项目的一个级别。不同之处在于我不再需要依赖路由器。因此，我使用 ListView 的初始化方法来达到类似的效果。

是/不是？超级错？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:01:42.967

TL：博士；1）我会引导你的初始数据而不是 fetch() reset()。2）您可以根据需要在视图的初始化中进行获取。或者您可以在开始时加载数据。请记住，如果您在 init 中获取，异步性质不会在渲染时准备好数据。如果您有一个监听器在等待同步/添加/等，这不是问题。3) 我不知道您所说的 itemIndex 对象是什么意思，但您可以创建对象并根据需要向它们添加集合。或者，如果您知道所有列表最终都会有一个集合，则可以在开始时进行烘焙。您可以根据需要重置（除非您给它选项{add：true}，否则自动获取）或者只是在它们进入时将它们一一添加，尽管reset（），删除先前的视图，渲染所有视图似乎是人们使用完整的 fetch() 做事的常用方式。

我觉得它看起来很不错。Backbone 的好处是您可以通过多种不同的方式进行操作。例如，您的 2 号表示要从视图中连接第二个 fetch()。如果你想延迟加载，你可以这样做。或者您可以在应用程序启动时获取所有数据，然后再完成任何操作。这真的取决于你。我可能会这样做。

这就是我可能制作这样一个应用程序的方式（只是我的偏好，我不知道它是更好或更坏，或者它是否与您描述的相同。）

首先，我将创建一个名为 ListModel 的模型。它将有一个 id 和一个名称 attr。这样，您可以创建许多单独的列表，每个列表都有自己的 id，您可以单独获取。

每个 ListModel 内部都有一个 ItemsCollection。这个集合有一个基于它所属的 ListModel 的 url。因此，ListModel-1 的集合 url 类似于 /list/1

最后你有 ItemModel ，它是一个资源 id 和文本。

```
ListCollection
    ListModel  // Monday Chores
        ItemCollection
            ItemModel  // Mail
            ItemModel  // Laundry
            ItemModel  // Drycleaning
    ListModel  // Grocery
        ItemCollection
            ItemModel  // Celery
            ItemModel  // Beef 
```

所以在这个小展示中，你会注意到我还没有对视图做任何事情。我不知道它是否更像是一个概念性的东西，但这就是数据层次结构的样子，你的视图应该完全独立于它。我不确定你是如何包含上面的视图的，但我认为这可能会让它更清楚。

至于定义这些结构，我认为有两点。

首先，我会确保我的 ListModel 已在我的集合中定义。这样，我可以在生成/添加新模型时使用集合 add(hash) 来实例化它们。

其次，我将定义 ListModel，以便在创建时自动创建一个 ItemCollection 作为该 ListModel 对象的属性（而不是作为属性）。

所以理想情况下，您的 ListModels 应该是这样的：

```
ListModel.ItemCollection 
```

在应用程序初始化之前，我会引导数据而不是 fetch()。（这种地址是您创建的第 1 点）理想情况下，当您的 Backbone 应用程序启动时，它应该从一开始就拥有所需的所有必要数据。我会在头脑中传递一些这样的数据：

```
 var lists = [listModel-1-hash, listModel-2-hash]; 
```

现在，当应用程序启动时，您可以立即创建这两个列表。

```
var myLists = new ListCollection();

_.each(lists, function(hash) {
    myLists.add(hash);  // Assumes you have defined your model in the ListCollection
} 
```

现在，您的 List Collection 拥有它需要的所有列表模型。

这是视图的来源。您可以将任何内容传递给任何视图。但我可能会将观点分解为三件事。

AppView、ListModelView、ItemModelView 就是这样。

想象一下这样的结构：

```
<body> // AppView
    <ul class="List"> // ListModelView
        <li class="Item"></li>     // ItemModelView
    </ul>
    <ul class="List"> // ListModelView
    </ul>
</body> 
```

当您启动您的应用程序并创建一个 AppView 时，您将在 AppView 内生成每个 ListModelView 并将其附加到正文中。我们的清单是空的。也许当您单击它时，它会延迟加载项目。这就是你连接它的方式。

```
// In ListModelView
events: {'click':'fetchItems'}

fetchItems: function() {
    this.model.itemCollection.fetch();  // Assumes you passed in the ListModel into view
} 
```

因此，由于我从一开始就引导数据，因此该 fetch() 调用将是您的“第二次”获取。（我正在解决您提出的第 2 点。）您可以在初始化时获取它。请记住，它是一个异步函数，因此如果您在渲染时需要它们，它将无法工作。但是，您可以做的是向此视图添加事件侦听器，这些侦听器正在侦听向您的 itemCollections 添加事件。

```
this.model.itemCollection.on('add', this.addItemView, this); 
```

`addItemView()`将生成 itemViews 的新实例并附加它们。

至于第 3 点，您可以在需要时实例化一个集合并将其放入您的 ListModel。或者你可以像我一样做，确保你所有的模型总是有一个 ItemCollection。这取决于您的偏好和目标。您可能不需要所有这些，但出于某种原因，我想说明一下。我不知道，也许它有帮助。

# css - 使用 CSS 将框与框对齐

> ID：12070677
> 
> 赞同：0
> 
> 时间：2012-08-22T09:59:38.730
> 
> 标签：css

我是 CSS 新手，我正在尝试将我的第一个网站设为 css，但我无法让两个框并排对齐身体，而上面的四个框不会彼此相邻。我玩过 Float 和 position 都没有运气。

您可以在此处查看该站点：http: [//gdisinc.com/barker/default.php](http://gdisinc.com/barker/default.php)

我试图让它看起来像这样： http: [//gdisinc.com/barker/images/menubar/layout_barker.jpg](http://gdisinc.com/barker/images/menubar/layout_barker.jpg)

你能告诉我我做错了什么以及如何解决吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:06:19.173

刚刚`css`用我的更新了你的，`css`它会完美地工作，你做的很少`bugs`，所以我把这些点整理出来，所以现在它的工作正常更新了你下面提到的`css`：-

**CSS**

```
div#main {
    margin: auto;
    overflow: hidden;
    width: 902px;
}

div#outerbox {
    background-color: #A2282C;
    border: 2px solid #FFFFFF;
    float: left;
    height: 300px;
    width: 660px;
}

div#innerbox {
    background-color: #4D1516;
    border: 1px solid #000000;
    height: 277px;
    margin-left: 10px;
    margin-top: 10px;
    width: 640px;
}

div#sideouterbox {
    background-color: #A2282C;
    border: 2px solid #FFFFFF;
    float: right;
    height: 300px;
    width: 222px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T10:05:41.273

首先你在盒子宽度的极限，试着让它更小一点

之后使用

```
display:inline-block; 
```

如果盒子宽度的总和适合容器，你应该没有问题。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T10:10:38.907

没有浮动和奇怪溢出的解决方案：隐藏语句，只是标准定位......

```
div#main {
    margin: auto;
    position: relative
    width: 902px;
}

div#outerbox {
    border: 2px solid white;
    height: 300px;
    width: 669px;
    background-color: #A2282C;
    position: absolute;
}

div#innerbox {
    margin: 10px;
    border: 1px solid black;
    height: 277px;
    background-color: #4D1516;
}

div#sideouterbox {
    border: 2px solid white;
    height: 300px;
    width: 222px;
    background-color: #A2282C;
    position: absolute;
    right: 0;
}

div#sideinnerbox {
    margin-top: 10px;
    margin-left: 10px;
    border: 1px solid black;
    height: 280px;
    width: 198px;
    background-color: #4D1516;
} 
```

只需将其复制到您的样式上，就可以了。

# php - 如果类型查询，则更新或添加节点到 simplexml

> ID：12070684
> 
> 赞同：0
> 
> 时间：2012-08-22T09:59:53.193
> 
> 标签：php, if-statement, simplexml

好的，对此感到抱歉，但是让短裤与真正非常简单的任务发生冲突。我有一个简单的 xml 结构：

```
<site>
<page>
 <pagename>page1</pagename>
  <title>title1</title>
  <id>abc
  <plot>
    this is text
  </plot>
  </id>
  </page>

 <page>
  <pagename>page2</pagename>
  <title>titlee2</title>
  <id>xyz
  <plot>
   this is text
  </plot>
  </id>
</page>
</site> 
```

我通过 ajax post 从表单中传递了 3 个变量，这些变量是 pagename、id 和 plot。

我似乎无法做的是编写正确的查询，根据 pagename 变量检查 pagename 节点，然后检查该页面中的 id 节点。如果 id 节点存在，那么我更新 plot 节点，如果 id 不存在，我创建 id 节点和 plot 节点。

我可以编写/更新节点，有人确实帮助找到了正确的页面，但后来我迷路了。因此，在我上面的示例 xml 中，如果我传递变量 pagename=page1 和 id=abc 然后我只更新绘图，但是如果 pagename 是 page1 并且 id=def （不存在），我需要创建 id 和绘图. 如前所述，可以执行 addChild，更新位，只是无法获得查询权限以检查该页面的 id 是否存在 - 注意`$id = $site->xpath('//id[text()="'.$posted_variable.'"]');`对我不起作用，因为 id 可能存在于多个页面节点中，但它不能在同一页面节点中重复。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:51:09.423

好的，我有它的工作，可能不漂亮，但它确实有效 -

```
$xml   = simplexml_load_file('xml.xml');

$site  = new SimpleXMLElement($xml->asXML());

$paget = "index";

$text  = $_POST['tosave'];

$text  = htmlentities($text, ENT_QUOTES, 'UTF-8');

// EDIT / UPDATE //

$pages = $site->xpath('//page/pagename[text()="'.$paget.'"]/..');

if($pages){

$a = array();

foreach( $pages[0]->id as $ID ){

array_push($a,$ID);

}

if(in_array($_POST['containerid'],$a)){

    foreach ($a as $key => $value) {

        if($value==$_POST['containerid']){

        $pages[0]->id[$key]->plot = trim($text) ;

        }

    }

} else {

       $pages[0]->addChild('id',$_POST['containerid'])->addChild('plot',trim($text));

}

}

$site->asXML("xml.xml");

exit; 
```

# android - Android - 如何将 json 字符串发布到接受参数的 Web 服务？

> ID：12070688
> 
> 赞同：0
> 
> 时间：2012-08-22T09:59:58.047
> 
> 标签：android, json, web-services

我有一个 Web 服务，它接受 2 个参数来保存 json：fileName 和一个 json 字符串。我需要向这个 Web 服务发布一个 json 字符串。我已经尝试过[如何使用 Android 通过请求发送 JSON 对象中概述的方法？](https://stackoverflow.com/questions/3027066/how-to-send-a-json-object-over-request-with-android)但它似乎不起作用。任何指针？

```
public void postDataToServer(String url, String jsonStr) throws ClientProtocolException, IOException
  {
      int TIMEOUT_MILLISEC = 10000;  // = 10 seconds
      HttpParams httpParams = new BasicHttpParams();
      HttpConnectionParams.setConnectionTimeout(httpParams, TIMEOUT_MILLISEC);
      HttpConnectionParams.setSoTimeout(httpParams, TIMEOUT_MILLISEC);
      httpParams.setParameter("fileName","testFile");
      httpParams.setParameter("json",jsonStr);
      HttpClient client = new DefaultHttpClient(httpParams);

      HttpPost request = new HttpPost(url);
      request.setEntity(new ByteArrayEntity(
          jsonStr.getBytes("UTF8")));
      HttpResponse response = client.execute(request);

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:05:16.300

文件名和 json 不在 httpParams 中。他们进入实体。您应该使用 HttpEntity，很可能是 带有 2 个 BasicNameValuePair的[http://developer.android.com/reference/org/apache/http/client/entity/UrlEncodedFormEntity.html ，一个用于文件名，一个用于 json。](http://developer.android.com/reference/org/apache/http/client/entity/UrlEncodedFormEntity.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T07:42:42.573

这是我的自定义 WebServiceHelper 类：

```
public class WebserviceHelper { 

    private Context c;
    public String bytesSent;
    private String tempRespo;

    public String hitWeb(Context c,String url, String json){

        this.c=c;
        try {
            tempRespo = new hitAsync(url,json).execute().get();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ExecutionException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return tempRespo;
    }

    class hitAsync extends AsyncTask<Void, Void , String>
    {

        private String url;
        private String json;
        ProgressDialog pDialog;

        public hitAsync(String url, String json) {
            // TODO Auto-generated constructor stub

            this.url = url;
            this.json = json;
        }

        @Override
        protected void onPostExecute(String result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
            pDialog.dismiss();
        }

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();

            pDialog = new ProgressDialog(c);
            pDialog.setMessage("Please Wait...");
            pDialog.show();
            pDialog.setCancelable(false);

        }

        @Override
        protected String doInBackground(Void... params) {
            // TODO Auto-generated method stub

              HttpClient client = new DefaultHttpClient();
              HttpConnectionParams.setConnectionTimeout(client.getParams(), 10000); //Timeout Limit
              HttpResponse response;

              try{
                  HttpPost post = new HttpPost(url);

                  StringEntity se = new StringEntity( json);  
                  se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
                  post.setEntity(se);
                  response = client.execute(post);
                  /*Checking response */
                  if(response!=null){
                      InputStream in = response.getEntity().getContent(); //Get the data in the entity

                      BufferedInputStream bis = new BufferedInputStream(in);
                    ByteArrayBuffer baf = new ByteArrayBuffer(20);

                    int current = 0;
                    while ((current = bis.read()) != -1) {
                        baf.append((byte) current);
                    }

                     bytesSent = new String(baf.toByteArray());

                  }
              }
              catch(Exception e){
                  e.printStackTrace();
              }
            return bytesSent;

        }

    } 
```

然后在你的班级中制作它的对象并做你的事情：

```
 ws = new WebserviceHelper();
    String respo = ws.hitWeb(// ur class context", "// url","//json string"); 
```

# php - PHP：从一组数组中检索数据

> ID：12070691
> 
> 赞同：1
> 
> 时间：2012-08-22T10:00:04.480
> 
> 标签：php

我有一组看起来像这样的数据

```
 object(stdClass)#5 (39) { ["id"]=> int(125273716) ["status"]=> object(stdClass)#6 (18) { ["retweeted"]=> ["text"]=> string(28) "1234567" } ["is_translator"]=> bool(false)} 
```

我怎样才能得到**["text"]**？**我已经删除了部分数据，因为它太长了。我想要的只是 ['text'] 参数**。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T10:01:27.530

试试这个：

```
$object->status->text 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T10:06:24.397

**将 stdClass 对象转换为多维数组的函数**

```
<?php

    function objectToArray($d) {
        if (is_object($d)) {
            // Gets the properties of the given object
            // with get_object_vars function
            $d = get_object_vars($d);
        }

        if (is_array($d)) {
            /*
            * Return array converted to object
            * Using __FUNCTION__ (Magic constant)
            * for recursive call
            */
            return array_map(__FUNCTION__, $d);
        }
        else {
            // Return array
            return $d;
        }
    }
?> 
```

采用：

```
<?php
echo '<pre>';
var_dump(objectToArray($object));
echo '</pre>'; 
```

资料来源：[http ://www.if-not-true-then-false.com/2009/php-tip-convert-stdclass-object-to-multidimensional-array-and-convert-multidimensional-array-to-stdclass-目的/](http://www.if-not-true-then-false.com/2009/php-tip-convert-stdclass-object-to-multidimensional-array-and-convert-multidimensional-array-to-stdclass-object/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T10:01:34.307

这是一个对象

```
echo $result->status->text; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T10:04:38.567

object(stdClass)#5 (39) { ["id"]=> int(125273716) ["status"]=> object(stdClass)#6 (18) { ["retweeted"]=> ["text"] => 字符串(28) "1234567" } ["is_translator"]=> bool(false)}

你可以试试 put $res as

```
$res = $result->status->text;
echo $res; 
```

# c++ - 将成员函数从 C++ CLI 传递到本机 C 回调

> ID：12070697
> 
> 赞同：1
> 
> 时间：2012-08-22T10:00:18.740
> 
> 标签：c++, c, function, callback, command-line-interface

我在将 C++ CLI 类的成员函数传递给库中的本机 C 回调时遇到问题。

准确地说是 Teamspeak 3 SDK。

您可以使用以下代码毫无问题地传递非成员函数：

```
struct ClientUIFunctions funcs;

/* Initialize all callbacks with NULL */
memset(&funcs, 0, sizeof(struct ClientUIFunctions));
funcs.onConnectStatusChangeEvent        = onConnectStatusChangeEvent; 
```

但我需要传递一个指向成员函数的指针，例如：

```
 funcs.onConnectStatusChangeEvent        = &MyClass::onConnectStatusChangeEvent; 
```

欢迎任何其他想法如何在非静态成员函数中使用事件。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:28:32.670

这只能通过静态类函数来完成，因为 C 对 vtable 或该函数所属的对象一无所知。请参阅下面的 C++ 和托管 C++ 示例

然而，这可能是一种解决方法，构建一个处理您需要的所有回调的包装类。

```
#include <string.h>

struct ClientUIFunctions
{
     void (*onConnectStatusChangeEvent)(void);
};

class CCallback
{
public:
     CCallback()
      {
           struct ClientUIFunctions funcs;

           // register callbacks
           my_instance = this;

           /* Initialize all callbacks with NULL */
           memset(&funcs, 0, sizeof(struct ClientUIFunctions));
           funcs.onConnectStatusChangeEvent        = sOnConnectStatusChangeEvent;

      }

     ~CCallback()
      {
           // unregister callbacks
           my_instance = NULL;
      }

     static void sOnConnectStatusChangeEvent(void)
      {
           if (my_instance)
            my_instance->OnConnectStatusChangeEvent();
      }

private:
     static CCallback *my_instance;

     void OnConnectStatusChangeEvent(void)
      {
           // real callback handler in the object
      }
};

CCallback *CCallback::my_instance = NULL;

int main(int argc, char **argv)
{
    CCallback *obj = new CCallback();

    while (1)
    {
         // do other stuff
    }

    return 0;
} 
```

另一种可能性是回调是否支持并且`void *args`您`void (*onConnectStatusChangeEvent)(void *args);`可以从插件中设置。您可以在此 args 空间中设置对象，因此在 de sOnConnectStatusChangeEvent 中您将拥有如下内容：

```
static void sOnConnectStatusChangeEvent(void *args)
    {
           if (args)
              args->OnConnectStatusChangeEvent();
    } 
```

**对于托管 C++，它应该是这样的，但是我无法编译它，因为它不喜欢模板括号..**

包装器.h：

```
using namespace std;
using namespace System;
using namespace System::Runtime::InteropServices;
using namespace System::Text;

namespace Test
{
    struct ClientUIFunctions
    {
        void (*onConnectStatusChangeEvent)(void);
    };

    public delegate void ConnectStatusChangeEvent(void);

    public ref class ManagedObject
    {
    public:
        // constructors
        ManagedObject();

        // destructor
        ~ManagedObject();

        //finalizer
        !ManagedObject();

        event ConnectStatusChangeEvent^ OnConnectStatusChangeEvent {
            void add(ConnectStatusChangeEvent^ callback) {
                m_connectStatusChanged = static_cast<ConnectStatusChangeEvent^> (Delegate::Combine(m_connectStatusChanged, callback));
            }

            void remove(ConnectStatusChangeEvent^ callback) {
                m_connectStatusChanged = static_cast<ConnectStatusChangeEvent^> (Delegate::Remove(m_connectStatusChanged, callback));
            }

            void raise(void) {
                if (m_connectStatusChanged != nullptr) {
                    m_connectStatusChanged->Invoke();
                }
            }
        }

    private:
        ConnectStatusChangeEvent^ m_connectStatusChanged;   
    };

    class CCallback
    {
    public:
        static void Initialize(ManagedObject^ obj);
        static void DeInitialize(void);

    private:
        static void sOnConnectStatusChangeEvent(void);

        static gcroot<ManagedObject^> m_objManagedObject;
    };
} 
```

包装器.cpp：

```
#include <string.h>
#include "wrapper.h"

using namespace System;
using namespace Test;

void CCallback::Initialize(ManagedObject^ obj)
{
    struct ClientUIFunctions funcs;

    // register callbacks
    m_objManagedObject = obj;

    /* Initialize all callbacks with NULL */
    memset(&funcs, 0, sizeof(struct ClientUIFunctions));
    funcs.onConnectStatusChangeEvent        = sOnConnectStatusChangeEvent;

}

void CCallback::DeInitialize(void)
{
    // unregister callbacks
    m_objManagedObject = nullptr;
}

void CCallback::sOnConnectStatusChangeEvent(void)
{
    if (m_objManagedObject != nullptr)
        m_objManagedObject->OnConnectStatusChangeEvent();
}

// constructors
ManagedObject::ManagedObject()
{
    // you can't place the constructor in the header but just for the idea..
    // create wrapper
    CCallback::Initialize(this);          
}

// destructor
ManagedObject::~ManagedObject()
{
    this->!ManagedObject();
}

//finalizer
ManagedObject::!ManagedObject()
{
    CCallback::DeInitialize();        
}

gcroot<ManagedObject^> CCallback::m_objManagedObject = nullptr;

int main(array<System::String ^> ^args)
{
     ManagedObject^ bla = gcnew ManagedObject();

     while (1)
     {
      // do stuff
     }

     return 0;
} 
```

# synchronization - Shared memory objects synchronization

> ID：12070701
> 
> 赞同：5
> 
> 时间：2012-08-22T10:00:54.823
> 
> 标签：synchronization, shared-memory, abap

I want to create a simple Tic Tac Toe game, to be played between users of a SAP system.

I have a CL_TTT_MANAGER class with a SIGNUP method that assigns players to a game. My class is a shared-memory enabled class, because it's purpose is to potentially be accessed by all the users of a sap system.

The signup procedure is done using a very simple algorithm.

1:A "WAITING_FOR_PLAYERS" flag exists, and is set to ABAP_FALSE. initially. 2:When a first player calls "SIGNUP", the flag is set to "ABAP_TRUE". 3:When a second player calls "SIGNUP", the flag is set to "ABAP_FALSE" and the game instance is created.

The problem with my SIGNUP method is that it relies on state, namely it has to remember the name of the first player, and this is achieved using a private attribute.

For any of you who have worked with concurrency problems, you will spot a data race, namely that if right after the second player signs up, a third one also signs up, the name of the first player might be replaced with the name of the third.

How do i synchronize these things in abap? What mechanism do i have for this? I haven't encountered anything like this in the documentation (i've been studying only for 2 months). Do i have to implement this myself, or is there something to help me?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T14:49:56.057

This should not be a problem - before the third player is able to write to the shared memory area, he has to obtain a change handle, and he won't be able to get one as long as the second user still has a change lock set. [See the docs](http://help.sap.com/saphelp_nw70ehp2/helpdata/en/72/699e6a8a6bd94ebcfac823d0bcf16c/frameset.htm) for more detailed information on that topic.

Be aware that stable and reliable Shared Memory programming is one of the hardest tasks to accomplish in an ABAP environment (probably in any environment out there). I know from your other questions that you're relatively new to ABAP - it's ambitious to start off with shared objects so early.

# android - 在 BroadcastReceiver 的 onReceive() 中创建 PendingIntent

> ID：12070704
> 
> 赞同：1
> 
> 时间：2012-08-22T10:01:04.793
> 
> 标签：android, push-notification, google-cloud-messaging

有一个`BroadcastReceiver`我想在方法`PendingIntent`内部创建的`onReceive`

```
public class MyPushNotificationReceiver extends BroadcastReceiver {
..
    public void onReceive(Context context, Intent intent) {

        // How to start a PendingIntent here?

    } 
```

谷歌的大部分文档都没有在`onReceive`方法中开始，所以我可以使用任何示例代码吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:06:59.377

在广播接收器中使用未决意图的示例代码请检查

```
 public class MyScheduleReceiver extends BroadcastReceiver {

// Restart service every 30 minute
private static final long REPEAT_TIME = 1000 * 30 ;

@Override
public void onReceive(Context context, Intent intent) {
    AlarmManager service = (AlarmManager) context
            .getSystemService(Context.ALARM_SERVICE);
    Intent i = new Intent(context, MyStartServiceReceiver.class);
    PendingIntent pending = PendingIntent.getBroadcast(context, 0, i,
            PendingIntent.FLAG_CANCEL_CURRENT);
    Calendar cal = Calendar.getInstance();
    // Start 30 seconds after boot completed
    cal.add(Calendar.SECOND, 30);
    //
    // Fetch every 30 seconds
    // InexactRepeating allows Android to optimize the energy consumption
    service.setInexactRepeating(AlarmManager.RTC_WAKEUP,
            cal.getTimeInMillis(), REPEAT_TIME, pending);

    // service.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
    // REPEAT_TIME, pending);

}
     } 
```

这段代码来自vogella ...

# php - $_REQUEST 键冲突处理

> ID：12070709
> 
> 赞同：1
> 
> 时间：2012-08-22T10:01:20.420
> 
> 标签：php, request

如果 b/wa 获取密钥和发布密钥发生冲突，$_REQUEST 如何处理。例如：

```
<form action="ex.php?key=1234" method="post">
<input type="text" name="key" value="abcd"/>
<input type="submit" name="submit" value="submit">
</form> 
```

如果我在 ex.php 中写这个，输出会是什么：

```
echo $_REQUEST["key"]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T10:03:09.247

这取决于配置。在你的`php.ini`你可以设置请求参数的顺序。

有关详细信息，请参阅[http://www.php.net/manual/en/ini.core.php#ini.variables-order](http://www.php.net/manual/en/ini.core.php#ini.variables-order)。

# android - 在模拟器 Android 4.0 + 中使用日历

> ID：12070717
> 
> 赞同：4
> 
> 时间：2012-08-22T10:01:55.663
> 
> 标签：android, events, android-emulator, calendar, account

我正在玩 ICS 的日历 API，但无法在模拟器上测试它。我已经配置了一个以 Google Inc SDK 14 作为目标的新虚拟设备。我在设置/帐户中添加了我的 gmail 帐户。

**我可以看到我的电子邮件，在日历应用程序的菜单/设置中，我可以看到我的 gmail 帐户。**

但是，在我的应用程序中，当我启动日历意图时，

我看到这条消息：

**“没有日历，在添加事件之前，您必须向设备添加至少一个日历帐户并使日历可见。[...]”**

所以我进入 aCalendar 应用程序，进入菜单/日历显示，在这里，我什么也看不到。

我不是 Android 专家，我错过了什么？干杯

# java - 我将 eclipse 应用程序转换为 net beans，它显示用于编码 UTF-8 的错误不可映射字符

> ID：12070720
> 
> 赞同：0
> 
> 时间：2012-08-22T10:02:05.767
> 
> 标签：java, swing

我将 Eclipse 应用程序转换为 net beans 7.2 版本，显示一些错误，例如用于编码 UTF-8 的不可映射字符

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:17:23.083

请检查项目属性。在有的`Sources`类别中`Encoding`，将其设置为`UTF-8`。

# java - 自定义焦点遍历策略错误

> ID：12070723
> 
> 赞同：1
> 
> 时间：2012-08-22T10:02:07.913
> 
> 标签：java, focus

我正在创建 java 桌面应用程序。我想更改面板组件的标签顺序。我创建了自己的焦点遍历策略。在面板中，我使用两个日期选择器字段。其他组件完全获得焦点，但 datechooser 字段没有获得焦点。我试过了

```
 List<Component> order=new LinkedList<>();
    order.add(pidcmb);
    order.add(locationtxt);
    order.add(chemicalnametxt);
    order.add(fromtxt);//datechooser
    order.add(totxt);//datechooser
    order.add(generate);
    order.add(cancel);
    newPolicy = new MyOwnFocusTraversalPolicy(order);
    parameter.setFocusTraversalPolicy(newPolicy);
     parameter.setFocusCycleRoot(true); 
```

并创建一个类

```
class MyOwnFocusTraversalPolicy extends FocusTraversalPolicy
{

   List<Component> order;

        public MyOwnFocusTraversalPolicy(List<Component> order) {
            this.order = new LinkedList<Component>() {};
            this.order.addAll(order);
        }
    @Override
        public Component getComponentAfter(Container focusCycleRoot,
                                           Component aComponent)
        {
            int idx = (order.indexOf(aComponent) + 1) % order.size();
            return order.get(idx);
        }

    @Override
        public Component getComponentBefore(Container focusCycleRoot,
                                            Component aComponent)
        {
            int idx = order.indexOf(aComponent) - 1;
            if (idx < 0) {
                idx = order.size() - 1;
            }
            return order.get(idx);
        }

    @Override
        public Component getDefaultComponent(Container focusCycleRoot) {
            return order.get(0);
        }

    @Override
        public Component getLastComponent(Container focusCycleRoot) {
            return order.get(order.size());
        }

    @Override
        public Component getFirstComponent(Container focusCycleRoot) {
            return order.get(0);
        }

} 
```

# sproutcore - 如何将数据推送到 SC.SourceListView

> ID：12070725
> 
> 赞同：0
> 
> 时间：2012-08-22T10:02:14.617
> 
> 标签：sproutcore, sproutcore-views, sproutcore-controllers

我想将一些解析的 JSON 数据从我的控制器推送到`SC.SourceListView`[(Sproutcore Showcase)](http://showcase.sproutcore.com/)中。我使用 a`SC.TreeController`并将解析的 JSON 设置为内容：

```
MyApp.thisController = SC.TreeController.create({
    treeItemChildrenKey: 'children',
    content: []
}); 
```

该属性`treeItemChild`根据对象中的属性进行相应设置并通向子对象。

中的内容`SC.TreeController`包含几个基于以下结构的对象（JSON 数据）（这是我要推送到树视图中的对象之一的示例）：

```
children: Array[3]
    0: Object
        children: Array[1]
        data: "Boogie"
        metadata: Object
        __proto__: Object
    1: Object
    2: Object
data: "Blues"
metadata: Object
__proto__: Object 
```

我想把这个`data`属性放在我`SC.SourceListView`的里面，这样它就可以读取了。

```
Blues
    Boogie
    ...
    ... 
```

此内容现在已绑定到`SC.SourceListView`并且应该`data`在屏幕上显示该属性：

```
viewname: SC.SourceListView.extend({
    contentBinding: SC.Binding.oneWay('MyApp.thisController.arrangedObjects'),
    exampleView: SC.ListItemView.extend({
        contentValueKey: 'data'
    }),
    groupExampleView: SC.ListItemView.extend({
        contentValueKey: 'data'
    })
}) 
```

有了这个，我可以得到`data`不同对象的顶层。但是没有下拉列表，它由更深层的对象组成。如何正确设置此视图？`SC.SourceListView`和 和有什么不一样`SC.SourceListGroupView`？

[（谷歌群组链接）](https://groups.google.com/forum/?fromgroups=#!topic/sproutcore/A7tw9k0lIa8)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:10:51.780

是`SC.SourceListGroupView`用于在`SC.SourceListView`. 目前，您正在使用

```
groupExampleView: SC.ListItemView.extend() 
```

但是，`SC.ListItemView`默认情况下，不知道如何将自己呈现为一个组，因此您可能应该将其更改为

```
groupExampleView: SC.SourceListGroupView.extend() 
```

之后，它应该向您显示树。

最后（我假设这只是问题中的一个错字）：你有

```
MyApp.thisController.anrrangedObjects 
```

我很确定你的意思是

```
MyApp.thisController.arrangedObjects 
```

`SC.SourceListGroupView`如果将其更改为不能解决您的问题，请添加评论或更新您的问题！如果您仍然需要帮助，查看您尝试呈现的 JSON 结构也会很有帮助:-)

**编辑：**好的，所以，我不是 100% 确定这一点，因为我似乎找不到任何文档，但根据[SproutCore Showcase](http://showcase.sproutcore.com/)，您可能需要确保您的父对象（那些有孩子的对象）有`group`属性设置为真。请让我们知道这是否有帮助！

# delphi - TStringList 后代，每个元素都有 id 和 subid

> ID：12070726
> 
> 赞同：3
> 
> 时间：2012-08-22T10:02:19.440
> 
> 标签：delphi, data-structures, delphi-xe

我需要创建一个 TStringList 类的后代，它具有与 TstringList 类相同的功能，但列表中的每个字符串/对象都有一个 id 和 subid 元素。

这是否可以通过继承 TStringList 类，或者我需要创建一个新类并实现我需要的行为。

LE：我还需要 Objects 属性，所以我不能在列表中存储指向结构的指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:33:18.677

通过检查 TStringList 类源，我认为可以直接继承 TStringList 类，方法是添加另一个`FListIDs: PStringItemListIDs`（类似于`FList: PStringItemList`）其中`TStringItemIDs`的记录`FID, FSubID: Integer`（假设数据类型是整数）。

接下来，您需要覆盖`TStringList`涉及的每个方法，`FList`即：`Add`, `Clear`, `Delete`, `Insert`, 等...您将在其中处理`FListIDs`添加或删除。

最后创建索引属性：`ID`，`SubID`带有 getter 和 setter 函数。例如：

```
property ID[Index: Integer]: Integer read GetID write SetID;
property SubID[Index: Integer]: Integer read GetSubID write SetSubID; 
```

getter 和 setter 函数将 get 或 set `FListIDs`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T10:33:26.947

ID 和 SubID 中的数据有多大？

AFAIR TStrings 可能有关联的对象，并且 TObjects 是一个 32 位指针，提供适当的类型转换实现，数据可以直接粘贴到它。

[http://docwiki.embarcadero.com/Libraries/XE2/en/System.Classes.TStrings.Objects](http://docwiki.embarcadero.com/Libraries/XE2/en/System.Classes.TStrings.Objects)

或者您可以像使用指针一样使用它来记录 {ID, SubID, TObject}。或者您可以将它用作这些记录的某些数组或它们的列表中的索引，例如 TList< record ID, SubID, TObject end >

然后，您将覆盖新的 TObject setter/getter 以实际深入该记录，并使用祖先的 Objects geter/setter 来保存索引或指针。

*PS。也许 TDictionary<TPair<ID, SubID>, TPair< String, TObject>> 从头开始​​创建 TStrings 接口也很有用。*

# wpf - 儿童折叠后网格不减小尺寸

> ID：12070728
> 
> 赞同：0
> 
> 时间：2012-08-22T10:02:26.087
> 
> 标签：wpf

这是程序的结构：

```
- window
  - styles
    - togglebutton
    - textblock
  - grid 
```

网格中的每一行都是一个切换按钮，当我们单击切换按钮时，文本块会展开，当我们再次单击它时，文本块会折叠。

问题是当它展开时，窗口的大小会增加，但是当它折叠时它不会将大小减小到行大小。为此该怎么办？任何人都可以帮忙吗？

我尝试将 windows sizetocontent 属性设置为宽度和高度，但这不是问题。我认为与网格而不是窗口有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T06:45:51.180

我认为你是在正确的方式，使用`SizeToContent`窗口的属性！

试试这个代码（声明转换器并更改引用！）：

C#`IValueConverter`用于子项的可见性

```
public sealed class BoolToVisibilityConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value is bool)
        {
            if ((bool)value)
                return Visibility.Visible;
            else
                return Visibility.Collapsed;
        }
        else
            throw new NotImplementedException();
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

窗口的 XAML 代码

```
<Window x:Class="TestWpf.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:converters="clr-namespace:TestWpf.Converters"
        VerticalAlignment="Stretch"
        SizeToContent="WidthAndHeight"
        HorizontalContentAlignment="Stretch"
        VerticalContentAlignment="Stretch"
        Title="MainWindow">
<Window.Resources>
    <ResourceDictionary>
        <converters:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter" />
    </ResourceDictionary>
</Window.Resources>
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="Auto" />
        <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>
    <!--Row 1-->
    <StackPanel Grid.Row="0"
                Orientation="Vertical">
        <ToggleButton Content="expand/collapse"
                      x:Name="Button1" />
        <TextBlock FontSize="30"
                   HorizontalAlignment="Center"
                   Visibility="{Binding Path=IsChecked, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}, ElementName=Button1}"
                   Text="Sample Text 1" />
    </StackPanel>
    <!--Row 2-->
    <StackPanel Grid.Row="1"
                Orientation="Vertical">
        <ToggleButton Content="expand/collapse"
                      x:Name="Button2" />
        <TextBlock FontSize="30"
                   HorizontalAlignment="Center"
                   Visibility="{Binding Path=IsChecked, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}, ElementName=Button2}"
                   Text="Sample Text 2" />
    </StackPanel>
    <!--Row 3-->
    <StackPanel Grid.Row="2"
                Orientation="Vertical">
        <ToggleButton Content="expand/collapse"
                      x:Name="Button3" />
        <TextBlock FontSize="30"
                   HorizontalAlignment="Center"
                   Visibility="{Binding Path=IsChecked, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}, ElementName=Button3}"
                   Text="Sample Text 3" />
    </StackPanel>
    </Grid>
</Window> 
```

# fabric - 在结构中获取操作以使用主机名

> ID：12070731
> 
> 赞同：0
> 
> 时间：2012-08-22T10:02:44.153
> 
> 标签：fabric

我对结构很陌生，并尝试以以下方式设置部署：

```
Main repo --> Local_repo -> Deployment server 
```

我想
（1）将构建从主仓库推送到本地仓库
（2）部署服务器需要从本地仓库中提取可用代码

我使用 put 成功完成了第一步，但随后我无法使用 get 操作进行第二步。我尝试使用 git pull 但后来我收到一个错误，指出它不是 git repo，hg pull 也是如此。有没有一种方法可以将 get 操作与主机名结合起来：例如：

`get ('username@localrepo/local_repo_build_path', deployment_server_local_path)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:36:23.693

如果你想使用 git pull，你很可能必须使用上下文管理器 cd/lcd 来移动到 repo 的目录。您也不能这样指定用户名/主机。它在任务的@host 或@role 定义中设置，它会自动拾取它，虽然它也不会拉下一个完整的目录，你需要使用 contrib rsync 来完成类似的事情。

# openssh - 更改 OpenSSH 的日志时间格式

> ID：12070732
> 
> 赞同：1
> 
> 时间：2012-08-22T10:02:45.647
> 
> 标签：openssh

我系统中的 OpenSSH 日志以以下格式吐出日志。

```
Aug 21 14:34:44 systemHostName sshd[1952]: Server listening on 0.0.0.0 port 22. 
```

我还需要在日志时间中获取年份。类似以下的东西

```
2012 Aug 21 14:34:44 systemHostName sshd[1952]: Server listening on 0.0.0.0 port 22. 
```

我试图查看`sshd_config`其他网络资源，但找不到任何有用的东西。

有人知道，如何更改 openSSH 日志时间格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:06:23.073

它`syslog`不是`sshd`时间格式，取决于您的系统日志实现，尽管我没有看到有人在那里使用年份。

# android - sh 脚本文件中的 am cmd 不起作用

> ID：12070734
> 
> 赞同：0
> 
> 时间：2012-08-22T10:03:02.047
> 
> 标签：android

sh 文件如下所示

```
#!/system/bin/sh
am start -a android.intent.action.MAIN -n com.android.settings/.Settings
echo hello,world
exit 1 
```

但它报告错误

```
Starting: Intent { act=android.intent.action.MAIN cmp=com.android.settings/.Sett
}gs
Error type 3
} does not exist.lass {com.android.settings/com.android.settings.Settings
hello,world
exit: Illegal number: 1 
```

但是当我直接在 sh shell 中输入它时，比如在 adb shell 提示符中，输入`am start -a android.intent.action.MAIN -n com.android.settings/.Settings`，它可以工作，并运行 activty

所以有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:31:02.570

我刚试过你的脚本，它显然有效。也用过 2.3.3

```
echo "#!/system/bin/sh" >a.sh
#echo "#!/system/bin/sh" >a.sh
#cat a.sh
#!/system/bin/sh
# echo "am start -a android.intent.action.MAIN -n com.android.settings/.Settings" >>a.sh
echo "am start -a android.intent.action.MAIN -n com.android.settings/.Settings" >>a.sh
# cat a.sh
cat a.sh
#!/system/bin/sh
am start -a android.intent.action.MAIN -n com.android.settings/.Settings
# echo "echo hello, world" >>a.sh
echo "echo hello, world" >>a.sh
# echo "exit 0" >>a.sh
echo "exit 0" >>a.sh
# cat a.sh
cat a.sh
#!/system/bin/sh
am start -a android.intent.action.MAIN -n com.android.settings/.Settings
echo hello, world
exit 0   
# chmod 755 a.sh
chmod 755 a.sh
# ./a.sh
./a.sh
Starting: Intent { act=android.intent.action.MAIN cmp=com.android.settings/.Settings }
hello, world  
# cat /proc/cpuinfo
cat /proc/cpuinfo
Processor       : ARM926EJ-S rev 5 (v5l)
BogoMIPS        : 287.53
Features        : swp half thumb fastmult vfp edsp java
CPU implementer : 0x41
CPU architecture: 5TEJ
CPU variant     : 0x0
CPU part        : 0x926
CPU revision    : 5

Hardware        : Goldfish 
```

# javascript - JavaScript 正则表达式不区分大小写

> ID：12070743
> 
> 赞同：0
> 
> 时间：2012-08-22T10:03:27.350
> 
> 标签：javascript, regex

请看这个[JsFiddle](http://jsfiddle.net/sathyamoorthi/XCPB6/4)。

```
var target = "Thanks For Looking This Problem";
var phrase = ["anks", "for", "king T"];

for(var indx = 0; indx < phrase.length; indx ++)
{
  target = target.replace(new RegExp(phrase[indx], "gi"), "~~~" + phrase[indx]+ "```");
}
​ 
```

我得到这个输出：`Th~~~anks``` ~~~for``` Loo~~~king T```his Problem`

但我需要这个输出：`Th~~~anks``` ~~~For``` Loo~~~king T```his Problem`

“为了”而不是“为了”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:06:51.043

只是不要[替换](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)为短语，而是替换为匹配的字符串：

```
… target.replace(new RegExp(phrase[indx], "gi"), "~~~$&```"); 
```

有了它，您不妨删除循环并仅使用

```
return target.replace(new RegExp(phrase.join("|"), "gi"), "~~~$&```") 
```

# android - 将返回按钮添加到操作栏

> ID：12070744
> 
> 赞同：64
> 
> 时间：2012-08-22T10:03:28.720
> 
> 标签：android, android-layout, android-actionbar

我一直在尝试向操作栏添加后退按钮。

我希望我的视图看起来像这样： ![在此处输入图像描述](../Images/8932e07daba09cfe705299c284aca2b3.png)

我想在操作栏的左侧添加后退按钮。

我添加了这段代码

```
ActionBar actionBar = getActionBar();

actionBar.setDisplayHomeAsUpEnabled(true); 
```

但它不起作用。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-12-06T10:04:34.223

设置后 `actionBar.setHomeButtonEnabled(true);`

添加以下代码：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            // app icon in action bar clicked; goto parent activity.
            this.finish();
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2013-07-01T16:10:39.573

添加

```
actionBar.setHomeButtonEnabled(true); 
```

然后添加以下内容

```
@Override
public boolean onOptionsItemSelected(MenuItem menuItem)
{       
    switch (menuItem.getItemId()) {
        case android.R.id.home:
            onBackPressed();
            return true;
        default:
            return super.onOptionsItemSelected(menuItem);
    }
} 
```

正如[naXa](https://stackoverflow.com/users/1429387/naxa)所建议的那样，我在 上添加了一个检查`itemId`，以使其在操作栏上有多个按钮的情况下正常工作。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2015-01-20T20:25:41.207

这个对我有用：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_your_activity);
    getSupportActionBar().setDisplayHomeAsUpEnabled(true);
    // ... other stuff
}

@Override
public boolean onSupportNavigateUp(){
    finish();
    return true;
} 
```

当您使用 SupportActionBar 中的后退按钮时，将调用 onSupportNavigateUp() 方法。

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2013-10-07T15:45:13.237

设置后

```
 actionBar.setHomeButtonEnabled(true); 
```

您必须在 AndroidManifest.xml 中配置父活动

```
<activity
    android:name="com.example.MainActivity"
    android:label="@string/app_name"
    android:theme="@style/Theme.AppCompat" />
<activity
    android:name="com.example.SecondActivity"
    android:theme="@style/Theme.AppCompat" >
    <meta-data
        android:name="android.support.PARENT_ACTIVITY"
        android:value="com.example.MainActivity" />
</activity> 
```

在这里查看更多信息[http://developer.android.com/training/implementing-navigation/ancestral.html](http://developer.android.com/training/implementing-navigation/ancestral.html)

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-01-10T04:28:57.937

有两种方法可以解决这个问题。

**选项 1：更新 Android Manifest** 如果总是从同一个 Activity 调用设置 Activity，您可以在 Android Manifest 中建立关系。Android 将自动在 ActionBar 中显示“返回”按钮

```
<activity
    android:name=".SettingsActivity"
    android:label="Setting Activity">
    <meta-data
        android:name="android.support.PARENT_ACTIVITY"
        android:value="com.example.example.MainActivity" />
</activity> 
```

**选项 2：更改 ActionBar 的设置** 如果您不知道哪个 Activity 会调用 Settings Activity，您可以像这样创建它。首先在扩展 ActionBarActivity 的活动中（确保您的 @imports 与您正在寻找的兼容性级别相匹配）。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_settings_test);
    ActionBar actionBar = getSupportActionBar();
    actionBar.setHomeButtonEnabled(true);
    actionBar.setDisplayHomeAsUpEnabled(true);
} 
```

然后，检测“返回按钮”按下并告诉 Android 关闭当前打开的 Activity。

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            // app icon in action bar clicked; goto parent activity.
            this.finish();
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

应该这样做！

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2015-01-20T14:03:05.557

首先使用这个：

```
ActionBar bar = getSupportActionBar();
bar.setDisplayHomeAsUpEnabled(true); 
```

然后在`onOptionsItemSelected`方法中设置按钮点击的操作

```
 @Override
 public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
         finish();
        return true;
     default:
        return super.onOptionsItemSelected(item);
  }
 } 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-02-01T23:11:47.030

您需要`menuItem.getItemId()`在方法`android.R.id.home`中进行检查`onOptionsItemSelected`

[Android Sherlock ActionBar向上按钮](https://stackoverflow.com/questions/11996664/android-sherlock-actionbar-up-button)的重复

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2015-12-18T09:45:23.067

更简单更好：对于 API >= 16

只需为 Manifest 中的每个活动添加“parentActivityName”。后退按钮将自动将您带到父活动。

```
<activity
        android:name="com.example.myfirstapp.DisplayMessageActivity"
        android:label="@string/title_activity_display_message"
        android:parentActivityName="com.example.myfirstapp.MainActivity" > 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2015-12-22T10:34:44.053

使用它来显示后退按钮并移至上一个活动，

```
final ActionBar actionBar = getSupportActionBar();
        assert actionBar != null;
        actionBar.setDisplayHomeAsUpEnabled(true);
        actionBar.setHomeAsUpIndicator(R.drawable.back_dark);

@Override
    public boolean onOptionsItemSelected(final MenuItem item) {

        switch (item.getItemId()) {
            case android.R.id.home:
                onBackPressed();
                return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    } 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2015-02-24T09:15:23.920

如果其他人需要解决方案

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    int id = item.getItemId();

    if (id == android.R.id.home) {
        onBackPressed();
    }

    return super.onOptionsItemSelected(item);
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-04-17T18:11:21.870

在 onCreate() 方法中添加这一行

```
getSupportActionBar().setDisplayHomeAsUpEnabled(true); 
```

然后覆盖此方法

```
 @Override
    public boolean onSupportNavigateUp(){
        finish();
        return true;
    } 
```

# mysql - 将长重复结果分组/聚类到数据列中

> ID：12070752
> 
> 赞同：0
> 
> 时间：2012-08-22T10:04:21.213
> 
> 标签：mysql

我在 mysql 而不是 excel 中收集一些信息。为每种细胞类型定义了一些标签，并非所有标签都存在。所以，我有 3 个标签、信息和单元格表。

```
select cell_name, label, information from onco_celldb_information as info 
left join onco_celldb_cells as cell on cell.`celldb_cell_id` = info.`celldb_cell_id`
left join onco_celldb_labels as label on info.`celldb_label_id` = label.`celldb_label_id`
order by cell.celldb_cell_id asc; 
```

结果是：

[在 http://f.cl.ly/items/0m2k1a410s3D0K2Y0l1u/Screen%20Shot%202012-08-22%20at%2011.57.36%20AM.png 上面运行查询](http://f.cl.ly/items/0m2k1a410s3D0K2Y0l1u/Screen%20Shot%202012-08-22%20at%2011.57.36%20AM.png)

但是我想要的是有这样的东西：

```
CellName    Species     CellType    Origin
---------+-----------+-----------+-----------
P-815      Murine      Mastroxxxx    Human
L292      Something      Megatrone    Mouse 
```

所以让它们按单元名称分组，并将结果作为列。如果标签不存在，则只有 NULL （某些结果可能不存在标签）。

你有什么建议？

用数据库结构编辑：

```
mysql> describe celldb_cells;
+----------------+------------------+------+-----+---------+----------------+
| Field          | Type             | Null | Key | Default | Extra          |
+----------------+------------------+------+-----+---------+----------------+
| celldb_cell_id | int(11) unsigned | NO   | PRI | NULL    | auto_increment |
| cell_name      | varchar(256)     | YES  |     | NULL    |                |
+----------------+------------------+------+-----+---------+----------------+

describe celldb_information;
+-----------------------+------------------+------+-----+---------+----------------+
| Field                 | Type             | Null | Key | Default | Extra          |
+-----------------------+------------------+------+-----+---------+----------------+
| celldb_information_id | int(11) unsigned | NO   | PRI | NULL    | auto_increment |
| celldb_cell_id        | int(11) unsigned | YES  | MUL | NULL    |                |
| celldb_label_id       | int(11) unsigned | NO   | MUL | NULL    |                |
| information           | text             | YES  |     | NULL    |                |
+-----------------------+------------------+------+-----+---------+----------------+

describe celldb_labels;
+-----------------+------------------+------+-----+---------+----------------+
| Field           | Type             | Null | Key | Default | Extra          |
+-----------------+------------------+------+-----+---------+----------------+
| celldb_label_id | int(11) unsigned | NO   | PRI | NULL    | auto_increment |
| label           | varchar(256)     | YES  |     | NULL    |                |
+-----------------+------------------+------+-----+---------+----------------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:28:30.797

您尝试做的事情称为 a `PIVOT`，不幸的是 MySQL 没有函数，但您可以使用语句和聚合函数`PIVOT`复制它。`CASE`

如果您提前知道所有标签并且它们的数量是可管理的，那么您可以像这样对它们进行硬编码：

```
SELECT cell_name,
  MAX(CASE WHEN label = 'Cell Type' THEN information END) 'Cell Type',
  MAX(CASE WHEN label = 'DSMZ no.' THEN information END) 'DSMZ no.'
FROM test
GROUP BY cell_name 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/e7582/1)

使用您的查询，您可以执行以下操作：

```
SELECT cell_name,
  MAX(CASE WHEN label = 'Cell Type' THEN information END) 'Cell Type',
  MAX(CASE WHEN label = 'DSMZ no.' THEN information END) 'DSMZ no.'
from onco_celldb_information as info 
left join onco_celldb_cells as cell 
  on cell.`celldb_cell_id` = info.`celldb_cell_id`
left join onco_celldb_labels as label 
  on info.`celldb_label_id` = label.`celldb_label_id`
GROUP BY cell_name 
```

但是，看起来您将拥有未知数量的列，因此您将需要使用准备好的语句：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'MAX(case when label = ''',
      label,
      ''' then information end) AS ''',
      label, ''''
    )
  ) INTO @sql
FROM test;

SET @sql = CONCAT('SELECT cell_name, ', @sql, ' FROM test
group by cell_name');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/e7582/18)

因此，对于您的具体示例，如果将类似于：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'MAX(case when label = ''',
      label,
      ''' then information end) AS ''',
      label, ''''
    )
  ) INTO @sql
FROM onco_celldb_labels;

SET @sql = CONCAT('SELECT cell_name, ', @sql, ' 
from onco_celldb_information as info 
left join onco_celldb_cells as cell 
  on cell.`celldb_cell_id` = info.`celldb_cell_id`
left join onco_celldb_labels as label 
  on info.`celldb_label_id` = label.`celldb_label_id`              
group by cell_name');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:15:48.953

如果您知道标签的数量，则可以“旋转”数据，使行成为标签。

```
select cell_name,
  max(case when info.celldb_label_id = 1 then information else NULL end) as LabelForInfo1,
  max(case when info.celldb_label_id = 2 then information else NULL end) as LabelForInfo2,
  max(case when info.celldb_label_id = 3 then information else NULL end) as LabelForInfo3,
  ..
from
 onco_celldb_cells as cell
 left join onco_celldb_information as info on cell.celldb_cell_id = info.celldb_cell_id
group by cell.celldb_cell_id, cell.cell_name
order by cell.celldb_cell_id asc; 
```

如果不知道标签的数量和名称 - 您可以根据中的信息动态构建上述查询`onco_celldb_labels`。因此，首先通过执行以下查询为上述查询生成“动态”列：

```
select concat(
  'max(case when info.celldb_label_id = ',
   convert(celldb_label_id,char),
   ' then information else NULL end) as `',
   label,
   '`,')
from celldb_labels 
```

现在将**所有返回的行**连接到一个字符串中，添加主查询的开头和结尾并执行。这样你就有了动态标签。据我所知，这是在 MySQL 中透视表的唯一方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T10:14:00.560

这不是一个非常漂亮的解决方案，但是如果您只想要几个标签作为列并且您可以指定哪些标签，这样的事情应该可以工作：

```
SELECT
    s1.cell_name AS cell_name,
    s2.information AS Species,
    s3.information AS Origin
    -- Keep adding selects here for more columns
FROM
    (SELECT distinct cell_name FROM onco_celldb_information) AS s1
    LEFT JOIN onco_celldb_information AS s2
        ON (s1.cell_name = s2.cell_name AND s2.label = 'Species')
    LEFT JOIN onco_celldb_information AS s3
        ON (s1.cell_name = s3.cell_name AND s3.label = 'Origin')
    -- Keep adding more joins here for further columns you want. 
```

# unix - 如何从 Oracle Forms 运行 Unix 命令

> ID：12070756
> 
> 赞同：0
> 
> 时间：2012-08-22T10:04:32.460
> 
> 标签：unix, oas

操作系统：UNIX Solaries，Oracle 应用服务器 10g

要从 Oracle Forms 运行 shell 脚本，我使用了以下内容`host('/bin/bash /u01/compile.sh')`，它运行良好

现在，我需要运行类似的 unix 命令

`host('mv form1.fmx FORM1.FMX')`但它不工作

我试图将命令附加 `mv form1.fmx FORM1.FMX'`到 compile.sh shell 脚本，但它也不起作用，尽管 shell 脚本的其余行运行良好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:06:05.307

解决方案是只添加 mv 命令的完整路径，它运行良好，如下

`/bin/mv /u01/oracle/runtime/test/form1.fmx /u01/oracle/runtime/test/FORM1.FMX`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-12-10T12:07:57.283

如果其他人遇到同样的问题，原因是 Forms 进程创建了一个子进程来执行`host()`命令，并且该子进程继承了父进程的环境变量，这些环境变量来自`default.env`（或服务器配置中定义的其他 env 文件）。该文件中定义了一个`PATH`变量，但它不包含通常的`/bin`or `/usr/bin`，因此除非指定完整路径，否则这些命令将不会执行。

解决方案是在执行的脚本（通过`export PATH=$PATH:...`）或在`default.env`. 我在脚本中设置了它，因为了解 Oracle，不能保证修改`default.env`不会破坏某些东西。

# javascript - 选择小于数组中变量的最大数字

> ID：12070757
> 
> 赞同：9
> 
> 时间：2012-08-22T10:04:37.500
> 
> 标签：javascript, arrays

我有一个 JavaScript 数组和一个像这样的变量；

```
var a = [0, 1200, 3260, 9430, 13220],
    b = 4500; 
```

选择数组中仍然小于或等于变量的最大值的最聪明的方法是什么？

在这个例子中，我需要选择`3260`.

我可以做这样的事情；

```
$.each(a, function(i){
    if(a[i] <= b && a[i+1] > b){
        var c = a[i];
        return false;
    }
}); 
```

但我认为如果选定的数组值是最后一个值，那可能不起作用。更不用说，对我来说，它看起来像是很多相当简单的代码。

有没有更聪明/更简洁的方式来实现我所追求的？

*（是的，我知道我不应该为此使用 jQuery 循环，但我在输入示例时很懒）*

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-22T10:23:57.397

另一种方法是通过数组过滤和 apply() 的组合，我认为这是一种非常易读的方法。对 filter() 的调用仅返回 a 中不满足谓词函数的元素数组，然后 apply() 以每个元素作为参数调用 Math.max。

```
var a = [1, 2, 3, 4, 5];
var b = 4;
var result = Math.max.apply(Math, a.filter(function(x){return x <= b})); 
```

结果将等于 4。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T10:09:37.923

```
var max = Number.MIN_VALUE;
for (var i = 0; i < a.length; i++) { 
  if (a[i] <= b && a[i] > max) { 
    max = a[i]; 
  } 
} 
```

我认为上述方法非常简单，可读，而且不是很冗长。另一种方法是使用`reduce`，如下所示：

```
var max = a.reduce(function (i, j) { return j <= b ? Math.max(i, j) : i }, Number.MIN_VALUE); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T10:19:42.990

a 数组是否总是排序的？在这种情况下，您可以按照这些行优化您的代码（您可能想要检查索引，我没有检查代码）：

```
var beginning = 0;
var end = a.length;
while ((end-beginning)>1) {
    var currentIndex = Math.floor((beginning+end)/2);;
    if (a[currentIndex] < b) {
        beginning = currentIndex;
    } else if (a[currentIndex] > b){
        end = currentIndex;
    } else {
        beginning=end=currentIndex;
    }
}
var max = a[beginning]; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-22T10:33:21.393

jQuery 的 grep()

```
 var a = [0, 1200, 3260, 9430, 13220],
 b = 4500; 
 var c= Math.max.apply( Math,$.grep(a,function(n){return n<=b}));
 document.write(c) 
```

[工作演示](http://jsfiddle.net/aWkcV/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-22T10:19:19.907

```
var closest = null;
$.each(a, function() {
    if ( closest == null || Math.abs(this - b) < Math.abs(closest - b) ) {
        closest = this;
    }
}); 
```

如果出于某种原因需要 jQuery 变体。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-22T10:20:34.703

以下应该做：

```
function getHigh(arr, max){
  var c;
  for(var i = 0, len=arr.length; i<len; i++){
    if(a[i] <= b) c=a[i];
    else return c;
  }
  return false;
}
```

# html - 使绝对定位的 div 扩展父 div 高度

> ID：12070759
> 
> 赞同：249
> 
> 时间：2012-08-22T10:04:41.607
> 
> 标签：html, css, position, master-pages, parent-child

正如您在下面的 CSS 中看到的，我想`child2`将自己定位在`child1`. 这是因为我目前正在开发的网站也应该在移动设备上运行，`child2`应该在底部，因为它包含我想要的导航，位于移动设备上的内容下方。- 为什么不是 2 个母版页？这是在整个 HTML 中重新定位的唯一 2 个`divs`，因此这个微小更改的 2 个母版页是多余的。

HTML：

```
<div id="parent">
    <div class="child1"></div>
    <div class="child2"></div>
</div> 
```

CSS：

```
parent { position: relative; width: 100%; }
child1 { width: auto; margin-left: 160px; }
child2 { width: 145px; position: absolute; top: 0px; bottom: 0px; } 
```

`child2`具有动态高度，因为不同的子站点可能具有或多或少的导航项。

我知道绝对定位的元素已从流中删除，因此被其他元素忽略。
我尝试`overflow:hidden;`在父 div 上进行设置，但这没有帮助，`clearfix`.

我最后的手段是 JavaScript 来`divs`相应地重新定位这两者，但现在我将尝试看看是否存在非 JavaScript 方式来执行此操作。

* * *

## 回答 #1

> 赞同：176
> 
> 时间：2012-08-22T10:20:02.607

您自己回答了这个问题：“我知道绝对定位的元素已从流中删除，因此被其他元素忽略。” 所以你不能根据绝对定位的元素来设置父母的高度。

您要么使用固定高度，要么需要涉及 JS。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-11-08T18:32:36.423

虽然拉伸到元素 with`position: absolute`是不可能的，但通常有一些解决方案可以避免绝对定位，同时获得相同的效果。看看这个在你的特殊情况下解决问题的小提琴**[http://jsfiddle.net/gS9q7/](http://jsfiddle.net/gS9q7/)**

诀窍是通过浮动两个元素来反转元素顺序，第一个向右，第二个向左，所以第二个首先出现。

```
.child1 {
    width: calc(100% - 160px);
    float: right;
}
.child2 {
    width: 145px;
    float: left;
} 
```

最后，向父级添加一个 clearfix 就完成了（请参阅[fiddle](http://jsfiddle.net/gS9q7/)以获得完整的解决方案）。

通常，只要具有绝对位置的元素位于父元素的顶部，您就很有可能通过浮动元素找到解决方法。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-11-18T19:09:06.507

有一个非常简单的方法可以解决这个问题。

您只需在父 div 中使用 display:none 复制相关 div 中 child1 和 child2 的内容。说 child1_1 和 child2_2。将 child2_2 放在顶部，将 child1_1 放在底部。

当您的 jquery（或其他）调用绝对 div 时，只需使用 display:block AND visibility:hidden 设置相应的相对 div（child1_1 或 child2_2）。相对子级仍然不可见，但会使父级的 div 更高。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-04-25T12:55:07.973

**[Feeela](https://stackoverflow.com/users/341201/feeela)是对的**，但是如果您像这样颠倒您的定位，您可以让父`div`元素收缩或扩展到子元素`div`：

```
.parent {
    position: absolute;
    /* position it in the browser using the `left`, `top` and `margin` 
       attributes */
}

.child {
    position: relative;
    height: 100%;
    width: 100%;

    overflow: hidden;
    /* to pad or move it around using `left` and `top` inside the parent */
} 
```

这应该适合你。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2019-11-05T02:58:04.383

这个问题是在 2012 年[flexbox](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flexible_Box_Layout)之前提出的。使用现代 CSS 解决这个问题的正确方法是使用媒体查询和移动设备的弹性列反转。不需要绝对定位。

[https://jsfiddle.net/tnhsaesop/vjftq198/3/](https://jsfiddle.net/tnhsaesop/vjftq198/3/)

**HTML：**

```
<div class="parent">
  <div style="background-color:lightgrey;">
    <p>
      I stay on top on desktop and I'm on bottom on mobile
    </p>
  </div>
  <div style="background-color:grey;">
    <p>
      I stay on bottom on desktop and I'm on top on mobile
    </p>
  </div>
</div> 
```

**CSS：**

```
.parent {
  display: flex;
  flex-direction: column;
}

@media (max-width: 768px) {
  .parent {
    flex-direction: column-reverse;
  }
} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-01-19T19:26:45.107

使用纯 JavaScript，您只需要使用**[getComputedStyle()](https://developer.mozilla.org/en-US/docs/Web/API/Window/getComputedStyle)**`static position`方法检索子元素的高度，然后使用**[HTMLElement.style](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/style)**属性将该检索值设置为同一个子元素的高度。`.child1``padding-top`

* * *

检查并运行以下**代码片段**以获取我上面描述的实际示例：

```
/* JavaScript */

var child1 = document.querySelector(".child1");
var parent = document.getElementById("parent");

var childHeight = parseInt(window.getComputedStyle(child1).height) + "px";
child1.style.paddingTop = childHeight;
```

```
/* CSS */

#parent { position: relative; width: 100%; }
.child1 { width: auto; }
.child2 { width: 145px; position: absolute; top: 0px; bottom: 0px; }
html, body { width: 100%;height: 100%; margin: 0; padding: 0; }
```

```
<!-- HTML -->

<div id="parent">
    <div class="child1">STATIC</div>
    <div class="child2">ABSOLUTE</div>
</div>
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-11-24T01:20:02.150

有一个非常简单的 hack 可以解决这个问题

这是一个说明解决方案的代码框：[https ://codesandbox.io/s/00w06z1n5l](https://codesandbox.io/s/00w06z1n5l)

**HTML**

```
<div id="parent">
  <div class="hack">
   <div class="child">
   </div>
  </div>
</div> 
```

**CSS**

```
.parent { position: relative; width: 100%; }
.hack { position: absolute; left:0; right:0; top:0;}
.child { position: absolute; left: 0; right: 0; bottom:0; } 
```

您可以使用 hack div 的定位来影响孩子自己定位的位置。

**这是一个片段：**

```
html {
  font-family: sans-serif;
  text-align: center;
}

.container {
  border: 2px solid gray;
  height: 400px;
  display: flex;
  flex-direction: column;
}

.stuff-the-middle {
  background: papayawhip
    url("https://camo.githubusercontent.com/6609e7239d46222bbcbd846155351a8ce06eb11f/687474703a2f2f692e696d6775722e636f6d2f4e577a764a6d6d2e706e67");
  flex: 1;
}

.parent {
  background: palevioletred;
  position: relative;
}

.hack {
  position: absolute;
  left: 0;
  top:0;
  right: 0;
}
.child {
  height: 40px;
  background: rgba(0, 0, 0, 0.5);
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
}
```

```
 <div class="container">
      <div class="stuff-the-middle">
        I have stuff annoyingly in th emiddle
      </div>
      <div class="parent">
        <div class="hack">
          <div class="child">
            I'm inside of my parent but absolutely on top
          </div>
        </div>
        I'm the parent
        <br /> You can modify my height
        <br /> and my child is always on top
        <br /> absolutely on top
        <br /> try removing this text
      </div>
    </div>
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-07-31T14:28:58.267

我想出了另一个解决方案，我不喜欢但可以完成工作。

基本上以不可见重复项的方式复制子元素。

```
<div id="parent">
    <div class="width-calc">
        <div class="child1"></div>
        <div class="child2"></div>
    </div>

    <div class="child1"></div>
    <div class="child2"></div>
</div> 
```

CSS：

```
.width-calc {
    height: 0;
    overflow: hidden;
} 
```

如果这些子元素包含很少的标记，那么影响就会很小。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-07-02T16:16:06.333

我有一个类似的问题。为了解决这个问题（而不是使用正文、文档或窗口计算 iframe 的高度），我创建了一个包含整个页面内容的 div（例如，一个 id="page" 的 div），然后我使用了它的高度。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-02-28T20:06:33.057

> “你要么使用固定高度，要么需要 JS。”

这是 JS 示例：

---------- jQuery JS 示例--------

```
 function findEnvelopSizeOfAbsolutelyPositionedChildren(containerSelector){
        var maxX = $(containerSelector).width(), maxY = $(containerSelector).height();

        $(containerSelector).children().each(function (i){
            if (maxX < parseInt($(this).css('left')) + $(this).width()){
                maxX = parseInt($(this).css('left')) + $(this).width();
            }
            if (maxY < parseInt($(this).css('top')) + $(this).height()){
                maxY = parseInt($(this).css('top')) + $(this).height();
            }
        });
        return {
            'width': maxX,
            'height': maxY
        }
    }

    var specBodySize = findEnvelopSizeOfAbsolutelyPositionedSubDivs("#SpecBody");
    $("#SpecBody").width(specBodySize.width);
    $("#SpecBody").height(specBodySize.height); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-10-11T01:23:48.530

这与@ChrisC 的建议非常相似。它不是使用绝对定位元素，而是使用相对元素。也许可以为你工作

```
<div class="container">
  <div class="my-child"></div>
</div> 
```

你的CSS是这样的：

```
.container{
    background-color: red;
    position: relative;
    border: 1px solid black;
    width: 100%;
}

.my-child{
    position: relative;
    top: 0;
    left: 100%;
    height: 100px;
    width: 100px;
    margin-left: -100px;
    background-color: blue;
} 
```

[https://jsfiddle.net/royriojas/dndjwa6t/](https://jsfiddle.net/royriojas/dndjwa6t/)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-03-19T05:48:19.570

现在有更好的方法来做到这一点。您可以使用底部属性。

```
 .my-element {
      position: absolute;
      bottom: 30px;
    } 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-05-01T17:51:19.900

还要考虑下一种方法：

CSS：

```
.parent {
  height: 100%;
}
.parent:after {
  content: '';
  display: block;
} 
```

另外，由于您正在尝试重新定位 div，请考虑 css 网格

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2018-08-21T10:00:29.107

绝对视图将自己定位在最近的非静态定位的祖先（`position: static`）上，因此如果你想要一个绝对视图定位在给定的父级上，请将父级设置`position`为`relative`，将子级设置`position`为`absolute`

* * *

## 回答 #15

> 赞同：-4
> 
> 时间：2016-10-18T04:31:59.600

试试这个，它对我有用

```
.child {
    width: 100%;
    position: absolute;
    top: 0px;
    bottom: 0px;
    z-index: 1;
} 
```

它将子高度设置为父高度

# javascript - tinyMCE 点击外部，textarea 隐藏

> ID：12070763
> 
> 赞同：3
> 
> 时间：2012-08-22T10:04:47.000
> 
> 标签：javascript, jquery, tinymce, textarea

我有一个 tinyMCE textarea，在名为 text_editor 的 div 中。所以我在我的 jQuery 中有：

```
$('#text_editor').hover(function(){ 
           mouse_is_inside=true; 
   }, function(){ 
           mouse_is_inside=false; 
   });

$('body').mouseup(function(){
    if(! mouse_is_inside){
            $('#text_editor').hide();

    }
}); 
```

当用户在 div 文本编辑器外部单击时，它会隐藏，但如果用户选择字体系列或字体大小，文本编辑器会隐藏，所以我在我的 jQuery 中添加：

```
$(document).on('click', '.mceMenuItem, .mceColorSplitMenu, .mceBottom, .mceMoreColors', function(e){
       e.stopPropagation(); 
       $('#text_editor').show();
    }); 
```

这解决了开销问题。但是，如果用户单击颜色选择器-更多颜色，则会打开一个新窗口，并且 text_editor 会隐藏，而我不希望这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:14:12.357

## *[演示](http://jsbin.com/ecawab/2/edit)*

```
var $editor = $('#text_editor');

$('textarea').click(function(e){
  e.stopPropagation();
  $editor.fadeTo(400,1);
});

$('body').on('click', function ( e ) {
  if( !($(e.target).is('#text_editor')) && $editor.is(':visible') ){
    $editor.hide();
  }
}); 
```

# java-me - 如何在 LWUIT 中创建超链接

> ID：12070765
> 
> 赞同：1
> 
> 时间：2012-08-22T10:04:50.357
> 
> 标签：java-me, lwuit

我想使用 lwit 创建一个超链接，我想在我的表单屏幕上显示它？当我点击链接时，它应该导航到链接，我已经为 LCDUI 尝试过这个，我得到了结果，但我不知道，如何使用 LWUIT 来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T10:42:20.620

lwit 中没有对超链接的具体控制。但是，我们可以使用按钮创建超链接外观。

```
Button btnHyperlink = new Button("Hyperlink");
btnHyperlink.getUnselectedStyle().setBorder(null);
btnHyperlink.getSelectedStyle().setBorder(null);
btnHyperlink.getUnselectedStyle().setFont(Font.createSystemFont(Font.FACE_SYSTEM,Font.STYLE_UNDERLINED, Font.SIZE_MEDIUM));
btnHyperlink.getSelectedStyle().setFont(Font.createSystemFont(Font.FACE_SYSTEM,Font.STYLE_UNDERLINED | Font.STYLE_BOLD, Font.SIZE_MEDIUM));
btnHyperlink.getUnselectedStyle().setFgColor(0x0000ff);
btnHyperlink.getSelectedStyle().setFgColor(0x0000ff); 
```

要在单击按钮时导航到另一个链接，请在按钮的操作侦听器中编写导航代码。

# extjs - 如何在右键单击时获取矢量图层的特征

> ID：12070766
> 
> 赞同：1
> 
> 时间：2012-08-22T10:04:52.603
> 
> 标签：extjs, openlayers

我是openlayers的新手，我有左键单击矢量图层的功能，但现在我需要右键单击矢量图层的功能，这可能吗？请帮忙！

我的代码是：

```
selectControl = new OpenLayers.Control.SelectFeature(vector2,
{multiple:false, click:true , onSelect: onFeatureSelect, onUnselect: onFeatureUnselect}

); 
map.addControl(selectControl);
selectControl.activate(); 
```

# javascript - extjs 动态地将项目添加到表单面板中

> ID：12070769
> 
> 赞同：1
> 
> 时间：2012-08-22T10:05:01.150
> 
> 标签：javascript, extjs3, form-layout

使用 ExtJS 3.4 - 我有一个表单面板，它连续布置了三个按钮。我相信这样做的正确方法是嵌套项目块，代码显示了我在做什么。

```
var myPanel = new Ext.form.FormPanel({
    id:'myPanel',
    height:300,
    width: 800,
    items:[{
        layout : 'column' ,border:false,buttonAlign : 'left', bodyStyle : 'padding:15px 20px 0',
        items:[{
                      layout:'column' , border:false,  
                      items:[saveSelectedButton, deleteSelectedButton, cancelButton ]
               }]
      }]

}); 
```

我真正需要做的是动态添加按钮，因此项目块首先是空的`items:[]`，然后我调用

```
myPanel.add(saveSelectedButton, deleteSelectedButton, cancelButton); 
```

但按钮呈现在一列中，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:08:19.043

使用 of`buttons`代替`items`是更优选的方式。

```
var myPanel = new Ext.form.FormPanel({
// ... 
    buttons:[saveSelectedButton, deleteSelectedButton, cancelButton]  
}); 
```

要动态添加它们，您应该使用`addButton`方法。例如

```
var form = new Ext.form.FormPanel({
        title: 'Test',
        el: 'test',
        url: '',
        method: '',
        items: [{}],
        buttons: [{}]
    });
    form.addButton({
        text: 'Test Button',
        id: 'test-button',
        type: 'submit'
    });
    form.render(); 
```

# css - 在单个定义中同时使用 % 和 px 的 Firefox 和 Safari 定位

> ID：12070770
> 
> 赞同：0
> 
> 时间：2012-08-22T10:05:01.510
> 
> 标签：css, firefox, safari, css-position, percentage

几分钟前，我偶然发现了一个非常奇怪的现象。

看来 Firefox 和 Safari 不会只解释

```
left: -50%; 
```

和

```
left: -50px; 
```

但是也

```
left: -50%px; 
```

我创建了一个[JSFiddle](http://jsfiddle.net/NSSSE/)来演示这种行为。

尝试将 .strangePositioner 类的 CSS 更改为上述三个值中的任何一个，您将看到每个值不同的结果。

我最初的意图是将元素定位在外部 div 的左侧，其宽度由内部内容定义（在示例中称为“stretcher”）。由于不小心打错了 CSS 定义，我最终得到了正确的结果，然后意外地发现它不是一个有效的定义。或者我是这么想的。

问：为什么浏览器会以他们的方式解释它，它（除了语法问题）是有效的 CSS 吗？如果它不是有效的 CSS，它不符合什么标准？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:30:50.677

我只是在看你的 jsfiddle，并且能够通过简单地省略任何 left 参数或使用 left: 0; 来让 BOOM 与左侧对齐。

因此，我将得出结论，FF 和 Safari 会看到您的 %px 并将该行视为无效，从而保留默认值 left: auto (0)

如果你使用 firebug 计算值检查它，你会看到元素上没有定义 left，它继承了 left: auto;

繁荣！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:16:19.577

`left: -50%px;`不是有效的 css，请使用`%`或`px`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T10:16:51.327

我观察了结果并玩了一下。奇怪的是如何改变`top`值实际上会影响左侧的位置。我有时也会用相同的代码得到不同的结果。绝对没有有效的 css [http://www.w3.org/TR/css3-values/](http://www.w3.org/TR/css3-values/)。不会指望它表现得可以预测，绝对不会跨浏览器。我的建议是坚持使用有效的 CSS！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T10:32:24.310

它的无效 CSS 和有效的 CSS 解析器（如大多数浏览器中的解析器）将删除声明并使用默认或继承的左值。你不应该使用它，因为我在我尝试的每个浏览器中都有相同的结果，所以你看到的结果可能是特定于你的设置的，并且可能会随着下一次 firefox 更新而改变。

下面是我在 FF(14)、Safari、Chrome(21) 中得到的结果图片

![所有浏览器结果](../Images/3e4532b41040f2bcf909eeca611661a6.png)

# javascript - TinyMCE 文本区域无法编辑

> ID：12070776
> 
> 赞同：7
> 
> 时间：2012-08-22T10:05:34.990
> 
> 标签：javascript, jquery, tinymce

这是问题所在。在我的 php 提交页面中，我有一个包含多个字段的表单，包括一个当前正在使用 TinyMCE 的 textarea，我还可以选择复制现有表单。问题是我无法编辑被复制的第二个编辑器，但编辑器出现在 textarea 位置。但是我可以编辑和保存第一个编辑器。我不确定它是一个错误还是只是我做错了什么？我也尝试更新 TinyMCE 但没有用..有什么想法吗？

```
function initTinyMCE() {
   tinyMCE.init({
       mode : "textareas", //mode : "exact", elements : "mytextarea"
       theme : "simple"
   });
}
initTinyMCE();

$(document).ready( function(){
    $('a#addmore').live('click', function(){

         //*clone the existing form and inserting form here*
         initTinyMCE(); 
    });

    $('a#toSubmit').live( 'click', function() {
      tinyMCE.triggerSave();
      $('.editwork-form').submit();
});

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T10:47:45.707

我似乎无法开始`.clone()`工作，调试控制台中也没有任何内容。但是，我的工作解决方案如下，也许这有帮助？

```
initTinyMCE();

$("#append").live("click", function() {
    var ta_count = $("textarea").length;

    var elem = document.createElement("textarea");
    $(elem).attr("id", ta_count.toString());
    $(elem).appendTo("#ta_container");

    initTinyMCE();
});

function initTinyMCE() {
    tinyMCE.init({
        mode: "textareas",
        theme: "simple",
        theme_advanced_path: false
    });
}​ 
```

而不是`.clone()`ing 元素，我只是创建一个新元素`textarea`并将其附加到容器中（使用页面上所有 textareas 的计数作为它的 ID 使其唯一），然后重新调用 tinyMCE 初始化程序。

[示例 jsFiddle](http://jsfiddle.net/h8b6L/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:41:30.880

确保你的文本区域有不同的 id，否则不会有第二个编辑器实例！这在创建 tinymce 编辑器实例时至关重要。

# camera - 驾驶 Point Grey Grasshopper 相机时出现问题

> ID：12070778
> 
> 赞同：1
> 
> 时间：2012-08-22T10:05:40.340
> 
> 标签：camera, hardware, hardware-interface, firewire

我正在尝试使用笔记本电脑驱动两台来自 Point Gray Research 的 Grasshopper 相机。由于我的笔记本电脑（通常是大多数笔记本电脑）没有任何 FireWire 800 端口，我使用的是 FireWire 800 转 Express Card 设备，它包含两个 FireWire 800 端口。

我正在尝试使用 FlyCapture（Point Grey 的 SDK）提供的示例代码来捕获示例图像。当我在笔记本电脑上运行这些示例时，它们显示错误“启动同步流时出错”。但是，我可以在桌面上运行相同的示例并且可以成功捕获图像。

请注意，驱动摄像头的电源似乎不是问题，因为两个摄像头都显示发光的 LED。

我还使用 libdc1394 库编写了一个示例代码来列出连接到机器的活动摄像头。在我的笔记本电脑上运行此代码后，它显示两个摄像头已连接。（这可能意味着问题在于捕蝇）

有没有人遇到过类似的问题？或者你们中的任何人都可以使用笔记本电脑成功地驱动一两个蚱蜢相机吗？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T16:53:51.747

我是 Point Grey 支持团队的 Nina。我可以帮助你解决你的问题。

摄像机在您的台式 PC 上运行良好但在笔记本电脑上产生同步流错误这一事实表明摄像机运行良好。我怀疑当您通过笔记本电脑上的 express 卡同步运行两个摄像头时，您遇到了带宽问题。由于 Express 卡可以支持的带宽是 S800，如果您尝试以全帧速率和分辨率运行两个蚱蜢，您可能从相机生成的数据比 Express 卡可以支持的更多。请尝试降低您的两台摄像机的帧速率或分辨率，或者尝试仅运行一台摄像机，并让我知道它是否能正常播放。

您要运行什么 FlyCapture 示例代码？您使用的是哪种蚱蜢模型？当您在 PC 上测试摄像头时，您是否在两条单独的火线总线上运行摄像头？

请告诉我。您也可以通过发送电子邮件至 support@ptgrey.com 与我们联系

问候，尼娜

# telerik - Telerik 报告：详细信息带中的淀粉线或添加空行

> ID：12070782
> 
> 赞同：0
> 
> 时间：2012-08-22T10:05:46.973
> 
> 标签：telerik, reporting, telerik-reporting

我正在尝试在 Telerik 报告设计中生成一种销售账单格式。

我需要像细节带一样的输出，以适应页面大小。就像添加空白行一样。我在详细信息带中使用了表格。

细节带或表格中是否有任何属性适合页面大小？或者我必须手动添加空白行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T01:46:22.243

您可以`Docking`通过选择表格然后使用属性窗口设置值来设置属性。

通过单击值框并选择 将其设置为填充`Fill`。

或者，您可以只键入`Fill`.

# windows - 如何开始 windows phone 8 应用程序开发？

> ID：12070785
> 
> 赞同：4
> 
> 时间：2012-08-22T10:06:00.980
> 
> 标签：windows, windows-phone-8

我是移动应用程序开发的新手...我想开发 windows phone 8 应用程序。你能回答我以下的问题吗

1.  开发WP8应用需要哪些软件？
2.  硬件要求是什么？
3.  听说 SDK for WP* 还没上市，是真的吗？什么时候上市？

谢谢你和问候Yashavantha GM

# ruby-on-rails - 测试 Nokogiri XML 的属性

> ID：12070786
> 
> 赞同：3
> 
> 时间：2012-08-22T10:06:02.013
> 
> 标签：ruby-on-rails, xml, rspec, tdd, nokogiri

使用 RSpec 我如何/应该测试以确保元素存在并具有指定的值

在我的示例中，我希望确保我有一个值为 1.0 的 EnvelopeVersion，我还希望查看一个测试以确保 EnvelopeVersion 存在

```
def self.xml_header
   builder = Nokogiri::XML::Builder.new do |xml|
  xml.Root{
     xml.EnvelopeVersion "1.0"
  }
   end
   builder.to_xml
end 
```

我试过这个，但它失败了未定义的方法“has_node？” 为了 ＃

```
it 'should create valid header' do
   doc = GEM::xml_header
   doc.should have_node("EnvelopeVersion ")
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T16:11:30.910

您的解决方案可以简化：

```
doc = Nokogiri::XML::Document.parse(GEM::xml_header)    
doc.xpath('//Root/EnvelopeVersion').text.should eq("1.0") 
```

可以简化为：

```
doc = Nokogiri::XML(GEM::xml_header)    
doc.at('EnvelopeVersion').text.should eq("1.0") 
```

Nokogiri 有两种主要的“查找”方法：[`search`](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-search)和[`at`](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-at). 它们是通用的，因为它们同时接受 XPath 和 CSS 访问器。`search`返回所有匹配节点的 NodeSet，并`at`返回第一个匹配的节点。

还有一些方法[`at_xpath`](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-at_xpath)，[`at_css`](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-at_css)如果你想要一些更易记的东西，还有[`xpath`](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-xpath)and [`css`](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-css)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T11:16:29.623

我最终在我的测试中使用 nokogiri 来解析生成的 xml 并查询它

```
require 'nokogiri'

describe 'function' do
  describe '.xml_header' do
    it 'should create valid header' do
        doc = Nokogiri::XML::Document.parse(GEM::xml_header)    
        doc.xpath('//Root/EnvelopeVersion').text.should eq("1.0")
    end     
  end
end 
```

# php - 在 PHP 中调用未定义的函数

> ID：12070790
> 
> 赞同：-3
> 
> 时间：2012-08-22T10:06:18.287
> 
> 标签：php, function, while-loop

我有一个 PHP 代码，我用它来显示从我的数据库到网页的评论列表。

代码-

```
while ($row = mysqli_fetch_assoc($query)) { // Loop through results of query

  if ($row['depth'] > $cur_depth) {
   if($row['depth'] == 1){
   echo "<ul>\n";
    runthis();
    $cur_depth = $row['depth'];
   }
    else   if($row['depth'] == 2){
      echo "<ul class='selected'>\n";
      runthat();
      $cur_depth = $row['depth'];
    }
    else{
    echo "<ul>\n";
    runthats();
    $cur_depth = $row['depth'];
    }
  }
  else while ($cur_depth > $row['depth']) {
    echo "</ul>\n";
    $cur_depth--;
  }
  function runthis(){
  echo "<li id=" .$row['depth'] . " class='some_class'>" . $row['comment'] . " &nbsp;id-". $row['category_id'] ."<a href='' id='toggle-cm'>reply</a><br/><div id='commentarea'><textarea row=5 cols=40>write something here...</textarea><br/><button id=" . $row['category_id'] . ">reply to this comment</button></div></li>\n";
  }

  function runthat(){
  echo "<li id=" .$row['depth'] . ">" . $row['comment'] . " &nbsp;id-". $row['category_id'] ."<a href='' id='toggle-cm'>reply</a><br/><div id='commentarea'><textarea row=5 cols=40>write something here...</textarea><br/><button id=" . $row['category_id'] . ">reply to this comment</button></div></li>\n";
  }
}
while ($cur_depth > -1) {
  echo "</ul>\n";
  $cur_depth--;
} 
```

它所做的是从 sql 数据库中获取评论并以分层方式显示它。`$row['depth']`是存储评论深度的变量。现在，我想为has = 1`some_class`的元素添加类，并为has = 2 的元素分配一些属性。`<li>``row['depth']``<ul>``row['depth']`

原始代码运行良好，但我对其进行了一些修改以分配类和属性。

原始代码-

```
while ($row = mysqli_fetch_assoc($query)) { // Loop through results of query
  if ($row['depth'] > $cur_depth) {
    echo "<ul>\n";
    $cur_depth = $row['depth'];
  }
  else while ($cur_depth > $row['depth']) {
    echo "</ul>\n";
    $cur_depth--;
  }
  echo "<li>" . $row['comment'] . "id-". $row['category_id'] ."<a href='' id='toggle-cm'>reply</a><br/><div id='commentarea'><textarea row=5 cols=40>write something here...</textarea><br/><button id=" . $row['category_id'] . ">reply to this comment</button></div></li>\n";
}
while ($cur_depth > -1) {
  echo "</ul>\n";
  $cur_depth--;
} 
```

现在，我想要实现的是对原始代码进行一些更改，以便将一些不同的属性分配给具有深度的元素`<li>`，`row['depth'] = 1`并将一些不同的属性应用于深度为`<ul>`2 的元素。使用修改后的代码时出现错误我展示了。

错误-

```
Fatal error: Call to undefined function runthat() 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:08:00.323

代替：

```
runthats(); 
```

经过

```
runthat(); 
```

并且暂时不要使用该功能

# haskell - 无法使用“外国”指针获得 C2HS 工作

> ID：12070800
> 
> 赞同：5
> 
> 时间：2012-08-22T10:06:49.640
> 
> 标签：haskell, ffi, c2hs

# 一般信息

我目前正在试验 Haskell 的 C->Haskell (C2HS) 接口生成器。乍一看，这真是太棒了，我`extern C`在短短几个小时内就连接了一个相当复杂的 C++ 库（使用一个小的 -wrapper）。（而且我以前从未做过任何 FFI。）

只有一个问题：如何释放 C/C++ 库中分配的内存？我`{#pointer ... foreign #}`在[C2HS 文档](http://www.cse.unsw.edu.au/~chak/haskell/c2hs/docu/implementing.html#id315561)中找到了，这看起来与我所追求的完全一样。由于我的 C-wrapper 将 C++ 库转换为具有引用透明性和功能接口的库，因此 Haskell 存储管理器应该能够为我完成艰苦的工作:-)。不幸的是，我无法让这个工作。为了更好地解释我的问题，我[在 GitHub 上建立了一个小型演示项目，](https://github.com/weissi/c2hs-experiments)它与 C/C++ 库+包装器具有相同的属性，但没有开销。如您所见，该库与`pure unsafe`FFI 一起使用是完全安全的。

# 演示项目

在 GitHub 上，我创建了一个[小型演示项目](https://github.com/weissi/c2hs-experiments)，组织如下：

## C 库

C 库非常简单且无用：您可以将整数传递给它，然后可以`[0..n]`从库中获取尽可能多的整数（当前）。记住：这个库没用，只是一个演示。该接口也非常简单：该函数`LTIData lti_new_data(int n)`将（在传递一个整数之后）返回某种不透明的对象，其中包含 C 库的已分配数据。该库还有两个访问器函数`int lti_element_count(LTIData data)`，`int lti_get_element(LTIData data, int n)`前者将返回元素的数量，后者将返回元素`n`。啊，最后但并非最不重要的一点是，图书馆的用户应该在使用它之后释放不透明`LTIData`的`void lti_free_data(LTIData data)`.

*   [实验/C2HSBinding/Foreign/lib_to_interface.h](https://github.com/weissi/c2hs-experiments/blob/master/Experiment/C2HSBinding/Foreign/lib_to_interface.h)
*   [实验/C2HSBinding/Foreign/lib_to_interface.c](https://github.com/weissi/c2hs-experiments/blob/master/Experiment/C2HSBinding/Foreign/lib_to_interface.c)

## 低级 Haskell 绑定

低级 Haskell 绑定是使用 C2HS 设置的，您可以在

*   [实验/C2HSBinding/Foreign/HsLTI.chs](https://github.com/weissi/c2hs-experiments/blob/master/Experiment/C2HSBinding/Foreign/HsLTI.chs)

## 高级 Haskell API

为了好玩，我还设置了一种使用低级 API 绑定[的高级 Haskell API和一个使用高级 API 的](https://github.com/weissi/c2hs-experiments/blob/master/Experiment/C2HSBinding/HsLTIHighlevel.hs)[简单驱动程序](https://github.com/weissi/c2hs-experiments/blob/master/Experiment/C2HSBinding/TestHsLTIHighlevel.hs)。使用驱动程序和例如 valgrind 可以很容易地看到泄漏的内存（对于每个参数`p_1, p_2, ..., p_n`，库都会进行`\sum_{i = 1..n} 1 + p_i`分配；如下所示很容易观察到）：

```
$ valgrind dist/build/TestHsLTI/TestHsLTI 100             2>&1 | grep -e allocs -e frees
==22647==   total heap usage: 184 allocs, 74 frees, 148,119 bytes allocated

$ valgrind dist/build/TestHsLTI/TestHsLTI 100 100         2>&1 | grep -e allocs -e frees
==22651==   total heap usage: 292 allocs, 80 frees, 181,799 bytes allocated

$ valgrind dist/build/TestHsLTI/TestHsLTI 100 100 100     2>&1 | grep -e allocs -e frees
==22655==   total heap usage: 400 allocs, 86 frees, 215,479 bytes allocated

$ valgrind dist/build/TestHsLTI/TestHsLTI 100 100 100 100 2>&1 | grep -e allocs -e frees
==22659==   total heap usage: 508 allocs, 92 frees, 249,159 bytes allocated 
```

## 演示的当前状态

您应该能够通过简单地键入来克隆、编译和运行[项目](https://github.com/weissi/c2hs-experiments.git)`git clone https://github.com/weissi/c2hs-experiments.git && cd c2hs-experiments && cabal configure && cabal build && dist/build/TestHsLTI/TestHsLTI`

# 那么又是什么问题呢？

问题是该项目只使用而不是使用 C2HS 的`Foreign.Ptr`“托管”版本，我无法让它工作。在演示项目中，我还添加了一个[文件，尝试使用这些外部指针](https://github.com/weissi/c2hs-experiments/blob/2192a229c48ae367ba5b9c1c97f4c0c4cc288ec4/Experiment/C2HSBinding/Foreign/HsLTIManaged.chs)，但它不起作用:-(。我非常努力地尝试，但没有成功。`Foreign.ForeignPtr``{#pointer ... foreign #}`[`.chs`](https://github.com/weissi/c2hs-experiments/blob/2192a229c48ae367ba5b9c1c97f4c0c4cc288ec4/Experiment/C2HSBinding/Foreign/HsLTIManaged.chs)

还有一件事我也不明白：如何使用 C2HS 告诉 GHC 如何释放图书馆的数据。演示项目的库提供了一个函数`void lti_free_data(LTIData data)`，应该调用它来释放内存。但是GHC猜不到！？！如果 GHC 使用常规 a `free()`，则并非所有内存都会被释放:-(。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:10:31.777

问题已解决：我发现[这个文件在互联网上做了类似](http://darcsden.com/komadori/HsQML/browse/src/Graphics/QML/Internal/Objects.chs)的事情并且能够解决它:-)。

它所需要的只是一些样板编组代码：

```
foreign import ccall "lib_to_interface.h &lti_free_data"
  ltiFreeDataPtr :: FunPtr (Ptr (LTIDataHs) -> IO ())

newObjectHandle :: Ptr LTIDataHs -> IO LTIDataHs
newObjectHandle p = do
  fp <- newForeignPtr ltiFreeDataPtr p
  return $ LTIDataHs fp 
```

这是[文件的](https://github.com/weissi/c2hs-experiments/blob/master/Experiment/C2HSBinding/Foreign/HsLTIManaged.chs)[最终托管 ( `ForeignPtr`) 版本`.chs`](https://github.com/weissi/c2hs-experiments/blob/master/Experiment/C2HSBinding/Foreign/HsLTIManaged.chs)。

# powershell - 使用 PowerShell 重命名 FTP 上的文件

> ID：12070808
> 
> 赞同：5
> 
> 时间：2012-08-22T10:07:31.827
> 
> 标签：powershell, ftp, rename, webclient

有没有办法重命名 FTP 目录中的文件？我正在将实时图像从计算机传输到 FTP，但问题是当它将图像上传到 FTP 时，它会立即替换文件。我想先上传带有临时名称的图像，然后重命名为 live.jpg。这就像缓存文件上传一样。

```
while($true)
{
    $i++
    $File = "c:\live\temp.jpg"
    $ftp = "ftp://username:password@example.com/camera/temp.jpg"

    $webclient = New-Object System.Net.WebClient
    $uri = New-Object System.Uri($ftp)

    $webclient.UploadFile($uri, $File)
} 
```

如何在脚本中正确使用它？

```
Rename-Item ..\camera\temp.jpg live.jpg 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T14:46:56.073

试试这个：

```
$ftp = [System.Net.FtpWebRequest]::Create("ftp://username:password@example.com/camera/temp.jpg")
$ftp.KeepAlive = $true
$ftp.UsePassive = $true
$ftp.Method = "Rename"
$ftp.RenameTo = "camera/temp1.jpg"
$ftp.UseBinary = $true
$response = [System.Net.FtpWebResponse] $ftp.GetResponse() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-18T14:05:01.637

```
$ftp = [System.Net.FtpWebRequest]::Create("ftp://username:password@example.com/camera/temp.jpg")
$ftp.KeepAlive = $true
$ftp.UsePassive = $true
$ftp.Method = "Rename"
$ftp.RenameTo = "camera/temp1.jpg"
$ftp.UseBinary = $true
$response = [System.Net.FtpWebResponse] $ftp.GetResponse() 
```

我不得不调整 $ftp.RenameTo 行并删除目录以使其对我有用：

```
$ftp.RenameTo = "temp1.jpg" 
```

不管怎么说，还是要谢谢你

# drupal - 如果预告片被修剪，如何添加省略号？

> ID：12070809
> 
> 赞同：0
> 
> 时间：2012-08-22T10:07:39.063
> 
> 标签：drupal, drupal-7

如何？

我的长度设置为 600 个字符`manage diplsay`，

但它只是切断了内容，

并且有时存在延续并不明显。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T06:51:25.723

我找到了另一个名为“Smart Trim”的模块，它对我很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:23:58.260

[Field Ellipsis](http://drupal.org/project/field_ellipsis)模块将添加一个字段格式化程序来满足您的需求。

# autobahn - 如何在 autobahnPython 中确认客户

> ID：12070811
> 
> 赞同：0
> 
> 时间：2012-08-22T10:07:59.930
> 
> 标签：autobahn

我用autobahnPython + autobahnJs 设置了一个聊天服务。

现在我想要一个功能，当客户端连接 wamp 时，聊天室的成员列表会自动更新。如何实现这个功能？

```
def onSessionOpen(self): 
```

我想在 onSessionOpen 函数中添加动作，但我不知道下一步该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:21:20.073

一种方法是：每个聊天室都有一个专用的 PubSub 主题。当 WAMP 客户端订阅“聊天室主题”时，它会自动添加到该聊天室的订阅者列表中。订阅保存在`self.factory.subscriptions[<topic URI>]`. 请注意，后者是一个内部对象......不是公共 API。我们需要更多地了解您还想做什么.. 即有一个 RPC 来获取聊天室等的当前订阅者。

免责声明：我是 WAMP、Autobahn 的作者，并为 Tavendo 工作。

# java - 如何从 JSP 调用 JFrame？

> ID：12070818
> 
> 赞同：-2
> 
> 时间：2012-08-22T10:08:27.767
> 
> 标签：java, swing, jsp, applet, jframe

我想知道如何从 jsp 调用 JFrame。当我点击浏览器上的按钮时，我想调用 frame. 但我不知道该怎么做。如果你不是我的，请解释一下。

这是一些代码！

```
package testing;

import javax.swing.JPanel;
import javax.swing.JApplet;
import javax.swing.JList;
import java.awt.Rectangle;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.IOException;
import java.security.Key;
import java.security.KeyStore;
import java.security.KeyStoreException;
import java.security.NoSuchAlgorithmException;
import java.security.PrivateKey;
import java.security.UnrecoverableKeyException;
import java.security.cert.Certificate;
import java.security.cert.CertificateException;
import java.security.cert.X509Certificate;
import java.util.Enumeration;
import java.util.Vector;

import javax.swing.JLabel;
import javax.swing.JPasswordField;
import javax.swing.JButton;

public class LoadFile extends JApplet implements ActionListener{

    private JPanel jContentPane = null;
    private JList listCertificate = null;
    private JLabel jLabel = null;
    private JPasswordField password = null;
    private JButton btnLoad = null;
    private JLabel jLabel1 = null;

    /**
     * This is the xxx default constructor
     */
    public LoadFile() {
        super();
    }

    /**
     * This method initializes this
     * 
     * @return void
     */
    public void init() {
        this.setSize(400, 306);
        this.setContentPane(getJContentPane());
    }

    /**
     * This method initializes jContentPane
     * 
     * @return javax.swing.JPanel
     */
    private JPanel getJContentPane() {
        if (jContentPane == null) {
            jLabel1 = new JLabel();
            jLabel1.setBounds(new Rectangle(28, 19, 296, 30));
            jLabel1.setText("Choose your certificate");
            jLabel = new JLabel();
            jLabel.setBounds(new Rectangle(54, 228, 88, 26));
            jLabel.setText("Password");
            jContentPane = new JPanel();
            jContentPane.setLayout(null);
            jContentPane.add(getListCertificate(), null);
            jContentPane.add(jLabel, null);
            jContentPane.add(getPassword(), null);
            jContentPane.add(getBtnLoad(), null);
            jContentPane.add(jLabel1, null);
        }
        return jContentPane;
    }

    /**
     * This method initializes listCertificate  
     *  
     * @return javax.swing.JList    
     */
    private JList getListCertificate() {
        if (listCertificate == null) {
            listCertificate = new JList();
            listCertificate.setBounds(new Rectangle(26, 56, 345, 149));
            Vector<String> alias = getAlias();
            listCertificate.setListData(alias);
        }
        return listCertificate;
    }

    /**
     * This method initializes password 
     *  
     * @return javax.swing.JPasswordField   
     */
    private JPasswordField getPassword() {
        if (password == null) {
            password = new JPasswordField();
            password.setBounds(new Rectangle(152, 224, 171, 28));
        }
        return password;
    }

    /**
     * This method initializes btnLoad  
     *  
     * @return javax.swing.JButton  
     */
    private JButton getBtnLoad() {
        if (btnLoad == null) {
            btnLoad = new JButton();
            btnLoad.setBounds(new Rectangle(189, 261, 70, 30));
            btnLoad.setText("Load");
            btnLoad.addActionListener(this);
        }
        return btnLoad;
    }

    public Vector<String> getAlias(){
        Vector<String> str = new Vector<String>();
        KeyStore ks;
        try {
            ks = KeyStore.getInstance("Windows-MY");
            ks.load(null, null);
            Enumeration en = ks.aliases();
            String aliasName = "";
            while (en.hasMoreElements()) {
                aliasName = (String) en.nextElement();
                str.add(aliasName);
            }

        } catch (KeyStoreException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (NoSuchAlgorithmException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (CertificateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return str;
    }

    @Override
    public void actionPerformed(ActionEvent arg0) {
        // TODO Auto-generated method stub
        Object obj = arg0.getSource();
        if(obj == btnLoad){
            String alias = (String)getListCertificate().getSelectedValue();
            String password = getPassword().getText();

        }
    }

}  //  @jve:decl-index=0:visual-constraint="294,19" 
```

我想从 JSP 调用那个类。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:33:20.313

> 当我点击浏览器上的按钮时，我想调用 frame.

[使用Java Web Start](https://stackoverflow.com/tags/java-web-start/info)直接从 HTML 链接（或按钮）启动框架。

# mysql - MySQL：如何锁定表并启动事务？

> ID：12070820
> 
> 赞同：5
> 
> 时间：2012-08-22T10:08:35.067
> 
> 标签：mysql, transactions, locking, data-consistency

*TL;DR - MySQL 不允许您同时锁定表和使用事务。有没有办法解决？*

我有一个 MySQL 表，用于缓存来自（慢）外部系统的一些数据。该数据用于显示网页（用 PHP 编写）。每隔一段时间，当缓存的数据被认为太旧时，其中一个 Web 连接应该触发缓存数据的更新。

我必须处理三个问题：

*   在我更新缓存数据时，其他客户端会尝试读取缓存数据
*   多个客户端可能认为缓存数据太旧并尝试同时更新它
*   执行工作的 PHP 实例随时可能意外终止，数据不应损坏

我可以通过使用事务来解决第一个和最后一个问题，因此客户端将能够读取旧数据，直到事务提交，他们将立即看到新数据。任何问题只会导致事务回滚。

我可以通过锁定表来解决第二个问题，这样只有一个进程有机会执行更新。当任何其他进程获得锁定时，他们会意识到他们已经被打败了，不需要更新任何东西。

这意味着我需要锁定表*并*启动事务。根据 MySQL 手册，[这是不可能的](http://dev.mysql.com/doc/refman/5.6/en/lock-tables-and-transactions.html)。启动事务会释放锁，锁定表会提交任何活动事务。

有没有办法解决这个问题，还是有另一种方法可以完全实现我的目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-07T15:13:52.783

> 这意味着我需要锁定表并启动事务

您可以这样做：

```
SET autocommit=0;
LOCK TABLES t1 WRITE, t2 READ, ...;
... do something with tables t1 and t2 here ...
COMMIT;
UNLOCK TABLES; 
```

有关详细信息，请参阅[mysql 文档](https://dev.mysql.com/doc/refman/5.0/en/lock-tables-and-transactions.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T11:40:59.110

如果是我，我会使用 MySQL 中的[咨询锁定功能](http://dev.mysql.com/doc/refman/4.1/en/miscellaneous-functions.html#function_get-lock)来实现用于更新缓存的互斥锁和用于读取隔离的事务。例如

```
begin_transaction(); // although reading a single row doesnt really require this
$cached=runquery("SELECT * FROM cache WHERE key=$id");
end_transaction();

if (is_expired($cached)) {
   $cached=refresh_data($cached, $id);
}
...

function refresh_data($cached, $id)
{
 $lockname=some_deterministic_transform($id);
 if (1==runquery("SELECT GET_LOCK('$lockname',0)") {
    $cached=fetch_source_data($id);
    begin_transaction();
    write_data($cached, $id);
    end_transaction();
    runquery("SELECT RELEASE_LOCK('$lockname')");
 }
 return $cached; 
} 
```

（顺便说一句：如果您尝试使用持久连接，可能会发生不好的事情）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-11-16T08:29:57.920

我建议通过完全消除争用来解决问题。

将时间戳列添加到缓存数据。

当您需要更新缓存数据时：

*   只需使用当前时间戳将新的缓存数据添加到您的表中
*   删除早于 24 小时的缓存数据。

当您需要提供缓存数据时

*   按时间戳（DESC）排序并返回最新的缓存数据

在任何给定时间，您的客户都将检索从未被任何其他进程删除的记录。此外，您不关心客户端是否获取属于不同写入的缓存数据（即具有不同时间戳）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T10:59:11.127

第二个问题完全不用数据库就可以解决。为缓存更新过程设置一个锁定文件，以便其他客户端知道有人已经在上面了。这可能无法捕捉到每一个极端情况，但如果两个客户端同时更新缓存，这有什么大不了的吗？毕竟，他们在事务中对缓存的更新仍然会保持一致。

您甚至可以通过将上次缓存更新时间存储在表中来自己实现锁定。当客户端想要更新缓存时，使其锁定该表，检查最后更新时间，然后更新字段。

即，实现您自己的锁定机制，以防止多个客户端更新缓存。交易将负责其余的工作。

# c# - 从组件派生的自定义控件 - OnCreate 事件？

> ID：12070821
> 
> 赞同：2
> 
> 时间：2012-08-22T10:08:36.303
> 
> 标签：c#, winforms, user-controls

我创建了简单的自定义控件 - 从 Component 类派生：

```
public partial class TrialChecker : Component
{
    private int _trialDays;

    public int TrialDays
    {
        get { return _trialDays; }
        set { _trialDays = value;}
    }

    public TrialChecker()
    {
        InitializeComponent();

        MessageBox.Show(TrialDays.ToString());

    }

    public int GetTrialDays()
    {
        return _trialDays;
    }
} 
```

此控件将用于在我的应用程序中实现试用功能。应用程序（在它开始之前）应检查剩余试用天数并显示包含试用剩余天数的通知对话框和写入解锁密钥的文本框。

但我想在使用此控件时尽量减少编写所需的代码量。所以，我的想法是将试用检查代码放在我的控件中，并且 - 在创建控件之后，它应该显示剩余天数。

试用期（TrialDays 属性）在用户设计器上设置，它应该可以在创建控件后使用。如您所见，我尝试将其放入构造函数但它不起作用，因为在将 TrialDays 设置为在用户设计器中输入的值之前调用了构造函数。并且 MessageBox 始终显示默认值 0。

没有任何 OnLoad 或 OnCreate 事件可以覆盖。那么，如何使用设计器中输入的值自动检查试用状态？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T11:34:21.097

Component 类非常简单，它只是提供了一种在设计时将组件托管在窗体上的方法，从而可以通过“属性”窗口访问其属性。但它没有值得注意的有用事件，使用组件需要在表单中显式代码。像 OpenFormDialog 一样，在调用它的 ShowDialog() 方法之前，它什么也不会发生。

构造函数是可用的，但不幸的是它运行得太早了。DesignMode 属性告诉您组件是否在设计时运行但在构造时尚未设置。您需要延迟代码，这很困难，因为没有其他方法或事件稍后运行。

一种解决方案是使用您在其上放置组件的表单的事件。就像 Load 事件一样。这需要一些令人眼花缭乱的代码来诱使设计师告诉您有关表单的信息。该技术由 ErrorProvider 组件使用，它需要公开 ContainerControl 类型的属性并覆盖 Site 属性设置器。像这样：

```
using System;
using System.ComponentModel;
using System.ComponentModel.Design;
using System.Windows.Forms;

public partial class Component1 : Component {
    private ContainerControl parent;

    [Browsable(false)]
    public ContainerControl ContainerControl {
        get { return parent; }
        set {
            if (parent == null) {
                var form = value.FindForm();
                if (form != null) form.Load += new EventHandler(form_Load);
            }
            parent = value;
        }
    }

    public override ISite Site {
        set {
            // Runs at design time, ensures designer initializes ContainerControl
            base.Site = value;
            if (value == null) return;
            IDesignerHost service = value.GetService(typeof(IDesignerHost)) as IDesignerHost;
            if (service == null) return;
            IComponent rootComponent = service.RootComponent;
            this.ContainerControl = rootComponent as ContainerControl;
        }
    }

    void form_Load(object sender, EventArgs e) {
        if (!this.DesignMode) {
            MessageBox.Show("Trial");
        }
    }
} 
```

代码是高深莫测的，但您可以非常确定它是可靠且稳定的，因为这就是 ErrorProvider 组件所使用的。一定要在试用期结束时调用 Environment.Exit()，异常不会正常工作。

# android - 如何检查活动是否可见？onResume 是不够的

> ID：12070824
> 
> 赞同：5
> 
> 时间：2012-08-22T10:08:51.637
> 
> 标签：android, android-activity, android-lifecycle

我的一项活动嵌入`VideoView`播放一些内容。`onPause()`我分别在和中实现了暂停/恢复视频`onResume()`，但令我惊讶的是 -`onResume`在活动对用户真正可见之前被调用。

确切地说，场景如下：

*   活动在屏幕上，正在播放视频
*   用户使用电源按钮锁定手机
*   活动被`onPause()`调用，视频停止
*   用户按下电源按钮
*   **在用户解锁屏幕之前**调用活动 `onResume()`（并因此恢复视频）

 **我在 Android 2.2、2.3 和 4.0 中确认了这种行为。我想这是故意这样做的，让活动准备在锁定屏幕消失后立即重绘自己。

如何检测活动实际出现在用户面前的时刻？我试图等待`onWindowFocusChanged(true)`被叫，它似乎工作，但它并没有让我感到完全安全。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T13:46:47.170

您需要等待 onWindowFocusChanged 事件以及 OnResume 事件。这是一个众所周知的问题，在 Android 4.1+ 中不再出现。详情请访问[http://android-developers.blogspot.co.uk/2011/11/making-android-games-that-play-nice.html](http://android-developers.blogspot.co.uk/2011/11/making-android-games-that-play-nice.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T10:37:28.883

一般来说`onResume`应该足够了，但对于你的特殊情况，我相信你应该恢复视频`onResume()`，而不是当用户解锁他的屏幕时。

要实现这一点，您需要制作一个`BroadcastReceiver`监听名为的意图：`Intent.ACTION_USER_PRESENT`，并`onReceive`恢复您的视频。

> Intent.ACTION_USER_PRESENT：
> 在设备唤醒后用户在场时发送（例如，当键盘保护消失时）。
> 这是一个只能由系统发送的受保护意图。**

# c# - 使用后面的代码弹出 aspx 确认消息

> ID：12070829
> 
> 赞同：3
> 
> 时间：2012-08-22T10:09:07.733
> 
> 标签：c#, asp.net, onclientclick

我需要向 OnClientClick 事件返回确认消息。问题是我必须从存储过程中获取消息，而且我似乎没有正确调用我的函数。

```
 <asp:ImageButton 
OnClientClick="return confirm(<%# GetConfirmExportMessage()%>);"            
OnClick="btnExportRed_Click" 
runat="server" 
ImageUrl="~/Images/excel_red.gif" 
ID="btnExportRed" 
AlternateText="Export all records!"/> 
```

我背后的代码：

```
public string GetConfirmExportMessage()
    {
        string xmlFilterForExport = Parameters.ToString().Split('+')[4].Trim();
        string alertMessage = companiesSearcher.GetAlertMessage(xmlFilterForExport, 1, null, null, IdSegment, 1, Convert.ToInt32(RoDB2004.BLL.clsUsers.UserID));

        return alertMessage;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T10:12:07.100

尝试使用等号而不是磅（不要忘记单引号）。

```
OnClientClick="return confirm('<%= GetConfirmExportMessage()%>');" 
```

但是，如果您的 ImageButton 位于 DataGrid 或 GridView 内，则不会评估服务器端代码，并会发出警告说 <%= GetConfirmExportMessage()%> 而不是真正的消息。

为了解决这个问题（并提高性能、吞吐量等），将消息输出一次到变量，然后警告变量的内容。

```
<script language="JavaScript">
    var myMessage = '<%= GetConfirmExportMessage()%>';
</script> 
```

后来，在 GridView...

```
OnClientClick="return confirm(myMessage);" 
```

您可以通过重复像“myMessage”这样的小变量名称来节省吞吐量，并避免重复一些大消息。另请注意，该方法`GetConfirmExportMessage`不会被调用数十次以提高性能。

如果您的消息特定于当前行中的数据，而不是像“您确定吗？”这样的静态信息，那么我建议您在 GridView 的`RowDataBound`事件中执行此操作。您将拥有`ImageButton`对当前行绑定到的数据的完全访问权限，这使得设置服务器端变得非常容易。查看该`FindControl()`方法，或者如果您知道确切的位置，只需引用它并将对象拆箱即可。

```
protected void gvMyGrid_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        ImageButton ibtn = (ImageButton)e.Row.FindControl("btnExportRed");
        if(ibtn != null)
        {
            ibtn.ClientClick = "return confirm('" + GetConfirmExportMessage() + "');";
        }
    }
} 
```

作为替代解决方案，也许您应该研究 WebMethods、AJAX 和 jQuery。此解决方案可能更好，因为数据不会发送到客户端，仅在必要时检索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:11:43.927

你可能想要

```
OnClientClick="return confirm('<%= GetConfirmExportMessage()%>');" 
```

请注意，这将在呈现页面时填充，而不是在单击按钮时填充，因此您不妨使用

```
btnExportRed.OnClientClick = "javascript:return confirm('" + GetConfirmExportMessage() + "');" 
```

在你的代码后面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T10:12:11.610

你需要把你的确认包裹在`'`

```
<asp:ImageButton 
    OnClientClick="return confirm('<%# GetConfirmExportMessage()%>');"            
    OnClick="btnExportRed_Click" 
    runat="server" 
    ImageUrl="~/Images/excel_red.gif" 
    ID="btnExportRed" 
    AlternateText="Export all records!"/> 
```

# blackberry - 仅显示 EditField 的数字键盘

> ID：12070835
> 
> 赞同：1
> 
> 时间：2012-08-22T10:09:24.163
> 
> 标签：blackberry, java-me, blackberry-jde, virtual-keyboard

我有编辑字段。我只想用数字显示虚拟键盘，没有字母。可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:15:32.133

```
editText.setInputType(InputType.TYPE_CLASS_NUMBER); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T06:46:12.823

你也可以使用

```
object.setFilter(TextFilter.get(TextFilter.NUMERIC)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T00:31:53.157

您可以构造 EditField 并`EditField.FILTER_NUMERIC`作为样式传递：http: [//www.blackberry.com/developers/docs/7.0.0api/net/rim/device/api/ui/component/BasicEditField.html#FILTER_NUMERIC](http://www.blackberry.com/developers/docs/7.0.0api/net/rim/device/api/ui/component/BasicEditField.html#FILTER_NUMERIC)

或者

您可以致电`EditField.setFilter()` [http://www.blackberry.com/developers/docs/7.0.0api/net/rim/device/api/ui/component/BasicEditField.html#setFilter(net.rim.device.api.ui.text .TextFilter)](http://www.blackberry.com/developers/docs/7.0.0api/net/rim/device/api/ui/component/BasicEditField.html#setFilter(net.rim.device.api.ui.text.TextFilter))并传入一个`TextFilter`. 使用静态`TextFilter.get()`函数并从`TextFilter`类中传入其中一个过滤器常量，例如[http://www.blackberry.com/developers/docs/7.0.0api/net/rim/device/api/ui/text/TextFilter.html ＃数字](http://www.blackberry.com/developers/docs/7.0.0api/net/rim/device/api/ui/text/TextFilter.html#NUMERIC)

数字过滤器只接受非负整数（0 - 999999999 及以上），整数过滤器接受所有负数、零和正数，REAL_NUMERIC 接受任何十进制数（负数、零数、正数，带可选小数点）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T21:05:51.900

`amount->setInputMode(bb::cascades::TextFieldInputMode::NumbersAndPunctuation);`

您可以在此处找到所有类型： [https ://developer.blackberry.com/cascades/reference/bb__cascades__textfieldinputmode.html](https://developer.blackberry.com/cascades/reference/bb__cascades__textfieldinputmode.html)

# objective-c - 无法在屏幕上获取 AVPlayerLayer 中视频的大小

> ID：12070838
> 
> 赞同：2
> 
> 时间：2012-08-22T10:09:44.943
> 
> 标签：objective-c, ios, avfoundation, avplayer, avplayerlayer

我有一个包含视频播放器（AVPlayer）的图层（AVPlayerLayer）的视图。

我使用[developer.apple.com](https://developer.apple.com/library/archive/documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/02_Playback.html#//apple_ref/doc/uid/TP40010188-CH3-SW1)的代码在屏幕上显示视频。

```
@implementation PlayerView
+ (Class)layerClass {
    return [AVPlayerLayer class];
}
- (AVPlayer*)player {
    return [(AVPlayerLayer *)[self layer] player];
}
- (void)setPlayer:(AVPlayer *)player {
    [(AVPlayerLayer *)[self layer] setPlayer:player];
}
@end 
```

我如何在 playerview.frame 中获取视频的大小？我不能使用*videoGravity*来填充视图的整个帧，因为我需要显示横向和纵向视频。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-09T14:36:58.073

您可以使用`videoRect`. [您可以在文档](https://developer.apple.com/library/ios/documentation/AVFoundation/Reference/AVPlayerLayer_Class/)`AVPlayerLayer`中阅读有关它的更多信息。

# mysql - Wordpress 迁移 - MySQL guid 列

> ID：12070842
> 
> 赞同：0
> 
> 时间：2012-08-22T10:09:56.213
> 
> 标签：mysql, sql, wordpress

我对 wordpress 迁移有一点问题。我已经从本地 WAMP 服务器上的 csv 批量上传帖子，因为它更快，然后上传并导入 SQL 转储到远程服务器。

在表格的`guid`列中`wp_posts`，它包含帖子的 url - 我想（可能是错的，如果我错了，请更正）这与编辑帖子时的“永久链接”设置相同 - 所有这些`http://localhost/post-name/`都是现在很好，如果需要，我很乐意处理 SQL 查询来替换。

我已经上传了 SQL 转储，它仍然`http://localhost/post-name`按预期在远程服务器数据库中显示“”。但是，当我在前端搜索帖子时，只是为了确保它可以正常接收帖子，我希望链接会给我一个 404 错误，直到我更改了链接，但它们没有——它们很好地指向`http://remoteserver.com/post-name/`

这是一个很好的问题，因为它仍然有效 - 我想知道为什么&我需要改变它吗？如果可能的话，我宁愿不要弄乱数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:35:47.553

迁移时，您可能需要在 wp-config.php 中定义您的 wordpress url，我建议使用[此工具](http://interconnectit.com/124/search-and-replace-for-wordpress-databases/)查找并替换数据库。它非常简洁，因为它从您的配置文件中预先填充了您的数据库。显然，您将替换`http://localhost/`为`http://www.yoursite.com/`

```
define('WP_HOME','http://example.com');
define('WP_SITEURL','http://example.com'); 
```

# javascript - 仅获取列表中的 ID

> ID：12070843
> 
> 赞同：1
> 
> 时间：2012-08-22T10:09:56.940
> 
> 标签：javascript, salesforce, apex-code, visualforce

我正在尝试在 mapquest 中找到 2 个位置之间的距离。我通过硬编码 JavaScript 中的值来做到这一点。现在我正在尝试从 2 个帐户中获取值，并使用纬度和经度的值来查找距离。我创建了一个控制器，在控制器中我有一个记录列表 Longitude_c*和 Latitude_c*，我已经将值传递到我循环并添加到数组中的 JavaScript。直到它工作正常，但我的问题是我只从数组中获取 Id 而不是 Latitude_ *c 和 Longitude* _c 字段的值。

```
 <apex:page id="pageId" standardController="Account"       extensions="checkDistanceController">
  <script src="http://www.mapquestapi.com/sdk/js/v7.0.s/mqa.toolkit.js?     key=Fmjtd%7Cluua250221%2C2a%3Do5-9620ua"></script>

   <script type="text/javascript">

   function checkDistance(distance1) {
        alert('{!listzise}');
        var listsizeJs = {!listzise};
        alert(listsizeJs);
        var AcLon=new Array();
         var AcLat=new Array();
         var JsAcLst=new Array();

        var idx = 0;
         <apex:repeat value="{!acLst}" var="ele">
             JsAcLst[idx++]="{!ele}";
        </apex:repeat>

        for(var i=0; i<listsizeJs ; i++){
            alert("in for loop" + i);
            var llone={lat:40.730318, lng:-73.990603};   
            var llTow={lat:34.043897, lng:-118.209373};
            alert('Accunt List Apex : {!acLst}');
            alert('Accunt List JsLst:'+ JsAcLst[i]);

         }
             var distance = MQA.Util.arcDistance(llone, llTow, 'm');
            var distance1 = MQA.Util.distanceBetween(llone, llTow, 'm');
           alert(" Account Distance ........ " + Act_Distance);

           document.getElementById("pageId:formId:theBlock:pageBlockSectionid1:outputId1").innerHTML=distance;
           document.getElementById("pageId:formId:theBlock:pageBlockSectionid1:outputId2").innerH    TML=distance1;

 };

    </script>

     <apex:form id="formId">

            <apex:pageBlock title="Check Distance Between Vendors" mode="edit"  id="theBlock" >
                  <apex:pageBlockButtons location="both"> 
                          <apex:commandButton value="Find Distance" action="{!chkDistance}" onclick="checkDistance()" reRender="distanceID"/>

                  </apex:pageBlockButtons>
                  <apex:pageBlockSection columns="2" id="pageBlockSectionid1">

                          <apex:outputText id="outputId1" label="Arc `Distance :"></apex:outputText>
                           <apex:outputText id="outputId2" label="Distance Between :"></apex:outputText>

                 </apex:pageBlockSection>
            </apex:pageBlock>

      </apex:form>
</apex:page> 
```

控制器

```
 public with sharing class checkDistanceController 
{

    public String Account { get; set; }

     public Account theAccount{get;set;}
     public Event_Equipment__c theEventEquipment{get;set;}
     public string Longitude {get;set;}
      public string Latitude {get;set;}
      public list<Account> acLst {get; set;}
     public decimal listzise{get;set;}
      list<Account> acLst = new list<Account>();

     public checkDistanceController(ApexPages.StandardController controller) {
         acLst = [Select Latitude__c, Longitude__c from Account where Longitude__c != null and Latitude__c != null limit 2];
        listzise = acLst.size();
   }
     } 
```

谁能帮我解决这个问题。

谢谢阿努

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:07:57.997

您想将经度和纬度作为一个字符串放入数组吗？尝试这个：

```
<apex:repeat value="{!acLst}" var="ele">
    JsAcLst[idx++]="{!ele.Latitude__c},{!ele.Longitude__c}";
</apex:repeat> 
```

# asp.net-mvc - 将模型映射到 dto 并仅“包含”该对 子元素的

> ID：12070844
> 
> 赞同：0
> 
> 时间：2012-08-22T10:09:57.283
> 
> 标签：asp.net-mvc, entity-framework, automapper

我收到了一个很好的实现表单，映射了嵌套子元素的键 (ID)（请参见此处：[将模型映射到 dto 并仅“包含”子元素的键](https://stackoverflow.com/questions/12067623/mapping-a-model-into-a-dto-and-include-only-the-key-of-child-element/12067659#comment16118935_12067659)），但在这里我搜索了一个稍微不同的解决方案，如下所述。

我有以下项目模型：

```
public class Project
{
    [Key]
    public int      ProjectID       { get; set; }
    public string   Name            { get; set; }
    public string   Description     { get; set; }     
    public virtual  ICollection<Screenshot> Screenshots { get; set; }   
} 
```

我有以下截图模型：

```
public class Screenshot
{
    [Key]
    public int    ScreenshotID { get; set; }
    public string ScreenshotName { get; set; }
    public byte[] ScreenshotContent { get; set; }
    public string ScreenshotContentType { get; set; }
} 
```

如您所见，每个项目都附有一些屏幕截图。在下面的函数中，我想检索一些项目，并且只检索对应截图的 ScreenshotID + ScreenshotName 对。

```
public SearchResultDTO<ProjectDTO> GetProjects(SearchParametersProjectDTO dto)
{
    ...
    var resultDTO = new SearchResultDTO<ProjectDTO>
    {
        Entities = Mapper.Map<IEnumerable<Project>, IEnumerable<ProjectDTO>>(projects.ToList()),
        TotalItems = projects.Count()
    };
    return resultDTO;
} 
```

这是项目DTO：

```
[DataContract]
public class ProjectDTO : BaseDTO<ProjectDTO, Project>
{
    [DataMember]
    public int ProjectID { get; set; }

    [DataMember]
    public string Name { get; set; }

    [DataMember]
    public string Description { get; set; }

    [DataMember]
    public Dictionary<int, string> Screenshots { get; set; } 
```

所以我不知道如何将“ScreenshotID + ScreenshotName”映射到我的 DTO 的 Screenshots 属性中。

任何帮助是极大的赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:16:21.313

您可以定义 and 之间的映射`Screenshot`和and 之间的`KeyValuePair<int, string>`映射：`Project``ProjectDTO`

```
Mapper
    .CreateMap<Screenshot, KeyValuePair<int, string>>()
    .ConvertUsing(s => new KeyValuePair<int, string>(s.ScreenshotID, s.ScreenshotName));

Mapper
    .CreateMap<Project, ProjectDTO>(); 
```

接着：

```
var project = new Project
{
    Screenshots = new[]
    {
        new Screenshot { ScreenshotID = 1, ScreenshotName = "name " + 1 },
        new Screenshot { ScreenshotID = 2, ScreenshotName = "name " + 2 },
        new Screenshot { ScreenshotID = 3, ScreenshotName = "name " + 3 },
    }
};

var projectDto = Mapper.Map<Project, ProjectDTO>(project);

// at this stage the projectDto.Screenshots dictionary will contain 
// the necessary information 
```

# dojo - NumberSpinner 约束在 DataGrid 中不起作用

> ID：12070845
> 
> 赞同：3
> 
> 时间：2012-08-22T10:09:58.953
> 
> 标签：dojo

我正在使用增强网格单元的内联编辑并有一个 NumberSpinner 元素。内联编辑时，此 numberspinner 的约束不起作用。所需的属性可以正常工作。我的代码：

```
{field: 'msorder', width: '10%', name: 'Milestone Order',editable: true, type: dojox.grid.cells._Widget, widgetClass: dijit.form.NumberSpinner, widgetProps: {required:true,smallDelta:1, editorParams:{constraints:{ min:-1000, max:1000, places:0 }} }} 
```

我也试过：

```
{field: 'msorder', width: '10%', name: 'Milestone Order',editable: true, type: dojox.grid.cells._Widget, widgetClass: dijit.form.NumberSpinner, widgetProps: {required:true,smallDelta:1, constraints:{ min:-1000, max:1000, places:0 } }} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T10:25:38.200

有一个更简单的解决方案，伙计们：

**约束：{min:0,max:24}**

`{field: "hours", name: "Stunden",type: dojox.grid.cells._Widget, widgetClass: dijit.form.NumberSpinner, constraint:{min:0,max:24}, widgetProps: {smallDelta:0.25, intermediateChanges:true,}},`

它必须在 widgetProps 之外并且以单数形式...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T12:18:42.897

我不知道`Dojo`您使用的是哪个版本，但 1.6 中存在一个已知错误，即网格小部件中忽略了约束。但是，我通过一些覆盖标准来解决这个问题`NumberSpinner`。

```
dojo.require("dijit.form.NumberSpinner");

dojo.addOnLoad(function() {

    dojo.declare("mySpinner", [ dijit.form.NumberSpinner], {

            validator: function(v, c){

                var MIN= -1000;
                var MAX = 1000;

                c.min= MIN;
                c.max = MAX ;
                return ((v < MAX ) && (v > MIN));   
            },

    });

    var dateBox = new mySpinner({}).placeAt('foo');
    dateBox.set("value", 1000);

}); 
```

（现在，在您的网格结构中，您`mySpinner`当然应该使用它，它应该可以解决问题）。

演示：http: [//jsfiddle.net/tvUaK/135/](http://jsfiddle.net/tvUaK/135/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T21:32:34.153

我用另一种方法来解决这个问题。我将单元格的类型定义为*小部件*，然后在 get 方法上创建小部件。

```
{
 field: 'msorder',
 width: '10%',
 name: 'Milestone Order',
 editable: true,
 type: dojox.grid.cells._Widget,
 get: function(rowIndex, item) {
   var store = this.grid.store,
       value = store.getValue(item, 'value');

   this.widget = new dijit.form.NumberSpinner({ value:0,
     constraints:{ min:-1000, max:1000 }
   });

   return value;
 }
} 
```

通过这个实现，我能够为网格上的每个单元格设置不同的约束。

# tridion - 是否有任何工具/方法可以创建/导入 XML 文件中的所有类别和关键字到 tridion

> ID：12070850
> 
> 赞同：8
> 
> 时间：2012-08-22T10:10:13.367
> 
> 标签：tridion, tridion-2011

我有一长串由一位客户提供的类别和关键字。有什么方法/工具可以避免一一手动创建它们。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T10:13:58.983

我不知道有任何现有的工具可以做到这一点，但可以构建一个使用 Content Manager .Net API 或核心服务（WCF Web 服务）接口以编程方式为您创建 C&K 的工具。就我个人而言，我可能会选择核心服务——如果你用谷歌搜索“sdl tridion 核心服务”，那么公共领域已经有大量信息可以帮助你更好地了解如何使用它。

这里有一篇特别好的文章 - [http://blog.building-blocks.com/creating-keywords-using-the-core-service-in-sdl-tridion-2011](http://blog.building-blocks.com/creating-keywords-using-the-core-service-in-sdl-tridion-2011)

# postgresql - Postgres：选择值的总和，然后再次求和

> ID：12070855
> 
> 赞同：16
> 
> 时间：2012-08-22T10:10:21.930
> 
> 标签：postgresql, select, sum

我尝试了很多，但找不到正确的方法。如果我在 Postgres 中选择值并将它们相加，它看起来像这样：

```
SELECT name,sum(size) as total
FROM mytable group by name order by name; 
```

我怎样才能改变这个，所以它也总和所有的值？我想我需要一个子选择，但如何？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-22T10:20:25.727

试试这个：

```
SELECT sum(a.total)
FROM (SELECT sum(size) as total
      FROM mytable group by name) a 
```

**更新** 对不起，我没有读到您希望在同一个查询中全部完成。出于这个原因，**格雷格**的答案更好。但是，如果您的 postgresql 版本 >= 9，则还有其他可能性：

```
WITH mytableWith (name, sum) as
     (SELECT name, sum(size)
      FROM mytable
      GROUP BY name)
SELECT 'grand total' AS name, 
       sum(sum) AS sum
FROM mytableWith
UNION ALL
SELECT name, sum
FROM mytableWith 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-02-27T19:33:06.010

我会在 POSTRGESQL 上使用 ROLLUP 函数：

```
SELECT name,sum(size) as total
FROM mytable 
group by ROLLUP(name )
order by name; 
```

这将为您提供聚合的任何值的总计，也可用于聚合多个列。

希望能帮助到你！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-22T11:37:56.370

如果您希望所有结果都具有相同的 SELECT，您可以执行类似的操作

```
SELECT 
  'grand total' AS name, 
   sum(size) AS sum 
FROM 
  mytable 
UNION ALL 
SELECT 
  name, 
  sum(size) AS sum 
FROM 
  mytable 
GROUP BY 
  name; 
```

希望对您有所帮助……</p>

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-22T10:20:42.270

那么这应该可以帮助你：

```
select sum(innerselect.innertotal) as outertotal from 
    (select sum(size) as innertotal from mytable group by name) as innerselect 
```

# excel - Excel - 条件格式 - 基于当前日期的更新

> ID：12070858
> 
> 赞同：1
> 
> 时间：2012-08-22T10:10:29.063
> 
> 标签：excel, vba

我将如何根据当前日期将条件格式应用于一系列单元格（Excel 2007）？

我有一个为期六周的计划（每列代表一周中的一天（周一到周五，不包括周末）），我想在没有任何用户交互的情况下将每一列涂成绿色，这样当我查看它，它将准确地“标记”每一天。

这就是我希望实现的目标：我在 1 月 1 日星期一查看计划。然后我要到 1 月 4 日星期四才能访问它；打开计划后，我将看到 MW 列已用绿色阴影显示，而六周剩余时间的计划其余部分保持无阴影，这应在六周计划的剩余时间内继续.

这可能吗？

我想VBA将用于检查系统时间，然后根据它是哪一天应用格式。

非常感谢。

**更新**

这是我的计划者的样子：

![规划师](../Images/3f68c3046d8c9906c1079eaa9157065f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:08:32.997

当然，这是可能的。以下内容应使您走上正轨。

首先，您可以通过在工作簿关闭时将当前日期/时间存储在单元格中来记录上次访问工作簿的时间。这可以使用`Workbook_BeforeClose`必须放在工作簿模块中的事件来完成。打开 VBA 编辑器 ( `Alt`- `F11`)，然后打开`ThisWorkbook`模块并将此代码粘贴到其中。

```
Private Sub Workbook_BeforeClose(Cancel As Boolean)
    Sheet1.Range("B2").Value = Now()
End Sub 
```

每次关闭工作簿时，都会在单元格 B2 中注明关闭时间的日期/时间（根据需要进行更改）。

在单元格 B3 中，使用`=NOW()`Excel 公式显示当前日期时间。单元格 B2 和 B3 现在定义了应突出显示列的间隔。

![在此处输入图像描述](../Images/04213c0c85608a818acd24744884d4a8.png)

然后如何格式化列...假设您的列具有上图中的日期标题。选择您的“日历”范围（上例中的 C5:I12），然后单击条件格式 > 新规则... > 使用公式。该公式应该`=AND(C$5>$B$2,C$5<$B$3)`意味着只有标题中的日期在上次关闭工作簿之后但现在之前（根据需要进行调整）的列将被格式化。单击`Format...`以选择例如绿色填充或其他。然后`OK`。

![在此处输入图像描述](../Images/2c91cce0bbb29fd72bdcc107704cc353.png)

当然，您可以通过多种方式对其进行改进（例如，在午夜四舍五入到前一天或第二天），但至少您现在应该走在正确的轨道上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:28:37.360

使用此条件格式公式：

=IF(DAYS360(日期(B$2;B$3;B$4);今天())>1;1;0)

所做的是如果（此列日期与今天之间的差异大于 1 天，为真，否则为假）

在像这样的工作表中使用它 ![在此处输入图像描述](../Images/5f9f440273f5e73eb55030fbf75ffaa1.png)

# html - 更改 Doxygen 输出中 index.html 文件的位置

> ID：12070865
> 
> 赞同：13
> 
> 时间：2012-08-22T10:11:06.270
> 
> 标签：html, documentation, doxygen

我正在使用 Doxygen 创建 html 输出。

我想自定义输出，以便 index.html 文件更引人注目，因为目前它被隐藏在 html 输出文件夹中的一个巨大文件列表的中间。

例如，如果将其上移一个目录以位于“点点滴滴” html 文件之外，那么其他正在寻找它的人将更容易访问它。但是，我不能只使用一行脚本将其复制到该位置，因为它拥有的所有链接都会中断。

如果我可以将 Doxygen 配置为让索引文件转到不同的位置，或者如果您能想到其他解决方案来解决我的问题，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2017-02-11T16:40:35.260

我会将文档留在原处，而是使用 HTML 语言的元刷新选项。在您想要的任何文件夹中放置一个文件，例如名为“Documentation.html”的文件，内容如下

```
<meta http-equiv="REFRESH" content="0;URL=RELATIVE/PATH/TO/index.html"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T12:57:28.660

正如我在对 OP 的评论中提到的，最简单的解决方案可能是为`index.html`doxygen 生成的文件创建一个符号链接或快捷方式，而不是尝试让 doxygen 更改其输出文件的布局。然后可以将此符号链接/快捷方式放置在项目的根目录（或其他地方）中，指向`./html/index/html`并命名任何您喜欢的名称，以使您的用户清楚它是什么。

# spring - 调度程序 servlet 映射

> ID：12070866
> 
> 赞同：0
> 
> 时间：2012-08-22T10:11:09.450
> 
> 标签：spring

我正在尝试使用弹簧安全

在所有配置之前

```
http://localhost:9090/app/login2.xhtml 
```

请求，按我的预期工作。

我添加了一个控制器：

```
@Controller
@RequestMapping("/auth")
public class LoginController {

 @RequestMapping(value = "/login", method = RequestMethod.GET)
 public String getLoginPage(@RequestParam(value="error", required=false) boolean error, 
   ModelMap model) {
return "login2.xhtnml";
}

} 
```

我在 web.xml 中有：

```
<servlet>
<servlet-name>spring</servlet-name>
<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
<init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
                classpath:META-INF/spring-servlet.xml
        </param-value>
    </init-param>
<load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
<servlet-name>spring</servlet-name>
<url-pattern>/*</url-pattern>
</servlet-mapping> 
```

当我打电话时使用这个配置

```
http://localhost:9090/app/login2.xhtml 
```

错误来了

```
 WARN org.springframework.web.servlet.PageNotFound - No mapping found for HTTP request with URI [/app/login2.xhtml] in DispatcherServlet with name 'spring' 
```

但是当我将配置映射更改为

```
<servlet-mapping>
<servlet-name>spring</servlet-name>
<url-pattern>/app/*</url-pattern>
</servlet-mapping> 
```

`http://localhost:9090/app/login2.xhtml`按我的预期工作

但

```
http://localhost:9090/app/auth/login 
```

没有错误，没有异常，没有重定向，我认为调度程序 servlet 无法知道这个请求。

```
http://localhost:9090/app/app/auth/login 
```

与

```
<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/app/*</url-pattern>
    </servlet-mapping> 
```

我的理解：

调度程序 servlet用作`"http://localhost:9090/"`搜索 login2.xhtml 和URL 的基础。`"http://localhost:9090/app"``/auth/login`

我不知道在哪里设置它，以及为什么它们不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T17:17:51.920

您是否已将其添加`SpringSecurityFilterChain`到 web.xml 中？

```
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

如果容器启动（从日志文件），您能否通过注册的“请求绑定”？

# r - 时间序列中的每小时平均值

> ID：12070867
> 
> 赞同：3
> 
> 时间：2012-08-22T10:11:14.397
> 
> 标签：r, time-series

这是一个具有每小时智能电表数据且频率 = 24 的时间序列。它是在三天内测量的，所以`first day[1:24], second[25:48], third[49:72].`

我想要三天内每小时的平均值。例如：

```
(t[1]+t[25]+t[49])/3 
```

所以我可以在 3 天内制作一个平均 24 小时的箱线图。

```
x <- c(0.253, 0.132, 0.144, 0.272, 0.192, 0.132, 0.209, 0.255, 0.131, 
  0.136, 0.267, 0.166, 0.139, 0.238, 0.236, 1.75, 0.32, 0.687, 
  0.528, 1.198, 1.961, 1.171, 0.498, 1.28, 2.267, 2.605, 2.776, 
  4.359, 3.062, 2.264, 1.212, 1.809, 2.536, 2.48, 0.531, 0.515, 
  0.61, 0.867, 0.804, 2.282, 3.016, 0.998, 2.332, 0.612, 0.785, 
  1.292, 2.057, 0.396, 0.455, 0.283, 0.131, 0.147, 0.272, 0.198, 
  0.13, 0.19, 0.257, 0.149, 0.134, 0.251, 0.215, 0.133, 1.755, 
  1.855, 1.938, 1.471, 0.528, 0.842, 0.223, 0.256, 0.239, 0.113) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T10:17:56.343

因为您没有发布一组易于使用的示例数据，所以我们先生成一些：

```
time_series = runif(72) 
```

下一步是将数据集的结构从 1d 向量更改为 2d 矩阵，这为您节省了大量处理索引等的工作：

```
time_matrix = matrix(time_series, 24, 3) 
```

并用于`apply`计算每小时平均值（如果您喜欢`apply`，请查看`plyr`包以获得更多不错的功能，请参阅[此链接](http://www.jstatsoft.org/v40/i01/paper)了解更多详细信息）：

```
hourly_means = apply(time_matrix, 1, mean)
> hourly_means
 [1] 0.2954238 0.6791355 0.6113670 0.5775792 0.3614329 0.4414882 0.6206761
 [8] 0.2079882 0.6238492 0.4069143 0.6333607 0.5254185 0.6685191 0.3629751
[15] 0.3715500 0.2637383 0.2730713 0.3170541 0.6053016 0.6550780 0.4031117
[22] 0.6857810 0.4492246 0.4795785 
```

但是，如果您使用`ggplot2`不需要预先计算箱线图，`ggplot2`请为您执行以下操作：

```
require(ggplot2)
require(reshape2)
# Notice the use of melt to reshape the dataset a bit
# Also notice the factor to transform Var1 to a categorical dataset
ggplot(aes(x = factor(Var1), y = value), 
       data = melt(time_matrix)) + 
       geom_boxplot() 
```

哪个产生，我认为，你在哪里：

![在此处输入图像描述](../Images/aa59e553d6ae448bcab6801de372ae35.png)

在 x 轴上是一天中的小时数，在 y 轴上是值。

* * *

注意：您拥有的数据是时间序列。R 有处理时间序列的特定方法，例如`ts`函数。我通常使用普通的 R 数据对象（数组、矩阵），但您可以查看[TimeSeries CRAN 任务视图](http://cran.r-project.org/web/views/TimeSeries.html)，了解 R 可以对时间序列做什么。

使用`ts`对象计算每小时意味着（受此[SO post](https://stackoverflow.com/questions/6529981/calculate-monthly-average-of-ts-object)启发）：

```
# Create a ts object
time_ts = ts(time_series, frequency = 24)
# Calculate the mean
> tapply(time_ts, cycle(time_ts), mean)
        1         2         3         4         5         6         7         8 
0.2954238 0.6791355 0.6113670 0.5775792 0.3614329 0.4414882 0.6206761 0.2079882 
        9        10        11        12        13        14        15        16 
0.6238492 0.4069143 0.6333607 0.5254185 0.6685191 0.3629751 0.3715500 0.2637383 
       17        18        19        20        21        22        23        24 
0.2730713 0.3170541 0.6053016 0.6550780 0.4031117 0.6857810 0.4492246 0.4795785 
> aggregate(as.numeric(time_ts), list(hour = cycle(time_ts)), mean)
   hour         x
1     1 0.2954238
2     2 0.6791355
3     3 0.6113670
4     4 0.5775792
.... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T12:54:55.783

`boxplot`您可以使用基本 R 安装附带的功能轻松完成此操作。只需使用您的原始系列和索引创建一个 data.frame 来识别每天的时间。

```
Data <- data.frame(series=x, time=rep(1:24,3))
boxplot(series ~ time, data=Data) 
```

![箱线图输出](../Images/0d281f831aa5d3a9dffd7db7e296fcfc.png)

# android - 应用程序强制关闭异步任务，方向更改：android

> ID：12070870
> 
> 赞同：0
> 
> 时间：2012-08-22T10:11:18.607
> 
> 标签：android, android-asynctask

我正在使用异步任务来执行一些后台操作，因为在后台执行 xml 解析，它运行良好，但是在更改 android 设备的来源时，它会导致强制关闭，我在它上面谷歌，但没有任何相应或可以说无法探索我的自我，请任何人对我的分享有想法..我会感谢你..

```
 @Override
protected void **onPreExecute()** {

    if(refreshFlage)
    {
        Log.i("refreshFlage","refreshFlage");
        dialog = new ProgressDialog(ReplyForm.replyform);
        dialog.setMessage("Processing...");
        dialog.setIndeterminate(true);
        dialog.setCancelable(false);
        dialog.show();
    }
    else 
    {
        dialog = new ProgressDialog(QuestionScreen.questionscreen);
        dialog.setMessage("Processing...");
        dialog.setIndeterminate(true);
        dialog.setCancelable(false);
        dialog.show();  
    }

}

@Override
protected void **onPostExecute**(final Boolean success) {
    dialog.cancel();

    try {
        java.lang.System.gc();
    } catch (Exception e) {
        e.printStackTrace();
    }

    }else {

 try{

    }

}
     catch (NullPointerException e) {
        // TODO: handle exception
    }
 }
}

@Override
protected Boolean **doInBackground**(final String... args) {
    getQuestionsMethod();

    return null;
}

private void getQuestionsMethod() {
    // TODO Auto-generated method stub

    HttpResponse response = null;
    InputStream is = null;

        JSONObject jsonObj = new JSONObject(result);

        JSONObject jobj = jsonObj.getJSONObject("question");

        group_subject = jobj.getString(TAG_SUBJECT);
        question_id = jobj.getString(TAG_QUESTIONID);
        author_name = jobj.getString(TAG_AUTHORNAME);
        lastpost_date = jobj.getString(TAG_LASTPOSTDATE);
        replies = jobj.getString(TAG_REPLIES);
        newPost = jobj.getString(TAG_NEWPOST);
        userCanReply = jobj.getString(TAG_USERCANREPLY);

        poll = jobj.getString(TAG_POLL);

        HashMap<String, Object> groupdetailData = new HashMap<String, Object>();
        groupdetailData.put(TAG_SUBJECT, group_subject);
        groupdetailData.put(TAG_QUESTIONID, question_id);
        groupdetailData.put(TAG_AUTHORNAME, author_name);
        groupdetailData.put(TAG_LASTPOSTDATE, lastpost_date);
        groupdetailData.put(TAG_REPLIES, replies);
        groupdetailData.put(TAG_POLL, poll);
        groupdetailData.put(TAG_NEWPOST, newPost);
        groupdetailData.put(TAG_USERCANREPLY, userCanReply);

        int arrayCount = questiondetailarraylist.size();

        if (arrayCount > 0) {
            questiondetailarraylist.clear();
        }

        if (poll.equalsIgnoreCase("true")) {
            pollmulti = jobj.getString(TAG_POLLMULTI);
            pollsubject = jobj.getString(TAG_POLLSUBJECT);
            Pollid = jobj.getString(TAG_POLLID);

            groupdetailData.put(TAG_POLLMULTI, pollmulti);
            groupdetailData.put(TAG_POLLSUBJECT, pollsubject);
            groupdetailData.put(TAG_POLLID, Pollid);

            //mDbHelper.insertPollfield(questionid, pollmulti, pollsubject, Pollid);

            groupdetailData.put("PollTrueData", pollTrueVector);
            //System.out.println("after poll method..");
        }

        //System.out.println(groupdetailData.size());
        questiondetailarraylist.add(groupdetailData);
        //System.out.println("11111111111111111");

    } catch (Exception e) {
        Log.e("log_tag", "Error converting result " + e.toString());
    }

}

        answersHashMap.put("vectorArray", vectorArray);

        answersHashMap.put("lastUpdateValue", lastUpdateValue);

    } catch (Exception e) {
        Log.e("log_tag", "Error converting result " + e.toString());
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:18:58.373

用于创建对话框的用户 showDialog(id) 函数，特别是当屏幕方向改变时。更多细节在[这里](http://developer.android.com/guide/topics/ui/dialogs.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T10:20:29.870

在方向改变时，活动被销毁并重新创建。

您需要通过将文件中的属性添加到当前活动来处理此`android:configChanges="orientation"`问题`AndroidManifest`。

# objective-c - NSMutableArray 到 NSUserDefults 不保存

> ID：12070871
> 
> 赞同：0
> 
> 时间：2012-08-22T10:11:20.670
> 
> 标签：objective-c, ios, cocoa-touch

我正在以这种方式向 NSuserdefults 读取和写入数组：

```
indexDelete = button.tag;

                    NSUserDefaults *currentDefaults = [NSUserDefaults standardUserDefaults];
                    NSData *dataRepresentingSavedArray = [currentDefaults objectForKey:@"save"];
                    if (dataRepresentingSavedArray != nil)
                    {
                        NSArray *oldSavedArray = [NSKeyedUnarchiver unarchiveObjectWithData:dataRepresentingSavedArray];
                        if (oldSavedArray != nil)
                            myIntegers = [[NSMutableArray alloc] initWithArray:oldSavedArray];
                        else
                            myIntegers = [[NSMutableArray alloc] init];
                    }

                    [myIntegers addObject:[NSNumber numberWithInteger:indexDelete]];

                    NSLog (@"Array myIntegers: %@", myIntegers);

                    [[NSUserDefaults standardUserDefaults] setObject:[NSKeyedArchiver archivedDataWithRootObject:myIntegers] forKey:@"save"]; 
```

如果我保持这条线，一切都会正常工作：

```
myIntegers = [[NSMutableArray alloc] init]; 
```

括号外，因为即使数据在那里，也没有正确写入或读取：

我收到此错误：-[NSKeyedUnarchiver initForReadingWithData:]: data is NULL

我做错了什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:18:50.323

改变这个：

```
[[NSUserDefaults standardUserDefaults] setObject:[NSKeyedArchiver archivedDataWithRootObject:myIntegers] forKey:@"save"]; 
```

至

```
[[NSUserDefaults standardUserDefaults] setObject:myIntegers forKey:@"save"]; 
```

如果 myIntegers 将来不会发生突变（更改）。如果要更改，请使用：

```
[[NSUserDefaults standardUserDefaults] setObject:[NSArray arrayWithArray:myIntegers] forKey:@"save"]; 
```

在类描述中记录了在用户默认值中保存数组和字典的能力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T10:22:15.163

我有一种替代方法是在 doc dir 中保存 mutablearray 然后检索它：

```
// Get path to documents directory
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                     NSUserDomainMask, YES);
if ([paths count] > 0)
{
    // Path to save array data
    NSString  *arrayPath = [[paths objectAtIndex:0]
                            stringByAppendingPathComponent:@"array.out"];

    // Write array
    [yourMutableArray writeToFile:arrayPath atomically:YES];

    // Read both back in new collections
    NSMutableArray *arrayFromFile = [NSMutableArray arrayWithContentsOfFile:arrayPath];        
    for (NSString *element in arrayFromFile) 
        NSLog(@"Items: %@", element);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T10:23:53.890

你永远不会初始化你的`myIntegers`. 第一次`save`从默认值中获取 key 对象时，您会得到一个`nil`对象（因此不进入`if`闭包并分配结构）。之后，您尝试归档一个`nil`对象，这可能是您遇到错误的原因。

尝试在此之前移动数组的初始化，并且仅添加先前保存的对象（如果存在）：

```
myIntegers = [[NSMutableArray alloc] init];
NSUserDefaults *currentDefaults = [NSUserDefaults standardUserDefaults];
NSData *dataRepresentingSavedArray = [currentDefaults objectForKey:@"save"];
if (dataRepresentingSavedArray != nil)
{
    NSArray *oldSavedArray = [NSKeyedUnarchiver unarchiveObjectWithData:dataRepresentingSavedArray];
    if (oldSavedArray != nil)
        [myIntegers addObjectsFromArray:oldSavedArray];
} 
```

# uinavigationcontroller - 使用 UINavigationController 滑动手势而不是 backbarbuttonitem

> ID：12070873
> 
> 赞同：2
> 
> 时间：2012-08-22T10:11:24.350
> 
> 标签：uinavigationcontroller, uiswipegesturerecognizer, backbarbuttonitem

我环顾四周，终生无法找到`backbarbuttonitem`用滑动手势替换的方法。我想向左滑动并让应用恢复到以前的视图控制器。只是为了澄清我正在使用 a`UINavigationController`来管理我的所有视图控制器。有任何想法吗？或者这是不可能的？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T11:02:11.770

我解决了，现在我觉得问这个问题很愚蠢！这是我使用的代码：

我在函数中创建了一个滑动手势`ViewDidLoad`：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

// -- EDIT Added the allocation of a UIGestureRecognizer -- //
UISwipeGestureRecognizer *swipeRight = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(gotoPreviousView:)];
    swipeRight.numberOfTouchesRequired = 1;
    swipeRight.direction = UISwipeGestureRecognizerDirectionRight;
    [self.view addGestureRecognizer:swipeRight];
} 
```

然后我简单地创建了这个......

```
- (void)gotoPreviousView:(id)sender {
    [self.navigationController popViewControllerAnimated:YES];
} 
```

简单的！看得太远了，答案正盯着我的脸。希望如果你不知道怎么做，你会看到这一点，而不是犯我做过的同样的菜鸟错误……

# android - Kindle Fire 上的 APK 扩展文件

> ID：12070874
> 
> 赞同：2
> 
> 时间：2012-08-22T10:11:27.410
> 
> 标签：android, kindle, kindle-fire

是否可以将[Android 扩展文件](http://developer.android.com/guide/google/play/expansion-files.html)与 Kindle Fire 一起使用？因为 Kindle Fire 不使用 Google Play。

编辑：亚马逊允许 .apk 大于 50MB，因此不需要扩展文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T10:17:27.207

由于扩展文件是从 Google Play 商店下载的，我想答案是否定的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T11:47:01.470

只需打开“允许从未知来源安装应用程序”（设置 => 设备）然后通过任何文件管理器简单安装 .apk 怎么样？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-19T10:24:31.427

这只是一个拉链，所以肯定的。缺少的是下载。因此，您可以将 obb 作为资产添加到 Fire release 风格中，并更改获取`ZipResourceFile`从那里加载 zip 的代码。

为了以 fire 调试风格更快地开发，您始终可以手动将文件复制到`/andoird/obb`fire 上的正常位置

# asp.net - mvc4 授权不适用于 ASP.net 配置

> ID：12070876
> 
> 赞同：0
> 
> 时间：2012-08-22T10:11:37.880
> 
> 标签：asp.net, asp.net-mvc-4, asp.net-web-api

我正在关注这个系列： [http ://www.asp.net/web-api/overview/creating-web-apis/using-web-api-with-entity-framework/using-web-api-with-entity -框架，-第 1 部分](http://www.asp.net/web-api/overview/creating-web-apis/using-web-api-with-entity-framework/using-web-api-with-entity-framework,-part-1)

一切顺利，需要使用 ASP.net 配置工具来创建角色管理员、用户，然后登录。

```
[Authorize(Roles="Administrator")] 
```

工作正常，但我无法使用通过 ASP.NET 配置创建的“管理员”帐户登录；或者，反之亦然，在 ASP.NET 配置面板上查看我在演示中注册的用户。

为什么这个演示要为两个不同的数据库创建 2 个连接字符串？

```
<connectionStrings>
<add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-WebStore-20120820081613;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-WebStore-20120820081613.mdf" providerName="System.Data.SqlClient" />
<add name="OrdersContext" connectionString="Data Source=(localdb)\v11.0; Initial Catalog=OrdersContext-20120820083248; Integrated Security=True; MultipleActiveResultSets=True; AttachDbFilename=|DataDirectory|OrdersContext-20120820083248.mdf" providerName="System.Data.SqlClient" /> 
```

我在 Windows Server 2008 R2 上运行整个程序；Visual Studio 速成版 12。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:04:23.450

我已经通过使用 Visual Studio 2010 重新创建应用程序解决了这个问题。......将连接字符串复制到 vs2010 项目，瞧......完成了。

# iphone - 如何使用 Cordova 从 MainViewController 切换 admob 视图

> ID：12070879
> 
> 赞同：0
> 
> 时间：2012-08-22T10:11:43.617
> 
> 标签：iphone, admob, cordova, phonegap-plugins

我已经在我的 iPhone 应用程序中实现了 admob，但是应该根据我的 javascript 条件来切换创建的视图。所以，我需要使用科尔多瓦插件切换该视图。是否有可能使用 phonegap 切换 admob 视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:58:11.840

我将假设切换意味着您要隐藏视图。您也可能意味着您想要请求一个新广告，但无论如何我认为逻辑是相同的。

如果您已将 AdMob 代码设置为插件，则可以编写一些调用该插件的 js（即使您没有这样做，您也可以这样做）。所以 javascript 方法可能看起来像：

```
AdMob.prototype.hideAd =
    function(options, successCallback, failureCallback) {
  var defaults = {
    'isHidden': false
  };

  for (var key in defaults) {
    if (typeof options[key] !== 'undefined') {
      defaults[key] = options[key];
    }
  }

  cordova.exec(
      successCallback,
      failureCallback,
      'AdMobPlugin',
      'hideAd',
      new Array(defaults)
  );
}; 
```

然后在处理 AdMob 视图的本机代码中，您可以执行以下操作：

```
- (void)hidAd:(NSMutableArray *)arguments
         withDict:(NSMutableDictionary *)options {
  CDVPluginResult *pluginResult;
  NSString *callbackId = [arguments pop];

  if (!self.bannerView) {
    // Try to prevent requestAd from being called without createBannerView first
    // being called.
    pluginResult = [CDVPluginResult resultWithStatus:CDVCommandStatus_ERROR
                                     messageAsString:@"AdMobPlugin:"
                                                     @"No ad view exists"];
    [self writeJavascript:[pluginResult toErrorCallbackString:callbackId]];
    return;
  }
  BOOL isHidden = (BOOL)[[options objectForKey:@"isHidden"] boolValue];
  self.bannerView.hidden  = isHidden;

  pluginResult = [CDVPluginResult resultWithStatus:CDVCommandStatus_OK];
  [self writeJavascript:[pluginResult toSuccessCallbackString:callbackId]];
} 
```

# wpf - 使用其他列的值更改 Datagrid 列的颜色

> ID：12070881
> 
> 赞同：0
> 
> 时间：2012-08-22T10:11:53.117
> 
> 标签：wpf, wpfdatagrid

```
<DataGrid>
 <DataGrid.Columns>

 <DataGridTemplateColumn Header="Name" >
        <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <Label x:Name="lblName" Content="{Binding Name}" Foreground="White" />
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn>
<DataGridTextColumn Binding="{Binding Path=IsActice}" Header="Is Actice"  />
 </DataGrid.Columns>
</DataGrid> 
```

我想在 Datagrid 根据 IsActive 值填充时更改 lblName 的颜色

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:35:24.527

到处都是一样的`DataContext`：整个当前行。

您可以轻松地将 a 添加`Style`到 the`Label`并使用 a [`DataTrigger`](http://msdn.microsoft.com/en-us/library/system.windows.datatrigger.aspx)on `IsActive`。（如果您打算有一个默认颜色，由于[优先级](https://msdn.microsoft.com/en-us/library/ms743230%28v=vs.100%29.aspx)需要移动到 a`Setter`中）`Style`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:16:20.057

您可以创建一个返回类型为 Color 的转换器（Active 变量的数据类型为 Color）并将其附加到 Label。根据 Active 值，转换器将返回所需的颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T04:22:47.713

我使用以下代码解决了

```
<Style TargetType="{x:Type Label}" x:Key="DataGridLabel">
  <Style.Triggers>
    <MultiDataTrigger>
      <MultiDataTrigger.Conditions>
        <Condition Binding="{Binding Path=IsActive}" Value="False"/>
      </MultiDataTrigger.Conditions>
      <Setter Property="Label.Background" Value="Red"/>
    </MultiDataTrigger>
    <MultiDataTrigger>
      <MultiDataTrigger.Conditions>
        <Condition Binding="{Binding Path=IsActive}" Value="True"/>
      </MultiDataTrigger.Conditions>
      <Setter Property="Label.Background" Value="Green"/>
    </MultiDataTrigger>
  </Style.Triggers>
</Style> 
```

# php - 如何在php中获取动态生成的输入字段的值？

> ID：12070886
> 
> 赞同：1
> 
> 时间：2012-08-22T10:12:01.713
> 
> 标签：php, jquery, arrays, forms

我正在处理一个表单，其中有 2 个可以添加 N 次的字段。我有 2 个名为 "fieldA" 和 "fieldB" 的字段以及一个名为 "addrow" 的按钮。因此，当我多次单击 addrow 时，我在先前的 fieldA 和 fieldB 下方添加了 fieldA 和 fieldB。所以我可以拥有无​​限的fieldAs和无限的fieldB。我使用 jquery 添加行并在每个字段的名称 attr 后面附加带有数字的新字段，以使其唯一。因此，第一组字段将命名为 fieldA1、fieldB1，第二组字段将命名为 fieldA2、fieldB2，依此类推。

## 这就是我的表单部分的外观

![在此处输入图像描述](../Images/48d51da104d8333fc71b3c3f1dd858ad.png)

## 这是我的jQuery

```
$(document).ready(function(){
 var $i = 1;
    $('body').on('click','#addrow',function(){
    $('#fieldset').append(
    "Your Friends Name: <br /><input type='text' name='fieldA"+$i+"' /><br /><br />Your Friends Email: <br /><input type='text' name='fieldB"+$i+"' /><br /><br />"
    );
    $i++;
    });
}); 
```

现在，由于这些字段是使用 jquery 自动生成的，所以我不确定如何在 php.ini 中获取字段的值。

同样在获取字段的值之后，我还想创建一个数组。

## 这就是我希望将所有字段的值保存在 php 数组中的方式。

```
$fieldset = array( 
array("fieldA" => "value of fieldA1","fieldB" => "value of fieldB1"),
array("fieldA" => "value of fieldA2","fieldB" => "value of fieldB2"),
array("fieldA" => "value of fieldA3","fieldB" => "value of fieldB3"),
...
); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T10:19:42.130

您的输入必须是数组`[]`，否则您将无法将它们作为数组接收`fieldA[]`

你的 jQuery 应该是这样的：

```
$(document).ready(function(){
 var $i = 1;
    $('body').on('click','#addrow',function(){
    $('#fieldset').append(
    "Your Friends Name: <br /><input type='text' name='fieldA["+$i+"]' /><br /><br />Your Friends Email: <br /><input type='text' name='fieldB["+$i+"]' /><br /><br />"
    );
    $i++;
    });
}); 
```

HTML

```
Your Friends Name: <br /><input type='text' name='fieldA[0]'  class='name'/><br /><br />
Your Friends Email: <br /><input type='text' name='fieldB[0]' class='email'/><br /><br /> 
```

在您的 PHP 中，您将收到它们

```
[fieldA] => Array (
                [0] => 
                [1] => 
                [2] => 
            )
[fieldB] => Array ( 
                [0] => 
                [1] => 
                [2] =>
            ) 
```

您可以根据需要转换它们

```
$newArray = array();

for($i=0; $i<count($_POST['fieldA']); $i++){
    $newArray[$i]['fieldA'] = $_POST['fieldA'][$i];
    $newArray[$i]['fieldB'] = $_POST['fieldB'][$i];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T10:15:28.527

如果您使用 POST 在表单中提交这些字段，您可以执行以下操作：

```
foreach ($_POST as $key => $value) {
    $fieldset[$key] => $value;
} 
```

# php - 将多个文件上传与 PHP 中的复选框相关联

> ID：12070896
> 
> 赞同：2
> 
> 时间：2012-08-22T10:12:48.577
> 
> 标签：php, file-upload, checkbox

我想在上传文件并在 PHP 中选中相关复选框时做一些事情，如何将文件输入类型与复选框链接？

这就是我所拥有的：

```
<input type="file" name="file_upload[]"  /> <input type="checkbox" name="checkbox[]"> linked to file-upload 1 <br/>
<input type="file" name="file_upload[]"  /> <input type="checkbox" name="checkbox[]"> linked to file-upload 2 <br/>
<input type="file" name="file_upload[]"  /> <input type="checkbox" name="checkbox[]"> linked to file-upload 3 <br/>
<input type="file" name="file_upload[]"  /> <input type="checkbox" name="checkbox[]"> linked to file-upload 4 <br/> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T10:20:03.387

给他们唯一的名字：

```
<input type="file" name="file_upload[0]">
<input type="checkbox" name="checkbox[0]">

<input type="file" name="file_upload[1]">
<input type="checkbox" name="checkbox[1]"> 
```

PHP 仍将它们表示为数组。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-22T10:17:23.013

您可以尝试设置一些显示成功上传的变量，然后通过 java 脚本检查您的复选框

# php - php读取maxmind的二进制ISP文件

> ID：12070897
> 
> 赞同：0
> 
> 时间：2012-08-22T10:12:50.230
> 
> 标签：php, geolocation

我正在尝试通过我的 PHP 函数读取一个 ISP 二进制文件（以 FIPS 10-4 格式编码）。但它以不可读的格式返回数据。

```
 $filename = 'D:\xampp\htdocs\openx\var\jeet\GeoIPISP.dat';
    $handle = fopen($filename, "rb");
    $fsize = filesize($filename);
    $contents = fread($handle, $fsize);

   // iterate through each byte in the contents
   for($i = 0; $i < $fsize; $i++)
 { 
 // get the current ASCII character representation of the current byte
  $asciiCharacter = $contents[$i];
 // get the base 10 value of the current characer
 $base10value = ord($asciiCharacter);
 // now convert that byte from base 10 to base 2 (i.e 01001010...)
 $base2representation = base_convert($base10value, 10, 2);
 // print the 0s and 1s

 $base10value = base_convert($base2representation, 2, 10);  // => 132
 $ASCIICharacter = chr($base10value);               // => 'Z'
  echo  $ASCIICharacter; 
 } 
```

任何人都可以如何将二进制文件的所有数据放入php字符串/数组中？

# android - Android ArrayList 文件序列化

> ID：12070898
> 
> 赞同：0
> 
> 时间：2012-08-22T10:12:51.373
> 
> 标签：android, serialization, arraylist

我最近阅读了数千个关于 android 文件序列化的主题，但我仍然没有找到有效的解决方案。

我有我的可序列化类和活动，我分别在其中序列化和反序列`ArrayList`化可序列化的类元素。 `onResume()``onPause()`

我的解决方案仍然在 seriazlie 和反序列化方法中抛出 IOException 。

```
package classes;

import java.io.Serializable;
import java.util.Date;

import com.google.android.maps.GeoPoint;

public class Note implements Serializable {

    public Note() {
    }

    public Note(Date date, String name, GeoPoint geoPoint) {
        this.date = date;
        this.name = name;
        this.geoPoint = geoPoint;
    }

    private static final long serialVersionUID = -7789719052842264659L;

    private Date date;
    private String name;
    private GeoPoint geoPoint;

    public Date getDate() {
        return date;
    }

    public String getName() {
        return name;
    }

    public GeoPoint getGeoPoint() {
        return geoPoint;
    }

    @Override
    public String toString() {
        return String.format("Name: %S%nDate: %2$td-%2$tb-%2$tY%nTime: %2$tH:%2$tM:%2$tS", name, date);
    }
} 
```

这是我的方法：

```
private void serializeQuotes() {
    try {
        FileOutputStream fos = openFileOutput("test.txt", Context.MODE_WORLD_READABLE);
        ObjectOutputStream oos = new ObjectOutputStream(fos);
        oos.writeObject(notes);
        oos.close();
    }
    catch (IOException e) {
        Toast.makeText(this, "Serialization error", Toast.LENGTH_SHORT).show();
    }
}

@SuppressWarnings("unchecked")
private void deserializeQuotes() {
    try {
        FileInputStream fis = openFileInput("test.txt");
        ObjectInputStream ois = new ObjectInputStream(fis);
        notes = (ArrayList<Note>) ois.readObject();
        ois.close();
    }
    catch (IOException e) {
        Toast.makeText(this, "Deserialization error", Toast.LENGTH_SHORT).show();
    }
    catch (ClassNotFoundException e) {
    }
} 
```

`notes`在哪里

```
ArrayList<Note> 
```

我需要在 AppFolder 中创建文件：

```
 File savedLocationsDirectory = new File(Environment.getExternalStorageDirectory().getPath().concat("/AppFolder"));
    if (!savedLocationsDirectory.exists()) savedLocationsDirectory.mkdirs();
    savedLocationsFile = new File(savedLocationsDirectory, "savedLocations.gc"); 
```

然后我使用：`FileInputStream fis = new FileInputStream(savedLocationsFile);`和`FileOutputStream fos = new FileOutputStream(savedLocationsFile, true);`

在这两种情况下，序列化都不起作用。

# c# - 寻找 C# - Java 功能等效备忘单

> ID：12070899
> 
> 赞同：4
> 
> 时间：2012-08-22T10:12:54.697
> 
> 标签：c#, java

我正在寻找可以帮助 C# 开发人员学习 Java 的资源。我想要一个快速参考，例如：

```
C#               |      Java          | Suggested alternative
Extension Method |      NA            |  ...
Attributes       |    Annotations     |  ... 
```

这样的备忘单对我来说将是一个很好的资源，因为他将有助于打破两个世界之间的薄壁垒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T10:16:10.120

*   [C Sharp 和 Java 的比较](http://en.wikipedia.org/wiki/Comparison_of_C_Sharp_and_Java)（但它缺少建议的替代方案 ;-)）

*   [Java 和 C# 比较](http://www.harding.edu/fmccown/java_csharp_comparison.html)（[PDF 版](http://www.docstoc.com/docs/102242605/java-vs-C-comparison)）

*   [C# 和 Java：比较编程语言](http://msdn.microsoft.com/en-us/library/ms836794.aspx)

*   [为 Java 开发人员迁移到 C# 和 .NET Framework](http://www.microsoft.com/en-us/download/details.aspx?id=6073)

*   可能是[重复的](https://stackoverflow.com/questions/4762570/language-syntax-diff-sheet-between-java-and-c)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:15:05.880

可以使用转换工具 - 虽然我不知道它是否正是您正在寻找的 - 您可以尝试[http://twigletsoftware.com/](http://twigletsoftware.com/)或[http://tangiblesoftwaresolutions.com/Product_Details/CSharp_to_Java_Converter_Details.html](http://tangiblesoftwaresolutions.com/Product_Details/CSharp_to_Java_Converter_Details.html)

或者，有关将两种语言连接在一起的帮助，请查看[http://www.25hoursaday.com/CsharpVsJava.html](http://www.25hoursaday.com/CsharpVsJava.html)

# c++ - 分配新堆栈时出现编程错误

> ID：12070900
> 
> 赞同：0
> 
> 时间：2012-08-22T10:13:02.763
> 
> 标签：c++, stack

我正在编写一个程序来实现一个像现实世界堆栈一样工作的堆栈，这意味着当堆栈的大小达到阈值时它会倒塌，因此需要创建一个新堆栈来插入该新元素。

以下是我的程序：

```
#include <iostream>
#include<vector>
#include<stack>

using namespace std;

class stack_of_plates
{
   vector<stack<int> > stacks;
   unsigned int stack_size;
   public:
   stack_of_plates(unsigned int size=100)
   {
       stack_size=size;
   }

   void push(int data)
   {
       if(stacks.empty())
       {
           stack<int> *sptr= new stack<int>; //on debugging Segmentation fault at thisline
           stacks.push_back(*sptr);
       }

       vector<stack<int> >::iterator it=stacks.end();
       if(it->size()==stack_size)
       {
           stack<int> *sptr= new stack<int>; //on debugging Segmentation fault at thisline
           stacks.push_back(*sptr);
       }
       it->push(data);
   }

   void pop()
   {
       if(stacks.empty())
       {
           cout<<"\nEmpty Stack";
           return ;
       }
       vector<stack<int> >::iterator it=stacks.end();
       if(it->empty())
       {
           it--;
       }
       it->pop();
   }
   int top()
   {
       if(stacks.empty())
       {
           cout<<"\nEmpty Stack";
           return 0;
       }
       vector<stack<int> >::iterator it=stacks.end();
       if(it->empty())
       {
           it--;
       }
       return it->top();
   }
};

int main()
{
   stack_of_plates ss;
   ss.push(1);
   ss.push(2);
   cout<<ss.top();
   return 0;
} 
```

在编译它没有给出错误或警告。但是程序因异常错误而终止。在调试它给出的分段错误错误指示分配新堆栈的问题。请帮助我在分配新堆栈时应该如何更改我的代码。请帮我消除这个错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:00:54.023

`stacks.end();`指向量结束后的（不存在的）元素。你不能取消引用它；这样做会导致未定义的行为，可能是分段错误。

目前还不清楚你在那里做什么，但如果你想要最后一个元素的迭代器，那么要么递减它：

```
vector<stack<int> >::iterator it=stacks.end();  // points past the end
--it;                                           // points to last element 
```

或使用反向迭代器（在这种情况下，您使用`++`而不是`--`在序列中向后移动）：

```
vector<stack<int> >::reverse_iterator it=stacks.rbegin(); 
```

将元素添加到向量可以使其无效，因此`it->push_back(data)`末尾的`push()`是不正确的。您可以避免在此处使用迭代器：

```
void push() {
    if (stacks.empty() || stacks.back().size()==stack_size) {
        // See below for explanation of this change
        stacks.push_back(stack<int>());
    }
    stacks.back().push(data);
} 
```

在`pop()`中，如果最后一个堆栈为空，您可能想要删除它；否则，您最终会得到两个空堆栈，并且您的代码将错误地尝试`pop`从其中一个堆栈中提取。同样，这样做可能会导致分段错误或其他未定义的行为。你可能想要这样的东西：

```
void pop() {
    if (stacks.empty()) {
        cout<<"\nEmpty Stack";
        return ;
    }
    stacks.back().pop();
    if (stacks.back().empty()) {
        stacks.pop_back();
    }
} 
```

现在我们已经建立了一个不变量，即最后一个堆栈永远不会为空，`top`可以更简单一点：

```
int top() {
    if (stacks.empty()) {
        cout<<"\nEmpty Stack";
        return 0;
    }
    return stacks.back().top();
} 
```

此外，您通常不希望使用 创建对象`new`，尤其是在这种情况下，您将对象的副本放入向量中，然后丢弃指针，从而泄漏分配的内存。您可以像这样向向量添加一个空堆栈：

```
stacks.push_back(stack<int>()); 
```

有时（但不是在这种情况下）您可能希望将指向已分配对象的指针存储在容器中；在这种情况下，要么记得在从容器中删除它们时删除它们，要么存储智能指针，例如`std::unique_ptr`. 但在这种情况下，只需存储对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:57:17.080

代码有很多问题，所以很难说哪一个是你问题的直接原因。您需要将它们一一清理，然后重新测试。如果您仍有问题，请在此处发布您的新代码。

这是列表：

1.  您使用 new 分配的内存泄漏。由于您有一个堆栈向量，您需要做的就是调整向量的大小并分配一个新的堆栈。所以

    `stacks.resize(stacks.size() + 1)`;

    代替

    `stack<int> *sptr= new stack<int>`; `stacks.push_back(*sptr)`;

2.  vector<>.end() 返回一个迭代器，该迭代器指向最后一个元素之后的元素，这就是@Joachim 建议您在使用迭代器之前需要递减它的原因。

3.  当您检查是否将存储转移到新堆栈时出现逻辑错误 - 检查最后一个堆栈的大小是否为最大值，并创建一个新堆栈后，您继续推动旧堆栈。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T11:07:13.743

`std::stack<int>`已经具有您在示例中显示的功能，因此不需要`std::vector< std::stack<int> >`. 只需推送和弹出即可`std::stack<int>`避免您在代码中遇到的大多数问题。没有理由`std::stack<int>`限制`stack_size`.

除此之外，当您需要容器中的最后一个条目时，请使用`back()`而不是`end()`.

# spring - Primefaces fileupload 仅适用于要上传的第一个文件

> ID：12070901
> 
> 赞同：3
> 
> 时间：2012-08-22T10:13:03.083
> 
> 标签：spring, jsf, file-upload, primefaces, web.xml

我正在使用 Primefaces，但文件上传器有问题。问题是它适用于我上传的第一个文件（调用 fileUploadListener 并且 java 方法上传文件），但是如果我尝试上传另一个文件，则不再调用侦听器并且永远不会触发 java 方法. 如果我刷新页面，我可以上传另一个文件，但如果我尝试上传第二个文件，同样的事情也会发生。

**xhtml文件中的代码：**

```
<p:tab id="eConsentTabPanel" title="Informed Consent" disabled="#{patientHandlerAction.patientTabsStatus}">
  <h:form id="eConsentForm" enctype="multipart/form-data">
     <h:panelGrid id="eConsentPanelGrid">
        <p:fileUpload fileUploadListener="#{patientHandlerAction.handleFileUpload}" 
                      mode="advanced"
                      update="messages"
                      multiple="true"
                      auto="true"
                      sizeLimit="20971520"
                      label="Select File"
                      allowTypes="/(\.|\/)(gif|jpe?g|png|pdf|doc?x)$/"/>
        <p:growl id="messages" showDetail="true"/>  
     </h:panelGrid>
  </h:form>  
</p:tab> 
```

**java bean文件中的代码：**

```
public void handleFileUpload(FileUploadEvent event) {

   ExternalContext extContext=FacesContext.getCurrentInstance().getExternalContext();
   String filename = FilenameUtils.getName(event.getFile().getFileName());
   File result = new File(extContext.getRealPath("//uploaded//" + filename));

   try {
      FileOutputStream fileOutputStream = new FileOutputStream(result);

      byte[] buffer = new byte[6124];

      int bulk;
      InputStream inputStream = event.getFile().getInputstream();
      while (true) {
         bulk = inputStream.read(buffer);
         if (bulk < 0) {
            break;
         }
         fileOutputStream.write(buffer, 0, bulk);
         fileOutputStream.flush();
      }

      fileOutputStream.close();
      inputStream.close();

      messageTitle = "Message";
      messageBody = "The file" + event.getFile().getFileName() + " was succesfully uploaded!";

      FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO, messageTitle, messageBody));

   }

   catch (IOException e) {
      e.printStackTrace();

      messageTitle = "Message";
      messageBody = "The file was not uploaded";

      FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO, messageTitle, messageBody));
      FacesMessage error = new FacesMessage(FacesMessage.SEVERITY_ERROR, "The files were not uploaded!", "");
      FacesContext.getCurrentInstance().addMessage(null, error);
   }

} 
```

**web.xml 文件中的代码：**

```
<filter>
   <filter-name>PrimeFaces FileUpload Filter</filter-name>
   <filter-class>
      org.primefaces.webapp.filter.FileUploadFilter
   </filter-class>
   <init-param>
      <param-name>uploadDirectory</param-name>
      <param-value>/HerEhrUploaded/temp</param-value>
   </init-param>
   <init-param>
      <param-name>thresholdSize</param-name>
      <param-value>20971520</param-value>
   </init-param>      
</filter>

<filter-mapping>
   <filter-name>PrimeFaces FileUpload Filter</filter-name>
   <servlet-name>Faces Servlet</servlet-name>
</filter-mapping> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-19T04:08:16.953

我补充说：

```
event.getComponent().setTransient(false); 
```

内部文件上传监听方法，

```
public void handleUpload(FileUploadEvent event) {
    ....
} 
```

它工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-24T13:42:36.660

我有同样的问题，我在这里找到了一个解决方案（比解决方案更多的解决方法）：

[http://code.google.com/p/primefaces/issues/detail?id=6157](http://code.google.com/p/primefaces/issues/detail?id=6157)

**FileUpload**组件中的**isTransient()**方法似乎有问题。希望能帮助到你。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T09:18:06.293

我想我已经找到了问题所在，但我不确定是什么导致了这个问题。我用来显示 fileUpload 组件的 xhtml 页面有许多选项卡，每个选项卡都有自己的 h:form。我创建了一个只有一个表单的新页面，并且 fileUpload 组件似乎在那里工作正常。**

# javascript - Javascript 验证 - “从日期”不应早于“截止日期”的 13 个月

> ID：12070903
> 
> 赞同：-2
> 
> 时间：2012-08-22T10:13:15.770
> 
> 标签：javascript

> **可能重复：**
> [javascript 中不接受早于 13 个月的 From Date](https://stackoverflow.com/questions/12054405/from-date-will-not-be-accept-earlier-than-13-months-in-javascript)

我正在尝试形成一个“开始日期”，与“截止日期”相比，不会早于 13 个月。所以这是我的要求。我为此做了一个 poc。

我还有两个验证，例如“To Date must be greater than From Date”，这对我来说很好。我需要 13 个月的回溯验证帮助。如果您有任何澄清，请提出..

[http://jsfiddle.net/ssthil/DUJGz/3/](http://jsfiddle.net/ssthil/DUJGz/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:24:09.460

它就像我[在另一个问题](https://stackoverflow.com/a/12054561/1048572)中所说的那样工作。更新小提琴：http: [//jsfiddle.net/DUJGz/7/](http://jsfiddle.net/DUJGz/7/)

# sql-server - 为什么 SQL Server 每秒两次在事件日志中显示“正在启动数据库”？

> ID：12070906
> 
> 赞同：22
> 
> 时间：2012-08-22T10:13:41.467
> 
> 标签：sql-server, sql-server-2012

我有一个 SQL Server [2012 Express with Advanced Services] 数据库，里面没有多少。我正在使用 EF Code First 开发应用程序，由于我的模型仍处于不断变化的状态，因此数据库每天都会被删除并重新创建数次。

今天早上，我的应用程序第一次运行时无法连接到数据库。经调查，数据库似乎处于“Recovery Pending”模式。

查看事件日志，我可以看到 SQL Server 已记录：

> 启动数据库（我的数据库）

...整夜大约每秒两次。（事件日志已填满，所以我无法看到昨天晚上之后的内容）。

那些“信息”日志条目在今天早上 6 点左右停止，紧随其后的是一个“错误”日志条目：

> 资源池“内部”内存不足，无法运行此查询

我的数据库到底发生了什么？

注意：我有可能让我的 Web 应用程序在一夜之间以“调试”模式运行 - 尽管没有任何人“驾驶”它，但我无法想象会有很多数据库流量（如果有的话）。

还值得一提的是，我在数据库中有一个全文目录（尽管正如我所说，目前数据库中几乎没有任何实际内容）。

我不得不说，这令人担忧——如果这发生在我的生产数据库中，我会不高兴*！*

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-22T12:19:17.850

使用 AUTO_CLOSE ON 数据库将在没有连接时立即关闭，并在每次建立连接时重新打开（运行恢复，尽管速度较快）。所以你看到了这条消息，因为你的应用程序每 2 秒就会连接到数据库。你可能*总是*有这种行为，以前从未注意到。现在您的数据库崩溃了，您调查了日志并发现了这个问题。虽然现在您知道并且可能会修复它很好，但这并不能解决您*真正的*问题，即数据库的可用性。

所以现在你有一个无法恢复的数据库，你会怎么做？您从上次备份中恢复并应用您的[灾难恢复计划](http://www.sqlskills.com/BLOGS/PAUL/post/Importance-of-having-a-good-disaster-recovery-plan.aspx)。真的，仅此而已。而且别无选择。

如果您想了解崩溃发生的*原因*（可能是大约 1 种原因中的任何一种......），那么您需要联系[CSS](http://support.microsoft.com/contactus/)（产品支持）。他们有办法指导您完成调查。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-10-03T18:53:05.680

如果您想在事件日志中关闭此消息。只需转到 SQL Server Management Studio，

1.  右键单击您的数据库
2.  选择选项（从左侧面板）
3.  查看“自动”部分，并将“自动关闭”更改为“假”
4.  点击确定

就这样 ：）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-01T07:29:20.580

我遇到了一个类似的问题，一个 sql express 数据库卡在恢复中。在调查了日志之后，发现数据库每隔几分钟就会启动一次。运行脚本

```
select name, state_desc, is_auto_close_on from sys.databases where name = 'mydb' 
```

显示自动关闭已设置为打开。

因此，数据库似乎始终处于恢复状态，但实际上在再次离线之前在线了一小会儿，因为没有客户端连接。

我用以下脚本解决了这个问题。

```
Declare @state varchar(20)
while 1=1
   begin
     Select @state = state_desc from sys.databases where name='mydb';
     If @state = 'ONLINE'
        Begin
           Alter database MyDb
                 Set AUTO_CLOSE_OFF;
           Print 'Online'
           break;
        End
        waitfor delay '00:00:02'
   end 
```

# java - 当我最小化框架时面板组件消失

> ID：12070911
> 
> 赞同：4
> 
> 时间：2012-08-22T10:13:58.390
> 
> 标签：java, swing, user-interface, jframe, jpanel

我有一个带有主面板的布局，其内容由我通过按钮以这种方式决定：

```
public void actionPerformed(ActionEvent e) {
    mainPanel.removeAll(); //removing all current panel components
    if(e.getActionCommand().equals("content1")){
        mainPanel = new Content1Panel();
        add(mainPanel,BorderLayout.CENTER);
        validate();
    }else if(e.getActionCommand().equals("content2")){
        mainPanel = new Content2Panel();
        add(mainPanel,BorderLayout.CENTER);
        validate();
            }
} 
```

现在，如果我将框架最小化然后将其放在前面，我会发现所有主面板的组件都消失了！无论如何，当我将鼠标悬停在它们上时，鼠标组件再次显示。怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T10:21:31.363

*   对于`JFrame`// `JDialog`_`JWindow`

使用

```
validate(); (revalidate in Java7 )
repaint(); 
```

*   [关于标准规则的例子](https://stackoverflow.com/a/6989230/714968)

*   使用`CardLayout`代替`remove`然后`add`到`JPanel`容器

# ruby-on-rails - 从命令行使用 slimrb

> ID：12070920
> 
> 赞同：3
> 
> 时间：2012-08-22T10:14:24.040
> 
> 标签：ruby-on-rails, slim-lang

我正在将 slim 用于导轨外的项目。我看到 slimrb 提供了从命令行将模板编译为 html 的选项。

1）但是有没有办法将完整的视图目录编译为html。2) 也可以监视更改并不断更新生成的 html，就像 compass 对 .scss 文件所做的那样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-10T14:33:18.727

这个问题其实有**两个**完整的解决方案！两者都很容易实现：

### Slim [Guard 插件](https://github.com/indrekj/guard-slim)

*   每个 Ruby 开发人员都应该了解[Guard](https://github.com/guard/guard)。这是自动转译文件的最简单方法。
*   GitHub 上实际上有两个 Slim 守卫，不幸的是，主要的一个比较老，而且没有那么好。我建议使用`indrekj/guard-sim`（我链接到的那个）。

### JetBrains的[RubyMine IDE](http://www.jetbrains.com/ruby/)

*   真正卓越的软件，RubyMine 是 Rubyists 的天堂。它具有内置的文件观察器，您可以在每个项目的基础上进行配置，以转译所有典型资产。使用该程序为 Slim 文件设置监视程序很简单`slimrb`，并且为您提供了许多自定义选项。
*   在 RubyMine 中，您可以导入/导出文件观察器配置；[我在这里](https://github.com/SteveBenner/rubymine/tree/master/file-watchers)主持了一些，包括一个给 Slim 的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T16:43:52.930

1) 将一个目录中的所有文件从 slim 编译到 html 中，然后`cd`键入`slimrb *`，然后单击 tab 以展开`*`该目录中的所有文件名。因为它是一个视图目录，所以应该没有其他文件然后 *.slim

`slimrb`2) Slim 本身并没有实现这一点，但是编写一个脚本来监听文件系统事件并根据哪个文件更改了可执行文件来触发应该不会太难。

# xml - 使用 Perl、Sed、AWK 处理大文件时内存不足

> ID：12070925
> 
> 赞同：1
> 
> 时间：2012-08-22T10:14:33.213
> 
> 标签：xml, perl, sed, awk

我正在使用以下内容提取 XML 标记之间的内容： -

```
perl -lne 'BEGIN{undef $/} while (/<tagname>(.*?)<\/tagname>/sg){print $1}' input.txt > output.txt 
```

不幸的是我遇到了`out of memory`问题，我知道我可以拆分文件并处理每个 concat 但我想知道是否还有另一种方法，是对上面的修改还是使用 awk 或 sed 之类的？

文件大小在`input.txt`17GB 和 70GB 之间变化。

编辑：

输入文件可以是任何 XML 文件，需要注意的是它不包含换行符，例如：-

`<body><a></a><b></b><c></c></body><foo></foo><bar><z></z></bar>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T10:19:00.890

这个单行将整个文件作为一个巨大的“行”读入内存。当然，在内存中塞满 17GB 甚至更多的内存会出现问题！逐行读取和处理文件或用于[`read`](http://p3rl.org/read)获取合适大小的块。

在这种情况下，搜索`<tagname>`，记下它在行中的位置并从那里开始搜索结束标记。如果您没有找到它，请将当前行/块填充到缓冲区中并重复，直到您在文件中的其他行上找到它。找到后，打印出此缓冲区并将其清空。重复直到文件结束。

请注意，如果您使用任意大小的块，则必须通过从块的末尾切割不完整的标签并将其填充到“处理”缓冲区中来考虑标签被边界分割的可能性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T11:08:15.090

[使用像XML::LibXML::Reader](http://p3rl.org/XML%3a%3aLibXML%3a%3aReader)这样的 pull-parser 应该可以解析大文件。这是一个例子：

```
#!/usr/bin/perl
use warnings;
use strict;

use XML::LibXML::Reader;

my $reader = XML::LibXML::Reader->new(location => 'input.txt') or die;

while ($reader->read) {
    if ($reader->nodePath =~ m{/tagname$}                    # We are at <tagname> or </tagname>.
        and $reader->nodeType == XML_READER_TYPE_ELEMENT) {  # Only the start tag is interesting.
        print $reader->readInnerXml;
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T12:09:44.370

为了从文件中读取较小的块，您可以将输入记录分隔符设置为结束标记：

```
BEGIN { $/ = "</tagname>"; } 
```

这是一个例子：

**代码：**

```
perl -lnwe 'BEGIN { $/ = "</tagname>"; } print;' 
```

**输入：**

```
<tagname>foo</tagname><tagname>bar</tagname><tagname>baz</tagname><tagname>baf</tagname> 
```

**输出：**

```
<tagname>foo
<tagname>bar
<tagname>baz
<tagname>baf 
```

您会注意到缺少结束标记，这是因为`-l`您使用的选项还包括一个`chomp`，它会删除输入记录分隔符。如果您不想要这种行为，只需删除该`-l`选项并在您的打印语句中插入一个换行符。

**笔记：**

我想说这有点像 hack，但它确实与您已经使用的匹配，即区分大小写、精确标签匹配。

您可以做的补偿是在其中使用您的正则表达式：

```
perl -lnwe 'BEGIN { $/ = "</tagname>"; } 
    while (/<tagname>(.*?)<\/tagname>/sg) { print $1 }' input.txt > output.txt 
```

或者，可能，使用 XML 解析器来解析块。

如果其他人建议的 XML 解析器不适用于如此大的文件，这可能是一种读取较小数据块的方法，而不会冒险将标签切成两半。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T14:15:58.623

您还可以使用 awk 来破坏一个大的单行文件。Sed 在尝试加载整行时会因内存不足而崩溃，但在 awk（如 perl 中）中，您可以定义要用作“换行符”的内容，从而绕过问题。

对于 perl，上面已经有一个示例，这里是 awk 示例：

```
cat big-one-line-file |  awk 'BEGIN { RS=">" } ; {print $0">"}' 
```

请注意，在文件末尾，如果文件不以“>”结尾，则会显示一个额外的 >。您可以通过任何方式将其删除（例如清理后的 sed: `sed '$ s/>$//'`）或调整脚本。

因为我也有这个问题，为了帮助别人，我会添加更多的例子来帮助测试。

您可以使用 dd 测试脚本以提取文件的一小部分并捕获更大的“记录分隔符”，例如作品或标签。例子：

```
dd if=big-one-line-file.xml bs=8192 count=10  | awk ' BEGIN { RS="<tag 123>" } ; NR>1 {print "<tag 123>"$0}  ; NR==1 {print $0}  ' 
```

提取 big-one-line-file.xml 的前 80kB 并在“”中破坏该文件。为了避免文件开头的额外（和错误）“”，请区别对待（即：不要触摸它）

使用 dd 选项`skip={# of blocks to reach near the file size}` 提取文件的末尾而不是顶部（尾部将失败，因为它总是只有一行）。我使用了 skip=100000000 并开始删除零，直到出现某些内容并调整块号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T10:31:36.617

我会对您的输入文件应用过滤器以引入换行符。也许在每个之后`</tagname>`？`BEGIN{undef $/}`然后，您将能够摆脱`perl`命令并通过处理“合理”记录来避免内存问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T13:52:58.157

目前尚不清楚您输入的文件是否是格式正确的 XML。您给出的示例不是 XML（没有根元素）。如果数据是 XML，您可以使用[XML::Twig](https://metacpan.org/module/XML%3a%3aTwig)`xml_grep`附带的工具。这适用于任何大小的文件，前提是每个匹配的元素都可以放入内存中。`xml_grep -r tagname --text_only mybig.xml`

如果这太慢，您可能可以通过直接使用 XML::Parser 来获得一些速度，代码编写起来并不复杂。虽然不必编写它更容易;--)

# design-patterns - 客户端-服务器应用程序中的会话外观

> ID：12070928
> 
> 赞同：3
> 
> 时间：2012-08-22T10:14:49.527
> 
> 标签：design-patterns, jakarta-ee, architectural-patterns

在 J2EE Pattern Session Façade - “Core J2EE Patterns - Best Practices and Design Strategies”一书中说：

> 使用 Session Façade 封装业务层组件并向远程客户端公开粗粒度服务。客户端访问会话外观而不是直接访问业务组件。

我想知道远程客户端意味着什么？因为我正在创建一个客户端服务器应用程序，其中客户端是一个 android 应用程序，而服务器是一个 java 服务器。会话外观是我需要向客户端（android 应用程序）公开它们两者之间通信所需的 API 吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T17:09:13.040

![图表](../Images/213e3eee614921262f636667fd100d33.png)

远程客户端可以是任何东西——Web 浏览器、Android 应用程序或其他一些 Web 服务或应用程序。

现在，当您提供 Facade 时。它将向您展示您的 Android 应用程序（远程客户端）将用于访问服务器端的接口。这样，你的android app就不用担心业务逻辑和数据处理的实现细节了。

您访问和处理数据的逻辑可能会随着时间而改变，但只要您的外观接口相同，您的客户就不必担心任何事情，这就是外观的好处。此外，如果明天如果您想在 Windows 或 iPhone 中开发应用程序，您可以使用相同的 Facade 界面来访问您的系统，而无需编写新的一行代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:38:40.110

Facade 应该为服务器客户端通信（会话）提供简化的接口。所以这个服务（门面）应该聚合这个通信的所有重要方法。

您可以查看设计模式[外观](http://en.wikipedia.org/wiki/Facade_pattern)以了解更多信息。

# php - 使用 preg_match 在 URL 中查找单词（或不带空格的字符串）

> ID：12070929
> 
> 赞同：1
> 
> 时间：2012-08-22T10:15:01.090
> 
> 标签：php, regex, preg-match

抱歉，我对正则表达式有点陌生，无论如何我有一个类似的网址`http://example.com/test/folder/?get=ThisisaValue`，我需要它来返回“get”这个词是否在那里。

每当我运行该功能时，我都找不到匹配项？感谢您提供任何帮助。

示例代码，假设`$_SERVER['HTTP_REFERER']`是`http://example.com/hello/?state=12345`

```
if(preg_match("state", $_SERVER['HTTP_REFERER'])) {
   echo "match";
} else {
   echo "no match";
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T10:20:59.987

> 我需要它来返回“get”这个词是否在那里

在这种情况下，您不需要匹配任何内容 - 您只需检查子字符串是否在字符串中，使用`strpos()`.

```
if (strpos($url, 'get')) {
    // do something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:24:06.793

您忘记了分隔符：

```
preg_match("~state~", $_SERVER['HTTP_REFERER']) 
```

现在它应该工作了:)

# .net - Oracle 和 .Net SqlDataSource

> ID：12070932
> 
> 赞同：2
> 
> 时间：2012-08-22T10:15:08.777
> 
> 标签：.net, oracle

我将 Oracle.DataAccess.Client 与 11g 数据库一起使用。我已经像这样设置了一个 SQL 数据源。

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server"
    ConnectionString="<%$ ConnectionStrings:OracleRoadmap %>" 
    ProviderName="<%$ ConnectionStrings:OracleRoadmap.ProviderName %>" 

    SelectCommand="SELECT * FROM &quot;FILES&quot; WHERE (&quot;FILE_NAME&quot; LIKE '%' + ? + '%')">
    <SelectParameters>
        <asp:ControlParameter ControlID="txtSearchValue" Name="FILE_NAME" 
            PropertyName="Text" Type="String" DefaultValue="" />
    </SelectParameters>
</asp:SqlDataSource> 
```

ORA-00911: 运行此程序时字符无效。但是，如果我对 FILE_NAME 进行硬编码，那么它就可以工作。

> "SELECT * FROM FILES WHERE FILE_NAME LIKE '%.zip%'

我已经尝试过同样的事情，但是针对 SQL Server 并且没有任何问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:46:15.887

并不是我一直在寻找的答案，但我已经在后面的页面代码中为 SQLDatasource 动态创建了 SelectCommand，这可以解决这个问题。

我怀疑这个问题与分别传递给 Oracle 的语句和变量有关，并且在 Oracle 中创建完整语句时产生了错误。不幸的是，我无法访问 Oracle 日志来查看正在发生的事情。

# perl - 绕过 Perl 安全信号时谁会受到影响？

> ID：12070933
> 
> 赞同：1
> 
> 时间：2012-08-22T10:15:14.457
> 
> 标签：perl, signals

绕过 Perl 安全信号引起的风险，例如 DBI 文档中的[第二个超时示例](http://search.cpan.org/perldoc?DBI#Signal_Handling_and_Canceling_Operations)所示，是否只涉及使用这种绕过的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:04:28.907

该示例中的代码努力将更改本地化为仅该部分代码或从中调用的任何代码。

不能 100% 保证在绕过安全信号的代码之外没有代码会受到影响，因为信号不再安全。在示例中，超时的调用是 DBI->connect。对于大多数 DBD，这将主要在 C 中实现，除非 C 代码可以处理被中止并再次尝试，否则您可能会发现 DBD 内部的某些数据结构或它使用的库处于不稳定状态。

示例代码出错的可能性可能非常小。我个人对这些问题的轶事是，在引入安全信号之前，我已经使用传统的 Perl 信号处理多年，而且很长一段时间我都没有遇到过问题。我什至对我在信号处理程序中所做的事情都不太谨慎。然后，我们设法在每 100 次运行中大约有 1 次触发了确实触发内存损坏的数据集。只需修改信号处理程序以使用更好的做法，类似于示例中的做法，就消除了我们的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T15:09:17.623

那有什么意思？通过使用不安全的信号，您可以破坏 Perl 的内部结构和 Perl 变量。如果不可重入 C 库调用被中断，它也可能导致问题。

这可能会导致 SEGFAULT 和其他问题，并且这些问题可能只会在超时生效的块之外表现出来。

# java - 查询适当的数据库模式

> ID：12070934
> 
> 赞同：1
> 
> 时间：2012-08-22T10:15:15.193
> 
> 标签：java, schema, h2, information-schema, jooq

[这是我之前](https://stackoverflow.com/questions/12066043/accessing-h2-database-schema)关于在 java 中使用 jooq 与 H2 交互指定多个模式的问题的后续问题。

我的测试 H2 DB 目前有 2 个模式，PUBLIC 和 INFORMATION_SCHEMA。PUBLIC 被 H2 指定为默认模式。当运行一个应该从例如 INFORMATION_SCHEMA.TABLES 中提取信息的查询时，查询失败并出现“表未知”SQL 错误。我只能通过执行一个`factory.use(INFORMATION_SCHEMA)`. 没有构建错误等，并且 Eclipse 可以正确地自动完成，例如 TABLES.TABLE_NAME。

如果我不这样做，即使我为模式创建了正确的工厂对象，jooq 似乎也不会预先添加适当的模式，例如

```
InformationSchemaFactory info = new InformationSchemaFactory(conn); 
```

我阅读了有关[映射](http://www.jooq.org/manual/ADVANCED/SchemaMapping/#N10DD3 "映射")的信息，但对于我将使用哪个模式作为输入/输出感到有点困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:36:41.970

默认情况下，`InformationSchemaFactory`假定提供的连接实际连接到`INFORMATION_SCHEMA`. 这就是为什么模式名称不在 SQL 中呈现的原因。例子：

```
// This query...
new InformationSchemaFactory(conn).selectFrom(INFORMATION_SCHEMA.TABLES).fetch();

// ... renders this SQL (with the asterisk expanded):
SELECT * FROM "TABLES"; 
```

上述行为应记录在您生成的`InformationSchemaFactory`Javadoc 中。为了在前面`"TABLES"`加上`"INFORMATION_SCHEMA"`，您有几个选择。

1.  改用常规工厂，它不依赖于任何模式：

    ```
    // This query...
    new Factory(H2, conn).selectFrom(INFORMATION_SCHEMA.TABLES).fetch();

    // ... renders this SQL:
    SELECT * FROM "INFORMATION_SCHEMA"."TABLES"; 
    ```

2.  使用另一个模式的工厂，例如生成的`PublicFactory`：

    ```
    // This query...
    new PublicFactory(conn).selectFrom(INFORMATION_SCHEMA.TABLES).fetch();

    // ... renders this SQL:
    SELECT * FROM "INFORMATION_SCHEMA"."TABLES"; 
    ```

3.  使用[设置](http://www.jooq.org/manual/JOOQ/Factory/#N100B8)和适当的模式映射来强制呈现模式名称。

第一个选项可能是最简单的一个。

这篇博文将让您深入了解如何将执行的查询记录到您首选的记录器输出：[http ://blog.jooq.org/2011/10/20/debug-logging-sql-with-jooq/](http://blog.jooq.org/2011/10/20/debug-logging-sql-with-jooq/)

# php - 我们可以使用 PHPExcel 设置可编辑的 Excel 行和列的限制吗？

> ID：12070936
> 
> 赞同：2
> 
> 时间：2012-08-22T10:15:20.110
> 
> 标签：php, phpexcel

我想找到一种方法让用户查看最大 1000 行和特定列限制的 Excel 表。此[链接](http://spreadsheets.about.com/od/excelformulas/ss/2011-05-14-excel-2010-limit-rows-tutorial.htm)显示了我需要（以及为什么）的类似示例。

我开发了一个包含 1000 行数据验证列表（每个单元格一个）的模板，我不想让用户在结束我设置的 1000 个数据验证列表后尝试手动输入数据。这样，如果 PHPExcel 可以设置一系列可编辑（或可见）的行和列，那就太好了。我试图在文档中搜索，但我找不到它的东西（也许我做了不好的研究）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:53:28.653

由于尚无法为行/列设置可见性限制，因此我的解决方案是：

首先我为工作表设置了保护，然后我删除了我想让用户能够编辑的单元格的保护：

```
 $latestTemplateColumn = $objPHPExcel->getActiveSheet()->getHighestDataColumn();
    $latestTemplateColumn++;
    $objPHPExcel->getActiveSheet()->getProtection()->setSheet(true);
    $column = 'A';
    for ($row = 3; $row <= $maxRows; $row++) {
        for ($column = 'A'; $column != $latestTemplateColumn; $column++) {
            $cell = $objPHPExcel->getActiveSheet()->getCell($column.$row);
            $objPHPExcel->getActiveSheet()->getStyle($column.$row)->getProtection()->setLocked(PHPExcel_Style_Protection::PROTECTION_UNPROTECTED);
        }
    } 
```

此代码从第 3 行开始，直到我设置的 $maxRow，并且直到最后一列有数据。这样用户只能在我设置的范围内输入数据。

# c# - 锁定/线程安全访问 XObject

> ID：12070938
> 
> 赞同：0
> 
> 时间：2012-08-22T10:15:29.123
> 
> 标签：c#, thread-safety, locking, linq-to-xml

我正在编写一个基于阅读和编辑大型、相当复杂（多文档）XML 结构的 GUI 应用程序。GUI 本身主要基于数据绑定，因此与 XML 的大部分交互将通过基于对象的模型在 UI 线程上完成，该模型在幕后使用 LINQ to XML，但是我知道某些操作（例如搜索和loading) 将需要在后台线程上执行，因此我需要确保我们以线程安全的方式访问此 XML。

我很容易确保 XML 的所有编辑都是线程安全的（例如，使用全局锁或通过在 UI 线程上执行所有编辑），但是我注意到[XObject](http://msdn.microsoft.com/en-us/library/system.xml.linq.xobject%28v=vs.110%29.aspx)的文档状态

> 这种类型的任何公共静态成员都是线程安全的。**不保证任何实例成员都是线程安全的。**

这意味着我必须同步对我的应用程序中使用的*任何*实例的**所有**访问。不幸的是，由于我的对象模型的操作方式，我很难确保我的模型中的任何对象的最多 1 个实例可以访问任何给定的对象，这意味着我无法通过锁定私有对象来确保线程安全（通常是防止死锁的最佳实践）。 *`XObject``XObject`*

 *在这种情况下，是否可以直接在`XObject`自身上使用锁定以确保线程安全，或者是否有替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T21:08:41.733

我不建议锁定 XObject 本身。它可能有效，但通常不是一个好的解决方案（因为任何人都可以这样做）。相反，您可以做的是在 XObject 上添加一个私有注释并锁定它。您可以使用只有您可以访问的类型的对象（因此在您的程序集内部）将注释设为私有。因为要查找注释需要知道它的类型，如果类型是“私有的”，其他人就无法查找它。*

# java - 在 Java 中使用标记语句有什么意义？

> ID：12070942
> 
> 赞同：15
> 
> 时间：2012-08-22T10:15:46.800
> 
> 标签：java, label

我正忙于学习我的认证，我偶然发现了一个我以前从未听说过的概念——“标签声明”。例如：

“标签”：“声明”

```
L1: while(i < 0){
     L2: System.out.println(i);
} 
```

所以我的问题是……为什么？这有什么用，什么时候想要使用这样的东西？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-22T10:17:32.200

我知道的唯一用途是您可以在`break`or`continue`语句中使用标签。因此，如果您有嵌套循环，这是一种一次突破多个级别的方法：

```
OUTER: for (x : xList) {
          for (y : yList) {
              // Do something, then:
              if (x > y) {
                  // This goes to the next iteration of x, whereas a standard
                  // "continue" would go to the next iteration of y
                  continue OUTER;
              }
          }
       } 
```

正如示例所暗示的，如果您以嵌套方式一次迭代两个事物（例如搜索匹配项）并想要继续 - 或者如果您正在进行正常迭代，但出于某种原因想要放置一个在嵌套`for`循环中中断/继续。

不过，我倾向于每隔几年才使用一次。有一个先有鸡还是先有蛋的问题，因为它们是一种很少使用的构造，因此很难理解，因此如果可以以另一种方式清楚地编写代码，我将避免使用标签。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-08-22T10:45:16.223

它可用于避免需要“未找到”标志。

```
FOUND: {
  for(Type t: list)
     if (t.isTrue())
        break FOUND;

  // handle not found.
} 
```

这可能是对标签的误用，但您可以使用它们在没有循环的情况下中断。

```
LABEL: {
    if(condition)
       break LABEL;
    // do something
} 
```

它也可以用来迷惑人，这是避免它的好理由。;)

```
http://www.google.com
while(true) break http; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T10:18:43.120

我认为它们是必需的，这样您就可以在假装编写 Java 的同时编写 Fortran。*没有它们，无论他们使用什么语言，**[真正的程序员](http://www.cs.utah.edu/~elb/folklore/mel.html) [用 Fortran 编写](http://www.pbm.com/~lindahl/real.programmers.html)*的格言都可能失效。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-22T10:21:30.803

我曾经将这些用作注释语句 :) 除了笑话，它就像基本的 Go to 语句，它允许您跳转到一行代码，即在深度循环结构中......

用法：

```
scan: {
      int c;
      for (firstUpper = 0 ;
          firstUpper < count ;
          firstUpper += Character.charCount(c)) {
        c = codePointAt(firstUpper);
        if (c != Character.toLowerCase(c)) {
          break scan;
        }
      }
      return this;
    } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-22T10:51:21.907

`break`这是其他回复可能会遗漏的过度示例。它允许在 switch{} 语句中打破循环：

```
loop: for(;;){
  int c=in.read();
  switch(c){
  case -1:
  case '\n':
    break loop;
  case 'a':
    processACommand();
    break;
  case ...
  default:
    break;
  }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-25T13:00:39.220

正如其他答案所述，标签是 Java 语言中很少使用的部分。

但在你的情况下，应该考虑其他一些事情：

*   标签非常“通用”，实际上是行号：`L1`, `L2`, ...

*   代码中不使用标签。

*   您正在学习认证材料。

这意味着，`L1`标签`L2`只是行号。我假设，解释代码的文本是指该行号。同样，一些书籍和论文列举所有数学术语只是为了在文本中引用它们或使引用更容易。

# ios - NSOperation 的保留计数行为

> ID：12070945
> 
> 赞同：2
> 
> 时间：2012-08-22T10:15:55.380
> 
> 标签：ios, memory-management, automatic-ref-counting, nsoperation, retaincount

将 NSOperation 插入 NSOperationQueue 是否会增加 NSOperation 的保留计数？如果是，什么时候会减少？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T10:23:40.070

请阅读文档。

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html)

> *   (void)addOperation:(NSOperation *)*操作*
> 
> **参数**
> 
> *手术*
> 
> 要添加到队列中的操作对象。在内存管理的应用程序中，此对象由操作队列保留。在垃圾收集应用程序中，队列强引用操作对象。
> 
> **讨论**
> 
> 添加后，指定的*操作*将保留在队列中，直到完成执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T10:23:13.580

从文档

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html)

> 参数。
> 
> 手术。要添加到队列中的操作对象。在内存管理的应用程序中，此对象由操作队列保留。在垃圾收集应用程序中，队列强引用操作对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T10:23:46.603

从[文档中](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html)：

> 在内存管理的应用程序中，此对象由操作队列保留。在垃圾收集应用程序中，队列强引用操作对象。

出队和处理时它会递减，所以你不必担心。只需将其添加到队列中并确保您已平衡所有的`retain`and `release`，它不会泄漏内存。

# c++ - 从 C++11 用基于范围的 for 循环替换 BOOST_FOREACH 有什么经验吗？

> ID：12070952
> 
> 赞同：6
> 
> 时间：2012-08-22T10:16:11.070
> 
> 标签：c++, visual-c++, boost, c++11

你有没有经历过用`BOOST_FOREACH`基于范围的`for`循环替换的过程？*机械*地做它时是否有任何陷阱（即没有对周围的代码进行深入研究）。

背景：我确实有大约 250K 行的源代码，使用 Microsoft VC++ 10 (Visual Studio 2010) 编译。该代码还使用来自 boost 库的 BOOST_FOREACH。我只是在尝试`for`使用`auto`.

到目前为止，我遇到过在`BOOST_FOREACH`（括号中没有声明）之外声明元素的情况：

```
BOOST_FOREACH (element, container) {
    ...
} 
```

...并且`element`期望在 . 之后的循环中设置值`break`。你能记住类似的*问题*吗？

当`BOOST_FOREACH`包含声明时，您会选择用 替换显式类型`auto`吗？`BOOST_FOREACH`当一个人只是机械地重写而不是将显式声明留在那里时，这样做有什么好处吗？

谢谢你的帮助，彼得

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T15:21:07.460

使用实际类型或引用类型的优势在于`auto`，如果容器类型发生变化，代码将继续工作。如果您有意对间接容器迭代器的结果执行类型转换，这可能不是您想要的。

例子：

```
std::vector<int> v;
for (int i: v) ... 
```

如果`v`更改为`std::vector<long>`或`std::vector<unsigned>`则类型转换可能是不需要的；尽管如此，编译器警告应该会捕捉到这一点（特别是对于缩小转换）。另一方面，您可以有代码用于（扩大）转换：

```
std::vector<char> v;
for (int i: v) ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T13:18:31.067

> 你会选择用自动替换显式类型吗？

是的，但是如果类型是例如，`int&`那么我会将其替换为`auto&`否则推导的类型将不是参考。

# mysql - 使用 NoSql 功能装饰现有的关系 SQL 数据库

> ID：12070962
> 
> 赞同：1
> 
> 时间：2012-08-22T10:17:00.247
> 
> 标签：mysql, sql, nosql

我们有一个关系数据库（MySql），其中有一个存储“Whatever”的表。此表有许多存储不同（逻辑和数据）类型的属性的字段。请求是要添加另外 150 个新的、不相关的属性。

**我们当然不想添加 150 个新列。**我看到另外两个选项：

1.  添加**一个简单的键值表**（ID、FK_Whatever、Key、Value 和可能的类型），其中 *FK_Whatever* 引用 What ID 和*Key*将是属性的名称。使用 JOIN 进行查询是可行的。
2.  将**一个大文本字段**添加到 What 表并将**150 个新属性序列化**到其中（可能是 Xml）。在某种程度上，这将是 NoSql 存储数据的方式。查询这些字段意味着实现一些智能全文语句。

在这两种情况下都失去了类型安全性，但无论如何我们并不真正需要它。

我感觉这个常见问题有一个更聪明的解决方案（由于各种原因，我们无法迁移到 NoSql 数据库）。有人有提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T10:25:14.547

在我们需要为业务对象存储任意扩展属性的早期项目中，我们创建了一个扩展模式，如下所示：

```
CREATE TABLE ext_fields
{
    systemId INT,
    fieldId  INT,
    dataType INT // represented using an enum at the application layer.

    // Other attributes.
}

CREATE TABLE request_ext
{
    systemId   INT,  // Composite Primary Key in the business object table.
    requestId  INT,  // Composite Primary Key in the business object table.
    fieldId    INT,
    boolean_value BIT,
    integer_value INT,
    double_value  REAL,
    string_value  NVARCHAR(256),
    text_value    NVARCHAR(MAX),
} 
```

给定的记录将仅具有基于 ext_fields 表中定义的字段的数据类型设置的 _value 列。这使我们不会丢失字段的类型及其值，并且在利用 DBMS 为这些数据类型提供的所有过滤方法方面工作得很好。

我的两分钱！

# html - Zurb Foundation 3：将表单元素垂直对齐到行中

> ID：12070969
> 
> 赞同：1
> 
> 时间：2012-08-22T10:17:26.877
> 
> 标签：html, css, vertical-alignment, zurb-foundation

**编辑：**我使用的是 Zurb Foundation 3，所以文本输入可能很特殊

我有一个表单，其中包含几行具有相同字段的表单。在每一行中都有不同类型的元素，一些文本输入，一些按钮，一个复选框......

所有这些元素都有不同的高度，我希望它们彼此垂直居中。到目前为止，这是我的代码：

```
<tr>
    <td class="four middle"><input type="text".../></td>
    <td class="two middle"><input type="checkbox".../></td>
    <td class="two middle"><input.../></td>
    <td class="four middle"><a href="#" class="button small">Button</a></td>
</tr> 
```

在我的 CSS 中，我指定了：

```
.middle { vertical-align: middle !important; } 
```

这确实使复选框和按钮居中，但不是文本输入，它们似乎保持顶部对齐。我也尝试了一些使用 div 而不是表格的变体，但没有运气。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T17:12:10.383

这被添加到输入

```
margin:0 0 12px 0; 
```

只需将底部边距设置为 0 或将 12px 边距添加到顶部，由您决定

# css - 如何在 twitter 的 bootstrap 2.1.0 中使用新的 affix 插件？

> ID：12070970
> 
> 赞同：110
> 
> 时间：2012-08-22T10:17:28.517
> 
> 标签：css, web, twitter-bootstrap, navbar

关于该主题的引导文档让我有点困惑。我想在带有词缀导航栏的文档中实现类似的行为：导航栏位于段落/页面标题下方，向下滚动时，它应该首先滚动直到到达页面顶部，然后固定在那里以进一步向下滚动.

由于 jsFiddle 不适用于导航栏概念，因此我设置了一个单独的页面作为最小示例：http: [//i08fs1.ira.uka.de/~s_drr/navbar.html](http://i08fs1.ira.uka.de/~s_drr/navbar.html)

我用它作为我的导航栏：

```
<div class="navbar affix-top" data-spy="affix" data-offset-top="50">
    <div class="navbar-inner">
        <div class="container">
            <div class="span12">
                <a class="brand" href="#">My Brand</a> 
                This is my navbar.
             </div>
        </div> <!-- container -->
    </div> <!-- navbar-inner -->
</div> <!-- navbar --> 
```

我想我希望`data-offset-top`值为 0（因为条形图应该“粘”到最顶部”，但 50 至少有一些效果可看。

如果也将javascript代码放在适当的位置：

```
 <script>
        $(document).ready (function (){
            $(".navbar").affix ();
        });
     </script> 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2012-10-31T03:50:32.707

我遇到了类似的问题，我相信我找到了改进的解决方案。

不要费心`data-offset-top`在您的 HTML 中指定。相反，请在调用时指定它`.affix()`：

```
$('#nav').affix({
    offset: { top: $('#nav').offset().top }
});​ 
```

这里的优点是您可以更改站点的布局而无需更新`data-offset-top`属性。由于这使用了元素的实际计算位置，因此它还可以防止与将元素呈现在稍微不同的位置的浏览器不一致。

* * *

您仍然需要使用 CSS 将元素固定在顶部。此外，我不得不设置`width: 100%`nav 元素，因为由于某种原因行为不端的`.nav`元素：`position: fixed`

```
#nav.affix {
    position: fixed;
    top: 0px;
    width: 100%;
} 
```

* * *

最后一件事：当一个附加元素变得固定时，它的元素不再占用页面空间，导致它下面的元素“跳跃”。为了防止这种丑陋，我将导航栏包装在`div`我设置为等于运行时导航栏的高度中：

```
<div id="nav-wrapper">
    <div id="nav" class="navbar">
        <!-- ... -->
    </div>
</div> 
```

.

```
$('#nav-wrapper').height($("#nav").height()); 
```

* * *

[这是必须的 jsFiddle 才能看到它的实际效果](http://jsfiddle.net/namuol/Uaa3U/)。

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2012-08-22T23:09:09.770

刚刚第一次实现了这个，这就是我发现的。

该`data-offset-top`值是为使附加效果发生而必须滚动的像素数量。在您的情况下，一旦`50px`滚动，您的项目上的类将从更改`.affix-top`为`.affix`。您可能希望在您的用例中设置`data-offset-top`为 about 。`130px`

一旦发生此类更改，您必须通过设置 class 的定位样式将元素定位在 css 中`.affix`。Bootstrap 2.1 已经定义了`.affix`，`position: fixed;`所以你需要做的就是添加你自己的位置值。

例子：

```
.affix {
    position: fixed; 
    top: 20px; 
    left: 0px;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-25T22:52:01.743

为了解决这个问题，我修改了 affix 插件以在对象被附加或未附加时发出 jQuery 事件。

这是拉取请求：[https ://github.com/twitter/bootstrap/pull/4712](https://github.com/twitter/bootstrap/pull/4712)

和代码：[https ://github.com/corbinu/bootstrap/blob/master/js/bootstrap-affix.js](https://github.com/corbinu/bootstrap/blob/master/js/bootstrap-affix.js)

然后执行此操作以附加导航栏：

```
<script type="text/javascript">
$(function(){
    $('#navbar').on('affixed', function () {
        $('#navbar').addClass('navbar-fixed-top')
    });

    $('#navbar').on('unaffixed', function () {
        $('#navbar').removeClass('navbar-fixed-top')
    });
});
</script> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-25T17:45:45.630

您需要`.affix()`从脚本中删除。

Bootstrap 在大多数情况下提供了通过`data-attributes`JavaScript 或直接 JavaScript 完成任务的选项。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-17T08:31:39.210

我从 twitterbootstrap 的源代码中得到了这个，它运行得很好：

HTML：

```
<div class="row">
    <div class="span3 bs-docs-sidebar">
        <ul id="navbar" class="nav nav-list bs-docs-sidenav">
            ...
        </ul>
    </div>
</div> 
```

CSS：

```
.bs-docs-sidenav {
    max-height: 340px;
    overflow-y: scroll;
}

.affix {
    position: fixed;
    top: 50px;
    width: 240px;
} 
```

JS：

```
$(document).ready(function(){
    var $window = $(window);
    setTimeout(function () {
        $('.bs-docs-sidenav').affix({
            offset: {
                top: function (){
                    return $window.width() <= 980 ? 290 : 210
                }
            }
        })
    }, 100);
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-01T12:53:33.420

您只需要删除脚本。这是我的例子：

```
<!DOCTYPE html>
<html>

<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.0.min.js"></script>
<script type="text/javascript" src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.1.0/js/bootstrap.min.js"></script>

  <style>
  #content {
    width: 800px;
    height: 2000px;
    background: #f5f5f5;
    margin: 0 auto;
  }
  .menu {
    background: #ccc;
    width: 200px;
    height: 400px;
    float: left;
  }
  .affix {
    position: fixed;
    top: 20px;
    left: auto;
    right: auto;
  }
  </style>

</head>
<body>
    <div id="content">
        <div style="height: 200px"></div>

        <div class="affix-top" data-spy="affix" data-offset-top="180">
            <div class="menu">AFFIX BAR</div>
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-20T21:19:38.343

感谢 namuol 和 Dave Kiss 的解决方案。在我的情况下，当我一起使用 afflix 和折叠插件时，导航栏的高度和宽度有一个小问题。宽度问题可以很容易地从父元素（在我的例子中是容器）继承它来解决。我也可以设法用一点javascript（实际上是coffeescript）让它顺利折叠。`auto`诀窍是在折叠切换发生之前将包装器高度设置为并在之后将其修复。

标记（haml）：

```
#wrapper
  #navbar.navbar
    .navbar-inner
      %a.btn.btn-navbar.btn-collapse
        %span.icon-bar
        %span.icon-bar
        %span.icon-bar

      #menu.nav-collapse
        -# Menu goes here 
```

CSS：

```
#wrapper {
  width: inherit;
}

#navbar {
  &.affix {
    top: 0;
    width: inherit;
  }
} 
```

咖啡脚本：

```
class Navigation
  @initialize: ->
    @navbar = $('#navbar')
    @menu = $('#menu')
    @wrapper = $('#wrapper')

    @navbar.affix({offset: @navbar.position()})
    @adjustWrapperHeight(@navbar.height())

    @navbar.find('a.btn-collapse').on 'click', () => @collapse()

    @menu.on 'shown', () => @adjustWrapperHeight(@navbar.height())
    @menu.on 'hidden', () => @adjustWrapperHeight(@navbar.height())

  @collapse: ->
    @adjustWrapperHeight("auto")
    @menu.collapse('toggle')

  @adjustWrapperHeight: (height) ->
    @wrapper.css("height", height)

$ ->
  Navigation.initialize() 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-27T23:38:16.643

我附加导航栏的解决方案：

```
function affixnolag(){

    $navbar = $('#navbar');
    if($navbar.length < 1)
        return false;

    h_obj = $navbar.height();

    $navbar
        .on('affixed', function(){      
            $navbar.after('<div id="nvfix_tmp" style="height:'+h_obj+'px">');
        })
        .on('unaffixed', function(){
            if($('#nvfix_tmp').length > 0)
                $('#nvfix_tmp').remove();
        });
 } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-09-02T17:27:36.673

与接受的答案类似，您还可以执行以下操作来一次性完成所有操作：

```
$('#nav').affix({
  offset: { top: $('#nav').offset().top }
}).wrap(function() {
  return $('<div></div>', {
    height: $(this).outerHeight()
  });
});​ 
```

这不仅会调用`affix`插件，还会将附加元素包装在一个 div 中，这将保持导航栏的原始高度。

# java - 将具有多个工作表的 Excel 工作簿映射到 XSD

> ID：12070972
> 
> 赞同：0
> 
> 时间：2012-08-22T10:17:38.403
> 
> 标签：java, xml, excel, xsd, automation

我有一个包含多张工作表的 Excel 工作簿。每张表都有一个表格，不同的表格有不同的格式。我需要将整个工作簿读入我的 Java 程序。恕我直言，最方便的方法是将整个数据导出到单个 XML 并解析它（使用 simpleXML 或其他兼容的解析器）。我没有发现将模式应用于工作簿的多个工作表的方法，只能应用于单个工作表。可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T20:30:20.567

谈到便利性，有许多因素会影响或定义它。例如，这取决于这是否是一个持续的事情，或者它是否需要集成到一个流程中，等等。

在按照建议推荐解决方案之前，我会尝试说服您查看 Apache 的 POI（Microsoft 文档的 Java API），特别是[Excel API](http://poi.apache.org/spreadsheet/index.html)。它为您的 Java 程序提供了一个 Java API，应该可以让您轻松阅读所需的内容。这将是一种一站式服务。

另一种方法可能是使用 Jdbc 到 Odbc 并通过 JDBC API（JDBC 到 ODBC 提供程序）访问 Excel。我无法从您的问题中的详细信息中判断您的部署模型是否允许这样做（例如，如果您在没有 Excel 文件的 ODBC 提供程序的平台上运行），但在 Windows 上肯定是一个选项；此外，互联网上的许多地方都详细介绍了这种方法。

如果您坚持走 XML 导出方式，[QTAssistant](http://paschidev.com)（我与之相关）有一个全面的解决方案（XML Builder），用于从任何受支持的关系数据源生成 XML。它提供了一个 GUI 和一个命令行。在您的情况下，它需要 XLS、一个描述您想要获取的 XML 的 XSD 和一个映射文件（基本上是另一个 XML 文件）来创建您需要的 XML。通常，此功能主要用于将测试数据转换为 XML 以供 Web 服务调用，因此它面向用户、工具和 XML 生成活动之间的某种交互模式。如果您对更多细节感兴趣，请告诉我。

# wpf - DXGridControl 不起作用

> ID：12070974
> 
> 赞同：0
> 
> 时间：2012-08-22T10:17:44.977
> 
> 标签：wpf, mvvm, devexpress, gridcontrol

我想更改`Background`, `FontWeight`, `Foreground`in `dxg:GridColumn`。我写了这段代码，但不幸的是它不起作用。我该如何解决？

```
public class CellViewModel {
    public string Value { get; set; }
    public string FontWeight { get; set; }
    public string Foreground { get; set; }
    public string Background { get; set; }
} 
```

* * *

```
public class TestItemViewModel {
    public CellViewModel Column1 { get; set; }
    public CellViewModel Column2 { get; set; }
    public CellViewModel Column3 { get; set; }
} 
```

* * *

```
public class TestViewModel {
    public TestViewModel() {
        this.Items = new ObservableCollection<TestItemViewModel> {
            new TestItemViewModel {
                Column1 = new CellViewModel { Value = "CCC", FontWeight = "Bold", Foreground = "Red", Background = "Green" }, 
                Column2 = new CellViewModel { Value = "-683,84", FontWeight = "Normal", Foreground = "Red", Background = "SeaGreen" }, 
                Column3 = new CellViewModel { Value = "-683,84", FontWeight = "Normal", Foreground = "Red", Background = "SeaGreen" }, 
            }
        };
    }
    public ObservableCollection<TestItemViewModel> Items { get; set; }
} 
```

* * *

```
<dxg:GridControl HorizontalContentAlignment="Right"
                 AutoPopulateColumns="False"
                 ItemsSource="{Binding Path=Performance.Items}">
    <dxg:GridControl.Resources>
        <DataTemplate x:Key="GridColumnHorizontalContentAlignmentTemplate">
            <dxe:TextEdit x:Name="PART_Editor" HorizontalContentAlignment="Right" />
        </DataTemplate>
    </dxg:GridControl.Resources>
    <dxg:GridControl.Columns>
        <dxg:GridColumn AllowColumnFiltering="False"
                        CellTemplate="{StaticResource GridColumnHorizontalContentAlignmentTemplate}"
                        FieldName="BuyAndHold.Value"
                        Header="Column 1"
                        HorizontalHeaderContentAlignment="Right">
            <dxg:GridColumn.CellStyle>
                <Style TargetType="dxg:CellContentPresenter">
                    <Setter Property="Background" Value="{Binding Path=Column1.Background}" />
                    <Setter Property="FontWeight" Value="{Binding Path=Column1.FontWeight}" />
                    <Setter Property="Foreground" Value="{Binding Path=Column1.Foreground}" />
                </Style>
            </dxg:GridColumn.CellStyle>
        </dxg:GridColumn>
    </dxg:GridControl.Columns>
    <dxg:GridControl.View>
         <dxg:TableView AllowEditing="False"
                        AllowGrouping="False"
                        AllowSorting="False"
                        NavigationStyle="None"
                        PrintTotalSummary="False"
                        ShowGroupPanel="False"
                        ShowHorizontalLines="False"
                        ShowIndicator="False"
                        ShowTotalSummary="False"
                        ShowVerticalLines="False" />
    </dxg:GridControl.View>
</dxg:GridControl> 
```

我不明白为什么会有

```
<Style TargetType="dxg:CellContentPresenter">
    <Setter Property="Background" Value="{Binding Path=BuyAndHold.Background}" />
    <Setter Property="FontWeight" Value="{Binding Path=BuyAndHold.FontWeight}" />
    <Setter Property="Foreground" Value="{Binding Path=BuyAndHold.Foreground}" />
</Style> 
```

没有数据绑定？

如果我手动设置值一切正常。例如。

```
<Setter Property="Background" Value="Red" /> 
```

工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T05:13:11.490

您使用的绑定路径错误。
使用以下语法：

```
<Setter Property="Background" Value="{Binding Path=RowData.Row.BuyAndHold.Background}"/> 
```

代替：

```
<Setter Property="Background" Value="{Binding Path=BuyAndHold.Background}"/> 
```

相关示例：[如何有条件地应用样式 (CellStyle)](http://www.devexpress.com/Support/Center/Example/Details/E1630)

# css - 如何为 facebook、google Plus 等帖子添加单独的选项菜单

> ID：12070975
> 
> 赞同：1
> 
> 时间：2012-08-22T10:17:45.470
> 
> 标签：css, ajax, jquery, drop-down-menu

![在此处输入图像描述](../Images/402f64a75e89f2f72d49f0bc8d195f55.png) ![在此处输入图像描述](../Images/44d597da4f2d9c1f58cb6390b03fe813.png)

我在 Jsfiddle 做了一些东西 :) [http://jsfiddle.net/madhu131313/gZWjb/](http://jsfiddle.net/madhu131313/gZWjb/) 但问题是当我点击下拉按钮时我有项目列表所有下拉菜单都打开假设如果我不显示对于其他人（我认为这不是正确的方法，因为它会使执行变得复杂）googleplus，facebook 代码是什么样的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:25:22.477

您需要使用`ID`( `#`) 作为您的链接，这样您就可以

```
<a href="#menu1" class="menu_drop" id="menu" rel="1"> 
```

也使用

`$(this)`，因此您可以在菜单上单击（任何页面链接），然后单击`slideDown`该 subMenu 子集。

我有一个类似的 jsFiddle，您可以看到多个线程，它们只会滑动和切换该特定线程。

[http://jsfiddle.net/gZWjb/7/](http://jsfiddle.net/gZWjb/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T12:34:38.773

最后我做了代码 [http://jsfiddle.net/madhu131313/xZNAY/](http://jsfiddle.net/madhu131313/xZNAY/)

# smarty - smarty中登录注销

> ID：12070977
> 
> 赞同：0
> 
> 时间：2012-08-22T10:17:50.060
> 
> 标签：smarty

我已经在 smarty 中编写了 header.tpl 和 login.php 文件。如果用户登录，我想显示注销文本。否则如果用户未登录，它应该显示登录。下面是 login.php 的代码

```
if(isset($_REQUEST['submit']))
    {
        $name=$_REQUEST['name'];
        $pass=$_REQUEST['pass'];
    $rs=mysql_query("select * from form where name='$name'");
    $fetchdata=mysql_fetch_array($rs);  
        if($rs)
        {
            $name=$fetchdata['name']
            $_SESSION['name']=$name;
            $name1=$_SESSION['name'];
            //$smarty->assign('name',$_SESSION['name']);
            $smarty->assign('name1',$name1);
            $smarty->display("about.tpl");

        }
        else
        {
            $smarty->display("login.tpl");
        }
    } 
```

下面是 header.tpl 代码

```
<a href="login.php">{if $name1!= ''}: Logout{else}login{/if}</a> 
```

它显示错误

```
Parse error: syntax error, unexpected T_VARIABLE in D:\xampp\htdocs\smarty\login.php on line 29 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:19:25.193

我发现了一堆奇怪的东西。

1.  在插入 sql 查询之前，您应该转义名称并传递。有关更多详细信息，请参见[http://www.php.net/manual/en/function.mysql-real-escape-string.php](http://www.php.net/manual/en/function.mysql-real-escape-string.php)。
2.  php 文档建议您应该使用 MySQLi 扩展
3.  我看不到身份验证..我的意思是您不使用给定密码。这个对吗？
4.  我认为即使结果为空，mysql_query 也不是错误的。`if($fetchdata=mysql_fetch_array($rs)){...`你可以用代替来解决这个问题`if($rs)`
5.  我不确定这是否会引发异常，但我会写`<a href="login.php">{if {$name1|default:""}!= ''}: Logout{else}login{/if}</a>`而不是`<a href="login.php">{if $name1!= ''}: Logout{else}login{/if}</a>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-06T02:56:00.287

这是一篇旧帖子，但几分钟前我遇到了类似的问题。

我收到变量的解析错误：$_smarty_t

我尝试了不同的方法来消除错误，但没有什么明显的。我确认缓存已关闭，但问题仍然存在，即使在删除单个缓存文件后也是如此。

最终我删除了那个目录的全部内容并刷新，错误终于解决了。

Smarty v3.1.27 出现此问题，通过 Composer、smarty/smarty 加载。

# java - jar 在类路径中工作而不是在 targetplatform eclipse

> ID：12070979
> 
> 赞同：0
> 
> 时间：2012-08-22T10:17:51.510
> 
> 标签：java, eclipse, classpath, target, platform

我有一个在其他人的 Eclipse 环境中在 Eclipse 中运行良好的 jar。当我将它添加到我的时，它没有得到解决，但是当我打开目标平台状态时，它就在那里。

如果我将 jar 作为目标平台文件夹中的外部 jar 添加到类路径中，它会正确解析所有内容并且构建正常。

有谁知道是什么原因造成的？我已经尝试过新的目标平台定义、新的工作区、新的 Eclipse 版本等......我不认为这是 jar 的问题，因为它适用于我团队中的其他人。

Eclipse 信息：版本：3.7.2 构建 ID：M20120208-0800

还有什么我应该尝试的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T00:27:26.493

移动到 linux 环境，使用 Eclipse 3.8.1 问题消失了。

# jquery - jQuery隐藏和显示折叠多个div

> ID：12070983
> 
> 赞同：0
> 
> 时间：2012-08-22T10:17:58.997
> 
> 标签：jquery, toggle, show-hide, collapse

我需要能够在页面上隐藏和显示 div。

默认情况下我需要一个活动的，然后当我单击其他链接以显示另一个 div 时，我需要隐藏活动的 div，依此类推。所以在一个给定的时间只有一个 div 是打开的。

我已经把一个演示放在一起来展示我需要什么，可以说我已经让它工作了，但是一旦点击另一个链接，我需要它来折叠/隐藏活动的 div。

[http://jsfiddle.net/QFfzs/3/](http://jsfiddle.net/QFfzs/3/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T10:27:25.383

您需要向要隐藏的 div 添加一个类，然后在像这样切换之前隐藏所有 div：

```
//adding '.hideMe' to the divs to be toggled
$(document).ready(function() {
    $('#hideDetailsDiv').hide();
    $('a#hideDetailsButton').click(function() {
        if (!$('#hideDetailsDiv').is(':visible')) {
            $('.hideMe').hide(400);
        }
        $('#hideDetailsDiv').toggle(400);
    });
}); 
```

JSFiddle：http: [//jsfiddle.net/QFfzs/4/](http://jsfiddle.net/QFfzs/4/)

更新了 JSFiddle： http: [//jsfiddle.net/QFfzs/5/](http://jsfiddle.net/QFfzs/5/)（用更少的代码完成）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:28:10.067

尝试这样的事情：

```
$('.primaryButton2').click(function(){
   $('.hideDetailsDiv').hide();//hide all divs, add to them class .hideDetailsDiv
   $(this).nextAll('.hideDetailsDiv:first').show(400);
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T11:32:44.967

在这里，我已经为上述问题完成了完整的 bin。您可以查看演示链接....

**演示：** [http ://codebins.com/bin/4ldqp84](http://codebins.com/bin/4ldqp84)

**HTML**

```
<div id="panel">
  <a href="#">
    Show Default
  </a>
  <div class="box">
    <p>
      Default Div Box is already Active..!
    </p>
  </div>
  <a href="#">
    Show Box1
  </a>
  <div class="box">
    <p>
      Showing Div Box 1..!
    </p>
  </div>

  <a href="#">
    Show Box2
  </a>
  <div class="box">
    <p>
      Showing Div Box 2..!
    </p>
  </div>
  <a href="#">
    Show Box3
  </a>
  <div class="box">
    <p>
      Showing Div Box 3..!
    </p>
  </div>
  <a href="#">
    Show Box4
  </a>
  <div class="box">
    <p>
      Showing Div Box 4..!
    </p>
  </div>
</div> 
```

**CSS**

```
.box{
  border:1px solid #334478;
  width:400px;
  height:50px;
  background:#f7a8a5;
  margin-top:3px;
  /* Default All Divs Are Hidden*/
  display:none;
}
#panel a{
  display:block;
  font-size:13px;
}
.box p{
  text-align:center;
} 
```

**jQuery**

```
$(function() {
    //Show Default First div is Active
    $("#panel .box:first").show();
    $("#panel a").click(function() {
        $("#panel .box").hide(400);
        $(this).next(".box").show("slow");
    });
}); 
```

**演示：** [http ://codebins.com/bin/4ldqp84](http://codebins.com/bin/4ldqp84)

# xml - 使用 XMLNode 填充从 XSD 生成的类

> ID：12070984
> 
> 赞同：0
> 
> 时间：2012-08-22T10:17:59.840
> 
> 标签：xml, c#-4.0, xsd, xmlnode, linq-to-xsd

我使用 XSD2Code 创建了一组 C# 类，这些类表示我当前从 Web 服务调用中检索的 XML 文档。

Web 服务调用的返回对象是 XMLNode 类型。

我想从生成的类创建一个对象，然后从 XMLNode 填充它。

似乎已生成的最外面的类是 NewDataSet。

我对如何创建/填充该对象有点困惑。我需要使用反序列化吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:43:38.263

我最终解决这个问题的方法如下。

我使用项目 Linq to XSD 项目： http: [//linqtoxsd.codeplex.com/](http://linqtoxsd.codeplex.com/)

使用 XSD 我从命令提示符创建了一组新的 C# 类

```
C:\Linq2XSD\linqtoxsd.2.0.2.56002-bin>LinqToXsd.exe vehicle.xsd
[Microsoft (R) .NET Framework, Version v4.0.30319]
Generated vehicle.cs... 
```

然后我将此 C# 文件导入到我的代码中。

我必须添加对 Xml.Scheme.Linq 库的引用，然后我可以创建一组填充的对象：

```
VehiclesData vehicleData = VehiclesData.Parse(vehiclesXMLNode.OuterXml); 
```

并使用 Linq 访问类型化的 XML，如下所示：

```
string vehicleColour = vehicleData.DataArea.Vehicles.Vehicle.ColourCurrent; 
```

等等！

# jquery - 处理 403 错误 - 带有 jQ uery.getScript 的 Google 地图

> ID：12070985
> 
> 赞同：0
> 
> 时间：2012-08-22T10:18:00.883
> 
> 标签：jquery, google-maps, http-status-code-403

我正在使用 jQuery.getScript 使用 API 密钥动态加载谷歌地图。

```
jQuery.getScript("http://maps.googleapis.com/maps/api/js?sensor=false&key=APPKEY&callback=initMap", function(data, textStatus, jqxhr) {
   console.log(textStatus); //success
   console.log('Load was performed.');   
   console.log(jqxhr.status); //200
});

function initMap(){
var mapOptions = {          
center: new google.maps.LatLng(25.245178, 55.359438),           
zoom : 15,
mapTypeId : google.maps.MapTypeId.ROADMAP,
mapTypeControl : false   
};        
var map = new google.maps.Map(document.getElementById("map_canvas"),             mapOptions);      

} 
```

地图现在加载并正常工作，并将“200”记录为`jqxhr.status`

使用`getScript`API，我是否能够处理 403 错误，以防它被抛出**OVER_QUERY_LIMIT**？

我会得到`jqxhr.status=403`还是应该使用`fail(callback)`方法？

我正在使用 Jquery v1.7.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:12:13.273

看看[文档](http://api.jquery.com/jQuery.getScript/)：

```
$.getScript("ajax/test.js")
.done(function(script, textStatus) {
  console.log( textStatus );
})
.fail(function(jqxhr, settings, exception) {
  $( "div.log" ).text( "Triggered ajaxError handler." );
}); 
```

# python - 使用 py2exe 创建的程序在没有 python 的 Windows XP 上不起作用

> ID：12070990
> 
> 赞同：0
> 
> 时间：2012-08-22T10:18:15.597
> 
> 标签：python, windows-xp, py2exe

我需要在许多装有 Windows XP 和 7 的不同计算机上使用我的 Python 程序，而无需下载 Python 解释器。所以我用 py2exe 创建 *.exe。但是当我在没有安装 python 的情况下在 XP 上启动它时，我收到一条错误消息：«文件已损坏»。有没有办法在没有 python 的情况下在 XP 上启动它？

这是我的 setup.py：

```
from distutils.core import setup
import py2exe

setup(
   windows=[{"script":"linksender.py"}], 
   options={"py2exe": {"includes":[]}}
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:29:12.203

1.检查你的distutils.core。它是否存在。你是从互联网上复制setup.py吗？如果是，也复制distutils.core。2.试试这个（脚本名称=myscript.py）：

```
# setup.py
from distutils.core import setup
import py2exe

setup(console=["myscript.py"]) 
```

3.你的 distutils 应该是这样的：

```
#!/usr/bin/env python

from distutils.core import setup

setup(name='Distutils',
      version='1.0',
      description='Python Distribution Utilities',
      author='Greg Ward',
      author_email='gward@python.net',
      url='http://www.python.org/sigs/distutils-sig/',
      packages=['distutils', 'distutils.command'],
     ) 
```

**注意：我不是专家，我以前用过一次，它对我有用。**

# android - 在渲染之前测量视图并获得剩余空间（Android）

> ID：12070993
> 
> 赞同：5
> 
> 时间：2012-08-22T10:18:41.840
> 
> 标签：android, webview, android-linearlayout, measure

我一直在尝试解决这个问题，但我找不到解决方案：如果占用的空间不超过屏幕，我需要知道其中包含一些 HTML 文本的 webview 将在 LinearLayout 中占用多少高度大小我必须添加另一个带有其他 HTML 文本的 webview。我不知道该怎么做，我试图调用 measure() 但它会给我 0 我尝试使用的任何 measurespec。有人知道怎么做吗？提前致谢。

# java - 在java中读/写图像

> ID：12070996
> 
> 赞同：0
> 
> 时间：2012-08-22T10:18:46.473
> 
> 标签：java, string, image

我想用java来读/写图像，我有一些代码。但我不知道如何使用这些代码，尤其是在参数*字符串中......*

实际上在这些代码附带的示例演示中，用法是这样的：

```
double[] data = Image.load("src/chap08_romsrams/common/lena256.ppm", "../common/lena256.ppm"); 
```

和这个：

```
Image.write(l, "P3", 256, "src/chap08_romsrams/ex1_roms/lena_processed.ppm", "lena_processed.ppm"); 
```

假设我有一个名为 lena.ppm 的 256*256 图像，它与 java 文件位于同一文件夹中，我如何使用这些函数来读取/写入图像...？

非常感谢 ！

```
import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.io.PrintStream;
import java.util.List;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class Image {
public static double[] load(String... fn) {
    InputStream in = null;

    for (String string : fn) {
        try {
            in = new FileInputStream(string);
        } catch (IOException e) {
            /* Empty */
        }
        if (in != null) break;
    }

    if (in == null) {
        throw new RuntimeException("Failed to load input image in Image.load(String...), tried to load image from " + fn);
    }

    BufferedReader reader = new BufferedReader( new InputStreamReader(in) );

    try {
        String type = reader.readLine(); // Type
        reader.readLine(); // Comment
        String res = reader.readLine(); // Dimensions
        reader.readLine(); // Intensity range

        Pattern p = Pattern.compile("(\\d+) (\\d+)");
        Matcher m = p.matcher(res);
        m.matches();
        Integer width = Integer.parseInt(m.group(1));
        Integer height = Integer.parseInt(m.group(2));

        System.err.println(width + "x" + height);

        double[] data = new double[width * height * ((type.equals("P3")) ? 3 : 1)];
        String line;
        int i = 0;
        while((line = reader.readLine()) != null)
            data[i++] = Integer.parseInt(line);

        reader.close();

        return data;

    } catch(IOException e) {
        throw new RuntimeException(e);
    }
}

public static void write(List<Double> data, String... fn) {
    write(data, "P2", 1024, fn);
}

public static void write(List<Double> data, String type, int width, String... fn) {
    OutputStream out = null;

    for (String string : fn) {
        try {
            out = new FileOutputStream(string);
        } catch (IOException e) {
            /* Empty */
        }
        if (out != null) break;
    }

    if (out == null) {
        throw new RuntimeException("Failed to file for output in Image.write(List<Double>, String, int, String...), tried to open " + fn);
    }

    PrintStream ps = new PrintStream(out);

    ps.println(type);
    int height = data.size() / (width * ((type.equals("P3") ? 3 : 1))); //1024;
    ps.println("#generated");
    ps.println("" + width + " " + height);
    ps.println("255");
    for(Double d : data)
        ps.println((int)(d.doubleValue()));
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:28:24.030

为什么不试试[Java Imaging API](http://java.sun.com/products/java-media/2D/index.jsp)。这是如何执行 Image IO的[示例。](http://docs.oracle.com/javase/6/docs/technotes/guides/imageio/spec/apps.fm1.html)希望这可以帮助..