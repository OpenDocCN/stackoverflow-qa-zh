# StackOverflow 问答 10116000-10116999

# php - PHP 如果不在数字 1-6 之间

> ID：10116000
> 
> 赞同：2
> 
> 时间：2012-04-12T00:51:17.807
> 
> 标签：php

我想知道检查数字是否不在 1-6 之间的最佳方法，而不必为每个数字编写一行代码。

因此，如果数字不在 1-6 之间，则回显“错误数字”

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-12T00:52:06.133

```
if ($number < 1 || $number > 6) {
    echo "wrong number";
} 
```

要回答您评论中的问题，您可以通过以下方式检查以确保它不是一封信。

```
if (!is_numeric($number) || ($number < 1 || $number > 6)) {
    echo "wrong number";
} 
```

# php - 从 PHP 数组中选择 MYSQL 数据

> ID：10116001
> 
> 赞同：0
> 
> 时间：2012-04-12T00:51:19.870
> 
> 标签：php, mysql, arrays

我正在创建一个社交网络。我想让一个用户能够订阅人们。理论上，当用户单击订阅按钮时，PHP 会将该用户的 ID 添加到 MYSQL 列表中“订阅”列下的数组中。现在，我想要一个新闻提要风格的主页。我想知道，如果我通过 PHP 提取“订阅”数据，我怎么能只显示用户订阅的人的帖子（也在 MYSQL 表中）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T01:04:45.147

使用 UNION 组合来自不同表的所有帖子，然后使用“IN”子句根据当前用户 ID 获取您想要关注的所有用户 ID：

例子：

```
$userFavs = "SELECT userID FROM favs WHERE followerID = '#loggedinUserID#'"

mysql_query("SELECT 'wall' as type, body, date FROM wall WHERE userID IN ($userFavs) 
UNION
SELECT 'photo' as type, caption, date FROM photos WHERE userID IN ($userFavs) UNION... etc
ORDER BY date DESC"); 
```

如果您通过 mysql_fetch_array() 运行查询，它将返回如下内容：

```
Array => {
[0] => { type = "wall", body = "This is a wall update", date = "1234567890" },
[1] => { type = "photo", caption = "Us at the beach", date = "..." },
...
} 
```

每次调用“UNION”时，您需要确保每个 SELECT 语句中的列数相同，否则它将不起作用。您可以 /fake/ 列，就像我对上面的列所做的那样`type`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T01:02:56.813

我认为您正在寻找一种在数据库中[序列化](http://php.net/manual/en/function.serialize.php)数组的方法。[这](https://stackoverflow.com/questions/1978438/save-php-array-to-mysql)也可能有帮助！

# sql - oracle包麻烦

> ID：10116002
> 
> 赞同：1
> 
> 时间：2012-04-12T00:51:25.540
> 
> 标签：sql, oracle, oracle10g

我对 oracle 包非常陌生，想知道是否有人可以解释为什么这不会编译/执行。

```
CREATE OR REPLACE PACKAGE login_pkg IS
 FUNCTION login_ck_pf 
  (p_user IN VARCHAR2,
   p_pass IN VARCHAR2)
   RETURN CHAR;
END;
/
CREATE OR REPLACE PACKAGE BODY login_pkg IS
 FUNCTION login_ck_pf 
  (p_user IN VARCHAR2,
   p_pass IN VARCHAR2)
   RETURN CHAR
  IS
   lv_ck_txt CHAR(1) := 'N';
   lv_id_num NUMBER(5);
 BEGIN
   SELECT idShopper
    INTO lv_id_num
    FROM bb_shopper
    WHERE username = p_user
     AND password = p_pass;
   IF SQL%FOUND THEN
     lv_ck_txt := 'Y';
     lv_id_num := lv_id_num;
   END IF;
   RETURN lv_ck_txt;
 EXCEPTION
  WHEN NO_DATA_FOUND THEN
   DBMS_OUTPUT.PUT_LINE('Invalid Login');
   lv_ck_txt := 'N';
   return lv_ck_txt;
 END;
END;
/
show errors;

execute login_pkg.login_ck_pf('gma1', 'goofy'); 
```

到目前为止，感谢您的帮助，我现在正在编译它，我只需要弄清楚如何调用它。如果找到该行，我想返回 Y，如果没有找到，我想返回 N。

```
PACKAGE login_pkg compiled
PACKAGE BODY login_pkg compiled
No Errors.

Error starting at line 35 in command:
execute login_pkg.login_ck_pf('gma1', 'goofy')
Error report:
ORA-06550: line 1, column 7:
PLS-00221: 'LOGIN_CK_PF' is not a procedure or is undefined
ORA-06550: line 1, column 7:
PL/SQL: Statement ignored
06550\. 00000 -  "line %s, column %s:\n%s"
*Cause:    Usually a PL/SQL compilation error.
*Action: 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T03:50:27.643

由于 login_ck_pf 是一个函数而不是一个过程，因此您需要提供一个变量来分配返回值：

```
DECLARE
    v_ret CHAR(1);
BEGIN
    v_ret := login_pkg.login_ck_pf('gma1','goofy');
    DBMS_OUTPUT.PUT_LINE(v_ret);
END;
/ 
```

或者，您可以这样做：

```
SELECT login_pkg.login_ck_pf('gma1','goofy') FROM dual; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T00:57:16.147

您需要先创建包规范，然后才能编译您的主体（实现）：

```
CREATE OR REPLACE PACKAGE login_pkg IS

 FUNCTION login_ck_pf 
  (p_user IN VARCHAR2,
   p_pass IN VARCHAR2)
   RETURN CHAR;

END;
/ 
```

包规范是您定义要公开以供使用的过程、函数、常量、类型等的签名（接口、api）的地方。包体具有这些定义的实现。规范可以没有主体而存在，但主体不能没有规范而存在。规范中定义的所有内容都必须在正文中实现。您可以在主体中定义额外的过程而不将它们放入规范中，然后这些作为“私有”过程在主体内使用而不可供外部使用。

我想当我们这样做的时候，身体里还有其他一些东西。我没有看到 lv_id_num 或 pv_id_num 在任何地方使用。如果没有找到一行，那么带有“if sql%found”的代码块会被命中还是直接进入异常处理程序？如果调用异常处理程序，您是否想返回一个值“N”？我知道你现在只是在胡闹，所以只是一些想法。

# c# - Windows 8 存储文件

> ID：10116007
> 
> 赞同：0
> 
> 时间：2012-04-12T00:52:31.390
> 
> 标签：c#, file, windows-8

我有以下代码

```
StorageFile sf = await Windows.ApplicationModel.Package.Current.InstalledLocation.GetFileAsync("/data/elements.xml"); 
```

我正在尝试从我的项目中的数据文件夹加载 elements.xml 文件。我收到以下错误：

""值不在预期范围内。""

我尝试反转斜杠并在字符串前添加@。没运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:06:33.517

如果`elements.xml`位于 Data 文件夹中，并且包含下面代码片段的类文件位于不同的文件夹中，例如 DataModel，则使用所示的字符串应该适合您。

```
var file = await Windows.ApplicationModel.Package.Current.InstalledLocation.GetFileAsync("Data\\\elements.xml"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T04:45:53.963

抱歉，如果您想使用路径，请改用反斜杠。

# animation - 在悬停时使用 CSS 为 div 设置动画

> ID：10116009
> 
> 赞同：1
> 
> 时间：2012-04-12T00:52:45.863
> 
> 标签：animation, css, keyframe

我正在尝试使用 CSS3 的 @keyframes 规则在悬停时为 div 设置动画。[动画的代码在这个页面](http://www.theapplenewsreel.com/style.css)的最底部（就在慷慨标记的“HERE BE ANIMATION”评论ASCII艺术之后）。这包括@keyframes 规则、div 和 div:hover。我想要这个动画的页面[就在这里](http://www.theapplenewsreel.com/MacHQ)。由于某种原因，动画不起作用；这是我第一次尝试使用 CSS 动画，所以在某处可能存在一些新手错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T01:19:58.900

如果您尝试将 div 从 0px 设置为 200px，则使用 jQuery 解决方案要容易得多。与 @keyframe 相比，jQuery 提供了跨浏览器兼容性，后者仅在 Safari 和 Chrome 中受支持。

这是一个例子：http: [//jsfiddle.net/ZgcxL/](http://jsfiddle.net/ZgcxL/)

编辑：

如果您不希望您的用户仅限于 Chrome 和 Safari，那么您绝对应该考虑使用 jQuery。使用起来非常简单。只需在标签之间的某处添加此代码`<head></head>`。

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
  $(document).ready(function() {
    $('.macanimation').hover(function() {
        $(this).animate({top: '200px'});
    });
  });
</script> 
```

编辑2：

我忘记了 document.ready()。重新粘贴上面的代码。还要添加位置：绝对；到您的 div 并将“px”添加到您的宽度：

```
div.macanimation {
    position: absolute;
    width:960px;
    height:500px;
    padding-left:40px;
    padding-right:40px;
    margin:auto;
    background-image:url(/Photos/MacHQ.png);
} 
```

测试，工作。

# ruby-on-rails - autoload_paths 更改命名约定

> ID：10116011
> 
> 赞同：1
> 
> 时间：2012-04-12T00:52:56.380
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, gem

我对 Rails 用于加载其`config.autoload_paths`.

我正在构建一个使用一些宝石的应用程序。

这组 gem 应该由应用程序扩展，如果`User`在 gem 中定义了一个模型，那么如果应用程序想要扩展该模型，您将必须创建一个名为 的文件`"app/models/_user.rb"`，并且在该文件中您将写类似：

```
# Extending gems user model in the application level
class User < ActiveRecord::Base
  def new_method_that_make_sense_for_my_app
    #supercode here... bla bla
  end
end 
```

因此，鉴于这种情况，让我们假设这不会改变。所以，我必须将这种文件添加到`config.autoload_paths`数组中，这样我就可以更改我的代码并应用它们，而无需重新启动服务器（在开发环境中）。

这是问题所在：

如果我将以下代码添加到我的 application.rb：

```
config.autoload_paths += %W(#{config.root}/app/models/_user.rb) 
```

Rails 不会在每次请求时自动加载该文件，因为 autoload_paths 元素依赖于文件名等同于该文件中定义的**类****名的约定。**

 **所以，恢复：文件名中的下划线**把**`"_user.rb"`一切都搞砸了！

有没有办法配置 Rails，所以我可以告诉它也搜索以下划线开头并后跟类名的文件？

谢谢！**

# iphone - 将 NSDictionary 转换为 NSString

> ID：10116012
> 
> 赞同：60
> 
> 时间：2012-04-12T00:53:11.867
> 
> 标签：iphone, ios, nsstring, nsdictionary

我正在尝试将 NSDictionary 的内容放入 NSString 进行测试，但不知道如何实现这一点。是否可以？如果是这样，人们将如何做这样的事情？

我这样做的原因是，我是否需要在我的设备上没有运行调试器的情况下检查 NSDicitonary 的内容。因为我必须从 ios 的多任务栏中删除正在运行的应用程序，所以我可以查看我保存到字典中的值之后是否仍然可用。

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-04-12T00:56:30.417

您可以调用 [aDictionary description]，或者在任何需要格式字符串的地方调用，只需使用 %@ 来代替字典：

```
[NSString stringWithFormat:@"my dictionary is %@", aDictionary]; 
```

或者

```
NSLog(@"My dictionary is %@", aDictionary); 
```

* * *

## 回答 #2

> 赞同：81
> 
> 时间：2015-08-11T09:26:36.973

以上解决方案只会将字典转换为字符串，但您不能将该字符串转换回字典。为此，这是更好的方法。

**转换为字符串**

```
NSError * err;
NSData * jsonData = [NSJSONSerialization  dataWithJSONObject:yourDictionary options:0 error:&err];
NSString * myString = [[NSString alloc] initWithData:jsonData   encoding:NSUTF8StringEncoding];
NSLog(@"%@",myString); 
```

**转换回字典**

```
NSError * err;
NSData *data =[myString dataUsingEncoding:NSUTF8StringEncoding];
NSDictionary * response;
if(data!=nil){
 response = (NSDictionary *)[NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:&err];
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-04-12T00:57:13.003

您可以使用from`description`继承的方法，也可以编写自定义的方法来格式化您喜欢的格式。`NSDictionary``NSObject``NSDictionary`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-10T14:56:58.087

如果你喜欢使用`URLRequest httpBody`

```
extension Dictionary {

    func toString() -> String? {
        return (self.compactMap({ (key, value) -> String in
            return "\(key)=\(value)"
        }) as Array).joined(separator: "&")
    }

} 
```

// 打印：Fields=sdad&ServiceId=1222

# javascript - 如何按请求的顺序处理 jquery ajax 请求

> ID：10116014
> 
> 赞同：1
> 
> 时间：2012-04-12T00:53:49.783
> 
> 标签：javascript, jquery, ajax

我正在制作一个检查域名列表的 java servlet 页面，并通过 jquery ajax 请求检查每个名称。它工作正常，只是结果被无序地附加到 DOM 中。什么是按请求顺序处理请求的最佳方法，但也像长轮询效果一样异步。我是 javascript 新手。

这是我用于请求的代码：

```
$.ajax({
    async:true,
    type:'GET',
    url:servlet,
    success:function(data){
        $('p').append(data+"<br>");
    }, 
}); 
```

我正在考虑向 java servlet 发送一个序列号，它将通过 JSON 返回它，但我想知道是否有更简单的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T00:59:02.537

我要做的是提前为响应创建容器，然后在它周围绑定回调（实际上不像在 bind() 函数中那样绑定）。

例如，假设您有一个类似的容器`<div id="container"></div>`，您可以执行以下操作：

```
function makeRequest(something) {
    var target = $("<div></div>");
    $("#container").append(target);
    $.get("", {something: something}, function(data) {
        target.html(data);
    });
} 
```

就灵活性而言，这是一个相当糟糕的例子，但它应该说明这一点。它在发出请求之前向容器添加一个 div，然后使用该 div 将响应推送到其中。这意味着 div 将按照发出请求的顺序附加。您可以扩展此想法以使用样式使其看起来像 div 在填充之前不存在，或者您可以在其中包含“正在加载”消息。

（此外，参数的数据传递相当糟糕`something`，但希望你明白这一点。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T01:03:36.903

我猜你的问题是浏览器向服务器发送尽可能多的 AJAX 请求，服务器会尽可能地回答它们。服务器可能只是比其他服务器更快地回答一些问题，因此尽管请求是按顺序发送的，但您却使它们失序。

解决此问题的方法是让您的查询按顺序发送，以确保返回的答案是按顺序的。本质上，做一个 AJAX 调用，并且在该调用成功后，您然后启动第二个 AJAX 调用，等等......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T01:04:07.060

您可以对发送到服务器的请求进行排序，缓存结果，然后仅按顺序添加它们

```
next_to_request = 0;
next_to_append = 0;
results = [];
function reqToServer(){
  var e = next_to_request++;

  $.ajax({
    async:true,
    type:'GET',
    url:servlet,
    success:function(data){
        results[e] = data;
    }, 
  }); 
function loadAnswers(){
   if (results[next_to_request]){
     data = results[next_to_request];
     next_to_request++;
     $('p').append(data+"<br>");
   }
}

setTimeout(100, loadAnswers); 
```

这具有用于显示结果的不同线程，并且仅以正确的顺序显示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T01:30:43.277

将成功函数从 Ajax 函数本身中取出，并将成功函数链接起来，它们将按顺序触发，如果一个请求尚未完成，它将等待它完成，然后再触发下一个请求。

一个非常简单的方法就是这样做：

```
var firstOne = $.ajax({
    async:true,
    type:'GET',
    url:servlet
}); 

var SecondOne = $.ajax({
    async:true,
    type:'GET',
    url:servlet
}); 

firstOne.done(function(data){
    $('p').append(data+"<br>");
    SecondOne.done(function(data){
        $('p').append(data+"<br>");
    }); 
}); 
```

对于更高级的方法，学习[Promise](http://api.jquery.com/promise/)的工作原理是个好主意！

这比顺序发送 ajax 请求要快得多，在下一个开始之前等待最后一个完成，因为这将在浏览器可用时发送所有请求，并且链接 done() 函数将等待任何不可用的完成，然后按照您放入的顺序执行到达时立即完成的内容，然后内容将以正确的顺序附加。如果进行许多 ajax 调用，使用 Promise 和 $.when/$.then 将让您通过迭代等构建更合理的函数。

# streaming - 使用 VLC 将文件作为 RTSP 流式传输

> ID：10116023
> 
> 赞同：14
> 
> 时间：2012-04-12T00:54:41.450
> 
> 标签：streaming, vlc

我需要创建一个可以将 mp3 文件流式传输到另一台设备的服务器。我打算使用 VLC。我查看了 VLC 文档，对如何进行此操作感到困惑。我找到了这个链接，[http://www.videolan.org/doc/streaming-howto/en/ch07.html](http://www.videolan.org/doc/streaming-howto/en/ch07.html)，它告诉我们如何将文件流式传输到设备。但是，我想做的是创建一个服务器，它只是流式传输音频，并允许其他客户端连接到它并开始播放流式传输的内容。VLC如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T23:46:29.960

如果您可以只使用 RTP 流，请尝试[https://wiki.videolan.org/Documentation:Streaming_HowTo_New](https://wiki.videolan.org/Documentation:Streaming_HowTo_New)。这是绝对最简单的方法，我最近使用它。

如果您想设置一个成熟的按需 RTSP 服务器，请使用：http: [//juliensimon.blogspot.com/2008/12/howto-setting-up-vod-server-with-vlc.html](http://juliensimon.blogspot.com/2008/12/howto-setting-up-vod-server-with-vlc.html) 。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-05-24T21:23:11.570

Open Broadcaster 软件支持 RTSP [https://obsproject.com](https://obsproject.com)

# objective-c - 从打开了附件视图的 UITableView 中存储值的最有效方法

> ID：10116027
> 
> 赞同：0
> 
> 时间：2012-04-12T00:55:09.247
> 
> 标签：objective-c, ios, uitableview

我正在考虑使用 for 循环，但想知道是否有任何内置方法可以实现这一点。基本上在一个视图中，我有一个带有对象列表的表格视图，用户可以根据需要单击任意数量，“检查”它们。当他们转到下一个字符串时，我想用所选名称填充另一个表视图。

这是我的选择方法：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];

    if (cell.accessoryType == UITableViewCellAccessoryNone)
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    else
        cell.accessoryType = UITableViewCellAccessoryNone;

    [tableView deselectRowAtIndexPath:indexPath animated:NO];
} 
```

我正在考虑编写一个包含 for 循环的方法，该循环遍历从中提取表视图的数组中的每个值，并仅将具有正确附件类型的那些值添加到新数组中。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T01:15:21.413

使用 NSMutableIndexSet 支持您的选择会是更多 MVC。否则，如果用户选择了一个单元格，但随后将该单元格滚动出框架并出列，会发生什么情况？

在您的界面中声明一个属性：

```
@property (strong) NSMutableIndexSet* selected; 
```

在 viewDidLoad 或类似的地方实例化它然后在你的委托方法中修改它：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];

    if (![self.selected containsIndex:indexPath.row])
    {
        [self.selected addIndex:indexPath.row];
    }
    else
    {
        [self.selected removeIndex:indexPath.row];
    }

    [tableView deselectRowAtIndexPath:indexPath animated:NO];
} 
```

在您的 cellForRowAtIndexPath: 方法中，决定是否显示复选标记：

```
cell.accessoryType = [self.selected containsIndex:indexPath.row] ? UITableViewCellAccessoryCheckmark : UITableViewCellAccessoryNone; 
```

现在，当您想要选定的对象时，只需

```
return [self.myObjects objectsAtIndexes:self.selected]; 
```

注意：当我第一次发布此内容时，它确实未经测试。从那以后，我做了一些改变。例如，您只想在 cellForRowAtIndexPath: 方法中设置附件类型

# java - 抽象方法的标准可见性

> ID：10116029
> 
> 赞同：7
> 
> 时间：2012-04-12T00:55:28.570
> 
> 标签：java

这似乎是一个愚蠢的问题，但我想知道创建抽象方法时的“最佳实践”。他们的可见性应该是公开的还是受保护的？

即使实现抽象方法的子类将是公共的，是否仍然建议保护抽象方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-12T01:05:17.643

取决于您的用例。如果抽象方法只实现了一些更强大的功能，而这些功能可从抽象类中的公共方法获得，那么它可能应该受到保护。如果它是可以/应该从另一个类调用的独立方法，请将其公开。

例子：

```
public abstract class Foo implements Closeable {
    public final void close() {
        // do whatever
        doClose();
    }

    protected abstract void doClose();
}

public abstract class Bar {
    public void read(byte[] b) {
        for(int x = 0; x < b.length; x++) {
            b[x] = read();
        }
    }

    public abstract int read();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T01:19:35.157

以下是公共、受保护和私有的区别：

![修饰符](../Images/d6072a1e98681556feab2c44015e57b9.png)

**对于方法，如果设置为public，则可以访问项目中所有包中的所有类，如果设置为protected，则只能访问同一包或扩展抽象类的子类中的所有类。**

对于问题没有。2：是的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T01:04:45.180

我想这取决于方法的作用。如果它是代表类（和子类）行为的东西，它应该是公共的。如果子类实现的方法是内部的并且被基类的其他方法使用（例如定义算法策略），它应该受到保护。

# cluster-analysis - 有人用过denclue算法吗？

> ID：10116030
> 
> 赞同：2
> 
> 时间：2012-04-12T00:55:45.513
> 
> 标签：cluster-analysis

我已经从[http://homepages.dcc.ufmg.br/~hawks/faculdade/data_mining/denclue_doxygen_19122006/main.html](http://homepages.dcc.ufmg.br/~hawks/faculdade/data_mining/denclue_doxygen_19122006/main.html)下载了源代码，但它对我不起作用，我的聚类数据集的形式是这样的
54621,43523
52694,42750
53253,43024
54925,42624
54973,43980
52967,42955

但是当我运行推荐时`./denclue -d 2 -s 10 -x 0.1 -i a1_part.txt -o output_file`。它给出了分段错误。当我更改`-d 2`为`-d 20`或更高时，它可以工作，但这是错误的。哈

# c - 堆内存和 Slab 分配

> ID：10116033
> 
> 赞同：8
> 
> 时间：2012-04-12T00:55:52.067
> 
> 标签：c, linux, memory-management, malloc, heap-memory

我对`heap`and感到困惑`free list`。我有几个问题，我对 malloc 在 C 中的工作方式有自己的理解。如果我错了，请纠正我。

*   堆内存是否组织为数据块的链表（空闲列表）？
*   堆内存和空闲列表有区别吗？

我对存储分配的理解（有待改进）：- 当我们调用 malloc 时，它会在堆中分配内存，它是通过从中选择合适大小的数据块来实现的`free list`，对吧？

当 malloc 返回某个内存块时，它会从空闲列表中删除，并且该内存块的物理地址会在页表中更新。

当内存被释放`free()`时，数据块被插入到空闲列表中，并且可能为了减少碎片，与相邻块结合，并且`present`页表条目中的位被清除。

所以整个堆是一个空闲列表（空闲块的链表）+分配的数据块。

这是存储分配的全面情况吗？

编辑：来自 Linux Kernel Development (Robert Love) Chapter on memory Management , **Slab allocation**

> “一个空闲列表包含一个可用的、已分配的数据结构块。当代码需要一个数据结构的新实例时，它可以从空闲列表中抓取其中一个结构，而不是分配足够的内存并设置它用于数据结构。后来，当不再需要数据结构时，将其返回到空闲列表而不是释放。从这个意义上说，空闲列表充当对象缓存，缓存经常使用的对象类型。

空闲列表被称为“可用的、已分配的数据结构块”。

*   当它在空闲列表中时，它是如何***分配的？***
*   以及如何将一块内存返回到空闲列表_***不***_与释放该块相同？
*   **平板分配与存储分配有何不同**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T01:40:25.990

`malloc()`与页表无关；它分配虚拟地址，内核负责跟踪页面实际存储在物理 RAM 或磁盘中的位置。

`malloc()`通过`brk()`系统调用与内核交互，系统调用要求内核为进程分配更多页面，或者将页面释放回内核。所以实际上有两个级别的内存分配：

*   内核将页面分配给一个进程，使这些页面不能被其他进程使用。从内核的角度来看，页面可以位于任何地方，并且它们的位置由页表跟踪，但从进程的角度来看，它是一个连续的虚拟地址空间。操作的“程序中断”`brk()`是内核允许您访问的地址（因为它们对应于分配的页面）与如果您尝试访问它们将导致分段错误的地址之间的边界。
*   `malloc()`分配程序数据段的可变大小部分以供程序使用。当数据段的当前大小内没有足够的可用空间时，它`brk()`会从内核中获取更多的页面，从而使数据段更大。当它发现数据段末尾的一些空间未使用时，它会使用`brk()`将未使用的页面还给内核，使数据段更小。

请注意，即使在该进程中运行的程序实际上并未将页面用于任何事情，页面也可以（由内核）分配给进程。如果您`free()`的内存块位于数据段的中间，`free()`则无法使用的实现`brk()`来缩小数据段，因为在更高地址处还有其他分配的块。因此，从内核的角度来看，这些页面仍然分配给您的程序，即使从角度来看它们是“可用空间” `malloc()`。

您对空闲列表如何工作的描述对我来说听起来很正确，尽管我不是如何实现内存分配器的专家。但是您从 Robert Love 发表的引述听起来像是在谈论 Linux 内核中的内存分配，这与`malloc()`用户空间进程中的内存分配无关。这种免费列表的工作方式可能不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T02:25:49.130

您要做的第一件事是区分内核分配和程序分配。就像@Wyzard 所说，malloc 使用 brk (sbrk 有时是 mmap) 从内核获取更多页面。我对 malloc 的理解非常好，但它跟踪你可能称之为竞技场的东西。它调解对内存的访问，并根据需要进行适当的系统调用来分配内存。

空闲列表是管理内存的一种方式。每次需要从内核获得更多内存时调用 mmap 或 brk 是缓慢且低效的。这两者都需要上下文切换到内核模式，并将分配数据结构来跟踪哪个进程拥有内存。用户级别的空闲列表是一种优化，不会不断地向内核请求和返回内存。用户程序的目标是完成它的工作，而不是等待内核完成它的工作。

现在回答您的其他问题：

*   当它在空闲列表中时，它是如何分配的？

考虑空闲列表的另一种方式是缓存。程序会发出请求，内核会尝试按需而不是一次性完成。然而，当一个程序用完一块内存时，快速的方法不是把它返回给内核，而是把它放在一个安全的地方以便再次分配。特别是，空闲列表可以跟踪分配器可以从中提取的内存区域，但这样做的方式（具有内存保护）用户代码不能只是选择它并开始覆盖所有区域.

*   将一块内存返回到空闲列表*与*释放该块有何不同？

如果我们假设真正释放一个块需要将其返回给内核并让它更新其内部页表，那么区别实际上在于控制底层物理页（或帧）的是什么。实际上，释放内存并将其返回给内核意味着现在内核可以从这些页面中提取，而将其返回到用户级别的空闲列表意味着程序的某些部分仍然控制着该内存。

*   平板分配与存储分配有何不同？

这开始得到一些不同的领域（我不是很熟悉）。平板分配器是内核管理内存分配的一种方式。从我所见，slab 尝试将分配分组为不同的大小，并有一个页面池来满足这些请求。我相信常见的 x86 架构将允许分配从 16 字节到 4 MB 的 2 次幂的连续物理内存（尽管我在 64 位机器上）。我相信在这个级别有一些自由列表的概念，以及有效升级或降级分配大小以适应不同系统需求的方法。

另一方面，存储分配听起来像是确保硬盘上有空间。我实际上没有听说过这个词，所以我只能推测。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-04T07:34:17.743

在这里，您指的是两个不同的分配器，

1.  Buddy系统分配器，用于将页面分配给Zone，使用free_list来存储空闲页面，分配它们，在释放之后，如果可能的话，将它们组合回一个更大的更高阶的连续页面大小。
2.  Slab 分配器，适用于已分配的数据结构，如 keme_cache、kmalloc 调用。

请参阅[C 编程中的堆内存以](https://stackoverflow.com/questions/10200628/heap-memory-in-c-programming/10200727#10200727)获取堆。

对于用户空间中的 ac 程序，我们在 malloc 发生的 call_stack 中有堆内存。这由 _break 标记，当需要更多内存时由 sbrk() 推进。

在 Linux 内核中，每个进程都有 task_struct，它有自己的堆栈和指向它使用的页面列表的指针。

# c# - 在 SQL Server 中使用 TOP (1) 获取列中字符串的最多出现次数

> ID：10116036
> 
> 赞同：0
> 
> 时间：2012-04-12T00:56:11.613
> 
> 标签：c#, sql-server

我有两列：

```
INDEX     NAME
 125      john
 125      dave
 125      dave
 130      john
 131      dave 
```

我只想返回出现次数最多的名称。然后我想把字符串放入一个变量中。我可以使用什么查询来实现这一点？

这是使用 SQL Server 2008 和 C#

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T01:04:29.450

LinqToSql：

```
string mostFrequentName = myDataContext.Records
  .GroupBy(x => x.Name)
  .OrderByDescending(g => g.Count())
  //.ThenBy(g => g.Key)  in case of ties, use this for consistent results
  .Select(g => g.Key)
  .FirstOrDefault(); 
```

* * *

数据：

```
SELECT top 1 Name
FROM Records
GROUP BY Name
ORDER BY Count(*) desc --, Name   --in case of ties 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T01:08:07.130

试试这个，它可能会给你你想要的东西。

```
SELECT TOP 1 name 
  FROM names_table 
 GROUP BY name
 ORDER BY COUNT(1) DESC; 
```

这与您最初尝试的类似。只需将 count() 移动到 order by，而不是选择列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T01:01:05.690

如果您使用的是 LINQ，则可以按如下方式进行：

```
var topName = MyDataContext.MyTable
  .OrderByDescending( x => x.Index )
  .Take( 1 )
  .Select( x => x.Name ); 
```

# c++ - 使用 getline 解析用户输入的最佳方法？

> ID：10116041
> 
> 赞同：0
> 
> 时间：2012-04-12T00:56:30.997
> 
> 标签：c++

因此，我需要一些帮助来了解从用户那里获取输入并将其存储在 2 种不同数据类型中的最佳方式。我想要做的是输入示例：

```
remove 44 
```

我想取第一部分“删除”并将其保存为字符串以了解我需要调用哪个函数，但随后我想取 44 并将其保存为 int 作为所述函数的输入。到目前为止我所拥有的是

```
string In;
getline (cin, In); 
```

现在我应该更改 getline 以分隔空间以获取两个字符串，如果是这样，我将如何去做，或者我应该只获取整个输入并从中创建 2 个子字符串？

我知道这是一个非常简单的问题，但我没有太多使用 C++ 处理用户输入的经验。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T01:12:11.633

您可以通过执行重载 operator>> 来执行此操作

```
struct SomeStruct
{
    string id;
    int data;
};

istream & operator>>(istream& is, SomeStruct& someData)
{
    is >> (string&)someData.id;
    is >> someData.data;

    return is;
} 
```

然后稍后

```
SomeStruct test;
cin >> test; 
```

要了解有关 operator>> 的更多信息，请查看[istream::operator>>](http://www.cplusplus.com/reference/iostream/istream/operator%3E%3E/)。

要了解有关运算符重载的更多信息，请查看[C++ 运算符重载指南](http://courses.cms.caltech.edu/cs11/material/cpp/donnie/cpp-ops.html)。

# c# - 如何让 YUI 编辑器传递其内容

> ID：10116043
> 
> 赞同：1
> 
> 时间：2012-04-12T00:57:15.077
> 
> 标签：c#, javascript, asp.net, asp.net-mvc, yui

我试图在一个 asp mvc 站点上使用 YUI 富文本编辑器我正在使用这个 javascript 代码

```
var myEditor = new YAHOO.widget.Editor('Body', {
    height: '300px',
    width: '522px',
    dompath: true, //Turns on the bar at the bottom
    animate: true //Animates the opening, closing and moving of Editor windows
});
myEditor.render(); 
```

``

在这个文本区域

```
<div class="yui-skin-sam">
            @Html.TextAreaFor(model => model.Body, new { cols = "50", rows = 10 })
            @Html.ValidationMessageFor(model => model.Body)
        </div> 
```

编辑器加载，但是当我提交表单时它的内容没有被传递，我不断收到一条验证消息，说如果没有任何内容，我应该需要该字段。

有谁知道我怎样才能让它按我想要的方式工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T01:47:27.363

如果其他人最终遇到此问题，这是解决方案。

您可以尝试像这样设置 handleSubmit:true

```
var myEditor = new YAHOO.widget.Editor('Body', {
height: '300px',
width: '522px',
dompath: true, //Turns on the bar at the bottom
animate: true, //Animates the opening, closing and moving of Editor windows
handleSubmit: true 
```

}); myEditor.render();

编辑器将尝试附加自己并自动调用 myEditor.saveHTML() 将内容塞回文本区域。如果这对我来说失败了，请通过设置如下事件手动完成。

```
 YAHOO.util.Event.on('somebutton', 'click', function() {

myEditor.saveHTML();
alert("test");
}); 
```

其中 somebutton 是表单的提交按钮的名称。

当你得到这个工作时，你将遇到的第二个问题是 asp.net 在你的模型中找到 html 标签时会出错。这是一个不同的问题，所以我不会在这里描述解决方案。

# php - xml 到 php 无法正确解析信息

> ID：10116047
> 
> 赞同：1
> 
> 时间：2012-04-12T00:57:42.910
> 
> 标签：php, xml

我正在使用 iTunes API。

我需要抓取图像以解析到我们的 php.ini 文件中。

行。

1.  这是来自 iTunes XML

    ```
     <image height="55">http://a5.mzstatic.com/us/r1000/078/Music/3c/40/58/mzi.ryeiepvk.55x55-70.jpg</image>

                <image height="60">http://a4.mzstatic.com/us/r1000/078/Music/3c/40/58/mzi.ryeiepvk.60x60-50.jpg</image>

                <image height="170">http://a3.mzstatic.com/us/r1000/078/Music/3c/40/58/mzi.ryeiepvk.170x170-75.jpg</image> 
    ```

现在我的 PHP 中有这个。

```
$image=$songinfo->image;
                        echo "<li>
                                <img class='minivideo-img' src=",$image,"> 
```

这很好用，但它不会拉入我希望它默认为最小的图像。

我需要抓取 xml 中的图像，例如：

```
<image height="170"> 
```

当我检查我的 html 时，我看到了这个：

```
<img class="minivideo-img" src="http://a5.mzstatic.com/us/r1000/078/Music/3c/40/58/mzi.ryeiepvk.55x55-70.jpg"> 
```

我需要得到这个：

```
<img class="minivideo-img" src="http://a3.mzstatic.com/us/r1000/078/Music/3c/40/58/mzi.ryeiepvk.170x170-75.jpg"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T01:07:03.630

您的示例代码需要从 XML 中的图像节点检索属性（在本例中为`$mysongs`）。由于`$songinfo->image`似乎是图像 URL，因此`height`属性应该是`$songinfo->image['height']`

[简单的 XML](http://au.php.net/manual/en/book.simplexml.php)

**更新：**现在您已经更新了问题，您似乎有*多个* `image`节点。您需要像这样遍历它们：

```
for( $i = 0; $i < count($songinfo->image); $i ) {
    if( $songinfo->image[$i]['height'] >= 170 ) {
         $image = $songinfo->image[$i];
         break;
    }
}
echo '<img src=\''.$image.'\' />'; 
```

（也更新为使用更简单的属性表示法。）

你知道，thinkvitamin.com 的链接已经包含了你需要知道的一切。

# c++ - 遍历 C 中数组中不存在的变量

> ID：10116048
> 
> 赞同：0
> 
> 时间：2012-04-12T00:57:43.533
> 
> 标签：c++, c, macros, iteration

我有一个变量列表（**不**存在于数组中），其值必须通过**迭代**打印。这些变量具有相同的名称，除了末尾附带的数字

说以下是变量名；

```
int mem_size0;
int mem_size1;
int mem_size2;
...
...
int mem_sizen; 
```

此类变量的总数由另一个变量给出`mem_size_entries`。这些变量是由不同的工具为我生成的，我必须通过某种迭代打印这些变量的值。**使用一些宏**可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T01:32:43.933

使用 vim。

例如，您想对所有变量重复下一行：

```
something mem_sizen0 something; 
```

只需移过该行的开头并按：

```
qa (start recording macro)
yy (copy line)
p (paste line in new line)
wwwhh (move to the 0)
ctrl+a (increase 0 by 1)
q (finish repeating macro)
30@a (repeat this 30 times, if this is the amount you need) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T01:35:30.753

If these variables are all declared in order, it seems likely (though not guaranteed) that they would occupy sequential locations in memory. This may not work on all (or any!) compilers, but it's worth a try at least:

```
int mem_size0;
int mem_size1;
int mem_size2;
...
...
int mem_sizen;

const int *const start = &mem_size0;
const int *const end   = &mem_size0 + (mem_size_entries);

for (const int *p = start; p < end; p++)
{
    /* Do stuff with p... */
    printf("%i\n", *p);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T02:17:48.873

也许您可以编辑生成的代码，以便：

```
int mem_size0;
int mem_size1;
int mem_size2;
...
...
int mem_sizen; 
```

变成：

```
union {
struct {
int mem_size0;
int mem_size1;
int mem_size2;
...
...
int mem_sizen;
} s;
int mem_array[mem_size_entries];
} u; 
```

现在您可以遍历`u.mem_array`.

这可以通过 shell 脚本（或`perl`脚本）相当简单地完成；棘手的部分是识别您何时到达`mem_sizen`或之后的线路。这似乎对我有用：

```
#!/usr/bin/env perl
use strict;
use warnings;

my($seen, $done) = (0, 0);
while (<>)
{
    if (/mem_size0/)
    {
        print "struct { union {\n";
        $seen = 1;
    }
    if ($seen && !$done && !/mem_size/)
    {
        print "} s; int mem_array[mem_size_entries]; } u;\n";
        $done = 1;
    }
    print $_;
} 
```

给定输入：

```
int mem_size0;
int mem_size1;
int mem_size2;
int mem_sizen; 
```

`mem_size`在这些声明之后有一个空行（或任何其他不包含 的行）。

该脚本生成输出：

```
struct { union {
int mem_size0;
int mem_size1;
int mem_size2;
int mem_sizen;
} s; int mem_array[mem_size_entries]; } u; 
```

你可以毫不费力地把它布置得更漂亮。然后，您可以遍历数组`u`：

```
for (int i = 0; i < mem_size_entries; i++)
    printf("%d: %d\n", i, u.mem_array[i]); 
```

这样做的缺点是原始代码中没有显示初始值设定项；但是，使用 Perl，您可以轻松地安排识别有多少，并找到初始化并编辑它们以适应此方案。基本上，这是将程序生成的输出视为“高级语言”的源代码，然后将其“编译”成可以编译的 C 代码。

# c# - 无论 c# .net Web 应用程序中的当前文化如何，如何获取特定的资源字符串

> ID：10116051
> 
> 赞同：2
> 
> 时间：2012-04-12T00:58:18.667
> 
> 标签：c#, .net, email, localization, resources

我需要向用户发送大量电子邮件，但他们有不同的语言偏好。电子邮件消息位于资源文件中：Email.resx、Email.fr.resx

我如何从一个或另一个强行获取字符串？例如，假设我使用 en-CA 文化登录，但我想发送一封法语电子邮件？

我试过了：

```
System.Globalization.CultureInfo ci = new System.Globalization.CultureInfo("fr-CA");

System.Resources.ResourceSet rSet = Resources.Emails.ResourceManager.GetResourceSet(ci ,true, false);

string bodyMessageResource = rSet.GetString("EmailBody"); 
```

但是 rSet 为空。

我只想能够选择我选择的语言的字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T13:02:02.387

我想你几乎在那里。尝试这个：

```
System.Globalization.CultureInfo ci = new System.Globalization.CultureInfo("fr-CA");
ResourceManager resourceManager = new ResourceManager("MyResource", Assembly.GetExecutingAssembly());
string bodyMessageResource = resourceManager.GetString("EmailBody", ci); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-11T06:37:46.813

尝试这个：

```
ResourceManager resourceManager = FrenchLanguage.ResourceManager;
string msg = resourceManager.GetString("MyString"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-09T11:59:52.230

您可以将 CultureInfo 传递给 Ressource 文件，而不是更改当前胎面的文化。我编写了这个扩展方法，它从我的 core.{language-code}.resx 文件中返回翻译后的字符串

```
public static string Translate(this string resourceId, CultureInfo cultureInfo)
{            
    return Resources.Text.Core.ResourceManager.GetString(resourceId, cultureInfo) ?? String.Format("Missing translation for Core resx ResourceId '{0}'", resourceId);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T20:52:50.697

我插入使用你的资源的全名空间，我被困在那里将近 3 个小时才能弄清楚；使用线程设置当前的文化信息。

```
Application.CurrentCulture = new System.Globalization.CultureInfo("fr");
System.Threading.Thread.CurrentThread.CurrentUICulture = Application.CurrentCulture;
ResourceManager resourceManager = new ResourceManager("ProjectName.ResourcesFolder.MainApplicationResource", System.Reflection.Assembly.GetExecutingAssembly());
string msg = resourceManager.GetString("yourResourcedMsgName"); 
```

# html - 一个表格，两个按钮？

> ID：10116052
> 
> 赞同：2
> 
> 时间：2012-04-12T00:58:26.840
> 
> 标签：html, forms, jsp

我有一个表格。我希望它有两个按钮（按钮A，按钮B）。有没有更好的方法来确定单击了哪个按钮而不是保留隐藏的输入字段，并通过 onClick() 中的 javascript 将其值设置为每个不同的字符串？

这就是本文所展示的内容： [http ://www.java2s.com/Code/Java/JSP/JspformUsingButtons.htm](http://www.java2s.com/Code/Java/JSP/JspformUsingButtons.htm)

但这似乎有点奇怪，没有比跳过那些箍更好的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T01:09:52.263

您可以使用`name`和`value`属性来区分表单上的按钮，然后从服务器读取适当的值。这是一个例子：

```
​&lt;form method="get" action="test.htm" target="new">
  <button type="submit" name="button" value="1">Button One</button>
  <button type="submit" name="button" value="2">Button Two</button>
</form>​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

当`Button 1`被点击时，URL 将包含`button=1`，当然当`Button 2`被点击时，`button=2`。

显然，您可以使用任何`name`您想要的属性，只要两个按钮具有相同的`name`. 这将使用`POST`而不是`GET`.

[http://jsfiddle.net/M74xN/](http://jsfiddle.net/M74xN/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T17:40:30.920

使用 jsp 和 servlets，可能的操作将是：

在 html 或 jsp 页面中

​</p>

```
<form method="POST" action="servlet">
  <button type="submit" name="action" value="add">add</button>
  <button type="submit" name="action" value="edit">delete</button>
</form>​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**Servlet POST 方法**

```
if (request.getParameter("action") != null) //if action is not null
        {
            String action = request.getParameter("action");
            if (action.equals("add")) //add button clicked
            {
               //do your work here
            }
            else if (action.equals("edit")) //delete button clicked
            {
                //your work here
            }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T01:59:13.660

创建一个表单，设置不同的提交按钮值，并让您的脚本根据按下的按钮执行不同的操作。

```
if (isset($_POST) {
    if ($_POST['button'] == 1) {
     /* BUTTON ONE PRESSED, INSERT PROCESSING HERE*/
    } else if ($_POST['button'] == 2) {
     /* BUTTON TWO PRESSED, INSERT PROCESSING HERE*/
    } else {
     /* NO BUTTON PRESSED, (THIS ELSE STATEMENT MAY NOT BE NEEDED) */
    }

/** END OF PHP CODE **/
<--! start of html -->
<html>
<form method="get" action="<?php echo "$server['php_self']; ?>" target="new">
  <button type="submit" name="button" value="1">Button One</button>
  <button type="submit" name="button" value="2">Button Two</button>
</form>​​​​​​​​​​​​​​​​​​​​​​​​​​
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-01T19:01:08.767

虽然答案可能会迟到。这完美地工作。在您的 HTML 中使用以下内容。

```
<form action="/route" method="POST">
    <button name="submit" value="ONE">
    <button name="submit" value="TWO">
</form> 
```

然后在你的 Python(Flask) 中使用这个

```
if request.form['submit'] == 'ONE':
    print('button one clicked')
elif request.form['submit'] == 'TWO':
    print('button two clicked') 
```

# c++ - 访客模式说明

> ID：10116057
> 
> 赞同：28
> 
> 时间：2012-04-12T00:58:53.940
> 
> 标签：c++, visitor-pattern

所以我已经阅读了有关访问者模式的所有文档，但我仍然非常困惑。我从另一个 SO question 中举了这个例子，有人可以帮助我理解吗？例如，我们什么时候使用访问者设计模式？我想我可能已经理解了一些，但我只是无法看到更大的图景。我怎么知道什么时候可以使用它？

```
class equipmentVisited
{
  virtual void accept(equipmentVisitor* visitor) = 0;
}

class floppyDisk : public equipmentVisited
{
  virtual void accept(equipmentVisitor* visitor);
}

class processor : public equipmentVisited
{
  virtual void accept(equipmentVisitor* visitor);
}

class computer : public equipmentVisited
{
  virtual void accept(equipmentVisitor* visitor);
}

class equipmentVisitor
{
  virtual void visitFloppyDisk(floppyDisk* );
  virtual void visitProcessor(processor* );
  virtual void visitComputer(computer* );
}

// Some additional classes inheriting from equipmentVisitor would be here

equipmentVisited* visited;
equipmentVisitor* visitor;

// Here you initialise visited and visitor in any convenient way

visited->accept(visitor); 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-12T01:10:12.273

访问者模式用于实现[*双重调度*](http://en.wikipedia.org/wiki/Double_dispatch)。简而言之，这意味着执行的代码取决于两个对象的运行时类型。

当你调用一个普通的*虚函数*时，它是一个单一的调度：被执行的代码段取决于一个对象的运行时类型，即你正在调用的那个虚方法。

对于访问者模式，被调用的方法最终取决于两个对象的类型——实现 的对象`equipmentVisitor`的类型，以及您调用的对象的类型`accept`（即`equipmentVisited`子类）。

还有其他方法可以在 C++ 中实现双重分派。Scott Meyer 的[“More Effective C++”](https://rads.stackoverflow.com/amzn/click/com/020163371X)的第 31 项深入探讨了这个主题。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-02-01T04:21:42.987

我认为Visitor这个模式的名字是相当不幸的。而不是访问者这个词，我会说 Functor 或 Operator，而不是“访问”，我会说“应用”。

我对访问者模式的理解如下：

在模板元编程（STL/BOOST）（编译时绑定）中，您可以通过函数对象（Functors）实现（正交设计）操作与结构的分离。例如在

```
template <class RandomAccessIterator, class Compare>
void sort (RandomAccessIterator first, RandomAccessIterator last, Compare comp); 
```

comp 是一个以非常通用的方式表示“小于”操作的函子/运算符，因此您不必有许多 sort 函数的变体：

对于访问者模式，您希望实现类似但在运行时（后期）绑定的情况下：

你想简化 A 的接口，你想保留未来扩展的可能性（与 A 一起工作的新操作），你想在这些扩展的情况下实现 A 接口的稳定性。

从原来的“胖”类：

```
class A
{ 
  public:
    virtual void function_or_operation_1();//this can be implemented in terms of public interface of the other functions
    virtual void function_or_operation_2();
    //..etc

    virtual void function_or_operation_N();
  public:
    //stable public interface, some functions of procedures

  private:
  //....
} 
```

您从公共接口中删除尽可能多的功能（只要它们可以根据同一公共接口的非提取功能实现）并将操作表示为仿函数对象或来自新仿函数层次结构的对象：

您可以通过使用前向声明的 Functor_or_Operator 拥有非常通用的接口来减少基类 A 中的函数数量：

```
 class Functor_or_Operator;
 class A
 {
   public:
     virtual void apply(Functor_or_Operator*);//some generic function operates on this objects from A hierarchy 
   //..etc
   public:
     //stable public interface, some functions

   private: 
     //....
 } 
```

//现在您在 A 层次结构 (A,B,C) 中有 N(=3) 个类和 M 个操作或由 Functor_or_Operator 层次结构中的类表示的函数您需要实现 N*M 定义来定义 Functor_or_Operator 中的每个操作如何作用于每个A 层次结构中的类。最重要的是，您可以在不更改“A”类接口的情况下做到这一点。当引入与 A 层次结构的对象一起工作的新操作或函数时，或者在 A 层次结构中的新派生类的情况下，类“A”的声明变得非常稳定。在存在添加的情况下，A 的稳定性（对 A 没有更改）对于避免昂贵的（有时是不可能的）重新编译软件很重要，该软件在许多地方都包含 A 的标头。

对于 A 层次结构中的每个新类，您都扩展了基类 Functor_or_Operator 的定义，添加了新的实现文件，但您永远不需要接触基类 A（通常是接口或抽象类）的头部。

```
 class Functor_or_Operator 
  {
    virtual void apply(A*)=0;
    virtual void apply(B*)=0;
    virtual void apply(C*)=0;
  }

  void A::apply(Functor_or_Operator* f) 
  { f->apply(this);} //you need this only if A is not abstract (it is instantiable)

  class B:public A
  {
    public:
     void apply(Functor_or_Operator* f) { f->apply(this);} //dynamic dispatch , you call polymhorphic Functor f on this object
     //..the rest of B implementation.
  }

  class C:public A
  {
    public:
     void apply(Functor_or_Operator* f) { f->apply(this);} //dynamic dispatch , you call polymorfic Functor f on this object
    //..the rest of C implementation.
  }

  class Functor_or_Operator_1:public Functor_or_Operator
  {
     public:
        //implementations of application of a function represented by Functor_or_Operator_1 on each A,B,C
        void apply(A*) {}//( only if A is instantiable,not an abstract class)
        void apply(B*) {}
        void apply(C*) {}
  }

  class Functor_or_Operator_2:public Functor_or_Operator
  {
    public:
      //implementations of application of a function represented by Functor_or_Operator_2 on each A,B,C
       void apply(A*) {}//( only if A is instantiable,not an abstract class)
       void apply(B*) {}
       void apply(C*) {}
  } 
```

# drupal - Nivo Slider 未在 Drupal 站点中显示图像

> ID：10116060
> 
> 赞同：0
> 
> 时间：2012-04-12T00:59:25.747
> 
> 标签：drupal, drupal-6, drupal-modules, drupal-theming, nivo-slider

我正在尝试在本地主机上运行的 drupal 主题的首页上添加 Nivo Image Slider。我使用现有的 druapl 6 主题模板作为我的基本主题。我按照以下网站上给出的关于如何安装 nivo 滑块的所有步骤进行操作。 [http://www.brightwebsitedesign.com/how-to-install-and-set-up-nivo-slider](http://www.brightwebsitedesign.com/how-to-install-and-set-up-nivo-slider)

但是，当我运行该站点时，图像未加载，滑块框仅显示处理过程，即圆形符号移动

谁能告诉我我需要做什么才能让我自己的图像出现在滑块中？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-12T14:04:23.797

这个链接是错误的！

您可以查看页面来源（带有萤火虫）并搜索导致图像未显示的原因。

我认为问题出在*src*属性上。你应该通知，图像的 url 是相对的并用 php 代码填充。

# r - R中的方差分析

> ID：10116061
> 
> 赞同：1
> 
> 时间：2012-04-12T00:59:28.540
> 
> 标签：r

所以我有一个有两列的表；第一个处理和第二个响应，称为 V1 和 V2（默认值）。我试过了

```
aov.ex2 = aov(V2~V1, data=ex2)
summary(aov.ex2) 
```

并得到了一些非常奇怪的东西——治疗的平方和只有 1 df，尽管事实上应该有`30 - 1 = 29`df 做`V1~V2`给了我相同的结果。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T01:24:00.847

试试这个

```
 aov.ex2 = aov(V2~factor(V1), data=ex2)
    summary(aov.ex2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:54:41.127

扩展@MYaseen208 的回复：

在过去，计算机程序不能很好地处理非数值数据，因此将分类变量重新编码为数值变量以将数据输入计算机是很常见的。然后这些程序需要用户告诉他们这个看起来像数字变量的变量实际上代表了类别。这可以通过以下两种方式之一完成：作为数据的属性或分析的属性。R 采用这样的方法，即此类事物是数据的属性而不是分析（这对我来说更有意义），因此该`aov`函数没有任何参数来指定哪些预测变量是分类的，而是查看数据来确定这一点. 由于`aov`函数还可以分析协方差和更一般的线性模型，它可以接受分类和数字预测变量（因此不会假设一切都是分类的）。您没有告诉我们您是如何输入数据的，但是无论您如何输入，它对 R 来说都是数字数据，而且您从未告诉过它，所以它一直假设它是数字的。您需要告诉 R 它是 categorical `factor(V1)`。可以对每次分析都执行此操作，但最好执行一次，在创建/读取数据时或之后执行一次，`ex2$V2 <- factor(ex2$V2)`以便对该数据的每个分析/图表/摘要都意识到它是分类的并适当地对待它.

# php - 使 PHP var_dump() 值每个值显示一行

> ID：10116063
> 
> 赞同：77
> 
> 时间：2012-04-12T00:59:38.540
> 
> 标签：php, line, var-dump

当我回显 var_dump($_variable) 时，我得到一条长的环绕行，其中包含所有变量和值，例如

```
["kt_login_user"]=>  string(8) "teacher1" ["kt_login_id"]=>  string(3) "973" ["kt_campusID"]=>  string(4) "9088" ["kt_positionID"]=>  string(1) "5" 
```

有没有办法让每个值都显示在自己的行上以便于阅读？像这样的东西：

```
["kt_login_user"]=>  string(8) "teacher1" 
["kt_login_id"]=>  string(3) "973" 
["kt_campusID"]=>  string(4) "9088" 
["kt_positionID"]=>  string(1) "5" 
```

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-04-12T01:01:15.173

是的，尝试用 包装它`<pre>`，例如：

```
echo '<pre>' , var_dump($variable) , '</pre>'; 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-04-12T01:11:05.893

我通常有一个很好的函数来处理数组的输出，只是为了在调试时让它变得漂亮一点。

```
function pr($data)
{
    echo "<pre>";
    print_r($data); // or var_dump($data);
    echo "</pre>";
} 
```

然后直接调用

```
pr($array); 
```

* * *

或者，如果您有一个这样的编辑器来保存片段，以便您可以更快地访问它们，而不是为您构建的每个项目或每个只需要快速测试的页面创建一个函数。

对于`print_r`：

```
echo "<pre>", print_r($data, 1), "</pre>"; 
```

对于`var_dump()`：

```
echo "<pre>", var_dump($data), "</pre>"; 
```

我将上述内容与 PHP Storm 一起使用。我已将其设置为`pr`选项卡命令。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-12-04T22:09:06.840

我也研究过这个问题，但没有找到正确的答案。这对我不起作用：

```
echo '<pre>' . var_dump($variable) . '</pre>'; 
```

这不会为我提供一个很好的数组显示，带有换行符（我使用的是 Firefox 31.3.0）

然而，经过一些实验，这解决了这个问题（注意 php 一开始是关闭的）：

```
... ?> <pre><?php echo var_dump($variable) ?></pre> <?php ... 
```

这解决了问题，并在我的浏览器上为我显示了一个漂亮、易于阅读的数组。你会看到标签是如何没有被 PHP 包裹起来的。只有 echo var_dump 部分是。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-07-09T12:41:49.790

如果你安装了[XDebug](https://xdebug.org/docs/display)，你可以使用它的`var_dump`替代品。报价：

> Xdebug 替换了 PHP 的 var_dump() 函数来显示变量。Xdebug 的版本包括针对不同类型的不同颜色，并对数组元素/对象属性的数量、最大深度和字符串长度进行了限制。还有一些其他函数处理变量显示。

您可能需要调整以下一些设置：

> 有许多设置可以控制 Xdebug 修改后的 var_dump() 函数的输出：xdebug.var_display_max_children、xdebug.var_display_max_data 和 xdebug.var_display_max_depth。这三个设置的效果最好用一个例子来说明。下面的脚本运行了四次，每次都使用不同的设置。您可以使用选项卡查看差异。

但请记住，XDebug 会显着降低您的代码速度，即使它刚刚加载也是如此。不建议在生产服务器上运行。但是，嘿，无论如何，您不会在生产服务器上进行 var_dumping，是吗？

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2016-02-04T10:00:07.400

[var_export](http://php.net/manual/en/function.var-export.php "var_export")会给你一个很好的输出。文档中的示例：

```
$a = array (1, 2, array ("a", "b", "c"));
echo '<pre>' . var_export($a, true) . '</pre>'; 
```

将输出：

```
array (
  0 => 1,
  1 => 2,
  2 => 
  array (
    0 => 'a',
    1 => 'b',
    2 => 'c',
  ),
) 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2016-06-10T13:41:05.600

对我来说正确的答案是

```
echo '<pre>' . var_export($var, true) . '</pre>'; 
```

由于`var_dump($var)`并且`var_export($var)`不返回字符串，因此您必须使用`var_export($var, true)`to 强制`var_export`将结果作为值返回。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2015-08-05T08:48:39.070

使用输出缓冲区： http: [//php.net/manual/de/function.ob-start.php](http://php.net/manual/de/function.ob-start.php)

```
<?php
    ob_start();
    var_dump($_SERVER) ;
    $dump = ob_get_contents();
    ob_end_clean();

    echo "<pre> $dump </pre>";
?> 
```

另一种选择是**使用输出缓冲并将转储中的所有换行符转换**为`<br>`元素，例如

```
ob_start();
var_dump($_SERVER) ;
echo nl2br(ob_get_clean()); 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2016-02-15T14:44:47.577

您可以按`Ctrl`+`U`查看源代码。大多数浏览器都会在那里美化输出。

`var_dump`是最丑的调试方式。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-04-05T21:03:17.500

[个人比较喜欢Symfony 的 var dumper 组件](https://symfony.com/doc/current/components/var_dumper.html)提供的替换功能

安装`composer require symfony/var-dumper`并使用`dump($var)`

它负责其余的工作。我相信那里还注入了一些 JS 以允许您与输出进行一些交互。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-06-28T11:46:34.723

我真的很喜欢 var_export()。如果您喜欢可复制/粘贴的代码，请尝试：

```
echo '<pre>' . var_export($data, true) . '</pre>'; 
```

甚至像这样的颜色语法突出显示：

```
highlight_string("<?php\n\$data =\n" . var_export($data, true) . ";\n?>"); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-10-26T11:59:32.563

我做了类似的解决方案。我创建了一个片段来替换“vardump”：

```
foreach ($variable as $key => $reg) {
    echo "<pre>{$key} => '{$reg}'</pre>";
}
var_dump($variable);die; 
```

Ps：我正在用最后一个 var_dump 重复数据以获取文件名和行

所以这个： [![在此处输入图像描述](../Images/5e6a3df497a301becd8a358e8426a855.png)](https://i.stack.imgur.com/DaLkk.png) 变成了这个： [![在此处输入图像描述](../Images/97d5f5fbcbe89a50f502b7d4fcdcf08e.png)](https://i.stack.imgur.com/loFI2.png)

让我知道这是否对您有帮助。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-09-28T00:18:16.113

对于需要在*视图源代码*和*CLI*中工作的开发人员，在调试单元测试时特别有用。

```
echo vd([['foo'=>1, 'bar'=>2]]);

function vd($in) {
  ob_start(); 
  var_dump($in);
  return "\n" . preg_replace("/=>[\r\n\s]+/", "=> ", ob_get_clean());
} 
```

产量：

```
array(1) {
  [0] => array(2) {
    'foo' => int(1)
    'bar' => int(2)
  }
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-04-12T01:01:27.543

将其包装在`<pre>`标签中以保留格式。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-11-29T21:38:37.643

我不想停止使用`var_dump($variable);die();`和使用`pre`标签和循环对我来说似乎有点过头了，所以因为我在浏览器中查看转储，所以我只需右键单击页面并选择检查（我使用 Chrome）。Developer Tools 的 Elements 部分以非常易读的格式显示变量。

# asp.net - 如何为“永远”移动/删除 mvc 路由编写代码

> ID：10116067
> 
> 赞同：0
> 
> 时间：2012-04-12T01:00:08.300
> 
> 标签：asp.net, asp.net-mvc, http, redirect, seo

我在一个网站上有几个页面最近被移动（到另一个 mvc 路由）并且一些已经被删除。在对搜索引擎（和我的用户）友好方面，应该如何处理这样的变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T03:47:26.977

我会使用 IIS 中的 URL 重写模块为那些错误/移动的路由发出 301/302 重定向。这将使 Google/Bing 对您的 SEO 感到满意，并防止任何带书签的链接失效。

由于您没有提供任何示例，因此我无法向您展示如何真正为您的案例使用重写，但是[learn.iis.net](http://learn.iis.net/page.aspx/664/using-url-rewrite-module-20/)有大量的数据/示例/用例。

一个简单/愚蠢的例子。我们将从博客控制器重定向到文章控制器（在您的 web.config 中）

```
<rewrite>
  <rules>
    <rule name="Redirect from blog">
      <match url="^blog/([_0-9a-z-]+)/([0-9]+)" />
      <action type="Redirect" url="article/{R:2}/{R:1}" redirectType="Found" />
    </rule>
  </rules>
</rewrite> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T08:22:29.723

看看 Ben 的解决方案：

[http://ben.onfabrik.com/posts/aspnet-mvc-issues-multiple-301-redirects](http://ben.onfabrik.com/posts/aspnet-mvc-issuing-multiple-301-redirects)

它看起来是一种您可能会觉得有用的方法。

# ios - 取消选择行的适当位置

> ID：10116068
> 
> 赞同：1
> 
> 时间：2012-04-12T01:00:20.473
> 
> 标签：ios, uitableview, user-interface, uiviewcontroller, viewwillappear

我一直在尝试使用 UITableView 的 deselectRowAtIndexPath: 来帮助用户知道在返回 tableview 时正在查看哪一行。

我注意到我可以将它放在 viewWillAppear 和 viewDidAppear 中，结果略有不同。第一个在弹出视图滑出时开始动画，而后者仅在弹出视图完全消失后才开始动画。结果，我猜后者感觉更“明显”（更多的动画发生在屏幕上的行完全 - 实际上全部）。

从美学上讲，这是一个有用的区别，因为我可以更好地控制用户体验。但是，有些问题：

*   有什么技术原因我应该使用其中一个吗？
*   仔细查看一些 Apple 应用程序，我*认为*它们在 viewWillAppear 中制作动画。任何人都可以确认吗？
*   使用 viewWillAppear 是否存在动画将在屏幕外完成的风险（可能是由于弹出视图控制器中的一些滞后处理等）？还是仅在弹出视图的过渡开始时触发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T01:09:59.217

1）如果您的代码依赖于完全加载的视图，则 viewDidAppear 更好，但在这种情况下，我认为这不会产生技术差异。

2) 我不认为我们中的任何人都在 Apple 工作......

3) viewWillAppear 根据定义在视图开始显示之前调用。如果您的动画花费的时间比视图出现的时间长，那么是的，它将在屏幕外。否则它将是（动画长度 - （减）视图出现的时间）

# php - 如何在PHP中的两个关键字之间抓取字符串

> ID：10116069
> 
> 赞同：1
> 
> 时间：2012-04-12T01:00:55.823
> 
> 标签：php, preg-match, php-5.3

不确定之前是否已经回答过这个问题 - 如何在两个关键字之间获取字符串？

例如 ' **story** ' 和 a '之间的字符串**？**',

```
http://mywebsie.com/hello/blog/story/archieve/2012/5/?page=1    
http://mywebsie.com/blog/story/archieve/2012/4/?page=1
http://mywebsie.com/blog/story/archieve/2012/?page=4 
```

我只是想，

```
story/archieve/2012/5/
story/archieve/2012/4/
story/archieve/2012/ 
```

**编辑：**

如果我使用`parse_url`，

```
$string = parse_url('http://mywebsie.com/blog/story/archieve/2012/4/?page=1');
echo $string_uri['path']; 
```

我明白了，

```
/blog/story/archieve/2012/4/ 
```

但我不想包括“**博客/** ”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-16T23:28:40.553

另一种非常简单的方法是我们可以创建一个可以随时调用的简单函数。

```
<?php
  // Create the Function to get the string
  function GetStringBetween ($string, $start, $finish) {
  $string = " ".$string;
  $position = strpos($string, $start);
  if ($position == 0) return "";
  $position += strlen($start);
  $length = strpos($string, $finish, $position) - $position;
  return substr($string, $position, $length);
  }
?> 
```

这是您问题的示例用法

```
$string1="http://mywebsie.com/hello/blog/story/archieve/2012/5/?page=1";    
$string2="http://mywebsie.com/blog/story/archieve/2012/4/?page=1";
$string3="http://mywebsie.com/blog/story/archieve/2012/?page=4";

echo GetStringBetween ($string1, "/blog/", "?page");
//result : story/archieve/2012/5/

echo GetStringBetween ($string2, "/blog/", "?page");
//result : story/archieve/2012/4/

echo GetStringBetween ($string3, "/blog/", "?page");
//result : story/archieve/2012/ 
```

更多详情请阅读[http://codetutorial.com/howto/how-to-get-of-everything-string-between-two-tag-or-two-strings](http://codetutorial.com/howto/how-to-get-of-everything-string-between-two-tag-or-two-strings)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T01:02:00.793

使用`parse_url()`.

[http://php.net/manual/en/function.parse-url.php](http://php.net/manual/en/function.parse-url.php)

```
$parts = parse_url('http://mywebsie.com/story/archieve/2012/4/?page=1');
echo $parts['path']; 
```

您可以从那里使用`explode()`或任何您需要的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T01:44:06.887

如果可以安全地假设您要查找的子字符串在输入字符串中恰好出现一次：

```
function getInBetween($string, $from, $to) {
    $fromAt = strpos($string, $from);
    $fromTo = strpos($string, $to);

    // if the upper limit is found before the lower
    if($fromTo < $fromAt) return false;

    // if the lower limit is not found, include everything from 0th
    // you may modify this to just return false
    if($fromAt === false) $fromAt = 0;

    // if the upper limit is not found, include everything up to the end of string
    if($fromTo === false) $fromTo = strlen($string);

    return substr($string, $fromAt, $fromTo - $fromAt);
}

echo getInBetween("http://mywebsie.com/hello/blog/story/archieve/2012/5/?page=1", "story", '?'); // story/archieve/2012/5/ 
```

# javascript - 如何从正文而不是标题中选择所有 div？

> ID：10116070
> 
> 赞同：0
> 
> 时间：2012-04-12T01:01:03.373
> 
> 标签：javascript, html, dom, getelementsbytagname

我使用这个 javascript 代码来选择所有 DIV 并更改它们的颜色。我不想更改标题中 DIV 的颜色。本任务的目的是学习 HTML5、DOM、Javascript 和 getElementsByTagName 函数：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>test</title>
    <div>divv in header</div>
</head>
<body onload="Onload()">
    <div>bla</div>
    <div id="Div1">bla</div>
    <div id="Div2">bla
        <div id="Div4">div in div</div>
    </div>
    <div id="Div3" class="diiiivvv">bla</div>
</body>
</html>

<script type="text/javascript">
    function Onload() {
        var h = document.head;
        var dh = h.getElementsByTagName('div');
        if (dh.length != 0) {
            dh[0].style.backgroundColor = 'red'; //fail
        }            

        var d = document.getElementsByTagName('div');

        for (var i = 0; i < d.length; i++) {
            d[i].style.backgroundColor = 'blue';
        };
    }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T01:28:08.290

你的问题在哪里？您刚刚正确选择了 head 中的 div：

```
 var h = document.head;
    var dh = h.getElementsByTagName('div');
    // or short:
    var dh = document.head.getElementsByTagName('div'); 
```

那么为什么不将相同的用于 body 元素：

```
 var db = document.body.getElementsByTagName('div'); 
```

该[`getElementsByTagName()`](https://developer.mozilla.org/en/DOM/element.getElementsByTagName)方法可以应用于任何 dom 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T01:33:03.633

您可能会发现最好使用 CSS 选择器和适当的样式规则来访问所需的元素。这是一个例子：

```
<script type="text/javascript">

function applyRule(selectorText, value) {

  // Get the style sheets - note sytleSheets is a live HTMLCollection
  var sheet, sheets = document.styleSheets;

  // Add a style sheet if there isn't one in the document
  if (!sheets.length) {
    sheet = document.createElement('style');
    sheet.type = 'text/css';
    document.getElementsByTagName('head')[0].appendChild(sheet);
  }

  // Get the last style sheet
  sheet = sheets[sheets.length - 1];

  // Add the rule - W3C model
  if (sheet.insertRule) {
    sheet.insertRule(selectorText + ' {' + value + '}', sheet.cssRules.length);

  // IE model
  } else if (sheet.addRule) {
    sheet.addRule(selectorText, value, sheet.rules.length);
  }  
}
</script>

<div>here is a div
<button onclick="applyRule('div','background-color: red')">Change div background colour</button>
</div> 
```

# asp.net - 实体框架：在看似随机的时间，上下文没有及时准备好请求，仅限生产环境

> ID：10116076
> 
> 赞同：1
> 
> 时间：2012-04-12T01:01:26.847
> 
> 标签：asp.net, sql-server-2008, entity-framework-4, datacontext, production-environment

就在昨天，我终于将我一直在开发的 ASP.NET 应用程序发布到了网络上。导入数据库表和数据，更改我的 web.config 中的连接字符串，所有这些都是好东西。奇怪的是，在这个生产服务器上，在看似随机的时间，页面会因为服务器错误而无法加载。你可以自己看看：

[http://world-8.net/](http://world-8.net/)

尝试导航到“[关于我们](http://world-8.net/about-us/)”页面或除列出的第一个播客之外的任何其他播客。您可能会遇到“对象引用未设置为对象的实例”错误。这很奇怪，因为错误中引用的代码行位于站点每个页面上 Site.Master 中使用的部分视图中（这是在尝试检索有关最新播客剧集的信息时）。只是访问由 HomeController 控制的页面时，我还没有遇到此错误。任何由 ArticleController 或 AdminController 控制的东西都喜欢在第一次查看时爆炸。在访问列表中的第一个播客 (http://world-8.net/podcast/world-8-50c--pax-2012-part-3/52/) 之后，事情往往会顺利进行一段时间，然后再尝试导航到其他任何地方。

在我的模型结构中，播客和文章是一对一的关系。Article 具有 PodcastId 属性，但这不是 FK，因为并非每篇文章都与播客有关。在显示有关文章的信息时，我只需要有关 Podcast 对象的信息。

就好像数据上下文正试图“赶上”模型创建过程并且没有及时完成请求以完成处理。我自己从未见过这个特定的错误，但该网站的用户很友好地向我展示了他看到的内容：http: [//t.co/hjHcyqxt](http://t.co/hjHcyqxt)

```
The context cannot be used while the model is being created. 
```

对我来说真是令人困惑的行为；我在开发环境中从未遇到过这个问题。而且它的不一致性质使我很难确定问题所在。

如果有任何人更精通 EntityFramework 可以对此有所了解，我将不胜感激！

一些希望有帮助的代码示例：

在我的模型命名空间中：

```
public class Article
{
    public int Id { get; set; }
    public string Title { get; set; }
    public int UserId { get; set; }
    public string AuthorName { get; set; }
    public string Content { get; set; }
    public string ArticleType { get; set; }
    public DateTime PublishDate { get; set; }
    public int PodcastId { get; set; }
    public Podcast ArticlePodcast { get; set; }

    public virtual ICollection<ArticleComment> Comments { get; set; }
}

public class Podcast
{
    public int Id { get; set; }
    public string Title { get; set; }
    public string MP3path { get; set; }
    public string Description { get; set; }
    public DateTime PublishDate { get; set; }
    public string Duration { get; set; }

    public virtual ICollection<PodcastTimestamp> Timestamps { get; set; }
    public virtual ICollection<PodcastGuest> Guests { get; set; }
} 
```

在我的 EntityFramework 命名空间（存储库）中：

```
public class EF4DataContext: DbContext
{

    public EF4DataContext(string conString):base(conString)
    {
    }

    public DbSet<User> Users { get; set; }
    public DbSet<Article> Articles { get; set; }
    public DbSet<ArticleComment> ArticleComments { get; set; }
    public DbSet<Podcast> Podcasts { get; set; }
    public DbSet<PodcastTimestamp> PodcastTimestamps { get; set; }
    public DbSet<PodcastGuest> PodcastGuests { get; set; }
    public DbSet<Product> Products { get; set; }
}

public abstract class BaseRep
{
    public EF4DataContext DataContext { get; set; }
    public ObjectContext ObjectContext { get; set; }
}

public class ArticleRepository : BaseRep
{
    public ArticleRepository()
    {
        DataContext = new EF4DataContext(ConfigurationManager.AppSettings["ConnectionInfo"]);

        ObjectContext = ((IObjectContextAdapter)DataContext).ObjectContext;
    }
}

public Article GetMostRecentPodcastArticle()
    {
        var art = DataContext.Articles.Where(a => a.ArticleType.Equals("Podcast")).OrderByDescending(a => a.PublishDate).FirstOrDefault();
        art.Comments = GetArticleCommentsByArticleId(art.Id);

        return art;
    } 
```

在我的控制器命名空间中：

```
public class BaseController : Controller
{
    public static PodcastRepository _podcastRepository = new PodcastRepository();
    public static ArticleRepository _articleRepository = new ArticleRepository();
    public static UserRepository _userRepository = new UserRepository();

    protected override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        ViewData["MostRecentEpisode"] = _articleRepository.GetMostRecentPodcastArticle();
        base.OnActionExecuted(filterContext);
    }
}

[HandleError]
public class HomeController : BaseController
{
    public ActionResult Index()
    {
        var pageNumber = 0;
        if(!string.IsNullOrWhiteSpace(Request.QueryString["p"]))
        {
            pageNumber = int.Parse(Request.QueryString["p"]);
        }
        var category = Request.QueryString["category"] ?? "";

        ViewData["Articles"] = _articleRepository.GetOnePageOfArticles(pageNumber, category);

        if (!string.IsNullOrEmpty(Request.QueryString["category"]))
        {
            ViewData["TotalArticleCount"] = _articleRepository.GetArticlesByType(category).Count();
        }
        else
        {
            ViewData["TotalArticleCount"] = _articleRepository.GetAllArticles().Count();
        }

        return View();
    }

    public ActionResult AboutUs()
    {
        return View();
    }
}

public class ArticleController : BaseController
{
    public ActionResult Article(int aId)
    {
        ViewData.Model = _articleRepository.GetArticleById(aId);

        return View();
    }
} 
```

**编辑：**我的 Global.asax.cs 中的 Application_Start() 方法，应 MilkyWayJoe 的要求

```
protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        RegisterRoutes(RouteTable.Routes);

        Database.SetInitializer<EF4DataContext>(null);
    } 
```

# vb.net - 通过 linq 在 Visual Studio 2010 中使用 Crystal Report

> ID：10116080
> 
> 赞同：0
> 
> 时间：2012-04-12T01:01:53.560
> 
> 标签：vb.net, visual-studio-2010, c#-4.0, crystal-reports

我正在开发一个需要使用报告的应用程序。我在整个应用程序中使用 LINQ to entity 和 MS SQL 服务器作为数据库。现在，当我开始工作报告时，我注意到水晶报告或不再包含在 Visual Studio 中。我单独下载并安装了它。我也成功设计了我的报告，但问题是我将如何使用 LINQ？我将我的 linq 查询翻译成数据表，它可以工作，但我遇到的问题是，我的报告基于两个表，翻译后我可以看到第一个表的记录，但看不到第二个表的记录。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:00:30.287

用这个

```
 Dim db As New NorthwindEntities
    Dim query = db.Employees.Select(Function(p) p)
    Dim oRpt As New CrystalReport1
    oRpt.SetDataSource(query)
    CrystalReportViewer1.ReportSource = oRpt 
```

# python - 在 python 中格式化 if-else 语句时遇到问题

> ID：10116087
> 
> 赞同：2
> 
> 时间：2012-04-12T01:02:53.727
> 
> 标签：python

我的程序使用牛顿算法找到根。如果没有足够的迭代来找到要打印的根，那么我在最后一部分遇到了麻烦。

```
for i in range(N):
    f= evaluate(p,deg,x0)
    s=evaluate(d,deg-1,x0)
    if s==0:
        print "Can't divide by 0"
        return -1
    x1=x0 - f/s
    print ("Iteration %d" %(i+1))
    print "%f" %x0
    if abs(x1-x0)<tol:
        print "Found a root %f" %x1
        return 0
    else:
        x0=x1
    if abs(x1-x0)>tol:
       print "root not found" 
```

不知何故，它似​​乎跳过了最后一个 if 语句并且不打印任何东西，我试图把它放在不同的地方。当我将它放在前一个 if 语句之前时，它会跳过 x0=x1 部分。我对它有什么问题感到困惑。

N 是迭代次数，x0 是初始猜测

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T01:28:07.723

显示未找到根的逻辑不正确。您不想检查`abs(x0 - x1) > tol`，因为这与查找根无关。想一想：两者之间的差异可能非常大`x0`，`x1`但您仍然可以在正确的轨道上找到根。*您不希望仅仅因为与某些*`x1`迭代不同`x0`就跳出迭代。

 *更好的做法是将错误语句放在`for`循环之外，例如：

```
for i in range(N):
    f = evaluate(p,deg,x0)
    s = evaluate(d,deg-1,x0)

    if s==0:
        print "Can't divide by 0"
        return -1
    x1=x0 - f/s
    print ("Iteration %d" %(i+1))
    print "%f" %x0
    if abs(x1-x0)<tol:
        print "Found a root %f" %x1
        return 0
    else:
        x0=x1

# If we exhaust the for-loop without returning due to
# a found root, then there must have been an error with
# convergence, so just print that at exit.
print "Error: did not converge to the root in %d iterations."%(N)
print "Check your initial guess and check your functions for cyclic points." 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T01:24:00.580

我猜想，永远没有用牛顿的方法做任何事情，你想要的更像是：

```
x1 = sys.maxint # the first iteration is a throw-away
                # you could do this a different way, but you have a lot of global 
                # variables that I don't know how to handle.
for i in range(N):
    # ....
    if abs(x1-x0)<tol:
        # ...

    # you want these two lines together, somehow.
    x0 = x1
    x1 = x0 - f/s

    #...
    # no "else" down here

# no "if abs(x1-x0)>tol:", because it's taken care of by the return(0)
# earlier. Also note the unindent.
print "root not found" 
```*

# java - 在Android中序列化包含对象列表的对象列表

> ID：10116089
> 
> 赞同：0
> 
> 时间：2012-04-12T01:02:57.037
> 
> 标签：java, android, list, serialization, arraylist

我有一个`ArrayList`- `List<Checklist> checklists`。该类`Checklist`包含一个`ArrayList`- `List<Item> items`。这些为我的应用程序的用户存储了一系列清单及其项目。是否可以序列化列表`checklists`以保存用户清单？

我已经尝试了我能找到的一切，我能做的最好的就是在`checklists`没有`items`字段的情况下将其序列化为字节数组。

如果这是不可能的，我应该重组我的列表还是有更好的方法来保存这些数据？（也许是数据库）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T01:07:08.020

我使用 GSON 库将对象序列化为 JSON 字符串并对其进行反序列化。结果很好。

[http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

该库足够智能，可以识别类似命名的变量并适当地键入它们。我强烈推荐这种方法。它甚至可以识别您是否在类中有类。这很棒。

# ios - iOS企业OTA分发问题

> ID：10116091
> 
> 赞同：5
> 
> 时间：2012-04-12T01:03:08.123
> 
> 标签：ios, deployment

我正在尝试部署我构建 OTA 的应用程序。这些是我创建 ipa 所经历的步骤：

*   生成证书签名请求
*   创建分发 .mobileprovision
*   Xcode > 产品 > 存档 > 保存以供企业部署
*   指定正确的标题、URL（完全限定域）、大/小应用程序图标
*   在 IIS 上托管 .mobileprovision、.ipa、.plist（生成的 xcode）。`application/octet-stream`为 .mobilepovision、.ipa 和`text/xml`.plist配置了 IIS MIME TYPES 。
*   在笔记本电脑上对此进行了测试，并验证了所有 URL 都是有效的。
*   在 iPad 上安装了 Provisioning Profile OTA。
*   单击正确格式的下载链接 ( `itms-services://?action=download-manifest&url=$URL`)。
*   iPad 返回一般的“无法连接”错误。

我尝试通过 iTunes 在 iPad 上手动安装相同的应用程序，它运行良好。所以在这一点上，我什至不知道我还能尝试什么。`entitlements.plist`在意识到 Xcode 会自动执行此操作后，我已经尝试并删除了。

非常感谢任何帮助！

谢谢，
泰加。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T19:26:34.887

我在尝试部署`OTA Apps`用`IIS 7.5`. 以下解决方案对我有用：

更改 mime 类型：

> .plist：应用程序/xml
> .ipa：应用程序/x-plist

设置`IIS Anonymous Authentication Credentials`为`Application Pool Identity`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-06T01:23:09.587

我的猜测是，即使这些文件都可以正常工作，但其中一个在 itms-services:// url 或下载清单文件中拼写错误。

检查整个过程（在 30 秒内）的最佳方法是安装[Web 代理](http://www.charlesproxy.com/)并跟踪请求。

脚步：

1.  安装[Charles 代理](http://www.charlesproxy.com/)(Mac/Windows)
2.  运行它（它将在端口 8888 上侦听外部请求）
3.  转到您的 iPhone/iPad 当前 Wifi 设置并按 (i) 并将 Http 代理设置为手动。输入您的 PC/Mac 的 IP 地址和端口 8888。
4.  转到 safari 并单击您的 itms-services 链接。
5.  注意失败的位置以及导致失败的 URL 是什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-19T03:48:45.890

我在 iis 7.5 中托管了我的 ios 6 应用程序，我没有添加任何 mime 类型，它会为我安装。

无论如何，从我在 Internet 中阅读的以下 mime 类型来看。

**.mobileprovision 和 .ipa**

```
application/octet-stream 
```

**.plist**

```
 text/plain 
```

**应用程序/八位字节流**

它是一个二进制文件。一个通用的 http 字节流。通常它将是一个必须在应用程序中打开的应用程序或文档。

**URL转义问题** *点击格式正确的下载链接（itms-services://?action=download-manifest&url=$URL）*

确保 URL 已转义，否则可能无法安装。

**网络配置要求**

Apple 要求其两个服务器必须可访问才能成功安装。

访问一台服务器确认它已被授权安装，另一台服务器检查 ota 的最大应用程序大小限制。

阅读有关服务器地址的苹果文档，并确保它们没有被锁定在封闭的 Intranet 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-29T01:41:28.287

Simply add two MIME types for `.plist` and `.ipa` extensions.

I added following on IIS 7 and things started working:

```
.ipa: application/octet-stream
.plist: application/xml 
```

I did not have to deploy the `.mobileprovision` file. I guess it's not needed, at least not anymore.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-05T22:21:15.613

为了对您的网站进行故障排除，我使用以下步骤：

1.  在我的 PC 上打开 Chrome 浏览器并导航到包含您的`itms-services`链接的文件夹
2.  点击`itms-services`链接或复制链接
3.  重写地址指向plist文件并按照重写的链接
4.  检查返回的 XML 是否正确，特别是 IPA 的 URL
5.  导航到显示的 IPA 地址
6.  它应该开始在您的浏览器中下载 IPA

如果上述任何步骤出现错误，请修复您的网站并在您的 PC 上重复测试。

在 Apple 中，您可以在[iPhone 下的 Business - Deployment](http://www.apple.com/iphone/business/it/deployment.html "iPhone 业务 - 部署")中找到 PDF 中 的[iOS 部署技术参考](http://images.apple.com/iphone/business/docs/iOS_Deployment_Technical_Reference_EN_Feb14.pdf "下载 PDF 版指南")。在第 42 页，您可以找到以下有关在 OS X 和 IIS 的 mime 类型上配置 Web 服务器的文本：

**设置服务器 MIME 类型**

您可能需要配置您的 Web 服务器，以便正确传输清单文件和应用程序文件。

对于 OS X Server，将以下 MIME 类型添加到 Web 服务的 MIME 类型设置中：

*   应用程序/八位字节流 ipa
*   文本/xml plist

对于 IIS，使用 IIS 管理器在服务器的 Properties 页面中添加 MIME 类型：

*   .ipa 应用程序/八位字节流
*   .plist 文本/xml

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-20T22:57:36.860

让我发疯的还有试图找出 .mobileprovision 文件的 mime 类型，当时我并不清楚，但**application/octet-stream**用于 .mobileprovision 文件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-08T13:51:08.817

尝试将“application/x-plist”作为 plist 的 MIME 类型

# ruby-on-rails - 如何在生产（EC2 / Ubuntu）中启动resque队列？

> ID：10116093
> 
> 赞同：2
> 
> 时间：2012-04-12T01:03:27.617
> 
> 标签：ruby-on-rails, ubuntu, amazon-ec2, rake, resque

谁能指出我如何开始运行的解决方案

```
 bundle exec env rake resque:work QUEUE='*' 
```

在生产中部署 Rails 应用程序时（我使用的是 EC2 和 Ubuntu）？我没有使用乘客或任何部署（由于一些复杂性，不得不手动设置服务器并手动复制 Rails 应用程序）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T17:34:02.680

由于您使用的是 Ubuntu，因此使用 upstart 启动 resque workers 可能对您有用。这种方法对我来说效果很好。这是我在设置它时发现的一篇博客文章的链接，它很有帮助。

[http://jasonroelofs.com/2012/03/12/manage-and-monitor-resque-with-upstart-and-monit/](http://jasonroelofs.com/2012/03/12/manage-and-monitor-resque-with-upstart-and-monit/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T09:13:01.767

与所有 rake 一样，这很简单`RAILS_ENV=production rake resque:work QUEUE=*`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-24T17:08:42.350

这是我所做的

```
PIDFILE=./resque.pid BACKGROUND=yes QUEUE="*" RAILS_ENV=production  rake resque:work >>  resque.log & 
```

# c# - 如果条件满足，如何测试 void 方法返回

> ID：10116097
> 
> 赞同：3
> 
> 时间：2012-04-12T01:04:12.203
> 
> 标签：c#, unit-testing, rhino-mocks

如何测试这个？

```
public void TestMethod()
{
   if(aDenpendency.someMethod()) return;

   // Followed by other logic....
} 
```

我在以下逻辑中没有其他依赖项，因此无法使用 AssertWasNotCalled。

提前致谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T20:52:53.993

按照您的描述进行测试是错误的。并且表示代码结构不佳并且是明确的**代码气味**，您应该重构和单元测试该代码，鉴于您的目标是测试它没有被调用，因此您还需要在它被调用时进行测试。

您需要一个方法具有单一职责，因此对于更明智的单元测试，您可以取出返回后的逻辑将其封装在一个方法中并对该方法的输出进行单元测试。

单元测试不是为了测试未被调用的内容，而是为了测试模拟/假的期望设置，或者您应该测试操作的结果。

一旦方法被调用，您可以编写一个测试对象状态的测试，但这实际上是一个集成测试而不是单元测试。这意味着您可以在 return 语句执行后测试应该是的状态，其他代码将不会执行，因此无论修改或处理的内容都不会被修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T05:43:46.153

让您正在测试的方法设置一个“状态”属性怎么样？例如 Running\Processing\Aborted 等？

所以你可以在你设置的任何测试情况下调用你的 void 方法，然后检查属性。回报; 和状态属性设置将一起在代码中

```
if(condition){
    _status = 1; //Or use an enumeration would be better
    return;
} 
```

然后，您的测试将通过公共访问器测试状态。

这可能并不适用于所有情况，但我正在考虑做这样的事情，我的类有一个 void 方法 Process()。它可能会使您的测试更简单，您不需要模拟（但可能仍然需要存根），并且意味着您可以事后测试是否发生了某些事情而不是未发生的事情（我同意之前的海报，这是在可能的情况下采用更好的方法）

我意识到这可能只是为了进行测试而编写代码的味道，但在我的特定情况下，我将使用公共属性在代码实际运行期间检查类的状态，因此整个方法与整体设计一致。

# jquery - jQuery 正在改变我的 HTML

> ID：10116100
> 
> 赞同：0
> 
> 时间：2012-04-12T01:04:24.327
> 
> 标签：jquery

我试图在特定元素之后插入一个 HTML 字符串。但是 jQuery 改变了 HTML 代码。

这是我的代码：

```
$(".poDetails")
    .find("tr")
    .eq(14).after('</table><div style="page-break-after: always;"></div><table>'); 
```

但是 jQuery 插入：

```
<div style="page-break-after: always;"></div><table></table> 
```

知道如何防止这种情况吗？有什么问题吗？

谢谢！

埃德加。

更新 - -

这是完整的代码：

```
 <table class="poDetails">
    <tr>
        <td>text</td>
    </tr>
    <tr>
        <td>text</td>
    </tr>
    <tr>
        <td>text</td>
    </tr>
    <tr>
        <td>text</td>
    </tr>

    n times...

</table> 
```

这就是我想要做的：

```
<table class="poDetails">
    <tr>
        <td>text</td>
    </tr>
    <tr>
        <td>text</td>
    </tr>
    <tr>
        <td>text</td>
    </tr>

    //this is what i'm inserting. after tr number 14 (just assume that this is the 14 tr)
</table>
    <div style="page-break-after: always;"></div>
<table>

    <tr>
        <td>text</td>
    </tr> 

</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T03:25:01.677

You can use [`.after()`](http://api.jquery.com/after/) or [`.insertAfter()`](http://api.jquery.com/insertAfter/) to actually move DOM elements around the page:

```
$(".poDetails tr:gt(13)").wrap("<table/>").insertAfter( $(".poDetails"));
$(".poDetails").after("<div style='page-break-after: always;'></div>"); 
```

This will select the tr elements in `.poDetails` that have an index greater than 13, wrap them in a table, and move them to be after `table.poDetails`.

Then it inserts your page break div between the two tables.

When you pass in a jQuery object(s) that have been selected, the `.after` method will move them instead of cloning or creating it. (Also true for `.insertAfter`, `.before`, and `.insertBefore`.)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:45:54.263

这是修改后的指令

```
var your_data = 'what ever you want to put';
$(".poDetails tr").eq(14).after(your_data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T01:09:39.513

问题是您只是在代码中交换了表格的开始和结束标记。我一生中从未接触过 jQuery 来回答这个问题，只是说在指责 API 和库做你意想不到的事情之前，你应该更加注意自己的代码正确性；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T01:23:44.057

您遇到的问题是使用`$('...')`带有 html 元素的格式实际上**会创建**元素。因此，使用您拥有的代码，它会尝试创建您指定的所有元素 - 这**与**尝试将原始 html 注入文档不同！

您想要做`.html('</table><div style="page-break-after: always;"></div><table>')`的是让 jQuery 按原样插入您指定的 html，而不以任何方式解释它。

# sql-server - 找不到freeTDS版本

> ID：10116102
> 
> 赞同：0
> 
> 时间：2012-04-12T01:04:38.507
> 
> 标签：sql-server, pyodbc, freetds

我正在尝试专门查找 freeTDS 0.82 版，但没有成功。我去[这个网站](http://www.freetds.org/news.html) ，它给了我[这个链接](http://ibiblio.org/pub/Linux/ALPHA/freetds/stable/freetds-stable.tgz)。但是当我下载文件并解压缩它时 - 显示版本 0.91。我正在专门寻找版本。 82.有谁知道在哪里可以找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:12:37.283

[从这里](http://ibiblio.org/pub/Linux/ALPHA/freetds/old/0.82/)挑选。

# facebook - Facebook C# SDK 好友列表 orderby name

> ID：10116108
> 
> 赞同：2
> 
> 时间：2012-04-12T01:05:15.043
> 
> 标签：facebook, facebook-graph-api, facebook-c#-sdk

我想按姓氏对 Facebook C# SDK 返回的 Facebook 好友列表进行排序。使用 LINQ 是我能够完成此任务的最简单方法，但我想知道是否有更简单或更有效的方法？我想我至少会分享这个，因为我找不到任何其他的例子。

```
var client = new FacebookClient(FBToken.Value);
dynamic results = client.Get("me/friends?fields=id,name,picture");

var fbfsort = from dynamic friend in (IList<object>)results["data"] orderby friend.name ascending select friend;
foreach (var f in fbfsort) {
    //do something here...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T02:48:33.423

您可以像这样使用[FQL](http://developers.facebook.com/docs/reference/fql/ "这里")：

```
var client = new FacebookClient(FBToken.Value);
dynamic result = client.Get("fql", new
{
    q = "SELECT uid, name, pic_small from user where uid in (select uid2 from friend where uid1=me()) order by name"
});

foreach (var item in result.data)
{
    // do something here...
} 
```

希望能帮助到你！

# primes - 图灵机接受素数长度的字符串

> ID：10116111
> 
> 赞同：4
> 
> 时间：2012-04-12T01:05:44.037
> 
> 标签：primes, turing-machines, primality-test

我有一个作业问题，要求我描述一个接受`L = {a^n: n is prime}`. 我不知道该怎么做。我知道吗？我是否使用`a`s 作为一元数字并计算它们？我可以忽略字符串，只测试 n 的主要部分吗？或者是已知的素数，因此只有那些单元格位置是接受状态，我可以像正常一样读取数据？

我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T19:08:29.047

首先，您可以在某处使用内存位置来标记字符串是否被发现为素数长度，然后或多或少地按照 Ness 的建议进行操作（尽管我并不完全理解他的答案）。

使用埃拉托色尼筛。从一个长度为 2 的辅助字符串开始，在输入字符串和辅助字符串中向右移动一个，当你碰到辅助字符串的结束字符时返回辅助字符串的开头，直到你击中输入的结束字符细绳。通过这种方式，您可以查看辅助字符串是否划分了输入字符串。然后转到长度为 3 的辅助字符串并执行相同操作，依此类推。只有当没有任何辅助字符串长度除以输入字符串长度时才是输入字符串长度素数。如果一个辅助字符串长度确实除以输入字符串长度，请使用您的标志内存插槽来显示这一点。并让算法检查标志内存槽，如果它被标记，则中止所有处理，以便可以拒绝字符串。

现在，在迭代输入时的任何时候都允许非确定性地跳出内部循环，以便机器可以开始测试下一个长度的辅助字符串。这样，从某种意义上说，所有长度的辅助字符串都将被同时测试，但是当您的标志槽被标记时，它们都会停止处理并拒绝该字符串。

最后一个问题。*字符串可能在被发现之前*被接受（尽管时间在这里不是一个概念）它们被发现是非质数。如果你能解决这个问题，你就比我领先一步。

PS Drineas 是邪恶的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T12:03:21.783

您可以在磁带上将实际无限的 Eratosthenes 筛放在起点的左侧。

非确定性允许您为每个状态拥有多个转换规则。因此，当以 为增量向左移动时`n`，您可以在每个点**a.** 继续向左标记磁带，增量为`n`; 或**b。**从原点重新开始，下一个`n`。

然后让你的起始状态有两条规则（也许在检查你在磁带上得到的所有`a`东西都只有 s 之后）**：**开始标记 2 的倍数，然后**b。**（现在假设筛子已经到位）计算你`a`的 s 并使用原点左侧标记的素数来决定是否接受。

因此，您的初始磁带`........aaaaaaa.........`最终会变成类似`.c.ccccc.ccc.c.ccc.c.ccc[p]cpcpp.OaaaaaaaA...x.y.z...`（`[]`在磁带上标记最终磁头位置）。

# git - 在 Debian Lenny 服务器上安装 Git

> ID：10116113
> 
> 赞同：13
> 
> 时间：2012-04-12T01:06:05.553
> 
> 标签：git, debian, lenny

*如果世界上某个地方已经有这个问题的答案，请提前抱歉，但我已经花了 3 个小时试图在我的 PRODUCTION 服务器中安装它，但我什么也没有。*

**我的需求：**

* * *

我想在我的服务器上运行 git 命令（例如：推送、提交等）。为了做到这一点，我需要“git”命令（duh！）。

**我尝试了什么：**

* * *

试图遵循这个： http: [//oli.zilla.org.uk/2010/12/07/installing-git-on-debian-lenny.html](http://oli.zilla.org.uk/2010/12/07/installing-git-on-debian-lenny.html)

还有这个：[初学者的Git：权威的实用指南](https://stackoverflow.com/questions/315911/git-for-beginners-the-definitive-practical-guide#323764)

还有这个：[安装 Rails 插件需要 Git？](https://stackoverflow.com/questions/1414454/installing-rails-plugin-requires-git)

尝试下载源代码（[http://packages.debian.org/lenny/i386/git-core/download），.deb](http://packages.debian.org/lenny/i386/git-core/download)文件（[http://ftp.de.debian.org/debian/pool/main/ g/git/](http://ftp.de.debian.org/debian/pool/main/g/git/) )

**问题：**

* * *

尝试获取源时出现 404：[http ://packages.debian.org/lenny/i386/git-core/download](http://packages.debian.org/lenny/i386/git-core/download)

下载软件包时，我尝试使用的所有存储库都给了我 404

需要将 libc6 从 2.7 更新到 2.9 才能安装 git-1.7.9，如下所示：

```
stewie:/tmp# dpkg -i git_1.7.9-1~bpo60+1_i386.deb 
Selecting previously deselected package git.
(Reading database ... 20477 files and directories currently installed.)
Unpacking git (from git_1.7.9-1~bpo60+1_i386.deb) ...
dpkg: dependency problems prevent configuration of git:
 git depends on libc6 (>= 2.9); however:
  Version of libc6 on system is 2.7-18lenny7.
 git depends on libcurl3-gnutls (>= 7.16.2-1); however:
  Package libcurl3-gnutls is not installed.
 git depends on libexpat1 (>= 1.95.8); however:
  Package libexpat1 is not installed.
 git depends on liberror-perl; however:
  Package liberror-perl is not installed.
 git depends on git-man (>> 1:1.7.9); however:
  Package git-man is not installed.
 git depends on git-man (<< 1:1.7.9-.); however:
  Package git-man is not installed.
dpkg: error processing git (--install):
 dependency problems - leaving unconfigured
Errors were encountered while processing:
 git 
```

但找不到 Debian lenny 的 2.9

* * *

**最后一个问题：**

**如何在我的 Debian 5 (lenny) 上安装 git？**

* * *

**尝试**

尝试了@sarnold 解决方案，但是（更多 404）：http: [//justpaste.it/w5s](http://justpaste.it/w5s)

* * *

* * *

**解决方案：**

使用@sarnold 的评论（在他自己的回答中）！

> 啊。莱尼已从镜子中移除。你需要编辑你的sources.list 来使用archive.debian.org——你所有的包行，而不仅仅是这个新的。请考虑将此系统升级到受支持的版本。

如何：

编辑以下内容`/etc/apt/sources.list`：

```
nano /etc/apt/sources.list 
```

添加以下内容：

```
deb http://archive.debian.org/debian/ lenny main non-free contrib
deb-src http://archive.debian.org/debian/ lenny main non-free contrib

deb http://archive.debian.org/debian-security/ lenny/updates main non-free contrib
deb-src http://archive.debian.org/debian-security/ lenny/updates main non-free contrib 
```

更新 apt-get 缓存：

```
apt-get update 
```

安装 git：

```
apt-get install git-core 
```

完毕！:)

*后期编辑：*

出于某种原因，Deutsch 镜像似乎仍然有效。只需添加

```
deb http://ftp.de.debian.org/debian-archive/debian/ lenny main
deb-src http://ftp.de.debian.org/debian-archive/debian/ lenny main 
```

到您的sources.list 并尝试获取包。

或者，当然，尝试 Debian 反向移植：

```
deb http://backports.debian.org/debian-backports squeeze-backports main 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T01:16:39.463

1.  安装 debian backports 存储库（除非您明确要求它不会从那里更新）：

    ```
    # echo 'deb http://backports.debian.org/debian-backports lenny-backports main'\
           >> /etc/apt/sources.list 
    ```

2.  安装 git：

    ```
    apt-get -t lenny-backports install git-core 
    ```

其中`-t lenny-backports`明确告诉它在反向端口中查找 git。

看到[这个](http://backports-master.debian.org/Instructions/)网站。

此外，上述说明经过编辑，实际上取自挤压反向端口的说明，尽管我相信它们有效。我不知道这是否是生产服务器上的一个选项，但我猜 Debian 不再为 lenny 提供太多支持，根据[这个](http://backports-master.debian.org/news/lenny_backports_discontinued/)：

> lenny backports 已停止
> 
> 遵循正常的 Debian 存档 lenny-backports 现在已停止。这意味着无法再上传，并且 lenny-backports(-sloppy) 被移至 archive.debian.org。如果您还没有更新 - 现在是时候开始挤压了。
> 
> 关于 lenny-backports 和 lenny-backports-sloppy 的一些数字：
> 
> ```
> Source packages: lenny-backports: 667 - sloppy: 21
> Uploads: lenny-backports: 1445 - sloppy: 51
> Contributors: lenny-backports: 146 - sloppy: 17 
> ```
> 
> 如果没有所有这些贡献者，lenny-backports 是不可能的。非常感谢您的支持！2012 年 3 月 25 日星期日 09:07:14 发布

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T01:20:44.630

因为[不再支持 Lenny](http://en.wikipedia.org/wiki/Debian#Release_history)，我强烈建议将此机器（或服务）迁移到更新的版本。至少，严格地为这台机器设置防火墙，并且只允许最信任的用户访问它——如果没有安全更新，新发现的远程攻击或本地权限升级可能会给你带来比升级更多的麻烦。

也就是说，[backports 项目](http://backports-master.debian.org/)为旧系统提供了更新版本的包。您可以[将所需的`deb`行添加到您的`apt` `sources.list`文件中](http://backports-master.debian.org/Instructions/)——我猜它看起来像这样：

```
deb http://backports.debian.org/debian-backports lenny-backports main 
```

然后运行

```
apt-get update
apt-get -u -t lenny-backports install git-all 
```

（我从[packages.debian.org 查找](http://packages.debian.org/lenny-backports/git-all)`git-all`中获取包名，这表明它适用于.）`lenny-backports`

封装到该版本的`-t` *引脚。*这不是你每天都会使用的东西，但一旦你需要它，它就值得藏红花的重量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-24T11:55:12.103

为我工作（git clone https:// ... 会因 tls 错误而失败）：

*   从源代码手动编译并重新安装更新的 libcurl3-gnutls 和 git

Debian 莱尼 ; 标准版本 libcurl3-gnutls 7.18.2-8lenny6 在代理后面存在 http/https 错误。

**第一个：libcurl3-gnutls：**

*   # wget [http://ftp.de.debian.org/debian/pool/main/c/curl/curl_7.21.0.orig.tar.gz](http://ftp.de.debian.org/debian/pool/main/c/curl/curl_7.21.0.orig.tar.gz)
*   # tar zxvf curl_7.21.0.orig.tar.gz
*   # cd curl-7.21.0/
*   # ./配置制作
*   # 进行安装

**然后：混帐：**

*   如果需要：删除以前的 git：# apt-get remove --purge git git-core
*   # wget .......... git-1.9.0.tar.gz
*   # tar -zxf git-1.9.0.tar.gz
*   # cd git-1.9.0
*   # 制作前缀=/usr/local 安装

**刷新 bash 缓存（如果需要）**

*   $ 输入 git
*   $哈希-r

**和...测试：**

*   $ git ls-remote --heads https:// [github] /jeromerobert/jCAE.git
*   $ git clone https:// [github] ... flask-sphinx-themes.git

希望能帮助到你。

卡瓦利巴。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-20T18:28:48.777

## 我的解决方案：

*   编辑/etc/apt/sources.list：

    ```
    deb http://archive.debian.org/debian            lenny            main non-free contrib
    deb http://archive.debian.org/debian-security   lenny/updates    main non-free contrib
    deb http://archive.debian.org/debian-backports  lenny-backports  main 
    ```

*   apt-get 更新

*   apt-get install -t lenny-backports git-core --no-install-recommends

# java - RMI java.lang.ClassNotFoundException： （无安全管理器：禁用 RMI 类加载器）

> ID：10116114
> 
> 赞同：2
> 
> 时间：2012-04-12T01:06:07.983
> 
> 标签：java, rmi, unmarshalling

当我在客户端代码 java.rmi.UnmarshalException: error unmarshalling return; 中调用服务时，我得到了这个异常。嵌套异常是：java.lang.ClassNotFoundException: serverur.InterfaceServices（没有安全管理器：RMI 类加载器已禁用）代码是：

```
try
{
   InterfaceServices servi=(InterfaceServices) Naming.lookup ("rmi://127.0.0.1/serv");
   p=  servi.verif(data);
}
catch(Exception ee)
{
  System.out.println("RMI CLIENT PROBLEM +"+ ee.toString());
} 
```

# prolog - 序言事实和变量

> ID：10116117
> 
> 赞同：1
> 
> 时间：2012-04-12T01:06:27.533
> 
> 标签：prolog, puzzle

我只是想知道我将如何制作一个事实，例如

```
family(original, [dad/1, mom/2, child/5, granny/10]). 
```

其中`original`将是家庭的名称，列表由标题和速度组成。

如何将数字与标题（例如`dad/1`）分开，所以我可以这样做：

```
time_needed(dad,1).
time_needed(mom,2).
time_needed(child,5).
time_needed(granny,10). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T06:49:41.893

你在你的例子中写的很好。您可以与任何声明为中缀二元运算符的分隔符配对。这包括`/`, `+`, `,`,`-`等等......然后由于统一，您可以通过这种方式进行模式匹配：

```
test :-
    family(X, [Title/Speed|_]),
    time_needed(Title, Speed). 
```

在这里，我只匹配第一个元素的模式，但你可以看到这个想法。

不过，请注意，通常`-`使用它来代替`/`分隔对。特别是，如果您使用 SWI，则该[`pairs`](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.18%27,swi%28%27/doc/Manual/pairs.html%27%29%29)库使用`Key-Value`语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T08:22:43.310

您需要断言列表的元素。请注意，这样您会丢失`original`密钥。

```
:- dynamic time_needed/2.
assert_family(Key) :-
  family(Key, List),
  assert_list(List).

assert_list([]).
assert_list([N/V|Es]) :-
  assertz(time_needed(N, V)),
  assert_list(Es). 
```

你打电话给`assert_family(original).`

如果您的 Prolog 有 forall/2（或 maplist/2 + library(lambda)），则代码可能更紧凑：

```
:- dynamic time_needed/2.
assert_family(Key) :-
  family(Key, List),
  forall(member(N/V, List),
         assertz(time_needed(N, V))). 
```

即递归循环现在它在forall/2 中'内联'。但是那个库谓词隐藏在句法简单的后面一些奇怪的行为......使用更简单的递归循环。

# ios - NSManagedObejct 中的自定义查询方法

> ID：10116118
> 
> 赞同：0
> 
> 时间：2012-04-12T01:06:51.773
> 
> 标签：ios, iphone, core-data, nsmanagedobject

有没有办法在 NSManagedObject 的子类中添加自定义查询方法？

我有一个名为 User 的域模型和一个名为 Message 的域模型。我已对其进行设置，以便用户与消息具有多对多关系。所以在我的应用程序中，当我这样做时

```
[userInstance messages]; 
```

它返回给我一个属于该用户的消息的 NSSet，这是完美的。但是消息域模型也有一个“活动”字段，它是一个布尔值。

我想在域模型上创建一个新方法，上面写着

```
- (NSSet *)activeMessages 
```

显然，这是一种只返回 active = true 消息的方法。我知道我能做到

```
[userInstance messages]; 
```

然后只需循环并删除所有活动= false的，但这似乎有点低效。获取所有内容然后过滤似乎是一种浪费。我宁愿在查询中过滤掉它。

我能想到的唯一其他方法是以某种方式在域模型中获取 NSManagedObjectContext 以手动执行查询。

这是最好的方法吗？或者还有什么我可以做的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T03:52:15.113

是的，您可以尝试像这样使用 NSFetchRequest：

```
- (NSSet *)activeMessages inManagedContext:(NSManagedObjectContext *)context
{
    NSFetchRequest *request = [[NSFetchRequest alloc]init];
    request.entity = [NSEntityDescription entityForName:@"Messages" inManagedObjectContext:context];
    request.predicate = [NSPredicate predicateWithFormat:@"user = %@ AND active = %@",self,YES];

    NSError *error = nil;
    NSArray *activeMessages = [context executeFetchRequest:request error:&error];

    return activeMessages;

} 
```

# python - 将 json 数据编码为 x-www-form-urlencoded

> ID：10116120
> 
> 赞同：0
> 
> 时间：2012-04-12T01:07:04.863
> 
> 标签：python, curl, urlencode

我正在尝试发布`curl`一些数据。源数据采用 JSON 格式，但我想使用 content-type 发布`application/x-www-form-urlencoded`。我正在尝试这样做：

```
curl -X POST $URL --data-urlencode "@$data.json" --header "Content-Type: application/x-www-form-urlencoded" 
```

这是数据.json：

```
{
  "action"      : "deploy_from_scratch_with_bundle",
  "pusher"      : { "email" : "my@email.com" },
  "ref"         : "refs/heads/master",
  "repo_choice" : "LOCAL"
} 
```

但这不起作用：`urlparse.parse_qs`（python）抱怨 ValueError。

接收到的数据（在 parse_qs 之前）是：

```
%7B%0A%20%20%22action%22%20%20%20%20%20%20%3A%20%22deploy%5Ffrom%5Fscratch%5Fwith%5Fbundle%22%2C%0A%20%20%22pusher%22%20%20%20%20%20%20%3A%20%7B%20%22email%22%20%3A%20%22my%40email%2Ecom%22%20%7D%2C%0A%20%20%22ref%22%20%20%20%20%20%20%20%20%20%3A%20%22refs%2Fheads%2Fmaster%22%2C%0A%20%20%22repo%5Fchoice%22%20%3A%20%22LOCAL%22%0A%7D%0A 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T01:51:10.777

您应该使用 urllib2 中的 unquote 来取消引用该数据：

```
In [10]: urllib2.unquote("%7B%0A%20%20%22action%22%20%20%20%20%20%20%3A%20%22deploy%5Ffrom%5Fscratch%5Fwith%5Fbundle%22%2C%0A%20%20%22pusher%22%20%20%20%20%20%20%3A%20%7B%20%22email%22%20%3A%20%22my%40email%2Ecom%22%20%7D%2C%0A%20%20%22ref%22%20%20%20%20%20%20%20%20%20%3A%20%22refs%2Fheads%2Fmaster%22%2C%0A%20%20%22repo%5Fchoice%22%20%3A%20%22LOCAL%22%0A%7D%0A")
Out[10]: '{\n  "action"      : "deploy_from_scratch_with_bundle",\n  "pusher"      : { "email" : "my@email.com" },\n  "ref"         : "refs/heads/master",\n  "repo_choice" : "LOCAL"\n}\n' 
```

# javascript - 删除任何琐碎的语句后 JavaScript 崩溃

> ID：10116122
> 
> 赞同：0
> 
> 时间：2012-04-12T01:07:42.930
> 
> 标签：javascript

我正在开发一个简短的 JavaScript 程序，只有当我在特定位置注入任何琐碎的语句（例如 var asd;）时，它才能完美运行。该程序旨在演示一种简单的封装技术。

没有其他位置工作。任何琐碎的陈述都有效。这不是 DOM 加载问题，因为我什至不处理 DOM。

有效的版本：（警告，3 个警报） [http://jsfiddle.net/bZUm6/3/](http://jsfiddle.net/bZUm6/3/)

不工作的版本：http: [//jsfiddle.net/bZUm6/2/](http://jsfiddle.net/bZUm6/2/)

请注意“var asd;” 在第一个版本中。

有人可以告诉我为什么吗？我真的很感激。

最大限度

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T01:10:19.783

破坏它的是分号删除。

即使你改变它也会起作用......

```
var asd; 
```

简单到这个……

```
; 
```

原因是下一行代码以 开头`(`，恰好是用它的结尾包装了一个函数`)`。

这被解释为函数调用运算符，并试图调用前一个表达式。

```
 MyApp.util.toXML = function(options, obj) {
        // your code

        return result.join("");
    }

//    var asd;   // removing the semicolon

//  |------seen as invoking the result of the previous expression and passing
//  v         the function as an argument. 
    (function(toXML) {

        // your code

    })(MyApp.util.toXML);
//     ^---------------^ This is then attempting to invoke the return value
//     of "toXML", which if it successfully returned, returned a String, which 
//     can't be invoked. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T01:11:57.407

当你这样做

```
MyApp.util.toXML = function(options, obj) {
}

(function(){
}()); 
```

你实际上是在调用函数

```
MyApp.util.toXML = function(options, obj) {
}( function(){}()) ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T01:12:17.000

您忘记`;`了函数定义之后

```
MyApp.util.toXML = function() {
 // code
}; // this semicolon 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T01:13:21.417

你忘了分号，就是这样。请参阅[http://jsfiddle.net/bZUm6/6/](http://jsfiddle.net/bZUm6/6/)（工作）。

函数分配后，永远不要忘记`;`！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T01:15:15.460

[http://jsfiddle.net/bZUm6/8/](http://jsfiddle.net/bZUm6/8/)

您在函数后缺少分号。我想如果您不结束该语句，它会评估为其他内容。

# javascript - 在对 FB.api 进行异步调用时保持变量值

> ID：10116124
> 
> 赞同：0
> 
> 时间：2012-04-12T01:08:06.437
> 
> 标签：javascript, facebook-graph-api, asynchronous

我正在尝试使用以下 JavaScript 函数获取用户的专辑，第一次调用获取专辑列表，并在专辑中迭代时获取他们的封面图片：

```
function GetAlbums() {
    FB.api('/me/albums', function(resp) {
        var ul = document.getElementById('albums');
        for (var i=0, l=resp.data.length; i<l; i++) {
            var album = resp.data[i];
            FB.api('/'+album.cover_photo, function(resp1) {
                li = document.createElement('li'),
                a = document.createElement('a');
                a.innerHTML = "<img src='"+resp1.picture+"'/>"+album.name;
                a.href = album.link;
                li.appendChild(a);
                ul.appendChild(li);
                });
        }
    });
}; 
```

我不知道为什么，但是封面图片可以获取，但专辑名称总是相同。内部 FB.api 调用可能是异步的。在它完成专辑迭代之前，它会转到最后一个元素。如何更正代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:17:29.563

您的问题与 Javascript 闭包有关。

最里面的函数被触发 N 次，但调用在`GetAlbums`完成后执行，并且`album`变量等于最后一张专辑，**在 N 次执行中的每**一次。

一个快速的解决方法是移动`FB.api('/'+album.cover_photo...`到一个单独的函数中：

```
function getAlbum(album) {
        FB.api('/'+album.cover_photo, function(resp1) {
            li = document.createElement('li'),
            a = document.createElement('a');
            a.innerHTML = "<img src='"+resp1.picture+"'/>"+album.name;
            a.href = album.link;
            li.appendChild(a);
            ul.appendChild(li);
            });
}

function GetAlbums() {
    FB.api('/me/albums', function(resp) {
        var ul = document.getElementById('albums');
        for (var i=0, l=resp.data.length; i<l; i++) {
            getAlbum(resp.data[i]);
        }
    });
}; 
```

to 的参数`getAlbum`现在可用于内部函数，并且不会改变。

# c++ - unordered_multimap 使用和运算符覆盖

> ID：10116128
> 
> 赞同：0
> 
> 时间：2012-04-12T01:08:29.363
> 
> 标签：c++, implementation, unordered-map

我需要[`unordered_multimap`](http://www.cplusplus.com/reference/stl/unordered_multiset/)为我的 Note 对象使用 an，键将是`measureNumber`我的对象的成员。我正在尝试[按照此处所示](https://stackoverflow.com/a/10098838/393964)的方式实现它，但我被卡住了。

首先，我不明白为什么我必须先覆盖`operator==`它才能使用它。我也对为什么需要哈希以及如何实现它感到困惑。[在这个例子](https://stackoverflow.com/questions/9046922/c-unordered-multimap)中，这两件事都没有完成。

所以基于第一个例子，这就是我所拥有的：

```
class Note {
private:
    int measureNumber;
public:
    inline bool operator== (const Note &noteOne, const Note &noteTwo);
}

inline bool Note::operator ==(const Note& noteOne, const Note& noteTwo){
    return noteOne.measureNumber == noteTwo.measureNumber;
} 
```

我不知道如何实现哈希部分。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T01:16:19.153

`std::multimap`基于排序二叉树，它使用小于运算对节点进行排序。

`std::unordered_multimap`基于哈希表，它使用哈希和相等操作来组织节点而不对它们进行排序。

排序或散列基于键值。如果对象是键，那么您需要定义这些操作。如果键是预定义类型，例如`int`or `string`，那么您无需担心。

您的伪代码的问题`measureNumber`是私有的，因此用户`Note`无法轻松指定地图的密钥。我建议`measureNumber`公开或重新考虑设计。（小节数真的是一个很好的关键值吗？我猜这是乐谱。）

```
std::multimap< int, Note > notes;
Note myNote( e_sharp, /* octave */ 3, /* measure */ 5 );
notes.insert( std::make_pair( myNote.measureNumber, myNote ) ); 
```

如果使用or ，对象可以同时是键*和*值，在这种情况下，您需要定义运算符重载（可能还有哈希）。如果(or ) 是成员函数，则左侧变为唯一参数，右侧变为唯一参数。通常这些功能应该是非会员朋友。那么你会有`std::multiset``std::unordered_multiset``operator==``operator<``this`

```
class Note {
private:
    int measureNumber;
public:
    friend bool operator< (const Note &noteOne, const Note &noteTwo);
}

inline bool operator <(const Note& noteOne, const Note& noteTwo){
    return noteOne.measureNumber < noteTwo.measureNumber;
} 
```

此类可以与`std::multiset`. 要执行基本查找，您可以构造一个具有未初始化值的虚拟对象，除了`measureNumber`- 这仅适用于简单对象类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T03:11:50.533

> 我需要为我的 Note 对象使用 unordered_multimap，键将是我的对象的 measureNumber 成员。

好的 - 我不确定你是在追求`multiset`, `unordered_multiset`, `multimap`, 还是`unordered_multimap`. 我知道您的标题指的是`unordered_multimap`，但您提供的链接指向`unordered_multiset`. 在选择容器时应该考虑很多因素，但是在没有分析的情况下事后猜测哪个性能最好是有风险的。

> 我不明白为什么我必须先覆盖 operator== 才能使用它。我也对为什么需要哈希以及如何实现它感到困惑。在这个例子中，这两件事都没有完成。

您需要`operator==`and`std::hash`因为它们在内部被`unordered_multimap`and使用`unordered_multiset`。在您链接到的示例中，键的类型为`int`，因此`operator==`和`std::hash<int>`已经定义。如果选择`Note`用作键，则必须自己定义这些。

`multiset`如果您不需要经常更改元素，我建议您从 a 开始。如果您*确实*希望能够在`Note`不删除和插入的情况下更改 s，我建议您将`measureNumber`其作为成员删除`Note`并使用`multimap<int, Note>`.

如果您觉得`unordered_`您的容器版本更适合您的需求，您仍然可以选择`set`vs。`map`如果您选择`unordered_multimap<int, Note>`（已从 中删除`measureNumber`）`Note`，那么与您的链接示例一样，键是`int`。因此，您不必为此定义任何特殊的东西。如果您选择保留`measureNumber`并`Note`使用`unordered_multiset<Note>`，那么`Note`是关键，因此您需要做进一步的工作，例如

```
#include <functional>
#include <unordered_set>

class Note;  // Forward declaration to allow specialisation of std::hash<>

namespace std {
template<>
class hash<Note> {
public:
    size_t operator()(const Note &) const;  // declaration of operator() to
                                            // allow befriending by Note
};
}

class Note {
private:
    int measureNumber;
public:
    // functions befriended to allow access to measureNumber
    friend bool operator== (const Note &, const Note &);
    friend std::size_t std::hash<Note>::operator()(const Note &) const;
};

inline bool operator== (const Note &noteOne, const Note &noteTwo) {
    return noteOne.measureNumber == noteTwo.measureNumber;
}

std::size_t std::hash<Note>::operator()(const Note &note) const {
    return std::hash<int>()(note.measureNumber);
} 
```

这使您可以创建和使用`std::unordered_multiset<Note>`. 但是，我不确定这*是否*真的是您需要的；您甚至可以发现 sorted`std::vector<Note>`最适合您。关于如何使用容器以及分析的进一步研究和思考应该会给出最好的答案。

# mongodb - mongo查询获取嵌入文档

> ID：10116129
> 
> 赞同：3
> 
> 时间：2012-04-12T01:08:33.340
> 
> 标签：mongodb

基于此：

```
db.room.save({name:'public',msg:[{to:'Jo',msg:'whats up'},{to:'Jo',msg:'dude?'}]})
db.room.find()
> { "_id" : ObjectId("4f86282a87850ac4bfe9a664"), "name" : "public", "msg" : [ { "to" : "Jo", "msg" : "whats up" }, { "to" : "Jo", "msg" : "dude?" } ] } 
```

我想得到以下结果：

```
db.room.find(????)
> {"name" : "public", "to" : "Jo", "msg" : "whats up"}
> {"name" : "public", "to" : "Jo", "msg" : "dude?"} 
```

我应该使用什么查询来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:23:21.253

简短的回答是无法检索单个嵌入文档。仅返回顶级文档。

此功能有一个功能请求。“支持字段中的位置 ($) 运算符以返回说明符” - [https://jira.mongodb.org/browse/SERVER-828](https://jira.mongodb.org/browse/SERVER-828)

此功能请求计划用于 2.1.1 版本，但这可能会发生变化。

不久前在 Google Groups 上提出了一个类似的问题，“从 DBObjects 数组中检索 DBObject” - [http://groups.google.com/group/mongodb-user/browse_thread/thread/7d2c8919dd6c4dd8](http://groups.google.com/group/mongodb-user/browse_thread/thread/7d2c8919dd6c4dd8)问题出在 Java 驱动程序上具体来说，但答案仍然适用。

如果您想修改嵌入文档，您可以按照 Google Groups 回复中的说明进行操作。此外，新的聚合框架包含一个 $unwind 方法，您可能想尝试一下。如果您只想打印嵌入的文档，则必须通过您的应用程序来完成，或者考虑更改您的文档结构，以便您想要显示的文档是顶级的。

希望这可以帮助！

# python - zc.buildout 的更好的源代码和更新的文档？

> ID：10116130
> 
> 赞同：3
> 
> 时间：2012-04-12T01:08:36.563
> 
> 标签：python, django, buildout

我正在尝试在一个新的 Django 项目上使用 zc.buildout。我真的很喜欢这个工具背后的想法，当然也很欣赏这个工具所付出的努力。我对缺乏文档感到惊讶。我已经列出了我认为最好的关于增建或与增建密切相关的信息来源。关于 buildout .cfg 文件的语法和该工具的使用是否有更好和更新的资料？

[http://www.buildout.org/](http://www.buildout.org/)

[http://archlinux.me/dusty/2010/06/17/converting-a-django-project-for-zc-buildout/](http://archlinux.me/dusty/2010/06/17/converting-a-django-project-for-zc-buildout/)

[http://ircubic.net/2009/11/portable-django-project-with-buildout.html](http://ircubic.net/2009/11/portable-django-project-with-buildout.html)

[http://slacy.com/blog/2010/10/both-production-development-settings-using-zc-buildout-djangorecipe/](http://slacy.com/blog/2010/10/both-production-development-settings-using-zc-buildout-djangorecipe/)

[http://andre.engelbrechtonline.net/blog/2010/03/10/how-i-deploy-django-buildout/](http://andre.engelbrechtonline.net/blog/2010/03/10/how-i-deploy-django-buildout/)

[http://ontwik.com/python/django-deployment-workshop-by-jacob-kaplan-moss/](http://ontwik.com/python/django-deployment-workshop-by-jacob-kaplan-moss/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T03:56:01.877

经过几天的扩建后，我想我理解了它的工作原理。真的，关键是要了解 buildout 使用的配方比其他任何东西都多——直到我发布这个问题之后，我才真正意识到这一点。

# c++ - Visual Studio 2010，C++，vector.clear() 期间的“向量迭代器不兼容”

> ID：10116132
> 
> 赞同：1
> 
> 时间：2012-04-12T01:09:10.517
> 
> 标签：c++, visual-studio-2010, vector, visual-studio-debugging

由于一些疯狂，我被迫在全新安装的 Win7 Pro 上升级到 Microsoft Visual Studio 2010 Ultimate。我已将代码简化为结构的基本结构以及一般情况。我听说这可能是 VS2010 在他们的 STL 实现中的一个错误，如果是这样，我正在寻找解决方法。（编辑：我的原始代码在 Visual Studio 2008 中运行良好。）

这是头文件：

```
#include <iostream>
#include <vector>
using namespace std;

class ChildClass    //partition function for each
{
public:
    ChildClass();
    void Clear(void);
    vector<double> childrenvars;
    void PrintChildren(void);
    //long list of other variables
};
class ParentClass
{
    public:
    ChildClass variable;
    //other variables
    ParentClass();
    ~ParentClass();
}; 
```

这是源文件：

```
#include "source.h"

ChildClass::ChildClass()
{
    Clear();
}
void ChildClass::Clear(void)
{
    childrenvars.clear();
    return;
}
void ChildClass::PrintChildren(void)
{
    cout << endl;
    for(unsigned int i=0; i<childrenvars.size(); i++)
        cout << childrenvars[i] << " ";
}
ParentClass::ParentClass()
{
    this->~ParentClass();
}
ParentClass::~ParentClass()
{
    this->variable.childrenvars.clear();
}

int main(void)
{
    ParentClass* ParVar = new ParentClass[5];
    for(unsigned int numiter = 0; numiter < 3; numiter++)
    {
        for(unsigned int i=0; i<5; i++)
        {
            for(unsigned int j=0; j<i; j++)
                ParVar[i].variable.childrenvars.push_back(j);
            ParVar[i].variable.PrintChildren();
        }
        for(unsigned int i=0; i<5; i++)
            ParVar[i].variable.Clear();
    }
    delete [] ParVar;
    int wait;
    std::cin >> wait;
    return(0);
} 
```

在发行版中编译提供了可预测的功能：

```
(blank)
0
0 1
0 1 2
0 1 2 3

0
0 1
0 1 2
0 1 2 3

0
0 1
0 1 2
0 1 2 3 
```

在调试模式下编译给出：

```
(blank)
0
0 1
0 1 2
0 1 2 3

Debug Assertion Failed... vector iterators incompatible. 
```

它在第一次调用**.Clear()**函数时失败。即使将 clear for 循环更改为从 1,2 等开始，也会发生这种情况。错误似乎是由于 .clear() 调用 .erase(begin(), end()) 而导致的。当向量中没有任何东西并且它已经是空的时，它真的很讨厌它。有趣的是，当清除循环在擦除（const_iterator _First_arg，const_iterator_Last_arg）中从 2 开始时，这是我在 autos 下看到的内容。

_First_arg = 0，正如预期的那样。

_Last_arg = -2.53...e-098

这：

尺寸：2

容量：2

0：0.0000...

1：1.000....

第一个向量开始于：0x002648e8 最后一个向量开始于：0x002648f8（虽然我认为由于 end()，这实际上是最后一个向量之外的一个，这对于 8 字节双精度数是有意义的）。

除了转到预处理器定义并设置 _ITERATOR_DEBUG_LEVEL=0 以关闭这些“功能”（我实际上想知道我是否不小心搞砸了）之外，任何人都对实际原因是什么以及如何解决这个问题有任何想法? 虽然我确实有一些多余的清除，但我不认为这会是这个问题的根源。尤其是考虑到代码甚至从未到达析构函数。

提前致谢！

～丹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T06:39:00.583

```
ParentClass::ParentClass()
{
    this->~ParentClass();
} 
```

析构函数不是普通函数，它是特殊函数。如果你在一个对象上调用析构函数，它会被完全销毁，包括它的所有基类和成员。在这里，您将在`ParentClass`对象完全构造之前将其销毁。任何使用该对象的尝试都可能导致问题，例如您看到的错误消息所标记的问题。

如果你想在析构函数和另一个函数之间共享代码，你应该把代码放在一个单独的函数中，并从析构函数和另一个函数中调用它。在几乎所有应用程序代码中，您永远不需要显式调用析构函数。

`std::vector`默认情况下构造为空并在销毁时清理，因此`ChildClass`构造函数和`ParentClass`构造函数和析构函数在您的示例中都是多余的，可以省略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T03:29:49.643

不确定这里的意图是什么，但如果你删除`this->~ParentClass();`它就可以了。

# html - 如何获得一个穿过右上角的 CSS 三角形？

> ID：10116138
> 
> 赞同：0
> 
> 时间：2012-04-12T01:10:45.123
> 
> 标签：html, css, webkit

所以我想在我的页面上有一个三角形作为背景，但我想在没有任何图像的情况下这样做。我已经尝试在我的 :before 元素上使用`<aside>`，但由于我需要 jquery 访问权限，因此我将其替换为位于旁边的 div (.triangle)。在桌面上看起来还不错，虽然对角线边缘有点锯齿状。[下面的代码和这里](http://dl.dropbox.com/u/6272728/random/hard.jpg)的快照。

```
.triangle
{
    position: absolute;
    top: 0; right: 0;
    z-index: -1;
    width: 0; height: 0;
    border: solid transparent;
    border-top-color: #CDC7D2;
    border-left-color: #CDC7D2;
} 
```

我尝试使用“border-width: 3000px;”，但随后该元素开始占相当大的滚动（显然）。

接下来我尝试使用 CSS3 渐变并且效果很好，但是颜色停止过渡在我的手机（iPhone 4）上是模糊的而不是硬的，所以除非我在那里遗漏了一些东西，否则这也是一个死胡同。[下面的代码和这里](http://dl.dropbox.com/u/6272728/random/blurry.jpg)的快照。

```
body
{
    background-image: -webkit-linear-gradient(315deg, #CDC7D2 50%, #FFFFFF 50%);
    -webkit-background-size: 100% 100%;
    background-repeat: no-repeat;
    background-size: 100% 100%;
} 
```

使用相当大的图像很容易解决，但我想看看我在尝试编写代码时是否遗漏了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:33:49.180

您是否尝试过以下 JQuery[插件](http://jquery.malsup.com/corner/)

# java - 可以将异常存储在变量中以便稍后抛出吗？

> ID：10116140
> 
> 赞同：4
> 
> 时间：2012-04-12T01:10:58.003
> 
> 标签：java, exception, throw

我有一个方法被另一个类调用，该类对对象集合执行多个步骤。具体来说，我将文件列表从其原始位置复制到一个新文件夹。复制文件后，我使用与文件组相关的附加数据更新数据库。它看起来像这样：

```
public void copyFilesAndStore(File[] files, DataObject additionalData){
    for (File f in files){
        copyFileToDestination(f);
    }
    updateDatabase(additionalData);
} 
```

问题是，如果其中一个文件出现问题，则 copyFileToDestination(File f) 方法可能会引发各种 IOExceptions，但即使其中一个文件出现异常，我也想继续复制其余文件文件，并调用更新数据库。所以我可以做这样的事情：

```
public void copyFilesAndStore(File[] files, DataObject additionalData){
    for (File f in files){
        try {
            copyFileToDestination(f);
        } catch (IOException ex) {
            log(ex);
        }
    }
    updateDatabase(additionalData);
} 
```

但是，调用 copyFilesAndStore() 的类需要知道复制是否成功，但是如果我在此方法中捕获所有异常，它就不会知道它们。做下面这样的事情是否有意义，还是我错过了更好的解决方案？

```
public void copyFilesAndStore(File[] files, DataObject additionalData){

    IOException encounteredException = null;

    for (File f in files){
        try {
            copyFileToDestination(f);
        } catch (IOException ex) {
            log(ex);
            encounteredException = ex;
        }
    }

    updateDatabase(additionalData);

    if (encounteredException != null)
        throw(encounteredException);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T01:22:49.097

存储异常是非常安全的（不包括一些极端情况，例如 OutOfMemoryException 等），但是如果您想在循环中存储可能的异常，通常最好将它们全部存储：

```
public void copyFilesAndStore(File[] files, DataObject additionalData){ 

    List<IOException> encounteredExceptions = new LinkedList<IOException>(); 

    for (File f in files){ 
        try { 
            copyFileToDestination(f); 
        } catch (IOException ex) { 
            log(ex); 
            encounteredExceptions.add(ex); 
        } 
    } 

    updateDatabase(additionalData); 

    if (!encounteredExceptions.empty()) {
        throw(new DelayedException(encounteredExceptions)); 
    }
} 
```

您自己的自定义异常在哪里`DelayedException`可以存储其他异常的列表（有点像常规异常中的引起链）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T01:19:13.337

我认为抛出你自己的异常会更合适，列为`encounteredException`原因：

```
throw new CopyAndStoreFailedException(encounteredException); 
```

让您的异常类型能够跟踪多个`cause`异常甚至可能是有意义的：消费代码可能想知道哪些特定文件无法复制，以便它可以向用户指示问题或尝试恢复以某种方式解决问题。因此，您将自定义异常传递给整个列表`encounteredExceptions`，可以通过 getter 方法检索该列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T01:17:12.743

以后不要再扔它们，当然——无论如何，只有第一个会扔掉。我个人只是将有问题的文件名（可能还有一个友好的、特定的错误字符串）存储到一个列表中，然后再显示它们。例如。“文件 abc.txt 失败：未找到”

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-12T01:22:02.883

这很好，但你只是抛出最后一个捕获的异常。您可能希望存储所有有错误的文件，然后返回列表。

```
public void copyFilesAndStore(File[] files, DataObject additionalData){

    YourExceptionClass encounteredException = new YourExceptionClass();

    for (File f in files){
        try {
            copyFileToDestination(f);
        } catch (IOException ex) {
            log(ex);
            encounteredException.addFile(f);
        }
    }

    updateDatabase(additionalData);

    if (encounteredException.hasFiles)
        throw(encounteredException);
} 
```

# android - Fragment.onCreateView 有空容器

> ID：10116143
> 
> 赞同：11
> 
> 时间：2012-04-12T01:11:16.387
> 
> 标签：android, android-layout, android-fragments

以下是在 Android 1.6 上运行的，所以我将兼容性包用于片段。下面`TestFragment`是一个静态嵌套类：

```
public class FragmentTestActivity extends FragmentActivity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}

public static class TestFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        TextView result = new TextView(getActivity());
        result.setText("Hello TestFragment");
        return result;
    }
} 
```

}

main.xml 文件：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" android:layout_height="fill_parent">
<fragment class="com.test.FragmentTestActivity$TestFragment"
        android:id="@+id/test"
        android:layout_width="fill_parent" android:layout_height="fill_parent" />
</FrameLayout> 
```

奇怪的是里面的容器参数`onCreateView`是`null`.

现在，如果我像这样以编程方式添加片段（只需更改`onCreate`Activity 的方法），则容器不再为空。为什么？

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Fragment frag = new TestFragment();
    getSupportFragmentManager().beginTransaction().add(android.R.id.content, frag).commit();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T14:44:13.887

文档提到它可以为空：

> public View [onCreateView](http://developer.android.com/reference/android/app/Fragment.html#onCreateView(android.view.LayoutInflater%2C%20android.view.ViewGroup%2C%20android.os.Bundle)) (LayoutInflater inflater, ViewGroup 容器, Bundle savedInstanceState)
> 
> [...]
> 
> 容器：***如果非 null***，这是片段的 UI 应该附加到的父视图。***片段不应添加视图本身***，但这可用于生成视图的 LayoutParams。

需要明确的是：你不应该做任何类似`container.addView(...)`.

# ajax - 主干模型保存在 Chrome/FF 上触发错误回调

> ID：10116144
> 
> 赞同：1
> 
> 时间：2012-04-12T01:11:27.437
> 
> 标签：ajax, asp.net-mvc-3, backbone.js

这里的菜鸟问题：

我正在使用 ASP.NET MVC 3，并且正在尝试通过 Backbone 保存实体。这是我所拥有的：

我这样定义了我的主干模型（程序）：

```
var Program = Backbone.Model.extend({

    defaults: function () {
        return { name: "" };
    },

    initialize: function (attrs) {
        this.set('name', attrs.name);
    },

    urlRoot: '/program/add'

}); 
```

然后我将模型保存在按钮的单击事件上：

```
$('.add-program').click(function () {
    var programName = $('.program-name').val();
    var program = new Program({ name: programName });
    program.save(null, {
        success: function (model, response) {
            alert('success');
        },
        error: function (model, response) {
            alert('error');
        } 
    });
}); 
```

它适用于 IE（令人惊讶！） - ProgramController.Add(string name) 被调用得很好，我得到了成功响应。但是**我在 Chrome 和 FF 上遇到了问题——它们都触发了错误回调**，但在 Chrome 上我的控制器操作根本没有受到影响（尽管在 FF 上确实如此）。有趣的是，我的动作断点确实在 FF 上被击中，具有适当的参数值，但仍然得到错误回调。

我不确定这里发生了什么。我尝试通过 Firebug/Chromebug 进行调试，但在错误回调参数上看不到太多（errorStatus 只是......好吧......“错误”！）。我还尝试查看“网络”选项卡和 Fiddler，但没有看到任何响铃的东西（也许我看的地方不对）。我还尝试对控制器进行直接的 jquery ajax 调用，但仍然得到相同的奇怪行为。

以防万一，这是 MVC 操作（尽管我认为问题不在这里）：

```
[HttpPost]
public JsonResult Add(string name)
{
    var stubbedResponse = new {id = Guid.NewGuid()};
    return Json(stubbedResponse);
} 
```

有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T12:54:42.473

带有您的客户端代码的小提琴[http://jsfiddle.net/Uj5Ae/2](http://jsfiddle.net/Uj5Ae/2)似乎没问题。与您的服务器响应有关吗？或者 Backbone 和 Underscore 版本不匹配？
或者，如果事件传播未在其他地方处理，则可能在单击处理程序结束时返回 false。

剧透：那是事件传播:)

# javascript - JavaScript 重新加载页面脚本

> ID：10116145
> 
> 赞同：1
> 
> 时间：2012-04-12T01:11:34.330
> 
> 标签：javascript

```
<html>
    <head>
        <script type="text/javascript">
            function show_confirm(){
                var r=confirm("Hello or Goodbye?");
                if (r==true){
                    alert("Hello");
                    window.location.replace("http://www.google.com/");
                } else {
                    alert("Goodbye");
                }
            }
        </script>
    </head>
    <body>
        <input type="button" onclick="show_confirm()" value="Show a confirm box" />
    </body>
</html> 
```

我正在学习 JavaScript，并且正在使用 W3School 的 Tryit 编辑器，但这段代码并没有像我希望的那样工作。我希望它在有人点击“确定”两次后将我重定向到谷歌，但它似乎不起作用。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T01:17:58.813

问题是 Try-It Editor 使用的是 IFrame。当我在 Chrome 中尝试并打开我的开发者控制台时，我收到以下错误：

`Refused to display document because display forbidden by X-Frame-Options.`

这是因为您的代码*试图*做的是更改当前框架的位置，而不是整个页面。

您可以做以下三件事之一：

*   在 IFrame 之外尝试你的 HTML，然后你应该让它工作。
*   尝试使用`window.top.location.replace("http://www.google.com/");`而不是`window.location`
*   如果您必须使用 JavaScript 更改 iframe 的位置，则必须在框架*之外*执行此操作，或者确保它与父文档位于同一域内。（你会注意到`window.location.replace("http://www.w3schools.com")`效果很好。）

# winapi - 了解 OpenGL 样板

> ID：10116147
> 
> 赞同：0
> 
> 时间：2012-04-12T01:11:40.947
> 
> 标签：winapi, opengl

我刚刚开始使用 Nehe 上的教程学习 OpenGL，到目前为止我都在遵循它们。

理解所有设置代码的必要性有多大？本教程是使用 Win32 api 设置一个窗口，我想我理解了大约 50% 的代码。

了解所有系统调用和 OpenGL 样板初始化内容是否至关重要，还是我可以继续努力而不会迷失方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T03:01:36.137

这是一个主观问题，但我的观点（以及许多其他人的观点）是您不需要编写所有特定于平台的样板文件。

如果你使用其他库，如 GLUT 或 SDL，它会变得容易得多：让库担心设置窗口，然后你可以专注于学习 OpenGL。当然，除非您*想*学习 WinAPI，但您的优先级似乎在别处。

NeHe 教程有些过时了。我已经向人们指出[学习现代 3D 图形编程](http://www.arcsynthesis.org/gltut/)是一个很好的入门资源，但也有许多其他“现代”OpenGL 教程。它使用 GLUT。

# shell - 检查音乐/视频网址的命令行工具，我的浏览器连接到

> ID：10116152
> 
> 赞同：0
> 
> 时间：2012-04-12T01:12:23.367
> 
> 标签：shell, unix, network-programming, command

我知道，如何通过网络选项卡使用 Chrome 的检查器和 Firebug 进行检查，但我想知道是否可以使用 tcpdump/netstat/lsof 之类的东西来检查正在播放的流的 url？另外，是否有可能找出所有的下载网址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T03:41:29.330

Passing `-X` to `tcpdump` will cause it to dump some of each packet in ASCII form, but something smarter such as Wireshark (TShark) would be better.

# gwt - GWT ValueListBox、Renderer 和 ProvidesKey

> ID：10116154
> 
> 赞同：3
> 
> 时间：2012-04-12T01:12:50.807
> 
> 标签：gwt

如何在具有特定对象列表的编辑器中实现 GWT ValueListBox，我的代码：

```
...
@UiField(provided = true)
@Path("address.countryCode")
ValueListBox<Country> countries = new ValueListBox<Country>(
        new Renderer<Country>() {

            @Override
            public String render(Country object) {
                return object.getCountryName();
            }

            @Override
            public void render(Country object, Appendable appendable)
                    throws IOException {
                render(object);
            }
        },          
        new ProvidesKey<Country>() {
            @Override
            public Object getKey(Country item) {
                return item.getCountryCode();
            }

        });
... 
```

国家级

```
public class Country  {
    private String countryName;
    private String countryCode;
} 
```

但是，在 GWT 编译期间，我收到了这个错误：

```
Type mismatch: cannot convert from String to Country 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T09:18:56.843

问题是您正在尝试使用编辑器编辑`address.countryCode`（查看路径注释）`Country`。要完成这项工作，您应该更改路径`address.country`并执行`address.countryCode`after的分配`editorDriver.flash()`。就像是：

```
Address address = editorDriver.flush();
address.setCountryCode(address.getCountry().getCountryCode()); 
```

**为了支持这一点，Address 类应该将 Country 对象作为属性。**

您可能已经假设 ValueListBox 将像经典的那样工作`select`，其中键被分配给属性。这里分配了整个对象。所以在你的情况下`Country`对象不能被分配，`address.countryCode`反之亦然。

顺便提一句。您可以更正渲染器（如下面的代码）并将`null`对象作为*Renderer*和*Key Provider*中的参数处理。

```
new Renderer<Country>() {
...
            @Override
            public void render(Country object, Appendable appendable)
                    throws IOException {
                appendable.append(render(object));
            }
...
} 
```

# android - 将复选框值存储到数组列表

> ID：10116155
> 
> 赞同：0
> 
> 时间：2012-04-12T01:12:54.690
> 
> 标签：android, listview, checkbox

如何将选中复选框的值存储到数组列表中并将其显示在列表中。/ ..say Checkbox1 =“Apple”......到目前为止我有这个

```
public void onCheckedChanged(CompoundButton buttonView,boolean isChecked) {
    if (checkBox1.isChecked()) {
        //my problem is below here: I can't seem to add the value of it not the id and store it in list

        pubsList.add(pub3);
        pub3=Integer.toString(checkBox1.getSelectedItem());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T01:50:46.907

```
 For only one check box e.g.selectAll you can have this---

selectAll.setOnCheckedChangeListener(new OnCheckedChangeListener()
{
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
         {

           if ( isChecked )
              {
                Log.e(TAG, "Select all Checkbox enabled");
                String ad=(String) selectAll.getText();//get text of selectAll checkbox
                SelectionList.add(ad);//add above text to list of strings

               }
                      if(! isChecked)
                      {
                         //do something if required
                      }

                  }

              }); 
```

希望这会帮助你。

# visual-studio - 如何在不属于项目的发布包中包含文件

> ID：10116157
> 
> 赞同：0
> 
> 时间：2012-04-12T01:13:04.473
> 
> 标签：visual-studio, visual-studio-2010

我需要创建一个发布/安装包。VS 中有一个下拉框，可让我为项目创建发布版本。所以我点击了发布按钮并选择了 CD 选项。果然它发布了我需要的设置。我安装了应用程序一切都很好，虽然我不知道应用程序在目标机器上的哪个位置结束？？？问题是我的应用程序已经签署了 XML 文件，该文件存储了我的应用程序用来启用功能的公钥，具体取决于客户被许可做什么。我希望密钥文件成为已安装软件包的一部分，因此我不必单独发送它。我必须发送许可证文件，但我希望通过只要求用户只将许可证文件复制到本地目录来避免混淆。这带来了另一个问题是应用程序是否已安装我进行了搜索并没有找到我的应用程序名称？？？？但是星形菜单上有一个图标，应用程序似乎只运行文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T02:09:49.170

您可能将应用程序部署为“ClickOnce”应用程序。它将程序安装到用户文件夹中的混淆文件夹中。在 Windows 7 上，它会以类似“c:\users\username\AppData\Local\Apps\2.0\somefoldername\somefoldername”的形式出现。如果您需要对安装进行更多控制，VS2010 随附的免费 InstallSheild LE 是不错的选择。它还可以让您添加其他文件。

# css - 带有 CSS 的侧边栏

> ID：10116159
> 
> 赞同：0
> 
> 时间：2012-04-12T01:13:32.190
> 
> 标签：css

我正在尝试制作一个 CSS 侧边栏。默认情况下它应该是隐藏的，只有这个图像从右边出来（见下文）。一旦用户将鼠标悬停在此图像上，它就会出现并显示一个带有一些文本的小框。

侧边栏不应位于右上角，而应位于屏幕高度的一半。我已经可以在左侧执行此操作且无需动画（参见代码）。在我看来这是不可能的：我讨厌 CSS（！！！），我希望有人可以帮助我做到这一点。非常感谢您的耐心等待并原谅我的问题，但我是 CSS 的大菜鸟。

编辑： http: [//jsfiddle.net/WSZbe/1/](http://jsfiddle.net/WSZbe/1/)这是我迄今为止的尝试......

```
#side{
position:absolute;
  top:0;
  left:0;
  height:40px;
allign: center;
background-color: blue; 
```

![在此处输入图像描述](../Images/90f316928f8a51e0b4993cd895b90db4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:42:24.727

像这样的东西？我现在没有时间调整它，但如果那是你想要的，你应该明白...... [FIDDLE Link](http://jsfiddle.net/WSZbe/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T01:15:05.770

```
#side{
position:absolute;
  top:0;
  left:0;
  height:40px;
allign: center;
background-color: blue; 
}
#side:hover{
  position:absolute;
  top:0;
  left:200px;
  height:40px;
  allign: center;
  background-color: blue; 
} 
```

# html - 神秘的 .x 和 .y 表单域——它们从何而来？

> ID：10116163
> 
> 赞同：1
> 
> 时间：2012-04-12T01:14:29.903
> 
> 标签：html, forms

看一下[这个登录页面](https://www.drlaura.com/site/member/login/)，特别是标记为 Returning Members 的部分中的表单。正如您可以通过查看 HTML 或使用 Firebug 等工具进行挖掘来验证的那样，实际表单包含四个标签：一个用于电子邮件地址和密码，一个名为“memberAlready”的不可见输入，其中包含值“yes”，和一个图像形式的提交按钮。到目前为止，完全通用。

但是，如果您在提交表单时检查表单数据（使用[Tamper Data](https://addons.mozilla.org/en-US/firefox/addon/tamper-data/)或其他浏览器上的等效项，您将看到两个额外的表单字段已潜入响应中：ACTION(loginCheckout).x和 ACTION(loginCheckout).y。

它们都有两位整数值，这表明它们只是用来验证提交者是实际的网络浏览器而不是机器人。据推测，它们与提交按钮有关，其定义如下：

```
<input type="image" name="ACTION(loginCheckout)" value="Login" src="/images/login/login.gif"> 
```

令我困惑的是，**即使在浏览器中禁用了 JavaScript** ，这些额外的表单字段也会出现。因此，它们可能不仅仅是某个事件处理程序在某处插入的东西。

此外，如果您以编程方式提交表单（例如，通过在 JavaScript 控制台中运行 document.forms[1].submit()），**则不会**生成额外的字段并且登录尝试会失败。这向我表明，字段的插入取决于基本 HTML 表单提交机制之外的东西。但如果不是 JavaScript，那“东西”可能是什么，我不知道。

有没有人认识到这种模式或有关于如何插入验证字段的理论？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T01:22:47.290

看看您在此处发布的代码：

```
<input type="image" name="ACTION(loginCheckout)" value="Login" src="/images/login/login.gif"> 
```

请注意，这是一个用于提交登录表单的图像输入类型。提交时似乎注入的附加值只是您单击图像以提交表单的 x 和 y 坐标。它们不是 JavaScript 在表单提交时注入的附加值，它们是由浏览器本身添加的。

尝试单击图像的不同区域并查看值的变化。

当您使用 JavaScript 提交表单时，您不会单击图像，这就是表单提交中不包含 x 和 y 值的原因。

替换`<input type="submit" />`元素的图像将删除 x 和 y 坐标。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T01:21:07.960

您看到的 X 和 Y 值是因为提交按钮是输入类型=图像。它们对应于图像中单击图像时光标所在的 X 和 Y 位置。它们是由浏览器本身添加的，因为[HTML 规范](http://www.w3.org/TR/html401/interact/forms.html)需要它。第 17.4.1 节指出，对于图像输入类型

*当使用定点设备单击图像时，会提交表单并将单击坐标传递给服务器。x 值以图像左侧的像素为单位，y 值以图像顶部的像素为单位。提交的数据包括name.x=x-value和name.y=y-value，其中“name”是name属性的值，x-value和y-value分别是x和y坐标值。*

你会注意到它只提到了*指针设备*的使用。如果您使用键盘提交，则不会创建值。

# search - 如何使用 Sphinx 和 Sphinx PHP API 生成文档摘录？

> ID：10116165
> 
> 赞同：0
> 
> 时间：2012-04-12T01:15:02.040
> 
> 标签：search, sphinx

我正在尝试从索引文档的全文中生成搜索摘录。我正在使用狮身人面像 V2.02。我的 Sphinx 索引工作正常，常规结果也没有问题。

我正在从磁盘加载文档，所以我设置`load_files`为 TRUE。我已经尝试了文件的 Web 路径和直接的 Linux 文件路径。

这是我的摘录代码：

```
$options = array( 'load_files' => TRUE );
$docs = array( /files/0/123/123.txt );
$words = 'gears';
$excerpts = $sphinxclient->BuildExcerpts( $docs, 'files', $words, $options ); 
```

这是[用于生成摘录的 Sphinx 文档](http://sphinxsearch.com/docs/2.0.2/api-func-buildexcerpts.html)。

`BuildExcerpts`每次都返回 false，而不是返回摘录。发生了什么？我是否应该在常规查询的同时以某种方式执行此操作？我一直在执行`BuildExcerpts`从主查询返回的每个文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T02:20:07.827

上面 BuildExcertps 的代码是正确的。

问题是我的“文件”索引是分布式的，而 Sphinx`BuildExcerpts`调用不喜欢那样。似乎 BuildExcerpts 实际上只是引用该索引的配置，因此您必须引用实际索引之一，而不是 BuildExcerpts() 调用中的分布式索引。

例如：我将文件索引分为 5 个碎片、files_0、files_1 等。使用“files”作为索引会破坏 BuildExcerpts。使用 files_0 或我的任何分片都可以正常工作。

```
$options = array( 'load_files' => TRUE );
$docs = array( /files/0/123/123.txt );
$words = 'gears';
$excerpts = $sphinxclient->BuildExcerpts( $docs, 'files_0', $words, $options ); 
```

# javascript - 如何将函数绑定到通过 Ajax 加载的元素

> ID：10116170
> 
> 赞同：2
> 
> 时间：2012-04-12T01:15:31.057
> 
> 标签：javascript, jquery, html, ajax

我的页面中有几个带有 CSS class="hello" 的 Div 此外，我使用 Ajax 来获取更多带有 CSS class="hello" 的 Div 我有一段代码在 Div 的 Click 事件中调用为如下：

```
$('.hello').click(function(){
  alert("Hello Clicked");
}) 
```

它适用于从一开始就存在于我的页面中的 Div，但不适用于使用 Ajax 加载的 Div。为了将这段代码与新加载的 Div 绑定，我需要做些什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T01:16:45.143

您应该使用[`.on`](http://api.jquery.com/on/)将处理程序绑定到在绑定执行期间已经存在的另一个元素，例如 the`<body>`或 the`document`并让它检测子事件。但理想情况下，您应该将其绑定到最近加载的内容的公共父级。

[演示](http://jsfiddle.net/fWsY8/1/)

```
//bind to the body a "click" handler for elements that have class names of "hello"
$('body').on('click','.hello',function(){
  alert("Hello Clicked");
}) 
```

# c++ - 如果属性匹配，TinyXML2 查询文本

> ID：10116171
> 
> 赞同：1
> 
> 时间：2012-04-12T01:15:33.853
> 
> 标签：c++, xml, tinyxml2

我试图找出一种从我使用 TinyXML2 创建的 XML 文档中加载文本的方法。这是整个文档。

```
<?xml version="1.0" encoding="UTF-8"?>
<map version="1.0" orientation="orthogonal" width="15" height="13" tilewidth="32" tileheight="32">
 <tileset firstgid="1" name="Background" tilewidth="32" tileheight="32">
  <image source="background.png" width="64" height="32"/>
 </tileset>
 <tileset firstgid="3" name="Block" tilewidth="32" tileheight="32">
  <image source="block.png" width="32" height="32"/>
 </tileset>
 <layer name="Background" width="15" height="13">
  <data encoding="base64">
   AgAAAAIAAAACAAAA...
  </data>
 </layer>
 <layer name="Block" width="15" height="13">
  <data encoding="base64">
   AwAAAAMAAAADAAAAAwAAAAM...
  </data>
 </layer>
</map> 
```

基本上，我想将文本复制`<data>`到`background`仅当图层名称为`"Background"`.

我得到了像这样的其他变量：

```
// Get the basic information about the level
version = doc.FirstChildElement("map")->FloatAttribute("version");
orientation = doc.FirstChildElement("map")->Attribute("orientation");
mapWidth = doc.FirstChildElement("map")->IntAttribute("width");
mapHeight = doc.FirstChildElement("map")->IntAttribute("height"); 
```

这很好用，因为我知道元素名称和属性名称。有没有办法说得到`doc.FirstChildElement("map")->FirstChildElement("layer")`，如果是`== "Background"`，得到文本。

我将如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-05T01:04:04.597

我知道这个线程已经很老了，但以防万一有人在网上阅读可能会像我一样偶然发现这个问题，我想指出 Xanx 的答案可以稍微简化。

其中`tinyxml2.h`说对于函数`const char* Attribute( const char* name, const char* value=0 ) const`，如果`value`参数不为空，则函数仅返回 if`value`和`name`match。根据文件中的评论：

```
if ( ele->Attribute( "foo", "bar" ) ) callFooIsBar(); 
```

可以这样写：

```
if ( ele->Attribute( "foo" ) ) {
    if ( strcmp( ele->Attribute( "foo" ), "bar" ) == 0 ) callFooIsBar();
} 
```

所以 Xanx 提供的代码可以这样重写：

```
XMLElement * node =  doc.FirstChildElement("map")->FirstChildElement("layer");
std::string value;

if (node->Attribute("name", "Background")) // no need for strcmp()
{
   value = node->FirtChildElement("data")->GetText();
} 
```

一个小的改变，是的，但我想添加一些东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T14:13:21.360

我建议你做这样的事情：

```
XMLElement * node =  doc.FirstChildElement("map")->FirstChildElement("layer");
std::string value;

// Get the Data element's text, if its a background:
if (strcmp(node->Attribute("name"), "Background") == 0)
{
   value = node->FirtChildElement("data")->GetText();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-27T01:06:19.823

```
auto bgData = text (find_element (doc, "map/layer[@name='Background']/data")); 
```

使用[tinyxml2 扩展](https://github.com/stanthomas/tinyxml2-ex)( `#include <tixml2ex.h>`)。NB 真的应该被包裹在一个 try/catch 块中。正在进行的工作和文档不完整（可以从测试示例中推断出来，直到准备好）。

我会顺便提一下，其他两个答案只有在所需`<layer>`元素首先出现时才能正常工作。

# mysql - 在 mysql 更新查询中创建变量和重用？可能的？

> ID：10116184
> 
> 赞同：1
> 
> 时间：2012-04-12T01:17:35.330
> 
> 标签：mysql, variables, sql-like

我正在为这个查询而苦苦挣扎，想知道我是否在浪费时间并需要编写一个 php 脚本，或者类似下面的内容实际上可能吗？

```
UPDATE my_table 
SET @userid = user_id 
AND SET filename('http://pathto/newfilename_'@userid'.jpg')
FROM my_table 
WHERE filename 
LIKE '%_%' AND filename 
LIKE '%jpg'AND filename 
NOT LIKE 'http%'; 
```

基本上我有 700 个奇怪的文件需要在数据库中重命名，因为它们在我更改系统时与文件名不匹配，它们在数据库中被调用。格式`2_gfhgfhf.jpg`转换为`userid_randomjumble.jpg`

但并非数据库中的所有文件都采用这种格式，只有大约 700 万分之几。所以我想识别包含`_` 但不包含的名称`http`（这是我不想触摸的正确格式）。

我可以做到这一点，但现在有点棘手！

我想将该文件名替换`userid_randomjumble.jpg`为`http://pathto/filename_userid.jpg`所以我想将该行中的列 user_id 设置为一个变量并将其插入到我的新文件名中。

由于明显的原因，上述方法不起作用，但我不确定是否有办法绕过我正在尝试做的事情。我不知道这是否可能？我是不是在浪费时间，我应该用 mysql 转向 PHP 并停止偷懒吗？或者有没有办法让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:50:36.643

是的，没有 php 是可能的。这是一个简单的例子

```
SET @a:=0;
SELECT * FROM table WHERE field_name = @a; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:05:36.917

是的，您可以使用简单的 SQL 来做到这一点：

```
UPDATE my_table 
SET filename = CONCAT('http://pathto/newfilename_', userid, '.jpg')
WHERE filename LIKE '%\_%jpg'
AND filename NOT LIKE 'http%'; 
```

笔记：

*   不需要变量。可以引用任何正在更新的行列
*   在mysql中，用于`CONCAT()`将文本值相加
*   使用`LIKE`，下划线 ( `_`) 具有特殊含义 - 它表示“任何单个字符”。如果要匹配文字下划线，则必须使用反斜杠 ( `\`)对其进行转义
*   您的两个`LIKE`谓词可以安全地合并为一个以进行更简单的查询

# php - PHP 生成的 HTML 会自行关闭一个 HTML 标签

> ID：10116187
> 
> 赞同：1
> 
> 时间：2012-04-12T01:18:19.133
> 
> 标签：php, html, tags

在我的网站中，我有一个部分可以从 twitter 提要生成 HTML。这是用 HTML 包装该部分的 php 代码：

```
 <p class="columns">
    <?
    require ("twitter-feed.php");
    echo generatetwitter();
    ?>
    </p> 
```

生成推特（）；方法将此作为字符串返回：

```
 <li class="twitter">&#x201c;@<a class=" " href="http://twitter.com/lecrae">lecrae</a>: If people throw stones at you, pick em up and build something. <a href="http://search.twitter.com/search?q=%23stayfocused" title="#stayfocused" class=" ">#stayfocused</a>&#x201d;</li> 
```

当页面生成时，它会在 Chrome 和 Firefox 的“查看源代码”选项中正确显示代码，但是当我执行“检查元素”时，它会显示这个

```
 <p class="columns"></p>
    <li class="twitter">...</li>
    <p></p> 
```

所以类 CSS 没有被应用到 twitter 提要中。我需要将 twitter 提要放在定义了类的 p 标记中。

几点：

*   generatetwitter() 以字符串形式返回 HTML
*   我试过让 twitter-feed.php（generatetwitter() 方法）直接回显 HTML，但这没有区别。我每次都得到相同的结果。
*   当 generatetwitter() 方法被覆盖以仅返回一个普通字符串时“例如 return “test”；” 它工作正常。
*   如果 generatetwitter() 方法返回除常规文本（不包括 HTML）之外的任何内容，这似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T01:32:57.443

某些块级标签在嵌套时会关闭打开的段落标签，根据我之前的评论，尝试使用 DIV 或 SPAN 而不是 P 标签。

[在 <p> 标签内嵌套块级元素......对还是错？](https://stackoverflow.com/questions/4291467/nesting-block-level-elements-inside-the-p-tag-right-or-wrong)

# jquery - 编号（重复）字段的不显眼验证

> ID：10116188
> 
> 赞同：1
> 
> 时间：2012-04-12T01:18:19.137
> 
> 标签：jquery, asp.net-mvc-3, razor, unobtrusive-validation

我有一种情况，我需要遍历一小部分查询条件并为每个条件创建一组 html 字段。我想让不显眼的 js 验证为他们工作，但当然，问题是你不能使用`@Html.XxxFor(m => m.FieldName)`，因为字段名称需要编号 - 即，

```
<input name="List[1].Category" />
<input name="List[1].Value" />

<input name="List[2].Category" />
<input name="List[2].Value" /> 
```

获得正确的模型绑定和javascript行为等等。因此，我必须使用：

`@Html.Xxx("List[1].Category"...)`这样我就不会发出不显眼的验证。

这一切都是有道理的，但我想知道是否有人找到了一种在这种情况下连接不显眼的验证的优雅方法。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T01:29:48.353

这是一个代码片段，它演示了如何使用`XxxFor`方法并获取索引的名称属性：

```
@for (var i = 0; i < Model.List.Length; i++)
{
    @Html.TextBoxFor(m => m.List[i].Category)
    @Html.TextBoxFor(m => m.List[i].Value)
} 
```

这将避免需要手动连接不显眼的验证。

# git - 如何确定 Git 合并删除某些代码行的原因？

> ID：10116190
> 
> 赞同：10
> 
> 时间：2012-04-12T01:18:44.600
> 
> 标签：git

我们有一个版本，有问题的提交 (daf7110) 在合并回 master 的历史记录中。此时（85a13270），master有daf7110添加的代码行。

当我们的一位开发人员将 master 合并到他的分支（dev-branch）中时，代码行就消失了。它们从未存在于合并的开发者一方的历史中。我通过以下方式验证了这一点：

```
git checkout c513d2 # <--last commit on dev-branch before the merge
git log -S string_that_was_added -- lib/File/It/Was/In.pm 
```

所以：

1.  在合并之前，该代码从未存在于 dev-branch 上。
2.  它在 master 上，从“git merge-base c513d2 85a13270”开始添加

我怎样才能更详细地了解为什么 Git 的合并逻辑决定代码不应该在合并后继续存在？还是有其他原因我的提交无法在合并中幸存下来？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-12T04:12:37.990

我不知道为什么会发生这种情况，但我可以提供一些调试技巧。

首先，我会确保您没有任何奇怪的设置。在没有 Git 配置的帐户中对具有这两个分支的存储库进行全新克隆。尝试进行合并。它仍然发生吗？如果没有，请检查您的设置，看看是否有任何异常；特别是，我会怀疑任何[rerere](https://git-scm.com/docs/git-am#Documentation/git-am.txt---rerere-autoupdate)设置。另外，尝试进行合并`--no-rerere-autoupdate`以查看它是否仍然丢弃有问题的行。

之后，我将首先打开合并的最大详细程度，然后尝试再次进行合并：

```
GIT_MERGE_VERBOSITY=5 git merge -v master 
```

这将为您提供有关合并过程做出的决策的更多信息。

如果这最终没有告诉您任何有用的信息，您还可以尝试查看它是否发生在不同的合并策略或默认的递归合并策略的不同选项中。尝试`git merge -s resolve`尝试更简单但更愚蠢的合并策略。你还有问题吗？如何为递归策略尝试不同的选项，例如`git merge -s recursive -X patience`？在打开额外冗长的情况下执行最后一个，看看是否会做出与默认合并策略不同的决定。

如果这不起作用，那么是时候尝试手动将其减少到最小的测试用例了。首先，我会尝试将自己限制在有问题的文件中。确保您在一次性存储库中工作，并使用`git filter-branch`删除所有文件，但有问题的文件中缺少这些行。当您这样做并再次尝试合并时，您会得到相同的结果吗？如果不是，那么这些行可能会消失，因为 Git 感到困惑并认为它们移动到了另一个文件，而实际上并没有。

如果您仍然可以仅使用一个文件重现问题，那么是时候开始回溯每个分支的修订历史，进行合并，直到问题消失。例如，从开发分支开始，大约跳到一半，再次尝试合并，看看来自 master 的行是否仍然消失。如果他们这样做了，请尝试跳得更远。如果没有，请沿着开发分支向前跳转，然后重试。一旦您找到了在开发方面引入问题的提交，请在 master 上尝试相同的操作，将您正在合并的提交移回，直到问题消失。

既然您已经尽可能地返回，请尝试重新创建该点之前的历史简化版本。创建一个新的 Git 存储库，签入这两个提交的合并基础。然后在单独的分支中签入您在上面跟踪到的两个提交。您可以毫无问题地合并那些，还是取​​决于两者之间合并拓扑的某些方面？如果是，请尝试重新创建完整的合并拓扑；仅创建执行历史记录中所有合并所需的提交。这可以重现您的问题吗？

在这一点上，您应该拥有最简单的历史来重现问题，只需一个文件来演示它（或者当您无法进一步减少它并重现问题时会发现一些有趣的东西）。我建议要么公开发布此存储库，以便我们可以查看它，如果该文件中没有任何敏感内容，或者如果有，尝试进一步减少它，编辑每个提交以删除所有内容，但是相关线路。您还应该能够用占位符值替换每个相关行，从而为您留下一个不包含任何实际代码的最小测试用例。

以上所有工作都是大量的工作，但希望您在完成所有工作之前会发现一些有趣的东西，或者可以跳过并生成最小的测试用例而无需完成所有中间步骤。一旦你有一个更简单的测试用例，或者上述步骤之一的结果，发布它们，我们可以仔细看看。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-08T16:33:10.600

我遇到了类似的问题。看起来这是因为有问题的代码行首先由提交引入，然后被还原删除。该分支已合并到主分支。

然后在开发分支上重新引入了该行，但在将开发分支合并到主分支时，它被系统地剥离了。我假设 Git 会以某种方式跟踪还原，并假设不需要此行并应将其删除。

# java - 如何获取列表中不等于某个值的所有位置（不使用 for 循环）？

> ID：10116195
> 
> 赞同：0
> 
> 时间：2012-04-12T01:19:18.210
> 
> 标签：java

好吧不确定是否有比我已经在做的更好的方法。现在我有一个列表（int []），其中有超过 10,000 个等于 0 的值，我只寻找非零项。

我目前的方法只是做一个 for 循环并捕获所有非零值，但我经常这样做，并且分析显示它占用了我大量的 cpu 时间（因为我经常这样做）。有没有一种方法可以在没有昂贵的 cpu 进程的情况下获得相同的结果（因为有 10,000 个项目，只有不到 100 个是非零的）？

这是我的数据示例：

```
int[] list = {0,0,0,1,0,10 }
int[] list_names = {a,b,c,d,e,f} 
```

我最终需要做的就是使用这两个列表创建另外两个列表，其中只有非零值及其名称（因此 D=1 和 F=10）。我已经看到了一些解决方案，我需要在结果工作之前对其进行排序，但这是一个问题，因为如果我对数据列表进行排序，那么我无法识别它的名称。

这可能吗？与 for 循环相比，有没有更快的方法？

抱歉，我应该提一下，这个大列表仍在我的程序中进行处理，我正在尝试这样做以减少它们的内存占用。当我真正需要的是非零值时，我有一个包含几亿个这些列表的队列被完整存储，所以这样做是为了节省内存（这似乎是有效的），但我也尽量不这样做对 cpu 进行一点打击以使其达到这一点（因为我需要 cpu 进行处理）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T01:28:28.617

如果您对数组一无所知，那么您将不得不查看每个值。这意味着循环整个数组基本上是您所希望的最好的。如果它已排序，或者如果您知道有关它的一些其他信息，那可能会有所帮助——但除此之外，别无选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T01:26:28.160

是否可以预先对列表进行排序，以便更容易找到非零？这个想法是预排序一次或插入新数据时。因此，检索已经排序并且很容易。

编辑：

然后使用表的哈希码。如果哈希码没有改变，那么您不需要搜索列表/表格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T01:28:28.160

如果您阅读的频率高于写作频率，您可以缓存搜索结果。创建一个非零项目列表，并将其保留在那里直到下一次写入。

您还可以将一组所有索引保留到值不为零的原始数组中。每次将列表中的值更改为零时，从集合中删除该值的索引；每次将值设置为非零时，将其索引添加到集合中。这种方式而不是搜索非零条目，您只需从一组已知索引中获取。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T01:34:33.527

如果你得到的只是一个未排序的整数数组，那么如果不查看所有元素就不可能做到这一点。

另请注意，排序本身比 O(n) 差，因此排序对您没有帮助。

如果您之后以某种方式操作这些数组，那么生成可以使用的稀疏表示（如索引到值的映射）将是有意义的。

* * *

如果不知道更多，很难说你能做什么，也许有一些机会通过在多个线程中做一些工作来加快速度？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T01:36:01.823

记住您找到非零值的位置。将索引和值分别存储在单独的数组中。

所以`0, 2, 0, 1, 0, 7`变成

```
int[] list_index = {1,3,5}
int[] list_value = {2,1,7} 
```

然后遍历数组中的值`list_index`作为索引`names`并存储相应的`list_value`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-12T01:42:09.283

与其拥有一个`List<Integer>`具有零值和非零值的大值，不如保留一个`List<Integer>`甚至是一个计数器数组，在此列表中，您只会有多少次将一个数字放入其中。

```
public class MyList {

    private final int MAX_SIZE = 1001;
    private int[] myList;
    private int size;

    public MyList() {
        this.size= MAX_SIZE;
        this.myList = new int[size];
    }

    public MyList(int maxSize) {
        this.size = maxSize;
        this.myList = new int[size];
    }

    public boolean add(int e) {
        if (e < 0 || (e > size - 1))
            return false;
        this.myList[e]++;
        return true;
    }

    public void remove(int e) {
        if (e < 0 || (e > size - 1))
            return;
        if (this.myList[e] > 0)
            this.myList[e]--;
    }

    public int getTimes(int number) {
        if (number < 0 || (number > size - 1))
            return 0;
        return this.myList[number];
    }
} 
```

# c++ - 在二叉搜索树中插入值

> ID：10116198
> 
> 赞同：1
> 
> 时间：2012-04-12T01:19:56.213
> 
> 标签：c++, data-structures, linked-list, binary-tree, binary-search-tree

我试图编写一种在二叉搜索树中设置值的方法。我已经实现了一种简单的递归技术来在树中添加节点。但是当我输入值并运行代码时，我遇到了分段错误：

```
struct Node
{
    int data;
    Node* leftN;
    Node* rightN;

};

typedef Node* Node_ptr;
Node_ptr head;

//INSERT_VALUE FUNCTION
Node* new_node(int key)
{
    Node* leaf = new Node;
    leaf->data = key;
    leaf->leftN = NULL;
    leaf->rightN = NULL;
}
Node* insert_value(Node_ptr leaf, int key)
{
    if(leaf == NULL)
        return(new_node(key));
    else
    {
        if(key <= leaf->data)
            leaf->leftN = insert_value(leaf->leftN, key);
        else
            leaf->rightN = insert_value(leaf->rightN, key);
        return(leaf);   
    }
}

//PRINT FUNCTION
void printTree(Node_ptr leaf)
{
    if(leaf == NULL)
        return;
    printTree(leaf->leftN);
    cout << "Data element: " << leaf->data << endl;
    printTree(leaf->rightN);
}

//MAIN
int main()
{
    Node_ptr root = NULL;
    Node_ptr tail;
    int i;
    int x;

    //initialize values
    for(i = 0; i < 20; i++)
    {
        x = rand() % 1000 + 1;
        tail = insert_value(root, x);
            root = head;
    }

    root = head;
    printTree(root);

    root = head;
    cout << "Head Node: " << root->data << endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T01:24:26.030

你得到一个分段错误，因为你从来没有设置头部，当你到达线路时

```
cout << "Head Node: " << root->data << endl; 
```

您的根值将为 NULL，（因为它是由 head 设置的，即 NULL）。

“根”（或“头”）节点通常是一种特殊情况，您应该检查该节点是否已在 的顶部构建`insert_value`，如果没有，则将节点节点分配给它。

此外，您的代码中有错误，因为`new_node`它没有返回值。

# android - 从 SQLite 到 JSON 数组

> ID：10116199
> 
> 赞同：0
> 
> 时间：2012-04-12T01:19:58.823
> 
> 标签：android, sql, sql-server, json, sqlite

所以我有一个内部存储有 id、纬度、经度和时间的 SQLite 表。我想通过 web 服务将该表发送到我的外部 SQL Server。用我的 SQLite 数据填充 JSON 数组并将该数组传递给 web 服务，然后该服务会进行一些处理并将其存储在 SQL Server 中，这似乎是实现这一目标的最佳方式。我对从我的 SQLite 表中填充 JSON 数组的最佳方式感到困惑。任何人都可以提供一些示例代码或链接到教程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:07:24.223

[检查你的json“查询”](http://json2csharp.com/)

[教程，官方网页](http://james.newtonking.com/projects/json/help/)

# java - 问题设置实例变量

> ID：10116203
> 
> 赞同：-1
> 
> 时间：2012-04-12T01:20:17.810
> 
> 标签：java, variables, parameters

我使用以下代码将一些坐标从一个类传递到另一个类

**已编辑以显示更多细节

在第 1 课开始时：

```
public class BattleGui implements ActionListener {
    private int xCoordinate;
    private int yCoordinate;

    public void coordinateHandler(int xCoord, int yCoord) {
        xCoordinate=xCoord;
        yCoordinate=yCoord;
        System.out.println("Coordinates Received "+xCoord + " " +yCoord);
        System.out.println("Test "+xCoordinate + " " +yCoordinate);
    }
    public void actionPerformed(ActionEvent e) {
        String classname = getClassName(e.getSource());
        JComponent component = (JComponent)(e.getSource());
        cellState cs = new cellState();
        if (classname.equals("JMenuItem")) {
            JMenuItem menusource = (JMenuItem)(e.getSource());
            String menutext  = menusource.getText();

            // Determine which menu option was chosen
            if (menutext.equals("Load Game")) {
                /* BATTLEGUI    Add your code here to handle Load Game **********/
                System.out.println(cs.turnFeedback());
                LoadGame();
            }
            else if (menutext.equals("Save Game")) {
                /* BATTLEGUI    Add your code here to handle Save Game **********/
                SaveGame();
            }
            else if (menutext.equals("New Game")) {
                /* BATTLEGUI    Add your code here to handle Save Game **********/
                NewGame();
            }
        }
        // Handle the event from the user clicking on a command button
        else if (classname.equals("JButton")) {
            JButton button = (JButton)(e.getSource());
            int bnum = Integer.parseInt(button.getActionCommand());
            int row = bnum / GRID_SIZE;
            int col = bnum % GRID_SIZE;
            //col=yCoord;
            //row=xCoord;
            //System.out.println(e.getSource()); 
            //System.out.println(bnum / GRID_SIZE);
            fireShot(row, col);

            if (row==xCoordinate){
                if (col==yCoordinate){
                    button.setBackground(cellColour[cs.turnFeedback()]);
                }
                else {
                //Remember to change the 1 to whatever is reported back from cell class cell state
                //button.setBackground(cellColour[cs.turnFeedback()]);
                button.setBackground(Color.BLUE);
                }
            }
            else {
                button.setBackground(Color.BLUE);
            }
        }  
    } 
```

从类2：

```
 public void shipDeploy() {
        int gridLength;
        int lengthDraw;        
        int winningNumbers = 0;
        int xCoord;
        int yCoord;

        xCoord=99;
        yCoord=100;
        System.out.println(xCoord + "\n" + yCoord);
        BattleGui bGui = new BattleGui();
        //Passing the coordinates back to the battlegui coordinate handler class
        bGui.coordinateHandler(xCoord, yCoord);
    } 
```

这会将这两个值传递给第一个类中的坐标处理程序方法。

在这个类中，我有一个在各种方法中使用的 xCoordinate 变量，问题是我似乎无法设置它，对于 xCoordinate 和 yCoordinate，总是在此方法之外返回 0，我不明白为什么，因为它们在上面的行中似乎没问题`System.out.println("Test "+xCoordinate + " " +yCoordinate);`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:52:27.330

只是我自己想通了，真的很简单，actionlistener 基本上是在解释零值的每个“事件”上重新实例化变量，只要我把这个过程放在侦听器之外，它就会起作用并按预期设置值。感谢您的投入，希望这可以帮助您一路走来！

# notifications - Twitter Bootstrap 称它们为“徽章”，对于这种 UI 模式是否还有另一种广泛建立的描述？

> ID：10116204
> 
> 赞同：0
> 
> 时间：2012-04-12T01:20:18.033
> 
> 标签：notifications, message, badge

这就是我所指的：http: [//twitter.github.com/bootstrap/components.html#badges](http://twitter.github.com/bootstrap/components.html#badges)

“徽章”是公认的术语吗？Facebook 和无数其他网站使用此功能通过消息、请求和通知即时更新用户。UI 模式变得如此普遍，我完全期望找到一些权威的东西，比如“对话”或“模态”。但是我发现的东西到处都是：徽章、通知、通知器、消息、宝石、更新图标、气泡、计数器、计数……但哪个最语义和准确？

我完全承认我正在尝试分裂头发，但是在最初打算在 Google 上进行快速搜索以找出这种模式被称为什么之后，我现在得出的结论是：a）没有达成共识如何描述这种非常常见的 UI 模式。或b）我在错误的地方搜索错误的假设和不正确的术语（我希望它是A，但我有足够的男人承认它更有可能是B）。

StackOverflow 的“徽章”标签描述是“徽章是对用户重要的事物的简明视觉指示。例如，电子邮件应用程序中未读电子邮件的数量可以显示为应用程序图标上的徽章。”

唉，我仍然不相信“徽章”这个词在这里甚至很合适。![这张图是我思考时看到的](../Images/50427e0c5ad92e97b2b413b700f59152.png)

更不用说，我的团队正在开发一个完全不相关的功能，我们决定称之为“badges”（不是“badgers”，非常重要的区别），所以当我看到 Bootstrap 的`.badges`组件时，我开始怀疑我们是否错误地应用了一个“已知”的概念。

那么那个小通知更新图标叫什么？

编辑：在看到几个回复后，我想澄清一下，我是本着语义编码的精神问这个问题的。我并不真正“关心”模式的设计或可用性方面，我更感兴趣的是致力于让我的代码尽可能地符合语义。经过无数开源项目的糟糕书面标记后，我开始完全理解语义编码的价值。了解如何有效地描述类不仅仅是“UX”或词汇的事情。它是关于干净的代码、DRY 代码、尽可能准确地描述内容的有组织的语义代码等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T01:28:01.387

术语“徽章”通常是指添加到图标以显示图标所引用事物的当前状态的小指示器。例如，如果电子邮件图标在彩色矩形中有一个小数字，表示未读电子邮件的数量，那就是“徽章”。“徽章”放置在图标上的方式与将徽章放置在某人的衬衫上的方式相同。

Twitter 使用“徽章”一词来指代独立存在且不应用于其他图标的指示，这似乎是这一概念的延伸。就个人而言，我不喜欢它，因为它不像徽章的作用，而更像是一个指标。

# automation - 如何从我的 PC 在 Cisco VOIP 7940 上拨打电话？

> ID：10116212
> 
> 赞同：1
> 
> 时间：2012-04-12T01:21:35.123
> 
> 标签：automation, voip, cisco

我正在尝试自动化拨号过程：拨打任何号码，在通话中接听其他人，在预定时间连接到网桥。我知道如何在实际出现在办公室时执行此操作，但我需要将其自动化，以便人们可以在没有实际出现在办公室的情况下拨打/接听电话。

如果有人可以帮助我，我如何从我的 PC 拨打 VOIP 电话上的号码，我将能够完成其余的工作（自动化部分）。

任何想法/建议将不胜感激。特别是这里建议的第一种方法“Cisco IP Phone Services XML”：[https ://stackoverflow.com/questions/2517239/how-can-i-call-from-my-pc-through-my-cisco-ip -电话/](https://stackoverflow.com/questions/2517239/how-can-i-call-from-my-pc-through-my-cisco-ip-phone/)。这似乎很容易实现，因为我的自动化工具主要围绕 XML 工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-08T15:27:12.933

除了 Cisco 7940 系列的 SIP 版本之外，我从来没有用其他任何东西对此进行过测试，所以如果您使用 SCCP 或 MCGP，那么我在下面介绍的内容可能会也可能不会：-)

*   1) 您需要确保您的 VOIP 电话正确设置并从 TFTP 服务器请求它的配置文件，在此回复中帮助您做到这一点超出了我在这里描述的范围。

*   2) 确保在这些配置文件之一的某个位置（通常 **为 SIPXXXXXXXXX.cnf** - 其中 xxxxx 是电话 MAC 地址）您有 3 行配置设备以进行远程登录访问（默认情况下禁用），这些行应如下所示：

    ```
    telnet_level: 2
    phone_prompt: myphone
    phone_password: mypassword 
    ```

    telnet 级别**必须**为 2，0 禁用，1 使其只读，电话提示是您希望提示为 '>'、'myphone ###' 的任何内容，密码是您将用于登录的密码在。

*   3) 一旦您对手机进行了这些更改，请同时按“*”、“6”和“设置”，或者通过重新启动它来重新启动它。当它重新启动时，它应该遵守配置中的新设置。

*   4) 现在将 telnet 程序指向分配给您手机的 IP 地址，如果一切顺利，您应该会被要求输入密码，输入密码并惊叹于您的 Cisco 手机的内部世界；-)

*   5) 您现在可以使用许多命令，输入 ? 然后按回车会给你帮助，然后打字？将帮助您执行该命令。型式**测试？**然后按回车键，您应该会看到以下内容：

    ```
    Test Command Definitions
    ------------------------
    onhook  , hu - Handset Onhook
    offhook , hd - Handset Offhook
    key     , ky - Simulate Keystrokes
    open    , op - Open the Test Session
    close   , cl - Close the Test Session
    show    , sh - Show Call Feedback
    hide    , hi - Hide Call Feedback 
    ```

*   6) 发出命令：

    ```
    test open 
    ```

    您的手机应回复：

    ```
    TEST: Opening Session 
    ```

    您现在处于测试模式。

*   7）一旦进入测试模式，进入

    ```
    test key <key> 
    ```

    将激活该键。如果你输入

    ```
    test key ? 
    ```

    电话应回复：

    ```
    Test Key Names
    --------------
      0-9 # *
        line1   line2     navup navdn volup voldn
      soft1 soft2 soft3 soft4  serv info dir
      msgs set headset spkr mute 
    ```

    用这些名称中的任何一个替换上面以激活该密钥。

*   8) 完成后，记得打电话

    ```
    test close 
    ```

    在断开 telnet 会话之前。

我在这里向您展示了手动方式，但您可以轻松地从可以访问与电话相同的子网的 PC 或服务器编写脚本。我有一组 JSON 服务在我的身上运行，它允许我的家庭安全系统执行诸如在我不在家时检测到入侵者时报警之类的事情，或者让我的基于 Web 的电话簿通过单击来自动拨打号码关联。

您只需要知道您需要的确切按键序列，然后您只需打开测试控制台，发送按键序列，然后关闭即可。手机前面板上可以按下的任何键都可以通过这种方式实现自动化。

# coldfusion - CommonSpot 的打印版本 CSS

> ID：10116213
> 
> 赞同：1
> 
> 时间：2012-04-12T01:21:39.417
> 
> 标签：coldfusion, commonspot

嘿，谁能告诉我如何链接打印版CSS？我创建了一个头并将头文件链接为

```
< link media="print" type="text/css" rel="stylesheet"
href="#request.subsiteCache[1].url#style/print.css"> 
```

但我无法获得打印的确切样式版本，正如我在 print.css 中提到的那样

除了这个，我还需要做什么吗？

我正在使用commonspot。

我将它包装在 cfoutput 标签中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T01:29:52.793

您是否将链接标签包裹在cfoutput 周围？

```
<cfoutput>
    <link media="print" type="text/css" rel="stylesheet" href="#request.subsiteCache[1].url#style/print.css">
</cfoutput> 
```

# c# - 我可以编写一个 Unity 扩展来获得将 Dependency 属性应用于所有公共属性的效果吗？

> ID：10116217
> 
> 赞同：0
> 
> 时间：2012-04-12T01:22:13.173
> 
> 标签：c#, unity-container

我认为这应该很容易，但我不知道这样做的确切机制（请参阅问题标题）。

它的工作方式可能是这样的：

```
[AutoInjectProperties]
public class C
{
  public class C(bool b)
  {
    if(b)
    {
      this.MyClass3 = new MyClass3(); // prevents auto inject
    }
  }
  public MyClass1 { get; set; } // auto inject
  public MyClass2 { get; }
  public MyClass3 { get; set; } // auto inject if null after construction
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T07:35:18.687

我根本不会使用`DependencyAttribute`。[这不是推荐的做法](http://blog.ploeh.dk/2010/01/27/WhatsSoDangerousAboutADIAttribute.aspx)。改为使用`DependencyProperty`。

```
container.RegisterType<IMyInterface, MyImplementation>(new DependencyProperty("Foo")); 
```

如果您要注入的依赖项是强制性的，则应使用构造函数注入而不是属性注入。Unity 自己计算构造函数参数。

```
public class MyImplementation
{
  private readonly IFoo foo;
  public MyImplementation(IFoo foo)
  {
    if(foo == null) throw new ArgumentNullException("foo");
    this.foo = foo;
  }
  public IFoo Foo { get { return this.foo; } }
} 
```

如果您`IFoo`在解决之前注册， `MyImplementation`Unity 将完成它的工作并为您注入它。

* * *

**更新**

```
public class AllProperties : InjectionMember
{
  private readonly List<InjectionProperty> properties;
  public AllProperties()
  {
    this.properties = new List<InjectionProperty>();
  }
  public override void AddPolicies(Type serviceType, Type implementationType, string name, IPolicyList policies)
  {
    if(implementationType == null)throw new ArgumentNullException("implementationType");
    // get all properties that have a setter and are not indexers
    var settableProperties = implementationType
      .GetProperties(BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic)
      .Where(pi => pi.CanWrite && pi.GetSetMethod(false) != null && pi.GetIndexParameters().Length == 0);
    // let the Unity infrastructure do the heavy lifting for you
    foreach (PropertyInfo property in settableProperties)
    {
      this.properties.Add(new InjectionProperty(property.Name));
    }
    this.properties.ForEach(p => p.AddPolicies(serviceType, implementationType, name, policies));
  }
} 
```

像这样使用它

```
container.RegisterType<Foo>(new AllProperties()); 
```

它将注入所有具有公共设置器的属性。

# javascript - Google Chrome 扩展程序：如何通过弹出页面上的 iframe 查看背景页面？

> ID：10116218
> 
> 赞同：3
> 
> 时间：2012-04-12T01:22:38.790
> 
> 标签：javascript, google-chrome, google-chrome-extension

我已经尝试了一段时间，但无法使其正常工作。基本上，启用扩展时，我想要一个持久页面（无论是否单击浏览器操作图标，它都会保持套接字连接）。

后台页面以这种方式运行。现在，我希望这个背景页面显示在弹出页面中（通过 iframe 或任何替代方法，这样它就不是背景页面的另一个实例。

当我尝试时，我得到这样的信息：“chrome-extension://invalid/ 的网页可能暂时关闭，或者它可能已永久移动到新的网址。”

关于我可以尝试的方向的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:32:12.900

真正的后台页面是隐藏的，无法显示（开发者模式下点击`background.html`链接可以打开后台页面的开发工具`chrome://extensions/`）。

在弹出窗口中，您可以使用[`chrome.extension.getBackgroundPage()`](http://code.google.com/chrome/extensions/extension.html#method-getBackgroundPage). 这可用于维护扩展弹出窗口的（会话）持久状态。

当您尝试在框架/选项卡中加载背景页面时，会显示该页面的*新*实例。但是，这**不是**背景页面。它在您的扩展程序中被视为普通的 HTML 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T07:24:33.400

如果您想要背景页面的网址，我建议您使用`chrome.extension.getURL('background.html')`

但是我不推荐这种方法用于您正在做的事情，尽管我认为它会起作用。我会建议使用一些简单的消息传递。有了这个，您的弹出/浏览器操作实际上将保存您的 UI 的 html，并向后台页面发送一条消息，要求从后台页面获取实时 Web 套接字内容。

这些是有关消息传递的文档：[http ://code.google.com/chrome/extensions/messaging.html](http://code.google.com/chrome/extensions/messaging.html)

玩得开心，祝你好运！一点也不差，如果你有问题，请告诉我

# php - 查找和替换操作

> ID：10116219
> 
> 赞同：0
> 
> 时间：2012-04-12T01:22:43.767
> 
> 标签：php, preg-replace, replace

我正在尝试使用 PHP 从给定的字符串中查找和替换。我想这类似于您可能在文本编辑器（正则表达式或类似）中执行的操作。

这是一个示例初始字符串：

```
[quote=Registered_User;0123456]This is a message.[/quote] 
```

所需的输出：

```
[quote=Registered_User pid=0123456]This is a message.[/quote] 
```

我已经尝试使用 preg_replace()，但是当我想保留数字元素时会出现问题。

我不能使用 str_replace() 替换 ';' 使用 'pid=' 因为在初始字符串中可能存在找到孤立分号的实例。

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T01:28:12.380

我们可以找到一个在单词、分号和数字之后出现的实例，`quote=`然后将其替换为新格式：

```
preg_replace("/quote=(\w+);(\d+)/", "quote=$1 pid=$2", $string); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T01:43:51.323

如果字符串“Registered_User;0123456]This is a message”的开头没有改变，你可以像下面这样。

```
$string = "[quote=Registered_User;0123456]This is a message.[/quote]";
$beginStr = "[quote=Registered_User pid=";
$string = $beginStr . substr($string,23); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-12T01:57:51.967

这将找到一个分号，前面有 15 个单词字符，前面有“quote=”，并将该分号更改为“pid=”，但是这仅在单词 (Registered_User) 为 15 个字符时才有效。

```
preg_replace("/(?<=([quote=]{6}(\w{15})));/", " pid=", $string); 
```

# codeigniter-2 - CI 2 - 语言类和模型

> ID：10116225
> 
> 赞同：0
> 
> 时间：2012-04-12T01:23:24.243
> 
> 标签：codeigniter-2, php-5.2

我注意到一个奇怪的问题，我似乎找不到任何解释。

在我的一个模型上，我添加了一条错误输出消息以提醒记录不可用，但是当它输出时，我没有得到任何文本，只是一个空白页。

现在语言标签是有效的，我唯一能想到的是语言文件不打算在模型上使用，如果是这样的话，我看不到任何地方都解释过。

我希望有人可以帮助我找到正确的方向，如果我必须将其设置为 false 并处理 ui 上的消息，我会这样做，但不希望这样做。

谢谢。

编辑：

这是一个应该有帮助的快速代码片段：

```
//fetch topic data.
$this->db->select('id, Name, Description, Level');
$this->db->from('groups');
$this->db->where('id', $gid);
$query = $this->db->get();
$GroupData = $query->row();

//see if we have any records to show.
if($query->num_rows() > 0) {
    $this->setId($GroupData->id);
    $this->setName($GroupData->Name);
    $this->setDescription($GroupData->Description);
    $this->setLevel($GroupData->Level);
} else {
    //no record was found, throw an error.
    show_error($this->lang->line('invalidgid').'<hr />File:'.__FILE__.'<br />Line:'.__LINE__, 500, $this->lang->line('error'));
    log_message('error', 'invalid GroupID was provided.'); //log error in error log.
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T02:54:42.190

我觉得很蠢，但我想通了，语言文件还没有加载，ARGH！

我将不得不回到它看起来的绘图板上，任何建议，请发布它们。

# javascript - 将变量传递给 Google 饼图

> ID：10116228
> 
> 赞同：2
> 
> 时间：2012-04-12T01:23:57.690
> 
> 标签：javascript

我试图将一个变量传递到谷歌图表但是当我这样做时图表停止显示，我的目标是每次我在输入字段中输入不同的数字时图表都会改变但我现在没有任何地方. 这就是我所拥有的，有人可以就我做错了什么提供一些指导吗？

Javascript

```
 <script type="text/javascript" src="https://www.google.com/jsapi"></script>

    <script type="text/javascript">
      google.load('visualization', '1', {packages: ['corechart']});
    </script>

    <script type="text/javascript">
         function numbers(){
            var work_field = document.forms['work_form']['work_n_field'].value;
            var work_div = document.getElementById('number-work');
            var numberschart = work_div.innerHTML = work_field;
            return false;
        };

        function drawVisualization() {
            // Create and populate the data table.
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Task');
        data.addColumn('number', 'Hours per Day');
        data.addRows(5);
        data.setValue(0, 0, 'Work');
//Right here is where I pass my variable into the chart
        data.setValue(0, 1, numberschart);
//And I leave the rest here until I define more input field.
        data.setValue(1, 0, 'Eat');
        data.setValue(1, 1, 2);
        data.setValue(2, 0, 'Commute');
        data.setValue(2, 1, 2);

        // Create and draw the visualization.
        new google.visualization.PieChart(document.getElementById('visualization')).
            draw(data, {
            title:"Mortgage Rates",
            colors: ['#a4b12d', '#818e0a', '#5c6601', '#f0fd79', '#dbe864'],
            });
      }    
      google.setOnLoadCallback(drawVisualization);
    </script> 
```

html

```
 <div id="visualization" style="width: 400px; height: 300px;"></div>
    <form name="work_form" onsubmit="return numbers()">
    <label id="n-work-label">Work</label><input name="work_n_field"/>
    <button name="submit" id="submit" value="submit" onclick="numbers()">Submit</button>
    </form>
    <div id="number-work"></div>
    </div> 
```

非常感谢任何帮助，谢谢

我也将它添加到 js fiddle，但是当将图表添加到资源时，它似乎没有检测到它。[http://jsfiddle.net/pkCCa/](http://jsfiddle.net/pkCCa/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T01:47:39.127

这对我有用：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Example</title>
        <script type="text/javascript" src="https://www.google.com/jsapi"></script>
        <script type="text/javascript">
                var numberschart = 10; //<- Initial value
                google.load('visualization', '1', {packages: ['corechart']});

                function numbers(){
                        var work_field = document.forms['work_form']['work_n_field'].value;
                        var work_div = document.getElementById('number-work');
                        numberschart = work_div.innerHTML = work_field;
                        drawVisualization();
                        return false;
                };

                function drawVisualization() {
                    // Create and populate the data table.
                    var data = new google.visualization.DataTable();
                    data.addColumn('string', 'Task');
                    data.addColumn('number', 'Hours per Day');
                    data.addRows(5);
                    data.setValue(0, 0, 'Work');
                    //data.setValue(0, 1, 11);
                    data.setValue(0, 1, parseInt(numberschart));//<- The value you get from input field is a string, Google API will throw an error
                    data.setValue(1, 0, 'Eat');
                    data.setValue(1, 1, 2);
                    data.setValue(2, 0, 'Commute');
                    data.setValue(2, 1, 2);

                    // Create and draw the visualization.
                    new google.visualization.PieChart(document.getElementById('visualization')).
                        draw(data, {
                            title:"Mortgage Rates",
                            colors: ['#a4b12d', '#818e0a', '#5c6601', '#f0fd79', '#dbe864'],
                            animation:{
                                duration:1000,
                                easing: 'out',
                            },
                            vAxis: {
                                minValue:0, 
                                maxValue:1000
                            },
                        });
                  }    
                google.setOnLoadCallback(drawVisualization);
        </script>
    </head>
    <body>
        <div id="visualization" style="width: 400px; height: 300px;"></div>
        <form name="work_form" onsubmit="return false">
            <label id="n-work-label">Work</label><input name="work_n_field"/>
            <button name="submit" id="submit" value="submit" onclick="numbers();return false;">Submit</button>
        </form>
        <div id="number-work"></div>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T01:38:02.907

试试这个：

[http://jsfiddle.net/schawaska/pkCCa/2/](http://jsfiddle.net/schawaska/pkCCa/2/)

**注意**：它不适用于 jsfiddler，因为您使用的密钥没有为他们的域设置。试试你的环境，让我知道

# c++ - FFMPEG 未定义对 C++ 中“avcodoec_open2”的引用

> ID：10116231
> 
> 赞同：4
> 
> 时间：2012-04-12T01:24:10.780
> 
> 标签：c++, linux, ffmpeg

在将 FFMPEG 库从 0.8 更新为“ffmpeg 版本 git-2012-04-12-277f20c”后编译我的一个 C++ 程序时出现错误

我制作程序时遇到的错误如下：

```
-------- begin --------
Linking: Analysing_Server
./source/Encoding_Thread.o: In function `CEncoding_Thread::do_work()':
/home/Analyser/source/Encoding_Thread.cpp:155: undefined reference to `avcodec_open2'
collect2: ld returned 1 exit status
make: *** [Analysing_Server] Error 1 
```

我的 Make 文件的相关行类似于运行 g++，如下所示：

```
g++ test2.cpp -lavformat -lavcodec -lavutil -D__STDC_CONSTANT_MACROS 
```

引发错误的相关 CPP 代码的精简版本是：

```
#include <stdio.h>
#include <stdint.h> 

#define LOG_OUT_STREAM_BUFF_SIZE  200000

extern "C"  {
  /* The ffmpeg library is completely written in C, so we need to tell the C++ compiler that so it links correctly. */
  #include "stdint.h"
  #include "libavcodec/avcodec.h"
  #include "libavutil/mathematics.h"
  #include "libswscale/swscale.h"
  #include "libavfilter/avfilter.h"

  int avcodec_open2(AVCodecContext *avctx, AVCodec *codec, AVDictionary **options);
  int avcodec_encode_video2(AVCodecContext *avctx, AVPacket *avpkt, const AVFrame *frame, int *got_packet_ptr);
}

uint8_t m_outbuf[2][LOG_OUT_STREAM_BUFF_SIZE];
unsigned int m_out_size[2];
unsigned int m_OutBuffer_ID[2];
unsigned int m_Buffer_ID; /* This is just a uniqueish stamp we give to each buffer so we can tell when they change.. */

AVCodecContext * m_CodecContex;
AVCodec * m_codec;
struct SwsContext *m_img_convert_ctx;

unsigned char* m_DataBuff;

int Output_Width, Output_Height;
int Output_Bitrate;

int main(void) {
  //New version of FFMPEG calls this in avcodec_register_all
  //avcodec_init();

  /* register all the codecs */
  avcodec_register_all();

  /* Initalise the encoder */
  m_codec = avcodec_find_encoder(CODEC_ID_MP2);

  if (!m_codec) {
    printf("Encoding codec not found\n");
  }

  /* init the pointers.. */
  m_CodecContex = NULL;

  /* Default values.. */
  Output_Width = 1600;
  Output_Height = 1200;
  Output_Bitrate = 600000;

  /* Create/setup the Codec details.. */
  //Changed to work with new FFMPEG
  m_CodecContex = avcodec_alloc_context3(m_codec);
  avcodec_get_context_defaults3(m_CodecContex, m_codec);

  /* put sample parameters */
  m_CodecContex->bit_rate = Output_Bitrate;
  /* resolution must be a multiple of two */

  m_CodecContex->width = Output_Width;
  m_CodecContex->height = Output_Height;
  /* frames per second */
  m_CodecContex->time_base= (AVRational){1,25};

  m_CodecContex->gop_size = 10; /* emit one intra frame every ten frames */
  m_CodecContex->max_b_frames=1;
  m_CodecContex->pix_fmt = PIX_FMT_YUV420P; /* must be YUV for encoding.. */

  AVDictionary * RetunedAVDic;

  /* open it */
  //Changed to work with new FFMPEG
  if (avcodec_open2(m_CodecContex, m_codec, &RetunedAVDic) < 0) {
      printf("could not open codec");
  }
} 
```

不幸的是，FFMPEG 附带的“doc/examples/decoding_encoding.c”下的示例不再有效，因为它使用的所有功能现在都已贬值。我的代码基于示例代码，在 FFMPEG 0.8 上运行良好，但不能与最新版本的 FFMPEG 一起编译。我已经将一些折旧的函数更改为较新的版本，但它仍然无法编译。

有谁知道我为什么会收到这个错误？或者是否有人使用最新版本的 FFMPEG 提供指向“doc/examples/decoding_encoding.c”等示例的链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T03:10:00.187

> 我的 Make 文件的相关行类似于运行 g++，如下所示：
> 
> `g++ test2.cpp -lavformat -lavcodec -lavutil -D__STDC_CONSTANT_MACROS`

1.  在编程中，*细节很重要*。您的链接命令与上述命令*不够*相似，否则它会起作用。
2.  您可能将库放在链接行的错误位置。来源和图书馆的顺序[很重要](http://webpages.charter.net/ppluzhnikov/linker.html)。

更新：

> 如果将上面提供的代码放在 CPP 文件中，然后使用提供的选项运行 g++，它就不起作用。您将收到错误“未定义对 `avcodec_open2' 的引用”。

不，我没有。我得到一个不同的错误（因为我根本没有安装 avcodec）。

如果示例命令对您来说已经失败，那么您应该提供*它*产生的错误，而不是来自其他命令的错误，这样我们就不必猜测*其他*命令可能是什么样子。

> 库的顺序适用于 FFMPEG 0.8 版，为什么它不适用于最新版本？

可能是因为你安装了最新的`libavcodec54`，但没有安装最新的`libavcodec-dev`。

# mysql - 免费的 SQLite GUI 工具？

> ID：10116234
> 
> 赞同：4
> 
> 时间：2012-04-12T01:24:29.957
> 
> 标签：mysql, ios, xcode, sqlite

有没有免费的 SQLite GUI 工具？

像 MySQL 的 Workbench 之类的东西？

我一直在寻找类似的东西，我发现的每个工具都是付费的，而且功能非常复杂......

我只想要简单的东西，比如创建表、列、运行查询（插入、更新、删除、选择）

谢谢大家

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T01:27:41.183

有一个不错的免费的，适用于 Firefox ... [https://addons.mozilla.org/en-US/firefox/addon/sqlite-manager/](https://addons.mozilla.org/en-US/firefox/addon/sqlite-manager/)

谢谢 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T01:31:30.063

我见过的最简单的工具是 Firefox 插件“SQLite Manager”。允许您浏览您的 sqlite 数据库、创建表和索引、执行 sql 查询、导出数据等。易于使用。您从 Firefox 工具菜单运行它并连接到您计算机上的任何 sqlite 数据库文件。不会做一些花哨的东西，比如绘制你的数据库模式图——但如果你想要一些简单的东西，就是这样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T23:00:01.780

Mozilla 插件最适合 sqllite。请注意，使用直接在捆绑包下打开文件时的一个限制是它被锁定，您需要继续重新打开或停止应用程序并刷新

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T07:33:08.610

尝试使用[SQLite 数据库浏览器](http://sqlitebrowser.sourceforge.net/)。

# c - 如何解决 malloc() 破坏指针的情况？

> ID：10116235
> 
> 赞同：0
> 
> 时间：2012-04-12T01:24:36.590
> 
> 标签：c, memory, pointers, malloc, corruption

这是我刚才写的一个函数的简化版本：

```
int foobar(char * foo) {
  puts(type);
  struct node * ptr = (struct node *) malloc (sizeof(struct node));
  puts(type);
  memset(ptr, 0, sizeof(ptr));
  ptr=head;
  return head->id;
} 
```

这里`node`只是在链接列表中声明为一个节点的结构，它包含一个`char *`和一个指向下一个节点的指针。但是，我意识到`malloc()`这里正在破坏我的输入`char * foo`。

为什么会`malloc()`损坏我的输入字符指针？另外，我该如何解决这里的问题？现在我只是将该指针的内容复制到本地数组，但这太老套了，即使我的口味（这不是最好的）。

感谢您的任何投入！

编辑：好吧，这里有更真实的代码：

```
void foobar(char * type) {
  puts(type); <-- here it's a long string about 30 char
  struct node * ptr = (struct node *) malloc (sizeof(struct node));
  puts(type); <- chopped of, 10 left with some random thing at the end
} 
```

希望问题现在很清楚！谢谢！

编辑：

以下是`type`初始化的方式：

```
type = strdup("Some ");
tempType = strdup("things");
sprintf(type + strlen(type), "%s", tempType); 
```

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T01:26:31.987

明显的损坏会发生，因为`type`或`foo`指向已经释放的内存，这些内存`malloc()`会返回给您以供其他用途。

一旦你释放了内存，你就不能继续使用它。

你也有一个问题，因为你分配给`ptr`，然后`ptr`用：

```
ptr = head; 
```

你的意思可能是：

```
head = ptr; 
```

但您可能需要在此`ptr->next = head;`之前进行设置。当然，这是推测，因为您没有显示类型定义。

也不清楚为什么你返回`head->id`而不是`head`or `ptr`。不幸的是，我们没有足够的信息说“那*是*错误的”；这不寻常。

* * *

### 第二次编辑的评论

> 以下是 type 的初始化方式：

```
type = strdup("Some ");
tempType = strdup("things");
sprintf(type + strlen(type), "%s", tempType); 
```

有一些麻烦。你已经践踏了你没有任何业务践踏的记忆。

前两行很好；你复制一个字符串。但请注意，这`type`是一个指向 6 字节内存的指针，`tempType`也是一个指向 7 字节内存的指针。

灾难发生在第三线。

`type + strlen(type)`指向`type`字符串末尾的空字节。`tempType`然后，您或多或少地合法地写了 1 个字节；您不再有以空字符结尾的字符串，但第一个字节在界限内。第二个和后续字节写入未分配给您的空间中，并且可能包含有关内存分配的控制信息。

超出分配内存的范围写入会导致“未定义的行为”。任何事情都有可能发生。在某些机器上，尤其是使用 64 位编译的机器上，您可能会完全摆脱它。在大多数机器上，尤其是 32 位编译，你已经破坏了你的堆内存，并且某处（通常离这个地方有点远）会因此而遇到麻烦。这就是记忆滥用的本质。它发生的地方通常似乎可以工作，并且是其他一些无辜的代码受到其他地方引起的问题的影响。

因此，如果要连接这些字符串，则需要执行以下操作：

```
char *type = strdup("Some ");
char *tempType = strdup("things");
char *concat = malloc(strlen(type) + strlen(tempType) + 1);
sprintf(concat, "%s%s", type, tempType); 
```

我省略了错误检查。您应该检查分配`strdup()`并`malloc()`确保您获得了分配的内存。有些人可能会争辩说你应该使用`snprintf()`; 不这样做是一个有意识的决定，因为我已经在上一行计算了必要的空间并分配了足够的空间。但你至少应该考虑一下。如果您没有确保有足够的可用空间，那么您应该使用`snprintf()`以避免缓冲区溢出。您还将检查其返回值，以便了解信息是否全部格式化。（另请注意，您有 3 个指向释放的指针，或传递给其他代码，以便在适当的时间释放分配的内存。）

请注意，在 Windows 上，`snprintf()`(or `_snprintf()`) 的行为方式与 C99 标准指定的方式不同。坦率地说，这没有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T01:31:12.950

我不确定您要做什么，但评论表明正在发生的事情：

```
// This allocates enough memory for a struct node and assigns it to ptr.
struct node * ptr = (struct node *) malloc (sizeof(struct node));

// This displays the data in the (unspecified) string type,
// which must be null terminated.
puts(type);

// This sets the first 4 bytes of ptr to 0, assuming pointers are 4 bytes.
// You probably want memset(ptr, 0, sizeof(struct node));
memset(ptr, 0, sizeof(ptr));

// This makes ptr point to the address of head, orphaning the memory
// that was just malloc'ed to ptr.
ptr=head; 
```

# permutation - 反转游戏 - 使用前缀反转对排列进行评分，以便仅生成最高得分排列

> ID：10116243
> 
> 赞同：1
> 
> 时间：2012-04-12T01:27:04.430
> 
> 标签：permutation, reverse, prefix

我正在尝试创建一个“前缀反转游戏”，它只生成从 n=2（即：{1,2}，{2,1}）到 n=100 的排列，这需要按顺序进行最多数量的前缀反转在排列的开头替换一个。

例如，

*   {2, 4, 1, 3}（前两个元素颠倒）-->
*   {4, 2, 1, 3}（前四个元素反转）-->
*   {2, 1, 3, 4}（前两个元素颠倒）-->
*   {1, 2, 3, 4}（结束）。

因此，该排列的得分为“4”。

我遇到问题的部分是创建和实现我自己的算法，以便找到得分最高的排列，而不必测试每一个排列（因为它非常低效）。我想知道是否有人可以帮助创建这个算法。

我一直在研究诸如“煎饼排序”算法之类的算法，但这似乎与我想要的相反。

非常感谢您的参与！

# iis - IIS 7 URL 重写 - 403 错误

> ID：10116249
> 
> 赞同：2
> 
> 时间：2012-04-12T01:28:07.363
> 
> 标签：iis, url-rewriting

我知道以前有人问过这个问题，但我还没有找到我遇到的问题的答案。我正在尝试将域（不是子域）重定向到子文件夹。我正在运行 IIS 7，并创建了一个 URL 重写规则，如下所示：

```
<rule name="subfolder" enabled="true" stopProcessing="true">
    <match url="(.*)" />
    <conditions logicalGrouping="MatchAll">
        <add input="{HTTP_HOST}" pattern="^(www\.)?domain.com$" />
        <add input="{PATH_INFO}" pattern="subfolder" negate="true" />
    </conditions>
    <action type="Rewrite" url="/subfolder/{R:0}" />
</rule> 
```

取消规则后，我可以导航到[http://domain.com/subfolder/index.htm](http://domain.com/subfolder/index.htm)之类的页面。启用它后，当我尝试导航到[http://domain.com/index.htm](http://domain.com/index.htm)时出现 403 错误。

```
403 - Forbidden: Access is denied.

You do not have permission to view this directory or page using the credentials that you supplied. 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T01:39:52.997

试试这个简单的规则：

```
<rule name="Redirect domain to sub-folder" stopProcessing="true">
    <match url="^$" />
    <action type="Redirect" url="http://domain.com/subfolder" />
</rule> 
```

# java - 将 InputStreamReader 转换为 InputStream

> ID：10116259
> 
> 赞同：-1
> 
> 时间：2012-04-12T01:29:22.330
> 
> 标签：java, android

我怎样才能转换`InputStreamReader`为`InputStream`？我有一个`InputStream`包含一些字符串和字节数据，我想解析它。所以我把我`InputStream`的 to包装起来`BufferedReader`。然后我从中读了 3 行。之后，我想按原样获取其余数据（字节）。但如果我试图得到它，什么也不会发生。代码片段：

```
BufferedReader br = new BufferedReader(new InputStreamReader(is,"UTF-8"));

                String endOfData = br.readLine();
                String contentDisposition = br.readLine();
                String contentType = br.readLine();    

                file = new File(filename);
                if(file.exists()) file.delete();
                file.createNewFile();
                FileOutputStream fos = new FileOutputStream(file);                  

                byte[] data = new byte[8192];     
                int len = 0;     

                while (-1 != (len = is.read(data)) )     
                {                
                    fos.write(data, 0, len);  
                    Log.e("len", len+"");
                }      
 fos.flush();
 fos.close();
 is.close(); 
```

该文件为空。如果我不包装`InputStream`它可以正常工作，但我需要阅读 3 行并将其删除。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T01:45:57.893

如果要将文本和字节数据混合在一起，则应使用 OutputStream.writeUTF 写出这 3 行，这样一个 InputStream 将能够检索您需要的所有数据。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-12T07:50:10.443

看看 commons-io 的[`ReaderInputStream`](http://commons.apache.org/io/api-release/index.html?org/apache/commons/io/input/package-summary.html)：它有点笨拙，但你可以用它包装 BufferedReader 并再次将其作为输入流读取。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-12T01:57:45.087

正确混合字节和字符输入非常困难，尤其是当您开始将缓冲的读取器/流投入混合时。我建议您选择一个并坚持使用它（根据需要将字节转换为字符串；注意编码！）或将整个内容包装在 ZipOutputStream 中，这样您就可以拥有多个具有不同内容的逻辑“文件”。

# c# - webservice DateTime 意外值？

> ID：10116260
> 
> 赞同：1
> 
> 时间：2012-04-12T01:29:41.500
> 
> 标签：c#, wcf, web-services, rest

当我使用 system.datetime 作为我的数据成员时，它会在我的 datagridview 中返回一种奇怪的格式。

我的数据成员看起来像这样：

```
 [DataMember(Name = "TimeAdded")]
    public DateTime TimeAdded; 
```

我的 AddStudent 看起来像这样：

```
 public void AddStudent(Student student)
    {
        student.StudentID = (++eCount).ToString();
        student.TimeAdded = DateTime.Now; // not important more so the method to get the correct format
        students.Add(student);
    } 
```

我得到的输出`2012-04-12T03:10:42.8138255+01:00`是有办法解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T01:38:01.950

我想你想要：

```
student.TimeAdded = DateTime.Now; 
```

现在，您只是将空时间转换为本地时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T01:41:36.663

假设您指的是日期设置为 的事实`default(DateTime)`，那么您需要 yamen 的答案，如果您不喜欢`DateTime`显示的格式，则将另一个属性添加到 Student 上，该属性使用像这样的[标准 DateTime 格式字符串](http://msdn.microsoft.com/en-us/library/zdtaw1bw.aspx)。

```
public class Student
{
   // existing date, don't expose this
   public DateTime TimeAdded;

   // expose this instead
   [DataMember(Name = "TimeAddedString")]
   public string TimeAddedString 
   {
      //show as "Monday, January 01, 0001 12:00 AM"
      get { return this.TimeAdded.ToString("f"); }
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T01:37:51.483

```
public class Student
{
   public string TimeAddedString
   {
      get 
      { 
          return this.TimeAdded.ToString("dd/MM/yyyy hh:mm:ss"); 
          // your desired format can goes here
      } 
   }
}
public void AddStudent(Student student)
{
    student.StudentID = (++eCount).ToString();
    student.TimeAdded = DateTime.Now; // or your desired datetime
    students.Add(student);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T02:05:34.290

如果您要转换添加的传入学生时间，则需要重新分配它：

```
public void AddStudent(Student student)
{
        student.StudentID = (++eCount).ToString();
        student.TimeAdded = student.TimeAdded.ToLocalTime();
        students.Add(student);
} 
```

# php - 带有多个单词的php xml url

> ID：10116267
> 
> 赞同：0
> 
> 时间：2012-04-12T01:31:03.170
> 
> 标签：php, xml, url

从 url 获取 xml 数据有一个烦人的问题

如果我将“$file_show_title”设置为一个单词（来自另一个页面传递的 url），那么一切正常。如果 "$file_show_title" 是 2 个单词（也尝试对 url 进行编码），则它无法找到地址。

我不是最擅长解释，但我希望这足以让有人帮助我

谢谢

```
 $url = file_get_contents("http://www.thetvdb.com/api/GetSeries.php?seriesname=".$file_show_title);
                $xml = simplexml_load_string($url);

                $seriesid = $xml->Series[0]->seriesid;
                $seriesbanner = $xml->Series[0]->banner;
                $seriesname = $xml->Series[0]->SeriesName;
                $serieslanguage = $xml->Series[0]->language;
                $seriesfist_aired = $xml->Series[0]->FirstAired;
                $seriesoverview = $xml->Series[0]->Overview;

                echo '<img src="/images/'.$seriesbanner.'">'."<br />";
                echo $seriesname."<br />";
                echo $seriesid."<br />";
                echo $serieslanguage."<br />";
                echo $seriesfist_aired."<br />";
                echo $seriesoverview."<br />"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T01:34:28.697

您需要的是`urlencode`请参阅[http://php.net/manual/en/function.urlencode.php](http://php.net/manual/en/function.urlencode.php)了解更多信息

例子

```
$url = file_get_contents("http://www.thetvdb.com/api/GetSeries.php?seriesname=" . urlencode("Prison Break")); 
```

现在使用

```
$url = file_get_contents("http://www.thetvdb.com/api/GetSeries.php?seriesname=" . urlencode($file_show_title)); 
```

我希望它有帮助

# java - 当 USB 端口扫描某些输入时，Java 中的弹出窗口

> ID：10116270
> 
> 赞同：3
> 
> 时间：2012-04-12T01:31:37.393
> 
> 标签：java, swing, port, qr-code, port-scanning

我有一个在机器上运行的 Java 编写的应用程序（Linux/Windows）。我想让这个应用程序像后台应用程序一样运行，这样它在使用系统中的其他应用程序时不会中断。现在，当使用连接到 USB 端口的扫描件扫描 QR 码时，我想弹出一个屏幕并显示一些按钮（根据选择执行一些任务）。当此扫描发生时，启动弹出屏幕的 Java 应用程序正在系统托盘中运行。

--Edit--
我使用关键监听器来识别条形码扫描并根据扫描的内容从数据库中提取信息。但是在扫描我的应用程序时，它是打开的。因此，我在 AWT 级别中附加了动作侦听器，以便捕获并处理击键/扫描。但现在在当前情况下，我不会有任何窗口处于活动状态。因此，当系统托盘中的应用程序最小化时，我需要在内部捕获扫描的输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T12:01:23.297

我认为对您开放的唯一途径是捕获系统范围的键盘事件。有一个用于处理 Java 的库：[jnativehook](http://code.google.com/p/jnativehook/)。但是你将如何检测哪些事件是专门来自你的 HID 设备的，我不确定。

还有 [JavaHIDAPI](http://code.google.com/p/javahidapi/)，一个业余级项目，它的“hello, world”测试示例在我的机器上因 IOException 而失败。好的部分是，所有代码都在那里，包括 Windows 的本机 C。

最后，我找到了[这个](http://www.blog.kslemb.com/doku.php/en/projects/globx/java_hid)，一个关于如何在 Windows 上与 HID 对话的非常好的教程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T14:58:51.777

您可以查看[*无头模式*](http://java.sun.com/developer/technicalArticles/J2SE/Desktop/headless/)是否有效或在您的主机上启动[VNC 。](http://en.wikipedia.org/wiki/Virtual_Network_Computing)

# asp.net - ASP.NET MVC3：Action 可以接受多个模型参数吗？

> ID：10116272
> 
> 赞同：1
> 
> 时间：2012-04-12T01:31:45.010
> 
> 标签：asp.net, asp.net-mvc-3

例如：

```
class MyContoller
{
    [MyCustomAttribute]
    public ActionResult MyAction(ModelX fromRequest, ModelY fromSession, ModelZ fromCookie)
    {
       string productId = fromRequest.ProductId;
       string userId = fromSession.UserId;
       string cultureName = fromCookie.CultureName;
    }
} 
```

原因：

我不想在控制器中访问 Request、Session 和 HttpContext，而 MVC3 将模型传递给动作的默认想法非常棒。

我希望 MyAction 的参数数量易于更改。例如，如果我添加一个新参数，系统将尝试通过参数的名称或类型在 Request、Session 或 Cookies 中查找值（我认为 cookie 值可能需要自定义 ModelBinders）并将填充的模型传递给我的行动。我不必编写额外的代码。

自定义属性（示例中的 MyCustomAttribute）可以实现这个想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T01:35:36.633

我不确定我是否关注自定义属性。您期望自定义属性做什么？

是的，一个动作方法可以根据需要采用任意数量的模型参数。显然，在任何给定的请求中只能绑定一个（因为一个视图只能有一个模型）。首先找到的将被绑定，其他的将为空。

因此，假设您有以下内容：

```
public class ModelX {
    public string X {get;set;}
}

public class ModelY {
    public string Y {get;set;}
}

public class ModelZ {
    public string Z {get;set;}
} 
```

你有一个像这样的动作方法：

```
public ActionResult DoIt(ModelX x, ModelY y, ModelZ z)
{
    return View();
} 
```

在您的 DoIt.cshtml 中，您具有以下内容：

```
@model ModelZ

@using(Html.BeginForm()) {
    @Html.TextBoxFor(x => x.Z)
    <input type="submit"/>
} 
```

如果您在文本框中输入内容并提交，那么模型绑定器会将 ModelZ 与您输入的值绑定，并且 ModelX 和 ModelY 将为空。

如果你的意思是一个动作方法可以同时绑定多个模型，那么我不得不问你.. 你打算如何让一个视图有多个模型？您当然可以创建一个包装模型来包含多个模型，但一个视图只能有一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T01:34:37.470

创建一个包含 和 的复合`ModelX`ViewModel`ModelY`类`ModelZ`。然后，您可以填充新 ViewModel 类的实例，并将其传递给您的控制器方法。

```
public class XYZViewModel
{
    public ModelX fromRequest { get; set; }
    public ModelY fromSession { get; set; }
    public ModelZ fromCookie { get; set; }
}

public class MyController
{
    [MyCustomAttribute]
    public ActionResult MyAction(XYZViewModel myModel)
    {
       string productId = myModel.fromRequest.ProductId;
       string userId = myModel.fromSession.UserId;
       string cultureName = myModel.fromCookie.CultureName;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T01:43:29.547

您始终可以将多个参数传递给您的控制器操作，是的。关键是确保它们在请求中正确序列化。如果您使用的是表单，则意味着使用 Html 辅助方法。

例如，假设您想要这样的操作：

```
public ActionResult Multiple(ModelA a, ModelB b)
{
    // ...
} 
```

您可以为每个模型创建简单的局部视图：

```
@model MyProject.Models.ModelA
@Html.EditorForModel() 
```

然后在您的**多重**视图中，像这样渲染部分视图：

```
@{ using (Html.BeginForm("Multiple", "MyController", FormMethod.Get))
{
    @Html.Partial("A", new MyProject.Models.ModelA())
    @Html.Partial("B", new MyProject.Models.ModelB())
    <input type='submit' value='submit' />
} 
```

我在这里将方法设置为**GET**，以便您可以轻松地看到 MVC 是如何传递参数的。如果您提交表单，您将看到 MVC 成功反序列化每个对象。

# html - 如何使用 ajax 和 jquery 更新特定的 div

> ID：10116273
> 
> 赞同：1
> 
> 时间：2012-04-12T01:32:00.877
> 
> 标签：html, css, ajax, jquery

我在现场工作，它有一个框架。想想gmail框架。就像 gmail 应用程序一样，我只希望在单击导航栏上的链接时更新内部 div。我已经得到它，所以 div 会发生变化，但它肯定不会给我我希望的结果。这是我所拥有的大致轮廓

```
<div id=container>
   <div id=page>
      ... some child divs in here
   </div></div> 
```

因为容器有一个固定的滚动条我不希望它改变我只想替换页面 div。这就是我设法在 jquery 方面提出的。我只是一个初学者，所以我真的不知道我在做什么，但我正在努力学习。

```
$(document).ready(function () {
    $.ajaxSetup ({
        cache: false
    });
    var ajax_load = "<img src='bin/pics/loading.gif' alt='loading…' width='32px' height='32px' style='top: 250px; left: 250px;' />";
    var loadUrl = "bin/ajax/load.html";
    $("#mybuton").click(function(){
        $("#page").load(loadUrl);
        location.hash = 'ajax';
    });
}); 
```

加载 html 包含这个

```
<link rel="stylesheet" type="text/css" href="bin/main.css" />
<div id="page">
    <div id="child">
        <h1> sometitle </h1>
    </div>
</div> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:32:50.490

我不喜欢用链接来回答，也不喜欢用文字来回答，所以这里有一个例子，说明如何制作 div/table 或大多数 html 容器来更改其内容。

**如果您将 MVC 与 Razor 一起使用，它看起来像这样**

`TestView.cshtml`

```
@using (Ajax.BeginForm("Test",
                       "TestController", 
                       new AjaxOptions {
                           HttpMethod = "GET",
                           InsertionMode = InsertionMode.Replace,
                           UpdateTargetId = "searchResults" }))
{
    Search User by ID: <input type="text" name="id" />
    <input type="submit" value="Search" />
}

<table id="searchResults">
</table> 
```

`TestController.cs`

```
public class TestController : Controller
{
    public PartialViewResult Test(int id)
    {
        var model = myDbContext.Users.Single(q => q.UserID == id);

        return PartialView("_PartialViewTest", model);
    }
} 
```

`_PartialViewTest.cshtml`

```
@model IEnumerable<MyApp.Models.User>

<table id="searchResults">
    <tr>
        <th>Name</th>
        <th>Email</th>
    </tr>

    @foreach(var item in Model) {
        <tr>
            <td>@item.Name</td>
            <td>@item.Email</td>
        </tr>
    }
</table> 
```

**...如果你想使用经典的 ASP.NET 来做，它会是这样的：**

`TestPage.aspx`

```
<body>
    <form id="form1" runat="server">
        <div>
            <button type="button" onclick='testCall()'>Test!</button>
            <hr />
            <div id="ajaxResult">
            </div>
        </div>
    </form>
</body> 
```

`Scripts.js / TestPage.aspx`

```
function testCall() {
    $.ajax({
        url: "TestHandler.ashx",
        dataType: 'json',
        success: callbackTestCall
    });
};

function callbackTestCall(payload) {
    document.getElementById("ajaxResult").innerHTML = payload;
}; 
```

`TestHandler.ashx`

```
public class TestHandler : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
        JavaScriptSerializer jss = new JavaScriptSerializer();
        Random random = new Random();

        string actualData = random.Next(2001).ToString();

        context.Response.ContentType = "text/plain";
        context.Response.CacheControl = "no-cache";

        context.Response.Write(jss.Serialize(actualData));
    }

    public bool IsReusable
    {
        // Whether or not the instance can be used for another request
        get { return true; }
    }
} 
```

如果您需要更多信息，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T16:31:04.443

这是 Jquery ajax 链接[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

例如代码：

```
ajax_control = jQuery.ajax({
    url: "target.php",
    type: "POST",
    data: {variable_name: variable_value}
});
ajax_control.always(function(){
    $('#content').html(ajax_control.responseText);
}); 
```

通过将调用分配给变量（上例中的“ajax_control”），您可以随时使用以下命令中止：

```
ajax_control.abort(); 
```

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/) http://api.jquery.com/jQuery.get/

# android - UML图的建议

> ID：10116275
> 
> 赞同：3
> 
> 时间：2012-04-12T01:32:30.963
> 
> 标签：android, uml, class-diagram, use-case

我需要绘制图表，但我不确定哪种图表适合我的应用程序。

它是一个移动应用程序，包含：

1.  飞溅（作为欢迎屏幕）
2.  主菜单屏幕（其中包含）
    *   画廊
    *   设置
    *   地图
    *   帮助

图库包含存储在设备上的所有图像/照片。

任何人都可以建议适合此应用程序的 UML 类型吗？是用例图吗？还是序列图？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T02:00:04.597

嗨，除了用例、序列、状态图之外，每个应用程序/项目都需要活动图才能最终实现。这是链接希望这对您有所帮助 [http://www.tutorialspoint.com/uml/uml_activity_diagram.htm](http://www.tutorialspoint.com/uml/uml_activity_diagram.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T07:33:22.767

在我看来，在生成文档之前你应该清楚你想要实现的目标，否则你最终会得到一堆无用的图表和图表。

如果我是你，我会使用类图和用例图。

类图将帮助您和其他有技术头脑的人了解您的代码如何组合在一起。

然后使用用例图来显示程序的典型使用流程。这应该是任何人都可以理解的。

# android - LazyAdapter 上的 TextView 显示错误数据

> ID：10116280
> 
> 赞同：2
> 
> 时间：2012-04-12T01:33:02.280
> 
> 标签：android, json, textview, android-lazyadapter

[我已经成功地基于此链接](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview/3068012#3068012)使用带有 LazyAdapter 的 ListView 构建了一个应用程序

但我的列表视图中有异常。每个列表视图有 1 个图像视图和 2 个文本视图。所以惰性适配器将向imageview显示“缩略图”，向Textview1显示“名称”，向Textview2显示“地址”......

ImageView 是正确的……它可以显示数据库中的图像缩略图……但这里的问题是，BOTH TEXTVIEW 没有显示正确的数据！而是显示数据库中的“名称”和“地址”......它们显示缩略图图像的链接。

所以，也许任何人都可以帮助我。谢谢b4。

这是我的 json ：

```
{
"listresto": [
    {
        "nama_resto": "CIE RASA LOOM",
        "alamat_resto": "JL. BUAH BATU No.154 Bandung",
        "thumb_img": "http://10.0.2.2/culigui/images/resto_thumb/cierasaloom.JPG"
    },
    {
        "nama_resto": "AYAM GORENG SUHARTI",
        "alamat_resto": "Jl. Lodaya No. 1",
        "thumb_img": "http://10.0.2.2/culigui/images/resto_thumb/ayamgorengsuharti.JPG"
    },
    {
        "nama_resto": "BAKSO ENGGAL MALANG",
        "alamat_resto": "JL. BURANGRANG 12 BANDUNG",
        "thumb_img": "http://10.0.2.2/culigui/images/resto_thumb/baksoenggal.JPG"
    },
    {
        "nama_resto": "ATMOSPHERE",
        "alamat_resto": "Jl.Lengkong Besar No.97",
        "thumb_img": "http://10.0.2.2/culigui/images/resto_thumb/atmosphere.JPG"
    },
    {
        "nama_resto": "WARUNG STEAK AND SHAKE",
        "alamat_resto": "Jl. Jend Gatot Subroto 28",
        "thumb_img": "http://10.0.2.2/culigui/images/resto_thumb/warungsteak.JPG"
    }
]
} 
```

这是我的主要活动：

```
public class MenuViewAll extends Activity {

// url to make request
private static String url = "http://10.0.2.2/culigui/getdataresto.php";

public static String KEY_ID,KEY_NAME,KEY_ADDRESS,KEY_THUMB; 

ListView Listview;
LazyAdapter adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.menu_view_all);

    // Hashmap for ListView
    ArrayList<HashMap<String, String>> userList = new ArrayList<HashMap<String, String>>();

    // Creating JSON Parser instance
    JSONParser jParser = new JSONParser();

    // getting JSON string from URL
    JSONObject json = jParser.getJSONFromUrl(url);

    try {
        // Getting JSONArray of listresto
        JSONArray  listresto = json.getJSONArray("listresto");

        // looping through All listresto
        for(int i = 0; i < listresto.length(); i++){
            HashMap<String, String> map = new HashMap<String, String>();    
            JSONObject list = listresto.getJSONObject(i);

            // insert String to Local Variable
            //map.put(KEY_ID, list.getString("id_resto"));
            map.put(KEY_NAME, list.getString("nama_resto"));
            map.put(KEY_ADDRESS, list.getString("alamat_resto"));
            map.put(KEY_THUMB, list.getString("thumb_img"));
            userList.add(map);

        }
    } catch (JSONException e) {
        e.printStackTrace();
    }

    /**
     * Updating parsed JSON data into ListView
     * */

    //this is new custom adapter
    Listview = (ListView) findViewById (R.id.list);
    adapter = new LazyAdapter(this, userList); 
    Listview.setAdapter(adapter); 
```

这是我的 LaxyAdapter 类：

```
public class LazyAdapter extends BaseAdapter  {

private Activity activity;
private ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater=null;
public ImageLoader imageLoader; 

public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data=d;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader=new ImageLoader(activity.getApplicationContext());
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return data.size();
}

@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return position;
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.listitemviewall, null);

    TextView namaresto = (TextView)vi.findViewById(R.id.name); // resto name
    TextView alamatresto = (TextView)vi.findViewById(R.id.address); // resto address
    ImageView thumb_image=(ImageView)vi.findViewById(R.id.defaultthumb); // thumb image

    HashMap<String, String> resto = new HashMap<String, String>();
    resto = data.get(position);

    // Setting all values in listview
    namaresto.setText(resto.get(MenuViewAll.KEY_NAME));
    alamatresto.setText(resto.get(MenuViewAll.KEY_ADDRESS));
    imageLoader.DisplayImage(resto.get(MenuViewAll.KEY_THUMB), thumb_image);
    return vi;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T02:08:05.687

我解决了这个问题...

问题出在这段代码中

```
 // insert String to Local Variable
        //map.put(KEY_ID, list.getString("id_resto"));
        map.put(KEY_NAME, list.getString("nama_resto"));
        map.put(KEY_ADDRESS, list.getString("alamat_resto"));
        map.put(KEY_THUMB, list.getString("thumb_img"));
        userList.add(map); 
```

当我检查 logcat 时

```
//for checking value
//System.out.println("output: " +map); 
```

该值为空，仅发送最后一个值为 KEY_THUMB ...

正确的代码是：

```
 // insert String to Local Variable
        //map.put("KEY_ID", list.getString("id_resto"));
        map.put("KEY_NAME", list.getString("nama_resto"));
        map.put("KEY_ADDRESS", list.getString("alamat_resto"));
        map.put("KEY_THUMB", list.getString("thumb_img"));
        userList.add(map); 
```

那会做得很好。谢谢。

# java - 为什么我的paintComponent() 方法没有被调用？

> ID：10116284
> 
> 赞同：2
> 
> 时间：2012-04-12T01:33:54.370
> 
> 标签：java, swing, loops, jframe, paintcomponent

这是我的渲染类：

游戏.java

```
package poke;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.GridLayout;
import java.awt.Image;
import java.awt.Toolkit;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;

import javax.swing.JFrame;
import javax.swing.JPanel;

import poke.GamePanel;

import poke.graphics.GraphicsHandler;
import poke.player.Player;
import poke.player.PlayerHandler;
import poke.world.WorldHandler;

public class Game extends JFrame implements MouseListener, MouseMotionListener, KeyListener {

    private GamePanel gamePanel = new GamePanel();
    public static Toolkit toolkit = Toolkit.getDefaultToolkit();
    public static final int gameWidth = 1280;
    public static final int gameHeight = 720;

    public static String version = "Indev v0.1";
    private boolean running = false;

       private int fps = 60;
       private int frameCount = 0;

    // GAME INITIALIZATION

    public Game() {
        super("PokéRealms Client " + version);
        JFrame f = new JFrame();
        setVisible(true);
        running = true;
        setSize(new Dimension(gameWidth, gameHeight));
        setResizable(false);
        setBackground(Color.BLACK);

        Image icon = toolkit.getImage("./data/graphics/misc/icon.png");
        setIconImage(icon);

        addMouseListener(this);
        addMouseMotionListener(this);
        addKeyListener(this);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        runGameLoop();
    }

    // RUN THREAD

    public void runGameLoop() {
        Thread loop = new Thread() {
            public void run() {
                gameLoop();
            }
        };
        loop.start();
    }

    // GAME LOOP

    private void gameLoop() {

        final double GAME_HERTZ = 30.0;
        final double TIME_BETWEEN_UPDATES = 1000000000 / GAME_HERTZ;
        final int MAX_UPDATES_BEFORE_RENDER = 5;
        double lastUpdateTime = System.nanoTime();
        double lastRenderTime = System.nanoTime();
        final double TARGET_FPS = 60;
        final double TARGET_TIME_BETWEEN_RENDERS = 1000000000 / TARGET_FPS;

        int lastSecondTime = (int) (lastUpdateTime / 1000000000);

        while (running) {

            double now = System.nanoTime();
            int updateCount = 0;

            while( now - lastUpdateTime > TIME_BETWEEN_UPDATES && updateCount < MAX_UPDATES_BEFORE_RENDER ) {
                updateGame();
                lastUpdateTime += TIME_BETWEEN_UPDATES;
                updateCount++;
            }

            if (lastUpdateTime - now > TIME_BETWEEN_UPDATES) {
                lastUpdateTime = now - TIME_BETWEEN_UPDATES;
            }

            float interpolation = Math.min(1.0f, (float) ((now - lastUpdateTime) / TIME_BETWEEN_UPDATES) );
            drawGame(interpolation);
            lastRenderTime = now;

            int thisSecond = (int) (lastUpdateTime / 1000000000);
            if(thisSecond > lastSecondTime) {
                System.out.println("NEW SECOND " + thisSecond + " " + frameCount);
                fps = frameCount;
                frameCount = 0;
                lastSecondTime = thisSecond;
            }

            while(now - lastRenderTime < TARGET_TIME_BETWEEN_RENDERS && now - lastUpdateTime < TIME_BETWEEN_UPDATES) {
                Thread.yield();
                try {
                    Thread.sleep(1);
                } catch(Exception e) {
                    System.err.println(e);
                }

                now = System.nanoTime();
            }
        }
    }

    // UPDATES AND DRAWS

    private void updateGame() {
        gamePanel.update();
    }

    private void drawGame(float interpolation) {
        gamePanel.setInterpolation(interpolation);
        gamePanel.repaint();
    }

    // MAIN METHOD

    public static void main(String[] args) {
        Game game = new Game();
        System.out.println("Game initialized.");
    }
} 
```

游戏面板.java

```
package poke;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.Image;

import javax.swing.JPanel;

import poke.graphics.GraphicsHandler;
import poke.player.PlayerHandler;
import poke.util.ClockTime;
import poke.world.WorldHandler;

public class GamePanel extends JPanel {

    private static final long serialVersionUID = 1L;
    Image image;
    Graphics graphics;
    float interpolation;
    private int fps = 60;
    private int frameCount = 0;
    public boolean time = false;
    public int lastSecond = 0;

    public GamePanel() {
        PlayerHandler.addPlayer(0);
        WorldHandler.loadTiles();
        WorldHandler.loadObjects();
    }

    public void setInterpolation(float interp) {
        interpolation = interp;
    }

    public void update() {
        PlayerHandler.processWalking();
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        if(lastSecond != ClockTime.getSecond()) {
            lastSecond = ClockTime.getSecond();
            time = !time;
        }

        GraphicsHandler.drawWorld(g, time);
        PlayerHandler.process(g);

        image = createImage(getWidth(), getHeight());
        graphics = image.getGraphics();
        g.drawImage(image, 0, 0, this);

        g.setColor(Color.yellow);
        g.drawString("FPS: " + fps, 5, 10);

        frameCount++;
    }
} 
```

我的游戏一直运行良好，但我需要添加一个时间滴答功能，因为游戏逻辑会以与图形相同的速率滴答作响，我最终打算添加多人游戏支持，所以我显然需要为逻辑设置一个固定的时间滴答速率. 我试图在这里实现一个循环，但我不知道为什么我的 paintComponent() 方法没有被调用。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T22:32:17.290

Swing 绘制方法需要由事件处理程序线程调用。见[http://java.sun.com/products/jfc/tsc/articles/threads/threads1.html#single_thread_rule](http://java.sun.com/products/jfc/tsc/articles/threads/threads1.html#single_thread_rule)

# playframework-2.0 - 以编程方式在 Play2.0 中添加路线

> ID：10116286
> 
> 赞同：7
> 
> 时间：2012-04-12T01:34:15.960
> 
> 标签：playframework-2.0

在 play 1.2.X 我们可以做

```
Router.addRoute("GET", "/somePath", "controller.methodName"); 
```

我正在编写一个模块，该模块添加将由模块中的控制器处理的“路由”。它是一个 OAuth 处理程序，希望用户能够轻松地不必处理 OAuth 握手等。

如何在 Play 2.0 中做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-14T11:59:09.983

您不能以编程方式添加到 Routes 对象，但您可以拦截 Web 请求并自己通过覆盖来处理它们`GlobalSettings.onRouteRequest`。例如：

```
override def onRouteRequest(request: RequestHeader): Option[Handler] = {
  //do our own path matching first - otherwise pass it onto play.
  request.path match {
    case "/injectedRoute" => Some(controllers.Application.customRoute)
    case _ => Play.maybeApplication.flatMap(_.routes.flatMap {
      router =>
      router.handlerFor(request)
    })
  }
} 
```

我不知道这是否是推荐的方法，但它对我有用。这是 github 上的一个示例：[https ://github.com/edeustace/play-injected-routes-example](https://github.com/edeustace/play-injected-routes-example)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T12:48:31.200

我不确定你可以。

Play 2.0 的概念是专注于类型安全，其中包括路由文件。路由文件现在已编译，而不是在运行时解释。如果您查看路由文件的代码，它会从路由文件本身生成一个 scala 类。因此，运行时操作将被简单地忽略。

不幸的是，您的路由似乎必须在路由文件中定义，除非您愿意拦截 http 请求以自己检查特定路由，这就是 /@documentation 链接在[ApplicationProvider](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/play/core/system/ApplicationProvider.scala) scala 类中的作用。

另请参阅此错误帖子[https://play.lighthouseapp.com/projects/82401/tickets/12-support-multiple-routes-file-and-inclusion](https://play.lighthouseapp.com/projects/82401/tickets/12-support-multiple-routes-file-and-inclusion)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-06T08:28:57.700

您可以在您的路线文件中添加通用路线（在文件末尾，因为其优先级将根据其声明位置进行评估）

```
GET     /:page  controllers.Application.showPage(page) 
```

将要在运行时执行的逻辑放在控制器类中

```
public static Result showPage(String page){

    if(page.contains("abc"){
      .....
    } else {
      //return 404
    }
} 
```

我不确定它是否符合您的要求，但在大多数情况下就足够了。

* * *

## 回答 #4

> 赞同：-9
> 
> 时间：2012-04-12T12:15:54.690

* ***play2.0* *** **在你的路由文件中添加这一行** GET /somePath controller.methodName()

# php - 浏览器关闭时如何自动注销用户？

> ID：10116292
> 
> 赞同：2
> 
> 时间：2012-04-12T01:35:20.597
> 
> 标签：php, javascript, logout

我有一个聊天程序，它依赖于用户是否在线来保持聊天。所以我想知道，有没有办法在用户关闭整个浏览器时注销用户，而不仅仅是像 Safari、IE 或 Google Chrome 这样的一个窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T01:41:19.690

通过 JavaScript 没有可用的东西可用于检测“整个浏览器”退出。如果您需要在浏览器完全退出时收到通知（即使定义它也不简单），请考虑开发浏览器扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T01:42:37.697

我的浏览器是谷歌浏览器。我有一个想法：设置-最后设置（更多设置-最后）-当他/她关闭浏览器时注销用户，如cookies等。

# zsh - zsh create a command line within a script but do not execute it

> ID：10116293
> 
> 赞同：5
> 
> 时间：2012-04-12T01:35:24.860
> 
> 标签：zsh

I'm wondering if it's possible to write a zsh script that will write a command to the prompt but NOT execute it, i.e. leave it there for me to edit and then execute when I'm ready. I can do something like this with keybindings by leaving off the final '\C-m'. eg:

```
bindkey -s "\e[1;3C" "howdy!" 
```

... I press Alt+RightArrow and the text "howdy!" is printed at the prompt and just left there.

I can also do something like what I want by writing my command to the history file and then recalling it with the up arrow. I've tried 'echo -n sometext' but it doesn't work.

Can I write a script that would exit leaving (say) " howdy! " on the command line? In actual fact I want the script to build up a complex command based on several things, but I want the script to leave it on the CLI for final editing, so automatic execution must be prevented.

Thanks in advance.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T04:53:40.370

原来答案很简单：

```
print -z $string-to-print 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T11:12:44.933

如果您指的是 zsh 函数而不是外部脚本，则可以编写一个 zle（*zsh line editor*的缩写）小部件并将其绑定到某个键。

```
# define to function to use
hello () {
 BUFFER=hello
 zle end-of-line
}
# create a zle widget, which will invoke the function.
zle -N hello
# bindkey Alt-a to that widget
bindkey "\ea" hello 
```

[您可以从Z-Shell 用户指南第 4 章](http://zsh.sourceforge.net/Guide/zshguide04.html)了解更多信息。

# java - Objective-c Byte[] and Java byte[]

> ID：10116296
> 
> 赞同：0
> 
> 时间：2012-04-12T01:35:42.513
> 
> 标签：java, objective-c, byte

When I use `Java` to convert a special string to byte[], its result is:

```
78
-19
-71
-54
-61
-87
12
-99 
```

and when I use `objective-c` to convert the same string, its result is:

```
78
237
185
202
195
169
12
157 
```

Why the byte element is greater than `128` in `objective-c`? I know the reason is about `unsigned`, but how to resolve it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T01:43:50.270

看起来 Java 字节是有符号的，而 Objective-C 字节是无符号的。如果将 256 添加到小于 0 的 Java 字节，则会得到相应的 Obj-C 字节（>= 0 的 Java 字节已经与 Obj-C 字节相同）。它应该很容易转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T01:43:27.517

处理这个问题的方法是简单地将 Java 字节“视为”无符号，当您将它们打印出来或进行比较时。最简单的方法是使用`byteValue & 0xFF`将字节的无符号值作为 int 获取，但一些库可以减轻痛苦——例如，使用[Guava's](http://guava-libraries.googlecode.com) [`UnsignedBytes`](http://docs.guava-libraries.googlecode.com/git-history/v11.0.2/javadoc/com/google/common/primitives/UnsignedBytes.html)，您可以`UnsignedBytes.join(" ", byteArray)`获取空格分隔的无符号字节，如`78 237 185 ...`您给出的举个例子。（披露：我为 Guava 做出了贡献。）

# ios5 - 在 IOS5 下，在创建我自己的委托时使用 ARC，关于使用 _weak 的错误

> ID：10116297
> 
> 赞同：0
> 
> 时间：2012-04-12T01:35:44.873
> 
> 标签：ios5, delegates, automatic-ref-counting

在我的 .h 文件中，我有这个：

```
@protocol ScanBookDelegate
- (void)MethodNameToCallBack:(NSArray *)s;
@end

@property (nonatomic, weak) id  <ScanBookDelegate> delegate; 
```

在我的 .m 文件中，我有：

```
@synthesize delegate; 
```

我收到此错误：

```
Existing ivar 'delegate' for __weak property 'delegate' must be __weak 
```

如何解决此错误？

`NSArray *`当我从 JSON 结果返回数据时，我正在返回一个。

**更新：**

这是我的整个 .h 文件-

```
#import <UIKit/UIKit.h>

@protocol ScanBookDelegate
- (void)MethodNameToCallBack:(NSArray *)s;
@end

@interface jabBookScan : NSObject
<NSURLConnectionDelegate, NSURLConnectionDataDelegate>
{
    NSURLConnection *internalConnection;
    NSMutableData *container;
    id <ScanBookDelegate> delegate;
}
- (id)initWithRequest:(NSURLRequest *)req;
- (void)start;
- (NSMutableData *) lookupBook:(NSString *) isbn;
- (void)fetchedData:(NSData *)responseData;
@property (nonatomic, copy) NSURLRequest *request;
@property (nonatomic, copy) void (^completionBlock)(id obj, NSError *err);
@property (nonatomic, strong) NSDictionary *jsonRootObject;
@property NSMutableData *responseData;
@property NSURL *myURL;
@property (nonatomic, weak) id  <ScanBookDelegate> delegate; 
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T21:06:44.713

摆脱`id <ScanBookDelegate> delegate;`您的 {}（在顶部），它应该可以工作。使用属性时无需指定。如果你真的想要，那么你可以声明 ivar __weak 使其匹配你的属性（默认情况下 ivar 是强的）。

# java - Tool to convert Java source to C++ source

> ID：10116298
> 
> 赞同：5
> 
> 时间：2012-04-12T01:36:01.080
> 
> 标签：java, c++, c, code-translation

Before someone shoots me down, I am aware of the Java to binary compilers and I'm not after one of those.

I also know there will be no perfect tool that converts everything without any problems. I am aware that missing Java libraries are a major problem; however my source doesn't make use of many Java libraries except for stuff like String and prints. I only want to the tool to create the classes that the Java source references. In the case of the String stuff I am happy to fill in the gaps or fix at a later stage. I just want the tool to do the boring bits so I don't have to do the translation manually.

In the case of required classes etc, I will manually fix those at a later stage but would appreciate a pointer to something that at the very least gets enough of the boring stuff done.

Once again I want the source translated and not a compiler to produce a binary. Basically I want to take some Java stuff and convert it to C++ for later use in other projects.

EDIT ADDITIONAL NOTES

Sorry if I was not clear in my previous parts of this question. I know that Java is very much different from C++. I have some Java code which is mostly filled with processing arrays and bits and has almost no object creation. In a sense it is very self-contained and has few calls to other classes. These classes seem to be prime candidates for conversion; the other stuff will have to be rewritten but at the least some parts are leveraged.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-15T05:07:45.910

[j2c](https://bitbucket.org/arnetheduck/j2c)就是其中之一——它将 Java 源代码转换为其粗略的 C++ 等效代码。

显然，其他人提到了许多警告（垃圾收集、同步等），但它将提供一个很好的起点（并且它是开源的，因此您可以轻松地改进这一点=）。

根据您的代码库的大小，编写自己的代码库也可能有意义 - 一旦您有 Java AST 可以使用，编写一个并不是那么难，因为 Java 语法主要是 C++ 的一个子集，并且有许多库将为您解析 Java 代码（例如，j2c 使用 Eclipse 附带的库）。手动进行转换比为其编写工具更容易出错。

# google-maps - Google Maps API for Time and Distance Data (Access/VBA)

> ID：10116301
> 
> 赞同：3
> 
> 时间：2012-04-12T01:36:18.600
> 
> 标签：google-maps, ms-access, google-api, vba

I have an application where it would be highly beneficial to be able to get directly from google maps the time and miles (driving miles) between two addresses. I have plowed through many web sites and documents and totally foxed as to how to do it.

Has anyone made a successful connection with google maps API using Microsoft Approach and extracted time and distance information? If have, o could they share the code they used.

I am trying to set up a driver scheduling system for a volunteer drivers group (driving for people wo medical appointments who cannot drive, cannot afford taxies and cannot afford cars!).

Any help would be appreciated

John Baker

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T16:55:40.650

这里有一些代码可以做你想做的事情。确实意识到谷歌在使用他们的 API 上有一些许可要求/限制。您应该在 Google 地图中使用此处获得的结果。请在此处阅读使用限制：[https ://developers.google.com/maps/documentation/directions/](https://developers.google.com/maps/documentation/directions/)

请注意，除非您更改代码以使用后期绑定，否则这需要引用“Microsoft XML, v6.0”。

```
Dim sXMLURL As String
sXMLURL = "http://maps.googleapis.com/maps/api/directions/xml?origin=NY,+NY&destination=Los+Angeles,+CA&sensor=false"

Dim objXMLHTTP As MSXML2.ServerXMLHTTP
Set objXMLHTTP = New MSXML2.ServerXMLHTTP

With objXMLHTTP
    .Open "GET", sXMLURL, False
    .setRequestHeader "Content-Type", "application/x-www-form-URLEncoded"
    .Send
End With

'Debug.Print objXMLHTTP.ResponseText

Dim domResponse as DOMDocument60
Set domResponse = New DOMDocument60
domResponse.loadXML objXMLHTTP.ResponseText
Dim ixnStatus
Set ixnStatus = domResponse.selectSingleNode("//status")

If ixnStatus.Text = "OK" Then
    Dim ixnDistance, ixnDuration
    Set ixnDistance = domResponse.selectSingleNode("/DirectionsResponse/route/leg/distance/text")
    Set ixnDuration = domResponse.selectSingleNode("/DirectionsResponse/route/leg/duration/text")

    Debug.Print "Distance: " & ixnDistance.Text 'Miles
    Debug.Print "Duration: " & ixnDuration.Text 'Days Hours Minutes
End If

Set domResponse = Nothing
Set objXMLHTTP = Nothing 
```

我故意选择使用 XML 而不是 JSON，因为 VBA 与 JSON 并不太方便，我也不是。有一个模块可以下载，通常称为 VBJSON，但它有一点学习曲线，特别是如果你从未工作过之前使用 JSON。我相信 XML 更“昂贵”（效率较低），但我认为在 Access VBA 中使用它也更容易。

# java - Derby：从不同的表中引用多个外键

> ID：10116303
> 
> 赞同：4
> 
> 时间：2012-04-12T01:36:22.907
> 
> 标签：java, derby, javadb

再会！

我一直在 Internet 上搜索我的问题的答案，但一直没有找到答案。如何从 Derby 数据库的不同表中引用外键？

这是我当前的 SQL 代码：

```
CREATE TABLE class_t
(course_id VARCHAR(6) NOT NULL,
semester VARCHAR(6) NOT NULL CONSTRAINT sem_constraint CHECK (semester IN ('1st','2nd','module')),
school_year DATE NOT NULL,
course_name VARCHAR(70) NOT NULL,
CONSTRAINT class_pk PRIMARY KEY (course_id, semester, school_year)
);

CREATE TABLE student_t
(id_number INT NOT NULL,
fullname VARCHAR(35) NOT NULL,
contact_num VARCHAR(35),
email VARCHAR(25),
CONSTRAINT student_pk PRIMARY KEY (id_number)
);

CREATE TABLE student_list
(course_id VARCHAR(6) NOT NULL,
semester VARCHAR(6) NOT NULL CONSTRAINT sem_constraint2 CHECK (semester IN ('1st','2nd','module')),
school_year DATE NOT NULL,
id_number INT NOT NULL,
CONSTRAINT student_list_pk PRIMARY KEY (course_id, semester, school_year, id_number),
CONSTRAINT student_list_FK FOREIGN KEY (course_id, semester, school_year, id_number)
REFERENCES class_t (course_id, semester, school_year), student_t (id_number) #this is my problem
); 
```

非常感激您的帮忙！提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T01:11:57.277

没关系，我自己想通了。当我查看示例部分中的[http://db.apache.org/derby/docs/10.2/ref/rrefsqlj13590.html时，对解决方案有所了解。](http://db.apache.org/derby/docs/10.2/ref/rrefsqlj13590.html)来自不同表的每个外键应该有不同的约束。它应该是这样的：

```
CREATE TABLE student_list
(course_id VARCHAR(6) NOT NULL,
semester VARCHAR(6) NOT NULL CONSTRAINT sem_constraint2 CHECK (semester IN ('1st','2nd','module')),
school_year DATE NOT NULL,
id_number INT NOT NULL,
CONSTRAINT student_list_pk PRIMARY KEY (course_id, semester, school_year, id_number),
CONSTRAINT student_list_fk1 FOREIGN KEY (course_id, semester, school_year)
REFERENCES class_t (course_id, semester, school_year),
CONSTRAINT student_list_fk2 FOREIGN KEY (id_number)
REFERENCES student_t (id_number)
); 
```

感谢您对 stackoverflow.com 社区的所有帮助！:)

# iphone - 为什么这个循环会崩溃？

> ID：10116304
> 
> 赞同：1
> 
> 时间：2012-04-12T01:36:28.510
> 
> 标签：iphone, objective-c, xcode, ipad, loops

我正在尝试构建一种 在用户点击按钮时计算内部收益率[http://www.investopedia.com/articles/07/internal_rate_return.asp#axzz1rm5UPp8V的方法。](http://www.investopedia.com/articles/07/internal_rate_return.asp#axzz1rm5UPp8V)现金流已经存储在称为“cashFlows”的 NSMutableArray 中。现在在数组中，如果我的值为 -100、100、100、100，利率为 10%，它工作正常。但是当我有 -5、100、100、100 的值时，程序崩溃和/或冻结。

我似乎无法弄清楚这一点。我想知道该方法是否计算量太大，以至于我的计算机无法处理，因为该程序可能会循环数百万次。也许有更好的方法来做到这一点？

```
-(IBAction) calculateIRR{
double NPV;

double rate = 0.1;
int period = 1;
double tempPV = 0;
int count = 0;

do{
    NPV = 0;
    period = 1;
    for (int i=0; i < [cashFlows count]; i++) {
        double amount = ([[cashFlows objectAtIndex:i] doubleValue]);
        if(i == 0){
            NPV = amount;
        } else{
            tempPV = (amount/pow(1+rate,period));
            NPV = tempPV + NPV;
            period++;
        }
    }
    rate = rate + 0.0000001;
    count++;
} while(NPV > 0);

answer.text = [[NSString alloc]  initWithFormat:@"%.4f %%", rate * 100];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T06:09:42.083

输入值为 -5、100、100、100 时，IRR 为 2000%。你的算法必须循环运行 200 亿次！也许在某些时候你的内存用完了，或者只是需要很多时间。

您应该使用一些更有效的数值算法。我能想到的最简单的是 Bisection 方法：[http ://en.wikipedia.org/wiki/Bisection_method](http://en.wikipedia.org/wiki/Bisection_method)

您必须选择合理的起点，但如果解决方案位于区间之外（或中断算法并退出并发出有关不合适输入的警告），还必须添加一种修改起点的方法。

# javascript - JS inserting substr(1) into a var

> ID：10116305
> 
> 赞同：0
> 
> 时间：2012-04-12T01:36:43.437
> 
> 标签：javascript, substr

From an open code I have this line

```
var average = parseFloat($(this).attr('id').split('_')[0]), 
```

It gets the first part of a div id with '_' as delimiter. The problem is that an id cannot start with a number (naming violation convention). So I am going to add a letter before the id value in my php script. How do I insert substr(1) to this var to remove this letter and get 'average' as expected?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T01:41:01.070

Assuming you're talking about this format for an id:

```
<div id="A1000_bc"></div> 
```

You can insert the `substr(1)` like this:

```
var average = parseFloat(this.id.split('_')[0].substr(1)); 
```

I might prefer to do it like this so it's a little less presumptious about the exact format and just grabs the first floating point numeric sequence:

```
var average = parseFloat(this.id.match(/[\d\.\+\-]+/)[0]); 
```

Also, notice how I removed the jQuery. `$(this).attr("id")` performs a lot worse than `this.id` and offers no advantages here. jQuery should be used only when it's actually better than plain JS.

Both of these methods assume you are only going to present the code with properly formatted ids. If you want to handle a default condition when the id is not in the right format, then you will need multiple lines of code with some `if` conditions to check for validity and offer a default result when not valid.

Both options work here: [http://jsfiddle.net/jfriend00/B4Rga/](http://jsfiddle.net/jfriend00/B4Rga/)

Incidentally, if you control the HTML here, then there are better places to put data like this than in an id. I'd suggest a custom data attribute (HTML5 standard, but works everywhere).

```
<div id="whatever" data-avg="3.5"></div> 
```

Then, you can get the data like this without having to parse it:

```
var average = parseFloat(this.getAttribute("data-avg")); 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-04-12T01:42:09.967

```
var average = parseFloat(
        $(this)     // you've got a jQuery object here - bad place
        .attr('id') // you've got a string here - why not
        .split('_') // you've got an array here - bad idea
        [0]         // you've got a string here - why not
        // you need to have a number string here 
    ); 
```

记住：`substr(1)`只能在字符串上调用。

# java - Progress bar not showing when using join() on thread

> ID：10116306
> 
> 赞同：0
> 
> 时间：2012-04-12T01:36:56.633
> 
> 标签：java, android, multithreading

```
Private static ProgressDialog loading;

public void downloadData(){
    Thread t = new Thread(){
        public void run(){
          //download stuff
        }
        handler.sendEmptyMessage(0);
    };
    t.start();
    try{
        t.join();
    }catch(InterruptedException ignore){}
}

private Handler handler = new Handler(){
    @Override
    public void handleMessage(Message msg) {
        loading.dismiss();
    }
}; 
```

When I call donloadData without using `t.join()` it displays the ProgressDialog.

However, when using `t.join()`, the t thread seems to execute correctly but the `ProgressDialog` does not show.

Why is the `ProgressDialog` not showing?

Any suggestions on what to change so that I can use `t.join()` and display the `ProgressDialog`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T01:46:11.643

该`t.join`方法将阻止当前线程直到`t thread`完成它的工作。

尝试这个：

```
Private static ProgressDialog loading;

public void downloadData(){
    Thread t = new Thread(){
        public void run(){
          //download stuff

         //edit: when finish down load and send dismiss message
         handler.sendEmptyMessage(0);
        }
        //handler.sendEmptyMessage(0);
    };

    //edit: before start make the dialog show
    loading.show();

    t.start();
    //edit: the join method is not necessary
    try{
        t.join();
    }catch(InterruptedException ignore){}
}

private Handler handler = new Handler(){
    @Override
    public void handleMessage(Message msg) {
        loading.dismiss();
    }
}; 
```

上面的代码可能会解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T02:03:40.170

join() 是一个死亡电话。如果线程阻塞或卡住，在其上调用 join() 可确保卡住有效地扩展到调用线程。

如果您可以侥幸逃脱，请不要使用 join() 。特别是不要通过在 start() 之后直接调用它来等待来自另一个线程的结果。双重——尤其是不要在 GUI 事件处理程序中使用它。

# wpf - Using a generic style as base vs custom user control

> ID：10116310
> 
> 赞同：2
> 
> 时间：2012-04-12T01:37:51.837
> 
> 标签：wpf, button, styles, custom-controls

I'm creating a resource dictionary to my application, where I'll have some "icon+text" buttons. Since they will all look the same (except for the icon and the text), I've created a generic style to serve as base to the others:

```
<!-- Generic ActionButtonStyle -->
<Style x:Key="ActionButtonStyle" TargetType="{x:Type Button}">
    <!-- some setter properties -->
    <Setter Property="ContentTemplate" Value="{DynamicResource ButtonDataTemplate}"/>
</Style>
<DataTemplate x:Key="ButtonDataTemplate">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="24" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <Image  Source="{Binding Source}"
                Stretch="Uniform" 
                Grid.Column="0"
                Margin="2"/>
        <TextBlock  Text="{Binding text}"
                    TextWrapping="Wrap"
                    Grid.Column="1"
                    Margin="2"
                    VerticalAlignment="Center"/>
    </Grid>
</DataTemplate> 
```

And I have some images for the icons:

```
<!-- Icons -->
  <ImageSource x:Key="textToSpeech">Images/GreyIcons/TextToSpeech.png</ImageSource>
  <ImageSource x:Key="play">Images/GreyIcons/Play.png</ImageSource>
  <ImageSource x:Key="playSound">Images/GreyIcons/PaySound.png</ImageSource>
    .
    .
    .
    .
  <ImageSource x:Key="group">Images/GreyIcons/Goup1.png</ImageSource> 
```

And I'd like to create individual styles for each button (corresponding to each icon). Something like this:

```
<!-- Specific ActionButtonStyles -->
<Style x:Key="TextToSpeechButtonStyle" TargetType="{x:Type Button}" BasedOn="{StaticResource ActionButtonStyle}">
    <Setter Property="Content">
        <Setter.Value>
            <Image Source="{StaticResource textToSpeech}"
        </Setter.Value>
    </Setter>
</Style> 
```

I know that this doesn't work.. How should I do it? Should I create a custom user control for the generic button? The text will be binding to an object in my Model, and so will the command (to an action).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T01:51:46.010

您正在寻找的示例似乎丢失了，但您似乎正在寻找“BasedOn” - 它允许您继承，但仍然覆盖先前定义的样式。你可以像这样实现它：

```
<Style x:Key="MyButtonStyle" BasedOn="{StaticResource ActionButtonStyle}">
  <Setter.../>
</Style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T02:19:02.160

您需要从添加两个新 DependancyProperties 的 Button 创建派生类。它们将被称为 Text 和 ImageSource 之类的东西。您的派生类还将按照您的指示设置 ContentTemplate。此 ContentTemplate 将绑定 Text 和 ImageSource 依赖属性。

然后，您可以像这样在 XAML 中创建自定义控件...

```
<app:CustomButton Text="Play" Source="{Binding play}"/> 
```

...但是如果您一遍又一遍地想要同一个按钮，您可以创建一个应用于 CustomButton 的样式并根据需要设置这两个属性。

# php - Zend Auth - Using two tables

> ID：10116314
> 
> 赞同：0
> 
> 时间：2012-04-12T01:38:03.843
> 
> 标签：php, zend-framework, zend-auth

I'm currently developing a website in Zend Framework wich uses Zend_Auth. The current design of the database is the following:

*   users - id / email
*   users_props - id - user_id - prop_name - prop_value

However, the current Zend_Auth_Adapter_DbTable uses only one table, as where I have to tables and need to join them.

How on earth can I do this? As far as i'm concerned, there are three options:

1.  I somehow create a (mysql) view
2.  I change the design so the users table contains both username/password
3.  I rewrite the Zend_Auth_Adapter_DbTable to a Custom_Auth_Adapter_DbTabe

Can anyone point me out what the best practise is?

Thanks in advance :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T01:52:24.643

`Zend_Auth_Adapter`正确的做法是为您的特定数据库模式创建一个自定义的身份验证。

它实际上很简单，接口中只有一个方法可以实现。您也可以`Zend_Auth_Db_Adapter`根据需要扩展和覆盖方法。可能只有构建执行并返回查询结果。但老实说，如果是我，我只会从头开始实施接口。这样IMO容易多了:-)

# jquery-ui - Jquery UI autocomplete IE 7 issue

> ID：10116315
> 
> 赞同：8
> 
> 时间：2012-04-12T01:38:35.647
> 
> 标签：jquery-ui

I am using jquery UI autocomplete. It works in all other browsers FF, Chrome etc except IE7\. Works for higher versions of IE as well but IE7 gives the below error:

```
SCRIPT3: Member not found.
jquery.min.js, line 2 character 30636 
```

This is my function:

```
 $('input.autocomplete').each( function() {
   var $input = $(this);

   // Set-up the autocomplete widget.
   var serverUrl = $input.data('url');

$(this).autocomplete({
   source: function( request, response ) { 

    var countrySelect = $("#countrySelect").val();

 if($input.attr('id') == 'searchJobPostalCode'){

    countrySelect = $("#searchJobCountrySelect").val();

    }else if($input.attr('id') == 'searchPeoplePostalCode'){

    countrySelect = $("#searchUserCountrySelect").val();

    }
    $.ajax({
                url: serverUrl,
                dataType: "json",
                data: {
                    term: request.term,
                    countrySelect: countrySelect
                },
                success: function( data ) {
                        $input.removeClass( "ui-autocomplete-loading" );
                        response( $.map( data, function( item ) {
                        if(typeof item.companyName != 'undefined'){
                            return {
                                label: item.companyName,
                                value: item.companyName,
                                id: item.companyID
                            }
                    }

                        if(typeof item.locationId != 'undefined'){
                            return {
                                label: item.postalCode +','+item.placeName+','+item.adminName1+','+item.countryCode,
                                value: item.postalCode +','+item.placeName+','+item.adminName1+','+item.countryCode,
                                postalCode: item.postalCode,
                                city: item.placeName,
                                state: item.adminName1,
                                country: item.countryCode
                            }
                    }

                        //to show user alias autocomplete on compose message
                        if(typeof item.userAlias != 'undefined'){
                                    var label1 = item.userAlias;
                                    if(typeof item.city != 'undefined'){
                                        label1 = label1+','+item.city;
                                    }
                                    if(typeof item.state != 'undefined'){
                                        label1 = label1+','+item.state;
                                    }
                                    if(typeof item.country != 'undefined'){
                                        label1 = label1+','+item.country;
                                    }

                            return {
                                label: item.userAlias,
                                userAlias: item.userAlias
                            }
                    }

                    }));
                }
            });
        },
        minLength: 3,cacheLength:0,keyDelay:900,
        select: function( event, ui ) {

        $("#companyId").val(ui.item.id);

        if(typeof ui.item.userAlias != 'undefined'){
            $(".toUser").val(ui.item.userAlias);
        }

        if(typeof ui.item.postalCode != 'undefined'){
                $("#postalCode").val(ui.item.postalCode);
                $("#city").val(ui.item.city);
                $("#state").val(ui.item.state);
                $("#country").val(ui.item.country);

                    if($input.attr('id') == 'searchJobPostalCode'){

                                $("#searchPostalCodeJobsSearch").val(ui.item.postalCode);
                                $("#searchCityJobsSearch").val(ui.item.city);
                                $("#searchStateJobsSearch").val(ui.item.state);
                                $("#searchCountryJobsSearch").val(ui.item.country);

                    }else if($input.attr('id') == 'searchPeoplePostalCode'){

                                $("#searchPostalCodePeople").val(ui.item.postalCode);
                                $("#searchCityPeople").val(ui.item.city);
                                $("#searchStatePeople").val(ui.item.state);
                                $("#searchCountryPeople").val(ui.item.country);

                    }

        }
        },
                change: function( event, ui ) {
                if($(this).attr('id') !='companyName'){
                        if ( ui.item == null) {
                                valid = false;
                            }else{
                                valid = true;
                            }
                            if ( !valid ) {
                                // remove invalid value, as it didn't match anything
                                $( this ).val( "" );
                                select.val( "" );
                                input.data( "autocomplete" ).term = "";
                                return false;
                            }
                        }
        },
        open: function() {
            $( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
        },
        close: function() {
            $( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
            $( this ).removeClass( "ui-autocomplete-loading" );

        }
    });

}); 
```

I tried to debug and it errors out at line : `$(this).autocomplete({`

Any idea? Thanks in advance

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T23:14:33.920

看起来问题出在我的操作系统上。我已经安装了 Windows 8 消费者预览版，并且正在使用兼容 IE7 的开发工具运行 IE。它适用于 Windows 7。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T02:11:39.577

我的猜测是其中一个脚本没有正确加载。这发生在我身上一次，使用 jquery 和 IE 7。这是我解决问题的方法：

在 HTML 中，在所有脚本标记之前，添加以下内容：

```
<script type="text/javascript"></script><!--this is here because of an IE bug--> 
```

当我在 jquery.min.js 的标记之前包含该行时，问题就消失了。

IE7是个挫折。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-11-30T14:31:00.647

我解决了更改 ui 版本。现在我使用 1.9.1.custom.min.js（之前是 jquery UI 1.8），它与 IE7 兼容。我使用 jquery v1.7.2

# networking - LCP 和 IPCP 数据包可以在 PPP 中具有不同的帧和字节填充吗？

> ID：10116320
> 
> 赞同：2
> 
> 时间：2012-04-12T01:39:52.937
> 
> 标签：networking, protocols, network-protocols, ppp

我正在研究调制解调器和执行 PPP 的网络堆栈之间的一些中间件。我在初始配置阶段遇到问题。端点与配置请求交换LCP数据包，然后确认，然后其中一个以IPCP配置请求开始；不久之后，其中一人放弃了。这是我不明白的：

LCP 数据包使用类似 HDLC 的成帧。它们以 0x7E 开头，地址跟在 0xFF 之后，当控制字节 0x7D23 = 3 后跟字节填充的有效负载、校验和和帧字符 0x7E。这些数据包看起来像这样：

```
7EFF7D23C0217D217D207D207D347D227D267D207D2A7D207D207D257D267D2BE5E77D257D277D227D287D2295697E 
```

IPCP 数据包看起来完全不同！它们仍然以 0x7E 开头和结尾，并具有 HDLC 校验和，但没有地址或控制字节，也*没有*字节填充。这些数据包看起来像：

```
7E8021010000280206002D0F0103060000000081060000000082060000000083060000000084060000000079067E 
```

这有意义吗？为什么这些数据包看起来如此不同？这里有什么问题还是这是典型的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-18T15:03:22.580

在 LCP 阶段，可以协商摆脱地址和控制字段的“压缩”选项。看看[这个链接](http://www.tcpipguide.com/free/t_PPPGeneralFrameFormat-4.htm)。

# c# - 类成员初始化的简写符号

> ID：10116328
> 
> 赞同：3
> 
> 时间：2012-04-12T01:41:18.247
> 
> 标签：c#

在 C# 块中，我可以定义和初始化一个变量，如下所示：

```
var xyz = new Xyz(); 
```

的类型`xyz`将相应设置。

但是，在类级别，我必须指定类型两次：

```
class Abc
{
    Xyz xyz = new Xyz();
} 
```

是否有避免输入类型名称两次的速记语法？

这对于短类型来说没什么大不了的，`Xyz`但较短的符号对 LongTypeNames 会有所帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T01:46:24.250

如果您使用一些特定类型并希望缩短它们，您可以使用 using 语句创建别名，例如：

```
using ShortName = Abc.Xyz.ClassWithAVeryLongNameThatYouDontLikeTypingTooOften; 
```

然后在该文件中，您可以执行以下操作：

```
class Abc
{
    ShortName xyz = new ShortName();
} 
```

但据我所知，在课堂上没有`var`等价物。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T01:47:51.603

这是这个问题的重复：[Using var outside of a method](https://stackoverflow.com/questions/1929492/using-var-outside-of-a-method)

Which contains a great in-depth answer: [http://blogs.msdn.com/ericlippert/archive/2009/01/26/why-no-var-on-fields.aspx](http://blogs.msdn.com/ericlippert/archive/2009/01/26/why-no-var-on-fields.aspx)

# jquery - Disable/enable jQuery click event to avoid multiple POST requests

> ID：10116331
> 
> 赞同：0
> 
> 时间：2012-04-12T01:41:24.603
> 
> 标签：jquery, onclick, bind, unbind

I have a webpage that shows some news, and a button that when is clicked shows older news doing an AJAX call to the server.

The problem is that if people click too fast, the request is done twice, therefore, I receive 2 equal responses.

*   #mas-noticias-footer is the id of the button that displays older news

*   .noticias-list is the class asigned to each new, using .length I get the number of news displayed, and POST that number to a PHP file that does a SQL query using LIMIT(numItems,3) (I get 3 news at a time).

*   #noticias-display is the ul that contains the news

This is the code

```
$(document).ready(function() {
  $("#mas-noticias-footer").on('click',function() {
var numItems = $('.noticias-list').length;
$.ajax({
        type: "POST",
        url: "mas-noticias.php",
    data: "num-noticias="+numItems,
    success: function(data) {
            $('#noticias-display').append(data);
            }
}); 
  });
}); 
```

I have tried using off() and unbinding the event at the beginning of the on callback, to avoid the multiple calls (that works), the problem is when I delegate the event using on() at the end of the callback, I can't make it work.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T01:49:59.133

您不能方便地调用`off`和稍后调用`on`期望返回的绑定事件，事件不存储在内存中。

但是，您可以在 DOM 中设置数据变量：

```
 $("#mas-noticias-footer").on('click',function() {
     var numItems = $('.noticias-list').length;
     var isAjaxRunning = $(this).data('iar');

     // check flag is set
     if(typeof isAjaxRunning == 'undefined') $(this).data('iar', 'yes'); 
     else if(isAjaxRunning == 'yes') return; // if still running, return

     $.ajax({
        type: "POST",
        url: "mas-noticias.php",
        data: "num-noticias="+numItems,
        success: function(data) {
            $('#noticias-display').append(data);
            $(this).data('iar', 'no'); // after successful run, set to no
        }
     }); 
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T01:55:09.133

我不相信您真的想要在这里进行异步调用。设置`async:false`或使用`$.post()`代替`$.ajax()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T01:49:46.153

```
$(document).ready(function() {
    $("#mas-noticias-footer").on('click', getnews);

    function getnews() {
        $("#mas-noticias-footer").off('click', getnews);
        var numItems = $('.noticias-list').length;
        $.ajax({
            type: "POST",
            url: "mas-noticias.php",
            data: "num-noticias="+numItems,
            success: function(data) {
                $('#noticias-display').append(data);
            },
            complete: function() {
                $("#mas-noticias-footer").on('click', getnews);
            }
        });
    }
}); 
```

如果将 on() 与委托一起使用，请确保以相同的方式使用 off()。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T01:59:44.563

您是否尝试禁用该按钮？

```
$(document).ready(function() {
    $("#mas-noticias-footer").on('click',function() {
        var self=this;
        $(self).attr('disabled','disabled'); //<-Disable
        var numItems = $('.noticias-list').length;
        $.ajax({
            type: "POST",
            url: "mas-noticias.php",
            data: "num-noticias="+numItems,
            success: function(data) {
               $('#noticias-display').append(data);
               $(self).removeAttr('disabled');//<-Enable
            }
        }); 
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T02:15:50.770

我知道这已经得到了回答，但是我已经使用`$.unbind`并稍微分离了代码制作了一个解决方案

[**演示**](http://jsfiddle.net/schawaska/nmmad/)

# oop - UDK GameReplicationInfo relating to GetPC()

> ID：10116332
> 
> 赞同：0
> 
> 时间：2012-04-12T01:41:26.253
> 
> 标签：oop, unreal-development-kit, unrealscript

I'm writing some code that uses a class to interact with a matchmaking server using TcpLink. Since I need to access a single reference to an object of this class throughout the code, I've been saving a reference to the object in the PlayerController class and accessing it throughout the program using the function GetPC. My question is, is it safe to call this function in a subclass of GameReplicationInfo? If it isn't possible, then what are my alternatives for inter-class data transfer? The class instance needs to be accessible from a variety of different places, including instances of GFxMoviePlayer, PlayerController, and, most of all, GameReplicationInfo itself.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T20:33:36.800

如果对象只需要从本地播放器访问，存储引用并仅访问本地播放器控制器中的引用应该没问题，并且是比配置文件更好的解决方案。确保始终使用本地玩家控制器，并且您不应该期望在关卡/服务器切换或连接后保留您的对象。我自己做了一个 Tcplink 匹配服务器，知道 1) 最终你应该计划将 tcplink 与你自己的从在线子系统中提取的类结合起来，2) 同时播放器控制器方法将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T23:36:15.530

叹息，没有答案。我想我只是将值保存在配置文件中，因为速度并不是真正的本质。

# php - 从 Joomla 翻译 HTML 模块

> ID：10116337
> 
> 赞同：0
> 
> 时间：2012-04-12T01:42:26.553
> 
> 标签：php, joomla, joomla1.7

我需要在 Joomla (1.7) 上的自定义 HTML 模块中插入一个语言字符串。

喜欢：（`K2_READ_MORE`而不是`Read more`）

如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T20:10:53.917

你可以这样做：

1.  创建文件夹

> /templates/**你的模板**/html/mod_custom

1.  复制以下文件并编辑它：

> /modules/mod_custom/tmpl/default.php

1.  在大约第 14 行替换：

    <?php echo $module->内容；?>

和：

```
<?php
if(!function_exists('convertJText')) {
    function convertJText($str) { return JText::_($str); };
}
echo preg_replace("/\^\^\^([^\^]+)\^\^\^/ie",'convertJText("$1")', $module->content);
?> 
```

然后，您将能够通过使用**^^^K2_READ_MORE^^^在自定义 HTML 模块中使用可翻译字符串**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T01:53:33.683

试试 Sourcerer 插件：

[http://www.nonumber.nl/extensions/sourcerer](http://www.nonumber.nl/extensions/sourcerer)

# iphone - iPhone初始化方法问题

> ID：10116338
> 
> 赞同：0
> 
> 时间：2012-04-12T01:42:27.530
> 
> 标签：iphone, objective-c, ios

我为 NSArray 创建了一个属性，它创建了一个 getter/setter。我知道 Apple 建议在 init 和 dealloc 方法中使用实例变量。我试图弄清楚在下面的代码中要做什么。

(1) 我需要额外的发布声明吗？数组的保留计数不会是 2，然后是 1 与 dealloc，留下泄漏。或者 autorelease 会解决这个问题吗？

(2) xCode 或仪器中是否有某种方法可以跟踪特定变量以查看其保留计数通过该过程。

```
@property (nonatomic, retain) NSArray *array;

@synthesize arrary = _array;

- (id)initWithNibName:(NSString *)nibNameOrNil 
               bundle:(NSBundle *)nibBundleOrNil 
        initWithArray:(NSArray *)array
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {

        _array = [[NSArray alloc] initWithArray:array];

    }
    return self;
}

- (void)dealloc
{
    [_array release];

    [super dealloc];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T05:12:21.147

> (1) 我需要额外的发布声明吗？数组的保留计数不会是 2，然后是 1 与 dealloc，留下泄漏。或者 autorelease 会解决这个问题吗？

让我们一步一步来：

```
@property (nonatomic, retain) NSArray *array;

// The setter in this case will do the proper ref counting:
@synthesize arrary = _array;

- (id)initWithNibName:(NSString *)nibNameOrNil 
               bundle:(NSBundle *)nibBundleOrNil 
        initWithArray:(NSArray *)array
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // _array is nil at allocation
        _array = [[NSArray alloc] initWithArray:array]; // << self holds one reference

    }
    return self;
}

- (void)dealloc
{
    [_array release];  // << self holds zero references
    [super dealloc];
} 
```

换句话说，你*不需要*更多。就个人而言，我只会`copy`在初始化程序和属性中使用（而不是`retain`）。

> (2) xCode 或仪器中是否有某种方法可以跟踪特定变量以查看其保留计数通过该过程。

是的。但是，有几个运行时快捷方式和例外情况。

最简单的方法是使用分配工具运行工具，然后启用引用计数记录。然后它将记录每个单独对象的每个引用计数的回溯和时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T01:50:46.753

**编辑**：更改为符合 Apple 的建议。此答案后面的评论指的是我的原始（并且非常糟糕）版本。以后，我会适当关注iOS 开发者库中的[实用内存管理](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html)。

**问题 (1)**：不，您不需要额外的版本。之后`[[ASArray alloc] initWithArray:array]`，您的数组将有一个保留计数`1`。在`dealloc`中，对 的调用`[_array release]`会将其返回到`0`，并且应该将其释放。

如果`[setArray:]`同时被调用，它将遵守其属性声明，`retain`保留新对象**并**释放旧对象。

如果其他对象或方法保留了您的数组，则他们有责任释放它。如果您的数组的 retainCount 大于`1`的开头`dealloc`，则其他一些对象正在保留它，至少是暂时的。

**问题 (2)**：您可以`retainCount`在运行时检查，但正如[NSObject 协议参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/retainCount)所警告的那样，您的对象很容易在多个自动释放池中结束，从而使其计数高得毫无意义。

**奖励**：您可能会认为`[[NSArray alloc] initWithArray:array]`将使用其输入的保留计数和添加`1`。仅当通过保留和传递对不可变源的引用来制作“副本”时才会发生这种情况，在这种情况下，其他一些对象也保留对该源的引用。 `[[NSString alloc] initWithString:]`检测其来源是否不可变并执行此操作；`[[NSArray alloc] initWithArray:]`才不是。 `[NSArray copy]`另一方面，将保留并返回自身。

这些优化当然是特定于实现的，不应该假设。然而，构造一些对象，避免自动释放，并遵循它们的地址和retainCounts，这可能是有教育意义的，如下所示：

```
NSArray *array1 = [[NSArray alloc] initWithObjects:@"a", nil];
// Do not just assign array1 to [[NSArray alloc] init], or you'll get a singleton empty array with a high retain count.
// Make array1 mutable, and array2 should be copied differently.
NSLog(@"Constructed array1");
NSLog(@"array1 address = %p retainCount = %d", array1, [array1 retainCount]);
NSArray *array2 = [array1 copy];
// Use [[NSArray alloc] initWithArray:] and the results may be different.
NSLog(@"Constructed array2");
NSLog(@"array1 address = %p retainCount = %d", array1, [array1 retainCount]);
NSLog(@"array2 address = %p retainCount = %d", array2, [array2 retainCount]);
[array1 release];
NSLog(@"Released array1");
NSLog(@"array2 address = %p retainCount = %d", array2, [array2 retainCount]);
[array2 release]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T03:37:07.050

1.  你的代码对我来说看起来不错。你不应该放一个额外的版本。在您的 init 方法中，_array 的保留计数为 1。在 dealloc 中释放后，您应该执行 _array = nil，以避免悬空指针。

2.  要检查泄漏，您可以执行以下一项或两项操作：

(i) CMD + Shift + B ---> 这将对您的代码运行分析以发现此类问题。

(ii) 使用“工具”中的“泄漏”和“分配”工具。在这里，您可以查看应用程序在执行时的分配和泄漏（如果有）。它非常有用，有时可以捕捉到“分析”没有捕捉到的东西。

# php - 当被 Postfix 别名为 PHP 脚本时不会触发 - 我束手无策

> ID：10116341
> 
> 赞同：2
> 
> 时间：2012-04-12T01:43:03.890
> 
> 标签：php, linux, email, amazon-ec2, postfix-mta

我试图在这篇文章中包含尽可能多的信息。

我在 Amazon EC2 Ubuntu 服务器上使用 Postfix，似乎我别名为地址的 PHP 脚本没有触发。邮件工作正常，但脚本只是没有触发。我可能错过了一些简单的事情，并且会很感激任何其他想法。

下面的代码是脚本的代码。目前，它只是一个基本脚本，用于将`php://stdin`. 我不确定这是否是编写此脚本的最佳方式，但目前看来还可以，因为它只是用于解决此问题的临时方法。

```
#!/usr/bin/php -q
<?php
$data = '';
$fileName = "parsedData.txt";
$stdin = fopen('php://stdin', 'r');
$fh = fopen($fileName, 'w');
while(!feof($stdin))
{
     $data .= fgets($stdin, 8192);
}
fwrite($fh, $data);
fclose($stdin);
fclose($fh);
?> 
```

我通过将包含一些文本的 .txt 文件传递​​给它来验证它是否有效。

```
./test2.php < data.txt 
```

现在我的 PHP 脚本似乎在本地运行良好，我需要确保它被正确调用。`sudo chmod 777`已在 test2.php 脚本上运行。这是相关的 /etc/aliases 文件条目。

```
test: "|/usr/bin/php -q /var/test/php/test2.php" 
```

每次更改此设置时，我都会运行 newaliases。这似乎是最正确的语法，因为它完全指定了 php 的位置。`test@mydomain`未设置别名时，可以正常接收来自内部和外部的电子邮件。根据 syslog，这已成功交付给命令而不是 maildir。

```
postfix/local[2117]: 022AB407CC: to=<test@mydomain.com>, relay=local, delay=0.5, delays=0.43/0.02/0/0.05, dsn=2.0.0, status=sent **(delivered to command: /usr/bin/php -q /var/test/php/test2.php)** 
```

别名也以以下方式编写但未成功（因为它们由于语法错误而转到 maildir 而不是命令，或者脚本没有触发）。

```
test: |"php -q /var/test/php/test2.php"
test: "|php -q /var/test/php/test2.php"
test: |"/usr/bin/php -q /var/test/php/test2.php"
test: "| php -q /var/test/php/test2.php"
test: "|/var/test/php/test2.php"
test: |"/var/test/php/test2.php" 
```

我的后缀 main.cf 文件的相关部分如下所示 -

```
myhostname = domainnamehere.com
alias_maps = hash:/etc/aliases
alias_database = hash:/etc/aliases
myorigin = /etc/mailname
mydestination = domainnamehere.com, internalawsiphere, localhostinternalaws, localhost
relayhost =
mynetworks = 127.0.0.0/8 [::ffff:127.0.0.0]/104 [::1]/128
mailbox_command =
home_mailbox = Maildir/
mailbox_size_limit = 0
recipient_delimiter = +
inet_interfaces = all
inet_protocols = all 
```

如果脚本被成功调用，我`error_log("script has started!");`在开始时会出现在 php 日志文件中。`test2.php`我确保进入 php.ini 以打开 error_logging 并指定保存位置，但我无法让它工作。能够让它工作会有所帮助，因为我可以判断脚本在执行该`php://stdin`函数时是否失败，因为它处理电子邮件而不是 cat'ed .txt 文件可能存在一些问题。

我的最终目标是获得一项服务，将特定地址上的电子邮件及其附件保存到 MySQL 数据库，然后将每个文件/电子邮件的唯一代码返回给用户。有没有比使用 php 脚本更简单的方法来做这样的事情？squirrelmail 或 dbmail 之类的东西会这样做吗？

我已经完全用尽了我的想法。也许我应该尝试其他电子邮件服务？

哦，StackOverflow 的聪明人，帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T02:07:10.503

首先，`chmod 777 <foo>`几乎总是一个巨大的错误。我认识到您处于绝望的状态 - 正如您运行此命令的事实所表明的那样。您希望为系统的每个部分配置所需的[最少权限，以正确完成其工作。](http://en.wikipedia.org/wiki/Principle_of_least_privilege)这有助于防止安全漏洞*并*减少[不必要的耦合](http://en.wikipedia.org/wiki/Coupling_(computer_programming))。但是可执行文件*不*应该被除可执行所有者之外的任何人写入——即便如此，我强烈建议不要这样做。

现在，解决您的问题：

```
#!/usr/bin/php -q
<?php
$data = '';
$fileName = "parsedData.txt"; 
```

您指的是使用*相对*路径名的文件。这很好，如果您总是对它的启动目录有信心，或者如果您希望*用户*控制它的启动目录，但对于自动化工具来说这通常是一个*坏主意。*该`/etc/aliases`机制可能会在主目录中运行别名命令`postfix`，它可能会选择一个仅为此目的而创建的空目录`/var`，并且未来的版本或多或少可以随意更改此行为。将此路径名更改为*绝对*路径名，以准确显示您希望创建此文件的位置 - 或插入显式[`chdir()`](http://php.net/manual/en/function.chdir.php)在脚本开始时调用以将目录更改为您希望数据去往的确切位置。

下一个：

```
$fh = fopen($fileName, 'w');
while(!feof($stdin))
{
     $data .= fgets($stdin, 8192);
}
fwrite($fh, $data); 
```

您没有确保该文件实际上已打开。检查这些返回值。他们会很快为您报告故障，帮助您找到代码中的错误或本地错误配置。我不太了解 PHP，无法告诉您确切地告诉您失败的函数的等价物*，*`perror(3)`但从解释器中获取人类可读的错误代码肯定不会太难。不要忽视错误代码——一旦你的代码被部署，知道vs之间的区别可以节省*几个小时。**`Permission Denied``File or directory not found`*

 **而且，正如[迈克尔指出的那样](https://stackoverflow.com/questions/10116341/php-script-not-firing-when-aliased-to-by-postfix-im-at-wits-end#comment12963624_10116341)，[强制访问控制](http://en.wikipedia.org/wiki/Mandatory_access_control)工具可以防止应用程序在特定位置写入。Ubuntu 上的“默认”MAC 工具是 [AppArmor](http://wiki.ubuntu.com/AppArmor/)，但[SELinux](http://en.wikipedia.org/wiki/Security-Enhanced_Linux)、[TOMOYO](http://tomoyo.sourceforge.jp/index.html.en)或[SMACK](http://schaufler-ca.com/)都是很好的选择。运行`dmesg`并`/var/log/audit/audit.log`查看是否有任何违反政策的行为。如果有，解决问题的步骤会因您使用的 MAC 系统而异。由于您使用的是 Ubuntu，因此很可能是 AppArmor；运行`aa-status`以快速了解您系统上受限的服务，并`aa-logprof`应提示您根据需要修改策略。（不要*盲目*要么说“允许”——也许主动利用尝试已被拒绝。）

（如果您还没有使用 MAC 系统，请考虑这样做。我在 AppArmor 项目上工作了 12 年，不会考虑*不*限制所有通过网络通信的应用程序——但这是我自己的安全需求. 更多偏执的人可能希望限制他们更多的系统，不那么偏执的人可能希望限制他们的系统更少。）**

# java - 是否可以收集Android设备周围的蓝牙设备数量

> ID：10116346
> 
> 赞同：0
> 
> 时间：2012-04-12T01:43:38.873
> 
> 标签：java, android, bluetooth

我想获取位于 android 设备周围的蓝牙设备的数量，然后将该数量存储在 SQLite 数据库中。是否有可能轻松获得该号码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T01:49:34.560

您可以获得可发现设备的列表，并简单地使用 size() 方法来确定有多少。检测可发现设备的过程如下所述：

[蓝牙 | 安卓开发者](http://developer.android.com/guide/topics/wireless/bluetooth.html)

# mongodb - MongoDB - 如何对对象中的多个属性进行查询并将结果分组

> ID：10116350
> 
> 赞同：4
> 
> 时间：2012-04-12T01:44:05.447
> 
> 标签：mongodb

我正在*尝试*学习 MongoDB，但我似乎无法弄清楚如何做到这一点。

假设我有三个这样的对象：

```
 {
            "_id": 99990,
            "type" : 15,
            "attributes": [
                {
                    "id": 1,
                    "value": 115
                }
            ]
        },
        {
            "_id": 99991,
            "type" : 5,
            "attributes": [
                {
                    "id": 1,
                    "value": 120
                }
            ]
        },
        {
            "_id": 99992,
            "type" : 5,
            "attributes": [
                {
                    "id": 1,
                    "value": 120
                }
            ]
        },
        {
            "_id": 99993,
            "type" : 5,
            "attributes": [
                {
                    "id": 1,
                    "value": 150
                }
            ]
        }, 
```

如何根据值为 150 的属性 "id" 1 搜索项目并仅返回 id 99993 ？我今天刚开始玩 MongoDB，所以这可能是一个非常基本的问题。

为了增加挑战，我如何按属性/id/值对类型 5 的每个项目的结果进行分组，并获得如下结果：

```
 "id" : 1, "value" : 150, "count" : 1
 "id" : 1, "value" : 120: "count" : 2 
```

这只是示例数据，模式非常复杂，但对于本练习而言，它应该足够了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T01:56:21.150

对于第一部分，您应该能够通过执行以下操作来检索该记录：

```
db.collectionName.find({"attributes.id": 1, "attributes.value": 150}); 
```

这将只从具有 id = 1 和 value = 150 的属性数组元素的任何对象中检索 _id 字段。

由于您问题的第二部分涉及返回匹配数，因此您应该使用[map-reduce](http://www.mongodb.org/display/DOCS/MapReduce)探索您的选项。您无法使用简单的 Mongo 查询生成该结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-19T06:29:26.760

由于“属性”是一个对象数组，因此您应该在查询中使用“$elemMatch”。

```
db.collectionName.find(
   {
       "attributes" : {
           $elemMatch : {
               "id" : 1, 
               "value": 150
           }
       }
   }
); 
```

如果我们使用@clexmond 建议的查询，也会返回下面提到的示例文档，这是不正确的。

```
 {
        "_id": 99999,
        "type" : 5,
        "attributes": [
            {
                "id": 1,
                "value": 170
            },
            {
                "id": 2,
                "value": 150
            }
        ]
    } 
```

问题的第二部分连我也不知道。我想看看这个问题的答案。如果你已经有了，请分享。

# c# - 如何序列化控件

> ID：10116354
> 
> 赞同：1
> 
> 时间：2012-04-12T01:45:21.147
> 
> 标签：c#, visual-studio-2010, listview, treeview, propertygrid

我们有一个应用程序，其中包含作为 xml 文件的数据库。它具有客户端服务器架构。所以这里服务器将使用数据集从 xml 文件中读取数据并将其存储在 xml 模式中。然后服务器将序列化数据并将其传递给 UI（客户端）。因此 UI 数据通过使用左侧的 Treeview、右上方的 listview 和右下方的 propertygrid 显示。

Ui 中的数据分为类和对象。所以现在我们的数据库中有一个 xml 文件 machineclass.xml 和 machineobjects.xml。machineclass.xml 包含各种类，如电子类、计算机类、农业工具类等，而 machineobjects.xml 包含电视、pentium4 计算机、拖拉机等。所以现在在 UI 中，如果我从树视图中选择电子节点，它将列出电视、收音机、电话等通过使用 Listview，它在右上角包含的任何对象，如果我选择对象“TV”，则电视的相关属性显示在右下角的 propertygrid 中。

所以现在我们有一个任务，如果有人想从父 machineclass.xml 和 machineobjects.xml 中以 xml 文件（.xml）的形式从 UI 中取回选定的对象

例如，如果有人从 UI 列表视图中选择了 TV，并希望以 .xml 文件（tv.xml）的形式进行备份，以便在一段时间后他可以导入数据，我们可以在这里实现什么逻辑？我可以序列化 listview 和 propertygrid，还是有任何选项可以做到这一点？这是我在 UI 中用于复制粘贴操作的一些代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T02:51:08.330

> 我可以序列化 listview 和 propertygrid，还是有任何选项可以做到这一点？

以下是如何序列化 ListView： http:
[//www.codeproject.com/Articles/3335/Persist-ListView-settings-with-serialization](http://www.codeproject.com/Articles/3335/Persist-ListView-settings-with-serialization)

以下是如何序列化 PropertyGrid： http:
[//www.codeproject.com/Articles/27326/Load-and-Save-Data-Using-PropertyGrid](http://www.codeproject.com/Articles/27326/Load-and-Save-Data-Using-PropertyGrid)

我的建议是正确执行，我认为正确的解决方案是序列化 ListView 和 PropertyGrid 也绑定的业务对象。将业务逻辑与 GUI 分离，真的很*简单*！

**编辑**（在 OP 编辑​​问题以显示代码之后）：

**要将数据保存到 XML 文件：**

```
System.Runtime.Serialization.Formatters.Binary.BinaryFormatter BinFormatter = new System.Runtime.Serialization.Formatters.Binary.BinaryFormatter();
System.IO.FileStream FS = new System.IO.FileStream("C:\\tv.xml", IO.FileMode.Create);
BinFormatter.Serialize(FS, new ArrayList(listview1.Items));
FS.Close(); 
```

**从 XML 文件中读取数据：**

```
System.Runtime.Serialization.Formatters.Binary.BinaryFormatter BinFormatter = new System.Runtime.Serialization.Formatters.Binary.BinaryFormatter();
string fname;
System.IO.FileStream FS = new System.IO.FileStream("C:\\tv.xml", IO.FileMode.Open);
listview1.Items.AddRange(BinFormatter.Deserialize(FS).ToArray(typeof(ListViewItem)));
FS.Close(); 
```

以下是使用 PropertyGrid 的方法： [PropertyGrid.Serialize](http://social.msdn.microsoft.com/Forums/en/winforms/thread/25d51bd9-6cc2-4f31-ab5c-6d7f3c85ca7e)

# c# - 局部变量声明问题

> ID：10116355
> 
> 赞同：3
> 
> 时间：2012-04-12T01:45:22.053
> 
> 标签：c#

我收到以下错误：

> 在声明之前不能使用局部变量“dob”

这是我的实现

```
public class Person
    {
        ...
        public string dob { get; set; }
        ...

       public int getAge()
       {
                DateTime origin = DateTime.Parse(dob);
                return DateTime.Today.Year - origin.Year;
        }

        public string getFormattedDoB()
        {
                DateTime origin = DateTime.Parse(dob);
                string dob = origin.ToString("d");
                return dob;
        }
    } 
```

我不知道该怎么做，因为它抱怨它使用了 dob in`getFormattedDoB()`但不是在`getAge()`它之前。如果有人能对此有所了解，那就太好了

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T01:48:37.860

您已经在 getFormattedDoB 中声明了一个名为 dob 的局部变量。编译器无法区分它和成员 dob 之间的区别。尝试在您的意思是成员变量而不是本地的地方添加“this”：

```
DateTime origin = DateTime.Parse(this.dob); 
```

更好的是，不要为局部变量使用相同的名称。

编辑：除非您确实打算设置成员变量而不是创建新变量。在这种情况下，按照安德鲁的建议删除“字符串”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T01:49:15.593

The problem is that you have two `dob`s- the property and the local variable. The scope of a variable declaration (`string dob = ...`) is the whole block (everything between the `{` and `}`). Therefore the compiler thinks that on the line:

```
DateTime origin = DateTime.Parse(dob); 
```

you are using the `dob` *variable* before it is declared, when (we assume) you really meant the `dob` *property*.

As others have mentioned, you should rename the property. The standard naming convention in C# would be

```
public String DateOfBirth { get; set; } 
//(assuming that is what DOB stands for) 
```

or better yet

```
public DateTime DateOfBirth { get; set; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T01:48:58.283

You have reused the variable name "dob" in `getFormattedDoB` as a local string, which is confusing the compiler. There are 2 possible solutions:

1.  Rename the local dob in getFormattedDoB (which you really should do because it's good practice).
2.  Use this.dob in the following line to specify the class level variable (which you should probably also do because it's also good practice:

    DateTime origin = DateTime.Parse(this.dob);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T01:49:25.573

You are redeclaring dob in

```
string dob = origin.ToString("d"); 
```

it should be

```
 dob = origin.ToString("d"); 
```

# iphone - Xcode 上的空应用程序而不是其他代码生成的模板

> ID：10116356
> 
> 赞同：0
> 
> 时间：2012-04-12T01:45:37.810
> 
> 标签：iphone, ios, xcode, ipad

我想从头开始从 Xcode 上的 Empty 应用程序在 Xcode 上创建一个应用程序，我认为这是了解更多幕后情况的好方法......

有人试过吗？推荐任何具体的教程？

我在互联网上找到的那些非常基本或使用其他模板，这些模板确实抽象了很多我想更好地了解的酷代码。

我正在使用 XCode 4.3.2

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T02:04:05.137

David Mark、Jack Nutting 和 Jeff LaMarche 的《开始 iOS 5 开发》深入介绍了如何做到这一点。如果您还没有这样做，我建议您检查一下。

# image-processing - 以编程方式确定数码照片的可能清晰度的方法？

> ID：10116357
> 
> 赞同：4
> 
> 时间：2012-04-12T01:45:38.050
> 
> 标签：image-processing, automation, imagemagick

我想自动检查大量数字图像的清晰度。它不一定是完美的，但如果它可以在> 70％的时间内从模糊的照片中分辨出锐利，那将是救命稻草。

是否有任何库、方法或软件包可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T02:49:35.297

本质上，您只是在查看高频与低频的比率。
但是您需要确定与不同图像的“焦点”相对应的某个级别 - 在光滑沙丘的场景中有点棘手！

一个快速而肮脏的版本可能是在图像上画一条线，然后查看相隔几个像素的像素之间的平均差异 - 大差异 = 高对比度 = 聚焦

大多数算法都在查看一系列图像（用于自动对焦），因此您只需要担心找到最大值。

# linux - 如何在标准输出上显示 Linux 命令的输出并将其通过管道传输到另一个命令？

> ID：10116358
> 
> 赞同：1
> 
> 时间：2012-04-12T01:45:38.353
> 
> 标签：linux, shell, command, pipe

> **可能重复：**
> [如何在将标准输出保留在屏幕上的同时对其进行管道传输？（而不是输出文件）](https://stackoverflow.com/questions/5677201/how-to-pipe-stdout-while-keeping-it-on-screen-and-not-to-a-output-file)

例如我想运行命令：

```
ls -l 
```

然后我有输出到标准输出：

```
drwxr-xr-x 2 user user 4096 Apr 12 12:34 Desktop
-rw-rw-r-- 1 user user 1234 Apr 12 00:00 file 
```

我想将此输出重定向到另一个命令以进行进一步处理（例如重定向到“head -1”以提取第一行）。我可以在一行中完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T01:53:37.757

是的，三通会起作用。就像是：

```
ls -l | tee | head -1 
```

要将输出附加到文件：

```
ls -l | tee -a output.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:33:13.203

有一个名为的工具[`tpipe`](http://linux.die.net/man/1/tpipe)，它允许您将一个命令传递给其他两个命令（如 fork），但默认情况下大多数机器上都没有安装它。使用它，您的问题将通过以下方式解决：

```
ls -l | tpipe head -1 
```

# php - Magento - 创建共享 Cookie 到另一个 URL

> ID：10116364
> 
> 赞同：0
> 
> 时间：2012-04-12T01:47:04.413
> 
> 标签：php, magento

全部

现在，我已经重写了我的网站限制模块。当用户想访问网站时，必须点击是，然后用户可以被重定向到主页，同时生成我网站的cookie。现在我得到一个要求。当用户点击“是”按钮时，浏览器会生成另一个网站，即 url 的 cookie。然后用户可以直接访问该网站，而无需单击两次是按钮。任何人都有任何想法，关于magento如何为此工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T03:22:18.587

起初我认为这是不可能的。但是，通过阅读上面的@benmarks 链接，我发现了这个链接：

[Facebook 如何设置和使用跨域 Cookie](http://nfriedly.com/techblog/2010/08/how-facebook-sets-and-uses-cross-domain-cookies/) http://nfriedly.com/techblog/2010/08/how-facebook-sets-and-uses-cross-domain-cookies/

因此，似乎有一些方法可以提供跨域 cookie，因为在 iframe 之外设置的任何 cookie 都可以从 iframe 内访问。现实是，它远非完美。

尝试在 website1 上放置一个 iframe，以在 website2 上加载页面。让 website2 然后根据第一个 cookie 的值设置它自己的 cookie。

祝你好运。

# java - 免费（最好是开源）语音到文本库的选项

> ID：10116366
> 
> 赞同：11
> 
> 时间：2012-04-12T01:47:27.123
> 
> 标签：java, python, speech-recognition, speech-to-text

寻找将语音转换为文本的库（使用 Java 或 Python API）。100% 的准确度不是绝对要求，因为我只需要为原型运行一些实验。理想情况下，它应该接受一个输入文件（例如，.wav）并将输出作为文本返回。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T03:27:23.537

您可以使用 kdazzle 为您建议的 Sphinx，也可以[在此处](http://java.sun.com/products/java-media/speech/forDevelopers/jsapifaq.html#implementation)查看其他 java 实现。

对于 python 库，请查看[pyspeech](https://github.com/michaelgundlach/pyspeech)或[dragonfly](https://github.com/t4ngo/dragonfly)。如果库可以输出文本，我认为库应该可以将文本打印到文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T01:53:37.187

[斯芬克斯](http://cmusphinx.sourceforge.net/)还不错。它是由卡内基梅隆大学的人制作的。

# c - 堆分配一个二维数组（不是指针数组）

> ID：10116368
> 
> 赞同：26
> 
> 时间：2012-04-12T01:47:31.997
> 
> 标签：c, multidimensional-array, malloc

我正在编写 C 代码，我想堆分配 512*256 字节。为了我自己的方便，我希望能够使用语法 array[a][b]; 访问元素。没有算术来找到正确的索引。

我在网上看到的每个教程都告诉我创建一个指针数组，这些指针指向我想要在数组中包含的行的数组。这意味着每个子数组都需要单独进行 malloc 和 free 。我对只需要一次调用 malloc 和一次调用 free 的解决方案感兴趣。（因此所有元素都是连续的）我认为这是可能的，因为我不会构造锯齿状数组。

如果有人可以分享声明这样一个数组的语法，我将不胜感激。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-12T02:37:11.603

好吧，如果要分配类型的数组，请将其分配给该类型的指针。

由于二维数组是数组的数组（在您的情况下，是 512 个 256 个字符的数组的数组），您应该将它分配给一个指向 256 个字符的数组的指针：

```
char (*arr)[256]=malloc(512*256);
//Now, you can, for example:
arr[500][200]=75; 
```

（周围的括号`*arr`是使其成为指向数组的指针，而不是指针数组）

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-12T01:51:22.563

如果你像这样分配数组，它需要两次调用`free`，但它允许`array[a][b]`样式语法并且是连续的。

```
char **array = malloc(512 * sizeof(char *));
array[0] = malloc(512*256);
for (int i = 1; i < 512; i++)
    array[i] = array[0] + (256 * i); 
```

有关更多信息，请参见`array2`此处：http: [//c-faq.com/aryptr/dynmuldimary.html](http://c-faq.com/aryptr/dynmuldimary.html)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-04-12T02:39:40.770

假设您不需要与古老的 C89 标准兼容（在当前的 C 编译器中，只有 MSVC 和一些嵌入式目标编译器是向后的），这很容易。这是你如何做到的：

```
int (*array)[cols] = malloc(rows * sizeof *array); 
```

然后`array[a][b]`对任何`a`in`[0,rows)`和`b`in都有效`[0,cols)`。

在 C 标准的语言中，`array`具有*可变修饰类型*。如果要将指针传递给其他函数，则需要在函数参数列表中重复此类型，并确保至少将列数传递给函数（因为它需要作为可变修改的一部分类型）。

**编辑：**我错过了 OP 只关心固定尺寸 512x256 的事实。在这种情况下，C89 就足够了，您只需要：

```
int (*array)[256] = malloc(512 * sizeof *array); 
```

如果您需要在函数之间传递指针（也可以作为函数返回类型，但对于这种用途，您可能需要对它进行 typedef... :-)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-12T01:56:55.623

由于您提前知道数组的大小，您可以创建一个`struct`包含 521x256 数组的类型，然后动态分配`struct`.

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-04-12T02:01:23.510

可以动态分配相同类型的多维*数组*

```
static char x[512][256]; 
```

给你，但由于类型衰减，这有点棘手。我只知道如何使用`typedef`：

```
typedef char row[512];
row *x = malloc(sizeof(row) * 256); 
```

这只允许您在运行时确定第二维的大小。如果两个维度在运行时都可以变化，则需要一个涂料向量。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-12T02:00:43.630

如果你知道数组的大小，你就可以`typedef`，并创建一个指向它的指针。这是一个演示此用法的简短片段：

```
#include <stdio.h>
#include <stdlib.h>

typedef int array2d[20][20];

int main() {
    int i,j;
    array2d *a = malloc(sizeof(array2d));
    for(i=0;i!=20;i++)
        for(j=0;j!=20;j++)
            (*a)[i][j] = i + j;

    for(i=0;i!=20;i++)
        for(j=0;j!=20;j++)
            printf("%d ",(*a)[i][j]);
    free(a);
    return 0;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-13T03:15:33.173

所有很好的答案。对于像我这样喜欢在旧机器上使用 Turbo C 等旧编译器进行“复古”编码 16 位的老怪人，我只有一件事要补充。可变长度数组很棒，但不是必需的。

```
 char (*array)[81];
    int lineCount;

    /* Go get your lineCount.*/
    lineCount = GetFileLines("text.fil");

    array = malloc(lineCount * 81); 
```

这就是我们在过去制作“VLA”的方式。它的工作原理与

```
 char (*array)[81] = malloc(lineCount * 81);  /* error pre C99 */ 
```

没有 VLA 的奢华。

只是我的旧的和失去光泽的 2 ​​美分。

# visual-studio - 如何将类库的 applicationSettings 合并到宿主可执行文件的配置文件中

> ID：10116372
> 
> 赞同：6
> 
> 时间：2012-04-12T01:48:08.327
> 
> 标签：visual-studio, settings.settings, application-settings

我正在阅读有关 applicationSettings 的文章和论坛帖子将近一周了。

在几乎每个线程中，似乎都有人正确地指出，类库在部署时不能有配置文件，并且它们在设计时配置的 applicationSettings 必须在托管/的应用程序的*可执行*.exe.config 配置文件中指定/合并消耗 dll。

不一定是真的。

您可以但您不需要合并它们的类库设置，除非您想为用户提供一种“覆盖”默认值的方法——这些默认值是使用在程序集中硬编码的 DefaultValueAttribute 指定的。

所以，举一个非常简单实用的例子。让我们使用 VB.NET 1。我创建了一个名为 ClassLibrary 的类库项目。2\. 显示所有文件，展开 MyProject，双击 Settings.settings。3\. 添加一个名为 Message 的设置，其值为“Hello！”的应用程序范围。4.在Class1.vb中创建一个属性（自动添加的类）

```
Public Class Class1

    Public Shared ReadOnly Property Message As String
        Get
            Return My.Settings.Message
        End Get
    End Property

End Class 
```

1.  创建一个 VB WinForms 项目并将其命名为 WinForm。
2.  添加对 ClassLibrary 项目的引用。
3.  向已创建的 Form1 添加一个按钮并双击它。8 将一些代码添加到 Button1_Click 处理程序。应该是这样的。

    公开课形式1

    ```
    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        MessageBox.Show(ClassLibrary.Class1.Message)
    End Sub 
    ```

    结束类

4.  有WinForm“设置为启动项目”

现在，在 IDE 中一切正常。运行解决方案，您将获得预期的 Hello！当您按下按钮时。如果你去更改库的 app.config 中的设置，说“再见！” 然后你再次运行解决方案，你会得到“再见！”

但是，右键单击 WinForm 项目并“在资源管理器中打开”并进入 Debug 文件夹。目前还没有 WinForm.exe.config 文件。让我们快速创建一个。切换回 VS 并在选择 WinForm 项目时单击以显示所有文件。展开 MyProject，打开 Settings.settings，创建一个设置（没关系）并保存。我们开始了，一个 App.config 被创建，如果我构建这个解决方案，Debug 文件夹将包含一个 WinForm.exe.config。

告诉我如何从类库配置中合并我的消息设置

```
<configuration>
    <configSections>
        <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
            <section name="ClassLibrary.My.MySettings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
        </sectionGroup>
    </configSections>

    <applicationSettings>
        <ClassLibrary.My.MySettings>
            <setting name="Message" serializeAs="String">
                <value>Hello!</value>
            </setting>
        </ClassLibrary.My.MySettings>
    </applicationSettings>
</configuration> 
```

进入 WinForm 的配置

```
<configuration>
    <configSections>
        <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
            <section name="WinForm.My.MySettings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
        </sectionGroup>
    </configSections>
    <startup>
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0,Profile=Client" />
    </startup>
    <applicationSettings>
        <WinForm.My.MySettings>
            <!--<setting name="A" serializeAs="String">
                <value>A</value>
            </setting>-->
        </WinForm.My.MySettings>
    </applicationSettings>
</configuration> 
```

所以我可以将 WinForm.exe.config 中的 Message 设置值更改为其他值，应用程序将显示这个新值，覆盖 DefaultValueAttribute。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T02:50:13.890

我最近针对这个 applicationSettings 问题做了一些研究。我找到了两种相对方便的方法来做我要求的事情。[我把我的想法放在一起，在这里](http://walkinghumble.wordpress.com/2012/04/13/exe-dll-assemblies-and-their-config-file-applicationsettings-group-section/)写了一篇博客文章。

1.  您的主程序集所依赖的程序集可以并且将使用您在其各个项目中定义的设置，但仅在开发期间只是因为它们是动态构建的并且包含您上次设置的任何值。但是，当您部署并认为可以为每个程序集放置 .config 时，如果您希望更改设置的值并在运行时反映该值，那么它们将不起作用，这是因为最后一个值被设置为默认值并且是硬编码的。
2.  因此，您必须将所有设置移动到主程序集的 .config 文件中的 appSettings 并在运行时根据需要将它们注入需要它们的程序集（将它们作为参数传递）。
3.  否则，假设这些是您在开发中的配置文件：

![类库.dll.config](../Images/01ed0e0de193b0c62e79db18fdde1085.png)[2](https://i.stack.imgur.com/oUWNC.png)

![Winform.exe.config](../Images/995591b826d9f436a96fe132d1e3914e.png)[3](https://i.stack.imgur.com/FEzys.png)

对于部署，您必须在主配置文件中创建一个配置部分并指向

![修改Winform.exe.config](../Images/d94c55d04dc55376aa0b68c55a99406d.png)

您修改后的“ClassLibrary.dll.config”：

![在此处输入图像描述](../Images/7a2de2f271b0d7820fcc4eb6b1eba8a0.png)

不过，您不必指向外部文件，配置部分的声明可以像这样在主配置文件中进一步指向它们的定义。

![内部部分](../Images/917f3bdcd5e7f5e3b8db86fd2163ff9d.png)

# git - Git推送错误：找不到存储库

> ID：10116373
> 
> 赞同：564
> 
> 时间：2012-04-12T01:48:35.013
> 
> 标签：git, github, git-push

我对`git`and有一个非常奇怪的问题`github`。当我尝试推动时，我得到：

```
git push -u origin master
ERROR: Repository not found.
fatal: The remote end hung up unexpectedly 
```

我添加了遥控器：

```
git remote add origin git@github.com:account-name/repo-name.git 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：734
> 
> 时间：2012-04-19T19:04:31.257

检查您是否具有读写访问权限。

Git 错误消息具有误导性。我有一个类似的问题。我已被添加到现有项目中。我克隆了它并提交了本地更改。我去推送并收到`ERROR: Repository not found.`错误消息。

将我添加到项目中的人授予我对存储库的只读访问权限。他们的改变，我能够推动。

* * *

## 回答 #2

> 赞同：252
> 
> 时间：2017-04-20T16:57:56.853

我有同样的问题，有一个私人回购。

请执行下列操作：

删除远程源

```
git remote rm origin 
```

重新添加来源，但使用您的用户名和密码，并在此 pvt 存储库上具有写入权限

```
git remote add origin  https://USERNAME:PASSWORD@github.com/username/reponame.git 
```

* * *

## 回答 #3

> 赞同：163
> 
> 时间：2013-10-20T15:30:42.427

我遇到了同样的问题，我通过在 repo url 中包含我的用户名和密码来解决它：

```
git clone https://myusername:mypassword@github.com/path_to/myRepo.git 
```

* * *

## 回答 #4

> 赞同：92
> 
> 时间：2018-07-04T22:57:27.230

如果您在**Windows**上使用 Git ，请尝试清除您的凭据：

1.  找到“凭据管理器”（应该在您的控制面板中）
2.  删除与 GitHub 相关的所有凭据

[![在此处输入图像描述](../Images/4cc3ef6e6aef5f31f08eaf0ef77a5271.png)](https://i.stack.imgur.com/6xVrP.png)

* * *

## 回答 #5

> 赞同：83
> 
> 时间：2012-05-18T22:20:20.457

我遇到了同样的错误

```
ERROR: Repository not found.   
fatal: The remote end hung up unexpectedly 
```

我在 Github 上创建了存储库并将其克隆到本地。

我能够通过打开 .git/config 并删除该`[remote "origin"]`部分来解决。

```
[remote "origin"]   
   url = git@github.com:alexagui/my_project.git  
   fetch = +refs/heads/*:refs/remotes/origin/* 
```

然后我运行以下（再次）

```
git remote add origin git@github.com:alexagui/my_project.git  
git push -u origin master 
```

这一次我能够推送到存储库。

* * *

## 回答 #6

> 赞同：43
> 
> 时间：2013-01-15T11:36:03.327

我收到了这个错误（但之前正在工作）。我的问题是缺少与 Github 帐户绑定的 ssh 密钥。您可以使用 . 检查您当前的 ssh 密钥`ssh-add -l`。

如果您的密钥丢失，您可以添加它

```
ssh-add ~/.ssh/your_key 
```

* * *

## 回答 #7

> 赞同：27
> 
> 时间：2018-06-22T14:23:08.227

**我正在使用 Mac**，我很难找到解决方案。我的远程地址是正确的，如前所述，这是**一个凭据问题**。显然，过去我在我的计算机上使用了另一个 Git 帐户，并且 mac 的钥匙串记住了以前帐户的凭据，所以我真的没有被授权推送。

怎么修？在 Mac 上打开**Keychain Access**，选择“所有项目”类别并搜索 git。 **删除**所有找到的结果。

现在转到终端并尝试再次推送。终端将询问用户名和密码。输入新的相关凭据，就是这样！

希望它会帮助某人。我挣扎了几个小时。

* * *

## 回答 #8

> 赞同：27
> 
> 时间：2015-12-15T14:54:13.837

我有一个类似的问题。不正确的凭据被缓存在 OS X 的钥匙串中。

查看：[https ://help.github.com/articles/updating-credentials-from-the-osx-keychain](https://help.github.com/articles/updating-credentials-from-the-osx-keychain)

* * *

## 回答 #9

> 赞同：25
> 
> 时间：2013-10-29T09:24:39.790

```
git remote rm origin
git remote add origin <remote url> 
```

* * *

## 回答 #10

> 赞同：20
> 
> 时间：2018-12-20T08:29:13.633

`remote: Repository not found.`尝试推送到**您没有写入权限的 HTTPS 远程时，这可能是来自**[github](/questions/tagged/github "显示标记为“github”的问题")的令人沮丧的误导性错误消息。

 **### [检查您对存储库的写入权限！](https://help.github.com/articles/managing-an-individual-s-access-to-an-organization-repository/)

尝试使用 SSH 远程访问同一存储库会显示不同的响应：

```
% git remote add ssh git@github.com:our-organisation/some-repository.git

% git fetch ssh
From github.com:our-organisation/some-repository
* [new branch]        MO_Adding_ECS_configs             -> ssh/MO_Adding_ECS_configs
* [new branch]        update_gems                       -> ssh/update_gems

% git push ssh     
ERROR: Repository not found.
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists. 
```

“正确的访问权限？”

那*你为什么不这么说呢？*

在这一点上值得注意的是，虽然这种情况下的 SSH 故障模式*稍微*好一些，但我使用 HTTPS 远程而不是 SSH，因为 [GitHub*推荐*HTTPS over SSH](https://help.github.com/articles/which-remote-url-should-i-use/#cloning-with-https-urls-recommended)。

我了解 GitHub 在某些情况下使用“未找到”表示“禁止”，以防止无意中发现私有存储库的存在。

> 在某些地方，需要身份验证的请求将返回`404 Not Found`，而不是 。`403 Forbidden`这是为了防止私有存储库意外泄漏给未经授权的用户。

-- [GitHub](https://developer.github.com/v3/#authentication)

这是网络上相当普遍的做法，实际上它是这样定义的：

> 404（未找到）状态代码表示源服务器没有找到目标资源的当前表示或**不愿意透露存在的表示。**

——6.5.4 [。404 Not Found，RFC 7231 HTTP/1.1 语义和内容](https://www.rfc-editor.org/rfc/rfc7231#section-6.5.4)（强调我的）

对我来说没有意义的是，当我使用 [凭证助手通过 GitHub 进行身份验证](https://help.github.com/articles/caching-your-github-password-in-git/) *并且*我可以访问该存储库（已成功克隆并获取它）时，GitHub 会因为缺少写权限而*选择对我隐藏它的存在。*

使用网络浏览器检查[https://github.com/our-organisation/some-repository/](https://github.com/our-organisation/some-repository/)确认**我没有对存储库的写入权限**。我们团队的 GitHub 管理员能够在短时间内授予我的团队写入权限，并且我能够将分支向上推。

* * *

## 回答 #11

> 赞同：16
> 
> 时间：2019-03-22T16:29:18.453

如果你的 repo 之前工作正常，突然弹出这个错误，很可能是因为**你的 git 被认证为其他用户，没有访问存储库的权限**。因此，为了推送，您需要做的就是在您的 git 命令中指定正确的用户名和密码。因此，github repo 的推送命令如下所示：

```
git push https://youruser:password@github.com/user/reponame.git 
```

`username and password`需要进行 url 转义，因此**@**应替换为**%40**，依此类推。

* * *

## 回答 #12

> 赞同：11
> 
> 时间：2021-09-25T11:15:39.683

我在尝试推送到私有仓库时也遇到了这个错误，但问题不在于仓库是私有的还是公共的，问题是 Github API 现在使用个人令牌进行身份验证和授权。

以下解决了我的问题：

1.  删除远程来源：`git remote remove origin`

2.  生成个人令牌：您可以在[Github Docs](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token#creating-a-token)中找到说明。

3.  重新添加来源，但使用您的用户名和生成的令牌：

`git remote add origin https://USERNAME:GENERATED_TOKEN@github.com/username/reponame.git`

* * *

## 回答 #13

> 赞同：11
> 
> 时间：2017-05-23T11:50:50.770

这对我有用：

**1.遥控器**

```
$ git remote rm origin
$ git remote add origin git@github.com:<USER>/<REPO>.git 
```

*如果您的 SSH 密钥已在另一个 github 代表上使用，您可以生成一个新密钥。*

**2\. 生成新的 SSH 密钥**

```
$ ssh-keygen -t rsa -b 4096 -C "web@github.com" 
```

**3\. SSH代理级别的key的添加**

```
$ eval "$(ssh-agent -s)"
$ ssh-add ~/.ssh/id_rsa_github 
```

**4\. 将新密钥添加到 Github 存储库。**

* * *

## 回答 #14

> 赞同：10
> 
> 时间：2015-05-09T23:02:24.020

如果您属于 Github 中的某个组，请检查您是否具有写入权限。

* * *

## 回答 #15

> 赞同：10
> 
> 时间：2018-03-16T13:41:43.473

一个问题，对于我在这里没有提到的一些人来说可能很明显，可能是您可以使用 ssh 密钥访问，但您正试图通过 https 将本地存储库连接到远程。

如果是这种情况，那么以下命令应该可以为您解决问题：

```
$ git remote -v
origin  https://github.com/private-repo.git (fetch)
origin  https://github.com/private-repo.git (push)
$ git remote rm origin
$ git remote add origin git@github.com:private-repo.git
$ git remote -v
origin  git@github.com:private-repo.git (fetch)
origin  git@github.com:private-repo.git (push) 
```

> 请注意，上述工作假设：
> 
> 1.  您当前的遥控器已命名`origin`，并且您已经生成了与您的 github 帐户连接的 ssh 密钥
>     
>     
> 2.  您已经有一个与您的 github 帐户关联的 ssh 密钥（并在本地连接）
>     
>     
> 3.  您在 github 上为此 repo 的设置设置了正确的权限（读/写）。

* * *

## 回答 #16

> 赞同：9
> 
> 时间：2013-03-28T23:05:47.223

有类似的问题。问题的根源在于我遵循了一些关于将**新存储库**添加到 Github 的在线教程。

去 Github，创建一个新的 repo，它会要求你添加一个 README，**不要添加**它。创建它，您将获得有关如何推送的说明。

它类似于接下来的两行：

```
git remote add origin https://github.com/YOUR_USER/your-repo.git
git push -u origin master 
```

* * *

## 回答 #17

> 赞同：8
> 
> 时间：2020-08-07T13:17:26.507

我在尝试从我之前连接的私人仓库中提取的 MAC 上遇到了同样的问题。

我通过在 repo url 中包含我的用户名来解决它：

```
git remote set-url origin https://<YOUR_USER_NAME_HERE>@github.com/<YOUR_USER_NAME_HERE>/<REPO>.git 
```

然后我能够从回购中提取。

对于您要克隆的新存储库：

```
git clone https://<YOUR_USER_NAME_HERE>@github.com/<YOUR_USER_NAME_HERE>/<REPO>.git 
```

它会提示您输入该帐户的密码，然后您就可以继续了。

* * *

## 回答 #18

> 赞同：8
> 
> 时间：2017-01-03T10:47:09.127

这解决了我的问题。

```
 git pull https://myusername:mypassword@github.com/path_to/myRepo.git 
```

* * *

## 回答 #19

> 赞同：7
> 
> 时间：2019-12-18T13:53:29.577

**问题**：由于某种原因，Github 不熟悉您的存储库。

**错误：**在 git cli 中提示如下：

> 远程：未找到存储库。致命：未找到存储库'<a href="https://github.com/MyOrganization/projectName.git/" rel="noreferrer">https://github.com/MyOrganization/projectName.git/'

**解决方案：** 2个选项

1.  **Github 可能不熟悉您的凭据：** - 第一个选项是使用正确的凭据克隆项目，`user:password`以防您忘记了这个或生成 ssh 令牌并在您的 Github 中调整此密钥。又名`git push https://<userName>:<password>@github.com/Company/repositoryName.git`

2.  **一些用户的回购权限问题**- 在我的用例中，当我意识到我在我的私人回购中**没有正确的 Github 合作者权限**时，我解决了这个问题。用户可以克隆项目，但不能对源执行任何操作。为了解决这个问题：

> 转到 Github 上的存储库 -> 设置 -> 协作者和团队 -> 添加成员/维护者您的用户 -> 现在他们获得了提交和推送的权限

* * *

## 回答 #20

> 赞同：6
> 
> 时间：2014-09-02T11:52:39.737

您需要检查您的 SSH 访问权限，如下所示：

```
ssh -T git@github.com 
```

这个问题是因为我没有在存储库中添加关于 SSH 的人员响应，请阅读有关 SSH [link-1](https://help.github.com/articles/error-repository-not-found)和[link-2](https://help.github.com/articles/generating-ssh-keys)的更多信息。

* * *

## 回答 #21

> 赞同：5
> 
> 时间：2014-11-09T14:15:51.513

遇到过同样的问题。多年来一切都运行良好，然后突然出现这个错误。

问题是我在我的用户的 github SSH 密钥（我总是用来访问有问题的 repo）之前为我的 SSH 代理添加了另一个 repo 的部署密钥。SSH 代理首先尝试了另一个 repo 的部署密钥，而 GitHub 出于某种完全无法解释的原因说

```
ERROR: Repository not found. 
```

从 SSH 代理中删除部署密钥后，一切都恢复正常。

* * *

## 回答 #22

> 赞同：5
> 
> 时间：2017-09-08T07:31:22.820

我有同样的问题。请尝试以下操作：

1\. 修改 Mac 中的钥匙串访问以获取 git 凭据解决了我的问题。
2\. 重置原始地址

```
git remote rm origin
git remote add origin git@github.com:account-name/repo-name.git 
```

* * *

## 回答 #23

> 赞同：5
> 
> 时间：2020-07-29T20:07:55.300

我的 Github 存储库之一遇到了同样的问题。

## 方法：

> 使用`SSH`而不是`HTTPS`然后`push/pull`开始正常工作。

* * *

## 回答 #24

> 赞同：5
> 
> 时间：2017-01-05T05:06:42.993

这是解决我的问题的方法

```
#check current github account
ssh -T git@github.com

#ensure the correct ssh key used with github
ssh-agent -s
ssh-add ~/.ssh/YOUR-GITHUB-KEY

#re-add the origin
git remote add origin git@github.com:YOUR-USER/YOUR-REPO.GIT
git push -u origin master 
```

* * *

## 回答 #25

> 赞同：5
> 
> 时间：2019-11-18T16:21:45.613

如果你从 github 克隆 using`https`但你正在使用`ssh`推送，你也可以得到这个错误。

要更正此问题，请打开`.git/config`并替换：

`url = https://github.com/company/project.git`

和

`url = git@github.com:company/project.git`

而且你应该能够毫无警告地推动......

* * *

## 回答 #26

> 赞同：5
> 
> 时间：2016-04-22T18:40:35.343

以下为我解决了这个问题。

首先，我使用这个命令来确定使用的 github 帐户是什么：

```
ssh -T git@github.com 
```

这给了我这样的答案：

```
Hi <github_account_name>! You've successfully authenticated, but GitHub does not provide shell access. I just had to give the access to fix the problem. 
```

然后我了解到答案中描述的 Github 用户（github_account_name）在我试图拉取的 Github 存储库中没有得到授权。

* * *

## 回答 #27

> 赞同：4
> 
> 时间：2012-08-08T12:09:56.850

正如 Alex 上面所说，更改 .git/config 文件的内容会有所帮助。我遇到了同样的问题，我认为这是因为我更改了 Github 用户名。无法使用更改更新本地文件。因此，也许每当您更改用户名时，您可能会考虑运行

`git remote add origin your_ssh_link_from_github`

我希望这有帮助 ;）

* * *

## 回答 #28

> 赞同：4
> 
> 时间：2020-12-30T16:38:08.577

为了解决这个问题（在 Linux 上），我只需要运行这个：

```
git config --global --unset credential.helper 
```

* * *

## 回答 #29

> 赞同：4
> 
> 时间：2016-09-27T11:04:20.853

如果有人在 github.com 上遇到问题，请检查您是否在回购所有者允许向您提交后接受了邀请。在您接受邀请之前，您将无法看到 repo。所以你会得到`ERROR: Repository not found.`

* * *

## 回答 #30

> 赞同：4
> 
> 时间：2020-08-14T06:45:13.087

我可以解释我是如何陷入类似情况的，然后会列出我为解决这个问题而采取的步骤。

我正在使用
Windows 10，
git：git 版本 2.27.0.windows.1。

我已经设置了 git 并且正在进行 git push 活动。Windows 凭据管理器存储用户名和密码，因此您不必在每次 git 远程活动时输入用户名和密码。

当我添加另一个 github 帐户并使用 --local git 设置时，遇到了这个问题。几天后，我遇到了 Repository not found 问题，经过调查我发现：

1.  即使您从 Windows 凭据管理器中删除了 git 详细信息，它也会再次保存您输入的用户名、电子邮件详细信息。

所以，如果你使用两个 git 账户，你需要使用 (git bash as an administrator)

```
git config --edit --system 
```

并删除

```
helper = manager 
```

行，使其不再注册为凭证助手。但每次您进行任何远程活动时，它都会询问您的登录详细信息。

[如何禁用适用于 Windows 的 Git 凭据管理器？](https://stackoverflow.com/questions/37182847/how-do-i-disable-git-credential-manager-for-windows).

要检查远程来源，用户详细信息

```
git config --list --show-origin 
```

* * *

## 回答 #31

> 赞同：3
> 
> 时间：2021-01-20T08:56:21.083

通常会发生这种情况，因为该项目是私有的，您无权编写它。我有几次同样的“问题”，就是因为这个原因。如果项目是您的，只需在此链接之后创建一个私钥和一个公钥：[https ://docs.github.com/en/github/authenticating-to-github/generating-a-new-ssh-key-and -adding-it-to-the-ssh-agent](https://docs.github.com/en/github/authenticating-to-github/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent)并将它们添加到 gitHub 上的“SSH 和密钥”部分，然后你就可以推送到 repo。另一方面，如果该项目不是您的，请要求所有者授予您该项目的权利。

* * *

## 回答 #32

> 赞同：3
> 
> 时间：2020-11-09T14:21:14.373

只需使用 SSH 远程 URL 而不是 HTTPS

* * *

## 回答 #33

> 赞同：3
> 
> 时间：2021-10-08T10:10:40.653

我通过使用 Github 重新进行身份验证解决了这个问题。

如果你有 Github CLI，你可以输入`gh auth login`

* * *

## 回答 #34

> 赞同：2
> 
> 时间：2012-10-01T13:29:54.860

I had the same problem. My issue was misunderstanding that I had to first create the empty repo on github before pushing to it. Doh! Including this here for anyone else who doesn't realize.

* * *

## 回答 #35

> 赞同：2
> 
> 时间：2015-02-27T22:37:23.497

我遇到了这个问题，并意识到我使用的帐户与它所在的帐户不同。以原始用户身份登录解决了该问题。

* * *

## 回答 #36

> 赞同：2
> 
> 时间：2014-04-01T11:11:15.560

如果您使用私有存储库，请检查您的连接用户，它必须具有使用存储库的权限。

* * *

## 回答 #37

> 赞同：2
> 
> 时间：2021-11-18T13:16:28.770

在执行此操作之前，请确保您已写入 repo 的权限。如果您仍然收到错误，请执行以下操作：

1.  通过设置 > 开发人员设置 > 个人访问令牌从您的帐户生成个人访问令牌。将令牌安全地保存在某处。

2.  转到您的存储库并运行以下命令：

    `git remote rm origin`

3.  然后添加一个新的来源以及您的用户名：

    `git remote add origin https://USERNAME@github.com/REPOSITORY_LINK.git`

4.  现在，当您推送代码时，将出现一个提示，询问您的密码或个人访问令牌。将我们在第一步中生成的令牌粘贴到该字段中，我们就完成了。

* * *

## 回答 #38

> 赞同：1
> 
> 时间：2013-01-11T19:45:54.737

转到您的项目文件夹，然后搜索 .git 文件夹，然后用记事本打开配置文件并检查是否有指向 github repo 的链接：[remote "origin"]，如果它与您的 github 中的 repo 不同然后只需编辑它，或使用配置文件中的名称打开一个新的 repo

* * *

## 回答 #39

> 赞同：1
> 
> 时间：2014-11-25T13:15:16.857

我的解决方案可能对你们中的一些人有用。

将我的 macbook 的操作系统更新到 Yosemite 后，我遇到了同样的错误。我的问题通过重新创建我的 ssh 密钥得到了解决。您可以按照此页面的第 2 步执行此操作：[https ://help.github.com/articles/generating-ssh-keys/](https://help.github.com/articles/generating-ssh-keys/)

* * *

## 回答 #40

> 赞同：1
> 
> 时间：2020-03-12T07:39:11.433

我遇到了同样的问题并尝试了很多方法，但最后，我必须知道我没有足够的权限来推送或拉取这个 repo，还有一种方法可以检查你是否拥有权限无法在该存储库中看到设置选项，如果您有权限，那么您将能够看到设置选项

谢谢！这是我观察到的

* * *

## 回答 #41

> 赞同：1
> 
> 时间：2018-05-14T08:26:59.157

我需要杀死凭证助手进程（多个），它在再次提供凭证后解决了这个问题。

`killall git-credential-cache--daemon`

* * *

## 回答 #42

> 赞同：1
> 
> 时间：2021-10-03T22:25:29.183

我的问题是我创建了一个没有权限的个人开发者令牌

* * *

## 回答 #43

> 赞同：1
> 
> 时间：2022-01-05T13:28:16.253

我的解决方案是这样的：

```
git remote rm origin
git remote add origin https://USERNAME@github.com/username/reponame.git 
```

类似于 Emi-C 的答案，但没有密码。

* * *

## 回答 #44

> 赞同：1
> 
> 时间：2021-03-24T07:12:27.347

[![在此处输入图像描述](../Images/7eb54bb691dabf67da189c5c835edf53.png)](https://i.stack.imgur.com/E0B8V.png)

**步骤1：**

从 HTTPS 复制链接

**第2步：**

在本地存储库中

```
git remote rm origin 
```

**第 3 步**：

在复制的 url 中用 username.password@github.com 替换 github.com

**第4步：**

```
git remote add origin url 
```

* * *

## 回答 #45

> 赞同：1
> 
> 时间：2021-07-30T07:14:32.820

自 2021 年 5 月以来，我（和许多其他人）遇到了这个问题。actions/checkout@v2 中似乎发生了一些变化（GitHub 问题：[https](https://github.com/actions/checkout/issues/254) ://github.com/actions/checkout/issues/254 ）

我通过使用此步骤更改运行器对存储库进行身份验证的方式来解决它。

```
- name: Bump version
    env:
      NODE_AUTH_TOKEN: ${{secrets.GITHUB_TOKEN}}
    run: |
      npm run release
      git remote rm origin
      git remote add origin https://${{github.actor}}:${{secrets.GITHUB_TOKEN}}@github.com/project/repo.git
      git remote -v # for debug only 
      git show-ref # for debug only 
      git push --follow-tags origin HEAD:master 
```

您需要做的就是更改 repo url。GitHub 运行程序将在运行时替换用户名和密码。这适用于两者`actions/checkout@v1`和`actions/checkout@v2`（尚未测试其他人）。

此外，您在网上找到的许多片段都带有权限限制，这将阻止您退回回购协议

```
permissions:
   packages: write
   contents: read 
```

如果您需要推送标签或提交发行说明和包颠簸，请确保删除此内容或授予您的操作内容：写入权限。

* * *

## 回答 #46

> 赞同：1
> 
> 时间：2017-04-19T17:53:10.273

所以对我来说，我的密码中有一个 `（勾号），并且 PhpStorm 在发送 git push 之前删除了该字符：

让我们说这个例子我的密码是`_pa``ssword_`

Phpstorm 将输出以下内容：

`https://_username_:_password_@github.com/_username_/repo.git`

代替

`https://_username_:_pa``ssword_@github.com/_username_/repo.git`

将密码更改为不使用 ` 字符的密码。作品！！！

* * *

## 回答 #47

> 赞同：0
> 
> 时间：2014-03-12T08:48:44.183

首先在命令行新建一个仓库，名字如Ademo.git

在命令行上创建一个新的存储库

touch README.md git init git add README.md git commit -m "first commit" git remote add origin [https://github.com/your_name/Ademo.git](https://github.com/your_name/Ademo.git) git push -u origin master

从命令行推送现有存储库

git remote add origin [https://github.com/your_name/Ademo.git](https://github.com/your_name/Ademo.git) git push -u origin master

* * *

## 回答 #48

> 赞同：0
> 
> 时间：2012-04-12T02:07:09.080

如果您包含您的用户名和 repo 名称，我们可以合理地帮助您，目前我们没有理由认为 repo 确实存在。

此外，如果 repo 是私有的并且您无权访问它，github 会返回“不存在”以避免披露私有 repos 的存在。

编辑：如果您无法克隆它，因为它说它不存在并且它是私有的，那是因为您没有发送身份验证。确保将您的公钥添加到您的密钥环中，或暂时使用 HTTP 基本身份验证。

* * *

## 回答 #49

> 赞同：0
> 
> 时间：2014-12-06T01:49:41.207

### 创建一个分叉

如果没有对该存储库的写入权限，则不需要它。[**按照这些说明**](https://help.github.com/articles/fork-a-repo/)创建一个分支——它是您自己的存储库克隆，您可以自由修改。

创建分叉后，您可以将该存储库克隆到您的计算机。

```
git clone git@github.com:<your-git-handle>/<repository>.git
// It will be cloned to your machine where you run the command 
// under a <repository> folder that it will create. 
```

签出一个新分支并进行更改。

```
git checkout -b my-new-feature 
```

要将您的更改提交到原始存储库，您需要确保它们已被推送

```
/* make changes */
git commit -am "New Feature: Made a new feature!"
git push origin my-new-feature 
```

要将这些更改添加到您从中分叉的原始存储库中，您可以按照[这些说明](https://help.github.com/articles/using-pull-requests/)提交拉取请求。拉取请求基本上，您请求对存储库具有写入权限的用户拉下您所做的更改。可以将其想象为“我要求您将我的更改拉入您的仓库”。

* * *

**注意**：但是，您的 fork 不会与原始存储库中正在进行的所有更改保持同步。您必须定期删除这些更改——但这很容易。

创建分叉后，您可以链接到您从中分叉的存储库，以便您可以提取它的更改并保持最新状态。

```
git remote add upstream git@github.com:<git-user-handle>/<repository>.git 
```

完成此操作后，与对原始存储库所做的更改保持同步非常容易。

```
git checkout master         // checkout your local master
git pull upstream master    // fetch changes from the master branch of the repo you forked from.. which is linked to your fork under the alias "upstream" (common naming convention)
git push origin master      // push the pulled changes onto your local master
git checkout -b new-branch  // create a new branch and start making changes 
```

* * *

## 回答 #50

> 赞同：0
> 
> 时间：2012-11-06T09:08:51.843

将我的 ubuntu 更新到下一个版本后，我遇到了同样的错误

我刚刚在 github 帐户上删除了我的 sshkey，然后重新向该帐户添加了一个 sshkey。

* * *

## 回答 #51

> 赞同：0
> 
> 时间：2013-01-15T03:36:21.360

我得到了同样的错误，因为我更改了我的 github 用户名，然后我这样做：

```
git remote -v 
```

然后：

```
git remote set-url newname newurl 
git push -u origin master 
```

这次我能够推送到存储库。我希望这有帮助。

* * *

## 回答 #52

> 赞同：0
> 
> 时间：2020-07-09T09:34:07.413

*我在使用Android Studio*时遇到了同样的问题，由于身份验证错误，我无法推送提交。

我工作的临时解决方案是使用[GitHub 桌面应用程序](https://desktop.github.com)来推送我的提交，它工作正常。

* * *

## 回答 #53

> 赞同：0
> 
> 时间：2018-10-24T14:05:29.047

我也有同样的问题。

我解决了将我的 gitlab 用户名添加到 gitlab.com url 的问题，如下所示：之前： [https](https://gitlab.com/my_gitlab_user/myrepo.git) ://gitlab.com/my_gitlab_user/myrepo.git 和之后： [https://my_gitlab_user@gitlab.com/my_gitlab_user/myrepo.git](https://my_gitlab_user@gitlab.com/my_gitlab_user/myrepo.git) 在这种情况下，将再次要求提供凭据并完成！

* * *

## 回答 #54

> 赞同：0
> 
> 时间：2021-11-05T12:46:17.423

在我的情况下，这是由 git 使用错误的 ssh 私钥引起的。我在学校使用的特定 github 用户帐户下获得了对存储库的访问权限。不幸的是，我的默认 ssh 私钥链接到了不同的 github 帐户。

如果你这样做，`ssh -T git@github.com`ssh 将自动使用你的`id_rsa`私钥连接到 github。

使用`ssh -i ~/.ssh/<some-key> -T git@github.com`应该会导致 github 使用您链接到该密钥的帐户向您致意。

所以在我的情况下发生的事情是 git 使用了我的默认 ssh 私钥，该私钥链接到了错误的 github 帐户，该帐户无权访问我试图访问的私有存储库。

为了解决这个问题，我告诉 git 在本地 git 配置中为我的 repo 使用正确的 ssh 命令，使用以下命令：`git config core.sshCommand "ssh -i ~/.ssh/<correct private key here>"`

查看 git 配置`git config -l`应该显示该行已正确添加。

* * *

## 回答 #55

> 赞同：0
> 
> 时间：2018-10-22T09:48:31.187

这也可能发生，因为 GitHub 本身已关闭。确保检查 status.github.com 以查看问题是否出在他们这边。

在 2018 年 10 月 22 日，你有好几个小时都无法推送到 GitHub。

* * *

## 回答 #56

> 赞同：0
> 
> 时间：2022-01-26T13:51:22.627

如果您确定您已经拥有对此存储库的 SSH 访问权限。

做

```
git clone https://myusername@github.com/path_to/myRepo.git 
```

* * *

## 回答 #57

> 赞同：0
> 
> 时间：2020-02-22T06:57:11.820

我的代码片段：

```
environment {
    ...
    ...
    git_repo = 'my-repo'
}

stage ('Update Helm Chart') {
    steps {
        echo 'Updating values.xml file with latest Docker image tag'

        withCredentials([usernamePassword(credentialsId: '6bgg7dd45-c65f13-4275-a96ddehdv67gdr', usernameVariable: 'GIT_USER', passwordVariable: 'GIT_PASS')]) {
            sh '''
                git checkout ${git_branch}
                ...
                ...
                git remote set-url origin "http://${GIT_USER}:${GIT_PASS}@git.example.com/scm/${git_repo}.git"
                git push origin ${git_branch}
            '''
        }
    }
} 
```

我的 Git 用户名是，`deploy.user@example.com`所以我必须先将[URL 编码](https://en.wikipedia.org/wiki/Percent-encoding) `@`为`%40`. URL 编码后，我的用户名变成了`deploy.user%40example.com`.

但是，我仍然收到以下错误：

```
fatal: repository 'http://****:****@git.example.com/scm/my-repo.git/' not found 
```

经过反复试验，我发现如果我不使用变量作为用户名而是硬编码它，它就可以工作。

```
git remote set-url origin "http://deploy.user%40example.com:${GIT_PASS}@git.example.com/scm/${git_repo}.git" 
```

* * *

## 回答 #58

> 赞同：0
> 
> 时间：2022-01-08T08:38:06.090

这个答案是特定于**IntelliJ**产品的，例如使用**组织时的****IDEA/WebStorm/PHPStorm**。

 **> 当我尝试推送到属于组织的存储库时，我遇到了 WebStorm 的这个问题，同时推送到我正常私人帐户中的存储库是有效的。
> 
> 此外，使用 IntelliJ IDEA 推送到我的组织存储库也有效

所以我认为这可能只是与两个 IDE 之间不同的设置有关，我发现我在 WebStorm 中启用了“使用凭证助手”复选框，并在 IDEA 中禁用了复选框。

[![在此处输入图像描述](../Images/72735989d271b84da81a709c467578b9.png)](https://i.stack.imgur.com/uoWqg.png)

**禁用凭证助手使其工作！**

* * *

## 回答 #59

> 赞同：-1
> 
> 时间：2015-03-27T18:51:39.830

还要确保检查您是否安装了桌面客户端。我仔细检查了所有内容，我的权限，SSH，但事实证明我在客户端中列出的存储库覆盖了我通过终端输入的存储库。

* * *

## 回答 #60

> 赞同：-1
> 
> 时间：2021-02-15T16:40:21.670

您必须生成 ssh 密钥并将其添加到您的 github 帐户中的设置转到您的项目，在其中克隆运行这些命令。-

1-ssh-keygen -t rsa -b 4096 -C“rajankumar148@gmail.com”

命令之后你会得到一些选项路径和名称可以留空，你可以输入密码。

2-eval $(ssh-agent -s) 。

3-ssh-add ~/.ssh/id_rsa

在此命令之后，您必须输入在第一个命令中创建的相同密码

然后你可以检查你的默认主目录或它在终端上显示的任何目录 .pub 文件打开并复制密钥并在 github settings new ssh 中过去

* * *

## 回答 #61

> 赞同：-1
> 
> 时间：2021-06-29T17:25:36.920

使用**Ubuntu**时，我总是必须使用 SSH 而不是 HTTPS 添加远程

```
git remote add origin git@github.com:username/project.git 
```

代替

```
git remote add origin https://github.com/username/project.git 
```****

# android - 在Android中获取菜单组ID？

> ID：10116375
> 
> 赞同：5
> 
> 时间：2012-04-12T01:48:51.837
> 
> 标签：android, contextmenu

是否可以获取菜单项所在的组 ID？

我认为这会起作用，但`getGroupId()`总是返回 0：

xml:

```
<?xml version="1.0" encoding="UTF-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <group android:id="@+id/menu_group">        
        <item android:id="@+id/edit"
              android:title="Edit" />

        <item android:id="@+id/delete"
              android:title="Delete" />               
    </group>              
</menu> 
```

代码：

```
@Override
public boolean onContextItemSelected(MenuItem item) {

    int groupId = item.getGroupId(); //always zero

    return super.onContextItemSelected(item);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T02:20:16.840

`onMenuItemSelected(int featureId, MenuItem item)`在而不是调用这个方法`onContextItemSelected(MenuItem item)`，OptionMenu和ContextMenu是android中两个不同类型的菜单

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T14:41:35.290

我已经用 Fragment 对其进行了测试，它可以工作。看下面的代码：

```
public class ContextMenuActivity extends FragmentActivity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    ContextMenuFragment content = new ContextMenuFragment();
    getSupportFragmentManager().beginTransaction().add(
            android.R.id.content, content).commit();
}

public static class ContextMenuFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View root = inflater.inflate(R.layout.fragment_context_menu, container, false);
        registerForContextMenu(root.findViewById(R.id.long_press));
        return root;
    }

    @Override
    public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
        super.onCreateContextMenu(menu, v, menuInfo);

        new MenuInflater(getActivity().getApplication()).inflate(R.menu.menu, menu);

        menu.add(777, 0, Menu.NONE, "Menu A");
        menu.add(777, 1, Menu.NONE, "Menu B");
    }

    @Override
    public boolean onContextItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case 0:
                Log.i("ContextMenu", "Item 1a was chosen");
                Log.i("ContextMenu", "group: " + item.getGroupId());
                return true;
            case 1:
                Log.i("ContextMenu", "Item 1b was chosen");
                Log.i("ContextMenu", "group: " + item.getGroupId());
                return true;
            case R.id.edit:
                Log.i("ContextMenu", "Item Edit was chosen");
                Log.i("ContextMenu", "group: " + item.getGroupId());
                return true;
            case R.id.delete:
                Log.i("ContextMenu", "Item Delete was chosen");
                Log.i("ContextMenu", "group: " + item.getGroupId());
                return true;
        }
        return super.onContextItemSelected(item);
    }
}
} 
```

`

```
<menu
  xmlns:android="http://schemas.android.com/apk/res/android">
    <group android:id="@+id/menu_group">        
        <item android:id="@+id/edit"
              android:title="Edit"
              android:orderInCategory="0"
              android:menuCategory="system"  />

        <item android:id="@+id/delete"
              android:title="Delete" 
              android:orderInCategory="0"
              android:menuCategory="system"  />               
    </group>              
</menu> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-18T19:40:45.567

试试这个代码 - 有关详细信息，请参阅评论：

```
editTxt.setCustomSelectionActionModeCallback(new ActionMode.Callback(){

            @Override
            public boolean onCreateActionMode(ActionMode mode, Menu menu)
            {

                MenuItem [] menuitems=new MenuItem[]{};
                int i=menuitems.length;

               // menu.removeGroup(i);
                //or
               // menu.setGroupVisible(i,false);
                //or
                menu.setGroupVisible(i,false);

                MenuInflater inflater = mode.getMenuInflater();
                inflater.inflate(R.menu.copypaste, menu);

                return true;
            }
} 
```

# javascript - 结合js数组的

> ID：10116380
> 
> 赞同：0
> 
> 时间：2012-04-12T01:49:35.733
> 
> 标签：javascript

很简单的问题，想不出来。出来。

我有 2 个 js 数组，我需要根据 sub_key 组合成一个新数组。

```
var items = [
    Object { 
        OBJECTID=1,
        Name="COMMAND B", 
        ID="AR0xx",
        sub_key="1000"
        },
    Object {
        OBJECTID=2, 
        Name="95TH PCT", 
        ID="AR0xx",
        sub_key="1001"
        },
   Object { 
        OBJECTID=379, 
        Name="dummy4", 
        ID="AR0xx",
        sub_key="9999"
        }
   ];

var subitems = [
   Object { 
       OBJECTID=787, 
       ID="AR0xx", 
       sub_key=1000, 
       Long_Name = foo
       }, 
   Object { 
       OBJECTID=789, 
       ID="AR0xx", 
       sub_key=1001, 
       Long_Name = "bar"
       }, 
   Object { 
       OBJECTID=1, 
       ID="AR0xx", 
       sub_key=1001, 
       Long_Name="baz"
       }, 
   Object { 
       OBJECTID=788,
       ID="AR0xx", 
       sub_key=1001,
       Long_Name="buzzz"
       }
   ]; 
```

我想创建一个这样的数组，它只是结合了上述两个，基于 sub_key

```
var data = [
    COMMAND B=["foo"],
    95TH PCT=["bar","baz","buzz"]
    dummy4=[]
    ]; 
```

这是我尝试过的，但它不起作用......我想我很接近？谢谢你的帮助！

```
data = [];
for (var key in items){
    var o = items[key];
    //data.push(o.Name);
    for (var subkey in subitems){
        subo = subitems[subkey];
        if (o.sub_key == subo.sub_key){
            data[o.Name].push(subo.Long_Name)
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T02:16:14.863

```
var newarray = items.slice(0); // make a copy
addloop: for (var i=0; i<subitems.length; i++) {
    for (var j=0; j<newarray.length; j++)
        if (subitems[i].sub_key == newarray[j].sub_key)
            continue addloop;
    newarray.push(subitems[i]);
} 
```

应该管用。另一种解决方案：

```
Array.prototype.combine = function(a, test) {
    if (typeof test == "function") {
        for (var i=0; i<a.length; i++)
            if (! this.some(test.bind(null, a[i])))
                this.push(a[i]);
    } else {
        for (var i=0; i<a.length; i++)
            if (this.indexOf(a[i]) == -1)
                this.push(a[i]);
    }
    return this;
};

var newarray = items.slice(0).combine(subitems, function(a, b) {
    return a.sub_key == b.sub_key;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T03:04:48.770

清理你的脚本，这就是你想要做的。它使用 item 中的 Name 和 sub_items 中的匹配 sub_key 创建一个对象数组。

```
var items = [
  { OBJECTID: 1, 
    Name: 'COMMAND B', 
    ID: 'AR0xx', 
    sub_key: '1000' 
  }, 
  { OBJECTID: 2, 
    Name: '95TH PCT', 
    ID: 'AR0xx', 
    sub_key: '1001' 
  }, 
  { OBJECTID: 379, 
    Name: 'dummy4', 
    ID: 'AR0xx', 
    sub_key: '9999' 
  } 
]; 

var subitems = [ 
  { BJECTID: 787,
    ID: 'AR0xx', 
    sub_key: '1000', 
    Long_Name: 'foo' 
  }, 
  { OBJECTID: '789', 
    ID: 'AR0xx', 
    sub_key: '1001', 
    Long_Name: 'bar' 
  }, 
  { OBJECTID: '1', 
    ID: 'AR0xx', 
    sub_key: 1001, 
    Long_Name: 'baz' 
  }, 
  { OBJECTID: '788', 
    ID: 'AR0xx', 
    sub_key: '1001', 
    Long_Name: 'buzzz' 
  } 
]; 

var j = subitems.length;
var result = {};
var p;
var sub_key;
var obj;

for (var i=0, iLen = items.length; i<iLen; i++) {
  p = items[i].Name;
  result[p] = [];
  sub_key = items[i].sub_key;

  for (var j=0, jLen=subitems.length; j<jLen; j++) {

    if (subitems[j].sub_key == sub_key) {
      result[p].push(subitems[j].Long_Name);
    }
  }
}

alert(result['95TH PCT']); // bar, baz, buzz 
```

### 编辑

返回单个对象而不是对象数组，我认为这是必需的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T03:45:52.930

我在火车上写了这个，但没有发布，看起来其他几个人发布了很好的答案，但它可能仍然有帮助，所以我还是会发布它

我有一些不同的事情需要注意：

```
var items = [
    Object { 
        OBJECTID=1,
        Name="COMMAND B", 
        ID="AR0xx",
        sub_key="1000"
    },
    ... 
```

*   这里不需要这个词`Object`，你可以写`{ ... }`，JS 知道它是一个对象。
*   在一个对象中，你需要`:`而不是`=`
*   这不是必需的，但是将键放在引号中是一种很好的做法，因为某些键在其他情况下将不起作用。

所以它应该是这样的：

```
var items = [
    { 
        "OBJECTID": 1,
        "Name": "COMMAND B", 
        "ID": "AR0xx",
        "sub_key": "1000"
    },
    ... 
```

接下来，我并不完全清楚您`data`在第二个块中对数组做什么，但看起来您在第三个块中用一个空数组覆盖它。

另外，我认为您可能会`Objects`有些`Arrays`困惑。[http://nfriedly.com/techblog/2009/06/advanced-javascript-objects-arrays-and-array-like-objects/](http://nfriedly.com/techblog/2009/06/advanced-javascript-objects-arrays-and-array-like-objects/)对差异有一个很好的概述，但这里有一些关键点：

*   `Array`是一个子类`Object`
*   `Array`值总是有数字索引，而不是字符串键
*   `push()`是一种`Array`不的方法`Object`

接下来，你的循环。`for .. in`样式循环确实适用于数组，但通常不推荐使用它们，因为它们也可以点击添加到底层`Object`. `forEach`是我最喜欢的，但它并不总是在没有诸如 [underscore.js](http://documentcloud.github.com/underscore/)之类的库的旧浏览器中可用。

`for(var i=0, len=MyArray.length; i<len; i++) {...}`是您会很常见的另一个选项，因为它涵盖了所有数组项，但没有可能触及底层对象。

但是，由于 Bergi 和 RobG 都有很好的循环，我将在此停止。

# iphone - 使用 UIScrollview 访问 4 个不同的视图

> ID：10116381
> 
> 赞同：1
> 
> 时间：2012-04-12T01:49:40.887
> 
> 标签：iphone, uiscrollview, views, uiswipegesturerecognizer

这似乎应该很简单，但我真的卡住了。我基本上想启动应用程序，然后它进入中心视图，用户可以在其中向上或向下滑动以访问四个不同的视图。图片几乎概括了它。我将使图片中的文本“向上滑动查看 1”“向下滑动以查看.....”按钮也可以实现与滑动相同的功能，但我不想要求太多，所以如果有人可以帮助我出来告诉我如何对我正在寻找的东西进行编程，我将不胜感激。![应用程序的主菜单视图](../Images/38ea9ac9db7c8f63cf46b61231be3cd3.png)

我能够让它成为一个巨大的视图，但我意识到我希望它跳转到每个不同的视图，而不是滚动到一半。当我尝试制作 cgrect 框架时，要保持一切井井有条是非常令人困惑的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T04:10:35.770

在这里，我为您提供示例代码。我只是为两个视图编写代码。您只需要根据滚动确定视图位置即可。

```
-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
if(scroll.contentOffset.y> 480 && scroll.contentOffset.x<320)
{
     //where next view is you view which you need to display according your requirements.
    next *pushnext = [[next alloc]initWithNibName:@"next" bundle:nil];

    [self.view addSubview:pushnext.view];
    CGRect frame = pushnext.view.frame;
    frame.origin.x = 10;
    pushnext.view.frame = frame;

    [pushnext release];
}
else if(scroll.contentOffset.y<480 && scroll.contentOffset.x>320)
{
    //where next view is you view which you need to display according your requirements.
    next *pushnext = [[next alloc]initWithNibName:@"next" bundle:nil];

    [self.view addSubview:pushnext.view];
    CGRect frame = pushnext.view.frame;
    frame.origin.x = 10;
    pushnext.view.frame = frame;

    [pushnext release];
}

} 
```

我希望这能帮到您。

# asp.net-mvc-3 - 在 Post 上，下拉列表 SelectList.SelectedValue 为空

> ID：10116385
> 
> 赞同：7
> 
> 时间：2012-04-12T01:50:00.723
> 
> 标签：asp.net-mvc-3, razor, drop-down-menu, null, selectedvalue

我的模型如下：

```
public class testCreateModel
{
    public string s1 { get; set; }
    public SelectList DL { get; set; }

    public testCreateModel()
    {
        Dictionary<string, string> items = new Dictionary<string, string>();
        items.Add("1", "Item 1");
        items.Add("2", "Item 2");
        DL = new SelectList(items, "Key", "Value");
    }
} 
```

我的发起行动是：

```
 public ActionResult testCreate()
    {
        testCreateModel model = new testCreateModel();
        return View(model);
    } 
```

我的 Razor 视图（删除了无关部分）是：

```
@model Tasks.Models.testCreateModel

@using (Html.BeginForm()) {
<fieldset>
    <legend>testCreateModel</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.s1)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.s1)
    </div>

    <div class="editor-label">
        Select an item:
    </div>
    <div class="editor-field">
        @Html.DropDownList("dropdownlist", (SelectList)Model.DL)
    </div>

    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset>
} 
```

回发动作是：

```
 public ActionResult testCreate(testCreateModel model, FormCollection collection)
    {
        if (ModelState.IsValid)
        {
            Console.WriteLine("SelectedValue: ",model.DL.SelectedValue);
            Console.WriteLine("FormCollection:", collection["dropdownlist"]);
            // update database here...
        }
        return View(model);
    } 
```

在回发时，model.DL.SelectedValue 为空。（但是，可以从 FormCollection 中获取所选项目，但这不是重点）。否则，DL 对象仍会正确填充，立即窗口输出如下：

```
model.DL
{System.Web.Mvc.SelectList}
    base {System.Web.Mvc.MultiSelectList}: {System.Web.Mvc.SelectList}
    SelectedValue: null
model.DL.Items
Count = 2
    [0]: {[1, Item 1]}
    [1]: {[2, Item 2]}
model.DL.SelectedValue
null 
```

Q1：如何改用 SelectedValue 属性？

现在，如果在 Razor 视图中我将 Html SELECT 标记的名称更改为 DL（即与模型中的属性名称相同）：

```
@Html.DropDownList("DL", (SelectList)Model.DL) 
```

我得到一个例外：

```
No parameterless constructor defined for this object. 
Stack Trace: 
[MissingMethodException: No parameterless constructor defined for this object.]
System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck) +0
System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache) +98
System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean fillCache) +241
System.Activator.CreateInstance(Type type, Boolean nonPublic) +69
System.Web.Mvc.DefaultModelBinder.CreateModel(ControllerContext controllerContext, ModelBindingContext bindingContext, Type modelType) +199
System.Web.Mvc.DefaultModelBinder.BindSimpleModel(ControllerContext controllerContext, ModelBindingContext bindingContext, ValueProviderResult 
... 
```

Q2：为什么？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-12T02:19:37.633

MVC 将仅返回 POST 中所选选项的值，因此您需要一个属性来包含返回的单个值。

作为一个好的建议，尝试通过 ViewBag 设置 SelectLists，这有助于让您的 ViewModel 免受需要填充表单的数据的影响。

所以你的例子可以这样解决：

```
public class testCreateModel
{
    public string s1 { get; set; }
    public int SelectedValue { get; set; }
} 
```

并在您的视图中执行以下操作：

```
@Html.DropDownList("SelectedValue", (SelectList)ViewBag.DL) 
```

在您的 GET 操作中填充 ViewBag.DL 之前。

至于您的 Q2，默认 ModelBinder 要求所有要绑定的类型都具有默认构造函数（以便 ModelBinder 可以创建它们）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-12T07:52:16.293

已选择一个答案，但看看我是如何做到的。下面是我在填充下拉列表时通常如何做的代码。它非常简单，我建议您将其用作构建下拉列表的基础。

在我的视图顶部，我指定了我的视图模型：

```
@model MyProject.ViewModels.MyViewModel 
```

在我看来，我有一个下拉列表，其中显示了用户可以选择的所有银行：

```
<table>
     <tr>
          <td><b>Bank:</b></td>
          <td>
               @Html.DropDownListFor(
                    x => x.BankId,
                    new SelectList(Model.Banks, "Id", "Name", Model.BankId),
                    "-- Select --"
               )
               @Html.ValidationMessageFor(x => x.BankId)
          </td>
     </tr>
</table> 
```

我总是有一个视图的视图模型，我从不将域对象直接传递给视图。在这种情况下，我的视图模型将包含将从数据库中填充的银行列表：

```
public class MyViewModel
{
     // Other properties

     public int BankId { get; set; }
     public IEnumerable<Bank> Banks { get; set; }
} 
```

我的银行域模型：

```
public class Bank
{
     public int Id { get; set; }
     public string Name { get; set; }
} 
```

然后在我的操作方法中创建我的视图模型的一个实例并从数据库中填充银行列表。完成后，我将视图模型返回到视图：

```
public ActionResult MyActionMethod()
{
     MyViewModel viewModel = new ViewModel
     {
          // Database call to get all the banks
          // GetAll returns a list of Bank objects
          Banks = bankService.GetAll()
     };

     return View(viewModel);
}

[HttpPost]
public ActionResult MyActionMethod(MyViewModel viewModel)
{
    // If you have selected an item then BankId would have a value in it
} 
```

我希望这有帮助。

# encryption - Powerbuilder Datawindow 密码加密

> ID：10116386
> 
> 赞同：0
> 
> 时间：2012-04-12T01:50:18.340
> 
> 标签：encryption, powerbuilder

我有一个使用数据窗口选择/更新的表格用户维护窗口。

我需要加密保存在 MSSQL 数据库中的密码。

我有一个用于 Powerbuilder 和 dbo 的函数 f_decrypt。

如何使用 dw.Update() 加密密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T02:46:23.460

可能会写一本关于可能性的小书。我的第一个问题是**存储**加密密码的要求，或者密码是否必须**通过加密的线路**。如果存储是唯一的要求，我倾向于让 DBMS 做一个高级程序员团队花了几个月时间试图做到的事情，而不是自己重新发明轮子。即使它必须通过加密的线路，我也会先查看 DBMS 提供的选项。

如果您必须在客户端执行此操作并处理散列、加盐、防止代码的逆向工程*等*，您自己，可能仍然有十几种方法可以做到这一点。我尝试的第一种方法是为密码用户界面制作一个带有虚拟列的 DataWindow，以及表中的列，例如

```
SELECT '        ' as password_ui,
       table.password_storage,
       ...
FROM table
.... 
```

我会将 password_ui 放在 DataWindow 的用户界面上，并将 password_storage 放在用户界面之外，但要确保 password_storage 作为可更新列包含在更新属性中。然后，在 ItemChanged 上，如果更改的列是 password_ui，我会

```
CHOOSE CASE dwo.Name
   CASE "password_ui"
      SetItem (row, "password_storage", f_encrypt (data))
END CHOOSE 
```

祝你好运，

特里。

# c# - 从 ASP.Net 应用程序链接到 Linkedin 时出现脚本错误

> ID：10116391
> 
> 赞同：0
> 
> 时间：2012-04-12T01:50:47.683
> 
> 标签：c#, asp.net

抱歉，如果这是一个简单的问题，我已尝试寻找解决方案但找不到任何东西。我无法从我的 Asp.Net 站点链接到特定的 Linkedin 配置文件。

我正在使用 Imagemap 服务器控件，但是单击链接时会出现脚本错误“Microsoft JScript 运行时错误：'WebTrack' 未定义”。

如果我单击忽略或继续页面仍然加载，只是想确保它不会在网站发布时引起任何问题。

```
<asp:ImageMap style="border-style:none;" ID="ImageMap1" runat="server" ImageAlign="Top" 
    ImageUrl="someimage.jpg" Width="960" ForeColor="White" 
    HotSpotMode="Navigate">
    <asp:RectangleHotSpot NavigateUrl="http://www.linkedin.com/pub/eldeen-thorne-bsc-hons/16/800/bb2" Bottom="195" Left="170" Right="221" Top="140" Target="_blank" 
        AlternateText="Linkedin Profile" HotSpotMode="Navigate" /> 
```

只是为了确认我只需要链接到该页面。

非常感谢

# mysql - mysql 按限制排序

> ID：10116396
> 
> 赞同：0
> 
> 时间：2012-04-12T01:52:16.853
> 
> 标签：mysql, group-by, sql-order-by

我有一个查询，我想从表中获取 20 个最受欢迎的位置，然后按字母顺序排列它们。我想知道是否有更清洁或更有效的方法来做到这一点？

```
SELECT
  city
FROM (
  SELECT 
    city, 
    count(*) AS cnt
  FROM locations 
  GROUP BY city
  ORDER BY cnt DESC
  LIMIT 20
) s ORDER BY city; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T02:08:31.013

稍微干净一点：

```
SELECT city FROM (
  SELECT city FROM locations 
  GROUP BY city
  ORDER BY count(*) DESC
  LIMIT 20
) s ORDER BY city 
```

`count(*)`如果您不打算使用它，则不需要检索它。

# php - 使用 php 从 xml 中删除元素 - 非正统的 xml

> ID：10116405
> 
> 赞同：0
> 
> 时间：2012-04-12T01:54:07.460
> 
> 标签：php, iphone, ios, xml

我创建了一个解析 xml 文档的 ios 应用程序。如果用户登录，他们的信息将被添加到 xml 文件中。如果用户正在注销或取消登录，我希望能够删除他们。本质上，我需要弄清楚如何删除如下所示的 xml 对象（在本例中为调酒师）：

```
<Bars>
    <Bar>
        <bar_id>0</bar_id>
        <Bartenders>
            <Bartender>
                <imageURL>unique URL</imageURL>
                <shift>20:30</shift>
            </Bartender>
        </Bartenders>
    </Bar>
    <Bar>
        <bar_id>1</bar_id>
        <Bartenders>
               <Bartender>
                      <imageURL>aURL</imageURL>
                      <shift>a shift</shift>
                </Bartender>
                <Bartender>
                          <imageURL>aURL</imageURL>
                          <shift>a shift</shift>
                </Bartender>
        </Bartenders>
    </Bar> 
```

例如，我想根据唯一的 imageURL 删除用户...我也会知道 bar_id。这是我到目前为止所拥有的 php，但我完全愿意接受有关以不同方式进行操作的建议

```
 $newimageURL = $row['imageURL'];
    $newBar_ID = $row['Bar_ID'];

    $xmlUrl = "Bars.xml"; // XML 
    $xmlStr = file_get_contents($xmlUrl);
    $xml = new SimpleXMLElement($xmlStr);
    $bartenders = $xml->xpath('//Bartenders');

         // something needs to happen here to remove the child

    $xml->asXML('Bars.xml'); 
```

有人告诉我我可以使用这种东西：

```
$bartenders->removeChild($bartenders[$newBar_ID]); 
```

或 xpath，但我不确定如何仅使用唯一的 imageXML 获得正确的调酒师的路径。我知道我应该更好地计划/设计这个，但我时间紧迫，这将不得不做。

对不起，我对 php 很不好...谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T01:58:07.243

[在http://php.net/manual/fr/ref.simplexml.php](http://php.net/manual/fr/ref.simplexml.php)有一个非常好的脚本，它工作得很好

```
function removeNode($xml, $path, $multi='one')
{
   $result = $xml->xpath($path);

      # for wrong $path
      if (!isset($result[0])) return false;

      switch ($multi) {
          case 'all':
                $errlevel = error_reporting(E_ALL & ~E_WARNING);
                foreach ($result as $r) unset ($r[0]);
                error_reporting($errlevel);
                return true;

            case 'child':
               unset($result[0][0]);
               return true;

            case 'one':
               if (count($result[0]->children())==0 && count($result)==1) {
                   unset($result[0][0]);
                   return true;
               }

            default:
                  return false;             
      } 
```

}

请点击链接了解更多信息

# r - 使用 cron 调度 R 脚本

> ID：10116411
> 
> 赞同：6
> 
> 时间：2012-04-12T01:55:21.093
> 
> 标签：r, cron

我正在尝试使用 cron 安排我的 R 脚本，但它不起作用。似乎 R 在 cron 中找不到包。任何人都可以帮助我吗？谢谢。

以下是我的 bash 脚本

```
# source  my profile
. /home/winie/.profile
# script.R will load packages
R CMD BATCH /home/script.R 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-12T01:59:26.507

考虑这些提示

1.  使用 Rscript（或更小）而不是`R CMD BATCH`

2.  确保 cron 作业正在运行

3.  确保脚本自行运行

4.  在详细模式下测试几次

我的盒子通过调用 R 脚本的 cronjob 运行有点可见的[CRANberries](http://dirk.eddelbuettel.com/cranberries/)（我通过 littler 执行，[但](http://dirk.eddelbuettel.com/code/littler.html)Rscript 应该也可以工作）。为此，`/etc/crontab`我的 Ubuntu 服务器上的条目是

```
# every few hours, run cranberries
16 */3 * * *    edd     cd /home/edd/cranberries && ./cranberries.r 
```

所以每隔 16 分钟，每隔 3 个小时，就会使用我的 id 运行一个 shell 命令。它进入工作目录，并调用 R 脚本（具有可执行模式等）。

看着这个，我实际上可以运行脚本并`setwd()`在其中包含命令....

# java - Srsly，为什么要在 mutators 上使用 get 和 set？

> ID：10116412
> 
> 赞同：0
> 
> 时间：2012-04-12T01:55:32.953
> 
> 标签：java, mutators

有点“这是现实生活中的时刻”。为什么我们用 get 和 set 前缀命名 mutators：

这样做也很容易和可以理解

我的会员（我的会员会员）

作为 setMyMember 和 getMyMember

Java有这种风格有历史原因吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T01:58:30.847

JavaBeans 规范中指定了 get* 和 set* 命名风格，一些使用反射的库希望使用这种风格。例如，Jackson 映射器可以使用 get/setter 将 java 对象序列化为 JSON，而无需任何额外的注释；如果你使用不同的命名风格，你必须告诉它你的属性在哪里。

请注意，其他一些编程语言使用不同的样式。例如，Perl 库经常使用`->someProperty()`getter 和`->someProperty($newValue)`setter。

# rad - 在 RAD 8 中添加 Websphere 门户服务器 6.1

> ID：10116419
> 
> 赞同：-2
> 
> 时间：2012-04-12T01:56:31.583
> 
> 标签：rad, websphere-6.1, websphere-portal

我在 RAD 8 中添加门户服务器 6.1 时遇到问题。它显示“无法创建 RMI 连接器以连接到端口 10031 的主机”。我什至尝试更改 RMI 端口，但仍然没有帮助。似乎应用程序服务器尚未启动。我不能从 cmd 启动它，甚至不能从 RAD 启动它。我哪里出错了？请帮助..它的紧急...谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T03:15:10.103

当您从命令行启动服务器时，您在日志中看到什么错误？如果它没有在命令行中启动，我不会费心尝试从 RAD 连接它。

# javascript - Django json单引号和双引号？

> ID：10116424
> 
> 赞同：3
> 
> 时间：2012-04-12T01:57:05.640
> 
> 标签：javascript, python, django, json

我注意到如果你在 django 中使用 simplejson 函数，所有的字符串都用单引号括起来，整个 json 对象字符串用双引号括起来。当我把这个字符串交给 JSON.parse 时，它​​给了我一个错误，因为他们想使用单引号将整个对象括起来，并为字符串使用双引号。我可以用javascript替换来切换它们，但是我必须考虑像撇号这样的情况，但我相信有更好的方法。有没有办法让django的simplejson将对象字符串输出为JSON.parse的格式？

更多信息：

django视图：

```
def view(request):
    list = [{"a":"apple",},]
    return HttpResponse(simplejson.dumps(str(list)), mimetype="application/json") 
```

javascript字符串结果是什么

“[{'一个苹果'}]”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T02:06:58.723

*更新* 删除`str()`周围列表，只需`simplejson.dumps(list)`. `str()`将列表转换为字符串，从而进入`"[{'a': 'apple'}]"`客户端。

*您能否将问题更新为 demo 其中 simplejson 用单引号将字符串括起来？*

`django.utils.simplejson`，通常符合 w/ [JSON 规范](http://www.json.org/)，并且不使用单引号来包装内容。如果你的意思是

```
>>> from django.utils.simplejson import dumps
>>> dumps("Hello")
'"Hello"' # single quotes here
>>> repr(dumps("Hello"))
'\'"Hello"\'' # or here 
```

它们是 Python 的符号，您不想在 JSON.parse 中直接使用它们（虽然第一个是可以的）。

# iphone - Apple Mach-O-Linker (ID) 错误

> ID：10116427
> 
> 赞同：0
> 
> 时间：2012-04-12T01:57:29.010
> 
> 标签：iphone, objective-c, xcode

我在我现在正在处理的项目中添加了一个名为 RootViewController 的现有类。该项目第一次编译，但我第二次尝试运行它时弹出 mach-o-linker 错误。我没有为此更改任何代码，所以我真的不知道出了什么问题。我知道这个错误通常是因为缺少框架，但我很确定我包含了我需要的所有框架。

这是日志：

```
Ld /Users/myusername/Library/Developer/Xcode/DerivedData/coredataproject-dhlbawbtzwdgohaczdnalonzhnhs/Build/Products/Debug-iphonesimulator/coredataproject.app/coredataproject normal i386
cd /Users/myusername/Desktop/coredataproject
setenv MACOSX_DEPLOYMENT_TARGET 10.6
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk -L/Users/myusername/Library/Developer/Xcode/DerivedData/coredataproject-dhlbawbtzwdgohaczdnalonzhnhs/Build/Products/Debug-iphonesimulator -F/Users/myusername/Library/Developer/Xcode/DerivedData/coredataproject-dhlbawbtzwdgohaczdnalonzhnhs/Build/Products/Debug-iphonesimulator -filelist /Users/myusername/Library/Developer/Xcode/DerivedData/coredataproject-dhlbawbtzwdgohaczdnalonzhnhs/Build/Intermediates/coredataproject.build/Debug-iphonesimulator/coredataproject.build/Objects-normal/i386/coredataproject.LinkFileList -mmacosx-version-min=10.6 -Xlinker -objc_abi_version -Xlinker 2 -fobjc-arc -Xlinker -no_implicit_dylibs -D__IPHONE_OS_VERSION_MIN_REQUIRED=50000 -framework UIKit -framework Foundation -framework CoreGraphics -framework CoreData -framework CoreLocation -framework MapKit -o /Users/myusername/Library/Developer/Xcode/DerivedData/coredataproject-dhlbawbtzwdgohaczdnalonzhnhs/Build/Products/Debug-iphonesimulator/coredataproject.app/coredataproject

Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_RootViewController", referenced from:
      objc-class-ref in FirstViewController.o
      objc-class-ref in AppDelegate.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我已经搜索了几个小时试图找到丢失的链接或参考，但我没有发现任何问题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:07:23.140

我刚刚修好了。我从 RootViewController 中复制了代码，完全删除了 .h 和 .m 文件，创建了新文件并将名称更改为 RootViewController 并将代码重新粘贴进去。然后编译。

# audio - ffmpeg 流偏移命令（-itsoffset）不起作用

> ID：10116430
> 
> 赞同：9
> 
> 时间：2012-04-12T01:57:51.587
> 
> 标签：audio, ffmpeg, sync

如果有人能提供一些关于在 ffmpeg 中使用 itsoffset 的指示，我将不胜感激。我已经阅读了很多关于这个主题的帖子，其中一些非常清楚地解释了如何使用 -itsoffset 重新同步音频和视频，但我无法让它工作。我的 avi 文件用 ffmpeg 编码，分两遍，第二遍使用以下命令：

```
ffmpeg -i whole-vts_01.avs -pass 2 -y -vcodec libxvid -vtag XVID -b:v 1300K -g 240 -trellis 2 -mbd rd -flags +mv4+aic -acodec ac3 -ac 2 -ar 48000 -b:a 128k output.avi 
```

无论出于何种原因，我最终都会在视频中延迟 1 秒（或者音频提前 1 秒）。它不会经常发生，但我会时不时地看到它。在其他尝试中，我尝试了以下方法：

```
(1) ffmpeg -i output.avi -itsoffset 00:00:01.0 -i output.avi -vcodec copy -acodec copy -map 0:0 -map 1:1 output-resynched.avi
(2) ffmpeg -i output.avi -itsoffset 00:00:01.0 -i output.ac3 -vcodec copy -acodec copy -map 0:0 -map 1:0 output-resynched2.avi
(3) ffmpeg -itsoffset -00:00:01.00 -i output.avi output-resynched8.avi
(4) ffmpeg -i output.avi -itsoffset -1.0 -i output.avi -vcodec copy -acodec copy -map 0:1 -map 1:0 output-resynched13.avi 
```

结果如下：

1.  音频出现乱码，只有 5m 35 s 长，而 1h 41m。
2.  （Output.ac3 是 output.avi 的音频组件）视频和音频与原始相同，偏移不起作用
3.  音频确实发生了变化，但原始编码参数替换为默认参数（如预期的那样）。
4.  音频出现乱码，只有 9m 56s 长，而 1h 41m。

我看到很多人解释，并且显然使用了上述过程，但它似乎对我不起作用。我错过了一些明显的东西吗？我非常希望能够使用 -itsoffset，因为它比我的解决方案更干净。

FWIW，这是获得所需结果的一种不同且更长的方法：

首先使用 -ss 创建一个仅移位的视频文件：

```
ffmpeg -i output.avi -ss 1.0 -vcodec copy -an oupput_videoshifted.avi 
```

然后提取音频：

```
ffmpeg -i output.avi -vn -acodec copy outputaudioonly.ac3 
```

最后重新混合两个组件：

```
ffmpeg -i output_videoshifted.avi -i output_audioonly.ac3 -vcodec copy -acodec copy -map 0:0 -map 1:0 output-resynched14.avi 
```

该过程有效，速度足够快，但我真的更喜欢使用一次性 -itsoffset 解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T11:56:53.960

这是我所做的，它对我有用

第一个输入设置 -i 和第二个输入来自同一个视频文件。

第一个输入视频延迟 1 秒，第二个输入音频只是复制

```
ffmpeg -y -itsoffset 00:00:01.000 -i "d:\Video1.mp4" -i "d:\Video1.mp4"
 -map 0:v -map 1:a -vcodec copy -acodec copy
 -f mp4 -threads 2 -v warning "Video2.mp4" 
```

第二个输入音频延迟 1 秒，第一个输入视频只是复制

```
ffmpeg -y -i "d:\Video1.mp4" -itsoffset 00:00:01.000 -i "d:\Video1.mp4"
 -map 0:v -map 1:a -vcodec copy -acodec copy
 -f mp4 -threads 2 -v warning "Video2.mp4" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T16:13:38.967

问题所在，`-vcodec copy -acodec copy`因为移位仅适用于关键帧。我曾经也有过一样的问题。

只是不要复制（音频/）视频，尝试使用`-itsoffset`，但使用

```
-vcodec libxvid -vtag XVID -b:v 1300K -g 240 -trellis 2 -mbd rd -flags +mv4+aic -acodec ac3 -ac 2 -ar 48000 -b:a 128k 
```

用于重新编码。它应该工作。

# xcode - IAd bannerViewActionDidFinish: 测试运行视图确认关闭后未执行

> ID：10116432
> 
> 赞同：1
> 
> 时间：2012-04-12T01:58:03.843
> 
> 标签：xcode, iad, adbannerview

我正在尝试在我的免费版应用程序上放置一个 iad 横幅，按下时横幅运行顺畅，并且查看确认测试广告正常运行。但是当我关闭该视图时，我的应用程序已存货，我可以按下按钮，但它们没有执行它们的操作。这就是我所做的，这就是为什么我认为没有调用 bannerViewActionDidFinish: 的原因。在bannerViewActionShouldBegin：我设置buttonTest setEnabled = NO，然后在bannerViewActionDidFinish：中设置buttonTest setEnabled = YES。结果是当横幅测试视图关闭时，该按钮被禁用且未启用。

.h 文件

```
#import <iAd/iAd.h>

ADBannerView *adView;
BOOL bannerIsVisible;

@property (nonatomic, assign)BOOL bannerIsVisible; 
```

.m 文件

```
@synthesize bannerIsVisible;

- (void)viewDidLoad
{
    adView = [[ADBannerView alloc] initWithFrame:CGRectZero];
    adView.frame = CGRectOffset(adView.frame, 0, -50);
    adView.requiredContentSizeIdentifiers = [NSSet       setWithObject:ADBannerContentSizeIdentifierLandscape];
    adView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierLandscape;
    [self.view addSubview:adView];
    adView.delegate=self;
    self.bannerIsVisible=NO;      

    [super viewDidLoad];
}

- (void)bannerViewDidLoadAd:(ADBannerView *)banner
{
    if (!self.bannerIsVisible)
    {
        [UIView beginAnimations:@"animateAdBannerOn" context:NULL];
        banner.frame = CGRectOffset(banner.frame, 0, 50);
        [UIView commitAnimations];
        self.bannerIsVisible = YES;
    }
}

- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error
{
    if (self.bannerIsVisible)
    {
        [UIView beginAnimations:@"animateAdBannerOff" context:NULL];
        banner.frame = CGRectOffset(banner.frame, 0, -50);
        [UIView commitAnimations];
        self.bannerIsVisible = NO;
    }
}

- (BOOL)bannerViewActionShouldBegin:(ADBannerView *)banner willLeaveApplication:(BOOL)willLeave
{
    NSLog(@"Banner view is beginning an ad action");

   [buttonTest setEnabled:NO];

   return YES;
}

-(void)bannerViewActionDidFinish:(ADBannerView *)banner
{
   // resume everything you've stopped

   [buttonTest setEnabled:YES];
}

- (void)viewDidUnload
{
    adView.delegate = nil;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:29:21.990

in this case, you can check the `willLeave:` argument of `bannerViewActionShouldBegin:willLeaveApplication:`

```
- (BOOL)bannerViewActionShouldBegin:(ADBannerView *)banner willLeaveApplication:(BOOL)willLeave
{
     NSLog(@"Banner was clicked on; will%sleave application", willLeave ? " " : " not ");

    [buttonTest setEnabled:!willLeave];

    return YES;
} 
```

this way, buttonTest remains enabled if you don't leave the application for the iAd click-through.

# java - 自动与闭源 Windows XP 基于 GUI 的程序交互

> ID：10116436
> 
> 赞同：0
> 
> 时间：2012-04-12T01:58:35.230
> 
> 标签：java, python, windows, interaction

我有一个基于 Windows XP GUI 的封闭源代码，可以执行一些测量。

我目前的手动工作流程是：

1.  通过单击 GUI 上的“运行”按钮开始数据捕获
2.  按 GUI 上的“停止”按钮停止数据捕获。
3.  读取屏幕上显示的一些值。
4.  将会话的数据保存到文件中。

没有库或 API 可以使整个交互自动化，因此我别无选择，只能手动进行:(而且我厌倦了它！

正如您清楚地看到的那样，这种方法不仅耗时而且容易出错，因为它受到我的反应时间的限制，每次运行都会发生变化。

我想知道是否有办法自动化这种交互？如果是，我有什么选择？我更喜欢用 Python 或 Java 实现一些东西。但我也对其他选择持开放态度。

我的想法是实现一个在 Windows XP 机器上运行的服务器进程。然后我可以远程向该服务器进程发送请求，该服务器进程将自动执行我的工作流程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T02:20:04.407

有一个很棒的 Windows GUI 自动化工具，叫做 autoit。[http://www.autoitscript.com/site/autoit/](http://www.autoitscript.com/site/autoit/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T22:28:45.137

您询问了有关将 AutoIt 与 Java 链接起来的问题。出于我的目的，我使用 ProcessBuilder 来创建一个 Process，然后获取 Processes InputStream 和 ErrorStream 并确保在单独的线程中处理这些流。我让 AutoIt 使用 InputStream 与我的 Java 程序进行通信。一篇很好的文章（虽然有点过时）是这篇文章：[When Runtime.exec() won't](http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html)。确保进程在后台线程上运行并且两个流在它们自己的线程中读取是关键。如果您在 Swing GUI 中执行此操作，则必须特别注意所有 Swing 调用都在主 Swing 事件线程 EDT 上进行。

# android - 使用 updateDate() 方法设置 DatePicker 的日期

> ID：10116455
> 
> 赞同：3
> 
> 时间：2012-04-12T02:02:53.353
> 
> 标签：android, calendar, android-datepicker

我目前正在制作日期/时间选择器类。本质上，我创建了 3 个单选按钮：“明天”、“两天后”和“下周”。

我要做的是让这些单选按钮自动将日期选择器设置在相应的天数（提前 1、2 和 7 天）之前。

当用户单击单选按钮时，我尝试使用 updateDate(int year, int month, int day) 方法更新我的 DatePicker，但是单击任何单选按钮时都没有任何反应。

**是否有特定的方法可以在不使用自动收报机按钮的情况下更改日期选择器的显示日期？**

这是我的课程代码：

```
 package com.inviscidlabs.schooled;

import java.util.Calendar;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.DatePicker;
import android.widget.RadioButton;
import android.widget.RadioGroup;

public class DateTimePicker extends Activity{

    private DatePicker datePicker;

    private RadioGroup dtpRadGroup;
    private RadioButton rTomorrow;
    private RadioButton rIn2Days;
    private RadioButton rNextWeek;

    private Calendar cNow;
    private Calendar c;

    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        //declare resources
        setContentView(R.layout.datetimepicker);
        dtpRadGroup=(RadioGroup) findViewById(R.id.dtp_radiogroup);
        rTomorrow=(RadioButton) findViewById(R.id.dtp_button_tomorrow);
        rIn2Days=(RadioButton) findViewById(R.id.dtp_button_twodays);
        rNextWeek= (RadioButton) findViewById(R.id.dtp_button_nextweek);
        datePicker= (DatePicker) findViewById(R.id.dtp_datepicker);

        cNow= Calendar.getInstance();
        cNow.setLenient(true);      c.setLenient(true);
        datePicker.init(cNow.get(Calendar.YEAR), cNow.get(Calendar.MONTH), cNow.get(Calendar.DAY_OF_MONTH), dListener);

    }

    public void onClick(View v){

        switch(v.getId()){

        case R.id.dtp_button_finished:

            break;
        }

    }

    public void onRadioButtonClicked(View v){
        c=Calendar.getInstance();

        switch(v.getId()){

        case R.id.dtp_button_tomorrow:
             c.add(Calendar.DAY_OF_YEAR, 1);
             datePicker.updateDate(c.get(Calendar.YEAR),c.get(Calendar.MONTH), c.get(Calendar.DAY_OF_MONTH));

            break;
        case R.id.dtp_button_twodays:
             c.add(Calendar.DAY_OF_YEAR, 2);
             datePicker.updateDate(c.get(Calendar.YEAR),c.get(Calendar.MONTH), c.get(Calendar.DAY_OF_MONTH));
            break;
        case R.id.dtp_button_nextweek:
             c.add(Calendar.DAY_OF_YEAR, 7);
             datePicker.updateDate(c.get(Calendar.YEAR),c.get(Calendar.MONTH), c.get(Calendar.DAY_OF_MONTH));
            break;
        }
    }

    private DatePicker.OnDateChangedListener dListener = new DatePicker.OnDateChangedListener() {

        public void onDateChanged(DatePicker view, int year, int monthOfYear,
                int dayOfMonth) {

                Calendar cPickerDate = Calendar.getInstance();
                cPickerDate.set(year, monthOfYear, dayOfMonth);
                int dayOfYear = cPickerDate.get(Calendar.DAY_OF_YEAR);
                Log.v("day of year", String.valueOf(dayOfYear));

                //automatically checks radio buttons if user manually adjust picker
                if(dayOfYear==cNow.get(Calendar.DAY_OF_YEAR)+1){
                    rTomorrow.setChecked(true);
                }
                else if(dayOfYear==cNow.get(Calendar.DAY_OF_YEAR)+2){
                    rIn2Days.setChecked(true);
                }
                else if(dayOfYear==cNow.get(Calendar.DAY_OF_YEAR)+7){
                    rNextWeek.setChecked(true);
                } else {
                    dtpRadGroup.clearCheck();
                }

        }
    };

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T02:49:18.247

使用以下修改后的代码::::

```
package com.inviscidlabs.schooled;

import java.util.Calendar;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.DatePicker;
import android.widget.RadioButton;
import android.widget.RadioGroup;

public class DateTimePicker extends Activity{

    private static int TODAY = 0;
    private static int NEXTDAY = 1;
    private static int NEXTWEEK = 2;

    private DatePicker datePicker;
    private RadioGroup dtpRadGroup;
    private RadioButton rTomorrow;
    private RadioButton rIn2Days;
    private RadioButton rNextWeek;

    private Calendar cNow;
    private Calendar c;

    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        //declare resources
        setContentView(R.layout.datetimepicker);
        dtpRadGroup=(RadioGroup) findViewById(R.id.dtp_radiogroup);
        rTomorrow=(RadioButton) findViewById(R.id.dtp_button_tomorrow);
        rIn2Days=(RadioButton) findViewById(R.id.dtp_button_twodays);
        rNextWeek= (RadioButton) findViewById(R.id.dtp_button_nextweek);
        datePicker= (DatePicker) findViewById(R.id.dtp_datepicker);

        cNow= Calendar.getInstance();
        cNow.setLenient(true);      c.setLenient(true);
        datePicker.init(cNow.get(Calendar.YEAR), cNow.get(Calendar.MONTH), cNow.get(Calendar.DAY_OF_MONTH), dListener);

    }

    public void onClick(View v){

        switch(v.getId()){

        case R.id.dtp_button_finished:

            break;
        }

    }

    public void onRadioButtonClicked(View v){
        c=Calendar.getInstance();

        switch(v.getId()){

        case R.id.dtp_button_tomorrow:
             c.add(Calendar.DAY_OF_YEAR, 1);
             showDialog(TODAY);
            // datePicker.updateDate(c.get(Calendar.YEAR),c.get(Calendar.MONTH), c.get(Calendar.DAY_OF_MONTH));

            break;
        case R.id.dtp_button_twodays:
             c.add(Calendar.DAY_OF_YEAR, 2);
             showDialog(NEXTDAY);
             //datePicker.updateDate(c.get(Calendar.YEAR),c.get(Calendar.MONTH), c.get(Calendar.DAY_OF_MONTH));
            break;
        case R.id.dtp_button_nextweek:
             c.add(Calendar.DAY_OF_YEAR, 7);
             showDialog(NEXTWEEK);
             //datePicker.updateDate(c.get(Calendar.YEAR),c.get(Calendar.MONTH), c.get(Calendar.DAY_OF_MONTH));
            break;
        }
    }

    @Override
    protected Dialog onCreateDialog(int id) {
        final Calendar c = Calendar.getInstance();
        switch (id) {
        case TODAY:
            c.add(Calendar.DAY_OF_YEAR, 1);
        case NEXTDAY:
            c.add(Calendar.DAY_OF_YEAR, 2);
        case NEXTWEEK:
            c.add(Calendar.DAY_OF_YEAR, 7);
        }
        DatePickerDialog _date_repeat = new DatePickerDialog(this, mDateSetListener,c.get(Calendar.YEAR),c.get(Calendar.MONTH), c.get(Calendar.DAY_OF_MONTH)){
                @Override
                public void onDateChanged(DatePicker view, int year, int monthOfYear, int dayOfMonth)
                {   
                     Calendar cPickerDate = Calendar.getInstance();
                        cPickerDate.set(year, monthOfYear, dayOfMonth);
                        int dayOfYear = cPickerDate.get(Calendar.DAY_OF_YEAR);
                        Log.v("day of year", String.valueOf(dayOfYear));

                        //automatically checks radio buttons if user manually adjust picker
                        if(dayOfYear==cNow.get(Calendar.DAY_OF_YEAR)+1){
                            rTomorrow.setChecked(true);
                        }
                        else if(dayOfYear==cNow.get(Calendar.DAY_OF_YEAR)+2){
                            rIn2Days.setChecked(true);
                        }
                        else if(dayOfYear==cNow.get(Calendar.DAY_OF_YEAR)+7){
                            rNextWeek.setChecked(true);
                        } else {
                            dtpRadGroup.clearCheck();
                        }                   
                }
            };  
        };
        return _date_repeat;
    }
} 
```

# css - CSS 和跨浏览器圆角

> ID：10116456
> 
> 赞同：0
> 
> 时间：2012-04-12T02:03:02.840
> 
> 标签：css, internet-explorer-8, rounded-corners

我一直在尝试实现跨浏览器圆角的解决方案，即使该演示适用于所有浏览器，但当我尝试在我自己的代码中实现它时，它适用于*除*IE8 之外的所有浏览器。

这是我的CSS：

```
body    { background:#ffffff url("images/bg.gif") repeat-x ;
font-family:verdana,helvetica,sans-serif ;
font-size:12px ;
color:#000000 ;
margin:0 auto ;
padding:0 ;
}

.clear  { clear:both } /* clears floats */

/* #container defines layout width and positioning */
#container  { width:1000px ;
margin:auto ;
position:relative ;
z-index:inherit ;
zoom:1 ; /* enables rounded corners in IE6 */
}

#header { width:1000px ;
height:75px ;
padding:10px 0px 10px 0px ;
}

    #header-logo    { float:left ;
    width:255px ;
    height:55px ;
    background:url("http://template.sophio.com/images/logo.png") no-repeat ;
    }

    #header-phone   { float:left ;
    display:block ;
    line-height:55px ;
    background:url("images/header-phone-bg.png") no-repeat ;
    background-position:0px 0px ;
    font-size:28px ;
    color:#900 ;
    font-weight:bold ;
    padding-left:50px ;
    margin:0px 0px 0px 120px ;
    }

    #header-right   { float:right ;
    width:225px ;
    }

        #header-right-translate { display:block ;
        text-align:right ;
        background:#ffffff ;
        line-height:26px ;
        }

        #header-right-social    { display:block ;
        text-align:right ;
        background:#FF9 ;
        line-height:24px ;
        margin-top:5px ;
        }

#navbar { width:1000px ;
height:32px ;
background:#9d9687 url("images/header-bg.gif") repeat-x ;
border:1px solid #494437 ;
-moz-border-radius: 11px 11px 0px 0px ;
-webkit-border-radius: 11px 11px 0px 0px ;
border-radius: 11px 11px 0px 0px ;
behavior: url("border-radius.htc");
} 
```

这是我的 HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>New Two Column Right</title>
<link rel="stylesheet" href="../style.css" type="text/css" />
</head>

<body>

<div id="container">
    <div id="header">
        <div id="header-logo"></div>
        <div id="header-phone">888-563-2591</div>
        <div id="header-right">
            <div id="header-right-translate">
            [Google Translate Widget Here]         
            </div>
            <div id="header-right-social">
            [Social Icons Widget Here]
            </div>
        </div>
    </div>

    <div id="navbar">text</div>
</div>

</body>
</html> 
```

导航栏是我应用圆角的地方。

在 IE8 中，我所有的角都是圆角的，而我只希望左上角和右上角是圆角的（除了 IE8 之外，它们都显示在右边）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T02:26:21.517

这个问题已经被stackoverflow上的其他人通过使用CSSPIE解决了：[http ://css3pie.com/](http://css3pie.com/)

为了圆角在 IE 8 中正确显示，带有圆角的元素必须具有：

```
position: relative; 
```

在css中设置。

看：

[IE8中的CSS圆角](https://stackoverflow.com/questions/7077331/help-with-rounded-corners-css-webkit-ie8)

[IE8 的边框半径](https://stackoverflow.com/questions/9426979/border-radius-for-ie8)

[IE7 和 IE8 的边框半径](https://stackoverflow.com/questions/8308584/border-radius-for-ie7-ie8)

也： http: [//jc-designs.net/blog/2010/07/getting-border-radius-to-work-in-ie/](http://jc-designs.net/blog/2010/07/getting-border-radius-to-work-in-ie/) （有关职位的更多信息：relative hack）

sass 库 Compass 还提供了跨浏览器的边界半径，但我没有使用 ie8 的经验

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T02:42:50.527

参见小提琴演示： http: [//jsfiddle.net/esjzX/1/，http](http://jsfiddle.net/esjzX/1/) : [//jsfiddle.net/esjzX/1/embedded/result/](http://jsfiddle.net/esjzX/1/embedded/result/)

```
Css:

b.rtop, b.rbottom{display:block;background: #FFF}
b.rtop b, b.rbottom b{display:block;height: 1px;
    overflow: hidden; background: #9BD1FA}
b.r1{margin: 0 5px}
b.r2{margin: 0 3px}
b.r3{margin: 0 2px}
b.rtop b.r4, b.rbottom b.r4{margin: 0 1px;height: 2px}

.rs1{margin: 0 2px}
.rs2{margin: 0 1px}
div.container{ margin: 0 10%;background: #9BD1FA}

HTML:

<div class="container">
<b class="rtop">
  <b class="r1"></b> <b class="r2"></b> <b class="r3"></b> <b class="r4"></b>
</b>
<h1 align="center">Hi!</h1>
    <p>Rounded corners for cross browsers</p>
<b class="rbottom">
  <b class="r4"></b> <b class="r3"></b> <b class="r2"></b> <b class="r1"></b>
</b>
</div>
<br /><br />
<div class="container">
<b class="rtop">
  <b class="rs1"></b> <b class="rs2"></b>
</b>
<h1 align="center">Hi!</h1>
    <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>
<b class="rbottom">
   <b class="rs2"></b> <b class="rs1"></b>
</b>
</div> 
```

屏幕截图：纯 css 基础圆角以实现跨浏览器兼容性

![在此处输入图像描述](../Images/deac6a0e74a4bce8a58a8b687612b0e0.png)

# asp.net-mvc - MVC 4：多控制器动作参数

> ID：10116457
> 
> 赞同：4
> 
> 时间：2012-04-12T02:03:30.400
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

不仅仅是`{controller}/{action}/{id}`有可能有多个参数，比如 `{controller}/{action}/{id}/{another id}`？

我是 MVC 的新手（来自纯网页）。如果不可能，MVC 是否提供类似于`UrlData`Web Pages 中可用的辅助方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T02:12:12.060

您只需要在 global.asax 中映射新路线，如下所示：

```
routes.MapRoute(
    "NewRoute", // Route name
    "{controller}/{action}/{id}/{another_id}", // URL with parameters
    new { controller = "Home", action = "Index", id = UrlParameter.Optional, another_id = UrlParameter.Optional } // Parameter defaults
); 
```

然后在控制器的操作中，您可以像这样获取参数：

```
public ActionResult MyAction(string id, string another_id)
{
    // ...
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T02:18:37.447

是的，您可以在一个路由中定义多个参数。您需要首先在 Global.asax 文件中定义您的路线。您可以在 URL 段或部分 URL 段中定义参数。要使用您的示例，您可以将路线定义为

```
{controller}/{action}/{id1}/{id2} 
```

然后，MVC 基础结构将解析匹配的路由以提取 id1 和 id2 段，并将它们分配给您的操作方法中的相应变量：

```
public class MyController : Controller
{
   public ActionResult Index(string id1, string id2)
  {
    //..
  }
} 
```

或者，您也可以接受来自查询字符串或表单变量的输入参数。例如：

```
MyController/Index/5?id2=10 
```

[路由在这里](http://msdn.microsoft.com/en-us/library/cc668201.aspx#url_patterns)更详细地讨论

# wpf - 图像绑定适用于 Image 而不是 ItemsControl

> ID：10116459
> 
> 赞同：1
> 
> 时间：2012-04-12T02:03:43.637
> 
> 标签：wpf, image, data-binding, itemscontrol

我在这里有点困惑。我`List<BitmapImage>`在一个正在填充的 Viewmodel 中有一个。我正在尝试使用 ItemsControl 在视图上显示列表，但图像不显示。奇怪的是，如果我使用 Image 标签，我可以访问同一个集合并获取要显示的图像。

```
<ItemsControl ItemsSource="{Binding Path=Images}" MinHeight="80">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal"/>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Image Source="{Binding}" MinWidth="80" MinHeight="80" />
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
    <Image HorizontalAlignment="Left" Name="image1" Stretch="Uniform" VerticalAlignment="Top" Source="{Binding Path=Images[0]}" MinHeight="80" MaxHeight="200" /> 
```

请注意，它们都指向`Images`. Image 出现，ItemsControl 保持为空。到底是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T03:24:37.333

您将通过使用 ObservableCollection 而不是 List 来解决这个问题。ItemsControl 不会重新绑定列表的更改通知。如果您使用 ObservableCollection，您也不必担心显式调用列表的更改通知。

我能够复制您的场景，只需使用 ObservableCollection 即可解决问题。至于为什么：http: [//msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)

具体来说，请参阅备注部分中的此引用：

> 要在绑定客户端和数据源之间的绑定中发生更改通知，您的绑定类型应该： 实现 INotifyPropertyChanged 接口（首选）。为绑定类型的每个属性提供一个更改事件。不要两者都做。

# objective-c - WebView：performFindPanelAction 还没有实现吗？

> ID：10116462
> 
> 赞同：4
> 
> 时间：2012-04-12T02:04:13.250
> 
> 标签：objective-c, cocoa, webview

我正在尝试在 Safari 或 Mac Mail 中实现查找面板，但`performFindPanelAction`它对我不起作用。我发现不久前向Apple提交了关于它的错误，但我不知道是否仍然如此......如果它仍然是一个空方法，我如何打开带有webView的查找面板？

# ios - 如何允许某些手势通过 superview 到它下面的视图？

> ID：10116465
> 
> 赞同：0
> 
> 时间：2012-04-12T02:04:50.200
> 
> 标签：ios, uiview, uigesturerecognizer

我有一个带有三个图像视图的视图。这些图像视图响应某些手势。我想允许某个手势（例如在屏幕上滑动）对所有图像视图执行操作（例如，将它们全部删除）。

我能想到让滑动手势在屏幕上的任何地方都能被识别的唯一方法是覆盖一个清晰的超级视图来寻找滑动手势。我的问题; 但是，是我不知道如何让超级视图忽略所有其他手势，因此我仍然可以与下面的图像视图交互。有没有更简单的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T02:08:57.640

尝试将手势添加到视图的窗口而不是视图：

```
[self.view.window addGestureRecognizer:gesture]; 
```

# haskell - Haskell 中类型声明中的列表列表

> ID：10116466
> 
> 赞同：0
> 
> 时间：2012-04-12T02:04:50.280
> 
> 标签：haskell

我已经在这段代码中待了将近 2 个小时，并且一直收到相同的编译器错误消息。我已经完成了我的研究，但找不到答案

```
buildTable :: Int -> Int -> (Int -> Int -> a) -> [[a]]

buildTable n m fun = [[ fun x y 
                    | x <- [0..n-1]]
                    | y <- [0..m-1]]

lookupAns :: Int -> Int -> [[Int]] -> Int
lookupAns len1 len2 theArray = 
    theArray !! len1 !! len2

lcsLength :: String -> String -> Int
lcsLength s1 s2 = 
  let 
    n1 = (length s1)
    n2 = (length s2)
    table = buildTable (n1 n2 lcsHelp)

    lcsHelp = if ( n1 == 0 || n2 == 0 )
                then 0

                else if ( last s1 == last s2 )

                then                    
                    (lookupAns
                        (n1 - 1)
                        n2
                        table)
                        + 1
                else
                    max 
                        (lookupAns 
                            n1
                            (n2-1)
                            table)
                        (lookupAns
                            (n1-1)
                            n2
                            table)

    in lookupAns
        (length s1)
        (length s2)
        table 
```

现在，无论我尝试什么，我都会收到相同的错误消息。错误消息是“无法将预期类型 '[[Int]] -> Int' 与实际类型 [Int] 匹配”，其他规范指向代码末尾的第一次调用 max。请帮忙，这真的很令人沮丧

它现在可以使用我的新代码编译和运行。我一定会稍后再发布它，因为它有点晚了，我会把它写下来过夜。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T03:07:21.687

这是错误的：

```
table = buildTable (n1 n2 lcsHelp) 
```

`buildTable`有类型`Int -> Int -> (Int -> Int -> a) -> [[a]]`。`buildTable (n1 n2 lcsHelp)`将其应用于一个论点，即`(n1 n2 lcsHelp)`。所以`table`会有 type `Int -> (Int -> Int -> a) -> [[a]]`，它作为第三个参数传递给 是无效的`lookupAns`。

没关系，`(n1 n2 lcsHelp)`试图将整数`n1`应用于两件事，这显然是垃圾。

不过，我没有收到您引用的错误消息。GHCi 给了我：

```
Loading package ghc-prim ... linking ... done.
Loading package integer-gmp ... linking ... done.
Loading package base ... linking ... done.
[1 of 1] Compiling Main             ( bar.hs, interpreted )

bar.hs:18:13:
    Couldn't match expected type `[[Int]]'
                with actual type `Int -> (Int -> Int -> a0) -> [[a0]]'
    In the return type of a call of `buildTable'
    In the expression: buildTable (n1 n2 lcsHelp)
    In an equation for `table': table = buildTable (n1 n2 lcsHelp) 
```

我不确定这是否是因为您发布的代码实际上不是您为获取错误消息而编译的代码（您必须纠正错字这一事实暗示了这一点），或者仅仅是 GHCi 正在挑选在与您正在使用的编译器不同的点上出现不一致。

我猜你的意思可能是：

```
table = buildTable n1 n2 lcsHelp 
```

但这又给了我一个不同的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T02:10:42.193

lcslength 中的第一个lookupAns 应用于太少的参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T15:18:52.000

几条评论 1.`lcsHelp`不接受任何参数 2.`lookupAns`在**else-if-then**中接受错误的论点，遗漏`table`

我做了一点修改：[http ://hpaste.org/66862](http://hpaste.org/66862)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T03:59:20.460

我将代码粘贴在[hpaste](http://hpaste.org/66851)上，以便更容易发现问题。正如@Ben 已经指出的那样，问题在于`table`.

`buildTable`函数具有类型`Int -> Int -> (Int -> Int -> a) -> [[a]]`。您将其称为`table = buildTable (n1 n2 lcsHelp)`. 所以，类型`table`将是`Int -> (Int -> Int -> a) -> [[a]]`。此类型无法传递给`lookupAns`具有该类型的函数`Int -> Int -> [[Int]] -> Int`

如果你要做这样的事情`table = buildTable n1 n2 lcsHelp`，我相信这可能是你的意图，那么类型签名`buildTable`必须改变，因为你会遇到这个错误

```
Couldn't match expected type `Int -> Int -> Int'
            with actual type `Int'
In the third argument of `buildTable', namely `lcsHelp' 
```

发生这种情况是因为现在`lcsHelp`返回 an 的函数`Int`（因为`if..else`语句的返回值）与函数的实际类型不匹配`buildTable`。

所以，如果你能多解释一下你想要达到的目标，帮助你会更容易。该函数的类型很可能`lcsHelp`是您需要重新访问的。可能是`buildTable`函数不需要将函数作为输入参数。

# string - 将寄存器中的十进制/十六进制值转换为 ascii

> ID：10116468
> 
> 赞同：-1
> 
> 时间：2012-04-12T02:04:54.280
> 
> 标签：string, assembly, ascii

所以说我在寄存器ebx中有这个值：30303420

我想转换它并打印出相应的 ascii 值。所以它应该打印出来

004

```
30  == 0
30  == 0
34  == 4
20  == space character. 
```

我怎样才能让它打印在屏幕上？

这是 80x86 架构，使用汇编代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:16:28.603

好吧，你的问题有几个不清楚的细节。

1-如果您在 ebx 中有 30303420 十六进制值，那么您有 4 个 Ascii 字符，即“004”，即：

```
mov ebx,30303420H       ;is exactly the same than:
mov ebx,"004 " 
```

你没有任何十进制值（最多一个？），所以这里没有任何转换。

2-如果您想在屏幕上显示该 ebx 值，因此它显示“004”，那么您必须指定您的程序将在哪个操作系统下运行才能使用相应的服务。例如，如果你想使用老式的 MS-DOS INT 21H 函数，它也可以在 Windows 的 DOS 窗口中运行，那么这个段会这样做：

```
mov     cx,4        ;counter = 4 characters
    ;
next:
rol     ebx,8       ;rotate left EBX 1 byte: place next char in BL
mov     dl,bl       ;DL = char to show
mov     ah,2        ;AH = VIDEO OUTPUT function
int     21H         ;DOS kernel service Int: show the char
loop    next        ;repeat 4 times 
```

但是，如果你的程序在 Linux 下运行，那么显示 ebx 值的方法就完全不同了。此外，您的程序可能以不同的方式使用 C 库函数，或者是与 Windows 兼容的程序，或者使用 BIOS INT 10H 服务（负责屏幕），甚至直接访问视频电路等...

# java - 抽象与封装

> ID：10116472
> 
> 赞同：3
> 
> 时间：2012-04-12T02:05:38.787
> 
> 标签：java, oop, encapsulation, abstract

在学习 OOP 时，主要是 java，这两个概念总是联系在一起的，但我看不出它们之间有什么真正的关系或相似之处。如果我错了，请纠正我，但是：

**抽象**是识别对象的关键部分并忽略接口中使用的其他所有内容。 **封装**只是描述了如何保护和隐藏数据，它会影响权限。

我看不出两者之间有真正的关系，有吗？如果我的任何方式都不好，那么对每个人的简单描述也会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T05:31:18.143

这两个概念在某种程度上服务于相同的目标，即使是这样`Abstraction is more about the design, and encapsulation is more about the implementation`（在讨论抽象时没有字段和数据）。

这个共同的目标是为用户提供一个简单且定义明确的界面以供使用，因此他不需要关心细节，而只需关心它的作用以及他如何与之连接。

举个例子，如果你看开/关开关，抽象会定义它的两个条件，以及它们之间的切换方式，封装会选择隐藏开关内部的电线和东西，让你看到熟悉的开关我们都知道。共同之处在于，由于这两个概念，它的用法简单而标准。

关于这些概念中的每一个，还有更多要说的，但这是我可以告诉你的关于它们之间关系的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T10:32:41.807

**抽象** 抽象关注对象的外部视图。只显示必要的。

**封装**（信息隐藏）防止客户看到它的内部视图，抽象的行为在其中实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T06:07:46.360

[Scott Ambler](http://books.google.com.pe/books?id=ESQGjpQiLX4C&pg=PA34&dq=object%20abstraction%20encapsulation&hl=en&sa=X&ei=XGuGT-TnCOSd8AHu5qmsCA&redir_esc=y#v=onepage&q=object%20abstraction%20encapsulation&f=false)对该主题有一个很好的简历：

> 我们没有说我们确定了一个类知道 a 做什么，而是说我们“抽象”了这个类。我们没有说我们设计了类将如何完成这些事情，而是说“封装”它们（...）

作者以大学生为例进行招生系统。在学生拥有的许多属性（头发颜色、宗教、种族）和他将承担的许多责任（聚会、运动、去图书馆）中；我们选择只需要存储学生姓名和地址，并且每个学生都应该能够参加研讨会。这就是我们对学生的抽象。

但是我们仍然不知道我们的系统将如何执行注册。一个典型的 Java 应用程序是由类组成的，这些类具有属性和方法。那么我们说系统功能被封装在类中，每个类的功能都被封装在方法中。封装告诉如何实现功能，但隐藏实现细节。

# c++ - Qt在第一个窗口关闭时打开另一个窗口

> ID：10116473
> 
> 赞同：0
> 
> 时间：2012-04-12T02:05:42.963
> 
> 标签：c++, multithreading, qt, window

我现在对 Java 进行编程已经有一段时间了......现在我进入了 C++ 和 Qt，我对 GUI 线程（EDT 线程）和工作线程有点迷失，我试图让我的应用程序的主窗口只打开当配置窗口关闭时。我不想将用于创建主窗口的代码放在我的配置窗口的 OK 按钮中。我试图使它们成为模态，但主窗口仍然打开......配置完成后我仍然需要查看是否有应用程序更新......所以它就像

编辑：这是我的主要内容：

```
ConfigurationWindow *cw = new ConfigurationWindow();
//if there is no text file - configuration
cw->show();

//**I need to stop here until user fills the configuration

MainWindow *mw = new MainWindow();
ApplicationUpdateThread *t = new ApplicationUpdateThread();
//connect app update thread with main window and starts it
mw->show(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T03:26:06.657

Try something like this:

```
#include <QtGui>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    QDialog *dialog = new QDialog;
    QSlider *slider = new QSlider(dialog);
    QHBoxLayout *layout = new QHBoxLayout(dialog);
    layout->addWidget(slider);
    dialog->setLayout(layout);
    dialog->exec();
    qDebug() << slider->value(); // prints the slider's value when dialog is closed

    QMainWindow mw; // in your version this could be MainWindow mw(slider->value());
    w.show();

    return a.exec();
} 
```

The idea is that your main window's constructor could accept parameters from the QDialog. In this contrived example I'm just using qDebug() to print the value of the slider in the QDialog when it's closed, not passing it as a parameter, but you get the point.

EDIT: You might also want to "delete" the dialog before creating the main window in order to save memory. In that case you would need to store the parameters for the main window constructor as separate variables before deleting the dialog.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T08:41:27.720

您必须了解[信号和插槽](http://qt-project.org/doc/qt-4.8/signalsandslots.html)。基本思想是在配置完成时发送一个信号。您将 QMainWindow 放在成员变量中，然后在与 configurationFinished 信号连接的主程序的插槽中调用 mw->show()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T09:16:39.853

如果您的 ConfigurationWindow 是 QDialog，您可以将[finished(int)](http://qt-project.org/doc/qt-4.8/qdialog.html#finished)信号连接到 MainWindow 的[show()](http://qt-project.org/doc/qt-4.8/qwidget.html#show)插槽（并省略 main 中的 show() 调用）。

# javascript - 事件发生后更改输入类型

> ID：10116474
> 
> 赞同：0
> 
> 时间：2012-04-12T02:06:07.813
> 
> 标签：javascript, django, events

我正在尝试在 Javascript 变量具有值后将表单中的输入类型从“隐藏”更改为“文本”。我目前的代码是这样的：

```
var currentUser;

var getButton = document.getElementById("button");
getButton.addEventListener("click",getUser,false);
function getUser(event) {
    var user = document.getElementById("username");{
        if(user.value !=="") {
            currentUser = user.value;
        }
    event.preventDefault();
    }
    if(currentUser.value!=="") {
        document.getElementById("message").type="text";
    }
} 
```

我的 HTML 是这样的：

```
<form method = "post">
            {% if username %}
            <label>{{ username }}</label>
            <input id="message" type="text" size="70" name="message" />
            <input type="hidden" name="username" value="{{ username }}" />
            <input type="hidden" name="timestamp" value="{{ timestamp }}" />
            {% else %}
            <label>Pick a username: </label>
            <input type="text" size="10" name="username" id="username" />
            {% endif %}
            <input type="submit" value="send" id="button" />
        </form>
    </div> 
```

谁能告诉我哪里出错了？目前，每当我运行代码时，它都会卡在“用户名”上，并且“消息”框不会出现。

# map - 如何在 Go 中使用任意长度的值序列作为映射键？

> ID：10116476
> 
> 赞同：2
> 
> 时间：2012-04-12T02:06:23.427
> 
> 标签：map, go

编辑：Jeremy Wall 帮助我意识到我问的问题比我预期的更具体；这是一个更好的版本。

假设我想表示一个表，该表将某种类型 B 的值与定义了相等性的某种类型 A 的值序列相关联。在 Go 中最好的方法是什么？

显然，对于表，我想使用 Go 映射，但是对于 A 类型的值序列，我可以使用什么？在 Go 中，切片不能用作 map 的键；数组可以，但是数组的长度是它类型的一部分，我对能够使用在运行时确定的长度序列感兴趣。我可以 (1) 使用 A 的数组为它们声明最大长度，或者 (2) 使用 A 的切片，将它们序列化为字符串以用作键（Awk 和 Lua 程序员熟悉这种技术......）。Go 的这个“特性”有没有比我描述的更好的解决方法？

正如 Jeremy Wall 在回答我原来的问题版本时指出的那样，我有 A = int，选项 (2) 对于整数来说非常好，因为您可以使用符文切片，将其转换为字符串只是一个强制转换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T02:33:35.727

符文序列而不是整数对你有用吗？符文是 uint32 并且转换为字符串只是一个强制转换：

```
package main

import "fmt"

type myKey struct {
  seq []int
}

func main() {
    m := make(map[string]string)
    key := []rune{1, 2}
    m[string(key)] = "foo"
    fmt.Print("lookup: ", m[string(key)])
} 
```

你可以在这里玩这个代码：[http ://play.golang.org/p/Kct1dum8A0](http://play.golang.org/p/Kct1dum8A0)

# ruby-on-rails - Rails hidden_ field_tag 整数自动转换为字符串？

> ID：10116483
> 
> 赞同：2
> 
> 时间：2012-04-12T02:07:16.037
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, hidden-field

我有一个使用 hidden_​​field_tag 的表单。我在 hidden_​​field_tag 中作为参数输入的值是一个整数，但是当它出现在另一边时，它是一个字符串。隐藏字段标签会自动转换吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T02:10:39.643

简短回答 = 是 真正的答案是它在 html 端创建了一个输入标签，您作为整数传入的值被设置为 value="your value here"。所以输入字段中的任何内容都将是一个字符串。

# objective-c - 从用相机拍摄的照片和/或从相机胶卷中选择的照片访问地理编码（纬度/经度）元数据

> ID：10116484
> 
> 赞同：2
> 
> 时间：2012-04-12T02:07:18.050
> 
> 标签：objective-c, ios, uiimagepickercontroller, geocoding, alassetslibrary

> **可能重复：**
> [如何从上传的 iPhone 照片中获取正确的纬度和经度？](https://stackoverflow.com/questions/9319465/how-do-i-get-the-correct-latitude-and-longitude-from-an-uploaded-iphone-photo)

我需要从使用 iPhone 相机拍摄并从相机胶卷中选择的照片中访问地理编码位置（纬度和经度）信息。首先，用相机拍的照片...

使用相机拍摄图像后，我将使用以下代码。然后，我将图像元数据提取出来并将其存储到 NSMutableDictionary 中。但是，我在字典中没有看到任何 GPS 信息……它在哪里？？？我如何访问这些信息。我也找不到这方面的好文档...

下面的代码：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{    
    // snip out code above to keep this question short.

    NSString *mediaType = [info objectForKey:UIImagePickerControllerMediaType];
    if([mediaType isEqualToString:(__bridge NSString *)kUTTypeImage])
    {
        // images taken with camera have direct access to the metadata by using UIImagePickerControllerMediaMetadata
        NSMutableDictionary *metadata = [[NSMutableDictionary alloc] initWithDictionary:[info objectForKey:UIImagePickerControllerMediaMetadata]];
        NSLog(@"dictionary: %@", metadata);

        // rest of code snipped out to keep this question short 
```

NSLog 输出以下信息 - 但没有 GPS 信息

```
dictionary: {
DPIHeight = 72;
DPIWidth = 72;
Orientation = 6;
"{Exif}" =     {
    ApertureValue = "2.970853654340484";
    BrightnessValue = "-1.198278557694757";
    ColorSpace = 1;
    DateTimeDigitized = "2012:04:11 21:55:29";
    DateTimeOriginal = "2012:04:11 21:55:29";
    ExposureMode = 0;
    ExposureProgram = 2;
    ExposureTime = "0.06666666666666667";
    FNumber = "2.8";
    Flash = 24;
    FocalLength = "3.85";
    ISOSpeedRatings =         (
        1000
    );
    MeteringMode = 5;
    PixelXDimension = 2592;
    PixelYDimension = 1936;
    SceneType = 1;
    SensingMethod = 2;
    Sharpness = 1;
    ShutterSpeedValue = "3.911199862602335";
    SubjectArea =         (
        1295,
        967,
        699,
        696
    );
    WhiteBalance = 0;
};
"{TIFF}" =     {
    DateTime = "2012:04:11 21:55:29";
    Make = Apple;
    Model = "iPhone 4";
    Software = "5.0.1";
    XResolution = 72;
    YResolution = 72;
}; 
```

我也尝试过使用 ALAssetLibrary 的另一种方式，但是我从不输入我的`if`语句，只输入`else`部分 - 这显然会产生与上述相同的信息。结果，没用，因为我仍然没有任何 GPS 数据。

代码如下：

创建`@property`一个`NSMutableDictionary`名为`photoMetadataDictionary_`

然后在 .m 文件中执行以下操作：

```
if ([[[UIDevice currentDevice] systemVersion] floatValue] >= 4.1f) 
    {
        NSURL* assetURL = nil;
        if ((assetURL = [info objectForKey:UIImagePickerControllerReferenceURL])) 
        {
            // I never get here... Not sure why...

            ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
            [library assetForURL:assetURL resultBlock:^(ALAsset *asset)  
                {
                    NSDictionary *metadata = asset.defaultRepresentation.metadata;
                    [photoMetadataDictionary_ addEntriesFromDictionary:metadata];
                }
                    failureBlock:^(NSError *error) 
            {
            }];
        }
        else 
        {
            NSDictionary *metadata = [info objectForKey:UIImagePickerControllerMediaMetadata];
            if (metadata)
            {
                [photoMetadataDictionary_ addEntriesFromDictionary:metadata];
            }
        }
    } 
```

# xml - 如何在 Android 的 XML 中使用上标，而不使用 java

> ID：10116485
> 
> 赞同：3
> 
> 时间：2012-04-12T02:07:25.773
> 
> 标签：xml, android-layout, superscript

如何在 xml 文档本身中为 android 的 XML 中的 TextView 添加上标？我看到的每一个答案都需要你在 java.util 中设置它。我已经尝试在 strings.xml 和我正在处理的布局中使用 html 标签，所发生的只是我收到一个关于不使用 < 的错误，或者它也打印出标签

# javascript - jQuery: `:eq(i)` 选择

> ID：10116487
> 
> 赞同：2
> 
> 时间：2012-04-12T02:08:04.913
> 
> 标签：javascript, jquery

我正在尝试分配 10 个`hi`具有不同高度的 div 类。

我知道我可以这样做。

```
$(".hi:eq(0)").css("height",n[0]);
$(".hi:eq(1)").css("height",n[1]);
$(".hi:eq(2)").css("height",n[2]);
   ..........
$(".hi:eq(9)").css("height",n[9]); 
```

但是，当我尝试使用`for`循环生成它们时，它不起作用。

```
for (i=0;i<10;i++){

$(".hi:eq(i)").css("height",n[i]);

} 
```

这个也不行。

```
var i=0;
$(".hi:eq(i)").css("height",n[i]); 
```

一定有什么问题`:eq(i)`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T02:11:06.103

这个问题是 JavaScript 没有字符串插值。

但是改为这样......

```
$(".hi").slice(0,10)
        .css('height', function(i) { 
            return n[i]; 
        }); 
```

这比使用非标准选择器重复 DOM 选择要高效得多*。*

*   `.slice(0,10)`会给你前 10 个元素

*   `.css()`使用作为第二个参数传递的函数将返回值分配给`height`迭代中当前元素的 css 属性。当前迭代的索引由`i`参数表示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T02:10:09.563

`i`不能在字符串中。你可能想要这个：

```
for (i=0; i<10; i++){
    $(".hi:eq(" + i + ")").css("left", n[i]);
} 
```

# actionscript-3 - 行的 Flex List 自定义颜色

> ID：10116488
> 
> 赞同：0
> 
> 时间：2012-04-12T02:08:08.420
> 
> 标签：actionscript-3, apache-flex

是否可以根据其中的数据为弹性列表中的行设置自定义颜色。我知道如何定义自定义 itemrenderer 并执行此操作，但我想知道是否有任何简单的方法，因为我不想要更多列表中的组件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T02:36:38.693

在不修改或替换 itemRenderer 的情况下，无法将自定义颜色添加到显示数据的 itemRenderer。

Flex 中基于列表的类使用 itemRenderers 来显示数据。如果您创建自己的，那么您将替换默认的 itemRenderer。它不会在内存中创建更多组件；它只会改变那些组件是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:51:47.653

您可以创建自己的自定义列表类并通过覆盖受保护的 drawRowBackground 方法....您可能会实现这一点....

```
protected override function drawRowBackground(s:Sprite, rowIndex:int, y:Number, height:Number, color:uint, dataIndex:int):void {
      if (rowColoringFunction != null && IList(dataProvider).length > dataIndex) {
        color = rowColoringFunction(IList(dataProvider).getItemAt(dataIndex), dataIndex, color);
      }
      super.drawRowBackground(s, rowIndex, y, height, color, dataIndex);
    } 
```

试着让我知道...

# powershell - 带有 .cer 的 Powershell http 帖子进行身份验证

> ID：10116489
> 
> 赞同：1
> 
> 时间：2012-04-12T02:08:08.783
> 
> 标签：powershell

PowerShell 很新，希望有人能指出我正确的方向。

我需要执行 POST 请求，并且必须在 POST 请求期间将本地存储的证书（x509）传递给它，以进行身份​​验证。

实现这一目标的最佳方式或方法是什么？我找到了很多能够在 .net/C# 中执行此任务的示例，但我没有找到任何可以在 PowerShell 中完成此任务的东西。

这是我的 POST 请求代码，我想再次指向本地存储的证书“C:\code\cert.crt”并在网络事务期间传递它。

```
$url = "https://myUrl/uploadTester"
$data = '{"data": "988309487577839444"}'
[System.Net.ServicePointManager]::ServerCertificateValidationCallback = {$true}
$b = [System.Text.Encoding]::ASCII.GetBytes($data)
$web = [System.Net.WebRequest]::Create($url)
$web.Method = "POST"
$web.ContentLength = $b.Length
$web.ContentType = "application/x-www-form-urlencoded"
$stream = $web.GetRequestStream()
$stream.Write($b,0,$b.Length)
$stream.close()

$reader = New-Object System.IO.Streamreader -ArgumentList $web.GetResponse().GetResponseStream()
$reader.ReadToEnd()
$reader.Close() 
```

感谢所有高级帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T02:35:56.740

将 C# 转换为 PowerShell 非常容易。试试这个：

```
[System.Net.ServicePointManager]::ServerCertificateValidationCallback = {$true}
$cert = [System.Security.Cryptography.X509Certificates.X509Certificate2]::CreateFromCertFile("C:\Users\Andy\Desktop\Test.cer")
$web = [System.Net.WebRequest]::Create($url)
$web.ClientCertificates.Add($Cert) 
```

我改编自：http: [//support.microsoft.com/kb/895971](http://support.microsoft.com/kb/895971)

看起来关键是**ClientCertificates**属性。

[http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.clientcertificates.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.clientcertificates.aspx)

# web-services - 获取地球上任何一点的当前天气状况的 API

> ID：10116494
> 
> 赞同：0
> 
> 时间：2012-04-12T02:08:49.363
> 
> 标签：web-services, gps, latitude-longitude, weather, weather-api

我正处于项目的规划阶段，其中一个要求是系统能够在给定一组经纬度坐标的情况下获得地球上**任何点的当前天气状况。**

我注册了 Wunderground.com 的 Weather API，但立即意识到这行不通。如果您输入的一组坐标与已知城市不对应，API 将返回“querynotfound”错误，并显示“没有城市与您的搜索查询匹配”。

有这样的服务吗？

编辑：为了澄清，我可能需要（比如）大西洋中某个任意点的当前天气状况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T03:07:21.223

你看过谷歌api吗？

`http://www.google.com/ig/api?weather=,,,40467626,-03609910&hl=es`

我认为这就是您正在寻找的[将 Google Weather API 与 Lat 和 Lon 一起使用 - 如何格式化？](https://stackoverflow.com/questions/2780836/using-google-weather-api-with-lat-and-lon-how-to-format)

### 2012 年 8 月 29 日编辑

### 正如“azgolfer”在 2012 年 8 月 25 日提到的那样。谷歌已经逐步淘汰了它的 API。请尝试[http://www.wunderground.com/](http://www.wunderground.com/)。

# spring - 当 Spring @Transactional 注释时，JPA/Hiberante 不会为 FetchType.EAGER 生成连接 sql

> ID：10116498
> 
> 赞同：0
> 
> 时间：2012-04-12T02:08:59.060
> 
> 标签：spring, hibernate, jpa, transactional

我有一个非常有线的问题。

JPA/Hiberante 在 Spring @Transactional 注释时不会为 FetchType.EAGER 生成连接 sql。但是，如果我删除 @Transactional 。一切都很好。

这是代码：

```
public class Item {
    @ManyToOne
    private Order order;
}   

public class Order {
    @OneToMany(mappedBy = "item", fetch = FetchType.EAGER, cascade = CascadeType.ALL)
    private List<Item> items;
}   

@Test
@Transactional
public void testFetch() throws Exception {
     Item randomItem = new Item();
     Order randomOrder = new Order();

    //OrderService and itemService is implemented by Spring Roo standard. 
    orderService.saveOrder(randomOrder);
    randomItem.setOrder(randomOrder);
    itemService.saveItem(randomItem);

    Order OrderResult = orderService.findOrder(randomOrder.getId());
    final List<Item> itemSearchResult = OrderResult.getItems();

    Assert.assertNotNull(itemSearchResult);

} 
```

如果@Transactional on，assertNotNull 将失败。但是如果@Transactional 评论会成功。

我调试更多信息。只是想知道 Hibernate 上的 @Transactional 何时不会为

```
orderService.findOrder(randomOrder.getId()); 
```

另外，我尝试切换到 elcpseLink 作为 JPA 提供程序。事情变得更糟，当 @Transactional 评论时， orderService.findOrder(randomOrder.getId()) 将返回一个空列表（不是 null，大小为 0）。

有什么建议吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:47:44.713

我无法评论 Hibernate 中的连接，除非您应该在查询中指定 fetch join 以移植到其他 JPA 提供程序。特别是 EclipseLink 不会加入没有 JPA 设置或本机查询提示或 @JoinFetch 注释的渴望关系。

至于 EclipseLink 上的集合是空的。这是因为您只设置了关系的一侧。JPA 要求您设置双向关系的双方，以便它们与数据库中的内容保持一致。当 @Transactional 被注释掉时，您将返回相同的 randomOrder 实例，该实例在持久化时具有空项目集合。

尝试调用 randomOrder.addItems(randomItem); 和 randomItem.setOrder(randomOrder); 在 orderService.saveOrder(randomOrder) 之前；称呼。

# java - 100% CPU 使用率的 Java 线程优化

> ID：10116502
> 
> 赞同：4
> 
> 时间：2012-04-12T02:09:16.373
> 
> 标签：java, multithreading, performance

我有一个应用程序接受队列上的工作，然后旋转该工作以在独立线程上完成。线程的数量并不多，比如最多 100 个，但这些都是密集型任务，可以快速将 CPU 提升到 100%。

为了以最快的速度完成最多的工作：当我需要做更多的工作并让 Java 线程调度程序处理分配工作时，我最好只启动更多线程，还是会变得更聪明并管理工作负载以保持 CPU 低于100% 让我更快？

这台机器专用于我的 java 应用程序。

**编辑：**

感谢您的精彩输入！

这些任务具有不同的复杂性并涉及 I/O，因此如果线程池较低（例如 4）很可能仅将 CPU 运行到 20%。我无法知道有多少任务实际上会将 CPU 占用到 100%。

我的想法是我应该通过 RMI 监视 CPU 并动态地上下拨动工作，还是我应该不在乎并让操作系统来处理它。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-12T02:11:10.663

如果您在并行线程中有太多同时计算密集型任务，您会很快达到收益递减点。事实上，如果有 N 个处理器（内核），那么您不想要超过 N 个这样的线程。现在，如果任务偶尔会因 I/O 或用户交互而暂停，那么正确的数字可能会更大一些。但是一般来说，如果在任何时候有更多的线程想要进行计算而不是可用的内核，那么你的程序就是在上下文切换上浪费时间——也就是说，调度会让你付出代价。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-12T02:11:08.380

> 为了以最快的速度完成最多的工作：当我需要做更多的工作并让 Java 线程调度程序处理分配工作时，我最好只启动更多线程，还是会变得更聪明并管理工作负载以保持 CPU 低于100% 让我更快？

随着您添加越来越多的线程，上下文切换、内存缓存刷新、内存缓存溢出以及内核和 JVM 线程管理所产生的开销也会增加。当您的线程占用 CPU 时，它们的内核优先级下降到某个最小值，它们将达到时间片最小值。随着越来越多的线程挤占内存，它们会溢出各种内部 CPU 内存缓存。CPU 需要从较慢的内存中交换作业的可能性更高。在 JVM 内部，有更多的互斥锁本地争用，可能还有一些（可能很小）增量的每线程和对象带宽 GC 开销。根据用户任务的同步程度，更多线程会导致内存刷新和锁争用增加。

对于任何程序和任何架构，都有一个最佳点，线程可以优化利用可用的处理器和 IO 资源，同时限制内核和 JVM 开销。反复寻找最佳位置将需要多次迭代和一些猜测。

我建议使用`Executors.newFixedThreadPool(SOME_NUMBER);`并提交你的工作给它。然后，您可以进行多次运行，上下改变线程数，直到根据工作和盒子的架构找到同时运行的最佳池数。

但是请理解，最佳线程数将根据处理器数量和其他可能难以确定的因素而有所不同。如果它们在磁盘或网络 IO 资源上阻塞，则可能需要更多线程。如果他们正在做的工作主要是基于 CPU 的，那么线程会更少。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-12T08:39:10.437

您的 CPU 以 100% 运行这一事实并不能说明他们在做**有用**的工作有多忙。在您的情况下，您使用的线程多于内核，因此 100% 包含一些上下文切换并不必要地使用内存（对 100 个线程的影响很小），这是次优的。

对于 CPU 密集型任务，我通常使用这个成语：

```
private final int NUM_THREADS = Runtime.getRuntime().availableProcessors() + 1;
private final ExecutorService executor = Executors.newFixedThreadPool(NUM_THREADS); 
```

正如其他人所指出的，使用更多线程只会引入不必要的上下文切换。

显然，如果任务执行一些 I/O 和其他阻塞操作，这是不适用的，更大的池是有意义的。

**编辑**

为了回复@MartinJames 评论，我运行了一个（简单的）基准测试——结果表明，从池大小 = 处理器数量 + 1 到 100 只会稍微降低性能（我们称之为 5%）——更高的数字（ 1000 和 10000）确实显着影响了性能。

> 结果是 10 次运行的平均值：
> 池大小：9：238 毫秒。//(NUM_CORES+1)
> 池大小：100：245 毫秒。
> 池大小：1000：319 毫秒。
> 池大小：10000：2482 毫秒。

代码：

```
public class Test {

    private final static int NUM_CORES = Runtime.getRuntime().availableProcessors();
    private static long count;
    private static Runnable r = new Runnable() {

        @Override
        public void run() {
            int count = 0;
            for (int i = 0; i < 100_000; i++) {
                count += i;
            }
            Test.count += count;
        }
    };

    public static void main(String[] args) throws Exception {
        //warmup
        runWith(10);

        //test
        runWith(NUM_CORES + 1);
        runWith(100);
        runWith(1000);
        runWith(10000);
    }

    private static void runWith(int poolSize) throws InterruptedException {
        long average = 0;
        for (int run = 0; run < 10; run++) { //run 10 times and take the average
            Test.count = 0;
            ExecutorService executor = Executors.newFixedThreadPool(poolSize);
            long start = System.nanoTime();
            for (int i = 0; i < 50000; i++) {
                executor.submit(r);
            }
            executor.shutdown();
            executor.awaitTermination(10, TimeUnit.SECONDS);
            long end = System.nanoTime();
            average += ((end - start) / 1000000);
            System.gc();
        }
        System.out.println("Pool size: " + poolSize + ": " + average / 10 + " ms.  ");
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-12T09:25:55.243

“变得更聪明并管理工作负载以将 CPU 保持在 100% 以下会让我更快吗？”

可能不是。

正如其他人所发布的那样，如果大多数任务都是 CPU 密集型的，那么 100 个线程对于线程池来说太多了。它不会对典型系统的性能产生太大影响 - 如果过载太多，4个线程会很糟糕，400个线程会很糟糕。

你是如何决定 100 个线程的？为什么不是16，说？

'线程的数量并不多，比如说多达 100' - 它会有所不同吗？只需在启动时创建 16 个并停止管理它们 - 只需将队列传递给它们并忘记它们。

可怕的想法 - 你没有为每个任务创建一个新线程，是吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T05:01:16.513

您应该保持 100% 的使用率，但使用最少的线程数。100 个线程看起来太多了。

# php - PHP RegEx 不会拿起问号

> ID：10116505
> 
> 赞同：1
> 
> 时间：2012-04-12T02:09:47.857
> 
> 标签：php, regex, preg-match-all

我正在尝试使用 PHP 函数“preg_match_all”匹配字符串中的 url。它工作正常，除了它不会匹配带有问号的网址。

例如，这将匹配得很好：

```
http://espn.com/mlb 
```

但这不匹配：

```
http://espn.com/mlb?player=71 
```

这是我正在使用的正则表达式，

```
$regexUrl = "/(http|https|ftp|ftps)\:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(\/\S*)?/"; 
```

我无法弄清楚为什么 \S 没有拾取问号。我尝试了很多不同的表达方式，但无法匹配问号。有任何想法吗？

编辑：

事实证明 preg_match_all 返回 true，但我没有转义 preg_match_all 输出中的问号，所以我稍后进行的 preg_replace 调用失败了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T02:21:16.163

问号表示前面的匹配是可选的，即

```
/https?/ 
```

将导致“http”和“https”匹配。您必须转义问号以匹配它。

例如：

```
/https\?/ 
```

现在将只匹配“https？”。

# go - Go：将 var 转换为匿名函数

> ID：10116507
> 
> 赞同：5
> 
> 时间：2012-04-12T02:10:05.720
> 
> 标签：go

我无法将变量转换为匿名函数。有解决办法吗？

```
import  "github.com/lxn/walk"

***

var openAction [12]*walk.Action
for i := 0; i < 12; i++ {

    openBmp, err := walk.NewBitmapFromFile(_films[i][0])
    if err != nil {
        log.Printf("Open bitmap for buildBody() :%v\n", err)
    }
    openAction[i] = walk.NewAction()
    openAction[i].SetImage(openBmp)
    openAction[i].SetText(_films[i][2])
    openAction[i].Triggered().Attach( func(){
        exec(i)
    })
    mw.ToolBar().Actions().Add(openAction[i])
} 
```

**exec(i)**其中我总是 = 11

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T03:41:42.260

```
for i := 0; i < 12; i++ {
    i := i
    ... 
```

Crazy as it looks, this is something you will see in Go code. It results from the way closures work and the way variables are scoped. Your anonymous function is a closure that captures i. Specifically, it is capturing a variable called i, not the current value of i, and it captures whatever i is in scope. In your original code this is the loop variable, which is the same variable for each iteration of the loop. All of your closures captured the same variable. The addition of `i := i` declares a new variable on each iteration. Now each closure will capture this new variable, and on each iteration it will be a different variable.

In a little more detail, the scope of the loop variable i is the for statement. This includes the loop block, but since the declaration of the loop variable i is outside of the block, declaring a new variable with the same name inside the block is legal and creates a new variable at that point in the block. The loop variable is then shadowed. Often a variable declared like this goes on the stack, but in this case compiler escape analysis sees that your closure is still referring to this block variable when it goes out of scope at the end of the block, and so the variable is placed on the heap. On each iteration, the block is reentered and a new variable i is placed on the heap.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-12T02:31:23.980

我认为这会让你得到你想要的：

```
openAction[i].Triggered().Attach(func(x int) func() {
    return func() { exec(x) }
}(i)) 
```

诀窍是让您的匿名函数返回一个匿名函数，并且每个创建的函数都将包含*i*的每个值。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-12T02:41:51.090

您遇到了 go 的 for 循环的怪癖。循环中的 i 变量不是每次迭代的新变量。因此，您所有的闭包都关闭了同一个变量，该变量的值在它们下面发生了变化。当您的代码在循环之后运行时，所有函数都会看到它们关闭的 i 的值 11。

解决方案是将 i 传递给一个函数，然后返回另一个关闭函数 arg 的函数。这就是 Adam Crosslands 解决方案有效的原因。

# cocoa-touch - 我如何将 UITextField 的数据分配给变量？

> ID：10116508
> 
> 赞同：0
> 
> 时间：2012-04-12T02:10:09.547
> 
> 标签：cocoa-touch, uitextfield, iphone-developer-program

我使用此代码来执行此操作，但它不起作用并提出了一个无法从字符串分配给变量的问题

代码：

```
numeroJugador1 = numeroIngresa1.text; 
numeroJugador2 = numeroIngresa2.text; 
numeroJugador3 = numeroIngresa3.text; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T02:19:57.257

这工作正常：

```
NSString *numeroJugador1 = numerIngress1.text; 
```

# python - 我在 python 中遇到关键错误

> ID：10116518
> 
> 赞同：225
> 
> 时间：2012-04-12T02:11:27.360
> 
> 标签：python, dictionary

在我的 python 程序中，我收到此错误：

```
KeyError: 'variablename' 
```

从这段代码：

```
path = meta_entry['path'].strip('/'), 
```

谁能解释为什么会这样？

* * *

## 回答 #1

> 赞同：303
> 
> 时间：2012-04-12T02:15:05.147

A[`KeyError`](https://docs.python.org/library/exceptions.html#KeyError)通常表示密钥不存在。那么，您确定`path`密钥存在吗？

来自官方 python 文档：

**异常键错误**

> 当在现有键集中找不到映射（字典）键时引发。

例如：

```
>>> mydict = {'a':'1','b':'2'}
>>> mydict['a']
'1'
>>> mydict['c']
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
KeyError: 'c'
>>> 
```

因此，尝试打印内容`meta_entry`并检查是否`path`存在。

```
>>> mydict = {'a':'1','b':'2'}
>>> print mydict
{'a': '1', 'b': '2'} 
```

或者，您可以这样做：

```
>>> 'a' in mydict
True
>>> 'c' in mydict
False 
```

* * *

## 回答 #2

> 赞同：144
> 
> 时间：2012-04-12T02:20:09.433

我完全同意关键错误评论。您也可以使用[字典的 get()](http://docs.python.org/library/stdtypes.html#dict)方法来避免异常。这也可以用于提供默认路径，而不是`None`如下所示。

```
>>> d = {"a":1, "b":2}
>>> x = d.get("A",None)
>>> print x
None 
```

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2016-02-18T15:02:50.920

对于dict，只需使用

`if key in dict`

并且不要在密钥列表中使用搜索

`if key in dict.keys()`

后者会更耗时。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-10T21:44:04.517

是的，这很可能是由不存在的密钥引起的。

在我的程序中，出于效率考虑，我使用 setdefault 来消除此错误。取决于这条线的效率如何

```
>>>'a' in mydict.keys() 
```

我也是 Python 新手。其实我今天才学的。所以请原谅我对效率的无知。

在 Python 3 中，你也可以使用这个函数，

```
get(key[, default]) [function doc][1] 
```

据说它永远不会引发关键错误。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-08-01T00:31:36.153

这意味着您的阵列缺少您要查找的密钥。我使用一个函数来处理这个问题，该函数要么返回值（如果存在），要么返回默认值。

```
def keyCheck(key, arr, default):
    if key in arr.keys():
        return arr[key]
    else:
        return default

myarray = {'key1':1, 'key2':2}

print keyCheck('key1', myarray, '#default')
print keyCheck('key2', myarray, '#default')
print keyCheck('key3', myarray, '#default') 
```

输出：

```
1
2
#default 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-02-08T12:25:23.757

`dict`使用嵌套解析时收到此错误`for`：

```
cats = {'Tom': {'color': 'white', 'weight': 8}, 'Klakier': {'color': 'black', 'weight': 10}}
cat_attr = {}
for cat in cats:
    for attr in cat:
        print(cats[cat][attr]) 
```

追溯：

```
Traceback (most recent call last):
      File "<input>", line 3, in <module>
    KeyError: 'K' 
```

因为在第二个循环中应该`cats[cat]`只是`cat`（什么只是一个键）

所以：

```
cats = {'Tom': {'color': 'white', 'weight': 8}, 'Klakier': {'color': 'black', 'weight': 10}}
cat_attr = {}
for cat in cats:
    for attr in cats[cat]:
        print(cats[cat][attr]) 
```

给

```
black
10
white
8 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-06-29T04:24:55.593

如果您使用的是 Python 3，让我们让它变得简单

```
mydict = {'a':'apple','b':'boy','c':'cat'}
check = 'c' in mydict
if check:
    print('c key is present') 
```

如果您需要其他条件

```
mydict = {'a':'apple','b':'boy','c':'cat'}
if 'c' in mydict:
    print('key present')
else:
    print('key not found') 
```

对于动态键值，也可以通过try-exception块来处理

```
mydict = {'a':'apple','b':'boy','c':'cat'}
try:
    print(mydict['c'])
except KeyError:
    print('key value not found')mydict = {'a':'apple','b':'boy','c':'cat'} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-08-02T22:36:05.647

例如，如果这是一个数字：

```
ouloulou={
    1:US,
    2:BR,
    3:FR
    }
ouloulou[1]() 
```

它工作得很好，**但** 如果你使用例如：

```
ouloulou[input("select 1 2 or 3"]() 
```

它不起作用，因为您的输入返回字符串'1'。所以你需要使用**int()**

```
ouloulou[int(input("select 1 2 or 3"))]() 
```

# java - Java IDE 7.1 到 MS SQL 2005 使用 PreparedStatement...回报在哪里？

> ID：10116523
> 
> 赞同：1
> 
> 时间：2012-04-12T02:11:57.410
> 
> 标签：java, sql-server-2005, prepared-statement, return

我整天都在为这个问题苦苦挣扎。在阅读了 Statements(S) 和 PreparedStatements(PS) 之间的好处之后，我决定将我所有的 S 转换为 Netbeans 中的 PS。我惊讶地发现没有错误，但是......我的代码执行也没有输出。

```
import java.sql.*;
public class ViewingMySQL {
public static void main(String[] args) {

 //Declare Variables
 Connection con;
 ResultSet rs;
 Statement stmt;
 String sqlappname;

 PreparedStatement findAppID_lookup= null;
 String findAppID_lookup_stmt="select app.ID as APPID" 
 +" from IntergraphIN_AppTranslation" 
 +" inner    join app on app.unit=IntergraphIN_AppTranslation.UnitName" 
 +" where IntergraphIN_AppTranslation.IntergraphUnitName=(?)";

try{
Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
con = DriverManager.getConnection("jdbc:odbc:database","username","password");
sqlappname="'XXXY01'";
findAppID_lookup= con.prepareStatement(findAppID_lookup_stmt);
findAppID_lookup.setString(1, sqlappname);
rs = findAppID_lookup.executeQuery();

if(rs.next()){
System.out.println(rs.getInt("APPID"));
}

rs.close();
findAppID_lookup.close();

}
 catch(Exception e){
 System.err.println(e);
 }
}
}` 
```

当上面的代码执行和构建时......没有输出。运行：BUILD SUCCESSFUL（总时间：1 秒）

我原来是：

```
import java.sql.*;

public class ViewingMySQL {

public static void main(String[] args) {
//Declare Vars
Connection con;
ResultSet rs;
Statement stmt;
String sqlappname;

try{

Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
con = DriverManager.getConnection("jdbc:odbc:Database","username","password");

sqlappname="'XXXY01'";

stmt = con.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE,
                            ResultSet.CONCUR_READ_ONLY);

rs = stmt.executeQuery("SELECT ID FROM app where AppName="+sqlappname);
if(!rs.isBeforeFirst()){
    rs.close();
    rs = stmt.executeQuery("select app.ID from IntergraphIN_AppTranslation"
    +" inner join app"
    +" on app.unit=IntergraphIN_AppTranslation.UnitName"
    +" where IntergraphIN_AppTranslation.IntergraphUnitName="+sqlappname);
}

if(rs.next()){
System.out.println(rs.getInt(1));
}
rs.close();
stmt.close();
con.close();
}catch(Exception e){
System.err.println(e);
}
}
}` 
```

此代码输出：运行：2020603 BUILD SUCCESSFUL（总时间：1 秒）

您在上面看到的 Int 是我要查找的列的 ID。

有人可以帮我理解我在做什么...是我传递给 PS 的变量的格式吗？谢谢，斯科利斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T02:14:47.687

改变这个：

```
sqlappname="'XXXY01'"; 
```

对此：

```
sqlappname="XXXY01"; 
```

更新重新评论：

PreparedStatements 有很多好处。例如：

*   它可以帮助防止 sql 注入：输入绑定到变量，输入不用于创建语句

*   如果只有绑定变量更改（而不是更改 sql 语句本身），则 rdbms 可能会使用语句缓存

*   这些陈述可以更容易阅读：你不必搞乱引用引号等

在这种情况下，引用的含义似乎变得混乱。原文：sqlappname="'XXXY01'"，双引号是声明java字符串，单引号是sql字符串。在准备好的版本中：sqlappname="XXXY01"，我们只是说“这是要绑定的字符串”，并且我们在准备好的语句中指定我们的绑定将是一个字符串。

# iphone - iPhone iOS 如何从相机胶卷图像中提取照片元数据和地理标记信息？

> ID：10116527
> 
> 赞同：6
> 
> 时间：2012-04-12T02:12:14.627
> 
> 标签：iphone, objective-c, ios, photo, geotagging

> **可能重复：**
> [如何从上传的 iPhone 照片中获取正确的纬度和经度？](https://stackoverflow.com/questions/9319465/how-do-i-get-the-correct-latitude-and-longitude-from-an-uploaded-iphone-photo)

我正在制作一个照片应用程序，想知道我在处理带有地理标记的照片时有哪些选择。**我想显示照片的拍摄地点（类似于照片应用程序）。这可能吗？**

另外，**我需要知道照片是什么时候拍摄的**。我可以为自己拍摄的照片捕获此信息，但是相机胶卷图像呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-12T02:24:54.117

是的，有可能。

您必须使用`ALAssetsLibrary`才能访问您的相机胶卷。然后，您只需枚举您的照片并询问位置。

```
assetsLibrary = [[ALAssetsLibrary alloc] init];
groups = [NSMutableArray array];

[assetsLibrary enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos  usingBlock:^(ALAssetsGroup *group, BOOL *stop)
{
    if (group == nil)
    {
        return;
    }

    [groups addObject:group];

} failureBlock:^(NSError *error)
{
    // Possibly, Location Services are disabled for your application or system-wide. You should notify user to turn Location Services on. With Location Services disabled you can't access media library for security reasons.

}]; 
```

这将枚举您的资产组。接下来，您选择一个组并枚举其资产。

```
ALAssetGroup *group = [groups objectAtIndex:0];
[group enumerateAssetsUsingBlock:^(ALAsset *result, NSUInteger index, BOOL *stop)
 {
     if (result == nil)
     {
         return;
     }

     // Trying to retreive location data from image
     CLLocation *loc = [result valueForProperty:ALAssetPropertyLocation];    
 }]; 
```

现在您的`loc`变量包含照片拍摄地点的位置。您应该`ALErrorInvalidProperty`在使用前对其进行检查，因为某些照片可能缺少此数据。

您可以指定`ALAssetPropertyDate`获取照片创建的日期和时间。

# mysql - 是否可以使用 mysqldump 转储和导入视图？

> ID：10116529
> 
> 赞同：3
> 
> 时间：2012-04-12T02:12:44.680
> 
> 标签：mysql, view, mysqldump

当我使用 mysqldump 并重新导入转储时，视图变为空表。

是否有可能

a）转储然后导入视图而不将它们变成空表？

或者，如果 a 不可能，

b) 使用通配符从 mysqldump 中排除视图，例如

```
mysqldump mydb  --ignore-table=*views > mydb.sql 
```

排除所有视图，如果所有视图的名称都以字符串“views”结尾？（这部分以前曾被问过，但仍未得到答复：[使用 mysqldump 忽略 mysql db 备份中的“视图”](https://stackoverflow.com/q/8520330/199217)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T02:26:29.840

使用`--compact --add-drop-table`然后手动调整转储文件。

细节：

`--compact`

产生更紧凑的输出。此选项启用`--skip-add-drop-table, --skip-add-locks, --skip-comments, --skip-disable-keys, and --skip-set-charset`选项。
笔记：

在 MySQL 5.1.21 之前，如果数据库转储包含视图，则此选项不会创建有效的 SQL。重新创建视图需要创建和删除临时表，此选项禁止删除这些临时表。作为一种解决方法，将 --compact 与 --add-drop-table 选项一起使用，然后手动调整转储文件。

# objective-c - Objective-C NSMutableArray：按日期键组织照片数组

> ID：10116535
> 
> 赞同：1
> 
> 时间：2012-04-12T02:13:58.593
> 
> 标签：objective-c, xcode, cocoa-touch

我有一系列字典..看起来像这样。

```
(
   {name = somename;
    date = NSDate;
    other_params = some other params;
   },
   ...
) 
```

然后如何按 NSDate 对数组项进行排序（从最旧到最新，反之亦然）。我只是做一个基本的选择排序算法还是有更短的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T02:18:20.157

您可以使用描述符或比较器对数组进行排序，无论您觉得更舒服。下面是一个使用比较器的例子：

```
NSArray *sortedArray = [myArray sortedArrayUsingComparator: ^(id obj1, id obj2) {
    return [[obj1 date] compare:[obj2 date]];
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T02:32:49.633

这是排序描述符选项：

```
// Adjust the 'ascending' option to invert the sort order.    
NSSortDescriptor *dateSortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"date" ascending:YES];
// The sort descriptors have to go into an array.
NSArray *sortDescriptors = [NSArray arrayWithObject:dateSortDescriptor];

NSArray *sortedArray = [myArray sortedArrayUsingDescriptors:sortDescriptors]; 
```

如果您使用 an`NSMutableArray`并且不需要保留其原始顺序，您也可以就地排序。

# php - MySQL 按不同日期选择，有日期限制但没有条目

> ID：10116537
> 
> 赞同：3
> 
> 时间：2012-04-12T02:14:24.833
> 
> 标签：php, mysql, pdo, distinct

我想要做的是使用 php 从 mysql 数据库中的更新表中获取条目。每个条目都附有一个时间戳。首先，我从时间戳中获取 10 个不同的日期，使用这 10 个唯一日期创建一个新数组（我这样做是因为 fetchAll 将日期放入一个多维数组中），然后执行另一个数据库调用，获取具有这些日期的所有条目。可以返回 10 多个条目。我希望它有 10 个不同的日期，而不是 10 个不同的时间戳。

例如，如果 2012-03-25 出现在不同日期的第一次通话中，它可以找到：

```
2012-03-25 00:58:53
2012-03-25 00:58:02
2012-03-25 00:57:20
2012-03-25 00:56:35
2012-03-25 00:55:58
2012-03-25 00:53:20
2012-03-25 00:52:32
2012-03-25 00:51:45 
```

由于时间戳不同。

这是我正在使用的当前代码，它有效。

```
$test = $dbh->getArray("SELECT DISTINCT DATE_FORMAT(added, '%Y-%m-%d') AS added FROM db_updates ORDER BY added DESC LIMIT 0,10");

foreach ($test as $entry) {
  list($date) = $entry;
  $output[] = '\''.$date.'\'';
}  

$test2 = $dbh->getArray("SELECT * FROM db_updates WHERE DATE_FORMAT(added, '%Y-%m-%d') IN (".implode(',', $output).") ORDER BY added DESC");

print_r($test2); 
```

这返回了 33 个结果。

以防万一有人问，我使用的是 PDO 而不是 php 中的 mysql 函数。该代码在这里：

```
public function getArray($query) {
  $result = $this->db->query("$query");
  return $result->fetchAll(PDO::FETCH_NUM);
} 
```

这一切都 100% 有效，它可以做我想做的事情。但是，我的问题是，是否有一种方法可以通过一个 mysql 调用来完成所有这些操作，所以我不必在中间调用两次循环。

我试图通过搜索谷歌自己弄清楚，并使用连接等反复试验无济于事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T02:18:26.623

它应该与 一起使用`INNER JOIN`，您可以使用[`DATE(added)`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date)而不是`DATE_FORMAT()`剥离 DATETIME 值的时间部分：

```
SELECT * 
FROM
  db_updates
  INNER JOIN (
    /* Subquery returns most recent 10 dates */
    SELECT DISTINCT DATE(added) AS added FROM db_updates ORDER BY added DESC LIMIT 0,10
  /* JOIN between dates */
  ) datelist ON DATE(db_updates.added) = datelist.added
ORDER BY db_updates.added DESC 
```

# git - 当必须同时使用 Git 和 Subversion 时如何处理 Git-svn

> ID：10116546
> 
> 赞同：7
> 
> 时间：2012-04-12T02:15:55.737
> 
> 标签：git, svn, git-svn

**[更新]**

有关更多详细信息，我尝试在家里做纯 Git 的原因是，我的公司想迁移到 Git，但经理不喜欢做出改变，因为开发人员对我们自己的存储库上的 Git 不了解。所以，我尝试做的是，我尝试让每个人都使用 Pure git，而有人可以在这个学习阶段合并回 Subversion。所以，在任何紧急情况下，他们仍然可以使用 Subversion。

所以，在大家熟悉 Git 之前，我不能将存储库转移到使用纯 Git。因此，它将同时更新 Subversion 和 Git。（现在的主存储库是 Subversion）。因此，我尝试让 Git 在我通过 dcommit 将存储库同步回 Subversion 期间顺利运行。

**[问题]**

我在使用 Subversion 作为存储库的组织中，所以我将它作为我的个人 Git 转储（并计划在将来使用用 Git 替换 Subversion）

现在，我有同时使用**Git**和**Subversion (Main Source)**的存储库。当我必须同时使用 git 和 subversion 时，我在处理*git svn rebase时遇到了问题。*

我的工作流程如下

**在办公室**

> 1.  Repository 有 Git-svn 接口
> 2.  我总是从这里使用*git svn dcommit将代码提交给 Subversion。*
> 3.  我在 Bitbucket 推送到我的远程 git 存储库

**在家里**

> 1.  我从 Bitbucket 克隆存储库
> 2.  使用并致力于 Bitbucket

**现在，回到办公室**

> 1.  git 拉
> 2.  git svn 变基
> 3.  git svn dcommit
> 4.  git 推送

在第 4 步中。我有一个问题，我已经重新设置了我的分支

**问题现在在这里，当我回到家时**

当我回到家时，我不能使用“git fetch”，因为分支已经重新设置了基础。所以，我必须用*git branch -D .....*删除分支，然后再次*git checkout*。

所以，我寻找我们可以同时使用 Git 存储库和 Subversion 的方式，并在使用*git svn rebase*或*git svn dcommit*完成操作后与 Git 一起使用。

笔记。我不喜欢在家里使用任何**git-svn 。**尝试继续只使用 Git。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T13:58:08.593

好的，您的主要问题似乎是您无法真正`git pull`在家中进行历史记录已被重写（实际上它应该可以工作，但它会尝试进行不必要的合并）。

解决该问题的最简单方法是使用`git pull --rebase`. 这样，您无需将在家中所做的提交与远程分支的尖端合并，而是将自分支创建以来所做的每个提交重新设置在分支的尖端。Git 会足够聪明地看到一些提交是完全相同的，并且它们将在 rebase 期间被自动修剪。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T14:44:33.697

我认为您的问题的主要原因是`git svn dcommit`更改提交消息以包含 SVN 提交数据。由于消息包含在提交的 SHA1 中，因此此更改在 git 看来是完全不同的提交。

我的解决方案是在您的办公室存储库中有一个分支，您与 SVN 同步另一个（纯 git）分支来完成您的工作。每当您想与 SVN 存储库交换某些内容时，您可以合并其中一个或其他方向。

就我而言，我设置了另一个专门用于 SVN 交换的 git repo。我有一个 cron 作业，它每 15 分钟将该存储库与 SVN 服务器同步一次。这样我就不会错过一个`git svn rebase`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T21:59:32.233

毕竟，您没有提到为什么要保留 svn 。但我的建议是一劳永逸地从一个干净的 git repo 开始。并避免不必要的问题。

我相信是凯西在迁移到 git 方面做出了最佳答案： [如何将具有历史记录的 SVN 存储库迁移到新的 Git 存储库？](https://stackoverflow.com/questions/79165/how-to-migrate-svn-with-history-to-a-new-git-repository)

当然，您必须进行备份，然后开始该过程。

另一个想法是，如果 rebase 是问题所在，为什么不使用纯 svn 更新，然后将更改提交到 Git（仅限 git commit），就好像你自己写的一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T14:25:03.503

实际上，您应该可以`git fetch`使用. 那应该可以解决您的问题`git merge origin/branch``git rebase origin/branch`

如果它没有帮助尝试`git fetch`，那么`git checkout -f -B branch origin/branch`最后一个命令将强制从远程分支覆盖本地分支。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T12:25:00.027

[从使用 Git 的版本控制](http://shop.oreilly.com/product/9780596520137.do)一书中找到了解决方案。第 295 页。

而不是使用本地 - 主分支，必须签出远程分支

```
git checkout remote/master (Detach HEAD)
git merge --no-ff master (merge the local master)
git svn dcommit
git push origin (update to git Repository) 
```

此模型适用于将合并回 Subversion 存储库的人，而另一个人则在纯 Git 或纯 Subversion 上工作。通过这种方式，Git 用户可以在没有合并问题的情况下使用 Git。

# java - 使用 Java Web 服务远程连接

> ID：10116549
> 
> 赞同：0
> 
> 时间：2012-04-12T02:16:21.697
> 
> 标签：java, web-services, jax-ws

有人可以告诉我我做错了什么吗？我正在尝试组织一个快速的 Web 服务测试，看看我现在是否可以让它工作。我遇到的问题是，如下所示，它不起作用，但如果我更改 URL 并将“ `myWebsite.com`”替换为“”，`localhost`它会起作用。所以，我知道服务器端正在工作（我仍然检查并仔细检查了它）。但是我需要它来通过远程客户端工作，我就是无法让它工作。任何帮助将不胜感激。

```
package stickman.Server;

import java.net.*;
import javax.xml.namespace.*;
import javax.xml.ws.*;
import stickman.Combined.*;
public class TestApp {

public static void main(String[] args) throws Exception {

    // --------------------------------------------
    // changing "myWebite.com" to "localhost" works
    URL url = new URL(
        "http://myWebsite.com:32768/home/rhyan/workspace/Stickman/bin/stickman/Server");
    // --------------------------------------------

    QName qname = new QName("http://Server.stickman/","StickmanServerService");
    Service service = Service.create(url, qname);
    StickmanServerInterface ssi = service.getPort(StickmanServerInterface.class);

    Account a = ssi.getAccount("This is a test");
    System.out.println(a.getUserId());

}

} 
```

编辑：这是错误跟踪...

```
Exception in thread "main" com.sun.xml.internal.ws.wsdl.parser.InaccessibleWSDLException: 2 counts of InaccessibleWSDLException.

java.net.ConnectException: Connection refused
java.net.ConnectException: Connection refused

at com.sun.xml.internal.ws.wsdl.parser.RuntimeWSDLParser.tryWithMex(RuntimeWSDLParser.java:161)
at com.sun.xml.internal.ws.wsdl.parser.RuntimeWSDLParser.parse(RuntimeWSDLParser.java:133)
at com.sun.xml.internal.ws.client.WSServiceDelegate.parseWSDL(WSServiceDelegate.java:254)
at com.sun.xml.internal.ws.client.WSServiceDelegate.<init>(WSServiceDelegate.java:217)
at com.sun.xml.internal.ws.client.WSServiceDelegate.<init>(WSServiceDelegate.java:165)
at com.sun.xml.internal.ws.spi.ProviderImpl.createServiceDelegate(ProviderImpl.java:93)
at javax.xml.ws.Service.<init>(Service.java:76)
at javax.xml.ws.Service.create(Service.java:700)
at stickman.Server.ServerTestApp.main(ServerTestApp.java:17) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T02:21:34.117

可能是DNS问题？您将 myWebsite.com 解析到哪个 IP 地址？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T02:39:29.943

您的异常表明服务的 wsdl 不可访问 - 而不是服务本身。您能否确认该服务的 wsdl 在此位置可用 - [http://myWebsite.com:32768/home/rhyan/workspace/Stickman/bin/stickman/Server](http://myWebsite.com:32768/home/rhyan/workspace/Stickman/bin/stickman/Server)，并且 wsdl 中的 url 指向正常工作端点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T20:28:38.067

我花了 8 天的时间在网上阅读了大量的东西，然后我终于通过我想出的随机谷歌搜索找到了我的问题的答案：[使用 Jax-WS 端点发布一个 WS](https://stackoverflow.com/questions/3680600/publishing-a-ws-with-jax-ws-endpoint)

“localhost”应该是 0.0.0.0，我完全应该知道这一点。感谢那些试图提供帮助的人。

# php - 转换此调度信息

> ID：10116554
> 
> 赞同：0
> 
> 时间：2012-04-12T02:17:11.527
> 
> 标签：php, mysql, database-design

我在将用户的一些日程安排信息转换为管理员可以编辑的表格时遇到问题。

我的数据库现在的设置方式如下：

```
user_id | day_of_week   | start_time | end_time
12      | Monday        | 8:00       | 12:00
12      | Tuesday       | 8:00       | 12:00
12      | Wednsday      | 8:00       | 12:00
12      | Thursday      | 8:00       | 12:00
12      | Friday        | 8:00       | 12:00
12      | Saturday      | 8:00       | 12:00 
```

但随机时间 - 这并不重要。每个用户在数据库中有 7 行。

无论如何，当我从我的数据库中提取时，我得到了一个对象数组，每一行一个对象看起来像：

```
stdClass Object ( [user_id] => 12 [day_of_week] => Sunday [start_time] => 00:00:00 [end_time] => 00:00:00 ) 
stdClass Object ( [user_id] => 12 [day_of_week] => Monday [start_time] => 00:00:00 [end_time] => 00:00:00 ) 
```

我想显示数据的方式是，每个用户将有一行，该表的列将是用户、星期一、星期二等。我无法想出如何做到这一点？

如果有人能指出我正确的方向或给我一些关于这个想法的想法，那就太好了。谢谢。

**编辑：**

我正在努力实现的一个例子

```
User_id | Monday | Tuesday | Wednesday | Thursday | Friday | Saturday | Sunday
12      | 8 - 12 | 8 - 12  | 8 - 12    | 8 - 12   | 8 - 12 | 8 - 12   | 8 - 12
13      | 6 - 11 | 8 - 13  | 8 - 15    | 6 - 14   | 9 - 11 | 8 - 22   | 8 - 23 
```

每个用户都有一行，显示他们被安排在一周中的那一天的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T06:45:30.207

我不完全清楚你在问什么。我认为这可能是如何格式化和显示查询结果。如果是这样，这可能接近你想要的：

```
$sql = "SELECT *
        FROM table
        WHERE user_id = $userid";   // where $userid is, for example, 12
$result = db -> query($sql);
$a = $result->result();
$rows = $a[0];

$resultarray = array();
// convert each stdClass object to an array:
foreach ($rows as $row_idx => $row)
{
    $new_array = array();
    foreach ($row as $idx => $item)
         $new_array[$idx] = $item;
    $resultarray [$row_idx] = $new_array;
}

print_r ($resultarray);  // to see what should be pretty easy to display.  For example:

echo "<table>\n";
echo "<tr>";  // create heading from field names
foreach ($resultarray[0] as $colname => $col)
      echo "<th>$colname</th>";
echo "</tr>";
// output all data rows
foreach ($resultarray as $row)
{
     echo "<tr>";
     foreach ($row as $col)   // each column of row
          echo "<td>$col</td>";
     echo "</tr>\n";
}
echo "</table>\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:47:40.387

像这样的东西：

```
<table>
<thead>
<tr><th>User</th><th>Monday</th><th>Tuesday</th><th>Wednesday</th><th>Thursday</th><th>Friday</th><th>Saturday</th><th>Sunday</th></tr>
</thead>
<tbody>
<?php

while($row = mysql_fetch_object($resource)) { 
    if($row->day_of_week == "Monday") { 
        echo "<tr><td>{$row->user_id}</td><td>{$row->start_time} - {$row->end_time}</td>";
    }
    if($row->day_of_week == "Sunday") { 
        echo "<td>{$row->start_time} - {$row->end_time}</td></tr>";
    }
    else {
        echo "<td>{$row->start_time} - {$row->end_time}</td>";  
    }
}
?>
</tbody>
</table> 
```

这假设您每天都有每个用户的记录 - 我不知道这是否真的是您数据库中的记录。

# jquery - MVC 3 关于路由和部分视图的 SEO 建议

> ID：10116555
> 
> 赞同：5
> 
> 时间：2012-04-12T02:17:24.847
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, seo

需要一些建议。我几乎没有 SEO 经验。使用 MVC 3 为我妻子的新业务构建一个小册子网站。我在顶部使用链接进行了一些导航。

```
<a class="main" href="/Home/Contact">Contact Us</a> 
```

我正在用一些 jquery 拦截。

```
ns.BindNavigation = function () {
    $(".nav-bar a").click(function (e) {
        $("#Content").load(this.href);
        return false;
    });
}; 
```

其中 /Home/Contact 返回局部视图。我使用 ajax 加载的原因是，我不会在每次点击时都获得完整的页面回发，这会重新加载所有页面内容。

所以，我在我的网站上运行了一个 IIS SEO 报告，它显示了 SEO 违规和错误，因为 /Home/Contact 没有元描述或标题（因为如果你直接导航到它，它是一个没有头部标签的部分视图网址）。我所有其他导航链接都一样。

我的问题是，最好只为每个部分使用整页回发，以便我在每个页面上获得标题和描述？或者有什么方法可以在不破坏我的 SEO 的情况下仍然使用 ajax 进行导航。我知道没有完美的答案，所以提前感谢您的任何意见。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T04:21:33.680

当您从控制器操作返回时，MVC3 会做一些特殊的事情。当您`return PartialView();`从控制器返回部分视图结果 ( ) 时，您可以引用“完整视图”，剃刀引擎将忽略该视图的布局文件并仅返回内容部分。在您的情况下，您可以检查请求是否是 AJAX 请求。基于此，返回所请求 URL 的部分视图的完整视图。您可以在 MVC3 的默认“Internet 站点”模板上尝试/尝试，仅更改两个文件。

首先，您的主页/索引视图：

```
@{
    ViewBag.Title = "Home Page";
}

<h2>@ViewBag.Message</h2>
<p>
    @Html.ActionLink("This is AJAXy", "About", "Home", null, new{@class="ajax"})
</p>

<div id="AjaxContent"></div>

<script type="text/javascript">
    $(document).ready(function () {
        $(".ajax").click(function (e) {
            e.preventDefault();
            alert("clicked");
            $.ajax({
                url: this.href,
                dataType: 'html',
                success: function (data) {
                    $('#AjaxContent').html(data);
                    alert('Load was performed.');
                }
            });
        });
    });
</script> 
```

我正在 AJAXing 到 Home/About 操作的链接。在默认模板中，您仍然在顶部角落的默认模板导航部分中有完整的请求链接用于测试。

接下来，您的家庭控制器

使用 System.Web.Mvc；

```
namespace MvcApplication6.Controllers
{
    public class HomeController : Controller
    {
        public ActionResult Index()
        {
            ViewBag.Message = "Welcome to ASP.NET MVC!";

            return View();
        }

        public ActionResult About()
        {
            if(Request.IsAjaxRequest())
            {
                return this.PartialView();
            }
            return View();
        }
    }
} 
```

现在，从默认项目模板中只更改了这两件事，单击主导航中的 About 链接会完整请求并显示 About 页面，包括页面标题、所有头部信息等。但是，单击Home/Index 视图中的 ajax 链接将为该信息执行 AJAX 请求。您将看到 AjaxReponse div 仅填充了 About 视图的 HTML，不会遇到其他任何内容（布局等）。

实施这样的事情不仅可以帮助您的 SEO，而且不使用 JavaScript 的人仍然可以使用您的网站，功能齐全。

**编辑**

您不能在上面的示例中使用 .load 函数（至少在我的测试中）。原因：.load 没有设置 X-Requested-With 标头来识别它是一个 AJAX 请求。我敢肯定，有一些解决方法，但注意到那是你正在使用的，并认为如果你选择走这条路，可能会有绊倒的危险。

# wpf - WPF 图像问题

> ID：10116563
> 
> 赞同：0
> 
> 时间：2012-04-12T02:19:14.160
> 
> 标签：wpf, multithreading, image

好的，我有一个 wpf 图像对象，它显示实时图像。所以我使用了一个计时器来刷新图像。

```
 public void LoadLiveImage()
        {

System.Windows.Media.PixelFormat pf = PixelFormats.Bgr24;
                    int stride = 4 * ((24 * cameraFrame.img_width + 31) / 32); 
                     BitmapSource bmpImage=  BitmapSource.Create(cameraFrame.img_width, cameraFrame.img_height, cameraFrame.img_width, cameraFrame.img_height, pf, null, cameraFrame.img_pixel, stride);
                    RemoteCameraImage.Source = bmpImage;
}

 void dispatcherTimer_Tick(object sender, EventArgs e)
        {
             LoadLiveImage();           

        } 
```

没问题，这工作正常。但是，我试图将其移至线程并且没有显示图像。

```
 private void showLiveImage()
        {
                while (this.isCameraViewOpen)
                {
                 if (RemoteCameraImage.Dispatcher.CheckAccess())
                        {
                            System.Windows.Media.PixelFormat pf = PixelFormats.Bgr24;
                            int stride = 4 * ((24 * cameraFrame.img_width + 31) / 32); 
                            BitmapSource bmpImage = BitmapSource.Create(cameraFrame.img_width, cameraFrame.img_height, cameraFrame.img_width, cameraFrame.img_height, pf, null, cameraFrame.img_pixel, stride);
                            RemoteCameraImage.Source = bmpImage;

                            System.Threading.Thread.Sleep(5);
                        }
                        else
                            this.RemoteCameraImage.Dispatcher.Invoke(DispatcherPriority.Normal, new ImageUpdater(this.showLiveImage));

                    }

} 
```

showLiveImage 作为线程运行。图像被接收，这没有问题。我通过将 img_pixel 数组保存到 bmp 文件进行测试，并生成了文件。只是图像不显示。因此，我在分配源后放置了一个消息框，然后我就可以在 Image 对象上看到图像。所以我认为我增加了睡眠时间的问题，但即使图像没有刷新。可能是什么问题？

编辑：将更新图像的代码移动到另一个函数后，它工作正常。我使用 BeginInvoke() 而不是调用一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T06:18:26.037

前段时间我遇到了类似的问题，我在 Stackoverflow 上发现了这个问题，它为我解决了这个问题

[第二个线程上的图像](https://stackoverflow.com/questions/3034902/how-do-you-pass-a-bitmapimage-from-a-background-thread-to-the-ui-thread-in-wpf)

[WPF Dispatcher {“调用线程无法访问此对象，因为不同的线程拥有它。”}](https://stackoverflow.com/questions/2982498/wpf-dispatcher-the-calling-thread-cannot-access-this-object-because-a-differen)

> 如果您不打算在创建图像后对其进行修改，则可以使用 Freezable.Freeze 将其冻结，然后在调度程序委托中分配给 GeneratedImage（由于冻结，BitmapImage 变为只读，因此线程安全）。另一种选择是将图像加载到后台线程上的 MemoryStream 中，然后使用该流和 BitmapImage 的 StreamSource 属性在调度程序委托中的 UI 线程上创建 BitmapImage。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:22:33.213

尝试使用**Application.Current.Dispatcher**而不是您使用的那个。我相信这会成功。

干杯

# embedded - PIC18F2680 上的 UART 接收中没有触发中断

> ID：10116565
> 
> 赞同：0
> 
> 时间：2012-04-12T02:19:35.983
> 
> 标签：embedded, interrupt, pic, microchip, uart

我已经使用这段代码好几天了，无法弄清楚为什么我的中断没有被触发。我知道数据正在成功通过，因为我在逻辑分析仪上使用了探头，而且我的波特率是正确的，因为我可以通过 UART 成功传输。

在这一点上，我迷路了，我一遍又一遍地阅读数据表，无法弄清楚我的问题。我将尝试仅包含相关代码，但足以让您看到我的项目中的工作方式。

如果您发现此代码有问题，请告诉我。

谢谢！

main.c 中的代码片段：

```
 // USART RX interrupt priority
    IPR1bits.RCIP = 0;
    IPR1bits.TXIP = 0;

    // configure the hardware USART device
    OpenUSART(USART_TX_INT_OFF & USART_RX_INT_ON & USART_ASYNCH_MODE & USART_EIGHT_BIT &
        USART_CONT_RX & USART_BRGH_LOW, 14); 
```

来自 interrupts.c 的代码片段

```
 //----------------------------------------------------------------------------
    // Low priority interrupt routine
    // this parcels out interrupts to individual handlers
    #pragma code
    #pragma interruptlow InterruptHandlerLow

    // This works the same way as the "High" interrupt handler

    void InterruptHandlerLow() {

    // check to see if we have an interrupt on USART RX
    if (PIR1bits.RCIF) {
        PIR1bits.RCIF = 0; //clear interrupt flag
        uart_recv_int_handler();
    }
    // check to see if we have an interrupt on USART TX
    if (PIR1bits.TXIF && PIE1bits.TXIE) {
        // cannot clear TXIF, this is unique to USART TX
        // so just call the handler
        uart_tx_int_handler();
    }
    } 
```

UART RX 中断处理程序片段：

```
 void uart_recv_int_handler() {
        int msgLen;

        //if (DataRdyUSART()) {
        uc_ptr->buffer[uc_ptr->buflen] = RCREG;
        //uc_ptr->buffer[uc_ptr->buflen] = ReadUSART();
            uc_ptr->buflen++;
       }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:40:11.333

你 - 正确设置 trisC6/7 吗？- 如果你有一个在这些引脚上多路复用模拟输入的部件，你是否禁用了它们？- 您的 BRG 值是否针对这部分和这些振荡器设置进行了验证？

也可以看看

[http://www.piclist.com/techref/microchip/rs232.htm](http://www.piclist.com/techref/microchip/rs232.htm)

我迁移到 dspic，但我曾经在中断下进行串行接收。这是我在中断中遇到的（serialin1 是两个循环缓冲区的幂，lastserialin1 是指向它的指针，ser1bufinmask 是缓冲区 1 的大小）

```
if (PIR1bits.RCIF == 1)  /* check if RC interrupt (receive USART) must be serviced 
{
    while (PIR1bits.RCIF == 1)   /* flag becomes zero if buffer/fifo is empty */
    {
      lastserialin1=(lastserialin1+1)&ser1bufinmask;
      serialin1[lastserialin1]=RCREG;
    }
} 
```

要初始化我的UART：

```
// Configure USART
TXSTA = 0x20;  // transmit enable
RCSTA = 0x90;  // spen en cren
RCONbits.IPEN      = 1;  /* Interrupt Priority Enable Bit. Enable priority levels on interrupts */

INTCONbits.GIE     = 1;  /* Set GIE. Enables all high priority unmasked interrupts */
INTCONbits.GIEL    = 1;  /* Set GIEL. Enables all low priority unmasked interrupts */

TRISCbits.TRISC6    = 0;    // page 237
TRISCbits.TRISC7    = 1;    // page 237

Open1USART (  
               USART_TX_INT_OFF 
               &
            USART_RX_INT_ON &
            USART_ASYNCH_MODE &
            USART_EIGHT_BIT &           // 8-bit transmit/receive
            USART_CONT_RX &             // Continuous reception
                       //               USART_BRGH_HIGH, 155);      // High baud rate, 155 eq 19k2
            USART_BRGH_HIGH, brgval);       // High baud rate, 25 eq 115k2 

IPR1bits.RCIP       = 0;
PIR1bits.RCIF       = 0; 
```

使用 brgval 计算

```
 #define GetInstructionClock()  (GetSystemClock()/4)
     #define GetPeripheralClock()   GetInstructionClock()

     // See if we can use the high baud rate setting
     #if ((GetPeripheralClock()+2*BAUD_RATE)/BAUD_RATE/4 - 1) <= 255
        #define BRGVAL ((GetPeripheralClock()+2*BAUD_RATE)/BAUD_RATE/4 - 1)
        #define BRGHVAL (1)
     #else  // Use the low baud rate setting
        #define BRGVAL ((GetPeripheralClock()+8*BAUD_RATE)/BAUD_RATE/16 - 1)
        #define BRGHVAL (0)
     #endif 
```

# html - 表单标记；使用 display: table-cell, table-row 时在标签后换行

> ID：10116568
> 
> 赞同：0
> 
> 时间：2012-04-12T02:19:58.083
> 
> 标签：html, css

请参考[这个 jsfiddle](http://jsfiddle.net/pVHLY/)。

我的目标是构思一些 HTML 标记，使我能够自动生成具有可变标签宽度、顶部或左侧标签的表单，而无需有条件地生成 [much] 标记。

为了实现不同标签宽度的标签对齐，我使用了[这个问题](https://stackoverflow.com/questions/6153733/css-for-dynamic-form-labels-width)`display: table cell/row;`中列出的技巧。

但是，只有当我的所有标签都为时，这才有效。`label.left.`当我有一个`label.top`时，我无法找出一种 CSS 方法将兄弟姐妹推`div.control`到下一行！

谁能想象一个简单的方法来做到这一点，或者更适合的布局来实现我正在寻找的东西？

我完全清楚，我希望`div.control`“姓氏”出现在其标签的下一行。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T03:03:45.237

如果我理解您的问题和评论，这可能是您想要的，或者如果没有澄清我，那么我可以为您提供确切的解决方案。

请参阅小提琴的代码和演示

小提琴：http: [//jsfiddle.net/pVHLY/1/](http://jsfiddle.net/pVHLY/1/)

演示：http: [//jsfiddle.net/pVHLY/1/embedded/result/](http://jsfiddle.net/pVHLY/1/embedded/result/)

# c# - 生成 IObservable 的首选方法 来自流

> ID：10116573
> 
> 赞同：9
> 
> 时间：2012-04-12T02:20:18.923
> 
> 标签：c#, system.reactive, reactive-programming

作为我们应用程序的一部分（现在生产大约 4 个月），我们有一个来自外部设备的数据流，我们将其转换为 IObservable

到目前为止，我们一直在使用以下内容来生成它，并且效果很好。

```
IObservable<string> ObserveStringStream(Stream inputStream)
{
    var streamReader = new StreamReader(inputStream);
    return Observable
            .Create<string>(observer => Scheduler.ThreadPool
            .Schedule(() => ReadLoop(streamReader, observer)));
}

private void ReadLoop(StreamReader reader, IObserver<string> observer)
{
    while (true)
    {
        try
        {
            var line = reader.ReadLine();
            if (line != null)
            {
                observer.OnNext(line);
            }
            else
            {
                observer.OnCompleted();
                break;
            }
        }
        catch (Exception ex)
        {
            observer.OnError(ex);
            break;
        }
    }
} 
```

昨晚我想知道是否有一种方法可以使用`yield return`语法来实现相同的结果并想出了这个：

```
IObservable<string> ObserveStringStream(Stream inputStream)
{
    var streamReader = new StreamReader(inputStream);
    return ReadLoop(streamReader)
            .ToObservable(Scheduler.ThreadPool);
}

private IEnumerable<string> ReadLoop(StreamReader reader)
{
    while (true)
    {
        var line = reader.ReadLine();
        if (line != null)
        {
            yield return line;
        }
        else
        {
            yield break;
        }
    }
} 
```

它似乎工作得很好，而且更干净，但我想知道一种方式是否比另一种方式有任何优点或缺点，或者是否有更好的方法。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-12T07:36:35.283

我认为你有一个好主意（`Stream`变成`Enumerable<string>`then `IObservable<string>`）。但是，**IEnumerable**代码可以更简洁：

```
IEnumerable<string> ReadLines(Stream stream)
{
    using (StreamReader reader = new StreamReader(stream))
    {
        while (!reader.EndOfStream)
            yield return reader.ReadLine();
    }
} 
```

然后对于**IObservable**：

```
IObservable<string> ObserveLines(Stream inputStream)
{
    return ReadLines(inputStream).ToObservable(Scheduler.ThreadPool);
} 
```

这更短，更易读，并且可以正确处理流。它也很懒惰。

该`ToObservable`扩展负责捕获`OnNext`事件（新行）以及`OnCompleted`事件（可枚举结束）和`OnError`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T15:29:00.600

我手头没有代码，但这里是**异步**预异步 CTP 的方法。

[略读的注意事项：如果您不需要扩展太多，则无需费心]

创建一个 AsyncTextReader 实现，它本身就是 Observable。ctor 接收一个 Stream，并对流执行 BeginRead(256bytes)，将自身作为延续传递，然后返回。

进入延续时，调用 EndRead，并将返回的字节添加到类上的一个小缓冲区中。重复此操作，直到缓冲区包含一个或多个行尾序列（根据 TextWriter）。发生这种情况时，通过 Observable 接口将缓冲区的这些位作为字符串发送出去，然后重复。

完成后，发出 OnComplete 等信号...（并处理流）。如果您在 continuation 中收到 EndReadByte 引发的异常，请捕获它并将其传递给 OnError 接口。

调用代码如下所示：

> IObservable = new AsyncTextReader(stream);

这可以很好地扩展。只需要确保您不会对缓冲区处理做任何太愚蠢的事情。

伪代码：

```
public ctor(Stream stream){
    this._stream = stream;
    BeginRead();
    return;
}

private void BeginRead(){
    // kick of async read and return (synchronously)
    this._stream.BeginRead(_buffer,0,256,EndRead,this);
}

private void EndRead(IAsyncResult result){
    try{
        // bytesRead will be *up to* 256
        var bytesRead = this._stream.EndRead(result);
        if(bytesRead < 1){
            OnCompleted();
            return;
        }
        // do work with _buffer, _listOfBuffers
        // to get lines out etc...
        OnNext(aLineIFound); // times n
        BeginRead(); // go round again
    }catch(Exception err){
        OnException(err);
    }
} 
```

好的，这就是 APM，只有母亲才会喜欢的东西。我热切地等待着另一种选择。

ps：读者是否应该关闭流是一个有趣的问题。我说不，因为它没有创造它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-16T14:02:06.400

使用 async/await 支持，以下很可能是您最好的选择：

```
IObservable<string> ObserveStringStream(Stream inputStream)
{
    return Observable.Using(() => new StreamReader(inputStream), 
        sr => Observable.Create<string>(async (obs, ct) =>
        {
            while (true)
            {
                ct.ThrowIfCancellationRequested();
                var line = await sr.ReadLineAsync().ConfigureAwait(false);
                if (line == null)
                    break;
                obs.OnNext(line);
            }
            obs.OnCompleted();
    }));
} 
```

# git - Github 上远程仓库上的 Git 上游分支

> ID：10116575
> 
> 赞同：1
> 
> 时间：2012-04-12T02:20:50.913
> 
> 标签：git, github, repository

有 3 个遥控器，主要、次要和三级。

Secondary 是 Primary 的一个分支，增加了更多内容。Tertiary 是 Secondary 的一个分支，具有更多附加功能。

通过将上游添加到辅助节点的本地副本，然后从主节点获取+合并并推回远程辅助节点，辅助节点与主节点保持同步。这里没问题。

现在，我需要一个 Tertiary 的本地副本（或任何其他分叉的 Secondary 本地副本）来了解 Secondary 的上游，以便能够从 Primary 获取+合并，而无需手动添加 Primary。

另外，我需要知道如何“链接”这些上游，每个下一个分支（深入）都会知道所有父上游，并且能够与所有或任何上游同步。

所以主要问题是：“如何将上游保存到远程仓库，以便以后分叉它的任何人都知道上游？”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T06:49:26.930

克隆存储库时，您不应该能够传播上游信息，因为它们存储在`.git/config`（存储库的本地配置）中。
正如我在“[是否可以从远程位置克隆 git config？](https://stackoverflow.com/questions/6547933/is-it-possible-to-clone-git-config-from-remote-location) ”中详述的那样，您无法克隆 git 配置。

该[流建议](http://git.661346.n2.nabble.com/Propagating-config-to-clones-pulls-td5505690.html)记住在脚本中对本地配置进行的必要修改（一旦你克隆了一个 repo）。
这类似于“[通过克隆/推/拉传播远程位置](https://stackoverflow.com/questions/8712816/propagate-a-remote-location-via-clone-push-pull)”中描述的手动过程。

但是，一旦在您的本地工作站上克隆了 repo，这些解决方案都需要应用一个额外的步骤。

# antlr - 如何构建 ANTLR Works 风格的解析树？

> ID：10116576
> 
> 赞同：2
> 
> 时间：2012-04-12T02:20:53.090
> 
> 标签：antlr, antlr3

我读过您需要使用“^”和“！” 运算符，以便构建类似于 ANTLR Works 中显示的解析树（即使您不需要使用它们来获得 ANTLR Works 中的漂亮树）。那么我的问题是如何建造这样一棵树？我已经看过几页关于使用两个运算符和重写的树构造，但说我有一个输入字符串`abc abc123`和一个语法：

```
grammar test;

program : idList;
idList : id* ;
id : ID ;

ID : LETTER (LETTER | NUMBER)* ;
LETTER : 'a' .. 'z' | 'A' .. 'Z' ;
NUMBER : '0' .. '9' ; 
```

ANTLR Works 将输出：

![ANTLR Works 解释器输出](../Images/f8dfb943335854e6352c55353607dc82.png)

我不明白的是如何在这棵树的顶部获得“idList”节点（事实上也是语法之一）。如何使用重写和那些运算符重现这棵树？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T06:23:22.700

> 我不明白的是如何在这棵树的顶部获得“idList”节点（事实上也是语法之一）。如何使用重写和那些运算符重现这棵树？

你不能单独使用`^`和。`!`这些运算符仅对现有令牌进行操作，而您想创建额外的令牌（并使这些令牌成为子树的根）。您*可以*使用[重写规则并定义一些*虚构*的标记](https://stackoverflow.com/questions/4931346/how-to-output-the-ast-built-using-antlr)来做到这一点。

快速演示：

```
grammar test;

options {
  output=AST;
  ASTLabelType=CommonTree;
}

tokens {
  IdList;
  Id;
}

@parser::members {

  private static void walk(CommonTree tree, int indent) {
    if(tree == null) return;
    for(int i = 0; i < indent; i++, System.out.print("    "));
    System.out.println(tree.getText());
    for(int i = 0; i < tree.getChildCount(); i++) {
      walk((CommonTree)tree.getChild(i), indent + 1);
    }
  }

  public static void main(String[] args) throws Exception {
    testLexer lexer = new testLexer(new ANTLRStringStream("abc abc123"));
    testParser parser = new testParser(new CommonTokenStream(lexer));
    walk((CommonTree)parser.program().getTree(), 0);
  }
}

program : idList EOF -> idList;
idList  : id*        -> ^(IdList id*);
id      : ID         -> ^(Id ID);

ID    : LETTER (LETTER | DIGIT)*;
SPACE : ' ' {skip();};

fragment LETTER : 'a' .. 'z' | 'A' .. 'Z';
fragment DIGIT  : '0' .. '9'; 
```

如果您运行上面的演示，您将看到以下内容被打印到控制台：

```
IdList
    Id
        abc
    Id
        abc123 
```

如您所见，虚构的标记也必须以大写字母开头，就像词法分析器规则一样。如果您想赋予虚构的标记与`text`它们所代表的解析器规则相同，请改为执行以下操作：

```
idList  : id*        -> ^(IdList["idList"] id*);
id      : ID         -> ^(Id["id"] ID); 
```

这将打印：

```
idList
    id
        abc
    id
        abc123 
```

# css - CSS 术语：在属性值中这叫什么？

> ID：10116577
> 
> 赞同：0
> 
> 时间：2012-04-12T02:21:03.057
> 
> 标签：css

在 css 属性中，有一些看起来像函数的值声明，例如

```
background: rgba(0,0,0,0); 
```

或者

```
background-image: url('bg.png'); 
```

第一部分称为属性，例如`background`和`background-image`。第二部分通常称为值。但是括号之外的部分是什么，例如`rgba(...)`和`url(...)`。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T02:24:58.357

一般来说，它们只是被称为“<whatever> notations”；例如，请参阅[规范的这一部分](http://dev.w3.org/csswg/css3-images/#image-notation)：

> 该`image()`功能允许作者：
> 
> *   使用媒体片段剪裁出图像的一部分
> *   如果首选图像无法解码或者是浏览器无法识别的类型，请指定备用图像
> *   使用纯色作为图像
> *   用方向性注释图像
> 
> `image()`符号定义为：
> 
> ```
> <image-list> = image( [ <image-decl> , ]* [ <image-decl> | <color> ] )
> <image-decl> = [ <url> | <string> | <element-reference> ] 
> ```
> 
> 每个`<string>`或`<url>`内部`image()`代表一个图像，就像使用了`url()`符号一样。`image()`与 CSS 中的 URL 一样，在计算指定值时，相对 URL 会被解析为绝对 URL（如 Values & Units [CSS3VAL] 中所述） 。

符号`url('bg.png')`也是如此。`url()`但是，你可以得到更具体的。表示图像的值，例如：

*   `linear-gradient(red, white)`
*   `url('../images/hello.png')`
*   `radial-gradient(orange, yellow)`
*   `cross-fade(image1, image2)`

被称为*图像值*。这也适用于[*形状值*](https://developer.mozilla.org/en/CSS/shape)¹`rect()`之类的东西。至于，我相信这通常被称为表达式。[](https://developer.mozilla.org/en/CSS/shape)*^(`calc()`)*

 *[¹请注意，在侧边栏中，`rect()`也称为函数。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T02:22:21.013

它没有被特别称为任何东西。这只是价值的一部分。*

# c# - 处理 SQL 连接

> ID：10116582
> 
> 赞同：3
> 
> 时间：2012-04-12T02:21:42.760
> 
> 标签：c#, destructor, dispose

我有一个连接到数据库并检索数据表的 SQL 类。我知道 SqlConnection 必须在完成后处理。我知道这可以使用块来完成，但是将调用放在此类的析构函数中`using`是否也可以接受？`Dispose()`

这是我的代码：

```
public class SQLEng
{

    //Connection String Property
    //Must be set to establish a connection to the database
    public string ConnectionString{ get; set; }
    SqlConnection _Conn;

    //Overridden Constructor enforcing the Connection string to be set when created
    public SQLEng(string connectionString)
    {
        ConnectionString = connectionString;
        _Conn = new SqlConnection(connectionString);
    }

    //ensure the SqlConnection is disposed when destructing this object
    public ~SQLEng()
    {
        _Conn.Dispose();
    }

    //various other methods to get datatables etc...
} 
```

基本上我希望有一个类变量SqlConnection，而不是在每个访问数据库的方法中实例化SqlConnection。这是声音练习吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T02:27:24.043

`SqlConnection`您的设计鼓励长时间挂在（可能是打开的）上。*最佳做法*是在需要之前打开连接，然后在完成后立即释放（关闭和处置）它。

是的，创建新连接会产生一些开销；[连接池](http://msdn.microsoft.com/en-us/library/8xx3tyca.aspx)减少了大部分处理时间。更糟糕的是在服务器上保持许多连接处于活动状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T02:37:21.437

查看 Enterprise Library 的源代码（来自 MS Patterns & Practices 团队），DAAB 根据需要创建连接并尽快处理它。

```
public virtual int ExecuteNonQuery(DbCommand command)
{
    using (var wrapper = GetOpenConnection())
    {
        PrepareCommand(command, wrapper.Connection);
        return DoExecuteNonQuery(command);
    }
}

protected DatabaseConnectionWrapper GetOpenConnection()
{
    DatabaseConnectionWrapper connection = TransactionScopeConnections.GetConnection(this);
    return connection ?? GetWrappedConnection();
} 
```

所以我会说这是一个最佳实践。在大多数情况下，您所做的只是将连接返回到连接池，因此连接本身并没有关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T02:27:15.437

如果您希望包装 SQL Connection 类，请实现 IDisposable 并从您自己的 Dispose() 方法中调用连接 Dispose()。更多信息在这里：

[正确处理 DbConnection](https://stackoverflow.com/questions/386762/properly-disposing-of-a-dbconnection)

至于这是否是一个好习惯——好吧，如果你所做的一切都是将 SQL 连接包装在另一个类中，我不确定你正在实现什么。您的所有方法仍然需要访问此类的实例，在这种情况下，它们可以自行访问连接对象的实例。

# c++ - MSVC 错误 C2371“重新定义；不同的基本类型”，除了我看不到我在哪里重新定义任何东西

> ID：10116587
> 
> 赞同：-1
> 
> 时间：2012-04-12T02:22:32.410
> 
> 标签：c++, visual-c++, types

完整的错误是

```
1>d:\test\src\search.cpp(130): error C2371: 'Pos' : redefinition; different basic types
1>    d:\test\src\search.cpp(100) : see declaration of 'Pos' 
```

*   search.cpp，第 130 行：（`Moves(*Pos);`如果我省略这一行，代码编译不会出错。）
*   search.cpp，第 100 行：`Position *Pos = Mov.ChildPosition;`

构造`Moves`函数被声明：`Moves(Position &Pos);`

`Mov`是一个函数参数：`void searchMove(Move &Mov)`

为什么 MSVC 说我正在重新定义`Pos`？

**更新 1：**根据要求：

*   main.cpp，第 32 行：`Position Pos(TESTF, TESTW, TESTB);`
*   main.cpp，第 36 行：`searchRoot(Pos, 5);`
*   move.cpp，第 467 行：`Position *NextPosition = new Position(ParentPosition->flags^0x8000, white, black, theirs, ours);`
*   move.cpp，第 474 行：`Move *Mov = new Move(*NextPosition, piece, square1, square2, capture);`
*   search.cpp，第 26 行：`void searchRoot(Position &Pos, U8 depth)`
*   search.cpp，第 32 行：`Moves Mov(Pos);`

`Position`对象被传递给`Move`和`Moves`对象的构造函数，分别存储在`ChildPosition`和`ParentPosition`中。

**更新 2**：我用下面的 David Norman 的建议替换了第 130 行，现在我收到五个“LNK2001：未解析的外部符号”错误。这很奇怪，因为它们都引用`extern`在我的 search.h 文件中声明的变量。

**更新 3**：我替换`extern`为`static`，现在一切都编译了。我不明白为什么我会遇到错误。谁能给我解释一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T02:40:28.587

如果您打算在第 130 行创建一个 Moves 对象，请尝试为其命名：

```
Moves dummyMoves(*Pos); 
```

否则，您可能会声明一个名为 Pos 且类型为 Moves * 的变量

# php - preg_match 以文件扩展名顺序获取 mp3 和 mp4 文件名，然后以文件名顺序从外部网页获取？

> ID：10116588
> 
> 赞同：0
> 
> 时间：2012-04-12T02:22:37.307
> 
> 标签：php

我是 PHP 新手。我已经尝试了很多次，但无法想出从外部 HTML 中获取所有 mp3 和 mp4 文件名的搜索模式。文件列表的文件扩展名顺序比文件名顺序。如果有任何帮助，我将不胜感激。

```
$file = 'http://70.123.0.111//lrs/35/';
$searchfor = '<a herf';
echo $searchfor;

// the following line prevents the browser from parsing this as HTML.
header('Content-Type: text/plain');

// get the file contents, assuming the file to be readable (and exist)
$contents = file_get_contents($file);

// escape special characters in the query
$pattern = preg_quote($searchfor, '/');

// finalise the regular expression, matching the whole line
$pattern = "/^.*$pattern.*\$/";

// search, and store all matching occurences in $matches
if(preg_match_all($pattern, $contents, $matches)){
   echo "Found matches:\n";
   echo implode("\n", $matches[0]);
}
else{
   echo "No matches found";
} 
```

## HTML 代码

70.123.0.111 - /lrs/35/

# 70.123.0.111 - /lrs/35/

* * *

```
[到父目录]

 7/17/2008 9:02 PM 178899264 0102.mp3
 7/18/2008 12:30 AM 558244970 0102.mp4
 7/17/2008 9:38 PM 186016896 0304.mp3
 7/18/2008 1 :44 AM 580476123 0304.mp4
 7/17/2008 10:13 PM 186478272 0506.mp3
 7/18/2008 2:59 AM 581455848 0506.mp4
 7/17/2008 10:44 PM 166862592 0708.mp
 2008 凌晨 4:02 520139478 0708.mp4
 7/17/2008 11:19 PM 188616096 0910.mp3
 7/18/2008 5:16 AM 590308801 0910.mp4
 12/11/2008 8:15 PM 688347 qfya._m
 2008 年 11 月2:08 下午 421978 ym_notes.pdf

```

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T02:40:46.317

我认为如果您是 regex 的新手，那么[www.rubular.com](http://www.rubular.com)应该是您的新朋友。

假设文本文档将始终如您所愿，并且文件名中没有任何空格，则此正则表达式将执行以下操作： "/(\w+.mp[34])/"

下面的代码对我有用（不确定 $searchfor 变量的用途）。希望这可以帮助。

```
$file = 'test.html';
//$searchfor = '<a herf';
//echo $searchfor;

// the following line prevents the browser from parsing this as HTML.
header('Content-Type: text/plain');

// get the file contents, assuming the file to be readable (and exist)
$contents = file_get_contents($file);

// finalise the regular expression, matching the whole line
$pattern = "/(\w+\.mp[34])/";

// search, and store all matching occurences in $matches
if(preg_match_all($pattern, $contents, $matches)){
   echo "Found matches:\n";
   echo implode("\n", $matches[0]);
}
else{
   echo "No matches found";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T19:14:32.083

也许您的问题出在代码的第二行： $searchfor = 'herf';

（使用 href 代替 herf）

# java - 动作监听器

> ID：10116590
> 
> 赞同：1
> 
> 时间：2012-04-12T02:22:57.340
> 
> 标签：java, swing, actionlistener, jradiobutton

下面的代码是一个项目的动作监听器。基本上，我有 4 个单选按钮，当我单击一个时，我希望它更改屏幕上的变量。当我运行代码时，它只是将所有值加在一起。还有其他方法可以做到这一点吗？

```
class Calc implements ActionListener
    {
     public void actionPerformed(ActionEvent event)
     {
       double base = 0.00;
       double options;
       double total;

      if (Button25.isSelected());
      {
      base = base + 999.99;
      String base2 = Double.toString(base);
      lblBaseAns.setText(base2);
      }

      if (Button32.isSelected());
      {
        base = base + 1049.99;
        String base2 = Double.toString(base);
        lblBaseAns.setText(base2);
      }

      if (Button35.isSelected());
      {
        base = base + 1099.99;
        String base2 = Double.toString(base);
        lblBaseAns.setText(base2);
      }

      if (Button42.isSelected());
      {
        base = base + 1155.99;
        String base2 = Double.toString(base);
        lblBaseAns.setText(base2);
      }

     }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T02:47:23.137

问题在于，对于每个`if()`语句，例如**if (Button32.isSelected());** ，最后有一个`;`符号。这不应该在那里。这是更正后的代码...

```
class Calc implements ActionListener {
    public void actionPerformed(ActionEvent event){
        double base = 0.00;
        double options;
        double total;

        if (Button25.isSelected()){ // changed
            base = base + 999.99;
            String base2 = Double.toString(base);
            lblBaseAns.setText(base2);
        }
        else if (Button32.isSelected()){ // changed
            base = base + 1049.99;
            String base2 = Double.toString(base);
            lblBaseAns.setText(base2);
        }
        else if (Button35.isSelected()){ // changed
            base = base + 1099.99;
            String base2 = Double.toString(base);
            lblBaseAns.setText(base2);
        }
        else if (Button42.isSelected()){ // changed
            base = base + 1155.99;
            String base2 = Double.toString(base);
            lblBaseAns.setText(base2);
        }
    }
} 
```

作为替代方案，您为什么不获取从 中单击的按钮，`ActionEvent`然后使用 if-else 分支中的按钮...

```
class Calc implements ActionListener {
    public void actionPerformed(ActionEvent event){
        double base = 0.00;
        double options;
        double total;

        Object clickedObject = event.getSource();
        if (clickedObject instanceof JRadioButton){
            JRadioButton clickedButton = (JRadioButton)clickedObject;

            if (clickedButton == Button25){
                base = base + 999.99;
                String base2 = Double.toString(base);
                lblBaseAns.setText(base2);
            }
            else if (clickedButton == Button32){
                base = base + 1049.99;
                String base2 = Double.toString(base);
                lblBaseAns.setText(base2);
            }
            else if (clickedButton == Button35){
                base = base + 1099.99;
                String base2 = Double.toString(base);
                lblBaseAns.setText(base2);
            }
            else if (clickedButton == Button42){
                base = base + 1155.99;
                String base2 = Double.toString(base);
                lblBaseAns.setText(base2);
            }
        }
    }
} 
```

# asp.net-web-api - 如何使用 ASP.NET Web API 设置 Elmah

> ID：10116593
> 
> 赞同：37
> 
> 时间：2012-04-12T02:23:16.910
> 
> 标签：asp.net-web-api, elmah

我尝试了许多 elmah nuget，但它们不适用于 ASP.NET Web API。有人知道为什么吗？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2015-03-01T17:19:51.420

使用 ELMAH 在 WEB API 中捕获异常有两种选择。

如果您想捕获**在 Actions 和 Controllers 中遇到的错误**，即在您的业务逻辑中，您可以创建一个 ActionFilterAttribute 并将这些异常记录到 ELMAH。

例子：

```
public class UnhandledExceptionFilter : ExceptionFilterAttribute {
    public override void OnException(HttpActionExecutedContext context) {
        Elmah.ErrorLog.GetDefault(HttpContext.Current).Log(new Elmah.Error(context.Exception));
    }
} 
```

然后通过添加该过滤器进行接线。

```
public static class WebApiConfig {
    public static void Register(HttpConfiguration config) {
        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

        config.Filters.Add(new UnhandledExceptionFilter());
    }
} 
```

使用上述方法将不会处理以下错误：

*   控制器构造函数抛出的异常。
*   消息处理程序抛出的异常。
*   路由期间抛出的异常。
*   响应内容序列化过程中抛出的异常

参考： http: [//blogs.msdn.com/b/webdev/archive/2012/11/16/capturing-unhandled-exceptions-in-asp-net-web-api-s-with-elmah.aspx](http://blogs.msdn.com/b/webdev/archive/2012/11/16/capturing-unhandled-exceptions-in-asp-net-web-api-s-with-elmah.aspx) & [http： //www.asp.net/web-api/overview/error-handling/web-api-global-error-handling](http://www.asp.net/web-api/overview/error-handling/web-api-global-error-handling)

为了让 ELMAH**在全局级别记录 WEB API 错误，**以便捕获所有 500 个服务器错误，请执行以下操作：

安装 nuget：[https ://www.nuget.org/packages/Elmah.Contrib.WebApi/](https://www.nuget.org/packages/Elmah.Contrib.WebApi/)

将以下内容添加到 WebApiConfig

```
public static class WebApiConfig
{
    public static void Register(HttpConfiguration config)
    {
        ...
        config.Services.Add(typeof(IExceptionLogger), new ElmahExceptionLogger());
        ...
    }
} 
```

如果您想为 500 服务器错误显示自定义错误消息，您可以在 Web Api 中实现新的 ExceptionHandler（注意 ExceptionLogger 和 ExceptionHandler 是不同的。）

```
class OopsExceptionHandler : ExceptionHandler
{
    public override void HandleCore(ExceptionHandlerContext context)
    {
        context.Result = new TextPlainErrorResult
        {
            Request = context.ExceptionContext.Request,
            Content = "Oops! Sorry! Something went wrong." +
                      "Please contact support@contoso.com so we can try to fix it."
        };
    }

    private class TextPlainErrorResult : IHttpActionResult
    {
        public HttpRequestMessage Request { get; set; }

        public string Content { get; set; }

        public Task<HttpResponseMessage> ExecuteAsync(CancellationToken cancellationToken)
        {
            HttpResponseMessage response = 
                             new HttpResponseMessage(HttpStatusCode.InternalServerError);
            response.Content = new StringContent(Content);
            response.RequestMessage = Request;
            return Task.FromResult(response);
        }
    }
} 
```

参考：[http ://www.asp.net/web-api/overview/error-handling/web-api-global-error-handling](http://www.asp.net/web-api/overview/error-handling/web-api-global-error-handling)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-12T04:22:50.810

一种选择是设置自定义 ExceptionFilterAttribute，覆盖 OnException 方法，并从那里向 Elmah 发出信号。请参阅下面的示例链接

[Elmah WebAPI 示例](http://www.tugberkugurlu.com/archive/asp-net-web-api-and-elmah-integration)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-02-18T14:07:32.470

检查以下 URL，它详细描述了如何将 elmah 与 Web API 一起使用：

[http://blogs.msdn.com/b/webdev/archive/2012/11/16/capturing-unhandled-exceptions-in-asp-net-web-api-s-with-elmah.aspx](http://blogs.msdn.com/b/webdev/archive/2012/11/16/capturing-unhandled-exceptions-in-asp-net-web-api-s-with-elmah.aspx)

您还可以使用下面的 NuGet 包：

```
Install-Package Elmah.Contrib.WebApi 
```

用法：

> 只需在应用程序启动期间或逐个控制器注册它。
> 
> ```
> protected void Application_Start()
> {
>     GlobalConfiguration.Configuration.Filters.Add(new ElmahHandleErrorApiAttribute());
> 
>     ...
> } 
> ```

（来自[Elmah.Contrib.WebApi GitHub 存储库](https://github.com/rdingwall/elmah-contrib-webapi)）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-23T11:47:11.930

对于 ASP.NET Web API，使用 [Elmah.MVC](https://www.nuget.org/packages/Elmah.MVC) nuget 包，详细信息如下

*摘自：[如何使用 ASP.NET MVC 4 设置 ELMAH.MVC？](http://yassershaikh.com/how-to-setup-elmah-mvc-with-asp-net-mvc-4/)*

**什么是艾尔玛？**

ELMAH 是一个开源项目，其目的是记录和报告 ASP.NET Web 应用程序中未处理的异常。

**为什么要使用 Elmah ？**

ELMAH 充当未处理的 ASP.NET 异常的不显眼拦截器，这些异常通常以 ASP.NET[黄屏死机显示](http://en.wikipedia.org/wiki/Yellow_Screen_of_Death)。

所以现在我们知道什么以及为什么要使用 Elmah，让我们快速开始了解如何在您的 ASP.NET MVC 项目中使用 Elmah。

**第 1 步：**右键单击您的解决方案并选择“管理 Nuget 包”选项![在此处输入图像描述](../Images/151d4baf528ff87520e4a4f472a98ecc.png)

**第 2 步：**在 Nuget 包管理器中搜索“Elmah”并安装[Elmah.MVC](https://www.nuget.org/packages/Elmah.MVC) nuget 扩展。 ![在此处输入图像描述](../Images/9d81db3106a752e9fc3e6c9d5557b1ef.png) Nuget 包管理器将下载并添加所需的 dll 并修改 web.config`<appSetting>`以供 Elmah 工作![在此处输入图像描述](../Images/2ec579a0fe4b4f1aa0d2b66327069e51.png)。

**第3步：**就是这样！您的 Elmah 现在已准备好进行测试。我生成了一个 404 来测试我的 Elmah 是否有效，ELMAH 可以通过这个 url 访问：http: *[//yourapp.com/elmah](http://yourapp.com/elmah)*。 ![在此处输入图像描述](../Images/0a693f4d59fc46ef66ebe0f1bdfd13e3.png) ![在此处输入图像描述](../Images/153ebfd601508ccf2463a1ca5ed00f32.png)

希望这可以帮助 ：）

**延伸阅读：**

*   [在 code.google.com 上的 Elmah](https://code.google.com/p/elmah/wiki/MVC)
*   [Nuget 上的 Elmah.MVC 2.0.2](https://www.nuget.org/packages/Elmah.MVC)
*   [GitHub 上的 Elmah.MVC](https://github.com/alexanderbeletsky/elmah.mvc)

# javascript - 多个 JavaScript 按钮（变量）

> ID：10116594
> 
> 赞同：1
> 
> 时间：2012-04-12T02:23:28.167
> 
> 标签：javascript, html

我刚刚开始使用 JavaScript，我想知道如何让不同的按钮做不同的事情。到目前为止，我可以让一个按钮做一件事，但是如何让第二个按钮做不同的事情呢？这是编码：

```
<html>
<head>
<script type="text/javascript">
function show_prompt()
{
var name=prompt("Your Name");
if (name!=null && name!="")
  {
  alert("Thanks for clicking " + name + "!");
  window.top.location.replace("http://www.google.com");
  }
}
</script>
</head>
<body>
<ul>
<li>
<input type="button" onclick="show_prompt()" value="Button One" />
</ul>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T02:36:45.980

我猜你的意思是喜欢用不同的按钮做不同的事情，但使用相同的功能：

**JavaScript：**

```
function myFunction(str) {
    if(str.length > 3){
        alert("big");
    }else{
        alert("small");
    }
} 
```

**HTML：**

```
<input type="button" onclick="myFunction('test');" value="Button 1" />
<input type="button" onclick="myFunction('hi');" value="Button 2" /> 
```

如果我的假设是错误的，只需创建不同的功能并`onclick`用它们各自的功能替换按钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T02:27:07.983

定义另一个函数并将第二个按钮绑定到它！

```
function alert_hi() {
    alert("Hi!");
}

<input type="button" onclick="alert_hi()" value="Button Two" /> 
```

如果这引起了您的兴趣，我强烈推荐[Eloquent Javascript](http://eloquentjavascript.net/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T02:29:48.270

让第二个按钮做某事与让第一个按钮做某事基本相同。它只是两个功能和两个按钮。我想这就是你要问的。

```
<html>
    <head>
    <script type="text/javascript">
        function doSomething()
        {
           // Do something when button one is clicked
        }

        function doSomethingElse() 
        {
           // Do something else when button two is clicked
        }
    </script>
</head>
<body>
    <input type="button" onclick="doSomething()" value="Button One" />
    <input type="button" onclick="doSomethingElse()" value="Button Two" />
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T02:33:52.747

如果您认真学习……您可以阅读有关[事件注册模型](http://www.quirksmode.org/js/events_advanced.html)的信息。

在你的例子中。

js

```
var btn1 = document.getElementById('btn1'),
    btn2 = document.getElementById('btn2');
btn1.addEventListener('click', show_me, false); // i am not IE friendly
btn2.addEventListener('click', show_me, false); // you can replace show_me with any function you would like.
function show_me() {
    alert(this.value + ' was clicked'); // this references the element which the click event was invoked on.
} 
```

html

```
<input type="button" id="btn1" value="Button One" />
<input type="button" id="btn2" value="Button Two" /> 
```

# oauth-2.0 - OAuth 2 身份验证范围是否会在用户连续授予时“堆栈”？

> ID：10116601
> 
> 赞同：0
> 
> 时间：2012-04-12T02:25:16.120
> 
> 标签：oauth-2.0

例如，假设我有两个功能，一个需要 Google 通讯录，一个需要 Google 日历。

我们还假设第一个功能被大量使用，因此请求用户授权两个身份验证范围会导致显着下降率。

如果我为绑定了联系人身份验证范围的用户存储访问令牌，那么稍后我为该用户请求额外的身份验证范围日历时会发生什么？我是否会取回仅包含日历范围凭据的新令牌？

LiveConnect 表示，取代现有作用域的作用域会产生一个具有伞形作用域的新令牌，而旧令牌会失效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T15:52:30.647

假设您正在谈论授权代码或隐式授权类型流，则需要用户授权新范围。

用户代理将被发送到具有（现在）所需范围的授权服务器的授权端点。所需范围应包括您需要的全套范围（旧的和新的）。用户将看到请求的范围，然后对其进行授权。对于 authorization_code 授权类型，这会导致授权代码交换为表示用户同意范围的新访问令牌。隐式只会在 URL 片段中返回一个新的访问令牌。无论如何，这个新的访问令牌将取代现有的。

如果您涉及刷新令牌 - 在请求带有刷新令牌的新访问令牌时，您可以指定请求的范围。但是，该范围必须是原始范围的子集（请参阅：[OAuth 2.0 规范第 6 节](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-25#section-6)） - 未经用户同意无法扩展它（假设上述流程）。

# python - python中Popen的性能开销是多少

> ID：10116602
> 
> 赞同：3
> 
> 时间：2012-04-12T02:25:19.240
> 
> 标签：python, native, popen

与调用执行相同操作的 python 库函数相比。我有一些使用 Popen 调用带有一些参数的可执行文件的遗留代码。

现在有一个支持相同功能的 python 库。我想知道性能影响是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T02:27:10.930

分叉一个单独的进程来做某事几乎总是比调用一个做同样事情的函数昂贵得多。但是，如果该 Python 函数效率非常低，并且操作系统会快速分叉新进程（即，它是 UNIX 变体），您可以想象这种情况很少见的情况，但这种情况肯定很少见。

# windows - 在已挂载的目录上运行时出现 cmake 错误

> ID：10116605
> 
> 赞同：0
> 
> 时间：2012-04-12T02:25:43.567
> 
> 标签：windows, linux, cmake, mount

我在安装文件夹中的包上运行 cmake 时遇到问题。我对此安装的文件夹拥有完全权限。

```
-- The C compiler identification is unknown
-- The CXX compiler identification is unknown
-- Check for working C compiler: /usr/bin/gcc
-- Check for working C compiler: /usr/bin/gcc -- broken
CMake Error at /usr/share/cmake-2.8/Modules/CMakeTestCCompiler.cmake:50 (MESSAGE):
The C compiler "/usr/bin/gcc" is not able to compile a simple test program.

It fails with the following output:

Change Dir: /home/X/win_tmp/cmake/build/CMakeFiles/CMakeTmp

Run Build Command:/usr/bin/make "cmTryCompileExec/fast"

/usr/bin/make -f CMakeFiles/cmTryCompileExec.dir/build.make
CMakeFiles/cmTryCompileExec.dir/build

make: Warning: File `Makefile' has modification time 0.38 s in the future

make[1]: Entering directory
`/home/X/win_tmp/cmake/build/CMakeFiles/CMakeTmp'

make[1]: Warning: File `CMakeFiles/cmTryCompileExec.dir/flags.make' has
modification time 0.35 s in the future

/usr/bin/cmake -E cmake_progress_report
/home/X/win_tmp/cmake/build/CMakeFiles/CMakeTmp/CMakeFiles 1

Building C object CMakeFiles/cmTryCompileExec.dir/testCCompiler.c.o

/usr/bin/gcc -o CMakeFiles/cmTryCompileExec.dir/testCCompiler.c.o -c
/home/X/win_tmp/cmake/build/CMakeFiles/CMakeTmp/testCCompiler.c

cc1: error:
/home/X/win_tmp/cmake/build/CMakeFiles/CMakeTmp/testCCompiler.c:
Value too large for defined data type

make[1]: *** [CMakeFiles/cmTryCompileExec.dir/testCCompiler.c.o] Error 1

make[1]: Leaving directory
`/home/X/win_tmp/cmake/build/CMakeFiles/CMakeTmp'

make: *** [cmTryCompileExec/fast] Error 2

CMake will not be able to correctly generate this project.
Call Stack (most recent call first):
CMakeLists.txt:2 (project)

-- Configuring incomplete, errors occurred! 
```

当我将包复制到我的 linux 文件系统时，Cmake 似乎运行良好。

谢谢，古吉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T02:45:52.170

根据[此链接](https://bbs.archlinux.org/viewtopic.php?id=85999)，该错误`Value too large for defined data type`与在安装了 Samba 的文件系统上`gcc`执行有关。`stat()`对于这些文件系统，返回的 inode 显然相当大。

解决方案是确保您的挂载命令`nounix,noserverino`在选项列中（`/etc/fstab`或等效）。

有关更多详细信息，请参见[`mount.cifs`](http://linux.die.net/man/8/mount.cifs)手册页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T22:21:14.893

安装文件夹的这个问题也可能表现为 cmake 命令“ `file(GLOB VAR PATTERNS)`”无法找到任何内容。在我的情况下，后续命令“ `add_library`”最终将没有源文件并失败并出现以下错误：

> 您为库调用了 ADD_LIBRARY ... 没有任何源文件。这通常表明您的 CMakeLists.txt 文件存在问题。

我希望通过在这里提到这一点，它将其他人的搜索时间从 4 分钟减少到 2 分钟。

# apache - Apache VirtualDocumentRoot 语句

> ID：10116609
> 
> 赞同：0
> 
> 时间：2012-04-12T02:25:54.957
> 
> 标签：apache, http, virtualhost

我有以下设置：

```
<VirtualHost *:80>
    VirtualDocumentRoot /Users/oliver/Sites/domains/%-2+/public
</VirtualHost> 
```

**testing.com.dev**的示例将指向： /var/www/html/domains/ **testing.com**。

我想让它改为**dev.testing.com**指向：**/var/www/html/domains/testing.com**

那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:05:40.983

可能您可能已经想通了，但这里有适合您的解决方案：

```
<VirtualHost *:80>
    VirtualDocumentRoot /Users/oliver/Sites/domains/%2+/public
</VirtualHost> 
```

我刚刚将您代码中的“%-2+”替换为“%2+”。用这个替换现有代码并重新启动 Apache。

# php - 在他使用 facebook 连接后保存用户信息是否违反 facebook 规则？

> ID：10116611
> 
> 赞同：1
> 
> 时间：2012-04-12T02:25:59.823
> 
> 标签：php, facebook, save, connect

例如，我认为在他使用 facebook connect 登录到您的网站后，您不允许 facebook 保存用户的信息。

例如，我使用了 php api，我可以获取用户电子邮件 fb id 名称，我可以将其保存到我网站上的数据库中，并在他添加我的应用程序后立即根据此信息创建帐户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T02:56:38.823

我记得，这完全没问题（您可能想以某种方式提醒最终用户和/或确保他们同意遵守道德规范）。这就是 OAuth 和授权令牌的重点。第三方代理（例如您的应用程序）永远不会看到用户的真实凭据，只有一个令牌授予代理应用程序访问用户帐户以用于特定目的的权限。

# c - 链表：读取 txt 文件，节点不保存

> ID：10116613
> 
> 赞同：0
> 
> 时间：2012-04-12T02:26:12.110
> 
> 标签：c

我在编码方面相当新，并且使用链表和结构获得了一项艰巨的任务。任务是创建一个音乐数据库，以便您可以读取艺术家的专辑和曲目，并将它们存储在节点中。

目前，当我运行程序时，当我从 .txt 文件中读取数据时，没有存储任何节点。最终，我开始怀疑我对某些指针的使用是否正确，因为我遇到了分段错误。我做错了什么，我可以做一个修复来让它发挥作用吗？

我的代码（已包含所需的库）：

结构和宏定义：

```
#define LINEBUFFERSIZE 256

struct song
{
    char *songName_p;
    int trackNumber;
    struct song *nextSong_p;
};

struct disc
{
    char *discName_p;
    int year;
    struct song *song_p;
    struct disc *nextDisc_p;

};

struct artist
{
    char name[20];
    char *artistName_p;
    struct disc *disc_p;
    struct artist *nextArtist_p;
};
struct artist *end = (struct artist *) NULL;   //NEW
struct artist *startPtr = (struct artist *) NULL; //NEW
struct artist *find(struct artist *, char * );//NEW
//NEW 
```

类型定义：

```
typedef struct artist artist_t;
typedef struct disc disc_t;
typedef struct song song_t;

typedef struct artist *artistNodePtr;
typedef struct disc *discNodePtr;
typedef struct song *songNodePtr; 
```

功能定义：

```
void InsertArtist(struct artist *New);
artistNodePtr initializenode(char *name);
artistNodePtr findOrInsertArtist(artistNodePtr *sPtr, char *name);
discNodePtr  findOrInsertDisc(discNodePtr *sPtr, char *discID, int releaseYear);
void  findOrInsertSong(songNodePtr *sPtr, char *songID, int trackID);
void getNextLine(char buffer[], int bufferSize, FILE *fptr);
void printlist( struct artist *ptr );
void printnode(struct artist *ptr); 
```

主要方法：

```
int main(int argc, char *argv[])
{
    char name[20];
    struct artist *newNodePointer;
    char lineBuffer[LINEBUFFERSIZE];
    artistNodePtr startPtr = NULL; /* initially the artist list is empty */
    FILE *musicFile;
    char *artistTemp, *discTemp, *yearTemp, *trackTemp, *songTemp;
    int year, track, menu = 1;
    artistNodePtr theArtist;
    // discNodePtr theDisc;

    if (argc==1)
    {
        printf(" Must supply a file name as command line argument/n");
        return 0;
    }

    if ((musicFile = fopen(argv[1], "r")) == NULL)
    {
        printf ("Error opening music file.  Program terminated/n");
        return 0;
    }

    getNextLine(lineBuffer, LINEBUFFERSIZE, musicFile);
    while (!feof(musicFile))
    {
        artistTemp = strtok(lineBuffer,";");
        if (artistTemp == NULL)
        {
            printf("Error parsing input file; Program is terminated\n");
            return 0;
        }
        discTemp = strtok(NULL ,";");
        if (discTemp == NULL)
        {
            printf("Error parsing input file; Program is terminated\n");
            return 0;
        }
        yearTemp  = strtok(NULL ,";");
        if (yearTemp == NULL)
        {
            printf("Error parsing input file; Program is terminated\n");
            return 0;
        }
        trackTemp = strtok(NULL ,";");
        if (trackTemp == NULL)
        {
            printf("Error parsing input file; Program is terminated\n");
            return 0;
         }
        songTemp = strtok(NULL ,"\n");
        if (songTemp == NULL)
        {
            printf("Error parsing input file; Program is terminated\n");
            return 0;
        }
        year = atoi(yearTemp);
        track = atoi(trackTemp);
        theArtist = findOrInsertArtist(&startPtr, artistTemp);
  //    theDisc = findOrInsertDisc(&(theArtist->disc_p), discTemp, year);
        //findOrInsertSong(&(theDisc->song_p), songTemp, track);
        getNextLine(lineBuffer, LINEBUFFERSIZE, musicFile);
    }  /* end of while loop */

    while (menu != 0)
    {
        printf("1 to display entire catalog \n");
        printf("2 to display alls songs by a given artist\n");
        printf("3 to display all songs on a given disc\n");
        printf("0 to exit the library\n ");
        scanf("%d", &menu);
        switch (menu){
        case 1: printlist(startPtr);
            break;

        case 2:
            printf("enter an artist name");
            scanf("%s", name );
            newNodePointer = find(startPtr, name );
            if (newNodePointer==NULL)
            {
                newNodePointer = initializenode(name );
                InsertArtist(newNodePointer);
            }

        }
    } /* end main */
} 
```

函数定义：

```
artistNodePtr findOrInsertArtist(artistNodePtr *sPtr, char *name )
   {

sPtr = initializenode(name);
    InsertArtist(sPtr);

    if(!sPtr)
        sPtr = find(startPtr, name);
    return sPtr;
}
void printlist( struct artist *ptr ){
    while(ptr!= NULL){
    printnode(ptr);
    ptr = ptr->nextArtist_p;
    }
    }
void printnode(struct artist *ptr)
{
    printf("Name %s\n", ptr->name);

}

artistNodePtr initializenode(char *name)
{

    struct artist *newNodePtr = (artistNodePtr)malloc(sizeof(artist_t));
    if (newNodePtr != NULL)
    {
        newNodePtr->artistName_p = (char*)malloc((strlen(name)+1)*sizeof(char));
        if (newNodePtr->artistName_p != NULL)
        {
           strcpy(newNodePtr->artistName_p, name);
            newNodePtr->nextArtist_p = NULL;
            newNodePtr->disc_p = NULL;

            return newNodePtr;
        }   
    }
}

void InsertArtist(struct artist *New)
   {
    //NEW
    struct artist *temp, *prev;

    if(startPtr == NULL)
    {
        startPtr = New;
        end = New;
       startPtr->nextArtist_p = NULL;
        return;
    }
    temp = startPtr;

    while(strcmp(temp->name, New->name) < 0)
    {
        temp = temp->nextArtist_p;
        if(temp == NULL)
            break;
     }
    if(temp == startPtr)
    {
        New->nextArtist_p = startPtr;
        startPtr = New;
    }
    else
    {
       prev = startPtr;
        while(prev->nextArtist_p != temp)
        {
            prev = prev->nextArtist_p;
        }
        prev->nextArtist_p = New;
        New-> nextArtist_p = temp;
            if(end == prev)
            end = New;
    }
}

 struct artist *find(struct artist *newNodePointer, char *name)
{
    //NEW
    while (strcmp(name, newNodePointer->name )!=0)
    {
        newNodePointer = newNodePointer->nextArtist_p;
        if (newNodePointer == NULL)
            break;
    }
    return newNodePointer;
}

void getNextLine(char buffer[], int bufferSize, FILE *fptr)
{
    char temp;
    int i = 0;

    buffer[0] = fgetc(fptr);
    while ( (!feof(fptr)) && (buffer[i] != '\n') &&  i<(bufferSize-1))
    {
        i = i +1;
        buffer[i]=fgetc(fptr);
    }

    if ((i == (bufferSize-1)) && (buffer[i] != '\n'))
    {
        temp = fgetc(fptr);
        while (temp != '\n')
        {
            temp = fgetc(fptr);
        }
     }

    buffer[i] = '\0';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T02:41:41.410

有一堆类型错误会溢出`-Wall`（正如@user120115 所建议的那样）。

有几件事立刻跳出来：

*   不要强制转换`malloc`（在 C 中；甚至不要在 C++ 中*使用* `malloc`，除非有充分的理由避免`new`）
*   表单的任何循环`while (!feof(stream))`都可能是错误的，因为`feof`它不能预测未来的 EOF，它只会告诉您为什么先前的读取尝试失败（例如，为什么`getchar`返回`EOF`）。的重点`feof`是区分由于文件结尾而导致的“正常”读取失败，以及`ferror`由于磁盘驱动器着火或其他原因导致的“异常”（ ）读取失败。
*   `InsertArtist`需要修改一个列表，所以它要么必须返回新列表，要么获取一个指向旧的指向列表的指针，但两者都不做。（但各种`findOrInsert`功能都可以！）

我也与@sarnold 一起限制使用`typedef`，尽管这无疑是一个品味问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T02:41:49.753

作为开始编译，如果您使用的是 GCC，

> gcc -Wall -Wextra -pedantic -o myprog myprog.c

在我的系统上，我得到：

```
song.c: In function ‘main’:
song.c:75:16: warning: variable ‘theArtist’ set but not used [-Wunused-but-set-variable]
song.c:74:12: warning: variable ‘track’ set but not used [-Wunused-but-set-variable]
song.c:74:6 : warning: variable ‘year’ set but not used [-Wunused-but-set-variable]

song.c: In function ‘findOrInsertArtist’:
song.c:162:7: warning: assignment from incompatible pointer type [enabled by default]
song.c:163:2: warning: passing argument 1 of ‘InsertArtist’ from incompatible pointer type [enabled by default]
song.c:50:6 : note: expected ‘struct artist *’ but argument is of type ‘struct artist **’
song.c:166:8: warning: assignment from incompatible pointer type [enabled by default]
song.c:167:2: warning: return from incompatible pointer type [enabled by default]

song.c: In function ‘initializenode’:
song.c:197:1: warning: control reaches end of non-void function [-Wreturn-type]

song.c: In function ‘main’:
song.c:158:1: warning: control reaches end of non-void function [-Wreturn-type] 
```

特别注意除 -Wunused 之外的所有内容，然后检查是否应该使用那些未使用的变量，以及代码逻辑是否存在一些错误。

然后，当您设法在没有警告的情况下进行编译时，使用 valgrind 运行程序（如果在 Windows 上我不确定；也许您可以在这里找到有用的东西：[is-there-a-good-valgrind-substitute-for-windows](https://stackoverflow.com/questions/413477/is-there-a-good-valgrind-substitute-for-windows)）

* * *

编辑：
我注意到你说你使用 Code::Blocks。我建议使用 Vim 等编辑器 + 在命令行上编译。尤其是开始。

即使是这样; 如上面评论中所述，您可以通过以下方式修改警告级别：

```
"Settings" > "Compiler and debugger ..." > [Compiler Flags]=>[Warnings] 
```

要获得调试添加`-ggdb`到`[Other options]`. 如果您只想在项目基础上更改它 - 您可以在以下位置找到相同的选项：

```
"Project" > "Build options ..." 
```

* * *

使用调试符号编译后，您可以在调试模式下运行程序。

简单的程序：

1.  右键单击代码中您希望停止执行的位置。选择“切换断点”。

2.  `F8`以调试模式启动程序。

3.  然后`F7`逐行按。

4.  ...（基本键在“调试”菜单中。）

在运行时，您也可以右键单击变量并选择*Watch*，即*“watch 'discTemp'”*。如果不存在，请选择“调试”>“调试窗口”>“手表”。

现在，当您逐步浏览代码时，您将看到变量的值等。

`gdb`也可以在命令行上使用。`$ gdb -args ./my_prog arg arg`

如前所述，Valgrind 也是一个非常有用的工具。您将获得有关流程中不良行为的信息。即使代码编译没有错误或警告，也不能说程序是正常的。

Valgrind 也在 Code::Blocks 中实现，或许更好的说法是：

```
$ valgrind ./my_prog arg arg ... 
```

最后一点：一直编译。写几行。编译。进行一项更改编译。...

* * *

这些是关于如何使编码不那么痛苦的一些提示。希望能帮助到你。

* * *

除了这里其他人提到的注释之外，我还想添加：

*   在您的`menu`循环中，您***必须***检查是否`scanf()`返回 1，（1 是成功读取元素，在您的情况下为“%d”） - 如果不是，则为空缓冲区。因为它现在不是整数，所以会导致无限循环。

*   最后`getNextLine()`有一个`while()`循环，`get character from file while character is not newline.`如果文件没有以换行符结尾，这是另一个无限循环。另请阅读@sarnold 和@torek 关于此功能的评论。

* * *

Ps：要在 Code::Blocks 中添加命令行参数，您必须使用：

> “项目”>“设置程序的参数”

# java - Android：ListView 上的 Sqlite

> ID：10116614
> 
> 赞同：1
> 
> 时间：2012-04-12T02:26:14.853
> 
> 标签：java, android, sqlite, listview

我需要帮助来创建一个显示数据库 sql 元素的列表视图。首先`Text1,Text2 and Text3` 在我的活动中创建了一个带有 3 个字段 TextView 的小型 xml 布局：和一个列表视图。在我对界面中的列进行分组之后

```
public interface TableRegistry extends BaseColumns{

     String TABLE_NAME = "Registry";

     String TYPE = "Type";
     String DATE = "Date";
     String STATUS = "Status";
     String NUMBER = "Number";
     String MESSAGE = "Message";
     String OTHER = "Other";

     String[] COLUMNS = new String[]
                { _ID, TYPE, DATE, STATUS, NUMBER, MESSAGE, OTHER };
            } 
```

在我创建数据库类之后..

```
public class APdatabaseClass extends  SQLiteOpenHelper {

    private static final String DATABASE_NAME = "APdatabase";
    private static final int DATABASE_VERSION = 1;

    public APdatabaseClass(Context context) {
        super(context, DATABASE_NAME , null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {

        String sql = "CREATE TABLE {0} ({1} INTEGER PRIMARY KEY AUTOINCREMENT," + 
                " {2} TEXT NOT NULL,{3} TEXT NOT NULL,{4} TEXT NOT NULL,{5} TEXT NOT NULL,{6} TEXT NOT NULL, {7} TEXT NOT NULL);";
            db.execSQL(MessageFormat.format(sql, TableRegistry.TABLE_NAME, TableRegistry._ID,
                TableRegistry.TYPE, TableRegistry.DATE, TableRegistry.STATUS, TableRegistry.NUMBER, TableRegistry.MESSAGE, TableRegistry.OTHER));

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

        // Drop older table if existed
        db.execSQL("DROP TABLE IF EXISTS " + TableRegistry.TABLE_NAME);

        // Create tables again
        onCreate(db);       
    } 
```

现在如何使用 SimpleCursorAdapter 或其他东西将我的数据库连接到我的活动中的列表视图？我需要用以下内容填充 3 个 TextView 字段：

```
TableRegistry.TYPE, TableRegistry.DATE, TableRegistry.STATUS. 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T04:02:55.527

看起来你要做一些额外的工作。这是我通常的做法：

首先在你的数据库助手中创建方法来获取你想要的信息：

```
public Cursor fetchListData() {
    return mDb.query(TableRegistry.TABLE_NAME, new String[] { TableRegistry._ID,
        TableRegistry.TYPE, TableRegistry.DATE, TableRegistry.STATUS }, null,null, 
        null, null, null);
} 
```

然后在您要创建列表的任何类中：

```
APdatabaseClass mDbHelper = new APdatabaseClass(getActivity());
mDbHelper.open();

Cursor c = fetchListData();
getActivity().startManagingCursor(c);

String[] from = new String[] { TableRegistry.TYPE, TableRegistry.DATE, TableRegistry.STATUS };
int[] to = new int[] {  R.id.Text1, R.id.Text2, R.id.Text3  };
SimpleCursorAdapter data = new SimpleCursorAdapter(getActivity(), R.layout.yourlistlayout, c, from, to);
setListAdapter(data); 
```

请注意，这假设您使用的是 ListFragment 或 ListActivity。如果不是，那么设置适配器的方式会略有不同。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T03:02:12.300

是的，您现在可以使用[raqQuery()](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#rawQuery%28java.lang.String,%20java.lang.String%5B%5D%29)方法触发查询，您将在结果中获得 Cursor。

现在，您必须遍历游标并获取数据。

例如，

```
Cursor cur = db.raqQuery("Select * from myTable",null);
if (cur != null) {
    if (cur.moveToFirst()) {
        do {
            cur.getString(cur.getColumnIndex("Name"))); // "Name" is the field name in table
        } while (cur.moveToNext());
    }
} 
```

# youtube-api - YouTube 播放列表“未找到”

> ID：10116615
> 
> 赞同：0
> 
> 时间：2012-04-12T02:26:15.423
> 
> 标签：youtube-api, gdata-api

播放列表链接：[http ://www.youtube.com/playlist?list=PL89275CCCD333C8EE](http://www.youtube.com/playlist?list=PL89275CCCD333C8EE)

应该是来自播放列表的 RSS：http: [//gdata.youtube.com/feeds/api/playlists/PL89275CCCD333C8EE](http://gdata.youtube.com/feeds/api/playlists/PL89275CCCD333C8EE)

说：“未找到播放列表”

我没有发现对可能未设置的任何类型的隐私设置的引用。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T14:10:12.367

有两个项目发生了变化，我无法确认是否只有一个或两个都构成了完整的解决方案。

首先... 自定义频道 URL 已创建

其次...在上面的 URL 中，从列表 URL 参数中删除“PL”。我在网上看到的所有例子都没有提到这一点，但是一旦你删除了“PL”（播放列表？）并且只使用 id: 89275CCCD333C8EE 它就可以很好地工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T05:26:18.177

它应该是这样的： http://gdata.youtube.com/feeds/api/playlists/PL89275CCCD333C8EE?v=2&alt= [jsonc](http://gdata.youtube.com/feeds/api/playlists/PL89275CCCD333C8EE?v=2&alt=jsonc)

但如果播放列表是私有的，您还需要进行身份验证才能进行上述操作。

因为它在我的情况下工作正常： http://gdata.youtube.com/feeds/api/playlists/PL0F32F77A67A612A3?v=2&alt= [jsonc](http://gdata.youtube.com/feeds/api/playlists/PL0F32F77A67A612A3?v=2&alt=jsonc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T14:56:24.280

好的，这里是...

[https://gdata.youtube.com/feeds/api/users/IDCsync/playlists/89275CCCD333C8EE](https://gdata.youtube.com/feeds/api/users/IDCsync/playlists/89275CCCD333C8EE)

它的工作

![播放列表](../Images/f07c2dafa1c2119c07f8860d1b00ddb3.png)

![xml](../Images/c4fd9d711005ffd0719620f51312d243.png)

# android - 错误：android.database.sqlite.SQLiteException：靠近“WHERE”：语法错误：，编译时：

> ID：10116617
> 
> 赞同：1
> 
> 时间：2012-04-12T02:26:26.090
> 
> 标签：android, sqlite

```
 Cursor cursor = db.rawQuery("SELECT id,no,name,lastname FROM mytable WHERE " +
                                   "id = (SELECT MIN(id) and no=0 FROM mytable ); ",null); 
```

我在下面收到该错误，您能帮帮我吗？

我想要的是检索在 mytable 中具有 min Id where no=0 的记录......

> 错误：android.database.sqlite.SQLiteException：靠近“WHERE”：语法错误：，编译时：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T02:32:45.070

在不了解有关 sqlite 语法的太多细节的情况下，我猜您的子查询的格式不正确。

尝试

```
SELECT id, no, name, lastname FROM mytable WHERE
       id = (SELECT min(ID) FROM mytable WHERE no = 0) 
```

或者

```
SELECT id, no, name, lastname FROM mytable WHERE
       id = (SELECT min(ID) FROM mytable) AND no = 0 
```

取决于你的解释是什么（但听起来像第一个）。第一个将返回具有最小值`id`且 a`no`为 0 的行，但第二个查询将返回最小值`id`，*然后*使用它来选择 a`no`为 0 的行。

# python - python列拆分

> ID：10116624
> 
> 赞同：3
> 
> 时间：2012-04-12T02:27:35.983
> 
> 标签：python, numpy

我有一个格式为的python数组：

```
[[1,2,3],[4,5,6],[7,8,9]] 
```

有没有办法让我把它分成几列来给出：

```
[[1,4,7],[2,5,8],[3,6,9]] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T02:33:06.977

我认为 NumPy 对此有好处：

```
>>> import numpy as np
>>> my_list = [[1,2,3],[4,5,6],[7,8,9]]
>>> x = np.array(my_list)
>>> np.transpose(x).tolist()
[[1, 4, 7], [2, 5, 8], [3, 6, 9]] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T02:33:54.273

```
In [85]: [list(x) for x in zip(*[[1,2,3],[4,5,6],[7,8,9]])]
Out[85]: [[1, 4, 7], [2, 5, 8], [3, 6, 9]] 
```

如果您想要元组列表，您可以使用：

```
In [86]: zip(*[[1,2,3],[4,5,6],[7,8,9]])
Out[86]: [(1, 4, 7), (2, 5, 8), (3, 6, 9)] 
```

# c# - 动态修改 ProfileBase ConnectionString

> ID：10116626
> 
> 赞同：1
> 
> 时间：2012-04-12T02:28:11.033
> 
> 标签：c#, asp.net, membership-provider, sqlprofileprovider

我有以下代码，我想用它来修改`ProfileBase`connectionString：

```
ProfileBase profile = ProfileBase.Create(username);

string _connectionString = (_DataModel.Connection as System.Data.EntityClient.EntityConnection).StoreConnection.ConnectionString;

FieldInfo connectionStringField = profile.Providers["MySqlProfileProvider"].GetType().BaseType.GetField("_sqlConnectionString", System.Reflection.BindingFlags.Instance | System.Reflection.BindingFlags.NonPublic);
connectionStringField.SetValue(profile.Providers["MySqlProfileProvider"], _connectionString);

profile["FirstName"] = firstName;
profile["Surname"] = surname;

profile.Save(); 
```

首先，`connectionStringField`总是返回为空，但是我可以看到它`profile.Providers`确实包含`MySqlProfileProvider`. 这是在 my 中指定的`Web.Config`：

```
<profile defaultProvider="MySqlProfileProvider">
  <providers>
    <clear/>
    <add name="MySqlProfileProvider" connectionStringName="MyApp" applicationName="MyApp" type="System.Web.Profile.SqlProfileProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"/>
  </providers>
  <properties>
    <add allowAnonymous="false" defaultValue="" name="FirstName" readOnly="false" serializeAs="String" type="System.String"/>
    <add allowAnonymous="false" defaultValue="" name="Surname" readOnly="false" serializeAs="String" type="System.String"/>
  </properties>
</profile> 
```

我的问题是怎么`connectionStringField`回来为空？这是否意味着我不能像往常一样`MembershipProvider`通过覆盖其`Initialize`方法来修改连接字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T01:07:39.567

您使用了太多的基本类型：

```
.Providers["MySqlProfileProvider"].GetType()**.BaseType**.GetField
.Providers["MySqlProfileProvider"].GetType().GetField 
```

以下代码应该可以工作：

```
string _connectionString = (_DataModel.Connection as System.Data.EntityClient.EntityConnection).StoreConnection.ConnectionString;
Type type = profile.Providers["MySqlProfileProvider"].GetType();
FieldInfo connectionStringField = type.GetField("_sqlConnectionString", System.Reflection.BindingFlags.Instance | System.Reflection.BindingFlags.NonPublic);
connectionStringField.SetValue(profile.Providers["MySqlProfileProvider"], _connectionString); 
```

# vb.net - 创建表单时出现“未设置对象引用”错误

> ID：10116627
> 
> 赞同：-8
> 
> 时间：2012-04-12T02:28:12.803
> 
> 标签：vb.net

运行程序时出现此错误。在我创建这个程序时，我以前不是这样的。

```
An error occurred creating the form.
See Exception.InnerException for details.
The error is:
    Object reference not set to an instance of an object. 
```

这是表单中的代码：

```
Imports System.Data
Imports System.Data.OleDb

Public Class IndexFrm

#Region "Connection"

    Dim con As OleDbConnection
    Dim scmd As OleDbCommand
    Dim conreader As OleDbDataReader
    Dim dbcon As String = Me.OpenFileDialog1.FileName & ";Jet Oledb:Database Password=*****"

#End Region

    Private Sub ExitToolStripMenuItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ExitToolStripMenuItem.Click
        End
    End Sub

    Private Sub ToolStripButton1_Click_1(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ToolStripButton1.Click
        FrmSynoyms.Show()
        FrmAntonyms.Hide()
        FrmAnalogy.Hide()
        FrmMath.Hide()
        FrmAbstract.Hide()
        FrmAbstract2.Hide()
        FrmAbstract3.Hide()
        FrmAbstract4.Hide()
        StdntsFrm.Hide()
    End Sub

    Private Sub ToolStripButton2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ToolStripButton2.Click
        FrmAntonyms.Show()
        FrmAnalogy.Hide()
        FrmSynoyms.Hide()
        FrmMath.Hide()
        FrmAbstract.Hide()
        FrmAbstract2.Hide()
        FrmAbstract3.Hide()
        FrmAbstract4.Hide()
        StdntsFrm.Hide()
    End Sub

    Private Sub ToolStripButton3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ToolStripButton3.Click
        FrmAnalogy.Show()
        FrmAntonyms.Hide()
        FrmSynoyms.Hide()
        FrmMath.Hide()
        FrmAbstract.Hide()
        FrmAbstract2.Hide()
        FrmAbstract3.Hide()
        FrmAbstract4.Hide()
        StdntsFrm.Hide()
    End Sub

    Private Sub StudentsFormToolStripMenuItem1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles StudentsFormToolStripMenuItem1.Click
        StdntsFrm.Show()
        FrmAnalogy.Hide()
        FrmAntonyms.Hide()
        FrmSynoyms.Hide()
        FrmMath.Hide()
        FrmAbstract.Hide()
        FrmAbstract2.Hide()
        FrmAbstract3.Hide()
        FrmAbstract4.Hide()
    End Sub

    Private Sub ToolStripButton4_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ToolStripButton4.Click
        FrmMath.Show()

        FrmAnalogy.Hide()
        FrmAntonyms.Hide()
        FrmSynoyms.Hide()
        FrmAbstract.Hide()
        FrmAbstract2.Hide()
        FrmAbstract3.Hide()
        FrmAbstract4.Hide()
        StdntsFrm.Hide()
    End Sub

    Private Sub ToolStripButton5_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ToolStripButton5.Click
        FrmAbstract.Show()
        FrmAntonyms.Hide()
        FrmAnalogy.Hide()
        FrmMath.Hide()
        StdntsFrm.Hide()
    End Sub

    'Private Sub IndexFrm_KeyDown(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles Me.KeyDown
    '    If e.KeyCode = Keys.Escape Then
    '        Try
    '            If Me.WindowState = FormWindowState.Minimized Then
    '                Me.WindowState = FormWindowState.Minimized
    '                NotifyIcon1.Visible = True
    '                Me.Hide()
    '            End If
    '        Catch ex As Exception
    '            MsgBox(ex.Message)
    '        End Try
    '    End If
    'End Sub

    Private Sub IndexFrm_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        Me.ToolStripButton1.Enabled = False
        Me.ToolStripButton2.Enabled = False
        Me.ToolStripButton3.Enabled = False
        Me.ToolStripButton4.Enabled = False
        Me.ToolStripButton5.Enabled = False
        Me.StudentsFormToolStripMenuItem1.Enabled = False
    End Sub

    Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
        Me.Label3.Text = Val(Me.Label3.Text) - 1

        If Me.Label1.Text = "0" And Me.Label2.Text = "0" And Me.Label3.Text = "0" Then
            Me.Timer1.Stop()
            Me.Timer1.Enabled = False
            MsgBox("TIME IS UP")

            SynonymsSave()
            AntonymsSave()
            AnalogySave()
            MathSave()
            AbstractSave()

            StdntsFrm.TxtStdntName.Clear()
            StdntsFrm.TxtStdntsMI.Clear()
            StdntsFrm.TxtStdntsLast.Clear()
            StdntsFrm.TxtStdntAdd.Clear()
            StdntsFrm.TxtStdntSchool.Clear()
            StdntsFrm.TxtSchoolAdd.Clear()
            StdntsFrm.TxtStdntAdv.Clear()
            StdntsFrm.StdntTel.Clear()

            StdntsFrm.Show()
        Else
            If Me.Label3.Text = "0" And Me.Label2.Text <> "0" Then
                Me.Label3.Text = "59"
                Me.Label2.Text = Val(Me.Label2.Text) - 1
            ElseIf Me.Label2.Text = "0" And Me.Label1.Text <> "0" Then
                Me.Label2.Text = "2"
                Me.Label1.Text = Val(Me.Label1.Text) - 1
            ElseIf Me.Label1.Text = "0" Then
                Me.Label1.Text = "0"
            ElseIf Me.Label2.Text = "0" And Me.Label1.Text = "0" Then
                Me.Label2.Text = "0"
            End If
        End If
    End Sub

    Private Sub StudentsFormToolStripMenuItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs)
        FrmDBPath.Show()
    End Sub

    Private Sub IndexFrm_Resize(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Resize
        Try
            If Me.WindowState = FormWindowState.Minimized Then
                Me.WindowState = FormWindowState.Minimized
                NotifyIcon1.Visible = True

                Me.Hide()
            End If
        Catch ex As Exception
            MsgBox(ex.Message)
        End Try
    End Sub

    Private Sub NotifyIcon1_MouseDoubleClick(ByVal sender As System.Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles NotifyIcon1.MouseDoubleClick
        Try
            Me.Show()
            Me.WindowState = FormWindowState.Normal

            NotifyIcon1.Visible = False
        Catch ex As Exception
            MsgBox(ex.Message)
        End Try
    End Sub

    Private Sub OpenDatabaseToolStripMenuItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles OpenDatabaseToolStripMenuItem.Click
        Dim DBpath As String

        With OpenFileDialog1
            .AddExtension = True
            .CheckPathExists = True
            .DefaultExt = ".mdb"
            .DereferenceLinks = True
            .Filter = "Access File (*.mdb)|*.mdb|All files|*.*"
            .Multiselect = False
            .RestoreDirectory = True
            .ShowHelp = True
            .ShowReadOnly = True
            .Title = "Select file to open"
            .ValidateNames = True

            If .ShowDialog = Windows.Forms.DialogResult.OK Then
                Try
                    DBpath = My.Computer.FileSystem.ReadAllText(.FileName)
                    Me.StudentsFormToolStripMenuItem1.Enabled = True
                Catch ex As Exception
                    MsgBox("THE DATABASE IS ALREADY BEING USED", MsgBoxStyle.Exclamation)
                End Try
            End If
        End With
    End Sub

    Sub SynonymsSave()
        con = New OleDbConnection("Provider=Microsoft.jet.oledb.4.0;Data source=" & dbcon & ";Jet Oledb:Database Password=*****")
        con.Open()

        Dim qstring As String = "Insert into tblStdntsScores (StdntName,Synonyms,ScoreDate) values ('" & FrmSynoyms.Label59.Text & "','" & FrmSynoyms.Label58.Text & "','" & StdntsFrm.Label13.Text & "')"
        scmd = New OleDbCommand(qstring, con)
        scmd.ExecuteReader()

        scmd.Dispose()
        con.Close()

        FrmSynoyms.HistorySave()
    End Sub

    Sub AntonymsSave()
        con = New OleDbConnection("Provider=Microsoft.jet.oledb.4.0;Data source=" & dbcon & ";Jet Oledb:Database Password=*****")
        con.Open()

        Dim qstring As String = "Update tblStdntsScores set Antonyms='" & FrmAntonyms.Label28.Text & "' where StdntName='" & FrmAntonyms.Label29.Text & "'"
        scmd = New OleDbCommand(qstring, con)
        scmd.ExecuteReader()

        scmd.Dispose()
        con.Close()

        FrmAntonyms.HistorySave()
    End Sub

    Sub AnalogySave()
        con = New OleDbConnection("Provider=Microsoft.jet.oledb.4.0;Data source=" & dbcon & ";Jet Oledb:Database Password=*****")
        con.Open()

        Dim qstring As String = "Update tblStdntsScores set Analogy='" & FrmAnalogy.Label308.Text & "' where StdntName='" & FrmAnalogy.Label368.Text & "'"
        scmd = New OleDbCommand(qstring, con)
        scmd.ExecuteReader()

        scmd.Dispose()
        con.Close()

        FrmAnalogy.HistorySave()
    End Sub

    Sub MathSave()
        con = New OleDbConnection("Provider=Microsoft.jet.oledb.4.0;Data source=" & dbcon & ";Jet Oledb:Database Password=*****")
        con.Open()

        Dim qstring As String = "Update tblStdntsScores set Math='" & FrmMath.Label67.Text & "' where StdntName='" & FrmMath.Label68.Text & "'"
        scmd = New OleDbCommand(qstring, con)
        scmd.ExecuteReader()

        scmd.Dispose()
        con.Close()

        FrmMath.HistorySave()
    End Sub

    Sub AbstractSave()
        con = New OleDbConnection("Provider=Microsoft.jet.oledb.4.0;Data source=" & dbcon & ";Jet Oledb:Database Password=*****")
        con.Open()

        Dim qstring As String = "Update tblStdntsScores set Abstract='" & FrmAbstract4.Label36.Text & "' where StdntName='" & FrmAbstract.Label36.Text & "'"
        scmd = New OleDbCommand(qstring, con)
        scmd.ExecuteReader()

        scmd.Dispose()
        con.Close()

        FrmAbstract4.HistorySave()
    End Sub
End Class 
```

请帮助，伙计们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:23:04.313

```
Dim dbcon As String = Me.OpenFileDialog1.FileName & "...etc" 
```

在这里，您尝试使用控件属性值初始化字符串。类作用域变量（字段）在调用任何其他构造函数代码（即：）之前被初始化`InitializeComponent()`，所以这里`OpenFileDialog1`还不存在。

# iphone - 一个 TableView 中有许多不同的 UITableViewCells

> ID：10116628
> 
> 赞同：5
> 
> 时间：2012-04-12T02:28:27.307
> 
> 标签：iphone, objective-c, ios, ipad, uitableview

我有一个`NSDictionary`我们会说是这样的：

```
key:       value:
name       Bookshelf
movies     Array containing: (Movie 1, Movie 2, Movie 3)
books      Array containing: (Book 1, Book 2, Book 3)
music      Array containing: (Music 1, Music 2, Music 3) 
```

等等。现在我要做的是创建一个 tableView 来显示所有这些信息，但是根据字典键是不同类型的单元格。比如电影用`cellForMovies`书用`cellForBooks`音乐用`cellForMusic`，每个都有自己的布局。

显然，我过于简单化了，但希望你能理解我想要做什么。

如果我为每个部分做部分和不同的单元格类型，我可以做到这一点，但我不想这样做。我希望能够有这样的表，例如：

```
cellForBooks
cellForMovies
cellForMovies
cellForMusic
cellForBooks 
```

等等...您可以指出我的任何想法或资源吗？我只关心 iOS 5 支持（故事板）。

**编辑解决方案：**

非常感谢所有提供帮助的人，尤其是 atticus，他将最后一块拼凑在一起。

最终的工作是将数据结构更改为字典数组，然后在`Key: type Value: book/movie/music`每个条目中添加一个。数据结构现在看起来像：

```
Array[0]: Dictionary: [Key: type Value: book], [Key: name Value: Physics];
Array[1]: Dictionary: [Key: type Value: music], [Key: name Value: Rock]; 
```

然后配置我这样做的单元格：

```
NSString *CellIdentifier = @"Cell";
NSDictionary *object = [self.listOfStuff objectAtIndex:indexPath.row];
if ([[object objectForKey:@"type"] isEqualToString:@"book"]){
    CellIdentifier = @"BookCell";
}else if ([[object objectForKey:@"type"] isEqualToString:@"music"]){
    CellIdentifier = @"MusicCell";
}else if ([[object objectForKey:@"type"] isEqualToString:@"movie"]){
    CellIdentifier = @"MovieCell";
} 
```

这些中的每一个在情节提要中都有一个不同的 tableviewcell。我们确定您是否想使用任何内置的单元格功能，就像`cell.textLabel.text`您需要这样做：

```
cell.textLabel.text = [object objectForKey:@"name"];
cell.textLabel.backgroundColor = [UIColor clearColor]; 
cell.textLabel.opaque = NO; 
```

希望这对将来的其他人有所帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T02:38:11.333

在您的`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`方法中，您可以根据返回多种类型的单元格`indexPath`。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.row > 5) { // Your conditions here to choose between Books and Movies
        BookCell *cell = [tableView dequeueReusableCellWithIdentifier:@"bookCell"];
        if (!cell)
        {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault     reuseIdentifier:@"bookCell"];
        }
        return cell;
    } else {
        MovieCell *cell = [tableView dequeueReusableCellWithIdentifier:@"movieCell"];
        if (!cell)
        {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault     reuseIdentifier:@"movieCell"];
        }
        return cell;
    }
return nil;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T14:57:53.703

非常感谢所有提供帮助的人，尤其是 atticus，他将最后一块拼凑在一起。

最终的工作是将数据结构更改为字典数组，然后在`Key: type Value: book/movie/music`每个条目中添加一个。数据结构现在看起来像：

```
Array[0]: Dictionary: [Key: type Value: book], [Key: name Value: Physics];
Array[1]: Dictionary: [Key: type Value: music], [Key: name Value: Rock]; 
```

然后配置我这样做的单元格：

```
NSString *CellIdentifier = @"Cell";
NSDictionary *object = [self.listOfStuff objectAtIndex:indexPath.row];
if ([[object objectForKey:@"type"] isEqualToString:@"book"]){
    CellIdentifier = @"BookCell";
}else if ([[object objectForKey:@"type"] isEqualToString:@"music"]){
    CellIdentifier = @"MusicCell";
}else if ([[object objectForKey:@"type"] isEqualToString:@"movie"]){
    CellIdentifier = @"MovieCell";
} 
```

这些中的每一个在情节提要中都有一个不同的 tableviewcell。我们确定您是否想使用任何内置的单元格功能，就像`cell.textLabel.text`您需要这样做：

```
cell.textLabel.text = [object objectForKey:@"name"];
cell.textLabel.backgroundColor = [UIColor clearColor]; 
cell.textLabel.opaque = NO; 
```

希望这对将来的其他人有所帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T02:43:51.110

在您的故事板中，将您的 tableView 设置为使用动态原型。然后，为您要使用的每种单元格创建一个单元格。适当地定制这些，然后在检查器中为每个人提供一个唯一的重用标识符（例如 MovieCell）。

然后，在您的 tableview:cellForRowAtIndexPath: 方法中，为该索引路径处的内容确定合适的单元格类型。如果 indexPath 处的单元格应该是电影单元格，则可以使用以下方法创建单元格：

```
static NSString * MovieCellIdentifier = @"MovieCell"; // This must match the storyboard
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MovieCellIdentifier]; 
```

这将为您提供您在情节提要中指定为“MovieCell”的单元格。如果您需要进一步自定义它，请创建一个 UITableViewCell 子类并为 Storyboard 中的单元格指定该子类。然后，您可以通过转换返回的单元格来参考此处的属性等进行自定义：

```
MovieTableViewCell *movieCell = (MovieTableViewCell *)cell;
// customize 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T02:43:06.483

我的意见是，您应该在一个单元中实现所有单元类型。这意味着您应该`UITableViewCell`为所有课程设置一个课程和 .xib。然后在 中`cellForRowAtIndexPath`，创建单元格，然后根据实际需要，显示/隐藏组成一本书或一部电影的子视图。

在这样的设计中，你的细胞会有点重。但是，它仍然比使用多个单元类更好，因为这种方式单元重用更有效（`[UITableView dequeueReusableCellWithIdentifier]`）。

我相信 UITableView 是针对一种类型的单元格设计的。因此，如果您的布局发生变化，您仍然可以将它们放在一个位置并使用框架或显示/隐藏来控制单元格行为。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T05:13:52.263

我认为您应该使用以下内容作为您的单元格标识符。

```
- (UITableViewCell *)tableView:(UITableView *)tmpTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
NSString *cellIdentifier            =   [NSString stringWithFormat:@"Cell%d%d",indexPath.section,indexPath.row];
UITableViewCell *cell               =   [tmpTableView dequeueReusableCellWithIdentifier:cellIdentifier]; 
if (nil == cell) {
    cell    =   [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier] autorelease];

// do ur stuff here

}
return cell;
} 
```

# css - Mootools 1.4.3 背景淡化效果

> ID：10116637
> 
> 赞同：0
> 
> 时间：2012-04-12T02:30:08.557
> 
> 标签：css, background, mootools, fade, effect

所以我有代码来交换背景，我遇到的问题是将淡入淡出效果融入其中。我已经搞砸了一段时间，我只是感到沮丧。所以代码就在那里，看看你如何破解它来工作。

Mootools 1.4.3

```
.socialIconsFB {
    float: right;
    display: block;
    margin: -20px 3px;
    width: 48px;
    height: 57px;
    background-image: url(XXXXXX/social_icons/facebook.png);
}

<div class="socialIconsFB"></div>

$$('.socialIconsFB').each(function(socialIconsFB) {
    socialIconsFB.addEvent('mouseover', function() {
      this.tween("background-image", "url(XXXXXX/social_icons/facebook.png)", "url(XXXXXX/social_icons/facebook_highlight.png)");
    });
    socialIconsFB.addEvent('mouseout', function() {
      this.tween("background-image", "url(XXXXXX/social_icons/facebook.png)");
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T07:48:44.140

我认为“补间”效果不适用于“背景图像”但适用于“背景颜色”我会尝试这种方式：

HTML：

```
<div class="socialIconsFB">
    <span></span>
</div> 
```

CSS：

```
.socialIconsFB {
        float: right;
        display: block;
        margin: -20px 3px;
        width: 48px;
        height: 57px;
        background-image: url(XXXXXX/social_icons/facebook.png);
}
.socialIconsFB span{
     margin:0; padding:0;
     opacity:0; filter:alpha(opacity=0);
     width:100%;  
     height:100%;
     background-image: url(XXXXXX/social_icons/facebook_highlight.png);
} 
```

JAVASCRIPT：

```
$$('.socialIconsFB').each(function(socialIconsFB) {
    socialIconsFB.addEvents({
         'mouseenter': function(){
               this.getChildren('span').tween("opacity", 1);
               //it could be: this.getChildren('span')[0] 
          },

         'mouseleave': function(){
              this.getChildren('span').tween("opacity", 0);
              //it could be: this.getChildren('span')[0]
          }
    });

}); 
```

# android - 如何跨片段事务保存片段的状态

> ID：10116639
> 
> 赞同：3
> 
> 时间：2012-04-12T02:30:15.743
> 
> 标签：android, android-fragments, android-ui

我在将我的头包裹在 android 片段上时遇到了一些困难。我有一个`ActionBar`with a ，每次点击微调器项目时都会`Spinner`创建一个新的。`Fragment`我有类似以下代码的内容：

```
public class MyActivity extends Activity
{
   ...  
   ...
   private void initActionBarSpinner()
   {
      getActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);

      OnNavigationListener callback = new OnNavigationListener()
      {
          @Override
          public boolean onNavigationItemSelected(int itemPosition, long itemId)
          {
             if (itemPosition >= 0 && itemPosition < dataSet.size())
             {
                openTagFragment(itemPosition);
                return true;
             }

             return false;
          }
       };

       spinnerAdapter = new ArrayAdapter<String>(this, R.layout.action_bar_spinner, R.id.spinnertAdapterItem, tags);
       getActionBar().setListNavigationCallbacks(spinnerAdapter, callback);
   }

   @Override
   public void onCreate(Bundle savedInstanceState)
   {
      Log.d(TAG, TAG + " oncreate");

      super.onCreate(savedInstanceState);

      initActionBarSpinnerAdapter();
   }

   protected void openTagFragment(int itemPosition)
   {
      Log.d(TAG, "Replacing fragment");

      String fragmentTag = dataSet.get(itemPosition);
      MyFragment myFragment = new MyFragment();
      myFragment.setData(dataSet.get(itemPosition));
      FragmentTransaction fragmentTransaction = getFragmentManager().beginTransaction();
      fragmentTransaction.replace(R.id.fragmentContainer, myFragment, fragmentTag);
      fragmentTransaction.addToBackStack(null);
      fragmentTransaction.commit();
   }
} 
```

我面临的问题：在方向更改时，会创建一个新片段，这意味着它会再次从服务器获取相同的数据。我可以看到`onSaveInstanceState()`在旋转时在现有片段上被调用，但如果我要`Fragment`再次执行新片段，我何时以及如何在片段上获得有效的 savedInstance 包`onCreate()`？

# mysql - Can I run a MySQL cluster using Amazon EC2 "Small" instances that have just 1.7GB of RAM?

> ID：10116642
> 
> 赞同：2
> 
> 时间：2012-04-12T02:30:48.383
> 
> 标签：mysql, amazon-ec2, cluster-computing

Has somebody tried using Amazon EC2 "Small" instances (the ones with 1.7GB of RAM) to install a MySQL Cluster Server? In MySQL documentation they suggest using much more RAM, but I wonder if it would work with just 1.7GB. Or maybe I should ask if the performance is "ok" with just that amount of RAM. Or will it run, but too slow?

Note: I'm aware of the RDBS service that Amazon offers, using MySQL. But I would prefer building my own cluster using a pair of small instances, if it is not too expensive or too slow.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:39:04.540

MySql Cluster uses RAM a lot so 1.7RAM is very little and I would use it only for testing or for small sites. With those small instances you could run Percona XtraDB Cluster which support s MyIsam and Innodb. Witn MySql Cluster you have to use the NDB engine

# python - 在 Python 3 中创建 CodeType 时出现 TypeError

> ID：10116650
> 
> 赞同：5
> 
> 时间：2012-04-12T02:32:20.207
> 
> 标签：python, python-3.x

我正在尝试创建一个新的 CodeType，以下代码在 Python 2.7 中运行良好，但在 Python 3.2 中出现错误：

```
def newCode(co_argcount = 0, co_nlocals = 0, co_stacksize = 0, co_flags = 0x0000,
            co_code = bytes(), co_consts = (), co_names = (), co_varnames = (),
            filename = "<string>", name = "", firstlineno = 0, co_lnotab = bytes(),
            co_freevars = (), co_cellvars = ()):
    """wrapper for CodeType so that we can remember the synatax"""
    print(type(co_stacksize))
    return types.CodeType(co_argcount, co_nlocals, co_stacksize,
                          co_flags, co_code, co_consts, co_names, co_varnames,
                          filename, name, firstlineno, co_lnotab, co_freevars, co_cellvars) 
```

用法：

```
return newCode(co_code = code, co_stacksize = size, co_consts = consts) 
```

调试行证明我将 int 作为 co_stacksize 发送......在 Python 3 中发生了什么变化以使其不起作用？

编辑：这是错误（不知道为什么我之前忘记了）：

TypeError：需要一个整数

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T12:11:29.400

在 Python 3 上，第二个参数`CodeType`是关键字参数的数量，`co_kwonlyargcount`. 这是一个加法，所以后面的所有参数都将移动一个位置。

我从 IPython 的代码库中挖掘了这个，在一个允许腌制代码对象的实用模块中： [https ://github.com/ipython/ipython/blob/master/IPython/utils/codeutil.py#L32](https://github.com/ipython/ipython/blob/master/IPython/utils/codeutil.py#L32)

# gmail - Gmail 的 IMAP 搜索未找到所有邮件

> ID：10116651
> 
> 赞同：1
> 
> 时间：2012-04-12T02:32:28.287
> 
> 标签：gmail

当我尝试通过 IMAP 搜索 Gmail 时，`X-GM-THRID`它并不总能找到相关邮件。可能是什么问题呢？

# php - 在 onClick HTML 事件之后调用 PHP 函数

> ID：10116654
> 
> 赞同：10
> 
> 时间：2012-04-12T02:33:00.170
> 
> 标签：php, html, events, function, onclick

**目的：** 调用 PHP 函数从文件中读取数据并重写。我仅将 PHP 用于此目的 - FileIO - 我是 PHP 新手。

**解决方案？** 我尝试了很多论坛，知道我们无法正常实现：onClick事件>调用函数。我们该怎么做，还有其他方法吗，尤其是在我的情况下？我的 HTML 代码和 PHP 代码在同一页面上：Admin.php。这是 HTML 部分：

```
<form>
    <fieldset>
        <legend>Add New Contact</legend>
        <input type="text" name="fullname" placeholder="First name and last name" required /> <br />
        <input type="email" name="email" placeholder="etc@company.com" required /> <br />
        <input type="text" name="phone" placeholder="Personal phone number: mobile, home phone etc." required /> <br />
        <input type="submit" name="submit" class="button" value="Add Contact" onClick="" />
        <input type="button" name="cancel" class="button" value="Reset" />
    </fieldset>
</form> 
```

这是 PHP 部分：

```
function saveContact()
{
    $datafile = fopen ("data/data.json", "a+");
    if(!$datafile){
        echo "<script>alert('Data not existed!')</script>";
    } 
    else{
        ...
        $contact_list = $contact_list . addNewContact();
        ...
        file_put_contents("data/data.json", $contact_list);
    }

    fclose($datafile);
}

function addNewContact()
{
   $new = '{';
   $new = $new . '"fullname":"' . $_GET['fullname'] . '",';
   $new = $new . '"email":"' . $_GET['email'] . '",';
   $new = $new . '"phone":"' . $_GET['phone'] . '",';
   $new = $new . '}';
   return $new;
} 
```

看看这些代码，当人们点击添加联系人按钮时，我想调用 saveContact。如果需要，我们可以重新加载页面。仅供参考，我也在页面中使用 JQuery、HTML5。谢谢，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T02:55:51.350

有两种方法。第一种是使用典型的表单提交来完全刷新页面

```
//your_page.php

<?php 

$saveSuccess = null;
$saveMessage = null;

if($_SERVER['REQUEST_METHOD'] == 'POST') {
  // if form has been posted process data

  // you dont need the addContact function you jsut need to put it in a new array
  // and it doesnt make sense in this context so jsut do it here
  // then used json_decode and json_decode to read/save your json in
  // saveContact()
  $data = array(
    'fullname' = $_POST['fullname'],
    'email' => $_POST['email'],
    'phone' => $_POST['phone']
  );

  // always return true if you save the contact data ok or false if it fails
  if(($saveSuccess = saveContact($data)) {
     $saveMessage = 'Your submission has been saved!';     
  } else {
     $saveMessage = 'There was a problem saving your submission.';
  } 
}
?>

<!-- your other html -->

<?php if($saveSuccess !== null): ?>
   <p class="flash_message"><?php echo $saveMessage ?></p>
<?php endif; ?>

<form action="your_page.php" method="post">
    <fieldset>
        <legend>Add New Contact</legend>
        <input type="text" name="fullname" placeholder="First name and last name" required /> <br />
        <input type="email" name="email" placeholder="etc@company.com" required /> <br />
        <input type="text" name="phone" placeholder="Personal phone number: mobile, home phone etc." required /> <br />
        <input type="submit" name="submit" class="button" value="Add Contact" onClick="" />
        <input type="button" name="cancel" class="button" value="Reset" />
    </fieldset>
</form>

<!-- the rest of your HTML --> 
```

第二种方法是使用 AJAX。为此，您需要将表单处理完全分离到一个单独的文件中：

// 进程.php

```
$response = array();

if($_SERVER['REQUEST_METHOD'] == 'POST') {
  // if form has been posted process data

  // you dont need the addContact function you jsut need to put it in a new array
  // and it doesnt make sense in this context so jsut do it here
  // then used json_decode and json_decode to read/save your json in
  // saveContact()
  $data = array(
    'fullname' => $_POST['fullname'],
    'email' => $_POST['email'],
    'phone' => $_POST['phone']
  );

  // always return true if you save the contact data ok or false if it fails
  $response['status'] = saveContact($data) ? 'success' : 'error';
  $response['message'] = $response['status']
      ? 'Your submission has been saved!'
      : 'There was a problem saving your submission.';

  header('Content-type: application/json');
  echo json_encode($response);
  exit;
}
?> 
```

然后在你的 html/js

```
<form id="add_contact" action="process.php" method="post">
        <fieldset>
            <legend>Add New Contact</legend>
            <input type="text" name="fullname" placeholder="First name and last name" required /> <br />
            <input type="email" name="email" placeholder="etc@company.com" required /> <br />
            <input type="text" name="phone" placeholder="Personal phone number: mobile, home phone etc." required /> <br />
            <input id="add_contact_submit" type="submit" name="submit" class="button" value="Add Contact" onClick="" />
            <input type="button" name="cancel" class="button" value="Reset" />
        </fieldset>
    </form>
    <script type="text/javascript">
     $(function(){
         $('#add_contact_submit').click(function(e){
            e.preventDefault();  
            $form = $(this).closest('form');

            // if you need to then wrap this ajax call in conditional logic

            $.ajax({
              url: $form.attr('action'),
              type: $form.attr('method'),
              dataType: 'json',
              success: function(responseJson) {
                 $form.before("<p>"+responseJson.message+"</p>");
              },
              error: function() {
                 $form.before("<p>There was an error processing your request.</p>");
              }
            });
         });         
     });
    </script> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-12T03:03:17.777

```
<div id="sample"></div>   
 <form>
        <fieldset>
            <legend>Add New Contact</legend>
            <input type="text" name="fullname" placeholder="First name and last name" required /> <br />
            <input type="email" name="email" placeholder="etc@company.com" required /> <br />
            <input type="text" name="phone" placeholder="Personal phone number: mobile, home phone etc." required /> <br />
            <input type="submit" name="submit" id= "submitButton" class="button" value="Add Contact" onClick="" />
            <input type="button" name="cancel" class="button" value="Reset" />
        </fieldset>
    </form>

<script>

    $(document).ready(function(){
         $("#submitButton").click(function(){
            $("#sample").load(filenameofyourfunction?the the variable you need);
         });
    });

</script> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T03:02:21.853

您不需要 javascript 来执行此操作。只需删除 onClick 并像这样编写 php`Admin.php`文件：

```
<!-- HTML STARTS-->
<?php
//If all the required fields are filled
if (!empty($GET_['fullname'])&&!empty($GET_['email'])&&!empty($GET_['name']))
{
function addNewContact()
    {
    $new = '{';
    $new .= '"fullname":"' . $_GET['fullname'] . '",';
    $new .= '"email":"' . $_GET['email'] . '",';
    $new .= '"phone":"' . $_GET['phone'] . '",';
    $new .= '}';
    return $new;
    }

function saveContact()
    {
    $datafile = fopen ("data/data.json", "a+");
    if(!$datafile){
        echo "<script>alert('Data not existed!')</script>";
        } 
    else{
        $contact_list = $contact_list . addNewContact();
        file_put_contents("data/data.json", $contact_list);
        }
    fclose($datafile);
    }

// Call the function saveContact()
saveContact();
echo "Thank you for joining us";
}
else //If the form is not submited or not all the required fields are filled

{ ?>

<form>
    <fieldset>
        <legend>Add New Contact</legend>
        <input type="text" name="fullname" placeholder="First name and last name" required /> <br />
        <input type="email" name="email" placeholder="etc@company.com" required /> <br />
        <input type="text" name="phone" placeholder="Personal phone number: mobile, home phone etc." required /> <br />
        <input type="submit" name="submit" class="button" value="Add Contact"/>
        <input type="button" name="cancel" class="button" value="Reset" />
    </fieldset>
</form>
<?php }
?>
<!-- HTML ENDS --> 
```

以为我不喜欢 PHP 位。您真的要为联系人创建文件吗？最好使用 mysql 数据库**。**此外，在该文件中添加一些中断也会很好......

其他想法，IE 不支持占位符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T16:39:48.943

```
 cell1.innerHTML="<?php echo $customerDESC; ?>";
 cell2.innerHTML="<?php echo $comm; ?>";
 cell3.innerHTML="<?php echo $expressFEE; ?>";
 cell4.innerHTML="<?php echo $totao_unit_price; ?>"; 
```

它就像一个魅力，javascript在一个php while循环中

# arrays - 在 Perl 中，如何用数组中的一个元素替换重复序列？

> ID：10116657
> 
> 赞同：0
> 
> 时间：2012-04-12T02:33:10.427
> 
> 标签：arrays, perl, duplicate-removal

我有一个我读过的字符串：

```
a+c+c+b+v+f+d+d+d+c 
```

我需要编写程序，以便它拆分`+`然后删除重复项，因此输出为：

```
acbvfdc 
```

我试过`tr///cs;`了，但我想我没有使用它对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T02:39:48.877

```
#!/usr/bin/env perl

use strict; use warnings;

my @strings = qw(
    a+c+c+b+v+f+d+d+d+c
    alpha+bravo+bravo+bravo+charlie+delta+delta+delta+echo+delta
    foo+food
    bark+ark
);

for my $s (@strings) {
    # Thanks @ikegami
    $s =~ s/ (?<![^+]) ([^+]+) \K (?: [+] \1 )+ (?![^+]) //gx;
    print "$s\n";
} 
```

输出：

```
a+c+b+v+f+d+c
阿尔法+布拉沃+查理+三角洲+回声+三角洲
美食+食物
树皮+方舟
```

现在，您可以使用拆分字符串并且没有重复序列，`split /[+]/, $s`因为[拆分](http://perldoc.perl.org/functions/split.html)的第一个参数是**模式**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T03:03:40.253

任何阅读的人请注意：这并没有直接解决 OP 的问题，尽管在我的辩护中，这个问题的措辞模棱两可。:-) 尽管如此，它还是回答了对其他人可能提出的问题的解释，所以我将保持原样。

顺序重要吗？如果没有，您可以随时尝试这样的事情：

```
use strict;
use warnings;
my $string = 'a+c+c+b+v+f+d+d+d+c';

# Extract unique 'words'
my @words = keys %{{map {$_ => 1} split /\+/, $string}};

print "$_\n" for @words; 
```

更好的是，使用 CPAN 中的 List::MoreUtils （它*确实*保留了顺序）：

```
use strict;
use warnings;
use List::MoreUtils 'uniq';

my $string = 'a+c+c+b+v+f+d+d+d+c';

# Extract unique 'words'
my @words = uniq split /\+/, $string;

print "$_\n" for @words; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T03:48:00.283

```
my $s="a+c+c+b+v+f+d+d+d+c";
$s =~ tr/+//d;
$s =~ tr/\0-\xff/\0-\xff/s;
print "$s\n"; # => acbvfdc 
```

# jquery - 在成功（）jQuery上切换背景图像

> ID：10116659
> 
> 赞同：0
> 
> 时间：2012-04-12T02:33:39.287
> 
> 标签：jquery, css, addclass

**此问题现已修复**

请参阅下面的更新 css。

我目前有：

```
$("form#FanDetail").serialize(),
                    function(){
                        $('form#FanDetail').hide(function(){
                            $('div.success').fadeIn();
                            // setup for next tab: [about]
                            $('li#about').removeClass('selected').addClass('Unselected'); // remove about bg, replace with gray bgColor
                            $('li#contact').removeClass('Unselected').addClass('selected'); // add bg, replace with red bg
                        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T15:45:44.323

`.selected`和的CSS`.Unselected`如下：

```
 #editProfileNav ul li.selected{         /* here */
        width:86px;
        height:40px;
        padding:0px;
        margin:0 1px 0 0;
        background-image:url('../img/SeleBox.png');
        float:left;
        list-style-type:none;
        list-style:none;
    }

    #editProfileNav ul li.Unselected{
        width:86px;
        height:40px;
        padding:0px;
        margin:0 1px 0 0;
        background-image:url('../img/unSeleBox.png');
        float:left;
        list-style-type:none;
        list-style:none;
    }
    /*       was originally  using this and it was overwritting above css for `.unselected`                     
    #editProfileNav ul li a{
        width:86px;
        height:40px;
        padding:0;
        margin:0 1px 0 0;
        background-image:url('../img/SeleBox.png');
        float:left;
        list-style-type:none;
        list-style:none;
    }
    */ 
```

**`#editProfileNav ul li a{}`**正在覆盖**`#editProfileNav ul li.selected{}`**CSS，因为它是 Css 文档中调用的最后一个。

# sql - HQL - 如何从第二个实体字段的一对多关系和条件中查询数据

> ID：10116670
> 
> 赞同：1
> 
> 时间：2012-04-12T02:36:27.153
> 
> 标签：sql, hibernate, entity, hql, relationship

这是我在 SQL 查询字符串中所期望的：

```
SELECT     dbo.FRIEND.FriendId, dbo.FRIEND.MemberId, dbo.FRIEND.FriendMemberId, dbo.FRIEND.DateAdded
FROM         dbo.FRIEND INNER JOIN
                      dbo.MEMBER ON dbo.FRIEND.FriendMemberId = dbo.MEMBER.MemberId
WHERE     (dbo.MEMBER.Activate = 1) 
```

这是我有关系的实体：实体朋友字段

```
@Id
@Column(name = "[FriendId]")
@GeneratedValue(strategy = GenerationType.IDENTITY)
private Long              friendId;

@Column(name = "[MemberId]")
private Long              memberId;

@OneToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)
@JoinColumn(name = "[FriendMemberId]")
private Member            friendMember;

@Column(name = "[DateAdded]")
private Date              dateAdded; 
```

实体成员字段

```
@Id
@Column(name = "[MemberId]")
@GeneratedValue(strategy = GenerationType.IDENTITY)
private Long              memberId;

@Column(name = "[Activate]", columnDefinition = "boolean default true")
private boolean           activate; 
```

这是我的 HQL 查询：

```
FROM Friend as f Left join f.Member as m WHERE f.MemberId = :memberId AND m.activate = true 
```

但我得到了错误。那么我应该如何编写 HQL 查询获取数据及其条件取决于 member.activate ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T22:50:33.930

您可以使用点符号访问子表，Hibernate 会为您处理连接。

```
SELECT FROM Friend f WHERE f.friendMember.activate = true 
```

这就是 HQL 如此出色的部分原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T02:52:11.560

您的查询有一些错字。访问字段时应使用字段名称而不是类型。

尝试这个：

```
FROM Friend as f Left join f.friendMember as m WHERE f.memberId = :memberId AND m.activate = true 
```

如果你有其他问题。请给我看日志。

# ruby-on-rails - 按数据分组 JSON？

> ID：10116676
> 
> 赞同：4
> 
> 时间：2012-04-12T02:37:17.880
> 
> 标签：ruby-on-rails, ruby, arrays, json

我有以下 JSON 数据：

```
{
  "events":
  {
      "event":
      [
          {
              "city":"Birmingham",
              "state":"AL",
              "country":"US",
              "lat":"33.5206608",
              "lng":"-86.80249",
              "status":"Delivered",
              "occured_at":"2012-04-06
14:17:00 UTC"
          },
          {
              "city":"Birmingham",
              "state":"AL",
              "country":"US",
              "lat":"33.5206608",
              "lng":"-86.80249",
              "status":"Out
For Delivery",
              "occured_at":"2012-04-06 04:44:00 UTC"
          },
          {
              "city":"Birmingham",
              "state":"AL",
              "country":"US",
              "lat":"33.5206608",
              "lng":"-86.80249",
              "status":"Arrival
Scan",
              "occured_at":"2012-04-05 19:07:00 UTC"
          },
          {
              "city":"Doraville",
              "state":"GA",
              "country":"US",
              "lat":"33.8981579",
              "lng":"-84.2832564",
              "status":"Departure
Scan",
              "occured_at":"2012-04-05 17:08:00 UTC"
          },
          {
              "city":"Doraville",
              "state":"GA",
              "country":"US",
              "lat":"33.8981579",
              "lng":"-84.2832564",
              "status":"Arrival
Scan",
              "occured_at":"2012-04-05 11:15:00 UTC"
          },
          {
              "city":"Spartanburg",
              "state":"SC",
              "country":"US",
              "lat":"34.9495672",
              "lng":"-81.9320482",
              "status":"Departure
Scan",
              "occured_at":"2012-04-05 08:42:00 UTC"
          },
          {
              "city":"Spartanburg",
              "state":"SC",
              "country":"US",
              "lat":"34.9495672",
              "lng":"-81.9320482",
              "status":"Arrival
Scan",
              "occured_at":"2012-04-05 08:21:00 UTC"
          },
          {
              "city":"Greensboro",
              "state":"NC",
              "country":"US",
              "lat":"36.0726354",
              "lng":"-79.7919754",
              "status":"Departure
Scan",
              "occured_at":"2012-04-05 04:45:00 UTC"
          },
          {
              "city":"Greensboro",
              "state":"NC",
              "country":"US",
              "lat":"36.0726354",
              "lng":"-79.7919754",
              "status":"Origin
Scan",
              "occured_at":"2012-04-05 00:11:00 UTC"
          },
          {
              "city":null,
              "state":null,
              "country":"US",
              "status":"Billing
Information Received",
              "occured_at":"2012-04-04 18:20:27 UTC"
          }
      ]
  }
} 
```

我需要做的是按城市、州和国家的组合对数据进行分组，但仍然返回每个项目的数据。

因此，例如，按“伯明翰，阿拉巴马州，美国”分组，但仍然能够用它来遍历`status`每个事件（即已交付、外送、到达扫描）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T03:25:32.643

你想要的魔法是[`Enumerable#group_by`](http://www.ruby-doc.org/core-1.9.3/Enumerable.html#method-i-group_by)：

```
require 'json'
all = JSON.parse(DATA.read)['events']['event']
all.group_by{ |h| [h['city'],h['state'],h['country']] }.each do |loc,events|
  puts "'#{loc.join(',')}': #{events.length} event#{:s if events.length!=1}"
  print "--> "
  puts events.map{ |e| e['status'] }.join(', ')
end

#=> 'Birmingham,AL,US': 3 events
#=> --> Delivered, Out For Delivery, Arrival Scan
#=> 'Doraville,GA,US': 2 events
#=> --> Departure Scan, Arrival Scan
#=> 'Spartanburg,SC,US': 2 events
#=> --> Departure Scan, Arrival Scan
#=> 'Greensboro,NC,US': 2 events
#=> --> Departure Scan, Origin Scan
#=> ',,US': 1 event
#=> --> Billing Information Received 
```

请注意，在上面，`loc`是从由 评估的块返回的三元素数组`group_by`，并且`events`是同一组中所有项目的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T02:57:28.653

您可以使用关联数组，以便您可以使用字符串作为键并使用它来访问您希望组合在一起的记录。例如，所有伯明翰事件将通过以下方式访问：

```
events.event.Birmingham[i] 
```

并且所有 Spartanburg 记录都位于通过以下方式访问的数组中：

```
events.event.Spartanburg[i] 
```

下面是您的序列化对象的部分 JSON 示例：

```
{
"events": {
    "event": {
        "Birmingham": [
            {
                "city": "Birmingham",
                "state": "AL",
                "country": "US",
                "lat": "33.5206608",
                "lng": "-86.80249",
                "status": "Delivered",
                "occured_at": "2012-04-06 14:17:00 UTC"
            },
            {
                "city": "Birmingham",
                "state": "AL",
                "country": "US",
                "lat": "33.5206608",
                "lng": "-86.80249",
                "status": "Out For Delivery",
                "occured_at": "2012-04-06 04:44:00 UTC"
            }
        ],
        "Spartanburg": [
            {
                "city":"Spartanburg",
                "state":"SC",
                "country":"US",
                "lat":"34.9495672",
                "lng":"-81.9320482",
                "status":"Departure Scan",
                "occured_at":"2012-04-05 08:42:00 UTC"
            },
            {
                "city": "Spartanburg",
                "state": "SC",
                "country": "US",
                "lat": "34.9495672",
                "lng": "-81.9320482",
                "status": "Arrival Scan",
                "occured_at": "2012-04-05 08:21:00 UTC"
            }
        ]
    }
}
} 
```

这是一个如何在 Ruby 中生成 JSON 的示例。该示例取自[Ruby 的 JSON 实现](http://flori.github.com/json/doc/index.html)：

```
puts JSON.pretty_generate([1, 2, {"a"=>3.141}, false, true, nil, 4..10]) 
```

这是该命令生成的结果 JSON：

```
[
    1,
    2,
    {
      "a": 3.141
    },
    false,
    true,
    null,
    {
      "json_class": "Range",
      "data": [
         4,
        10,
        false
      ]
    }
] 
```

这是一个部分示例，它将向您展示如何从头开始使用修改后的示例：

```
puts JSON.pretty_generate({"events"=>{"event=>{"Birmingham"=>[{"city"=>"Birmingham","state"=>"AL"},{"city"=>"Birmingham","state"=>"AL"}]},{"Spartanburg"=>[{"city"=>"Spartanburg","state"=>"GA"}]}}}) 
```

# java - 我的令牌似乎跳过了文本文件的前导空格

> ID：10116679
> 
> 赞同：0
> 
> 时间：2012-04-12T02:37:26.380
> 
> 标签：java, whitespace, token

这是我的输出：“四分和七年前......”

然而，预期的输入是：“四分和七年前……”（引号和‘四’之间有一个空格”。

如何保留前导空格？到目前为止，这是我的代码。

```
public void checkDocument(Reader in, InputStream input, Writer out) throws IOException {
Scanner sc = new Scanner(input);
TokenScanner tok=new TokenScanner(in);
Token too;
Set<String> fileCor=new HashSet<String>();
while (tok.hasNext()){
    too=tok.next();
    System.out.println(too);
    if (too.isWord()){
        if (!(dict.isWord(too.toString()))){
            int n=1;
            fileCor=corr.getCorrections(too.toString());
            List<String> sortedOptions=new LinkedList<String>(fileCor);
            Collections.sort(sortedOptions);
            System.out.println("The word: "+too.toString()+" is not in the dictionary. Please enter the number corresponding with the appropriate action:");
            System.out.println("0: Ignore and continue");
            System.out.println("1: Replace with another word");
            for (int i=0;i<sortedOptions.size();i++){
                n=n+i+1;
                System.out.println((i+2)+": Replace with \""+sortedOptions.get(i)+"\"");
                }
            int choice=getNextInt(0, n, sc);
            if (choice==0){

            }
            else if (choice==1){
                out.write(getNextString(sc).trim());
            }
            else out.write(sortedOptions.get(choice-2).trim());

        }
        else out.write(too.toString().trim());

    }
    else {
        out.write(too.toString());
    }

}
System.out.println("Document completed");

 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T02:53:50.730

[Trim()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#trim%28%29)返回字符串的副本，省略前导和尾随空格。

因此，如果您只需要删除尾随空格，请使用以下正则表达式。

```
String newstr = str.replaceAll("\\s*$",""); 
```

# jenkins - JENKINS 中的从节点主页是否有环境变量？

> ID：10116687
> 
> 赞同：8
> 
> 时间：2012-04-12T02:39:07.520
> 
> 标签：jenkins

我们知道有一个名为 JENKINS_HOME 的环境变量，所以我们可以在任何地方使用它作为 $JENKINS_HOME。但是现在当我在从节点上运行项目时，我需要使用从节点上jenkins的主目录（定义从节点时命名为“远程FS根”）作为变量。而且我发现 $JENKINS_HOME 始终是主节点上 jenkins 的主目录，即使我在从节点上运行项目。

任何人都可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-06-14T18:55:34.033

老问题，但似乎从未回答

变量并没有直接暴露在作业的环境中，但是你可以弄清楚...

默认情况下（即：您没有设置自定义工作区），

`WORKSPACE=<RemoteFS>/<JOB_NAME>`
并`JOB_NAME`包括文件夹（如果您使用它们）。

即：`WORKSPACE=/path/to/remoteFSroot/myfolder/jobname`
和`JOB_NAME=myfolder/jobname`

您可以从那里进行操作。但是，不需要将数据存储在 remoteFS 根目录中，这甚至可能是个坏主意，因为您应该能够删除所有不会影响数据的工作区。只需将其存储在另一个目录中（甚至是所有从属服务器共享的 NFS）并使用完整路径进行引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T19:09:05.747

如果您看到`JENKINS_HOME`环境变量，它只是您用于启动 Jenkins master 的脚本的副作用。你不能相信它总是可用的。

也许你可以解释为什么你认为你需要知道从属主目录？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-24T18:32:46.943

使用 Jenkins 管道插件，我检索了运行作业的从节点的远程根目录

```
run.getEnvironment(listener).get("BASE") 
```

# java - Android：让服务定期检查一些东西

> ID：10116689
> 
> 赞同：0
> 
> 时间：2012-04-12T02:39:37.113
> 
> 标签：java, android, android-service

我一直在研究服务，但我无法找到定期做某事的方法。我意识到当调用服务时，它会调用 OnCreate() 方法和 onStartMethod() 但我想要做的是每 10 分钟左右执行一个进程（可能会发生变化）。那么在哪种方法/如何使服务在特定时间间隔内执行代码？

如果我遗漏了 Android 文档中的某些内容，我深表歉意。

[编辑]

更具体地说，我想更新一些信息，看看它是否与现有信息不同——然后向用户发出任务栏**通知**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T02:44:41.343

您可能想查看 AlarmManager，这是做您想做的事的简单方法。在内存使用、电池等方面，它也比保持服务打开 10 分钟只是等待做某事更好。

[http://developer.android.com/reference/android/app/AlarmManager.html](http://developer.android.com/reference/android/app/AlarmManager.html)

# wpf - 弹出 AllowTransparency 正在杀死 WebBrowser 孩子

> ID：10116692
> 
> 赞同：2
> 
> 时间：2012-04-12T02:40:08.633
> 
> 标签：wpf, popup, browser, transparency

所以我在我的应用程序中有一个控件，我想利用弹出窗口。它有一个 WebBrowser 控件，它是它的一部分。

我注意到，每当我设置以下属性时，只有 WebBrowser 控件会在我的自定义控件上消失。

```
.AllowsTransparency = true; 
```

但是，如果我删除该属性，控件看起来正常并且功能正常。我设置该属性的唯一原因是控件使用圆角边框，并且默认情况下 Popup 控件具有黑色背景。

如果将 AllowsTransparency 属性设置为 true，则在 Window 中也存在相同的行为。

请注意，您可以在没有特殊属性的全新控件上模拟此行为。我已经在新控件和新窗口上进行了测试。

任何帮助表示赞赏。

**编辑**

当 WebBrowser 设置为 DesignMode = On 时会发生这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T17:15:35.597

WebBrowser 不是本机 WPF 控件。它实际上只是在内部创建一个 ActiveX WebBrowser 控件。不能将 HwndHost（如 WebBrowser）放入**AllowsTransparency**为 true 的 Window/Popup 中，因为这会启用分层窗口（即包括 WS_EX_LAYERED 样式）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-12T03:15:00.620

我不确定你在那里做什么。没有代码，很难说。但我的猜测是，您没有设置内部边框控件的背景。只需将此代码放入新的解决方案中，应该不会有任何问题，一切都是可见的：

```
<StackPanel >
    <Popup IsOpen="True" AllowsTransparency="True">
        <Border Padding="10" Width="250" Height="250" Opacity="1" BorderBrush="Black" BorderThickness="1" CornerRadius="3">
            <Border Background="Black">
                <StackPanel>
                    <TextBlock Foreground="White" Margin="5,25,5,5" HorizontalAlignment="Center">tata</TextBlock>
                    <Button Background="Black" Foreground="White" BorderBrush="Silver" HorizontalAlignment="Center">ok</Button>
                </StackPanel>
            </Border>
        </Border>
    </Popup>
 ...... 
```

# c++ - 分段错误 C++

> ID：10116693
> 
> 赞同：1
> 
> 时间：2012-04-12T02:40:20.427
> 
> 标签：c++, segmentation-fault

```
#include <iostream>
#include "Student.h"
#include "SortedList.h"

using namespace std;

#define BOUNDS 100

int main() {

    SortedList *list = new SortedList();  // points to the sorted list object
    Student *create[BOUNDS];  // array to hold 100 student objects
    int num = 100000;   // holds different ID numbers

    // fills an array with 100 students of various ID numbers
    for (int i = 0; i < BOUNDS; i++) {
        create[i] = new Student(num);
        num += 10;
    }

    // insert all students into the sorted list
    for (int i = 0; i < BOUNDS; i++)
    list->insert(create[i]);

    // removes each student from the list
    num = 100000;
    for (int i = 0; i < BOUNDS; i++) {
    list->remove(num);
    num += 10;
    }

    delete list;
    return 0;
} 
```

我在前面的代码中遇到了段错误。任何关于为什么会这样或如何解决它的见解将不胜感激。`delete list;`seg故障肯定是线路引起的

更新 1：这是我的 SortedList 析构函数

```
/*
 * Destructs this sorted list object
 */
SortedList::~SortedList() {
    freeList(head);
}

/*
 * Traverses throught the linked list and deallocates each node
 */
void SortedList::freeList(Listnode *L) {
    Listnode *tmp = L;  //holds the node to be deleted

    //traverses the list
    while (tmp != NULL) {
        Listnode *next = tmp->next; //holds the value of the next node

    //delete previous node
    delete tmp->student;
    delete tmp->next;
    delete tmp;

    //sets the next node to the node to be deleted
    tmp = next;
    }
    //delete header node
    delete L;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T02:42:21.247

好吧，我们看不到`SortedList`or `Student`，我猜问题出在其中之一。我注意到`num`在创建循环之后永远不会重置为其原始值，这意味着大多数`remove`调用将被传递一个属于 no 的 id `Student`；也许那个案子会失败。或者可能只是在`insert`or`remove`方法中存在错误 - 或者构造函数或析构函数，就此而言。它完全悬而未决。

编辑：正如其他人指出的那样，析构函数在删除后使用指针；这可能是唯一的错误来源，或者我们还没有看到的代码中很容易出现更多错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T02:54:55.237

在`freelist()`，你删除`tmp->next`，然后设置`tmp = tmp->next`。现在`tmp`有一个无效的指针。您需要重组代码，以便在访问其成员之前不释放指针。

虽然我讨厌为人们做作业，但这是我的解决方案：

```
/*
 * Traverses throught the linked list and deallocates each node
 */
void SortedList::freeList(Listnode *L) {
    if(L == NULL) return;
    freeList(L->next);
    delete L->student;
    delete L;
} 
```

这使用 O(n) 堆栈空间进行删除，但我个人发现它比循环更清晰。通过删除对`delete tmp->next`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T02:47:37.607

```
 // removes each student from the list
    for (int i = 0; i < BOUNDS; i++) {
    list->remove(num);
    num += 10;
    } 
```

看起来很有趣......这究竟是如何工作的？如果此时代码中的 num 为 100000 + BOUNDS*10 （因为在为您创建的每个学生添加 10 后它永远不会更改）。您进行的每个删除调用都不会通过他们的 ID 删除学生（因为调用的 id 是 100000 + BOUNDS*10 + i*10）。是否打算通过 ID 删除它们，如果是这样，您应该考虑在执行删除循环之前将 num 重置为 100000。

澄清这如何导致段错误：如果您的删除函数没有适当的边界检查，它可能会超出内存寻找要删除的 id。

更新了析构函数问题：

```
void SortedList::freeList(Listnode *L) {
    Listnode *tmp = L;  //holds the node to be deleted

    //traverses the list
    while (tmp != NULL) {
        Listnode *next = tmp->next; //holds the value of the next node

    //delete previous node
    delete tmp->student;
    delete tmp->next;
    delete tmp;

    //sets the next node to the node to be deleted
    //**********
    //Check here, you deleted next, but the assigned it to temp.  Tmp isn't null, but           
    //it is however, no longer your memory (since you deleted it)
    //**********
    tmp = next;
    }
    //delete header node
    delete L;
} 
```

# database - 如何在 Informix 中创建影子表

> ID：10116697
> 
> 赞同：4
> 
> 时间：2012-04-12T02:41:11.230
> 
> 标签：database, stored-procedures, informix

我正在开发一个审计跟踪模块，该模块需要我从原始表中创建一个巨大的影子表列表。我正在考虑编写一个可以从另一个表生成影子表的存储过程。该表可以是任何表，它可以是包含 3 个任意数据类型字段的 table_A，或者包含 10 个任意数据类型字段的 table_B，并且可以基于传入存储过程的参数。

我知道我可以从 syscolumns 和 systables 中检索特定 table_A 可用的字段列表，如下所示：

```
select * from syscolumns where tabid = (select tabid from systables where tabname='table_A') 
```

该语句将返回一个字段列表，假设为 field_A，然后我将重命名此 field_A 以创建 2 个新字段，即 pre_field_A 和 post_field_A，然后使用这 2 个新字段创建 shadow_table_A 的影子表。将此概念应用于其他领域。不必担心字段的数据类型，因为这些信息已经存在于 syscolumns 中，我可以将其复制到影子表中。

我目前被困在如何存储从上述语句返回的值列表，因为通常任何表都包含多个字段。可以使用数组完成吗？或为审计跟踪目的创建影子表的任何替代解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T03:46:13.027

您的查询将起作用，但使用连接可能更惯用：

```
SELECT *
  FROM "informix".systables AS t
  JOIN "informix".syscolumns AS c ON t.tabid = c.tabid
 WHERE t.tabname = 'table_a'; 
```

另外，请注意，`table_A`如果您在环境中设置了 DELIMIDENT 并且创建了名称用双引号括起来的表时创建了表，则系统目录将仅包含大小写混合。正常情况下，系统目录中的表名全部小写；对于列名也是如此。

但是，这与您的问题无关。处理所有荣耀的用户定义类型是痛苦的。但是，如果您处理的是普通数据库，当然可以这样工作，尽管使用 DB-Schema ( `dbschema`) 生成表的模式，然后捕获它可能更容易。您实际上可以通过使用 SYSTEM 语句的存储过程来做到这一点，但我可能会在存储过程之外进行。这确实取决于您还需要做什么。每个字段的前映像和后映像的成本可能适中。

如果您有 IBM Informix Dynamic Server 11.70，您可以动态创建 CREATE {audit} TABLE 语句，然后执行该语句。因此，您将在存储过程中使用 FOREACH 循环来构建查询以依次添加每一列，然后执行该语句以创建审计表。您也必须解码类型。您也可以/应该为此使用程序。我假设这`tabname`是一个传递给存储过程的变量，并且`c_colno`, `c_colname`, 和`c_typename`是局部变量（原样`cts`，'create table statement' 的缩写，和`pad`）：

```
LET cts = 'CREATE TABLE ' || tabname || '(';
LET pad = '';
FOREACH SELECT c.colno, c.colname, type_name(c.coltype, c.collength)
          INTO c_colno, c_colname, c_typename
          FROM "informix".systables AS t
          JOIN "informix".syscolumns AS c
            ON t.tabid = c.tabid
         WHERE t.tabname = tabname
         ORDER BY c.colno
    LET cts = cts || pad || 'pre_'  || c_colname || ' ' || c_coltype;
    LET cts = cts || ',' || 'post_' || c_colname || ' ' || c_coltype;
    LET pad = ',';
END FOREACH;
LET cts = cts || ');'; 
```

您可能想要处理 NOT NULL 和主键约束以及各种其他事情，但这为您提供了基础知识。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-21T17:37:46.923

除了[JonathanLeffler](https://stackoverflow.com/users/15168/jonathan-leffler)的[回答](https://stackoverflow.com/a/10117108/15168)之外，还有以下`type_name`程序：

```
 CREATE PROCEDURE type_name(coltype INTEGER, colsize INTEGER)
            RETURNING VARCHAR(128);
            DEFINE toRet                    VARCHAR(128);

            DEFINE size_5                   VARCHAR(5);
            DEFINE decimal_p, decimal_s     INTEGER;
            DEFINE decimal_t                VARCHAR(16);
            DEFINE varchar_m, varchar_n     INTEGER;
            DEFINE varchar_t                VARCHAR(16);

            LET size_5 = '(' || TRIM(CAST(colsize AS CHAR(5))) || ')'; 
            -- Precision
            LET decimal_p = TRUNC(colsize/256);
            -- Scale
            LET decimal_s = colsize - 256 * decimal_p;
            -- Decimal total
            LET decimal_t = '(' || TRIM(CAST(decimal_p as VARCHAR(8))) || ',' || TRIM(CAST(decimal_s as VARCHAR(8))) || ')';

            -- VARCHAR(M,N)
            LET varchar_n = decimal_p;
            LET varchar_m = decimal_s;
            LET varchar_t = '(' || TRIM(CAST(varchar_m as VARCHAR(8))) || ',' || TRIM(CAST(varchar_n as VARCHAR(8))) || ')';

            SELECT
                CASE coltype
                    WHEN 0   THEN 'char' || size_5 
                    WHEN 1   THEN 'smallint'
                    WHEN 2   THEN 'integer'
                    WHEN 3   THEN 'float'
                    WHEN 4   THEN 'smallfloat'
                    WHEN 5   THEN 'decimal' || decimal_t
                    WHEN 6   THEN 'serial'
                    WHEN 7   THEN 'date'
                    WHEN 8   THEN 'money' || decimal_t
                    WHEN 9   THEN 'null'
                    WHEN 10  THEN 'DATETIME YEAR TO FRACTION(3)'
                    WHEN 11  THEN 'byte'
                    WHEN 12  THEN 'TEXT'
                    WHEN 13  THEN 'VARCHAR' || varchar_t
                    WHEN 14  THEN 'INTERVAL'
                    WHEN 15  THEN 'NCHAR' || size_5
                    WHEN 16  THEN 'NVARCHAR' || varchar_t
                    WHEN 17  THEN 'INT8'
                    WHEN 18  THEN 'SERIAL8'
                    WHEN 19  THEN 'SET'
                    WHEN 20  THEN 'MULTISET'
                    WHEN 21  THEN 'LIST'
                    WHEN 22  THEN 'ROW'
                    WHEN 23  THEN 'COLLECTION'
                    WHEN 24  THEN 'ROWDEF'
                    WHEN 40  THEN 'LVARCHAR'  || size_5 
                    WHEN 256 THEN 'CHAR' || size_5 || ' NOT NULL'
                    WHEN 257 THEN 'SMALLINT NOT NULL'
                    WHEN 258 THEN 'INTEGER NOT NULL'
                    WHEN 259 THEN 'FLOAT NOT NULL'
                    WHEN 260 THEN 'SMALLFLOAT NOT NULL'
                    WHEN 261 THEN 'DECIMAL' || decimal_t || ' NOT NULL'
                    WHEN 262 THEN 'SERIAL NOT NULL'
                    WHEN 263 THEN 'DATE NOT NULL'
                    WHEN 264 THEN 'MONEY' || decimal_t || ' NOT NULL'
                    WHEN 265 THEN 'null NOT NULL'
                    WHEN 266 THEN 'DATETIME YEAR TO FRACTION(3) NOT NULL'
                    WHEN 267 THEN 'BYTE NOT NULL'
                    WHEN 268 THEN 'TEXT NOT NULL'
                    WHEN 269 THEN 'VARCHAR' || varchar_t || ' NOT NULL'
                    WHEN 270 THEN 'INTERVAL NOT NULL'
                    WHEN 271 THEN 'nchar(' || size_5 || ') NOT NULL'
                    WHEN 272 THEN 'nvarchar' || varchar_t || ' NOT NULL'
                    WHEN 273 THEN 'int8 NOT NULL'
                    WHEN 274 THEN 'serial8 NOT NULL'
                    WHEN 275 THEN 'set NOT NULL'
                    WHEN 276 THEN 'multiset NOT NULL'
                    WHEN 277 THEN 'list NOT NULL'
                    WHEN 278 THEN 'row NOT NULL'
                    WHEN 279 THEN 'collection NOT NULL'
                    WHEN 280 THEN 'rowdef NOT NULL'
                    WHEN 296 THEN 'LVARCHAR'  || varchar_t || ' NOT NULL'
                    ELSE 'ERROR'
                END datatype
            INTO toRet
            FROM systables
            WHERE tabid = 1;
            IF toRet = 'ERROR' THEN
               RAISE EXCEPTION -746, 0, 'Unknow datatype ' || coltype;
            END IF

            RETURN toRet;
    END PROCEDURE; 
```

归功于[此](http://www.dbforums.com/informix/1619539-translate-column-data-type.html)。

# c++ - 指向抽象类的指针数组

> ID：10116698
> 
> 赞同：0
> 
> 时间：2012-04-12T02:41:12.693
> 
> 标签：c++, arrays, pointers, abstract-class

我在将指针分配给程序中的指针数组时遇到问题。我进行了设置，以便该函数接受一个指针作为参数，并且我尝试将该指针分配给数组的索引。它编译得很好，但它没有运行，我得到一个段错误。

错误来自 EventHeap::push，函数的第一行。

你们有什么想法吗？

我很感激帮助。

编辑：我将在下面发布具体问题，但我会留下代码以防万一：D

segfault 发生在 push 函数中，第一行。

```
void ModemSimV2::nextCall( int delta ){
    static int nextCallTime = 0;
    static int userNum = 0;

    Event *e;
    e = new Dialin( userNum++, nextCallTime ); 
    eventSet->push( e );
    nextCallTime += delta;
}

//push function takes a pointer to an Event and puts into the array
void EventHeap::push( Event *e ) {

    array[size] = e;
    reIndex( size );
    size++;
} 
```

资源：

```
// ModemSimV2.cpp
//
// @author David Harrigan
//         dtk24
//
// 4/10/2012
//
#include "ModemSimV2.h"
//xvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvx
//++++++++++++++++++++++++++ ModemSimV2 +++++++++++++++++++++++++++

// Constructor for ModemSim.
ModemSimV2::ModemSimV2( int modems, double avgLen, int callIntrvl )
: freeModems( modems ), avgCallLen( avgLen ),
freqOfCalls( callIntrvl ), r( (int) time( 0 ) )
{
    nextCall( freqOfCalls );  // Schedule first call
}

// Place a new DIAL_IN event into the event queue.
// Then advance the time when next DIAL_IN event will occur.
// In practice, we would use a random number to set the time.
void ModemSimV2::nextCall( int delta ){
    static int nextCallTime = 0;
    static int userNum = 0;

    Event *e;
    e = new Dialin( userNum++, nextCallTime ); 
    eventSet->push( e );
    nextCallTime += delta;
}

// Run the simulation until stopping time occurs.
void ModemSimV2::runSim( int stoppingTime ){
    Event *e;
    int i = 0;
    while( ! eventSet->empty( ) ){
        e = eventSet->pop();
        if ( e->getTime() > stoppingTime )
            break;

        if ( e->process( *this ) )
            eventSet->push( e );

        nextCall( freqOfCalls );
        i++;
    }
}
//xvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvx
//+++++++++++++++++++++++++++++ Event +++++++++++++++++++++++++++++

//Constructor for event
Event::Event(){

}

//copy constructor
Event::Event( const Event &e ) {
    *this = e;
}

//virtual destructor
Event::~Event( ) {

}

//operator overloads
bool Event::operator > ( const Event & rhs ) const { 
    return time > rhs.time; 
}

bool Event::operator < ( const Event & rhs ) const { 
    return time < rhs.time; 
}

bool Event::operator <= ( const Event & rhs ) const { 
    return time < rhs.time; 
}

bool Event::operator != ( const Event & rhs ) const { 
    return time != rhs.time; 
}

//xvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvx
//+++++++++++++++++++++++++++++ Dialin +++++++++++++++++++++++++++++

//inhereited constructor 
Dialin::Dialin (int name, int tm )
: time( tm ), who( name ) { 
    return;
}

//copy constructor
Dialin::Dialin ( const Dialin &d ) {
    *this = d;
}

//destructor
Dialin::~Dialin( ) {

}

//bool process - unfinished
bool Dialin::process( ModemSimV2 &m ) {
    cout << "User " << who << " dials in at time "
    << time << endl;

    if( m.freeModems > 0 ) {
        m.freeModems--;
        int howLong = r.negExp( m.avgCallLen );
        cout << " and connects for " << howLong <<
        " minutes " << endl;
        time += howLong;
        return true;
    }
    else {
        cout << "but gets busy signal" << endl;
        return false;
    }
}

//xvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvx
//++++++++++++++++++++++++++++ Hangup +++++++++++++++++++++++++++++

//inhereited constructor 
Hangup::Hangup (int name, int tm )
: time( tm ), who( name ) { 
    return;
}

//copy constructor
Hangup::Hangup ( const Hangup &h ) {
    *this = h;
}

//destructor
Hangup::~Hangup ( ) {

}

//bool process - unfinished
bool Hangup::process( ModemSimV2 &m ) {

    m.freeModems++;

    cout << "User " << who << " hangs up at time "
    << time << endl;

    return false;

}
//xvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvx
//++++++++++++++++++++++++++ EventHeap ++++++++++++++++++++++++++++

//EventHeap constructor
EventHeap::EventHeap( ) {

    array = new Event*[1];
    size = 0;
}

//constructor
EventHeap::EventHeap( int numVals ) { 

    array = new Event*[numVals];
    size = 0;
}

//push function takes a pointer to an Event and puts into the array
void EventHeap::push( Event *e ) {

    array[size] = e;
    reIndex( size );
    size++;
}

//since this is a min-heap, it removes the smallest value in the array
Event* EventHeap::pop( ) {

    Event *e = array[0];
    array[0] = array[size - 1];
    size--;
    if( !empty( ) )
        buildHeap(0);

    return e;
}

//builds the heap once popped, to reorder the array
//
void EventHeap::buildHeap( int index ) {

    int min;

    if (getRight(index) >= size) {
        if (getLeft(index) >= size)
            return;
        else
            min = getLeft(index);
    } 
    else {
        if (array[getLeft(index)] <= array[getRight(index)])
            min = getLeft(index);
        else
            min = getRight(index);
    }
    if (array[index] != 0 && array[index] > array[min]) {
        Event *temp( array[min] );
        array[min] = array[index];
        array[index] = temp;
        buildHeap(min);
    }
}

//similar to buildHeap, but is called when a value is pushed to the array
//
void EventHeap::reIndex( int hole ) {

    while( array[hole] != NULL && array[hole] <  array[getParent( hole )] ) {
        int pIndex = getParent( hole );
        Event *temp( array[hole] );
        array[hole] = array[pIndex];
        array[pIndex] = temp;
        hole = pIndex;
    }
}

//returns true if empty
bool EventHeap::empty() const {
    return ( size == 0 );
}

//returns the left child
int EventHeap::getLeft( int index ) const {
    return ( index * 2 ) + 1;
}

//returns the right child
int EventHeap::getRight( int index ) const {
    return ( index * 2 ) + 2;
}

//returns the parent
int EventHeap::getParent( int index ) const {
    return ( index - 1 ) / 2;
} 
```

标题：

```
// ModemSimV2.h
//
// @author David Harrigan
//         dtk24
//
// 4/10/2012
//

#ifndef MODEM_SIM_V2_H
#define MODEM_SIM_V2_H

#include <queue>
#include <vector>
#include <functional>  // for greater()
#include <climits>     // for INT_MAX
#include <iostream>
#include "random.h"

using namespace std;
//xvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvx
//++++++++++++++++++++++++++ ModemSimV2 +++++++++++++++++++++++++++
class EventHeap;

class ModemSimV2 {

public:
    ModemSimV2( int modems, double avgLen, int callIntrvl );
    // Add a call to eventSet at the current time,
    // and schedule one for delta in the future.
    void nextCall( int delta );

    // Run the simulation
    void runSim( int stoppingTime );// = INT_MAX );

    friend class Event;
    friend class Dialin;
    friend class Hangup;

private:
    Random r;                       // A random source
    EventHeap *eventSet;                    // Pending events

    // Basic parameters of the simulation
    int freeModems;                 // Number of modems unused
    const double avgCallLen;        // Length of a call
    const int freqOfCalls;          // Interval between calls
};

//xvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvx
//+++++++++++++++++++++++++++++ Event +++++++++++++++++++++++++++++

class Event{

protected:
    int who;        // the number of the user
    int time;       // when the event will occur

    friend class ModemSimV2;

    Random r;

public:
    Event( );
    Event( const Event &e );
    virtual ~Event( );

    bool operator > ( const Event & rhs ) const;
    bool operator < ( const Event & rhs ) const;
    bool operator <= ( const Event & rhs ) const;
    bool operator != ( const Event & rhs ) const;

    int getTime( ) { return time; };

    virtual bool process( ModemSimV2 &m ) = 0;
};

//xvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvx
//+++++++++++++++++++++++++++++ Dialin ++++++++++++++++++++++++++++
 class Dialin : public Event {
 public:
     Dialin( int name = 0, int tm = 0 );
     Dialin( const Dialin &d );
     ~Dialin( );

     virtual bool process( ModemSimV2 &m );

 private:
     int who;
     int time;
 };

//xvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvx
//+++++++++++++++++++++++++++++ Hangup ++++++++++++++++++++++++++++
class Hangup : public Event {
public: 
    Hangup( int name = 0, int tm = 0 );
    Hangup( const Hangup &h );
    ~Hangup( );

    virtual bool process( ModemSimV2 &m );

private:
    int who;
    int time;
};

//xvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvxvx
//++++++++++++++++++++++++++ EventHeap ++++++++++++++++++++++++++++

class EventHeap{

public:
    EventHeap();
    EventHeap( int numIndex );

    bool empty( ) const;
    const int & findMin( ) const;

    void push( Event *x );
    Event * pop();

private:
    int size;         // Number of elements in heap
    Event **array;            // The heap array

    void buildHeap( int index );
    void reIndex( int hole );
    int getLeft( int index ) const;
    int getRight( int index )const;
    int getParent( int index )const;
};
#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T03:09:08.543

这是一个线索：

```
e = new Dialin( userNum++, nextCallTime ); 
eventSet->push( *e ); 
```

您正在分配一个新对象并推送它的副本。

另一个线索：

```
// Constructor for ModemSim.
ModemSimV2::ModemSimV2( int modems, double avgLen, int callIntrvl )
: 
  r( (int) time( 0 ) ),
  // what about eventSet?
  freeModems( modems ),
  avgCallLen( avgLen ),
  freqOfCalls( callIntrvl ), 
{   
    nextCall( freqOfCalls );  // Schedule first call
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T04:40:06.130

`eventSet`被声明为`EventHeap*`in `ModemSimV2`，但是您不会在构造函数中对其进行初始化。因此，当您第一次使用它时，会发生段错误。

```
ModemSimV2::ModemSimV2( int modems, double avgLen, int callIntrvl )
: freeModems( modems ), avgCallLen( avgLen ),
freqOfCalls( callIntrvl ), r( (int) time( 0 ) )
{
    eventSet = new EventHeap(); // <-- missing this initialization 

    nextCall( freqOfCalls );  // Schedule first call
} 
```

此外，为了避免内存泄漏，您需要在 ModemSimV2 和 EventHeap 中使用析构函数来释放您分配的内存。

# dojox.charting - Dojo Charting MoveSlice，将事件从悬停更改为单击

> ID：10116701
> 
> 赞同：1
> 
> 时间：2012-04-12T02:41:34.390
> 
> 标签：dojox.charting

我正在使用 Dojo 创建饼图，并希望使用 MoveSlice 操作，但希望它发生在 onclick 而不是 onhover 上。有没有简单的方法来做到这一点？

MoveSlice 示例：[http ://user.sitepen.com/~dwalsh/dojo-charting.html#piechart](http://user.sitepen.com/~dwalsh/dojo-charting.html#piechart)

MoveSlice js： http: [//support.freenas.org/browser/freenas/branches/dojo17/gui/dojango/dojo-media/release/1.7.0/dojox/charting/action2d/MoveSlice.js ?rev=8478](http://support.freenas.org/browser/freenas/branches/dojo17/gui/dojango/dojo-media/release/1.7.0/dojox/charting/action2d/MoveSlice.js?rev=8478)

谢谢

# ruby-on-rails - 如何使徽标可互换，Ruby on Rails

> ID：10116702
> 
> 赞同：0
> 
> 时间：2012-04-12T02:41:38.820
> 
> 标签：ruby-on-rails, ruby

我为一家本地公司创建了一个定制的 CMS Rails 应用程序，并要求允许徽标在假期期间可互换。例如，他们谈到为每个假期选择不同的标志。

我正在成像一个看起来像这样的单选按钮

*   普通的
*   圣诞节
*   圣诞节1
*   复活节
*   复活节1
*   感恩
*   美国独立日
*   ETC

那么，有没有人知道我将如何实现这一点，或者有任何经验？

我有一个管理面板，我正在考虑添加一个包含上述单选按钮的部分，并根据设置的变量更改值并显示图像文件夹中的不同徽标，但不确定是否是要走的路线。

谢谢你的帮助。

**编辑：**听起来我的想法是正确的，我可以从你的专家那里得到一些关于你将如何实施这个的建议吗？我正在考虑有一个徽标模型，他们可以将图像上传到其中，但是我将如何将其实现到视图中以允许他们选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T05:05:45.110

不要混淆您将存储在数据库中的两个不同的东西：标志列表和当前标志的设置。前者由模型和表格组成。后者可能是指向该表中正确条目的简单外键。

您还应该有一个新的控制器，因为您计划让他们管理徽标列表。要上传图片，请查看有全面示例的[Carrierwave 。](https://github.com/jnicklas/carrierwave)

# c# - 从调用计算 taxAmount 的方法中只能得到 $0

> ID：10116706
> 
> 赞同：2
> 
> 时间：2012-04-12T02:41:48.297
> 
> 标签：c#, arrays, methods

我在以下调用时遇到问题，特别是最后一个组件：

```
Console.WriteLine("Taxpayer # {0} SSN: {1}, Income is {2:c}, Tax is {3:c}", i + 1, taxArray[i].SSN, taxArray[i].grossIncome, taxRates.CalculateTax(taxArray[i].grossIncome)); 
```

我正在调用 Rates 类中的 CalculateTax 方法，该方法在 main 中作为 taxRates 启动。

这是CalculateTax方法

```
public int CalculateTax(int income)
    {

        int taxOwed;
        //  If income is less than the limit then return the tax as income times low rate.
        if (income < incLimit){
            taxOwed = Convert.ToInt32(income * lowTaxRate); }
        //  If income is greater than or equal to the limit then return the tax as income times high rate.
        else if(income >= incLimit) {
            taxOwed = Convert.ToInt32(income * highTaxRate);}
        else taxOwed = 0;
        return taxOwed;
    } 
```

incLimit、lowTaxRate 和 highTaxRate 是预先设置的

任何想法为什么它总是出现为 0。我什至向该方法发送了一个像 50000 这样的数字，但仍然返回 0。

我可以单独使用该方法来获得一个值，所以它是别的东西，这里是代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Assignment5_2
{
public class Rates
{
    // Create a class named rates that has the following data members: 
    int incLimit;
    double lowTaxRate;
    double highTaxRate;

    // use read-only accessor
    public int IncomeLimit
    { get { return incLimit; } }
    public double LowTaxRate
    { get { return lowTaxRate; } }
    public double HighTaxRate
    { get { return highTaxRate; } }

    //A class constructor that assigns default values 
    public void assignRates()
    {
        //int limit = 30000;
        //double lowRate = .15;
        //double highRate = .28;
        incLimit = 30000;
        lowTaxRate = .15;
        highTaxRate = .28;
    }
    //A class constructor that takes three parameters to assign input values for limit, low rate and high rate.
    public void assignRates(int lim, double low, double high)
    {
        incLimit = lim;
        lowTaxRate = low;
        highTaxRate = high;
    }
    //  A CalculateTax method that takes an income parameter and computes the tax as follows:
    public int CalculateTax(int income)
    {

        int taxOwed;
        //  If income is less than the limit then return the tax as income times low rate.
        if (income < incLimit)
            taxOwed = Convert.ToInt32(income * lowTaxRate); 
        //  If income is greater than or equal to the limit then return the tax as income times high rate.
        else 
            taxOwed = Convert.ToInt32(income * highTaxRate);
        Console.WriteLine(taxOwed);
        return taxOwed;
    }

}  //end class Rates

// Create a class named Taxpayer that has the following data members:
public class Taxpayer : IComparable
{
    //Use get and set accessors.
    string SSN
    { set; get; }
    int grossIncome
    { set; get; }
    int taxOwed
    { set; get; }

    int IComparable.CompareTo(Object o)
    {
        int returnVal;
        Taxpayer temp = (Taxpayer)o;
        if (this.taxOwed > temp.taxOwed)
            returnVal = 1;
        else if (this.taxOwed < temp.taxOwed)
            returnVal = -1;
        else returnVal = 0;

        return returnVal;

    }  // End IComparable.CompareTo

    public static void GetRates()
    {
        //  Local method data members for income limit, low rate and high rate.
        int incLimit;
        double lowRate;
        double highRate;
        string userInput;
        Rates rates = new Rates();
        //  Prompt the user to enter a selection for either default settings or user input of settings.
        Console.Write("Would you like the default values (D) or would you like to enter the values (E)?:  ");
        /*   If the user selects default the default values you will instantiate a rates object using the default constructor
        * and set the Taxpayer class data member for tax equal to the value returned from calling the rates object CalculateTax method.*/
        userInput = (Console.ReadLine());
        if (userInput == "D" || userInput == "d")
        {

            rates.assignRates();
        } // end if
        /*  If the user selects to enter the rates data then prompt the user to enter values for income limit, low rate and high rate, 
         * instantiate a rates object using the three-argument constructor passing those three entries as the constructor arguments and 
         * set the Taxpayer class data member for tax equal to the valuereturned from calling the rates object CalculateTax method. */
        else if (userInput == "E" || userInput == "e")
        {
            Console.Write("Please enter the income limit: ");
            incLimit = Convert.ToInt32(Console.ReadLine());
            Console.Write("Please enter the low rate: ");
            lowRate = Convert.ToDouble(Console.ReadLine());
            Console.Write("Please enter the high rate: ");
            highRate = Convert.ToDouble(Console.ReadLine());
            //Rates rates = new Rates();
            rates.assignRates(incLimit, lowRate, highRate);
        }
        else Console.WriteLine("You made an incorrect choice");
    }

    static void Main(string[] args)
    {

        Taxpayer[] taxArray = new Taxpayer[5];
        Rates taxRates = new Rates();
        //  Implement a for-loop that will prompt the user to enter the Social Security Number and gross income.
        for (int x = 0; x < taxArray.Length; ++x)
        {
            taxArray[x] = new Taxpayer();
            Console.Write("Please enter the Social Security Number for taxpayer {0}:  ", x + 1);
            taxArray[x].SSN = Console.ReadLine();

            Console.Write("Please enter the gross income for taxpayer {0}:  ", x + 1);
            taxArray[x].grossIncome = Convert.ToInt32(Console.ReadLine());

        }

        Taxpayer.GetRates();

        //  Implement a for-loop that will display each object as formatted taxpayer SSN, income and calculated tax.
        for (int i = 0; i < taxArray.Length; ++i)
        {
            Console.WriteLine("Taxpayer # {0} SSN: {1}, Income is {2:c}, Tax is {3:c}", i + 1, taxArray[i].SSN, taxArray[i].grossIncome, taxRates.CalculateTax(50000));//taxRates.CalculateTax(taxArray[i].grossIncome));

        } // end for 
        //  Implement a for-loop that will sort the five objects in order by the amount of tax owed 
        Array.Sort(taxArray);
        Console.WriteLine("Sorted by tax owed");
        for (int i = 0; i < taxArray.Length; ++i)
        {
            Console.WriteLine("Taxpayer # {0} SSN: {1}, Income is {2:c}, Tax is {3:c}", i + 1, taxArray[i].SSN, taxArray[i].grossIncome, taxRates.CalculateTax(taxArray[i].grossIncome));

        }
    }  //end main

} //  end Taxpayer class

}  //end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:44:43.277

您的问题在于您对 Rates.assignRates() 方法的使用。您只能从静态 Taxpayer.GetRates() 方法调用它。此方法作用于本地 Rates 对象，然后将填充的对象扔掉。您可能希望更改 Taxpayer.GetRates() 以返回 Rates 对象，返回内部创建（和填充）的 rates 变量：

```
public static Rates GetRates() { ... return rates; } 
```

然后在 Main() 中，删除对 Taxpayer.GetRates() 的现有调用并更改声明 taxRates 变量的行，如下所示：

```
Rates taxRates = Taxpayer.GetRates(); 
```

另请注意，您还应该以某种方式处理由于输入错误/丢失而导致的错误情况，但您现在似乎没有这样做，所以除了让您返回填充的 Rates 对象之外，我没有包含任何功能更改.

此外，您可能需要考虑将 Rates 类设为静态，因为您似乎始终只使用它的一个实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T02:50:40.990

不可复制。使用下面的简单程序，我得到有效的非零结果（`900`使用我的值）：

```
internal class Program {
    private static int incLimit = 30000;
    private static float lowTaxRate = 0.18F;
    private static float highTaxRate = 0.30F;

    private static void Main(string[] args) {
        var result = CalculateTax(5000);
    }

    public static int CalculateTax(int income) {
        int taxOwed;
        // If income is less than the limit then return the tax
        //   as income times low rate.
        if (income < incLimit) {
            taxOwed = Convert.ToInt32(income * lowTaxRate);
        }
        // If income is greater than or equal to the limit then
        //   return the tax as income times high rate.
        else if (income >= incLimit) {
            taxOwed = Convert.ToInt32(income * highTaxRate);
        }
        else taxOwed = 0;

        return taxOwed;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T02:51:16.950

您的最后一个决策点将`else taxOwed = 0;`永远不会执行，因此不需要它。我已经运行了您的代码，如下所示，一切正常。**问题必须是传递给方法的参数为零，或者您没有像您认为的那样设置值。**

```
void Main()
{
    var result = CalculateTax(40000);
    Console.WriteLine(result);
}

public int CalculateTax(int income)
{
    var incLimit = 50000;
    var lowTaxRate = 0.10;
    var highTaxRate = 0.25;
    int taxOwed;

    if (income < incLimit){
        taxOwed = Convert.ToInt32(income * lowTaxRate); }
    else if(income >= incLimit) {
        taxOwed = Convert.ToInt32(income * highTaxRate);}
    return taxOwed;
} 
```

* * *

## 更新

现在您发布了完整的代码，您的问题是您需要更改静态`GetRates()`方法以返回费率，正如[Clark](https://stackoverflow.com/a/10125993/452274)提到的那样。该静态方法是唯一的地方调用`rates.assignRates()`，并且那些分配的费率仅适用`rates`于该方法中包含的特定实例，而其他任何地方都没有。所以更改`GetRates()`为返回`rates`实例如下：

```
 public static Rates GetRates()
 {
    ...
    Rates rates = new Rates();
    ...
    return rates;
 } 
```

然后改main方法如下：

```
static void Main(string[] args)
{
    Taxpayer[] taxArray = new Taxpayer[5];
    // Implement a for-loop that will prompt the user to enter
    // the Social Security Number and gross income.

    ...

    Rates taxRates = Taxpayer.GetRates();

    // Implement a for-loop that will display each object as formatted 
    // taxpayer SSN, income and calculated tax.
    for (int i = 0; i < taxArray.Length; ++i)
    {
        Console.WriteLine(
            "Taxpayer # {0} SSN: {1}, Income is {2:c}, Tax is {3:c}",
            i + 1, 
            taxArray[i].SSN, 
            taxArray[i].grossIncome,
            taxRates.CalculateTax(50000));

    } 
    ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T02:48:07.060

我会在您的方法中添加调试语句以确认 lowTaxRate 和 hightTaxRate 不为零/空。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T02:44:56.907

你确定 lowTaxRate 和 highTaxRate 没有设置为 0，因为任何乘以 0 都是 0。放置一些调试器/消息框来检查。

# javascript - 我可以控制 javascript / jQuery 事件触发的顺序吗？

> ID：10116709
> 
> 赞同：0
> 
> 时间：2012-04-12T02:41:51.500
> 
> 标签：javascript, jquery, asp.net, webforms

**背景**

我有一个带有网格的 asp.net webform，当用户更新该网格中的文本框时，onchange 事件会启动一个 WebMethod 调用并更新其余更改的行。那时没有保存任何内容——我们只是在更新 UI。

要提交更改，请单击保存按钮。

这实际上在几乎所有情况下都可靠地工作。然而，有一个非常顽固的问题感觉我应该能够解决，但现在是时候请专家了。

**问题场景**

我正在使用 jQuery 来捕获回车键，不幸的是该事件首先触发，导致页面在回调完成之前提交。该行未正确更新。保存陈旧和令人眼花缭乱的数据。

**更新**

我不认为您可以使输入行为取决于回调，因为您可以在不更改行的情况下保存。在这种情况下，如果您不更改行，它将永远不会保存。

现在，如果有某种方法可以检查 javascript 的内部待办事项列表，或者创建我自己的然后以某种方式管理它，那将起作用。但这对于应该很容易的事情来说是一些繁重的工作。因此，除非专家告诉我其他情况，否则我必须假设这是错误的。

**尝试**

现在我正在使用内置的 jQuery 事件，并且我有这个精心设计的 setTimeout 坚持尝试保存的事实，暂停足够长的时间以至少调用 WebMethod，并依靠回调进行提交. 但事实证明 javascript ansychrony 并没有按我希望的方式工作，并且 onchange 事件甚至不会触发，直到该代码块完成。这很令人惊讶。

我在想我可以使用我自己的小对象以正确的顺序排列这些事件，并找到一种聪明的方法来触发它，等等。

这一切似乎都是错误的方向。这肯定是疯狂的矫枉过正，这是一个常见问题，我忽略了一个简单的解决方案，因为我不在 javascript 24/7 中工作。

正确的？

**代码**

这就是我这一分钟做对的事情。这显然是行不通的——我试图利用 jquery 的异步特性，但所有这一切显然必须在行的 onchange 事件触发之前结束：

```
$(document).bind("keypress", function (e) {
    if (e.keyCode == 13) {
        handleEnter();
        return false; //apparently I should be using e.preventDefault() here. 
    }
});

function handleEnter() {
    setTimeout(function () {
        if (recalculatingRow) { //recalculatingRow is a bit managed by the onchange code.
            alert('recalculating...');
            return true; //recur
        }

        //$('input[id$="ButtonSave"]').click();
        alert('no longer recalculating. click!');
        return false;
    }, 1000);
} 
```

然后一个典型的行看起来像这样。请注意，我没有使用 jquery 来绑定它：

```
 <input name="ctl00$MainContent$GridOrderItems$ctl02$TextOrderItemDose" type="text" value="200.00" maxlength="7" id="ctl00_MainContent_GridOrderItems_ctl02_TextOrderItemDose" onchange="recalculateOrderItemRow(this);" style="width:50px;" /> 
```

我可以发布 recalculateOrderItemRow 的代码，但它真的很长，现在的问题是它不会触发，直到 after keypress 事件结束。

**更新 Dos** 根据[Nick Fitzgerald](http://fitzgeraldnick.com/weblog/35/)的说法（这是一篇很酷的文章），使用 setTimeout 应该会导致它变为异步。进一步挖掘 setTimeout 和 jQuery 之间的交互，以及普通 javascript 事件和 jQuery 事件之间的交互。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T03:42:39.500

Preventing `ENTER` shouldn't be causing you so much trouble! Make sure you have something like this on your code:

```
$(document).on('keydown', 'input', function(e) {
    if(e.keyCode == 13) {
       e.preventDefault();
    }
}); 
```

**UPDATE**

It looks like you *do* want to save on `ENTER`, but only after the UI is updated on `change`. That is possible. You could use a flag a Matthew Blancarte suggested above, trigger save from the `change` callback, and get rid of the `setTimeout`.

But I wouldn't recommend that. **You are better off relying solely on the save button for saving**. If you don't, your users will have to wait for two async operations to complete before saving is finished. So you'd have to block the UI, or keep track of all async operations, aborting some as needed. I think it's not worthy, `ENTER` becomes less intuitive for the users if saving takes too long.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T17:36:29.773

下面这些可怕的变通办法，实际上花了我今天一整天和昨天一半的时间来写，似乎解决了每一个排列。

有趣的是，如果您调用 e.preventDefault()，enter 本身不会触发 onchange。为什么会呢？在单击保存按钮的默认行为发生之前，实际上不会发生更改。

关于这一点的其他内容很少有趣。

```
//Used in handleEnter and GridOrderItems.js to handle a deferred an attempt to save by hitting enter (see handleEnter).
var isSaving = false; 
var saveOnID = '';

//When one of the fields that trigger WebMethods get focus, we put the value in here
//so we can determine whether the field is dirty in handleEnter.
var originalVal = 0;

//These fields trigger callbacks. On focus, we need to save their state so we can
//determine if they're dirty in handleEnter().
$('[id$=TextOrderItemDose], [id$=TextOrderItemUnits]').live("focus", function() {
    originalVal = this.value;
});

$(document).bind("keypress", function (e) {
    if (e.keyCode == 13) { //enter pressed.
        e.preventDefault();
        handleEnter();
    }
});

//Problem:
//In the products grid, TextOrderItemDose and TextOrderItemUnits both have js in their onchange events
//that trigger webmethod calls and use the results to update the row. Prsssing enter is supposed to 
//save the form, but if you do it right after changing one of those text fields, the row doesn't always
//get updated due to the async nature of js's events. That leads to stale data being saved.  
//Solution:
//First we capture Enter and prevent its default behaviors. From there, we check to see if one of our
//special boxes has focus. If so, we do some contortions to figure out if it's dirty, and use isSaving
//and saveOnID to defer the save operation until the callback returns. 
//Otherwise, we save as normal.
function handleEnter() {
    var focusedElement = $("[id$=TextOrderItemDose]:focus, [id$=TextOrderItemUnits]:focus")

    //did we press enter with a field that triggers a callback selected?
    if (isCallbackElement(focusedElement) && isElementDirty(focusedElement)) { 
        //Set details so that the callback can know that we're saving.
        isSaving = true;
        saveOnID = focusedElement.attr('id');

        //Trigger blur to cause the callback, if there was a change. Then bring the focus right back.
        focusedElement.trigger("change");
        focusedElement.focus();
    } else {
        forceSave();
    }
}

function isCallbackElement(element) {
    return (element.length == 1);
}

function isElementDirty(element) {
    if (element.length != 1) 
        return false;

    return (element.val() != originalVal);
}

function forceSave() {
    isSaving = false;
    saveOnID = '';

    $('input[id$="ButtonSave"]').click();
} 
```

这在文本框的更改事件中被调用：

```
function recalculateOrderItemRow(textbox) {
    //I'm hiding a lot of code that gathers and validates form data. There is a ton and it's not interesting.

    //Call the WebMethod on the server to calculate the row. This will trigger a callback when complete.
    PageMethods.RecalculateOrderItemRow($(textbox).attr('id'),
                                   orderItemDose,
                                   ProductItemSize,
                                   orderItemUnits,
                                   orderItemUnitPrice,
                                   onRecalculateOrderItemRowComplete);

} 
```

然后，在 WebMethod 回调代码的末尾，我们将更新的表单值拉出，使用 jquery.caret 将插入符号放在需要的位置，并检查是否需要强制保存：

```
function onRecalculateOrderItemRowComplete(result) {
    var sender, row;

    sender = $('input[id="' + result.Sender + '"]');
    row = $(sender).closest('tr');

    row.find('input[id$="TextOrderItemDose"]').val(result.Dose);
    row.find('input[id$="TextOrderItemUnits"]').val(result.Units);
    row.find('span[id$="SpanTotalPrice"]').html(formatCurrency(result.TotalPrice));

    calculateGrandTotalPrice();
    $(document.activeElement).select();

    if (isSaving && saveOnID == result.Sender) {
        forceSave();
    }
} 
```

result.Sender 是调用控件的ID，我塞进了WebMethod调用，然后返回。saveOnID 可能并不完美，实际上维护一个活动/未回调 WebMethod 调用的计数器可能会更好，以完全确保在保存之前一切都结束了。唷。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T03:27:01.240

You could unbind the Enter key capture while you are in the onChange event, then rebind it at the end of the callback function. If you post some code, I could give a more specific answer.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T02:48:03.003

你可以发布你的javascript吗？听起来你在正确的轨道上。在进行 AJAX 调用之前，我会更改我的 OnChange 事件以增加一个变量。我将调用变量 inProcess 并将其初始化为零。当 AJAX 调用返回时，我会将 inProcess 更新为当前值减一。在 Enter 键事件中，我会检查 inProcess 是否为零。如果没有，您可以警告用户或设置超时以稍后重试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T03:20:04.850

听起来您不应该异步调用 WebMethod 。同步调用它，成功后保存数据。

# css - 内联显示列表项的问题

> ID：10116710
> 
> 赞同：0
> 
> 时间：2012-04-12T02:42:04.287
> 
> 标签：css

我一直在尝试使用以下方式显示[此网页](http://www.shpe-uiuc.org)`inline`上的链接：

```
<style type="text/css">
ul#nav li.top {
 display:inline;
}
</style> 
```

但是，它似乎只适用于*某些*链接，即使它们都是该类的`li`元素`.top`。如果有人可以向我解释为什么这不起作用，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T02:52:10.863

元素内部有一些表格`li`。表格是块元素，它们关闭最后一个内联框。删除表格或使用`display: inline-block`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T03:51:24.207

嗨，请像这样在您的 css 顶级类中添加一个属性。

```
.top{
display:inline-block;
} 
```

# actionscript-3 - 碰撞和运动未按预期工作

> ID：10116712
> 
> 赞同：0
> 
> 时间：2012-04-12T02:42:21.560
> 
> 标签：actionscript-3

我正在尝试在动作脚本 3 中做一个碰撞示例。`character`当它碰到`platform`. 当我仅向右、向左、向上或向下移动时效果很好，但如果我尝试沿对角线移动，如果 与`character`碰撞`platform`，则对象会转到屏幕的不同区域。

这是编译的示例：[http ://dl.dropbox.com/u/5282142/GameDemo.html](http://dl.dropbox.com/u/5282142/GameDemo.html)

下面是我的代码。

现在，有没有人知道更好的方法来做我正在做的事情，或者当我尝试沿对角线移动角色时，我怎样才能让角色不去一个奇怪的位置？

```
var level:Array = new Array();
for (var i = 0; i < numChildren; i++) {
    if (getChildAt(i) is Platform) {
        level.push(getChildAt(i).getBounds(this));
    }
}

var speedX:int = 0;
var speedY:int = 0;

var kLeft:Boolean = false;
var kRight:Boolean = false;
var kDown:Boolean = false;
var kUp:Boolean = false;

stage.addEventListener(KeyboardEvent.KEY_DOWN, onKeyDownHandler);
stage.addEventListener(KeyboardEvent.KEY_UP, onKeyUpHandler);

function onKeyDownHandler(event:KeyboardEvent):void {
    if (event.keyCode == 37) kLeft = true;
    if (event.keyCode == 38) kUp = true;
    if (event.keyCode == 39) kRight = true;
    if (event.keyCode == 40) kDown = true;
}

function onKeyUpHandler(event:KeyboardEvent):void {
    if (event.keyCode == 37) kLeft = false;
    if (event.keyCode == 38) kUp = false;
    if (event.keyCode == 39) kRight = false;
    if (event.keyCode == 40) kDown = false;
}

addEventListener(Event.ENTER_FRAME, loop);

function loop(event:Event):void {
    moveChar();
    bound();
}

function moveChar():void {
    if (kLeft) {
        speedX = -10;
    } else if (kRight) {
        speedX = 10;
    } else {
        speedX *= 0.5;
    }

    if (kUp) {
        speedY = -10;
    } else if (kDown) {
        speedY = 10;
    } else {
        speedY *= 0.5;
    }

    character.x += speedX;
    character.y += speedY;
}

function bound():void {
    if (character.x > (800 - character.width/2)){
        character.x = 800 - character.width/2;
    }
    if (character.x < (character.width/2)){
        character.x = character.width/2;
    }
    if (character.y > (480 - character.height/2)){
        character.y = 480 - character.height/2;
    }
    if (character.y < (character.height/2)){
        character.y = character.height/2;
    }
    for (i = 0; i < level.length; i++) {
        if (character.getBounds(this).intersects(level[i])) {
            if (speedX > 0) {
                character.x = level[i].left - character.width/2;
            }
            if (speedX < 0) {
                character.x = level[i].right + character.width/2;
            }
        }
    }
    for (i = 0; i < level.length; i++) {
        if (character.getBounds(this).intersects(level[i])) {
            if (speedY > 0) {
                character.y = level[i].top - character.height/2;
            }
            if (speedY < 0) {
                character.y = level[i].bottom + character.height/2;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:01:43.483

您的问题在于代码的这一部分：

```
for (i = 0; i < level.length; i++) {
        if (character.getBounds(this).intersects(level[i])) {
            if (speedX > 0) {
                character.x = level[i].left - character.width/2;
            }
            if (speedX < 0) {
                character.x = level[i].right + character.width/2;
            }
        }
    }

for (i = 0; i < level.length; i++) {
            if (character.getBounds(this).intersects(level[i])) {
                if (speedY > 0) {
                    character.y = level[i].top - character.height/2;
                }
                if (speedY < 0) {
                    character.y = level[i].bottom + character.height/2;
                }
            }
        } 
```

角色实际上并没有移动到随机位置。上面是你设置的。

您必须创建一个更好的逻辑（根据场景），当两个键同时按下并发生冲突时，您的代码不应混淆。

# c++ - 使用堆栈的 C++ 硬件帮助

> ID：10116720
> 
> 赞同：0
> 
> 时间：2012-04-12T02:43:10.603
> 
> 标签：c++

我对如何使用堆栈以及为什么我什至会在我正在编写的代码中使用堆栈有点困惑。assingment 说要编写一个程序来检查用户输入是否正确。这是一个简单的程序，有三种不同的选择供用户选择。1\. 基本括号 () 2\. 标准括号 ()[]{} 和 3\. 用户定义的括号。主程序唯一要做的就是检查用户输入的格式是否正确，并仅在屏幕上显示该消息。

我有一个 StackLS.cpp 和一个 Stack.h 文件，我正在使用我的 main.cpp。我将在下面粘贴每个示例代码。

**堆栈LS.h**

```
typedef int elemType; // flexible data type

class StackLS
{
 private:
// inner class node

class Node
{
public:
    elemType data; // data portion
    Node *next; // link to the seccessor
}; // end Node

// data members
Node *topItem; // pointer to the top element of this stack

// utilities

       public:
// constructors
StackLS(void); // default constructor
StackLS(const StackLS& aStack); // copy constructor

// observers
bool isEmpty(void) const;
// returns true if this stack is empty
//         false otherwise

bool isFull(void) const;
// returns true if this stack is full
//         false otherwise

elemType top(void) const;
// precondition: this stack is not empty
// returns top element in this stack

// transformers
void push(const elemType& item);
// precondition: this stack is not full
// adds item to this stack

void pop(void);
// removes top element from this stack if exist
// remains empty otherwise

void makeEmpty(void);
// makes this stack empty

// destructor
~StackLS(void);
}; // end StackLS 
```

**堆栈LS.cpp**

```
 // constructors
      StackLS::StackLS(void)
     // default constructor
     {
topItem = 0;
      } // end default constructor

        StackLS::StackLS(const StackLS& aStack)
     // copy constructor
       {
       } // end copy constructor

      // observers
       bool StackLS::isEmpty(void) const
       // returns true if this stack is empty
       //         false otherwise
        {
  return topItem == 0;
         } // end isEmpty

         bool StackLS::isFull(void) const
       // returns true if this stack is full
       //         false otherwise
        {
return false;
         } // end isFull

         elemType StackLS::top(void) const
      // precondition: this stack is not empty
       // returns top element in this stack
        {
// return (*topItem).data;
return topItem->data;
      } // end top

       // transformers
        void StackLS::push(const elemType& item)
       // precondition: this stack is not full
            // adds item to this stack
           {
Node *newNode = new Node;
newNode->data = item;
newNode->next = topItem;
topItem = newNode;
       } // end push

       void StackLS::pop(void)
       // removes top element from this stack if exist
       // remains empty otherwise
       {
if (topItem != 0)
{
    Node *temp = topItem;
    topItem = topItem->next;
    delete temp;
}
      } // end pop

      void StackLS::makeEmpty(void)
       // makes this stack empty
        {
    while (topItem != 0)
{
    Node *temp = topItem;
    topItem = topItem->next;
    delete temp;
    }
        } // end makeEmpty

         // destructor
          StackLS::~StackLS(void)
         {
//while (!isEmpty())
//  pop();
while (topItem != 0)
{
    Node *temp = topItem;
    topItem = topItem->next;
    delete temp;
}
      } // end destructor 
```

这是我到目前为止的 main.cpp。 **主文件**

```
 #include <iostream>
      #include <string>
      #include "StackLS.h"
      using namespace std;

         do {

      int main()
       {
char answer;
char n;
StackLS stack;

cout << " ********** MENU ********** " << endl;
cout << " 1\. Basic Brackets () " << endl;
cout << " 2\. Standard Brackets ()[]{} " << endl;
cout << " 3\. User-Defined brackets " << endl;
cout << " Please enter your choice: " << endl;

switch (choice){
case 1: 
    cout << "Current Setting: () " << endl;
    cout << "Enter your expression followed by a ; : " << endl;
    do {

    cin >> answer;
        while (answer != ;)
    }

          } // end main

        }
while (choice != 'n' || 'N') 
```

我再次想知道如何使用我在这个程序中向您展示的堆栈（main.cpp）。我对为什么要使用堆栈以及为什么使用有点困惑。任何帮助表示赞赏。谢谢。main.cpp 可能不正确，但我又在学习，这就是我在这里学习更多信息的原因。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T02:48:07.230

当您看到一个开口大括号时，您将它推入堆栈。当您看到一个右大括号时，请确保它是堆栈顶部大括号的对应物，然后将其弹出。输入完成后，请确保堆栈为空。

# android - Android：每个会话运行一次异步任务

> ID：10116722
> 
> 赞同：2
> 
> 时间：2012-04-12T02:43:25.873
> 
> 标签：android, android-asynctask, android-activity

好的，我一直在研究这个问题一段时间，我还没有找到一个好的答案。我有一个异步任务，它通过 Web 服务检查我的数据库是否有更新。我只想在我的应用程序上为每个用户会话检查一次（现在每次我回到主屏幕时都会检查一次）。因此，如果我关闭应用程序并且进程停止并且他们再次打开它，它将再次检查 Web 服务。

我已经阅读了有关使用共享首选项的信息，但我只能想到第一次运行该应用程序。

我考虑在我的共享首选项中保存一个时间戳，然后检查自上次时间戳以来是否已超过 30 分钟。但这对于我需要的东西来说似乎很复杂。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T02:57:06.143

共享偏好实际上非常简单。您可以将变量设置为共享首选项。例如“0”当您启动异步时，该值更改为“1”。所以 async 永远不会运行。退出时，将共享首选项设置回“0”。下次用户启动程序时，asyncTask 将运行并再次将值设置回“1”。这样当您返回主屏幕时，asyn 将不会运行。这是你想要的？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T19:49:17.670

好的，我想说我从来没有真正能够使我接受的解决方案起作用。这在理论上是有道理的，但每次我回到同一个屏幕时它都会调用 finish() 方法。因此，我每次回到主屏幕时都会检查更新，这是我试图避免的。最后，我确实只是在 unix 时间中保存了一个时间戳，然后我检查了它是否是自上次检查更新以来的 15 分钟。那效果很好。

# macos - Clang OS X Lion，找不到 cstdint

> ID：10116724
> 
> 赞同：18
> 
> 时间：2012-04-12T02:43:44.657
> 
> 标签：macos, gcc, clang

我正在尝试编译一个使用 cstdint 的应用程序。由于Apple弃用了gcc，我想尝试用clang编译它，但我得到了错误：

```
fatal error: 'cstdint' file not found 
```

我知道 gcc 4.6.2 版本可以选择`-std=c++0x`, 来包含该库，但由于 os x 版本是 4.2，所以这里没有太多选择。关于我如何前进的任何建议？我曾尝试安装 4.6.2，但在构建 gcc 之前编译一些所需的库时遇到了各种问题。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-12T02:49:11.427

据推测，您拥有此应用程序的源代码，因此您可以修改标头以包含正确的`cstdint`标头，因为 Clang 3.0（Lion 的工具随附）确实具有标头。

## 快速解决方案

标题位于`tr1`目录下，因此您需要执行以下任一操作：

```
#include <tr1/cstdint> 
```

或者

```
#include <stdint.h> // which will use the C99 header 
```

## 更长，无聊的解释

在做了一些额外的阅读之后，因为我记得你可以在没有 tr1 目录的情况下做到这一点：

默认情况下，您将包含来自 的 C++ 头文件`/usr/include/c++/4.2.1`，它们是 GNU GCC 头文件。`/usr/include/c++/4.2.1/tr1`包括 TR1 头文件，例如`cstdint`.

另一种方法是使用 Clang++ 前端进行编译并传递`-stdlib=libc++`标志，它将使用来自 的标头`/usr/include/c++/v1`，这是 Clang 的 C++ 标头实现。它有`cstdint`.

例子：

```
// file called example.cxx
#include <tr1/cstdint>

int main() {
    // whatever...
} 
```

编译：

```
g++ example.cxx 
```

或者

```
clang++ example.cxx 
```

它会做你想做的事。

如果您不想使用该`tr1`版本（大致相同，如果不完全一样）：

```
// file called example.cxx
#include <cstdint>

int main() {
    // stuff
} 
```

这是这样编译的：

```
clang++ -stdlib=libc++ example.cxx 
```

* * *

虽然如果你使用`-stdlib=libc++`，这意味着你链接到 Clang 的 C++ 库`libc++`，而不是 GCC 的`libstdc++`.

# vector - 以编程方式将 .eps 文件设置为 CMYK（而不是 RGB）

> ID：10116730
> 
> 赞同：-1
> 
> 时间：2012-04-12T02:44:57.907
> 
> 标签：vector, vector-graphics, eps, inkscape

我们有一个应用程序，我们需要将文件从 Inkscape 的矢量文件导出为 .eps 以用于打印。虽然这工作正常，但我们的打印机抱怨他们正在以 RGB 模式而不是 CMYK 模式接收文件。

有没有办法以编程方式将 .eps 文件设置为 CMYK 文档颜色模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T03:02:09.273

颜色模式不是像 DPI 这样的设置。从 RGB 转换为 CMYK 进行打印是一个复杂的过程，通常涉及色彩空间、半色调和其他重要算法。

# android - 如何解析通过 POST 发送到 Ruby on Rails 的 XML？

> ID：10116733
> 
> 赞同：0
> 
> 时间：2012-04-12T02:45:44.143
> 
> 标签：android, ruby-on-rails, xml, xml-parsing

我正在从 Android 设备向 Rails 应用程序发送 XML 结构。此 XML 的结构如下所示：

```
<Updates>
<Update type="1"><Data>...</Data><Something>...</Something></Update>
<Update type="2"><Data>...</Data><Something>...</Something></Update>
<Update type="3"><Data>...</Data><Something>...</Something></Update>
</Updates> 
```

我看起来好像 Rails 把它变成了一个哈希。

我怎样才能浏览每个标签（这个数字会有所不同），查看它的类型属性，然后使用其他元素中的数据？

我一直在为此苦苦挣扎。

这是我不断收到的错误（TypeError（无法将字符串转换为整数））：

```
Started POST "/update/index?auth_token=rAyrJgr4w6LNBSXRoYie" for 127.0.0.1 at 2012-04-11 23:44:29 -0500
Processing by UpdateController#index as XML
  Parameters: {"Updates"=>{"Update"=>{"type"=>"2", "levelID"=>"7", "S1"=>"1", "S2"=>"0", "S3"=>"0"}}, "auth_token"=>"rAyrJgr4w6LNBSXRoYie"}
WARNING: Can't verify CSRF token authenticity
  User Load (0.4ms)  SELECT "users".* FROM "users" WHERE "users"."authentication_token" = 'rAyrJgr4w6LNBSXRoYie' LIMIT 1
   (0.1ms)  begin transaction
   (0.5ms)  UPDATE "users" SET "current_sign_in_at" = '2012-04-12 04:44:29.385406', "sign_in_count" = 2, "updated_at" = '2012-04-12 04:44:29.386311' WHERE "users"."id" = 1
   (2.2ms)  commit transaction
Completed 500 Internal Server Error in 9ms

TypeError (can't convert String into Integer):
  app/controllers/update_controller.rb:21:in `fetch'
  app/controllers/update_controller.rb:21:in `block in index'
  app/controllers/update_controller.rb:19:in `each'
  app/controllers/update_controller.rb:19:in `index'

  Rendered /Users/colegroff/.rvm/gems/ruby-1.9.2-p290@exterminator/gems/actionpack-3.2.1/lib/action_dispatch/middleware/templates/rescues/_trace.erb (50.2ms)
  Rendered /Users/colegroff/.rvm/gems/ruby-1.9.2-p290@exterminator/gems/actionpack-3.2.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.8ms)
  Rendered /Users/colegroff/.rvm/gems/ruby-1.9.2-p290@exterminator/gems/actionpack-3.2.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (55.6ms)
----------------------------------------------------
params[:Updates].class: ActiveSupport::HashWithIndifferentAccess
----------------------------------------------------
update.inspect: ["type", "2"] 
```

这是我的控制器：

```
class UpdateController < ApplicationController

  before_filter :authenticate_user!

  def index

    output = ""

    puts "----------------------------------------------------"
    puts "params[:Updates].class: #{params[:Updates].class.to_s}"
    puts "----------------------------------------------------"

    if !params[:Updates].nil?
      params[:Updates][:Update].each do |update|
        puts "update.inspect: #{update.inspect}"
        puts "update.fetch(\"type\"): #{update.fetch("type")}"
        puts "update.fetch(\"type\").class.to_s: #{update.fetch("type").class.to_s}"
        update_type = update.fetch("type")
        puts "update_type: #{update_type}"

        case update_type

        when "0"
          puts "inside case 0"
          number_of_bug_bucks = update.fetch("numberOfBugBucks")
          update_bug_bucks(number_of_bug_bucks)
          output += "<Update type='0'>"
          output += "<numberOfBugBucks>#{current_user.bug_bucks.to_s}</numberOfBugBucks>"
          output += "</Update>"
        when "2"
          puts "inside case 2"
          level_id = update.fetch("levelID")
          star_1 = update.fetch("S1")
          star_2 = update.fetch("S2")
          star_3 = update.fetch("S3")
          updated_level = update_level_data(level_id, star_1, star_2, star_3)
          output += "<Update type='2'>"
          output += "<levelID>#{updated_level[0].level_id}</levelID>"
          output += "<S1>#{updated_level[0].star_1}</S1>"
          output += "<S2>#{updated_level[0].star_2}</S2>"
          output += "<S3>#{updated_level[0].star_3}</S3>"
          output += "</Update>"
        when "3"
          puts "inside case 3"
          tower_id = update.fetch("towerID")
          tower_state = update.fetch("towerState")
          updated_tower = update_tower_data(tower_id, tower_state)
          output += "<Update type='3'>"
          output += "<towerID>#{updated_tower[0].tower_id}</towerID>"
          output += "<towerState>#{updated_tower[0].tower_state}</towerState>"
          output += "</Update>"
        when "4"
          puts "inside case 4"
          authentication_token = update.fetch("AuthToken")
          update_is_logged_in = update_is_logged_in(authentication_token)
          output += "<Update type='4'>"
          output += "<AuthToken>#{update_is_logged_in[0].authentication_token}</AuthToken>"
          output += "</Update>"
        end

        puts "----------------------------------------------------"

      end
    end

    puts "output: #{output}"
    puts "----------------------------------------------------"

    respond_to do |format|
      format.xml { render :xml => "<Updates>" + output + "</Updates>" }
    end

  end

  private # private methods below:

    def update_bug_bucks(number_of_bug_bucks)
      current_user.update_attribute("bug_bucks", number_of_bug_bucks)
    end

    def update_level_data(level_id, star_1, star_2, star_3)      
      updated_level = Level.where("level_id = ? AND user_id = ?", level_id, current_user.id)      
      if updated_level.empty?
        current_user.levels.create(attributes = {:level_id => level_id, :star_1 => star_1, :star_2 => star_2, :star_3 => star_3})
      else
        updated_level[0].update_attributes(:star_1 => star_1, :star_2 => star_2, :star_3 => star_2)
      end      
      updated_level      
    end

    def update_tower_data(tower_id, tower_state)      
      updated_tower = Tower.where("tower_id = ? AND user_id = ?", tower_id, current_user.id)      
      if updated_tower.empty?
        current_user.towers.create(attributes = {:tower_id => tower_id, :tower_state => tower_state})
      else
        updated_tower[0].update_attributes(:tower_state => tower_state)
      end      
      updated_tower      
    end

    def update_is_logged_in(authentication_token)      
      logged_out_user = User.where("authentication_token = ?", authentication_token).first
      logged_out_user.reset_authentication_token!
      logged_out_user.update_attribute("is_logged_in", false)      
    end
    ############################################################################################################################
    ############################################################################################################################

end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-30T07:25:28.837

这可能有点晚了，但对于稍后参考这篇文章的任何人来说，这就是我解决类似情况的方法

```
string = request.body.read # rather than using params you can get get/post message with this 
```

然后按如下方式使用[Nokogiri](https://rubygems.org/gems/nokogiri)

```
doc = Nokogiri::XML(string)
doc.xpath("//Upadate") 
```

有关如何使用 Nokogiri 的更多信息，请参阅[http://nokogiri.org/tutorials](http://nokogiri.org/tutorials)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T02:52:31.647

您是否已经尝试过类似的东西

```
params[:updates][:update].each do |update|
  puts "do something with this update: #{update.inspect}"
end 
```

如果 rails 给你一个散列，只需遍历你想要的散列中的集合。处理 POST 的控制器是什么样的？

# iphone - 从标签栏应用程序中的表格视图推送新的视图控制器

> ID：10116735
> 
> 赞同：0
> 
> 时间：2012-04-12T02:46:06.347
> 
> 标签：iphone, ios, uitableview, uitabbarcontroller, pushviewcontroller

我有一个`UITabBarController`可以控制多个`UIViewControllers`. 在该控制器中有一个`UITableViewController`. 我试图弄清楚如何在我的 tableview 上选择一行并在实际导航到该选项卡时推送我的其他选项卡之一的视图控制器。

我使用过`performSegueWithIdentifier`: 但它将新视图推送到我的 tableview 所在的同一选项卡上。我想导航到我推送到的视图所在的选项卡。

如果我不清楚：我的表格视图在选项卡 1 中。我单击一行。我想进入 Tab 2。到目前为止，我已经能够将 Tab 2 的视图控制器推送到 Tab 1。不好。

任何人都可以解释一下吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T03:02:06.937

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    NSUInteger theIndex;
    [self.tabBarController setSelectedIndex:theIndex];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T03:19:35.240

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{
    UIViewController *tab2ViewController = [self.tabBarController.viewControllers objectAtIndex:1];

    NewViewControllerToPush *mvc = [[NewViewControllerToPush alloc] init];
    [tab2ViewController.navigationController pushViewController:mvc animated:YES];
    [mvc release];
} 
```

当您在 tabBar 中输入 viewControllers 时，请确保将它们包装在 UINavigationControllers 中，否则您将无法使用推送和弹出功能。

# ruby-on-rails - 思考狮身人面像洗劫可以一起工作吗？

> ID：10116736
> 
> 赞同：6
> 
> 时间：2012-04-12T02:46:10.103
> 
> 标签：ruby-on-rails, thinking-sphinx, ransack

我们的项目目前正在使用 Ransack，我们正在考虑引入 Thinking-Sphinx。但是，他们都使用搜索关键字。有什么方法可以在同一个项目中使用 Thinking-Sphinx 和 Ransack？

预先感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T21:07:38.423

Ransack 的搜索方法只是一个别名。您可以改用该`ransack`方法。

代替：

```
@q = Person.search(params[:q])
@people = @q.result(:distinct => true) 
```

利用：

```
@q = Person.ransack(params[:q])
@people = @q.result(:distinct => true) 
```

Person.search 应该像往常一样调用 ThinkingSphinx。

# c# - 在 windows phone 7 上加载图片的评论

> ID：10116741
> 
> 赞同：1
> 
> 时间：2012-04-12T02:46:34.667
> 
> 标签：c#, .net, silverlight, windows-phone-7

有些图片是用户上传的，其他人可以评论。它提出了一个问题，每张图片都有不同数量的评论，所以我不知道我需要在 xaml 文件中显示多少个文本块。请帮我解决它。预先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T02:54:30.583

无需在 XAML 中提前定义文本块，而是使用容器控件（例如 a `ListView`）将显示模板数据绑定到`ObservableCollection`注释对象。

看一看这样的教程[，](http://3water.wordpress.com/2011/03/13/tutorial-of-the-day-2-binding-data-to-controls-on-wp7/)了解这种数据绑定的实际应用。

# javascript - 使用 Aptana Studio 处理大量 JavaScript 代码

> ID：10116742
> 
> 赞同：2
> 
> 时间：2012-04-12T02:47:05.010
> 
> 标签：javascript, aptana, code-assist

我用 Aptana Studio 3（Web 项目）编写了几行 JS 代码并尝试了外包。

**原始结构：**

```
(function(window) {
 var App = { // properties and functions...
 };

 App.SubObject1 = { // properties and functions...
 };
 App.SubObject2 = { // properties and functions...
 };
 // more sub objects here...

 window.App = App;

})(window); 
```

现在，代码越来越多（> 1000 行），所以我决定将子对象移动到单个 JS 文件中（都在同一个文件夹中）以方便开发。我还去掉了匿名自调用功能，所以 Aptana Code Assist 可以找到里面的代码...

**问题**

代码辅助（代码完成等）似乎不知道所有 JS 文件的所有代码或无法正常工作。*一些*文件知道*一些*其他文件的代码。其他文件不知道其他文件的代码。

我尝试了索引、刷新、项目清理-> 没有更改。我还检查了我的代码中没有解析错误。

我可以做些什么来连接文件吗？
你如何在 Aptana 中使用 mass JS？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T21:01:24.933

我尽力记录了我在这里使用的解决方法：http: [//karoshiethos.com/2012/05/11/hacking-code-assist-in-aptana-3-javascript/](http://karoshiethos.com/2012/05/11/hacking-code-assist-in-aptana-3-javascript/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T16:10:32.217

我确实有类似的问题，我通过创建一个新的 Web 项目解决了它。之后，我拖放了我想要使用的所有文件，并选择了文件链接选项，因此我不必更改我的目录结构。在您的情况下，我猜您只需要将具有要公开的功能的文件拖放到您要使用这些功能的项目中，然后选择“链接到文件”选项。希望这对你有用。

# c++ - 来自数组的 gnuplot 2-D 绘图 - 实时

> ID：10116751
> 
> 赞同：0
> 
> 时间：2012-04-12T02:48:17.263
> 
> 标签：c++, real-time, gnuplot

我必须实时绘制传感器的扫描值。为此，我正在使用 gnuplot。到目前为止，我可以从我的 c++ 程序与 gnuplot 进行通信。我使用 .DAT 文件尝试了一些示例图，它正在工作。现在，我的要求是在单个图中绘制传感器扫描值的最后 5 个值以进行比较（这意味着我需要存储 10 个数据数组。1 个扫描有两个数组 X 和 Y）。

我要做的是将最后 5 个扫描值以列格式存储在 .DAT 文件中，就像这样，其中 x，y 是我每次扫描的两个数组。然后使用 gnuplot 命令**“plot 'filename.dat' 1:2" "plot 'filename.dat' 2:3" 等等**...... 然后我必须在每 5 次扫描后重写文件。

```
X1  Y1   X2  Y2   X3  Y3   X4  Y4   X5  Y5 
2.3 3.4  6.6 3.6  5.5 6.5  8.5 5.5  4.5 6.6
4.3 4.5  6.2 7.7  4.3 9.2  1.4 6.9  2.4 7.8 
```

我想在继续之前确认这对于实时处理是否有效。此外，gnuplot 中是否有任何命令可以在不使用 .dat 文件的情况下直接从两个数组中绘图。我没有在搜索中找到一个。

任何的意见都将会有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T12:43:46.613

据推测，您正在通过管道与 gnuplot 进行通信。由于 gnuplot 是一个单独的进程，它无法访问您的程序内存空间，因此如果您不以某种方式发送数据，它就无法绘制您的数据。最直接的方法是您提到的方式（创建一个临时文件，向 gnuplot 发送命令以读取/绘制临时文件）。另一种直接的方法是使用 gnuplot 的内联数据......它的工作方式如下：

```
plot '-' using ... with ...
   x1 y1
   x2 y2
   x3 y3
   ...
   e 
```

在这种情况下，数据文件直接写入 gnuplot 管道，不需要临时文件。`help datafile special-filenames`（有关更多问题，请参阅gnuplot 文档中的伪文件“-” ）。

就这种方法在实时中有用——只要与重新渲染之间的时间相比，gnuplot 渲染速度快，它应该可以正常工作。*（我想如果你的数组很大*，也会有一些内存问题，但我怀疑这会限制任何只有 10 个一维数组的实际应用程序——如果数组那么大，你可能不应该发送整个无论如何都要gnuplot）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T07:10:50.913

看看这个：[https ://github.com/dkogan/feedgnuplot](https://github.com/dkogan/feedgnuplot)

它是绘制标准输入的通用工具。除了其他功能外，它还可以实时绘制数据。如果您有不直接支持的格式的数据，请使用 awk 或 perl 之类的东西预处理您的流。

# mysql - mysql/php 网页中的用户访问管理

> ID：10116752
> 
> 赞同：1
> 
> 时间：2012-04-12T02:48:32.863
> 
> 标签：mysql, database-design, user-controls, relational-database

我正在使用 php、mysql 和 javascript 为我的母亲制作一个半简单的 Web 应用程序。

她是一名教师，这将使她能够管理她的课程计划的各个组成部分。对于每个组件，都有一个表，对于每个可以包含另一个组件的组件，都有另一个保存关系的表。（该表类型有两列，每列都有相关表的外键）

我差不多完成了，但是她现在想让她的朋友使用这个，我不太关心sql注入，但我想实现用户控制，以便只有创建组件的用户才能查看和编辑该组件.

我还希望他们能够制作公共组件，以便用户可以将组件复制到自己的数据集中。

**我的问题**要实现用户控制，我应该让每个用户都有自己的数据库即时，还是每个表都应该有一个所有者列和公共/私有状态列，或者还有其他我没有想到的替代方案。

我看到的一个问题是，在创建组件之间的关系时需要额外的 mysql 查询，因为我需要检查两个组件的用户标签是否与当前用户匹配。

任何反馈/建议都是有帮助的

**更新**唯一使用/访问它的人将是其他老师，他们将制定自己的课程计划

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T13:07:35.700

我当然会在同一个数据库中实现这一点。在这种情况下，为每个用户使用不同的数据库并不是一个好的解决方案。例如，想想如果每个用户的数据都在一个单独的数据库中，你将如何构建一个搜索功能会发生 UID 冲突。这将是一场噩梦。单独的数据库在每个数据库服务于单独的应用程序的情况下工作，并且不同数据库中的数据之间的关系恰好为零。

因此，这将带您了解如何实施它。这将取决于您的型号。例如，每个课程计划是否只有一个所有者？如果是这样，那么将该信息添加到组件表中可能会起作用。否则，您可能需要一个单独的表来定义所有权并因此访问不同的组件。无论哪种方式，我都会确保将访问逻辑解耦并封装在您的应用程序中，以确保您将来可以更改它。例如，想象一下，您从一个简单的单一所有者模型开始，但网站不断发展壮大，很快，一群人都需要对组件的所有权/编辑权限。

# sql - 为所有表设置 IDENTITY_INSERT OFF

> ID：10116759
> 
> 赞同：37
> 
> 时间：2012-04-12T02:50:04.987
> 
> 标签：sql, sql-server

我有一个脚本，它创建一个完整的数据库并将所有记录插入到几十个表中。它工作得很好，除非在处理过程中出现一些问题，并且当脚本在插入过程中失败并且可以再次将其设置为 OFF 之前，表格会留下 IDENTITY_INSERT ON。

发生这种情况时，脚本在尝试再次运行时会自动失败，并在我们进入第一个表的插入时出现错误“IDENTITY_INSERT is already ON for table xx”。

作为故障保险，我想确保在设置脚本中运行其余处理之前，所有表的 IDENTITY_INSERT 都设置为 OFF。

作为替代方案，我们也许可以关闭 MS SQL 连接并再次打开它，据我了解，这将清除连接会话的所有 IDENTITY_INSERT 值。

做到这一点并防止“已经启动”错误的最佳方法是什么？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-04-12T02:58:02.400

动态 SQL：

```
select 'set identity_insert ['+s.name+'].['+o.name+'] off'
from sys.objects o
inner join sys.schemas s on s.schema_id=o.schema_id
where o.[type]='U'
and exists(select 1 from sys.columns where object_id=o.object_id and is_identity=1) 
```

然后将生成的 SQL 复制并粘贴到另一个查询窗口并运行

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-04-12T02:55:31.173

```
EXEC sp_MSforeachtable @command1="SET IDENTITY_INSERT ? OFF" 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-11-18T15:02:31.857

```
EXEC sp_MSforeachtable @command1="PRINT '?'; SET IDENTITY_INSERT ? OFF",
@whereand = ' AND EXISTS (SELECT 1 FROM sys.columns WHERE object_id = o.id  AND is_identity = 1)' 
```

以 Lynn 的回答为基础，以防您懒得在多个步骤中执行此操作 - 这应该在所有有标识列的表上运行。

警告仅在 2012 年进行了测试，并且*sp_MSforeachtable*当然完全不受支持...

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-10-18T16:19:37.070

以@KevD 的回答为基础 - 它可以很好地禁用，但这里也可以用于启用。

要禁用所有需要禁用的身份插入，请使用 -

```
EXEC sp_MSforeachtable @command1="PRINT '?'; SET IDENTITY_INSERT ? OFF",
@whereand = ' AND EXISTS (SELECT 1 FROM sys.columns WHERE object_id = o.id  
AND is_identity = 1) and o.type = ''U''' 
```

要启用所有需要启用的身份插入，请使用 -

```
EXEC sp_MSforeachtable @command1="PRINT '?'; SET IDENTITY_INSERT ? ON",
@whereand = ' AND EXISTS (SELECT 1 FROM sys.columns WHERE object_id = o.id  
AND is_identity = 1) and o.type = ''U''' 
```

在 Sql server 2014 和 2016 上测试

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-13T18:44:31.143

我有一个类似的问题，但我宁愿不在生产中使用未记录的存储过程。为了自动化这个我建立在@John Dewey's answer并将它放入游标中。这在 407 毫秒内迭代了 699 个表。

```
DECLARE @sql NVARCHAR(500) -- SQL command to execute

DECLARE sql_cursor CURSOR LOCAL FAST_FORWARD FOR
SELECT 'SET identity_insert ['+s.name+'].['+o.name+'] OFF'
FROM sys.objects o
INNER JOIN sys.schemas s on s.schema_id=o.schema_id
WHERE o.[type]='U'
AND EXISTS(SELECT 1 FROM sys.columns WHERE object_id=o.object_id AND is_identity=1)

OPEN sql_cursor
FETCH NEXT FROM sql_cursor INTO @sql

WHILE @@FETCH_STATUS = 0
    BEGIN
        EXECUTE sp_executesql @sql  --> Comment this out to test
        -- PRINT @sql   --> Uncomment to test or if logging is desired
        FETCH NEXT FROM sql_cursor INTO @sql
    END

CLOSE sql_cursor
DEALLOCATE sql_cursor 
```

如果您反对游标，它也可以很容易地转换为 while 循环。

# ruby-on-rails - 带有 Selenium/Rails 的 SimpleCov

> ID：10116761
> 
> 赞同：4
> 
> 时间：2012-04-12T02:50:29.153
> 
> 标签：ruby-on-rails, selenium, code-coverage

我们有一套 Selenium 测试。我想使用 SimpleCov 来覆盖这些测试的服务器端覆盖。首先，这是一种常见的方法吗？我在 SimpleCov/Selenium 上找不到任何东西。也许 SimpleCov 通常用于单元/功能测试而不是集成？

当前的 Selenium 设置需要启动一个 Rails 服务器，而不是使用一套 Selenium 测试。我需要 SimpleCov 在 Rails 服务器上运行，然后在套件完成后退出。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T08:50:29.360

simplecov 作者在这里。每当您启动 SimpleCov 时，它都会将覆盖分析应用于当前运行的进程。因此，您需要在 Rails 服务器进程中启动 SimpleCov。我建议将 SimpleCov 设置作为条件添加到 Rails 应用程序的 config/boot.rb （在最顶部），如下所示：

```
# config/boot.rb
if ENV["SELENIUM"]
  require 'simplecov'
  SimpleCov.start 'rails'
end 
```

在启动 Rails 测试服务器之前，设置该环境变量。一旦测试服务器关闭，您现在应该会收到一份覆盖率报告。如果您想将其移动到另一个目录，请检查配置选项，这样它就不会干扰您的常规（单元/功能）覆盖率报告。

我不确定 boot.rb 是不是正确的地方。事实是 SimpleCov 需要在您的应用程序中需要任何其他内容之前加载，否则它将无法跟踪这些文件的覆盖率。您可能需要尝试或查看 rails 引导过程以找到该位置，但由于 Bundler 设置是 boot.rb 的一部分（如果我没记错的话......），将上述配置放在 Bundler.setup 之上应该没事的。

基本上，通过类似的设置，您甚至可以通过在服务器进程中启动 simplecov、单击并退出服务器来获得本地手动基于浏览器测试的代码覆盖率，例如，如果您想知道应用程序的哪个部分执行某个操作真的很感动。

# ruby-on-rails - 不确定 before_filter 的语法是否正确

> ID：10116765
> 
> 赞同：1
> 
> 时间：2012-04-12T02:51:06.643
> 
> 标签：ruby-on-rails, routes

我正在尝试创建一个启动页面。我找到了这篇[文章](http://%20before_filter%20redirect_to%20root_path)，但我似乎无法为 before_filter 找到正确的语法。这是我所拥有的：

```
 before_filter redirect_to root_path 
```

（我将根路径更改为启动页面。）

但它会弹出这个错误：

```
Routing Error

undefined local variable or method `root_path' for ApplicationController:Class 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T03:12:32.110

澄清：root_path 作为实例方法存在，而不是在类设置期间作为类方法存在。因此，需要块或方法调用来将调用或 root_path 推迟到调用的实际时间，而不是在类加载期间。

出于某种原因，有人删除了正确答案：将其移至块状：

```
before_filter do
  redirect_to root_path
end 
```

假设 root_path 指向 :index，你可以：

```
before_filter(:except => :index) do
  redirect_to root_path
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T03:07:09.987

`rake routes`并确保`root`已定义。

例如，您`root :to => "home#index"`在 routes.rb 文件的底部。

用真实的控制器/动作替换 home#index

# mongodb - 使用 mongoDB 进行统计（和汇款）

> ID：10116782
> 
> 赞同：0
> 
> 时间：2012-04-12T02:54:30.690
> 
> 标签：mongodb, database-design, database-schema, database

1) 我的第一个问题是关于使用 mongoDB 存储统计信息的最佳解决方案

如果我想存储大量统计数据（假设特定站点上的访问者 - 每小时一次），像 mongoDB 这样的 noSQL DB 似乎工作得很好。但是如何构建这些表以充分利用 mongoDB？

每次用户访问该页面时，我都会将该特定对象 ID（例如 SITE_MONTH_DAY_YEAR_SOMEOTHERFANCYPARAMETER）的访问者数量增加一。但是如果数据库变大（>10g），那会不会变慢（就像在 mysql 上一样），因为它必须搜索 object_id 并更新它？更新数据时数据是否始终准确（afaik mongoDB 没有任何表锁定？）

为每位访客插入一行会不会更快？（更准确）另一方面，使用我的第一个解决方案读取统计数据会更快，不是吗？（特别是在按站点/日期/[...]“分组”方面）。

2）对于每个计算的访问者，我想在两个用户之间进行转账。至关重要的是，这些转移始终是准确的。你将如何做到这一点？我在考虑每小时从 mongoDB.statistics 中挑选过去一小时的访问者数量并更新用户余额的 cron。我更喜欢在计算用户时直接/实时执行此操作 - 但是如果成千上万的访问者同时调用脚本会发生什么情况，是否存在余额错误的风险？

# c++ - 一个使用 libvlc 播放 mp3 的简单 C 程序

> ID：10116783
> 
> 赞同：5
> 
> 时间：2012-04-12T02:54:33.887
> 
> 标签：c++, c, mp3, media-player, libvlc

我是一个普通的 C/C++ 程序员。最近我做了一个项目来制作一个带有智能播放列表的媒体播放器，它可以像 Zune 的 SmartDj 一样工作。我决定使用 libvlc 来玩。

我以前从未编写过开源软件，所以我对 git 什么都一无所知。你能帮我写至少一个 C 程序来播放 mp3 文件吗？

我应该从哪里开始？如何从 mp3 文件本身中提取歌曲的艺术家和其他信息？

问候。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-24T13:36:05.477

确保您已安装以下软件包（否则安装它）：

```
$ apt-get install libvlccore-dev libvlc-dev 
```

**测试.c：**

```
#include <stdio.h>
#include <stdlib.h>

#include <vlc/vlc.h>

int main(int argc, char **argv)
{
    libvlc_instance_t *inst;
    libvlc_media_player_t *mp;
    libvlc_media_t *m;

    // load the vlc engine
    inst = libvlc_new(0, NULL);

    // create a new item
    m = libvlc_media_new_path(inst, "path to MP3 file");

    // create a media play playing environment
    mp = libvlc_media_player_new_from_media(m);

    // no need to keep the media now
    libvlc_media_release(m);

    // play the media_player
    libvlc_media_player_play(mp);

    sleep(10);

    // stop playing
    libvlc_media_player_stop(mp);

    // free the media_player
    libvlc_media_player_release(mp);

    libvlc_release(inst);

    return 0;
} 
```

**如何链接和编译：**

```
$ gcc $(pkg-config --cflags libvlc) -c test.c -o test.o

$ gcc test.o -o test $(pkg-config --libs libvlc) 
```

# html - iOS：从 HTML 字符串获取图像

> ID：10116784
> 
> 赞同：1
> 
> 时间：2012-04-12T02:54:44.577
> 
> 标签：html, xcode, image, search

我有一个从网络上提取文章的应用程序，我需要检索文章中第一个图像的 URL。以下是这些图像的代码示例：

```
<img alt="Twitter (zpower)" src="http://www.example.com/image.png" width="630" height="420"> 
```

我只需要获取 src 的值。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T02:57:31.903

您需要解析 HTML 并提取`src`属性。您可以手动完成，但更好的方法是依赖其他人的解析库（例如[ElementParser](http://touchtank.wordpress.com/element-parser/)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T03:04:19.570

我想支持@ravuya 的回复，但也提到您也可以使用内置的[NSXMLParser](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html)为您进行解析。

# c# - 计算给定 XY 系列的局部最大值/最小值

> ID：10116790
> 
> 赞同：3
> 
> 时间：2012-04-12T02:55:34.537
> 
> 标签：c#, algorithm

`Point2D`我有一个由( 有两个成员`x`和)组成的数组`y`，例如`Point2D[] points`. 您可以将此数组视为 XY 图上的一系列点。数组的排序方式是从小`Point2D.X`到大排列`Point2D.X`

我的问题很简单：您如何找到作为局部最大值/最小值的点（以及这些点之前和之后的相应项目索引）？回想一下，局部最大值/最小值在数学上定义为`dy/dx=0`。所以我的任务是我需要找到`dy/dx=0`.

**请注意，极值点可能位于也可能不在`Point2D`阵列内，因为图形是平滑曲线，而不是线性分段折线。极值点可以是数组内两个点的中点。例如。**

是否有任何现有的库/组件已经在 C# 中执行此操作？

这是我的方法：

```
public class Point2D
{
  public double X;
  public double Y;
}

public class PointWithIndex
{
  // the extreme point where dy/dx=0
  public Point2D ExtremePoints;
  // the index of the array for the point that locates right before this ExtremePoints
  public int PrevItemIndex;

}

public static List<PointWithIndex> FindLocalExtrema(List<Point2D> xyPoints)
{
  // the algorithm to find the max/min points of xyPoints
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T04:57:49.417

我不确定这是否是您正在寻找的：[Catmull-Rom Spline](http://en.wikipedia.org/wiki/Catmull-Rom_spline#Catmull.E2.80.93Rom_spline)，您可以使用 XNA 框架（在 C# 中）轻松计算，如下[所示](http://glasnost.itcarlow.ie/~powerk/xna/Catmulroml.html)。

这个想法是：您将使用 Catmull-Rom 生成 - 迭代或递归 - 点，直到达到局部最大值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T03:03:40.710

我建议运行一个循环 0 < i < n - 1，检查是否 P[i - 1].Y < P[i].Y && P[i + 1].Y < P[i].Y，然后检查 P[ i] 是最大值。对 min 做同样的事情。

# asp.net-mvc-3 - MVC3 中的 Uploadify 不起作用

> ID：10116793
> 
> 赞同：1
> 
> 时间：2012-04-12T02:55:56.743
> 
> 标签：asp.net-mvc-3, razor, uploadify

不能让这个做任何事情。当我单击“上传文件”时，绝对没有任何反应，而且我看不到任何闪存呈现到屏幕上。我相信这在某种程度上与 jquery 有关，但我不确定。请帮忙！如果有人可以给我邮寄一个简单的 VS2010 解决方案，上传到 gmail.com 上的 infinitimods 工作，我会更加感激！非常感谢！

```
My Layout file:

    <!DOCTYPE html>
    <html>
    <head>
        <title>@ViewBag.Title</title>
        <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
        <link type="text/css" rel="Stylesheet" media="screen" href="/Scripts/uploadify/uploadify.css" />
        <script type="text/javascript" src="/Scripts/uploadify/swfobject.js"></script>
        <script type="text/javascript" src="/Scripts/uploadify/jquery.uploadify.v2.1.4.min.js"></script>
        <script type="text/javascript" src="/Scripts/uploadify/jquery-1.4.2.min.js"></script>
    </head>

    <body>
        @RenderBody()
    </body>
    </html>

My index file:

    @{
        ViewBag.Title = "Index";
        Layout = "~/Views/Shared/_Layout.cshtml";
    }

    <h2>Index</h2>

    @using (Html.BeginForm("UploadFile", "Home", FormMethod.Post, new { enctype = "multipart/form-data" }))
    {        
        <script type="text/javascript">
            $(document).ready(function () {

                $("#file_upload").uploadify({
                    'uploader': '~/Scripts/uploadify/uploadify.swf',
                    'cancelImg': '~/Scripts/uploadify/images/cancel.png',
                    'buttonText': 'Upload foto',
                    'script': '/Home/UploadFiles',
                    'folder': '/Content/upload',
                    'fileDesc': 'Image Files',
                    'fileExt': '*.jpg;*.jpeg;*.gif;*.png; *.txt;',
                    'scriptData': { 'thisGuid': $("input#Id").val() },
                    'multi': false,
                    'auto': true,
                    'onError': function (event, queueID, fileObj, errorObj) {
                        alert("Error!!! Type: [" + errorObj.type + "] Info [" + errorObj.info + "]");
                    }              
                });

                $("#btnSave").button().click(function (event) {
                    $('#file_upload').uploadifyUpload();
                });

            }); 

        </script>

        <input id="file_upload" type="file" />

        <input type="button" id="btnSave" value="Upload file" />

        <input id="Id" name="Id" type="hidden" value="5168e-yada-yada" />
    }

My controller:

public class HomeController : Controller
{
    /// <summary>
    /// 
    /// </summary>
    /// <returns></returns>
    [HttpGet]
    public ActionResult Index()
    {
        return View("Index");
    }

    /// <summary>
    /// 
    /// </summary>
    /// <param name="fileData"></param>
    /// <param name="form"></param>
    /// <returns></returns>
    [HttpPost]
    public string UploadFile(HttpPostedFileBase fileData, FormCollection form)
    {
        return "ok";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:25:33.163

Uploadify 需要 jQuery。这意味着您需要在 uploadify 脚本**之前包含 jQuery 脚本。**如果您查看过您的 javascript 调试控制台，您会看到此错误。

所以，布局：

```
<!DOCTYPE html>
<html>
<head>
    <title>@ViewBag.Title</title>
    <link href="@Url.Content("~/Scripts/uploadify/uploadify.css")" type="text/css" rel="stylesheet" media="screen" />
    <script type="text/javascript" src="@Url.Content("~/Scripts/uploadify/swfobject.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Scripts/uploadify/jquery-1.4.2.min.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Scripts/uploadify/jquery.uploadify.v2.1.4.min.js")"></script>
</head>

<body>
    @RenderBody()
</body>
</html> 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View();
    }

    [HttpPost]
    public ActionResult UploadFile(HttpPostedFileBase fileData, string thisGuid)
    {
        if (fileData != null && fileData.ContentLength > 0)
        {
            var appData = Server.MapPath("~/app_data");
            var file = Path.Combine(appData, Path.GetFileName(fileData.FileName));
            fileData.SaveAs(file);
        }
        return Json(new { status = true });
    }
} 
```

和观点：

```
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script type="text/javascript">
    $(document).ready(function () {
        $('#file_upload').uploadify({
            'uploader': '@Url.Content("~/Scripts/uploadify/uploadify.swf")',
            'cancelImg': '@Url.Content("~/Scripts/uploadify/images/cancel.png")',
            'buttonText': 'Select photo',
            'script': $('form').attr('action'),
            'fileDesc': 'Image Files',
            'fileExt': '*.jpg;*.jpeg;*.gif;*.png; *.txt;',
            'multi': false,
            'auto': false,
            'onError': function (event, queueID, fileObj, errorObj) {
                alert("Error!!! Type: [" + errorObj.type + "] Info [" + errorObj.info + "]");
            }
        });

        $('form').submit(function () {
            $('#file_upload').uploadifySettings('scriptData', { thisGuid: $('#id').val() });
            $('#file_upload').uploadifyUpload();
            return false;
        });
    }); 
</script>

<h2>Index</h2>

@using (Html.BeginForm("UploadFile", "Home", FormMethod.Post, new { enctype = "multipart/form-data" }))
{        
    <input id="id" name="id" type="hidden" value="5168e-yada-yada" />
    <input id="file_upload" type="file" name="fileData" />
    <input type="submit" value="Upload file" />
} 
```

如果您想在用户选择照片时启动上传过程，您可以摆脱表单和提交按钮并将`auto`属性设置为`true`：

```
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script type="text/javascript">
    $(document).ready(function () {
        $('#file_upload').uploadify({
            'uploader': '@Url.Content("~/Scripts/uploadify/uploadify.swf")',
            'cancelImg': '@Url.Content("~/Scripts/uploadify/images/cancel.png")',
            'buttonText': 'Select photo',
            'script': $('form').attr('action'),
            'fileDesc': 'Image Files',
            'fileExt': '*.jpg;*.jpeg;*.gif;*.png; *.txt;',
            'multi': false,
            'auto': true,
            'scriptData': { thisGuid: $('#id').val() },
            'onError': function (event, queueID, fileObj, errorObj) {
                alert("Error!!! Type: [" + errorObj.type + "] Info [" + errorObj.info + "]");
            }
        });
    }); 
</script>

<h2>Index</h2>

<input id="id" name="id" type="hidden" value="5168e-yada-yada" />
<input id="file_upload" type="file" name="fileData" /> 
```

另外不要忘记查看[uploadify 文档](http://www.uploadify.com/documentation/)以更好地了解不同选项的用途，您还可以查看一些示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:18:52.420

您需要使用 asp.net 和 flash 解决一个错误。

这篇文章帮助了我一次：[解决 Flash cookie 错误](http://geekswithblogs.net/apopovsky/archive/2009/05/06/working-around-flash-cookie-bug-in-asp.net-mvc.aspx)

也许这是一个更好的解决方案：[jquery file upload](http://blueimp.github.com/jQuery-File-Upload/)

# iphone - 如何从 NSData 对象中保存多个文件？

> ID：10116794
> 
> 赞同：1
> 
> 时间：2012-04-12T02:56:00.563
> 
> 标签：iphone, objective-c

所以我有一个 zip 文件，它是使用 Objective-Zip 提取的。然后将提取的内容放入 NSData 对象中。我想将内容保存到应用程序文档文件夹中。问题是这些是多个文件，而 writeToFile:atomically: 将 zip 的内容保存到一个文件中。

有任何想法吗？我看到的另一个问题刚刚说要使用 ZipArchive。

我需要快速帮助，因为应用程序需要在我明天工作结束时完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T04:09:32.950

我认为您需要使用 ZipArchive：

```
ZipArchive* za = [[ZipArchive alloc] init];
NSData *Data = [NSData  dataWithContentsOfURL:url]; // here url is your zip url
NSArray *documentPathArray = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirString = [documentPathArray objectAtIndex:0];
NSString *filePath = [documentsDirString stringByAppendingPathComponent:@"temp.zip"];

NSURL *fileURL = [NSURL fileURLWithPath:filePath];
NSError *writeError = nil;
[Data writeToURL: fileURL options:0 error:&writeError];
if( writeError) {
   NSLog(@" Error in writing file %@' : \n %@ ", filePath , writeError );
   return;
}
if( [za UnzipOpenFile:filePath] )
{

    BOOL ret = [za UnzipFileTo:documentsDirz overWrite:YES];
    if( NO==ret )
     {
      NSLog(@"NO");
    }
    [za UnzipCloseFile];
} 
```

[了解更多信息](http://www.hindsightlabs.com/blog/2010/12/23/reading-and-writing-zip-files-on-the-iphone/)

# list - 包含案例类的列表中的模式匹配

> ID：10116796
> 
> 赞同：1
> 
> 时间：2012-04-12T02:56:25.253
> 
> 标签：list, scala, pattern-matching

在[本主题](https://stackoverflow.com/questions/9891638/should-i-change-to-scala-to-create-a-system-with-rewrite-rules)的序列中，我正在开发一个允许将块组合到 scala 的系统，因此我可以使用模式匹配来创建重写规则系统。

但是我被卡住了。

我有这个课程：

```
abstract class Block(n: String, in: List[Input], out: List[Out]){
  def name = n; def outputs = out; def inputs = in
}
case class GroupBlock(n: String, blocks: List[Block], in: List[Input], 
                      out: List[Out]) extends Block(n, in, out)
case class StandardBlock(n: String, in: List[Input], out: List[Out])
           extends Block(n, in, out)

abstract class Point(n: String){ def name = n }
case class Input(n:String) extends Point(n)

abstract class Out(n: String) extends Point(n)
case class Output(n:String) extends Out(n) 
case class Connection(connectedInput: Input, n: String) extends Out(n) 
```

现在想象一下，我有这个没有显示的例子：

![在此处输入图像描述](../Images/93c3644030704a4cf73844ae4c2dcc71.png)

映射到这个：

```
val inputA = Input("sumA")
val inputB = Input("sumB")
val outputB = Output("B")

val sumAB =
    GroupBlock("GroupedSum",
      StandardBlock("Sum", List(inputA, inputB), List(outputB)) :: 
      StandardBlock("Input Provider", null, Connection(inputA, "A")::Nil ) ::
      StandardBlock("Input Provider", null, Connection(inputB, "B")::Nil ) ::         
      Nil, 
      null, 
      List(outputB)) 
```

所以...我想说：如果情况2`"Integer providers"`与`"Sum"`那么...

我设法通过模式匹配识别出“输入提供者”是否存在：

```
sumAB match{
    case GroupBlock(_, 
          StandardBlock("Input Provider", null, _ :: Connection(input, _) :: _ ) :: _,
           _, _)
        => ...
    case GroupBlock(_,
          StandardBlock("Input Provider", null, Connection(input, _) :: _ ) :: _, 
          _, _)
        => ...
    //Covering 2 more cases where the order on the list matters
} 
```

我怎么能说“给我找一个`StandardBlock`名字`"Input Provider"`在列表中的案例”？因为这是我的主要问题之一。我需要指定所有可能的组合......现在我想做类似的事情

```
case GroupBlock(_,
          StandardBlock("Input Provider", null, Connection(input, _) ::
          StandardBlock("Sum", inputList, _  ) :: _, 
          _, _) 
```

但这意味着“给我找一个案例，其中“输入提供者”位于列表的开头，而 Sum 块位于该“Sum”之后”。我想要：“给我找一个案例，其中存在一个“输入提供者”与“总和”在同一个列表中。

列表中的这种“查询”对于检查输入提供程序是否与找到的 Sum 块连接也很有用。我可以使用该变量`input`并询问`input`inputList 中的情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T05:00:34.770

您可以在匹配子句中使用守卫来提供帮助。他们是这样的：

`case` *模式* `if` *守卫* `=>`

其中，guard 是一个表达式，它可以利用已绑定在模式中的变量。所以我认为这*可能会*做你想要的：

```
sumAB match {
  case GroupBlock(groupBlockName, blocks, _, _) if blocks.exists {
    case StandardBlock("Input Provider", _, inputProv_out) => blocks.exists { 
      case StandardBlock("Sum", sum_in, _) =>
        sum_in.exists { input =>
          inputProv_out.collect{ case Connection(connectedInput,_) =>
            connectedInput}.contains(input)
        }
      case _ =>
        false 
    }
    case _ => false
  } =>
    println("found")
  case _ =>
    println("no match")
} 
```

这是一种尝试，因为翻译您正在编写的内容*找到一个组块，其中存在一个输入提供程序，其中一个`inputProv_out`输出连接到一个总和`sum_in`输入*。

话虽如此，如果我没有犯错误，我会感到惊讶。这表明您的数据结构可能不是您想要做的最好的。或者您可能需要帮助函数来表达某些属性。

# visual-studio-2008 - ATL 链接警告

> ID：10116800
> 
> 赞同：2
> 
> 时间：2012-04-12T02:56:58.947
> 
> 标签：visual-studio-2008, visual-c++, atl, wtl

当我在 Visual Studio 2008 SP1 中使用 ATL 标头创建一个新的 Win32 项目（Windows 应用程序）时，仅包含`<atlbase.h>`给我这个警告：

```
TempATL.obj : warning LNK4254: section 'ATL' (50000040) merged into '.rdata' (40000040) with different attributes 
```

当我还包含`<atlapp.h>`来自 WTL 时，我会收到以下额外警告：

```
atlsd.lib(Externs.obj) : warning LNK4254: section 'ATL' (50000040) merged into '.rdata' (40000040) with different attributes
atlsd.lib(AtlDebugAPI.obj) : warning LNK4254: section 'ATL' (50000040) merged into '.rdata' (40000040) with different attributes
atlsd.lib(Allocate.obj) : warning LNK4254: section 'ATL' (50000040) merged into '.rdata' (40000040) with different attributes
atlsd.lib(atltrace.obj) : warning LNK4254: section 'ATL' (50000040) merged into '.rdata' (40000040) with different attributes
atlsd.lib(AtlTraceModuleManager.obj) : warning LNK4254: section 'ATL' (50000040) merged into '.rdata' (40000040) with different attributes 
```

解决这些警告的正确方法是什么？

* * *

### 编辑：

我刚刚发现这些正在发生，因为我已将 Visual Studio 2008 切换为将 Visual C++ **2010**编译器与 2008*库*一起使用。如果有人知道如何解决这个问题，**而**不是切换回旧的编译器，那么请发帖。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T23:23:15.583

我猜你正在运行 MSVC 的 Express 版本并使用 Windows SDK 中的 atl。要摆脱这些警告，只需添加`/ignore:4254 /ignore:4078`链接器的附加命令行选项。

请参阅：[WDK 7.1 中包含的 ATL 8.0 使链接器生成近八百个 LNK4254...](http://git.chromium.org/gitweb/?p=chromium.git;a=commitdiff;h=b9e35854b4d2d7361b618d265ba8919013d285fb)

# asp.net - 如何返回“自己的”404 自定义页面？

> ID：10116804
> 
> 赞同：20
> 
> 时间：2012-04-12T02:57:43.640
> 
> 标签：asp.net, http-status-code-404

如果我的网站发生错误，我会执行以下操作：

```
 Server.Transfer("/error.aspx"); 
```

该页面有代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    ...

    Response.StatusCode = 404;
} 
```

如果我在本地主机上工作，那么连同为页面返回的 404 状态，页面显示“正确的错误描述”。

一旦我将相同的代码发布到互联网上，所有有错误的页面仍然显示 404 状态代码，但没有内容。相反，他们有标准的 404 错误消息：

> 404 - 找不到文件或目录。

如果注释掉了“Response.StatusCode = 404”行，则提供了正确的页面，但它有 200 个状态代码。

**问题：**如何返回用户友好的同时有404错误状态码的错误页面？

欢迎任何想法！提前非常感谢！

PS ASP.NET 4.0

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-12T06:44:01.850

```
<customErrors mode="On" defaultRedirect="~/Error/GenericErrorPage.aspx">

     <error statusCode="404" redirect="~/Error/404.aspx" />

</customErrors> 
```

[http://msdn.microsoft.com/en-us/library/h0hfz6fc(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/h0hfz6fc(v=vs.71).aspx)

[http://msdn.microsoft.com/en-us/library/aa479319.aspx](http://msdn.microsoft.com/en-us/library/aa479319.aspx)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-29T11:08:22.607

啊哈！

尝试这个：

```
Response.TrySkipIisCustomErrors = true;
Response.Status = "404 Not Found";
Response.StatusCode = 404; 
```

我发现`Response.TrySkipIisCustomErrors=true`在设置状态码之前添加后，我会看到正常的页面副本并返回 404。如果没有此行，将显示标准 IIS 404 页面。

或者，这可以在 web.config 中设置，如下所示：

```
<system.webServer>
    <httpErrors existingResponse="PassThrough">
        // custom error page mappings
    </httpErrors>
</system.webServer> 
```

这里的关键是`existingResponse="PassThrough"`

这已添加到 IIS7，因此在以集成管道模式运行的站点上是必需的。

欲了解更多信息：http: [//msdn.microsoft.com/en-us/library/system.web.httpresponse.tryskipiiscustomerrors.aspx](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.tryskipiiscustomerrors.aspx)

**更新** 更新以澄清/更多信息，因为人们仍然觉得这很有用。值得注意的是，如果您需要一个简单的通用 404 页面，请使用 web.config 方法（最好将其设为纯 HTML 页面）。

如果您有一个高度动态或 CMS 驱动的网站，其中任何给定页面都可能返回 404 但您想显示与访问者相关的信息，我描述的方法效果最好。

例如，特价商品页面 (offers/some-offer) 可以查找商品 (some-offer)，如果它不存在，则在引擎盖下返回 404 时显示替代或相关商品。据访问者所知，他们刚刚被告知该优惠不再可用，但他们仍在优惠部分，但我们还告诉机器人取消对 URL 的索引。如果只有一个通用 404 页面，这将更难做到。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-12T06:37:10.633

您可以通过配置 web.config 文件来实现此目的。请查看下面的文章链接，该文章在页面底部解释了如何针对不同的 HTTP 错误状态显示不同的自定义错误页面。

*   [显示自定义错误页面](http://www.asp.net/web-forms/tutorials/deployment/displaying-a-custom-error-page-cs)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-11T13:38:23.307

要使用**正确的 404**状态码显示您**自己的页面**，您可以使用以下代码：

 **1) 在您的 web.config 中添加以下内容：

```
<customErrors mode="On" redirectMode="ResponseRewrite">
  <error statusCode="404" redirect="404.htm" />
</customErrors> 
```

和：

```
<httpErrors errorMode="Custom">
  <remove statusCode="404"/>
  <error statusCode="404" path="404.htm" responseMode="File"/>
</httpErrors> 
```

2) 将 404.htm 文件添加到您网站的**根目录：**

```
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>404 - Not Found</title>
    <meta http-equiv="refresh" content="5;url=/404-PAGE" />
  </head>
  <body>
       CONTENT
  </body>
</html> 
```

您可以将内容添加到此文件的正文并删除 META 刷新，或者只需使用 META 刷新在 CMS 中打开页面。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-11-26T17:58:56.530

结合 Jag 和 adt 的答案，我仍然遇到了问题。当静态文件处理程序（而不是 ASP.NET）处理 404 时，我得到一个空白响应。（状态正确为 404。）

要修复它，我必须添加`errorMode="Custom"`到`<httpErrors>`元素中。如果您的错误页面使用 ASP.NET，则需要包含`responseMode="ExecuteURL"`.

```
<system.web>
    <customErrors mode="On" defaultRedirect="~/Error.aspx" redirectMode="ResponseRewrite" />
</system.web>

<system.webServer>
    <httpErrors errorMode="Custom">
        <remove statusCode="404" />
        <error statusCode="404" path="/Error.aspx" responseMode="ExecuteURL" />
    </httpErrors>
</system.webServer> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-09-19T08:58:02.507

```
<httpErrors errorMode="Custom">
     <remove statusCode="404"/>
     <error statusCode="404" path="ErrorPages/error404.htm" responseMode="Redirect"/>
  </httpErrors> 
```

如果我不在`(~)`路径属性中使用波浪号，这对我有用

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-06-30T04:58:12.730

要在 asp.net C# 中创建和访问 404 页面，请按照以下步骤操作：

1）创建一个 404.html 文件并添加您的内容

```
<html>
<头部>
  <meta charset="utf-8" />
  <title>404 - 未找到</title>
  <link href="bootstrap/css/bootstrap.css" rel="stylesheet" />
  <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" />
  <风格>
      身体 {
  颜色：#797979；
  背景：#eaeaea；
  字体系列：'Ruda'，无衬线；
  填充：0px！重要；
  边距：0px！重要；
  字体大小：13px；
}
      .p404 图像 {
  边距顶部：120px；
}
      . 居中 {
  文本对齐：居中；
}
      .p404 h1 {
  字体粗细：900；
}
  </style>
</head>
<正文>
  <div class="容器">
      <div class="行">
          <div class="col-lg-6 col-lg-offset-3 p404 居中">
              <img src="assets/img/404.png" alt="">
              <h1>不要惊慌！！</h1>
              <h3>您要查找的页面不存在。</h3>
              <br>
              <div class="行">
                  <div class="col-md-8 col-md-offset-2">

                      <a class="btn btn-success" href="Default.aspx">返回首页</a>
                  </div>
              </div>

          </div>
      </div>
  </div>
</正文>
</html>

```

2.  在网络配置中添加此代码

```
 <system.web>
    <customErrors mode="On" redirectMode="ResponseRewrite">
      <error statusCode="404" redirect="404.html" />
    </customErrors>   
  </system.web>
   <system.webServer>
    <httpErrors errorMode="Custom">
      <remove statusCode="404"/>
      <error statusCode="404" path="404.html" responseMode="File"/>
    </httpErrors>
  </system.webServer> 
```**

# php - 使用 Symfony2 Doctrine2 控制台/生成功能更改表？

> ID：10116809
> 
> 赞同：2
> 
> 时间：2012-04-12T02:58:11.777
> 
> 标签：php, mysql, orm, symfony, doctrine-orm

我想弄清楚的是如何使用 Symfony2 和 Doctrine2 向表中添加新字段。

我用它来最初创建实体：

```
php app/console doctrine:generate:entity --entity="MyMainBundle:ImagesTable" --fields="title:string(100) file:string(100)" 
```

我用它来创建/更新数据库上的表：

```
php app/console doctrine:schema:update --force 
```

现在，如果我想向`ImagesTable`实体添加新字段，是否有一种简单的方法可以使用`console`，或者我必须手动编辑实体。我现在只是以 1 个实体为例，但实际上，我要更改许多实体；所以，必须有一个更简单的方法来做到这一点。

我一直在手动编辑它们以创建关系，所以如果也有更简单的方法来做到这一点，那就太好了。

我记得使用 Symfony1.4 时这要容易得多——我所要做的就是使用 phpMyAdmin 创建数据库/表，Symfony 能够毫无问题地生成模型。

我真的希望我在这里遗漏了一些东西，因为如果我必须为每次更改手动编辑每个实体，这将不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T03:28:35.607

Doctrine 生成器命令旨在帮助开发人员快速原型化一个想法。他们通常不会生成生产就绪代码，需要检查代码以查看它是否包含您想要的内容。

您仍然可以在 phpmyadmin 中创建模型并使用[Doctrine 逆向工程工具](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/tools.html#reverse-engineering)，但它也不会生成生产就绪代码，仅用于原型设计。

事先创建数据库/表在 Doctrine2 中并不能很好地工作，因为表之间的基础关系可能与模型对象之间的关系不同。ORM 的全部意义在于在课堂上思考并让 Doctrine 为您完成其余的工作。

Doctrine 的目的不是为您编写实体，它为您提供构建数据模型的工具，您可以使用这些工具在 Php 中编写模型。

如果您不喜欢手动编写实体代码（这是所有使用教义的开发人员所做的），您可能想看看[RedbeanPHP](http://redbeanphp.com/)，这是一个 PHP 的零配置 ORM 框架。它根据您使用的数据模型动态创建数据库表、列和索引。

# c# - 转换 Unix 纪元日期/时间并在 C# 中使用 DST 的 SQLite 查询

> ID：10116810
> 
> 赞同：1
> 
> 时间：2012-04-12T02:58:22.423
> 
> 标签：c#, sqlite, timezone, dst, unix-timestamp

我正在从 C# 中的 SQLite3 数据库中查询和检索数据，该数据库将其日期/时间存储在 Unix 纪元时间中

有些存储为自 1970 年 1 月 1 日以来的秒数

有些存储为自 2001 年 1 月 1 日以来的秒数

这一切都很好，因为我的查询可以找出差异并应用正确的日期/时间转换

但是我无法想出一种方法来合并夏令时

有没有办法区分夏令时？
还有一种方法可以从 Unix 纪元时间获取时区吗？

我正在使用的查询如下，对此的任何帮助都会很棒

```
string query = "SELECT case when date<978307200 then datetime(date + 978307200,'unixepoch') else datetime(date,'unixepoch') end
AS [DATE / TIME]
FROM message
ORDER BY ROWID"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T04:06:49.940

如果存储在数据库中的时间是 UTC，那么你应该像这样处理你的时间：

```
namespace TimeProcessing
{
    using System;
    using System.Diagnostics;
    using System.Globalization;

    class Program
    {
        static void Main(string[] args)
        {
            double timeStamp = 1000000000; // here you read real UNIX timespamp

            // get UTC time
            DateTime utc = ConvertFromUnixTimestamp(timeStamp);
            Console.WriteLine("UTC time is: {0}", utc.ToString("o", CultureInfo.CurrentCulture));

            // get local time
            DateTime local = TimeZone.CurrentTimeZone.ToLocalTime(utc);
            Console.WriteLine("Local time is: {0}", local.ToString("o", CultureInfo.CurrentCulture));

            if(Debugger.IsAttached)
            {
                Console.WriteLine("Press any key to exit..");
                Console.ReadKey();
            }
        }

        // here you implement your timestamp processing algorithm
        public static DateTime ConvertFromUnixTimestamp(double timestamp)
        {
            DateTime origin = new DateTime(1970, 1, 1, 0, 0, 0, 0, DateTimeKind.Utc);
            return origin.AddSeconds(timestamp);
        }
    }
} 
```

所有 DTS 更改将自动应用。如果您需要将时间转换为其他时区（非本地），算法将相同，但您需要使用[TimeZoneInfo](http://msdn.microsoft.com/en-us/library/system.timezoneinfo%28v=vs.90%29.aspx)类来创建您想要转换 UTC 时间的时区。

# php - Curl 没有得到带有 https url 的 xml 响应？

> ID：10116811
> 
> 赞同：2
> 
> 时间：2012-04-12T02:59:16.717
> 
> 标签：php, xml, api, curl, simplexml

我正在使用 Expedia 的 API，并且正在尝试进行测试预订。我必须调用 https 网址。我已经能够连接到所有其他正常的 http 请求，但现在我被卡住了。这是我调用页面的方式。我表单中的所有 php 值都是正确的，但我在 xml 文件中什么都没有。我的意思是没有任何错误，什么都没有！我真的被困住了，不知道该怎么办。这是我的php代码：

```
$ch = curl_init(); 
$fp = fopen('bookit.xml','w'); 
curl_setopt($ch, CURLOPT_URL, "https://book.api.ean.com/ean-services/rs/hotel/v3/res?cid=55505&minorRev=13&apiKey=4sr8d8bsn75tpcuja6ypx5g3&locale=en_US&currencyCode=USD&customerIpAddress=10.184.2.9&customerUserAgent=Mozilla/5.0+(Windows+NT+6.1)+AppleWebKit/535.11+(KHTML,+like+Gecko)+Chrome/17.0.963.79+Safari/535.11&customerSessionId=&locale=en_US&currencyCode=USD&xml=<HotelRoomReservationRequest><hotelId>".$hid."</hotelId><arrivalDate>".$arrive."</arrivalDate><departureDate>".$depart."</departureDate><supplierType>".$supplier."</supplierType><rateKey>".$rkey."</rateKey><rateCode>".$ratecode."</rateCode><roomTypeCode>".$roomcode."</roomTypeCode><chargeableRate>".$total."</chargeableRate><RoomGroup><Room><numberOfAdults>".$adults."</numberOfAdults><numberOfChildren>".$children."</numberOfChildren><childAges>".$childages."</childAges><firstName>".$fname."</firstName><lastName>".$lname."</lastName><smokingPreference>".$smoking."</smokingPreference></Room></RoomGroup><ReservationInfo><email>".$email."</email><firstName>".$ccname."</firstName><lastName>".$cclast."</lastName><homePhone>".$phone."</homePhone><workPhone></workPhone><creditCardType>".$cc."</creditCardType><creditCardNumber>".$ccnumber."</creditCardNumber><creditCardExpirationMonth>".$exmonth."</creditCardExpirationMonth><creditCardExpirationYear>".$exyear."</creditCardExpirationYear><creditCardIdentifier>".$ccsecure."</creditCardIdentifier></ReservationInfo><AddressInfo><address1>".$street1."</address1><city>".$city."</city><stateProvinceCode>AZ</stateProvinceCode><countryCode>".$country."</countryCode><postalCode>".$zip."</postalCode></AddressInfo></HotelRoomReservationRequest>");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Accept: application/xml'));
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); 
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2); 
curl_setopt($ch, CURLOPT_HEADER, 0); 
curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0)");  
$val = curl_exec($ch); 
curl_close($ch);//Close curl session 
fclose($fp); //Close file overwrite 
var_dump($val);
$data = simplexml_load_file('bookit.xml'); 
```

我喜欢我说过我什么都得不到。我检查了所有代码，没有发现问题，而且 url 是正确的。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T03:05:43.667

客户IP地址是`10.184.2.9`，你说？我对此表示怀疑。

在 之后`curl_exec`，但在您关闭之前`$ch`，回显 的输出`curl_error($ch)`。那里有什么有用的吗？

# css - 使用 IE9 的样式问题。CSS3 输入无法识别

> ID：10116813
> 
> 赞同：0
> 
> 时间：2012-04-12T02:59:38.450
> 
> 标签：css, internet-explorer-9, styling

问候 StackOverflowers 同胞，我遇到了一个看似简单的问题，但我一直无法调试。在 IE9 中呈现时，我的所有 CSS（包括一些 CSS3）似乎都无法正确显示。当然，它在所有其他浏览器中运行良好，但 IE9 似乎给我带来了问题。让我展示一下：

网站： [http ://www.lmabee.com/test/HDHospital/index.aspx](http://www.lmabee.com/test/HDHospital/index.aspx)

我采取了我认为的预防措施来避免典型的 IE 失败，方法是在我的 ASP 母版页中包含以下代码修复：

```
 <script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE7.js"></script>
    <script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE8.js"></script>
    <script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE9.js"></script> 
```

我真的很感激给出的任何提示或提示。我已经用这个 IE 玩了 12 个小时了，感觉我已经筋疲力尽了。最好的问候，劳拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T04:06:08.900

在您的 CSS 中，您使用的是线性渐变，IE 10 以下版本不支持此功能。对于 IE 9 及以下版本，您需要添加：

```
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#002c3e', endColorstr='#000a10'); 
```

这个是为#container_header {}

# ruby - 检查方法中的每个参数？

> ID：10116815
> 
> 赞同：3
> 
> 时间：2012-04-12T02:59:50.090
> 
> 标签：ruby

假设我有一个具有以下内容的方法...

```
def is_number?(a,b,c,d)
  # ... check if the argument is a number
end 
```

是否可以遍历传递给的每个参数`is_number?`并执行方法中的内容？

例如...

```
is_number?(1,3,"hello",5) 
```

将遍历每个参数，如果参数每个参数是一个数字，它将返回 true，但在这种情况下，由于`"hello"`.

我已经知道如何检查输入是否为数字，我只想能够在一种方法中检查多个参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T04:49:56.133

Code Golfing sawa 的答案：长度相同，但避免`|`

```
def is_number?(*args)
  (args - args.grep(Fixnum)).empty?
end

is_number?(1,2,3) # => true
is_number?(5,2,"foo") # => false 
```

如果有 grep -v 就好了，但目前[还没有](https://stackoverflow.com/questions/4165971/ruby-equivalent-to-grep-v)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T03:04:05.333

```
def is_number? *args; args.all?{|a| a.kind_of?(Fixnum)} end 
```

`Fixnum`如果要匹配不同的类，请替换。

# ios - 如何在 OHAttributedLabel 中使 CustomLink 可触摸

> ID：10116820
> 
> 赞同：4
> 
> 时间：2012-04-12T03:00:12.360
> 
> 标签：ios, uilabel

我成功地将链接添加到`UILabel`通孔`OHAttributeLabel`，`-(void)addCustomLink:(NSURL*)linkUrl inRange:(NSRange)range;` 换句话说，正确的范围带有下划线，看起来像一个链接。

但是，我无法单击/触摸该链接。`addCustomLink`关于文本范围的方法还有什么必须做的吗？FWIW，即使大部分`OHAttributedLabel`代码都引用了`IBOutlet`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T17:30:54.217

在这种情况下，所需的代码很简单：

```
[myLabel setDelegate:self]; 
```

对于那些感兴趣的人来说，上下文是：

```
descriptionLabel.attributedText = [NSMutableAttributedString attributedStringWithString:@"foo"];
[myLabel addCustomLink:[NSURL URLWithString:urlString] inRange:NSMakeRange(myLocation, myLength)];
[myLabel setDelegate:self]; 
```

非常感谢！

# css - 添加静态文件目录以覆盖 Django 中的 CSS

> ID：10116821
> 
> 赞同：1
> 
> 时间：2012-04-12T03:00:20.747
> 
> 标签：css, django, static, pinax

我试图弄清楚为什么我不能`base.css`在 Django 中覆盖。

在`settings.py`我有：

```
STATIC_URL = "/site_media/static/" 
```

并在`site_base.html`：

```
<link rel="stylesheet" href="{{ STATIC_URL }}pinax/css/base.css" /> 
```

我已经自定义了位于`/site_media/static/pinax/css/base.css`. 但是不是从这里读取文件，而是从我的`python/site-packages/pinax`目录中读取它。在同一个`site_base.html`文件中，我能够覆盖`/site_media_static/pinax/images/`文件夹中的图像，这似乎很奇怪，我可以覆盖图像但不能覆盖 CSS 文件。

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T03:07:10.957

这`STATIC_URL`是提供静态文件的 URL，而不是存储它们的目录。

您需要将包含静态文件的目录添加到`STATICFILES_DIRS`或将静态文件放在应用程序的`static`子目录中。

请参阅[Django 静态文件应用程序](https://docs.djangoproject.com/en/1.3/ref/contrib/staticfiles/)的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T03:09:54.383

`STATIC_ROOT`（由 引用`STATIC_URL`）不应手动修改，它是由`collectstatic`来自 ann apps static dirs 和`STATICFILES_DIRS`. 在 Django 的开发服务器中，还有一个帮助程序，它允许直接从源代码访问静态文件，从而可以更轻松地调试 JS 和 CSS。

在您的情况下，您可以尝试将更新的文件放在`STATICFILES_DIRS`. 另外，看看[`STATICFILES_FINDERS`](https://docs.djangoproject.com/en/1.4/ref/contrib/staticfiles/)哪些可以更改静态文件查找器的顺序以设置哪个优先级。

# xml - XML 中的“处理指令”和“声明性语句”有什么区别？

> ID：10116822
> 
> 赞同：1
> 
> 时间：2012-04-12T03:00:26.240
> 
> 标签：xml, xsd

我刚刚阅读[了这个 XML 语法教程](http://www.daaq.net/old/xml/index.php?page=xml%20syntax&parent=what%20is%20xml)，发现**“处理指令”**（`<? ... ?>`）和**“声明性语句”**（`<! ... >`）的定义有点模糊。我从阅读该页面中得到的要点是，它们都是记录文档的方式，告诉文档处理器如何这样做。

例如，这是一段我认为很多人都会熟悉的常见代码：

```
<?xml version="1.0"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

据我所知，这些都是*关于*如何处理文档的说明。那么有什么区别呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T08:43:50.107

有些人在编写教程时试图提供帮助并发明自己的术语，希望人们会发现它比规范本身的语言更容易理解。这个特定教程的作者似乎在这方面做得过火了。这些术语都不是正式的 XML 术语。

您的示例中的第一件事是 XML 声明。它告诉 XML 解析器您正在使用什么版本的 XML，以及文档的字符编码是什么。

您示例中的第二件事是 DOCTYPE 声明。它告诉 XML 解析器您正在使用什么 XML 词汇表（在本例中为 XHTML 词汇表），这使解析器有机会检查您是否正确使用了该词汇表（即，您的文档对引用的 DTD 有效。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-18T23:48:59.853

XML 源自[SGML](https://en.wikipedia.org/wiki/Standard_Generalized_Markup_Language)。在 SGML 中，处理指令被`<? ?>`标记包围。声明用 . 包围`<! !>`。在 XML 文档中，第一个 SGML 处理指令是`<?xml ... ?>`指示 XML 的版本和文本编码。之后是`<!DOCTYPE ...!>`通知 XML 解析器如何验证文档的声明。如果没有声明，XML 解析器只能确定文档是否格式正确，而不能确定文档是否有效。如果有声明，例如 DOCTYPE 或嵌入的 DTD，解析器还可以确定文档是否有效。

# real-time - 如何将一台独立服务器实时备份到另一台服务器？

> ID：10116823
> 
> 赞同：0
> 
> 时间：2012-04-12T03:00:39.413
> 
> 标签：real-time, high-availability, failover, heartbeat

我需要一个故障转移环境，其中两台服务器实时同步。我正在使用两台迷你 Mac，并且我已将心跳和起搏器确定为用于监控是否需要启动故障转移环境的流行工具，但我还没有找到任何有关如何进行实时备份的信息。实时，我的意思是，如果服务器 A（实时服务器）上的最终用户更新了他/她的个人资料信息，那么服务器 B（故障转移）会自动获取该更改，因为存储该信息的 MySQL 数据库（在服务器 A 上）可以“更新”到服务器 B（它应该总是完美地镜像服务器 A）。同样，如果我更改 PHP GUI 的 Web 资源（实际模板文件），该更改也会自动传输到服务器 B。希望将所有信息从 A 发送到 B，而不必安排每小时运行一次系统备份。相反，该过程将更加“事件驱动”。任何信息都会有所帮助。我也不反对改变上面提到的故障转移工具。我一直在考虑虚拟化，但觉得这有点过头了，因为我必须使用的硬件是两个 mac mini 而不是大型服务器。

提前感谢您的指点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T20:13:14.783

好的，所以我找到了可能是我自己的问题的答案。从我正在阅读的内容来看，心跳和起搏器似乎用于监控活动服务器何时出现故障。然后他们启动被动服务器。我原本以为 Linbit 的 DRBD 是一个解决方案，但它在 mac osx 上不受支持。我最终决定在数据库级别处理复制。MySQL Workbench 是我用来配置设置的编辑器。我将 AASync 用于 PHP 文件，但我只是将它们放在计划的每晚备份中。

# android - 在 Android 上运行简单的 Qt Quick Project 时出现“致命错误”？

> ID：10116824
> 
> 赞同：1
> 
> 时间：2012-04-12T03:00:43.593
> 
> 标签：android, qt, qml

我刚开始使用 Necessitas Qt，我正在尝试在我的 Galaxy Tab 上运行一个测试程序

它不起作用，显示“您的应用程序遇到致命错误，无法继续”的错误。

然后我尝试运行一个只有“Hello World”的空qml，它仍然给我同样的错误。

这次我尝试只用一个按钮创建一个小部件，并且它安全加载

我需要一些关于如何跟踪错误的帮助，我需要检查我的 Necessitas 和 Galaxy 上的哪些设置才能使其正常工作？

我一直使用 Qt Quick Project 进行项目创建，但我没有接触 .pro 和 main.cpp，因为我还在研究那部分。

谢谢

# eclipse - Groovy Eclipse 插件不起作用

> ID：10116826
> 
> 赞同：2
> 
> 时间：2012-04-12T03:01:18.027
> 
> 标签：eclipse, groovy, sts-springsourcetoolsuite

我已经为 Eclipse 安装了 Groovy 插件，但是当我尝试创建一个新项目时，Groovy 项目图标没有出现。当我单击“其他”时，也没有 Groovy 文件夹。安装过程完成，没有任何明显的问题，一切似乎都很好。该插件还显示在已安装的插件中​​。

我在 Windows Vista 上使用 32 位 Eclipse IDE for Java Developers v3.7 和 Groovy 插件的[http://dist.springsource.org/release/GRECLIPSE/e3.7/](http://dist.springsource.org/release/GRECLIPSE/e3.7/)版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:09:17.887

我想我明白了，我从一开始就安装了 Groovy 附带的[Springsource ToolSuite](http://www.springsource.com/developer/sts)，但它抱怨我已经将它安装在 Program Files 目录中。所以我回去在我的用户文件夹中安装了原始的 Eclipse for Java Developers 和 violá - 它可以工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T03:20:20.570

我也有同样的问题，无法让它工作。因此，我切换到[Springsource ToolSuite](http://www.springsource.com/developer/sts)，它支持 Groovy/Grails 集成，并且基于 Eclipse 项目。

不过，您必须下载并安装几个扩展才能使 Grails 正常工作。设置非常轻松。作为 Groovy/Grails 的新手，我花了 15 分钟才开始上手。

如果您对非 Eclipse 项目的替代方案感兴趣，那么与常规 Eclipse 相比，Netbeans 7 具有更简单的 Groovy 插件集成过程。

# jquery - 使用 jQuery Cycle 同步多个滑块

> ID：10116828
> 
> 赞同：1
> 
> 时间：2012-04-12T03:02:06.013
> 
> 标签：jquery, cycle, jquery-cycle

我在一个项目中使用 jQuery Cycle。[你可以在 pastebin](http://pastebin.com/wBr8SyzD)看到我的脚本。

基本上，有三个不同的滑块与相同的方向控制相关联。我希望他们的过渡是同步的。

就目前而言，由于这里有三个单独的滑块实例，它们一开始是同步的，但最终会不同步——有时如果你离开浏览器窗口或其他东西，它们会立即失去同步。这会导致序列出现故障并且通常看起来不正常。我希望所有滑块同时触发，最好链接到`.sliderImages`幻灯片。

我已经尝试创建一个包含其他两个滑块的函数并将其放在滑块上的`before`选项中`.sliderImages`，但这使它变得很不稳定，而且我不知道足够的 JS 能够进行故障排除。

像往常一样，任何帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T22:04:01.373

因此，在将头撞到墙上一段时间后，我偶然发现了[Ryan Florence 的 jQuery Slideshow](http://ryanflorence.com/jquery-slideshow/)。它比 Cycle 或我尝试过的任何其他幻灯片插件（即使它需要 jQuery UI）都轻得多（很多，很多），它有很好的文档记录，并且相对容易插入并按照您的意愿开始工作。

[在他的幻灯片 Github 页面上](https://github.com/rpflorence/jquery-rf-slideshow/issues/5)有一个线程，他帮助我让代码正常工作，以及[最终代码的链接](http://pastebin.com/y8e9Ddju)。

当然，如果有人有改进我的代码的建议，我愿意接受。但是这个插件就像它们来的一样简单和多才多艺。

也许比我更有才华的程序员可以使它适合移动设备，例如[Flexslider](http://www.woothemes.com/flexslider) ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T18:41:59.463

如果您使用 (window).load 函数来加载 jquery 循环并使用具有相同选项的两个不同选择器，那么您应该使两个滑块完全同步。

我假设如果您将它们作为两个单独的 init 加载并且如果您在准备好的情况下加载它们，那么时间将会关闭。

无论如何，它对我有用。

# visual-studio-2010 - 在 VS 2010 中仅调试服务器代码

> ID：10116834
> 
> 赞同：0
> 
> 时间：2012-04-12T03:02:39.053
> 
> 标签：visual-studio-2010, debugging

令人恼火的是，MVC 不会[将 JavaScript 断点映射到源文件](http://connect.microsoft.com/VisualStudio/feedback/details/652428/mvc-3-mvc-2-debug-ignores-javascript-breakpoints)。这留下了一些非最佳选择：

*   按 Ctrl-F5 并使用 IE 的调试器。 **缺点**：不能同时调试服务器端。
*   插入`debugger;`语句。 **缺点**：需要编辑源代码，启动后无法添加断点。
*   `Web`将设置更改为`Don't open a page.`。单独启动 IE 并浏览到 URL。 **缺点**：启动 IE 的额外步骤；需要为每个项目添加书签 URL。

是否可以将 VS 2010 配置为启动 IE，但不能在 DEBUG 模式下，按下 F5 以便 IE 自己的脚本调试器可以运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T03:35:39.753

事实证明，一旦保存编辑，视图就会动态重新编译。使用这种方法，我`debugger;`在希望在 IE 中调试的视图中向 JavaScript 添加语句。

不像断点映射到源文件那样流畅，但效果很好。

# java - Java 和 NodeJS 如何在后端进行通信？

> ID：10116835
> 
> 赞同：1
> 
> 时间：2012-04-12T03:02:43.880
> 
> 标签：java, javascript, node.js

我已经做过一个项目，使用jsp作为后端，而后端的业务逻辑是用java实现的。现在我想重写这个项目。我希望后端与浏览器通信的部分是用nodejs实现的，后端的业务逻辑仍然使用java来实现。现在我遇到了一个关于如何在后端nodejs和java之间通信的问题。有没有可行的解决方案？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T05:12:26.367

Node.js 是一个独立的运行时环境（基于 V8，用 C++ 实现）。由于它不是基于 Java 技术，因此它没有“简单”的方式与运行在 JVM 中的 Java 代码进行通信。

集成不相关的技术，例如这两种技术，通常是通过使用某种[进程间通信](http://en.wikipedia.org/wiki/Inter-process_communication)来完成的，例如，TCP 套接字或具有每个平台本机绑定的消息队列（例如[zeromq](http://www.zeromq.org/)）。创建[JNI](http://en.wikipedia.org/wiki/Java_Native_Interface)接口是另一种可能的选择。

[在网上搜索诸如“node.js java bridge”之类的关键字](https://www.google.com/search?q=node.js+java+bridge)会产生许多有趣的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-20T11:11:04.207

我想你可以检查一下

[https://www.npmjs.com/package/java](https://www.npmjs.com/package/java)

使用它，您可以从 node.js 调用 java 的方法

# javascript - 有没有办法将初始化函数传递给 Orbit 幻灯片？

> ID：10116836
> 
> 赞同：11
> 
> 时间：2012-04-12T03:02:53.913
> 
> 标签：javascript, jquery, zurb-foundation, prettyphoto, orbit

我解决了我原来的问题，但我想知道是否有更优雅的解决方案。我正在使用 Foundation 的 Orbit 创建幻灯片。这不是简单的幻灯片，它是一个幻灯片，其中每张幻灯片都定义了一个数据标题，并且在这个数据标题中有需要加载模式对话框的 HTML。

如果您使用 Foundation，您会立即考虑使用 Reveal 库来调出模态对话框，我会的，但要求使用 prettyPhoto。（这些是要求。）问题是数据标题中的元素不受原始初始化调用的影响：

`$("a[rel^='prettyPhoto']").prettyPhoto();`

我需要做的是确保在加载每个数据标题时对其进行初始化。好吧，这就是问题所在。我已经通过使用 afterSlideChange 事件解决了幻灯片转换的问题，但问题是第一张幻灯片。我需要为显示的第一张幻灯片调用此方法。

这是解决此问题的代码：

```
<script type="text/javascript">
$(window).load(function () {
    $('#featured').orbit({
        afterSlideChange:function () {
            $("a[rel^='prettyPhoto']").prettyPhoto({
                default_width:640,
                default_height:500,
                theme:'light_square'
            });
        }, // empty function
        fluid:true                         // or set a aspect ratio for content slides (ex: '4x3')
    });
    $("a[rel^='prettyPhoto']").prettyPhoto({
        default_width:640,
        default_height:500,
        theme:'light_square'
    });
});
</script> 
```

有没有更好的方法来做到这一点而不必复制该代码。我应该自己定义一个“initializeSlide”事件，还是有一些我只是想念的答案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-24T12:26:17.777

轨道滑块没有公开太多方法。幸运的是，有一些简单的解决方法。

例如，您可以这样设置：

```
$(window).load(function () {
    var sliderChanged = (function sliderChanged(prevActive, active) {
        $("a[rel^='prettyPhoto']").prettyPhoto({
            default_width: 640,
            default_height: 500,
            theme: 'light_square'
        });
        return sliderChanged;
    }());
    jQuery('#featured').orbit({
        afterSlideChange: sliderChanged,
        fluid: true
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-29T19:46:45.137

在这里我认为你可以使用来自 jquery 的加载事件

```
 <script type="text/javascript">
  $(window).load(function () {
      $('#featured').orbit({fluid:true});
      $("a[rel^='prettyPhoto']").load(function(){
        $(this).prettyPhoto({
          default_width:640,
          default_height:500,
          theme:'light_square'
        });
      });
  });
 </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-05T19:24:19.213

随着 Foundation 4 的更新，现在有一个[`orbit:ready`](http://foundation.zurb.com/docs/components/orbit.html)活动。加载滑块时触发该事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-31T09:32:04.450

您正在使用幻灯片更改后

参考 Orbit 的[文档](http://foundation.zurb.com/old-docs/f3/orbit.php)

```
'afterSlideChange function(){}, //Empty Function for you to use after slide change' 
```

所以这个调用将清空函数，你必须一次又一次地调用它..

现在，我的问题是你为什么要这样做，有什么特别的原因吗？如果不是，那么只需删除它。

根据我的看法，Rohit 上面的回答将完成其余的工作......

我希望这会做:)

# c++ - 奇怪的编译时错误：无法解析方法 push_back

> ID：10116837
> 
> 赞同：0
> 
> 时间：2012-04-12T03:03:15.993
> 
> 标签：c++

我有以下代码处理向量中的向量。在使用 eclipse 时，我遇到了一个非常奇怪的编译时错误。

我正在尝试将 column_info 向量中现有条目的内容复制到新 table_info 向量中的新 column_info 向量。

```
 typedef struct _column_info
 {
char name[20]; // Column Name
int type; // 0:INT, 1: CHAR
int size;
int offset; // Start Position
 } column_info;

  typedef struct _table_info
 {
char name[20]; // Table Name
char columns[100];
vector<column_info> col;
char primary_key[20];
int recordsize;
int totalsize;
int records;
  } table_info;

  vector<table_info> v;

  table_info* get_table_info(const string& tablename)
  {
for (int i = 0; i < (int) v.size(); i++)
{
    if (strcmp(v.at(i).name, tablename.c_str()) == 0)
        return &v.at(i);
}
return NULL;
   }

  void select_table_nested(char* tablename, char* select_column[], int column_cnt[],      int nested_cnt, int select_column_count)
  {
   table_info* table_info;
   table_info = get_table_info(tablename);
   table_info new_table;
   column_info cols;

   for( int k =0; k < table_info->col.size(); k++)
   {
     strcpy(cols.name, table_info->col.at(k).name);
     cols.type = table_info->col.at(k).type;
     cols.size = table_info->col.at(k).size;
     cols.offset = table_info->col.at(k).offset;
     new_table.col.push_back(cols); ---> field 'col' could not be resolved
                                    ---> Method 'push_back' could not be resolved
    }
   } 
```

我错过了什么吗？因为我在同一代码的其他部分（在不同的函数中）执行 push_back 操作并且没有得到这个错误，除了这个特定的函数。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T03:09:49.650

这是第一个编译器错误吗？

```
 table_info* table_info;
   table_info = get_table_info(tablename);
   table_info new_table; 
```

在第一行中，您将创建一个在外部上下文`table_info`中隐藏类型的局部变量。`table_info`第三行应该是一个编译器错误，告诉你语法错误。从那时起，无论编译器试图解释什么，都不会让它相信这`new_table`是一个 type 的对象`table_info`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T03:09:44.560

您声明了一个名为 的变量`table_info`，并且有一个名为 的类型`table_info`，这让编译器感到困惑。当我通过 g++ 运行它时，它开始在线抱怨

```
table_info new_table; 
```

因为那时`table_info`是变量名，不再是类型名。

# c# - 如何通知用户他的 Windows Phone 操作系统不支持该应用程序

> ID：10116839
> 
> 赞同：2
> 
> 时间：2012-04-12T03:03:24.843
> 
> 标签：c#, silverlight, windows-phone-7, marketplace

我制作了一个 Windows Phone 应用程序并希望将其推向市场。但是，它仅支持 Windows OS 7.5。它不支持 Windows 0S 7.0。那么我应该如何通知用户呢？当用户尝试下载应用时，应用市场会通知用户吗？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T03:05:41.823

在 Marketplace 中，您将收到一条自动通知，告诉用户该应用程序与其操作系统版本不兼容，因此您作为开发人员不必担心这方面的问题。

他们不会看到**安装**选项。

# google-app-engine - 移动应用后端服务器提供商

> ID：10116843
> 
> 赞同：20
> 
> 时间：2012-04-12T03:03:58.107
> 
> 标签：google-app-engine, amazon-ec2

我的移动应用程序需要一个后端服务器——我需要能够编写服务器端逻辑，这样我就不需要下载整个数据库。我正在为移动应用程序使用 JavaScript + HTML5。

Amazon EC2 或 Google App Engine 是否能够做到这一点？还有其他选择吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-13T19:26:43.200

全面披露： **我在 AppEngine 上为 Google 工作，但我试图保持公正。** 我还应该（一如既往）指出，我给出的是我自己的意见，而不是公司的。

从理论上讲，您没有理由真正*需要*使用任何类型的后端服务提供商。您可以在任何地方连接具有静态 IP 地址和域名的服务器。实际上，没有人愿意自己处理所有这些事情的麻烦。

另一方面，您还有另一个问题要回答：消除麻烦的成本是多少？经验告诉我，成本通常是缺乏控制。为了尽可能减少麻烦，您必须避免人们做出选择。更少的选择意味着你的控制更少。

所以要回答的问题是：您需要多少控制权，以及您愿意处理多少麻烦？

如果您需要高级别的控制，并且愿意处理大量的麻烦，您可能需要“带有静态 IP 的盒子”选项。

AWS 减少了一些设置 boxen 的麻烦，但减少了您对运行软件的硬件的控制。这几乎肯定是您可以接受的，除非您有非常奇怪的硬件要求。

Google App Engine 消除了必须配置软件的麻烦，但减少了您对运行软件的软件堆栈的控制。您对软件有什么特殊要求吗？例如，您是否特别需要在某个版本的 Linux 上运行？您是否需要有特殊要求才能使用 Redis 而不仅仅是 memcache/database 组合？如果不是，那么这对您来说可能也是可以接受的。

大多数后端即服务提供商完全消除了编写后端的麻烦，但代价是消除了您对后端的控制。支持的身份验证方法对您来说是否足够好？后端是否允许您完全按照需要访问数据？如果是这样，这可能是您可以接受的。

现在，**我的公正性到此结束**。就个人而言，我觉得 App Engine 处于最佳状态。它为您提供了足够的控制权，而无需您管理应用程序的每个细节。如果您需要*更多*控制权，我建议您查看 AWS。如果您希望自动为您编写后端并且可以处理较少的控制，我建议您查看 BaaS。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-08T23:38:34.543

伊桑，

StackMob 有一个免费的包，你可以试试。您可以使用 JS SDK 编写您的 HTML5 应用程序并将内容保存到 StackMob 服务器。同时，您可以通过将自定义代码片段（java/scala/clojure）上传到 StackMob 来编写后端服务器端逻辑。它的设计目的是让这段代码自动成为一个 REST API，这样你就可以从任何地方点击它来执行逻辑服务器端并获得 JSON 作为回报。您可以免费在 StackMob 上托管您的 HTML5，也可以将您自己的域指向它。

*   [JS SDK](http://www.stackmob.com/devcenter/docs/Javascript-SDK-API)
*   [JS SDK 教程](http://www.stackmob.com/devcenter/docs/JS-SDK-Tutorial)
*   [服务器端自定义代码](http://www.stackmob.com/devcenter/docs/Getting-Started%3a-Custom-Code-SDK#a-how_does_it_work_)
*   [托管您的 HTML5](http://www.stackmob.com/devcenter/docs/StackMob-Hosted-HTML5%3a-GitHub)
*   [自定义域](http://www.stackmob.com/devcenter/docs/Deploying-your-HTML5-App#a-setting_up_custom_domains)

Erick - StackMob 工程师

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-12T07:55:06.737

关于明确命名的两个提供者 (+1)，[Daan 的回答是正确的。](https://stackoverflow.com/a/10118803/45773)

如果您想省去一些麻烦和/或在此过程中获得一些指导，您可能需要查看专门针对移动应用后端细分市场的专用[平台即服务 (PaaS)提供商之一。](http://en.wikipedia.org/wiki/Platform_as_a_service)与此同时，可能还有十几个，但从我的脑海中，我现在记得这三个（都是商业的，但通常是某种免费层来让你开始和/或永远甚至用于开发目的） - 没有具体顺序：

*   [StackMob](http://stackmob.com/)
*   [解析](https://parse.com/)
*   [加速器](http://www.appcelerator.com/)

您将通过这种方法获得的主要好处是处理平台而不是基础设施本身，它抽象出许多（如果不是全部）需要专门系统管理技能的主题（在团队中拥有这些知识通常不会有什么坏处）无论如何，请参阅[DevOps](http://en.wikipedia.org/wiki/DevOps)）。

要注意的主要缺点是最终避免供应商锁定，即根据您的需要，您可能希望能够将您的应用程序后端迁移到另一个提供商，如果可能的话，这目前并不总是那么简单。另一方面，如果您只是想快速入门和/或开发原型，这可能不是您现在关心的问题。

其中大多数将使用一些[基础设施即服务 (IaaS)](http://en.wikipedia.org/wiki/Infrastructure_as_a_service#Service_Models)提供商，如[AWS](http://aws.amazon.com/)或[Joyent](http://www.joyent.com/)作为他们的后端，顺便说一句。

祝你好运！

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-12T15:25:21.077

Steffan 的回答触及了核心要点，使用后端即服务 (BaaS) 平台还有一些额外的好处，而不仅仅是为您处理基础设施/DevOps 方面的事情。（全面披露：我是后端即服务提供商[Kinvey的工程师）。](http://www.kinvey.com)

*   其中许多服务提供 RESTful API 来直接访问您的数据。与其花时间自己动手（并再次重新发明轮子），您通常会得到自己的数据 API 并准备就绪。

*   BaaS 提供商通常会提供代码库来简化与您的 API 的连接。

*   它通常不仅仅是应用程序数据。例如，在 Kinvey，我们也提供大文件 (blob) 存储。如果您有任何图像、视频等，您可以零设置存储它们。

*   一些提供商还提供有关您的 API 使用情况的分析——您不需要重新发明的另一个轮子

*   与其他供应商合作：例如，Kinvey 通过 Urban Airship 提供推送通知

总之，看看 BaaS 看看它是否能满足您的需求可能是有意义的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-12T07:59:29.577

Amazon Web Services (AWS) 和 Google App Engine (GAE) 最初都可以免费使用，AWS 通过[AWS 免费套餐](http://aws.amazon.com/free/)和 GAE 默认情况下简单地使用。无论您的后端服务是什么，只要像在云提供商上一样保持它尽可能轻巧，您的计算量越大，成本就越高（或者越快越过免费使用限制）。我也会考虑 RackSpace 云 (RS)。[在这里](http://www.rackspace.com/cloud/cloud_hosting_products/servers/compare/)，RS 将他们的服务与 AWS 进行了比较。

一个**重要的区别**。在 AWS 和 RS 中，您可以控制您的实例，因为您“拥有”（付费）并控制一个完整的实例。另一方面，GAE 是一个*云应用平台*，因此，与[Heroku](http://www.heroku.com/)一样，您必须编写代码才能使用这样的应用平台。*云应用平台*有几个优点和缺点。

例如，作为 GAE 的一项优势，您可以免费获得大部分[DevOps](http://en.wikipedia.org/wiki/DevOps)。例如，在 GAE 中更新您的应用程序[非常容易](https://developers.google.com/appengine/docs/python/tools/uploadinganapp)，而在 AWS 上您必须编写自己的部署脚本。另一方面（作为我遇到的一个问题），在 GAE 上，您不能在同一实例上拥有自己的数据库服务器，因为您没有完全控制权；您将不得不寻求专有解决方案，例如 Google [Cloud SQL](https://developers.google.com/cloud-sql/)或 GAE 的[High Replication Datastore](https://developers.google.com/appengine/docs/python/datastore/hr/overview)。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-05T22:11:37.487

如果您正在寻找一个完全开源的解决方案后端，我建议您部署在 Amazon EC2 或[Deployd.com](http://deployd.com)服务或任何其他 node.js 提供商上。还有[DeploydKit](https://github.com/clooket/DeploydKit)或[RestKit](https://github.com/RestKit/RestKit)作为与它一起使用的原生 iOS 客户端库。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-12T06:53:54.500

没有 Adob​​e EC2 这样的东西，除非您指的是可以在 EC2 上设置的 Adob​​e 媒体服务器。但我假设您只是指 Amazon Web Services EC2 云计算服务。在这种情况下：是的，您可以在 EC2（以及 Google App Engine）上为您的移动应用程序运行后端服务器。您所要做的就是编写一个 Web 服务来接受来自您的移动应用程序的请求，查询数据库并应用您需要它应用的任何逻辑，然后将数据发送回您的移动应用程序。但听起来您可能想先阅读 Web 服务和云计算，否则这将是一项相当艰巨的任务 :)

不过，如果您不希望有太多用户，那么简单地将 PHP 脚本或其他东西放在与您的网络托管服务提供商的“传统”共享服务器上可能比为您的应用程序运行专用 EC2 实例更有价值。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-04-25T02:20:23.520

正如 Steffen 和 Dave 所说，后端即服务提供商之一可能就在您身边。大多数（如果不是全部）这些平台都具有相当强大的查询系统，因此您不必担心从数据库中筛选无关信息。我认为 Parse 专门介绍了一个用例，就像你提到的关于从数据库中仅提取 x 个最高分的用例。

如果您绝对需要服务器端代码，StackMob 允许自定义代码托管，我相信 Kinvey 也处于测试阶段。我认为 StackMob 只支持 Java 和 Clojure 的服务器代码，如果这很重要的话。

灵活性和易用性之间总是需要权衡取舍，但取决于您需要对数据进行多少控制，这些服务可以为您节省大量时间，而不会真正降低应用程序的功能。

# c++ - 视频录制编解码器/复用器包

> ID：10116847
> 
> 赞同：2
> 
> 时间：2012-04-12T03:04:52.110
> 
> 标签：c++, codec, video-recording, muxer

我们正在开发一个多媒体应用程序，我们需要能够将视频记录从网络摄像头保存到硬盘驱动器。目前，我们正在使用[WebM VP8 编解码器](http://www.webmproject.org/)和 muxer DShow 过滤器。

我们希望添加在 mkv、avi、mp4（可能）等不同容器中保存记录的能力。我认为我们还应该考虑许可 H.264 AVC 编解码器，因为我们将在应用程序中实现 Flash Media Server 流式传输。

我想我们应该考虑购买某种媒体录制 SDK。但是所有这些许可问题都让人头疼。

你能给点建议吗？可能你们中的某些人已经面临这样的任务并成功购买了一些东西或找到了开源解决方案？

请分享你的想法。

提前致谢，

安东

# c# - wpf 固定文档动态数据

> ID：10116850
> 
> 赞同：1
> 
> 时间：2012-04-12T03:05:23.333
> 
> 标签：c#, wpf, fixeddocument

我正在`FixedDocument`动态地创建和添加页面。

```
public partial class Window1 : Window
{
    FixedDocument fd = new FixedDocument();
    TextBlock page1Text = new TextBlock();

    public Window1()
    {
        InitializeComponent();
    }

    private void Print_Click(object sender, RoutedEventArgs e)
    {
        PrintDialog pd = new PrintDialog();

        fd.DocumentPaginator.PageSize = new Size(pd.PrintableAreaWidth, pd.PrintableAreaHeight);

        for (int i = 0; i <= 5; i++)
        {
            FixedPage page1 = new FixedPage();
            page1.Width = fd.DocumentPaginator.PageSize.Width;
            page1.Height = fd.DocumentPaginator.PageSize.Height;

            pages();
            page1.Children.Add(page1Text);
            PageContent page1Content = new PageContent();
            ((IAddChild)page1Content).AddChild(page1);
            fd.Pages.Add(page1Content);
        }

        DocumentViewer dr = new DocumentViewer();
        dr.Height = 700;
        dr.Document =fd;

        stack.Children.Add(dr);

    }

    private void pages()
    {
        page1Text.Text = "This is a test";
        page1Text.FontSize = 40;
        page1Text.Margin = new Thickness(96);

    }

} 
```

代码仍然给出 page1content 是另一个父级的子级的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T06:40:29.313

这是一个容易诊断的错误；视觉对象只能有**一个**父级，否则您将在`VisualTree`. 检查您的代码以检查您是否两次使用相同的视觉对象。

如果您希望视觉效果同时出现在两个地方，那么您需要复制它；如果第二次使用是有意的，那么您可以通过将自身从父级中移除来取消父级视觉。例如 ( `canvas.Parent.Remove(canvas)`)。

在发布的代码示例中，我可以确定**至少一个**会发生这种情况的实例，并在下面对此进行了详细说明。

* * *

您在块`vCanvas`中多次添加 to 的实例。`while(loop)`您需要`Canvas`为每次迭代创建一个新的。

```
var visual = /* unknown */;
var fd = new FixedDocument();   
while(loop)
{
    var canvas = PageInit();
    var page = new FixedPage();
    page.Width = visual.DocumentPaginator.PageSize.Width;
    page.Height = visual.DocumentPaginator.PageSize.Height;
    page.Children.Add(canvas);

    PageContent pageContent = new PageContent();
    ((IAddChild)pageContent).AddChild(page);
    visual.Pages.Add(pageContent);
} 
```

出于本示例的目的，我将`Canvas`在`PageInit()`.

```
private Canvas PageInit()
{
    var tb = new TextBlock();
    tb.Text = "From Data";
    var canvas = new Canvas();
    canvas.Children.Add(tb);

    return canvas;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:54:48.790

我做到了。解决方法如下

```
private void Print_Click(object sender, RoutedEventArgs e)
    {
        PrintDialog pd = new PrintDialog();

fd.DocumentPaginator.PageSize = new Size(pd.PrintableAreaWidth,fd.PrintableAreaHeight);

        for (int i = 0; i <= 5; i++)
        {
            FixedPage page1 = new FixedPage();
            page1.Width = fd.DocumentPaginator.PageSize.Width;
            page1.Height = fd.DocumentPaginator.PageSize.Height;

            UIElement page1Text = pages();
            page1.Children.Add(page1Text);
            PageContent page1Content = new PageContent();
            ((IAddChild)page1Content).AddChild(page1);
            fd.Pages.Add(page1Content);
        }

        DocumentViewer dr = new DocumentViewer();
        dr.Height = 700;
        dr.Document =fd;

        stack.Children.Add(dr);

    }

    private UIElement pages()
    {
        Canvas pcan = new Canvas();

        TextBlock page1Text = new TextBlock();
        page1Text.Text = "This is a test";
        page1Text.FontSize = 40;
        page1Text.Margin = new Thickness(96);

        pcan.Children.Add(page1Text);

        return pcan;
    } 
```

您可以跳过画布。这是我的项目的要求，所以我正在尝试。

# html - 任何智能 HTML5/CSS3 方法可以让 div 扩展以填充“客户区”？

> ID：10116855
> 
> 赞同：1
> 
> 时间：2012-04-12T03:05:50.893
> 
> 标签：html, layout, css

我有一个使用动态宽度的网页（例如，它扩展为占据整个浏览器区域）。在这个页面中，我有一个内容容器 div，我希望在其中有一个固定宽度的“左面板”和一个动态大小的中心/右侧区域。

```
<div id="content">
   <div class="left-panel">
   </div>
   <div class="center-panel">
   </div>
</div> 
```

我的问题是，当我将左侧面板设置为固定宽度并将中心面板设置为 100% 时，后者将占据内容 div 的整个宽度，而不仅仅是剩余区域。我可以使用边距来解决这个问题，但想知道是否有更聪明的方法可以使用 HTML5 和/或 CSS3 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T03:18:55.027

我最近听说了[css3 flexbox](http://dev.w3.org/csswg/css3-flexbox/)。还没用过，不过看起来不错。我还发现了这个[非常好的教程](http://www.the-haystack.com/2012/01/04/learn-you-a-flexbox/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T04:25:35.987

我不确定我是否完全理解你的问题，但这就是你所追求的吗？？？[http://jsfiddle.net/maU5N/](http://jsfiddle.net/maU5N/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T03:15:25.007

我的建议是使用媒体查询来获取浏览器宽度并修复每个浏览器分辨率的宽度。

# javascript - Dojo 对话框未加载样式

> ID：10116856
> 
> 赞同：2
> 
> 时间：2012-04-12T03:06:14.060
> 
> 标签：javascript, openlayers, dojo

我正在尝试使用 dojo 对话框 dijit，但它加载时没有样式。我的意思是，claro 主题没有应用于对话框。

我也在页面上使用 openlayers，由于某种原因，样式没有加载。

我的 dojo 导入具有 parseOnLoad = true ，这是用于创建对话框的代码：

```
 var dialog = new dijit.Dialog({
            id:"servicesDialog",
            title: "Serviços",
            style: "width:300px;background-color:white;padding:25px;",
            content: "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
        });

        dialog.show(); 
```

![没有样式的对话框](../Images/17f6d8a74671d4e4c169de25de5a8ed2.png)

我希望对话框提出道场风格。为什么这不起作用？

编辑：我的猜测是 openlayers 使用的排序被对话框搞砸了。因此屏幕截图#2。方点位于对话框的顶部。

![地图叠加对话框 div 中的功能](../Images/b72fa7c4485a508ab3c412d618a5636c.png)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T10:20:44.320

我推测您没有包含主题。添加以下css并将主题添加到正文中。

```
<head>
  <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/dojo/1.7.2/dijit/themes/claro/claro.css" />
</head>
<body class="claro"> 
```

# javascript - 如何创建具有下拉菜单的全长导航菜单

> ID：10116859
> 
> 赞同：2
> 
> 时间：2012-04-12T03:06:49.987
> 
> 标签：javascript

我发现这个脚本很好用，直到你在等式中引入一个嵌套菜单。 [脚本](https://stackoverflow.com/a/7652656)

如何排除脚本应用于嵌套菜单？有没有办法给嵌套菜单一个类或 id 并将其从脚本中排除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T03:12:10.047

如果我正确理解您的问题，您可以将一个类添加到顶级菜单并排除所有不是：HTML：

```
<ul class="menu">
    <li class="top-level">About Us</li>
    <li class="top-level">Our Products</li>
    <li class="top-level">FAQs</li>
    <li class="top-level">Contact</li>
    <li class="top-level">Login</li>
</ul> 
```

Javascript：

```
function alignMenuItems(){
    var totEltWidth = 0;
    var menuWidth = $('ul.menu')[0].offsetWidth;
    var availableWidth = 0;
    var space = 0;

    var elts = $('.menu li.top-level'); //<-
    elts.each(function(inx, elt) {
        // reset paddding to 0 to get correct offsetwidth
        $(elt).css('padding-left', '0px');
        $(elt).css('padding-right', '0px');

        totEltWidth += elt.offsetWidth;
    });

    availableWidth = menuWidth - totEltWidth;

    space = availableWidth/(elts.length);

    elts.each(function(inx, elt) {
        $(elt).css('padding-left', (space/2) + 'px');
        $(elt).css('padding-right', (space/2) + 'px');
    });
} 
```

# ninject - 如何在 ASP.NET MVC 应用程序中为非 MVC 对象使用 Ninject

> ID：10116860
> 
> 赞同：0
> 
> 时间：2012-04-12T03:06:53.540
> 
> 标签：ninject, ninject.web.mvc

我有一个使用 Ninject（NuGet 安装）的 ASP.NET MVC 3 项目。我试图了解如何使用它将依赖项注入非 MVC 对象。

我有一些类似于下面的代码。如何使用 Ninject 在下面的对象中获取 IStore 的具体实例？

```
public class SomeObject
{
    private static IStore _store;

    public static IStore CurrentStore
    {
        get 
        {
            if (_store == null)
            {
                // Get Instance of _store.
            }
            return _store; 
        }
    }
} 
```

在 Global.asax 中：

```
protected Application_BeginRequest()
{
    IStore store = SomeObject.CurrentStore;
} 
```

在 NinjectWebCommon.cs 中：

```
 private static void RegisterServices(IKernel kernel)
    {
        // Module that binds a concrete type of IStore.
        kernel.Load<WebModule>();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T15:07:45.173

对于请求处理，最简单的方法不是在 global.asax 中而是在 IHttpModule 中进行。如果为 HttpModule 添加绑定，则可以将依赖项作为构造函数参数：

```
Bind<IHttpModule>().To<MyHttpModule>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:49:39.250

看起来这混淆了 DI 容器和 Web 应用程序之间的界限。

您可能需要一个类来检索商店。然后这个类可以决定从哪里实际检索存储。它还包含初始化例程，可以在启动时调用。

这样，您的 Ninject 模块不会在其中获取 Web 应用程序代码，您可以根据上下文配置商店的加载方式（例如，测试可能与生产不同）。

# python - 使用 MPTT 的数据库驱动模板上下文：如何表示列表与字典？

> ID：10116863
> 
> 赞同：2
> 
> 时间：2012-04-12T03:07:12.483
> 
> 标签：python, django, mptt

我遇到过很多我想要一些数据库驱动的任意嵌套模板上下文的情况。此内容总是很简单，但结构差异很大。

过去，我为网站的一小部分创建模型，随着模型数量的增加，维护起来很快就变成了一场噩梦，我开始为每个可编辑内容的小区域重复自己。管理员对一个特定的部分充满了内联。

为了解决这个问题，我想创建一个简单的数据库驱动上下文模型。我可能会创建一个像 django's admin 这样的小框架来为给定目的生成默认结构。

我目前的模型基本上是这样的：

```
class DBContext(MPTTModel):
    parent = TreeForeignKey('self', null=True, blank=True, related_name='children')
    key = models.CharField(max_length=256)
    value = models.TextField(blank=True)
    file = models.FileField(upload_to='dbcontext/files/', blank=True, null=True) 
```

从这个模型中，我可以轻松地创建任意深度的 Python 字典。问题是如何最好地区分子节点的列表和字典：单个字典作为子节点，值列表作为子节点，或字典列表作为子节点。

### 孩子们被迫进入的额外`type`领域？

```
class DBContext(MPTTModel):
    NONE = 0
    LIST = 1
    DICTIONARY = 2
    COERCE_TYPES = [
        (NONE, 'None'),
        (LIST, 'Children as list'), # ignore keys.
        (DICTIONARY, 'Children as Dictionary'),
    ]
    parent = TreeForeignKey('self', null=True, blank=True, related_name='children')
    key = models.CharField(max_length=256)
    value = models.TextField(blank=True)
    coerce_type = models.IntegerField(default=0, choices=COERCE_TYPES)

    def to_python(self):
        # when converting to python, any children of a node would be coerced into the value_type type

# Converted to python:
{
    'foo': { # coerce_type == DICTIONARY
        'child_node_as_dict': '',
    },
    'bar': [ # coerce_type == LIST
        'child_node_as_list',
    ],
    'baz': [ # coerce_type == LIST
        { # coerce_type == DICTIONARY
            'child_node_list_of_dicts': '',
        },
    ],
} 
```

### 通过子键确定？

*   如果所有孩子共享相同的密钥，则它是一个列表。忽略键。
*   如果有一个+孩子，那就是一本字典。
*   如果没有子节点，则为字符串。

有什么建议么？

PS：我不腌制的唯一原因是因为我正在使用管理员来处理编辑这些数据，而我还没有真正探索过替换`FileField`. 事实是我还没有深入研究存储。基本上我在这里的动机是快速创造一些有用的东西。如果我强制所有孩子成为字典项目并解决我们在使我们的网站管理员的随机区域可编辑时遇到的问题，该系统在大约 5 分钟内工作。

# c# - Bing 地图按 ID 搜索

> ID：10116867
> 
> 赞同：1
> 
> 时间：2012-04-12T03:07:46.660
> 
> 标签：c#, bing-maps, bing-api

使用 SOAP API 进行 Bing 搜索时，返回的结果具有关联的 Id。

有没有办法通过它的 ID 进行搜索并取回单个记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-18T12:23:25.643

不，没有选择。

此外，对于遇到此线程的其他任何人。Bing Maps SOAP 服务已经过时了，Bing Maps 团队在 4 年前发布了更好、更快的 Bing Maps REST 服务时停止推荐它们。

# python - Python CGI 饼干

> ID：10116873
> 
> 赞同：1
> 
> 时间：2012-04-12T03:08:48.273
> 
> 标签：python, cookies, cgi

我有个问题。我正在编写一个 python CGI 脚本，我必须在其中使用 html 输入来更改背景和前景色。我想实现cookie。我面临的问题是我可以更改任意数量的背景颜色，但是当我输入任何前景色时，我无法对输入进行任何更改，我必须再次重新启动应用程序。这是我的代码：

```
<pre>
<code>

    #!/usr/bin/python

import cgi
import cgitb
cgitb.enable()

import Cookie
import os

backgroundColor = None
foregroundColor = None

form = cgi.FieldStorage();
if 'background' in form:
    C = Cookie.SimpleCookie()
    backgroundColor = form.getvalue('background')
    C['background'] = backgroundColor
    print C

if 'foreground' in form:
    D = Cookie.SimpleCookie()
    foregroundColor = form.getvalue('foreground')
    D['foreground']= foregroundColor
    print D

print """Content-Type: text/html

<html>
  <head>
    <title>Biweekly Task 3</title>
  </head>
  """

if backgroundColor:

    print """
    <body bgColor=%s>
    <form method="GET" action="http://localhost:8000/cgi-bin/t3.py">
    </form>""" % (backgroundColor)

if foregroundColor:
    print """
    <body>
    <h1 style="color:%s"> Biweekly Task 3 </h1>
    <p style="color:%s"> Choose Background Color: <input type="text" name="background">
    <br/>
        Choose Foreground Color: <input type="text" name="foreground">
    <br/>
                   <input type="submit"></p>
    <form method="GET" action="http://localhost:8000/cgi-bin/t3.py">
    </form>""" % (foregroundColor, foregroundColor)

else:
    print """
    <form method="POST" >
    <h1> Biweekly Task 3 </h1>
      <p>Choose Background Color: <input type="text" name="background">
    <br/>
        Choose Foreground Color: <input type="text" name="foreground">
    <br/>
                   <input type="submit"  value="Change"></p>
    </form>
  </body>
</html>
"""
</code>
</pre> 
```

谁能告诉我问题并修复此代码。

# continuous-integration - Cruisecontrol 显示 ant 错误消息并自行解决

> ID：10116874
> 
> 赞同：0
> 
> 时间：2012-04-12T03:08:54.477
> 
> 标签：continuous-integration, build-automation, cruisecontrol

我最近看到这个错误信息，

> Ant 错误消息：/opt/cruisecontrol/workdir/framework.xml:19：执行此行时发生以下错误：/opt/cruisecontrol/workdir/checkout/framework/source/framework.xml:103：执行此行时发生以下错误执行此行：/opt/cruisecontrol/workdir/checkout/framework/source/framework.xml:1101：编译失败；有关详细信息，请参阅编译器错误输出。

在此之前，巡航控制工作正常，没有显示任何错误。然后，再次检查后，巡航控制会自动自行修复错误（不显示任何错误）

谁能告诉我为什么巡航控制会发生这种情况以及为什么我会看到该错误？这是一个错误吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T05:23:59.433

如果您有多个构建循环，可能会发生这样的事情。使用以下命令查找是否有多个循环正在运行。

```
ps aux | grep cruisecontrol 
```

# asp.net - 如何使文本在 ASP 的业务层中具有标记

> ID：10116877
> 
> 赞同：1
> 
> 时间：2012-04-12T03:09:42.283
> 
> 标签：asp.net

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T03:15:08.300

```
newRow[colConvert] = "<a href='newPage'>" + row["Convert"].ToString() + "<a/>"; 
```

当然，您确实需要在转换它们之前测试数据库中的值是否为 null。最好使用 StringBuilder 生成链接。

# ios - 将 Game Center 排除在“精简版”应用程序之外？

> ID：10116879
> 
> 赞同：0
> 
> 时间：2012-04-12T03:09:48.737
> 
> 标签：ios, xcode

我正在制作一个游戏应用程序的免费版本，部分是为了刺激购买完整版，部分是因为我不想为本质上相同的游戏有两个单独的排行榜，我决定离开 Game免费版居中。

我的具体问题是：在完整版中，我有一个链接到游戏中心高分的“排行榜”按钮。在精简版中，如果我将该按钮留在那里，Apple 会拒绝我，但它会显示一个弹出窗口，说明特定功能仅在完整版中可用？还是我最好从精简版中完全删除该按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T03:24:54.683

I believe they will reject you --> You are supposed to have a complete app. If it s a paid feature, then you should be able to unlock the lite version to use that feature. But you could just email apple and ask them.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T03:11:53.697

在我的脑海中，我会说不。Apple 无权拒绝您遗漏付费功能。如果您不信任我，或者需要第二个更权威的意见，请扫描 Apple [HIG](http://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/MobileHIG/Introduction/Introduction.html)。（虽然真的，将按钮的 alpha 设置为 0.0f 有多难？）。

编辑; 看过 HIG 之后，我可以说你可以走任何一条路。涉及保留按钮的解决方案会提醒用户他们正在使用应用程序的精简版，并可能允许他们选择购买您从他们那里保留的功能。无论哪种方式，这都是很好的设计，一个只会让你多赚一点：P

# javascript - Javascript 提前退出循环

> ID：10116883
> 
> 赞同：2
> 
> 时间：2012-04-12T03:09:56.033
> 
> 标签：javascript, loops, for-loop

我有一个我正在制作的掷硬币程序的循环。问题是它似乎很早就退出了。看一看。

```
$(function() {
    $('#rollDice').click(function() {

        var e = document.getElementById("diceSides");
        var diceSides = e.options[e.selectedIndex].text;
        var diceRolls = document.getElementById('rollCount').value;

        if (diceRolls.match(/^[\d]*$/ )) {      
            if (diceRolls == "")  {
                alert ("Please fill out all forms then try again.");

            } else {

                $('#diceRollContainer').slideDown('slow');

                for (i=0;i<diceRolls;i++) {
                    var randNum = Math.floor(Math.random()*diceSides)+1;
                    var rolls = ("You rolled a " + diceSides + " sided die " + diceRolls + " times, and got the numbers ");

                    rollMinOne = rolls - 1;
                    if (i == rollMinOne) {
                        var rolls = (rolls + randNum + ".");
                    }
                    var rolls = (rolls + randNum + ", ");

                }
                alert (rolls);
            }
        } else {
            alert ("Make sure you only enter numbers and no spaces, then try again.");
        }
    });
}); 
```

问题是程序在 for 循环似乎完成之前警告滚动。为什么要这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T03:50:01.453

您在该代码中有几个错误，但解释您所看到的行为的一个错误是您将`rolls`每次通过循环的值重置为初始字符串。

一旦将那条线移出并获得更接近的值，但您也在计算`rollsMinOne`从`rolls`，而不是`diceRolls`，如您所愿（这就是为什么选择好名字如此重要），这意味着 if 语句永远不会为真（因为字符串减去一个数字是值`NaN`“不是数字”，它不等于*任何东西*[甚至它本身！]）。

那么唯一的功能（而不是样式或设计）问题是，即使您已经添加了一个带有句点的值，您也会在末尾附加一个逗号。

把它们放在一起：

```
 var rolls = ("You rolled a " + diceSides + " sided die " + diceRolls + " times, and got the numbers ");
    for (i=0;i<diceRolls;i++) {
        var randNum = Math.floor(Math.random()*diceSides)+1;

        rollMinOne = diceRolls - 1;
        if (i == rollMinOne) {
            rolls = (rolls + randNum + ".");
        } else {
            rolls = (rolls + randNum + ", ");
        } 
```

尽管正如其他答案所提到的，有更简单、更快捷的方法可以获得相同的结果，但我觉得理解代码为什么不起作用很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T03:29:51.533

我感到无聊并实现了您的代码，这似乎只需最少的测试即可

```
<script>
    $(function() {
        $('#rollDice').click(function() {

            var diceSides = $('#dice-sides').val();
            var diceRolls = $('#roll-count').val();

            if (diceRolls.match(/^[\d]*$/ )) {      
                if (diceRolls == "")  {
                    alert ("Please fill out all forms then try again.");

                } else {
                    $('#output').text(
                        "You rolled a " + diceSides + 
                        " sided die " + diceRolls + 
                        " times, and got the numbers ");

                    for (i=0; i<diceRolls; i++) {

                        var randNum = Math.floor(Math.random()*diceSides)+1;

                        $('#output').append(randNum);
                    }
                }
            } else {
                alert ("Make sure you only enter numbers and no spaces, then try again.");
            }
        });
    });
</script>
<form onsubmit="return false;">
    <label>Sides</label>
    <input id="dice-sides" type="text" value="6">
    <label>Count</label>
    <input id="roll-count" type="text" value="1">
    <button id="rollDice">Roll</button>
</form>
Rolls
<div id="output"> 

</div> 
```

# php - 通过 PHP SSH 更改 Unix 远程服务器的密码

> ID：10116886
> 
> 赞同：3
> 
> 时间：2012-04-12T03:10:32.540
> 
> 标签：php, unix, ssh, passwords

我正在尝试使用 phpseclib 通过其 NET_SSH2 函数更改我的远程服务器的密码。下面是我正在使用的。

```
 <?php
    require_once('Net/SSH2.php');

    $ssh = new Net_SSH2('server1.server.com');
    if (!$ssh->login('user', 'pass')) {
        exit('Login Failed');
    }

    $ssh->write("passwd\n");
    $ssh->read('(current) UNIX Password:');
    $ssh->write("oldpass\n");
    $ssh->read('New password:');
    $ssh->write("newpass\n");
    $ssh->read('Retype new password:');
    $ssh->write("newpass\n");
    echo $ssh->read('[prompt]');

    ?> 
```

每次我的脚本只是挂起并且似乎没有做任何事情。有什么我可能做错了吗？

这是关于此的文档：http: [//phpseclib.sourceforge.net/documentation/net.html](http://phpseclib.sourceforge.net/documentation/net.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T10:52:40.300

这可能会帮助你

```
<?php
$output = shell_exec('sudo passwd root');
echo "<pre>$output</pre>";
?> 
```

`shell_exec`您可以通过函数执行任何linux命令

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T20:04:19.773

这应该适合你

```
<?php
    include('Net/SSH2.php');

    $ssh = new Net_SSH2('www.domain.tld');
    if (!$ssh->login('username', 'password')) {
        exit('Login Failed');
    }

    echo $ssh->read('username@username:~$');
    $ssh->write("passwd\n");
    echo $ssh->read('(current) UNIX password:');
    $ssh->write("oldpassword\n");
    echo $ssh->read('New UNIX password:');
    $ssh->write("newpassword\n");
    echo $ssh->read('Retype new UNIX password:');
    $ssh->write("newpassword\n");
    echo $ssh->read('passwd: all authentication tokens updated successfully.');

?> 
```

# objective-c - iOS - UIScrollView 内容大小设置为零

> ID：10116887
> 
> 赞同：0
> 
> 时间：2012-04-12T03:10:48.757
> 
> 标签：objective-c, ios, uiscrollview, size, contentsize

基本上我的问题是，如果我将滚动视图的内容大小宽度或高度设置为零 (0)，是否会出现问题。

例如：`scrollView.contentSize = CGSizeMake(100,0);`

基本上我正在尝试禁用垂直滚动。我尝试将内容大小高度设置为与实际滚动视图高度相同。但显然它不起作用。它有一小块额外的空间，因此可以进行垂直滚动。我尝试使用零作为内容大小高度，它就像一个魅力。

现在的问题是，我正在考虑这样做是否会产生后果。如果有知道的人请告知。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T03:17:28.753

如果您在更改之前显示`contentSize`a ，您会发现它已被初始化为。因此，将其恢复到该设置可能是安全的。`UIScrollView``0,0`

# php - 在 php 中包含/需要一次

> ID：10116889
> 
> 赞同：1
> 
> 时间：2012-04-12T03:10:54.917
> 
> 标签：php, javascript, mysql

您能否告诉我哪个（包括或需要一次）更好用。正如我所读的那样， require_once 是首选，因为它会在错误后停止执行。这取决于您要包含的内容，对吗？还使用 include 和 require 使代码更有效？正如我可以理解的那样，只需使代码更清晰（有助于避免重复部分代码），由于在每个文件中添加了相同的代码，因此无法实现有效性。最后，我的每个文件中都有一些 javascript 代码（每个文件中有不同的 javascript 代码） 将我所有页面中的所有 javascript 代码放入一个文件中并仅在每个页面中包含此文件是个好主意吗？先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T03:13:27.883

对于你的 JS 问题，做单独的问题。

这对我来说很简单：

**包含一次**

仅当您的脚本将在没有包含的脚本、没有错误或奇怪的行为（罕见）的情况下继续使用时使用。

**要求一次**

如果您的脚本需要所需的文件，例如数据库连接详细信息或任何类似的文件，请使用。

如果您的 error_level 设置得当，这不应该造成问题/问题。

# java - jdom 性能

> ID：10116891
> 
> 赞同：2
> 
> 时间：2012-04-12T03:11:24.230
> 
> 标签：java, xml, performance, xml-parsing, jdom

我目前正在使用本机 Java XML 处理库 (Xerces)。我不能使用任何 sax 解析器，因为我需要随机访问 xml 节点。我发现在解析 XML 文件时 CPU 使用率达到 100%。我正在处理大量的小尺寸（1-10kb）-

```
while(hasFile){
processXMlfile(hasFile.next);
} 
```

在 processXMlfile() 我正在构建解析和处理文件。

如果我迁移到 JDOM 库，我会获得任何性能优势吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T09:49:11.963

JDOM 2.0.0 解决了许多性能问题。其中之一与 XML 文件的“紧密循环”处理直接相关。

看一下：

[http://hunterhacker.github.com/jdom/jdom2/apidocs/org/jdom2/input/sax/package-summary.html](http://hunterhacker.github.com/jdom/jdom2/apidocs/org/jdom2/input/sax/package-summary.html)

您应该执行以下操作：

```
SAXBuilder saxbuilder = new SAXBuilder();
saxbuilder.setVariousConfigurations()
SAXEngine saxengine = saxbuilder.buildEnine();

while(hasfile) {
  processXML(saxengine, nextfile);
} 
```

在 JDOM 2.0.0 中使用 SAXEngine 概念将完全消除 SAX 解析基础结构的设置。该设置时间占整体处理的巨大比例。

虽然您可能仍以 100% 运行，但您会发现您的吞吐量可能会增加一倍以上....

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T08:39:23.587

瓶颈可能是 XML 解析，而 JDOM 可能会在后台使用相同的 XML 解析器，因此不会有任何区别。

解析大量小文件时的一个关键因素是避免解析器初始化成本。对所有文件重复使用相同的 XML 解析器实例。

# android - 自动回复？

> ID：10116896
> 
> 赞同：2
> 
> 时间：2012-04-12T03:12:09.810
> 
> 标签：android, sms, broadcastreceiver

我想制作一个应用程序，它在 user1 中向 user2 发送带有一些特定文本的消息。用户 2 自动通过短信将位置发送给用户 1，但不应通知用户 2。下面的 BroadcastReceiver 收到文本时显示“知道了”.. 收到消息“UPDATE”时如何进行自动回复

IncomingSMSReciever.java

```
public class  IncomingSMSReceiver extends  BroadcastReceiver{
private static final String SMS_RECEIVED =
        "android.provider.Telephony.SMS_RECEIVED";

@Override
public void onReceive(Context _context, Intent _intent) {

    if (_intent.getAction().equals(SMS_RECEIVED)) {
        Bundle bundle = _intent.getExtras();
        if (bundle != null) {

            Object[] pdus = (Object[]) bundle.get("pdus");

            SmsMessage[] messages = new SmsMessage[pdus.length];
            for (int i = 0; i < pdus.length; i++)
                messages[i] = SmsMessage
                        .createFromPdu((byte[]) pdus[i]);
            for (SmsMessage message : messages) {
                String strPhoneNo = message.getOriginatingAddress();
                String msg = message.getMessageBody();

                if (msg.startsWith("UPDATE"))
                {

                    Toast.makeText(_context, "Whats up!!", Toast.LENGTH_LONG).show();
                    // this stops notifications to others
                    this.abortBroadcast();
                    // do what you want

                }
            }
        }
    }
}
} 
```

SvrSmsListener.java

```
public class SrvSmsListener extends Service 
{
IncomingSMSReceiver SMSReceiver=new IncomingSMSReceiver();
public IBinder onBind(Intent arg0) {
// TODO Auto-generated method stub
return null;
}
public void onCreate() {
final String SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";
IntentFilter filter = new IntentFilter(SMS_RECEIVED);

BroadcastReceiver receiver = SMSReceiver;
registerReceiver(receiver, filter);
}
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
return super.onStartCommand(intent, flags, startId);
}

@Override
public void onDestroy() {
if (SMSReceiver != null)
{
    unregisterReceiver(SMSReceiver);
}
}
public void onReceive(Context context, Intent intent) {
// TODO Auto-generated method stub

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T15:02:31.557

当您检测到收到的消息以“UPDATE”字开头时，您可以调用SmsManager 并使用sendTextMesage 向指定号码发送短信。您似乎已准备好除发送部分之外的所有代码，您是否面临问题。

# ios - 在合并 git 分支后，Xcode 4 中“无方案”问题的最佳解决方案

> ID：10116897
> 
> 赞同：7
> 
> 时间：2012-04-12T03:12:20.830
> 
> 标签：ios, git, xcode4, merge

合并冲突问题后出现“无方案”问题

> 自动合并 SampleProject.xcodeproj/project.pbxproj CONFLICT（内容）：SampleProject.xcodeproj/project.pbxproj 中的合并冲突自动合并失败；修复冲突，然后提交结果。

当然，我在合并冲突时采取了一些有缺陷的操作。问题是在这种情况下是否有解决“无方案”问题的最佳解决方案。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-05-04T11:26:06.777

当 Schemes 显示“ **No Scheme** ”选项时，单击

**`No Scheme`-> `Manage Scheme`-> 然后点击按钮`Autocreate Schemes Now`**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-01-18T23:24:06.053

我发现评分最高的答案对我不起作用，所以我想我会在这里发布我常用的方法 - 因为我只需要解决这个问题：

我们知道问题所在——这个问题上的错误其实很清楚：

> 自动合并 SampleProject.xcodeproj/project.pbxproj CONFLICT（内容）：SampleProject.xcodeproj/project.pbxproj 中的合并冲突自动合并失败；修复冲突，然后提交结果。

我们在**project.pbxproj**文件中存在冲突。

如果它说“appDelegate.h 中的冲突”，我们将确切地知道该怎么做，但项目无法编译的事实似乎比正常的冲突更令人担忧——这实际上是这样的。

那么我们该如何解决这个冲突呢？

1.  首先导航到您的项目文件
2.  右键单击 xcodeproj 文件
3.  单击显示包内容

[![在此处输入图像描述](../Images/2d7a5c8f482c5478cd6a65b0c0636c6d.png)](https://i.stack.imgur.com/AuZ7q.png)

4.  双击 project.pbxproj 文件（冲突错误中提到的那个）

[![在此处输入图像描述](../Images/815eca7b2214adc0a238007c7eed3223.png)](https://i.stack.imgur.com/V1gyo.png)

5.  最后像往常一样解决冲突。这需要一点思考 - 值得阅读并尝试大致了解正在发生的事情。通常，尽管很容易看到需要保留的内容：

[![在此处输入图像描述](../Images/838f5609f2ab8e5bba3d267e7015c649.png)](https://i.stack.imgur.com/ltK6I.png)

以上是冲突的外观示例。

在此文件中找到所有冲突后，只需保存并重新加载项目。该计划应该回来并且项目工作。

**注意：**如上所述，在解决冲突时需要考虑一些问题。通常它们会很容易（只需删除冲突行），但有时您需要修复一些代码。如果您看到下面的示例 - 文件已损坏并需要修复：

[![在此处输入图像描述](../Images/b046461d7f4c69dce70111bb9470fdf1.png)](https://i.stack.imgur.com/Mh8ik.png)

此示例中所需的修复是：

```
 path = DetailModels;
        sourceTree = "<group>";
    }; 
```

此代码需要添加，可以从上述区域的代码中计算出来。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-30T17:58:18.383

类似的问题。关闭我的项目，退出然后重新打开 XCode，我的计划又回来了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-12T07:41:57.093

我有同样的问题。经过一些尝试，我打开 Xcode 并进入问题导航器，将冲突的文件作为源代码打开，然后开始按关键字搜索，`<<<<<<< HEAD`然后开始修复冲突。之后目标出现了:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-19T22:54:53.060

以下是我解决“无计划”困境的方法。经过几个小时的反复试验，我尝试删除没有方案的 xcode.workspace 并 cd 到刚刚删除工作区的文件夹，然后运行 ​​pod install 重新下载工作区。然后我所有的项目和文件夹都出现了。

在删除工作区之前，导航到目标-> 构建设置并将用于调试和发布的框架搜索路径设置为 ($inherited) 和 $(SRCROOT) 也很重要。

希望这对某人有帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-23T03:35:57.290

在我使用 git mergetool 解决我的冲突后，我遇到了这个问题。我忘记关闭 filemerge 的所有选项卡并试图打开我的工作区。所以，这就是问题所在。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-30T06:43:03.113

**在 Xcode 12.1 和 Swift 5 中**

**关注对我有用的事情**

一键点击无方案

2-点击管理方案

3-单击立即自动创建方案 [![在此处输入图像描述](../Images/b4cc3b2d72d4421834ddd2f03aef263c.png)](https://i.stack.imgur.com/6FBop.png)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2020-05-31T10:35:17.123

删除我的整个项目并重新安装 pod 文件解决了该问题（以上方法均无效）。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-04-10T15:55:14.523

删除 .xworkspace 文件，然后重新运行 pod install。你会取回你的计划。

# git - 通配符 git 错误

> ID：10116899
> 
> 赞同：2
> 
> 时间：2012-04-12T03:13:02.247
> 
> 标签：git

如何更正以下错误：

```
There are no candidates for merging among the refs that you just fetched.
Generally this means that you provided a wildcard refspec which had no
matches on the remote end. 
```

当我使用 git 从原点拉到本地分支时会发生这种情况。

我能做些什么？

# c++ - 使用指针初始化结构数组 - C++ ...？

> ID：10116900
> 
> 赞同：0
> 
> 时间：2012-04-12T03:13:04.810
> 
> 标签：c++, arrays, pointers, struct

如何使用指针初始化这个结构数组？我尝试将输入读入结构变量并得到垃圾输出，但是当我初始化一个静态数组时，我输出了正确的变量。

```
 unsigned int data = numberOfLines();
    patient *q; //struct pointer

    q = new patient[data];

   //What I want to do
   q = new patient[data] = {0,0,0,0,0}; // initialize the array 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T03:32:14.917

你可能想要`std:: fill()`：

```
#include <algorithm>

patient *patients = ...;
size_t count = ...;
std::fill(patients, patients + count, DEFAULT_PATIENT_VALUE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T03:20:28.957

如果您使用的[是非 POD 类型](http://en.wikipedia.org/wiki/Plain_old_data_structure)，请遍历您的患者数组并初始化每个单元格。

如果你想变得花哨，你可以通过创建一个函数来获得一点灵活性。

```
patient * createInitializedPatientArray(patient defaultPatient, int length)
{
    patient * temp = new patient[length];
    for(int x = 0; x < length; x++) 
        temp[x] = defaultPatient;
    return temp;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T03:24:10.543

Maybe you are looking for an elegant solution to clear the entire array of structures:

```
memset(q, 0, sizeof(patient) * data); 
```

(assuming your structure contains only POD types)

# matlab - Matlab：如何使用`sscanf`读取包括十进制在内的数字？

> ID：10116906
> 
> 赞同：1
> 
> 时间：2012-04-12T03:14:39.297
> 
> 标签：matlab, text, decimal, scanf

我正在尝试读取具有以下重复格式的文件（但由于数据太长，即使是第一次重复，我也已经删除了数据）：

```
1.00 'day' 2011-01-02
'Total Velocity Magnitude RC - Matrix' 'm/day'
    0.190189     0.279141     0.452853      0.61355     0.757833     0.884577 
    0.994502      1.08952      1.17203      1.24442      1.30872      1.36653 
     1.41897      1.46675      1.51035      1.55003      1.58595      1.61824 
```

这是原始[文件](http://dl.dropbox.com/u/44478670/single_phase_flow_scale1%20Total%20Velocity%20Magnitude%20RC.txt)

在我的一些数据文件中，有几天是十进制数字。在那种情况下，我只是得到小数点前的数字，没有小数点。我正在使用下面显示的代码来读取和存储。**我怎样才能在中包含小数部分`days`？**例如，我希望`days`存储 2.2 而不仅仅是 2。

```
fid = fopen(file_name); % open the file

dotTXT_fileContents = textscan(fid,'%s','Delimiter','\n'); % read it as string ('%s') into one big array, row by row
dotTXT_fileContents = dotTXT_fileContents{1};
fclose(fid); %# don't forget to close the file again
% str2match = '''Total Velocity Magnitude RC - Matrix'' ''m/day''';

%# find rows containing 'Total Velocity Magnitude RC - Matrix' 'm/day'
data_starts = strmatch(str2match,...
    dotTXT_fileContents); % data_starts contains the line numbers wherever 'Total Velocity Magnitude RC - Matrix' 'm/day' is found
nDataRows=data_starts(2)-data_starts(1);
ndata = length(data_starts); % total no. of data values will be equal to the corresponding no. of '**  K' read from the .txt file

%# loop through the file and read the numeric data
for w = 1:ndata
    %# read lines containing numbers
    tmp_str = dotTXT_fileContents(data_starts(w):data_starts(w)+nDataRows-2); % stores the content from file dotTXT_fileContents of the rows following the row containing 'Total Velocity Magnitude RC - Matrix' 'm/day' in form of string
    %# convert strings to numbers
    y = cell2mat( cellfun(@(z) sscanf(z,'%f'),tmp_str,'UniformOutput',false)); % store the content of the string which contains data in form of a character
    %# assign output
    data_matrix_column_wise(:,w) = y; % convert the part of the character containing data into number

    %# reading date in days passed since beginning of simulation
    days_str = dotTXT_fileContents(data_starts(w)-1);
    days_str = days_str{1};
    days(w) = sscanf(days_str, '%d');
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T07:24:04.943

换`days(w) = sscanf(days_str, '%d');`行 `days(w) = sscanf(days_str, '%f');`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T06:06:53.320

这比我预期的要长一点。您可能希望以不同的方式读取文件。以下代码逐行处理文件，因此在 while 循环结束时，您可以将 daynum 及其数据放在 allnums 中：

```
filename = 'single_phase_flow.txt';
fid = fopen(filename);

while 1
    % first line: 1.00 'day' 2011-01-02
    tline = fgetl(fid);
    if ~ischar(tline),   break,   end;
    strs = regexp(tline, '\s', 'split');

    daynum = sscanf(strs{1}, '%f');
    daystr = strs{2};
    datestr = strs{3};

    % second line: 'Total Velocity Magnitude RC - Matrix' 'm/day'
    tline = fgetl(fid);
    if ~ischar(tline),   break,   end;
    if (~regexp(tline, 'Total Velocity'))
        disp('expected Total Velocity line');
        break;
    end

    % now read in numbers until we get to a blank line
    allnums = [];
    gotline = 1;
    while gotline
        tline = fgetl(fid);
        if ~ischar(tline)
            gotline = NaN;
        end
        if (length(tline) == 0)
            gotline = 0;
        else
            % read in more numbers (not especially efficient)
            nums = sscanf(tline, '%f');
            allnums = [allnums; nums];
        end
    end

    % here is the data, you'll need to put it somewhere yourself now
    disp(daynum);
    disp(length(allnums));
end

fclose(fid); 
```

# javascript - Javascript API fb_dtsg 变量好奇

> ID：10116907
> 
> 赞同：1
> 
> 时间：2012-04-12T03:14:39.750
> 
> 标签：javascript, facebook, facebook-graph-api

我叫金东勋

我页面上的 Facebook 将尝试使用消息功能。

但我想知道 fb_dtsg JS 变量。

我们不知道 fb_dtsg 的值。

而 fb_dtsg 有什么办法可以得到这个值吗？

```
 {
  “用户”：“xxxxxxxxxxxxxx”，
  "locale":"ko_KR",
  “方法”：“获取”，
  “svn_rev”：538443，
  “贵宾”：“69.171.234.64”，
  "static_base":"https:\/\/s-static.ak.facebook.com\/",
  "www_base":"http:\/\/www.facebook.com\/",
  “rep_lag”：2，
  "fb_dtsg":"xxxxxxxx", //不知道是这个
  "ajaxpipe_token":"xxxxxxxxxxxxxxx",
  "lhsh":"vAQG-Gub0",
  "tracking_domain":"https:\/\/pixel.facebook.com",
  "retry_ajax_on_network_error":"1",
  "html5_audio":"1",
  “fbid_emoticons”：“1”
 }

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T03:21:31.053

看起来您正在处理 JSON，所以您要做的就是解析它。有一些库可以为您完成，或者您可以使用 eval 函数。

```
var object = eval('(' + data + ')') 
```

您基本上将 JSON 数据传递给 eval 函数，但请确保添加括号并确保将它们括在引号中，否则您将遇到错误。

这有效地解析了 JSON 并使其成为一个对象，所以现在您可以像这样访问 fb_dtsg

```
object.fb_dtsg 
```

# c# - 串口缓冲器/波特率/丢失数据

> ID：10116919
> 
> 赞同：2
> 
> 时间：2012-04-12T03:16:14.993
> 
> 标签：c#, serial-port, buffer, baud-rate

我正在使用以下代码片段通过 com 端口每秒发送一次 gps 数据：

```
serialPort = new SerialPort("COM4", 4800, Parity.None, 8, StopBits.One);
serialPort.Handshake = Handshake.None;
serialPort.WriteTimeout = 500;
serialPort.Open(); 
```

这一切都很好，但是当使用以下方法写入串行端口时：

```
serialPort.Write(theString); 
```

使用`theString == 504 charactors`我的阅读程序，使用：

```
 while (true) {
      Console.Write(serialPort.ReadExisting());
  } 
```

只会`254 bytes`从该写语句中读取数据。腻子也会发生同样的情况。

我曾尝试将写入语句拆分为`254`字节大小的块并写入两次，但似乎第二次写入操作虽然确认为由我的写入程序运行，但永远不会被读取程序读取。

我知道我的写缓冲区是`4096 bytes`，我的读缓冲区是`2048 bytes`.

我的字符串是这样的：

```
$GPGGA,191500.00,3351.6474,S,15112.6510,E,2,04,2.5,+0008,M,+020,M,00,0000*76
$GPVTG,057.3,T,,,000.0,N,000.0,K,A*41
$GPRMC,191500.00,A,3351.6474,S,15112.6510,E,000.0,057.3,120412,D*40
$GPGLL,3351.6474,S,15112.6510,E,191500.00,A,A*79
$GPGSA,A,3,,,,,,,,,,,,,2.5,1.3,2.1*34
$GPGSV,1,1,5,03,20,40,89,06,18,30,86,12,25,15,80,20,5,36,70*77
$GPDTM,999,,0.0,S,0.0,E,+0.0,W84*3B
$GPZDA,191500.00,11,04,12*60
$GPGBS,191500.00,+020.0,+020.0,+000.0,,0.00000,+0000.0,0000.0*63
$GPMSS,999,999,200.0,4800,*56 
```

当我尝试使用字符串中的每行一个写入语句写入缓冲区时，它会将所有内容写入缓冲区，但是，两个写入操作将在读取器中交错，所以结果是这样的：

```
etc...
$GPGGA,191500.00,3351.6474,S,15112.6510,E,2,04,2.5,+0008,M,+020,M,00,0000*76
$GPDTM,999,,0.0,S,0.0,E,+0.0,W84*3B
$GPVTG,057.3,T,,,000.0,N,000.0,K,A*41
$GPZDA,191500.00,11,04,12*60
$GPRMC,191500.00,A,3351.6474,S,15112.6510,E,000.0,057.3,120412,D*40
$GPGBS,191500.00,+020.0,+020.0,+000.0,,0.00000,+0000.0,0000.0*63
$GPGLL,3351.6474,S,15112.6510,E,191500.00,A,A*79
$GPMSS,999,999,200.0,4800,*56
$GPGSA,A,3,,,,,,,,,,,,,2.5,1.3,2.1*34
$GPGSV,1,1,5,03,20,40,89,06,18,30,86,12,25,15,80,20,5,36,70*77
etc... 
```

这对我来说没有任何意义，尽管在 9600 波特率下不会发生隔行扫描问题，（我假设是因为`4800 baud == 480bytes/s`），改变波特率不是一种选择，并且正常的 GPS 能够以某种方式一次传输所有这些数据.

问题：

有谁知道为什么当我将 504 字节的数据写入流时，我的读取只会获取 254 字节的数据？是否有一些限制

```
serialPort.Write(Byte[], int offset, int count); 
```

不允许超过 254 个字节？（这不能解释第二次写操作没有完成）。

甚至。有谁知道写入串行端口的更好方法？

* * *

此方法似乎适用于提供的数据（尽管我最初的问题仍然存在）：

```
string Sentence = "";
for (int i = 0; i < block_list[total_block].Count; i+=2) {
    Sentence = block_list[total_block][i] + block_list[total_block][i+1];
    serialPort.Write(Sentence);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T03:21:51.267

等等，您说您使用了一秒超时，但您的代码显示：

```
serialPort.WriteTimeout = 500; 
```

这是发送端的半秒超时。在 4.8Kbps（如您所说，大约每秒 480 个字符），这仅够发送大约 240 个字符的时间。

GPS可能会这样做，*因为*它没有半秒超时。

试着把超时时间调高一点，看看会发生什么——五秒钟应该会给你*足够*的喘息空间来进行测试。在 4.8Kbps 时，504 字节将需要一秒钟多一点的时间才能完全传输。

确定你*真的*不想握手吗？缺乏这一点也可能导致数据丢失。

# user-interface - Big-Bang 和对话应用程序（球拍/方案）

> ID：10116920
> 
> 赞同：2
> 
> 时间：2012-04-12T03:16:28.727
> 
> 标签：user-interface, dialog, scheme, racket

因此，我正在尝试编写一个同时使用`big-bang`（参见`2htdp/universe`）函数和对话框（参见`racket/gui/base`）的程序。我的问题是我想要它以便程序同时显示两个窗口**，**但是我很难弄清楚这部分，因为两个函数必须“关闭/完成”才能继续代码。这是我尝试过的，没有运气（由于之前所说的）：

```
#lang racket

(require 2htdp/universe
         racket/gui/base)

(define dialog (instantiate dialog% ("Title")))
(define (render data)
   ...)

(define main
   (begin
      (big-bang ...
         (on-draw render))
      (send dialog show #t))) 
```

使用此示例 [模板] 代码，big-bang 应用程序首先显示，为了显示对话框，您必须关闭 big-bang 应用程序。重申一下，我希望能够同时显示它们。

如果您想了解有关该问题的更多信息，请告诉我。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T04:07:09.457

您可以在具有自己的事件空间的单独*线程中运行这两个**线程*，这样可以防止它们阻塞彼此的执行。你期待两人之间会有交流吗？

这是一个例子：

```
#lang racket

(require 2htdp/universe
         2htdp/image
         racket/gui/base)

;; start-dialog: -> void
(define (start-dialog)
  (define dialog (new dialog% [label "A sample title"]))
  (send dialog show #t))

;; start-up-big-bang: -> number
(define (start-up-big-bang)
  (big-bang 0
            (on-tick add1 1)
            (to-draw draw)))

;; draw: number -> image
(define (draw w)
  (text (format "I see my number is: ~a" w) 20 "black"))

;; We create fresh eventspaces for each.
;; See: http://docs.racket-lang.org/gui/windowing-overview.html#(part._eventspaceinfo)
;; for more details.
(define c1 (make-eventspace))
(define c2 (make-eventspace))

;; And now we can spawn off these two to run concurrently.
(define t1 (parameterize ([current-eventspace c1])
             (thread start-up-big-bang)))
(define t2 (parameterize ([current-eventspace c2])
             (thread start-dialog)))

;; Let's wait till both the big-bang and the dialog have closed.
(thread-wait t1)
(thread-wait t2) 
```

# wicket - Wicket 模型如何与泛型一起使用？

> ID：10116921
> 
> 赞同：5
> 
> 时间：2012-04-12T03:16:33.353
> 
> 标签：wicket

我想知道一些关于带有通用的检票口支持模型的信息。我了解模型、道具模型和道具复合模型。

但是 Model 类呢？如果我这样做会发生什么：

```
Label<Person> label = new Label<Person> ( "someID", new Model<Person>() ) 
```

该标签将显示什么？toString 输出？

可以说我在 TextField 中有相同的内容。它将在该对象中设置什么值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T07:11:15.860

Wicket 的源代码有很好的文档记录且不言自明。`Label`使用看起来像这样`getDefaultModelObjectAsString()`：`Component`

```
// Get converter
final Class<?> objectClass = modelObject.getClass();

final IConverter converter = getConverter(objectClass);

// Model string from property
final String modelString = converter.convertToString(modelObject, getLocale()); 
```

所以在这里你可以看到 Wicket 使用 a`IConverter`将模型对象转换为`String`. 查看默认的实现，`ConverterLocator`您会发现如果您没有`IConverter`为这种类型的对象注册任何对象，Wicket 将使用`DefaultConverter`使用`org.apache.wicket.util.lang.Objects`静态方法将对象转换为`String`.

`TextField`还使用 a将`IConverter`对象转换为 a`String`并再次从 the`String`转换为对象。不同之处在于，Wicket 总是能够`String`使用该`toString`方法将未知类转换为 a，但反之则不行。因此，如果您想将 a`IModel<Person>`与 a一起使用，则`TextField`需要注册自己的`IConverter<Person>`实现。

# python - Python——读取文件，保存文件名并访问这些文件

> ID：10116923
> 
> 赞同：0
> 
> 时间：2012-04-12T03:16:38.830
> 
> 标签：python

我建立

```
totalset = {} 
```

并从文件夹 A、B、C、D 中提取文件名

```
for file_name in (os.listdir(full_subdir_name)):
    full_file_name = os.path.join(full_subdir_name, file_name) 
```

现在我想构建一个名为 namelist 的东西，其中包含所有文件名，我可以通过以下方式遍历文件夹中的所有文件：

```
for file in namelist[A]:
    blabla...

for file in namelist[B]:
    blabla.. . 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T03:22:21.127

您可能应该使用“列表理解”。这是一个如何做到这一点的示例：

```
lst_names = [os.path.join(full_subdir_name, n) for n in os.listdir(full_subdir_name)] 
```

因此，您将构建完整的`namelist`类似这样的东西。首先，您应该设置一个名称列表。

```
# example using Windwows filenames
# note that we use "raw strings" with r'' so the backslash will not be weird
lst_names = [r'C:\Users\steveha\Desktop', r'C:\Users\steveha\Documents', r'C:\Users\steveha\Music']

# example using Mac or Linux filenames
lst_names = ['/home/steveha/Desktop', '/home/steveha/Documents', '/home/steveha/Music' 
```

`lst_names`设置好姓名后，构建完整的`namelist`：

```
namelist = {}

for full_subdir_name in lst_names:
    namelist[full_subdir_name] = [os.path.join(full_subdir_name, n) for n in os.listdir(full_subdir_name)] 
```

就我个人而言，我认为使用更短的变量名比阅读更容易`full_subdir_name`：

```
namelist = {}

for f in lst_names:
    namelist[f] = [os.path.join(f, n) for n in os.listdir(f)] 
```

# sql-server - 如何引用附件中的图像

> ID：10116924
> 
> 赞同：1
> 
> 时间：2012-04-12T03:17:15.257
> 
> 标签：sql-server, html-email

我`sp_send_dbmail`在 SQL Server 2008 中使用来发送 HTML 电子邮件。我可以使用 url 引用图像`<img src="http:..." />`

我已将图像与`@file_attachments`. 如何在附件中引用此图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T03:50:27.597

```
EXEC msdb.dbo.sp_send_dbmail
   @recipients = 'xxx@yyy.com',
   @subject = 'test',
   @file_attachments = 'C:\Test\Image.gif;C:\Test\Image2.gif',
   @body=N'<p>Image Test</p><img src="Image.gif" /><p>See image there?</p>',
   @body_format = 'HTML'; 
```

这是我使用的确切代码，它对我来说效果很好。

```
EXEC msdb.dbo.sp_send_dbmail
   @recipients = 'xxx@wxxxx.com',
   @subject = 'test',
   @profile_name = 'global config',
   @file_attachments = 'C:\testimage.png',
   @body=N'<p>Image Test</p><img src="testimage.png" /><p>See image there?</p>',
   @body_format = 'HTML'; 
```

# java - 未捕获 ArrayOutofBound 异常

> ID：10116928
> 
> 赞同：-1
> 
> 时间：2012-04-12T03:18:02.290
> 
> 标签：java, exception

嗨，我的代码正在生成一个 arrayoutofbound 异常，该异常在代码中被捕获，但代码突然终止。我希望代码继续。如果异常捕获 arrayoutofboundexception 或者我做错了什么，请帮助捕获错误。异常是预期的。下面是代码：-

```
try{
    CsgLogin=Ldap.getdomain(requesterLoginId);//This returns domain\usernmae
    LoginIDArray = CsgLogin.split("\\\\");
    requesterLoginId = LoginIDArray[1]; //Exception generated here

} catch(Exception e) {
    System.out.println("Error in the GLDAP lookup or error in Domain Mapping");
    e.printStackTrace();
} 
```

输出：

```
java.lang.ArrayIndexOutOfBoundsException: 1
        at com.cs.ws.LdapConnect.getdomain(LdapConnect.java:131)
        at com.cs.ws.AgentConnector.startOfBreakGlass(AgentConnector.java:476)
        at com.cs.ws.AgentConnector.runBreakGlassProcess(AgentConnector.java:208)
        at com.cs.ws.MyAccessTimer.main(MyAccessTimer.java:93)
Error in the GLDAP lookup or error in Domain Mapping
java.lang.StringIndexOutOfBoundsException: String index out of range: -1
        at java.lang.String.substring(String.java:1768)
        at com.cs.ws.DomainMap.getDomain(DomainMap.java:21)
        at com.cs.ws.AgentConnector.startOfBreakGlass(AgentConnector.java:477)
        at com.cs.ws.AgentConnector.runBreakGlassProcess(AgentConnector.java:208)
        at com.cs.ws.MyAccessTimer.main(MyAccessTimer.java:93) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T03:27:06.120

[`ArrayIndexOutOfBoundsException`](http://docs.oracle.com/javase/7/docs/api/java/lang/ArrayIndexOutOfBoundsException.html)是一个子类，`Exception`应该在那里被捕获。您的代码段中一定还有其他未显示的内容。请至少显示问题产生的完整方法。此外，请始终在有关抛出异常的问题中包含堆栈跟踪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T03:31:12.613

`ArrayIndexOutOfBoundsException` *正在*`Error in the GLDAP lookup or error in Domain Mapping`被捕获：您可以通过您的消息已打印的事实来判断。你看到的第一个块就是`printStackTrace()`产生的。

两者不按顺序排列，因为一个打印到标准输出流，另一个打印到标准错误流。

未捕获的异常是`StringIndexOutOfBoundsException`在您的消息下打印的异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T03:32:37.660

当您尝试访问`LoginIDArray[1]`（即第二个元素）时，您会收到 ArrayOutOfBounds 异常，因为`LoginIDArray`没有第二个元素。

这意味着您的调用`Split("\\\\")`没有找到任何`"\\"`可拆分的内容（两个转义的反斜杠）。`CSGLogin`不包含两个反斜杠，它有一个。

因此，将您的拆分字符串更改为`"\\"`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T03:33:08.290

`ArrayIndexOutOfBoundsException`是 的子类`RuntimeException`，因此它是未选中的——这意味着您不必显式地捕获或声明它。在编写良好的代码中，不必捕获它；您肯定在某处有导致异常的索引错误。

# ruby-on-rails - 如何在条件中使用数组作为过滤器 - Ruby Rails

> ID：10116936
> 
> 赞同：1
> 
> 时间：2012-04-12T03:19:33.143
> 
> 标签：ruby-on-rails, ruby-on-rails-2

```
array_users = ["3581", "3592", "3665", "3730"]

@records = Model.find(
           :all, 
           :order => 'date desc', 
           :group => :date, 
           :conditions => {
                 :client_id => current_user.client.id,  
                 :user_id is present in array_users # <------------------
           }) 
```

使用 Rails 2.3.9`user_id`时，如何确定只有返回的记录有一个？`array_users`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T03:22:54.997

```
:conditions => {
  :client_id => current_user.client.id,  
  :user_id => array_users
}) 
```

有关哈希条件的所有可能性，请参阅[指南。](http://guides.rubyonrails.org/v2.3.11/active_record_querying.html#hash-conditions)

# c - 如何将数组中特定点的值存储到寄存器中，反之亦然

> ID：10116942
> 
> 赞同：2
> 
> 时间：2012-04-12T03:20:16.733
> 
> 标签：c, assembly, inline-assembly

编辑：这是使用 AT&T 语法

我正在使用 GAS 汇编器学习汇编，并且必须编写一个程序，在其中比较数组中的 int 值并根据比较更改值。我正在使用 C 中的内联汇编编写它。我知道对于一个基本变量，比如 int i，我使用以下行将值存储在寄存器 eax 中：

```
movl i, %eax 
```

但现在说我有一个变量 a[2][2]，我想将 a[1][1] 移动到 %eax。明显的错误答案是：

```
movl a[1][1], %eax 
```

我在表达式之后得到错误垃圾“[1][1]”。如何将二维数组的值移动到寄存器中？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T04:48:53.337

将 a[1][1] 转换为线性地址取决于您。换句话说，我们必须`a[1][1]`弄清楚这距离`a`. 我们首先计算一行的大小——在本例中为 2 个整数。因此，（目前在整数中工作）第 0 行的开头位于距 a 的偏移 0 处，第 1 行位于偏移 2 处，并且（如果有更多行）以此类推。然后我们添加该行内的偏移量。最后，我们按单个项目的大小对其进行缩放。

从那里开始，我们有几种可能性。`a[1][1]`一个是我们只需要一个固定的位置——无论如何，我们都会得到。另一个是我们真的在看`a[i][j]`, where `i`and`j`恰好是 1 ，但可能是其他大小。

首先，我们可以利用汇编器可以做一些数学运算来为我们计算地址这一事实。

```
// one row down times 2 ints per row + offset of 1 into last row, all times size of int
movl a + (1 * 2 + 1)*4, eax 
```

在第二种情况下，假设我们有`i`in`esi`和`j`in `ebx`。在这种情况下，我们必须自己进行数学运算（抱歉，目前我将使用 Intel 语法——我只是更习惯了）：

```
shl esi, 1    ; i * 2
add esi, ebx  ; i * 2 + j
shl esi, 2    ;(i * 2 + j) * 4

mov eax, a[esi] 
```

x86 实际上可以组合一些常见的寻址操作，因此您不必像我上面那样将它们作为单独的指令执行，因此我们可以很容易地将其简化为：

```
shl esi, 1
mov eax, a[esi][ebx] 
```

最后一点可能需要一些解释——至少对于 MASM（我猜可能还有 gas），汇编器知道，因为你正在加载一个值`eax`，所以你正在以 4 字节的数量工作，所以它自动将偏移量缩放 4。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T04:55:38.907

我不是 100% 确定 AT&T 语法，所以我会发布我的英特尔解决方案以及转换后的 AT&T，以防出现混淆。

基本上，需要先查找数组的值，然后再进行交换。

## 英特尔语法

```
mov ecx, a  ;move the pointer to the 2D array into a register first
mov ecx, [ecx + 04h] ;walk to the a[1] dimension (4h happens to be the size of a pointer on my system)
mov eax, [ecx + 04h] ;eax now holds the value of a[1][1] and ecx still holds the memory location of a[1]
;do stuff with the eax register
mov DWORD PTR SS: [ecx + 4h], 1h ;change the value of a[1][1] 
```

## AT&T 语法

```
 movl a, %ecx
   movl 4%(ecx),%ecx
   movl 4%(ecx),%eax
   ; do stuff with eax
   movl $1,4%(ecx) 
```

编辑：如果你有一个固定大小的数组，那么 Jerry 的解决方案可能会更好，这样你就可以计算一个线性地址，但这也适用于动态分配的二维数组。

# javascript - 在 JS 中返回干净、无时区的日期

> ID：10116946
> 
> 赞同：2
> 
> 时间：2012-04-12T03:20:57.093
> 
> 标签：javascript, date

我正在使用 Knockout 构建一个应用程序，该应用程序可在不同阶段处理大量日期。当然，他们最后都有这样的废话：

```
T05:00:00.000Z 
```

有没有一种简洁的方法可以让所有的日期都是简单的年月日，*而不是*求助于我自己的串联？我知道我可以这样做：

```
getYear() . getMonth() + 1 . getDate() 
```

...但在我的情况下这会变得笨拙，因为我的代码中有几个地方正在吐出日期

是否有一些干净的功能可以给我一个简单的约会？也许对 Date 原型进行某种调整？

我应该提一下，因为这是一个 Knockout 应用程序，所以日期存储在 observables 中。问题是确保当我将日期保存为 JSON 时，日期的格式会更清晰。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T03:25:15.410

This is where the concept of abstractions really comes into play. Since you're really only dealing with 3 simple functions that you don't want to repeat over and over again in your code, just write one helper function and then use that in your code:

```
function getFormattedDate() {
    return getYear() . getMonth() + 1 . getDate();
} 
```

Then whenever you need the date, run:

```
var d = getFormattedDate(); 
```

or

```
alert(getFormattedDate()); 
```

or

```
document.getElementById("date").innerHTML = "Today's date is " + getFormattedDate(); 
```

To keep your getFormattedDate function out of the global scope, and be sure you don't conflict with another implementation of getFormattedDate, use namespacing:

```
var myUtils = {
    getFormattedDate: function() {
        return getYear() . getMonth() + 1 . getDate();
    }
}; 
```

then invoke it as:

```
alert( myUtils.getFormattedDate() ); 
```

# windows-phone - 加载位图成功但宽度和高度为0？

> ID：10116948
> 
> 赞同：0
> 
> 时间：2012-04-12T03:21:07.637
> 
> 标签：windows-phone

Mycode 从资源加载位图：

```
 Uri _uri = new Uri("e.jpg", UriKind.RelativeOrAbsolute);
   BitmapImage bmp = new BitmapImage(_uri);
   int iW = bmp.PixelWidth;
   int iH = bmp.PixelHeight; 
```

bmp 加载成功但是 iW 和 iH 都是 0。我不知道为什么？你能告诉我我是怎么解决的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T03:25:07.823

you may have to find where PixelWidth and PixelHeight are defined.

# ruby-on-rails - 未初始化的常量 CarrierWave

> ID：10116953
> 
> 赞同：4
> 
> 时间：2012-04-12T03:21:46.627
> 
> 标签：ruby-on-rails, passenger, carrierwave

我正在使用乘客和 capistrano 部署我的第一个 rails 应用程序。

一切都很好，直到我尝试在浏览器中启动应用程序时遇到此错误。

```
Error message:
   uninitialized constant CarrierWave

Exception class:
   NameError 
```

您可以在[http://test.ajhezaty.com/上查看详细信息](http://test.ajhezaty.com/)

该站点在本地运行良好，并且 CarrierWave 可以正确上传图像。

我试图通过运行重新启动 VPS 服务器

```
sudo /etc/init.d/httpd2 restart 
```

但它没有解决问题。

供您参考，安装在服务器上的 gem

```
 $ gem list | grep carrierwave
 carrierwave (0.6.1) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-21T07:04:25.000

您需要像这样将carrierwave 添加到您的**application.rb**文件中：

```
require File.expand_path('../boot', __FILE__)

require 'rails/all'

require 'carrierwave'

if defined?(Bundler)
  # Bundler stuff
end

# Rest of file ommited. 
```

这在使用 nginx/unicorn 的生产中对我有用。不要忘记重新启动您的独角兽服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T03:32:14.493

您可能在本地安装了 gem，但请确保将其添加到 Gemfile，通过 ssh 捆绑安装，并在将使用它的控制器中要求它。

# java - 能解释一下HttpURLConnection的连接过程吗？

> ID：10116961
> 
> 赞同：143
> 
> 时间：2012-04-12T03:22:49.507
> 
> 标签：java, inputstream, httpurlconnection, outputstream, urlconnection

我正在使用`HTTPURLConnection`连接到 Web 服务。我知道如何使用`HTTPURLConnection`，但我想了解它是如何工作的。基本上，我想知道以下内容：

*   在哪一点上`HTTPURLConnection`尝试建立到给定 URL 的连接？
*   在哪一点上我可以知道我能够成功建立连接？
*   是否在一步/方法调用中建立连接并发送实际请求？它是什么方法？
*   你能通俗地解释一下`getOutputStream`and的功能`getInputStream`吗？我注意到当我尝试连接的服务器关闭时，我得到一个`Exception`at `getOutputStream`。这是否意味着`HTTPURLConnection`只有在我调用时才会开始建立连接`getOutputStream`？怎么样`getInputStream`？既然我只能在 得到响应`getInputStream`，那么这是否意味着我还没有发送任何请求`getOutputStream`而只是建立了连接？调用时是否`HttpURLConnection`返回服务器请求响应`getInputStream`？
*   我是否正确地说`openConnection`只是创建了一个新的连接对象但还没有建立任何连接？
*   如何测量读取开销和连接开销？

* * *

## 回答 #1

> 赞同：196
> 
> 时间：2012-04-12T04:09:35.810

```
String message = URLEncoder.encode("my message", "UTF-8");

try {
    // instantiate the URL object with the target URL of the resource to
    // request
    URL url = new URL("http://www.example.com/comment");

    // instantiate the HttpURLConnection with the URL object - A new
    // connection is opened every time by calling the openConnection
    // method of the protocol handler for this URL.
    // 1\. This is the point where the connection is opened.
    HttpURLConnection connection = (HttpURLConnection) url
            .openConnection();
    // set connection output to true
    connection.setDoOutput(true);
    // instead of a GET, we're going to send using method="POST"
    connection.setRequestMethod("POST");

    // instantiate OutputStreamWriter using the output stream, returned
    // from getOutputStream, that writes to this connection.
    // 2\. This is the point where you'll know if the connection was
    // successfully established. If an I/O error occurs while creating
    // the output stream, you'll see an IOException.
    OutputStreamWriter writer = new OutputStreamWriter(
            connection.getOutputStream());

    // write data to the connection. This is data that you are sending
    // to the server
    // 3\. No. Sending the data is conducted here. We established the
    // connection with getOutputStream
    writer.write("message=" + message);

    // Closes this output stream and releases any system resources
    // associated with this stream. At this point, we've sent all the
    // data. Only the outputStream is closed at this point, not the
    // actual connection
    writer.close();
    // if there is a response code AND that response code is 200 OK, do
    // stuff in the first if block
    if (connection.getResponseCode() == HttpURLConnection.HTTP_OK) {
        // OK

        // otherwise, if any other status code is returned, or no status
        // code is returned, do stuff in the else block
    } else {
        // Server returned HTTP error code.
    }
} catch (MalformedURLException e) {
    // ...
} catch (IOException e) {
    // ...
} 
```

在上面的 HTTP POST 示例中，您的问题的前 3 个答案被列为每个方法旁边的内联注释。

从[getOutputStream](http://docs.oracle.com/javase/9/docs/api/java/net/URLConnection.html#getOutputStream--)：

> 返回写入此连接的输出流。

基本上，我认为你已经很好地理解了它是如何工作的，所以让我用外行的话重申一下。`getOutputStream`基本上打开一个~~连接~~流，目的是向服务器写入数据。在上面的代码示例中，“消息”可以是我们发送到服务器的评论，代表在帖子上留下的评论。当您看到 时`getOutputStream`，您正在打开~~连接~~流以进行写入，但在您调用 之前您实际上并没有写入任何数据`writer.write("message=" + message);`。

从[getInputStream()](http://docs.oracle.com/javase/9/docs/api/java/net/URLConnection.html#getInputStream--)：

> 返回从此打开的连接读取的输入流。如果读取超时在数据可供读取之前到期，则从返回的输入流读取时可能会引发 SocketTimeoutException。

`getInputStream`相反。像`getOutputStream`，它也打开了一个~~连接~~流，但目的是从服务器读取数据，而不是写入数据。如果连接或流打开失败，您将看到一个`SocketTimeoutException`.

> getInputStream 怎么样？既然我只能在 getInputStream 获得响应，那么这是否意味着我还没有在 getOutputStream 发送任何请求而只是建立了连接？

请记住，发送请求和发送数据是两个不同的操作。当您调用~~getOutputStream 或 getInputStream~~ `url.openConnection()`时，您向服务器发送请求以建立连接。在服务器向您发回连接已建立的确认时会发生握手。然后在那个时间点，您准备发送或接收数据。因此，您不需要调用 getOutputStream 来~~建立连接~~打开流，除非您发出请求的目的是发送数据。

通俗地说，提出一个`getInputStream`请求就相当于给你朋友家打电话说“嘿，我过来借那副副把手可以吗？” 你的朋友通过说“当然！过来拿”来建立握手。然后，在那一点上，建立连接，你走到你朋友的房子，敲门，请求副把手，然后走回你的房子。

使用类似的例子`getOutputStream`会涉及打电话给你的朋友并说“嘿，我有欠你的钱，我可以把它寄给你吗”？你的朋友需要钱，而且里面生病了，所以你把它藏了这么久，他说：“当然，来吧，你这个贱货”。所以你走到你朋友家，把钱“邮寄”给他。然后他把你踢出去，你走回你家。

现在，继续外行的例子，让我们看一些异常。如果你打电话给你的朋友而他不在家，那可能是一个 500 错误。如果您因为您的朋友厌倦了您一直在借钱而打电话并收到一条断开的号码消息，那就是找不到 404 页面。如果你的手机因为你没有支付账单而死机，那可能是一个 IOException。（注意：本节可能不是 100% 正确。它旨在让您以通俗的方式大致了解正在发生的事情。）

**问题 #5：**

~~是的，您是正确的，openConnection 只是创建了一个新的连接对象但没有建立它。当您调用 getInputStream 或 getOutputStream 时建立连接。~~

`openConnection`创建一个新的连接对象。从[URL.openConnection javadocs](http://docs.oracle.com/javase/9/docs/api/java/net/URL.html#openConnection--)：

> 每次调用此 URL 的协议处理程序的 openConnection 方法都会打开一个新连接。

调用 openConnection 时建立连接，实例化时调用 InputStream、OutputStream 或两者。

**问题 #6**：

为了测量开销，我通常在整个连接块周围包装一些非常简单的计时代码，如下所示：

```
long start = System.currentTimeMillis();
log.info("Time so far = " + new Long(System.currentTimeMillis() - start) );

// run the above example code here
log.info("Total time to send/receive data = " + new Long(System.currentTimeMillis() - start) ); 
```

我确信有更高级的方法来测量请求时间和开销，但这通常足以满足我的需求。

有关关闭连接的信息（您没有询问），请参阅[在 Java 中 URL 连接何时关闭？](https://stackoverflow.com/questions/272910/in-java-when-does-a-url-connection-close).

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-07-15T23:35:57.690

Tim Bray 给出了一个简洁的分步说明，说明 openConnection() 并没有建立实际的连接。相反，在调用 getInputStream() 或 getOutputStream() 等方法之前，不会建立实际的 HTTP 连接。

[http://www.tbray.org/ongoing/When/201x/2012/01/17/HttpURLConnection](http://www.tbray.org/ongoing/When/201x/2012/01/17/HttpURLConnection)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-15T23:45:02.380

> 在哪一点上`HTTPURLConnection`尝试建立到给定 URL 的连接？

在 URL 中指定的端口上（如果有），否则为 HTTP 80 和 HTTPS 443。我相信这是有据可查的。

> 在哪一点上我可以知道我能够成功建立连接？

当你打电话`getInputStream()`或`getOutputStream()`没有`getResponseCode()`得到例外。

> 是否在一步/方法调用中建立连接并发送实际请求？它是什么方法？

没有也没有。

> 你能通俗地解释一下`getOutputStream()`and的功能`getInputStream()`吗？

如有必要，它们中的任何一个都首先连接，然后返回所需的流。

> 我注意到当我尝试连接的服务器关闭时，我在`getOutputStream()`. 这是否意味着`HTTPURLConnection`只有在我调用时才会开始建立连接`getOutputStream()`？怎么样`getInputStream()`？既然我只能在 得到响应`getInputStream()`，那么这是否意味着我还没有发送任何请求`getOutputStream()`而只是建立了连接？调用时是否`HttpURLConnection`返回服务器请求响应`getInputStream()`？

往上看。

> 我是否正确地说`openConnection()`只是创建了一个新的连接对象但还没有建立任何连接？

是的。

> 如何测量读取开销和连接开销？

连接：花时间`getInputStream()`或`getOutputStream()`返回，无论您先打电话。读取：从开始第一次读取到获得 EOS 的时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-04T00:55:48.227

*HTTPURLConnection 在哪一点尝试建立到给定 URL 的连接？*

值得澄清的是，有*'UrlConnection' 实例*，然后是底层的*Tcp/Ip/SSL 套接字连接*，两个不同的概念。'UrlConnection' 或 'HttpUrlConnection' 实例与单个 HTTP 页面请求同义，并在您调用 url.openConnection() 时创建。但是，如果您从一个“url”实例执行多个 url.openConnection()，那么如果幸运的话，它们将重用相同的 Tcp/Ip 套接字和 SSL 握手的东西……如果你是对同一台服务器进行大量页面请求，如果您使用 SSL，其中建立套接字的开销非常高，则特别好。

请参阅： [HttpURLConnection 实现](https://stackoverflow.com/questions/3460990/httpurlconnection-implementation)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-02-22T04:40:59.373

我通过练习捕获低级别的数据包交换，发现网络连接仅由 getInputStream、getOutputStream、getResponseCode、getResponseMessage 等操作触发。

这是我尝试编写一个小程序将文件上传到 Dropbox 时捕获的数据包交换。

[![在此处输入图像描述](../Images/fef6f4dbe1b5423701435f32aa7fdf1a.png)](https://i.stack.imgur.com/NTZzv.png)

下面是我的玩具程序和注释

```
 /* Create a connection LOCAL object,
     * the openConnection() function DOES NOT initiate
     * any packet exchange with the remote server.
     * 
     * The configurations only setup the LOCAL
     * connection object properties.
     */
    HttpURLConnection connection = (HttpURLConnection) dst.openConnection();
    connection.setDoOutput(true);
    connection.setRequestMethod("POST");
    ...//headers setup
    byte[] testContent = {0x32, 0x32};

    /**
     * This triggers packet exchange with the remote
     * server to create a link. But writing/flushing
     * to a output stream does not send out any data.
     * 
     * Payload are buffered locally.
     */
    try (BufferedOutputStream outputStream = new BufferedOutputStream(connection.getOutputStream())) {
        outputStream.write(testContent);
        outputStream.flush();
    }

    /**
     * Trigger payload sending to the server.
     * Client get ALL responses (including response code,
     * message, and content payload) 
     */
    int responseCode = connection.getResponseCode();
    System.out.println(responseCode);

    /* Here no further exchange happens with remote server, since
     * the input stream content has already been buffered
     * in previous step
     */
    try (InputStream is = connection.getInputStream()) {
        Scanner scanner = new Scanner(is);
        StringBuilder stringBuilder = new StringBuilder();
        while (scanner.hasNextLine()) {
        stringBuilder.append(scanner.nextLine()).append(System.lineSeparator());
        }
    }

    /**
     * Trigger the disconnection from the server.
     */
    String responsemsg = connection.getResponseMessage();
    System.out.println(responsemsg);
    connection.disconnect(); 
```

# windows-phone-7 - System.ArgumentException：Windows Phone 中的 [net_WebHeaderInvalidControlChars]

> ID：10116963
> 
> 赞同：1
> 
> 时间：2012-04-12T03:23:18.560
> 
> 标签：windows-phone-7, httpwebrequest, argumentexception

我正在使用 HttpWebRequest 来获取一些类似 twitter-API 的 Json 资源，场景是使用 XAuth-Authentication 登录应用程序后，应用程序将使用 API（[http://api.xxx.com/account/notification.json](http://api.xxx.com/account/notification.json) ) 以获取响应 Json。我的 HttpWebRequest 方法如下：

```
public void Request(string url)
        {
            var request = (HttpWebRequest)HttpWebRequest.Create(url);

            IAsyncResult result = null;
            result = (IAsyncResult)request.BeginGetResponse(ResponseCallback, request);
        }

        private void ResponseCallback(IAsyncResult result)
        {
            try
            {
                var request = (HttpWebRequest)result.AsyncState;
                var response = request.EndGetResponse(result);

                using (var stream = response.GetResponseStream())
                {
                    using (var reader = new StreamReader(stream))
                    {

                        if (CallBack != null)
                        {
                            var str = reader.ReadToEnd();
                            CallBack(CleanInvalidXmlChars(str));
                        }
                    }
                }
            }
            catch (Exception ex)
            {
                Deployment.Current.Dispatcher.BeginInvoke(delegate
                {
                    CallBack(ex.ToString());
                });
            }
        } 
```

在最常见的情况下，一切都很顺利。直到一些用户告诉我他们总是遇到异常。然后我使用调试发现异常跟踪是：

```
"System.ArgumentException ---> System.ArgumentException: [net_WebHeaderInvalidControlChars]\r\nArguments:\r\nDebugging resource strings are unavailable. Often the key and arguments provide sufficient information to diagnose the problem. See http://go.microsoft.com/fwlink/?linkid=106663&Version=4.7.60408.0&File=System.Net.dll&Key=net_WebHeaderInvalidControlChars \r\nParameter name: name\r\n   at System.Net.ValidationHelper.CheckBadWebHeaderChars(String name, Boolean isHeaderValue)\r\n   at System.Net.WebHeaderCollection.set_Item(String name, String value)\r\n   at System.Net.Browser.HttpWebRequestHelper.AddHeaderToCollection(WebHeaderCollection headerCollection, String headerName, String headerValue)\r\n   at System.Net.Browser.HttpWebRequestHelper.ParseHeaders(Uri requestUri, SecurityCriticalDataForMultipleGetAndSet`1 headers, WebHeaderCollection collection, Boolean removeHttpOnlyCookies, HttpStatusCode& status, String& statusDescription)\r\n   at System.Net.Browser.ClientHttpWebRequest.Progress(Object sender, EventArgs e)\r\n   at MS.Internal.CoreInvokeHandler.InvokeEventHandler(Int32 typeIndex, Delegate handlerDelegate, Object sender, Object args)\r\n   at MS.Internal.JoltHelper.FireEvent(IntPtr unmanagedObj, IntPtr unmanagedObjArgs, Int32 argsTypeIndex, Int32 actualArgsTypeIndex, String eventName)\r\n\r\n   at System.Net.Browser.AsyncHelper.BeginOnUI(SendOrPostCallback beginMethod, Object state)\r\n   at System.Net.Browser.ClientHttpWebRequest.EndGetResponse(IAsyncResult asyncResult)\r\n   at FanfouSDK.Utiltiy.HttpGetMethod.ResponseCallback(IAsyncResult result)\r\n   at System.Net.Browser.ClientHttpWebRequest.<>c__DisplayClassa.<InvokeGetResponseCallback>b__8(Object state2)\r\n   at System.Threading.ThreadPool.WorkItem.WaitCallback_Context(Object state)\r\n   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n   at System.Threading.ThreadPool.WorkItem.doWork(Object o)\r\n   at System.Threading.Timer.ring()\r\n" 
```

这似乎是这里的一些问题（[System.Net.Browser.ClientHttpWebRequest.EndGetResponse throw System.ArgumentException when header contains non-ascii content](https://stackoverflow.com/questions/7509498/system-net-browser-clienthttpwebrequest-endgetresponse-throw-system-argumentexce/10100820#10100820)）

然后我使用 Fiddler 跟踪 webresponse，发现服务器返回了预期的 Json 字符串，但仍然导致异常。

**预期的 Json 字符串：** ![在此处输入图像描述](../Images/dff6a75f51b2b773e67b1ae472b329ac.png) Everythis 是可以的，但仍然会导致 net_WebHeaderInvalidControlChars 异常，是不是因为 X-Authuser？

我一直在努力寻找解决方案，但只是失败了。任何建议将不胜感激。谢谢。

PS：有点奇怪，在我的真机上运行我的app时，并没有出现异常，但是在模拟器和对方的真机上都会出现异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T03:28:58.520

I suspect this is because of Chinese characters present in the header (X-AuthUser). This problem was also described [here](http://forums.create.msdn.com/forums/p/73254/447087.aspx) with Cyrillic characters, so it is highly likely to be the same scernario.

# java - service architecture - webservies | soa

> ID：10116965
> 
> 赞同：4
> 
> 时间：2012-04-12T03:23:40.803
> 
> 标签：java, web-services, architecture, soa

I would like to understand which approach suits the best to manage the below scenario.

Say for example there are 25 applications mostly in java and are web based deployed across different platforms jboss, websphere & tomcat. Each application exposes 3 -5 services and also consumes services from other applications. Most of them are synchronous and are triggered on need basis. Some of the use cases below,

1.  When a patient is admitted, this sends out message to 4 -5 systems which are interested in admission detail (sync).
2.  Billing system send detail to another system to calculate the discount (sync)
3.  Get Patient detail by passing the id. (sync)

So if u try to represent the whole diagram in a picutre if will be like so many hardcoded static lines between each and every system.

The problems

1.  No common way to find the health of each systems or web services until the user complains some thing not working.

2.  Too many web services and end points to keep track off.

3.  Implemented across diff standards JAX-wS, Jax-RS, due to diff application servers and containers.

4.  Some messages are identical with slightly different details. Thus reusability is reduced and end up coming up with new service for each custom requirement.

What kind of solution are better suited to address the above issues ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:47:54.897

这是大型企业普遍存在的难题。您可以看到将[企业服务总线](http://en.wikipedia.org/wiki/Enterprise_service_bus)集成到您的公司中以促进 SOA。然后，您可以为生态系统中的每个系统实施适配器。适配器接口将受到严格控制、记录和标准化。但是，这样做的成本相当高。

关于检查系统健康。您可以考虑使用诸如[Nagios](http://www.nagios.org/)之类的平台。您需要识别一些无害的 Web 服务（例如基本阅读），这些服务可用于确定给定系统是否“启动”。然后 Nagios 可以定期调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T13:29:46.477

您需要一个 ServiceBus，它不一定是完整的 ESB，但您确实需要一个集成和中介点，以确保您管理不同的端点类型和不同的协议，而无需求助于 1-1 连接。

您可以查看[Fuse Mediation Hub](http://fusesource.com/products/enterprise-camel/)（基于[apache camel](http://camel.apache.org/)）。再次从您拥有的不同服务中外部化集成逻辑将为您提供更大的灵活性。例如，它将允许您将不同的服务迁移到您提到的 REST/JSON，而无需更改依赖于正在发展的服务的每个服务（在整个过渡过程中保持整个工作正常）。

关于监控 - 您可能需要考虑查看[splunk](http://www.splunk.com/)，它可以连接到许多源（应用服务器的日志、JMX、SNMP）并关联事件。他们有一个免费版本（每天最多 500Mb 的数据）

# hibernate - Hibernate 配置错误 - 使用注释的一对多关系

> ID：10116974
> 
> 赞同：0
> 
> 时间：2012-04-12T03:24:39.133
> 
> 标签：hibernate, hibernate-mapping, hibernate-onetomany

我浏览了许多视频和教程，解释了如何使用注释机制在休眠中配置一对多关系。我仍然收到此错误。

错误是：org.hibernate.AnnotationException：使用@OneToMany 或@ManyToMany 瞄准未映射的类：bean.Professor.coursesAssigned[bean.Course] 使用@OneToMany 或@ManyToMany 瞄准未映射的类：bean.Professor.coursesAssigned[豆.课程]

我的课程是：

教授.java

```
 package bean;

    import java.util.Set;

    import javax.persistence.CascadeType;
    import javax.persistence.Entity;
    import javax.persistence.FetchType;
    import javax.persistence.OneToMany;

    @Entity
    public class Professor extends User{

        @OneToMany(targetEntity = Course.class, mappedBy = "assignedProfessor", 
                cascade = CascadeType.ALL , fetch = FetchType.LAZY)
        private Set<Course> coursesAssigned;
    } 
```

course.java 是：

```
 package bean;

    import javax.persistence.JoinColumn;
    import javax.persistence.ManyToOne;

    public class Course {

        private Integer courseId;
        private String courseName;

        @ManyToOne(targetEntity = Professor.class)
        @JoinColumn(name = "professor_join")
        private Professor assignedProfessor;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T03:39:53.727

```
org.hibernate.AnnotationException: 
Use of @OneToMany or @ManyToMany targeting an unmapped class: bean.Professor.coursesAssigned[bean.Course] 
Use of @OneToMany or @ManyToMany targeting an unmapped class: bean.Professor.coursesAssigned[bean.Course] 
```

异常已经说明了原因。`@OneToMany`并且`@ManyToMany`只能在其类是映射类的属性上进行注释。如果一个类被注释 `@Entity`并包含[`<mapping class>`](https://stackoverflow.com/questions/1413190/hibernate-mapping-package)在配置文件中或[以编程方式包含在配置](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/cfg/Configuration.html#addAnnotatedClass%28java.lang.Class%29)实例中，则认为它们是映射的。

`@Entity`所以，我相信你在课堂上打分后异常就会消失`Course`。

# php - 新西兰电话表单验证

> ID：10116986
> 
> 赞同：1
> 
> 时间：2012-04-12T03:26:30.223
> 
> 标签：php, codeigniter, validation

我正在构建一个表单系统，现在我已经开始进行验证。我的框架是 CI，所以对于我的验证的主要部分，我有`'trim|required|htmlspecialchars'`但我想知道的是：

A）最适合用于 url 和 phone* 输入

B）您会建议我使用什么来进行客户端验证 - 如果有的话？

*我来自新西兰，所以我们的电话号码是 00 123 4567 或 1234567

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T04:04:08.880

[CI 的验证](http://codeigniter.com/user_guide/libraries/form_validation.html)处理起来非常糟糕，尤其是当你想使用让生活变得简单的很棒的 jquery 插件时。

对于客户端，我使用了由 Jörn Zaefferer 编写的[jquery 插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)，它很容易掌握并且非常可定制。

有很多内置方法可以用于标准的东西，例如 url，对于新西兰电话号码，我创建了一些自定义规则，您可以将其添加到插件随附的附加方法.js 文件中。

```
/**
 * matches NZ phone number formats
 * 
 * +64 7 123 1234
 * or
 * 07-123-1234
 * or
 * 071231234
 * 
 * spaces/hyphens optional
 *
 */
jQuery.validator.addMethod('phoneNZ', function(phone_number, element) {
return this.optional(element) || phone_number.length > 9 &&
phone_number.match(/^(0|(\+64(\s|-)?)){1}\d{1}(\s|-)?\d{3}(\s|-)?\d{4}$/, 'Please specify a valid phone number');

/**
 * matches NZ mobile number formats
 *  
 * 021 123 1234
 * or
 * 027 123 1234
 * or
 * 022-123-1234
 * or
 * +64 21 123 1234
 *
 * spaces/hyphens optional
 * 
 */
jQuery.validator.addMethod('mobileNZ', function(phone_number, element) {
return this.optional(element) || phone_number.length > 9 &&
phone_number.match(/^(0|(\+64(\s|-)?)){1}(21|22|27){1}(\s|-)?\d{3}(\s|-)?\d{4}$/);
}, 'Please specify a valid mobile number'); 
```

作为旁注，请谨慎使用这些号码，除非您打算通过计算方式拨打这些号码，只需将它们作为自由文本保留长度限制，人们想要输入电话号码的方式有很多变化，您最好不要通过执行不适合他们/他们的数量/添加字母/+符号/扩展等的规则来激怒人们

# php - “每周 Top 10”数据库设计问题

> ID：10116992
> 
> 赞同：1
> 
> 时间：2012-04-12T03:27:22.400
> 
> 标签：php, mysql, database, database-schema

我在一个视频网站上工作。就交通而言，这是相当沉重的。我正在尝试按观看视频的次数对视频进行排名。即视频 A 获得 5.2K 观看次数，B 获得 5k 观看次数，因此 A 排名高于 B。但我想计算每个视频在一周（或一个月，如果需要）内获得的观看次数，然后按观看次数对其进行排名。

我首先创建了一个只包含视图的表。即每次观看视频时，都会在表格中插入一行以及时间戳和视频ID。那是一个可怕的决定。由于流量很大，表变得很大，影响性能。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T03:34:29.213

我会让表格存储特定视频的总观看次数与周数。只需根据需要创建/增加。

即有字段video_id、week_number 和total_views。

有一个好的索引（即关于week_number，total_views），这样前十名很容易提取。

还需要`cron`删除旧数据（或存档）。这应该使表格大小易于管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T04:12:23.603

背靠@Ed Heal 的回答，总结绝对是你要找的。但是，设计一个根据一年中的一天或一周递增的表格会在间隔翻转时导致问题。就像在区间开始时，每个人都从 0 开始。如果你恰好在区间的开始，事情看起来……很奇怪。

我发现保留这些统计数据的最有效方法是使用跟踪期。（即一周内，您计算过去 7 天的视频观看次数。）这显示了您网站上内容趋势的非常准确的图片。为此，您需要定期运行一个 cron 作业，该作业将计算每个视频在所需的尾随期间的统计信息。存储摘要，并对它们进行排序。

# javascript - Javascript/html help! Should be simple

> ID：10116995
> 
> 赞同：1
> 
> 时间：2012-04-12T03:28:07.260
> 
> 标签：javascript, html, new-operator

I'm making a page that should display the variable of my choosing within a table. I did the same thing twice, changed the id's and cuch, but only one works. I spent an hour looking over the syntax, and redoing allot of the work but it just doesn't help. Here's the three main pieces of code:

```
var NewGlad = new Array("Jokomopo","Etony","Roy");
var BestGlad = new Array("Johnny","Cod","Billy");

function UpdateTable(){

    document.getElementById("0New").innerHTML = "<a href='" +NewGlad[0]+ "'>" + NewGlad[0] + "</a>";

    document.getElementById("0Best").innerHTML = "<a href='" +BestGlad[0]+ "'>" + BestGlad[0] + "</a>";

} 
```

//The function above IS executed onLoad.

Here's the html, I'll just show you the table row we're dealing with:

```
<tr>

<td class="NewestGlads" id="0New">
fgggrf
</td>

<td class="BestGlads" id="0Best">
fgggrf
</td>

</tr> 
```

Only the NewestGlads td is updated. The other still displays "fgggrf"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T03:38:07.377

Don't say this should be easy. If it were easy you would not be asking us for the answer. You code could use some refinement:

```
var UpdateTable = function () {
        "use strict";
        var NewGlad = ["Jokomopo", "Etony", "Roy"],
            BestGlad = ["Johnny", "Cod", "Billy"];
        document.getElementById("New0").innerHTML = "<a href='" + NewGlad[0] + "'>" + NewGlad[0] + "</a>";
        document.getElementById("Best0").innerHTML = "<a href='" + BestGlad[0] + "'>" + BestGlad[0] + "</a>";
    }; 
```

I changed your references so that they are starting with an alpha character instead of a number. Your HTML will need to change to match. I have never seen identifiers starting with a number and believe it to be a bad convention that could be error prone cross browser. Try this instead by calling the UpdateTable function. You can also execute this without a call by making the code as follows:

```
var UpdateTable = (function () {
        "use strict";
        var NewGlad = ["Jokomopo", "Etony", "Roy"],
            BestGlad = ["Johnny", "Cod", "Billy"];
        document.getElementById("New0").innerHTML = "<a href='" + NewGlad[0] + "'>" + NewGlad[0] + "</a>";
        document.getElementById("Best0").innerHTML = "<a href='" + BestGlad[0] + "'>" + BestGlad[0] + "</a>";
    }()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T03:42:50.097

I just used your code, and this gave me the correct result you are going for

```
<html>
<head>
<script>
    var NewGlad = new Array("Jokomopo","Etony","Roy");
    var BestGlad = new Array("Johnny","Cod","Billy");

    function UpdateTable(){
        document.getElementById("0New").innerHTML = "<a href='" +NewGlad[0]+ "'>" + NewGlad[0] + "</a>";
        document.getElementById("0Best").innerHTML = "<a href='" +BestGlad[0]+ "'>" + BestGlad[0] + "</a>";

    }
</script>
</head>
<body onload="UpdateTable();">
<table>
<tr>
    <td class="NewestGlads" id="0New">fgggrf</td>
    <td class="BestGlads" id="0Best">fgggrf</td>
</tr>
</table>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-12T03:42:17.300

The `innerHTML` is incorrect.

Should read

```
document.getElementById("0New").innerHTML = "<a href=\"" +NewGlad[0]+ "\">" + NewGlad[0] + "</a>"; 
document.getElementById("0Best").innerHTML = "<a href=\"" +BestGlad[0]+ "\">" + BestGlad[0] + "</a>"; 
```

I.e double quotes around the `href`.

Also the IDs should start with a letter. Change them to `New0`and `Best0`

# python - Python, Lists + Dictionaries, Classes?

> ID：10116996
> 
> 赞同：1
> 
> 时间：2012-04-12T03:28:21.050
> 
> 标签：python, list, data-structures, dictionary

Okay so this isn't a specific question; I just need some guidelines as to how to go about doing a final project for my class in python, version 2.7\. What the program basically has to do is import information from 2 text files, one with just a list of books and their author seperated by a comma and lines:
ex:
Douglas Adams,The Hitchhiker's Guide To The Galaxy
Richard Adams,Watership Down
Mitch Albom,The Five People You Meet in Heaven

and then a file of users and their name on one line and with their rating of the 55 total books on the next(text box isn't big enough to put all ratings on one line): ex:
Ben
5 0 0 0 0 0 0 1 0 1 -3 5 0 0 0 5 5 0 0 0 0 5 0 0 0 0 0 0 0 0 1 3 0 1 0 -5 0 0 5 5 0 5 5 5 0 5 5 0 0 0 5 5 5 5 -5
Moose
5 5 0 0 0 0 3 0 0 1 0 5 3 0 5 0 3 3 5 0 0 0 0 0 5 0 0 0 0 0 3 5 0 0 0 0 0 5 -3 0 0 0 5 0 0 0 0 0 0 5 5 0 3 0 0

Anyways, the actual project has you use an algorithm provided by the instructor to compare the users interests in books. You input a user and it searches all of the other 87 users by multiplying their rating of the book and adding them all together. For example, for the first book Ben has a rating of 5 and so does Moose, so the score of similarity for Moose is 25, you do this for every book multiplying the inputted users ratings with all of the other users and whomever has the closest similarity score, you output them and refer 5 books to the user. Basically books that the closest similarity score user read and rated high but the inputted user hasn't read. Okay now after that huge wall of text which I'm sorry about. I understand what I have to do but I just cannot figure out a simple way to do this task, I'm not looking for someone to do the project for me or anything like that its just that this project is worth a large portion of our grade and I don't even know where to start. If anybody could even lead me in the right direction as to what type of data structures would be easiest to accomplish this task I would be extremely grateful, again sorry for such a long post but I'm desperate.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T03:52:02.187

你所说的算法听起来很像[向量空间模型](http://en.wikipedia.org/wiki/Vector_space_model)（也是[这个页面](http://cogsys.imm.dtu.dk/thor/projects/multimedia/textmining/node5.html)）。将每个用户的分数设想为一个 55 维向量（在 55 维空间中形成一条线），并且您通过计算它们的角度彼此之间的接近程度来比较用户线的相似性。

无论如何，您的应用程序有两个基本部分：

1.  文档解析构建数据结构
2.  使用创建的结构实现您的算法

请注意，它们的共同点是您需要决定数据结构，因此您使用的数据结构是应用程序的核心。

可能工作的最简单的事情是两个列表。一个列表是书籍数据：`books = [('author', 'book'), ...]`. 另一个是分数数据：`scores = [('user', [1,2,3,4,...]), ...]`. 然后你确定那`scores[n][1][m]`是对应的分数`books[m]`。然后确保实现算法的函数接受这些结构。

我会确保你可以先让这个方法起作用。然后您可以查看更高级别的抽象。

您可以使用类和对象将数据与其操作捆绑在一起，以提供更高级别的抽象。例如，您可以将您的图书记录存储为命名元组，并拥有另一个对象，该对象包含一组图书记录并具有用于图书查找的方法（例如`findByIndex`、`findByAuthor`等），以及用于得分的类似方法。您可以提供带有书集的乐谱集，以便乐谱可以从乐谱索引中查找图书记录。您可以创建一个评分类来接受评分集并对其执行操作，例如返回评分集中给定用户的得分最高的图书记录列表。等等。