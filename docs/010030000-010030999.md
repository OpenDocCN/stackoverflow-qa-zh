# StackOverflow 问答 10030000-10030999

# java - Nimbus 中的 Java Swing 手风琴外观

> ID：10030002
> 
> 赞同：4
> 
> 时间：2012-04-05T13:56:57.573
> 
> 标签：java, swing, nimbus, expandable

在阅读 Oracle Swing 文档时，我遇到了[这个示例](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/nimbus.html)，其中包含一组显示 Nimbus 外观的组件，名为`SwingSet3`. 我是 Swing 的新手。有人能告诉我侧边栏中的手风琴是否是 Swing 组件吗？

![SwingSet3](../Images/3f94efb109b8fbd369c3a5d4289fc737.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T15:36:51.237

它不是标准的摆动组件。

[您可以在此处查看](http://java.net/projects/swingset3/sources/svn/show/trunk/SwingSet3/src)SwingSet3 演示的源代码。左侧的组件是由各种其他组件（例如`JPanel`、`JLabel`和）组成的复合组件`JButton`。还有一个习俗[`com.sun.swingset3.utilities.CollapsiblePanel`](http://java.net/projects/swingset3/sources/svn/content/trunk/SwingSet3/src/com/sun/swingset3/utilities/CollapsiblePanel.java?rev=219)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T10:22:35.880

一个类似的组件是 JXTaskPane/-Container，它是[SwingX](http://swingx.java.net)的一部分。您可以[查看](http://swinglabs-demos.java.net/demos/swingxset6/swingxset.jnlp)受 SwingSet3 启发的演示。

请注意，SwingX 得到积极维护，其当前版本 1.6.3 可在 maven.java.net 获得

# ruby-on-rails - 设置 check_box_tag 的名称

> ID：10030011
> 
> 赞同：1
> 
> 时间：2012-04-05T13:57:32.780
> 
> 标签：ruby-on-rails

我有以下复选框标签：

```
<%= check_box_tag "pub_#{pub.id}", pub.id %> 
```

当我执行“查看源代码”时，我得到以下 html：

```
<input id="pub_10" name="pub_10" value="10" type="checkbox"> 
```

我希望复选框的名称为其他名称，并将“id”保留为`"pub_#{pub.id}"`

如何设置 checkbox_tag 的名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T12:46:26.280

我终于明白了......我只是使用了以下代码：

```
<input id="pub_<%=pub.id %>" name="publication" value="<%=pub.id %>"  type= "checkbox"  /> 
```

就是这样

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-10T22:54:44.663

Rails 的 check_box_tag 有 4 个参数，第四个是选项的散列：

```
check_box_tag(name, value = "1", checked = false, options = {}) 
```

所以你可以让它像这样工作：

```
<%= check_box_tag "name", pub.id, false, id: "pub_#{pub.id}"  %> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-05T14:15:20.527

你可以这样做

```
<%= check_box_tag "pub_no", :id => "pub_#{pub.id}" %> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-05T14:17:03.957

你可以试试这个

```
<%= check_box_tag "name_as_you_want", :id => "pub_#{pub.id}" %> 
```

希望它能解决你的问题......

# android - 加载浏览器时应用程序崩溃

> ID：10030014
> 
> 赞同：2
> 
> 时间：2012-04-05T13:57:40.040
> 
> 标签：android, eclipse, browser

我试图让我的 Android 应用程序中的浏览器功能正常工作，但应用程序在加载时崩溃。这是加载新活动时的代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    WebView webview = new WebView(this);
    setContentView(webview);

    webview.loadUrl("http://erik-edgren.nu/weather");
    getWindow().requestFeature(Window.FEATURE_PROGRESS);

    WebSettings webSettings = webview.getSettings();
    webSettings.setJavaScriptEnabled(true);
} 
```

这是 LogCat：

```
04-05 13:51:20.224: D/dalvikvm(742): GC freed 2673 objects / 169288 bytes in 107ms
04-05 13:51:20.354: D/AndroidRuntime(742): Shutting down VM
04-05 13:51:20.354: W/dalvikvm(742): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
04-05 13:51:20.364: E/AndroidRuntime(742): Uncaught handler: thread main exiting due to uncaught exception
04-05 13:51:20.373: E/AndroidRuntime(742): java.lang.RuntimeException: Unable to start activity ComponentInfo{weather.right.now/weather.right.Browser}: android.util.AndroidRuntimeException: requestFeature() must be called before adding content
04-05 13:51:20.373: E/AndroidRuntime(742):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
04-05 13:51:20.373: E/AndroidRuntime(742):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
04-05 13:51:20.373: E/AndroidRuntime(742):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
04-05 13:51:20.373: E/AndroidRuntime(742):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
04-05 13:51:20.373: E/AndroidRuntime(742):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-05 13:51:20.373: E/AndroidRuntime(742):  at android.os.Looper.loop(Looper.java:123)
04-05 13:51:20.373: E/AndroidRuntime(742):  at android.app.ActivityThread.main(ActivityThread.java:4363)
04-05 13:51:20.373: E/AndroidRuntime(742):  at java.lang.reflect.Method.invokeNative(Native Method)
04-05 13:51:20.373: E/AndroidRuntime(742):  at java.lang.reflect.Method.invoke(Method.java:521)
04-05 13:51:20.373: E/AndroidRuntime(742):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
04-05 13:51:20.373: E/AndroidRuntime(742):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
04-05 13:51:20.373: E/AndroidRuntime(742):  at dalvik.system.NativeStart.main(Native Method)
04-05 13:51:20.373: E/AndroidRuntime(742): Caused by: android.util.AndroidRuntimeException: requestFeature() must be called before adding content
04-05 13:51:20.373: E/AndroidRuntime(742):  at com.android.internal.policy.impl.PhoneWindow.requestFeature(PhoneWindow.java:172)
04-05 13:51:20.373: E/AndroidRuntime(742):  at weather.right.Browser.onCreate(Browser.java:23)
04-05 13:51:20.373: E/AndroidRuntime(742):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-05 13:51:20.373: E/AndroidRuntime(742):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
04-05 13:51:20.373: E/AndroidRuntime(742):  ... 11 more
04-05 13:51:20.404: I/dalvikvm(742): threadid=7: reacting to signal 3
04-05 13:51:20.484: I/dalvikvm(742): Wrote stack trace to '/data/anr/traces.txt' 
```

我该如何解决这个问题？

提前致谢。

**编辑**：新的 LogCat

```
04-05 14:00:40.893: D/dalvikvm(783): GC freed 2724 objects / 171288 bytes in 136ms
04-05 14:00:41.044: D/AndroidRuntime(783): Shutting down VM
04-05 14:00:41.064: W/dalvikvm(783): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
04-05 14:00:41.064: E/AndroidRuntime(783): Uncaught handler: thread main exiting due to uncaught exception
04-05 14:00:41.074: E/AndroidRuntime(783): android.app.SuperNotCalledException: Activity {weather.right.now/weather.right.Browser} did not call through to super.onCreate()
04-05 14:00:41.074: E/AndroidRuntime(783):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2461)
04-05 14:00:41.074: E/AndroidRuntime(783):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
04-05 14:00:41.074: E/AndroidRuntime(783):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
04-05 14:00:41.074: E/AndroidRuntime(783):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
04-05 14:00:41.074: E/AndroidRuntime(783):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-05 14:00:41.074: E/AndroidRuntime(783):  at android.os.Looper.loop(Looper.java:123)
04-05 14:00:41.074: E/AndroidRuntime(783):  at android.app.ActivityThread.main(ActivityThread.java:4363)
04-05 14:00:41.074: E/AndroidRuntime(783):  at java.lang.reflect.Method.invokeNative(Native Method)
04-05 14:00:41.074: E/AndroidRuntime(783):  at java.lang.reflect.Method.invoke(Method.java:521)
04-05 14:00:41.074: E/AndroidRuntime(783):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
04-05 14:00:41.074: E/AndroidRuntime(783):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
04-05 14:00:41.074: E/AndroidRuntime(783):  at dalvik.system.NativeStart.main(Native Method)
04-05 14:00:41.094: I/dalvikvm(783): threadid=7: reacting to signal 3
04-05 14:00:41.124: I/dalvikvm(783): Wrote stack trace to '/data/anr/traces.txt'
04-05 14:00:43.176: I/Process(783): Sending signal. PID: 783 SIG: 9
04-05 14:00:43.994: D/LocationManager(798): Constructor: service = android.location.ILocationManager$Stub$Proxy@44e95780 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:00:38.303

试试这个，让我知道会发生什么

```
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);

getWindow().requestFeature(Window.FEATURE_PROGRESS);
    WebView webview = new WebView(this);
    WebSettings webSettings = webview.getSettings();
    webSettings.setJavaScriptEnabled(true);
    setContentView(webview);

    webview.loadUrl("http://erik-edgren.nu/weather");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T14:10:16.503

错误说`requestFeature() must be called before adding content`。试试这个（也添加调用`super.onCreate`）：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstancsState);
    WebView webview = new WebView(this);

    getWindow().requestFeature(Window.FEATURE_PROGRESS);

    WebSettings webSettings = webview.getSettings();
    webSettings.setJavaScriptEnabled(true);

    setContentView(webview);
    webview.loadUrl("http://erik-edgren.nu/weather");
} 
```

# php - Magento：从结帐页面中删除 JavaScript

> ID：10030015
> 
> 赞同：0
> 
> 时间：2012-04-05T13:57:40.923
> 
> 标签：php, javascript, magento, checkout

我目前正在基于“一页结帐”在 Magento 中创建结帐页面 - 或者，我清空了 onepage.phtml 并从头开始。

下订单和一切，但用户永远不会进入第三方支付页面；一些支付方式返回一个空白页，而另一些返回错误代码*"Error in Klarna::setConfig: Missing config field(s): secret"*。

我怀疑涉及到一些缺少的 JavaScript，所以我的最后一个问题是：**是否有可能在没有 JavaScript 的情况下使结帐工作，在这种情况下，如何？**

如果相关，这里是我用来创建订单的 PHP 代码（放在 onepage.phtml 的顶部）。

```
<?php
    $checkout = Mage::getSingleton('checkout/type_onepage');

    //STEP(1)
    $checkout->saveCheckoutMethod('guest');

    //STEP(2)
    $checkout->saveBilling($_POST['billing'], false);

    //STEP(3)
    $checkout->saveShipping($_POST, false);

    //STEP(4)
    $checkout->saveShippingMethod('flatrate_flatrate');

    //STEP(5)
    $checkout->savePayment($_POST['payment']);

    //STEP(6)
    $checkout->saveOrder();
?> 
```

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T23:06:48.737

是的，您可以在没有任何 JS 的情况下下订单。要在 savePayment 方法之后支持带有一些重定向 url 的付款方式，您必须添加以下行：

```
$redirectUrl = $checkout->getQuote()
   ->getPayment()
   ->getCheckoutRedirectUrl();
if ($redirectUrl) {
    return $this->getResponse()->setRedirect($redirectUrl);
} 
```

在 saveOrder 之后添加：

```
$redirectUrl = $checkout->getRedirectUrl();
if ($redirectUrl) {
    $this->_redirect($redirectUrl);
} 
```

此外，您必须使用 try {...} catch () { ...} 块进行错误处理：

```
try {
   $checkout = Mage::getSingleton('checkout/type_onepage');

    //STEP(1)
    $checkout->saveCheckoutMethod('guest');

    //STEP(2)
    $checkout->saveBilling($_POST['billing'], false);

    //STEP(3)
    $checkout->saveShipping($_POST, false);

    //STEP(4)
    $checkout->saveShippingMethod('flatrate_flatrate');

    //STEP(5)
    $checkout->savePayment($_POST['payment']);

    //STEP(6)
    $checkout->saveOrder();
} catch (Mage_Core_Exception $e) {
    Mage::getSingleton('checkout/session')->addError($e->getMessage());
} catch (Exception $e) {
    Mage::logException($e);
    Mage::getSingleton('checkout/session')->addError(Mage::helper('checkout')->__('Unable to process your order. Please try again later'));
} 
```

# php - 设置浏览器后退按钮的上一页

> ID：10030016
> 
> 赞同：1
> 
> 时间：2012-04-05T13:57:41.483
> 
> 标签：php, redirect

用户在页面上`1.php`。在 sumbit 表单重定向到`2.php`. 在这里，如果使用浏览器后退按钮，我想重定向到 page `3.php`。

怎么样：

*   **1.php** [*提交表单*] =>
*   **3.php** [*标头（位置：2.php）* ] =>
*   **2.php**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:58:39.980

你没有。这超出了网页的控制范围，这是一件好事。

如果一个网站可以通过这样的浏览器控制，我会感到不安，将我重定向到当我按下“返回”时我没有去的页面。我的第一直觉是做病毒扫描或类似的事情，因为我认为有些地方很不对劲。你的用户会有什么反应？

**编辑**：您使用建议的解决方案编辑了问题：“怎么样：*1.php* [提交表单] => 3.php [header(location:2.php)] => 2.php”

如果您使用 HTTP 标头执行此操作，某些浏览器可能会将其合并到历史记录中的单个页面中。但是，如果您通过 JavaScript 重定向来执行此操作，它将起作用，因为那样浏览器将不够智能以合并它们。您还需要跟踪状态（用户是提交表单还是刚回来？）并且您需要确保`Cache-Control`正确设置标题（`no-cache`）以便浏览器不会缓存 3.php，因为我想根据您是从 1.php 提交表单还是从 2.php 返回表单，该页面看起来应该不一样。

但是，如果您在中间根本没有 3.php，并且`Cache-Control`在 1.php 上进行了相同的状态跟踪，那么您将获得相同的结果，因此您可能根本不需要 3.php。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T13:59:42.547

使用会话。将您最后访问的页面保存在会话变量中，一旦用户按下后退按钮，您的代码应该读取该变量并重定向。

但不要指望历史和东西。

此外，您可能想尝试 history.js（即使我自己仍在寻找该解决方案）。

# html - 边框图像未知属性？

> ID：10030018
> 
> 赞同：0
> 
> 时间：2012-04-05T13:57:51.753
> 
> 标签：html, css

> **可能重复：**
> [给一个 CSS 样式的 div 一个“border-left-image”](https://stackoverflow.com/questions/5541336/give-a-css-styled-div-a-border-left-image)

我试图在 div 的左侧和右侧放置一个边框。

HTML：

```
 <div id="containerscontainer"><div> 
```

CSS：

```
#containerscontainer {
    width: 970px;
    margin: 0 auto;
    padding: 0px 0px 0px 0px;
    background-color:#000;       
    border-left-image:url('/gfx/bkshadleft.png');
    border-right-image:url('/gfx/bkshadright.png');
} 
```

![在此处输入图像描述](../Images/b860a8b453e9ac2818f4faf08cce619e.png) ![在此处输入图像描述](../Images/a24d10a90ed43429508e860bcbab8c7a.png)

但由于某种原因在 chrome 中我可以看到我收到错误未知属性名称？为什么是这样？我做得不对吗？

小提琴示例：http: [//jsfiddle.net/uzi002/8dX7R/3/](http://jsfiddle.net/uzi002/8dX7R/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:23:00.017

根据经验，我觉得语法可能不正确，或者图像尺寸不正确并且边框已关闭。我建议使用这样的网站来生成图像：

[http://border-image.com/](http://border-image.com/)

而且，我在你的小提琴中看不到边框图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T14:00:49.690

要在 Chrome 中工作，您需要为样式命名：

-webkit-border-left-image

看到这篇文章：[给一个 CSS 样式的 div 一个“border-left-image”](https://stackoverflow.com/questions/5541336/give-a-css-styled-div-a-border-left-image)

# mysql - 如何在 CURRENT_TIMESTAMP MySQL 中添加 24 小时？

> ID：10030019
> 
> 赞同：4
> 
> 时间：2012-04-05T13:57:52.377
> 
> 标签：mysql, timestamp

我想在数据库表中添加过期 TIMESTAMP。我有一个字段时间戳，类型为 TIMESTAMP，默认值为 CURRENT_TIMESTAMP()。我添加了类型为 DATETIME 且默认值为 ADDDATE(CURRENT_TIMESTAMP, INRERVAL 1 DAY) 的新字段“过期”，但不起作用。

```
CREATE TABLE IF NOT EXISTS `temp_mch` (
  `name` varchar(60) NOT NULL,
  `qty_new` int(5) NOT NULL,
  `timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`name`),
  KEY `name` (`name`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 
```

我哪里错了？

提前致谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T13:59:13.920

这在列默认定义中不受支持。

您可以使用触发器来代替。

有关详细信息，请参阅此问题：

[过期日期作为 TIMESTAMP 列的默认值](https://stackoverflow.com/questions/9721804/expire-date-as-default-value-for-timestamp-column/9721905#9721905)

# sql-server - 跨服务器 SQL 查询以读取一个表（共享）并写入另一个表（本地）

> ID：10030022
> 
> 赞同：1
> 
> 时间：2012-04-05T13:58:02.373
> 
> 标签：sql-server, local, shared, cross-server

我一直在尝试读取一台服务器上的表并写入我的硬盘驱动器上的另一个现有表（本地......使用 SQL Server Express 创建）。

这是我的代码：

```
insert into [DPS-ABC1DE2\SQLEXPRESS].my_LOCAL_DATABASE.dbo.SHIPMENTS
select
    CUST_NUMBER,
    SHIPMENT_ID,
    SHIP_DATE,
    MODE_CODE,
    MILES,
    WEIGHT,
    AMOUNT_PAID
from SHARED_DATABASE.dbo.SHIPMENTS
where datepart(year,SHIP_DATE)= 2012 and datepart(month,SHIP_DATE) = 1 
```

运行此程序时，我收到以下错误消息：

> 消息 7202，级别 11，状态 2，第 7
> 行在 sys.servers 中找不到服务器“DPS-ABC1DE2\SQLEXPRESS”。验证是否指定了正确的服务器名称。如有必要，执行存储过程 sp_addlinkedserver 将服务器添加到 sys.servers。

所以我尝试使用

```
EXEC sp_addlinkedserver [DPS-ABC1DE2\SQLEXPRESS] 
```

但我收到此错误：

> “消息 15247，级别 16，状态 1，过程 sp_MSaddserver_internal，第 29 行
> 用户无权执行此操作。”

我是一名新秀 SQL 程序员，所以我不得不对此进行广泛的研究，但没有成功。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:45:15.687

`sp_addlinkedserver`执行权限默认授予 sysadmin 和 setupadmin 固定服务器角色的成员。查看此[链接](http://tweakingsqlserver.blogspot.co.uk/2008/09/msg-15247-level-16-state-1-procedure.html)，了解如何对其进行排序`sql server 2005`。

摆脱该问题后，您可以使用以下内容链接并登录到另一台服务器。

```
--add the linked server and then login
EXEC sp_addlinkedserver 'DPS-ABC1DE2\SQLEXPRESS',N'SQL Server';

EXEC sp_addlinkedsrvlogin @rmtsrvname='DPS-ABC1DE2\SQLEXPRESS', 
        @useself='false',
        @rmtuser='login_username',
        @rmtpassword='login_password'

--do your job here                    
Insert into [DPS-ABC1DE2\SQLEXPRESS].my_LOCAL_DATABASE.dbo.SHIPMENTS
Select...

--drop the linked server login and then drop the server
EXEC sp_droplinkedsrvlogin 'DPS-ABC1DE2\SQLEXPRESS', NULL
EXEC sp_dropserver 'DPS-ABC1DE2\SQLEXPRESS', NULL; 
```

希望这可以帮助...

# visual-studio - Visual Studio Post Build Event - xcopy 到不同的相对目录

> ID：10030023
> 
> 赞同：3
> 
> 时间：2012-04-05T13:58:04.810
> 
> 标签：visual-studio, visual-studio-2010, xcopy, post-build-event, post-build

本质上，我想要做的是使用通配符作为目录。

构建后事件在 PageComponents 项目上：

```
页面组件
    小部件模板
        小部件模板1
            用户控件1
        小部件模板2
            用户控件2

```

我想将所有用户控件复制到 Web 项目，但复制到不同的相对位置：

```
网络
    Ctrl演示
        用户控件1
        用户控件2

```

我试图通配 WidgetTemplates 目录：

`xcopy "$(ProjectDir)WidgetTemplates\*\*.ascx" "$(SolutionDir)Client.Web\CtrlPresentation" /y /s`

但这一切都失败了。所以我尝试了以下方法：

`xcopy "$(ProjectDir)WidgetTemplates\*.ascx" "$(SolutionDir)Client.Web\CtrlPresentation" /y /s`

但这也会复制每个单独的 WidgetTemplate 文件夹。

有没有办法实现我想要做的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T10:04:15.510

尝试使用任务。

```
<ItemGroup>
    <MySources Include="$(ProjectDir)WidgetTemplates\**\*.ascx" />
</ItemGroup>
<Target Name="CopyOver">
    <Copy SourceFiles="@(MySources)" DestinationFiles="@(MySources->'$(SolutionDir)Client.Web\CtrlPresentation\%(FileName)%(Extension)')">
</Target> 
```

并在您的构建之后使用此目标

```
<BuildDependsOn>
    $(BuildDependsOn);
    CopyOver
</BuildDependsOn> 
```

# android - 如何使用 ADT r17 生成 Javadoc

> ID：10030025
> 
> 赞同：3
> 
> 时间：2012-04-05T13:58:11.437
> 
> 标签：android, javadoc, adt

当人们将 ADT 和 SDK 更新到最新版本 r17 时，似乎出现了许多问题。
我在为使用 Android 蓝牙库的 Android JAR 项目生成 Javadoc 时遇到问题。使用修订版 r16，以下技巧有效：

```
-classpath "C:/Program Files (x86)/Android/android-sdk/platforms/android-13/android.jar"
-linkoffline http://d.android.com/reference "file:/C:/Program Files (x86)/Android/android-sdk/docs/reference" 
```

但是在我更新到 r17 之后，它又发生了。我删除了类路径行，因为它已经包含在 r17 中，但我仍然得到：

```
error: package android.bluetooth does not exist

    and

error: cannot find symbol .... 
```

似乎没有人问过这个问题。有人可以帮忙吗？
谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-07T11:56:02.633

首先确保您为 Android.jar 文件提供了正确的 Android Javadoc 位置...

如果没有，请执行以下操作：-

右键单击项目 >> 属性 >> JavaBuildPath >> 选择库选项卡 >> Android XX >> Javadoc 位置 >> 从 android 安装文件夹中浏览 Javadoc 位置（即 file:/C:/#Android Installed Directory/sdk/docs/reference /)

现在在 VM Options 文本字段中添加以下行（即在最后一页中） -bootclasspath C:/#Android Installed Directory/sdk/platforms/android-XX/android.jar

希望这篇文章对你有帮助:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T09:54:25.190

在 libs 文件夹中添加 android.jar（来自 android-sdk-linux/platforms/android-10/android.jar）。

这可以解决这个问题，但我知道这不是最好的。

# c++ - C ++重载+运算符不起作用

> ID：10030031
> 
> 赞同：1
> 
> 时间：2012-04-05T13:58:27.273
> 
> 标签：c++

大家好，看看我的代码我正在尝试制作一个程序，要求您以克为单位输入第一个值，第二个值是千克，然后通过重载 + 运算符将千克转换为克，但它不起作用，为什么

```
#include <iostream>
using namespace std;
class ADD{
private:
    int Fval;
    int Sval;
public:
    ADD(){
            cout << "WELCOME TO OUR PROGRAM"<<endl<<"PLEASE ENTER THE FIRST VALUE BY GRAMS :";
            cin >> Fval;
            cout << "PLEASE ENTER THE SECOND VALUE BY KILOGRAMS :"; cin >> Sval;
        }
    ADD operator+(ADD& add){
        add.Sval *= 1000;
        return add;
    }
    int plus(){
        return Fval+Sval;
    }
};
int main(){
    ADD a1;
    cout << "THE TOTAL VALUE = " << a1.plus() << " GRAMS";
} 
```

没有效果看输出

```
WELCOME TO OUR PROGRAM
PLEASE ENTER THE FIRST VALUE BY GRAMS :2
PLEASE ENTER THE SECOND VALUE BY KILOGRAMS :3
THE TOTAL VALUE = 5 GRAMS 
```

这意味着 + 运算符不会将 3 乘以 1000 为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T13:59:58.317

那是因为你**没有打电话** `operator +`。

你在打电话`ADD::plus()`：

```
int plus(){
    return Fval+Sval;
} 
```

`Fval`并且`Sval`是整数，你要加起来。就这么简单。

### 编辑：

你的代码很可疑。

```
ADD operator+(ADD& add){
    add.Sval *= 1000;
    return add;
} 
```

里面的乘法`operator +`？真的吗？此外，并不是说您正在修改参数，这是您不应该的。这不直观。如果你**真的必须**这样做：

```
ADD operator+(const ADD& add){
    ADD ret;
    ret.Sval = add.Sval * 1000;
    return ret;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:12:49.727

运算符重载的工作方式是，如果您有一个 X 类型的对象，如下所示：

```
class X {
    public:
        X( int v ) : x( v ) {}
        int value();
        X operator +( const X& y ) {
            return X( value() + y.value() );
        }
    private:
        int y;
    }; 
```

现在如果你声明两个类型的对象`X`，比如说`X ex`and `X wye`，你可以说

```
X zed = ex + wye; 
```

并得到正确的结果。如果 type`X`不仅仅是一个`int`字段，效果会更有趣。例如，您可以实现 2D 向量和点，然后执行添加和减去向量的操作以获取向量，将向量添加到点或从点减去向量以获取点，以及减去点以获取向量。

希望这将使您对正在发生的事情有足够的了解，以便能够重组您的代码以使其执行您想要的操作。我在打字时可能有语法错误的细节。

另外，当我想要一个二元运算符时，我经常发现正确的做法是声明一个友元运算符：

```
friend operator + ( vector2D a, vector2D b ); 
```

...

```
inline operator + ( vector2D a, vector 2D b ) {
    return vector2D ( a.x + b.x, a.y + b.y );
} 
```

# c# - 来自 C# 的 Appharbor JustOneDB https 请求出现 400 错误

> ID：10030034
> 
> 赞同：1
> 
> 时间：2012-04-05T13:58:31.367
> 
> 标签：c#, https, httpwebrequest, appharbor, justonedb

我正在尝试对 JustOneDB 执行 https GET，如果我从 curl 实用程序执行此操作，它会起作用。但它不适用于 C#。我收到 (400) 错误请求

我四处搜索并禁用了安全性以及所有这些，但它仍然无法正常工作。有任何想法吗？有没有人用休息和 JustOneDB 做过这个？

这与所有其他其余示例一起工作：

`curl -k -XGET 'https://username:password@77.92.68.105:31415/justonedb/database/database name'`

这不起作用：我对字符串进行了模拟以删除我的密码。

```
 public ActionResult JustOneDb()
    {
        ///////////
        HttpWebRequest request = null;
        HttpWebResponse response = null;
        try
        {

            String Xml;
            //curl -k -XGET 'https://zn0lvkpdhdxb70l2_DUMMY_urshn5e7i41lb3fiwuh@77.92.68.105:31415/justonedb/database/n10lvkpdhdxei0l2uja'
            string url = @"https://zn0lvkpdhdxb70_DUMMY_urshn5e7i41lb3fiwuh@77.92.68.105:31415/justonedb/database/n10lvkpdhdxei0l2uja";

            request = (HttpWebRequest)WebRequest.Create(url);

            request.Method = "GET";

            request.Credentials = CredentialCache.DefaultCredentials;

            // Ignore Certificate validation failures (aka untrusted certificate + certificate chains)
            ServicePointManager.ServerCertificateValidationCallback = ((sender, certificate, chain, sslPolicyErrors) => true); 

            // Get response 
            using (response = (HttpWebResponse)request.GetResponse())
            {
                // Get the response stream 
                StreamReader reader = new StreamReader(response.GetResponseStream());
                Xml = reader.ReadToEnd();
            }
            return Content(Xml);
        }
        catch (Exception ee)
        {
            return Content(ee.ToString());

        }
        //////////////

        ViewBag.fn = "*.xml";
        return View();
    } 
```

结果：

```
System.Net.WebException: The remote server returned an error: (400) Bad Request. at System.Net.HttpWebRequest.GetResponse() 
at Mvc3Razor.Controllers.MyXmlController.JustOneDb() ... 
```

TIA FxM：{

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T18:45:26.507

您应该使用“用户名”和“密码”创建正确的凭据，而不是在 url 中传递用户名密码。您可能还想考虑使用类似[RestSharp](http://restsharp.org/)而不是 raw 的东西`WebRequest`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:54:29.773

好的，我复制了代码，问题是HttpWebRequest库没有在原始请求中添加身份验证头。解决方案是手动插入标头，因此如果在 'request.Method = "GET" 行之后添加以下两行（并从 URL 字符串中删除用户名/密码）：

```
string authInfo = "zn0lvkpdhdxb70l2_DUMMY_urshn5e7i41lb3fiwuh";
request.Headers["Authorization"] = "Basic " + Convert.ToBase64String(Encoding.Default.GetBytes(authInfo)); 
```

它应该可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T14:47:39.593

证书不匹配，已修复。它仍然是自签名的，但现在主机名匹配。我们将很快更改为使用完全签名的证书，但同时请让我知道它是否仅适用于自签名覆盖。

# page-refresh - 如何只自动刷新一次页面？

> ID：10030039
> 
> 赞同：1
> 
> 时间：2012-04-05T13:58:45.073
> 
> 标签：page-refresh

当用户登录时，我有一个网页，它将有一个显示“用户名”的链接和一个“注销”的链接。

用户注销后，“用户名”和“注销”链接将分别变为“登录”和“注册”链接。

该页面使用javascript检查用户cookie，如果用户cookie存在，它将显示“用户名”链接和“注销”链接。如果不存在用户 cookie，“登录”和“注册”链接将替换“用户名”和“注销”链接。

这就是问题所在：当一个已经登录的用户点击“注销”链接时，一个 perl 脚本会删除用户 cookie，并重定向回同一页面。该页面不会自动显示“登录”和“注册”链接。只有在用户手动刷新页面后，这两个链接才会出现。

看来我需要一个系统来自动刷新页面一次。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T22:50:14.067

你可以在 deconnexion 重定向到“page.html?1”之后这样做，并且在 javascript 端使用这个片段来检查 ?1 并重定向到“page.html”

```
var refreshCheck= Number(window.location.search.slice(1));
if (refreshCheck == 1 ) {
    window.location.href = window.location.substring(0, window.location.length-2);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-05T14:06:27.193

我认为强制刷新这类事情并不好，你应该考虑处理操作的方式，但如果你想要简单的方法，那么你必须添加这段代码，它会立即刷新

```
<meta http-equiv="refresh" content="0"> 
```

# python - rpy + matplotlib + arcpy

> ID：10030042
> 
> 赞同：2
> 
> 时间：2012-04-05T13:59:05.970
> 
> 标签：python, matplotlib, rpy2, arcpy

我正在尝试将 ryp 与我的 arcpy 脚本一起使用，但出现以下错误：

```
import rpy2.robjects as robjects Traceback (most recent call last):
File "<pyshell#0>", line 1, in <module> import rpy2.robjects as robjects
File "C:\Python26\ArcGIS10.0\lib\site-packages\rpy2\robjects\__init__.py", line 12, in <module> import rpy2.rinterface as rinterface
File "C:\Python26\ArcGIS10.0\lib\site-packages\rpy2\rinterface\__init__.py", line 39, in <module> import win32api
ImportError: No module named win32api 
```

即使在为我的 python 版本安装了 pywin32 之后，也会出现此错误。我注意到这似乎是一个常见的错误，通常可以通过安装 pywin32 来解决。

我的matplotlib安装也有问题，每次我尝试使用它（**import matplotlib.pyplot as plt**），python崩溃......

**版本：**

Python 2.6.6

matplotlib 安装：matplotlib-1.1.0.win32-py2.6.exe

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:53:47.603

您将需要使用 PROPER Python 运行这些脚本。在我看来，ArcPy 发行版不包含 win32api 模块（它在 Mac 或 Linux 上的 Python 示例中也不存在）。

我会安装包含 R 绑定的[PythonXY](http://code.google.com/p/pythonxy/)，并查看您的脚本是否在那里运行。如果它们在那里运行，那么我（猜想）我是正确的，并且 ArcPy 不包含这些模块。

PythonXY 的一个不错的好处是它是一个出色的 Python IDE (Spyder)，但真正的好处是我上面的评论者所说的：

> 不同的编译器版本可能会导致很多问题。

因此，在 PythonXY 中，您会获得使用相同编译器编译的整个包。
让我们知道这些是否使您的 RPy 脚本运行。

# java - 编译单元访问者 - Java 编译器树 api

> ID：10030043
> 
> 赞同：1
> 
> 时间：2012-04-05T13:59:06.683
> 
> 标签：java, abstract-syntax-tree, java-compiler-api

我正在使用编译器 Tree api 将我的代码解析为 AST，但是从不调用方法 visitCompilationUnit，尽管调用了方法 visitClass，我做错了什么？

第二个问题：有什么方法可以告诉编译器截断编译后的代码（我只对 AST 感兴趣，而不对类文件感兴趣）。

谢谢。

```
@SupportedSourceVersion(value=SourceVersion.RELEASE_7)
@SupportedAnnotationTypes("*")
public class Parser extends AbstractProcessor {
.
.
.
    @Override
    public boolean process(Set<? extends TypeElement> annotations, RoundEnvironment roundEnvironment) {
       for (Element e : roundEnvironment.getRootElements()) {
            System.out.println(e + "***");
            TreePath tp = trees.getPath(e);
            // invoke the scanner
            rootVisitor.scan(tp, trees);
        }
        return true;
    }
}

public class OdpaVisitor extends TreePathScanner<Object, Trees> {

    protected RepositoryIface repository;

    private String pckg;

    public OdpaVisitor(RepositoryIface repository) {
        this.repository = repository;
    }

    @Override
    public Object visitCompilationUnit(CompilationUnitTree node, Trees p) {
        repository.savePackage(node.getPackageName().toString());
        this.pckg = node.getPackageName().toString();
        return super.visitCompilationUnit(node, p);
    }    

    @Override
    public Object visitClass(ClassTree node, Trees p) {
        repository.saveClass(node.getSimpleName().toString(), pckg);
        return super.visitClass(node, p);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:43:35.730

您可能使用[getTree](http://docs.oracle.com/javase/6/docs/jdk/api/javac/tree/com/sun/source/tree/ClassTree.html)[方法](http://docs.oracle.com/javase/6/docs/jdk/api/javac/tree/com/sun/source/util/Trees.html#getTree%28javax.lang.model.element.TypeElement%29)获得了对 ClassTree 的引用。

你需要

1.  使用[getPath 方法获取对](http://docs.oracle.com/javase/6/docs/jdk/api/javac/tree/com/sun/source/util/Trees.html#getPath%28javax.lang.model.element.Element%29)[TreePath](http://docs.oracle.com/javase/6/docs/jdk/api/javac/tree/com/sun/source/util/TreePath.html)的引用- 使用您之前发现的 ClassTree 作为参数 e。
2.  使用[getCompilationUnit 方法](http://docs.oracle.com/javase/6/docs/jdk/api/javac/tree/com/sun/source/util/TreePath.html#getCompilationUnit%28%29)获取对[CompilationUnitTree](http://docs.oracle.com/javase/6/docs/jdk/api/javac/tree/com/sun/source/tree/CompilationUnitTree.html)的引用。

# java - 如何在 Jersey/Spring 中使用 @QueryParam 重载方法？

> ID：10030045
> 
> 赞同：4
> 
> 时间：2012-04-05T13:59:13.980
> 
> 标签：java, spring, jersey, overloading, query-parameters

我想用@QueryParam 重载一个方法，但每次我尝试执行这段代码时都会抛出：

```
SEVERE: Exception occurred when intialization
com.sun.jersey.spi.inject.Errors$ErrorMessagesException 
```

我的代码是：

```
@GET
@Path("/test")
@Produces("text/plain")
public String getText(@QueryParam("PID") String pid)
{
  return pid;
}

@GET
@Path("/test")
@Produces("text/plain")
public String getText(@QueryParam("PID") String pid, @QueryParam("NAME") String name)
{
  return pid + name;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T14:02:49.440

不可以。

在 java 中没问题，但它的问题是 - 从 servlet 方面 - jersey 需要将每个 url 映射到类中的某个函数。

当然，您可以做的是将其分成 2 个方法，或者构建一个方法来检查参数并执行正确的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-24T07:32:30.190

您可以根据请求中存在的请求/查询参数来重载其余端点。

这是解决我的用例的答案：为具有不同参数的相同 url 模式创建两个方法

# c# - 多线程 WCF 服务中的高效集合维护

> ID：10030048
> 
> 赞同：1
> 
> 时间：2012-04-05T13:59:24.320
> 
> 标签：c#, multithreading, wcf, synchronization

我们有一个简单的 WCF 服务，它被标记为 InstanceContextMode = Single 和 ConcurrencyMode = Multiple。对于返回列表的方法，我们无需在调用时访问我们的数据库并填充列表，而是简单地返回列表的本地副本。该列表由一个后台线程维护，该线程每 24 小时访问我们的数据库并重新填充该列表。我们通过在两个地方锁定对象来处理并发问题：在返回集合的方法内部和填充集合的方法内部。

我的问题是，我们如何才能提高效率。目前，我们在客户端将调用的服务方法“GetCustomers”中存在瓶颈：

```
public List<ZGpCustomer> GetCustomers()
{
    List<ZGpCustomer> customerListCopy = new List<ZGpCustomer>();
    lock (_customerLock)
    {
        customerListCopy = new List<ZGpCustomer>(_customers);
    }

    return customerListCopy;
} 
```

由于“_customers”仅每 24 小时填充一次，看来我们应该只在修改集合时才需要锁定 GetCustomers 方法。按照目前的设置方式，如果同时有 1000 个请求进入，我们实际上是在对 1000 个请求进行排队，因为一次只有 1 个线程可以访问该方法。这使得服务的多线程方面有些无用，不是吗？

这种模式有最佳实践吗？我应该使用更合适的数据收集来存储我的对象吗？“BlockingCollection”会更合适吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:04:21.780

肯定有一种更有效的方法来做到这一点。诀窍是保持对集合的主引用不可变。这样，您就不必在阅读器端同步访问。只有事物的作者方需要锁。读者端什么都不需要，这意味着读者保持高度并发。您唯一需要做的就是将`_customers`引用标记为 volatile。

```
// Variable declaration
object lockobj = new object();
volatile List<ZGpCustomer> _customers = new List<ZGpCustomer>();

// Writer
lock (lockobj)
{
  // Create a temporary copy.
  var copy = new List<ZGpCustomer>(_customers);

  // Modify the copy here.
  copy.Add(whatever);
  copy.Remove(whatever);

  // Now swap out the references.
  _customers = copy;
}

// Reader
public List<ZGpCustomer> GetCustomers()
{
    return new List<ZGpCustomer>(_customers);
} 
```

如果您愿意`GetCustomers`稍微更改签名，则可以利用的不变性`_customers`并返回只读包装器。

```
// Reader
public IList<ZGpCustomer> GetCustomers()
{
    return _customers.AsReadOnly();
} 
```

# css - 出现滚动条 => 身体动作

> ID：10030053
> 
> 赞同：1
> 
> 时间：2012-04-05T13:59:39.940
> 
> 标签：css

以下是一个非常简单的液体代码模板，我在其中防止此布局在大型显示器上变得太宽，并且可能需要最小宽度以防止此布局变得太窄。容器围绕所有其他 div，为它们提供基于百分比的宽度。

```
body {
    font:  Arial, Helvetica, sans-serif;
    background: #CCC;
    margin: 0;
    padding: 0;
    color: #000;
}

.container {
    width: 90%;
    max-width: 1260px;
    min-width: 780px;
    background: #FFF;
    margin: 0 auto; 
} 
```

当浏览只有少量内容的页面时，body 不会收缩、移动或晃动（因为没有出现滚动条）。当在不同类型的页面之间浏览时（低内容-无滚动条和高内容-出现滚动条），主体移动一点，导致整个网站浏览，一副颤抖的样子。

如何避免上述页面移动？我不想通过设置来实现解决方案，`overflow:scroll;`因为我不想总是显示滚动条。

任何帮助将不胜感激，谢谢，迈克

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-05T14:06:45.047

Have you tried `overflow: auto;`? It will take both the X and Y scroll bars into account separately and only show the scroll bar if necessary.

If, as @pinkgothic suggested in the comments below, you want to always show the vertical scroll bar, try `overflow-y: scroll;`.

To always hide the horizontal scrollbar, use `overflow-x: hidden;`

# javascript - FusionCharts 3.2.1 - FusionCharts._fallbackJSChartWhenNoFlash() 不工作

> ID：10030056
> 
> 赞同：0
> 
> 时间：2012-04-05T13:59:47.260
> 
> 标签：javascript, extjs, fusioncharts

我正在使用 FusionCharts 3.2.1，并且我想在浏览器中未安装 Flash 播放器或禁用时在 javascript 中呈现图表。我正在调用方法 FusionCharts._fallbackJSChartWhenNoFlash() 但没有任何反应。

```
 function updateChart(chartDataJSON) {
        FusionCharts._fallbackJSChartWhenNoFlash();
            var currentSwfName = 'MSCombi2D.swf';
            if (chartDataJSON.swfName) {
                currentSwfName = chartDataJSON.swfName;
            }
            if (prevSwfName != currentSwfName) {
                prevSwfName = currentSwfName;
                var contextPath = document.getElementById('contextPath').value;  
                var swfUrl = contextPath + '/charts/' + currentSwfName;

                if (FusionCharts('residenceChart')) {
                    FusionCharts('residenceChart').dispose();
                }

                new FusionCharts({
                    id: 'residenceChart',
                    swfUrl:swfUrl,
                    renderAt:'consumptionChartDiv',
                    dataFormat:'json',
                    dataSource: chartDataJSON,
                    registerWithJS: 1,
                    width: 730,
                    height: 300,
                    debugMode: 0
                }).render();
            } else {
                FusionCharts('residenceChart').setJSONData(chartDataJSON);
            }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T06:48:51.307

您是否必须坚持使用 FusionCharts 3.2.1？如果您升级到最新版本（如果您已经是客户，则免费），此问题将得到解决。

从**FusionCharts 3.2.2**开始，当 Flash Player 不可用时，组件会自动呈现 JavaScript 图表，您无需显式调用`FusionCharts._fallbackJSChartWhenNoFlash();`。事实上，该方法已从最新 API 中删除。

但是，如果您仍然希望坚持使用 v3.2.1，我建议您首先查看以下内容：

1.  确保您拥有 FusionCharts 包随附的所有随附 JavaScript 文件，并保存在 FusionCharts.js 文件旁边。
2.  由于 JavaScript 图表需要额外的 JS 文件，因此它们会在需要时动态加载。但是，您的情况可能会失败；尝试手动将 JavaScript 文件添加到**包含**`FusionCharts.js`
3.  如果您的浏览器调试/js 控制台上有任何 JavaScript 错误，请从错误消息中查找提示。FusionCharts 文档和产品论坛可能会帮助您找出错误消息的原因。
4.  作为预防措施，请确保通过 JSON 传递的 swfName 大小写正确。FusionCharts 3.2.1 JavaScript 图表存在 swfUrl 区分大小写的问题。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-06T06:33:14.597

似乎 FusionCharts 构造函数的参数顺序不正确。

来自[FusionCharts 文档](http://docs.fusioncharts.com/charts/contents/?JavaScript/JS_CreateChart.html)：

`var myChart = new FusionCharts("FusionCharts/Column3D.swf", "myChartId", "400", "300", "chartContainer", {dataFormat : "json", dataSource : chartDataJSON});`

上面的代码应该适合你。

# css - 我的移动网站正在水平滚动

> ID：10030058
> 
> 赞同：0
> 
> 时间：2012-04-05T13:59:50.783
> 
> 标签：css, media-queries, responsive-design

我正在为一个朋友制作一个移动网站——​​并且我使用媒体查询来调整她的网站，以便在任何智能手机上观看时都感觉更加移动。

感觉就像我完成了网页 - 但是当我在我的手机 iphone 3gs 和 htc incredbile S 上查看它时，你可以水平滚动 2-3 像素。有些元素搞砸了这个，我长出了白发，因为我真的不知道它是什么。

我该如何解决这个问题？

网页链接

[http://www.linaahlen.se/](http://www.linaahlen.se/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-14T17:06:00.427

晚了，但供将来参考。我想指出寻找问题原因的方法。[使用Google Chrome 设备模式](https://developer.chrome.com/devtools/docs/device-mode)打开网站。然后检查那里是否存在问题（此解决方案依赖于问题出现在设备模式中）。然后从较大的元素（如标题、内容容器）开始一一设置“显示：无”到元素，并在隐藏每个元素后检查是否不需要的可滚动性消失了。通过这种方式，您可以追踪问题的原因。

我遇到了同样的问题，一开始尝试通过查看每个元素的 CSS 代码来确定原因，浪费了很多时间并没有找到原因。可能浏览器可以比人类阅读 CSS 更好地呈现页面......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:04:29.023

快速浏览一下 Chrome 中的检查器，它看起来像是这个属性：

```
div.entry {
    padding: 0em 1em;
} 
```

style-responsive.css 的第 106 行 - 它将内容推送到几个像素宽，将其更改为`padding: 0 0.8em;`对我有用。

哦，只是为了记录，它是水平滚动，而不是垂直滚动！

# jquery - 后期动画链接切换

> ID：10030063
> 
> 赞同：0
> 
> 时间：2012-04-05T14:00:20.537
> 
> 标签：jquery, animation, html

我有一个动画设置为在单击 DOWN 链接时向下滑动 DIV。我想在动画结束时将下行链接替换为 UP 链接，以便可以返回 DIV。设置了将 DIV 动画返回到其起始位置的 JQuery。我唯一遇到的困难是在向下和向上 DIV 之间切换。

这是代码[http://jsfiddle.net/pC6fC/20/](http://jsfiddle.net/pC6fC/20/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:09:47.113

您可以指定动画完成后要运行的回调，如下所示：

```
var toggleButton = function () {
    $(".link, .link1").toggle();
};

/* Slides down alert banner */
$(function(){ 
    $(".link").click(function(){
        $(".box1").animate({'margin-top':150}, 500, toggleButton);
    });
});

/* Slides up alert banner */
$(function(){
    $(".link1").click(function(){
        $(".box1").animate({'margin-top':0}, 500, toggleButton);
    });
}); 
```

我也改成`visibility: hidden`在`display: none`你的 CSS 上。

见[小提琴](http://jsfiddle.net/ZcQVV/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T14:12:35.717

这是小提琴：http: [//jsfiddle.net/ttu9t/](http://jsfiddle.net/ttu9t/)

```
<div class="link">DOWN</div>
<div class="box1"></div>
<div class="box2"></div>​ 
```

js：

```
$(function(){ 
     $(document).on('click', '.link', function(){
        $('.box1').animate({'margin-top':150}, 500);
        $(this).text('UP');
        $(this).removeClass('link');
        $(this).addClass('link1');
    });
    $(document).on('click', '.link1', function(){
        $('.box1').animate({'margin-top':0}, 500);
        $(this).text('DOWN');
        $(this).removeClass('link1');
        $(this).addClass('link');
    });
}); 
```

​并且不要忘记让 link1 可见：

```
.link1 {
} 
```

* * *

更新

[http://jsfiddle.net/ttu9t/2/](http://jsfiddle.net/ttu9t/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T14:11:44.530

也许您可以尝试使用函数 toggle() 来执行此操作。

它用于隐藏或显示 div。

```
 <script type="text/javascript">
   function togglefield(classname) {
      $("." + classname).toggle("slow")
 </script>

 <button onclick="togglefield('test')"> test </button>

 <div class="info"><br/><br/><br/></div> 
```

这当然可能会有所改善，但这就是我对您的需求的看法。

# c# - IsFinite() 等效

> ID：10030070
> 
> 赞同：6
> 
> 时间：2012-04-05T14:00:41.453
> 
> 标签：c#, c++

以下定义的 C# 替代品是什么？

```
#define IS_FINITE(x) (0x7FF0 != (*((unsigned short*)(&x) + 3) & 0x7FF0)) 
```

也许`double.IsInfinity(x) == false`或`double.IsNegativeInfinity(x) == false`？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-05T14:07:46.197

```
!double.IsInfinity(x) && !double.IsNaN(x) 
```

参考资料： http:
[//pubs.opengroup.org/onlinepubs/009604499/functions/isfinite.html](http://pubs.opengroup.org/onlinepubs/009604499/functions/isfinite.html)
[http://msdn.microsoft.com/en-us/library/system.double.isinfinity.aspx](http://msdn.microsoft.com/en-us/library/system.double.isinfinity.aspx)
[http://msdn。 microsoft.com/en-us/library/system.double.isnan.aspx](http://msdn.microsoft.com/en-us/library/system.double.isnan.aspx)

# button - Selenuim webdriver试图自动化点击链接按钮？

> ID：10030071
> 
> 赞同：0
> 
> 时间：2012-04-05T14:00:42.950
> 
> 标签：button, selenium, webdriver

我正在使用 Selennium Webdriver 自动单击 PDF 下载按钮。我使用了各种方法来单击按钮，但似乎抛出了一个 Jscript 错误：

```
Message: Unexpected call to method or property access.
Line: 17
Char: 29094
Code: 0
URI: http://uat.mysite.com/Scripts/jquery-1.6.2.min.js 
```

我的点击代码（尝试了这两个）：

```
driver.findElement(By.xpath("//div/a[contains(text(), 'Download PDF')]")).click(); 
```

或者

```
driver.findElement(By.xpath("//div[@class='paginationWrap']/a[@class='redBlock']")).click(); 
```

的HTML：

```
<div class='articleFoot'>
    <div class='paginationWrap'>
        <a class='redBlock' target="_blank" href='/DownloadMedia.aspx?media={625B459D-C085-48C5-931C-71BE03786236}'>
            Download PDF
            <span class='icon pdf'></span>
        </a>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T21:21:42.577

这两个 xpath 表达式都可以。

如果异常确实*不是*来自 jquery 脚本（不是吗？），那么 Selenium 很可能无法真正下载文件。然而。

尽管如此，除了 HtmlUnitDriver （我不知道它的行为），浏览器应该为您提供一个下载对话框。尝试另一个驱动程序，然后在其他地方查找错误。

你可以做一些技巧来实现文件下载，我个人最喜欢的是[这个下载](https://github.com/Ardesco/Ebselen/blob/master/ebselen-core/src/main/java/com/lazerycode/ebselen/customhandlers/FileDownloader.java)器，但是还有更多的方法，比如在 Firefox 中获取和设置[下载状态栏](https://addons.mozilla.org/en-US/firefox/addon/download-statusbar/)，一些[机器人](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)动作等等。但是你真的需要吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-28T05:24:03.680

这可能会帮助您：

```
WebElement state = driver.findElement(By.xpath("//div/a[contains(text(), 'Download PDF')]"));
Actions builder1 = new Actions(driver);
builder1.moveToElement(state).click().perform(); 
```

# xamarin.android - monodroid 示例 GLCube 构建错误

> ID：10030073
> 
> 赞同：0
> 
> 时间：2012-04-05T14:00:44.120
> 
> 标签：xamarin.android

我已经安装了 monodroid，我正在尝试使用 VS 2010 构建 monodroid 示例 GLCube。我在源代码的 CreateFrameBuffer 函数中收到以下行的编译错误。我正在使用最新的 Android SDK 和 Mono SDK（试用版），并且正在为 Android 2.2 构建。这些示例是否仅适用于某些版本的 Android Open GL？我只是使用了示例解决方案/项目文件的默认平台。为什么示例无法编译？

行：GraphicsMode = new GraphicsMode (16, 0, 0, 0, 0, 0, false);

错误：“OpenTK.Graphics.GraphicsMode”是“类型”，但用作“变量”E:\Dev\xamarin-monodroid-samples-4d92f45\GLCube\PaintingView.cs

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:25:32.677

显然，在提交者破坏它之后，您已经从 github 上检查了示例代码。

我建议获得更早的提交，例如[this](https://github.com/xamarin/monodroid-samples/tree/monodroid-4.0.6)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:08:20.950

不确定这一点，因为我实际上并没有查看有问题的代码，但是从您发布的代码片段以及您收到的错误来看，您似乎需要声明一个变量来分配 GraphicsMode 对象。

前任：

```
GraphicsMode gmMode = new GraphicsMode(16,0,0,0,0,0,false); 
```

# sql - 我如何编写以下存储过程？

> ID：10030077
> 
> 赞同：-4
> 
> 时间：2012-04-05T14:01:05.463
> 
> 标签：sql, stored-procedures

我在数据库中有四个表。

*   人（Perid，名字，姓氏，性别）
*   研究（Resid，Resname，stareddate）
*   person_research(Resid , Perid , 其他)
*   主管（Resid，Supervisorid，其他）

我想编写返回每个研究和研究人员姓名和主管姓名的存储过程，以便将结果放在 datagridview 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:11:17.400

您没有指定 DBMS，所以我假设 PostgreSQL：

```
create or replace function get_researchers()
  returns table(research_name, researchers, supervisors)
  language sql
AS
$body$
  select r.resname as research_name,
         string_agg(p.firstname||' '||p.lastname, ',') as researchers,
         string_agg(sp.firstname||' '||sp.lastname, ',') as supervisors
  from research r
    join person_research pr on pr.resid = r.resid
    join person p on pr.perid = p.perid,
    join supervisors s on s.resid = r.resid
    join person sp on sp.perid = s.perid
  group by r.resname
  order by r.resname;  
$body$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:15:20.570

对于 SQL 服务器：

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE dbo.test 
AS
BEGIN

    SET NOCOUNT ON;

    SELECT R.resname as researchname
        , (p1.firstname + p1.lastname) as researcher
        , (p2.firstname + p2.lastname) as supervisor
    FROM Research R
    JOIN person_research PR
        ON R.Resid = PR.Resid
    JOIN person p1
        on PR.Perid = p1.Perid 
    JOIN supervisors s
        on R.Resid = s.Resid
    JOIN person p2
        on PR.Perid = p2.Perid 
END
GO 
```

# c++ - Boost::Python 前向声明 boost::python::object 抛出 python TypeError

> ID：10030080
> 
> 赞同：1
> 
> 时间：2012-04-05T14:01:21.313
> 
> 标签：c++, python, boost, boost-python

我正在尝试重构我的项目的某些部分，尤其是 Python/C++ 接口。标准的 boost::python python 初始化之前工作过：

```
boost::python::object main_module = boost::python::import("__main__");
boost::python::object globals(main_module.attr("__dict__")); 
```

//...

但是，在将其分解为自己的一类之后，我得到了

```
TypeError: No to_python (by-value) converter found for C++ type: boost::python::api::proxy<boost::python::api::attribute_policies> 
```

当实例化一个 PyInterface 对象时，如下：

```
namespace py = boost::python;
class PyInterface
{
private:
    py::object
        main_module,
        global,
        tmp;
    //...
public:
    PyInterface();
    //...
};

PyInterface::PyInterface()
{
    std::cout << "Initializing..." << std::endl;
    Py_Initialize();
    std::cout << "Accessing main module..." << std::endl;
    main_module = py::import("__main__");
    std::cout << "Retrieve global namespace..." << std::endl;
    global(main_module.attr("__dict__"));
    //...
}

//in test.cpp
int main()
{
    PyInterface python;
    //...
}

Running gives the following output:
Initializing...
Accessing main module...
Retrieving global namespace...

TypeError: No to_python (by-value) converter found for C++ type: boost::python::api::proxy<boost::python::api::attribute_policies> 
```

我唯一能想到的是，它与在使用它之前声明“全局变量”有关。在这种情况下，还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T12:56:17.597

啊! 解决它。

在构造函数中更改对全局变量的调用

```
globals(main_method.attr("__dict__")); 
```

改为使用赋值运算符：

```
globals = main_method.attr("__dict__"); 
```

回想起来，这似乎很明显，但至少我知道我不是唯一一个因为没有人贬低我而感到难过的人。

# c# - EF 4.1 / Repository / UnitOfWork / MySQL ：已经有一个打开的 DataReader 与此 Connection 关联，必须先关闭

> ID：10030083
> 
> 赞同：1
> 
> 时间：2012-04-05T14:01:31.140
> 
> 标签：c#, mysql, entity-framework-4.1, repository, unit-of-work

我阅读了所有类似标题的问题，但没有找到问题的答案，所以我打开了一个新问题：

我有两个mysql表：

*   tb1 (int_id, 代码, 描述, ..., my_id);

*   tb2 (int_id, 代码, 描述, ..., tb1_id);

我创建了一个通用存储库来管理 DbContext 和 GetAll、GetById、GetByLambda、Insert、Update 和 Delete 方法。

```
namespace Model.DataAccessLayer
{
  public class Repository<T> : IRepository<T> where T : EntityObject, IEntity
  {
    protected DbContext dbContext = null;

    public virtual DbContext DbContext
    {
      get { return dbContext; }
      set { dbContext = value; }
    }

    public ObjectContext ObjectContext
    {
      get { return ((IObjectContextAdapter)DbContext).ObjectContext; }
    }

    public void Dispose()
    {
      ObjectContext.Dispose();
      System.GC.SuppressFinalize(this);
    }

    public virtual IQueryable<T> GetAll()
    {
      return ObjectContext.CreateObjectSet<T>();
    }

    public virtual IEnumerable<T> GetByLambda(Func<T, bool> p)
    {
      return GetAll().Where(p);
    }

    public virtual void Save()
    {
      DbContext.SaveChanges();
    }

    ...

  }
} 
```

和我使用的继承类：

```
namespace Model.DataAccessLayer
{
  public class RepositoryP<T> : Repository<T> where T : EntityObject, IEntity
  {
    public myEntities MyContext
    {
      get { return (myEntities)ObjectContext; }
      //set { ObjectContext = value; }
    }

    public override DbContext DbContext
    {
      get
      {
        if (dbContext == null)
        {
          dbContext = new DbContext("myEntities");
        }
        return dbContext;
      }
      set
      {
        base.DbContext = value;
      }
    }    
  }
} 
```

仅使用一张桌子时效果很好。当我尝试使用我的两个表和它们之间的外键关系时，它不起作用。例如，我尝试使用以下连接 tb1.int_id = tb2.tb1_id 从表 tb2 中获取所有记录，其中 tb1.my_id=5。

```
List<tb2> lj = new Tb2DAO().GetByLambda(l => l.tb1.my_id == 5).ToList(); 
```

（Tb2DAO 继承自我的通用存储库类。）

我有以下 MySQL 错误：

**“MySql.Data.MySqlClient.MySqlException：已经有一个打开的 DataReader 与此连接关联，必须先关闭。”**

我认为这来自我的 DbContext，这对我的两个表实体来说并不常见。所以我尝试实现 UnitOfWork 模式来解决这个问题，如下所示：

```
namespace Model.DataAccessLayer
{
  public class UnitOfWork : IDisposable
  {
    private DbContext dbContextUnit = null; //= new DbContext();
    private Tb1DAO tb1DAO;
    private Tb2DAO tb2DAO;

    public Tb1DAO tb1
    {
      get
      {

        if (this.tb1DAO == null)
        {
          if (dbContextUnit != null)
          {
            this.tb1DAO = new Tb1DAO { DbContext = dbContextUnit };
          }
          else
          {
            this.tb1DAO = new Tb1DAO();
            dbContextUnit = this.tb1DAO.DbContext;
          }

        }
        return tb1DAO;
      }
    }

    public Tb2DAO tb2
    {
      get
      {

        if (this.tb2DAO == null)
        {
          if (dbContextUnit != null)
          {
            this.tb2DAO = new Tb2DAO { DbContext = dbContextUnit };
          }
          else
          {
            this.tb2DAO = new Tb2DAO();
            dbContextUnit = this.tb2DAO.DbContext;
          }
        }
        return tb2DAO;
      }
    }

    public void Save()
    {
      dbContextUnit.SaveChanges();
    }

    private bool disposed = false;

    protected virtual void Dispose(bool disposing)
    {
      if (!this.disposed)
      {
        if (disposing)
        {
          dbContextUnit.Dispose();
        }
      }
      this.disposed = true;
    }

    public void Dispose()
    {
      Dispose(true);
      GC.SuppressFinalize(this);
    }

  }
} 
```

现在在我的代码中，我尝试像这样使用工作单元：

```
UnitOfWork unitOfWork = new UnitOfWork();
List<tb2> tb2List = unitOfWork.tb2.GetByLambda(l => l.index_job.job_id == job_id).ToList(); 
```

但我总是有同样的错误信息：

**“MySql.Data.MySqlClient.MySqlException：已经有一个打开的 DataReader 与此连接关联，必须先关闭。”**

我做错了什么吗？请问你能帮我吗？这个存储库和工作单元的概念对我来说是新的，我很困惑，否则我读了很多认为它可能不是正确的......

我还尝试将 MultipleActiveResultSets=true 添加到我的连接中，但无法识别。

非常感谢所有和问候，wst

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:13:16.700

我不确定这种方法

```
public virtual IQueryable<T> GetAll()
{
    return ObjectContext.CreateObjectSet<T>();
} 
```

它创建了关于 EF 上下文不知道的**新对象集。**

您可以尝试`Func<ObjectContext, ObjectResult<T>>`从派生类传递到基类。（它应该返回从 EF 上下文中获取的 ObjectResult。 Fe `context => context.Entities`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T14:09:06.847

您的`GetByLambda()`方法正在调用`GetAll()`，它使用`ObjectContext.CreateObjectSet<T>()`. 因此，您现在打开了多个上下文。我建议使用标准的 EF 关联和存储库模式，这样你就可以避免这整个混乱。这是一个可以帮助您入门的链接 - [http://blogs.msdn.com/b/adonet/archive/2011/03/15/ef-4-1-code-first-walkthrough.aspx](http://blogs.msdn.com/b/adonet/archive/2011/03/15/ef-4-1-code-first-walkthrough.aspx)。

# hibernate - 如何使用休眠条件计算选择计数的行

> ID：10030086
> 
> 赞同：0
> 
> 时间：2012-04-05T14:01:43.717
> 
> 标签：hibernate

我想获得相同的总行数

select count( *) from (select count(* ) from tableA group by column1)

我在网上搜索我的问题，但没有找到解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T17:09:15.657

使用投影：

```
criteria.setProjection(Projections.rowCount()).uniqueResult(); 
```

# javascript - jQuery UI 滑块跳跃

> ID：10030091
> 
> 赞同：1
> 
> 时间：2012-04-05T14:02:02.223
> 
> 标签：javascript, jquery-ui, jquery-ui-slider

我用 jQuery UI 创建了一个简单的滑块，我一定是设置了一些错误。它可以工作，但是当您单击滑块手柄，然后稍微向下移动鼠标时，滑块会跳跃几个像素。

我在这里有一个例子：http: [//jsfiddle.net/pLJE8/3/](http://jsfiddle.net/pLJE8/3/)

有谁知道如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T15:35:24.563

我只是有同样的问题。我正在尝试[这个站点的时间范围样本](http://marcneuwirth.com/blog/2010/02/21/using-a-jquery-ui-slider-to-select-a-time-range/)

经过一些测试，我最终得到了这段代码。

```
<script type="text/javascript">
    $(document).ready(function () {
        $(".slider-timerange").slider({
            range: true,
            min: 0,
            max: 1439,
            values: [540, 1020],
            step: 5,
            slide: function (event, ui) {
                var val0 = ui.values[0];
                var val1 = ui.values[1];
                slideTime(val0, val1);
            }
        });

        var initialVal0 = $("#slider-timerange").slider("values", 0);
        var initialVal1 = $("#slider-timerange").slider("values", 1);
        slideTime(initialVal0, initialVal1);
    });

    function slideTime(val0, val1) {
        var minutes0 = parseInt(val0 % 60, 10);
        var hours0 = parseInt(val0 / 60 % 24, 10);
        var minutes1 = parseInt(val1 % 60, 10);
        var hours1 = parseInt(val1 / 60 % 24, 10);
        var startTime = getTime(hours0, minutes0);
        var endTime = getTime(hours1, minutes1);
        $("#time-range").text(startTime + ' - ' + endTime);
    }
</script> 
```

似乎执行以下调用是导致跳跃的罪人。

```
var val0 = $("#slider-timerange").slider("values", 0); 
```

PS：我不是 javascript wiz ;)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-21T09:55:31.233

您只需将边距设置为宽度的左半部分

```
.ui-slider .ui-slider-handle{ //for vertical
    height: 30px;   
    margin-bottom:-15px;
}
.ui-slider .ui-slider-handle{ //for horizontal
    width: 30px;   
    margin-left:-15px;
} 
```

并相应地设置css。

# iphone - 升级完成 IOS 4.3 iphone app for Ipad

> ID：10030094
> 
> 赞同：0
> 
> 时间：2012-04-05T14:02:21.293
> 
> 标签：iphone, xcode, ipad

我有一个针对 IOS 4.x 优化的功能齐全的 Iphone 应用程序（无情节提要）。我需要升级它才能在 iphone 和 ipad 上工作。我的主要问题是是否要将应用摘要中的设备值更改为通用。或者二，复制目标，保持 iphone 应用程序不变，并对 ipad 版本进行必要的更改。

根据我一直在阅读的内容，将应用摘要更改为通用后，将为 ipad 版本添加新文件。这没有发生。任何人都可以建议升级旧应用程序的最佳方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T13:42:02.553

原来我只需要重置我的 iOS 设备。通过打开 iOS 模拟器并转到 iOS 模拟器-> 重置内容和设置来做到这一点。

# objective-c - 一个接一个地显示 NSAlert 表单模式

> ID：10030095
> 
> 赞同：1
> 
> 时间：2012-04-05T14:02:22.377
> 
> 标签：objective-c, cocoa, modal-dialog, nsalert

我想显示一个工作表，当用户单击“确定”时，显示另一个工作表。

然而，点击“确定”的那一刻，整个设计就变得一团糟，就好像第一个警报表还没有足够的时间消失一样。

这是我用于工作表的代码：

```
#define CONFIRM_ALERT(X,Y,Z,W,V) \
NSAlert* confirmAlert = [NSAlert alertWithMessageText:X \
defaultButton:@"OK" \
alternateButton:@"Cancel" \
otherButton:nil \
informativeTextWithFormat:Y]; \
[confirmAlert beginSheetModalForWindow:Z \
modalDelegate:self \
didEndSelector:W \
contextInfo:V];

#define INFO_ALERT(X,Y,Z) \
NSAlert *infoAlert = [[NSAlert alloc] init]; \
[infoAlert addButtonWithTitle:@"OK"]; \
[infoAlert setMessageText:X]; \
[infoAlert setInformativeText:Y];\
[infoAlert setAlertStyle:NSInformationalAlertStyle]; \
[infoAlert beginSheetModalForWindow:Z modalDelegate:self didEndSelector:nil contextInfo:nil]; 
```

**以及我如何使用它：**

```
- (void)doSth
{
       CONFIRM_ALERT(@"New Action", 
               @"Are you sure you want to proceed?", 
               [self window], 
               @selector(confirm:code:context:),
               nil);
}

- (void)confirm:(NSAlert*)alert code:(int)choice context:(void *)filename
{
    if (choice == NSAlertDefaultReturn)
    {
         INFO_ALERT(@"Success :-)",
         @"The Action has been successfully completed.", 
         [self window]);
    }
} 
```

有任何想法吗？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-05T22:02:52.393

它应该可以放在`[[alert window] orderOut:nil]`第一个 alert-end 方法的顶部。这实际上记录在[`-[NSAlert beginSheetModalForWindow:modalDelegate:didEndSelector:contextInfo:\]`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSAlert_Class/Reference/Reference.html#//apple_ref/doc/uid/20002032-BCIIJCEE).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T18:43:49.727

`performSelector:withObject:afterDelay`您必须通过使用或等效方法延迟它来在下一个运行循环中显示工作表。

# c++ - C/C++ 代码 2nd = 登录操作

> ID：10030098
> 
> 赞同：0
> 
> 时间：2012-04-05T14:02:30.540
> 
> 标签：c++, c

我不确定这是 C 还是 C++ 代码，但我认为这并不重要。

在这段代码中：

```
x -= (t = u/(1.-0.5*MIN(1.,u*(a1/x - b1/(1.-x))))); 
```

t = u 是什么意思？它不是将 t 分配给你，是吗？因为它没有意义，因为它实际上被设置为上一行中的其他内容：

```
t = exp(a1*log(x)+b1*log(1.-x) + afac);
u = err/t;
x -= (t = u/(1.-0.5*MIN(1.,u*(a1/x - b1/(1.-x)))));
if (x <= 0.) x = 0.5*(x + t);
if (x >= 1.) x = 0.5*(x + t + 1.); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T14:05:12.467

> t = u 是什么意思？

它是一个更大的子表达式的一部分，

```
t = u/(1.-0.5*MIN(1.,u*(a1/x - b1/(1.-x)))) 
```

> 它不是将 t 分配给你，是吗？

不，它是将那个复杂表达式的值分配给`t`. 然后在完整的表达式中使用该赋值的结果：

```
x -= (t = <stuff> ); 
```

从概念上讲，这与以下内容相同：

```
t = <stuff>
x = x - t 
```

> 因为它没有意义，因为它实际上被设置为上一行中的其他内容

坦率地说，整套陈述对我来说没有意义。无论如何，`t`在第 1 行设置，在第 2 行使用，并在第 3 行再次设置。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-05T14:07:58.360

Quite simply:

```
x -= (t = u/(1.-0.5*MIN(1.,u*(a1/x - b1/(1.-x)))));
|     |   \_____________________________________/|
|     |        Calculate this monstrosity        |
|     \_________________________________________/|
|                   Assign it to t               |
\________________________________________________/
                  Subtract that from x 
```

In C (and C-like languages) the "result" of an assignment can be used for other things. So, for example:

```
x = (a = a - 1);   // decrements a and assigns that to x as well
x += (a = 1 - a);  // toggles a between 1 and 0 and adds to x (x increases
                   //   every second time). 
```

The relevant bit of the C standard is `C11, 6.5.16 Assignment operators, paras 2 and 3`:

> 2/ An assignment operator shall have a modifiable lvalue as its left operand.
> 
> 3/ An assignment operator stores a value in the object designated by the left operand. An assignment expression has the value of the left operand after the assignment, but is not an lvalue. The type of an assignment expression is the type of the left operand unless the left operand has qualified type, in which case it is the unqualified version of the type of the left operand. The side effect of updating the stored value of the left operand is sequenced after the value computations of the left and right operands. The evaluations of the operands are unsequenced.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T14:03:48.363

在 C 和 C++ 中，赋值返回一个值，即左侧的值。

```
a = 1 + (b = 4); 
```

相当于：

```
b = 4;
a = 1 + b; 
```

所以：

```
x -= (t = u/(1.-0.5*MIN(1.,u*(a1/x - b1/(1.-x))))); 
```

是相同的：

```
t = u/(1.-0.5*MIN(1.,u*(a1/x - b1/(1.-x))));
x -= t; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T14:09:43.350

在您的代码中：

```
 x -= (t = u/(1.-0.5*MIN(1.,u*(a1/x - b1/(1.-x))))); 
```

让我假设

```
 A=(1.-0.5*MIN(1.,u*(a1/x - b1/(1.-x)))); 
```

然后该代码将变为

```
 x -= (t = u/A); 
```

然后它可以读作：

```
 t = u/A;
  x -= t; 
```

如果您有任何问题，请随时提出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T14:07:18.393

Using `=` will indeed assign a value, and will return the value you are assigning. In your case, `t` is being assigned the result of `u/(1.-0.5*MIN(1.,u*(a1/x - b1/(1.-x)))`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-05T14:07:46.747

The overall calculation : `u/(1.-0.5*MIN(1.,u*(a1/x - b1/(1.-x))))` is assigned to `t` and what ever value of `t` is there ,this is performed.

```
x=x-t 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-05T14:09:37.557

该语句可以分为两个子语句，为了便于阅读，它可能应该。

```
t = u/(1.-0.5*MIN(1.,u*(a1/x - b1/(1.-x))));
x -= t; 
```

本质上，作者将整个公式的一个子部分分配给一个中间变量（t）以供以后使用。

# javascript - 如何使用 Google Chrome 扩展更改网页的 CSS

> ID：10030100
> 
> 赞同：1
> 
> 时间：2012-04-05T14:02:35.717
> 
> 标签：javascript, css, google-chrome-extension

> **可能重复：**
> [我的 CSS 没有通过我的内容脚本注入](https://stackoverflow.com/questions/9721344/my-css-is-not-getting-injected-through-my-content-script)

我想制作一个可以自动将另一个 css ( [http://users.atw.hu/zoleest/gportal2.css](http://users.atw.hu/zoleest/gportal2.css) ) 插入网页 ( [http://seriaya.gportal.hu/](http://seriaya.gportal.hu/) *) 的扩展程序，我阅读了关于几个小时，尝试了一切，但他们从来没有工作过。任何人都可以帮我提供它的源代码或示例扩展吗？

# javascript - 主干模型如何从 Ajax 结果中触发事件？

> ID：10030101
> 
> 赞同：3
> 
> 时间：2012-04-05T14:02:38.257
> 
> 标签：javascript, backbone.js, underscore.js

我有以下情况：

```
var Task = Backbone.Model.extend({
    initialize: function() {
    },
    save: function() {
        $.ajax({
           type    : "POST",
           url     : "/api/savetask",
           data    : this.toJSON(),
           success : function (response) {
           this.trigger("something", "payload");
           }
         });
    }
}); 
```

当我运行它时，我收到以下错误

> `this.trigger`不是函数

在外部方法上，我可以触发一些东西..比如

```
var task = new Task();
task.trigger("something","payload"); 
```

我做错了什么？或不做:)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-05T14:07:45.630

`this`在匿名函数中指的是ajax对象。这是因为 javascript 中的“this”会根据函数的范围发生变化。为了引用初始函数的“this”，请将其分配给不同的变量。以下将起作用：

```
save: function() {
    var self = this;
    $.ajax({
        type    : "POST",
        url     : "/api/savetask",
        data    : this.toJSON(),
        success : function (response) {
            self.trigger("something", "payload");
        }
    });
} 
```

*编辑*：查看如何确定“this”[的解释](https://stackoverflow.com/a/4223037/360705)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-06T21:39:36.910

我个人更喜欢在模型上有一个`saveSuccess`方法。

```
 save: function() {
        var self = this;
        $.ajax({
            type    : "POST",
            url     : "/api/savetask",
            data    : this.toJSON(),
            success : this.saveSuccess
        });
    },
    saveSuccess: function(response) {
        this.trigger("something", "payload");
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-18T20:21:10.530

This is a very late answer, but in case anyone else happens upon this page: there is a much better way. Using the self object (in my experience) is considered a bit of an anti-pattern, since we use underscore.js and have access to the `bind` function. Anyway, here's a better way:

```
var Task = Backbone.Model.extend({
    initialize: function() {
    },
    save: function() {
        $.ajax("/api/savetask", {
           type    : "POST",
           data    : this.toJSON(),
           context : this,
           success : function (response) {
               this.trigger("something", "payload");
           }
         });
    }
}); 
```

It may be the case that the `context` attribute was added in a recent version of jQuery, and it wasn't available before. But this is (in my opinion) the best way to do it.

# ruby-on-rails - 如何将 Rails 3 视图限制为特定关系类别中的项目？

> ID：10030104
> 
> 赞同：1
> 
> 时间：2012-04-05T14:02:46.990
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在开发一个分类列表风格的网站，而且我对 Rails 很陌生......因此这个问题。

我已经使用脚手架设置了列表数据，并为我的帖子、类别和子类别设置了 MVC。我有与`belongs_to`&合作的关系`has_many`......我已经能够找到一种方法来列出属于每个相应类别的子类别的代码：`<% if subcategory.category.id == category.id %>`我不确定这是否是视图的最有效方法（即具有服务器和数据库要求以及所有），但我真正的问题是如何仅列出属于某个类别和子类别的帖子。现在，主视图（让人想起 craigslist 主页）列出了每个类别和子类别以及指向子类别`index`视图的每个链接。我一直无法找到一种方法来将视图限制为某人单击以将其带到此处的类别或子类别。

我该怎么做呢？

另外，我想根据用户单击的类别/子类别（例如 domain.com/subcategory）设置自定义 URL...似乎最好提一下，因为它现在可以与如何设计当前功能一起发挥作用.

任何想法/帮助将不胜感激！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:17:15.030

Rails 模型为各种搜索提供了许多强大的方法。

例如，如果您添加了

```
has_many :subcategories 
```

对于您的`Category`模型，您应该可以通过以下方式获得某个类别的子类别列表：

```
category.subcategories 
```

你最好的办法是好好阅读一下[铁轨指南](http://guides.rubyonrails.org/)，尤其是[这个](http://guides.rubyonrails.org/association_basics.html)和[这个](http://guides.rubyonrails.org/active_record_querying.html)。

# c - 多重定义和第一次在我的 C 程序中定义

> ID：10030107
> 
> 赞同：0
> 
> 时间：2012-04-05T14:02:59.827
> 
> 标签：c, multiple-definition-error

我正在阅读 APUE（Stevens 的“ [UNIX 环境中的高级编程](http://www.apuebook.com/)”），所以有一个文件“apue.h”，其中包含一些声明的自定义函数。我编写了一个名为“wait.c”的文件，它定义了在“apue.h”中声明的函数`WAIT_CHILD`，`WAIT_PARENT`而 14.6.c 是主要函数。

```
tmp/cciYhMd7.o: In function `err_ret':
14.6.c:(.text+0x0): multiple definition of `err_ret'
/tmp/ccO4WyJS.o:wait.c:(.text+0x0): first defined here 
```

`err_ret`只是使用未定义，所以有什么问题？

### 等待.c

```
#include "apue.h"

static volatile sig_atomic_t sigflag;
static sigset_t newmask, oldmask, zeromask;

static void
sig_usr(int signo)
{
    sigflag = 1;
}

void
TELL_WAIT(void)
{
    if(signal(SIGUSR1, sig_usr) == SIG_ERR)
      err_sys("signal(SIGUSR1) error");
    if(signal(SIGUSR2, sig_usr) == SIG_ERR)
      err_sys("signal(SIGUSR2) error");

    sigemptyset(&zeromask);
    sigemptyset(&newmask);

    sigaddset(&newmask, SIGUSR1);
    sigaddset(&newmask, SIGUSR2);

    if(sigprocmask(SIG_BLOCK, &newmask, &oldmask) < 0)
      err_sys("SIG_BLOCK error");
}

void
TELL_PARENT(pid_t pid)
{
    kill(pid, SIGUSR2);
}

void
WAIT_PARENT(void)
{
    while(sigflag == 0)
      sigsuspend(&zeromask);
    sigflag = 0;

    if(sigprocmask(SIG_SETMASK, &oldmask, NULL) < 0)
      err_sys("SIG_SETMASK error");
}

void
TELL_CHILD(pid_t pid)
{
    kill(pid, SIGUSR2);
}

void
WAIT_CHILD(void)
{
    while(sigflag == 0)
      sigsuspend(&zeromask);
    sigflag = 0;

    if(sigprocmask(SIG_SETMASK, &oldmask, NULL) < 0)
      err_sys("SIG_SETMASK error");
} 
```

上面的代码是我的“wait.c”源文件。我只是用`err_sys`. 以下是我收到的链接命令行和链接器错误消息：

```
$ gcc -o a.out wait.c 14.6.c
/tmp/ccZ5F3Pn.o: In function `err_ret':
14.6.c:(.text+0x0): multiple definition of `err_ret'
/tmp/cc5EXGbf.o:wait.c:(.text+0x0): first defined here
/tmp/ccZ5F3Pn.o: In function `err_sys':
14.6.c:(.text+0x38): multiple definition of `err_sys'
/tmp/cc5EXGbf.o:wait.c:(.text+0x38): first defined here
/tmp/ccZ5F3Pn.o: In function `err_exit':
14.6.c:(.text+0x76): multiple definition of `err_exit'
/tmp/cc5EXGbf.o:wait.c:(.text+0x76): first defined here
/tmp/ccZ5F3Pn.o: In function `err_dump':
14.6.c:(.text+0xaf): multiple definition of `err_dump'
/tmp/cc5EXGbf.o:wait.c:(.text+0xaf): first defined here
/tmp/ccZ5F3Pn.o: In function `err_msg':
14.6.c:(.text+0xe6): multiple definition of `err_msg'
/tmp/cc5EXGbf.o:wait.c:(.text+0xe6): first defined here
/tmp/ccZ5F3Pn.o: In function `err_quit':
14.6.c:(.text+0x116): multiple definition of `err_quit'
/tmp/cc5EXGbf.o:wait.c:(.text+0x116): first defined here
/tmp/ccZ5F3Pn.o: In function `TELL_WAIT':
14.6.c:(.text+0x5fe): multiple definition of `TELL_WAIT'
/tmp/cc5EXGbf.o:wait.c:(.text+0x272): first defined here
/tmp/ccZ5F3Pn.o: In function `TELL_CHILD':
14.6.c:(.text+0x72e): multiple definition of `TELL_CHILD'
/tmp/cc5EXGbf.o:wait.c:(.text+0x3a2): first defined here
/tmp/ccZ5F3Pn.o: In function `WAIT_PARENT':
14.6.c:(.text+0x6d8): multiple definition of `WAIT_PARENT'
/tmp/cc5EXGbf.o:wait.c:(.text+0x34c): first defined here
/tmp/ccZ5F3Pn.o: In function `TELL_PARENT':
14.6.c:(.text+0x6bd): multiple definition of `TELL_PARENT'
/tmp/cc5EXGbf.o:wait.c:(.text+0x331): first defined here
/tmp/ccZ5F3Pn.o: In function `WAIT_CHILD':
14.6.c:(.text+0x749): multiple definition of `WAIT_CHILD'
/tmp/cc5EXGbf.o:wait.c:(.text+0x3bd): first defined here
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:12:03.750

不要在头文件中定义函数或变量。在头文件中声明它们，在 .c 源文件中定义它们。

you need to create a separate source file for the definitions and compile it separately.

also, be aware of the difference between *declaration* of global variables and *deifnition*. If you need to declare a variable that is used by multiple .c files, you must say:

```
extern int err__ret; 
```

to *declare* the variable (as an external variable) in your header file, then add:

```
int err_ret; 
```

to one .c file, to *define* it.

Note also, any .c file that defines a variable or function should also include the .h file that declares it. This will cause the compiler to produce an error if there are any discrepancies between the declaration and the definition.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T14:25:04.517

The source from the APUE book's web site has these three declarations (amongst many others) in `apue.h`:

```
void    err_ret(const char *, ...);

void    WAIT_PARENT(void);
void    WAIT_CHILD(void); 
```

Judging from the error message from your compiler, not only is `err_ret()` defined, it is in fact defined twice, once in your source file `wait.c` and once in your source file `14.6.c`. You will need to decide which (if either) of those definitions is correct, and remove the other, or decide that you can't use the code in `wait.c` with your program in `14.6.c`. It might be better still to put `err_ret()` and friends into their own source file. In the source, the `err_*()` functions are in `lib/error.c`.

* * *

> I didn't redefine the functions `err_*()`, so I think I use the `lib/error.c` source file. And in `apue.h` there's:
> 
> ```
> #ifndef _APUE_H
> #define _APUE_H 
> ```
> 
> so I think it won't defined twice.

If your TU (translation unit) does `#include "lib/error.c"`, then your TU is defining the functions. The C compiler sees the source code containing your source plus the headers you include plus (hypothetically) the code in `lib/error.c`. You simply shouldn't be including that source file; you should compile it separately and link the object file into your program. The `apue.h` header declares the `err_*()` functions so you can use them in your code. You are expected to compile `lib/error.c` separately and link it with your `wait.o` and `14.6.o` files.

It is crucial to understand the difference between defining a variable or function (actually allocating the storage for it) and declaring a variable or function (telling the compiler that the function or variable exists, but that it is not defined here — as in 'this declaration does not define it', even if the next line in the source file does define it). Headers should provide declarations and should not provide definitions (most of the time — it's a good enough rule for now, until you know enough to know when and how to break the rule).

* * *

> But what I do is just `#include "apue.h"` when I write my source file. I don't quite understand how to separately compile `lib/error.c`.

So, it sounds like you need three source files in your compile and link line:

```
gcc -o 14.6 14.6.c wait.c lib/error.c 
```

Or you might do it in separate operations:

```
gcc -c 14.6.c
gcc -c wait.c
gcc -c lib/error.c -o error.o
gcc -o 14.6 14.6.o wait.o error.o 
```

You might need extra compiler flags (`-I` or `-D` options for example), or extra libraries and linker options (`-llib` and `-L /directory/lib` options, for example).

If your source files 14.6.c and wait.c contain `#include "apue.h"` and do not include other source files (so no `#include "lib/error.c"` or anything similar — and `14.6.c` does not include your `wait.c` nor vice versa), then you should not run into problems.

However, you are running into problems, and we can't see your source or your linking command, which means we have to try and *guess* what you've done wrong. We can devise all sorts of outlandish examples of what you might be doing, but we're most likely to be wrong.

So, keeping the code to a minimum, show us which files you are compiling and how you are compiling them.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T14:29:10.910

please show wait.h's entry of err_ret(), you can obscure other lines if you want. No one is asking you to compromise your NDA :)(pun intended). also have you declared err_ret() again in wait.c? if you have then it won't compile.(i'm guessing that's where the problem lies)

do preprocessing first to find multiple definitions like below:

```
$gcc -E wait.c | grep -n 'err_ret'
$gcc -E 14.6.c | grep -n 'err_ret' 
```

look through the output and line numbers to find out where exactly the functions are declared and defined.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-01T03:15:12.573

I met the similar problem when I compiling my `sigsetjmp.c`. Finally I find the reason is that I had `#include "error.c"` in my `apue.h`, which result in when compiling multiple c files, each file include `apue.h`, and then include `error.c`, lead to the multiple definition of the err_ret error.

Here's my suggestion:

1.  Don't include any function definition c file in head file (the `apue.h`).
2.  Required other c file in gcc command line or Makefile is OK.

    eg: `gcc sigsetjmp.c pr_mask.c error.c`

Hope this help.

# objective-c - NSArray。如何实现地图功能？

> ID：10030109
> 
> 赞同：10
> 
> 时间：2012-04-05T14:03:08.507
> 
> 标签：objective-c, ios, nsarray, mapreduce

在 iOS 中，我想为 NSArray 实现地图功能。这是一个应用于数组的每个元素的函数。实现这一点的最佳方法是什么？

谢谢，
道格

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-30T09:57:13.877

您正在寻找 apply ，因为 map 应该返回一个包含转换后值的新数组。

但是，您可以通过创建自定义类别来使用您寻找的方法来扩充 NSArray。这里有两个例子——应用和映射：

```
@implementation NSArray (CMMap)
- (NSArray *) map:(id(^)(id obj))block {
    NSMutableArray *a = @[].mutableCopy;
    for (id o in self) {
        id on = block(o);
        if (!on) {
            NSLog(@"NSArray::map() - object returned by block is nil!");
            abort();
        }
        [a addObject: on];
    }
    return [NSArray arrayWithArray: a];
}

- (void) apply:(void(^)(id obj))block {
    for (id o in self) {
        block(o);
    }
}
@end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-05T14:06:32.840

您可以使用[`enumerateObjectsUsingBlock:`](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)的功能`NSArray`。

```
[myArray enumerateObjectsUsingBlock:^(id x, NSUInteger index, BOOL *stop) {
    // Body of the function
}]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-30T19:36:09.697

如果你使用的是 Objective-C，你可以简单地使用这些方法：

```
- (void)makeObjectsPerformSelector:(SEL)aSelector;
- (void)makeObjectsPerformSelector:(SEL)aSelector withObject:(nullable id)argument; 
```

例如：

```
[array makeObjectsPerformSelector:@selector(doSomething)]; 
```

# ember.js - Emberjs - 单击一次即可触发 3 次操作

> ID：10030110
> 
> 赞同：0
> 
> 时间：2012-04-05T14:03:18.177
> 
> 标签：ember.js

在我使用 Emberjs 的应用程序中，单击一次即可触发每个操作 3 次。

例如，使用以下模板和视图：

模板：

```
<button {{action "removeFoo"}}>remove</button> 
```

使用点击处理程序查看：

```
listsView = Ember.View.create({
  templateName: 'lists',

  removeFoo: function(event) {
    event.preventDefault();
    console.log(new Date().valueOf());
  }
}) 
```

我在控制台中得到以下 3 个输出：

```
1333634360209
1333634360215
1333634360217 
```

有谁知道是什么原因造成的，或者调试问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:20:33.963

实际的问题是，Ember 应用程序是 Rails 应用程序的一部分，该应用程序已经有另外两个 Ember 应用程序。那些 Ember 应用程序没有`rootElement`指定。`rootElement`为每个 Ember 应用添加一个解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T14:15:57.203

我不知道为什么它被多次调用，但你是故意覆盖的`Ember.View#remove`吗？如果是这样，您可能需要调用`this._super()`以破坏元素等...

这是源代码中的定义： [https ://github.com/emberjs/ember.js/blob/master/packages/ember-views/lib/views/view.js#L770](https://github.com/emberjs/ember.js/blob/master/packages/ember-views/lib/views/view.js#L770)

如果这不是您的意图，您可能希望将您的操作称为其他内容，看看是否能解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T14:41:57.113

使用最新的 Ember.js 版本**0.9.6**可以正常工作，请参阅[http://jsfiddle.net/pangratz666/BxccU/](http://jsfiddle.net/pangratz666/BxccU/)

# mysql - MySQL 查找速度比任何电脑都慢的笔记本电脑

> ID：10030117
> 
> 赞同：2
> 
> 时间：2012-04-05T14:03:45.027
> 
> 标签：mysql

关系：

```
Product(maker, model, type) 

Laptop(Model, price, speed, ram, hd, screen) 

PC(model, price, speed, ram, hd) 

Printer(model,price, color, price) 
```

我试图找到速度比任何电脑都慢的笔记本电脑。

我试过的：

```
SELECT model FROM laptop WHERE laptop.speed < 
(SELECT speed FROM pc WHERE pc.speed < all); 
```

我试图在 pc 关系中获得最慢的速度，并将该速度与笔记本电脑的速度进行比较。我认为这会给我我正在寻找的关系。我只是不断收到语法错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T14:05:46.420

```
SELECT model FROM laptop WHERE laptop.speed < (SELECT MIN(speed) FROM pc) 
```

在此处了解有关 MIN() 函数的更多信息[。](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T14:06:03.603

`MIN`是你想要的：

```
SELECT model FROM laptop WHERE laptop.speed < 
(SELECT MIN(speed) FROM pc); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-13T14:33:40.347

如果您还没有学习 MAX、MIN 等，那么您可能想要这个

```
SELECT model
FROM Laptop
WHERE speed < ALL 
  (SELECT speed FROM PC); 
```

# android - Linked-in Once Authenticated ：在再次调用用户配置文件的 Url 时要求进行身份验证

> ID：10030122
> 
> 赞同：7
> 
> 时间：2012-04-05T14:04:12.677
> 
> 标签：android, linkedin

我正在使用`LinkedIn-j`API 进行 LinkedIn 集成。 *我可以发布状态更新。* 我想在 Android 的*WebView 中显示用户配置文件，*因为我正在使用以下代码获取用户公共 URL。

```
person.getSiteStandardProfileRequest().getUrl(); 
```

返回这样的东西`http://www.linkedin.com/profileviewProfile=&key=100652876&authToken=AWW7&authType=name&trk=api*a169149*s177398*`

如果**我要在 WebView 中打开这个 url，那么它的 Redirecting to LinkedIn Login 页面和填写 Credential 后我可以看到 user Profile**。

我想再次打开用户配置文件而不输入**凭据**

我也尝试通过附加

```
URL&accesstoken="tokenIdReturned by Application"; 
```

但我仍然无法直接打开用户配置文件。我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T12:25:42.933

我有同样的要求，我做了两件事。

**首先** ，我使用我自己的 WebView 加载不同的 URL 以进行身份​​验证和显示配置文件。我`WebView`使用`public static` *默认浏览器将调用重定向到我自己的 Activity 中的 WebView*。

**其次**，我已经设置`webview.getSettings().setAppCacheEnabled(true);`好了，现在它在查看个人资料时不再要求登录。

`singleInstace`我已经在 Manifest.xml 文件中声明了我的活动。

更新：

我在我的活动中使用 WebView 的方式。

```
public static WebView WV = null;
String uri;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    tv = (TextView) findViewById(R.id.tv);
    if (WV == null) {
        WV = (WebView) findViewById(R.id.webView1);
        WV.getSettings().setJavaScriptEnabled(true);
        WV.getSettings().setAppCacheEnabled(true); // the important change
        WV.getSettings().setSupportZoom(true);
        WV.getSettings().setBuiltInZoomControls(true);
    }

    final SharedPreferences pref = getSharedPreferences(OAUTH_PREF,
            MODE_PRIVATE);
    final String token = pref.getString(PREF_TOKEN, null);
    final String tokenSecret = pref.getString(PREF_TOKENSECRET, null);
    if (token == null || tokenSecret == null) {
        startAutheniticate();
    } else {
        showCurrentUser(new LinkedInAccessToken(token, tokenSecret));
    }

}

void startAutheniticate() {
    final LinkedInRequestToken liToken = oAuthService
            .getOAuthRequestToken(OAUTH_CALLBACK_URL);
    uri = liToken.getAuthorizationUrl();
    getSharedPreferences(OAUTH_PREF, MODE_PRIVATE).edit()
            .putString(PREF_REQTOKENSECRET, liToken.getTokenSecret())
            .commit();
    WV.loadUrl(uri);
}

void showCurrentUser(final LinkedInAccessToken accessToken) {
    // code to get Profile object using Linkedin-J API 
    //which is already available on the API site as Example

    WV.loadUrl(profile.getSiteStandardProfileRequest().getUrl());
} 
```

# wordpress - 除了管理员之外，Wordpress 自定义插件未在角色中显示

> ID：10030123
> 
> 赞同：0
> 
> 时间：2012-04-05T14:04:18.223
> 
> 标签：wordpress, user-roles

我编写了一个自定义 wordpress 插件，显示在 WP 后端的左侧菜单栏中。

我的问题是，如果我以管理员身份登录，它就会显示出来。如果编辑器登录，他就看不到它。有什么方法可以启用它，以便每个角色都可以看到它？

我试图用谷歌搜索这个问题，但没有得到任何令人满意的结果，这就是我在这里问它的原因。

感谢您的回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T05:53:33.857

您需要设置适当的功能，add_option_page() 函数中的第三个参数，您将使用它来创建菜单。

[http://codex.wordpress.org/Function_Reference/add_options_page](http://codex.wordpress.org/Function_Reference/add_options_page)

# clojure - 每次从一个序列中获取两个元素

> ID：10030133
> 
> 赞同：12
> 
> 时间：2012-04-05T14:04:43.183
> 
> 标签：clojure

clojure 是否像普通的 lisp 一样具有强大的“循环”。

例如：

每次从一个序列中获取两个元素

普通 Lisp：

```
(loop for (a b) on '(1 2 3 4) by #'cddr collect (cons a b)) 
```

如何在 Clojure 中做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-05T15:25:50.113

通过利用`for`和一些解构，您可以实现您的具体示例：

```
(for [[a b] (partition 2 [1 2 3 4])](use-a-and-b a b)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T14:31:58.427

有[cl-loop](https://github.com/tayssir/cl-loop)，它是一个类似于 LOOP 的工作，还有[clj-iter](https://github.com/nathell/clj-iter)和[clj-iterate](https://github.com/jpalmucci/clj-iterate)，它们都基于 Common Lisp 的[*迭代*循环结构](http://common-lisp.net/project/iterate/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T18:43:16.293

Clojure 的多用途循环结构是`for`. 它没有 CL`loop`内置的那么多特性（尤其是没有副作用的特性，因为 Clojure 鼓励功能纯洁性），所以你可能简单地用`loop`它自己做的许多操作都是“围绕”完成的`for`。例如，要对 生成的元素求和，您可以在它前面`for`放一个；`apply +`要成对遍历元素，您将（如 sw1nn 所示）`partition 2`在输入的输入序列上使用`for`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-06T00:53:43.403

我会用`loop`,`recur`和解构来做到这一点。

例如，如果我想将每两个值组合在一起：

```
(loop [[a b & rest] [1 2 3 4 5 6]
       result []]
  (if (empty? rest)
    (conj result [a b])
    (recur rest (conj result [a b])))) 
```

以以下结果结束：

`=> [[1 2] [3 4] [5 6]]`

`a`和`b`分别是序列的第一个和第二个元素，然后`rest`是剩下的。然后我们可以递归地四处走动，直到没有任何东西剩下`rest`，我们就完成了。

# backbone.js - In Backbone.js, why do silent changes trigger change events eventually?

> ID：10030139
> 
> 赞同：26
> 
> 时间：2012-04-05T14:05:10.080
> 
> 标签：backbone.js, backbone-events, backbone-model

When I pass `{"silent":true}` while setting an attribute in a Backbone model, why doesn't that just suppress the `change:attribute` event? What is the advantage of firing that event the next time an attribute is changed?

**Update**

Backbone 0.9.10 changed the behavior of passing `{ "silent": true }`. From the changelog:

> Passing `{silent:true}` on change will no longer delay individual "change:attr" events, instead they are silenced entirely.

Browse the changelog [here](http://backbonejs.org/#changelog)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-05T14:36:54.450

This has confused me for some time as well.

The reason is that {silent:true} does **not** mean "Do everything as normal, but just don't trigger the event".

From various comments and answers by @jashkenas, what it seems to mean is "simply change the attribute value (and add it to the 'changedAttributes' hash), but defer all other "change-related" activities until later".

'silent' doesn't *prevent* the `change` event for that/those properties, it simply queues up the 'announcement' until the next `change` event is triggered.

So, its probably better named something like `defer`.

**Relevant information:**

[https://github.com/documentcloud/backbone/pull/850](https://github.com/documentcloud/backbone/pull/850)

> the point of a "silent" change is that it isn't considered a change from the models point of view. Later, when the change actually occurs, you get the full difference all at once.

[https://github.com/documentcloud/backbone/issues/870](https://github.com/documentcloud/backbone/issues/870)

> Because the point of silent changes is that you're allowed to twiddle with the internal state of your model, temporarily, without actually making a change. Later, when the attribute actually changes, the validation runs and events are emitted. It wouldn't make sense to emit an error event when making a silent change.

## Update 4/7/2013

*Note: I have not tested this to confirm behavior, this is just based on my reading of the release notes...*

As of Backbone 0.9.10, the behavior described above has changed. In that version (and newer), `silent:true` suppresses the `change:attr` events entirely - not just delays them.

[http://backbonejs.org/#changelog](http://backbonejs.org/#changelog)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T13:51:57.083

In backbone 0.9.2 the `set` function runs validation before any changes are updated.

```
 // Run validation.
  if (!this._validate(attrs, options)) return false; 
```

In case of `{silent: true}` option is passed, the validation code will not be executed.

```
 if (options.silent || !this.validate) return true; 
```

That means, `model.set({value: 100}, {silent: true});` is able to set "invalid" value into model, so attributes are updated, but change event's are not firing.

It is useful, then you want to update some field and prevent whole mode validation, so if model is not yet completed, the change still propagated to attributes. But you usually you also want the view to show the change, so you have to manually call `model.change()` or `model.trigger('change:value', model, value)`.

# vb.net - 在 HTTP POST 标头中将绝对 URI 更改为相对

> ID：10030141
> 
> 赞同：0
> 
> 时间：2012-04-05T14:05:18.360
> 
> 标签：vb.net, post, httpwebrequest, http-headers

我有以下`POST`要求：

```
POST http://blah/Request HTTP/1.1
Host: blah
Content-Length: 322
Proxy-Connection: Keep-Alive

<?xml version="1.0"?>
<Envelope>
<Header>
<UserID>uid</UserID>
<Password>pass</Password>
<SessionID />
<RequestType>GetDetails</RequestType>
<POSCompany>01</POSCompany>
<PackageType>DATA</PackageType>
<ActionType>READ</ActionType>
<SnoopUserID />
</Header>
<Body>
<MagicNumber>124</MagicNumber>
</Body>
</Envelope> 
```

这失败并出现错误 - (405) Method not supported

显然在服务器上工作的示例 XML 是相同的，但标题有行`POST /Request HTTP/1.1`而不是`POST http://blah/Request HTTP/1.1`.

我不知道这是否是问题，但我正在努力消除所有可能性。但是，我无法让`POST`请求 URI 是相对的而不是绝对的。有没有办法做到这一点？

以下是用于发送 XML 的代码。

```
Public Sub SendXML(ByVal file As String)
    Dim reader As New StreamReader(file)
    Dim data As String = reader.ReadToEnd()
    reader.Close()
    Dim request As HttpWebRequest = WebRequest.Create("http://blah/Request")
    request.Method = "POST"

    System.Net.ServicePointManager.Expect100Continue = False

    Dim bytes As Byte() = System.Text.Encoding.ASCII.GetBytes(data)
    request.ContentLength = bytes.Length

    Dim oStreamOut As Stream = request.GetRequestStream()
    oStreamOut.Write(bytes, 0, bytes.Length)
    oStreamOut.Close()

    Dim response As HttpWebResponse = request.GetResponse()

End Sub 
```

[在此处询问405](https://stackoverflow.com/questions/9977894/405-method-not-allowed-httpwebrequest)的请求- Method Not Allowed HttpWebRequest

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:29:13.087

以下[HTTP 错误 405 方法不允许](http://www.checkupdown.com/status/E405.html)

> POST 方法经常会出现 405 错误。您可能试图在网站上引入某种输入表单，但并非所有 ISP 都允许处理表单所需的 POST 方法。
> 
> 所有 405 错误都可以追溯到 Web 服务器的配置和管理对网站内容的访问的安全性，因此您的 ISP 应该很容易解释。

# javascript - 如何从多边形返回数组点？

> ID：10030142
> 
> 赞同：0
> 
> 时间：2012-04-05T14:05:19.363
> 
> 标签：javascript, arrays, google-maps-api-3, latitude-longitude

所以这是我的问题，我相信很多人都遇到过。我有一个 JSON 文件，其中包含一个状态数组以及一个对应于该状态的 lat 和 lng 值的子数组。

我遍历状态，然后遍历点，然后构建 50 个多边形。

我现在需要在单击状态时居中并缩放状态。我意识到我可以再次循环这些点，并添加界限。但是，当我在控制台中显示多边形时，我可以向下单击值并查看点。

我假设有一种方法可以简单地访问这些点而无需重新循环它们......这些点已经与一个多边形相关联，该多边形与一个状态相关联。

当我尝试时`console.log(newpoly.latLngs);` ，我回来了：

```
Kf

->b: Array[1]

->0: Kf

->b: Array[5]

->0: Q
     Xa: 41.0037
     Ya: -104.05560000000003
     __proto__: Q
  1: Q
     Xa: 44.9949
     Ya: -104.0584
     __proto__: Q
  2: Q
     Xa: 44.9998
     Ya: -111.0539
     __proto__: Q
  3: Q
     Xa: 40.9986
     Ya: -111.04570000000001
     __proto__: Q
  4: Q
     Xa: 41.0006
     Ya: -104.05560000000003 
```

抱歉，我不知道如何使它看起来更干净。

无论如何，我想访问 latLng 点的最后一个数组。还是我应该为边界添加另一个循环？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:09:15.247

我认为没有办法在图像映射中获取多边形的边界框（我想这就是你正在使用的）。

无需编写另一个循环；使用您已经编写的循环来计算边界并同时构建多边形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T00:19:27.980

让它以这种方式工作：

```
jQuery.getJSON("http://www.betafoot.com/wp-content/themes/twentyeleven/states.json", function(json) 
{
var j = [];
var i = [];
var $length = Object.keys(json).length;
for (var j=1; j<$length+1; j++)
{
var latlngbounds = new google.maps.LatLngBounds( );
var pts = [];
for (var i=0; i<json[j].points.length; i++) 
{
var id = json[j].stateid;
pts[i] = new google.maps.LatLng(json[j].points[i][1], json[j].points[i][2]);
latlngbounds.extend(pts[i]);
};
var newpoly = new google.maps.Polygon({
paths: pts,
strokeColor: "#FFFFFF",
strokeOpacity: 0.8,
strokeWeight: 2,
fillColor: "#FF0000",
fillOpacity: 0
});
newpoly.setMap(map);
newpoly.latlngbounds = latlngbounds;
newpoly.objInfo = id;
listenMarker(newpoly);
};
});
function listenMarker(newpoly)
{
google.maps.event.addListener(newpoly, 'click', function(event)
{
map.fitBounds(newpoly.latlngbounds);
});
}; 
```

如您所见，我将 latlngbounds 附加到“newpoly”，然后从处理单击操作的单独函数访问它们。如果有人认为这是一个坏主意，请告诉我。

# python - 如何在 Sphinx .rst 文件中输出配置值？

> ID：10030149
> 
> 赞同：19
> 
> 时间：2012-04-05T14:05:49.953
> 
> 标签：python, python-sphinx

我有以下内容`conf.py`：

```
def setup(app):
    app.add_config_value('base_url','http://localhost:2000', True) 
```

如何将它放入我的 .rst 文件中？我写了这个：

```
:base_url:/my_app/api/application/ 
```

但它只打印`:base_url:`而不是实际的 URL。

如何获得要发出的实际配置值？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-06T10:11:20.193

对于链接的替换，**extlinks**很好，对于包含您的问题中询问的任意配置值，您可以使用[rst_epilog](http://www.sphinx-doc.org/en/master/usage/configuration.html#confval-rst_epilog)进行替换（或[rst_prolog](http://www.sphinx-doc.org/en/master/usage/configuration.html#confval-rst_prolog)用于文本，应该添加到您的 .rst 文件之上）：

在你的 conf.py 中：

```
my_config_value = 42
rst_epilog = '.. |my_conf_val| replace:: %d' % my_config_value 
```

在您的 .rst 来源中：

> 我的配置值为|my_conf_val|！

在您的输出中：

> 我的配置值为 42！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T02:13:09.740

啊哈哈！

看看[**sphinx.ext.extlinks**](https://www.sphinx-doc.org/en/master/usage/extensions/extlinks.html)模块。

所以我的 conf.py 中有这样的代码：

```
extlinks = {'api_url' : (settings.BASE_URL + '%s', settings.BASE_URL)} 
```

在我的 .rst 文件中，我有这个：

```
:api_url:`/myapp/api/application/` 
```

这会产生格式良好的链接，如下所示：

```
http://localhost:8000/myapp/api/application/ 
```

# php - 将 curl 退出代码翻译为 php 或 Unix 中的详细错误

> ID：10030150
> 
> 赞同：0
> 
> 时间：2012-04-05T14:05:51.277
> 
> 标签：php, unix, curl

我最近才被介绍给 curl 并且正在编写 Unix 中的某个 php 脚本，该脚本运行 curl 来检查我们的一个监控系统的状态。对不起，如果我问的是愚蠢的。

基本上，我想知道退出代码是否可以快速翻译成它们的意思，如[本页](http://curl.haxx.se/docs/manpage.html)所述（向下滚动到退出代码）。是否有我可以向其发送 curl 退出代码的 unix 或 php 命令？基本上，如果我的脚本的输出可以即时翻译 curl 退出代码，这样用户就可以确切地知道出了什么问题，而无需在 Internet 上查找退出代码。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T14:08:17.067

Sure, it's called [`curl_error()`](http://php.net/manual/en/function.curl-error.php) - although the wording of your question almost suggests that you are `exec()`ing the command line cURL binary - is that the case? Because you really should be using the [PHP extension](http://php.net/manual/en/book.curl.php), it is available as standard on most installation these days...

# perl - 在 Windows 7（64 位）上使用 CPAN BerkeleyDB 模块

> ID：10030151
> 
> 赞同：1
> 
> 时间：2012-04-05T14:05:56.637
> 
> 标签：perl, windows-7, x86-64, berkeley-db

我一直在尝试在我的 Windows 7 (x86_64) PC 上安装 BerkeleyDB CPAN 模块，但没有任何运气（BerkeleyDB::Hash 是我需要的）。我安装了 64 位 ActivePerl 和 Oracle Berkeley DB 11gR2 5.3.15。首先我尝试使用命令安装：

```
*cpan install BerkeleyDB* 
```

这又出现了错误：

```
*It looks like the installation of dmake and MinGW has failed.  You will not be
able to run Makefile commands or compile C extension code.  Please check your
internet connection and your proxy settings!* 
```

所以我为 Windows 7 和 .NET Framework 4 安装了 Microsoft Windows SDK。

然后我安装了cpanm

```
*cpan App::cpanminus* 
```

当我尝试运行时：

```
*cpanm BerkeleyDB* 
```

我得到了错误：

```
*Note (probably harmless): No library found for -llibdb
Note (probably harmless): No library found for bufferoverflowU.lib* 
```

所以我编辑了 config.in 文件并将 lib 和包含路径更改为：

```
*INCLUDE    =  C:\PROGRA~2\Oracle\BERKEL~1.15\include
LIB =  C:\PROGRA~2\Oracle\BERKEL~1.15\lib* 
```

现在，当我运行 perl makefile.pl 时，关于 -llibdb 的警告消失了。

当我尝试运行时：

```
 *nmake* 
```

我收到错误：

```
 *Creating library blib\arch\auto\BerkeleyDB\BerkeleyDB.lib and object blib\arc
h\auto\BerkeleyDB\BerkeleyDB.exp
BerkeleyDB.obj : error LNK2001: unresolved external symbol __heap_exist
BerkeleyDB.obj : error LNK2001: unresolved external symbol db_version
BerkeleyDB.obj : error LNK2001: unresolved external symbol db_strerror
BerkeleyDB.obj : error LNK2001: unresolved external symbol db_env_create
BerkeleyDB.obj : error LNK2001: unresolved external symbol db_create
BerkeleyDB.obj : error LNK2001: unresolved external symbol db_sequence_create
blib\arch\auto\BerkeleyDB\BerkeleyDB.dll : fatal error LNK1120: 6 unresolved ext
ernals
NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio 10.0
\VC\Bin\amd64\link.EXE"' : return code '0x460'
Stop.* 
```

我几乎失去了在我的 PC 上成功构建这个模块的所有希望。有没有人对此感到幸运？

非常感谢，

序列号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T00:19:42.263

以下所有声明未经测试/未经验证。可以从 MagNET < `irc://irc.perl.org/win32`>（[网络聊天](http://mibbit.com/?channel=%23win32&server=irc.perl.org)）上的 #win32 获得有效的建议。

libdb 需要[修补 64 位](http://win32.perl.org/wiki/index.php?title=Install_DB_File_on_Strawberry_Perl). 在安装依赖库及其头文件之前安装一个全新的编译器工具链会使问题变得更糟。如果您在应用补丁后仍然存在链接问题，请卸载 MS 工具并使用 MinGW 重试。

# silverlight - WP7/XNA/Silverlight: How can I draw a spriteBatch after I draw a TriangleStrip?

> ID：10030163
> 
> 赞同：0
> 
> 时间：2012-04-05T14:06:34.553
> 
> 标签：silverlight, windows-phone-7, xna

I want to draw the Silverlight-PhoneApplicationPage and its controls on top of some squares which I draw as TriangleStrips.

The other way around is works perfectly fine, but the squares are drawn on top of my controls - I do something like this in my Draw-function:

```
private void OnDraw(object sender, GameTimerEventArgs e)
{
    // Clean up device
    graphicsDevice.Clear(Microsoft.Xna.Framework.Color.Black);
    graphicsDevice.BlendState = BlendState.AlphaBlend;
    RasterizerState stat = new RasterizerState();
    stat.CullMode = CullMode.None;
    graphicsDevice.RasterizerState = stat;

    // Draw Silverlight UI element to Texture
    elementRenderer.Render();

    // Draw Silverlight UI element
    spriteBatch.Begin();
    spriteBatch.Draw(elementRenderer.Texture, Vector2.Zero, Microsoft.Xna.Framework.Color.White);
    spriteBatch.End();

    effect.Texture = tex;
    effect.TextureEnabled = true;
    effect.World = BillboardMatrix;
    effect.View = view;
    effect.Projection = projection;

    foreach (EffectPass pass in effect.CurrentTechnique.Passes)
    {
        pass.Apply();
        graphicsDevice.DrawUserPrimitives<VertexPositionTexture>(PrimitiveType.TriangleStrip, vertices, 0, 2);
    }
} 
```

If I try to draw the spriteBatch after the Triangles I get this error: "NotSupportedException - XNA Framework Reach profile requires TextureAddressMode to be Clamp when using texture sizes that are not powers of two."

```
private void OnDraw(object sender, GameTimerEventArgs e)
{
    // Clean up device
    graphicsDevice.Clear(Microsoft.Xna.Framework.Color.Black);
    graphicsDevice.BlendState = BlendState.AlphaBlend;
    RasterizerState stat = new RasterizerState();
    stat.CullMode = CullMode.None;
    graphicsDevice.RasterizerState = stat;

    // Draw Silverlight UI element to Texture
    elementRenderer.Render();

    effect.Texture = tex;
    effect.TextureEnabled = true;
    effect.World = BillboardMatrix;
    effect.View = view;
    effect.Projection = projection;

    foreach (EffectPass pass in effect.CurrentTechnique.Passes)
    {
        pass.Apply();
        graphicsDevice.DrawUserPrimitives<VertexPositionTexture>(PrimitiveType.TriangleStrip, vertices, 0, 2);
    }

    // Draw Silverlight UI element
    spriteBatch.Begin();
    spriteBatch.Draw(elementRenderer.Texture, Vector2.Zero, Microsoft.Xna.Framework.Color.White);
    spriteBatch.End();
} 
```

I also tried to set `graphicsDevice.SamplerStates[i] = SamplerState.LinearClamp;` but it didn't work. What am I doing wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:57:23.447

It works now - I changed the CullMode:

```
stat.CullMode = CullMode.None; 
```

to

```
stat.CullMode = CullMode.CullCounterClockwiseFace; 
```

# android - 如何通过单击常用按钮来调用搜索对话框

> ID：10030165
> 
> 赞同：0
> 
> 时间：2012-04-05T14:06:42.637
> 
> 标签：android

我在 Android 中创建了一个搜索界面。当我们点击硬件搜索按钮时，我们自己的搜索对话框会弹出。喜欢这个教程：[http ://www.edumobile.org/android/android-programming-tutorials/search-interface/](http://www.edumobile.org/android/android-programming-tutorials/search-interface/)

然后我制作了一个操作栏（[http://developer.android.com/resources/samples/ActionBarCompat/index.html](http://developer.android.com/resources/samples/ActionBarCompat/index.html)），并在上面放了一个搜索按钮。当我点击按钮时，我想加载我的搜索对话框。（当我点击手机上的硬件搜索按钮时也是如此）

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:16:11.020

答案在你给出的第二个里面：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.menu_search:
        Toast.makeText(this, "Tapped search", Toast.LENGTH_SHORT).show();
        break;
    }
} 
```

只需使用 ActionBarActivity 扩展带有操作栏的活动并覆盖此方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:57:42.750

我之前成功地调用了方法 onSearchRequested() 。Ion 建议的方法也可能有效。

请参阅文档：http: [//developer.android.com/reference/android/app/Activity.html#onSearchRequested%28%29](http://developer.android.com/reference/android/app/Activity.html#onSearchRequested%28%29)

# java - Java Custom tag containing generated JSTL : not interpreted

> ID：10030169
> 
> 赞同：2
> 
> 时间：2012-04-05T14:06:46.680
> 
> 标签：java, jsp, tags

I have a custom tag that has no body at all. I'm trying to programmatically replace the empty body with, for simplicity's sake,

```
[<c:out value="SUCCESS!"/>] 
```

The goal is to see "[SUCCESS!]" displayed by the JSP which uses the tag, but all I see is "[]" and if I look at the generated source code, I can see that the c:out statement is written on the page between the brackets, but not interpreted.

Is there a common way to achieve this ? The final goal will be to use other custom tags instead of the "c:out" tag. The tags/content will come from a database. I tried different techniques with SimpleTagSupport and BodyTagSupport but none of those were successfull. In fact I'm not sure if it is technically possible to do it, since, the tag has already been interpreted at that time.. But then how should this be done ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:51:08.677

[当JSP 转换为 servlet](http://www.jsptutorial.net/understanding-jsp-life-cycle.aspx)时，服务器标签（如您的自定义标签或 JSTL 标签）会转换为 Java 代码。例如，下面的 JSP 代码：

```
<c:out value="FooBar" /> 
```

在 servlet 中被翻译成这样的东西：

```
....
OutTag outTag = (OutTag) tagHandlerPool.get(OutTag.class);
outTag.setPageContext(pageContext);
outTag.setParent(null);
outTag.setValue(new String("FooBar"));
int evalOut = outTag.doStartTag();
.... 
```

在您的自定义标记中，您可以调用其他 Java 类/方法，并且可以将 HTML 代码（不是 JSP 代码）写入响应。

没有解释，因为在这个`[<c:out value="SUCCESS!"/>]`级别它只是一个直接写入响应的字符串。

# nhibernate - 使用自然键的 nHibernate 代理加载

> ID：10030174
> 
> 赞同：0
> 
> 时间：2012-04-05T14:07:09.657
> 
> 标签：nhibernate, fluent-nhibernate

*如果有任何区别，我将如何使用由 fluent nhibernate 配置的 nHibernate在某些情况下*使用自然/备用键加载实体，而不是在`Load`ISession 上使用该方法时使用主键。

我仍然需要允许我同时执行这两种操作的功能，并且在大多数情况下，实体将通过 PKey 加载，但在某些情况下（涉及外部系统），我需要使用自然选择记录钥匙。

我想保持性能优势`Load`，而不是进行查询等。

```
 // Current
 int countryID = 1; // from normal input source

 Address a = new Address();
 a.Country = session.Load<Country>(countryID);

 session.SaveOrUpdate(a);

 // Required
 string countryCode = "usa"; // from external input source

 Address a2 = new Address();
 a2.Country = session.LoadViaNatualKeySomehow<Country>(c=> c.Code, countryCode); // :)

 session.SaveOrUpdate(a2); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T14:40:26.043

AFAIK，这是不可能的。正如您在[Ayendes post](http://ayende.com/blog/4061/nhibernate-natural-id)中看到的那样，有一个条件查询语法，据我所知，这是整个 NHibernate API 中唯一的自然 ID。此查询转换为“正常”查询，除了本文中描述的二级缓存处理。

如果它至少不会刷新会话，那就太好了。

您可以做的一项简单的性能增强是在通过（不可变的！）自然 ID 查询之前关闭自动刷新：

```
session.FlushMode = FlushMode.Never;
session.CreateQuery(...by natural id ...);
session.FlushMode = FlushMode.Auto; 
```

这可以产生很大的不同，但当然不会与 Load 竞争。

它不存在的原因很可能是会话中的实体都由 id 标识。

如果你有它：

```
var entity1 = session.Load<Entit>(id);
// does not exist
var entity2 = session.LoadByNaturalKey(natural id); 
```

NH 如何确定 id 和自然 id 标识的是同一个对象，而不从数据库中加载它们？整个会话缓存陷入困境。

# java - Hibernate second level cache and RR transaction isolation

> ID：10030175
> 
> 赞同：2
> 
> 时间：2012-04-05T14:07:10.453
> 
> 标签：java, hibernate, second-level-cache, transaction-isolation

If two transactions (both at RR isolation level) ask for the same item which is 2nd-level cached, and then they modify and store this item. Now, for reading that item, they did not run any SQL because it's cached; so in this case, will they actually start a data base transaction? And when they commit their changes, will they run into lost update problem?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:25:47.187

从悲观的角度来看：

如果二级缓存被配置为参与事务，那么只有第一个获得写锁的缓存才能修改缓存对象，然后将更改写入数据库。当第二个事务想要获取写锁时，它必须等到第一个事务结束并释放它。

使用乐观锁定，我猜应该会发生并发修改异常（或类似名称），并且第二个事务将重试操作。

# java - 如何将图像添加为另一个图像的特征？

> ID：10030186
> 
> 赞同：0
> 
> 时间：2012-04-05T14:07:36.957
> 
> 标签：java, android, image, graphics

在Java中，我创建了以下类，它扩展了ImageView以创建一个角色......我想知道是否可以添加我的角色所持有的项目的另一个图像（参见方法“addWeapon（）”），当它移动时我的角色移动（参见方法“warriorMover(..)”）。基本上，我想知道是否有可能使“武器形象”成为主角的“特征/部分”？

```
public class WarriorEntity extends ImageView
{
private kingsColor kingColor;
private weapons weaponId;

private int kingSide;
private int warriorId;
private int nLeft;
private int nTop;

public WarriorEntity(Context context)
{
  super(context);
}

public void defineWarrior(kingsColor a1, weapons a2, int a3, int a4, int a5, int a6)
{
  kingColor = a1;
  weaponId = a2;
  kingSide = a3;
  warriorId = a4;
  nLeft = a5;
  nTop = a6;

  switch (kingColor)
  {
    case blue:
      this.setImageResource(R.drawable.bluewarrior);
      break;
    case green:
      this.setImageResource(R.drawable.greenwarrior);
      break;
    case purple:
      this.setImageResource(R.drawable.purplewarrior);
      break;
    case red:
      this.setImageResource(R.drawable.redwarrior);
      break;
    case white:
      this.setImageResource(R.drawable.whitewarrior);
      break;
    case yellow:
      this.setImageResource(R.drawable.yellowwarrior);
      break;
  }
  this.setId(warriorId);
  this.setOnClickListener(WarriorClick);
  setImagexy(this, nLeft, nTop, 20, 30);
}

public void addWeapon()
{
  switch (weaponId)
  {
     case bowandarrow :
        break;
     case mace :
        break;
     case spear :
        break;
     case sword :
         // - Here I would want some code to add the weapon image which as if it were part
              of the same image as the character... moves/reacts with the character.
        break;
  }
}

public void warriorMover(int leftX, int topY)
{
  setImagexy(this, leftX + 8, topY - 3, 20, 30);
} 
```

“setImagexy”是一个自定义方法，它完全可以......将图像移动到屏幕上的给定位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:21:51.567

可以使用不同的方法：制作默认精灵的副本并在其上画剑（如果您不需要经常更新精灵，这是一个好方法

或者您可以在绘制角色精灵后将剑渲染到精灵顶部：

```
render_loop()
_>draw_characterSprite()
__>draw_equipment() 
```

# java - 在ant中定义一个列表或一组变量

> ID：10030190
> 
> 赞同：4
> 
> 时间：2012-04-05T14:07:46.600
> 
> 标签：java, list, ant, for-loop

我想在 ant 构建文件中定义一个变量列表，以便在我的任务中使用这个列表的 for 循环。我怎样才能做到这一点？

ps：应该是这样的：

```
<varlist name="mylist"> <!-- Actually, there is no such tag in Ant -->
    <item>someThing</item>
    <item>anotherThing</item>
</varlist>

...

<for param="item" list="${mylist}">
    <sequential>
        <echo>@{item}</echo>
    </sequential>
</for> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T14:28:53.757

```
<!-- "For" task is supported by Ant-Contrib Tasks 
http://ant-contrib.sourceforge.net/tasks/tasks/index.html -->
<taskdef resource="net/sf/antcontrib/antlib.xml">
  <classpath>
    <pathelement location="ant-contrib-1.0b3.jar"/>
  </classpath>
</taskdef>

<property name="someThing" value="Hello"/>
<property name="anotherThing" value="World!"/>

<target name="loop">
    <for param="item" list="${someThing},${anotherThing}">
        <sequential>
            <echo>@{item}</echo>
        </sequential>
    </for>
</target> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T14:10:57.797

不确定[这](http://ant-contrib.sourceforge.net/tasks/tasks/for.html)是否是您的意思：

```
<echo message="The first five letters of the alphabet are:"/>
<for list="a,b,c,d,e" param="letter">
  <sequential>
    <echo>Letter @{letter}</echo>
  </sequential>
</for> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T20:29:46.600

**[Ant Addon Flaka](http://code.google.com/p/flaka/)**具有非常灵活**[的](http://workbench.haefelinger.it/flaka/download/manual/flaka-1.2.2.html#task_for)**任务。您可以使用自己的属性 foobar=item1,item2,.. 或任何现有的类似 csv 的属性，例如 ant path/fileset/dirset 提供的某些属性，例如 ${ant.refid:whatever} 或 ${toString:whatever} 或Flaka 提供的 EL 函数的结果，例如 split() 或 list() .. 或要迭代的另一个对象/项目列表，请参阅**[Flaka 手册](http://workbench.haefelinger.it/flaka/download/manual/flaka-1.2.2.html)**， **[Flaka 示例](http://code.google.com/p/flaka/wiki/FlakaExamples#Files_/_Directories)**以获取更多详细信息和示例。

# asp.net - Comet 与 ASP.NET AsyncHttpHandlers

> ID：10030197
> 
> 赞同：1
> 
> 时间：2012-04-05T14:08:11.933
> 
> 标签：asp.net, .net, comet, ihttpasynchandler

我正在我当前的 asp.net 应用程序中使用 AsyncHttpHandlers 实现彗星。根据我的实现，客户端最初在 AsyncHttpHandler 上向服务器（及其用户 ID）发送通知挂钩请求，在服务器端，我维护用户 ID（键）和 IAynsResult（值）的全局（应用程序级别）字典。因此，当收到向用户发送通知的请求时，我只需从全局字典中选择匹配的 IAsyncResult 并将响应发送给客户端用户。

我担心的是，在应用程序级别维护用户 ID 和 IAsyncResult 的字典是一个好的设计吗？我觉得在高流量时它会给服务器带来很多负载。有没有其他方法可以实现彗星。或者在高流量场景中实现彗星的好的设计是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T07:37:14.537

这取决于对服务器的请求数量，IAsyncResult 请求使用`ThreadPool`自动管理工作线程数量的进程。这些线程被分配一个任务，运行它们直到完成，然后返回到 ThreadPool 以供重用。

ThreadPool 由 .NET 的其他方面使用，并提供**有限**数量的线程。如果您过度使用它，您的任务可能会被阻止等待其他人完成！

所以基本上，在 ASP.net 上运行彗星服务器需要强大的硬件，或者需要在多个服务器上分发应用程序。

我会推荐[HTML5 WebSocket](http://en.wikipedia.org/wiki/WebSocket)，它是用于在 HTML 中实现套接字的[W3C API](http://dev.w3.org/html5/websockets/)，并且更容易在 ASP.net 服务器上设置：

[.net 4 的 SignalR](https://github.com/SignalR/SignalR)

[.net 4.5 的 ASP.net WebSocket API](http://msdn.microsoft.com/en-us/library/system.web.websockets.aspnetwebsocket.aspx)

# html - HTML5 Video with Fullscreen Mode in IE9 and Firefox

> ID：10030200
> 
> 赞同：3
> 
> 时间：2012-04-05T14:08:23.373
> 
> 标签：html, video, fullscreen

I am curently working on a HTML5 video Plugin and below is my code and trying to work with custom controls.

The problem is I am having a fullscreen button when I click it the video needs to change it to Fullscreen mode.I am able to get it worked in chrome but not in IE and Firefox.

```
 function addvideo() {
            var addvideo = $('<canvas id="canvas" height="468" width="560"></canvas><div class="videocontainer"><video id="video1"><source src="http://clips.vorwaerts-gmbh.de/big_buck_bunny.ogv" type="video/ogg; codecs="theora, vorbis""><source src="http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4" type="video/mp4; codecs="avc1.42E01E, mp4a.40.2""><source src="http://clips.vorwaerts-gmbh.de/big_buck_bunny.ogv" type="video/ogg; codecs="theora, vorbis""><source src="http://clips.vorwaerts-gmbh.de/big_buck_bunny.webm type="video/WebM; codecs="vp8, vorbis""></video></div>');
            $(addvideo).appendTo('#video');
        }

 function addcontrols() {
            var controls = $('<table><tr class="controls"><td id="playbtn" class="playbtn" title="Play/Pause"><td id="elapsedtimer" class="elapsedtimer">00:00</td><td id="videoslider" class="videoslider"></td><td id="totaltimer" class="totaltimer">00:00</td><td class="HD"></td><td class="fullscreen"></td><td><td id="volumeslider" class="volumeslider"></td><td class="volumeon" title="Mute/Unmute"></td></tr></table>');
            $(controls).appendTo('#controlspane');
        } 
```

This is the function for Fullscreen Mode:

```
$('.fullscreen').on('click', function() {
$('#video1').get(0).webkitEnterFullscreen();
$('#video1').get(0).mozRequestFullScreen();
return false;
}); 
```

Can anyone suggest me how do I modify this in order to achieve my goal?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T09:25:40.657

ie9 不支持全屏API

对于 FF 和 Chrome，只需改进您的功能...首先，将“get(0)”删除为较短的“[0]”。然后添加一个 var 来缓存指向视频的指针，最后添加 w3c 版本的命令

```
$('.fullscreen').on('click', function() {
var a = $('#video1')[0],
    fsReturn = a.requestFullscreen ? a.requestFullscreen() : // W3C
    a.webkitRequestFullScreen ? a.webkitRequestFullScreen() : // Chrome
    a.mozRequestFullScreen ? a.mozRequestFullScreen() : false; // Firefox
}; 
```

# javascript - Android 平板电脑上的 Cookie 问题

> ID：10030204
> 
> 赞同：0
> 
> 时间：2012-04-05T14:08:38.507
> 
> 标签：javascript, android, authentication, cookies, couchapp

我一直在吃饼干。

我有一个使用 Android-Couchbase-Callback 构建的 Android 应用程序。它是一个 CouchApp，基本上是作为 Android 应用程序运行的 JavaScript + CouchDB 应用程序。在笔记本电脑和台式机上，它的效果非常好。

我的问题是 1) 要么 cookie 将被设置然后不可更改，要么 2) 它们根本不会被设置。他们根本没有表现得像他们应该的那样。现在在我的应用程序上，我可以登录几次，这意味着 cookie 被设置，然后取消设置，但第二次我退出，就像发条一样，它会失败。注销功能似乎可以正确重置所有内容，但此时我无法删除 cookie，即使我可以添加新的 cookie。

我之前遇到过这个 cookie 不稳定问题，我通过使用 GET 变量“AuthSession”而不是 cookie“AuthSession”进行身份验证来解决这个问题，这在之前似乎有效，当时问题是 cookie 正在保存，但不是被发送到服务器。

我正在使用 jQuery.couch、jQuery.cookie 和 Backbone.js。

# mysql - 在 MS Access 中将时间戳转换为人类可读

> ID：10030210
> 
> 赞同：3
> 
> 时间：2012-04-05T14:08:55.223
> 
> 标签：mysql, ms-access, dateadd, linked-tables

我在 MS Access 程序中链接了数十个 MySQL 表。还有十几个查询将这些表拉在一起并以人类的方式提供数据，尤其是将时间戳转换为 mm/dd/yyyy 格式。

我已经测试了时间戳[http://www.unixtimestamp.com/index.php](http://www.unixtimestamp.com/index.php)）但下面的代码产生日期：4/25/2012 这是不正确的，它应该是 4/24/2012

`SELECT date_promised, DateAdd('s', 1335312000, #1/1/1970#) AS date_promised2 FROM erp_workorder AS t1 WHERE id_primary = 73135;`

这里发生了什么？

问候，亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T16:14:12.573

查询中的`DateAdd()`表达式要求 Unix 时间戳的 Date/Time 等价于**UTC time**。

```
? DateAdd("s", 1335312000, #1/1/1970#)
4/25/2012 
```

展开格式以明确显示时间。

```
? Format(DateAdd("s", 1335312000, #1/1/1970#), "yyyy-mm-dd hh:nn:ss")
2012-04-25 00:00:00 
```

当您将时间戳插入该网页上的框时，然后单击“转换”按钮，它会为您提供以下值：

```
04 / 24 / 12 @ 7:00:00pm EST 
```

使用较早的格式...

```
2012-04-24 19:00:00 
```

因此，现在比较同一时间点的这两种不同表示。

```
2012-04-25 00:00:00 (UTC)
2012-04-24 19:00:00 (EST) 
```

如果您希望查询显示带有任何时区偏移量的 UNIX 时间戳，请应​​用该转换来实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:17:48.543

如果 date_promised 字段是 DATETIME 类型，您可以使用 -

```
SELECT date_promised, DATE_FORMAT(date_promised, '%m/%d/%Y') AS date_promised2
FROM erp_workorder AS t1
WHERE id_primary = 73135; 
```

如果 date_promised 字段包含您可以使用的 unix 时间戳 -

```
SELECT date_promised, DATE_FORMAT(FROM_UNIXTIME(date_promised), '%m/%d/%Y') AS date_promised2
FROM erp_workorder AS t1
WHERE id_primary = 73135; 
```

# html - 使用本地存储的页面版本而不是另一个请求

> ID：10030213
> 
> 赞同：1
> 
> 时间：2012-04-05T14:09:04.897
> 
> 标签：html, caching, xmlhttprequest, local-storage, html5-appcache

我正在开发一个性能是一个非常重要的问题的网络项目。

***编辑：***

## 情况：

我想添加一些有关用户工作流程的详细信息：

1.  用户访问我网站的欢迎页面`http://example.org/`。
2.  他单击一个链接以访问该页面`http://example.org/mypage`
3.  `onclick`- 已执行链接的处理程序。
4.  处理程序使用 XHR 加载数据。
5.  处理程序`http://example.org/mypage`动态创建。
6.  处理程序将 mypage 保存在本地使用`FileSystem API`at `filesystem:http://example.org/mypage`。***编辑：（***是`filesystem:http://example.org/mypage`存储在`FileSystem`客户端的本地资源）
7.  处理程序扩展历史并将使用的地址栏的URL`History API`从`http://example.org/`(欢迎页面的 URL) 更改为`http://example.org/mypage`(用户想要查看的页面)。
8.  用户同时浏览另一个页面。
9.  稍后，用户`http://example.org/mypage`直接在地址栏中键入。
10.  浏览器显示/加载`filesystem:http://example.org/mypage`（这是本地存储的版本`http://example.org/mypage`）而不是`http://example.org/mypage`. 这意味着：浏览器不会创建新请求，它使用本地存储的`http://example.org/mypage`.

如何让浏览器使用本地存储的页面版本而不是创建新请求？***编辑：*** - 这就是我想在上面列表的#10 中做的事情。

***编辑：***

## 我的问题：

客户端已经在`http://example.org/mypage`上面列表的 #2 到 #7 中创建/生成。我不需要在其他时间创建该页面。这就是为什么我不希望浏览器创建对`http://example.org/mypage`.

这就是我想做的：

> 如果`filesystem:http://example.org/mypage`已经创建（如果用户已经访问过`http://example.org/mypage`）：
> 
> > 使用`filesystem:http://example.org/mypage`而不是`http://example.org/mypage`.
> 
> 除此以外：
> 
> > 发送请求`http://example.org/mypage`

## 试图解决：

1.  我不能使用清单文件的后备部分来执行以下操作：***编辑：（***除了原点）

    回退： [http](http://example.org/mypage) ://example.org/mypage 文件系统：http://example.org/mypage

为了让浏览器使用存储在 FileSystem 中的本地版本，因为 Fallback 指令仅在用户离线时使用，否则将被忽略。***编辑：***但我想使用`filesystem:http://example.org/mypage`而不是`http://example.org/mypage`，即使用户在线。

1.  我知道我可以在服务器生成的页面的响应标头中使用 Expire 字段，以便不创建新请求并使用缓存版本。

但是，如果我使用 JS 和 XHR 在客户端动态创建页面会怎样。***编辑：（***我在 中描述了这种情况`The situation`）在客户端创建页面时，无法让客户端缓存该页面。这就是为什么我手动“缓存”页面`FileSystem API`以将其存储在客户端。

~~为了提高性能，我尝试存储用户已经在本地访问过的任何页面。当用户再次访问一个页面时，我会向他展示该页面的旧的、本地存储的版本，并且我的脚本会创建一个 XHR 以查明该页面是否同时发生了变化。~~

~~但是我怎样才能让浏览器使用页面的本地版本呢？我可以使用 FileSystem API 在客户端本地保存生成的页面，我可以为生成的页面选择一个 URL，以使用 History API 将其显示在浏览器的位置栏上。
当用户现在访问另一个站点然后按下后退按钮时，我可以通过事件处理程序捕获 onPopState 事件。
并且该事件处理程序可以使用 FileSystem API 加载动态创建的文件。
但是，如果用户不使用后退按钮并且如果他将我使用 History API 注册的 URL 直接输入到位置栏中，我该怎么办？
然后浏览器不会使用本地存储的页面版本，浏览器会创建一个从服务器加载页面的请求。~~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T16:28:42.623

不要将动态数据放在应用程序缓存中。如果您想将动态数据放入您的页面，然后使用 AJAX 从服务器获取它，将数据存储在[Local Storage](http://dev.w3.org/html5/webstorage/)中，并通过 JavaScript 使用来自存储的数据填充页面（您可以为此挂钩到 History API）。

顺便说一句，这不起作用，因为后备条目必须在同一个域中：

```
FALLBACK:
http://example.org/mypage filesystem:http://example.org/mypage 
```

一旦您的页面在应用程序缓存中（即它是本地存储的），浏览器将始终使用应用程序缓存中的版本，直到更新清单或用户删除缓存。你在页面上放什么过期标头并不重要，除非你放了一个很长的过期时间并且你经常更新清单，那么应用程序缓存很可能会从浏览器缓存中填充，而不是从服务器刷新。这就是为什么您放入应用程序缓存中的内容应该是静态文件的原因。使用 AJAX 获取动态内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T22:13:33.743

您可以在 URL 的锚部分（即[http://example.com/#mypage](http://example.com/#mypage) ）中使用对层次结构中的实际链接进行编码的 URL，例如“mypage” 。然后你可以使用 window.location.hash 来获取 # 之后的字符串并做任何你想做的事情。只需确保您的根目录（或 # 前面的任何内容）位于 AppCache 中。

# sharepoint - 尝试部署 Web 部件时出错

> ID：10030223
> 
> 赞同：2
> 
> 时间：2012-04-05T14:09:34.383
> 
> 标签：sharepoint, sharepoint-2010, web-parts

我一直在谷歌上寻找解决这个问题的方法，但还没有找到匹配的。

我正在尝试使用 Visual Studios 2010 将一个简单的“Hello World”Web 部件部署到 SharePoint。

当我点击时出现错误`F5`：“部署步骤‘撤回解决方案’中发生错误：无法连接到 SharePoint 站点：[http](http://example.com/) ://example.com/ 。确保这是一个有效的 URL，并且 SharePoint 站点是在本地计算机上运行。如果您将此项目移动到新计算机，或者如果 SharePoint 网站的 URL 自您创建项目后发生更改，请更新项目的网站 URL 属性。

好的，我已经做了很多搜索，我会告诉你到目前为止我已经尝试过什么。我在场上拥有完全的管理员权限，对两个数据库都有完全的权限。我确保 webpart URL 属性也与 Central Admin 中列出的站点属性相匹配。

如果有人有任何建议或见解，将不胜感激。先感谢您。

PS（编辑）另外，我部署到的农场和视觉工作室在同一台机器上？那会导致它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T06:56:02.043

在 Visual Studio 中检查项目的属性。单击解决方案资源管理器中的项目节点并按 F4，然后检查“站点 URL”属性。它应包含以下内容之一

1.  http://[您的机器名称][:port]/[网站集或网络相对 URL]
2.  http://localhost[:port]/[网站集或网络相对 URL]
3.  http://[您的机器 IP 地址][:port]/[网站集或网络相对 URL]

请注意，Visual Studio 必须安装在您的 Web 前端或应用程序服务器上。

如果您在解决方案撤回时遇到一些错误，请先尝试通过 Central Admin 停用并删除它。然后尝试在 Visual Studio 中进行一些部署-撤回检查循环。如果您仍然会收到错误，请在此处发布来自 Visual Studio 输出窗口 (Ctrl+W, O) 的日志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T16:25:44.637

我能够继续使用你们在本主题中引用的教程中的 STSADM 命令部署 Web 部件，非常感谢。

看来我遇到的问题涉及多服务器安装，我认为还没有快​​速解决方法。

谢谢大家的回复！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T18:24:24.277

您是否提到过`URL`Visual Studio Sharepoint 项目中的 Site 属性？您可以使用 ( `ctrl`++ `shift`)打开`p`属性窗口，然后检查`project Properties`并确保站点 URL 是您希望部署解决方案的 Web 应用程序。

这个链接可能会有所帮助：http: [//www.dev4side.com/community/blog/2010/2/28/error-occurred-in-deployment-step-%27recycle-iis-application-pool%27.aspx](http://www.dev4side.com/community/blog/2010/2/28/error-occurred-in-deployment-step-%27recycle-iis-application-pool%27.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T13:21:25.407

请执行以下操作

1.  您能否先验证您尝试部署的网站集是否正常工作
2.  打开**SharePoint 项目的属性 >Properties(F4)> Build 选项卡**，看到平台已设置为**Active(Any CPU** )。
3.  从管理中心删除解决方案，然后再次尝试部署解决方案。

如果您仍然有同样的问题，请附加 SharePoint 日志中的日志文件。

谢谢，-桑托什

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-07T16:25:07.057

按照下面提到的步骤来调试此问题： 1) 在托管[http://mysite.com](http://mysite.com)站点
的服务器上浏览 IE 中的 URL 。2) 如果您能够浏览，请尝试通过在 Visual Studio 的项目属性中提供新站点 URL 来将此 Web 部件部署到另一个站点。 3) 要将解决方案部署到站点上，您必须在托管站点的同一台计算机上安装 Visual Studio。 4）尝试通过stsadm部署WSP，[点击这里查看详情](http://social.msdn.microsoft.com/Forums/en-US/sharepoint2010general/thread/8a1a4cc7-70b5-4d17-a6ad-83f003f2e598/)

. 要在 Visual Studio 中创建 WSP 右键单击​​项目 -> 单击“包” -> 完成后右键单击项目 -> 单击“在 Windows 资源管理器中打开” -> 打开“bin”目录 -> 打开“调试”目录-> 您将看到一个名为您的项目名称的文件，扩展名为 .wsp
5) 如果上述任何内容都不能帮助您放下部署步骤。

# rabbitmq - 使用 RabbitMQ 最大化吞吐量

> ID：10030227
> 
> 赞同：35
> 
> 时间：2012-04-05T14:09:43.707
> 
> 标签：rabbitmq

在我们的项目中，我们希望使用“任务队列”模式中的 RabbitMQ 来传递数据。

在生产者端，我们构建了一些 TCP 服务器（在 node.js 中）来接收高并发数据并将其发送到 MQ 而不做任何事情。

在消费者端，我们使用 JAVA 客户端从 MQ 获取任务数据，处理后 ack。

所以问题是：要获得最大的消息传递吞吐量/性能（例如，400,000 msg/second），多少队列最好？更多的队列是否意味着更好的吞吐量/性能？还有什么我应该注意的吗？在这种情况下使用 RabbitMQ 的任何已知最佳实践指南？

任何意见都非常感谢！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-06T00:17:06.650

为了在 RabbitMQ 中获得最佳性能，请遵循其创建者的建议。来自[RabbitMQ 博客](http://www.rabbitmq.com/blog/2011/09/24/sizing-your-rabbits/)：

> **RabbitMQ 的队列在为空时最快**。当队列是空的，并且它有消费者准备好接收消息时，一旦队列接收到消息，它就会直接发送给消费者。在持久队列中的持久消息的情况下，是的，它也会进入磁盘，但这是以异步方式完成的并且被大量缓冲。要点是需要做的簿记很少，修改的数据结构很少，需要分配的额外内存也很少。

如果你真的想深入研究 RabbitMQ 队列的性能，他们的[另一个博客条目](http://www.rabbitmq.com/blog/2011/10/27/performance-of-queues-when-less-is-more/)会更深入地研究数据。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-08-30T01:44:10.503

根据我曾经从 rabbitmq-discuss 邮件组得到的回复，您可以尝试其他一些方法来增加吞吐量并减少延迟：

> *   使用更大的预取计数。小的值会损害性能。
>     
>     
> *   主题交换比直接交换或扇出交换慢。
>     
>     
> *   确保队列保持较短。更长的队列会带来更多的处理开销。
>     
>     
> *   如果您关心延迟和消息速率，请使用较小的消息。使用有效的格式（例如避免使用 XML）或压缩有效负载。
>     
>     
> *   尝试使用有助于提高性能的 HiPE。
>     
>     
> *   避免事务和持久性。还要避免以立即或强制模式发布。避免 HA。集群也会影响性能。
>     
>     
> *   如果您有多个队列和消费者，您将在多核系统上实现更好的吞吐量。
>     
>     
> *   至少使用 v2.8.1，它引入了流量控制。确保永远不会触发内存和磁盘空间警报。
>     
>     
> *   虚拟化会带来很小的性能损失。
>     
>     
> *   调整您的操作系统和网络堆栈。确保提供足够多的 RAM。提供快速内核和 RAM。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-04T13:59:31.977

您将通过更大的预取计数来增加吞吐量，并同时确认来自消费者的多条消息（而不是为每条消息发送 ACK）。

但是，当然，带有多个标志的 ACK ( [http://www.rabbitmq.com/amqp-0-9-1-reference.html#basic.ack ) 需要您的消费者应用程序 (](http://www.rabbitmq.com/amqp-0-9-1-reference.html#basic.ack) [http://lists](http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2013-August/029600.html) ) 上的额外逻辑[.rabbitmq.com/pipermail/rabbitmq-discuss/2013-August/029600.html](http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2013-August/029600.html)）。您必须保留从代理传递的消息的传递标记列表、它们的状态（您的应用程序是否已处理它们）以及当所有传递的消息时每第 N 个传递标记 (NDTAG) 确认一次-tag 小于或等于 NDTAG 已被处理。

# facebook - Facebook Oauth/登录失败

> ID：10030229
> 
> 赞同：0
> 
> 时间：2012-04-05T14:09:48.657
> 
> 标签：facebook, facebook-oauth, facebook-javascript-sdk

两天以来，我通过 facebook 应用程序无法正常登录/oauth(orization)。

它的行为就像应用程序从未离开沙盒模式（已禁用）：（很多/一些/不是全部）普通用户登录失败，但页面管理员、开发人员等授权没有问题。

facebook的oauth页面出现错误，不是很有帮助：“发生错误。请稍后再试。”

我做了一个愚蠢的测试应用程序，这真的没什么：

*   facebook 上的应用程序：http: [//apps.facebook.com/mygeneraltesting/](http://apps.facebook.com/mygeneraltesting/)
*   iframe 的 URL（那里没有 https）：（我在一篇文章中限制为两个 url，所以将其视为评论）
*   Oauth 对话框的最小可能（恕我直言）URL：（我在一篇文章中限制为两个 url，所以将其视为评论）

看起来该错误确实是由 facebook 引起的，但很难在网上找到其他有此问题的人。所以我想问：

*   还有其他人从上面看到错误消息吗？
*   有人在他们的应用程序上遇到同样的问题吗？
*   如果您想进行代码审查，（请参阅： http: [//graphicore.de/downloads/generaltesting.tar.gz](http://graphicore.de/downloads/generaltesting.tar.gz)）有什么可疑之处吗？

非常感谢， 拉斯

（搜索引擎的德语错误消息：“Es ist ein Fehler aufgetreten. Bitte versuche es später noch einmal。”）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-13T02:44:24.690

这个问题现在已经过时了。答案是：Facebook 做错了什么。相同的代码在一段时间后创建的另一个应用程序上工作（我什至不记得后来多少）但从未在那个应用程序上工作过，AFAIK。所以它只是 Facebook 方面的一个坏掉的应用程序。

# jquery - qTip 在点击时显示/隐藏工具提示

> ID：10030230
> 
> 赞同：2
> 
> 时间：2012-04-05T14:09:48.750
> 
> 标签：jquery, qtip2

我有一个包含许多工具提示的页面。我想在单击按钮时分别显示/隐藏每一个。它对我不起作用，有人可以帮忙吗？

```
<span><input type="button" value="b1" onClick="showMyTT('div1');"></span><span><div id="div1"></div></span>
<span><input type="button" value="b2" onClick="showMyTT('div2');"></span><span><div id="div2"></div></span>
<span><input type="button" value="b3" onClick="showMyTT('div3');"></span><span><div id="div3"></div>​&lt;/span>

function showMyTT(id) { 
    $('#'+id).qtip({
        content: {
            text: 'Show the content', 
            title: false
        },
        position: {
            my: 'left center', 
            at: 'left center' 
        },
        show: {
            event: false, 
            ready: true 
        },
        hide: false, 
        style: {
            classes: 'ui-tooltip-shadow ui-tooltip-jtools'
        }
    }); 
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:18:32.083

此`showMyTT`函数初始化您的工具提示。为所有 id 运行此函数（初始化）后，您应该执行以下操作：

*HTML*

```
<input type="button" value="b1" onClick="toggleQtip('div1');" /> 
```

*JavaScript*

```
function toggleQtip(id) {
    var div = $('#'+id);
    if (div.data('visible')) {
        div.qtip('hide');
        div.data('visible', false);
    } else {       
        div.qtip('show');
        div.data('visible', true);
    }
} 
```

**编辑**

这是初始化 qtip 的方法（至少一种可能性）。将自定义类添加到您想要有 qtip 的所有 div，例如`qtiped`：

*HTML*

```
<div id="div1" class="qtiped">TEST</div>
<input type="button" value="b1" onClick="toggleQtip('div1');" /> 
```

然后运行以下代码：

*JavaScript*

```
$(document).ready(function() {
    $('.qtiped').each(function() {
        showMyTT( $(this).attr('id') );
    });
}); 
```

此外，在内部`showMyTT`进行以下更改：`show: false`为了避免自动加载（我们要初始化工具提示，而不是显示它们）。

# java - 使用 ksoap2-android 时出现异常

> ID：10030233
> 
> 赞同：3
> 
> 时间：2012-04-05T14:10:06.073
> 
> 标签：java, android, ksoap2

我对 ksoap2 有疑问。我的问题是该项目过去一直运行良好，直到我不得不格式化我的电脑并重新设置它。

我不记得我在我的应用程序中引用了哪个版本，但我尝试了很多，但问题仍然存在。

```
04-05 13:56:18.289: E/dalvikvm(495): Could not find class  'org.ksoap2.serialization.SoapObject', referenced from method   com.giatrosofia.Activity_Votana$ConnectAndGetLst.doInBackground
04-05 13:56:18.289: W/dalvikvm(495): VFY: unable to resolve new-instance 223 (Lorg/ksoap2/serialization/SoapObject;) in Lcom/giatrosofia/Activity_Votana$ConnectAndGetLst;
04-05 13:56:18.289: D/dalvikvm(495): VFY: replacing opcode 0x22 at 0x0000
04-05 13:56:29.627: W/dalvikvm(495): threadid=9: thread exiting with uncaught exception (group=0x40014760)
04-05 13:56:29.809: E/AndroidRuntime(495): FATAL EXCEPTION: AsyncTask #1
04-05 13:56:29.809: E/AndroidRuntime(495): java.lang.RuntimeException: An error occured while executing doInBackground()
04-05 13:56:29.809: E/AndroidRuntime(495):  at android.os.AsyncTask$3.done(AsyncTask.java:266)
04-05 13:56:29.809: E/AndroidRuntime(495):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
04-05 13:56:29.809: E/AndroidRuntime(495):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
04-05 13:56:29.809: E/AndroidRuntime(495):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
04-05 13:56:29.809: E/AndroidRuntime(495):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-05 13:56:29.809: E/AndroidRuntime(495):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1081)
04-05 13:56:29.809: E/AndroidRuntime(495):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:574)
04-05 13:56:29.809: E/AndroidRuntime(495):  at java.lang.Thread.run(Thread.java:1020)
04-05 13:56:29.809: E/AndroidRuntime(495): Caused by: java.lang.NoClassDefFoundError: org.ksoap2.serialization.SoapObject 
```

引用的文件是**ksoap2-android-assembly-2.6.2-jar-with-dependencies.jar** 和 excpetion 发生在

```
SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 
```

这是引用的jar文件

![Java 构建路径](../Images/7fdcb12b9db1852def553a9e4793958b.png)

我错过了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T14:15:36.310

如果您使用的是新的 ADT 17

然后在项目的根目录上创建一个名为**libs的目录**

只需将 ksop jar 复制并粘贴到 libs 目录中即可。

资源

斌

libs --> your.jar 文件在这里

随着新的更新，它将运行良好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T13:44:13.867

您可以尝试将 KSOAP2 添加到“订购和导出”选项卡中。为此：
01- 右键单击​​项目名称
02- 单击*属性*
03- 选择*Java 构建路径* 04- 检查 KSOAP 库是否已在*库*选项卡
上 05- 单击*订购和导出*选项卡并检查ksoap2-android-assembly 旁边的复选框。

再次导出您的项目并尝试。它现在应该可以工作了。

# c# - 注释模型列表的验证

> ID：10030238
> 
> 赞同：1
> 
> 时间：2012-04-05T14:10:26.843
> 
> 标签：c#, asp.net-mvc, validation

我不确定标题是否清楚。让我更好地解释一下：

我有两个模型：

1-GuestResponse.cs：

```
public class GuestResponse
    {
        [Required(ErrorMessage="Please enter your name")]
        public string Name { get; set; }

        [Required(ErrorMessage = "Please enter your email address")]
        [RegularExpression(".+\\@.+\\..+", ErrorMessage="Please enter a valid email address")]
        public string Email { get; set; }

        [Required(ErrorMessage = "Please enter your phone number")]
        public string Phone { get; set; }

        [Required(ErrorMessage = "Please especify wheter you will attend")]
        public bool? WillAttend { get; set; }
    } 
```

2- CompanyGuestResponse.cs：

```
public class CompanyGuestResponse
    {
        [Required(ErrorMessage = "Please enter your company name")]
        public string Name { get; set; }

        [Required(ErrorMessage = "Please enter your company email address")]
        [RegularExpression(".+\\@.+\\..+", ErrorMessage = "Please enter a valid email address")]
        public string Email { get; set; }

        [Required(ErrorMessage = "Please enter your company phone number")]
        public string Phone { get; set; }

        public IList<GuestResponse> GuestResponses { get; set;} 
    } 
```

我还有一个用于 CompanyGuestResponse 模型的强类型视图，其中有一个带有表格的表单，可以让用户为属性 GuestResponses 提供输入。

我希望只有在正确验证了表格的填充行（即，不要尝试验证未填充的行）并且至少有一行正确填充的情况下才能提交表单。

我试图通过创建一个自定义注释来做到这一点，如[ViewModel 验证中所述的 List](https://stackoverflow.com/questions/5146732/viewmodel-validation-for-a-list)没有成功（mvc 只是忽略了列表注释并验证了 GuestResponse 类中的注释）：

```
[EnsureOneElementAttribute(ErrorMessage = "At least a person is required")]
public IList<GuestResponse> GuestResponses { get; set;} 
```

结果：

[http://postimage.org/image/b2jn7ta69/](http://postimage.org/image/b2jn7ta69/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:42:20.560

我知道你想验证模型本身，而不是每个字段，所以你可以做什么删除`[Required]`属性上的属性，并在操作中验证是否填充了任何字段，如果是这样，那么继续，添加一个错误并且不要将它与任何领域相关联

所以我要告诉你的是在这种情况下删除注释并进行手动检查

# mysql - 针对坏词列表更新大型 mysql 数据库（行）的最佳查询

> ID：10030242
> 
> 赞同：1
> 
> 时间：2012-04-05T14:10:35.113
> 
> 标签：mysql, sql, performance

我有一个包含 800 万行的表，需要针对大量的坏词进行扫描。

我的第一个想法是：

```
UPDATE `master` SET `blacklisted`='1' WHERE MATCH (`content-desc`, `content-title`) AGAINST ('
badword1 | badword2 | badword3 | "and many more"' IN BOOLEAN MODE) 
```

不幸的是，这个版本忘记了一些单词并且不区分大小写！

下一次尝试是

```
$badwords = array("badword1","badword2","badword3","and-many-more");

foreach($badwords AS $name)
   {
        $sql = "UPDATE `master` SET `blacklisted`='1' WHERE concat(`content-title(mediumtext)`,`content-desc(mediumtext)`)  LIKE '%".$name."%'";

        sleep(6);

// Could limit this query by 100.000 and adding another foreach loop help?
// How would the foreach look like (select count(*) from master?)/100.000

   } 
```

很多查询立即杀死了我的服务器！也许评论的想法会有所帮助？！（但是怎么做？）

谁有最好的想法如何解决这个查询，而不会给 mysql 服务器带来太多压力？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:43:47.940

不确定这将如何在您的表上执行，但您可以进行不区分大小写的比较，作为连接子句的一部分。

**因此，您有一个要扫描的表（有 8m 行）**

如果不存在则创建表`haystack`( `word`varchar(10) NOT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- 为表转储数据`haystack`

插入`haystack`( `word`) 值 ('a cat is'), ('category'), ('cat'), ('decatur'), ('dog'), ('pigeon'), ('eagle'), ( 'a beagle'), ('Cat'), ('CAT');

**和一张脏话的桌子**

如果不存在则创建表`needles`( `bad_word`varchar(10) NOT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- 为表转储数据`needles`

插入`needles`( `bad_word`) 值 ('cat'), ('eagle');

**以下查询将使用模糊匹配连接两个表，不区分大小写。**

SELECT * FROM haystack AS h JOIN needles AS n ON h.word COLLATE utf8_general_ci LIKE CONCAT('%' , n.bad_word , '%');

当然，您可以轻松地对结果进行更新。这是我得到的结果......如果你不想排除像“Dickson”、“Stitsville”、“Assume”这样的词，它会变得更加棘手。

**单词 bad_word**

猫就是猫

类别猫

猫猫

迪凯特猫

老鹰老鹰

一只小猎鹰

猫猫

猫猫

# android - WTAI 在 WebView (Android) 中不起作用

> ID：10030245
> 
> 赞同：1
> 
> 时间：2012-04-05T14:10:49.140
> 
> 标签：android, webview, wtai

单击链接

```
<html><a href="wtai://wp/mc;8015551212">Click me to make a call</a></html> 
```

在 WebView 中会导致“找不到页面”错误。虽然相同的链接在移动浏览器中运行良好。有任何解决这个问题的方法吗？

**编辑：**

```
String h = "<html><a href=\"wtai://wp/mc;8015551212;\">wtai</a></html>";
String g = "<html><a href=\"tel:5551234\">tel</a></html>";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    WebView web = (WebView) findViewById(R.id.webView1);
    web.getSettings().setJavaScriptEnabled(true);
    web.getSettings().setPluginsEnabled(true);
    web.loadData(h, "text/html", "utf-8");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:14:57.973

这是在 Android 中编写 tel WTAI 链接的错误方式。

```
<a href="tel:+27822222222">Call us now!</a> 
```

是编写此链接的正确方法。

# javascript - 输入隐藏不运行 onChange 事件

> ID：10030249
> 
> 赞同：-1
> 
> 时间：2012-04-05T14:11:00.317
> 
> 标签：javascript, html, input, hidden, onchange

我有以下代码：

```
<script language="JavaScript">
function doReload()
{
    alert('');
    document.getElementById('doPostBack').value = "0";      
    location.href = 'users.php';
}

function changes()
{
document.getElementById('doPostBack').value = '1';  
}
</script>
</head>
<body>
<div id="users" style="height: 80%;">
<form id="submitForm" name="submitForm" method="post">
<input type="button" value="Novo Usuário" title="Adiciona um novo Usuario"      onclick="location.href = 'registerUser.php'" />
<input type="button" value="teste" onclick="changes()"> 
```

当我单击 teste 时，该功能不执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:23:00.913

如果您试图让*onchange*侦听器触发，则无法通过以编程方式更改值来实现。当控件的值发生更改**并且失去焦点时，将调度**[Onchange 事件](http://www.w3.org/TR/html4/interact/scripts.html#adef-onchange)。它旨在响应用户操作，而不是程序操作。

 **您可以改为在更改值后直接调用 onchange 函数，或将 onchange 事件发送到文档中的适当位置。**

# javascript - DOM onUnload 在响应开始之前不会触发

> ID：10030253
> 
> 赞同：0
> 
> 时间：2012-04-05T14:11:12.727
> 
> 标签：javascript, browser, dom-events

考虑以下代码：

```
$(window).unload(function () {
    console.log('foo');
}); 
```

如果我通过导航到不同的 URL 来触发 unload 事件，则在浏览器开始获得响应之前，该事件不会触发。

即，如果 DNS 查找需要很长时间，或者远程服务器需要时间来响应（Firefox 中的加载程序逆时针动画，事件只有在开始顺时针旋转时才会触发）

导航开始后，我是否可以听到另一个事件？

我意识到我可以附加到链接点击并在那里拦截，但这会很麻烦，因为我必须在这里手动捕获无数的边缘情况。`OnUnload`是明智的地方，但它的行为不像我想要的那样:(

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T15:16:07.123

这[`window.onbeforeunload`](https://developer.mozilla.org/en/DOM/window.onbeforeunload)可能会满足您的需求。

# objective-c - Obj-C：来自 Nib 的 UIView 在 willAppear 和 didAppear 之间释放

> ID：10030256
> 
> 赞同：0
> 
> 时间：2012-04-05T14:11:17.773
> 
> 标签：objective-c, uiview, crash, nib, retain

我在笔尖中有一个视图，它通过以下行链接到我的视图控制器中的一个属性：

```
@property (unsafe_unretained, nonatomic) IBOutlet UIView *otherView; 
```

它是 unsafe_unretained，因为我们的目标是 ios 4 设备，但使用的是 ARC。

我们正在崩溃，因为当我们试图显示 otherView 时，它正在被释放，我不太清楚为什么。我在 viewWillAppear 中设置了一个断点，如果我在调试器中执行“po otherView”，我会得到：

```
<UIView: 0x6fcc880; frame = (0 0; 320 460); autoresize = RM+BM; layer = <CALayer: 0x6fcc8b0>> 
```

我在 viewWillAppear 方法的末尾检查了它，它也仍然存在。但是，如果我在 viewDidAppear 的开头放置一个断点，我会得到：

```
0x6fcc880 does not appear to point to a valid object. 
```

谁能指出我正确的方向？如果我将属性声明更改为“强”，则不会发生此问题，并且我理解通过将其更改为强，我将保留它（并因此防止它被释放），但我不认为我应该需要这样做吗？

问候，尼克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:36:10.720

您需要在 xib 中的任何 topLevel 对象上具有保留属性 ( `strong`| )。`retain`

![在此处输入图像描述](../Images/fda8dd5c3c8a39eab5a7c6c9266f9040.png)

在上面的这个例子中，`view1`需要有一个保留的属性。`view2`不需要保留财产，但我通常只是将其保留为保留，因为它不会伤害任何东西。

* * *

### 为什么不需要保留？

`view2`不需要保留属性，因为它归您所有`view1`以及您拥有的任何引用`are arbitrary references between objects that do not imply ownership.`（Apple，[资源编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html)）。`self.view2 = nil`但是拥有保留财产也没有什么坏处，只需确保致电`viewDidUnload`

# php - 我无法让它工作，从 jquery ui 自动完成

> ID：10030258
> 
> 赞同：0
> 
> 时间：2012-04-05T14:11:22.477
> 
> 标签：php, jquery, autocomplete

在头部我有：

```
 script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
  script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js" ></script>

$(document).ready(function() 
{
    $("#auto_input").autocomplete({
        source:"../autocomplete.php",
        minLength: 5 
});
}); 
```

以及我想提出建议的输入：

```
<form action=\"../add_name.php\" method=\"get\">
b>".$NAME_INPUT.": </b>
<input name=\"auto_input\" id=\"auto_input\" class=\"input\" type=\"text\" value=\"";
                    if(isset($_GET[auto_input]))
                    {
                        $page.=$_GET['auto_input'];
                    }$page.="/>";

</form> 
```

返回结果的 php 文件包含：

```
 $string = trim(strip_tags($_GET['term']));
  $query = "SELECT `id`,`name` FROM `table` WHERE `name` LIKE '%".$string."%'";
  $table=$database->getTable($database->execute($query));

 for ($i = 1; $i<=$table[0];$i++){
 $row['value'] = $table[$i]['name'];
 $row['id'] = $table[$i]['id'];
 $final[] = $row;
 }
 echo json_encode($final); 
```

输入 5 个字符后不显示建议。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:08:53.557

关于您的最后评论，我认为来源路径不正确。该行：

```
source:"../autocomplete.php" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T04:06:45.403

请使用 autocomplete 内置的错误处理来确定 json 数组是否被解释。

# html - Django中的文件上传错误

> ID：10030259
> 
> 赞同：1
> 
> 时间：2012-04-05T14:11:26.233
> 
> 标签：html, django, flash

目前正在使用 Django 构建的网站，当他们尝试在该 PC 上上传文件时遇到问题。在 IE 中显示“HTTP 错误”，在 Firefox 中显示“IO 错误”。他们使用的是 IE 8 和带有 Windows 媒体版的最新版 firefox。

只有在这台 PC 上他们才会遇到问题，所以我看不出这将是一个权限问题。只是希望有人能指出我正确的方向。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:32:53.053

PC是指客户端还是服务器？您确定要上传的路径存在于服务器上吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:09:25.270

只是检查你的意思是它的一台计算机只是有问题引用“只有在这台 PC 上他们才会遇到问题”。

比较这台电脑和另一台成功的电脑之间的差异。你的权利可能不是你服务器端的权限问题，但可能是这台电脑的安全问题。很多事情都可能导致这样的错误：

你成功的电脑与window浏览器有什么区别吗，例如：Mozilla、Chrome等...防火墙、电脑上的用户控制设置？由于公司对其机器设置了自定义限制，因此很难得出结论。并且您提供的信息没有解释深度。

还可以通过 ftp 检查服务器上的错误日志，这可能会给你一个提示，为什么这个任务对于有问题的 pc 不成功，有很多因素需要考虑，看看，让我们知道你的进展，如果你管理要解决这个问题，请为其他人留下答案。

# html - 纯 HTML WebDAV 客户端

> ID：10030261
> 
> 赞同：11
> 
> 时间：2012-04-05T14:11:31.107
> 
> 标签：html, webdav

是否有开源的纯客户端 HTML/CSS/JS webdav 客户端提供一个不错的用户界面来浏览远程 webdav 文件系统，以及上传和下载？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-05-07T06:17:42.597

***免费的 WebDAV 客户端解决方案***:) 。

**BeeHub - 功能齐全的客户端和服务器**

*   源代码：[https ://github.com/sara-nl/js-webdav-client](https://github.com/sara-nl/js-webdav-client)
*   文档：[http ://sara-nl.github.io/js-webdav-client/](http://sara-nl.github.io/js-webdav-client/)
*   有关代码示例，请参阅[单元测试：](https://github.com/sara-nl/js-webdav-client/tree/master/tests/unittests)

*   设计用于[BeeHub - 您可以](http://beehub.nl/system/)[在此处](https://github.com/sara-nl/BeeHub)找到 BeeHub 源。

更多的

*   [https://github.com/aslakhellesoy/webdavjs](https://github.com/aslakhellesoy/webdavjs)
*   [https://github.com/frsela/jsDAVlib](https://github.com/frsela/jsDAVlib)
*   [https://github.com/xstefanox/Carcass](https://github.com/xstefanox/Carcass)
*   [https://github.com/svogler/jsdavclient](https://github.com/svogler/jsdavclient)
*   [https://github.com/Kysic/webdavFileTree](https://github.com/Kysic/webdavFileTree)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-06T12:58:37.260

**付费解决方案：**

你可以试试`[**Ajax File Browser**](http://www.webdavsystem.com/ajaxfilebrowser)`。它支持 HTML5 从本地文件系统拖放和多文件上传。而且，最重要的是，它是使用 JavaScript 构建的。

**免费解决方案：**

你也可以试试`[**AjaXplorer**](http://sourceforge.net/projects/ajaxplorer/)`。它也是使用 HTML5 构建的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T01:50:58.050

这在纯 HTML/JS 中是可能的。WebDAV 是一个扩展的 HTTP 协议，因此使用 Ajax 可以访问在线文件。

# winapi - 使用 CeRunAppAtTime 查看应用程序是否已计划运行

> ID：10030262
> 
> 赞同：1
> 
> 时间：2012-04-05T14:11:36.207
> 
> 标签：winapi, windows-mobile, windows-mobile-6

我有一个应用程序，它在完成工作后使用 CeRunAppAtTime 安排自己在 x 分钟后再次运行。

我们注意到，如果用户也手动运行应用程序，那么我们最终可能会安排应用程序在未来多次运行。

是否可以获得计划运行并删除它们的应用程序列表？

我试过搜索这个但没有任何成功，但我不确定我应该搜索什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T02:42:34.937

不要使用`CeRunAppAtTime`- 它不能做你想做的事。而是使用[`CeSetUserNotificationEx`](http://msdn.microsoft.com/en-us/library/ms908105.aspx)，然后您可以使用`CeGetUSerNotificationHandles`和`CeGetUserNotification`API进行查询

# c# - .net Computer sleep and Disposed 不被调用

> ID：10030263
> 
> 赞同：0
> 
> 时间：2012-04-05T14:11:36.300
> 
> 标签：c#, .net, multithreading, dispose

在我的应用程序中，我从自定义用户控件启动了一个工作线程。当控件被释放时，我中止了线程。问题是当计算机进入睡眠状态并且用户关闭应用程序时，我的控件不再被释放。

如果我在我的应用程序中启动一个线程，如何在应用程序关闭时强制它停止？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T14:22:56.637

> 当控件被释放时，我中止了线程。

馊主意。中止线程会（并且经常会）破坏数据结构等内存。

> 如果我在我的应用程序中启动一个线程，如何在应用程序关闭时强制它停止？

您需要设置`Thread.IsBackground = true`.

# c++ - 多媒体定时器？

> ID：10030265
> 
> 赞同：0
> 
> 时间：2012-04-05T14:11:45.690
> 
> 标签：c++, windows, linker

我试图让这个准确的计时器在 VS2008、Windows XP（最终是 Server 2008）上从以下示例中运行：

[http://technology.chtsai.org/w98timer/](http://technology.chtsai.org/w98timer/)

但是我收到以下错误：

*   错误 LNK2019：未解析的外部符号 _ *imp* _timeEndPeriod@4
*   错误 LNK2019：未解析的外部符号 _ *imp* _timeGetTime@0
*   错误 LNK2019：未解析的外部符号_imp *_timeBeginPeriod* @4
*   错误 LNK2019：无法解析的外部符号 _ *imp* _timeGetDevCaps@8

有人可以建议吗？

我只想在 Windows 上为 C++ 提供一个简单、准确、毫秒计时的示例。

```
#include <stdio.h>
#include <windows.h>
#include <mmsystem.h>
#include "stdafx.h"

void 
main (void)
{
  TIMECAPS resolution;
  DWORD start, finish, duration, i;

  if (timeGetDevCaps (&resolution, sizeof (TIMECAPS)) == TIMERR_NOERROR)
    {
      printf ("Minimum supported resolution = %d\n", resolution.wPeriodMin);
      printf ("Maximum supported resolution = %d\n", resolution.wPeriodMax);
    }

  if (resolution.wPeriodMin <= 1)
    {
      if (timeBeginPeriod (1) == TIMERR_NOERROR)
    {
      for (i = 100; i <= 120; i++)
        {
          start = timeGetTime ();
          while (timeGetTime () < (start + i));
          finish = timeGetTime ();
          duration = finish - start;
          printf ("expected:%d  actual:%ld\n", i, duration);
        }
      timeEndPeriod (1);
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:16:03.117

正如[MSDN 建议](http://msdn.microsoft.com/en-us/library/windows/desktop/dd757624%28v=vs.85%29.aspx)的那样，您需要将其包含`winmm.lib`到项目中。因此，将以下行添加到源代码中的任何位置：

```
#pragma comment(lib, "winmm.lib") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T14:15:05.940

查看[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/dd757627%28v=vs.85%29.aspx)，您似乎需要添加`Winmm.lib`到其他库以链接到您的项目属性中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T14:15:05.983

您需要添加`winmm.lib`到链接器依赖项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T14:15:35.133

这些函数在 winmm.dll 中定义。您需要将 winmm.lib 添加到您的链接列表中。

# objective-c - 如何从 StoryBoard 中连接到笔尖？

> ID：10030266
> 
> 赞同：0
> 
> 时间：2012-04-05T14:11:47.640
> 
> 标签：objective-c, xcode4

我有一些代码 ( [ILColorPicker](https://github.com/jawngee/ILColorPicker) ) 想安装到我的 iPad 应用程序中，该应用程序使用 StoryBoards。作者的指示说：

*   在视图控制器的 XIB 中，添加一个 UIView，然后将它的类设置为 ILColorPickerView
*   通过选择 UIView 并单击最后一个选项卡，将 ILColorPickerView 的委托属性连接到 Interface Builder 中的视图控制器。然后单击“委托”旁边的圆圈并将其拖动到左侧的“文件所有者”。
*   实现委托方法：colorPicked:(UIColor *)color forPicker:(ILColorPickerView *)picker

当我使用 Storyboard 并且没有委托或“文件所有者”时，我该怎么做？我创建了一个带有子视图的类来保存选择器，但现在看到我不需要子视图。考虑到这一点，我如何将它连接到我的控制器的视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:16:29.930

文件所有者是视图控制器。您不需要 Nib 文件，您可以使用带有 ViewController 的场景，然后按照那里的说明进行操作。您可以向您的应用程序添加一个类（UIViewController 类型），然后将该类与情节提要中的 VC 相关联。该类将是“文件所有者”。

# php - 防止重复值进入 mysql 数据库 - 如果某些列与最后插入的行相似

> ID：10030267
> 
> 赞同：2
> 
> 时间：2012-04-05T14:11:48.390
> 
> 标签：php, mysql, duplicates, latitude-longitude

嗨，我正在将纬度、经度值插入数据库。

```
INSERT INTO `Tracks` (`Latitude`, `Longitude`, `Time`, `Date`, `Speed`) VALUES ('$Latitude', '$Longitude', '$UTC_Time', '$UTC_Date', '$Speed'); 
```

gps 接收器倾向于多次发送相同的 lat、long 值。在插入之前，我试图检查最后插入的行的 lat long 列，如果它们匹配，则不应执行查询。否则应该执行查询。我目前无法做到这一点！如果数据库中没有行并且代码检查最后插入的行怎么办？

此外，用户可能会在稍后再次来到同一位置，因此我们不应该检查整个数据库是否有重复的 lat、long 值。那我该怎么做呢？我可以在不检查数据库的情况下在 php 本身中执行此操作吗？有什么想法/建议吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:16:22.450

如果你使用 MySQL，我能想到的一件事就是改变

> `INSERT INTO`跟踪`(`纬度`,`经度`,`时间`,`速度`) > VALUES ('$Latitude', '$Longitude', '$UTC_Time', '$UTC_Date', '$Speed');`

进入

> `INSERT IGNORE INTO`跟踪`(`纬度`,`经度`,`时间`,`速度`) > VALUES ('$Latitude', '$Longitude', '$UTC_Time', '$UTC_Date', '$Speed');`

并`PRIMARY KEY`使用这两个字段（纬度和经度）设置 a。

由于您指定`without checking the db`的是我能想到的唯一解决方案。如果您尝试插入一对相等的`Langitude, Latitude` `INSERT IGNORE`语句，则将被忽略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:16:08.480

> 我可以在不检查数据库的情况下在 php 本身中执行此操作吗？

如果您想检查该值是否已经存在，您将不得不以一种或另一种方式查询数据库。

您可以`SELECT`对最后一条记录执行 a 并在 PHP 中比较它的值，或者您可以尝试将值插入数据库，如果值已经存在，则选择忽略插入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T14:16:38.883

使用替换而不是插入。您必须使列在数据库中必须是唯一的。

此外，您使用 mysql 的方式存在巨大的安全风险。您至少可以使用[mysql_real_escape_string](http://nl3.php.net/manual/en/function.mysql-real-escape-string.php)。更好的是看一下准备好的陈述。

# django - 在 django 中创建多值自定义字段模型

> ID：10030275
> 
> 赞同：0
> 
> 时间：2012-04-05T14:12:25.677
> 
> 标签：django, django-models

我正在 django 中建立一个数据库，但我遇到了一些障碍，

我正在尝试做这样的事情：有一个对象，该对象有两个索引。每个索引都有两个值。这可能听起来令人困惑，所以让我这样说：

书有索引 alpha 和索引 Beta 索引 alpha 位于位置 (4,3) 索引 beta 位于位置 (7,4)
请注意，位置是单独存储的，而不是整数形式 ((4,3) 而不是 "43 ")

为了在数据库上实现这一点，我为索引和书建立了一个类，索引中有一个外键。像这样：

```
class index(models.Model):
    book = models.ForeignKey(Books)
    int1 = models.IntegerField()
    int2 = models.IntegerField() 
```

但是，我想简化这一点。当我尝试为索引类提供其他用途时，它会变得一团糟。（不专门用于书籍类）

理想情况下，我会创建一个自定义的多值字段，以后我可以在我的书籍类中自由使用，如下所示：

```
class Book(models.Model):
      title=...
      publisher= ...
      indexA=customMulti-valueField() 
```

这可能吗？我将如何定义这样的字段？我查看了有关自定义字段创建的 django 文档，但我认为它不能解决我的问题。

这里主要关注的是有一个 mysql 数据类型可以存储类似于 python 元组的东西。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T17:44:00.097

如果它只有 2 个索引，我只需将它们存储在 IntegerFields 中并创建一个返回它们的方法，如下所示：

```
class Book(models.Model):
    title=...
    publisher= ...
    indexAX=models.IntegerField()
    indexAY=models.IntegerField()
    indexBX=models.IntegerField()
    indexBY=models.IntegerField()

    def indexA(self):
        return self.indexAX, self.indexAY

    def indexB(self):
        return self.indexBX, self.indexBY 
```

然后你可以像这样使用它：

```
b = Book.objects.create('Title', 'Publisher', 1, 2, 3, 4)
ax, ay = b.indexA()
bx, by = b.indexB() 
```

# jquery - 如何将数据关联到 jstree 中的节点？

> ID：10030279
> 
> 赞同：21
> 
> 时间：2012-04-05T14:12:47.277
> 
> 标签：jquery, jquery-plugins, jstree

```
$("#ifTree").jstree({
            "plugins" : ["themes","html_data","ui","crrm"], 
            "themes" : {
                    "theme" : "apple",
                    "dots" : true,
                    "icons" : false
            }           
    });

    $("#createIf_c").click(function () { 
        $("#ifTree").jstree("create",null,"inside",  { "data" :{ title:"if",value:"expression"} },
                function() {}, true);
    });
$("#display").click(function(){
            var a = $.jstree._focused().get_selected();
            alert(a.attr("value"));
    }); 
```

在上面的代码中，我创建了一个 jstree，单击 ID 为 #createIf_c 的按钮后，我添加了一个标题为“if”的节点，但由于我希望更多数据与该节点相关联，因此我添加了更多属性给它在创建节点时。接下来，当我尝试访问此关联数据时，此处为“值”，然后我收到警报“未定义”。那么是否有不同的方式将数据与节点相关联？或者访问节点关联数据的另一种方式是jstree？..请帮助....

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-04-29T08:23:23.920

你可以把你的额外数据放在 JSON node.data**这没有记录**
![在此处输入图像描述](../Images/9850d73bbc808a1e76636848175996df.png)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-10-27T09:54:18.277

请参考作者的[回答](https://groups.google.com/forum/#!topic/jstree/qBM2ZCAkPL4)。

您可以通过 编辑信息`$('#tree').jstree(true).get_node("some_node_id")`，并通过 将额外数据作为 json 发布`$('#tree').jstree(true).get_json("some_node_id")`。

```
You can add anything you want to the data object. Like:
{ "id" : "some_node_id" "text" : "some node", ... "data" : { "foo" : "bar", "example_array" : ["1",2,true], "obj" : {"asdf":"asdf1"}  } ...

And later on you can retrieve it like so:
$('#tree').jstree(true).get_node("some_node_id").data.obj.asdf; // this would equal "asdf1"
$('#tree').jstree(true).get_node("some_node_id").data.example_array; // this would be an array: ["1",2,true]

Setting other values is just as simple - you are working with a normal object:
$('#tree').jstree(true).get_node("some_node_id").data.obj.asdf = "some other value";
$('#tree').jstree(true).get_node("some_node_id").data.example_array = "I do not want this an array anymore";
$('#tree').jstree(true).get_node("some_node_id").data.obj.new_property = 1024; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-29T13:50:41.993

最简单的方法就是向 html 元素添加属性，即

```
 var node = $.jstree._focused().get_selected(); //get the selected node or which ever you want the data to be associated with
    node.attr("expression","xyz"); //add an attribute (name,value) here, name-expression and value-xyz 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-29T19:39:20.347

**将数据关联到节点的正确方法如下：**

如果您要添加更多数据，即属性，则在**“attr”** 属性下提到所有属性（名称、值）

“**属性**”：{属性名称1：“属性值1”，属性名称2：“属性值2”……}

```
 $("#createIf_c").click(function () { 
 $("#ifTree").jstree("create",null,"inside",
   { "data" : "testNodeName", 
      "attr": { title:"if",value:"expression"} },  function() {}, true);
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-08-05T19:38:42.400

使用 jstree v3，您可以使用插件关联属性，如下所示：-

```
// create instance
var inst = $("#tree-id").jstree();
// create node definition
var node = {
    id: "new_node_id",
    text: "New Node",
    li_attr: { "data-files": "false" },
    a_attr: { "data-url": "some_url" }
};
// create node
var newNodeId = inst.create_node("#", node); 
```

节点参数的预期格式（来自源注释）：

```
// Expected format of the node (there are no required fields)
//{
//  id: "string" // will be autogenerated if omitted
//  text: "string" // node text
//  icon: "string" // string for custom
//  state: {
//      opened: boolean  // is the node open
//      disabled: boolean  // is the node disabled
//      selected: boolean  // is the node selected
//  },
//  children: []  // array of strings or objects
//  li_attr: { }  // attributes for the generated LI node
//  a_attr: { }  // attributes for the generated A node
//} 
```

以及`create_node`参数的预期格式：

```
// create_node(par, node, pos, callback, is_loaded)

// par (object) - the parent node (to create a root node use "#" (string) or `null`)
// node (object) - the data for new node (valid JSON object, or a simple string with the name)
// pos (object) - index to insert the node, "first" and "last" are supported, default is "last"
// callback (function) - a function to be called once the node is created
// is_loaded (boolean) - internal argument indicating if the parent node was succesfully loaded

// returns (string) - the ID of the newly create node 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-20T10:05:48.687

**要关联来自 HTML 定义的数据：**

如果要使用树的 HTML 定义关联数据，请使用：

```
<li id="treesiteadmin-serverStatus" data-ic='{"form":"site.serverstatus"}' data-jstree='{"icon":"glyphicons glyphicons-server"}'>Stato del server</li> 
```

当前选定节点的“数据”属性将是：

```
{"jstree":{"icon":"glyphicons glyphicons-server"},"ic":{"form":"site.serverstatus"}} 
```

[查看结果 - 选定节点的“数据”属性](https://i.stack.imgur.com/b6I9k.jpg)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-13T11:24:20.740

```
div id="tree_1" class="tree-demo">
    <ul>
        <li data-jstree='{ "opened" : false }' id="c67"> Sıcak İçecekler
            <ul>
                <li data-jstree='{ "type" : "file", "selected" : false }' id="500">Çay</li>
                <li data-jstree='{ "type" : "file", "selected" : false }' id="501">Fincan Çay</li>

            </ul>
        </li>
        <li data-jstree='{ "opened" : true }' id="c68"> Soğuk İçecekler
            <ul>
                <li data-jstree='{ "type" : "file", "selected" : true }' id="514">Ayran</li>
                <li data-jstree='{ "type" : "file", "selected" : true }' id="515">Kola</li>
                <li data-jstree='{ "type" : "file", "selected" : true }' id="516">Meyveli Gazoz</li>                    
            </ul>
        </li>
    </ul>
</div> 
```

`<ul>`如果你想通过and`<li>`元素来解决它，这个 html 非常适合自定义 id 。

# orm - Dapper.Rainbow VS Dapper.Contrib

> ID：10030285
> 
> 赞同：72
> 
> 时间：2012-04-05T14:12:58.807
> 
> 标签：orm, dapper, dapper-rainbow

有人可以解释一下**Dapper.Rainbow**与**Dapper.Contrib**之间的区别吗？

我的意思是你什么时候使用 Dapper.Contrib 的 SqlMapperExtensions.cs，什么时候应该使用 Dapper.Rainbow？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-10-24T15:14:02.273

我已经使用 Dapper 有一段时间了，我想知道[Contrib](http://code.google.com/p/dapper-dot-net/source/browse/Dapper.Contrib/SqlMapperExtensions.cs)和[Rainbow](http://code.google.com/p/dapper-dot-net/source/browse/Dapper.Rainbow/Database.cs)项目是关于我自己的。经过一些代码审查，以下是我对它们的使用的想法：

# Dapper.Contrib

Contrib 在 IDbConnection 接口上提供了一组扩展方法，用于基本的 CRUD 操作：

*   得到
*   插入
*   更新
*   删除

Contrib 的关键组件是它为您的实体提供跟踪，以识别是否进行了更改。

例如，使用带有接口的 Get 方法作为类型约束将返回一个动态生成的代理类，其中包含一个内部字典以跟踪哪些属性已更改。

然后，您可以使用 Update 方法生成仅更新那些已更改的属性所需的 SQL。

**主要警告**：要获得 Contrib 的跟踪优势，您必须使用接口作为类型约束以允许生成代理类。

# Dapper.Rainbow

Rainbow 是一个抽象类，您可以将其用作 Dapper 类的基类，以提供基本的 CRUD 操作：

*   得到
*   插入
*   更新
*   删除

以及一些常用的方法，例如First（获取表中的第一条记录）和All（获取表中的所有结果记录）。

出于所有意图和目的，Rainbow 基本上是您最常用的数据库交互的包装器，它将基于属性名称和类型约束构建无聊的 SQL。

例如，通过 Get 操作，Rainbow 将构建一个普通 SQL 查询并返回所有列，然后将这些值映射回用作约束的类型。

同样，插入/更新方法将根据类型约束的属性名称动态构建插入/更新所需的 SQL。

**主要警告**：Rainbow 期望您的所有表都有一个名为“Id”的标识列。

# 差异？

Contrib 和 Rainbow 之间的主要区别是 (IMO)，一个跟踪实体的变化，另一个不跟踪：

*   当您希望能够跟踪实体中的更改时，请使用 Contrib。
*   当您想使用更多符合标准 ADO.NET 方法的内容时，请使用 Rainbow。

*附带说明：我希望我早点研究过 Rainbow，因为我已经建立了一个与 Dapper 一起使用的非常相似的基类。*

* * *

从文章和引用@anthonyv 引用：[那个烦人的 INSERT 问题，将数据输入数据库](http://samsaffron.com/archive/2012/01/16/that-annoying-insert-problem-getting-data-into-the-db-using-dapper)

> 现在还有 2 个其他 API 可供您选择（**除了 Rainbow 之外**）（用于 CRUD） **Dapper.Contrib**和**Dapper Extensions**。我不认为一刀切。根据您的问题和偏好，可能会有最适合您的 API。我试图提出一些选择。没有幸运的“最好的方法”来解决世界上的每一个问题。

我怀疑 Sam 在上述引用和相关博客文章中试图传达的内容是：您的场景可能需要大量自定义映射（使用 vanilla Dapper），或者它可能需要跟踪实体更改（使用 Contrib），或者您可能有常见的使用场景（使用 Rainbow），或者您可能想要使用它们的组合。或者甚至不使用 Dapper。YMMV。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2016-10-24T13:27:38.460

[Adam Anderson 的这篇文章](https://web.archive.org/web/20160807040540/http://blog.falafel.com/implementing-a-generic-repository-with-dapper-extensions/)描述了几个 CRUD Dapper 扩展库之间的区别：

*   [Dapper Contrib](https://github.com/StackExchange/dapper-dot-net/tree/master/Dapper.Contrib)（自动更改跟踪 - 仅在脏与否时，用于自定义映射的属性，不支持复合键，不支持手动键）
*   [Dapper Rainbow](https://github.com/StackExchange/dapper-dot-net/tree/master/Dapper.Rainbow)（使用 Snapshotter 进行手动更改跟踪，自定义映射的属性，不支持复合键，不支持手动键）
*   [Dapper 扩展](https://github.com/tmsmith/Dapper-Extensions)（无更改跟踪、自定义映射的流畅配置、支持复合键、支持手动键规范），还包括用于简单查询的谓词系统（注意：**不推荐使用**- 不支持最新的 Dapper 版本或 .NET 核心）
*   [Dapper SimpleCRUD](https://github.com/ericdc1/Dapper.SimpleCRUD)（无更改跟踪、自定义映射的属性、无复合键支持、支持手动键规范），还包括过滤/分页助手、异步支持、自动 POCO 类生成（通过 T4）

[![Dapper 扩展差异](../Images/6297f31523133c55384ee92cafec850f.png)](https://web.archive.org/web/20160807040540/http://blog.falafel.com/implementing-a-generic-repository-with-dapper-extensions/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T02:07:42.427

Sam 在他的帖子中详细描述了不同之处 - [http://samsaffron.com/archive/2012/01/16/that-annoying-insert-problem-getting-data-into-the-db-using-dapper](http://samsaffron.com/archive/2012/01/16/that-annoying-insert-problem-getting-data-into-the-db-using-dapper)。

基本上，它通常不是 1 尺寸适合所有答案，由我们根据您的需要决定采用哪种方法：

> 现在还有 2 个其他 API 可供您选择（**除了 Rainbow 之外**）（用于 CRUD） **Dapper.Contrib**和**Dapper Extensions**。我不认为一刀切。根据您的问题和偏好，可能会有最适合您的 API。我试图提出一些选择。没有幸运的“最好的方法”来解决世界上的每一个问题。

# javascript - window.onbeforeunload 有什么不好的副作用没有返回值吗？

> ID：10030288
> 
> 赞同：4
> 
> 时间：2012-04-05T14:13:17.840
> 
> 标签：javascript, internet-explorer, firefox, google-chrome, browser

我知道在 Chrome 和 FF 中，如果 window.onbeforeunload 返回 null，则不会弹出对话框。但在 IE 中，它会弹出消息“null”。为了使 IE 不创建弹出窗口，window.onbeforeunload 应该不返回任何内容。但是，在 Chrome 和 FF 中，什么都不返回有任何其他副作用吗？如果不是，为什么会有人费心写'return null;' 首先？

例如，这样做：

```
window.onbeforeunload = function() { 
  if (shouldNotWarnBeforeUnload)
    { return null; }
  else 
    { return ('Are you sure you want to leave the page?'); }
  return null;
}; 
```

还有这个

```
window.onbeforeunload = function() { 
  if (shouldNotWarnBeforeUnload)
    {  }
  else 
    { return ('Are you sure you want to leave the page?'); }
}; 
```

在 Chrome 中表现不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T15:56:34.420

在 Chrome 中，返回`null`等同于不返回任何内容或`undefined`.
当什么都不返回时，不会弹出对话框。

注意：在您的第一个示例中，永远不会到达事件侦听器的最后一行，因为`if`or`else`块返回。

而不是返回`null`等`undefined`，只是否定条件**：http: [//jsfiddle.net/f6uTw/](http://jsfiddle.net/f6uTw/)**

```
window.onbeforeunload = function() { 
    if (!shouldNotWarnBeforeUnload) {
        return 'Are you sure you want to leave the page?';
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-20T14:53:50.157

在 Internet Explorer 11 上，`null`仍会创建`beforeunload`弹出窗口。那些以不同方式工作的罕见实例`undefined`之一`null`。

[![ie11 显示值为 null 的 onbeforeunload 弹出窗口](../Images/a92e9e708329886a6be2cc6d3b8b6365.png)](https://i.stack.imgur.com/mmGpd.png)

# linux - 使用 Openssl 读取多个证书

> ID：10030294
> 
> 赞同：2
> 
> 时间：2012-04-05T14:13:38.750
> 
> 标签：linux, shell, openssl

我想使用以下命令：

```
openssl x509 -noout -in /etc/pki/tls/certs/cert1.pem -enddate  
openssl x509 -noout -in /etc/pki/tls/certs/cert2.pem -enddate  
openssl x509 -noout -in /etc/pki/tls/certs/certN.pem -enddate 
```

有没有办法使用通配符读取所有证书？例如，

```
openssl x509 -noout -in /etc/pki/tls/certs/*.pem -enddate 
```

任何帮助将非常感激。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T18:45:49.677

使用 shell scriptlet：

```
#! /bin/sh

for file in /etc/pki/tls/certs/*.pem; do
   echo -n "$file: "
   openssl x509 -noout -in "$file" -enddate
done 
```

把它放在一个文件中，`certexpires.sh`然后你可以运行它：

```
sh certexpires.sh 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-01T12:04:00.743

我对你的情况的回答是这个命令：

```
ls /etc/pki/tls/certs/cert*.pem | xargs -L1 openssl x509 -noout -enddate -in 
```

**解释**

在第一步中，我列出了我想要解析的证书。例如在我的情况下，它可能是这样的：

```
[root@vpsfree certs]# ls -1 */*.crt
ewsport.org/ewsport.org.crt
hxpro.cz/hxpro.crt
jaguars.cz/jaguars.crt
koudelka.photography/koudelka.photography.crt
unicycle-hockey.cz/unicycle-hockey.cz.crt
unipragga.cz/unipragga.cz.crt 
```

下一步，我想从每个人那里获取到期日期。

```
[root@vpsfree certs]# openssl x509 -noout -enddate -in hxpro.cz/hxpro.crt
notAfter=Apr 24 11:29:21 2017 GMT 
```

现在我可以使用 xargs 将第一个命令的输出发送到第二个命令。

```
[root@vpsfree certs]# ls -1 */*.crt | xargs -L1 openssl x509 -noout -enddate -in
notAfter=Mar 31 15:08:20 2017 GMT
notAfter=Apr 24 11:29:21 2017 GMT
notAfter=Mar 23 21:23:42 2017 GMT
notAfter=Apr 24 11:50:32 2017 GMT
notAfter=Dec 11 16:32:41 2016 GMT
notAfter=Mar 20 19:44:17 2017 GMT 
```

我使用了选项 -L1，因为 openssl 命令只需要一个 -in 文件作为输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-01T11:58:45.187

我为我的终端创建了一个别名，该别名在文件夹中的整个文件上运行（您可以将其调整为仅在 pem 扩展名上运行，但这是我的改编）

```
alias ssl-opemu='_(){ for i in *; do openssl x509 -in $i -noout -text; done; }; _' 
```

我几乎可以肯定我已经从以前的线程中继承了这个，所以他们的原始所有者的所有权利。:)

# jquery - 页面加载后重新初始化 jQuery 小册子插件

> ID：10030297
> 
> 赞同：0
> 
> 时间：2012-04-05T14:13:52.697
> 
> 标签：jquery, plugins, initialization, options

参考：jQuery 小册子 - [http://builtbywill.com/code/booklet/options](http://builtbywill.com/code/booklet/options)

我正在使用带有自定义选项哈希的 jQuery 小册子插件：（例如`$(elem).booklet({props: values})`）。

**当前选项**：

当关闭设置为 true 时，页面会根据需要在关闭书籍的情况下加载，但是关闭的 true 选项也会在到达书籍末尾时关闭书籍。

**所需要求**：

1.  我需要在书关闭的情况下加载页面
2.  当到达书的末尾时，将书打开到 2 页展开（仍然提供将页面翻到书前面的功能）

对此的任何帮助/建议将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:22:13.503

其中一个选项是将空白图像添加为第一页。这会将其模拟为右侧只有一页。我们当然可以通过修改脚本来实现这一点，但我认为这是最快的方法。让我知道这个是否奏效。

# c# - WPF WebBrowser 中的脚本警告

> ID：10030300
> 
> 赞同：1
> 
> 时间：2012-04-05T14:14:08.880
> 
> 标签：c#, wpf

您好，我想要一个很棒的 WPF 中的 HTML 编辑器。因此，为此我所做的就是在 WPF 窗口中添加了一个 WebBrowser，并将其导航到带有 TinyMCE html 编辑器的 html 页面。但是，当我运行该应用程序时，浏览器控件会显示脚本警告：（请参阅此 MSDN 线程以获取图像[http://social.msdn.microsoft.com/Forums/en/wpf/thread/cbc3eae6-dbc4-4074- befc-902d990fbaae](http://social.msdn.microsoft.com/Forums/en/wpf/thread/cbc3eae6-dbc4-4074-befc-902d990fbaae) )

我在这里尝试了 Simon Mourier 在 StackOverflow 上发布的 COM 代码（http://stackoverflow.com/questions/6138199/wpf-webbrowser-control-how-to-supress-script-errors）

现在我的代码如下所示：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Runtime.InteropServices;
using System.Reflection;

namespace TinyMceWpf
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            webBrowser1.Navigated += new NavigatedEventHandler(webBrowser1_Navigated);
            webBrowser1.Navigate(new
Uri(@"C:\Users\MAHESH\Desktop\TechNode\WPF\MytTechDos\TinyMceWpf\TinyMceWpf\TinyMceWpf\edit.html"));
        }

        private void btnGetHtml_Click(object sender, RoutedEventArgs e)
        {
            string editHtml = this.webBrowser1.InvokeScript("getContent").ToString();
            MessageBox.Show(editHtml);
        }

    public static void SetSilent(WebBrowser browser, bool silent)
    {
        if (browser == null)
            throw new ArgumentNullException("browser");

        // get an IWebBrowser2 from the document
        IOleServiceProvider sp = browser.Document as IOleServiceProvider;
        if (sp != null)
        {
            Guid IID_IWebBrowserApp = new Guid("0002DF05-0000-0000-C000-000000000046");
            Guid IID_IWebBrowser2 = new Guid("D30C1661-CDAF-11d0-8A3E-00C04FC9E26E");

            object webBrowser;
            sp.QueryService(ref IID_IWebBrowserApp, ref IID_IWebBrowser2, out webBrowser);
            if (webBrowser != null)
            {
                webBrowser.GetType().InvokeMember("Silent", BindingFlags.Instance | BindingFlags.Public | BindingFlags.PutDispProperty, null, webBrowser, new object[] { silent });
            }
        }
    }

    [ComImport, Guid("6D5140C1-7436-11CE-8034-00AA006009FA"), InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
    private interface IOleServiceProvider
    {
        [PreserveSig]
        int QueryService([In] ref Guid guidService, [In] ref Guid riid, [MarshalAs(UnmanagedType.IDispatch)] out object ppvObject);
    }

    private void webBrowser1_Navigated(object sender, NavigationEventArgs e)
    {
        SetSilent(webBrowser1, true);
    }
}
} 
```

但直到现在它仍然没有工作。我应该怎么办？请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T11:47:37.807

在您的 SetSilent 方法中使用此代码。

```
FieldInfo webBrowserInfo = browser.GetType().GetField("_axIWebBrowser2", BindingFlags.Instance | BindingFlags.NonPublic);
object comWebBrowser = null;

if (webBrowserInfo != null)
   comWebBrowser = webBrowserInfo.GetValue(browser);

if (comWebBrowser != null)
   comWebBrowser.GetType().InvokeMember("Silent", BindingFlags.SetProperty, null, comWebBrowser, new object[] { silent }); 
```

# php - 清除文件上传的内容

> ID：10030305
> 
> 赞同：1
> 
> 时间：2012-04-05T14:14:38.280
> 
> 标签：php, javascript, file-upload, upload

我想清除文件上传控件的内容。我怎样才能做到这一点

任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:19:34.610

我认为您的意思是要清除文件输入的值对吗？

```
document.getElementById('file_input_id').value = ''; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:31:21.263

如果您要清除输入对话框（jQuery）：

```
$('form')[0].reset(); 
```

为我工作

# mysql - MySQL INNER JOIN ON (Basic Q) 的正确顺序语法

> ID：10030306
> 
> 赞同：0
> 
> 时间：2012-04-05T14:14:41.390
> 
> 标签：mysql, inner-join

我有以下 MySQL 查询语句：

```
SELECT * 
FROM table1 INNER JOIN table2 
    ON table1.id = table2.id 
WHERE 1 
```

如果我的内部加入声明是`table1.id = table2.id`vs.有关系`table2.id = table1.id`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:23:48.243

您提供的两个选项之间没有功能或性能差异。

这纯粹是一种风格选择。

我个人更喜欢这种风格，但我敢肯定还有其他人的做法不同：

```
SELECT ... 
FROM table1 
INNER JOIN table2 ON table2.id = table1.id 
INNER JOIN table3 ON table3.id = table1.id 
WHERE ... 
```

# wordpress - 将电子表格中的数据以及自定义分类法及其术语导入 wordpress 数据库

> ID：10030309
> 
> 赞同：2
> 
> 时间：2012-04-05T14:14:56.150
> 
> 标签：wordpress

我正在将一个大型数据库从 Excel 电子表格导入到 wordpress 数据库中。我打算通过创建一个新表来手动执行此操作，但决定将其导入现有的 wordpress 框架，因为它允许我在 wordpress 后端手动更改信息。

当我意识到该表没有术语列时，我正在将所有 2000 行导入 wp_posts 表。这些术语存储在其他表中。

我的问题是......我如何将电子表格导入数据库并保留所有重要数据，尤其是术语，因为我的网站通过“术语”查询所有信息并使用 jQuery 选项卡将不同的术语显示为子-类别。

我的信息如下所示：

post-title(title)---category(term)---description(content)---imageUrl---price

注意：我将在 wp_posts 表中创建一个单独的列来处理价格或我需要引入的任何其他信息，我只是不确定如何将术语信息放入相应的表中......

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T16:39:09.610

不要将数据直接插入表中。调用[wp_insert_post](http://codex.wordpress.org/Function_Reference/wp_insert_post) () 函数并传入正确的值。它将处理所有数据库依赖项。

要插入元数据，请使用 add_postmeta() 或 update_postmeta() 函数。

# knockout.js - 继续下拉框问题

> ID：10030315
> 
> 赞同：1
> 
> 时间：2012-04-05T14:15:08.427
> 
> 标签：knockout.js

我的级联选择仍然存在问题，尤其是 optionsCaption。

如果我在父选择中选择“选择海报”选项，则会收到此错误：

Microsoft JScript 运行时错误：无法解析绑定。消息：TypeError：无法获取属性“ClientSite”的值：对象为空或未定义；绑定值：options: `enter code here`selectedPoster().ClientSite, optionsText: 'ClientName', optionsCaption:select2OptionsCaption(), value: selectedClient, disable: (selectedPoster().ClientSite==undefined)

如果有人可以帮助我修复它，我将不胜感激。

干杯 C

`enter code here`

```
 var objPoster1 = new Dockethub.Services.PosterDdl();
    objPoster1.SiteId = -1;
    objPoster1.SiteName = "";

    var posterArray = ([
                           { SiteId: 1,
                             SiteName: "Mail",
                             ClientSite:[
                                { ClientId: 1, ClientName: "Mail Client A" }, { ClientId: 2, ClientName: "Mail Client B"}]  
                           },

                           { SiteId: 2,
                             SiteName: "DSAC",
                             ClientSite:[
                                { ClientId: 1, ClientName: "DSAC Client A"}]
                         },

                         {  SiteId: 3,
                            SiteName: "Bank",
                            ClientSite:
                                [{}]
                    }          
    ]);

    //var posterArray = ([]);
    //var posterArray = ([{ SiteId: 1, SiteName: "Royal Mail" }, { SiteId: 2, SiteName: "DSAC"}]);
    //var posterArray = ([{ SiteId: 1, SiteName: "Royal Mail",  ClientSite:[{}] }]);
    //posterArray.push(objPoster1);

    // VIEW MODEL START
                    var ViewModel = function () {
                        var self = this;

                        // Poster 
                        self.PosterList = ko.observableArray([]);
                        ko.mapping.fromJS(posterArray, null, self.PosterList);

                        self.selectedPoster = ko.observable(null);
                        self.selectedClient = ko.observable(null);

                        self.select1OptionsCaption = ko.computed(function () {
                            if (this.PosterList().length == 0) {
                                return 'No Posters';
                            } else {
                                return this.PosterList().length == 1 ? '' : 'Select a Poster';
                            }

                        }, self);

                        self.select2OptionsCaption = ko.computed(function () {
                            if (this.selectedPoster() == null || ko.toJS(this.selectedPoster().ClientSite) == undefined || ko.toJS(this.selectedPoster().ClientSite)[0].ClientName == null) {
                                return 'No Clients';
                            }
                            else {
                                if (this.selectedPoster() != null && ko.toJS(this.selectedPoster().ClientSite).length > 1) {
                                    return 'Select a client';
                                }
                                else if (this.selectedPoster() != null && ko.toJS(this.selectedPoster().ClientSite).length == 1) {
                                    return '';
                                }
                                else if (this.selectedPoster() != null && ko.toJS(this.selectedPoster().ClientSite).length == 0) {
                                    return 'No Clients';
                                }
                            }
                        }, self);

                    };   // END VIEW MODEL 

    var viewModel = new ViewModel();

    $(function () {

        ko.applyBindings(viewModel);

        // remove if statement if you wish to display the select tag event if selectedPoster is null 
    });

</script>
<fieldset class="SearchFilter">
    <legend>Search Filter</legend>
    <div class="SearchItem">
        <span>Poster:</span>

        <select id="Select1" data-bind="options: PosterList, optionsText: 'SiteName', value: selectedPoster, disable:PosterList().length <= 1, optionsCaption:select1OptionsCaption()" ></select> 
        <!-- ko if: selectedPoster --> 
         <select id="Select2" data-bind="options: selectedPoster().ClientSite, optionsText: 'ClientName', optionsCaption:select2OptionsCaption(), value: selectedClient, disable: (selectedPoster().ClientSite==undefined) "></select> 
        <!-- /ko --> 

        <%--<select id="Select1" data-bind="options: PosterList, optionsText: 'SiteName', value: selectedPoster, disable:PosterList().length <= 1, optionsCaption:select1OptionsCaption" ></select> 
        <select id="Select2" data-bind="options: selectedPoster().ClientSite, optionsText: 'ClientName', value: selectedClient"></select> --%>

        <%--<select id="Select1" data-bind="options: PosterList, optionsText: 'SiteName', value: selectedPoster, disable:PosterList().length <= 1, optionsCaption: (PosterList().length==0)?'No Posters':(PosterList().length==1)?'':'Select a Poster'" ></select>
        <select id="Select2" data-bind="options: selectedPoster().ClientSite, optionsText: 'ClientName', value: selectedClient, disable:(selectedPoster().ClientSite==undefined), optionsCaption: (selectedPoster()==undefined)? 'No Clients': ''"></select>--%>

       <%-- <select id="dllPoster" data-bind="foreach: PosterList, disable:PosterList().length <= 1" onchange="viewModel.refreshClientList();">
            <option data-bind="text: SiteName, attr:{value:SiteId}"></option>
        </select>
        <select id="ddlClient" data-bind="with: PosterList.ClientSite ">
            <option data-bind="text: ClientName, attr:{value:ClientId}"></option>
        </select>--%>
    </div>
</fieldset>
 <input type="button" value="Click me!" onclick="alert(viewModel.selectedPoster().ClientSite())" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:58:22.223

这似乎复制了这个问题：

[http://jsfiddle.net/7bZT2/](http://jsfiddle.net/7bZT2/)

您正在尝试阅读`this.selectedPoster()`when `selectedPoster()`is`undefined`而不是`null`

这解决了你的第一个问题

[http://jsfiddle.net/sV4Vc/](http://jsfiddle.net/sV4Vc/)

这留下了一个问题

```
<input type="button" value="Click me!" onclick="alert(viewModel.selectedPoster().ClientSite())" /> 
```

[http://jsfiddle.net/sV4Vc/1/](http://jsfiddle.net/sV4Vc/1/)

工作虽然可能不是你想要的方式，但它显示了如何达到你想要的任何东西。

# php - 带有 zend 的 Google Docs API

> ID：10030316
> 
> 赞同：0
> 
> 时间：2012-04-05T14:15:09.183
> 
> 标签：php, zend-framework, google-docs-api

我正在尝试使用授权用户从 Google 读取文档并通过我的页面输出内容。

一切正常，输出正常，但几秒钟后，弹出窗口出现错误**“Google Docs 遇到错误。我们现在正在调查问题。请尝试以下临时解决方案之一：重新加载此页面”**

我的代码是这样的：

```
<?php
  require_once 'Zend/Loader.php';
  Zend_Loader::loadClass('Zend_Gdata_Docs');
  Zend_Loader::loadClass('Zend_Gdata_ClientLogin');
  Zend_Loader::loadClass('Zend_Gdata_Calendar');
  Zend_Loader::loadClass('Zend_Gdata_Docs_Query');

  $service = Zend_Gdata_Docs::AUTH_SERVICE_NAME;
  $client_grabmark = Zend_Gdata_ClientLogin::getHttpClient('MYUSER@gmail.com', 'MYPASS', $service);
  $service = new Zend_Gdata_Docs($client_grabmark); 
  $service->setMajorProtocolVersion(3);

  $contentLink = 'https://docs.google.com/document/d/'DOCID'/edit';

  $data = $service->get($contentLink)->getBody();

  ob_start();
  echo $data;
  ob_flush();
  exit  
?> 
```

我做错了什么？如果我尝试导出为 PDF，一切正常（我只需要更改链接），但我想像在 Google Docs 中一样显示页面。

有什么帮助吗？最好的问候 DF

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T17:44:11.770

您无法将 Google Doc 页面的 HTML 内容输出到您自己页面的上下文中并使其正常工作。如果您想向用户显示文档，请使用 HTTP Location 标头将他们重定向到 Google Doc 本身。

```
<?php
header("Location: $contentLink");
?> 
```

如果您打算向其显示文档的用户没有访问文档的权限，则有两种选择：

1.  使用 Documents List API 将文档分享给用户。
2.  使用 API 将文档导出为文本、HTML 或 PDF，然后将其显示给用户。

这些选项在[文档](https://developers.google.com/google-apps/documents-list/)中有详细说明。

# wpf - 如何将 DataTemplate 宽度设置为列表框的宽度？

> ID：10030323
> 
> 赞同：0
> 
> 时间：2012-04-05T14:15:24.767
> 
> 标签：wpf

这是来自[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.controls.groupstyle.containerstyle.aspx)的示例。

```
<GroupStyle>
  <GroupStyle.ContainerStyle>
    <Style TargetType="{x:Type GroupItem}">
      <Setter Property="Margin" Value="0,0,0,5"/>
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="{x:Type GroupItem}">
            <Expander IsExpanded="True" BorderBrush="#FFA4B97F" 
                      BorderThickness="0,0,0,1">
              <Expander.Header>
                <DockPanel>
                  <TextBlock FontWeight="Bold" Text="{Binding Path=Name}" 
                             Margin="5,0,0,0" Width="100"/>
                  <TextBlock FontWeight="Bold" 
                             Text="{Binding Path=ItemCount}"/>
                </DockPanel>
              </Expander.Header>
              <Expander.Content>
                <ItemsPresenter />
              </Expander.Content>
            </Expander>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>
  </GroupStyle.ContainerStyle>
</GroupStyle> 
```

如何让它占据列表框的整个宽度？（Horizo​​ntalScrollBar 被禁用）？我真正需要的是 DockPanel 被拉伸。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:35:33.700

您必须在项目中包含 PresentationFramework.Aero 的引用。在您的 ListBox 之后，您必须插入此属性：

```
<ListBox 
    xmlns:Microsoft_Windows_Themes="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Aero"
    HorizontalContentAlignment="Stretch"
>
</ListBox> 
```

# bash - 当我在 bash 脚本中使用期望为 SFTP 命令提供密码时如何获取二进制 sftp 的返回码

> ID：10030324
> 
> 赞同：0
> 
> 时间：2012-04-05T14:15:26.093
> 
> 标签：bash, ssh, sftp, expect

我正在尝试在 bash 脚本中使用 expect 来提供 SFTP 密码并放置其他命令。我正在尝试获取二进制 SFTP 的返回码。

我的测试脚本：

```
#!/bin/bash

USER=$1
HOST=$2
PASSWD=$3
PORT=$4
FILEIN=$5
FILEOUT=$6
ACTION=$7

CR_FTP=`/usr/bin/expect <<EOF | tee -a log.log
spawn sftp -v -oPort=$PORT $USER@$HOST
expect "password:"
send "$PASSWD\r"
expect "sftp>"
send "ls\r"
expect "sftp>"
send "$ACTION $FILEIN $FILEOUT\r"
expect "sftp>"
send "bye\r"
EOF`

echo " -------------------- $CR_FTP --------------------------" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T16:33:44.267

```
...
send "bye\r"
expect eof
set details [wait]
puts "sftp exit status=[lindex $details 3]"
EOF` 
```

See [http://www.tcl.tk/man/expect5.31/expect.1.html](http://www.tcl.tk/man/expect5.31/expect.1.html)

# visual-studio-2010 - 使用 WiX 3.6 根据时间戳自动生成内部版本号

> ID：10030325
> 
> 赞同：0
> 
> 时间：2012-04-05T14:15:26.297
> 
> 标签：visual-studio-2010, wix, wix3.6

我找到了许多使用 Team build setup 环境自动增加内部版本号的方法，但没有一个让我满意，因为我有一个 C++ MFC 应用程序，其中大多数方法都不起作用。

所以我想到了另一种解决方案，它可能对我们的团队有用（因为它不是那么大）：

我想要一个这样的内部版本号：

```
$(major).$(minor).$(buildnumber) <!-- where buildnumber is like YYMMDDHHMM --> 
```

我认为`$(major)`并且`$(minor)`可以使用命令行中的预处理器变量进行设置（或预构建任务，例如从文件中提取它们并将它们放入变量中），但是构建号应该是基于构建唯一的那个。

这种方法适用于每个开发人员在他的本地机器上以及 CI 环境（在我们的例子中是 TFS）。

有没有办法做到这一点？或者是否有另一个想法来自动生成增加的构建号（不一定基于时间戳）我还没有看到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:49:18.103

该要求的实施涉及两个部分：

1) 构建自动化生成 ProductVerion 属性

2) 将此属性传递给 WiX 构建的构建自动化。

对于#1，我喜欢使用[TFS 版本控制](http://tfsversioning.codeplex.com/)，但有很多解决方案可以满足您的需求。

对于#2，我将这样的代码放在 .wixproj 中：

```
 <PropertyGroup>
   <MSIProductVersion Condition=" '$(MSIProductVersion)' == '' ">0.1.0</MSIProductVersion>
 </PropertyGroup>

 <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|x86' ">
   <DefineConstants>Debug;WiXProductVersion=$(MSIProductVersion)</DefineConstants>
 </PropertyGroup>
 <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|x86' ">
   <DefineConstants>WiXProductVersion=$(MSIProductVersion)</DefineConstants>
 </PropertyGroup> 
```

在实际的 wxs 中，我这样做：

```
 <Product Id="*" Name="IsWiX" Language="1033" Version="$(var.WiXProductVersion)"
          Manufacturer="ISWIX LLC" UpgradeCode="some upgrade code">
   <Package InstallerVersion="200" Compressed="yes" /> 
```

这个概念是 TFS 在 MSIProductVersion 中传递，它被传递到编译器并映射到 Version 属性。对于本地开发人员构建的 MSI，只需获取 0.1.0 作为版本（这是一个很好的指标，表明它不是官方构建）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:34:05.597

[我使用此处](http://www.codeguru.com/cpp/v-s/devstudio_macros/add-ins/article.php/c14453/Auto-Increment-the-Version-Number-after-Each-Build-in-a-Visual-Studio-Project.htm)找到的“verbuild.exe”实用程序解决了它

按照该页面中的步骤操作：

1.  创建初始版本头文件：`verbuild <version header file> -c`
2.  创建一个资源 (.rc) 文件：
    1.  包含步骤 1 中的头文件
    2.  包括使用头文件中的更改替换 .rc 文件中的正确版本（例如，`VERSION_FILE`）
3.  在构建项目之前将构建更改为调用`verbuild`以更新内部版本号：
    *   我运行一个批处理文件来增加内部版本号：`verbuild <version header file> %1 -xFP`

# c# - WPF中的水平到垂直WrapPanel

> ID：10030328
> 
> 赞同：0
> 
> 时间：2012-04-05T14:15:33.897
> 
> 标签：c#, wpf, wrappanel

我尝试使用垂直按钮构建包装面板。每个按钮由图像和文本块组成。当用户移动 GridSplitter 时，我想做一些微软在窗口左侧的 Outlook 中所做的事情。当用户降低环绕面板的高度时，如果任何按钮没有位置，文本块将消失（按钮将仅由图像组成）。

我怎样才能做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T16:01:41.980

如果我理解正确。您想显示带有文本和图像的按钮，但如果按钮的宽度减小到一定大小，它将只显示图像。

如果是这样，您应该能够使用数据触发器来实现。

```
<Window x:Class="StackOverflow1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:StackOverflow1"
    Title="MainWindow" Height="350" Width="525">
<Window.Resources>
    <local:isLessThanConverter x:Key="MyisLessThanConverter"/>
    <Style x:Key="myWidthTrigger" TargetType="TextBlock">
            <Style.Triggers>
                <DataTrigger Binding="{Binding Path=ActualWidth, RelativeSource={RelativeSource AncestorType=Button}, Converter={StaticResource MyisLessThanConverter}, ConverterParameter=90}" Value="True">
                    <Setter Property="Visibility" Value="Collapsed" />
                </DataTrigger>
        </Style.Triggers>
    </Style>
</Window.Resources>
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"></ColumnDefinition>
        <ColumnDefinition Width="Auto"></ColumnDefinition>
        <ColumnDefinition Width="*"></ColumnDefinition>
    </Grid.ColumnDefinitions>
    <ListView HorizontalContentAlignment="Stretch">
        <Button x:Name="myButton" Width="Auto">
            <StackPanel Orientation="Horizontal">
                <TextBlock x:Name="MyTextBlock" Style="{StaticResource myWidthTrigger}" Text="Test"></TextBlock>
                <Image Source="image.png" Height="15"></Image>
            </StackPanel>
        </Button>
    </ListView>
    <GridSplitter Width="5" Grid.Column="1" ResizeDirection="Columns" ResizeBehavior="PreviousAndNext"></GridSplitter>
</Grid> 
```

也使用这个 IValueConvertor：

```
[ValueConversion(typeof(double), typeof(string))]
public class isLessThanConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
            if ((double)value < double.Parse((string)parameter))
            {
                return true;
            }
            else
            {
                return false;
            }

    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }

} 
```

我不是这方面的专家，所以可能有更清洁的方法。我还使用了列表视图而不是您要求的包装面板。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:26:51.620

听起来您要使用的是[`Expander`](http://wpftutorial.net/Expander.html)控件。这篇[StackOverflow 帖子](https://stackoverflow.com/questions/4449000/wpf-multiple-expander-have-to-collapse-if-one-is-expanded)解释了如何`Expander`在您打开另一个时自动关闭另一个。这将像您在 Outlook 中描述的那样工作。

# c# - 退出 SharpDX 渲染循环

> ID：10030331
> 
> 赞同：3
> 
> 时间：2012-04-05T14:15:46.533
> 
> 标签：c#, sharpdx

SharpDX 有一个`RenderLoop`在渲染循环中运行给定委托的：

```
RenderLoop.Run(m_RenderForm, () =>
{
    // Do stuff here to render things...
} 
```

我需要做的是以某种方式退出渲染循环。

```
RenderLoop.Run(m_RenderForm, () =>
{
    if (DoINeedToQuit() == true)
    {
        // What do I put here?
    }
} 
```

我不能只是`return`，因为那只会结束当前的循环迭代。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-05T11:44:58.140

你可以处理它：

```
myDXControl.Dispose(); 
```

释放控件会导致渲染循环停止。为了重新启动循环，请确保它已被释放 `myDXControl.IsDisposed`，然后重新初始化控件并重新启动循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-09T22:38:14.930

由于我也遇到了这个问题，所以我查看了 SharpDX 的源代码并找到了解决方案。

下面是该`Run`方法的源代码：

```
public static void Run(Control form, RenderCallback renderCallback, bool useApplicationDoEvents = false)
{
    if (form == null)
        throw new ArgumentNullException("form");
    if (renderCallback == null)
        throw new ArgumentNullException("renderCallback");
    form.Show();
    using (var renderLoop = new RenderLoop(form) { UseApplicationDoEvents = useApplicationDoEvents })
        while (renderLoop.NextFrame())
            renderCallback();
} 
```

在`while`有条件的情况下继续；修改那个条件就足够了。您可能希望使用以下代码创建一个静态类：

```
private static bool mExitLoop = false;

public static void Run(Control form, RenderCallback renderCallback, bool useApplicationDoEvents = false)
{
    if (form is null)
        throw new ArgumentNullException(nameof(form));

    if (renderCallback is null)
        throw new ArgumentNullException(nameof(renderCallback));

    Contract.EndContractBlock();

    form.Show();

    using (var renderLoop = new RenderLoop(form) { UseApplicationDoEvents = useApplicationDoEvents })
    {
        while (renderLoop.NextFrame() && !mExitLoop)
            renderCallback();
    }

    mExitLoop = false;
}

public static void ExitLoop()
{
    mExitLoop = true;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-05T22:50:49.277

您必须退出应用程序 ( `Application.Exit`)。

或者，您可以在循环外、循环内完成您想做的工作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-03-01T05:57:06.357

一种可能的解决方案是破坏`RenderLoop`正在渲染的控件。

例如，

```
RenderForm.Close(); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2018-02-04T20:41:38.787

正如最初的海报之一所示，循环中的代码相当简单。您调用的函数是为了方便起见，您实际上可以在表单中扮演自己的角色。不需要重新编译库，如果 application.exit 不是您想要的唯一退出触发器，只需在表单中添加一个函数。

# mysql - sql 按服务所有者的评分数列出服务

> ID：10030336
> 
> 赞同：0
> 
> 时间：2012-04-05T14:16:01.913
> 
> 标签：mysql, sql

我有 3 个表 - 用户、服务和评级。用户的主键是user_id，是服务表中的外键。它也是评级表中的外键，链接到rated_id（被评级人的用户ID）和rater_id（提供评级的人的用户ID）

每个用户都有一项服务，并且可以有多个评级。如果评级表中的推送字段为 1，则其为有效评级并且可以使用。如果它为 0，它还不是有效的，正在等待被推送。

我需要一个查询来显示所有服务的列表，按评分最高的用户降序排列。属于有评分但未推送的用户的服务与属于没有评分的用户的服务一起位于底部。

这是创建表和数据的sql：

```
SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

--
-- Database: `ratings`
--

-- --------------------------------------------------------

--
-- Table structure for table `ratings`
--

CREATE TABLE IF NOT EXISTS `ratings` (
  `unique_id` int(11) NOT NULL AUTO_INCREMENT,
  `rater_id` int(11) NOT NULL,
  `rated_id` int(11) NOT NULL,
  `pushed` int(11) NOT NULL,
  PRIMARY KEY (`unique_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=5 ;

--
-- Dumping data for table `ratings`
--

INSERT INTO `ratings` (`unique_id`, `rater_id`, `rated_id`, `pushed`) VALUES
(1, 4, 1, 1),
(2, 4, 1, 1),
(3, 4, 2, 1),
(4, 4, 3, 0);

-- --------------------------------------------------------

--
-- Table structure for table `service`
--

CREATE TABLE IF NOT EXISTS `service` (
  `unique_id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `description` varchar(100) NOT NULL,
  PRIMARY KEY (`unique_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=4 ;

--
-- Dumping data for table `service`
--

INSERT INTO `service` (`unique_id`, `user_id`, `description`) VALUES
(1, 1, 'marks service'),
(2, 2, 'shanes service'),
(3, 3, 'peters service');

-- --------------------------------------------------------

--
-- Table structure for table `user`
--

CREATE TABLE IF NOT EXISTS `user` (
  `user_id` int(11) NOT NULL,
  `name` varchar(50) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `user`
--

INSERT INTO `user` (`user_id`, `name`) VALUES
(1, 'mark'),
(2, 'shane'),
(3, 'peter'),
(4, 'jobposter'); 
```

这是我提出的一个问题

```
SELECT s.*, count(r.rated_id), r.pushed FROM service s

join user u on (u.user_id = s.user_id)
join ratings r on (r.rated_id = u.user_id)

group by r.rated_id

order by r.rated_id 
```

问题是它不完整。没有评分的用户不会显示，如果用户有多个评分但没有被推送，他们会出现在高处......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:34:17.187

你可以试试这个：

```
SELECT u.name,
       s.DESCRIPTION,
       COUNT(r.rated_id) rated,
       r.pushed
FROM   USER u
       LEFT JOIN SERVICE s
         ON ( u.user_id = s.user_id )
       LEFT JOIN ratings r
         ON ( r.rated_id = u.user_id )
GROUP  BY u.name,
          r.rated_id,
          r.pushed
ORDER  BY r.pushed DESC,
          3 DESC,
          u.name 
```

我不能百分百确定是否会通过服务加入用户。如果您要求用户拥有服务才能参与评级，请移除*左侧。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:42:09.980

试试这个查询 -

```
SELECT
  s.*, r.rated_id, r.pushed_count
FROM
  service s
JOIN user u ON
  u.user_id = s.user_id
LEFT JOIN (
    SELECT
      rated_id, COUNT(IF(pushed = 1, 1, NULL)) pushed_count
    FROM
      ratings
    GROUP BY
      rated_id
  ) r
  ON r.rated_id = u.user_id
ORDER BY
  r.pushed_count DESC 
```

# php - 使用 JQuery 提交 PHP Codeigniter 表单

> ID：10030340
> 
> 赞同：2
> 
> 时间：2012-04-05T14:16:08.810
> 
> 标签：php, codeigniter

我是 PHP Codeigniter 框架的新手。我正在设计一个使用链接的页面。单击链接时，它正在调用一个 jquery 函数，该函数通过 jquery 提交表单。我已经使用 codeigniter 表单验证方法进行服务器端验证，暂时我禁用了客户端验证。

问题是在这个通过jquery提交表单的过程中，codeigniter表单验证方法不起作用。

但是如果我使用提交按钮来提交表单，那么 codeigniter 表单验证方法就可以完美地工作。

如果我需要通过 jquery 提交表单并使用 codeigniter 表单验证方法，请告诉我该怎么做。

请在下面找到代码：

登录表单：

```
<?php echo validation_errors(); ?>
<form name="login-form" id="login-form" method="post" action="<?php echo base_url();?>index.php/login/login_form" >
    <H2>Login</H2>
    <div id="login-box-name">
        Email:
    </div>
    <div id="login-box-field">
        <input name="user-name" id="user-name" class="form-login" title="Please Enter Correct User Name" value="" size="30" maxlength="2048" />
    </div>
    <div id="login-box-name">
        Password:
    </div>
    <div id="login-box-field">
        <input name="password" id="password" type="password" class="form-login" title="Please Enter Correct Password" value="" size="30" maxlength="2048" />
    </div>
    <br />
    <span class="login-box-options">
        <input type="checkbox" name="1" value="1" title="Want this computer to remember you!!"> Remember Me <a href="#" id="login-div-change">Forgot password?</a>
    </span>
    <br />
    <br />
    <a href="" id="login-submit">
        <img src="<?php echo base_url();?>assets/images/login-btn.png" width="110" height="40" style="margin-left:90px;" />
    </a>
    <input type="submit" name="submit" id="submit" value="Submit" />
</form> 
```

jquery 函数在单击“链接”时提交表单：

```
    $("#login-submit").click(function()
    {
    $('#login-form').submit();
    返回假；
    });

```

控制器功能：

```
    公共函数 login_form()
    {

        $this->load->helper(array('form', 'url'));
        $this->load->library('form_validation');
        $data['title'] = '登录';

        $data['errorMessage'] = '';
        $this->form_validation->set_rules('user-name', 'Email', 'required');
        $this->form_validation->set_rules('password', 'Password', 'required');

        if ($this->form_validation->run() == FALSE)
        {
        $this->load->view('templates/header', $data);
        $this->load->view('login', $data);
        $this->load->view('模板/页脚');
        }

        别的
        {
        $this->load->view('templates/header', $data);
        $this->load->view('模板/菜单');
        $this->load->view('index', $data);
        $this->load->view('模板/页脚');
        }

    }

```

在这里，如果我单击表单的“提交”按钮，那么 codeigniter 验证适用于用户名和密码字段。但是如果我单击 id="login-submit" 的链接，那么它会调用 jquery 函数和表单提交。但是这次 codeigniter 验证不适用于用户名和密码字段。

我需要通过链接提交表单，codeigniter 验证功能应该适用于此。

提前致谢.....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T07:16:03.880

使用`.preventDefault()`而不是仅在锚点单击事件上返回 false。

这曾经发生在我身上，在我看来，在某个地方使用`.submit()`click 事件并返回 false 以停止锚点的默认行为时存在冲突。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T07:23:12.417

上面的代码工作正常。实际上，我在代码中犯了一个愚蠢的错误。我为 jQuery 使用了以下代码，它现在正在工作。

```
    $("#login-submit").click(function(e) {
        e.preventDefault();
        $('#login-form').submit();
    });

```

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-27T07:28:04.110

发生这种情况是因为它在单击按钮时一直调用该函数。你需要阻止它。

```
$("#login-submit").click(function(e){
 e.preventDefault();
 $('#login-form').submit();
}); 
```

# c# - 列表之间的区别 lst = new List() 和 List<> lst = new List()

> ID：10030342
> 
> 赞同：-5
> 
> 时间：2012-04-05T14:16:14.083
> 
> 标签：c#, asp.net

我只想知道和之间的`List<string> lst = new List()` 区别`List<> lst = new List()`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T14:17:57.240

没有`List`类型。`List<T>`（或`List(Of T)`在 VB 中）是泛型的。这意味着列表只能包含您传入的类型。

例如：

```
List<string> list1 = new List<string>();
list1.Add("hello"); // OK
list1.Add(123); // Compiler error

List<int> list2 = new List<int>();
list2.Add("hello"); // Compiler error
list2.Add(123); // OK 
```

[您可以在 MSDN](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)阅读有关通用列表的更多信息。

如果您想要一个未键入的列表，您可以使用[`ArrayList`](http://msdn.microsoft.com/en-us/library/system.collections.arraylist.aspx)：

```
ArrayList list = new ArrayList();
list.Add("hello"); // OK
list.Add(123); // OK 
```

但是，当您使用列表中的项目时，您必须知道类型，因为它可以是任何对象。

# windows - 调查内存泄漏

> ID：10030349
> 
> 赞同：4
> 
> 时间：2012-04-05T14:16:31.197
> 
> 标签：windows, debugging, memory-management, memory-leaks, windbg

我们的应用程序中存在缓慢的内存泄漏，我已经通过以下步骤尝试分析泄漏的原因：

1.  在 GFlags 中启用用户模式堆栈跟踪数据库
2.  在 Windbg 中，键入以下命令：**!heap -stat -h 1250000**（其中 1250000 是有泄漏的堆的地址） 在比较多个转储后，我看到大小为**0xC**的内存块随着时间的推移而增加，并且可能泄漏的内存。
3.  输入以下命令：**!heap -flt sc** 给出这些分配的 UserPtr，最后：
4.  在其中一些地址上键入**!heap -p -a address始终显示以下分配调用堆栈：**

0:000> **!heap -p -a 10576ef8**

```
address 10576ef8 found in
_HEAP @ 1250000
  HEAP_ENTRY Size Prev Flags    UserPtr UserSize - state
    10576ed0 000a 0000  [03]   10576ef8    0000c - (busy)
    mscoreei!CLRRuntimeInfoImpl::`vftable'
    7c94b244 ntdll!RtlAllocateHeapSlowly+0x00000044
    7c919c0c ntdll!RtlAllocateHeap+0x00000e64
    603b14a4 mscoreei!UtilExecutionEngine::ClrHeapAlloc+0x00000014
    603b14cb mscoreei!ClrHeapAlloc+0x00000023
    603b14f7 mscoreei!ClrAllocInProcessHeapBootstrap+0x0000002e
    603b1614 mscoreei!operator new[]+0x0000002b
    603d402b +0x0000005f
    603d5142 mscoreei!GetThunkUseState+0x00000025
    603d6fe8 mscoreei!_CorDllMain+0x00000056
    79015012 mscoree!ShellShim__CorDllMain+0x000000ad
    7c90118a ntdll!LdrpCallInitRoutine+0x00000014
    7c919a6d ntdll!LdrpInitializeThread+0x000000c0
    7c9198e6 ntdll!_LdrpInitialize+0x00000219
    7c90e457 ntdll!KiUserApcDispatcher+0x00000007 
```

这看起来像线程初始化调用堆栈，但我需要知道的远不止这些。为了找出泄漏的确切原因，您建议下一步做什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T10:10:56.967

使用 GFlags 时记录的堆栈是在不使用 .pdb 的情况下完成的，并且通常不正确。由于您已将泄漏跟踪到给定堆上的特定大小，因此您可以尝试在 RtlAllocateHeap 中设置实时中断并使用适当的符号检查 windbg 中的堆栈。我已经成功使用了以下内容。您必须编辑它以适合您的堆和大小。

```
 $$ Display stack if heap handle eq 0x00310000 and size is  0x1303
 $$ ====================================================================
bp ntdll!RtlAllocateHeap "j ((poi(@esp+4) = 0x00310000) & (poi(@esp+c) = 0x1303) )'k';'gc'" 
```

也许你会为罪犯获得另一个堆栈和其他想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T23:15:48.223

首先是新运营商是`new []`运营商，所以是否有相应的`delete[]`呼叫而不是普通的旧`delete`呼叫？

如果您怀疑这段代码，我会在它周围放置一个测试工具，例如将它放在一个循环中并执行 100 或 1000 次，它是否仍然会泄漏并成比例地泄漏。

您还可以使用进程资源管理器或以编程方式使用[GetProcessInformation](http://msdn.microsoft.com/en-us/library/windows/desktop/hh448381%28v=vs.85%29.aspx)来测量内存增加。

另一个明显的事情是看看当你注释掉这个函数调用时会发生什么，内存泄漏会消失吗？如果可能，您可能需要对代码进行二进制切割，以通过注释掉代码每次将可能的可疑代码减少一半（大约），但是，更改代码的行为可能会导致更多问题或相关代码路径问题，这可能导致内存泄漏或奇怪的行为。

**编辑** 当您在托管环境中工作时，请忽略以下内容。

您还可以考虑使用`STL`或更好但[提升](http://www.boost.org)引用计数的指针，如[shared_ptr](http://www.boost.org/doc/libs/1_49_0/libs/smart_ptr/shared_ptr.htm)或[scoped_array](http://www.boost.org/doc/libs/1_49_0/libs/smart_ptr/scoped_array.htm)用于数组结构来管理对象的生命周期。

# objective-c - 一个 viewController 被推入另一个 viewController 后会发生什么

> ID：10030350
> 
> 赞同：3
> 
> 时间：2012-04-05T14:16:37.123
> 
> 标签：objective-c, ios, cocoa-touch, cocoa, uiviewcontroller

我只是在编程时想知道。我有一个创建 childViewController 实例的 rootViewController。这个 childVC 通过 [self.navigationController pushViewController:childVC] 从另一个 childViewController（比如 childVC2）推送到我的 rootViewController。现在我想知道我的 childVC2 实例会发生什么。它会被释放吗？因为当从 childVC 返回 childVC2 时，我创建了一个 childVC2 的新实例并将其推送到我的 rootViewController 中。显然我对 childVC2 的早期实例没有任何用处，所以它会发生什么，或者我可以手动释放它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:16:37.890

是的，如果您分配 ViewController，则必须释放它..推送会将其引用计数增加 1，因此您必须确保将其弹出以减少引用计数..并在创建实例时定义它.h 并在创建时这样做

```
if(yourViewController)
  [yourViewContoller release];

yourViewController = [yourViewControllerClass alloc] init]; 
```

另一种选择是使其自动释放，在这种情况下，您不负责释放 ViewController

```
yourViewController = [yourViewControllerClass alloc] init]autorelease]; 
```

# windows - 使用 Windows Mobile 时，WebHost 无法处理 IIS 7 windows 2008 上的请求

> ID：10030351
> 
> 赞同：1
> 
> 时间：2012-04-05T14:16:37.670
> 
> 标签：windows, wcf, iis-7

我使用 WCF 开发了一个 Web 服务，并使用 NTLM over SSL 对其进行保护。我能够使用 Visual Studio 2008 表单或 Web 项目成功连接。我遇到的问题是在创建智能设备项目并将其部署在设备上时。

当我调用服务时，从客户端出现错误：Web Exception

在服务器站点上，当我检查事件日志时，我收到以下错误：

```
**Sender Information: System.ServiceModel.Activation.HostedHttpRequestAsyncResult/7491627
 Exception: System.Web.HttpException (0x80004005): There was no channel actively listening at 'https://mymachine:9011/FrontEndWS/MeterReadingService.svc/$metadata'. This is often caused by an incorrect address URI. Ensure that the address to which the message is sent matches an address on which a service is listening. --->  
System.ServiceModel.EndpointNotFoundException: There was no channel actively listening at 'https://mymachine:9011/FrontEndWS/MeterReadingService.svc/$metadata'. This is often caused by an incorrect address URI. Ensure that the address to which the message is sent matches an address on which a service is listening. 

at System.ServiceModel.Activation.HostedHttpTransportManager.HttpContextReceived(HostedHttpRequestAsyncResult result)
   at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.HandleRequest()
   at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.BeginRequest()
   at System.Runtime.AsyncResult.End[TAsyncResult](IAsyncResult result)
   at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.End(IAsyncResult result)**

Process Name: w3wp
  Process ID: 2828 
```

无法弄清楚为什么在移动设备上会发生这种情况，但在 PC 上却可以正常工作。

# php - PHP论坛数据库优化

> ID：10030354
> 
> 赞同：1
> 
> 时间：2012-04-05T14:16:41.613
> 
> 标签：php, sql, database, optimization, forum

我一直在考虑用 PHP 创建一个论坛，所以我做了一些研究，看看人们在数据库中创建的表的标准是什么。在我查过的大多数网站上，他们总是选择为线程设置一个表格，为线程上的帖子设置第二个表格。

对我来说，拥有一张用于线程的表格似乎是完全合理的，但是一张表格来容纳所有线程上的所有帖子似乎有点太多了。为每个线程创建一个表格来保存该线程的帖子而不是在一个表格中粘贴几十万个帖子会更好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T14:26:00.900

这些表应该代表数据库中数据的结构。如果您有 2 个对象，在这种情况下是您的线程和您的帖子，您应该将它们放在 2 个表中。

相信我，如果您按照自己的想法进行操作，那么为每个帖子找出正确的表格将是一场噩梦。SQL 会是什么样子？就像是

```
SELECT *
FROM PostTable17256 
```

并且您必须在每个请求上动态构建此查询。

但是，通过使用 1 个表，您可以简单地获取 ThreadID 并将其作为变量传递给您的查询。

```
SELECT *
FROM Posts
WHERE ThreadID = $ThreadID 
```

关系数据库被设计为具有包含大量行的表。顺便说一句，您可能会对 DBA 认为的“很多”感到惊讶。在大多数地方，一个有 1,000,000 行的表被认为是中小型的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T14:26:13.640

不不不。数据库喜欢巨大的表。将帖子拆分为多个表格会引起很多麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T14:27:29.763

将帖子存储在一张表中是最好的解决方案。
MySQL 可以轻松地在一个表中保存数百万行。

创建多个表可能会导致一些问题。例如，您将无法将 JOIN 用于来自不同线程的帖子。

# php - 我可以用变量调用方法吗？

> ID：10030355
> 
> 赞同：5
> 
> 时间：2012-04-05T14:16:47.297
> 
> 标签：php, eval

我可以在 PHP 中执行以下操作吗？

```
$lstrClassName  = 'Class';
$lstrMethodName = 'function';
$laParameters   = array('foo' => 1, 'bar' => 2);

$this->$lstrClassName->$lstrMethodName($laParameters); 
```

我现在使用的解决方案是使用 eval() 调用函数，如下所示：

```
eval('$this->'.$lstrClassName.'->'.$lstrMethodName.'($laParameters);'); 
```

我很好奇是否有更好的方法来解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-05T14:23:46.163

您不需要 eval 来执行此操作...取决于您的版本

例子

```
class Test {
    function hello() {
        echo "Hello ";
    }

    function world() {
        return new Foo ();
    }
}

class Foo {

    function world() {
        echo " world" ;
        return new Bar() ;
    }

    function baba() {

    }
}

class Bar {

    function world($name) {
        echo $name;
    }

}

$class = "Test";
$hello = "hello";
$world = "world";
$object = new $class ();
$object->$hello ();
$object->$world ()->$world ();
$object->$world ()->$world ()->$world(" baba "); 
```

输出

```
Hello World baba 
```

如果您使用的是 PHP 5.4，您可以直接调用它而无需声明变量

您可能还想查看`call_user_func` [http://php.net/manual/en/function.call-user-func.php](http://php.net/manual/en/function.call-user-func.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T14:21:23.660

你试过你的代码吗？确定某事是否可行的最佳方法是尝试它。如果你尝试过，你会发现是的，它确实有效（假设`$this`有一个名为的属性`Class`，它是一个定义了名为 的方法的对象的实例`function`）。

还有两个功能[`call_user_func()`](http://php.net/manual/en/function.call-user-func.php)和[`call_user_func_array()`](http://php.net/manual/en/function.call-user-func-array.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T14:24:40.577

我建议你[call_user_func_array](http://php.net/manual/en/function.call-user-func-array.php)可以用于函数和数组而不是 eval。但是语法与您建议的不同，而且我倾向于尽可能避免使用 eval ，您可以将其用于：

要使用对象调用它，只需执行以下操作：

`$return=call_user_func_array(array($objInstance, "CLASSMETHOD"), $paramArray);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T14:21:05.950

未经测试但

```
this->$$lstrClassName->$$lstrMethodName($laParameters); 
```

[http://php.net/manual/en/language.variables.variable.php](http://php.net/manual/en/language.variables.variable.php)

# iphone - 保持 UITabbarController 在每个视图中可见

> ID：10030357
> 
> 赞同：1
> 
> 时间：2012-04-05T14:16:56.920
> 
> 标签：iphone, objective-c, uitabbarcontroller, uitabbar

我有一个带有自定义 UITabBarController 的应用程序，其中包含五个视图控制器。在每个视图控制器中，可以访问其他视图控制器。理想情况下，我希望我的自定义 UITabBarController 出现在每个 ViewController 中，无论视图控制器是否直接源自标签栏。

我**认为**这可以使用原始五个视图控制器中的每一个中的导航控制器来完成，但是，有没有办法将自定义 UITabBarController 添加到每个视图控制器？我尝试在我的方法中通过以下方式做到这一点`viewDidLoad`：

```
AppDelegate *appDelegate = [(AppDelegate *)[UIApplication sharedApplication] delegate];
tabbarController = appDelegate.tabBarController;

tabbarController.view.frame = CGRectMake(0, 0, 320, 480);
[self.view addSubview:tabbarController.view]; 
```

但是当我运行代码时，我的应用程序委托中出现了 bad_access。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:37:06.583

正如您正确陈述的那样，使用“UINavigationController”作为每个选项卡的根控制器将实现您想要做的事情。

这是一个如何使用导航控制器轻松设置标签栏的示例：

```
- (void)setupTabBar {

    // Create nav-controller for local use
    UINavigationController *localNavController;

    // New tabbar controller and array to contain the view controllers
    UITabBarController * theTabBarController = [[UITabBarController alloc] init];

    NSMutableArray *localViewControllersArray = [[NSMutableArray alloc] initWithCapacity:4];

    /*--------------------------------------------------------------------
     * Setup the view controllers for the different tabs
     *-------------------------------------------------------------------*/

    // Root view controller for Tab 1
    UIViewController *vc;

    vc = [[ViewController1 alloc] initWithNibName:@"ViewController1" bundle:nil];
    localNavController = [[UINavigationController alloc] initWithRootViewController:vc];
    localNavController.tabBarItem.image = [UIImage imageNamed:@"image.png"];
    localNavController.tabBarItem.title = @"Tab1";

    // Add navigation controller to the local vc array (1 of 4)
    [localViewControllersArray addObject:localNavController];

    // Root view controller for Tab 2
    vc = [[ViewController2 alloc] initWithNibName:@"ViewController2" bundle:nil];
    localNavController = [[UINavigationController alloc] initWithRootViewController:vc];
    localNavController.tabBarItem.image = [UIImage imageNamed:@"image.png"];
    localNavController.tabBarItem.title = @"Tab2";

    // Add navigation controller to the local vc array (2 of 4)
    [localViewControllersArray addObject:localNavController];

    // Root view controller for Tab 3
    vc = [[ViewController3 alloc] initWithNibName:@"ViewController3" bundle:nil];
    localNavController = [[UINavigationController alloc] initWithRootViewController:vc];
    localNavController.tabBarItem.image = [UIImage imageNamed:@"image.png"];
    localNavController.tabBarItem.title = @"Tab3";

    // Add navigation controller to the local vc array (3 of 4)
    [localViewControllersArray addObject:localNavController];

    // Root view controller for Tab 4
    vc = [[ViewController4 alloc] initWithNibName:@"ViewController4" bundle:nil];
    localNavController = [[UINavigationController alloc] initWithRootViewController:vc];
    localNavController.tabBarItem.image = [UIImage imageNamed:@"image.png"];
    localNavController.tabBarItem.title = @"Tab4";

    // Add navigation controller to the local vc array (4 of 4)
    [localViewControllersArray addObject:localNavController];

    // Point the tab bar controllers view controller array to the array
    // of view controllers we just populated
    theTabBarController.viewControllers = localViewControllersArray;

    self.tabBarController = theTabBarController;

    [self.window setRootViewController:self.tabBarController];

    ...
} 
```

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T14:36:56.893

您的 AppDelegate 应该有一个 TabBarController。`tabBarController.viewControllers`此 TabBarController 包含一个 ViewControllers ( )数组。这些 ViewController 应该是 UINavigation 控制器。

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    UINavigationController* navController1 = [[UINavigationController alloc] initWithRootViewController:firstOfYourControllers;
    UINavigationController* navController2 = [[UINavigationController alloc] initWithRootViewController:sencondOfYourViewControllers;
    UINavigationController* navController3 = [[UINavigationController alloc] initWithRootViewController:andSoOn;
    UINavigationController* navController4 = [[UINavigationController alloc] initWithRootViewController:andSoOn;
    UINavigationController* navController5 = [[UINavigationController alloc] initWithRootViewController:andSoOn;

    NSArray* viewControllerArray = [NSArray arrayWithObjects:navController1, navController2, navController3, navController4, navController5, nil];

    self.tabBarController = [[UITabBarController alloc] init];

    self.tabBarController.viewControllers = viewControllerArray;

    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];
    return YES; 
```

}

不要以模态方式呈现您的 NavigationControllers。它们将显示在您的 TabBarController 之上，并且 TabBarController 将不再可见。也不要尝试在 NavigationController 中显示 TabBarController。

# c++ - 放大器库错误

> ID：10030359
> 
> 赞同：0
> 
> 时间：2012-04-05T14:17:02.957
> 
> 标签：c++, visual-c++, c++-amp, visual-c++-2012

我正在尝试开始使用 C++ Amp 库。我正在关注此[MSDN 杂志指南](http://msdn.microsoft.com/en-us/magazine/hh882446.aspx)，但我收到了位于 aplibrary 中的这部分代码的错误（不是我的代码）。

```
 protected:
    _Accelerator_view_impl_ptr _M_accelerator_view;
    _Accelerator_view_impl_ptr _M_access_on_accelerator_view;
    void * _M_data_ptr;
    void * _M_host_ptr;
    size_t _M_elem_size;
    size_t _M_num_elems;
    bool   _M_owns_data;
    bool   _M_is_staging; 
```

错误是

> 3 IntelliSense：amp 限制函数“Concurrency::details::_Texture_descriptor::_Texture_descriptor(Concurrency::details::_Texture *_Texture_ptr) restrict(cpu,amp)”的非法参数类型“void *”（在第 538 行声明"c:\program 文件 (x86)\microsoft visual studio 11.0\vc\include\amprt.h") c:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\include\amprt.h 1466 16

到目前为止我复制的代码

```
#include <amp.h>                // C++ AMP header file
#include <iostream>             // For std::cout etc
using namespace concurrency;    // Save some typing :)
using std::vector;     // Ditto. Comes from <vector> brought in by amp.h

int main()
{
    do_it();

    std::cout << "Hit any key to exit..." << std::endl;
    std::cin.get();
}

void do_it()
{
    // Rows and columns for matrix
    const int M = 1024;
    const int N = 1024;

    // Create storage for a matrix of above size
    vector<int> vA(M * N);
    vector<int> vB(M * N);

    // Populate matrix objects
    int i = 0;
    std::generate(vA.begin(), vA.end(), [&i](){return i++;});
    std::generate(vB.begin(), vB.end(), [&i](){return i--;});

    // Output storage for matrix calculation
    vector<int> vC(M * N);

    perform_calculation(vA, vB, vC, M, N);
}

void perform_calculation(
    vector<int>& vA, vector<int>& vB, vector<int>& vC, int M, int N)
{
    for (int i = 0; i < M; i++)
    {
        for (int j = 0; j < N; j++)
        {
            vC[i * N + j] = vA[i * N + j] + vB[i * N + j];
        }
    }
} 
```

***构建输出***

```
------ Build started: Project: Project1, Configuration: Debug Win32------  
Source.cpp 
LINK : padding exhausted: performing full link  
Project1.vcxproj ->C:\Development\Project1\Debug\Project1.exe 
CodeContracts:
Project1: Run static contract analysis. 
CodeContracts: Project1:  Cannot load assembly 'C:\Development\Project1\Project1\Debub\Decl\Project1.exe'
CodeContracts: Project1: Total methods analyzed 0  
CodeContracts:Project1: Total time 135ms. 0ms/method  
CodeContracts: Checked 0 assertions.  
CodeContracts: Project1: Static contract analysis done. 
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T00:31:38.887

智能感知错误是一个无害的已知 VS 11 Beta 问题。您可以放心地忽略它。在错误窗口中，您还可以过滤以仅显示打开文件的错误，如果您不想看到它，您可以将其过滤掉。但这不会阻止您构建和运行，因此请忽略。

至于您在代码中发现的任何其他问题，请按照 MSDN 杂志文章的链接获取代码，然后您可以使用它，或者使用它来比较您输入的内容与我在文章中提供的内容。

干杯

丹尼尔

# iphone - 应用程序在 iPhone 5.1 模拟器和带有 iOS 5.1 的真实 iPhone 4 上表现不同

> ID：10030362
> 
> 赞同：29
> 
> 时间：2012-04-05T14:17:08.960
> 
> 标签：iphone, ios, ios-simulator

## 简而言之：

当导航控制器的后退按钮的标题发生变化时，在某些情况下，旧标题会卡住，而新标题将不会显示。这仅在某些可重现的情况下发生，而在其他情况下则按设计工作。

**这取决于硬件**

*   该错误发生在 iPhone 3G (iOS 4.2.1) 和模拟器 (iOS 5.1) 上
*   使用相同的源代码在 iPhone 4 (iOS 5.1) 上没有错误

**这取决于写在标题上的单词**

*   当按钮被创建时，它从我自己编写的创建方法中获得与自动获得的标题相同的单词（即导航控制器堆栈上上一页的标题），并且当其他情况匹配时，然后，稍后尝试更改按钮的标题时，旧文本被卡住，新标题不会显示。
*   当在创建时按钮获得一个与其默认标题不同的单词作为标题时，只要您不为其分配默认标题，其标题的每次更改都可以正常工作。
*   如果在对许多不同的标题进行了多次成功更改后，您将单词放在按钮标题上，这是它的默认标题，那么这个单词就会被卡住。以后的更改将不被接受（没有任何消息，并且只有在其他情况匹配时）

**这取决于按钮是否在此期间不可见。**

*   如果另一个视图被推送到导航控制器堆栈上，那么带有缺陷按钮的旧页面被新页面隐藏，当新页面再次从堆栈中弹出时，按钮再次可见，（并且当其他情况匹配）然后旧文本被卡住并且尝试更改它被忽略（没有任何消息）。
*   如果按钮是较新的隐藏，更改其标题永远不会有问题。我总是工作。

**正确的标题在动画期间可见**

*   当由于上述情况的组合而忽略更改后退按钮标题的尝试时，无论如何，当点击此后退按钮并且页面的向右滑动动画时，正确的标题仍然可见约 0.3 秒处理。在动画开始时，旧的卡住标题被正确的标题替换，并且正确的标题在动画期间可见。

* * *

## 详细说明

这是关于 a`UINavigationController`的后退按钮上的文本。我根据新的语言设置更改此按钮标题。目前，我的应用在导航控制器堆栈中最多有 3 个视图控制器。它们中的每一个都是`UITableViewController 的不同子类。

表 1，named`GeneralTableVC`是堆栈上的根视图。它没有后退按钮。它为用户提供了他在应用程序中存储的内容的摘要，并显示了一个带有设置按钮的工具栏。

提供此工具栏的导航控制器在表 1 中可见。在表 2 和表 3 中设置为不可见。目前该工具栏中只有一个名为“设置”的按钮。触摸此设置按钮会将表 2 推入堆栈。

表 2，命名`SettingsTabVC`有一个后退按钮，这是在模拟器中出现问题但在运行 iOS 5.1 的真实 iPhone 4 上运行良好的按钮。

通过触摸表 2 的第一行，将创建一个新表（表 3）并将其推入堆栈。

表 3，命名`LangSelectTableVC`也有一个后退按钮，但是这个在 iPhone 模拟器和真正的 iPhone 4 两种设备上都很好用。

表 3 是一个语言选择表，显示了所有可用语言的列表（目前只有英语和德语）。触摸一行会立即更改设置。活动视图（表 3）将被重新绘制，并且在几毫秒内屏幕上的所有文本都以新语言出现。

重绘表格本身是没有问题的，导航栏的标题也是如此。但是后退按钮上的文字也必须翻译，这有点棘手。我在两个后退按钮上都做了同样的技巧，它适用于表 3 上指向表 2 的可见按钮。但是使用相同的代码，模拟器中存在问题（但不是真实的iPhone）使用表 2 上的按钮指向表 1。

我给你一些代码片段和一些截图来告诉你我做了什么以及发生了什么：

* * *

## 源代码

**ARC（自动引用计数）正在使用中。**

我确实定义了一个重绘协议：

**协议.h**

```
#ifndef ToDo_Project_Protocols_h
#define ToDo_Project_Protocols_h

@protocol redrawProt
- (void) mustRedraw;
@end

#endif 
```

这是表 1 的标题：

**通用表VC.h**

```
#import <UIKit/UIKit.h>
#import "Protocols.h"
// some other imports

@interface GeneralTabVC : UITableViewController <redrawProt>

@property id<redrawProt>   parent;
@property Boolean          mustRedrawMyself;
@property NSString*        backTitle;
@property UIBarButtonItem* myBackButton;
@property UIBarButtonItem* parBackButton;

- (id) initWithParent:(id<redrawProt>)par andBackTitle:(NSString*)bT andBackButton:(UIBarButtonItem*)bB;

@end 
```

其他表的头文件，`SettingsTabVC.h`并`LangSelectTabVC.h`定义相同的属性和相同的初始化函数

程序从这里开始：

**AppDelegate.m 的一部分**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    // some code
    GeneralTabVC* genTabCon = [[GeneralTabVC alloc] initWithParent:nil andBackTitle:nil andBackButton:nil];
    UINavigationController* navCon = [[UINavigationController alloc] initWithRootViewController:genTabCon];
    // some other code
} 
```

接下来是表 1 ( `GeneralTableVC.m`) 的实现。表 2 ( `SettingsTabVC.m`) 和表 3 ( `LangSelectTabVC.m`) 中的代码类似地相同。我没有展示实现协议 UITableViewDataSource 的那些代码部分。我认为这些部分对于解释问题并不是很重要。

`LocalizedString(keyword)`在这段代码中，您将找到与完全相同的宏`NSLocalizedString(keyword,comment)`，它将关键字翻译成所需的语言。我的这个宏版本使用不同的包进行翻译（不是主包）

**通用表VC.m**

```
#import "GeneralTabVC.h"
#import "SettingsTabVC.h"

#define MYTITLE @"summary"

id<redrawProt>   parent;
Boolean          mustRedrawMyself;
NSString*        backTitle;
UIBarButtonItem* myBackButton;
UIBarButtonItem* parBackButton;

@interface GeneralTabVC ()

@end

@implementation GeneralTabVC

@synthesize parent, mustRedrawMyself, backTitle, myBackButton, parBackButton;

- (void) mustRedraw {
    self.mustRedrawMyself = YES;
}

- (void) redraw {
    if ((self.parBackButton) && (self.backTitle)) {
        // Important!
        // here I change the back buttons title!
        self.parBackButton.title = LocalizedString(self.backTitle);
    }
    if (self.parent) {
        [self.parent mustRedraw];
    }
    self.title = LocalizedString(MYTITLE);
    [self.tableView reloadData];
    self.mustRedrawMyself = NO;
}

- (id) initWithParent:(id<redrawProt>)par andBackTitle:(NSString*)bT andBackButton:(UIBarButtonItem *)bB {
    self = [super initWithStyle:UITableViewStyleGrouped];
    if (self) {
        self.parent = par;
        self.mustRedrawMyself = NO;
        self.backTitle = bT;
        self.parBackButton = bB;
    }
    return self;
}

- (void) toolbarInit {
    // this method exists only in Table 1, not in other tables
    // it creates a UIBarButtonItem, adds it to self.toolbarItems
    // and makes it visible
}

- (void)SettingsAction:(id)sender {
    // this method exists only in Table 1, not in other tables
    // it will be executed after the user tabs on the settings-
    // button in the toolbar
    SettingsTabVC* setTabCon = [[SettingsTabVC alloc] initWithParent:self andBackTitle:MYTITLE andBackButton:self.myBackButton];
    [self.navigationController pushViewController:setTabCon animated:YES];
}

- (void) viewDidLoad {
    [super viewDidLoad];
    self.title = LocalizedString(MYTITLE);    
    // I want an Edit-Button. Localization of this button is
    // not yet done. At the moment is uses the systems language,
    // not the apps language.
    self.navigationItem.rightBarButtonItem = self.editButtonItem;
    [self toolbarInit];    
}

- (void) viewWillAppear:(BOOL)animated {    
    // this is an important method! Maybe here is the reason for 
    // my problem! 
    [super viewWillAppear:animated];
    // When ever this controllers view is going to appear, and  
    // when ever it is necessary to redraw it in a new language,
    // it will redraw itself:
    if (self.mustRedrawMyself) {
        [self redraw];
    }

    // And here comes the buggy back button:
    // When ever this controllers view is going to appear,
    // a new back button will be created with a title in the
    // new language:
    UIBarButtonItem* BB = [[UIBarButtonItem alloc] init];
    BB.title = LocalizedString(MYTITLE);
    self.myBackButton = BB;
    self.navigationItem.backBarButtonItem = self.myBackButton;
}

- (void) viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    // show toolbar:
    [self.navigationController setToolbarHidden:NO animated:YES];
}

// next methods are about InterfaceOrientation and the
// UITableViewDataSource protocoll. They are not important
// for the problem.

// but maybe the very last method is important. It comes in
// different versions in the three implementation files:

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    // This is the version of GeneralTableVC.m (Table 1)
    // It does nothing (at the actual stage of expansion, in later
    // versions it will start the main business logic of this app)
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    // This is the version of SettingsTableVC.m (Table 2)
    // Tabbing onto row 0 of section 0 will push the
    // language-selection-table (Table 3) on screen:
    if (indexPath.section == 0) {
        if (indexPath.row == 0) {
            // create Table 3:
            LangSelectTabVC* langTabCon = [[LangSelectTabVC alloc] initWithParent:self andBackTitle:MYTITLE andBackButton:self.myBackButton];
            [self.navigationController pushViewController:langTabCon animated:YES];
        } else {
            // do something else (nothing at this stage of expansion)
        }
    } else {
        // do something else (nothing at this stage of expansion)
    }
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    // This is the version of LangSelectTableVC.m (Table 3)

    // here I do some magic to select and store the new language.
    // Part of this magic is transforming indexPath.row
    // into a valid language-code, putting it into the 
    // settings-object, and registering this object to 
    // NSUserDefaults
}

@end 
```

* * *

## 截图

在 iPhone 5.1 模拟器上启动应用程序会将表 1 ( `GeneralTableVC`) 显示在屏幕上：

![启动应用程序后](../Images/87d2c79b2e5e456b8e568622244836fb.png)

在屏幕按钮的工具栏中，在其右侧，您可以找到一个设置按钮。按下此按钮会在屏幕上显示下一个表格：

![设置屏幕](../Images/358211b708c9cb324e62e6ea9935679f.png)

观看标题栏中的后退按钮。它显示文本“Summary”，这是正确的，因为之前的表格标题是“Summary”。

现在我们进入第一行（“ `Language English >`”）：

![在改变语言之前](../Images/8167cd6009b876a80f73cead24db760d.png)

一切安好。现在让我们更改语言。“”标签`German`：

![改变语言后](../Images/085433727c018acd1e6ae3db4a7093a3.png)

哇！现在一切都是德语。甚至后退按钮也从“设置”更改为“Einstellungen”。

让我们点击那个“Einstellungen”后退按钮：

![后退按钮在模拟器中的语言错误](../Images/db15635ff905ca00ed1c3e48ff11988c.png)

现在几乎一切都很好。一切都变成了德语。除了后退按钮之外的所有内容，它仍然显示“摘要”而不是“Überblick”。而且我不明白为什么，因为当我在我的真实 iPhone 4 上使用完全相同的源代码执行完全相同的步骤时，最后一个屏幕看起来像这样：

![真实 iPhone 上的正确语言](../Images/64c195ff2732c811dc0d25a053789ab9.png)

注意后退按钮上的文字。在真正的 iPhone 4 上它是德语单词“Überblick”（这是我想要的），但在模拟器中它是英语单词“Summary”。这对我来说意味着，在某些手机（比如我的 iPhone 4）上，用户会得到预期的结果，但可能在其他一些手机（可能是 iPhone 4S）上，用户会得到一个错误的显示。

有人知道我的代码有什么问题吗？

* * *

## 编辑

**编辑：** 2012-04-06 09:04 +02:00（中欧夏令时）

我确实设法在另一块硬件上测试了我的应用程序，旧 iPhone 3G (iOS 4.2.1) 在旧 iPhone 上，我的应用程序的行为方式与模拟器中完全相同。在 iPhone 4 上运行相同的应用程序会产生不同的行为。

更准确地说：

*   在 iPhone 4 (iOS 5.1) 上：应用程序正在做我想做的事，没有错误行为。
*   在模拟器上 (iOS 5.1)：应用程序在导航控制器的后退按钮上显示错误的标题。
*   在 iPhone 3G (iOS 4.2.1) 上：应用程序显示与模拟器中相同的错误行为。

* * *

**编辑：** 2012-04-07 10:14 +02:00（中欧夏令时间）

通过观看 iPhone 3G 上的转换，我发现了一些有趣且可能有帮助的东西：当我点击带有错误文本的按钮时，会发生以下情况：

1.  错误的文本被正确的文本替换
2.  在此替换后，视图会以动画方式消失（向右滑动），并且底层视图变得可见。这个过渡的持续时间大约为 0.3 秒，在这个短时间间隔内，所有硬件 iPhone 和模拟器中都可以看到正确的文本。

但问题仍然是：为什么 iPhone 3G 和 Simulator 会显示错误的文本？为什么在 iPhone 4 中总是可以看到正确的文本？

在我看来，就好像在同一个地方有两个按钮，一个接一个。在 iPhone 4 中，“我的”自定义按钮在前面，隐藏了旧的系统生成按钮，但在模拟器和 iPhone 3G 中，旧的系统生成按钮在前面，隐藏了我的自定义按钮。但是：即使我隐藏的自定义按钮比系统生成的更大（更宽），也没有任何可见的。只有当滑出动画开始时，我的按钮才可见。

* * *

**编辑：** 2012-04-07 16:38 +02:00（中欧夏令时间）

下一个有趣的事实：

这是到目前为止发生的事情：

当按钮第一次出现时（第二张截图，见下文），我在上面放了一个词作为标题，这与它之前从系统中变成的词相同。然后用户选择了一些动作，这个按钮被另一个视图隐藏了。在另一个用户操作之后，按钮再次显示，它现在应该得到一个新词作为标题（相同的含义，但新的语言），但在 iPhone 3G 和模拟器上，旧标题是“更强”。不会显示新标题。旧标题就在那里。

如果第一次出现我在按钮上写一个单词作为标题，这不会发生，这与系统生成的标题不同。如果第一个标题与默认标题不同，稍后将在所有 iPhone 和模拟器上执行更改。

这让我相信，iOS 做了某种“优化”：如果在第一次出现按钮时，自定义标题与系统生成的标题相同，那么稍后对按钮标题的更改将被忽略，但仅限于 iPhone 3G和模拟器。在 iPhone 4 上，任何情况下都允许稍后进行更改。

但是在开始时设置不同的标题以防止应用程序出现错误行为不是一种选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T09:34:16.307

我怀疑您看到的问题归结为模拟器上发生的序列与真实硬件之间的微妙时序问题。

视图控件不一定在 viewDidLoad 中实例化，因此您应该等到 viewWillAppear 设置标题值（等）。

以下是建设性的意思，请本着它的意图：

如果不详细检查您的代码，我怀疑您尝试实现的目标可以更确定地实现。您正在尝试做的事情并不难或不寻常，但恐怕您的代码看起来不必要地令人费解 - 可能是因为您试图解决这些时间问题。

查看一些简单的示例和教程，并简化您的代码，使其不使用标志来跟踪状态（mustRedrawMyself），因为这不是必需的。记住在 viewWillAppear 之前不要设置视图/控件的属性，然后看看你是怎么做的。

如果您还没有，您可能还想查看对本地化的内置支持。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T20:59:36.557

我会试试这个：

将 SELF REDRAW if 和执行移动到 AFTER 之后，您将在 viewWillAppear 中将其更新为您的本地化：

您在更改标题之前将视图告知 REDRAW，因此，标题更新不是重绘的一部分。它正在做它应该做的事情..我的猜测是某些硬件/模拟器上的计时操作更快，因此您在调用重绘之后所做的更新是在某些硬件/模拟器上完成绘制之前发生的，但在此之前没有完成平局发生在其他人身上。

尝试将操作顺序更改为以下，如果可行，请告诉我。

```
- (void) viewWillAppear:(BOOL)animated {
     // this is an important method! Maybe here is the reason for 
 // my problem!  
[super viewWillAppear:animated];
// And here comes the buggy back button: 
// When ever this controllers view is going to appear, 
// a new back button will be created with a title in the  
// new language:  
UIBarButtonItem* BB = [[UIBarButtonItem alloc] init]; 
BB.title = LocalizedString(MYTITLE);
 self.myBackButton = BB; 
self.navigationItem.backBarButtonItem = self.myBackButton; 

 // When ever this controllers view is going to appear, and 
  // when ever it is necessary to redraw it in a new language,  
// it will redraw itself: 
if (self.mustRedrawMyself) { 
    [self redraw];   
}  

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T11:06:39.050

## **苹果支持确实回答了**

我就这个问题联系了 Apple 支持，他们确实回答了。

问题是，导航栏包含导航控制器堆栈上视图的所有后退按钮，并且所有这些按钮都需要同时更新。在 viewWillAppear-Methods 中更新堆栈上的视图是好的，但是尝试在这个地方更新后退按钮不是一个好主意。

* * *

**解决方案：**

扩展 UIViewController 的接口：

```
@interface UIViewController (extended)
    - (NSString *)localizedKey;
@end 
```

对于在 UINavigationController 的堆栈上放置视图的每个 UIViewController 实现此方法：

```
- (NSString*) localizedKey {
    return @"a title-keyword";
} 
```

不要乱用`UIBarButtonItem`任何`self.navigationItem.backBarButtonItem`UIViewControllers。

如果需要更改标题，请使用此代码片段为所有后退按钮执行此操作（请记住：`LocalizedString(key)`是一个类似于 的自写宏`NSLocalizedString(key,comment)`）：

```
NSArray* vcs = [self.navigationController viewControllers];
for (UIViewController* vc in vcs) {
    vc.navigationItem.backBarButtonItem.title = LocalizedString([vc localizedKey]);
    vc.title = LocalizedString([vc localizedKey]);
} 
```

* * *

**Apple支持的逐字回答：**

> 我们正在与导航栏作斗争，以在错误的时间强制更新。请注意，每个视图控制器中的所有视图都会正确更新。所以导航栏需要特别注意才能得到我们想要的。
> 
> 为了使它工作，您需要一次将返回按钮更改为堆栈上的所有视图控制器（在用户选择一种语言时），而不是在它们每个都通过“viewWillAppear”出现时。
> 
> 这需要能够以公共方式获取该按钮的本地化密钥。我向 UIViewController 引入了一个类别来轻松采用它：
> 
> @interface UIViewController (扩展)
> - (NSString *)localizedKey;
> @结尾
> 
> 然后您的 LangSelectTabVC 类可以一次更改所有后退按钮。这种方法将使按钮标题正确重绘。
> 
> 因此，在 viewWillAppear 中，您不必更新每个后退按钮。UIKit 赶上更新似乎为时已晚。当发生更新时，您还可以重新创建一个新的后退按钮。这不是必需的，只需获取当前的并更改其标题：
> 
> NSArray *vcs = [self.navigationController viewControllers];
> for (UIViewController *vc in vcs)
> {
> vc.navigationItem.backBarButtonItem.title = LocalizedString([vclocalizedKey]);
> vc.title = LocalizedString([vc 本地化键]);
> }
> 
> 我附上了一个显示此解决方法的修改项目。

# math - 将数字从 1-.0000X 标准化为 1-0.0X？

> ID：10030366
> 
> 赞同：0
> 
> 时间：2012-04-05T14:17:20.927
> 
> 标签：math

我的数字范围为 1 - 0.00000X 。大多数是小数字，例如 0.000823。我如何映射它们以使它们的范围更近？我使用 sqrt 方法，但还有其他建议吗？

**更新**

1-0.1 之间的示例数字我对它们没有问题。我的问题是低于 0.1 的数字。我需要使它们更接近 0.1。

*   .00004 -> 0.0004 或 0.004
*   0.023 -> 0.05 或 0.09

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T14:31:48.187

[你试过对数吗？](http://xkcd.com/451/)

如果你的数字满足`eps < x <= 1`，函数

`y = 1 - C*log(x)`在哪里`C = 1/-log(eps)`

将数字映射到范围 0..1。如果不需要范围，只要数字靠近，您可以删除比例因子。

编辑：这当然可以不用减法来表达。

`y = 1 + C*log(x)`在哪里`C = 1/log(eps)`

例如，对于 0.0000000001 (10^-10) 的 epsilon，您会得到 C = -0.1 并且：

```
0.0000000001 => 0
0.000000001  => 0.1
0.00000001   => 0.2
...
0.1          => 0.9
1            => 1 
```

编辑：如果您不想将范围从 0.1 ... 1.0 更改为较小的数字，则只需将范围从 0 ... 0.1 缩放。这可以通过在应用函数之前将 x 乘以 10 来完成，然后再除以 10。当然，在这种情况下，仅当值小于 0.1 时才使用比例函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:31:30.327

好吧，一种简单的方法是计算最小值（例如`1-t`），然后将段重新映射`[1-t, 1]`到`[0, 1]`。映射函数可以是线性的：

```
xnew = (xold - 1) / t + 1 
```

（当然`t = 1 - min value`）

# qt - 将文件压缩为 a.qzip 的库

> ID：10030367
> 
> 赞同：1
> 
> 时间：2012-04-05T14:17:21.287
> 
> 标签：qt

我有一些扩展名为 qzip 的文件，例如 a.qzip。

这些文件似乎是用 qt 库压缩的。

谁能告诉我它是什么？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:55:49.677

根据[此常见问题解答页面](http://qt-project.org/faq/answer/how_to_compress_data_with_qt)：

> Qt 使用 zlib 库来提供压缩。这意味着您可以使用 Qt 压缩和解压缩字节数组数据。[...]
> 
> 请注意，这**不会生成可由其他应用程序打开的文件存档，**为此您需要使用 Qt 的自定义文件处理系统或使用第三方库自己编写它。

如果有人（懒惰地）使用[`qCompress()`](http://qt-project.org/doc/qt-4.8/qbytearray.html#qCompress)您创建了一个文件，则需要编写自己的代码以将文件作为 QByteArray 读取，然后使用相应的[`qUncompress()`](http://qt-project.org/doc/qt-4.8/qbytearray.html#qUncompress)方法来读取它。据我所知，没有与 Qt 相关的官方 qzip 格式，所以如果它成功了，你可能应该去拍打制作这些文件的开发人员！

通常，如果要压缩可重复使用的数据，请使用通用文件格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:36:51.497

这是我在整个 www over qzip 上找到的唯一参考。

[快点](http://www.quicklz.com/ "quicklz 库")

# ftp - 如何从多个包中导出 FTP 数据

> ID：10030370
> 
> 赞同：2
> 
> 时间：2012-04-05T14:17:29.720
> 
> 标签：ftp, export, wireshark, pcap

我已经尝试了几个小时来解决这个问题。谷歌搜索也像个疯子。如何从一堆包中导出 FTP 数据？就像您在 Wireshark 中导出 HTTP 包一样，只需单击几下，您就可以将所有包作为一个单独的包导出到文件中，然后打开 HTML 页面。

假设您下载了一个 .zip 文件（通过 FTP）并且您使用 Wireshark 捕获了它。现在我想将所有包含 .zip 文件的 FTP 数据包导出到 .zip 文件的副本中。我怎样才能做到这一点？我设法得到了包的所有 hexdumps（我认为这就是它的名字），它看起来像这样：

```
0000  00 50 56 ca 11 d8 00 50 18 03 39 80 08 00 45 00   .PV....P..9...E.
0010  04 34 06 34 40 00 2d 06 d3 6f c1 e7 ec 2a c0 a8   .4.4@.-..o...*..
etc... 
```

也许我可以以某种方式转换它？还是有其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T18:48:16.940

您可以使用[Bro](http://www.bro-ids.org)从 FTP 流量（以及其他协议）中提取文件。只需按如下方式运行它：

```
bro -r trace.pcap 'FTP::extract_file_types = /.*/' 
```

该模式控制要提取的文件的 MIME 类型。在网络接口上嗅探时更改`-r <trace>`为。`-i <interface>`Bro 在它正在运行的同一目录中创建日志文件。除了基本日志之外，您现在还可以找到名为

```
ftp-item_<SERVER-IP>:<SERVER-DATA-PORT>-<CLIENT-IP>:<CLIENT-PORT>.dat 
```

其中包含 FTP 数据的有效负载。

# c# - 查询语句

> ID：10030372
> 
> 赞同：1
> 
> 时间：2012-04-05T14:17:38.713
> 
> 标签：c#, var

我对 Linq 语句真的很陌生，但让我说我很喜欢它们。这里的任何问题都是我的问题

```
var faults = from e in _context.Faults
                     where e.Car_FK == Car_ID && e.Model_FK == Model_ID
                     select new { e.Time, e.Drive_Type}; 
```

我想知道是否可以在其中有一个 if 语句，这样如果 Model_ID 不存在，我可以设置另一个值，例如

```
 ViewData["Message"] =  "Please make another selection" 
```

我传入 Car_ID 和 Model_ID

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:49:50.080

进行查询后，您可以使用`Any`LINQ 扩展方法测试项目的可用性

```
if (faults.Any()) {
    // Display faults
} else {
    ViewData["Message"] =  "Please make another selection"  
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-05T14:21:12.520

您可以使用`? :`运算符在查询中包含 if 语句，或者如果您需要根据条件过滤项目，则可以将其放在`where`子句中。

但是，在您的情况下，您可能希望将其放在查询之外，因为您想更改应用程序的逻辑：

```
 if(Model_ID==null)
    ViewData["Message"] =  "Please make another selection"   
 else
 {
    var faults = from e in _context.Faults  
                 where e.Car_FK == Car_ID && e.Model_FK == Model_ID  
                 select new { e.Time, e.Drive_Type};  
    //...
 } 
```

**编辑：**见评论

# css - 将 div 隐藏在其父级后面？

> ID：10030386
> 
> 赞同：1
> 
> 时间：2012-04-05T14:19:09.523
> 
> 标签：css, css-position, css-transitions

```
<div class="content-wrapper">
    <div class="popup">
        <div class="close">
        </div>
    </div>
</div> 
```

.content-wrapper 相对定位，包含所有页面内容（不仅仅是弹出窗口）。

.popup 绝对定位。

.close 也是绝对定位的。

当光标进入弹出窗口时，我有一些 javascript 可以关闭（所以我有一个很好的关闭栏出现在侧面）。我发现做到这一点的最好方法就是使用 jQuery animate 移动。即使 .stop() 无法解决，隐藏/显示也会产生口吃效果。我的问题是试图将 .close 隐藏在 .popup 后面。无论我为两个 div 设置什么 z-index .close 都不会位于 .popup 后面。

是否有可能在另一个绝对定位的 div 内有一个绝对定位的 div 位于其父级的后面，如果可以，如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T14:24:26.790

是的，使用 z-index：http: [//jsfiddle.net/tGd4Q/](http://jsfiddle.net/tGd4Q/)

HTML：

```
<div class="content-wrapper">
    <div class="popup">
        <div class="close">
        </div>
    </div>
</div>​ 
```

CSS：

```
.popup, .close { position: absolute; height: 200px; width: 200px; }
.popup { background: #f00; }
.close { background: #ff0; top: 25px; left: 25px; z-index: -1; }​ 
```

不过，这不适用于 IE7 标准。我建议使用 jQuery（或您选择的其他框架）来隐藏 div：

```
$('.popup .close').hide(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T14:24:54.657

堆叠索引大部分时间都与兄弟姐妹相关，因此您不能使用`z-index`.

[这](http://www.vanseodesign.com/css/css-stack-z-index/)是有关此的更多信息。

这是堆叠顺序：

1.  当前堆叠上下文的边框和背景
2.  具有负 z-index 的定位后代
3.  未定义 z-index 属性的非定位块级后代——段落、表格、列表等
4.  浮动后代及其内容
5.  非定位内联内容
6.  没有 z-index、z-index: auto 或 z-index: 0 的定位后代
7.  z-index 大于 0 的定位后代

Nick McCormack`z-index: -1`在他的回答中使用。这确实是您的感受所放弃的一个例外。请注意，将您的**许多**`z-index: -1`元素背后的元素移动到背景中。

 **## 浏览器差异

除此之外，Internet Explorer 不支持负堆叠索引，并且对元素（子/父）位置非常严格。每个元素级别都有自己的堆叠上下文，因此必须通过父元素“通信”。请参阅[此说明](http://brenelz.com/blog/squish-the-internet-explorer-z-index-bug/)。

根据[Smashing Magazine](http://coding.smashingmagazine.com/2009/09/15/the-z-index-css-property-a-comprehensive-look/)的说法，作为窗口控件的`select`元素自然具有更高的堆叠索引。

根据[Shadowbox](http://www.shadowbox-js.com/options.html) `troubleElement`选项，我认为`object`,`embed`并且`canvas`有同样的问题。

* * *

如果你想隐藏`.close`，你为什么不把它藏起来，而不是把它移到后面`.popup`呢？

```
$('.close').hide(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T14:25:46.313

不，你不能把它放在它的父级后面。但是，您可以将其显示模式更改为无，因此根本看不到它。然后当你需要查看 div 时，将其更改为显示。

简单的 jQuery：

```
$('.close').hide();
$('.close').show(); 
```

还有其他方法，例如添加带有`display:none`或`display: inline-block`作为设置的样式属性。

**更新**：根据其他答案中的评论，有一种方法可以使用 z-index。仍然认为隐藏/显示是要走的路。非常清楚你在 UI 上做了什么。**

# spring - 无法修复：“java.lang.String”到所需类型“java.util.Collection”

> ID：10030389
> 
> 赞同：1
> 
> 时间：2012-04-05T14:19:22.037
> 
> 标签：spring, jakarta-ee

提交表单时出现此错误，但无法弄清楚为什么会发生这种情况。我相信 taglib 应该处理这个问题。我尝试将在我的 jsp 中传递的值更改为，`itemValue="id"`但它没有任何影响。

```
org.springframework.validation.BindException: org.springframework.validation.BeanPropertyBindingResult: 1 errors
Field error in object 'content' on field 'stateCollection': rejected value [com.myapp.cmt.model.State[ id=3 ]]; codes [typeMismatch.content.stateCollection,typeMismatch.stateCollection,typeMismatch.java.util.Collection,typeMismatch]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [content.stateCollection,stateCollection]; arguments []; default message [stateCollection]]; default message [Failed to convert property value of type 'java.lang.String' to required type 'java.util.Collection' for property 'stateCollection'; nested exception is java.lang.IllegalStateException:
Cannot convert value of type [java.lang.String] to required type [com.myapp.cmt.model.State] for property 'stateCollection[0]': no matching editors or conversion strategy found] 
```

**我的jsp**

```
<strong>State</strong><br/>
<form:checkboxes path="stateCollection" items="${states}" itemLabel="name"/> 
```

**我的内容**

```
public class Content implements Serializable {
.......

    @JoinTable(name = "content_to_state", joinColumns = {
        @JoinColumn(name = "content_id", referencedColumnName = "id")}, inverseJoinColumns = {
        @JoinColumn(name = "state_id", referencedColumnName = "id")})
    @ManyToMany
    private Collection<State> stateCollection;

.....

    @XmlTransient
    public Collection<State> getStateCollection() {
        return stateCollection;
    }

    public void setStateCollection(Collection<State> stateCollection) {
        this.stateCollection = stateCollection;
    }

..... 
```

**我的控制器**

```
...
@RequestMapping(value = "/{guid}/save", method = RequestMethod.POST)
public ModelAndView saveContent(@ModelAttribute("content") Content content, @PathVariable("guid") String guid) {
    try {
        // Save the modified object
        contentService.save(content);
    } catch (IllegalOrphanException ex) {

... 
```

**我的内容服务**

```
...
@Transactional
public void save(Content content) throws IllegalOrphanException, NonexistentEntityException, RollbackFailureException, Exception {
    try {
        utx.begin();
        em.merge(content);

        utx.commit();
    } catch (Exception ex) {

    } finally {
        if (em != null) {
            em.close();
        }
    }
}

... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:29:26.307

你的标题不正确。您已声明 a`Collection<State>`您的输入是 a `String`。Spring 不知道如何`State`从 a 中生成 a `String`，你必须告诉它。请看这个问题：[Converting from String to custom Object for Spring MVC form Data binding?](https://stackoverflow.com/questions/912257/converting-from-string-to-custom-object-for-spring-mvc-form-data-binding)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-26T05:46:44.053

我有同样的问题。我正在使用 Spring，Hibernate。我有一个具有复合主键的类并在请求中传递了两个参数，我的错误是：

```
@Entity
@Table(name = "TAREAS")
public class Tarea implements Serializable {

   private static final long serialVersionUID = 1L;
   protected TareaPK clave;
   private String descripcion;
   .....
} 
```

控制器：

```
 @RequestMapping(value = "/tareas", params = {"clave", "tipot"}, method = RequestMethod.GET)
   public String formularioTareaEditar(
       @RequestParam(value = "clave") String clave,
       @RequestParam(value = "tipot") String tipoTrabajo,
       Model model) {
     Tarea tarea = catalogoService.getTarea(tipoTrabajo, clave);
     model.addAttribute(tarea);
     return "tarea/editar";
   }

   @RequestMapping(value = "/tareas", params = {"clave", "tipot"}, method = RequestMethod.POST)
   public String tareaEditar(@Valid @ModelAttribute Tarea tarea, BindingResult result) {
      if (result.hasErrors()) {
         return "tarea/editar";
      } else {
         catalogoService.edit(tarea);
         return "redirect:/tareas";
      }
   } 
```

所以......当信息进入控制器时，参数`clave`被认为是`TareaPK`主键的对象。

我只是在我的控制器中更改参数的名称。

```
@RequestMapping(value = "/tareas", params = {"txt_clave", "tipot"}, method = RequestMethod.GET)
public String formularioTareaEditar(...){
...
} 
```

# entity-framework-4.1 - EntityFramework 4.1 Code First 错误地命名复杂类型列名

> ID：10030390
> 
> 赞同：4
> 
> 时间：2012-04-05T14:19:23.190
> 
> 标签：entity-framework-4.1

假设我有一个名为 Users 的表，其中包含您的典型信息：Id、Name、Street、City——很像这里的示例：

[http://weblogs.asp.net/manavi/archive/2010/12/11/entity-association-mapping-with-code-first-part-1-one-to-one-associations.aspx](http://weblogs.asp.net/manavi/archive/2010/12/11/entity-association-mapping-with-code-first-part-1-one-to-one-associations.aspx)。

除其他外，这篇文章指出：

“Code First 有一个复杂类型发现的概念，它基于一组约定工作。约定是，如果 Code First 发现一个无法推断主键的类，并且没有通过 Data Annotations 或 fluent API 注册主键, 则该类型将自动注册为复杂类型。复杂类型检测还要求该类型不具有引用实体类型的属性（即所有属性必须是标量类型）并且不从另一个类型上的集合属性引用。” 我的 Address 类符合这些标准：它由字符串组成，不在其他任何地方使用。

但是，在应用程序中（我不确定这是否有任何区别），我们将用户称为其他东西 - 例如，Techs。我想将用户的地址列分解为一个地址，以便每个技术人员都可以拥有自己的地址。根据上面的文章，EF 应该自动推断并处理复杂类型。但是，当上下文试图给我一个技术时，我得到的是以下例外：

```
System.Data.EntityCommandExecutionException: An error occurred while executing t
he command definition. See the inner exception for details. ---> System.Data.Sql
Client.SqlException: Invalid column name 'Address_Street'.
Invalid column name 'Address_City'.
Invalid column name 'Address_State'.
Invalid column name 'Address_Zip'. 
```

看起来它试图理解 Tech.Address 属性，但给它的每个子属性都赋予了错误的名称（例如，“Address_City”而不是“City”）。

关于如何纠正这个问题的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T14:36:18.063

那是正确的行为。默认约定总是为映射到具有类型名称的复杂类型的属性添加前缀。如果要使用不同的列名，则必须通过数据注释映射它们：

```
public class Address
{
    [Column("City")]
    public string City { get; set; }
    ...
} 
```

或通过流畅的 API：

```
modelBuilder.ComplexType<Address>().Property(a => a.City).HasColumnName("City"); 
```

# css - 以正文为父对象杀死绝对图像上的水平滚动

> ID：10030393
> 
> 赞同：2
> 
> 时间：2012-04-05T14:19:32.237
> 
> 标签：css, background, css-position, horizontal-scrolling

我没有在这里问太多的 CSS 问题，所以就这样吧。

假设我有一个页面：

```
<body>
   <div id="wrap">//page containment, etc.. goes here..</div>
   <img class="custom-bg" src="example.jpg" />
</body> 
```

然后我特别为图像写了一些CSS：

```
#wrap {
   z-index: 100;
}
img.custom-bg {
   position: absolute;
   top: 1000px;
   left: 50%;
   margin-left: -960px //the image is 1290px wide
   z-index: 0;
} 
```

如果你现在不能说，是的，我正在尝试使用绝对定位创建背景图像。是的，我知道，我可以将图像设置为 body 标签的背景并使用定位来放置它，但是为了这个问题，假设这不是我的选择。

手头的问题是水平滚动条的出现。谷歌充满了人们关闭溢出和其他东西的例子，但我很好奇是否有人能够在执行上述操作时找到/创建一个明确的方法来删除水平滚动条。一个绝对的形象，它自己快乐地生活。居中。而不是“附加”到窗口...因此无需浏览器让用户知道有一个非常大的图像，他们只需要通过水平滚动一点来查看它。

任何见解都会很棒。我包含尽可能少的代码，以便可能搜索此示例并且是 web 开发新手的人可以轻松地理解如何解决他们关于绝对定位和水平滚动的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:34:18.453

我可能错过了这里的重点，但你为什么不直接使用`position:fixed`呢？

[http://jsfiddle.net/shanethehat/7MetS/](http://jsfiddle.net/shanethehat/7MetS/)

# php - php 我已经包含了一个文件，但不能调用类内的函数

> ID：10030397
> 
> 赞同：0
> 
> 时间：2012-04-05T14:19:43.997
> 
> 标签：php, class, function, include

我已经在另一个文件中包含了一个文件，现在我想使用包含文件中的一个函数。

当我转到包含的文件并将变量放在那里时，变量被传递并且一切都很好
- 这意味着我已经包含了正确的文件。

但是当我想调用一个类内的函数时

```
class SimpleViewer {
.
.
.
.
function whatever(){} 
```

它只是不调用它，当我每个它和写

> 致命错误：调用未定义函数 display_gallery_table()...

我确定我在正确的文件中，因为其他值传递但我什么也不能调用，因为它在类中

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:21:57.103

尝试像这样首先启动类的实例

```
$myClass = new SimpleViewer(); 
```

然后像这样调用函数

```
$myClass->whatever(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T14:21:21.457

```
$var = new SimpleViewer();
$var->whatever(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T14:22:26.913

您需要先创建对象的实例；

```
$obj = new Class();
$obj->func(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T14:29:41.283

有很多方法可以在类之间调用函数。我知道的第一个是静态方法调用。您可以通过定义来调用函数`class::function()`。

例子 ：

```
public class Parent{
    public static function check(){
        ....
        ....
    }
} 
```

静态调用者可能看起来很像

```
Parent::check() 
```

第二种方法是将类作为新对象启动。从示例中，我们可以像

```
$obj = new Parent;
$obj->check(); 
```

实现这一点的其余手册在[php 手册上](http://php.net/manual/en/language.oop5.php)

# javascript - 小型 JavaScript 悬停滑块图片库在 Firefox 中不起作用

> ID：10030400
> 
> 赞同：0
> 
> 时间：2012-04-05T14:19:54.420
> 
> 标签：javascript, jquery, events, mouse

我最近为我在过去半年里一直在不停地工作的网站的图片部分找到了完美的迷你脚本。我让它工作，但显然在 Firefox 中它不想玩得很好。更奇怪的是我玩过它。我所有的参考都很好，但事情不会像我说的那样做。另一个奇怪的地方是我在谷歌搜索了一些代码，再次找到它（检查它），你不知道：这个化身在 WebKit 上完美运行，甚至在 Firefox 上完美运行！我即将把头发拉出来，所以，任何帮助表示赞赏。顺便说一句，有问题的脚本会在 DIV 末尾动态加载。我的网站（图片部分）：[http](http://www.elemovements.com/pictures) ://www.elemovements.com/pictures和副本：[http ://www.gmcbryde.com/](http://www.gmcbryde.com/). 这也是代码，只是为了很好的衡量（您可以在[http://el.x10.mx/js/logic/pictures.js](http://el.x10.mx/js/logic/pictures.js)找到未缩小的代码[您只需要关注前 40-50 行或所以]）：

```
if ( $('div.highslide-gallery').length ) {

    $( function() {

        var $Div = $('div.highslide-gallery'),
            $Ul = $('ul.horiz-list'),
            $UlPadding = 0;

        $Ul.width(9000);
        $Div.width( $Div.parent().parent().width() - 26 );

        var $DivWidth = $Div.width();

        $Div.css( {overflow: 'hidden'} );

        var lastLi = $Ul.find('li:last-child');

        $Div.mousemove(function(e){

            var $UlWidth = lastLi[0].offsetLeft + lastLi.outerWidth() + $UlPadding; 

            var left = (e.pageX - $Div.offset().left) * ($UlWidth-$DivWidth) / $DivWidth;

            $Div.scrollLeft(left);

        } );

    } );

} 
```

我遇到的问题是 DIV 不会在 Firefox 中移动。在 WebKit 中，它按预期工作，但在优秀的 Mozilla 中发生的所有事情都是`mousemove()`事件被触发。我感谢任何人的帮助。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T16:13:40.797

我只记得 Firefox 需要元素的初始宽度，而在我第一次废弃它之后，我忘记了再次包含我为它准备的 CSS。这让一切变得不同。不管怎么说，还是要谢谢你！

# asp.net - 在我的 gridview 中找不到控件

> ID：10030408
> 
> 赞同：3
> 
> 时间：2012-04-05T14:20:28.307
> 
> 标签：asp.net, vb.net

我有一个简单的gridview，其中一行包含一个标签。我试图在 RowDataBound 事件中访问该标签，但由于某种原因，我不断收到“对象引用未设置为对象实例”。我正在使用 FindControl 的行出现错误。

我试过使用“gvQReport.FindControl”、“e.Row.FindControl”和“Me.FindControl”，但没有任何效果。

我这样做不正确吗？

谢谢！

```
 Protected Sub gvQReport_RowDataBound(ByVal sender As Object, ByVal e As GridViewRowEventArgs)
         Dim lblTest As Label = CType(gvQReport.FindControl("lblTest"), Label)
         lblTest.Text = "test Label"
    End Sub

<asp:GridView ID="gvQReport" OnRowDataBound="gvQReport_RowDataBound" runat="server">
     <Columns>
            <asp:TemplateField HeaderText="Test">
                <ItemTemplate>
                    <asp:Label ID="lblTest" runat="server" Text=""></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
     </Columns>
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T14:23:38.383

的[Row](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewroweventargs.row.aspx)属性`GridViewRowEventArgs`是当前行，在那里查找您的控件而不是整个`GridView`.

```
Protected Sub gvQReport_RowDataBound(ByVal sender As Object, ByVal e As GridViewRowEventArgs)
     If e.Row.RowType = DataControlRowType.DataRow Then
         Dim lblTest As Label = CType(e.Row.FindControl("lblTest"), Label)
         lblTest.Text = "test Label"
     End If
End Sub 
```

# sitecore - 使用 ProgressBox 时 System.Web.HttpContext.Current 的替代方案

> ID：10030411
> 
> 赞同：3
> 
> 时间：2012-04-05T14:20:35.630
> 
> 标签：sitecore

我正在使用 ProgressBox 运行一个很长的过程，并且在该过程中我使用 System.Web.HttpContext.Current.Server.MapPath() 方法，由于 System.Web.HttpContext.Current 为空而引发异常，是否有任何方法可以做同样的事情功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T14:41:59.927

您可以使用

```
HostingEnvironment.MapPath(string path) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T14:27:52.163

是的。

```
Sitecore.IO.FileUtil.MapPath(string path) 
```

将虚拟文件路径映射到物理文件路径。

**参数** path - 虚拟文件路径。

**返回值** 物理文件路径。

**备注** 如果文件路径为空、包含反斜杠 () 或包含字符串“://”，则返回路径本身。

**示例** 下面的示例返回数据文件夹中 mydata.xml 文件的物理文件名。之后，文件名变量保存一个值，如“c:\inetpub\wwwroot\default website\sitecore\data\mydata.xml”。

```
string filename = FileUtil.MapPath("/sitecore/data/mydata.xml"); 
```

# python - 如何将（继承）父类转换为子类？

> ID：10030412
> 
> 赞同：10
> 
> 时间：2012-04-05T14:20:36.130
> 
> 标签：python, class, inheritance

我想知道如何将某个函数返回的父对象转换为子类。

```
class A(object):
    def __init__():
        pass

class B(A):
    def functionIneed():
        pass

i = module.getObject() # i will get object that is class A
j = B(i) # this will return exception
j.functionIneed() 
```

我无法更改 A 类。如果可以的话，我会将 functionIneed 实现为 A 类，但由于代码结构，这是不可能的。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-05T14:24:31.043

Python 不支持“强制转换”。您将需要编写`B.__init__()`以便它可以接受`A`并适当地初始化自己。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-05T14:28:28.350

I have a strong suspicion, nay, conviction, that there is something horribly wrong with your program design that it requires you to do this. In Python, unlike Java, very few problems require classes to solve. If there's a function you need, simply define it:

```
def function_i_need(a):
     """parameter a: an instance of A"""
     pass # do something with 'a' 
```

However, if I cannot dissuade you from making your function a method of the class, you can change an instance's class by setting its `__class__` attribute:

```
>>> class A(object):
...     def __init__(self):
...         pass
... 
>>> class B(A):
...     def functionIneed(self):
...         print 'functionIneed'
... 
>>> a = A()
>>> a.functionIneed()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'A' object has no attribute 'functionIneed'
>>> a.__class__ = B
>>> a.functionIneed()
functionIneed 
```

This will work as long as B has no `__init__` method, since, obviously, that `__init__` will never be called.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-05T19:34:52.713

你说你想实现这样的东西：

```
class B(A):
    def functionIneed():
        pass 
```

但实际上你要做的更像是这样的（除非你一开始就打算创建一个[类](http://docs.python.org/py3k/library/functions.html#classmethod)或[静态](http://docs.python.org/py3k/library/functions.html#staticmethod)方法）：

```
class B(A):
    def functionIneed(self):
        pass 
```

然后就可以调用了`B.functionIneed(instance_of_A)`。[（这是必须显式传递`self`给方法](http://docs.python.org/py3k/faq/design.html#why-must-self-be-used-explicitly-in-method-definitions-and-calls)的优点之一。 ）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-13T15:18:13.917

您没有正确定义您的类。应该是这样的：

```
class A(object):
    def __init__(self):
        pass

class B(A):
    def __init__(self):
        super(B,self).__init__()

    def functionIneed(self):
        pass 
```

那么你也能

```
j=B()
j.fuctionIneed() 
```

正如预期的那样

你忘了参考ins

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-21T20:47:25.640

只是跳出框框思考：

与其使用您想要的功能的新类，不如将功能添加到您已经拥有的类或实例中？

[在将方法添加到现有对象实例](https://stackoverflow.com/a/2982/3950334) 中有很好的描述

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-10T17:13:03.080

怎么样：

```
i = module.getObject() # i will get object that is class A
try:
    i.functionIneed()
except AttributeError:
    # handle case when u have a bad object 
```

阅读鸭子打字。

# c# - 将联合查询转换为 LINQ 到实体查询

> ID：10030415
> 
> 赞同：3
> 
> 时间：2012-04-05T14:20:51.427
> 
> 标签：c#, linq, entity-framework

有人可以帮助我以正确的方式将此查询转换为 Linq 到实体查询。我对 Linq 还很陌生，想正确地编写这些查询。对于我对 UNION 和其中的子查询所做的事情，这是一个相当复杂的问题

```
SELECT pf.FileID, pf.ServerName, pf.MigrationType 
FROM pOrders pf 
WHERE pf.FileID IN (select GCMFileID FROM Signals
                    where SignalFileID = " + FileID + ")
UNION 
SELECT pf.FileID, pf.ServerName, pf.MigrationType
FROM pOrders pf 
WHERE pf.FileID = " + FileID + "
order by pf.MigrationType desc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:34:52.353

我知道，我看到了评论……但是

```
var signalIds = Signals.Where(s => s.SignalFileId = FILEID).Select(x => x.GCMFileID ).ToArray();

pOrders.Where(pf => signalIds.Contains(pf.FileID))
.Union(
pOrders.Where(pf => pf.FileID == FILEID))
.OrderByDescending(u => u.MigrationType)
.Select(u => new {u.FileID, u.ServerName, u.MigrationType}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:36:11.247

```
var innerquery = from t in db.Signals
                 where t.SignalFileID == FileID
                 select new {t.SignalFieldID};
var query = (from p in db.pOrders
            where p.FieldID.Contains(innerquery.SignalFieldID)
            select new {p.FileID, p.ServerName, p.MigrationType}).Union
            (from p in db.pOrders
            where p.FieldID ==FieldID
            orderby p.MigrationType
            select new {p.FileID, p.ServerName, p.MigrationType}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-03T00:18:48.357

我知道这是一个老问题，但我想我会加两分钱，希望我可以为那些认为我最初认为 Union() 是正确使用方法的人节省一些时间。

我的第一个错误是在我遇到第一个错误后使用我的实体的逻辑键创建一个自定义比较器，即 xml 列类型不能用于不同的类型。然后，Linq to Entities 抱怨它不承认 Union()。我注意到接受的答案调用 ToArray。这会在执行联合之前将第一个查询的整个结果带入内存。OP 想要 Linq to Entities，所以你需要对 IQueryable 采取行动。使用连接。整个查询将在数据库中运行。

```
var innerquery = (from t in db.Signals
             where t.SignalFileID == FileID
             select t.SignalFileID);
var query = (from p in db.pOrders
        where innerquery.Contains(p.FileID)
        select new {p.FileID, p.ServerName, p.MigrationType})
    .Concat(from p in db.pOrders
        where p.FileID == FileID
        select new {p.FileID, p.ServerName, p.MigrationType})
    .OrderBy(o => o.MigrationType); 
```

# user-interface - 解释/记录一个复杂的机制

> ID：10030416
> 
> 赞同：0
> 
> 时间：2012-04-05T14:21:01.887
> 
> 标签：user-interface, command-line, documentation, user-input

我在两个世界之间徘徊，我在命令行工具中有这个非常直观（但复杂）的机制，我想知道我应该在多大程度上解释这一点。

我可以采用简单的方式，根本不解释它，并相信我的用户自己会弄清楚，但是有些用户可能永远不会发现这个特定的功能。

我可以采取可怕的方式，在帮助输出和手册页中加入大量数学符号，但随后用户可能会认为这太复杂了，他们可能会对我的工具或这个特定功能产生莫名的恐惧。

我如何同时解决实验性用户和保守用户（当某些事情没有得到正确解释时不会加倍努力的用户）？

**详细信息：**
该工具是关于日期和时间算术的，特别是计算两个日期和/或时间之间的持续时间，并根据格式规范格式化结果。

我的内部设计使用这样的乘法表：

```
-  x  d  t  dt
x  x  x  x  x
d  x  D  x  D
t  x  x  T  x
dt x  D  x  S 
```

其中`x`是未知（不可解析）输入，`d`是日期，`t`是时间并且`dt`是日期时间，`D`是日期持续时间（分辨率为 1 天），`T`是持续时间（分辨率为 1 秒），并且`S`是时间戳持续时间（分辨率 1 秒）。

现在结果取决于持续时间类型和给定的格式说明符，我真的缺乏一种简洁的方式来解释这一点，所以我举个例子：

```
'%d' will return the duration in days (like 12 days)
'%w' will return the duration in weeks (like 1 week)
'%w %d' will return the duration in weeks and days (like 1 week and 5 days)
...
'%S' will return the duration in seconds (e.g. 86464 seconds)
'%M' will return the duration in minutes (e.g. 1441 minutes)
'%H' will return the duration in hours (e.g. 24 hours)
'%H %M %S' will return the duration in hours, minutes and seconds (24h 1m 4s)
'%H %S' will return the duration in hours and seconds (24h 64s)
... 
```

我的意思是，我可能只用这几个例子就可以弄清楚我的意思，但是那里没有正式的解释或任何东西。

**为清楚起见：**
我试图解决的问题是您可以组合任何标志（秒、小时、天、月等），程序将“智能地”为您提供结果。Like`%Y %d`会给你一年和天数（在 0 到 365 范围内），而`%Y %m %d`会给你在 0 到 30 范围内的天数（因为其余的都是在当月“捕获”的）。

示例：`%Y %d`给出`1 year 90 days`而`%Y %w %d`给出`1 year 12 weeks 6 days`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:25:04.380

如果您希望在工具本身中创建帮助文本，请查看 linux [date](http://linux.die.net/man/1/date)命令的帮助。

或者，您可以执行以下操作：

```
$ your_app --help

 usage: your_app [OPTIONS] [FORMAT]

 Returns the elapsed time between blah blah....

 FORMAT:

 // list formats here

 OPTIONS:

 --help           Display this help text
 --help-detailed  Display more extensive help text
 --help-examples  Display example uses 
```

如果我是用户，我希望`--help`列出所有选项作为参考，并且希望手册页包含尽可能多的细节。我倾向于使用 --help 作为提醒，使用手册页作为权威参考。

不管文本写得多么好，一些具体的例子总是有价值的。

# asp.net - 将自定义数据添加到 POST

> ID：10030418
> 
> 赞同：0
> 
> 时间：2012-04-05T14:21:05.330
> 
> 标签：asp.net, file-upload

我有一个包含 3 个文件输入的网页。当用户上传文件时，表单上有特定的字段需要发送。我无法弄清楚如何将自定义数据添加到我的 POST 以及如何在服务器上检索它。这就是我的代码的样子：

具有 3 个文件输入和其他文本框/下拉列表的 ASPX 页面：

```
<form action="FilesUploader.ashx" method="post">

    <div id="dvNewAttachment1">
        <span>Attachment Type</span>
        <select id="ddlAttachmentType1">
            <option>T1</option>
            <option>T2</option>
            <option>T3</option>
        </select>
        <span>Description</span>
        <input id="txtDesc1" />
        <select id="ddlApproval1">
            <option>Yes</option>
            <option>No</option>
        </select>
        <input id="fileUploader1" type="file" runat="server" />
    </div>
    <br />
    ---------------
    <div id="dvNewAttachment2">
        <span>Attachment Type</span>
        <select id="ddlAttachmentType2">
            <option>T1</option>
            <option>T2</option>
            <option>T3</option>
        </select>
        <span>Description</span>
        <input id="txtDesc2" />
        <select id="ddlApproval2">
            <option>Yes</option>
            <option>No</option>
        </select>
        <input id="fileUploader2" type="file" runat="server" />
    </div>
    <br />
    -------------------------------
    <div id="dvNewAttachment3">
        <span>Attachment Type</span>
        <select id="ddlAttachmentType3">
            <option>T1</option>
            <option>T2</option>
            <option>T3</option>
        </select>
        <span>Description</span>
        <input id="txtDesc3" />
        <select id="ddlApproval3">
            <option>Yes</option>
            <option>No</option>
        </select>
        <input id="fileUploader3" type="file" runat="server" />
    </div>

<input type="submit" />

</form> 
```

这就是我的处理程序的样子：

```
public void ProcessRequest(HttpContext context)
        {

            HttpPostedFile myFile = context.Request.Files[0];

            int nFileLen = myFile.ContentLength;

            byte[] buffer = new byte[nFileLen];

            using (BinaryReader br = new BinaryReader(myFile.InputStream))
            {
                br.Read(buffer, 0, buffer.Length);
            }

        } 
```

如您所见，我有 3 个上传，每个都有与之关联的附件类型和描述，我需要为处理程序中的每个输入文件检索它们。

现在我只是处理来自第一个输入的文件，但稍后我将循环输入并处理它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:30:01.280

如果您的处理程序没有收到您放置在文件上传器中的文件，那么您的表单需要具有如下附加属性：

```
<form action="FilesUploader.ashx" method="post" enctype="multipart/form-data"> 
```

为了从服务器上的下拉列表中获取值，您需要为`name`它们提供一个属性：

```
<select id="ddlApproval1" name="ddlApproval1">
    <option>Yes</option>
    <option>No</option>
</select> 
```

# java - PropertyPlaceholderConfigurer 不适用于 ClassPathXmlApplicationContext

> ID：10030420
> 
> 赞同：1
> 
> 时间：2012-04-05T14:21:09.140
> 
> 标签：java, spring, spring-aop

我正在尝试使用 PropertyPlaceholderConfigurer 加载位于属性文件中的一些变量，但它不起作用。互联网上的一些网站建议当 spring aop 不在类路径中时会出现问题，但我确保 aop 框架在我的项目中。这是我的springContext.xml：

```
 <!-- Register all placeholder locations -->
<bean
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer" >
    <property name="order" value="0" />
    <property name="ignoreUnresolvablePlaceholders" value="true" />
    <property name="locations">
        <list>
            <value>file:/mypath/file.properties</value>             
        </list>
    </property>
</bean>

<!-- Register all placeholder locations -->
<password-decrypter order="10" id="passwordConfigurer">
<decrypter algorithm="PBEWithSHAAnd128BitRC4" key="${Encryption.key}" />
    <decryption-entries>
        <decryption-entry bean-ref="ds" properties="password" />
    </decryption-entries>
</password-decrypter> 
```

这是抛出的错误：

```
Caused by: org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'password-decrypter'.
at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:195)
at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:131)
at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:384)
at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:318)
at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator$XSIErrorReporter.reportError(XMLSchemaValidator.java:417)
at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.reportSchemaError(XMLSchemaValidator.java:3182)
at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(XMLSchemaValidator.java:1927)
at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.startElement(XMLSchemaValidator.java:705)
at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:400)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2755)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)
at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:140)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:235)
at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:284)
at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:76)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:351)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:303)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:280)
at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:131)
at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:147)
at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:173)
at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:112)
at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:79)
at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:101)
at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:389)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:324)
at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:91)
at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:75)
at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:65) 
```

在容器外运行程序以将 PropertyPlaceholderConfigurer 与 ClassPathXmlApplicationContext 一起使用时，我是否需要做一些不同的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-16T17:10:36.567

对此有另一种方法。您可以尝试如下所述。

不要在 applicationContext.xml 中定义 PropertyPlaceholderConfigurer ，而是使用下面的代码在 ServletContextListener 中定义它

```
 PropertyPlaceholderConfigurer configurer = new PropertyPlaceholderConfigurer();
    ResourceLoader resourceLoader = new DefaultResourceLoader();
    Resource resource = resourceLoader.getResource("classpath:localDB.properties");

    configurer.setLocation(resource);
    configurer.postProcessBeanFactory(beanFactory); 
```

这里*beanFactory*是一个使用 ClassPathResource 创建的*XmlBeanFactory 。*

属性文件 localDB.properties 可以包含适当的值，它们可以在 applicationContext.xml 中用作*${Encryption.key}*，这里 Encryption.key 是属性文件中的密钥之一

# php - 尝试在 PHP 中创建对象 DateTime 时出错

> ID：10030437
> 
> 赞同：1
> 
> 时间：2012-04-05T14:22:49.040
> 
> 标签：php, datetime, date, timezone

今天我有一个用PHP编写的项目。当我尝试在表格数据集中显示日期时出现错误。这是产生错误的语句：

```
$data = new DateTime($registro["previsao de entrega"]; 
```

错误信息是这样的：

> 致命错误：未捕获的异常 'Exception' 带有消息 'DateTime::__construct() 无法在位置 0 (2) 解析时间字符串 (2 dez 2011 16:00)：C:\www\fluxo_producao\Telas\ 中的意外字符TelaFluxoProducao.php:941 堆栈跟踪：#0 C:\www\fluxo_producao\Telas\TelaFluxoProducao.php(941): DateTime->__construct('2 dez 2011 16:0...') #1 {main} 投入C:\www\fluxo_producao\Telas\TelaFluxoProducao.php 在第 941 行

我自己发现的是，如果我手动将参数更改为“2006 年 12 月 12 日”，则该功能有效。但是变量传递的日期是“12 Dez 2006”（巴西格式，顺便说一句，我是巴西人^_^），我也发现服务器中的默认时区是“America/Sao_Paulo”...我必须在函数或参数中进行哪些更改才能使其转换为指定的格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:24:33.883

它需要在末尾有一个右花括号吗？

```
$data = new DateTime($registro["previsao de entrega"]); 
```

如果这只是一个错字，可能是 的值`$registro["previsao de entrega"]`不正确，它是什么？

您可以在此处查看允许的值格式：[http ://www.php.net/manual/en/datetime.formats.date.php](http://www.php.net/manual/en/datetime.formats.date.php)

它只接受英文月份值，例如，`Dec`将工作但`Dez`不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:29:14.187

验证您是否已将服务器设置为正确的时间区域：

```
setlocale(LC_TIME, 'pt_BR'); 
```

这是[`strftime()`](http://php.net/manual/en/function.strftime.php)所有与日期/时间相关的函数和 AFAIK所必需的，并且`DateTime`该类使用需要/尊重此设置的相同库。

# database - 如何以及通过哪个文件将新产品保存在 Magento 数据库中？

> ID：10030445
> 
> 赞同：0
> 
> 时间：2012-04-05T14:23:17.550
> 
> 标签：database, magento, save, categories, product

当在 Magento 中创建新产品时，它究竟是如何保存在 Magento 数据库中的？

将产品保存在数据库中需要哪个文件和功能？

我们如何从 Magento 文件或 Magento 代码中获取新创建的产品的**类别 ID 和产品 ID ？**

请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T23:11:31.820

使用观察者监视产品何时保存。

进一步阅读：

*   [http://www.magentocommerce.com/wiki/5_-_modules_and_development/reference/events](http://www.magentocommerce.com/wiki/5_-_modules_and_development/reference/events)
*   [http://www.nicksays.co.uk/magento_events_cheat_sheet/](http://www.nicksays.co.uk/magento_events_cheat_sheet/)

# ios - 如何增加自定义 UISlider 的“拇指触摸活动”区域？

> ID：10030448
> 
> 赞同：4
> 
> 时间：2012-04-05T14:23:29.907
> 
> 标签：ios, uislider

我的自定义滑块看起来不错，一切都很好，但它确实比标准滑块大，更像是“滑动解锁”。但是很难开始拖动（活动区域太小）。

# javascript - 如何避免在非 IE 浏览器中使用 pushState 和 $.ajax(hash) 进行双重提交？

> ID：10030452
> 
> 赞同：1
> 
> 时间：2012-04-05T14:23:39.150
> 
> 标签：javascript, jquery, ajax, pushstate, jquery-bbq

Internet Explorer 似乎是唯一不支持 pushState 来处理 AJAX 提交历史的主流浏览器。所以我到处都有：

```
$.bbq.pushState(hash); 
```

在我的 AJAX 代码中，我必须添加另一行：

```
$.ajax(hash); 
```

这当然会在所有支持通过 pushState() 提交的非 IE 浏览器中导致双重提交。

我能做些什么来避免这些重复提交？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:25:32.613

仅当本机不支持时才调用`$.ajax(hash);`条件语句`history.pushState`

```
if (!history.pushState) {
   $.ajax(hash);
} 
```

我还建议使用独特的包装函数重构您的代码，该函数接受哈希作为具有必要逻辑的参数，例如

```
var pushStateWrapper = function(hash) {

    if (!history.pushState) {
       $.ajax(hash);
    }
    else {
       $.bbq.pushState(hash);
    }
} 
```

# r - R lattice 设置默认参数

> ID：10030462
> 
> 赞同：0
> 
> 时间：2012-04-05T14:24:16.683
> 
> 标签：r, set, default, options, lattice

我想在 R 包格的 levelplot() 中指定一些选项。我设置了参数`scales`，这很好用：

```
scales = list(x = list(at = c(0:8*16 +.5),
                   cex = 0), 
          y = list(at = c(0:8*16+.5),
                   cex = 0)) 
```

现在，我想将此参数设为默认值。即，我希望`levelplot()`在会话中的每个都有这个比例，而不是每次都指定这个参数。我试图这样做，`lattice.options()`但我不知道如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T01:57:16.523

lattice::trellis.par.set() 怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-02T17:52:39.010

使用 trellis.par.get("要设置的组件名称") 检索设置对象。例如：

```
plot.line.settings <- trellis.par.get("plot.line") 
```

plot.line.settings 对象是列表，其项目可以更改/更新。然后设置全局设置：

```
trellis.par.set("plot.line", plot.line.settings) 
```

要使设置适用于任何未来打开的设备，必须在打开设备时将保留参数设置为 TRUE。

# xpages - 如何在不同的数据库中使用@DbLookups

> ID：10030470
> 
> 赞同：2
> 
> 时间：2012-04-05T14:24:36.687
> 
> 标签：xpages

好的，这看起来很愚蠢，但我在让它工作时遇到了一些麻烦。我想对另一个数据库执行@DbColumn() 或@DbLookup()。同一台服务器 - 但它在一个文件夹中。而且我无法得到结果。有问题的数据库视图按第一列排序。

我正在尝试填充组合框的选择。

我已经尝试过内置在@DbColumn() 中：

```
var dbname = new Array("", "myfolder\\myDB.nsf");
return @DbColumn(dbname, "byCode", 0) 
```

我已经尝试过使用和不使用“双斜杠”以及第 0 列和第 1 列。

我也尝试过 XSnippet： [http ://openntf.org/XSnippets.nsf/snippet.xsp?id=dblookup-dbcolumn-with-cache-sort-and-unique](http://openntf.org/XSnippets.nsf/snippet.xsp?id=dblookup-dbcolumn-with-cache-sort-and-unique)

由于缓存，这将是我的首选方法。我尝试创建一个 SSJS 函数：

```
function getFacilityList() {
  var dbPath = database.getFilePath().split(database.getFileName())[0];
  return DbColumnArray("","myfolder\\myDB.nsf","cache", "sort", "byCode", 0)
} 
```

我认为应该有效但没有。

任何想法将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T14:35:20.783

尝试：

```
 var dbname = session.getServerName() + "!!" + "myfolder\\myDB.nsf";
    return @DbColumn(dbname, "byCode", 0) 
```

# asp.net-mvc - asp.net mvc razor vb.net for 循环语法

> ID：10030476
> 
> 赞同：0
> 
> 时间：2012-04-05T14:24:48.473
> 
> 标签：asp.net-mvc, vb.net, razor

我是 MVC 和 razor 语法的新手。尝试为 viewbag 创建 c#.net 代码，但我无法找到 viewbag 的任何值，例如示例 a`viewbag.Message`和`viewbag.Numtimes`

```
<ul> 
 @for (int i=0; i < ViewBag.NumTimes; i++) { 
  <li>@ViewBag.Message</li> 
 } 
</ul> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T14:35:10.653

它与 C# 并没有太大的不同，真的。只需使用 VB.NET 语法...

```
<ul>
    @For i = 0 To ViewBag.NumTimes-1
        @<li>@ViewBag.Message</li> 
    Next i
</ul> 
```

此处还提供了许多示例的良好参考：

[http://www.asp.net/web-pages/tutorials/basics/asp-net-web-pages-visual-basic](http://www.asp.net/web-pages/tutorials/basics/asp-net-web-pages-visual-basic)

**编辑：**稍微扩展了答案，并添加了一个链接，以很好地介绍 VB.NET+Razor

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T14:34:35.383

```
<ul> 
 @For i=0 To (ViewBag.NumTimes-1)
  <li>@ViewBag.Message</li> 
 Next i
</ul> 
```

有关更多信息，请参见此处：

[http://www.w3schools.com/aspnet/razor_vb_loops.asp](http://www.w3schools.com/aspnet/razor_vb_loops.asp)

# java - 使 JTextArea 的某些部分不可编辑（不是整个 JTextArea！）

> ID：10030477
> 
> 赞同：10
> 
> 时间：2012-04-05T14:24:53.057
> 
> 标签：java, swing, document, jtextarea, jtextcomponent

我目前正在使用 Swing 中的控制台窗口。它基于 JTextArea 并且像一个通用命令行一样工作。您在一行中键入一个命令，然后按 Enter。在下一行中，显示了输出，在该输出下，您可以编写下一个命令。

现在我想要，你只能用你的命令编辑当前行。上面的所有行（旧命令和结果）都应该是不可编辑的。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-05T14:59:35.090

您不需要创建自己的组件。

这可以使用自定义[DocumentFilter](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/DocumentFilter.html)来完成（就像我已经完成的那样） 。

您可以从中获取文档`textPane.getDocument()`并设置过滤器`document.setFilter()`。在过滤器中，您可以检查提示位置，并且仅当位置在提示之后才允许修改。

例如：

```
private class Filter extends DocumentFilter {
    public void insertString(final FilterBypass fb, final int offset, final String string, final AttributeSet attr)
            throws BadLocationException {
        if (offset >= promptPosition) {
            super.insertString(fb, offset, string, attr);
        }
    }

    public void remove(final FilterBypass fb, final int offset, final int length) throws BadLocationException {
        if (offset >= promptPosition) {
            super.remove(fb, offset, length);
        }
    }

    public void replace(final FilterBypass fb, final int offset, final int length, final String text, final AttributeSet attrs)
            throws BadLocationException {
        if (offset >= promptPosition) {
            super.replace(fb, offset, length, text, attrs);
        }
    }
} 
```

但是，这会阻止您以编程方式将内容插入终端的输出（不可编辑）部分。您可以做的是在您即将添加输出时设置的过滤器上的直通标志，或者（我所做的）在附加输出之前将文档过滤器设置为空，然后在您“重做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T15:36:49.847

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.text.*;
public class OnlyEditCurrentLineTest {
  public JComponent makeUI() {
    JTextArea textArea = new JTextArea(8,0);
    textArea.setText("> aaa\n> ");
    ((AbstractDocument)textArea.getDocument()).setDocumentFilter(
        new NonEditableLineDocumentFilter());
    JPanel p = new JPanel(new BorderLayout());
    p.add(new JScrollPane(textArea), BorderLayout.NORTH);
    return p;
  }
  public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
      @Override public void run() { createAndShowGUI(); }
    });
  }
  public static void createAndShowGUI() {
    JFrame f = new JFrame();
    f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    f.getContentPane().add(new OnlyEditCurrentLineTest().makeUI());
    f.setSize(320,240);
    f.setLocationRelativeTo(null);
    f.setVisible(true);
  }
}
class NonEditableLineDocumentFilter extends DocumentFilter {
  @Override public void insertString(
      DocumentFilter.FilterBypass fb, int offset, String string,
      AttributeSet attr) throws BadLocationException {
    if(string == null) {
      return;
    }else{
      replace(fb, offset, 0, string, attr);
    }
  }
  @Override public void remove(
      DocumentFilter.FilterBypass fb, int offset,
      int length) throws BadLocationException {
    replace(fb, offset, length, "", null);
  }
  private static final String PROMPT = "> ";
  @Override public void replace(
      DocumentFilter.FilterBypass fb, int offset, int length,
      String text, AttributeSet attrs) throws BadLocationException {
     Document doc = fb.getDocument();
     Element root = doc.getDefaultRootElement();
     int count = root.getElementCount();
     int index = root.getElementIndex(offset);
     Element cur = root.getElement(index);
     int promptPosition = cur.getStartOffset()+PROMPT.length();
     //As Reverend Gonzo says:
     if(index==count-1 && offset-promptPosition>=0) {
       if(text.equals("\n")) {
         String cmd = doc.getText(promptPosition, offset-promptPosition);
         if(cmd.isEmpty()) {
           text = "\n"+PROMPT;
         }else{
           text = "\n"+cmd+"\n    xxxxxxxxxx\n" + PROMPT;
         }
       }
       fb.replace(offset, length, text, attrs);
     }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T14:28:12.500

AFAIK，您需要实现自己的控制

也许您可以使用文本字段列表（偶数启用和奇数禁用）或混合文本字段/标签来模拟它

编辑：

我敢打赌一个不可编辑的文本区域和一个可编辑的文本字段。在文本字段中输入，按回车，添加“命令”并输出到文本区域

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-14T15:33:37.957

这是我在java中充当控制台的文档过滤器的实现。然而，经过一些修改，我可以拥有一个“命令区域”和一个“日志区域”，这意味着命令的结果打印在日志区域，而实际的命令打印在命令区域。日志区域只是另一个不可编辑的 Jtext 区域。我发现这个线程很有帮助，所以也许有人试图实现类似于这个实现的东西可以找到一些指针！

```
class NonEditableLineDocumentFilter extends DocumentFilter 
{
    private static final String PROMPT = "Command> ";

    @Override 
    public void insertString(DocumentFilter.FilterBypass fb, int offset, String string,AttributeSet attr) throws BadLocationException 
    {
        if(string == null) 
        {
            return;
        }
        else
        {
            replace(fb, offset, 0, string, attr);
        }   
    }

    @Override 
    public void remove(DocumentFilter.FilterBypass fb, int offset,int length) throws BadLocationException 
    {
        replace(fb, offset, length, "", null);
    }

    @Override 
    public void replace(DocumentFilter.FilterBypass fb, int offset, int length,String text, AttributeSet attrs) throws BadLocationException 
    {     
        Document doc = fb.getDocument();
        Element root = doc.getDefaultRootElement();
        int count = root.getElementCount();
        int index = root.getElementIndex(offset);
        Element cur = root.getElement(index);
        int promptPosition = cur.getStartOffset()+PROMPT.length();

        if(index==count-1 && offset-promptPosition>=0) 
        {
            if(text.equals("\n")) 
            {
                cmd = doc.getText(promptPosition, offset-promptPosition);

                if(cmd.trim().isEmpty()) 
                {
                    text = "\n"+PROMPT;
                }
                else
                {
                    text = "\n" + PROMPT;
                }
            }
            fb.replace(offset, length, text, attrs);
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-05T16:07:44.257

怎么样，当“>>”是命令行中用户可以输入命令的每一行的开头时：

```
textArea.addKeyListener(new KeyAdapter() {

    public void keyPressed(KeyEvent event) {

        int code = event.getKeyCode();          
        int caret = textArea.getCaretPosition();
        int last = textArea.getText().lastIndexOf(">> ") + 3;

        if(caret <= last) {

            if(code == KeyEvent.VK_BACK_SPACE) {

                textArea.append(" ");

                textArea.setCaretPosition(last + 1);
            }

            textArea.setCaretPosition(textArea.getText().length());
         }
     }
 }); 
```

# oop - 如何重构具有大量操作且都需要其内部数据的类？

> ID：10030480
> 
> 赞同：1
> 
> 时间：2012-04-05T14:24:55.313
> 
> 标签：oop, refactoring

## 我的问题

我有一个只有几个字段的类，但它代表了一个相对复杂的数据结构。这门课是我程序的核心，随着时间的推移，我发现自己在其中添加了越来越多的功能，让事情变得一团糟。由于（几乎）它的所有方法都依赖于它的内部字段，我想不出一种将一些方法移到其他地方的方法，即使大多数方法都是相互独立的。**如何重构这个类以使其更简单并减少直接在其中实现的方法的数量？**

## 更多信息

有问题的类代表一种自动机。它支持大量操作，例如检索有关它的信息，在它与其他自动机之间执行各种二进制操作，查询存储在其中的特定信息，将其保存到文件等。几乎所有这些操作都取决于类 - 在我的特定情况下，我维护一个基于边缘集的实现，但过去也使用过其他实现，并且将来可能会再次使用。

除了少数常用的基本辅助方法外，大多数方法都是相互独立的。

我使用的语言是 Java，但我希望得到可以应用于任何静态类型、面向对象的语言的一般答案。

## 我试过的

我尝试以某种方式将其重构为多种类型，但是它的每个操作都需要访问其大部分字段，并且我对将这些操作迁移到其他地方犹豫不决，因为我想不出一种方法可以在不暴露类的实现的情况下做到这一点。

我也不确定应该将操作迁移到*哪里*，假设它们确实独立于实现。外部实用程序类？抽象基类型？将不胜感激有关此的任何意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:30:02.340

也许您可以对您的类所持有的数据进行重新建模，这样它就不是直接持有数据，而是持有持有数据的对象？然后，您可以将操作该数据的方法移动到新类中，将原始类保留为一种容器/调度程序类。

# sql-server-2008 - SQL Server 2008 SELECT * FROM @variable？

> ID：10030486
> 
> 赞同：10
> 
> 时间：2012-04-05T14:25:11.720
> 
> 标签：sql-server-2008, variables

有可能的？

```
DECLARE @vTableName varchar(50)

SET @vTableName = (SELECT TableName FROM qms_Types WHERE Id = 1)

SELECT * FROM @vTableName 
```

我有这个错误：

> 消息 1087，级别 16，状态 1，行 3 必须声明表变量“@vTableName”。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-05T14:30:19.810

简短的回答：没有。

长答案：不不不不不不不不不不不不不不不不不不不不不不不不不不不不不不不不不不不不不不不不不不不不不）如果必须，请使用动态 SQL，但如果您以不提前知道表名称的方式构建表，那么重新考虑架构可能会有所帮助。

这是学习如何使用动态 SQL 的一个很好的资源：动态 SQL[的诅咒和祝福](http://www.sommarskog.se/dynamic_sql.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-05T14:27:57.463

如果您尝试从该名称的表中进行选择，则可以执行以下操作：

```
DECLARE @vTableName varchar(50) 
SET @vTableName = (SELECT TableName FROM qms_Types WHERE Id = 1) 
EXECUTE('SELECT * FROM [' + @vTableName + ']') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-19T15:39:10.047

我的解决方案：

```
EXECUTE('SELECT * FROM  ' + TableName + '') 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-12-16T18:27:34.720

似乎不同的人对 OP 的解释不同。

我很确定 OP 要求这种类型的概念/能力/机动......

“将表名放入变量中，然后像使用表名一样使用该变量。”

```
DECLARE @TableIWantRecordsFrom varchar(50)
--      ^^^^^^^^^^^^^^^^^^^^^^

SET @TableIWantRecordsFrom = (SELECT TableName FROM qms_Types WHERE Id = 1) -- (L1)
--  ^^^^^^^^^^^^^^^^^^^^^^

-- Let's say, at this point, @TableIWantRecordsFrom ... contains the text 'Person'
--                           ^^^^^^^^^^^^^^^^^^^^^^

-- assuming that is the case then...
-- these two queries are supposed to return the same results:

SELECT top 3 fname,lname,mi,department,floor FROM Person
--                                                ^^^^^^
SELECT top 3 fname,lname,mi,department,floor FROM @TableIWantRecordsFrom -- (L2)
--                                                ^^^^^^^^^^^^^^^^^^^^^^ 
```

从阅读所有回复和答案来看，这种操作似乎无法完成——除非——您使用动态 SQL...

*   **创建和维护可能**有点痛苦
*   **可以**创造更多的工作，而不是它在未来“节省”你的时间。

==================================================== ===============

还有**其他语言**可以做到这一点......从字面上看，两行代码（参见上面代码中的（L1）和（L2））并且不必进行大量格式化和编辑。）

（我以前做过 - 还有另一种语言，你只需要 L1 和 L2 ......）

==================================================== ===============

不幸的是，如果不付出相当大的努力，SQL Server 就不会这样做……

*   先写你的SQL然后
*   测试它以确保它确实可以正常*工作*
*   用刻度线框住每一行，然后转义现在在这些刻度线内的刻度线
*   声明变量
*   将变量设置为您在上面勾选的 sql 语句
*   （我可能会遗漏一些额外的步骤）
*   哦，然后，如果你需要维护它
*   您需要非常小心，并按原样在此处进行编辑，并希望您一切顺利-或者-您可能已经保存了它的副本...未勾选且未更改，因此您可以编辑“真正的”sql，然后当你完成后，你可以重新做这些步骤......再次。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-05T14:30:22.700

我想你想要这个：

```
DECLARE @vTableName table(TableName varchar(50))

insert into @vTableName 
SELECT TableName FROM qms_Types WHERE Id = 1

SELECT * FROM @vTableName 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-05T14:33:23.847

您可以做到这一点的唯一方法是通过动态 SQL，它指的是创建 T-SQL 文本并使用[`sp_executesql`](http://msdn.microsoft.com/en-us/library/ms188001.aspx)（或简单地[`exec`](http://msdn.microsoft.com/en-us/library/ms188332.aspx)）执行它的实践

这是一个关于动态 SQL 的有用链接动态 SQL[的诅咒和祝福](http://www.sommarskog.se/dynamic_sql.html)。

您应该真正考虑这是否是动态 sql 的情况，或者是否有其他方法可以执行此操作。

# javascript - HighCharts：堆积条显示堆栈的百分比

> ID：10030487
> 
> 赞同：1
> 
> 时间：2012-04-05T14:25:12.757
> 
> 标签：javascript, highcharts

目前我有一个像这样的堆积条形图（[jsfiddle demo](http://jsfiddle.net/gh/get/jquery/edge/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/column-stacked/)）

![在此处输入图像描述](../Images/4f4d0d33df4d7524cdb3127f1fdd7054.png)

我想更改堆栈，以便将每个条转换为总堆栈高度的百分比。例如，在 Apples 堆栈中，我们目前有 {3, 2, 5}，总共 10 个。

相反，我想显示 {30%, 20%, 50%}。当然，我可以在将数据传递给 HighCharts 之前自己简单地进行转换，但我仍想将原始数字 {3, 2, 5} 显示为条形标签（上面的红色）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T14:34:32.253

只需将`plotOptions.column.stacking`属性更改为`percent`.

[查看HighCharts`plotOptions.column.stacking`文档](http://api.highcharts.com/highcharts#plotOptions.column.stacking)中的更多信息和演示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-13T01:58:29.557

在您的选项中尝试此代码：

```
plotOptions: {
   series: {
       stacking: 'percent'
   }
} 
```

# spring-mvc - Spring Framework .... wat 之间的区别是 form:errors path 和 form:lable path ...？

> ID：10030488
> 
> 赞同：2
> 
> 时间：2012-04-05T14:25:14.037
> 
> 标签：spring-mvc

我是 Spring 框架的新手。任何人都可以解释一下 form:label path 和 form:errors path 和 Spring:message 之间的区别吗

我很困惑......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T11:32:35.523

form:label 呈现一个 html 标签元素

form:errors 在验证表单后呈现一个显示错误消息的 span 元素

spring:message 是用于显示国际化消息的元素

# c# - 在 .net 中对高度耦合的代码进行单元测试；反射注入模拟？

> ID：10030489
> 
> 赞同：1
> 
> 时间：2012-04-05T14:25:16.903
> 
> 标签：c#, .net, unit-testing

假设我有一堆看起来像......

```
class Foo{
  private Bar highlyCoupled = new highlyCoupled();

  public bool DoTheThing(){
    return highlyCoupled.doesTheThing();
  } 
} 
```

是否可以使用反射来打开 foo 并注入（duck-punch 可能是一个更正确的术语）某种 mockHighlyCoupled 来代替 highlyCoupled？

这种情况下怎么办...

```
class DoubleFoo : Foo{
  public bool DoTheOtherThing(){
    return DoTheThing();
  }
} 
```

继承的highlyCoupled 可以在其位置插入一个模拟吗？

不幸的是，重构代码以便不需要反射是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:39:23.210

您确实可以使用反射和模拟类型，但该类型必须从原始类型继承（否则 FieldInfo.SetValue 将失败）。

```
void Main()
{
    var bar = new Bar();
    var type = typeof(Bar);
    // Get the type and fields of FieldInfoClass.
    var fields = type.GetFields(BindingFlags.NonPublic | BindingFlags.Instance);
    fields[0].SetValue(bar, new FooMock()); // you can use new Foo() here too.
    bar.Print();
}

class Foo {
    public int i = 0;
}

class FooMock : Foo {
}

class Bar {
    private Foo foo = new Foo();

    public void Print() {
        Console.WriteLine(i);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T15:26:58.353

由于您无法使用模拟框架进行重构，因此这对您来说会更容易一些。例如：

类型模拟：

```
var fakeType = Isolate.Fake.Instance<SomeType>();
ObjectState.SetField(fakeType, "_somePrivateField", myValue); 
```

起订量：

```
var fakeType = new Mock<SomeType>()
fakeType.Protected().Setup<SomeType>("_somePrivateField").Returns(myValue); 
```

老实说，我实际上并没有在 Moq 上尝试过这个，但我认为它会满足你的需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T14:27:45.953

如果您根本无法重构（使`highlyCoupled`受保护），那么您将无法使用反射。这将使您`highlyCoupled`无需修改​​即可设置 的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T14:35:47.783

我大体上同意 Rob 的观点；如果你不能重构它以使依赖关系更松散耦合（至少允许像测试代理这样的派生类覆盖其默认值），那么反射设置值尽管它的可见性几乎是你唯一的方法可以去。

你至少可以做的是使依赖受到保护。如果现在或将来任何时候可以做到这一点，请执行以下操作：

```
class Foo{
  protected Bar highlyCoupled = new highlyCoupled();

  public bool DoTheThing(){
    return highlyCoupled.doesTheThing();
  } 
}

...

//in your test suite    
class FooTestProxy:Foo
{
   public FooTestProxy(Bar testMock)
   {
      highlyCoupled = testMock;
   }   
}

//now when testing, instantiate your test proxy and pass it the mocked object 
```

# php - 转码和显示用户上传的视频以实现跨浏览器/平台兼容性

> ID：10030493
> 
> 赞同：2
> 
> 时间：2012-04-05T14:25:32.707
> 
> 标签：php, html, ffmpeg, flv, jwplayer

我想在不同的浏览器/平台上以高质量显示用户上传的视频。我认为我有一个很好的开始，但也有一些问题。我可以使用 ffmpeg 0.10（从 PHP 调用）和 jwPlayer 5.8（许可）。

理想情况下，我想支持：

*   带有 Flash 9+ 的浏览器
*   没有 Flash 的现代 Firefox/Chrome/Safari
*   iOS 4.1+
*   安卓 2.2+

我当前的转码命令是：

```
$commands = array(
    'flv' => "/usr/bin/ffmpeg -y -i {$sourceFile} -b 500k -ar 22050 -ab 64 {$tmpFileName}.flv 2>&1",
    'webm' => "/usr/bin/ffmpeg -i {$sourceFile} -acodec libvorbis -ac 2 -ab 96k -ar 44100 -b 500k {$tmpFileName}.webm 2>&1",
    'mp4' => "/usr/bin/ffmpeg -i {$sourceFile} -acodec libfaac -ab 96k -vcodec libx264 -level 21 -refs 2 -vf 'scale=trunc(ih*a/2)*2:trunc(iw/a/2)*2' -b 500k -bt 1000k -threads 0 -f mp4 {$tmpFileName}.pre.mp4 2>&1",
    'jpg' => "/usr/bin/ffmpeg -y -i {$sourceFile} -ss 5 -vcodec mjpeg -vframes 1 -an -f rawvideo {$tmpFileName}.jpg 2>&1"
);

$fastStartCommand = "/usr/bin/qt-faststart {$tmpFileName}.pre.mp4 {$tmpFileName}.mp4"); 
```

我当前的显示代码是这样的：

```
<video id="video" controls="controls" width="{$width}" height="{$height}" poster="{$fileJPG}" style="width: {$width}px; height: {$height}px;">
    <source src="{$fileMP4}" type="video/mp4" data-ext="mp4" />
    <source src="{$fileWEBM}" type="video/webm" data-ext="webm" />
    <a href="{$fileMP4}" title="Play Video">
        <img border="0" src="{$fileJPG}" width="{$width}" height="{$height}" alt="Play Video" />
    </a>
</video>
<script type="text/javascript">
swfobject.embedSWF(
    '/flash/jwPlayer.swf',
    'video',
    {$width},
    {$height},
    '9.0.0',
    '',
    {
        file: '{$fileFLV}',
        width: {$width},
        height: {$height},
        provider: 'video',
        stretching: 'uniform',
        smoothing: 'true',
        dock: 'true'
    },
    {
        menu: 'false',
        allowfullscreen: 'true',
        allowscriptaccess: 'always',
        allownetworking: 'always',
        wmode: 'transparent'
    }
);
</script> 
```

我们的想法是更喜欢 Flash 播放器（我们有许多想要继续使用的自定义皮肤），然后回退到 HTML 5 视频，如果失败，则显示带有 mp4 文件链接的 JPEG（这似乎作为 iOS 2/3 和旧版浏览器的最后努力，它们至少可以通过启动 QuickTime 来播放视频）。

我现在不确定如何解决的主要问题是：

*   如何在 Flash 中显示更高质量的视频？我尝试使用 mp4 视频而不是 flv，但它不起作用，我只听到声音，没有视频。我认为 Flash 现在应该支持 h.264，但是如何？我是否必须对旧版和新版 Flash 使用不同的转码方法？
*   如何以更好的质量对视频进行转码？现在我对所有分辨率都使用相同的比特率。ffmpeg有没有办法自动调整比特率？或者我可以以某种方式检测上传视频的分辨率并将其与分辨率列表 - >比特率匹配吗？

# android - 清除检查问题后的android单选按钮检查

> ID：10030495
> 
> 赞同：8
> 
> 时间：2012-04-05T14:25:38.387
> 
> 标签：android, radio-button

朋友们。我对radiogroup有一个非常愚蠢的问题。但是我无法找到解决方案。

我将尝试描述如何重现我的问题：我有单选按钮组和里面的两个按钮。我选择其中之一，让我们说第一个。 然后我在尝试选择第一个按钮后通过调用*radioGroup.clearCheck()来清除选择，但它没有检查。*如果我检查第二个，它会正常检查。如果我在检查第 2 次后检查第 1 次，它也可以正常工作。

这听起来可能很疯狂，但我无法解决它。请帮助我，在此先感谢。

我用

```
@Override
protected void init() {
    View view = View
            .inflate(getContext(), R.layout.wo_task_yn_result, null);

    performed = (RadioButton) view.findViewById(R.id.yn_yes);
    notPerformed = (RadioButton) view.findViewById(R.id.yn_no);

    radioGroup = (RadioGroup) view.findViewById(R.id.yn_options);

    performed.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(final CompoundButton buttonView,
                final boolean isChecked) {
            Log.d(YES, "verify");
            if (isChecked) {
                Log.d(YES, "checked");
                result = YES;
            }
        }
    });

    notPerformed.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(final CompoundButton buttonView,
                final boolean isChecked) {
            Log.d(NO, "verify");
            if (isChecked) {
                Log.d(NO, "checked");
                result = NO;
            }
        }
    });

    addView(view);
} 
```

创建按钮和

```
@Override
public void clear() {
    radioGroup.clearCheck();

    result = "";
} 
```

清除它们

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-06-26T07:45:05.690

我有同样的问题。无法选择组中的第一个 radioButton，但可以选择其他两个。选择第二个单选按钮后，我也可以选择第一个。我通过执行单个 radioGroup.clearCheck() 而不是单个 radioButtonA.setChecked(false) 来解决它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T16:06:37.040

如果您想取消选中单选按钮，请尝试以下方法：

```
@Override
public void clear() {

performed.setChecked(false);

nonperformed.setChecked(false);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T14:32:48.597

使用[OnCheckedChangeListener](http://developer.android.com/reference/android/widget/RadioGroup.OnCheckedChangeListener.html)并使用方法`setSelected(true)`or `setChecked(true)`。

# sql-server - sql server数据插入，第一行期末余额应该是下一行期初余额

> ID：10030496
> 
> 赞同：0
> 
> 时间：2012-04-05T14:25:44.037
> 
> 标签：sql-server

我在以这种方式插入数据时遇到了问题。

![在此处输入图像描述](../Images/7c64c16130119e5315d19faf7b0c3df1.png)

如何使用存储过程以这种方式插入数据。

```
INSERT INTO [dbo].tbl_Transaction                
        (                
             [FK_GameID] ,            
             [SpotID] ,            
             TransactionReason ,            
             TransactionType ,            
             TransactionAmount
             --PrevAmountBalance,
            -- CurrentBalance
        )                
       SELECT tblTransaction.Row.value('@FK_GameID','BIGINT'),            
       tblTransaction.Row.value('@SpotID','SMALLINT'),            
       tblTransaction.Row.value('@TransactionReason','SMALLINT'),            
       tblTransaction.Row.value('@TransactionType','Varchar(50)'),            
       tblTransaction.Row.value('@TransactionAmount','MONEY')
       --@OpeningBalance,
       -- (@OpeningBalance-tblTransaction.Row.value('@TransactionAmount','MONEY'))
       FROM @TransactionTable.nodes('/row') AS tblTransaction(Row) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:44:48.060

```
create table #balances(
id int not null identity(1,1),
opening_balance int, 
closing_balance int, 
t_type varchar(50)) 
```

启动表（如果你没有这个，你将不得不处理 NULL）

```
insert into #balances values (100 , 100 , 'start') 
```

询问：

```
insert into #balances values(
(select top 1 closing_balance from #balances order by id desc),
300, --new value
'credit') 
```

# css - 如何使用 Selenium IDE 在 Gmail 中单击特定电子邮件？

> ID：10030497
> 
> 赞同：4
> 
> 时间：2012-04-05T14:25:45.050
> 
> 标签：css, selenium, gmail

我正在尝试在 selenium IDE 上运行测试以输入我的 Gmail，从我输入的所有电子邮件中选择特定的新电子邮件，然后单击电子邮件具有的特定链接。

我一直在兜兜转转，找不到和回答！

我读过另一篇有此帮助的帖子：

//div[@class = 'y6']/span[contains(., 'subject here')]

这无济于事，因为同一封电子邮件已经发送了很多次。

本案例有以下特点： 1\. 由于是多次运行的案例，所以会发送相同发件人、相同主题、相同正文的邮件。

1.  每次测试有趣时都应该只有一封新电子邮件，因为我们的想法是输入并检查最后一封电子邮件。

2.  在电子邮件中，有一个需要按下的按钮，我有 id，但我只需要输入电子邮件即可。

3.  到目前为止，我使用了以下 CSS 找到了我需要单击的内容，但是当我要求 Selenium IDE 单击它时，它什么也不做（clickAt、clickAndWait、clickAtAndWait ... 什么都没有！）

css=div[class=yW] > span.zF:[email='myemail@myemail.com']

1.  我还注意到 Gmail 中的 class="zA zE" 表示该电子邮件尚未被阅读。

帮助！

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:53:32.623

这很奇怪，因为`clickAt | css=div.yW > span.zF[email='myemail@myemail.com']`对我来说效果很好。不仅如此，`clickAt | css=span[email='myemail@myemail.com']`将始终打开列表中包含此电子邮件的第一条消息（最后一条）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T03:00:28.130

BarbSchael，可以通过使用场得出类似的解决`Xpath`方案`FROM`。

我使用了这个命令：

```
clickAt | //table/tbody/tr/td[5]/div[@class='yW'] | 
```

单击大多数邮件的`FROM`字段`first/recent/top`以转到邮件详细信息页面。// 注意：`tr`对于第一封邮件，`tr[2]`对于第二封邮件，以此类推。

# c++ - c++：如何优化IO？

> ID：10030505
> 
> 赞同：16
> 
> 时间：2012-04-05T14:26:13.780
> 
> 标签：c++, optimization, io

我正在研究一个数学问题，它的优势是能够“预先计算”大约一半的问题，将此信息保存到文件中，然后多次重复使用它来计算我的问题的各种“实例”。困难在于上传所有这些信息以解决实际问题是一个主要瓶颈。

更具体地说：我可以预先计算大量信息——大量的`long double`概率`std::map<int,int>`（

我的程序的后半部分接受输入参数*D*。对于每个*D*，我需要执行大量计算，这些计算涉及预先计算的数据（来自文件）和一些特定于*D*的其他数据的组合（因此每个*D*的问题都不同）。

有时我需要从文件中挑选出某些预先计算好的信息。其他时候，我需要上传（大）文件中的每条数据。

有没有让 IO 更快的策略？

`boost::mpi`由于其他原因，我已经将程序并行化（MPI，via ），但无论如何，访问磁盘上的文件会使我的计算时间难以忍受。

有什么策略或优化吗？

目前我正在做所有事情`cstdio`，即没有`iostream`。这会有很大的不同吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-05T14:45:12.807

当然，最快（但最脆弱）的解决方案是将`mmap`数据发送到固定地址。将其全部放在一个 big`struct`中，并使用分配器实例化`std:::map`，该分配器将在附加到结构末尾的块中分配。这并不简单，但会很快；一次调用`mmap`，数据就在您的（虚拟）内存中。并且因为您强制输入地址`mmap`，您甚至可以存储指针等。

如上所述，除了需要大量工作之外，它还很脆弱。重新编译你的应用程序，目标地址可能不可用，或者布局可能不同，或者其他什么。但由于它实际上只是一种优化，所以这可能不是问题；每当出现兼容性问题时，只需删除旧文件并重新开始。它会在破坏兼容性的更改后进行第一次运行，速度非常慢，但如果你不经常破坏兼容性......

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-05T14:34:00.997

地图上没有的东西很容易。你把所有东西都放在你知道的一块连续的内存中（比如一个大数组，或者一个没有指针的结构/类），然后用`write()`它来写出来。稍后用于`read()`在单个操作中读取它。如果大小可能不同，则使用一个操作读取`int`具有该大小的单个，分配内存，然后使用单个`read()`将其拉入。

地图部分有点难，因为你不能在一次操作中完成所有操作。在这里，您需要提出一个序列化它的约定。为了使 i/o 尽可能快，最好的办法是将其从映射转换为内存中的形式，所有这些都在一个地方，您可以轻松快速地转换回映射。例如，如果您的键是整数，并且您的值是恒定大小，那么您可以制作一个键数组和一个值数组，将您的键复制到一个数组中，将值复制到另一个数组中，然后复制`write()`两个数组，也可能写出它们的大小。同样，您只需要两三个调用就可以阅读内容`read()`。

请注意，没有任何东西被翻译成 ASCII，并且有最少数量的系统调用。该文件不会是人类可读的，但它会很紧凑，并且读入速度很快。三件事使 i/o 变慢：1）系统调用，如果您使用小读/写；2) 与 ASCII 之间的转换（printf、scanf）；3）磁盘速度。很难对 3) 做很多事情（除了 SSD）。您可以在后台线程中进行读取，但您可能需要阻止等待数据进入。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-05T14:54:50.537

一些指导方针：

*   多次调用 read() 比一次调用更昂贵
*   二进制文件比文本文件快
*   对于较大的“多个”值，单个文件比多个文件快
*   如果可以的话，使用内存映射文件
*   使用 64 位操作系统让操作系统为您管理内存

理想情况下，我会尝试将所有长双打放入内存映射文件中，并将所有映射放入二进制文件中。

分而治之：如果不能选择 64 位，请尝试将数据分成大块，以使所有块永远不会一起使用，并且在需要时需要整个块。这样，您可以在需要时加载块并在不需要时丢弃它们。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-05T14:58:19.630

当满足两个条件时，这些将整个数据上传到 RAM 的建议是好的：

1.  期间所有 I/O 时间的总和远远超过将所有数据加载到 RAM 的成本
2.  在应用程序运行期间访问所有数据的相对大部分

（当某些应用程序长时间运行处理不同的数据时，通常会遇到它们）

然而，对于其他情况，可能会考虑其他选项。例如，必须了解访问模式是否真的是随机的。如果不是，请查看重新排序数据以确保可一起访问的项目彼此靠近。这将确保操作系统缓存处于最佳状态，并且还将减少 HDD 寻道时间（当然 SSD 不是这种情况）。

如果访问是真正随机的，并且应用程序没有运行到分摊一次性数据加载成本所需的时间，我会研究架构，例如通过将此数据管理器提取到单独的模块中，以保持此数据预加载。

对于 Windows，它可能是系统服务，对于其他操作系统，其他选项可用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-05T14:33:28.363

缓存，缓存，缓存。如果它只有几 GB，那么将大部分（如果不是全部）数据缓存在 memcached 之类的东西中应该是可行的。如果您在多台机器上使用 MPI，而不仅仅是同一台机器上的多个处理器，这是一个特别好的解决方案。

如果它们都在同一台机器上运行，如果您有可用的内存，请考虑使用共享内存缓存。

此外，请确保您的文件写入是在单独的线程上完成的。无需阻塞等待文件写入的整个进程。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-05T14:39:19.147

如前所述，尽可能多地缓存在内存中。

如果您发现需要缓存的数量大于内存所允许的量，请尝试在内存和磁盘之间交换缓存，当虚拟内存页面需要交换到磁盘时通常会这样做。这本质上是相同的问题。

一种常见的方法是使用[最近最少使用算法](http://en.wikipedia.org/wiki/Page_replacement_algorithm#Least_recently_used)来确定将交换哪个页面。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-05T16:25:37.087

这实际上取决于有多少内存可用以及访问模式是什么。

* * *

最简单的解决方案是使用内存映射文件。这通常要求文件的布局就像对象在内存中一样，因此您只需要使用不带指针的 POD 数据（但您可以使用相对索引）。

您需要研究您的访问模式，看看您是否可以将经常一起使用的值组合在一起。这将有助于操作系统更好地缓存这些值（即，为您将它们保存在内存中，而不是总是去磁盘读取它们）。

* * *

另一种选择是将文件分成几个块，最好以逻辑方式。可能需要创建一个索引文件，将一系列值映射到包含它们的文件。

然后，您只能访问所需的文件集。

* * *

最后，对于复杂的数据结构（内存映射文件失败）或稀疏读取（当您只从给定文件中提取一小部分信息时），阅读 LRU 缓存可能会很有趣。

这个想法将是使用*序列化*和*压缩*。您编写了几个文件，其中有一个索引，然后将它们全部压缩（zip）。然后，在启动时，您首先加载索引并将其保存在内存中。

每当您需要访问一个值时，首先尝试您的缓存，如果不是，则访问包含它的文件，在内存中解压缩，将其内容转储到缓存中。*注意：如果缓存太小，您必须对转储的内容保持挑剔...或减小文件的大小。*

经常访问的值将保留在缓存中，避免不必要的往返，并且由于文件被压缩，因此 IO 会更少。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-05T14:36:40.420

以缓存有效的方式构建数据。例如，当您阅读“某些片段”时，如果这些片段都是连续的，则无需在磁盘周围寻找来收集所有片段。

如果您与另一个进程共享磁盘访问权限，那么批量读取和写入而不是逐条记录会有所帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-05T16:52:14.500

> 更具体地说：我可以预先计算大量信息——大量的概率（long double）、大量的 std::map 等等——并将所有这些东西保存到磁盘（几 Gb）。

据我了解，这些`std::map`也是预先计算的，并且没有插入/删除操作。只能搜索。[将地图替换为std::hash_map](http://www.sgi.com/tech/stl/hash_map.html)或[sparsehash](http://code.google.com/p/sparsehash/?redir=1)之类的想法怎么样？从理论上讲，它可以提高性能。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-04-05T20:08:54.813

> 更具体地说：我可以预先计算大量信息——大量的概率（long double）、大量的 std::map 等等——并将所有这些东西保存到磁盘（几 Gb）。

不要重新发明轮子。我建议使用键值数据存储，例如 berkeley db：[http ://docs.oracle.com/cd/E17076_02/html/gsg/C/concepts.html](http://docs.oracle.com/cd/E17076_02/html/gsg/C/concepts.html)

这将允许保存和共享文件，缓存您实际使用的部分，并将其他部分保存在磁盘上。

# java - 格式化 BigDecimal 以使 100 显示为 100 而不是 1.0E+2

> ID：10030507
> 
> 赞同：0
> 
> 时间：2012-04-05T14:26:20.873
> 
> 标签：java, jsf, el, bigdecimal, number-formatting

我正在输出一个`BigDecimal`using EL 表达式，如下所示`#{beanActions.overallScore}`：

但当值为 时`100`，则显示为`1.0E+2`。

如何在`100`不将类型更改为的情况下显示它`String`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T14:48:27.360

以下适用于我的环境（Mojarra 2.1.3 和 EL 2.2）：

```
<h:outputText value="#{beanActions.overallScore}">
    <f:convertNumber integerOnly="true"/>
</h:outputText> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:33:31.703

尝试浏览[JSF NumberConverter](http://www.jsftoolbox.com/documentation/help/12-TagReference/core/f_convertNumber.html)。

# symfony - 将 Symfony2 与 SwiftMail 一起使用时，renderView 失败

> ID：10030510
> 
> 赞同：0
> 
> 时间：2012-04-05T14:26:27.967
> 
> 标签：symfony, swiftmailer

我想在 Symfony2 中使用 SwiftMailer。首先，我创建了一个新控制器并从[http://symfony.com/doc/current/cookbook/email/email.html](http://symfony.com/doc/current/cookbook/email/email.html)复制了示例。当我尝试执行时，`renderView`我收到以下错误消息：`Fatal error: Call to a member function get() on a non-object in var/www/project/Symfony/vendor/symfony/src/Symfony/Bundle/FrameworkBundle/Controller/Controller.php on line 84`。

我尝试了各种方法，但它们总是会导致控制器出现错误。

不仅`renderView`而且还在`$this->get('mailer')->send($message);`抛出错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T19:16:25.513

您不能只将控制器实例化为普通类，然后调用其方法，因为那时您没有注入服务容器。改为创建邮件服务。有关详细信息，请阅读[服务容器](http://symfony.com/doc/current/book/service_container.html)一章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:33:45.550

试试这个：更改顺序，`mailer`在创建新的 swift_message 之前获取：

```
$this->get('mailer')->send($message);

$message = \Swift_Message::newInstance() 
```

# java - Wicket，如何在点击时延迟加载 DropDown 选项？

> ID：10030514
> 
> 赞同：5
> 
> 时间：2012-04-05T14:26:51.663
> 
> 标签：java, wicket, dropdownchoice

我有很多 DropDownChoice 组件，表单中有许多项目，在加载表单时，我只想显示保存的选定选项。当用户单击 DropDownChoice 时，我想即时加载完整的项目列表。

这可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T16:50:48.723

将 a 添加`OnChangeAjaxBehavior`到您的下拉组件中。覆盖`onUpdate`- 方法并将另一个组件添加到目标。下拉组件的选定值在其模型内。

更新：好吧，我想我知道你想要达到什么目的。`AjaxFormComponentUpdatingBehavior`将“onclick”作为构造函数参数添加到您的下拉组件中。覆盖`onUpdate`- 方法并将下拉组件添加到目标。在此之前，请更新下拉模型，使其现在包含所有值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T10:45:27.553

如果您有很多选项要显示，那么使用 <select> 不是最佳选择。

最好检查[http://ivaynberg.github.com/select2/](http://ivaynberg.github.com/select2/)或[http://livedocs.dojotoolkit.org/dijit/form/FilteringSelect](http://livedocs.dojotoolkit.org/dijit/form/FilteringSelect)或任何其他可以通过 Ajax 按需加载选项的基于 JS 的组件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T21:12:55.013

也许您可以使用[AjaxEditableLabel](http://www.wicketframework.org/wicket-extensions/apidocs/wicket/extensions/ajax/markup/html/package-summary.html) s... 使用 Wicket Extensions 中的[AjaxEditableChoiceLabel](http://www.wicketframework.org/wicket-extensions/apidocs/wicket/extensions/ajax/markup/html/AjaxEditableChoiceLabel.html)，您将获得一个组件，该组件将当前值显示为标签，直到单击，并通过 Ajax 更改为 DropDownChoice。这应该与您正在寻找的解决方案非常相似。

# opencl - 是否可以让 AMD APP Profiler 与 C#/Cloo 一起使用？

> ID：10030517
> 
> 赞同：2
> 
> 时间：2012-04-05T14:26:58.803
> 
> 标签：opencl, gpgpu, profiler, amd-processor, cloo

有谁知道如何/是否可以让 AMD APP Profiler 使用 Cloo opencl 库处理 C# 项目？我可以`sprofile`在我的 .NET 应用程序上运行，但即使它运行正确，也不会输出任何结果。

* * *

**编辑：**嘿，它确实有效我只是有一些狡猾的 OpenCL 代码导致显示驱动程序崩溃。只需`sprofile`像帮助文件中描述的那样从命令行运行，然后使用 VS2010 中的面板打开它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T21:13:37.317

如您所见，在 C# 应用程序上使用 APP Profiler 的推荐方法是使用命令行版本 (sprofile.exe)，然后将结果导入 Visual Studio 插件。

即将推出的 CodeXL 产品（目前处于公开测试阶段）将允许您直接从独立 UI 分析 C# 应用程序。有关 CodeXL 的更多信息，请参阅[http://developer.amd.com/tools/hc/CodeXL/pages/default.aspx](http://developer.amd.com/tools/hc/CodeXL/pages/default.aspx)。

克里斯

# exception - .NET 异常：每种异常类型都有自己的消息文本吗？

> ID：10030520
> 
> 赞同：0
> 
> 时间：2012-04-05T14:27:13.683
> 
> 标签：exception, elmah

我们将 ELMAH 用于我们的 ASP.NET Web 应用程序，我对我们遇到的一些异常感到困惑。其中一些是：

*   System.FormatException：Base-64 字符数组的长度无效。
*   System.Web.HttpException：无法验证数据。
*   System.Security.Cryptography.CryptographicException：填充无效且无法删除。

我根本不知道它们为什么会发生，但最终用户显然看不到它们，所以我想忽略它们并禁止发送电子邮件。如果我这样做，我想确保 System.FormatException 仅`Invalid length for a Base-64 char array.`用于它的消息文本，而不是其他一些消息。如果确实如此并且我忽略了它，我可能会错过在 System.FormatException 下引发的其他异常。如果是这种情况，我必须检查消息文本。这不是问题，但我真的不喜欢在我的应用程序中硬编码字符串。

更新：

我试过这段代码：

```
 try
        {
            throw new System.FormatException();
        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message);
        }

        Console.Read(); 
```

它的消息文本是：

`One of the identified items was in an invalid format.`

这表明回答者是正确的，并且应该根据异常和消息文本忽略异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T15:25:53.457

异常的 Message 属性无法帮助您诊断代码中的错误或用户配置的问题。这也是为什么你不知道它们为什么会发生的原因。您必须在电子邮件中添加*更多*信息，特别是异常的 StackTrace 属性对于帮助您准确找出异常发生的位置至关重要。如果一个异常有一个 InnerException 那么你总是需要知道那个，因为它通常是另一个异常被触发的核心原因。

只需使用异常的 ToString() 方法来生成更好的诊断信息以放入您的电子邮件中。

# openfire - xmpp（smack - openfire）没有延迟时间？

> ID：10030525
> 
> 赞同：-1
> 
> 时间：2012-04-05T14:27:33.963
> 
> 标签：openfire, smack, asmack

我试图与 2 个 xmpp 客户端通信，但这不像消息传递或聊天。它更像是在一端引起的事件和在另一端（实时）执行的动作。我希望客户端 A 尝试向客户端 B 发送数据包时不会有任何延迟时间。如果可用，是否有任何可能的方法来最小化它应该被忽视。？是否可以这样做或通过任何其他方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T15:59:56.200

首先，这仍然是消息传递。

至于你的延迟，在进程之间发送数据时总会有一些延迟。你没有说你正在寻找什么容忍水平，而不是你得到什么，所以很难说你应该做些什么来改善它们。

当前延迟的最大因素将是消息大小和网络速度。当然，直接点对点通信会为您的消息删除一跳，但是在不了解您的应用程序的情况下，无法说这是否是可接受的方向。

在快速网络上，一条小消息应该在几毫秒内送达。如果它是一个慢速网络，那么您的问题就在任何通信协议之外。

# python - BNF 可以处理前向消费吗？

> ID：10030526
> 
> 赞同：4
> 
> 时间：2012-04-05T14:27:43.460
> 
> 标签：python, context-free-grammar, bnf, pyparsing

最近我发现了python模块，这是一个通过编写*语法*而不是解析器`pyparsing`来解析数据的绝妙工具。我对上下文无关语法的想法很陌生，所以请纠正这个问题中的任何错误假设。

 *Pyparsing 可以实现 BNF ( [Backus–Naur Form](http://en.wikipedia.org/wiki/Backus%E2%80%93Naur_Form) ) 上下文无关文法。这个语法可以是递归的，但它可以有前瞻吗？自从我偶然发现[这个问题](https://stackoverflow.com/questions/9898984/parsing-xdot-draw-attributes-with-pyparsing)以来，我一直想知道这个问题的答案。让我给你一个具体的例子。考虑字符串：

```
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 
```

让语法看起来像：

```
<number> :: __<digit>__
<block>  :: <number>(x) (<number> <number> <number> .... x times) 
```

即读取第一个数字标记，将其另存为`x`，然后使用下一个`x`数字并将它们组合在一起。解析后的行应如下所示：

```
 [[1, 2], [3, 4, 5, 6], [7, 8, 9, 10, 11, 12, 13, 14], [15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30]] 
```

我写了一个*不*使用 pyparsing 的简单 python MWE，所以很清楚我想要做什么：

```
A = range(1,31)

B, sub_b = [], []
consume  = 0

for a in A:
    if consume: 
        sub_b.append(a)
        consume -= 1
    else:
        if sub_b: B.append(sub_b)
        sub_b = [a,]
        consume = a
B.append(sub_b)
print B 
```

两个（相关）问题：这可以用 BNF 上下文无关语法来完成吗？如果是/否，我该怎么做`pyparsing`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T15:38:38.490

就此而言，在上下文无关语法或常规语法中没有参数化大小这样的东西。像您这样的数值参数`consume`不是 CFG 模型的一部分，可以证明以不同的方式获得效果是不可能的。不过，您可以编写任何*固定*长度的产品，因此您可以编写长度为 1、长度 2、长度 3 等的块的产品：

```
<block3> :: <number> <number> <number> 
```

或者，类似地，将长度匹配为前缀甚至作为后缀：

```
<block3a> :: 3 <number> <number> <number>
<block3b> :: <number> <number> <number> 3 
```

等等。所以要做你想做的事，你只需要一个包含那种规则的语法，`N`你可能需要的一切。

给定的 CFG 将仅包含有限数量的这些产品。在数学上不可能编写一个可以处理无限参数化大小的 CFG（以 BNF 或任何其他形式），无论是作为前缀还是作为后缀。在实践中，您也许可以根据需要使用新作品即时更新您的 CFG。例如，读取一个数字`N`并为您的语法创建一个规则`blockN`（如果它不存在）。但是没有*一个单一*的CFG 可以捕获无限的参数化大小。

**编辑，**因为您还询问了上下文相关的语法：那仍然不会这样做。问题在于整数算术的使用，而不是语法的类。*Chomsky 层次结构上的任何*形式语言都是根据有限数量的符号（令牌）定义的，并且由于是无限多的整数，它们不能被赋予不同的含义（请注意，您的解析过程依赖于整数算术）。

如果您要将长度预处理为一个包含多个星号 ( `* * * 4 7 10`) 的序列，则 CFG 解析器很简单：

```
<group> :: * <group> <number>
<group> :: * <number> 
```

这只是所谓的`a^n b^n`语言。您还可以使用表示“十”等的符号。但是如果没有预处理，唯一的解决方案（以及您的程序或图灵机在实践中所做的）是在您的语法中解释数字符号。例如，将“21”解析为十十一。我怀疑这可以在 CFG 中完成（问题是处理任意长的数字，而没有针对数百万、数十亿等的单独规则），但我不太确定。无论哪种方式，它都只是作为一项学术练习才有趣，因为使用实整数要容易得多。我确信人们已经研究过整数形式语言的属性，但我对此无话可说。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T03:03:17.953

Pyparsing 包括`countedArray`完全按照您的要求执行的助手。它接受一个参数`expr`，并将解析一个整数，后跟“n”个 expr 实例。对于您的输入字符串，您可以编写：

```
from pyparsing import *
from pprint import pprint

# make a long string of integers, starting at 0
source = ' '.join(map(str, range(50)))

# define an integer as a 'word' of numeric digits
integer = Word(nums)

# add a parse action to convert the parsed strings to integers, at parse time
integer.setParseAction(lambda t:int(t[0]))

# parse the source string into counted strings of integers, and print out
# with pprint
lists = OneOrMore(countedArray(integer)).parseString(source)
pprint(lists.asList()) 
```

打印出来：

```
[[],
 [2],
 [4, 5, 6],
 [8, 9, 10, 11, 12, 13, 14],
 [16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30]] 
```

*   附加的解析操作`integer`将数字字符串转换回整数（列表中的数字没有引号）。

*   注意开头的空列表，它是由源字符串的前导“0”创建的。

*   即使源字符串包含超过 30 的更多数字，也不足以容纳另一个计数数组。

`countedArray`通过创建一个与前导整数匹配的表达式，后跟一个捕获的未定义正向表达式来实现此技巧。附加到前导整数的解析操作将`expr*n`表达式注入到强制转发中，然后解析以下“n”表达式。您可以轻松编写`countedArray(Word(alphas))`和解析`"4 the quick brown fox"`以获取`['the', 'quick', 'brown', 'fox']`. 正如@Aaron 在他的回答中指出的那样，没有必要保留前导计数器，因为您可以通过获取返回列表的 len 轻松获得它。

pyparsing 还支持使用 FollowedBy 和 NotAny 构造的更传统的前瞻（NotAny 可以通过使用'~'运算符来缩写）。在这个字符串“Four score and 7 years ago...”中，您可以使用 挑选出后面跟着以元音开头的单词的字符串`Word(alphas) + FollowedBy(Word('aeiou',alphas))`，这将匹配 'score' 和 'years'；或者后面没有使用句`Word(alphas) + ~Literal('.')`点的单词，这将匹配除“之前”之外的每个单词。在这种情况下，尝试通过输入字符串搜索匹配项，您可以使用`searchString`or`scanString`代替`parseString`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T15:46:26.613

并不真地。

拥有语法的全部意义在于它允许以人类*可以理解*的方式定义数据。您的演示字符串是可读的，但为什么`1`除了`3`?

在您的情况下，正确的输入是：

```
[[2], [4, 5, 6], [8, 9, 10, 11, 12, 13, 14], [16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30]] 
```

语法看起来像这样：

```
<model> :: <term>
<list>  :: <term> | <term> <opt-whitespace> <list>
<term>  :: '[' <list> ']' 
```

然后，您可以通过查看列表的长度来恢复丢失的计数元素。*

# objective-c - presentViewController - 查看纯黑色，未调用 viewDid___ 方法

> ID：10030531
> 
> 赞同：5
> 
> 时间：2012-04-05T14:28:00.480
> 
> 标签：objective-c, xcode, modalviewcontroller

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-06T15:25:56.453

知道了。

将问题中的行替换为：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"Storyboard"
                                                     bundle:nil];
SecondViewController *viewController =
            [storyboard instantiateViewControllerWithIdentifier:@"SecondView"];
[self presentViewController:svc animated:YES completion:NULL]; 
```

此解决方案的功劳归功于 IturPablo 的自我回答问题：
[TabBarController, overwriting shouldSelectViewController to do a segue](https://stackoverflow.com/questions/9589538/tabbarcontroller-overwriting-shouldselectviewcontroller-to-do-a-segue)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T14:43:12.370

你在找`performSegueWithIdentifier:sender:`吗？文档似乎与您的描述相符：

> “您可以调用此方法以编程方式触发 segue，也许是为了响应故事板资源文件中无法指定的某些操作”

# asp.net - 从 web 服务调用类

> ID：10030535
> 
> 赞同：0
> 
> 时间：2012-04-05T14:28:25.180
> 
> 标签：asp.net, web-services

正在从我的网络服务访问一个类

```
[WebMethod(EnableSession = true)]
    public string fetchAbsentees(string date)
    {
        string data = string.Empty;

        StudentAttendances students = new StudentAttendances(date);

        SearchStudents fetchStudents =new SearchStudents(students);

            data = jsonSerialize.Serialize(fetchStudents);
        }
        return data; 
    } 
```

当我执行此代码时，我从类中获取值，我在`StudentAttendance`类中具有`StudentId`属性以及`attendancestatus`等....`date``StudentAttendance`

在`SearchStudentClass`我有一个带有一个参数的构造函数（接受StudentId），我的问题是我怎样才能`StudentId`从学生那里得到一个单独的并将它传递给`SearchStudents`.......任何人都可以在这里帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:32:38.310

使用 Linq 从学生那里获取 id 列表

```
students.Select(student => student.StudentId); 
```

这将返回一个`IEnumerable<YourIDType>`. 如果那是你传递给`SearchStudents()`.

上面，您提到`SearchStudents`接受单个`StudentId`，因此在这种情况下，您需要遍历返回的每个学生`StudentAttendances(date)`。

我不知道您的`SearchStudents`班级是什么样子，也不知道返回的是什么，`StudentAttendances(date)`但您可以遍历后者返回的每个学生，将其传递给前者，并在序列化为 JSON 之前汇总结果。

# android - Calling a Dialog from a Dialog

> ID：10030537
> 
> 赞同：0
> 
> 时间：2012-04-05T14:28:30.083
> 
> 标签：android, android-dialog

I am trying to complete my login dialog in my application and I have problems with handling my dialogs.

I have three dialogs, first an AlertDialog as a login dialog, second a progressDialog and an alertDialog which displays an error message. Here is my code:

```
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case KBConstants.DIALOG_LOGIN_ID:
        TextView textUsername;
        TextView textPassword;
        TextView textSave;
        // Here I build my Layout
        ...
        // return dialog
        return new AlertDialog.Builder(this).setTitle(R.string.login_title).setMessage(R.string.login_introduction).setView(loginLayout).setIcon(R.drawable.kreative_barometer_72x72)
                .setPositiveButton(R.string.login_ok, new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {
                        final DialogInterface d = dialog;
                        if (checkBoxSave.isChecked()) {
                            setRememberLogin(true);
                        } else {
                            setRememberLogin(false);
                        }
                        waitConnect = ProgressDialog.show(KreativBarometerMainView.this, getString(R.string.login_connect_title), getString(R.string.login_connect_introduction), false, true);
                        Thread t1 = new Thread() {
                            public void run() {
                                Looper.prepare();
                                DataStruct dataStruct = null;
                                try {
                                    dataStruct = SoapHandler.makeCall(SoapHashMap.CHECK_USER_LOGIN, mainService.getSoapMap(), editUsername.getText().toString(), editPassword.getText().toString(), null, null);
                                    ServerMessageStruct sms = (ServerMessageStruct) dataStruct;
                                    if (sms.getMsgType() == 1) {
                                        mainService.setUserValidation(true);
                                        setLogin(editUsername.getText().toString(), editPassword.getText().toString());
                                    } else {
                                        mainService.setUserValidation(false);

                                        setLogin(null, null);
                                                                                }
                                } catch (IOException ioe) {
                                    mainService.setUserValidation(false);
                                    setLogin(null, null);

                                } catch(XmlPullParserException xmlppe){

                                } finally{
                                    if(!mainService.isUserValidated()){
                                        waitConnect.dismiss();
                                        showDialog(KBConstants.DIALOG_NO_LOGIN_USER_ID);
                                    }
                                }
                                waitConnect.dismiss();
                            }
                        };
                        t1.start();

                    }
                }).setNeutralButton(R.string.login_setup, new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {

                        /* User clicked setup so do some stuff */
                        startActivity(new Intent(packageContext, SettingView.class));
                    }
                }).setNegativeButton(R.string.login_cancel, new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {

                        /* User clicked cancel so do some stuff */
                        KreativBarometerMainView.this.finish();
                    }
                }).setOnCancelListener(new DialogInterface.OnCancelListener() {
                    @Override
                    public void onCancel(DialogInterface dialog) {
                        KreativBarometerMainView.this.finish();

                    }
                }).create();
    case KBConstants.DIALOG_NO_LOGIN_USER_ID:
        return new AlertDialog.Builder(this).setMessage(R.string.login_info_error_user).setIcon(R.drawable.kreative_barometer_72x72).setTitle(R.string.login_error)
                .setNegativeButton("Abbrechen", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {
                        showDialog(KBConstants.DIALOG_LOGIN_ID);
                    }
                }).create();
    }
    return null;
} 
```

When a user clicks on "connect" (positive button) a SOAP call is made to consume a webservice which validates the user data. While the user is waiting for the call to be made, the progressDialog is shown to indicate the work. After the call has been made, the `DIALOG_NO_LOGIN_USER_ID` Dialog should be shown if the user data was not valid. The user can click on okay and the login dialog is shown again.

But the DIALOG_NO_LOGIN_USER_ID dialog is not showing. I tried to call the showDialog() after the Thread was started, but then there are threading issues. The dialog is shown, but the result of the validation is ignored.

Can anyone help me to understand how to manage the dialogs? Is there any other, perhaps "better" solution for using an AlertDialog as a login dialog?

regards, htz

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:37:03.820

好吧，首先，您不需要在另一个对话框中调用对话框。您所做的只是将 onClickListener 设置为对话框按钮并相应地执行操作。例如，当用户单击您时，`"connect" (positive button)`您将调用方法中的下一个对话框`onClick()`。

但是，如果您只想这样，那么您需要一个`Activity Context`可以作为参数传递给自定义对话框并使用该上下文调用新对话框的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:33:27.067

这个问题的解决方案是利用类

`android.os.AsyncTask<Params, Progress, Result>`

JavaDoc 中给出了最好的描述：

“AsyncTask 可以正确和轻松地使用 UI 线程。此类允许在 UI 线程上执行后台操作和发布结果，而无需操作线程和/或处理程序。”

通过使用这些方法`onPreExecute()`，您可以在 UI 线程上操作 View。

完成此方法后，`doInBackground()`将调用 并在此处开始您的后台操作。此方法不适用于 UI 线程，因此它不会阻塞您的应用程序。

`onPostExecute()`调用它之后，您可以使用您的计算结果。

我的问题是在进行后台操作时正确显示进度指示器。这可以通过使用`onProgressUpdate()`在 UI 线程上工作的方法来完成，同时进行后台计算。

# symfony - Query with EXISTS for Doctrine Symfony2

> ID：10030538
> 
> 赞同：22
> 
> 时间：2012-04-05T14:28:38.380
> 
> 标签：symfony, doctrine, query-builder

How can I implement the following query with Query Builder?

```
SELECT * 
FROM t 
WHERE t.status = 1
    OR EXISTS(SELECT * 
              FROM r 
              WHERE r.t_id = t.id 
                  AND r.status = 1
             ) 
```

The part without exist check is easy, but is there a way to implement the `EXISTS`?

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-05T15:48:42.047

您要么需要使用两个查询构建器：

```
$queryBuilder->expr()->exists($subQueryBuilder->getDql()); 
```

或直接使用 DQL：

```
$queryBuilder->expr()->exists('SELECT * 
    FROM r 
    WHERE r.t_id = t.id 
    AND r.status = 1'
); 
```

您将在文档中找到更多示例：http: [//www.doctrine-project.org/projects/doctrine-orm/en/current/reference/query-builder.html](http://www.doctrine-project.org/projects/doctrine-orm/en/current/reference/query-builder.html)

# r - R中同一图表上的频率和累积频率曲线

> ID：10030547
> 
> 赞同：2
> 
> 时间：2012-04-05T14:29:11.073
> 
> 标签：r, plot, ggplot2, frequency-distribution, cumulative-frequency

有没有办法（在 R 中使用 ggplot 或其他方式）在单列（两行）中绘制频率和累积频率曲线，即在另一列的顶部，以便可以使用直线在两条曲线上显示给定的四分位数？我希望我清楚这一点..

您可以使用这些数据..

```
mydata<-structure(list(speed = c(10, 15, 20, 25, 30, 35, 40, 45, 50),frequency = c(0, 1, 5, 10, 20, 10, 6, 3, 0)), .Names = c("speed","frequency"), row.names = c(NA, -9L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T14:59:44.500

```
mydata<-structure(list(speed = c(10, 15, 20, 25, 30, 35, 40, 45, 50),frequency = c(0, 1, 5, 10, 20, 10, 6, 3, 0)), .Names = c("speed","frequency"), row.names = c(NA, -9L), class = "data.frame")

library(ggplot2)

qplot(data=mydata,
      x=speed,
      y=frequency,
      geom=c("point", "line"))+
      geom_line(aes(y=cumsum(frequency))) 
```

![在此处输入图像描述](../Images/f376a00f6f383821fa38142a3062141f.png)

或者

添加累积频率列

```
mydata$sum.freq<-with(mydata, cumsum(frequency))

library(reshape)
qplot(data=melt(mydata, id.vars="speed"),
       x=speed,
       y=value,
       geom=c("point", "line"), facets=variable~.) 
```

![在此处输入图像描述](../Images/6e7f51812156870206bec27089ad9379.png)

# django - 从 mysql 到 DynamoDB 的数据传输

> ID：10030558
> 
> 赞同：1
> 
> 时间：2012-04-05T14:30:13.803
> 
> 标签：django, boto, amazon-dynamodb

我想将数据（21M 行）从 mysql 数据库传输到 DynamoDB。我正在使用 boto Python API 和 django 1.3.1 从 mysql 导出数据并将其传输到 DynamoDB。下面是代码：

```
 conn = boto.connect_dynamodb()
      start_date = datetime.date(2012, 3, 1)
      end_date = datetime.date(2012, 3, 31)
      episode_report = TableName.objects.filter(viewdt__range=(start_date, end_date))
      #Paginate 21 million rows in chunks of 1000 each
      p = Paginator(episode_report, 1000)
      table = conn.get_table('ep_march')
      for page in range(1, p.num_pages + 1): 
          for items in p.page(page).object_list:
              item_data = {
                        'id': int(items.id),
                        'user_id': format_user(items.user),     #Foreign Key to User table
                        'episode_id': int(items.episode.id),          #Foreign Key to Episode table
                        'series_id': int(items.series.id),      #Foreign Key to Series Table
                        'viewdt': str(items.viewdt),                   
                     }
              item = table.new_item(
                                    # Our hash key is 'id'
                                    hash_key= int(items.id),
                                    # Our range key is 'viewdt'
                                    range_key= str(items.viewdt),
                                    # This has the
                                    attrs=item_data
                                )
              item.put() 
```

问题是该进程已经运行了超过 12 个小时，并且仍然传输了 3M 行。有什么想法可以加快这个过程吗？

我会创建更多线程并对传输进行并行化，看看是否有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:35:45.073

首先，您的 DynamoDB 表的预置吞吐量是多少？这将最终控制您可以进行多少次写入/秒。相应调整。

其次，获得某种并发性。您可以使用线程（确保每个线程都有自己的连接对象，因为 httplib.py 不是线程安全的），或者您可以使用 gevent 或 multiprocess 或任何您喜欢的机制，但并发性是关键。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T19:43:36.360

Amazon 将批量数据传入和传出 DynamoDB 的解决方案是使用 Elastic MapReduce。以下是文档：[http ://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/EMRforDynamoDB.html](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/EMRforDynamoDB.html)

# haskell - Haskell函数的部分应用，派生类型

> ID：10030559
> 
> 赞同：4
> 
> 时间：2012-04-05T14:30:18.653
> 
> 标签：haskell

在 GHCI prelude> 中使用 :t 来查找函数的类型：

```
(.) :: (b -> c) -> (a -> b) -> a -> c

(:) :: a -> [a] -> [a]

((.)(:)) :: (a -> b) -> a -> [b] -> [b]   -- (what happened here?) 
```

我了解单个功能的结果，但部分应用时我不了解。

[地图地图的类型是什么？](http://lambda-the-ultimate.org/node/2948)我在此页面上找到了答案，如何以代数方式执行此操作。但是我在`((.)(:))`.

当你想知道的类型时，方法是`((.)(:))`什么？有没有一种思维方式可以用于函数的任何部分应用？

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-05T14:39:14.710

The best thing to do, when you want to infer a type for a partial application is to start from the most general types of your building blocks and search for matches between the types you're composing. Let me make this more clear by describing you the reasoning I followed for the type you was searching for.

First of all, let's rename the type variables for `(:)` in order to avoid confusion:

```
(.) :: (b -> c) -> (a -> b) -> a -> c
(:) :: d -> [d] -> [d] 
```

`(.) (:)` partially applies `(:)` to `(.)`, providing its first argument only. This means that the first argument of `(.)`, that is of type `(b -> c)`, is instantiated to `(d -> ([d] -> [d]))`, with `b == d` and `c == ([d] -> [d])` (remember that `->` is right associative).

If you apply this type substitution in the whole thing, you get that the partially applied `(.)` loses its first argument (it has been fixed as `(:)`) and results in `(a -> d) -> a -> ([d] -> [d])`, that is equivalent to `(a -> d) -> a -> [d] -> [d]` (again, by right-associativity): this is the type expression you got from ghci.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-05T16:14:50.837

要扩展@Riccardo 的答案：

1.  类型签名的对应

    ```
    (b  ->       c     )       -- first argument of (.)
    (d  ->  ([d] -> [d])       --   corresponds to type of (:) 
    ```

2.  替代

    ```
    (a -> b) -> a ->      c    -- rest of (.)'s type, minus first argument 
    ```

    至

    ```
    (a -> d) -> a -> ([d] -> [d]) 
    ```

3.  右结合性

    ```
    (a -> d) -> a -> [d] -> [d] 
    ```

# asp.net - 从以下 XML 中删除一个节点。

> ID：10030563
> 
> 赞同：1
> 
> 时间：2012-04-05T14:30:28.023
> 
> 标签：asp.net, .net, xml, vb.net, infragistics

`WriteXmlString()`这是我从of的输出中得到的 xml `Infragistics ultrawebtree`。我正在使用它来创建另一个`Infragistics ultrawebtree`具有相同结构的。但在这里我不想要`<Url>something.aspx..</Url>`. 我希望是这样的`<Url><\Url>`。所以我怎么能删除。这是我得到的一个字符串。所以我用`Regex.Replace()`. 但它会在某些条件下工作，但在某些情况下，它会通过删除一些 xml 标签来破坏 xml，并且 xml 由于缺少标签而变得无效。我使用这个表达式`<Url>\S*</Url>`来避免 Url 的内容。任何帮助都会非常有帮助。提前致谢。

```
<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
- <InfragisticsServerTree XmlVersion="1.0">
  - <uwtModule>
    - <ProjectProperties>
      <ComponentTarget>ClassicTree</ComponentTarget>
      <BrowserTarget>Auto</BrowserTarget>
    </ProjectProperties>
    - <TreeProperties>
      <MaxDataBindDepth>-1</MaxDataBindDepth>
      <Name>uwtModule</Name>
      <Indentation>20</Indentation>
      <SubMenuImage>igNone</SubMenuImage>
      <LoadOnDemandPrompt>
        <b>Loading...</b>
      </LoadOnDemandPrompt>
      <ExpandAnimation>Decelerate</ExpandAnimation>
      <ExpandOnClick>false</ExpandOnClick>
      <CompactRendering>false</CompactRendering>
      <RenderAnchors>false</RenderAnchors>
      - <Style>
        <ForeColor>-16777216</ForeColor>
        <BorderColor>-4144960</BorderColor>
        <BorderStyle>None</BorderStyle>
        <BorderWidth>1px</BorderWidth>
        - <Font>
          <Name>Arial</Name>
          - <Names>
            <Name>Arial</Name>
          </Names>
          <Size>11px</Size>
        </Font>
        <Height>425px</Height>
        <Width>97%</Width>
        - <Padding>
          <Top>5px</Top>
          <Left>5px</Left>
          <Right>5px</Right>
          <Bottom>5px</Bottom>
        </Padding>
      </Style>
      - <SelectedNodeStyle>
        <BackColor>-2894893</BackColor>
        <ForeColor>-16777216</ForeColor>
        - <Padding>
          <Top>2px</Top>
          <Left>2px</Left>
          <Right>2px</Right>
          <Bottom>2px</Bottom>
        </Padding>
      </SelectedNodeStyle>
    </TreeProperties>
    <Styles />
    - <Levels>
      - <Level>
        <Number>0</Number>
      </Level>
    </Levels>
- <Nodes>
  - <Node>
    <Text>123</Text>
    <Url>ModuleEdit.aspx?ModuleID=965</Url>
    <Target>main</Target>
    <Tag>965</Tag>
    <Title>AccptChangesPerfPM</Title>
    <Expanded>true</Expanded>
    - <Nodes>
      - <Node>
        <Text>111</Text>
        <Url>123.aspx?e=965 </Url>
        <Target>main</Target>
        <Tag>TL_-99999</Tag>
      </Node>
      - <Node>
        <Text>werrv</Text>
        <Url>1dfee.aspx?qwe=9er65</Url>
        <Target>main</Target>
        <Tag>12DDfe</Tag>
      </Node>
      - <Node>
        <Text>q2233</Text>
        <Target>main</Target>
        <Tag>TL_1015</Tag>
        <Title>Topic_1</Title>
        <ShowExpand>true</ShowExpand>
        - <Nodes>
          - <Node>
            <Text>T1</Text>
            <Url>w3345_954y65.aspx?ID=965er</Url>
            <Target>main</Target>
            - <Style>
              <ForeColor>-16777216</ForeColor>
            </Style>
            <Tag>82355</Tag>
            <Title>T1</Title>
          </Node>
          - <Node>
            <Text>T2</Text>
            <Url>23_7811.aspx?ID=3u65</Url>
            <Target>main</Target>
            - <Style>
              <ForeColor>-16777216</ForeColor>
            </Style>
            <Tag>82356</Tag>
            <Title>T2</Title>
          </Node>
          - <Node>
            <Text>T3</Text>
            <Url>we456_9.aspx?ID=4r56</Url>
            <Target>main</Target>
            - <Style>
              <ForeColor>-16777216</ForeColor>
            </Style>
            <Tag>82357</Tag>
            <Title>T3</Title>
          </Node>
        </Nodes>
      </Node>
    </Nodes>
  </Node>
</Nodes>
  </uwtModule>
</InfragisticsServerTree> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T15:20:29.843

我的建议是忽略正则表达式。

去 VB 的 XML 类从文件中读取它，然后使用节点列表和节点。

以下是一些帮助您入门的链接：

[在 VB 中创建 XML#](http://msdn.microsoft.com/en-us/library/windows/desktop/ms760231%28v=vs.85%29.aspx)

[在 VB 中修改 XML 文字#](http://msdn.microsoft.com/en-us/library/bb918016.aspx)

[VB中对XML文件的多个操作示例#](http://support.microsoft.com/kb/301233)

[[VB.NET] XML - 创建和合并文件。编辑、添加和删除节点。](http://www.vbforums.com/showthread.php?t=478692)

在上面的链接中，您将找到大量文档和示例，如何打开、编辑、创建、合并。

下面是如何做你上面问的。：但有一个公平的警告：这是 C#，你需要使用上面的链接进行转换，因为我不是一个 VB.Net 开发人员

```
string path = "./"; //your own path
string name = "Tempo"; //filename
XmlDocument f = new XmlDocument();
f.Load(path + name + ".xml");
XmlNodeList a = f.GetElementsByTagName("Url");
for (int i = 0; i < a.Count; i++)
{
    a[i].InnerText = ""  //This had the data inside <Url>...</Url>
}
    f.Save(path+name); //Edited to add the save 
```

# google-maps - 在地图上显示区域

> ID：10030564
> 
> 赞同：0
> 
> 时间：2012-04-05T14:30:39.403
> 
> 标签：google-maps, google-maps-api-3

我想在我的地图上显示该地区，就像我们可以在这个上看到新泽西州一样：[http ://maps.google.com/maps?q=New+Jersey,+%C3%89tats-Unis&hl= fr&ie=UTF8&sll=46.957442,7.447329&sspn=0.010823,0.019205&oq=new+je&hnear=New+Jersey&t=m&z=8](http://maps.google.com/maps?q=New+Jersey,+%C3%89tats-Unis&hl=fr&ie=UTF8&sll=46.957442,7.447329&sspn=0.010823,0.019205&oq=new+je&hnear=New+Jersey&t=m&z=8)

找了2天，还没找到怎么做。我刚刚找到要显示的 Region 的 id，即 0x478e39c0d43a1b77:0x8a06a97eae310a0 （代表[瑞士的伯尔尼州，](http://maps.google.com/maps?q=Canton%20de%20Berne,%20Suisse&hl=fr&sll=40.058324,-74.405661&sspn=3.10691,4.916382&oq=canton%20de%20berne&hnear=Berne,%20Suisse&t=m&z=9)但我不知道它是否对我真的有用）。

如何在我的实际以下代码中对其进行整数运算？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<style type="text/css">
  html { height: 100% }
  body { height: 100%; margin: 0px; padding: 0px }
  #map_canvas { height: 100%; width: 100% }
    </style>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
</head>
<title>MA's Karte</title>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false">// charge les scripts Google</script>
<script type="text/javascript">

  var markers = []; // tableau de marqueurs
  var iterator = 0; // compteur de marqueurs
  var map;

  // Liste des adresses géocodées
  var pers = new Array();
  var coord = new Array();
  <?php
    // Connection à la base de données
  include 'connexion.php';

  $ktd = mysql_query('SELECT name, vorname, coorX, coorY FROM ma WHERE  grup != 14 ORDER BY coorY');
        $num_tab = 0;
      while($ligne = mysql_fetch_array($ktd)) {
        echo 'coord['.$num_tab.'] = new google.maps.LatLng('.$ligne['coorX'].', '.$ligne['coorY'].');';
    echo 'pers['.$num_tab.'] = "'.$ligne['vorname'].' '.$ligne['name'].'";';
    $num_tab++;
  }
  ?>

  // Affichage de la carte
  function initialize() {
    var mapOptions = {
      zoom: 9,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      center: new google.maps.LatLng(46.801,7.148666) // Coordonnées de Fribourg pour centrer la carte
    };
    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
  }

  // Ajout des marqueurs en chute
  function drop() {
    for (var i = 0; i < coord.length; i++) {
      setTimeout(function() {
        addMarker();                
      }, i * 100);
    }
  }

    var onMarkerClick = function() {
      var marker = this;
      var latLng = marker.getPosition();
      infoWindow.setContent('<h3>Marker position is:</h3>' +
      latLng.lat() + ', ' + latLng.lng());

      infoWindow.open(map, marker);
    };

  // Création des marqueurs
  function addMarker() {
   // document.getElementById("test").innerHTML = coord[iterator];
      markers.push(new google.maps.Marker({
      position: coord[iterator],
      map: map,
      draggable: false,
      animation: google.maps.Animation.DROP,
      title: pers[iterator]
    }));

    iterator++;
  }
</script>
</head>
<body onload="initialize(); drop();">
<div id="map_canvas">map div</div>
</body>
</html> 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:58:10.803

查看地图多边形的参考。

[https://developers.google.com/maps/documentation/javascript/reference#Polygon](https://developers.google.com/maps/documentation/javascript/reference#Polygon) https://developers.google.com/maps/documentation/javascript/reference#PolygonOptions

您需要将所有这些点推入一个数组并将该数组提供给多边形。

[https://developers.google.com/maps/documentation/javascript/overlays#PolygonOptions](https://developers.google.com/maps/documentation/javascript/overlays#PolygonOptions)

# javascript - 从数组中随机生成图片和文本的脚本

> ID：10030565
> 
> 赞同：1
> 
> 时间：2012-04-05T14:30:41.187
> 
> 标签：javascript, html

我实际上是在尝试对其进行设置，以便当我单击网站上的按钮时，页面会使用数组中的随机文本和数组中的随机图像刷新。我已经把文字部分写下来了，但需要知道如何做图片部分。这是我现在用于文本生成器的脚本：

```
<script language="JavaScript">
var r_text = new Array ();
r_text[0] = "You'll want to track-change your life";
r_text[1] = "A misplaced comma can get you fired";
r_text[2] = "Work-life balance? Ha!";
r_text[3] = "Even the bankers laugh at you";
r_text[4] = "There's a gym so you can't leave the building";
r_text[5] = "Student debt can't be discharged";
r_text[6] = "Sallie Mae becomes one of your biggest contacts";
r_text[7] = "Good luck with partner track";
r_text[8] = "There are no lifestyle firms";
r_text[9] = "Your soul will die";
r_text[10] = "Socratic Method? More like Suck-ratic Method";
r_text[11] = "So much paper. You'll be destroying rainforests";
var i = Math.floor(12*Math.random())
document.write(r_text[i]);
</script> 
```

关于我可以做些什么来在这里获取图像的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:36:27.533

```
var r_images = new Array (); 
r_images[0] = "a.jpg";
r_images[1] = "b.jpg;
.
.
.

var i = Math.floor(12*Math.random())
document.write(r_text[i]);
document.write("<img src='"+images_folder+r_images[i]+"' />"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T18:06:23.147

我意识到这是一篇旧文章，但对于未来的读者，请考虑使用`innerHTML`代替，`document.write`并且我建议您在添加更多图像时更改`var i = Math.floor(12*Math.random())`为`var i = Math.floor(r_text.length * Math.random());`这种方式，您不必担心更改旁边的数字`*Math.random())`

在此示例中，我使用了 Array 对象，以便您可以轻松地为每个图像定义 alt 文本（对于那些验证贴纸）。

对于任何关心工作示例的人：

[http://jsfiddle.net/GmZPe/3/](http://jsfiddle.net/GmZPe/3/)

**HTML**

```
<div id="container"></div> 
```

**JS**

```
var r_img = [];
r_img[0] = {
    source:
        "image01.png",
    altText:
        "image 01"
};
r_img[1] = {
    source:
        "image02.png",
    altText:
        "image 02"
};
r_img[2] = {
    source:
        "image03.png",
    altText:
        "image 03"
};

var i = Math.floor(r_img.length * Math.random());
var s = "<img src='http://tinyurl.com/ky3nmqp/" + r_img[i].source + "' alt='" + r_img[i].altText + "'>";
document.getElementById('container').innerHTML = s; 
```

* * *

或者，如果您愿意，我们可以将它包装在一个函数中，当事件发生时调用它：

[http://jsfiddle.net/GmZPe/4/](http://jsfiddle.net/GmZPe/4/)

**HTML**

```
<div id="container"></div>
<button onclick="myFunction()">Click me</button> 
```

**JS**

```
function myFunction() {
    var r_img = [];
    r_img[0] = {
        source:
            "image01.png",
        altText:
            "image 01"
    };
    r_img[1] = {
        source:
            "image02.png",
        altText:
            "image 02"
    };
    r_img[2] = {
        source:
            "image03.png",
        altText:
            "image 03"
    };

    var i = Math.floor(r_img.length * Math.random());
    var s = "<img src='http://tinyurl.com/ky3nmqp/" + r_img[i].source + "' alt='" + r_img[i].altText + "'>";
document.getElementById('container').innerHTML = s;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T14:34:10.230

只需将 img 标签放在同一个数组中，这样它就可以与文本混合：

```
....
r_text[12] = "<img src='1.gif' />";
r_text[13] = "<img src='2.gif' />";
... 
```

ETC....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T14:37:28.330

你可以对图像做同样的事情吗？

```
var imageNames = ['life', 'fired', 'balance', 'bakers', 'gym']
var i = Math.floor(5*Math.random())
document.write("<img src='http://path/to/your/image/" + imageNames[i] + ".jpg'>"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T14:44:37.940

为图像设置一个文件夹，并给它们随机命名 12,13,14 .......比相同的文本

```
var i = Math.floor(24*Math.random())
document.write("<img src='folder-path/" + r_text[i] + ".jpg'>"); 
```

# php - JSON。解析数组数组。如何？

> ID：10030566
> 
> 赞同：0
> 
> 时间：2012-04-05T14:30:42.870
> 
> 标签：php, jquery, json

如何修改现有的 JQuery 代码以循环遍历 JSON 数组？例如，当 PHP 从包含多于 1 行的 MySQL 数据库返回 JSON 结果时。

这是我的代码。它仅适用于单行结果。

```
$(function(){

    $('#btn_select_account').live('click', function() {

    // URL...
    $.getJSON('api.php?',
    // Parameters...
    { call: 'select_account', p0: 'suchislife801' },

     function(result){

        // For each item inside array...
        $.each(result, function(index, value) { 

          // Append to this html element
          $('#output').append(index + ': ' + value + '<br />').fadeIn(300); 

        });

     });

  });

}); 
```

以下 PHP 代码....

```
 function qry_select_account($pk_account) {

  // Global variables
  Global $db_host, $db_user, $db_pass, $db_name;  

  // Connect to database server
  $dbc = mysql_connect($db_host, $db_user, $db_pass) or die(mysql_error());
  // Select target database
  mysql_select_db($db_name) or die(mysql_error());

  // suchislife801 <--- Selects account information
  // Run query
  $sql_qry = mysql_query("SELECT * FROM tblaccount
                         WHERE pk_account = '$pk_account'") or die(mysql_error());

  // SQL Criteria  AND acc_confirmed = 'y' AND acc_locked = 'n'

  // Fetch table row for this user
  $row = mysql_fetch_row($sql_qry);

  print json_encode($row);

  mysql_free_result($sql_qry);

  // Close Connection
  mysql_close($dbc);

  } 
```

生成以下响应：

```
["20","1","suchislife801","Happy","My first entry title.","Body of my first entry.","2012-04-03","15:06:38","n","0"] 
```

我正在尝试对其进行更改，以使其与以下 PHP 代码一起使用...

```
 function qry_select_last5_entries_for_user($ent_user) {

  // Global variables
  Global $db_host, $db_user, $db_pass, $db_name;  

  // Connect to database server
  $dbc = mysql_connect($db_host, $db_user, $db_pass) or die(mysql_error());
  // Select target database
  mysql_select_db($db_name) or die(mysql_error());

  // suchislife801 <--- Selects last 5 entries for user
  // Run query
  $sql_qry = mysql_query("SELECT * FROM tblentry 
                          WHERE ent_user = '$ent_user' ORDER BY ent_date DESC , ent_time DESC LIMIT 5") or die(mysql_error());

  // Fetch table rows for this user
  while ($row = mysql_fetch_array($sql_qry, MYSQL_NUM)) {

  print json_encode($row);

  } 

  mysql_free_result($sql_qry);

  // Close Connection
  mysql_close($dbc);

  }

["20","1","suchislife801","Happy","My first entry title.","Body of my first entry.","2012-04-03","15:06:38","n","0"]["19","1","suchislife801","Happy","My first entry title.","Body of my first entry.","2012-04-03","15:06:37","n","0"]["18","1","suchislife801","Happy","My first entry title.","Body of my first entry.","2012-04-03","15:06:36","n","0"]["17","1","suchislife801","Ugly","My first entry title.","Body of my first entry.","2012-04-03","15:06:35","n","0"]["15","1","suchislife801","Lazy","My first entry title.","Body of my first entry.","2012-04-03","15:06:34","n","0"] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T15:50:31.360

在您的 php 中，修改循环以创建一个数组，然后回显该数组的 json_encode 结果。

输出应如下所示：

```
[["20","1","suchislife801","Happy","My first entry title.","Body of my first entry.","2012-04-03","15:06:38","n","0"],["19","1","suchislife801","Happy","My first entry title.","Body of my first entry.","2012-04-03","15:06:37","n","0"],["18","1","suchislife801","Happy","My first entry title.","Body of my first entry.","2012-04-03","15:06:36","n","0"],["17","1","suchislife801","Ugly","My first entry title.","Body of my first entry.","2012-04-03","15:06:35","n","0"],["15","1","suchislife801","Lazy","My first entry title.","Body of my first entry.","2012-04-03","15:06:34","n","0"]] 
```

然后，在 jQuery 中，你会像这样输出它：

```
var outHtml = "";
$.each(result, function(index, value) { 
    outHtml += "Entry " + index + ":<br />";
    outHtml += $.map(value,function(i,value){
        return i + ": " + value + "<br />";
    }).join("");
    outHtml += "<br /><br />";
});

$("#output").html(outHtml); 
```

**演示：http:** [//jsfiddle.net/R8wvn/](http://jsfiddle.net/R8wvn/)

**编辑：**
php 以获得所需的结果（未测试）：

```
var $out = array();
// Fetch table rows for this user
while ($row = mysql_fetch_array($sql_qry, MYSQL_NUM)) {
  array_push($out,$row);
} 
print json_encode($out); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:50:58.753

由于它看起来也`value`将是一个 json 对象，因此您可以这样做：

```
$.each(result, function(index, value) { 
    for (var key in value) 
        $('#output').append(index + ': ' + key + ': ' + value[key] + '<br />').fadeIn(300);
)}; 
```

小提琴演示：http: [//jsfiddle.net/StefanCoetzee/FZ8f2/3/](http://jsfiddle.net/StefanCoetzee/FZ8f2/3/)

编辑：只需将您的 php 代码更改为：

```
$arr_results = array();
// Fetch table rows for this user
while ($row = mysql_fetch_array($sql_qry, MYSQL_NUM))
    $arr_results[] = $row;         // quicker than using array_push()
echo json_encode($arr_results);    // *echo* is apparently slightly faster than *print* 
```

这会产生有效的 json 输出。

# javascript - jQuery搜索数组数组？

> ID：10030568
> 
> 赞同：1
> 
> 时间：2012-04-05T14:30:57.257
> 
> 标签：javascript, jquery, arrays

我有以下内容，我试图弄清楚如何搜索对象数组 - 该`call()`函数被多次调用？

```
var arr = [];
var newData;

function call() {
    newData = $('a').attr('href');

    if($.inArray(newData, arr) == -1) {
      $.post('/blah', function(data) {
          arr.push(data);
      });
    }
} 
```

`data`就`[object{ }]`这样`arr`变成了`[[object{id='1', myUrl=''}], [object{id='2', myUrl='' }]]`。

我想弄清楚是否`newData`包含在`arr`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:53:04.483

如果数组包含对象，`$.inArray`将不起作用。这是因为对象仅在它们是相同对象时才相等，而不仅仅是包含相同的值。

`$.inArray`在这里也不起作用，因为`newData`它是一个字符串。它不会为您在每个对象中搜索，您需要自己使用自己的循环进行搜索。

像这样的东西：

```
newData = $('a').attr('href');
$.each(arr, function(){
    if(this.myUrl === newData){
        $.post('/blah', function(data) {
            arr.push(data);
        });
        return false; // break once a match is found
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:36:04.573

该数组`arr`将包含一个对象列表。为什么会`newData`被“包含”在内`arr`？它们是两个独立的变量。

更新 - 经过进一步检查，这条线不好：

```
if($.inArray(newData, arr) == -1) { 
```

您本质上是在说在 arr （为空）中查找 newData 。

更新 - 这是一些应该工作的示例代码。在这里，我将数据视为具有名为“url”的属性的普通旧对象（不是对象数组）。

[http://jsfiddle.net/nWh6N/](http://jsfiddle.net/nWh6N/)

# java - 单元测试谷歌应用引擎 1.6.4 中的非法 blobKey 错误

> ID：10030570
> 
> 赞同：0
> 
> 时间：2012-04-05T14:31:17.547
> 
> 标签：java, google-app-engine, junit

这里发生了奇怪的事情。运行任何调用的单元测试时：

```
FileService fileService = FileServiceFactory.getFileService();
writeChannel = fileService.openWriteChannel(file, lock);
writeChannel.closeFinally(); 
```

我得到以下异常 - 代码在单元测试之外和其他工作站上运行良好 - 所以这是我被迫使用的 Windows XP 笔记本电脑上的环境问题。测试在我的其他电脑和笔记本电脑上运行良好（运行 ubuntu）

```
java.lang.RuntimeException: illegal blobKey: pIONuF92LGIK8TV41YSSdQ
    at com.google.appengine.api.blobstore.dev.FileBlobStorage.getFileForBlob(FileBlobStorage.java:95)
    at com.google.appengine.api.blobstore.dev.FileBlobStorage.storeBlob(FileBlobStorage.java:45)
    at com.google.appengine.api.files.dev.BlobstoreFile.getOutputStream(BlobstoreFile.java:225)
    at com.google.appengine.api.files.dev.FileMetadata.setFinalized(FileMetadata.java:97)
    at com.google.appengine.api.files.dev.BlobstoreFile.setFinalized(BlobstoreFile.java:212)
    at com.google.appengine.api.files.dev.LocalFileService.close(LocalFileService.java:334)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at com.google.appengine.tools.development.ApiProxyLocalImpl$AsyncApiCall.callInternal(ApiProxyLocalImpl.java:498)
    at com.google.appengine.tools.development.ApiProxyLocalImpl$AsyncApiCall.call(ApiProxyLocalImpl.java:452)
    at com.google.appengine.tools.development.ApiProxyLocalImpl$AsyncApiCall.call(ApiProxyLocalImpl.java:430)
    at java.util.concurrent.Executors$PrivilegedCallable$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.util.concurrent.Executors$PrivilegedCallable.call(Unknown Source)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T13:09:53.627

您可以通过将 LocalBlobstoreServiceTestConfig() 添加到 LocalServiceTestHelper 设置来避免这种情况。在将它添加到失败的测试类后，我才让它工作。

我不确定这是否确实是一个错误。我认为该错误是在 SDK 提供本地 blobstore 仿真而没有正确的测试设置配置之前。

# jquery - 如何使用跨域查询进行身份验证

> ID：10030572
> 
> 赞同：0
> 
> 时间：2012-04-05T14:31:21.797
> 
> 标签：jquery, ajax

我想将我的应用程序与其他网站集成。在此我的网站将代表用户向其他网站发送发布请求，因此这将在用户浏览器中设置 cookie，而不是将用户重定向到该网站，因此用户不会需要提供身份验证详细信息。

我如何实现这一点，因为 ajax 不调用跨域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:39:42.667

Here is an example on how you can do cross domain calls with AJAX: [http://coding4life.wordpress.com/2012/03/30/making-cross-domain-calls-in-signalr/](http://coding4life.wordpress.com/2012/03/30/making-cross-domain-calls-in-signalr/) (**Disclaimer:** It's my personal blog)

It uses SignalR, but internally this is using jQuery. To active cross domain calls in jQuery you have to use:

```
jQuery.support.cors = true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:59:30.257

正如其他答案所提到的，您可以使用代理或 cors。但请注意，cors 与某些较旧的浏览器不兼容。

另一种选择是使用 jsonp 进行跨域调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T14:46:15.437

您仍然可以使用 ajax 调用，但通过代理解析它！检查此链接以获取更多详细信息。

[http://benalman.com/code/projects/php-simple-proxy/docs/files/ba-simple-proxy-php.html](http://benalman.com/code/projects/php-simple-proxy/docs/files/ba-simple-proxy-php.html)

通过对远程 php 文件进行一些调整，您可以使其在没有代理的情况下工作，但不能在 Internet Explorer 上工作。

我在应用程序中的跨域调用中使用该代理并且运行良好。

**小心**如果您想在链接中传递参数，您必须将字符编码为 HTML，如下所示：

```
/ = %2F
: = %3A
& = %26
 (space) = %2520 
```

否则代理 php 文件会给你一个错误。

在该站点上有一个工作示例，您可以测试输出。

希望这可以帮助您解决跨域问题。对我来说，它奏效了。

# facebook - 从 Facebook 权限对话框中取消重定向并且不会关闭

> ID：10030576
> 
> 赞同：1
> 
> 时间：2012-04-05T14:31:33.107
> 
> 标签：facebook, login, permissions

我正在尝试使用 Javascript 将 Facebook 登录功能添加到我的网站。我已经调用了 FB.init 和 FB.login 并得到了预期的弹出窗口，要求我使用我的 Facebook 凭据登录。对 FB.login 的调用请求 user_birthday 和电子邮件权限，因此我也得到了预期的对话框，要求我允许这些权限。如果我接受，则登录有效并且控制权返回到我的父页面。

如果我不接受权限（点击取消按钮），接下来发生的事情似乎不一致。我希望弹出窗口会消失并将控制权返回给父窗口，然后父窗口将能够处理被拒绝的响应。最终，我想给我的用户一个消息，让他们知道当他们取消时会发生什么。

相反，我有时会看到弹出窗口重定向到您直接登录 Facebook 时看到的 Facebook 主页面。有时，弹出窗口会变成空白并停在那里（它指向我在 FB.init 调用中指定的 ChannelUrl 页面）。在这两种情况下，在我手动关闭弹出窗口之前，控制权都不会返回到父页面。

示例代码：

```
<html>
<body>
<div id="fb-root"></div>
<script language="Javascript">
window.fbAsyncInit = function() {
    FB.init({
        AppId      : 'XXXXXXX',
        channelUrl: 'http://www.mydomain.com/channel.html', //custom channel
        status: true,
        cookie: true, 
        xfbml:  true,
        oauth: true
  });

};

// Load the SDK Asynchronously
(function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
}(document))

function fbLogin()
{
    FB.login(function (response){
        if (response.authResponse) {
            Debug("Auth Logged in");
        }
        else
        {
            Debug("Auth failed");
        }
    }, {scope:'user_birthday,email'});
}

function Debug(psMessage)
{  // something to provide feedback on what happened...
    var objDebug = document.getElementById("Debug");
    var objDate = new Date();
    var sTime = objDate.getHours() + ":" + objDate.getMinutes() + ":" + objDate.getSeconds();
    objDebug.innerHTML = sTime + " - " + psMessage + "<br>" + objDebug.innerHTML;
}
</script>
<form>
<input type="button" value="Log in" onClick="fbLogin();">
<br>
<br>
<br>
<br>
<div id="Debug"></div>
</form>

</body>
</html> 
```

我尝试了各种各样的事情。我已删除并创建了一个新应用程序。我创建了 channelUrl 参数（它只包括 `<script src="//connect.facebook.net/en_US/all.js"></script>`）。

有没有人知道我做错了什么（这似乎至少发生在 Windows XP 上的 IE8、Safari 5.0.5 和 Firefox 11.0 中）？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-15T17:37:42.370

我知道这是一个旧线程，但希望我的解决方案能帮助面临同样问题的人。

1.  如果您使用旧的 Facebook 应用仪表板，请禁用您的沙盒模式。

2.  如果您使用新的 Facebook 应用程序仪表板，请单击状态和评论（在左侧栏）并将“...可供公众使用”从“否”更改为“是”。

希望这可能会有所帮助。祝你好运 ;）

# codeigniter - 在 Codeigniter 中访问跨方法混淆的全局变量？

> ID：10030580
> 
> 赞同：0
> 
> 时间：2012-04-05T14:31:49.317
> 
> 标签：codeigniter

这就是我所拥有的：

```
class Calendar extends CI_Controller {

    public $extension;

    function __construct()
    {
        parent::__construct();
        $this->extension = "";
    }

    public function index($page_id, $extension=null)
    {
        if(!is_null($extension))
        {
            $this->extension = $extension;
        }
        $this->firephp->log($this->extension);
        $this->load->view('/modules/calendar_view', array("page_id" => $page_id, "extension" => $this->extension));
    }

    public function update_calendar($width, $page_id, $new_month=null, $new_year=null)
    {
        $this->firephp->log($this->extension);
    }
} 
```

显然，正确的值在 index 方法中很好地呼应了。但是它加载的视图然后调用第二种方法并且未设置全局变量。

有没有办法设置它，直到它被明确改变？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:52:07.117

`public $extension`这里不是全局变量。我相信 flashdata 是您正在寻找的

```
$this->session->set_flashdata('item', 'value'); 
```

在您的下一个电话中，您可以将项目作为

```
$this->session->flashdata('item'); 
```

这些在下次执行时被刷新。

# php - 本地 Apache Web 服务器上的 $_SERVER[DOCUMENT_ROOT]

> ID：10030582
> 
> 赞同：0
> 
> 时间：2012-04-05T14:31:52.743
> 
> 标签：php, apache, local

我经常使用 $_SERVER[DOCUMENT_ROOT] 来确保我的所有链接都能正常工作。例如：

```
<link href="' . $_SERVER[DOCUMENT_ROOT] . '/favicon.ico" rel="icon" /> 
```

文件的实际路径无关紧要，它总能找到网站图标相对于文档根目录的正确位置。

这一切都在我的网络服务器上按预期工作。但是，在我的本地开发服务器（Windows 7、Apache 2.2、配置的虚拟主机）上，虽然它指向正确的路径（C:/Local/MySite），但实际上什么也没发生（favicon 不起作用，样式表和图像不' t得到加载等）

有没有办法让 $_SERVER[DOCUMENT_ROOT] 在本地工作？

我发现使用“http://”和 $_SERVER[HTTP_HOST] ( ) 可以获得相同的预期结果，`<link href="http://' . $_SERVER[HTTP_HOST] . '/favicon.ico" rel="icon" />`这样做有什么缺点吗？或者，我可以继续使用 $_SERVER[DOCUMENT_ROOT] 并使用服务器重写规则将其解析为将在本地运行的内容，并保持浏览器不变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T14:37:57.083

`$_SERVER[DOCUMENT_ROOT]`是网站根目录的完整路径，对于链接和图像应该会非常失败。

现在，话虽如此，到目前为止您所拥有的一切都还可以......除了`$_SERVER[HTTP_HOST]`只有在使用 HTTP/1.1 建立连接并且客户端发出 Host 标头时才有效。 `$_SERVER[SERVER_NAME]`不过，应该始终有效。请注意，这`$_SERVER[SERVER_NAME]`将使用虚拟主机主地址，所以如果服务器有别名......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T14:47:46.630

文档根目录是您服务器上的本地路径，就浏览器看到您的站点而言，在 URL 空间中没有任何意义。

如果你的 html 有

```
<img src="c:/site/html/favicon.ico" /> 
```

您会告诉用户的浏览器尝试从用户自己的本地驱动器加载该图标。这不仅不起作用，而且还假定用户在 Windows 机器上。Mac/Unix/Linux 用户不会有 C: 驱动器，更不用说`/site/html`在他们自己的本地文件系统的根目录中的目录树了。

`$_SERVER['DOCUMENT_ROOT']`用于服务器内本地文件操作，例如 fopen()、file_get_contents() 等……但对于客户端操作基本上完全没用。

# php - 将字符串中的空间缩小为单个分隔符

> ID：10030586
> 
> 赞同：0
> 
> 时间：2012-04-05T14:32:17.913
> 
> 标签：php, string, space, explode, delimiter

在 PHP 中，我有这个字符串变量：

```
$var = " 00480722                ZF452D041502    13      9900        153370178"; 
```

当我这样做时`explode`，我得到这样的东西：

```
$var = explode(" ",$var);
echo count($var);

// prints -> 36 
```

所以这个爆炸产生了一个由 36 个元素组成的数组，其中大部分是`""`. 如何缩小数据之间的所有这些多个空格，以便我可以做到`explode`并得到：

```
$var[0] -> 00480722
$var[1] -> ZF452D041502
...
$var[4] -> 153370178 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:33:37.677

您可以使用[正则表达式 split](http://php.net/manual/en/function.preg-split.php)：

```
$var = preg_split('/\s+/', trim($var)); 
```

这将拆分任意数量的连续空格字符。用于防止在输入字符串的[`trim`](http://php.net/manual/en/function.trim.php)开头和/或结尾出现空匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T14:33:42.473

尝试

```
$var = " 00480722                ZF452D041502    13      9900        153370178";
$var = explode(" ",$var);
$var = array_filter($var);
echo count($var); 
```

输出

```
5 
```

无功转储

```
var_dump($var);

  array
  1 => string '00480722' (length=8)
  17 => string 'ZF452D041502' (length=12)
  21 => string '13' (length=2)
  27 => string '9900' (length=4)
  35 => string '153370178' (length=9) 
```

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T14:33:41.057

```
$var = array_values(array_filter($var)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T14:38:06.597

另一种选择，用一个替换多个空格：

```
$var = preg_replace("/ {2,}/", " ", $var); //spaces only
$var = preg_replace("/\s{2,}/", " ", $var); //all whitespaces e.g. line breaks, space etc. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T14:38:33.667

```
$var = explode(' ',preg_replace('/( +)/', ' ',$var)); 
```

# android - android中同一活动的多个ip-camera流

> ID：10030587
> 
> 赞同：1
> 
> 时间：2012-04-05T14:32:21.127
> 
> 标签：android, surfaceview, ip-camera

我正在尝试在同一活动中显示来自 ip-cameras 的多个流。我找到了一个扩展surfaceview并应用它的类，但实际上这只适用于这个类的一个实例；其他实例不起作用。如何在 android.xml 中显示同一活动的多个表面视图。如果不可能，那么如何同时显示多个流；我看到一些程序这样做，但我不知道如何。

# python - 为随机函数编写测试

> ID：10030589
> 
> 赞同：1
> 
> 时间：2012-04-05T14:32:36.973
> 
> 标签：python, unit-testing, testing, random

我正在编写一个用于试验进化算法的包，不用说，它包括很多随机方法。现在，我想为这个包编写一些（doc）测试，这样我就可以验证一切正常，但是我遇到了“大多数时候”测试应该是真的情况。感觉好像我可能以错误的方式接近这个问题，但我仍然想听听你对此的一些想法。

例如，我的文档测试中有这样的内容：

```
>>> a = Genome()
>>> b = Genome()
>>> a.mutate()
>>> a != b
True # Well, most of the time. 
```

实施这样的测试意味着测试有时会在一切正常时失败。

我在进行测试之前阅读了修复 RNG 种子的建议，但是我必须确保在编写测试*之前*一切正常，因为测试应该包括预期的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:38:18.930

你可以让它失败的概率可以忽略不计，例如

```
a = Genome()
genomes = []
for i in range(100):
    b = Genome()
    b.mutate()
    genomes.append(b)
assert any(a != b for b in genomes) 
```

如果您最初的测试大部分时间都成功了，那么对于所有实际目的来说，这个测试总是会成功。

该测试还可以对允许匹配的基因组数量施加合理的限制。

可以说，该测试的读数不如原始测试好。也许在这里使用 doctests 是错误的方法，您应该编写单独的单元测试。

# php - Yii 中的动态渲染

> ID：10030594
> 
> 赞同：5
> 
> 时间：2012-04-05T14:32:51.710
> 
> 标签：php, yii

我在 Yii 中有一个“查看”页面。
它与页面缓存一起缓存。
现在，我想插入一些动态内容：

```
$this->renderDynamic('renderPartial','view_name'); 
```

渲染的视图如下所示：

```
<?php some code ?>  
<div>...some html...</div> 
```

代码工作正常，但有这个错误：

> <###dynamic-0###>

所以我知道 html 被回显而不是返回。
我尝试将 return=true 传递给 renderPartial 函数。
正确的语法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T19:23:20.510

更多信息：[http ://www.yiiframework.com/doc/api/1.1/CController#renderDynamic-detail](http://www.yiiframework.com/doc/api/1.1/CController#renderDynamic-detail)

1.  缓存的视图文件：

    ```
    $this->renderDynamic('dynamicTest'); 
    ```

2.  控制器文件（回调函数）：

    ```
    public function dynamicTest()
    {
        return $this->renderPartial('dynamicTest', null, true);
    } 
    ```

3.  动态视图文件：

    ```
    echo 'dynamicTest_' . time(); 
    ```

我认为您忘记在回调函数中添加返回（步骤 2）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T10:37:13.370

> 我尝试将 return=true 传递给 renderPartial 函数。正确的语法是什么？

[renderPartial 的第三个参数](http://www.yiiframework.com/doc/api/1.1/CController#renderPartial-detail)是需要标志

```
 $this->renderDynamic('renderPartial','view_name', null, true); 
```

# javascript - 实现 jQuery 插件

> ID：10030597
> 
> 赞同：0
> 
> 时间：2012-04-05T14:33:19.190
> 
> 标签：javascript, jquery, jquery-plugins

我正在开发一个 jQuery 插件，并且已经遇到了有趣的问题。这是我的代码示例：

```
(function($){

    var settings = {
        'speed': 500
    };

    var methods = {
        init: function(options){
            settings = $.extend(options);
            return this.each(function(){
                $(this).bind('click.hideParagraph',  methods.manage );
            });
        },
        manage: function(){
            if ($(this).hasClass("hidden")){
                methods.show(this);
            } else {
                methods.hide(this);
            }
        },
        show: function(item){
            $(item).fadeIn(settings.speed, function(){});
        },
        hide: function(item){
            $(item).fadeOut(settings.speed, function(){});
        },
        destroy: function(){
            return this.each(function(){
                $(this).unbind('click.hideParagraph');
            });
        }
    };

    $.fn.hideParagraph = function( method ) {
        if ( methods[method] ) {
            return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));
        } else if ( typeof method === 'object' || ! method ) {
            return methods.init.apply( this, arguments );
        } else {
            $.error( 'Method ' +  method + ' does not exist on jQuery.hideParagraph' );
        }   
    };
})(jQuery); 
```

主要问题是函数fadeIn() 和fadeOut() 不能以这种方式工作（错误：f.speed 不是'jquery.min.js' 中的函数）。有人知道为什么会这样吗？

还有一个问题：这是实现 jQuery 插件的正确方法吗？有人可以建议更方便灵活的方式吗？

谢谢。

# wpf - 编写 WebBrowser COM 事件的问题

> ID：10030600
> 
> 赞同：0
> 
> 时间：2012-04-05T14:33:25.430
> 
> 标签：wpf, c#-4.0

我正在开发一个需要显示第三方服务返回的 HTML 的项目。我目前正在使用 WPF`WebBrowser`来显示此输出。然而，这在我的客户眼中造成了潜在的安全问题。当焦点设置为此控件时，您可以使用 + 打开任何网页或使用+`CTRL`打开`O`Internet Explorer 。我的应用程序针对类似信息亭的环境（终端服务）。`Ctrl``N`

过去我使用过 WinForms WebBrowser 控件并且能够通过 COM 进入事件，但是这些策略似乎不适用于 WPF 版本。我的开发伙伴坚持我们开发一个纯 WPF 应用程序，而不是混入 WinForms 选项。

有没有人成功进入`IWebBrowserEvets2`WPF 的 COM 接口`WebBrowser`？我已经能够将`WebBrowser.Document`转换为`IWebBrowser`，但还没有到达我需要的地方。

请帮助我利用这些事件，以便我可以阻止用户创建新窗口和其他可能导致我的客户出现“安全”问题的事件。还是有更好的控制来渲染 HTML 和基本导航？

在此先感谢，
杰罗德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T21:25:22.690

您可以在此处尝试使用 Windows 挂钩。找到浏览器窗口并为其安装适当的键盘挂钩。这个外部应该对你有帮助：

```
[DllImport("user32.dll", SetLastError = true, CharSet = CharSet.Unicode, CallingConvention = CallingConvention.StdCall)]
private static extern IntPtr FindWindowEx(IntPtr hwndParent, IntPtr hwndChildAfter, string lpszClass, IntPtr windowTitle);
[DllImport("user32.dll", CharSet = CharSet.Auto, CallingConvention = CallingConvention.StdCall)]
private static extern IntPtr SetWindowsHookEx(Int32 idHook, HookProc lpfn, IntPtr hInstance, Int32 threadId); 
```

这是一个如何使用它们的示例，但是您必须根据需要实现 KeyboardHookProcedure。

```
private IntPtr FindExplorerWindow()
{
    IntPtr wnd = Browser.Handle;
    if (wnd != IntPtr.Zero)
    {
        wnd = FindWindowEx(wnd, IntPtr.Zero, "Shell DocObject View", IntPtr.Zero);
        if (wnd != IntPtr.Zero)
        {
            wnd = FindWindowEx(wnd, IntPtr.Zero, "Internet Explorer_Server", IntPtr.Zero);
            return wnd;
        }
    }
    return IntPtr.Zero;
}

private void InstallHook()
{
    if (_hHook.ToInt32() > 0) return;

    IntPtr wnd = FindExplorerWindow();
    if (wnd != IntPtr.Zero)
    {
        if (_hookProc == null)
        {
            _hookProc = new HookProc(KeyboardHookProcedure);
        }
        _hHook = SetWindowsHookEx(WH_KEYBOARD, _hookProc, (IntPtr)0, GetCurrentThreadId());
    }
} 
```

祝你好运！

# iphone - LinkedIn menu iPhone app

> ID：10030603
> 
> 赞同：6
> 
> 时间：2012-04-05T14:33:29.967
> 
> 标签：iphone, ios, menu, linkedin

I would like to develop an app with a menu which looks like the ios Linkedin app one. Like this (the left picture)

![enter image description here](../Images/2f230e3e79cd58f117a935a9df414152.png)

There is 4 glimpses (miniatures) which are associated to the four principal views. And the miniature always shows the updated state of the view.

I would like to know we can do a menu like this one ?

Thanks in advance for your help !

Sébastien ;)

* * *

So why do you put the 4 UIView in an other UIView and not directly on the UIViewController ? And you talked about buttons but there are only UIView in your example ? I wonder if the 4 buttons are on the 4 views and are transparent in order to apply the transformation.

Do you have a code example for the transformation ?

Thanks a lot for your help !

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:43:04.247

```
- (void)viewDidLoad {
[super viewDidLoad];
[self.navigationItem setTitle:@"About us"];

presentationViewController = [[PresentationViewController alloc] initWithNibName:@"PresentationViewController" bundle:nil];
secteursViewController = [[SecteursViewController alloc] initWithNibName:@"SecteursViewController" bundle:nil];
engagementsViewController = [[EngagementsViewController alloc] initWithNibName:@"EngagementsViewController" bundle:nil];
interviewsViewController = [[InterviewsViewController alloc] initWithNibName:@"InterviewsViewController" bundle:nil];

presentationApercu = presentationViewController.view;
secteursApercu = secteursViewController.view;    
videosApercu = interviewsViewController.view;
engagementsApercu = engagementsViewController.view;

presentationApercu.transform = CGAffineTransformMakeScale(1/(320./107), 1/(367./122.));
presentationApercu.frame = CGRectMake(27., 18., presentationApercu.frame.size.width, presentationApercu.frame.size.height);

secteursApercu.transform = CGAffineTransformMakeScale(1/(320./107), 1/(367./122.));
secteursApercu.frame = CGRectMake(185., 18., secteursApercu.frame.size.width, secteursApercu.frame.size.height);

videosApercu.transform = CGAffineTransformMakeScale(1/(320./107), 1/(367./122.));
videosApercu.frame = CGRectMake(27., 196., videosApercu.frame.size.width, videosApercu.frame.size.height);;

engagementsApercu.transform = CGAffineTransformMakeScale(1/(320./107), 1/(367./122.));
engagementsApercu.frame = CGRectMake(185., 196., engagementsApercu.frame.size.width, engagementsApercu.frame.size.height);

presentationApercu.tag = 1;
secteursApercu.tag = 2;
videosApercu.tag = 3;
engagementsApercu.tag = 4;

UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(zoomAction:)];
[tap setNumberOfTapsRequired:1];
[presentationApercu addGestureRecognizer:tap];
[tap release];

tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(zoomAction:)];
[tap setNumberOfTapsRequired:1];
[secteursApercu addGestureRecognizer:tap];
[tap release];

tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(zoomAction:)];
[tap setNumberOfTapsRequired:1];
[videosApercu addGestureRecognizer:tap];
[tap release];

tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(zoomAction:)];
[tap setNumberOfTapsRequired:1];
[engagementsApercu addGestureRecognizer:tap];
[tap release];

[self.view addSubview:presentationApercu];
[self.view addSubview:secteursApercu];
[self.view addSubview:videosApercu];
[self.view addSubview:engagementsApercu];

}

#pragma mark - IBActions

- (void)zoomReverse {
[self.navigationItem setLeftBarButtonItem:nil];
UITapGestureRecognizer *tap = nil;

switch (tagEnCours) {
    case 1:
        [self.view bringSubviewToFront:presentationApercu];

        tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(zoomAction:)];
        [tap setNumberOfTapsRequired:1];
        [presentationApercu addGestureRecognizer:tap];
        [tap release];

        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:0.5];
        [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];

        presentationApercu.transform = CGAffineTransformMakeScale(1/(320./107), 1/(367./122.));
        presentationApercu.frame = CGRectMake(27., 18., presentationApercu.frame.size.width, presentationApercu.frame.size.height);

        [UIView commitAnimations];

        break;

    case 2:
        [self.view bringSubviewToFront:secteursApercu];

        tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(zoomAction:)];
        [tap setNumberOfTapsRequired:1];
        [secteursApercu addGestureRecognizer:tap];
        [tap release];

        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:0.5];
        [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];

        secteursApercu.transform = CGAffineTransformMakeScale(1/(320./107), 1/(367./122.));
        secteursApercu.frame = CGRectMake(185., 18., secteursApercu.frame.size.width, secteursApercu.frame.size.height);

        [UIView commitAnimations];

        break;

    case 3:
        [self.view bringSubviewToFront:videosApercu];

        tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(zoomAction:)];
        [tap setNumberOfTapsRequired:1];
        [videosApercu addGestureRecognizer:tap];
        [tap release];

        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:0.5];
        [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];

        videosApercu.transform = CGAffineTransformMakeScale(1/(320./107), 1/(367./122.));
        videosApercu.frame = CGRectMake(27., 196., videosApercu.frame.size.width, videosApercu.frame.size.height);

        [UIView commitAnimations];

        break;

    case 4:
        [self.view bringSubviewToFront:engagementsApercu];

        tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(zoomAction:)];
        [tap setNumberOfTapsRequired:1];
        [engagementsApercu addGestureRecognizer:tap];
        [tap release];

        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:0.5];
        [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];

        engagementsApercu.transform = CGAffineTransformMakeScale(1/(320./107), 1/(367./122.));
        engagementsApercu.frame = CGRectMake(185., 196., engagementsApercu.frame.size.width, engagementsApercu.frame.size.height);

        [UIView commitAnimations];

        break;

    default:
        break;
}
}

- (void)zoomAction:(UITapGestureRecognizer *)sender {
[self.navigationItem setLeftBarButtonItem:[[[UIBarButtonItem alloc] initWithTitle:@"About us" style:UIBarButtonItemStyleDone target:self action:@selector(zoomReverse)] autorelease]];
tagEnCours = sender.view.tag;
switch (sender.view.tag) {
    case 1:
        [self.view bringSubviewToFront:presentationApercu];
        [presentationApercu removeGestureRecognizer:[presentationApercu.gestureRecognizers objectAtIndex:0]];

        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:0.5];
        [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];

        presentationApercu.transform = CGAffineTransformIdentity;
        presentationApercu.frame = CGRectMake(0., 0., presentationApercu.frame.size.width, presentationApercu.frame.size.height);

        [UIView commitAnimations];

        break;

    case 2:
        [self.view bringSubviewToFront:secteursApercu];
        [secteursApercu removeGestureRecognizer:[secteursApercu.gestureRecognizers objectAtIndex:0]];

        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:0.5];
        [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];

        secteursApercu.transform = CGAffineTransformIdentity;
        secteursApercu.frame = CGRectMake(0., 0., secteursApercu.frame.size.width, secteursApercu.frame.size.height);

        [UIView commitAnimations];
        break;

    case 3:
        [self.view bringSubviewToFront:videosApercu];
        [videosApercu removeGestureRecognizer:[videosApercu.gestureRecognizers objectAtIndex:0]];

        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:0.5];
        [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];

        videosApercu.transform = CGAffineTransformIdentity;
        videosApercu.frame = CGRectMake(0., 0., videosApercu.frame.size.width, videosApercu.frame.size.height);

        [UIView commitAnimations];
        break;

    case 4:
        [self.view bringSubviewToFront:engagementsApercu];
        [engagementsApercu removeGestureRecognizer:[engagementsApercu.gestureRecognizers objectAtIndex:0]];

        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:0.5];
        [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];

        engagementsApercu.transform = CGAffineTransformIdentity;
        engagementsApercu.frame = CGRectMake(0., 0., engagementsApercu.frame.size.width, engagementsApercu.frame.size.height);

        [UIView commitAnimations];
        break;

    default:
        break;
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T19:16:48.303

I think that this application is structured as follows:

```
UIViewController
  | UIView
    | UIView
    | UIView
    | UIView
    | UIView 
```

The first contains the main view controller (the one containing the 4 buttons), these are reduced by (I assume) a transform and then the View is superimposed by a view of the secondary, the second requirement.

This is what I think, because if you try to scroll the table and immediately go back, even in the thumbnail view scrolling.

Hope that was of some help.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T12:47:27.963

Consider this as a draft from which to take inspiration:

```
//.h
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController

@end

//.m
#import "ViewController.h"

@interface ViewController ()

@property (nonatomic, strong) UIView *v1;
@property (nonatomic, strong) UIView *v2;
@property (nonatomic, strong) UIView *v3;
@property (nonatomic, strong) UIView *v4;

@end

@implementation ViewController

@synthesize v1 = _v1;
@synthesize v2 = _v2;
@synthesize v3 = _v3;
@synthesize v4 = _v4;

- (void)viewDidLoad {
    [super viewDidLoad];

    _v1 = [[UIView alloc] initWithFrame:self.view.bounds];
    _v2 = [[UIView alloc] initWithFrame:self.view.bounds];    
    _v3 = [[UIView alloc] initWithFrame:self.view.bounds];
    _v4 = [[UIView alloc] initWithFrame:self.view.bounds];

    [_v1 setBackgroundColor:[UIColor redColor]];
    [_v2 setBackgroundColor:[UIColor yellowColor]];
    [_v3 setBackgroundColor:[UIColor blueColor]];
    [_v4 setBackgroundColor:[UIColor greenColor]];

    _v1.transform = CGAffineTransformMakeScale(1/(320./140.), 1/(460./210.));
    _v1.frame = CGRectMake(10., 10., _v1.frame.size.width, _v1.frame.size.height);

    _v2.transform = CGAffineTransformMakeScale(1/(320./140.), 1/(460./210.));
    _v2.frame = CGRectMake(170., 10., _v2.frame.size.width, _v2.frame.size.height);

    _v3.transform = CGAffineTransformMakeScale(1/(320./140.), 1/(460./210.));
    _v3.frame = CGRectMake(10., 240., _v3.frame.size.width, _v3.frame.size.height);

    _v4.transform = CGAffineTransformMakeScale(1/(320./140.), 1/(460./210.));
    _v4.frame = CGRectMake(170., 240., _v4.frame.size.width, _v4.frame.size.height);

    _v1.tag = 1;
    _v2.tag = 2;
    _v3.tag = 3;
    _v4.tag = 4;

    UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(zoomAction:)];
    [tap setNumberOfTapsRequired:1];
    [_v1 addGestureRecognizer:tap];
    [tap release];

    tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(zoomAction:)];
    [tap setNumberOfTapsRequired:1];
    [_v2 addGestureRecognizer:tap];
    [tap release];

    tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(zoomAction:)];
    [tap setNumberOfTapsRequired:1];
    [_v3 addGestureRecognizer:tap];
    [tap release];

    tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(zoomAction:)];
    [tap setNumberOfTapsRequired:1];
    [_v4 addGestureRecognizer:tap];
    [tap release];

    [self.view addSubview:_v1];
    [self.view addSubview:_v2];
    [self.view addSubview:_v3];
    [self.view addSubview:_v4];

    UIButton *btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [btn setFrame:CGRectMake(10, 10, 100, 30)];
    [btn setTitle:@"Close" forState:UIControlStateNormal];
    btn.tag = 1;
    [btn addTarget:self action:@selector(zoomReverse:) forControlEvents:UIControlEventTouchUpInside];
    [_v1 addSubview:btn];

    btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [btn setFrame:CGRectMake(10, 10, 100, 30)];
    [btn setTitle:@"Close" forState:UIControlStateNormal];
    btn.tag = 2;
    [btn addTarget:self action:@selector(zoomReverse:) forControlEvents:UIControlEventTouchUpInside];
    [_v2 addSubview:btn];

    btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [btn setFrame:CGRectMake(10, 10, 100, 30)];
    [btn setTitle:@"Close" forState:UIControlStateNormal];
    btn.tag = 3;
    [btn addTarget:self action:@selector(zoomReverse:) forControlEvents:UIControlEventTouchUpInside];
    [_v3 addSubview:btn];

    btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [btn setFrame:CGRectMake(10, 10, 100, 30)];
    [btn setTitle:@"Close" forState:UIControlStateNormal];
    btn.tag = 4;
    [btn addTarget:self action:@selector(zoomReverse:) forControlEvents:UIControlEventTouchUpInside];
    [_v4 addSubview:btn];
}

- (void)zoomReverse:(UIButton *)sender {
    UITapGestureRecognizer *tap = nil;

    switch (sender.tag) {
        case 1:
            [self.view bringSubviewToFront:_v1];

             tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(zoomAction:)];
            [tap setNumberOfTapsRequired:1];
            [_v1 addGestureRecognizer:tap];
            [tap release];

            [UIView beginAnimations:nil context:NULL];
            [UIView setAnimationDuration:1];
            [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];

            _v1.transform = CGAffineTransformMakeScale(1/(320./140.), 1/(460./210.));
            _v1.frame = CGRectMake(10., 10., _v1.frame.size.width, _v1.frame.size.height);

            [UIView commitAnimations];

            break;

        case 2:
            [self.view bringSubviewToFront:_v2];

            tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(zoomAction:)];
            [tap setNumberOfTapsRequired:1];
            [_v2 addGestureRecognizer:tap];
            [tap release];

            [UIView beginAnimations:nil context:NULL];
            [UIView setAnimationDuration:1];
            [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];

            _v2.transform = CGAffineTransformMakeScale(1/(320./140.), 1/(460./210.));
            _v2.frame = CGRectMake(170., 10., _v2.frame.size.width, _v2.frame.size.height);

            [UIView commitAnimations];

            break;

        case 3:
            [self.view bringSubviewToFront:_v3];

            tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(zoomAction:)];
            [tap setNumberOfTapsRequired:1];
            [_v3 addGestureRecognizer:tap];
            [tap release];

            [UIView beginAnimations:nil context:NULL];
            [UIView setAnimationDuration:1];
            [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];

            _v3.transform = CGAffineTransformMakeScale(1/(320./140.), 1/(460./210.));
            _v3.frame = CGRectMake(10., 240., _v3.frame.size.width, _v3.frame.size.height);

            [UIView commitAnimations];

            break;

        case 4:
            [self.view bringSubviewToFront:_v4];

            tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(zoomAction:)];
            [tap setNumberOfTapsRequired:1];
            [_v4 addGestureRecognizer:tap];
            [tap release];

            [UIView beginAnimations:nil context:NULL];
            [UIView setAnimationDuration:1];
            [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];

            _v4.transform = CGAffineTransformMakeScale(1/(320./140.), 1/(460./210.));
            _v4.frame = CGRectMake(170., 240., _v4.frame.size.width, _v4.frame.size.height);

            [UIView commitAnimations];

            break;

        default:
            break;
    }
}

- (void)zoomAction:(UITapGestureRecognizer *)sender {
    switch (sender.view.tag) {
        case 1:
            [self.view bringSubviewToFront:_v1];
            [_v1 removeGestureRecognizer:[_v1.gestureRecognizers objectAtIndex:0]];

            [UIView beginAnimations:nil context:NULL];
            [UIView setAnimationDuration:1];
            [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];

            _v1.transform = CGAffineTransformIdentity;
            _v1.frame = CGRectMake(0., 0., _v1.frame.size.width, _v1.frame.size.height);

            [UIView commitAnimations];

            break;

        case 2:
            [self.view bringSubviewToFront:_v2];
            [_v2 removeGestureRecognizer:[_v2.gestureRecognizers objectAtIndex:0]];

            [UIView beginAnimations:nil context:NULL];
            [UIView setAnimationDuration:1];
            [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];

            _v2.transform = CGAffineTransformIdentity;
            _v2.frame = CGRectMake(0., 0., _v2.frame.size.width, _v2.frame.size.height);

            [UIView commitAnimations];
            break;

        case 3:
            [self.view bringSubviewToFront:_v3];
            [_v3 removeGestureRecognizer:[_v3.gestureRecognizers objectAtIndex:0]];

            [UIView beginAnimations:nil context:NULL];
            [UIView setAnimationDuration:1];
            [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];

            _v3.transform = CGAffineTransformIdentity;
            _v3.frame = CGRectMake(0., 0., _v3.frame.size.width, _v3.frame.size.height);

            [UIView commitAnimations];
            break;

        case 4:
            [self.view bringSubviewToFront:_v4];
            [_v4 removeGestureRecognizer:[_v4.gestureRecognizers objectAtIndex:0]];

            [UIView beginAnimations:nil context:NULL];
            [UIView setAnimationDuration:1];
            [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];

            _v4.transform = CGAffineTransformIdentity;
            _v4.frame = CGRectMake(0., 0., _v4.frame.size.width, _v4.frame.size.height);

            [UIView commitAnimations];
            break;

        default:
            break;
    }
}

- (void)viewDidUnload {
    [super viewDidUnload];

    [self setV1:nil];
    [self setV2:nil];
    [self setV3:nil];
    [self setV4:nil];
}

@end 
```

I hope it can help.

# php - HTML5/PHP/jQuery：定义 HTML 块（模板工具包样式）

> ID：10030605
> 
> 赞同：0
> 
> 时间：2012-04-05T14:33:36.890
> 
> 标签：php, jquery, html, template-toolkit

我们在我工作的地方使用 Template Toolkit，我正在寻找类似的功能，但减去 perl，只使用 HTML5、PHP 和 jQuery。

我正在创建的应用程序是一个离线 HTML5 应用程序，所以基本上我想做：

```
if (localStorage.getItem(username) != '') {$.("#myDiv").html(myBlock);}else {$.("#myDiv").html(myOtherBlock)}; 
```

到目前为止，我想到的方法要么涉及在 jQuery 中创建长 html 字符串变量，要么将块放在 html 中，然后使用 jQuery 创建该 dom 元素的变量，然后将其从文档中删除，两者都不是这对我来说似乎非常理想。

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T07:31:22.290

如果您正在寻找 Template Toolkit 的 JavaScript 实现，[Jemplate可能是一种可能。](http://search.cpan.org/dist/Jemplate/)不过，我怀疑它的使用比流行更具有实验性。

[Handlebars](http://handlebarsjs.com/)似乎拥有更活跃的社区和采用率。

# php - PHP 会话存在 --- 请求页面加载但短暂 --- 并返回索引

> ID：10030607
> 
> 赞同：0
> 
> 时间：2012-04-05T14:33:40.687
> 
> 标签：php, session

好的，所以我不确定如何解释这个问题，但这里是：

如果输入与我的数据库中的数据相对应，我有一个登录名。如果是这样，我创建一个 $_SESSION["login"]。用户现在已登录。

此会话的创建没有问题。所以这是我用来检查会话是否存在的代码：

```
session_start();

if(!isset($_SESSION["login"])){
    $_SESSION["denied"]= "You need to be logged in to access this page";
    header("location:index.php");
} 
```

现在，当我转到我的页面“购物车”（位于我的 index.php 页面上的链接）时，我将上面的代码放在页面的开头，因为您需要登录才能查看此页面。但是我可以看到浏览器加载该页面，但没有任何反应。就好像我在我的“购物车”页面上的一瞬间，但它......

任何人都可以帮我解决这个问题。PHP对我来说主要是一个谜。

谢谢！

好的，这是代码的更新。这部分是我放入我的'cart.php

```
<?php 

session_start();
include("inc/database.php");

if(!isset($_SESSION["login"])){
    $_SESSION["denied"]= "You need to be logged in to access this page";
    header("location: index.php");
}
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="nl" lang="nl">
    <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="nl" lang="nl">
    <head>
    <title>Cart</title>

    <link rel="stylesheet" href="style.css" type="text/css" />
    <script src="http://code.jquery.com/jquery-1.7.2.js"></script>

</head>
<body>

  testing if the page shows correctly
</body>
</html> 
```

这是我的登录检查代码

```
<?php

session_start();
include("inc/database.php");
include("inc/clean.php");

if(isset($_POST['login'])){

    $username2=clean($_POST['username2']);
    $password2=clean($_POST['password2']);

    $query=("SELECT *  
            FROM signup
            WHERE username='$username2' 
            AND password='$password2';");

    $result=mysql_query($query);

    $count=mysql_num_rows($result);

    $query2=("SELECT id
              FROM signup
              WHERE username='$username2';");

    $result2=mysql_query($query2);

    while(list($id)=mysql_fetch_row($result2)){
            echo($id);
    }

    if($count == 1){
        $_SESSION["username"] = $username2;

        header('location:index.php');
    }else{
    $_SESSION["error"] = "error";
    header('location:index.php');
}
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:39:09.273

我认为问题出在标题指令上，这是正确的：

```
 header("location: index.php"); 
```

可能您的代码到达此指令，但重定向失败。

当然还要检查 php 日志，看看是否报告了错误...

# jpa - WHERE 参数等于任何列（实体属性）值

> ID：10030610
> 
> 赞同：0
> 
> 时间：2012-04-05T14:33:42.730
> 
> 标签：jpa, jpa-2.0, jpql

我需要编写一个通用的 NamedQuery；例如，找到任何属性与给定参数匹配的所有对象。

从 MyObject mo 中选择 mo 其中 mo.ANYAttribute = someParameter

我无法弄清楚“where mo.ANYAttribute”的表达方式。诸如“ + 或 * 或 ANY 或 .) 之类的通配符......这将使我免于编写查询，我必须手动编写以检查每个属性，例如：

其中 mo.attribute1= :someParameteror 或 mo.attribute2 = :someParameter

我正在使用 JPA 2.0。

有可能这样还是我必须改变我的方法？

非常感谢， 导航

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:36:58.033

您需要列出实体的所有属性，JPA 中没有 ANYAttribute 之类的东西：

```
 where mo.attr1=:someParamter or mo.attr2=:someParameter etc. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:43:27.673

[以下是带有参数的@NamedQuery](http://www.objectdb.com/api/java/jpa/NamedQuery)用法示例：

使用以下命令注释您的实体：

```
@NamedQuery(name = "findEntityById",
query = "SELECT entity FROM Entity entity WHERE entity.id = :inputId") 
```

实体管理器用法：

```
Query namedQuery = entityManager.createNamedQuery("findEntityById");
namedQuery.setParameter("inputId", 1); 
```

[一个非常好的关于 NamedQueries 的教程。](http://www.objectdb.com/java/jpa/query/named)

# .net - 通过 OpenXML 将图像插入 .xlsx 文件时缺少架构

> ID：10030612
> 
> 赞同：1
> 
> 时间：2012-04-05T14:33:50.607
> 
> 标签：.net, excel, openxml, openxml-sdk, drawingml

我会尽量保持简短，因为有很多背景故事！

我可以使用[此示例](http://polymathprogrammer.com/2009/11/30/how-to-insert-an-image-in-excel-open-xml/)中的代码使用 AbsoluteAnchor 将图像插入到电子表格中 0,0 EMU 的绝对位置。

当我尝试使用 TwoCellAnchor 执行相同操作时，绘图出现损坏，因此 Excel 提供通过完全删除图像来清理它。

当我将我的“怪物”与从 Excel 本身创建的有效 TwoCellAnchor 进行比较时，唯一的区别是第二行声明。

我的显示为：

```
<xdr:wsDr xmlns:xdr="http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing"> 
```

而 Excel 创建的显示为：

```
<xdr:wsDr xmlns:xdr="http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing" xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main"> 
```

请注意附加架构“xmlns:a”。据我所知，在编程时没有手动设置任何模式，我不知道如何解决这个问题。如果我手动更改 XML 以添加此模式，那么它可以正常工作，但显然这违背了编写自动化过程的目的。

有人能指出我解决这个问题的方向吗？网上关于这方面的有用文档的数量是非常有限的！谢谢。

# c# - Linq to SQL 中的 DAO 工厂

> ID：10030614
> 
> 赞同：4
> 
> 时间：2012-04-05T14:33:58.130
> 
> 标签：c#, linq-to-sql, generics, dao, factory-pattern

我正在努力创造以下情况：

首先，有几个 Linq to SQL Table 对象做几乎相同的事情。我们称它们为 products_something、products_somethingElse 等。

其次，有一个接口可以执行 Products DAO 的所有常用方法。首先，我尝试为所有产品只创建一个 DAO，因为我可以处理它在另一层（DAL）上的差异。但由于 Linq to SQL 需要强类型引用，我最终为每种类型的产品使用了一个 DAO。我真的不知道是否可以做我之前提到的事情。

最后，我有一个 ProductsDaoFactory，它根据客户端（用户视图）选择​​实例化正确的 ProductDao。因为我不知道在运行时会选择哪种类型的产品，所以我创建了一个通用工厂来处理它。

这是代码：

```
public enum ProductEnum
    {
        SimpleProduct, ComplexProduct, RevisedProduct, BrokenProduct
    }

    public interface IProducts<T>
    {
        T GetProductById(int id);
        IQueryable<T> GetAllProducts(string product_name, DateTime product_age);
        //Several other common methods
    }

public static class ProductFactory
    {
      //This won't compile because i have to set what's the type of the DAO i want
        public static IProducts<T> GetProductDAO(ProductEnum product)
        {
            switch (product)
            {
                case ProductEnum.SimpleProduct:
                    return new SimpleProductDAO();
                case ProductEnum.ComplexProduct:
                    return new ComplexProductDAO();
                case ProductEnum.RevisedProduct:
                    return new RevisedProductDAO();
                case ProductEnum.BrokenProduct:
                    return new BrokenProductDAO();
                default:
                    break;
            }

            return null;
        }
    }

    public class SimpleProductDAO : IProducts<SimpleProductDAO>
    {

        public SimpleProductDAO GetProductById(int id)
        {
            //Implementation
        }

        public IQueryable<SimpleProductDAO> GetAllProducts(string product_name, DateTime product_age)
        {
            //Implementation
        }
    } 
```

问题是：我无法定义工厂方法的返回类型，因为它是通用的。我必须将它的类型传递给工厂，这只会打破工厂的想法。**那么，我如何创建一个实例化接口泛型类型的工厂方法呢？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:40:26.817

您的问题是您的泛型并不是真正的泛型。所以你的方法根本不应该是通用的，因为我不能说：

```
GetProductDAO<int>(someEnum); 
```

我相信从工厂中删除泛型不仅可以解决问题，还可以为 API 的用户提供更好的清晰度和连贯性。**话虽如此，泛型确实允许更好的智能感知。**

**我最喜欢**的解决方案是删除枚举并只传递泛型类型，然后对方法添加限制。

```
public static IProducts<T> GetProductDAO<T>() where T: ISomeMarkerInterface, new() 
```

所以`SimpleProductDAO`实现`ISomeMarkerInterface`它只是一个空接口：

```
public interface ISomeMarkerInterface
{

} 
```

工厂变小了：

```
public static class ProductFactory
{
    public static IProducts<T> GetProductDAO<T>() where T : ISomeMarkerInterface, IProducts<T>, new()
    {
        return new T();
    }
} 
```

# 或者

将工厂定义为：

```
public static IProducts<T> GetProductDAO<T>(ProductEnum product)
{
    ... 
```

这不是我最喜欢的解决方案，因为它可以不受限制地被滥用

# iphone - iPhone：在 UIButton 上绘图

> ID：10030617
> 
> 赞同：0
> 
> 时间：2012-04-05T14:34:05.640
> 
> 标签：iphone, uibutton, drawing

本教程展示了如何使用 Quartz 2D 为视图绘制图形上下文： [http ://www.techotopia.com/index.php/An_iPhone_Graphics_Drawing_Tutorial_using_Quartz_2D](http://www.techotopia.com/index.php/An_iPhone_Graphics_Drawing_Tutorial_using_Quartz_2D)

但我想在 UIButton 上绘制，而不是在视图上绘制。我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T15:54:25.043

一个按钮是一个 UIView。它继承自 UIControl，它继承自 UIView。

所以按钮有一个drawRect方法。

因此，您可以执行您在按钮上链接的文章中描述的所有操作。

然而，按钮被设置为为您做很多事情，并且覆盖 drawRect 方法可能会使这些事情无法正常工作。

按钮通常绘制一个标题和一个圆角矩形框。您可以通过将按钮的类型设置为自定义来关闭它。

如果您安装自定义按钮，则会绘制图像。

按钮通常也会在其图像上绘制一个突出显示，或者有第二个图像用于突出显示状态。如果你想实现drawRect，你需要自己处理绘制高亮状态。

通常，您希望避免使用 drawRect 并使用其他一些技术将您想要的内容放入您的视图中。

你到底想做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:38:16.550

在 UIView 上绘图。将视图作为子视图添加到您的 UIButton。

# php - PHP：preg替换日期时间

> ID：10030619
> 
> 赞同：2
> 
> 时间：2012-04-05T14:34:14.013
> 
> 标签：php, preg-replace

如何用 preg_replace 替换格式为“Fri Mar 23 15:21:08 2012”的日期/时间？这种格式的日期在我的文本中出现了几次，我需要用当前时间/日期替换它。

谢谢，

克里斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T14:43:43.227

好吧，您需要的是一个匹配 3 个字母 ( `Fri`) 后跟一个空格和另外三个字母 ( `Mar`) 的表达式。

首先我们需要匹配一些字母：

```
/[a-z]/ 
```

我们可以像这样精确匹配 3 个字母：

```
/[a-z]{3}/ 
```

...我们需要它不区分大小写：

```
/[a-z]{3}/i 
```

...所以第一部分只是：

```
/[a-z]{3} [a-z]{3}/i 
```

接下来，我们需要匹配 1 个或 2 个数字。数字可以用转义序列表示`\d`，所以我们使用：

```
/\d{1,2}/ 
```

接下来我们匹配时间字符串，使用相同的转义序列：

```
/\d{2}:\d{2}:\d{2}/ 
```

...后面是最后一个 4 位数的年份：

```
/\d{4}/ 
```

把它们放在一起，我们得到：

```
/[a-z]{3} [a-z]{3} \d{1,2} \d{2}:\d{2}:\d{2} \d{4}/i
// Fri       Mar      23     15 :  21 :  08    2012 
```

现在，我们需要将其替换为当前日期和时间。我们通常会去的地方是`date()`函数，但是我们如何动态地将它放入替换中呢？好吧，我们可以将它作为字符串文字传递，或者我们可以使用回调函数从`preg_replace_callback()`. *但是*,`preg_replace()`给了我们`e`修饰符，它导致为 PHP 代码评估替换字符串。与任何 PHP 一样，我们必须小心谨慎地使用它`eval()`，但这是一个合法的用例。

所以我们最终的 PHP 代码如下所示：

```
preg_replace(
  '/[a-z]{3} [a-z]{3} \d{1,2} \d{2}:\d{2}:\d{2} \d{4}/ie',
  "date('D M j H:i:s Y')",
  $str
); 
```

[看到它工作](http://codepad.viper-7.com/0nhgl4)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T14:53:16.403

我认为列出有限的选项集对于这些任务来说更好，它也可以让你避免误报。这些是匹配日期格式每个部分的模式：

*   天：`(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)`
*   月份：`(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)`
*   天：`\d{1,2}`
*   时间：`\d{1,2}:\d{2}:\d{2}`
*   年：`\d{4}`

把所有东西放在一起：

```
(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) \d{1,2} \d{1,2}:\d{2}:\d{2} \d{4} 
```

代码可能如下所示：

```
$current_date = date('D M j H:i:s Y');
$text = preg_replace(
  '/(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) \d{1,2} \d{1,2}:\d{2}:\d{2} \d{4}/i',
  $current_date,
  $text
); 
```

请参阅[一个工作示例](http://ideone.com/2Fzou)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T14:44:42.930

```
preg_replace('/Fri Mar 23 15:21:08 2012/',date('D M d H:i:s Y'),$string); 
```

通常做你想做的事。

# c++ - 用一些字符串就地替换字符串中的字符

> ID：10030626
> 
> 赞同：3
> 
> 时间：2012-04-05T14:34:34.260
> 
> 标签：c++, string, algorithm

我想用字符串替换字符串中的字符。我可以就地做吗？由于新字符串的长度大于原始字符串。问题是我可以使用额外的缓冲区吗？例如

```
void replaceChar(std::string &input, std::string replacementString, char charToReplace)
{
//some code here. No additional buffer
}

void main(){

  std::string input = "I am posting a comment on LinkedIn";
  std::string replacementString = "pppp";
  char charToReplace = 'o';
  replaceChar(input, replacementString, charToReplace);
} 
```

我只想要策略（算法）。如果算法的设计能够牢记某种语言，一旦它像 c++ 一样被初始化就不会动态增加或减少字符串长度，那将是很好的

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T15:05:50.547

`std::string`有一个`replace`成员，但它根据数字位置工作，而不是字符串的先前内容。因此，您通常必须将它与`find`循环中的成员结合起来，如下所示：

```
std::string old("o");

int pos;

while ((pos = x.find(old)) != std::string::npos)
    x.replace(pos, old.length(), "pppp"); 
```

就个人而言，我很少关心字符串调整大小的频率，但如果这是一个主要问题，您可以使用`std::count`查找`old`字符串的出现次数，乘以新旧字符串之间的大小差异，然后用来`std::string::reserve()`预留足够的空间。但是请注意，这`reserve`是在 C++11 中添加的——旧的实现不会有它。

编辑：虽然这与您使用的字符串无关，正如@ipc 指出的那样，但如果替换字符串包含被替换值的实例，这将无法正常工作。如果您需要处理这个问题，您需要在开始每次搜索的字符串中提供偏移量：

```
int pos = 0;

while ((pos = x.find(old, pos)) != std::string::npos) {
    x.replace(pos, old.length(), rep);
    pos += rep.length();
} 
```

或者，`for`在这种情况下，您可能更喜欢循环：

```
 std::string old("o");
    std::string rep("pop");

for (int pos=0; 
    (pos = x.find(old, pos)) != std::string::npos; 
    pos+=rep.length())
{
    x.replace(pos, old.length(), rep);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T14:47:32.357

我认为您误解了 C++ std::string。它实际上可以动态更改字符串长度。在内部进行堆分配，并在必要时增加缓冲区。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-12T19:43:17.470

这是一个最小化分配和分配数量的代码。它基于以下对类似问题的回答： [https ://stackoverflow.com/a/32322122/3903076](https://stackoverflow.com/a/32322122/3903076)

替换字符串长度为 0 或 1 的情况分别处理。否则，字符串必须增长。

如果没有足够的容量，那么无论如何都需要一个外部缓冲区，所以我们只需进行复制替换和交换。

有趣的情况是当字符串已经有足够的容量时，我们实际上可以进行非平凡的就地替换。我们通过反向复制替换来做到这一点，当我们不需要替换任何其他内容时停止。

这可以在函数的最后一行看到。

```
void replaceChar(std::string& input, const std::string& replacementString, char charToReplace)
{
  if (replacementString.empty()) {
    input.erase(std::remove(input.begin(), input.end(), charToReplace), input.end());
    return;
  }
  if (replacementString.size() == 1) {
    std::replace(input.begin(), input.end(), charToReplace, replacementString.front());
    return;
  }

  const auto first_instance = std::find(input.begin(), input.end(), charToReplace);
  auto count = std::count(first_instance, input.end(), charToReplace);
  const auto extra_size = count * (replacementString.size() - 1);
  const auto new_size = input.size() + extra_size;

  if (input.capacity() < new_size) {
    std::string aux;
    aux.reserve(new_size);
    replace_with_range_copy(input.cbegin(), input.cend(), std::back_inserter(aux), charToReplace, replacementString.cbegin(), replacementString.cend());
    input.swap(aux);
    return;
  }

  input.resize(new_size);

  const auto rlast = std::make_reverse_iterator(first_instance);
  const auto rfirst = input.rbegin();
  const auto old_rfirst = rfirst + extra_size;

  replace_with_range_copy(old_rfirst, rlast, rfirst, charToReplace, replacementString.crbegin(), replacementString.crend());
} 
```

下面是`replace_with_range_copy`算法的实现：

```
template <typename InputIt1, typename OutputIt, typename T, typename InputIt2>
OutputIt replace_with_range_copy(InputIt1 first, InputIt1 last, OutputIt d_first, const T& old_value, InputIt2 new_first, InputIt2 new_last)
{
  InputIt1 next;
  while (true) {
    if (first == last) return d_first;
    next = std::find(first, last, old_value);
    d_first = std::copy(first, next, d_first);
    if (next == last) return d_first;
    d_first = std::copy(new_first, new_last, d_first);
    first = std::next(next);
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-17T01:52:48.900

我尝试了这种老式的东西，我认为它有效。这里是。我不确定这是否适用于 ascii 以外的编码。

```
#include <string>
#include <cstring>

std::string
replace_char_with_string
    (const char *in_p,
     char  from_ch,
     const char *to_p)
{
    char output_c_str[strlen(in_p)*2+1], *out_p = output_c_str;
    int  to_len = strlen(to_p);

    while (*in_p)
    {
        if (*in_p == from_ch)
        {
            strcpy(out_p, to_p);
            out_p += to_len;
        }
        else
        {
            *out_p++ = *in_p;
        }

        ++in_p;
    }
    *out_p = '\0';

    std::string output(output_c_str);
    return output;
}

// example usage
std::string java_namespace_name = "com.foo.boo";
std::string cpp_namespace_name = replace_char_with_string(java_namespace_name.c_str() 
```

# cocoa - 产生黑白效果的最佳 Core Image 滤镜是什么？

> ID：10030631
> 
> 赞同：29
> 
> 时间：2012-04-05T14:34:59.517
> 
> 标签：cocoa, ios5, core-image

我正在使用 Core Image 并希望在所选图像上产生黑白效果。

理想情况下，我希望能够访问 Photoshop 上可用的相同类型的选项，即红色、青色、绿色、蓝色和洋红色。目标是创建不同类型的黑白效果。

有谁知道什么过滤器最适合操纵这些选项？如果没有，是否有人知道使用其他滤镜创建黑白效果的好方法？

谢谢

奥利弗

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-04-05T18:13:48.817

```
- (UIImage *)imageBlackAndWhite
{
    CIImage *beginImage = [CIImage imageWithCGImage:self.CGImage];

    CIImage *blackAndWhite = [CIFilter filterWithName:@"CIColorControls" keysAndValues:kCIInputImageKey, beginImage, @"inputBrightness", [NSNumber numberWithFloat:0.0], @"inputContrast", [NSNumber numberWithFloat:1.1], @"inputSaturation", [NSNumber numberWithFloat:0.0], nil].outputImage;
    CIImage *output = [CIFilter filterWithName:@"CIExposureAdjust" keysAndValues:kCIInputImageKey, blackAndWhite, @"inputEV", [NSNumber numberWithFloat:0.7], nil].outputImage; 

    CIContext *context = [CIContext contextWithOptions:nil];
    CGImageRef cgiimage = [context createCGImage:output fromRect:output.extent];
    //UIImage *newImage = [UIImage imageWithCGImage:cgiimage];
    UIImage *newImage = [UIImage imageWithCGImage:cgiimage scale:image.scale orientation:image.imageOrientation];
    CGImageRelease(cgiimage);

    return newImage;
} 
```

**Upd.：**因为`iOS6`有`CIColorMonochrome`滤镜，但我玩了它，发现它不如我的好。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-03T17:30:00.067

这是 CIColorMonochrome 的示例

```
- (UIImage *)imageBlackAndWhite
{
    CIImage *beginImage = [CIImage imageWithCGImage:self.CGImage];

    CIImage *output = [CIFilter filterWithName:@"CIColorMonochrome" keysAndValues:kCIInputImageKey, beginImage, @"inputIntensity", [NSNumber numberWithFloat:1.0], @"inputColor", [[CIColor alloc] initWithColor:[UIColor whiteColor]], nil].outputImage;

    CIContext *context = [CIContext contextWithOptions:nil];
    CGImageRef cgiimage = [context createCGImage:output fromRect:output.extent];
    UIImage *newImage = [UIImage imageWithCGImage:cgiimage scale:self.scale orientation:self.imageOrientation];

    CGImageRelease(cgiimage);

    return newImage;
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-12-15T10:24:01.463

这是转换为 Swift（iOS 7 及更高版本）的最受好评的解决方案：

```
func blackAndWhiteImage(image: UIImage) -> UIImage {
    let context = CIContext(options: nil)
    let ciImage = CoreImage.CIImage(image: image)!

    // Set image color to b/w
    let bwFilter = CIFilter(name: "CIColorControls")!
    bwFilter.setValuesForKeysWithDictionary([kCIInputImageKey:ciImage, kCIInputBrightnessKey:NSNumber(float: 0.0), kCIInputContrastKey:NSNumber(float: 1.1), kCIInputSaturationKey:NSNumber(float: 0.0)])
    let bwFilterOutput = (bwFilter.outputImage)!

    // Adjust exposure
    let exposureFilter = CIFilter(name: "CIExposureAdjust")!
    exposureFilter.setValuesForKeysWithDictionary([kCIInputImageKey:bwFilterOutput, kCIInputEVKey:NSNumber(float: 0.7)])
    let exposureFilterOutput = (exposureFilter.outputImage)!

    // Create UIImage from context
    let bwCGIImage = context.createCGImage(exposureFilterOutput, fromRect: ciImage.extent)
    let resultImage = UIImage(CGImage: bwCGIImage, scale: 1.0, orientation: image.imageOrientation)

    return resultImage
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-04-05T15:11:26.833

为了创建纯单色效果，我`CIColorMatrix`将 R、G 和 B 矢量参数全部设置为 (0.2125, 0.7154, 0.0721, 0)，并将 alpha 和偏置矢量保留为默认值。

这些值是我在某些时候在互联网上查找的 RGB 到灰度转换系数。通过改变这些系数，您可以改变输入通道的贡献。通过缩放向量的每个副本，并可选择设置偏置向量，您可以对输出进行着色。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-06-25T16:00:49.477

关于建议使用的答案`CIColorMonochrome`：iOS7（和 OS X 10.9）现在提供了一些专用的灰度过滤器：

*   CIPhotoEffectTonal

    > 在不显着改变对比度的情况下模仿黑白摄影胶片。

*   CIPhotoEffectNoir：

    > 用夸张的对比度模仿黑白摄影胶片

来源：[https ://developer.apple.com/library/mac/documentation/GraphicsImaging/Reference/CoreImageFilterReference/index.html](https://developer.apple.com/library/mac/documentation/GraphicsImaging/Reference/CoreImageFilterReference/index.html)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-06-10T09:11:25.180

这是@Shmidt 最喜欢的答案，它被写成一个 UIImage 扩展，并在 Swift 中进行了性能更新：

```
import CoreImage

extension UIImage
{
    func imageBlackAndWhite() -> UIImage?
    {
        if let beginImage = CoreImage.CIImage(image: self)
        {
            let paramsColor: [String : AnyObject] = [kCIInputBrightnessKey: NSNumber(double: 0.0),
                                                     kCIInputContrastKey:   NSNumber(double: 1.1),
                                                     kCIInputSaturationKey: NSNumber(double: 0.0)]
            let blackAndWhite = beginImage.imageByApplyingFilter("CIColorControls", withInputParameters: paramsColor)

            let paramsExposure: [String : AnyObject] = [kCIInputEVKey: NSNumber(double: 0.7)]
            let output = blackAndWhite.imageByApplyingFilter("CIExposureAdjust", withInputParameters: paramsExposure)

            let processedCGImage = CIContext().createCGImage(output, fromRect: output.extent)
            return UIImage(CGImage: processedCGImage, scale: self.scale, orientation: self.imageOrientation)
        }
        return nil
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-12-13T05:19:48.303

macOS (NSImage) Swift 3 版本的@FBente 转换@Shmidt 的答案：

```
extension NSImage
{
    func imageBlackAndWhite() -> NSImage?
    {
        if let cgImage = self.cgImage(forProposedRect: nil, context: nil, hints: nil)
        {
            let beginImage = CIImage.init(cgImage: cgImage)
            let paramsColor: [String : AnyObject] = [kCIInputBrightnessKey: NSNumber(value: 0.0),
                                                     kCIInputContrastKey:   NSNumber(value: 1.1),
                                                     kCIInputSaturationKey: NSNumber(value: 0.0)]
            let blackAndWhite = beginImage.applyingFilter("CIColorControls", withInputParameters: paramsColor)

            let paramsExposure: [String : AnyObject] = [kCIInputEVKey: NSNumber(value: 0.7)]
            let output = blackAndWhite.applyingFilter("CIExposureAdjust", withInputParameters: paramsExposure)

            if let processedCGImage = CIContext().createCGImage(output, from: output.extent) {
                return NSImage(cgImage: processedCGImage, size: self.size)
            }
        }
        return nil
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-07T11:18:15.573

我已经尝试过 Shmidt 解决方案，但在我看来它在 iPad Pro 上暴露得太多了。我只使用他解决方案的第一部分，没有曝光过滤器：

```
- (UIImage *)imageBlackAndWhite
{
    CIImage *beginImage = [CIImage imageWithCGImage:self.CGImage];

    CIImage *blackAndWhite = [CIFilter filterWithName:@"CIColorControls" keysAndValues:kCIInputImageKey, beginImage, @"inputBrightness", [NSNumber numberWithFloat:0.0], @"inputContrast", [NSNumber numberWithFloat:1.1], @"inputSaturation", [NSNumber numberWithFloat:0.0], nil].outputImage;
    CIImage *output = [blackAndWhite valueForKey:@"outputImate"]; 

    CIContext *context = [CIContext contextWithOptions:nil];
    CGImageRef cgiimage = [context createCGImage:output fromRect:output.extent];
    //UIImage *newImage = [UIImage imageWithCGImage:cgiimage];
    UIImage *newImage = [UIImage imageWithCGImage:cgiimage scale:image.scale orientation:image.imageOrientation];
    CGImageRelease(cgiimage);

    return newImage;
} 
```

# spring - 独立应用程序上的 spring 3.1 注释自动装配

> ID：10030633
> 
> 赞同：0
> 
> 时间：2012-04-05T14:35:06.203
> 
> 标签：spring, console, annotations, autowired

我用 eclipse 编写了这个应用程序，它可以工作。但是当我将它部署为独立/控制台应用程序时，它找不到我注入的 StartApp bean。这是代码：

主应用：

```
@Component
public class StartApp {
    @Autowired
    private Processor proc;

    public StartApp() {
        System.out.println("Starting App!");
    }
    private void say() {
        proc.say();
    }
    public static void main(String[] args) {
        ApplicationContext ctx = new ClassPathXmlApplicationContext("applicationContext.xml");
        StartApp app = ctx.getBean(StartApp.class);
        app.say();
    }
} 
```

服务：

```
@Service
public class Processor {
    public Processor() {
        System.out.println("Processor initialized!");
    }
    public void say() {
        System.out.println("hello!");
    }
} 
```

和 applicationContext.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:context="http://www.springframework.org/schema/context" 
    xmlns:p="http://www.springframework.org/schema/p"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd 
    http://www.springframework.org/schema/context 
    http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <context:component-scan base-package="test.spring.desktop"/>
</beans> 
```

我确实放了所有弹簧库和记录器，包括 slf4j 库。对于控制台命令，我把这些：

```
java -cp lib/*:lib/spring-3.1/*:test-spring-desktop.jar test.spring.desktop.StartApp 
```

然后我收到这些错误消息：

```
Exception in thread "main" org.springframework.beans.factory.NoSuchBeanDefinitionException: No unique bean of type [test.spring.desktop.StartApp] is defined: expected single bean but found 0:
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:271)
        at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1101)
        at test.spring.desktop.StartApp.main(StartApp.java:24) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-22T16:27:37.260

尝试在 applicationCntext.xml 中放入这个配置：

```
<context:annotation-config /> 
```

# magento - Magento - 结帐未重定向到成功页面

> ID：10030635
> 
> 赞同：2
> 
> 时间：2012-04-05T14:35:15.800
> 
> 标签：magento

我正在开发使用 Magento 部署的商店。它有一个我编写的模块，其中包含 checkout_type_onepage_save_order_after、checkout_type_multishipping_create_orders_saved_after 和 admin_created_order_after 的事件观察器。

当客户下订单时，启用我的模块后，Magento 不会重定向到成功页面。当我禁用我的模块时，它重定向就好了。无论有没有我的模块，订单仍然可以通过，但如果没有某种感谢信息，它就不是很友好。

任何人有任何想法是什么问题？任何错误日志（Apache、PHP、Magento 或数据库）中都没有条目。

在 PHP 5 上使用 magento 1.6.2.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-23T16:53:57.687

如果其他人遇到相同或类似的问题，我刚刚解决了一个非常相似的问题，这要感谢 TonyTheJet 在这里的评论。我在 Magento CE 1.7.02 中使用 onepagecheckout

如果您的代码中有一个杂散的回显命令，它将向浏览器发送原始文本，这将导致 onepagecheckout.js 中的浏览器端出现问题。它没有正确地取消编码服务器发送的后续 JSON 字符串以表明订单已成功处理。因此，浏览器无法发送 GET 来触发 onepagecheckout 控制器 successAction()。

如果您使用的是协议分析器或 Firefox Firebug 之类的工具，那么关键的 JSON 字符串应该如下所示。order_creates=true 应该触发成功页面的浏览器请求：

{“成功”：真，“错误”：假​​，“订单创建”：真}

# wpf - 使用转换器对 DataGridTemplateColumn 进行排序

> ID：10030638
> 
> 赞同：2
> 
> 时间：2012-04-05T14:35:21.057
> 
> 标签：wpf, vb.net, sorting, datagrid, gridview-sorting

我最近正在开发一个使用 WPF 工具包（和扩展工具包）中的数据网格的 WPF 应用程序

我正在使用 datagridtemplatecolumn，因为我在某些用户的某些值上显示了工具提示。其他列是 datagridtextcolumns。

我可以通过在状态上添加 sortmemberpath 来对状态进行排序，但状态是一个数字 (1,2,3,4,5..)，我将这些数字转换为另一列的名称。如果我按这个 sortmemberpath 排序，我首先得到 1，然后是 2，然后是 3，等等，但我想对转换后的值按字母顺序排序。

```
<Toolkit:DataGridTemplateColumn x:Name="dgtcStatus" Header="Status" SortMemberPath="Status_W52" Width="*">
  <Toolkit:DataGridTemplateColumn.CellTemplate>
    <DataTemplate>
      <TextBlock x:Name="Status" Text="{Binding Path=Status_W52, Converter={StaticResource StatusConverter}}">
        <TextBlock.ToolTip>
          <ToolTip Visibility="{Binding Path=Status_W52, Converter={StaticResource VisibilityConverter}}">
            <TextBlock Text="{Binding Path=Discription_W52, Converter={StaticResource DiscriptionConverter}}"/>
          </ToolTip>
        </TextBlock.ToolTip>
      </TextBlock>
    </DataTemplate>
  </Toolkit:DataGridTemplateColumn.CellTemplate>
</Toolkit:DataGridTemplateColumn> 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:37:17.150

您可以将 Status_W52 从 int 提升为更复杂的类型吗？

```
public Status_W52
{
   int NumericValue {get;set;}
   string Name {get;set;}
} 
```

您的 Converter 将采用 Status_W52 的完整实例，通过“NumericValue”解析，返回您的 int 进行排序，但也可以更新传递的 ref 的“Name”属性，稍后您可以在该属性上进行排序..

# javascript - socket.io - 'connect' 事件不会在客户端触发

> ID：10030639
> 
> 赞同：39
> 
> 时间：2012-04-05T14:35:23.237
> 
> 标签：javascript, node.js, socket.io

我正在尝试开始使用 node.js 和 socket.io。
我有一个非常（**非常**）简单的客户端-服务器测试应用程序，但我无法让它工作。
该系统设置在带有 apache 服务器的 windows 机器上。
apache正在运行`port 81`并且socket.io被设置为监听`port 8001`

**服务器**- server.js

```
var io = require('socket.io').listen(8001);

io.sockets.on('connection', function (socket) {
    console.log('\ngot a new connection from: ' + socket.id + '\n');
}); 
```

**客户端**- index.html

```
<!DOCTYPE html>
<html>
<head>
    <title>node-tests</title>
    <script type="text/javascript" src="http://localhost:8001/socket.io/socket.io.js">    </script>
    <script type="text/javascript">
        var socket = io.connect('http://localhost', { port: 8001 });

        socket.on('connect', function () {
            alert('connect');
        });

        socket.on('error', function (data) {
            console.log(data || 'error');
        });

        socket.on('connect_failed', function (data) {
            console.log(data || 'connect_failed');
        });
    </script>
</head>
<body>

</body>
</html> 
```

使用标准（预期）输出启动我的服务器后`node server.js`，将输出写入服务器控制台：

```
info: socket.io started 
```

当我`index.html`在浏览器中打开时（在我的情况下是 chrome - 未在其他浏览器上测试），以下日志将写入服务器控制台：

```
info: socket.io started
debug: served static content /socket.io.js
debug: client authorized
info: handshake authorized 9952353481638352052
debug: setting request GET /socket.io/1/websocket/9952353481638352052
debug: set heartbeat interval for client 9952353481638352052
debug: client authorized for

got a new connection from: 9952353481638352052

debug: setting request GET /socket.io/1/xhr-polling/9952353481638352052?t=1333635235315
debug: setting poll timeout
debug: discarding transport
debug: cleared heartbeat interval for client 9952353481638352052
debug: setting request GET /socket.io/1/jsonp-polling/9952353481638352052?t=1333635238316&i=0
debug: setting poll timeout
debug: discarding transport
debug: clearing poll timeout
debug: clearing poll timeout
debug: jsonppolling writing io.j[0]("8::");
debug: set close timeout for client 9952353481638352052
debug: jsonppolling closed due to exceeded duration
debug: setting request GET /socket.io/1/jsonp-polling/9952353481638352052?t=1333635258339&i=0
...
...
... 
```

在浏览器控制台中，我得到：

```
connect_failed 
```

所以看起来客户端正在到达服务器并尝试连接，并且服务器正在授权握手但`connect`事件从未在客户端中触发，而是连接方法到达它`connect timeout`并`max reconnection attempts`放弃返回`connect_failed`。

对此的任何帮助\见解都会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2021-01-03T21:35:12.670

确保客户端和服务器都具有相同的 socket.io 主要版本。例如，`socket.io@2.3.0`on server 和`socket.io-client@3.x.x`at client 的组合会导致这种情况，并且不会调度 'connect' 事件。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-09-15T17:13:48.537

```
//Client side
<script src="http://yourdomain.com:8001/socket.io/socket.io.js"></script>
var socket = io.connect('http://yourdomain.com:8001');

//Server side
var io = require('socket.io').listen(8001);
io.sockets.on('connection',function(socket) {
`console.log('a user connected');`
}); 
```

客户端：客户端代码从为您提供服务器端 socketIO 的同一文件请求客户端版本的套接字 IO。var socket 现在将具有 socketIO 可用的所有方法，例如 socket.emit 或 socket.on

服务器端：与客户端相同，使socketIO方法可在var io下使用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-04-10T23:33:51.107

前端（客户端）的变化：

`var socket = io.connect(http://myapp.herokuapp.com);`

至

`var socket = io.connect();`

经过数小时处理未正确注册与服务器连接的各种客户端（Chrome、Firefox 浏览器和 Phonegap 应用程序）（即**服务器在其日志中成功注册 websocket 连接，但前端未注册连接事件**），我从评论中尝试了@Timothy 的解决方案，现在一切都**在 heroku 和 localhost 上再次运行。**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-05-02T14:01:13.560

使用 socketio 2.3.0 你必须使用 socket.on(' **connect** ')

```
<script src="/socket.io/socket.io.js"></script>
<script>
    var socket = io({
        transports: ['polling']
    });
    console.log("created",socket);
    socket.on('connect', function(data){ // <-- this works
        console.log("socket ON connect",data);
    });
    socket.on('connection', function(data){ // <-- this fails
        console.log("socket ON connection",data);
    });

</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-20T09:28:46.097

创建时使用`autoConnect: false`选项：`io(... { autoConnect: false })`，订阅您的事件并调用`io.connect()`。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-10-16T23:39:53.843

尝试使用这个：

**服务器.js**

```
var http = require("http").createServer(), io = require("socket.io").listen(http);

http.listen(8001);

io.sockets.on("connection", function(socket){
    console.log("Connected!");
    socket.emit("foo", "Now, we are connected");
}); 
```

**索引.html**

```
<script src="http://localhost:8001/socket.io/socket.io.js"></script>
<script>
     var i = io.connect("http://localhost:5001");
     i.on("foo", function(bar){
         console.log(bar);
     })
</script> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-04-20T20:12:45.193

尝试以下操作：

改变

```
var socket = io.connect('http://localhost', { port: 8001 }); 
```

至

```
var socket = io.connect('http://localhost:8001'); 
```

# javascript - Jquery Fancybox 高度/向下滚动

> ID：10030641
> 
> 赞同：3
> 
> 时间：2012-04-05T14:35:38.297
> 
> 标签：javascript, jquery, fancybox

我正在使用 fancybox 在我的网站上显示某些页面。我的问题是我不知道如何使它具有固定的高度并在必要时向下滚动以查看更多内容（如果内容向下流动的程度超过了花式框的特定高度参数）

这是我在页面中的参数：

```
<script>
$(document).ready(function() {
    $(".fancybox_link").fancybox({
    'width'             : 680,
    'height'            : 550,
    'autoScale'         : false,
    'autoDimensions'    : false,
    'scrolling'         : 'no',
    'transitionIn'      : 'none',
    'transitionOut'     : 'none',
    'type'              : 'iframe'
    });
});
</script> 
```

我应该怎么做才能使内容与高度的滚动条一起流动？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T15:13:04.023

**编辑：**是“滚动：'是'”参数不起作用吗？

否则，我认为，您可以编辑/覆盖 Fancybox CSS：

```
#fancybox-content {
    height: 680px;
    width: 550px;
    padding: 0;
    margin: 0;
    overflow: scroll;
} 
```

或者类似的东西。我已经为以前的项目这样做了，但是手头没有代码来为您提供确切的语法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T17:29:38.020

您实际上需要设置选项

```
'scrolling' : 'yes', 
```

这将在 fancybox 中创建滚动条，以便您可以浏览长内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-12T07:05:05.220

尝试：

“自动尺寸”：假

# jquery - 如何解析 tumblr JSON 提要

> ID：10030646
> 
> 赞同：1
> 
> 时间：2012-04-05T14:35:54.203
> 
> 标签：jquery, json, tumblr

我需要从此 JSON 提要中获取常规标题和常规正文。我尝试了各种方法，但收效甚微。有人有解决方案吗？

[http://clintonbeattie.tumblr.com/bio/json](http://clintonbeattie.tumblr.com/bio/json)

谢谢， C

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T14:38:48.930

那不是 JSON，这是对 JSONP 的一种奇怪的看法。

如果添加设置为的`<script />`标签，则全局变量将指向具有响应信息的对象；`src``http://clintonbeattie.tumblr.com/bio/json``tumblr_api_read`

```
var tumblr_api_read = {
    "tumblelog": {
        "title": "First Title",
        "description": "",
        "name": "clintonbeattie",
        "timezone": "US\/Eastern",
        "cname": false,
        "feeds": []
    },
    "posts": [{
        "id": null,
        "url": "",
        "url-with-slug": "",
        "type": "regular",
        "date-gmt": " GMT",
        "date": "Wed, 31 Dec 1969 19:00:00",
        "bookmarklet": null,
        "mobile": null,
        "feed-item": "",
        "from-feed-id": 0,
        "unix-timestamp": 1333622193,
        "format": "html",
        "reblog-key": "TmN3ujDJ",
        "slug": "",
        "regular-title": "",
        "regular-body": ""
    }]
}; 
```

因此做这样的事情；

```
<script src="http://clintonbeattie.tumblr.com/bio/json"></script>
<script>
    // Use tumblr_api_read.

    alert(tumblr_api_read.tumblelog.title); // Shows "First Title"

    for (var i=0;i<tumblr_api_read.posts.length;i++) {
        var thisPost = tumblr_api_read.posts[i];

        alert("This post was created at " + thisPost.date);
    }
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T14:51:20.587

从他们的[API 文档](http://www.tumblr.com/docs/en/api)：

> JSON 输出
> 
> 通过在调用读取 API 时使用 /api/read/json 而不是 /api/read，输出将作为 JSON 发送，并分配给名为 tumblr_api_read 的 Javascript 变量。

那***不是***JSON，甚至不是 JSONP。他们正在返回文字 JavaScript。因此，您必须遵循他们的文档并执行以下操作：

```
<script type="text/javascript" src="http://clintonbeattie.tumblr.com/api/read/json"></script> 
```

这将创建一个名为`tumblr_api_read`(ie `window.tumblr_api_read`) 的全局变量，它是一个对象字面量。

由于您使用的是 jQuery，因此您可以执行以下操作：

```
$.getScript("http://clintonbeattie.tumblr.com/api/read/json", function(script, textStatus, jqXHR) {
  console.log(window.tumblr_api_read.tumblelog.title);
}); 
```

令我惊讶的是，这些人可以在他们的文档中链接到[json.org](http://json.org/)，但却把它搞砸了。

# javascript - 函数 clone() 在 Internet Explorer 中不起作用（在 firefox 中起作用）

> ID：10030648
> 
> 赞同：1
> 
> 时间：2012-04-05T14:36:07.007
> 
> 标签：javascript, jquery, html, jquery-ui, clone

我想克隆类型的项目（可排序手风琴），你可以在这里看到：http: [//jqueryui.com/demos/accordion/sortable.html](http://jqueryui.com/demos/accordion/sortable.html)。

我使用函数 clone() 添加克隆的项目，如您在此处看到的：

```
$("#cloneElement").click(function(){    
  var newElem = $('#acc-0').clone(true).attr('id', 'acc-1').addClass("clonedDiv");
 newElem.insertBefore($("#acc-0"));
} 
```

我克隆的 div 如下所示：

```
<div id="acc-0">
  <h3>
    <a id="section" href="#">Section </a>
  </h3> 
  <div>
  <fieldset  style="clear: both">
    <input type="text" name="section[]" id="section" value="">  
    <textarea name="content[]" id="content" class="text ui-corner-all"></textarea> 
   </fieldset>                          
 </div>
</div> 
```

这是我用来添加新元素的 jquery 按钮

```
<input type="radio" id="cloneElement" name="cloneElement" /> 
```

当我单击按钮时，该元素将被克隆并添加，我可以在 Firefox 中看到它。这在 Internet Explorer 中不起作用。当我单击按钮时，什么也没发生 :( 为什么它在 Exploerer 中不起作用？

# java - 正则表达式 - 如果后面跟着另一个字符，则只选择一个字符

> ID：10030654
> 
> 赞同：1
> 
> 时间：2012-04-05T14:36:26.720
> 
> 标签：java, regex

如果后面没有'#'，我想替换字符'&'。例如，在这个字符串中`"& hello &# world!"`，我只想选择第一个“&”。

到目前为止，我想出了这个正则表达式：

```
&[^#] 
```

但是，这选择了 2 个字符，而我只想选择 & 字符。

RegExp 大师的任何帮助将不胜感激。

顺便提一句。这可能很重要：我想在 java replaceAll() 中使用它。

非常感谢，达摩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T14:42:41.293

使用负前瞻：

```
System.out.println("& hello &# world!&".replaceAll("&(?!#)", "&amp;")); 
```

印刷：

```
&amp; hello &# world!&amp; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T14:47:02.733

你需要的是[负前瞻](http://www.regular-expressions.info/lookaround.html)。考虑这个简单的代码：

```
String str = "& &$ &# &s &#";
str = str.replaceAll("&(?!#)", "&amp;");
// assigns: &amp; &amp;$ &# &amp;s &# 
```

`&`这基本上意味着如果**没有后跟** 则替换`#`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T14:40:36.253

```
String s = "&$ &# &s &";
String r = s.replaceAll("&([^#])|(&$)", "&amp;$1");
System.out.println("r = " + r); 
```

印刷：

```
r = &amp;$ &# &amp;s &amp; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T14:40:03.197

*   You could replaceAll &# by @# or any other improbable char sequence.
*   Replace all & by what you want
*   and replace back all @# by &#

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-05T14:42:43.837

我认为[Lookaround](http://www.regular-expressions.info/lookaround.html)适用于此：`&(?!#)`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-05T14:42:46.410

您可以使用[负前瞻](http://www.regular-expressions.info/lookaround.html)。

```
&(?!#) 
```

> 负前瞻结构是一对圆括号，左括号后跟一个问号和一个感叹号。在前瞻中，我们有简单的正则表达式#。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-05T14:43:43.630

你需要[向前看](http://www.regular-expressions.info/lookaround.html)

虽然没有在java中测试过

# apache2 - Apache2 在一个 IP 上服务多个站点

> ID：10030657
> 
> 赞同：0
> 
> 时间：2012-04-05T14:36:32.723
> 
> 标签：apache2

我有两个指向同一个 IP 的域，这是一个带有 apache2 的 Ubuntu VPS。我需要将两个域都从 apache 中服务出来。我已经阅读了[http://httpd.apache.org/docs/2.0/vhosts/examples.html#purename](http://httpd.apache.org/docs/2.0/vhosts/examples.html#purename)上的配置手册并添加了以下两个文件：

1) 网络咨询

```
<VirtualHost *:80>
    ServerName www.webikenconsultants.com
    DocumentRoot /var/www/coming_soon
    <Directory  /var/www/coming_soon>
    Order allow,deny
    Allow from all
    </Directory>
</VirtualHost> 
```

2) 网上交易

```
<VirtualHost *:80>
    ServerName www.webikentrading.net
    #WSGIScriptAlias / /opt/webikentrading/current/src/webikentrading/django.wsgi
    DocumentRoot /var/www
    <Directory /var/www >
    Order allow,deny
    Allow from all
    </Directory>
</VirtualHost> 
```

如您所见，webikentrading 是一个 Django 项目，但目前，为了让事情顺利进行，我将它作为一个静态站点提供服务，直到我弄清楚发生了什么。问题是当我访问任何一个域时，只显示coming_soon 内容，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T10:45:18.063

我解决了这个问题。vhost 入口指向 www.webikentrading.net 但是，浏览器使用的是 webikentrading.net，所以我为 webikentrading.net 添加了一个单独的条目，一切都很好

编辑：

这已经很老了，但我现在有一种新的改进方法，我希望它可以帮助其他人。

使用 mod_wsgi 守护程序指令，它允许您添加您选择的 python 路径。示例配置是：

```
<VirtualHost *:80>
    ServerName qa.webiken.net
    ....
    WSGIDaemonProcess qa.webiken.net processes=2 threads=15 python-path=/usr/local/pythonenv/QA-WEBIKEN-1/lib/python2.5/site-packages display-name=%{GROUP}
    WSGIProcessGroup  qa.webiken.net
</VirtualHost>

<VirtualHost *:80>
    ServerName staging.webiken.net
    ....
    WSGIDaemonProcess staging.webiken.net processes=2 threads=15 python-path=/usr/local/pythonenv/staging-WEBIKEN-1/lib/python2.5/site-packages display-name=%{GROUP}
    WSGIProcessGroup  staging.webiken.net
</VirtualHost> 
```

# jsf-2 - 我可以使 h:outputStylesheet 加载从 servlet 检索的 css 文件吗？（不是资源文件夹）

> ID：10030659
> 
> 赞同：0
> 
> 时间：2012-04-05T14:36:37.310
> 
> 标签：jsf-2

是否可以告诉`<h:outputStylesheet`从 servlet url 加载文件？

喜欢`http://my.company.com/MyServletName/jahdkhasdhasjkdha8d98yuifysduifsdh`原因，如果我尝试类似的东西

```
<h:outputStylesheet library="css"
    name="http://my.company.com/MyServletName/jahdkhasdhasjkdha8d98yuifysduifsdh" target="head" /> 
```

在哪里

```
http://my.company.com/MyServletName/jahdkhasdhasjkdha8d98yuifysduifsdh 
```

是一个将它定向到正确的 css 文件的 servlet，它不起作用......`<link`标签没有被创建

当我尝试使用时，我需要这个原因

```
<link type="text/css" rel="stylesheet" href="http://my.company.com/MyServletName/jahdkhasdhasjkdha8d98yuifysduifsdh" /> 
```

`#{facesContext.externalContext.requestContextPath}'/`css 文件中的表达式没有被翻译成 WebApp 名称...

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T00:40:28.113

不，你不能。即使它工作了，负责 EL 解析的是 servlet，而不是`<h:outputStylesheet>`组件。

您需要以不同的方式解决问题。我首先将所有 CSS 依赖项（例如 CSS 图像）放在与 CSS 文件本身完全相同的文件夹中，然后相对引用它们。这样您就不需要摆弄上下文路径。

顺便说一句，`#{request.contextPath}`它更短。

# c++ - #define 指令有多个替换？

> ID：10030660
> 
> 赞同：2
> 
> 时间：2012-04-05T14:36:39.610
> 
> 标签：c++, macros, c-preprocessor, wxwidgets, preprocessor-directive

我对编程比较陌生，我正在尝试学习在 C++ 中使用 wxWidgets（使用 Visual Studio 2010）。

我正在查看 wxWidgets 头文件“app.h”，我看到了一些`#define`我无法理解的指令。这是一个例子：

```
#define wxIMPLEMENT_APP(appname)            \
   wxIMPLEMENT_WX_THEME_SUPPORT            \
   wxIMPLEMENT_APP_NO_THEMES(appname)" 
```

我习惯用一个“标识符”和一个“替换”看到#define，所以我不明白这个宏是有两个“标识符”（`wxIMPLEMENT_APP(appname)`和`wxIMPLEMENT_WX_THEME_SUPPORT`）和一个“替换”（`wxIMPLEMENT_APP_NO_THEMES (appname)`），还是一个“标识符”（`wxIMPLEMENT_APP(appname)`) 和两个“替换”(`wxIMPLEMENT_WX_THEME_SUPPORT`和`wxIMPLEMENT_APP_NO_THEMES(appname)`)。

我如何理解这个宏？

我尝试在网上和教科书中查找，在“宏”、“预处理器指令”、“文本替换宏”、“#define 指令”等类似内容下进行搜索，但我找不到任何带有解释的示例，看起来像我这里有一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T14:42:28.673

此*预处理器宏*具有跨多行的单个替换拆分。行`\`尾的 允许您在多行文本上写一个“逻辑”行。

当模式*匹配*时，后面的所有内容`wxIMPLEMENT_APP(appname)`都将放在程序的文本中；据推测，这两个定义都将由预处理器进一步处理，因为它们看起来像对其他宏定义的引用。`wxIMPLEMENT_APP(appname)`

# php - foreach 数组值转换为单个字符串

> ID：10030662
> 
> 赞同：2
> 
> 时间：2012-04-05T14:36:48.640
> 
> 标签：php, foreach

我使用 PHP 从 RSS 提要中输出类别信息：

```
foreach(item_category()) as $category) { 
    $source = $category->cat_name; 
    echo $source.'.png';
} 
```

`item_category`类别名称数组在哪里。然后，我有一组我想针对每个项目显示的相应图像。

目前我的输出如下所示：

```
category1.pngcategory2.pngcategory3.png 
```

但是我需要：

```
category1category2category3.png 
```

如何在字符串末尾仅出现一次文件扩展名来构造正确的文件名？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T14:38:51.370

```
foreach(item_category() as $category) { 
    $source = $category->cat_name; 
    echo $source;
}
echo'.png' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T14:46:37.647

这是不使用局部变量的替代解决方案

```
echo implode('', array_map(function($c){
    return $c->cat_name;
}, item_category()) . '.png'; 
```

（需要 PHP >= 5.3）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T14:53:49.837

```
foreach(item_category() as $category) { 
    echo $category->cat_name; 
}
echo '.png'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T14:38:15.363

```
foreach(item_category() as $category)
    $source .= $category->cat_name;
echo $source.'.png'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T14:39:03.700

```
foreach(item_category()) as $category) { 
    $source .= $category->cat_name; 
}

echo $source'.png'; 
```

这应该输出

> cat1cat2cat3.png

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-05T14:39:38.640

The quick answer is to put this line

```
echo $source.'.png'; 
```

Outside your foreach loop.

# python - 上传文件名

> ID：10030669
> 
> 赞同：-1
> 
> 时间：2012-04-05T14:36:59.563
> 
> 标签：python, django

当注册用户将一些文件以 PDF 格式上传到 MEDIA_ROOT（命名 usermedia 目录）时，文件保存在目录中为 12345676542.pdf 这个数字是用户注册时给出的 OIB 编号

```
def handle_uploaded_file(f,wusr):
    nname = "%s.%s" % (str(wusr.oib), f.name.split(".")[1])
    print nname
    destination = open('%s/%s' % (MEDIA_ROOT, nname), 'wb+')
    for chunk in f.chunks():
        destination.write(chunk)
    destination.close() 
```

但是当用户想要上传另一个文档时，这个文档被保存为以前的文档

如何设置用户何时要将另一个文件上传到名为 12345676542-1.pdf 的 geth 文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:54:25.790

您要么需要维护该用户使用的最后一个索引的数据存储，要么在文件系统中搜索该用户的现有文件并找到第一个未使用（或最后使用）的索引，然后使用该索引创建新文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:04:43.000

您的代码需要检查现有文件，直到找到合适的未使用文件名。像这样的东西：

```
import os

filename = base_filename = '123456765432'
ext = '.pdf'
suffix = 0
while os.path.exists(filename+ext):
    suffix += 1
    filename = '%s-%d' % (base_filename, suffix) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T15:03:35.753

这是一个解决方案的示例。**请记住，我尚未对此进行测试，因此可能存在语法错误。将此视为建议。**

```
def handle_uploaded_file(f,wusr):
    nname = "%s.%s" % (str(wusr.oib), f.name.split(".")[1])
    nname = unique(nname)
    destination = open('%s/%s' % (MEDIA_ROOT, nname), 'wb+')
    for chunk in f.chunks():
        destination.write(chunk)
    destination.close()

# Return unique file name in format <filename>-<num>.<ext>
def unique(path):
    import os.path
    num = 0
    newpath = path

    def fileExists(path):
        return os.path.isfile(path)

    # Keep incrementing until an unique filename is reached
    while fileExists(newpath):
        num += 1
        pieces = path.rsplit('.', 1)
        newpath = "%s-%d.%s" % (pieces[0], num, pieces[1])

    return newpath 
```

该`unique`函数将生成一个保证唯一的新文件名。当您达到大量同名上传时，这种针对每个时间间隔检查磁盘的特殊解决方案可能会出现问题。如果这个解决方案的速度有问题，只需列出目录中的所有文件，然后对那个字符串执行上述操作。这会将磁盘操作的数量从*x*减少到 1

# c# - 如何从 WPF 中的父对象检测子对象的变化？

> ID：10030676
> 
> 赞同：2
> 
> 时间：2012-04-05T14:37:16.867
> 
> 标签：c#, wpf, xaml, design-patterns

我们有一个 WPF 应用程序，假设我有一个 Department 对象，其中我有一个 ObservableCollection 课程，在每门课程中我有一个 ObservableCollection 教师，在每个教师中我有一个 ObservableCollection 学生：

Department.cs ---- ObservableCollection 课程

Course.cs ---- ObservableCollection 教师

Teacher.cs ---- ObservableCollection 学生

Student.cs ---- 姓名、年龄等

这4个类都实现了INotifyPropertyChanged，它们自己工作正常，我想要实现的是每当Department对象图中的任何内容发生变化时，无论是学生的年龄发生变化，还是添加新课程或移除老师，任何事情完全，我想知道它，理想情况下是通过像 DepartmentChanged 这样的事件（理想情况下这只引发一次），所以我可以调用其他一些长期运行的操作。

我很难想出一个干净的方法来做到这一点。我了解 INotifyPropertyChanged 仅跟踪类的属性更改，而 ObservationCollection 不知道其项目之一是否发生了更改。

到目前为止，我尝试了类似（伪代码）的嵌套循环：

```
foreach (var course in d.Courses){
    foreach (var teacher in course.Teachers){
        foreach (var student in teacher.Students){
            ((INotifyPropertyChanged)student).PropertyChanged += ...
        }
        teacher.Students.CollectionChanged += ...
    }
} 
```

但是可以想象，这创建了很多 PropertyChanged 事件，因为每个属性都订阅了它，而我想在 Department 中执行的操作最终被执行了很多次，这很糟糕。

然后我尝试使用计时器（我们的每个班级都有一个 IsDirty() 来确定对象是否已更改），时间间隔设置为 500：

```
if(department != null && department.IsDirty()){
    //call some long running Action here
} 
```

虽然这似乎可行，但不知何故我觉得这种方法是错误的，如果可能的话，我真的很想避免使用计时器，我很想听听其他建议和想法！

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T16:42:11.323

这只是一个快速的想法，没有计时器，你能在 Course 和 Teacher 类上实现 IsDirty 事件吗？

例如，Teacher，PropertyChanged 内部的管理者（当学生集合发生变化时正确订阅/取消订阅）。当它的任何学生发生有效更改时，它所要做的就是引发 IsDirty 事件，这些事件都以学生 obj 作为参数。

Course 将监听并捕获 teacher.IsDirty 事件，并将引发它自己的 course.IsDirty，其中 CourseEventArgs = new CourseEventArgs 将有一个 Course，Teacher 和 Student 有脏字段。

在 Department 类中，您收听 Course IsDirty 事件并解析 args...

这个想法似乎与您所做的相同，但实际上并非如此，因为它仅在最低级别处理任何 PropertyChanged，然后使用您自己的事件将必要的信息冒泡到顶部。它将顶级课程与学生的 PropertyChanged 行为实现以及广泛的聊天区分开来。此外，如果在学生级别，您进行更改（通过 UI，并发布它们，单击保存或其他）然后您可以控制何时引发 IsDirty，也许只有一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T15:49:05.743

我认为您仍然必须在单个对象级别使用 IsDrity 位和 INotifyPropertyChanged，但是为什么不扩展`ObservableCollection<T>`和覆盖一些基本方法来处理对象属性更改的注册？例如，创建如下内容：

```
public class ChangeTrackerCollection<T> : ObservableCollection<T>
{
    protected override void ClearItems()
    {
        foreach (var item in this)
            UnregisterItemEvents(item);

        base.ClearItems();
    }

    protected override void InsertItem(int index, T item)
    {
        base.InsertItem(index, item);

        RegisterItemEvents(item);
    }

    protected override void RemoveItem(int index)
    {
        UnregisterItemEvents(this[index]);

        base.RemoveItem(index);
    }

    private void RegisterItemEvents(T item)
    {
        item.PropertyChanged += this.OnItemPropertyChanged;
    }

    private void UnregisterItemEvents(T item)
    {
        item.PropertyChanged -= this.OnItemPropertyChanged;
    }

    private void OnItemPropertyChanged(object sender, PropertyChangedEventArgs e)
    {
        //TODO: raise event to parent object to notify that there was a change...
    }
} 
```

# jquery - JQuery 计算错误：“未捕获的类型错误：对象 [对象对象] 没有方法‘值’”

> ID：10030678
> 
> 赞同：0
> 
> 时间：2012-04-05T14:37:19.787
> 
> 标签：jquery, object, methods, typeerror

我对 jQuery 很陌生，需要根据用户在 2 个文本框中放置的内容来创建计算。

我的表格如下所示：

```
<tr>
      <td with='110'>&pound; $ProductCostEach</td>
      <td with='110'>Per tile</td>
      <td width='55'>
            <input type='hidden' name='pid' id='pid' value='$ProductID' />
            <input name='quantity' class='quantity' type='text' size='1' maxlength='4' value='1' style='width:40px;' />
      </td>
      <td width='110'>
            <button type='submit' class='red'><span class='buy'>Add to basket</span></button>
      </td>
</tr><tr>
 <td with='110'>&pound; $ProductCostPerMeter</td>
 <td with='110'>Per Meter $TileSize</td>
 <td width='55'>
            <input type='hidden' name='pid' id='pid' value='$ProductID' />
            <input name='msq' class='msq' type='text' size='1' maxlength='4' value='1' style='width:40px;' />
      </td>
      <td width='110'>
            <button type='submit' class='red'><span class='buy'>Add to basket</span></button>
      </td>
</tr> 
```

现在，当用户在输入框中输入一个带有 .msq 类的值时，我希望它进行计算，因此编写了一个 keyup 事件：

```
function roundNumber(num, dec) {
      var result = Math.round(num*Math.pow(10,dec))/Math.pow(10,dec);
      return result;
}

var convMultiplier
convMultiplier =  0.0625

$('.msq').bind('keyup', function(){
      var qty_text_box = $(this).parent().parent().parent().find('.quantity');

      qty_text_box.value(roundNumber($(this).value * convMultiplier, 2));
}); 
```

但是在获取输入框的值时遇到问题。如果我在 var qty_text_box = $(this).parent().parent().parent().find('.quantity') 之后添加一个 alert(qty_text_box.value()); 我收到一个错误“未捕获的类型错误：对象 [对象对象] 没有方法‘值’”

但我正在努力找出问题所在......

提前谢谢了，

大年

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:12:34.613

您的 parent() jquery 调用字符串似乎没有找到正确的元素。如果您在同一页面上没有多个数量输入，您应该只给它一个 id 并以这种方式引用它。

如果您在页面上有多个数量输入，您应该将被单击的按钮和父元素中的输入分组，可能在同一行上，以使事情更容易，然后通过类似 $(this).parents( '.parentEl').find('.quantity')

或者，您可能会选择使用 $(this).closest('.quantity') 来获取输入，但如果没有看到更多的 html，我无法告诉您这是否可以可靠地工作。

编辑您对 .value 的第二次使用也需要括号（ .value() ）

# android - Android：位图大小超出 VM 预算（逐帧）

> ID：10030679
> 
> 赞同：0
> 
> 时间：2012-04-05T14:37:27.313
> 
> 标签：android, animation, frame, android-animation, out-of-memory

我一直收到这个错误。正如我所看到的，stackoverflow.com 上已经有很多问题，但遗憾的是，我找不到任何适合我的答案。

我有 60 张 PNG 图像（总共 2.5MB），我想把它们放在动画中。

我尝试了三种不同的方式。

# 1

```
mAnimation = new AnimationDrawable();
mAnimation.addFrame((BitmapDrawable)getResources().getDrawable(R.drawable.yawning_00001), FPS_12);  
...
mAnimation.addFrame((BitmapDrawable)getResources().getDrawable(R.drawable.yawning_00063), FPS_12);
mAnimation.start(); 
```

# 2

XML

```
<animation-list android:oneshot="true">
    <item android:drawable="@drawable/yawning_00001" android:duration="83" />
    ...
    <item android:drawable="@drawable/yawning_00063" android:duration="83" />
 </animation-list> 
```

爪哇

```
ImageView img = (ImageView)findViewById(R.id.animation);
img.setBackgroundResource(R.drawable.yawning);
AnimationDrawable frameAnimation = (AnimationDrawable) img.getBackground();
frameAnimation.start(); 
```

# 3

随着类扩展 ImageView（我将在这里只展示重要的东西）

```
public void loadAnimation(String prefix, int nframes) {
    mBitmapList.clear();
    for (int x = 0; x < nframes; x++) {
        String zeros = "000";
        if (x < 10) {
            zeros += "0";
        }
        String name = prefix + "_" + zeros + x;
        Log.d(TAG, "loading animation frame: " + name);
        int res_id = mContext.getResources().getIdentifier(name, "drawable", mContext.getPackageName());
        d = (BitmapDrawable) mContext.getResources().getDrawable(res_id);
        mBitmapList.add(d.getBitmap());
    }
} 
```

在所有情况下，我都会遇到相同的错误......在加载 15 张图片后出现了一些错误。

```
E/AndroidRuntime(1591): java.lang.OutOfMemoryError: bitmap size exceeds VM budget 
```

我想知道这是否是帧动画甚至在 Android 中也是可能的。

有没有人可以替代逐帧动画？如果是，请链接到任何展示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T14:43:25.553

您将需要以某种方式回收图像，因为您将没有足够的内存来存储 60 张图像。

您认为您的图像加在一起是 2.5 兆，但这是文件的压缩 png 版本。

如果您想知道在内存中以位图格式解压缩时文件使用了多少内存，只需执行以下操作：宽度*高度*图像数量*每像素字节数......然后你就会知道为什么会崩溃：D

AnimationDrawable 不适合这种大量使用。您应该开始查看 SurfaceViews，然后您就可以自由地实现您想要用来显示动画的任何内存管理方法。

[http://developer.android.com/reference/android/view/SurfaceView.html](http://developer.android.com/reference/android/view/SurfaceView.html)

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:31:12.197

有时，内存泄漏来自堆栈跟踪中未显示的代码行。我认为您应该仔细阅读下面的文章，然后检查您自己的代码以省略一些特殊问题，例如：

*   不要保留对上下文活动的长期引用（对活动的引用应该与活动本身具有相同的生命周期）
*   尝试使用上下文应用程序而不是上下文活动
*   如果您不控制它们的生命周期，请避免在活动中使用非静态内部类，使用静态内部类并对内部活动进行弱引用。此问题的解决方案是使用静态内部类和对外部类的 WeakReference，例如在 ViewRoot 及其 W 内部类中所做的**

[文章](http://developer.android.com/resources/articles/avoiding-memory-leaks.html)

编辑：您还应该检查这些：

*   调用 recycle() 删除未使用的位图

*   使用 sampleSize > 1 来减小位图大小。

> Bitmap.createBitmap(width, height, new BitmapFactory.Options().inSampleSize=4)

# c# - WrapPanel 元素的处理程序

> ID：10030681
> 
> 赞同：0
> 
> 时间：2012-04-05T14:37:30.340
> 
> 标签：c#, windows-phone-7

我已经动态创建了带有多个边框的 WrapPanel (_wp)。我需要为每个边框创建处理程序。我怎样才能通过 C# 做到这一点？

```
 for (int k = 1; k < i+1; k++)
        {
            _b = new Border()
            {
                Margin = new Thickness(0, 5, 5, 0),
                BorderBrush = new SolidColorBrush(Colors.Blue),
                BorderThickness = new Thickness(3, 3, 3, 3),
                Background = new SolidColorBrush(Colors.Transparent),
                Child = new TextBlock()
                {
                    Text = k.ToString(),
                    HorizontalAlignment = System.Windows.HorizontalAlignment.Center,
                    VerticalAlignment = System.Windows.VerticalAlignment.Center,
                    FontSize = 28,
                }
            };
            _wp.Children.Add(_b); 
        } 
```

我需要水龙头处理程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:39:33.443

只需使用

```
 _b.Tap += yourHandler; 
```

# cocoa - 添加到多对多/多对多核心数据关系

> ID：10030685
> 
> 赞同：0
> 
> 时间：2012-04-05T14:37:36.647
> 
> 标签：cocoa, core-data, tags, nsarraycontroller

我有 2 个实体，通过多对多关系相关。

```
Thing<<->>Tag 
```

有一个 NSArrayController 控制实体“Tag”，绑定到 managedObjectContext。通过数组控制器添加：和删除：操作我可以将标签实例添加到集合中。

还有第二个 NSArrayController 控制“Thing”实体，也绑定到 managedObjectContext。

因此，每个控制器都管理其实体的*所有*实例。

现在，假设它们的数组控制器已经创建了 5 个“标签”和 3 个“事物”实例。
我想将单个标签链接到一个东西。我只想创建现有事物与现有标签实例之间的关系。

*   NSArrayController 的 addObject: 是正确的方法吗？或者它会创建一个新的 managedObject 吗？

*   是否相当于：

    ```
    NSMutableSet *tags = [aThing mutableSetValueForKey:@"tags"];
    [tags addObject:existingTag]; 
    ```

    ?

*   标记系统是否有一些最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:47:32.997

我发现在核心数据建模器中选择实体很有帮助（在最新版本的 Xcode 中），然后转到文件菜单，然后选择新文件 -> 核心数据 -> NSManagedObject 子类。它会自动创建一个具有必要成员的类以及在 toMany 关系中添加对象的方法。

如果你已经这样做了，那么你只需要获得`thing`你想要添加 a 的实例，`tag`你就可以调用为你声明的方法来这样做。从生成的头文件中可以明显看出该方法的命名方式。

# html - 更改为 HTML5 DOCTYPE 是否安全？

> ID：10030688
> 
> 赞同：6
> 
> 时间：2012-04-05T14:37:55.990
> 
> 标签：html, validation, doctype

我的网站目前正在使用：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

然而，像 Facebook 插件这样的东西只在 HTML5 中有效。那么，将我的 DOCTYPE 更改为安全`<!DOCTYPE html>`吗？这会影响什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T14:49:10.043

是的，您可以更改您的`DOCTYPE`，它不会影响您已经完成的任何事情。`HTML 5`您将获得一些可用于未来目的的新功能。只需检查[此链接](http://html5demos.com/)，您就会对 HTML 5 中的功能有所了解

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T14:53:53.957

你可以改变它。几乎所有浏览器都只是`html`在 doctype 中查找以确保它们正在解析 HTML。对于新版本的 HTML，它也将保持不变。

您可能希望对`head`元素进行以下快速更改：

*   `meta`将元素更改为`<meta charset="utf-8">`.
*   `type="text/css"`链接样式表时删除并`type="text/javascript"`放入`script`元素，因为这些是默认值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T16:30:17.800

这种文档类型更改会影响的唯一事情是验证。除此之外，doctype 声明只影响浏览器模式（怪癖/几乎标准/标准），XHTML 1.0 和 HTML5 doctype 在这方面具有相同的效果。

如果您不使用验证器，则没有理由更改。如果你这样做了，你应该根据你的文档更接近哪个 HTML 版本来选择文档类型。此外，HTML5 验证与 XHTML 1.0 验证（启发式混合策略检查与正式定义明确但有限的检查）完全不同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T14:44:52.083

如您所说，更改您的 DOCTYPE，它不应该影响您在 HTML4 中已经完成的工作，但它确实为您提供了一些未来 HTML5 新功能的选项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T14:43:15.100

它不应该影响任何东西，但保持原样被认为是很好的标记。无论如何，HTML5 应该可以工作。

# ember.js - 使用相对路径构建视图层次结构

> ID：10030691
> 
> 赞同：1
> 
> 时间：2012-04-05T14:38:10.187
> 
> 标签：ember.js

我是 Ember 的新手，并试图从文档中学习部分内容。我能够使用绝对路径（[jsfiddle](http://jsfiddle.net/HdSkh)）创建，但使用相对路径没有任何成功。在我修改代码后

```
App.UserView = Ember.View.extend({
  templateName: 'user',

  firstName: "Albert",
  lastName: "Hofmann",

  infoView: Ember.View.extend({
    templateName: 'info',

    posts: 25,
    hobbies: "Riding bicycles"
  })
}); 
```

Ember 无法在模板中找到相对视图。我的[jsfiddle](http://jsfiddle.net/nkCgU)尝试。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:45:03.047

修复它：http: [//jsfiddle.net/MikeAski/nkCgU/3/](http://jsfiddle.net/MikeAski/nkCgU/3/)

您必须在同一模板块中内联子视图模板部件声明。

# ruby-on-rails - Unicorn Rails 堆栈 + Vagrant 不为某些资产提供服务

> ID：10030697
> 
> 赞同：1
> 
> 时间：2012-04-05T14:38:40.847
> 
> 标签：ruby-on-rails, nginx, unicorn, vagrant, rbenv

我正在使用带有**nginx + unicorn + rails**的 Rails Stack用于生产服务器，但出于测试目的，我将其暂存在 Vagrant 下。在执行此操作时，我遇到了 rails 应用程序的一个奇怪行为，其中经常没有提供一个或其他资产，即没有提供 application.css，因此整个页面显示时没有应用任何样式。

我用谷歌搜索了这个问题，发现 Vagrant 的 FS 驱动程序没有完全实现，这会在使用 Apache 时带来一些问题（没有发现任何关于 nginx 的提及）。解决这个问题的方法是通过添加**sendfile off 来禁用 sendfile；**到配置文件。而且……没用。

此外，我查看了日志（Rails、unicorn 和 nginx），发现当文件没有被提供时，任何日志中都没有提到它。这让我想到问题可能出在 Vagrant通过 VM共享**rails app文件夹的机制中。**正如 vagrant 的网站所述，Vagrant 使用 Virtual Box 的共享文件夹，与其他替代方案相比速度相当慢（如图所示[）](http://vagrantup.com/docs/nfs.html)，解决方法是设置 NFS 共享文件夹。所以，我决定试一试 NFS，结果是……还是一样的。不幸的是，有些资产无法提供服务。

有人对此有任何想法吗？我已经搜索了很长一段时间，但没有找到除我在这里描述的那些之外的任何指针。

我在用着：

Mac OS X 10.6.8 + rbenv（开发）

Vagrant + nginx + rbenv + unicorn + bundler（到阶段）

**独角兽.rb**

```
rails_env         = ENV['RAILS_ENV'] || 'production'
app_directory     = File.expand_path(File.join(File.dirname(__FILE__), ".."))

worker_processes 4
working_directory app_directory

listen "/tmp/appname.sock", :backlog => 64
#listen "#{app_directory}/tmp/sockets/appname.sock", :backlog => 64

timeout 30

pid "#{app_directory}/tmp/pids/unicorn.pid"

stderr_path "#{app_directory}/log/unicorn.stderr.log"
stdout_path "#{app_directory}/log/unicorn.stdout.log"

preload_app true
GC.respond_to?(:copy_on_write_friendly=) and
  GC.copy_on_write_friendly = true

before_fork do |server, worker|
  defined?(ActiveRecord::Base) and
    ActiveRecord::Base.connection.disconnect!
end

after_fork do |server, worker|
  defined?(ActiveRecord::Base) and
    ActiveRecord::Base.establish_connection
end 
```

**/etc/nginx/sites-enabled/appname**

```
upstream unicorn_server {
        server unix:/tmp/appname.sock fail_timeout=0;
}

server {
    listen 80;
    client_max_body_size 4G;
    server_name _;

    keepalive_timeout 5;

    # Location of our static files
    root /home/appname/www/current/public;

    location / {
      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
      proxy_set_header Host $http_host;
      proxy_redirect off;

      if (!-f $request_filename) {
        proxy_pass http://unicorn_server;
        break;
      }
    }

    error_page 500 502 503 504 /500.html;
    location = /500.html {
      root /home/hemauto/www/current/public;
    }
  } 
```

# xml - 如何保护 Windows Phone 7 中的 XML 文件

> ID：10030698
> 
> 赞同：0
> 
> 时间：2012-04-05T14:38:41.777
> 
> 标签：xml, security, windows-phone-7, encryption, cryptography

我想向我的应用程序添加一个包含敏感数据的 XML 文件。

我不希望任何人能够获取此文件并使用其内容。

我怎样才能做到这一点？

我认为使用加密可能是一个好主意，但是我怎样才能在不写在代码中的情况下传递加密密码呢？（我不希望有人能够通过使用反编译器找到它）

隔离存储是否被认为是安全的地方？除了我的申请之外，其他人可以访问它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T17:44:58.973

简短的回答 - 没有 100% 安全的方法可以将您的 XML 文件存储在手机上，因为无论您现在是否允许，都可以从独立存储中提取它。您最好的选择是加密文件并混淆源代码。

> 拥有用户指定的加密密钥，而不是 **硬编码**。

[Dave Amenta 建议](https://twitter.com/#!/davux/status/187959498055487488)使用[ProtectedData](http://msdn.microsoft.com/en-us/library/system.security.cryptography.protecteddata%28v=vs.95%29.aspx)，这可能是您可能想要解决此问题*的方法之一。*

# c# - 更改 ActiveViewIndex 后 ASP 按钮不起作用

> ID：10030703
> 
> 赞同：2
> 
> 时间：2012-04-05T14:38:55.023
> 
> 标签：c#, asp.net, multiview

我正在使用 MultiView 构建多步骤表单。下一步按钮适用于第一步 (ViewOne)，但下一步和后退按钮在下一步 (ViewTwo) 中均不执行任何操作。

不知道下面的代码有什么线索还是需要看更多？...

```
 <asp:MultiView ID="MultiView2" runat="server" ActiveViewIndex="0">
 <asp:View ID="ViewOne" runat="server">
 </asp:View>
 <asp:View ID="ViewTwo" runat="server">
 </asp:View>
 </asp:MultiView>
 <asp:ImageButton ID="btnBack" runat="server" ImageUrl="/assets/back_button.jpg"  OnClick="btnBack_Click" /> 
 <asp:ImageButton ID="btnNext" runat="server" ImageUrl="/assets/next_button.gif" OnClick="btnNext_Click" />
 <asp:ImageButton ID="btnSubmit" runat="server" ImageUrl="/assets/submit_button.gif" OnClick="btnSend_Click" /> 
```

后面的代码......

```
protected void btnBack_Click(object sender, EventArgs e)
    {
        MultiView2.ActiveViewIndex--;
    }

    protected void btnNext_Click(object sender, EventArgs e)
    {
        MultiView2.ActiveViewIndex++;
    }

    protected void btnSend_Click(object sender, EventArgs e)
    {
        OnSubmitClicked(e);
    } 
```

好的，更多代码...

```
protected override void OnLoad(EventArgs e)
{
        base.OnLoad(e);
     PopulateSomeField();
    }

protected override void OnPreRender(EventArgs e)
    {
        btnBack.Visible = MultiView2.ActiveViewIndex > 0;
        btnNext.Visible = MultiView2.ActiveViewIndex < MultiView2.Views.Count - 1;
        btnSubmit.Visible = MultiView2.ActiveViewIndex == MultiView2.Views.Count - 1;
        base.OnPreRender(e);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:43:37.843

那里没有错误。它对我来说很好用。

**测试2.aspx：**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="test2.aspx.cs" Inherits="test2" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:MultiView ID="MultiView2" runat="server" ActiveViewIndex="0">
         <asp:View ID="ViewOne" runat="server">
            One
         </asp:View>
         <asp:View ID="ViewTwo" runat="server">
            Two
         </asp:View>
         </asp:MultiView>
         <asp:ImageButton ID="btnBack" runat="server" ImageUrl="/assets/back_button.jpg"  OnClick="btnBack_Click" /> 
         <asp:ImageButton ID="btnNext" runat="server" ImageUrl="/assets/next_button.gif" OnClick="btnNext_Click" />
         <asp:ImageButton ID="btnSubmit" runat="server" ImageUrl="/assets/submit_button.gif" OnClick="btnSend_Click" />
    </div>
    </form>
</body>
</html> 
```

**测试2.aspx.cs：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class test2 : System.Web.UI.Page
{
    protected override void OnLoad(EventArgs e)
    {
        base.OnLoad(e);
        //PopulateSomeField();
    }

    protected override void OnPreRender(EventArgs e)
    {
        btnBack.Visible = MultiView2.ActiveViewIndex > 0;
        btnNext.Visible = MultiView2.ActiveViewIndex < MultiView2.Views.Count - 1;
        btnSubmit.Visible = MultiView2.ActiveViewIndex == MultiView2.Views.Count - 1;
        base.OnPreRender(e);
    }

    protected void btnBack_Click(object sender, EventArgs e)
    {
        MultiView2.ActiveViewIndex--;
    }

    protected void btnNext_Click(object sender, EventArgs e)
    {
        MultiView2.ActiveViewIndex++;
    }

    protected void btnSend_Click(object sender, EventArgs e)
    {
        Response.Write("submitted");
    }

} 
```

# out-of-memory - Raven DB DocumentStore - 抛出内存不足异常

> ID：10030704
> 
> 赞同：4
> 
> 时间：2012-04-05T14:38:57.940
> 
> 标签：out-of-memory, ravendb

我有这样的代码：

```
public bool Set(IEnumerable<WhiteForest.Common.Entities.Projections.RequestProjection> requests)
    {
        var documentSession = _documentStore.OpenSession();
        //{
        try
        {
            foreach (var request in requests)
            {
                documentSession.Store(request);
            }
            //requests.AsParallel().ForAll(x => documentSession.Store(x));
            documentSession.SaveChanges();
            documentSession.Dispose();
            return true;
        }
        catch (Exception e)
        {
            _log.LogDebug("Exception in RavenRequstRepository - Set. Exception is [{0}]", e.ToString());
            return false;
        }
        //}
    } 
```

这段代码被多次调用。在我得到大约 50,000 个通过它的文档后，我得到了 OutOfMemoryException。知道为什么吗？也许过一段时间我需要声明一个新的 DocumentStore ？

谢谢你

**

*   更新：

**

我最终使用 Batch/Patch API 来执行我需要的更新。您可以在此处查看讨论：[https ://groups.google.com/d/topic/ravendb/3wRT9c8Y-YE/discussion](https://groups.google.com/d/topic/ravendb/3wRT9c8Y-YE/discussion)

基本上因为我只需要更新我的对象上的 1 个属性，并且在考虑了关于将所有对象重新序列化回 JSON 的ayendes 评论之后，我做了这样的事情：

```
internal void Patch()
    {
        List<string> docIds = new List<string>() { "596548a7-61ef-4465-95bc-b651079f4888", "cbbca8d5-be45-4e0d-91cf-f4129e13e65e" };
        using (var session = _documentStore.OpenSession())
        {
            session.Advanced.DatabaseCommands.Batch(GenerateCommands(docIds));
        }
    }

    private List<ICommandData> GenerateCommands(List<string> docIds )
    {
        List<ICommandData> retList = new List<ICommandData>();

        foreach (var item in docIds)
        {
            retList.Add(new PatchCommandData()
            {
                Key = item,
                Patches = new[] { new  Raven.Abstractions.Data.PatchRequest () {
                Name = "Processed",
                Type = Raven.Abstractions.Data.PatchCommandType.Set,
                Value = new RavenJValue(true)
            }}});
        }

        return retList;
    } 
```

希望这可以帮助 ...

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T16:27:07.623

我只是为我当前的项目做了这个。我将数据分块并将每个块保存在一个新会话中。这也可能对您有用。

请注意，此示例一次显示了 1024 个文档的分块，但在我们决定是否值得分块之前至少需要 2000 个。到目前为止，我的插入获得了最佳性能，块大小为 4096。我认为这是因为我的文档相对较小。

```
internal static void WriteObjectList<T>(List<T> objectList)
{
    int numberOfObjectsThatWarrantChunking = 2000;  // Don't bother chunking unless we have at least this many objects.

    if (objectList.Count < numberOfObjectsThatWarrantChunking)
    {
        // Just write them all at once.
        using (IDocumentSession ravenSession = GetRavenSession())
        {
            objectList.ForEach(x => ravenSession.Store(x));
            ravenSession.SaveChanges();
        }

        return;
    }

    int numberOfDocumentsPerSession = 1024;  // Chunk size

    List<List<T>> objectListInChunks = new List<List<T>>();

    for (int i = 0; i < objectList.Count; i += numberOfDocumentsPerSession)
    {
        objectListInChunks.Add(objectList.Skip(i).Take(numberOfDocumentsPerSession).ToList());
    }

    Parallel.ForEach(objectListInChunks, listOfObjects =>
    {
        using (IDocumentSession ravenSession = GetRavenSession())
        {
            listOfObjects.ForEach(x => ravenSession.Store(x));
            ravenSession.SaveChanges();
        }
    });
}

private static IDocumentSession GetRavenSession()
{
    return _ravenDatabase.OpenSession();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T16:17:04.610

您是否想在一个电话中保存所有内容？DocumentSession 需要将您传递给它的所有对象转换为对服务器的单个请求。这意味着它可能会为写入服务器分配大量内存。通常我们建议您批量保存大约 1,024 件商品。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-30T15:05:31.223

`DocumentStore`是一个一次性类，所以我通过在每个块之后处理实例来解决这个问题。我**高度**怀疑这是运行操作的最有效方式，但它会防止发生显着的内存开销。

我正在像这样运行一种“全部删除”操作。您可以看到在每个块之后`using`处理 the`DocumentStore`和`IDocumentSession`objects 的块。

```
static DocumentStore GetDataStore()
{
    DocumentStore ds = new DocumentStore
    {
        DefaultDatabase = "test",
        Url = "http://localhost:8080"
    };

    ds.Initialize();
    return ds;
}

static IDocumentSession GetDbInstance(DocumentStore ds)
{
    return ds.OpenSession();
}

static void Main(string[] args)
{
    do
    {
        using (var ds = GetDataStore())
        using (var db = GetDbInstance(ds))
        {
            //The `Take` operation will cap out at 1,024 by default, per Raven documentation
            var list = db.Query<MyClass>().Skip(deleteSum).Take(5000).ToList(); 
            deleteCount = list.Count;
            deleteSum += deleteCount;

            foreach (var item in list)
            {
                db.Delete(item);
            }
            db.SaveChanges();
            list.Clear();
        }
    } while (deleteCount > 0);
} 
```

# freemarker - Struts2 FTL Tags with Map

> ID：10030713
> 
> 赞同：0
> 
> 时间：2012-04-05T14:39:15.783
> 
> 标签：freemarker

Iam developing a web application with free marker template using Struts2 tag libs. I have a map in the request object with attribute name as "namesToBeUsed"

How to assign it to a variable in ftl using struts2 tag?

Iam getting below error if I assign like this <@sftl.set name="namesToBeUsed" value='${Request["namesToBeUsed"]}'/>

Expecting a string, date or number here, Expression Request["namesToBeUsed"] is instead a freemarker.template.SimpleHash

Can any one help me? Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T18:14:26.977

应该：

```
<@sftl.set name="namesToBeUsed" value=Request["namesToBeUsed"] /> 
```

因为`'${whateverExpression}'`进行字符串插值，因此必须将表达式值转换为字符串。因此，在 FreeMarker 标记中，只需输入表达式，周围没有任何额外的语法。

# c# - 代码生成问题，覆盖现有方法实现

> ID：10030715
> 
> 赞同：1
> 
> 时间：2012-04-05T14:39:20.313
> 
> 标签：c#, code-generation, t4, edmx, partial-classes

有没有办法覆盖部分类中的现有方法？

像这样的东西（我知道这不会编译）

```
/// <summary>
/// Generated Code for MyClass
/// </summary>
public partial class MyClass
{
    public void MyMethod()
    {
        //Do work specific to MyClass
    }
}

/// <summary>
/// Non-generated extension for MyClass
/// </summary>
public partial class MyClass
{
    public override void MyMethod()
    {
        //Do some other work
    }
} 
```

我在进行一些代码生成时遇到了这种需求。我从我的 EDMX 和这些类的方法生成部分类，其中 90% 的类将具有特定于其属性的方法。

但是我遇到了我想要一次性方法的情况。

我忽略了这样的事情吗？或者一些建议的替代品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:43:28.673

您可以为此使用部分方法。如果您需要更改签名等，我假设您可以在此处推断。

还值得注意的是，如果您定义了一个部分方法并且没有人在该类的另一个部分位中定义它的实现，它只会变成无操作，而不是错误，因此您无需担心会导致问题. 它实际上是为这个用例而构建的。

```
/// <summary>
/// Generated Code for MyClass
/// </summary>
public partial class MyClass
{
    private partial void MyMethodImpl();
    public void MyMethod()
    {
        //Do work specific to MyClass

        MyMethodImpl();
    }
}

/// <summary>
/// Non-generated extension for MyClass
/// </summary>
public partial class MyClass
{
    public void MyMethodImpl()
    {
        //Do some other work
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T19:16:02.763

我们在代码库中广泛使用带有标记扩展点的双重派生模式。 [http://msdn.microsoft.com/en-us/library/bb126289(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/bb126289(v=vs.100).aspx)

生成的代码如下所示：

```
public abstract class FooBase
{
   protected FooBase()
   {
   }
   public virtual int GetSomeThing()
   {
      // ... some generated implementation ...
   }
}

public partial class Foo
{
   public Foo() : FooBase()
   {
   }
   // Nothing except the constructor generated in this class.
} 
```

然后，我们偶尔会通过生成不编译的方法来标记它们对手动代码的需求，并带有一个大注释，为所需的手动代码提供存根实现。已经相当成功了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T14:50:08.807

为什么不从生成的类派生并覆盖派生类中的方法？

# javascript - Sharepoint: access subsite page contact from workflow

> ID：10030716
> 
> 赞同：0
> 
> 时间：2012-04-05T14:39:21.630
> 
> 标签：javascript, jquery, sharepoint, workflow, sharepoint-designer

I'm trying to create a work flow that will send an email to the users in the contact field for the page that the initial link was followed from.

In other words, a user clicks a link on page `../top/sub/pages/page1.aspx` which takes them to a form here: `..top/lists/feedback/newform.aspx`. Once they submit the form on the top level page it starts a workflow (at `..top/lists/feedback/`) which will email the users in the meta data for the referrer page (`../top/sub/pages/page1.aspx`) and finish by deleting the feedback item.

My problem lies in trying to email the correct user. I have tried to make a work-flow on the sub-site, but it seems like the work-flow has ZERO access outside of its directory.

My next idea would be to try and send the user as a parameter (as part of the form) using a script, but I'm unsure of how to access the information I need.

How would I access the page's contact user? Am I even on the right track?

ps. I dont have access to the server and therefore am unable to use visual studio

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:31:47.263

可能有一些肮脏的解决方法。

1.  为您添加一个隐藏字段顶部/列表/反馈/
2.  添加一个委托控件，将联系人存储在用户来自的页面上，即在用户会话中（或 SharePoint 或 DB 中的某处），并将控件放置在页面 ../top/sub/pages/ 上（或将其放置在任何地方但让它只在页面上工作）
3.  在列表 ..top/lists/feedback/ 中添加一个 itemeventreceiver，它获取委托控件保存的内容并将其插入到 ..top/lists/feedback/newform.aspx 中创建的项目的隐藏字段中
4.  使用 wotkflow 中的隐藏字段。

我希望您可以接受它或阅读我的答案产生自己的想法。祝你好运！

# algorithm - 以这样一种方式转换两个字符串，使输入字符串之间的距离“反映”在输出字符串之间的距离中？

> ID：10030718
> 
> 赞同：0
> 
> 时间：2012-04-05T14:39:31.260
> 
> 标签：algorithm, hash, string-matching

我有一个很长的用户标识符列表。每次 HTTP 请求附带的标识符可能并不完全相同，因此我使用模糊字符串比较来验证用户身份。出于这个原因，我无法对标识符进行哈希处理，因为我的模糊字符串比较算法不适用于哈希值，因为即使是稍微不同的纯文本在哈希处理时也会产生完全不同的值。现在是否有一些算法algx使得距离（s1，s1'）在某种程度上与距离（algx（s1），algx（s1'））成正比？或者有没有其他方法可以解决这个问题？注意：这种意义上的距离是指将一个文本转换为另一个文本所需的编辑量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:45:22.967

您可以使用[Levenshtein distance](http://en.wikipedia.org/wiki/Levenshtein_distance "莱文斯坦距离")之类的方法来测量 2 个字符串之间的差异。还有一个同名的[PHP 函数。](http://www.php.net/manual/en/function.levenshtein.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:46:16.530

听起来您正在寻找[locality-sensitive hashing](http://en.wikipedia.org/wiki/Locality-sensitive_hashing)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T17:21:47.813

一种解决方案是对每个字母进行计数并比较计数数组。计数之间的不匹配意味着字符串绝对不相似。

# social-networking - Social Network data sets that contains a community structure

> ID：10030724
> 
> 赞同：3
> 
> 时间：2012-04-05T14:39:43.103
> 
> 标签：social-networking, cluster-analysis, spectral

I am working on a set of spectral clustering methods that can essentially be used to detect a community structure in a social network. I tried this on a very small data set (Zachary's Karate club) that was available to me. I am looking out for some large networks where I can check the performance of the algorithm. I tried looking the SNAP(snap.stanford.edu) but not getting a data set that contains a well defined community structure. Is there any data set which I can use for my purpose?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T17:11:02.907

[http://www.growmeme.com/sna/visual](http://www.growmeme.com/sna/visual)上的“社交网络分析交互式数据集库”拥有 150 多个数据集，并且能够按大小和是否存在社区信息（除其他外）进行过滤。

![在此处输入图像描述](../Images/d3647b24f7a476184784adc14ac1619e.png)

# asp.net-mvc-3 - Orchard CMS Data Import

> ID：10030725
> 
> 赞同：2
> 
> 时间：2012-04-05T14:39:53.837
> 
> 标签：asp.net-mvc-3, import, orchardcms

I am attempting to import data into Orchard CMS. I have a custom type, made up of parts and fields, and I am using the ImportExport module. I have exported some data from Orchard to ensure the XML schema is correct, but when importing, the only field that seems to be populating is the TitlePart Title. I have randomly generated a GUID for the identifier of each record. Orchard 1.4, ImportExport 1.4.

Example of one item of data:

```
<Orchard>
  <Recipe>
    <Name>Data Import</Name>
    <Author>myaccount</Author>
  </Recipe>
  <Data>
    <OurPropertiesDivision Id="/Identifier=94eff3237c714f98b021905c33d25ea9" Status="Published">
      <LinkField.Link Text="This is a link" Url="http://stackoverflow.com" />
      <MediaPickerField.ImageOne Url="~/test.jpg" Width="100" Height="100" />
      <MediaPickerField.ImageTwo Url="~/test2.jpg" Width="100" Height="100" />
      <MediaPickerField.ImageThree Url="~/test3.jpg" Width="100" Height="100" />
      <TitlePart Title="Test Title" />
      <CommonPart Owner="/User.UserName=myaccount" CreatedUtc="2012-04-04T23:03:39Z" PublishedUtc="2012-04-04T23:03:39Z" ModifiedUtc="2012-04-04T23:03:39Z" />
      <IdentityPart Identifier="94eff3237c714f98b021905c33d25ea9" />
    </OurPropertiesDivision>
  </Data>
</Orchard> 
```

This results in the following when looking at the imported entry:

Content list:

![Orchard Content List](../Images/72cc7c8d7400610336664aa57cffd5c2.png)

Edit screen:

![Orchard Edit Screen](../Images/bf2de5ce153ee7eecd198bd5a5445754.png)

The only field that is making it through the import is the TitlePart. How can I make this work in a way that I can bulk insert any type of field or part with data? I would also like to capture the Container for the Containable part.

EDIT: Adding content type metadata

```
<?xml version="1.0"?>
<!--Exported from Orchard-->
-<Orchard>
  -<Recipe>
    <Name>Generated by Orchard.ImportExport</Name>
    <Author>myaccount</Author>
  </Recipe> -<Metadata>
    -<Types>
      -<OurPropertiesDivision DisplayName="Our Properties - Division" ContentTypeSettings.Draftable="True" ContentTypeSettings.Creatable="True">
        <CommonPart DateEditorSettings.ShowDateEditor="False" OwnerEditorSettings.ShowOwnerEditor="False"/>
        <TitlePart/>
        <OurPropertiesDivision/>
        <ContainablePart/>
        <IdentityPart/>
      </OurPropertiesDivision>
    </Types> -<Parts>
      <CommonPart ContentPartSettings.Attachable="True"/> <TitlePart ContentPartSettings.Attachable="True"/> -<OurPropertiesDivision ContentPartSettings.Attachable="True">
        <ImageOne.MediaPickerField DisplayName="Image One" MediaPickerFieldSettings.Required="False" HtmlFieldSettings.FlavorDefault="html"/>
        <ImageTwo.MediaPickerField DisplayName="Image Two" MediaPickerFieldSettings.Required="False" HtmlFieldSettings.FlavorDefault="html"/>
        <ImageThree.MediaPickerField DisplayName="Image Three" MediaPickerFieldSettings.Required="False" HtmlFieldSettings.FlavorDefault="html"/>
        <Content.HtmlField DisplayName="Content" HtmlFieldSettings.FlavorDefault="html"/>
        <Link.LinkField DisplayName="Link" HtmlFieldSettings.FlavorDefault="html" LinkFieldSettings.LinkTextMode="Required" LinkFieldSettings.TargetMode="NewWindow" LinkFieldSettings.Required="True"/>
      </OurPropertiesDivision> <ContainablePart ContentPartSettings.Attachable="True"/> <IdentityPart ContentPartSettings.Attachable="True"/>
    </Parts>
  </Metadata>
</Orchard> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:55:22.083

我最终分析了管理员生成的数据库插入，并在 SQL 中手动导入数据。

# android - Moving and vanishing lines of code; trouble with Eclipse's XML Editor

> ID：10030727
> 
> 赞同：95
> 
> 时间：2012-04-05T14:39:55.087
> 
> 标签：android, xml, eclipse

Sometimes my code moves on its own or just disappears in the Eclipse XML editor.

![Yikes!](../Images/972f94b2dffcd0ef31a2e0daa066495e.png)

When I highlight the affected code, the highlighted lines try to correct themselves. But when I scroll or drag the mouse in the opposite direction the code shifts again. In essence I will have repeating, missing, *and* broken lines of code being displayed from an otherwise error free file. The files affected *do* compile and if I close / re-open them this problem goes away, for the moment. Any ideas on what's happening?

* * *

**Addition:** [Jeff Axelrod](https://stackoverflow.com/users/403455/jeff-axelrod) provided a link to a new [bug report](https://code.google.com/p/android/issues/detail?id=32849) with Google.

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-08T11:10:21.983

经过一些测试，我发现“自动格式化由可视布局编辑器编辑的 XML”选项（在 Preferences | Android | Editors 中）可能是这里的罪魁祸首。

通过我的测试，我发现在图形布局设计模式下更改属性（例如 layout_gravity）总是会在此选项打开但返回 XML（文本）模式时搞砸文件的视觉显示，但是当它关闭时我没有问题。

如果您想在从图形布局设计模式返回时格式化 XML，只需使用快捷键`Ctrl`++ 。此外，我没有发现使用“保存时格式化”选项有任何问题；即使我在图形布局模式下使用它；因此，当您仍处于图形布局模式时，您可以使用+来保存和格式化您的 XML。`Shift``F``Ctrl``S`

我尝试了其他编辑器选项，例如“显示范围指示器”或“使用字符显示垂直标尺的变化”，但我没有看到激活或取消激活这些选项的行为有任何差异。

最后，纠正文件损坏时的视觉显示；我发现使用快捷方式：`Ctrl`+ `A`、`Ctrl`+ `C`、`Ctrl`+`V`比关闭/重新打开文件要容易一些。这相当于做了一个全选、复制、粘贴；有效地将整个 XML 文件复制到自身之上。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-10-18T00:58:20.850

此错误（最终）已在 ADT 21 中修复。该修复程序现已在 ADT 21 Preview 9 中提供，几分钟前发布，此处：[https ://android-review.googlesource.com/#/c/44936/1](https://android-review.googlesource.com/#/c/44936/1)

你得到奇怪的视觉伪影的原因是，如果一个文件包含损坏的 DOS 行结尾（多个回车，每个回车没有换行符），Eclipse 会变得非常混乱。那是 Eclipse 问题[https://bugs.eclipse.org/bugs/show_bug.cgi?id=375421](https://bugs.eclipse.org/bugs/show_bug.cgi?id=375421)。

修复有两个部分： (1) 首先，修复了 ADT，使其不再将这些 \r\r 序列引入文档。这可以确保您不会获得触发奇怪编辑行为的新文档，但它不会追溯修复具有这些行结尾的旧文档，因此如果您打开它们，您仍然会遇到奇怪的编辑行为。

(2) 其次，有一个新的 lint 检查，用于查找文档中的断行结尾。这会以增量方式运行，因此如果您编辑存在此问题的 XML 文件，ADT 将为该问题添加一个错误标记 - 以及一个快速修复以对文档执行手术以修复它。

简而言之：获取 ADT 21 Preview 9；在您的项目上运行 Lint 并查找有关包含断行结尾的文件的任何投诉，如果发现任何投诉，请应用 quickfix。从现在开始，使用布局编辑器进行进一步编辑应该保持文件格式一致。

仅供参考，相关修复在这里：[https ://android-review.googlesource.com/#/c/44936/](https://android-review.googlesource.com/#/c/44936/)

轻松更新 SDK 工具和 Eclipse ADT 插件的说明如下：[http ://tools.android.com/preview-channel](http://tools.android.com/preview-channel)

-- Tor（来自 Android 工具团队）

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-08-05T00:42:20.210

在 Juno 上仍然遇到这个错误（Eclipse 4.2.0，ADT r20）。

我的解决方法：转到窗口 -> 首选项 -> Android -> 编辑器。我同时选中了“使用*标准 Android XML 格式化 XML...”*和*“使用 Eclipse 设置进行缩进...”*。这为我解决了这个问题。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-10-02T13:48:47.557

**编辑：** 包含更快的方法，所以它被带到了顶部：

`Ctrl`+ `F` -> 像这样填充：

1.  **"查找"**          "\r\r\n"

2.  **"替换"**    "\r\n"

3.  **将“正则表达式”**切换为**ON**

4.  点击**“全部替换”**按钮

5.  `Ctrl`+`A`
6.  取消选择文本。
7.  开心点=）

**原件在这里：** 不要隐藏这个问题，如果你可以解决它。有时甚至关闭 XML 文件也无济于事。

为了修复它，让我们看看它的原因。首先打开“显示空白字符”（*Window > Preferences > General > Editors > Text Editors > Show whitespace characters*）

然后回到您的 XML 文件。

![在此处输入图像描述](../Images/6c535574833fd7175a1a548dea221cf7.png)

在缩放图像中，您可能会看到“\n”-符号颜色的差异；

然后只需将光标放在那个更暗的符号上。
![在此处输入图像描述](../Images/f0628ffe60ab199a17a83cc4f8c5d131.png)

看，有两条线被选为0o...这可能是原因！

所以只需删除它，然后按“Enter”或“Return”按钮添加“\n”符号。 ![在此处输入图像描述](../Images/1945716d46ef08b420286300406aad6b.png)
希望对您有所帮助。

* * *

您还可以找到 endline 的其他符号：
![在此处输入图像描述](../Images/42f2b332947d753792f43c2cbfdb2af3.png)

把它也删掉，你的 XML 就会很好看！

PS对不起超链接，我是新手，所以我不能上传图片或超过2个链接。所以希望你能在没有额外图片的情况下明白这一点；）

PPS 感谢投票的人，现在我可以提供图片了。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-07T11:39:10.997

我遇到了同样的困难，终于找到了解决方法：在编辑器中右键，选择`Source/Cleanup Document`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T09:01:09.763

当这个错误出现在**新版本的 ADT 中时**（这是修复的强制性并且错误不应该经常出现），只需使用 Lint 工具来修复它。

在 Lint 警告中找到它，然后单击该 Lint 警告列表右上角的***黄色灯泡图标。***

希望它会帮助某人

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-19T02:41:40.943

我遇到过同样的问题。以下步骤是解决方案。链接建议它对其他人有用。

1.  转到首选项-> 键
2.  取消绑定复制、粘贴和剪切（点击“应用”，然后点击“确定”）
3.  重复步骤 1
4.  从第 2 步恢复未绑定的命令（我没有恢复剪切，但我相信你会没事的）

请注意，这 3 个命令中的每一个都有 2 个绑定

5.  取消绑定复制和粘贴的辅助功能（保留 ctl+c/ctl+v [复制/粘贴] 绑定）

此时您应该只设置 2 个绑定来执行复制/粘贴（即 ctl+c/ctl+v）

6.  点击应用->确定

[在这里](https://stackoverflow.com/a/10765087/1609073)找到了这个解决方案。

# php - Reconciling Law of Demeter with Models

> ID：10030728
> 
> 赞同：1
> 
> 时间：2012-04-05T14:39:59.147
> 
> 标签：php, mysql, model-view-controller, law-of-demeter

I have a data model object `User`. My app also has some other data model objects, `Fork` and `Options`, for example. Users have forks and branches. My app has to run a lot of queries with some combination of User/Fork/Options etc. information. For example, you can see a page of User's Forks. This would require a query that joins that User (e.g. the logged in user in the session) on Forks.

I don't want to violate the Law of Demeter, and I am also typically against getters (and setters) in general, so I don't want to implement `User::getID()` or `User::getUsername()`.

However, the alternative does not seem much better to me. What has ended up happening is that I implement various methods in `User` to run these queries (e.g. `User::getForks()`). In general this works, but the `User` class has become monolithic which is bad in its own way.

What's more is I'm not sure how I would resolve a query of two data model objects. For example, I could have a `User` with an id and a `Fork` with an id and want to check that the fork belongs to the user. This requires that either the `Fork` exposes its id to the user, the `User` exposes its id to the `Fork`, or both expose their ids to the controller (or whatever else). None of these seem desirable, and I'm not sure which to choose. Is there some other alternative that I'm missing?

In another similar step, I'm not sure of the best way to add information to the view. I have a view object, and typically I use a method like `User::addForksToView(View $view)`, which will run a query or queries and do some processing, but this also increases the size and responsibility of `User`. I think this is a similar problem.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:03:32.463

而不是对象`getForks`中的方法`User`，使用 a`ForksFactory`或类似的东西。工厂可以有 和 之类的`fromUser(User $user)`方法`byId($id)`。这样，`User`对象就没有对对象的隐藏[依赖](http://tutorials.jenkov.com/ood/understanding-dependencies.html#visiblehidden)`Fork`，并且可能对数据库访问有隐藏的依赖。`ForksFactory`依赖于数据库并包含只需要获取数据和创建的代码，`Forks`这就是它知道如何做的全部。由于`Fork`对象不会依赖于数据库，而现在`User`对象不需要知道任何关于`Fork`的，确实`Fork`根本不存在并且`User`不在乎。这是单一用途对象的想法。

至于 getter 和 setter，为什么不公开像 id 和 name 这样的属性呢？或者，您可以使用[魔术方法](http://php.net/manual/en/language.oop5.magic.php) `__get`并`__set`控制哪些属性被视为只读，如果这是您所关心的。否则，您也可以公开这些属性——这是完全可以接受的。

您提到的其他代码听起来也有同样的问题——一个对象，一个目的。理论上，每个对象都应该独立存在，或者在构造函数中注入任何依赖项。您的对象不应要求定义另一个对象，否则其中一个方法将失败。

# padding - 填充文件会改变其内容吗？

> ID：10030730
> 
> 赞同：1
> 
> 时间：2012-04-05T14:40:08.223
> 
> 标签：padding

我正在实现一种将文件拆分为共享的算法，并且我有共享的数量。如果文件大小有余数（在与共享数的模数之后），我将用零填充它。现在，我正在尝试用字符串来做到这一点，当我需要重新组合它们时，我会得到额外的填充。文件也一样吗？或者填充零不会改变文件内容？

如果它确实改变了，有没有办法知道哪些零是填充零？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:34:48.390

是的，向文件中添加任何内容都会改变其内容。在某些情况下，这可能无关紧要，但对于通用解决方案，您永远不应该依赖它。

在您的特定情况下，填充文件是一个坏主意。

如果您有每个文件部分必须适合的固定块大小，则可以用指示已添加多少字节的字节填充文件部分。例如，如果您添加了 7 个字节作为填充，则每个填充字节都应为 0x07。当您稍后重新组合这些部分时，您的程序首先必须剥离填充。在给定的示例中，它将读取该部分的最后一个字节，即 0x07，并得出结论，必须从文件末尾删除七个字节。

这种方法有两个问题：

*   您可以实现的最大填充是 0xff = 255 字节
*   如果不需要填充，则必须添加一个完整的虚拟填充块，因为您的程序无法区分填充字节和原始内容。如果文件部分在 0x01 结束并且不需要填充，则组合程序将从段中删除最后一个字节，从而损坏文件。

如果您只是为了好玩而这样做，您可以查看`split`您可以在 BSD 或 GNU/Linux 上找到的程序的源代码。提示：不需要填充。

# regex - 如果文件或目录存在，则 RewriteCond 跳过规则

> ID：10030731
> 
> 赞同：14
> 
> 时间：2012-04-05T14:40:23.857
> 
> 标签：regex, apache, .htaccess, mod-rewrite, url-rewriting

如果文件或目录存在，我正在尝试调整我的 htacess 文件以跳过重写规则，但是当文件存在时，它将 URL 更改为不同的内容。我不知道为什么会这样。这是我的 htaccess 文件：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f [OR]
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^project/([^/\.]+)/?$ index.php?view=project&project=$1 [L]
RewriteRule ^for/content/ag index.php?view=opening&section=ag [L]
RewriteRule ^for/content/bus index.php?view=opening&section=bus [L]
RewriteRule ^for/content/fcs index.php?view=opening&section=fcs [L]
RewriteRule ^for/content/market index.php?view=opening&section=market [L]
RewriteRule ^for/content/trade index.php?view=opening&section=trade [L]
RewriteRule ^for/content/teched index.php?view=opening&section=teched [L]
RewriteRule ^for/content/([^/\.]+)/?$ index.php?view=content_area&section=$1 [L] 
```

目录 /project/nti 存在，带有一个 index.php 文件。当输入地址 mywebsite.com/folder/project/nti 时，它会更改为 mywebsite.com/folder/project/nti/?view=project&project=nti。我将它应用在示例站点位于子文件夹中的测试服务器上，但实施后，它将位于根 Web 服务器文件夹中。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-05T14:51:39.283

删除额外的`[OR]`并让您的代码如下：

```
# If the request is not for a valid directory
RewriteCond %{REQUEST_FILENAME} !-d
# If the request is not for a valid file
RewriteCond %{REQUEST_FILENAME} !-f
# If the request is not for a valid link
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^project/([^/.]+)/?$ index.php?view=project&project=$1 [L,NC,QSA] 
```

# ember.js - 车把模板中使用的标识符中的空格

> ID：10030741
> 
> 赞同：1
> 
> 时间：2012-04-05T14:41:13.157
> 
> 标签：ember.js, handlebars.js

字段名中可以有空格`Ember.Object`，但是如何呈现它的值呢？

以下 JSFiddle 说明了我的目标：http: [//jsfiddle.net/MikeAski/aTpz4/](http://jsfiddle.net/MikeAski/aTpz4/)

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:52:16.343

我认为这是不可能的，因为对于 Handlebars 看起来你想使用一个名为`my`.

同样在您的示例中，`Uncaught Error: Handlebars error: Could not find property 'my' on object <.MyView:ember147>`会引发错误。

您可以编写自己的 Handlebars 助手，请参阅[http://jsfiddle.net/pangratz666/KAsNN/](http://jsfiddle.net/pangratz666/KAsNN/)

**车把**：

```
<script type="text/x-handlebars" data-template-name="my-template">
    This does work: {{echo "myField"}}
    This does work: {{echo "my field"}}
</script> 
```

**JavaScript**：​</p>

```
Ember.Handlebars.registerHelper('echo', function(propertyName, options) {
    return Ember.getPath(options.contexts[0], propertyName);
}); 
```

上面的助手不知道绑定。对此有一个拉取请求：[https ://github.com/emberjs/ember.js/pull/615](https://github.com/emberjs/ember.js/pull/615)

# javascript - 如何显示所有数字而不仅仅是 1 个数字？

> ID：10030742
> 
> 赞同：0
> 
> 时间：2012-04-05T14:41:29.717
> 
> 标签：javascript, jquery

```
$('.num_questions').each( function() {

$(this).val(qnum);
++qnum;
$(".questionNum").text(qnum); 
```

});

我有一个隐藏的输入 ( `.num_questions`)。现在假设我有 2 个问题，它显示 qnum 1 和 2，但是当我将其发布到下一页时，它会为两个问题显示 qnum '3'，因为这将是下一个问题编号。

所以我想知道的是如何`$(".num_questions").val(qnum);`在发布隐藏输入时不显示下一个问题编号，而是显示它显示的所有问题编号，所以如果我有 2 个问题，对于每个 num_question 它显示qnum 然后将 1 添加到下一个问题的 qnum 上，当我将隐藏的输入发布到下一页而不是两个问题的 qnum '3' 时，这有望使问题 1 的 qnum 1 和问题 2 的 qnum 2 成为可能。

下面是表格：

```
 <form id="QandA" action="insertQuestion.php" method="post" enctype="multipart/form-data">

<div id="detailsBlock">
<table id="question">
<tr>
    <th colspan="2">
        Question Number <span class="questionNum">1</span>
        <input type="hidden" class="num_questions" value="1" name="numQuestion">
    </th>
</tr>

</table>
</form> 
```

现在你看到 span .questionNum，这很好用，因为它为每个问题添加一个问题编号，然后为下一个问题添加 1，因此你得到第一个问题的问题编号 1，第二个问题的问题编号 2 等等。但是问题是我无法发布跨度标签。所以我需要一个隐藏的输入字段才能发布到下一页。但是隐藏的输入值仅显示所有问题的 1 个数字，这将是下一个问题编号，即 2 个问题示例的“3”。我需要它来存储所有的问题编号，这样当我发布它时，它会显示问题编号 1、2、3、4 等。每个问题 1 个问题编号。它适用于跨度，但它不适用于隐藏的输入字段

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:46:59.857

通过`$(this)`在循环中使用，您指的是当前在循环期间关注的特定元素，而不仅仅是`$('.num_questions')`一般：

```
$('.num_questions').each(function() {
    $(this).val(qnum);
    ++qnum;
});​ 
```

# selenium - 使用 Selenium 出现未知原因的 NoSuchElementException

> ID：10030743
> 
> 赞同：2
> 
> 时间：2012-04-05T14:41:47.800
> 
> 标签：selenium, selenium-ide

在为 web 应用程序编写 selenium 测试用例时，我遇到了 xpath 选择器的问题。Selenium 应单击的 HTML 代码元素如下：

```
<a title="Voeg een vak toe" href="#" onclick="javascript:$.colorbox({width:818,href:'/olo-cleanjump/profiel/addVakForm'}); return false;">
  <p class="add">
    <img class="add-icon" src="/olo-cleanjump/static/images/icon_add.png"/>
    Voeg vak toe
  </p>
</a> 
```

用于 firefox 的 Selenium IDE 插件为此提供了以下 selenium 代码：

```
driver.findElement(By.cssSelector("p.add")).click(); 
```

此链接调用的 addVakForm javascript 函数会打开一个颜色框，其中包含以下 HTML（我将其缩短，大约有 30 个类似的 div 类为“lesboek_popup”）：

```
<div id="cboxLoadedContent" style="display: block; width: 776px; overflow: auto; height: 653px;">
  <div id="profielpagina_add">
    <h2>Voeg een vak toe aan je profiel</h2>
    <div class="lesboek_popup">
      <a class="content" href="/olo-cleanjump/profiel/addvak/120776">
        <img src="" alt="">
      </a>
      <p class="caption">
        <a href="/olo-cleanjump/profiel/addvak/120776">Engels</a>
      </p>
    </div>
    <div class="lesboek_popup">
      <a class="content" href="/olo-cleanjump/profiel/addvak/120786">
        <img src="" alt="">
      </a>
      <p class="caption">
        <a href="/olo-cleanjump/profiel/addvak/120786">Biologie</a>
      </p>
    </div>
  </div> 
```

对于测试，我想打开“Biologie”链接。Selenium IDE 为我提供了以下 selenium 代码来执行此操作

```
driver.findElement(By.xpath("//div[@id='profielpagina_add']/div[20]/a")).click(); 
```

选择这个生物链接元素。基于此，我编写了以下测试用例：

```
 Test
public void testAddRemoveVak() throws Exception {
    this.get("");

    // vak 1 toevoegen
    driver.findElement(By.cssSelector("p.add")).click();
    driver.findElement(By.xpath("//div[@id='profielpagina_add']/div[20]/a")).click();

    // vak 2 toevoegen
    driver.findElement(By.cssSelector("p.add")).click();
    driver.findElement(By.xpath("//div[@id='profielpagina_add']/div[20]/a")).click();

    assertEquals(driver.findElements(By.xpath("//li[@class='vak']")).size(), 2);

    // vak 2 verwijderen
    this.get("profiel/removevak/120791");

    assertEquals(driver.findElements(By.xpath("//li[@class='vak']")).size(), 1);
} 
```

那个部分

```
driver.findElement(By.cssSelector("p.add")).click(); 
```

实际上是成功的，所以在这个调用之后应该加载颜色框。然而

```
driver.findElement(By.xpath("//div[@id='profielpagina_add']/div[20]/a")).click(); 
```

导致 NoSuchElementException，而当我检查自己时，这个元素肯定存在于颜色框中（调用/xpath 甚至是由 Selenium IDE 自动生成的）。有谁知道可能导致 NoSuchElementException 的原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T16:03:57.870

当您的弹出窗口出现时，您可能应该等待。尝试使用[隐式等待](http://seleniumhq.org/docs/04_webdriver_advanced.html#explicit-and-implicit-waits)

```
WebDriver driver = new FirefoxDriver();
driver.Manage().Timeouts().ImplicitlyWait(TimeSpan.FromSeconds(10)); 
```

`driver.FindElement(By.LinkText("Biologie")).click()`如果它是您页面上带有文本 Biologie 的唯一链接，您也可以使用 xpath 而不是 xpath

# javascript - 如何使用 jquery-mobile 解决页面导航问题

> ID：10030748
> 
> 赞同：2
> 
> 时间：2012-04-05T14:42:05.763
> 
> 标签：javascript, ajax, jquery-mobile

我有一个带有两个“真实”html 页面的 jquery-mobile 应用程序，但还有更多的`data-role="page"`div。当从第一个真正的 html 页面转到下一个真正的页面时，问题就出现了：导航停止工作。没有自定义 javascript，我只是使用 jqm 库。

当第一个真实页面被加载时，我可以`data-role="page"`使用类似的东西导航项目而不会出现问题`<a href="#oneA">one A</a>`，这将我带到`<div data-role="page" id="oneA">`，类似地 oneB、oneC 等。

如果我转到第二个真实页面，我可以`data-role="page"`毫无问题地使用类似的东西浏览项目`<a href="#twoA">two A</a>`，这将我带到`<div data-role="page" id="twoA">`，以及类似的 twoB、twoC 等。

但**问题是**，如果我单击第一个真实页面上的链接将我带到第二个真实页面（而不是直接点击该页面），那么 jquery mobile 似乎很困惑，并且拒绝切换到任何其他`<div data-role...>`页面。单击任何链接时，它只会停留在第一个数据角色页面上。浏览器悬停中的链接看起来是正确的（`#twoB`例如，它有尾随，但不在那里导航）。

这是 jquery-mobile （我使用的是最新版本：1.0.1）只是简单的崩溃并且我需要分解并编写一些我自己的 javascript 的实例吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T15:28:37.963

缺少的是`rel="external"`锚标记中将您从第一页带到第二页的属性。所以，而不是`<a href="secondPage">second page</a>`，尝试`<a href="secondPage" rel="external">second page</a>`。

# asp.net-mvc - 如何使用 @Html.DropDownListFor 在 asp.net MVC 3 中为 SelectList 描述组合两个 dataTextFields

> ID：10030753
> 
> 赞同：11
> 
> 时间：2012-04-05T14:42:14.570
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, selectlist, html.dropdownlistfor

我正在返回一些存储的联系人以查看 DropDownList，但我无法在我的 SelectList 中包含多个 dataTextField。

目前我有：

```
@Html.DropDownListFor(model => model.Account.AccountContacts, 
         new SelectList(ViewBag.DDContacts, "Contact.ContactID", "Contact.FirstName"),   
         new { @class = "select", style = "width: 100px;" }) 
```

我想拥有：

```
@Html.DropDownListFor(model => model.Account.AccountContacts, 
        new SelectList(ViewBag.DDContacts, "Contact.ContactID", "Contact.FullName"),         
        new { @class = "select", style = "width: 100px;" }) 
```

它结合了 FirstName 和 LastName 属性。

更新：我知道扩展联系人属性，我很好奇是否有一种简化的方法可以在视图或控制器中完成此操作。[我在这里](https://stackoverflow.com/questions/2758734/how-can-i-combine-two-fields-in-a-selectlist-text-description)尝试了两种解决方案均无济于事。[如何在 SelectList 文本描述中组合两个字段？](https://stackoverflow.com/questions/2758734/how-can-i-combine-two-fields-in-a-selectlist-text-description)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-05T14:55:32.283

扩大联系

```
public partial class Contact
{
   private string _nameFull;
   public string NameFull
   { 
      get{return FirstName + " " + LastName;}
   }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-07-22T16:17:36.353

我意识到这个问题有一个认可的答案，尽管我不相信这是提问者想要的。我遇到了这个问题，这就是我解决它的方法：

```
@Html.DropDownListFor(model => model.Account.AccountContacts, 
     new SelectList((from c in ViewBag.DDContacts.ToList() select new {
         ID_Value = c.Contact.ContactID,
         FullName = c.Contact.FirstName + " " + c.Contact.LastName
     }), "ID_Value", "FullName"),   
     new { @class = "select", style = "width: 100px;" }) 
```

**工作原理：** 我们使用 linq 从列表中选择特定数据并将其放入新对象中。这个新对象将只包含两个属性，“ID_Value”和“FullName”。现在我们的 DropDownListFor 可以使用这个新对象来实现我们想要的输出。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-07T02:35:12.403

我做了这样的事情：

控制器：

```
ViewBag.Regiones = from p in modeloDB.Regiones.ToList() select new {
    Id = p.Id,
    Nombre = p.Codigo + " - " + p.Nombre
}; 
```

在视图中，我这样做了：

```
@Html.DropDownListFor(model => model.Region,
new SelectList(@ViewBag.Regiones, "Id", "Nombre"),
new { @class = "comboBox" })
@Html.ValidationMessageFor(model => model.Region) 
```

它非常适合我！我希望它仍然有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T15:01:06.870

转到您的模型并创建一个具有相同实体名称的新联系人类。声明命名空间时要小心。
这里有一些代码会有所帮助（我希望）：

```
public partial class Contact
{ 
   [DataMember]
   public string FullName{ get;set;}
} 
```

在您的控制器中，只需执行以下操作：

```
data.FullName =data.Firstname+" "+data.LastName; 
```

应该这样做。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-05T15:14:37.580

`Contact`向您的类添加一个属性，该属性返回`FullName`但考虑到 null、空或空格的名字或姓氏：

```
[DataMember]
public string FullName
{
    return string.Join(
        " ",
        new string[] { this.FirstName, this.LastName }
            .Where(s => !string.IsNullOrWhiteSpace(s))));
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-05T15:41:17.300

这就是我将如何做到的。只需修改代码以适合您的场景。我只是为了演示目的而更改我的代码。

在我看来，我会有以下内容：

```
@model MyProject.ViewModels.MyViewModel

<table>
     <tr>
          <td><b>Bank:</b></td>
          <td>
               @Html.DropDownListFor(
                    x => x.BankId,
                    new SelectList(Model.Banks, "Id", "IdAndName", Model.BankId),
                    "-- Select --"
               )
               @Html.ValidationMessageFor(x => x.BankId)
          </td>
     <tr>
</table> 
```

我的视图模型：

```
public class MyViewModel
{
     public int BankId { get; set; }
     public IEnumerable<Bank> Banks { get; set; }
} 
```

我的银行班：

```
public class Bank : IEntity
{
     public int Id { get; set; }
     public string Name { get; set; }
     public bool IsActive { get; set; }

     // This property will bring back the concatenated value.
     // If the Id is 1 and Name is My Bank,
     // then the concatenated result would be 1: My Bank
     public string IdAndName
     {
          get
          {
               return (Id.ToString() + ": " + Name);
          }
     }
} 
```

在我的控制器动作中：

```
public ActionResult MyActionMethod()
{
     MyViewModel viewModel = new MyViewModel
     {
          Banks = bankService.GetAll()  // Database call to get all the banks
     };

     return View(viewModel);
} 
```

我希望这有帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-05T14:47:36.483

向您的联系人类添加一个名为 FullName 的属性，该属性仅返回 FirstName + " " + LastName。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-05T16:33:21.083

您可以按原样从 DB 中获取联系人...并使用 LINQ 您可以查询第一个集合，返回另一个具有 ID 和 FULLNAME 的集合...然后使用此集合填充您的下拉列表。

那只是为了帮助你的好奇心......我认为最好的方法是为了简单起见扩展你的 Contact ViewModel。

# forms - Symfony2 形式和 Doctrine OneToOne 关系

> ID：10030754
> 
> 赞同：0
> 
> 时间：2012-04-05T14:42:14.310
> 
> 标签：forms, symfony, doctrine-orm

我有 2 个实体：`User`和`Avatar`. 每个用户可以从列表中选择一个头像，所以我认为这是一个 One2One 单向关系。问题是当我保存表单时该字段`avatar_id`始终`NULL`在数据库中。

让我们看看代码：

```
class User implements UserInterface
{
    /**
     * @var int $avatarId
     * 
     * @ORM\Column(name="avatar_id", type="integer", nullable=true)
     */    
    private $avatarId;

     /**
     * @var Avatar
     * 
     * @ORM\OneToOne(targetEntity="Avatar", cascade={"persist", "remove"})
     */
    private $avatar;  

} 
```

当我`var_dump`在保存之前使用用户对象时，该字段`avatarId`包含该`Avatar`对象但未保存 id。我做错了什么？

```
["avatarId":"Test\UserBundle\Entity\User":private]=>
    object(Test\UserBundle\Entity\Avatar)#419 (5) {
        ["id":"Test\User\Bundle\Entity\Avatar":private]=>
            int(3)
        ["imageName":"Test\UserBundle\Entity\Avatar":private]=>
            string(14) "death-dark.jpg"
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:49:03.283

您不需要该`avatarId`字段，因为该`avatar`字段会自动处理它。您可以使用[`@JoinColumn`](http://readthedocs.org/docs/doctrine-orm/en/latest/reference/annotations-reference.html#annref-joincolumn)注释显式设置引用列名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T14:52:11.677

一些东西：

ID 列通常使用以下注释生成：

```
/**
 * @ORM\Id @ORM\Column(type="integer")
 * @ORM\GeneratedValue
 */ 
```

这告诉 ORM 在您创建新对象时自动生成一个值，因此当您转储该对象时，它将在持久化之前具有一个值。

以及关于您的 OneToOne 关系的注释，如果该列表中的多个人可以使用 Avatars，那将是 ManyToOne 关系（许多用户对一个头像，一个头像对多个用户）。

# javascript - 使用 javascript/JQuery 控制 Piecemaker 2

> ID：10030756
> 
> 赞同：2
> 
> 时间：2012-04-05T14:42:15.667
> 
> 标签：javascript, jquery, flash

[Piecemaker 2](http://www.modularweb.net/#/en/piecemaker)太酷了！虽然我不是flash迷，但还是得交给他们……好看又酷又顺滑！

不过有一件事......有没有办法使用javascript / jquery来控制它？更具体地说，我希望能够： - 开始/暂停转换 - 动态更改其内容（图像等）

我要求太多了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T15:29:58.263

e不能不修改 Flash 代码。您必须在 Flash 中设置权限才能接受通信，也没有您不知道的原始来源，或者在哪里引用 swf 脚本化的资产：例如；确定 SWF 内交互性的变量、精灵、占位符和函数。

您会发现转换是用库编码的，因此不可能简单地暂停 SWF，因为也只有 1 帧。

您将需要引用该脚本动画，并且它可能根本不包含暂停方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T14:23:33.393

我相信[这里](https://stackoverflow.com/questions/2653710/trigger-flash-button-object-via-javascript)有详细的方法。不幸的是，我的闪光技能不存在。有闪光技能的人可以试一试吗？Piecemaker 2 是一段很酷的代码，我认为很多人都可以使用 javascript 来控制它。

# c# - 更改 Windows Phone 应用程序的 WritableBitmap 对象

> ID：10030757
> 
> 赞同：1
> 
> 时间：2012-04-05T14:42:18.393
> 
> 标签：c#, image, windows-phone-7, image-capture

总之，我有一个基本的 Windows 7 Phone 应用程序，我刚刚完成了一个裁剪页面，用户可以在其中裁剪使用手机相机拍摄的图像。如果`cameraCapTask_Completed`我设置应用程序的全局`WritableBitmap`

```
public static WriteableBitmap capturedImage; 
```

如下

```
void cameraCapTask_Completed(object sender, PhotoResult e)
{
    if (e.TaskResult == TaskResult.OK && e.ChosenPhoto != null)
    {
        // Take JPEG stream and decode into a WriteableBitmap object.
        App.capturedImage = PictureDecoder.DecodeJpeg(e.ChosenPhoto); 
```

当我拍照时，我将它传递给`CropProcessPage`构造函数中的裁剪页面，我通过以下方式在页面中设置图像

```
public CropProcessPage()
{
    InitializeComponent();

    // Set the text and display captured image.
    imageMain.Source = App.capturedImage; 
```

这行得通。但是，当我返回主页并重新拍摄/拍摄另一张图像时，当我尝试使用新图像时，会显示旧图像（拍摄的第一个图像）。构造函数被调用，相机捕获的事件也被调用（设置新图像）。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T18:06:31.960

在 CropProcessPage 中

移动线

```
imageMain.Source = App.capturedImage; 
```

到

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
// Set the text and display captured image.
    imageMain.Source = App.capturedImage;
} 
```

# google-maps - jquery-ui-map 用折线拟合边界？

> ID：10030760
> 
> 赞同：2
> 
> 时间：2012-04-05T14:42:23.223
> 
> 标签：google-maps, jquery-plugins, jquery-mobile, google-polyline, jquery-ui-map

我正在使用 jQuery Mobile 开发移动应用程序。我还使用插件“jquery-ui-map”来制作我的地图（仅使用带有 jQ​​M 的 GMap 有助于解决显示问题）。

我可以在地图上添加折线并且效果很好。但是当我尝试使用 fitBounds 方法时，它不起作用。事实上，它缩小了很多。但不在我的范围内。

这是我的代码：

```
// Added some data, so you can understand the structure
// of variable "plan"
plan[0].lat_a = 45.4681;    plan[0].lng_a = -73.7414;
plan[0].lat_b = 45.6797;    plan[0].lng_b = -74.0386;
plan[1].lat_a = 45.6797;    plan[1].lng_a = -74.0386;
plan[1].lat_b = 48.7753;    plan[1].lng_b = -64.4786;

var polylinesCoords = new Array();
var bounds = new google.maps.LatLngBounds();

// Starting point
var LatLng = new google.maps.LatLng(plan[0].lat_a, plan[0].lng_a);
bounds.extend(LatLng);

// Building the polyline coords and bounds
for (var x=0; x<plan.length; x++) {
    polylinesCoords.push(new google.maps.LatLng(plan[x].lat_a, plan[x].lng_a), new google.maps.LatLng(plan[x].lat_b, plan[x].lng_b));
    LatLng = new google.maps.LatLng(plan[x].lat_b, plan[x].lng_b);
    bounds.extend(LatLng);
}

// Drawing polyline on map
$('#map_canvas').gmap('addShape', 'Polyline', {
    'path': polylinesCoords,
    'strokeColor': '#c00',
    'strokeThickness': 5
});

// «Focus» map on polyline with bounds
var map = $("#map_canvas").gmap("get", "map");
map.fitBounds(bounds); 
```

除了最后一行之外，此代码段中的所有内容似乎都运行良好。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-19T08:04:10.280

您可能错过了将地图居中放置在您的任何图钉上。我让你的代码使用这行代码

```
$('#map_canvas').gmap('option', 'center', (new google.maps.LatLng(plan[0].lat_a,plan[0].lng_a))); 
```

# facebook - 如何检索专辑资料facebook的ID

> ID：10030770
> 
> 赞同：2
> 
> 时间：2012-04-05T14:42:46.787
> 
> 标签：facebook, facebook-php-sdk, photo

我寻求如何检索个人资料专辑 facebook 的 id 我找到了这段代码

```
$albums = $facebook->api("/me/albums");

foreach($albums["data"] as $item){
    echo $item["type"]." *********** ".$item["id"]."<br />";
    /if($item["type"] == "profile"){
        $album_id = $item["id"];
        break;
    }

} 
```

但不幸的是，他只显示了 25 个相册，如果用户拥有超过 25 个相册，您将无法恢复其个人资料照片 abum 的 id 非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:11:54.430

尝试将限制参数设置为更高的值 -`$facebook->api("/me/albums?limit=500");`

如果这没有帮助，你得到的响应中应该有 prev/next-URL，所以你必须遵循这些。

# javascript - 回发 javascript

> ID：10030774
> 
> 赞同：0
> 
> 时间：2012-04-05T14:43:14.397
> 
> 标签：javascript, jquery, asp.net

当用户离开我想给消息的页面时，你想离开吗？我在javascript中的函数pageUnload（）事件中处理这个。但是我不想在页面回发中调用它，当他们导航到不同的页面时我想调用它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:45:11.460

调查[`window.onbeforeunload`](https://developer.mozilla.org/en/DOM/window.onbeforeunload)。

请注意，Firefox 4 及更高版本不会向用户显示自定义消息（但它们会显示一个对话框，询问用户是否要离开）。Safari、Chrome 和 IE 都会。

# opencl - Profiler 显示 OpenCL 未使用所有可用寄存器

> ID：10030782
> 
> 赞同：1
> 
> 时间：2012-04-05T14:43:42.413
> 
> 标签：opencl, gpgpu

这是来自 NVIDIA Compute Visual Profiler 的内核占用分析的副本：

```
Kernel details : Grid size: 300 x 1, Block size: 224 x 1 x 1
Register Ratio      = 0.75  ( 24576 / 32768 ) [48 registers per thread] 
Shared Memory Ratio = 0 ( 0 / 49152 ) [0 bytes per Block] 
Active Blocks per SM    = 2 : 8
Active threads per SM   = 448 : 1536
Occupancy       = 0.291667  ( 14 / 48 )
Achieved occupancy  = 0.291667  (on 14 SMs)
Occupancy limiting factor   = Registers 
Warning: Grid Size (300) is not a multiple of available SMs (14). 
```

我是 openCL 的新手，我做了很多优化以减少使用的寄存器数量，以便可以在 SM 上启动 3 个并发块。然而，分析器只显示只有 2 个块可以同时运行，并且限制因素是寄存器。但问题是很明显，我的内核每个块只使用 224 x 48 = 10752 个寄存器，因此能够运行 3 个块（即 224 x48 x 3 = 32256 个寄存器 / 32768 个可用寄存器）。当我将每个块的线程数减少到 208 时，问题仍然存在，这意味着它应该只对 3 个块使用 208 x 48 x 3 = 29952 / 32768...

一开始我认为是本地内存的原因，但是我对本地内存的计算表明它应该能够启动3块/ SM。而且我不知道为什么探查器没有显示共享内存比率，尽管我的内核使用本地内存。

谢谢你的帮助。

# mysql - 一起使用 ORDER BY 和 GROUP BY

> ID：10030787
> 
> 赞同：55
> 
> 时间：2012-04-05T14:43:58.000
> 
> 标签：mysql, sql, group-by, greatest-n-per-group

我的表看起来像这样（我正在使用 MySQL）：

```
m_id | v_id | timestamp
------------------------
6    |   1  | 1333635317
34   |   1  | 1333635323
34   |   1  | 1333635336
6    |   1  | 1333635343
6    |   1  | 1333635349 
```

我的目标是每个 m_id 一次，并按最高时间戳排序。

结果应该是：

```
m_id | v_id | timestamp
------------------------
6    |   1  | 1333635349
34   |   1  | 1333635336 
```

我写了这个查询：

```
SELECT * FROM table GROUP BY m_id ORDER BY timestamp DESC 
```

但是，结果是：

```
m_id | v_id | timestamp
------------------------
34   |   1  | 1333635323
6    |   1  | 1333635317 
```

我认为这是因为它首先执行 GROUP_BY 然后对结果进行排序。

有任何想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-04-05T14:48:04.213

一种正确使用的方法`group by`：

```
select l.* 
from table l
inner join (
  select 
    m_id, max(timestamp) as latest 
  from table 
  group by m_id
) r
  on l.timestamp = r.latest and l.m_id = r.m_id
order by timestamp desc 
```

这是如何工作的：

*   `m_id`选择子查询中每个不同的最新时间戳
*   仅从与子查询中的行匹配的行中选择行`table`（此操作 - 执行连接，但未从第二个表中选择列，它仅用作过滤器 - 被称为[“半连接”](http://en.wikipedia.org/wiki/Relational_algebra#Semijoin_.28.E2.8B.89.29.28.E2.8B.8A.29)，以防您很好奇）
*   对行进行排序

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-05T14:55:10.753

如果您真的不关心您将获得哪个时间戳，并且`v_id`对于给定的时间戳始终相同，`m_i`您可以执行以下操作：

```
select m_id, v_id, max(timestamp) from table
group by m_id, v_id
order by max(timestamp) desc 
```

现在，如果`v_id`给定的更改，`m_id`那么您应该执行以下操作

```
select t1.* from table t1
left join table t2 on t1.m_id = t2.m_id and t1.timestamp < t2.timestamp
where t2.timestamp is null
order by t1.timestamp desc 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-03-22T06:01:42.793

这是最简单的解决方案

```
select m_id,v_id,max(timestamp) from table group by m_id; 
```

按 m_id 分组，但获取每个 m_id 的最大时间戳。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-01-28T06:01:59.923

你可以试试这个

```
 SELECT tbl.* FROM (SELECT * FROM table ORDER BY timestamp DESC) as tbl
 GROUP BY tbl.m_id 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-05-18T02:03:33.713

SQL>

```
SELECT interview.qtrcode QTR, interview.companyname "Company Name", interview.division Division 
FROM interview 
JOIN jobsdev.employer 
    ON (interview.companyname = employer.companyname AND employer.zipcode like '100%')
GROUP BY interview.qtrcode, interview.companyname, interview.division
ORDER BY interview.qtrcode; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-11-05T08:36:44.967

当我一开始试图理解问题和答案时，我感到很困惑。我花了一些时间阅读，我想做一个总结。

1.  OP的例子有点误导。起初我不明白为什么接受的答案是接受的答案。我认为OP的要求可以简单地满足

```
select m_id, v_id, max(timestamp) as max_time from table
group by m_id, v_id
order by max_time desc 
```

然后我又看了一下接受的答案。而且我发现实际上OP想要表达这一点，例如：

```
m_id | v_id | timestamp
------------------------
6    |   1  | 11
34   |   2  | 12
34   |   3  | 13
6    |   4  | 14
6    |   5  | 15 
```

他想**仅**基于( )和 ( )选择**所有列**。**`group by``m_id``order by``timestamp`**

 **那么上面的sql就不行了。如果您仍然不明白，请想象您的列数多于 `m_id | v_id | timestamp`, 例如`m_id | v_id | timestamp| columnA | columnB |column C| ...`. 使用`group by`，您只能在结果中选择那些“分组依据”列和聚合函数。

到目前为止，您应该已经理解了公认的答案。`row_number`更重要的是， MySQL 8.0 中引入了检查功能：

[https://www.mysqltutorial.org/mysql-window-functions/mysql-row_number-function/](https://www.mysqltutorial.org/mysql-window-functions/mysql-row_number-function/)

> 2.  查找每组的前 N ​​行

它的作用与公认的答案相似。

2.  有些答案是**错误**的。我的 MySQL 给了我错误。

```
select m_id,v_id,max(timestamp) from table group by m_id; 
```

@abinash sahoo

```
SELECT m_id,v_id,MAX(TIMESTAMP) AS TIME
 FROM table_name 
 GROUP BY m_id 
```

@Vikas Garhwal

错误信息：

```
[42000][1055] Expression #2 of SELECT list is not in GROUP BY clause and contains nonaggregated column 'testdb.test_table.v_id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2016-11-18T16:22:33.513

只是你需要用 asc 来描述。编写如下查询。它将按升序返回值。

```
SELECT * FROM table GROUP BY m_id ORDER BY m_id asc; 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2018-10-02T13:18:25.253

为什么搞得这么复杂？这行得通。

```
SELECT m_id,v_id,MAX(TIMESTAMP) AS TIME
 FROM table_name 
 GROUP BY m_id 
```**

# javascript - Eclipse 可以在不同的行上格式化逗号分隔的语句（var a = 1, b=2;）吗？

> ID：10030789
> 
> 赞同：9
> 
> 时间：2012-04-05T14:44:09.733
> 
> 标签：javascript, eclipse, jsdt

我正在使用 Eclipse JSDT 并且默认格式设置更改为

```
var a = 1,
    b = 2; 
```

在一条丑陋的线上。

格式化前的样式是 JSLint 推荐的，所以我想知道 Eclipse 可以设置成这样格式化吗？现有的格式化程序设置不提供对逗号语句的控制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-22T09:08:21.503

以下 JavaScript Beautifier 插件可用于 Eclipse。

[https://github.com/atlanto/eclipse-javascript-formatter](https://github.com/atlanto/eclipse-javascript-formatter)

它可用于跨越单个语句 - 将多个变量声明分成多行。

文件中提供了有关使用上述插件的更多信息`README.md`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-07T07:41:54.670

我想它有点晚了，但我这样做：

```
var container = require('../core/container'),
/**/uuid = require('node-uuid'),
/**/validations = require('../util/validations'); 
```

或者我这样做：

```
var container = require('../core/container'), //
uuid = require('node-uuid'), //
validations = require('../util/validations'); 
```

第二个将变量转移到行首，但这是你必须接受的权衡。

# jsp - 如何在 JSP 中获得重写的 URL？

> ID：10030790
> 
> 赞同：0
> 
> 时间：2012-04-05T14:44:11.503
> 
> 标签：jsp, url-rewriting

我在这样的地址有一个 JSP 页面：

> [http://example.com/foo/bar/rawr/something.jsp](http://example.com/foo/bar/rawr/something.jsp)

当我输出`request.getRequestURL()`时，我得到了完全不同的东西：

> [http://111.111.111.111/rawr/something.jsp](http://111.111.111.111/rawr/something.jsp)

请注意，域已更改为 IP 并且`/foo/bar`丢失了。如何获取浏览器使用 JSP 请求的真实 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T16:10:12.717

如果 Java EE 服务器前面有代理（例如 Apache HTTPD），就会发生这种情况。特定代理可以（应该）将原始请求 URL 设置为请求标头。至少，所有自尊的代理人都这样做。

您可以按如下方式爬取所有请求标头以找到它：

```
for (String name : Collections.list(request.getHeaderNames())) {
    System.out.println(name + "=" + Collections.list(request.getHeaders(name)));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:35:46.310

您可以使用以下内容来获取不包括域的重写 URL：

```
String rewrittenURL = request.getHeader("REDIRECT_URL"); 
```

# php - 可以使用 PHP 生成时事通讯内容吗？

> ID：10030791
> 
> 赞同：1
> 
> 时间：2012-04-05T14:44:13.413
> 
> 标签：php, newsletter

我管理现场音乐场所的时事通讯，主站点上的节目列表/日历是使用 PHP 生成的。有没有办法通过 php 在时事通讯中生成内容？

例如，我创建 newsletter.php 文件，将代码上传到我们的时事通讯服务提供商，当有人打开邮件时，他们的电子邮件中会显示最新列表。

截至目前，我只看到了我想查看日历的部分 php 代码......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:45:37.407

您可以使用任何脚本语言生成电子邮件的内容，但只能*在*发送之前。发送电子邮件后，它必须采用电子邮件客户端可以理解的格式（例如纯文本或 HTML）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:12:44.803

用php发邮件也很方便，有这个[`mail`](http://www.php.net/manual/en/function.mail.php)功能。
您可以从您的 php 模板生成电子邮件，如果它看起来像您想要的那样，请单击一个按钮并将该电子邮件发送给您邮件列表中的人。

听起来您有一个时事通讯递送服务，但这是另一种选择。

# pdf - PDF到JPG本地转换

> ID：10030792
> 
> 赞同：0
> 
> 时间：2012-04-05T14:44:18.080
> 
> 标签：pdf, converter, jpeg

我正在寻找一种解决方案，允许用户将可能多页的 PDF 文件转换为 JPG。解决方案必须是本地的，由于安全问题，在线解决方案是不行的，而且它必须尽可能简单，以便非 IT 人员可以轻松使用它。许可不是问题，但更希望它是 GPL。任何人都可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T15:05:34.040

[Ghostscript](http://www.ghostscript.com/download/)，带有类似的命令行

```
gs -sDEVICE=jpeg -sOutputFile=page%02d.jpg -r150 -dNOPAUSE -dBATCH file.pdf 
```

其中 150 是以每英寸点数为单位的分辨率。您可以将其包装在一些提供更好用户界面的脚本中。

# objective-c - 根据字典中的参数合并两个由字典组成的 NSArray

> ID：10030793
> 
> 赞同：3
> 
> 时间：2012-04-05T14:44:18.437
> 
> 标签：objective-c, merge, nsmutablearray, filtering

我有一个`NSMutableArray`和一个`NSArray`。两者都由`NSDictionarys`本身的元素组成。两者的示例结构如下：

```
NSMutableArray
[
    {
        objectId = 4274;
        name = orange;
        price = 45;
        status = approved;
    },
        {
        objectId = 9035;
        name = apple;
        price = 56;
        status = approved;
    },
        {
        objectId = 7336;
        name = banana;
        price = 48;
        status = approved;
    }
    .
    .
    .
    .
] 
```

NSAraay 是

```
NSArray
[
    {
        objectId = 4274;
        name = orange;
        price = 106;
        status = not_approved;
    },
        {
        objectId = 5503;
        name = apple;
        price = 56;
        status = approved;
    }
] 
```

我想要的是合并这两个数组，这样，如果 in 中的任何元素与 in中的任何元素`NSArray`相同，则 element in应该覆盖在 element in 上。`objectId``NSMutableArray``NSArray``NSMutableArray`

所以在这种情况下，最终合并的数组应该是这样的

```
MergedArray
    [
        {
            objectId = 4274;
            name = orange;
            price = 106;
            status = not_approved;
        },
            {
            objectId = 9035;
            name = apple;
            price = 56;
            status = approved;
        },
            {
            objectId = 7336;
            name = banana;
            price = 48;
            status = approved;
        },
           {
            objectId = 5503;
            name = apple;
            price = 56;
            status = approved;
        }
        .
        .
        .
        .
    ] 
```

我知道的唯一方法是遍历两个数组并合并。有没有更好的办法？任何帮助将不胜感激。

**编辑**：

按照 dasblinkenlights 的建议，我按照以下方式进行了操作

```
 -(NSMutableArray*)mergeTwoArray:(NSArray*)array1 :(NSArray*)array2
    {
//array1 will overwrite on array2
    NSSet* parentSet = [NSSet setWithArray:array2];

        NSMutableDictionary *dict = [NSMutableDictionary dictionary];
        for (NSDictionary *item in parentSet) 
           [dict setObject: item forKey: [item objectForKey:@"objectId"]];

        NSLog(@"initial dictionary is %@",dict);
        for (NSDictionary *item in array1)            
            [dict setObject: item forKey: [item objectForKey:@"objectId"]];

        NSLog(@"final dictionary is %@ with all values %@", dict,[dict allValues]);

        return [NSMutableArray arrayWithArray:[dict allValues]];
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:52:53.003

由于您的`objectId`值可以用作唯一键，因此您可能会在旁边创建一个，使用第一个数组中的对象`NSMutableDictionary`填充它，使用值作为键，遍历第二个数组，进行覆盖，最后收获结果进入您的最终输出。`NSDictionary``objectId``NSMutableDictionary`

请注意，仅当您的数组相对较长（1000 多个项目）时，此方法才*可能有用。*如果您处理 10..100 个项目，我不会打扰，并按照您的建议编写两个嵌套循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T14:54:41.687

我建议遍历两个数组并合并，但首先对它们进行排序。排序后，您可以在 O(N) 时间内合并两个数组。对于大多数目的，这几乎是您能获得的最快速度，并且只需要很少的代码。

如果它们足够大以至于排序成为瓶颈，您可以使用`NSSet`: 首先将（元素的）覆盖数组放入集合中，然后添加原始数组的元素。但是你必须为你的元素实现一个 isEqual 方法。在这种情况下，这意味着您的元素将不再是`NSDictionary`，而是继承自`NSDictionary`但实现 isEqual 方法以比较对象 ID 字段的类。

因为`NSSet`提供了摊销的常数时间访问，所以如果数组很大，这会更快，因为没有排序阶段。

# php - 替换文件中的一行而不重写整个文件（在 PHP 中）

> ID：10030804
> 
> 赞同：4
> 
> 时间：2012-04-05T14:45:01.153
> 
> 标签：php, fopen, fwrite, fread

假设我有一个大小适中的文本文件（~850kb，10,000+ 行）

我想替换分布在文件中的特定行（或几行）。

当前执行此操作的方法包括重写整个文件。我使用的当前方法是逐行读取整个文件，写入 .tmp 文件，完成后，我将 tmp 文件重命名（）为原始源文件。

它有效，但速度很慢。当然，随着文件的增长，执行时间也会增长。

是否有另一种方法（使用 PHP）来完成工作，而无需在每次需要替换或删除一两行时重写整个文件？

谢谢！我环顾四周，在stackoverflow上找不到这个答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T14:55:05.993

如果替换的大小与原始行的大小完全相同，那么您只需`fwrite()`在文件中的该位置即可，一切都很好。但如果它的长度不同（更短**或**更长），您将不得不重写替换后的文件部分。

没有办法解决这个问题。较短的“新”行将在文件中留下空白，较长的“新”行将覆盖下一行的第一部分。

基本上，您是在问是否可以在另一块板的中间插入一块木头，而无需移动原始板。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T15:01:26.413

您不能，因为文件存储在通用文件系统上的方式。一个文件总是占用一个或多个“块”磁盘空间，其中块的大小例如为 4096 字节。一个文件只有一个字节的数据，仍然会占用一个完整的块（占用 4096 字节的可用磁盘空间），而一个 4097 字节的文件将占用两个块（占用 8192 字节）。

如果从文件中删除一个字节，它所占用的块之一内将有一个字节的间隙，这是不可能存储在磁盘上的。您必须将所有其他字节移动一个字节到文件的开头，这将影响当前和所有后续块。

反过来，在块的中间添加字节，也会出现同样的问题：您将有一个或多个字节不再适合 4096 字节，因此它们必须转移到下一个块，依此类推，直到到达文件（和所有块）的末尾。

块中唯一可以有未占用字节的地方是形成文件的最后一个块的末尾。

# java - 可以对线程的这方面进行一些解释

> ID：10030805
> 
> 赞同：0
> 
> 时间：2012-04-05T14:45:03.260
> 
> 标签：java, multithreading, process

所以我有一个实现 Runnable 的 Java 类。在 run 方法中，我得到了以下代码，但我不完全理解为什么它会以看起来的方式工作，并希望有人可以向我解释。

代码是：

```
public void run() {
    Process p = null;
    ProcessBuilder builder = new ProcessBuilder();
    builder.redirectErrorStream(true);

    p = builder.command("/opt/program/testscript.sh").start();

    BufferedReader br = new BufferedReader(new InputStreamReader(p.getInputStream()));
    String line;

    try {
    while ((line = br.readLine()) != null) {
        log.info(line);
    }

    boolean running = true;
    while(running) {
        p.waitFor();
        running = false;
    }       

    } catch (IOException e) {
        e.printStackTrace();
    } catch (InterruptedException e) {
        e.printStackTrace();
        p.destroy();
    }
} 
```

因此，最重要的部分是从正在运行的进程中获取输出并显示它。中间部分似乎是代码等待线程处理的地方。据我了解，代码应该停止并在`p.waitFor()`命令的while循环中等待，直到线程完成，然后整个事情应该结束。但是，在线程运行时会继续显示输出，因此很明显顶部的 while 循环仍在被命中。

线程一直是我的弱点，显然我只是没有完全掌握这里发生的事情。该代码虽然有效，但我想它是有效的。虽然也许它没有按应有的方式编码？无论如何，非常感谢您的帮助，谢谢。

**更新**

谢谢大家的信息。while(running) 循环没有做任何事情是有道理的。我会删除它。我在上面添加了我之前没有提供的其余代码，以提供更多上下文，以防有人需要进一步添加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:52:28.147

顶部循环将一直运行，直到所有输入`br`都用完，然后线程应该等待进程`p`完成运行。

也许你看到了连续的输出，因为还有输入`br`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T14:55:20.583

`p.waitFor()`是等待进程终止的线程，它不是等待“直到线程完成”。如果线程在它等待的进程终止之前被中断（意味着程序的另一部分引用该线程选择调用`interrupt()`它，通常是因为程序正在关闭），则终止`p.destroy()`该进程。waitFor 周围的 while 循环是无用的。

您正在查看实现 Runnable 的代码，但您没有说明使用该 Runnable 创建线程的位置。去寻找那部分，我希望使用该 Runnable 创建不同的线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T14:56:09.223

`br`当填充的人关闭它时，第一个循环停止。

`p.waitFor()`确实等到`p`完成。循环有点无效，因为它只执行一次，所以你不妨删除它。

Sooo ...假设`p`在完成并退出之前会填满 br，`waitFor`则只需等待很短的时间，可能根本不需要。

为了更准确地了解正在发生的事情，需要后面的代码`p`，无论填充什么`br`以及这些事情是如何开始的。

# java - 将可调用线程作为守护进程

> ID：10030808
> 
> 赞同：3
> 
> 时间：2012-04-05T14:45:11.017
> 
> 标签：java, multithreading

如何将可调用线程作为守护线程？

这是我正在尝试的。我正在尝试执行一组线程，其中一个线程没有完成并进入无限循环。它所做的是，即使所有代码语句都已执行，程序的主线程也不会终止。之后主线程进入挂起模式。

这是相同的代码片段。

```
public class MyThread implements Callable<String> {

    private int value;

    public MyThread(int value) {
        this.value = value;
    }

    @Override
    public String call() throws Exception {

        //Thread.currentThread().setDaemon(true);

        System.out.println("Executing - " + value);

        if (value == 4) {
            for (; ; );
        }

        return value + "";
    }
} 
```

主程序

```
public class ExecutorMain {

    public static String testing() {    
        ExecutorService executor = null;
        List<Future<String>> result = null;
        String parsedValue = null;
        try {
            executor = Executors.newSingleThreadExecutor();

            List<MyThread> threads = new ArrayList<MyThread>();

            for (int i = 1; i < 10; i++) {
                MyThread obj = new MyThread(i);
                threads.add(obj);
            }

            result = executor.invokeAll(threads, Long.valueOf("4000"), TimeUnit.MILLISECONDS);
            //result = executor.invokeAll(threads);

            for (Future<String> f : result) {
                try {
                    parsedValue = f.get();
                    System.out.println("Return Value - " + parsedValue);
                } catch (CancellationException e) {
                    System.out.println("Cancelled");
                    parsedValue = "";
                    f.cancel(true);
                }
            }

            executor.shutdownNow();
        } catch (Exception e) {
            System.out.println("Exception while running threads");
            e.printStackTrace();
        } finally {
            List executedThreads = executor.shutdownNow();

            System.out.println(executedThreads);

            for (Object o : executedThreads) {
                System.out.println(o.getClass());
            }
        }
        System.out.println("Exiting....");
        //System.exit(1);

        return "";
    }

    public static void main(String[] args) {
        testing();
    }
} 
```

从我之前关于[Java](https://stackoverflow.com/questions/10029076/dangling-threads-in-java)中的悬空线程的问题中，我了解到我必须将我的线程作为守护线程。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T14:46:28.183

> 如何将可调用线程作为守护线程？

您需要使用一个 new`ThreadFactory`来创建守护线程。在此处查看此答案：[Java 中的执行程序和守护程序](https://stackoverflow.com/questions/1516172/executor-and-daemon-in-java/1517264#1517264)

默认情况下，执行程序在构建池时创建非守护线程。但是你可以注入你自己的`ThreadFactory`，它会为池创建线程。

例如：

```
executor = ExecutorService.newSingleThreadExecutor(new MyThreadFactory()); 
```

`ThreadFactory`实现`newThread`方法：

```
Thread newThread(Runnable r) 
```

从我上面链接的答案中复制，您可以像这样实现它：

```
class MyThreadFactory implements ThreadFactory {
    public Thread newThread(Runnable r) {
        Thread thread = new Thread(r);
        thread.setDaemon(true);
        return thread;
    }
} 
```

您在问题中提到：

> //Thread.currentThread().setDaemon(true);

是的，这不起作用，因为一旦线程启动，您就无法设置守护程序标志。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T14:52:43.573

这与制作`Callable`守护进程无关。您实际上想让执行线程成为守护进程。您可以通过这种方式创建线程，使其成为守护进程：

```
executor = Executors.newSingleThreadExecutor(new ThreadFactory(){
    public Thread newThread(Runnable r) {
        Thread t = new Thread(r);
        t.setDaemon(true);
        return t;
    }        
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T17:45:13.583

仅设置`Thread`由 to 守护程序创建的 s`ExecutorService`无济于事（尽管您确实需要这样做）。您可以`ExecutorService` `Thread`像这样将 s 设置为守护进程：

```
executor = Executors.newSingleThreadExecutor(new ThreadFactory() {
    @Override
    public Thread newThread(Runnable r) {
        Thread t = new Thread(r);
        t.setDaemon(true);
        return t;
    }        
}); 
```

您遇到的真正问题是此代码块：

```
 for (Future<String> f : result) {
            try {
                parsedValue = f.get();
                System.out.println("Return Value - " + parsedValue);
            } catch (CancellationException e) {
                System.out.println("Cancelled");
                parsedValue = "";
                f.cancel(true);
            }
        }

        executor.shutdownNow(); 
```

更具体地说，这段代码将永远挂在这里：

```
parsedValue = f.get(); 
```

原因很简单，`Future#get`“如果需要，等待计算完成，然后检索其结果。”方法，但计算永远不会完成，因为它处于无限循环中。甚至没有来自`ThreadPoolExecutor#shutdownNow`或`Future#cancel(true)`将帮助您的中断，因为您的`Callable`代码没有执行阻塞操作或以其他方式检查中断。

从这里，您有两个选择：

1.  使用`Future#get`带`long timeout`参数的形式。
2.  用于`Future#isDone`确定`Future#get`方法在实际调用之前是否有要返回的值`Future#get`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T13:18:44.393

感谢蒂姆的详细解释。但是，您提出的解决方案并未解决问题。问题是由于线程进入了无限循环，它不会检查任何线程中断，因此不会终止。

对于我的场景，无限循环不是一个很好的例子，但我们试图完成的是我们正在执行一个执行时间过长的正则表达式，并且在 matcher.find() 调用之后检查中断。因为 find() 没有在规定的时间内返回，而且 find() 方法也没有检查线程中断，所以我们面临着悬空线程的问题。[最后，从这个](https://stackoverflow.com/questions/910740/cancelling-a-long-running-regex-match/)url实现 InterruptableCharSequence并让它工作。

# node.js - req.body 返回“禁止”

> ID：10030811
> 
> 赞同：0
> 
> 时间：2012-04-05T14:45:17.860
> 
> 标签：node.js, express, railway.js

在我的 node.js express 应用程序中，我正在向控制器上的操作提交一个表单。这个控制器所做的就是：

```
send(req.body) 
```

（我正在使用RailwayJS（但这对我认为这个问题并不重要）我这样做是为了获取表格中的值

但是，它以“禁止”的形式返回

如果我重新启动节点并刷新页面（确认我想回发），那么我会得到想要的结果......

知道如何在不重新启动的情况下获取表单的值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:53:39.680

我认为这与“防止伪造” beforeFilter 有关。您是否将 authencity_token 传递给您的帖子？

可能的解决方案：`skipBeforeFiler('protect from forgery');`-- 它禁用 CSRF 保护 更好的解决方案：使用 form_for 助手，或手动传递 authencity_token。查看 apidocs 以了解有关 CSRF 保护的更多信息：http: [//jsdoc.info/1602/express-on-railway/helpers.html#instance/csrf_tag](http://jsdoc.info/1602/express-on-railway/helpers.html#instance/csrf_tag)

# git - 变基后推新历史？

> ID：10030812
> 
> 赞同：2
> 
> 时间：2012-04-05T14:45:20.920
> 
> 标签：git, rebase

我将一些更改推送到我们的中央 git 存储库，然后立即意识到我有一个旧的，现在已经过时的更改，并且我已经引入了与它的合并：

![前](../Images/0eb881689a9c7cd5cc9f1f0e4d926631.png)

然后我使用 git rebase 摆脱了这个虚假的父级：

![后](../Images/ef6e505f468ab71c67576bb8b4e43e01.png)

然后我把它推`git push -f`到原点。它回答“一切都是最新的”。

现在我希望中央存储库与我在本地拥有的存储库相匹配。但是，当我`clone`重新进行项目时，我仍然有那个虚假的父级。更糟糕的是 git 想要合并，如果我让它这样做，我会得到我最新的两次提交（一次是旧哈希，一次是变基后的新哈希）。

如何让 git 在不合并的情况下推送我拥有的内容，并将我的存储库状态作为新状态（基本上，拒绝所有*远程*差异）？

还是我做错了？我想摆脱“读取属性时...”提交，以及上图中的整个红线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:59:44.120

您可以通过多种方式解决此问题。一种方法是使用重置、存储和提交在本地重建历史记录。以下将撤消您的最后一次提交（初始导入...）并隐藏这些更改。

```
git reset --mixed HEAD^
git stash 
```

现在您可以将您的 master 重置为您进行合并之前的提交，假设 abcd1234 是“测试 git”的哈希。犯罪：

```
git reset --hard abcd1234 
```

现在带回存储并再次提交：

```
git stash pop
git add .
git commit -m 'Initial import of the C++ client library.' 
```

现在终于推高你重写的主人：

```
git push -f origin master 
```

# tomcat - Tomcat Maven 插件在 webapp 部署时抛出异常

> ID：10030815
> 
> 赞同：0
> 
> 时间：2012-04-05T14:45:36.847
> 
> 标签：tomcat, plugins, maven

我正在尝试使用 maven 将我的 webapp 部署到嵌入式 tomcat 服务器。我遇到了问题。

我的项目是一个多模块的 Maven 项目。我有许多“jar”模块，然后是一个使用这些 jar 的网络应用程序。当我部署到本地安装的 tomcat 服务器时，它可以正常工作。当我已经构建并安装了其他 jars，然后单独构建并将 webapp 部署到嵌入式服务器时，它也可以正常工作。当我尝试构建整个项目、jar 和 webapp 时，嵌入式 tomcat 服务器部署失败。无论我尝试什么，它总是归结为我的一个罐子似乎没有被部署。Tomcat 抱怨它找不到位于这个 jar 中的某个类。当我删除该类时，Spring 抱怨它找不到位于同一个 jar 中的 applicationContext.xml 文件。它归结为我的一个罐子没有被发现。

我一直在试图调查为什么找不到这个罐子。我使用 -X 运行 maven 以获取更多数据。我确实找到了这个：

[调试] 向 webapploader com.myproject:security-lib:1.0-SNAPSHOT:compile 添加依赖项 [调试] 跳过添加工件安全库，因为它在反应堆中

但是，我也注意到我自己的所有罐子都会收到同样的信息。它们似乎是由tomcat找到的。

有没有人有任何建议为什么我的嵌入式 tomcat 服务器没有得到这个 jar 文件？以及为什么嵌入式tomcat服务器在我自己部署的时候可以工作，而我在构建整个项目的时候部署就不行了？任何有关调试的提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:58:20.917

I found the issue. I was using the "run" goal. I intended to use the "run-war" execution goal for the tomcat-maven-plugin.

# ios - 如何将我的 View 之一与 UIView 类连接？

> ID：10030818
> 
> 赞同：0
> 
> 时间：2012-04-05T14:45:56.987
> 
> 标签：ios, class, uiview

在我的 xib 文件中，我有一些视图。我有 PainView 类（UIView）。`PaintView`在我为此视图设置的身份检查器中，并制作了`@property (strong, nonatomic) IBOutlet PaintView *paintView;`

它工作正常，直到我决定改变绘图方法。我从该[文件](https://github.com/levinunnink/Smooth-Line-View/blob/master/Smooth%20Line%20View/SmoothLineView.m)中复制代码并粘贴到 PaintView.m（与 PaintView.h 相同）。

但它只有在我写的时候才有效

```
[self.view addSubview:[[PaintView alloc] initWithFrame:self.view.bounds]]; 
```

但它在所有其他层、按钮等上创建了新层。我需要将这个类与现有视图连接起来。

我试过`paintView = [[PaintView alloc] initWithFrame:self.view.bounds];`了，但没有用。

在控制台中它总是说无效的上下文：

```
<Error>: CGContextSaveGState: invalid context 0x0
<Error>: CGContextGetBaseCTM: invalid context 0x0
<Error>: CGContextConcatCTM: invalid context 0x0
<Error>: CGContextSetBaseCTM: invalid context 0x0
<Error>: CGContextSetBaseCTM: invalid context 0x0 
```

你能帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:18:52.320

您需要实现另一个初始化方法，其初始化与`initWithFrame:` 它的名称相同：

```
- (id)initWithCoder:(NSCoder *)coder 
{
  ...
} 
```

`initWithCoder:`是从 NIB 文件加载的 init 方法，为视图调用。

# php - 需要检索字段介于两个数值之间的记录 - 字段是 varchar 并且具有带逗号的数字

> ID：10030825
> 
> 赞同：0
> 
> 时间：2012-04-05T14:46:31.023
> 
> 标签：php, mysql

我有一个带有最小和最大字段的搜索表单。它查询一个 MySQL 表。

“标价”字段是 varchar，包含带逗号的值，例如 200,000 或 34,150。

我无法检索正确的记录...

( `List Price`BETWEEN '100000' AND '101000' ) 我得到的记录是 101900 - 高于最大值。

( `List Price`BETWEEN '100,000' AND '101,000' ) 我得到 >= min 和 <= max 的记录

( `List Price`<= '101,000' ) 我得到的记录类似于 100,000 但也有 1,280,000 和 1,300,000

( `List Price`>= '300,000' ) 我得到的记录像 399,900 但也有 70,000

是不是因为字段值是char而不是int？逗号可以从mysql select中的字段中删除吗？（`List Price`>= '300,000' <- 以某种方式从数字中删除逗号，因此选择将显示为 'List Price' >= 300000 ）

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:49:24.987

您应该将字符串转换为整数。没有其他办法。

```
CAST(`list price` AS SIGNED) BETWEEN 100000 AND 101000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T14:50:28.160

您应该将该 varchar 字段转换为十进制类型，以便进行适当的数字比较。您可以通过去掉逗号并执行 CONVERT() 来强制它为数字式，例如

```
CAST(REPLACE(`List Price`, ',', '') AS DECIMAL) BETWEEN 100000 AND 101000 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T14:54:01.330

什么MySQL版本？列上有索引吗`List price`？[这个错误](http://bugs.mysql.com/bug.php?id=63437)是否相关？

有关转换，请参阅[手册](http://dev.mysql.com/doc/refman/5.0/en/type-conversion.html)：

> 如果比较操作中的两个参数都是字符串，则将它们作为字符串进行比较。

唯一明智的解决方案是更改您的架构（即更改列类型），否则`cast`在每个查询中使用 a ，这将相当慢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T14:56:25.257

您将所有内容都视为字符串。

不要将您的参数放在引号中，因为它们是数字，mySQL 会为您将字符串转换为数字。

# ios - 使用映射模型进行核心数据迁移

> ID：10030827
> 
> 赞同：2
> 
> 时间：2012-04-05T14:46:32.867
> 
> 标签：ios, core-data, core-data-migration

我目前有一个模型，其中两个实体之间的关系是多对多的

```
Player <---->> Team
Team   <---->> Player 
```

为了能够支持排序，我计划使用中间实体 TeamToPlayer。我不能使用新的 iOS5 Ordered 属性，因为我需要支持旧版本。

```
Player <---->> TeamToPlayer
Team   <---->> TeamToPlayer 
```

我的 TeamToPlayer 定义如下

```
TeamToPlayer
   NSInteger order
   Team* team
   Player *player 
```

现在，我正在尝试将旧关系迁移到新关系中，但不知道如何进行。我创建了核心数据映射模型，但不确定如何定义关系的表达式。此外，映射模型为我的核心数据模型中的所有实体创建了实体映射。是否有必要为所有实体或需要迁移的实体提供实体映射。

谢谢，贾维德

# ruby-on-rails - Rails：鉴于我的数据库是 UTC 和我的 Time.zone US Eastern，我如何在美国太平洋节省时间？

> ID：10030828
> 
> 赞同：4
> 
> 时间：2012-04-05T14:46:36.800
> 
> 标签：ruby-on-rails, ruby, time, timezone

（我在 Ruby MRI 1.9.2 上使用 Rails 3.2.3）

一切都集中存储在 UTC 中。这很好。每个用户都有一个“时区”属性。我的 ApplicationController 有一个前置过滤器，可将 Time.zone 调整为用户存储的时区。这也很好。

鉴于上述情况，如果我的用户使用时间完成日期时间选择，则该时间预计在 Time.zone 中，Rails 将自动调整并将其保存为 UTC。这也不错。

现在：我希望让我的用户填写**另一个时区**的时间，然后将其存储为 UTC。但是，Rails 期望已完成的日期时间选择已在（之前由 ApplicationController 设置的）Time.zone 中填写。**因此 Rails错误地**调整为 UTC 。

**如何实现将输入的时间保存为第三时区的目标？**

插图：

我的使用场景是佛罗里达州的用户调整属于西海岸酒店的文档的日期。他们正在寻求进入西海岸的时间。

我正在使用 jQuery 使用样式选择器来设置文本框的样式，因此我有一种方法可以将字符串输出到文本框：

```
<%= f.text_field(:created_at, :value => adjusted_to_hotel_time(@document.created_at), :class => 'text datetime_picker') %>

def adjusted_to_hotel_time(time)
  time.in_time_zone(@current_hotel.timezone).to_s(:admin_jquery) # formatted for the jQuery datetime_picker text fields.
end 
```

这工作得很好，但是当保存@document 时，Rails 会错误地调整为 UTC。我不知道我不知道什么 - 我如何将在该字段中输入的数据“标记”为在 @current_hotel.timezone 中，以便 Rails 在保存父对象时正确偏移到 UTC？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-06T09:23:59.970

破解它！

基本上，提交给 params 的字符串代表酒店时区的时间。我们必须使用内置的 'use_zone' 方法将全局 Time.zone 临时设置为该酒店的。

然后，我们向该方法传递一个块，在该块中我们使用 Hotel 的时区而不是 User 来生成 Rails 期望的值。这意味着 Rails 转换为 UTC 会在 db 中产生正确的时间 - 因为在表单上输入的时间已转换为用户时区。这些偏移量有效地相互抵消了。

```
@document.created_at = Time.use_zone(@current_hotel.timezone) {Time.zone.parse("#{params[:document][:created_at]}").in_time_zone(@current_hotel.timezone)} 
```

**我们基本上是在这里更改 Time 对象的时区，*而不会*在时区更改时转换该 Time 对象的实际时间。**（祝你好运解析那句话！）

这看起来对我来说很好，但是我已经研究这个太久了，我很想看到一个更好的方法/更多的 Rails-ey 方法来做到这一点！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T14:52:31.397

列`datetime`类型仅存储日期和时间，但不存储时区。您可能需要创建一个辅助列来保留用于解释保存在那里的 UTC 时间的时区。

这两个值可以结合起来重新创建您的初始输入。

# command-line - 从 Tcl 中的命令行参数读取标志的机制

> ID：10030830
> 
> 赞同：1
> 
> 时间：2012-04-05T14:46:54.743
> 
> 标签：command-line, tcl, command-line-arguments

Tcl 中是否有一种内置方法可以从命令行参数中读取标志，类似于`GetOptions`Perl？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T15:26:22.383

[来自tcllib](http://tcllib.sourceforge.net/)的[cmdline](http://tcllib.sourceforge.net/doc/cmdline.html)包可能很合适。还有很多其他自定义代码可以做这类事情——例如，查看wiki 上的[this](http://wiki.tcl.tk/14717)和[this](http://wiki.tcl.tk/1623)页面以及它们链接到的页面。

# javascript - javascript。获取javascript函数位置或获取函数代码

> ID：10030833
> 
> 赞同：0
> 
> 时间：2012-04-05T14:46:59.550
> 
> 标签：javascript, firebug, href

我与第 3 方网页达成协议。如果我点击一些链接，就会出现一个新的“div”窗口。此链接元素具有以下代码：

```
<a style="font-weight:600;font-size:15px;color:#7bb32e" href="javascript:openTag('code')" id="ext-gen1512">code</a> 
```

**我需要获取一个 openTag 函数代码**才能了解它是如何工作的。

为了做到这一点，我使用萤火虫。我尝试了一些方法：
1）我尝试将“openTag”放入firebug的命令行并运行它。但是萤火虫告诉这个功能不存在（参考错误）。

2）我试图通过页面加载的所有文件搜索函数名称。但这并不成功。

3）我在记事本中创建了两个 html 元素，并使用 firebug 将它们插入到该工作 thml 元素附近。这些元素的代码是：

```
1) <span onclick="openTag('mgmt')">mgmt 3</span>
2) <a href="javascript:openTag('mgmt')">mgmt 4</a> 
```

当我单击第一个 span 元素时，firefox 控制台说存在引用错误。函数 openTag 没问题`t exist. But when I click on the second "a" element, it`。没有错误，新的“div”窗口按原样出现。

**请帮我获取 openTag 功能代码或找出该功能的位置。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T14:21:18.903

1.  打开 Firebug 并切换到“脚本”面板。必要时重新加载页面。
2.  单击 Firebug 左上角的“Break on next”按钮（查找暂停图标）。
3.  点击你的链接。除非注册了鼠标事件的事件侦听器，否则调试器将在您的函数代码内停止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:52:03.403

openTag() 函数必须存在于外部 js 文件或标记本身中。尝试查看原始 HTML 页面的源代码并浏览外部 js 包含。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T08:55:18.157

我有一个相同的问题。这是我解决它的方法：

*   打开 Firebug Script 标签，加载所有脚本
*   右侧有一个“新手表表达式...”链接（在手表标签中）
*   单击该链接并输入您的函数名称
*   繁荣，将我准确地引导到我的函数的源代码

# dotnetopenauth - 由于缺少刷新令牌，客户端凭据授予在 AuthorizeRequest 上失败

> ID：10030835
> 
> 赞同：1
> 
> 时间：2012-04-05T14:47:09.377
> 
> 标签：dotnetopenauth

客户端凭据授予不返回刷新令牌（DotNetOpenAuth.OAuth2.AuthorizationServer.PrepareAccessTokenRequest 禁止它）。但是 ClientBase.AuthorizeRequest 需要它。这是 DotNetOpenAuth 中的错误还是我做错了什么？

我想我可以通过继承 ClientBase 并覆盖 AuthorizeRequest 来解决。这是正确的做法吗？

编辑：从 DotNetOpenAuth 之外的 ClientBase 继承并不是那么容易，因为你想要的很多东西都是内部的。例如 ErrorUtilities.VerifyProtocol

Edit2：只需阅读 DotNetOpenAuth.OAuth2.AuthorizationServer.PrepareAccessTokenRequest 中提到的 OAuth 2 规范草案（草案 25），我找不到它在哪里不允许客户端凭据授予类型的刷新令牌。也许他们改变了它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T11:36:04.313

如果您请求，Google 会返回刷新令牌。在查询字符串 access_type=offline 中提供参数。

就我而言，我必须将默认授权端点 URL 修改为：[https ://accounts.google.com/o/oauth2/auth?access_type=offline](https://accounts.google.com/o/oauth2/auth?access_type=offline)

**使用DotNetOpenAuth 的**Google Api C# 示例：

```
 private WebServerClient GetClient()
    {
        return new WebServerClient(
            new AuthorizationServerDescription
            {
                AuthorizationEndpoint = new Uri("https://accounts.google.com/o/oauth2/auth?access_type=offline"),
                TokenEndpoint = new Uri("https://accounts.google.com/o/oauth2/token"),
                ProtocolVersion = ProtocolVersion.V20,
            },
            clientIdentifier: this.settings.GoogleApisClientIdentifier,
            clientSecret: this.settings.GoogleApisClientSecret
            );
    } 
```

*根据我的经验，这仅适用于第一个请求。*

请参阅[谷歌文档](https://developers.google.com/accounts/docs/OAuth2WebServer)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T05:35:54.780

我不知道你为什么说`ClientBase.AuthorizeRequest`需要它。首先，有一个只需要访问令牌的重载，因此它甚至不*要求*刷新令牌。您可能尝试过的重载接受一个`IAuthorizationState`对象，该对象可能包含也可能不包含刷新令牌，并且该方法似乎仅在访问令牌已过期时才查找刷新令牌。由于无法使用过期的访问令牌，因此它会尝试刷新它并在不能使用时抛出。在我看来这很合理。

无论您选择调用哪种方法重载，您的调用模式都必须避免使用过期的访问令牌，或者准备好响应 DotNetOpenAuth 或资源服务器确定它们已过期或撤销时引发的异常。事实上，由于令牌可以在到期之前被撤销，因此最好始终为此做好准备。

OAuth 2 规范草案 25 实际上表明刷新令牌不应包含在对客户端凭据授予的响应中。从[第 4.4.3 节](http://tools.ietf.org/id/draft-ietf-oauth-v2-25.html#rfc.section.4.4.3)：

> 4.4.3\. 访问令牌响应
> 
> 如果访问令牌请求有效且已授权，则授权服务器会如第 5.1 节所述颁发访问令牌。**不应包含刷新令牌**。如果请求未通过客户端身份验证或无效，授权服务器将返回错误响应，如第 5.2 节所述。

# c# - 使用互操作 Excel 保存 XLS

> ID：10030838
> 
> 赞同：7
> 
> 时间：2012-04-05T14:47:16.367
> 
> 标签：c#, vb.net, excel, office-interop, excel-interop

**当前设置：**

因此，我可以使用以下代码将文件另存为 XLS：

```
_myWorkbook.SaveAs("FileName.xls", Excel.XlFileFormat.xlWorkbookNormal) 
```

我还可以使用以下代码将文件另存为 XLSX（因为我使用的是 Office 2010）：

```
_myWorkbook.SaveAs("FileName.xlsx", Excel.XlFileFormat.xlWorkbookDefault) 
```

**问题：**

我已尝试（未成功）使用以下代码将文件保存为 XLSX：

```
_myWorkbook.SaveAs("FileName.xlsx", Excel.XlFileFormat.xlExcel12) 
```

为什么这不起作用？最后我检查了一下，Excel 12 是 Excel 2007（支持 XLSX 的版本）。我错过了什么吗？

（对于那些有兴趣的人，我得到一个`This extension can not be used with the selected file type`错误）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-05T16:46:56.250

实际上`XlFileFormat.xlExcel12`是 Excel 12.0 二进制格式（`xlsb`），对于 OpenXML（即`xlsx`），您需要使用`XlFileFormat.xlOpenXMLWorkbook`枚举值。

如需完整参考[，请参见此处](http://msdn.microsoft.com/en-us/library/bb241279%28v=office.12%29.aspx)。

# c++ - Microsoft XMLLite 的 XML 绑定

> ID：10030845
> 
> 赞同：2
> 
> 时间：2012-04-05T14:47:39.667
> 
> 标签：c++, xml, visual-c++, xsd, xmllite

我有一个 C++ 项目，我在其中使用[Microsoft XmlLite](http://msdn.microsoft.com/en-us/library/windows/desktop/ms752838)来解析多个 XML 文件。现在我有一个需要解析的新文件，并且我有一个 XSD 架构。我知道那里有许多 C++ XML 绑定工具，但到目前为止我发现的所有工具都要求我包含另一个 XML 解析库，我想避免使用它。因此我的问题是：是否有任何开源或商业工具可以生成基于 Microsoft XmlLite 的 C++ XML 绑定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T00:37:34.607

[CodeSynthesis](http://www.codesynthesis.com/products/xsd/c++/tree/)似乎是最接近的工具，它将提供内存中 XML 数据绑定以与 XMLLite 集成。

> C++/Tree 映射生成表示 XML Schema 中定义的数据类型的 C++ 类，一组将 XML 文档转换为树状内存对象模型的解析函数，以及一组将对象模型转换回XML。

# android - context.startService() 调用是否保证被服务按照它们发送的顺序获取？

> ID：10030846
> 
> 赞同：0
> 
> 时间：2012-04-05T14:47:45.047
> 
> 标签：android, android-intent, android-service

context.startService() 调用是否保证被服务按照它们发送的顺序获取？

在活动中考虑：

```
Intent intent;

intent = new Intent(MyIntents.ADD_BATCH_ACTION);
intent.putExtra(MyIntents.BATCH_ACTION_NAME, "Bake donuts");
startService(intent);

intent = new Intent(MyIntents.ADD_BATCH_ACTION);
intent.putExtra(MyIntents.BATCH_ACTION_NAME, "Make a coffee");
startService(intent);

intent = new Intent(MyIntents.ADD_BATCH_ACTION);
intent.putExtra(MyIntents.BATCH_ACTION_NAME, "Fetch coffee and donut to room 12");
startService(intent);

startService(new Intent(MyIntents.FLUSH_ADDED_ACTIONS)); 
```

有些动作可能有很多共同的工作，如果我确定它们是成批执行的，我可以优化服务。

我可以假设 service onStartCommand 将以相同的顺序执行吗？

问候，托梅克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:51:17.927

> context.startService() 调用是否保证被服务按照它们发送的顺序获取？

虽然我认为它们碰巧是按顺序发生的，但 AFAIK 这不是记录在案的行为，因此我不会指望它。

> 有些动作可能有很多共同的工作，如果我确定它们是成批执行的，我可以优化服务。

然后只调用`startService()`一次，所有内容都在您的“批处理”中。Intent extras 支持多种类型的数组，因此请尝试打包一个 extras 数组，而不仅仅是一个。

# jsf-2 - JSF 2：在特定用户之间共享范围

> ID：10030852
> 
> 赞同：0
> 
> 时间：2012-04-05T14:48:06.093
> 
> 标签：jsf-2, icepush

我不确定我想要的是否可能，但仍然......我想在用户之间共享数据，就像在[这里](http://wiki.icesoft.org/display/ICE/Easy+Ajax+Push)做的那样。但是，与`ApplicationScope`用于共享数据的此示例不同，我希望数据不是在所有用户之间共享，而仅用于用户组（例如私人聊天室，而不是该示例中的公共空间）。目前我使用`ViewScope`但为了更新参与者的显示，使用我在[这里](https://stackoverflow.com/a/5523717/1187088)找到的 hack ，但这个解决方案不是很稳定，因为它偶尔会抛出 JS 错误。我的问题有什么合理的解决方案吗？干杯，埃雷兹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T01:57:23.543

将它们保存在`Map`应用程序范围的 bean 中，其中映射键是组标识符。

例如

```
@ManagedBean
@ApplicationScoped
public class ChatManager {

    private Map<Group, Room> rooms;

    // ...
} 
```

和

```
@ManagedBean
@ViewScoped
public class GroupChat {

    @ManagedProperty("#{chatManager.rooms[user.group]}")
    private Room room;

    // ...
} 
```

# objective-c - UITableViewCell 禁用单元格，然后重新启用和更新而不重新加载视图

> ID：10030853
> 
> 赞同：0
> 
> 时间：2012-04-05T14:48:09.923
> 
> 标签：objective-c, ios, uitableview

我发现许多问题几乎都在问我想要什么，但到目前为止还无法实现我自己的解决方案。

我的 UITableViewController 中有 2 个部分，到目前为止一切正常。我有一个 AlarmEnabled UISwitch 和一个 AlarmDate 单元格，它会拉出一个 UIActionSheet 以便人们可以选择触发日期等。当有人否定 AlarmEnabled UISwitch 时，我试图禁用/灰显 AlarmDate 单元格（单元格 0） “即时的”。这*确实*有效，但前提是我 a) 否定 UISwitch b) 通过 Cancel/Save UIButton 退出视图 c) 重新进入视图。

到目前为止，我已经尝试了 tableView:reloadRowsAtIndexPath: 方法，如下所示：

```
NSIndexPath *tempIndexPath = [NSIndexPath indexPathForRow:0 inSection:0];
NSArray *tempIndexPathArray = [[NSArray alloc] initWithObjects:tempIndexPath, nil];
[self.tableView reloadRowsAtIndexPaths:tempIndexPathArray withRowAnimation:UITableViewRowAnimationNone];
[tempIndexPathArray release]; 
```

也许是由于我与 iOS 编程的开关关系，我只是误解了代码应该放在哪里（当前放置在 AlarmEnabled UISwitch 附件的选择器中），但它并没有做我所追求的（但听起来像如果使用正确应该）。

我想我会尝试增加我的认知并在 UISwitch 的选择器中尝试类似以下的操作，

```
#define NOT(a)  !a
....
UITableViewCell *tempCellAlarmDate = [self.tableViewController.tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0]];
tempCellAlarmDate.userInteractionEnabled = NOT(tempCellAlarmDate.userInteractionEnabled);
// forget transparency for now.
//tempCellAlarmDate.alpha = 0.0; 
```

.. 但是为我头骨中的发电机提供动力的快速小跑的啮齿动物不赞成这个代码，因此我实现实时 userInteractionEnabled 切换的梦想没有实现。

任何建议表示赞赏:-)

谢谢

sc。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T15:09:01.693

我错过了你在单元格上调用 setEnabled: 方法的地方。或者您是否使用其他方法禁用它？根据我的经验， setEnabled: NO 会实时禁用单元格，而 setEnabled: YES 会将其恢复。也许我错过了什么？

# c++ - 使用 ofstream 将整数作为十六进制写入文件

> ID：10030855
> 
> 赞同：0
> 
> 时间：2012-04-05T14:48:21.333
> 
> 标签：c++, binary, ofstream

我有一个定义如下的函数：

```
void AddHeadCode(std::ofstream &ostream, size_t length){
ostream.write((char*)length, sizeof(length));
ostream.seekp(0x10L, std::ios::beg);
} 
```

现在当它执行时，它显然会失败......因为 char 指针将无处指向。但我希望将实际的指针值写入文件。Like length = 19152 然后当我在 HEX 编辑器中打开文件时，我应该在那里找到 0d4a。

这如何在 C++ 中实现？我有点迷路了……

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T14:52:46.997

获取`length`变量的地址，并将该地址传递给`.write`：

```
void AddHeadCode(std::ofstream &ostream, size_t length){
  // by popular demand, removed C-style cast
  ostream.write(reinterpret_cast<char*>(&length), sizeof(length));
  ostream.seekp(0x10L, std::ios::beg);
} 
```

但是，这通常不被称为将整数写入“十六进制”。这有时被称为将整数写入“二进制”，或简单地写入整数。

请注意，您所做的不是便携式练习。如果您在另一台计算机上读回该值（甚至在同一台计算机上，但使用不同的编译器），您可能不会读入相同的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:58:03.560

文件流很棘手，所以我不确定，但我将它用于字符串流：

```
std::basic_stringstream<wchar_t> oTmpStream;
oTmpStream << L"0x" << std::nouppercase << std::setfill( L'0' ) << std::hex << std::setw( 8 ) << iSomeValue

// or without fancy formatting;
oTmpStream << std::hex <<  iSomeValue 
```

# playframework - Play Framework 2.0 - views.render 抛出异常

> ID：10030859
> 
> 赞同：3
> 
> 时间：2012-04-05T14:48:43.257
> 
> 标签：playframework, playframework-2.0

我正在尝试从[doc](https://github.com/playframework/Play20/blob/master/samples/java/helloworld/app/controllers/Application.java)运行 hello world 应用程序。

我收到以下错误：

```
render(java.lang.String) in views.html.index cannot be applied to (play.data.Form<controllers.Application.Hello>) 
```

指向以下代码块：

```
 /**
   * Home page
  */
  public static Result index() {
     return ok(index.render(form(Hello.class)));
  } 
```

Eclipse 也无法解析索引对象上的 .render 方法。

```
the method render(String) in the type index is not applicable for the arguments (Form<Application.Hello>) 
```

我定义了以下导入：

```
package controllers;

import play.*;
import play.mvc.*;
import play.data.*;
import play.data.validation.Constraints.*;

import java.util.*;
import views.html.*; 
```

hello.scala.html 和 index.scala.html 也可以在文件夹 app/views/ 中找到

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-05T15:27:11.100

Play 2.0 中的每个视图都是包含参数的 Scala 函数，很可能您在开头声明的 index.sacala.html 字符串中拥有：

```
@(message: String) 
```

它应该是你的形式：

在控制器中：

```
final static Form<MyModel> myForm = form(MyModel.class);

public static Result blank() {
    return ok(formNew.render(myForm));
} 
```

在视图中：

```
@(myForm: Form[MyModel]) 
```

# sql - 请帮助我创建我的 SQLite 数据库。我需要创建一个示例火车时刻表，但不确定我是否在正确的轨道上

> ID：10030860
> 
> 赞同：0
> 
> 时间：2012-04-05T14:48:43.230
> 
> 标签：sql, database, sqlite, database-design

我对火车时刻表的 SQLite3 数据库模式的外观感兴趣。

通常，这以表格形式呈现为最终结果。

M到F的样品时间表

```
STATION A   STATION B    STATION C ... STATION K
6:00        6:15         7:30          9:00
6:30        6:45         7:45          9:30
7:00        7:15         ----          10:00
8:00        8:15         9:30          11:00 
```

周末时间表示例

```
STATION A   STATION B    STATION C ... STATION K
7:00        7:15         8:30          10:00
8:30        8:45         8:45          10:30
9:00        ----         9:30          11:00
10:00       10:15        10:30         12:00 
```

火车没有任何编号（如 A-Train、12 号火车等）。所以我们可以制作一个内部号码。周一至周五至周六和周日的内部号码是否唯一或重复。然后一列火车会停在多个车站，但不是所有车站，有时车站需要到达（a）和离开（d）时间，或者一个或另一个。

车站可以按距离排序。

到目前为止，我认为我需要以下表格：

*   车站（ID、名称、距离、线路）
*   列车（ID、列车号、日间运行、详情）
*   火车运行（Train.ID、Station.ID、arr/dep、时间、注释）

这是否足够标准化？

我的架构是否正确，或者我需要进行任何更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T23:42:24.347

您可能希望有一个单独的路线表，以及另一个将火车与路线联系起来的表。您可以有部分路线并将一列火车连接到多条部分路线。

# c++ - Visual Studio 2010 调用堆栈窗口剥离模板参数类型

> ID：10030861
> 
> 赞同：0
> 
> 时间：2012-04-05T14:48:46.210
> 
> 标签：c++, visual-studio, visual-studio-2010, templates

我目前正在编写和调试一个大量使用模板作为策略类的库。因此，实例化的对象类型是模板的模板......

查看 Visual Studio (2010) 调用堆栈窗口（以及输出窗口），无法一目了然地获得函数的名称，因为它位于三行签名的末尾。

调用堆栈窗口有几个选项来显示/隐藏参数类型/值和其他内容，但这些都不会使模板类型消失。理想情况下，我希望能够看到类名，去掉所有模板参数和函数名（并恢复到当前的可视化以解决歧义）。这个选项存在吗？

# session - 如何测试会话超时？

> ID：10030862
> 
> 赞同：2
> 
> 时间：2012-04-05T14:48:55.087
> 
> 标签：session, session-timeout

我有一个 PHP 应用程序（尽管我认为一般概念与其他语言的 Web 应用程序相同）应该在 300 秒不活动后破坏用户的当前会话。但是有没有一种很好的方法来测试它是否真的有效？我启动了我的应用程序，让它闲置了 300 秒，然后单击一个链接并重定向到登录页面——这就是会话被破坏时应该发生的情况。然后我在 290 秒后做了同样的事情，我又被重定向到登录页面。因此，要么我的计时关闭，要么我检查会话超时时出现错误，或者我设置会话超时前的时间长度时出现错误。我如何确定它是哪一个？

另外，有没有一种方法可以让我解决这个问题，而不必等待应用程序在每次测试中超时？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:59:17.867

如何将超时设置为更易于管理/可测试的值，例如 30 秒？

同样，当您创建会话时，您可以在它应该过期时记录发出。设置秒表，并验证。

# macos - 编写 VLC 脚本以捕获视频的第一帧 - 无法让命令行工作

> ID：10030863
> 
> 赞同：3
> 
> 时间：2012-04-05T14:48:54.933
> 
> 标签：macos, perl, command-line, vlc

我正在创建一个脚本来从网络上提取视频，创建第一帧的图像，并将图像保存为文件。我的脚本正在处理抓取大量视频并为文件名提供序列号。

我的问题是使用 VLC 来抓取视频并实际保存文件。在将其放入脚本之前尝试使用命令行和本地文件，我尝试过：

```
vlc -vvv -I dummy --video-filter=scene --start-time=1 --stop-time=1 --scene-format=jpeg --scene-ratio=24 --scene-prefix=EXEC samp.mp4 vlc://quit 
```

-> 未捕获的异常

```
vlc -vvv -I dummy --no-audio --video-filter=scene --start-time=1 --stop-time=1 --scene-format=jpeg --scene-ratio=24 --scene-prefix=EXEC samp.mp4 vlc://quit 
```

-> 未捕获的异常

```
vlc -vvv -I rc --video-filter=scene --start-time=1 --stop-time=1 --scene-format=jpeg --scene-ratio=24 --scene-prefix=EXEC samp.mp4 vlc://quit 
```

-> 未捕获的异常；看起来我不能没有 -V 选项

```
vlc -vvv -I rc -V snapshot --video-filter=scene  --start-time=1 --stop-time=1 --scene-format=jpeg --scene-ratio=24 --scene-prefix=EXEC samp.mp4 vlc://quit 
```

-> 没有匹配“快照”的 vout 显示模块；类似地尝试使用模块“image”、“scene”、“opengl”

我在 Mac OS X 10.7.3 上运行 VLC 2.0.1。有没有人让 VLC 在命令行上工作（所以它是可编写脚本的）从视频中捕获图像？

顺便说一句，我已经对此进行了广泛的谷歌搜索——VLC 文档已经过时了，而且网络上的大多数建议实际上都不适用于最新版本的 VLC。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T10:20:58.690

另一种方法是使用 ffmpeg - 这对我有用：

```
ffmpeg -i http://example.com/directory/video.mp4  -ss 0 -vframes 1 -vcodec mjpeg -f image2 keyframe001.jpg 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T04:12:22.623

如果结果很重要，但视频播放器不重要，您可以使用 mplayer 执行此操作：

```
mplayer -vo png,outdir=/tmp,prefix=frameNo,z=0 -ao null -frames 1 VIDEO-FILENAME 
```

`VIDEO-FILENAME`可以是本地文件，也可以是 HTTP URL 。

要在 OSX 上获取命令行 mplayer，只需安装图形版，然后在以下位置之一找到命令行二进制文件：

```
/Applications/MPlayer OSX.app/Contents/Resources/External_Binaries/mplayer_intel.app/Contents/MacOS/mplayer 
```

或者

```
/Applications/MPlayer OS X 2.app/Contents/Resources/mplayer.app/Contents/MacOS/mplayer 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-30T09:26:00.003

在 Windows 中：`vlc C:\test.mp4 --rate=1 --video-filter=scene --vout=dummy --aout=dummy --start-time=10 --stop-time=11 --scene-replace --scene-format=jpg --scene-ratio=29.970029 --scene-prefix=snaphot --scene-path=C:\Users\Gi\Desktop\ vlc://quit`

它是有效的。

# ios - 如何在 iOS 上读取或解析 .mobi 文件

> ID：10030864
> 
> 赞同：0
> 
> 时间：2012-04-05T14:48:55.493
> 
> 标签：ios, parsing, mobipocket

我正在开发一个 iOS 阅读器应用程序，我想支持 Amazon 的 .mobi 文件。我搜索但发现很少有关于在 iOS 上解析 .mobi 文件的信息。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:33:35.503

Mobipocket 电子书格式基于使用 XHTML 的 Open eBook 标准，并且可以包含 JavaScript 和框架。它还支持与嵌入式数据库一起使用的本机 SQL 查询。

我不知道易于适应的源代码（尤其是对于 iOS），但这是格式规范，您可以尝试解析它，尽管我认为这并不容易： [http ://wiki.mobileread.com/维基/MOBI](http://wiki.mobileread.com/wiki/MOBI)

它可能不优雅，但也许您可以使用转换器（页面上有一些链接）并尝试使用更公开/更好支持的格式。

# ssis - SSIS 中的表达式问题

> ID：10030865
> 
> 赞同：2
> 
> 时间：2012-04-05T14:48:58.440
> 
> 标签：ssis

我有一个像这种格式的字符串。就我而言，我只需要从字符串大小写中提取字符

```
1)12AB
2)SD12
3)1WE4 
```

输出

```
1)AB
2)SD
3)WE 
```

我只需要提取字符。我在 SSIS 包的派生列中使用此表达式

```
SUBSTRING(MediaIDCode,1,2) 
```

但是这个表达式只适用于这个条件

```
1)12AB 
```

我需要得到一个适用于上述所有条件的表达式。我尝试过使用`REPLACE ( '' , '1', '')`，但它变成了一个很大的表达方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T14:55:14.680

您发布的 SUBSTRING 函数代码将从字符串中提取字符而不考虑其内容。

看看使用正则表达式过滤掉不需要的字符：

[http://consultingblogs.emc.com/jamiethomson/archive/2005/07/04/SSIS-Nugget_3A00_-The-script-component-and-regular-expressions.aspx](http://consultingblogs.emc.com/jamiethomson/archive/2005/07/04/SSIS-Nugget_3A00_-The-script-component-and-regular-expressions.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T10:02:24.037

您还可以使用同步脚本转换以这种方式过滤字符：

```
 Dim NewMediaIDCode As String = ""

    For Each c As Char In Row.MediaIDCode
        If Not Char.IsDigit(c) Then
            NewMediaIDCode += c
        End If
    Next

    Row.MediaIDCode = NewMediaIDCode 
```

我在这里使用了 IsDigit 方法，但还有很多其他方法可供选择。

# ios - 编译应用程序后的资产文件大小概述？

> ID：10030870
> 
> 赞同：0
> 
> 时间：2012-04-05T14:49:08.053
> 
> 标签：ios, asset-pipeline, filesize

我刚刚创建了一个包含大量媒体的 iOS 应用程序。现在我只想知道是否可以将所有单个文件的概述作为报告或类似的东西？

（例如 Unity3d 有这种功能。你可以看到所有的纹理、着色器等等。也许苹果已经包含了一些东西......）

谢谢你的提示..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:01:16.020

[Slender](http://itunes.apple.com/us/app/slender/id493656257?ls=1&mt=12)（App Store 链接）可能会满足您的需求。

# php - 如何使用 php 加载 javascript 内容？

> ID：10030876
> 
> 赞同：1
> 
> 时间：2012-04-05T14:49:25.063
> 
> 标签：php, javascript, file-get-contents

如何使用 php 加载 javascript 内容。假设当 php 使用文件获取内容和文件放置内容保存文件时，Google 当前广告之类的 JavaScript 内容永远不会加载，但会加载 google adsense 代码。

php 可以在保存的页面上“运行”JavaScript 代码以保存代码生成的动态内容吗？已经得到答案是否定的。有没有办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:52:26.010

您在询问 PHP 是否可以在保存的页面上“运行”JavaScript 代码以保存代码生成的动态内容。答案是否定的，它不能。或者至少，不是没有构建自己的 JavaScript 解释器。

# vb.net - VB.NET LINQ - 集合中的集合计数？

> ID：10030877
> 
> 赞同：3
> 
> 时间：2012-04-05T14:49:30.040
> 
> 标签：vb.net, linq

采取以下场景：

```
Public Class Store
    Public Overridable Property Areas As List(Of Area)
End Class

Public Class Area
    Public Overridable Property Shelves As List(Of Shelf)
End Class

Public Class Shelf
    Public Property ID as integer
End Class 
```

获取商店货架总数的最快方法是什么？即对于一家商店，我使用 Areas.Count 获得区域的总数

还是我需要遍历每个区域并计算货架的数量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T14:52:59.663

在 C# 中：

```
int count = Store.Areas.SelectMany(x => x.Shelves).Count(); 
```

转换为 VB：

```
Dim count = Store.Areas.SelectMany(Function(x) x.Shelves).Count() 
```

（使用[在线转换器](http://www.developerfusion.com/tools/convert/csharp-to-vb/)，而不是 VB 人）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T15:03:02.053

使用此 LINQ 表达式

```
Dim count As Integer = store.Areas.Sum(Function(a) a.Shelves.Count()) 
```

请注意，这与@BrokenGlass 的回答不同。他首先将嵌套集合展平`SelectMany`，然后计算结果项目的总数，即他循环遍历项目的总数。因为我只循环外部集合并对`Count`内部集合的属性求和。这应该快得多。

# java - 通过多态在运行时定义变量的类

> ID：10030878
> 
> 赞同：0
> 
> 时间：2012-04-05T14:49:42.553
> 
> 标签：java, polymorphism

很难找到这个问题，因为我不完全确定如何定义它。请多多包涵。

最好的问题是：在 Java 中，如何创建其类在运行时通过多态定义而不是在代码中预定义的变量？

也许我可以通过示例来最好地定义这一点：假设我有一个抽象超类 Superhero，其子类是 Thug、Psionic、Shooter 和 Gadgeteer。我想从一个 CSV 数据文件中读取其行条目是单个超级英雄；在文件为每个超级英雄列出的变量中，他们属于哪个类。然后如何将每个超级英雄分配给文件中列出的类？到目前为止，我所做的包括以下内容。

我创建了一个子类类型数组，如下所示：

```
numberOfClasses = 4; // constant
Superhero[] heroType = new Superhero[numberOfClasses];
heroType[0] = new Thug();
heroType[1] = new Psionic();
heroType[2] = new Shooter();
heroType[3] = new Gadgeteer(); 
```

然后我们有一个遍历文件每一行的 for 循环。对于每一行，它将英雄的名字读入变量 tempClassName，然后开始一个嵌套循环，执行此操作：

```
for (int index=0; index<numberOfClasses; index++)
{
    Class heroClass = heroType[index].getClass();

    if (tempClassName.equals(heroClass.getName()))
    {
        Superhero newHero = new heroClass; // problem line
    }
} 
```

最后一个问题应该创建一个新的 Superhero 对象，其子类是变量 heroClass 中的任何内容。但是您可能会看到这不起作用。将其定义为“new heroClass”会产生语法错误，因为它需要一个方法 heroClass()。但是“new heroClass()”也是一个问题，因为 heroClass 不是一个方法。基本上，我怎样才能使用 getClass() 的结果作为我新创建的变量的（子）类类型？我需要对每个子类中的构造函数做些什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:54:32.080

```
 Superhero[] heroType = new Superhero[]{
            new Thug(),
            new Psionic(),
            new Shooter(),
            new Gadgeteer()
    };

    for (int index = 0; index < heroType.length; index++) {
        Class heroClass = heroType[index].getClass();

        if (tempClassName.equals(heroClass.getName())) {
            Superhero newHero = (Superhero) heroClass.newInstance();
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T15:13:11.387

假设你有类名列表 `className[]`

```
 for(int i =0;i<className.length;i++)
 {
  SuperHero superHero = (SuperHero)Class.forName("PACKAGE_NAME" + className[i]).newInstance();

  //use this superhero where you want. you can also save this superhero in ArrayList of type SuperHero.
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T14:53:01.810

假设您确定这种类型的反射是一个好主意，您可以这样做

```
heroClass.newInstance(); 
```

# ruby - 如何限制 Ruby `pp` 调用的输出？

> ID：10030879
> 
> 赞同：3
> 
> 时间：2012-04-05T14:49:43.403
> 
> 标签：ruby

我有一个递归对象（Cucumber::Rails::World.scenario），我想检查它（以便找到属于当前场景的标签）。`scenario.inspect`永远不会完成，并且`pp scenario`打印速度如此之快，即使是快速的一系列`Ctrl`-`c`它也填充了大约三千行。如何限制输出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T15:10:51.047

用于[`pretty_inspect`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/pp/rdoc/Kernel.html#method-i-pretty_inspect)将其作为字符串获取，然后仅获取前 n 个字符：

```
pp_output = scenario.pretty_inspect; nil
puts pp_output[0..n]; nil 
```

注意尾随`nil`的 s 导致 IRb 显示返回值`nil`而不是整个对象，这大大清理了输出。

为了获得更大的灵活性，请将其保存到文件中：

```
File.open "pp-output.txt", "w" do |f|
  f.puts scenario.pretty_inspect
end 
```

然后在您选择的寻呼机中查看：

```
$ less pp-output.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:07:49.890

在某些点插入`gets`（在小块之间`pp`）。然后，您可以通过在每个块后输入 enter 来慢慢浏览它们。

# ruby-on-rails - 在 Rails 中渲染位于子文件夹中的 mime 类型模板，而无需在渲染调用中显式提供整个路径

> ID：10030887
> 
> 赞同：1
> 
> 时间：2012-04-05T14:50:21.103
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mime-types

我正在使用基于用户角色的 rails 应用程序，它将根据给定的用户角色呈现不同的视图。这是通过使用自定义 mime 类型来完成的。我根据这里的堆栈溢出帖子构建了[它](https://stackoverflow.com/questions/3157063/different-set-of-views-for-different-users-roles)。

它工作得很好。您甚至**不必**在控制器中显式呈现相应的模板：

```
def index
    @projects = Project.all
end 
```

代替：

```
def index
    @projects = Project.all
    respond_to do |format|
      format.html
      format.admin
    end
end 
```

由于文件的 mime 类型结尾，控制器将自动呈现正确的模板。

我现在遇到的唯一问题是，我的视图文件夹有点杂乱无章，所有这些不同的模板，我想根据它们的类型将它们分组和组织在子文件夹中。假设我想创建一个名为“admin”的子文件夹并将所有管理员键入的文件放在那里。这导致文件不再被找到，因为控制器不在子文件夹中查找它们。因此我得到一个模板丢失错误。

有没有办法在子文件夹中组织它们，同时保持我的控制器干净，即不必在渲染调用中明确声明模板的整个路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:36:21.340

我可以通过更改[此处](http://unspace.ca/blog/cascading-view-paths-for-fun-and-profit/)建议的默认视图路径来重组视图文件夹。

# spring - Eclipse 无法识别@Inject？

> ID：10030888
> 
> 赞同：2
> 
> 时间：2012-04-05T14:50:22.560
> 
> 标签：spring, pom.xml, inject, autowired

Eclipse 无法识别我的 JSF-Apache Myfaces/Spring/Hibernate 项目中的 @Inject。

我试图在setter方法上使用它来注入对我在Spring容器中注册为@Component @SessionScoped的类的引用。

是什么赋予了？我似乎在我的 POM 中定义了最新版本的 Spring。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T15:10:20.193

`@Inject` is not a Spring annotation, but an annotation brought about by [JSR-330](http://www.jcp.org/en/jsr/detail?id=330). It is an annotation that Spring supports and it is synonymous with the `@Autowired` annotation.

You have to make sure that you have the jar that contains `@Inject`, because it is not a part of the standard JDK. You can download the jar from [here](http://grepcode.com/snapshot/repo1.maven.org/maven2/javax.inject/javax.inject/1), or you can use this maven dependency:

```
<dependency>
  <groupId>javax.inject</groupId>
  <artifactId>javax.inject</artifactId>
  <version>1</version>
</dependency> 
```

# neural-network - OCR和人工神经网络有什么关系？

> ID：10030891
> 
> 赞同：1
> 
> 时间：2012-04-05T14:50:33.753
> 
> 标签：neural-network, ocr, feature-detection

我看到不同的文章谈到 OCR 表单识别（数据提取），他们说他们使用神经网络来进行表单识别，那么人工神经网络（ANN）和表单识别之间有什么关系？如果我想从名片中提取字段，是需要使用 ANN 还是可选的？换句话说，我什么时候需要使用 ANN，什么时候不需要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T17:08:57.040

这有点不同。ANN 只是所有 OCR 中的“专家”。但是 OCR 引擎包含许多专家。当您学习 ANN 时，您将仅使用 ANN 构建一个简单的 OCR 引擎，但这与将它与三元组、形态学、数据类型（对 BCR 和 Forms 非常重要）、字典、连接组件算法结合使用的现代引擎相比无法比较等。因此，将其视为提取质量结果的技巧包中的工具之一。一个好的引擎将包含 ANN 和所有其他引擎。在 BCR 中还有额外的考虑，它应该非常重视连接的组件，首先是字典，然后使用 ANN 和模式匹配进行实际识别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T15:04:22.960

ANN 是执行 OCR 的一种方式。还有其他的。因此，如果您想使用 ANN 从名片中提取字段只是可选的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-04T19:00:17.993

好问题。我最近花了一些时间玩 OCRopus，这是一个做 OCR 的谷歌项目——你可以免费获得它并自己玩。我很确定它有一个人工神经网络作为它背后的模块之一。然而，光学字符识别的整个过程可以有很多步骤（很多不同的小模块，每个模块都做某事并将结果传递给下一个模块）。

所以，以下是我记得的一些由该项目中的模块完成的事情：

1.  有一个模块可以将图像变成黑白 - 这使得以后的模块更容易处理。
2.  摆脱斑点/斑点。
3.  理顺文本行。
4.  将文本行分解为单个单词（已经有几个星期了，不确定这个）

基本上，您可以使用不涉及神经网络的少量代码来完成上述操作。所以用这些小代码做起来更简单。

我认为神经网络仅用于识别单个字符 - 它是一组可能字符中的哪个字符。

OCRopus 中有一个训练命令，我已经连续运行了一个多星期，它不断向地图发送线路样本，并在运行过程中慢慢改变地图。我认为这是在训练 ANN 部分。

# asp.net-mvc-3 - 即使只有一页，webgrid 也会显示分页

> ID：10030893
> 
> 赞同：0
> 
> 时间：2012-04-05T14:50:39.667
> 
> 标签：asp.net-mvc-3, webgrid

我在 asp.net mvc3 中使用 Webgrid，并在分页和排序中使用它。

```
@{
    var grid = new WebGrid(rowsPerPage: 10, ajaxUpdateContainerId: "GridDiv");
    grid.Bind(source: Model);
    grid.Pager(WebGridPagerModes.All);
} 
```

底部的分页显示类似这样的页面切换

```
1 2 3 4 5 > 
```

当模型中的行数少于 10 行时，只有一页，底部的分页消失。

即使只有一页，有没有办法让它显示？

```
1 > 
```

希望我很清楚。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T06:38:13.240

一种快速解决方法是检查 TotalRowCount 并手动添加链接，

```
@{
var grid = new WebGrid(rowsPerPage: 10, ajaxUpdateContainerId: "GridDiv");
grid.Bind(source: Model);
grid.Pager(WebGridPagerModes.All);

if(grid.TotalRowCount <= 10)
{
<a href="#">1</a>
<a href="#">></a>
}
} 
```

这绝对不是正确的方法，您还打算如何点击此类链接？他们只是空链接那么这是给你的。

# r - 用扫描读取数据后，在 R 中设置数据帧

> ID：10030895
> 
> 赞同：0
> 
> 时间：2012-04-05T13:53:40.860
> 
> 标签：r, dataframe

我正在阅读有关 HTTP 访问日志的数据。我有一个文件，其中包含 IP 地址、年、月、日、小时和请求的 URL 列。我这样读文件：

```
ipdata = scan(file="sample_r.log", what=list(ip="", year=0, month=0, day=0, hour=0, verb="", url="")) 
```

这似乎有效。R-Studio 说 ipdata 是一个列表 [7] 并且 "names(ipdata)" 返回

```
[1] "ip"    "year"  "month" "day"   "hour"  "verb"  "url" 
```

所以这看起来很酷。我想做一些有趣的事情，比如绘制特定小时的一些数据。我尝试做一个子集：

```
s <- subset(ipdata, ipdata$hour==3) 
```

该数据看起来与第一个数据帧明显不同。s 是一个列表[297275]，以下内容无法正常工作：

```
> table(ipdata$verb)

GET    POST 
2870709 1596748 

> table(s$verb)
character(0) 
```

我会以正确的方式解决这个问题吗？我通常做的是将我的数据框包装在 table() 中，然后用 barplot 或 dotplot 它。R 是一个很好的方法吗？例如，我想说“在第 3 小时向我展示所有热门 URL”。或者“这个 IP 地址每小时显示多少次？”

**更新**看起来通过使用`read.table`而不是`scan`我能够获得数据框。显然扫描返回列表或其他东西的列表？绝对让像我这样的 n00b 感到困惑，但我现在感觉很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T16:20:24.503

如果你跑了

```
dat <- as.data.frame(ipdata)
str(dat) 
```

.... 您可能会看到它与您的 read.table() 操作的结果几乎相同。`read.table`是一个包装器`scan`并且做了很多格式化和一致性检查。

# jquery - jQuery 滑块在 FireFox 中不起作用

> ID：10030896
> 
> 赞同：0
> 
> 时间：2012-04-05T14:50:56.230
> 
> 标签：jquery, css, slider, jquery-animate

我制作了一个在 Safari、Chrome 和 EI 中运行良好的 jQuery 滑块，但它在 FF 3.6.28 中根本不渲染动画。

我正在使用两位代码。一个用于页面加载时，一个用于缩略图。第一个是：

```
$(document).ready(function()
{$("#hidden-1st").delay(1000).animate({ right: 10, width: '508px', 
            height: '286px' }, { duration: 1000, easing: 'easeInQuint'})
  }); 
```

点击缩略图的代码：

```
$(document).ready(function () {
    $("#Thumb1").click(function () {
        $("#hidden-1st").css({ right: -508, width: '508px', height: '286px' })
                        .html('<iframe src="http://player.vimeo.com/video/38581363?byline=0&amp;portrait=0&amp;autoplay=1" width="508" height="286" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>')
                        .delay(1000)
                        .animate({ right: 10, width: '508px', height: '286px' }, { duration: 1000, easing: 'jswing'});
        $(".innerleftPlayer p").html("A personal profile of entrepreneur Mark Evans.<br/><br/> dur: 2:51")
    }); 
```

这是CSS：

```
#leftsidePlayer {
background-image:url(../images/playerLeftSideBG.jpg);
float:left;
height:236px;
width:158px;
position:relative;
padding: 25px;
}
.innerleftPlayer{
height: 236px;
width: 158px;
position:absolute;
display: table;
    }
.innerleftPlayer p{
display: table-cell;
vertical-align: middle;
text-align: left;
font-family:Cuprum, sans-serif;
font-size:13pt;
color:#5f5f60;
    }
#rightsidePlayer {
background-color:#999;
float:left;
height:286px;
width:508px;
overflow: hidden;
}

#hidden-1st {
height:286px;
width:508px;
position:absolute;
right: -508px;
}

.inline {
float:left;
margin-right:8px;
}

#Thumb1,#Thumb2,#Thumb3,#Thumb4 {
float:left;
height:103px;
width:184px;
position:relative;
margin-right:30px;
}

.thumbsWrap {
width:826px;
height:103px;
background-image:url(../images/bannerBg.jpg);
position:relative;
padding:23px 57px;
} 
```

这是标记：

```
<div id="videoBox">
                <!--Player Begin-->
                <div id="outterGPlayerBox">
                    <div id="GPlayerBox">
                        <div id="leftsidePlayer">
                            <div class="innerleftPlayer">
                       <p>A personal profile of entrepreneur Mark Evans.<br/><br/> dur: 2:51</p>
                            </div>
                        </div><!--end of leftsidePlayer-->
                        <div id="rightsidePlayer">
                        <div id="hidden-1st"><iframe src="http://player.vimeo.com/video/38581363?byline=0&amp;portrait=0" width="508" height="286" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe></div>  
                      </div><!--end of rightsidePlayer-->
                  </div><!--end of GPlayer Box-->   
                </div><!--end of outterGPlayerBox-->   
                <!--Player End-->
            </div><!--end of videoBox--> 
```

这是FF的问题吗？有解决办法吗？还是我的代码需要修复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T16:14:09.680

问题可能在于您将整数发送到参数的`animate`函数`right`。您需要添加`px`到该整数的末尾以使其与跨浏览器兼容。

```
$("#hidden-1st").delay(1000).animate({ right: '10px', width: '508px', height: '286px' }, { duration: 1000, easing: 'easeInQuint'}); 
```

# windows-phone-7 - WP7 mp3文件并发读写

> ID：10030901
> 
> 赞同：2
> 
> 时间：2012-04-05T14:51:19.243
> 
> 标签：windows-phone-7, mp3, media, isolatedstorage

mp3 来源： http: [//mysite.com/isrc=1289](http://mysite.com/isrc=1289)（将返回 .mp3 文件）

如何实现一个从上面的源获取mp3的媒体播放器，将流写入隔离存储，并且在写入时，播放器正在播放歌曲......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T06:04:16.420

[http://timheuer.com/blog/archive/2010/08/16/download-and-store-media-for-playback-in-windows-phone-7-using-mediastreamsource.aspx](http://timheuer.com/blog/archive/2010/08/16/download-and-store-media-for-playback-in-windows-phone-7-using-mediastreamsource.aspx)

我希望它会帮助你：P

# javascript - 查找隐藏元素并将它们存储在数组中

> ID：10030910
> 
> 赞同：0
> 
> 时间：2012-04-05T14:51:47.670
> 
> 标签：javascript, jquery

我有一些像这样的标记：

```
<div class="slideshow">
    <div class="slide" style="display:block;"></div>
    <div class="slide" style="display:none;"></div>
    <div class="slide" style="display:none;"></div>
    <div class="slide" style="display:none;"></div>
</div> 
```

这基本上是一些 div，其中一个显示而其他隐藏。

我正在尝试找到当前未显示的那些，然后随机选择其中一个...

```
var length = $('div.slideshow').find('div.slide:hidden').length;

var ran = Math.floor(Math.random()*length) + 1;
var newSlide = $("div.slideshow > div.slide:nth-child(" + ran + ")"); 
```

但是，因为它们不止一个隐藏的 div，所以它不起作用......我猜我需要设置一个数组？任何人都可以在这里帮助我，因为我有点困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T14:58:32.953

试试下面，

[**演示**](http://jsfiddle.net/skram/aNcx7/1/)

```
var $hiddenSlides = $('div.slideshow').find('div.slide:hidden');
var length = $hiddenSlides.length;

var ran = Math.floor(Math.random()*length );
var newSlide = $hiddenSlides.get(ran); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T15:02:15.963

这个怎么样：

```
var $hiddenSlides = $('div.slideshow').find('div.slide:hidden');
var ran = Math.floor(Math.random()*$hiddenSlides.length);
var newSlide = $hiddenSlides.get(ran); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T14:57:35.450

`$("div.slideshow > div.slide:nth-child(" + ran + ")"`从所有孩子中选择，包括已经可见的孩子。你想要那个吗？

如果是这样，您必须使用

```
$("div.slideshow > div.slide:nth-child(" + ran + ")").each(function() {
    $(this).show();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T15:00:48.643

这应该适合你：

```
var length = $('div.slideshow').find('div.slide:hidden').length;
var ran = Math.floor(Math.random()*length);
var newSlide = $(".slideshow .slide:hidden:eq(" + ran + ")"); 
```

您将在这个**[jsFiddle](http://jsfiddle.net/j08691/cpjyT/)**中看到输出始终是隐藏的 div 之一。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T15:01:54.420

### 解释：

它不会起作用，因为不能保证元素的顺序，为什么不使用与查找隐藏元素相同的选择器遍历元素呢？

### 例子：

保存可见元素：

```
var shownSlide = $("div.slideshow > div.slide:visible"); 
```

应用随机遍历：

```
var ran = Math.floor(Math.random()*length) + 1;
$("div.slideshow > div.slide:hidden:eq(" + ran + ")").show(); 
```

而不是重新隐藏可见元素：

```
$(shownSlide).hide(); 
```

# ruby-on-rails - Gem Install Bundler 通过 Windows 中的批处理脚本 - 进程被杀死？

> ID：10030912
> 
> 赞同：1
> 
> 时间：2012-04-05T14:52:00.130
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, gem, bundler

我正在尝试使用批处理脚本在 Windows 机器上自动化 ruby​​ 应用程序部署。

一切都变得花花公子，除了以下行：

```
gem install bundler 
```

如果我手动输入，一切顺利。但是，如果我使用批处理脚本，则安装完成后该过程将立即终止。这就是我正在使用的：

```
pause
gem install bundler --no-ri --no-rdoc
pause 
```

我已经尝试使用 -f 开关以及所有文档；似乎没有什么能阻止窗户被杀死。我需要这个过程来保持活力，这样我就可以捆绑安装。知道为什么会发生这种情况，以及如何在安装后使其保持活力？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T13:56:33.127

`gem`是一个批处理文件 ( `gem.bat`)。当您从另一个调用批处理文件时，它会将控制权转移给它而不是恢复。

您应该尝试使用`CALL`：

> 调用第二个批处理文件 CALL 命令将启动一个新的批处理文件上下文以及任何指定的参数。当到达第二个批处理文件的末尾时（或者如果使用 EXIT），控制将返回到刚开始的 CALL 语句之后。

此处的文档：http: [//ss64.com/nt/call.html](http://ss64.com/nt/call.html)

您还可以通过执行`ruby -S gem ...`更详细的操作来避免批处理`gem`文件，因为`gem.bat`.

希望有帮助。

# javascript - Chrome 在具有 maxlength 属性的 textarea 中计算错误的字符

> ID：10030921
> 
> 赞同：45
> 
> 时间：2012-04-05T14:52:26.240
> 
> 标签：javascript, html, google-chrome, textarea, maxlength

这是一个例子：

```
$(function() {
  $('#test').change(function() {
    $('#length').html($('#test').val().length)
  })
})
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<textarea id=test maxlength=10></textarea>
length = <span id=length>0</span>
```

用行（一行一个字符）填充文本区域，直到浏览器允许。完成后，离开textarea，js代码也会计算字符。

所以在我的情况下，在 chrome 阻止我之前，我只能输入 7 个字符（包括空格）。尽管 maxlength 属性的值为 10：

![图片](../Images/94d310c96c97fb1085f3f8afca96e50a.png)

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-07-04T04:50:25.837

以下是如何让您的 javascript 代码匹配浏览器认为在 textarea 中的字符数量：

[http://jsfiddle.net/FjXgA/53/](http://jsfiddle.net/FjXgA/53/)

```
$(function () {
    $('#test').keyup(function () {
        var x = $('#test').val();

        var newLines = x.match(/(\r\n|\n|\r)/g);
        var addition = 0;
        if (newLines != null) {
            addition = newLines.length;
        }

        $('#length').html(x.length + addition);
    })
}) 
```

基本上，您只需计算文本框中的总换行符并将每个换行符的字符数加 1。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-04-05T14:56:11.470

当涉及到 maxlength 时，您的回车每个被视为 2 个字符。

```
1\r\n
1\r\n
1\r\n
1 
```

但似乎 javascript 只能`\r\n`加起来**7**之一（我不确定是哪一个） 。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-04-05T15:06:40.063

由于未知的原因，jQuery 总是将 a 值中的所有换行符转换`<textarea>`为单个字符。也就是说，如果浏览器给它`\r\n`一个换行符，jQuery 会确保它只是`\n`在`.val()`.

`<textarea>`出于“maxlength”的目的，Chrome 和 Firefox 都以相同的方式计算标签的长度。

但是，HTTP 规范坚持将换行符表示为`\r\n`. 因此，jQuery、webkit 和 Firefox 都犯了这个错误。

结果是，`<textarea>`如果您的服务器端代码确实具有固定的字段值最大大小，那么标签上的“maxlength”几乎没有用。

*编辑*——在这一点上（2014 年末），Chrome (38) 看起来运行正常。然而，Firefox (33) 仍然不将每个硬返回计为 2 个字符。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2014-01-31T18:57:25.803

根据上面Pointy的回答，似乎正确的方法是将所有新行都计为两个字符。这将在浏览器之间对其进行标准化，并与发布时发送的内容相匹配。

所以我们可以按照规范，用回车 - 换行对替换所有出现的回车后没有换行的回车，以及所有没有回车的换行。

```
var len = $('#test').val().replace(/\r(?!\n)|\n(?!\r)/g, "\r\n").length; 
```

然后使用该变量来显示 textarea 值的长度，或者限制它，等等。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-05T15:03:17.600

看起来javascript也在考虑换行符的长度。

尝试使用：

```
 var x = $('#test').val();

x = x.replace(/(\r\n|\n|\r)/g,"");    

$('#length').html(x.length); 
```

我在你的小提琴中使用它并且它正在工作。希望这可以帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-12-18T16:10:19.683

Here's a more universal solution, which overrides the jQuery 'val' function. Will be making this issue into a blog post shortly and linking here.

```
var originalVal = $.fn.val;
$.fn.val = function (value) {
    if (typeof value == 'undefined') {
        // Getter

        if ($(this).is("textarea")) {
            return originalVal.call(this)
                .replace(/\r\n/g, '\n')     // reduce all \r\n to \n
                .replace(/\r/g, '\n')       // reduce all \r to \n (we shouldn't really need this line. this is for paranoia!)
                .replace(/\n/g, '\r\n');    // expand all \n to \r\n

            // this two-step approach allows us to not accidentally catch a perfect \r\n
            //   and turn it into a \r\r\n, which wouldn't help anything.
        }

        return originalVal.call(this);
    }
    else {
        // Setter
        return originalVal.call(this, value);
    }
}; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-05T14:56:06.043

那是因为一个新行实际上是 2 个字节，因此是 2 个长。JavaScript 不这样看，因此它只会计数 1，总共 7（3 个新行）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-05-23T09:50:29.463

如果要获取文本区域的剩余内容长度，则可以在包含换行符的字符串上使用 match。

HTML：

```
<textarea id="content" rows="5" cols="15" maxlength="250"></textarea> 
```

JS：

```
var getContentWidthWithNextLine = function(){
    return 250 - content.length + (content.match(/\n/g)||[]).length;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-05-09T00:54:19.990

```
var value = $('#textarea').val();
var numberOfLineBreaks = (value.match(/\n/g)||[]).length;
$('#textarea').attr("maxlength",500+numberOfLineBreaks); 
```

已经在 IE 中的 google 上完美运行必须避免脚本！在 IE 中，“断线”只计算一次，因此请避免在 IE 中使用此解决方案！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-07-23T02:12:16.793

文本区域在浏览器之间仍未完全同步。我注意到两个主要问题：回车和字符编码

**回车**

默认情况下被操作为 2 个字符**\r\n**（Windows 样式）。

问题是 Chrome 和 Firefox 会将其视为一个字符。您也可以选择它来观察有一个隐身字符被选为空格。

在这里可以找到一种解决方法：

```
var length = $.trim($(this).val()).split(" ").join("").split('\n').join('').length; 
```

[当用户键入换行符时，Jquery 字数计数](https://stackoverflow.com/questions/17167070/jquery-word-counts-when-user-type-line-break)

另一方面，Internet Explorer 会将其计为 2 个字符。

他们的代表是：

> **二进制：** 00001101 00001010
> 
> **十六进制：** 0D0A

, 并以 UTF-8 表示为 2 个字符，maxlength 计为 2 个字符。

HTML 实体可以是

1）从javascript代码创建：

```
<textarea id='txa'></textarea>

document.getElementById("txa").value = String.fromCharCode(13, 10); 
```

2）从textarea的内容解析：

> **Ansi 代码：**

```
<textarea>Line one.&#13;&#10;Line two.</textarea> 
```

3) 从键盘输入 Enter 键

4) 定义为文本框的**多行**内容

```
<textarea>Line one.
Line two.</textarea> 
```

**字符编码**

像 textarea 这样的输入字段的字符编码独立于页面的字符编码。如果您打算计算字节数，这很重要。因此，如果您有一个元标头来定义页面的 ANSI 编码（每个字符 1 个字节），则文本框的内容仍然是 UTF-8，每个字符 2 个字节。

此处提供了字符编码的解决方法：

```
function htmlEncode(value){
  // Create a in-memory div, set its inner text (which jQuery automatically encodes)
  // Then grab the encoded contents back out. The div never exists on the page.
  return $('<div/>').text(value).html();
}

function htmlDecode(value){
  return $('<div/>').html(value).text();
} 
```

[从输入字段读取属性时 HTML 编码丢失](https://stackoverflow.com/questions/1219860/html-encoding-lost-when-attribute-read-from-input-field)

# f# - 第三方类型的动态调度

> ID：10030923
> 
> 赞同：2
> 
> 时间：2012-04-05T14:52:30.150
> 
> 标签：f#, dynamic-dispatch

这与我[之前](https://stackoverflow.com/q/10020242/162396)关于以类型安全的方式扩展第三方类型的问题有关。有一些很好的答案，但它们依赖于编译时已知的具体类型。我不能依赖这个。有时类型是盒装的。有没有办法扩展第三方类型来模拟动态调度？

我会为我自己的库使用一个接口。例如：

```
type ICanSerialize =
  abstract ToSerializable : unit -> IDictionary<string,obj>

type B(items: obj[]) =
  interface ICanSerialize with
    member __.ToSerializable() = 
      dict ["Items", items |> Array.map (fun x -> 
        (x :?> ICanSerialize).ToSerializable()) |> box] 
```

作为旁注，如果我们可以这样做会很好：

```
let inline toSerializable x =
  (^T : (member ToSerializable : unit -> IDictionary<string,obj>) x)

let x = obj()
let d = toSerializable (unbox x) 
```

但显然不可能将运行时强制转换和内联结合起来。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T16:43:52.270

如果我正确理解您的问题，您希望进行一些类似转换的操作，该操作采用未知类型 ( `System.Object`) 的动态加载对象并将其转换为某种结构类型，并且最好保证该对象支持由指定的所有操作这个类型。

我认为没有标准机制，但可以使用`System.Reflection.` `Emit`. [不久前，我为 C# 和 PHP 之间的互操作性](http://tomasp.net/blog/ducktyping-in-phalaner.aspx)实现了类似的东西。

这个想法是编写一个函数来动态生成一个实现接口的类，并且接口的所有成员都简单地委托给包装对象的成员。在包装对象时，您可以检查所有成员是否存在并具有正确的签名（但对象实际上不必实现相同的接口）。

对于代码示例来说，这有点太多了，但我希望总体思路也很有用（如果您想了解它是如何完成的，请在[Phalanger 源代码](http://phalanger.codeplex.com/)中搜索方法）。`NewObject`

# ruby-on-rails - Cucumber：如何在 After 块中获取标签列表？

> ID：10030931
> 
> 赞同：2
> 
> 时间：2012-04-05T14:52:50.657
> 
> 标签：ruby-on-rails, cucumber

我在功能支持文件中有以下内容：

```
After do |scenario|
  screen_shot_and_save_page if scenario.failed?
end 
```

我*只想*在包含场景标签的情况下运行它`@javascript`。我该怎么写？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T15:01:19.923

```
After("@sometag") do |scenario|
  screen_shot_and_save_page if scenario.failed?
end 
```

您还可以`or`,`and`和`not`标签。例如

```
After("@alpha,~@bravo","@charlie") do |scenario|
  screen_shot_and_save_page if scenario.failed?
end 
```

以上将仅适用于有`@charlie`标签和`@alpha`标签或没有`@bravo`标签的场景

# jquery - 使用 jQuery 比较分组选择选项

> ID：10030941
> 
> 赞同：1
> 
> 时间：2012-04-05T14:53:23.050
> 
> 标签：jquery, html, html-select

我在一个页面上有几个选择标签，我使用数据属性对它们进行分组，以确保可以比较具有相同数据键的标签。在提交时，我想检查这些组是否没有选择相同的选项值。所以想象这是一个深度图表，你列出了足球四分卫和跑卫，你想修改他们在深度图表上的位置。我不能让这两个四分卫在深度图上排名第一。我需要做的就是提醒用户......“嘿，你不能对这个位置有相同的值”，但我不确定如何使用 jQuery 进行比较以达到这一点。

```
Quarterback A
<select data-position="qb">
  <option>1</option>
  <option>2</option>
</select>

Quarterback B
<select data-position="qb">
  <option>1</option>
  <option>2</option>
</select>

Runningback A
<select data-position="rb">
  <option>1</option>
  <option>2</option>
</select>

Runningback B
<select data-position="rb">
  <option>1</option>
  <option>2</option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T15:29:15.950

我刚刚使用类来识别您的组，而不是 jQuery 数据属性。

```
Quarterback A
<select class="qb">
  <option>1</option>
  <option>2</option>
</select>

Quarterback B
<select class="qb">
  <option>1</option>
  <option>2</option>
</select>

Runningback A
<select class="rb">
  <option>1</option>
  <option>2</option>
</select>

Runningback B
<select class="rb">
  <option>1</option>
  <option>2</option>
</select>

<button id="eval">evaluate</button> 
```

​</p>

检查this JS fiddle，我认为它可以满足您的需求。如果您需要帮助解释代码，请告诉我，

[http://jsfiddle.net/SnJP4/5/](http://jsfiddle.net/SnJP4/5/)

我已经设置了一个例程来绑定到“评估”按钮的单击事件。如果您要添加更多职位，例如宽接收器等，那么只需将类的名称添加到`classes`数组中。这里：

```
$('#eval').click(function() {
    var classes = ['qb','rb'];
    $(classes).each(function(index, el){
        var list = [];
        $('.'+classes[index]).each(function() {
            //alert($(this).val());
            list.push($(this).val());
        });
        list = list.sort();
        for (var i = 0; i < list.length - 1; i++) {
            if (list[i + 1] == list[i]) {
                alert('duplicate ' + classes[index]);
                break;
            }
        }
    });
});​ 
```

# nservicebus - NServiceBus IHandleTimeouts 抛出 SagaNotFoundHandlers

> ID：10030943
> 
> 赞同：1
> 
> 时间：2012-04-05T14:53:30.240
> 
> 标签：nservicebus, nservicebus3

我正在尝试在我的 Saga 中使用 NServiceBus 3.0 ITimeoutState 和 IHandleTimeouts 功能。我有以下代码片段。以下代码在 NServiceBus.3.0.0-rc5 上运行良好，没有任何问题。但是，当我使用任何版本 > 3.0.0 更新 DLL 时，传奇超时没有按预期工作，它会引发以下警告！

2012-04-05 09:15:26,267 [Worker.5] INFO NServiceBus.Sagas.Impl.SagaDispatcherFactory [(null)] <(null)> - 找不到消息类型 SomeNameSpace.MySagaTimeout 的 saga，id 为 9496c29e- f745-4ada-8212-99e47324922b\20920。将调用**SagaNotFoundHandlers**。

请帮我解决这个问题。

**超时消息：**

```
public class MySagaTimeout : ITimeoutState
{
    public InputMessage1 Source { get; set; }
} 
```

**传奇密码：**

```
public class BrandMerchandisingRoot : Saga<MySagaState>,
                                          IAmStartedByMessages<InputMessage1>,
                                          IHandleTimeouts<MySagaTimeout>,
                                          IHandleMessages<MySagaTimeout>
{
      public void Handle(InputMessage1 message)
      {
        RequestUtcTimeout(5.Seconds(), new MySagaTimeout {Source = message});
      }

      public void Timeout(MySagaTimeout state)
      {
        //some other code here
      }

      public void Handle(MySagaTimeout message)
      {
         Timeout(message);
      }
} 
```

**配置：**

```
Configure.With()
.StructureMapBuilder(ObjectFactory.Container)
.RunTimeoutManager()
.UseInMemoryTimeoutPersister()
.MsmqSubscriptionStorage()
.Sagas()
.UnicastBus(); 
```

注意：我正在使用自己的 saga 持久化器，并且我有 *IFindSagas<MySagaState>.Using<MySagaTimeout>的实现*

# java - 将 JDialog 居中于父级之上

> ID：10030947
> 
> 赞同：35
> 
> 时间：2012-04-05T14:53:36.573
> 
> 标签：java, swing, layout, user-interface, jframe

我有一个带有按钮的 Java swing 应用程序，该按钮在执行某个操作时会产生一个弹出窗口。我想在渲染时将弹出窗口的中心点与父窗口的中心点对齐。如何计算要插入`setLocation()`弹出窗口的 x,y 坐标？

只是为了澄清。我不想要这种行为，`setLocationRelativeTo()`因为它将弹出窗口的左上角像素设置在父框架的中心像素之上。我想将弹出窗口的中心像素设置在父框架的中心像素上。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-05-14T17:38:02.257

在`JDialog`你创建的时候，你应该`pack()`先调用，然后`setLocationRelativeTo(parentFrame)`调用`setVisible(true)`。使用该顺序，`JDialog`应该出现在父框架的中心。

如果您不`pack()`先调用，那么设置相对于父级的位置将无法正常工作，因为此时`JDialog`不知道它的大小。它似乎将大小设为 0 x 0，这导致在对其他答案之一的评论中提到的“弹出窗口的左上角像素位于父级中心像素之上”的位置。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-04-05T21:13:04.647

> `setLocationRelativeTo`..这将弹出窗口的左上角像素设置在父级的中心像素之上。..

不，不是的！

![居中对话框](../Images/24319c1be46fdd1597ea14063768f6bb.png)

据我所知，这个简单示例弹出的 3 个对话框中的每一个似乎都居中。我只能猜测代码`setLocationRelativeTo` ***在错误的时间调用。***

```
import javax.swing.*;

class CenterTheDialog {

    CenterTheDialog() {
        for (int ii=1; ii<4; ii++) {
            JFrame f = new JFrame("Frame " + ii);
            f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

            f.setSize(400,300);
            f.setLocationByPlatform(true);
            f.setVisible(true);

            JDialog d = new JDialog(f);
            d.setSize(300,200);
            d.setLocationRelativeTo(f);
            d.setVisible(true);
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(() -> {
            new CenterTheDialog();
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-05T14:57:43.237

[`Window#setLocationRelativeTo`](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#setLocationRelativeTo%28java.awt.Component%29)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-07-28T20:40:14.787

您可以利用事件`e`来获取父窗口。使用`getWindowAncestor`和`e.getSource()`。

`dialog.setLocationRelativeTo(SwingUtilities.getWindowAncestor((Component) e.getSource()))`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-05T15:00:23.350

您可以尝试将父窗口的坐标及其大小传递给新窗口，并在每个轴上添加坐标 + 1/2 父框架大小 - 弹出窗口 x/y 的 1/2 以中心为中心。

或者..如果你扩展你可以使用 setLocationRelativeTo(owner)

希望这可以帮助

# jquery - 在 Wordpress 中向锚点添加属性

> ID：10030953
> 
> 赞同：2
> 
> 时间：2012-04-05T14:53:50.910
> 
> 标签：jquery, wordpress, jquery-mobile, attributes, anchor

我想将自定义属性设置添加到生成的 Wordpress 锚链接。这是为了让 Jquery Mobile 找到属性并从中制作一个按钮。

每个通过 PHP 在 Wordpress 中生成的锚链接都包含 page_item 类。所以我的猜测是搜索所需的'page_item'类，只需添加所需的属性信息即可生成所需的按钮。

我的 header.php 文件包含以下指向所需 Jquery 库的链接：

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script> 
```

我想使用以下代码向我的锚链接添加属性，但我似乎无法让它工作。（这段代码放在header.php文件的头部）

```
 <script type="text/javascript">
                    $('.page_item').ready(function(){
                     $(this).attr('data-transition', 'pop');
                     $(this).attr('data-icon', 'arrow-r');
                     $(this).attr('data-iconpos', 'left');
                     $(this).attr('data-role', 'button');
                    });

        </script> 
```

通过 firebug Wordpress 检查代码时，会生成以下代码：

```
<ul>

                    <li class="page_item page-item-5"><a href="http://localhost/ddwp/?page_id=5">Home</a>
<ul class='children'>
<li class="page_item page-item-11"><a href="http://localhost/ddwp/?page_id=11">Link1</a></li>
</ul>
</li>
<li class="page_item page-item-17"><a href="http://localhost/ddwp/?page_id=17">Link2</a></li>
<li class="page_item page-item-21"><a href="http://localhost/ddwp/?page_id=21">Link3</a></li>
<li class="page_item page-item-23"><a href="http://localhost/ddwp/?page_id=23">Link4</a></li>
<li class="page_item page-item-62 current_page_item"><a href="http://localhost/ddwp/?page_id=62">Link5</a></li>
                </ul> 
```

提前致谢！

亲切的问候 Dragon54

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T15:06:30.100

您的脚本无法正常工作有几个原因。以下是一些建议，以及一些经过测试以将您所追求的属性应用于导航链接的代码：

1.  您可能会考虑将`ready`每个单独的调用移到一个包含所有调用的函数，而不是单独的每个调用。（我在下面为你做了）。
2.  `.page_item`不是一个链接，它是一个 li 元素。另请注意，这只是导航链接 - 它不适用于页面/帖子内容中的任何链接。
3.  WordPress 中的 Jquery 使用`$`. 通过将调用包装在准备好的用 调用的文档中`jQuery`，您仍然可以`$`在函数内使用来调用 jQuery 函数。

    ```
    jQuery(function($) {
        $('.page_item a').each(function(){
            $(this).attr('data-transition', 'pop');
            $(this).attr('data-icon', 'arrow-r');
            $(this).attr('data-iconpos', 'left');
            $(this).attr('data-role', 'button');
        });
    }); 
    ```

**编辑：**
根据@Jasper 的出色评论，**更好**的方法是：

```
jQuery(function($) {
    $('.page_item a').attr({ 'data-transition' : 'pop', 
            'data-icon' : 'arrow-r', 
            'data-iconpos' : 'left', 
            'data-role' : 'button' });
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T14:57:55.463

`$.ready()`是文档加载的特殊事件，仅对文档起作用。您需要遍历使用的项目`$.each()`。

```
$(document).ready(function(){
  $('.page_item').each(function() {
    $(this).attr('data-transition', 'pop');
    $(this).attr('data-icon', 'arrow-r');
    $(this).attr('data-iconpos', 'left');
    $(this).attr('data-role', 'button');
  });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T15:11:51.833

```
jQuery(function() {
    jQuery('li.page_item a').each(function () {
        jQuery(this).attr({
            'data-transition': 'pop',
            'data-icon': 'arrow-r',
            'data-iconpos': 'left',
            'data-role': 'button'
        });
    });
}); 
```

要不就

```
jQuery(function () {
    jQuery('li.page_item a').attr({
        'data-transition': 'pop',
        'data-icon': 'arrow-r',
        'data-iconpos': 'left',
        'data-role': 'button'
    });
}); 
```

# actionscript-3 - AS3 - LocalConnection 错误 #3691：超出此资源类型的资源限制

> ID：10030958
> 
> 赞同：0
> 
> 时间：2012-04-05T14:54:13.997
> 
> 标签：actionscript-3, localconnection

我正在使用 LocalConnection 对象在其他 SWF 上发送记录消息。

我的代码如下。

```
var outgoing_lc:LocalConnection = new LocalConnection();
outgoing_lc.send("_log_output", "displayMsg", outStr) 
```

注意到很复杂，它几乎可以在机器上工作，但是当我运行这是 MAC 机器时，它会抛出以下错误

```
Error #3691: Resource limit for this resource type exceeded.

LocalConnection/send() 
```

任何人都可以有任何想法吗？为什么会出现这样的错误。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T23:21:38.697

你想看看这个：[http](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/LocalConnection.html#send) ://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/LocalConnection.html#send () 并尝试将你的数据分成40k以下的块

# javascript - 在没有表单的情况下将查询数据发布到 URL 的方法？

> ID：10030964
> 
> 赞同：2
> 
> 时间：2012-04-05T14:54:39.427
> 
> 标签：javascript, html

我需要通过 URL 传递一些信息，只需单击一个链接，而不是使用带有表单和输入按钮的 action="GET"。这可能吗？这只是*客户端*，没有服务器，所以关于 PHP 等的建议在这种情况下不会有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T14:57:08.833

在您的锚点中，更改 href 以在末尾包含一个查询字符串。

例如

```
 <a href="http://www.example.com/test.html?parameter=2"> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T15:01:43.397

假设您可以访问客户端上的变量，您可以执行以下操作：

```
<script type="text/javascript">
    navigateToPage = function(val){        
        window.location.href = "/somefolder/somefile.htm?id=" + val;
    }
</script>
<input type="button" value="Navigate" onclick="navigateToPage(5);" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T15:05:23.100

您将需要使用 JavaScript 来获取所有值，然后将它们组合成一个 URL。

这是一个示例（使用[jQuery](http://jQuery.com)库）：

```
<a href="http://example.com/test.html" id="paramLink">Click</a>

<script>
$(function(){
  // The data, from the page
  var id = 1, name = 'test';

  // Add event to link
  $('#paramLink').click(function(e){
    e.preventDefault(); // Stop the browser from following the link

    location.href = $(this).attr('href')+'?id='+id+'&name='+name; // Build the URL
  });
});
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T15:05:16.223

将您的信息放在锚点中并随之发布

```
<a href="yourpage.php?id=2&action=edit"> click! </a> 
```

如何在重定向页面上获取这些值；如果您使用 PHP。

```
$id=intval($_REQUEST['id']);
$action=$_REQUEST['action']; 
```

# java - 如何将 ProgressMonitorInputStream 添加到 ftp 上传？

> ID：10030969
> 
> 赞同：0
> 
> 时间：2012-04-05T14:54:59.907
> 
> 标签：java, ftp, progress-bar, inputstream, fileinputstream

任何人都可以看到这段代码有什么问题。它不会显示进度条，但会上传所有文件。我也检查了太阳教程和摇摆工人，但我还不能修复它。

```
private static boolean putFile(String m_sLocalFile, FtpClient m_client) {
    boolean success = false;
    int BUFFER_SIZE = 10240;
    if (m_sLocalFile.length() == 0) {
        System.out.println("Please enter file name");
    }
    byte[] buffer = new byte[BUFFER_SIZE];
    try {
        File f = new File(m_sLocalFile);
        int size = (int) f.length();
        System.out.println("File " + m_sLocalFile + ": " + size + " bytes");
        System.out.println(size);
        FileInputStream in = new FileInputStream(m_sLocalFile);
        //test
        InputStream inputStream = new BufferedInputStream(
                      new ProgressMonitorInputStream(null,"Uploading " + f.getName(),in));

        //test
        OutputStream out = m_client.put(f.getName());

        int counter = 0;
        while (true) {
            int bytes = inputStream.read(buffer);  //in
            if (bytes < 0)
                break;
            out.write(buffer, 0, bytes);
            counter += bytes;
            System.out.println(counter);
        }

        out.close();
        in.close();
        inputStream.close();
        success =true;
    } catch (Exception ex) {
        System.out.println("Error: " + ex.toString());
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T15:44:40.797

我认为你的代码很好。
也许任务花费的时间不够长，以至于需要进度条？

这是您的代码的修改版本，它从本地文件读取并写入另一个本地文件。
我还为写入添加了延迟，以便让进度条有时间启动。这在我的系统上运行良好，带有一个 12MB 的 PDF 文件示例，并显示进度条。
如果您的文件较小，则只需将睡眠时间从 5 毫秒增加到 100 毫秒或其他时间 - 您需要进行试验。

而且我什至不知道 ProgressMonitorInputStream 类的存在，所以我自己学到了一些东西；]。

```
/**
 * main
 */
public static void main(String[] args) {
    try {
        System.out.println("start");

        final String inf = "d:/testfile.pdf";
        final String outf = "d:/testfile.tmp.pdf";
        final FileOutputStream out = new FileOutputStream(outf) {
            @Override
            public void write(byte[] b, int off, int len) throws IOException {
                super.write(b, off, len);
                try {
                    // We delay the write by a few millis to give the progress bar time to kick in
                    Thread.sleep(5);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        };

        putFile(inf, out);

        System.out.println("end");
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }
}

private static boolean putFile(String m_sLocalFile, OutputStream out /*FtpClient m_client*/) {
    boolean success = false;
    int BUFFER_SIZE = 10240;
    if (m_sLocalFile.length() == 0) {
        System.out.println("Please enter file name");
    }
    byte[] buffer = new byte[BUFFER_SIZE];
    try {
        File f = new File(m_sLocalFile);
        int size = (int) f.length();
        System.out.println("File " + m_sLocalFile + ": " + size + " bytes");
        System.out.println(size);
        FileInputStream in = new FileInputStream(m_sLocalFile);
        //test
        InputStream inputStream = new BufferedInputStream(
                      new ProgressMonitorInputStream(null,"Uploading " + f.getName(),in));

        //test
        //OutputStream out = m_client.put(f.getName());

        int counter = 0;
        while (true) {
            int bytes = inputStream.read(buffer);  //in
            if (bytes < 0)
                break;
            out.write(buffer, 0, bytes);
            counter += bytes;
            System.out.println(counter);
        }

        out.close();
        in.close();
        inputStream.close();
        success =true;
    } catch (Exception ex) {
        System.out.println("Error: " + ex.toString());
    }
    return true;
} 
```

# animation - 从 Cocos2d 1.0.1 升级到 2.0 后 Sprite Sheet 动画失败

> ID：10030974
> 
> 赞同：2
> 
> 时间：2012-04-05T14:55:13.390
> 
> 标签：animation, cocos2d-iphone, xcode4.2, ccsprite

我根据在网上找到的一些教程创建了一个简单的 2 帧精灵动画。我拍了两张图片，用 plist 和 png 文件创建了一个精灵表，并将它们合并到我的代码中，如下所示。此设置在 Cocos2d V 1.0.1 中运行良好。我刚刚将我的项目升级到 2.0rc0a，现在我的应用程序在它应该从第一帧切换到第二帧的地方崩溃并出现以下错误：`'CCSprite: setTexture doesn't work when the sprite is rendered using a CCSpriteBatchNode'`

我查看了这个[SO question](https://stackoverflow.com/q/9305286/1007725)，但我不确定这是否与我做错的事情相同，并且因为我对 Cocos2d 还是很陌生，我不确定如何正确调整我的代码。这是我在注释中没有看到的 2.0 更改的内容，我应该报告的错误，还是我的编码不正确？我仍然有一个 1.0.1 项目的副本，其代码相同，并且动画可以正常工作。

```
//CHAMELEON
[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"front page/mainchameleon.plist"];
mainChameleon = [CCSpriteBatchNode batchNodeWithFile:@"front page/mainchameleon.png"];
[self addChild:mainChameleon z:7];
NSMutableArray *chameleonFrames = [NSMutableArray array];
for (int i = 1; i <= 2; ++i) 
{
    [chameleonFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:[NSString stringWithFormat:@"chameleon%d.png", i]]];
}

CCAnimation *mouthAnim = [CCAnimation animationWithSpriteFrames:chameleonFrames delay:0.3f];
chameleon = [CCSprite spriteWithSpriteFrameName:@"chameleon1.png"];
CCAnimate *chameleonAction = [CCAnimate actionWithAnimation:mouthAnim];
CCDelayTime *chameleonDelay = [CCDelayTime actionWithDuration:10];
CCRepeatForever *chameleonRepeat = [CCRepeatForever actionWithAction:[CCSequence actions:chameleonDelay, chameleonAction, chameleonDelay, nil]]; 
[chameleon runAction:chameleonRepeat];
[mainChameleon addChild:chameleon]; 
```

如果我注释掉，`chameleon = [CCSprite spriteWithSpriteFrameName:@"chameleon1.png"];`则应用程序不会崩溃，但变色龙根本不会出现，正如当前编写代码的方式所预期的那样。

或者，如果我注释掉，`[chameleon runAction:chameleonRepeat];`那么变色龙就会出现，显示帧 chameleon1.png，但显然没有通过动画。

好的，所以为了让我更加困惑，因为我肯定遗漏了一些东西，我尝试将代码的底部部分更改为此，动画从第 1 帧转到第 2 帧，然后无限期地停留在第 2 帧。但是，如果我使延迟时间超过 1.0，我会收到与之前相同的错误。`chameleonDelay`如果我在没有重复永远语句的情况下在操作之前重新包含，我也会遇到同样的崩溃。如果应用程序必须等待超过 1 秒才能执行切换，它似乎会崩溃。我需要的是让第 1 帧坐一会儿（10 秒），然后切换到第 2 帧 0.3 秒，然后切换回第 1 帧并再次坐一会儿。

尝试的代码#2：

```
CCAnimation *mouthAnim = [CCAnimation animationWithSpriteFrames:chameleonFrames delay:0.3f]; //<--- maxes out at 1.0\. Anything more causes crash
chameleon = [CCSprite spriteWithSpriteFrameName:@"chameleon1.png"];
CCAnimate *chameleonAction = [CCAnimate actionWithAnimation:mouthAnim];     
[chameleon runAction:chameleonAction];
[mainChameleon addChild:chameleon]; 
```

YvesLeBorg 建议使用 restoreOriginalFrame 语句，但在 2.0 版中已弃用。我尝试使用

`CCAnimation *mouthAnim = [CCAnimation animationWithAnimationFrames:chameleonFrames delayPerUnit:0.3f loops:5];`

并得到错误`'-[CCSpriteFrame delayUnits]: unrecognized selector sent to instance'`。我不确定为什么这不起作用或从这里尝试什么。

**编辑：所以现在它正在工作......但没有像我想要的那样有效地编码：**

新代码：

```
//CHAMELEON
[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"front page/mainchameleon.plist"];
mainChameleon = [CCSpriteBatchNode batchNodeWithFile:@"front page/mainchameleon.png"];
[self addChild:mainChameleon z:7];
NSMutableArray *chameleonFrames = [NSMutableArray array];

//Frame 1 - closed mouth
[chameleonFrames addObject:[CCSpriteFrame frameWithTexture:mainChameleon.texture rect:CGRectMake(0, 124, 149, 122)]];
//Frame 2 - Open Mouth
[chameleonFrames addObject:[CCSpriteFrame frameWithTexture:mainChameleon.texture rect:CGRectMake(0, 0, 149, 122)]];
//Frame 1 - closed mouth
[chameleonFrames addObject:[CCSpriteFrame frameWithTexture:mainChameleon.texture rect:CGRectMake(0, 124, 149, 122)]];

CCAnimation *mouthAnim = [CCAnimation animationWithSpriteFrames:chameleonFrames delay:0.9f];
    chameleon = [CCSprite spriteWithTexture:mainChameleon.texture rect:CGRectMake(0,124,149,122)];
CCAnimate *chameleonAction = [CCAnimate actionWithAnimation:mouthAnim];
CCDelayTime *chameleonDelay = [CCDelayTime actionWithDuration:10];
CCRepeatForever *chameleonRepeat = [CCRepeatForever actionWithAction:[CCSequence actions:chameleonDelay, chameleonAction, nil]]; 
[chameleon runAction:chameleonRepeat];
[mainChameleon addChild:chameleon]; 
```

我真的很喜欢我在 1.0.1 中的做法，因为如果我有 2 帧或 100 帧，我只需要对 if 语句做一个小的调整。这种方式需要对每个单独的帧进行编码，这似乎与使用 plist 有悖常理。如果在接下来的几天内没有人能够提供更好的解决方案或“真实”答案，我会将其发布为答案并接受它以结束问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T14:31:39.087

这是我最终得到的代码，它可以正常工作。不知道为什么我必须进行这些更改，但确实如此。（当我开始一个新项目来解决这个问题时，一些名称已经改变，但我的原始代码和这之间的差异是显而易见的）。对于其他找到此线程的人，我的原始代码基于[Ray Wenderlich 的精灵表教程](http://www.raywenderlich.com/1271/how-to-use-animations-and-sprite-sheets-in-cocos2d)。

```
CCSpriteBatchNode *chameleonBN = [CCSpriteBatchNode batchNodeWithFile:@"chameleonimages.png"];
    [self addChild:chameleonBN];

//ADDED the texture part to resolve: 'CCSprite: setTexture doesn't work when the sprite is rendered using a CCSpriteBatchNode'   
[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"chameleonplist.plist" texture:chameleonBN.texture];

NSMutableArray *chameleonframes = [NSMutableArray array];

for (int i = 1; i <= 2 ; i++) 
{
    [chameleonframes addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:[NSString stringWithFormat:@"chameleon%d.png", i]]];
}

CCAnimation *mouthAnim = [CCAnimation animationWithSpriteFrames:chameleonframes delay:0.9f];

//ADDED this sprite frame to resolve texture id assert error
CCSpriteFrame *frame = [CCSpriteFrame frameWithTexture:chameleonBN.texture rect:CGRectMake(0, 0, 149, 122)];
CCSprite *chameleon = [CCSprite spriteWithSpriteFrame:frame];
chameleon.position = ccp(512,384);
CCAnimate *chameleonAnimate = [CCAnimate actionWithAnimation:mouthAnim];

CCDelayTime *chameleonDelay = [CCDelayTime actionWithDuration:10];
CCDelayTime *chameleonDelay2 = [CCDelayTime actionWithDuration:0.1];//Had to use this to ge tthe mouth to close. Using restore original frame doesn't work for me.
CCRepeatForever *chameleonRepeat = [CCRepeatForever actionWithAction:[CCSequence actions:chameleonDelay, chameleonAnimate, chameleonDelay2, nil]]; 
[chameleon runAction:chameleonRepeat];
[chameleonBN addChild:chameleon]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T17:14:06.377

不确定这是否是 2.0 问题，但我注意到您在同一序列中使用了两次 chameleonDelay 对象。这真的是你想要完成的吗？

延迟，行动，延迟，延迟，行动，延迟，延迟，行动......等。

试试这个看看它是否有效：

```
CCRepeatForever *chameleonRepeat = [CCRepeatForever actionWithAction:[CCSequence actions:chameleonDelay, chameleonAction, nil]]; 
```

# visual-studio-2010 - 添加许可协议以将项目设置为嵌入式资源？

> ID：10030976
> 
> 赞同：-1
> 
> 时间：2012-04-05T14:55:19.290
> 
> 标签：visual-studio-2010, .net-4.0, setup-project

我正在尝试将 licence.rtf 文件添加到我的设置项目中，我已逐步遵循[此stackoverflow 答案以添加许可证文件。](https://stackoverflow.com/questions/4182364/how-to-add-licence-agreement-in-the-setup-project)

似乎正在发生的事情是，当我添加许可证文件时，它没有将其添加为嵌入式资源，因此当我从本地计算机中删除文件时，我收到编译时错误...我也看不到任何让我们我将许可证文件更改为嵌入式资源。

这是我得到的错误 ![我得到的错误](../Images/5369e800ef1f2638ff461eb0ace051f7.png)

请让我知道是否有人以前遇到过这个问题，我该如何解决它

**更新：**

当您将 licence.rtf 文件添加到安装项目时，它**没有**可以设置为 EmbededResource.Tried 的 BuildAction 属性

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:55:25.380

我似乎已经想通了。我没有尝试将 License.rtf 文件添加到安装项目中，而是将其添加到解决方案中的另一个项目中。

完成后，我在我的安装项目中引用***该***文件，当安装文件被编译时，许可证文件被嵌入到 exe 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:57:48.500

单击解决方案资源管理器中的文件，查看属性。然后将 Build Action 更改为 Embedded Resource。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-22T16:42:28.380

在 Visual Studio 安装项目中显示许可协议的常用方法如下：

1.  转到 IDE 中的用户界面视图。右键单击“开始”然后添加对话框，添加许可协议对话框。

2.  右键单击对话框以将其向上或向下移动。右键单击并属性窗口显示属性，在许可证下您可以浏览您的自定义许可证 RTF 文件。

# c++ - Windows 短路径格式转长路径格式

> ID：10030978
> 
> 赞同：5
> 
> 时间：2012-04-05T14:55:30.677
> 
> 标签：c++, c, windows, path

是否有 Windows API 调用或某种方式来转换表单的路径

```
C:\Progra~1\Users\SomeU~2\ 
```

到

```
C:\Program Files\Users\SomeUser\ 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-05T14:57:27.023

您正在寻找[`GetLongPathName()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364980.aspx).

# grails - 如何在 Grails 中获取域约束的值？

> ID：10030980
> 
> 赞同：10
> 
> 时间：2012-04-05T14:55:34.683
> 
> 标签：grails, constraints, grails-constraints

我有一个文本字段，我想将其长度限制在我的一个域类的 maxSize 约束中。

所以，如果我有一个类 foo：

```
class Foo {
    String bar

    static constraints = {
        bar(maxSize: 100)
    }
} 
```

我想为属性栏获得 100 的值。这可能吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-05T14:59:48.350

你应该能够做到：

```
def maxBarSize = Foo.constraints.bar.getAppliedConstraint( 'maxSize' ).maxSize 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-07-08T14:09:48.257

我在 grails 3.1.8 中遇到了这个问题，它已经发生了一些变化。至少在普惠制观点中我不得不这样说：

```
Foo.constrainedProperties ['bar']['maxSize'] 
```

希望这有帮助！干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T15:10:33.423

检查以下代码：

```
def foo = new Foo(bar: "stuff")
println foo.constraints.bar.maxSize 
```

# php - 计时器上的PHP脚本，无法将文件缓存起来

> ID：10030981
> 
> 赞同：1
> 
> 时间：2012-04-05T14:55:40.200
> 
> 标签：php, time, timer, outputcache

我已经坚持了几天了，我真的很难让这个脚本正常运行。

我有一个非常基本的启动脚本，每次页面刷新时都会输出一个随机的 text/html/php 页面。

```
<?php
$pages = array(1 => 'text1-1.php', 2 => 'text1-2.php', 3 => 'text1-3.php', 4 => 'text1-  4.php');
$key = array_rand ( $pages );
include($pages[$key]) ;
?> 
```

我的目标是有一个脚本，它仅每 1 或 2 天（或指定的时间）更改输出，因此无论您刷新页面多少次，在计时器到期之前输出都不会改变。

我已经尝试从人们给我的提示中拼凑出以下内容，但无论我尝试什么脚本总是输出不同的东西，每次刷新页面时。

我认为问题是文件没有缓存，但我不明白为什么。

如果您还可以看到任何其他问题，我将不胜感激。:)

感谢您提供的任何帮助。:)

```
<?php
$pages = array(1 => 'text1-1.php', 2 => 'text1-2.php', 3 => 'text1-3.php', 4 => 'text1-   4.php');

$cachefile = "cache/timer.xml";
$time = $key = null;
$time_expire = 24*60*60;

if(is_file($cachefile)) {
    list($time, $key) = explode(' ', file_get_contents($cachefile));
}

if(!$time || time() - $time > $time_expire) {
    $key = rand(0,count($pages)-1);
    file_put_contents($cachefile, time().' '.$key);
}
include($pages[$key]) ;
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T15:04:18.023

这个方法如何生成你的随机数：

```
srand(floor(time()/60/60/24/2));
$key = rand(0,count($pages)-1); 
```

它将种子固定两天（技术上是 48 小时，不一定匹配整整两天），所以第一次调用 rand() 总是返回基于该种子的第一个数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T15:06:34.887

您是否检查过以确保该文件是实际创建的？目录“缓存”是否存在？您可以将 Web 服务器进程写入它吗？请注意，file_put_contents 只有在无法创建文件时才会发出*警告；*如果您将服务器设置为不显示警告，则不会产生任何错误，并且脚本似乎可以正常运行。

我绝对同意该文件没有被写入；你的代码对我来说很好。没有缓存/：

```
Warning: file_put_contents(cache/timer.xml): failed to open stream: No such file or directory in ... 
```

具有缓存/和写权限：

```
$ php test.php
text1-1.php
$ php test.php
text1-1.php
$ php test.php
text1-1.php
$ php test.php
text1-1.php
$ php test.php
text1-1.php
$ php test.php
text1-1.php
$ php test.php
text1-1.php
$ php test.php
text1-1.php
$ php test.php
text1-1.php
$ php test.php
text1-1.php 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T15:11:13.783

代替

```
if(!$time || time() - $time > $time_expire) { 
```

和

```
if (! $time || (time () - $time) > $time_expire) { 
```

还

`mt_rand`比`rand`你想改变的要好

**编辑 1**

既然你`array`不是开始形式`0`，你也应该

代替

```
$key = rand(0,count($pages)-1); 
```

和

```
$key = mt_rand( 1, count ( $pages )); 
```

或者

做你的阵列

```
$pages = array (
        0 => 'text1-1.php',
        1 => 'text1-2.php',
        2 => 'text1-3.php',
        3 => 'text1-4.php' 
); 
```

现在测试了你的脚本......它工作得很好......让我知道你是否需要其他任何东西

谢谢

:)

# javascript - 通过输入文本框的onkeyup改变背景颜色

> ID：10030983
> 
> 赞同：1
> 
> 时间：2012-04-05T14:55:54.453
> 
> 标签：javascript

```
<input id='ad' onkeyup='sc(id)'/>
<script lang="javascript">
function sc(i)
{
    i.style.backgroundColor="#006400";
}
</script> 
```

这是我用来通过id改变输入框背景颜色的代码，但它不起作用。请提出一些改变输入框背景颜色的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:58:02.867

如果`i`是元素 id，请使用`getElementById()`

```
<input id='ad' onkeyup='sc(id)'/>
<script lang="javascript">
function sc(i)
{
    // Retrieve the element by its id 'i'
    document.getElementById(i).style.backgroundColor="#006400";
}
</script> 
```

# javascript - HighCharts 删除堆栈总数

> ID：10030984
> 
> 赞同：9
> 
> 时间：2012-04-05T14:56:04.170
> 
> 标签：javascript, highcharts

[我正在创建一个像这样](http://jsfiddle.net/gh/get/jquery/edge/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/column-stacked/)的堆积条形图。请注意，每个堆栈的总数显示在顶部，我该如何禁用/隐藏它？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-05T15:04:50.147

```
yAxis: {
    min: 0,
    title: {
        text: 'Total fruit consumption'
    },
    stackLabels: {
        enabled: false,
        style: {
            fontWeight: 'bold',
            color: (Highcharts.theme && Highcharts.theme.textColor) || 'gray'
        }
    }
}, 
```

您需要像上面的示例一样将 stackLabels 设置为 false

```
stackLabels: {
            enabled: true, 
```

# ios - 是否可以仅根据峰值信息进行音频可视化？

> ID：10030987
> 
> 赞同：2
> 
> 时间：2012-04-05T14:56:06.183
> 
> 标签：ios, audio, visualization

我需要使用 FFT 吗？有没有SDK或smth？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T15:46:50.047

如果没有 FFT，您可以可视化音频的“范围”，即声音的实际波形。如果您想要声波图或类似 gfx 均衡器的东西，您需要使用 FFT 对音频进行预处理。为此，有一些 SDK 支持，称为加速器框架。您可能想查看 Apple 的[aurioTouch2](http://developer.apple.com/library/ios/#samplecode/aurioTouch2/Introduction/Intro.html)示例。

# css - 如何在一个元素上设置两个伪类？

> ID：10030990
> 
> 赞同：2
> 
> 时间：2012-04-05T14:56:10.077
> 
> 标签：css

这有效：

```
#sList li:visible {
    background: rgba(255,255,136,0.5);
} 
```

这有效：

```
#sList li:nth-of-type(odd) {
    background: rgba(255,255,136,0.5);
} 
```

这不会：

```
#sList li:visible:nth-of-type(odd) {
    background: rgba(255,255,136,0.5);
} 
```

嗯……有什么帮助吗？

**编辑**：详细说明——我有一个搜索字段——在它下面`.keyup`过滤一个`<ul>`。

想想一个人造谷歌即时搜索类型的东西。我希望背景颜色交错。它们是在页面加载时，但是一旦您开始输入并且元素开始从列表中消除，斑马条纹背景图案就会消失并且变得不一致，因为某些元素现在被隐藏了。我想做一些事情，在每个`.keyup`搜索字段上重新应用斑马条纹，以便列表保持一致的条纹。

说得通？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:59:35.183

`:nth-of-type`只考虑**元素的标签类型**。没有办法让这个伪选择器选择第*n*个匹配的元素。

此外，`:visible`不是有效的[伪选择器](http://www.w3.org/TR/selectors/#pseudo-classes)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:07:37.050

根据[SitePoint 的伪类列表，](http://reference.sitepoint.com/css/css3psuedoclasses)没有 :visible。让我们用[:hover](http://reference.sitepoint.com/css/pseudoclass-hover)来代替。

## [演示](http://jsbin.com/uxuleg/2/edit)

当我们有一个列表时，当且仅当该元素是奇数子元素并且悬停时，我们可以使用这两个类来突出显示它。请注意 ipsum 在悬停时不会突出显示，但 Lorem 会突出显示。

```
#sList3 li:hover:nth-of-type(odd) {
    background: rgba(255,255,136,0.5);
} 
```

```
<ul id="sList3">
  <li>Lorem</li>
  <li>ipsum</li>
  <li>Lorem</li>
  <li>ipsum</li>
  <li>Lorem</li>
  <li>ipsum</li>
  <li>Lorem</li>
  <li>ipsum</li>
</ul> 
```

# arrays - 数组上的结构赋值运算符

> ID：10030993
> 
> 赞同：1
> 
> 时间：2012-04-05T14:56:15.730
> 
> 标签：arrays, struct, assignment-operator

假设我定义了这样的结构：

```
struct person
{
    char name [10];
    int  age;
}; 
```

并声明了两个人变量：

```
person Bob;
person John; 
```

其中 Bob.name = "Bob", Bob.age = 30 和 John.name = "John",John.age = 25。我打电话给

```
Bob = John; 
```

struct person 将执行成员[分配](http://msdn.microsoft.com/en-us/library/x0c54csc%28VS.80%29.aspx)并将 Johns 的成员值分配给 Bob 的。

但是数组不能赋值给数组，那么“name”数组的赋值是怎么工作的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T23:26:38.183

最初将 C 语言组合在一起时，它并没有打算成为几十年后仍在使用的强大力量。它旨在成为能够快速轻松地满足一些即时需求的东西，但它非常可怕。许多人们认为理所当然的特性，例如通过值传递结构的能力，或者（如果我记得的话）甚至直接分配它们的能力都不存在。然而，将数组分解为指针从一开始就是该语言的一部分。

当结构在后来的语言版本中变得更加强大时，允许符号表示从to`struct1 = struct2;`的副本没有问题，因为在此之前这样的表达式没有任何意义。另一方面，数组类型有自己的预先存在的规则，如果不破坏为这门初出茅庐的语言编写的数十个程序，就不可能让数组赋值像结构赋值一样工作。`struct2``struct1`

因此，复制包含数组的结构将按照人们期望复制数组的方式工作，因为只有在“按名称”访问数组时才会将数组分解为指针。如果一个结构包含`unsigned char byteArray[64];`，从结构的角度来看，这只是一个 64 字节的 blob。如果引用`theStruct.byteArray`，则该引用将像数组变量引用那样分解为指针，但是当分配`theStruct`给另一个相同类型的变量时，编译器会忽略内部结构。

# php - Ajax/PHP 表单获取序列化选择值

> ID：10030998
> 
> 赞同：0
> 
> 时间：2012-04-05T14:56:39.383
> 
> 标签：php, javascript, ajax, jquery

现在表单发送正确的信息但缺少状态。我正在使用 Ajax 成功函数。唯一的问题是该值不是固定的，而是取决于选择的状态。我该怎么办？

JS：

```
$('#sendFormBtn').live('click', function(){
        formdata = $('#submitForm').serialize();
        $.ajax({
                type: 'POST', 
                url: 'includes/contactForm.php',
                data: formdata, 
                success: function(){
                    $('input[name=name]').val('Name');
                    $('input[name=email]').val('Email');
                    $('input[name=address]').val('Address');
                    $('input[name=state]').val('');
                    $('input[name=city]').val('City');
                    $('input[name=zip]').val('Zip Code');
                    $('textarea[name=message]').val('Leave a message');
                }
        });
}); 
```

HTML：

```
<form id="submitForm">
    <table cellpadding="1" cellspacing="1">
        <tr>
            <td width="223">
                <input type="text" size="35" name="fullname" value="Full Name" onFocus="if(this.value == 'Full Name') {this.value = '';}" onBlur="if (this.value == '') {this.value = 'Full Name';}" />
                <br />
            </td>
        </tr>

        <tr>
            <td>
                <input type="text" size="35" name="youremail" value="Your Email" onFocus="if(this.value == 'Your Email') {this.value = '';}" onBlur="if (this.value == '') {this.value = 'Your Email';}" />
                <br />
            </td>
        </tr>

        <tr>
            <td>
                <input type="text" size="35" name="address" value="Address" onFocus="if(this.value == 'Address') {this.value = '';}" onBlur="if (this.value == '') {this.value = 'Address';}" />
                <br />
            </td>
        </tr>

        <tr>
            <td>
                <input type="text" size="35" name="city" value="City" onFocus="if(this.value == 'City') {this.value = '';}" onBlur="if (this.value == '') {this.value = 'City';}" />
                <br />
            </td>
        </tr>

        <tr>
            <td>
                <p style="float:left; color:#FFF; padding-right:5px;">State/Zip</p>
                <select name="states">
                    <option value="alabama">AL</option>
                    <option value="alaska">AK</option>
                    <option value="arizona">AZ</option>
                    <option value="georgia">GA</option>
                    <option value="kentucky">KY</option>
                    <option value="louisiana">LA</option>
                    <option value="nebraska">NE</option>
                    <option value="nevada">NV</option>
                    <option value="new hampshire">NH</option>
                    <option value="new jersey">NJ</option>
                    <option value="new york">NY</option>
                    <option value="north carolina">NC</option>
                    <option value="washington">WA</option>
                    <option value="west verginia">WV</option>
                </select>

                <input type="text" size="8" maxlength="7" name="zip" value="Zip Code" onFocus="if(this.value == 'Zip Code') {this.value = '';}" onBlur="if (this.value == '') {this.value = 'Zip Code';}" />
            </td>
        </tr>

        <tr>
            <td>
                <textarea cols="28" rows="6" onblur="if(this.value=='') this.value='Leave a message'" onfocus="if(this.value =='Leave a message' ) this.value=''">Leave a message</textarea>
            </td>
        </tr>

        <tr>
            <td height="16">
                <input type="submit" name="submit_order" id="sendFormBtn" />
            </td>
        </tr>
    </table>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T17:00:01.940

听起来您使用错误的键来访问`<select name="states">`. **`$_POST['states']`**在您的 PHP 中，您应该查看`$_POST['state']`.

**注意：** `<select name="states">`不是`<input>`，所以如果你想用 jQuery 对它做点什么，你可以用**`$('select[name=states]')`**，而不是`$('input[name=state]')`