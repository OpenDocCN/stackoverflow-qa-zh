# StackOverflow 问答 11424000-11424999

# c# - 两次调用 PostAuthorizeRequest 的 IIS / IIS express 生命周期

> ID：11424000
> 
> 赞同：1
> 
> 时间：2012-07-11T00:44:04.453
> 
> 标签：c#, asp.net, iis, iis-express

我`PostAuthorizeRequest`在`IIS`生命周期（管道模式）中挂钩事件，并且每当对友好 url（无文件扩展名。例如 /page1/page2）的请求未处理（无重定向或无重写路径）时，应该有 404，第二`PostAuthorizeRequest`次调用（不是从客户端发起的：用提琴手检查），这一次 HttpContext.Current.User 在第一次设置时为空。

我不知道这种行为，我很难理解发生了什么！有没有人有更多的信息或一个很好的解释，所以我知道如何与此联系起来:)？

还是我做错了什么？

编辑：

找到问题但没有解决方案。导致该行为的是新的 System.Web.Handlers.TransferRequestHandler。[在http://blogs.msdn.com/b/tmarq/archive/2010/05/26/how-extensionless-urls-are-handled-by-asp-net-v4.aspx](http://blogs.msdn.com/b/tmarq/archive/2010/05/26/how-extensionless-urls-are-handled-by-asp-net-v4.aspx)阅读更多内容

似乎如果我不对第一个请求采取行动，它会导致一个子请求（到 StaticFileHandler ？），其中没有调用身份验证但仍然触发了我的 PostAuthorizeRequest，导致各种问题......上下文（例如 Context.Items ) 在请求之间也被清除。

那么有没有办法避免或检测到第二个孩子的请求？

# ruby-on-rails - 从数组中提取多个键值属性

> ID：11424001
> 
> 赞同：4
> 
> 时间：2012-07-11T00:44:05.990
> 
> 标签：ruby-on-rails, ruby, hash

我有一个像你在这篇文章底部看到的那样的数组（具体来说，它是从 fb_graph 返回的 fb 好友列表）。

如果我想通过这个哈希并从每条记录中挑选出“标识符”属性，我知道我可以做这样的事情：

```
@fb_friends.map &:identifier  # returns ["123", "134",...] 
```

我的问题是，如果我想从每条记录中挑选出多个属性怎么办。基本上我想获取标识符、名称和图片。我天真地想做类似的事情：

```
@fb_friends.map &:identifier, :name, :picture 
```

但这当然行不通。知道我该怎么做吗？

```
[#<FbGraph::User:0x007f9ec1fd63c8 @identifier="1868", @endpoint="https://graph.facebook.com /----",  @access_token="AAAFGzU8vU0gBAEK2q3WYEUJNZAczuO6UPOLqbscwvZALr1gW1ePBqpyarh0uTv6alA2YyNvIzZBcvvIBEYy4i5ulMJZCpWcZD", @cached_collections={}, @name="REMOVED", @first_name=nil, @middle_name=nil, @last_name=nil, @gender=nil, @locale=nil, @languages=[], @link=nil, @username=nil, @third_party_id=nil, @timezone=nil, @verified=nil, @about=nil, @bio=nil, @education=[], @email=nil, @interested_in=[], @political=nil, @favorite_teams=[], @quotes=nil, @relationship_status=nil, @religion=nil, @relationship=nil, @website=nil, @work=[], @sports=[], @favorite_athletes=[], @inspirational_people=[], @mobile_phone=nil, @installed=nil>, #<FbGraph::User:0x007f9ec1fda9f0 @identifier="3??1", @endpoint="https://graph.facebook.com/----", @access_token="AAAFGzU8vU0gBAEK2q3WYEUJNZAczuO6UPOLqbscwvZALr1gW1ePBqpyarh0uTv6alA2YyNvIzZBcvvIBEYy4i5ulMJZCpWcZD", @cached_collections={}, @name="Removed", @first_name=nil, @middle_name=nil, @last_name=nil, @gender=nil, @locale=nil, @languages=[], @link=nil, @username=nil, @third_party_id=nil, @timezone=nil, @verified=nil, @about=nil, @bio=nil, @education=[], @email=nil, @interested_in=[], @political=nil, @favorite_teams=[], @quotes=nil, @relationship_status=nil, @religion=nil, @relationship=nil, @website=nil, @work=[], @sports=[], @favorite_athletes=[], @inspirational_people=[], @mobile_phone=nil, @installed=nil>, #<FbGraph::User:0x007f9ec1fe5030 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T00:53:27.813

这看起来不像嵌套哈希。它看起来像一个 FbGraph::User 实例数组。如果你想把它变成一个哈希数组，每个都包含 :identifier、:name 和 :picture，你可以这样做：

```
@fb_friends.map { |f|
  { identifier: f.identifier, name: f.name, picture: f.picture }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T00:54:12.553

IIRC 这将返回一个哈希数组，其中键是 id，值是带有名称和图片的数组：

```
@fb_friends.map{|fbf| [fbf.identifier, [fbf.name, fbf.picture]]}.map{|a| Hash[a]}

{:id1 => ['name', 'picture_url'], :id2 => ['name2', 'picture_url2]} 
```

# opencv - 如何使用 OpenCV 检测简单的几何形状

> ID：11424002
> 
> 赞同：52
> 
> 时间：2012-07-11T00:44:16.387
> 
> 标签：opencv

我有这个项目，我需要（在 iOS 上）检测图像中的简单几何形状。

![在此处输入图像描述](../Images/a9db48e2d8ca71bedfdd6b1d58909336.png)

在搜索互联网后，我得出结论，最好的工具是 OpenCV。问题是，直到两个小时前，我还不知道 OpenCV 是什么，而且我什至从未远程做过任何涉及图像处理的事情。我的主要经验是 JS/HTML、C#、SQL、Objective-C...

我从哪里开始？

我找到了这个我能够消化的[答案](https://stackoverflow.com/questions/9663841/how-to-extract-simple-geometric-forms-from-contours-in-opencv)，并且通过阅读其他内容，我知道 OpenCV 应该返回一个带有点/角的形状数组，这是真的吗？另外它将如何代表一个圆圈或半个圆圈？还有形状方向呢？

你知道任何可以演示类似功能的 Demo iOS 项目吗？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-07-11T07:17:41.953

如果你只有这些规则的形状，有一个简单的过程如下：

1.  在图像中查找轮廓（图像应该是您的问题中给出的二进制）
2.  `approxPolyDP`使用函数逼近每个轮廓。
3.  首先，检查所有形状的近似轮廓中的元素数量。就是认形状。例如，正方形有 4 个，五边形有 5 个。圆形会有更多，我不知道，所以我们找到它。（我得到了 16 圈和 9 半圈。）
4.  现在分配颜色，运行测试图像的代码，检查它的编号，用相应的颜色填充它。

下面是我在 Python 中的示例：

```
import numpy as np
import cv2

img = cv2.imread('shapes.png')
gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)

ret,thresh = cv2.threshold(gray,127,255,1)

contours,h = cv2.findContours(thresh,1,2)

for cnt in contours:
    approx = cv2.approxPolyDP(cnt,0.01*cv2.arcLength(cnt,True),True)
    print len(approx)
    if len(approx)==5:
        print "pentagon"
        cv2.drawContours(img,[cnt],0,255,-1)
    elif len(approx)==3:
        print "triangle"
        cv2.drawContours(img,[cnt],0,(0,255,0),-1)
    elif len(approx)==4:
        print "square"
        cv2.drawContours(img,[cnt],0,(0,0,255),-1)
    elif len(approx) == 9:
        print "half-circle"
        cv2.drawContours(img,[cnt],0,(255,255,0),-1)
    elif len(approx) > 15:
        print "circle"
        cv2.drawContours(img,[cnt],0,(0,255,255),-1)

cv2.imshow('img',img)
cv2.waitKey(0)
cv2.destroyAllWindows() 
```

下面是输出：

![在此处输入图像描述](../Images/4cc8b8a7ca6f33eae5cfaa4dfa4ead07.png)

请记住，它仅适用于常规形状。

或者，要查找圈子，您可以使用`houghcircles`. 您可以在此处找到[教程](http://docs.opencv.org/doc/tutorials/imgproc/imgtrans/hough_circle/hough_circle.html#hough-circle)。

**关于 iOS**，OpenCV 开发人员今年夏天正在开发一些 iOS 示例，因此请访问他们的网站：www.code.opencv.org 并与他们联系。

你可以在这里找到他们教程的幻灯片：http: [//code.opencv.org/svn/gsoc2012/ios/trunk/doc/CVPR2012_OpenCV4IOS_Tutorial.pdf](http://code.opencv.org/svn/gsoc2012/ios/trunk/doc/CVPR2012_OpenCV4IOS_Tutorial.pdf)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-02-25T20:26:57.617

答案取决于其他形状的存在、噪声级别（如果有）以及您想要提供的不变性（例如旋转、缩放等）。这些要求不仅定义了算法，还定义了提取特征所需的预处理阶段。

当形状不旋转或缩放以及周围没有相似形状时，上面建议的[模板匹配效果很好；](http://docs.opencv.org/modules/imgproc/doc/object_detection.html?highlight=match%20template#cv.MatchTemplate)换句话说，它会在模板所在的图像中找到最佳翻译：

```
double minVal, maxVal;
Point minLoc, maxLoc;
Mat image, template, result; // template is your shape
matchTemplate(image, template, result, CV_TM_CCOEFF_NORMED);
minMaxLoc(result, &minVal, &maxVal, &minLoc, &maxLoc); // maxLoc is answer 
```

[几何散列](http://en.wikipedia.org/wiki/Geometric_hashing)是在旋转和缩放方面获得不变性的好方法；这种方法需要提取一些轮廓点。

[广义霍夫](http://en.wikipedia.org/wiki/Generalised_Hough_transform)变换可以处理不变性、噪声并且具有最少的预处理，但它比其他方法更难实现。OpenCV 对线和圆有这样的变换。

在形状数量有限的情况下，计算矩或计算凸包顶点可能是最简单的解决方案：[openCV 结构分析](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T17:32:27.417

您还可以使用[模板匹配](http://docs.opencv.org/doc/tutorials/imgproc/histograms/template_matching/template_matching.html)来检测图像中的形状。

# ios - Xcode 中的滑动图像

> ID：11424004
> 
> 赞同：0
> 
> 时间：2012-07-11T00:44:33.213
> 
> 标签：ios, xcode, animation, uiimageview, sliding

在我的应用程序中，我有一个按钮。我希望能够点击该按钮，然后将其移动到屏幕上的某个点。但是，我也希望图像滑动到该点而不是仅仅出现在那里。我有什么办法可以做到这一点？在这一点上，我的图像去我需要它去的地方，我只想让它滑到那里。任何帮助深表感谢。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T00:51:34.687

```
[UIView animateWithDuration:2.0 animations:^{
    imageView.center = CGPointMake(50, 50); // or wherever
}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T00:48:54.650

在 Mac OS X 10.5 及更高版本或 iOS 上，查看 Core Animation： [https ://developer.apple.com/technologies/mac/graphics-and-animation.html](https://developer.apple.com/technologies/mac/graphics-and-animation.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T00:48:03.163

我相信你的问题在这里得到了回答，如果这没有帮助或不够准确，请告诉我。

[移动带有动画的 UIImageView](https://stackoverflow.com/questions/1148987/move-a-uiimageview-with-an-animation)

祝你好运

# java - Android Horizo ntalScrollView 内容拉伸

> ID：11424005
> 
> 赞同：2
> 
> 时间：2012-07-11T00:44:45.550
> 
> 标签：java, android, android-xml, horizontalscrollview

我有一个带有一些按钮的 Horizo​​ntalScrollView，我正在尝试拉伸这些按钮以填充 Horizo​​ntalScrollView 的整个宽度，以便它们看起来有条理并且彼此之间等距。这是我拥有的图像。 ![Horizo​​ntalScrollView 内容未拉伸](../Images/811af00b272e71f56a8cdf91e0462020.png)

我希望这 4 个按钮在整个宽度上都被拉伸！这是我的代码

```
 <HorizontalScrollView
    android:id="@+id/items_HorizontalBar"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/vf"
    android:background="#80000000"
    android:fillViewport="true" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal" >

        <Button
            android:layout_width="90dp"
            android:layout_height="fill_parent"
            android:layout_margin="5dp"
            android:background="@android:color/transparent"
            android:drawableTop="@drawable/rss"
            android:text="Light"
            android:textColor="@color/green_color"
            android:textSize="20sp" />

        <Button
            android:layout_width="90dp"
            android:layout_height="fill_parent"
            android:layout_margin="5dp"
            android:background="@android:color/transparent"
            android:drawableTop="@drawable/rss"
            android:text="Door"
            android:textColor="@color/green_color"
            android:textSize="20sp" />

        <Button
            android:layout_width="90dp"
            android:layout_height="fill_parent"
            android:layout_margin="5dp"
            android:background="@android:color/transparent"
            android:drawableTop="@drawable/rss"
            android:text="Alarms"
            android:textColor="@color/green_color"
            android:textSize="20sp" />

        <Button
            android:layout_width="90dp"
            android:layout_height="fill_parent"
            android:layout_margin="5dp"
            android:background="@android:color/transparent"
            android:drawableTop="@drawable/rss"
            android:text="Window"
            android:textColor="@color/green_color"
            android:textSize="20sp" />
    </LinearLayout>
</HorizontalScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-13T11:09:24.163

而不是弄乱你应该遵循将（或垂直）`LinearLayout`设置为的正确解决方案。`HorizontalScrollView`**`FillViewPort`**

**XML:**

```
android:fillViewport="true" 
```

**以编程方式：**

```
hsv.setFillViewport(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T03:58:50.977

尝试使容器成为水平滚动视图。之后添加一个表格布局，并在表格的每一行中添加一个水平线性层。现在将发生的事情是，滚动视图将被拉伸以适合您设置的按钮大小，并且应该滚动而无需您进行编程，并且您应该有效地创建了一个网格。尝试类似的事情：

```
<?xml version="1.0" encoding="utf-8"?>
<HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/sc1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:scrollbars="horizontal" >

<TableLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <Button
                android:id="@+id/button1"
                android:layout_width="180dp"
                android:layout_height="wrap_content"
                android:text="Button" />

            <Button
                android:id="@+id/button2"
                android:layout_width="180dp"
                android:layout_height="wrap_content"
                android:text="Button" />

            <Button
                android:id="@+id/button3"
                android:layout_width="230dp"
                android:layout_height="wrap_content"
                android:text="Button" />

            <Button
                android:id="@+id/button4"
                android:layout_width="233dp"
                android:layout_height="wrap_content"
                android:text="Button" />

        </LinearLayout>

    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </TableRow>

    <TableRow
        android:id="@+id/tableRow3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </TableRow>

    <TableRow
        android:id="@+id/tableRow4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </TableRow>
</TableLayout> 
```

另外，也许您可​​以将水平滚动视图包装在垂直滚动视图中，然后您可以向上/向下、向左/向右滚动并根据需要进行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T04:33:36.073

对于相等分布，设置父级的**weightSum**值，并将**layout_weight**分配给其子级。

对于 4 个大小相同的按钮，添加`android:weightSum="1"`到 LinearLayout。为每个按钮设置`android:layout_width="0dp"`，然后添加`android:layout_weight="0.25"`。

这就是代码中发生的情况，但根据视图，Eclipse GUI 中的*“Distribute Weights Evenly”按钮也可以提供帮助。*

但是，[Horizo​​ntalScrollView](http://developer.android.com/reference/android/widget/HorizontalScrollView.html)只能承载一个直接子级，我想知道这个布局的结构......

# php - 检查是否在数组中设置了一项并测试是否相等

> ID：11424011
> 
> 赞同：0
> 
> 时间：2012-07-11T00:45:20.740
> 
> 标签：php, function, built-in

我在某处（可能在 SO 上）读到有一个内置的 PHP 函数，它是检查数组中的项目是否已设置然后测试它是否相等的简写。我意识到我可以使用以下代码段轻松地重新创建它，但我只是想知道是否有*内置*的方法可以做到这一点。没有必要重新发明轮子，但如果这不是重新发明，我想这就是答案。

```
<?php
    function item_equality(&$array, $key, $operand) {
        return isset($array[$key]) && $array[$key] == $operand;
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T01:14:04.163

我不确定这是否完全符合您的想法，但您可以使用以下方法获得类似的功能：

```
<?php
 if (array_search($operand, $array) == $key) {
   ....
 } 
```

我会警惕使用@ - 它可能会隐藏其他问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T01:07:44.803

啊，这不是我要找的函数，而是运算符。它是[错误控制运算符](http://www.php.net/manual/en/language.operators.errorcontrol.php)。您可以使用以下内容。

```
<?php
    if (@$array[$key] == $operand) {
        // do stuff
    }
?> 
```

# java - GAE Memcache 中的损坏值

> ID：11424013
> 
> 赞同：0
> 
> 时间：2012-07-11T00:45:26.763
> 
> 标签：java, google-app-engine, memcached

有时（当我执行压力测试时）存储在 memcache 中的对象已损坏（它缺少属性，当我尝试访问它时给我“NullPointerException”）。是否与不同 memcache 写入之间的错误同步有关？事实上，在我的代码的不同部分，我只是以这种方式更新存储在 Memcache 中的 UserAccount：

```
cache.put(tempUser.getKey(), tempUser); 
```

..我尝试以这种方式检索：

```
if (cache.contains(key)) {
    readObject = (T) cache.get(key);
    return readObject;
} 
```

与此检索相关，当我尝试（例如）检索时，我得到 NullPointerException：

```
readObject.getMyProperty() 
```

我试图了解此功能（[https://developers.google.com/appengine/docs/java/memcache/overview#Safely_Handling_Concurrent_Memcache_Updates](https://developers.google.com/appengine/docs/java/memcache/overview#Safely_Handling_Concurrent_Memcache_Updates)），但它似乎没有很好的记录。我还在stackoverflow上查看了这些答案：

*   [put() + ADD_ONLY_IF_NOT_PRESENT 的 GAE MemCache 行为](https://stackoverflow.com/questions/8080933/gae-memcache-behaviour-of-put-add-only-if-not-present)
*   [在 AppEngine 中安全处理并发 Memcache 更新](https://stackoverflow.com/questions/10501852/safely-handling-concurrent-memcache-updates-in-appengine)

..但它似乎并不符合我的需求。最后，我只需要确保一个值很好地存储在缓存中，没有竞争条件可能影响其完整性的风险。

==================================================== ============================== 更新：我尝试更好地指定行为：我在这一行中得到“NullPointerException”：

```
if(readObject!=null && readObject.getMyProperty.equals("test")) 
```

所以它不是（仅）完全为空，而只是一个属性。看来真的是坏掉了。除此之外，我知道我必须改进检索阶段！

==================================================== ===============================

新更新：我在 memcache 中找到了所有属性都等于 null 的对象，除了键之一

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T06:04:21.137

在调用 cache.contains() 和 cache.get() 之间，您的条目可能会从 memcache 中逐出。一个解决方案是调用 cache.get() 并检查 null 结果，在这种情况下条目不再存在。您甚至可以为不需要的呼叫节省几毫秒。永远不要依赖调用之间的不变状态。相反，memcache 为您提供有用的原子复合操作，以避免出现诸如 increment()、putIfUntouched() 和 put()+ADD_ONLY_IF_NOT_PRESENT 之类的竞争条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T08:17:57.213

Memcache 使用标准的 Java 序列化来序列化/反序列化对象。

要完成这项工作，您的类（以及其中的所有字段）必须实现`java.io.Serializable`.

你的领域是什么类型`MyProperty`？

# php - 访问多维数组中元素的效率

> ID：11424014
> 
> 赞同：0
> 
> 时间：2012-07-11T00:45:29.913
> 
> 标签：php, multidimensional-array, performance

我看不到这个问题的答案，但它一直困扰着我一段时间。

在php（或任何语言）中使用**多维**数组时，您是否通过将多维数组的数组**保存**为单独的数组或直接从整个数组**访问该“数组”元素获得任何效率和生产力？**

例如，
print_r($myArray);

```
Array
(
   [2] => Array
      (
         [7.0] => Array
            (
               [0] => 1
               [1] => 23
            )

         [16.0] => Array
            (
               [0] => 4
               [1] => 28
            )
      )
   [5] => Array
      (
         [17.0] => Array
            (
               [0] => 1
               [1] => 3
            )
      )
) 
```

如果我需要**重复**访问 [16.0] 的数组，最好将该条目保存为自己的数组，直到我不再需要它，还是直接访问它更好？

```
Option 1:
$tempArray=$myArray[2]["16.0"];
echo "Index=".$tempArray[0]."; 
```

或者

```
Option 2:
echo "Index=".$myArray[2]["16.0"][0]; 
```

当然这只是一个小例子，但是如果（任意）$array[.][.][ **n** ][...] 中的值被多次访问，并且**n**的值取决于一个循环，直接访问元素或将该数组（在数组的层的深处）保存为自己的数组并以这种方式访问​​其值之间有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T08:49:04.167

如果您查看为这些语句生成的字节码：

```
$tempArray=$myArray[2]["16.0"];        
echo $tempArray[0];        
    FETCH_DIM_R        $3      $myArray, 2        
    FETCH_DIM_R        $4      $3, '16.0'        
    ASSIGN                     $tempArray, $4        
    FETCH_DIM_R        $6      $tempArray, 0        
    ECHO               $6        

echo $myArray[2]["16.0"][0];        
    FETCH_DIM_R        $7      $myArray, 2        
    FETCH_DIM_R        $8      $7, '16.0'        
    FETCH_DIM_R        $9      $8, 0        
    ECHO               $9 
```

（我已经重新格式化并删除了 EXT_STMT 标记）。您可以看到唯一的区别是对 $tempArray 的实际分配。你可能认为数组赋值很昂贵。但是 PHP 使用引用模型并执行惰性写入时复制，所以它不是，并且无论数组大小如何，成本都几乎相同。

（当然，如果您在分配后更改元素，则 $tempArray 不再与其原始切片相同，并且此时内存使用量会随着分配触发切片的克隆而跳跃，因为需要拆分引用。 )

好的，如果您对切片进行大量本地化只读访问以保存重复的**FETCH_DIM_R**查找（PHP 编译绝对不会对重复使用索引进行本地优化），这种方法可能是值得的。 *但是*，在更新时让自己陷入困境的机会非常重要。

为什么不使用循环和`microtime()`and自己对此进行基准测试`memory_get_usage()`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T00:53:13.567

您可以通过使用 for 循环创建一个巨大的多维数组来轻松测试这一点，但是在索引大型数组时直接访问它通常会更快。

对于较小的数组（约 500 项或更少），它不会产生明显的差异。

# computer-science - “相对+”运算符有什么用？

> ID：11424015
> 
> 赞同：0
> 
> 时间：2012-07-11T00:45:35.840
> 
> 标签：computer-science, regular-language

我正在阅读[活动数据库中的复合事件规范：模型和实现](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.108.2501)。其中描述了一种指定复合事件的方法，类似于正则表达式。让我解释一下基础知识：有*事件历史*。这些是一组原始事件，每个事件都有一个唯一的时间戳（因此可以将它们视为序列，但可以对它们使用集合操作）。还有*事件表达式*。这些是从历史到历史的功能。`E`应用于`h`( `E[h]`)的表达式是满足`h`where的子集。`E`例如，原始表达式`a`匹配 a's:
`a[a, b, a, c, b] = a, a`(timestamps implicit)。

有这个操作符`relative(E, F)`，它是这样定义的： 设`E_i[h]`第 i 个事件发生在`E[h]`; 通过删除时间戳小于或等于 的时间戳的所有事件发生`h_i`来获得let 。然后。不太正式的是，假设历史在某个事件发生后立即开始，那么事件发生在哪里是满意的。例如（第二个 b，因为它前面有一个 a）。`h``E_i[h]``relative(E, F)[h] = union over all i:s F[h_i]``relative(E, F)``h``F``h``E``relative(a, b)[b, c, a, c, b] = b`

现在，有`relative+(E)`一个我不明白的运营商。它定义为：
`relative_1(E) = E`
`relative_i(E) = relative(relative_i-1(E), E)`
`relative+(E) = union over all positive i:s relative_i(E)`

与`relative+(E)`just 有何不同`E`？我理解它的方式`relative(E, E)[h]`始终是 的子集`E[h]`，因此它们的并集将等于`E[h]`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T02:09:19.647

我想到了。`E[h]`要查看和的结果之间的差异`relative+(E)[h]`，`E`需要比仅匹配特定类型的所有事件的基本表达式更复杂。例如：假设我们有一个事件表达式`first`，它总是匹配历史中的第一个事件。then`first[h]`当然是 的第一个元素`h`，while`relative+(first)[h]`是`h`它本身，因为它是 的第一个`h`，然后是 的第一个之后的第一个`h`，等等。

# c - 类似于 C++ 泛型的 AC 函数

> ID：11424017
> 
> 赞同：2
> 
> 时间：2012-07-11T00:46:15.317
> 
> 标签：c, arrays, function, generics

我想实现一个像`c++`泛型这样的功能。除了整数，参数还应该支持 char 类型，以及任何其他类型。

```
void function t(int a[],int len); 
```

如何用 C 语言实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T01:00:49.163

由于您在 C 中没有像 C++ 那样的模板，因此您有几个不同的选项，根据手头的任务可能适合：

*   使用预处理器并创建一个基本宏，例如您的基本`MIN`/`MAX`类型宏，它简单地包装了一些`<`和`>`操作。

*   为特定数据类型编写不同版本的函数 - `function_int(int...)`,`function_char(char...)`等。

*   编写一个将数据作为 a 的通用函数`void*`，不知道实现细节，以及一个由函数调用的函数指针，该函数作用于数据并知道如何操作该数据。

    在这种情况下，请查看类似 的函数`bsearch`，其中搜索键和数组的类型为`void *`，并且为特定类型的数据传递了一个比较函数：

    ```
    void *bsearch(const void *key, const void *base, size_t nmemb, size_t size,
                  int (*compar)(const void *, const void *)); 
    ```

    比较函数是唯一需要知道数据类型的代码，因此您只需编写函数的通用部分一次。但是，您仍然需要为要操作的每种数据类型编写一个函数，就像上面提到的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T01:02:51.193

我相信这是[C Unleashed](https://rads.stackoverflow.com/amzn/click/com/0672318962)一书中描述的一种技术。这本书可能有一些比我能够从记忆中重现的更优雅的东西。

你可以有一个这样的包含文件：

```
/* function.tmpl */
#ifndef FUNCTION
#define FUNCTION_PASTE(X,Y) X ## _ ## Y
#define FUNCTION(X) FUNCTION_PASTE(function, X)
#endif

void FUNCTION(TYPE) (TYPE a[], int len) {
    /* do something */
} 
```

然后你可以像这样包含它：

```
#define TYPE int
#include "function.tmpl"
#undef TYPE

#define TYPE double
#include "function.tmpl"
#undef TYPE 
```

并调用这样的函数：

```
int a[4];
FUNCTION(int)(a, 4);

double b[5];
FUNCTION(double)(b, 5); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T01:03:18.203

你可以尝试这样的事情：

```
enum data_type { CHAR_TYPE, INT_TYPE };

void function t(void* buf, size_t len, enum data_type type) {
    int*  int_ary;
    char* char_ary;

    if (type == CHAR_TYPE) {
        char_ary* = buf;
        ...
    } else if (type == INT_TYPE) {
        int_ary* = buf;
        ...
    }
} 
```

这是hackish且容易出错，但它可以工作。它与 C++ 不完全一样，因为它是一个统一的函数，而不是每种类型的单独版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T00:56:16.510

在 C 中执行此操作的惯用方法是传递一个 void*。但是，您需要额外的信息才能对其进行实际操作。

# android - ToyVPN 无法连接到 VPN Server

> ID：11424022
> 
> 赞同：2
> 
> 时间：2012-07-11T00:47:14.703
> 
> 标签：android, android-4.0-ice-cream-sandwich, vpn

我正在使用示例项目“ToyVPN”试验新的 VPNService API。我没有修改源代码，它编译顺利，但我似乎无法让它连接到我在 ec2 上的 VPN 服务器。它因错误“Got java.lang.IllegalStateException: Timed out”而超时。从服务器的角度来看，没有收到来自电话的数据包。我正在输入服务器的 IP 地址 1723 和我的服务器地址、服务器端口和共享密钥的密码。

我可以使用默认的 ubuntu vpn 管理器通过 pap 身份验证使用相同的密码连接到我的 vpn 服务器。

有人可以提供有关正在发生的事情以及如何使 ToyVPN 连接到我的服务器的见解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:53:26.273

“ToyVPN”项目的示例服务器实现怎么样？你为什么不使用它？在 Linux 中很容易设置，所有步骤和限制都在 ToyVpnServer.cpp 文件中描述。当然首先你应该编译它。我使用 GCC 包编译它：

gcc ToyVpnServer.cpp

将在同一目录中创建名为“a.out”的程序文件。然后使用 ToyVpnServer.cpp 中描述的参数从命令行运行它。

奇怪的是，您在 VPN 服务器端看不到任何数据包。我试图通过 ToyVpn 连接到我的 VPN 服务器，只是想看看会发生什么。连接失败，但服务器日志中有消息，表示已收到数据包，但其大小太小。

希望这会有所帮助。

# android - 在 Android 中，如何将 HTTP 流媒体视频 URL 从我的应用程序传递到其他流媒体播放器应用程序？

> ID：11424024
> 
> 赞同：0
> 
> 时间：2012-07-11T00:47:47.497
> 
> 标签：android, video, android-intent, streaming

我想将 HTTP URL 流媒体视频从我的应用程序带到其他应用程序，该应用程序是流媒体播放器并播放流媒体，当我从另一个应用程序出来时，它应该直接返回到我的应用程序。

提前致谢

最好的 rgds 辛哈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T00:56:56.323

您可以启动该流式应用程序的活动并将包含有关流式传输的所有必需信息（例如 HTTP URL）的捆绑包传递给该活动

这是启动该活动所必须使用的语法。

```
Intent intent = new Intent();
intent.setComponent(new ComponentName("com.example", "com.example.MyExampleActivity"));
startActivity(intent); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T01:00:41.630

尝试类似...

```
Intent i = new Intent();
i.setAction(Intent.ACTION_VIEW);
Uri uri = Uri.parse("http://server.yourcompany.com:1234/video.3gp";
i.setDataAndType(uri, "video/*");
try {
    startActivity(i);
} catch (ActivityNotFoundException e) {
    // Handle exception
} catch (Exception e) {
    Handle exception
} 
```

上面的代码将尝试在设备上启动默认的视频播放器应用程序。不过，用户必须`Back`在视频结束后按下按钮才能返回您的应用程序。

# vbscript - WMI 获取对象错误

> ID：11424025
> 
> 赞同：0
> 
> 时间：2012-07-11T00:47:50.147
> 
> 标签：vbscript, wmi, wmi-query

在 Windows XP 上，在我的 vbscript 中，我正在使用

GetObject("winmgmts:\.\root\cimv2")

获取 WMI 服务对象，但总是得到错误：（空）：无效的语法。我检查了语法，应该没问题。我什至尝试按照[这里](http://katyscode.wordpress.com/2007/02/03/tutorial-how-to-fix-wmi-corruption)的建议重建回购，但仍然遇到同样的错误。我想这可能是权限/安全策略问题。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T03:37:31.260

您的[语法](http://technet.microsoft.com/library/bb684728)错误，您缺少一个`\`

改为使用

```
GetObject("winmgmts:\\.\root\cimv2"); 
```

甚至更好的是，您可以直接获取 WMI 类的实例，包括 WMI 路径

```
GetObject("winmgmts:\\.\root\cimv2:Win32_LogicalDisk='C:'") 
```

# php - SELECT rows WHERE next n 行满足条件

> ID：11424029
> 
> 赞同：3
> 
> 时间：2012-07-11T00:48:01.023
> 
> 标签：php, mysql, architecture

假设我们有这个资源可用性表：

```
+-----------+-----------------------------------------------------------+
| date      | obvious, the date                                         |
| timeslot  | we have 12 fixed 2-hour timeslots so this will be 1 to 12 |
| r1        | number of resource type 1 available during this timeslot  |
| r2        | same, for resource type 2                                 |
| r3        | same, for resource type 3                                 |
+-----------+-----------------------------------------------------------+ 
```

现在，我想查看我可以用来做的所有可用时间段`job #43`。对于这项工作，我需要 2 个*r1*单位、1个*r2*单位和 3 个*r3*单位。假设这项工作需要一个*时间段*，我可以使用这个查询：

```
SELECT `date`, `timeslot` FROM `resource_availability` 
WHERE
  `r1` > '1' AND
  `r2` > '0' AND
  `r3` > '2'
ORDER BY 'date`, `timeslot`; 
```

但是，如果我有另一份工作`job #86`需要 3 个时间段才能完成并且无法停止重新启动，那么是否可以通过查询获得安全的开始时间？

我目前正在检查`while`循环中的连续性，但认为可能有可能让查询执行此操作。

如果可能的话，我想知道哪个更快，更有效。对于功效评估，应该注意的是，作为一种位图的该表会非常频繁地更新 - 即，随着每个作业的调度，资源可用性列会得到更新。

此外，很明显，该系统的目的是允许检查*假设*。如果我的方法不是最优的，还有什么更好的选择？

如果最后一个问题*太多*，请忽略它，或者在评论中告诉我，我会删除它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T05:13:14.687

唷...我提出了一个想法，可以让你得到你想要的。如果理解起来需要一点时间，请原谅我，但我希望你看到它实际上是一个相当简单的解决方案，可以解决一个中等复杂的问题。

我将构建查询（在 PHP 中）以具有 n 个自连接，其中 n 是作业所需的时隙数。自联接加入*下一个*连续的时隙，并根据所有时隙中可用的资源对结果进行细化。请注意，您可以将动态创建的 WHERE 子句移动到 JOIN 条件中......我*已经*看到 MySQL 的版本会以这种方式提高速度。

# php代码：

```
// $r1, $r3, and $r3 are the required resources for this job.

$join_format = 'JOIN timeslots AS %s ON %date = %s.date AND %s.timeslot+1 = %s.timeslot';
$where_format = '(%s.r1 >= '.$r1.' AND %s.r2 >= '.$r2.' AND %s.r3 >= '.$r3.')';

$joins = array();
$wheres = array("block1.date > CURDATE()",
                sprintf($where_format, "block1", "block1", "block1")
                );
$select_list = 'block1.date, block1.timeslot as starting_time, block' . $slots_needed . '.timeslot as ending_time';

for($block = 2; $block <= $slots_needed; $block++) {
  $join_alias = "block" . $block;
  $previous_alias = "block" . ($block-1);
  $joins[] = sprintf($join_format, $join_alias, $previous_alias,$join_alias, $previous_alias, $join_alias);
  $wheres[] = sprintf($where_format, $join_alias, $join_alias, $join_alias);
}

$query_format = 'SELECT %s FROM timeslots as block1 %s WHERE %s GROUP BY block1.date, block1.timeslot ORDER BY block1.date ASC, block1.timeslot ASC';
$joins_string = implode(' ', $joins);
$wheres_string = implode(' AND ', $wheres);
$query = sprintf($query_format, $select_list, $joins_string, $wheres_string); 
```

尽我所能，这应该会产生这样的查询（对于 2 个需要的块，每个需要 1 个资源：

# 生成的 SQL：

```
SELECT 
  block1.date,
  block1.timeslot as starting_time, 
  block2.timeslot as ending_time
FROM 
  timeslots AS block1
  JOIN timeslots AS block2
    ON block1.date = block2.date AND block1.timeslot+1 = block2.timeslot
WHERE
  block1.date > CURDATE()
  AND (block1.r1 >= 1 AND block1.r2 >= 1 AND block1.r3 >= 1)
  AND (block2.r1 >= 1 AND block2.r2 >= 1 AND block2.r3 >= 1)
GROUP BY
  block1.date, block1.timeslot
ORDER BY
  block1.date ASC, block1.timeslot ASC 
```

它应该产生如下结果：

# 预期结果集：

```
+------------+---------------+-------------+
|    date    | starting_time | ending_time |
+------------+---------------+-------------+
| 2001-01-01 |       1       |      2      |
+------------+---------------+-------------+
| 2001-01-01 |       2       |      3      |
+------------+---------------+-------------+
| 2001-01-01 |       7       |      8      |
+------------+---------------+-------------+
| 2001-01-01 |       8       |      9      |
+------------+---------------+-------------+
| 2001-01-02 |       4       |      5      |
+------------+---------------+-------------+ 
```

请注意，如果需要 2 个块，但 3 个可用（连续），则查询*将*返回两个选项（第一个和第二个或第二个和第三个可用时间）。

# javascript - 如何将 Jquery 合并为更清晰的格式

> ID：11424032
> 
> 赞同：1
> 
> 时间：2012-07-11T00:48:15.197
> 
> 标签：javascript, jquery

我需要一些帮助来整合我的代码。这是工作代码，但当我尝试简化时似乎无法得到它。

我是用 jquery 编写的，而且我对整个 javascript 还是很陌生。它基本上是一个循环，但我不知道如何循环它。

```
<script type="text/javascript">
// house_one
    $('.house_one')
    .mouseenter(function() {
      $('.box_one').addClass('hover');
    })
    .mouseleave(function() {
      $('.box_one').removeClass('hover');
    });
    $('.box_one')
    .mouseenter(function() {
      $('.house_one').addClass('house_hover');
    })
    .mouseleave(function() {
      $('.house_one').removeClass('house_hover');
    });
//house_two
    $('.house_two')
    .mouseenter(function() {
      $('.box_two').addClass('hover');
    })
    .mouseleave(function() {
      $('.box_two').removeClass('hover');
    });
            $('.box_two')
    .mouseenter(function() {
      $('.house_two').addClass('house_hover');
    })
    .mouseleave(function() {
      $('.house_two').removeClass('house_hover');
    });
// house_three
    $('.house_three')
    .mouseenter(function() {
      $('.box_three').addClass('hover');
    })
    .mouseleave(function() {
      $('.box_three').removeClass('hover');
    });
    $('.box_three')
    .mouseenter(function() {
      $('.house_three').addClass('house_hover');
    })
    .mouseleave(function() {
      $('.house_three').removeClass('house_hover');
    });
// house_four
    $('.house_four')
    .mouseenter(function() {
      $('.box_four').addClass('hover');
    })
    .mouseleave(function() {
      $('.box_four').removeClass('hover');
    });
    $('.box_four')
    .mouseenter(function() {
      $('.house_four').addClass('house_hover');
    })
    .mouseleave(function() {
      $('.house_four').removeClass('house_hover');
    });
// house_five
    $('.house_five')
    .mouseenter(function() {
      $('.box_five').addClass('hover');
    })
    .mouseleave(function() {
      $('.box_five').removeClass('hover');
    });
    $('.box_five')
    .mouseenter(function() {
      $('.house_five').addClass('house_hover');
    })
    .mouseleave(function() {
      $('.house_five').removeClass('house_hover');
    });
// house_six
    $('.house_six')
    .mouseenter(function() {
      $('.box_six').addClass('hover');
    })
    .mouseleave(function() {
      $('.box_six').removeClass('hover');
    });
    $('.box_six')
    .mouseenter(function() {
      $('.house_six').addClass('house_hover');
    })
    .mouseleave(function() {
      $('.house_six').removeClass('house_hover');
    });
// house_seven
    $('.house_seven')
    .mouseenter(function() {
      $('.box_seven').addClass('hover');
    })
    .mouseleave(function() {
      $('.box_seven').removeClass('hover');
    });
    $('.box_seven')
    .mouseenter(function() {
      $('.house_seven').addClass('house_hover');
    })
    .mouseleave(function() {
      $('.house_seven').removeClass('house_hover');
    });
// house_eight
    $('.house_eight')
    .mouseenter(function() {
      $('.box_eight').addClass('hover');
    })
    .mouseleave(function() {
      $('.box_eight').removeClass('hover');
    });
    $('.box_eight')
    .mouseenter(function() {
      $('.house_eight').addClass('house_hover');
    })
    .mouseleave(function() {
      $('.house_eight').removeClass('house_hover');
    });
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T00:56:48.840

只需使用两个类`box`，`house`所有这些都可以简化为：

```
$('.house').on('mouseenter mouseleave', function(){
  $(this).closest('.box').toggleClass('hover')
})

$('.box').on('mouseenter mouseleave', function(){
  $(this).closest('.house').toggleClass('house_hover')
}) 
```

**编辑：**

如果您`closest()`因为元素不共享同一个容器而无法使用标记，那么除了通用类之外，还可以使用 id。

```
$('.house').on('mouseenter mouseleave', function(){
  // Assuming id = house_one (or two, three etc...)
  var id = this.id.split('_')[1]
  $('#box_'+ id).toggleClass('hover')
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T01:19:49.553

```
function setupHovers(house, box){
    house = $(house);
    box   = $(box);
    house.hover(function(){  box.toggleClass('hover');  });
    box.hover(function(){    house.toggleClass('house_hover');  });
}

boxHouseArray = ['one','two','three','four','five','six' ...]; //

for(boxHouse in boxHouseArray){
   setupHovers('.house_'+boxHouse, '#box_'+boxHouse);
} 
```

甚至更好地稍微改变你的标记：

```
<a href="/interiors/house_1" class="house_list">House 04</a>
 and
<div class="box"></div> 
```

现在你可以这样：

```
var houses = $('.house_list'), boxes = $('.box');
houses.hover(function(){
    boxes.eq( houses.index(this) ).toggleClass('hover'); 
});
boxes.hover(function(){
    houses.eq( boxes.index(this) ).toggleClass('house_hover'); 
}); 
```

这里的想法是没有额外的 id 或标记，我们只是使用标记中元素的顺序作为我们的配置。假设我们将鼠标悬停在第一个框上：`index(this)`将告诉我们它是否是页面上的第一个框并通过触发第一个房子上的悬停类`eq`

# php - 用于自动完成 jQueryUI 的 MYSQL 到 JSON

> ID：11424035
> 
> 赞同：0
> 
> 时间：2012-07-11T00:48:45.797
> 
> 标签：php, javascript, jquery, jquery-ui, autocomplete

我下面的代码显示了我在做什么。基本上，目的是从数据库中检索数据并将其转换为 jQueryUI 的 JSON 格式。使用下面的方法和不使用 array_to_json 函数的方法，我能够返回 JSON 数据。例如：[{“name”：“Kurt Schneider”}，{“name”：“Sam Tsui”}，{“name”：“Christina Grimmie”}]

但问题是它仍然无法使用自动完成功能。我用示例提供的 search.php 替换了下面的代码，所以这显然是这段代码的问题。

我只从以下代码开始：

```
<?php
    include 'connect.php';
    mysql_select_db("database", $con);
    $search = mysql_query("SELECT name FROM artist");
    $rows = array();
    while($row = mysql_fetch_assoc($search)) {
        $result[] = $row;
    }
print json_encode($result);
?> 
```

它有效地实现了与以下代码相同的结果（除了间距方面的一些差异）：（array_to_json 函数直接从示例中复制）。

```
<?php
    include 'connect.php';
    mysql_select_db("database", $con);
    $search = mysql_query("SELECT name FROM artist");
    $rows = array();
    while($row = mysql_fetch_assoc($search)) {
        $result[] = $row;
    }

    function array_to_json( $array ){

    if( !is_array( $array ) ){
        return false;
    }

    $associative = count( array_diff( array_keys($array), array_keys( array_keys( $array )) ));
    if( $associative ){

        $construct = array();
        foreach( $array as $key => $value ){

            // We first copy each key/value pair into a staging array,
            // formatting each key and value properly as we go.

            // Format the key:
            if( is_numeric($key) ){
                $key = "key_$key";
            }
            $key = "\"".addslashes($key)."\"";

            // Format the value:
            if( is_array( $value )){
                $value = array_to_json( $value );
            } else if( !is_numeric( $value ) || is_string( $value ) ){
                $value = "\"".addslashes($value)."\"";
            }

            // Add to staging array:
            $construct[] = "$key: $value";
        }

        // Then we collapse the staging array into the JSON form:
        $result = "{ " . implode( ", ", $construct ) . " }";

    } else { // If the array is a vector (not associative):

        $construct = array();
        foreach( $array as $value ){

            // Format the value:
            if( is_array( $value )){
                $value = array_to_json( $value );
            } else if( !is_numeric( $value ) || is_string( $value ) ){
                $value = "'".addslashes($value)."'";
            }

            // Add to staging array:
            $construct[] = $value;
        }

        // Then we collapse the staging array into the JSON form:
        $result = "[ " . implode( ", ", $construct ) . " ]";
    }

    return $result;
}

    echo array_to_json($result);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T04:42:02.883

```
<?php
    include 'connect.php';
    mysql_select_db("database", $con);
    $search = mysql_query("SELECT name FROM artist");
    $rows = array();
    while($row = mysql_fetch_assoc($search)) {
        //don't add the array, just the name.
        $result[] = $row["name"];
    }
print json_encode($result);
?> 
```

上面的代码应该返回 JSON

```
["Kurt Schneider", "Sam Tsui", "Christina Grimmie"] 
```

# html - 复选框输入是否仅在选中后才发布数据？

> ID：11424037
> 
> 赞同：207
> 
> 时间：2012-07-11T00:48:49.150
> 
> 标签：html, input, checkbox

如果在表单提交时检查它，浏览器是否只发送复选框输入值数据的标准行为？

如果没有提供值数据，默认值是否总是“开启”？

假设以上是正确的，所有浏览器的这种行为是否一致？

* * *

## 回答 #1

> 赞同：212
> 
> 时间：2012-07-11T00:55:54.127

是的，标准行为是仅在选中复选框时才发送值。这通常意味着您需要有一种方法来记住您期望在服务器端使用哪些复选框，因为并非所有数据都从表单中返回。

默认值始终为“on”，这应该在浏览器之间保持一致。

这包含在[W3C HTML 4 建议](http://www.w3.org/TR/html401/interact/forms.html)中：

> 复选框（和单选按钮）是可以由用户切换的开/关开关。当设置了控制元素的选中属性时，开关处于“打开”状态。提交表单时，只有“打开”复选框控件才能成功。

* * *

## 回答 #2

> 赞同：105
> 
> 时间：2012-07-11T00:55:57.500

在 HTML 中，每个`<input />`元素都与一个（但不是唯一的）名称和值对相关联。`<input />`仅当“成功”时，才会在后续请求（在本例中为 POST 请求正文）中发送该对。

因此，如果您的`<form>`DOM 中有这些输入：

```
<input type="text"     name="one"   value="foo"                        />
<input type="text"     name="two"   value="bar"    disabled="disabled" />
<input type="text"     name="three" value="first"                      />
<input type="text"     name="three" value="second"                     />

<input type="checkbox" name="four"  value="baz"                        />
<input type="checkbox" name="five"  value="baz"    checked="checked"   />
<input type="checkbox" name="six"   value="qux"    checked="checked" disabled="disabled" />
<input type="checkbox" name=""      value="seven"  checked="checked"   />

<input type="radio"    name="eight" value="corge"                      />
<input type="radio"    name="eight" value="grault" checked="checked"   />
<input type="radio"    name="eight" value="garply"                     /> 
```

将生成这些将提交给服务器的名称+值对：

```
one=foo
three=first
three=second
five=baz
eight=grault 
```

请注意：

*   `two`并被`six`排除在外，因为它们具有`disabled`属性集。
*   `three`被发送了两次，因为它有两个同名的有效输入。
*   `four`未发送，因为它`checkbox`不是`checked`
*   `six`尽管存在，但未发送，`checked`因为该`disabled`属性具有更高的优先级。
*   `seven`没有`name=""`发送属性，所以没有提交。

关于您的问题：您可以看到未选中的复选框因此不会将其名称+值对发送到服务器 - 但其他具有相同名称的输入将与它一起发送。

像 ASP.NET MVC 这样的框架通过（偷偷地）将每个`checkbox`输入与`hidden`呈现的 HTML 中的输入配对来解决这个问题，如下所示：

```
@Html.CheckBoxFor( m => m.SomeBooleanProperty ) 
```

渲染：

```
<input type="checkbox" name="SomeBooleanProperty" value="true" />
<input type="hidden"   name="SomeBooleanProperty" value="false" /> 
```

如果用户未选中该复选框，则以下内容将发送到服务器：

```
SomeBooleanProperty=false 
```

如果用户确实选中了该复选框，那么两者都将被发送：

```
SomeBooleanProperty=true
SomeBooleanProperty=false 
```

但是服务器将忽略`=false`版本，因为它看到了`=true`版本，因此如果它没有看到`=true`它可以确定复选框已呈现并且用户没有检查它 - 而不是`SomeBooleanProperty`根本没有呈现输入。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-07-11T01:03:55.820

如果未选中复选框，则它不会影响表单提交时发送的数据。

HTML5 第[4.10.22.4 节构造表单数据集](http://www.w3.org/TR/2012/WD-html5-20120329/form-submission.html#constructing-form-data-set)描述了表单数据的构造方式：

> 如果满足以下任何条件，则跳过此元素的这些子步骤：[...]
> 
> field元素是一个input元素，它的type属性处于Checkbox状态，并且checkedness为false。

`on`如果`value`缺少，则指定默认值：

> 否则，如果 field 元素是 type 属性处于 Checkbox 状态或 Radio Button 状态的 input 元素，则运行这些进一步嵌套的子步骤：
> 
> 如果 field 元素具有指定的 value 属性，则令 value 为该属性的值；否则，令 value 为字符串“on”。

因此，在表单数据构建过程中会跳过未选中的复选框。

[在HTML4](http://www.w3.org/TR/REC-html40/interact/forms.html#h-17.2.1)下也需要类似的行为。从所有兼容的浏览器中预期这种行为是合理的。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-07-11T00:55:39.567

> 如果在表单提交时检查它，浏览器是否只发送复选框输入值数据的标准行为？

是的，因为否则就没有可靠的方法来确定复选框是否被实际选中（如果它改变了值，那么当你想要的值被选中时，可能会存在这种情况，它与之前的值相同换成）。

> 如果没有提供值数据，默认值是否总是“开启”？

其他答案确认“开”是默认设置。但是，如果您对该值不感兴趣，只需使用：

```
if (isset($_POST['the_checkbox'])){
    // name="the_checkbox" is checked
} 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2015-02-18T11:10:03.297

当且仅当复选框被选中时，复选框才会发布值'on'。Insted 捕获复选框值，您可以使用隐藏输入

**JS**：

```
var chk = $('input[type="checkbox"]');
    chk.each(function(){
        var v = $(this).attr('checked') == 'checked'?1:0;
        $(this).after('<input type="hidden" name="'+$(this).attr('rel')+'" value="'+v+'" />');
    });

chk.change(function(){ 
        var v = $(this).is(':checked')?1:0;
        $(this).next('input[type="hidden"]').val(v);
    }); 
```

**HTML**：

```
<label>Active</label><input rel="active" type="checkbox" /> 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-07-11T00:56:24.747

来自 HTML 4 规范，它应该在几乎所有浏览器中保持一致：

[http://www.w3.org/TR/html401/interact/forms.html#checkbox](http://www.w3.org/TR/html401/interact/forms.html#checkbox)

> 复选框（和单选按钮）是可以由用户切换的开/关开关。当设置了控制元素的选中属性时，开关处于“打开”状态。提交表单时，只有“打开”复选框控件才能成功。

成功定义如下：

> 一个成功的控件对于提交是“有效的”。每个成功的控件都将其控件名称与其当前值配对，作为提交的表单数据集的一部分。成功的控件必须在 FORM 元素中定义，并且必须具有控件名称。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2018-08-08T19:34:29.560

输入类型=“隐藏”名称=“is_main”值=“0”

输入类型=“复选框”名称=“is_main”值=“1”

所以你可以像我在应用程序中那样控制。如果它检查则发送值 1 否则 0

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-04-09T20:47:32.470

以上答案都没有让我满意。我发现最好的解决方案是在每个具有相同名称的复选框输入**之前**包含一个隐藏输入。

`<input type="hidden" name="foo[]" value="off"/>`

`<input type="checkbox" name="foo[]"/>`

然后在服务器端，使用一些算法，您可以获得更像 HTML 应该提供的东西。

```
function checkboxHack(array $checkbox_input): array
{
    $foo = [];
    foreach($checkbox_input as $value) {
        if($value === 'on') {
            array_pop($foo);
        }
        $foo[] = $value;
    }
    return $foo;
} 
```

这将是原始输入

```
array (
    0 => 'off',
    1 => 'on',
    2 => 'off',
    3 => 'off',
    4 => 'on',
    5 => 'off',
    6 => 'on',
), 
```

该函数将返回

```
array (
    0 => 'on',
    1 => 'off',
    2 => 'on',
    3 => 'on',
) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-04-25T14:31:11.523

我有一个动态生成复选框的页面（表单），所以这些答案很有帮助。我的解决方案与这里的许多解决方案非常相似，但我不禁认为它更容易实现。

首先，我将一个隐藏的输入框与我的复选框对齐，即

```
 <td><input class = "chkhide" type="hidden" name="delete_milestone[]" value="off"/><input type="checkbox" name="delete_milestone[]"   class="chk_milestone" ></td> 
```

现在，如果所有这些`checkboxes`都未选中，则隐藏字段返回的值将全部关闭。

例如，这里有五个动态插入的复选框，形成`POSTS`以下值：

```
 'delete_milestone' => 
array (size=7)
  0 => string 'off' (length=3)
  1 => string 'off' (length=3)
  2 => string 'off' (length=3)
  3 => string 'on' (length=2)
  4 => string 'off' (length=3)
  5 => string 'on' (length=2)
  6 => string 'off' (length=3) 
```

这表明只有第 3 和第 4 个复选框是 `on`or `checked`。

本质上，虚拟或隐藏输入字段仅表示一切都已关闭，除非在关闭索引下方有一个**“打开”**，然后在没有一行客户端代码的情况下为您提供所需的索引。

.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-01-16T09:57:35.720

就像 ASP.NET 变体一样，除了将具有相同名称的隐藏输入放在实际的复选框（同名）之前。只会发送最后一个值。这样，如果选中一个框，则发送其名称和值“on”，而如果未选中，则发送相应隐藏输入的名称以及您可能希望为其提供的任何值。最后，您将读取 $_POST 数组，其中包含所有选中和未选中的元素，“on”和“false”值，没有重复的键。易于在 PHP 中处理。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-12-12T19:14:30.010

对于不会在表单提交时发送的未选中复选框有同样的问题，我提出了另一种解决方案，而不是镜像复选框项目。

获取所有未选中的复选框

```
var checkboxQueryString;

$form.find ("input[type=\"checkbox\"]:not( \":checked\")" ).each(function( i, e ) {
  checkboxQueryString += "&" + $( e ).attr( "name" ) + "=N"
}); 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2015-03-01T15:54:09.550

我用这段代码解决了这个问题：

HTML 表单

```
<input type="checkbox" id="is-business" name="is-business" value="off" onclick="changeValueCheckbox(this)" >
<label for="is-business">Soy empresa</label> 
```

和 javascript 函数通过更改复选框值形式：

```
//change value of checkbox element
function changeValueCheckbox(element){
   if(element.checked){
    element.value='on';
  }else{
    element.value='off';
  }
} 
```

并且服务器检查数据发布是“打开”还是“关闭”。我使用了playframework java

```
 final Map<String, String[]> data = request().body().asFormUrlEncoded();

        if (data.get("is-business")[0].equals('on')) {
            login.setType(new MasterValue(Login.BUSINESS_TYPE));
        } else {
            login.setType(new MasterValue(Login.USER_TYPE));
        } 
```

# ruby-on-rails-3 - update_attributes rails 区分创建和更新

> ID：11424040
> 
> 赞同：0
> 
> 时间：2012-07-11T00:48:56.767
> 
> 标签：ruby-on-rails-3, nested-forms, update-attributes

我有一个使用 update_attributes 的嵌套表单（非常类似于 RailsCasts 中显示的表单），它更新父对象以及更新和创建新的子对象。我希望能够区分何时创建子对象、何时更新子对象以及何时更新父对象。反正有这样做吗？我的直接目标是在创建新的子对象时推送广播。

尝试在子模型中使用 after_create 对我的目的不起作用，因为我试图在 application_controller.rb 中调用一个动作。

代码是我的父对象控制器是

```
if @parent_object.update_attributes(params[:parent_object])
  ...want the push_broadcast to go here if it's a new record. 
```

如果我使用调试器，params[:parent_object] 返回这个

```
{"overall_sharing"=>"1", "permissions_attributes"=>{"0"=>{"id"=>"66"}, "1"=>  {"can_edit"=>"1", "can_copy"=>"1", "_destroy"=>"false", "id"=>"74"}, "1341967403169"=>{"user_id"=>"171", "can_edit"=>"1", "can_copy"=>"1", "_destroy"=>"false", "note_id"=>"423"}}} 
```

作为参考，最后一位是新的子对象，第一位是更新父对象，中间是更新子对象。

我不知道正确的路径是尝试弄乱参数还是考虑不同的路线。任何建议将不胜感激。

谢谢，威尔斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T02:41:29.757

Rails api 有一个[很好](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)的嵌套属性文档。（在我看来，Rails 指南在这方面不足）。我认为它应该回答你的大部分问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T04:42:38.493

如果是新记录，则不会有 id。与编辑或更新时不同。

试着找到它。如果你不能，那么它是新的。

```
if params[:id]
  #existing record
else
  #new record
end 
```

# r - 将值分配给向量中的行

> ID：11424047
> 
> 赞同：5
> 
> 时间：2012-07-11T00:49:43.050
> 
> 标签：r

我有一个相对简单的问题，我的同事和我都无法弄清楚。我有一个值向量，我想将其粘贴到数据集中特定列范围内的**所有行中。**

如果我逐行分配值，则以下代码有效：

```
data[1, 1:10] <- myvector
data[2, 1:10] <- myvector 
```

如果我尝试在总行数上分配值，则相同的代码将无法正常工作：

```
data[1:nrows(data), 1:10] <-myvector 
```

看起来向量中的值是垂直填充的，而不是水平填充的。我们想出的最好的方法是一种解决方法，考虑到我的数据中有 20,000 行，这并不理想。

```
for (i in 1:nrow(data)){
     data[i, 1:10] <-myvector
} 
```

必须有一些简单的解释来解释什么是错的。请帮忙！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T00:55:03.830

如您所见，将向量分配给这样的矩阵会垂直填充它们。但是您可以通过分配适当的向量来解决此问题：

```
 data[, 1:10] = rep(myvector, each=NROW(data)) 
```

# android - HttpClient 无法工作

> ID：11424051
> 
> 赞同：0
> 
> 时间：2012-07-11T00:50:35.803
> 
> 标签：android, file-upload, httpclient

[我从http://www.java2s.com/Code/Jar/h/Downloadhttpmimejar.htm](http://www.java2s.com/Code/Jar/h/Downloadhttpmimejar.htm)下载 httpmime.jar

我把httpmime.jar放在jre7/lib/ext/的文件夹下

在下面的代码中出现错误 [此行有多个标记]

```
MultipartEntity entity = new MultipartEntity(
    HttpMultipartMode.BROWSER_COMPATIBLE); 
```

你能给点建议吗？谢谢

我的参考android的代码如下--------

```
 StringBuffer responseBody = new StringBuffer();  
 HttpClient client = new DefaultHttpClient();  
 client.getParams().setParameter(
     CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);  
 HttpPost post = new HttpPost("http://IP.IP.IP.IP/file_upload.php");  
 MultipartEntity entity = new MultipartEntity(
     HttpMultipartMode.BROWSER_COMPATIBLE);  
 entity.addPart("uploadedfile", new FileBody((FileObj), "application/zip")); 
 post.setEntity(entity);     
 ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T02:18:46.260

确保您在单独的网络连接上执行`Thread`，如本[博文](http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html)中所述。这通常是导致您可能遇到的奇怪错误的原因。在为 Android 开发应用程序时，请始终确保在单独的`Thread`（即使用）上执行可能代价高昂的操作。`AsyncTask`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T03:22:06.490

想到两件事：

*   在单独的线程上执行您的网络
*   确保`INTERNET`在您的`Manifest.xml`

You should perform long tasks (such as network I/O) in separate thread from the main thread. In fact depending on the version of Android you're developing for, the JVM will raise a `NetworkOnMainThreadException` if you attempt to do networking on the main thread.

# php - PHP：为什么现在作为未定义的引用传递时我的变量错误？

> ID：11424059
> 
> 赞同：0
> 
> 时间：2012-07-11T00:51:58.807
> 
> 标签：php

我有一个函数，我将一个变量作为引用传递给一个数组被存储到。之前，它还需要第二个引用变量来存储图像 url。当它使用这两种方法时，一切正常，我没有收到未定义的变量错误。现在我已经删除了图像部分并将其包含在存储在单个引用变量中的数组中，它告诉我我传递的变量是未定义的。

这是我的功能：

```
<?php
function retrieve_t($movie_title, &$movie_data) {
    $url = "http://www.imdbapi.com/?t=".urlencode($movie_title);
    $content = file_get_contents($url);
    if(substr($content, 2, 8) == "Response")
        return false;
    $data_array = explode("\",\"", substr($content,2,strlen($content)-4));
    $data_array2 = array();
    foreach ($data_array as $value) {
        $temp = explode("\":\"", $value);
        array_push($data_array2, $temp[0]);
        array_push($data_array2, $temp[1]);
    }
    $movie_data = array($data_array2[0] => $data_array2[1],
                            $data_array2[2] => $data_array2[3],
                            $data_array2[4] => $data_array2[5], 
                            $data_array2[8] => $data_array2[9], 
                            $data_array2[10] => $data_array2[11],
                            $data_array2[12] => $data_array2[13],
                            $data_array2[14] => $data_array2[15],
                            $data_array2[16] => $data_array2[17],
                            $data_array2[18] => $data_array2[19],
                            $data_array2[22] => $data_array2[23],
                            "img_url" => $data_array2[21]);
    return true;
}
 ?> 
```

这里是它的名字：

```
<?php include "imdb_search.php"; ?>
<?php 
if(isset($_GET["add"]) && $_GET["title"])
    if($_GET["add"] == "yes") {
        include "db_movie_add.php"; 
        $title = $_GET["title"];
        if(retrieve_t($title, $movie_data))
            add_movie($movie_data);
    }
 ?>
 <html>
<head>
    <title>First Page</title>
</head>
<Body>
    <form>
        Title: <input value="<?php if (isset($_GET["title"])) echo $_GET["title"]; ?>" type="text" name="title" /><br />
        <input type="submit" value="Search" />
    </form>
    <?php
        if(isset($_GET["title"])) {
            $title = $_GET["title"];
            if(retrieve_t($title, $movie_data)) {
                echo "<img src=\"{$movie_data["img_url"]}\" width=\"200\"><br \>";
                echo "Title: {$movie_data["Title"]}<br \>";
                echo "<form><input type=\"hidden\" name=\"title\" value=\"{$title}\"><input type=\"hidden\" name=\"add\" value=\"yes\"><input type=\"submit\" value=\"Add\" /></form>";
            } else {
                echo "Sorry, movie was not found!";
            }
        }
    ?>
</Body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T02:30:48.633

`$movie_data`您在定义它之前正在使用它。

只需将其设置为`null`第一个：

```
<?php include "imdb_search.php"; ?>
<?php 
if(isset($_GET["add"]) && $_GET["title"])
    if($_GET["add"] == "yes") {
        include "db_movie_add.php"; 
        $title = $_GET["title"];
        $movie_data = null;
        if(retrieve_t($title, $movie_data))... 
```

# c - 如何使用 libstrophe 在 Jabber 中获取用户的头像

> ID：11424063
> 
> 赞同：2
> 
> 时间：2012-07-11T00:52:40.477
> 
> 标签：c, osx-lion, xmpp, avatar, libstrophe

如何获取用户 XMPP/Jabber 名册中所有联系人的头像？

我之前问过[这个问题](https://stackoverflow.com/questions/11277844/how-to-build-a-jabber-client-using-libstrophe/11329013#comment15008853_11329013)，在实现`<presence>`处理程序时，我注意到我的应用程序接收到的存在项是以下形式：

```
<presence to="me" from="contact">
...some other stuff here...
<x xmlns="vcard-temp:x:update"><photo>3FB991AA97D7701C21EAFE65FB866E4BFF1B927C</photo></x>
</presence> 
```

对我来说，这`3FB991AA97D7701C21EAFE65FB866E4BFF1B927C`部分看起来像是一个 SHA 哈希，但我怎样才能获得相关用户的实际头像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T06:53:14.207

基于 vCard 的头像在[XEP-0153](http://xmpp.org/extensions/xep-0153.html)中指定。您是正确的，该`photo`元素包含 SHA1 哈希。请求向您发送哈希的人的 vCard：

```
<iq to='juliet@capulet.com'
    type='get' 
    id='vc2'>
  <vCard xmlns='vcard-temp'/>
</iq> 
```

并从响应中找出照片：

```
<iq to='romeo@montague.net/orchard' 
    type='result'
    id='vc2'>
  <vCard xmlns='vcard-temp'>
    <PHOTO>
      <TYPE>image/jpeg</TYPE>
      <BINVAL>
        Base64-encoded-avatar-file-here!
      </BINVAL>
    </PHOTO>
  </vCard>
</iq> 
```

如果要使用此协议，则**必须**基于此进行缓存，并且您真的想限制在启动时请求头像的频率（尤其是用户第一次登录时）。在很短的时间内抓取大量的化身可能会让您受到服务器的速率限制。

此外，在计算 SHA1 哈希时要非常小心。我见过几个不太小心的客户，他们最终陷入无休止的循环，一遍又一遍地重新请求同一个头像。

如果您请求头像并且它与您期望的哈希不匹配，我建议使用负缓存；缓存您不会得到该哈希的答案的事实，并且下次不要再要求它。发件人的 SHA1 逻辑可能以某种有趣的方式出错，并且下次您询问时它不会变得更好。

[最后，一些客户端被写入尝试首先使用XEP-0054](http://xmpp.org/extensions/xep-0054.html)向发件人的服务器询问 vCard 数据，如 XEP-0153 所说，然后通过将 vCard 的 IQ get 发送到发件人的完整 JID（用户@域/资源）。准备好在发件人方面处理这些请求。

# html - 为什么我的内容在没有滚动选项的情况下被截断？

> ID：11424067
> 
> 赞同：1
> 
> 时间：2012-07-11T00:53:11.433
> 
> 标签：html, css, scroll, position, fixed

我正在编写一个小型网站来学习 HTML 和 CSS，但我无法让我的内容向任何方向滚动。

当浏览器窗口的大小调整到无法容纳任何内容的程度时，它不会滚动，而是消失。登录按钮的 div 应该出现在距左侧 950 像素处。这意味着如果浏览器窗口比那个小，它将允许您滚动，对吗？

新闻框将显示任何写入的内容，直到它到达浏览器窗口的底部。然后它不会滚动或显示。

有什么建议么？

HTML[在这里](http://pastebin.com/jGNKsDYT)，CSS 在[这里](http://pastebin.com/0fgwXPa4)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T01:19:53.670

您的 CSS 中有许多`position:fixed`属性。当对象的`position`设置为`fixed`时，即使您正在滚动，它也会保持静止。因此，没有任何东西可以移动，因此您无法滚动。尝试将您的 CSS 更改为以下内容：

```
body {
background-color: #222222;
overflow: auto;
color: #ffffff;
font-family: verdana, sans-serif;
}
a { color: #ffffff; }
a:visited { color: #ffffff; }

#page_header {
margin-top: 55px;
margin-left: 100px;
font-size: 50px;
}

#user_info {
/*right: 50px;*/
left: 950px;
top: 60px;
position:absolute;
}
#user_info a {
padding: 15px;
text-decoration: none;
font-size: 35px;
}
#user_info a:hover {
background-color: #606060;
}

#boxes {
margin-top: 100px;
margin-left: 100px;
}

#left_content_box {
padding: 20px;
background-color: #00cdcd;
width: 600px;
float: left;
}
#left_content_box header {
top: 15px;
left: 50px;
font-size: 25px;
}
#left_content_box section {
padding: 10px;
}
#left_content_box section header {
padding-top: 25px;
position: relative;
font-size: 20px;
left: 0px;
}
#left_content_box section p {
position: relative;
top: 20px;
left: 10px;
font-size: 15px;
overflow: auto;
} 
```

这将使所有内容保持在原来的位置，除了当浏览器调整到无法显示其所有内容的程度时页面现在可以滚动。

# c# - System.IO 有没有办法检测延迟写入失败（来自 WebDAV）？

> ID：11424070
> 
> 赞同：1
> 
> 时间：2012-07-11T00:54:08.057
> 
> 标签：c#, file-io, io, webdav, mapped-drive

所以我有一个 C# 控制台应用程序，它通过大量文件并使用 WebDAV 映射驱动器将丢失的文件复制到远程位置。

本质上，我没有使用自定义客户端，我使用的是 Windows 内置客户端。

`net use j: http://127.69.69.69 /user:testme pass /persistent:yes`

一切似乎都很好（我已经增加了 IIS 7.0 服务器上的文件大小限制等），除了偶尔我会从操作系统弹出“延迟写入失败”。

我的问题是我的应用程序没有在客户端的 File.Copy() 方法上保释/抛出异常——我如何检测到这一点？

我想这不是什么大不了的事，但我的一部分想知道为什么没有抛出异常。它似乎移动到下一个文件而没有记录错误。我的脚本检查远程文件大小是否相同，并且可以在下一个周期替换部分文件。

它实际复制的非常简单的代码：

```
Log("\n copying " + lf.FullName);
try
{
    if (!Directory.Exists(Path.Combine(remotePath, localDir.Name)))
          Directory.CreateDirectory(Path.Combine(remotePath, localDir.Name));
}
catch (Exception e)
{
       Log("Cannot create remote directory " + Path.Combine(remotePath, localDir.Name) + " " + e.Message , "error");
}
try
{
    File.Copy(lf.FullName, Path.Combine(new string[] { remotePath, localDir.Name, lf.Name }), true);
}
catch (Exception e)
{
     Log("Cannot copy file to " + Path.Combine(new string[] { remotePath, localDir.Name, lf.Name }) + " " + e.Message, "error");
} 
```

# c++ - C ++中两个标题排序之间的差异似乎会产生错误

> ID：11424071
> 
> 赞同：0
> 
> 时间：2012-07-11T00:54:09.900
> 
> 标签：c++, header, compiler-errors

我有一个名为 File 的类（与其他类一起）在标题“dmanager1.h”中定义。在“dmanager1.cpp”文件（dmanager1.h 文件的实现）中，当我按一个顺序列出头文件时，尝试与 main.cpp 一起编译时出现错误（main.cpp 为空，头文件除外调用和一个空的“int main()”...基本上我只是在测试类 .h 和 .cpp 文件）...如果我在 dmanager1.cpp 文件中切换标题，我不会收到任何错误。我不明白发生了什么。我得到的错误是：错误：'文件'没有命名类型

当我在“dmanager1.cpp”中按如下方式订购标头时，我收到错误消息：

```
#include "dmanager1.h"
#include <iostream>
#include <cstring> 
```

如果我将标题切换为：

```
 #include <iostream>
 #include <cstring>
 #include "dmanager1.h" 
```

...我没有得到编译错误。第一个订单被解析好笑吗？任何想法将不胜感激。

编辑：添加了有问题的标题的一部分......

```
#ifndef _dmanager1_h
#define _dmanager1_h

//--------------------
// Forward References
//--------------------
// Node_L, Node_T, and Sector are defined in File: dmanager1a.h
class Node_L;
class Node_T;
class Sector;

class File
{
        public:
                // Default Constructor
                //File();
                // Constructor: Allowing "name", "size", and/or "permissions" to be set
                // Permissions set to default of 0 == read and write
                File(const char * & name, float size = 0, int permissions = 0) : timestamp(11223333) {};
                // Default Destructor
                ~File();

                //returns an int corresponding to the date modified (mmddyy)
                int get_date_mod(void) const {return timestamp;}

                // Return's current level of permission on the File: 0 = read/write, 1 = read only
                int get_permission(void) const {return permission;}

                // Set's Permission to "level": 0 = read/write, 1 = read only
                int set_permission(int level);

        private:
                // Data members
                char * name;
                float size_OA;

                //function used to update "date modified"
                void update_timestamp(void);

                // Current permission level of the file: 0 = read/write, 1 = read only
                int permission;

                //value modified by update_timestamp() and the value returned by get_date_mod().  Date file last edited.
                int timestamp;

}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T00:58:50.783

很可能你的`dmanager1.h`标题需要一些`iostream`或`cstring`定义的东西。

结果，它没有被正确解析，编译器不理解你的`File`类的声明。

如果您发布`dmanager1.h`文件，您将能够获得更详细的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T01:08:44.227

确保每个标题都是完全自给自足的。它需要为`#include`它使用的所有内容添加标题，而不是假设它们会被其他东西包含。即使它是 .c 文件包含的唯一标头，每个标头都应该工作。

我敢打赌，您的 dmanager1.h 标头正在使用标准库中的某些内容，而您没有包含它需要的标头。交换标题似乎可以解决问题，但这只是巧合。

您可以进行的一项诊断测试是创建一个 .c 文件，其中只包含 .c 行`#include "dmanager1.h"`。尝试编译它。如果编译器抛出错误，它应该提供有关需要包含哪些附加标头的提示。

更新：我可以使用您发布的标头的初始部分进行编译，`g++ -Wall`并且根本没有收到任何错误或警告。请发布重现问题的示例。

# c++ - SSE2、Visual Studio 2010 和调试版本

> ID：11424075
> 
> 赞同：4
> 
> 时间：2012-07-11T00:54:46.993
> 
> 标签：c++, visual-studio-2010, optimization, sse2

### 禁用优化时编译器能否自动使用 SSE2？

### 当优化被禁用时，/arch:SSE2 标志是否意味着什么？

我的任务是从我们的软件中榨取更多性能。不幸的是，发布构建是使用调试设置完成的，到目前为止，为优化案例争论的尝试都没有成功。

使用编译器标志为 x86 编译`/ZI /Od /arch:SSE2 /FAs`。生成的程序集表明编译器没有使用`SSE2`. 这是因为优化被禁用了吗？

在代码中，有几种类似的情况：

```
char* begin = &bufferObject;
char* end   = begin + sizeof(bufferObject);
char  result;
while ( begin != end ) {
    result ^= *begin++;
} 
```

我想让编译器为我向量化这个操作，但它没有；我怀疑需要启用优化。

我手工编写了两种解决方案：一种使用内联`__asm`块，另一种使用`<emmintrin.h>`. 我宁愿不依赖这个。

### 更新

除上述问题外，我希望调用库函数，例如`memcpy`，在适当的时候使用提供的矢量化版本。查看 的汇编代码`memcpy`，我可以看到有一个调用的函数`_VEC_memcpy`用于`SSE2` 更快地复制。决定是否分支到此例程的块是：

```
 ; First, see if we can use a "fast" copy SSE2 routine
    ; block size greater than min threshold?
    cmp     ecx,080h
    jb      Dword_align
    ; SSE2 supported?
    cmp     DWORD PTR __sse2_available,0
    je      Dword_align
    ; alignments equal?
    push    edi
    push    esi
    and     edi,15
    and     esi,15
    cmp     edi,esi
    pop     esi
    pop     edi
    jne     Dword_align

    ; do fast SSE2 copy, params already set
    jmp     _VEC_memcpy 
```

我不认为这`_VEC_memcpy`被称为......*永远*。

### 标志应该`/arch:SSE2`定义这个`__sse2_available`符号吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T00:57:54.857

Visual Studio 2010 及更早版本根本不支持自动矢量化。

的目的`/arch:SSE2`是允许编译器使用标量 SSE 进行浮点运算，而不是 x87 FPU。

因此，您*可能会*获得一些加速，`/arch:SSE2`因为它允许您访问 x64 上的更多寄存器。但请记住，它不是来自矢量化。

如果你想在 VS2010 上进行矢量化，你几乎必须用内在函数手动完成。

* * *

Visual Studio 2012 支持自动矢量化：

[http://msdn.microsoft.com/en-us/library/hh872235%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/hh872235%28v=vs.110%29.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T01:07:12.553

尝试优化使用 MSVC 的调试设置构建的代码是一种愚蠢的差事，因为编译器通过*例如*将数据进出堆栈（这会导致加载命中存储停顿）来有效地使您的代码变慢和其他类似的事情。

在任何情况下，MSVC 都不会在 Release 或 Debug 中对该块进行矢量化。您需要使用内在函数来让它发出正确的机器代码。这是 /O2 /Ot /Oi /arch:SSE2 ：

```
PUBLIC  ?VectorTest@@YADPAD0@Z              ; VectorTest
; Function compile flags: /Ogtp
;   COMDAT ?VectorTest@@YADPAD0@Z
_TEXT   SEGMENT
_begin$ = 8                     ; size = 4
_result$ = 11                       ; size = 1
_end$ = 12                      ; size = 4
?VectorTest@@YADPAD0@Z PROC             ; VectorTest, COMDAT

; 143  : {

    push    ebp
    mov ebp, esp

; 144  :    char  result;
; 145  :    while ( begin != end ) {

    mov ecx, DWORD PTR _begin$[ebp]
    mov edx, DWORD PTR _end$[ebp]
    mov al, BYTE PTR _result$[ebp]
    cmp ecx, edx
    je  SHORT $LN1@VectorTest
$LL2@VectorTest:

; 146  :        result ^= *begin++;

    xor al, BYTE PTR [ecx]
    inc ecx
    cmp ecx, edx
    jne SHORT $LL2@VectorTest
$LN1@VectorTest:

; 147  :    }
; 148  :    return result;
; 149  : }

    pop ebp
    ret 0
?VectorTest@@YADPAD0@Z ENDP             ; VectorTest
_TEXT   ENDS 
```

现代编译器在矢量化方面真的很糟糕，所以我们依赖于在整个应用程序中使用 SSE 内在函数。我怀疑任何编译器都会向量化该特定操作，因为它本质上是“减少”而不是“映射”，而且我还没有看到执行水平（非正交）向量化的编译器。

# powerpoint - 当 Powerpoint 中出现列表项时，如何与另一个图像切换图像？

> ID：11424076
> 
> 赞同：-1
> 
> 时间：2012-07-11T00:54:59.183
> 
> 标签：powerpoint

我正在创建一个演示文稿，但我遇到了一个奇怪的情况！

我有一张分为 2 列的幻灯片！在左侧，我想要一个项目符号列表，当我按 Enter 或右箭头键时，它的项目一个接一个地出现，而在右侧，我想要一个取决于列表中最后一个可见项目的图像。

这意味着当我按 Enter 并出现项目符号时，我希望图像发生变化，并且我希望这两种方式都发生！

有人知道该怎么做吗？！所有这些动作都发生在一张幻灯片中！用每个“框架”创建 20 张不同的幻灯片并不是我想做的事情，除非当然没有其他方法！

非常感谢您提前抽出时间！:)

乔治

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:16:05.527

在 PowerPoint 中使用良好的动画技术，很容易做你想做的事。缺点是其他人很难理解幻灯片之外的幻灯片。如果没有。项目较少，您将很容易做您所寻求的。您可以在此处发布您的幻灯片以便正确理解吗？

**无论如何，如果您可以理解，请尝试以下步骤：**

1.  **为左侧的项目 1 名称提供**入口**动画**[*点击时]*
****   **为右侧的项目 1 图像提供**入口**动画**[ *with previous]*****   **为左侧的项目 2 名称提供**入口**动画**[*点击时]*****   **为右侧的项目 1 图像提供**退出**动画**[ *with previous]*****   **为右侧的项目 2 图像提供**入口**动画**[ *with previous]*************

 *********等等 。. . * 将图像放在右侧，一张在另一张上，这样会产生图像被替换的错觉。 **希望这可以帮助***********

# model-view-controller - 乔姆拉！MVC 框架还是 CMS？

> ID：11424080
> 
> 赞同：0
> 
> 时间：2012-07-11T00:55:14.670
> 
> 标签：model-view-controller, joomla, content-management-system

对不起。我是 joomla 的新手。有没有人可以告诉我 joomla 是 mvc 框架还是内容管理系统？我很困惑。亲切的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T13:14:05.243

Joomla 是一个使用 MVC 模式构建的内容管理系统。Joomla 提供接口和 API 让您扩展它并构建插件以添加更多功能。所以有些人也将其定义为框架

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T04:31:36.597

面向公众的存在是[Joomla！CMS](http://joomla.org) - 虽然从 1.6 版开始在架构上它一直在迁移到 Joomla！位于 Joomla 之上的 CMS [[GitHub] ！](https://github.com/joomla/joomla-cms)平台[[GitHub]](https://github.com/joomla/joomla-platform/)。

这个想法是利用框架中的所有优点来开发应用程序，而不是原始 CMS 功能。因此，您可以使用该平台[创建独立的应用程序](http://docs.joomla.org/How_to_create_a_stand-alone_application_using_the_Joomla!_Platform)，它们甚至不必是 Web 应用程序。例如，我们有几个小应用程序被触发`cron`来运行后台任务，这些任务利用了我们更大的 Joomla 组件的平台框架和模型等。

# bash - 在 .bashrc 中具有相同别名的不同机器上运行不同的命令

> ID：11424087
> 
> 赞同：0
> 
> 时间：2012-07-11T00:55:41.750
> 
> 标签：bash, alias

根据机器，我必须访问具有相同名称但来自不同目录的文件。所以目前我每台机器都有一个用于访问文件的别名。

但是是否可以检查正在打开当前会话的机器，然后只检查与该机器对应的源别名。bashrc 中类似下面的内容

```
If(machine1) 
   alias a1='command1'
else if (machine2)
   alias a1='command2'
else
   alias a1='command3' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T02:02:00.513

您可以使用主机名，例如

```
case $(hostname) in
    host1)  alias a1='echo host1';;
    host2)  alias a1='echo host2';;
    host3)  alias a1='echo host3';;
esac 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T01:10:44.470

`MAC`假设你在 Linux 下，你可以根据你的以太网卡的地址来区分你的机器。该`MAC`地址通常是唯一的，除非您以某种方式弄乱了它。

获取这样的`MAC`地址：

```
MACHINEID=$(cat /sys/class/net/eth0/address) 
```

然后您可以执行以下操作：

```
if [ $MACHINEID = "mac_address_of_machine_1_here" ];
then
#whatever
fi 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T10:56:01.920

您可以让您的 .bashrc 获取另一个可以具有唯一名称的初始化文件

```
# .bashrc
. .bash_$(hostname) 
```

```
# .bash_host1
alias a1=command1 
```

```
# .bash_host2
alias a1=command2 
```

ETC

# android - ViewStub 在布局之间切换？

> ID：11424088
> 
> 赞同：1
> 
> 时间：2012-07-11T00:55:45.690
> 
> 标签：android, android-layout

我有一个带有视图和几个按钮的主布局。根据用户触摸的按钮，viewstub 将使用不同的布局（就像选项卡一样）膨胀。

有没有办法做到这一点？还有其他方法吗（不使用tabpanel）？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T06:05:29.440

您可以在 xml 文件中创建多个视图，并且可以针对每个按钮单击显示您想要的视图并隐藏其他视图。

# android - START_NOT_STICKY 无法解析为变量

> ID：11424097
> 
> 赞同：2
> 
> 时间：2012-07-11T00:56:27.670
> 
> 标签：android, android-service

我正在尝试使用以下方法阻止我的服务自行重启：

```
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    return START_NOT_STICKY;
} 
```

我收到一个错误“START_NOT_STICKY 无法解析为变量”，我看到了另一个关于此的问题，以及它如何需要成为服务而不是活动。我有

```
public class wd_locationService extends Service implements LocationListener { 
```

这会有所作为吗？或者还有什么可能导致这种情况？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T01:16:57.823

> 还有什么可能导致这种情况？

我的猜测是您的目标是 Android v1.6（API 4），并且该`START_NOT_STICKY`常量是在 API 5（我认为是 Android v2.0）中添加的。

如果是这种情况，您需要将应用的目标 SDK 版本更改为仅支持 v2.0+

# java - Java REST Web 服务显示名称

> ID：11424103
> 
> 赞同：2
> 
> 时间：2012-07-11T00:57:53.937
> 
> 标签：java, web-services, rest, jersey

我刚刚开始构建自己的 rest web 服务，并从阅读这个优秀的教程开始：[http ://www.vogella.com/articles/REST/article.html#first_project](http://www.vogella.com/articles/REST/article.html#first_project)

但是，有些东西我不太明白。它与服务的路径有关。

hello 资源的路径现在是这样的：

```
http://localhost:8080/de.vogella.jersey.first/rest/hello 
```

这是教程中的默认设置。

但是我想将其更改为更方便的链接，例如：

```
http://localhost:8080/mywebservice/resources/hello 
```

我将 web.xml 更改为以下内容以尝试实现它：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>mywebservice</display-name>
  <servlet>
    <servlet-name>Jersey REST Service</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
      <param-name>com.sun.jersey.config.property.packages</param-name>
      <param-value>de.vogella.jersey.first</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>Jersey REST Service</servlet-name>
    <url-pattern>/resources/*</url-pattern>
  </servlet-mapping>
</web-app> 
```

我更改了显示名称和 url 模式，但没有效果。我无法使用我想要的路径访问资源，尽管我可以从旧路径中检索它。

这是为什么？web.xml 中的显示名称与此无关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T01:02:05.867

您正在更改 Webapp 的上下文名称。如果您以战争（webapp 存档）的形式部署它，那么战争的名称将是上下文名称。

在您所遵循的示例中，您正在使用该名称创建一个动态 Web 项目。您必须适当地重命名它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-24T10:24:23.817

这里同样的问题。

我试图更改“显示名称”，但它根本不影响服务 URL。但是，“url-pattern”的更改确实更改了 URL。

因此，从 Vogella 的“第一个 REST 示例”中，我会说，URL*最初*构建如下：

```
http:// your_domain:port/**project-name**/url-pattern/path_from_rest_class 
```

问候贾娜

* * *

## 补充：解决方案

同时，我找到了一种更改 URL 的这一部分（“显示名称”）的方法：

*   您转到 EAR 项目的 application.xml（文件夹 META-INF）
    --> 如果没有 xml，右键单击节点“部署描述符”并选择“生成部署描述符存根”，它会创建 application.xml） )

*   要更改 URL 部分的“显示名称”，您必须更改“上下文根”中的值。
    （“web-uri”**不得**更改！）

现在 URL 模式如下：

```
http:// your_domain:port/**context-root**/url-pattern/path_from_rest_class 
```

因此，您可以按照自己喜欢的方式更改 URL。：-） 希望这可以帮助！

问候贾娜

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-07-21T06:14:59.047

另一种方法是右键单击您的项目并转到 WebProject 设置，从中您可以更改 Context root 与您在 displayName 中想要的任何内容相同，然后在服务器上再次运行项目。

这对我有用，因为问题仅与 displayName 有关，因为当我们更改它以使用新 URI 访问时工作正常。

谢谢

# php - 使用每个数组在重复更新时运行插入

> ID：11424105
> 
> 赞同：1
> 
> 时间：2012-07-11T00:58:08.993
> 
> 标签：php, mysql, foreach, pdo

这是我通过 POST 获得的数组，

```
Array
(
    [event_id] => 1
    [fights] => Array
        (
            [0] => Array
                (
                    [fight_id] => 1
                    [fighter_a_id] => 1
                    [fighter_b_id] => 2
                    [winner_id] => 
                )

            [1] => Array
                (
                    [fight_id] => 2
                    [fighter_a_id] => 4
                    [fighter_b_id] => 3
                    [winner_id] => 3
                )

        )

) 
```

这是我现在正在尝试的 PHP 代码，但它返回 23000 PDO 错误，我没有得到。我读到这是一个重复的输入错误，但这不应该发生在`ON DUPLICATE KEY UPDATE`. 我认为`foreach`可能导致错误？有什么建议么？

```
if (isset($_POST['fights'])){
    $event_id = $_POST['event_id'];
    foreach ($_POST['fights'] as $field){
        if ($field['fight_id'] != '') $fight_id = $field['fight_id']; else $fight_id = '';
        if ($field['fighter_a_id'] != '') $fighter_a_id = $field['fighter_a_id']; else $fighter_a_id = '';
        if ($field['fighter_b_id'] != '') $fighter_b_id = $field['fighter_b_id']; else $fighter_b_id = '';
        if ($field['winner_id'] != '') $winner_id = $field['winner_id']; else $winner_id = '';
        $set_fights = $DBH->prepare('
        INSERT INTO 
            fights (
                fight_id, 
                fighter_a, 
                fighter_b, 
                winner, 
                event           
                )
        VALUES (
            :fight_id,
            :fighter_a, 
            :fighter_b, 
            :winner, 
            :event
        )
        ON DUPLICATE KEY UPDATE
            fighter_a = :fighter_a, 
            fighter_b = :fighter_b, 
            winner = :winner, 
            event = :event
        ');
        $set_fights->bindParam(':fight_id', $fight_id, PDO::PARAM_INT);
        $set_fights->bindParam(':fighter_a', $fighter_a, PDO::PARAM_INT);
        $set_fights->bindParam(':fighter_b', $fighter_b, PDO::PARAM_INT);
        $set_fights->bindParam(':winner', $winner, PDO::PARAM_INT);
        $set_fights->bindParam(':event', $event_id, PDO::PARAM_INT);
        $set_fights->execute();
    }
}
try {

}
catch (PDOException $e) {
   echo $e->getMessage();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T02:11:35.240

我认为你需要这样使用`LAST_INSERT_ID`：

```
INSERT INTO fights (fight_id, fighter_a, fighter_b, winner, event)
VALUES (:fight_id, :fighter_a, :fighter_b, :winner, :event)
ON DUPLICATE KEY UPDATE
    fight_id = LAST_INSERT_ID(fight_id),
    fighter_a = :fighter_a, 
    fighter_b = :fighter_b, 
    winner = :winner, 
    event = :event 
```

# ios - 具有可调整大小的图像的 UIButton

> ID：11424106
> 
> 赞同：1
> 
> 时间：2012-07-11T00:58:12.550
> 
> 标签：ios, uiimage

好，朋友们，

我知道我做错了什么，但我无法弄清楚。这是将可调整大小的图像放置为正常按钮状态的代码。

```
self.loginButton = [UIButton buttonWithType:UIButtonTypeCustom];
    self.loginButton.frame = CGRectMake(0.0, 44.0, 314, 44);
    UIImage *image = [[UIImage imageNamed:@"loginbutton_image"] resizableImageWithCapInsets:UIEdgeInsetsMake(0.0,10.0,0.0,10.0)];
    [self.loginButton setImage:image forState:UIControlStateNormal];
    [self addSubview:self.loginButton]; 
```

这是图像

[![在此处输入图像描述](../Images/dbd689ccb134717f8f6201fdc77e8f0a.png)](https://i.stack.imgur.com/F9Y3c.png)

图像资产错误或代码错误。

图像的宽度为 21 像素。左右上的 10 和 10 的帽子插图留下 1Px 来调整大小。

有没有人发现我做错了什么。

感谢大家光临阿伦

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-11T01:13:48.200

你应该这样做：

```
self.loginButton = [UIButton buttonWithType:UIButtonTypeCustom];
self.loginButton.frame = CGRectMake(0.0, 44.0, 314, 44);
UIImage *image = [[UIImage imageNamed:@"loginbutton_image"] resizableImageWithCapInsets:UIEdgeInsetsMake(0.0,10.0,0.0,10.0)];
[self.loginButton setBackgroundImage:image forState:UIControlStateNormal];
[self.view addSubview:self.loginButton]; 
```

这样您就可以设置按钮的背景图像属性。背景图像已经附加到按钮视图，因此无需添加子视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T01:23:27.990

尝试

```
self.loginButton = [UIButton buttonWithType:UIButtonTypeCustom];
    self.loginButton.frame = CGRectMake(0.0, 44.0, 314, 44);
    UIImage *image = [[UIImage imageNamed:@"loginbutton_image"] stretchableImageWithLeftCapWidth:10 topCapHeight:10]; //assuming the height is 44
    [self.loginButton setImage:image forState:UIControlStateNormal];
    [self addSubview:self.loginButton]; 
```

# python - 为什么 Django 中没有 response_finished 信号？

> ID：11424110
> 
> 赞同：3
> 
> 时间：2012-07-11T00:59:03.063
> 
> 标签：python, django, signals, deferred-execution

我正在尝试在 Django 中实现某种后台任务队列，因为 Celery 太大太复杂，然后我突然想到，已经有一个信号叫做`request_finished`

[https://docs.djangoproject.com/en/dev/ref/signals/#django.core.signals.request_finished](https://docs.djangoproject.com/en/dev/ref/signals/#django.core.signals.request_finished)

但是为什么 Django 没有一个叫做 的信号`response_finished`呢？

Django可能是同步的，但我可以做一些响应后数据处理和保存任务，它只需要多走几步。

黑客是否可以在 Django 中进行一些响应后工作？

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T01:10:22.193

如果您需要在组装响应后执行任务，您可以[编写自己的中间件](https://docs.djangoproject.com/en/dev/topics/http/middleware/?from=olddocs/)（特别是使用）。`process_response`在响应“完成”之后拥有一个信号处理程序是没有意义的，因为到那个阶段，您已经执行了您的视图并呈现了您的模板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T08:23:52.557

由于没有人回答这个问题，我自己有一些结论

[https://groups.google.com/d/topic/python-web-sig/OEahWtsPwq4/discussion](https://groups.google.com/d/topic/python-web-sig/OEahWtsPwq4/discussion)

它基本上是一种 wsgi 设计行为。Wsgi 不会关心响应迭代器停止后会发生什么。

# r - R中的多类ROC曲线

> ID：11424112
> 
> 赞同：2
> 
> 时间：2012-07-11T00:59:27.937
> 
> 标签：r, machine-learning, artificial-intelligence, classification

我是**ROC 曲线**概念的新手。我试图通过阅读网络上的一些教程来理解它。我在 python 中找到了一个非常好的例子，[这](http://scikit-learn.org/0.10/auto_examples/plot_roc.html)很有帮助。

我想为我（在 Python 中）构建的多类分类器**绘制**ROC**曲线。**但是，网络上的大多数解决方案都是针对**2 类问题**而**不是多**类问题。

 ******但是，我终于在**R的****pROC**包中找到了“ [multiclass.roc](http://xavier.robin.name/blog/2011/01/21/proc-1.4-released) ”函数，它可以绘制多类 ROC 曲线。

 ****下面是一个简单的例子：

```
library(pROC)
data(aSAH)
multiclass.roc(aSAH$gos6, aSAH$s100b) 
```

但是，我不明白如何**解释**它（因为我不知道 R）。

谁能指出**aSAH$s100b**变量指的是什么？我可以说*aSAH$gos6*指向**aSAH**数据集中不同类别的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T16:31:53.370

此外，您可能希望查看[Fawcett, 2006](http://dx.doi.org/10.1016/j.patrec.2005.10.010)以获得理解和实施 ROC 图的非常好的指南。他还谈到了多类 ROC 和 AUC，并指出了其他资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-14T11:24:21.433

我知道这是一个老问题，但为了完整起见，对于未来的访问者，我将添加一个使用该`pROC::multiclass.roc()`函数的简短示例列表。当涉及到软件需求时，唯一的就是确保预测矩阵的列名与真实类匹配（`real_values`）。

第一个示例生成随机预测。第二个产生更好的预测。第三个生成完美的预测（即始终将最高概率分配给真实类别。）

我打印`head(obj)`了结果，因此不需要理解 R 来跟进示例。

使用的计算的技术细节`pROC::multiclass.roc()`可以在[Hand & Till (2001)](https://link.springer.com/article/10.1023/A:1010920819831)中找到：*ROC 曲线下区域的简单概括，用于多类分类问题。机器学习，45（2），171-186。*

```
library(pROC)
set.seed(42)
head(real_values)
real_values <- matrix( c("class1", "class2", "class3"), nc=1 )

# [,1]    
# [1,] "class1"
# [2,] "class2"
# [3,] "class3"
############################
#### Random predictions ####
############################
random_preds <- matrix(rbeta(3*3,2,2), nc=3)
random_preds <- sweep(random_preds, 1, rowSums(a1), FUN="/")
colnames(random_preds) <- c("class1", "class2", "class3")

head(random_preds)

#       class1    class2    class3
# [1,] 0.3437916 0.6129104 0.4733117
# [2,] 0.6016169 0.4700832 0.9364681
# [3,] 0.6741742 0.8677781 0.4823129

multiclass.roc(real_values, random_preds)
#Multi-class area under the curve: 0.1667

############################
#### Better Predictions ####
############################

better_preds <- matrix(c(0.75,0.15,0.5,
                         0.15,0.5,0.75,
                         0.15,0.75,0.5), nc=3)
colnames(better_preds) <- c("class1", "class2", "class3")

head(better_preds)

#       class1 class2 class3
# [1,]   0.75   0.15   0.15
# [2,]   0.15   0.50   0.75
# [3,]   0.50   0.75   0.50

multiclass.roc(real_values, better_preds)
#Multi-class area under the curve: 0.6667

#############################
#### Perfect Predictions ####
#############################
perfect_preds <- matrix(c(0.75,0.15,0.5,
                          0.15,0.75,0.5,
                          0.15,0.5,0.75), nc=3)
colnames(perfect_preds) <- c("class1", "class2", "class3")
head(perfect_preds)

multiclass.roc(real_values, perfect_preds)
#Multi-class area under the curve: 1 
```**********

# javascript - Javascript AddEventListener 问题

> ID：11424113
> 
> 赞同：1
> 
> 时间：2012-07-11T00:59:36.890
> 
> 标签：javascript, dom, select, onchange, addeventlistener

我有两个选择框，每个选择框都在具有特定 ID 的 span 元素中。第一个选择框是国家，另一个是城市列表。当我选择一个国家时，城市选择框容器跨度的 innerHtml 被 ajax 函数的响应替换，一切都很好。但是我想通过使用 selectbox 的 onchange 属性来触发一个函数，如果在页面加载开始时 addeventListener 函数工作正常，但在替换 span 的 innerHtml 后它不起作用，并且在替换后城市选择框的 id 与替换前相同。我只是在使用。

```
document.getElementById('to_city').addEventListener('change',doSomething,false); 
```

此代码由窗口元素的 onload 初始化。

它可以在没有 ajax 替换的情况下工作，但不能在之后。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T01:28:24.763

当您用 AJAX 替换内容时，您需要再次绑定事件。所以在替换内容后再次绑定事件是个好主意。

有一种方法可以使用事件冒泡来避免它。

JQuery 1.4+ 支持 onchange 事件传播，因此您可以使用 jquery 委托函数来实现相同的目的。[http://api.jquery.com/delegate/](http://api.jquery.com/delegate/)

使用 Jquery 只需一行即可完成这项工作。

```
$("#container").delegate("#to_city", "change", doSomething); // Workd in all browsers 
```

我在下面的示例中忽略了 IE，因为您使用的是 IE 不支持的 addEventListener。没有 Jquery 工作示例（不在 IE 中工作）： [http ://codebins.com/bin/4ldqpb1/2](http://codebins.com/bin/4ldqpb1/2)

```
document.getElementById("container").addEventListener( 'change', function(e) {
    var targ=e.target;
    if (targ.id == "to_city") { //you just want to capture to_city event
        //DO STUFF FOR SELECT
        //DO STUFF
        doSomething();
        alert("id: " + targ.id + "\nvalue: " + targ.value);
    }

}, false) 
```

解释：

当您绑定任何事件时，它们将绑定到该特定元素而不是选择器或 ID。因此，当您用具有相同 ID 的新元素替换内容和新替换元素时，新元素不会附加任何事件。所以你需要再次附加事件。因此，如果您在 AJAX 内容替换后附加事件，则 doSomething 将起作用。但这不是一个很好的解决方案。

我们正在使用事件冒泡概念。许多事件被冒泡到文档的顶部。（IE 不会冒泡更改事件）所以我们在容器上编写处理程序并监听事件。每个事件都有一个 target 或 srcElement ，它表示哪个 dom 元素触发了这个事件。如果 dom 元素是我们正在寻找的执行函数。在这个我们可以寻找 ID 为 to_city 的元素，这就是 if 条件的原因。

# iphone - Xcode 乘以 2 个 int 得到结果

> ID：11424130
> 
> 赞同：0
> 
> 时间：2012-07-11T01:01:42.377
> 
> 标签：iphone, ios, xcode, int, multiplication

我有两个整数

积分；
int MainInt;

我想知道如何将我可以在标签中显示的单个非十进制答案的 int 值相乘。我很困惑。谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T01:04:36.777

```
label.text = [NSString stringWithFormat:@"%d", Score * MainInt]; 
```

# javascript - 我无法让两个 jquery 脚本一个接一个地工作

> ID：11424136
> 
> 赞同：0
> 
> 时间：2012-07-11T01:02:37.177
> 
> 标签：javascript, jquery

第二个脚本在使用第一个脚本加载后不起作用

我试图用这个加载它

```
$(document).ready(function() {

$('div.frame ul#main li a').click(function(){

        var toLoad = $(this).attr('href')+' #content';
        $('#content').hide('fast',loadContent);
        function loadContent() {
            $('#content').load(toLoad,'',showNewContent())
        }
        function showNewContent() {
            $('#content').show('normal',hideLoader());
        }
        function hideLoader() {
            $('#load').fadeOut('normal');
        }
        return false;

    });

}); 
```

加载一页后使用此页

```
$(document).ready(function(e) {

    var currentportfolio = $('div#slider ul li:first-child').addClass('show');
    var portfolio = $('div#slider ul li');  
    $('div#slider ul li').not(':first').hide();

    $('.prev, .next').click(function() {
    // Determine the direction, -1 is prev, 1 is next
    var dir = $(this).hasClass('prev') ? -1 : 1;
    // Get the li that is currently visible
    var current = $('div#slider ul li:visible');

    // Get the element that should be shown next according to direction
    var new_el = dir < 0 ? current.prev('li') : current.next('li');

    // If we've reached the end, select first/last depending on direction
    if(new_el.size() == 0) {
        new_el = $('div#slider ul li:'+(dir < 0 ? 'last' : 'first'));
    }

    // Hide them all..
    $('div#slider ul li').hide();
    // And show the new one
    new_el.show();

    // Prevent the link from actually redirecting the browser somewhere
    return false;
});

}); 
```

我是 jQuery 新手。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T01:07:11.453

查看`.load`. jQuery 提供了一个“回调”函数作为部分`.load`函数。回调基本上`.load`是完成后将运行的内容。看起来您已经在使用它了。

[http://api.jquery.com/load/](http://api.jquery.com/load/)

```
 function showNewContent() {
        $('#content').show('normal',hideLoader());
        additionalStuffToDoAfterLoad();
    }

    function additionalStuffToDoAfterLoad(){
         //all the stuff in section 2 goes here.
    } 
```

# java - 在 JApplet 中调用 getParameter() 时出现 InvocationTargetException

> ID：11424143
> 
> 赞同：0
> 
> 时间：2012-07-11T01:04:03.087
> 
> 标签：java, applet, invocationtargetexception

我在 Java 7 中有一个 JApplet，每次我想在浏览器中启动它时，我都会收到from`InvocationTargetException`的调用。这是我的堆栈跟踪：`getParameter()``JApplet`

```
java.lang.RuntimeException: java.lang.reflect.InvocationTargetException
    at com.sun.deploy.uitoolkit.impl.awt.AWTAppletAdapter.runOnEDTAndWait(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.awt.AWTAppletAdapter.instantiateApplet(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager.initAppletAdapter(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.reflect.InvocationTargetException
    at com.sun.deploy.uitoolkit.impl.awt.OldPluginAWTUtil.invokeAndWait(Unknown Source)
    ... 5 more
Caused by: java.lang.NullPointerException
    at java.applet.Applet.getParameter(Unknown Source)
    at TicTacToe.TicTacToeAppletView.<init>(TicTacToeAppletView.java:34)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.awt.AWTAppletAdapter$1.run(Unknown Source)
    at java.awt.event.InvocationEvent.dispatch(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

我的 HTML 文件如下所示：

```
<applet code="TicTacToe/TicTacToeAppletView.class" width="400" height="400">
<param name=Size value="4">
</applet> 
```

在与 HTML 文件相同的文件夹中，有一个名为 TicTacToe 的文件夹，其中包含所有必要的类文件（当然，否则我会得到一个`ClassNotFoundException`.

如果我不使用 getParameter()，它工作正常。使用此方法的 Java 代码如下所示：

```
String s = getParameter("Size"); 
```

那么到底是什么造成了这么多麻烦呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T01:05:04.023

参数名称 Size 不应该用引号引起来吗？

```
<param name="Size" value="4"> 
```

有关使用参数的更多信息，请查看[定义和使用 Applet 参数教程](http://docs.oracle.com/javase/tutorial/deployment/applet/param.html)

# xcode - XCode - UIWebView 未加载

> ID：11424144
> 
> 赞同：1
> 
> 时间：2012-07-11T01:04:03.163
> 
> 标签：xcode, uiwebview

我在 Resources 文件夹中有两个本地 .html 文件。我正在尝试通过以下方式加载它们，但只加载最后一页。我究竟做错了什么？

文件 = please_wait.html

这个不行。

```
NSError *error;
NSString* path = [[NSBundle mainBundle] pathForResource:@"please_wait" ofType:@"html"];
NSString* htmlString = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:&error];
[webView loadHTMLString:htmlString baseURL:[NSURL fileURLWithPath:path]];   

 //Big "do-while" loop here.  It works fine so I omitted it. 
```

文件 = update_graph.html

这个不行

```
 path = [[NSBundle mainBundle] pathForResource:@"update_graph" ofType:@"html"];
 htmlString = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:&error];
 [webView loadHTMLString:htmlString baseURL:[NSURL fileURLWithPath:path]];

//Lots of code removed.  All works correctly and doesn't touch webview 
```

最后一个完美地工作。谷歌显示。

```
string = @"http://google.com";  
NSURL *url = [NSURL URLWithString: string];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
[webView loadRequest:requestObj]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T01:15:12.780

从您的评论中可以看出，您的`UIWebView`加载很好，但在您退出方法之前，它没有机会在屏幕上刷新自身。在方法内部设置断点并等待视图加载是不够的：您必须在 iOS 意识到它需要调用的方法之前退出该`UIWebView`方法`drawRect`。

要解决此问题，请将您的方法分成三部分，`A` `B`然后`C`将 , 和 set`UIWebView`的委托 in`A`以调用`B`on `webViewDidFinishLoad:`，将委托 in`B`以调用`C`。

以下是如何实现这一点：从一个可以在加载完成时调用选择器的委托开始：

```
@interface GoToNext : NSObject <UIWebViewDelegate> {
    id __weak target;
    SEL next;
}
-(id)initWithTarget:(id)target andNext:(SEL)next;
-(void)webViewDidFinishLoad:(UIWebView *)webView;
@end

@implementation GoNext
-(id)initWithTarget:(id)_target andNext:(SEL)_next {
    self = [super init];
    if (self) {
        target = _target;
        next = _next;
    }
    return self;
}
-(void)webViewDidFinishLoad:(UIWebView *)webView {
    #pragma clang diagnostic push
    #pragma clang diagnostic ignored "-Warc-performSelector-leaks"
    [target performSelector:next];
    #pragma clang diagnostic pop
}
@end 
```

现在将您的方法分成三个部分 - 加载第一页，加载第二页和加载第三页：

```
-(void)loadPleaseWait {
    NSError *error;
    NSString* path = [[NSBundle mainBundle] pathForResource:@"please_wait" ofType:@"html"];
    NSString* htmlString = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:&error];
    webView.delegate = [[GoToNext alloc] initWithTarget:self andNext:@selector(loadUpdateGraph)];
    [webView loadHTMLString:htmlString baseURL:[NSURL fileURLWithPath:path]];
    // big do-while loop
}

-(void)loadUpdateGraph {
    NSError *error;
    NSString* path = [[NSBundle mainBundle] pathForResource:@"update_graph" ofType:@"html"];
    NSString* htmlString = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:&error];
    webView.delegate = [[GoToNext alloc] initWithTarget:self andNext:@selector(loadGoogle)];
    [webView loadHTMLString:htmlString baseURL:[NSURL fileURLWithPath:path]];
    // Lots of code removed
}

-(void)loadGoogle {
    string = @"http://google.com";  
    NSURL *url = [NSURL URLWithString: string];
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
    [webView loadRequest:requestObj];
} 
```

# javascript - 如何检测 -webkit-mask-box-image 何时下载

> ID：11424147
> 
> 赞同：0
> 
> 时间：2012-07-11T01:04:22.077
> 
> 标签：javascript, html, css-mask

我以编程方式在 Web 服务器上生成蒙版图像，然后使用以下代码将其应用于 HTML 元素：

```
imageToMask.style["-webkit-mask-box-image"] = "url('" + featherURL +"') 100 stretch"; 
```

我怎样才能知道图像何时返回并完成下载，以便它不只是弹出到页面上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T01:17:53.957

You can probably do something similar to what @lonesomeday did in:

[jQuery .on() not bound when script inserted into the DOM](https://stackoverflow.com/questions/10698177/jquery-on-not-bound-when-script-inserted-into-the-dom)

Something along these lines:

```
 $('button').click(function() {
     var imageToMask = document.createElement('img');
     imageToMask.style["-webkit-mask-box-image"] = "url('" + featherURL +"') 100 stretch";

     imageToMask.onload = function() {
        //Custom behaviour
     };
     document.body.appendChild(imageToMask);
 }); 
```

# wpf - 调整大小时网格拉伸

> ID：11424152
> 
> 赞同：0
> 
> 时间：2012-07-11T01:05:27.627
> 
> 标签：wpf, wpf-controls

我在网格的同一行上有 3 个网格。有没有办法在调整大小时只拉伸中间网格而不拉伸其他两个？我现在能做的就是拉伸最后一个。我试图将中间网格的水平对齐设置为拉伸，但随后它一直拉伸，甚至在程序没有运行的情况下与最后一个网格重叠。还是不太明白为什么......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T01:21:18.373

Not sure if i understood your layout/plan, but you should be able to do this with the Row/Column in the middle haivng star size.

e.g.

```
<Grid>
    <Grid.ColumnDefintions>
        <ColumnDefintion Width="Auto"/>
        <ColumnDefintion Width="*"/>
        <ColumnDefintion Width="Auto"/>
    </Grid.ColumnDefintions>
    <Grid Grid.Column="0">...</Grid>
    <Grid Grid.Column="1">...</Grid> <!-- Middle will stretch -->
    <Grid Grid.Column="2">...</Grid>
</Grid> 
```

# opengl - OpenGL深度缓冲区

> ID：11424154
> 
> 赞同：1
> 
> 时间：2012-07-11T01:05:52.187
> 
> 标签：opengl, buffer, depth

我是 OpenGL 的新手，所以我只是在尝试一些测试。我有一个可以旋转和平移的矩形，一切都很好。

问题是，当我将它翻译到 1.0 Z 以下时，它就消失了！我读到了深度缓冲区，它说不应该触及它的深度。有没有办法解决这个我完全错过的问题？（可能）如果是这样，那是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T01:10:16.283

这可能是由于不正确的投影矩阵。当您设置投影矩阵时，您需要指定剪切平面 (`zNear`和`zFar`) - 这些平面之外的任何东西都将被“剪切掉”并且不会显示出来。

有关详细信息，请参阅[gluPerspective](http://www.opengl.org/sdk/docs/man/xhtml/gluPerspective.xml)。

# haskell - 在 Haskell 中进行简单文本处理的方法是什么？

> ID：11424157
> 
> 赞同：8
> 
> 时间：2012-07-11T01:06:23.980
> 
> 标签：haskell, nlp

我正在尝试在 Haskell 中进行一些简单的文本处理，我想知道在 FP 语言中最好的方法是什么。我查看了 parsec 模块，但这似乎比我作为新 Haskeller 寻找的要复杂得多。从文本语料库中去除所有标点符号的最佳方法是什么？我天真的方法是制作这样的函数：

```
removePunc str = [c | c <- str, c /= '.',
                                 c /= '?',
                                 c /= '.',
                                 c /= '!',
                                 c /= '-',
                                 c /= ';',
                                 c /= '\'',
                                 c /= '\"',] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T02:36:29.097

一种可能更有效的方法（O(log n) 而不是 O(n)）是使用`Set`（来自[Data.Set](http://www.haskell.org/ghc/docs/latest/html/libraries/containers/Data-Set.html)）：

```
import qualified Data.Set as S

punctuation = S.fromList ",?,-;'\""

removePunc = filter (`S.notMember` punctuation) 
```

您必须在函数之外构造集合，以便只计算一次（通过在所有调用中共享），因为创建集合的开销比`notElem`其他人建议的简单线性时间测试要大得多。

注意：这是一种很小的情况，a 的额外开销`Set`可能会超过集合与列表的渐近收益，因此如果您正在寻找绝对性能，则*必须*对其进行分析。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-11T01:30:00.757

您可以简单地编写代码：

```
removePunc = filter (`notElem` ".?!-;\'\"") 
```

或者

```
removePunc = filter (flip notElem ".?!-;\'\"") 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-11T01:16:06.500

您可以将字符分组为字符串并使用 notElem：

```
[c | c <- str, c `notElem` ".?!,-;"] 
```

或更实用的风格：

```
filter (\c -> c `notElem` ".?!,") str 
```

# codeigniter - 如何在 CodeIgniter 中管理 URL，以便它们可以在一个地方进行更新

> ID：11424158
> 
> 赞同：0
> 
> 时间：2012-07-11T01:06:28.577
> 
> 标签：codeigniter, smarty

我相信 Smarty 模板具有内置功能，可让您从配置文件管理站点 URL，因此如果移动某些内容，您只需在一个位置更新 URL。CodeIgniter 中是否存在这种功能？如果没有，关于如何/在哪里添加它的任何指针或示例？

例如：

而不是对链接进行硬编码，而是：`<a href="<?=$links->settings ?>">Settings</a>`

但是你想在哪里设置 $links 以便它在任何地方都可用？还是最好只对它们进行硬编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T01:14:19.640

基本 url 基本上应该在 /app/config/config.php 的开头，其中 app 是您的 codeigniter 应用程序文件夹的名称。您可以通过调用该`base_url()`函数来访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T01:15:02.803

是的，它被称为`Routes`，配置位于`config/routes.php`。[文档](http://codeigniter.com/user_guide/general/routing.html)

如果您询问链接的呈现 html，那么您最好的选择是`site_url()`与常量结合使用，例如`site_url(URL_SETTINGS);`，没有内置功能，但我可以说我认为没有必要，因为它会很少使用，但它会影响每个负载的性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T12:59:45.293

看一下[配置](http://codeigniter.com/user_guide/libraries/config.html)类。它允许您制作自定义配置文件。它并不完全是为 URL 设计的，但你肯定可以使用它们。

# google-apps-script - 电子表格脚本/唠叨电子邮件手动或分钟计时器运行良好，但不适用于日计时器

> ID：11424159
> 
> 赞同：0
> 
> 时间：2012-07-11T01:06:48.460
> 
> 标签：google-apps-script

这是一个谜题。我有一个谷歌电子表格。这意味着允许在线评估讲座。居民登录相关表格并填写。

伴随它的是一个“唠叨”功能 - 第二张表检查他们的名字，跟踪他们是否已经提交，如果没有，它会在一定时间（3天）过去后发送一封唠叨电子邮件。

该脚本运行良好，我手动执行。另外，如果我使用分钟计时器（即每 10 分钟运行一次）。

但是，当我为我想要的内容设置脚本时 - 每天检查一次，它没有运行，并且我收到以下错误报告：

无效的电子邮件：#N/A

这特别奇怪，因为我为其他电子表格运行了其他类似的功能，而且它们一直有效。

我能想到的唯一不同的是我有几个类似的脚本正在运行（每周一张）。我尝试将函数名称更改为独特的名称，还将电子表格调用更改为 openById，并将工作表变量更改为 getSheetByName，以防多个类似的脚本以某种方式相互混淆。没有差异。

电子表格副本的链接在这里[https://docs.google.com/a/brown.edu/spreadsheet/ccc?key=0AkP6szc0nsS2dEItLXEwdjVsWUFpOTdjZUdtTlo4cGc#gid=0](https://docs.google.com/a/brown.edu/spreadsheet/ccc?key=0AkP6szc0nsS2dEItLXEwdjVsWUFpOTdjZUdtTlo4cGc#gid=0)

我在下面附上了脚本（你会注意到我添加了错误报告，但它并没有增加太多）。数据变量从教程中借用，该教程片段对我来说一直很好用。

任何见解将不胜感激。

代码：

```
var SEMINAR_FORM_URL = "http://med.brown.edu/DPHB/training/psychiatry_general/secure/seminarevals/seminar_evals.html";
var YES = "YES";
var DISTRIBUTE = "robert_boland_1@brown.edu,robertboland11@gmail.com"; 

//This function sends out a nag to do the seminar evals including a link to the seminar form
//This is allowed when sheet 2 says "YES" to "Nag?"  
//Should not check more than once daily or will keep sending out and should be triggered AFTER the checkCoverageSubmit. 

function sendNag() {  
  try {
  var ss = SpreadsheetApp.openById("0AkP6szc0nsS2dDkwQTE0OVlPeWM5ZlJIenVKLU1pVVE");
  var sheet = ss.getSheetByName("Sheet2");
  var startRow = 2

  // getRowsData was reused from Reading Spreadsheet Data using JavaScript Objects tutorial
  var data = getRowsData(sheet);

  // For every Seminar report row
  for (var i = 0; i < data.length; ++i) {
    var row = data[i];
    row.rowNumber = i + 2;    
    if (row.nag==YES) {   //sends the nag message below
     var message = "<HTML><BODY>"
    + "<P> THIS IS A REMINDER MESSAGE:"
    + "<P> For "  + row.name         
    + "<P> You still need to complete your seminar evaluations for" 
    + "<P> the seminars done on "+ row.dateOfSeminar
    + "<P>" 
    + "<P> It has been "+ row.daysElapsed + " days since the seminar." 
    + "<P>"     
    + '<P><b> Please fill out the evaluations.  You can find links to the evalutions on <A HREF="' + SEMINAR_FORM_URL + '"><b>HERE.</b></A>  Do this now!</b>.' 
    + "<P>"
    + "<P>" 
    + "<P>" 
    + "<P>--------------------------------------------------------"
    + "<P> <i>You are receiving this message because our records report that you have yet to complete a required seminar evaluations. </i>"
    + "<P> If you think this remind was sent in error, please <a href='mailto:robert_boland_1@brown.edu'><b>contact me</b></a> to prevent further nagging!"    
    + "<P>"     
    + "<P>_______________________________________________________________________________"
    + "</HTML></BODY>";
      if(row.name){  
      MailApp.sendEmail(row.name, "Reminder: Please complete your seminar evals!", "", {cc:DISTRIBUTE,htmlBody: message});
      } SpreadsheetApp.flush(); 
    } 
  }   

  } catch (e) {    
    MailApp.sendEmail("robert_boland_1@brown.edu", "Error report", e.message); 
  }
}

/////////////////////////////////////////////////////////////////////////////////
// Code reused from Reading Spreadsheet Data using JavaScript Objects tutorial //
/////////////////////////////////////////////////////////////////////////////////

// getRowsData iterates row by row in the input range and returns an array of objects.
// Each object contains all the data for a given row, indexed by its normalized column name.
// Arguments:
//   - sheet: the sheet object that contains the data to be processed
//   - range: the exact range of cells where the data is stored
//       This argument is optional and it defaults to all the cells except those in the first row
//       or all the cells below columnHeadersRowIndex (if defined).
//   - columnHeadersRowIndex: specifies the row number where the column names are stored.
//       This argument is optional and it defaults to the row immediately above range; 
// Returns an Array of objects.
function getRowsData(sheet, range, columnHeadersRowIndex) {
  var headersIndex = columnHeadersRowIndex || range ? range.getRowIndex() - 1 : 1;
  var dataRange = range || 
    sheet.getRange(headersIndex + 1, 1, sheet.getMaxRows() - headersIndex, sheet.getMaxColumns());
  var numColumns = dataRange.getEndColumn() - dataRange.getColumn() + 1;
  var headersRange = sheet.getRange(headersIndex, dataRange.getColumn(), 1, numColumns);
  var headers = headersRange.getValues()[0];
  return getObjects(dataRange.getValues(), normalizeHeaders(headers));
}

// For every row of data in data, generates an object that contains the data. Names of
// object fields are defined in keys.
// Arguments:
//   - data: JavaScript 2d array
//   - keys: Array of Strings that define the property names for the objects to create
function getObjects(data, keys) {
  var objects = [];
  for (var i = 0; i < data.length; ++i) {
    var object = {};
    var hasData = false;
    for (var j = 0; j < data[i].length; ++j) {
      var cellData = data[i][j];
      if (isCellEmpty(cellData)) {
        continue;
      }
      object[keys[j]] = cellData;
      hasData = true;
    }
    if (hasData) {
      objects.push(object);
    }
  }
  return objects;
}

// Returns an Array of normalized Strings. 
// Empty Strings are returned for all Strings that could not be successfully normalized.
// Arguments:
//   - headers: Array of Strings to normalize
function normalizeHeaders(headers) {
  var keys = [];
  for (var i = 0; i < headers.length; ++i) {
    keys.push(normalizeHeader(headers[i]));
  }
  return keys;
}

// Normalizes a string, by removing all alphanumeric characters and using mixed case
// to separate words. The output will always start with a lower case letter.
// This function is designed to produce JavaScript object property names.
// Arguments:
//   - header: string to normalize
// Examples:
//   "First Name" -> "firstName"
//   "Market Cap (millions) -> "marketCapMillions
//   "1 number at the beginning is ignored" -> "numberAtTheBeginningIsIgnored"
function normalizeHeader(header) {
  var key = "";
  var upperCase = false;
  for (var i = 0; i < header.length; ++i) {
    var letter = header[i];
    if (letter == " " && key.length > 0) {
      upperCase = true;
      continue;
    }
    if (!isAlnum(letter)) {
      continue;
    }
    if (key.length == 0 && isDigit(letter)) {
      continue; // first character must be a letter
    }
    if (upperCase) {
      upperCase = false;
      key += letter.toUpperCase();
    } else {
      key += letter.toLowerCase();
    }
  }
  return key;
}

// Returns true if the cell where cellData was read from is empty.
// Arguments:
//   - cellData: string
function isCellEmpty(cellData) {
  return typeof(cellData) == "string" && cellData == "";
}

// Returns true if the character char is alphabetical, false otherwise.
function isAlnum(char) {
  return char >= 'A' && char <= 'Z' ||
    char >= 'a' && char <= 'z' ||
    isDigit(char);
}

// Returns true if the character char is a digit, false otherwise.
function isDigit(char) {
  return char >= '0' && char <= '9';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T04:31:36.307

请将您的错误解析为以下函数，以便我们获得更多信息，例如行号。

```
/**
 * Parse errors stacktrace into a readable format.
 * This function never throws an error, so you don't need to try-catch it.
 * If the error cannot be processed, it will just return it silently.
 * @return {string} The error toString plus its stacktrack broke into multiple lines
 * @param {Error} e The error to be processed
 */
function parseErr(e) {
  try {
    var ret;
    if( e !== undefined && e !== null && e.stack && e.toString ) {
      ret = e.toString()+' \nStacktrace: \n';
      var stack = e.stack.replace(/\n/g,'').match(/:\d+( \([^\)]+\))?/g);
      for( var i in stack )
        ret += stack[i].replace(/[\(\):]/g,'').split(/ /).reverse().join(':') + ' \n';
    } else if( typeof(e) === 'object' )
      ret = inspect(ret);
    else
      ret = ''+e;
    return ret;
  } catch(suppress) {
    return ''+e;
  }
}

/**
 * Inspect an object properties and returns a nicely formatted string
 * Good to be logged or sent via email.
 * @return {string} inspection of the object's iterable elements
 * @param {*} o object to be inspected
 * @param {number=} optMaxLevel optional max level that function should go deep in the object
 *     Important to avoid infinite loops on recursive objects. Defaults to 4
 */
function inspect(o,optMaxLevel) {
  if( optMaxLevel === undefined )
    optMaxLevel = 4; //default inspect level
  else if( optMaxLevel < 1 )
    return '\n> maximum level must be equal to or greater than 1 (one)';
  if( o === null || o === undefined )
    return '\n> '+o;
  else {
    var tof = function(v) {
      try { return typeof(v); } //I don't now why typeof is throwing errors on arrays
      catch(e) { return 'object'; } //so I'm just defaulting to object
    };
    var ret = function innerInspect(o,maxLevel,level) {
      var msg = '';
      if( level.length > maxLevel ) {
        for( var i in o )
          msg += i+',';
        msg = '\n'+level+msg.substring(0,msg.length-1); //remove last comma
      } else {
        for( var i in o ) {
          var t = tof(o[i]);
          msg += '\n'+level+i+' :: '+t;
          try {
            if( t == 'object' && o[i] )
              msg += innerInspect(o[i],maxLevel,'>'+level);
            else if( t != 'function' )
              msg += ' = "'+o[i]+'"';
          } catch(e) {
            msg += '\n>'+level+e.message;
          }
        }
        if( msg == '' )
          msg = ' = "'+o.toString()+'"';
      }
      return msg;
    }(o,optMaxLevel+1,'> ');
    return ret.substring(0,2) == ' =' ? '\n> '+tof(o)+ret : ret;
  }
} 
```

而不是邮寄自己只是`e.message`发送解析的堆栈甚至更好，还添加当前变量的一些值，例如：

```
var moreInfo = inspect({i:i, row:row}) + '\n' + parseErr(e);
MailApp.sendEmail("yourself@etc", "Error report", moreInfo); 
```

# java - 采用属性名称和字符串值、推断类型并将其设置在 bean 上的内部 springframework 类是什么？

> ID：11424161
> 
> 赞同：0
> 
> 时间：2012-07-11T01:07:00.947
> 
> 标签：java, spring

我有兴趣将这个逻辑重用于我正在做的事情。

给定

```
<bean name="myBeanWithSetXyz" class="com.blah.Something/>
 <property name="xyz" value="3"/> 
```

是否有某个地方的 spring 类确定**setXyz()**是一个 int，并将其设置在 bean 的实例上？

或者也许是其他一些实用程序？是的，我可以自己写，但我喜欢重用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T02:39:49.020

DirectFieldAccessor 和 BeanWrapperImpl 是您最有可能的候选人。

```
ConfigurablePropertyAccessor fieldAccessor = new DirectFieldAccessor (someObject);
beanWrapper.setPropertyValue(fieldName, 
   fieldAccessor.convertForProperty(value, fieldName) );

ConfigurablePropertyAccessor beanWrapper = new BeanWrapperImpl(someObject);
beanWrapper.setPropertyValue(propertyName, 
   beanWrapper.convertForProperty(value, propertyName) ); 
```

# javascript - ajax获取不同频率的数据

> ID：11424162
> 
> 赞同：-1
> 
> 时间：2012-07-11T01:07:04.587
> 
> 标签：javascript, ajax

我的html页面有两个div，都用ajax获取服务器数据，但是div-a按秒获取数据，div-b

按分钟获取数据，我如何实现这种不同的频率来获取服务器数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T01:11:00.997

利用`setInterval`

```
 setInterval(function(){
     //ajax to get div-a
 }, 1000);

 setInterval(function(){
     //ajax to get div-b
 }, 1000*60); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T01:15:46.140

`pseudo-code:`

```
setInterval(function() 
{
    updateDivA();
}, 1000);

setInterval(function() 
{
    updateDivB();
}, 60 * 1000); 
```

# perl - 构建问题：连接课堂聊天

> ID：11424166
> 
> 赞同：1
> 
> 时间：2012-07-11T01:07:16.737
> 
> 标签：perl, build, moose, www-mechanize

我在使用 BUILD 方法时遇到问题，我想连接到基于 HTML 的聊天。我希望这个类能让我保持登录状态，以便执行发送和接收消息的操作。

我尝试了向下的方法，但似乎在运行时会对服务器造成压力。

```
package Shoutbox;

use common::sense;
use WWW::Mechanize; 
use WWW::Mechanize::DecodedContent; 
use JSON -support_by_pp;
use URI::Escape;
use Moose;

our $url = WWW::Mechanize->new();
$url->get("http://www.forum-invaders.com.br/vb/login.php");
$url->submit_form(
    fields => { 
        vb_login_username => 'login',
        vb_login_password => 'senha',
    });

has 'msg' => (is => 'rw', isa => 'Str');

sub send_msg {
    my $self = shift;
    my $message = $self->msg;
    my $content = $url->decoded_content;
    $content =~ /SECURITYTOKEN = "(.*?)"/g ;
    my $token = $1;
    if($content =~ /Bem-vindo/gi) {
        my $msg = uri_escape($message);
        $url->post("http://www.forum-invaders.com.br/vb/vbshout.php",{
            message => $msg, securitytoken => $token,
            do => "ajax", action => "save", instanceid => "2"});
    } 
}

sub get_msg{
    my $r = $url->get("http://www.forum-invaders.com.br/vb/vbshout.php?type=activeusers&do=ajax&action=fetch&instanceid=2");
    my $json = JSON->new->relaxed;
    my $s = $json->decode($r->decoded_content);
    my $msg = $s->{"shouts"}->{0}->{"message_raw"};
    my $user = $s->{"shouts"}->{0}->{"musername"};
    my $name;
    if ($user =~ />(.+)<\/span/gi) {$name = $1;}
    else {$name = $user}
    my $now = join(" => ", $name, $msg) . "\n";
    return $now;
}
no Moose;
1; 
```

很快我收到了使用 BUILD 方法的建议，所以我这样做了，但没有奏效。

```
package Shoutbox;

use common::sense;
use WWW::Mechanize; 
use WWW::Mechanize::DecodedContent; 
use JSON -support_by_pp;
use URI::Escape;
use Moose;

has 'login' => (is => 'rw', isa => 'Str');
has 'password' => (is => 'rw', isa => 'Str');
our $url;
our $token;

sub BUILD{
    my $self = shift;
    $url = WWW::Mechanize->new();
    $url->get("http://www.forum-invaders.com.br/vb/login.php");
    $url->submit_form(
    fields => {
    vb_login_username => $self->login,
    vb_login_password => $self->password,
    });

    my $content = $url->decoded_content;
    $content =~ /SECURITYTOKEN = "(.*)"/g;
    if ($1 eq "guest"){
        print "Login Error\n";
        exit;
    }
    else (print "Login OK!\n";}
        $token = $1;
    print $token . "\n";
}

has 'msg' => (is => 'rw', isa => 'Str');

sub send_msg {
    BUILD;
    my $self = shift;
    my $message = $self->msg;

    my $msg = uri_escape($message);
    $url->post("http://www.forum-invaders.com.br/vb/vbshout.php",{
    message => $msg, securitytoken => $token,
    do => "ajax", action => "save", instanceid => "2"});
}

sub get_msg{
    BUILD;
    my $r = $url->get("http://www.forum-invaders.com.br/vb/vbshout.php?type=activeusers&do=ajax&action=fetch&instanceid=2");
    my $json = JSON->new->relaxed;
    my $s = $json->decode($r->decoded_content);
    my $msg = $s->{"shouts"}->{0}->{"message_raw"};
    my $user = $s->{"shouts"}->{0}->{"musername"};
    my $name;
    if ($user =~ />(.+)<\/span/gi) {$name = $1;}
    else {$name = $user}
    my $now = join(" => ", $name, $msg) . "\n";
    return $now;
    exit;
}
no Moose;
1; 
```

# java - 什么时候最好将对象设置为空。（JSF）。

> ID：11424171
> 
> 赞同：0
> 
> 时间：2012-07-11T01:07:57.890
> 
> 标签：java, jsf, null

我知道将对象分配给 null 是一种代码味道，但在什么情况下将对象分配给 null 是有用的。

示例：在 jsf 中，如果您为一个对象清空，则会清除会话中先前的值存储。

问：什么时候将 object 设置为 null？

问：在 jsf 1.2 中，他们提供了一种在 jsf 中刷新内存（释放内存）而不会将值设为空的方法（例如，您有 clearData 将所有字段设置为空，一旦您离开页面）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T01:16:21.000

> 在 jsf 中，如果你使一个对象为空，你会清除会话中的前一个值存储

不，你没有。您必须调用 API 来完成此操作。

> 问：什么时候将 object 设置为 null？

几乎从不。

> 问：在 jsf 1.2 中，他们提供了一种在 jsf 中刷新内存（释放内存）而不会将值设为空的方法（例如，您有 clearData 将所有字段设置为空，一旦您离开页面）。

不，@ViewScoped bean 的 @PreDestroy 方法目前从未被调用过。这是由于一种理论，即没有可识别的时间来调用它，但我相信他们终于找到了一个并将其合并到 JSF 2 的未来版本中。

# magento - 如何链接到 Magento 中的另一个操作，同时将参数作为 POST 链接而不是查询字符串传递给新页面（控制器）？

> ID：11424179
> 
> 赞同：0
> 
> 时间：2012-07-11T01:08:50.990
> 
> 标签：magento

我需要将参数传递给新页面（没有查询字符串），因为我想重定向回当前页面的模块和查询字符串。

所以我可以从

1.  showdown/index?id=35 --click---> showdown/vote?id=1
2.  showdown/vote?id=1 --redirect--> showdown/index?id=35

没有看到投票动作。

*（重定向方法不起作用，因为它仅重定向到普通的 index.php 主页 url，而不是保持模块/操作完整，而且我在 Magento 中找不到用于创建超链接的帮助程序。）*

Magneto 是否为此提供了链接助手？

我想要的东西的例子：`<a href="<?php echo Mage::Helper->Link->($url, $array); ?>`然后 $array 或任何变量被发送到控制器（我链接到的页面）。

我可以使用 POST 样式的超链接吗？*（我可以在 Symfony/Yii/Rails/Ramaze 框架中。为什么不是 Zend？）*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T14:40:35.990

链接点击不会导致没有 JavaScript 的 POST 请求。

Magento Url 助手具有语法

> `Mage::getUrl('module/controllerfile/action',array('id',1))`

这将导致查找 frontName`module`并为您提供例如

> [http://site.com/module/controllerfile/action/id/1/](http://site.com/module/controllerfile/action/id/1/)

然后您可以使用`Mage::app()->getRequest()->getParam('id')`.

如果您涉及多个 URL（如表单帖子），您还可以使用重定向控制器内的用户

> `$this->_redirect('module/controllerfile/action', array('id',1))`

您还可以创建一个查询字符串

> `$this->_redirect('module/controllerfile/action', array('_query',array('param1'=>'val','param2'=>'val')))`.

# java - 在 JApplet/Swing 中使用图形和小部件绘图？

> ID：11424180
> 
> 赞同：1
> 
> 时间：2012-07-11T01:08:52.130
> 
> 标签：java, swing, graphics, paintcomponent, japplet

基本上，我有一个 JApplet，它尝试使用图形进行绘制（即 g.drawOval(10,10,100,100) 并且还包括 JCompotents（即 JButton）。发生的情况是重绘会变得非常古怪。

有时图形会覆盖小部件或反之亦然。它不可靠并导致不可预测的行为。

（按钮也总是在这些图形的顶部）

我已经尝试过尝试覆盖或手动绘制组件、更改订单等，但我认为我在这里遗漏了一些非常基本的东西。任何人都有使用 g.drawXXX 和 JCompotents 的模板或正确方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T02:11:39.467

再次，只要按照我的建议，

> 确保永远不要直接在 JApplet 中绘制，而是在 JPanel 或其 contentPane（即 JPanel）中绘制。确保在此 JPanel 的 paintComponent(...) 方法中进行绘制。

它有效：

```
import java.awt.*;
import java.awt.event.*;
import java.lang.reflect.InvocationTargetException;

import javax.swing.*;

public class Test2 extends JApplet {

   public void init() {
      try {
         SwingUtilities.invokeAndWait(new Runnable() {
            public void run() {
               Test2BPanel panel = new Test2BPanel();
               setContentPane(panel);
            }
         });
      } catch (InvocationTargetException e) {
         e.printStackTrace();
      } catch (InterruptedException e) {
         e.printStackTrace();
      }

   }

}

class Test2BPanel extends JPanel {
   private String[] backgroundImageFileNames = { "test", "test", "test" };

   private JButton refreshButton;
   private JComboBox backgroundList;

   public Test2BPanel() {

      setBackground(Color.white);

      setLayout(new FlowLayout());

      refreshButton = new JButton("replant new forest");
      refreshButton.addActionListener(new ActionListener() {
         public void actionPerformed(ActionEvent e) {

         }

      });
      add(refreshButton);

      backgroundList = new JComboBox(backgroundImageFileNames);
      backgroundList.setSelectedIndex(2);
      add(backgroundList);
   }

   @Override
   protected void paintComponent(Graphics g) {
      super.paintComponent(g);
      paintIt(g);
   }

   public void paintIt(Graphics g) {
      for (int i = 0; i < 200; i++) {
         for (int j = 0; j < 200; j++) {
            g.setColor(Color.red);
            g.drawOval(10 * i, j, 10, 10);
         }
      }
   }
} 
```

另外，请查看 Swing 绘画教程，包括[基本绘画教程](http://docs.oracle.com/javase/tutorial/uiswing/painting/index.html)和[高级绘画教程](http://www.oracle.com/technetwork/java/painting-140037.html)。

有关这方面以及更多内容的好书，请查看Chet Haase 和 Romain Guy 的《购买[肮脏的富客户》。](http://filthyrichclients.org/)您不会后悔购买！这是我拥有的最好的 Java 书籍之一。

# ruby - rake UTF-8 中的无效字节序列

> ID：11424182
> 
> 赞同：4
> 
> 时间：2012-07-11T01:09:22.710
> 
> 标签：ruby, ruby-on-rails-3, rake

出乎意料的是，我在运行 rails 3.2 和 Ruby 1.9.3p125 的网络服务器上的任何 rake 命令都会收到一个奇怪的错误，并且无论执行什么 rake 任务，堆栈跟踪都是相同的。除了 Rakefile 和 lib/tasks 中的 ascii 之外，什么都没有。

堆栈跟踪：

```
rake --trace
rake aborted!
invalid byte sequence in UTF-8
/usr/local/lib/ruby/1.9.1/rake/application.rb:183:in `glob'
/usr/local/lib/ruby/1.9.1/rake/application.rb:183:in `block in have_rakefile'
/usr/local/lib/ruby/1.9.1/rake/application.rb:181:in `each'
/usr/local/lib/ruby/1.9.1/rake/application.rb:181:in `have_rakefile'
/usr/local/lib/ruby/1.9.1/rake/application.rb:468:in `find_rakefile_location'
/usr/local/lib/ruby/1.9.1/rake/application.rb:486:in `raw_load_rakefile'
/usr/local/lib/ruby/1.9.1/rake/application.rb:82:in `block in load_rakefile'
/usr/local/lib/ruby/1.9.1/rake/application.rb:133:in `standard_exception_handling'
/usr/local/lib/ruby/1.9.1/rake/application.rb:81:in `load_rakefile'
/usr/local/lib/ruby/1.9.1/rake/application.rb:65:in `block in run'
/usr/local/lib/ruby/1.9.1/rake/application.rb:133:in `standard_exception_handling'
/usr/local/lib/ruby/1.9.1/rake/application.rb:63:in `run'
/usr/local/bin/rake:32:in `<main>' 
```

犯法的方法是

```
def have_rakefile
      @rakefiles.each do |fn|
        if File.exist?(fn)
          others = Dir.glob(fn, File::FNM_CASEFOLD)
          return others.size == 1 ? others.first : fn
        elsif fn == ''
          return fn
        end
      end
      return nil
    end 
```

由于堆栈跟踪对我没有帮助，我`"#{fn} #{File::FNM_CASEFOLD}"`在块的开头插入了一个 puts 并得到了这个：

```
rakefile 8
Rakefile 8
rake aborted!
invalid byte sequence in UTF-8
/usr/local/lib/ruby/1.9.1/rake/application.rb:184:in `glob'
/usr/local/lib/ruby/1.9.1/rake/application.rb:184:in `block in have_rakefile'
/usr/local/lib/ruby/1.9.1/rake/application.rb:181:in `each'
/usr/local/lib/ruby/1.9.1/rake/application.rb:181:in `have_rakefile'
/usr/local/lib/ruby/1.9.1/rake/application.rb:469:in `find_rakefile_location'
/usr/local/lib/ruby/1.9.1/rake/application.rb:487:in `raw_load_rakefile'
/usr/local/lib/ruby/1.9.1/rake/application.rb:82:in `block in load_rakefile'
/usr/local/lib/ruby/1.9.1/rake/application.rb:133:in `standard_exception_handling'
/usr/local/lib/ruby/1.9.1/rake/application.rb:81:in `load_rakefile'
/usr/local/lib/ruby/1.9.1/rake/application.rb:65:in `block in run'
/usr/local/lib/ruby/1.9.1/rake/application.rb:133:in `standard_exception_handling'
/usr/local/lib/ruby/1.9.1/rake/application.rb:63:in `run'
/usr/local/bin/rake:32:in `<main>' 
```

rakefile 只是 rails 生成的默认文件

```
# Add your own tasks in files placed in lib/tasks ending in .rake,
# for example lib/tasks/capistrano.rake, and they will automatically be available to Rake.

require File.expand_path('../config/application', __FILE__)
require 'rake/dsl_definition'
require 'rake'

MyApp::Application.load_tasks 
```

lib/tasks 中唯一的任务文件是

```
 desc "Resets the help files in the db by deleting all existing and rereading the yaml files"
    task :help_reset => :environment do
      HelpSystem.delete_all
      HelpSystem.seed_help
    end 
```

我不知道下一步该去哪里，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-12-11T11:17:40.723

好的，我的问题与您的问题略有不同，但我会发布我是如何解决的，以防它对未来的 Google 员工有所帮助。

我的问题是每次尝试运行时都会出现以下错误`rake stats`：

```
rake aborted!
ArgumentError: invalid byte sequence in UTF-8
/Users/george/.rvm/gems/ruby-2.1.5/gems/railties-4.1.6/lib/rails/code_statistics_calculator.rb:61:in `=~'
/Users/george/.rvm/gems/ruby-2.1.5/gems/railties-4.1.6/lib/rails/code_statistics_calculator.rb:61:in `add_by_io'
/Users/george/.rvm/gems/ruby-2.1.5/gems/railties-4.1.6/lib/rails/code_statistics_calculator.rb:43:in `block in add_by_file_path'
... # more stacktrace 
```

所以我打开了`code_statistics_calculator.rb`（堆栈跟踪顶部的文件并更改了：

```
def add_by_file_path(file_path)
  File.open(file_path) do |f|
    self.add_by_io(f, file_type(file_path)) # <- this line is raising the error
  end
end 
```

到：

```
def add_by_file_path(file_path)
  File.open(file_path) do |f|
    begin
      self.add_by_io(f, file_type(file_path))
    rescue ArgumentError
      debugger
      puts # An extra statement is needed between 'debugger' and 'end' or debugger screws up.
    end
  end
end 
```

再次运行`rake stats`，我进入调试器，此时我可以看到，`file_path`此时它指向了一个`app/models`无法解析为 utf-8 的特定文件。

果然，我在 vim 中打开了那个文件，当我输入`:set fileencoding?`它时返回`latin-1`. 所以我将它设置为 utf-8 （`set fileencoding=utf-8`然后保存文件），果然，`rake stats`再次工作！瞧。

（请注意，在您的情况下，可能有多个文件不在 utf-8 中。此外，完成后请确保不要忘记更改`code_statistics_calculator.rb`回其原始格式！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T09:44:50.470

尝试在 UTF-8 WITH BOM 中保存有问题的文件（可能是 rake 正在尝试的任何文件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-10T10:45:33.703

基于 GeorgeMillo 的想法，但无需调试，可以这样做：

```
 def add_by_file_path(file_path)
    File.open(file_path) do |f|
      self.add_by_io(f, file_type(file_path))
    end
  rescue Exception => e
    puts "Exception raised while processing: #{file_path}: #{e.message}"
  end 
```

错误将被忽略，并且将打印带有问题文件的跟踪。

# c# - 在 Windows 启动期间使用 InTheHand.Net.Bluetooth 开始侦听蓝牙连接时出现 System.Net.Sockets.SocketException

> ID：11424192
> 
> 赞同：1
> 
> 时间：2012-07-11T01:11:05.847
> 
> 标签：c#, bluetooth

我正在开发一个 Windows 服务，它在使用以下代码运行时使用 InTheHand.Net.Bluetooth 库开始监听蓝牙连接：

```
 btListener = new BluetoothListener(service);
            btListener.Start(); 
```

如果在 Windows 完成启动后手动启动该服务（例如在 Windows 启动大约 5 分钟后），那么一切正常：蓝牙服务启动成功。

但是，如果我将 Windows 服务的启动类型设置为自动，则该部分代码会导致以下异常：

```
System.Net.Sockets.SocketException (0x80004005): An invalid argument was supplied
   at InTheHand.Net.Bluetooth.Msft.SocketBluetoothClient.ThrowSocketExceptionForHR(Int32 errorCode)
   at InTheHand.Net.Bluetooth.Msft.MicrosoftSdpService.SetService(Byte[] sdpRecord, ServiceClass cod)
   at InTheHand.Net.Bluetooth.Msft.WindowsBluetoothListener.SetService(Byte[] sdpRecord, ServiceClass cod)
   at InTheHand.Net.Bluetooth.Msft.WindowsBluetoothListener.Start(Int32 backlog)
   at InTheHand.Net.Bluetooth.Msft.WindowsBluetoothListener.Start() 
```

我认为这是因为蓝牙设备尚未初始化时调用“开始”方法太快了。有没有人也遇到过类似的问题？关于如何知道何时应该调用“开始”方法以确保它可以成功启动的任何想法？

感谢任何反馈或评论。

谢谢，

国语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T03:52:59.497

通常，您可以通过将服务配置为依赖于它在启动之前需要运行的任何服务（或服务）来解决此类问题。然后 SCM 将确保在其他服务启动之前它不会启动您的服务。

这篇[知识库文章](http://support.microsoft.com/kb/193888)有点旧，但它解释了基础知识。

# sql - SQL SERVER：选择不返回值的列

> ID：11424196
> 
> 赞同：1
> 
> 时间：2012-07-11T01:11:42.453
> 
> 标签：sql, sql-server, sql-server-2008, select

```
SELECT * from dbo.TableName WHERE [Customer_ID] = "90210" 
```

`Customer_ID`是一个`varchar(64)`

我不断收到一条错误消息说

> 消息 207，级别 16，状态 1，第 1 行
> 无效的列名称“90210”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T01:13:04.430

在你的中使用单引号`WHERE`

```
 SELECT * from dbo.TableName WHERE [Customer_ID] = '90210' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T04:08:51.990

如果您使用，您的查询将运行良好`SET QUOTED_IDENTIFIER OFF`

# mysql - mysql使用自动增量ID选择一定范围

> ID：11424197
> 
> 赞同：0
> 
> 时间：2012-07-11T01:11:51.577
> 
> 标签：mysql, select

我需要选择表格的某个范围，例如使用自动增量 ID 的 #1000~5000。语法应该是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T01:13:46.090

`SELECT column1, column2 FROM table WHERE columnID BETWEEN 1000 and 5000`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T01:14:11.217

```
SELECT * FROM table WHERE id BETWEEN 1000 AND 5000 
```

# c++ - 在 C++ 中搜索文件夹

> ID：11424198
> 
> 赞同：0
> 
> 时间：2012-07-11T01:11:57.160
> 
> 标签：c++, file, search, directory

我有点编程的初学者，我需要帮助编写一个脚本，该脚本接受多个作为文件夹的字符串的输入，在 cmd 中针对当前位置的现有文件夹搜索文件夹列表，它显示哪个存在，哪个不存在。在现有的文件中，它显示了里面有多少文件。

例如，我在桌面目录中（假设它包含a，bb，c），我输入a，b，aa，bb，它将根据当前目录中的所有文件夹名称搜索a，b，aa，bb，然后它输出a，bb，c存在，aa，b不存在。然后它显示a，bb，c中有多少文件。

我的时间不多，非常感谢任何即时帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T01:18:08.183

I would suggest [Boost.Filesystem](http://boost.org/libs/filesystem), which is a cross-platform libary abstracting filesystem operations such as querying for files properties, creating, copying and moving files. As a bonus, it is proposed for standardisation in a future version of the C++ ISO standard.

As a starting point, here is an example that will process every file in a given directory.

```
#include <boost/filesystem.hpp>
#include <iostream>

int main(int argc, char* argv[])
{
    if(argc == 2)
    {
        boost::filesystem::path directory(argv[1]);

        if (boost::filesystem::exists(directory) && boost::filesystem::is_directory(directory))
        {
            boost::filesystem::directory_iterator begin(directory);
            boost::filesystem::directory_iterator end;

            while(begin != end)
            {
                std::cout << *begin << " ";
                ++begin;
            }   
            std::cout << "\n";
        }   
    }
} 
```

It show you that you can:

*   Iterate over every file in a directory
*   Query if a given path exist
*   Query if a given path point to a directory

Other function you could be interested in:

*   Query for the current working directory ([`boost::filesystem::current_path()`](http://boost.org/libs/filesystem/doc/reference.html#current_path))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T01:23:52.717

有一些很棒的库可以让这个过程变得非常轻松和跨平台。

Qt 和 Boost 是最知名的。

以下是相关类的文档链接，这些类将为您执行此操作：

[提升`Filesystem`](http://www.boost.org/doc/libs/1_50_0/libs/filesystem/doc/index.htm)和[Qt`QDir`](http://qt-project.org/doc/qt-5.0/qdir.html)。

我更喜欢Qt，因为长期以来文档已经很统一了，我也很喜欢IDE。

# makefile - 如何使用 Makefile 中的自动变量获取第二个依赖文件？

> ID：11424204
> 
> 赞同：52
> 
> 时间：2012-07-11T01:12:36.423
> 
> 标签：makefile, gnu-make

我需要从规则中获取第 n 个依赖文件，类似于 bash 中的 $n。我需要这个，因为我想输入单个依赖文件作为构建程序的选项。

这是一个例子：

```
dep.o: dep.src config1.cfg config2.cfg
    parse -cfg1 $2 -cfg2 $3 -o $@ $< 
```

是否可以？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-07-11T04:45:26.067

```
dep.o: dep.src config1.cfg config2.cfg
    @echo the second preq is $(word 2,$^), the third is $(word 3,$^) 
```

# c# - 用于播放/查找 OGG 文件的库

> ID：11424205
> 
> 赞同：0
> 
> 时间：2012-07-11T01:12:42.293
> 
> 标签：c#, java, ogg

我的任务是创建一个用于处理 Ogg 文件的 GUI 程序。主要要求如下：

1.  该程序必须为 Windows 和 Mac OS X 用户运行。
    *   对于非 Windows 用户，最好不要强制使用 Wine、Boot Camp 等。
2.  我使用的库（如果有）必须成功播放**和**查找 Ogg 文件。
3.  允许的主要语言是 Java 或 C#（因此有标签）。Python 被认为是不合格的。可以根据具体情况讨论具有更好库的其他语言。
4.  我负责创建的程序是免费的。但是，其目的是增强商业产品。

就我迄今为止试图找到的内容而言，没有一个完全符合要求：

*   [JOrbis](http://www.jcraft.com/jorbis/)是一个 Java Ogg Vorbis 解码器，但对于我拥有的测试文件没有很好的文档或搜索能力。
*   [DragonOGG](http://sourceforge.net/projects/dragonogg/)与 C# 一起工作（由于 Mono 不一定被禁止），但在不利于搜索方面与 JOrbis 不相上下。
*   [BASS](http://www.un4seen.com/)实际上适用于正确播放和查找 Ogg 文件，但它的许可条款阻止我使用它。
*   [fmod](http://fmod.net/index.html)尚未尝试过，但与 BASS 有类似的许可问题。

考虑到这一点，我敢打赌那里还有其他图书馆。不过，我有点筋疲力尽了。

有什么图书馆，如果有的话，你们推荐吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T12:22:40.650

如果您只需要一个也可以搜索的解码器，请尝试*[NVorbis](http://nvorbis.codeplex.com/)*。它是用 C# 编写的，并试图支持样本精确的搜索（它似乎对我有用，但我没有进行严格的测试来确定）。

许可证是**MS-Pl**，所以我认为您应该能够在您的项目中使用它。

**免责声明**：我是*NVorbis*的主要开发人员和协调员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T02:23:03.423

不知道 api 是否仍然免费，但**FMOD**应该是你的朋友。那里有一些 C# Wrapper。支持许多平台。试试看。

编辑：对不起，我的错，开发下载中当然包含 csharp 示例。 [http://fmod.net/fmod-downloads.html](http://fmod.net/fmod-downloads.html) 寻找 FMODex 下载 > 开发

# php - 几分钟后“MySQL 服务器已消失”

> ID：11424206
> 
> 赞同：2
> 
> 时间：2012-07-11T01:12:50.263
> 
> 标签：php, mysql, disconnect

我在查询中有 2 个表，旨在显示/通过电子邮件发送已保存的用户搜索信息：用户和愿望清单。

搜索信息包含书名等。

我有第一个查询，旨在将所有在愿望清单表中有记录的用户放入一个数组中。

然后使用 foreach 循环，通过第二个查询，获取每本书的标题并在各个站点上运行搜索，并将该信息保存到屏幕或电子邮件中。

第一次运行大约需要 3 分钟来组装第一个用户的信息，然而，在显示此信息后，我看到可怕的“MySQL 服务器已消失”。

根据[http://dev.mysql.com/doc/refman/5.0/en/gone-away.html](http://dev.mysql.com/doc/refman/5.0/en/gone-away.html) - 这不应该发生得这么快。

第二个查询的代码很简单：

```
SELECT * FROM wishlist WHERE uid = " . $sendtouser . " ORDER BY wishid 
```

在为该用户编译信息后，我有以下内容来关闭循环并结束连接。

```
} while ($row_rsWishDetails = mysql_fetch_assoc($rsWishDetails));
mysql_free_result($rsWishDetails); 
```

我尝试了一些我在网上找到的其他建议，包括：

```
ini_set('max_execution_time', 22222);
ini_set('mysql.connect_timeout', 500);
ini_set('default_socket_timeout', 600); 
```

但没有什么能解决问题。

有任何想法吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T01:17:05.220

With long running scripts, you need to make sure that connection is still open before running any queries. The best way to do so is to use something like [`mysql_ping()`](http://php.net/manual/en/function.mysql-ping.php) before your query.

Also, the `mysql` is rather old and inefficient. You should try to upgrade to `mysqli`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T01:39:25.380

你需要测试你能收到多少数据。

无论您的数据库机器是旧的还是您的结果行数是 1000000000000000000000+，您都需要使用分页修复您的查询：限制、游标等...

这不是您问题的直接解决方案。

首先，检查您的行数

```
SELECT COUNT(*) FROM wishlist WHERE uid = " . $sendtouser . " 
```

*   不需要 ORDER BY。

检查删除 ORDER BY 短语，如果确定，使用 PHP 代码重新排列。有时它可能会有所帮助。

和...

```
ini_set('max_execution_time', 22222); 
```

如您所知，它是客户端（PHP）配置，如果不允许使用 mysql-server 则无用。

# vb.net - 自增 ID

> ID：11424208
> 
> 赞同：-1
> 
> 时间：2012-07-11T01:13:39.617
> 
> 标签：vb.net, textbox

我想在 vb.net 中创建自动递增数，例如：-

```
01, 02, 03, 04 
```

等等..所以它是有序的。

我正在使用 VB NET 2008 连接 OleDb 到 MS Access。

它会得到这个错误

> 未为类型“DBNull”和类型“整数”定义运算符“+”

如果我在表中有一条空记录。但是当我在表中至少有 1 条记录时它正在工作

这是我的代码

```
Try
    cmd = New OleDbCommand(" SELECT MAX(sampleID) FROM 1BK ", cnnOLEDB)
    Dim dr As OleDbDataReader = cmd.ExecuteReader
    If dr.Read Then
        TextBox1.Text = dr.Item(0) + 1
    Else
        TextBox1.Text = "20120701"
    End If
Catch ex As Exception
    MsgBox(ex.Message)
End Try 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T01:19:32.803

That is probably because the `dr.Item(0)` is null, and cannot be added with. I would first run a check to make sure that `dr.Item(0) != null` and then do the addition. If it is null, make the `TextBox1.Text = [YOURSTARTERVALUE];`

# java - 每次从 mercurial 存储库中提取 Java 项目时，是否需要重新构建它？

> ID：11424212
> 
> 赞同：0
> 
> 时间：2012-07-11T01:13:59.343
> 
> 标签：java, mercurial, tortoisehg

我的同事在 Bitbucket 上有一个 Java 项目。最近我需要运行他们的项目。所以我用 TortoiseHg 来拉项目。假设代码有变化，每次我从存储库中提取项目代码时，我是否应该重建由 6 个子项目组成的整个项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T02:52:40.443

听起来您的同事在一个 repo 中有多个项目，这不是 mercurial 的预期用途（[请参阅一个项目一个存储库：Mercurial Used Right](http://www.webdevelopment.nicholastuck.com/tools/one-project-one-repository-mercurial-used-right/)）

由于您很可能不会很快让他们解决这个问题，如果他们不花太长时间，您可能是最安全的重建整个所有项目。

否则你可以做的是
`hg pull`
`hg status --rev x:tip`
这是你上次构建的修订版（替换`x`为这个数字）和小费之间的状态。这应该向您显示自上次构建以来更改的所有文件。现在您可以看到它们在哪些项目中，然后只构建更改的项目。

# jquery - 表单内的表单的jQuery验证问题

> ID：11424215
> 
> 赞同：1
> 
> 时间：2012-07-11T01:14:11.353
> 
> 标签：jquery, forms, validation, jquery-validate

这是一个奇怪的问题。我的设置是这样的..

```
<form id="main">
    <input name="title" class="required">
    <form id="searchIngredient">
          <input name="search">
          <input type="submit" name="submit" value="Search">
    <form>
    <input type="submit" name="submit" value="Add New Recipe">
</form> 
```

现在，我尝试使用 class="required" 仅验证#main 表单中的输入，但是使用表单中的第二个#serachIngredient 表单，验证根本不起作用。

**Incase You Are Wondering**：#searchIngredient 表单使用 ajax 返回结果，并且由于设计原因，它需要位于 #main 表单内。

我知道 jQuery 验证在没有#searchIngredient 表单的情况下工作，但是一旦我将它添加回来，它就会停止工作，没有错误。

任何建议的解决方法或提示？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T01:17:40.840

That's not possible. Nested forms are not supported in HTML.

The start tag for the inner form will be ignored, and the end tag of the inner form will instead end the outer form, leaving the submit button outside the form.

You can have as many forms you like in the page, but not nested inside one another.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-18T19:58:35.617

我有同样的问题，因为在 html 中不支持嵌套表单嵌套表单将被忽略，但看起来只有第一个嵌套表单会被忽略，所以对于 jquery 表单验证我尝试在主表单之后添加嵌套然后我添加表单我想验证它工作正常。

```
<form id="main">
<form>
</from>
    <input name="title" class="required">
    <form id="searchIngredient">
          <input name="search">
          <input type="submit" name="submit" value="Search">
    <form>
    <input type="submit" name="submit" value="Add New Recipe">
</form> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-05-07T15:14:28.967

我有同样的问题，我的解决方案（因为我不能没有嵌套表单）是：

```
<form id="main">
    <input name="title" class="required">
    <form id="searchIngredient">
          <input name="search">
          <a href="#" class="submit-link"></a>
    <form>
    <input type="submit" name="submit" value="Add New Recipe">
</form> 
```

然后我挂钩类提交，并做我的ajax东西

```
$(document).on('click', 'form a.submit-link', function(e){
  e.preventDefault();
  var form = $(this).parents('form').first();
  var search = form.find('input[name="search"]').val();
  jQuery.post('my_ajax_url.php', {search: search)}, function(data, status, xhr) {
    // deal response
  });
}); 
```

# r - 如何通过匹配列标题组合两个表并取出缺失的数据列表？

> ID：11424232
> 
> 赞同：0
> 
> 时间：2012-07-11T01:16:09.830
> 
> 标签：r

```
Table1 <- data.frame(CName  = c("aa", "bb", "cc", "dd"),
                     number = c("X11", "X22", "X33", "X44"))

Table2 <- data.frame(PName = c("zz", "yy", "xx", "ww"),
                     "X11" = c(5, 6, 3, 5),
                     "X22" = c(7, 5, 4, 3),
                     "X44" = c(9, 9, 1, 1)) 
```

我有表 1

```
 CName number
1    aa    X11
2    bb    X22
3    cc    X33
4    dd    X44 
```

我有表 2

```
 PName X11 X22 X44
1    zz   5   7   9
2    yy   6   5   9
3    xx   3   4   1
4    ww   5   3   1 
```

我想获取两个文件：

（1）通过将表1的CName与表2的列标题匹配，我想要一个这样的新表：

结果表1

```
 PName  aa  bb  dd
1    zz   5   7   9
2    yy   6   5   9
3    xx   3   4   1
4    ww   5   3   1 
```

我也想知道缺少什么，即在这个例子中，表2中缺少cc，所以不匹配。

结果表2

```
Table1:  
Table2: cc 
```

有没有有效的方法来做这些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T01:45:35.057

`Table2`根据中的值设置除第一列之外的列名`Table1`

```
colnames(Table2)[-1] <- as.character(Table1[Table1[["number"]] %in% colnames(Table2)[-1], "CName"]) 
Table2
#  PName aa bb dd
#1    zz  5  7  9
#2    yy  6  5  9
#3    xx  3  4  1
#4    ww  5  3  1 
```

这将显示`Table1[["CName"]]`新事物中没有的`colnames`内容`Table2`

```
as.character(Table1[["CName"]][!Table1[["CName"]] %in% colnames(Table2)[-1]])
#[1] "cc" 
```

这将显示新`colnames`的内容`Table2`，但不是`Table1[["CName"]]`

```
as.character(colnames(Table2)[-1][!colnames(Table2)[-1] %in% Table1[["CName"]]]) 
#character(0) 
```

也许一些简单的`%in%`语法示例会有所帮助（请注意，这已记录在中`?match`，这`A %in% B`只是`match(A, B, nomatch=0) > 0`

```
A <- c("A", "B", "D", "E")
B <- c("B", "C", "D")
A %in% B
#[1] FALSE  TRUE  TRUE FALSE
!A %in% B
#[1]  TRUE FALSE FALSE  TRUE
A[A %in% B]
#[1] "B" "D"
A[!A %in% B]
#[1] "A" "E"
B[B %in% A]
#[1] "B" "D"
B[!B %in% A]
#[1] "C" 
```

对于您的数据，我曾经`as.character`转换`factor`为`character`

# java - printing an 2d array without newline in java

> ID：11424236
> 
> 赞同：-1
> 
> 时间：2012-07-11T01:16:45.620
> 
> 标签：java

```
for(int i=0;i< no_of_hosts;i++)
    for(int j=0;j < count;j++)
        write(Double.toString(table1[i][j])); 
```

table1 has double values, and write() is printing every value as new line (in a file). Now I like print like this:

```
1  34  44
2  45  95
3  90  12 
```

considering no_of_hosts = 3 and count = 2. Any idea?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T02:21:23.903

也许你想要一个函数 write 的实现？

这里我有一个建议，你应该将变量count传递给函数write，否则只有将一行中的数字定义为常量，没有办法实现这样的函数。

# android - Android+jquerymobile+phonegap poor performance compared with iphone / blackberry / nokia

> ID：11424239
> 
> 赞同：1
> 
> 时间：2012-07-11T01:16:58.800
> 
> 标签：android, performance, jquery-mobile

I have an Android Web apps using jquerymobile and phonegap.

I already compress js/html, place my scripts at the bottom of the page, and I am still not satisfied with the performance of my apps, especially when my script is doing DOM manipulation.

The response of the touch event is very slow (>2 sec or event more).

Tested with Android Browser/Android Firefox and the results are still the same.

When I compare the performance to the normal desktop browser / iPhone Safari / BlackBerry Browser / Nokia Browser my apps are responsive.

Specifications:

1.  Samsung Galaxy Tab II
2.  Android ICS 4.0
3.  phonegap 1.8.0
4.  jquerymobile 1.1.0

Recap of what I have already tried:

*   Get to [deviceready](http://simonmacdonald.blogspot.com/2011/12/on-first-day-of-phonegapping-get-to.html) faster.
*   Minimize / compress JS code using YUI Compressor
*   Move script tags to the bottom of the body tag.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:50:34.030

试试下面的。

添加：

```
webview.getSettings().setRenderPriority(RenderPriority.HIGH);
webview.getSettings().setCacheMode(WebSettings.LOAD_NO_CACHE); 
```

对于清单：

```
android:hardwareAccelerated="true" 
```

此外，整理和缩小脚本（而不仅仅是缩小）并大量使用 .destroy() 来保持 DOM 修剪。

不幸的是，Android 上的 PhoneGap 速度非常慢。

# .net - 为 COM 客户端设置程序集/类的 COM 显示名称/ProgID

> ID：11424244
> 
> 赞同：1
> 
> 时间：2012-07-11T01:18:00.527
> 
> 标签：.net, com

我正在设置一个暴露给 VB6 的 .NET 程序集，并且该程序集的文件名似乎干扰了 VB6 在创建类时使用的名称。

我正在尝试查找是否有可以提供的 .NET 属性或设置，以允许我控制在 VB6 中创建的对象实例。这纯粹是一种美化的东西，我知道它会全部编译下来，但我喜欢看起来不错的东西。

在我的 .NET 程序集中，我有以下属性，请注意 ProgID 似乎对编译没有任何影响。

```
<
ComSourceInterfaces(GetType(IManagerEvents)),
Guid(Manager.ClassId),
ClassInterface(ClassInterfaceType.None),
ProgId("IdealposWebIt.Manager")
> _
Public Class Manager
    Implements IManager 
```

在 VB6 世界中，当引用此类时，似乎是程序集的文件名被破坏成为 ProgID 的一部分。

```
Private Sub Form_Load()
    Dim orderManager As Idealpos_WebIT_Connector.Manager
    Set orderManager = New Idealpos_WebIT_Connector.Manager 
```

我能做些什么来改变它吗？我应该把它吸吮公主吗？

请注意，一切都在 VB6 中正确创建和运行，但我希望它能够很好地显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T07:15:46.940

经过大量搜索和查看 C++ 材料后，如果没有 .NET 中的 MIDL 编译器，您将无法控制向 COM 公开的名称。

您在项目的程序集名称中使用的任何名称都是经过 COM 化以在基于 COM 的应用程序中使用的名称（早期绑定）。因此，在这种情况下，在项目中，程序集名称会`Idealpos.WebIT.Connector`变成`Idealpos_WebIT_Connector`这样，以便为 COM 创建一个较短的名称，您将不得不更改您的 .NET 项目名称，这并不总是您愿意做的事情。

我希望这对未来的人们有所帮助。

# php - PHP post form hidden input

> ID：11424247
> 
> 赞同：0
> 
> 时间：2012-07-11T01:18:08.917
> 
> 标签：php, http, hidden-field

I have a form

```
<form class="well form-search" method="post">
    <input type="hidden" name="act" value="add"/>
    <input type="text" name="uname" placeholder="User name" />
    <input type="password" name="passwd" placeholder="Password" />
    <button type="submit" class="btn">Add User</button>
</form> 
```

'uname' and 'passwd' end up in $_POST but 'act' is in $_GET for some reason.

# jquery - Keep item in original list after dropping JqueryUI

> ID：11424250
> 
> 赞同：2
> 
> 时间：2012-07-11T01:19:05.260
> 
> 标签：jquery, jquery-ui

I'm using JQqueryUI sortable and was wondering if it would be possible to not remove the a list item from the original list whilst dragging and dropping onto a new list. For example, if Sortable#1 is the original list, and I drag and drop Item 1 onto Sortable#2, I want Item 1 to still be displayed in Sortable#1 (as well as Sortable#2), however, you should not be able to add it to Sortable#2 again until it is dropped back to Sortable#1\. Are there any such tutorials out there I can refer to? Thanks in advance.

```
$(function() {
        $( "ul.droptrue" ).sortable({
            connectWith: "ul"
        });

        $( "ul.dropfalse" ).sortable({
            connectWith: "ul",
            dropOnEmpty: false
        });

        $( "#sortable1, #sortable2" ).disableSelection();

}); 
```

-

```
<ul id="sortable1" class='droptrue'>
    <li class="ui-state-default">Item 3</li>
    <li class="ui-state-default">Item 4</li>
    <li class="ui-state-default">Item 5</li>
</ul>

<ul id="sortable2" class='drop true'>
    <li class="ui-state-highlight">Item 1</li>
    <li class="ui-state-highlight">Item 2</li>
    <li class="ui-state-highlight">Item 6</li>
</ul> 
```

# java - 节点缓冲区打印问题

> ID：11424260
> 
> 赞同：0
> 
> 时间：2012-07-11T01:20:55.600
> 
> 标签：java, node.js, encoding, types, buffer

我正在尝试使 Java TCP 客户端和 node.js TCP 服务器一起交谈。这是我目前的代码：

*   Java 客户端

    导入java.net。*; 导入 java.io。*;

    公共类 Client2{

    ```
    public static void main(String[] args)  throws Exception{
        Socket s = new Socket("192.168.1.35",8500);
        DataOutputStream dos = new DataOutputStream(s.getOutputStream());
        dos.writeUTF("abcdefgh");
        dos.close();
        s.close();
    } 
    ```

    }

*   Node.js 服务器

    var net = require('net'), server = net.createServer();

    server.on('connection', function (client) {

    ```
    console.log('Hello World !');

    client.on('data', function(data) {

        var message = data.toString('utf8');
        console.log('***' + message +'***');

    }); 
    ```

    });

    server.listen(8500);

此示例将返回此结果：

```
Hello World !
**abcdefgh*** 
```

*   但以此为输入：

    abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz

它还给了这个：

```
Hello World !
***�abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz*** 
```

*   使用此输入：

    qq32we3w87d 38s1d87s4df7s4d1+s2d7f+sfdsf4sà$àà3663%ç%&ç%&ç

它还给了这个：

```
Hello World !
***@qq32we3w87d 38s1d87s4df7s4d1+s2d7f+sfdsf4sà$àà3663%ç%&ç%&ç*** 
```

**tldr：有时在记录缓冲区时，节点会在开头添加字符（带有数字或？的矩形），或者事件会在开始时剪切一些字符。**

**- 如何记录缓冲区并以正确的方式将它们分配给变量？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T01:38:52.140

我不是 DataOutputStream 方面的专家，但如果它确实添加了额外的字符，你应该使用其他东西。

当我做服务器的事情时，我使用了 BufferedReader 和 BufferedWriter。它看起来像这样：

```
 Socket s = new Socket(<<WEB ADDRESS AS STRING>>,<<PORT NO AS INT>>);
        BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(s.getOutputStream()));
        BufferedReader br = new BufferedReader(new InputStreamReader(s.getInputStream()));
        //left out a bunch of lines. This is where you should read the lines 
        //of input (with an inner loop) and send stuff back
        s.shutdownInput();
        bw.flush();
        s.shutdownOutput(); 
```

**注意，如果您要处理大页面，这可能会导致问题，因为 BUFFEREDREADER 和 BUFFEREDWRITER 会在您准备好之前填满。**如果这是一个问题，我会研究其他 Reader 和 Writer 类。据我了解，它们非常丰富，应该可以满足您的需求。

# javascript - JS on Google CDN coming down as binary?

> ID：11424261
> 
> 赞同：2
> 
> 时间：2012-07-11T01:21:01.570
> 
> 标签：javascript, jquery, cdn

I've got a site that's using the Google CDN to host the jQuery lib for us, done like this:

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script> 
```

Inconsistently, that file seems to be coming down the line in binary, not text. So when you access the file directly in the browser, you see weird characters, not the text from the JS code.

This of course breaks everything. It only seems to be happening in Firefox, Chrome was fine. I should note this code has been running fine for ages. We've only noticed this problem in the last hour.

I guess its possible Google is having issues at the moment?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T04:29:04.533

您是否尝试过使用后备？
[http://www.paulund.co.uk/fallback-on-local-jquery-if-cdn-fails](http://www.paulund.co.uk/fallback-on-local-jquery-if-cdn-fails)

# ios - Xcode: Command /bin/sh failed with exit code 1

> ID：11424264
> 
> 赞同：1
> 
> 时间：2012-07-11T01:21:28.710
> 
> 标签：ios, xcode, jailbreak

I tried to run Xcode apps on my jailbroken iPod Touch 2G by using JailCoder (which seems to be doing its job) and AppSync on my iPod touch (running iOS v4.2.1, the highest allowed for armv6 I believe) and got this error message for every build.

I just restored my iPod touch about 3 weeks ago and promptly jailbroke it. And it worked fine since except for this. Even blank template Xcode projects, which and runs perfect on both the iPhone and iPad simulators always gets this fatal error and this one exclusively. I even make sure to set the deployment target to 4.2 and make sure armv6 and armv7 are both supported.

```
/bin/sh -c /Users/Zach/Library/Developer/Xcode/DerivedData/test-run-ddvzosbhsvraawfdopekdoyocney/Build/Intermediates/test-run.build/Debug-iphoneos/test-run.build/Script-50524F424C454D533F.sh

iPhone Developer: ambiguous (matches "iPhone Developer" and "iPhone Developer" in /Users/Zach/Library/Keychains/login.keychain)
Command /bin/sh failed with exit code 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:34:38.167

我有一个类似的错误。尝试从`Keychain Access.app`. 如果这没有帮助，则将它们全部删除并手动添加到钥匙串`iPhone Developer.cer`中。`JailCoder.app/Contents/Resources`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T19:19:07.167

我刚刚开始使用 Xcode 5（在 OS X 10.9 上）再次使用 JailCoder，并且有点急于使用它。我最终遇到了同样的错误。

为了解决这个问题，我从 Keychain Access 中删除了 iPhoneDeveloper.crt 并完成了引导补丁（而不是单击“Quick Xcode Patch”然后修补我的 xcodeproj），这实际上让你做了一些重要的事情来让它正常工作。

这肯定是我的疏忽。只要确保您通过引导补丁！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-01T21:10:21.610

如果您是两个开发团队的成员，则会发生此错误。一方面，Xcode 要求您为每个团队安装开发人员资料。另一方面，如果您在目标的“构建设置”中选择“iOS 开发人员”作为“代码签名身份”，不知道应该采用哪个开发人员配置文件，这很困惑。

作为一种解决方法，您可以选择一个具体的开发人员配置文件作为“代码签名身份”，而不是选择“iOS 开发人员”。但是，如果您选择个人资料，您的团队成员会遇到问题。

# android - 如何在 EditText 中居中和左对齐提示文本？

> ID：11424265
> 
> 赞同：3
> 
> 时间：2012-07-11T01:21:34.750
> 
> 标签：android, android-layout

这是我的布局，它很好地使提示居中，但我如何使提示左对齐，边距为 10dip ？，（即我想让它保持垂直居中但也左对齐）

```
 <EditText
                android:id="@+id/mobilePhoneNumber"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:visibility="gone"
                android:inputType="number"
                android:ellipsize="start"
                android:gravity="center"
                android:layout_marginTop="10dip"
                android:hint="@string/lbl_hint_enter_mobile_phone_number"
                android:textSize="14dip"
                android:layout_marginLeft="10dip"
                android:layout_marginRight="10dip"
                android:maxLines="1" /> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-11T01:56:17.630

```
 <EditText
            android:id="@+id/mobilePhoneNumber"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:inputType="number"
            android:ellipsize="start"
            android:gravity="left|center_vertical"
            android:paddingLeft="5dp"
            android:layout_marginTop="10dip"
            android:hint="hello world"
            android:textSize="14dip"
            android:layout_marginLeft="10dip"
            android:layout_marginRight="10dip"
            android:maxLines="1" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T01:56:05.267

您需要填充，而不是边距：

```
android:paddingLeft="10dip"
android:paddingRight="10dip" 
```

如果您不希望水平居中，请将重力设置为“center_vertical”。

# objective-c - iOS - Prevent iPhone Configuration Profile from being deleted OR check to see if it's installed

> ID：11424267
> 
> 赞同：5
> 
> 时间：2012-07-11T01:22:26.563
> 
> 标签：objective-c, ios, cocoa, configuration-files, enterprise

I'm working on an iOS enterprise app that relies on an Configuration Profile being put on the phone. Unfortunately, the user can "cancel" this profile, which really screws with our app.

So I was wondering if **a)** is it possible to prevent a configuration profile from being deleted OR

**b)** is there a way to check to see if a configuration profile is installed already (say, at runtime, then we can just install it again if it's not there)?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T16:02:15.293

*   如果您希望配置文件不被用户篡改/禁用，这是可能的！如果您使用**Apple Configurator**在 Generals 选项卡中构建`.mobileconfig`文件，请选择`security`as `never`. 请注意：一旦配置文件安装在设备上，*除非您恢复设备，否则无法恢复*

*   长话短说，目前还没有记录的方法可以以编程方式调用/安装*配置*`.mobileconfig`文件(到目前为止可用的文档）-如果您确实找到了方法，请告诉我

 ***笔记：**

`.mobileconfig`文件只能通过 Safari / Mail 运行。

这个类似的 SO 讨论可能会有所帮助：[在 iPhone 上安装配置文件 - 以编程方式](https://stackoverflow.com/questions/2338035/installing-a-configuration-profile-on-iphone-programmatically)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-19T11:23:29.803

可以检查是否安装了 .mobileconfig。你需要做的是：

1.  创建 CA（证书颁发机构）并将其导出为 .cer。
2.  使用创建的 CA 和导出证书颁发证书以及 .cer。
3.  使用 Apple Configurator 应用程序在证书区域添加 CA .cer。移动配置文件将具有 CA .cer。
4.  颁发的证书（在第二步）添加到应用程序包。
5.  在步骤 2 中使用安全框架评估 ( **SecTrustEvaluate** ) 颁发的证书。*

# java - if still has need to log exception in callers when called method has log it?

> ID：11424268
> 
> 赞同：0
> 
> 时间：2012-07-11T01:22:30.740
> 
> 标签：java, logging

```
class 1:
public static void TypeOneException2TypeTwoException(TypeOneException exception)
                throws TypeTwoException {
            if (exception == null)
                throw new IllegalArgumentException(
                        "TypeOneException shouldn't be null"); 
            LOG_SERVICE.debug(exception.getMessage(), exception);  //log it

            if (exception instanceof TypeTwoException)
                throw new TypeTwoException(
                        DavServletResponse.SC_METHOD_NOT_ALLOWED,
                        exception.getMessage());

class 2:
public void callerOne(){
            try{

            }catch(TypeOneException exception){
                LOG_SERVICE.debug(exception.getMessage(), exception);  //is still need log it? any benifit?
                TypeOneException2TypeTwoException(exception)
            }

class 3:
public void callerTwo(){
            try{

            }catch(TypeOneException exception){
                LOG_SERVICE.debug(exception.getMessage(), exception); //is still need log it?
                TypeOneException2TypeTwoException(exception)
            }

class 4:
public void callerTwo(){
            try{

            }catch(TypeOneException exception){
                LOG_SERVICE.debug(exception.getMessage(), exception); //is still need log it?
                TypeOneException2TypeTwoException(exception)
            } 
```

as titled. I have logged the error in class1\. if has any need to log it in callers(class2,3,4)? if need, any benifits existed? Thanks in advance. Suppossed need, if the duplicate code existed?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T02:03:31.597

在多个级别进行日志记录没有任何问题。在许多情况下，记录并引发异常的较低级别的调用将用于较大操作的上下文中。因此，它有助于通过在更高级别记录它来为正在发生的事情添加上下文。

请记住，日志记录是可配置的，因此您可以为每个记录器打开/关闭日志记录（通常按类级别隔离）。

# javascript - 我们如何在 spring3 mvc 中处理 get 请求？

> ID：11424270
> 
> 赞同：1
> 
> 时间：2012-07-11T01:22:33.250
> 
> 标签：javascript, spring

在客户端，javascript代码：

```
<script src="api/api.js?v=1.x&key=abjas23456asg" type="text/javascript"></script> 
```

当浏览器遇到这条线时，我猜它会向服务器发送获取请求并获取 api.js 中的内容。

但我想处理这个get请求，并根据参数v和key对内容做一些其他的修剪。

例如：

当密钥无效时，我们只返回一个警报字符串，而不是真正的 api。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:12:36.743

为了做到这一点，你需要首先配置你的 web.xml，它将 .js 的请求重定向到 spring 而不是直接服务。

那么您将需要使用 HandlerInterceptorAdapter 编写请求处理程序来拦截请求并验证关键参数。如果它不可用，则只需推送警报代码，并且不允许通过发送作为 preHandle 的结果的 flase 来处理进一步的请求链。

你可以使用映射静态资源

```
<mvc:resources mapping="/api/**" location="/api-folder/"/> 
```

要为您可以设置的所有资源配置 web.xml

```
<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>*</url-pattern>
</servlet-mapping> 
```

对于 HandlerInterceptor

```
@Component
public class MyHandler extends HandlerInterceptorAdapter {
@Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler)
    throws Exception {
    String key=request.getParameter("key");
            if(invalid) {
              write alert to response 
              return false;
            }else{
                // let spring serve your static content
            } 
}

} 
```

对于 web 上下文 xml

```
<mvc:interceptors>
    <bean class="MyHandler " />
</mvc:interceptors> 
```

# android - how to insert data into sqlite database with edit text, spinner and button? through android coding

> ID：11424271
> 
> 赞同：-1
> 
> 时间：2012-07-11T01:22:34.167
> 
> 标签：android, android-edittext, android-spinner, android-button, sqlite

I have 1 Spinner, 4 Edittext and a Button. The save button saves the information into a SQLite database. Oh, I get "force close" message.

I need help thanks. Below are the codes of 2 classes.

PersonalInfo class

```
public class PersonalInfo extends Activity
{
    Button btnSave, btnBack;
    EditText txtLikes, txtDislikes, txtDate, txtType;
    Spinner nameSpinner;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        /*try{
        String destPath = "/data/data" + getPackageName() +
                "/databases/AnniversaryDB";
        File f = new File(destPath);
        if(!f.exists())
        {
            CopyDB(getBaseContext().getAssets().open("AnniversaryDB"),
                    new FileOutputStream(destPath));
        }
    }catch (FileNotFoundException e)
    {
        e.printStackTrace();
    }catch (IOException e)
    {
        e.printStackTrace();
    }*/

        InfoDBAdapter dbA = new InfoDBAdapter(this);

        // ---add a contact---
        dbA.open();

        long id = dbA.insertContact("Kanak Priya", "24/6/1990", "Birthday", "Painting", "Bungee jumping");
        id = dbA.insertContact("Joanne Liew", "15/8/1990", "Birthday", "Skating", "Yoga");

        dbA.close();

        // ---get all contacts---

        dbA.open();
        Cursor c = dbA.getAllContacts();
        if (c.moveToFirst())
        {
            do
            {
                DisplayContact(c);
            } while (c.moveToNext());
        }
        dbA.close();

        btnSave = (Button) findViewById(R.id.btnSave);
        btnSave.setOnClickListener(new View.OnClickListener()
            {

                @Override
                public void onClick(View v)
                {

                    Spinner nameSpinner = (Spinner) findViewById(R.id.nameSpinner);
                    String NameValue = nameSpinner.getSelectedItem().toString();

                    EditText txtDate = (EditText) findViewById(R.id.txtDate);
                    String DateValue = txtDate.getText().toString();

                    EditText txtType = (EditText) findViewById(R.id.txtType);
                    String TypeValue = txtType.getText().toString();

                    EditText txtLikes = (EditText) findViewById(R.id.txtLikes);
                    String LikesValue = txtLikes.getText().toString();

                    EditText txtDislikes = (EditText) findViewById(R.id.txtDislikes);
                    String DislikesValue = txtDislikes.getText().toString();

                    Toast.makeText(getBaseContext(),
                            "Your info is saved successfully!",
                            Toast.LENGTH_SHORT).show();

                }
            });

        btnBack = (Button) findViewById(R.id.btnMain);
        btnBack.setOnClickListener(new View.OnClickListener()
            {

                @Override
                public void onClick(View v)
                {
                    finish();

                }
            });

        /*
         * //---get a contact--- db.open(); Cursor c = db.getContact(2); if
         * (c.moveToFirst()) DisplayContact(c); else Toast.makeText(this,
         * "No contact found", Toast.LENGTH_LONG).show(); db.close();
         */

        /*
         * //---update contact--- db.open(); if (db.updateContact(1,
         * "Kanak Priya", "24/6/1990", "Birthday", "Painting", "Bungee jumping")) Toast.makeText(this,
         * "Update successful.", Toast.LENGTH_LONG).show(); else
         * Toast.makeText(this, "Update failed.", Toast.LENGTH_LONG).show();
         * db.close();
         */

        /*
         * //---delete a contact--- db.open(); if (db.deleteContact(1))
         * Toast.makeText(this, "Delete successful.", Toast.LENGTH_LONG).show();
         * else Toast.makeText(this, "Delete failed.",
         * Toast.LENGTH_LONG).show(); db.close();
         */

    }// end onCreate()

    /*public void CopyDB(InputStream inputStream,
        OutputStream outputStream)
        throws IOException 
    {
            //---copy 1K bytes at a time---
            byte[] buffer = new byte[1024];
            int length;
            while ((length = inputStream.read(buffer)) > 0) 
            {
                outputStream.write(buffer, 0, length);
            }
            inputStream.close();
            outputStream.close();
    }*/

    public void DisplayContact(Cursor c)
    {
        Toast.makeText(
                this,
                "id: " + c.getString(0) + "\n" + "Name: " + c.getString(1)
                        + "\n" + "Date:  " + c.getString(2) + "\n" + "Type: " + c.getString(3) + "\n" + "Likes: " + c.getString(4)
                       + "\n" + "Dislikes: " + c.getString(5),  Toast.LENGTH_LONG)
                .show();
    }

} 
```

InfoDBAdapter class

```
public class InfoDBAdapter
{
    public static final String KEY_ROWID = "_id";
    public static final String KEY_NAME = "name";
    public static final String KEY_DATE = "date";
    public static final String KEY_TYPE = "type";
    public static final String KEY_LIKES = "likes";
    public static final String KEY_DISLIKES = "dislikes";

    private static final String TAG = "InfoDBAdapter";

    private static final String DATABASE_NAME = "AnniversaryDB";
    private static final String DATABASE_TABLE = "personalInfo";
    private static final int DATABASE_VERSION = 2;

    private static final String DATABASE_CREATE = "create table personalInfo (_id integer primary key autoincrement, "
            + "name text not null, date numeric not null, type text not null" +
            "likes text not null, dislikes text not null);";

    private final Context context;

    private DatabaseHelper DBHelper;
    private SQLiteDatabase db;

    public InfoDBAdapter(Context ctx)
    {
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }

    private static class DatabaseHelper extends SQLiteOpenHelper
    {
        DatabaseHelper(Context context)
        {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db)
        {
            try
            {
                db.execSQL(DATABASE_CREATE);
            } catch (SQLException e)
            {
                e.printStackTrace();
            }
        }// end onCreate()

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
        {
            Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                    + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS personalInfo");
            onCreate(db);
        }// end onUpgrade()

    }// end DatabaseHelper

    // ---opens the database---
        public InfoDBAdapter open() throws SQLException
        {
            db = DBHelper.getWritableDatabase();
            return this;
        }// end open()

        // ---closes the database---
        public void close()
        {
            DBHelper.close();
        }// end close()

        // ---insert a contact into the database---
        public long insertContact(String name, String date, String type, String likes, String dislikes)
        {
            ContentValues values = new ContentValues();
            values.put(KEY_NAME, name);
            values.put(KEY_DATE, date);
            values.put(KEY_TYPE, type);
            values.put(KEY_LIKES, likes);
            values.put(KEY_DISLIKES, dislikes);
            return db.insert(DATABASE_TABLE, null, values);
        }// end insertContact()

        // ---deletes a particular contact---
        public boolean deleteContact(long rowId)
        {
            return db.delete(DATABASE_TABLE, KEY_ROWID + "=" + rowId, null) > 0;
        }// end deleteContact()

        // ---retrieves all the contacts---
        public Cursor getAllContacts()
        {
            return db.query(DATABASE_TABLE, new String[] { KEY_ROWID, KEY_NAME,
                    KEY_DATE, KEY_TYPE, KEY_LIKES, KEY_DISLIKES }, null, null, null, null, null);
        }// end getAllContacts()

        // ---retrieves a particular contact---
        public Cursor getContact(long rowId) throws SQLException
        {
            Cursor mCursor = db.query(true, DATABASE_TABLE, new String[] {
                    KEY_ROWID, KEY_NAME, KEY_DATE, KEY_TYPE, KEY_LIKES, KEY_DISLIKES }, KEY_ROWID + "=" + rowId,
                    null, null, null, null, null);
            if (mCursor != null)
            {
                mCursor.moveToFirst();
            }
            return mCursor;
        }// end getContact()

        // ---updates a contact---
        public boolean updateContact(long rowId, String name, String date, String type, String likes, String dislikes)
        {
            ContentValues args = new ContentValues();
            args.put(KEY_NAME, name);
            args.put(KEY_DATE, date);
            args.put(KEY_TYPE, type);
            args.put(KEY_LIKES, likes);
            args.put(KEY_DISLIKES, dislikes);
            return db.update(DATABASE_TABLE, args, KEY_ROWID + "=" + rowId, null) > 0;
        }// end updateContact()

}//end DBAdapter 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T02:01:04.573

以下是一些需要检查的事项：

1) 确保布局中的每个元素都定义了布局高度和宽度。这些不会给出编译时错误，但会使应用程序崩溃。

```
 android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
```

2）确保在使用之前先检索每个元素：

```
Button btnSave = (Button)findViewById(R.id.someId); 
```

3) 检查检索到的 ui 元素不为空。

if (btnSave == null) System.out.println("这会崩溃");

4) 在调试模式下运行。设置断点。观察值，看看什么是空的。崩溃通常意味着 null 或数组越界。

5）检查您看到致命的日志消息，它是红色的。现在仔细听，点击它下面的一两行，在你的包名称的那一行。像 com.yourcompany.xyx （在您的情况下看起来可能是 main.page），它（eclipse）会将您带到崩溃点。点击android类名对你没有任何好处。只需单击具有您的包名称的红色致命下方的最高点。知道该包名称非常重要。告诉我们这是哪条线。

# ruby-on-rails - Rspec 测试未通过 Michael Hartl 的教程第 10.1.4 节

> ID：11424273
> 
> 赞同：0
> 
> 时间：2012-07-11T01:22:39.420
> 
> 标签：ruby-on-rails, ruby, factory-bot, railstutorial.org, spork

我是 RoR 的新手，正在学习 Hartl rails 教程 (http://ruby.railstutorial.org/)。我被困在第 10.1.4 节的测试中，我不断收到以下错误：

失败：

1) 用户微博关联应该销毁相关的微博失败/错误：FactoryGirl.create(:micropost, user: @user, created_at: 1.day.ago) NoMethodError: undefined method `content=' for #<User:0x007fce7c86b1e8> # ./spec/models/user_spec.rb:147:in`block (3 levels) in '

2）用户微博关联应该有正确的微博以正确的顺序失败/错误：FactoryGirl.create（：micropost，用户：@user，created_at：1.day.ago）NoMethodError：未定义的方法`content=' for #<User:0x007fce7cbd6288> # ./spec/models/user_spec.rb:147:in`块（3级）在'

由于我是一个新手，我的调试能力相当有限。我相信这不是一个大问题，所以我会很感激我能得到的任何帮助，这是我的代码：

USER_SPEC.RB

```
 require 'spec_helper'

    describe User do

      # Before means this code will run before every test is performed  
      before do
        @user = User.new(name: "Example User", email: "user@example.com",
                         password: "foobar", password_confirmation: "foobar")
      end

      subject { @user }

      it { should respond_to(:admin) }
      it { should respond_to(:authenticate) }
      it { should respond_to(:name) }
      it { should respond_to(:email) }
      it { should respond_to(:password_digest) }
      it { should respond_to(:password) }
      it { should respond_to(:password_confirmation) }
      it { should respond_to(:microposts) } 

      it { should be_valid }
      it { should_not be_admin }

      .
      .
      .
      .

      describe "micropost associations" do

        before { @user.save }
        let!(:older_micropost) do
          FactoryGirl.create(:micropost, user: @user, created_at: 1.day.ago)
        end
        let!(:newer_micropost) do
          FactoryGirl.create(:micropost, user: @user, created_at: 1.hour.ago)
        end

        it "should destroy associated microposts" do
          microposts = @user.microposts
          @user.destroy
          microposts.each do |micropost|
            Micropost.find_by_id(micropost.id).should be_nil
          end
        end

        it "should have the right microposts in the right order" do
          @user.microposts.should == [newer_micropost, older_micropost]
        end
      end
    end 
```

用户.RB

```
 class User < ActiveRecord::Base
      attr_accessible :name, :email, :password, :password_confirmation
      has_secure_password
      has_many :microposts, dependent: :destroy

      before_save { self.email.downcase! }
      before_save :create_remember_token

      validates :name, presence: true, length: { maximum: 50 }

      VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
      validates :email, presence: true, format: { with: VALID_EMAIL_REGEX },
                uniqueness: { case_sensitive: false }

      validates :password, presence: true, length: { minimum: 6 }
      validates :password_confirmation, presence: true

      private

        def create_remember_token
          self.remember_token = SecureRandom.urlsafe_base64
        end

    end 
```

MICROPOST_SPEC.RB

```
 require 'spec_helper'

    describe Micropost do

      let(:user) { FactoryGirl.create(:user) }
      before { @micropost = user.microposts.build(content: "Lorem ipsum") }

      subject { @micropost }

      it { should respond_to(:content) }
      it { should respond_to(:user_id) }
      it { should respond_to(:user) }
      its(:user) { should == user }

      it { should be_valid }

      describe "when user_id is not present" do
        before { @micropost.user_id = nil }
        it { should_not be_valid }
      end

      describe "accessible attributes" do
        it "should not allow access to user_id" do
          expect do
            Micropost.new(user_id: user.id)
          end.should raise_error(ActiveModel::MassAssignmentSecurity::Error)
        end    
      end
    end 
```

微邮报

```
 class Micropost < ActiveRecord::Base
      attr_accessible :content
      belongs_to :user

      validates :user_id, presence: true
      default_scope order: 'microposts.created_at DESC'
    end 
```

工厂.RB

```
 FactoryGirl.define do
      factory :user do
        sequence(:name)  { |n| "Person #{n}" }
        sequence(:email) { |n| "person_#{n}@example.com"}   
        password "foobar"
        password_confirmation "foobar"

        factory :admin do
          admin true
        end
      end

      factory :micropost do
        content "Lorem ipsum"
        user
      end
    end 
```

最后是我的 GEMFILE：

```
 source 'https://rubygems.org'

    gem 'rails', '3.2.5'
    gem 'jquery-rails', '2.0.0'
    gem 'bootstrap-sass', '2.0.0'
    gem 'bcrypt-ruby', '3.0.1'
    gem 'faker', '1.0.1'
    gem 'will_paginate', '3.0.3'
    gem 'bootstrap-will_paginate', '0.0.6'
    gem 'hirb'

    group :development, :test do
      gem 'sqlite3', '1.3.5'
      gem 'rspec-rails', '2.10.0'
      gem 'guard-rspec', '0.5.5'
    end

    # Gems used only for assets and not required
    # in production environments by default.
    group :assets do
      gem 'sass-rails',   '3.2.4'
      gem 'coffee-rails', '3.2.2'
      gem 'uglifier', '1.2.3'
    end

    group :test do
      gem 'capybara', '1.1.2'
      gem 'factory_girl_rails', '1.4.0'
      gem 'cucumber-rails', '1.2.1', :require => false
      gem 'database_cleaner', '0.7.0'
      gem 'guard-spork', '0.3.2'  
      gem 'spork', '0.9.0'
      gem 'launchy', '2.1.0'
      gem 'rb-fsevent', '0.9.1', :require => false
      gem 'growl', '1.0.3'
    end

    group :production do
      gem 'pg', '0.12.2'
    end 
```

感谢您为我提供的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T23:23:18.977

由于您在[第 10.1.4 节](http://ruby.railstutorial.org/book/ruby-on-rails-tutorial#sec%3aordering_and_dependency)`:micropost`中将工厂添加到**spec/factories.rb**中，因此您在该文件中添加的内容将在您重新启动 Spork 时反映出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T23:58:37.973

好像在您的 USER_SPEC.RB 中您丢失了

```
it { should respond_to(:remember_token) } 
```

我的看起来像这样，它可以工作，测试通过

```
subject { @user }
it { should respond_to(:admin) }
it { should respond_to(:authenticate) }
it { should respond_to(:name) }
it { should respond_to(:email) }
it { should respond_to(:password_digest) }
it { should respond_to(:password) }
it { should respond_to(:password_confirmation) }
it { should respond_to(:remember_token) }
it { should respond_to(:microposts) } 
```

# android - 我应该如何有效地在服务器和 Android 手机之间发送 JSON 数据？

> ID：11424274
> 
> 赞同：0
> 
> 时间：2012-07-11T01:22:57.053
> 
> 标签：android, sockets, tcp, battery

我正在为 android 制作一个应用程序，它与服务器通信以通过发送 JSON 字符串来控制它。在他们通过套接字进行通信并且连接保持不变的那一刻，客户端和服务器都保持连接等待消息。

目前我这样做是为了在服务器和客户端上接收数据。

```
while ((input = in.readLine()) != null) {
    System.out.println(input);
} 
```

这是对电池寿命的压力吗？如果在服务器上运行的服务器更像是一个 Web 服务器会更好 - 这样您连接，获取数据然后断开连接。

问题是，我还需要用于聊天之类的流数据。像这样的设置不能很好地工作。

基本上，保持与服务器的 tcp 套接字连接打开会对电池造成巨大压力吗？并且......对于聊天等流数据，当设备进入睡眠状态时 - 最好断开连接并在服务器上保持数据缓冲区准备好在重新连接时发送给客户端？

更基本上，在不耗尽电池的情况下发送流数据的最佳方式是什么？

编辑：该应用程序是游戏服务器的包装器来控制它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T01:25:54.433

对于聊天，我推荐使用 XMPP 协议。您需要设置一个服务器，然后在您的应用程序中使用类似[Smack XMPP 客户端库](http://www.igniterealtime.org/projects/smack/)的东西。

# objective-c - UITableView 不调用 numberOfRowsInSection 也不 cellForRowAtIndexPath

> ID：11424283
> 
> 赞同：2
> 
> 时间：2012-07-11T01:24:34.577
> 
> 标签：objective-c, ios, xcode

我不知道该怎么想...
我将主视图设置为包含`UITableView`. （我也在那个视图上使用 UIPickerView 。）

我将其定义为符合协议：

```
UIPickerViewDelegate,
UIPickerViewDataSource,
UITableViewDataSource,
UITableViewDelegate 
```

公布了我认为的h中的两种方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section; 
```

在 m 中实现它们：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell=[[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"cell"] autorelease];
    cell.textLabel.text = [NSString stringWithFormat:@"Test %d",indexPath];
    return cell;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 5;
} 
```

我确实在我的`viewDidLoad`：

```
searchTableView = [[UITableView alloc] init];
[searchTableView setFrame:CGRectMake(searchBar.frame.origin.x+10, 50, searchBar.frame.size.width-20, 300)];
searchTableView.delegate=self; 
```

然而，从未调用过 numberOfRowsInSection 或 cellForRowAtIndexPath ！

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T01:26:05.090

设置数据源：

```
[searchTableView setDataSource:self]; 
```

# php - 插入多条记录

> ID：11424284
> 
> 赞同：1
> 
> 时间：2012-07-11T01:25:14.277
> 
> 标签：php, mysql, tags

我有一个带有逗号分隔的标签名称的字符串，可以插入到 MySQL 表中，例如：

```
$tags = " 'pigs','dogs','cats' " 
```

我有一个名为**tags的 mySQL 表，****其中**包含tag_id和**tag_name**。

 **我想将每个标签插入表中。这是否可以在一个使用我拥有的字符串的 INSERT 查询中实现，还是我必须使用一组标签名称运行一个循环？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T01:28:59.303

你可以这样做：

```
$sql = "INSERT INTO `tags` (`tag_name`) VALUES(". implode('),(', explode(',', trim($tags))) . ")"; 
```

如果你要回显，`$sql`你应该得到：

```
INSERT INTO `tags` (`tag_name`) VALUES('pigs'),('dogs'),('cats') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T01:54:39.113

这是代码

```
<?php
$tags = " 'pigs','dogs','cats' ";
$ary_tags = explode(",", trim($tags));
$sql = "INSERT INTO `tags` (`tag_name`) VALUES";
foreach($ary_tags as $t) {
        $sql .= "({$t}),";
}
$sql =  rtrim($sql, ',');
$sql .= ';';
echo $sql;
?> 
```**

# javascript - 使用 javascript 显示随机 div

> ID：11424285
> 
> 赞同：1
> 
> 时间：2012-07-11T01:25:22.293
> 
> 标签：javascript, html

所以我想显示随机 div，我在这里找到了这个 stackoverflow 解决方案：[Showing random divs using Jquery](https://stackoverflow.com/questions/4205166/showing-random-divs-using-jquery)

正确答案使用以下代码：http: [//jsfiddle.net/nick_craver/RJMhT/](http://jsfiddle.net/nick_craver/RJMhT/)

所以我想做上面的事情，但是为了我的生活，我不知道该怎么做。

我以为这很简单

```
<html>
<head>
<script type="text/javascript">
var divs = $("div.Image").get().sort(function() {
   return Math.round(Math.random())-0.5; //random so we get the right +/- combo
  }).slice(0,4)
$(divs).appendTo(divs[0].parentNode).show();​​
</script>
<style type="text/css">
div.Image { 
  display: none;
}​
</style>
</head>
<body>
  <div class="Image"><img src="/image1.jpg">1</div>
  <div class="Image"><img src="/image2.jpg">2</div>
  <div class="Image"><img src="/image3.jpg">3</div>
  <div class="Image"><img src="/image4.jpg">4</div>
  <div class="Image"><img src="/image5.jpg">5</div>
  <div class="Image"><img src="/image6.jpg">6</div>
  <div class="Image"><img src="/image7.jpg">7</div>​
</body>
</html> 
```

但显然不是，因为我的屏幕上没有显示任何内容。有人可以帮助我吗？对于我认为对 JavaScript 知之甚少的人来说应该真的很容易。

谢谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T01:33:20.973

您在解析页面正文的 HTML 代码之前运行脚本，因此元素还不存在。

将您的代码放在`ready`页面事件中：

```
$(document).ready(function(){
  // your Javascript code goes here
}); 
```

正如 Conner 所示，您还缺少 jQuery 库的包含。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T01:31:23.887

您需要导入 jQuery 库。

添加

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> 
```

`<head>`在您的 javascript 代码之前添加到您的标签。

# php - jQuery 选择动态内容 PHP

> ID：11424291
> 
> 赞同：1
> 
> 时间：2012-07-11T01:25:41.670
> 
> 标签：php, jquery, jquery-ui

我正在用 PHP 创建一系列列表。然后我尝试使用 jQuery 对列表进行排序`.sortable()`。如果我只有一个列表，我有点工作。但是，如果我有多个列表，则 jQuery 会遍历这两个列表并且只记住最后一个列表。我知道这`.each()`是如何造成的，我只是不知道如何解决它。

**HTML**

```
<div class="list">
  <ul id="sortList_1">
    <li class="item_1" id="item_111">Item 1</li>
    <li class="item_2" id="item_222">Item 2</li>
    <li class="item_3" id="item_333">Item 3</li>
  </ul>
</div>

    <div class="list">
      <ul id="sortList_2">
        <li class="item_1" id="item_444">Item 1</li>
        <li class="item_2" id="item_555">Item 2</li>
        <li class="item_3" id="item_666">Item 3</li>
      </ul>
    </div> 
```

**jQuery**

```
$(".list").each(
        function(e) {
        num = e + 1;
        $("#sortList_" + num).sortable(
            {stop:function(i) {
                serial = $("#sortList_"  + num).sortable("serialize");
                $.ajax({
                    type: "GET",
                    url: "writeDB.php",
                    data: serial
                });
            }
        });    
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T01:40:14.610

当我运行您的代码时，`.sortable('serialize')`返回`null`所有列表。根据[文档](http://jqueryui.com/demos/sortable/#method-serialize)：

> 如果 serialize 返回一个空字符串，请确保 id 属性包含下划线。它们必须采用以下形式：“set_number” 例如，具有 id 属性 foo_1、foo_5、foo_2 的 3 元素列表将序列化为 foo[]=1&foo[]=5&foo[]=2。您可以使用下划线、等号或连字符来分隔集合和数字。例如 foo=1 或 foo-1 或 foo_1 都序列化为 foo[]=1。

因此，您可以修改每个项目以具有`id`格式的属性

```
<li class="item_1" id="item_444">Item 1</li> 
```

你的脚本应该可以正常工作。您可能会考虑将`item_`前缀更改为引用项目所在列表的内容*（即`list1_...`vs. `list2_...`）*`data` ，或者在 ajax 调用中指定序列化数据的列表。

```
data: { serial: serial, list_id: $(this).attr('id') } 
```

**编辑：**您也可以稍微清理一下代码：http: [//jsfiddle.net/u425C/](http://jsfiddle.net/u425C/)

# java - 输入一个数字然后反转它

> ID：11424294
> 
> 赞同：2
> 
> 时间：2012-07-11T01:25:57.353
> 
> 标签：java, string, numbers, reverse

好的，所以我编写了一个程序，要求用户输入一个数字，然后将其反转。我成功了，但是程序不会反转以 0 结尾的数字。例如，如果我输入 1234，它将打印出 4321，但是如果我输入 1200，它将仅输出 21。我尝试转换要成为输出的数字成字符串。请帮助我了解我在哪里做错了。请记住我是这方面的初学者:)。下面是我的代码。

```
import java.util.*;
public class ReverseNumber
{
    public static void main (String [] args)
    {
        Scanner n = new Scanner(System.in);
        int num;
        System.out.println("Please enter the number");
        num = n.nextInt();
        int temp = 0;
        int reverse = 0;
        String str = "";
        System.out.println("The number before getting reversed " + num);
        while (num != 0)
        {
            temp = num % 10;
            reverse = reverse*10 + temp;
            num = num/10;
            str = Integer.toString(reverse);
        }
        //String str = Integer.toString(reverse);
        System.out.println("The reversed number is " + str);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T01:29:28.960

您将反转的数字存储为 int。1200 的倒数是 0021，但这只是 21 作为 int。您可以通过将每个数字分别转换为字符串来修复它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T01:33:40.383

问题是您将反转的值计算为数字，当涉及到数字时，0021 和 21 之间没有区别。您想要的是在反转时直接打印反转的值，或者将其构建为字符串，然后将其打印出来。

前一种方法是这样的：

```
System.out.print("The reversed number is ");
while (num != 0)
{
    System.out.print(num % 10);
    num = num / 10;
}
System.out.println(); 
```

后一种方法是这样的：

```
String reverse = "";
while (num != 0)
{
    reverse = reverse + Integer.toString(reverse);
    num = num / 10;
}
System.out.println("The reversed number is " + reverse); 
```

如果您需要对反转值做进一步的工作，后一种方法很有用。但是，由于超出此问题范围的原因，它不是最理想的。`StringBuilder`如果您研究何时更好地使用而不是字符串连接，您可以获得更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T04:16:33.843

我实际上发现这种方式非常有趣，因为这不是我通常会反转的方式。只是想提供另一种可以反转它的方式，或者在这种情况下，反转任何字符串。

```
public static void main()
{
    Scanner n = new Scanner(System.in);
    System.out.print("Please enter the number:");
    int num = n.nextInt();
    System.out.println("The number before getting reversed is " + num);

    String sNum = Integer.toString(num);
    String sNumFinal = "";
    for(int i = sNum.length()-1; i >= 0; i--)
    {
        sNumFinal += sNum.charAt(i);
    }
    System.out.print("The reversed number is " + sNumFinal);
} 
```

如果你想更进一步，这样你可以输入“00234”并让它输出“43200”（因为否则它会去掉前导零），你可以这样做：

```
public static void main()
    {
        Scanner n = new Scanner(System.in);
        System.out.print("Please enter the number:");
        String num = n.next(); // Make it recieve a String instead of int--the only problem being that the user can enter characters and it will accept them.
        System.out.println("The number before getting reversed is " + num);

        //String sNum = Integer.toString(num);
        String sNumFinal = "";
        for(int i = num.length()-1; i >= 0; i--)
        {
            sNumFinal += num.charAt(i);
        }
        System.out.print("The reversed number is " + sNumFinal);
    } 
```

当然，如果你想要它作为一个 int，就做`Integer.parseInt(sNumFinal);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T01:37:45.617

去掉两个零的原因是因为将 temp 和 reverse 变量声明为整数。

如果您将一个值分配给左侧为零的整数，例如 000001 或 002，它将被删除，并在我的示例中变为 1 或 2。

因此，在您的示例中，1200 变成了类似 0021 的东西，但是由于您声明的变量是整数，所以它只变成了 21。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-24T17:38:17.097

```
 import java.util.Scanner;

 public class Reverse {
  public static void main(String args[]){

    int input,output=0;
    Scanner in=new Scanner(System.in);
    System.out.println("Enter a number for check.");
    input=in.nextInt();

    while (input!=0)
    {
    output=output*10;
    output=output+input%10;
    input=input/10;
    }
    System.out.println(output);
    in.close();
} 
```

}

# c# - 在 C# 中更改日期格式

> ID：11424297
> 
> 赞同：0
> 
> 时间：2012-07-11T01:26:33.560
> 
> 标签：c#, visual-studio-2008, datetime, datagridview

如何更改 WinForm 应用程序中 DataGridView 单元格中的日期格式？该单元格的源格式是“YYYY-MM-DD”，我想将其更改为“DD/MM/YYYY”。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T01:32:45.013

通过更改默认单元格样式。

```
this.DataGridView1.Columns[0].DefaultCellStyle.Format = "dd/MM/yyyy" 
```

[http://msdn.microsoft.com/en-us/library/f9x2790s.aspx](http://msdn.microsoft.com/en-us/library/f9x2790s.aspx)

# windows-phone-7.1 - WP7墓碑记忆保存

> ID：11424300
> 
> 赞同：2
> 
> 时间：2012-07-11T01:27:02.173
> 
> 标签：windows-phone-7.1

因此，对于我的 windows phone 7 应用程序，当我第一次调试应用程序时，我试图在他们“墓碑”我的应用程序后保存用户输入，但我在文本框中输入了一些数据并墓碑了我的应用程序后，我没有'没有得到 KeyNotFoundException。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:03:55.833

KeyNotFoundException means that you are trying to get some data from data collection by key, and that key/value pair does not exist:

[http://msdn.microsoft.com/en-us/library/system.collections.generic.keynotfoundexception.aspx](http://msdn.microsoft.com/en-us/library/system.collections.generic.keynotfoundexception.aspx)

Before trying to access the date using key, first check if that key even exists using ContainsKey method:

[http://msdn.microsoft.com/en-us/library/kw5aaea4](http://msdn.microsoft.com/en-us/library/kw5aaea4)

# c# - 将两个属性反序列化为一个 .NET 属性

> ID：11424301
> 
> 赞同：1
> 
> 时间：2012-07-11T01:27:04.060
> 
> 标签：c#, json.net, deserialization

我有这样的json响应

```
{ latitude: 30.4848, longitude: -70.5484 } 
```

现在我这样做是为了用 newtonsoft JSON.NET 反序列化

```
JsonConvert.DeserializeObject<Test>(json); 
```

并反序列化成这个

```
[JsonObject(MemberSerialization.OptIn)]
public class Test
{
    [JsonProperty(PropertyName = "longitude")]
    public double Longitude{ get; set; }

    [JsonProperty(PropertyName = "latitude")]
    public double Latitude { get; set; }
} 
```

我想将纬度和经度反序列化为 GeoCoordinate 对象的经度和纬度属性

```
public class Test
{
    public GeoCoordinate Location{ get; set; }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T01:33:41.830

这不是你问的，但你可以这样`Location`定义

```
[JsonObject(MemberSerialization.OptIn)]
public class Test
{
    private GeoCoordindate _location;

    [JsonProperty(PropertyName = "longitude")]
    public double Longitude{ get; set; }

    [JsonProperty(PropertyName = "latitude")]
    public double Latitude { get; set; }

    public GeoCoordinate Location
    {
        get
        {
            if (_location == null)
                _location = new GeoCoordinate(Latitude, Longitude);

            return _location;
        }
    }
} 
```

# sql - SQL连接两个表

> ID：11424304
> 
> 赞同：-1
> 
> 时间：2012-07-11T01:27:42.457
> 
> 标签：sql, database

我有一个关于如何加入两个表的问题，我有以下表

```
ITEM_TAB
--------------------------------------------------
ItemID, Qty, Price, EleCode, WomCode, MenCode
--------------------------------------------------

CODES_TAB
--------------------------------------------------
CODE     |   TYPE             |        DESCRIPTION
--------------------------------------------------
AA       |     ELECTRONICS    |          ...
AA       |    WOMEN           |           ...
AA       |   MENS             |          ...
BB       |    GROCERY         |           ....
BB       |     DELI           |
-------------------------------------------------- 
```

项目表只包含代码（EleCode 属于 TYPE Electronics，WomCode 属于 TYPE Womens 等），CODES 是查找表。这两者没有任何关联。在单个查询中，我需要如下检索。

ItemID、数量、价格、EleCode、Desction、WomCode、描述、MenCode、描述。

```
select i.itemId
    , i.Qty
    , i.price
    , i.EleCode
    , (select description from code where code='AA' and TYPE='ELECTRONICS')
    , i.WomCode
    , (select description from code where code='AA' and TYPE='WOMEN')
    , i.MenCode
    , (select description from code where code='AA' and TYPE='MENS') 
from ITEM 
```

你能帮我制定这个查询吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T01:32:05.997

```
select ItemID, Qty, Price, EleCode, e.description, womcode , w.description, mencode, m.description
from item_tab
left join codes_tab e 
on (eleCode = e.code)
left join codes_tab w 
on (womcode = w.code)
left join codes_tab m
on (mencode = m.code); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T01:40:25.703

我的人用这个模式帮了你一个大忙，不是吗？

就像是

```
Select ItemId,Qty,Price,Elecode,e.description,womcode,w.description,mencode,m.description
left join codes_tab e On e.Type='ELECTRICAL' and e.code = elecode
left join codes_tab w On w.Type='WOMENS' and w.code = womcode
left join codes_tab m On m.Type='MENS' and m.code = mencode 
```

# python - 如何连接到远程couchdb数据库

> ID：11424305
> 
> 赞同：3
> 
> 时间：2012-07-11T01:27:50.973
> 
> 标签：python, couchdb

我是 couchdb 的新手。我在服务器中运行 python 代码。此代码将数据存储在 couchdb 数据库中。我希望它将数据库存储在我的计算机中。我的代码很简单，如下：

```
server = Server('http://125.151.58.68:5984/')
db = server['dnsrecords'] 
```

当我运行此代码时，我收到以下错误消息：

```
File "dblookup.py", line 12, in main
    db = server['dnsrecords']
  File "/usr/local/lib/python2.6/dist-packages/CouchDB-0.8-py2.6.egg/couchdb/client.py", line 137, in __getitem__
  File "/usr/local/lib/python2.6/dist-packages/CouchDB-0.8-py2.6.egg/couchdb/http.py", line 377, in head
  File "/usr/local/lib/python2.6/dist-packages/CouchDB-0.8-py2.6.egg/couchdb/http.py", line 419, in _request
  File "/usr/local/lib/python2.6/dist-packages/CouchDB-0.8-py2.6.egg/couchdb/http.py", line 239, in request
  File "/usr/local/lib/python2.6/dist-packages/CouchDB-0.8-py2.6.egg/couchdb/http.py", line 205, in _try_request_with_retries

socket.error: [Errno 111] Connection refused 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T03:23:48.113

运行`couchdb -c`以查看您的配置文件在哪里，然后编辑`local.ini`配置文件并取消注释并将`bind_address`值更改为`0.0.0.0`，使其绑定到您的所有 IP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-19T04:31:38.167

就我而言，使用 3.1.1 版本，修改 local.ini 文件和 default.ini 没有任何区别。我在文件夹**/opt/couchdb/etc/default.d**中找到了一个名为**10-bind-address.ini**的文件，将 127.0.0.1 更改为 0.0.0.0 并且它有效。

# svn - SVN - 如何将 SVN 1.7.1 升级到 SVN 1.7.5

> ID：11424308
> 
> 赞同：0
> 
> 时间：2012-07-11T01:28:16.047
> 
> 标签：svn, upgrade

我在 Solaris 版本 10 服务器中有 SVN 版本 1.7.1，在客户端中有 Tortoise SVN 1.7.1。我想使用预打包的二进制文件将服务器升级到 SVN 1.7.5。升级现有服务器安装的发行说明说只需在旧的库和二进制文件之上安装最新的库和二进制文件。我从 CollabNet 下载了二进制文件，但是我不知道 Solaris 10 服务器中的 SVN 库和二进制文件在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T06:58:56.263

正如您在[Collabnet 文档](http://www.collab.net/lightbox/download_info/1627/617)中看到的：

> CollabNet Subversion 安装到 /opt/CollabNet_Subversion

# flash-cs5.5 - 在 Flash Pro CS5.5 中将 swf 转换为视频

> ID：11424310
> 
> 赞同：1
> 
> 时间：2012-07-11T01:28:46.587
> 
> 标签：flash-cs5.5

我已经在网上和这里搜索了答案，但到目前为止，链接已经失效，操作方法不再适用于我拥有的版本，或者没有答案。

我有一个带有完整声音和脚本的 swf 动画，我想将其转换为视频或 flv。出于某种原因，我以某种方式在时间轴上发布的网站（时间已关闭，声音不再与文本正确匹配）所以我认为视频会更好。

我尝试使用**文件>导出>导出到电影**来解决这个问题。我试图导出为 AVI。当它缩小到 300x400 时，它工作得很好（尽管它看起来完全是废话）。但是，当我以全尺寸导出时，使用全彩不压缩，我得到了这个。

我不知道该怎么办。它带有穿过它的线条和灰度倾斜。VLC 播放器也是唯一可以运行它的东西。WMP 因错误而死，说它是无效或损坏的格式。有趣的是，视频的缩略图正是它应该的样子。

我不知道该怎么办。将其转换为 .flv 就可以了。我有一个视频转换器。我只是无法将其正确转换为 flv 甚至电影类型。

为什么它对我的视频这样做？有没有更好的东西可以用来转换？有没有不会在上面贴上巨大水印的好方法？

[形象被彻底搞砸了。](http://i.stack.imgur.com/N4e01.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:55:15.023

**Flabaco**是一个在线**SWF 到视频**转换器。回答您的问题：它是免费的，不会强加横幅或水印。

> 我有一个带有完整声音和脚本的 swf 动画，我想将其转换为视频或 flv。

Flabaco 转换脚本内容。它保留了帧速率 (fps) 和颜色。它能够生成专业品质的高清内容。

它不会转换声音。尽管如此，转换后的质量还是不错的，您可以通过使用其他视频工具为转换后的视频添加声音来获得。

您可以在此处使用在线转换器应用程序：[www.Flash-Banner-Converter.com](http://www.flash-banner-converter.com)

PS：StackOverflow 上有一些与您的问题相关的旧帖子。只需搜索 SWF 到视频/Flabaco。

嘉约，

FLABACO ( `FLA`sh nner `BA`nverter `CO`)

# android - 在 Android 客户端中 tcp 连接有点麻烦

> ID：11424320
> 
> 赞同：0
> 
> 时间：2012-07-11T01:29:51.113
> 
> 标签：android, login, tcp, client

这可能是我的应用程序的一个复杂问题，但我会尽我所能准确地描述它。

我正在制作一个 Android 客户端并使用其他人在工作中交给我的几个帮助类。帮助程序 Android 类称为 TcpClient.java 和 PVDCAndroidClient.java。PVDCAndroidClient.java 利用了 TcpCLient，使用 tcpCLient 对象通过 serverIP 和端口进行连接。

这是 PVDCAndroidClient.java：

```
 public class PVDCAndroidClient {

    // constants
    public static final String DEFAULT_LOGIN_URI = "http://me.net:8000/";

    private TcpClient tcpClient = null;
    private UdpClient udpClient = null;
    private boolean connected = false;
    private boolean loggedin = false;
    private static SimpleDateFormat sdf;
    private String loginURI = DEFAULT_LOGIN_URI;
    private int getUserNumber;
    TcpMessageListener listener = null;

    /**
     * Connects to proxy server, blocks until complete or timeout
     * @param serverIP
     * @param port
     */
    public void connect(String serverIP, int port)
    {
        try
          {
            if(serverIP.length() != 0 && port != 0)
            {
              tcpClient = new TcpClient();

              tcpClient.addTcpListener(listener);
              tcpClient.connect(serverIP, port);

            }
          }
        catch(Exception e)
        {
            e.printStackTrace();
            Log.d("Could not connect to server, possbile timeout...", "error");
        }

    }

    ///// Make login function a blocking call

    // Default login, use last location as login location
    public boolean login(String fName, String lName, String password)
    {
        return this.login(fName, lName, password, "last location");
    }

    public boolean login(String fName, String lName, String password, String region)
    {
        return this.login(fName, lName, password, "last location", 128, 128, 20);
    }

    public boolean login(String fName, String lName, String password, String region, int loginX, int loginY, int loginZ)
    {            sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSZ", Locale.US);
                 sdf.setTimeZone(TimeZone.getTimeZone("UTC"));

        // Check passed values
            // x, y and z should be between [0, 256]
            // strings should not be null or empty(except lName which can be empty)
        if((loginX >= 0 && loginX <= 256) && (loginY >=0 && loginY <= 256) && (loginZ >= 0 && loginZ <= 256))
        {
            if(fName.length() != 0 && fName != null)
            {

                // Construct packet xml structure

                // Send request and wait until reply or timeout

                // return false if timeout (or throw exception?)
                // if not timeout, read result packet and determine return value

                // getUserNumber = tcpClient.getUserNum();

                StringWriter stringWriter = new StringWriter();

                XmlSerializer serializer = Xml.newSerializer();

                try {

                    serializer.setOutput(stringWriter);

                    // Indentation is not required, but helps with reading
                    serializer.setFeature("http://xmlpull.org/v1/doc/features.html#indent-output", true);

                    // TODO: Remove hardcoding of strings, make either constants or place in strings.xml
                    // TODO: Move the header construction to other method as it is fairly constant other than request num and no need to repeat that much code
                    serializer.startTag("", "pvdc_pkt");

                        serializer.startTag("", "pvdc_header");

                            // TODO: replace this with a string unique to the system
                            serializer.startTag("", "ID");
                                serializer.text("838393djdjdjd");
                            serializer.endTag("", "ID");

                            // TODO: replace this with actual user number from server
                            serializer.startTag("", "user_num");
                                serializer.text("22");//get userNum from above
                            serializer.endTag("", "user_num");

                            // TODO: add a request number counter to increment this on each request
                            serializer.startTag("", "request_num");
                                serializer.text("1");
                            serializer.endTag("", "request_num");

                            serializer.startTag("", "DateTime");
                                serializer.text(sdf.toString()); //utc time variable.
                            serializer.endTag("", "DateTime");

                        serializer.endTag("", "pvdc_header");

                        serializer.startTag("", "pvdc_content");
                            serializer.attribute("", "type", "requestlogin");

                            serializer.startTag("", "name");
                                serializer.attribute("", "fname", fName);
                                serializer.attribute("", "lname", lName);
                            serializer.endTag("", "name");

                            serializer.startTag("", "password");
                                serializer.text(password);
                            serializer.endTag("", "password");

                            serializer.startTag("", "server");
                                serializer.text(this.loginURI);
                            serializer.endTag("", "server");

                            serializer.startTag("", "location");
                                serializer.attribute("", "region", region);
                                serializer.text(loginX + ";" + loginY +";" + loginZ);
                            serializer.endTag("", "location");

                        serializer.endTag("", "pvdc_content");

                    serializer.endTag("", "pvdc_pkt");

                    // Finish writing
                    serializer.endDocument();
                    // write xml data out
                    serializer.flush();

                    // 
                    sendLogin(stringWriter);

                } catch (Exception e) {
                    Log.e("Exception", "error occurred while creating xml file");
                    return false;
                }
                // Print out xml for debugging
                Log.d("PVDCAndroidClient Login", stringWriter.toString().trim());

            }
            else
            {
                Log.d("Error in name checking", "fName either blank or null");
            }

         }
        else
        {
            Log.d("login coordinates X,Y, or Z not between 0-256", "Coordinates Error");
        }

        return true;
       }

    // moveString should contain the properly formatted movement command(s)[see above move request description]
    public void sendLogin(StringWriter stringWriter)
    {
        tcpClient.sendMessage(stringWriter.toString());
    }
} 
```

这是实际的 TcpClient.java：

```
 public class TcpClient {

    public interface TcpMessageListener{

        public void onMessage(TcpClient client, String message);
    }

    private Socket socket = null;
    private PrintWriter out = null;
    private BufferedReader in = null;
    private Thread listenThread = null;
    private boolean listening = false;
    private int userNum = -1;
    private List<TcpMessageListener> listeners = new ArrayList<TcpMessageListener>();

    public int getUserNum()
    {
        return this.userNum;
    }

    public TcpClient() {

    }

    public void addTcpListener(TcpMessageListener listener)
    {
        synchronized(this.listeners)
        {
            this.listeners.add(listener);
        }
    }

    public void removeTcpListener(TcpMessageListener listener)
    {
        synchronized(this.listeners)
        {
            this.listeners.remove(listener);
        }
    }

    public boolean connect(String serverIpOrHost, int port) {
        try {
            socket = new Socket(serverIpOrHost, port);
            out = new PrintWriter(socket.getOutputStream(), true);
            in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
            this.listenThread = new Thread(new Runnable(){

                public void run() {
                    int charsRead = 0;
                    char[] buff = new char[4096];
                    while(listening && charsRead >= 0)
                    {
                        try {
                            charsRead = in.read(buff);
                            if(charsRead > 0)
                            {
                                Log.d("TCPClient",new String(buff).trim());
                                String input = new String(buff).trim();
                                synchronized(listeners)
                                {
                                    for(TcpMessageListener l : listeners){
                                        l.onMessage(TcpClient.this, input);
                                    }
                                }

                                if (input.toLowerCase().contains("<user_num>")){
                                    int index = input.toLowerCase().indexOf("<user_num>");
                                    index += "<user_num>".length();
                                    int index2 = input.toLowerCase().indexOf("</user_num>");
                                    userNum = Integer.parseInt(input.substring(index,  index2));

                                }
                            }
                        } catch (IOException e) {
                            Log.e("TCPClient", "IOException while reading input stream");
                            listening = false;
                        }
                    }
                }

            });

            this.listening = true;
            this.listenThread.setDaemon(true);
            this.listenThread.start();

        } catch (UnknownHostException e) {
            System.err.println("Don't know about host");
            return false;
        } catch (IOException e) {
            System.err.println("Couldn't get I/O for the connection");
            return false;
        } catch (Exception e) {
            System.err.println(e.getMessage().toString());
            return false;
        }
        return true;
    }

    public void sendMessage(String msg) {
        if(out != null)
        {
            out.println(msg);
            out.flush();
        }
    }

    public void disconnect() {
        try {
            if(out != null){
                out.close();
                out = null;
            }
            if(in != null){
                in.close();
                in = null;
            }
            if (socket != null) {
                socket.close();
                socket = null;
            }
            if(this.listenThread != null){
                this.listening = false;
                this.listenThread.interrupt();
            }
            this.userNum = -1;
        } catch (IOException ioe) {
            System.err.println("I/O error in closing connection.");
        }
    }
} 
```

最后，这是我今天一直在编码的内容，但似乎无法使其正常工作。我没有得到任何明显的异常，只是 Logcat 上的警告，上面写着“无法获得连接的 I/O”。

```
 public class AndroidClientCompnt extends Activity {

    private TcpClient myTcpClient = null;
    private UdpClient udpClient;
    private static final String IP_ADDRESS_SHARED_PREFS = "ipAddressPref";
    private static final String PORT_SHARED_PREFS = "portNumberPref";
    private String encryptPassLoginActivity;
    private String getIpAddressSharedPrefs;
    private String getPassword, getName, getRegionSelect, getGridSelect;
    private String fName, lName;
    private SharedPreferences settings;
    private boolean resultCheck = false;
    private int portNum;
    PVDCAndroidClient client;
    private String name;
    private CharSequence[] getView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // setContentView(R.layout.main);

        Intent intent = getIntent();
        // getting object's properties from LoginActivity class.

        getName = intent.getStringExtra("name");
        getPassword = intent.getStringExtra("password");
        getRegionSelect = intent.getStringExtra("regionSelect");
        getGridSelect = intent.getStringExtra("gridSelect");

        Log.d("VARIABLES", "getName = " + getName + "getPassword" + getPassword
                + "getRegionSelect = " + getRegionSelect + ".");
        setResult(Activity.RESULT_CANCELED);

        client = new PVDCAndroidClient();
    }

    @Override
    protected void onStart() {
        super.onStart();

        // Take care of getting user's login information:

        // grid selected as well? sometime?

        settings = PreferenceManager.getDefaultSharedPreferences(this);

        getIpAddressSharedPrefs = settings.getString(IP_ADDRESS_SHARED_PREFS,
                "");
        portNum = Integer.parseInt(settings.getString(PORT_SHARED_PREFS, ""));
        Log.d("SHARED" + getIpAddressSharedPrefs + "port " + portNum, "");

        if (getIpAddressSharedPrefs.length() != 0 && portNum != 0) {

            try {
                // first connect attempt.

                client.connect(getIpAddressSharedPrefs, portNum);
                resultCheck = client.isConnected();

                // here is where I want to call Async to do login
                // or do whatever else.

                UploadTask task = new UploadTask();
                task.execute();

            } catch (Exception e) {
                Toast.makeText(getApplicationContext(), "Could not connect.",
                        Toast.LENGTH_LONG).show();
                e.printStackTrace();
            }

        } else {
            Toast.makeText(getApplicationContext(),
                    "Ip preference and port blank", Toast.LENGTH_LONG).show();
        }

        finish();
    }

    private class UploadTask extends AsyncTask<String, Integer, Void> {
        @Override
        protected void onPreExecute() {
            Toast.makeText(getApplicationContext(), "Loading...",
                    Toast.LENGTH_LONG).show();
        }

        @Override
        protected Void doInBackground(String... names) {

            // encrypting user's password with Md5Hash class.
            try {
                encryptPassLoginActivity = MdHashing
                        .MD5(getPassword.toString());
            } catch (NoSuchAlgorithmException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (UnsupportedEncodingException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            if (resultCheck == true) {

                String[] firstAndLast;

                String spcDelmt = " ";

                firstAndLast = name.toString().split(spcDelmt);

                fName = firstAndLast[0];
                lName = firstAndLast[1];

                // set up the tcp client to sent the information to the
                // server.
                client.login(fName, lName, encryptPassLoginActivity,
                        getRegionSelect, 128, 128, 20);

            }

            return null;
        }

        @Override
        protected void onPostExecute(Void result) {

            Intent goToInWorld = new Intent(
                    AndroidClientCompnt.this.getApplicationContext(),
                    PocketVDCActivity.class);
            startActivity(goToInWorld);
            Toast.makeText(getApplicationContext(), "Connected",
                    Toast.LENGTH_LONG).show();

        }

    }

} 
```

我知道这是一篇超长的帖子，我问了很多，但如果有人可以看一下，我将非常感激。我整天都在做这个，试图利用我得到的这些帮助类，但无法让它工作。我在这个客户端/服务器方面没有太多经验也无济于事。任何朝着正确方向或可接受的解决方案的推动对我来说真的很重要。

非常感谢你，

祝你有个美好的夜晚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T01:49:00.680

你能发布你的清单吗？

您可能需要添加以下内容：

```
 <uses-permission android:name="android.permission.INTERNET"/> 
```

另外-我假设您在此连接的服务器端看不到任何事情发生？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T01:49:22.410

1) 确保您在 Android-Manifest 文件中具有以下权限：

```
 <uses-permission android:name="android.permission.INTERNET/> 
```

没有这个，你肯定不会建立任何 tcp/ip 连接。

2）您将希望在调试模式下运行代码，并在设置连接信息的位置放置断点以及在几个点处的结果。换句话说，您需要更深入地挖掘。

如果您对编码有点陌生，没有比运行调试器和逐行执行代码更好的时间投资了。代码仅在调试器中出现，您可以在其中查看变量和结果的值。所以设置几个断点，单步执行，你会看到更多。但是，在有线程的地方进行调试更加困难。

# ruby-on-rails - Rails 模型验证以检查属性的值

> ID：11424322
> 
> 赞同：3
> 
> 时间：2012-07-11T01:30:17.827
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个`Project`模型和一个`User`模型。一个项目必须有一个客户端（用户类），因此`Project`模型有一个`client_id`外键。

该`User`模型有一个`type`属性，`3`如果用户是客户，将包含该属性。

我想验证当项目分配给客户时，`@user.type`即`3`.

项目.rb

```
validates :client_id, presence: true, #@user.type must be 3
belongs_to :client, :class_name => User, :foreign_key => :client_id 
```

用户.rb

```
#constants
TYPES = {
    :manager => 1,
    :contractor => 2,
    :client => 3
} 
```

不确定如何进行验证。我通读了有关验证的 rails 指南，但似乎仍然无法找到解决方案。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T01:35:45.203

使用`inclusion`验证助手。[文档在这里](http://guides.rubyonrails.org/active_record_validations_callbacks.html#inclusion)

这是文档中的一个简单示例

```
class Coffee < ActiveRecord::Base
  validates :size, :inclusion => { :in => %w(small medium large),
    :message => "%{value} is not a valid size" }
end 
```

* * *

编辑：

好的，我明白你的意思了。不要为此使用验证助手，请手动执行。

```
# somewhere in your model (don't be tempted to put this in your controller)
def assigning_client
  if @user.type == 3
    # do the assignment
  else
    errors.add(:base, :message => "User must be a client")
  end
end 
```

只要您使用`save!`强制验证的 bang 版本，该错误就会阻止保存信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T01:57:46.580

这里只是一个指针。不要在 activerecord 模型中使用名为 type 的属性。它与 rails 使用 STI（单表继承）的方式冲突，因为它在子类化另一个类时使用 type 属性来确定类的类型

# c# - 如何使 Python.CreateEngine() 工作？- 目标调用异常

> ID：11424324
> 
> 赞同：0
> 
> 时间：2012-07-11T01:30:46.807
> 
> 标签：c#, ironpython

我正在关注[这个](https://stackoverflow.com/a/3902170/1476739)。一个使用 MonoDev 从 C# 调用 IronPython 的简单示例：

Python：

```
class Hello:
    def __init__(self):
        pass
    def add(self, x, y):
        return (x+y) 
```

C＃：

```
using System;
using IronPython.Hosting;
using IronPython.Runtime;
using IronPython;
using Microsoft.Scripting.Hosting;
using Microsoft.Scripting;

class Hello {
    public static void Main()
    {
        ScriptEngine engine = Python.CreateEngine();
        ScriptSource script = engine.CreateScriptFromSourceFile("myPythonScript.py");
        ScriptScope scope = engine.CreateScope();

        script.Execute(scope);
    }
} 
```

我在执行相同示例的程序集时遇到了几个问题。而现在我的问题是，每次程序尝试做： `ScriptEngine engine = Python.CreateEngine();`时，我都会收到以下错误：

```
System.Reflection.TargetInvocationException: 
Failed to load language 'IronPython 2.7.3': 
An exception was thrown by the type initializer for 
IronPython.Runtime.ExtensionMethodSet ---> System.Exception: 
An exception was thrown by the type initializer for 
IronPython.Runtime.ExtensionMethodSet ---> System.Exception: 
Could not load type 'IronPython.Runtime.ExtensionMethodSet+AssemblyLoadInfo[]' 
from assembly 'IronPython, Version=2.7.0.40, Culture=neutral, PublicKeyToken=7f709c5b713576e1'. 
```

根据[这个论坛](https://stackoverflow.com/a/3902170/1476739)中的建议，我不得不承认我没有 Microsoft.Scripting.Debugging.dll，因为我不知道在哪里可以下载它——它没有配备 IronPython。你能告诉我在哪里可以得到它，如果这就是我仍然坚持这个基本示例的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T18:51:23.137

```
ScriptScope scope = engine.CreateScope(); 
```

**应该**

```
dynamic scope = engine.CreateScope(); 
```

`ScriptScope`是**基类**。

# ruby-on-rails - 使用 LDAP 和本地数据库进行 Rails 身份验证

> ID：11424325
> 
> 赞同：2
> 
> 时间：2012-07-11T01:30:48.960
> 
> 标签：ruby-on-rails, active-directory, ldap

我正在尝试重写使用 PHP/MySQL 创建的旧应用程序。使用的身份验证系统在数据库中有一个用户表，其中存储用户名、电子邮件等......但不存储密码。

每当用户登录时，它首先检查数据库以查看用户是否存在，如果不存在则返回登录错误。如果用户存在于本地数据库中，则它会尝试使用用户输入的用户名/密码组合绑定到活动目录，如果成功则创建会话。

使用 Rails 完成此任务的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T21:51:33.880

Ruby 的 Net::LDAP 库非常好。

这是我多年来一直使用的简化版本：

```
# sessions_controller.rb
def create
  user = User.find_by_login(params[:login])
  if user && Ldap.authenticate(params[:login], params[:password])
    self.current_user = user
    Rails.logger.info "Logged in #{user.name}"
    flash[:notice] = "Successfully Logged In!"
    redirect_back_or_default root_url
  else
    flash[:alert] = "Invalid User credentials"
    render :new
  end
end

# lib/ldap.rb
# Ldap.authenticate('user','password')
# Returns true if validated
# Returns false if invalidated
# Returns nil if LDAP unavailable
require 'net/ldap'
class Ldap
  def self.config
    # this is actually loaded from a yaml config file
    {
      :domain => 'YOURDOMAIN',
      :host   => '10.10.10.100'
    }
  end

  def self.authenticate(login, password)
    conn = Net::LDAP.new(
      :host       => config[:host],
      :port       => 636,
      :base       => "dc=#{config[:domain]}, dc=local",
      :encryption => :simple_tls,
      :auth       => {
        :username => "#{login}@#{config[:domain]}.local",
        :password => password,
        :method   => :simple
      }
    )
    Timeout::timeout(15) do
      return conn.bind ? true : false
    end
  rescue Net::LDAP::LdapError => e
    notify_ldap_admin(config[:host],'Error',e)
    nil
  rescue Timeout::Error => e
    notify_ldap_admin(config[:host],'Timeout',e)
    nil
  end

  def self.notify_ldap_admin(host,error_type,error)
    msg = "LDAP #{error_type} on #{host}"
    RAILS_DEFAULT_LOGGER.debug(msg)
    DeveloperMailer.deliver_ldap_failure_msg(msg,error)
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T20:44:22.163

查看[devise](https://github.com/plataformatec/devise)和[devise_ldap_authenticable](https://github.com/cschiewek/devise_ldap_authenticatable)库。

# c# - 在 SQL Server CE 和 C# 中获取新插入行的主键？

> ID：11424326
> 
> 赞同：2
> 
> 时间：2012-07-11T01:30:56.933
> 
> 标签：c#, sql, compact-framework, sql-server-ce

我正在向自动生成主键的 SQL Server CE 表中插入，插入完成后如何获取主键？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T01:39:08.517

假设您的主键是一个身份字段，您可以`SELECT @@IDENTITY`在插入新行后使用该查询。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-11T05:12:02.817

你必须小心这样做。您需要做的是在交易中将您的选择设置为：

```
IDbCommand.CommandText += "; select scope_identity()";
object rtn = cmd.ExecuteScalar();
return (long)(decimal)rtn; 
```

事务中的单个选择是关键，因为调用 select scope_identity() 不是插入的主键，它是最近的插入。因此，您最终可能会得到另一个插入的主键，该主键发生在您的插入之后，但在您请求最近的 PK 插入之前。

注意：scope_identity() 可能（重复可能）现在与 IDbCommand 相关联，但过去并非如此，并且遵循上述内容是安全的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-11T05:17:23.080

你可以发现你的主键是表中的一个身份字段

SELECT IDENT_CURRENT('表名')

[http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/](http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/)

# google-chrome - 在 Chrome 中选择多个标签

> ID：11424329
> 
> 赞同：0
> 
> 时间：2012-07-11T01:31:22.867
> 
> 标签：google-chrome, tabs, google-chrome-extension

我想写一个扩展，可以让用户用鼠标在Chrome中选择多个标签（选择的标签会高亮显示），就像一些Firefox的多标签处理程序扩展一样，我搜索过但没有找到有用的信息，所以我想知道是否有办法做到这一点，或者考虑到 Chrome 的设计，在技术上可以构建这样的扩展？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T01:43:41.383

目前我正在使用 Google Chrome v20.0.1132.47 m 我可以说这在那个版本上已经是可能的了。

您需要做的就是按住键盘上的 CTRL 键，然后左键单击每个所需的选项卡以多选它们。

此外，一旦它们被选中，您可以将它们拖放到主窗口之外，以在新会话中使用这些选项卡创建一个独立的会话。在双显示器上非常有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T14:25:52.777

您可以使用 windows get 函数来获取指定窗口中的所有选项卡，或者使用 getAll 并遍历每个窗口，然后遍历每个窗口中的每个选项卡。您必须指定选项 populate:true 以使 tabs 数组返回填充。突出显示的属性应该告诉您该选项卡是否突出显示。

```
chrome.windows.get(integer windowId, {populate:true}, function (window) {
    var highlightedTabs = new Array();
    for(var index in window.tabs)
        if(window.tabs[index].highlighted)
            highlightedTabs.push(windows.tabs[index]);

    // your code here
}); 
```

有关选项卡对象格式的完整参考，请参见下文： [http ://code.google.com/chrome/extensions/tabs.html#types](http://code.google.com/chrome/extensions/tabs.html#types)

# c# - 在这个带有连接的 LINQ 查询中使用 Min 和 Max 函数？

> ID：11424332
> 
> 赞同：1
> 
> 时间：2012-07-11T01:31:26.393
> 
> 标签：c#, linq, entity-framework, linq-to-sql, c#-4.0

我正在做一个 LINQ 查询，它是多个表的连接。在结果集中，我想在表格中添加一个同时显示最小和最大日期的列**[例如（20/3/2012 - 25/4/2012）]**。

我想从中选择日期的表（这是一个管理多对多关系的表）的结构如下：

```
BookedAreaID    int
AreaID  int
LeasedDate  datetime
InvoiceID   int 
```

这是我的 LINQ 查询：

```
var selectedResults=
from InvoiceSet in Invoices
join BookedAreaSet in BookedAreas on InvoiceSet.InvoiceID equals BookedAreaSet.InvoiceID
join AreaSet in Areas on BookedAreaSet.AreaID equals AreaSet.AreaID
join ContactSet in Contacts on InvoiceSet.ContactID equals ContactSet.ContactID
join Contacts_ObjectsSet in Contacts_Objects on ContactSet.ContactID  equals Contacts_ObjectsSet.ContactID
join CompanySet in Companies on Contacts_ObjectsSet.ObjectReferenceID  equals  CompanySet.CompanyID
join BookedAreasSet in BookedAreas on InvoiceSet.InvoiceID equals BookedAreasSet.InvoiceID

where Contacts_ObjectsSet.ObjectReference=="Company"

select new {InvoiceSet.InvoiceNumber,InvoiceSet.Amount,InvoiceSet.TotalDiscount,InvoiceSet.GST,
InvoiceSet.PaymentDate,InvoiceSet.ShoppingCentreID,BookedAreasSet.BookedAreaID,AreaSet.Name,Paid=(InvoiceSet.PaymentDate==null ? "UnPaid":"Paid"), 
licensee=(CompanySet.CompanyName))
}; 
```

我想用这个查询选择类似的东西：

```
DateRange=
(Min(BookedAreasSet.LeasedDate where BookedAreasSet.InvoiceID=InvoiceSet.InvoiceID) 
+ "-" + 
Max(BookedAreasSet.LeasedDate where BookedAreasSet.InvoiceID=InvoiceSet.InvoiceID) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:03:26.320

好像你在这种情况下加入了两次顺便说一句：

“在 InvoiceSet 上的 BookedAreas 中加入 BookedAreasSet。InvoiceID 等于 BookedAreasSet.InvoiceID”

不能随便用吗？

```
DateRange=
(Min(BookedAreasSet.LeasedDate) 
+ "-" + 
Max(BookedAreasSet.LeasedDate)) 
```

# c# - 下载多个文件 WebClient

> ID：11424336
> 
> 赞同：0
> 
> 时间：2012-07-11T01:32:08.197
> 
> 标签：c#, download, webclient

我正在尝试下载多个文件，但它没有像我希望的那样工作。谁能告诉我这个脚本有什么问题，因为我尝试了很多东西，真的不知道该怎么做。

```
public static void DownloadFile(string url)
        {
            WebClient client = new WebClient();
            var name = url.Substring(url.LastIndexOf('/')).Remove(0, 1);
            foreach (var item in urls)
            {
                client.DownloadFile(item, "C:\\" + name);
            }
        }

        private void btnGo_Click(object sender, EventArgs e)
        {
            urls.Add("url1");
            urls.Add("url2");
            urls.Add("url3");
            Parallel.ForEach(urls,
               new ParallelOptions { MaxDegreeOfParallelism = 10 }, 
               DownloadFile);
        } 
```

* * *

```
using (var sr = new StreamReader(HttpWebRequest.Create(url).GetResponse().GetResponseStream()))
            {
                using (var sw = new StreamWriter(url.Substring(url.LastIndexOf('/'))))
                {
                    sw.Write(sr.ReadToEnd());
                }
            } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T01:35:55.997

我会用 a[`System.Net.HttpWebRequest`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)代替。

这就是代码的样子：

```
private List<string> urls = new List<string>();

private void btnGo_Click(object sender, EventArgs e)
{
    urls.Add("http://199.91.152.106/ua0p3fbc5nlg/gg2w2fq4ljc1nnd/MicroCraft_Beta.zip");
    Parallel.ForEach(urls, new ParallelOptions { MaxDegreeOfParallelism = 10 }, DownloadFile);
}

public static void DownloadFile(string url)
{
    var req = (HttpWebRequest)WebRequest.Create(url);
    var name = url.Substring(url.LastIndexOf('/') + 1);
    using (var res = (HttpWebResponse)req.GetResponse())
    using (var resStream = res.GetResponseStream())
    using (var fs = new FileStream("C:\\" + name, FileMode.Create, FileAccess.Write, FileShare.None))
    {
        // Save to file
        var buffer = new byte[8 * 1024]; // 8 KB buffer
        int len; // Read count
        while ((len = resStream.Read(buffer, 0, buffer.Length)) > 0)
            fs.Write(buffer, 0, buffer.Length);
    }
} 
```

因为您在评论中告诉我的 URL 没有使用 HTTP 协议的正确实现。您必须将其添加到您的配置文件中才能使其正常工作（App.config 或 Web.config，取决于它是 ASP.Net 站点还是离线应用程序）：

```
<system.net>
    <settings>
        <httpWebRequest useUnsafeHeaderParsing="true" />
    </settings>
</system.net> 
```

至于您在评论中所说的名称冲突问题，应该通过将您的名称更改`var name = url.Substring(url.LastIndexOf('/')).Remove(0, 1);`为其他内容来解决。

如果你想有一个增量文件名，你可以使用这个：

```
// Inside your class:
private static int counter = 0;

// In your method:
var name = "file" + System.Threading.Interlocked.Increment(ref counter) + ".html"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T01:47:55.613

您正在将所有文件下载到您的 DownloadFile 代码中的同一文件中，该代码假定对该函数的单次调用会下载所有文件。

修复：

选项 1：不要使用`Parallel.ForEach`，只需调用 DownloadFile 一次。为每次下载指定唯一的文件名。即通过使用您正在下载的 URL 的一部分或只是使用随机/临时文件名。

像这样的东西（假设网址是某种`IEnumerable<string>`）

```
foreach (var item in urls)
{
   var name = item.Substring(item.LastIndexOf('/')).Remove(0, 1);
   client.DownloadFile(item, "C:\\" + name);
} 
```

选项 2：使用`Parallel.ForEach`但更改 DownloadFile 代码以仅下载单个文件：

```
public static void DownloadFile(string url)
{
    WebClient client = new WebClient();
    var name = url.Substring(url.LastIndexOf('/')).Remove(0, 1);
    client.DownloadFile(url, "C:\\" + name);
} 
```

# java - Java 数组索引越界异常排序

> ID：11424339
> 
> 赞同：1
> 
> 时间：2012-07-11T01:32:32.997
> 
> 标签：java

我目前有以下代码。我在这一行得到 ArrayIndexOutofBoundsException。

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 4
at Module3_1_Sort.sort(Module3_1_Sort.java:70)
at Module3_1.s_2d_string(Module3_1.java:155) 
```

对应的行如下。

```
dta[flagcounter] = dta[x];
sortValues = s.sort(sortValues,counter, sortBy, searchterm); 
```

我很确定它不会超过数组的长度......

有人可以帮忙吗？谢谢！

**程序代码如下**

```
 static public void s_2d_string () {
    c.println("2D String Array Program");
    int counter,x;
    c.print("How many entries do you wish to sort? ");
    counter = c.readInt();

    String[][] sortValues = new String[counter+1][2];

    for (x=0;x<counter;x++) {
        c.print("Enter book name: ");
        sortValues[x][0] = c.readLine();
        c.print("Enter book author: ");
        sortValues[x][1] = c.readLine();

    }
    c.print("Which column would you like to sort by? 1 or 2? ");
    int sortBy = c.readInt();
    sortBy = sortBy-1;

    c.print("Enter search term: ");
    String searchterm = c.readLine();

    sortValues = s.sort(sortValues,counter, sortBy, searchterm);

    int flagcounter_int = Integer.parseInt(sortValues[0][0]);

    c.println(flagcounter_int + " results found.");

    for (x=0;x<flagcounter_int;x++) {
        c.println(sortValues[x+1][0] + ", " + sortValues[x+1][1]);
    }
}

static public String[][] sort (String dta[][], int totalNo, int sortBy, String searchterm)  {
    boolean found = false;    
    int flagcounter = 0;
        for (int x=0; x<dta.length;x++) {
            if (sortBy == 0) {
                if (searchterm.equalsIgnoreCase(dta[x][0])) {
                    found = true;
                    flagcounter = flagcounter+1;
                    dta[flagcounter] = dta[x];
                }
            }
            if (sortBy == 1) {
                if (searchterm.equalsIgnoreCase(dta[x][1])) {
                    found = true;
                    flagcounter = flagcounter+1;
                    dta[flagcounter] = dta[x];
                }
            }
        }
    String flagcounter_string = Integer.toString(flagcounter);
    dta[0][0] = flagcounter_string;
    return (dta);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T01:49:28.843

更改您的代码

```
for (int x=0; x<dta.length;x++) {
        if (sortBy == 0) {
            if (searchterm.equalsIgnoreCase(dta[x][0])) {
                found = true;
                flagcounter = flagcounter+1;
                dta[flagcounter] = dta[x];
            }
        }
        if (sortBy == 1) {
            if (searchterm.equalsIgnoreCase(dta[x][1])) {
                found = true;
                flagcounter = flagcounter+1;
                dta[flagcounter] = dta[x];
            }
        }
    } 
```

到

```
for (int x=0; x<totalNo;x++) {
        if (sortBy == 0) {
            if (searchterm.equalsIgnoreCase(dta[x][0])) {
                found = true;
                flagcounter = flagcounter+1;
                dta[flagcounter] = dta[x];
            }
        }
        if (sortBy == 1) {
            if (searchterm.equalsIgnoreCase(dta[x][1])) {
                found = true;
                flagcounter = flagcounter+1;
                dta[flagcounter] = dta[x];
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T01:58:53.933

查看`for`循环以及您`flagcounter`在其中处理的方式。`for`循环说：

```
for (int x = 0; x < dta.length; x++) 
```

并且`flagcounter`当您找到搜索词时，在它被用作索引之前会增加：

```
flagcounter = flagcounter + 1;
dta[flagcounter] = dta[x]; 
```

发生的情况是，如果您在第一行中有匹配项，您会继续在下一行中找到它（因为您覆盖了它）并且您最终会超出范围。

让我们看一个例子。假设你有这个作为输入：

```
Book            Author
-----------------------------
Proven Guilty   Jim Butcher
Naked Sun       Isaac Asimov 
```

所以`dta`会是这样的：

```
[
    ["Proven Guilty", "Jim Butcher"],
    ["Naked Sun", "Isaac Asimov"],
    [null, null]
] 
```

假设您正在寻找作者“Jim Butcher”。所以当你进入循环时，你有`x = 0, flagcounter = 0`. 您立即找到匹配项，发生的情况是：

```
flagcounter = flagcounter + 1; // flagcounter is now 1
dta[flagcounter] = dta[x]; // i.e. dta[1] = dta[0]; 
```

所以现在`dta`数组看起来像这样：

```
[
    ["Proven Guilty", "Jim Butcher"],
    ["Proven Guilty", "Jim Butcher"],
    [null, null]
] 
```

您可以看到会发生什么：您不断将前一行分配给下一行，最后您处于并且您尝试执行 的情况`x = 2`，`flagcounter = 2`这`dta[3] = dta[2]`超出了`dta`.

正如安息日所建议的，您需要纠正`for`循环。但是，我认为您可能会遗漏更多的东西来让它做您想做的事。除其他外，还有一个事实，即`dta[flagcounter] = dta[x];`不会将`x`行中的值分配给`flagcounter`行，而是实际上通过引用使`flagcounter`行*指向行。*`x`

# ios - 为 VC on IB 操作添加透明度 - iOS

> ID：11424343
> 
> 赞同：-1
> 
> 时间：2012-07-11T01:33:35.917
> 
> 标签：ios, xcode, ibaction

我有一个案例需要在 IBAction 上打开一个新的 UIViewController。这个新的 UIViewController 应该是透明的。当我进行正常的模态转换时，它会隐藏旧的 UIViewController。对此有何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T02:03:18.393

出于您的目的，您需要告诉模态视图控制器视图属性以更改 alpha。（最好在视图控制器中完成`viewDidLoad`）

它很简单：

```
- (void) viewDidLoad
{
[self.view setAlpha:0.5];
} 
```

现在，另一种方法是只使用新`UIView`添加的作为主视图控制器的子视图。下面将向您展示如何对其进行动画处理。

```
UIView *myNewView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
[myNewView setAlpha:0.0];
[self.view addSubview:myNewView];

[UIView animateWithDuration:1.5 animations:^{
    [myNewView setAlpha:0.5];
}]; 
```

**编辑：**要更改背景视图的 alpha 并保留其子视图的 alpha，请尝试像这样设置它。

```
[myNewView setBackgroundColor:[[UIColor blueColor] colorWithAlphaComponent:0.2]];

[myNewViewsSubView setBackgroundColor:[[UIColor redColor] colorWithAlphaComponent:1.0]]; 
```

# regex - 正则表达式匹配任何不在内部范围内的 IP

> ID：11424348
> 
> 赞同：0
> 
> 时间：2012-07-11T01:34:35.540
> 
> 标签：regex, vba

我目前正在编写一个 excel 宏，但我的具体要求遇到了一些真正的麻烦。

我需要遍历单元格并找到不在私有范围内的任何 IP 地址，

```
10.0.0.0 – 10.255.255.255
172.16.0.0 – 172.31.255.255
192.168.0.0 – 192.168.255.255 
```

我正在使用的代码：

```
Dim RE As Object
Set RE = CreateObject("vbscript.regexp")

With RE
    .MultiLine = False
    .Global = False
    .IgnoreCase = True
    .Pattern = ??
End With 
```

VBA代码没有任何问题，只是模式。

真的很想有一个正则表达式大师来帮忙！

例如，单元格的格式如下：

```
192.168.1.1 (subnet name), 203.134.56.7 (third party unknown), 10.0.0.0/8 (voice subnet), 10.1.1.5 (voice server), 56.8.0.0/16 (google) 
```

至于下面的评论，这就是为什么我正在寻找一个正则表达式解决方案（如果有的话），因为这意味着我可以在一个单元格上运行它，它仍然应该找到一个第三方 IP，而不是拆分成一个数组，然后运行每个ip通过一个函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T01:48:13.643

以下正则表达式代码应该可以帮助您。如果输入了有效的 IP 地址，它将匹配不在私有范围内的 IP 地址。但是，它不能确定 IP 地址是否有效（例如，它可能匹配 192.168.864.543。）可以对其进行更改以解决此问题，但由于正则表达式处理字符串而不是数字，因此更加困难。

```
10\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}|172.([1][6-9]|[2][0-9]|[3][0-1])\.[0-9]{1,3}\.[0-9]{1,3}|192.168\.[0-9]{1,3}\.[0-9]{1,3} 
```

也就是说，正如评论所建议的那样，正则表达式可能不是解决此问题的最佳方法。如果您想使用正则表达式，上面是一种可以使用它们的方法，但如前所述，存在限制。

# tomcat - 安装期间 ToolTwist 控制器中的 OutOfMemoryError

> ID：11424351
> 
> 赞同：1
> 
> 时间：2012-07-11T01:35:01.830
> 
> 标签：tomcat, jenkins, tooltwist

使用 Controller 安装我的项目时，出现以下错误。

```
Starting transmission...
  Bundle 1 (4kb = 1 installs, 23 deletes)
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
    at tooltwist.fip.FipBatchOfUpdates.<init>(FipBatchOfUpdates.java:50)
    at tooltwist.fip.FipServer.source_getRequestedUpdates(FipServer.java:214)
    at tooltwist.fip.FipThisMachineServerProxy.askForUpdates(FipThisMachineServerProxy.java:53)
    at tooltwist.fip.Fip.processUpdatesAndDeletes(Fip.java:493)
    at tooltwist.fip.Fip.installFiles(Fip.java:352)
    at tooltwist.controller.util.InstallerUtil.install(InstallerUtil.java:376)
    at tooltwist.controller.util.InstallerUtil.main(InstallerUtil.java:57)

Sorry, the install failed.

Finished with status false 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T05:21:16.030

如果您有一个非常大的项目，您可能需要在 extension-projects/ttc_t/config/bin/installLaunchpad 中增加 JAVA_OPTS 的默认值。默认为256mb，但可以根据需要增加。控制器使用 FIP，它不需要与正在部署的项目成比例的内存，因此适度增加应该可以正常工作。

```
JAVA_OPTS="-Xms64m -Xmx512m -XX:MaxPermSize=32m" 
```

# iphone - iPhone 代码签名——为什么开发者会抱怨缺少分发证书？

> ID：11424354
> 
> 赞同：0
> 
> 时间：2012-07-11T01:35:18.540
> 
> 标签：iphone, code-signing

这是我得到的错误。这使我无法在我的 iPad 设备上测试我的应用程序的**开发人员版本。**“未能满足指定的代码要求”这一行引起了我的注意，但我不知道这意味着什么。

```
Validate /Users/william/Library/Developer/Xcode/DerivedData/GraphingCalculatorDeluxe-fduucejdaajqvxekndurxjggarcu/Build/Products/Debug-iphoneos/GraphingCalculatorDeluxe.app
cd /Users/william/Documents/GraphingCalculatorDeluxe
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
setenv PRODUCT_TYPE com.apple.product-type.application
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/Validation /Users/william/Library/Developer/Xcode/DerivedData/GraphingCalculatorDeluxe-fduucejdaajqvxekndurxjggarcu/Build/Products/Debug-iphoneos/GraphingCalculatorDeluxe.app

warning: Application failed codesign verification.  The signature was invalid, contains disallowed entitlements, or it was not signed with an iPhone Distribution Certificate. (-19011)
Executable=/Users/william/Library/Developer/Xcode/DerivedData/GraphingCalculatorDeluxe-fduucejdaajqvxekndurxjggarcu/Build/Products/Debug-iphoneos/GraphingCalculatorDeluxe.app/GraphingCalculatorDeluxe
codesign_wrapper-0.7.10: using Apple CA for profile evaluation
/Users/william/Library/Developer/Xcode/DerivedData/GraphingCalculatorDeluxe-fduucejdaajqvxekndurxjggarcu/Build/Products/Debug-iphoneos/GraphingCalculatorDeluxe.app: valid on disk
/Users/william/Library/Developer/Xcode/DerivedData/GraphingCalculatorDeluxe-fduucejdaajqvxekndurxjggarcu/Build/Products/Debug-iphoneos/GraphingCalculatorDeluxe.app: satisfies its Designated Requirement
test-requirement: code failed to satisfy specified code requirement(s)
codesign_wrapper-0.7.10: failed to execute codesign(1)
 - (null) 
```

我正在进行调试构建，以我的开发人员身份签名。这是终端中 codesign 的输出：

```
Williams-iMac:Debug-iphoneos william$ codesign -dvvv GraphingCalculatorDeluxe.app
Executable=/Users/william/Library/Developer/Xcode/DerivedData/GraphingCalculatorDeluxe-fduucejdaajqvxekndurxjggarcu/Build/Products/Debug-iphoneos/GraphingCalculatorDeluxe.app/GraphingCalculatorDeluxe
Identifier=com.jockusch.calculator
Format=bundle with Mach-O thin (armv7)
CodeDirectory v=20100 size=10772 flags=0x0(none) hashes=530+5 location=embedded
Hash type=sha1 size=20
CDHash=96b088a0cd93ff9b5adc9552bbc29e4cef247356
Signature size=4338
Authority=iPhone Developer: William Jockusch (B86JCKGV32)
Authority=Apple Worldwide Developer Relations Certification Authority
Authority=Apple Root CA
Signed Time=Jul 10, 2012 8:08:35 PM
Info.plist entries=30
Sealed Resources rules=3 files=564
Internal requirements count=1 size=292
Williams-iMac:Debug-iphoneos william$ 
```

编辑：我告诉 Xcode 使用我的开发人员资料。请参阅下面的屏幕截图。

![在此处输入图像描述](../Images/662d71b03af195a3712deac43c806962.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T01:57:31.693

检查您是否正确设置了**Code Signing**的名称（您的项目目标 -> 构建设置 -> 代码签名）：

[![](../Images/10fa29d32f958cb5e05e46ac95e16df0.png "由 imgur.com 主办")](https://i.imgur.com/wocTe.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T02:21:54.740

该问题显然与 Xcode 混淆了两个不同的开发人员帐户有关。

我既为自己发展，也为与他人的团队发展。我最近为团队提交了一个应用程序。因此，登录 iTunes Connect 以分发应用程序的 Xcode 部分被设置为该帐户。

当我编译这个应用程序时，尽管所有设置似乎都指向我自己帐户的内容，但团队信息的某些部分显然混淆了它的某些方面。

我相信这是因为在我执行以下操作后问题就消失了：

1.  去组织者那里。
2.  导航到应用程序的存档。
3.  单击“分发”按钮。
4.  以我自己的身份登录 iTunes 连接
5.  然后我收到一条消息说没有找到合适的申请记录。

6.  再次构建，问题再次出现。

7.  相当 Xcode 并删除我的构建文件夹。

8.  重启 Xcode
9.  重复步骤 1-5。
10.  再次构建。有效！

# asp.net-mvc - 符合 MVC 4 站点 508 标准

> ID：11424355
> 
> 赞同：1
> 
> 时间：2012-07-11T01:35:20.580
> 
> 标签：asp.net-mvc, testing, asp.net-mvc-4, section508

我花了很多时间研究这个，但也许有人指出我正确的方向。需要建立一个符合 508 标准的 MVC 4 网站。3 年前我做了一些 508 合规性测试和标签插入，但我真的很想再看看这样做。其他人在用什么？寻找什么标签？什么测试工具？有免费的测试工具吗？

是否符合 AJAX、jQuery 和 Javascript，我似乎找到了“它取决于”这样的答案因此需要这种合规性，因为公司想要向政府销售产品并且需要合规。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T19:12:01.027

我要对你的问题进行抨击，但我认为你需要充实你的问题。

> 其他人在用什么？寻找什么标签？

第 508 节或多或少侧重于 UI 而不是后端。例如，您可以绕着街区走 5 次来开发/显示一个表格，但只要每个`<input>`人都有一个表格，`<label>`这就是最重要的。您可能需要[查看合规性标准](http://section508.gov/index.cfm?fuseAction=stdsdoc#Web)。这是指向网站标准的链接。但是许多机构使用软件应用程序标准*和*网站标准用于被视为应用程序的网站。随系统提供的文档必须符合 1194.41 所涵盖的要求，该文档引用 1194.22。

> 测试工具

有各种工具，但最好的工具之一是[WAVE](http://wave.webaim.org/)。

> 是否符合 AJAX、jQuery 和 Javascript，我似乎找到了“它取决于”这样的答案因此需要这种合规性，因为公司想要向政府销售产品并且需要合规。

由于构建事物的方法有很多，因此答案是“视情况而定”。[我对模态对话框](https://stackoverflow.com/questions/11298525/setting-focus-of-a-screen-reader-on-a-modal-alert-in-ember/11299878#11299878)和[其他可访问性](https://stackoverflow.com/search?q=user:1276124+[accessibility])的回答可能会有所帮助。[jQuery 页面](http://archive.plugins.jquery.com/plugin-tags/accessibility)有一个可访问插件的标签。还有一个[jQuery Accessibility Google group](http://groups.google.com/group/jquery-a11y/)可能是一个很好的资源。

# png - 使用 SAS，将 png 文件转换为二进制数据？

> ID：11424358
> 
> 赞同：0
> 
> 时间：2012-07-11T01:35:34.890
> 
> 标签：png, sas, binary-data

我想在 Spotfire 上使用 SAS 的图表。

所以我尝试在 SAS 上创建 png 文件作为二进制数据。

那可能吗？

我尝试将 png 文件作为二进制数据导入，但 Sas 没有。在 R 上，“read.bin”

```
 data test2;
infile "&filepath" recfm=f;
input value binary8.1 @@;
 run; 
```

请告诉我。

# facebook - facebook喜欢不是独一无二的

> ID：11424362
> 
> 赞同：0
> 
> 时间：2012-07-11T01:36:37.557
> 
> 标签：facebook, url, button, iframe, facebook-like

出于某种原因，特定内容页面上的点赞按钮被组合在一起，而不管 FB 代码中的 URL 是特定于页面的。示例一页显示 8.3k 喜欢。

以下是显示唯一 URL 的来源：

```
<iframe src="http://www.facebook.com/plugins/like.php?href=http://www.oursite.com/ics-1-5ghz-snapdragon-video/&amp;layout=button_count&amp;show_faces=true&amp;width=450&amp;action=like&amp;colorscheme=light&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; height:21px; margin-left:15px; float:right; width:78px;" allowTransparency="true"></iframe> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T02:17:29.293

更改您的 og:url 它很可能会覆盖您的插件

```
<meta property="og:url" content="http://www.oursite.com"/> 
```

到

```
<meta property="og:url" content="http://www.oursite.com/url/to/article"/> 
```

# google-places-api - 如果附近没有什么有趣的东西，如何“后退”以获得越来越粗糙的地方

> ID：11424365
> 
> 赞同：0
> 
> 时间：2012-07-11T01:37:02.810
> 
> 标签：google-places-api

我开始使用适用于 Java/Android 和 JavaScript 的 Google Places API，并且正在运行一些东西。

我希望能够实现一种“后备”方法，将结果按距离排序返回给用户，但如果在一定半径内没有发现任何有趣的东西（营业地点、机场、购物中心等），然后我会去一个更粗的粒度，并按顺序返回街道交叉口、社区或城市。最好的方法是什么，最好是在一个查询中？

另外，我注意到我可以指定“rankby=distance”，但我不能提供半径，这很不方便。这个限制有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T03:39:39.710

我能想到的按设定半径内的距离排序的唯一解决方法是手动处理返回的结果以查看它们的位置是否在您指定的半径内。如果您认为这将是一个有用的功能，我还建议您[在此处](http://code.google.com/p/gmaps-api-issues/issues/entry?template=Places%20API%20-%20Feature%20Request)提交“Places API - 功能请求” 。

您的“后备”方法的一个可能解决方案是，如果[Places API 搜索请求](https://developers.google.com/places/documentation/#PlaceSearchRequests)返回`"status" : "ZERO_RESULTS"`或者如果没有返回的结果落在您想要的半径范围内，您可以使用您的 Places 中的纬度和经度执行[Geocoding API 反向地理编码请求](https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding)API 搜索请求以查找最近的地址。

# java - java - 如何在字段级别对Java中的对象数组进行排序以进行成绩比较？

> ID：11424369
> 
> 赞同：3
> 
> 时间：2012-07-11T01:37:50.530
> 
> 标签：java, string, sorting, compare

在 Java 中，

```
Class StudentProgress
{
        String Name;
        String Grade;
        /* CTOR goes here */
}

main class
{
     main method()
     {
         StudentProgress arrayofObjects[100000];
     }
} 
```

如果成绩是 D-,C-,B-,A-,A,B,C,D,A+,B+,C+,D+。我需要对这些对象进行排序我怎样才能有效地做到这一点提前谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T01:55:30.007

你最好的方法是让你的类实现[`Comparable`](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)。像这样的东西会起作用：

```
public class StudentProgress implements Comparable<StudentProgress> {

    String name;
    String grade;
    char baseGrade;    // Just the letter
    int gradeModifier; // -1 0 or +1 - done to make sorting easier

    public StudentProgress( String name, String grade ) {
        this.name = name;
        this.grade = grade;
        // Extract the grade parts for use when comparing
        baseGrade = grade.charAt( 0 );
        gradeModifier = grade.length() == 1 ? 0 : Integer.parseInt( grade.charAt( 1 ) + "1" );
    }

    public int compareTo( StudentProgress o ) {
        return baseGrade == o.baseGrade ? gradeModifier - o.gradeModifier : baseGrade - o.baseGrade;
    }
} 
```

然后进行排序，您只需使用以下[`Arrays.sort()`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28java.lang.Object%5B%5D%29)方法：

```
StudentProgress[] array = ...;
Arrays.sort(array); 
```

如果你不希望你的类实现这个接口，你可以提供一个独立`Comparator`的 sort 调用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T01:41:44.277

您正在寻找的类是 Comparable 和 Comparator。

本教程将指导您，[http://www.mkyong.com/java/java-object-sorting-example-comparable-and-comparator/](http://www.mkyong.com/java/java-object-sorting-example-comparable-and-comparator/)

祝你好运！

# php - 检索数据库信息并检查特定条件的结果

> ID：11424371
> 
> 赞同：0
> 
> 时间：2012-07-11T01:37:57.380
> 
> 标签：php, mysql

我正在寻找执行以下操作的最有效方法...

我有一个包含三个字段的表：*id*、*eventid*和*movetype* - 我有以下代码来查询数据库中具有匹配*eventid*的所有条目：

```
$get_results = mysql_query("SELECT * FROM table WHERE eventid='$eventid'");
while($row = mysql_fetch_array($get_results)){
    // store results in array
    $move_type_array = explode(" ", $row['movetype']);
} 
```

请注意：*movetype*只能是三个值：Internal、Outgoing、Incoming

使用一组虚拟数据，**var_dump($move_type_array)**可以输出：

```
array(1) { [0]=> string(8) "Internal" } array(1) { [0]=> string(8) "Internal" } 
```

另一个输出示例是：

```
array(1) { [0]=> string(8) "Internal" } array(1) { [0]=> string(8) "Incoming" } array(1) { [0]=> string(8) "Outgoing" } 
```

然后我需要检查输出以查看是否满足以下条件：

1.  数组是否包含**Internal** *两次*？
2.  如果数组只包含*一次***Internal** ，那么数组是否还包含**Incoming**和**Outgoing**？

 *****如果满足任一条件，则应显示一条消息，告诉他们满足哪个条件，否则应显示一条消息，告诉他们条件尚未满足。

我尝试过使用许多 PHP 函数，例如 in_array()，还尝试将数据存储在字符串中并使用 preg_match()，但是这两种方法都没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T01:59:44.467

```
// 1\. Don't use '*' - fetch only required fields!
// 2\. Don't use mysql_* functions - they are obsolete! Use PDO or MySQLi instead.
$get_results = mysql_query("SELECT `movetype` FROM table WHERE eventid='$eventid'");

while($row = mysql_fetch_array($get_results)){

    // Count the values
    $arr = array_count_values(explode(" ", $row['movetype']));

    // Check them here
    if(isset($arr['Internal'])) {

        if($arr['Internal'] === 2)
            echo ' Internal: 2'.PHP_EOL;
        else if($arr['Internal'] === 1
            && isset($arr['Incoming'])
            && isset($arr['Outgoing']))
            echo ' Internal: 1, Incoming and Outgoing'.PHP_EOL;

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T02:05:45.117

试试这个：

```
$result = mysql_query("
    SELECT SUM(IF(movetype = 'Internal', 1, 0)) AS internal, 
           SUM(IF(movetype = 'Outgoing', 1, 0)) AS outgoing, 
           SUM(IF(movetype = 'Incoming', 1, 0)) AS incoming
    FROM table
    WHERE eventid = $eventid
    GROUP BY eventid
");
$count = mysql_fetch_array($result);

if ($count['internal'] >= 2 || ($count['internal'] == 1 
        && $count['outgoing'] >= 1 
        && $count['incoming'] >= 1)) {
    echo 'Yes';
} else {
    echo 'No';
} 
```*****

# facebook - 从 Facebook 获取总评论、喜欢和分享 - 仅打印零

> ID：11424372
> 
> 赞同：1
> 
> 时间：2012-07-11T01:38:06.897
> 
> 标签：facebook, facebook-fql

我想获得例如总评论，但它只从下面的链接打印零 (0)：

[https://api.facebook.com/method/fql.query?query=SELECT+share_count%2C+like_count%2C+comment_count%2C+total_count+FROM+link_stat+WHERE+url%3D%22http://www. facebook.com/erikedgrensgalleri%22](https://api.facebook.com/method/fql.query?query=SELECT+share_count%2C+like_count%2C+comment_count%2C+total_count+FROM+link_stat+WHERE+url%3D%22http://www.facebook.com/erikedgrensgalleri%22)

如果我改成`erikedgrensgalleri`它`cocacola`完美的工作！为什么我无法从我的 Facebook 页面获得总评论数等？我已经有 7 个赞和几条评论了！

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:48:55.263

他们不会开始在 Facebook 页面上进行衡量，直到您拥有 30 名及以上的粉丝。我很确定这就是原因，但不是积极的。我也看不到我的 Facebook 页面计数。有关更多信息和文档（对于它的价值）：http: [//developers.facebook.com/docs/insights/](http://developers.facebook.com/docs/insights/)

# java - 应用程序没有响应

> ID：11424374
> 
> 赞同：0
> 
> 时间：2012-07-11T01:38:15.247
> 
> 标签：java, android, eclipse, ksoap2

我正在使用使用 KSOAP 的 Web 服务发送要存储在数据库中的详细信息。此代码之前运行良好，我没有对其进行任何更改。现在它不工作了。请帮忙。我检查了网络服务，它工作正常。我附上了日志猫的详细信息。请帮忙 ！！！

```
public class Registration extends Activity{
private static final String SOAP_ACTION = "http://tempuri.org/register";
private static final String OPERATION_NAME = "register";
private static final String WSDL_TARGET_NAMESPACE = "http://tempuri.org/";
private static final String SOAP_ADDRESS = "http://10.0.2.2:54714/WebSite1/Service.asmx";
Button sqlRegister, sqlView;

EditText  sqlFirstName,sqlLastName,sqlEmail,sqlMobileNumber,sqlCurrentLocation,sqlUsername,sqlPassword;

@Override
protected void onCreate(Bundle savedInstanceState){
super.onCreate(savedInstanceState);
setContentView(R.layout.registration);
sqlFirstName = (EditText) findViewById(R.id.etFname);
sqlLastName = (EditText) findViewById(R.id.etLname);
sqlEmail = (EditText) findViewById(R.id.etEmail);
sqlMobileNumber = (EditText) findViewById(R.id.etPhone);
sqlCurrentLocation = (EditText) findViewById(R.id.etCurrentLoc);

sqlUsername = (EditText) findViewById(R.id.etUsername);
sqlPassword = (EditText) findViewById(R.id.etPwd);

sqlRegister = (Button) findViewById(R.id.bRegister);

sqlRegister.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        switch (v.getId()){
        case R.id.bRegister:

                String firstname = sqlFirstName.getText().toString();
                String lastname = sqlLastName.getText().toString();
                String emailadd = sqlEmail.getText().toString();
                String number = sqlMobileNumber.getText().toString();
                String loc = sqlCurrentLocation.getText().toString();
                String uname = sqlUsername.getText().toString();
                String pwd = sqlPassword.getText().toString();

                SoapObject Request = new SoapObject(WSDL_TARGET_NAMESPACE,OPERATION_NAME);
                Request.addProperty("fname", String.valueOf(firstname));
                Request.addProperty("lname", String.valueOf(lastname));
                Request.addProperty("email", String.valueOf(emailadd));
                Request.addProperty("num", String.valueOf(number));
                Request.addProperty("loc", String.valueOf(loc));
                Request.addProperty("username", String.valueOf(uname));
                Request.addProperty("password", String.valueOf(pwd));
                Toast.makeText(Registration.this, "You have been registered Successfully", Toast.LENGTH_LONG).show();

                SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                envelope.dotNet = true;
                envelope.setOutputSoapObject(Request);
                HttpTransportSE httpTransport  = new HttpTransportSE(SOAP_ADDRESS);
                try
                {
                    httpTransport.call(SOAP_ACTION, envelope);
                    SoapObject response = (SoapObject)envelope.getResponse();
                    int result =  Integer.parseInt(response.getProperty(0).toString());
                    if(result == '1'){
                        Toast.makeText(Registration.this, "You have been registered Successfully", Toast.LENGTH_LONG).show();
                    }
                    else
                    {
                        Toast.makeText(Registration.this, "Try Again", Toast.LENGTH_LONG).show();
                    }
                }
                catch(Exception e)
                {
                   e.printStackTrace();
                }

            break;
        }
           }
        });
    }

} 
```

![在此处输入图像描述](../Images/0dbf8e5fcaeabcf5ffa373d3e87b06a6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T01:41:14.853

您收到 Application Not Responding 错误的非常简单的原因：您正在主 (UI) 线程上发出 Web 请求。Android 线程模型有两条规则：1) 不要阻塞主线程超过几秒钟 2) 不要从主线程更新 UI。你违反了这些规则中的第一条。您应该考虑使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)来执行更长的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T01:43:47.783

`httpTransport.call(SOAP_ACTION, envelope);` 您正在 UI 线程上进行网络调用。您需要执行所有长时间运行的任务，例如通过网络在单独的线程上访问资源。API 提供了一个方便的类调用`[AsyncTask][1]`，可让您轻松完成此操作。

在其最简单的形式中，您将创建一个扩展 AsyncTask 的类，然后将您`httpTransport.call(SOAP_ACTION, envelope);`移至它的`doInBackground`方法。

# azure - Windows Azure 和多个存储帐户

> ID：11424375
> 
> 赞同：4
> 
> 时间：2012-07-11T01:38:29.803
> 
> 标签：azure, multi-tenant

我有一个 ASP.NET MVC 2 Azure 应用程序，我试图从单租户切换到多租户。我一直在 Stack Overflow 上查看许多博客、帖子和问题，但我仍然试图围绕适合这个特定应用程序的细节展开思考。

目前，应用程序将一些信息存储在 SQL Azure 数据库中，以及一些其他信息存储在 Azure 存储帐户中。我正在考虑编写租户配置代码来简单地为新租户创建一个新数据库，以及一个新的 Azure 存储帐户。这使我想到以下问题：

我将如何在本地测试这种方法？据我所知，本地 Azure 存储模拟器只有 1 个存储帐户。我不确定我是否能够在本地创建其他人。我将如何在本地进行测试？或者有可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T02:25:44.983

多租户需要考虑很多方面，其中之一是数据架构。您还有计费、性能、安全性等。

关于数据架构，我们先来探索一下SQL存储。您可以使用以下选项：添加您的代码将用于过滤记录的 CustomerID（或其他标识符），为不同的客户使用不同的模式容器（每个客户都有自己的专用模式拥有的所有数据库对象的副本在数据库中）、线性分片（每个客户都有自己的数据库）和联合（SQL Azure 的一项功能，它根据性能和可伸缩性需求提供渐进式分片）。所有这些选项都是有效的，但对性能、可伸缩性、安全性、维护（例如备份）、成本以及当然数据库设计有不同的影响。根据您提供的信息，我无法告诉您选择哪一个；如果您已经有代码库，则某些模型比其他模型更容易实现。一般来说，线性分片是最简单的模型并提供强大的客户隔离，但可能是最昂贵的。基于模式的分离并不太难，但需要很好地处理安全要求，并且可能会引入跨客户的性能问题，因为这种方法不是无共享的（对于同一数据库上的客户）。最后，Federations 需要使用客户识别器并且有一些限制；然而，这项技术让您可以更好地控制性能分布和长期可扩展性（因为与线性分片一样，Federation 使用无共享架构）。基于模式的分离并不太难，但需要很好地处理安全要求，并且可能会引入跨客户的性能问题，因为这种方法不是无共享的（对于同一数据库上的客户）。最后，Federations 需要使用客户识别器并且有一些限制；然而，这项技术让您可以更好地控制性能分布和长期可扩展性（因为与线性分片一样，Federation 使用无共享架构）。基于模式的分离并不太难，但需要很好地处理安全要求，并且可能会引入跨客户的性能问题，因为这种方法不是无共享的（对于同一数据库上的客户）。最后，Federations 需要使用客户识别器并且有一些限制；然而，这项技术让您可以更好地控制性能分布和长期可扩展性（因为与线性分片一样，Federation 使用无共享架构）。

关于存储帐户，每个客户使用不同的存储帐户绝对是要走的路。如果不使用单独的存储帐户，您将面临的主要问题是性能限制，例如每秒可以使用单个存储帐户执行的最大事务数。但是，正如您所指出的，在本地进行测试可能是个问题。但是请考虑这一点：本地模拟器不提供与 Azure 存储帐户 100% 的对等（模拟器不支持某些功能）。所以我只会使用本地模拟器进行初始开发和故障排除。任何严肃的测试，包括多租户测试，都应该使用真实的存储帐户来完成。这是您可以完全测试应用程序的唯一方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T01:58:52.977

您应该考虑不创建单独的数据库，而是在单个 SQL 数据库中创建不同的对象命名空间。每个租户都可以拥有自己的一组表。

根据您使用存储的方式，您可以为每个客户端创建单独的存储容器或消息队列。

鉴于这些限制，您应该能够使用存储模拟器和本地 SQL 实例进行本地测试。

如果您需要进一步的解释，请告诉我。

# asp.net-mvc-3 - MVC 4，DI 容器（温莎）未找到区域中的控制器

> ID：11424376
> 
> 赞同：2
> 
> 时间：2012-07-11T01:38:30.487
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4

所以我决定试一试。使用 MVC 4，我设置了一个名为 Admin 的区域。我使用 Windsor 作为我的 DI 容器，我的安装程序看起来像这样。

```
container.Register(
            AllTypes.FromThisAssembly().BasedOn<IController>().Configure(
                component =>
                    {
                        component.Named(component.Implementation.Name);
                        component.LifestyleTransient();
                    }).WithServiceBase()); 
```

我在安装程序中尝试了几次代码迭代并得到相同的结果。在监视窗口中，我看到了主应用程序的所有控制器，但没有看到该区域的所有控制器，该区域位于同一个程序集中但不同的命名空间。我认为 FromThisAssembly 可以解决问题，但不！..

# matlab - 如何解析这个分号分隔的文件？

> ID：11424379
> 
> 赞同：3
> 
> 时间：2012-07-11T01:38:54.683
> 
> 标签：matlab, file-io

我有一个分号分隔的文件，格式如下：

```
Press;Temp.;CondF;Cond20;O2%;O2ppm;pH;NO3;Chl(a);PhycoEr;PhycoCy;PAR;DATE;TIME;excel.date;date.time
0.96;20.011;432.1;431.9;125.1;11.34;8.999;134;9.2;2.53;1.85;16.302;08.06.2011;12:01:52;40702;40702.0.5
1;20.011;433;432.8;125;11.34;9;133.7;8.19;3.32;2.02;17.06;08.06.2011;12:01:54;40702;40702.0.5
1.1;20.012;432.7;432.4;125.1;11.34;9;133.8;8.35;2.13;2.2;19.007;08.06.2011;12:01:55;40702;40702.0.5
1.2;20.012;432.8;432.5;125.2;11.35;9.001;133.8;8.45;2.95;1.95;21.054;08.06.2011;12:01:56;40702;40702.0.5
1.3;20.012;432.7;432.4;125.4;11.37;9.002;133.7;8.62;3.17;1.87;22.934;08.06.2011;12:01:57;40702;40702.0.5
1.4;20.007;432.1;431.9;125.2;11.35;9.003;133.7;9.48;4.17;1.6;24.828;08.06.2011;12:01:58;40702;40702.0.5 
```

如何在 matlab 中将其解析为矩阵？我不关心第一行，但我想要矩阵中的其余行。它们不需要转换成双精度，矩阵可以由字符串组成。文件中有新行，代表一行的结束。新行之前没有分号。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T13:26:44.247

考虑以下代码来读取数据：

```
fid = fopen('file.txt','rt');
frmt = [repmat('%f ',1,12) '%s %s %f %s'];
C = textscan(fid, frmt, 'Delimiter',';', 'CollectOutput',true, 'HeaderLines',1);
fclose(fid); 
```

首先，我们将不同的组件读入变量`C`：前十二列作为数字，接下来的两列作为字符串（我们将在下一步将它们转换为序列日期数字），另一个数字列，最后是字符串：

```
>> C
C = 
    [6x12 double]    {6x2 cell}    [6x1 double]    {6x1 cell} 
```

正如我所提到的，我们可以解析并`C{2}`转换为序列日期：

```
dt = datenum(strcat(C{2}(:,1),{' '},C{2}(:,2)), 'dd.mm.yyyy HH:MM:ss'); 
```

现在我们可以将它们全部合并到一个单元格数组中作为一个表格。我们使用元胞数组而不是数值矩阵，因为最后一列仍然是字符串。

```
>> data = [num2cell([C{1} dt C{3}]) C{4}]

data = 
  Columns 1 through 7
    [0.96]    [20.011]    [432.1]    [431.9]    [125.1]    [11.34]    [8.999]
    [   1]    [20.011]    [  433]    [432.8]    [  125]    [11.34]    [    9]
    [ 1.1]    [20.012]    [432.7]    [432.4]    [125.1]    [11.34]    [    9]
    [ 1.2]    [20.012]    [432.8]    [432.5]    [125.2]    [11.35]    [9.001]
    [ 1.3]    [20.012]    [432.7]    [432.4]    [125.4]    [11.37]    [9.002]
    [ 1.4]    [20.007]    [432.1]    [431.9]    [125.2]    [11.35]    [9.003]
  Columns 8 through 14
    [  134]    [ 9.2]    [2.53]    [1.85]    [16.302]    [7.3466e+05]    [40702]
    [133.7]    [8.19]    [3.32]    [2.02]    [ 17.06]    [7.3466e+05]    [40702]
    [133.8]    [8.35]    [2.13]    [ 2.2]    [19.007]    [7.3466e+05]    [40702]
    [133.8]    [8.45]    [2.95]    [1.95]    [21.054]    [7.3466e+05]    [40702]
    [133.7]    [8.62]    [3.17]    [1.87]    [22.934]    [7.3466e+05]    [40702]
    [133.7]    [9.48]    [4.17]    [ 1.6]    [24.828]    [7.3466e+05]    [40702]
  Column 15
    '40702.0.5'
    '40702.0.5'
    '40702.0.5'
    '40702.0.5'
    '40702.0.5'
    '40702.0.5' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T07:11:23.987

您可以为此使用 textscan。

```
 fid = fopen('data.txt'); %open file
 headers = fgetl(fid);    %get first line
 headers = textscan(headers,'%s','delimiter',';'); %read first line
 format = repmat('%s',1,size(headers{1,1},1)); %count columns and make format string
 data = textscan(fid,format,'delimiter',';'); %read rest of the file
 data = [data{:}]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T02:42:24.733

晚上最大。

我将假设您已经能够从文件中导入数据或以其他方式将其导入 Matlab。我通常用于此类数据的方法将其保留在单元格的列矩阵中。然后，每个单元格都包含文件中的一行数据。

然后，您可以将单元格转换为字符矩阵，并使用正则[表达式](http://www.mathworks.com/help/techdoc/ref/regexp.html)将该数据解析为更易于使用的矩阵，其中顶行是您的标题数据。

如果您遇到困难，只需发布​​一些代码，我们可以解决它。

干杯!

更新：

这是我正在谈论的代码。

```
A = importdata('filepath\sample.txt') %This uses the newline on each line to make a new row.
B= [];
for(n = 1:size(A,1))
    B = [B;regexp(cell2mat(A(n)),';','split')]; %This uses the ; to split the string
end 
```

Matlab 索引总是以（行，列）格式完成。所以像 matrix(2,3) 这样的东西会在第 2 行第 3 列的位置调用一个项目。Matlab 也总是从 1 开始索引，而不是像许多其他语言那样从 0 开始。

如果您有单行或单列（通常称为向量），则只需调用 matrix(4) 并返回第 4 个元素。如果您愿意，您还可以在矩阵中添加 3 层或更多层。如果你愿意，可以考虑一个矩阵矩阵。

在将可变长度数据存储在单个位置时，单元格非常有用。当数据存储在单元格中时，它仍然以与矩阵相同的方式调用，但您必须将其从单元格类型转换为矩阵 (cell2mat) 以用于某些用途。你会很快学会这些。还有其他方法可以从单元格转换，例如 cell2num。

希望对您有所帮助！

# php - 如何设置默认图像

> ID：11424382
> 
> 赞同：0
> 
> 时间：2012-07-11T01:39:08.480
> 
> 标签：php, mysql, image, null, default

好的，所以如果有人有图片，我有 sql 和输出，如果用户没有上传个人资料图片，我将如何重写它以设置默认图片？

```
$search = mysql_query("SELECT users.username, users.id, tbl_image.photo, tbl_image.userid FROM users LEFT OUTER JOIN tbl_image ON users.id=tbl_image.userid WHERE users.username LIKE '%$search_term%' and users.business <> 'business'");

<img src="/image/'.$results_row['photo'].'" width="50px" height="40px"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T01:49:34.400

如果图像为 NULL 或 ""，则使用默认值：

```
$image = $results_row['photo'];
if (empty($image)) $image = "default.png";
<img src="/image/'.$image.'" width="50px" height="40px"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T01:51:32.047

检查它是否为空。如果是，请使用默认照片。

```
$search = mysql_query("SELECT users.username, users.id, tbl_image.photo, tbl_image.userid FROM users LEFT OUTER JOIN tbl_image ON users.id=tbl_image.userid WHERE users.username LIKE '%$search_term%' and users.business <> 'business'");

$photo = $results_row['photo'] : $results_row['photo'] ? 'default_photo.jpg'

<img src="/image/'.$photo.'" width="50px" height="40px"> 
```

# java - 如何在 Android 中填充 ListFragment？

> ID：11424384
> 
> 赞同：1
> 
> 时间：2012-07-11T01:39:49.427
> 
> 标签：java, android, eclipse, android-listview, android-fragments

我看过各种关于如何将 Activity 转换为 ListActivity 以填充 ListView 的教程，但没有任何关于 ListFragments 的教程。我有两个标签，每个标签下都有一个片段。这是我的片段目前的样子......有人可以给我一些关于如何做到这一点的想法吗？

```
public class MainFragment extends ListFragment {    

String[] items = { "12 Monkeys", "(500) Days of Summer", "Chariots of Fire" };

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){      
        return inflater.inflate(R.layout.fragment_main, container, false);
 }
} 
```

这是XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

我正在尝试`items`在 ListView 中显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T01:44:32.763

您不需要膨胀`view`包含`listview`内部的`ListFragment`. 只需创建一个`adapter`，给它一些数据并输入`onCreate()`您的`fragment`调用`setListAdapter()`。然后在其他地方（大概在`Activity`您`fragment`的`fragmentmanager`.

# php - 将新行添加到表时使用 AJAX 更新页面

> ID：11424386
> 
> 赞同：0
> 
> 时间：2012-07-11T01:40:13.367
> 
> 标签：php, javascript, jquery, mysql, ajax

我正在学习 AJAX，因为我当前的项目需要它。我有一个提要，当将新行添加到 MYSQL 表时，我想实时更新该提要。我实际上已经用 node.js 做到了这一点，但不幸的是我的客户端服务器不能使用 NODE，所以我试图看看它是否可以使用 AJAX。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T06:28:00.567

用 jquery 做 ajax 更容易

```
$("#update_charges").live("click",function() {
     $.ajax(    
         {      
            type: "POST",
            url: "phpfile_toadd_updaterecord.php",
            data: "passvalue="+$('input_field_name').val(),
            success: function(msg)
           {
                            $('#result_div').html(msg); //msg contains any test echoed  from  //phpfile_toadd_updaterecord.php file
           }    
     });//end $.ajax    
 } 
```

下面可以是您的 html 代码

```
<form>
<div id="result_div"></div>
<input type="button" name="update_charges" id="update_charges" />
<input type="hidden" name="input_field_name" id="input_field_name" value="anyvalue_to be passed to php file"/>
</form> 
```

[jQuery ajax 帮助页面](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T01:43:50.260

您需要让客户端通过[轮询](http://ajaxpatterns.org/Periodic_Refresh)不断联系服务器，或者使用诸如[comet](http://en.wikipedia.org/wiki/Comet_%28programming%29)或[websockets](http://en.wikipedia.org/wiki/WebSocket)之类的推送技术。否则，您的客户无法知道新数据何时到达。

Comet 和 websockets 允许对过程进行最实时的感觉，因为它们实际上在数据可用时立即将数据发送到用户客户端（您连接的浏览器），而轮询只是您的浏览器每隔一段时间查询服务器。

缺点是推送技术，当然还有需要[HTTP Keep Alive](http://en.wikipedia.org/wiki/HTTP_persistent_connection)的彗星，在您的服务器上可能会非常繁重，特别是对于基于进程的服务器（例如 apache），它们的最大连接会很快被填满，然后一直保持到断开连接。它有调整选项和现代设置，但它不是最佳的：这个问题甚至有一个正式的名称[c10k](http://www.kegel.com/c10k.html)，这也是你看到基于事件的服务器最近变得流行的原因之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T01:50:49.847

我没有任何方法知道 MYSQL 或 PHP 在更新时可以将更新推送到页面的位置。

最好的选择可能是使用 javascript 运行计时器并定期检查数据库以查看是否有任何更新，

```
var refreshId = setInterval(function() { checkforUpdates(lastIndex) }, 10000); 
```

将表索引的最后一行传递给 javascript 函数，该函数对 PHP 进行 ajax 调用，查询数据库中的任何新行，如果返回任何更新，则使用 javascript 将它们添加到表中。

如果您还想检查更新的行，那就有点棘手了！

# c++ - 如何将 std::string 转换为无符号字符 [] 数组*正确*。我想我做错了，有人指出我正确的方向吗？

> ID：11424388
> 
> 赞同：4
> 
> 时间：2012-07-11T01:40:25.137
> 
> 标签：c++, arrays, char, buffer, byte

我目前正在对网络协议进行逆向工程，并编写了一个小型解密协议。

我曾经将数据包的字节定义为无符号字符数组，如下所示：

```
unsigned char buff[] = "\x00\xFF\x0A" etc. 
```

为了不为每个数据包多次重新编译程序，我制作了一个小型 GUI 工具，它可以从字符串中获取 \xFF 表示法中的字节。我是通过以下方式做到的：

```
int length = int(stencString.length());
unsigned char *buff = new unsigned char[length+1];
memcpy(buff, stencString.c_str(), length+1); 
```

当我调用我的函数时，当我使用先前的方法对其进行硬编码时，它给了我一个正确的解密，但是当我从字符串到数组的 memcpy 时，它给了我垃圾然后我的字符串的其余部分。令人毛骨悚然的部分？它们都有相同的打印输出！

这是我使用它的方式：http: [//pastie.org/private/kndfbaqgvmjiuwlounss9g](http://pastie.org/private/kndfbaqgvmjiuwlounss9g)

这是 kdxalgo.h (c) Luigi Auriemma： [http ://pastie.org/private/7dzemmwyyqtngiamlxy8tw](http://pastie.org/private/7dzemmwyyqtngiamlxy8tw)

有人可以指出我正确的方向吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T02:09:55.230

看看当你使用以下硬编码版本的 buff 时会发生什么。

```
unsigned char buff[] =
"\\xd3\\x8c\\x38\\x6b\\x82\\x4c\\xe1\\x1e"
"\\x6b\\x7a\\xff\\x4c\\x9d\\x73\\xbe\\xab"
"\\x38\\xc7\\xc5\\xb8\\x71\\x8f\\xd5\\xbb"
"\\xfa\\xb9\\xf3\\x7a\\x43\\xdd\\x12\\x41"
"\\x4b\\x01\\xa2\\x59\\x74\\x60\\x1e\\xe0"
"\\x6d\\x68\\x26\\xfa\\x0a\\x63\\xa3\\x88"; 
```

我怀疑它会产生与您输入以下内容相同的输出：`\xd3\x8c\x38\x6b\x82\x4c\xe1\x1e\x6b\x7a\xff\x4c\x9d\x73\xbe\xab\x38\xc7\xc5\xb8\x71\x8f\xd5\xbb\xfa\xb9\xf3\x7a\x43\xdd\x12\x41\x4b\x01\xa2\x59\x74\x60\x1e\xe0\x6d\x68\x26\xfa\x0a\x63\xa3\x88`.

编译器自动获取“\xd3”并将其转换为预期的底层二进制表示。您需要有一种将字符反斜杠、x、d、3 转换为相同二进制表示的方法。

* * *

如果您确定您将收到格式正确的输入，那么答案并不难：

```
unsigned char c2h(char ch)
{
    switch (ch)
    {
        case '0': return  0;
        case '1': return  1;
        case '2': return  2;
        case '3': return  3;
        case '4': return  4;
        case '5': return  5;
        case '6': return  6;
        case '7': return  7;
        case '8': return  8;
        case '9': return  9;
        case 'a': return 10;
        case 'b': return 11;
        case 'c': return 12;
        case 'd': return 13;
        case 'e': return 14;
        case 'f': return 15;
    }
}

std::string handle_hex(const std::string& str)
{
    std::string result;

    for (size_t index = 0; index < str.length(); index += 4) // skip to next hex digit
    {
        // str[index + 0] is '\\' and str[index + 1] is 'x'
        unsigned char ch = c2h(str[index+2]) * 16 + c2h(str[index+3]);
        result.append((char)ch);
    }

    return result;
} 
```

再次假设完美的格式，所以没有错误处理。我知道我会因为这个答案失去一些分数，因为这不是最好的方法，但我想让算法尽可能容易理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T03:04:37.273

正如 Jeffery 指出的那样，问题在于编译器处理`\xd3`并生成具有该值的字符，但是当您读入一个字符串时，您`\xd3`实际上是在读取 4 个字符：`\`、`x`和.`d``3`

您将需要读取字符串，然后将其解析为有效内容。对于一个简单的方法，您可以更改格式，以便输入是一个空格分隔的字符序列，编码为`0xd3`（因为这很容易解析）：

```
std::string buffer;
std::string input( "0xd3 0x8c 0x38" ); // this would be read
std::istringstream in( input );
in >> std::hex;
std::copy( std::istream_iterator<int>( in ),
           std::istream_iterator<int>(),
           std::back_inserter( buffer ) ); 
```

当然，不需要改变格式，你可以处理它。为此，您一次只需要读取一个字符。当你遇到 a`\`然后读取下一个字符，如果是`x`则读取接下来的两个字符（比如`ch1`and `ch2`）并将它们转换为整数值：

```
int value_of_hex( char ch ) {
   if (ch >= '0' && ch <= '9')
      return ch-'0';
   if (tolower(ch) >= 'a' && tolower(ch) <= 'f')
      return 10 + toupper(ch) - 'a';
   // error
   throw std::runtime_error( "Invalid input" );
}
value = value_of_hex( ch1 )*16 + value_of_hex( ch2 ); 
```

# c# - 如何修改 C# XNA 的缓出反弹方程？

> ID：11424391
> 
> 赞同：1
> 
> 时间：2012-07-11T01:41:08.110
> 
> 标签：c#, animation, xna-4.0, graphics2d

我在网上找到了 Robert Penner 的缓动函数。他们工作很棒。我得到了一个反弹的手，它也很好用，但我想减少第一次反弹或完全消除它。如何？

```
public static float EaseOutBounce(float currentTime, float startValue, float changeInValue, float totalTime)
{
    float magic1 = 7.5625f;
    float magic2 = 2.75f;
    float magic3 = 1.5f;
    float magic4 = 2.25f;
    float magic5 = 2.625f;
    float magic6 = 0.75f;
    float magic7 = 0.9375f;
    float magic8 = 0.984375f;

    if ((currentTime /= totalTime) < (1 / magic2)) //0.36%
    {
        return changeInValue * (magic1 * currentTime * currentTime) + startValue;
    }
    else if (currentTime < (2 / magic2)) //0.72%
    {
        return changeInValue * (magic1 * (currentTime -= (magic3 / magic2)) * currentTime + magic6) + startValue;
    }
    else if (currentTime < (2.5 / magic2)) //0.91%
    {
        return changeInValue * (magic1 * (currentTime -= (magic4 / magic2)) * currentTime + magic7) + startValue;
    }
    else
    {
        return changeInValue * (magic1 * (currentTime -= (magic5 / magic2)) * currentTime + magic8) + startValue;
    }
} 
```

我浏览了 Robert 的 pdf（77 页），并尝试了这些值以查看它们的效果，但我只是成功地打破了它。:-) 第一次反弹似乎在第二个 if 语句中。我改变了幻数 1、2、3 和 6，将它们减半并加倍，然后轻推它们，但这只会破坏动画。

有谁知道神奇的数字是什么意思？为什么一切都除以 2.75？为什么不是2，为什么不是3？为什么一切都乘以 7.5625？为什么不是 8，为什么不是 6？

如果有人可以解释，或者只是启发我如何取出第一次反弹，我将永远感激不尽。

# amazon-s3 - 用于计算文件访问和完成下载的 Ruby 脚本

> ID：11424393
> 
> 赞同：0
> 
> 时间：2012-07-11T01:41:13.503
> 
> 标签：amazon-s3, amazon-web-services

我愿意接受以下建议：

*   在 S3 上有一个文件

*   此文件将由随机人随机下载

*   下载量很低，每天最多 200-300 次，但通常可能低至 5-10 次。

*   文件大小约为 10-20mb。

我需要以某种方式计算 a) 对文件的访问次数 b) 发生了多少完整（完成）下载。

我相信唯一美好的一天就是拥有一些 Ruby 或 Node.js 脚本。它会计算访问次数，然后以某种方式提供文件，并在最后一个字节上完成计数。不幸的是，这种方法似乎不太好。

有更好的想法吗？我也在考虑在 S3 上启用访问日志，然后解析日志，但这似乎也不太好，因为需要下载和解析日志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:28:15.073

我会坚持你的第一个想法。有某种服务器端逻辑来处理计数的东西。

我不知道哪种类型的客户端正在访问您的系统，但是通过这种方法，您可以解析来自客户端的其他数据，例如 HTTP 标头（如果适用）等，这可以帮助您识别客户端的配置文件。不过，这可能对你一点用处都没有。

此外，如果您需要添加更复杂的逻辑（身份验证、特权、权限、上传文件等），一旦您已经有了后端应用程序/脚本，这将变得更加容易。

# objective-c - iPhone XML 发布到 Web 服务 - 一些 GUID 显示为亚洲字符

> ID：11424396
> 
> 赞同：0
> 
> 时间：2012-07-11T01:41:41.620
> 
> 标签：objective-c, ios, xml, encoding

Web 服务另一端的合作伙伴说，我们发送用于跟踪的某些 ID 显示不正确。这是他们发送给我们的同一个 XML 文档中的正常 1 和 2 损坏的：

```
<pageID>1e7baddf-1d5f-47bc-ab0f-83a9393e189e</pageID>
<pageID>齎ﺹ鲈｝≊扚Წ</pageID>
<pageID>᜗乯・뤙Ṝ괨Ⅻ㋼</pageID> 
```

知道为什么会发生这种情况吗？这很少见，我不知道字符应该是什么，但它应该是第一项的格式。

我努力了

```
 [NSMutableString stringWithString:
[self stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]; 
```

和

```
[(NSString*)CFURLCreateStringByAddingPercentEscapes(
NULL, (CFStringRef)self, NULL, (CFStringRef)@"!*'();:@&=+$,/?%#[] ",
kCFStringEncodingUTF8) autorelease] 
```

他们声称它仍在发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T01:51:00.323

你的 pageID 看起来像十六进制数字，它不仅是亚洲字符，还有一些阿拉伯字体。

1.  尝试在它们离开函数之前打印正在发送到 Web 服务的实际字符串。所以我想如果你正在使用`NSURLConnection`然后在发送数据之前检查。
2.  如果正在发送的数据是所需的，那么这不是你的错，而是网络服务的反序列化方法内部的错误。

# spring - 无法实例化 neo4j

> ID：11424398
> 
> 赞同：0
> 
> 时间：2012-07-11T01:42:05.260
> 
> 标签：spring, nosql, neo4j, graph-databases

我开始学习neo4j DB。我的测试代码如下：

```
@Test
public void persistedMovieShouldBeRetrievableFromGraphDb() {
    GraphDatabaseService graphDB = new EmbeddedGraphDatabase("data/graph.db");
    registerShutdownHook(graphDB);
    Transaction tx = graphDB.beginTx();
    try{
        Neo4jTemplate template = new Neo4jTemplate(graphDB);
        Movie forrestGump = template.save(new Movie("Forrest Gump", 1994));
        Movie retrievedMovie = template.findOne(forrestGump.getId(), Movie.class);
        assertEquals("Retrieved Movie matched persisted one", forrestGump, retrievedMovie);
        assertEquals("retrieved movie title matches", "Forrest Gump", retrievedMovie.getTitle());
    }
    finally{
        tx.finish();
    }
} 
```

但是，它总是给出一个例外：

```
java.lang.NoSuchMethodError: org.neo4j.kernel.impl.transaction.SpringTransactionManager.<init>(Lorg/neo4j/kernel/GraphDatabaseAPI;)V 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T12:11:54.400

我同意 Nicholas 的建议，即这很可能是一个简单的 pom.xml 配置问题。查看示例 Spring Data Neo4j[示例项目](https://github.com/SpringSource/spring-data-neo4j/tree/master/spring-data-neo4j-examples)，以将声明的依赖项与您的项目进行比较。

-安德烈亚斯

# c++ - 运算符>>重载与结构？

> ID：11424401
> 
> 赞同：1
> 
> 时间：2012-07-11T01:43:15.480
> 
> 标签：c++, overloading

> **可能的重复：**
> [在 C++ 中的类中重载运算符 <<](https://stackoverflow.com/questions/1200475/overload-operator-within-a-class-in-c)
> [运算符重载](https://stackoverflow.com/questions/4421706/operator-overloading)

有什么办法可以吗？

```
#include <iostream>
using namespace std;
struct test{
  int n;
};
int main(){
  test t1;
  cin >> t1;
  return 0;
} 
```

据我所知，这是不可能的，但是我昨天参加了一次考试，并且那个问题出现了，它要求我编写缺少的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T01:45:31.257

在 C++ 中，结构与类相同。所以是的，你可以做和上课一样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T02:01:47.410

添加包括：

```
#include <stdlib.h> 
```

您应该包括两个命名空间： using namespace System; // 即 System::Console using namespace std;

您需要使用：

```
std::cin >> t1.n; 
```

# python - Boto - 如何从 route53 中删除记录集 - 尝试删除资源记录集但未找到

> ID：11424403
> 
> 赞同：9
> 
> 时间：2012-07-11T01:43:21.557
> 
> 标签：python, boto, amazon-route53

我正在使用以下内容删除 route53 记录。我没有收到错误消息。

```
conn = Route53Connection(aws_access_key_id, aws_secret_access_key)
changes = ResourceRecordSets(conn, zone_id)
change = changes.add_change("DELETE",sub_domain, "A", 60,weight=weight,identifier=identifier)
change.add_value(ip_old)
changes.commit() 
```

所有必填字段都存在并且它们匹配..重量、标识符、ttl=60 等。\

例如

```
test.com. A 111.111.111.111 60 1 id1
test.com. A 111.111.111.222 60 1 id2 
```

我想删除 111.111.111.222 和记录集。

那么，删除记录集的正确方法是什么？

对于记录集，我将有多个由唯一标识符区分的值。当一个 ip 地址处于活动状态时，我想从 route53 中删除。我正在使用一个糟糕的负载平衡。

```
Here is the meta of the record  want to delete.  
{'alias_dns_name': None,
  'alias_hosted_zone_id': None,
  'identifier': u'15754-1',
  'name': u'hui.com.',
  'resource_records': [u'103.4.xxx.xxx'],
  'ttl': u'60',
  'type': u'A',
  'weight': u'1'}

Traceback (most recent call last):
  File "/home/ubuntu/workspace/rtbopsConfig/classes/redis_ha.py", line 353, in <module>
    deleteRedisSubDomains(aws_access_key_id, aws_secret_access_key,platform=platform,sub_domain=sub_domain,redis_domain=redis_domain,zone_id=zone_id,ip_address=ip_address,weight=1,identifier=identifier)
  File "/home/ubuntu/workspace/rtbopsConfig/classes/redis_ha.py", line 341, in deleteRedisSubDomains
    changes.commit()
  File "/usr/local/lib/python2.7/dist-packages/boto-2.3.0-py2.7.egg/boto/route53/record.py", line 131, in commit
    return self.connection.change_rrsets(self.hosted_zone_id, self.to_xml())
  File "/usr/local/lib/python2.7/dist-packages/boto-2.3.0-py2.7.egg/boto/route53/connection.py", line 291, in change_rrsets
    body)
boto.route53.exception.DNSServerError: DNSServerError: 400 Bad Request
<?xml version="1.0"?>
<ErrorResponse xmlns="https://route53.amazonaws.com/doc/2011-05-05/"><Error><Type>Sender</Type><Code>InvalidChangeBatch</Code><Message>Tried to delete resource record set hui.com., type A, SetIdentifier 15754-1  but it was not found</Message></Error><RequestId>9972af89-cb69-11e1-803b-7bde5b9c457d</RequestId></ErrorResponse> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-15T09:27:50.883

我尝试了类似的示例，并且必须指定所有字段，包括权重和 ttl 才能成功删除。（通过保持默认，它不起作用）。无法使用加权 DNS 记录产生原始问题并明确通过 ttl。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T15:16:57.330

您确定需要 add_change 的所有这些参数吗？

[在这里查看 add_change。](http://boto.readthedocs.org/en/2.3.0/ref/route53.html)

为函数提供了默认参数，因此您可能会通过提供权重和 TTL 来过度指定。

尝试将重量和 TTL 排除在外（您可能需要保留标识符）。[本博客](http://danieljamesscott.org/17-software/development/33-manipulating-aws-route53-entries-using-boto.html)提供了一个删除记录的简单示例：

此外，我看不到您传递的参数的值，但请确保它们的完整性并尝试包含“。” 在您的子域末尾

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-07T17:48:59.867

# 博托3

```
import boto3

client = boto3.connect('route53')
hosted_zone_id = "G5LEP7LWYS8WL2"

response = client.change_resource_record_sets(
    ChangeBatch={
        'Changes': [
            {
                'Action': 'DELETE',
                'ResourceRecordSet': {
                    'Name': 'test.example.com',
                    'ResourceRecords': [
                        {
                            'Value': '10.1.1.1',
                        },
                    ],
                    'Type': 'A',
                },
            },
        ]
    },
    HostedZoneId=hosted_zone_id,
)

print(response) 
```

来源：[https ://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/route53.html#Route53.Client.change_resource_record_sets](https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/route53.html#Route53.Client.change_resource_record_sets)

# 博托

```
import boto
from boto.route53.record import ResourceRecordSets

conn = boto.connect_route53()

hosted_zone_id = "G5LEP7LWYS8WL2"
record_sets = ResourceRecordSets(conn, hosted_zone_id)

change = record_sets.add_change("DELETE", "test.example.com", "A")
change.add_value("10.1.1.1")

response = record_sets.commit()
print(response) 
```

资料来源：[https ://danieljamesscott.org/17-software/development/33-manipulating-aws-route53-entries-using-boto.html](https://danieljamesscott.org/17-software/development/33-manipulating-aws-route53-entries-using-boto.html)

# regex - Emacs 正则表达式的挫败感

> ID：11424410
> 
> 赞同：3
> 
> 时间：2012-07-11T01:44:05.873
> 
> 标签：regex, emacs

有人可以解释为什么这个 Emacs 正则表达式

```
find_class \(\w+|([^)]+)\) \(\w+|([^)]+)\) 
```

这些行中的任何一行都不匹配？

```
let _, scn, _ = find_class (obj :: cs) c in scn

aux (find_class (obj :: cs) scn) (cn :: desc)

let _, scn, ms = find_class c cs in 
```

看起来很简单：我正在寻找函数的调用，其中参数可以显示为单个单词或带括号的任意字符串。当我将等效表达式 ( `find_class (\w+|\([^)]+\)) (\w+|\([^)]+\))`) 插入 Ruby 时，它会执行我想要的操作，但不是在这里。我错过了什么吗？

我发现 Emacs 的正则表达式对于实际使用来说真的很麻烦，以至于我正在重新考虑我选择的编辑器。如果有一种合理的方法来改进这一点（即更简洁的语法，更多的字符类），我很想听到它，但我还没有找到任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T01:51:57.610

我认为您需要`\|`在 emacs 正则表达式中达到与 Ruby 相同`|`的效果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T02:07:04.747

回复：很麻烦，看看 Emacs 的正则表达式的文档会有所帮助：

[http://www.gnu.org/software/emacs/manual/html_node/elisp/Syntax-of-Regexps.html](http://www.gnu.org/software/emacs/manual/html_node/elisp/Syntax-of-Regexps.html)

第 3 节“正则表达式反斜杠”包含 nhahtdh 已经指出的问题的答案。不要忘记 Emacs 的正则表达式语法早于 POSIX 标准。

# grails - 当我将应用程序复制到新机器时，Grails 想要降级我的插件

> ID：11424420
> 
> 赞同：0
> 
> 时间：2012-07-11T01:45:37.887
> 
> 标签：grails, plugins, dependencies

当我将我的应用程序复制到另一台机器并执行“grails run-app”时，grails 似乎跳过了更新其本地插件的步骤。（我的意思是第一台计算机刚刚完成`Downloading: plugins-list.xml`，但是当我在第二台机器上运行该应用程序时，新机器不会执行该步骤。）我收到以下消息：

```
Loading Grails 2.0.3
Configuring classpath

Environment set to development.....
Packaging Grails application
You currently already have a version of the plugin installed [resources-1.1.6]. Do you want to update to [resources-1.1.5]? [y,n] n
Plugin resources-1.1.5 install aborted
Compiling 92 source files 
```

我是否正确诊断，如何强制更新？此外，如果我接受降级，我的应用程序就会中断。不知道这是怎么回事，因为它与 1.1.5 一起工作了一段时间..

我感觉正在发生的事情是，当 grails 的插件魔法上次更新时，grails 在项目中做了一个注释，所以当我移动项目时，其他 grails 错误地认为它刚刚更新。这完全正确吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T03:42:20.237

您是在`BuildConfig.groovy`文件中指定插件还是使用`install-plugin`命令“安装”插件？我的阅读表明`install-plugin`不再推荐使用该命令，您应该在`BuildConfig.groovy`文件中指定插件，然后 Grails 将处理它，无论您部署在什么机器上。

例子：

```
plugins {
    /*
    * build - dependency that is only needed by the build process
    * compile - dependency that is needed at both compile-time and runtime. This is the most common case
    * provided - dependency that is needed at compile-time but should not be packaged with the app (usually because it is provided by the container). An example is the Servlet API
    * runtime - dependency that is needed to run the application, but not compile it e.g. JDBC implementation for specific database vendor. This would not typically be needed at compile-time because code depends only the JDBC API, rather than a specific implementation thereof
    * test - dependency that is only needed by the tests
    */
    runtime ":cached-resources:1.0"
    runtime ":database-migration:1.1"
    runtime ":hibernate:$grailsVersion"
    runtime ":jquery:1.7.1"
    runtime ":resources:1.1.6"        
    runtime ":yui-minify-resources:0.1.4"
    runtime ":zipped-resources:1.0"

    compile ":cache-headers:1.1.5"
    compile ":commentable:0.8.1"
    compile ":jquery-ui:1.8.15"
    compile ":joda-time:1.4"
    compile ":searchable:0.6.3"
    compile ":spring-security-ldap:1.0.6" // Also installs spring-security-core

    build ":tomcat:$grailsVersion"

} 
```

另请注意，某些插件还需要在文件`dependencies`部分中的特殊条目`BuildConfig.groovy`。该`JodaTime`插件就是这样一个插件。

```
dependencies {
    compile "org.jadira.usertype:usertype.jodatime:1.9"
} 
```

插件的文档应指定是否`dependencies`需要该部分中的任何条目。

# javascript - 循环的Javascript问题

> ID：11424426
> 
> 赞同：0
> 
> 时间：2012-07-11T01:46:32.443
> 
> 标签：javascript, jquery

嗨，我正在尝试使用一些 javascript，JS 函数如下所示

```
var changing_thumbs = new Array();
function changeThumb(index, i, thumb_count, path) {
    if (changing_thumbs[index]) {
        if (path.indexOf('imageCount=') !== -1) {
            lastIndexOfEquals = path.lastIndexOf('=');
            path = path.substring(0, lastIndexOfEquals + 1);
            $j('#' + index).attr('src', path + i);
        }
        else {
            $j('#' + index).attr('src', path + '&imageCount=' + i);
        }
            i = i % thumb_count + 1;
        changing_thumbs[index] = setTimeout("changeThumb('" + index + "', '" + i + "', '" + thumb_count + "', '" + path + "')", 600);
    }
}
function startVideoPreview(index, thumb_count, path) {
   changing_thumbs[index] = true;
   changeThumb(index, 1, thumb_count, path);
}
function endVideoPreview(index, path) {
   clearTimeout(changing_thumbs[index]);
   document.getElementById(index).src = path;
} 
```

html调用如下

```
<img id="3a80b9aa-8b2f-4fb9-b3b0-02b2f55bf3be" src="/Image/GetClipImg?photoID=3a80b9aa-8b2f-4fb9-b3b0-02b2f55bf3be&userID=2" alt="Test Clip Description" onmouseout="endVideoPreview('3a80b9aa-8b2f-4fb9-b3b0-02b2f55bf3be', '/Image/GetClipImg?photoID=3a80b9aa-8b2f-4fb9-b3b0-02b2f55bf3be&userID=2')" onmouseover="startVideoPreview('3a80b9aa-8b2f-4fb9-b3b0-02b2f55bf3be', 7, '/Image/GetClipImg?photoID=3a80b9aa-8b2f-4fb9-b3b0-02b2f55bf3be&userID=2')"> 
```

一切似乎都很好，但这两行

```
i = i % thumb_count + 1;
changing_thumbs[index] = setTimeout("changeThumb('" + index + "', '" + i + "', '" + thumb_count + "', '" + path + "')", 600); 
```

在执行之前的 IF 语句后永远不会被击中，他们只是被踩到了。我确信这将是一些基本的东西，但我对 JS 很陌生，我似乎看不出问题出在哪里。任何提示或提示将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T01:53:54.063

`setTimeout`需要回调。

并且不要使用字符串作为第一个参数，使用函数。

尝试这个：

```
changing_thumbs[index] = setTimeout(function() {
  changeThumb(index, i, thumb_count, path);
}, 600); 
```

# c# - 如何使 CRUD m:m 关系 c#

> ID：11424429
> 
> 赞同：0
> 
> 时间：2012-07-11T01:46:35.413
> 
> 标签：c#, model

如何在我的模型中建立 CRUD 关系 m:m？

例子：

### 我的桌子

*   人员（人员 ID、姓名）
*   事物（事物 ID、名称）
*   PeopleHasThing (PeopleId, ThingId)

### 我的模特

PeopleModel.cs：

```
 public int PeopleId { get; set; }
    public string Name
    {
        get { return _name; }
        set
        {
            if(value == _name) return;
            _name = value;
            OnPropertyChanged("Name");
        }
    }

    public List<ThingModel> HasThing
    {
        get { return _hasThing; }

        set
        {
            if(value == _hasThing) return;
            _hasThing= value;
            OnPropertyChanged("HasThing");
        }
    }

    public static int Insert(PeopleModel m)
    {
        using (_context = new myDataContext())
        {
            var d = new People
            {
                Name = m.Name
                Thing = // I don't know how to end this line
            };

            _context.People.InsertOnSubmit(d);
            _context.SubmitChanges();

            return d.PeopleId;
        }
    } 

    // I don't know how to update or retrieve this from the database
    public static void Update(PeopleModel m);
    public static void ListAll();

    // With this I dont have problem! :P
    public static void Delete(int peopleId); 
```

PeopleHasThingModel.cs

```
 public int PeopleId { get; set; }
    public int ThingId  { get; set; } 
```

事物模型.cs

```
 public int ThingId { get; set; }

    public string Name
    {
        get { return _name; }
        set
        {
            if(value == _name) return;
            _name = value;
            OnPropertyChanged("Name");
        }
    }

    public bool IsMarked
    {
        get { return _isMarked; }

        set
        {
            if(value == _isMarked) return;
            _isMarked= value;
            OnPropertyChanged("IsMarked");                
        }

    } 
```

事物是我表单中的列表是从事物表填充的复选框列表。

### 例子

我在`things`表中有 3 条记录：

```
1, "house"
2, "dog"
3, "car" 
```

我需要保存一个新的`people`和她`thing`的：

人们：

```
 1, "ruben" 
```

人有事：

```
 1, 1 -- ruben has house
   1, 3 -- ruben has car 
```

## 早期方法

人模型.cs

```
 public static int Insert(PeopleModel m)
    {
        using (_context = new myDataContext())
        {
            var people = new People
            {
                Name = m.Name
            };

            // Create the PeopleHasThing record
            m.HasThing.ForEach((e) =>
            {
                people.PeopleHasThing.Add(new PeopleHasThing
                {
                    ThingId = e.ThingId,
                    People = people
                });
            });

            _context.People.InsertOnSubmit(people);
            _context.SubmitChanges();

            return people.PeopleId;
        }
    }

    // The following method works!
    // I've tried but I have my doubts about deleting records
    public static void Update(PeopleModel p)
    {
        using (_context = new myDataContext())
        {
            var result = (from r in _context.People
                         where r.PeopleId == p.PeopleId
                         select r).SingleOrDefault();

            if (null == result) return;

            result.Name = p.Name;

            //Delete all PeopleHasThings with result.PeopleId ...

            EntitySet<PeopleHasThing> set = new EntitySet<PeopleHasThing>();
            m.HasThing.ForEach(e =>
            {
                if (e.IsMarked)
                {
                    set.Add(new PeopleHasThing
                    {
                        ThingId = e.ThingId,
                        People = result
                    });
                }
            });

            result.PeopleHasThing = set;

            _context.SubmitChanges();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T03:17:52.657

您的 3 个模型如下所示：

```
class PeopleModel {
  public int PeopleID { get; set; }
  public string Name  { get; set; }
  /* .. additional fields or values .. */
}

class ThingsModel {
  public int ThingsID { get; set; }
  public string Name  { get; set; }
  /* .. additional fields or values .. */
}

class PeopleHasThing {
  public int PersonID { get; set; }
  public int ThingsID { get; set; }
} 
```

您可以使用 3 表模型来解决此问题，方法是在**People**表中仅包含与*人员相关的字段，在***Things表中仅包含与***事物*相关的字段。

 *****然后，您将在 PeopleHasThing 表中存放您的所有关系，其中包含所需的行数。

当您创建/编辑人员和事物时，您需要知道 ID # 以建立您的关系

```
PeopleModel myPerson = new PeopleModel();
myPerson.PeopleID // ID of Person
ThingsModel myThing = new ThingsModel();
myThings.ThingsID // ID of Thing

PeopleHasThings relationship = new PeopleHasThings();
relationship.PeopleID = myPerson.PeopleID;
relationship.ThingsID = myThings.ThingsID; 
```

**例子**

人们：

```
1, "ruben"
2, "joe" 
```

事物：

```
1, "house"
2, "dog"
3, "car" 
```

人有事：

```
1, 1 -- ruben has house
1, 3 -- ruben has car
2, 1 -- joe has house 
```*****

# html - 将 html 列表嵌套到 json

> ID：11424430
> 
> 赞同：1
> 
> 时间：2012-07-11T01:46:35.990
> 
> 标签：html, json, nested-sets

```
 [
 {
   "tree_id": 6,
   "fields" : ["id","lft", "rgt"], // tree_id is stripped if requested via fields because redundant
   "values" :
       [1,1,4,[
           [2,2,3,[]]
       ]]
 }
 // more could follow ...
] 
```

以上是 Bobab 用于导出/导入嵌套集的 json 代码。 [Baobab 嵌套集 json 导出/导入格式](http://www.sideralis.org/baobab/api.html#Baobab.export)

如何解析嵌套的 html 列表以生成像上面这样的 json？

我正在尝试使用拖放嵌套列表来操作嵌套 [列表](http://dbushell.github.com/Nestable/)

它有 2 个功能可以实现我想要实现的功能，但我的脑袋一直在绕着它转。

```
 toHierarchy: function(options) {

        var o = $.extend({}, this.options, options),
            sDepth = o.startDepthCount || 0,
            ret = [];

        $(this.element).children(o.items).each(function () {
            var level = _recursiveItems(this);
            ret.push(level);
        });
        //console.log(JSON.stringify(ret));
        return ret;

        function _recursiveItems(item) {
            var id = ($(item).attr(o.attribute || 'id') || '').match(o.expression || (/(.+)[-=_](.+)/));
            if (id) {
                var currentItem = {"id" : id[2]};
                if ($(item).children(o.listType).children(o.items).length > 0) {
                    currentItem.children = [];
                    $(item).children(o.listType).children(o.items).each(function() {
                        var level = _recursiveItems(this);
                        currentItem.children.push(level);
                    });
                }
                return currentItem;
            }
        }
    },

    toArray: function(options) {

        var o = $.extend({}, this.options, options),
            sDepth = o.startDepthCount || 0,
            ret = [],
            left = 2;

        ret.push({
            "item_id": o.rootID,
            "parent_id": 'none',
            "depth": sDepth,
            "left": '1',
            "right": ($(o.items, this.element).length + 1) * 2
        });

        $(this.element).children(o.items).each(function () {
            left = _recursiveArray(this, sDepth + 1, left);
        });

        ret = ret.sort(function(a,b){ return (a.left - b.left); });
        //console.log(JSON.stringify(ret));
        return ret;

        function _recursiveArray(item, depth, left) {

            var right = left + 1,
                id,
                pid;

            if ($(item).children(o.listType).children(o.items).length > 0) {
                depth ++;
                $(item).children(o.listType).children(o.items).each(function () {
                    right = _recursiveArray($(this), depth, right);
                });
                depth --;
            }

            id = ($(item).attr(o.attribute || 'id')).match(o.expression || (/(.+)[-=_](.+)/));

            if (depth === sDepth + 1) {
                pid = o.rootID;
            } else {
                var parentItem = ($(item).parent(o.listType)
                                         .parent(o.items)
                                         .attr(o.attribute || 'id'))
                                         .match(o.expression || (/(.+)[-=_](.+)/));
                pid = parentItem[2];
            }

            if (id) {
                    ret.push({"item_id": id[2], "parent_id": pid, "depth": depth, "left": left, "right": right});
            }

            left = right + 1;
            return left;
        }

    }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:02:45.177

如果您的目标是使用 Baobab 库在数据库中插入该数据，那么您不需要自己创建带有左/右索引的 JSON 代码，这可能相当复杂。

只需将树结构数据发送到服务器，然后在服务器端对其进行迭代，将对象添加到数据库中。

你可以用这样的东西创建一个通用的树结构（使用 jQuery 有一个更短的例子）：

```
function genTree(domNode){
  var parentObj = {
    data : { /* filled with data found in domNode, e.g. the baobab node id */ },
    children: []
  };

  $(domNode).find('> li, > ul > li').each(function(){
    parentObj.children.push(genTree(this));
  });

  return parentObj;
} 
```

然后，当您浏览该结构时，您将使用 Baobab API 将节点添加到您的数据库中（此时您可以将其导出为 JSON，如果您真的需要它）

# php - 我应该根据他们在 symfony2 和 mysql 中的角色制作一个或多个用户表吗

> ID：11424433
> 
> 赞同：1
> 
> 时间：2012-07-11T01:47:21.840
> 
> 标签：php, mysql, database-design, symfony

我有层次结构，其中有不同类别的用户，例如

1.  员工管理员
2.  教师
3.  父母
4.  学生们

我正在考虑将它们全部放在一个名为的数据库表中`usertable`

但是所有类别都有不同的属性，然后学生也会有他们的父母。所以与自己的用户表会有多对多的关系。

但是如果我制作不同的表格，那么不同人的登录过程会有所不同。

我该怎么走

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T02:11:29.220

由于用户都将共享共同的详细信息，例如用户名、密码等，因此您只需要一张`user`表。您实际上应该为此使用[FOSUserBundle](https://github.com/FriendsOfSymfony/FOSUserBundle)。如果不同类型的用户有不同的独特细节集，我建议为每个用户类型创建额外的表，并使用外键将用户从`user`表链接到新表（可能命名为`parent_profile`,`student_profile`等）

关于用户的层次结构，您应该使用角色。Symfony2[文档](http://symfony.com/doc/current/book/security.html#roles)有你在这个主题上需要的所有信息。

如果您需要将用户相互链接，请阅读 Doctrine 2 对[一对一自引用](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/association-mapping.html#one-to-one-self-referencing)和[一对多自引用](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/association-mapping.html#one-to-many-self-referencing)关联的支持。如果您为用户用户类型使用单独的实体类，则可以使用常规的一对一和一对多关联技术。

希望这可以帮助。

# android - 使用 ADB 连接到我的 Android VirtualBox 安装，现在如何从 Eclipse 安装 apk？

> ID：11424435
> 
> 赞同：0
> 
> 时间：2012-07-11T01:47:36.170
> 
> 标签：android, eclipse, adb, virtualbox

我使用 VirtualBox 创建了 Android 操作系统的虚拟安装（Android 4.0，从[http://www.android-x86.org](http://wwww.android-x86.org)下载）。经过一番努力，我设法将其配置为可以访问互联网并在我的网络上本地显示，并拥有自己的本地 IP (192.168.1.115)。接下来，我在主机上使用 Android SDK 中的**adb工具成功连接到虚拟 Android 设备，使用以下命令：**

```
adb connect 192.168.1.115 
```

现在，我可以使用 adb 安装 APK，使用

```
adb install C:\path\to\myApp.apk 
```

在第一次在 Eclipse 中导出签名的 APK 之后（我发现未签名的 APK 不会通过 adb 安装，而是给出有关证书或其他内容的错误消息）。

这很好，它可以工作，但是这个过程非常慢，因为我必须经历在 Eclipse 中导出的整个过程，从我的命令行运行 adb install 命令，然后最后切换到我的虚拟 Android 平板电脑并点击运行它的应用程序。我的问题是：**有没有更简单的方法来配置 Eclipse，以便我可以一键构建/安装/运行（甚至两次单击）？** 我怀念选择“作为 Android 应用程序运行”并让应用程序立即在 Android 模拟器中弹出的简单性，但模拟器在测试方面要差得多。

另请注意：我已经阅读了一些指南，似乎声称该设备应该出现在 Eclipse 的 AVD 列表中，但我所看到的只是我的两个模拟器设备，而不是我的 VirtualBox Android 安装，即使我的主机已经使用adb 连接到设备，并且设备在“adb devices”命令中显示为“设备”（而不是“离线”或其他任何可能有问题的内容）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T02:00:45.987

找到了。

我必须右键单击项目“运行方式-> 运行配置...”。然后，在“Android 应用程序”下，单击我的项目名称，单击“目标”选项卡，然后单击“始终提示选择设备”。然后单击运行。

从弹出的菜单中，我的设备显示在那里，我可以将其设置为默认设备，尽管该设备没有出现在其他任何地方的设备列表中（甚至没有出现在“目标”选项卡中）。

现在，单击 Eclipse 中通常的“运行”按钮将负责构建 apk、将其安装到虚拟设备以及在虚拟设备上运行它的所有步骤。

# android - 应用程序意外停止

> ID：11424436
> 
> 赞同：1
> 
> 时间：2012-07-11T01:47:37.873
> 
> 标签：android, google-maps

我是 android 新手，正在开发一个使用 google maps API 的应用程序。

运行应用程序时出现错误：

> 应用程序意外停止

这是我在 logcat 文件中的内容：

```
07-11 01:38:25.751: E/AndroidRuntime(401): FATAL EXCEPTION: main
07-11 01:38:25.751: E/AndroidRuntime(401): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.training.surveyproject/com.training.surveyproject.SurveyActivity}: java.lang.ClassNotFoundException: com.training.surveyproject.SurveyActivity in loader dalvik.system.PathClassLoader[/data/app/com.training.surveyproject-2.apk]
07-11 01:38:25.751: E/AndroidRuntime(401):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
07-11 01:38:25.751: E/AndroidRuntime(401):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
07-11 01:38:25.751: E/AndroidRuntime(401):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
07-11 01:38:25.751: E/AndroidRuntime(401):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
07-11 01:38:25.751: E/AndroidRuntime(401):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-11 01:38:25.751: E/AndroidRuntime(401):  at android.os.Looper.loop(Looper.java:123)
07-11 01:38:25.751: E/AndroidRuntime(401):  at android.app.ActivityThread.main(ActivityThread.java:4627)
07-11 01:38:25.751: E/AndroidRuntime(401):  at java.lang.reflect.Method.invokeNative(Native Method)
07-11 01:38:25.751: E/AndroidRuntime(401):  at java.lang.reflect.Method.invoke(Method.java:521)
07-11 01:38:25.751: E/AndroidRuntime(401):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-11 01:38:25.751: E/AndroidRuntime(401):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-11 01:38:25.751: E/AndroidRuntime(401):  at dalvik.system.NativeStart.main(Native Method)
07-11 01:38:25.751: E/AndroidRuntime(401): Caused by: java.lang.ClassNotFoundException: com.training.surveyproject.SurveyActivity in loader dalvik.system.PathClassLoader[/data/app/com.training.surveyproject-2.apk]
07-11 01:38:25.751: E/AndroidRuntime(401):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
07-11 01:38:25.751: E/AndroidRuntime(401):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
07-11 01:38:25.751: E/AndroidRuntime(401):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
07-11 01:38:25.751: E/AndroidRuntime(401):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
07-11 01:38:25.751: E/AndroidRuntime(401):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
07-11 01:38:25.751: E/AndroidRuntime(401):  ... 11 more 
```

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T01:50:10.890

您必须将活动添加`SurveyActivity`到您的 AndroidManifest.xml 文件中。

您可能还忘记了将 Google 地图库添加到清单中：

```
<application>
    <uses-library android:name="com.google.android.maps" />
</application> 
```

# matlab - 检测二维阵列中的肿块区域

> ID：11424438
> 
> 赞同：3
> 
> 时间：2012-07-11T01:47:50.413
> 
> 标签：matlab, image-processing, computer-vision, computational-geometry, robotics

在下面绘制的二维数组中，我们有兴趣找到“块”区域。如您所见，它不是连续图。此外，我们知道“块”区域的大致尺寸。下面给出一组数据。第一列包含 y 值，第二列包含 x 值。关于如何检测这样的肿块区域有什么建议吗？

![在此处输入图像描述](../Images/dda856a58c4b51e5a5ec47271986f310.png)

```
 21048        -980
   21044        -956
   21040        -928
   21036        -904
   21028        -880
   21016        -856
   21016        -832
   21016        -808
   21004        -784
   21004        -760
   20996        -736
   20996        -712
   20992        -684
   20984        -660
   20980        -636
   20968        -612
   20968        -588
   20964        -564
   20956        -540
   20956        -516
   20952        -492
   20948        -468
   20940        -440
   20936        -416
   20932        -392
   20928        -368
   20924        -344
   20920        -320
   20912        -296
   20912        -272
   20908        -248
   20904        -224
   20900        -200
   20900        -176
   20896        -152
   20888        -128
   20888        -104
   20884         -80
   20872         -52
   20864         -28
   20856          -4
   20836          16
   20812          40
   20780          64
   20748          88
   20744         112
   20736         136
   20736         160
   20732         184
   20724         208
   20724         232
   20724         256
   20720         280
   20720         304
   20720         328
   20724         352
   20724         376
   20732         400
   20732         424
   20736         448
   20736         472
   20740         496
   20740         520
   20748         544
   20740         568
   20736         592
   20736         616
   20736         640
   20740         664
   20740         688
   20736         712
   20736         736
   20744         760
   20748         788
   20760         812
   20796         836
   20836         860
   20852         888
   20852         912
   20844         936
   20836         960
   20828         984
   20820        1008
   20816        1032
   20820        1056
   20852        1080
   20900        1108
   20936        1132
   20956        1156
   20968        1184
   20980        1208
   20996        1232
   21004        1256
   21012        1280
   21016        1308
   21024        1332
   21024        1356
   21028        1380
   21024        1404
   21020        1428
   21016        1452
   21008        1476
   21004        1500
   20992        1524
   20980        1548
   20956        1572
   20944        1596
   20920        1616
   20896        1640
   20872        1664
   20848        1684
   20812        1708
   20752        1728
   20664        1744
   20640        1768
   20628        1792
   20628        1816
   20620        1836
   20616        1860
   20612        1884
   20604        1908
   20596        1932
   20588        1956
   20584        1980
   20580        2004
   20572        2024
   20564        2048
   20552        2072
   20548        2096
   20536        2120
   20536        2144
   20524        2164
   20516        2188
   20512        2212
   20508        2236
   20500        2260
   20488        2280
   20476        2304
   20472        2328
   20476        2352
   20460        2376
   20456        2396
   20452        2420
   20452        2444
   20436        2468
   20432        2492
   20432        2516
   20424        2536
   20420        2560
   20408        2584
   20396        2608
   20388        2628
   20380        2652
   20364        2676
   20364        2700
   20360        2724
   20352        2744
   20344        2768
   20336        2792
   20332        2812
   20328        2836
   20332        2860
   20340        2888
   20356        2912
   20380        2940
   20428        2968
   20452        2996
   20496        3024
   20532        3052
   20568        3080
   20628        3112
   20652        3140
   20728        3172
   20772        3200
   20868        3260
   20864        3284
   20864        3308
   20868        3332
   20860        3356
   20884        3384
   20884        3408
   20912        3436
   20944        3464
   20948        3488
   20948        3512
   20932        3536
   20940        3564 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T02:34:45.780

这可能只是一个巧合，但您显示的肿块看起来相当抛物线。“知道肿块区域的大致尺寸”并不完全清楚你的意思，但如果你的意思是你知道它大约有多宽（即它占据了多少 x 轴），你可以简单地滑动一个窗口沿 x 轴的该宽度，并对每个点适合窗口的所有数据进行抛物线拟合（也称为 2 度的 polyfit）。然后，计算每个点的 r^2 拟合优度值，并且 r^2 最接近 1.0 的点将是最佳拟合。您可能需要一个阈值并丢弃 x^2 系数为正的那些（以查找肿块而不是下降）以保持理智，但这可能是一种可行的方法。

即使抛物线外观是巧合，我认为这是一种合理的方法——向下指向的抛物线是对我能想到的任何定义的一般“块”的很好描述。

**编辑：下面尝试实现**

我很好奇并继续实施我提出的解决方案（稍作修改）。首先，这是代码（丑陋但实用）：

```
function [x, p] = find_lump(data, width)

  n = size(data, 1);

  f = plot(data(:,1),data(:,2), 'bx-');
  hold on;

  bestX = -inf;
  bestP = [];
  bestMSE = inf;
  bestXdat = [];
  bestYfit = [];

  spanStart = 0;
  spanStop = 1;
  spanWidth = 0;

  while (spanStop < n)
    if (spanStart > 0)
      % Drop first segment from window (since we'll advance x):
      spanWidth = spanWidth - (data(spanStart + 1, 1) - x);
    end

    spanStart = spanStart + 1;
    x = data(spanStart, 1);

    % Advance spanStop index to maintain window width:
    while ((spanStop < n) && (spanWidth <= width))
      spanStop = spanStop + 1;
      spanWidth = data(spanStop, 1) - x;
    end

    % Correct for overshoot:
    if (spanWidth > width) 
      spanStop = spanStop - 1;
      spanWidth = data(spanStop, 1) - x;
    end

    % Fit parabola to data in the current window:
    xdat = data(spanStart:spanStop, 1);
    ydat = data(spanStart:spanStop, 2);
    p = polyfit(xdat, ydat, 2);

    % Compute fit quality (mean squared error):
    yfit = polyval(p,xdat);
    r = yfit - ydat;
    mse = (r' * r) / size(xdat,1);

    if ((p(1) < -0.002) && (mse < bestMSE))
      bestMSE = mse;
      bestX = x;
      bestP = p;
      bestXdat = xdat;
      bestYfit = yfit;
    end
  end

  x = bestX;
  p = bestP;

  plot(bestXdat,bestYfit,'r-'); 
```

...这是使用给定数据的结果（我交换了列，因此第 1 列是 x 值，第 2 列是 y 值），窗口宽度参数为 750：

![绘制了块状拟合的数据图](../Images/6c7e1bfbf78bdee2f9b86834c386ec48.png)

**评论：**

我选择使用拟​​合抛物线和每个窗口内的原始数据之间的均方误差作为质量指标，而不是因为懒惰而不是相关系数（r^2 值）。我认为结果不会有太大不同。

输出在很大程度上取决于为二次系数选择的阈值（请参阅循环末尾的最佳 MSE 条件）。说实话，我在这里通过输出每个点的拟合系数来作弊，然后根据已知的肿块形状选择阈值。这相当于使用@chaohuang 建议的块模板，并且根据数据的预期方差可能不是很稳健。

请注意，如果使用这种方法，某种形状控制参数似乎是必要的。原因是任何随机（平滑）运行的数据都可以很好地拟合某些抛物线，但不一定在最大值附近。这是我将阈值设置为零的结果，因此仅将拟合限制为指向下方的抛物线：

![最合适的不是](../Images/18926f7221c9809cb2681fbe8a19665c.png)

一个改进是添加一个检查，确保拟合抛物线至少在窗口间隔内具有最大值（即检查一阶导数在窗口内是否为零，以便我们至少找到沿曲线的局部最大值）。仅此一项是不够的，因为在给定数据集中，您可能仍然有一个比“明显”大块更适合抛物线的小块。

# ios - 单击 UITextField 时带有工具栏的 UIPickerView

> ID：11424448
> 
> 赞同：0
> 
> 时间：2012-07-11T01:49:05.847
> 
> 标签：ios, uitextfield, uipickerview, uitoolbar, uiactionsheet

我试图在用户单击a`UIPickerView`时显示 a 。`UITextField`我还希望`UIPickerView`在顶部有一个带有按钮的工具栏，用于提交选择和取消。

我需要`UIPickerView`在界面构建器中连接一个，还是在其他地方连接一个动作？我在构建时也会收到警告。一个警告位于`resignFirstResponder`. 它说：

> `age`隐藏实例变量的局部声明

对于不同的变量，还有几个类似于上述警告的警告。

另一个警告是：

> “PracticePickerViewController”类未实现“UIActionsheetDelegate”协议。

这是我的`.h`和`.m`文件：

**。H**

```
#import <UIKit/UIKit.h>

@interface PracticePickerViewController : UIViewController <UITextFieldDelegate>{

    IBOutlet UITextField *age;
    IBOutlet UIPickerView *agePickerView;
    IBOutlet UIActionSheet *actionSheet;
    IBOutlet UIToolbar *pickerToolbar;

}

@end 
```

**.m**

```
#import "PracticePickerViewController.h"

@implementation PracticePickerViewController

-(void)textFieldDidBeginEditing:(UITextField *)age{
    [age resignFirstResponder];

    actionSheet = [[UIActionSheet alloc] initWithTitle:@"Pick Your Age" delegate:self cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil];

    [actionSheet setActionSheetStyle:UIActionSheetStyleBlackTranslucent];
    CGRect pickerFrame = CGRectMake(0,40,0,0);

    UIPickerView *agePickerView = [[UIPickerView alloc] initWithFrame:pickerFrame];
    agePickerView.showsSelectionIndicator = YES;
    agePickerView.dataSource = self;
    agePickerView.delegate = self;
    [actionSheet addSubview:agePickerView];

    pickerToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0,0,320,44)];
    pickerToolbar.barStyle = UIBarStyleBlackOpaque;
    [pickerToolbar sizeToFit];

    NSMutableArray *barItems = [[NSMutableArray alloc] init];

    UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];
    [barItems addObject:flexSpace];

    UIBarButtonItem *doneBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(doneButtonPressed:)];
    [barItems addObject:doneBtn];

    UIBarButtonItem *cancelBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:@selector(cancelButtonPressed:)];
    [barItems addObject:cancelBtn];

    [pickerToolbar setItems:barItems animated:YES];

    [actionSheet addSubview:pickerToolbar];
    [actionSheet addSubview:agePickerView];
    [actionSheet showInView:self.view];
    [actionSheet setBounds:CGRectMake(0,0,320,485)];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T03:32:53.003

> 年龄的本地声明隐藏了实例变量

这意味着你已经定义了一个已经被类变量使用的变量名（所以在这种情况下，你可能已经`UITextField *age`在类的某个地方声明了，但是你不能在这个类中重用变量名`age`，因为编译器会混淆它与类变量）。

> “PracticePickerViewController”类未实现“UIActionsheetDelegate”协议。

您还没有将您的 PracticePickerViewController 设置为`UIActionsheetDelegate`. 为此，您需要将界面标题 (PracticePickerViewController.h) 更改为：

```
@interface PracticePickerViewController : UIViewController <UITextFieldDelegate, UIActionsheetDelegate>{ 
```

不要忘记实现所需的委托方法！

最后，我强烈建议您**查看[ActionSheetPicker 项目](https://github.com/TimCinel/ActionSheetPicker)**。
它是一个插入类，具有您要实现的功能，因此您可以用它替换当前代码，或者仅将其用作参考，以查看如何正确实现 UIPickerView 内的嵌入式 ActionSheet。希望所有这些都有帮助！

# javascript - 我可以向 String.prototype 添加一个额外的变量吗

> ID：11424449
> 
> 赞同：0
> 
> 时间：2012-07-11T01:49:08.680
> 
> 标签：javascript, jquery, prototype

这只是一个好奇的问题。但我想知道是否可以在 String.prototype 前面添加一个额外的变量。

例如：

`$.String.prototype.functionName = function(){};`

当然，我觉得这行不通。但是我可以让它以某种方式工作吗？我想要这样的语法：

`$("Hi").functionName();`

jQuery 语法，只是在 () 中使用字符串而不是选择器。

我希望`$`是必需的。

自从：

```
String.prototype.functionName = function(){};
var $ = String;
$("Hi").functionName(); 
```

有效，但它使 $ 不是必需的，因此 "Hi".functionName() 有效。

感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T02:05:10.673

我不太确定*“jQuery 语法”*是什么意思，但是如果您的意思是使用`$`变量作为对操作字符串的函数的引用，那么这很简单......

```
;(function(window, undefined) {
    var MyStringLib = function(s) { this.string = s; };

    window.$ = function(s) { return new MyStringLib(s); };

    MyStringLib.prototype.addFooBar = function() {
        this.string += "foobar";
        return this;
    };
    MyStringLib.prototype.reverse = function() {
        this.string = this.string.split('').reverse().join('');
        return this;
    };
    MyStringLib.prototype.get = function() {
        return this.string;
    };

})(this); 
```

* * *

然后像这样使用库...

```
var result = $("My name is ").addFooBar().reverse().get();

alert(result); // raboof si eman yM 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T02:06:52.493

不，这有点混乱。如果你有这样的事情

```
$.String.prototype.functionName = function(){}; 
```

你必须像这样解决它：

```
(new $.String("Hi")).functionName(); 
```

（一些括号是可选的。）

如果您希望能够执行以下操作：

```
$("Hi").functionName(); 
```

那么你需要像这样附加它：

```
$.prototype.functionName = function(){}; 
```

（请注意，jQuery 的魔法`fn`参数只是其构造函数`prototype`属性的别名。）

您在这里的基本目标是什么？

# android - Android FBReaderj - 无法解析导入的 org.geometerplus.fbreader.filetype

> ID：11424451
> 
> 赞同：1
> 
> 时间：2012-07-11T01:49:13.163
> 
> 标签：android

我刚刚从 Github (https://github.com/geometer/FBReaderJ) 获得了最新的 (1.5.5) FBReaderj

运行 ant release（成功）后，我从现有源创建了一个新的 android 项目到 eclipse 中，现在我在不同的文件中面临 3 个错误，所有这些错误都说明“无法解析导入 org.geometerplus.fbreader.filetype”

有问题的代码行是这样的

```
import org.geometerplus.fbreader.filetype.*; 
```

我查看了相关文件夹，果然没有名为 filetype.xml 的文件。任何事物

那么我从哪里获得这些文件，其中应该包含什么？

# asp.net - 从按钮调用代码隐藏 - 匹配没有过载

> ID：11424456
> 
> 赞同：0
> 
> 时间：2012-07-11T01:49:41.167
> 
> 标签：asp.net, c#-4.0

我有一个用于编辑记录的 FormView，但是当用户按下按钮时，它还需要在代码隐藏中做一些后端工作。为此，我需要传递记录的 ID。

目前这是我在页面中的代码：

```
<asp:LinkButton ID="savebtn" runat="server" CausesValidation="True"   
                    CommandName="Update" Text="Save Changes" 
                    OnClick="setProcessProgress"  CommandArgument='<%# Eval("id") %>'  /> 
```

这是我的代码隐藏的精简版本：

```
protected void setProcessProgress(object sender, FormViewCommandEventArgs e)
        {
           if (e.CommandName == "Update")
              ID_p =   Int32.Parse((string)e.CommandArgument);
        } 
```

我得到了`No overload for 'setProcessProgress' matches delegate 'System.EventHandler'`

我尝试将 EventArgs 更改为 CommandEventArgs，但它也不起作用。如果我使用`OnCommand`而不是`OnClick`它只是不调用`setProcessProgress`. 有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T02:52:05.333

根据[`FormViewCommandEventArgs`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.formviewcommandeventargs.aspx).

> 当单击 FormView 控件中的按钮时，将引发 ItemCommand 事件。这允许您提供一种事件处理方法，该方法在此事件发生时执行自定义例程。
> 
> FormView 控件中的按钮也可以调用控件的一些内置功能。若要执行这些操作之一，请将按钮的 CommandName 属性设置为下表中的值之一。

该事件没有分配给Button的OnClick事件，它实际上是分配给了`FormViews` [`ItemCommand`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.formview.itemcommand.aspx)Event

IE

```
 <asp:FormView ID="FormView1" runat="server" 
        onitemcommand="setProcessProgress">

<asp:LinkButton ID="savebtn" runat="server" CausesValidation="True"    
                CommandName="Update" Text="Save Changes"  
                CommandArgument='<%# Eval("id") %>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T03:19:13.140

也许你可以试试`EventArgs e`你的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T03:22:27.997

```
 protected void setProcessProgress(object sender, EventArgs e)
   {
       LinkButton btn = sender as LinkButton;
       if (btn.CommandName=="Update")
       {
           ...
           Response.Write("Updated");
           ...
       }
   } 
```

# android - 检查永久在线状态

> ID：11424459
> 
> 赞同：1
> 
> 时间：2012-07-11T01:50:34.487
> 
> 标签：android, connection

我使用以下代码检查电话是否有 Internet 连接：

```
online = SystemCheckInternetConn.getInstance(this).isOnline(this); 
```

如何不断检查手机是否有连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T02:13:56.257

您需要注册一个广播接收器来收听连接的变化。尝试这样的事情：

```
registerReceiver(MyNetworkStateReceiver, new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION));

private BroadcastReceiver NetworkStateReceiver = new BroadcastReceiver(){

        @Override
        public void onReceive(Context context, Intent intent) {
            boolean haveConnection = haveNetworkConnection(context);
        }

        private boolean haveNetworkConnection(Context context) {
            boolean haveConnectedWifi = false;
            boolean haveConnectedMobile = false;

            ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
            NetworkInfo[] netInfo = cm.getAllNetworkInfo();
            for (NetworkInfo ni : netInfo) {
                if (ni.getTypeName().equalsIgnoreCase("WIFI"))
                    if (ni.isConnected())
                        haveConnectedWifi = true;
                if (ni.getTypeName().equalsIgnoreCase("MOBILE"))
                    if (ni.isConnected())
                        haveConnectedMobile = true;
            }
            return haveConnectedWifi || haveConnectedMobile;
        }
    }; 
```

然后用这些新发现的知识做点什么:)

# mysql - 如何通过 data.stackexchange.com 获取每个标签的问题和答案？

> ID：11424461
> 
> 赞同：2
> 
> 时间：2012-07-11T01:50:41.563
> 
> 标签：mysql, sql, database, stackexchange, dataexplorer

如果这是不正确的位置，我深表歉意 - 如果是，请移动它！在过去的几个小时里，我一直在尝试提出一个查询，该查询将返回以下信息：

最近三个月（2012 年 4 月、2012 年 5 月、2012 年 6 月）中每个“前 5”标签的问题数和答案数。

根据我发现的其他查询，我已经做到[了这一点：](https://data.stackexchange.com/stackoverflow/query/74886/questions-per-tag-top-five-by-month)

```
SELECT *, COUNT(*) AS Count FROM
(
  SELECT CAST(
      CAST(DATEPART(YYYY, CreationDate) AS varchar) + '-' + CAST(DATEPART(MM, CreationDate) AS varchar) + '-01'
    AS DATETIME) [Month], 
    t.TagName
  FROM Posts p 
  JOIN PostTags pt ON pt.PostId = p.Id
  JOIN Tags t ON t.Id = pt.TagId
  WHERE TagId IN 
  (
    SELECT TOP 5 Id FROM Tags 
    ORDER BY Count DESC
  )
) AS X
WHERE [Month] >= CAST('2012-04-01' as datetime)
AND [Month] < CAST('2012-07-01' as datetime)
GROUP BY TagName, [Month]
ORDER BY [Month] ASC, TagName ASC 
```

问题是 JOIN 消除了没有关联 PostTag 的记录。我对 SQL 不是很熟练，所以这给我带来了一些问题。相关信息：

*   问题是 PostTypeId 设置为 1 的帖子
*   答案是 PostTypeId 设置为 2 的帖子

如果有人可以提供帮助，我将非常感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T08:20:14.450

五个月后，我认为这可以满足您的要求：

[https://data.stackexchange.com/stackoverflow/query/89629/questions-per-tag-top-five-by-month](https://data.stackexchange.com/stackoverflow/query/89629/questions-per-tag-top-five-by-month)

为答案提供计数会使查询变得有点复杂，但我认为上面的查询将问题和答案都分配到了正确的月份和标签中。

# jquery - 保持 和它的孩子在焦点，直到焦点不在

> ID：11424465
> 
> 赞同：3
> 
> 时间：2012-07-11T01:51:08.303
> 
> 标签：jquery, focus, parent-child

我在 SO 上看到过类似的主题，但我的略有不同。我试图让我的父母 DIV（和孩子）保持专注，直到我把注意力放在 div 之外，这似乎很难完成。

我认为这个[解决方案](https://stackoverflow.com/a/3089045/772309)会起作用，但它看起来只适用于兄弟元素而不是实际的 div 本身。

这是我正在尝试做的演示[http://jsfiddle.net/nosfan1019/9Eg3k/3/](http://jsfiddle.net/nosfan1019/9Eg3k/3/)。我需要它，这样您就可以单击灰色部分而不会让它消失。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T02:26:03.080

好的，我认为这就是您想要的：

演示：http: [//jsfiddle.net/SO_AMK/GNfzw/](http://jsfiddle.net/SO_AMK/GNfzw/)

HTML：

```
<div>
    <input type='text'>
    <span></span>
</div>

<div>
    <input type='text'>
    <span></span>
</div>

<div>
    <input type='text'>
    <span></span>
</div> 
```

CSS：

```
div {
    margin: 20px;
    padding: 10px;
    outline: 0;
} 
```

jQuery：

```
$(function() {
    $('div input').parent().attr("tabindex",-1).focus( function() {
        $(this).css('background','#eee');
        $(this).find('span').text(' triggered');

        $(this).focusout(function() {
            $(this).children('span').empty();
            $(this).css('background','white');

        });            

   });
    $('div input').focus( function() {
        $(this).parent().css('background','#eee');
        $(this).siblings('span').text(' triggered');

        $(this).parent().focusout(function() {
            $(this).children('span').empty();
            $(this).css('background','white');

        });            

   });

}); 
```

​</p>

它可能会更有效，但似乎有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T04:10:36.370

与其他答案相比，这是一种更字面的方法，但为了完整性，它似乎又做了一件事：自动对焦回到`input`. 它可能很有用，尽管其他答案可能很简单。

```
$(function() {
    var $divs = $('div'),
        $entered = null;

    var on = function() {
        var $target = $(this);

        _off();

        $entered = $target.parent().addClass('on');
        $target.siblings('span').text(' triggered');
    };

    var focus = function(){
        $(this).find('input').focus();
    };

    var off = function() {
        if ($entered !== null && $(this).parent().is($entered)) {
            return;
        }

        _off();
    };

    var _off = function(){
        $divs.removeClass('on').children('span').text('');
    };

    var entered = function(e){
        if (e.type == 'mouseenter') {
            $entered = $(this);
        } else {
            $entered = null;
        }
    };

    $divs.find('input').focus(on).blur(off);

    $divs
        .attr('tabindex', -1)
        .bind('mouseenter mouseleave', entered)
        .bind('focus', focus);
}); 
```

[http://jsfiddle.net/userdude/34HLU/2/](http://jsfiddle.net/userdude/34HLU/2/)

# opencv - 如何检测opencv或emgu cv中的三角形边缘？

> ID：11424466
> 
> 赞同：3
> 
> 时间：2012-07-11T01:51:12.873
> 
> 标签：opencv, emgucv

![在此处输入图像描述](../Images/e84078e465be2329d68e4e15c6599c20.png)

我正在使用Emgu CV，我想检测图片中的两个锐利，首先我将图像转换为灰色，然后调用cvCanny，然后调用FindContours，但只找到一个轮廓，没有找到三角形。

代码：

```
 public static void Do(Bitmap bitmap, IImageProcessingLog log)
    {
        Image<Bgr, Byte> img = new Image<Bgr, byte>(bitmap);
        Image<Gray, Byte> gray = img.Convert<Gray, Byte>();
        using (Image<Gray, Byte> canny = new Image<Gray, byte>(gray.Size))
        using (MemStorage stor = new MemStorage())
        {
            CvInvoke.cvCanny(gray, canny, 10, 5, 3);
            log.AddImage("canny",canny.ToBitmap());

            Contour<Point> contours = canny.FindContours(
             Emgu.CV.CvEnum.CHAIN_APPROX_METHOD.CV_CHAIN_APPROX_SIMPLE,
             Emgu.CV.CvEnum.RETR_TYPE.CV_RETR_TREE,
             stor);

            for (int i=0; contours != null; contours = contours.HNext)
            {
                i++;
                MCvBox2D box = contours.GetMinAreaRect();

                Image<Bgr, Byte> tmpImg = img.Copy();
                tmpImg.Draw(box, new Bgr(Color.Red), 2);
                log.AddMessage("contours" + (i) +",angle:"+box.angle.ToString() + ",width:"+box.size.Width + ",height:"+box.size.Height);
                log.AddImage("contours" + i, tmpImg.ToBitmap());
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T05:39:57.047

（我不知道 emguCV，但我会给你这个想法）

你可以这样做：

1.  `split()`使用函数将图像拆分为 R、G、B 平面。
2.  对于每个平面，应用 Canny 边缘检测。
3.  然后找到其中的轮廓并使用`approxPolyDP`函数逼近每个轮廓。
4.  如果近似轮廓中的坐标数为 3，则它很可能是一个三角形，并且这些值对应于三角形的 3 个顶点。

下面是python代码：

```
import numpy as np
import cv2

img = cv2.imread('softri.png')

for gray in cv2.split(img):
    canny = cv2.Canny(gray,50,200)

    contours,hier = cv2.findContours(canny,1,2)
    for cnt in contours:
        approx = cv2.approxPolyDP(cnt,0.02*cv2.arcLength(cnt,True),True)
        if len(approx)==3:
            cv2.drawContours(img,[cnt],0,(0,255,0),2)
            tri = approx

for vertex in tri:
    cv2.circle(img,(vertex[0][0],vertex[0][1]),5,255,-1)

cv2.imshow('img',img)
cv2.waitKey(0)
cv2.destroyAllWindows() 
```

下面是蓝色平面的精巧图：

![在此处输入图像描述](../Images/8896f41fa726b7e180e78112a8840396.png)

下面是最终的输出，三角形和它的顶点分别用绿色和蓝色标记：

![在此处输入图像描述](../Images/1ea95f453c7e8b5b8a828e63cf299383.png)

# facebook - Facebook 移动 OAuth 重定向_uri

> ID：11424467
> 
> 赞同：0
> 
> 时间：2012-07-11T01:51:16.867
> 
> 标签：facebook, mobile-website, facebook-oauth

承认经过身份验证的推荐机制[当前不适用于 Facebook 应用程序的移动 Web 设置](http://developers.facebook.com/bugs/311977725559039)，我遇到了基于返回代码验证访问令牌的问题。

我试图获取访问令牌的 URL 是： [https ://staging.fanhood.com/facebook/mobile/challenge?fh_gameChallengeID=2678&ref=web_canvas&refid=9&refsrc=http://apps.facebook.com/fanhood-开发/挑战&返回=真](https://staging.fanhood.com/facebook/mobile/challenge?fh_gameChallengeID=2678&ref=web_canvas&refid=9&refsrc=http://apps.facebook.com/fanhood-dev/challenge&returned=true)

这是访问者在通过此 URL 进行预身份验证后发送到的 URL：[http](http://apps.facebook.com/fanhood-dev/challenge?fh_gameChallengeID=2678) ://apps.facebook.com/fanhood-dev/challenge?fh_gameChallengeID=2678 。但是，与常规的经过身份验证的引用不同，没有额外的数据传递到 URL 中，因此应用程序可以缩短 oauth 重定向循环。

此时，我将访问者重定向到移动 OAuth 对话框以对其进行身份验证： [http://m.facebook.com/dialog/oauth?client_id=250258605018414&redirect_uri=https%3A%2F%2Fstaging.fanhood.com%2Ffacebook %2Fmobile%2Fchallenge%3Ffh_gameChallengeID%3D2678%26ref%3Dweb_canvas%26refid%3D9%26refsrc%3Dhttp%3A%2F%2Fapps.facebook.com%2Ffanhood-dev%2Fchallenge%26returned%3Dtrue&scope=email%2Cfriends_about_me%2Cfriends_education_history_interest%2Cfriends_education_friends_interest%2 %2Cfriends_likes%2Cfriends_location%2Coffline_access%2Cpublish_actions%2Cpublish_stream%2Cuser_activities%2Cuser_birthday%2Cuser_education_history%2Cuser_hometown%2Cuser_games_activity%2Cuser_interests%2Cuser_likes%2Cuser_location&response_type=code&display=touch](http://m.facebook.com/dialog/oauth?client_id=250258605018414&redirect_uri=https%3A%2F%2Fstaging.fanhood.com%2Ffacebook%2Fmobile%2Fchallenge%3Ffh_gameChallengeID%3D2678%26ref%3Dweb_canvas%26refid%3D9%26refsrc%3Dhttp%3A%2F%2Fapps.facebook.com%2Ffanhood-dev%2Fchallenge%26returned%3Dtrue&scope=email%2Cfriends_about_me%2Cfriends_education_history%2Cfriends_hometown%2Cfriends_interests%2Cfriends_likes%2Cfriends_location%2Coffline_access%2Cpublish_actions%2Cpublish_stream%2Cuser_activities%2Cuser_birthday%2Cuser_education_history%2Cuser_hometown%2Cuser_games_activity%2Cuser_interests%2Cuser_likes%2Cuser_location&response_type=code&display=touch)

当用户被重定向回来时，我确实收到了一个代码来交换：

Code: AQBCH25OC57BiMBgj3rCKGhkFi0ypp0R8e2yKGwFfhml9x1B47-w2Baex8oZ3BKgb2NhziRnSIuJ1MV9hErKBUhu0YqxaonwFF_7mcqozwpy3Ch08rkNh-YEIa6HV_LHxl6pymfkAbQEMgSA6F4BdtINsCQ7QlLpcRwrZWkzxZVyJbJDnqOesB3zFLr5ohpgtpQ

但是，我目前没有任何交换此代码的请求有效。我正在尝试不同的 redirect_uri 格式变体，但都不起作用：

## 原始 URL 为 redirect_uri：

我有一种机制可以去除特定的查询参数，按字母顺序重新排序，然后重新组合，以便 redirect_uris 在请求之间保持一致。在这种情况下，redirect_uri 与传递给对话 URL 的内容完全匹配： [https ://staging.fanhood.com/facebook/mobile/challenge?fh_gameChallengeID=2678&ref=web_canvas&refid=9&refsrc=http://apps.facebook.com /fanhood-dev/challenge&returned=true](https://staging.fanhood.com/facebook/mobile/challenge?fh_gameChallengeID=2678&ref=web_canvas&refid=9&refsrc=http://apps.facebook.com/fanhood-dev/challenge&returned=true) == [https://staging.fanhood.com/facebook/mobile/challenge?fh_gameChallengeID=2678&ref=web_canvas&refid=9&refsrc=http://apps.facebook.com/fanhood-dev/challenge&returned=真的](https://staging.fanhood.com/facebook/mobile/challenge?fh_gameChallengeID=2678&ref=web_canvas&refid=9&refsrc=http://apps.facebook.com/fanhood-dev/challenge&returned=true)

[https://graph.facebook.com/oauth/access_token?client_id=250258605018414&client_secret=xxx&redirect_uri=https%3A%2F%2Fstaging.fanhood.com%2Ffacebook%2Fmobile%2Fchallenge%3Ffh_gameChallengeID%3D2678%26ref%3Dweb_canvas%26refid%3D9% 26refsrc%3Dhttp%3A%2F%2Fapps.facebook.com%2Ffanhood-dev%2Fchallenge%26returned%3Dtrue&code=AQBCH25OC57BiMBgj3rCKGhkFi0ypp0R8e2yKGwFfhml9x1B47-w2Baex8oZ3BKgb2NhziRnSIuJ1MV9hErKBUhu0YqxaonwFF_7mcqozwpy3Ch08rkNh-YEIa6HV_LHxl6pymfkAbQEMgSA6F4BdtINsCQ7QlLpcRwrZWkzxZVyJbJDnqOesB3zFLr5ohpgtpQ&access_token=250258605018414%7C65adc2f073d3c901d02a7329c6acba21](https://graph.facebook.com/oauth/access_token?client_id=250258605018414&client_secret=xxx&redirect_uri=https%3A%2F%2Fstaging.fanhood.com%2Ffacebook%2Fmobile%2Fchallenge%3Ffh_gameChallengeID%3D2678%26ref%3Dweb_canvas%26refid%3D9%26refsrc%3Dhttp%3A%2F%2Fapps.facebook.com%2Ffanhood-dev%2Fchallenge%26returned%3Dtrue&code=AQBCH25OC57BiMBgj3rCKGhkFi0ypp0R8e2yKGwFfhml9x1B47-w2Baex8oZ3BKgb2NhziRnSIuJ1MV9hErKBUhu0YqxaonwFF_7mcqozwpy3Ch08rkNh-YEIa6HV_LHxl6pymfkAbQEMgSA6F4BdtINsCQ7QlLpcRwrZWkzxZVyJbJDnqOesB3zFLr5ohpgtpQ&access_token=250258605018414%7C65adc2f073d3c901d02a7329c6acba21)

## 对经过身份验证的推荐的空白 redirect_uri 尝试：

[https://graph.facebook.com/oauth/access_token?client_id=250258605018414&client_secret=xxx&redirect_uri=&code=AQBCH25OC57BiMBgj3rCKGhkFi0ypp0R8e2yKGwFfhml9x1B47-w2Baex8oZ3BKgb2NhziRnSIuJ1MV9hErKBUhu0YqxaonwFF_7mcqozwpy3Ch08rkNh-YEIa6HV_LHxl6pymfkAbQEMgSA6F4BdtINsCQ7QlLpcRwrZWkzxZVyJbJDnqOesB3zFLr5ohpgtpQ&access_token=250258605018414%7C65adc2f073d3c901d02a7329c6acba21](https://graph.facebook.com/oauth/access_token?client_id=250258605018414&client_secret=xxx&redirect_uri=&code=AQBCH25OC57BiMBgj3rCKGhkFi0ypp0R8e2yKGwFfhml9x1B47-w2Baex8oZ3BKgb2NhziRnSIuJ1MV9hErKBUhu0YqxaonwFF_7mcqozwpy3Ch08rkNh-YEIa6HV_LHxl6pymfkAbQEMgSA6F4BdtINsCQ7QlLpcRwrZWkzxZVyJbJDnqOesB3zFLr5ohpgtpQ&access_token=250258605018414%7C65adc2f073d3c901d02a7329c6acba21)

## redirect_uri 结构为我们的移动画布 URL：

[https://graph.facebook.com/oauth/access_token?client_id=250258605018414&client_secret=xxx&redirect_uri=https%3A%2F%2Fm.facebook.com%2Fapps%2Ffanhood-dev%2Fchallenge%3Ffh_gameChallengeID%3D2678%26ref%3Dweb_canvas%26refid% 3D9%26refsrc%3Dhttp%3A%2F%2Fapps.facebook.com%2Ffanhood-dev%2Fchallenge%26returned%3Dtrue&code=AQBCH25OC57BiMBgj3rCKGhkFi0ypp0R8e2yKGwFfhml9x1B47-w2Baex8oZ3BKgb2NhziRnSIuJ1MV9hErKBUhu0YqxaonwFF_7mcqozwpy3Ch08rkNh-YEIa6HV_LHxl6pymfkAbQEMgSA6F4BdtINsCQ7QlLpcRwrZWkzxZVyJbJDnqOesB3zFLr5ohpgtpQ&access_token=250258605018414%7C65adc2f073d3c901d02a7329c6acba21](https://graph.facebook.com/oauth/access_token?client_id=250258605018414&client_secret=xxx&redirect_uri=https%3A%2F%2Fm.facebook.com%2Fapps%2Ffanhood-dev%2Fchallenge%3Ffh_gameChallengeID%3D2678%26ref%3Dweb_canvas%26refid%3D9%26refsrc%3Dhttp%3A%2F%2Fapps.facebook.com%2Ffanhood-dev%2Fchallenge%26returned%3Dtrue&code=AQBCH25OC57BiMBgj3rCKGhkFi0ypp0R8e2yKGwFfhml9x1B47-w2Baex8oZ3BKgb2NhziRnSIuJ1MV9hErKBUhu0YqxaonwFF_7mcqozwpy3Ch08rkNh-YEIa6HV_LHxl6pymfkAbQEMgSA6F4BdtINsCQ7QlLpcRwrZWkzxZVyJbJDnqOesB3zFLr5ohpgtpQ&access_token=250258605018414%7C65adc2f073d3c901d02a7329c6acba21)

## redirect_uri 结构为我们的画布 URL：

[https://graph.facebook.com/oauth/access_token?client_id=250258605018414&client_secret=xxx&redirect_uri=https%3A%2F%2Fapps.facebook.com%2Ffanhood-dev%2Fchallenge%3Ffh_gameChallengeID%3D2678%26ref%3Dweb_canvas%26refid%3D9% 26refsrc%3Dhttp%3A%2F%2Fapps.facebook.com%2Ffanhood-dev%2Fchallenge%26returned%3Dtrue&code=AQBCH25OC57BiMBgj3rCKGhkFi0ypp0R8e2yKGwFfhml9x1B47-w2Baex8oZ3BKgb2NhziRnSIuJ1MV9hErKBUhu0YqxaonwFF_7mcqozwpy3Ch08rkNh-YEIa6HV_LHxl6pymfkAbQEMgSA6F4BdtINsCQ7QlLpcRwrZWkzxZVyJbJDnqOesB3zFLr5ohpgtpQ&access_token=250258605018414%7C65adc2f073d3c901d02a7329c6acba21](https://graph.facebook.com/oauth/access_token?client_id=250258605018414&client_secret=xxx&redirect_uri=https%3A%2F%2Fapps.facebook.com%2Ffanhood-dev%2Fchallenge%3Ffh_gameChallengeID%3D2678%26ref%3Dweb_canvas%26refid%3D9%26refsrc%3Dhttp%3A%2F%2Fapps.facebook.com%2Ffanhood-dev%2Fchallenge%26returned%3Dtrue&code=AQBCH25OC57BiMBgj3rCKGhkFi0ypp0R8e2yKGwFfhml9x1B47-w2Baex8oZ3BKgb2NhziRnSIuJ1MV9hErKBUhu0YqxaonwFF_7mcqozwpy3Ch08rkNh-YEIa6HV_LHxl6pymfkAbQEMgSA6F4BdtINsCQ7QlLpcRwrZWkzxZVyJbJDnqOesB3zFLr5ohpgtpQ&access_token=250258605018414%7C65adc2f073d3c901d02a7329c6acba21)

有谁知道 Facebook 用于移动 OAuth 请求的 redirect_uri 格式？如果支持查询参数？这个相同的 URL 适用于我们的常规画布应用程序，但不适用于我们的移动版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:21:31.980

请参阅[Authenticated Referrals & Server-Side Auth Flow -什么是redirect_uri？](https://stackoverflow.com/questions/9745233/authenticated-referrals-server-side-auth-flow-what-is-the-redirect-uri)

当我在 &code=... 之后剥离 request_uri 部分时，它开始工作。

# function - 在 Matlab 中将结构传递给函数时重新分配变量

> ID：11424469
> 
> 赞同：2
> 
> 时间：2012-07-11T01:51:31.233
> 
> 标签：function, matlab, arguments, conventions, structure

我正在使用一系列带有 10 多个单值参数的 MatLab 函数。我使用结构来传递参数以保持代码的可读性。函数头示例（输入为结构）：

```
function output = myFunction(input) 
```

我发现在整个代码中键入结构名称会使阅读变得更加困难：

```
calc1 = input.var1 * input.var2;
calc2 = input.var2 * input.var3; 
```

我意识到上面的示例可以方便地使用数组，但我的大多数参数都是不相关的并且类型不同。此外，我对变量执行的操作比上面的示例更复杂，并且不适合数组。

我可以创建变量名来接受来自输入结构的值：

```
function output = myFunction(input)

var1 = input.var1;
var2 = input.var2;
var3 = input.var3;

calc1 = var1 * var2;
calc2 = var2 * var3; 
```

这样做会在函数顶部创建一个长块，该块除了重新分配输入变量之外什么都不做，并且必须复制数据，因此会降低性能。另一方面，代码更容易阅读。

是否有任何编码约定可以提供指导？我在这里和 Google 上找到了大量资源，建议使用结构将大量数据传递给 MatLab 函数，但对于如何智能地这样做却很少见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:48:13.560

如果您编写一个解析输入参数的函数，并对其进行设计，使其接受一个结构作为输入，或者一个变量列表，怎么样。

例子：

```
function output = myFunc(varargin)
    narginchk(1,3);
    [var1,var2,var3] = parseInput(varargin{:});

    fprintf('var 1 = %g\n', var1);
    fprintf('var 2 = %g\n', var2);
    fprintf('var 3 = %g\n', var3);
    output = var1+var2+var3;
end

function [var1,var2,var3] = parseInput(varargin)
    if nargin == 1 && isstruct(varargin{1})
        var1 = varargin{1}.var1;
        var2 = varargin{1}.var2;
        var3 = varargin{1}.var3;
    elseif nargin == 3
        [var1,var2,var3] = deal(varargin{:});
    else
        error('myFunc:parseInput', 'Incorrect input')
    end
end 
```

现在我们可以将函数调用为：

```
x = myFunc(1,2,3) 
```

或者：

```
in = struct('var1',1, 'var2',2, 'var3',3);
x = myFunc(in) 
```

当然，您可以添加更严格的验证来检查输入（请参阅 `validateattributes`和`InputParser`）

# magento - Jirafe 在 magento v1.7 上工作？

> ID：11424474
> 
> 赞同：0
> 
> 时间：2012-07-11T01:52:26.250
> 
> 标签：magento

我们无法连接到 Jirafe 服务。我们稍后再试，或者您可以尝试自己连接

最后状态：400：错误请求

当 jirafe 在 magento v1.6 上安装时，它工作正常，但在 v1.7 上出现了一些问题......

我需要一些帮助，拜托。

对不起我糟糕的英语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:50:59.083

请按照此处故障排除部分中的说明进行操作：[https](https://github.com/jirafe/magento-plugin/wiki/FAQ) ://github.com/jirafe/magento-plugin/wiki/FAQ 并将结果转发给我们 support@jirafe.com。

# ruby-on-rails - 访问rails中的静态符号目录

> ID：11424480
> 
> 赞同：1
> 
> 时间：2012-07-11T01:53:12.997
> 
> 标签：ruby-on-rails, static, symlink

在 rails 3.1 中，我能够将符号链接放置到我的公用文件夹中的 html 页面目录，并且它有效。现在在 Rails 3.2 中，当我尝试打开任何这些 html 文件时，它会给我一个 404 not found 页面。现在阻止符号链接的 rails 3.2 发生了什么变化，我该如何绕过它？

澄清一下，我有一个朋友想通过在我的网站上托管他的网站来省钱。因此，当我部署他的站点时，应该可以通过[http://mysite.org/hissite/](http://mysite.org/hissite/)访问。他和我在同一台服务器上有一个帐户，所以我只需创建一个符号链接，指向位于他帐户中的 hissite 目录。我把这个符号链接放在我的公用文件夹中。在升级到 rails 3.2 之前，这就像一个魅力。我可以使用硬目录，但这将在我的帐户上要求他向我发送更新，然后我必须发布这些更新。这是个大麻烦。允许他在我的网站上托管他的内容对我来说很重要，因为它是相关内容，有助于为我的网站带来更多访问者。

更多细节：问题出在我使用乘客的生产站点上。在开发中，我在我的开发机器上使用符号链接目录对其进行了测试，它运行良好。硬链接似乎在生产中有效，但是每当他添加新文件时我都必须更新目录，这很麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T23:33:20.960

好吧，我想出了一个技巧来让它工作，但这不是我想要的。每当我进行部署时，我都会编写一个 capistrano 任务来链接文件。所以我的 capistrano 任务看起来像这样。

```
namespace :accounts do
    desc "Relink friend's site on each release"
    task :relink_friends_site, :roles => :app do
        run "mkdir -p #{release_path}/public/hissite"
        run "cd #{release_path}/public/hissite && ln /home/hisaccount/hissite/index.html"
        run "cd #{release_path}/public/hissite && ln /home/hisaccount/hissite/page2.html"
        ...
    end
end 
```

如果有人知道解决此问题的更好方法，请告诉我。至少这样我就不必为每个部署重新链接文件。

# amazon-ec2 - AWS 弹性负载均衡器和多个可用区

> ID：11424481
> 
> 赞同：10
> 
> 时间：2012-07-11T01:53:46.903
> 
> 标签：amazon-ec2, amazon-web-services, load-balancing

我想了解 ELB 如何在多个***可用区***之间进行负载平衡。例如，如果我`a1, a2, a3, a4`在 zone 中有 4 个实例 ( )，在ELB后面有`us-east-1a`一个实例，那么两个可用区之间的流量是如何分配的？即，将获得近 50% 的所有流量或流量？`d1``us-east-1d``d1``1/5th`

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-11T11:41:08.347

如果启用 ELB [Cross-Zone Load Balancing](https://aws.amazon.com/about-aws/whats-new/2013/11/06/elastic-load-balancing-adds-cross-zone-load-balancing/)，d1 将获得 20% 的流量。

以下是未启用跨区域负载平衡的情况：D1 将获得近 50% 的流量。这就是为什么 Amazon 建议将相同数量的实例从每个 AZ 添加到您的 ELB。

以下摘录摘自[Elastic Load Balancing 概述](http://docs.amazonwebservices.com/ElasticLoadBalancing/latest/DeveloperGuide/arch-loadbalancing.html)：

> 传入流量在为您的负载均衡器启用的所有可用区中均等地进行负载均衡，因此在每个区域中具有大致相等数量的实例非常重要。例如，如果您在可用区 us-east-1a 中有 10 个实例，在 us-east-1b 中有两个实例，则流量仍将在两个可用区之间平均分配。因此，us-east-1b 中的两个实例必须提供与 us-east-1a 中的十个实例相同的流量。作为最佳实践，我们建议您在每个可用区中保留相等或几乎相等数量的实例。因此，在示例中，与其在 us-east-1a 中拥有 10 个实例，在 us-east-1b 中拥有 2 个实例，不如在每个可用区中分配您的实例，以便您拥有 6 个实例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T17:54:17.333

不同可用区之间的负载平衡是通过 DNS 完成的。当客户端上的 DNS 解析器请求 ELB 的 IP 地址时，它会获得两个地址。并选择使用其中一个（通常是第一个）。DNS 服务器通常以随机顺序响应，因此第一个 IP 并非始终使用，但每个 IP 仅在部分时间使用（2 的一半，3 的三分之一，等等）。

然后在这些 IP 地址后面，您的每个可用区都有一个 ELB 服务器，您的实例连接到它。这就是为什么只有一个实例的区域将获得与另一个区域中的所有实例相同的流量。

当您拥有大量实例时，ELB 可以决定在一个可用区中创建两个这样的服务器*，*但在这种情况下，它会将您的实例拆分为一半（或其他一些相等的划分） ) 你的实例。

# google-app-engine - 在 Google App Engine 中为全文搜索创建索引

> ID：11424483
> 
> 赞同：0
> 
> 时间：2012-07-11T01:54:07.307
> 
> 标签：google-app-engine, full-text-search

[我正在https://developers.google.com/appengine/docs/java/search/overview](https://developers.google.com/appengine/docs/java/search/overview)阅读有关谷歌应用引擎中全文搜索 api (java) 的文档。他们有获取索引的示例：

```
public Index getIndex() {
      IndexSpec indexSpec = IndexSpec.newBuilder()
          .setName("myindex")
          .setConsistency(Consistency.PER_DOCUMENT)
          .build();
      return SearchServiceFactory.getSearchService().getIndex(indexSpec);
} 
```

创建索引怎么样？如何创建一个？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:54:20.770

你刚刚做到了。你刚刚创建了一个。

```
public class IndexSpec

Represents information about an index. This class is used to fully specify the index you want to retrieve from the SearchService. To build an instance use the newBuilder() method and set all required parameters, plus optional values different than the defaults. 
```

[https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/IndexSpec](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/IndexSpec)

您可以通过查看 SearchService 来确认这一点

```
SearchService is also responsible for creating new indexes. For example:
 SearchService searchService = SearchServiceFactory.getSearchService();
  index = searchService.getIndex(IndexSpec.newBuilder().setName("myindex")); 
```

[https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/SearchService](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/SearchService)

无论如何，如果它不存在，您的代码似乎会创建一个新索引。这就是文档的建议：

```
 // Get the index. If not yet created, create it.
  Index index = searchService.getIndex(
  IndexSpec.newBuilder()
      .setIndexName("indexName")
      .setConsistency(Consistency.PER_DOCUMENT)); 
```

[https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/Index](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/Index)

现在，如果再次运行代码并更改一致性会发生什么？您是否拥有具有不同一致性的相同索引？索引是否被覆盖？我不知道。我将使用 SearchService 来查找现有索引，而不是使用可能创建它们的代码，以避免尝试在我的代码中获取索引但无意中更改规范。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T00:31:17.433

写入文档时会隐式创建索引。一致性是索引的一个属性，即不能有两个同名但一致性不同的索引。

# imageresizer - ImageResizer 显示没有错误，但不能在 IIS6 上工作

> ID：11424484
> 
> 赞同：0
> 
> 时间：2012-07-11T01:54:09.410
> 
> 标签：imageresizer

我刚刚在 IIS6 .NET2 上安装了 imageresizer 并下载了 JCropExample2 示例项目。我没有收到任何错误，但是 a：图像不会在页面加载时调整大小，并且 b：裁剪不起作用。没有显示错误。我是 .NET 的新手，所以真的不确定我错过了什么？？

ImageResizer 调试：

```
2 Issues detected:

(Warning):  To potentially see additional errors here, perform an image resize request.

(Warning):  NoCache is only for development usage, and cannot scale to production use.
            Add DiskCache or CloudFront for production use

You are not using any paid bundles.

Registered plugins:

ImageResizer.Plugins.Basic.DefaultEncoder
ImageResizer.Plugins.Basic.NoCache
ImageResizer.Plugins.Basic.ClientCache
ImageResizer.Plugins.Basic.Diagnostic
ImageResizer.Plugins.Basic.SizeLimiting

Configuration:

<resizer>
<pipeline fakeExtensions=".ashx" />
<plugins />
</resizer>

Accepted querystring keys:

quality, format, thumbnail, maxwidth, maxheight, width, height, w, h, scale, stretch, crop, cropxunits, cropyunits, page, bgcolor, rotate, flip, sourceFlip, sFlip, sRotate, borderWidth, borderColor, paddingWidth, paddingColor, ignoreicc, frame, useresizingpipeline, cache, process, margin, anchor, dpi, mode, zoom, 

Accepted file extensions:

bmp, gif, exif, png, tif, tiff, tff, jpg, jpeg, jpe, jif, jfif, jfi, 

Environment information:

Running Microsoft-IIS/6.0 on Microsoft Windows NT 5.2.3790 Service Pack 2 and CLR 2.0.50727.3634
Trust level: Unrestricted
OS bitness: x86
Executing assembly: c:\windows\system32\inetsrv\w3wp.exe
IntegratedPipeline: False

Loaded assemblies:

mscorlib                                 Assembly: 2.0.0.0         File: 2.0.50727.3634  Info: 2.0.50727.3634
System.Web                               Assembly: 2.0.0.0         File: 2.0.50727.3634  Info: 2.0.50727.3634
System                                   Assembly: 2.0.0.0         File: 2.0.50727.3634  Info: 2.0.50727.3634
System.Xml                               Assembly: 2.0.0.0         File: 2.0.50727.3082  Info: 2.0.50727.3082
System.Configuration                     Assembly: 2.0.0.0         File: 2.0.50727.3053  Info: 2.0.50727.3053
System.Data                              Assembly: 2.0.0.0         File: 2.0.50727.3053  Info: 2.0.50727.3053
System.Web.RegularExpressions            Assembly: 2.0.0.0         File: 2.0.50727.3053  Info: 2.0.50727.3053
Microsoft.JScript                        Assembly: 8.0.0.0         File: 8.0.50727.3053  Info: 8.0.50727.3053
System.Web.Mobile                        Assembly: 2.0.0.0         File: 2.0.50727.3053  Info: 2.0.50727.3053
System.ServiceModel                      Assembly: 3.0.0.0         File: 3.0.4506.3636   Info: 3.0.4506.3636
System.Web.Services                      Assembly: 2.0.0.0         File: 2.0.50727.3053  Info: 2.0.50727.3053
System.Drawing                           Assembly: 2.0.0.0         File: 2.0.50727.3639  Info: 2.0.50727.3639
System.EnterpriseServices                Assembly: 2.0.0.0         File: 2.0.50727.3053  Info: 2.0.50727.3053
ImageResizer                             Assembly: 3.2.3.302       File: 3.2.3.302       Info: 3-2-beta-3  Commit: 245e873
System.ServiceModel.Web                  Assembly: 3.5.0.0         File: 3.5.594.1152    Info: 3.5.594.1152
System.WorkflowServices                  Assembly: 3.5.0.0         File: 3.5.594.1152    Info: 3.5.594.1152
System.Runtime.Serialization             Assembly: 3.0.0.0         File: 3.0.4506.3636   Info: 3.0.4506.3636
System.IdentityModel                     Assembly: 3.0.0.0         File: 3.0.4506.3636   Info: 3.0.4506.3636
SMDiagnostics                            Assembly: 3.0.0.0         File: 3.0.4506.3636   Info: 3.0.4506.3636 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T02:41:47.723

它工作正常。您未能阅读[主页上的第 3 步，共 3 步](http://imageresizing.net)

```
<!-- Unless you (a) use Integrated mode, or (b) map all reqeusts to ASP.NET, 
     you'll need to add .ashx to your image URLs: image.jpg.ashx?width=200&height=20 -->
         <pipeline fakeExtensions=".ashx" /> 
```

当您使用没有集成模式的 IIS6 时，您必须使用 .jpg.ashx 语法。

[http://resizer.puremobi.com/JCropExample2/fountain-small.jpg.ashx?width=400](http://resizer.puremobi.com/JCropExample2/fountain-small.jpg.ashx?width=400)

# objective-c - 使用 FetchedResultsController 按日期对核心数据进行排序

> ID：11424485
> 
> 赞同：6
> 
> 时间：2012-07-11T01:54:09.633
> 
> 标签：objective-c, core-data, nsfetchedresultscontroller, sections

我目前有一个类，其中有一个日期对象。此日期对象包含时间和日期。`UITableViewCell`所有这些信息都通过 a加载到a 中`NSFetchedResultsController`。我需要将日期分类为各个部分，其中每个部分都是*没有*时间的日期。我还需要按时间对每个部分进行排序。这是我当前的 _fetchedResultsController 的样子：

```
[self.managedObjectContext lock];
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription
                               entityForName:@"Entity" inManagedObjectContext:self.managedObjectContext];
[fetchRequest setEntity:entity];

NSSortDescriptor *sort = [[NSSortDescriptor alloc]
                          initWithKey:@"due" ascending:YES];
[fetchRequest setSortDescriptors:[NSArray arrayWithObject:sort]];

[fetchRequest setFetchBatchSize:20];

NSFetchedResultsController *theFetchedResultsController =
[[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                    managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil
                                               cacheName:@"Root"];
theFetchedResultsController.delegate = sender;
[self.managedObjectContext unlock];
return theFetchedResultsController; 
```

我需要排序的属性是`Entity.due`属性。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T05:47:21.233

您可能想查看名为“DateSectionTitles”的核心数据示例以获得更多信息，我将重点介绍其中的基础知识。

要根据日期划分部分，您需要首先按标准化（或简化）日期进行排序。尝试以下操作：

在核心数据模型编辑器中将瞬态属性添加到您的实体。确保它的类型是 NSDate 并且检查了它的瞬态属性。通过将属性添加为强 NSDate 来更新您的 NSManagedObject 类文件。称之为“simplifiedDate”。还将另一个属性添加到您的 .h 文件中，称为“primitiveSimplifiedDate”。让它变得强大。

在 .m 中，对简化日期和原始简化日期都使用 @dynamic。此瞬态属性应使用返回已标准化为午夜的 NSDate。此级别设置所有内容并允许您建立部分。我已经按照以下方式使用了代码：

```
-(NSDate *)simplifiedDate{
     // Create and cache the section identifier on demand.

    [self willAccessValueForKey:@"simplifiedDate"];
    NSDate *tmp = [self primitiveSimplifiedDate];
    [self didAccessValueForKey:@"simplifiedDate"];

    if (!tmp) {
        tmp=[self simplifiedDateForDate: [self due]];
        [self setPrimitiveSimplifiedDate: tmp];
    }

    return tmp;
}

-(NSDate *)simplifiedDateForDate:(NSDate *)date {

    if (!date) {
        return nil;
    }

    static NSCalendar *gregorian = nil;

    gregorian=[[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    NSDateComponents *newDateComponents=[gregorian components:(NSYearCalendarUnit | NSMonthCalendarUnit| NSDayCalendarUnit) fromDate:date];

    return [gregorian dateFromComponents:newDateComponents];
 } 
```

如果您愿意，这也可以是在设置实际日期时计算和存储的实际属性。

接下来，您将有两个排序描述符。第一个排序描述符将是上述瞬态属性“simplifiedDate”。第二个属性是“due”属性。“simplifiedDate”，只要在下一步中正确设置了 NSFetchedResultsController，就会根据该部分对所有内容进行排序。

最后，您需要在分配/初始化 NSFetchedResultsController 时提供部分键名称。在这种情况下，它将是“simplifiedDate”。像这样：

```
NSFetchedResultsController *theFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                managedObjectContext:self.managedObjectContext sectionNameKeyPath:@"simplifiedDate"cacheName:@"Root"]; 
```

希望这可以帮助。

吨

# xcode - Xcode4 iPhone/iPad-如何在 iphone 中构建带有联系人的应用程序？

> ID：11424490
> 
> 赞同：-4
> 
> 时间：2012-07-11T01:54:44.210
> 
> 标签：xcode, xcode4, xcode4.2, xcode4.3

如何使用 AddressBook.h 和 AddressBookUI.h 在 iPhone 中构建联系人等应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T01:59:16.773

我建议您从阅读文档开始。[http://developer.apple.com/library/ios/#DOCUMENTATION/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Introduction.html](http://developer.apple.com/library/ios/#DOCUMENTATION/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Introduction.html)

您还可以搜索“ios 通讯录示例”以查找大量教程。

# sql - 来自局部变量的 MAXRECURSION 值

> ID：11424497
> 
> 赞同：3
> 
> 时间：2012-07-11T01:55:37.953
> 
> 标签：sql, sql-server, tsql

我正在 SQL Server 2005 中编写一个存储过程，它声明了一个名为`foo`.

`foo`递归调用自身，但当 SP 的参数之一 ( `@bar`) 为空时无限循环。

为了停止这个无限循环，我一直在尝试使用该选项`MAXRECURSION`：

*   当`@bar`为空时，将 MAXRECURSION 设置为 1；
*   当`@bar`不为空时，将 MAXRECURSION 设置为 0（无限制）。

所以我声明了一个局部变量`@maxrec`，它取 1 或 0 取决于是否`@bar`为空。

```
DECLARE @maxrec INT;
SET @maxrec = 0;
if (@dim_course_categories is null)
begin
    SET @maxrec = 1;
end

;WITH foo AS (
    ...
)

SELECT * FROM foo
OPTION (MAXRECURSION @maxrec) 
```

当我解析代码时，我收到以下错误： `Incorrect syntax near '@maxrec'.`，它指的是`OPTION (MAXRECURSION @localvar)`.

那么我做错了什么？是否禁止在 OPTION 子句中使用局部变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T02:28:40.507

一种选择是构建查询，然后执行它`EXEC sp_executesql`

```
DECLARE @Query NVARCHAR(MAX)

SET @Query = N'
    ;WITH foo AS (
        ...
    )

    SELECT * FROM foo
    OPTION (MAXRECURSION ' + CAST(@maxrec AS NVARCHAR) + ');'

EXEC sp_executesql @Query 
```

附带说明，如果在`MAXRECURSION`语句完成之前达到该值，则查询将不会正常结束，它将引发异常。这可能是您想要的，但请注意这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T10:59:41.537

另一个选择是更改您的选择

```
DECLARE @maxrec INT;
SET @maxrec = 0;
if (@dim_course_categories is null)
    SET @maxrec = 1;

;WITH foo AS (
    SELECT colonne
    UNION ALL
    SELECT colonne FROM foo
    WHERE @maxrec = 0
      AND (other_condition)
)

SELECT * FROM foo
OPTION (MAXRECURSION 0); 
```

阿尔贝托

# sql - 从每个组中选择第一行，其中 ORDER BY 多于一列

> ID：11424506
> 
> 赞同：4
> 
> 时间：2012-07-11T01:56:48.510
> 
> 标签：sql, performance, group-by, sql-order-by, sybase

我有一个`T`带有列`x`的表`y`，，，，`a`这样`b`

```
SELECT x,y,a,b FROM T
ORDER BY x,y,a,b 
```

给我下表

```
 x    | y    | a    | b
 x1   | y1   | a1   | b1
 x1   | y1   | a1   | b2
 x1   | y1   | a2   | b1
 x1   | y2   | a1   | b1
 x1   | y2   | a1   | b2
 x1   | y2   | a2   | b1 
```

我将如何获得每个 x,y 组的第一行？也就是说，我将如何获得下表

```
 x    | y    | a    | b
 x1   | y1   | a1   | b1
 x1   | y2   | a1   | b1 
```

* * *

这是第二个例子：对于一个表 T 使得

```
 x    | y    | a    | b
 x1   | y1   | a1   | b3
 x1   | y1   | a1   | b4
 x1   | y1   | a2   | b1
 x1   | y1   | a2   | b2
 x1   | y2   | a1   | b3
 x1   | y2   | a1   | b4
 x1   | y2   | a2   | b1
 x1   | y2   | a2   | b2 
```

我期待得到

```
 x    | y    | a    | b
 x1   | y1   | a1   | b3
 x1   | y2   | a1   | b3 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T02:03:37.130

考虑 SQL 2005 或更高版本：

```
SELECT T1.X,
       T1.Y,
       T1.A,
       T1.B
  FROM
      (SELECT X,
              Y,
              A,
              B,
              ROW_NUMBER() OVER (Partition BY X,Y Order By A,B) AS RowNum
         FROM T
     ) T1
WHERE T1.RowNum = 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T02:26:14.290

根据您的评论和新表结构，您可以使用这个与 DBMS 无关的简单解决方案：

```
SELECT a.x,a.y,a.a,MIN(a.b) b
FROM T a
JOIN ( SELECT x,y,MIN(a) a FROM T GROUP BY x,y ) b ON
    a.x = b.x AND
    a.y = b.y AND
    a.a = b.a
GROUP BY a.x,a.y,a.a 
```

* * *

## [SQL-Fiddle 演示](http://sqlfiddle.com/#!3/c1a88/2/0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T04:13:38.243

这是一个非常有效的Oracle解决方案

```
select x, 
       y, 
       min(a) as a, 
       min(b) keep( dense_rank first order by a) as b
  from T
 group by x,y 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T07:07:41.323

请试试这个，让我知道

```
select x,y,MIN(a) a,MIN(b) b
from T
group by X,y 
```

# jquery - ul li 行但有序

> ID：11424510
> 
> 赞同：0
> 
> 时间：2012-07-11T01:57:53.197
> 
> 标签：jquery, html, css

我正在引导程序中创建一个大型菜单，我想以最干净最简单的方法显示 4 行（或更多），但 4 行很好，菜单项。

我在这里做了一个小提琴[http://jsfiddle.net/ozzy/cX5DU/](http://jsfiddle.net/ozzy/cX5DU/)

问题似乎是 li 是按照通过 html 读取的顺序在页面上呈现的。

有没有办法对列进行排序，以便 li 以数字顺序垂直显示？

标记为 jquery 因为我认为 jquery 可能是这里的救星。

CSS是：

```
 ul{   width:760px;   margin-bottom:20px;   overflow:hidden;   border-top:1px solid #ccc; } 
 li{   line-height:1.5em;   border-bottom:1px solid #ccc;   float:left;   display:inline; } 
  #double li  { width:50%;} /* 2 col */ 
  #triple li  { width:33.333%; } /* 3 col */ 
  #quad li    { width:25%; } /* 4 col */ 
  #six li     { width:16.666%; } /* 6 col */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T02:39:33.440

我会使用单个 ul 来保留源 html，该 ul 按顺序列出项目，然后在加载 DOM 时通过 JS 进行一些改组：

```
$(document).ready(function(){    
    var $ul = $("#quad"),
        $lis = $ul.children(),
        i,
        cols = 4,
        rowHeight = Math.ceil($lis.length / cols);

    for (i=0; i+rowHeight<$lis.length; i+=rowHeight)
        $("<ul></ul>").append($lis.slice(i,i+rowHeight))
                      .insertBefore($ul);
}); 
```

演示：http: [//jsfiddle.net/cX5DU/1/](http://jsfiddle.net/cX5DU/1/)

这会创建额外的 ul 元素，每个元素都有自己的原始列表部分。您需要更新 CSS 以浮动 uls 而不是浮动 lis（如小提琴所示）。

# unity3d - Unity TerrainData 与绝对海拔不兼容？

> ID：11424511
> 
> 赞同：0
> 
> 时间：2012-07-11T01:57:57.167
> 
> 标签：unity3d, terrain, perlin-noise

Unity TerrainData 结构是否可以采用绝对高程？我有一个生成绝对海拔的地形生成器，但它们很大。振幅最高的 perlin 八度音阶决定了整个地图的高度，振幅为 2500，波长为 10000。为了让我的地图正确平铺并在高度之间无缝过渡，我需要能够使用这个绝对高度系统。我会缩小生成器的输出以适应有限的空间（0 到 1 之间），并拉伸 TerrainData 的 y 比例，但它会失去太多的精度。

我能做些什么？有没有办法可以使用可能相差多达 2500 米的海拔？可能很重要的一件事是，单个地形对象的空间永远不会有那么大的变化，但是在许多很多地形对象中，玩家有可能穿越那种高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T05:14:16.557

我已经测试了改变不同的变量，我得出了以下结论......

高度图分辨率并不意味着数据的精度（我问过的一些人认为它决定了可能的高度值的数量）。它表示每行和每列的样本数。这与大小一起决定了样本之间的距离，以及地形的多边形有多大。我的印象是没有办法提高精度，尽管我现在知道如何增加地形对象的高度。相反，由于我在同一个地形对象中永远不会有 2500 米的高差，因此我的生成器生成的每一块地形我都将放入一个地形对象，该对象的定位和大小可以包含该正方形中的所有数据。还必须转换数据以使其适合，但除此之外，我认为这种方法没有任何缺点。

重要提示：分辨率必须为 2^n + 1，其中 n 是任意数字。如果您提供不同的分辨率值，则将选择下一个允许的值（始终是您选择的下一个）。

# objective-c - TableView 正在编辑时调用不同的 ViewController

> ID：11424514
> 
> 赞同：0
> 
> 时间：2012-07-11T01:58:04.507
> 
> 标签：objective-c, ios, xcode, cocoa-touch, editing

I have a simple grouped table view that when a cell is selected it pushes a View controller. 导航栏的左侧项目将表格视图置于“编辑模式”。在编辑模式下，您可以根据需要移动和删除每个单元格。我想要的是能够在编辑模式下然后在正常模式下推送一个单独的视图控制器。

这是视图控制器被推送的地方：

```
- (void)tableView:(UITableView *)aTableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
...stuff that doesnt matter...

[[self navigationController] pushViewController:detailViewController animated:YES];

} 
```

BarButtonItems 在这里声明：

```
 [[self navigationItem] setLeftBarButtonItem:[self editButtonItem]]; 
```

这是声明所有编辑内容的地方：

```
- (void)tableView:(UITableView *)atableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{

if (editingStyle == UITableViewCellEditingStyleDelete)
{
    [atableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation: UITableViewRowAnimationFade];
}
}

- (void)tableView:(UITableView *)atableView 
moveRowAtIndexPath:(NSIndexPath *)sourceIndexPath 
  toIndexPath:(NSIndexPath *)destinationIndexPath
{
[[BNRItemStore sharedStore] moveItemAtIndex:[sourceIndexPath row] 
                                    toIndex:[destinationIndexPath row]];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T02:08:57.123

当您在 didSelectRowAtIndexPath 中推送视图控制器时，您可以检查 tableview 是否处于编辑模式。如果是，您可以推送不同的视图控制器。

```
- (void)tableView:(UITableView *)aTableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
      ...stuff that doesnt matter...
         if(aTableView.editing) // The tableview is in editing mode
      [[self navigationController] pushViewController:otherViewController animated:YES];
      else [[self navigationController] pushViewController:detailViewController animated:YES];

} 
```

如果 tableview 当前处于编辑模式，则 editing 是一个返回 YES 的属性。

# c# - Postbackurl Vs Response.Redirect（丢失数据）

> ID：11424521
> 
> 赞同：0
> 
> 时间：2012-07-11T01:58:37.173
> 
> 标签：c#, asp.net, redirect, postbackurl

我的 aspx 页面中有一个按钮，该按钮在 postbackurl 值后面的代码中被设置。我更新了代码以添加单击事件处理程序，并添加了 Response.Redirect 代码以在单击按钮后将用户重定向到页面。我最终添加点击事件的唯一原因是因为我必须在单击按钮时添加一些额外的逻辑，包括重定向到在 postbackurl 中使用的相同 url。该页面确实在单击时被重定向，但是一旦表单被重定向到 URL，该字段中的所有隐藏字段似乎都会丢失。无论如何我可以在不丢失隐藏数据的情况下提交表单。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T02:26:03.383

也许您可以解决此问题的一种方法是使用服务器端 Transfer() 调用。

[http://msdn.microsoft.com/en-us/library/540y83hx(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/540y83hx(v=vs.85).aspx)

在大多数情况下，我看到您真正想要做的是使用 URL 参数传递新页面的信息。获取新页面所需的所有内容并将其放入 url（如果它是安全敏感的，请加密）。

* * *

**如果您遇到的唯一问题是您想留在同一页面上，这很简单，只需让 click 事件处理程序返回而不执行 response.redirect 或传输。**

如果这对您不起作用，请发布代码。

# emacs - Emacs：缩写模式不扩展简单缩写，可能的原因？

> ID：11424526
> 
> 赞同：3
> 
> 时间：2012-07-11T01:59:08.557
> 
> 标签：emacs

我想将字符串 'target="_blank"' 分配给缩写 'tgt'，因为我经常使用它，而且每次都必须输入很烦人。

上面的字符串可能需要转义等等，所以作为一个更简单的起点，我尝试将“target”分配给“tgt”。尽管打开`abbrev-mode`并将其定义为全局缩写，但如果我键入“tgt”并点击空格，则什么也没有发生。如果我这样做，`M-x list-abbrevs`我会得到这个：

```
(global-abbrev-table)

"target"       1    "tgt" 
```

所以好像被记录了。当我在 tgt 之后点击一个空格时，我本来希望 tgt 被扩展为目标，但这并没有发生。我错过了什么？我是否完全误解了缩写的性质？我查看了[Emacs wiki 页面](http://emacswiki.org/emacs/AbbrevMode)，但与许多 Emacs 页面一样，它提供了许多复杂的解决方案和令人讨厌的基础知识覆盖面。

编辑：令人尴尬的是，这看起来像是错误的缩写文件和反转的分配的组合，因此键入“目标”会产生“tgt”。我现在有 'tgt' 根据需要生成 'target="_blank"'。向大家道歉。

但是，我现在有一个相关的问题。当我点击空格时，这个缩写会扩展，通常我不希望在 'target="_blank"' 字符串后面有空格。有没有办法自动删除空间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T02:21:02.230

您必须以相反的方式定义缩写。您这样做的方式会将“目标”扩展为“tgt”。

要做正确的事，首先在缓冲区中输入*您希望缩写扩展为*. 在您的情况下，这将是“目标”。然后，在单词后面加上点，键入`C-x a g`。这将提示您输入一个缩写，您将为其键入“tgt”。

等等：如果`abbrev-mode`打开，输入`tgt` 现在将扩展为“目标”。

还有其他定义缩写的方法，例如 via `M-x define-global-abbrev`，因此最好查看[文档](http://www.gnu.org/software/emacs/manual/html_node/emacs/Defining-Abbrevs.html)。

删除缩写后的空格的问题是 Emacs 会在缩写展开*后*插入它。所以点击空格基本上会做两件事：触发缩写的扩展，然后运行正常的自插入命令。

避免这种情况的一种简单方法是键入`C-x '`或`C-x a e`显式扩展缩写而不是打开`abbrev-mode`. 除了，这有点烦人。但是，如果我们再次查看文档，我们会发现：

> 功能：**define-abbrev** *表名扩展&可选钩子计数*
> 
> [...]
> 
> 如果*hook*是一个非 nil 符号，其 no-self-insert 属性为非 nil，则 hook 可以显式控制是否插入触发扩展的自插入输入字符。如果在这种情况下钩子返回非零，则禁止插入字符。相比之下，如果 hook 返回 nil，expand-abbrev 也返回 nil，就好像展开并没有真正发生一样。

这意味着如果您将以下几行放入您的“.emacs”文件中：

```
(defun my-after-abbrev-expand ()
  (when (looking-back "\"\"\\|''\\|()\\|\\[\\]\\|{}")
    (backward-char 1))
  t)
(put 'my-after-abbrev-expand 'no-self-insert t) 
```

那么你可以像这样定义一个缩写：

```
(define-abbrev global-abbrev-table "tgt" "target=\"\"" 'my-after-abbrev-expand) 
```

以避免插入空格字符。此外，`my-after-abbrev-expand`如果扩展以两个双引号、两个单引号或一对圆括号、方括号或花括号结束，该函数会将点向左移动一个位置。

# sql-server - 如何根据日期自动更新数据库？

> ID：11424530
> 
> 赞同：2
> 
> 时间：2012-07-11T01:59:26.343
> 
> 标签：sql-server

如何根据日期自动更新数据库？

```
Message ID |   Message   |    StartDate   |   EndDate    | Status
     1     |    Hello    |    07/7/2012   |   08/7/2012  | Expired 
     2     |      Hi     |    10/7/2012   |   12/7/2012  | Ongoing
     3     |   Hi World  |    11/7/2012   |   18/7/2012  | Pending 
```

如何根据今天的日期自动更新状态？

更多信息：我正在使用 SQL-Server Management Studio。抱歉没有说明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T02:11:00.220

我认为表格没有办法自行更新。您应该考虑在 SQL Server 中安排作业。

[在此处](http://msdn.microsoft.com/en-us/library/ms190268.aspx)查看此 MSDN 文章

该作业将每天运行并考虑每一行并在适当的情况下更新状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T02:11:43.810

您可以做的最好的事情是创建存储过程，根据您的日期时间更新表上的记录并创建 SQL Server 作业，然后将其安排在您想要的时间执行它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T02:13:49.827

我将创建一个 SP，将所有消息的状态设置为“已过期”，`EndDate > GETDATE()`并使用 Sql Server 中的作业对其进行调度：

```
CREATE PROCEDURE UpdateMessages
AS

UPDATE Messages SET Status = 'Expired' WHERE EndDate > GETDATE()

GO 
```

# json - Twitter API GET statuses/user_timeline - 如何包含身份验证？

> ID：11424533
> 
> 赞同：0
> 
> 时间：2012-07-11T01:59:56.847
> 
> 标签：json, api, twitter, oauth, get

对于示例获取请求：

[https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=twitterapi&count=2](https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=twitterapi&count=2)

如此处所述：

[https://developer.twitter.com/en/docs/tweets/timelines/api-reference/get-statuses-user_timeline.html](https://developer.twitter.com/en/docs/tweets/timelines/api-reference/get-statuses-user_timeline.html)

我有一个 oauth 用户令牌和用户令牌密码，以及我的应用程序凭据......

文档声明支持身份验证，但我如何将其包含在不可公开访问的屏幕名称的获取请求中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T10:26:50.227

如果我正确理解您的问题，您希望能够使用 OAuth 令牌和属于您网站上的用户的机密从第三方用户那里获取推文。来自第三方用户的推文不可公开访问，但您的用户有权访问它们。这是正确的吗？

通常，如果您想代表您的用户访问私有资源，您必须使用 OAuth 令牌和您的应用程序凭据[对请求进行签名。](https://developer.twitter.com/en/docs/basics/authentication/guides/authorizing-a-request.html)然后 Twitter 可以检查哪个用户在您的网站上登录，以及该用户是否授予了您的网站访问权限。

该签名以如下格式在您的 GET 请求的标头中发送：

```
Authorization: 
        OAuth oauth_consumer_key="xvz1evFS4wEEPTGEFPHBog", 
              oauth_nonce="kYjzVBB8Y0ZFabxSWbWovY3uYSQ2pTgmZeNu2VS4cg", 
              oauth_signature="tnnArxj06cWHq44gCs1OSKk%2FjLY%3D", 
              oauth_signature_method="HMAC-SHA1", 
              oauth_timestamp="1318622958", 
              oauth_token="370773112-GmHxMAgYyLbNEtIKZeRNFsMKPR9EyMZeS9weJAEb", 
              oauth_version="1.0" 
```

Twitter 还提供了有关如何[计算签名的](https://developer.twitter.com/en/docs/basics/authentication/guides/creating-a-signature.html)文档。

# ruby-on-rails - 使用类变量

> ID：11424535
> 
> 赞同：0
> 
> 时间：2012-07-11T02:00:34.110
> 
> 标签：ruby-on-rails, ruby, formtastic

这里是初学者，通过跳入一个项目来学习 ruby​​ on rails。这个问题可能是纯红宝石，与rails无关。我还想指出我正在使用 Active_Admin。

我有以下两个类：所有者和电话。

```
class Owner < ActiveRecord::Base
  attr_accessible :email, :password,
  has_many :phones
end

class Phone < ActiveRecord::Base
  attr_accessible :owner_id :model
  belongs_to :owner
end 
```

我将如何从手机模型中访问所有者的电子邮件，例如：

```
form do |f|
  f.inputs "Phone Details" do
    f.input :model
    f.input :owner_id   # This is where I want the email, not the owners id.
  end
  f.buttons
end 
```

看来我应该在跳入铁轨之前复习一下镐书并完善我的红宝石。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T02:28:24.733

要将所有者和电话放在一个表单中，您的表单应如下所示：

```
form_for @phone do |phone_form|
  phone_form.label :model
  phone_form.text_field :model
  fields_for @phone.owner do |owner_fields|
    owner_fields.label :email
    owner_fields.text_field :email 
```

如果您使用此方法，请确保您可以通过设置模型`Owner`来更新模型。`Phone`[`accepts_nested_attributes_for :owner`](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)`Phone`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:50:12.180

在这种情况下，您应该使用`nested form`. [这个](http://railscasts.com/episodes/196-nested-model-form-part-1)railscast很好地解释了嵌套形式的用法。

# php - MySQL JOINS 用例

> ID：11424537
> 
> 赞同：0
> 
> 时间：2012-07-11T02:00:56.520
> 
> 标签：php, mysql, doctrine-orm

假设我有一个表**用户**，其中包含以下字段：

```
id
username
email
hobbies 
```

我有另一个名为**hobbies**的表，它存储有关每个爱好的特定信息：

```
name | unique
created
type
summary 
```

现在通常有人会通过创建多对多关系和连接表来解决这个问题，称之为**user_hobby**：

```
user_id
hobby_name 
```

我想要做的不同是使用存储爱好名称序列化数组的用户表下的**爱好字段。**

因此，当我想获取用户的爱好列表时，我会这样做，而不是加入。

```
$array = $user->fetchHobbies()->toArray();
$hobbies = Hobbies::findByNames($array); 
```

性能方面，哪个更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T02:14:18.093

性能方面，最好将其保存在规范化的数据库结构中，并具有正确的索引。

原因是，如果你想说找到所有有“足球”爱好的用户，你要么需要选择每个用户并反序列化他们的爱好数据，`like`要么在列上运行通配符匹配，无论哪种方式都会很慢大数据。

# jquery - CSS：多个元素的样式相同 - 出于命名目的？

> ID：11424539
> 
> 赞同：0
> 
> 时间：2012-07-11T02:01:10.560
> 
> 标签：jquery, css, class

因此，我的网站布局非常一致。结果，我有许多具有相同样式的类（主要是宽度、高度、填充等）。这主要有两个原因：

1.  它使浏览代码时更容易，因为某些元素将具有可以识别的类。

2.  因为它们可以被识别，所以在与 jQuery 一起使用时也很有帮助。例如，在某些情况下，我有几个相同样式的 div 彼此重叠，我让它们一个一个循环。

3.  如果我想将样式更改为其中之一（可能不是大小，但可能是背景颜色、字体颜色/大小等），然后我可以专门针对该样式而不必稍后重命名...或创建一个新类进行编辑。

这是不好的做法吗？过多的 CSS 会创建一个慢得多的网站吗？如果这是不好的做法......你建议最好解决我使用它的原因。对于＃3，似乎创建第二个类可以在这些情况下工作。但是#1 和#2 呢？我应该使用其他类型的命名约定吗？

# java - 验证字符串是否为十六进制

> ID：11424540
> 
> 赞同：35
> 
> 时间：2012-07-11T02:01:24.510
> 
> 标签：java, string, hex

我有一个像“09a”这样的字符串，我需要一种方法来确认文本是否为十六进制。我发布的代码做了类似的事情，它验证一个字符串是一个十进制数。我想做同样的事情，但对于十六进制。

```
 private static boolean isNumeric(String cadena) {
    try {
        Long.parseLong(cadena);
        return true;
    } catch (NumberFormatException nfe) {
        JOptionPane.showMessageDialog(null,"Uno de los números, excede su capacidad.");
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-11T02:05:57.710

有一个接受第二个参数的重载[`Long.parseLong`](http://docs.oracle.com/javase/6/docs/api/java/lang/Long.html#parseLong%28java.lang.String,%20int%29)，指定基数：

```
Long.parseLong(cadena,16); 
```

作为替代方案，您可以遍历字符串中的字符并调用[`Character.digit(c,16)`](http://docs.oracle.com/javase/6/docs/api/java/lang/Character.html#digit%28char,%20int%29)它们（如果它们中的任何一个返回`-1`它不是有效的十六进制数字）。如果字符串太大而无法放入 a 中，这将特别有用`long`（如注释中所指出的，如果使用第一种方法会导致异常）。例子：

```
private static boolean isNumeric(String cadena) {
    if ( cadena.length() == 0 || 
         (cadena.charAt(0) != '-' && Character.digit(cadena.charAt(0), 16) == -1))
        return false;
    if ( cadena.length() == 1 && cadena.charAt(0) == '-' )
        return false;

    for ( int i = 1 ; i < cadena.length() ; i++ )
        if ( Character.digit(cadena.charAt(i), 16) == -1 )
            return false;
    return true;
} 
```

顺便说一句，我建议将“测试有效数字”和“向用户显示消息”的关注点分开，这就是为什么我只是`false`在上面的示例中返回而不是先通知用户。

最后，您*可以*简单地使用正则表达式：

```
cadena.matches("-?[0-9a-fA-F]+"); 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-12-02T08:05:09.180

对异常的可怕滥用。永远不要这样做！（不是我，是 Josh Bloch 的 Effective Java）。无论如何，我建议

```
private static final Pattern HEXADECIMAL_PATTERN = Pattern.compile("\\p{XDigit}+");

private boolean isHexadecimal(String input) {
    final Matcher matcher = HEXADECIMAL_PATTERN.matcher(input);
    return matcher.matches();
} 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-09-13T06:50:56.800

在我自己的代码中使用它来检查字符串是否是 MAC 地址

```
boolean isHex = mac_addr.matches("^[0-9a-fA-F]+$"); 
```

我对这个线程中提供的其他答案的不满是，如果字符串的长度很大，它也会抛出异常。因此，如果您正在测试 MAC 地址是否由有效的十六进制组成，则它不是很有用。

不要害怕使用正则表达式！

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-07-11T02:54:29.420

Long.parseLong 有第二种形式，它将基数作为其第二个参数。

```
private static boolean isHexNumber (String cadena) {
  try {
    Long.parseLong(cadena, 16);
    return true;
  }
  catch (NumberFormatException ex) {
    // Error handling code...
    return false;
  }
} 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2017-03-23T14:24:41.027

这里有一些用于不同选项和执行时间结果的代码（JDK 11）：

```
execution time isHex1: 3670 ms
execution time isHex2: 3294 ms
execution time isHex3: 3946 ms
execution time regex: 31288 ms 
```

测试代码：

```
public class HexPerformanceTest {
    @Test
    public void testPerformance() {
        int count = 100000000;
        char[] chars = {
            '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f',
            '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F'
        };
        String regexString = new String(chars);

        Predicate<String> isHex1Test = testString -> {
            boolean isHex = true;
            for (char c: testString.toCharArray()) {
                if (!isHex1(c)) {
                    isHex = false;
                    break;
                }
            }
            return isHex;
        };

        Predicate<String> isHex2Test = testString -> {
            boolean isHex = true;
            for (char c: testString.toCharArray()) {
                if (!isHex2(c)) {
                    isHex = false;
                    break;
                }
            }
            return isHex;
        };

        Predicate<String> isHex3Test = testString -> {
            boolean isHex = true;
            for (char c: testString.toCharArray()) {
                if (!isHex3(c)) {
                    isHex = false;
                    break;
                }
            }
            return isHex;
        };

        Pattern pattern = Pattern.compile("^[0-9a-fA-F]+$");
        Predicate<String> regexTest = testString -> {
            Matcher matcher = pattern.matcher(regexString);
            return matcher.matches();
        };

        System.out.println("execution time isHex1: " + milliseconds(regexString, isHex1Test, count) + " ms");
        System.out.println("execution time isHex2: " + milliseconds(regexString, isHex2Test, count) + " ms");
        System.out.println("execution time isHex3: " + milliseconds(regexString, isHex3Test, count) + " ms");
        System.out.println("execution time regex: " + milliseconds(regexString, regexTest, count) + " ms");
    }

    private long milliseconds(String testString, Predicate<String> hexTest, int count) {
        long start = System.currentTimeMillis();
        for (int i = 0; i < count; i++) {
            hexTest.test(testString);
        }
        return System.currentTimeMillis() - start;
    }

    private boolean isHex1(char c) {
        return (c >= '0' && c <= '9') || (c >= 'a' && c <= 'f') || (c >= 'A' && c <= 'F');
    }

    private boolean isHex2(char c) {
        switch (c) {
            case '0':
            case '1':
            case '2':
            case '3':
            case '4':
            case '5':
            case '6':
            case '7':
            case '8':
            case '9':
            case 'a':
            case 'b':
            case 'c':
            case 'd':
            case 'e':
            case 'f':
            case 'A':
            case 'B':
            case 'C':
            case 'D':
            case 'E':
            case 'F':
                return true;
            default:
                return false;
        }
    }

    private boolean isHex3(char c) {
        return (Character.digit(c, 16) != -1);
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-23T18:13:54.080

无库方法

```
public static boolean isHexadecimal(String value)
{
    if (value.startsWith("-"))
    {
        value = value.substring(1);
    }

    value = value.toLowerCase();

    if (value.length() <= 2 || !value.startsWith("0x"))
    {
        return false;
    }

    for (int i = 2; i < value.length(); i++)
    {
        char c = value.charAt(i);

        if (!(c >= '0' && c <= '9' || c >= 'a' && c <= 'f'))
        {
            return false;
        }
    }

    return true;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-11T09:37:16.027

您实际上可以使用以下方法检查任何长度的文本。

```
public static boolean isHexadecimal(String text) {
    Objects.requireNonNull(text);
    if(text.length() < 1)
        throw new IllegalArgumentException("Text cannot be empty.");

    char[] hexDigits = { '0', '1', '2', '3', '4', '5', '6', '7', '8', '9',
            'a', 'b', 'c', 'd', 'e', 'f', 'A', 'B', 'C', 'D', 'E', 'F' };

    for (char symbol : text.toCharArray()) {
        boolean found = false;
        for (char hexDigit : hexDigits) {
            if (symbol == hexDigit) {
                found = true;
                break;
            }
        }
        if(!found)
            return false;
    }
    return true;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-10T15:04:46.180

尝试这个。

```
static boolean isHexadecimal(String s) {
    return s.chars()
        .skip(s.startsWith("-") ? 1 : 0)
        .allMatch(c -> "0123456789ABCDEFabcdef".indexOf(c) >= 0);
}

public static void main(String[] args) {
    System.out.println(isHexadecimal("-0e34a29Fb"));
    System.out.println(isHexadecimal("-ff-"));
    System.out.println(isHexadecimal("ef-"));
    System.out.println(isHexadecimal("efg"));
} 
```

输出：

```
true
false
false
false 
```

`.skip(s.startsWith("-") ? 1 : 0)`如果您不允许该标志，则可以省略。

# oracle - 标准并根据它进行排序

> ID：11424542
> 
> 赞同：0
> 
> 时间：2012-07-11T02:01:33.420
> 
> 标签：oracle, hibernate

嗨，我有 2 个与休眠标准相关的问题

我有以下包含多种颜色的产品。

我希望找到至少包含红色和绿色的产品。

```
Product class

    String id;

    name;

    style;

    List<Color> colors{};

Color class

    id

    color 
```

1）每次我进行检索时，每个产品都会根据它有多少种颜色出现..例如产品A有红绿蓝，它会出现3次。

我使用了 FetchMode: Select 但它似乎没有改变。

我能想到的唯一可能的解决方案是将它们插入哈希集中并仅重写主键的哈希码和相等方法

2) 如何返回根据与我的搜索最接近的匹配排序的查询？

例如，我搜索样式和颜色红色、绿色。

所以与款式颜色和红绿色相匹配的产品

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T04:10:48.927

1）您使用需要区分结果。

这不是改变 FetchMode 的问题。

请看这篇[文章](https://community.jboss.org/wiki/HibernateFAQ-AdvancedProblems#Hibernate_does_not_return_distinct_results_for_a_query_with_outer_join_fetching_enabled_for_a_collection_even_if_I_use_the_distinct_keyword)

```
setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY) 
```

2）嗯......没有那种标准功能来自动查找和排序最接近的匹配的东西

无论如何，制作类似功能的最简单方法是使用 addOrder 和 createAlias 而不是 setFetch

```
ct.createAlias("colors", "cs")
  .add( Restrictions.like("style", value + "%"))
  .add( Restrictions.in("color", colorsArray ))
  .addOrder( Order.asc("style"))
  .addOrder( Order.asc("cs.color")) 
```

我不能在这里写所有类型的匹配方法。

[请参考这里](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html#querycriteria-examples)的限制的各种表达

# php - PHP redis 错误

> ID：11424547
> 
> 赞同：7
> 
> 时间：2012-07-11T02:02:33.877
> 
> 标签：php, redis

我安装了 php redis 扩展。但是当我运行测试代码时，出现以下错误：

```
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php5/20090626+lfs/redio.so' - /usr/lib/php5/20090626+lfs/redio.so: cannot open shared object file: No such file or directory in Unknown on line 0
PHP Fatal error:  Class 'Redis' not found in /var/www/test/redisTest.php on line 2 
```

我的php版本是5.3.10，我安装了新版本的phpredis。

我可以得到你的帮助吗？谢谢！

安装步骤如下：

```
git clone https://github.com/nicolasff/phpredis.git
cd phpredis
 phpize
make 
make install 
```

然后在 /etc/php5/fpm/confi.d 中添加一个配置文件来加载 redis.so

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-04T02:54:47.690

我使用 PHP 5.3 并使用以下步骤安装 PHP-Redis 对我来说效果很好：

*   安装 pecl 扩展
    `sudo pecl install redis`
*   在`php.ini`中，您*可能*需要设置`extension_dir`正确的值。（可以`usr/lib64/php/modules`按照上面的命令把redis.so放到这个目录下）。就我而言，我没有设置这个。
*   将以下行添加到`php.ini`：
    `extension=redis.so`
*   重启 Apache/PHP-FPM

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-07-07T00:53:07.943

要验证您是否安装了 redis，您可以执行此操作

`php -m | grep redis`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T02:14:56.113

*使用echo phpinfo()*创建文件 PHP ；在其中查看模块是否显示。如果您没有看到该模块，则说明它没有正确加载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-02T15:49:02.787

在 PHP5.3 和 Amazon Linux AMI 中（与 Centos OS 5 相同）

安装库

```
yum install php-pear php-devel make gcc wget 
```

安装redis

```
cd /opt/
mkdir /opt/redis
wget https://redis.googlecode.com/files/redis-2.6.14.tar.gz "or last version"
tar -zxvf redis-2.6.14.tar.gz
cd redis-2.6.14
make
make install 
```

通过 pecl 安装 php-redis

```
pecl install redis 
```

配置选项“php_ini”未设置为 php.ini 位置

您应该将“extension=redis.so”添加到 php.ini

重新加载 Web 服务 httpd

```
service httpd reload 
```

验证是否已安装扩展

```
php -m
[PHP Modules]
bz2
...
**redis**
...
[Zend Modules] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-01T10:02:10.800

根据您的服务器环境（例如 x86）下载适当的库文件。此外，检查您的 PHP 是否是线程安全的，并相应地下载 Redis 库。然后将库文件放在扩展文件夹中。您需要在 php.ini 中提及库，如下所示。

```
extension=redis.dll 
```

然后重新启动服务器一次，并检查它是否正常工作。如果你有命令行 PHP，你可以在命令行 PHP 中检查它，

```
php r("print_r(get_loaded_extensions());") 
```

# c++ - 如何检查字符串是否包含空格/制表符/新行（任何空白）？

> ID：11424549
> 
> 赞同：9
> 
> 时间：2012-07-11T02:02:43.060
> 
> 标签：c++

我知道有一个“isspace”函数可以检查空格，但这需要我遍历字符串中的每个字符，这可能会影响性能，因为这会被调用很多次。有没有一种快速的方法来检查 std::string 是否只包含空格？

前任：

```
function("       ") // returns true
function("    4  ") // returns false 
```

我想到的一种解决方案是使用正则表达式，然后我会知道它只包含空格，如果它是错误的......但我不确定这是否比 isspace 函数更有效。

```
regex: [\w\W] //checks for any word character(a,b,c..) and non-word character([,],..) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T02:05:46.943

*任何*方法都必然需要查看字符串的每个字符。调用`isspace()`每个字符的循环非常有效。如果`isspace()`被编译器内联，那么这将是接近最优的。

当然，一旦看到非空格字符，循环就应该中止。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-11T02:08:56.053

使用常规字符串，您能做的最好的将是以下形式：

```
return string::find_first_not_of("\t\n ") == string::npos; 
```

在最坏的情况下，这将是 O(n)，但在不了解字符串的情况下，这将是您能做的最好的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T02:09:31.257

您正在假设正则表达式不会遍历字符串。正则表达式可能比线性搜索重得多，因为它可能会构建一个 FSM 并基于它进行遍历。

The only way you could speed it up further and make it a near-constant time operation is to amortize the cost by iterating on every update to the string and caching a bool/bit that tracks if there is a space-like character, returning that value if no changes have been made since, and updating that bit whenever you do a write operation to that string. However, this sacrifices/slows that speed of modifying operations in order to increase the speed of your custom `has_space()`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T02:54:54.237

For what it's worth, a locale has a function (scan_is) to do things like this:

```
#include <locale>
#include <iostream>
#include <iomanip>

int main() {

    std::string inputs[] = { 
        "all lower",
        "including a space"
    };

    std::locale loc(std::locale::classic());

    std::ctype_base::mask m = std::ctype_base::space;

    for (int i=0; i<2; i++) {
        char const *pos;
        char const *b = &*inputs[i].begin();
        char const *e = &*inputs[i].end();

        std::cout << "Input: " << std::setw(20) << inputs[i] << ":\t";
        if ((pos=std::use_facet<std::ctype<char> >(loc).scan_is(m, b, e)) == e)
            std::cout << "No space character\n";
        else
            std::cout << "First space character at position " << pos - b << "\n";
    }
    return 0;
} 
```

It's probably open to (a lot of) question whether this gives much (if any) real advantage over using `isspace` in a loop (or using `std::find_if`).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-19T19:17:19.890

You can also use find_first_not_of if you all the characters to be in a given list. Then you can avoid loops.

Here is an example

```
#include <string>
#include <algorithm>
using namespace std;
int main()
{
    string str1="      ";
    string str2="      u    ";
    bool ContainsNotBlank1=(str1.find_first_not_of("\t\n ")==string::npos);
    bool ContainsNotBlank2=(str2.find_first_not_of("\t\n ")==string::npos);
    bool ContainsNotBlank3=(str2.find_first_not_of("\t\n u")==string::npos);
    cout << ContainsNotBlank1 <<endl;
    cout << ContainsNotBlank2 <<endl;
    cout << ContainsNotBlank3 <<endl;
    return 0;
} 
```

Output: 1: because only blanks and a tab 0: because u is not into the list "\t\n " 1: because str2 contains blanks, tabs and a u.

Hope it helps Tell me if you have any questions

# delphi - 从 delphi 代码调用 C++ builder XE Form

> ID：11424552
> 
> 赞同：0
> 
> 时间：2012-07-11T02:03:12.123
> 
> 标签：delphi, interop, c++builder

我正在使用 JEDI JCL 包中的出色 TExceptionDialog 来显示 C++ builder XE 项目中未处理的异常，到目前为止一切正常。我决定通过编写我自己的自定义表单以通过 FTP 将崩溃报告上传到服务器来稍微增强它。

问题是我无法从delphi PAS单元打开我的自定义表单，试图定义为外部（这里没有delphi程序员，抱歉:(）但不知道如何正确编码。我已经阅读了很多教程但除了为我的自定义表单编写 DLL 或 OLE 容器之外，找不到任何有用的东西，对于这个项目来说真的是矫枉过正。

问题是，我怎样才能正确执行此任务？如何从 PAS delphi 单元执行 C++ 单元中定义的表单的 ShowModal()？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:33:30.540

我找到了一种简单实用的方法，有点丑但有效！

诀窍是通过使用 Screen.Forms 对象遍历所有表单来获取表单。我已将表单的 TAG 属性设置为预定义的数字，只是为了获得它的简单 ID。

简而言之，在我的表单的 C++ 单元中，我会这样做：

```
MyForm->Tag=9999; // easy way of Iding my form 
```

然后，在我的 TExceptionDialog 的 delphi 单元中，在 SEND 按钮单击方法中：

```
procedure TExceptionDialog.SendBtnClick(Sender: TObject);
var
   i: integer;
   form: TForm;
begin
  for i := 0 to Screen.FormCount-1 do // all forms
  begin
    form := Screen.Forms[i]; // get a form
    if(form.Tag = 9999) then // check if its my form
    begin
      form.ShowModal; // if its mine, call showmodal
      break;
    end;
  end;
  ModalResult := mrOk;  // return to my app
end; 
```

# php - 用php延迟发送电子邮件

> ID：11424559
> 
> 赞同：1
> 
> 时间：2012-07-11T02:03:50.263
> 
> 标签：php, mysql, email, delayed-execution

所以我有一个代码可以检查表格上的记录并通过电子邮件发送给他们。table1 字段为：id - userid - email - subject - txt 代码如下（简化）：

```
$sql = "SELECT * FROM table1 where userid='$userid'";
$results = mysql_query($sql);
while ($row = mysql_fetch_array($results)) 
{
mail($row['email'],$row['subject'],$row['txt']);
} 
```

这将一次发送所有电子邮件。我希望它能够发送随机延迟的电子邮件。例如：发送第一封电子邮件，等待 1 小时，发送第二封，等待 2 小时，发送电子邮件 3 等待 5 小时，发送电子邮件 5 然后等待 2 小时......我正在考虑使用该功能`rand();` ，但我不知道如何实现延迟......有什么想法吗？我很感激任何意见

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T02:14:44.557

生成随机数，将它们以小时格式添加到时间戳，并将它们保存在数据库中。

您可以使用 PHP`rand()`函数和 mysql 来执行此操作（特别是这个 mysql 代码`DATE_ADD(NOW(), INTERVAL $randInteger HOUR)`：）

每小时运行一个脚本，检查数据库是否应该发送一封电子邮件/发送哪封电子邮件，然后根据它返回的信息进行检查。

您可以使用 cron 执行此操作（如果您有提供 cpanel 的主机，则可以在 cpanel 中执行此操作）

# java - 在循环内添加数组元素

> ID：11424560
> 
> 赞同：0
> 
> 时间：2012-07-11T02:04:24.187
> 
> 标签：java, arrays

```
 //different types of items purchased
    System.out.print("How many different types of items are being purchased? " );
    ArraySize = input.nextInt();
    input.nextLine();

    //arrays - being defined after ArraySize
    String[] item = new String[ArraySize];              //each item             
    int[] itemsPurchased = new int[ArraySize];          //item purchased
    double[] price = new double[ArraySize];             //price for each 'line' on the receipt
    double[] itemPrice = new double[ArraySize];         //price of item purchased

    for (int i=0; i<ArraySize; i++){                    //i = variable element counter

    //name of item purchased
    System.out.print("Item purchased: ");
    item[i] = input.nextLine();

    //number of items purchased
    System.out.print("Quantity: ");
    itemsPurchased[i] = input.nextInt();
    input.nextLine();

    //determines price of item based on what was purchased
    if (item.equals("Shoes") || item.equals("shoes") || item.equals("SHOES"))
        itemPrice[i] = 50.00;

    if (item.equals("T-Shirt") || item.equals("t-shirt") || (item.equals("T-SHIRT")))
        itemPrice[i] = 40.00;

    if (item.equals("Shorts") || item.equals("shorts") || item.equals("SHORTS"))
        itemPrice[i] = 75.00;

    if (item.equals("Cap") || item.equals("cap") || item.equals("CAP"))
        itemPrice[i] = 20.00;

    if (item.equals("Jacket") || item.equals("jacket") || item.equals("JACKET"))
        itemPrice[i] = 100.00;

    //adds item and item amount
        price[i] += (itemsPurchased[i] * itemPrice[i]);

    }//end for 
```

我正在尝试制作看起来像的收据行

项目 ---------- 数量 ------------成本

项目 ---------- 数量 ------------成本

项目 ---------- 数量 ------------成本

但是我坐起来保存成本的那一行（我链接的最后一行）在第一个元素之后没有保存任何东西。我只链接了我认为相关的内容，如果需要，我可以提供其余代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T02:12:30.737

```
if (item.equals("Shoes") || item.equals("shoes") || item.equals("SHOES")) 
```

`item`具有 的类型`String[]`，它永远不会等于 a `String`。您正在测试一个字符串数组是否等于单个字符串。这永远不会返回 true。您很可能希望使用`item[i]`而不仅仅是`item`.

由于上述错误，永远不会为 赋值`itemPrice[i]`。反过来`price[i]`将始终为 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T02:18:54.567

你所有的行： if (item.equals("Shoes") || item.equals("shoes") || item.equals("SHOES"))

应该使用项目[i]

例如：

if (item[i].equalsIgnoreCase("shoes"))

# uiviewcontroller - 推送和弹出 UIViewController 时将 UIButton 固定在屏幕上

> ID：11424561
> 
> 赞同：0
> 
> 时间：2012-07-11T02:04:26.160
> 
> 标签：uiviewcontroller, uinavigationcontroller, uibutton

嗨，我目前有一个带有导航控制器的基于导航的应用程序，在应用程序内有许多视图，并推回显示不同的 xib，我想做的是在屏幕右下角显示一个固定在屏幕上的按钮，它轻按时会将用户带到帮助 xib，

但是，当我每次按下或弹出视图时，按钮正在被动画化并移动到位，我希望按钮在被按下和弹出时不要移动并保持在视图的顶部。

想知道是否有人可以帮助我，谢谢，萨米。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:59:02.213

在创建 UIButton 中创建一个 UIView 类，并在所有视图控制器中创建该视图的对象，并将其添加到 self.view。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T12:15:22.933

在 appdelegate 中使用它将帮助您在所有屏幕上显示按钮。如果您需要处理此按钮，请将 viewcontrollerAppdelegate.h 导入视图控制器。并使用

```
UIAppDelegate.SettingButton.hidden=True; 
```

或像这样任何。试试看嘛

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {

        settingButton = [UIButton buttonWithType:UIButtonTypeCustom];
        [settingButton addTarget:self action:@selector(settingButtonPressed:)forControlEvents:UIControlEventTouchDown];
        UIImage *buttonImage = [UIImage imageNamed:@"icon-lb.png"];
        [settingButton setBackgroundImage:buttonImage forState:UIControlStateNormal];
        [settingButton setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
        settingButton.frame = CGRectMake(265, 17, 40, 45);
        settingButton.hidden=TRUE;
        [self.window addSubview:settingButton];
        [self.window makeKeyAndVisible];
        return YES;
    }

    - (void)settingButtonPressed:(id) sender {
         [[NSNotificationCenter defaultCenter] postNotificationName:@"settingButtonPressed" object:nil];
        setting *obj = [[setting alloc] initWithNibName:@"setting" bundle:nil];
        UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:obj];
        navController.navigationBar.tintColor=[UIColor blackColor];  
        [UIView beginAnimations:nil context:nil];
        [UIView setAnimationDuration:0.5]; 
        [self.window addSubview:navController.view];
        [navController.view setFrame:CGRectMake(0,480,320,480)];
            [UIView setAnimationTransition:UIViewAnimationTransitionNone forView:navController.view cache:YES];
        [navController.view setFrame:CGRectMake(0,0,320,480)];
        [UIView commitAnimations];    

    } 
```

# django - 无法让 mod_wsgi 在 Mac OS X 上与 Apache 和 Django 一起工作

> ID：11424564
> 
> 赞同：1
> 
> 时间：2012-07-11T02:05:17.723
> 
> 标签：django, macos, apache, mod-wsgi

我一直试图让 mod_wsgi 在 Mac OS X 服务器上工作，但我完全没有运气。我已将 LoadModule 语句添加到 httpd.conf，并且包含以下文件：

```
apache_django_wsgi.conf:

WSGIDaemonProcess django
WSGIProcessGroup django

Alias /plagtest/ "/Users/plagtest/myproject/"
<Directory "/Users/plagtest/myproject/">
    Order allow,deny
    Options Indexes
    Allow from all
    IndexOptions FancyIndexing
</Directory>

WSGIScriptAlias /plagtest "/Users/plagtest/myproject/apache/myproject.wsgi"

<Directory "/Users/plagtest/myproject/apache">
    Allow from all
</Directory> 
```

这是我的 WSGI 文件：

```
myproject.wsgi:

import os
import sys

paths = [ '/Users/plagtest/myproject',
          '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages',
          '/Users/plagtest',
]

for path in paths:
    if path not in sys.path:
        sys.path.append(path)

sys.executable = '/usr/local/bin/python2.7'
os.environ['DJANGO_SETTINGS_MODULE'] = 'myproject.settings'

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

我可以很好地重新启动 Apache，但是当我浏览到 localhost/plagtest/ 时，它会出现找不到文件，这就是我在错误日志中得到的：

```
File does not exist: /Library/WebServer/Documents/plagtest/ 
```

我对 Apache 并不完全熟悉，而且我确信它可能非常简单，但我终生无法在网上找到解决方案。在这件事上的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T05:22:53.400

看起来您有两个别名用于同一路径。因此，您有重复。消除：

```
Alias /plagtest/ "/Users/plagtest/myproject/"
<Directory "/Users/plagtest/myproject/">
    Order allow,deny
    Options Indexes
    Allow from all
    IndexOptions FancyIndexing
</Directory> 
```

如果没有媒体别名，django 手册推荐的 HTTP conf 是：

```
WSGIScriptAlias / /path/to/mysite.com/mysite/wsgi.py

<Directory /path/to/mysite.com/mysite>
    <Files wsgi.py>
    Order allow,deny
    Allow from all
    </Files>
</Directory> 
```

# c++ - 如何编写一个迭代器包装器来组合来自底层迭代器的连续值组？

> ID：11424565
> 
> 赞同：9
> 
> 时间：2012-07-11T02:05:20.310
> 
> 标签：c++, iterator

考虑以下顺序：

```
1, 2, 3, 4, 5, 6, 7, 8, 9, 10 
```

我有该序列的*输入迭代器。*我想将这些迭代器包装在产生以下序列的迭代器上：

```
(1,2), (3,4), (5,6), (7,8), (9,10) 
```

如果不清楚，这个序列是来自原始元素的连续元素对的序列。虽然原始元素有 10 个元素，但这个元素有 5 个：每个元素都是从原始序列中的两个元素中获得的。

我正在使用 Boost`iterator_facade`来实现这一点，但我对此有错误的尝试：

```
 template <typename Iterator>
    struct pairing_iterator
    : boost::iterator_facade<
        pairing_iterator<Iterator>,
        std::array<typename std::iterator_traits<Iterator>::value_type, 2>,
        std::input_iterator_category
        // I should probably customize reference too, but it's not relevant
    > {
        pairing_iterator(Iterator it) : it(it) {
            increment(); // A
        }
        pairing_iterator::value_type dereference() const {
            return pair;
        }
        bool equal(pairing_iterator const& that) const {
            return it == that.it; // B
        }
        void increment() {
            pair = { { *it++, *it++ } };
        }
        Iterator it;
        pairing_iterator::value_type pair;
    }; 
```

我面临的一个问题是在标有 A 的行上：当传入的迭代器是结束迭代器时，这将导致它递增，这是我做不到的。

另一个在标有 B 的行上：我将底层迭代器始终保持在“当前”对之前，因此如果迭代器位于最后一对，则底层迭代器将是结束迭代器，因此将 true 与结束pairing_iterator。

如果底层迭代器是一个*前向迭代器*，我可以在每次取消引用时简单地读取该对，并在增量时简单地推进两次。但是对于*输入迭代器*，我只能读取一次。

我是在重新发明一个已经存在于某处的轮子吗？我在 Boost 中没有找到类似的东西，这让我有点惊讶。但我很想找到一个现成的解决方案。

如果这个轮子还没有出来，我怎样才能让它真正滚动呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T03:24:59.753

我有两个建议你已经在聊天中被否决了，一个有一个奇怪但相对安全的限制，另一个有一个丑陋的解决方法：

第一个想法非常简单，但每次推进前都需要一个取消引用

```
template <typename Iterator>
struct pairing_iterator
: boost::iterator_facade<
    pairing_iterator<Iterator>,
    std::array<typename std::iterator_traits<Iterator>::value_type, 2>,
    std::input_iterator_category
    // I should probably customize reference too, but it's not relevant
> {
    pairing_iterator(Iterator it) : it(it) {
    }
    pairing_iterator::value_type dereference() const {
        auto t = *it++;
        return { { std::move(t), *it } };
    }
    bool equal(pairing_iterator const& that) const {
        return it == that.it;
    }
    void increment() {
        ++it;
    }
    Iterator it;
}; 
```

第二个想法消除了确切的一个取消引用限制，但丑陋和奇怪：

```
template <typename Iterator>
struct pairing_iterator
: boost::iterator_facade<
    pairing_iterator<Iterator>,
    std::array<typename std::iterator_traits<Iterator>::value_type, 2>,
    std::input_iterator_category
    // I should probably customize reference too, but it's not relevant
> {
    pairing_iterator(Iterator it) : it(it), dereferenced(false) {
    }
    pairing_iterator::value_type dereference() const {
        if (!dereferenced) {
            auto t = *it++;
            pair = { { std::move(t), *it } };
            dereferenced = true;
        }
        return pair;
    }
    bool equal(pairing_iterator const& that) const {
        return it == that.it;
    }
    void increment() {
        if (!dereferenced)
            dereference();
        dereferenced = false;
        ++it;
    }
    Iterator it;
    pairing_iterator::value_type pair;
    bool dereferenced;
}; 
```

我可能犯了几个错误，但希望这足以描述这些概念。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-03T16:54:19.863

```
template<typename T>
struct piterator {
   typedef std::pair<typename std::iterator_traits<T>::value_type,
                     typename std::iterator_traits<T>::value_type> value_type;

   piterator(){}
   piterator( const T& t, const T& e):itr(t),eitr(e){
     if( itr != eitr ) head.first = *itr;
     if( itr != eitr )head.second = *(++itr);
   }
   bool operator ==( const piterator& e )const {
      return e.itr == itr && e.eitr== eitr;
   }

   value_type& operator*(){ return head; }
   const value_type& operator*()const { return head; }
   value_type& operator->(){ return head; }
   const value_type& operator->()const { return head; }

   piterator& operator++() {
      if( itr != eitr )head.first = *(++itr);
      if( itr != eitr )head.second = *(++itr);
      return *this;
   }
   piterator& operator++(int) {
      if( itr != eitr )head.first = *(++itr);
      if( itr != eitr )head.second = *(++itr);
      return *this;
   }
   private:
   T itr;
   T eitr;
   value_type head;
}; 
```

需要进行额外检查以确保配对迭代器没有“超出”奇数列表的末尾。

# php - 提交表单时如何更改链接

> ID：11424566
> 
> 赞同：0
> 
> 时间：2012-07-11T02:05:24.337
> 
> 标签：php

我有一个示例代码：

```
$category_id = $_POST['category_id'];
<form action="search.php&category_id=$category_id" method="post">
    <p class="categories">
        <select name="category_id">
           <option value="1">Category 1</option>
           <option value="2">Category 2</option>
        </select>
    </p>
    <p class="submit">
        <input class="button" type="submit" value="Tìm game" />  
    </p> 
</form> 
```

当我提交表单是 URL 是`search.php&category_id=0`

如何解决这个问题，网址是`search.php&category_id=1 // OR 2`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T02:10:08.970

`<form>`将您的标签更改为

```
<form action="search.php?category_id=<?php echo $category_id?>" method="get"> 
```

`category_id`属性中的将`action`其值替换为选择的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T02:11:07.753

如果您只想发送获取数据，请将 method="post" 更改为 method="get"。

如果您想将用户带到该网址并提交帖子数据，请保留 method="post"。

```
$("select").onchange(function(){
    var id = $(this).val();
    $("form").attr("action", $("form").attr("action") + "&category_id=" + id);
}); 
```

# batch-file - 为什么 dir *.txt 也返回 *.txtf ？

> ID：11424577
> 
> 赞同：1
> 
> 时间：2012-07-11T02:06:16.603
> 
> 标签：batch-file, wildcard, dir

毫无疑问，这已经得到了回答：/我不确定如何措辞。 **我只希望文件 one.txt 以我认为是 dir *.txt 的方式返回**

这里有一些例子表明它的行为不像我想象的那样。

目录 *.txt

```
one.txt
one.txtf 
```

目录 *txt

```
one.txt
one.txtf 
```

目录 *txtf

```
one.txtf 
```

目录 *tx?

```
one.txt
one.txtf 
```

目录 *.???

```
one.txt
one.txtf 
```

目录一。？？？

```
one.txt 
```

目录 *"."???

```
one.txt
one.txtf 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T02:07:57.087

## 已编辑

简而言之-根据定义， DIR 命令按照您的暗示工作，因此它是那些“设计使然”的事情之一。

直接从微软上[DIR](http://technet.microsoft.com/en-us/library/cc755121%28v=ws.10%29.aspx)命令。这个解释比 .NET 框架的下面的解释要复杂一些。

来自[MSDN](http://msdn.microsoft.com/en-us/library/wz42302f.aspx)上的 .NET Framework 实现

> 在 searchPattern 中使用星号通配符时，例如“*.txt”，当扩展名正好是三个字符时的匹配行为与扩展名大于或小于三个字符时的匹配行为不同。文件扩展名正好是三个字符的 searchPattern 返回具有三个或更多字符扩展名的文件, 其中前三个字符与 searchPattern 中指定的文件扩展名匹配。文件扩展名为一个、两个或三个以上字符的 searchPattern 仅返回扩展名与 searchPattern 中指定的文件扩展名完全匹配的文件。当使用问号通配符时，该方法只返回与指定文件扩展名匹配的文件。例如，给定目录中的两个文件“file1.txt”和“file1.txtother”，搜索模式为“file? 。文本文件”只返回第一个文件，而搜索模式“文件*.txt" 返回两个文件。

# powershell - powershell 将所有文件从硬盘复制到另一个硬盘

> ID：11424582
> 
> 赞同：0
> 
> 时间：2012-07-11T02:07:07.243
> 
> 标签：powershell, copy-item

这就是我所拥有的，但不断收到以下错误。我正在使用 Windows 7 家庭高级版 64 位。我需要将笔记本电脑硬盘驱动器中的所有内容复制到桌面 K:\Mybackup 文件夹。

```
$source = "M:\"
$dest = "K:\MyBackup"
Copy-item $source $dest -recurse 
```

PS C:> copy-item $source $dest Copy-Item ：不支持给定路径的格式。在 line:1 char:10 + copy-item <<<< $source $dest + CategoryInfo : InvalidOperation: (K:\gateway\M:\:String) [Copy-Item], NotSupportedException + FullyQualifiedErrorId : ItemExistsNotSupportedError, Microsoft。 PowerShell.Commands.CopyItemCommand

PS C:> 复制项目

命令管道位置 1 的 cmdlet Copy-Item 提供以下参数的值：路径 [0]：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T05:19:14.423

```
function Copy-Directories 
{
    param (
        [parameter(Mandatory = $true)] [string] $source,
        [parameter(Mandatory = $true)] [string] $destination        
    )

    try
    {
        Get-ChildItem -Path $source -Recurse -Force |
            Where-Object { $_.psIsContainer } |
            ForEach-Object { $_.FullName -replace [regex]::Escape($source), $destination } |
            ForEach-Object { $null = New-Item -ItemType Container -Path $_ }

        Get-ChildItem -Path $source -Recurse -Force |
            Where-Object { -not $_.psIsContainer } |
            Copy-Item -Force -Destination { $_.FullName -replace [regex]::Escape($source), $destination }
    }

    catch
    {
        Write-Host "$_"
    }
}

$source = "M:\"
$dest = "K:\MyBackup"

Copy-Directories $source $dest 
```

# c# - 更改数据表中列的数据类型会更改单元格文本

> ID：11424585
> 
> 赞同：0
> 
> 时间：2012-07-11T02:07:46.453
> 
> 标签：c#, asp.net

好的，我首先导入一个 excel 文件，然后将数据保存到数据表中，然后将其放入 Gridview。我想将列标题名称复制到行单元格中，并给出输入字符串不是正确格式的错误。我尝试更改列数据类型并且它有效。但是复制的数据与原始数据不同。这是我正在使用的代码：

```
DataTable dtf1 = new DataTable();
 OleDbDataAdapter adapter = new OleDbDataAdapter(sql, con);
adapter.FillSchema(dtf1, SchemaType.Source);
            dtf1.Columns[6].DataType = typeof(string);
            adapter.Fill(dtf1);

 dtf1.Rows[0][6] = dtf1.Columns[6].ColumnName.ToString(); 
```

原始数据是邮政编码“3210”，但它正在将其复制为“F7”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T02:55:53.963

我在这里找到了解决方案[OleDB & mixed Excel datatypes : missing data](https://stackoverflow.com/questions/3232281/oledb-mixed-excel-datatypes-missing-data/5721521#5721521)。问题是当 excel 导入数据时它忽略了数字。更改连接字符串解决了这个问题。

```
OleDbConnection con = new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + ServerPath + ";Extended Properties='Excel 8.0;IMEX=1;HDR=NO;TypeGuessRows=0;ImportMixedTypes=Text'"); 
```

以前是

```
OleDbConnection con = new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + ServerPath + ";Extended Properties='Excel 8.0;IMEX=1'"); 
```

# objective-c - NSNotifications 与同一协议的多个实例的委托

> ID：11424587
> 
> 赞同：2
> 
> 时间：2012-07-11T02:07:55.820
> 
> 标签：objective-c, delegates, protocols, nsnotifications, nsnotification

我可以使用一些架构建议。我现在几次遇到以下问题，但我从来没有找到一种真正优雅的方法来解决它。

**这个问题，尽可能在最高级别描述**：
我有一个父类想充当多个孩子的委托（都使用相同的协议），但是当孩子调用父母的方法时，父母不再知道哪个孩子正在打电话。

我想使用松散耦合（委托/协议或通知）而不是直接调用。我不需要多个处理程序，所以通知看起来可能有点矫枉过正。

**为了说明这个问题，让我尝试一个超级简化的例子**：
我从一个父视图控制器（和相应的视图）开始。我创建了三个子视图并将它们中的每一个插入到父视图中。我希望每当用户触摸其中一个孩子时通知父视图控制器。有几个选项可以通知家长：

1.  定义协议。父级实现协议并将自己设置为每个子级的委托。当用户触摸一个子视图时，它的视图控制器调用它的委托（父）。在这种情况下，父级被通知一个视图被触摸，但它不知道是哪一个。还不够好。

2.  与#1 相同，但在协议中定义方法也传递某种标识符。当孩子告诉它的代表它被触摸时，它也会传递一个指向它自己的指针。这样，父母就可以确切地知道触摸了哪个视图。一个对象传递自己的引用似乎真的很奇怪。

3.  使用 NSNotifications。父级为三个子级中的每一个定义一个单独的方法，然后作为通知发送者为三个子级中的每一个订阅“viewWasTouched”通知。孩子们不需要将自己附加到用户字典，但他们确实需要发送带有指向自己的指针作为范围的通知。

4.  与 #4 相同，但不是使用单独的方法，父级可以只使用一个带有 switch case 或其他分支的方法以及通知的发送者来确定采用哪条路径。

5.  创建多个充当子视图代表的中间人类，然后使用指向子视图的指针或其他一些差异化因素调用父视图上的方法。这种方法似乎不可扩展。

这些方法中的任何一种都被认为是最佳实践吗？我不能肯定地说，但感觉就像我错过了一些更明显/优雅的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T03:07:12.457

您的 #2 是代表的标准 Cocoa 模式。委托协议的每条消息都将对象作为第一个参数。例如，在 中`UITableViewDelegate`，您会找到如下方法：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath; 
```

当一个表视图将此消息发送给它的委托时，它会将自己（表视图）作为第一个参数发送。如果委托对象是多个表视图的委托，它可以使用第一个参数来确定是哪个表视图发送了消息。

当没有其他参数时，消息仍将对象作为参数，如在此`UITableViewDataSource`方法中：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView; 
```

您会在 Cocoa Touch 框架中发现这种模式；`UIPickerViewDelegate`, `UIImagePickerControllerDelegate`, 和`UINavigationControllerDelegate`只是几个例子。

您应该遵循标准模式，除非您有令人信服的理由不这样做。遵循约定将使其他人（以及未来的您）更容易理解您的代码。

# node.js - 存储和检索套接字

> ID：11424591
> 
> 赞同：0
> 
> 时间：2012-07-11T02:08:58.987
> 
> 标签：node.js, socket.io

据我所知，一旦我创建了一个套接字，我就可以创建一个数组来存储它

```
userArray[socket.nickname]=socket; 
```

然后我可以向它发送一条消息：

```
 io.sockets.socket(userArray[data.to]).emit('private message', tstamp(), socket.nickname, message); 
```

基本逻辑是将每个套接字的副本存储在由昵称标识的对象中。当我想向该套接字发送消息时，我使用套接字的副本，并通过 io.sockets.socket(id).emit() 发送消息。整个服务器代码如下：

```
io.sockets.on('connection', function (socket) {
  socket.on('user message', function (msg) {
    socket.broadcast.emit('user message', tstamp(), socket.nickname, msg);
    updateLog('user message', socket.nickname, msg);
  });

   socket.on('private message', function(data) {
        socket.get(data.nickname, function (err, name) {    
        console.log('Chat message by ', name);
        });
        updateLog('private message', socket.nickname, data.message);
        message=data.message;
        io.sockets.socket(userArray[data.to]).emit('private message', tstamp(), socket.nickname, message);
   });

  socket.on('get log', function () {
    updateLog(); // Ensure old entries are cleared out before sending it.
    io.sockets.emit('chat log', log);
  });

  socket.on('nickname', function (nick, fn) {
    var i = 1;
    var orignick = nick;
    while (nicknames[nick]) {
      nick = orignick+i;
      i++;
    }
    fn(nick);

    nicknames[nick] = socket.nickname = nick;
    userArray[socket.nickname]=socket;

    socket.set('nickname', nick, function () { socket.emit('ready'); });

    socket.broadcast.emit('announcement', nick + ' connected');
//    io.sockets.socket(userArray[nick]).emit('newID', 'Your name is: ' + nick, '. Your ID is: '+ userArray[nick]);
    io.sockets.emit('nicknames', nicknames);
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T03:10:48.020

目前尚不清楚您的实际问题是什么，但是如果您已将套接字对象存储为对象键的值（这就是您正在做的；这`userArray`是一个很容易引起误解的名称，因为它不是数组），那么您只需调用方法关于价值。IOW，而不是

```
io.sockets.socket(userArray[data.to]).emit(... 
```

你只需写：

```
userArray[data.to].emit(... 
```

# javascript - GET 变量 + Javascript 无修剪 IE

> ID：11424602
> 
> 赞同：0
> 
> 时间：2012-07-11T02:11:20.237
> 
> 标签：javascript, get

我使用下面的代码从 URL 中提取一个 get 变量。它适用于 Chrome 和 FF，但不适用于 IE。

```
www.example.com/index.php?link=123 
```

在 Chrome/FF 中，变量`first`返回`"123"`，但在 IE 中，变量`first`返回`"www.example.com/123"`

关于如何修复代码以便在 IE 中返回的任何想法`"123"`？

```
function getUrlVars() {
  var map = {};
  var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value {
    map[key] = value;
  });
  return map;
}

var first = getUrlVars()["link"]; 
```

# c++ - 使用实现多个接口的 coclass

> ID：11424607
> 
> 赞同：1
> 
> 时间：2012-07-11T02:11:41.903
> 
> 标签：c++, visual-c++, com, c++-cli, command-line-interface

我正在编写一个 C++/CLI 应用程序，它使用提供许多类的 COM dll。它们中的大多数实现了许多接口。我想知道如何访问各个接口的方法。例如，当我查看类型库时，其中一个类被定义为：

```
coclass FWFile {
    [default] interface IFWFile;
    interface _IFWFileInternal;
    [default, source] interface _FWFileEvents;
    interface CStatistics;
    interface IFWFile2;
    interface IFWFile3;
    interface IFWFile4;
}; 
```

当我创建这种类型的对象时，它似乎实现了 IFWFile 接口。但是，我想利用 IFWFile2 中的方法。我可以简单地创建一个 IFWFile2 类型的对象并进行转换吗？

```
IFWFile2 file2 = (IFWFile2)file1; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:18:06.323

使用时，`CoCreateInstance()`您可以指定从新创建的对象中检索哪个接口。如果您需要多个接口 - 在调用时检索一个`CoCreateInstance()`并用于`QueryInterface()`检索其他接口。不要忘记`Release()`调用每个成功的接口检索。

只是不要 C 样式转换 COM 指针 - 不保证接口按照类型库中指定的顺序，*也不*保证实际类实际实现了接口。始终用于`QueryInterface()`从 COM 对象检索接口指针。

# c - 将参数中的函数指针传递给 pthread_create，(C)

> ID：11424614
> 
> 赞同：0
> 
> 时间：2012-07-11T02:12:47.257
> 
> 标签：c, multithreading, gcc, pthreads

这是一个说明我的问题的最小示例

**测试.c：**

```
#include <stdio.h>
#include <pthread.h>

#define CORES 8

pthread_t threads [ CORES ];
int threadRet [ CORES ];

void foo ()
{
   printf ("BlahBlahBlah\n" );
}

void distribute ( void ( *f )() )
{
   int i;

   for ( i = 0; i < CORES; i++ )
   {
      threadRet [ i ] = pthread_create ( &threads [ i ], NULL, f, NULL );
   }
   for ( i = 0; i < CORES; i++ )
   {
      pthread_join ( threads [ i ], NULL );
   }
}

int main ()
{
   distribute ( &foo );
   return 0;
} 
```

**Vim/gcc 输出**：

```
test.c:20|11| warning: passing argument 3 of ‘pthread_create’ from incompatible pointer type [enabled by default]
/usr/include/pthread.h:225|12| note: expected ‘void * (*)(void *)’ but argument is of type ‘void (*)()’ 
```

什么`*`/`&`我需要添加/删除以传递`foo`给`distribute`哪个然后将其传递给线程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T02:17:59.720

```
void *foo (void *x)
{
   printf ("BlahBlahBlah\n" );
}

void distribute ( void * (*f)(void *) ) {
  /* code */
} 
```

应该做的伎俩

因为原型是：

```
extern int pthread_create (pthread_t *__restrict __newthread,
                           __const pthread_attr_t *__restrict __attr,
                           void *(*__start_routine) (void *),
                           void *__restrict __arg) __THROW __nonnull ((1, 3)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T02:15:30.857

建议的最低更改是：

```
void *foo(void *unused)
{
    printf("BlahBlahBlah\n");
    return 0;
}

void distribute(void *(*f)(void *))
{
    ...as before...
} 
```

该[`pthread_create()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/pthread_create.html)函数需要一个指向一个函数的指针，该函数接受一个`void *`参数并返回一个`void *`结果（尽管你还没有遇到那个错误）。因此，通过将其`foo()`转换为一个接受`void *`参数并返回`void *`结果的函数，将指针传递给该类型的函数。而且，就其价值而言，您几乎可以肯定地将`foo()`其制成一个静态函数，因为您不太可能直接从该文件外部调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T02:28:40.197

这个页面似乎解释得很好： http: [//publib.boulder.ibm.com/infocenter/iseries/v5r3/index.jsp](http://publib.boulder.ibm.com/infocenter/iseries/v5r3/index.jsp?topic=%2Fapis%2Fusers_14.htm) ?topic=%2Fapis%2Fusers_14.htm ；

IBM 文档通常非常好，当它们出现时请留意那些 ibm 链接；)。

因此，显然您需要一个函数指针，其参数中包含一个 void 指针。尝试

```
void distribute ( void *( *f )(void *) ) {...} 
```

不过，您可能还需要更改 foo 的定义。有关函数指针，请参阅以下教程：[http](http://www.cprogramming.com/tutorial/function-pointers.html) ://www.cprogramming.com/tutorial/function-pointers.html 。注意：我自己没有测试过，所以不能保证它是否会起作用——但我希望它至少可以为你指明正确的方向；）。

# bash - 使用 grep, ls 在 bash 中获取文件

> ID：11424615
> 
> 赞同：1
> 
> 时间：2012-07-11T02:13:10.767
> 
> 标签：bash, unix, grep

我正在尝试编写一个 bash 脚本来定位当前目录中的单个文件。该文件将在稍后使用，但我不需要帮助。我尝试使用 ls 和 grep 但它不起作用，我是使用 bash 的新手。

```
#!/bin/sh
#Here I need smt like
#trFile = ls | grep myString (but I get file not found error)
echo $trFile 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T02:21:50.997

使用 shell 通配符，如

```
ls *${pattern}* 
```

并且，要将结果存储在变量中，请将其放入`$()`结构中（如果您喜欢使用不能很好嵌套的弃用功能，也可以使用弃用的反引号）

```
var=$( ls *${pattern}* ) 
```

或者，把你的 ls | grep 在那里（但这是不好的做法，恕我直言）：

```
var=$( ls | grep -- "$pattern" ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T02:21:53.690

我相信你正在寻找这样的东西：

```
 #!/bin/sh
    trFile=`ls | grep "$myString"` 
```

为了运行命令并重定向/存储其输出，您需要将命令放在反引号之间。将存储输出、等号和反引号的变量需要放在一起，如我的示例所示。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T02:22:03.520

```
#!/bin/sh
#
trfile=$( ls | grep myString )
echo $trfile 
```

$( xxx ) 导致其中的命令被执行并返回输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T02:22:42.563

试试这个，如果我猜你想要做的是，通过`grep`ping 的输出获取文件名的捕获`ls`到 shell 变量中，试试这个：

```
#!/bin/sh

trFile=`ls | grep "name_of_file"`
echo $trFile 
```

注意命令周围的反引号运算符的用法，无论输出是什么，在这种情况下，都会被捕获。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-07T18:08:15.137

当您最不期望时，使用 ls 的输出会咬人。更好地使用 Globbing。 [http://tldp.org/LDP/abs/html/globbingref.html](http://tldp.org/LDP/abs/html/globbingref.html)

# mercurial - Mercurial 和网站：何时分支，何时克隆？

> ID：11424681
> 
> 赞同：0
> 
> 时间：2012-07-11T02:22:34.470
> 
> 标签：mercurial, tortoisehg

我们最近决定开始使用 SCM 软件（是的，我们可能很久以前就应该使用）并且我们决定尝试 Mercurial。据我所知，它在 Windows 上的播放效果应该比 Git 好。我们还计划使用 TortoiseHG 代替命令行，因为这是我们更习惯的方式。我的学习还很早，我有一个问题，我一直在寻找相互矛盾的答案。

我们有一个 apache 服务的 PHP 站点。我们计划将每个开发人员的工作副本放在不同的端口上，直到将来我们可以正确虚拟化服务器（每个开发人员一个）。在我们继续新开发的同时，我们希望为“稳定”构建保留一个分支/标签/东西。当然，只要有错误修复，我们希望立即推送，但我们也希望将其合并到 dev 分支中。

我从一些人那里听说我们应该克隆 repo，在克隆中进行更改，然后在完成后将其合并回来。

我还听说我们应该只使用分支，并在完成后将分支合并回来。

在存储库的情况下，你对 apache 做了什么？每次添加新功能时都必须重新配置它以指向不同的目录会很痛苦......

感谢你们可以照亮这一切。感谢您的帮助！

我们该怎么做呢？

[编辑] 另外，关于 HG，什么是“搁置”和“补丁”？双重感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T02:48:32.653

在[分布式版本控制系统](http://en.wikipedia.org/wiki/Distributed_revision_control)中，没有中央服务器，每个“克隆”都有整个存储库的副本。在本地 repo 中进行更改，然后将更改集推送到其他更改集（或从它们中提取）。因此，实际上每个克隆都是一个分支，每个“提交”都是一个合并。

我将在下面提出一个工作流程示例。有关我所写内容的更深入解释，请参阅[这篇文章](http://thedailywtf.com/Articles/Source-Control-Done-Right.aspx)（*编辑：*实际上我的意思是[这篇](http://thedailywtf.com/Articles/Release-Management-Done-Right.aspx)文章，关于发布管理，但另一篇也很有用......）和[这个简短的 Mercurial 概述](http://mercurial.selenic.com/wiki/UnderstandingMercurial)。

假设您有一个“主”存储库，它将包含来自所有开发人员的所有最新信息。您可以克隆它（一次）并创建一个“生产”存储库。之后，将其更新到最新的稳定版本（应该使用标签进行标记）。

您还可以为每个开发人员再次克隆它（重申：您只克隆一次），并让它们彼此独立工作。他们可以随意提交（因为提交只影响本地存储库）并且理想情况下应该只在它们稳定时将变更集推送到“主”。他们还可以从其他开发人员那里提取变更集，但是否立即执行合并取决于他们。当“主要”有稳定版本时，应该这样标记，“生产”可以拉取并更新到该版本。

如果在生产版本中发现错误，任何开发人员都可以： a) 提交（或搁置）他们当前的工作目录；b) 将他们的工作目录更新为正在运行的相同修订版“生产”；c) 修复错误，提交并推送更改；d) 再次更新到他离开的地方并继续正常工作。新的变更集将可用于“生产”以提取和更新，也可供每个开发人员将其合并到他们当前的修订版中。

至于每个工作副本的特定内容（端口号、数据库实例等），您应该将它们存储在单独的配置文件中，并让我的 Mercurial.xml 忽略该文件。这样，即使在更改版本时，这些值对于每个开发人员和生产实例都将保持不变。

# iphone - 在 iphone 设备上测试应用程序项目

> ID：11424687
> 
> 赞同：0
> 
> 时间：2012-07-11T02:23:31.220
> 
> 标签：iphone, objective-c, ios, xcode

我想知道是否可以在不提交应用程序的情况下在苹果设备上测试您的应用程序项目。比如用 USB 线插入你的 iPhone 并在那里运行测试应用程序。

我想尝试测试`UIImagePicker`摄像头功能，但我读到它需要一个有摄像头的设备，并且模拟器无法工作。

我尝试了谷歌的替代方法，但我似乎找不到任何解决方案。任何人都可以指导我如何使用这种方法的正确方向吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T02:27:16.150

当然，在将您的应用程序提交到应用商店之前，您可以而且事实上必须在实际的 iOS 设备上进行测试。在开发过程中可能会出现一些您在模拟器中看不到的问题（尽管现在要少得多）。有时您还会发现只出现在一种设备 (3GS) 而不是另一种 (4S) 上的错误

您需要将设备配置为开发模式。这需要每年向苹果支付 99 美元的 iOS 开发者计划费用。在开发人员站点中有大量​​关于如何执行此操作的文档：

[https://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/YourFirstAppStoreSubmission/TestYourApponManyDevicesandiOSVersions/TestYourApponManyDevicesandiOSVersions.html](https://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/YourFirstAppStoreSubmission/TestYourApponManyDevicesandiOSVersions/TestYourApponManyDevicesandiOSVersions.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T02:27:02.770

如果您购买了应用程序开发人员许可证，则可以这样做。然后，您可以构建尽可能多的应用程序并将其推送到您的设备。个人许可证的费用为每年 99 美元

# virtualbox - Vagrant 命令究竟做了什么？

> ID：11424690
> 
> 赞同：96
> 
> 时间：2012-07-11T02:24:16.080
> 
> 标签：virtualbox, vagrant

令人惊讶的是，除了“入门”教程中的参考资料外，没有关于 Vagrant 命令做什么的文档。

到目前为止我已经解决的问题：

*   `box`- 管理“[盒子](http://vagrantup.com/v1/docs/getting-started/boxes.html)”
*   `destroy`- 关闭虚拟机然后删除其存储的映像？
*   `gem`
*   `halt`- 关闭虚拟机
*   `init`- 准备一个包含新 Vagrantfile 的目录
*   `package`- 关闭虚拟机，然后将其转换为可以变成盒子的“包”？（或者其他的东西）
*   `provision`- 只运行配置（例如，Chef、Puppet...）阶段
*   `reload`- 修改 VM 配置（例如，重新应用 Vagrantfile），重新启动 VM，重新配置
*   `resume`- 取消挂起（即取消休眠）
*   `ssh`- 打开与 VM 的 SSH shell 连接
*   `ssh-config`
*   `status`
*   `suspend`- 休眠虚拟机
*   `up`- 部分或全部：复制 VM 映像以创建新 VM，对其应用配置，启动它

我有这些权利吗？其他是什么？我仍然有点不清楚`reload`and `destroy`/之间的确切区别`up`。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-07-11T21:23:22.333

我同意你的观点，[vagrantup](http://vagrantup.com/v1/docs/index.html)的文档较短。

一些信息可以从命令帮助系统中收集到。

1.  例如：`gem`命令。

    只需键入不带参数的命令：`vagrant gem -h`它就会生成您可能需要的信息。

    > `vagrant gem`用于通过 RubyGems 系统安装 Vagrant 插件。实际上，`vagrant gem`它只是实际`gem` 界面的前端，不同之处在于 Vagrant 设置了一个自定义目录，其中安装了 gem，以便它们与系统 gem 隔离。

2.  `Vagrant ssh-config`：

    在幕后，当您执行`vagrant ssh`ssh 进入 VM 时。它正在使用它众所周知的 ssh 密钥。此密钥的信息由 提供`vagrant ssh-config`。如果您想将众所周知的密钥更改为您自己的私钥并准备使用它的盒子，这很有用。

    有时，您可能希望对 VM 使用基于 ssh 的自动化。在这种情况下，知道正在使用哪个密钥很有用。您可以使用普通的 ssh 命令 -`ssh -i keyfile ..`

3.  `vagrant status <vmname>`

    此命令是一个包装器，它提供有关 vm 状态的信息。它可能正在运行、保存和关闭。

4.  `vagrant reload`

    如果您对需要生效的 vagrantfile 中的配置进行任何更改。您可能需要重新加载虚拟机。它会重新运行 vagrantfile 中定义的配置，除非您也不要问它。

    它不会破坏您从基础盒创建的虚拟机。这意味着您对 VM 所做的所有更改，例如在您的用户目录中创建的文件夹，在重新加载后都将存在。

    这就像重新启动，它会关闭您的虚拟机，然后应用某些配置更改，这些更改只能在虚拟机关闭时应用。然后开机。示例：例如附加另一个 SATA 虚拟磁盘。

5.  `vagrant up`

    这会读取您的配置文件 -`vagrantfile`然后从基本框创建一个 VM。Base Box 就像一个模板。您可以从中创建许多虚拟机。

    同样，`vagrant destroy`破坏您的虚拟机。在这种情况下，您在其中所做的所有更改都将丢失。但这是一个很酷的想法，您可以在创建新 VM 时从基本的预定义状态开始。

我真的很喜欢使用它并在[博客上写过它](http://pyfunc.blogspot.com/2011/11/using-vagrant.html)。

**总之，它是 VirtualBox APIs 和 Commands 的一个很好的包装器**。您可以查看[VirtualBox 命令](http://www.virtualbox.org/manual/ch08.html)以更好地了解一些功能。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2014-08-14T14:58:20.373

我不确定它何时更改，但当前版本（1.6.3）有一个正确的命令列表，并且运行`vagrant list-commands`提供了一个更完整的列表：

```
box             manages boxes: installation, removal, etc.
connect         connect to a remotely shared Vagrant environment
destroy         stops and deletes all traces of the vagrant machine
docker-logs     outputs the logs from the Docker container
docker-run      run a one-off command in the context of a container
global-status   outputs status Vagrant environments for this user
halt            stops the vagrant machine
help            shows the help for a subcommand
init            initializes a new Vagrant environment by creating a Vagrantfile
list-commands   outputs all available Vagrant subcommands, even non-primary ones
login           log in to Vagrant Cloud
package         packages a running vagrant environment into a box
plugin          manages plugins: install, uninstall, update, etc.
provision       provisions the vagrant machine
rdp             connects to machine via RDP
reload          restarts vagrant machine, loads new Vagrantfile configuration
resume          resume a suspended vagrant machine
rsync           syncs rsync synced folders to remote machine
rsync-auto      syncs rsync synced folders automatically when files change
share           share your Vagrant environment with anyone in the world
ssh             connects to machine via SSH
ssh-config      outputs OpenSSH valid configuration to connect to the machine
status          outputs status of the vagrant machine
suspend         suspends the machine
up              starts and provisions the vagrant environment
version         prints current and latest Vagrant version 
```

单独运行时，完整列表中唯一遗漏的命令`vagrant`是 docker 和 rsync 。无论如何，在我的系统上。

现在，这似乎是确定的答案。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-08-23T16:16:29.067

实在太糟糕了，即使 v1.1 的当前文档看起来更好，但它远不如 v1 完整。“少即是多”的信条在文档领域不起作用......

我发现当谈到 Vagrantfiles 时，最完整的概述是在初始化 vagrant 项目后新创建的 Vagrantfile 的注释中。它提到了当前不在文档中的参数。

# c# - 那么... ASP.NET MVC 和 WebSockets？

> ID：11424694
> 
> 赞同：11
> 
> 时间：2012-07-11T02:24:53.517
> 
> 标签：c#, asp.net-mvc-3, iis, websocket, comet

我在 MVC 3 中有一个应用程序，我希望将 WebSockets（回退到 Comet）添加到它。

我进行了一些研究，发现彗星部分非常简单，我宁愿自己做。只需要 AsyncControllers 和一些非常简单的 js 就可以处理那些长期存在的 ajax 请求。

现在，在 WebSocket 的情况下，事情开始变得肮脏。我查看了一些库，但它们似乎大多设置了自己的 Web 服务器（因此需要另一个主机或端口），并在那里监听 ws 协议请求。例如[SuperWebSocket](http://superwebsocket.codeplex.com/)就是这种情况，起初它看起来不错，但出现了“我是 Web 服务器”的问题（这当然很好，但我宁愿避免）。

然后我查看了“PingIt”或类似的东西，我现在找不到链接..，但我确实在另一台计算机上有源代码。这个确实在 mvc 的端点上运行，但我不太喜欢它处理事情的方式，比如它需要一个 IDisposable 对象并通过反射器创建一个在客户端呈现的 JavaScript 片段，这是非常污染的他们图书馆的名字，我真的不感兴趣，而且感觉很多东西都被扔进了我可能希望的地方，这违背了我对页面应该如何呈现的看法（特别是现在我正在研究 MVC，这几乎意味着我可以编写干净、不显眼的 html 页面）。

基本上我想要的是我的端点是这样的：

> domain.com/rt/comet
> domain.com/rt/socket

而不是

> domain.com/rt/comet
> domain.com:81/

那么：是否可以在 asp.net MVC 应用程序的控制器内的端点上接收 websocket 连接（并进行握手和任何需要做的事情），而不是在某处设置 tcplistener？

这也将帮助我让我的彗星代码更接近我的 websocket 代码

我应该说我对整个 comet/websockets 的事情非常陌生，所以我对协议的了解并不多（或任何），我确实了解如何使彗星工作，但在 websockets 中并不了解，尽管我'已经阅读并理解了基本知识以了解其要点。

另外：请让我知道我的要求是否离题

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-11T05:32:48.737

只是同意评论并提供一些链接。SignalR 是要走的路。

网站：[http](http://signalr.net/) ://signalr.net/和[http://www.asp.net/signalr](http://www.asp.net/signalr)

代码：[https ://github.com/SignalR/SignalR](https://github.com/SignalR/SignalR)

努盖特：`Install-Package Microsoft.AspNet.SignalR -pre`

好的起点：

*   免费电子书[http://www.eduardopires.net.br/Repositorio/SignalR_eBook.pdf](http://www.eduardopires.net.br/Repositorio/SignalR_eBook.pdf)

*   [http://weblogs.asp.net/davidfowler/archive/2012/11/11/microsoft-asp-net-signalr.aspx](http://weblogs.asp.net/davidfowler/archive/2012/11/11/microsoft-asp-net-signalr.aspx)

*   [http://www.dotnetcurry.com/ShowArticle.aspx?ID=780](http://www.dotnetcurry.com/ShowArticle.aspx?ID=780)

*   [http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx](http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx)

来自其中一位创作者的视频：http: [//vimeo.com/43659069](http://vimeo.com/43659069) **<--[大量信息！]**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T22:22:41.513

作为 WebSockets 上此线程的参考点 - 我希望您注意，乍一看，WebSockets 看起来是显而易见的选择。该 API 旨在通过单个 TCP 套接字在浏览器和服务器之间提供双向通信通道。它已被 IETF 标准化，最新的 Chrome、Firefox、IE 和 Opera 浏览器都支持 WebSockets。它旨在通过减少 HTTP 消息开销来最小化带宽开销。那么，有什么不喜欢的呢？

就像任何感知到的灵丹妙药一样，事情并不总是它们看起来的那样。存在很多问题：

**浏览器支持：**截至 2012 年 6 月，目前使用的浏览器中只有 47.64% 实际支持 WebSockets [http://caniuse.com/websockets](http://caniuse.com/websockets) - 这意味着，无论 WebSockets 看起来多么好，您仍然需要第二个“后备”解决方案来支持广大网民。而且由于大多数“后备”解决方案都涉及 Flash，因此您在 iOS 和其他移动设备上仍然不走运。

从这篇博客文章中了解更多关于现实中的 WebSockets：[HTML5 WebSockets 网关和服务器是实时数据推送的灵丹妙药吗](http://blog.pubnub.com/are-html5-websockets-the-panacea-for-real-time-data-push/)

**浏览器支持更新：**截至 2019 年 5 月，目前使用的浏览器中有**96.77%**实际支持 WebSockets [http://caniuse.com/websockets](http://caniuse.com/websockets)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T14:27:33.770

> 我进行了一些研究，发现彗星部分非常简单，我宁愿自己做。只需要 AsyncControllers 和一些非常简单的 js 就可以处理那些长期存在的 ajax 请求。

抱歉，没那么容易。不同的浏览器以不同的方式运行，并使用不同的技术表现更好 - XMLHttpRequest、XDomainRequest、ActiveX 对象、Multpart 替换、Long-Polling、Streaming。正因为如此，而且这些解决方案没有明确的规范，[Comet 只是一个 hack](http://www.leggetter.co.uk/2012/04/22/websockets-realise-comet-theyre-not-an-alternative.html#comment-518850026)。服务器发送事件 (EventSource API) 和 WebSockets 的设计初衷是提供从服务器向客户端推送数据的最有效和标准化的方式，更重要的是，WebSockets 被设计用于客户端之间的实时双向通信和一个服务器。

> 现在，在 WebSocket 的情况下，事情开始变得肮脏。我查看了一些库，但它们似乎大多设置了自己的 Web 服务器（因此需要另一个主机或端口），并在那里监听 ws 协议请求。例如 SuperWebSocket 就是这种情况，起初它看起来不错，但出现了“我是 Web 服务器”的问题（这当然很好，但我宁愿避免）。

Windows Server 8 将原生支持 WebSockets。在此之前，您需要使用单独的“Web 服务器”，例如[XSockets](http://xsockets.net)或 SuperWebSockets（您已经引用过）。还有[Alchemy WebSockets](http://alchemywebsockets.net/)和[Fleck](https://github.com/statianzo/Fleck)。

但是因为微软正在推动[SignalR](https://github.com/SignalR/SignalR/)向前发展，它最有可能获得充分的牵引力，甚至成为标准 ASP.NET MVC 堆栈的一部分（它可能已经计划好了，我在 MS 方面有点落后了）。SignalR 具有 WebSocket 支持（或具有模块），并将处理支持用户浏览器的传输机制的回退。

有关自托管解决方案（还有更多 .NET/IIS 选项）的更多信息，请查看这些[自托管实时服务](http://www.leggetter.co.uk/real-time-web-technologies-guide#self-hosted)。

我非常有兴趣了解 IIS 在处理数千个持久连接时如何扩展 - 它是否已针对 Windows Server 8 重新编写？多久之后您需要引入负载均衡器并进行水平扩展？如果这不是您有兴趣担心的事情，那么我会考虑[托管实时服务](http://www.leggetter.co.uk/real-time-web-technologies-guide#hosted-services)。

# delphi - 将 Delphi BDE Paradox *.db 查询结果导出到文本文件？

> ID：11424697
> 
> 赞同：0
> 
> 时间：2012-07-11T02:25:25.190
> 
> 标签：delphi, export, text-files, bde

如何将 Delphi BDE Paradox *.db 查询结果导出到文本文件？例如，我在 Borland Delphi 中使用 SQL Explorer 或 Database Dekstop，查询如下：SELECT * FROM mst_employee;

我希望文本文件中的查询结果说 mst_employee.txt 类似：

```
employee_code;name;status;
001;Andi;1;
002;Budi;2;
003;Carli;3; 
```

之前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T03:14:41.737

我将遍历查询返回的结果集并将结果写入文本文件，用分号分隔每个文件。我不知道有任何内置功能可以做到这一点。

```
with query do
 begin
  params[0].asinteger:= <whatever>;
  open;
  if not isempty then
   begin
    assignfile (f, 'c:\data.txt');
    rewrite (f);
    while not eof do
     begin
      writeln (f, fieldbyname ('a').asstring, ';', fieldbyname ('b').asstring, ';');
      next
     end;
    closefile (f);
   end;
  close
 end; 
```

为老式的 Pascal I/O 道歉，但如果我们仍在使用 BDE ......

# android - 如何从eclipse分发android

> ID：11424698
> 
> 赞同：-1
> 
> 时间：2012-07-11T02:25:27.010
> 
> 标签：android

我一直是android的新手。我开发了一个带有一些教程的应用程序，如果在 DVM 中运行良好。我想在我的手机和我朋友的手机里得到这个。我怎样才能在我的手机里得到它。

从 Eclipse 分发哪个文件。

预先感谢所有考虑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T02:32:54.873

如果分发的目的仅用于测试，您可以从项目的 bin 文件夹中复制 *.apk。

不过要小心，应用程序是使用您的调试密钥签名的，如果该密钥发生更改，您将无法重新安装应用程序，除非先删除当前的应用程序（连同它的数据）。

您可以备份您的调试密钥，或者生成一个正确的密钥来签署您的 apk（并备份那个）。我不记得有关此的具体文档，但我认为它在此页面的某个位置：http: [//developer.android.com/distribute/index.html](http://developer.android.com/distribute/index.html)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T02:29:59.250

您需要安装[`Google USB Driver`](http://developer.android.com/sdk/win-usb.html). 这是官方的[HOW-TO](http://developer.android.com/tools/extras/oem-usb.html#InstallingDriver)。

那是为了直接从 eclipse 运行你的应用程序。如果您只想永久安装该应用程序。安装程序文件位于`bin`项目文件夹中的文件夹中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T02:29:37.590

为了分发您的应用程序，您需要将其编译为 apk。

[http://developer.android.com/tools/publishing/publishing_overview.html](http://developer.android.com/tools/publishing/publishing_overview.html)

# performance - SSAS - MDX 查询性能问题

> ID：11424707
> 
> 赞同：2
> 
> 时间：2012-07-11T02:26:28.950
> 
> 标签：performance, sql-server-2008, ssas, mdx

我有一个引用 SQL Server Analysis Services 2008 R2 企业版多维数据集的 MDX 查询，从功能的角度来看，该多维数据集准确而正确地返回了所需的数据。但是，执行此查询需要 5-10 分钟，这对于我们的最终用户在 SSRS 报告中执行此查询是无法接受的。

查询如下：

```
With Member [Measures].[CurrentPaidAmount] as 
Sum ( 
     Tail(nonempty(descendants([Valuation Date].[DateHierachy].currentmember,4),[Measures].[SaleCount]),1),
[Measures].[CurrentTotalPaidAmt] 
    ) 
Member [Measures].[PreviousPeriodPaidAmount] as 
Sum ( 
     Tail(descendants([Valuation Date].[DateHierachy].currentmember.prevmember,4),1), 
     [Measures].[CurrentTotalPaidAmt] 
     ) 
Member [Measures].[YTDCurrentPaidAmount] as 
([Measures].[CurrentPaidAmount] - [Measures].[PreviousPeriodPaidAmount]) 
select non empty 
    ( {[Valuation Date].[DateHierachy].[Year]}, {[Valuation Date].[Year].children}, 
      {[Valuation Date].[Month].[All]}, {[DimLocation].[State].[All]}, 
      {[DimSeller].[Store].children}, {[DimProduct].[ProductCode].children}, 
      {[DimProgram].[ProgramLine].children ) on rows, 
 [Measures].[YTDCurrentPaidAmount] on columns 
from 
    [CB_Sales] 
```

该基础事实表以累积方式存储 [total paid amount] 度量，即在该月的最后一天，计算自开始时为特定产品支付的总美元。这意味着在每个月的月底，当月的总支付美元被添加到上个月的金额中，以便及时创建自相关产品的所有支付美元的总和。

我的要求是仅计算每一年为每种产品支付的总金额。

考虑以下示例数据集，其中列出了特定产品的当月至今支付的总金额：

* * *

12/2010 产品 A：25.00 美元

11/2011 - 产品 A：50.00 美元

12/2011 - 产品 A：100.00 美元

1/2012 - 产品 A：150.00 美元

2/2012 - 产品 A：160.00 美元

2012 年 3 月 - 产品 A：200.00 美元

* * *

如果我想获得仅在 2011 日历年为上述产品 A 支付的总美元，我将获得截至 2010 年 12 月为产品 A 支付的总日历（即 25.00 美元）并从总金额中减去该金额截至 2011 年 12 月支付的美元（即 100.00 美元）。

减去 2 个值会产生 75.00 美元的差值：

($100.00 - $25.00) = $75.00

这表明仅在 2011 日历年就为产品 A 支付了 75.00 美元。

话虽如此，回到上面的 MDX 查询，我创建了 2 个计算成员来执行此计算。

会员 (1):

[措施].[CurrentPaidAmount]

此计算的成员根据 [Valuation Date].[DateHierachy].[Year] 属性的当前成员获取为当前日历年记录的最后一个非空总美元支付金额。由于对于当前 2012 日历年，记录总美元的最后一个月是 2012 年 6 月，因此计算出的成员需要足够聪明，以识别日期层次结构中的 [June] 2012 月份成员是支付总额的特定月份美元应该从中取出。

我返回相关日期维度的 [Year] 属性很重要，因为他们希望此成员显示在表格报告中。

因此，我在计算的度量中包含了以下集合，它将根据结果集中返回给客户端的内容获取当前年份值，并向下导航日期层次结构，直到我得到相关日历年内的最后一天具有如下所示的有效总支付金额：

```
Tail(nonempty(descendants([Valuation Date].[DateHierachy].currentmember,4),[Measures].[SaleCount]),1), 
```

我的理由是，如果用户选择连接报告中的所有年份，那么对于每一年，该特定计算成员将获得相关日历年的最后一个非空总美元支付金额，并允许我从上一年中减去该金额以获得仅在有关日历年内发生的已支付美元总额。

现在，我上面列出的完整 MDX 查询在执行时确实返回了正确的数据。执行需要很长时间，但执行时间超过 5-10 分钟。基础事实表包含 6400 万条记录。

奇怪的是，如果我像这样从第一个计算成员中的集合中删除 nonempty() 子句，则修改后的查询只需 30 秒即可执行：

```
With Member [Measures].[CurrentPaidAmount] as 
Sum (
      Tail(descendants([Valuation Date].[DateHierachy].currentmember,4),1), [Measures].[CurrentTotalPaidAmt] 
    ) 
```

我只能假设 nonempty() 子句阻碍了查询的性能，因为计算成员需要评估日期成员与 [Measures].[SaleCount] 度量的每个交集。

有什么方法可以重写上面的查询以在 30 秒内而不是几分钟内更好、更快、更有效地执行？

我将默认聚合应用于多维数据集，并将其划分为多个多维数据集分区。

我是 MDX 的新手，非常感谢您的建议。

感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:42:34.550

我是 MDX 的绝对新手，但在尝试解决我自己在删除 NON EMPTY 子句时的性能问题时遇到了一个潜在的解决方案。您可以尝试在计算成员的基本信息窗格中设置非空行为？问候

卡尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:44:54.163

如果你混入 EXISTING，你有时会得到对抗 NONEMPTY 的提升：

[http://cwebbbi.wordpress.com/2009/03/31/existing-and-nonempty/](http://cwebbbi.wordpress.com/2009/03/31/existing-and-nonempty/)

他在那里改变

```
COUNT(NONEMPTY(
NONEMPTY(
EXISTING [Customer].[Customer].[Customer].MEMBERS
, [Measures].[Internet Sales Amount])
, ([Measures].[Internet Sales Amount], [Date].[Calendar].CURRENTMEMBER.PREVMEMBER))
) 
```

至

```
COUNT(EXISTING  
NONEMPTY(
NONEMPTY(
[Customer].[Customer].[Customer].MEMBERS
, [Measures].[Internet Sales Amount])
, ([Measures].[Internet Sales Amount], [Date].[Calendar].CURRENTMEMBER.PREVMEMBER))
) 
```

速度提高八倍。

您在日期维度上遇到这种情况似乎很奇怪 - 至少与其他维度（例如客户或产品）相比，通常没有很多日期。您的日期维度有多长，您是否不必要地进入未来或过去？

您可以查看基于使用情况的优化，设置 SSAS 服务器属性，将 MDX 调用记录到您指定的数据库，然后运行向导以基于此创建一组聚合。然后，您将聚合分配给分区，如果我没记错的话，“进程索引”...

[http://www.sqlservercentral.com/articles/Analysis+Services+(SSAS)/usagebasedoptimizationinssas2005/2419/](http://www.sqlservercentral.com/articles/Analysis+Services+(SSAS)/usagebasedoptimizationinssas2005/2419/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T06:33:15.297

如果您的事实表可以存储**非累积**支付金额，您将直接拥有`[Measures].[YTDCurrentPaidAmount]`，并且将避免计算`[Measures].[CurrentPaidAmount]`and `[Measures].[PreviousPeriodPaidAmount]`。

# python - 将 16 位值拆分为 12+4 python 结构

> ID：11424708
> 
> 赞同：1
> 
> 时间：2012-07-11T02:26:43.177
> 
> 标签：python, struct, bits

这个问题与这篇文章有关： [int to binary python](https://stackoverflow.com/questions/11421735/int-to-binary-python)

我有这个需要增加的序列号，现在它已经修复并且工作正常。但是，我刚刚发现实际上序列号不仅仅是一个简短的，考虑这个方案：

```
 12 bits           4 bits
 Sequence number   Fragment number 
```

所以如果我发送一个值为 258 (\x02\x01) 的序列号，它实际上是；

```
Fragment number :2
Sequence number :16 
```

我想知道如何将 258 作为实际的序列号，而不是这样拆分。有没有简单的方法来实现这一点`struct`？

更新：

我在上述问题中的意思是：

我正在构建一个像这样的网络数据包生成器：

```
class PacketHeader(Packet):
fields = OrderedDict([
    ("head", "\x00"),
    ("headpad", "\x00"),
    ("headlen", "\x1a\x00" ),
    ("presentflag", "\x2e"),
    ("timestamp", "\x43\x10\x58\x16\xa1\x01\x00\x00"),
    ("flag", "\x03"),
    ("Sequencenum", "\x04\x00"), 
###12 bits of this 'short' is Seq num, 4 bits left are if this is a fragment or not(if it is, its value will be =>1, and will then represent the frag number.)

]) 
```

后来，我打电话给我的班级并像这样发送数据包：

```
send(PacketHeader(Sequencenum=257))
send(PacketHeader(Sequencenum=258))
send(PacketHeader(Sequencenum=259)) 
```

我需要将序列号转换为一个短序列号（在这种情况下假设为 257），并处理代表该 16 位短序列号的 4 位。我希望始终将片段编号设置为 0，但将 Sequencenum 正确递增。

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T03:31:44.830

沿线的东西：

```
number_to_send = (sequence_number << 4) + fragment_number
bytes_to_send = struct.pack("!H", number_to_send) 
```

然后回来：

```
sequence_number = struct.unpack("!H", bytes_to_send)[0] >> 4 
```

# c# - 发送电子邮件而不在“已发送”文件夹中留下副本

> ID：11424710
> 
> 赞同：2
> 
> 时间：2012-07-11T02:26:49.213
> 
> 标签：c#, email, smtp, gmail, smtpclient

当管理员在系统中创建凭据时，我正在使用 SmtpClient 向新用户发送凭据。每次用户本身（不是管理员）更新他的帐户时，我都会发送一封有关新凭据的电子邮件，以防用户更改用户名或密码。

所以我想要的不是将已发送电子邮件的副本保存在已发送文件夹中。

我正在使用 C# 并开发 WPF 应用程序。

那么是否可以在不留下副本的情况下发送电子邮件？

我只是想避免在已发送文件夹中留下副本，因为所有用户的凭据都将在已发送电子邮件中。

提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T05:53:22.357

[在Gmail 论坛](http://productforums.google.com/forum/#!topic/gmail/WxUrcRlGuxw)上找到

> 在 Gmail 中没有不保存已发送邮件的选项，但您可以创建一个过滤器来删除所有已发送邮件。在 From 字段中创建一个带有“me”的过滤器，并将其设置为删除。消息将立即放入垃圾箱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T02:37:34.923

在 Outlook 中签出此选项：http: [//office.microsoft.com/en-us/outlook-help/change-where-sent-e-mail-messages-are-saved-HA010164216.aspx](http://office.microsoft.com/en-us/outlook-help/change-where-sent-e-mail-messages-are-saved-HA010164216.aspx)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-11T02:35:54.980

如果您想将已发送的邮件放在“已发送邮件”文件夹中，您需要从 Outlook（或其他邮件客户端）发送邮件。此文件夹是 Outlook（和许多其他邮件客户端）概念，而不是 SMTP 概念。

# c# - 无法在代码隐藏中访问 asp.net changepassword 控件

> ID：11424716
> 
> 赞同：2
> 
> 时间：2012-07-11T02:27:18.137
> 
> 标签：c#, asp.net, asp.net-controls, change-password

我无法访问代码隐藏中的任何 asp 控件。.aspx页面如下

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true" CodeFile="ChangePassword.aspx.cs" Inherits="ChangePassword" ValidateRequest="false"  %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
<asp:ChangePassword ID="ChangePassword1" runat="server" CssClass="MinutesList" 
    onchangedpassword="ChangePassword1_ChangedPassword">
    <ChangePasswordTemplate>
        <table cellpadding="1" cellspacing="0" style="border-collapse:collapse;">
            <tr>
                <td>
                    <table cellpadding="0">
                        <tr>
                            <td align="center" colspan="2">
                                Change Your Password</td>
                        </tr>
                        <tr>
                            <td align="right">
                                <asp:Label ID="CurrentPasswordLabel" runat="server" 
                                    AssociatedControlID="CurrentPassword">Password:</asp:Label>
                            </td>
                            <td>
                                <asp:TextBox ID="CurrentPassword" runat="server" TextMode="Password" Visible="false" >></asp:TextBox>
                                <asp:RequiredFieldValidator ID="CurrentPasswordRequired" runat="server" 
                                    ControlToValidate="CurrentPassword" ErrorMessage="Password is required." 
                                    ToolTip="Password is required." ValidationGroup="ChangePassword1">*</asp:RequiredFieldValidator>
                            </td>
                        </tr>
                        <tr>
                            <td align="right">
                                <asp:Label ID="NewPasswordLabel" runat="server" 
                                    AssociatedControlID="NewPassword">New Password:</asp:Label>
                            </td>
                            <td>
                                <asp:TextBox ID="NewPassword" runat="server" TextMode="Password"></asp:TextBox>
                                <asp:RequiredFieldValidator ID="NewPasswordRequired" runat="server" 
                                    ControlToValidate="NewPassword" ErrorMessage="New Password is required." 
                                    ToolTip="New Password is required." ValidationGroup="ChangePassword1">*</asp:RequiredFieldValidator>
                            </td>
                        </tr>
                        <tr>
                            <td align="right">
                                <asp:Label ID="ConfirmNewPasswordLabel" runat="server" 
                                    AssociatedControlID="ConfirmNewPassword">Confirm New Password:</asp:Label>
                            </td>
                            <td>
                                <asp:TextBox ID="ConfirmNewPassword" runat="server" TextMode="Password"></asp:TextBox>
                                <asp:RequiredFieldValidator ID="ConfirmNewPasswordRequired" runat="server" 
                                    ControlToValidate="ConfirmNewPassword" 
                                    ErrorMessage="Confirm New Password is required." 
                                    ToolTip="Confirm New Password is required." ValidationGroup="ChangePassword1">*</asp:RequiredFieldValidator>
                            </td>
                        </tr>
                        <tr>
                            <td align="center" colspan="2">
                                <asp:CompareValidator ID="NewPasswordCompare" runat="server" 
                                    ControlToCompare="NewPassword" ControlToValidate="ConfirmNewPassword" 
                                    Display="Dynamic" 
                                    ErrorMessage="The Confirm New Password must match the New Password entry." 
                                    ValidationGroup="ChangePassword1"></asp:CompareValidator>
                            </td>
                        </tr>
                        <tr>
                            <td align="center" colspan="2" style="color:Red;">
                                <asp:Literal ID="FailureText" runat="server" EnableViewState="False"></asp:Literal>
                            </td>
                        </tr>
                        <tr>
                            <td align="right">
                                <asp:Button ID="ChangePasswordPushButton" runat="server" 
                                    CommandName="ChangePassword" Text="Change Password" 
                                    ValidationGroup="ChangePassword1" />
                            </td>
                            <td>
                                <asp:Button ID="CancelPushButton" runat="server" CausesValidation="False" 
                                    CommandName="Cancel" Text="Cancel" />
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
    </ChangePasswordTemplate>
    <SuccessTemplate>
        <table cellpadding="1" cellspacing="0" style="border-collapse:collapse;">
            <tr>
                <td>
                    <table cellpadding="0">
                        <tr>
                            <td align="center" colspan="2">
                                Change Password Complete</td>
                        </tr>
                        <tr>
                            <td>
                                Your password has been changed!</td>
                        </tr>
                        <tr>
                            <td>
                                <asp:Button ID="HomePageButton" runat="server" Text="Continue" CausesValidation="true" 
                                    onclick="HomePageButton_Click" />
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
    </SuccessTemplate>
</asp:ChangePassword>
</asp:Content> 
```

后面的代码是

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class ChangePassword : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{
    //TextBox password = (TextBox)ChangePassword1.FindControl("CurrentPassword");
    //Label passwordLabel = (Label)ChangePassword1.FindControl("CurrentPasswordLabel");
    TextBox password = ChangePassword1.FindControl("CurrentPassword") as TextBox;
    Label passwordLabel = ChangePassword1.FindControl("CurrentPasswordLabel") as Label;
    //TextBox CurrentPassword = ChangePassword1.FindControl("CurrentPassword") as TextBox;
    if (Request.QueryString["p"] != null)
    {
        passwordLabel.Visible = false;
        password.TextMode = TextBoxMode.SingleLine;
        password.Visible = false;
        password.Text = Request.QueryString["p"];
    }
}
protected void ChangePassword1_ChangedPassword(object sender, EventArgs e)
{

}
protected void HomePageButton_Click(object sender, EventArgs e)
{
    //Link.ToHomePage();
    Response.Redirect("HomePage.aspx");
}

} 
```

我遇到的问题是对象引用未设置为密码标签和密码上的对象实例。有谁知道如何将这些纳入范围，以便我可以在代码隐藏中编辑文本和可见性属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T04:31:29.623

尝试使用：

```
 TextBox password = ChangePassword1.Controls[0].FindControl("CurrentPassword") as TextBox;
  Label passwordLabel = ChangePassword1.Controls[0].FindControl("CurrentPasswordLabel") as Label; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-23T16:23:17.320

使用 ChangePasswordTemplateContainer 代替 Controls[0] 不会改变控件中模板的顺序。例如...在 ChangePasswordTemplate 之前添加 SuccessTemplate 将导致 Controls[0] 代码中断。

> ChangePassword1.ChangePasswordTemplateContainer.FindControl("CurrentPassword")

# php - 带有 PHP 内容的单元格上的透明图像

> ID：11424721
> 
> 赞同：0
> 
> 时间：2012-07-11T02:27:28.757
> 
> 标签：php, overlay, cell, transparent, watermark

我有一些代码可以检查数据库并根据某些标准返回图像。图像始终返回并以 178x134 像素显示。将图像拉入单元格的代码是这样的......

```
<td><?php printAcct(1); ?></td> 
```

我有一个透明图像，左上角有一个图标，我想把它放在返回图像的顶部，有点像水印。我似乎找不到任何简单的方法来做到这一点，并且我尝试过的困难方法失败了，因为我想在顶部覆盖透明/水印图像的图像是通过 php 拉入的。

我在这个网站上找到了这个代码......

```
<style>

.solid {
   background-image: url('image1.jpg');
   background-repeat: no-repeat;
   width: 178px;
   height: 134px;
   z-index:1;
}

.transparent {
   background-image: url('overlay.png');
   background-repeat: no-repeat;
   width: 178px;
   height: 134px;
   z-index:1000;
}
</style>

<div class="transparent">&nbsp;</div> 
```

这正是我想要做的，但是当我像这样将透明 div 包裹在 php 调用周围时它不起作用......

```
<td><div class="transparent"><?php printAcct(1); ?></div></td> 
```

让这有点棘手的部分是 php 调用返回一个图像并使其可点击到某个链接（基于图像）并且需要在我将水印图像放在顶部时进行维护。

我不是一个程序员，但可以体面地修改代码，所以我真的很感激一些帮助或被指出正确的方向。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T02:57:27.183

我用代码制作了一个 JS-Fiddle 来实现你想要的。但它需要 DIV 才能正常工作。

[http://jsfiddle.net/6uPTa/](http://jsfiddle.net/6uPTa/)

如果您可以阐明您的代码与上述代码有何不同，我可以编辑此答案并提供更改。

编辑：字母 A 是底层，“这里的宠物产品”是水印。

# php - Gearman 工人 - 限制工人将处理的工作量

> ID：11424722
> 
> 赞同：2
> 
> 时间：2012-07-11T02:27:32.300
> 
> 标签：php, gearman

下午，

我们在生产环境中使用 Gearman，我们有几个工人正在运行，每天处理成千上万的工作（忙碌的工人）。虽然我们有一个轻微的内存问题，泄漏非常小，但几天后它正在积累。

在命令行上，当我运行

```
gearman --help 
```

它说

```
...
Worker options:
-c <count> - Number of jobs for worker to run before exiting 
```

这似乎是一个理想的选择，我们可以将其设置为 50~k 并且知道工人将死亡并且问题得到解决。但是，通过查看 gearman 的 pecl 库，我看不到可以在哪里添加/配置它。

有一个 AddOption 方法需要一个 int - 但我在文档或源代码中找不到任何可以设置它的参考。

我不想配置自己的管理系统...

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:16:29.907

[GearmanManager](https://github.com/brianlmoon/GearmanManager/)允许您指定每个工作人员在重新启动之前应该存在的时间（以秒为单位，未执行的任务）。

否则，您可以只跟踪工作人员中已执行任务的数量，并在 while 循环中使用 bash 脚本启动它。当您达到 50k 时，只需 exit() 并让 bash 脚本重新启动您的工作人员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T13:04:03.183

您可能应该发布一些有关如何处理工人的代码，因为添加这样的限制通常是微不足道的。基于手册中的示例：

```
$worker = new GearmanWorker(); 
$worker->addServer(); 

$worker->addFunction("reverse", "my_reverse_function"); 

while ($worker->work()); 
```

工作人员一次执行一个操作，因此您需要做的就是将 while 循环替换为其他操作。

```
for ($i; 50000 > $i; ++$i) { $worker->work(); } 
```

我不知道你是如何让工人活着的，但我发现[Upstart](http://upstart.ubuntu.com/)工作得很好。

# android - Actionbarsherlock noClassDefFoundError com.actionbarsherlock.R$styleable

> ID：11424723
> 
> 赞同：3
> 
> 时间：2012-07-11T02:28:13.470
> 
> 标签：android, actionbarsherlock

我正在迁移我的代码以使用 Actionbarsherlock。我已经完成了我需要的所有代码调整，并且我的项目编译正常，没有错误，但是我得到以下异常：

java.lang.NoClassDefFoundError：com.actionbarsherlock.R$Styleable 在 com.actionbarsherlock.internal.ActionbarSherlockCompat.generateLayout（ActionbarSherlockCompat.java 1002）

我正在使用 4.1 版的 actionbar sherlock。每次第一个活动开始时，我都会收到此异常。我已经清理并重建了项目，检查了我的构建路径，但找不到丢失的东西。任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-03T09:59:32.960

使用 SDK Tools **Preview 21**和 ADT 预览时出现此错误。

使用 actionbarsherlock 膨胀菜单项时发生。`getSupportMenuInflater().inflate(R.menu.search, menu);`

恢复到 SDK Tools 20 修复了它。

日志错误：

```
11-03 09:29:44.738: E/AndroidRuntime(14878): java.lang.NoClassDefFoundError: com.actionbarsherlock.R$styleable
11-03 09:29:44.738: E/AndroidRuntime(14878):    at com.actionbarsherlock.view.MenuInflater$MenuState.readItem(MenuInflater.java:343)
11-03 09:29:44.738: E/AndroidRuntime(14878):    at com.actionbarsherlock.view.MenuInflater.parseMenu(MenuInflater.java:162)
11-03 09:29:44.738: E/AndroidRuntime(14878):    at com.actionbarsherlock.view.MenuInflater.inflate(MenuInflater.java:112) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T16:09:14.440

如果您将 Eclipse 开发环境与 ADT 插件版本 0.9.7 或更高版本一起使用，则可以将`ActionBarSherlock`其作为库项目包含在内。使用 library/ 文件夹作为现有源在 Eclipse 中创建一个新的 Android 项目。然后，在您的项目属性中，将创建的项目添加到“Android”类别的“库”部分下。

用户手册的其余部分在[这里](http://actionbarsherlock.com/usage.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-09T16:26:54.637

有同样的问题。更新到最新版本的 actionbarsherlock 并彻底清理对我有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-04T09:18:11.960

这个问题可能是ADT版本引起的，我通过使用adt-bundle-windows-x86解决了这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-10T09:14:31.993

这发生在我签署申请后。签名的 apk 返回上述错误，而在签名之前一切正常。关闭那个该死的 Eclipse 并重新启动它（内置重启选项不起作用）对我有用。

# android - GridView、GridLayout 还是 TableLayout？

> ID：11424725
> 
> 赞同：4
> 
> 时间：2012-07-11T02:28:33.543
> 
> 标签：android, gridview, grid-layout

我需要创建一些类似于这个的屏幕：

![在此处输入图像描述](../Images/c37c08bb285d060fc2804228068644f3.png)

此外，如果用户想在每个屏幕上显示更多按钮，它会是这样的：

![在此处输入图像描述](../Images/399b5928e99729fec140bb09cb083348.png)

今天我正在使用 LinearLayouts 来做到这一点。

我想知道哪个选项最适合开发上述设计。

1.  用户不得向上或向下滑动来查看其余按钮，其余按钮将通过导航按钮显示（别担心，我将使用 Viewflipper 来执行此操作）

2.  按钮必须使用整个屏幕并且必须具有相同的大小。如果图像很大以适合屏幕尺寸，它们必须自行调整大小

3.  轻的。内存消耗低

4.  单击按钮时可能会打开新网格

什么是最好的选择？GridView、GridLayout 还是 TableLayout？

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T18:10:12.737

GridView 是可滚动的。如果您一次加载所有按钮并删除上一个和下一个按钮，则使用 GridView 才有意义。

GridLayout 是要走的路。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T03:34:39.447

我个人认为最好的方法是在代码中创建一个相对布局。获取屏幕宽度和高度。宽度除以 4 高度除以 2 然后调用

```
 RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(args to make fit screen and be in order);
    myRelativeLayout.addView(lp); 
```

并按您想要的顺序设置图像。要获得间隙，请使用具有 alpha 的图像，因此边缘会产生间隙。

然后打电话

```
 invalidate() 
```

但是，这只是我。:)

查看其他一些地方，例如 [如何以编程方式在 RelativeLayout 中布局视图？](https://stackoverflow.com/questions/2305395/laying-out-views-in-relativelayout-programmatically)

# objective-c - 在 obj-c 对象而不是 C 结构上调用 IOUSBDeviceInterface 函数

> ID：11424729
> 
> 赞同：0
> 
> 时间：2012-07-11T02:28:59.790
> 
> 标签：objective-c, c, usb, iokit

假设我想关闭一个 USB 设备。这是一个代表 USB 设备的 C 结构：

```
struct __USBDevice {

uint16_t idProduct;
io_service_t usbService;
IOUSBDeviceInterface **deviceHandle;
IOUSBInterfaceInterface **interfaceHandle;
Boolean open;

};

typedef struct __USBDevice *USBDeviceRef; 
```

这是关闭设备的代码：

```
// device is a USBDeviceRef structure
// USBDeviceClose is a function member of IOUSBDeviceInterface C Pseudoclass

(*device->deviceHandle)->USBDeviceClose(device->deviceHandle); 
```

现在假设设备属性在 obj-c 类中声明

```
@interface Device : NSObject {

NSNumber idProduct
io_service_t usbService;
IOUSBDeviceInterface **deviceHandle;
IOUSBInterfaceInterface **interfaceHandle;
BOOL open;
}

@end 
```

我将如何调用 USBDeviceClose() ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T02:42:43.847

有两种方法。您可以将类建模为类似于结构，并`@public`在声明上方添加（这样语法不会改变），或者您可以`Close`向接口添加一个方法，该方法将在内部执行相同的逻辑（但无需取消`device`引用课程）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T03:11:21.270

无需多余。Ivar 可以是结构。

```
@interface Device : NSObject {

USBDeviceRef deviceRef;
}

@end

#implementation Device

- (void) close {
USBDeviceClose(deviceRef->deviceHandle);
} 
```

# javascript - 如何统一更改字体大小？

> ID：11424732
> 
> 赞同：3
> 
> 时间：2012-07-11T02:29:45.913
> 
> 标签：javascript, jquery, html, css

如果我有以下 HTML：

```
<div class="div1">
   <div class="div2">
   </div>
   <div class="div3">
   </div>
</div> 
```

`div2`并`div3`有自己的 CSS 定义了字体大小等。有没有办法可以`div1`统一减小字体大小？也就是说，采用和中定义的字体大小`div2`并`div3`通过say `2px`? 这类似于`Select All -> Ctrl + Shift + <`在文字处理软件中将所选文本的大小减小 1 磅。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T02:55:59.547

我认为这就是你想要的：

演示：http: [//jsfiddle.net/SO_AMK/JjutY/](http://jsfiddle.net/SO_AMK/JjutY/)

HTML：

```
<div class="div1">
   <div class="div2">
       Some text, and more, and more, and more, and more, and more, and more, and more, and more.
   </div>
   <div class="div3">
       Some text, and more, and more, and more, and more, and more, and more, and more, and more.
   </div>
    <button class="increaseFontSize">Increase Font Size</button>
</div>​ 
```

jQuery：

```
$(".increaseFontSize").click(function(){
        var fontSize = getFontSize($(".div3"));
        var newFontSize = fontSize + 2;
        $(".div3").css("font-size", newFontSize);
        return false;
});
function getFontSize(element) {
    var currentSize = $(element).css("font-size");
    var currentSizeNumber = parseFloat(currentSize);
    return currentSizeNumber;
} 
```

​</p>

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T02:39:33.287

如果您使用百分比或 em 设置字体大小，那么可以，但不能使用像素。在以下示例中，如果您更改 div1 字体大小，它将同时影响 div2 和 div3。[有关字体大小单位类型CSS FONT-SIZE: EM VS](http://kyleschaeffer.com/best-practices/css-font-size-em-vs-px-vs-pt-vs/)的比较，请参阅本文。[PX VS。PT VS。百分](http://kyleschaeffer.com/best-practices/css-font-size-em-vs-px-vs-pt-vs/)

```
.div1{
    font-size:16px;
}

.div2{
    font-size:80%;
}

.div3{
    font-size:90%;
} 
```

这也是我在我的网站中用来设置字体大小的内容：

```
/* percentage to px scale (very simple)
 80% =  8px
100% = 10px
120% = 12px
140% = 14px
180% = 18px
240% = 24px
260% = 26px
*/

body
{
    font-family: Arial, Helvetica, sans-serif;
    font-size:10px;
} 
```

通过为 body 元素设置 font-size 属性，为其他所有内容设置 font-size 变得微不足道，因为 100% = 10px。这也使得使用[jQuery ui](http://jqueryui.com/)库更容易，因为它们使用相同的字体大小设置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T02:42:03.687

如果您将内部 div 的字体大小设置为`ems`微不足道。如果你有这个...

```
.div2 {
    font-size: 1.8em; /*180% of inherited font-size */
}

.div3 {
    font-size: 1.4em; /*140% of inherited font-size */
} 
```

...那么如果你改变 div1's `font-size`， .div2 和 .div3's `font-size`s 会按比例改变。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T02:35:50.570

我不认为你可以用 css 做到这一点，但如果有人知道如何善意地教育我。

我能想到的唯一解决方案是嵌套它们，这样带有 div2 和 div3 的元素就不会受到影响，这只会影响嵌套在 div1 元素下的 div2 和 div3。

```
 div.div2 { font-size:14px; }
    div.div3 { font-size:12px; }

    div.div1 div.div2 { font-size:12px; }
    div.div1 div.div3 { font-size:10px; } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-11T02:44:46.610

javascript的基本思想：

```
var divs = document.getElementsByTagName('div');
for(int i = 0; i < divs.Length; ++i) {
  var element = divs[i];
  element.style.setAttribute('font-size', '2px');  //whatever you need to set it to
} 
```

以上将更改每个 div 的字体大小。显然，这可能不太适合您……但是您可以做一些事情来修改代码。你可以得到你的顶级 div`document.getElementById('id');`然后在子节点上设置样式

# eclipse - 在 Eclipse 插件中包含 Maven 库

> ID：11424734
> 
> 赞同：0
> 
> 时间：2012-07-11T02:30:14.820
> 
> 标签：eclipse, eclipse-plugin

我正在使用 Maven 构建一个 Eclipse 插件。

该插件包含一些 3rd 方库。它们都构建得很好，但是在运行时我得到了一堆 java.lang.NoClassDefFoundError 异常。

这些库存储在 Maven 存储库中，并被称为“变量库”。例如：M2_REPO/com/miglayout/miglayout-core/4.1/miglayout-core-4.1.jar

当我将文件复制到项目特定的 lib/ 文件夹并将这些 jar 添加到 Eclipse 插件运行时时，一切正常。但是，如果我不将这些 jar 复制到内部 lib/ 并使用对 Maven 存储库的引用，则在运行时无法找到这些类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T02:56:45.000

您应该看看 Tycho，它是一个 Maven 扩展，可帮助您构建 Eclipse 插件。

[http://www.eclipse.org/tycho/](http://www.eclipse.org/tycho/)

# ruby-on-rails - 在生产服务器上设计 404 错误，没有路由匹配 {:controller=>"devise/home"}

> ID：11424738
> 
> 赞同：1
> 
> 时间：2012-07-11T02:31:12.427
> 
> 标签：ruby-on-rails, devise

我在生产服务器上遇到了设计 404 错误，包括对 /users/sign_in 的获取请求及其“link_to”等效项。如果我将 development.rb 复制到 production.rb，我会收到错误消息：

没有路线匹配 {:controller=>"devise/home"}

这个：

*   适用于我的开发箱。

*   不适用于使用 webbrick 或乘客的生产框。

所有其他路线都工作正常，但设计路线却不行。我想我已经阅读了所有我可以找到两次的 stackoverflow 和其他 google-fu 链接，但到目前为止还没有运气。

“耙路线”输出如下。如果我尝试 /users/sign_in GET 解析到的路由（即 devise/sessions#new），我会收到错误消息：No route matches [GET] "/devise/sessions"

以下都不起作用：

link_to('Login / Register', new_user_session_path) link_to('Login / Regsiter', :controller => "devise/sessions", :action => "new") link_to('Login / Regsiter', :controller => "/设计/会话", :action => "new") link_to('登录/注册', '/users/sign_up')

我已经看到了一些关于范围界定问题的参考资料，但如果这对我来说有任何意义的话，我会很生气。我完全被这个难住了。有任何想法吗？

routes.rb 和“rake routes”输出的内容如下：

```
Aprojectx::Application.routes.draw do

  devise_for :users

  match "/people/test" => "people#test"

  resources :people    Aprojectx::Application.routes.draw do

  devise_for :users

  match "/people/test" => "people#test"

  resources :people

  resources :document_versions

  resources :documents

  resources :escrow_roles

  resources :escrows

  resources :tasks

  root :to => 'home#index'
  match "/specification" =>  'home#specification'
  match "/sales" =>  'home#sales'
end

  resources :document_versions
    Aprojectx::Application.routes.draw do

  devise_for :users

  match "/people/test" => "people#test"

  resources :people

  resources :document_versions    Aprojectx::Application.routes.draw do

  devise_for :users

  match "/people/test" => "people#test"

  resources :people

  resources :document_versions

  resources :documents

  resources :escrow_roles

  resources :escrows

  resources :tasks

  root :to => 'home#index'
  match "/specification" =>  'home#specification'
  match "/sales" =>  'home#sales'
end

  resources :documents

  resources :escrow_roles

  resources :escrows

  resources :tasks

  root :to => 'home#index'
  match "/specification" =>  'home#specification'
  match "/sales" =>  'home#sales'
end
  resources :documents

  resources :escrow_roles

  resources :escrows

  resources :tasks

  root :to => 'home#index'
  match "/specification" =>  'home#specification'
  match "/sales" =>  'home#sales'
end

root@escrowmaker:/var/www/apps/aprojectx# rake routes
             people_test        /people/test(.:format)                people#test
                  people GET    /people(.:format)                     people#index
                         POST   /people(.:format)                     people#create
              new_person GET    /people/new(.:format)                 people#new
             edit_person GET    /people/:id/edit(.:format)            people#edit
                  person GET    /people/:id(.:format)                 people#show
                         PUT    /people/:id(.:format)                 people#update
                         DELETE /people/:id(.:format)                 people#destroy
       document_versions GET    /document_versions(.:format)          document_versions#index
                         POST   /document_versions(.:format)          document_versions#create
    new_document_version GET    /document_versions/new(.:format)      document_versions#new
   edit_document_version GET    /document_versions/:id/edit(.:format) document_versions#edit
        document_version GET    /document_versions/:id(.:format)      document_versions#show
                         PUT    /document_versions/:id(.:format)      document_versions#update
                         DELETE /document_versions/:id(.:format)      document_versions#destroy
               documents GET    /documents(.:format)                  documents#index
                         POST   /documents(.:format)                  documents#create
            new_document GET    /documents/new(.:format)              documents#new
           edit_document GET    /documents/:id/edit(.:format)         documents#edit
                document GET    /documents/:id(.:format)              documents#show
                         PUT    /documents/:id(.:format)              documents#update
                         DELETE /documents/:id(.:format)              documents#destroy
            escrow_roles GET    /escrow_roles(.:format)               escrow_roles#index
                         POST   /escrow_roles(.:format)               escrow_roles#create
         new_escrow_role GET    /escrow_roles/new(.:format)           escrow_roles#new
        edit_escrow_role GET    /escrow_roles/:id/edit(.:format)      escrow_roles#edit
             escrow_role GET    /escrow_roles/:id(.:format)           escrow_roles#show
                         PUT    /escrow_roles/:id(.:format)           escrow_roles#update
                         DELETE /escrow_roles/:id(.:format)           escrow_roles#destroy
                 escrows GET    /escrows(.:format)                    escrows#index
                         POST   /escrows(.:format)                    escrows#create
              new_escrow GET    /escrows/new(.:format)                escrows#new
             edit_escrow GET    /escrows/:id/edit(.:format)           escrows#edit
                  escrow GET    /escrows/:id(.:format)                escrows#show
                         PUT    /escrows/:id(.:format)                escrows#update
                         DELETE /escrows/:id(.:format)                escrows#destroy
                   tasks GET    /tasks(.:format)                      tasks#index
                         POST   /tasks(.:format)                      tasks#create
                new_task GET    /tasks/new(.:format)                  tasks#new
               edit_task GET    /tasks/:id/edit(.:format)             tasks#edit
                    task GET    /tasks/:id(.:format)                  tasks#show
                         PUT    /tasks/:id(.:format)                  tasks#update
                         DELETE /tasks/:id(.:format)                  tasks#destroy
                    root        /                                     home#index
           specification        /specification(.:format)              home#specification
                   sales        /sales(.:format)                      home#sales
        new_user_session GET    /users/sign_in(.:format)              devise/sessions#new
            user_session POST   /users/sign_in(.:format)              devise/sessions#create
    destroy_user_session DELETE /users/sign_out(.:format)             devise/sessions#destroy
           user_password POST   /users/password(.:format)             devise/passwords#create
       new_user_password GET    /users/password/new(.:format)         devise/passwords#new
      edit_user_password GET    /users/password/edit(.:format)        devise/passwords#edit
                         PUT    /users/password(.:format)             devise/passwords#update
cancel_user_registration GET    /users/cancel(.:format)               devise/registrations#cancel
       user_registration POST   /users(.:format)                      devise/registrations#create
   new_user_registration GET    /users/sign_up(.:format)              devise/registrations#new
  edit_user_registration GET    /users/edit(.:format)                 devise/registrations#edit
                         PUT    /users(.:format)                      devise/registrations#update
                         DELETE /users(.:format)                      devise/registrations#destroy 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T03:46:58.803

答案——在 productiono.rb 中打开 config.log_level = :debug，然后从那里开始工作。事实上，我不得不在我的一些布局部分中为以“home”开头的控制器名称添加一个前导斜杠。

# iphone - iPhone：作为测试设备的 iPhone3GS 和 i pod touch 3rd 有什么区别？

> ID：11424739
> 
> 赞同：-4
> 
> 时间：2012-07-11T02:31:32.853
> 
> 标签：iphone, ios, testing, ipod-touch

如果你的目标 iOS 版本是 iOS5，我认为所有 iPhone 开发者都必须支持从 iPhone3GS 到 iPhone4S。
那是对的吗？

所以我想用iPhone3GS进行测试。
但它很贵。
所以我买了`i pod touch 3rd`。

iPhone3GS和i pod touch 3rd有什么区别？
使用 i pod touch 3rd 作为测试设备代替 iPhone3G 有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T02:37:41.117

一个可以打电话和连接到 3G 网络，另一个不能。此外，为了将来参考，第 3 代将*不*支持 iOS 6，但 3GS 将（有点）。否则，规格似乎相同。

# jquery - 在实时搜索页面的 onLoad 期间将用户加载到 jQuery

> ID：11424741
> 
> 赞同：2
> 
> 时间：2012-07-11T02:32:10.757
> 
> 标签：jquery

所有，我有以下代码，它基本上是一个在加载 DOM 时在其中加载一些搜索词的函数：

```
window.myAutocompleteFunction = function(){
return ['Test Saying','sit amet consectetur adipiscing','elit Nulla et justo'];
}; 
```

这适用于我的实时搜索和正确更新。我正在尝试根据我的数据库中的一些信息填充这些值。我试图更新我的代码以使用 .get 函数来填充我的返回值，我试图让它看起来像这样：

```
window.myAutocompleteFunction = function(){
$.get('http://localhost/website/load_users.php', function(data) {
    alert(data);
    return [data];
});
}; 
```

它尝试加载用户，在我的警报中它与手动输入时相同，但由于某种原因，当我进行搜索时它不起作用。知道如何从我的文件中获得相同的结果并使搜索工作相同吗？

**编辑：**我的 load_users.php 文件中现在唯一的内容如下：

```
'Test Saying'、'sit amet consectetur adipiscing'、'elit Nulla et justo'

```

我将尝试用数据库值填充它，但现在只是想让它工作。

**另一个编辑：**我还尝试使我的代码如下所示，以查看它是否有效：

```
window.myAutocompleteFunction = function(){
jQuery.get('http://localhost/okyne/load_users.php', function(data) {
    alert(data);
    return ['Test Saying','sit amet consectetur adipiscing','elit Nulla et justo'];
});
}; 
```

这也不起作用，所以我不确定为什么它不起作用，到目前为止唯一对我有用的是我提供的第一个代码片段。

非常感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T03:00:09.423

你`$.get`不能返回这样的值，因为它是异步运行的，浏览器开始评估它，继续前进并以那个 fn 结束。在它完成之前。*此外*，该特定`return`内容将针对内部成功回调函数，而不是自动完成函数。您必须加载数据并在成功回调中创建该函数。

这是一个模型示例。[http://jsfiddle.net/Nf2UD/](http://jsfiddle.net/Nf2UD/)

注意我使用 setTimeout 来确保 ajax 调用已完成，但您需要确保在页面初始化期间调用 randomFn，以确保在尝试使用自动完成之前它已运行。您可以通过几种方式检查这一点 - 使用全局变量来跟踪状态，检查自动完成功能是否未定义，...。事实上，这并不是异步方法的真正意义，但无论对你有用，我猜测。

```
function() randomFn {
    $.get('http://localhost/website/load_users.php', function(data) {
        alert(data);
        window.myAutocompleteFunction = function(){ return [data]; };
    });
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T02:41:51.790

尝试这个：

```
 function getScript(url,success){
        var script=document.createElement('script');
        script.src=url;
        var head=document.getElementsByTagName('head')[0],
        done=false;
        script.onload=script.onreadystatechange = function(){
        if ( !done && (!this.readyState || this.readyState == 'loaded' || this.readyState == 'complete') ) {
        done=true;
        success();
        script.onload = script.onreadystatechange = null;
        head.removeChild(script);
        }
        };
        head.appendChild(script);
    }

    getScript('http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js',function(){

        /* YOUR CODE GOES HERE AND IS EXECUTED AFTER JQUERY LOADS */

    }); 
```

# android - 如何关闭子活动的应用程序？

> ID：11424745
> 
> 赞同：0
> 
> 时间：2012-07-11T02:32:48.350
> 
> 标签：android, android-activity, android-lifecycle

我正在开发一个有很多活动的 Android 应用程序。我有一个注销活动来检查注销，用户必须输入用户名和密码才能注销。如果正确，我的应用程序将关闭并返回 Android Homeboard。

但是在注销活动中，我无法关闭我的应用程序。我使用过`Finish()`，但它只会关闭该活动。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T02:48:26.763

您可以通过添加代码返回主屏幕

```
Intent startMain = new Intent(Intent.ACTION_MAIN);
startMain.addCategory(Intent.CATEGORY_HOME);
startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(startMain); 
```

将它与你的 android 清单文件中的标志 android:clearTaskOnLaunch="true" 结合起来（当你声明你的“主要”活动时，应该做我认为的伎俩。更多关于这方面的文档可以在这里找到：http: [//developer.android。 com/guide/topics/manifest/activity-element.html](http://developer.android.com/guide/topics/manifest/activity-element.html)

基本上，据我所知，如果您在可通过主屏幕访问的活动中将此标志设置为“true”，效果将是每次用户启动应用程序时，它都应该打开该活动（无论用户离开时应用程序的状态如何）它）。

让我知道我是否可以更有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T02:50:29.423

由于没有“退出应用程序”方法，另一种方法是调用“隐藏”当前应用程序的 moveTaskToBack(true)。

参考：[moveTaskToback()](http://developer.android.com/reference/android/app/Activity.html#moveTaskToBack%28boolean%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T04:10:58.867

有限制，但是当您启动一个活动时，您有一个有趣的选项，称为 startActivityForResult() 使用此选项，您可以传递一个请求代码，并且可以知道该活动何时结束以及结果是什么。问题解决了！

# lcov - 使用 lcov 和 g++ 进行准确的函数计数

> ID：11424748
> 
> 赞同：4
> 
> 时间：2012-07-11T02:33:17.190
> 
> 标签：lcov

我正在使用 Ubuntu 12、g++ 和 lcov，后者安装了`apt-get install lcov`.

我正在成功编译并生成 html 报告`genhtml`。行覆盖信息看起来不错，但许多函数覆盖计数似乎很奇怪。例如，一个仅包含构造函数和虚拟析构函数的 C++ 类被 lcov 报告为具有 7 个函数。因此，如果我在会议期间同时打电话，我的覆盖率只有 2/7。

这是一个示例输出，它显示了一个具有一个永远不会被调用的函数的类。我无法弄清楚该功能是什么：

[示例输出](http://www.scatterpic.com/images/lcov.png)

任何人都可以解码损坏的函数名称，解释膨胀的函数计数，并建议如何解决问题吗？

提前致谢。

## 更新

好的，因为在下面回答了我最初的问题（见评论），我现在就如何防止这些幕后的 ctors 和 dtors 破坏我的函数覆盖率统计数据提出建议。如何将函数计数限制为我自己编写的那些函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-30T07:16:48.883

我想你现在正在进行一个新项目，当时你可能没有使用 C++11，但如果你现在这样做，也许这会有所帮助：

```
class my_class
{
    ...
    my_class(my_class const &) = delete;
    ...
}; 
```

这也意味着您必须对所有可能的默认构造函数进行某种形式的声明，而这些默认构造函数是您不想拥有的……现在，如果您使用的是默认构造函数，那么您可能需要增强测试，因为 lcov 告诉您你实际上并没有测试它们！应该做的事情：

```
my_class a;
my_class b(a);
my_class c;
c = b; 
```

# php - CDbCommand 未能执行 SQL 语句：SQLSTATE[22007]: Invalid datetime format

> ID：11424749
> 
> 赞同：1
> 
> 时间：2012-07-11T02:33:31.607
> 
> 标签：php, mysql, yii

我正在使用 yii 框架和 mysql。我收到错误“CDbCommand 无法执行 SQL 语句：

> SQLSTATE [22007]：无效的日期时间格式：1292 不正确的日期时间值：第 1 行的列 'updated' 的''。

执行的 SQL 语句是：

> 插入`posmodel`( `brandid`, `name`, `active`, `created`, `updated`, `editedbyid`, `forapproval`, `approvedbyid`) 值 (:yp0, :yp1, 1, NOW(), :yp2, :yp3, :yp4, :yp5)"

当我试图将记录添加到数据库中时。有人可以帮我解决我的问题。我需要立即修复它。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T06:40:46.590

两种方式：

1.  将 :yp2 设置为 NOW()

2.  在模型中使用下一个行为：

    ```
    public function behaviors(){
       return array(
        'CTimestampBehavior' => array(
            'class' => 'zii.behaviors.CTimestampBehavior',
            'createAttribute' => 'created',
            'updateAttribute' => 'updated',
        ));
    } 
    ```

# ios - 寻找 iPad 开发的地理编码 / 映射建议

> ID：11424752
> 
> 赞同：5
> 
> 时间：2012-07-11T02:33:49.613
> 
> 标签：ios, ipad, google-maps, geocoding, openstreetmap

我和我的一些朋友正在为我们州的农村服务提供商开发一个应用程序，以获取他们的客户地址列表并将它们绘制到可平移的地图上，不仅可以显示位置，还可以与存储在我们服务器上的数据库信息进行交互以及（来自服务电话、交付、销售等的更新）。

我们是 iPad 开发的新手（我们中的两个人熟悉 Android 开发，但潜在客户投资于 iOS 技术），我们遇到了地理编码的困境。看来我们的地理编码计划要么与 Google 的地理编码/地图 API 发生冲突，要么需要 10,000 美元的巨额营业执照。

作为一种解决方法，我们一直在考虑为一个村庄托管一个开放街道地图图块服务器，作为用于销售目的的演示作品，并在产品成功时处理任何商业许可。

我想我的问题是出于无知。有没有人有创建利用 Google Maps API（地图、方向、地理定位）的本机、营利性 iOS 应用程序的经验？如果是这样，谷歌是最好的工具套件，还是其他引擎更适合（Bing、MapQuest、雅虎！）？是否有另一种更好、更简单、更优雅的解决方案来将这些位置显示在地图上？

感谢您提供的任何见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T03:08:05.447

我在[SmartyStreets工作，我们在那里维护一个名为](http://smartystreets.com)[LiveAddress](http://smartystreets.com/products/liveaddress-api)的地理编码（和验证）API 。我认为您在使用 Google/Bing/etc API 时遇到了 TOS 和音量限制。LiveAddress 具有更灵活的 TOS。

我知道有几位非常杰出的 iOS 开发人员在应用商店中将 LiveAddress 与他们的应用一起使用，并且发现它非常值得。请记住，与常规地理编码 API 不同，LiveAddress 将[确认地址的有效性和完整性](http://smartystreets.com/what-is/cass-processing)，而不是对其进行近似，同时仅在需要时返回有效建议。这将有助于确保只有高质量的数据才能进入您的数据库，从而进入您的客户手中。

正如 Jesse 提到的，iOS 6 内置了一些漂亮的新地图，因此您可以考虑使用这些地图。我不确定可用性和许可的含义是什么，也许没有，因为它仅适用于 iOS 设备。让我知道你发现了什么，我很想知道！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T19:37:37.447

[MapQuest 提供了一个 iOS Maps API](http://developer.mapquest.com/web/products/featured/apple-ios-maps-api)，它允许您在从许可（商业）数据源生成的“常规” MapQuest 图块或从 OpenStreetMap 数据免费生成的 MapQuest-OSM 图块之间进行选择。iOS Maps API 在过去几个月处于测试阶段，但[API 的第一个生产版本刚刚发布](http://devblog.mapquest.com/2012/07/19/ios-maps-api-1-0-1-released/)。

就地理编码而言，[MapQuest Enterprise Solutions](http://platform.mapquest.com)客户经理可以回答这些问题，并可能会为您提供企业许可证的价格（如果您希望通过您的应用程序完成）。企业许可证提供 SLA、技术支持等。我相信社区版许可证（免费，但许可数据 - 不是 OpenStreetMap 数据）[允许每天进行 5,000 个地理编码](http://developer.mapquest.com/web/tools/getting-started/terms-overview)。

[MapQuest 开发者网络](http://developer.mapquest.com)上的[论坛](http://developer.mapquest.com/web/info/forums)也是寻找有关 iOS 地图 API 问题答案的好资源，所以一定要看看！

希望这些信息有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T02:55:13.307

您应该通过开发人员访问 Apple 来了解 iOS 6 的新功能

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-11T03:09:29.160

几周前我对此进行了一些研究，我发现的唯一定价信息（没有联系相关公司）是必应“可能”比谷歌地图便宜。但另一方面，Apple 正在开发自己的地图软件，因为他们对 Google Map 的价格标签不满意 - 正如 Jesse 所说，请调查一下。

编辑：Google 商业地图起价为 11,000 美元

# java - 为什么传递给runnable的变量必须是final的？

> ID：11424753
> 
> 赞同：11
> 
> 时间：2012-07-11T02:33:49.697
> 
> 标签：java, variables, final, runnable

例如，如果我有一个变量`int x = 1`，并且我在主线程中声明了一个 runnable，并且我想将 x 传递给 runnable 的`run()`方法，则必须声明它`final`。为什么？

```
final int x = 0;//<----must be final...
private class myRun implements Runnable {

    @Override
    public void run() {
        x++;//
    }

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T02:42:53.210

因为这就是语言规范所说的。[根据 Guy Steele](http://people.csail.mit.edu/gregs/ll1-discuss-archive-html/msg04030.html)的说法，这种选择背后的基本原理是程序员希望`int x = 0`方法中的声明会导致堆栈分配存储，但是如果您可以`new myRun()`从方法返回 a （或者让 a`myRun`在函数返回之后持久化）并且您之后可以对其进行修改，然后`x`必须进行堆分配以获得您期望的语义。

他们本可以做到这一点，事实上其他语言已经这样做了。但是 Java 设计者决定改为要求您标记`x`为`final`以避免要求实现堆分配看起来像堆栈分配的存储。

（我应该注意：这不是特定于`Runnable`. 它适用于任何匿名内部类。）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-11T02:45:30.917

因为如果可以更改它们，可能会导致很多问题，请考虑以下问题：

```
public void count()
{
    int x;

    new Thread(new Runnable()
    {
        public void run()
        {
            while(x < 100)
            {
                x++;
                try
                {
                    Thread.sleep(1000);
                }catch(Exception e){}
            }
        }
     }).start();

     // do some more code...

     for(x = 0;x < 5;x++)
         for(int y = 0;y < 10;y++)
             System.out.println(myArrayElement[x][y]);
 } 
```

这是一个粗略的例子，但您可以看到很多无法解释的错误可能发生在哪里。这就是为什么变量必须是最终的。这是针对上述问题的简单解决方法：

```
public void count()
{
    int x;

    final int w = x;

    new Thread(new Runnable()
    {
        public void run()
        {
            int z = w;

            while(z < 100)
            {
                z++;
                try
                {
                    Thread.sleep(1000);
                }catch(Exception e){}
            }
        }
     }).start();

     // do some more code...

     for(x = 0;x < 5;x++)
         for(int y = 0;y < 10;y++)
             System.out.println(myArrayElement[x][y]);
 } 
```

如果您想要更完整的解释，它有点像同步。Java 想要阻止您从多个线程中引用一个对象。这里是关于同步的一点点：

*   [http://docs.oracle.com/javase/tutorial/essential/concurrency/sync.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/sync.html)

希望这有帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T02:50:50.450

多线程的一个大“问题”，也是使用它的全部原因，是同时发生了多件事。突然之间，您的线程访问的任何不是线程本地的变量的值都可以随时更改。因此，您可能只是使用以下代码打印数字 1-10：

```
int x = 0;  //supposing that this was allowed to be non-final...
   private class myRun implements Runnable{

    @Override
    public void run() {
        for (int i=0; i<10; i++ ) {
            System.Out.Println( x++ );
        }
    }
} 
```

但实际上，如果该类中的其他代码更改了 x 的值，您最终可能会打印 230498 - 230508。x 的值*可能会*在循环中间发生变化。如果您不能依赖`x`某个值或保留您之前分配给它的值，那么在您的代码中使用它是徒劳的。如果变量的内容可以随时更改，为什么要使用变量？

Java 不仅完全禁止您使用它，还要求您制作它`final`。您可以“承诺”永远不会更改`x`另一个线程的值，但是为什么不`final`首先做到这一点并让编译器帮助您呢？当然，您只能访问分配给 的初始值`x`，但是仅仅能够访问变量的初始值总比不能使用它要好，这将有效地切断线程利用其余数据的能力你的班。

# php - Ajax 填充下拉菜单在 IE 中不起作用

> ID：11424755
> 
> 赞同：0
> 
> 时间：2012-07-11T02:34:30.117
> 
> 标签：php, javascript, ajax, cross-browser

这几天一直在和一些代码搏斗，一直没有进展。我需要帮助。这是我正在尝试做的事情：

*   手动填充两个下拉列表中的第一个
*   获取第一个的选定值，用它来查询数据库，用查询结果填充第二个下拉列表。
*   使用按钮触发另一个功能以生成 PDF。

我的网站上有这段代码，并且正在工作。问题是它只适用于 FF 和 Chrome。我无法在 IE 中填充下拉列表。为了测试，我已经将代码剥离到几乎没有，只是为了看看 IE 是否会填充第二个下拉列表，但它不会。下面是测试页面的代码：

测试.htm:

```
<html><head>
<script type="text/javascript">
function showCMB2(str)
{
if (str=="")
{
  document.getElementById("cmb2").innerHTML="";
  return;
}
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
{// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function()
{
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
  {
    document.getElementById("cmb2").innerHTML=xmlhttp.responseText;
  }
}

xmlhttp.open("GET","test.php?q="+str,true);
xmlhttp.send();
}
</script>
</head>
<body>

<form>
<select name="cmb1" id="cmb1">
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
</select>
</form>
<br />

<input type="button" value="Retrieve Data"   
 OnClick="showCMB2(cmb1.options[cmb1.selectedIndex].value)"> 
<br><br><br>
<span name="cmb2" id="cmb2"></span>
</body>
</html> 
```

测试.php：

```
<?php
echo '<select name="cmb2" id="cmb2">';
echo '<option value="cmb2">This is test</option>';
echo '</select>';
?> 
```

就像我说的，这在 FF 和 Chrome 中效果很好，但在 IE 中不行。id 为 cmb2 的 test.htm 中的跨度我已经尝试过制作它，甚至是 ，行为没有变化。任何人都可以提供任何见解吗？这看起来很简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:30:19.767

设置 innerHTML 在 IE8 中无法正常工作。而是使用 jquery 函数 $('#elementId').html(' .... ');

请注意，您必须具有 value= 属性，否则当 IE 将选项值传递给另一个 javascript 函数时，它将传递 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T14:19:42.367

您来自服务器的响应是尝试添加一个与您分配给 span 元素具有相同 id 的元素 - id 必须是唯一的。

# bash - 在 bash 中快速引用标准输出（即先前命令的输出）？

> ID：11424756
> 
> 赞同：8
> 
> 时间：2012-07-11T02:34:31.880
> 
> 标签：bash, shell, unix, command-line, readline

有没有办法快速（例如通过键盘快捷键等）引用它写入标准输出的上一个命令输出的输出？

例如，如果我这样做：

```
which rails 
```

它返回了`/usr/local/bin/rails`，然后我想在 textmate 中打开该文件，我可以像这样重新输入输出：

```
mate /usr/local/bin/rails 
```

但是有没有一种方法可以快速引用输出而无需重新输入？

注意：我知道我可以做到`mate $(which rails)`，但我特别希望参考标准输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T21:08:30.873

我使用带有历史参考的反引号：

```
$ which rails
/usr/local/bin/rails
$ mate `!!` 
```

实际上，我的编辑器（一个启动 gvim 的脚本）别名为`e`，所以它看起来更短：

```
$ e `!!` 
```

并且您始终可以绑定到热键（请参阅 bash 手册页以获取`bind`命令和`readline support`）。

此外，如果您可以使用剪切缓冲区（在 X 应用程序中用鼠标选择），类似下面的热键可能会很有用：

```
$ e $(xclip -out) 
```

该命令将使用命令行上剪切缓冲区中的任何内容启动编辑器。鉴于只需双击即可选择许多路径，因此可以非常快速地编辑选定的路径。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-18T21:01:36.267

你总是可以在反引号中运行命令：

```
mate `which rails` 
```

我不得不说，虽然感觉有点，呃，有风险。如果您的 PATH 已被篡改，从而返回与您真正需要的不同版本的 rails 怎么办？如果 which 什么都不返回怎么办？因此，请注意关闭所有这些错误情况，或以某种方式避免它们（例如，从配置文件中读取 rails 的路径，并编写一个为您构建该配置文件的工具）。

# c# - 通过 adb 启动应用程序

> ID：11424760
> 
> 赞同：0
> 
> 时间：2012-07-11T02:34:58.353
> 
> 标签：c#, .net, .net-2.0

我是安卓新手。我正在尝试通过 adb 启动相机应用程序。有人可以帮我解决这个问题。这是我的apk：

```
package:/system/app/Camera.apk=com.android.camera 
```

我在我的`adb: am start -n com.android.camera/.Camera`

它给了我错误：开始：`Intent { cmp=com.android.camera/.Camera }`

```
Error type 3 
```

错误：

```
Activity class {com.android.camera/com.android.camera.Camera} does not ex
ist. 
```

有人可以帮忙吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T02:44:38.867

试试`

```
am start -a android.intent.action.MAIN -n com.android.camera/.CameraEntry` 
```

来自：[如何从 adb shell 运行 android 相机应用程序？](https://stackoverflow.com/questions/7402158/how-can-i-run-android-camera-application-from-adb-shell)

# java - 套接字编程：302 Found

> ID：11424771
> 
> 赞同：0
> 
> 时间：2012-07-11T02:36:45.880
> 
> 标签：java, sockets

我尝试使用套接字连接到 www.google.com，但结果是：

HTTP/1.0 302 找到
位置：[http](http://www.google.com.ph/)
://www.google.com.ph/ 缓存控制：私有
内容类型：文本/html；字符集=UTF-8

这是我的Java测试代码：

```
 Socket sock = new Socket();  
    try {
        sock.connect(new InetSocketAddress("www.google.com", 80));
        InputStream in = sock.getInputStream();
        OutputStream out = sock.getOutputStream();

        out.write(new String("GET /\r\n").getBytes());

        byte[] readBuffer = new byte[4096];
        while(true) {
            int readSize = in.read(readBuffer);
            if(readSize < 1) break;
            System.out.println(new String(readBuffer, 0, readSize));
        }

        sock.close();
    } catch(Exception e) {

    } 
```

这有什么问题？顺便说一句，我只需要使用套接字来实现这一点。tnx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T02:43:54.223

当您在浏览器中访问 google.com 时，它是否会重定向到类似 google.ca 的内容？

我这样说是因为[http://en.wikipedia.org/wiki/HTTP_302](http://en.wikipedia.org/wiki/HTTP_302)表明 google.com 会被重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T02:45:54.880

`www.google.com`将根据您的 IP 位置重定向您。就您而言，在菲律宾，您将被重定向到`www.google.com.ph`. 尝试直接请求该域。

```
Socket sock = new Socket();  
try {
    sock.connect(new InetSocketAddress("www.google.com.ph", 80));
    InputStream in = sock.getInputStream();
    OutputStream out = sock.getOutputStream();

    out.write(new String("GET / HTTP/1.1\r\nHost: www.google.com.ph\r\n\r\n").getBytes());

    byte[] readBuffer = new byte[4096];
    while(true) {
        int readSize = in.read(readBuffer);
        if(readSize < 1) break;
        System.out.println(new String(readBuffer, 0, readSize));
    }

    sock.close();
} catch(Exception e) {
    e.printStackTrace();
} 
```

您需要指定 HTTP 版本（在本例中为 1.1）以及 Host 标头字段（该版本需要）。

您的请求未指定版本，因此它使用了 1.0。

# ruby-on-rails - 尽管存在链接，但 RSpec 应该 have_link 失败

> ID：11424776
> 
> 赞同：15
> 
> 时间：2012-07-11T02:37:44.753
> 
> 标签：ruby-on-rails, rspec

我有一个不断失败的 RSpec 测试。

```
subject { page }
visit user_path(user)
it { should have_link('Settings', href: edit_user_path(user)) } 
```

但是当我自己加载页面时，我可以看到链接运行良好。有任何想法吗 ？也没有拼写错误。

可以看到 RSpec 在测试中加载的页面吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-11T04:20:17.173

您`visit user_path(user)`没有在正确的上下文中执行。

尝试：

```
subject { page }
it do
  visit user_path(user) 
  should have_link('Settings', href: edit_user_path(user))
end 
```

或者：

```
subject { page }
before { visit user_path(user) }
it { should have_link('Settings', href: edit_user_path(user)) } 
```

如果您想查看 html，可以使用`save_and_open_page`声明。

# eclipse - eclipse indigo 自动完成不适用于 maven svn 项目

> ID：11424777
> 
> 赞同：0
> 
> 时间：2012-07-11T02:37:48.517
> 
> 标签：eclipse, svn, maven, autocomplete

我讨厌问同样的问题，这个问题似乎已经被问过很多次了，但是当我在 maven svn 项目上尝试使用 eclipse indigo 自动完成时，我得到了这个错误；给出的答案似乎都不起作用“这个编译单元不在java项目的构建路径上”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T02:51:39.543

问题是您没有在 SVN 中添加项目元数据。它是项目根目录中的 .project、.classpath 和 .settings 文件夹等文件。如果您仍然可以访问原始工作区中的项目，则可以找到这些文件并将它们添加到 SVN。否则，您将需要重新创建 Java 项目并导入源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T02:51:57.780

只是发布答案，以防有人丢失，就像我刚刚在我的 .project 文件中添加了下面的粗体部分

这仍然给我留下了无法解决的导入，因此自动完成无法一直工作 - 为了解决这个问题，我必须在构建路径中添加来自 maven 存储库的特定 jar - 似乎 eclipse 不会自动添加这些，即使我有构建路径中的 Maven 存储库变量

```
<?xml version="1.0" encoding="UTF-8"?>
    <projectDescription>
        <name>MYPROJECT</name>
        <comment></comment>
        <projects>
        </projects>
        <buildSpec>
               <!--Added this buildcommand section  -->
            <buildCommand>
                <name>org.eclipse.jdt.core.javabuilder</name>
                <arguments>
                </arguments>
            </buildCommand>
            <buildCommand>
                <name>org.eclipse.m2e.core.maven2Builder</name>
                <arguments>
                </arguments>
            </buildCommand>
        </buildSpec>
        <natures>
            <nature>org.eclipse.m2e.core.maven2Nature</nature>
               <!--Added this nature section  -->
            <nature>org.eclipse.jdt.core.javanature</nature>        
        </natures>
    </projectDescription> 
```

# java - 是否有一种安全且正确的方法可以使用 Java 语言在 Windows 中杀死进程树

> ID：11424781
> 
> 赞同：1
> 
> 时间：2012-07-11T02:38:39.440
> 
> 标签：java, multithreading, process

我的情况：

在我们的 Java EE 应用程序中有一个分析操作，这个功能是通过使用 java.lang.Runtime 执行一个批处理命令来实现的。最严重的是，这个操作需要很长时间，并且在执行过程中会遇到一些错误，然后整个进程树还活着，这无疑会降低应用程序和服务器的性能。所以我想知道任何人都可以提供一个安全和正确解决这个问题的想法。

而且我知道这是我们开发中非常常见的问题，如果这里提供示例，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T02:42:28.263

如果您启动应用程序

```
Process p = Runtime.exec(""); 
```

然后你可以打电话给

```
p.destroy(); 
```

除此之外，我认为如果在执行过程中发生任何错误时可以使批处理过程自行销毁，那将是很棒的。有关更多详细信息，请参阅[此问题](https://stackoverflow.com/a/6356410/813471)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T03:47:29.267

见[http://commons.apache.org/exec/apidocs/index.html](http://commons.apache.org/exec/apidocs/index.html)

接口 CommandLauncher 包含几个返回 Process 的 exec 方法。

但无论如何，您无法控制进程 ID：这是操作系统的责任。此外，标准的 java API 甚至不允许您检索进程 ID。在较旧的 java 版本中有一个技巧：Process 的实现包含可以使用反射检索的 int 字段 pid。但这在 1.6 版中有所改变。

# grails - Grails 数据库迁移变更日志问题

> ID：11424782
> 
> 赞同：3
> 
> 时间：2012-07-11T02:38:48.723
> 
> 标签：grails, database-migration

我正在努力遵循[本](http://blog.springsource.org/2011/08/17/countdown-to-grails-2-0-database-migrations/)教程。以下是我采取的步骤：

**1.)**我首先创建我的空变更日志。在运行此命令之前，我将开发设置`dbCreate`为`create`.

`grails dbm-create-changelog`

**2.)**然后我生成初始的 gorm 变更日志。教程说我应该使用`prod`标志，但由于我的生产数据库是空的，所以我放弃了`prod`标志。在我运行这个命令之前，我注释掉我的开发`dbCreate`设置。

`grails dbm-generate-gorm-changelog --add changelog-1.0.groovy`

此时我`migrations`的文件夹包含文件`changelog.groovy`和`changelog-1.0.groovy`. 我将`changelog-1.0.groovy`称为`changelog #1`

**3.)**我现在尝试使用刚刚创建的变更日志来初始化我的生产数据库。我按照链接到的教程中的说明设置了数据库迁移`updateOnStart`并`updateOnStartFileNames`在我的配置中。我的生产数据库存在，但为空（没有表）。我的生产环境的`dbCreate`设置已被注释掉。

`grails prod run-app`

**问题：**

乍一看，这似乎有效，但是**当我运行`grails prod dbm-gorm-diff`并生成时，`changelog #2`我看到了不应该存在的更改。与生产数据库的当前状态相比，我还可以看到变更集是合法的。这意味着生产数据库未使用`changelog #1`.** 因为我什么都没改变，所以不应该存在任何变化。我跑完`grails prod dbm-gorm-diff`就跑了`grails prod run-app`。

中有五个变更集`changelog #2`。我已经验证所有这些变更集都在`changelog #1`. 前四个变更集`changelog #2`都有`unique: "true"`。这四个变更集也是唯一包含`unique: "true"`在`changelog #1`. 我仍然无法解释为什么存在第五个变更集。[尽管它是针对Spring Security 插件](http://grails.org/plugin/spring-security-core/)`user_role`使用的表，但我可以看到它并没有什么特别之处。这里是：`changelog #2`

```
databaseChangeLog = {

    changeSet(author: "typoknig (generated)", id: "1341970550063-1") {
        createIndex(indexName: "authority_unique_1341970549765", tableName: "role", unique: "true") { // This table is for the Spring Security plugin's "Role" domain class.
            column(name: "authority")
        }
    }

    changeSet(author: "typoknig (generated)", id: "1341970550063-2") {
        createIndex(indexName: "name_unique_1341970549772", tableName: "foo", unique: "true") { // This is just a table for one of my domain classes that happens to have a field with a unique constraint.
            column(name: "path")
        }
    }

    changeSet(author: "typoknig (generated)", id: "1341970550063-3") {
        createIndex(indexName: "name_unique_1341970549774", tableName: "bar", unique: "true") { // This is just a table for one of my domain classes that happens to have a field with a unique constraint.
            column(name: "name")
        }
    }

    changeSet(author: "typoknig (generated)", id: "1341970550063-4") {
        createIndex(indexName: "username_unique_1341970549777", tableName: "user", unique: "true") { // This table is for the Spring Security plugin's "User" domain class.
            column(name: "username")
        }
    }

    changeSet(author: "typoknig (generated)", id: "1341970550063-5") {
        createIndex(indexName: "FK143BF46A5FBC0B79", tableName: "user_role") { // This table is for the Spring Security plugin's "UserRole" domain class.
            column(name: "role_id")
        }
    }
} 
```

**我需要做些什么来确保我的生产数据库已正确初始化？**

**更新＃1：**

我不知道为什么，但`createIndex`不使用`unique: "true"`. 对于前四个变更集，我只是移动`unique: "true"`到最初在`changeset #1`. 这只剩下第五个变更集`changelog #2`需要处理。我仍然没有看到变更集有任何问题，所以我不明白为什么它没有被应用。

**更新#2：**

我发现我可以将所有对`createIndex`单个变更集的调用移出到创建表（索引所属）的相应变更集中。 **这似乎解决了我所有的问题。** 除非有人能提供一个令人信服的理由不这样做，否则我想我会将这部分作为我的变更日志生成工作流程的一部分。例如这些变更集：

```
changeSet(author: "typoknig (generated)", id: "1342037835503-31") {
    createTable(tableName: "user_role") {
        column(name: "role_id", type: "bigint") {
            constraints(nullable: "false")
        }

        column(name: "user_id", type: "bigint") {
            constraints(nullable: "false")
        }
    }
}

changeSet(author: "typoknig (generated)", id: "1342037835503-103") {
    createIndex(indexName: "FK143BF46A4E6CF59", tableName: "user_role") {
        column(name: "user_id")
    }
}

changeSet(author: "typoknig (generated)", id: "1342037835503-104") {
    createIndex(indexName: "FK143BF46A5FBC0B79", tableName: "user_role") {
        column(name: "role_id")
    }
} 
```

将出现这个变更集：

```
changeSet(author: "typoknig (generated)", id: "1342037835503-31") {
    createTable(tableName: "user_role") {
        column(name: "role_id", type: "bigint") {
            constraints(nullable: "false")
        }

        column(name: "user_id", type: "bigint") {
            constraints(nullable: "false")
        }
    }
    createIndex(indexName: "FK143BF46A5FBC0B79", tableName: "user_role") {
        column(name: "role_id")
    }
    createIndex(indexName: "FK143BF46A4E6CF59", tableName: "user_role") {
        column(name: "user_id")
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T15:04:28.483

变更集可以依赖于目标数据库。例如，grails.org 站点曾经在 MySQL 中使用 MyISAM 表，并且`dbm-gorm-diff`总是会添加一些`createIndex`变更集，即使它们是在以前的变更集中定义的。

我真的不明白将`createIndex`声明移动到`createTable`变更集中会有什么不同。您能否说明这样做如何解决了您的所有问题？

# algorithm - 什么算法可以从多个集合中的每个集合中找到包含至少一个元素的最小集合

> ID：11424783
> 
> 赞同：3
> 
> 时间：2012-07-11T02:39:02.797
> 
> 标签：algorithm, set, graph-algorithm

所以，我有几个集合，我需要找到最少数量的集合，其中包含所有集合中的至少一个元素。为了更具体，我有一组服务器名称，每个服务器都有一个服务窗口。给定特定的持续时间，我想找到覆盖所有给定服务器的最小服务窗口集。

我已经有代码为每台所需的机器生成所有不重叠的 N 分钟时间段的列表。我打算通过生成所有可能的组合来强制它，并选择具有最少数量的唯一元素的组合，但这似乎非常低效，即使我首先将集合减少到所有主机的唯一窗口（尤其是更多比几个系统）。

然后我想我会做一些事情，比如按适合每个时间槽的主机数量对时间槽进行排序，选择主机数量最多的槽，然后为未分配的主机重新生成所有槽的列表，选择最多流行的插槽，重新计算等，直到所有主机都被考虑在内。虽然这会给我一个答案，但它并没有真正让我有机会选择最平衡的集合 - 次要目标是找到一组服务窗口，每个服务的主机数量的标准偏差最小窗户。因此，如果我有 100 台主机，我想优先选择每个窗口提供大约 50 台主机的窗口，而不是执行上述算法可能找到的三个“98、1 和 1”窗口。但如果我的选项是“98, 1, 1” 或 10 个窗口，每个窗口 10 个。我宁愿做这三个。

无论如何，似乎某种图形可以用来表示这个问题，但在我的 CS 路径中，我更多地关注硬件而不是软件，解决图形问题从来都不是我的强项。所以我什至会感谢一些关于在哪里阅读更多关于这个特定问题或适当搜索词的建议。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:25:42.933

这是集合覆盖优化问题，它是 NP 难的。*这意味着在最坏的情况下*你不能比蛮力做得更好。也就是说，您可以快速找到一些组合安排。但是您绝对可以简化问题 - 特别是使用真实世界的数据。

我将从对数据进行几次转换开始。把你的集合想象成一个布尔网格。每列代表一个服务器，每一行代表一个集合。在一个单元中为真意味着服务器存在于该集合中。

1.  您可能有多个服务器属于完全相同的集合。也就是说，这个矩阵中很可能会有相同的列。您可以删除任何重复的列。因此，如果 A 和 B 恰好具有保存服务窗口，则获取包含 A 的覆盖也将包含 B。您可以通过按此列中的值对每个服务器进行哈希处理来快速完成此操作，然后检查同一哈希存储桶中的每个服务器相同的集合成员。只保留一台服务器，并创建一个“随行”服务器列表。例如。从现在开始，这些服务器将被视为您的集合中的单个成员。

2.  删除作为单个其他集合的子集的任何集合。例如，如果您有 {1,2,3} 和 {1,2}。从问题中删除 {1,2}。为您的覆盖物选择集合时，{1,2,3} 始终是更好的选择。所以转储子集 - 例如删除所有这些行。

3.  遍历每台服务器（例如每一列）。每台服务器只存在于一个集合中（例如列中的一个为真），那么该集合*必须*是解决方案的一部分。因此，将该集合添加到解决方案中，并将其从矩阵中删除。现在您可以从矩阵中删除已删除集合中的任何列。假设服务器 A 仅存在于集合 1 中，即 { A,B,C}。井集 1*必须*是解决方案的一部分。如果是，那么我自动知道服务器 A、B、C 将自动被覆盖。所以我从矩阵和 A、B、C 的列中删除了第 1 组。

4.  删除每组中的所有服务器。他们将在任何解决方案中。

在此之后，除非您的数据集是“反常的”，否则您的真正问题集应该会大大减少。现实世界的数据可能会足够有序，以至于一堆行和列都不会出现问题。

我敢肯定，有一些很好的方法可以找到答案，在实践中，这些方法可以让您在比蛮力时间更好的真实世界数据中获得非常接近最佳覆盖。

我会考虑 DP 或 A-Star 搜索解决方案。我没时间了。我以后可能会画出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T03:52:09.573

考虑与每个时间段相关联的单独服务器集。您正在寻找构建这些集合的一个子集，使其联合包含所有服务器。这被称为[*集合覆盖问题*](http://en.wikipedia.org/wiki/Set_cover_problem)，已被证明是 NP 完全的。这意味着您无法比您在问题中描述的蛮力方法做得更好，因此请尽可能减少来自所有主机的唯一窗口数量。

* * *

PS我不确定为什么[templatetypedef](https://stackoverflow.com/users/501557/templatetypedef)删除了他的答案-我认为这是正确的。

# java - 如何通过 API 理解应用程序

> ID：11424789
> 
> 赞同：0
> 
> 时间：2012-07-11T02:40:07.153
> 
> 标签：java, android, api

我最近开始学习如何为 Android 编写应用程序。在求助于教程系列之前，我尝试使用 Android API 并通过它进行学习。问题是它相当大，并且有很多新的方法和对象。一种方法返回一个对我来说全新的对象，所以我去那个类，它有其他方法可以返回其他对象，它扩展了也是新的类......它只是一个巨大的系统。
但是一定有人在教程之前就已经想出了如何为 Android OS 编程（比如说，后来最终制作教程的人）。那么人们如何学习和理解从哪里开始/如何在像 Android 这样庞大而复杂的东西中编程呢？我怀疑他们使用 API，但您如何理解所有这些？
我想一个更好的问题是，查看新 API 的一些好方法是什么，以及如何理解它的任何提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T02:58:00.390

首先，当你想使用一个新的 API 时——你需要问这个问题

1.  您想学习 API 的基础知识吗？
2.  您有使用 API 完成的特定任务吗？

## 您想学习 API 的基础知识吗？

学习 API 的基础知识从了解框架和做出的架构决策开始。如何启动开发。基本上，没有开发人员指南就不可能完全学习框架 - API 是为方法和类提供文档的东西。要鸟瞰，您必须通过开发人员指南进行学习。

## 您有使用 API 完成的特定任务吗？

假设您要创建一个获取一些数据并将该数据插入 SQLITE 数据库的表单。你可以从你已经知道的开始。与数据库连接、用户界面一样。

而且 Android 或 iOS 不像传统的 API - 你必须知道如何运行、开发、设计和测试应用程序。如果它是像[Apache Commons Lang](http://commons.apache.org/lang/)这样的简单 API，您可以通过 API 文档轻松学习。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T03:54:04.970

每当我想了解新的 API 时，我都会购买一本书。

例如，我买了一本书叫《Android 入门》。

这将为您介绍android。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T06:06:10.940

android SDK 的示例文件夹中的 ApiDemo 为您提供了如何创建 apk 和使用 SDK API 的优秀示例。

在我阅读了 SDK 指南中的几个介绍页面之后，ApiDemo 是我检查最多的参考。

但。android NDK 编程非常不同。您至少需要了解 jni 才能做任何事情

# objective-c - 在目标 C 中使用 CFSTR() 和 UTF8String

> ID：11424790
> 
> 赞同：1
> 
> 时间：2012-07-11T02:40:54.240
> 
> 标签：objective-c

将 NSString 转换为常量时，我​​通常使用

```
[@"..." UTF8String]; 
```

我只是在查看有关地址簿编程的苹果文档，我看到他们使用宏

```
CFSTR("..."); 
```

出于好奇，我只是想知道两者之间有什么不同吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T03:02:15.747

`CFSTR("...")`本质上是`@"..."`. 实际上，您可以执行以下操作：

```
const char *utf8dots = [(NSString *)CFSTR("...") UTF8String]; 
```

您将获得与使用第一行代码相同的结果。

理论上，`CFSTR()`创建一个常量`CFString`，而`@""`创建一个常量`NSString`。实际上，这两种类型是可以互换的。

这有帮助吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T03:00:44.410

那些创造了完全不同的东西。一个给你一个 CFStringRef，它是一个对象（嗯，一个 CFType，但它与对象兼容）。另一个给你一个 char*，它只是一个字符数组，根本不是一个对象。例如，您可以这样做：

```
[(NSString *)CFSTR("foo") UTF8String]; 
```

那将是完全有效的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T02:47:55.270

前者实际上并没有创建任何东西，它只是返回`const char`一个 NSString（运行时函数）的内部指针。后者将创建一个编译时常`CFStringRef`量值。它不能与变量一起使用，因为这些变量在编译时不可用。

**编辑**我意识到最后一句话有点含糊。您可以将 的结果*用作*`CFSTR`变量，但不能将变量作为*参数*传递。

# python - Python 2.7.3 urllib2 打开 url 失败

> ID：11424795
> 
> 赞同：0
> 
> 时间：2012-07-11T02:41:31.870
> 
> 标签：python, urllib2

我正在编写一个 python 脚本来在 Window XP 上使用 Python 2.7.3 测试 URL。我的脚本适用于其他 URL，但总是与 URL [http://75418.zumba.com](http://75418.zumba.com)崩溃 错误消息是 urllib2.URLError urlopen error Errno 11001 getaddrinfo failed

把这个 URL 放到 Firefox 上，真正的 URL 是[https://www.zumba.com/en-US/profiles/75418/](https://www.zumba.com/en-US/profiles/75418/)

非常感谢您的意见。

这是我的脚本

```
import httplib,urllib2
httplib.HTTPConnection.debuglevel = 1
request = urllib2.Request("http://75418.zumba.com")
request.add_header("Accept", "text/html,*/*")
request.add_header("Connection", "Keep-Alive")
request.add_header( 'Referer', "http://75418.zumba.com" )
opener = urllib2.build_opener()
f = opener.open(request)
print f.url 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T02:50:32.103

这个对我有用。它必须与您使用的 DNS 服务器有关。（我的是谷歌的 - 8.8.8.8/8.8.4.4）

```
>>> import httplib,urllib2
>>> httplib.HTTPConnection.debuglevel = 1
>>> request = urllib2.Request("http://75418.zumba.com")
>>> request.add_header("Accept", "text/html,*/*")
>>> request.add_header("Connection", "Keep-Alive")
>>> request.add_header( 'Referer', "http://75418.zumba.com" )
>>> opener = urllib2.build_opener()
>>> print f.url
https://www.zumba.com/en-US/profiles/75418/ 
```

# android - 如何在会话之间为 android 保存 google 身份验证

> ID：11424801
> 
> 赞同：1
> 
> 时间：2012-07-11T02:42:09.170
> 
> 标签：android, google-app-engine

我的应用使用谷歌身份验证登录应用引擎后端。当我成功登录我的 DefaultHttpClient 从我的 App Engine 域中获取一个 cookie 时，我想知道是否有可能以某种方式保留这个 cookie，然后在应用程序在稍后重新启动的情况下重新应用它以保存登录每个应用程序启动的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T02:54:26.813

是的你可以。在 Android 中，我使用 App Engine Client 与应用引擎应用程序进行身份验证并 `HTTPConnection`用于设置 Cookie

```
HttpURLConnection connection;//Init connection here
connection.addRequestProperty("Cookie", mCookie); 
```

登录成功后，mCookie 存储在*SharedPreferences中。*

注意：在我的项目中，使用其他方法（例如 HttpClient）为每个请求设置 cookie 很困难，当我使用 HttpURLConnection 时效果很好。

提示：您应该使用 Appstats 对此进行调试，以查看 cookie 是否实际发送到服务器。

祝你好运

# python - 保持无限计数的简单方法

> ID：11424808
> 
> 赞同：9
> 
> 时间：2012-07-11T02:43:49.477
> 
> 标签：python

有什么好方法可以无限计数？我正在尝试编写一个条件，它将一直持续到数据库中没有值为止，因此它将从 0 迭代到理论上的无穷大（当然是在 try 块内）。

我如何无限地向上计数？还是我应该使用其他东西？

我正在寻找其他语言中类似于 i++ 的东西，它会一直迭代直到失败。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-11T02:45:14.240

看看[itertools.count()](http://docs.python.org/library/itertools.html#itertools.count)。

从文档：

> `count(start=0, step=1)`--> 计数对象
> 
> 创建一个返回以 . 开头的均匀间隔值的迭代器`n`。相当于：

```
def count(start=0, step=1):
    # count(10) --> 10 11 12 13 14 ...
    # count(2.5, 0.5) -> 2.5 3.0 3.5 ...
    n = start
    while True:
        yield n
        n += step 
```

例如：

```
import itertools

for i in itertools.count(13):
   print(i) 
```

将生成一个从 13 开始的无限序列，步长为 +1。而且，我以前没有尝试过，但你当然也可以倒计时：

```
for i in itertools.count(100, -5):
    print(i) 
```

从 100 开始，并为每个新值不断减去 5 ....

* * *

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-20T02:49:55.527

这比其他用户提供的代码要小一些！

```
x = 1
while True:
    x = x+1
    print x 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-10T23:40:13.497

更短一点，使用迭代器并且没有库：

```
x = 0
for x in iter(lambda: x+1, -1):
    print(x) 
```

但它需要当前范围内的变量。

# java - Android XML文件不保存

> ID：11424812
> 
> 赞同：1
> 
> 时间：2012-07-11T02:44:07.273
> 
> 标签：java, android, xml, dom

我正在使用 LibGDX 编写游戏，并且正在尝试保存 XML 文件，但总是出现异常（java.io.FileNotFoundException: /data/Slugfest/teams/Team1.xml: open failed: ENOENT (No such文件或目录））保存文件时。此代码保存文件。

```
public void save() {
    try {
        TransformerFactory transformerFactory = TransformerFactory.newInstance();
        Transformer transformer = transformerFactory.newTransformer();
        DOMSource source = new DOMSource(doc);
        StreamResult result;

        if (Gdx.app.getType() == ApplicationType.Android) {
            result = new StreamResult(new File("/data/Slugfest/teams/" + name + ".xml"));
        } else {
            result = new StreamResult(new File(name + ".xml"));
        }
        transformer.transform(source, result);
        Gdx.app.log("Slugfest", "File saved.");
    } catch (TransformerException tfe) {
        Gdx.app.log("Slugfest", tfe.getLocalizedMessage());
    }
} 
```

顺便说一句，我的清单文件包含 WRITE/READ_EXTERNAL_STORAGE 权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T03:11:15.527

您需要创建要保存到的目录。您应该检查它是否存在，如果没有，请创建它。像这样的东西：

```
if (Environment.getExternalStorageState() == null) {
                directory = new File(Environment.getDataDirectory()
                        + "/RobotiumTestLog/");
                photoDirectory = new File(Environment.getDataDirectory()
                        + "/Robotium-Screenshots/");
                /*
                 * this checks to see if there are any previous test photo files
                 * if there are any photos, they are deleted for the sake of
                 * memory
                 */
                if (photoDirectory.exists()) {
                    File[] dirFiles = photoDirectory.listFiles();
                    if (dirFiles.length != 0) {
                        for (int ii = 0; ii <= dirFiles.length; ii++) {
                            dirFiles[ii].delete();
                        }
                    }
                }
                // if no directory exists, create new directory
                if (!directory.exists()) {
                    directory.mkdir();
                }

                // if phone DOES have sd card
            } else if (Environment.getExternalStorageState() != null) {
                // search for directory on SD card
                directory = new File(Environment.getExternalStorageDirectory()
                        + "/RobotiumTestLog/");
                photoDirectory = new File(
                        Environment.getExternalStorageDirectory()
                                + "/Robotium-Screenshots/");
                if (photoDirectory.exists()) {
                    File[] dirFiles = photoDirectory.listFiles();
                    if (dirFiles.length > 0) {
                        for (int ii = 0; ii < dirFiles.length; ii++) {
                            dirFiles[ii].delete();
                        }
                        dirFiles = null;
                    }
                }
                // if no directory exists, create new directory to store test
                // results
                if (!directory.exists()) {
                    directory.mkdir();
                }
            } 
```

这里我检查是否有SD卡，如果没有，我保存在本地，否则，我保存到SD。我还检查文件，如果存在则删除。您可能不需要它，但这是一个全面的算法，应该可以满足您的需要。你要什么就拿。

希望能帮助到你。

# java - 如何从线程返回值

> ID：11424814
> 
> 赞同：0
> 
> 时间：2012-07-11T02:44:46.017
> 
> 标签：java, android, multithreading, return, return-value

我在一个新线程（实现可运行的类，如下所示）中拉入一个 rss 提要，我想使用从 rss 提要中获得的字符串并将它们返回给主类。主类只是像这样运行线程

`new Thread(new RssParse()).start();`

我很难找到将这些从 xml 中剪切出来的字符串返回给主类的方法。感谢任何帮助。

```
public class RssParse implements Runnable  {

            private static final String MY_DEBUG_TAG = "pfaff";

            public void run(){

            System.out.println("1");
            URL iotd;
            try{

                iotd = new URL("http://www.nasa.gov/rss/image_of_the_day.rss");//set URl
                BufferedReader in;//new BufferedReader
                in = new BufferedReader(new InputStreamReader(iotd.openStream()));//get rss

                XmlPullParserFactory factory;
                factory = XmlPullParserFactory.newInstance();//new factory

                factory.setNamespaceAware(true);
                XmlPullParser xpp;
                xpp = factory.newPullParser();
                xpp.setInput(in);

                int eventType;
                eventType = xpp.getEventType();

                System.out.println(eventType+"!!!!!!!!!!!!!!!!");

            while(eventType!=XmlPullParser.END_DOCUMENT){

                switch(eventType){

                case XmlPullParser.START_DOCUMENT:
                    break;
                case XmlPullParser.START_TAG:
                    String tagName=xpp.getName();
                    System.out.println(tagName+" "+xpp.getDepth());
                    if(tagName.equals("title")&& xpp.getDepth()==4){//depth is specific to this certain rss feed, there are multiple tags with the same names
                        String title=xpp.nextText();// I want to return title and a few other strings but can't figure out how to do this when dealing with threads.
                        System.out.println(title);
                    }

                    break;

                }
                eventType=xpp.next();
            }//switch

                in.close();//close BufferedReader
            } catch (MalformedURLException e){
                e.printStackTrace();
            }catch(XmlPullParserException e1){
                e1.printStackTrace();
            }catch(IOException e2){
                e2.printStackTrace();
            }           
      }//method

}//class 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T02:52:53.023

我想建议[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。您必须在子类中覆盖`doInBackground(Params...)`和AsyncTask 。`onPostExecute(Result)`

教程：[Android 线程、处理程序和 AsyncTask - 教程](http://www.vogella.com/articles/AndroidPerformance/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T03:31:54.780

您可以使用处理程序将其发布到主线程

```
 Runnable runnable = new Runnable() 
 {
  @Override
  public void run() {
   for (int i = 0; i <= 10; i++) {
    handler.post(new Runnable() {
        @Override
            public void run() {
                progress.setProgress(value);
            }
        });
    }
} 
```

};

# android - 如何以编程方式将表格数据添加到 Android Widget

> ID：11424816
> 
> 赞同：0
> 
> 时间：2012-07-11T02:44:50.103
> 
> 标签：android, widget

我一直在搜索网络和 Stack Overflow，但我似乎找不到清楚地解释我正在尝试做的事情的答案：

我想在我的小部件中显示一个表格，我知道小部件仅限于几种布局类型，所以我认为最简单的方法是制作垂直线性布局，然后将每一行添加为水平将文本视图作为每个单元内的单元格的线性布局。在循环编码后，我似乎无法弄清楚如何将线性布局放入小部件......

这是一个更直观的想法：

```
<Vertical linear layout>
 <text view "title">
 <some number of LinearLayouts horizontally - H>
   <some number of textviews>
 </ll -h>
 <text view "footer">
</ll - v> 
```

我显然对 Android 很陌生，所以任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:32:48.037

这是我让它工作的一种方法：

```
rv2 = new RemoteViews(this.getApplicationContext()
                                    .getPackageName(), R.layout.datarow);
                            if(tr.hasClass("title"))
                                i = 1;
                            else
                                i = 0;
                            for (Element td : tds) {
                                if (td.getElementsByTag("a").size() > 0) {
                                    Elements anchors = td.getElementsByTag("a");
                                    td.text(anchors.get(0).text());
                                    rv2.setTextViewText(R.id.textView2,
                                            td.text());
                                } else {
                                    switch (i) {
                                    case 0:
                                        rv2.setTextViewText(R.id.textView1,
                                                td.text());
                                        i++;
                                        break;
                                    case 1:
                                        rv2.setTextViewText(R.id.textView3,
                                                td.text());
                                        i++;
                                        break;
                                    case 2:
                                        rv2.setTextViewText(R.id.textView4,
                                                td.text());
                                        i++;
                                        break;
                                    case 3:
                                        rv2.setTextViewText(R.id.textView5,
                                                td.text());
                                        i++;
                                        break;
                                    case 4:
                                        rv2.setTextViewText(R.id.textView6,
                                                td.text());
                                        i++;
                                        break;
                                    default:
                                        break;
                                    }
                                }
                            }
                            remoteViews.addView(R.id.layout, rv2); 
```

它不漂亮，我不喜欢使用开关，但我不知道如何遍历文本视图。如果有人能给我一个更好的答案，我会再开一段时间。

# ruby-on-rails - Ruby on Rails Github gem 错误

> ID：11424817
> 
> 赞同：0
> 
> 时间：2012-07-11T02:45:07.487
> 
> 标签：ruby-on-rails, ruby, github, gem

当我尝试使用安装了 github gem 的 rails 应用程序时收到以下错误消息。我正在运行 ruby​​ 1.9.3p194

堆栈跟踪：

```
ArgumentError (wrong number of arguments (1 for 0)):
  github (0.7.2) lib/github/extensions.rb:16:in `try'
  actionpack (3.2.6) lib/action_controller/metal/params_wrapper.rb:235:in `_wrapper_enabled?'
  actionpack (3.2.6) lib/action_controller/metal/params_wrapper.rb:195:in `process_action'
  activerecord (3.2.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (3.2.6) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.6) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.6) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.6) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.6) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.6) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.6) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.6) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.6) lib/action_dispatch/routing/route_set.rb:600:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.1) lib/rack/etag.rb:23:in `call'
  rack (1.4.1) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
  rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.6) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.6) lib/active_support/callbacks.rb:405:in `_run__2208473712550629547__call__725709355250274022__callbacks'
  activesupport (3.2.6) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.6) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.6) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.6) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.6) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.6) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/static.rb:62:in `call'
  railties (3.2.6) lib/rails/engine.rb:479:in `call'
  railties (3.2.6) lib/rails/application.rb:220:in `call'
  rack (1.4.1) lib/rack/content_length.rb:14:in `call'
  railties (3.2.6) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
  /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /usr/local/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.6'

# RAILS REQUIRED GEMS
gem 'jquery-rails'  #the latest jquery, for rails

# RAILS REQUIRED ASSET PIPELINE GEMS
group :assets do
  gem 'twitter-bootstrap-rails'   # bootstrap styling
  gem 'coffee-rails', '~> 3.2.1'  # coffeescript compiler, for rails
  # gem 'jquery-ui-rails'
  gem 'sass-rails',   '~> 3.2.3'  # scss compiler, for rails
  gem 'uglifier',     '>= 1.0.3'  # js compressor, for rails
end

# UNIVERSAL GEMS
# frontend
gem 'lazy_high_charts'            # google charts api client
gem 'kaminari'                    # pagination
gem 'rails-boilerplate'           # reduce boilerplate code for cross-platform html/css
# backend
gem 'active_attr'                 # treat virtual attributes as db attributes in rails scopes
gem 'annotate', :git => 'git://github.com/jeremyolliver/annotate_models.git', :branch => 'rake_compatibility' # see schema in your models
gem 'nested_form'                 # easy form helpers+ajax for related objects
gem 'request-log-analyzer'        # use rake to inspect log files
gem 'unicorn'                     # lightweight multi-worker http server
# feature gems
gem 'acts_as_commentable'         # commenting framework
gem 'carrierwave'                 # image uploads
gem 'delayed_job'                 # cron your jobs
gem 'github'                     # github api client
gem 'sunspot_rails'               # solr-search engine support

group :development, :test do
  gem 'mysql2'        # specified seperately in case you'd rather use sqlite3
  gem 'rspec-rails'   # rspec testing
  gem 'sunspot_solr'  # runs solr search engine without needing to download/configure it
  gem 'syntax_fix'    # rails generators still use ruby 1.8 hash styles, which will eventually deprecate...
end

group :development do
  gem 'awesome_print'       # pretty print in irb to the max
  gem 'capistrano'          # deployment tool
  gem 'fancy_irb'           # live result printing in irb
  gem 'hirb'                # table/tree irb object views
  gem 'nifty-generators'    # view generators
  gem 'pry'                 # live code inspection irb alternative
  gem 'pry-doc'             # documentation for pry
  gem 'wirb'                # irb colorization
end

group :test do
  gem 'capybara'              # client-side testing
  gem 'database_cleaner'      # treat db interactions as rollbackable, and other handy things
  gem 'factory_girl_rails'    # fixture factories
  gem 'launchy'               # call non-cross platform commands from ruby
  gem 'mocha'                 # mimic object interfaces
  gem 'rspec-rails-mocha'     # mocha-rspec hook
  gem 'turn'                  # Pretty print for test pass/fail summaries
end

group :production, :staging do
  gem 'mysql2'          # specified seperately in case you want to use sqlite3 for dev
end 
```

有什么我需要的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T21:11:04.697

octokit gem 是 Github v3 API gem。这个 gem 在我的 rails 应用程序中安装并运行良好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:26:50.053

作为与提供许多功能（例如请求分页）的 GitHub API v3 集成的替代方法，您可以使用[github_api](https://github.com/peter-murach/github) gem

# ios5 - 导航回 UITableView 时更改 NSIndexPath

> ID：11424821
> 
> 赞同：0
> 
> 时间：2012-07-11T02:45:30.157
> 
> 标签：ios5, uitableview, nsindexpath

**场景**(iOS 5)
我目前有一个 UITableView。
它有 30 个表行
用户决定点击第 5 行
一个 ViewController 被推送。
在这个 ViewController 中，用户已经向前导航了 10 个项目。
当他们导航回 UITableView 时，他们在第 5 行突出显示

**我想要什么我**
希望 UITableView 突出显示表格第 15 行并显示在视图中，因为它们在 ViewController 中已经向前移动了 10 行。

**我发现**
我认为当我返回导航时我可以将 NSIndexPath 行属性修改为 15。但是documentaiton声明它是**只读的**。

```
row  
An index number identifying a row in a section of a table view. (read-only)  

@property(readonly) NSInteger row  

Discussion
The section the row is in is identified by the value of section. 
```

关于我如何解决这个问题的任何反馈？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T03:17:43.803

如果您只想更改选择，请使用以下`UITableView`方法：

```
- (void)
selectRowAtIndexPath:(NSIndexPath*)indexPath
animated:(BOOL)animated
scrollPosition:(UITableViewScrollPosition)scrollPosition; 
```

您无需修改​​特定的索引路径即可调用该 API，只需创建一个新的即可；例如：

```
NSIndexPath* indexPath = [NSIndexPath indexPathForRow:row inSection:section]; 
```

# javascript - 我的 for 循环没有产生我所期望的。

> ID：11424823
> 
> 赞同：-1
> 
> 时间：2012-07-11T02:45:54.370
> 
> 标签：javascript, arrays, for-loop

这应该运行的方式是改变彩色图像。图像更改将是数组中的位置。这看起来像是一种永远重复的动画 .gif。

```
<script>
var images = new Array(4);

images[0] = new Image(50, 50);
images[0].src = "0.gif";
images[1] = new Image(50, 50);
images[1].src = "1.gif";
images[2] = new Image(50, 50);
images[2].src = "2.gif";
images[3] = new Image(50, 50);
images[3].src = "3.gif";
images[4] = new Image(50, 50);

for(time=0; time>4; time++){
document.View.src = images[time]
} 
```

```
<body>
<img src = "0.gif" name = "View" height = 50 width = 50>
</body> 
```

显然我做错了什么，因为我得到的只是数组中的第一个图像，它永远不会改变。我是javascript的新手，所以我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T02:46:45.957

你要：

```
for (time = 0; time < 4; time++) { 
```

你有`time > 4`，但你的初始值为0，所以你的条件一开始就是假的。for 循环的主体永远不会运行，因此图像永远不会改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T03:17:12.413

只是一些评论......</p>

```
> var images = new Array(4); 
```

您初始化长度为 4 的数组，然后添加 5 个成员，因此长度为 5（项目 0 到 4）。不要费心设置长度，只需使用文字初始化数组：

```
var images = []; 
```

此外，还有一个`document.images`包含文档中所有 img 元素的集合，因此使用同名的全局变量可能不是一个好主意。也许`imgArray`会是一个更好的名字。

```
> document.View.src 
```

使用元素名称作为文档对象的属性来访问元素是不应该使用的非标准化功能。HTML5 从 img 属性列表中删除了*name*，但在讨论集合时保留了它（也许我们应该回到 HTML 4.01 和 DOM 3）。

您可以改为使用图像集合：

```
document.images.View.src 
```

或者如果你是游戏，HTML5[`HTMLAllCollection`](http://www.w3.org/TR/html5/common-dom-interfaces.html#htmlallcollection-0)

# mongodb - 为什么我的 MongoDB 副本一直落后？

> ID：11424828
> 
> 赞同：10
> 
> 时间：2012-07-11T02:47:04.817
> 
> 标签：mongodb, replication

昨晚在将集合转换为上限集合时，我的辅助设备的运行时间开始落后于主设备。它缓慢地前进，每隔几分钟几秒钟，最终掉出主节点的 oplog 窗口。根据[此处](http://www.mongodb.org/display/DOCS/Resyncing+a+Very+Stale+Replica+Set+Member)的说明，我在辅助节点上停止了 mongod，删除了所有数据文件，然后重新启动它，尽管我忘记锁定主节点的写入。Secondary 经历了它的初始化阶段，这花费了相当长的时间，最终恢复了业务，但是当我登录时，复制现在更落后了。

毕竟，这是云，我创建了我的主映像（应该复制所有数据），尽管当时我无法运行 db.fsyncLock()，因为它正在执行一些写入操作。新镜像完成，我基于该镜像启动了一个新服务器，将其添加到我的副本集中，删除旧的辅助，生活很美好，对吧？不完全是 - 新的次要落后了大约一个小时，并且在一天中（和今晚）最终到达落后 14 小时的地步（尽管奇怪的是仍然在 oplog 窗口内）。

我从“重新同步过时的会员页面”开始下一步。关闭两台服务器上的 mongod，gzip 并将我的数据文件夹从主服务器复制到辅助服务器，解压缩，将它们都启动，db.fsyncLock() 我的主服务器。让我大吃一惊的是，即使使用相同的数据，在初始化后，我的辅助设备也说它落后了 1 小时。我将它重新添加到副本集中，它很快就落后了 5 分钟。

都很好，对吧？不 - 向前闪，二级正在缓慢推进，现在落后了 20 分钟。Mongostat 的次要锁定在 95+ %，iostat -xm 2 没有显示任何疯狂的情况 - 主要当前因不进行写入而处于空闲状态，次要绝对没有做太多事情（0.04 wMB/秒）。不确定是否值得一提，但主要目前感觉~~狗缓慢~~无响应地登录到 mongo shell 等。

什么给了，蒙戈？为什么你赶不上？我在试图让我的中学赶上时做错了什么？

**编辑** 回答问题：

*   版本：2.0.4
*   硬件：两个节点都是相同的硬件，据我所知 - 8GB RAM，四核 CPU。我认为它是虚拟化的。
*   写入率：因人而异。如前所述，昨晚我正在转换为一个有上限的系列，这引发了整个事情。一夜之间，有一个过程每小时写几次大约几百个小文档（每个约 155 字节），所以我估计最多大约 100-200kbytes/小时。白天，处理更加紧张，更新了数十万个 500 字节的文档，并写了几十万个。仍然没有谈论庞大的数据量。**编辑**从今天早些时候发现了一些 iostat 输出：

```
设备：rrqm/s wrqm/sr/sw/s rkB/s wkB/s avgrq-sz avgqu-sz await r_await w_await svctm %util
xvda 1.00 2564.50 243.50 282.50 8986.00 11388.00 77.47 11.32 21.46 2.36 37.93 0.50 26.50

```

那个在 11 wMB/s 时特别突发，看到 util% 在 7 wMB/s 时达到 34%，在 52 rMB/s 时达到 72%。所以没有饱和，但绝对是早上阅读繁重的工作量。有趣的是，尽管有 obj. 大小约 5GB，索引约 1GB（见下文），磁盘活动非常多。那不应该都在RAM中吗？

*   工作集：我仍然没有找到公认的计算工作集的方法，但如果它有帮助：

```
    “收藏”：21，
    “对象”：15540092，
    “avgObjSize”：325.26198326238995，
    “数据大小”：5054601144，
    “存储大小”：5874327552，
    “数量”：132，
    “索引”：43，
    “索引大小”：864366720，
    “文件大小”：10666115072，
    “nsSizeMB”：16，
    “好”：1

```

我无法想象那是压倒性的 8GB RAM，尽管我可能是错的。

*   来自中学的一些最近的 mongostat 样本：

```
insert query update delete getmore 命令刷新映射的 vsize res 错误锁定 % idx 未命中 % qr|qw ar|aw netIn netOut conn set repl time
    *0 *0 *0 *0 0 1|0 0 22.2g 44.9g 912m 0 99.2 0 0|0 0|1 2k 303b 151 mySet SEC 03:47:54
    *0 *0 *0 *0 0 1|0 0 22.2g 44.9g 1.85g 0 101 0 0|0 0|1 3k 303b 151 mySet SEC 03:48:04

```

**编辑**

尝试了更多的东西。我关闭了主要（现在称为 A，次要将是 B），删除了它的数据，并解压缩了它的快照（现在已经有几个小时了，但此时，我们没有写任何新的东西）。用--fastsync 启动 A，它仍然比 B 的（现在是主要的）优化时间晚了 45 秒，它在世界标准时间 02:19:52 左右一直在闲逛。终于大约一个小时后，A 赶上了，所以我在 B 上调用 rs.stepDown()。立即，rs.status() 显示两台服务器在 UTC 04:08 左右都有优化，但 B（现在是次要的）再次滞后17 秒……然后 30 秒……现在 7 分钟……

**编辑**

在接受@matulef 的建议并在我的上限集合上重新创建索引以及重新启动辅助节点的 mongod 进程几分钟后，它的运行时间只增加了几秒钟。来自 mongostat 的次要锁定百分比仍在 95-104% 之间徘徊，有趣的是，res 大小从 100M 大幅波动到 2GB，然后又回到了 1GB 左右。

**编辑（第二天晚上）**

故事的结论 - @matulef 走在正确的轨道上，我应该更加小心地将复制的集合转换为有上限的集合。接下来是发生的事情，尽管我没有宣传这是数据安全 - 我坦率地承认我可能在这个过程中丢失了一些数据，所以 YMMV。

在主节点 (A) 上为上限集合创建索引并没有传播到辅助节点 (B)，并且 A 碰巧发生了故障转移（不是故意的）。一旦 B 成为主要的，我就在那里手动创建了上限集合的索引，并且使 A 与 B 保持一致的重新同步操作开始快速移动。对我来说不幸的是，我的 oplog 窗口不再排列，所以我最终不得不将数据从 B 快照到 A。一旦我用相同的数据集重新启动 mongo，A 和 B 再次高兴，并且复制已经恢复从此同步。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T06:54:07.773

这里的问题是默认情况下上限集合没有 _id 索引（并且“convertToCapped”命令实际上删除了该集合的*所有索引）。*这是一个问题，因为辅助节点通过应用来自 oplog 的操作来执行更新，这些操作通过它们的 _id 引用文档。如果您缺少 _id 索引，则每次更新都需要对辅助节点进行全表扫描，从而导致它们远远落后。

解决方案是在上限集合上创建一个 _id 索引。但是，如果您在主节点上创建索引，但您的从节点已经落后，它们将无法足够快地接收索引创建操作。相反，解决问题的最佳方法是首先一个接一个地修复每个滞后的次级。对于每一个，将其关闭并以独立模式重新启动（在不同的端口上，没有 --replSet 选项），构建 _id 索引，然后将其添加回集合中。最后，一旦二级节点修复完毕，您就可以降级主节点并重复该过程。

**更新**：在 mongoDB 2.0.x 及更早版本中，默认情况下，上限集合没有 _id 索引。但是，默认行为计划在 mongoDB 2.2 中更改，因此在 2.2+ 中创建的上限集合将自动创建一个 _id 索引，就像非上限集合一样。对于 2.2 之前创建的上限集合，您仍需要使用上述步骤手动创建 _id 索引，但新集合不应遭受上述问题的困扰。

# sql-server - 需要输入数据库设计方法：为每个文本文件索引单词，记住位置

> ID：11424829
> 
> 赞同：0
> 
> 时间：2012-07-11T02:47:09.360
> 
> 标签：sql-server, database-design

我有以下设计问题：

假设我有 100 万个大小约为 10KB 的纯文本文件。我的目标是设计一种方法来存储所有单词的索引，这样我就可以将每个单词链接到特定的文本文件和单词在所述文件中的位置。

例子：

```
Text file X contents: "The quick brown fox jumps over the lazy dog"
                       0   1     2     3   4     5    6   7    8

Text file Y contents: "Now is the time for all good men"
                       0   1  2   3    4   5   6    7 
```

我想大致存储以下内容：

```
the   => {X,0}, {X,6}, {Y,2}
quick => {X,1}
is    => {Y,1}
.... and so on 
```

显然，我实际上并没有索引纯文本文件，我的索引器是一个多线程 C# 应用程序，它将输入提取到术语“文件”、“单词”、“位置”。我无法创建典型的查找表集，因为行数很容易超过 20 亿。

起初我的想法是将对 {message,position} 存储在以单词本身为主键的文本 blob 中。然而，有了这个解决方案，当我的所有线程都尝试用新的 {message,position} 对更新“the”的行时，我担心会有很大的争用。

我被锁定在我的环境中，SQL Server Express 2012，所以让我们使用我们所拥有的。我可以对数据库本身做任何事情，事实上我的应用程序创建数据库作为正常工作流程的一部分，因此如果需要我可以部署 CLR 存储过程。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T03:39:24.733

只是为了扔掉一些东西，创建一个每个文件一行的表。使用`xml`列存储文件的单词出现次数。

第二张表是你的单词表。通过添加可让您快速定位哪些文件包含哪些单词的交叉引用表来进行非规范化。

现在你可以把它扔掉了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T07:02:54.970

我会尝试这样的事情......创建一个带有word/file-id的关联表。每条记录都有两个 id 加上一个完全由 0 和 1 组成的字符串。

所以给出你的例子：

```
Text file X contents: "The quick brown fox jumps over the lazy dog"
                       0   1     2     3   4     5    6   7    8

Text file Y contents: "Now is the time for all good men"
                       0   1  2   3    4   5   6    7 
```

你会得到：

```
WordId | FileId | Position
the    | X      | 100001
the    | Y      | 001
quick  | X      | 01
is     | Y      | 01
.... 
```

（请注意，该位置也可以存储为实际位掩码以节省空间，但我不确定这在使用或更新值时是否会出现问题）

这个技巧是基于所谓的“拉什莫尔索引”，顺便说一句。

现在要查看文件“X”中“the”和“quick”之间的距离，您必须读取这两行并计算“is”实例和“the”实例之间的零数。请注意，您还可以添加额外的信息，例如“文件中单词的出现次数，以使实际距离匹配更容易：

```
WordId | FileId | Position |Occ
the    | X      | 100001   | 2
the    | Y      | 000001   | 1 
quick  | X      | 01       | 1
is     | Y      | 01       | 1
.... 
```

在这种情况下，您立即知道“the”在文件 X 中出现了两次，而“quick”只出现了一次。这可能有助于构建距离计数例程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T22:02:47.090

数据库对于您正在做的事情来说太过分了。您是否考虑过使用[NoSQL 之](http://www.google.com.ar/search?q=nosql&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a)类的东西或更轻量级的东西？而且您可能应该创建一些在后台更新索引的工作线程，而不是让很多线程更新它。这样可以减少争吵...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T18:39:54.993

注释搞砸了代码格式，所以这里是：

我将上面的帖子标记为答案，因为这是我设计的解决方案的核心。我将位置和单词 ID 存储在一个 xml 列中，唯一的单词被规范化到一个单独的查找表中。搜索时，我执行类似于此的 XPath 查询：

```
m.WordIndex.query('
    let $dummy := 0
    return
        <word_list>
        {
            for $w in /wi/w
                where $w/@wid=1
                return <word wid="1" pos="{data($w/p)}"/>
        }
        </word_list>
    ') as WordPosition 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T17:39:22.590

假设您的纯文本文档仅包含索引词（即没有未索引的部分，例如标点符号，或者您满足于在索引中包含标点符号），也许以下想法值得一试：

![在此处输入图像描述](../Images/ca8f8ac27ff775ff118454d1156da423.png)

如您所见，没有单独的“文档”内容。“文档”和“索引”是一回事，并且可以通过以正确的顺序遍历 DOCUMENT_WORD 并从 WORD 中查找 WORD_TEXT 来动态重建文档。

这个模型有几个很好的属性：

*   文档和索引之间的数据不重复，节省空间。
*   多个文档可以共享同一个单词 - 单词文本将只存储一次，从而节省空间。这实际上是一种字典*压缩*形式。
*   [DOCUMENT_WORD 是一个很好的聚类](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)候选者，因此同一文档的所有单词都存储在物理上接近，这应该在文档重建期间最小化 I/O。
*   通过一点 JOINing，您可以在两个方向上进行查询，或者：“获取给定位置上（或附近）的单词”，或者：“获取给定单词的位置”。

顺便说一句，如果您决定切换到 Oracle，您可以将前沿索引压缩与 DOCUMENT_WORD 上的集群结合使用，以消除 DOCUMENT_ID 的重复并节省更多空间。您也许可以使用 SQL Server 的[页面压缩](http://msdn.microsoft.com/en-us/library/cc280464)来达到类似的效果。

# c++ - 链接来自静态成员的错误

> ID：11424830
> 
> 赞同：0
> 
> 时间：2012-07-11T02:47:11.697
> 
> 标签：c++

抱歉，如果这有点复杂。我已经拿走了这个对象并删除了所有多余的东西以缩小错误的原因。这就是导致我的错误的原因：

d3d11module.h

```
#ifndef STUFF_H
#define STUFF_H

#include <map>
#include <string>
#include <memory>

class D3D11
{
public:
    class Shader;
    template<class T>
    class ShaderRegister;

    typedef std::map<std::string, std::shared_ptr<Shader>(*)()> SHADER_CREATE_MAP;

private:
    static SHADER_CREATE_MAP createMap;
};

class D3D11::Shader
{

};

template<class T>
std::shared_ptr<D3D11::Shader> createShader() {return std::shared_ptr<D3D11::Shader>(new T);}

template<class T>
class D3D11::ShaderRegister
{
public:
    ShaderRegister(std::string const & s)
    {
        D3D11::createMap.insert(std::pair<std::string,std::shared_ptr<Shader>(*)()>(s, &createShader<T>));
    }
};

#endif 
```

只是对这一切的一个真正的快速解释。有一个名为 d3d11 的类，其中包含几个类。首先是着色器类，哪些类能够派生和实现，但这里留空，因为它的内容与问题无关。然后我有一个字符串索引映射，对应于函数指针。

ShaderRegister 对象将是派生着色器类中的静态私有成员。然后就在外面，调用构造函数，以便将指定的索引和指向 createShader() 的指针存储在该索引处。通过这样做，调用索引将调用此模板函数，返回该派生着色器的实例。

但是，当我尝试派生着色器对象并创建 ShaderRegister 的实例并尝试调用它的构造函数时，我得到了链接错误。看一看：

```
#ifndef DIFFUSE_SHADER
#define DIFFUSE_SHADER

#include "d3d11module.h"

class DiffuseShader : public D3D11::Shader
{
    static D3D11::ShaderRegister<DiffuseShader> reg;
};

D3D11::ShaderRegister<DiffuseShader> DiffuseShader::reg("DiffuseShader");

#endif 
```

这样做会导致看起来很痛苦的链接错误。

`main.obj : error LNK2001: unresolved external symbol "private: static class std::map<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class std::tr1::shared_ptr<class D3D11::Shader> (__cdecl*)(void),struct std::less<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > >,class std::allocator<struct std::pair<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const ,class std::tr1::shared_ptr<class D3D11::Shader> (__cdecl*)(void)> > > D3D11::createMap" (?createMap@D3D11@@0V?$map@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@P6A?AV?$shared_ptr@VShader@D3D11@@@tr1@2@XZU?$less@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@2@V?$allocator@U?$pair@$$CBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@P6A?AV?$shared_ptr@VShader@D3D11@@@tr1@2@XZ@std@@@2@@std@@A)`

尽管如此，我认为它想说的是 d3d11 类中的静态地图对象在某些时候使用时是未定义的。但我认为静态对象是在程序开始时构建的。发生什么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T02:53:45.580

静态成员与其他所有内容一样在类中声明，但它们也必须在一个且只有一个源 (.cpp) 文件中的某处定义。这与声明成员函数原型，然后在其他地方定义函数体相同。

```
SHADER_CREATE_MAP D3D11::createMap; 
```

# ios - 这是什么iOS组件？（看图片）

> ID：11424834
> 
> 赞同：0
> 
> 时间：2012-07-11T02:47:51.890
> 
> 标签：ios, cell, separator

大家好，我正在尝试找出下图中的哪个 iOS 组件（箭头所指的那个），它就像一个单元格分隔符，卡在顶部，而底部一直滚动，你也可以找到它在与字母表的通讯录中。如果你碰巧知道任何教程，任何教程也可以发布。非常感谢！

![在此处输入图像描述](../Images/08bcae4097694f20199c422b3c481227.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T02:51:57.797

那是 UITableViewController 或 UITableViewController 的子类中的节标题（使用子类，因此您可以编写自己的自定义代码）。您可以查看[斯坦福 cs193P](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/)课程以获取更多信息。第 9 周介绍了表格视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T02:52:06.243

那是 TableView 的部分标题

# c - atof 产生奇怪的结果

> ID：11424836
> 
> 赞同：-1
> 
> 时间：2012-07-11T02:48:05.630
> 
> 标签：c, debugging, atof

我正在尝试使用 atof() 将字符串转换为双精度（显然），但结果不是我所期望的。以下是关于 atof() 之前的变量值的代码和调试信息：

```
d = atof (arg);
next.db = d;

*debug info*
arg = 0x0034f7b0 "10.0"
d = 0.0000000000000000 
```

一旦程序通过了 atof()。结果如下：

```
arg = 0x0034f7b0 "ôþSÄ÷4"
d = 0.0000000000000000 
```

如您所见，在命令之前， arg 变量确实包含一个有效的双精度数。虽然，返回值为 0。让我感到困惑的是，为什么 arg 的值会发生变化？

另外，我确实包含了 stdlib.h。同样， arg 被声明为：

```
char *arg; 
```

如果它有帮助，“10.0”是从文件中读取的。

更多代码：

```
void read_instructions()
{
    char *str;
    char *arg;
    int n;
    char c;
    double d = 0;
    instruction next = {0};

    while (!feof(datafile)) {
        // Fetch the next string
        // if (push or pop), get the next argument
        // create instructiwn and add to instruction array
        str = get_next_string();

        if (strncmp (str, "P", 1) == 0) {
            if (strncmp (str, "PUSH", 4) == 0) {
                next.func = pushFunc;
            }
            else {
                next.func = popFunc;
            }
            arg = get_next_string();
            n = arg[0];
            if (n > 64 && n < 71)
                next.ch = arg[0];
            else {
                d = atof (arg);
                next.db = d;
            }
            instr[instr_count] = next;
            instr_count++;
        }
    else {
        c = str[0];

        switch (c) {
        case 'A' :
            next.func = addFunc;
            break;
        case 'S' :
            next.func = subFunc;
            break;
        case 'M' :
            next.func = multFunc;
            break;
        case 'D' :
            next.func = divFunc;
            break;
        case 'H' :
            next.func = haltFunc;
        default :
            printf ("Invalid instruction");
        }
        instr[instr_count] = next;
        instr_count++;
    }
}
fclose (datafile);
} 
```

这是打开和访问文件的给定代码：

```
FILE *datafile;

int main(int argc, char *argv[]) 
{
    if (argc != 2) {
        printf("error, incorrect number of arguments");
        haltFunc(instr[0]);
    }

    open_file(argv[1]);
    read_instructions();
    execute_instructions();
    return 0;
}

void open_file(char* argv) 
{
    char buf[1024];
    char cwd[512];

    getcwd(cwd, sizeof cwd);
    sprintf(buf, "%s\\%s", cwd, argv);

    if (!(datafile = fopen(buf, "r"))) {
        printf("Error: Make sure your file is located here:\n%s", buf);
    }
}

char* get_next_string() 
{
    char str[15];

    fscanf(datafile, "%s", &str);

    return str;
} 
```

头文件：

```
#ifndef MAIN_HEADER_H
#define MAIN_HEADER_H

#define INSTR_SIZE 30

typedef struct {
    void (*func)(instruction);
    union {
        double db;
        char ch;
    };
} instruction;

int main(int, char*);
char* get_next_string();
void open_file(char*);
void read_instructions();
void execute_instructions();
void pushFunc(instruction instr);
void popFunc(instruction instr);
void addFunc(instruction instr);
void subFunc(instruction instr);
void multFunc(instruction instr);
void divFunc(instruction instr);
void haltFunc(instruction instr);

#endif 
```

这是测试文件：

```
PUSH 10.0
PUSH 4.0
PUSH 7.0
PUSH 5.0
POP D
POP E
POP 
PUSH D
ADD
PUSH 5.0
POP B
PUSH 17.0
POP E
PUSH B
PUSH E
SUB
HALT 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:14:30.090

您的问题可能是由`get_next_string()`函数返回指向**临时本地字符数组**的指针引起的。一旦函数返回，曾经使用过的堆栈内存就会`str[]`被其他一些自动变量覆盖。这可以解释为什么`arg`会被破坏。

有几种可能的修复方法。

*   调用者可以分配内存来保存字符串并将这个指针传递给函数以填充数据。
*   被调用者可以为字符串分配内存并返回该指针。这也将所有权归还给调用者，并在完成时负责调用`free()`。
*   `str[]`数组可以在`static`函数内部声明。它不再是临时的，但请注意，每次调用该函数时，前一个字符串都会被覆盖。

# css - 使用 CSS 制作滑动图片库

> ID：11424845
> 
> 赞同：1
> 
> 时间：2012-07-11T02:49:24.437
> 
> 标签：css, gallery, slideshow, css-transitions

我想做一个纯 CSS 画廊/幻灯片，它会使用一种“推送”过渡效果（如果你曾经使用过 Keynote，你可能知道我的意思）。中心图像将完全可见，而侧面的图像将被掩盖，因为它们会溢出包含幻灯片的列之外。另外，是否可以进行定时转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T04:27:20.603

我坚持在您的问题下发表评论，但这是由我的一位同事制作的带有控件的 CSS3 幻灯片：**[完整的 CSS3/HTML5 幻灯片](http://creativejuiz.fr/trytotry/juizy-slideshow-full-css3-html5/)**

这（荒谬地）复杂，并非在任何地方都有效，他花了数周时间和多次迭代才能实现，等等
而且控件的文本`&lt;`例如应该是什么时候`Previous image`......嗯

作为一个挑战，干得好。在生产中，当然不是今天。

# iphone - 将 FreeTDS 交叉编译到 iPhone

> ID：11424846
> 
> 赞同：32
> 
> 时间：2012-07-11T02:49:27.777
> 
> 标签：iphone, ios, xcode4.2, cross-compiling, freetds

由于这个问题没有答案，我花了一个学期的大部分时间来解决这个问题，我想我会发布如何将 FreeTDS 0.91 交叉编译到 iPhone ARMv6、ARMv7 架构。这是使用 Xcode 4.2 和 iOS 5 SDK 完成的。

之所以问这个问题，是因为您正在为需要连接到 Mircosoft SQL Sever 的 iOS 设备开发应用程序，这需要使用 Microsoft 专有的表格数据流 (TDS) 协议。

我还会提到，您甚至需要一定程度的技术技能才能尝试此操作。这是我花了将近两个月才弄清楚的一个非常浓缩的版本（我留下了所有你不应该做的事情）。

与此相关的其他文件：

基本如何使用 FreeTDS [http://www.freetds.org/userguide/samplecode.htm](http://www.freetds.org/userguide/samplecode.htm)

Microsoft 的 TDS API 文档 [http://msdn.microsoft.com/en-us/library/aa936985(v=sql.80)](http://msdn.microsoft.com/en-us/library/aa936985(v=sql.80))

请看下面我的回答。

另请参阅 Xcode 4.5 更新文件的 saskathex 答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T02:47:50.933

对于像我这样需要花费数小时查找这些标准配置标志的文档的人（用于运行 ./configure make make install）

```
 ./configure --build is used for specifing the architecture you want to complie for
        ./configure --host is used to specify the ark of the machine doing the compileing (running xcode)
        ./configure --target seems to be an alias 
```

现在来解决问题。

1) 获取最新版本的 FreeTDS [http://www.freetds.org/](http://www.freetds.org/)

2) 下一步是制作您自己的 bash shell 文件以正确运行 FreeTDS ./configure。您将需要两个，因为模拟器是 i386/i686 架构，而苹果设备（iPhone、iPod 等）是 ARM 架构。此外，您在 iPhone 开发目录中的编译器文件/版本可能会有所不同，只需找到合乎逻辑且具有相似命名约定的内容即可。mac 主机体系结构由命令 uname -p 提供。

这是我在模拟器 (i386) build_for_simulator_i386.sh 上使用的构建示例：

```
 #!/bin/sh

 #unset some shell variables
 unset CC
 unset CFLAGS
 unset CPP

 export buildPath=`pwd`

 # make i386 (Simulator) target
 export CC=/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/i686-apple-darwin11-llvm-gcc-4.2

 export CFLAGS="-isysroot /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk"

 # if you want Windows Authentication (NTLM) support you must use at least tds version 7
 # the default is 5
 ./configure --build=i386 --host=i386 --target=i386 --with-tdsver=7.1 
```

ARM 编译配置示例 (build_for_device_armv7.sh)：

```
 #!/bin/sh

 # unset some shell variables
 unset CC
 unset CFLAGS
 unset CPP

 export buildPath=`pwd`

 # make arm target
 export CC=/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/arm-apple-darwin10-llvm-gcc-4.2

 export CFLAGS="-isysroot /Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.0.sdk"

 export CPP=/usr/bin/cpp

 ./configure --build=arm-apple-darwin10 --host=x86_64-apple-darwin11.3.0 --target=armv7 --with-tdsver=7.1 
```

3) 下一个 cd 到解压 freetds 下载的根 freetds 目录，我的是 freetds_0.91

4) 运行您的脚本之一。您一次只能编译**一个**架构

```
 sh build_for_(desiered build)  
        this runs ./configure for you with the correct options
        (tds version 7 required for NTLM authentication) 
```

5）一旦配置过程完成，你必须破解配置文件。打开 freetds_0.91/include/config.h 然后在第 172**行将 #define HAVE_ICONV 1**更改为**#define HAVE_ICONV 0**

6) 如果您之前运行过 ./configure、make、make install 然后运行这些命令。特别是如果您的切换架构，因为您将在不这样做的情况下运行 make 时出错

```
 sudo make clean
    sudo make uninstall 
```

7) 使用 make 执行编译

```
 make all
    sudo make install 
```

make 过程会故意通过一些错误，但是如果您在 shell 提示符的六七行内看到错误，一旦返回，您就有问题，需要在继续之前修复它们。让我们说很多事情在这一点上可能会出错。

8) 安装二进制编译文件后，freetds 制作的所有小 .o 文件的顶点是**/usr/local/lib/libsybdb.a** 相信我，你不想只为库拉一个 .o 文件你要。将 /usr/local/lib/libsybdb.a 复制到项目中的相应文件夹。我所做的是有两个单独的文件夹，每个架构一个，命名为“compiled_freetds-0.91_simulator_i386”和“compiled_freetds-0.91_device_armv7”。

9）因为你想让你的生活更轻松，并让 xcode 找出要使用哪个编译文件，请按照此步骤子集执行动态链接。

```
 a) Select you project settings on the left had side of xcode 
 (the blue think with the name of your project on it)

 b) Select the Target (usual the same name as your app) 

 c) Navigate to **build settings**, scroll down to **linking > other linker flags**

 d) On the left side of Other Linker Flags a mouse over will reveal an expander,    
 expanding will reveal Debug and Release rows.

 e) Add the appriate architectures by selecting the plus on the right side of 
 either Debug or Release.  When the new row appears select the architecture, 
 double click the first editable field from the right to open  an entry box 
 that you can then drag the appropriate  complied file into it to be dynamically     
 linked.  You must do this for both files and when done correctly the file 
 under ARMv7 will be used when building for the device and the one for Any iOS   
 Simulator SDK will be used when running on the simulator.
 **Note:** You may also need to add the -all_load flag to resolve linking issues. 
```

10) 在设备上运行代码时，似乎可以避免涉及 libsybdb.5.dylib 的动态链接错误问题的最后一步是进行卸载。此外，在设备上运行时，您还会收到很多警告，以 36 为增量，关于 CPU_SUBTYPE_ARM_ALL 已被弃用，这很正常，但很烦人。

```
 sudo make uninstall 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T19:23:10.517

我使用了上述 bash 文件，但从 XCode 4.5 开始，开发者工具位于应用程序包中。所以我修改了脚本以使用我的 MacOS Lion 和当前的 XCode 版本“4.5.2 (4G2008a)”运行

build_for_simulator_i386.sh：

```
#!/bin/sh

# unset some shell variables
unset CC
unset CFLAGS
unset CPP

# make i386 (Simulator) target
export CC=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/i686-apple-darwin11-llvm-gcc-4.2
export CFLAGS="-isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk"
export CPP=/usr/bin/cpp

./configure -build=i686-apple-darwin11 --host=i686-apple-darwin11 --target=i686-apple-darwin11 --with-tdsver=7.1 
```

build_for_device_armv7.sh：

```
#!/bin/sh

# unset some shell variables
unset CC
unset CFLAGS
unset CPP

# make arm target
export CC=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/arm-apple-darwin10-llvm-gcc-4.2
export CFLAGS="-isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk"
export CPP=/usr/bin/cpp

./configure --build=arm-apple-darwin10 --host=x86_64-apple-darwin11 --target=armv7 --with-tdsver=7.1 
```

一个不错的插件是使用 lipinfo 将两个静态库合并为一个

```
lipo compiled_freetds-0.91_device_armv7/libsybdb.a compiled_freetds-0.91_simulator_i386/libsybdb.a -create -output universal_libsybdb.a 
```

并将其添加到项目的设置中。

想分享它，因为上面的脚本为我节省了很多时间。

# awk - 使用 awk 将标题中的第一个单词添加到文件的所有后续行

> ID：11424847
> 
> 赞同：2
> 
> 时间：2012-07-11T02:49:32.307
> 
> 标签：awk

我有一个带有标题记录的文件，后跟详细信息行。我希望使用 awk 将 header 中的单词标记到文件中的后续行。每个 Header 记录中都有一个特定的单词“header”。

我的示例文件是

```
h1_val  header
this is line 1 under header set1
this is line 2 under header set1
this is line 3 under header set1
this is line 4 under header set1
h2_val  header
this is line 1 under header set2
this is line 2 under header set2
this is line 3 under header set2
this is line 4 under header set2 
```

我的输出应该是

```
h1_val this is line 1 under header set1
h1_val this is line 2 under header set1
h1_val this is line 3 under header set1
h1_val this is line 4 under header set1
h2_val this is line 1 under header set2
h2_val this is line 2 under header set2
h2_val this is line 3 under header set2
h2_val this is line 4 under header set2 
```

请帮忙

谢谢！！！

谢谢ghoti，如果线条很简单，它似乎工作正常。如果我的输入看起来像逗号分隔并带有双引号...... awk 应该是什么变化

```
"h1_val","header word" 
"this is line 1","under header","set1" 
"this is line 2","under header","set1" 
"this is line 2","under header","set1" 
"this is line 2","under header","set1" 
"h2_val","header word" 
"this is line 1","under header","set2" 
"this is line 2","under header","set2" 
"this is line 2","under header","set2" 
"this is line 2","under header","set2" 
```

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T02:55:53.897

这似乎做到了。

```
$ awk '$2=="header"{h=$1;next} {printf("%s ",h)} 1' input.txt
h1_val this is line 1 under header set1
h1_val this is line 2 under header set1
h1_val this is line 3 under header set1
h1_val this is line 4 under header set1
h2_val this is line 1 under header set2
h2_val this is line 2 under header set2
h2_val this is line 3 under header set2
h2_val this is line 4 under header set2 
```

或者，如果您愿意，这在功能上几乎是等效的：

```
$ awk '$2=="header"{h=$1;next} {print h OFS $0}' input.txt 
```

请注意，这意味着您的标题文本没有空格。如果是这样，那么您可能需要做一些比`$2=="header"`查找标题更有趣的事情。如果是这种情况，请更详细地[更新您的问题。](https://stackoverflow.com/posts/11424847/edit)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T05:36:54.037

```
> awk '{if($2=="header")p=$1;else print p,$0}' temp2
h1_val this is line 1 under header set1
h1_val this is line 2 under header set1
h1_val this is line 3 under header set1
h1_val this is line 4 under header set1
h2_val this is line 1 under header set2
h2_val this is line 2 under header set2
h2_val this is line 3 under header set2
h2_val this is line 4 under header set2 
```

# php - PHP没有正确执行python脚本

> ID：11424848
> 
> 赞同：0
> 
> 时间：2012-07-11T02:49:36.117
> 
> 标签：php, python, linux, serial-port

我正在从 php 页面执行 python 脚本，如下所示：`exec("python ./test.py");`

如果我没有在其中打开串行端口，该脚本运行良好。但是，如果我这样做了（这就是首先调用 python 脚本的全部意义），该脚本将无法正确执行。

如果我调用一个打印语句的简单 python 脚本 -

```
print "This works!" 
```

然后我在我的 php 页面中获得所需的输出。但是，如果我打开一个串行端口，我不再得到“This works！”的输出，并且串行数据没有被发送到接收设备 -

```
import serial
ser = serial.Serial("/dev/ttyACM0",9600)
print "This works!" 
```

这两个脚本都可以从命令行正常运行。

这是一个php限制吗？我尝试过其他执行方法，例如`popen`and `system`，但它们也对我不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T02:52:55.393

也许您没有从 Python 执行中获得完整的错误报告。尝试将其添加`raise Exception('Boo!')`为 Python 程序的第一行，以确定是否存在。如果您没有收到异常和回溯，那么您的程序可能`serial.Serial`在线失败，但您没有听说过。

# delphi - 使用 BDE Paradox 7 在 Delphi 7 中运行查询时出现“内存不足”

> ID：11424866
> 
> 赞同：2
> 
> 时间：2012-07-11T02:52:04.537
> 
> 标签：delphi, bde

当我运行连接到 paradox 数据库 (*.db) 的程序时，它会显示类似`project myprogram.exe raised exception class EDBEngineError with message Insufficient memory for this operation`.

我使用DataSource1、Table1和Query1控件，将Query1的结果显示到DBGrid1，记录不大于100条记录，字段约为6个字段，数据库中只有1个表。但是 Query1 RequestLive 属性设置为 True。

我在网上搜索了解决方案，它表明我需要设置 BDE 管理员 INIT 选项卡以增加 ShareMemory 等。我设置 BDE 控件的初始化是否正常或可能有问题？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T15:21:42.157

是的，您应该增加此`SHAREDMEMSIZE`参数以使其按[此处](http://www.ntcompatible.com/Borland_Paradox_7.0_t33526.html#168254)所述工作。如果这是一个新项目，我不建议使用 paradox 数据库。有很多免费的数据库，比如 Firebird、Microsoft SQL Server Express、Mysql...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-03T15:40:35.597

这个单元是著名的 4Gb BDE Bug 的补丁。它是为修复磁盘可用空间接近 4Gb 倍数时使用 BDE 时可能发生的“磁盘空间不足”错误而构建的。如需更多信息，请参阅 Quality Central 上的 BDE 报告# 7089。BDE 中错误的原因显然是计算可用磁盘空间时 idapi32.dll 中的错误。Idapi32.dll 使用的是 kernel32.dll 导出的名为 GetDiskFreeSpaceA 的 api 函数。解决方案是在 kernel32.dll 中为当前进程“修补”GetDiskFreeSpaceA，每次调用此函数都会重定向到一个新的例程（NewGetDiskFreeSpaceA）。

补丁的源代码包括在内。如果您使用另一种编程语言（即不是 Delphi），还包括预编译的 DLL (FIX4GBug.dll)。（如果你可以编译包含的单元，那么你不需要分发DLL）---永远修复它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T09:17:44.763

这可能是磁盘空间问题（即使您有大量可用磁盘空间）。据我所知，BDE/Paradox 使用较旧的 Windows（32 位？）界面检查可用磁盘空间。当可用空间查询返回类似 xxxxxxxx 00000yyy 的值时，该值被视为“yyy”并认为太小。关键点似乎是可用空间接近 2Gb 的倍数时。尝试删除或创建一个大文件。

# php - 复制 Facebook 个人资料图片会创建一个 0kb 的图像文件

> ID：11424878
> 
> 赞同：0
> 
> 时间：2012-07-11T02:52:59.060
> 
> 标签：php, facebook, facebook-graph-api, fopen

这曾经有效，现在它不在我的服务器上。这是试图找出这里出了什么问题的最后努力。我只是想将个人资料图片从 Facebook 复制到我服务器上的文件夹中。这是我正在使用的唯一代码：

```
file_put_contents("..//images/artist_pictures/artist_216.jpg", file_get_contents("http://graph.facebook.com/553451657/picture?type=large")); 
```

运行之后，我得到一个名为 Artist_216.jpg 的 0kb 图像文件。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-19T16:52:45.000

你需要调整你的`php.ini`文件。

更改`allow_url_fopen = Off`为`allow_url_fopen = on`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T04:09:20.737

我不太擅长 PHP，但我知道您使用的图片 URL 是重定向到 Facebook 的 CDN 上的另一个文件。我猜您需要以某种方式解决实际位置并提取重定向的内容。

# ios - 使用 ASIHTTPRequest 让 iOS 应用程序与数据库服务器通信或编写 Web 服务（.NET 或 MVC Web API）更好吗？

> ID：11424879
> 
> 赞同：1
> 
> 时间：2012-07-11T02:53:05.223
> 
> 标签：ios, web-services, asihttprequest

我不确定在我的 iOS 应用程序和数据库服务器之间建立通信的方向。直到今天早上我都坚信我应该编写一个 .NET Web 服务，但后来我读到了 ASIHTTPRequest，现在我不知道该用什么了。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T03:00:44.763

如果“.NET Web 服务”是指 SOAP 接口，我强烈建议不要这样做。SOAP 在 iOS 上管理起来非常痛苦。REST 接口要容易得多。

ASIHTTPRequest 不再受支持，我不建议在新项目中使用它。对于 REST 协议，我推荐[MKNetworkKit](https://github.com/MugunthKumar/MKNetworkKit)或[AFNetworking](https://github.com/AFNetworking/AFNetworking)。我对 MKNetworkKit 有偏见，但两者都是很好的框架。

# openerp - 如何使用 OpenERP 将一份数据保存在两个数据库中？

> ID：11424880
> 
> 赞同：0
> 
> 时间：2012-07-11T02:53:07.780
> 
> 标签：openerp, postgresql-9.1

当我想在 OpenERP 中编辑代码时，是否可以将一条数据保存在两个数据库中，其中两个表中的字段名称相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T04:33:48.480

是的，如果您知道数据库，这是很有可能的，但是让我警告您，这是一个非常糟糕的主意，因为它非常危险，并且将违反抵抗层 (ORM) 的所有规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T05:01:32.580

你到底想做什么？？如果您尝试同步，请使用模块`base_synchro`。模块不完整。您必须在该模块中进行自己的自定义

# c# - 保护网络流量 c#

> ID：11424881
> 
> 赞同：0
> 
> 时间：2012-07-11T02:53:23.897
> 
> 标签：c#, networking, encryption, cracking

我正在用 C# 开发一个程序。它连接到 Internet 以查看此副本是否有效。

目前，如果密钥有效，我只是发送许可证密钥并获得响应（0 或 1）。

问题是一些用户只是用一些数据包捕获工具伪造数据并重放它。所以应用程序很容易被破解。我怎样才能防止这种情况？

这是我本质上想要防止的：

*   网络重放攻击
*   身份验证“模拟器”

应该不可能找出发送了哪些数据。也许我应该添加当前时间然后加密数据包？所以总是不一样？

注意：请不要警告我，通过修改应用程序本身很容易破解。我知道。这个问题只是关于网络部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T03:00:51.603

如果您使用 SSL 或 HTTPS，那么您不必担心用户破解数据包。这很容易，因为这些库已经存在并且易于实现。以 C# 和 II 为例，只需安装证书和更改一些配置项即可。（可能需要重新编译一些细微的代码更改）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:53:57.307

假设您确实想防止许可证滥用，有更好的方法可以做到这一点。“电话回家”方法很容易自己动手，但正如您所注意到的那样，它充满了漏洞。

免责声明：我在一家生产[商业工具来解决这些许可证管理和版权保护问题的公司工作。](http://wibusystemsusa.com)还有其他类似的产品可从各种供应商处获得。

这与考虑如何为您的应用程序进行设置没有什么不同。选择是自己推出或购买现有的第 3 方工具集。乍一看，自己动手做看起来更便宜，但这可能只是因为你还没有真正发现创建健壮可靠的东西的所有真正要求。第三方工具供应商需要为其产品收费，但他们花了数年时间发现特定问题集的所有问题并解决了问题。这样您就可以省去工作，让您可以自由地专注于您的应用程序可以增加价值的地方。

不同之处在于，如果您设置错误，您的用户会被激怒；如果您获得错误的版权保护，您的产品将被盗版。

无论如何，将许可证验证检查减少到二进制“非此即彼”条件是非常容易破解的——通过网络进行检查使其容易 10 倍（记录播放攻击）。现代方法对可执行文件进行加密，并且许可证包含在解密它的密钥中（这是一种过度简化，因为实际的方法包括更多的复杂性，使其几乎不可能绕过）。只有拥有有效的许可证才能在程序加载和运行时解密可执行文件。

如果您想按照您描述的方式进行操作，请考虑以下事项：让应用程序使用可预测的、不断变化的值（例如从随机数表中查找加上一些外部值（如时间））来创建某种散列. 让服务器实现相同的代码。服务器将哈希发送到应用程序，应用程序将其与自己的哈希进行比较。如果它们匹配，则允许该应用程序运行。如果他们不这样做，它就会出错。由于哈希在每次启动尝试时都不同，因此通过网络记录它不会允许用户在下次尝试启动时让它运行。

# php - 如何让多个网站都在一个公共域上结帐？

> ID：11424883
> 
> 赞同：0
> 
> 时间：2012-07-11T02:53:31.787
> 
> 标签：php, apache

我需要开发多个电子商务网站。我们称它们为 foobar1.com、foobar2.com 等等。问题是，当您点击最终结帐按钮时，结帐过程需要`checkout.foobar.com`针对所有域进行。

这可能吗？如果可以，怎么做？checkout.foobar.com 不会提供会话数据（包含购物车信息），cookie 也不会。

我可以让它工作的一种方法是，如果我在 foobar.com 上维护购物车，这意味着每次您在 foobar-n.com 添加商品时，我都会对 foobar.com 进行 API 调用，这将更新购物车。

有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T08:47:54.483

*为了不让这个没有答案：*

我实现了数据库解决方案，即当您点击结帐时，您的购物车内容被转储到具有唯一 ID 的数据库中，然后您被发送到结帐`foobar.com?id={uniqid}`并检索购物车内容。当您成功完成结帐时，这些项目将从数据库中删除。我还运行了一项夜间 cron 作业，从数据库中删除了超过 6 小时的项目（对于那些没有通过结帐过程的人）。

# javascript - 如何使用移动/触摸导航链接修改 Kwicks.js？

> ID：11424884
> 
> 赞同：2
> 
> 时间：2012-07-11T02:53:38.017
> 
> 标签：javascript, jquery, wordpress, mobile, kwicks

我正在尝试使用出色的 Wordpress 主题 Minimatica 建立一个网站。问题是，Minimatica 使用基于 Kwicks.js (jQuery) 的图像链接滑块进行主导航。这些是翻转幻灯片，它们在移动设备上表现不佳，因为触摸任何幻灯片都会导致点击。我想对其进行调整，以便在移动/触摸设备上，第一次触摸会导致滑块打开，而第二次触摸实际上会点击通过。我不知道该怎么做。

可以在此处找到主题和 Kwicks 面板的工作演示： [http](http://demo.onedesigns.com/minimatica/) ://demo.onedesigns.com/minimatica/ 在移动设备上打开它应该很容易证明问题​​。

# opencv - 如何在视频中显示浮点数？

> ID：11424885
> 
> 赞同：0
> 
> 时间：2012-07-11T02:53:41.370
> 
> 标签：opencv

我想显示一些浮点数作为视频中的人数。这是一个例子。![在此处输入图像描述](../Images/23923b4df9e9688d40094f3555a67a3f.png)

有什么方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T03:02:44.970

您可以将 a 转换`float`为`std::string`这样的：

```
std::stringstream ss;
ss << 0.5f;
std::string s = ss.str(); 
```

然后你可以传递`s`给 PutText

# php - 从选择列表 PHP 中提取选项

> ID：11424886
> 
> 赞同：0
> 
> 时间：2012-07-11T02:53:42.853
> 
> 标签：php, forms

我正在寻找一种方法来从 HTML 选择列表中提取选项，并将它们放入逗号分隔的列表中。有些列表相当大，所以我正在寻找一种快速的方法来做到这一点。任何帮助表示赞赏。

例如，下面的列表...

```
<select>
    <option value="325">35</option>
    <option value="326">45</option>
    <option value="327">55</option>
    <option value="328">65</option>
</select> 
```

...会成为：

> 35,45,55,65

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T03:03:38.570

你可以在 w 客户端用 5h jquery 尝试这样的事情

```
var arr = new Array();
$("#id option").each(function()
{
   arr.push($(this).text()) 
});
arr.toString();
var x=document.getElementById("demo");
x.innerHTML=arr;

<p id="demo"></p> 
```

[http://jsfiddle.net/b4JBx/](http://jsfiddle.net/b4JBx/) 工作示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T03:06:18.113

纯Javascript *（因为您提到客户端可以）*：

```
var elements = document.getElementsByTagName('option'),
    list     = [];

for (var i=0; i<elements.length; i++) {
  list.push(elements[i].innerText);
}

var result = list.join(','); 
```

# .htaccess - 如何使用 .htaccess 删除 URL 末尾的 ?fontstyle=f-smaller？

> ID：11424893
> 
> 赞同：0
> 
> 时间：2012-07-11T02:54:19.700
> 
> 标签：.htaccess

我正在使用的模板在 URL 的末尾生成带有 ?fontstyle=f-smaller 或 ?fontstyle=f-smaller 的链接（根据用户的文本大小偏好）。现在这导致了明显的重复内容问题。我已禁用该功能，但仍在提供 URL。

我想使用 .htaccess 将这些从我的 URL 中剥离出来。例如： [http](http://www.mysite.com/article?fontstyle=f-smaller) ://www.mysite.com/article?fontstyle=f-smaller 将重定向到 [http://www.mysite.com/article](http://www.mysite.com/article)

我已经在这里和其他地方搜索过它，但我只找到了如何删除片段。我想*在*一个细分市场内进行更改，我不知道该怎么做。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T04:17:30.957

尝试

```
RewriteEngine On

RewriteCond %{QUERY_STRING} ^(.*)(^|&)fontstyle=f-smaller(.*)$
RewriteRule ^(.*)$ /$1?%1%3 [R=301,L] 
```

# android - if/else 语句永远不会到达/edittext 空值

> ID：11424898
> 
> 赞同：0
> 
> 时间：2012-07-11T02:54:52.743
> 
> 标签：android, android-edittext

我正在尝试`if/else`声明 if `s1`is `null`，它将显示来自 SD 卡的文件，但如果`s1`is not `null`，它将显示包含用户输入的 SD 卡文件。但是，我的代码失败并且永远不会到达`if/else`语句：

```
EditText s1 = (EditText) findViewById(R.id.search1);

    try 
    {
        for (File ff : dirs) 
        {
            //search.equals("")
            if (s1.getText().toString().equals(""))//if null
            {
                if (ff.isDirectory())
                    dir.add(new Option(ff.getName(), "Folder", ff.getAbsolutePath()));
                else 
                {
                    fls.add(new Option(ff.getName(), "File Size: " + ff.length(), ff.getAbsolutePath()));
                }
            }
            else
            {
                if (ff.getName().contains(s1.toString()))//show file search
                {
                    if(ff.isDirectory())
                        dir.add(new Option(ff.getName(),"Folder",ff.getAbsolutePath()));
                    else
                    {
                        fls.add(new Option(ff.getName(),"File Size: "+ff.length(),ff.getAbsolutePath()));
                    }
                }
            }
            //Toast.makeText(this, (CharSequence) s1, Toast.LENGTH_SHORT).show();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T03:00:56.897

尝试这个：

```
if (s1.getText().toString()==null){
.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T03:05:10.270

很难知道你的问题到底是什么，但我怀疑这是：

```
if (ff.getName().contains(s1.toString())) 
```

不是你想的那样。你期望从 s1.toString() 得到什么？它不会是 EditText 条目的值，也不会是您在 XML 中提供的具有英文外观的 ID。这将是与此输入相关联的任何内部 java 标签，这真的是您的文件名吗？如果不是，那么这场比赛将永远失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T04:26:00.493

使用此代码..

```
if( edit_text.getText().toString().trim().equals("")) 
```

# c - 如何获取字符分隔的子字符串？

> ID：11424900
> 
> 赞同：0
> 
> 时间：2012-07-11T02:54:59.953
> 
> 标签：c, string

文本文件的某些行包含以左方括号开头的行，具有可变数量的字符，后跟右方括号，然后是一些其他文本

例如：

```
 [ABC]  why is the sky green?  
 [DEFG]  Ou sont les Niegedens d'antan?  
 [I can't code C]  (... obviously) 
```

如何获取方括号之间的文本？（我想要`printf`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T02:58:14.707

逐行阅读，将第一个字符与 进行比较`[`，然后使用`strchr`定位右方括号`]`。

对于任意长的行，您可以使用`fgets`读取到临时缓冲区，并检查行终止符以避免意外捕获行中间括号中的文本。要打印出来，您可能希望边走边打印（并在下一行或遇到时停止`]`），或者在您自己的字符串生成器实现中将其缓冲。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T02:58:37.480

最简单的方法可能是扫描集转换：

```
char line[256];

while (fgets(line, sizeof(line), stdin)) {
    char string[256];

    sscanf(line, "[%255[^]]", string);
    printf("%s\n", string);
} 
```

# jquery - jqgrid 'restoreRow' 在哪里存储它的数据？

> ID：11424902
> 
> 赞同：2
> 
> 时间：2012-07-11T02:55:25.113
> 
> 标签：jquery, jqgrid

我在我的项目中使用了jqgrid inline-edit功能，当我在编辑一行时，我不想稍后保存它，它会恢复以前的数据，我想知道jqgrid将它以前的数据存储在哪里，我可以使用什么方法在我编辑一行时获取它以前的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T19:53:03.123

是的，根据[jqGrid 文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aoptions)，您可以使用 grid 参数`savedRow`：

> 这是一个只读属性，在内联和单元格编辑模块中用于在编辑行或单元格之前存储数据。

正如@Arnav 所写，您可以使用以下方法轻松访问此`savedRow`参数`getGridParam`：

```
$("#gridId").jqGrid("getGridParam", "savedRow"); 
```

* * *

如果您有兴趣，内部有一个数组`$t.p.savedRow`，以前的数据存储到其中。`restoreRow`您可以在以下函数中看到这一点[`grid.inlineedit.js`](https://github.com/tonytomov/jqGrid/blob/master/js/grid.inlinedit.js)：

```
for( var k=0;k<$t.p.savedRow.length;k++) {
    if( $t.p.savedRow[k].id == rowid) {fr = k; break;}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-12T15:10:47.120

jqGrid`savedRow`在进入编辑模式之前将数据保存到选项中。并且提供了一个库方法来访问该数据：

```
$("#gridId").jqGrid("getGridParam", "savedRow"); 
```

# javascript - jquery 没有选择预期的 div 元素。

> ID：11424903
> 
> 赞同：0
> 
> 时间：2012-07-11T02:55:34.010
> 
> 标签：javascript, jquery, html, jquery-masonry

晚上，

我对为什么我的一些 jquery 不起作用感到有点困惑。

这是示例的证明：http: [//jsfiddle.net/FS34t/624/](http://jsfiddle.net/FS34t/624/)

如您所见，单击“框”会触发该警报。

但是，当我尝试在自己的代码中实现相同的行为时，不会触发单击“框”。

```
function scroll(e)  { 
if ($(window).scrollTop() >= $(document).height() - $(window).height() - 10) {
    var $items = $(balls());                               
    $items.imagesLoaded(function(){
        $container
        .masonry('reloadItems')
        .append( $items ).masonry( 'appended', $items, true );
    });  
}  
}  
function balls(){
$iterator -= 1;
if($iterator < 0){
    var $boxes = $( '<div class="box">No more games!</div>' );
    $container.append( $boxes ).masonry( 'appended', $boxes, false );   
    return; 
}
var $width =  9;
return (
    '<div class="box" style="width:18%">'
    +'<p>'+$test[$iterator][1][2]['name']+'</p>'
    +'<img src="scripts/php/timthumb.php?src='+$test[$iterator][2]+'&q=100&w=300"/>' //Replace this with the one below when timthumb is whitelisted
    +'<div id=boxBottom>'+Math.floor($test[$iterator][0]*100)+'%</div>'
    +'</div>'
); 
```

我不确定为什么

```
 $(".box").click(function(event){
     alert("TEST");
 }); 
```

不会在这里工作。我唯一的猜测是，这是因为在 jsfiddle 示例中，“盒子”是在 HTML 中声明的，而这些是在 .js 中生成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T02:59:42.647

如果您运行此代码：

```
 $(".box").click(function(event){
     alert("TEST");
 }); 
```

在`.box`创建元素并将其插入 DOM 之前，将不会安装任何事件处理程序，因为`$(".box")`在运行代码时在 DOM 中找不到要安装处理程序的对象（导致空的 jQuery 对象）。

您有两个选择来纠正这个问题：

1.  您可以切换到使用委托事件处理，以便将来创建的对象响应事件。

2.  您可以在创建给定`.box`元素后安装事件处理程序。

委托事件处理（在 jQuery 1.7+ 中）将像这样工作：

```
 $container.on("click", ".box", function(event){
     alert("TEST");
 }); 
```

`.box`这会将一个事件处理程序附加到 $container 对象（在创建球之前就已经存在），然后监视源自对象的冒泡事件。

对于 jQuery 1.7 之前的 jQuery 版本，您可以使用`.delegate()`.

# xcode - 如何将 Xcode 指向旧的 SDK，以便将其用作“基础 SDK”？

> ID：11424920
> 
> 赞同：35
> 
> 时间：2012-07-11T02:59:17.283
> 
> 标签：xcode, macos, sdk, xcode4, xcode5

我的 Mac 设置：

**A 卷**：
OS X 10.8
Xcode 4.5 或更高版本 - 10.6 SDK**不**作为基础 SDK 提供

**B 卷**：
OS X 10.7
Xcode 4.3.3 - 10.6 SDK**可用作**基础 SDK

**C 卷**：
OS X 10.6
Xcode 4.2 - 10.6 SDK**可**作为基础 SDK

* * *

在 A 卷上，我安装了 Xcode 4.5，它不包括 10.6 SDK 作为我的构建目标的构建设置中的可用“基础 SDK”。

我在这个硬盘驱动器上有一个单独的 10.6 卷和 10.7 卷 - 两者都安装了 Xcode，并且两者都允许我在我的 Xcode 构建目标的构建设置中选择 10.6 SDK 作为基础 SDK。

我知道我在 Volume C 上安装了 10.6 SDK（`/Developer/SDKs`来自较旧的 Xcode 安装）。

如何将 Volume A 上的 Xcode 指向 Volume C 上的 10.6 SDK？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-07-11T03:06:38.163

您需要向旧 SDK 添加符号链接（这通常比复制更容易）。

```
cd /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs
ln -s /path/to/old/SDK . 
```

这可以很好地回到 10.5。除此之外，事情变得有点复杂......

虽然在未来的 Xcode 版本中没有承诺会支持这一点，但我已经与 Xcode 团队讨论过它，他们似乎并不热衷于很快改变它。

就我个人而言，我经常将 /path/to/old/SDK 保存在名为 /SDKs 的顶级目录中。这样每次我升级时都很容易修复所有问题。

编辑：我有一个[fix-xcode](https://gist.github.com/rnapier/3370649)脚本，可以简化每次 Xcode 升级时重新应用此修复程序的过程。

* * *

更新：在现代版本的 Xcode (7.3+) 中使用旧版 SDK`MinimumSDKVersion`在此处编辑：

```
/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Info.plist 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-11T03:04:46.323

错误的做法。您不会将 Xcode“指向”SDK。相反，将 SDK 复制到 Xcode 安装的相应“SDKs”文件夹中会更好。在现代 Xcode 安装中，这通常是：

Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/

将 SDK 复制到那里，退出并重新启动 Xcode，看看你会发现什么。

（在这里阅读另一个答案，我认为如果您对将原始 SDK 保留在其他地方一事无成，那么符号链接可能是一种选择）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T03:05:01.897

为什么不只是符号链接 SDK 的？“ln -s”？如果这不起作用，则需要进行一些 plist hacking。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-03T10:31:50.583

通过浏览到旧版本 Xcode.App/Developer/platforms 并将 iOS 6.1 SDK 复制到 XCode 5 的同一文件夹中来解决。

# php - 从crackstation.net 实现密码散列/加盐算法

> ID：11424921
> 
> 赞同：2
> 
> 时间：2012-07-11T02:59:28.030
> 
> 标签：php, security, passwords, hash, salt

我正在尝试从[crackstation.net](http://crackstation.net/hashing-security.htm#phpsourcecode)实现密码散列/加盐算法，但我不确定如何实现它。

在用户注册时存储密码似乎就像将密码传递给 create_hash() 一样简单。

```
$password = create_hash($_POST['Password']; 
```

我没有关注如何在用户登录时进行验证。validate_password($password, $good_hash) 返回 true 或 false，并以 $password 作为参数，所以除了第二个参数 $good_hash 之外，它看起来很简单。这个参数来自哪里？

据我了解，每次使用密码时都会将其转换为哈希值，并且哈希值是存储和比较的内容。那么为什么我会同时拥有 $password 和 $good_hash 值呢？

功能概览：

```
function create_hash($password){
    calls pbkdf2()
}

function validate_password($password, $good_hash){ 
    calls pbkdf2() 
    calls slow_equals() 
}

function slow_equals($a, $b){
}

function pbkdf2($algorithm, $password, $salt, $count, $key_length, $raw_output = false){
} 
```

当然，另一种更好的方法也同样有帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T03:17:27.763

`good_hash`此时已存储在数据库中，是已知的“好哈希”。从数据库中检索它并将其与`password`已提交的用户进行比较，该用户现在已使用相同的算法进行哈希处理。

# java - 如何将对象传递给按钮侦听器中匿名生成的新线程

> ID：11424924
> 
> 赞同：0
> 
> 时间：2012-07-11T03:00:09.350
> 
> 标签：java, android

我想将一个对象（用于打印的文档）传递给一个将打印文档的新线程。我的代码是：

```
 private final Button.OnClickListener cmdPrintOnClickListener = new Button.OnClickListener() {

    public void onClick(View v) {
        new Thread(new Runnable() {
            public void run() {
                enableTestButton(false);
                Looper.prepare();
                doConnectionTest();
                Looper.loop();
                Looper.myLooper().quit();
            }
        }).start();

      }
}; 
```

如何将对象传递给它？另外 - 我需要在 UI 线程中生成对象，就在开始新线程之前，所以我可以在哪里将此方法（例如 getDocketObject()）与下面的代码相关联

谢谢，

安东

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T03:13:06.710

您可以创建自己的 Runnable 类实现：

```
 private class RunnableInstance implements Runnable {

    protected Docket docket;

    public void run() {
        //do your stuff with the docket
    }

    public void setDocket(Docket docket) {
        this.docket = docket;
    }

} 
```

然后用它来创建线程

```
public void onClick(View v) {
        RunnableInstance target = new RunnableInstance();
        target.setDocket(docketInstance);
        new Thread(target).start();
    } 
```

如果您需要坚持使用匿名课程，您可以这样做：

```
 public void onClick(View v) {
        final Docket docket = docketInstance;
        Runnable target = new Runnable(){
            public void run() {
                // do your stuff with the docket
                System.out.println(docket);
            }
        };
        new Thread(target).start();

    } 
```

但是您必须确保将实例分配给最终变量。

# php - 在自由格式文本中查找日期的最佳方法是什么？

> ID：11424926
> 
> 赞同：3
> 
> 时间：2012-07-11T03:00:13.740
> 
> 标签：php, regex, perl, date

在自由格式文本中查找日期的最佳方法是什么？用户可以通过多种不同方式在其中放置日期的帖子，例如：

1.  7 月 14 日至 15 日
2.  7/14 和 7/15
3.  7-14 & 7-15
4.  周六 14 日和周日 15 日
5.  7月14日至15日星期六

等等。正则表达式是我处理这类事情的最佳选择`preg_match`吗？我还想搜索是否有两个日期，一个是开始日期，另一个是结束日期，但在我搜索的文本中可能有一个或两个日期。

到目前为止，这是我的 PHP 代码：

```
$dates1 = '01-01';
$dates2 = 'July 14th & 15th';
$dates3 = '7/14 & 7/15';
$dates4 = '7-14 & 7-15';
$dates5 = 'Saturday 14th and Sunday 15th';
$dates6 = 'Saturday July 14th and 15th';

$regexes = array(
        '/\s(1|2|3|4|5|6|7|8|9|10|11|12)\/\d{1,2}/',  //finds a date
        '/\s(1|2|3|4|5|6|7|8|9|10|11|12)-\d{1,2}/',  //finds another date
        '%\b(0?[1-9]|[12][0-9]|3[01])[- /.](0?[1-9]|1[012])\b%', //finds date format dd-mm or dd.mm
        );
foreach($regexes as $regex){
preg_match($regex,$dates,$matches);
}
var_dump($matches); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T03:30:24.277

PHP 有一个名为 DateTime 的类来管理时间戳。它使您可以非常轻松地在字符串和 DateTime 对象之间进行转换……前提是您的字符串使用 PHP 为您提供的格式。

例如，

```
$date = DateTime::createFromFormat('d-m', '01-01');
$date = DateTime::createFromFormat('F d', 'July 14');
$date = DateTime::createFromFormat('d-M-Y', '15-Feb-2009'); 
```

也就是说，这就是我要做的：

按优先级顺序创建一系列可接受的格式：

```
$formats = array("d-m", "j-M-Y" ... ); 
```

使用 RegEx 来按摩您的输入，使其与您的格式相匹配。

```
// Add the current year to this one:
$dates1 = '01-01';

// Split these into "July 14" and "July 15", and add the year
//  (this one will be the toughest)
$dates2 = 'July 14th & 15th';

// Split these into "7/14" and "7/15", and add the year
$dates3 = '7/14 & 7/15';

// Split these into "7-14" and "7-15", and add the year
$dates4 = '7-14 & 7-15';

// Split these, and add a month and year
$dates5 = 'Saturday 14th and Sunday 15th';

// Split these, and add a year:
$dates6 = 'Saturday July 14th and 15th'; 
```

尝试构造一个 DateTime 对象：

```
$date = false;
foreach ($formats as $format)
{
    $date = DateTime::createFromFormat($format, $dateString);
    if ($date) break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T03:30:39.107

查看 PHP 认为有效的日期格式：http: [//us.php.net/manual/en/datetime.formats.date.php](http://us.php.net/manual/en/datetime.formats.date.php)

理想情况下，您希望将日期隔离然后使用`strtotime()`，但由于这不是一个选项，您会陷入困境。您必须量化您想要支持的所有格式，并创建一组涵盖所有基础的正则表达式。上面提到的列表是一个很好的起点。

然而，请意识到，您将难以猜测日期的`1/2/2005`含义……是 1 月 2 日，还是按照许多地区的标准，是 2 月 1 日？在模棱两可的情况下，您可能不得不将它们扔掉或将它们发送到某个地方以进行手动评估。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T03:18:47.807

我假设您尝试解析的文本*仅*包含您感兴趣的日期文本。如果是这样，我将修改 UI，以便如果需要两个日期，则必须输入两个文本字段。这消除了弄清楚如何将它们分开的问题。

现在有了文本中的一个日期，我会将整个文本交给`strtotime()`. 这就解决了第二个问题。如果您收到废话（`strtotime()`如果是废话，会告诉您），您可以告诉用户您无法理解给出的日期。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T03:19:09.120

我有一个非常相似的问题的 Perl 答案，这里有一个不太复杂的蛮力解决方案： [从字符串中提取格式不一致的日期（日期解析，NLP）](https://stackoverflow.com/questions/3445358/extract-inconsistently-formatted-date-from-string-date-parsing-nlp/3445837#3445837)

基本方法是将自由格式文本分解为可能是日期的连续字符块，然后查看这些字符是否解析为有效的查找日期。在 Perl 中，我可以（ab）使用 Date::Parse 模块来做到这一点。如果 PHP 没有解析任意自由格式日期的等效模块，您可以使用一些正则表达式来近似它。

# lucene - Elasticsearch/Lucene 亮点

> ID：11424927
> 
> 赞同：1
> 
> 时间：2012-07-11T03:00:23.273
> 
> 标签：lucene, highlight, elasticsearch

如何在elasticsearch中使用fuzzyLikeThisFieldQuery突出显示结果查询？我可以接受fuzzyQuery 但不能接受fuzzyLikeThisFieldQuery。例如，在下面的代码中，我使用了模糊查询：

```
QueryBuilder allquery = QueryBuilders.fuzzyQuery("name", "fooobar").minSimilarity(0.4f);

SearchRequestBuilder builder = ds.getElasticClient()
                                        .prepareSearch("data")
                                        .setQuery(allquery)
                                        .setFrom(0)
                                        .setSize(10)
                                        .setTypes("entity")
                                        .setSearchType(SearchType.DEFAULT)
                                        .addHighlightedField("name")
                                        .addField("name");

    SearchResponse sr = builder.execute().actionGet(); 
```

结果是

```
If you want to have a <em>foobar</em> for oracle 
```

但是如果我使用fuzzyLikeThisFieldQuery，没有突出显示

```
QueryBuilder allquery = QueryBuilders.fuzzyLikeThisFieldQuery("name").likeText("fooobar").minSimilarity(0.4f); 
```

结果是

```
If you want to have a foobar for oracle 
```

有谁知道为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T10:28:13.263

您需要调用这两个函数来设置荧光笔标签。

```
builder.setHighlighterPreTags("<pre>").setHighlighterPostTags("</pre>"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T09:55:13.903

我需要突出显示关键字并使用我在下面编写的方法对我来说很好：

```
searchRequest.setQuery(
       QueryBuilders.queryString(q))
       .addHighlightedField("title")
       .addHighlightedField("text")
       .setHighlighterPreTags("<em>")
       .setHighlighterPostTags("</em>");
 _searchResponse = searchRequest.execute().actionGet(); 
```

我使用 Gson 将响应字符串解析为 json 对象并转换为我的实体，如下所示：

```
root = new JsonParser().parse(_searchResponse.toString());
p.results.add(root.getAsJsonObject().get("hits").getAsJsonObject().get("hits")); 
```

你会得到这样的回应：

```
 content: {
results: [
[
{
_index: "news",
_type: "news",
_id: "111",
_score: 0.6056677,
_source: {
id: "1349298458",
title: "Title text",
text: "Detail text"
},
highlight: {
text: [
" some text <em>keyword</em> some text <em>keyword</em>- some text <em>keyword</em> some text."
]
}
},... 
```

希望您了解它的工作原理并自己尝试。

# iphone - 安装 cocos3d 的问题

> ID：11424933
> 
> 赞同：0
> 
> 时间：2012-07-11T03:01:02.263
> 
> 标签：iphone, cocos2d-iphone, cocos3d

我正在尝试安装 cocos3d，在安装过程中，我必须找到安装 cocos2d 时的所有文件。我一辈子都找不到这些在哪里，所以我只是重新下载并重新安装它，并在尝试安装 cocos3d 时使用了这些文件，但是它把所有这些错误都吐给了我

```
cocos3d installer

Copying cocos2d libraries to workspace
...copying cocos2d files
...copying cocos2d dependency files
rsync: link_stat "/Users/Torgerson/cocos2d/external/FontLabel" failed: No such file or directory (2)
rsync error: some files could not be transferred (code 23) at /SourceCache/rsync/rsync-42/rsync/main.c(992) [sender=2.6.9]
...copying CocosDenshion files
rsync: link_stat "/Users/Torgerson/cocos2d/CocosDenshion/CocosDenshion" failed: No such file or directory (2)
rsync error: some files could not be transferred (code 23) at /SourceCache/rsync/rsync-42/rsync/main.c(992) [sender=2.6.9]
...copying cocoslive files
rsync: link_stat "/Users/Torgerson/cocos2d/cocoslive" failed: No such file or directory (2)
rsync error: some files could not be transferred (code 23) at /SourceCache/rsync/rsync-42/rsync/main.c(992) [sender=2.6.9]
...copying cocoslive dependency files
rsync: link_stat "/Users/Torgerson/cocos2d/external/TouchJSON" failed: No such file or directory (2)
rsync error: some files could not be transferred (code 23) at /SourceCache/rsync/rsync-42/rsync/main.c(992) [sender=2.6.9]
done!

Installing Xcode 4 cocos3d iOS template
----------------------------------------------------

...removing old template: /Users/Torgerson/Library/Developer/Xcode/Templates/cocos3d/cocos3d Application.xctemplate
...creating destination directory: /Users/Torgerson/Library/Developer/Xcode/Templates/cocos3d/cocos3d Application.xctemplate
...copying cocos3d Application template files
rsync: link_stat "/Users/Torgerson/Templates/Xcode4/cocos3d Application.xctemplate/." failed: No such file or directory (2)
rsync error: some files could not be transferred (code 23) at /SourceCache/rsync/rsync-42/rsync/main.c(992) [sender=2.6.9]
...creating destination directory: /Users/Torgerson/Library/Developer/Xcode/Templates/cocos3d/cocos3d Application.xctemplate/Resources
rsync: link_stat "/Users/Torgerson/Demos/Common/Resources/hello-world.pod" failed: No such file or directory (2)
rsync error: some files could not be transferred (code 23) at /SourceCache/rsync/rsync-42/rsync/main.c(992) [sender=2.6.9]
...removing old template: /Users/Torgerson/Library/Developer/Xcode/Templates/cocos3d/cocos3d-base.xctemplate
...creating destination directory: /Users/Torgerson/Library/Developer/Xcode/Templates/cocos3d/cocos3d-base.xctemplate
...copying cocos3d-base template files
rsync: link_stat "/Users/Torgerson/Templates/Xcode4/cocos3d-base.xctemplate/." failed: No such file or directory (2)
rsync error: some files could not be transferred (code 23) at /SourceCache/rsync/rsync-42/rsync/main.c(992) [sender=2.6.9]
...removing old template: /Users/Torgerson/Library/Developer/Xcode/Templates/cocos3d/cocos3d-lib.xctemplate
...creating destination directory: /Users/Torgerson/Library/Developer/Xcode/Templates/cocos3d/cocos3d-lib.xctemplate
...copying cocos3d-lib template files
rsync: link_stat "/Users/Torgerson/Templates/Xcode4/cocos3d-lib.xctemplate/." failed: No such file or directory (2)
rsync error: some files could not be transferred (code 23) at /SourceCache/rsync/rsync-42/rsync/main.c(992) [sender=2.6.9]
...copying cocos3d files to cocos3d-lib template
rsync: link_stat "/Users/Torgerson/cocos3d" failed: No such file or directory (2)
rsync error: some files could not be transferred (code 23) at /SourceCache/rsync/rsync-42/rsync/main.c(992) [sender=2.6.9]
done! 
```

到目前为止，我无法创建一个新的 cocos3d 项目，一切都运行了，但我在 xcode 中没有 cocos3d 模板？？任何帮助:)谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:58:40.163

该脚本显然试图从

```
/Users/Torgerson/cocos2d 
```

和

```
/Users/Torgerson/cocos3d 
```

将 cocos2d 和 cocos3d 移动到这些目录应该可以修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T06:22:20.390

是安装问题造成的。遵循正确的安装步骤。我也遇到了同样的问题。因此，只需完成以下链接中的步骤，

[http://www.techipost.com/2011/02/20/installing-cocos3d-for-iphoneipad/](http://www.techipost.com/2011/02/20/installing-cocos3d-for-iphoneipad/)

您可以使用终端窗口检查您是否安装了 cocos3d 模板。

# c - 局部变量值重置，是由于select（）吗？

> ID：11424936
> 
> 赞同：0
> 
> 时间：2012-07-11T03:01:57.167
> 
> 标签：c, udp

该程序发送 UDP 消息，并在超时前等待回复。我使用 select 来控制超时。但是，我不知道为什么局部变量“total_latency”在 while 循环中被重置。

" ***** ** *** ** *** ***** total_latency" 和 "^^^^^^^^^^^^^^^^^^ total_latency" 都显示正确的结果。但是 "##################### total_latency" 总是显示 0。似乎该值已重置。有人对此有线索吗？是因为select()吗？

* * *

输出 ：

############### total_latency:0.000

发送 UDP Ping 0....

等待 UDP Ping 回显....

延迟[0]：2.931ms

****** *** ** *** ****** total_latency:2.931, i=0**

 **^^^^^^^^^^^^^^^^^^^ total_latency:2.931

############### total_latency:0.000

发送 UDP Ping 1....

等待 UDP Ping 回显....

延迟[1]：3.066ms

****** *** ** *** ****** total_latency:3.066, i=1**

 **^^^^^^^^^^^^^^^^^^^ total_latency:3.066

############### total_latency:0.000

发送 UDP Ping 2....

等待 UDP Ping 回显....

延迟[2]：3.340ms

****** *** ** *** ****** total_latency:3.340, i=2**

 **^^^^^^^^^^^^^^^^^^^ total_latency:3.340

* * *

```
static int SendUDPPing(int udpSocket) 
{

  int i=0, loop = NUM_PING_PROBING;
  char szBuf[500];
  double diff[NUM_PING_PROBING];
  double total_latency=0;
  struct timeval start_time[NUM_PING_PROBING], end_time[NUM_PING_PROBING];  

  int nSelect = 0;
  fd_set rfds;
  struct timeval timeout;           

  FD_ZERO(&rfds);
  FD_SET(udpSocket, &rfds);
  timeout.tv_sec = 0;             
  timeout.tv_usec = 300000;       

  while(i < loop)
    {

      fprintf(stderr, "#####################  total_latency:%.3f\n",
              total_latency);

      fprintf(stderr, "Sending UDP Ping %d....\n", i);

      gettimeofday(&start_time[i], NULL);

      nRet = send(udpSocket, "ping", strlen("ping"), 0);
      if (nRet < 0)
        {
          fprintf(stderr, "%s UDP Packet send error\n", __func__);
          return WBEST_ERR_FAIL;
        }

      fprintf(stderr, "Waiting for UDP Ping echo....\n");

      memset(szBuf, 0, sizeof(szBuf));
      nSelect = select(udpSocket+1, &rfds, NULL, NULL, &timeout);
      if ( nSelect < 0)
        {      
          fprintf(stderr, "%s: select() failed.\n", __func__);
          break;
        } 
      else if (nSelect == 0)
        {      
          fprintf(stderr,
                  "%s: Receiving UDP PING echo packets timeout (300 ms).\n",
                  __func__);
          break;
        }
      else
        {
          nRet = recv(udpSocket, szBuf, sizeof(szBuf), 0);      
          if (nRet < 0)
            {
              fprintf(stderr, "%s UDP Packet recv error\n", __func__);
              return WBEST_ERR_FAIL;
            }

          gettimeofday(&end_time[i], NULL);

          //fprintf(stderr, "start %lds %ldus, end %lds %ldus\n",
                    start_time[i].tv_sec, start_time[i].tv_usec,
                    end_time[i].tv_sec, end_time[i].tv_usec); 

          if (end_time[i].tv_usec < start_time[i].tv_usec)
            {
              end_time[i].tv_sec -= 1;
              end_time[i].tv_usec += 1000000;
            }
          diff[i] = ( (double)(end_time[i].tv_sec - start_time[i].tv_sec)
                      *(double)1000)
                      + ((double)(end_time[i].tv_usec
                                  - start_time[i].tv_usec)
                         / (double)1000);

          total_latency = total_latency + diff[i];

          fprintf(stderr, "Latency[%d]: %.3fms\n", i, diff[i]);
          fprintf(stderr, "******************** total_latency:%.3f, i=%d\n",
                  total_latency, i);

          i++;
        }
      fprintf(stderr, "^^^^^^^^^^^^^^^^^^^ total_latency:%.3f\n",
              total_latency);
    }   

  fprintf(stderr, "Done\n");   

} 
```******

# c# - 确定多个时间跨度之间的当前时间

> ID：11424941
> 
> 赞同：4
> 
> 时间：2012-07-11T03:02:53.580
> 
> 标签：c#, .net, datetime, time

我无法确定任何特定时间处于哪个交易时段。

有四个可能的会话，显示在这张取自 ForexFactory.com 的图片中

![在此处输入图像描述](../Images/ec9c91de6293c6a6883f8219d4d8d5f4.png)

我有这个方法，我需要检查当前时间是否在指定的交易时段内。

```
public bool IsTradingSession(TradingSession tradingSession, DateTime currentTime)
{
    //currentTime is in local time.

    //Regular session is 5PM - next day 5PM, this is the session in the picture.
    //Irregular sessions also occur for example late open (3AM - same day 5PM)  or early close (5PM - next day 11AM)
    DateTime sessionStart = Exchange.ToLocalTime(Exchange.CurrentSessionOpen);
    DateTime sessionEnd = Exchange.ToLocalTime(Exchange.CurrentSessionClose);

    if(tradingSession == TradingSession.Sydney)
        return ....... ? true : false;
    if(tradingSession == TradingSession.Tokyo)
        return ....... ? true : false;        
    if(tradingSession == TradingSession.London)
        return ....... ? true : false;
    if (tradingSession == TradingSession.NewYork)
        return ....... ? true : false;

    return false;
} 
```

采用：

```
 bool isSydneySession = IsTradingSession(TradingSession.Sydney, CurrentTime);
    bool isTokyoSession = IsTradingSession(TradingSession.Tokyo, CurrentTime);
    bool isLondonSession = IsTradingSession(TradingSession.London, CurrentTime);
    bool isNewYorkSession = IsTradingSession(TradingSession.NewYork, CurrentTime); 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T03:56:55.470

我建议为每个交易时段编写一个简单的函数，它接受一个 DateTime 并返回一个布尔值，指示它在那个时候是否打开。

```
var sydneyOpen = new TimeSpan(17, 0, 0);
var sydneyClose = new TimeSpan(2, 0, 0);
Func<DateTime, bool> isOpenInSydney = d => 
    (d.TimeOfDay > sydneyOpen || d.TimeOfDay < sydneyClose);

// same for other markets, write a function to check against two times 
```

然后将它们放入`Dictionary<TradingSession, Func>`这样的通用检索中......

```
var marketHours = new Dictionary<TradingSession, Func<DateTime, bool>>();
marketHours.Add(TradingSession.Sydney, isOpenInSydney);
// add other markets... 
```

然后您现有的方法只需为给定选择适当的功能`TradingSession`并应用它

```
public bool IsTradingSession(TradingSession tradingSession, DateTime currentTime)
{
    var functionForSession = marketHours[tradingSession];
    return functionForSession(currentTime);
} 
```

只要您的应用程序仅在单个时区*运行*，我认为您不需要 UTC 时间，但夏令时可能会导致问题。

* * *

解决两天而不是一天的交易时段问题的一个好方法是编写一个帮助程序，它可以精确地考虑它是​​否是“跨日”交易时段并为您应用不同的规则：

```
private bool IsBetween(DateTime now, TimeSpan open, TimeSpan close)
{
    var nowTime = now.TimeOfDay;
    return (open < close
        // if open is before close, then now must be between them
        ? (nowTime > open && nowTime < close)
        // otherwise now must be *either* after open or before close
        : (nowTime > open || nowTime < close));
} 
```

进而

```
var sydneyOpen = new TimeSpan(17, 0, 0);
var sydneyClose = new TimeSpan(2, 0, 0);
Func<DateTime, bool> isOpenInSydney = d => IsBetween(d, sydneyOpen, sydneyClose); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T03:21:09.840

您可以使用 > & < 进行比较或比较刻度。

查看相关问题：[检查日期时间实例是否位于其他两个日期时间对象之间](https://stackoverflow.com/questions/5672862/check-if-datetime-instance-falls-in-between-other-two-datetime-objects)

为了避免多个 if 语句，您还可以创建一个包含开始时间和结束时间的 TradingSession 对象，并定义一个属性/函数来检查是否在会话中。当我有大开关或 if 阻塞时，通常表明错过了 OO 机会:)

```
TradingSession sydneySession = new TradingSession 
{
    StartTimeUtc = ...;
    EndTimeUtc = ...;
} 
```

然后交易会话对象可以具有属性 IsInSession。

```
public bool IsInSession
{
    get {
        return DateTime.UTCNow >= StartTimeUtc && DateTime.UTCNow <= EndTimeUtc;
    }
} 
```

这使用 UTC 时间来消除时区问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T03:21:31.210

您需要将本地时间标准化为 UTC。然后，您可以比较跨地区的时间。

对于每个交易时段，您需要知道 UTC 的时段开始和结束时间。

您需要 UTC 的当前时间。 `DateTime.UtcNow`， 例如。

然后，您可以对每个交易时段窗口进行范围比较：

```
if(tradingSession == TradingSession.Sydney)
        return currentTimeUtc >= sydneyStartTimeUtc && currentTimeUtc <= sydneyEndTimeUtc; 
```

ETC...

如果您尝试验证交易时间对于特定交易时段的交易是否有效，这将正常工作。

但是，如果您试图根据时间确定交易属于哪个交易时段，有时您会得到多个答案，因为交易时段重叠。多个交易时段可能在给定时间内有效。

# java - Java,string,sql ....... id 整数和字符串的组合

> ID：11424943
> 
> 赞同：0
> 
> 时间：2012-07-11T03:03:16.527
> 
> 标签：java, database, string, swing

我正在 netbeans (java) 中制作应用程序。此应用程序具有字符串和整数的唯一 id 组合，如 abc/111 或 xyz/253，当数据库中出现新条目时，整数部分应增加，即 abc/112 和 xyz/254。问题是

整数部分的值以适当的方式增加到 10，但之后它不会增加并且对于数据库中的进一步条目保持不变。

我使用了以下代码-

```
try{
    String sql = "SELECT RegNumber FROM Death ORDER BY RegNumber DESC   ";
        pst = conn.prepareStatement(sql);

        rs = pst.executeQuery();

        if (rs.next()) {

            String add1 = rs.getString("RegNumber");
            String[] parts= add1.split("/");
            String part1= parts[0];
            String part2= parts[1];
            int a,b;
            a= Integer.parseInt(part2);
            b=a+1;

            jTextField20.setText(""+part1+"/"+b);

            JOptionPane.showMessageDialog(null, "done");
        }
    } 
```

“整数部分增加到 10”意味着如果我在数据库中启动 id 的第一个值，如“abc/1”，那么新的 id 会自动为下一个条目生成，其值为 1，即“abc/2”和下一个条目它是“abc/3”等等.......喜欢

abc/4、abc/5、abc/6、abc/7、abc/8、abc/9、abc/10

但是当它是“abc/10”时，新生成的 id 保持不变，即数据库中每个新条目的“abc/10”。（我使用的是 MS Access 2007，id 是文本类型）（数据库中的第一个 id 由应用程序而不是数据库本身创建）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T03:40:13.903

你的问题不是很清楚，什么是“整数部分增加到 10”？如果您的平均整数长度为 10，则应检查表中的列类型长度。

# php - PHP变量内的百分号

> ID：11424953
> 
> 赞同：1
> 
> 时间：2012-07-11T03:05:03.897
> 
> 标签：php

我试图使这个条件：

```
if ($Search[1] == '') {
    $Where = 'WHERE User.FirstName LIKE '%$Search[0]%' OR User.LastName LIKE '%$Search[0]%';
}else {
    $Where = 'WHERE User.FirstName LIKE '%$Search[0]%' OR User.LastName LIKE '%$Search[1]%';
} 
```

但是将 '%$Search[0]%' 放在 PHP 变量中不会导致任何结果。将百分号放在 PHP 变量中的正确方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T03:06:14.237

您使用了不正确的引用

```
$Where = "WHERE User.FirstName LIKE '%$Search[0]%' OR User.LastName LIKE '%$Search[0]%'";
         ^----note the difference. 
```

% 是 PHP 中的模运算符。由于您在版本中使用单引号，因此您实际上是在尝试对一些 SQL 文本和变量取模。

# php - 如何在 Twig 模板中拆分字符？

> ID：11424958
> 
> 赞同：3
> 
> 时间：2012-07-11T03:05:51.833
> 
> 标签：php, twig, fuelphp

当我想在 Twig 中使用拆分功能时遇到问题，我有这样的词`Male\tDoctor`，我想使用`\t`ascii 拆分该词，

我在搜索引擎中搜索，我在这个[url](https://github.com/fabpot/Twig/pull/621)中讨论了关于 twig split 问题我读到了，我认为问题已经解决，但是当我在 twig 网站文档中搜索时，我找不到`split`您可以阅读[此](http://twig.sensiolabs.org/documentation)过滤器功能。

当我尝试使用此代码时

```
{{ var | split('\t') }) 
```

回报是`The filter "split" does not exist`

你对解决这个问题有什么想法或建议吗？

感谢您的回答...：）

**注意：**
我正在使用fuelphp框架和树枝模板

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-23T15:59:40.617

仅出于完整性考虑：
F21 提到的 PR 现在已合并（自 19.10.2012 起）并且 twig 支持拆分： [http ://twig.sensiolabs.org/doc/filters/split.html](http://twig.sensiolabs.org/doc/filters/split.html)

```
{{ "one,two,three"|split(',') }}
{# returns ['one', 'two', 'three'] #} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T03:34:14.813

Twig master 中尚不存在拆分功能。您链接到的拉取请求仍然`open`并且尚未合并到 Twig 的存储库中。

但是，您可以在自己的扩展中简单地实现拆分过滤器。然后，一旦 Twig 在其核心扩展中包含此过滤器，只需删除您创建的扩展即可。

在自己的扩展中创建自己的过滤器很容易：[http ://twig.sensiolabs.org/doc/advanced.html#filters](http://twig.sensiolabs.org/doc/advanced.html#filters)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T09:27:48.513

在fuelphp框架的twig中添加这个函数来设置自定义过滤器到这个文件`fuel/packages/parser/classes/twig/fuel/extension.php`

```
 /**
        * Returns a list of filters to add to the existing list.
        *
        * @return array An array of filters
        */
        public function getFilters()
        {
            //custom by viyancs adding splite function because not found in twig documentation
             return array(
                 'explode'       => new Twig_Filter_Function('Class::explode_custom', array('pre_escape' => 'html', 'is_safe' => array('html'))),
                 );
        } 
```

并在另一个类中声明`explode_custom`函数，在这种情况下，您可以使用相同的类或它所依赖的另一个类。

```
 /*
    * adding custom function for split character
    * used for fuel/app/classes/twig/fuel/extension.php
    * @params
    *  $string : this is twig variable or value example {{ test }}
    *  $split  : this is split character example {{ test\tdata | split('\t') }} \t is split character
    * @return 
    *  array of explode
    * 
    */
    public function explode_custom($string,$split)
    {
        $data = explode($split, $string);
        return $data;
    } 
```

并使用它

```
{% set varStack = "stack[tab]overflow" | explode('\t') %}
                    {% for value in varStack %}
                    <li>{{ value }}</li>
                    {% endfor %} 
```

结果是

```
stack
overflow 
```

# haskell - 吃我的麦片并解析它

> ID：11424961
> 
> 赞同：8
> 
> 时间：2012-07-11T03:06:18.010
> 
> 标签：haskell

我正在使用`Data.Serialize.Get`并尝试定义以下组合器：

```
getConsumed :: Get a -> Get (ByteString, a) 
```

它应该像传入的`Get`动作一样，但也返回消耗的`ByteString`那个。`Get`用例是我有一个二进制结构，我需要解析和散列，并且在解析之前我不知道长度。

这个组合器尽管语义简单，但实现起来却出奇的棘手。

在不深入研究 的内部结构的情况下`Get`，我的直觉是使用这个怪物：

```
getConsumed :: Get a -> Get (B.ByteString, a)
getConsumed g = do
  (len, r) <- lookAhead $ do
                before <- remaining
                res <- g
                after <- remaining
                return (before - after, res)
  bs <- getBytes len
  return (bs, r) 
```

它将使用前瞻，在运行动作之前和之后查看剩余的字节，返回动作的结果，然后消耗长度。这不应该重复任何工作，但它偶尔会失败：

```
*** Exception: GetException "Failed reading: getBytes: negative length requested\nEmpty call stack\n" 
```

所以我一定是在某个地方误解了一些关于谷物的事情。

有没有人看到我的定义有什么问题，`getconsumed`或者对如何实现它有更好的想法？

编辑：Dan Doel 指出，它`remaining`可以只返回给定块的剩余长度，如果你跨越块边界，这不是很有用。在这种情况下，我不确定该操作的重点是什么，但这解释了为什么我的代码不起作用！现在我只需要找到一个可行的替代方案。

编辑2：在考虑了更多之后，如果我在循环中手动输入单个块（）并跟踪它所吃的东西，那么`remaining`给我当前块的长度似乎对我有利我做。我还没有设法使这种方法起作用，但它似乎比原来的方法更有希望。`Get``remaining >>= getBytes`

编辑 3：如果有人好奇，这里是上面编辑 2 的代码：

```
getChunk :: Get B.ByteString
getChunk = remaining >>= getBytes

getConsumed :: Get a -> Get (B.ByteString, a)
getConsumed g = do
    (len, res) <- lookAhead $ measure g
    bs <- getBytes len
    return (bs, res)
  where
  measure :: Get a -> Get (Int ,a)
  measure g = do
    chunk <- getChunk
    measure' (B.length chunk) (runGetPartial g chunk)

  measure' :: Int -> Result a -> Get (Int, a)
  measure' !n (Fail e) = fail e
  measure' !n (Done r bs) = return (n - B.length bs, r)
  measure' !n (Partial f) = do
    chunk <- getChunk
    measure' (n + B.length chunk) (f chunk) 
```

不幸的是，一段时间后我的示例输入似乎仍然失败：

```
*** Exception: GetException "Failed reading: too few bytes\nFrom:\tdemandInput\n\n\nEmpty call stack\n" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T08:22:52.947

Cereal 包没有存储足够的信息来简单地实现您想要的。我希望您使用块的想法可能会奏效，或者可能是一个特殊的`runGet`. 分叉谷物和使用内部可能是您最简单的方法。

自己编写可以工作，这就是我在制作[协议缓冲区库](http://hackage.haskell.org/package/protocol-buffers)时所做的。我的自定义[`Text.ProtocolBuffers.Get`](http://hackage.haskell.org/packages/archive/protocol-buffers/2.0.10/doc/html/Text-ProtocolBuffers-Get.html)库确实实现了足够的机制来做你想做的事：

```
import Text.ProtocolBuffers.Get
import Control.Applicative
import qualified Data.ByteString as B

getConsumed :: Get a -> Get (B.ByteString, a)
getConsumed thing = do
  start <- bytesRead
  (a,stop) <- lookAhead ((,) <$> thing <*> bytesRead)
  bs <- getByteString (fromIntegral (stop-start))
  return (bs,a) 
```

这很清楚，因为我的库跟踪 byteRead 的数量。否则，API 与 Cereal 非常相似。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T11:40:33.377

编辑：另一个解决方案，没有额外的计算！

```
getConsumed :: Get a -> Get (B.ByteString, a)
getConsumed g = do
  (len, r) <- lookAhead $ do
                (res,after) <- lookAhead $ liftM2 (,) g remaining
                total <- remaining
                return (total-after, res)
  bs <- getBytes len
  return (bs, r) 
```

* * *

一种解决方案是调用`lookAhead`两次。第一次确保加载所有必要的块，第二次执行实际长度计算（以及返回反序列化数据）。

```
getConsumed :: Get a -> Get (B.ByteString, a)
getConsumed g = do
  _ <- lookAhead g -- Make sure all necessary chunks are preloaded
  (len, r) <- lookAhead $ do
                before <- remaining
                res <- g
                after <- remaining
                return (before - after, res)
  bs <- getBytes len
  return (bs, r) 
```

# xcode - 增强现实（显示动画对象）

> ID：11424964
> 
> 赞同：2
> 
> 时间：2012-07-11T03:06:23.853
> 
> 标签：xcode, augmented-reality

我正在尝试构建一个增强现实应用程序
，但我找不到任何方法来显示作为动画对象**的 .dae 文件**
是否有任何有用的教程？使用 Xcode 或 NinevehGL。感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:32:11.550

您可以使用 cocod2d 创建增强现实应用程序。这里有一个教程[http://www.raywenderlich.com/3997/introduction-to-augmented-reality-on-the-iphone](http://www.raywenderlich.com/3997/introduction-to-augmented-reality-on-the-iphone)因为这是我能想到的最简单的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T19:54:25.720

这[是 FBX 转换器的链接](http://usa.autodesk.com/adsk/servlet/pc/item?siteID=123112&id=10775855)。您可以将 collada dae 文件更改为 FBX，然后使用[此处](https://dev.metaio.com/augmented-reality-developer-news/article/this-is-the-test-entry/)的教程使用 metaio sdk 在 Xcode 中编写 AR 应用程序。

# php - php“？” 运算符 - ($some_var) ？函数（）：函数（）；

> ID：11424967
> 
> 赞同：0
> 
> 时间：2012-07-11T03:06:38.427
> 
> 标签：php, variables, operators

```
($some_var) ? true_func() : false_func(); 
```

这在 php 中是什么，它有什么作用？存在，布尔值还是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T03:11:11.423

与此相同：

```
if ($some_var) {
    true_func();
}
else {
    false_func();
} 
```

如果`$some_val`为真，则执行`:`.

如果`$some_val`为 false，则执行`:`.

它被称为三元运算符。

通常它在为变量赋值时用作表达式：

```
$some_var = ($some_bool) ? $true_value : $false_value; 
```

它是最被滥用的编程结构之一（在我看来）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T03:11:22.287

摘自[PHP 手册：比较运算符](http://php.net/manual/en/language.operators.comparison.php)

```
<?php
// Example usage for: Ternary Operator
$action = (empty($_POST['action'])) ? 'default' : $_POST['action'];

// The above is identical to this if/else statement
if (empty($_POST['action'])) {
    $action = 'default';
} else {
    $action = $_POST['action'];
}

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T03:15:03.537

这是[三元](http://php.net/manual/en/language.operators.comparison.php)运算符。

而不是写

```
if ($a < $b) {
  $minVal = $a;
} else {
  $minVal = $b;
} 
```

你可以写成

```
$minVal = ($a < $b) ? $a : $b; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T03:17:31.053

它实际上是一个三元运算符。（我的意思是运算符 ?: 是三元运算符）。

```
($some_var) ? func1() : func2(); 
```

'$some_var' 是一个布尔表达式。如果计算结果为真，则执行“func1()”，否则执行“func2()”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T03:13:31.030

嗯，它的写法，它和刚才一样

```
func(); 
```

（如果`$somevar`是`true`，则调用`func`；否则，`func`也调用！）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T03:18:16.697

它检查[布尔值](http://www.php.net/manual/en/language.types.boolean.php)：

> 转换为布尔值时，以下值被视为 FALSE：
> 
> ```
> the boolean FALSE itself
> the integer 0 (zero)
> the float 0.0 (zero)
> the empty string, and the string "0"
> an array with zero elements
> an object with zero member variables (PHP 4 only)
> the special type NULL (including unset variables)
> SimpleXML objects created from empty tags 
> ```
> 
> 其他所有值都被视为 TRUE（包括任何资源）。

还可以看看：[PHP 类型比较表](http://php.net/manual/en/types.comparisons.php)

# mysql - 如何将数组设置为mysql用户变量

> ID：11424969
> 
> 赞同：9
> 
> 时间：2012-07-11T03:07:17.140
> 
> 标签：mysql, arrays

我没想到会这么难，但我试图在 MySQL 中设置一个用户变量来包含一个值数组。我不知道如何做到这一点，所以尝试做一些研究，但很惊讶没有找到答案。我努力了：

```
SET @billable_types = ['client1','client2','client3']; 
```

原因是我想稍后在以下语句中使用该变量：

```
SELECT sum((time_to_sec(timediff(tlg.time_stop, tlg.time_start))/3600)) as billable_hours
    from mod_tmlog_time_log tlg, mod_tmlog_task_list mttl
    where date(tlg.time_start) >= @time_start
          and date(tlg.time_stop) <= @time_stop
          and mttl.type IN (@billable_types)
            and tlg.task_id = mttl.id
    group by start_date
    order by start_date desc; 
```

非常感谢您的帮助。

* * *

快进了一会儿，我最终得到了以下快速而肮脏的解决方案，它没有给我在代码中其他地方重新使用数组的灵活性，但是嘿，这是一项不收费的管理任务，所以我不想再花更多的钱时间就可以了。

```
SELECT WEEKDAY(tlg.time_start) AS day_of_week, date(tlg.time_start) as start_date,
                            sum((time_to_sec(timediff(tlg.time_stop, tlg.time_start))/3600)) as billable_hours
                    from mod_tmlog_time_log tlg, mod_tmlog_task_list mttl
                    where date(tlg.time_start) >= @time_start
                          and date(tlg.time_stop) <= @time_stop
                          and mttl.type IN ('c1','c2','c3')
                            and tlg.task_id = mttl.id
                    group by start_date
                    order by start_date desc; 
```

joostschouten 似乎找到了最优雅的解决方案（我自己还没有测试过），但是下次我写一些需要这个的东西时，我会记得测试它！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-01T09:54:06.727

刚刚在这里找到了答案：[如何在 MySQL 中循环使用数组？](https://stackoverflow.com/questions/8851418/how-to-cycle-with-an-array-in-mysql?rq=1)

```
set @billable_types = 'client1,client2,client3';
select * from mttl where find_in_set(mttl.type, @billable_types); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-23T02:11:44.207

正如 Marc B 提到的，MYSQL 中没有数组变量。

**find_in_set**解决方案的替代方法是使用**SELECT**和**UNION**来模拟数组：

```
SELECT billable_type FROM (
  SELECT 'client1' AS billable_type UNION
  SELECT 'client2' AS billable_type UNION
  SELECT 'client3' AS billable_type) AS t 
```

因此，您的查询将如下所示：

```
SELECT sum((time_to_sec(timediff(tlg.time_stop, tlg.time_start))/3600)) as billable_hours
     from mod_tmlog_time_log tlg, mod_tmlog_task_list mttl
     where date(tlg.time_start) >= @time_start
          and date(tlg.time_stop) <= @time_stop
          and mttl.type IN (

            SELECT billable_type FROM (
              SELECT 'client1' AS billable_type UNION
              SELECT 'client2' AS billable_type UNION
              SELECT 'client3' AS billable_type) AS t

          )
             and tlg.task_id = mttl.id
     group by start_date
     order by start_date desc; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-19T08:22:22.177

如果用户具有 CREATE TABLE 权限，则可以通过创建一个临时的单列表来模拟一个数组。可以使用 SELECT 语句检索表中的一个或多个值。临时表在会话结束时被删除，但最好在不再需要它们时显式删除它们。

```
CREATE TEMPORARY TABLE billable_types (c VARCHAR(16));
INSERT INTO billable_types VALUES ('client1'), ('client2'), ('client3');

SELECT sum((time_to_sec(timediff(tlg.time_stop, tlg.time_start))/3600)) as billable_hours
from mod_tmlog_time_log tlg, mod_tmlog_task_list mttl
where date(tlg.time_start) >= @time_start
      and date(tlg.time_stop) <= @time_stop
      and mttl.type IN (SELECT * FROM billable_types)
        and tlg.task_id = mttl.id
group by start_date
order by start_date desc;

DROP TABLE billable_types; 
```

# ruby - 如何从命令行查看我的 gem（或任何其他 gem）的 gem.description 和 gem.summary 文本（.gemspect 项）？

> ID：11424971
> 
> 赞同：0
> 
> 时间：2012-07-11T03:07:28.930
> 
> 标签：ruby, shell, rubygems, specifications, gemspecs

我在创建 gem 时仔细记录了 .gemspec 文件，如何访问它的内容？具体来说，我想访问 gem.description 和 gem.summary 条目，因为我在那里放了一些非常有用的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T03:39:26.213

我希望有比这更好的答案，阅读 YAML 可能会很烦人，但你可以使用`gem specification GEMNAME`. 这会吐出很多信息，您可能希望将其通过管道传递给 grep。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T14:56:52.177

`gem specification`您可以通过将输出传递到某些东西以提取您想要的内容，从而提供更具可读性的输出。

这可能更清晰，尤其是当描述是多行字符串时：

```
% gem specification rack description | ruby -ryaml -e 'puts YAML.load(STDIN.read)'
Rack provides a minimal, modular and adaptable interface for developing
web applications in Ruby.  By wrapping HTTP requests and responses in
the simplest way possible, it unifies and distills the API for web 
servers, web frameworks, and software in between (the so-called
middleware) into a single method call.

Also see http://rack.github.com/.

% gem specification hoe description | ruby -ryaml -e 'puts YAML.load(STDIN.read)'
Hoe is a rake/rubygems helper for project Rakefiles. It helps you 
manage, maintain, and release your project and includes a dynamic
plug-in system allowing for easy extensibility. Hoe ships with
plug-ins for all your usual project tasks including rdoc generation,
testing, packaging, deployment, and announcement..

See class rdoc for help. Hint: `ri Hoe` or any of the plugins listed
below.

For extra goodness, see: http://seattlerb.rubyforge.org/hoe/Hoe.pdf 
```

# python - 使用 str.split 后处理数据

> ID：11424972
> 
> 赞同：0
> 
> 时间：2012-07-11T03:07:33.113
> 
> 标签：python, python-3.x

我解析`.txt`这样的：

```
def parse_file(src):
    for line in src.readlines():
        if re.search('SecId', line):
            continue
        else:
            cols = line.split(',')
            Time = cols[4]
            output_file.write('{}\n'.format(
                          Time)) 
```

我认为`cols`是我可以使用索引的列表。虽然它成功地打印出我想要的正确结果，但存在一个超出范围的错误：

> 文件“./tdseq.py”，第 37 行，在 parse_file Time = cols[4] IndexError: list index out of range make: *** [all] Error 1

我使用的数据：

```
I10.FE,--,xx,xxxx,13450,tt,tt,tt,33,22,22:33:44 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T03:10:14.773

没有看到数据，很难说。

可能的原因是您假设基于 1 的索引，当一行如下：

`foo,bar,baz,qux`

将被索引为列表中的位置 0,1,2,3。

顺便说一句，**我强烈建议您使用[csv](http://docs.python.org/library/csv.html)模块**解析您的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T03:10:07.763

您收到 IndexError 是因为`cols`其中没有五个元素。也许您的文件中有空行？

另请注意，最好从文件中获取行：

```
for line in src: 
```

如果您正在搜索一个简单的字符串，则不需要正则表达式，这就足够了：

```
if 'SecId' in line:
    continue 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T03:11:47.867

使用`len(cols)`检查。您的输入数据也表明`time_index=3`不是`4`：

```
from __future__ import print_function

def parse_file(input_file):
    time_index = 3
    for line in input_file:
        if 'SecId' not in line:
            cols = line.split(',')
            if len(cols) > time_index:
               time = cols[time_index]
               print(time, file=output_file) 
```

# javascript - 如何一个接一个地禁用复选框？

> ID：11424976
> 
> 赞同：-1
> 
> 时间：2012-07-11T03:08:14.807
> 
> 标签：javascript, jquery

我有两个不同名称的复选框：

```
<input type="checkbox" name="checkbox1" value="checkbox1">
<input type="checkbox" name="checkbox2" value="checkbox2"> 
```

我想实现代码，当复选框1被选中时，复选框2被禁用，当复选框2被选中时，复选框1被禁用。当它未被选中时，它也应该启用另一个。

如何使用 jQuery 或 JavaScript 实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T03:17:18.903

首先，我假设您想做的工作不能通过单选按钮完成，因为这是显而易见的选择。如果可以，这里有几个链接： [http](http://wiki.answers.com/Q/What_are_the_differences_between_radio_buttons_and_checkboxes) ://wiki.answers.com/Q/What_are_the_differences_between_radio_buttons_and_checkboxes http://www.w3schools.com/html/tryit.asp?filename=tryhtml_radio

```
Checkbox 1: <input id="checkbox1" type="checkbox" onchange="onCheckboxChanged();"/>
Checkbox 2: <input id="checkbox2" type="checkbox" onchange="onCheckboxChanged();"/>
<script type="text/javascript">
    //Initialize checkboxes
    onCheckboxChanged();
</script> 
```

JS：

```
var onCheckboxChanged = function(checkbox){
    var checkbox1 = document.getElementById('checkbox1');
    var checkbox2 = document.getElementById('checkbox2');

    if(checkbox1.checked){
        checkbox2.disabled = true;
    }
    else {
        checkbox2.disabled = false;
    }

}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T03:20:24.123

试试这个代码，

html,

```
<input type="checkbox" name="checkbox1" value="checkbox1"/>
<input type="checkbox" name="checkbox2" value="checkbox2"/>​​​​​​​​ 
```

javascript,

```
$('[type="checkbox"]').click(function() {
    if ($(this).is(":checked")) {
        $('[type="checkbox"]').not(this).attr('disabled', 'disabled');
    } else {
        $('[type="checkbox"]').not(this).removeAttr('disabled');
    }

});​ 
```

演示

[http://jsfiddle.net/rsxXd/](http://jsfiddle.net/rsxXd/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T03:24:10.370

这是 jquery 示例[http://jsfiddle.net/XnQzQ/](http://jsfiddle.net/XnQzQ/)

```
$('input[name=checkbox1]').click(function() { 
        if($('input[name=checkbox1]').is(':checked'))
        {
        $('input[name=checkbox2]').attr("disabled", "disabled")
        }
        else
         {
         $('input[name=checkbox2]').removeAttr( "disabled");
         }
    });
   $('input[name=checkbox2]').click(function() { 
    if($('input[name=checkbox2]').is(':checked'))
    {
    $('input[name=checkbox1]').attr("disabled", "disabled")
    }
    else
    {
     $('input[name=checkbox1]').removeAttr( "disabled");
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T03:24:15.280

避免过度使用 jQuery，只使用纯 JavaScript。

**HTML：**

```
<input type="checkbox" id="checkbox1" value="checkbox1" onchange="checker()" />
<input type="checkbox" id="checkbox2" value="checkbox2" onchange="checker()" />​ 
```

**JavaScript：**

```
function checker() {
    var checkbox1 = document.getElementById('checkbox1');
    var checkbox2 = document.getElementById('checkbox2');

    checkbox1.disabled = checkbox2.checked;
    checkbox2.disabled = checkbox1.checked;
}​ 
```

**演示：http:** [//jsfiddle.net/fEpWJ/](http://jsfiddle.net/fEpWJ/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T03:30:32.897

使用 jQuery 很简单：

```
$(document).ready(function() {
   var $cbs = $('input[type="checkbox"][name^="checkbox"]').click(function() {
       $cbs.not(this).prop('disabled', this.checked);
   });​
}); 
```

演示：http: [//jsfiddle.net/j6Jpz/](http://jsfiddle.net/j6Jpz/)

虽然如果这个想法是为了防止同时选中两个复选框，我建议如果你同时启用这两个复选框，但当一个被选中时自动取消选中另一个，对用户来说会更好：

```
$(document).ready(function() {
   var $cbs = $('input[type="checkbox"][name^="checkbox"]').click(function() {
      if (this.checked) $cbs.not(this).prop('checked', false);
   });
}); 
```

演示：http: [//jsfiddle.net/j6Jpz/1/](http://jsfiddle.net/j6Jpz/1/)

注意：我使用的选择器`'input[type="checkbox"][name^="checkbox"]'`，表示查找名称以“复选框”开头的所有复选框类型的输入。如果您为有问题的输入`'input.someClass'`提供了一个通用类 ,这可以简化为。`class="someClass"`

另请注意，我的代码的任一版本都会自动处理更大的复选框组。

# c - 为什么.bss 将全局变量显式初始化为零？

> ID：11424980
> 
> 赞同：0
> 
> 时间：2012-07-11T03:08:57.507
> 
> 标签：c, gcc, assembly, mips

我正在生成 mips 反汇编以模拟它。我需要有大数据来处理它，但我不想有大的程序集文件，所以我想处理一个未初始化的大数组（然后可能在我的模拟器中初始化它......）。所以我需要这个数组是全局的。并且全局变量似乎放在 .bss 部分，以便在实际访问页面时进行初始化。问题出在我的二进制文件中，数组位于 .bss 部分，但显式填充为零......如果我正确理解我在互联网上找到的内容，这不是预期的行为......有没有办法说编译器（或链接器，或加载器......我不太明白哪一个为此做了什么）没有真正在这个数组中放零？或者，我们可以在编译时有一个选项，或者一个 C 指令说我们不' 不希望这个数组被初始化为 0 吗？（我试图改变数组部分**属性**，但它仍然用 0 初始化）。

顺便说一句，我正在使用 objdump 生成我的反汇编文件，它通常会跳过零块，但我确实需要反汇编其他零块，所以我使用“-z”选项。

我真正不明白的是，在我所看的任何地方，都说 .bss 部分并没有真正在二进制文件中放零......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T03:20:20.087

.bss 部分的数据没有存储在编译的目标文件中，因为没有数据——编译器将变量放在该段中正是*因为*它们应该被零初始化。

当操作系统加载可执行文件时，它只会查看 .bss 段的大小，分配那么多内存，然后为您将其初始化为零。通过不将该数据存储在可执行文件中，它可以减少加载时间。

如果您希望使用某些数据初始化数据，请在代码中为其提供初始化程序。然后编译器会将其放入 .data 段（初始化数据）而不是 .bss（未初始化数据）。当操作系统然后加载可执行文件时，它将为数据分配内存，然后从可执行文件中复制它。这需要额外的 I/O，但您的数据会按照您的需要进行显式初始化。

或者，您可以将数据保留在 .bss 段中，然后在运行时自行初始化。如果数据在运行时快速且易于生成，则在启动时重新计算它可能会更快，而不是从磁盘中读取它。但这些情况可能很少见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:54:40.330

I suspect that using the `-z` option is causing `objdump` to show you zeroes for the `.bss`, even though the zeroes are not actually in your binary. Try using `od -t x4` to get a simple hexadecimal dump of what is really in the binary. If `od` shows you blocks of zeroes, then they really are in the binary.

# android - 从 ContentProvider 启动 Activity

> ID：11424981
> 
> 赞同：2
> 
> 时间：2012-07-11T03:09:01.293
> 
> 标签：android, android-activity, android-contentprovider

我有一个内容提供商，它提供来自用户帐户的数据。如果用户未登录，我想在应用程序向内容提供者请求数据时显示登录对话框。可能吗？还是我对这一切都错了？我想另一种解决方案是抛出异常或从内容提供者返回指示错误的数据，并让应用程序处理它，但我觉得第一个解决方案是最好的，因为应用程序不必担心正在登录的用户或登录所需的用户界面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-05-21T10:37:09.917

```
class Provider : ContentProvider() {
    override fun onCreate() = true

    override fun query(
        uri: Uri,
        projection: Array<String>,
        selection: String?,
        selectionArgs: Array<String>?,
        sortOrder: String?
    ): Cursor? {
        context.startActivity(Intent(context, MainActivity::class.java)
            .apply { flags = Intent.FLAG_ACTIVITY_NEW_TASK })
        return null
    }

    override fun getType(uri: Uri) = null

    override fun insert(uri: Uri, values: ContentValues) = null

    override fun delete(uri: Uri, selection: String, selectionArgs: Array<String>) = 0

    override fun update(
        uri: Uri,
        values: ContentValues?,
        selection: String?,
        selectionArgs: Array<String>?
    ) = 0
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T04:08:20.880

想想服务。然而，通常不建议从服务开始活动，因此也可能不是内容提供者。然而，您问题中最令人困惑的部分是“在应用程序向内容提供者请求数据时”这个内容提供者是否可用于多个 android 应用程序？

# xcode - 如何在 Xcode 4.4 中更改团队

> ID：11424986
> 
> 赞同：14
> 
> 时间：2012-07-11T03:09:48.720
> 
> 标签：xcode, provisioning-profile, xcode4.4

在 4.3 和第一次尝试执行基于团队的操作时，例如刷新配置文件，它会要求您登录。它在 4.4 中不再这样做，它只是假设一个团队并刷新......如何做我教 Xcode 有多个团队吗？它在组织者侧栏中的团队下列出了他们，但不会让我刷新他们的个人资料，或在创建新个人资料时选择它们。

澄清一下，每个团队都使用不同的开发人员 ID，我找不到任何方法可以登录到不同的开发人员 ID 以刷新配置文件。将应用程序提交到应用商店时，我仍然*可以*登录到不同的 ID，但这似乎不会影响配置文件刷新登录 ID。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T11:04:14.557

似乎已在 Xcode 4.4.1（昨天，2012 年 8 月 7 日发布）中修复。正如 Ivan 正确指出的那样：似乎所有团队的所有配置文件都是同步的，只要您在所有团队中拥有**相同的 Apple id**。（通过在 Organizer 中从 Xcode 中删除所有配置文件并点击“刷新”来对此进行测试）

**更新：**

如果您在多个团队中拥有不同的 Apple ID，并且仍然缺少登录对话框，则您可能已将凭据保存在钥匙串中。有关解决方法，请参阅此答案的评论 #2 和 #3。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T14:40:46.183

添加新身份（用户/通行证）有一种奇怪的方法。如果你构建和归档然后去分发 -> 保存为企业，然后打开代码签名身份列表，最后会有一个标记为“刷新代码签名身份”的项目。如果您选择它，系统将提示您输入用户名和密码。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-18T06:19:40.520

作为参考，由于我发现此页面正在搜索 XCode 5.1 - 让 XCode 在同一个 Apple ID 上同步新团队，请单击`View Details`任何团队上的“”以查看该特定团队的配置文件，然后点击`refresh`图标。它还将下载添加到 ID 的任何新团队。

# python - 如何为目录中的每个项目创建一个文件夹？

> ID：11424989
> 
> 赞同：2
> 
> 时间：2012-07-11T03:10:06.527
> 
> 标签：python, python-3.x

我无法将我创建的文件夹放到我希望它们去的地方。对于给定文件夹中的每个文件，我想创建一个新文件夹，然后将该文件放入新文件夹中。我的问题是我创建的新文件夹被放在父目录中，而不是我想要的。我的例子：

```
def createFolder():
    dir_name = 'C:\\Users\\Adrian\\Entertainment\\Coding\\Test Folder'
    files = os.listdir(dir_name)
    for i in files:
        os.mkdir(i) 
```

假设我在那个目录中的文件是 Hello.txt 和 Goodbye.txt。当我运行脚本时，它会为这些文件创建新文件夹，但会将它们放在上一层，在“C:\Users\Adrian\Entertainment\Coding.

如何使它们与文件创建在同一位置，AKA 'C:\Users\Adrian\Entertainment\Coding\Test Folder'？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T04:33:46.797

```
import os, shutil

for i in files:
  os.mkdir(os.path.join(dir_name , i.split(".")[0]))
  shutil.copy(os.path.join(dir_name , i), os.path.join(dir_name , i.split(".")[0])) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T03:14:27.203

`os.listdir(dir_name)`仅列出文件的名称，而不是文件的完整路径。要获取文件的路径，请将其加入`dir_name`：

```
os.mkdir(os.path.join(dir_name, i)) 
```

# javascript - 如何让 jQuery 只触发精确绑定的事件

> ID：11424992
> 
> 赞同：0
> 
> 时间：2012-07-11T03:10:18.687
> 
> 标签：javascript, jquery

我有一个场景，我必须将点击事件绑定到外部和内部 div，但是出现了一个问题，我点击内部 div 它将触发 2 个点击事件，包括外部和内部 div 绑定事件。

如何仅为内部 div 触发确切的事件？

在这里，我附上了 jsfiddle 演示：

[http://jsfiddle.net/mochatony/FkCmH/8/](http://jsfiddle.net/mochatony/FkCmH/8/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T03:16:55.247

只需添加`return false;`到小盒子处理程序。

固定 jsFiddle：http: [//jsfiddle.net/brodenbaugh/BMPYd/](http://jsfiddle.net/brodenbaugh/BMPYd/)

```
$('#small-box').click(function(){
    console.log('red box');
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T03:16:51.377

您可以使用该方法防止事件冒泡到父级`.stopPropagation`，正如其名称所暗示的那样。更新链接：http: [//jsfiddle.net/EQpA2/](http://jsfiddle.net/EQpA2/)

```
$('#big-box').click(function(){
    console.log('blue box');     
});

$('#small-box').click(function(e){
    e.stopPropagation();
    console.log('red box');     
}); 
```

​</p>

# ruby-on-rails - 在一个请求中下载多个文件

> ID：11424998
> 
> 赞同：0
> 
> 时间：2012-07-11T03:11:36.320
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我不知道这是否可行，但我只想在一个请求中下载一组 pdf

这是我下载特定发票的方式：

```
def show
   @invoice = Invoice.find_by_invoice_hash params[:hash]

  respond_to do |format|
    format.html
    format.xml do
      send_data File.read( @invoice.xml_path ), type: 'text/xml', filename: "invoice_#{ @invoice.id }.xml", disposition: 'attachment'
    end

    format.pdf do
      render :pdf   => @invoice.hash,
      layout: 'pdf',
      footer: {
        right: "printed at: #{Date.today}"
      }
    end
  end
end 
```

你建议我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T04:41:28.470

HTTP 旨在一次只返回一个文件。您可以将文件 tar 或 zip 压缩在一起并返回该结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T06:14:59.793

HTTP 不关心您在一个响应中发送的内容。请参阅[此答案](https://stackoverflow.com/a/410955/448141)以在 Rails 中发送复杂的响应数据。