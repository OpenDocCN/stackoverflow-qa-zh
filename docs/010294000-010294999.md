# StackOverflow 问答 10294000-10294999

# javascript - Knockoutjs：绑定多个具有相同viewModel属性的html元素

> ID：10294000
> 
> 赞同：1
> 
> 时间：2012-04-24T08:01:57.577
> 
> 标签：javascript, knockout.js

我想将单个 viewModel 的属性与两个 html 元素绑定，但它不起作用。它将模型的属性仅绑定到第一个元素。这样做的原因是我想显示一个具有相同数据的表单（编辑和只读表单视图）。请建议是否有更好的方法来解决这个问题（轻松为表单提供编辑/只读视图）。

以下是我现在想做的事情。

```
<span data-bind="text: name"/>
<input data-bind="value: name" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T08:09:41.303

问题是你`span`没有关闭。您不能使用`<span/>`，因为[`span`](http://www.w3.org/TR/html5/the-span-element.html#the-span-element)它不是[void 元素](http://www.w3.org/TR/html5/syntax.html#void-elements)之一。（自闭合标签仅适用于不能包含任何内容的元素，例如*or*`<br/>`；对于 XHTML，`<input/>`您只需要其中的猜猜你想要包含什么；当 KO 设置 span 的内容时，它会清除浏览器猜测的 span 内的所有内容。`/`*`span``span`*

 *如果`span`正确关闭，它可以工作：

```
<span data-bind="text: name"></span>
<input data-bind="value: name" /> 
```

[实例](http://jsbin.com/udocem)| [来源](http://jsbin.com/udocem/edit#html)*

# objective-c - 我应该怎么做才能使 UIViewController 的子类成为单例？

> ID：10294003
> 
> 赞同：1
> 
> 时间：2012-04-24T08:02:14.267
> 
> 标签：objective-c, xcode

我应该使用什么修改？

这是一个好主意吗？

我注意到 - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil 从未真正被调用

目的是更容易调试。确保应该只有一种形式的表单确实只有一种形式。

其实有很多目的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T11:32:50.513

我不确定在您的情况下使用单例是否是个好主意。但实现它的一种简单方法是通过宏，查看这篇文章：[http ://cocoawithlove.com/2008/11/singletons-appdelegates-and-top-level.html](http://cocoawithlove.com/2008/11/singletons-appdelegates-and-top-level.html)

# algorithm - 用大量和数计算一个总和

> ID：10294007
> 
> 赞同：2
> 
> 时间：2012-04-24T08:02:30.707
> 
> 标签：algorithm, binary, sum, dynamic-programming

有一个任务是计算一个总和，summands 是[bin 中有偶数个 1 的数字](https://oeis.org/A001969)，每个数字都是 4 的幂。问题是最后一个 summand 是 2 ^(64)，所以通常的计算需要很长时间。我认为动态编程在这里可以提供帮助，但我不知道如何在这里使用它。

这是一个例子：

![在此处输入图像描述](../Images/9128f3363599f5cf42b4117a312cfe09.png)

请问，谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:12:23.797

这是计算价值的方法。

您为上限的二进制表示中的每个位数迭代计算该值。对于每个位数，分别计算其二进制表示中具有偶数个 1 的数字和具有奇数个 1 的数字的 1 到 4 度的总和。有了这些值，您应该能够计算 n+1 的值，其中 n 是二进制表示中的位数。

以下是关于如何做到这一点的一些观察：如果您有第 k 次数字的总和与偶数个 1，然后将其乘以 2^k，您将得到这些数字的总和加倍。这些数字仍然会有偶数个。实际上，每个具有 n 位数字且具有偶数个 1 的数字要么是具有 n-1 位数字且具有偶数个 1 的倍数，要么是 x * 2 + 1 其中 x 是具有奇数个 1 并且具有 n - 1 位数。因此，在其二进制表示中具有偶数个 1 且具有 n 位的数字的第 k 度的总和是`Se(n,k) = 2^k * Se(n-1, k) + Sum(a : number with odd number of ones and n-1 digits){(2*a + 1)^k}`。这里我用 Se 来表示偶数个数的总和。现在有趣的部分是第二个总和。它可以使用二项式公式计算：

(2*a + 1)^k = 2^k*a*k + combination(1,k)*(2*a)^(k-1) + ... 1 所以重组后你有： `Sum(a : number with odd number of ones and n digits){(2*a + 1)^k} = 2^k*So(n-1,k) + combination(1, k) * 2^(k-1)*So(n-1,k) + combination(2, k) * 2^(k-2)*So(n-1,k) + ...`

现在，如果您假设您已经为 n-1 计算了 So（二进制表示中具有奇数个数字的总和），您也可以计算这个总和。

您必须为 So(n,k) 编写类似的公式：

So(n,k) = 2^k*(So(n-1, k)) + Sum(a : 偶数个和 n-1 位的数字){(2*a + 1)^k

请记住，您必须为 k = 1, ... 4 计算此值，以便您可以将它们用于下一次迭代。只有一个音符 - 对于 So(n, 1)，你有 So(n, 1) = So(n-1,1)*2 + Se(n-1,1)*2 + 1，类似 Se(n, 1 ) = Se(n-1, 1) * 2 + So(n-1, 1)。

Using these formulas you should be able to compute the value you need quite fast. You need to sum Se(1,4) + Se(2,4) + ... Se(64, 4). The algorithm will work for values quite higher then the given constraints. Please note that the value you are searching for will not fit in any "regular" integer type. You will need to use some kind of BigInteger implementation.

Hope this answers your question.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T09:59:46.753

There's a [formula to calculate the sum of the powers of 4 of all integers from 1 to n](http://mathworld.wolfram.com/PowerSum.html):

sum(k⁴) [for 1<=k<=n] = (6*n⁵ + 15*n⁴ + 10*n³ - n) / 30

在您的问题中，您只需要总结 4 的幂，这些幂在其二进制表示中具有偶数个。而且这个公式不排除具有奇数个1的k。

但是，我的直觉告诉我，具有奇数个 1 的 4 个 k 的幂和应该与具有偶数个 1 的 4 个 k 的幂和大致相同。

事实证明，如果你计算一系列 k 的这两个总和，这些总和偶尔会完全相同，每 32 k 出现一次：

```
n=   0 OddSum=                   0 EvenSum=                   0 = =
n=   1 OddSum=                   1 EvenSum=                   0  
n=   2 OddSum=                  17 EvenSum=                   0  
n=   3 OddSum=                  17 EvenSum=                  81  
n=   4 OddSum=                 273 EvenSum=                  81  
n=   5 OddSum=                 273 EvenSum=                 706  
n=   6 OddSum=                 273 EvenSum=                2002  
n=   7 OddSum=                2674 EvenSum=                2002  
n=   8 OddSum=                6770 EvenSum=                2002  
n=   9 OddSum=                6770 EvenSum=                8563  
n=  10 OddSum=                6770 EvenSum=               18563  
n=  11 OddSum=               21411 EvenSum=               18563  
n=  12 OddSum=               21411 EvenSum=               39299  
n=  13 OddSum=               49972 EvenSum=               39299  
n=  14 OddSum=               88388 EvenSum=               39299  
n=  15 OddSum=               88388 EvenSum=               89924  
n=  16 OddSum=              153924 EvenSum=               89924  
n=  17 OddSum=              153924 EvenSum=              173445  
n=  18 OddSum=              153924 EvenSum=              278421  
n=  19 OddSum=              284245 EvenSum=              278421  
n=  20 OddSum=              284245 EvenSum=              438421  
n=  21 OddSum=              478726 EvenSum=              438421  
n=  22 OddSum=              712982 EvenSum=              438421  
n=  23 OddSum=              712982 EvenSum=              718262  
n=  24 OddSum=              712982 EvenSum=             1050038  
n=  25 OddSum=             1103607 EvenSum=             1050038  
n=  26 OddSum=             1560583 EvenSum=             1050038  
n=  27 OddSum=             1560583 EvenSum=             1581479  
n=  28 OddSum=             2175239 EvenSum=             1581479  
n=  29 OddSum=             2175239 EvenSum=             2288760  
n=  30 OddSum=             2175239 EvenSum=             3098760  
n=  31 OddSum=             3098760 EvenSum=             3098760 = =
n=  32 OddSum=             4147336 EvenSum=             3098760  
n=  33 OddSum=             4147336 EvenSum=             4284681  
n=  34 OddSum=             4147336 EvenSum=             5621017  
n=  35 OddSum=             5647961 EvenSum=             5621017  
n=  36 OddSum=             5647961 EvenSum=             7300633  
n=  37 OddSum=             7522122 EvenSum=             7300633  
n=  38 OddSum=             9607258 EvenSum=             7300633  
n=  39 OddSum=             9607258 EvenSum=             9614074  
n=  40 OddSum=             9607258 EvenSum=            12174074  
n=  41 OddSum=            12433019 EvenSum=            12174074  
n=  42 OddSum=            15544715 EvenSum=            12174074  
n=  43 OddSum=            15544715 EvenSum=            15592875  
n=  44 OddSum=            19292811 EvenSum=            15592875  
n=  45 OddSum=            19292811 EvenSum=            19693500  
n=  46 OddSum=            19292811 EvenSum=            24170956  
n=  47 OddSum=            24172492 EvenSum=            24170956  
n=  48 OddSum=            24172492 EvenSum=            29479372  
n=  49 OddSum=            29937293 EvenSum=            29479372  
n=  50 OddSum=            36187293 EvenSum=            29479372  
n=  51 OddSum=            36187293 EvenSum=            36244573  
n=  52 OddSum=            43498909 EvenSum=            36244573  
n=  53 OddSum=            43498909 EvenSum=            44135054  
n=  54 OddSum=            43498909 EvenSum=            52638110  
n=  55 OddSum=            52649534 EvenSum=            52638110  
n=  56 OddSum=            62484030 EvenSum=            52638110  
n=  57 OddSum=            62484030 EvenSum=            63194111  
n=  58 OddSum=            62484030 EvenSum=            74510607  
n=  59 OddSum=            74601391 EvenSum=            74510607  
n=  60 OddSum=            74601391 EvenSum=            87470607  
n=  61 OddSum=            88447232 EvenSum=            87470607  
n=  62 OddSum=           103223568 EvenSum=            87470607  
n=  63 OddSum=           103223568 EvenSum=           103223568 = =
n=  64 OddSum=           120000784 EvenSum=           103223568  
...
n=4062 OddSum=  110517674755433207 EvenSum=  110790187795938168  
n=4063 OddSum=  110790187795938168 EvenSum=  110790187795938168 = =
n=4064 OddSum=  111062969223019384 EvenSum=  110790187795938168  
n=4065 OddSum=  111062969223019384 EvenSum=  111063237807788793  
n=4066 OddSum=  111062969223019384 EvenSum=  111336556602699529  
n=4067 OddSum=  111336556999378505 EvenSum=  111336556602699529  
n=4068 OddSum=  111336556999378505 EvenSum=  111610413558992905  
n=4069 OddSum=  111610683334189626 EvenSum=  111610413558992905  
n=4070 OddSum=  111885079246199626 EvenSum=  111610413558992905  
n=4071 OddSum=  111885079246199626 EvenSum=  111885079246980586  
n=4072 OddSum=  111885079246199626 EvenSum=  112160014909822442  
n=4073 OddSum=  112160285082869867 EvenSum=  112160014909822442  
n=4074 OddSum=  112435761292440443 EvenSum=  112160014909822442  
n=4075 OddSum=  112435761292440443 EvenSum=  112435761691463067  
n=4076 OddSum=  112711778845418619 EvenSum=  112435761691463067  
n=4077 OddSum=  112711778845418619 EvenSum=  112712050215144108  
n=4078 OddSum=  112711778845418619 EvenSum=  112988609908991164  
n=4079 OddSum=  112988609908992700 EvenSum=  112988609908991164  
n=4080 OddSum=  112988609908992700 EvenSum=  113265712541951164  
n=4081 OddSum=  113265984311095421 EvenSum=  113265712541951164  
n=4082 OddSum=  113543630682195597 EvenSum=  113265712541951164  
n=4083 OddSum=  113543630682195597 EvenSum=  113543631082001485  
n=4084 OddSum=  113821821591246733 EvenSum=  113543631082001485  
n=4085 OddSum=  113821821591246733 EvenSum=  113822094560202110  
n=4086 OddSum=  113821821591246733 EvenSum=  114100830807798926  
n=4087 OddSum=  114100830808584494 EvenSum=  114100830807798926  
n=4088 OddSum=  114380113196106030 EvenSum=  114100830807798926  
n=4089 OddSum=  114380113196106030 EvenSum=  114380386566045167  
n=4090 OddSum=  114380113196106030 EvenSum=  114660215895655167  
n=4091 OddSum=  114660216297816991 EvenSum=  114660215895655167  
n=4092 OddSum=  114660216297816991 EvenSum=  114940592970302463  
n=4093 OddSum=  114940867546334192 EvenSum=  114940592970302463  
n=4094 OddSum=  115221793169753088 EvenSum=  114940592970302463  
n=4095 OddSum=  115221793169753088 EvenSum=  115221793169753088 = =
... 
```

在没有正式证明的情况下，我建议答案是：

((6*n ⁵ + 15*n ⁴ + 10*n ³ - n) / 30) / 2

其中n=2 ^(64) -1。

# javascript - Javascript Fullcalendar - 复制事件

> ID：10294013
> 
> 赞同：5
> 
> 时间：2012-04-24T08:02:52.583
> 
> 标签：javascript, jquery, fullcalendar

我在我的项目中使用 Fullcalendar (http://arshaw.com/fullcalendar)。它通过 json 源获取事件。

我想为用户提供将日历上的一个事件复制到另一天的选项 - 我想为此使用拖动（嗯，这是客户的要求）。

但是拖动似乎是移动一个事件，而不是复制 - 有没有办法获得被拖动事件的“副本”（或复制留在原始位置），所以它看起来像一个复制操作？

我试图在 eventDragStart 回调中复制事件对象，但没有成功。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-07-19T14:21:27.880

下面是我的解决方案，允许用户按住 shift 键复制事件。*请注意，这实际上是在移动原始事件并将副本保留在原始位置。*

我从[这个参考](https://code.google.com/p/fullcalendar/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Milestone%20Summary%20Stars&groupby=&sort=&id=105)开始并创建了以下内容：

```
//Before the fullCalendar object

    var copyKey = false;
    $(document).keydown(function (e) {
        copyKey = e.shiftKey;
    }).keyup(function () {
        copyKey = false;
    });

//then inside the fullCalendar object

    eventDragStart: function (event, jsEvent, ui, view) {
        if (!copyKey) return;
        var eClone = {
            title: event.title,
            start: event.start,
            end: event.end
        };
        $('#calendar').fullCalendar('renderEvent', eClone);
    }, 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T13:47:23.477

尝试这个：

```
eventDrop: function(event, dayDelta, minuteDelta, allDay, revertFunc, jsEvent, ui, view) {
    // Create an event object and copy at least the start date and the title from event
     var eventClone = {
         title:event.title,
         start: event.start,
         end: event.end
     };

     // Render new event with new event object
     $('#calendar').fullCalendar('renderEvent', eventClone);

     // Revert the changes in parent event. To move it back to original position
     revertFunc();
} 
```

这只是想法。我没有测试过这段代码。请让我知道它是如何工作的。谢谢

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-13T14:43:18.590

我意识到这是一个老问题，但是我通过搜索引擎找到了它，所以我最终得到的解决方案可能对其他人有用。

我采用了稍微不同的方法并使用了 jQuery UI Draggable，与设置外部事件的方式相同。

当用户在按住 ctrl 键的情况下拖动事件时，会复制一个事件，这会将原始事件留在原处并创建一个新事件，其中 jQuery 可拖动对象被放置。

```
 // used to track whether the user is holding the control key
  let ctrlIsPressed = false;

  function setEventsCopyable(isCopyable) {
    ctrlIsPressed = !ctrlIsPressed;
    $("#calendar").fullCalendar("option", "eventStartEditable", !isCopyable);
    $(".fc-event").draggable("option", "disabled", !isCopyable);
  }

  // set events copyable if the user is holding the control key
  $(document).keydown(function(e) {
    if (e.ctrlKey && !ctrlIsPressed) {
      setEventsCopyable(true);
    }
  });

  // if control has been released stop events being copyable
  $(document).keyup(function(e) {
    if (ctrlIsPressed) {
      setEventsCopyable(false);
    }
  });

  $("#calendar").fullCalendar({
    defaultView: "basicWeek",
    events: [
      {
        title: "Event 1",
        start: moment(),
        end: moment().add(1, "d")
      },
      {
        title: "Event 2",
        start: moment().add(1, "d"),
        end: moment().add(2, "d")
      }
    ],
    editable: true,
    droppable: true,
    eventAfterAllRender(event, element, view) {
      // make all events draggable but disable dragging
      $(".fc-event").each(function() {
        const $event = $(this);

        // store data so the calendar knows to render an event upon drop
        const event = $event.data("fcSeg").footprint.eventDef;
        $event.data("event", event);

        // make the event draggable using jQuery UI
        $event.draggable({
          disabled: true,
          helper: "clone",
          revert: true,
          revertDuration: 0,
          zIndex: 999,
          stop(event, ui) {
            // when dragging of a copied event stops we must set them
            // copyable again if the control key is still held down
            if (ctrlIsPressed) {
              setEventsCopyable(true);
            }
          }
        });
      });
    }
  }); 
```

工作[代码笔](https://codepen.io/ally-murray/full/JBdaBV/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-04T17:46:17.853

在上述答案的帮助下，我设法解决了这个问题：

```
eventDrop: function (event, delta, revertFunc) {  
                if (copyKey) {
                    var eClone = {
                        title: event.title,
                        start: event.start,
                        end: event.end,
                        id: createGuid(),
                        playlistId: event.playlistId,
                        volume: event.volume,
                        backgroundColor: event.backgroundColor,
                        allDay: false
                    }; 
                    $('#calendar').fullCalendar('renderEvent', eClone, true);

                    revertFunc();
                } 
            }, 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-04T06:13:07.147

我知道这是一个老问题，但我通过搜索找到的结果可能对其他人有用

我不知道是否可以修复您的来源。

在 fullcalendar.js`dragListener` 的`dragStart`函数中，我们看到那`view.hideEventsWithId(seg.footprint.eventDef.id)`是一个去掉原来的函数。

将其注释掉，它将按您的意愿工作。

# python - Python 装饰器最佳实践，使用类与函数

> ID：10294014
> 
> 赞同：70
> 
> 时间：2012-04-24T08:02:58.170
> 
> 标签：python, python-2.7, decorator, syntactic-sugar

据我了解，有两种方法可以做 Python 装饰器，要么使用`__call__`类的 ，要么定义和调用函数作为装饰器。这些方法的优点/缺点是什么？有一种首选方法吗？

示例 1

```
class dec1(object):
    def __init__(self, f):
        self.f = f
    def __call__(self):
        print "Decorating", self.f.__name__
        self.f()

@dec1
def func1():
    print "inside func1()"

func1()

# Decorating func1
# inside func1() 
```

示例 2

```
def dec2(f):
    def new_f():
        print "Decorating", f.__name__
        f()
    return new_f

@dec2
def func2():
    print "inside func2()"

func2()

# Decorating func2
# inside func2() 
```

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-04-24T15:23:22.520

说每种方法是否有“优点”是相当主观的。

但是，对引擎盖下的内容有一个很好的了解将使人们很自然地为每个场合选择最佳选择。

装饰器（谈论函数装饰器）只是一个以函数作为输入参数的可调用对象。Python 有其相当有趣的设计，它允许人们创建除函数之外的其他类型的可调用对象——并且有时可以将其用于创建更可维护或更短的代码。

在 Python 2.3 中添加了装饰器作为“语法快捷方式”

```
def a(x):
   ...

a = my_decorator(a) 
```

除此之外，我们通常将装饰器称为一些“可调用对象”，而不是“装饰器工厂”——当我们使用这种类型时：

```
@my_decorator(param1, param2)
def my_func(...):
   ... 
```

使用 param1 和 param2 对“my_decorator”进行调用 - 然后返回一个将再次调用的对象，这次将“my_func”作为参数。因此，在这种情况下，从技术上讲，“装饰器”是“my_decorator”返回的任何内容，使其成为“装饰器工厂”。

现在，描述的装饰器或“装饰器工厂”通常必须保持一些内部状态。在第一种情况下，它唯一保留的是对原始函数的引用（`f`在您的示例中调用的变量）。“装饰工厂”可能想要注册额外的状态变量（上例中的“param1”和“param2”）。

在作为函数编写的装饰器的情况下，这种额外状态保存在封闭函数内的变量中，并由实际的包装函数作为“非本地”变量访问。如果编写了一个适当的类，它们可以作为实例变量保存在装饰器函数中（这将被视为“可调用对象”，而不是“函数”） - 并且对它们的访问更加明确且更具可读性。

因此，在大多数情况下，您是否喜欢一种方法或另一种方法取决于可读性：对于简短的简单装饰器，函数式方法通常比作为类编写的方法更具可读性 - 而有时更复杂的方法 - 尤其是一种“装饰工厂”将充分利用 Python 编码前的“平面优于嵌套”建议。

考虑：

```
def my_dec_factory(param1, param2):
   ...
   ...
   def real_decorator(func):
       ...
       def wraper_func(*args, **kwargs):
           ...
           #use param1
           result = func(*args, **kwargs)
           #use param2
           return result
       return wraper_func
   return real_decorator 
```

针对这种“混合”解决方案：

```
class MyDecorator(object):
    """Decorator example mixing class and function definitions."""
    def __init__(self, func, param1, param2):
        self.func = func
        self.param1, self.param2 = param1, param2

    def __call__(self, *args, **kwargs):
        ...
        #use self.param1
        result = self.func(*args, **kwargs)
        #use self.param2
        return result

def my_dec_factory(param1, param2):
    def decorator(func):
         return MyDecorator(func, param1, param2)
    return decorator 
```

**更新**：缺少“纯类”装饰器形式

现在，请注意“混合”方法采用“两全其美”的方法，试图保持最短且更易读的代码。一个完全用类定义的“装饰器工厂”要么需要两个类，要么需要一个“模式”属性来知道它是被调用来注册装饰函数还是实际调用最终函数：

```
class MyDecorator(object):
   """Decorator example defined entirely as class."""
   def __init__(self, p1, p2):
        self.p1 = p1
        ...
        self.mode = "decorating"

   def __call__(self, *args, **kw):
        if self.mode == "decorating":
             self.func = args[0]
             self.mode = "calling"
             return self
         # code to run prior to function call
         result = self.func(*args, **kw)
         # code to run after function call
         return result

@MyDecorator(p1, ...)
def myfunc():
    ... 
```

最后是一个定义了两个类的纯“白领”装饰器——也许让事情更加分离，但将冗余增加到不能说它更易于维护的程度：

```
class Stage2Decorator(object):
    def __init__(self, func, p1, p2, ...):
         self.func = func
         self.p1 = p1
         ...
    def __call__(self, *args, **kw):
         # code to run prior to function call
         ...
         result = self.func(*args, **kw)
         # code to run after function call
         ...
         return result

class Stage1Decorator(object):
   """Decorator example defined as two classes.

   No "hacks" on the object model, most bureacratic.
   """
   def __init__(self, p1, p2):
        self.p1 = p1
        ...
        self.mode = "decorating"

   def __call__(self, func):
       return Stage2Decorator(func, self.p1, self.p2, ...)

@Stage1Decorator(p1, p2, ...)
def myfunc():
    ... 
```

# 2018 年更新

几年前我写了上面的文字。我最近想出了一个我更喜欢的模式，因为它创建了“更扁平”的代码。

基本思想是使用函数，但`partial`如果在用作装饰器之前使用参数调用它，则返回自身的对象：

```
from functools import wraps, partial

def decorator(func=None, parameter1=None, parameter2=None, ...):

   if not func:
        # The only drawback is that for functions there is no thing
        # like "self" - we have to rely on the decorator 
        # function name on the module namespace
        return partial(decorator, parameter1=parameter1, parameter2=parameter2)
   @wraps(func)
   def wrapper(*args, **kwargs):
        # Decorator code-  parameter1, etc... can be used 
        # freely here
        return func(*args, **kwargs)
   return wrapper 
```

就是这样 - 使用这种模式编写的装饰器可以立即装饰一个函数，而无需首先“调用”：

```
@decorator
def my_func():
    pass 
```

或自定义参数：

```
@decorator(parameter1="example.com", ...):
def my_func():
    pass 
```

**2019** - 使用 Python 3.8 和仅位置参数，最后一种模式将变得更好，因为`func`参数可以声明为仅位置参数，并且需要命名参数；

```
def decorator(func=None, *, parameter1=None, parameter2=None, ...): 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-06-04T16:41:45.553

我大多同意 jsbueno：没有一种正确的方法。这取决于实际情况。但我认为 def 在大多数情况下可能会更好，因为如果你上课，大多数“真正的”工作`__call__`无论如何都会完成。此外，非函数的可调用对象非常少见（除了实例化类的显着例外），人们通常不希望出现这种情况。此外，与实例变量相比，局部变量通常更容易让人们跟踪，这仅仅是因为它们的范围更有限，尽管在这种情况下，实例变量可能仅用于`__call__`（`__init__`只需从参数中复制它们）。

不过，我不得不不同意他的混合方法。这是一个有趣的设计，但我认为它可能会让你或几个月后看到它的其他人感到困惑。

切线：无论您使用类还是函数，都应该使用[`functools.wraps`](https://docs.python.org/2/library/functools.html#functools.wraps)，它本身就是用作装饰器（我们必须更深入！），如下所示：

```
import functools

def require_authorization(f):
    @functools.wraps(f)
    def decorated(user, *args, **kwargs):
        if not is_authorized(user):
            raise UserIsNotAuthorized
        return f(user, *args, **kwargs)
    return decorated

@require_authorization
def check_email(user, etc):
    # etc. 
```

这使得`decorated`看起来像`check_email`例如通过改变它的`func_name`属性。

无论如何，这通常是我所做的，也是我看到周围其他人所做的，除非我想要一个装饰工厂。在这种情况下，我只需添加另一个级别的 def：

```
def require_authorization(action):
    def decorate(f):
        @functools.wraps(f):
        def decorated(user, *args, **kwargs):
            if not is_allowed_to(user, action):
                raise UserIsNotAuthorized(action, user)
            return f(user, *args, **kwargs)
        return decorated
    return decorate 
```

顺便说一句，我也会提防过度使用装饰器，因为它们会使跟踪堆栈跟踪变得非常困难。

管理可怕的堆栈跟踪的一种方法是制定不大幅改变被装饰者行为的策略。例如

```
def log_call(f):
    @functools.wraps(f)
    def decorated(*args, **kwargs):
        logging.debug('call being made: %s(*%r, **%r)',
                      f.func_name, args, kwargs)
        return f(*args, **kwargs)
    return decorated 
```

保持堆栈跟踪健全的一种更极端的方法是让装饰器返回未修改的被装饰者，如下所示：

```
import threading

DEPRECATED_LOCK = threading.Lock()
DEPRECATED = set()

def deprecated(f):
    with DEPRECATED_LOCK:
        DEPRECATED.add(f)
    return f

@deprecated
def old_hack():
    # etc. 
```

如果在知道`deprecated`装饰器的框架内调用函数，这将很有用。例如

```
class MyLamerFramework(object):
    def register_handler(self, maybe_deprecated):
        if not self.allow_deprecated and is_deprecated(f):
            raise ValueError(
                'Attempted to register deprecated function %s as a handler.'
                % f.func_name)
        self._handlers.add(maybe_deprecated) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-03-27T11:02:45.673

在这个问题最初提出近七年后，我敢于对这个问题提出不同的方法。以前的任何（非常好的！）答案中都没有描述此版本。

这里已经很好地描述了使用类和函数作为装饰器的最大区别。为了完整起见，我将再次简要介绍一下，但为了更实用，我将使用一个具体的示例。

假设您想编写一个装饰器来缓存某些缓存服务中“纯”函数的结果（那些没有副作用，因此返回值是确定性的，给定参数）。

这里有两个等效且非常简单的装饰器，在两种风格（功能和面向对象）中：

```
import json
import your_cache_service as cache

def cache_func(f):
    def wrapper(*args, **kwargs):
        key = json.dumps([f.__name__, args, kwargs])
        cached_value = cache.get(key)
        if cached_value is not None:
            print('cache HIT')
            return cached_value
        print('cache MISS')
        value = f(*args, **kwargs)
        cache.set(key, value)
        return value
    return wrapper

class CacheClass(object):
    def __init__(self, f):
        self.orig_func = f

    def __call__(self, *args, **kwargs):
        key = json.dumps([self.orig_func.__name__, args, kwargs])
        cached_value = cache.get(key)
        if cached_value is not None:
            print('cache HIT')
            return cached_value
        print('cache MISS')
        value = self.orig_func(*args, **kwargs)
        cache.set(key, value)
        return value 
```

我想这很容易理解。这只是一个愚蠢的例子！为简单起见，我将跳过所有错误处理和边缘情况。无论如何，您不应该使用 StackOverflow 中的 ctrl+c/ctrl+v 代码，对吧？;)

可以注意到，两个版本本质上是相同的。面向对象的版本比函数的版本更长更冗长，因为我们必须定义方法并使用变量`self`，但我认为它更具可读性。这个因素对于更复杂的装饰器变得非常重要。我们马上就会看到。

上面的装饰器是这样使用的：

```
@cache_func
def test_one(a, b=0, c=1):
    return (a + b)*c

# Behind the scenes:
#     test_one = cache_func(test_one)

print(test_one(3, 4, 6))
print(test_one(3, 4, 6))

# Prints:
#     cache MISS
#     42
#     cache HIT
#     42

@CacheClass
def test_two(x, y=0, z=1):
    return (x + y)*z

# Behind the scenes:
#     test_two = CacheClass(test_two)

print(test_two(1, 1, 569))
print(test_two(1, 1, 569))

# Prints:
#     cache MISS
#     1138
#     cache HIT
#     1138 
```

但是现在假设您的缓存服务支持为每个缓存条目设置 TTL。您需要在装饰时间定义它。怎么做？

传统的函数式方法是添加一个新的包装层，它返回一个配置的装饰器（在这个问题的其他答案中有更好的建议）：

```
import json
import your_cache_service as cache

def cache_func_with_options(ttl=None):
    def configured_decorator(*args, **kwargs):
        def wrapper(*args, **kwargs):
            key = json.dumps([f.__name__, args, kwargs])
            cached_value = cache.get(key)
            if cached_value is not None:
                print('cache HIT')
                return cached_value
            print('cache MISS')
            value = f(*args, **kwargs)
            cache.set(key, value, ttl=ttl)
            return value
        return wrapper
    return configured_decorator 
```

它是这样使用的：

```
from time import sleep

@cache_func_with_options(ttl=100)
def test_three(a, b=0, c=1):
    return hex((a + b)*c)

# Behind the scenes:
#     test_three = cache_func_with_options(ttl=100)(test_three)

print(test_three(8731))
print(test_three(8731))
sleep(0.2)
print(test_three(8731))

# Prints:
#     cache MISS
#     0x221b
#     cache HIT
#     0x221b
#     cache MISS
#     0x221b 
```

这个还是可以的，但我不得不承认，即使是一位经验丰富的开发人员，有时我也会看到自己花费大量时间来理解遵循这种模式的更复杂的装饰器。这里棘手的部分是实际上不可能“取消嵌套”函数，因为内部函数需要在外部函数范围内定义的变量。

面向对象的版本可以提供帮助吗？我认为是这样，但是如果您遵循基于类的结构，它最终会得到与功能结构相同的嵌套结构，或者更糟糕的是，使用标志来保存装饰器正在执行的操作的状态（不是好的）。

因此，与其在方法中接收要装饰的函数并在`__init__`方法中处理包装和装饰器参数`__call__`（或使用多个类/函数这样做，这对我来说太复杂了），我的建议是处理装饰器方法中的参数`__init__`，接收方法中的函数，`__call__`最后在`__call__`.

它看起来像这样：

```
import json
import your_cache_service as cache

class CacheClassWithOptions(object):
    def __init__(self, ttl=None):
        self.ttl = ttl

    def __call__(self, f):
        self.orig_func = f
        return self.wrapper

    def wrapper(self, *args, **kwargs):
        key = json.dumps([self.orig_func.__name__, args, kwargs])
        cached_value = cache.get(key)
        if cached_value is not None:
            print('cache HIT')
            return cached_value
        print('cache MISS')
        value = self.orig_func(*args, **kwargs)
        cache.set(key, value, ttl=self.ttl)
        return value 
```

用法如预期：

```
from time import sleep

@CacheClassWithOptions(ttl=100)
def test_four(x, y=0, z=1):
    return (x + y)*z

# Behind the scenes:
#     test_four = CacheClassWithOptions(ttl=100)(test_four)

print(test_four(21, 42, 27))
print(test_four(21, 42, 27))
sleep(0.2)
print(test_four(21, 42, 27))

# Prints:
#     cache MISS
#     1701
#     cache HIT
#     1701
#     cache MISS
#     1701 
```

由于任何事情都是完美的，最后一种方法有两个小缺点：

1.  不能直接使用装饰`@CacheClassWithOptions`。`@CacheClassWithOptions()`即使我们不想传递任何参数，我们也必须使用括号。这是因为我们需要先创建实例，然后再尝试装饰，所以`__call__`方法会接收到要装饰的函数，而不是在`__init__`. 可以解决此限制，但它非常hacky。最好简单地接受需要这些括号。

2.  没有明显的地方可以`functools.wraps`在返回的包装函数上应用装饰器，这在函数版本中是显而易见的。但是，可以通过`__call__`在返回之前在内部创建一个中间函数来轻松完成。它只是看起来不太好，如果您不需要这样做的好东西，最好将其排除在外`functools.wraps`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-24T08:42:56.090

有两种不同的装饰器实现。其中一个使用类作为装饰器，另一个使用函数作为装饰器。您必须根据需要选择首选实施。

例如，如果您的装饰器做了很多工作，那么您可以使用类作为装饰器，如下所示：

```
import logging
import time
import pymongo
import hashlib
import random

DEBUG_MODE = True

class logger(object):

        def __new__(cls, *args, **kwargs):
                if DEBUG_MODE:
                        return object.__new__(cls, *args, **kwargs)
                else:
                        return args[0]

        def __init__(self, foo):
                self.foo = foo
                logging.basicConfig(filename='exceptions.log', format='%(levelname)s %   (asctime)s: %(message)s')
                self.log = logging.getLogger(__name__)

        def __call__(self, *args, **kwargs):
                def _log():
                        try:
                               t = time.time()
                               func_hash = self._make_hash(t)
                               col = self._make_db_connection()
                               log_record = {'func_name':self.foo.__name__, 'start_time':t, 'func_hash':func_hash}
                               col.insert(log_record)
                               res = self.foo(*args, **kwargs)
                               log_record = {'func_name':self.foo.__name__, 'exc_time':round(time.time() - t,4), 'end_time':time.time(),'func_hash':func_hash}
                               col.insert(log_record)
                               return res
                        except Exception as e:
                               self.log.error(e)
                return _log()

        def _make_db_connection(self):
                connection = pymongo.Connection()
                db = connection.logger
                collection = db.log
                return collection

        def _make_hash(self, t):
                m = hashlib.md5()
                m.update(str(t)+str(random.randrange(1,10)))
                return m.hexdigest() 
```

# grails - 如何获取登录grails的当前用户的ID？

> ID：10294015
> 
> 赞同：5
> 
> 时间：2012-04-24T08:03:02.757
> 
> 标签：grails

我想显示有关登录用户的信息，例如在注册期间给出的详细信息等...怎么做？由于我是 grails 的新手，请帮助！我正在使用 Spring 安全插件

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-24T08:18:32.240

那么您可以使用 springSecurityService 在控制器中获取一些用户信息：

```
 class MyController {
      def springSecurityService

      def myAction() {
        def principal = springSecurityService.principal
        String username = principal.username
        ...
      }
     } 
```

或者在 gsp 中

```
 <sec:loggedInUserInfo field="username" /> 
```

这是一个很笼统的问题。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-24T08:17:24.210

定义（在需要用户 ID 的控制器或服务中）：

```
SpringSecurityService springSecurityService 
```

并尝试：

```
springSecurityService.currentUser.id //loads user from db, and returns its id 
```

或者：

```
springSecurityService.principal.id //if you need just id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-24T14:10:37.683

在您的服务或控制器类的顶部添加此 @the

```
def securityService 
```

这将返回当前的用户 ID。

```
securityService.currentUser.id 
```

# c - 将 SSL 集成到使用 BSD 套接字的程序中

> ID：10294018
> 
> 赞同：7
> 
> 时间：2012-04-24T08:03:14.170
> 
> 标签：c, sockets, ssl, openssl

我有一个 TCP 网络库，它实现了一堆协议（redis、http 等），它们是使用 BSD 套接字实现的。

许多代码使用 select() 和其他用于 BSD 套接字的函数。我是否正确假设这不适用于 SSL 套接字？还是他们会按原样工作？

我只是想知道 SSL 和 BSD 套接字是否如此不同以至于它们需要完全不同的实现方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T19:31:46.360

假设您指的是 OpenSSL，它位于套接字的顶部，不会取代它。因此，所有直接套接字操作，如`select()`，仍然有效。但是，不同之处在于 OpenSSL 为您处理读取和写入，因此您可以替换`recv()`为`ssl_read()`和`send()`，`ssl_write()`但您仍然可以（并且在某些情况下需要）`select()`直接使用。但是，您不能随时调用它，您必须等到 OpenSSL 告诉您调用它。因此，例如，如果您有一个读取循环`select()`首先调用，然后`recv()`仅在`select()`报告可读性时调用，您将不得不交换该逻辑。先调用`ssl_read()`，再调用`select`() 仅当`ssl_read()`返回`SSL_ERROR_WANT_READ`或时`SSL_ERROR_WANT_WRITE`（注意`ssl_read()`可以在内部进行写操作，也`ssl_write()`可以在内部进行读操作）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T08:12:14.760

想到的一件事是，您不应该在运行 ssl 连接的 fd 上进行选择。那是因为它可能会说你可以在 ssl_read 阻塞时读取它。例如，这是由于 SSL 进行密钥重新协商而不是应用程序数据变得可用而导致的。这就是陷阱之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-23T00:44:37.367

这可能会迟到，但可能会为未来的用户提供很好的参考。[在 url http://developerweb.net/viewtopic.php?id=6824](http://developerweb.net/viewtopic.php?id=6824)上使用 select() 函数有一个很好的线程。引用的一个例子如下

```
int sslsock_handle_nbio (ssl, ret, totv)
    void            *ssl;           /* -> the SSL info                      */
    int             ret;            /* the SSL I/O function return value    */
    struct timeval  *totv;          /* -> timeout info, or NULL             */
{
    int     sfd, i;
    fd_set  rset, wset;

    sfd = SSL_get_fd (ssl);
    i = SSL_get_error (ssl, ret);

    if (i == SSL_ERROR_WANT_READ) {
    do {
        FD_ZERO (&rset);
        FD_SET (sfd, &rset);
        i = select (sfd + 1, &rset, NULL, NULL, totv);
    } while ((i < 0) && (errno == EINTR));
    if (i == 0) {
        /* the select() timed out */
        ret = -2;
        errno = ETIMEDOUT;
    } else {
        /* either an error, or it's readable */
        ret = i;
    }
    } else if (i == SSL_ERROR_WANT_WRITE) {
    do {
        FD_ZERO (&wset);
        FD_SET (sfd, &wset);
        i = select (sfd + 1, NULL, &wset, NULL, totv);
    } while ((i < 0) && (errno == EINTR));
    if (i == 0) {
        /* the select() timed out */
        ret = -2;
        errno = ETIMEDOUT;
    } else {
        /* either an error, or it's writable */
        ret = i;
    }
    }
    /* else, leave "ret" alone, and return it as-is */

    return (ret);
} 
```

这仅在执行`SSL_read()`or之后`SSL_write()`。

# devexpress - 如何在 foreach 循环中获取 DevExpress.Web.ASPxGridView.ASPxGridView 的行元素

> ID：10294027
> 
> 赞同：1
> 
> 时间：2012-04-24T08:03:48.633
> 
> 标签：devexpress, asp.net-3.5

我在我的应用程序中使用了 Dev Express.Web.ASPxGridView.ASPxGridView 控件，我想隐藏 ASPGridview 的 DataItemTemplate 中的链接按钮和锚标记的可见性。

我这样做了

```
protected void objGrid_DataBound(object sender, EventArgs e)
{

    foreach (GridViewRow dr in objGrid.Rows)
    {
        LinkButton objedit = (LinkButton)dr.FindControl("lnbEdit");
        objedit.Visible = false;
    }
} 
```

但我得到错误，因为 objGrid 没有行的属性或方法。那么，如何在 asp.net 3.5 C# 中将 foreach 用于 DevExpress 控件的 ASPxGridview 作为数据绑定事件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:24:13.637

您应该使用[ASPxGridView.FindRowCellTemplateControl](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewASPxGridView_FindRowCellTemplateControltopic)来访问 DataCellTemplate 中定义的控件。

# php - PHP: `array(&$this)` 是什么意思？

> ID：10294028
> 
> 赞同：11
> 
> 时间：2012-04-24T08:03:58.090
> 
> 标签：php, this

在PHP中，我想知道是什么`array(&$this)`意思。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-24T08:07:00.540

这是一个初始化包含一个元素的数组的构造：对初始化[数组的对象的](http://php.net/manual/en/language.types.array.php)[引用](http://www.php.net/manual/en/language.references.whatare.php)。在每个类中，您可以使用[`$this`](http://php.net/manual/en/language.oop5.basic.php).

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-24T08:05:42.703

Its PHPs [pass by reference](http://php.net/manual/en/language.references.pass.php) construction. Typically this means that a reference to the parameter is passed to the function instead of a copy of the value, so that modifications inside the function affect the object.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T08:08:57.100

这是创建一个具有单个元素的数组。元素是对执行它的对象的引用。有关更多信息，请参阅有关[通过引用传递的文档。](http://php.net/manual/en/language.references.pass.php)

# python - Python：用对应的 ascii 替换印刷引号、破折号等

> ID：10294032
> 
> 赞同：23
> 
> 时间：2012-04-24T08:04:45.590
> 
> 标签：python, string

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2017-01-06T23:49:50.663

那这个呢？它首先创建翻译表，但老实说，我认为没有它你就无法做到这一点。

```
transl_table = dict( [ (ord(x), ord(y)) for x,y in zip( u"‘’´“”–-",  u"'''\"\"--") ] ) 

with open( "a.txt", "w", encoding = "utf-8" ) as f_out : 
    a_str = u" ´funny single quotes´ long–-and–-short dashes ‘nice single quotes’ “nice double quotes”   "
    print( " a_str = " + a_str, file = f_out )

    fixed_str = a_str.translate( transl_table )
    print( " fixed_str = " + fixed_str, file = f_out  ) 
```

我无法将此打印运行到控制台（在 Windows 上），所以我不得不写入 txt 文件。
a.txt 文件中的输出如下所示：

> a_str = '有趣的单引号' long–and–short dashes '漂亮的单引号' “漂亮的双引号” fixed_str = '有趣的单引号' long--and--short dashes '漂亮的单引号' “漂亮的双引号”

顺便说一句，上面的代码在 Python 3 中工作。如果你需要它用于 Python 2，它可能需要一些修复，因为在两个版本的语言中处理 Unicode 字符串的不同

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-02-23T11:06:30.057

没有这样的“正确”解决方案，因为对于任何给定的 Unicode 字符，都没有定义“ASCII 对应”。

例如，将看似简单的字符映射到 ASCII 单引号和双引号以及连字符。首先，让我们生成所有带有官方名称的 Unicode 字符。其次，让我们根据名称查找所有引号、连字符和破折号：

```
#!/usr/bin/env python3

import unicodedata

def unicode_character_name(char):
    try:
        return unicodedata.name(char)
    except ValueError:
        return None

# Generate all Unicode characters with their names
all_unicode_characters = []
for n in range(0, 0x10ffff):    # Unicode planes 0-16
    char = chr(n)               # Python 3
    #char = unichr(n)           # Python 2
    name = unicode_character_name(char)
    if name:
        all_unicode_characters.append((char, name))

# Find all Unicode quotation marks
print (' '.join([char for char, name in all_unicode_characters if 'QUOTATION MARK' in name]))
# " « » ‘ ’ ‚ ‛ “ ” „ ‟ ‹ › ❛ ❜ ❝ ❞ ❟ ❠ ❮ ❯ ⹂ 〝 〞 〟 ＂   

# Find all Unicode hyphens
print (' '.join([char for char, name in all_unicode_characters if 'HYPHEN' in name]))
# - ­ ֊ ᐀ ᠆ ‐ ‑ ‧ ⁃ ⸗ ⸚ ⹀ ゠ ﹣ － 

# Find all Unicode dashes
print (' '.join([char for char, name in all_unicode_characters if 'DASH' in name and 'DASHED' not in name]))
# ‒ – — ⁓ ⊝ ⑈ ┄ ┅ ┆ ┇ ┈ ┉ ┊ ┋ ╌ ╍ ╎ ╏ ⤌ ⤍ ⤎ ⤏ ⤐ ⥪ ⥫ ⥬ ⥭ ⩜ ⩝ ⫘ ⫦ ⬷ ⸺ ⸻ ⹃ 〜 〰 ︱ ︲ ﹘ 
```

正如你所看到的，这个例子很简单，但有很多问题。Unicode 中有许多引号看起来不像 US-ASCII 中的引号，并且 Unicode 中有许多连字符看起来不像 US-ASCII 中的连字符减号。

还有很多问题。例如：

*   “SWUNG DASH” (⁓) 符号应该替换为 ASCII 连字符 (-) 还是波浪号 (~)？
*   “CANADIAN SYLLABICS HYPHEN” (᐀) 是否应替换为 ASCII 连字符 (-) 或等号 (=)？
*   应该用 ASCII 引号 (")、撇号 (') 还是小于号 (<) 替换“单左点角引号”(‹)？

要建立“正确”的 ASCII 对应物，需要有人根据使用上下文回答这些问题。这就是为什么您的问题的所有解决方案都以一种或另一种方式基于映射字典。所有这些解决方案都会提供不同的结果。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-09-04T17:45:18.743

[您可以在unidecode](https://github.com/avian2/unidecode)包之上构建。

这非常慢，因为我们首先将所有 unicode 规范化为组合形式，然后尝试查看 unidecode 将其变成什么。如果我们匹配一个拉丁字母，那么我们实际上使用的是原始 NFC 字符。如果不是，那么我们会产生任何 degarbling unidecode 建议的内容。这只会留下强调的字母，但会转换其他所有内容。

```
import unidecode
import unicodedata
import re

def char_filter(string):
    latin = re.compile('[a-zA-Z]+')
    for char in unicodedata.normalize('NFC', string):
        decoded = unidecode.unidecode(char)
        if latin.match(decoded):
            yield char
        else:
            yield decoded

def clean_string(string):
    return "".join(char_filter(string))

print(clean_string(u"vis-à-vis “Beyoncé”’s naïve papier–mâché résumé"))
# prints vis-à-vis "Beyoncé"'s naïve papier-mâché résumé 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T10:01:59.477

您可以使用 str.translate() 方法（[http://docs.python.org/library/stdtypes.html#str.translate](http://docs.python.org/library/stdtypes.html#str.translate)）。但是，请阅读与 Unicode 相关的文档——翻译表有另一种形式：unicode 序数——> unicode 字符串（通常为 char）或 None。

好吧，但它需要字典。无论如何，您必须捕获替代品。如果没有任何表或数组，你想如何做到这一点？您可以将 str.replace() 用于单个字符，但这将是低效的。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-24T08:36:51.097

此工具将标准化 Markdown 中的标点符号：http: [//johnmacfarlane.net/pandoc/README.html](http://johnmacfarlane.net/pandoc/README.html)

> -S, --smart 产生印刷正确的输出，将直引号转换为弯引号，--- 转换为 em-dashes，-- 转换为 en-dashes，以及 ... 转换为省略号。在某些缩写之后插入不间断空格，例如“先生”。（注：此选项仅在输入格式为markdown或textile时有效。当输入格式为texture或输出格式为latex或context时自动选择。）

它是haskell，所以你必须弄清楚接口。

# c# - How to make unit tests for methods/events

> ID：10294036
> 
> 赞同：0
> 
> 时间：2012-04-24T08:04:59.677
> 
> 标签：c#, asp.net, unit-testing, nunit

I need to make units tests for an ASP.net application. Since i never did it. I was wondering how i could make tests for events(click etc...) or to check what a method is returning...

Do you have some example to share? Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T16:26:29.547

您可以使用 [http://watin.org/之类的工具](http://watin.org/)

您可以在其中以下列方式测试您的 asp.net 代码。

```
[Test]
public void ExampleTest()
{
IE ie = new IE("http://www.google.com"); 

ie.TextField(Find.ByName("q")).TypeText("WatiN"); 
ie.Button(Find.ByValue("Google Search")).Click(); 
Link link = ie.Link(Find.By("href", "http://watin.sourceforge.net/"));

Assert.That(link.Text == "WatiN Home"); 
} 
```

要对您的业务类进行单元测试，您可以使用 Nunit 和 rhino 模拟作为模拟框架

您可以在以下位置找到 moq，这是您可以使用的其他模拟框架。

[http://code.google.com/p/moq/](http://code.google.com/p/moq/)

对于 UI 测试，您可以使用 Selenium 或 Visual Studio 中的 codedUI 测试。对于项目结构，使用 MVP 或 MVC 作为框架，这将提供关注点分离，您可以使用 NUNIT 或其他单元测试框架测试您的模型逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T16:42:53.973

这是 ASP.NET 的一大设计缺陷，也是很多新项目都在 ASP.NET MVC 中开发的原因。正如 François Wahl 所说，为了使您的项目更具可测试性，您应该将尽可能多的业务逻辑转移到您可以编写单元测试的演示者类中。

要测试您的 ASP.NET 事件处理程序，您确实需要针对 UI 本身进行测试。像[Selenium](http://seleniumhq.org/)这样的工具对此很有用。它在客户端上运行，因此与您在服务器上运行的任何平台完全无关。它还附带了一个 Firefox 插件来帮助您自动化测试用例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T09:34:03.880

您可能可以从阅读[NUnit 快速入门](http://www.nunit.org/index.php?p=quickStart&r=2.2.10)开始，如果它需要变得更加特定于 ASP.NET，也许这篇[文章尤其适用于 NUnit 和 ASP.NET](http://www.hanselman.com/blog/NUnitUnitTestingOfASPNETPagesBaseClassesControlsAndOtherWidgetryUsingCassiniASPNETWebMatrixVisualStudioWebDeveloper.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T11:36:21.807

您会发现很难针对文件后面的代码编写单元测试，因为您最终会遇到依赖 HttpContext 存在的方法/事件。HttpContext 是一个不继承自接口本身的密封类。这使得它不可能嘲笑。

鉴于可能必须存在有效​​的 HttpContext（例如重定向），您的单元测试将抛出“对象未初始化”异常。

您可以通过应用 Model-View-Presenter (MVP) 模式或类似模式使 asp.net 应用程序对单元测试更加友好，而不是在遇到这些问题时处理它们。将 UI 从业务逻辑和模型中分离出来。

这个想法是将所有业务逻辑从代码隐藏文件中移出到一个单独的纯 C# 类（The Presenter）中，您现在也可以针对该类编写单元测试。

您可以在此处找到有关 ASP.NET 和 MVP 的更多信息：http: [//msdn.microsoft.com/en-us/magazine/cc188690.aspx](http://msdn.microsoft.com/en-us/magazine/cc188690.aspx)

我并不是说重构所有代码以应用 MVP，我只是建议将业务逻辑尽可能移动到您测试的单独类中，使用 MVP 作为指导。

# database - How do you update ManyToOne field in a form?

> ID：10294037
> 
> 赞同：0
> 
> 时间：2012-04-24T08:05:02.097
> 
> 标签：database, forms, playframework-2.0

The questions is all in the title :)

Using Play! Framework 2.0, I have a Model with a ManyToOne field to an other Model.

In the form, I show it with a Select id -> toString, but when I hit submit, I've got "Invalid value", because it expect an instance of that Model (I guess).

How can I do this?

Thanks for your help!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T09:35:21.530

此选择的名称必须设置为`property.id`

IE。如果你的模型看起来像

```
@Entity
public class Entry extends Model {

    @Id
    public Long id;

    public String title;

    @ManyToOne
    public User user;
} 
```

你的选择应该这样写：

```
@select(
    yourForm("user.id"),
    options(User.options),
    'id -> "user",
    '_label -> "Select user"
) 
```

# tomcat - Client transferring file from web server to another machine

> ID：10294039
> 
> 赞同：0
> 
> 时间：2012-04-24T08:05:16.947
> 
> 标签：tomcat, servlets

There is a Tomcat web server, say WS1, on which I have all my servlets and HTML pages. A client of WS1 uploads a file on WS1\. That file is then read, encrypted and stored on WS1 in some other folder.

What I have to do is send/transfer this encrypted file on some other machine, say machine A. Suppose client searches for the file he has stored, that file should be downloaded to WS1 from the machine A. WS1 will perform decryption and that decrypted file should be sent on the client.

I have completed upto the encryption part but got stuck with the file transfer. How can I achieve this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:58:46.147

这里一个。“文件应该从机器 A 下载到 WS1”或者应该是 b。“文件应该从 Web 服务器下载到机器 A”。

这实际上与您的问题标题和问题主体相矛盾。

如果“b”。是你想要的（可能应该是），t

然后，您需要编写代码从 Web 服务器 WS1 下载文件。

这是使用 Servlet 下载文件的摘录。

```
String value = "attachment;filename=\"" + URLEncoder.encode(filename, "UTF-8") +'"';
response.setHeader("Content-Disposition", value);

OutputStream out = response.getOutputStream();
FileInputStream in = new FileInputStream(my_file);
byte[] buffer = new byte[4096];
int length;
while ((length = in.read(buffer)) > 0){
     // logic to decrypt the file
    out.write(buffer, 0, length);
}
in.close();
out.flush(); 
```

当然，您需要处理适当的异常。

# linux - How to minimize code duplication with kobjects having the same attributes

> ID：10294040
> 
> 赞同：1
> 
> 时间：2012-04-24T08:05:20.227
> 
> 标签：linux, linux-kernel, sysfs

I have one `kobject`, say `kobj1` (so a directory in my `sysfs`) and i need to have other two `kobject`s (say `kobj2` and `kobj3`) having `kobj1` as parent. `kobj2` and `kobj3` have the same attributes so the directories structure is the same in `sysfs`. What is the best way to minimize code duplication?

# indexing - Where does Lua indexing only applies to?

> ID：10294041
> 
> 赞同：0
> 
> 时间：2012-04-24T08:05:29.257
> 
> 标签：indexing, lua

let me start by showing my line of codes:

```
 local names = {}
    str = "Hello World"
    for count = 0, #str do
         names[count] = string.sub(str, count, count)
         names[count].id = count
    end 
```

BTW, this is just a sample but my concept is there. Anyway, it keeps returning an error saying attempt to index field '?' (a nil value). What does this error mean? i tried using something like this in my other project it worked just fine. Except, it was an image, still why does it not apply to this instance? where does indexing apply to?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T16:11:59.667

这里的问题是你对如何使用默认的 lua 值类型感到困惑。表和用户数据是您将设置/获取属性的仅有的两种数据类型。我会分解你的代码，所以也许它会帮助你理解如何使用表格来做你想做的事......

您开始创建一个名为名称的空表。该表中没有您可以引用的值或属性。

```
local names = {} 
```

在你的for循环中，你一次从字符串'str'中提取一个字符并将其分配给count指向的索引处的名称（应该从1开始，顺便说一句..因为lua中的字符串和表索引是1基于，而不是基于零）。所以在第二个循环中，您实际上是在这样做：

```
names[1] = 'H' 
```

（第一次循环计数器为 0，所以 string.sub(str, 0, 0) 返回一个空字符串）

紧接着，你一次做几个步骤，这就是你感到困惑的地方。打破它应该为你清除它。

```
local a_char = names[count] -- get the string value in index 'count'
a_char.id = count           -- try to set property id on that string value
names[count] = a_char       -- assign this value to index 'count' in table names 
```

上面的代码在逻辑上等价于 names[count].id = count。您正在尝试在字符串值上创建/设置一个名为“id”的属性。字符串没有那个属性，你不能创建它，这就是解释器对你咆哮的原因。

如果要将逻辑信息一起存储在 lua 表中，规范是使用嵌套表。听起来你想基本上将每个字符存储在字符串“str”中，以及它在表“names”中的位置。这就是你这样做的方式：

```
local names = {}
str = "Hello World"
for count = 1, #str do
    local cha, idx = string.sub(str, count, count), count
    -- below creates an anonymous table with two properties (character, and id) and
    -- adds it to the end of table 'names'.
    table.insert(names, {character = cha, id = idx})
    -- or 
    -- names[count] = {character = cha, id = idx}
end 
```

以您想要的方式对信息进行逻辑分组，并且数据在表中大致如下所示：

```
{ {character = 'H', id = 1}, {character = 'e', id = 2} ... } 
```

如果您想要表中第一项的 id，您可以像上面所做的那样引用它：

```
local first_id = names[1].id -- access property id from table in first index in table names 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T08:09:26.077

我发现您的代码有两个问题：

1.  您从 0 开始索引。Lua 从 1 开始索引。for 循环应该从 1 开始。
2.  您正在将字符串分配到表中，然后尝试分配给字符串的 id 字段。除了字符串没有字段。这就是实际引发错误的原因。

# c++ - Creating a map of lambdas in C++

> ID：10294043
> 
> 赞同：7
> 
> 时间：2012-04-24T08:05:45.547
> 
> 标签：c++, map, c++11, lambda

How can I describe a map of lambda? I want to have a map of lambda which will be called on event (just as a simple callback). The lambda type is constant.

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-24T08:08:18.650

使用`<functional>`标题和`std::function`模板类。这允许您指定具有固定方法签名的函数对象。

```
std::map< unsigned int, std::function<int(int,int)> > callbackMap; 
```

假设您使用 索引回调`unsigned int`，上面的映射存储了接受两个`int`并返回的函数`int`。

# asp.net - how use stimulsoft or crystalReport and profile provider asp.net4

> ID：10294044
> 
> 赞同：0
> 
> 时间：2012-04-24T08:05:47.373
> 
> 标签：asp.net, crystal-reports, report, provider

how use **stimulsoft-reports or crystalReport** and profile provider asp.net4(personalization)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:35:25.820

将库添加到项目中，将组件放在 Web 表单上，设置属性（如果需要），加载报表并将其分配给报表查看器或 Web 设计器 ASP.NET 2.0 和 4.0，除了 .NET 没有特殊区别框架。

请阅读产品文档，安装包中提供了许多如何在 Stimulsoft Reports.Web 中使用 ASP.NET 的示例。

# java - 如何选择条件等于 null 的位置。

> ID：10294045
> 
> 赞同：2
> 
> 时间：2012-04-24T08:05:55.110
> 
> 标签：java, sql, spring, hibernate, select

SQL 语句：

```
select * FROM Message
 WHERE senderId = 126 and receiverId = 125
   and dateReceived is null 
```

HQL 语句：

```
 FROM Message
WHERE senderId = :senderId and receiverId = :receiverId
 and dateReceived is null 
```

我有错误。那么如何编写 HQL 以获得与上述 sql 语句相同的结果呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T08:09:32.720

尝试使用 IS EMPTY 应该可以。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T08:18:32.483

senderId 和receiverId 是外键吗？如果是，那么假设 senderId 是 Sender 表的一列，receiverId 是 Receiver 表的一列，试试这个：

```
select msg FROM Message msg
 WHERE msg.Sender.senderId = 126 and msg.Receiver.receiverId = 125
   and msg.dateReceived is null 
```

或者

```
Select msg FROM Message msg
WHERE msg.senderId = :senderId and msg.receiverId = :receiverId
 and msg.dateReceived is null 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T10:10:51.927

我已经解决了

HQL 查询：FROM Message WHERE senderId = :senderId 和 receiverId = :receiverId 和 dateReceived = null

# alfresco - 使用 DotCMIS 从 Alfresco 签出文档

> ID：10294046
> 
> 赞同：2
> 
> 时间：2012-04-24T08:05:56.213
> 
> 标签：alfresco, cmis, dotcmis

如何使用 dotCMIS 从 Alfresco 签出文档？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T08:17:34.717

它在`IDocument`界面中：

```
IObjectId id = session.CreateObjectId("12345678");
IDocument doc = session.GetObject(id) as IDocument;
IDocument checkedOutDoc = doc.CheckOut() as IDocument; 
```

# javascript - jQuery移动复选框失去了风格

> ID：10294049
> 
> 赞同：1
> 
> 时间：2012-04-24T08:05:58.707
> 
> 标签：javascript, jquery-mobile, cordova

嗨，我使用 jqm 和 phonegap 编写了简单的应用程序，但我的复选框有一些问题：在我使用 .append() 添加一些代码后，它们失去了风格，这是我的代码。在 .html 中：

```
 <div  data-role="fieldcontain">
        <fieldset data-role="controlgroup" id="vklConf">
            <legend>Deposit:</legend>
            <input type="checkbox" name="checkbox-1a" id="checkbox-1a" class="custom" />
            <label for="checkbox-1a">first</label>
        </fieldset>
    </div> 
```

在 .js 中：

```
function upbConfDep(){

    mydb.transaction
  (
    function(transaction)
    {
      transaction.executeSql
      (
        'SELECT `id`, `name` FROM `deposits` WHERE `userId`='+userId+' ORDER BY `name`;',
        [],
        function (transaction, results)
        {
          var depostitNumber=results.rows.length,nowRow;
          if (results.rows.length>0)
          {
            for(var i=0;i<depostitNumber;i++)
            {
              dps=results.rows.item(i);

              $('#vklConf').append('<input type="checkbox" name="ch'+dps['id']+'" id="ch'+dps['id']+'" class="custom" />');
              $('#vklConf').append('<label for="ch'+dps['id']+'">');
              $('#vklConf').append(dps['name']);
              $('#vklConf').append('</label>');
            }
          }

        },
        DBerror
      );

    }
  );
      $("#vklConf").checkboxradio('refresh');
     //or $("input[type='checkbox']").checkboxradio("refresh"); dosn`t work
}

upbConfDep();
$('#newPrize').live
(
  'pageinit',
  upbConfDep
); 
```

使用 .checkboxradio("refresh") 不起作用。有谁知道为什么复选框会失去风格？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T08:44:56.100

Run this code after you are done appending to page

```
$(".ui-page").trigger( "create" ); 
```

Example: [http://jsfiddle.net/codaniel/hY7TQ/1/](http://jsfiddle.net/codaniel/hY7TQ/1/)

# r - R 程序的 Web 界面

> ID：10294052
> 
> 赞同：19
> 
> 时间：2012-04-24T08:06:23.513
> 
> 标签：r, web, rscript

我必须开发一个 Web 界面，允许用户输入一些输入，这些输入将作为参数传递给 Rscript 并将结果返回给用户。

对于做过类似网络界面的人，我有一些问题：

1.  使用哪个 Web 框架
2.  什么是通信 Web 界面和 Rscripts 的最简单方法（在 Web 应用程序架构中）
3.  我应该在服务器上安装 R（如果是，如何从 Web 界面启动 Rscripts）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-24T11:06:44.217

R 有自己的 Web 服务器，因此您可以在 R 中完成所有工作。然后无需费心选择框架，或让它们相互交谈等等 - 只需使用 R 框架：

[http://cran.r-project.org/web/packages/Rook/index.html](http://cran.r-project.org/web/packages/Rook/index.html)

如果您出于性能或其他原因不喜欢它，几乎任何框架都会以某种方式与 R 对话，因此请使用您熟悉的方式。我会使用 Django 并通过 Rpy2 调用 R 或运行 Rserve 进程，但如果您可以使用 PHP 或 Java 编程，则使用基于这些语言的框架。如果你除了 R 什么都不会编程，那么要么学习 Python，要么使用 Rook。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-18T18:45:17.660

Rstudio 有一个名为 Shiny 的新服务器，它使用 node.js 作为 UI：

[https://github.com/rstudio/shiny-server](https://github.com/rstudio/shiny-server)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-24T09:45:41.147

Rstudio 为 R 提供了一个网络界面，请参见[http://rstudio.org/docs/server/getting_started](http://rstudio.org/docs/server/getting_started)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-16T09:01:49.637

一种非常方便的方法是将 Rstudio Server 和 Rook 结合起来（请参阅链接的其他答案）。

Rstudio Server 提供了一种非常简单的方法来设置网络中的任何人都可以访问的 R 服务器。您通常会使用它在该服务器上编辑和运行您的脚本。

Rook 允许您通过混合用于文本和交互的 html 代码（如输入字段等）和 R 代码来轻松创建 Web 界面。一旦您的脚本工作，只需从 Rstudio Server 中启动它，任何用户（具有访问权限）都可以在与 Rstudio Server 相同的 IP 上连接到它。

我将此设置与 googleVis 一起使用，我非常满意。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-09-29T13:50:05.943

在我看来，OpenCPU 目前是在 R 中创建无状态 (REST) Web 服务的最先进的免费软件包。Shiny 是一个很棒的框架，但是如果您打算使用免费的社区版本，请注意它不处理并发调用.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-19T09:23:46.313

R 网站上有一个很好的列表 - [http://cran.r-project.org/doc/FAQ/R-FAQ.html#R-Web-Interfaces](http://cran.r-project.org/doc/FAQ/R-FAQ.html#R-Web-Interfaces)

# c# - 日期时间选择器验证

> ID：10294055
> 
> 赞同：0
> 
> 时间：2012-04-24T08:06:40.617
> 
> 标签：c#, winforms

我有两个日期时间选择器（DateofBirth(DOB) 和 DateofIssue(DOI)），我需要验证这些日期时间选择器，DateofBirth(DOB) 和 DateOfIssue(DOI) 之间应该有 18 年的差异。这个怎么做。请建议我的想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:11:40.147

```
DateTime birth;
DateTime issue;
if (birth.AddYears(18) > issue) {
    throw new Exception("Not 18 years between birth and issue");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:13:41.753

```
System.DateTime date1 = new System.DateTime(1996, 6, 3, 22, 15, 0);
System.DateTime date2 = new System.DateTime(1996, 12, 6, 13, 2, 0);

// diff1 gets 185 days, 14 hours, and 47 minutes.
int diff1 = date2.Subtract(date1).TotalYears; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T08:13:51.880

使用**DateDiff**函数

[http://msdn.microsoft.com/en-us/library/b5xbyt6f(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/b5xbyt6f(v=vs.71).aspx)

# php - 在 MySQL 表中插入之前格式化十进制？

> ID：10294059
> 
> 赞同：1
> 
> 时间：2012-04-24T08:07:07.103
> 
> 标签：php, mysql, insert

我从 txt 文件中导入了信息。我有 3 个文件，该文件中的一个字段是不同格式的价格。

列上的格式为 DECIMAL(12,5)

```
file 1 -> $price_1 = 000000000000024.99

file 2 -> $price_2 = 25476,99

file 3 -> $price_3 = 3,768.44 
```

在插入 mySQL 表之前，我使用以下脚本：

**对于文件 1**

```
$price = (real)number_format($price_1 , 2, '.', ''); 
```

**对于文件 2**

```
$price = (real)str_replace(",", ".", $price_2); 
```

**对于文件 3**

```
$price = (real)str_replace(",", "", price_3); 
```

在表中插入记录之前不知道这种格式是否正确？如果有其他解决方案，我将不胜感激。我为我的英语道歉。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T08:16:46.770

您可以使用 printf 或 sprintf php 函数来获取正确格式的数字。

# c# - 在 LINQ 中加入匿名类型

> ID：10294061
> 
> 赞同：7
> 
> 时间：2012-04-24T08:07:09.760
> 
> 标签：c#, .net, linq, join

我确实有 2 个 c# 声明表，它在程序创建过程中初始化。

我想根据它的用户 ID 和用户名加入这个表。

我的代码如下

```
from nSJL in UserList.AsEnumerable()
join SJL in UserListOnline.AsEnumerable()
on
new { nSJL.Field<int>("UserID"), nSJL.Field<string>("UserName") }
equals
new { nSJL.Field<int>("UserID"), nSJL.Field<string>("UserName") }
into sjList 
```

在这段代码中我得到了错误

> 无效的匿名类型成员声明符。必须使用成员分配、简单名称或成员访问来声明匿名类型成员。

无论如何要加入匿名类型？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-24T08:09:10.100

您需要指定匿名类型属性的名称：

```
from nSJL in UserList.AsEnumerable()
join SJL in UserListOnline.AsEnumerable()
on
new { UserID = nSJL.Field<int>("UserID"),
      UserName = nSJL.Field<string>("UserName") }
equals
new { UserId = SJL.Field<int>("UserID"),
      UserName = SJL.Field<string>("UserName") }
into sjList 
```

请注意，我还更改了连接的右侧以使用`SJL`而不是`nSJL`太，否则它是无效的。如果您使用更有意义的名称，这将有助于您的代码清晰......

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-24T08:09:09.783

```
from nSJL in UserList.AsEnumerable()
join SJL in UserListOnline.AsEnumerable()
on
new{  UserID = nSJL.Field<int>("UserID"), UserName = nSJL.Field<string>("UserName") }
equals
new { UserID = nSJL.Field<int>("UserID"), UserName = nSJL.Field<string>("UserName") } into sjList 
```

您没有为匿名类型声明字段名称。

# javascript - 是否有 .Net MVC 解决方案支持在服务器和客户端上共享视图？

> ID：10294063
> 
> 赞同：2
> 
> 时间：2012-04-24T08:07:16.943
> 
> 标签：javascript, asp.net-mvc, model-view-controller, mvvm, knockout.js

几周前，我在查看[http://derbyjs.com/](http://derbyjs.com/)和 meteor.js 时对此感到疑惑。我喜欢这些平台的地方在于，它们支持在支持 JavaScript 的浏览器的服务器（如 ASP.Net MVC 视图）和客户端上共享 (HTML) 模板。基本上结合了 HTML 的 ASP.Net MVC 服务器端渲染和 ASP.Net 单页应用程序架构。这样我们只需在一个地方维护视图/模板代码，并使其可用于服务器端渲染以及客户端 MVC / MVVM。是否有这样的解决方案可用或在某处工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T07:55:13.513

我一直在寻找同样的东西，我遇到了一些选择：

1.  一种简单但有限的方法，因为它是“无逻辑模板”，是 mustache 模板 - 它们有 .net nustache

2.  Razor 视图引擎到 Javascript 的端口，如 Javascript + Razor == Jazor？-

    *   kirbysayshi/vash 在 github 上还有另一个端口可能更活跃 - [https://github.com/kirbysayshi/vash](https://github.com/kirbysayshi/vash)

3.  Spark 视图引擎 - Scott Allen 和 Hanselman 等一些 .net 英雄谈论它......以及此处的帖子[http://odetocode.com/blogs/scott/archive/2009/03/12/client-rendering -views-with-spark-and-asp-net-mvc.aspx](http://odetocode.com/blogs/scott/archive/2009/03/12/client-rendering-views-with-spark-and-asp-net-mvc.aspx)显示了相同的 Spark 视图如何在服务器和客户端上实现。

也许还有更多……因为这似乎是统一查看代码以编写一次并在客户端/服务器上运行的共同愿望。

如果我现在根据 GitHub 上项目的活动来选择，kirbysayshi/vash 有持续的提交并且非常活跃！由于 Vash 是 Razor 的一个端口，它可能是目前最容易访问和最成熟的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:21:35.903

我认为没有。

我记得一年前找了一个，但我找不到。

这完全取决于您的应用程序，但如果您继续在服务器端渲染并使用 ajax 带回部分视图，以便您可以刷新页面的某些部分，那么您应该获得足够好的性能。

诀窍是创建将呈现部分页面的小动作（而不是通过 呈现部分视图`Html.RenderPartial`）。然后，您可以通过 ajax 调用相同的操作来刷新页面的某些部分。

# android - Android：印象笔记风格布局

> ID：10294064
> 
> 赞同：0
> 
> 时间：2012-04-24T08:07:25.167
> 
> 标签：android, android-layout, android-ui, evernote

我有一个应用程序主屏幕的布局，我想要一个印象笔记风格。到目前为止，我的代码是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:gravity="center_vertical|center_horizontal"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom|left"
        android:orientation="horizontal" >

        <ImageButton
            android:id="@+id/btn1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/button" />

        <ImageButton
            android:id="@+id/btn2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/button" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom|center"
        android:orientation="horizontal" >

        <ImageButton
            android:id="@+id/btn3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/button" />

        <ImageButton
            android:id="@+id/btn4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/button" />
    </LinearLayout>

</LinearLayout> 
```

这是它的样子：

![在此处输入图像描述](../Images/6e8531de0b25982be1cdb695b0b49c2f.png)

这就是我希望它的样子：

![在此处输入图像描述](../Images/9778de859fd1bc5c92f438f46d00fb24.png)

我怎么能做到这一点？像这样分组按钮？

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:11:48.620

您只需将 ImageButtons 的宽度设置为 0dp 并将它们的 layout_weight 设置为 1。此外，将 layout_gravity 设置为 center_horizo​​ntal。

这将使他们很好地居中。

最好的祝愿，蒂姆

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T08:16:03.970

您可以对其进行调整，这是来自 Google I/O 应用程序。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical" 
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
android:background="#ffffff">
<LinearLayout android:orientation="vertical"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    android:layout_weight="1" 
    android:padding="6dip">
    <LinearLayout android:orientation="horizontal"
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"
        android:layout_weight="1">
        <Button android:id="@+id/button" 
            android:text="@string/button"
            android:drawableTop="@drawable/button" />
        <Button android:id="@+id/button" 
            android:text="@string/button"
            android:drawableTop="@drawable/button" />
    </LinearLayout>

    <LinearLayout android:orientation="horizontal"
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"
        android:layout_weight="1">
        <Button android:id="@+id/button" 
            android:text="@string/button"
            android:drawableTop="@drawable/button" />
        <Button android:id="@+id/button" 
            android:text="@string/button"
            android:drawableTop="@drawable/button" />

    </LinearLayout>

    <LinearLayout android:orientation="horizontal"
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"
        android:layout_weight="1">
        <Button android:id="@+id/button" 
            android:text="@string/button"
            android:drawableTop="@drawable/button" />
        <Button android:id="@+id/button" 
            android:text="@string/button"
            android:drawableTop="@drawable/button" />
    </LinearLayout>
</LinearLayout> 
```

# iphone - iOS RotatingWheelProject 异常错误

> ID：10294065
> 
> 赞同：0
> 
> 时间：2012-04-24T08:07:27.090
> 
> 标签：iphone, objective-c, ios, exception-handling

我正在尝试实施我发现的 RotatingWellProject

[http://www.raywenderlich.com/9864/how-to-create-a-rotating-wheel-control-with-uikit](http://www.raywenderlich.com/9864/how-to-create-a-rotating-wheel-control-with-uikit)

我对 iOS 开发非常陌生，这实际上是我的第一个应用程序 :) 当我构建项目时，我遇到了一些错误并修复了它们，但在运行时我遇到了以下错误：

```
2012-04-24 10:58:21.436 RotaryWheelProject[4122:207] -[NSCFString countByEnumeratingWithState:objects:count:]: unrecognized selector sent to instance 0x4b19370
2012-04-24 10:58:21.439 RotaryWheelProject[4122:207] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSCFString countByEnumeratingWithState:objects:count:]: unrecognized selector sent to instance 0x4b19370'
terminate called after throwing an instance of 'NSException' 
```

不难理解我遇到了一个我没有处理的异常错误，但我似乎不明白在哪里？

我纠正了一条线

```
@autorelease{return main(something..)} 
```

只是返回`main(something)`

帮助表示赞赏。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:10:05.037

`countByEnumeratingWithState:objects:count:`是一种[`NSFastEnumeration`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSFastEnumeration_protocol/Reference/NSFastEnumeration.html)协议方法。`NSString`不实现此协议，而其他诸如`NSArray`,`NSDictionary`和`NSSet`做。

检查您的代码以查看谁在调用`countByEnumeratingWithState:objects:count:`（应该是 NSString 对象）并确保它是具有实现协议的有效类型的正确对象。

# postgresql - PostgreSQL 中的列是否有默认值 Unix 时间戳？

> ID：10294067
> 
> 赞同：1
> 
> 时间：2012-04-24T08:07:37.683
> 
> 标签：postgresql, unix-timestamp

我不知道为什么，但我喜欢使用 Unix-timestamp。可能是因为我需要像数字一样使用时间进行计算，例如 time()-604800。

现在我有整数列，我在其中插入时间（）的结果。我认为这不是正确的方式，是吗？是否有默认值——unix 时间戳？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T08:11:36.337

您应该摆脱在数据库中使用 unix 时间戳的习惯。PostgreSQL 有[非常棒的日期函数](http://www.postgresql.org/docs/9.1/static/functions-datetime.html)，例如`datetimecol - interval '1 week'`. 它还可以使用`extract(epoch from datetimecol)`.

无论如何，您可以将`extract(epoch from now())`其用作列的默认值。

# mysql - MySQL - 仅加入 1 个结果或其他表的限制

> ID：10294068
> 
> 赞同：2
> 
> 时间：2012-04-24T08:08:01.500
> 
> 标签：mysql, join

我目前在使用 MySQL 时遇到了一个烦人的问题。

我从通过以下查询从数据库中获取酒店的地方开始：

```
SELECT `Hotel`.*,
        `Hotellocations`.`address`,
        `Hotellocations`.`city`, 
        `Hotellocations`.`lat`,
        `Hotellocations`.`lon`, 
        `Hotelfacilities`.`facilities`,
        `hotel_rooms` AS `hotelroomS` 
FROM `hotels` AS `Hotel` 
    LEFT JOIN `hotel_locations` AS `Hotellocations` 
        ON (`Hotel`.`hotelid` = `Hotellocations`.`hotelid`) 
    LEFT JOIN `hotel_facilities` AS `Hotelfacilities` 
        ON (`Hotel`.`hotelid` = `Hotelfacilities`.`hotelid`) 
WHERE MATCH(`hotel`.`title`) AGAINST("+Amsterdam" IN BOOLEAN MODE) 
    AND `hotel`.`min_price` != 0 AND `Hotel`.`min_price` >= 0 
    AND `Hotel`.`max_price` <= 500 
LIMIT 1 
```

我现在正在尝试加入一个新表，即“hotel_rooms”表，它有一个名为“num_people”的列，这表示有多少人可以留在房间里。

我现在的问题是，我如何加入这张桌子？我尝试过内部加入，但随后 MySQL 返回多行（来自hotel_rooms），因为一家酒店可能有多个房间..

我的酒店表是这样的：

```
id | hotelid | title | slug | description | min_price | max_price | stars | checkin | checkout 
```

hotel_rooms 表是这样的：

```
roomid | hotelid | ratetypeid | providerid | title | description | num_people | min_price | calendarcode 
```

我真的希望你能帮助我.. :) 如果您需要更多信息，请告诉我。

亲切的问候，

罗宾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:15:18.507

看起来您需要酒店的可用客房总数。与其直接加入 hotel_rooms 表，不如将加入设为：

```
join ( select hotelid, sum(num_people) as hotel_rooms
       from hotel_rooms
       group by hotelid) hr
  on hr.hotelid = hotel.hotelid 
```

# maven - 如何将 maven 项目所需的所有 jar 提取到文件夹中？

> ID：10294070
> 
> 赞同：6
> 
> 时间：2012-04-24T08:08:18.553
> 
> 标签：maven, jar

我正在尝试对一个项目进行去mavenize。

有没有办法将此 maven 项目所需的所有 jar 提取到一个文件夹中？

（我是 Maven 的新手，所以请；提供的说明应该是虚拟模式）谢谢！

;-)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T08:51:27.397

您可以使用[Maven 依赖插件的](http://maven.apache.org/plugins/maven-dependency-plugin/)[dependency:copy-dependencies](http://maven.apache.org/plugins/maven-dependency-plugin/copy-dependencies-mojo.html)目标来实现这一点。

实际上，只需`mvn dependency:dependencies`在您的 maven 项目上运行，您应该会在`dependencies`文件夹下找到一个子`target`文件夹，其中包含所有依赖项，包括传递的依赖项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T08:32:27.890

看看`maven-assembly-plugin`它的`jar-with-dependencies`预定义描述符：
[http ://maven.apache.org/plugins/maven-assembly-plugin/descriptor-refs.html#jar-with-dependencies](http://maven.apache.org/plugins/maven-assembly-plugin/descriptor-refs.html#jar-with-dependencies)

您可以通过稍微修改这个来轻松创建自己的描述符。只需设置`<unpack>false</unpack>`和`<outputDirectory>/some-dir</outputDirectory>`。

如果你到目前为止还没有使用过这个插件，请阅读：
[http](http://maven.apache.org/plugins/maven-assembly-plugin/usage.html)
://maven.apache.org/plugins/maven-assembly-plugin/usage.html 了解那里实际发生了什么以及如何使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T08:26:42.187

这不是 Maven 的工作方式。Maven 具有以下先决条件：

*   使用二进制文件安装 Maven（当然）
*   缓存所需 JAR 并存储创建的 JAR 的 Maven 存储库。

因此，也许应该可以生成一个 WAR 文件，该文件将包含“所有需要的 JAR 文件”。

Maven 不仅管理运行时所需的 JAR，还管理运行 Maven 所需的插件，以及 Maven 过程中所需的所有 JAR（如单元测试、覆盖率、质量检查……）。

也许你应该让你的问题更具体，我也会更新我的答案。

# java - 读取文本文件时找不到行错误

> ID：10294072
> 
> 赞同：0
> 
> 时间：2012-04-24T08:08:22.800
> 
> 标签：java, arrays

我正在尝试从名为*poll.txt*的文件中获取数据集，然后使用相关数据。

*poll.txt*的内容：

```
CT 56 31 7 Oct U. of Connecticut

NE 37 56 5 Sep Rasmussen

AZ 41 49 10 Oct Northern Arizona U. 
```

源代码，ElectoralVotes.java：

```
import java.io.*;
import java.util.*;

public class ElectionResults {

    public static void main(String[] args) throws FileNotFoundException {
        int dVotes = 0;
        int sVotes = 0;

        Scanner scanner = new Scanner(new File("poll.txt"));
        String[] nonDigits = new String[29];
        int[] Digits = new int[10];
        int i = 0;
        int j = 1;
        while (scanner.hasNextLine()) {
            while (scanner.hasNext()) {
                nonDigits[i++] = scanner.next();
            }
            i = 0;
            while (j <= 3) {
                Digits[i] = Integer.parseInt(nonDigits[j]);
                i++;
                j++;
            }

            if (Digits[0] > Digits[1]) {
                sVotes += Digits[2];
            } else {
                dVotes += Digits[2];
            }
            scanner.nextLine();
        }
    }
} 
```

但是，当我运行程序时，在给出异常之前只使用了其中一行：

```
Exception in thread "main" java.util.NoSuchElementException: No line found error. 
```

我试过移动“scanner.nextLine();” 声明无济于事。如果我不要求 nextLine，该程序可以正常工作，但我显然需要它，而且我似乎无法弄清楚出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:21:40.377

您在`scanner.nextLine()`循环结束时调用，它将尝试读取下一行。然后你只是扔掉数据！

我怀疑*这会*引发异常，因为您的数据已用完。我怀疑你的循环：

```
while(scanner.hasNext()){
   nonDigits[i++] = scanner.next();
} 
```

完全*消耗*数据。（`Scanner`诚​​然，我从文档中对我的行为从来没有非常清楚。）我怀疑你实际上应该一次阅读*一行*，其中：

```
while (scanner.hasNextLine()) {
    String line = scanner.nextline();
    // Now use line
} 
```

...并分别解析该行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T09:37:24.313

请试试这个..

如果 poll 文件的格式不会改变并且是固定的，那么请尝试以下代码..

```
String area = null;
String personName = null;
while (scanner.hasNextLine())
{
    // e.g to extract "CT" from "CT 56 31 7 Oct U. of Connecticut"
    area = scanner.next(); 

    // e.g to extract "56" from "CT 56 31 7 Oct U. of Connecticut"
    dVotes = scanner.nextInt(); 

    // e.g to extract "31" from "CT 56 31 7 Oct U. of Connecticut"
    sVotes = scanner.nextInt();

    // e.g to skip "7" from "CT 56 31 7 Oct U. of Connecticut"
    scanner.nextInt();

    // e.g to skip "Oct" from "CT 56 31 7 Oct U. of Connecticut"
    scanner.next();

    // e.g to extract "U. of Connecticut" from "CT 56 31 7 Oct U. of Connecticut"
    personName = scanner.nextLine();
    System.out.println(area + " " + dVotes + " " + sVotes + " " + personName);
} 
```

如果文件遵循当前 poll.txt 的格式，上面的代码将可以正常工作。您可能需要在那里添加您的计算。我只是展示如何从 poll.txt 中提取值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T09:18:52.237

数据在内部循环中完全消耗。乔恩已经指出了这一点。这个例子可能会帮助你:-)

```
public class ElectionResults {

public static void main(String[] args) throws FileNotFoundException {

    Scanner scanner = new Scanner(new File("c:\\poll.txt"));
    while (scanner.hasNextLine()) {
         String line = scanner.nextLine();
         Scanner linescanner = new Scanner(line);
         //this inner loop will scan through the line.
         while(linescanner.hasNext())
         {
             System.out.print(linescanner.next() + " ");
         }
         System.out.println();
         linescanner.close();
    }
    scanner.close();
}

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T18:25:27.903

我终于让它工作了。另一个问题是 j 没有在每次循环后重新初始化，并且仍在重用 Digits 数组中的数据。这是最终工作的代码。

```
import java.io.*;
import java.util.*;

public class ElectionResults
{
  public static void main (String[] args) 
  throws  FileNotFoundException {
     int dVotes = 0;
     int sVotes = 0;

     Scanner scanner = new Scanner(new File("poll.txt"));
     String [] nonDigits = new String [29];
     int [] Digits = new int [10];
     int i = 0;

     while(scanner.hasNextLine()){
        String line = scanner.nextLine();

        Scanner linescan = new Scanner(line);
        i=0;
        while(linescan.hasNext()){
           String temp = linescan.next();

           nonDigits[i]=temp;
           i++;
        }

        i=0;
        int j = 1;
        while(j<=3)
        {
           Digits[i] = Integer.parseInt(nonDigits[j]);
           i++;
           j++;
        }
        if (Digits[0]>Digits[1])
           sVotes += Digits[2];
        else
           dVotes += Digits[2];  

     }
     System.out.println("Smith Votes:\t" + sVotes);
     System.out.println("Dow Votes:\t" + dVotes);
     if (sVotes > dVotes)
        System.out.println("Smith is currently in the lead!");
     if (dVotes > sVotes)
        System.out.println("Dow is currently in the lead!");
        if(dVotes == sVotes)
        System.out.println("It's a tie!");
  }
} 
```

# java - svn pre-commit hook 检查java源码

> ID：10294079
> 
> 赞同：1
> 
> 时间：2012-04-24T08:08:47.073
> 
> 标签：java, svn, triggers, pre-commit-hook

我想检查是否要提交某些特定的 Java 类。如果是这样，我想检查`serialVersionUID`该特定类的源内部是否已更改（新值和旧值）。

怎么做？任何示例PLS。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:50:58.143

您应该能够在网络上找到大量关于设置 SVN 挂钩的示例 - 这是[SVN 书中的相关章节](http://svnbook.red-bean.com/en/1.1/ch05s02.html)。向下滚动到*Hook Scripts*。

至于检测`serialVersionUID`，我与 Andrzej Doyle 有相似的看法：如果你在解析源代码，可能会出现错误检测的情况。但是，您有问题的源代码可能足够简单，可以在 99% 的时间内正常工作——而且出错的后果可能不会太灾难性。只有你知道答案。

因此，检查它的一种*非常简单*的方法（假设是 Linux/UNIX/Mac OS 环境）是使用`grep`用于查找“serialVersionUID”的 shell 脚本。但是，我可以立即想到一种可以检测误报的方法：如果内部类声明了它，则简单的 grep 会为包含类检测到它（因为我们不解析文件，所以我们不知道实际的里面的类结构）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T16:14:09.487

我宁愿使用像[jenkins](http://jenkins-ci.org/)这样的持续集成服务器 ，并创建检查内容并在发生问题时发送电子邮件的工作

:)

# java - 将 sqlMapConfig 保留在 jar/类路径之外

> ID：10294082
> 
> 赞同：1
> 
> 时间：2012-04-24T08:09:02.127
> 
> 标签：java, ibatis, mybatis

我将 SqlMapConfig.xml 作为一个包保存在 src 文件夹中。当我为我的项目创建 jar 时，SqlMapCofig 连同映射器和属性文件被复制到 jar 中。当我必须更改数据库连接用户名、密码和其他内容时，这是一个问题。有没有办法将 SqlMapConfig.xml 或 connection.properties 文件保留在 jar 之外？

我试着把它放在外面，但它给出了一个找不到文件的错误。

这是我的 SqlMapConfig 文件；

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE configuration
PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-config.dtd">
<configuration>

<properties resource="config/connection.properties" />

<typeAliases>
    <typeAlias alias="Employee" type="com.Employee" />

</typeAliases>

<environments default="development">
    <environment id="development">
        <transactionManager type="JDBC" />
        <dataSource type="POOLED">
            <property name="driver" value="${database.driver.class.name}" />
            <property name="url" value="${database.connection.url}" />
            <property name="username" value="${database.username}" />
            <property name="password" value="${database.password}" />
        </dataSource>
    </environment>
</environments>

<mappers>
    <mapper resource="config/mappers/Employee.xml" />
</mappers> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:22:01.013

经过一番搜索，我发现了一个解决方案，

```
SqlSession session = sqlMapper.openSession(conn); 
```

代替，

```
SqlSession session = sqlMapper.openSession(); 
```

'conn' 是您传递给 openSession() 的普通 SQlConnection。conn 的连接属性可以存储在您喜欢的任何位置。

# ruby - Apache httpd.conf 上的 Erubis 和设置？

> ID：10294083
> 
> 赞同：0
> 
> 时间：2012-04-24T08:09:03.767
> 
> 标签：ruby, apache, httpd.conf, eruby, erubis

我正在尝试让 Erubis 设置来处理 Apache Web 服务器上的 .rhtml 文件。

我安装了 Ruby (v 1.9.2p290)，并通过 Ruby Gems 安装了 Erubis(2.7.0)。

我似乎找不到配置 httpd.conf 文件的正确方法——我在[http://www.ruby-doc.org/docs/ProgrammingRuby/html/web 找到了在 Apache 上设置 eruby 的指南。 html](http://www.ruby-doc.org/docs/ProgrammingRuby/html/web.html) - 我尝试使用这些配置设置，重新启动 apache 等...但是 rhtml 文件没有被解析（它只是将 ruby​​ 表达式输出为纯文本）

我在 httpd.conf 文件中添加了以下几行，但它没有做任何事情——

```
AddType application/x-httpd-eruby .rhtml
Action application/x-httpd-eruby /cgi-bin/eruby 
```

如果我安装的是 eruby 本身，而不是 erubis，我觉得这会起作用。除了通过我已经完成的 gem 安装之外，erubis 网站没有提供任何关于如何启动和运行的明确示例。

我还尝试将文件和 conf 设置从 .rhtml 更改为 .eruby，以防万一，但这也不起作用。

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T07:59:31.470

显然，这种使用嵌入式 Ruby 的方式已不再可行，但我也想运行 erubis，并找到一种方法来让 erubis 处理 .rhtml 页面，方法是添加 CGI shell 脚本以将请求的页面传递给 erubis。我的解决方案在这里描述：

[http://techdog.tumblr.com/post/36496065877/configure-erubis-cgi-in-apache](http://techdog.tumblr.com/post/36496065877/configure-erubis-cgi-in-apache)

* * *

我在**Ubuntu 12.04**和**Ruby 1.8.7上有****Apache/2.2.22**。我安装了**erubis 2.7.0**实现并将可执行的 erubis 文件复制到 Apache 的 cgi 文件夹，在我的例子中是 /usr/lib/cgi-bin/erubis。

 ******我配置了一个名为 erubis.sh 的 cgi 脚本，通过将这些指令添加到 /etc/apache/httpd.conf 来处理对 .rhtml 文件的请求：

```
AddType application/x-httpd-eruby .rhtml  
Application application/x-httpd-eruby /cgi-bin/erubis.sh 
```

我通过运行以下命令确保启用了 Action 模块：

```
$ sudo a2enmod action 
```

我创建了这个 bash shell 脚本**erubis.sh**来处理对嵌入了 ruby​​ 的页面的请求：

```
#!/bin/bash  
echo "Content-type: text/html"  
echo  
echo "<!DOCTYPE HTML>"  
erubis -E Stdout <$DOCUMENT_ROOT$REQUEST_URI 
```

它输出一个最小的 http 标头，然后要求 erubis 处理所请求的包含嵌入式 Ruby 的 .rhtml 文件。Stdout 增强选项似乎需要在正确的位置获得嵌入式 Ruby 块的输出。******

# java - 分析 jHiccup 延迟。57us 打嗝的来源

> ID：10294089
> 
> 赞同：2
> 
> 时间：2012-04-24T08:09:16.553
> 
> 标签：java, linux, performance, low-latency

我正在使用 Azul Systems 构建的 jHiccup 工具测量“打嗝”。它收集数据以识别 JVM 运行 Java 应用程序时发生的暂停时间（打嗝）的频率和持续时间。它适用于 JVM 级别及更高级别（操作系统、驱动程序等）。

以下是结果![打嗝](../Images/c0e9d3b9a0e49a63946ae0eb68cf42c9.png) 这些结果是在使用 SUSE SLERT 11 2.6.33 内核 PREEMPT RT、Intel i5、4g 内存的机器上获得的。该进程在 cpu 屏蔽下运行（3 个逻辑处理器被隔离）并具有 99 优先级（FIFO）。我想知道这 57 mcs 延迟是从哪里来的。该应用程序非常简单。它是网络订单处理系统，所以它解析 TCP 数据包馈送，做简单的业务逻辑等等。没有 GC，同步，它是单线程的。

我猜这可能是网络问题，例如阻止读取？当我尝试使用忙等待进行非阻塞读取时，我得到了类似的结果，但也许我做错了。我不知道这些打嗝是从哪里来的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:07:49.557

IRQ Balance 将在您的 CPU 上分配中断处理。你可以关闭它或控制它的掩码，这样你就不会被打断（不幸的是有两个你不能关闭的中断）

同一核心上的逻辑进程可以相互干扰。为了获得最佳结果，我会隔离一个核心并仅使用它。

即使您已经屏蔽了应用程序，它也有很多线程。为了获得最佳结果，我使用 linux 隔离了多个内核，并且只将关键线程分配给这些内核。即同一应用程序中的其他线程根本不使用这些内核。

为了控制这一点，我编写了这个库[Java Thread Affinity](https://github.com/peter-lawrey/Java-Thread-Affinity)即使使用这个库，我也看到了一些抖动（尽管少了 10 倍），这可能是由电源管理或本地定时器中断引起的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-12T13:26:45.993

这是一个非常有趣的问题，也是一个不寻常的 jHiccup 配置文件。在一家大银行工作，我通常会看到复杂应用程序的多模态 jHiccup 曲线——你似乎有一条路径，你的 20% 到 99.999% 的交易采用单一路径。这很了不起，很多人都喜欢效仿（尽管他们可能希望 57usec 小得多）。造成这种情况的原因有很多，通过找到一个可以改变 57usec 数字的变量来平分问题可能是最有效的 - CPU 频率、NIC 延迟、上下文切换成本、同步写入成本、线程调度公平性。

您可以做很多事情来深入挖掘：

1.  分析 - 我对您的“按百分比分布的打嗝”曲线的平坦程度感到震惊，并且它延伸到 90% 以下，这表明存在一个非常常见的大约 57 微秒的暂停事件。如果您减小存储桶大小和水平轴会发生什么 - 您是否看到暂停是均匀分布、正常分布、二项分布还是周期性分布？你用的是10GB吗？您的应用程序是否在工作负载和上下文切换之间显示出非常恒定的相关性（高于 0.85 r-squared）？

2.  您可以尝试调整几个旋钮，看看 57micro 暂停的大小是否发生变化。请记住，这不是为了改进其调整以查看针向任一方向移动的调整。您说禁用 irq_balancer 没有帮助 - 它是否导致您的暂停大小发生变化？我会先测试 CPU 频率是否会影响它。如果您在 E5-2690 上运行，您在 E5-2650 上看到相同还是不同的延迟？如果您没有不同的硬件，您可以尝试通过更改 max cset/turbo 设置来解决此问题。我还会尝试调整 NIC 上的 IRQ 合并设置，以更改网络操作的 NIC 批处理的存储桶大小。如果两者都没有导致指针移动，那么您就知道这不是直接的 NIC 延迟或 CPU 影响。

同样，我也会尝试在具有 RHEL 5 内存屏障错误、更快的上下文切换和不同的进程调度公平行为的旧内核上运行。像[https://github.com/tsuna/contextswitch](https://github.com/tsuna/contextswitch)这样的工具可以描述这些东西。一旦你确定了一个变量，它将改变你停顿的 57 微幅度，你就完成了 75%。

如果您当前使用的是 Oracle JVM，您也可以尝试使用 Zing，看看是否会发生任何变化。

让我们知道会发生什么，

彼得

# css - 垂直对齐 CSS 属性

> ID：10294094
> 
> 赞同：0
> 
> 时间：2012-04-24T08:09:35.560
> 
> 标签：css, vertical-alignment

这似乎是一个非常简单的问题，但到目前为止它已经成功地难住了我。垂直对齐属性对我来说是正确的。但是，当我
在要沿图像中心运行的文本之后添加标签时，标签之后的任何文本都会
直接显示在图像下方。

例子：

```
<img src="test.png" width="50" height="50" alt="test" style="vertical-align:middle;"/>        This text is fine. <br />This text is not. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:20:01.180

尝试这个：

```
<img src="test.png" width="50" height="50" alt="test" style="vertical-align:middle;"/>        

<div style='display:inline-block; vertical-align:top;'> 
    <span style='display:inline-block;vertical-align:middle;'>This text is fine. <br />This text is not.
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:12:15.887

您的示例包含 tag `<br />`，根据定义，这意味着换行符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-27T07:45:29.833

这是在 CSS 中对齐几乎所有内容的最佳方式。

```
.centrado-vertical{
  position: relative;
  top: 50%;
  -webkit-transform: translateY(-50%);
  -ms-transform: translateY(-50%);
  transform: translateY(-50%);
} 
```

# iphone - 我可以将 iCloud 用作 iOS 应用程序的后端服务器吗？

> ID：10294097
> 
> 赞同：4
> 
> 时间：2012-04-24T08:09:38.930
> 
> 标签：iphone, icloud, ios5.1

我正在创建一个 iPhone 应用程序。我有一些表格来保存用户信息。我需要一个后端网络服务器来存储数据库，或者我可以使用 iCloud 存储而不需要网络服务器吗？CoreData 可用于在 iOS 设备中保存数据，但也需要一些远程数据库，不是吗？那个远程数据库可以是 iCloud Storage。

非常感谢任何提示和信息。

问候

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-12-17T05:25:02.530

Cullen SU​​N 的回答是正确的，就像 2 年前回答的那样。

但是现在您可以使用 icloud 作为 iOS 应用程序的后端服务器，使用 iOS 8 中引入的最新“Cloud Kit Framework”。

我发现的最佳教程来自[http://www.raywenderlich.com/83116/beginning-cloudkit-tutorial](http://www.raywenderlich.com/83116/beginning-cloudkit-tutorial)

官方文档：[https ://developer.apple.com/library/ios/documentation/CloudKit/Reference/CloudKit_Framework_Reference/](https://developer.apple.com/library/ios/documentation/CloudKit/Reference/CloudKit_Framework_Reference/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T04:18:33.433

使用 iCloud 作为 Web 服务器是不可能的。

简短回答：您将使用谁的 iCloud 帐户？你自己？用户的？Apples 从不提供任何用于应用内 iCloud 帐户登录的 API，它只能在设备的设置中进行设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T04:35:25.723

这取决于您要启用哪种应用程序和数据访问。

首先，我发现此概述很有帮助：

[http://gravityjack.com/ios-5-for-developers-what-you-need-to-know](http://gravityjack.com/ios-5-for-developers-what-you-need-to-know)

> iCloud 存储 API 让您的应用程序将用户文档和数据写入一个中央位置，并从用户的所有计算机和 iOS 设备访问这些项目。

这里的关键是用户（帐户）对其文档和键/值存储数据的访问。因此，关键方案就是让一个帐户在绑定到该帐户的所有设备之间共享数据。

自定义云 Web 服务器/服务方法将支持多用户/帐户访问共享应用程序/数据集。这不仅仅是同步单个帐户，而是创建一个多人共享数据的应用程序。如果您只需要同步单个帐户文档/键/值数据，那么让 iCloud 来完成繁重的工作。如果您需要一个可以多用户访问共享数据（facebook、twitter 等）的自定义应用程序，那么您可能需要自己的自定义云应用程序/服务。

关于设备 DB/CoreData。偶尔连接的设备很常见。想象一下需要互联网访问才能获取您的通讯录。在这种情况下，您需要应用程序主要处理本地存储，并将云用作连接其他设备或其他用户设备的管道（通过后台同步写入本地存储到远程云存储）。

# macos - 哪一个我必须使用通用内核扩展或 I/O 驱动程序扩展来控制 MacOS 上的驱动程序？

> ID：10294100
> 
> 赞同：1
> 
> 时间：2012-04-24T08:09:45.280
> 
> 标签：macos, kernel, driver, kernel-extension

想在mac上实现蓝牙、wifi、usb、firewire等通讯接口。我还想对蓝牙和 wifi 进行身份验证。我必须使用哪个内核扩展通用内核扩展或 I/O 驱动程序扩展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T15:57:55.973

*   Airport (Wifi) 驱动程序没有公共内核 API。
*   公共[蓝牙 API](http://developer.apple.com/library/mac/#documentation/devicedrivers/conceptual/bluetooth/BT_Bluetooth_On_MOSX/BT_Bluetooth_On_MOSX.html)大多存在于用户空间中，而不是内核中。
*   USB 和 Firewire 设备系列由 I/O 套件管理，并在内核和用户空间中都有公共 API。
*   我认为“其他通信”是指网络？网卡设备驱动程序围绕内核 I/O 套件 API、套接字和数据包过滤等构建，位于内核的 BSD 部分。

因此，总的来说，如果您需要获取表示*设备*的对象，您将需要使用 I/O 工具包——来自 I/O 工具包 kext 或来自用户空间。如果您使用网络（以太网、IP）API，您将需要一个通用 kext。

# objective-c - 在 XCode 4.3.2 中继续“运行”，永远不会到达 main()，没有崩溃

> ID：10294104
> 
> 赞同：0
> 
> 时间：2012-04-24T08:10:03.200
> 
> 标签：objective-c, xcode, freeze

我对 XCode 有一个奇怪的问题。我正在运行我的应用程序，但它从未到达 main() 函数，尽管它说运行状态。

当我从设备中删除应用程序时，它已成功复制。但它从不尝试运行。

另请注意，如果我尝试通过点击设备上的应用程序直接运行，它会显示黑屏并立即关闭。

我一直在玩 ViewController/AppDelegates，但没有成功。

任何人都可以建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T08:27:04.493

当我尝试在我的方法中一个接一个地快速连续运行几个计算时，这发生在我身上。该应用程序刚刚停在那里显示黑屏。检查您的方法是否有任何可能以指数方式变大或更复杂的计算。

# java - 线路监听事件丢失

> ID：10294105
> 
> 赞同：1
> 
> 时间：2012-04-24T08:10:13.433
> 
> 标签：java, audio

我尝试使用 Java 剪辑对象播放信号。我开始剪辑，然后等待 STOP 事件被触发，直到我继续线程。我观察到，如果我退出调用线程，这可能发生在我的应用程序中，声音不会播放或只播放第一部分。

这在大多数情况下都可以正常工作，但是，大约每 50 次，既不会触发 START 事件，也不会触发 STOP 事件，这会导致当前线程永远等待。

现在的问题是，我是否在同步方面做错了什么，导致我失去了事件？

```
private static volatile boolean isPlaying = false;
private static final Object waitObject = new Object();

public static void playClip(...)

...

    Clip clip = (Clip) AudioSystem.getLine(...);

    clip.addLineListener(new LineListener() {
        public void update(LineEvent event) {
            if (event.getType() == LineEvent.Type.STOP) {
                event.getLine().close();
                synchronized (waitObject) {
                    isPlaying = false;                        
                    waitObject.notifyAll();
                }
            }
        }
    });

    // start playing clip
    synchronized (waitObject) { 
        isPlaying = true;
    }
    clip.start();

    // keep Thread running otherwise the audio output is stopped when caller thread exits
    try {
        while (isPlaying) {
            synchronized (waitObject) {
                waitObject.wait();                    
            }
        }
    } catch (InterruptedException e) {           
        e.printStackTrace();
    }
} 
```

这是使用的新版本 `CountDownLatch`：

```
private static volatile CountDownLatch playingFinished = new CountDownLatch(1);

public static void playClip(...)

...
    Clip clip = (Clip) AudioSystem.getLine(...);
    clip.open(audioInputStream);

    // use line listener to take care of synchronous call
    clip.addLineListener(new LineListener() {
        public void update(LineEvent event) {
            if (event.getType() == LineEvent.Type.STOP) {
                event.getLine().close();
                playingFinished.countDown();
            }
        }
    });

    clip.start();

    try {
        playingFinished.await();
    } catch (InterruptedException e) {
        e.printStackTrace();
    }

    playingFinished = new CountDownLatch(1); 
```

我没有包含调试语句，但它们表明线程挂起，`playingFinished.await();`因为没有触发 STOP 事件并且`playingFinished.countDown();`从未调用过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T08:57:36.910

帮自己一个忙，重新编写代码以使用`CountDownLatch`代替低级等待通知 API。然后，您的问题可能会自行消失。

```
public void playClip() throws Exception {
  final CountDownLatch playingFinished = new CountDownLatch(1);
  final Clip clip = (Clip) AudioSystem.getLine(...);
  clip.open(...);
  clip.addLineListener(new LineListener() {
    public void update(LineEvent event) {
      if (event.getType() == LineEvent.Type.STOP) {
        event.getLine().close();
        playingFinished.countDown();
      }
    }
  });
  clip.start();
  try {
    playingFinished.await();
  } catch (InterruptedException e) {
    Thread.currentThread().interrupt();
  }
} 
```

# android - EditText 并获取字符

> ID：10294107
> 
> 赞同：0
> 
> 时间：2012-04-24T08:10:22.440
> 
> 标签：android, android-edittext

如何获得我在编辑视图中写入的字符数？我想检查这个数字，因为当我写超过 3 时，我想使用 alertdialog。我怎样才能以简单的方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:11:38.953

为此，您需要使用 TextWatcher。

```
 yourEditText.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before,
        int count) {
            // TODO Auto-generated method stub

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable s) {
            // TODO Auto-generated method stub

        }
    }); 
```

使用任何方法来跟踪数量并在适用时显示警报

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T08:16:12.520

用于`TextWatcher`将 EditText 中的字符计数为：

```
private CharSequence temp;
    mEditText = (EditText)findViewById(R.id.ET);
        mEditText.addTextChangedListener(mTextWatcher);

        TextWatcher mTextWatcher = new TextWatcher() {
                @Override
                public void beforeTextChanged(CharSequence s, int arg1, int arg2,
                        int arg3) {
                    temp = s;
                }

                @Override
                public void onTextChanged(CharSequence s, int arg1, int arg2,
                        int arg3) {

                }

                @Override
                public void afterTextChanged(Editable s) {
                   // check here length of text in EditText after change
           if (temp.length() > 3) {
                // your alertdialog
        }
                }
            }; 
```

# jquery - 如果子按钮与单击的按钮相同，则更改 div 颜色

> ID：10294108
> 
> 赞同：0
> 
> 时间：2012-04-24T08:10:27.417
> 
> 标签：jquery

我是 Jquery 的新手，我正在使用 .net 组件创建一个组织结构图，该结构图的每个成员都有一个按钮。我想更改包含按钮的 DIV 以及具有相同按钮的任何其他 DIV 的颜色。

例如，在下面的代码中，如果选择了按钮 77770001，那么我想将周围的 DIV rocItemTemplate 更改为不同的颜色，但也希望将具有相同值的子元素的任何其他 div 更改为。任何人都可以帮忙吗？

```
<div id="RadOrgChart1" class="RadOrgChart RadOrgChart_Default">
<!-- 2012.1.301.40 --><div class="rocViewPort" style="visibility: hidden; width: 800px; ">
    <ul class="rocNodeList rocRootNodeList" style="width: 780px; visibility: visible; ">
        <li class="rocNode rocRootNode" style="width: 770px; "><div class="rocItem rocNoOwnImage">
            <div class="rocItemTemplate">

           <input type="submit" name="ctl43$LinkButtonNode" value="02079891000" id="ctl43_LinkButtonNode" class="middle">

            </div>
        </div><ul class="rocNodeList rocLevel1" style="width: 770px; ">
            <li class="rocNode rocFirst rocLast rocOnly" style="width: 770px; "><div class="rocItem rocNoOwnImage">
                <div class="rocItemTemplate">

           <input type="submit" name="ctl47$LinkButtonNode" value="77770001" id="ctl47_LinkButtonNode" class="middle">

                </div>
            </div><ul class="rocNodeList rocLevel2" style="width: 770px; ">
                <li class="rocNode rocFirst" style="width: 120px; "><div class="rocItem rocNoOwnImage">
                    <div class="rocItemTemplate">

           <input type="submit" value="01494561123" name="ctl51$LinkButtonNode" id="ctl51_LinkButtonNode" class="middle">

                    </div>
                </div><div class="rocNodeLines">
                    <span class="rocLineHorizontal"><!-- --></span><span class="rocLineUp"><!-- --></span>
                </div></li><li class="rocNode" style="width: 120px; "><div class="rocItem rocNoOwnImage">
                    <div class="rocItemTemplate">

           <input type="submit" name="ctl54$LinkButtonNode" value="77770001" id="ctl54_LinkButtonNode" class="middle">

                    </div>
                </div><div class="rocNodeLines">
                    <span class="rocLineHorizontal"><!-- --></span><span class="rocLineUp"><!-- --></span>
                </div></li><li class="rocNode" style="width: 120px; "><div class="rocItem rocNoOwnImage">
                    <div class="rocItemTemplate">

           <input type="submit" name="ctl57$LinkButtonNode" value="77770002" id="ctl57_LinkButtonNode" class="middle">

                    </div>
                </div><ul class="rocNodeList rocLevel3" style="width: 120px; ">
                    <li class="rocNode rocFirst rocLast rocOnly" style="width: 120px; "><div class="rocItem rocNoOwnImage">
                        <div class="rocItemTemplate">

           <input type="submit" name="ctl61$LinkButtonNode" value="0061422226212" id="ctl61_LinkButtonNode" class="middle">

                        </div>
                    </div><div class="rocNodeLines">
                        <span class="rocLineHorizontal"><!-- --></span><span class="rocLineUp"><!-- --></span>
                    </div></li>
                </ul><div class="rocNodeLines">
                    <span class="rocLineHorizontal"><!-- --></span><span class="rocLineUp"><!-- --></span><span class="rocLineDown"><!-- --></span>
                </div></li><li class="rocNode rocLast" style="width: 380px; "><div class="rocItem rocNoOwnImage">
                    <div class="rocItemTemplate">

           <input type="submit" name="ctl64$LinkButtonNode" value="77770003" id="ctl64_LinkButtonNode" class="middle">

                    </div>
                </div><ul class="rocNodeList rocLevel3" style="width: 380px; ">
                    <li class="rocNode rocFirst" style="width: 120px; "><div class="rocItem rocNoOwnImage">
                        <div class="rocItemTemplate">

           <input type="submit" value="0061431540656" name="ctl68$LinkButtonNode" id="ctl68_LinkButtonNode" class="middle">

                        </div>
                    </div><div class="rocNodeLines">
                        <span class="rocLineHorizontal"><!-- --></span><span class="rocLineUp"><!-- --></span>
                    </div></li><li class="rocNode" style="width: 120px; "><div class="rocItem rocNoOwnImage">
                        <div class="rocItemTemplate">

           <input type="submit" value="0061883836198" name="ctl71$LinkButtonNode" id="ctl71_LinkButtonNode" class="middle">

                        </div>
                    </div><div class="rocNodeLines">
                        <span class="rocLineHorizontal"><!-- --></span><span class="rocLineUp"><!-- --></span>
                    </div></li><li class="rocNode rocLast" style="width: 120px; "><div class="rocItem rocNoOwnImage">
                        <div class="rocItemTemplate">

           <input type="submit" value="0061883836255" name="ctl74$LinkButtonNode" id="ctl74_LinkButtonNode" class="middle">

                        </div>
                    </div><div class="rocNodeLines">
                        <span class="rocLineHorizontal"><!-- --></span><span class="rocLineUp"><!-- --></span>
                    </div></li>
                </ul><div class="rocNodeLines">
                    <span class="rocLineHorizontal"><!-- --></span><span class="rocLineUp"><!-- --></span><span class="rocLineDown"><!-- --></span>
                </div></li>
            </ul><div class="rocNodeLines">
                <span class="rocLineHorizontal"><!-- --></span><span class="rocLineUp"><!-- --></span><span class="rocLineDown"><!-- --></span>
            </div></li>
        </ul><div class="rocNodeLines">
            <span class="rocLineHorizontal"><!-- --></span><span class="rocLineUp"><!-- --></span><span class="rocLineDown"><!-- --></span>
        </div></li>
    </ul>
</div><input id="RadOrgChart1_ClientState" name="RadOrgChart1_ClientState" type="hidden"> 
```

编辑：

我还应该说，当单击按钮时，所有其他不包含所单击数字的按钮都必须更改为不同的类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:14:40.113

这应该可以解决问题：

```
$('[type="submit"]').click(function() {
    var value = $(this).val();
    $('div:contains([type="submit"][value="' + value + '"])').addClass("yourCssClassSpecifyingTheColor");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:14:40.680

您可以使用

```
$('input[value=77770001]').closest('div').css('background-color',"Red"); 
```

# asp.net-mvc - asp.net 将设计移交给另一个人/公司

> ID：10294110
> 
> 赞同：0
> 
> 时间：2012-04-24T08:10:35.417
> 
> 标签：asp.net-mvc, model-view-controller

美好的一天，我有一个项目需要我与一个有创造力的人分享设计部分，同时我负责处理大量的业务逻辑 (C#)。项目需要基于网络并且可用于大众市场（不是内部公司系统）。

任何人都可以推荐如何最好地解决这个问题。我通常做网络表单，但我认为 MVC 更适合，虽然我不太了解。设计人员是否能够使用“占位符”进行开发，我只需在其中注入我的服务器标签，还是需要相当多的切片/切块才能将我的东西放入他的？

我曾经做过一个 php 项目，设计师给了我带有 $tags 的 html，smarty 模板为我做了所有的魔法。在 MS 堆栈上可以遵循类似的原则吗？如果没有，您可以推荐一种方法吗？

设计师喜欢silverlite的想法，但我的直觉告诉我这不是一个好主意......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:19:04.370

首先，如果您正在计划针对大众市场的解决方案，我会说避免使用 Silverlight。与 HTML 相比，它肯定有轻微的扩散，对吧？;) 此外，您的 UI 人员可能知道如何设置 HTML 样式，而不是如何设计 XAML 界面。

这就是说，我认为 MVC 在 MS 堆栈上绝对是要走的路。你可以处理所有的控制器/模型的东西，而你的 UI 朋友可以设计一个漂亮的布局。之后，您只需（或多或少）使用 Html 帮助程序和其他东西将您的模型片段注入页面中。

我个人多次遵循这种方法，它非常有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T09:02:13.803

*无论如何*，分离应用程序的层是正确的做法，但在这种情况下更是如此。我建议使用 MVC，并使视图模型尽可能简单。

根据网站不同部分的工作时间，有时会先完成设计和 HTML，有时会先完成代码。如果视图模型很简单，那么设计人员可以学习如何使用它们，尤其是在他使用 Visual Studio 时（因此会自动完成）。如果没有，提供一个包含所有视图模型属性的空视图将是一个好的开始（或内联文档！）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T08:21:47.080

我会说带有 Razor 的 MVC3 是一个好主意，并且可以像您在 PHP 中描述的那样使用。（Silverlight 很好，但最好避免用于公共网站，因为它需要很多人没有的插件。）

MVC 的几个不错的特性：

*   只要事先画好模型，就可以让两个人分别工作，一个负责 Razor 视图，一个负责 Controller 逻辑。设计师可以创建模拟模型来使用，您可以创建模拟视图。
*   对于给定的类类型，您可以通过使用 MVC 在整个应用程序中默认使用的局部视图来推迟各种模型组件的最终设计。

总之，MVC 的主要目标是促进业务逻辑和表示的分离。

# php - 我正在尝试用 php 随机回显我的数组选项

> ID：10294113
> 
> 赞同：0
> 
> 时间：2012-04-24T08:10:52.067
> 
> 标签：php, regex, random

您好，我正在尝试回显 14 个不同的数组并打乱图像，以便它们在 preg_Replace 函数内随机生成。谁能帮我这个？

```
<?php

//islamic
$islamicart_array = array('/images/islamicart/IA.jpg', '/images/islamicart/IS(2).jpg',     '/images/islamicart/IS(3).jpg', '/images/islamicart/IS(4).jpg', '/images/islamicart/IS(5).jpg', '/images/islamicart/IS(6).jpg', '/images/islamicart/IS(7).jpg', '/images/islamicart/IS(8).jpg', '/images/islamicart/IS(9).jpg', '/images/islamicart/IS(10).jpg');

//pme-postmodernism/expressionism
$pme_array = array('/images/pme/E.jpg', '/images/pme/E(2).jpg',  '/images/pme/E(3).jpg',   '/images/pme/E(3).jpg',  '/images/pme/E(4).jpg');

//http://www.w3schools.com/php/func_filesystem_file_get_contents.asp
$myfile = file_get_contents('http://www.guardiannews.com');

$myfile = preg_replace('/<a      href=".*?" /', '<a target="_top"     href="/course/s12/projects/me/"', $myfile);

echo($myfile);

?> 
```

因此，使用此代码，我试图在另一页上随机回显图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T08:13:44.203

[随机播放](http://sg2.php.net/manual/en/function.shuffle.php)

用法：

```
$arr = array('image1.jpg', 'image2.jpg', 'image3.jpg');
var_dump($arr);
shuffle($arr);
var_dump($arr); 
```

由于缺乏上下文、尝试和代码，我无法进一步帮助您，所以只是给您一个起点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:16:01.173

可以给每个图像一个数字，然后使用 rand() 随机化一个数字并显示它连接到的图像的编号。

# sql-server - ascmd 工具 clamis 数据库已经存在但是它没有出现

> ID：10294114
> 
> 赞同：2
> 
> 时间：2012-04-24T08:10:53.607
> 
> 标签：sql-server, sql-server-2008, ssas, ascmd

我正在尝试使用 ascmd.exe 工具通过 SQL Server 2008 中的分析服务创建 OLAP DB，但出现以下错误：

> 错误 ErrorCode="3239313410" Description="元数据管理器出错。名称为 'CosmoComOLAPDB' 的数据库已存在于 'LIOR2K8' 服务器中。" Source="Microsoft SQL Server 2008 R2 分析服务"HelpFile="" />

但是，当我连接到 SQL Server 2008 Management Studio 中的 Analysis Services 时，我找不到它...

这是常见问题还是仅在我的系统上？

**更新：**
当我尝试附加然后选择一个文件夹时，它给了我以下错误：

> 执行 SystemGetLogicalDrives 命令需要数据库管理员或服务器管理员权限

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:28:15.200

我看不到数据库的原因是因为我没有在管理模式下运行右键单击 SQL Server Management -> Run As Administrator 然后将出现分析数据库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:15:17.633

它可能存在但未附加。

右键单击数据库文件夹，然后单击附加。

从列表中选择文件夹并告知密码（如果存在）

# spring - 使用 spring security3 保护 struts2 动作

> ID：10294116
> 
> 赞同：2
> 
> 时间：2012-04-24T08:10:58.057
> 
> 标签：spring, struts2, spring-security

我正在开发一个用 struts2 和 spring 3 和 spring security 3.1 编写的应用程序。如果我在服务层中使用注释@PreAuthorize，我已经设置了spring security并且工作正常，但是当我想在struts操作中使用它时：

```
 @PreAuthorize("hasRole('RIGHT_CREATE')")
    public String doSomething(){
        System.out.print("been there done that");
        return SUCCESS;
    } 
```

我收到这样的错误：

```
Stacktraces
java.lang.NoSuchMethodException: $Proxy221.doSomething()

    java.lang.Class.getMethod(Class.java:1605)
    org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.getActionMethod(AnnotationValidationInterceptor.java:75)
    org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:47)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:192)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:510)
    org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:434)
    org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:311)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:101)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    java.lang.Thread.run(Thread.java:662) 
```

我想这与我的动作类没有实现接口并且我使用JDKProxy而不是cglib这一事实有关，并且spring无法为此动作生成代理以应用注释......

PS。我有

```
<constant name="struts.objectFactory" value="org.apache.struts2.spring.StrutsSpringObjectFactory"/> 
```

在我的 struts.xml 中。

我的问题是：我该如何“解决”这个问题？在同一个项目中混合cglib（用于spring security）和jdkproxy（spring DI）是否明智？什么是优雅的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T12:05:19.783

在struts 2中，Action类不能检测除预定义的struts2注解以外的注解，如果这些注解在服务层可以使用，但在动作层（Presentation层）不能使用这些注解。

# bash - bash find：使用正则表达式排除的路径更改结果

> ID：10294119
> 
> 赞同：0
> 
> 时间：2012-04-24T08:11:05.403
> 
> 标签：bash, find

我想通过使用正则表达式的查找来排除文件被报告。然而，这似乎只有在 find 的路径参数是 a 时才有效。（点）。一旦我指定了路径，find 就不会返回任何东西。

文件夹中的2个文件：

```
~/xtmp/testfind> ls
test1.tmp.txt   test1.txt 
```

通过将路径指定为 的预期结果。

```
~/xtmp/testfind> find . -regex '.*txt.*' ! -regex '.*tmp.*' 
./test1.txt 
```

使用 $PWD 它什么也找不到：

```
~/xtmp/testfind> find $PWD -regex '.*txt.*' ! -regex '.*tmp.*' 
~/xtmp/testfind> 
```

放弃！正则表达式它找到了一切，所以 $PWD 是正确的：

```
~/xtmp/testfind> find $PWD -regex '.*txt.*' 
[...]/xtmp/testfind/test1.tmp.txt
[...]/xtmp/testfind/test1.txt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:15:56.073

您的路径包含字符串`tmp`(as `/xtmp/`)，因此排除项`! -regex '.*tmp.*'`始终匹配。这种负匹配很难用正则表达式正确完成；但在这种情况下，您可能想要使用 glob 和`-name`（仅匹配最终路径名组件，而不是通向它的路径）。

```
find $PWD -name '*txt*' ! -name '*tmp*' 
```

# java - 选择 LAST_INSERT_ID()

> ID：10294122
> 
> 赞同：6
> 
> 时间：2012-04-24T08:11:13.813
> 
> 标签：java, mysql, sql, mybatis, last-insert-id

有人可以解释 MySQL 函数 LAST_INSERT_ID() 的工作原理吗？我正在尝试获取数据库中最后插入行的 id，但每次都得到 1。

我用的是mybatis。

示例查询是：

```
<insert id="insertInto" parameterType="Something" timeout="0">
  INSERT INTO something (something) VALUES (#{something})
  <selectKey resultType="int">
    SELECT LAST_INSERT_ID()
  </selectKey>
</insert> 
```

代码：

```
System.out.println("Id : " + id) 
```

输出：

```
Id : 1 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T08:28:12.230

`LAST_INSERT_ID`返回**隐式**插入到`AUTO_INCREMENT`当前会话的列中的最后一个值。

```
CREATE TABLE mytable (id INT NOT NULL AUTO_INCREMENT PRIMARY KEY, value INT NOT NULL); 
```

要使列自动递增，您应该从`INSERT`列表中省略它：

```
INSERT
INTO    mytable (value)
VALUES  (1) 
```

或为其提供一个`NULL`值：

```
INSERT
INTO    mytable (id, value)
VALUES  (NULL, 1) 
```

在那之后，

```
SELECT  LAST_INSERT_ID() 
```

将返回`AUTO_INCREMENT`已插入`id`列中的值。

如果出现以下情况，这将不起作用：

1.  `AUTO_INCREMENT`您为列提供显式值
2.  你`LAST_INSERT_ID`在另一个会话中调用
3.  您在同一语句中插入多行（`LAST_INSERT_ID()`将返回插入的第一行的值，而不是最后一行）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T08:24:43.217

```
LAST_INSERT_ID() 
```

是每个用户和每个连接。

[您可以在MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/getting-unique-id.html)中阅读更多内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T08:51:09.220

我还没有使用 MyBatis，但是在你向表中插入一些东西之后，检查 auto_increment 值是否正在使用以下 MySQL 查询进行更新：

```
SELECT Auto_increment FROM (SHOW TABLE STATUS LIKE '<table-name>') as A; 
```

还要确保您没有为该`auto_increment`字段提供明确的值。您需要让数据库自行设置。

以下是您可以尝试的其他一些事情：

1.  确保将结果作为整数读取。[这](http://forums.asp.net/t/1543016.aspx/1)显示了需要显式转换为 Int32 的类似情况。

2.  如果您正在执行多次插入，请知道只有第一个插入元组的 ID 被视为`LAST_INSERT_ID`. 据此[（](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)搜索`use test`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T20:10:16.120

我有两个解决方案，在实现非常复杂之后，我发现了第二个...我会告诉你第二个哪个更好...这很简单...只是在查询中插入这个`keyProperty="id"` 像这样： `<insert id="insertInto" parameterType="Something" keyProperty="id" timeout="0"> INSERT INTO something (something) VALUES (#{something}) </insert>` 查询返回插入行的 id谢谢！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-12T06:59:38.540

示例 1：

```
mysql> CREATE TABLE prime2 LIKE prime;
Query OK, 0 rows affected (0.08 sec)

mysql> SELECT LAST_INSERT_ID(); //From table prime!!!
+------------------+
| LAST_INSERT_ID() |
+------------------+
|                3 |
+------------------+
1 row in set (0.00 sec)

mysql> INSERT INTO prime2 VALUES(1,1);
Query OK, 1 row affected (0.01 sec)

mysql> SELECT LAST_INSERT_ID(); 
+------------------+
| LAST_INSERT_ID() |
+------------------+
|                3 |
+------------------+
1 row in set (0.00 sec) //From table prime!!! 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-14T13:20:28.697

You have to use a Table name to select the last insert id.

Example:

```
SELECT LAST_INSERT_ID() FROM my_table; 
```

# oauth - 获取空刷新令牌

> ID：10294124
> 
> 赞同：2
> 
> 时间：2012-04-24T08:11:27.587
> 
> 标签：oauth, google-api, google-api-java-client

我正在使用 google-api-java-client 版本 1.8-beta 对 Google 帐户进行 oAuth2 身份验证。一切都很好，直到我得到具有访问令牌但没有刷新令牌的 GoogleTokenResponse 对象。要构建请求 url，我使用以下方法：

```
...
    googleAuthenticationUrl = new GoogleAuthorizationCodeRequestUrl(CLIENT_ID, callBackUrl, scopes).build();
... 
```

获取请求令牌时，我将其与此行中的访问令牌交换：

```
...
GoogleTokenResponse tokenResponse =  new GoogleAuthorizationCodeTokenRequest(new NetHttpTransport(), new JacksonFactory(), CLIENT_ID, CLIENT_SECRET, request.getParameter(CODE_URL_PARAM), callBackUrl).execute();
... 
```

返回的 GoogleTokenResponse 对象不包含刷新令牌：

```
{"access_token":"ya29.AH..etc...9-Y","expires_in":3600,"token_type":"Bearer"} 
```

你能解释一下这个问题吗？非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T09:52:33.790

在构建请求 URL 时，您应该设置访问类型：

```
requestUrl = new GoogleAuthorizationCodeRequestUrl(googleClientId, callBackUrl, scopes)
    .setApprovalPrompt("force") // needed if user already granted permission
    .setAccessType("offline")
    .build(); 
```

如[本页](https://developers.google.com/youtube/2.0/developers_guide_protocol_oauth2)所述，建议设置此参数：

> [...] 我们建议您将 access_type 参数显式设置为离线，因为我们预计当引入 online 值时，它将作为默认行为。这可能会导致您的应用程序发生意外更改，因为它会影响您的应用程序被允许刷新访问令牌的方式。通过将参数值显式设置为脱机，您可以避免对应用程序功能进行任何更改。[...]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-20T14:47:44.923

除了 PapelPincel 的回答之外，我还必须使用 .Net 版本 1.8.1.970 强制批准提示以获取刷新令牌。例如

```
var authReq = new GoogleAuthorizationCodeRequestUrl(new Uri(GoogleAuthConsts.AuthorizationUrl)) { 
    RedirectUri = Callback, 
    ClientId = ClientId, 
    AccessType = "offline", 
    Scope = string.Join(" ", new[] { Scopes... }), 
    ApprovalPrompt = "force" 
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-26T20:19:43.010

对于从谷歌搜索到这里的任何人，我没有使用纯服务器端流程，因此通过 javascript 获取授权令牌，就像在这个[文档](https://developers.google.com/+/web/signin/add-button)中一样，@PapelPincel 的答案对我来说是一个提示。

您应该将**data-accesstype="offline"**添加到您的按钮，如以下代码段所示：

例子：

```
 <span
            data-accesstype="offline"
            class="g-signin"
            data-callback="signinCallback"
            data-clientid="CLIENT_ID"
            data-redirecturi="postmessage"
            data-cookiepolicy="single_host_origin"
            data-requestvisibleactions="http://schemas.google.com/AddActivity"
            data-scope="https://www.googleapis.com/auth/plus.login">
          </span> 
```

# iphone - AVAudioPlayer 后台任务不工作 [iOS]

> ID：10294130
> 
> 赞同：0
> 
> 时间：2012-04-24T08:11:59.283
> 
> 标签：iphone, ios, audio, background, avaudioplayer

我已经尝试了一切：

-setup info.plist 所需的背景模式：应用播放音频；

- 设置播放器：

```
 [[AVAudioSession sharedInstance] setDelegate: self];

// allow app continue to play when the screen is locked
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback
                                       error:nil];

UInt32 doSetProperty = 0;
AudioSessionSetProperty ( kAudioSessionProperty_OverrideCategoryMixWithOthers,
                         sizeof (doSetProperty),
                         &doSetProperty
                         );

// Registers the audio route change listener callback function
AudioSessionAddPropertyListener (
                                 kAudioSessionProperty_AudioRouteChange,
                                 audioRouteChangeListenerCallback,
                                 self
                                 );

// Activates the audio session.

NSError *activationError = nil;
[[AVAudioSession sharedInstance] setActive: YES error: &activationError];

[appSoundPlayer prepareToPlay];
[appSoundPlayer setVolume: 1.0];
[appSoundPlayer setDelegate: self];
[[UIApplication sharedApplication] beginReceivingRemoteControlEvents]; 
```

我忘记了什么？有什么不对？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T13:46:46.873

您需要将音频类别设置为播放：

```
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:&error]; 
```

如果您想允许将音频与其他应用程序混合，您可以添加此选项，只需确保在将音频会话设置为活动**之前执行此操作。**

```
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback withOptions:AVAudioSessionCategoryOptionMixWithOthers error:nil]; 
```

现在您可以将音频会话设置为活动：

```
[[AVAudioSession sharedInstance] setActive:YES error:&error]; 
```

# iphone - 带有来自基本控制器中 AppDelegate 的核心数据对象上下文的 SIGABRT

> ID：10294134
> 
> 赞同：0
> 
> 时间：2012-04-24T08:12:08.320
> 
> 标签：iphone, objective-c, core-data, ios5, nsmanagedobject

我意识到最佳实践是从应用程序中的第一个控制器向下传递对象上下文，但考虑到我的应用程序以导航控制器开始并且有一些视图控制器只是内容并且不需要核心数据，我认为这将是一个更简单的解决方案。

标题：

```
#import <UIKit/UIKit.h>
#import "AppDelegate.h"

@interface CoreDataViewController : UIViewController
- (void)saveContext;

//See ggfela's answer
//@property (readonly, strong, nonatomic) AppDelegate *appDelegate;
//@property (readonly, strong, nonatomic) NSManagedObjectContext *managedObjectContext;

@property (readonly, weak, nonatomic) AppDelegate *appDelegate;
@property (readonly, weak, nonatomic) NSManagedObjectContext *managedObjectContext;

@end 
```

执行：

```
#import "CoreDataViewController.h"

@implementation CoreDataViewController

@synthesize appDelegate = _appDelegate;
@synthesize managedObjectContext = _managedObjectContext;

-(AppDelegate *)appDelegate
{
    if(!_appDelegate) {
        _appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    }

    return _appDelegate;
}

-(NSManagedObjectContext *)managedObjectContext
{
    if(!_managedObjectContext) {
        _managedObjectContext = self.appDelegate.managedObjectContext;
    }

    return _managedObjectContext;
}

- (void)saveContext
{
    [self.appDelegate saveContext];
}

@end 
```

当我从此类继承然后尝试访问托管对象上下文时，我收到一个 SIGABRT 错误，我收集到这意味着某处可能存在内存泄漏。我对 Objective-C 很陌生，所以对调试它不太了解。

谁能告诉我我做错了什么。

我是否真的应该以另一种方式来做（即从控制器传递上下文到子控制器），结果苹果可能会阻止我的应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:02:45.833

您不应该使用 strong 属性，因为在 setter 上应用了 strong 并且您有一个只读属性。

# c# - fluent nhibernate left join ON 后期绑定，运行时值

> ID：10294140
> 
> 赞同：1
> 
> 时间：2012-04-24T08:12:22.313
> 
> 标签：c#, fluent-nhibernate, left-join

我有一个映射了许多关系的类。应该为具体用户获取这些关系之一。

```
public class Company
{
    public int id { get; set; }
    public string Name { get; set; }
    public IList<StocksPack> stocks { get; set; }
    // a lot of other properties referencing other objects
}

public class StocksPack
{
    public int stockId { get; set; }
    public int companyId { get; set; }
    public int amount { get; set; }
    public int ownerId { get; set; }
} 
```

我如何映射`stocks`要*左外连接的* `ON stocks.companyId = company.id AND stocks.ownerId = 123456`

实际`ownerId`情况仅在运行时才知道，在用户登录系统之后。我想为具体用户获取有关公司的所有信息以及该公司的列表`Stocks`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T23:18:02.257

我认为您的问题的前提是错误的：您没有在左外连接上映射对象。[您可以使用外键引用将它们映射到数据库中，或者使用类映射](https://github.com/jagregory/fluent-nhibernate/wiki/Fluent-mapping)在 nhibernate 中映射它们，如下所示：

```
public class StockeMap : ClassMap<Stock>
{
    public EmployeeMap()
    {
        Id(x => x.Id);
        References(x => x.company);
    }
} 
```

股票的样子：

```
public class Stock{
     public virtual Company company {get; set;}
} 
```

你有一些 Company 对象，它设置了一个地图，给它一个 id 字段。这是您与股票和公司的简单父子 ID 类型关系。我假设。hibernate 和 nhibernate 背后的想法是您不必在对象中包含 id 引用。它为您处理

左外连接只在查询数据时才进入。换句话说，映射是两种类型之间的关系，查询是关于您希望如何表示该关系以及您想要什么数据的语句。前者是您的数据模型和系统设计的属性，后者是在运行时发生的某些事件。

您所说的您希望查询执行的操作有些模棱两可，但您似乎想要列出所有股票，并且当该股票由某个所有者拥有时，该股票的公司也是如此。另一种可能性是您想要列出所有公司，并且当它们拥有特定 ID 拥有的股票时，也列出该股票。

无论哪种情况，您都需要一个简单的左连接查询。在流利的 bhibernate 中，这些看起来像[这样](https://github.com/jagregory/fluent-nhibernate/wiki/Fluent-mapping)：

```
from Cat as cat
    left join cat.kittens as kitten 
```

在使用 linq 的 C# 中，您可以使用以下[示例](http://msdn.microsoft.com/en-us/library/bb397895.aspx)：

```
var query = from person in people
                    join pet in pets on person equals pet.Owner into gj
                    from subpet in gj.DefaultIfEmpty()
                    select new { person.FirstName, PetName = (subpet == null ? String.Empty : subpet.Name) }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T22:23:20.430

您可以使用称为“[过滤集合](http://nhforge.org/doc/nh/en/index.html#manipulatingdata-filtering)”的功能。如果您愿意，我可以使用您提到的实体制作示例应用程序。

# mysql - 使用 UNION 的子查询

> ID：10294143
> 
> 赞同：1
> 
> 时间：2012-04-24T08:12:48.240
> 
> 标签：mysql, sql

我有三张桌子：

```
TICKERS
id 
ticker (varchar 100)

COEF
id
id_ticker
id_spre
coef (varchar 100)

SPRE
id
id_check
name (varchar 100) 
```

我需要检索所有具有 id_check = 1 的 SPRE 记录，然后对于此结果，我必须获取所有具有 SPRE.id = COEF.id_spre 的记录（一次），然后是与 COEF 相关的所有 TICKERS（股票代码。 id = COEF.id_ticker)。

结果应该是：

```
SPRE.name
COEF.coef
TICKERS.ticker
TICKERS.ticker
TICKERS.ticker
....
....
SPRE.name
COEF.coef
TICKERS.ticker
TICKERS.ticker
TICKERS.ticker 
```

（我重复`tickers`了，因为许多代码应该有相同的`COEF`）

我认为是这样的：

一个检索所有 SPRE 的查询，`id_check = 1`然后是一个**UNION**两个选择的 SUBQUERY，第一个获取`COEF.id_spre = SPRE.id`和第二个获取所有代码`TICKERS.id = COEF.id_ticker`

....但是怎么写呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:35:51.117

等等..你想得出结果吗？如您是否希望在同一行中返回与一个 spre 相关的所有代码？

无论如何，看起来像下面这样的东西可能有用：

```
SELECT 
    s.name
    ,c.coef
    ,t.ticker
FROM spre  as s 
    INNER JOIN coef as c 
        ON c.id_spre = s.id
    INNER JOIN tickers AS t
            ON t.id = c.id_ticker
    WHERE s.id_check= 1 
```

[http://sqlfiddle.com/#!3/c984a/15](http://sqlfiddle.com/#!3/c984a/15)

如果您需要为 SPRE 限制它，那么以下工作是否有效：

```
SELECT 
    s.name
    ,c.coef
    ,t.ticker
FROM 
    (SELECT * FROM spre WHERE id_check=1 LIMIT 0,5 ) as s 
    INNER JOIN coef as c 
        ON c.id_spre = s.id
    INNER JOIN tickers AS t
        ON t.id = c.id_ticker 
```

使用 MSSQL 语法：[http ://sqlfiddle.com/#!3/c984a/25](http://sqlfiddle.com/#!3/c984a/25)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T08:22:57.193

不，您应该使用以下方式在一个查询中执行`JOIN`此操作：

```
SELECT s.name AS 'SPRE Name', c.coef, t.ticker
FROM SPRE s
INNER JOIN COEF c ON s.id = c.id_spre
INNER JOIN TICKERS t ON c.id_ticker = t.id
WHERE s_id_check = 1 
```

来自此查询的数据是表格数据，格式如下：

```
 SPRE NAME |   COEF   |  TICKER
-----------+----------+-----------
  spre1        coef1     ticker11
  sper1        coef1     ticker12
  sper1        coef2     ticker121
  spre2        coef12    ticker22
  ... 
```

然后在您的应用程序中，您可以按照您想要的方式输出这些数据。 **编辑：**`COEF`如果你想限制`LIMIT`他们在连接表中的选择：

```
INNER JOIN
( 
   SELECT * FROM COEF LIMIT 0, n
) c ON s.id = c.id_spre 
```

**或者：**`WHERE c.id IN (1, 2, 3, 4, 5)`如果没有太多值，您可以使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T08:30:03.180

您的问题描述不需要 sql Union。联合是将两个选择合并在一起并将它们作为一个选择返回，例如当您需要页面浏览器时。我建议只使用左连接来连接结果，例如：

```
 Select * from t1 Left Join t2 ON id_t1 = id_t2 Left Join t3 ON id_t2 = id_t3 Where check_t1 = 1. 
```

A Join 当您想要创建树并读取邻接列表并避免递归函数时也很有用。在 Left Join 中，不满足您对左表要求的空结果将被丢弃在结果中。

# jquery - 如何使用 jQuery 或 PHP 每 3 分钟异步保存一次数据

> ID：10294145
> 
> 赞同：2
> 
> 时间：2012-04-24T08:13:02.190
> 
> 标签：jquery, ajax

我正在编写一个在线文本编辑器应用程序，我需要在用户最后一次按键后每 3 分钟将数据保存到 mongo db，目前我正在 textarea 失去焦点后保存数据，这很好，但我需要添加更多用户友好的功能，所以我需要添加上述功能，但我不知道如何去做我需要一个 jquery 中的计时器，它可以在 180 秒后触发 ajax 调用。谁能告诉我可以使用哪个 jquery 函数来获得所需的结果。我在服务器端使用 mongo db 作为数据库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T08:14:25.367

```
window.setInterval(function() {
    $.ajax({...});
}, 180000); 
```

* * *

但是，我会使用一种只在必要时保存的方法，在这种情况下更频繁。以下示例使用[Underscore.js](http://documentcloud.github.com/underscore/)中的函数。

```
$('textarea').on('keyup', _.throttle(_.debounce(function() {
    $.ajax(...);
}, 2000), 60000)); 
```

这将在用户停止输入至少 2 秒后立即保存您的数据，但每分钟不超过一次。这是一个小例子，每 10 秒修改一次后每 2 秒保存一次：http: [//jsfiddle.net/ThiefMaster/AagFC/](http://jsfiddle.net/ThiefMaster/AagFC/)

# maven - 如何将构建部分从 maven1 转换为 maven2？

> ID：10294147
> 
> 赞同：1
> 
> 时间：2012-04-24T08:13:14.607
> 
> 标签：maven, maven-2, pom.xml

如何正确复制 maven2 的行为？

```
<build>
    <sourceDirectory>src/java</sourceDirectory>
    <resources>
        <resource>
            <directory>src/etc/</directory>
            <include>atlassian-plugin.xml</include>
            <include>**/*.vm</include>
        </resource>
    </resources>
    <unitTestSourceDirectory>test/java</unitTestSourceDirectory>
    <unitTest>
        <includes>
            <include>**/*Test.java</include>
            <include>**/Test*.java</include>
        </includes>
        <excludes>
            <exclude>**/Abstract*.java</exclude>
        </excludes>
        <resources>
            <resource>
                <directory>test/etc</directory>
            </resource>
        </resources>
    </unitTest>
</build> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:39:56.333

它会是这样的：

```
<build>
  <sourceDirectory>src/java</sourceDirectory>
  <resources>
    <resource>
      <directory>src/etc/</directory>
      <includes>
        <include>atlassian-plugin.xml</include>
        <include>**/*.vm</include>
      </includes>
    </resource>
  </resources>
  <testSourceDirectory>test/java</testSourceDirectory>
  <testResources>
    <testResource>
      <directory>test/etc</directory>
    </testResource>
  </testResources>
  <pluginManagement>
    <plugins>
      <plugin>
        <artifactId>maven-surefire-plugin</artifactId>
        <configuration>
          <includes>
            <include>**/*Test.java</include>
            <include>**/Test*.java</include>
          </includes>
          <excludes>
            <exclude>**/Abstract*.java</exclude>
          </excludes>
        </configuration>
      </plugin>
    </plugins>
  </pluginManagement>
</build> 
```

# android - 如何从服务器上的 URL 或 xml 文件在 Girdview 中显示数据

> ID：10294151
> 
> 赞同：2
> 
> 时间：2012-04-24T08:13:31.290
> 
> 标签：android, gridview

我想在服务器的网格视图中显示数据，并且服务器上有包含数据的 xml 文件。我已经研究了从[http://developer.android.com/guide/tutorials/views/hello-gridview.html](http://developer.android.com/guide/tutorials/views/hello-gridview.html)链接显示网格视图上的数据。

但我想从服务器显示它我该怎么做。感谢任何示例代码或链接，因为这对我来说是新事物。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T08:26:19.233

试试这个代码，

```
public class Get_User_Data extends AsyncTask<Void, Void, Void> {
        private final ProgressDialog dialog = new ProgressDialog(
                GalleryShow.this);

        protected void onPreExecute() {
            this.dialog.setMessage("Loading...");
            this.dialog.setCancelable(false);
            this.dialog.show();
        }

        @Override
        protected Void doInBackground(Void... params) {
            URL url = null;
            try {
                url = new URL("<Put your link here>");
            } catch (MalformedURLException e) {
                e.printStackTrace();
            }
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            DocumentBuilder db = null;
            try {
                db = dbf.newDocumentBuilder();
            } catch (ParserConfigurationException e1) {
                e1.printStackTrace();

            }
            Document doc = null;
            try {
                doc = db.parse(new InputSource(url.openStream()));
            } catch (SAXException e2) {

                e2.printStackTrace();
            } catch (IOException e3) {

                e3.printStackTrace();
            }
            org.w3c.dom.Element elt;
            try {
                elt = doc.getDocumentElement();
                NodeList nodeList = elt.getElementsByTagName("file");
                temp = new String[nodeList.getLength()];

                for (int i = 0; i < nodeList.getLength(); i++) {

                    Element pathelement = (Element) nodeList.item(i);
                    imgList.add(pathelement.getAttribute("path"));

                    System.out.println("Images List"
                            + pathelement.getAttribute("path"));
                    list_data.add(new List_Data(pathelement
                            .getAttribute("path"), i + ""));
                }

            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            dealAdapter = new LazyAdapter(GalleryShow.this,
                    R.id.ImageView01, list_data);
            return null;
        }

        protected void onPostExecute(Void result) {

            gridview.setAdapter(dealAdapter);
            if (this.dialog.isShowing()) {
                this.dialog.dismiss();
            }

        }

    } 
```

在这段代码中，我使用了 DOM 解析，您将自己修改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:21:33.870

为您的gridview设置一个适配器。（即 ArrayAdapter）在 doInbackground 函数中编写一个从服务器下载信息的 AsyncTask，

更新 AsyncTask 的 onPostExecute 函数中的适配器内容

检查： http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)对于AsyncTask，还有一个例子

# javascript - 使用 jquery 添加类和淡入淡出

> ID：10294156
> 
> 赞同：1
> 
> 时间：2012-04-24T08:13:45.400
> 
> 标签：javascript, jquery

我有以下代码：

```
$("#rade_img_map_1335199662212").hover(function () {
     $("li#rs1").toggleClass("active");  //Toggle the active class to the area is hovered
     $("li#rs1").fadeIn("slow");
}); 
```

我需要添加活动类然后淡入。我有`li'rs1`设置为的css，`visibility:hidden`当应用该类时，我只是设置它的样式。

我如何使用淡入淡出？

我也在构造这个吗？- 我有 13 个不同的`li#rs1`，`li#rs2`......一直到`li#rs13`具有不同的图像映射 ID。这就是为什么我认为我需要 13 块代码。

编辑：我有区域 ID，所以需要减少代码：

```
$(document).ready(function () {
    $("map#rade_img_map_1335255669666 area#1").hover(function () {
             $("li#rs1").toggleClass("active");  //Toggle the active class to the area is hovered
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:26:19.033

`$("li#rs1")`可以替换为`$("#rs1")`。

此外，如果您的 id 是#rs1 ... #rs13，则不需要 13 个代码块。您可以使用循环遍历您的项目：

```
for (i = 1; i <= 13; i++) $("#rs" + i) /* code here*/ 
```

您可以对同一项目的操作使用链接：

```
for (i = 1; i <= 13; i++) $("#rs" + i).toggleClass("active").fadeIn("slow"); 
```

为了使您的fadeIn 工作，您应该使用`display:none`+fadeIn() 或`opacity:0`+fadeIn()。据我所知，`visibility:hidden`不适用于fadeIn()。

**编辑：**

如果您需要对您的区域进行其他操作，您可以应用上面编写的代码。这是您可以将 id 附加到区域的方法：

```
var index = 0;
$("#rade_img_map_1335255669666 area").each(function(){
    index++;
    $(this).attr("id", "areaId" + index);
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T08:29:02.553

您的选择器可以选择所有相关项目，如下所示：

```
var $items = $("#rs1, #rs2, #rs3, #rs4, #rs5, #rs6, #rs7, #rs8, #rs9, #rs10, #rs11, #rs12, #rs13"); 
```

或者，如果您在列表中有一个 id（例如：）`<ul id='myUlId'>`，那就更容易了：

```
var $items = $('#myUlId li'); 
```

然后：

```
$("#rade_img_map_1335199662212").hover(function () {
    $items.toggleClass("active").fadeIn("slow");  //Toggle the active class to the area is hovered and fade in.

}); 
```

**更新**......或者更简单，一口气涵盖所有内容！：

```
$("#rade_img_map_1335199662212").hover(function () {
    $('#myUlId li').toggleClass("active").fadeIn("slow");  //Toggle the active class to the area is hovered and fade in.

}); 
```

**更新 2**
应用于 li 的 id 对应于悬停区域：

```
$("#rade_img_map_1335199662212 area").hover(function () {
    var areaId = $(this).attr('id'); //grab the hovered area's it
    var $li = $('li#rs' + areaId); //select an li based on the hovered area
    $li.toggleClass("active").fadeIn("slow");  //Toggle the active class  and fade in.

}); 
```

**更新 3** ...如果该区域没有 id，那么您需要一种方法从包含它的其他属性中刮取适当的数字，例如 href。假设hrefs都以常规模式在其中某处具有索引号，并且没有其他数字，那么您可以使用

```
var href = $(this).attr('href');
var id = href.match(/\d+/) 
```

如果您可以控制地图的标记结构，那么最酷（HTML5，但向后兼容）的事情就是将索引放在 data- 属性中，如下所示：

```
 <area data-li-id="4"> 
```

然后在悬停功能内的*一行*中为 li 抓取一个选择器，如下所示：

```
var $li = $('li#' + $(this).attr('data-li-id')); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T08:30:21.180

我猜您正在尝试在地图悬停并淡入时向每个区域添加一个类。在这种情况下，您可以这样做：

```
$("map#rade_img_map_1335255669666").hover(function(e){
    $(this).find("area").addClass("active").fadeIn("slow");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T08:47:17.993

我会为你的所有`<map>`元素添加一个公共类和目标元素的 id 作为数据属性

```
<map id="rade_img_map_1335255669666" name="rade_img_map_1335255669666" class="hover_map" data-targetid="rs1">
  <area href="#" coords="10,10,162,48" shape="RECT" />
  <area href="#" coords="30,4,112,18" shape="RECT" />
</map>
<map id="rade_img_map_1335255669667" name="rade_img_map_1335255669667" class="hover_map" data-targetid="rs2">
  <area href="#" coords="10,10,162,48" shape="RECT" />
  <area href="#" coords="30,4,112,18" shape="RECT" />
</map>
...<etc>... 
```

并使用单个 jquery 块来处理所有情况

```
$("map.hover_map").hover(function () {
     var targetId = $(this).data('targetid'),
         targetElement = $('#' + targetId);
     targetElement.toggleClass("active");  //Toggle the active class to the area is hovered
     if ( targetElement.is('active') ) {
        targetElement.css({opacity:0}).animate({opacity:1});
     }
}); 
```

你应该为你所有的 rs1、rs2 添加一个公共类......像这样

```
<div id="rs1" class="inactive">...</div>
<div id="rs2" class="inactive">...</div> 
```

你的CSS应该是

```
.inactive{visibility:hidden;}
.active{visibility:visible;} 
```

# android - Android App LVL保护破解

> ID：10294159
> 
> 赞同：3
> 
> 时间：2012-04-24T08:13:52.377
> 
> 标签：android, cracking, android-lvl

我的使用 Proguard 混淆并受 Google LVL 保护的 Android 应用程序可能已被[Lucky Patcher](http://www.dailymotion.com/video/xpqu1g_how-to-remove-licence-verification-of-android-apps-rooted-mobile_tech)之类的工具破解，删除了许可证检查 :-(

您是否知道实施 Google 许可证检查的任何更好的方法，可能按照[此处](http://android-developers.blogspot.de/2010/09/securing-android-lvl-applications.html)所述修改许可证库或使用其他一些技术，最好不与服务器通信。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:52:51.140

一般来说，按照文章中的指导，更改默认的 LVL 实现。更具体地说，获取破解版并尝试找出他们更改的确切内容，然后专注于那部分。

# eclipse - 关于场景的实现

> ID：10294161
> 
> 赞同：-1
> 
> 时间：2012-04-24T08:13:59.233
> 
> 标签：eclipse

我的条件是……除此 WalgreensRewardsDRLookupEnabledPPI 类外，还应检查字段 WAG_REWARDS_DR_ROLLOUT_LOOKUP_LOCKED 是否为真。如果为真，则检查事务参数 ITransactionHashtableWag.EMPLOYEE_DISCOUNT_APPLIED_ENABLE_LOOKUP。仅当它为真时，返回值 10，否则返回值 0。如果 WAG_REWARDS_DR_ROLLOUT_LOOKUP_LOCKED 为假，则返回值 10。

请告知以下代码实现是否正确..

```
 if (WAG_REWARDS_DR_ROLLOUT_LOOKUP_ LOCKED == true)
{
   if ( (WAG_REWARDS_DR_ROLLOUT_LOOKUP_ LOCKED == true) && (ITransactionHashtableWag.EMPLOYEE_DISCOUNT_APPLIED_ENABLE_LOOKUP == true)
    {
  return 10 ;

}
}
else 
return 0; 
```

请告知以上实现是否正确.!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:47:45.877

这是不正确的。当 WAG_REWARDS_DR_ROLLOUT_LOOKUP_LOCKED 为真且 EMPLOYEE_DISCOUNT_APPLIED_ENABLE_LOOKUP 为假时，您没有返回语句。您可以将其大大简化为：

```
if (WAG_REWARDS_DR_ROLLOUT_LOOKUP_LOCKED
    && ITransactionHashtableWag.EMPLOYEE_DISCOUNT_APPLIED_ENABLE_LOOKUP) {
  return 10;
}
return 0; 
```

# android - 如何在 android 文件系统（冰淇淋三明治）中使用 openipmp 客户端（DRMPluginAll）

> ID：10294162
> 
> 赞同：0
> 
> 时间：2012-04-24T08:14:00.207
> 
> 标签：android, drm

首先我想说我已经搜索了每个论坛以获得答案。我已经问了很多与这个问题相关的问题，但我没有得到蚂蚁的答案。

请至少回答天气是否可能。

我们想为 android 写一个 DRMPlugin。我知道我们可以编写第三方库。OpenIPMP 开源可用于 DRM。它有一个客户端 DRMPluginAll。

我想问我可以直接在android文件系统中使用该客户端作为DRM插件。可能是我必须做的一些修改，但它会在最新的 android 文件系统上运行，如 Ice Cream Sandwich 或 Gingerbread。

我读过 OpenIPMP 最后一次更新是在 2006 年，所以它可以与最新的文件系统一起使用。

编写自己的 DRM 插件并不是一件容易的事，显然您必须参考一些资料。我得到了这个链接，示例 DRM 插件，我想知道这是什么意思

[http://www.androidcodesearch.com/acs/source/frameworks/base/drm/libdrmframework/plugins/passthru/](http://www.androidcodesearch.com/acs/source/frameworks/base/drm/libdrmframework/plugins/passthru/)

我不能直接使用它。

谢谢，请回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:34:41.510

如何使用此 URL 进行搜索：

[https://play.google.com/store/search?q=+DRM+Client+for+Android&c=apps](https://play.google.com/store/search?q=+DRM+Client+for+Android&c=apps)

我在这里找到了许多适用于 Android 的 DRM 客户端。但是您必须购买 DRM 服务器。

另一个开源 DRM 是：

[http://sourceforge.net/apps/mediawiki/drm/index.php?title=Main_Page](http://sourceforge.net/apps/mediawiki/drm/index.php?title=Main_Page)

适用于 Android ICS 的 DRM：

[http://www.prweb.com/releases/2012/2/prweb9210381.htm](http://www.prweb.com/releases/2012/2/prweb9210381.htm)

# objective-c - WebView 动态调整内容大小

> ID：10294164
> 
> 赞同：1
> 
> 时间：2012-04-24T08:14:21.440
> 
> 标签：objective-c, xcode, cocoa

我无法调整 WebView 元素的大小以适应其内容。我不想调整内容的大小，我希望 WebView 及其包含的自定义视图和 NSWindow 调整大小以适应内容。

目前我已经尝试使用 JavaScript 来获取宽度和高度并调整 3 个元素的大小，以及使用 NSRect 和 setFrameSize 但没有运气（如下所示）。

所以基本上，如果我有一个带有 Web 视图的自定义视图的 NSWindow，我如何让它们调整大小以适应 WebView 的内容？

提前谢谢大家！

这就是我目前所拥有的，它只会弄得一团糟（它不会调整主窗口的大小，并且会使窗口的内容溢出）。

```
NSString *width = [_myWebView stringByEvaluatingJavaScriptFromString:@"document.body.scrollWidth;"];
NSString *height = [_myWebView stringByEvaluatingJavaScriptFromString:@"document.body.scrollHeight;"];

NSSize size;
size.width = [width floatValue];
size.height = [height floatValue];

NSRect mySize = NSMakeRect(_window.frame.origin.x, _window.frame.origin.y, size.width, size.height);
[_window setFrame:mySize display:YES]; // Resize main NSWindow
[_webViewView setFrameSize:size]; // Resize custom view of main NSWindow
[_myWebView setFrameSize:size]; // Resize WebView in custom view 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T22:47:13.113

据我所知，您有一个包含自定义视图的窗口，它本身包含一个 Web 视图。

您希望将内容加载到 Web 视图中并让 Web 视图的框架更改大小以适应该内容。您还希望包含视图和窗口相应地调整大小。

一旦您知道如何根据其内容调整 Web 视图的大小，正如[我对另一个问题的回答中](https://stackoverflow.com/questions/2675244/how-to-resize-webview-according-to-its-content)所解释的那样，您就可以轻松地相应地调整容器的大小。

我将在这里重复我的答案，并添加调整包含对象的大小。

正如我在另一个答案中所指出的，您无法提前知道内容有多大，而且许多网站太大而无法显示在屏幕上。您可能需要将窗口的高度限制为屏幕高度才能使用。

```
- (void)loadWebPage
{
    //set ourselves as the frame load delegate so we know when the window loads
    [webView setFrameLoadDelegate:self];

    //turn off scrollbars in the frame
    [[[webView mainFrame] frameView] setAllowsScrolling:NO];

    //load the page
    NSURLRequest* request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://daringfireball.net"]];
    [[webView mainFrame] loadRequest:request];
}

//called when the frame finishes loading
- (void)webView:(WebView *)sender didFinishLoadForFrame:(WebFrame *)webFrame
{
    if([webFrame isEqual:[webView mainFrame]])
    {
        //get the rect for the rendered frame
        NSRect webFrameRect = [[[webFrame frameView] documentView] frame];
        //get the rect of the current webview
        NSRect webViewRect = [webView frame];

        //calculate the difference from the old frame to the new frame
        CGFloat deltaX = NSWidth(webFrameRect) - NSWidth(webViewRect);
        CGFloat deltaY = NSHeight(webFrameRect) - NSHeight(webViewRect);

        //make sure our web view and its superview resize automatically when the 
        //window resizes
        [webView setAutoresizingMask:NSViewWidthSizable | NSViewHeightSizable];
        [[webView superview] setAutoresizingMask:NSViewWidthSizable | NSViewHeightSizable];

        //set the window's frame, adjusted by our deltas

        //you should probably add some code to constrain the size of the window
        //to the screen's content size
        NSRect windowFrame = window.frame;
        [webView setFrameSize:NSMakeSize(NSWidth(window.frame) + deltaX, NSHeight(window.frame) + deltaY)];

        //turn scroll bars back on
        [[[webView mainFrame] frameView] setAllowsScrolling:YES];
    }
} 
```

# javascript - 如何使用phonegap检查电话目录中的文件是否存在

> ID：10294166
> 
> 赞同：18
> 
> 时间：2012-04-24T08:14:28.493
> 
> 标签：javascript, android, ajax, cordova

我正在使用 Phonegap 1.4.1 和 Sencha 编写一个下载和读取 pdf 文件的 Android 应用程序。如何使用 phonegap 方法、javascript 或 ajax 检查文件是否存在于电话目录中？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-11T16:36:07.067

我有同样的问题。我无法让 Darkaico 的答案起作用，但有了 Kurt 的答案，我可以让它起作用。

这是我的代码：

```
function checkIfFileExists(path){
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function(fileSystem){
        fileSystem.root.getFile(path, { create: false }, fileExists, fileDoesNotExist);
    }, getFSFail); //of requestFileSystem
}
function fileExists(fileEntry){
    alert("File " + fileEntry.fullPath + " exists!");
}
function fileDoesNotExist(){
    alert("file does not exist");
}
function getFSFail(evt) {
    console.log(evt.target.error.code);
} 
```

然后你只需要像这样执行：

```
checkIfFileExists("path/to/my/file.txt"); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-09-19T14:55:29.850

`.getFile('fileName',{create:false},success,failure)`我使用该方法获得了文件的句柄。如果我得到`success`回调文件就在那里，否则任何失败都意味着文件有问题。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2015-01-21T04:05:06.247

上面的答案对我不起作用，但确实如此：

```
window.resolveLocalFileSystemURL(fullFilePath, success, fail); 
```

来自：[http ://www.raymondcamden.com/2014/07/01/Cordova-Sample-Check-for-a-file-and-download-if-it-isnt-there](http://www.raymondcamden.com/2014/07/01/Cordova-Sample-Check-for-a-file-and-download-if-it-isnt-there)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-23T18:53:18.240

您可以使用 phonegap 中的 FileReader 对象检查文件是否存在。您可以检查以下内容：

```
var reader = new FileReader();
var fileSource = <here is your file path>

reader.onloadend = function(evt) {

    if(evt.target.result == null) {
       // If you receive a null value the file doesn't exists
    } else {
        // Otherwise the file exists
    }         
};

// We are going to check if the file exists
reader.readAsDataURL(fileSource); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-28T19:00:43.480

Darkaico、Kurt 和 thomas 的答案对我不起作用。这对我有用。

```
$.ajax({
url:'file///sdcard/myfile.txt',
type:'HEAD',
error: function()
{
    //file not exists
alert('file does not exist');
},
success: function()
{
    //file exists
alert('the file is here');
}
}); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-11-27T18:20:00.453

@PassKit 是正确的，在我的情况下，我需要添加一个事件监听器

```
document.addEventListener("deviceready", onDeviceReady, false);
function onDeviceReady() {
       window.requestFileSystem = window.requestFileSystem || window.webkitRequestFileSystem;
       window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, fsSuccess, fsError);
} 
```

然后对于函数“fsSuccess”中的值“fileSystemRoot”

```
var fileSystemRoot; // Global variable to hold filesystem root

function fsSuccess(fileSystem) {
       fileSystemRoot = fileSystem.root.toURL();
} 
```

函数“checkFileExists”

```
function checkFileExists(fileName) {
    var http = new XMLHttpRequest();
    http.open('HEAD', fileName, false);
    http.send(null);
    if (http.status.toString() == "200") {
        return true;
    }
    return false
} 
```

检查文件是否存在

```
if (checkFileExists(fileSystemRoot + "fileName")) {
     // File Exists
} else {
     // File Does Not Exist
} 
```

IOS 中的 var fileSystemRoot 返回“cdvfile://localhost/persistent/”，文件存储在“//var/mobile/Containers/Data/Application/{AppID}/Documents”

非常感谢@PassKit，它在同步模式下运行并在 IOS 8.1 中进行了测试

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-04T15:47:01.117

Kurt 和 Thomas 给出了更好的答案，因为 Darkaico 的函数不仅会检查文件是否存在，还会打开文件并读取它直到结束。

这不是小文件的问题，但是如果您检查大文件，则应用程序可能会崩溃。

无论如何，请使用 .getFile 方法——这是最好的选择。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-10-29T14:20:10.573

我已经测试了以下代码片段，并且在 PhoneGap 3.1 中对我来说效果很好

```
String.prototype.fileExists = function() {
filename = this.trim();

var response = jQuery.ajax({
    url: filename,
    type: 'HEAD',
    async: false
}).status;  

return (response != "200") ? false : true;}

if (yourFileFullPath.fileExists())
{} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-10-01T15:28:44.563

当前所有答案的问题在于它们依赖于更新全局变量的异步回调。如果您正在检查多个文件，则存在变量将由不同的回调设置的风险。

基本的 Javascript XMLHttpRequest 检查非常适合同步检查文件是否可以通过 Javascript 访问。

```
function checkFileExists(fileName){

    var http = new XMLHttpRequest();
    http.open('HEAD', fileName, false);
    http.send(null);
    return (http.status != 404);
} 
```

只需传入文件的完整路径，然后您就可以可靠地使用：

```
if (checkFileExists(fullPathToFile)) {
    // File Exists
} else {
    // File Does Not Exist
} 
```

要将根路径存储在变量中，您可以使用：

```
var fileSystemRoot; // Global variable to hold filesystem root

window.requestFileSystem  = window.requestFileSystem || window.webkitRequestFileSystem;
window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, fsSuccess, fsError);

function fsError() {
    console.log("Failed to get Filesystem");
}

function fsSuccess(fileSystem) {
    console.log("Got Filesystem: Root path " + fileSystem.root);

    // save the file to global variable for later access
    window.fileSystemRoot = fileSystem.root;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-04-27T14:06:14.053

笔记：

当我得到文件系统时，我将它保存在宏 pg 对象下的 var 中：

```
pg = {fs:{}}    // I have a "GOTFS" function... a "fail" function
pg.fs.filesystem = window.requestFileSystem(window.PERSISTENT, 0, pg.fs.GOTFS, pg.fs.fail); 
```

所以我的代码很简单......

```
var fileExists = function(path, existsCallback, dontExistsCallback){
    pg.fs.fileSystem.root.getFile(path, { create: false }, existsCallback, dontExistsCallback);
        // "existsCallback" will get fileEntry as first param
    } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-04-18T03:46:22.690

此代码可用于自定义案例，完整文档在此处：[如果不存在，请下载](https://www.raymondcamden.com/2014/07/01/Cordova-Sample-Check-for-a-file-and-download-if-it-isnt-there)

```
document.addEventListener("deviceready", init, false);

//The directory to store data
var store;

//Used for status updates
var $status;

//URL of our asset
var assetURL = "https://raw.githubusercontent.com/cfjedimaster/Cordova-Examples/master/readme.md";

//File name of our important data file we didn't ship with the app
var fileName = "mydatafile.txt";

function init() {

$status = document.querySelector("#status");

$status.innerHTML = "Checking for data file.";

store = cordova.file.dataDirectory;

//Check for the file.
window.resolveLocalFileSystemURL(store + fileName, appStart, downloadAsset);

}

function downloadAsset() {
var fileTransfer = new FileTransfer();
console.log("About to start transfer");
fileTransfer.download(assetURL, store + fileName,
function(entry) {
console.log("Success!");
appStart();
},
function(err) {
console.log("Error");
console.dir(err);
});
}

//I'm only called when the file exists or has been downloaded.
function appStart() {
$status.innerHTML = "App ready!";
} 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2013-09-19T10:16:23.337

```
 var fileexist;
function checkIfFileExists(path){
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function(fileSystem){
        fileSystem.root.getFile(path, { create: false }, fileExists, fileDoesNotExist);
    }, getFSFail); //of requestFileSystem
}
function fileExists(fileEntry){
    alert("File " + fileEntry.fullPath + " exists!");
    fileexist = true;
}
function fileDoesNotExist(){
    alert("file does not exist");
   fileexist = false;
}
function getFSFail(evt) {
    console.log(evt.target.error.code);
    fileexist=false;
} 
```

现在你可以使用条件

```
if(fileexist=="true"){
//do something;
}
else if(fileexist=="false"){
//do something else
} 
```

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2013-07-23T20:38:28.930

如果您需要布尔兼容的方法...

```
function checkIfFileExists(path){
    var result = false;

    window.requestFileSystem(
        LocalFileSystem.PERSISTENT, 
        0, 
        function(fileSystem){
            fileSystem.root.getFile(
                path, 
                { create: false }, 
                function(){ result = true; }, // file exists
                function(){ result = false; } // file does not exist
            );
        },
        getFSFail
    ); //of requestFileSystem

    return result;
} 
```

* * *

## 回答 #14

> 赞同：-3
> 
> 时间：2016-07-11T15:46:47.663

我接受了上面的@Thomas Soti 回答，并将其精简为简单的是/否响应。

```
function fileExists(fileName) {
  window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function(fileSystem){
      fileSystem.root.getFile(cordova.file.dataDirectory + fileName, { create: false }, function(){return true}, function(){return false});
  }, function(){return false}); //of requestFileSystem
}
// called as
if (fileExists("blah.json")) {
or
var fe = fileExists("blah.json) ; 
```

更正....这不起作用。我现在正在修复。

# jquery - jQuery UI datepicker：如何将星期日涂成红色？

> ID：10294167
> 
> 赞同：2
> 
> 时间：2012-04-24T08:14:29.020
> 
> 标签：jquery, jquery-ui, datepicker, jquery-ui-datepicker

我需要星期天用红色突出显示。

我知道有一个类叫 `ui-datepicker-week-end`.

我的问题是，即使 set ，其他类（`ui-widget-content`和`ui-state-default`）也会覆盖 的红色。`ui-datepicker-week-end``!important`

唯一有颜色的是日历标题中的周末。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T08:22:37.987

`.ui-datepicker-week-end`您可以设置作为元素后代的锚的样式，并在添加背景颜色时将其`background-image`属性设置为。`none`这会产生良好的结果，而无需使用`!important`：

```
.ui-datepicker-week-end a {
    background-image: none;
    background-color: red;
} 
```

**编辑：**如果你想设置`color`属性而不是`background-color`，你确实必须使用`!important`：

```
.ui-datepicker-week-end a {
    color: red !important;
} 
```

[你可以在这个 fiddle](http://jsfiddle.net/eB9wm/)中看到结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-29T11:56:10.863

简单的方法

星期天这样涂红色

```
.datepicker table tr td:first-child {
color: red
} 
```

星期一这样涂红色

```
.datepicker table tr td:first-child +td {
color: red
} 
```

星期四这样涂红色

```
.datepicker table tr td:first-child + td + td {
color: red
} 
```

# iphone - 使用 MPMediaPropertyPredicate 搜索多种类型

> ID：10294168
> 
> 赞同：2
> 
> 时间：2012-04-24T08:14:30.593
> 
> 标签：iphone, ios, ipod, mpmediaitem, mpmediaquery

我有以下内容：

```
MPMediaPropertyPredicate *titlePredicate = [MPMediaPropertyPredicate predicateWithValue:textString 
                                                                            forProperty:MPMediaItemPropertyTitle
                                                                         comparisonType:MPMediaPredicateComparisonContains];

NSSet *predicateSet = [NSSet setWithObject:titlePredicate];
MPMediaQuery *searchQuery = [[MPMediaQuery alloc] initWithFilterPredicates:predicateSet];
NSArray *itemsFromTextQuery = [searchQuery items];

 for (MPMediaItem *song in itemsFromTextQuery) 
 {
     [arrayOfSongItems addObject:song];
 } 
```

效果很好，但只搜索了曲目的标题。我希望它返回标题、艺术家和专辑名称的结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T15:25:12.837

这对我有用：

```
MPMediaQuery *searchQuery = [[MPMediaQuery alloc] init];
NSPredicate *test = [NSPredicate predicateWithFormat:@"title contains[cd] %@ OR albumTitle contains[cd] %@ OR artist contains[cd] %@", searchString, searchString, searchString];
NSArray *filteredArray = [[searchQuery items] filteredArrayUsingPredicate:test];

//NSLog(@"%@", [filteredArray valueForKeyPath:@"title"]);

for (MPMediaItem *song in filteredArray) 
{
    [arrayOfSongItems addObject:song];
} 
```

我基本上在从媒体查询中获取所有项目*后进行过滤。*我认为我的解决方案并不比首先过滤查询更好，但绝对比单独搜索三次更好。或者多次遍历数组。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T08:47:18.800

试试下面的代码

```
 MPMediaQuery* query = [MPMediaQuery albumsQuery];

[query addFilterPredicate:[MPMediaPropertyPredicate predicateWithValue:self.strArtist forProperty:MPMediaItemPropertyArtist]]

[query addFilterPredicate:[MPMediaPropertyPredicate predicateWithValue:self.strTitle forProperty:MPMediaItemPropertyAlbumTitle]]; 
```

# asp.net - 发送邮件时出现异常

> ID：10294173
> 
> 赞同：0
> 
> 时间：2012-04-24T08:14:50.787
> 
> 标签：asp.net, c#-4.0, smtp, html-email

> **可能重复：**
> [如何在 ASP.NET 表单中使用 gmail SMTP](https://stackoverflow.com/questions/7982810/how-to-use-gmail-smtp-in-asp-net-form)

发送邮件时出现异常。- 根据验证程序，远程证书无效。需要解决方案。我的代码是：

```
public bool mailSender(string toMailId, string uniqueGuid)
        {
            try
            {
                SmtpClient smtpClient = new SmtpClient();
                string linkForConfirm = "orderConfirmation.aspx?id=" + uniqueGuid;
                string Subject = "Shiv Cart Grocery Shop Confirmation";
                string body = " <div style='width:700px; margin:0 auto;'><div style='background-color:#800000; width:700px'>";
                body += "</div><div><h2>Shiv Cart Grocery Shop</h2><h3 style='color:#0099FF; width:700px'> Click Below To Confirm Your Order</h3>";
                body += "<a href='" + linkForConfirm+ "' id='a' ></a></div></div>";
                MailAddress fromMailAddress = new MailAddress("mail@sumedhasoftech.com", "Shiv Cart");
                MailAddress toMailAddress = new MailAddress(toMailId);
                MailMessage mail = new MailMessage(fromMailAddress, toMailAddress);
                mail.Subject = Subject;
                mail.Body = body;
                mail.IsBodyHtml = true;
                smtpClient.Host = "smtp.gmail.com";
                smtpClient.Credentials = new System.Net.NetworkCredential(WebConfigurationManager.AppSettings["MailSenderUserName"].ToString(), WebConfigurationManager.AppSettings["MailSenderPass"].ToString());
                smtpClient.EnableSsl = true;
                smtpClient.Send(mail);
                return true;
            }
            catch (Exception)
            {
                return false;
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:52:50.507

如评论中所述，您应该为 gmail 添加此内容。

```
smtpClient.SmtpPort = 587; 
```

更多信息可以在这个线程中找到：[How to use gmail SMTP in ASP.NET form](https://stackoverflow.com/questions/7982810/how-to-use-gmail-smtp-in-asp-net-form/7982891#7982891)

# android - 如果选中任何项目，CheckBoxes 的 Android ListView 总是检查第一个项目

> ID：10294174
> 
> 赞同：0
> 
> 时间：2012-04-24T08:15:00.073
> 
> 标签：android, listview, checkbox

最近遇到一个ListView的问题。其中有一个复选框列表。选中的项目被馈送到调用 Activity，该 Activity 使用 startActivityForResult 启动我的 ListActivity。如果在调用 ListActivity 之前有任何选中的项目，则将这些项目传递给它，以便用户可以编辑他以前的选择而不是重新开始。第一次一切都很好。但是当我想通过再次调用 ListActivity 来更改选择时，列表中的第一个复选框*看起来*就像检查列表中的任何项目是否被检查一样。事实上，它未被识别为已检查，即检查已选择项目的代码在处理第一项时不会触发，并且在再次保存选择后，只要第一项不是返回给父项的列表的一部分它没有被明确检查（通过取消检查然后再次检查）。

当我搜索这个问题时，我发现一个ListView的第一项接收焦点，所以我尝试了

```
listView.setItemsCanFocus(false); 
```

没有效果。实际上，如果它有效，我会感到惊讶，因为该项目仅在有非空选择时才被检查。由于我没有发现任何问题可以解决我的问题，因此我将其归结为一个仍然产生所描述效果的示例。对不起所有的代码，但我完全不知道要寻找什么，所以我不知道如何通过发布更少来描述我的问题。

**调用活动的 onCreate 和 onActivityResult：**

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    listItems = new ArrayList<String>();
    list = (TextView) findViewById(R.id.list);
    list.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            Bundle extras = new Bundle();
            extras.putStringArrayList("item_list", listItems);
            Intent i = new Intent(Main.this, CheckBoxListActivity.class);
            i.putExtras(extras);
            startActivityForResult(i,1);
        }
    });

}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent intent) {
    super.onActivityResult(requestCode, resultCode, intent);
    Bundle extras = new Bundle();
    extras = intent.getExtras();
    String[] strings = extras.getStringArray("item_list");
    String text = "";

    listItems.clear();
    for ( String item : strings ) {
        text = text + item + ", ";
        listItems.add(item);
    }
    if ( text.length() != 0 ) {
        text = text.substring(0, text.length() - 2);
    } else {
        text = "(nothing here)";
    }
    list.setText(text);
} 
```

**ListActivity 中的 onCreate() 和 finish()：**

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.checkbox_list);
    listView = getListView();

    save = (Button) findViewById(R.id.save_button);
    save.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            Log.i(LOG_TAG, "save button clicked");
            finish();
        }
    });

    ArrayList<String> itemList = new ArrayList<String>();
    itemList.add( "foo" );
    itemList.add( "bar" );
    itemList.add( "baz" );
    itemList.add( "qux" );
    itemList.add( "quux" );

    checkedItems = getIntent().getExtras().getStringArrayList("item_list");
    ArrayAdapter<String> arrayAdapter = new ItemsAdapter(this, R.layout.checkbox_list, itemList);
    listView.setAdapter(arrayAdapter);

}

@Override
public void finish() {
    Bundle extras = new Bundle();
    String[] stringArray = new String[checkedItems.size()];
    for ( int i = 0; i < checkedItems.size(); i++) {
        stringArray[i] = checkedItems.get(i);
    }

    extras.putStringArray("item_list", stringArray);
    Intent mIntent = new Intent();
    mIntent.putExtras(extras);
    setResult(RESULT_OK, mIntent);
    super.finish();
} 
```

**和 ArrayAdapter：**

```
private class ItemsAdapter extends ArrayAdapter<String> {

    public ItemsAdapter(Context context, int textViewResourceId, List<String> items) {
        super(context, textViewResourceId, items);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        if (v == null) {
            LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.checkbox_list_row, null);
        }
        String entry = getItem(position);
        v.setTag(entry);
        fillText(v, R.id.checkbox, entry);
        return v;
    }

    private void fillText(View v, int id, String text) {
        Log.i(LOG_TAG, "this is fillText, our text is: " + text);

        CheckBox checkBox = (CheckBox) v.findViewById(id);
        if ( checkedItems.contains(text)) {
            Log.i(LOG_TAG, "item has to be checked");
            checkBox.setChecked(true);
        }
        checkBox.setText(text == null ? "" : text);
        checkBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {
            public void onCheckedChanged(CompoundButton cb, boolean isChecked) {
                String tag = (String) cb.getTag();
                if (cb.isChecked()) {
                    // add item to set of checkedItems
                    if ( !checkedItems.contains(tag)) {
                        checkedItems.add(tag);
                        Log.i(LOG_TAG, "checkedItems: " + checkedItems.toString());
                    }
                } else {
                    // remove item from set of checkedItems
                    if ( checkedItems.contains(tag)) {
                        checkedItems.remove((String) cb.getTag());
                        Log.i(LOG_TAG, "checkedItems: " + checkedItems.toString()); 
                    }
                }
            }
        }); 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T08:36:45.527

您需要注意，可能会选中转换视图中的复选框。如果文本不在列表中，您需要取消选中它。

```
private void fillText(View v, int id, String text) {
        Log.i(LOG_TAG, "this is fillText, our text is: " + text);

        CheckBox checkBox = (CheckBox) v.findViewById(id);
        if ( checkedItems.contains(text)) {
            Log.i(LOG_TAG, "item has to be checked");
            checkBox.setChecked(true);
        } else {
            checkBox.setChecked(false);     
        } 
```

# dns - 为什么 Google 公共 DNS(8.8.8.8) 的 ping 延迟如此之低？

> ID：10294175
> 
> 赞同：8
> 
> 时间：2012-04-24T08:15:04.030
> 
> 标签：dns, ping, host, low-latency

我使用[just-ping](http://just-ping.com) ping 谷歌公共DNS 服务器，IP 为8.8.8.8。 [just-ping](http://just-ping.com)可以从全球 50 个位置 ping 主机。

我发现 DNS 的延迟在全球范围内都很低。许多城市彼此相距很远，但它们的 ping 延迟相同（约 5 毫秒）。

我想 IP 8.8.8.8 被定向到一台主机。即使远离客户，该主机如何反应如此之快？

谢谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-24T10:02:30.303

8.8.8.8**不是**一台主机。相反，它是一个[任意播](http://en.wikipedia.org/wiki/Anycast)地址，它路由到世界各地许多地方最近的主机。

# javascript - 如何在HTML中的div中逐行显示文本

> ID：10294181
> 
> 赞同：1
> 
> 时间：2012-04-24T08:15:28.327
> 
> 标签：javascript, css, html

我有带有文本 div 的 html 页面我希望在页面加载时应该逐行显示文本。我尝试了很多教程但没有得到如何做到这一点

我已经编辑了代码，现在它工作正常，但它会在幻灯片中的所有文本上出现一次，我希望在每个 div 文本之后休息一下。

```
 <div class="text_paragraph">
                <marquee direction="down" behavior="slide">

                <p>Bovine Respiratory Disease (BRD) is the leading cause of economic loss in the beef industry. <small>1, 2</small>
                    </p>
                 </marquee>
            </div>
            <div class="text_paragraph_1">
                <marquee direction="down" behavior="slide">

                <b>Economic loss:</b>
                <ul><li>Costs the industry an estimated $1 billion each year. <small>3, 4</small></li>
                    <li>Losses can be attributed to death, reduced feed and treatment costs.<small>3,4</small></li>
                    <li>Economic losses range from an estimated $57.48 to $239.69 per head. <small>1, 2</small></li>
                </ul>

            </marquee>        
            </div>
            <div class="text_paragraph_2">
                <marquee direction="down" behavior="slide">

                <b>Bacterial Culprits:</b>
                <p>Four bacterial pathogens are commonly associated with BRD. </p>
                <ul><li>Mannheimia haemolytica</li>
                    <li>Pasteurella multocida</li>
                    <li>Histophilus somni</li>
                    <li>Mycoplasma bovis </li></ul>
                    </marquee>

            </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:19:44.183

使用 break 标记，因为 break 标记插入一个换行符。

```
 <br/> 
```

# php - 将变量添加到 Codeigniter 日历下一个/上一个链接

> ID：10294182
> 
> 赞同：0
> 
> 时间：2012-04-24T08:15:32.797
> 
> 标签：php, codeigniter, codeigniter-2

我在页面上显示了一个 CI 日历，每天发送一组数据来填充，这工作正常，但是我似乎遇到了一个小问题，我无法完全解决这个问题。

我只知道 CI 大约 3 天（以及基于 OOP 的 PHP 5 天！），如果这非常简单，请原谅我。

我需要在日历的下一个/上一个链接中添加一个变量 ($pid)。$pid 将定义从数据库获取的属性，并显示所选月份的属性费率。

在我的“MY_Calendar.php”文件中，我有以下内容：

```
var $CI;
var $lang;
var $local_time;
var $template       = '';
var $start_day      = 'sunday';
var $month_type     = 'long';
var $day_type       = 'abr';
var $show_next_prev = TRUE;
var $next_prev_url  = '/ci/index.php/rates/property/1/'; 
```

/1/ 在网址中的位置，我需要将其更改为 $pid 是日历所在页面的任何内容。

如何将此变量放入类文件中？

我假设在 URL 中获取变量是一个简单的 PHP 连接。

我尝试通过“$this->load->library('calendar', $prefs);”调用首选项

但偏好似乎没有通过（我在同一页面上有一个名为 $prefs 的数组）

有任何想法吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T06:21:30.120

如果您已经扩展了 CI_Calendar 类，只需添加一个新的类属性：

```
var $pid = 1; 
```

如果你传入配置数组，并且你正在调用父构造函数，它应该允许你传入/设置`$pid`变量。

然后你显然会从`$next_prev_url`.

最后，您将覆盖输出下一个/上一个按钮以将`$next_prev_url`与正确的`$pid`. 您应该设置`$pid`为当前页面，因此前一个将是 -1 和下一个 +1，当然检查最小和最大页码以防止在您到达末尾时显示这些链接。

# perl - AppConfig 模块安装失败 (cpan)

> ID：10294183
> 
> 赞同：1
> 
> 时间：2012-04-24T08:15:37.680
> 
> 标签：perl, cpan, template-toolkit

cpan 应用配置

一切顺利；测试通过 - 但没有 AppConfig！

这是输出的结尾：

```
Running make install
Appending installation info to /root/perl5/lib/perl5/x86_64-linux-thread-multi/perllocal.pod
  ABW/AppConfig-1.66.tar.gz
  /usr/bin/make install  -- OK 
```

请注意，将模块复制到其应有的位置没有任何意义。我对开始移动文件犹豫不决。有人遇到这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:26:54.930

`cpan -f AppConfig`当 AppConfig 已经安装并且我运行（`f`= force）时，我得到了完全相同的行为。

由于与 AppConfig 发行版相关的已安装文件没有更改，因此 ExtUtils::Install 不会从`blib`目标位置复制。`perllocal.pod`总是附加到。

# php - 将庞大的数据库导入本地服务器

> ID：10294184
> 
> 赞同：0
> 
> 时间：2012-04-24T08:15:46.677
> 
> 标签：php, jquery, mysql, mysqli, xampp

有什么办法可以将一个巨大的数据库导入我的本地服务器。

该数据库为 1.9GB，将其导入我的本地给我带来了很多问题。

我尝试了 sql 转储，但未能成功将其放入本地，还尝试更改 Php.ini 设置。

请让我知道是否有任何其他方法可以完成此操作。

我使用过 BigDump 和[Sql Dump Splitter](http://www.sqldumpsplitter.com/)，但我仍然能够找到解决方案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T08:24:25.847

```
mysql -u #username# -p #database# < #dump_file# 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T08:20:07.047

*   导航到您的 mysql bin 目录并登录到您的 mysql
*   选择数据库
*   使用 source 命令导入数据

> ```
> [user@localhost] mysql -uroot -hlocalhost // assuming no password
> [user@localhost] use mydb // mydb is the databasename
> [user@localhost] source /home/user/datadump.sql 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T08:45:23.713

恢复该大小的备份将需要很长时间。这里有一些很好的建议：http: [//vitobotta.com/smarter-faster-backups-restores-mysql-databases-with-mysqldump/](http://vitobotta.com/smarter-faster-backups-restores-mysql-databases-with-mysqldump/)它本质上为您提供了一些额外的选项，您可以使用它们来加速初始备份和后续备份恢复。

# python - Python 版本混在一起。请求特定版本会启动意外版本

> ID：10294192
> 
> 赞同：0
> 
> 时间：2012-04-24T08:16:13.063
> 
> 标签：python, centos

我的 Centos 服务器上有 Python 2.4 和 2.7。当我执行 python 时，我得到了 2.7 版本。当我执行 python2.4 时，我启动了 2.4 版。以上是我想要的，但是当我执行 python2.7 时，我启动了 python2.4。我想解决这个问题，但不知道如何解决。我期待看到从 2.7 到 2.4 的链接，但我能找到的内容如下：

在 /usr/bin 目录中，我有：

```
python  
python2 -> python
python2.4 
```

在 /usr/local/bin 我有：

```
python
python2.7
python2.7-config
python-config -> python2.7-config 
```

我查看了 python2.7-config，但看不到任何可能将 python2.7 bin 链接到 python2.4 的内容。谁能建议我如何纠正这个问题。我不想开始卸载 python 版本，因为我知道（从痛苦的经验中）这会弄乱操作系统。谢谢

- 编辑 -

```
/usr/bin/python --- 2.4
/usr/bin/python2 --- 2.4
/usr/bin/python2.4 --- 2.4
/usr/local/bin/python --- 2.7
/usr/local/bin/python2.7 --- 2.4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:31:49.403

1.  尝试`python`从 /usr/bin/ 和 /usr/local/bin/ 中删除以及`python2`从 /usr/bin/ 中删除。

2.  然后尝试运行`which python2.7`看看，does`python2.7` 是从哪里来的。

3.  最后，在 /usr/bin/ 中为所需的 python 版本创建一个`python`和一个符号链接。`python2`请注意，CentOS 可能依赖`python -> python2.4`和`python2 -> python2.4`链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:38:05.580

我不确定我是否完全理解你。尝试在脚本中添加一个 shebang，说明要使用的 python 版本：

```
#!/usr/bin/env python2.7 
```

您还可以通过打印脚本正在使用的 python 版本从脚本中进行调试：

```
>>> import sys
>>> sys.version 
```

# javascript - 如何通过添加新功能在 Eclipse 中扩展 JSDT 中的 javascript 编辑器

> ID：10294199
> 
> 赞同：2
> 
> 时间：2012-04-24T08:17:11.413
> 
> 标签：javascript, editor, eclipse-rcp

我正在使用 RCP 创建具有特殊功能的特殊 javascripts 编辑器，并希望通过在上下文菜单和内容助手中添加新功能来从 JSDT 扩展 js 编辑器。但是我该如何开始。这是我的想法： 1）重写一个 jscript 编辑器，它通过 import org.eclipse.wst.jsdt.internal.ui.javaeditor.CompilationUnitEditor 扩展 CompilationUnitEditor；但是好像不行，它只有JSDT的部分功能，文本中没有彩色波浪标记。

```
import org.eclipse.wst.jsdt.internal.ui.javaeditor.CompilationUnitEditor;

public class Jscript extends CompilationUnitEditor {

    public static final String ID="com.test.scripteditor.editor3";
    public Jscript(){
            super();        
    }   
} 
```

2）任何可能的方法可以直接从plugin.xml添加exentsions以加快这个过程？

感谢您的任何建议。我真的不知道该怎么做。

# objective-c - CALayerArray 在枚举时发生了突变

> ID：10294202
> 
> 赞同：1
> 
> 时间：2012-04-24T08:17:24.247
> 
> 标签：objective-c, nsarray, dispatch

我必须时不时地删除一个数组的对象，当我这样做时，我得到了这个错误。

> 集合 <CALayerArray: 0xc4f3b20> 在枚举时发生了突变

错误出现在这个方法上，它是 Array 的访问者：

```
- (NSArray *)occupantsArray
{
    if (dispatch_get_current_queue() == moduleQueue)
    {
        return occupantsArray;
    }
    else
    {
        __block NSArray *result;

        dispatch_sync(moduleQueue, ^{ //ON THIS LINE
            result = [occupantsArray copy];
        });

        return [result autorelease];
    }
} 
```

如您所见，我注意不返回原始数组而是返回副本，但它仍然崩溃。

我删除数组元素的方法也是这个。

```
- (void)eraseJIDFromArray:(NSString*)jid{

    dispatch_block_t block = ^{
        NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
        int i = 0;
        for(NSString *jidAct in occupantsArray){
            if([jidAct isEqualToString:jid]){
                [occupantsArray removeObjectAtIndex:i];
            }
            i++;
        }
        [pool drain];
    };

    if (dispatch_get_current_queue() == moduleQueue)
        block();
    else
        dispatch_async(moduleQueue, block);

} 
```

该数组最多可以有 200 个元素，因此可能需要一些时间来遍历所有元素，但我正在设置队列，不知道我还能做什么。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T08:36:38.560

这段代码：

```
for(NSString *jidAct in occupantsArray){
    if([jidAct isEqualToString:jid]){
        [occupantsArray removeObjectAtIndex:i];
    }
    i++;
} 
```

可能导致您的问题。枚举数组时不应该删除元素。避免这种情况的方法是使用 NSMutableIndexSet：

```
NSMutableIndexSet *indexes = [NSMutableIndexSet set]; // assuming NSInteger i;
for(NSString *jidAct in occupantsArray){
    if([jidAct isEqualToString:jid]){
        [indexes addIndex:i];
    }
    i++;
}
[occupantsArray removeObjectsAtIndexes:indexes]; 
```

# apache-flex - Flex 中的 Http POST 正文

> ID：10294205
> 
> 赞同：0
> 
> 时间：2012-04-24T08:17:31.240
> 
> 标签：apache-flex, http, rest

有什么方法可以在 flex 中使用 POST/PUT HTTP 方法设置消息正文？或者在浏览器中使用 REST 和 Flex？请帮忙

```
PUT http://myurl:1234/myapi/changename

Accept: application/xml
Content-Type: application/xml

<SpecialService xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
   <SessionId>guid of session</SessionId>
   <UserName>ABC</UserName>
   <NewServiceName>My service xs</NewServiceName>
</SpecialService > 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:58:51.047

理论上，flex 不支持 PUT 或 DELETE 请求，但您可以尝试“X-HTTP-Method-Override”。

```
request.requestHeaders = [new URLRequestHeader("X-HTTP-Method-Override", "PUT")]; 
```

查看以下内容： [RESTful PUT/DELETE with AS3 using X-HTTP-Method-Override](http://cambiatablog.wordpress.com/2010/08/10/287/)

类似问题：[如何在 Flex 中发送 PUT HTTP 请求](https://stackoverflow.com/questions/3641148/how-to-send-put-http-request-in-flex)

# css - @font-face 让 IE8 崩溃

> ID：10294206
> 
> 赞同：7
> 
> 时间：2012-04-24T08:17:33.680
> 
> 标签：css, fonts, internet-explorer-8, crash, font-face

我刚刚通过@font-face（由[fontsquirrel.com](http://fontsquirrel.com)生成）在我的网站上安装了字体 Aller Regular 和 Aller bold。

这是CSS：

```
@font-face {
    font-family: 'AllerRegular';
    src: url('library/fonts/aller_rg-webfont.eot');
    src: url('library/fonts/aller_rg-webfont.eot?#iefix') format('embedded-opentype'),
         url('library/fonts/aller_rg-webfont.woff') format('woff'),
         url('library/fonts/aller_rg-webfont.ttf') format('truetype'),
         url('library/fonts/aller_rg-webfont.svg#AllerRegular') format('svg');
    font-weight: normal;
    font-style: normal;

}

@font-face {
    font-family: 'AllerBold';
    src: url('aller_bd-webfont.eot');
    src: url('library/fonts/aller_bd-webfont.eot?#iefix') format('embedded-opentype'),
         url('library/fonts/aller_bd-webfont.woff') format('woff'),
         url('library/fonts/aller_bd-webfont.ttf') format('truetype'),
         url('library/fonts/aller_bd-webfont.svg#AllerBold') format('svg');
    font-weight: normal;
    font-style: normal;

} 
```

当我在 Firefox 中使用以太字体时，这工作正常，但是当我使用 IE8 时，网页崩溃尝试重新打开并再次崩溃。可以在[http://rcnhca.org.uk/sites/first_steps/找到一个活生生的例子](http://rcnhca.org.uk/sites/first_steps/)

有谁知道是什么导致了这种疯狂？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-08T20:15:13.023

不久前我遇到了同样的问题，经过一些调试后，我发现崩溃是因为`@font-face`（在我的情况下，它被包含在一个名为 fonts.css 的单独样式表中）在`<head>`. IE8 有这个问题，但是当我将渲染移到里面时工作得很好`<body>`。

尝试这个：

```
<head>
  <!--[if gt IE 8]><!-->
    <link href="fonts.css" rel="stylesheet" type="text/css">
  <!--><![endif]-->
</head>
<body>
  <!--[if IE 8]>
    <link href="fonts.css" rel="stylesheet" type="text/css">
  <![endif]-->
  <!-- The rest of your page here -->
</body> 
```

如果浏览器比 IE8 更新，这会在您的脑海中呈现字体样式表。如果浏览器是 IE8，它会在您的身体内呈现它。

注意：如果您支持 IE7 或更早版本，您可能需要调整条件注释。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T22:46:47.863

IE8 似乎更喜欢双引号。这对我来说第一次加载时修复了无样式的文本，可能会为你修复崩溃。

感谢这里的人，它解决了我的问题：[@font-face not embedding in IE8 and under](https://stackoverflow.com/questions/9033353/font-face-not-embedding-in-ie8-and-under)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-18T09:06:54.297

我有使用自定义字体的类似问题开发页面。IE8 崩溃了。我通过在任何其他字体声明之前放置 IE8 字体声明来修复它。IE：

```
<!-- Custom .eot fonts for IE8 -->
<!-- IE8 fonts should load before other font-face declarations to avoid IE8 crash  -->
<!--[if lt IE 9]>
  <link rel="stylesheet" href="/pub/stylesheets/fonts-ie8.css" />     
<![endif]-->

<!-- Custom .woff fonts -->
<link href="/pub/stylesheets/fonts.css" rel="stylesheet"> 
```

# c# - 如何从列表框中获取特定字符串

> ID：10294208
> 
> 赞同：0
> 
> 时间：2012-04-24T08:17:46.157
> 
> 标签：c#, .net, string, listboxitem

我有一个包含一些文本的列表框，我想在 Other: 之后获取所有字符串，这是我使用的代码

```
string[] causearr = lst_Box.Items[i].Value.Split('-');

SqlSrcComplainCgeAnalysis.InsertParameters["ID"].DefaultValue =causearr[0].ToString();                           SqlSrcComplainCgeAnalysis.InsertParameters["subId"].DefaultValue = causearr[2].ToString();

if (txt_OtherCause.Text != string.Empty && txt_OtherCause.Visible == true && (int.Parse(causearr[2].ToString()) == 7 || int.Parse(causearr[2].ToString()) == 15 || int.Parse(causearr[2].ToString()) == 21))
     SqlSrcComplainCgeAnalysis.InsertParameters["CauseComments"].DefaultValue = causearr[3].ToString().Substring(causearr[3].ToString().LastIndexOf(":") + 3);
else
      SqlSrcComplainCgeAnalysis.InsertParameters["CauseComments"].DefaultValue = string.Empty; 
```

这是列表框中的数据

```
Cause:SpareParts-SubCause:Others: First Line
Cause:Technical-SubCause:Others: Second Line 
```

那么如果此数据发生变化，如何在“Others：”之后返回数据，以及根据用户选择的原因发生变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:20:11.913

```
string s = "Cause:SpareParts-SubCause:Others: First Line".Split(new char[] { ' ' }, 2)[1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:25:16.130

```
string value = "Cause:SpareParts-SubCause:Others: First Line"

string[] lines = Regex.Split(value, ":Others:"); 
```

你现在需要`lines[1]`我猜

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T08:26:04.523

您可以做的是首先在冒号“：”上拆分字符串，然后数组中的最后一项将是您想要的数据。

```
result[0] == 'Cause'
result[1] == 'SpareParts-SubCause'
result[2] == 'Others'
result[4] == 'Cause'
result[5] == 'First Line' 
```

或者您可以使用正则表达式以一种很酷的方式完成所有这些操作：

[http://msdn.microsoft.com/en-us/library/hs600312.aspx](http://msdn.microsoft.com/en-us/library/hs600312.aspx)

# qt - 如何调整基于 QWebView 的 Qt 应用程序的声音

> ID：10294209
> 
> 赞同：2
> 
> 时间：2012-04-24T08:17:53.687
> 
> 标签：qt, qtwebkit

我创建了一个 Qt GUI 应用程序，它有 QWebView 对象来打开一个嵌入了 Flash 内容的 URL。我的问题是我想控制我的 Qt 应用程序（QWebView）的音量，但我找不到任何方法来做到这一点。

但是，我遇到了声子模块中的类，例如 AudioOutput 和 VolumeSlider，但没有运气。Qt 网站上有一个例子，但它本身使用媒体播放器，我们可以控制音量。

请告知我们如何才能摆脱这个问题。到目前为止，这似乎是基于 QWebView 的应用程序的限制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T05:30:06.740

问题是 Flash 管理它自己的卷，您无法从 Qt 访问它。

# java - 将 ConcurrentLinkedQueue 与一些非原子操作一起使用

> ID：10294210
> 
> 赞同：2
> 
> 时间：2012-04-24T08:18:15.350
> 
> 标签：java, multithreading, queue

当我们使用诸如 ConcurrentLinkedQueue 甚至一些 BlockingQueue 之类的内置队列之一时，单个调用是原子的并且保证是线程安全的。但是当对 API 的 5 次调用中，有 4 次调用是单一的，但其中一次调用的形式为：

```
if(some condition)
{
    queue.call();
} 
```

此调用需要在同步块中，因为此操作是非原子的。但是引入这个调用不也意味着从现在开始对这个队列的所有访问，无论是读还是写都应该同步？

如果是，我是否可以假设一旦代码中出现一个非原子调用，这很可能，那么所有对花哨队列的访问都必须手动同步？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T08:40:44.063

`ConcurrentLinkedQueue`不会做出与您假设的完全相同的原子保证。从javadoc：

> 内存一致性影响：与其他并发集合一样，线程中的操作在将对象放入 ConcurrentLinkedQueue 之前发生在另一个线程中从 ConcurrentLinkedQueue 访问或删除该元素之后的操作。

这与将 a`LinkedList`或某物包装在 a 中不同`Collections.synchronizedList`；例如，不同的线程可能会看到不同的答案`size()`，因为它不会锁定集合。

根据您的评论，您可能可以将 if 语句替换为对`Queue`'s的一次调用，`poll`并检查检索到的元素是否为空。

# c#-4.0 - 从 ChildWindow.Closed 事件调用 HtmlPage.PopupWindow

> ID：10294213
> 
> 赞同：0
> 
> 时间：2012-04-24T08:18:27.577
> 
> 标签：c#-4.0, silverlight-5.0

上下文：Silverlight 5、64 位、Win7、VS2010

预期：为传入的 url 打开一个新的浏览器窗口/选项卡。实际：没有新的浏览器窗口和选项卡出现。

代码示例：（从 ViewModel 调用。View 是一个 sdk:ChildWindow。

```
AddRelatedIssueDialog dialog = new AddRelatedIssueDialog();
                dialog.Closed +=

                    (s1, e1) =>
                    {
                        if (dialog.DialogResult.HasValue && dialog.DialogResult.Value)
                        {
                            var window = HtmlPage.PopupWindow("www.goole.com", "_blank", null);
                        }
                    };

                dialog.Show(); 
```

我们也尝试过 Prism 事件来做同样的事情，但没有任何乐趣......还包括在控制主机上 - 但再次没有运气。

非常感谢任何帮助：干杯，约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:28:52.713

试试这个：

```
HtmlPage.Window.Navigate(new Uri("www.google.com"), "_blank"); 
```

这个对我有用 ：）

# c - 如何跟踪或调试 GMP？

> ID：10294217
> 
> 赞同：0
> 
> 时间：2012-04-24T08:18:50.517
> 
> 标签：c, debugging, macros, trace, gmp

我已经下载了 GMP 库 5.02 的源代码，并且 - 按照[此处](http://gmplib.org/manual/Debugging.html)的建议以获得最大的可调试性 - 我运行了：

```
./configure --disable-shared --enable-assert --enable-alloca=debug --host=none CFLAGS=-g 
```

并用make编译它，然后用make install安装库。然后我像这样编译我的程序：`gcc -lgmp -std=c99 -g -c program.c`然后我运行：`ltrace ./a.out`

但是我意识到 ltrace 根本没有调用我可以在源代码中找到的 TRACE() 函数。我想跟踪 TRACE() 中的内容。

我该怎么做？或者在 GMP 库中是否有其他直接的调试方法？（我不知道如何用 gdb 来做，它从来不想进入 gmp_printf）

谢谢。

**编辑**：我试图进一步调查，并意识到我无法修改 GMP 库，尽管我有资源。`printf("hello\n");`我在程序开头调用的函数的开头插入了 a `mpz_init2`，我重新编译了所有 GMP（甚至在 a 之后`make clean`）重新安装了库`make install`，然后我编译并启动了我的程序，但它从未打印过“你好”。我还确定，我没有使用另一个已安装的 GMP 库（当我这样做时，`make uninstall`我的程序无法编译，因为它找不到该库）。尽管如此，我还是坚持 gcc 使用 -L 选项在 GMP 源文件夹中查找库。

我不知道我做错了什么:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T15:35:22.107

您对 a.out 的最终编译不会生成静态链接的 a.out 可执行文件。因此，即使如您所说，在 program.c 编译期间，编译器正在使用您的 GMP 库，但在运行时它会在某处获取共享库。您需要做以下两件事之一：

1.  使用 -Bstatic 编译（或类似的东西；查看编译器的手册页）
2.  设置 LD_LIBRARY_PATH（或类似的东西；检查 'ld' 或 'dyld' 手册页）

我认为＃1实际上是您唯一的选择，因为您只构建了静态版本的 GMP。对于#1，请确保在 program.c 的编译中明确提供 -L/path/to/gmplib

# asp.net - 在 IIS 7.5 上使用 Glimpse 时出现 Http 403

> ID：10294219
> 
> 赞同：0
> 
> 时间：2012-04-24T08:18:53.950
> 
> 标签：asp.net, glimpse

我正在尝试使用 Glimpse（[http://getglimpse.com](http://getglimpse.com)）。它在我的 Cassini 和 IIS 7.5 开发机器上的 Visual Studio 中运行良好

在服务器上（实际上是 NLB 后面的 2 个服务器）我得到了一个 http 403，仅此而已。

我用谷歌搜索并找到了这个答案：[Glimpse.axd 403ing On IIS](https://stackoverflow.com/questions/8843560/glimpse-axd-403ing-on-iis) 但是我没有运气。我按照建议在 web.config 中设置了我的机器的 IpAddress - 尝试了 Ipv4 和 Ipv6。但没有运气。

我也尝试设置

ipForwardingEnabled="真"

因为建议在针对 NLB 后面的一组服务器运行时使用它。

在我摆弄设置的过程中，我了解到 Glimpse 代码似乎确实已加载并运行，例如，我试图将 IpAddress 更改为无效的内容，但不被接受。

所以我的猜测是 Http 403 是因为 Glimpse 无法访问的东西，例如文件系统或其他东西。

可能在我们的服务器设置中。

有人有什么想法或建议吗？

顺便说一句：该网站是 ASP.NET - 不是 MVC，它使用的是 SSL，但我在另一个使用 http 的网站上遇到了同样的错误

问候杰斯珀

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:39:01.187

杰斯珀，

根据您问题中的信息，很难判断出了什么问题。

我建议通过将配置更改为以下内容来打开 Glimpse 登录：

```
<glimpse enabled="true" loggingEnabled="true"> 
```

从那里您将获得一个日志文件，其中提供有关 Glimpse 内部的信息，可以帮助您追踪问题。

# clojure - Clojure，懒惰的评估问题

> ID：10294220
> 
> 赞同：3
> 
> 时间：2012-04-24T08:18:56.680
> 
> 标签：clojure

考虑 clojure 中的以下代码：

(让 [a (find-a), b (find-b)] (println a) (println b) )

其中 b 是一个序列。在函数 find-a 中也有一些 println 语句。我希望在标准输出中看到的是：a，find-a 中 println 语句的结果，b。但是，我得到的是：a，b 的一部分，来自 find-a 中的 println 语句，b 的其余部分。

这是由于对序列的懒惰评估吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T08:31:09.233

这段代码中没有任何东西天生就是惰性的——它都应该以正确的顺序执行。

但是，取决于什么`a`和`b`是否有一些惰性嵌入其中，只有在执行时`(println a)`才会`(println b)`执行。特别是，如果`a`和是用[map](http://clojuredocs.org/clojure_core/clojure.core/map)`b`或类似的东西创建的惰性序列，那么序列的后面部分只有在[println](http://clojuredocs.org/clojure_core/clojure.core/println)语句中强制执行时才会被评估。更具体地说，您需要描述 和 的内部结构。`a``b`

然而，我实际上怀疑问题可能是由于缓冲区没有被刷新 - 请参阅[Clojure - Side Effects Happening Out Of Order](https://stackoverflow.com/questions/388057/clojure-side-effects-happening-out-of-order)

# java - 反向根java

> ID：10294221
> 
> 赞同：0
> 
> 时间：2012-04-24T08:18:57.663
> 
> 标签：java

[这是一个问题集](http://acm.timus.ru/problem.aspx?space=1&num=1001&locale=en)

这是我意识到它有效，但我在 acm.timus.ru 上得到了错误的答案

```
import java.io.PrintWriter;
import java.util.Scanner;

public class SqrtBack{

    public static void main(String[] args){
        Scanner in = new Scanner(System.in);
        int count = 0;
        PrintWriter out = new PrintWriter(System.out);

        long[] arr = new long[131072];
        while(in.hasNextLong()){
            arr[count] = in.nextLong();
            count++;
        }

        for(int i = arr.length-1; i>=0; i--){
            System.out.printf("%.4f%n", (Math.sqrt(arr[i])));

        }
        out.flush();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T08:45:16.210

You are always printing 131072 values even though the input could be fewer... Change your loop to:

```
for(int i = count - 1; i >= 0; i--) ... 
```

*Note: Always try with the sample data when doing problems like this. In this case you would see the problem directly..*

# c# - 在 WCF 中设置环境变量

> ID：10294222
> 
> 赞同：1
> 
> 时间：2012-04-24T08:19:03.847
> 
> 标签：c#, wcf, web-config

我有一个 WCF 应用程序，它有 2 个默认配置，调试和发布。我还添加了两个发布配置文件，测试和实时。在我的代码中，我使用了一个具有如下构造函数的类：

```
public MyClass(string server)
{
    server = server.ToLower();
    switch (server)
    {
        case "live":
            LogonToLive();
            break;
        case "test":
            LogonToTest();
            break;
} 
```

然后我在我的整个应用程序中使用它，如下所示：

```
using(var ax = new MyClass("test"))
{
    // do stuff in my Test Environment
} 
```

我想做的是在我的 web.config 中设置一些变量，这些变量将`MyClass("test")`根据我设置的配置/发布配置文件自动替换为正确的服务器。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:35:19.343

您可以使用[条件编译](http://msdn.microsoft.com/en-us/library/aa691099%28VS.71%29.aspx)的跟踪常量来确定构建配置，并从“配置”类中的属性中提取所需的值，或者其他东西：

```
public static string Server {
  get {
#if DEBUG
    return ConfigurationManager.AppSettings[key0];
#else
    return ConfigurationManager.AppSettings[key1];
#endif
  }
} 
```

我认为确定出版概况是另一回事，可以这么说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:24:35.143

为什么不为服务器名称添加一个应用程序设置并在运行时读取它以找出服务器。

# symfony - Symfony2 中的 Doxygen 和 @ORM 注释实体

> ID：10294225
> 
> 赞同：0
> 
> 时间：2012-04-24T08:19:06.660
> 
> 标签：symfony, doctrine, doxygen

我已经在 Symfony2 框架中实现了实体，这些实体被注释以供 Doctrine 使用。例如：

```
/*
 * class description
 *
 * @ORM\Entity(repositoryClass="Website\ContentBundle\Repository\ContentRepository")
 * @ORM\HasLifecycleCallbacks()
 * @ORM\InheritanceType("SINGLE_TABLE")
 * @ORM\DiscriminatorColumn(name="type", type="string")
 * @ORM\DiscriminatorMap({"article" = "Article"})
 * @ORM\Table(name="content",indexes={@ORM\index(name="id_UNIQUE",columns={"id"})})
 */
 class Content {
    /** 
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    ...
  } 
```

当我在我的源代码上运行 Doxygen 时，文档的可读性不是很好。我试图为每个 @ORM* 符号定义别名；例如“ORM=ORM”、“Entity=Entity”等。但这不起作用。对于上面提到的类 Doxygen 返回

```
...
ORMEntity(repositoryClass="Website\ContentBundle\Repository\ContentRepository") ORM() ORM("SINGLE_TABLE") ORM(name="type", type="string") ORM({"article" = "Article", "picture_series" = "PictureSeries", "event" = "Event", "invitation" = "Invitation"}) ORMTable(name="content",indexes={ORM(name="id_UNIQUE",columns={"id"})}) 
```

关于方法

```
/**
* sets the given id 
* 
* @param number $id
* @return \Website\ContentBundle\Entity\Content
*/
public function setId($id) {
    $this->id = $id;
    return $this; // fluent interface
} 
```

Doxygen 创造

```
setId ($ id)    
   sets the given id

Parameters:
    number  $id 

Returns: 
```

为什么在“返回：”之后不显示 \Website\ContentBundle\Entity\Content？

也许有人可以给我一个关于如何配置 Doxygen 的提示或链接，以便它可以适当地处理 @ORM 注释。

提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:27:44.163

关于问题

> 为什么`\Website\ContentBundle\Entity\Content`后面不显示`Returns:`？

这可能是因为 doxygen 命令以 a 开头`\`，doxygen 是否认为您正在调用一些它无法识别的命令，因此可能会从文档中删除并且什么也不做。

您尝试使用`ALIASES`配置文件选项是正确的。但是，不要定义`ORM=ORM`尝试使用`ORM=\@ORM`. 通过定义以下别名，我得到了 doxygen 记录的示例源代码，没有任何警告：

```
ALIASES  = "ORM=\@ORM"  
ALIASES += "Entity=\\Entity"  
ALIASES += "InheritanceType=\\InheritanceType"  
ALIASES += "DiscriminatorColumn=\\DiscriminatorColumn"  
ALIASES += "DiscriminatorMap=\\DiscriminatorMap"  
ALIASES += "Table=\\Table"  
ALIASES += "Id=\\Id"  
ALIASES += "Column=\\Column"  
ALIASES += "GeneratedValue=\\GeneratedValue"  
ALIASES += "index=\\index"  
ALIASES += "HasLifecycleCallbacks=\\HasLifecycleCallbacks"  
ALIASES += "Repository=\\Repository"  
ALIASES += "ContentRepository=\\ContentRepository"  
ALIASES += "ContentBundle=\\ContentBundle"  
ALIASES += "Website=\\Website"  
ALIASES += "Content=\\Content" 
```

这里[`\\`](http://www.doxygen.nl/manual/commands.html#cmdbackslash)，[`\@`](http://www.doxygen.nl/manual/commands.html#cmdat)实际上是分别用于打印反斜杠`\`和`@`字符的 doxygen 命令。

但是请注意，这些`@ORM...`指令都将出现在同一行。我不确定如何避免这种情况（*更新*：请参阅下面的编辑）。还有其他人有什么想法吗？

最后，作为旁注，您的文档`$id`应该是

```
* @param $id number 
```

`$id`注意和的顺序`number`。请参阅[`\param`](http://www.doxygen.nl/manual/commands.html#cmdparam).

**编辑**：这样做的另一种方法是将教义相关部分包装在[`\verbatim`](http://www.doxygen.nl/manual/commands.html#cmdverbatim)和`\endverbatim`标签中。这将保留您的类描述中的换行符，这将更具可读性。

# c# - 是否存在允许 XML 注释中的图标/图形的 IntelliSense 加载项？

> ID：10294228
> 
> 赞同：3
> 
> 时间：2012-04-24T08:19:43.613
> 
> 标签：c#, visual-studio-2010, intellisense

[正如 Brandon Walkin 所提议](http://www.brandonwalkin.com/blog/2010/06/03/xcode-ui-improvements/)的（对于 Xcode，但同样的事情），IDE 中的更多可视化可以帮助提高生产力。特别是，我想提供一些小图标来更好地传达枚举选项或类（例如 UI 控件）的含义，大致如下：

![](../Images/101bca57c85f831032f4cec27c230f01.png)

内置的 XML 注释语法显然不支持这一点，但也许有人编写了一个插件来添加对例如`<img>`标签的支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T19:20:04.177

伙计，我喜欢 Visual Studio 库，因为它包含的所有好东西。

从来没有见过像你在那里建议的东西，但是已经看到了将这种内容添加到评论中的插件。这是我现在可以在其中找到的一个（[http://visualstudiogallery.msdn.microsoft.com/e216ec81-730b-4022-8305-25c39eb1f820](http://visualstudiogallery.msdn.microsoft.com/e216ec81-730b-4022-8305-25c39eb1f820)），但我清楚地记得曾经有一个允许您链接到一个图像文件（从 visio 或类似文件中导出），它会内联显示它。我现在找不到它了:-(

你可能想看看这个，它很接近，但不是很赚钱[http://visualstudiogallery.msdn.microsoft.com/c3eaa4fc-f2de-43ad-92ee-f0f257b79005](http://visualstudiogallery.msdn.microsoft.com/c3eaa4fc-f2de-43ad-92ee-f0f257b79005)。源代码可在此处获得：[http ://csharptellisense.codeplex.com/](http://csharpintellisense.codeplex.com/)

实际上，我要感谢您将我的注意力吸引回那个神话般的善良宝库。

# c# - 比较和交换有什么用？

> ID：10294229
> 
> 赞同：14
> 
> 时间：2012-04-24T08:19:49.143
> 
> 标签：c#, c, assembly, thread-safety, compare-and-swap

我最近在阅读有关[比较和交换](http://en.wikipedia.org/wiki/Compare-and-swap)原子操作（CMPXCHG、.NET 的 Interlocked.CompareExchange 等）的信息。

我了解它在内部是如何工作的，以及它是如何从客户那里使用的。

我不太清楚的是什么时候有人会使用 CAS？

维基百科说：

> CAS 用于实现同步原语，如信号量和互斥锁，以及更复杂的无锁和无等待算法。

那么，谁能给我一个更通用的真实世界用例，其中包含 CAS 使用的代码和描述？

这个问题与语言无关，因此任何语言都可以（首选基于 C 或 x86 汇编）。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T20:00:31.737

通过示例很容易看出这一点。假设我们想在共享变量上原子地同时设置一些位：

```
int shared = 0;

void Set(int index) {
 while (true) {
  if (Interlocked.CompareExchange<int>(ref shared, shared | (1 << index), shared) == shared)
   break; //success
 }
} 
```

如果我们看到“旧值”（即返回值）在此期间发生了变化，我们就会检测到失败。

如果这没有发生，我们就没有并发修改，所以我们自己的修改成功完成。

你可以使用这种技术实现相当复杂的东西。但是，越复杂，通过旋转造成的性能损失就越大。

我想强调 CAS 的一个关键特性是它可以失败并且可以可靠地检测到失败。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T22:03:11.917

您使用 CAS 在一个线程或进程中原子地设置一个值（一个位或一个字），同时测试另一个线程/进程尚未这样做。所以它用于在多线程环境中*获取标志或计数器。*

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-10-11T17:33:58.997

> 那么，谁能给我一个更通用的真实世界用例，其中包含 CAS 使用的代码和描述？

[本文](https://www.cs.rochester.edu/%7Escott/papers/1996_PODC_queues.pdf)使用 CAS 实现了一个无锁的线程安全队列。

它有一些伪代码示例。

# java - 如何在 Java 中加载 DICOM 图像？

> ID：10294231
> 
> 赞同：2
> 
> 时间：2012-04-24T08:19:54.010
> 
> 标签：java, image, dicom

我正在开发我的应用程序以在netbeans平台java中加载图像并保存dicom图像我想使用Jfilechooser仅加载dicom图像，我开发了应用程序但无法仅加载Dicom图像所以加载dicomimage应该是什么问题，是否有任何插件想念它吗？必须为它上传哪些 jar 文件....？请提前与我分享您的意见。在这里我添加了我在 javaapps 中开发的代码...

```
package opner;

import com.sun.media.jai.widget.DisplayJAI;
import java.awt.*;
import java.awt.event.*;
import java.util.Properties;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import java.util.Properties;
import java.io.*;
import java.net.*;

import java.awt.BorderLayout; 
import java.io.*; 
import javax.imageio.*; 
import java.awt.image.RenderedImage; 
import java.awt.image.renderable.ParameterBlock; 
import java.util.Iterator; 
import javax.imageio.stream.FileImageInputStream; 
import javax.imageio.stream.FileImageOutputStream; 
import javax.media.jai.*; 
import javax.swing.*; 

public class Opner
{
    public static void main(String args[])
    { 
        RenderedImage image = null;     
        RenderedOp result = null;   
        try
        {       
            FileImageInputStream stream = new FileImageInputStream(new File("E:/MAGIX/demo1.dcm")); 
            Iterator iter =ImageIO.getImageReaders(stream); 
            ImageReader reader = (ImageReader)iter.next(); 
            reader.setInput(stream); 

            image = reader.readAsRenderedImage(0,reader.getDefaultReadParam()); 

            double scaleFactor = 0.5; 
            ParameterBlock params = new ParameterBlock(); 
            params.addSource(image); 
            params.add(scaleFactor); 
            //x scale factor 
            params.add(scaleFactor); 
            //y scale factor 
            result = JAI.create("SubsampleAverage", params); 

            Iterator writerIter =ImageIO.getImageWritersByFormatName("dcm"); 
            ImageWriter writer = (ImageWriter)writerIter.next(); 
            FileImageOutputStream os = new FileImageOutputStream(new File("E:/MAGIX/demo1.dcm")); 
            writer.setOutput(os); 
            writer.write(result); 
        }
        catch(IOException e)
        {
            e.printStackTrace();
        } 

        DisplayJAI d = new DisplayJAI(); 
        d.set(result); 
        JScrollPane jsp = new JScrollPane(); 
        jsp.setViewportView(d); 
        JFrame f = new JFrame(); 
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
        f.setLayout(new BorderLayout()); 
        f.add(jsp, BorderLayout.CENTER); 
        f.pack(); 
        f.setVisible(true); 
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:21:56.870

看看[imagej](http://rsbweb.nih.gov/ij/)，它是开源的，并且有用于 dicom 序列和目录的插件。

# jquery-ui - jQuery UI datepicker：如何将下拉列表中的月份名称从短名称更改为长名称？

> ID：10294232
> 
> 赞同：18
> 
> 时间：2012-04-24T08:19:59.877
> 
> 标签：jquery-ui, datepicker, jquery-ui-datepicker

我需要在我的 jQuery UI 日期选择器**中将月份名称从短名称更改为长名称。**

我的属性是：

```
$.datepicker.regional['de'] = {
    prevText: '&#x3c;zur&uuml;ck',
    nextText: 'vor&#x3e;',
    monthNames: ['Januar', 'Februar', 'M&auml;rz', 'April', 'Mai', 'Juni',
            'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember'],
    monthNamesShort: ['Jan', 'Feb', 'M&auml;r', 'Apr', 'Mai', 'Jun',
            'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Dez'],
    dayNames: ['Sonntag', 'Montag', 'Dienstag', 'Mittwoch', 'Donnerstag', 'Freitag', 'Samstag'],
    dayNamesShort: ['So', 'Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa'],
    dayNamesMin: ['So', 'Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa'],
    weekHeader: 'Wo',
    dateFormat: 'dd.mm.yy',
    firstDay: 1,
    changeMonth: true,
    changeYear: true,
    yearRange: "-0:+2",
    isRTL: false,
    showMonthAfterYear: false,
    minDate: 0
 };

$.datepicker.setDefaults($.datepicker.regional['de']);
var dates = $("#von, #bis").datepicker({
    showOn: "button",
    buttonImage: "calendar.png",
    buttonImageOnly: true,
    buttonText: 'Datum w\u00E4hlen',
    onSelect: function (selectedDate) {
        var option = this.id == "#von" ? "minDate" : "maxDate",
                instance = $(this).data("datepicker"),
                date = $.datepicker.parseDate(
                    instance.settings.dateFormat ||
                    $.datepicker._defaults.dateFormat,
                    selectedDate, instance.settings);
        dates.not(this).datepicker("option", option, date);
    }
}); 
```

目前，日历仅在下拉列表中显示短月份名称，如“Apr”而不是“April”。

也许我正在用一些代码覆盖默认的长名称？

请帮忙。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-06-12T20:27:16.353

使用该属性`monthNamesShort`并将其命名为您想要的名称。

就我而言，我想在月份下拉列表中显示月份名称，用葡萄牙语：

```
monthNamesShort: [ "Janeiro", "Fevereiro", "Março", "Abril",
                   "Maio", "Junho", "Julho", "Agosto", "Setembro",
                   "Outubro", "Novembro", "Dezembro" ] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T14:00:11.493

目前是不可能的。有关详细信息，请参阅[https://github.com/jquery/jquery-ui/pull/590](https://github.com/jquery/jquery-ui/pull/590)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-22T16:32:02.623

在许多地方，他们使用 dateFormat 来确定使用哪个列表。不幸的是，在这段代码中，他们并不一致使用它。我进行了调整以遵循他们在 _generateMonthYearHeader 中的方法（在第 8985 行附近）：

代替

```
 monthNamesShort[ month ] 
```

和

```
 (inst.settings.dateFormat.match(/MM/) ? monthNames : monthNamesShort)[ month ] 
```

# c# - 如何在 c# 中裁剪具有指定颜色的对象？

> ID：10294242
> 
> 赞同：-3
> 
> 时间：2012-04-24T08:20:57.117
> 
> 标签：c#, image, image-processing, crop

我需要 c# 中的代码，它可以提取指定的颜色（例如红色）然后剪辑包含该颜色的对象？这意味着搜索红色对象然后对其进行裁剪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:28:46.133

您正在寻找的代码并不像我认为的那么简单。图像中的对象检测很困难，因为除了检测颜色之外，您还需要确定边缘的算法。

我会考虑使用 3rd 方库，而不是自己重写它。或者您可以使用该库来检测图像中的对象，然后查找您想要的颜色。

我从来不需要在 .Net 中进行这种级别的图像处理，但这里有几个我在一些快速的谷歌和 SO 搜索中找到的例子。看看有没有适合您的需求。

[锻造网](http://www.aforgenet.com/)

[过滤器](http://filters.sourceforge.net/)

# php - 阻止 TOR 服务器

> ID：10294244
> 
> 赞同：4
> 
> 时间：2012-04-24T08:21:11.383
> 
> 标签：php, apache, module, centos, tor

我需要一个阻止的脚本`TOR servers`......`php`我需要获取服务器列表并阻止它们。

或者，安装在服务器（centos）上的任何解决方案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-17T11:09:01.430

这是有关 TorDNSEL [https://www.torproject.org/projects/tordnsel.html.en](https://www.torproject.org/projects/tordnsel.html.en) 以及如何构造查询的更多信息。

下面是我在网上找到的可以执行动态检查的功能。

（[https://check.torproject.org/](https://check.torproject.org/)必须使用与此类似的内容）。

我不确定在较重的流量下的性能。

```
function IsTorExitPoint(){
if (gethostbyname(ReverseIPOctets($_SERVER['REMOTE_ADDR']).".".$_SERVER['SERVER_PORT'].".".ReverseIPOctets($_SERVER['SERVER_ADDR']).".ip-port.exitlist.torproject.org")=="127.0.0.2") {
return true;
} else {
return false;
} 
}
function ReverseIPOctets($inputip){
$ipoc = explode(".",$inputip);
return $ipoc[3].".".$ipoc[2].".".$ipoc[1].".".$ipoc[0];
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-24T08:23:09.420

您需要检查用户的 ip 是否在 TOR 出口节点 DNSBL 中。使用静态退出节点列表不是一个好主意，因为节点会不时出现/消失，您可能不想定期更新列表。

存在各种黑名单，[EFNET RBL](http://efnetrbl.org/)就是其中之一。请注意，它还解决了在某些情况下可能被认为不受欢迎的一些其他 IP - 如果您只希望 TOR 确保忽略这些其他结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-18T02:45:18.600

如果它需要阻止 TOR 用户 id，请按照以下方法：

```
ipset -N tor iphash 
```

获取可以访问的 Tor 出口节点列表`$YOUR_IP`，跳过注释并逐行阅读

```
wget 

ipset -q -A tor $IP

done 
```

在 itables 过滤器中过滤我们的新集合

```
iptables -A INPUT -m set --match-set tor src -j DROP. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-07T07:21:29.280

[这里](https://github.com/RD17/DeTor)( [https://github.com/RD17/DeTor](https://github.com/RD17/DeTor) ) 是一个简单的 REST API，用于确定请求是否来自 TOR 网络。我认为从 PHP 中使用它会非常简单

请求是： `curl -X GET http://detor.ambar.cloud/`。

回应是 `{ "sourceIp": "104.200.20.46", "destIp": "89.207.89.82", "destPort": "8080", "found": true }`

作为奖励，您可以向您的网站添加徽章以检测用户是否来自 TOR：

`<img src='http://detor.ambar.cloud/badge' />`

# powershell - Powershell中私有函数的缩进输出

> ID：10294246
> 
> 赞同：1
> 
> 时间：2012-04-24T08:21:28.363
> 
> 标签：powershell, indentation

我有一堆我调用的函数，它们产生显示到控制台的输出。函数可能如下所示：

```
exec { & .\xunit.console.clr4 tests.xunit }

#or

exec { & .\nuget.exe pack $source_dir\ZocMonLib\NuSpec\ZocMon.nuspec -OutputDirectory $build_dir\local -Symbols -Version $version } 
```

现在我知道我可以做类似[powershell 缩进](https://stackoverflow.com/questions/6532324/powershell-indentation)之类的事情，但这只有在我控制输出时才有效。

如何为这些私有函数缩进输出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T04:38:09.970

好的，我写了一个可以正确换行的版本。但这有点复杂。我把它贴在 PoshCode [http://poshcode.org/3386](http://poshcode.org/3386)

这应该适用于 Write-Host 或 Write-Verbose，但如果这些函数实际上是在输出对象，它就*不起作用*——您必须通过管道传输到 Write-Host。

PoshCode 上的函数将（可选）根据堆栈深度自动缩进，但也允许您指定`-Pad 5`或手动缩进，因此您可以调用`nuget.exe ... | write-host -pad 5`或粘贴`| Write-Host`在任何需要的地方，然后设置`$WriteVerboseAutoIndent = $true`...

希望有所帮助——它确实对 exe 的输出进行了手动换行，所以它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T15:30:09.220

没有一个很好的解决方案，因为 PowerShell 并不总是在控制台窗口中运行。其他托管应用程序可能支持也可能不支持制表符，甚至可能不支持 Write-Host。如果您的目标是严格支持控制台显示，请考虑编写“Format-Console”函数。

```
nuget list NuGetPowerTools | Format-Console 
```

在该函数中，您可以捕获管道输入（我假设它是字符串，因为这是一个外部命令）。每行输出都是一个字符串对象，所以......

```
Write-Host "    $x" 
```

将显示缩进四个空格。

```
function Format-Console {
    [CmdletBinding()]
    param([Parameter(ValueFromPipeline=$True)][string[]]$inputObject)
    PROCESS { Write-Host "    $inputObject" }
} 
```

这有点快速和肮脏，但假设你只用管道连接它，它会起作用。将其构建为函数可以使其更可重用；使用 Format- 动词会提示其他用户 this 的输出不是可消费的。从技术上讲，它不是真正的“格式”cmdlet，因为它不输出内部格式化指令，但它与

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T09:19:45.963

您不能将私有函数的结果分配给一个字符串并“制表”该字符串吗？

```
$x = nuget list NuGetPowerTools
Write-Host "`t`t$x" 
```

# android - 在 android 中的单个 Activity 上加载 2 个 Web 视图

> ID：10294248
> 
> 赞同：0
> 
> 时间：2012-04-24T08:21:34.347
> 
> 标签：android, webview, thread-safety, viewroot

我有以下代码，它将根据请求加载两个不同的 Web 视图。

```
public class MultipleWebViewHanlder {  
public MultipleWebViewHanlder(Context context) {   
        // TODO Auto-generated constructor stub  
        this.context = context;  
            }  

public void MultipleWebViewfun(final String str) {

final RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.FILL_PARENT, RelativeLayout.LayoutParams.FILL_PARENT);  

            final WebView mWebView = new WebView(context);  

            WebSettings settings=mWebView.getSettings(); 
            settings.setJavaScriptEnabled(true);  
            settings.setDatabaseEnabled(true);  
            settings.setDomStorageEnabled(true);  
            settings.setAllowFileAccess(true);  

            settings.setBuiltInZoomControls(true);  
            mWebView.setWebChromeClient(new WebChromeClient());  

             JSInterface.handler.post(new Runnable() {  

                @Override  
                public void run() {  
                    try {  

                        ((Activity)context).addContentView(mWebView, params);  
                                            mWebView.loadUrl(((Activity)context).getResources().getString(R.string.DemoURL));  

                                        } catch (Exception e) {  
                         // TODO Auto-generated catch block  
                         e.printStackTrace();  
                   }
public class HybridActivity extends Activity {  
     public void onCreate(Bundle savedInstanceState) {  
            super.onCreate(savedInstanceState);  
            WebView webview = new WebView(this);  
            webview.getSettings().setJavaScriptEnabled(true);  
  webview.loadUrl("file:///android_asset/www/html/hyb.html");  
            setContentView(webview);  

        MultipleWebViewHanlder webView2 = new MultipleWebViewHanlder (this);
        webView2.MultipleWebViewfun(); 
```

我得到以下异常：

WebView 核心线程异常：

```
android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views. 
```

我的日志：

```
04-24 15:32:08.764: WARN/dalvikvm(13212): threadid=8: thread exiting with uncaught exception (group=0x4001d7d0)  
04-24 15:32:08.768: ERROR/AndroidRuntime(13212): FATAL EXCEPTION: WebViewCoreThread  
04-24 15:32:08.768: ERROR/AndroidRuntime(13212): android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.  
04-24 15:32:08.768: ERROR/AndroidRuntime(13212):     at android.view.ViewRoot.checkThread(ViewRoot.java:2826)  
04-24 15:32:08.768: ERROR/AndroidRuntime(13212):     at android.view.ViewRoot.invalidateChild(ViewRoot.java:616)  
04-24 15:32:08.768: ERROR/AndroidRuntime(13212):     at android.view.ViewRoot.invalidateChildInParent(ViewRoot.java:642)  
04-24 15:32:08.768: ERROR/AndroidRuntime(13212):     at android.view.ViewGroup.invalidateChild(ViewGroup.java:2505)  
04-24 15:32:08.768: ERROR/AndroidRuntime(13212):     at android.view.View.invalidate(View.java:5115)  
04-24 15:32:08.768: ERROR/AndroidRuntime(13212):     at android.webkit.WebView.viewInvalidate(WebView.java:2616)  
04-24 15:32:08.768: ERROR/AndroidRuntime(13212):     at android.webkit.WebView.invalidateContentRect(WebView.java:2635)  
04-24 15:32:08.768: ERROR/AndroidRuntime(13212):     at android.webkit.WebView.access$6400(WebView.java:300)  
04-24 15:32:08.768: ERROR/AndroidRuntime(13212):     at android.webkit.WebView$PrivateHandler.handleMessage(WebView.java:8072)  
04-24 15:32:08.768: ERROR/AndroidRuntime(13212):     at android.os.Handler.dispatchMessage(Handler.java:99)  
04-24 15:32:08.768: ERROR/AndroidRuntime(13212):     at android.os.Looper.loop(Looper.java:123)  
04-24 15:32:08.768: ERROR/AndroidRuntime(13212):     at android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:691)  
04-24 15:32:08.768: ERROR/AndroidRuntime(13212):     at java.lang.Thread.run(Thread.java:1096)  
04-24 15:32:08.772: WARN/ActivityManager(2490):   Force finishing activity com.Hy5/.activity.Hy5CanvasActivity 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:28:42.023

也许如果你把这段代码放在里面：

```
runOnUiThread(new Runnable() {
    public void run() {
        //stuff that updates ui
    }
}); 
```

它会起作用的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-13T17:18:47.080

请参阅：[Android“只有创建视图层次结构的原始线程才能接触其视图。”](https://stackoverflow.com/questions/5161951/android-only-the-original-thread-that-created-a-view-hierarchy-can-touch-its-vi)

您的问题源于这里：

```
JSInterface.handler.post(new Runnable() { 
    public void run() {  
           try {  
               ((Activity)context).addContentView(mWebView, params); 
               ... 
```

您正在尝试将 webView 添加到主线程之外的上下文中。您应该能够将 UI 逻辑嵌套在代码块中`Activity.runOnUiThread`

# iphone - 如何将附件添加到uibutton

> ID：10294259
> 
> 赞同：1
> 
> 时间：2012-04-24T08:22:51.840
> 
> 标签：iphone, uibutton, uitableview

我正在为 iOS 5 制作 iPhone 应用程序，我希望将 UITableViewCellAccessoryDisclosureIndicator 附件添加到 UIButton。我知道我可以剪下一个图像并将其添加到 UIButton 但我想将该技术用作最后的手段。我认为必须有一种方法可以向 UIButton 添加附件，因为需要在按钮上添加很多附件。我相信 Apple 不会鼓励我们添加图片，因为这听起来很粗糙。然后我可能又错了。我要问的可能吗？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:36:54.970

选择 Button 类型为 DetailDisClosure..

以编程方式

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeDetailDisclosure]; 
```

//或者

**>>编辑..**

**使用 XIB**

![在此处输入图像描述](../Images/d76d5c193caabcb84097df9832761922.png)

希望对你有帮助..

# backbone.js - 主干维持状态

> ID：10294261
> 
> 赞同：1
> 
> 时间：2012-04-24T08:23:03.327
> 
> 标签：backbone.js, state, singlepage

我正在使用 Backbone.js 开发一个 JavaScript 重型单页应用程序。目标如下；

*   用户从一组多选框开始，其中填充了过滤器元素以查询一组资源。这些多选框相互依赖。此外，多选中的元素是从服务器查询的，并且依赖于登录的用户，换句话说，它们依赖于与登录的用户关联的资源。

*   用户填写多选框并按下“过滤器”按钮。当按下它时，将获取一个集合，从而使用一组查询参数（多个数组值）来获取反映过滤器元素的集合。

*   获取集合时，将显示包含资源的视图。这个视图有多个子视图，并且必须可以在保持状态的同时向下钻取特定资源（作为查询参数的结果获取的集合）

在这样的用例中，如何在 Backbone 应用程序中维护状态？我浏览了许多示例，但所有示例都很简单有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:50:46.133

我是backbone.js 的新手，正在尝试使用Backbone.js 开发一个单页应用程序。在我对backbone.js 文档的有限理解中，我没有遇到使用backbone.js 核心维护状态的更好方法。但是，在过去，我使用过 jStorage： http: [//www.jstorage.info/](http://www.jstorage.info/)，这是一个简单的 Prototype、MooTools 和 jQuery 包装插件，用于在浏览器端缓存数据（字符串、数字、对象，甚至 XML 节点） . 集成和入门很简单。在我的应用程序中，我将暂时使用它...我认为这可以共享...因此当我遇到这个问题时我在这里提到它...我希望这会有所帮助

# php - PHP - array_search() 在 === true 上失败，但在 !== false 上失败？

> ID：10294265
> 
> 赞同：1
> 
> 时间：2012-04-24T08:23:28.210
> 
> 标签：php, arrays

当我想检查数组中是否有东西并取回密钥时，我使用[array_search()](http://php.net/manual/en/function.array-search.php)函数。

为什么当我比较函数完全等于 true (=== true) 时它返回 false，而当我比较它不完全等于 false (!== false) 时它返回 true？

```
<?php
    if(array_search($value, $array) === true)
    {
        // Fails
    }

    if(array_search($value, $array) !== false)
    {
        // Succeeds
    }
?> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T08:24:53.917

[找到匹配项时， array_search 会](http://php.net/manual/en/function.array-search.php)返回针。仅当未找到匹配项时才返回 false。这就是为什么只有相反的情况适用于您的情况。

> 如果在数组中找到 needle 的键，则返回它，否则返回 FALSE。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-30T15:13:12.233

聚会迟到了，但想添加一些上下文/示例：

[array_search](http://php.net/manual/en/function.array-search.php)将返回**键**（如果找到值） - 可能是`0`-`FALSE`如果*未找到*值将返回。它**永远不会**回来`TRUE`。

这段代码可能会更好地总结：

```
// test array...
$array = [
    0   => 'First Item',
    1   => 'Second Item',
    'x' => 'Associative Item'
];

// example results:
$key = array_search( 'First Item', $array );       // returns 0
$key = array_search( 'Second Item', $array );      // returns 1
$key = array_search( 'Associative Item', $array ); // returns 'x'
$key = array_search( 'Third Item', $array );       // returns FALSE 
```

由于`0`是一个错误的值，你不会想要做类似的事情`if ( ! array_search(...) ) {`... 因为它会在`0`索引项上失败。

因此，使用它的方式是这样的：

```
$key = array_search( 'Third Item', $array ); // returns FALSE
if ( FALSE !== $key ) {
    // item was found, key is in $index, do something here...
} 
```

值得一提的是[strpos](http://php.net/manual/en/function.strpos.php)和[stripos](http://php.net/manual/en/function.stripos.php)等函数也是如此，因此这是养成遵循习惯的好模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T08:25:18.683

[`array_search()`](http://php.net/manual/en/function.array-search.php)不返回真。

If 只会返回**false**，如果它找不到任何东西，否则它将返回匹配元素的键。

*根据[说明书](http://php.net/manual/en/function.array-search.php)*

> array_search — 在数组中搜索给定的值，如果成功则返回相应的键 ....
> 
> 如果在数组中找到 needle 的键，则返回它，否则返回 FALSE。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T08:25:51.530

它将失败，因为如果调用成功，它会返回密钥 no true。

如果没有找到则返回 false 所以 === false 是可以的

从手册：

> 如果在数组中找到 needle 的键，则返回它，否则返回 FALSE。

# excel - 取消隐藏 Excel 应用程序会话

> ID：10294268
> 
> 赞同：8
> 
> 时间：2012-04-24T08:23:40.323
> 
> 标签：excel, vba, show, hidden

我有一个运行的 Excel VBA 方法（我没有写），它做的第一件事就是隐藏 Excel 会话`Application.Visible = False`。

但是，当该方法完成时，它不会取消隐藏 Excel 会话，因此它保持打开状态并在任务管理器中列出，但被隐藏并且似乎无法使用。

有谁知道，如果没有打开 VBE（因此可以访问即时窗口并运行`Application.Visible = True`），如何取消隐藏这个 Excel 会话？目前，我只需要使用任务管理器终止会话。

这不是什么大不了的事，但如果有人知道如何恢复这样的会话，我只是感兴趣。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-24T09:02:04.490

> 就像我说的那样，这没什么大不了的，但如果有人知道快捷键或任何可以将其带回来的东西，我只是感兴趣。

我知道没有捷径，但你可以这样做。

打开 MS Word 并将此代码粘贴到 VBA 编辑器中。关闭所有可见的 Excel 打开实例，然后运行此代码。这将使隐藏的实例可见。如果有更多实例，请手动关闭实例并重复该过程。

```
Option Explicit

Sub Sample()
    Dim oXLApp As Object

    '~~> Get an existing instance of an EXCEL application object
    On Error Resume Next
    Set oXLApp = GetObject(, "Excel.Application")
    On Error GoTo 0

    oXLApp.Visible = True

    Set oXLApp = Nothing
End Sub 
```

我不是故意使用循环，因为隐藏的实例可以有一个您可能想要保存的工作簿？

如果您愿意，可以将上述代码转换为可以直接从桌面运行的 VB 脚本文档。

> 不幸的是，我无法控制进行所需的更改。

你到底是什么意思？VBA 密码是否受保护？如果不是，那么我的建议仍然与之前相同

> 这是一个糟糕的编程案例。即使我们提供关闭所有隐藏 Excel 实例的代码，也无济于事。因为下次运行该宏时，您将再次面临同样的问题。为什么不编辑现有代码并在最后添加 Application.Visible = True ？VBA 密码是否受保护？– Siddharth Rout 28 分钟前

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-29T03:50:17.390

[一个很好的解决方案](https://www.excelforum.com/excel-programming-vba-macros/735746-cant-edit-userform-after-using-application-visible.html)！

打开 Word，假设你有它，并在那里打开 VBA 编辑器，然后打开即时窗口 (Ctrl+G) 并键入：

`Getobject(, "Excel.Application").Visible = true`

然后按回车。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T08:36:22.670

我有一个类似的问题，并通过代码行重新排序解决了它。

寻找这样的行，这`ActiveWorkbook.Close`可能是您无法取消隐藏会话的原因。

如果你能找到它，就放在`Application.Visible = True`它前面，瞧。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-06T10:44:46.757

作为代码：

```
sub runthis()
    dim xl as object
    set xl = new excel.application 'create session
    xl.workbooks.open filename:= "«yourpath»" 'open wb in the new session
    xl.visible=true 'this is what you need, show it up!
    'rest of the code
end sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-16T07:17:39.727

根本不需要word宏。

打开另一个 Excel 工作簿。

按 Ctrl+F11 进入 VBA 编辑器，在那里你会看到左侧正在运行但隐藏的 excel 文件。在隐藏应用程序文件的代码中搜索 Application.Visible = False 并将其注释掉。保存并重新启动文件。或者，如果您在即时窗口 (Ctrl+G) 中键入 Application.Visible = True，您可以在不关闭的情况下取回应用程序以显示

# facebook - Facebook 将 API 上传的相册中的图片捆绑在一起的时间间隔是多少？

> ID：10294269
> 
> 赞同：1
> 
> 时间：2012-04-24T08:23:41.103
> 
> 标签：facebook, api, upload, photo

如果您通过 API 将图片上传到主页，Facebook 会将这些图片放入相册中。如果应用程序的相册尚不存在，则会创建一个。

现在，当我们在一分钟内上传一张图片和另一张图片时，Facebook 在创建关于它的状态更新时会捆绑这些图片。但是，我们希望上传的每张图片都有自己的状态更新，以便也可以看到用图片写的文字。

有时它会起作用，但大多数时候 Facebook 会继续捆绑。我想这与时间间隔有关，但那个时间间隔是多少？他怎么能防止这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:34:24.027

这可能对您有用，也可能不适用，但这对我有用。

1.  添加照片，确保它们在“只有我”而不是“朋友”下
2.  当您一次添加一个时，请单击下面的小时钟。
3.  确保在每张照片上添加年、月和日期。
4.  是的，它可以是同一日期。
5.  在您添加的每张照片上写下描述。
6.  返回您的主页并确保它们没有捆绑在一起。
7.  现在您可以单击“仅限我”按钮，使其对“朋友”可见

让我知道它是否对您有用。

# jquery - JQuery Validate Plugin - 对自定义方法的渴望验证何时应该是惰性的

> ID：10294270
> 
> 赞同：3
> 
> 时间：2012-04-24T08:23:53.303
> 
> 标签：jquery, jquery-validate

validate 插件似乎急切地验证我拥有的自定义方法，当它应该是惰性的时，所有其他验证都是惰性发生的（即直到提交表单之前）。

自定义方法：

```
$.validator.addMethod("refDataAcInput", function(value, element)
{
    return ($(element).val() == "" || $(element).data("hasValidSelectedValue") != null);
}, "The item must be a valid selected item."); 
```

验证插件初始化：

```
this.$form.validate({
    ignore: null,
    invalidHandler : function()
    {
        _self.initUnsavedChangesWarning.ignorePageLeaveReq = false;
        _self.setValidationMsgVisible(true);

        $("body,html").scrollTop($("#cmFormErrorReport").position().top);
    },
    submitHandler :function(form)
    {
        //Disable form submit button - prevent duplicate request for impatient users
        $("button[type=submit]", form).prop("disabled", true);
        form.submit();
    },
    showErrors : function(errorMap, errorList)
    {
        _self.updateErrors(errorList);
        this.defaultShowErrors();
    },
    errorPlacement : function(error, $element)
    {
        $element.parents("tr").children(".fieldError").append(error);
    },
    errorClass : "jqueryError"
}); 
```

任何想法如何使这种情况懒惰地发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-13T16:04:50.067

问题是您已将`required`规则构建到自定义方法中。

```
$.validator.addMethod("refDataAcInput", function(value, element) {
    return ($(element).val() == "" || $(element).data("hasValidSelectedValue") != null);
}, "The item must be a valid selected item."); 
```

删除`$(element).val() == ""`并替换为`this.optional(element)`...

```
$.validator.addMethod("refDataAcInput", function(value, element) {
    return (this.optional(element) || $(element).data("hasValidSelectedValue") != null);
}, "The item must be a valid selected item."); 
```

然后，如果您还希望该字段为`required`，只需声明该`required`规则以及您的自定义`refDataAcInput`规则。

插件的默认“惰性”验证现在应该可以按预期工作了。

# android - 将远程 Android 服务导出为 jar

> ID：10294271
> 
> 赞同：0
> 
> 时间：2012-04-24T08:23:57.477
> 
> 标签：android, android-service

我不知道我做的对不对。
我创建了一个导入 android.jar 库文件的服务。然后创建了我自己的那个服务的jar。
现在，当我在任何其他 android 项目中包含这个 jar 文件时，在清单中添加它的条目，开始它

```
startService(新意图(getApplicationContext(),MyService.class));
```

什么都没有发生。它没有启动，也没有错误/警告：s
我想要实现的是：创建我的服务库，我可以轻松地在我的许多其他应用程序中使用它或将其分发给其他供应商以嵌入他们的应用程序很容易。告诉我是否做得对或建议任何其他方式。
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:33:07.480

您仍然需要将该服务添加到应用程序的清单中。

[http://developer.android.com/guide/topics/manifest/service-element.html](http://developer.android.com/guide/topics/manifest/service-element.html)

```
<service android:enabled=["true" | "false"]
     android:exported=["true" | "false"]
     android:icon="drawable resource"
     android:label="string resource"
     android:name="com.package.name.services.MyService" >
. . .
</service> 
```

如果在 lib 项目或 jar 中，我会尝试/推荐完整的包名

希望有帮助。

# haskell - 对作为haskell中Functor实例的函数感到困惑

> ID：10294272
> 
> 赞同：25
> 
> 时间：2012-04-24T08:24:06.537
> 
> 标签：haskell, functor

Functor 中 fmap 的类型是：

```
fmap :: Functor f => (a -> b) -> f a -> f b 
```

看起来，首先将函数（a -> b）应用于fa的参数以创建b类型的结果，然后将f应用于它，结果为fb

使用`Maybe a`例如：

```
 fmap show (Just 1)
 result is : Just "1" 
```

和说的一样：

```
Just (show 1) 
```

但当`(->)`用作函子时（在`Control.Monad.Instances`）

```
import Control.Monad.Instances
(fmap show Just) 1
result is : "Just 1" 
```

即`Just`先应用，再`show`应用。在另一个例子中，结果是一样的：

```
 fmap (*3) (+100) 1
 result is 303 
```

那为什么不`*3`先`+100`呢？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-24T08:36:05.927

（即函数）的`fmap`实例`(->) r`实际上只是组合。从[源本身](http://hackage.haskell.org/packages/archive/base/latest/doc/html/src/Control-Monad-Instances.html)：

```
instance Functor ((->) r) where
    fmap = (.) 
```

因此，在您的示例中，我们可以替换`fmap`为`(.)`，并进行一些转换

```
fmap (*3) (+100) 1 => 
(.) (*3) (+100) 1  =>
(*3) . (+100) $ 1  => -- put (.) infix
(*3) (1 + 100)     => -- apply (+100)
(1 + 100) * 3         -- apply (*3) 
```

也就是说，`fmap`for 函数从右到左组合它们（与 完全一样`(.)`，这是明智的，因为它是`(.)`）。

换一种方式来看（用于（双重）确认！），我们可以使用类型签名：

```
-- general fmap
fmap :: Functor f => (a -> b) -> f a -> f b

-- specialised to the function functor (I've removed the last pair of brackets)
fmap :: (a -> b) -> (r -> a) -> r -> b 
```

所以首先`r`需要将类型的值（第三个参数）转换为类型的值`a`（通过`r -> a`函数），以便`a -> b`函数可以将其转换为类型的值`b`（结果）。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-04-24T08:50:49.083

> Functor 中 fmap 的类型是：
> 
> ```
> fmap :: Functor f => (a -> b) -> f a -> f b 
> ```
> 
> 看起来，首先将函数（a -> b）应用于fa的参数以创建b类型的结果，然后将f应用于它，结果为fb

那是 的类型`fmap`，但是您对该类型含义的解释是错误的。

您似乎假设`f a`有一个参数，并且该参数具有 type `a`。

考虑`xs :: [a]`：

*   也许`xs = []`。
*   也许`xs = [x1]`。
*   也许`xs = [x1, x2]`。
*   ...

该*类型* 是具有单个类型参数`f a`的函子。但是type 的*值*不一定采用 形式，正如您从上面的第一种和第三种情况中看到的那样。`f``a`*`f a``F x`*

 *现在考虑`fmap f xs`：

*   也许`fmap f xs = []`。
*   也许`fmap f xs = [f x1]`。
*   也许`fmap f xs = [f x1, f x2]`。
*   ...

我们不一定适用`f`（第一种情况）！或者我们可能会多次应用它（第三种情况）。

我们所做的就是用类型的东西替换类型`a`的东西`b`。但是我们保留了更大的结构——没有添加新元素，没有删除元素，它们的顺序保持不变。

* * *

现在让我们考虑函子`(c ->)`。（记住，仿函数只接受一个类型参数，所以输入`(->)`是固定的。）

a`c -> a`甚至包含一个`a`? 它可能根本不包含任何`a`s，但是当我们给它一个 s 时，它可以以某种方式凭空变魔术`c`。但是`fmap`has type的结果：当我们看到 a 时，`c -> b`我们只需要提供a 。`b``c`

所以我们可以说`fmap f x = \y -> f (x y)`。

在这种情况下，我们是`f`按需应用 --- 每次我们返回的函数被应用`f`时，也会被应用。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-04-24T08:41:44.213

它*需要*以这种方式定义以使类型起作用。正如您所指出的，类型`fmap`是：

```
fmap :: Functor f => (a -> b) -> f a -> f b 
```

让我们考虑函子`f`为`((->) c)`

（**注意：**我们实际上想把它写成`(c ->)`，即来自 的函数`c`，但是 Haskell 不允许我们这样做。）

那么`f a`实际上是`((->) c a)`，它等价于`(c -> a)`，同样对于`f b`，所以我们有：

```
fmap :: (a -> b) -> (c -> a) -> (c -> b) 
```

即我们需要采取两个功能：

*   `f :: a -> b`
*   `g :: c -> a`

并构造一个新函数

*   `h :: c -> b`

但是只有一种方法可以做到这一点：你必须先申请`g`获得类型的东西`a`，然后申请`f`获得类型的东西`b`，这意味着你*必须*定义

```
instance Functor ((->) c) where
    fmap f g = \x -> f (g x) 
```

或者，更简洁地说，

```
instance Functor ((->) c) where
    fmap = (.) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-24T08:34:34.220

`fmap`for`(->)`定义为`fmap = (.)`. 所以，`(fmap f g) x` 是`(f . g) x`是`f (g x)`。在您的情况下`(*3) ((+100) 1)`，这等于`3 * (100 + 1)`结果`303`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-01-06T09:07:38.583

为了形成一个函数类型，你需要 2 种参数用于 (->)，即单输入参数类型和返回类型。

Functor 只能接受 1 个类型参数，因此您必须确定输入参数类型（因为它是从左到右的第一个），这使得函数的返回类型成为 Functor 的类型参数。

所以对于函数（Functor）a->b，你需要给fmap一个b->xxx类型的函数ff而不是a->xxx才能工作，这意味着函数ff只能在a->b之后应用是应用。*

# php - Symfony2 事件调度器（理论上）

> ID：10294273
> 
> 赞同：2
> 
> 时间：2012-04-24T08:24:09.407
> 
> 标签：php, events, symfony, dispatcher

我确实了解 Observer Pubsub 和 MVC 模式的概念。例如，我在 jQuery 中使用它。Symfony 文档看起来也不错，所以组件的使用并不是真正的问题，但这个概念让我有点困惑。你能指出一些在 Symfony 中使用这种模式的真实例子（虚拟代码会很棒）吗？我可以只在几个不同的控制器或控制器的方法中使用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:46:57.100

我认为[Form.php](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/Form.php)是一个很好的例子。如果您查看[bind 方法](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/Form.php#L464)（在方法调用期间`bindRequest`调用），它会调度各种[事件](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/FormEvents.php)。有关这些事件的信息，请查看[此答案](https://stackoverflow.com/questions/9651095/description-of-symfony2-form-events)。还要检查[此](http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html)食谱条目以添加事件侦听器。

**编辑：**似乎有一个关于事件调度程序的食谱部分。[在这里](http://symfony.com/doc/current/cookbook/event_dispatcher/index.html)检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:28:46.397

我认为你应该通过

[https://github.com/beberlei/AcmePizzaBundle](https://github.com/beberlei/AcmePizzaBundle)

它向您展示了如何使用表单构建器构建表单并与数据库交互。

# python - 使用 django 的 gdal lib 的“不支持”的光栅特性

> ID：10294274
> 
> 赞同：2
> 
> 时间：2012-04-24T08:24:10.283
> 
> 标签：python, django, import, raster, gdal

我已经阅读了[Django GDAL API](https://docs.djangoproject.com/en/dev/ref/contrib/gis/gdal/)，它明确指出不支持与*光栅相关的功能。*好的，如果是这种情况，我想使用支持这些功能的*其他gdal 库。*

所以我也安装了[http://pypi.python.org/pypi/GDAL/](http://pypi.python.org/pypi/GDAL/)。

但是，django 似乎不希望我使用*其他*gdal 库。django 内部似乎存在某种冲突。

在标准的 python CLI 中，它可以很好地导入：

```
>>> import osr
>>> from osgeo import osr
>>>
>>> import gdal
>>> from osgeo import gdal
>>> from django.contrib.gis import gdal
>>> gdal.HAS_GDAL
True 
```

但是当我从*django shell*尝试同样的事情，或者尝试运行 django 管理命令时，我得到了错误：

> ImportError：DLL 加载失败：找不到指定的过程。

*django shell*和DJANGO 找不到 DLL的*标准 python CLI*有什么区别？我可以做些什么来使用其他 GDAL，以便我可以导入和使用创建栅格所需的功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-26T17:08:57.707

如果它有帮助，我开始研究一些包，这些包可以更简单地将栅格数据集成到 django 项目中。

[https://pypi.python.org/pypi/django-raster/](https://pypi.python.org/pypi/django-raster/)

[https://pypi.python.org/pypi/django-wms/](https://pypi.python.org/pypi/django-wms/)

另请参阅我对相关问题的回答

[https://gis.stackexchange.com/a/115330/4287](https://gis.stackexchange.com/a/115330/4287)

# qr-code - 二维码中的二进制字符

> ID：10294277
> 
> 赞同：0
> 
> 时间：2012-04-24T08:24:22.967
> 
> 标签：qr-code, binary-data

似乎 QR 码能够存储二进制字符（8 位），但无论如何我都找不到。有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:54:37.873

只需使用 QR 码的字节模式对这些字节进行编码。就这样。请注意，读者会希望将这些字节解释为文本，因此读者不可能将您的二进制数据理解为二进制数据（如编码图像）。但也许你有一个定制的阅读器，可以用它做一些特别的事情。

# file-type - 什么是 .onetoc2 文件？

> ID：10294279
> 
> 赞同：-2
> 
> 时间：2012-04-24T08:24:26.677
> 
> 标签：file-type, onenote

什么是 MS OneNote .onetoc2 文件？我需要知道这是否重要或只是一个无用的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:46:47.817

It's a OneNote table of contents file.

# .net - Robotframework 能否在 C-Sharp 开发的 GUI 上支持关键字驱动测试

> ID：10294283
> 
> 赞同：1
> 
> 时间：2012-04-24T08:24:43.260
> 
> 标签：.net, selenium, acceptance-testing, robotframework

我是整个测试自动化方法的新手。我如何使用带有 .Net 开发的 GUI 的机器人框架编写关键字驱动的测试。我不太确定这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T13:12:20.720

我能想到至少三种可能的解决方案。

您可以让您的 GUI 在单独的线程中实现 xmlrpc 服务器。然后，您可以使用机器人[远程库界面](http://robotframework.googlecode.com/hg/doc/userguide/RobotFrameworkUserGuide.html?r=2.7.1#remote-library-interface)来驱动 GUI。

第二个选项是使用[autoit](http://code.google.com/p/robotframework-autoitlibrary/)库。优点是您不必修改程序。不利的一面是，您无法访问 GUI 的内部状态。

第三种选择是使用 ironpython 运行机器人，它可以让您访问整个 .NET 生态系统。您可以直接在 C# 中编写关键字来执行与应用程序对话所需的任何操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T09:44:46.873

我已经尝试了上述所有建议，并发现 RF Remote Library 与[Sharp Robot Remote Server](http://code.google.com/p/sharprobotremoteserver/)（在 C# 中）相结合是迄今为止最好的解决方案。

值得一提的是[White 框架](http://white.codeplex.com)，它可以与您的 C# 库结合使用，让您更轻松地访问 UI 元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T19:07:47.170

另一种方法是使用[Sikuli](http://blog.mykhailo.com/2011/02/how-to-sikuli-and-robot-framework.html)，Sikuli引入了新的自动化测试方式——使用截图和图像进行测试，而不使用任何被测对象的内部API。这种方法（使用纯图像/屏幕截图并生成鼠标和键盘事件）更类似于由只有监视器、鼠标和键盘的真人执行的手动测试活动。

# regex - 从R中的字符串中删除所有特殊字符？

> ID：10294284
> 
> 赞同：148
> 
> 时间：2012-04-24T08:24:48.693
> 
> 标签：regex, string, r, character

如何从 R 中的字符串中删除所有特殊字符并用空格替换它们？

要删除的一些特殊字符是：`~!@#$%^&*(){}_+:"<>?,./;'[]-=`

我尝试过`regex`使用`[:punct:]`模式，但它只删除标点符号。

问题2：以及如何从外语中删除字符，例如：`â í ü Â á ą ę ś ć`？

回答： 使用`[^[:alnum:]]`删除`~!@#$%^&*(){}_+:"<>?,./;'[]-=`和使用`[^a-zA-Z0-9]`删除也在`â í ü Â á ą ę ś ć`或`regex`功能`regexpr`。

**基础 R 中的解决方案：**

```
x <- "a1~!@#$%^&*(){}_+:\"<>?,./;'[]-=" 
gsub("[[:punct:]]", "", x)  # no libraries needed 
```

* * *

## 回答 #1

> 赞同：238
> 
> 时间：2012-04-24T09:01:29.410

您需要使用[正则表达式](http://www.regular-expressions.info/quickstart.html)来识别不需要的字符。对于最易于阅读的代码，您需要[`str_replace_all`](https://www.rdocumentation.org/packages/stringr/topics/str_replace_all)来自[`stringr`](https://cran.r-project.org/web/packages/stringr/index.html)包的代码，尽管[`gsub`](https://www.rdocumentation.org/packages/base/topics/grep)来自基本 R 的代码也可以。

确切的正则表达式取决于您要执行的操作。您可以只删除您在问题中提供的那些特定字符，但删除所有标点符号要容易得多。

```
x <- "a1~!@#$%^&*(){}_+:\"<>?,./;'[]-=" #or whatever
str_replace_all(x, "[[:punct:]]", " ") 
```

（基本 R 等效项是`gsub("[[:punct:]]", " ", x)`。）

另一种方法是换出所有非字母数字字符。

```
str_replace_all(x, "[^[:alnum:]]", " ") 
```

请注意，构成字母、数字或标点符号的定义会因您所在的地区而略有不同，因此您可能需要进行一些试验才能得到您想要的。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2017-08-29T14:26:59.520

不要使用正则表达式来删除那些“疯狂”的字符，只需将它们转换为 ASCII，这将删除重音，但会保留字母。

```
astr <- "Ábcdêãçoàúü"
iconv(astr, from = 'UTF-8', to = 'ASCII//TRANSLIT') 
```

这导致

```
[1] "Abcdeacoauu" 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-12-12T07:19:01.933

将特殊字符转换为撇号，

```
Data  <- gsub("[^0-9A-Za-z///' ]","'" , Data ,ignore.case = TRUE) 
```

下面的代码删除额外的'''撇号

```
Data <- gsub("''","" , Data ,ignore.case = TRUE) 
```

使用`gsub(..)`撇号替换特殊字符的功能

# java - 对更改的实体使用批准/拒绝概念的可能性？

> ID：10294285
> 
> 赞同：0
> 
> 时间：2012-04-24T08:24:49.060
> 
> 标签：java, database-design, hibernate-envers

我目前正在探索环境并阅读文档。我的一项要求 envers 没有满足（正如我现在所想的那样）。也许确实如此，有人可以向我指出某些事情或对此有其他解决方案。

要求是需要由第二个用户查看更改的数据。第二个用户可以选择批准或拒绝更改。批准时应进行更改，拒绝时应回滚更改。envers 是否支持这一点，还是我应该在原始数据库表中插入我自己的“已批准”标志？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T20:37:50.710

不，Envers 不支持这一点。您要考虑是否不是在寻找类似工作流的解决方案（尤其是如果这可能演变成涉及多个用户的更复杂的流程，等等）。

Envers 实际上只用于审计数据。例如，也没有内置的回滚。

# c++ - 从 D3DXIntersectTri 获取世界坐标

> ID：10294286
> 
> 赞同：1
> 
> 时间：2012-04-24T08:24:49.377
> 
> 标签：c++, directx

我有一个正方形区域，我必须确定鼠标指向的位置。
使用 D3DXIntersectTri 我可以判断鼠标是否指向它，但我无法计算 x、y、z 坐标。

顶点缓冲区的绘图，它使用顶点数组初始化：

```
vertices[0].position = D3DXVECTOR3(-10, 0,  -10);
vertices[1].position = D3DXVECTOR3(-10, 0,   10);
vertices[2].position = D3DXVECTOR3( 10, 0,  -10);
vertices[3].position = D3DXVECTOR3( 10, 0,  -10);
vertices[4].position = D3DXVECTOR3(-10, 0,   10);
vertices[5].position = D3DXVECTOR3( 10, 0,   10); 
```

到目前为止我有这种方法，这并没有给我正确的坐标（仅适用于区域的一小部分，靠近两个边缘，内部更不准确）：

```
BOOL Area::getcoord( Ray& ray, D3DXVECTOR3& coord)
{
    D3DXVECTOR3 rayOrigin, rayDirection;
    rayDirection = ray.direction;
    rayOrigin = ray.origin;

    float d;

    D3DXMATRIX matInverse;
    D3DXMatrixInverse(&matInverse, NULL, &matWorld);

    // Transform ray origin and direction by inv matrix
    D3DXVECTOR3 rayObjOrigin,rayObjDirection;

    D3DXVec3TransformCoord(&rayOrigin, &rayOrigin, &matInverse);
    D3DXVec3TransformNormal(&rayDirection, &rayDirection, &matInverse);
    D3DXVec3Normalize(&rayDirection,&rayDirection);

    float u, v;
    BOOL isHit1, isHit2;

    D3DXVECTOR3 p1, p2, p3;
    p1 = vertices[3].position;
    p2 = vertices[4].position;
    p3 = vertices[5].position;

    isHit1 = D3DXIntersectTri(&p1, &p2, &p3, &rayOrigin, &rayDirection, &u, &v, &d);
    isHit2 = FALSE;

    if(!isHit1)
    {
        p1 = vertices[0].position;
        p2 = vertices[1].position;
        p3 = vertices[2].position;
        isHit2 = D3DXIntersectTri(&p1, &p2, &p3, &rayOrigin, &rayDirection, &u, &v, &d);
    }

    if(isHit1) 
    {
        coord.x = 1 * ((1-u-v)*p3.x + u*p3.y + v*p3.z);
        coord.y = 0.2f;
        coord.z = -1 * ((1-u-v)*p1.x + u*p1.y + v*p1.z);
        D3DXVec3TransformCoord(&coord, &coord, &matInverse);
    }

    if(isHit2) 
    {
        coord.x = -1 * ((1-u-v)*p3.x + u*p3.y + v*p3.z);
        coord.y = 0.2f;
        coord.z = 1 * ((1-u-v)*p1.x + u*p1.y + v*p1.z);
        D3DXVec3TransformCoord(&coord, &coord, &matWorld);
    }
    return isHit1 || isHit2;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:59:24.783

重心坐标与您使用它们的方式不同。u 和 v 定义源向量的权重。所以如果你想计算命中点，你将不得不计算

```
coord = u * p1 + v * p2 + (1 - u - v) * p3 
```

或者，您可以使用 d 射线参数：

```
coord = rayOrigin + d * rDirection 
```

两种方式都应该产生相同的坐标。

# .net - 适用于 32 位和 64 位 Windows 的小型应用程序的免费小型数据库？

> ID：10294287
> 
> 赞同：0
> 
> 时间：2012-04-24T08:24:51.530
> 
> 标签：.net, database, relational-database

您知道任何适用于 32 位和 64 位 Windows 的小型应用程序的免费小型数据库吗？

我应该尝试 SQLLite 或类似的东西吗？

你有什么建议吗 ？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T08:27:49.670

我在这里回答了类似的问题，但没有详细说明 32/64 位支持：

[对于小型 .NET 应用程序，什么是好的数据库选择？](https://stackoverflow.com/questions/6749556/what-is-a-good-choice-of-database-for-a-small-net-application/6749583#6749583)

但是，许多流行的都提供这种支持。

我知道 SQL CE 有 64 位库，所以这是一个可行的解决方案。我目前在一个小型 .NET 应用程序中将它与 NHibernate 一起使用，没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T12:56:47.870

Microsoft 的最后一个解决方案是 SQL Server Compact 4.0： [http](http://www.microsoft.com/download/en/details.aspx?id=17876) ://www.microsoft.com/download/en/details.aspx?id=17876 它是完全免费的。

我建议使用它而不是其他 3rd 方解决方案，因为它与 LINQ 和 EntityFramework 无缝集成。

此外，您将来可以以最少的配置拥有支持本地和基于服务器的数据库的双重应用程序。

另一个优点是您可以使用 ClickOnce 将其与您的应用程序一起部署。

# c - 如何使用纯 C 语言以编程方式创建转储文件？

> ID：10294288
> 
> 赞同：1
> 
> 时间：2012-04-24T08:24:52.620
> 
> 标签：c, dump, crash-dumps, minidump

我需要为用 C 编写的客户程序创建转储文件。

我看到有一个适用于 Windows 的小型转储，它只适用于 C++ 吗？

C语言还有其他解决方案吗？

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:26:12.590

请参阅这个出色的教程： http: [//www.debuginfo.com/articles/effminidumps.html](http://www.debuginfo.com/articles/effminidumps.html)。它使用 Win32 API `MiniDumpWriteDump`，所以它是纯 C 的。

# ios - Sencha Touch 2：在浏览器上工作正常，请求在 PhoneGap 1.4 中不起作用

> ID：10294296
> 
> 赞同：2
> 
> 时间：2012-04-24T08:25:25.850
> 
> 标签：ios, cordova, sencha-touch, sencha-touch-2

我有一个在 Chrome 中 100% 运行的 Sencha Touch 2 应用程序，但是当我将它包装在 PhoneGap 1.4（对于使用 Xcode 的 iPad2）中时，ajax 请求似乎不起作用。也许我错过了 PhoneGap 中的某些内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:31:49.823

那是因为 iOS 安全限制。将您的域添加到白名单！ [http://davehiren.blogspot.de/2012/03/whitelist-rejection-error-in-xcode-for.html](http://davehiren.blogspot.de/2012/03/whitelist-rejection-error-in-xcode-for.html)

对您的评论：

```
<key>ExternalHosts</key>
<array>
    <string>negroesquisso.pt</string>
</array> 
```

# exchange-server - Kerio EWS 与真实 Exchange EWS 的区别？

> ID：10294298
> 
> 赞同：0
> 
> 时间：2012-04-24T08:25:33.743
> 
> 标签：exchange-server, exchangewebservices

我们的一位客户使用 Kerio Connect。因此他告诉我们它提供了某种 EWS 接口。

有人知道这个接口与真正的 EWS 接口相比有多兼容吗？

是否可以使用“Kerio”EWS 运行编码为 Exchange (2007 / 2010) 的程序？

有人可以给我一个文档链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:38:45.403

该实现实际上是 Exchange 2007 EWS 的一个子集，它是将电子邮件和群件项目同步到 Outlook for Mac 所必需的。从 Connect 8.0.X 开始，针对 Exchange 编码的程序不太可能在不进行更改的情况下与 Kerio Connect 一起工作。如果您需要 EWS 方面的帮助，您可以在 Kerio 论坛 ( [http://forums.kerio.com/](http://forums.kerio.com/) ) 上提问。

# window - JavaFX 2.0 自定义窗口框架按钮

> ID：10294300
> 
> 赞同：0
> 
> 时间：2012-04-24T08:25:35.333
> 
> 标签：window, frame, javafx

我想在我的应用程序窗口框架中添加一个按钮。目前我有常规的窗口外观：“最小化、最大化和关闭”。我在想我应该用自己的按钮制作一个全新的窗口框架，但我真正需要的只是一个具有“注销”功能的附加按钮。有点像 Skype：[http ://cloud.addictivetips.com/wp-content/uploads/2011/08/Compact-View.jpg](http://cloud.addictivetips.com/wp-content/uploads/2011/08/Compact-View.jpg)

我一直在网上搜索一些指针和提示，但我已经没有了。

因此，如果有人有任何可以帮助我的评论或代码，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T21:30:26.380

JavaFX Ensemble 示例应用程序演示了“最小化、最大化和关闭”的自定义按钮，您可以[在此处](http://www.oracle.com/technetwork/java/javafx/downloads/index.html)获取它的源代码。

# actionscript-3 - AS3 的打字机效果

> ID：10294301
> 
> 赞同：0
> 
> 时间：2012-04-24T08:25:35.860
> 
> 标签：actionscript-3, actionscript

我正在尝试使用 AS3 创建打字机效果。我在洞天阅读了教程，但找不到我要找的东西....

也许你可以帮助我。- 请

这就是我想要的： - 打字机文本效果 - 可以设置速度 - 不从外部 .as 文件导入 - 不从外部 .txt 文件导入（文本应该用变量定义） - 如果文本字段已满文本，它应该向下“滚动”……它应该向下跳一行，这样就有一个新的空行，打字机可以在其中书写……

你能帮我做动作大师吗？

我一直与 as2 合作，我很难在 as3 中找到解决方案.. :(

多谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:03:32.967

好吧，这听起来很简单，你所拥有的就是好的。

首先创建将显示最终文本的文本字段。您接下来要做的是一次添加所有字符，但您想要的是在一段时间后添加每个字符。

尝试类似：

```
import flash.events.TimerEvent;
import flash.text.TextField;
import flash.utils.Timer;

// the textfield guess you will add this on timeline instead of coding it...
var myTextField:TextField = new TextField();

// this is the text that should be displayed tywriterstyle
var typewriterText:String  ="Hello World Typewriter";  

// Charackter count and timer for timedelay between each upcoming charackter
var counter:int = 0;
var delayTimer: Timer = new Timer(300);

// starts Timer
delayTimer.addEventListener(TimerEvent.TIMER, addCharackter);
delayTimer.start();

private function addCharackter( E:Event = null ):void{

    // get a single Charackter out of the String
    var charackterToAdd:String = typewriterText.charAt(counter);

    // add the charackter to the Textfield
    myTextField.text.append(charackterToAdd);
    counter++;

    // if you reached the end of the String stop Timer
    if(counter == typewriterText.length){
        delayTimer.stop();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T13:51:33.870

对于文本动画，您可以使用[flupie](http://flupie.net/blog/)。我认为这是一种更好的方法。

另请参见[this](http://flupie.net/textanim/maker/)和[this](http://code.google.com/p/textanim/)。

*如果你是一个 watch&learn 的人，[这](http://www.gotoandlearn.com/play.php?id=55)对你来说会很方便。*

# c# - 如何将两个任务结果合并为第三个任务？

> ID：10294302
> 
> 赞同：14
> 
> 时间：2012-04-24T08:25:35.943
> 
> 标签：c#, task-parallel-library

如何执行 System.Threading.Task 作为两个或多个其他任务结果的延续？

```
public Task<FinalResult> RunStepsAsync()
{
    Task<Step1Result> task1 = Task<Step1Result>.Factory.StartNew(Step1);

    // Use the result of step 1 in steps 2A and 2B
    Task<Step2AResult> task2A = task1.ContinueWith(t1 => Step2A(t1.Result));
    Task<Step2BResult> task2B = task1.ContinueWith(t1 => Step2B(t1.Result));

    // Now merge the results of steps 2A and 2B in step 3
    Task<FinalResult> task3 = task2A
        .ContinueWith(
            t2A => task2B.ContinueWith(
                t2B => Step3(t2A.Result, t2B.Result)))
        .Unwrap();
    return task3;
} 
```

这可行，但双重 ContinueWith 似乎效率低下。有没有更好的方法来做到这一点，也许使用 TaskCompletionSource？（我不想使用锁或 Task.WaitAll。）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-24T08:33:50.290

使用[TaskFactory.ContinueWhenAll](http://msdn.microsoft.com/en-us/library/ee362175.aspx)。

```
class Step1Result {}
class Step2AResult
{
    public Step2AResult(Step1Result result) {}
}
class Step2BResult
{
    public Step2BResult(Step1Result result) {}
}
class FinalResult 
{
    public FinalResult(Step2AResult step2AResult, Step2BResult step2BResult) {}
}

    public Task<FinalResult> RunStepsAsync()
    {
        var task1 = Task<Step1Result>.Factory.StartNew(() => new Step1Result());

        // Use the result of step 1 in steps 2A and 2B
        var task2A = task1.ContinueWith(t1 => new Step2AResult(t1.Result));
        var task2B = task1.ContinueWith(t1 => new Step2BResult(t1.Result));

        // Now merge the results of steps 2A and 2B in step 3
        return Task <FinalResult>
            .Factory
            .ContinueWhenAll(new Task[] { task2A, task2B }, tasks => new FinalResult(task2A.Result, task2B.Result));
    } 
```

# c++ - 当复制构造函数是私有且未实现时是否允许 RVO？

> ID：10294303
> 
> 赞同：10
> 
> 时间：2012-04-24T08:25:45.853
> 
> 标签：c++, copy-constructor, rvo

假设我有一个类，其中复制构造函数是私有的*且未实现*（使对象不可复制）

```
class NonCopyable {
// whatever
 private:
    NonCopyable( const NonCopyable&);
    void operator=(const NonCopyable&);
 }; 
```

现在在同一个类的一些成员函数中，我编写了返回该类对象的代码：

```
NonCopyable NonCopyable::Something()
{
    return NonCopyable();
} 
```

这是 RVO 可以介入的情况。

RVO 仍然要求可以访问复制构造函数。由于对复制构造函数的可能调用是在同一个类成员函数中完成的，因此复制构造函数*是可访问*的。因此，尽管意图是禁止使用复制构造函数，但从技术上讲，RVO 是可能的。

在这种情况下是否允许 RVO？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T08:30:41.790

是的，在这种情况下允许 RVO - 至少如果调用者`Something()`是班级成员或朋友。

我认为这是不可复制类的私有继承比在每个要防止复制的类中“手动”进行更好的原因之一。在这种情况下，不会出现意外漏洞。

例如，使用`boost::noncopyable`：

```
class NonCopyable : private boost::noncopyable {
public:
    NonCopyable() {};
    NonCopyable Something();
};

NonCopyable NonCopyable::Something()
{
    return NonCopyable();  // causes compile time error, not link time error
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T08:47:51.283

你的例子很有趣。

这是典型的 C++03 声明。

```
class NC {
public:
    NC NC::Something() {
        return NC();
    }

private:
    NC(NC const&);
    NC& operator=(NC const&);
}; 
```

在这里，如前所述，即使我们在语义上希望*避免*复制，RVO 也可能会发挥作用。

在 C++03 中，解决方案是委托：

```
class NC: boost::noncopyable {
public:
    NC NC::Something() { // Error: no copy constructor
        return NC();
    }
}; 
```

在 C++11 中，我们可以选择使用`delete`关键字：

```
class NC {
public:
    NC NC::Something() { // Error: deleted copy constructor
        return NC();
    }

private:
    NC(NC const&) = delete;
    NC& operator=(NC const&) = delete;
}; 
```

但有时，我们想阻止复制，却想允许*Builder*（就像在Pattern 中一样）。

在这种情况下，*只要 RVO 启动*，您的示例就可以工作，这有点烦人，因为它本质上是非标准的。应提供复制构造函数的定义，但您不希望使用它。

在 C++11 中，通过删除复制操作和定义移动操作（甚至是私有的）来支持此用例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T08:46:39.567

One important point may overshadow the actual question.

> What is the use case of such function if RVO is allowed ?

This function can be called in 3 ways and 2 of them will be a compiler error:

```
NonCopyable obj;
NonCopyable obj2 = obj; // 1 --> error
NonCopyable &r = obj;   // 2 --> error
const NonCopyable &rc = obj; // 3 --> ok, but dangerous (may lead to UB) 
```

One can't use the returned object effectively, so it really doesn't matter if the RVO is allowed or not.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T08:30:41.993

这是允许的，但您可能会收到链接错误，因为未实现复制构造函数。如果您为 提供一个主体`NonCopyable( const NonCopyable&)`，它将起作用。

# c++ - 有没有一种方法可以在不通过 Windows API 将显示器附加到桌面的情况下启用显示器？

> ID：10294304
> 
> 赞同：1
> 
> 时间：2012-04-24T08:25:48.503
> 
> 标签：c++, windows, multiple-monitors

我只需要一个用于 DXGI 输出的显示器，并且根本不希望它成为桌面的一部分。我真的不希望全屏显示仅仅因为有人不小心将某些窗口移出主桌面左右而退出全屏模式。

有没有办法在不使其成为桌面的一部分的情况下启用显示器？

* * *

“注意在 Windows 显示驱动程序模型 (WDDM) 中实施的驱动程序不支持将其他显示器用作独立显示器。”

估计我运气不好。

# ffmpeg - FFmpeg：Remux f4v 从流切割到 mp4

> ID：10294305
> 
> 赞同：-1
> 
> 时间：2012-04-24T08:25:49.860
> 
> 标签：ffmpeg, mp4, transcoding

我有一个使用 Wowza 媒体服务器从 H.264/AAC 流中剪切的 mp4 文件。剪切后，文件被强制转换为 mp4 格式，使用以下命令：

```
ffmpeg -i wowza_output_file -vcodec copy -acodec copy -f mp4 -y wowza_output_file_copy 
```

从那里我将它重命名为 test_f4v.mp4 并使用 ffprobe 来查看文件：

```
ffprobe version 0.8, Copyright (c) 2007-2011 the FFmpeg developers
  built on Jul 20 2011 13:32:19 with gcc 4.4.3
  configuration: --enable-gpl --enable-version3 --enable-nonfree --enable-postproc --enable-libfaac --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libtheora --enable-libvorbis --enable-libx264
  libavutil    51\.  9\. 1 / 51\.  9\. 1
  libavcodec   53\.  7\. 0 / 53\.  7\. 0
  libavformat  53\.  4\. 0 / 53\.  4\. 0
  libavdevice  53\.  1\. 1 / 53\.  1\. 1
  libavfilter   2\. 23\. 0 /  2\. 23\. 0
  libswscale    2\.  0\. 0 /  2\.  0\. 0
  libpostproc  51\.  2\. 0 / 51\.  2\. 0
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'test_f4v.mp4':
  Metadata:
    major_brand     : f4v 
    minor_version   : 0
    compatible_brands: isommp42m4v 
    creation_time   : 2012-04-23 12:36:06
  Duration: 01:00:01.84, start: 0.000000, bitrate: 2004 kb/s
    Stream #0.0(eng): Video: h264 (Baseline), yuv420p, 854x480 [PAR 1:1 DAR 427:240], 1903 kb/s, 25 fps, 25 tbr, 90k tbn, 50 tbc
    Metadata:
      creation_time   : 2012-04-23 12:36:06
    Stream #0.1(eng): Audio: aac, 48000 Hz, stereo, s16, 96 kb/s
    Metadata:
      creation_time   : 2012-04-23 12:36:06 
```

现在有一个问题。我需要一个文件，其中包含以下元数据：

```
major_brand     : mp42
compatible_brands: isom 
```

有没有办法重新混合 mp4 文件以使用 ffmpeg 获取`major_brand`和`compatible_brands`描述的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T22:31:02.727

`-metadata`您可以使用FFmpeg 的标志设置任意元数据。

从[手册页](http://ffmpeg.org/ffmpeg.html#Main-options)：

```
 -metadata[:metadata_specifier] key=value (output,per-metadata)
       Set a metadata key/value pair.

       An optional metadata_specifier may be given to set metadata on
       streams or chapters. See "-map_metadata" documentation for details.

       This option overrides metadata set with "-map_metadata". It is also
       possible to delete metadata by using an empty value.

       For example, for setting the title in the output file:

               ffmpeg -i in.avi -metadata title="my title" out.flv

       To set the language of the first audio stream:

               ffmpeg -i INPUT -metadata:s:a:1 language=eng OUTPUT 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:40:41.877

我对 Wowza 格式了解不多，但由于您只是复制实际的流数据并且只更改包装，您可以尝试使用[HandBrakeCLI](https://trac.handbrake.fr/wiki/CLIGuide)转换为 mp4。默认情况下，它设置`major_brand`为`mp42`和。也许足够接近？`compatible_brands``mp42isomavc1`

# android - 当我必须使用 Intent 时，什么是 createChooser？我可以用这种方法做什么？

> ID：10294308
> 
> 赞同：21
> 
> 时间：2012-04-24T08:26:01.903
> 
> 标签：android, android-intent

我一直在查看stackoverflow，但我没有找到关于什么是“createChooser”以及为什么我可以使用以及在哪种情况下使用它的定义。

提前致谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-24T08:46:07.570

例如：您的应用程序中有一个共享图片选项。

您定义这样的意图：

```
Intent picMessageIntent = new Intent(android.content.Intent.ACTION_SEND);
picMessageIntent.setType("image/jpeg");

File downloadedPic =  new File(
    Environment.getExternalStoragePublicDirectory(
    Environment.DIRECTORY_DOWNLOADS),
    "q.jpeg");

picMessageIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(downloadedPic)); 
```

比你打电话时：

```
startActivity(picMessageIntent); 
```

将列出您手机上能够获取此图片的所有应用程序。

**如果要自定义该列表的标题，可以像这样使用 createChooser：**

```
startActivity(Intent.createChooser(picMessageIntent, "Send your picture using:")); 
```

![在此处输入图像描述](../Images/613575c059834b0c354d23efa1a1d8ef.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-04T19:03:06.200

当您的应用首次调用 startActivity(intent) 时，用户会看到能够处理此意图的所有应用的列表。

还有一个选项可以始终使用列表中的一个应用程序来处理此意图。如果使用此选项，则列表将永远不会再次显示。

如果您在意图中使用 createChooser，则不会显示“始终使用此应用程序”选项。用户始终会看到此列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T08:35:48.590

当您想使用 Intent 创建自定义操作时使用此方法...就像 android 提供的`ACTION_VIEW`等等...但是在这里，当有多个选择来执行操作时，此选择器将弹出一个对话框，其中包含所有可用选项并让用户选择一个......这是一个[例子](http://mobile.tutsplus.com/tutorials/android/android-sdk-sending-pictures-the-easy-way/)

# python - 从文件中读取列表列表作为python中的列表列表

> ID：10294310
> 
> 赞同：8
> 
> 时间：2012-04-24T08:26:05.553
> 
> 标签：python, file, list

我以列表列表的形式收集数据并将数据写入文本文件。文本文件中的数据看起来像

```
[[123231,2345,888754],[223467,85645]] 
```

我想读回它并存储在我的程序中的列表列表中。但是，当我`read()`从文件中执行并尝试创建一个平面列表时，它将所有内容都作为一个字符串，并且解释完全改变，我无法查询在 python 中作为普通列表读取后得到的结果。

有人可以帮助我阅读文件并以与列表列表相同的格式存储吗？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T08:30:04.087

这看起来像有效的[JSON](http://docs.python.org/library/json.html)。

所以你可以简单地做：

```
import json
with open(myfilename) as f:
    lst = json.load(f) 
```

要将“列表列表”存储在文件中，请执行

```
with open(myfilename, "w") as f:
    json.dump(lst, f) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T08:43:17.667

您也可以使用它`eval`来实现这一点，但其他解决方案可能更好：

```
# reading a list from a file
f = open('data.txt', 'r')
l = eval(f.read())

# storing a list to a file
outf = open('out','w')
outf.write(str(l)) 
```

有时使用`eval`是一种不好的做法。有关更多信息，请查看[此帖子](https://stackoverflow.com/questions/1832940/is-using-eval-in-python-a-bad-practice)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T08:34:04.177

你可以只[腌制](http://docs.python.org/library/pickle.html)你的数据。要保存它：

```
>>> import pickle
>>> p= [[123231,2345,888754],[223467,85645]]  
>>> with open("data.txt", "wb") as internal_filename:
...     pickle.dump(p, internal_filename) 
```

要加载它：

```
>>> with open("data.txt", "rb") as new_filename:
...     pp = pickle.load(new_filename)
>>> pp
[[123231, 2345, 888754], [223467, 85645]] 
```

这对于更复杂的对象也很有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T08:56:20.803

确保：

*   列表数据所在的文件是 python 文件
*   列表数据被分配给一个变量
*   该文件位于python模块中

然后，您可以从 python 文件中导入列表。例如，假设列表 my_list 在文件 mylist.py 中

例如：

```
# This is the file mylist.py
my_list = [[123231,2345,888754],[223467,85645]] 
```

然后您可以将 my_list 视为 python 列表

```
from mylist import my_list

for item in mylist:
   print "item = <", item, ">" 
```

# java - 在 IntelliJ Hibernate 控制台中运行查询时出现 MappingNotFoundException

> ID：10294318
> 
> 赞同：1
> 
> 时间：2012-04-24T08:26:39.143
> 
> 标签：java, hibernate, intellij-idea

我正在尝试在 IntelliJ 的休眠控制台中运行 HQL 查询。我已将数据源添加到 Data Sources 视图，并将 my 添加`hibernate.cfg.xml`到 Hibernate facet，这样 in 就会出现在 Persistence 视图中。的内容`hibernate.cfg.xml`是：

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD//EN"
        "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory>
        <property name="connection.url">jdbc:mysql://localhost/mmanager</property>
        <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="connection.username">root</property>
        <property name="connection.password">password</property>
        <property name="dialect">com.puca.core.util.db.MySQLInnoDBDialect</property>

        <!-- mapping files -->
        <mapping resource="com/puca/messagemanager/api/model/XmlApiDlrMapping.hbm.xml"/>
    </session-factory>
</hibernate-configuration> 
```

显示`.hbm.xml`为绿色，而如果我将其更改为不存在的文件，则显示为红色，因此 IntelliJ 似乎可以找到它。但是，如果我在控制台中运行一个简单的查询，例如：

```
from XmlApiDlrMapping xmlApiDlrMapping 
where xmlApiDlrMapping.retries = 5 
```

我收到一个错误：

```
java.lang.RuntimeException: org.hibernate.MappingNotFoundException: resource: com/puca/messagemanager/api/model/XmlApiDlrMapping.hbm.xml not found
    at org.hibernate.cfg.Configuration.addResource(Configuration.java:563)
    at org.hibernate.cfg.Configuration.parseMappingElement(Configuration.java:1587)
    at org.hibernate.cfg.Configuration.parseSessionFactory(Configuration.java:1555)
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1534)
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1508)
    at org.hibernate.cfg.Configuration.configure(Configuration.java:1462) 
```

我正在使用 IntelliJ 10.5.4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T08:33:54.287

这正是它在错误消息中所说的。缺少映射 XML 文件：

`com/puca/messagemanager/api/model/XmlApiDlrMapping.hbm.xml`

这些文件用于将表列映射到您的实体类字段。

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/tutorial.html#tutorial-firstapp-mapping](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/tutorial.html#tutorial-firstapp-mapping)

# blackberry - 如何在黑莓中获得屏幕分辨率？

> ID：10294321
> 
> 赞同：0
> 
> 时间：2012-04-24T08:26:42.553
> 
> 标签：blackberry, screen, resolution

我正在 BlackBerry 中制作应用程序。在这里我想在程序中找到屏幕分辨率。怎么找到那个？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T08:29:55.393

尝试使用此代码获取屏幕宽度和高度 -

```
Display.getWidth();
Display.getHeight(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T08:46:29.647

我记得他们要求避免调用`Display.getWidth()`和`getHeight()`方法。`Screen.getWidth()`并要求`getHeight()`在可能的地方使用。

# javascript - 一段时间后如何更改 HTML 中 div 的内容然后重新开始？

> ID：10294323
> 
> 赞同：0
> 
> 时间：2012-04-24T08:26:46.100
> 
> 标签：javascript, jquery, android

我目前正在创建一个应用程序，它将成为 Android 上的一种数字显示器。我的问题是我需要显示一个包含多个区域的 html 页面。（或盒子）我现在已经实现了，但是每个区域都有不止一个项目可以放入其中。每个盒子的元素之间的这些切换是在特定时间后完成的。而我目前正在做的是在那段时间过去之后，我只是将新数据加载到已过期的区域中，然后使用 webView 查看新创建的 html 文件。然而，这种方法会导致不必要的加载，并且需要一些时间来使用 android 设备。

我想学习的是，是否有可能通过某种js函数实现不同 div 内每个项目之间的切换？我阅读了一些有关更改 div 内容的信息，但是一段时间后我找不到一种方法来做到这一点。

例如，我有 3 个不同的区域，分别是 A、B 和 C。在 A 区域我有 2 个项目，分别显示 10 秒和 30 秒。在区域 B 上，只有一项要显示。而且在区域 C 上，假设有 3 个不同的项目，它们的持续时间为 15 秒-25 秒-10 秒。我还必须一次又一次地展示这些物品。有没有办法让循环和内容在 html 上的每个持续时间后发生变化？任何信息或代码片段都会有所帮助，因为我对 JS 或 JQuery 了解不多。

关于这些不同区域内的那些元素：它们由文本（也有一些动画）、RSS 提要、图像、视频、嵌入的 html 组成。

```
textRender += String.format("<div id='text' style='position:relative; overflow:hidden; width: %dpx; height: %dpx; 
                              left: %dpx; top: %dpx'>", widthOfRegio - 10, heightOfRegio,leftOfRegio,topOfRegio);
textRender += String.format("<div id='innerText' style='position:absolute; %s:" + /*leftOfRegio+*/"0px; top: "+/*topOfRegio+*/"0px; 
width: %dpx; %s'>%s</div></div>", startPosition, widthOfRegio-10, textWrap, toTest); 
```

例如，使用此代码段，我将每个元素写入 html 文件。我还为我创建的每个新元素生成不同的 id。例如，如果我有 3 个区域，如上面的示例，我有 3 个具有不同 id 的不同框。我将这些标签与一些 js 函数一起使用，这些函数可以帮助我使文本左右浮动等。

这是原始生成的 html 的样子：

```
<div id='text' style='position:relative; overflow:hidden; width: 310px; height: 300px; left: 0px; top: 20px'>
<div id='innerText' style='position:absolute; left:0px; top: 0px; width: 310px; '><iframe src="http://free.timeanddate.com/clock/i31ww8ou/n514/fn6/fs8/fc9ff/tc000/ftb/bas0/bat1/bacfff/tt0/tw1/th1/ta1/tb4" frameborder="0" width="70" height="24"></iframe></div></div> 
<div id='text1' style='position:relative; overflow:hidden; width: 96px; height: 100px; left: 160px; top: -300px'>
<div id='innerText1' style='position:absolute; left:0px; top: 0px; width: 96px; '><p><em><strong><span style="color:#8b4fff;">Some Text Goes Here</span></strong></em></p></div></div> 
<div id='text2' style='position:relative; overflow:hidden; width: 96px; height: 100px; left: 53px; top: -306px'>
<div id='innerText2' style='position:absolute; left:0px; top: 0px; width: 96px; '><p><em><strong><span style="color:#8b4fff;">Some Text Goes Here</span></strong></em></p></div></div> 
```

我正在使用这种结构来使文本和 rss 提要与我的功能一起使用。这需要这 2 个 id 才能使用，这就是为什么我为一个区域 atm 创建 2 个不同的 div id。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T13:22:46.337

这是一个替代版本，在这里工作演示[http://jsfiddle.net/pomeh/HAjrY/](http://jsfiddle.net/pomeh/HAjrY/)

HTML 代码

```
<div class="container">
    <div class="hidden" data-display-time="2">
        First A content<br />
        2 seconds
    </div>
    <div class="hidden" data-display-time="4">
        Second A content<br />
        4 seconds
    </div>
</div>

<div class="container">
    <div>
        Unique B content
    </div>
</div>

<div class="container">
    <div class="hidden" data-display-time="3">
        First C content<br />
        3 seconds
    </div>
    <div class="page hidden" data-display-time="6">
        Second C content<br />
        6 seconds
    </div>
    <div class="hidden" data-display-time="3">
        Third C content<br />
        3 seconds
    </div>
</div>​ 
```

CSS 代码

```
.container {
    width: 100px;
    height: 100px;
    border: solid black 1px;
    float: left;
    margin-left: 10px;
}

.hidden {
    display: none;
} 
```

​ Javascript 代码

```
// get all containers
var $containers = $( ".container:has([data-display-time])" );

function displayNext( $container, $pages, hitCount ) {
    // get the index of the next displayed page
    var nextPageIndex = hitCount % $pages.length,
        $pageToDisplay = $pages.eq( nextPageIndex ),
        // convert time to milliseconds
        displayTime = 1000*$pageToDisplay.data( "displayTime" );

    // hide all page, and show the right one
    $pages.addClass( "hidden" );
    $pageToDisplay.removeClass( "hidden" );

    // init a timer to display the next page, increment hitCount
    setTimeout(function() {
        displayNext( $container, $pages, hitCount+1 );
    }, displayTime );
}

// initialize the process once for each container
$containers.each(function() {
    var $container = $(this),
        $pages = $container.find( "[data-display-time]" ),
        hitCount = 0;

    // nothing to show
    if( $pages.length === 0 ) {
        return;
    }
    // nothing to rotate with, display the unique page
    else if( $pages.length === 1 ) {
        $pages.removeClass( "hidden" );
        return;
    }

    // init the rotation process
    displayNext( $container, $pages, hitCount );
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T09:26:21.353

contentAll 是一个对象，其中包含您希望随着时间的推移出现在不同区域的 html 数组。3000 和 2000 是函数被触发的毫秒数（在这种情况下是“regionA”和“regionB”）看看 jsfiddle（链接在底部）

```
$('#regionA').attr('data-content', 0);
$('#regionB').attr('data-content', 0);
var contentAll = {regionA: ['first content', 'second content', 'third content'],
                  regionB: ['etc 1', 'the same 2', 'another 3']};

changeRegion = function(id) {
    var $el = $('#'+id),
    num = $el.attr('data-content'),
    content = contentAll[id],
    numMax = content.length;

    num = (num+1)%content.length;
    $el.html(content[num]);
    $el.attr('data-content', num);
};

setInterval(function(){
        changeRegion('regionA');
    }, 3000);
setInterval(function(){
        changeRegion('regionB');
    }, 2000);​ 
```

[http://jsfiddle.net/pVzjU/](http://jsfiddle.net/pVzjU/)

如果您希望每个内容具有不同的出现时间：

```
$('#regionA').attr('data-content', 0);
$('#regionB').attr('data-content', 0);
var contentAll = {regionA: [['first content', 1000], ['second content', 2000], ['third content', 3000]], regionB: [['etc 1', 1000], ['another 2', 2000], ['third', 3000]]};

var changeRegion = function(id){
    var $el = $('#'+id),
    num = $el.attr('data-content'),
    content = contentAll[id],
    numMax = content.length,
    time = null;

    num = (num+1)%content.length;
    time = content[num][1];
    $el.html(content[num][0]);
    $el.attr('data-content', num);
    console.log(content[num][0], time);
    setTimeout(function(){changeRegion(id)}, time);
};
setTimeout(function(){changeRegion('regionA')},contentAll['regionA'][0][0]); 
```

http://jsfiddle.net/pVzjU/4

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T08:37:17.967

您可以使用 setTimeout() 函数：

```
var bar = function ()
{
   $('#foo').html(Math.random())
   setTimeout(bar, 2000)
}
setTimeout(bar, 2000) 
```

这是示例[http://jsfiddle.net/47uRA/](http://jsfiddle.net/47uRA/)

# php - PHP表单必填字段错误信息

> ID：10294324
> 
> 赞同：0
> 
> 时间：2012-04-24T08:26:55.143
> 
> 标签：php, forms, required

好的，我对PHP一无所知。我是新手，我设法根据自己的需要调整代码，但有些事情我无法完成。我有这个联系表，PHP 看起来像这样：

```
<?php
/* Set e-mail recipient */
$myemail  = "";

/* Check all form inputs using check_input function */
$naam = check_input($_POST['naam'], "Vul uw naam in");
$bedrijf  = check_input($_POST['bedrijf']);
$email  = check_input($_POST['email'], "Vul uw emailadres in");
$telefoonnummer  = check_input($_POST['telefoonnummer']);
$onderwerp = check_input($_POST['onderwerp'], "Vul een onderwerp in");
$bericht = check_input($_POST['bericht'], "Stel een vraag of plaats een opmerking");

/* If e-mail is not valid show error message */
if (!preg_match("/([\w\-]+\@[\w\-]+\.[\w\-]+)/", $email))
{
show_error("Vul een geldig e-mailadres in");
}

/* Let's prepare the message for the e-mail */
$message = "Beste,

Een bezoeker heeft een bericht gestuurd:

Naam: $naam
E-mail: $email

Onderwerp: $onderwerp
Bericht:
$bericht

Met vriendelijke groet,
$naam
";

/* Send the message using mail() function */
mail($myemail, $onderwerp, $message);

/* Redirect visitor to the thank you page */
header('Location: thanks.htm');
exit();

/* Functions we used*/ 
function check_input($data, $problem='')
{
$data = trim($data);
$data = stripslashes($data);
$data = htmlspecialchars($data);
if ($problem && strlen($data) == 0)
{
    show_error($problem);
}
return $data;
}

function show_error($myError)
{
?>
<html>
<body>

<b>Please correct the following error:</b><br />
<?php echo $myError; ?>

</body>
</html>
<?php
exit();
}
?> 
```

该表单有四个必填字段 $naam、$email、$onderwerp 和 $bericht。单击提交按钮并且其中任何一个未填写后，都会出现错误。到目前为止一切顺利，但它在新窗口中发布错误，覆盖了联系人。我希望将错误消息显示在表单本身上。我只是不知道该怎么做，也找不到可以在我的代码中实现的在线解决方案。

你们中的任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:46:39.910

You need to post the HTML form back to itself. Then at the top of the form page, you need an if statement that does a check like this:

```
if(isset($_POST['submit'])) {
 //do validation
 //$errorMessage = "whatever message you want to show the user"
 if ($errors == 0){
  /* Redirect visitor to the thank you page */
  header('Location: thanks.htm');
  exit();
 }
} 
```

and when displaying the form:

```
if(isset($errorMessage))
  print $errorMessage; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:45:13.547

You might like to make the following changes:

`alert(<?php echo $myError; ?>);`

to

`<?php echo $myError; ?>`

# regex - ASP.NET MVC 自定义路由正则表达式以捕获项目的子字符串并检查它们是否存在

> ID：10294325
> 
> 赞同：3
> 
> 时间：2012-04-24T08:26:59.030
> 
> 标签：regex, asp.net-mvc, routing

我正在尝试使用以下格式为 URL 创建自定义路由：

> [http://domain/nodes/](http://domain/nodes/) {item_1}/{item_2}/{item3_}/..../{item_[n]}

基本上，可能会有随机数量的 item_[n]，例如

```
http://domain/nodes/1/3/2 

http://domain/nodes/1

http://domain/nodes/1/25/11/45 
```

使用我的自定义路由，我想检索一组项目并使用它们执行一些逻辑（验证并添加一些特定信息以请求上下文）。

例如从 [http://domain/nodes/1/25/11/45] 我想得到一个 [1, 25, 11, 45] 的数组并处理它。

所以，我在这里有两个问题。

第一个实际上是一个问题。我在寻找正确的方向吗？或者可能有更简单的方法来实现这一点（可能没有自定义路线）？

第二个问题是将传入的 url 与正则表达式模式匹配。有人可以帮我吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:48:58.537

为了解决您的问题，我认为一种方法可能是创建一个路由类，然后根据需要处理参数。

```
 public class CustomRouting : RouteBase
  {
     public override RouteData GetRouteData(HttpContextBase httpContext)
     {
       RouteData result = null;
       var repository = new FakeRouteDB(); //Use you preferred DI injector
       string requestUrl = httpContext.Request.AppRelativeCurrentExecutionFilePath;
       string[] sections = requestUrl.Split('/');
       /*
       from here you work on the array you just created
       you can check every single part
       */
       if (sections.Count() == 2 && sections[1] == "")
         return null; // ~/

       if (sections.Count() > 2) //2 is just an example
       {
         result = new RouteData(this, new MvcRouteHandler());
         result.Values.Add("controller", "Products");
         result.Values.Add("action", "Edit");
         result.Values.Add("itmes0", sections[1]);
         if (sections.Count() >= 3)
         result.Values.Add("item2", sections[2]);
         //....
       }
       else
       {
         //I can prepare a default route        
         result = new RouteData(this, new MvcRouteHandler());
         result.Values.Add("controller", "Home");
         result.Values.Add("action", "Index");
       }
       return result;
    }

    public override VirtualPathData GetVirtualPath(RequestContext requestContext, RouteValueDictionary values)
    {
     //I just work with outbound so it's ok here to do nothing
     return null;
    }
} 
```

在 global.asax

```
public static void RegisterRoutes(RouteCollection routes)
{
  routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

  routes.Add(new CustomRouting());

  routes.MapRoute("Default", "{controller}/{action}/{id}", new { controller = "Home", action = "Index", id = UrlParameter.Optional });
} 
```

这应该让您对我的想法有所了解。希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T12:36:57.643

我无法帮助您解决问题的第一部分，但我可以尝试创建正则表达式。

在您的示例中，所有项目都是数字 - 这是唯一的选择吗？如果没有，请提供有关可能字符的更多信息。

现在正则表达式是：

```
@"http://domain/nodes(?:/(\d+))*" 
```

`(?:)`是非捕获组，`()`是捕获组。
如果您匹配所有出现，那么您最终会得到 groups `1-n`，其中每个组将包含匹配的数字（组号 0 将是整个匹配）。

# mysql - 麻烦在drupal 7中将日期表单插入mysql

> ID：10294328
> 
> 赞同：0
> 
> 时间：2012-04-24T08:27:30.280
> 
> 标签：mysql, drupal, drupal-7

嗨，我在将日期从 drupal 插入到 mysql 时遇到了一点麻烦，这是我正在尝试的代码

```
.....
$form['kotak']['tgl'] = array(
'#type' => 'date',
'#title' => t('Tanggal'),
);
.....
function awal_form_submit($form,&$form_state){
global $user;
$entry = array(
 'tanggal'  => $form_state['values']['tgl'],
);
$tabel = 'jp_1';
$return = insert_form($entry,$tabel);
}
.....
function insert_form($entry,$tabel){
$return_value = NULL;
try {
 $return_value = db_insert($tabel)
                ->fields($entry)
                ->execute();    
}
..... 
```

每次我提交时，都会出现这样的错误代码

> db_insert 失败。消息 = SQLSTATE [21S01]：插入值列表与列列表不匹配：1136 列计数与第 1 行的值计数不匹配，查询 = INSERT INTO {jp_1}（tanggal）值（：db_insert_placeholder_0_month，：db_insert_placeholder_0_day，：db_insert_placeholder_0_year）

有什么建议或更正吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:06:54.990

我终于找到了答案，我只需要下载“日期”模块并激活它的“日期 API”。这里的代码

```
.....
$datex = '2005-1-1';
$format = 'Y-m-d';
$form['kotak']['tgl'] = array(
'#type' => 'date_select',
'#default_value' => $datex,
'#date_format' => $format,
'#date_year_range' => '-10:+30', 
'#title' => t('Tanggal'),
);
.....
function awal_form_submit($form,&$form_state){
global $user;
$entry = array(
 'tanggal'  => $form_state['values']['tgl'],
);
$tabel = 'jp_1';
$return = insert_form($entry,$tabel);
}
.....
function insert_form($entry,$tabel){
$return_value = NULL;
try {
 $return_value = db_insert($tabel)
                ->fields($entry)
                ->execute();    
}
..... 
```

现在我交付给mysql没有问题。希望这会帮助像我这样的其他 drupal 新手开发人员。感谢：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:46:02.640

从 mysql 错误看来，您创建的表具有必填字段（a columns Null 属性设置为 0，这意味着您要插入的每一行的 tha 列必须有一个值）

检查是否有任何将 null 设置为 0 的列。

从您的示例中，我看不到您要实现的目标，但是在许多情况下，没有必要手动写入 db 表（使用 db_insert()），因为您可以通过创建内容类型（节点type) 为您处理很多功能。我希望这会有所帮助，马丁

# java - 最大堆内存单个进程允许使用给定的内存大小？

> ID：10294332
> 
> 赞同：1
> 
> 时间：2012-04-24T08:27:52.493
> 
> 标签：java, jvm, heap-memory

堆是 RAM 的一部分。但是仍然有一个限制，我们不能定义超出 RAM 的某个百分比的堆大小。例如：- 我有 32 位 winodws xp 操作系统和 4 GB RAM。但我不能声明堆大小超过 1600 MB。**我在这里的问题是为什么我们不能将堆大小声明为某个比我的 4GB RAM 低的大值，比如 3GB（因为在 32 位中最多可以使用 4gb 的 RAM）？这适用于单个进程。**

我的意思是我可以启动两个 tomcat 或任何其他 java 进程，为每个进程分配 1600MB 堆大小，但我不能为单个进程分配 3200MB。这背后的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:32:09.247

32 位 Windows 仅允许单个进程使用 2GB 的地址空间（未启用特殊扩展）。操作系统为自己保留另外 2GB。然后在该堆之上并不是 JVM 需要的所有内存。有 permgen 空间，以及 JVM 本身的代码使用的内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:32:14.910

如果不是 64 位，则无法分配 4GB。

# spring - 如何为连接表中的其他属性创建多对多 Hibernate 映射？

> ID：10294338
> 
> 赞同：19
> 
> 时间：2012-04-24T08:28:16.693
> 
> 标签：spring, hibernate, hibernate-mapping

我需要一个多对多的休眠映射，需要 3 个连接。我试图找出一个没有中间实体的解决方案，比如`LecturerCourse`.

我的数据库中的讲师和课程表之间存在多对多关系。一个课程可以由多个讲师讲授，而一个讲师可以讲多个课程。

我有预先存储的课程。但是，我需要将课程分配给讲师。当我分配课程时，我还会存储该课程的容量。

我的数据库图：

![在此处输入图像描述](../Images/1a7999d0146db1228a6f860d5662dbdd.png)

我使用休眠和弹簧。当课程分配任何讲师时，我需要一个休眠映射。我需要向容量字段添加值。

我的讲师映射：

```
@Entity
@Table(name="LECTURER")
public class Lecturer {

    @Id 
    @GeneratedValue(strategy=GenerationType.SEQUENCE, generator="LECTURER_ID_SEQ")
    @SequenceGenerator(name="LECTURER_ID_SEQ", sequenceName="LECTURER_ID_SEQ")
    private Long Id;

    @Column(name="NAME")
    private String name;

    @Column(name="SURNAME")
    private String surname;

    @Column(name="EMAIL")
    private String email;

    @Column(name="USERNAME")
    private String username;

    @Column(name="PASSWORD")
    private String Password;

    @ManyToMany
    @JoinTable(
          name="LECTURER_COURSE",
          joinColumns=@JoinColumn(name="LECTURER_ID"),
          inverseJoinColumns=@JoinColumn(name="COURSE_ID")
      )
    private List<Course> courses;

    //getters - setters
} 
```

我的课程映射：

```
@Entity
@Table(name="COURSE")
public class Course {

    @Id 
    @GeneratedValue(strategy=GenerationType.SEQUENCE, generator="COURSE_ID_SEQ")
    @SequenceGenerator(name="COURSE_ID_SEQ", sequenceName="COURSE_ID_SEQ")
    private Long id;

    @Column(name="NAME")
    private String name;

    @Column(name="CODE")
    private String code;
} 
```

知道如何解决我的问题吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-24T15:51:48.067

您需要使用`@EmbeddedId`和`@Embeddable`注释来解决此问题：

讲师班：

```
@Entity
@Table(name="LECTURER")
public class Lecturer {

@OneToMany(fetch = FetchType.LAZY, mappedBy = "pk.lecturer", cascade=CascadeType.ALL)
Set<LecturerCourse> lecturerCourses == new HashSet<LecturerCourse>();

//all others properties Setters and getters are less relevant.

} 
```

课程类别：

```
@Entity
@Table(name="COURSE")
public class Course {

@OneToMany(fetch = FetchType.LAZY, mappedBy = "pk.course", cascade=CascadeType.ALL)
Set<LecturerCourse> lecturerCourses == new HashSet<LecturerCourse>();

//all others properties Setters and getters are less relevant.

} 
```

讲师课程：

```
@Entity
@Table(name = "lecturer_course")
@AssociationOverrides({
        @AssociationOverride(name = "pk.lecturer", 
            joinColumns = @JoinColumn(name = "LECTURER_ID")),
        @AssociationOverride(name = "pk.course", 
            joinColumns = @JoinColumn(name = "COURSE_ID")) })
public class LecturerCourse {

    private LecturerCourseID pk = new LecturerCourseID();

    @Column(name = "CAPACITY", nullable = false, length = 10)
    private String capacity;

    @EmbeddedId
    public LecturerCourseID getPk() {
        return pk;
    }

} 
```

现在主键：

```
@Embeddable
public class LecturerCourseID implements java.io.Serializable {

    private Lecturer lecturer;
    private Course course;

    @ManyToOne
    public Stock getLecturer() {
        return lecturer;
    }

    public void setLecturer(Lecturer lecturer) {
        this.lecturer= lecturer;
    }

    @ManyToOne
    public Course getCourse() {
        return course;
    }

    public void setCourse(Course course) {
        this.course= course;
    }

} 
```

现在你的 Main 应该是这样的：

```
Lecturer lecturer1 = new Lecturer();
Course math = new Course();
LecturerCourse lecturer1math  = new LecturerCourse();
lecturer1math.setCapacity("capacity");
lecturer1math.setLecturer(lecturer1);
lecturer1math.setCourse(math);
lecturer1.getLecturerCourses().add(lecturer1math);

//saving object
session.save(lecturer1); 
```

您需要确保标记为的类`@Embeddable`应该实现`Serializable`标记接口。

希望能帮助到你。

# django - 模拟文件数据以测试表单的正确方法是什么？

> ID：10294341
> 
> 赞同：5
> 
> 时间：2012-04-24T08:28:48.127
> 
> 标签：django, django-forms, django-file-upload

我正在尝试测试一个自写的 FormField AudioFileFormField，它会在存储文件之前检查文件是否为音频文件。为此，我已经覆盖了 to_python 方法。试图测试这个 FormField 我遇到了一些困难。

到目前为止，这是我的测试用例：

```
from django import forms
from django.core.files.uploadedfile import SimpleUploadedFile
from django.test import TestCase

class TestAudioFileFormField(TestCase):
    """ test the formfield to use for AudioFile Uploads """

    class TestForm(forms.Form):
        audiofilefield = AudioFileFormField()

    def setUp(self):

        self.AUDIOFILE_TEST_ROOT = os.path.dirname(__file__) + '/data/'
        self.files = audiofile_files

    def test_to_python(self):
        """ assign some files to a form and validate the form """

        f = file(self.AUDIOFILE_TEST_ROOT + self.files[0]) 
        file_data = {'audiofilefield':SimpleUploadedFile( self.files[0],f.read() )}
        data = {}

        form = self.TestForm(data,f)
        form.is_valid() 
```

form.is_valid() 行引发 AttributeError: 'file' object has no attribute 'get'

当我在 form.is_valid() 之前插入调试跟踪时，这就是我在该交互式会话中得到的：

```
ipdb> form.is_valid()
AttributeError: 'file' object has no attribute 'get'
ipdb> suf = file_data['audiofilefield']
ipdb> suf
<SimpleUploadedFile: invalid_format.mp3 (text/plain)>
ipdb> dir(suf)
[lots of info here]
ipdb> form.is_valid()
True 
```

我在交互式会话中到底做了什么更改，以便表单验证正常工作？将文件传递给 SimpleUploadedFile 以避免 AttributeError 的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T13:43:13.353

好吧，一个新的外观可以很有价值。这是我的新 test_to_python 测试，这次它有效：

```
def test_to_python(self):
    f = file(self.AUDIOFILE_TEST_ROOT + self.files[0])
    file_data = {'audiofilefield':SimpleUploadedFile(self.files[0],f.read())}
    data = {}
    form = self.TestForm(data,file_data)
    self.assertTrue( form.is_valid() ) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-31T10:42:48.037

替代解决方案（因为这个问题是“Django 测试模拟上传”的最高 Google 结果）：Django 的内置测试客户端接受打开的文件对象作为 POST 数据：

```
# the form
class TestForm(forms.Form):
    audiofilefield = AudioFileFormField()

# the view
def upload_view(request):
    form = TestForm(data=request.POST or None, files=request.FILES or None)
    if request.method == 'POST':
         if form.is_valid():
              return HttpResponse('success')
         else:
              return HttpResponse('fail')

# the test function
class UploadTest(TestCase):
    def test_upload(self):
        c = Client() # django.test.client.Client
        formdata = {}
        with open('/my/audiofile.mp3', 'rb') as f:
            formdata['audiofilefield'] = f
            response = c.post('/my-test-view/', formdata) 
```

# php - 无法通过 facebook 应用程序建立与 localhost 的连接

> ID：10294342
> 
> 赞同：1
> 
> 时间：2012-04-24T08:29:00.480
> 
> 标签：php, facebook, localhost

我创建了一个新的 Facebook 应用程序，并使用以下 url 作为画布 url [http://localhost/my_app/](http://localhost/my_app/) 我的代码在 localhost 上完美运行，但是当我尝试使用以下 url 调用我的应用程序时：apps.facebook.com/ leenaaps 显示以下错误：

> 无法连接
> Firefox 无法在 localhost 上建立与服务器的连接

究竟是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:33:44.640

您很可能没有运行本地网络服务器。如果您这样做了，Facebook 可能会使用`https://`但您没有配置/启用 SSL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:44:52.060

localhost is resolved to ip 127.0.0.1 and this is the local loopback address whcih means it is not routable and cannot be accessed from the internet, So you cannot use it in your canvas url.

You have to use a valid and active domain name like domain.com. If you don't have a public web server you may use some DDNS service, google it some are free

# windows - Windows 调度程序 Groovy 脚本

> ID：10294344
> 
> 赞同：1
> 
> 时间：2012-04-24T08:29:09.047
> 
> 标签：windows, groovy

如何安排 groovy 脚本每小时运行一次？我有 groovy_home 作为 C:\groovy 和路径我有 %GROOVY_HOME%\bin。在任务调度程序中，动作启动一个程序 - “groovy C:\Users\Adrian\Desktop\mPest\scripts\WeatherScript.groovy” 我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T08:32:47.643

如果你有`%GROOVY_HOME%\bin`你的`%PATH%`，你应该能够告诉它运行`groovy path\to\script.groovy`

那不行吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-04T20:34:12.433

我倾向于将 Start in 选项设置为包含 Groovy 脚本的文件夹，并且我使用脚本名称作为参数。

此外，就我而言，我不是 Windows 实例的系统管理员之一，因此我没有在我的 %PATH 上设置 %GROOVY_HOME%\bin ，而是将 groovy.bat 的完整路径称为程序/脚本。如果您的路径包含 Groovy 二进制目录的路径，则可能只使用“groovy”，但我的答案不会包含它。

任务计划程序中操作的完整设置：程序/脚本：F:\apache-groovy-binary-2.5.3\groovy-2.5.3\bin\groovy.bin（或只是“groovy”或 Groovy 的完整路径二进制文件夹）添加参数：*Groovy 脚本的名称*（不包括 .groovy） 开始于：*groovy 脚本所在文件夹的路径*

# c++ - 用于渲染 3d 球体的纹理坐标

> ID：10294345
> 
> 赞同：1
> 
> 时间：2012-04-24T08:29:18.423
> 
> 标签：c++, opengl, geometry, texture-mapping

我正在使用`GL_QUAD_STRIP`图元绘制一个 3d 球体，它可以工作，但我不知道如何设置纹理坐标。

我有一定数量的`division`将我的球体分成相等数量的纬度和经度。因此，球体的顶点使用如下划分来近似

```
 float x, y, z, dTheta=180/divisions, dLon=360/divisions, degToRad=3.14/180 ;

    for(float lat =0 ; lat <=180 ; lat+=dTheta)
    {
        glBegin( GL_QUAD_STRIP ) ;
        for(float lon = 0 ; lon <=360; lon+=dLon)
        {  

            x = r*cosf(lat * degToRad) * sinf(lon * degToRad) ;
            y = r*sinf(lat * degToRad) * sinf(lon * degToRad) ;
            z = r*cosf(lon * degToRad) ;

            glNormal3f( x, y, z) ;
            glVertex3f( x, y, z ) ;

            x = r*cosf((lat + dTheta) * degToRad) * sinf(lon * degToRad) ;
            y = r*sinf((lat + dTheta) * degToRad) * sinf(lon * degToRad) ;
            z = r*cosf( lon * degToRad ) ;

            glNormal3f( x, y, z ) ;
            glVertex3f( x, y, z ) ;
        }
        glEnd() ;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:55:09.020

如果您使用标准扭曲的球体纹理（如通常的地球地图），则应使用纹理坐标（如（lat/180, lon/360）），即范围 [0..1] 内的归一化值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:30:28.737

添加新变量：

```
float texX = 0.0;
float texy = 0.0;
float dTex = 1/ divisions; 
```

然后将 then 添加到循环中： float x, y, z, dTheta=180/divisions, dLon=360/divisions, degToRad=3.14/180 ;

```
for(float lat =0 ; lat <=180 ; lat+=dTheta, texX += dTex)
{
    texY = 0.0;
    glBegin( GL_QUAD_STRIP ) ;
    for(float lon = 0 ; lon <=360; lon+=dLon, texY += dTex )
    {  

        x = r*cosf(lat * degToRad) * sinf(lon * degToRad) ;
        y = r*sinf(lat * degToRad) * sinf(lon * degToRad) ;
        z = r*cosf(lon * degToRad) ;

        glNormal3f( x, y, z) ;
        glTexCoord2f( texX, texY );
        glVertex3f( x, y, z ) ;
    }
    glEnd() ;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T08:07:06.643

好的，问题是我只绘制了 2 个顶点并且`GL_QUAD_STRIP`需要 4 个。下面的代码现在已经正确设置了两个顶点并且纹理工作

```
 double x, y, z, dTheta=180/divisions, dLon=360/divisions, degToRad=3.141592665885/180 ;

    for(double lat =0; lat <=180; lat+=dTheta)
    {

        glBegin( GL_QUAD_STRIP ) ;
        for(double lon =0 ; lon <=360 ; lon+=dLon)
        {  

            //Vertex 1
            x = r*cos(lon * degToRad) * sin(lat * degToRad) ;
            y = r*sin(lon * degToRad) * sin(lat * degToRad) ;
            z = r*cos(lat * degToRad) ;
            glNormal3d( x, y, z) ;
            glTexCoord2d(lon/360-0.25, lat/180);
            glVertex3d( x, y, z ) ;

            //Vetex 2
            x = r*cos(lon * degToRad) * sin( (lat + dTheta)* degToRad) ;
            y = r*sin(lon * degToRad) * sin((lat + dTheta) * degToRad) ;
            z = r*cos( (lat + dTheta) * degToRad ) ;
            glNormal3d( x, y, z ) ;
            glTexCoord2d(lon/360-0.25, (lat + dTheta-1)/(180)); 
            glVertex3d( x, y, z ) ;

            //Vertex 3
            x = r*cos((lon + dLon) * degToRad) * sin((lat) * degToRad) ;
            y = r*sin((lon + dLon) * degToRad) * sin((lat) * degToRad) ;
            z = r*cos((lat) * degToRad ) ;
            glNormal3d( x, y, z ) ;
           glTexCoord2d((lon + dLon)/(360)-0.25 ,(lat)/180);
             glVertex3d( x, y, z ) ;

            //Vertex 4
            x = r*cos((lon + dLon) * degToRad) * sin((lat + dTheta)* degToRad) ;
            y = r*sin((lon + dLon)* degToRad) * sin((lat + dTheta)* degToRad) ;
            z = r*cos((lat + dTheta)* degToRad ) ;
            glNormal3d( x, y, z ) ;
            glTexCoord2d((lon + dLon)/360-0.25, (lat + dTheta)/(180));
             glVertex3d( x, y, z ) ;

        }
        glEnd() ;

    } 
```

希望被卡住的人可能会发现这很有用。

# mysql - 加入职位

> ID：10294346
> 
> 赞同：2
> 
> 时间：2012-04-24T08:29:19.657
> 
> 标签：mysql, sql, database, join

我有表`baskets`，`fruits`和`basket_fruits`（连接表：）`basket_id-fruit_id`。

我怎样才能返回篮子中每个水果的位置，这样我会得到类似的东西

```
+---------------------------------------+
| basket_id | fruit_id | fruit_position |
|---------------------------------------|
| 1         | 2        | 1              |
| 1         | 5        | 2              |
+---------------------------------------+ 
```

水果位置只是返回的连接表中的行数（它不是列）。

```
Schema:
baskets:       id, title
fruits:        id, title
basket_fruits: id, basket_id, fruit_id 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T08:36:08.653

`MySQL`不支持测距功能，因此您必须使用子查询：

```
SELECT  basket_id, fruit_id,
        (
        SELECT  COUNT(*)
        FROM    basket_fruit bfi
        WHERE   bfi.basket_id = bf.basket_id
                AND bfi.fruit_id <= bf.fruit_id
        ) AS fruit_position
FROM    basket_fruit bf
WHERE   basket_id = 1 
```

或使用会话变量（更快，但依赖于未记录的实现细节，可能会在未来的版本中中断）：

```
SET @rn = 0;

SELECT  basket_id, fruit_id, @rn := @rn + 1 AS fruit_position
FROM    basket_fruit bf
WHERE   basket_id = 1
ORDER BY
        fruit_id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T09:08:39.810

我在表中没有看到任何`basket_fruits`我认为可加权的列。如果您只是想在该表中的数据中添加一些数字，您可以试试这个（这允许每个篮子有自己的*权重*从 1 开始计数）：

```
SET @current_group = NULL; 
SET @current_count = NULL;

SELECT 
id, basket_id, fruit_id,
CASE 
    WHEN @current_group  = basket_id THEN @current_count := @current_count + 1 
    WHEN @current_group := basket_id THEN @current_count := 1 
END AS fruit_position
FROM basket_fruits
ORDER BY basket_id, id 
```

样本输入：

```
+----+-----------+----------+
| id | basket_id | fruit_id |
+----+-----------+----------+
|  2 |         2 |        5 |
|  6 |         2 |        1 |
|  9 |         1 |        2 |
| 15 |         2 |        3 |
| 17 |         1 |        5 |
+----+-----------+----------+ 
```

样本输出：

```
+----+-----------+----------+----------------+
| id | basket_id | fruit_id | fruit_position |
+----+-----------+----------+----------------+
|  9 |         1 |        2 |              1 |
| 17 |         1 |        5 |              2 |
|  2 |         2 |        5 |              1 |
|  6 |         2 |        1 |              2 |
| 15 |         2 |        3 |              3 |
+----+-----------+----------+----------------+ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T08:37:23.067

SQL 不保证返回行的顺序。因此`fruit_position`，在不时查询时可能会有所不同。这很可能是由于您的桌子上的 DML 活动而发生的。

如果你真的需要一些订购，你应该选择：

1.  使用现有列作为排序键，如水果名称（如果存在）
2.  创建一个特殊字段，这样`seq_nr`将指定您的水果的顺序。

# backbone.js - 如何连接更改模型中的某些字段以反映视图？

> ID：10294349
> 
> 赞同：2
> 
> 时间：2012-04-24T08:29:32.603
> 
> 标签：backbone.js

如何连接更改模型中的某些字段以反映视图？我有一个持有字体粗细的模型，并且我在视图中看到了该模型，但是如何连接模型中**字体粗细**字段的更改以从视图中反映**el**？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T11:52:41.660

有几种方法可以在这里应用，具体取决于您想要变得多么精致。

### 1\. 模型更改时重新渲染整个视图

```
initialize: function(){
  this.model.on( "change", this.render, this );
} 
```

### 2.更精确，只重新渲染需要的东西

```
initialize: function(){
  this.model.on( "change:title", this.renderTitle, this );
  this.model.on( "change:body", this.renderBody, this );
  this.model.on( "change:fontWeight", this.renderFontWeight, this );
} 
```

这需要作为外科医生修改 DOM 的最小渲染方法公司：

```
renderTitle: function(){
  this.$el.find( "h1" ).html( this.model.get( "title" ) );  
},

renderBody: function(){
  this.$el.find( "p" ).html( this.model.get( "body" ) );  
},

renderFontWeight: function(){
  this.$el.find( "p" ).css( "font-weight", this.model.get( "fontWeight" ) );
} 
```

### 3.对模型的每个部分使用子视图

我没有为这种方法提供任何示例，因为实现可能更复杂。试想一下，您的实际`View`实例是几个`SubViews`，一个用于`title`，另一个用于`body`，依此类推。每一个都有自己的`render`并绑定了其具体`Model`属性的变化以及该属性`re-render`何时发生变化。

您可以检查[方法 1\. 和 2 的工作 jsFiddle 代码。](http://jsfiddle.net/fguillen/n9Hvf/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T10:34:43.777

尝试这个：

```
var Font = {};

Font.Model = Backbone.Model.extend({

    defaults: {
        font_family: 'Arial, Helvetica, sans-serif',
        font_size:   12,
        font_weight: 'normal'
    }
});

Font.View = Backbone.View.extend({

    initialize: function() {

        var this_view = this;

        this.model.bind('change:font_weight', function(model) {

            // Do something with this_view.el
            alert('handle the font-weight change');

        });
    }
});

var myFontModel = new Font.Model();

var myFontView = new Font.View({
    model: myFontModel
});

myFontModel.set({font_weight: 'bold'}); 
```

# algorithm - 我如何衡量我的算法的预测能力？

> ID：10294351
> 
> 赞同：2
> 
> 时间：2012-04-24T08:29:36.003
> 
> 标签：algorithm, prediction

我的算法为给定的氨基酸序列预测了几个可测量的特性。现在给出一个包含真实测量值和我的值的表格，我如何计算我的算法的执行情况？

例子：

```
Sequence Property1 Prediction1 
seq1     3l.4      35.0         |Prediction matches well
seq2     23.4      79.9         |Prediction was off
seq3     20.0      20.3         |Prediction as super 
```

==> 算法表现不错。

有没有办法量化这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:41:58.510

是的，创建一个质量指数。

最简单的方法是最小二乘法——计算结果与测量值之间的差异，将其平方，然后对平方求和。除以值的数量。然后的平方根为您提供标准误差范数。

但是，这假设为所有测量获得正确答案同样重要。如果有些比其他更重要，那么您应该在总和中权衡它们。

试着问自己一个问题，什么会比你上面的答案糟糕一倍。将所有错误翻倍？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:38:24.693

如果只是弄清楚两个值（`Property1`vs `Prediction1`）的接近程度，您可以执行以下操作：

```
Sequence Property1 Prediction1 Diff
seq1     3l.4      35.0         3.6  | Prediction matches well
seq2     23.4      79.9        56.5  | Prediction was off
seq3     20.0      20.3         0.3  | Prediction as super 
```

并根据列决定在该行上放置什么“等级” `Diff`。

在代码中，它看起来像：

```
diff = abs(Property1 - Prediction1)

if (diff < 1.0)        Prediction was super
else if (diff < 5.0)   Prediction matches well
else if (diff < ...)   ...
else                   Prediction was off 
```

如果您有完整的值序列（例如完整的`diff`值列），并且您想查看整个预测是否匹配良好，那么您可以计算这些值的[标准偏差](http://en.wikipedia.org/wiki/Standard_deviation)。之后，只需量化您愿意接受的偏差有多大。

# php - Facebook连接注销仍然显示用户

> ID：10294353
> 
> 赞同：1
> 
> 时间：2012-04-24T08:29:58.920
> 
> 标签：php, facebook, cookies

我正在使用以下代码，这很奇怪 - 当我注销时，如果我尝试实际返回 facebook，我不能，但我下面的代码没有注册我已注销并且仍会显示我的 facebook 用户 ID

```
include '/home/php_/lib/fb_libs/facebook.php';

$facebook = new Facebook(array(
  'appId'  => '123456789',
  'secret' => 'abcdefghilk',
  'cookie' => true
));

$user = $facebook->getUser();

echo "user id is $user"; 

if ($user){

    try { $user_profile = $facebook->api('/me'); }

    catch (FacebookApiException $e) { echo $e->getMessage(); }
}

if ($user)
{
    $logoutURL = $facebook->getLogoutURL();
    echo "<a href='$logoutURL'>Log out </a>";
}

else 
{
    $loginURL = $facebook->getLoginURL(array(
        'scope' => 'publish_stream,read_friendslists'
    ));
    echo "<a href='$loginURL'>Log in </a>";
} 
```

我知道还有其他方法，例如 FB.getLoginStatus() 所以这不是一个重复的问题，但是为什么，当这是在 github facebook SDK 上时，它不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T08:44:54.623

I think your cookie is causing the problem try not setting the cookie.

# c# - 如何每天一次在准确的时间执行动作

> ID：10294359
> 
> 赞同：1
> 
> 时间：2012-04-24T08:30:21.933
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, scheduling

我必须每天执行一次操作。如果他们自己没有完成，这是最终用户的工作时间。

用户可以通过单击 Controller 中执行 ActionResult 的按钮来结束他们的时间：

```
[HttpPost] 
[Authorize] 
public ActionResult EndWork(...) 
{ 
    ... 
} 
```

我怎样才能每天午夜自动运行这样的动作？我必须为此使用任务计划程序或 Windows 服务吗？我无法在数据库上设置触发器，因为 EndWork() 将记录插入到数据库中。我有一个 MVC 3 网站。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:38:07.727

您可以使用以下内容：

1.  编写一个 Windows 服务来监视您的数据库并执行操作。

2.  有关调度，请参阅[Quartz .Net](http://quartznet.sourceforge.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T08:39:44.217

您可以使用诸如[Quartz.NET 之](http://quartznet.sourceforge.net/)类的东西来安排事件。您可以在[此处](http://quartznet.sourceforge.net/tutorial/index.html)查看如何开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T08:50:11.543

你不能只使用 Windows 计划任务 - 创建一个 *.exe 并将任务设置为每晚午夜运行 exe 吗？或者将计划任务指向一个 bat 文件，该文件启动一个脚本来执行您需要的操作？

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-04-24T08:33:01.197

您可以使用 if 语句。将它与计时器一起使用，以便它检查一天中的当前时间，如果满足条件，则执行您分配给它的任何操作。

# c++ - 运行时错误 -f1.exe 不存在或不是可执行文件

> ID：10294360
> 
> 赞同：2
> 
> 时间：2012-04-24T08:30:24.583
> 
> 标签：c++, multithreading, wxwidgets

我有一个项目在清理和构建它成功构建的项目时使用 C++ 中的线程但是当我运行项目时它会弹出以下错误：

> C:\repos\trunk\logging\build\Debug\MinGW_1-Windows\tests\TestFiles\f1.exe 不存在或不是可执行文件。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:52:21.677

[已解决] 错误：“不存在或不可执行”

菜单栏 -> 运行 -> 设置项目配置 -> “发布”。

以前是“调试”，这对我有用。希望也能为其他人工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:05:30.747

“当我运行项目时”

这是什么意思？您是否通过单击 IDE 中的按钮来运行项目？如果是这样，您需要找出 IDE 认为您的项目可执行文件是什么。（如何做到这一点取决于您未提及的 IDE。）

就像您已经构建了项目的调试版本一样。你试过在调试器下运行它吗？

# .net - LINQ-to-SQL：与触发器相同的引用约束

> ID：10294362
> 
> 赞同：0
> 
> 时间：2012-04-24T08:30:30.403
> 
> 标签：.net, sql-server, linq-to-sql, triggers

我有一个在我的 SQL Server 数据库中引用自身的表，我将它与 LINQ-to-SQL 一起使用。

我在这个表上创建了一个触发器来处理行的删除。

```
ALTER TRIGGER [dbo].[TrgDeleteCalculation]
ON [dbo].[Calculation]
INSTEAD OF DELETE
AS 
BEGIN
    DELETE FROM Calculation WHERE CalcParentId IN (SELECT CalculationId FROM deleted)
    DELETE FROM Calculation WHERE CalculationId IN (SELECT CalculationId FROM deleted)
END 
```

当我尝试在 DataModel 中执行删除时会出现问题。

当我这样做时，出现以下异常：DELETE 语句与 SAME TABLE REFERENCE 约束“FK_calculations_calculations”冲突。冲突发生在数据库“DesignDb”、表“dbo.Calculation”、列“CalcParentId”中。该语句已终止。

我怀疑触发器没有被触发...

是这样吗，还是其他原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T21:06:14.630

看起来您在第一个删除查询中删除的一个子记录是另一个子行的父行。

看看这篇文章：

[自引用外键约束和删除](https://stackoverflow.com/questions/5416926/self-referencing-foreign-key-constraints-and-delete)

# android - ACTION_SEND 强制使用电子邮件发送

> ID：10294363
> 
> 赞同：9
> 
> 时间：2012-04-24T08:30:38.593
> 
> 标签：android, email, android-intent

每次我创建从我的应用程序发送电子邮件的操作时，它都会提示许多选项，包括 QR 客户端...

有没有办法只通过电子邮件客户端强制发送？

**发送电子邮件的代码**

```
String rec[] = { owner.email };
i = new Intent(Intent.ACTION_SEND);
i.setType("text/plain");
i.putExtra(android.content.Intent.EXTRA_EMAIL, rec);
i.putExtra(android.content.Intent.EXTRA_SUBJECT, "RE: " + desc);
i.putExtra(android.content.Intent.EXTRA_TEXT,
        "\n\n\nSent from Mojo for Android");
startActivity(i); 
```

**当我启动它时会发生什么的屏幕截图** ![截屏](../Images/15fd7f03887757620cf6af9d8c1973fa.png)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-24T08:35:24.193

尝试 setType`message/rfc822`而不是`text/plain`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T08:35:36.920

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
emailIntent.setType("text/html");
emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL,
new String[] { "abc@xyz.com" });
emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,
                    "Subject of the Mail");
emailIntent.putExtra( android.content.Intent.EXTRA_TEXT,
                           "This is my sample Mail");
emailIntent.setType("vnd.android.cursor.dir/email");
startActivity(Intent.createChooser(emailIntent, "Email:")); 
```

否则使用它只会显示邮件客户端，

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
emailIntent.setType("message/rfc822");
emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL,
new String[] { "abc@xyz.com" });
emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,
                    "Subject of the Mail");
emailIntent.putExtra( android.content.Intent.EXTRA_TEXT,
                           "This is my sample Mail");
//emailIntent.setType("vnd.android.cursor.dir/email");
startActivity(Intent.createChooser(emailIntent, "Email:")); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-24T08:35:35.967

我认为你应该`setType`改变

```
i.setType("message/rfc822") ; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-01-10T22:18:36.910

尽管对于@thepoosh 来说为时已晚，但它可能对未来的提问者有所帮助。经过大量的搜索和测试，我终于找到了一个好的解决方案。感谢开源开发者[**cketti**](https://gist.github.com/cketti)分享他/她的简洁解决方案。

```
String mailto = "mailto:bob@example.org" +
    "?cc=" + "alice@example.com" +
    "&subject=" + Uri.encode(subject) +
    "&body=" + Uri.encode(bodyText);

Intent emailIntent = new Intent(Intent.ACTION_SENDTO);
emailIntent.setData(Uri.parse(mailto));

try {
  startActivity(emailIntent);
} catch (ActivityNotFoundException e) {
  //TODO: Handle case where no email app is available
} 
```

[这](https://gist.github.com/cketti/6a9b67dd92540bc74b2e#file-emailintent-java)是他/她的要点的链接。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-07-23T14:17:45.123

它将显示安装在 android 手机上的所有可用应用程序，这些应用程序可以执行共享或从 webview 向其他人发送链接。喜欢 - Gmail、facebook、imo、whatsapp、messenger 等。

```
Intent intent = new Intent(Intent.ACTION_SEND);
intent.setType("text/plain");
String shareLink = webView.getUrl();
intent.putExtra(Intent.EXTRA_TEXT, shareLink);
startActivity(Intent.createChooser(intent, "Share via...")); 
```

但是，当您仅强制打开邮件应用程序时：

```
Intent intent = new Intent(Intent.ACTION_SENDTO);
intent.setData(Uri.parse("mailto:"));
intent.putExtra(Intent.EXTRA_EMAIL, new String[]{"something@gmail.com"});

try {
    startActivity(Intent.createChooser(intent, "send mail"));
} catch (ActivityNotFoundException ex) {
    Toast.makeText(this, "No mail app found!!!", Toast.LENGTH_SHORT);
} catch (Exception ex) {
    Toast.makeText(this, "Unexpected Error!!!", Toast.LENGTH_SHORT);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-24T08:36:07.653

只要您使用`ACTION_SEND`with type `text/plain`，它就会显示所有有效选项。但是，如果您愿意，您可以设计自己的对话窗口，通过以编程方式进行过滤，仅显示 Gmail 或其他邮件客户端。

顺便说一句，当您只想使用 Gmail 时，为什么还需要这个窗口？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-24T08:39:40.617

```
Intent intent = new Intent();
intent.setAction(Intent.ACTION_VIEW);
intent.setData(Uri.parse("mailto:?to=email&subject=hello&body=hello%20world"));
startActivity(Intent.createChooser(intent, "Send via...")); 
```

你可以试试这个:::::

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-27T13:22:15.407

```
Intent.setType("plain/text"); 
```

起初，当我发现这一点时，我立即认为这是一个错误并且它本来就是这样`text/plain`，但这实际上是仅在应用程序列表中显示电子邮件客户端的正确方法。

试一试，自己看看。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-04-29T14:42:56.047

`intent.setPackage("com.google.android.gm");`//添加Gmail包强制打开Gmail App

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-04-24T08:37:38.933

```
String rec[] = { owner.email };
i = new Intent(Intent.ACTION_SEND);
i.setType("message/rfc822") ;
i.putExtra(android.content.Intent.EXTRA_EMAIL, rec);
i.putExtra(android.content.Intent.EXTRA_SUBJECT, "RE: " + desc);
i.putExtra(android.content.Intent.EXTRA_TEXT,
        "\n\n\nSent from Mojo for Android");
startActivity(i); 
```

试试这个;：：：

# php - 在用户墙上发布图像，并附上应用消息，后跟应用 URL

> ID：10294369
> 
> 赞同：0
> 
> 时间：2012-04-24T08:30:44.600
> 
> 标签：php, facebook-graph-api, facebook-php-sdk

在我的应用程序中，我在墙上发布图像，它工作正常，但现在我的要求是打印我的应用程序的 URL 和一条消息并拥有它，以便当用户单击链接时，他被重定向到我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T08:38:09.243

您可以使用 curl 方法，我正在使用它并且效果很好

```
$attachment =  array(
                            'access_token' => "accesstoken",
                            'caption' => "Hey -- this is caption",
                            'description' => "Your Desc",
                            'link' => "http://www.example.com/",
                            'picture'=> "path/image.png"
                        );

                        $ch = curl_init();
                        curl_setopt($ch, CURLOPT_URL,'https://graph.facebook.com/XXXXXX/feed');
                        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
                        curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
                        curl_setopt($ch, CURLOPT_POST, true);
                        curl_setopt($ch, CURLOPT_POSTFIELDS, $attachment);
                        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);  //to suppress the curl output 
                        $result = curl_exec($ch);
                        curl_close ($ch); 
```

# unix - Sun Solaris 8 - 无法正确设置语言环境

> ID：10294374
> 
> 赞同：0
> 
> 时间：2012-04-24T08:31:48.687
> 
> 标签：unix, solaris

每次我进入用户帐户或 root 帐户时，我都会收到“无法正确设置区域设置”的消息。

进入local会显示：

```
enter code here LANG=
                LC_CTYPE="C"
                LC_NUMERIC="C"
                LC_TIME="C"
                LC_COLLATE="C"
                LC_MONETARY="C"
                LC_MESSAGES=C
                LC_ALL= 
```

我该如何解决这个问题......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T14:24:34.620

看看 /etc/TIMEZONE ，它应该链接到 /etc/default/init，你应该有类似的东西：

```
TZ=US/Pacific 
LC_COLLATE=en_US
LC_CTYPE=en_US
LC_MESSAGES=C
LC_MONETARY=en_US
LC_NUMERIC=en_US
LC_TIME=en_US 
```

如果不这样做，请添加这些值并进行测试 - 重新启动。

# windows - Windows Mobile 数组列表

> ID：10294383
> 
> 赞同：-1
> 
> 时间：2012-04-24T08:32:28.790
> 
> 标签：windows, mobile, arraylist

1.  ArrayList / List 可用于 Windows 移动本机代码（C++）？
2.  如果可用如何使用它？我想在运行时动态地将项目添加到arraylist。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T11:55:19.523

只是为了让这个答案成为你可以给我的答案：

请参阅 Microsoft 基础类的参考。您可以使用一些集合类：http: [//msdn.microsoft.com/de-de/library/942860sh (v=vs.80).aspx](http://msdn.microsoft.com/de-de/library/942860sh(v=vs.80).aspx)

# c# - 尝试使用 EF4.3.1 插入实体时出现异常

> ID：10294384
> 
> 赞同：0
> 
> 时间：2012-04-24T08:32:28.930
> 
> 标签：c#, database, exception, entity-framework-4

我在这里看到了一些看起来像我的帖子，但是我找不到我的具体问题的答案。

问题是我正在尝试使用导航将实体插入数据库。支柱。但是我不断得到：`The ObjectContext instance has been disposed and can no longer be used for operations that require a connection.`

```
using (EntitiesDatabase context = new EntitiesDatabase())
{
    if (UserHandler.Instance.User is Admin)
    {
        ((Admin)UserHandler.Instance.User).ProjectManagers.Add(
            new ProjectManager(firstNameTextBox.Text, lastNameTextBox.Text, usernameTextBox.Text, passwordTextBox.Text));
    }
    else if (UserHandler.Instance.User is ProjectManager)
    {
        ((ProjectManager)UserHandler.Instance.User).Developers.Add(
            new Developer(firstNameTextBox.Text, lastNameTextBox.Text, usernameTextBox.Text, passwordTextBox.Text));
    }

    context.SaveChanges();
} 
```

错误异常在代码第5-6行抛出`(u.ProjectManagers.Add(new ProjectManager(...))`

**为清楚起见：** `UserHandler`是一个单例，包含对登录用户的引用。用户有一个导航属性

```
 public virtual ICollection<ProjectManager> ProjectManagers { get; set; } 
```

在我`SaveChanges()`对上下文执行之后，这实际上应该将新项目经理插入数据库。

我已经对较小的项目（如 PluralSight 教程中的项目）进行了一些简单的测试，并且它确实有效......由于某种原因，这些相同的行不起作用。在我尝试将其插入导航之前，似乎正在处理我正在创建的新项目经理。支柱。因为我永远不会进入保存更改行...

从我看到的其他答案中，我猜测该`using`语句出于某种原因在到达结束括号之前就处理了一些事情。我不明白为什么...有人可以指出我正确的方式吗？

顺便说一句，这不是家庭作业，这是我的一个项目，我正在尝试学习 C#、EF 和其他技术。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T08:48:38.940

我的猜测是与相关的数据上下文`UserHandler.Instance.User`在当前调用上下文中不存在，并且`UserHandler.Instance.User`没有附加到`context`最近实例化的上下文中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:51:14.270

看起来您从中获取`User`实例的上下文是在不同的上下文中获取的，这些上下文已被释放。

[您有两个选择，要么使用相同的上下文，要么使用ObjectContext.Attach](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.attach.aspx)将实体附加到新上下文，如下所示：

```
using (EntitiesDatabase context = new EntitiesDatabase())
{
  context.Attach(UserHandler.Instance.User);
  if (UserHandler.Instance.User is Admin)
  {
    ((Admin)UserHandler.Instance.User).ProjectManagers.Add(
       new ProjectManager(firstNameTextBox.Text, lastNameTextBox.Text, usernameTextBox.Text, passwordTextBox.Text));
  }
  else if (UserHandler.Instance.User is ProjectManager)
  {
    ((ProjectManager)UserHandler.Instance.User).Developers.Add(
        new Developer(firstNameTextBox.Text, lastNameTextBox.Text, usernameTextBox.Text, passwordTextBox.Text));
  }

  context.SaveChanges();
} 
```

# objective-c - 为什么我有可能的保留周期警告

> ID：10294385
> 
> 赞同：1
> 
> 时间：2012-04-24T08:32:46.250
> 
> 标签：objective-c, ios, block

我在 .h 中声明了以下块

```
@property (strong, nonatomic) void(^setHandedness)(BOOL hand); 
```

它在匹配的 .m 中定义

```
 setHandedness = ^(BOOL hand){
    _isRightHanded = hand;
}; 
```

并传递给具有相同形式的块声明的子视图控制器。除了弱

```
@property (weak, nonatomic) void(^setHandedness)(BOOL hand); 
```

用弱替换强消除警告。但我不明白为什么？

然后在子视图控制器中调用该块

```
setHandedness(handedness); 
```

我有一个警告告诉我 self 可能会导致保留周期？有任何想法吗。干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T09:06:13.023

警告的原因是这样的：

1.  您的对象保留属性中的块。
2.  您的块保留您的对象，因为它访问实例变量。

现在你有两个相互引用的对象。即使没有其他人引用它们，它们也会使彼此保持活力并且永远不会被释放。

这是[Apple 文档中关于块和变量的引用](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/Blocks/Articles/bxVariables.html)

> 如果通过引用访问实例变量，则保留 self；

您的第二个视图控制器与您的保留周期无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T09:04:02.543

您有一个可能的保留周期，因为通常情况下，当父级使用强指针指向子级，而子级使用另一个强指针指向父级时，它们将保持活动状态并且永远不会被释放（这就是ARC 有效）。当您将子指针替换为弱指针时，就不会发生这种情况。

# windows - 如何关闭打开的 OLE 对话框

> ID：10294392
> 
> 赞同：2
> 
> 时间：2012-04-24T08:33:08.327
> 
> 标签：windows, delphi, ole, jedi

我有一个功能可以关闭应用程序中除主表单之外的所有表单

```
procedure CloseOpenForms(const Component: TComponent);
var
  i: Integer;
begin
  for i := 0 to pred(Component.ComponentCount) do
  begin
    CloseOpenForms(Component.Components[i]);

    if Component.Components[i] is TForm then
    begin
      TForm(Component.Components[i]).OnCloseQuery := nil;

      TForm(Component.Components[i]).Close;
    end;
  end;
end; 
```

从主窗体调用：

```
CloseOpenForms(Self); 
```

只要没有活动的 OLE 对话框（例如 TJvObjectPickerDialog），它就可以正常工作。

如何强制关闭这些非模式 OLE 对话框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T01:03:10.037

JVCL 将应用程序句柄传递给 'hwndParent' 参数`IDSObjectPicker.InvokeDialog`，因此对话框由应用程序窗口*拥有*（不像 VCL 中的“所有者”，但更像弹出父级）。然后，您可以启动窗口以找出应用程序窗口所拥有的窗口，并向它们发布关闭命令。

```
procedure CloseOpenForms(const AComponent: TComponent);

  function CloseOwnedWindows(wnd: HWND; lParam: LPARAM): BOOL; stdcall;
  begin
    Result := TRUE;

    if (GetWindow(wnd, GW_OWNER) = HWND(lParam)) and (not IsVCLControl(wnd)) then
    begin
      if not IsWindowEnabled(wnd) then      // has a modal dialog of its own
        EnumWindows(@CloseOwnedWindows, wnd);

      SendMessage(wnd, WM_CLOSE, 0, 0);
    end;
  end;

  procedure CloseOpenFormsRecursive(const RecComponent: TComponent);
  var
    i: Integer;
  begin
    for i := 0 to pred(RecComponent.ComponentCount) do
    begin
      CloseOpenFormsRecursive(RecComponent.Components[i]);

      if RecComponent.Components[i] is TForm then
      begin
        TForm(RecComponent.Components[i]).OnCloseQuery := nil;

        TForm(RecComponent.Components[i]).Close;
      end;
    end;
  end;

begin
  EnumWindows(@CloseOwnedWindows, Application.Handle);

  CloseOpenFormsRecursive(AComponent)
end; 
```

# sql-server - 计算每个产品（Inkcode）的库存

> ID：10294393
> 
> 赞同：3
> 
> 时间：2012-04-24T08:33:31.053
> 
> 标签：sql-server, sql-server-2008, sql-server-2005

![2张桌子](../Images/d3a3d6d32484f71763c2eb1373e8a650.png)我有 2 个表 Tblinkreceiving 和 Tblinkdelivery。我想显示每个墨水代码的库存余额。我尝试了下面的 sql 连接查询，但是当我交叉检查手动计算时，许多墨水代码的计算是错误的。哪里出错了？

```
select r.inkcode, SUM(r.quantity) Stock-In, SUM(d.quantity) Stock-out, (SUM(r.quantity) - SUM(d.quantity)) Stock-Balance from Tblinkreceiving r,Tblinkdelivery d where r.inkcode=d.inkcode
group by r.inkcode; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:27:57.177

您已使用内部连接（隐式）来组合接收和交付。这意味着任何已收到但未交付的墨水代码都将从您的结果中排除。

如果您可以假设对于任何墨水交付都必须有墨水收据（基于您无法交付尚未收到的东西的前提），那么您可以在 tblInkReceiving 上使用内部连接，如下所示：

```
SELECT r.inkcode, 
    SUM(r.quantity) AS Stock-In, 
    ISNULL(SUM(d.quantity), 0) AS Stock-out,
    SUM(r.quantity) - ISNULL(SUM(d.quantity), 0) AS Stock-Balance 
FROM Tblinkreceiving r LEFT JOIN Tblinkdelivery d ON r.inkcode = d.inkcode
GROUP BY r.inkcode 
```

左连接将返回左侧 (r) 上的所有记录，包括右侧 (d) 上的匹配记录。如果 d 没有匹配的记录（即该墨水代码没有墨水交付），那么这些行的值将为空。

如果您不能假设墨水只有在收到后才能交付，那么您也需要链接到墨水表（即，以 inkcode 为主键的表），或者合并所有墨水代码在接收和交付表中，并链接到：

```
;WITH cte AS (SELECT inkcode FROM Tblinkreceiving 
    UNION 
    SELECT inkcode FROM Tblinkdelivery)
SELECT cte.inkcode, 
    SUM(r.quantity) AS Stock-In, 
    ISNULL(SUM(d.quantity), 0) AS Stock-out,
    SUM(r.quantity) - ISNULL(SUM(d.quantity), 0) AS Stock-Balance 
FROM cte LEFT JOIN Tblinkreceiving r ON cte.ink_code = r.ink_code
    LEFT JOIN Tblinkdelivery d ON cte.inkcode = d.inkcode
GROUP BY cte.inkcode 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:42:09.993

```
WITH    i AS
        (
        SELECT  inkcode, SUM(quantity) AS qin
        FROM    tblInkReceiving
        GROUP BY
                inkcode
        ),
        o AS
        (
        SELECT  inkcode, SUM(quantity) AS qout
        FROM    tblInkDelivery
        GROUP BY
                inkcode
        )
SELECT  COALESCE(i.inkcode, o.inkcode) AS inkcode,
        COALESCE(qin, 0) AS stock_in,
        COALESCE(qout, 0) AS stock_out,
        COALESCE(qin, 0) - COALESCE(qout, 0) AS stock_balance
FROM    i
FULL JOIN
        o
ON      o.inkcode = i.inkcode 
```

# gwt - Internet Explorer 8 开始下载 GWT javascript 文件，而不是在重置后将它们显示为页面

> ID：10294396
> 
> 赞同：2
> 
> 时间：2012-04-24T08:33:48.090
> 
> 标签：gwt, internet-explorer-8

附加信息：
Plarform：Windows 7 最新更新，Windows XP Comp 查看虚拟机
版本：Internet Explorer 8.0.7601.17514

我正在开发一个 gwt 应用程序，最近遇到了这个问题：全新安装 Windows 7 和 ie8 一切正常，但是在重置所有配置数据后，ie8 开始提示下载 javascript 文件的对话框，而不是在页面中呈现它们。更有趣的是，这种情况并非每次都发生，但在某些机器上重置后看起来很好，而在其他机器上则是灾难。看起来像是某种特定的 Windows 配置，因为如果它发生在 Windows 7 上，它也会发生在 Windows XP 的兼容模式下。

重现步骤：

1.  转到 Internet 选项
2.  转到常规选项卡->单击退出时删除浏览历史记录->单击删除按钮

3.  转到安全选项卡->单击将所有区域重置为默认级别

4.  转到高级选项卡-> 恢复高级设置

5.  转到高级选项卡->单击重置按钮->单击删除个人设置复选框->单击重置按钮

6.  重新启动 Internet Explorer 8 并尝试启动 gwt 应用程序

感谢您提前回答。

PS可以尝试重现问题：[http ://gwt.google.com/samples/Showcase/Showcase.html#!CwCheckBox](http://gwt.google.com/samples/Showcase/Showcase.html#!CwCheckBox)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:28:44.570

这可能是因为文件的未知内容类型。

尝试添加：

```
<mime-mapping>    
    <extension>js</extension>        
    <mime-type>application/x-javascript</mime-type>        
</mime-mapping> 
```

给你 web.xml

# jsp - 如何使用jQuery选择具有相同ID的元素的唯一值

> ID：10294400
> 
> 赞同：1
> 
> 时间：2012-04-24T08:33:59.900
> 
> 标签：jsp, jquery

```
<c:forEach var="projects" items="${projectList}">
    <tr>
        <td class="font ">
            <a href="#" id="projectname" name="projectname" class="testone" >${projects.name}</a>
        </td>
        <input type="hidden" id="hello" value="${projects.projid}"/>
    </tr>                     
</c:forEach> 
```

基本上，我的代码将一个值从数据库迭代到下一个。具体来说，INPUT in`<input type="hidden" id="hello" value="${projects.projid}"/>`每次迭代都会改变它的值。但是，当我通过 jQuery 选择它时，我无法从数据库中获取 PROJID 的第二个值。

这是我的jQuery

```
$(document).ready(function(){
    $('#projectname').click(function(){
        $(this).each(function(i){
            var choice = $('#hello').val()  
            $('#right').load('show_project_details',{projectid:choice});
        });
    });
}); 
```

我知道使用 ID 进行选择仅限于第一个元素，但我的代码没有解决方法吗？我真的想避免使用单选按钮。

如果你有时间，请回复。非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:45:12.627

HTML id 属性在整个 HTML 文档中应该具有唯一值。

因此，像这样更改您的 JSP：

```
<c:forEach var="projects" items="${projectList}">
    <tr>
        <td class="font">
            <a href="#" class="projectname">${projects.name}</a>
        </td>
        <input type="hidden" name="projectid${projects.projid}" value="${projects.projid}" />
    </tr>                     
</c:forEach> 
```

然后，使用这个 JavaScript 而不是你的：

```
$(function() {
    $("a.projectname").click(function() {
        var choice = $(this).parent().next().val();
        $('#right').load('show_project_details', {projectid: choice});
    });
}); 
```

# asp.net-mvc-3 - 使用 mvc3 在一个视图中显示创建和详细视图

> ID：10294404
> 
> 赞同：1
> 
> 时间：2012-04-24T08:34:19.730
> 
> 标签：asp.net-mvc-3, view

嗨，我想显示一个页面，我允许用户创建新记录并在下面显示同一张表的其他相关记录.....

我需要在 Hobbydetail 类中添加数据： public class HobbyDetail {

```
public virtual HobbyMasters Hobbymaster { get; set; }
public virtual Course course { get; set; }
public virtual StudyMedium StudyMedium { get; set; }
public virtual decimal Fees { get; set; } 
```

}

我希望我的视图“创建”让用户创建新记录并在其下方显示现有记录...我不想使用视图模型... sumbody 可以提前帮我谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T18:46:11.217

实现此目的的一种方法是：在您的控制器中，创建一个呈现列表的子操作，然后使用[Html.RenderAction](http://msdn.microsoft.com/en-us/library/ee728607)在您的“创建”视图中呈现该操作（另[请参阅此](http://msdn.microsoft.com/en-us/library/ee839451.aspx)）。我在下面包含了一些代码（我没有测试过这个，但它应该给你基本的想法）。请注意，这不是完成此操作的唯一方法 - 您可以使用部分视图[查看此](http://www.arrangeactassert.com/when-to-use-html-renderpartial-and-html-renderaction-in-asp-net-mvc-razor-views/)内容。还请了解 html.RenderAction 和 html.Action 之间的区别，[请参阅this](http://haacked.com/archive/2009/11/18/aspnetmvc2-render-action.aspx)。

```
 //In HobbyDetail Controller
    [HTTPGet]
    public ActionResult Create()
    {
      var model = new HobbyDetail ();
      return View(model);
    }

    [HTTPPost]
    public ActionResult Create(HobbyDetail model)
    {
      if(ModelState.isValid)
      {
         //logic to persist model
      }
      else
      {
         //logic when validation fails...
      }
    }

    [ChildActionOnly]
    public ActionResult ListAll()
    {
      List<Hobbydetail> model = //query to DB, or Data store to get Hobbydetails
      return View(model);
    }

//View for ListAll
@model List<HobbyDetail>
{
 Layout = null; //No layout here...
}

<ul>
@foreach(var h in Model)
{
 <li>@h.HobbyMasters.Name</li> //for example...
}
</ul>

//View for Create
@model HobbyDetail 
...
@{html.renderAction("ListAll");} 
```

# java - 将数据库读入应用程序/在列表视图中显示

> ID：10294406
> 
> 赞同：2
> 
> 时间：2012-04-24T08:34:32.007
> 
> 标签：java, android, database, sqlite

我正在尝试使用我保存在资产中的数据库填充列表视图。我已经检查了当我运行应用程序时是否正在创建数据库（它是）。我当前的问题是试图弄清楚如何获取列并将它们显示在列表视图中。我的列是姓名，职位和部门，以防你看到一段你不明白的代码。我一直在尝试使用来自[http://saigeethamn.blogspot.com/2011/02/listview-of-data-from-sqlitedatabase.html](http://saigeethamn.blogspot.com/2011/02/listview-of-data-from-sqlitedatabase.html)的代码， 如果有人能够帮助我，我将不胜感激，谢谢在高级。

编辑：当代码运行时，它给了我一个空指针异常

```
 public class Favorites extends ListActivity {
        public static String tableName = "fac";
        private ListView lv;
        SQLiteDatabase newDB;
        private ArrayList<String> results = new ArrayList<String>();

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.favorites);

            openAndQueryDatabase();
            displayResultList();
        }

        private void displayResultList() {
            TextView tView = new TextView(this);
            tView.setText("This data is retrieved from the database and only 4 "
                    + "of the results are displayed");
            getListView().addHeaderView(tView);

            setListAdapter(new ArrayAdapter<String>(this,
                    android.R.layout.simple_list_item_1, results));
            getListView().setTextFilterEnabled(true);

        }

        private void openAndQueryDatabase() {
            try {
                DataBaseHelper dbHelper = new DataBaseHelper(
                        this.getApplicationContext());
                newDB = dbHelper.getWritableDatabase();
                Cursor c = newDB.rawQuery("SELECT name, position FROM " + tableName
                        + "where ", null);

                if (c != null) {
                    if (c.moveToFirst()) {
                        do {
                            String name = c.getString(c.getColumnIndex("name"));
                            String position = c.getString(c
                                    .getColumnIndex("position"));
                            results.add("name: " + name + ",Position " + position);
                        } while (c.moveToNext());
                    }
                }
            } catch (SQLiteException se) {
            } finally {
                if (newDB != null)
{
                    newDB.execSQL("DELETE FROM " + tableName);
                newDB.close();
            }}

        }
    } 
```

日志猫：

```
 04-24 04:43:19.064: E/AndroidRuntime(1644): FATAL EXCEPTION: main
        04-24 04:43:19.064: E/AndroidRuntime(1644): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.cerealBarApps/com.cerealBarApps.Faculty_tab}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.cerealBarApps/com.cerealBarApps.Favorites}: java.lang.NullPointerException
        04-24 04:43:19.064: E/AndroidRuntime(1644):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1816)
        04-24 04:43:19.064: E/AndroidRuntime(1644):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1837)
        04-24 04:43:19.064: E/AndroidRuntime(1644):     at android.app.ActivityThread.access$1500(ActivityThread.java:132)
        04-24 04:43:19.064: E/AndroidRuntime(1644):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1033)
        04-24 04:43:19.064: E/AndroidRuntime(1644):     at android.os.Handler.dispatchMessage(Handler.java:99)
        04-24 04:43:19.064: E/AndroidRuntime(1644):     at android.os.Looper.loop(Looper.java:143)
        04-24 04:43:19.064: E/AndroidRuntime(1644):     at android.app.ActivityThread.main(ActivityThread.java:4196)
        04-24 04:43:19.064: E/AndroidRuntime(1644):     at java.lang.reflect.Method.invokeNative(Native Method)
        04-24 04:43:19.064: E/AndroidRuntime(1644):     at java.lang.reflect.Method.invoke(Method.java:507)
        04-24 04:43:19.064: E/AndroidRuntime(1644):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
        04-24 04:43:19.064: E/AndroidRuntime(1644):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
        04-24 04:43:19.064: E/AndroidRuntime(1644):     at dalvik.system.NativeStart.main(Native Method)
        04-24 04:43:19.064: E/AndroidRuntime(1644): Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.cerealBarApps/com.cerealBarApps.Favorites}: java.lang.NullPointerException
        04-24 04:43:19.064: E/AndroidRuntime(1644):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1816)
        04-24 04:43:19.064: E/AndroidRuntime(1644):     at android.app.ActivityThread.startActivityNow(ActivityThread.java:1651)
        04-24 04:43:19.064: E/AndroidRuntime(1644):     at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:127)
        04-24 04:43:19.064: E/AndroidRuntime(1644):     at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:339)
        04-24 04:43:19.064: E/AndroidRuntime(1644):     at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:656)
        04-24 04:43:19.064: E/AndroidRuntime(1644):     at android.widget.TabHost.setCurrentTab(TabHost.java:326)
        04-24 04:43:19.064: E/AndroidRuntime(1644):     at android.widget.TabHost.addTab(TabHost.java:216)
        04-24 04:43:19.064: E/AndroidRuntime(1644):     at com.cerealBarApps.Faculty_tab.onCreate(Faculty_tab.java:55)
        04-24 04:43:19.064: E/AndroidRuntime(1644):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1093)
        04-24 04:43:19.064: E/AndroidRuntime(1644):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1780)
        04-24 04:43:19.064: E/AndroidRuntime(1644):     ... 11 more
        04-24 04:43:19.064: E/AndroidRuntime(1644): Caused by: java.lang.NullPointerException
04-24 04:43:19.064: E/AndroidRuntime(1644):     at com.cerealBarApps.Favorites.openAndQueryDatabase(Favorites.java:63)
04-24 04:43:19.064: E/AndroidRuntime(1644):     at com.cerealBarApps.Favorites.onCreate(Favorites.java:25)
04-24 04:43:19.064: E/AndroidRuntime(1644):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1093)
04-24 04:43:19.064: E/AndroidRuntime(1644):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1780) 
```

对不起

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:10:46.540

试试这个 plz.. 在下面的语句中，请在 'where' 关键字之前加上 ' '。

老的

```
Cursor c = newDB.rawQuery("SELECT name, position FROM " + tableName + "where ", null); 
```

新的

```
Cursor c = newDB.rawQuery("SELECT name, position FROM " + tableName + " where ", null); 
```

# facebook - facebook ， google 网络应用程序通知

> ID：10294410
> 
> 赞同：0
> 
> 时间：2012-04-24T08:34:51.057
> 
> 标签：facebook

目前，我正在开发一个网络应用程序，该应用程序授权用户的 facebook 和 google 帐户从这些站点获取一些数据。我用了：

```
FB.getLoginStatus(function(response) {
    if (response.status === 'connected') {    
        user_id = response.authResponse.userID;
        accessToken = response.authResponse.accessToken;
    }
    else if (response.status === 'not_authorized') {
        // the user is logged in to Facebook, 
        // but has not authenticated your app
    }
    else {
        // the user isn't logged in to Facebook.
    }
}); 
```

获取 oauth 令牌。

现在，每当用户登录到他的 facebook 或 google 帐户时，我都想要。我在我的 Web 应用程序中收到该用户已登录的通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:12:34.803

您不能制作一个应用程序，每次有人登录 Facebook/Google+ 时都会通知您。但是，只要他们使用您的应用程序或访问使用其各自社交 API 的网站，您就会被告知。这样做相当简单，只要您对应用程序的人进行身份验证/登录，只需发送一封电子邮件。

# html - CSS 样式表和自定义字体

> ID：10294415
> 
> 赞同：0
> 
> 时间：2012-04-24T08:35:09.123
> 
> 标签：html, css, fonts, web

好吧，我是 CSS 新手，所以我们开始吧。在我使用的模板中，有一个样式表

> 头{字体系列：Verdana；字体大小：16px；颜色：#000000;}
> 正文 {字体系列：Verdana; 字体大小：12px；颜色：#ffffff}
> 一个 {颜色：#ff0000; 字体系列：Verdana；字体大小：30px;}
> bluetext {color:#0000ff;}
> 工具提示{font-family:Verdana; 字体大小：11px；颜色：#ffffff;}

所以我认为它正在确定每个部分的字体应该是什么。如果我想为所有这些部分使用自定义字体而不是 Verdana，我该怎么办？我有 .ttf 文件，但我不知道还能做什么。

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T08:44:12.673

首先`woff`为 Mozilla、`eot`IE 等所有浏览器生成字体。因此，您可以从 [http://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)和 [http://www.font2web.com/](http://www.font2web.com/)生成字体。然后写`@font-face`在你的 CSS 中。

```
@font-face {
  font-family: 'font';
  src: url('font.eot?') format('eot'), url('font.woff') format('woff'), url('font.ttf') format('truetype');
}
body{
  font-family: 'font';
  color:#fff;
font-size:12px;
}
.head {font-size:16px; color:#000000;}
a {color:#ff0000; font-size:30px;}
.bluetext {color:#0000ff;}
.tooltip{font-size:11px;} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T08:42:23.673

您需要为此使用字体。基本实现是：

```
@font-face {
    font-family: CustomFontName;
    src: url(http://path-to/customfont.ttf);
    font-weight:400;
} 
```

然后就像在任何其他样式规则中的任何其他字体一样使用它。

```
p {
    font-family: CustomFontName, Helvetica, Arial, sans-serif;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T08:45:25.447

Just first install this font on your server/system/root.

& then apply like this in your css

```
@font-face {
        font-family: 'myriadproregular'(i.e.custom font name);
        src: local('myriadproregular'), url('myriadproregular.ttf') format("truetype");
    }
    and  if you want more than one font you can do the same
    @font-face {
        font-family: 'myriadprocond';
        src: local('myriadprocond'), url('myriadprocond.ttf') format("truetype");
    }
    @font-face {
        font-family: 'myriadprosemibold';
        src: local('myriadprosemibold'), url('myriadprosemibold.ttf') format("truetype");
    } 
```

just use the font name where ever you want to use such as

```
p
{
font-family:"custom font name"

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T08:40:10.727

您必须在您的 css 文件中使用它：

```
@font-face {
    font-family: your_font;
    src: url('your_font.ttf');
} 
```

为了在 IE 上工作，您应该使用 .eot 扩展名导出另一个版本的字体，并添加另一个 src 属性。

编辑：这是一个关于使用 @font-face 的有用链接：[http ://www.webistrate.com/css3-custom-fonts-using-font-face/](http://www.webistrate.com/css3-custom-fonts-using-font-face/)

# android - 从 Android RSS 阅读器中的描述节点问题中获取数据

> ID：10294426
> 
> 赞同：0
> 
> 时间：2012-04-24T08:35:52.273
> 
> 标签：android, xml-parsing, rss-reader, android-parser

我一直在开发一个 Android RSS 阅读器应用程序，并且在从描述节点获取 HTML 内容时遇到了问题。

我试图从以下 XML 中获取数据。

```
 <description>
    <p><a href="http://in.news.yahoo.com/search-arizona-girl-6-turns-back-her-tucson-021230195.html">
   <img src="http://l.yimg.com/bt/api/res/1.2/t8X__zdk6shihpWw0Nenfw--/YXBwaWQ9eW5ld3M7Zmk9ZmlsbDtoPTg2O3B4b2ZmPTUwO3B5b2ZmPTA7cT04NTt3PTEzMA--/http://media.zenfs.com/en_us/News/Reuters/2012-04-24T021230Z_1_CDEE83N064W00_RTROPTP_2_USA-MISSING-ARIZONA.JPG" 
width="130" height="86" alt="Handout photo of Isabel Mercedes Celis" align="left" title="Handout photo of Isabel Mercedes Celis" border="0" />

</a>
      TUCSON, Arizona (Reuters) - The search for a missing 6-year-old Arizona girl who a               authorities said may have been snatched from her bedroom in Tucson entered its third day on  Monday as search dogs shifted investigators' attention back to the child's home. The  parents of first-grader Isabel Mercedes Celis told detectives she was last seen on Friday  night when they tucked her into bed, and was found to have vanished when a family member   entered her room the next morning to awaken her, police said. ...
    </p>
  <br clear="all"/>
 </description> 
```

当我获取数据时它显示为空白。我将我的整个代码粘贴在下面..

我从这个网址获取 Rss：http: [//in.news.yahoo.com/rss/crime](http://in.news.yahoo.com/rss/crime)

***RSSActivity.java***

```
package com.satyampv.dsta;

import java.util.ArrayList;
import java.util.HashMap;

import org.w3c.dom.Document;
import org.w3c.dom.NodeList;
import org.w3c.dom.Element;

import android.app.ListActivity;
import android.os.Bundle;

import android.text.util.Linkify;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.SimpleAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class AstroRssActivity extends ListActivity {
    /** Called when the activity is first created. */
    //static final String URL = "http://findyourfate.com/rss/dailyhoroscope-feed.asp?sign=Taurus";

    //static final String URL = "http://my.horoscope.com/astrology/daily-horoscopes-rss.html";
    static final String URL = "http://in.news.yahoo.com/rss/crime";
    // XML node keys
    static final String KEY_ITEM = "item"; // parent node
    static final String KEY_TITLE = "title";
    static final String KEY_DESC = "description";
    static final String KEY_LINK = "link";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

        XMLParser parser = new XMLParser();
        String xml = parser.getXMLFromURL(URL);// getting XML
        Document doc = parser.getDocumentElement(xml);// getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_ITEM);
        // looping through all item nodes <item>
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);

            // adding each child node to HashMap key => value

            map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
            map.put(KEY_DESC, parser.getValue(e, KEY_DESC));
            map.put(KEY_LINK,parser.getValue(e, KEY_LINK));

            // adding HashList to ArrayList
            menuItems.add(map);
        }

        // Adding menuItems to ListView
        ListAdapter adapter = new SimpleAdapter(this, menuItems,
                R.layout.list_item,
                new String[] { KEY_TITLE, KEY_DESC, KEY_LINK }, new int[] {
                        R.id.name, R.id.desciption, R.id.link });

        setListAdapter(adapter); 
```

**XMLParser.java**

```
package com.satyampv.dsta;

import java.io.IOException;
import java.io.StringReader;
import java.io.UnsupportedEncodingException;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;

import org.w3c.dom.Document;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.w3c.dom.Element;

import org.xml.sax.InputSource;
import org.xml.sax.SAXException;

import android.util.Log;

public class XMLParser {

    public XMLParser() {

    }

    public String getXMLFromURL(String url) {

        String xml = null;

        try {
            // Default HTTP Client

            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();

            xml = EntityUtils.toString(httpEntity);

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        // return XML
        return xml;
    }

    // Getting xml Dom element @param xml String

    public Document getDocumentElement(String xml) {

        Document doc = null;
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();

        try {

            DocumentBuilder db = dbf.newDocumentBuilder();

            InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is);
        } catch (ParserConfigurationException e) {
            Log.e("Error", e.getMessage());
            return null;
        } catch (SAXException e) {

            Log.e("Error", e.getMessage());
            return null;

        } catch (IOException e) {
            Log.e("Error", e.getMessage());
            return null;
        }

        return doc;
    }

    public String getValue(Element item,String str){
        NodeList n = item.getElementsByTagName(str);
        return this.getElementValue(n.item(0));
    }
    // Getting node Value
    // @params ele element

    public final String getElementValue(Node elem) {
        Node child;

        if (elem != null) {

            if (elem.hasChildNodes()) {
                for (child = elem.getFirstChild(); child != null; child = child
                        .getNextSibling())
                {
                    if (child.getNodeType() == Node.TEXT_NODE) {
                        return child.getNodeValue();
                    }
                }

            }
        }

        return "";

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:26:56.453

如果您的描述节点包含 HTML 标记，则它不包含任何 TEXT_NODE 类型的子节点，这就是它返回空的原因。

检查描述节点中的子节点是什么类型，以查看如何处理这些节点。

## 编辑

一种解决方案是使用 getTextContent ( [http://docs.oracle.com/javase/1.5.0/docs/api/org/w3c/dom/Node.html#getTextContent%28%29](http://docs.oracle.com/javase/1.5.0/docs/api/org/w3c/dom/Node.html#getTextContent%28%29) ) 而不是搜索 Text 节点。代替：

```
if (elem.hasChildNodes()) {
    for (child = elem.getFirstChild(); child != null; child = child.getNextSibling()) {
        if (child.getNodeType() == Node.TEXT_NODE) {
            return child.getNodeValue();
        }
    }
} 
```

你可以简单地去：

```
return elem.getTextContent(); 
```

稍后，您可以使用以下方法解析 HTML `Html.fromHtml()`：

```
HashMap<String, Spanned> map = new HashMap<String, Spanned>(); 
```

和

```
map.put(KEY_DESC, Html.fromHtml(parser.getValue(e, KEY_DESC))); 
```

（见[http://developer.android.com/reference/android/text/Html.html#fromHtml%28java.lang.String%29](http://developer.android.com/reference/android/text/Html.html#fromHtml%28java.lang.String%29)）

## 编辑2

并更换

```
ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>(); 
```

和

```
ArrayList<HashMap<String, Spanned>> menuItems = new ArrayList<HashMap<String, Spanned>>(); 
```

此外，我认为 SimpleAdapter 需要 TextView 的字符串，因此您可能需要一个 ViewBinder 将 Spanned 放入 TextView：

```
SimpleAdapter adapter = new SimpleAdapter(...);
adapter.setViewBinder(new SimpleAdapter.ViewBinder() {
    public boolean setViewValue(View view, Object data, String textRepresentation) {
        if (data instanceof Spanned && view instanceof TextView) {
            ((TextView) view).setText((Spanned) data));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T12:45:57.753

检查这个例子。它是一个简单的 RSS 阅读器，非常容易理解...... [http://droidapp.co.uk/?p=166](http://droidapp.co.uk/?p=166)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T05:48:39.900

在 android 中显示 HTML 内容的最佳方式是使用 Webview。因此使用 webview 显示描述节点内的数据。它将显示文本和图像。这是一个示例代码...

```
 WebView Description;
    Description = (WebView)findViewById(R.id.webView1);
    Description.getSettings().setLayoutAlgorithm(LayoutAlgorithm.SINGLE_COLUMN);
    Description.getSettings().setJavaScriptEnabled(true);
    Description.getSettings().setBuiltInZoomControls(true);

    Bundle mybundle = getIntent().getExtras();
    Integer NewsNumber = mybundle.getInt("number");

    final String CurrentTitle = Arrays.Title[NewsNumber];
    String CurrentDescription = Arrays.Description[NewsNumber];

    NewsTitle.setText(CurrentTitle);

    Description.loadDataWithBaseURL (null, "<html>"+CurrentDescription+"</html>", "text/html", "UTF-8",
    null); 
```

# ruby-on-rails - rails，向 form_tag 添加一个未定义的属性

> ID：10294430
> 
> 赞同：2
> 
> 时间：2012-04-24T08:36:06.283
> 
> 标签：ruby-on-rails, forms

我想知道你如何在 rails form_tag 中添加“data-provide”属性？我想要的html输出是......

```
<input type="text" data-provide="typeahead"> 
```

但是在 form_tag 中，我不能只做类似的事情

```
<%= f.text_field :data-provide => "typehead" %> 
```

如何在表单标签中添加类似的未定义属性？我需要提交隐藏字段还是使用其他辅助方法？我正在查看 form_tag helper api，似乎我不能定义另一个属性。

似乎有一个简单的解决方案，但我不太确定。帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T08:54:18.910

使用`:data`带有哈希的选项：

```
<%= f.text_field :some_field, :data => {:provide => "typeahead"} %> 
```

# objective-c - 来自服务器的 Apple 推送通知

> ID：10294434
> 
> 赞同：1
> 
> 时间：2012-04-24T08:36:17.603
> 
> 标签：objective-c, ios, push-notification

我遵循： [Apple 推送通知服务教程](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)。它在本地对我有用。接下来，我想从我的服务器发送推送通知？

我已经上传`simplepush.php`到`ck.pem`我的服务器。当我检查`http://www.myserver/simplepush.php`它给我错误：

> *警告：stream_socket_client() [function.stream-socket-client]：无法连接到 /home/cherry/public_html/simplepush 中的 ssl://gateway.sandbox.push.apple.com:2195（连接超时）。第 21 行的 php 连接失败：110 连接超时*

请你帮助我好吗？

PHP代码：

```
<?php

// Put your device token here (without spaces):
$deviceToken = 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx';

// Put your private key's passphrase here:
$passphrase = 'xxxxxxxxxx';

// Put your alert message here:
$message = 'My first push notification!';

////////////////////////////////////////////////////////////////////////////////

$ctx = stream_context_create();
stream_context_set_option($ctx, 'ssl', 'local_cert', 'ck.pem');
stream_context_set_option($ctx, 'ssl', 'passphrase', $passphrase);

// Open a connection to the APNS server
$fp = stream_socket_client(
    'ssl://gateway.sandbox.push.apple.com:2195', $err,
    $errstr, 60, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx);

if (!$fp)
    exit("Failed to connect: $err $errstr" . PHP_EOL);

echo 'Connected to APNS' . PHP_EOL;

// Create the payload body
$body['aps'] = array(
    'alert' => $message,
    'sound' => 'default'
    );

// Encode the payload as JSON
$payload = json_encode($body);

// Build the binary notification
$msg = chr(0) . pack('n', 32) . pack('H*', $deviceToken) . pack('n', strlen($payload)) . $payload;

// Send it to the server
$result = fwrite($fp, $msg, strlen($msg));

if (!$result)
    echo 'Message not delivered' . PHP_EOL;
else
    echo 'Message successfully delivered' . PHP_EOL;

// Close the connection to the server
fclose($fp); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T08:45:14.170

Is the PHP compiled with SSL? And is it the same version as your local version?

Or maybe the firewall of some kind blocks connection to 2195 port from your server?

Can you log in to this server (to a shell of some kind) and check if you can connect via telnet to this server and port:

```
$ telnet gateway.sandbox.push.apple.com 2195 
```

# iphone - 我的 spriteSheet 动画使我的应用程序崩溃

> ID：10294437
> 
> 赞同：1
> 
> 时间：2012-04-24T08:36:38.930
> 
> 标签：iphone, xcode, animation, crash, cocos2d-iphone

所以我每秒都在创建一个精灵，但现在我想用 spriteSheetAnimation 替换这个精灵。但是当我运行此代码时，我的应用程序崩溃了：

```
- (void)spawnCat {
    CCSpriteBatchNode *spriteSheet2 = [CCSpriteBatchNode batchNodeWithFile:@"AnimBulle.png"];
    [self addChild:spriteSheet2];

    // Load up the frames of our animation
    NSMutableArray *walkAnimFrames = [NSMutableArray array];
    for(int i = 1; i <= 8; ++i) {
        [walkAnimFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:[NSString stringWithFormat:@"AnimBulle%d.png", i]]];
    }
    CCAnimation *walkAnim = [CCAnimation animationWithFrames:walkAnimFrames
                                                       delay:0.1f];
    [target runAction:_walkAction];
    target.tag = 1;
    [_targets addObject:target];

    [self addBoxBodyForSprite:target];
    [spriteSheet2 addChild:target z:0 tag:1];
    id actionMove = [CCMoveTo actionWithDuration:actualDuration 
                                        position:ccp(240, 160)];
    id actionMoveDone = [CCCallFuncN actionWithTarget:self 
                                             selector:@selector(spriteDone:)];
[target runAction:[CCSequence actions:actionMove, actionMoveDone, nil]];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:43:12.733

编辑：从你得到的错误类型（没有足够的堆栈跟踪），你有一个无限递归（即，一个最终直接或间接调用自身的方法）。中的代码`spawnCat`似乎并不需要这样的无限递归，所以问题一定出在其他地方。

你怎么叫`spawnCat`？你能在创建动画的方法中放一些 NSLog 跟踪，这样你就可以看到是否有人一直在调用自己？

原始答案：你确定这是你的意思吗？

```
CCAnimation *walkAnim = [CCAnimation animationWithFrames:walkAnimFrames delay:0.1f];
[target runAction:_walkAction]; 
```

我看不到`_walkAction`初始化，但我希望您*在*创建动画后执行以下操作：

```
CCAnimation *walkAnim = [CCAnimation animationWithFrames:walkAnimFrames delay:0.1f];
_walkAction = [CCAnimate actionWithAnimation:walkAnim];
[target runAction:_walkAction]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T17:04:38.260

我在代码中唯一能看到的是找不到您的 spriteFrame 的可能性。当您尝试将 nil 添加到数组时，您可能会得到令人讨厌的结果。我将按如下方式修改循环（记录帮助）。

```
for(int i = 1; i <= 8; ++i) { 
    NSString *sfn = [NSString stringWithFormat:@"AnimBulle%d.png", i];
    CCSpriteFrame *sf = [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:sfn];
    if(sf) {
        [walkAnimFrames addObject:sf];
    } else {
        CCLOGERROR(@"%@<spawnCat> : *** Sprite frame named [%@] not found in cache, bailing out.",self.class,sfn);
        return; // ok here, nothing is retained before this may be executed
    }
} 
```

此外，您能否确保在调用此之前实际加载了带有 .plist 和纹理的 spriteFrameCache，并且您不会在运行循环中的其他任何地方从缓存中删除 UnusedSpriteFrames。

# jquery - 在 when().then() 中的每个回调

> ID：10294439
> 
> 赞同：1
> 
> 时间：2012-04-24T08:36:42.007
> 
> 标签：jquery, callback, each, apply

我有这个代码：

```
var getStuff = function(resources, callback, progressCallback){
  var deferreds = [];
  for(var idx = 0; idx < resources.length; idx++){
     ...
     deferreds.push(<some action>);
  }

  jQuery.when.apply(null, deferreds).then(function(){
    callback && callback();
  });
}); 
```

因此，如果我调用它，这将触发我的回调：

```
getStuff([
  'foo',
  'bar'
], function(){
  console.log("Finished doing stuff!");
}); 
```

问题是：如何进行progressCallback？

就像是：

```
getStuff([
  'foo',
  'bar'
], function(){
  console.log("Finished doing stuff!");
}, function(obj){
  console.log("Doing stuff with obj: " + obj);
}); 
```

问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:53:33.117

你可以试试这种方法（我没试过）

```
var getStuff = function(resources, callback, progressCallback) {

    var deferreds = [];
        len       = resources.length; // need a variable for later iteration

    for(var idx = 0; idx < len; idx++){
       deferreds.push(<some action>);
    }

    deferreds.reverse();  // So the order of deferred lookup is preserved

    /* we create a named self-executed function, so we can call it when 
       a deferred is done and len variable is decremented */

    (function iterateWhen() {
       if (len--) {
         /* call progress callback */
         progressCallback(deferreds[len]); 
         jQuery.when(deferreds[len]).then(function() {
            iterateWhen();
         });
       }
       else {     
          callback && callback();
       }
    }());

}; 
```

# xml - 使用 linq 将数据表转换为 xml

> ID：10294447
> 
> 赞同：0
> 
> 时间：2012-04-24T08:37:21.240
> 
> 标签：xml, vb.net, linq, datatable

..

我需要使用 Linq 将数据表转换为 xml 的帮助。正如您在我的代码中看到的那样，我可以使用硬编码的列名来做到这一点..但我需要它而不需要硬编码...希望有人能指出我该怎么做..非常感谢

示例数据表..

![在此处输入图像描述](../Images/9916cc5ef7a23304ccd462971cb7f87f.png)

我的 linq 查询..

```
 Dim xmlDoc As New XDocument(                           
             From row In dt.AsEnumerable()
                From row In dt.AsEnumerable()
                    Select New XElement("PUPIL",
                    New XAttribute("FIRSTNAME", row.Field(Of String)("First Name")),
                    New XAttribute("LASTNAME", row.Field(Of String)("Last Name")),
                    New XAttribute("DOB", row.Field(Of String)("Date of Birth")),
                    New XAttribute("Gender", row.Field(Of String)("Gender")),
                    New XAttribute("City", row.Field(Of String)("City"))
              )) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T09:12:10.753

为什么不按照从表中加载行的方式从行中加载列？

```
Dim xmlDoc As New XDocument(
    From row In dt.Rows
        Select XElement("PUPIL",
            From column In dt.Columns
                Select
                    New XAttribute(column.Name, row.Item(column.Name))
         )
) 
```

# php - 我应该如何在 PHP CMS 中实现 CSS 样式更改器？

> ID：10294449
> 
> 赞同：1
> 
> 时间：2012-04-24T08:37:23.567
> 
> 标签：php, css, content-management-system

## 背景

我正在用 PHP 开发自己的 OOP 内容管理系统，以获取乐趣并扩展我的编程知识

### 我有什么

我已经设置了主框架，用户可以登录到后端，添加页面，编辑页面，设置行或列内容，添加徽标，广告牌等。

### 扩张

我的下一个尝试是允许用户通过面板修改他们网站的样式。包括标题颜色、字体大小、字体系列等

### 如何实施

我想了很多方法来做到这一点，但我想问问社区，看看他们是否能提出更好的解决方案或证明我的一个解决方案的合理性。

### 想法1：

我可以编写/找到一个解析 css 样式表的 php 类，然后将其重写为具有编辑值的新样式表

### 想法2：

我可以将现有样式表分成结构、颜色、字体等，只允许用户单独修改颜色和字体。

### 想法3：

我可以从内容理念中抛弃整个分离样式，并让 php 将用户指定的样式直接写入 html...

### 信息

有没有人有他们能想到的其他方法？

如果不是，我的哪一个效果最好/最有效/最佳等

这不是讨论，我在问一个特定的编程问题。

我知道面板必须有一个界面供用户更改值并将其配置保存在数据库中或将其配置直接保存在新的 css 文件中。

我只是不确定哪种方式是“最好的”方式。

“你”会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:14:50.433

我会用 JavaScript 更改样式表，例如：

```
<link rel="stylesheet" href="somestyle.css" id="stylesheet">

function changeStyle(cssfile) {
  document.getElementById('stylesheet').href = cssfile;
} 
```

我也会通过 AJAX 将用户的选择输入数据库，因此当 PHP 创建下一页时，它知道用户选择了哪些样式。

# sharepoint - 如何在沙盒解决方案中创建包含 Web 部件的 Web 部件页面

> ID：10294450
> 
> 赞同：3
> 
> 时间：2012-04-24T08:37:30.670
> 
> 标签：sharepoint, sharepoint-2010, sandbox-solution

我知道它可以在沙盒解决方案中创建一个 wiki 页面：

```
SPUtility.CreateNewWikiPage(list, "{mysiteurl}/CodeGeneratedPage.aspx"); 
```

但是我如何（如果可能）在我的文档库中创建一个包含 webpart 的 webpart 页面？因为我能找到的（像[这样](https://stackoverflow.com/questions/8428466/create-a-webpart-page-with-an-webpart-with-in-it-programmatically)）只在农场解决方案中工作。有什么解决方法吗？

*注意：我在这里发布这个问题是因为这里的**人**比 Sharepoint 网站上的人多。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:04:38.883

很好的发现。您不能使用`SPLimitedWebPartManager`沙盒代码，因此不能使用它将 WebParts 放在页面上。

为页面提供 WebPart 的唯一方法是声明性方式（即 XML），因此您必须在`elements.xml`文件中执行以下操作：

```
 <AllUsersWebPart WebPartZoneID="MainWebPartZone" WebPartOrder="1">
    <![CDATA[
      <webParts>
        <webPart xmlns="http://schemas.microsoft.com/WebPart/v3">
          <metaData>
            <type name="MyComp.WebParts.SampleWebPart, MyComp.WebParts, Version=1.0.0.0, Culture=neutral, PublicKeyToken=9f4da00116c38ec5" />
            <importErrorMessage>Cannot import this Web Part.</importErrorMessage>
          </metaData>
          <data>
            <properties>
              <property name="Title" type="string">Sample WebPart</property>
            </properties>
          </data>
        </webPart>
      </webParts>
    ]]>       
  </AllUsersWebPart> 
```

这些链接将帮助您一路走好：

*   [如何通过自定义模块功能预配沙盒 Web 部件](http://www.sharepoint-reference.com/Blog/Lists/Posts/Post.aspx?ID=4)
*   [声明式乐趣：在沙盒解决方案中配置 Web 部件连接](http://blogs.code-counsel.net/Wouter/Lists/Posts/Post.aspx?ID=161)

* * *

还有更多：

*   [在沙盒解决方案中将 Web 部件配置到 Wiki 页面不方便](http://www.mavention.nl/blog/pages/inconvenient-provisioning-web-parts-wiki-pages-sandboxed-solutions.aspx)
*   [在沙盒解决方案中使用 webpart 预配发布页面](http://www.dotnetmag.nl/c/1/3083/Provision-publishing-page-with-webpart-in-sandboxed-solution)

# iphone - 动画 UITextField 以指示错误的密码

> ID：10294451
> 
> 赞同：29
> 
> 时间：2012-04-24T08:37:31.537
> 
> 标签：iphone, objective-c, ios, core-animation

如何向 a 添加动画以`UITextField`指示错误密码，就像 facebook 应用程序（在登录屏幕）或 Mac OS X 登录框中的密码一样？

先感谢您。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-04-24T09:51:42.893

类似的东西

```
-(void)shake:(UIView *)theOneYouWannaShake
{
  [UIView animateWithDuration:0.03 animations:^
                                  {
                                    theOneYouWannaShake.transform = CGAffineTransformMakeTranslation(5*direction, 0);
                                  } 
                                  completion:^(BOOL finished) 
                                  {
                                    if(shakes >= 10)
                                    {
                                      theOneYouWannaShake.transform = CGAffineTransformIdentity;
                                      return;
                                    }
                                    shakes++;
                                    direction = direction * -1;
                                    [self shake:theOneYouWannaShake];
                                  }];
} 
```

所以你还需要三件事：一个 int direction 在摇动之前设置为 1 称为 int 摇动，在调用摇动之前设置为 0 和一个常量 MAX_SHAKES，它与你喜欢的一样大。希望有帮助。

编辑：

像这样称呼它：

```
 direction = 1;
  shakes = 0;
  [self shake:aUIView]; 
```

在头文件里面添加

```
int direction;
int shakes; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-01T01:55:10.553

（2015 年 1 月 16 日）更新：（枚举 UIViewAnimationOptions）演员很好，并且 UIViewAnimationOptionCurveEaseOut 在 typedef NS_OPTIONS(NSUInteger, UIViewAnimationOptions) 下每个 UIView.h 为 2 << 16

（2013 年 1 月 31 日）进一步修改了凯的回答，包括：

1.  0.01s 的边沿延迟
2.  轻松进出
3.  将每次摇晃的持续时间从 0.09 减少到 0.04
4.  每 1 个完整循环（右-左-右）将运动降低 1 个百分点

注意：如果您计划同时摇动两个控件（电子邮件和密码），您可能希望避免使用类或静态变量进行摇动和翻译。相反，初始化并传递shake 和translate 作为参数。我使用了静态，所以不需要类变量。

```
-(void)shakeAnimation:(UIView*) view {
    const int reset = 5;
    const int maxShakes = 6;

    //pass these as variables instead of statics or class variables if shaking two controls simultaneously
    static int shakes = 0;
    static int translate = reset;

    [UIView animateWithDuration:0.09-(shakes*.01) // reduce duration every shake from .09 to .04 
                          delay:0.01f//edge wait delay
                        options:(enum UIViewAnimationOptions) UIViewAnimationCurveEaseInOut
                     animations:^{view.transform = CGAffineTransformMakeTranslation(translate, 0);}
                     completion:^(BOOL finished){
                         if(shakes < maxShakes){
                             shakes++;

                             //throttle down movement
                             if (translate>0)
                                 translate--;

                             //change direction
                             translate*=-1;
                             [self shakeAnimation:view];
                         } else {
                             view.transform = CGAffineTransformIdentity;
                             shakes = 0;//ready for next time
                             translate = reset;//ready for next time
                             return;
                         }
                     }];
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-01-01T22:45:25.850

这个 Swift 2.0 答案不需要递归和循环。只需`CABasicAnimation`通过完善[这个 SO 答案](https://stackoverflow.com/a/27988876/144088)来利用：

```
func shakeView(shakeView: UIView) {
    let shake = CABasicAnimation(keyPath: "position")
    let xDelta = CGFloat(5)
    shake.duration = 0.15
    shake.repeatCount = 2
    shake.autoreverses = true

    let from_point = CGPointMake(shakeView.center.x - xDelta, shakeView.center.y)
    let from_value = NSValue(CGPoint: from_point)

    let to_point = CGPointMake(shakeView.center.x + xDelta, shakeView.center.y)
    let to_value = NSValue(CGPoint: to_point)

    shake.fromValue = from_value
    shake.toValue = to_value
    shake.timingFunction = CAMediaTimingFunction(name: kCAMediaTimingFunctionEaseInEaseOut)
    shakeView.layer.addAnimation(shake, forKey: "position")
} 
```

**为 Swift 4 更新：**

```
func shakeView(_ shakeView: UIView) {
    let shake = CABasicAnimation(keyPath: "position")
    let xDelta = CGFloat(5)
    shake.duration = 0.15
    shake.repeatCount = 2
    shake.autoreverses = true

    let from_point = CGPoint(x: shakeView.center.x - xDelta, y: shakeView.center.y)
    let from_value = NSValue(cgPoint: from_point)

    let to_point = CGPoint(x: shakeView.center.x + xDelta, y: shakeView.center.y)
    let to_value = NSValue(cgPoint: to_point)

    shake.fromValue = from_value
    shake.toValue = to_value
    shake.timingFunction = CAMediaTimingFunction(name: kCAMediaTimingFunctionEaseInEaseOut)
    shakeView.layer.add(shake, forKey: "position")
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-03-24T11:56:40.173

基于先前的答案作为可以使用的快速方法：

```
func shakeTextField(textField: UITextField, numberOfShakes: Int, direction: CGFloat, maxShakes: Int) {

    let interval: TimeInterval = 0.03

    UIView.animate(withDuration: interval, animations: { () -> Void in
        textField.transform = CGAffineTransform(translationX: 5 * direction, y: 0)

        }, completion: { (aBool :Bool) -> Void in

            if (numberOfShakes >= maxShakes) {
                textField.transform = .identity
                textField.becomeFirstResponder()
                return
            }

            self.shakeTextField(textField: textField, numberOfShakes: numberOfShakes + 1, direction: direction * -1, maxShakes: maxShakes)
    })

} 
```

调用它：

```
shakeTextField(aTextField,numberOfShakes:0, direction :1, maxShakes : 10) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-16T20:36:23.273

如果您来这里寻找 MonoTouch 的答案，这里是[Dickey 代码](https://stackoverflow.com/a/14638518/458193)的粗略翻译：

```
public static void /*Harlem*/Shake (this UIView view, int shakes = 6, int translation = 5)
{
    UIView.Animate (0.03 + (shakes * 0.01), 0.01, UIViewAnimationOptions.CurveEaseInOut, () => {
        view.Transform = CGAffineTransform.MakeTranslation (translation, 0);
    }, () => {
       if (shakes == 0) {
            view.Transform = CGAffineTransform.MakeIdentity ();
            return;
        }

        if (translation > 0)
            translation --;

        translation *= -1;
        shakes --;

        Shake (view, shakes, translation);
    });
} 
```

把它和你的其他扩展方法放在一起，然后像这样调用：

```
password.Shake (); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-03-17T15:50:39.143

![iOS iPhone 文本框密码窗口视图抖动](../Images/e70471d8b3a68f38d6c29974c4affa0a.png)

我为 UIView 创建了一个类别方法，可用于摇动任何元素 - 例如 UITextField - 能够在摇动结束后获得通知。以下是如何使用它：

```
[myPasswordField shake];

// Or with a callback after the shake 
[myPasswordField shakeWithCallback:^{
   NSLog(@"Shaking has ended");
}]; 
```

这是代码。

**UIView+Shake.h**

```
#import <UIKit/UIKit.h>

@interface UIView (UIView_Shake)

-(void)shake;
-(void)shakeWithCallback:(void (^)(void))completeBlock;

@end 
```

**UIView+Shake.m**

```
#import "UIView+Shake.h"
#import <objc/runtime.h>

@implementation UIView (UIView_Shake)

static void *NumCurrentShakesKey;
static void *NumTotalShakesKey;
static void *ShakeDirectionKey;

- (int)numCurrentShakes {
    return [objc_getAssociatedObject(self, &NumCurrentShakesKey) intValue];
}

- (void)setNumCurrentShakes:(int)value {
    objc_setAssociatedObject(self, &NumCurrentShakesKey, [NSNumber numberWithInt:value], OBJC_ASSOCIATION_RETAIN_NONATOMIC);
}

- (int)numTotalShakes {
    return [objc_getAssociatedObject(self, &NumTotalShakesKey) intValue];
}

- (void)setNumTotalShakes:(int)value {
    objc_setAssociatedObject(self, &NumTotalShakesKey, [NSNumber numberWithInt:value], OBJC_ASSOCIATION_RETAIN_NONATOMIC);
}

- (int)shakeDirection {
    return [objc_getAssociatedObject(self, &ShakeDirectionKey)  intValue];
}

- (void)setShakeDirection:(int)value {
    objc_setAssociatedObject(self, &ShakeDirectionKey, [NSNumber numberWithInt:value], OBJC_ASSOCIATION_RETAIN_NONATOMIC);
}

-(void)shake {
    [self shakeNextWithCompleteBlock:nil];
}

-(void)shakeWithCallback:(void (^)(void))completeBlock {
    self.numCurrentShakes = 0;
    self.numTotalShakes = 6;
    self.shakeDirection = 8;
    [self shakeNextWithCompleteBlock:completeBlock];
}

-(void)shakeNextWithCompleteBlock:(void (^)(void))completeBlock
{
    UIView* viewToShake = self;
    [UIView animateWithDuration:0.08
                     animations:^
     {
         viewToShake.transform = CGAffineTransformMakeTranslation(self.shakeDirection, 0);
     }
                     completion:^(BOOL finished)
     {
         if(self.numCurrentShakes >= self.numTotalShakes)
         {
             viewToShake.transform = CGAffineTransformIdentity;
             if(completeBlock != nil) {
                 completeBlock();
             }
             return;
         }
         self.numCurrentShakes++;
         self.shakeDirection = self.shakeDirection * -1;
         [self shakeNextWithCompleteBlock:completeBlock];
     }];
}

@end 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-06-03T05:24:48.250

这是我的看法：

```
@implementation UITextField (Shake)

- (void)shake {
    [self shakeWithIterations:0 direction:1 size:4];
}

#pragma mark - Private

- (void)shakeWithIterations:(int)iterations direction:(int)direction size:(int)size {
    [UIView animateWithDuration:0.09-(iterations*.01) animations:^{
        self.transform = CGAffineTransformMakeTranslation(size*direction, 0);
    } completion:^(BOOL finished) {
        if (iterations >= 5 || size <= 0) {
            self.transform = CGAffineTransformIdentity;
            return;
        }
        [self shakeWithIterations:iterations+1 direction:direction*-1 size:MAX(0, size-1)];
    }];
}

@end 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-02-07T20:57:03.783

我尝试了@stefreak 解决方案，但循环方法在 iOS 7.1 上不起作用。所以我结合了@stefreak 和@Chris 的解决方案，并添加了完成块，以便在摇动完成时得到通知。这是我的代码：

```
- (void)shakeView:(UIView *)view iterations:(NSInteger)iterations direction:(NSInteger)direction completion:(void (^)())completion
{
    const NSInteger MAX_SHAKES = 6;
    const CGFloat SHAKE_DURATION = 0.05;
    const CGFloat SHAKE_TRANSFORM = 10.0;

    [UIView animateWithDuration:SHAKE_DURATION
                          delay:0.0
                        options:UIViewAnimationOptionCurveEaseIn
                     animations:^{
                         view.transform = iterations >= MAX_SHAKES ? CGAffineTransformIdentity : CGAffineTransformMakeTranslation(SHAKE_TRANSFORM * direction, 0);
                     } completion:^(BOOL finished) {
                         if (finished)
                         {
                             if (iterations >= MAX_SHAKES)
                             {
                                 if (completion)
                                 {
                                     completion();
                                 }
                             }
                             else
                             {
                                 [self shakeView:view iterations:(iterations + 1) direction:(direction * -1) completion:completion];
                             }
                         }
                     }];
}

- (void)shakeView:(UIView *)view completion:(void (^)())completion
{
    [self shakeView:view iterations:0 direction:1 completion:completion];
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-04-18T07:12:26.107

您也可以使用基本动画来完成

```
let animation = CABasicAnimation(keyPath: "position")
animation.duration = 0.09
animation.repeatCount = 4
animation.autoreverses = true
animation.fromValue = NSValue(CGPoint: CGPointMake(txtField.center.x - 10, txtField.center.y))
animation.toValue = NSValue(CGPoint: CGPointMake(txtField.center.x + 10, txtField.center.y))
txtField.layer.addAnimation(animation, forKey: "position") 
```

在这里你可以改变`duration`， . 改变`repeatCount`成`fromValue`并且`toValue`会改变在摇动中移动的距离

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-02-23T15:47:43.773

由于问题是关于 Objective-C 的，并且由于我在我的项目中使用 Objective-C，我认为[这个以前的 Swift 答案](https://stackoverflow.com/a/34560789/6059640)的 Objective-C 翻译可能对其他人有用：

```
- (void)shakeView:(UIView*)view
{
    CABasicAnimation *shake = [CABasicAnimation animationWithKeyPath:@"position"];
    CGFloat xDelta = 5.0;
    shake.duration = 0.15;
    shake.repeatCount = 2;
    shake.autoreverses = YES;

    CGPoint fromPoint = CGPointMake(view.center.x - xDelta, view.center.y);
    CGPoint toPoint = CGPointMake(view.center.x + xDelta, view.center.y);

    shake.fromValue = [NSValue valueWithCGPoint:fromPoint];
    shake.toValue = [NSValue valueWithCGPoint:toPoint];
    shake.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    [view.layer addAnimation:shake forKey:@"position"];
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-06-17T12:35:17.447

[这里](https://github.com/RMK19/UITextField-Shake)有一个 Swift 库，用于在 github 中为 Textfield 设置动画。只需导入 swift 文件并实现如下

```
// Shake with the default speed
self.textField.shake(10, delta:5) //10 no. of shakes with 5 points wide

// Shake with a custom speed
self.sampleText.shake(10, delta: 5, speed: 0.10) //10 no. of shakes with 5 points wide in 100ms per shake 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-07-23T06:50:30.493

**Swift 3 和 stack_view instaed textField**

```
func shakeTextField (stack_view : UIStackView, numberOfShakes : Int, direction: CGFloat, maxShakes : Int) {
        let interval : TimeInterval = 0.05

        UIView.animate(withDuration: interval, animations: { () -> Void in
            stack_view.transform = CGAffineTransform(translationX: 5 * direction, y: 0)

        }, completion: { (aBool :Bool) -> Void in

            if (numberOfShakes >= maxShakes) {
                stack_view.becomeFirstResponder()
                return
            }
            self.shakeTextField(stack_view: stack_view, numberOfShakes: numberOfShakes + 1, direction: direction * -1, maxShakes: maxShakes )
        })
    } 
```

# android - 为什么 TextView 无法显示来自串行蓝牙的任何数据？

> ID：10294455
> 
> 赞同：1
> 
> 时间：2012-04-24T08:37:39.973
> 
> 标签：android, bluetooth, textview, terminal-emulator

我需要`TextView`从串行显示数据`Bluetooth`。但是当我将我的应用程序与串行设备连接时，它确实连接但突然被强制关闭。logcat 什么也没显示，所以我不知道出了什么问题。

这是应用程序`inputstream`在连接时侦听的代码：

```
public void run() {
    Log.i(TAG, "BEGIN mConnectedThread");
    byte[] buffer = new byte[1024];
    int bytes;

    while (true) {
        try {

            // Read from the InputStream
            bytes = mmInStream.read(buffer);

            //mEmulatorView.write(buffer, bytes);

            mTextView.append(new String(buffer));
            // Send the obtained bytes to the UI Activity
            //mHandler.obtainMessage(BlueTerm.MESSAGE_READ, bytes, -1, buffer).sendToTarget();

            String a = buffer.toString();
            mTextView.setText(a);
            a = "";
        } catch (IOException e) {
            Log.e(TAG, "disconnected", e);
            connectionLost();
            break;
        }
    }
} 
```

并且`TextView mTextView = (TextView) findViewById(R.id.dataTerm);`
在布局上：

```
<TextView
    android:id="@+id/dataTerm"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" /> 
```

那么有人知道出了什么问题吗？任何答案都非常有帮助，谢谢..

**最终工作的代码**

1.  在主文件上，在我的例子中名为 FinalSetting：
    在 Activity 方法上，声明：

    ```
    //Layout View   
    private static TextView mTextView; 
    ```

    在`onCreate(Bundle savedInstanceState)`方法上声明`textview`：

    ```
    mTextView = (TextView) findViewById(R.id.dataTerm); 
    ```

    关于`Handler`方法：

    ```
    case MESSAGE_READ:
        byte[] readBuf = (byte[]) msg.obj;              
        //mEmulatorView.write(readBuf, msg.arg1);
        // construct a string from the valid bytes in the buffer
        String readMessage = new String(readBuf, 0, msg.arg1);
        //mConversationArrayAdapter.add(mConnectedDeviceName+":  " + readMessage);
        mTextView.setText(readMessage);
        break; 
    ```

2.  关于`BluetoothService.java`文件：
    让我们直接进入方法

    ```
    //This thread runs during a connection with a remote device.
    //It handles all incoming and outgoing transmissions.

    private class ConnectedThread extends Thread {
        private final BluetoothSocket mmSocket;
        private final InputStream mmInStream;
        private final OutputStream mmOutStream;

        public ConnectedThread(BluetoothSocket socket) {
            Log.d(TAG, "create ConnectedThread");
            mmSocket = socket;
            InputStream tmpIn = null;
            OutputStream tmpOut = null;

            // Get the BluetoothSocket input and output streams
            try {
                tmpIn = socket.getInputStream();
                tmpOut = socket.getOutputStream();
            } catch (IOException e) {
                Log.e(TAG, "temp sockets not created", e);
            }
            mmInStream = tmpIn;
            mmOutStream = tmpOut;
        }

        public void run() {
            Log.i(TAG, "BEGIN mConnectedThread");
            byte[] buffer = new byte[1024];
            //final byte[] buffer = new byte[1024];
            int bytes;

            // Keep listening to the InputStream while connected
            while (true) {
                try {
                    // Read from the InputStream
                    bytes = mmInStream.read(buffer);

                    //Send the obtained bytes to the UI Activity
                    mHandler.obtainMessage(FinalSetting.MESSAGE_READ, bytes, -1, buffer).sendToTarget();
                } catch (IOException e) {
                    Log.e(TAG, "disconnected", e);
                    connectionLost();
                    break;
                }
            }
        }

        /**
        * Write to the connected OutStream.
        * @param buffer  The bytes to write
        */
        public void write(byte[] buffer) {
            try {
                mmOutStream.write(buffer);

                // Share the sent message back to the UI Activity
                mHandler.obtainMessage(FinalSetting.MESSAGE_WRITE, buffer.length, -1, buffer).sendToTarget();
            } catch (IOException e) {
                Log.e(TAG, "Exception during write", e);
            }
        }

        public void cancel() {
            try {
                mmSocket.close();
            } catch (IOException e) {
                Log.e(TAG, "close() of connect socket failed", e);
            }
        }    
    } 
    ```

连接到串行`Bluetooth`设备后，数据将显示在`TextView`. 希望这有帮助：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T08:48:58.797

似乎您正在尝试在非 UI 线程中修改**mTextView ，这是非法的，可能是 FC 的原因（如果不是任何其他问题）。**但是，您可以按如下方式实现：

改变这个：

```
mTextView.append(new String(buffer)); 
```

对此：

```
mTextView.post(new Runnable() {
    @Override
    public void run() {
        mTextView.append(new String(buffer));
    }
}); 
```

# performance - ASP.Net or Node.js in the following situation

> ID：10294457
> 
> 赞同：3
> 
> 时间：2012-04-24T08:37:54.060
> 
> 标签：performance, node.js, crud, asp.net-web-api

Good morning,

I am going to write a web service and I am not sure which framework would suit the situation best. I understand what Node and .Net are good at.

The client will call the services at the following stages:

App loads up - user logins in via Facebook API.

User can create an "entity". This entity will be stored in a database (SQL for .Net/ Azure table for Node) and also posted to a Facebook application (timeline stuff). User can make changes to this at any time.

User can browse Facebook Friends (Facebook API again).

Changes to the entity will be pushed to all users who have "joined" the same entity (SignalR .net/Socket.io Node).

That is the skeleton of the web services, there may be more Facebook calls or CRUD operations. Which Framework will handle this best?

Many thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T11:49:56.783

Aside from the mentioned WebAPI, also consider the excellent [ServiceStack](http://www.servicestack.net/) for building a webservice.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T08:52:59.437

Any *well-written code* regardless of the framework will be able to handle it.

If you are a .NET developer I personally think type safety of C# is important so I would not go down the Azure node.js way since it will also force me to use Azure.

I would personally use ASP.NET Web API.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T09:01:39.900

As long as you build your application on a solid framework, you'll be on the bright side (assuming you know how to set-up such an application in a secure and proper manner). For .NET i'd use the Web API and for node.js i'd stick with something like express/connect.

Just keep in mind that node.js and the frameworks based on it are still subject to heavy changes, whereas ASP.NET is production-safe since years.

As a bottom line, i don't think you're able to say "X is better than Y because of Z" in this scenario. It's a matter of personal preferences, infrastructure and your technical skills.

# java - 无法将 String 类型的值转换为 MethodSecurityMetadataSource (Spring 3.1)

> ID：10294462
> 
> 赞同：4
> 
> 时间：2012-04-24T08:38:12.050
> 
> 标签：java, spring, spring-security

从 Spring 3.0.0 升级到 3.1.0 后，我无法实例化 MethodSecurityInterceptor bean。这是在 Spring 3.0.0 中工作的原始 bean 定义：

```
<bean id="methodSecurityInterceptor" class="org.springframework.security.access.interce pt.aopalliance.MethodSecurityInterceptor">
  <property name="authenticationManager" ref="myAuthenticationManager" />
  <property name="accessDecisionManager" ref="myAccessDecisionManager" />
  <property name="securityMetadataSource">
  <value>
     com.myPackage.foo=ROLE_ADMIN
     com.myPackage.bar=ROLE_ADMIN
     com.myPackage.inner.*=ROLE_ADMIN
  </value>
</bean> 
```

## 抛出此异常：

```
exception is org.springframework.beans.ConversionNotSupportedEx ception: Failed to 
convert property value of type 'java.lang.String' to required type 
'org.springframework.security.access.method.Method SecurityMetadataSource' for property 'securityMetadataSource'; nested exception is java.lang.IllegalStateException: Cannot convert value of type [java.lang.String] to required type [org.springframework.security.access.method.MethodS ecurityMetadataSource] for property 'securityMetadataSource': no matching editors or conversion strategy found
at org.springframework.beans.factory.support.Abstract AutowireCapableBeanFactory.doCreateBean(AbstractAu towireCapableBeanFactory.java:527)
at org.springframework.beans.factory.support.Abstract AutowireCapableBeanFactory.createBean(AbstractAuto wireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.Abstract BeanFactory$1.getObject(AbstractBeanFactory.java:2 93)
at org.springframework.beans.factory.support.DefaultS ingletonBeanRegistry.getSingleton(DefaultSingleton BeanRegistry.java:222)
at org.springframework.beans.factory.support.Abstract BeanFactory.doGetBean(AbstractBeanFactory.java:290 )
at org.springframework.beans.factory.support.Abstract BeanFactory.getBean(AbstractBeanFactory.java:196)
at org.springframework.aop.support.AbstractBeanFactor yPointcutAdvisor.getAdvice(AbstractBeanFactoryPoin tcutAdvisor.java:80)
at org.springframework.aop.aspectj.AspectJProxyUtils. isAspectJAdvice(AspectJProxyUtils.java:67)
at org.springframework.aop.aspectj.AspectJProxyUtils. makeAdvisorChainAspectJCapableIfNecessary(AspectJP roxyUtils.java:49)
at org.springframework.aop.aspectj.autoproxy.AspectJA wareAdvisorAutoProxyCreator.extendAdvisors(AspectJ AwareAdvisorAutoProxyCreator.java:101)
at org.springframework.aop.framework.autoproxy.Abstra ctAdvisorAutoProxyCreator.findEligibleAdvisors(Abs tractAdvisorAutoProxyCreator.java:88)
at org.springframework.aop.framework.autoproxy.Abstra ctAdvisorAutoProxyCreator.getAdvicesAndAdvisorsFor Bean(AbstractAdvisorAutoProxyCreator.java:68)
at org.springframework.aop.framework.autoproxy.Abstra ctAutoProxyCreator.wrapIfNecessary(AbstractAutoPro xyCreator.java:359)
at org.springframework.aop.framework.autoproxy.Abstra ctAutoProxyCreator.postProcessAfterInitialization( AbstractAutoProxyCreator.java:322)
at org.springframework.beans.factory.support.Abstract AutowireCapableBeanFactory.applyBeanPostProcessors AfterInitialization(AbstractAutowireCapableBeanFac tory.java:407)
at org.springframework.beans.factory.support.Abstract AutowireCapableBeanFactory.initializeBean(Abstract AutowireCapableBeanFactory.java:1426)
at org.springframework.beans.factory.support.Abstract AutowireCapableBeanFactory.doCreateBean(AbstractAu towireCapableBeanFactory.java:519)
... 24 more
Caused by: org.springframework.beans.ConversionNotSupportedEx ception: Failed to convert property value of type 'java.lang.String' to required type 'org.springframework.security.access.method.Method SecurityMetadataSource' for property 'securityMetadataSource'; nested exception is java.lang.IllegalStateException: Cannot convert value of type [java.lang.String] to required type [org.springframework.security.access.method.MethodS ecurityMetadataSource] for property 'securityMetadataSource': no matching editors or conversion strategy found
at org.springframework.beans.BeanWrapperImpl.convertI fNecessary(BeanWrapperImpl.java:481)
at org.springframework.beans.BeanWrapperImpl.convertF orProperty(BeanWrapperImpl.java:518)
at org.springframework.beans.BeanWrapperImpl.convertF orProperty(BeanWrapperImpl.java:512)
at org.springframework.beans.factory.support.Abstract AutowireCapableBeanFactory.convertForProperty(Abst ractAutowireCapableBeanFactory.java:1371)
at org.springframework.beans.factory.support.Abstract AutowireCapableBeanFactory.applyPropertyValues(Abs tractAutowireCapableBeanFactory.java:1330)
at org.springframework.beans.factory.support.Abstract AutowireCapableBeanFactory.populateBean(AbstractAu towireCapableBeanFactory.java:1086)
at org.springframework.beans.factory.support.Abstract AutowireCapableBeanFactory.doCreateBean(AbstractAu towireCapableBeanFactory.java:517)
... 40 more
Caused by: java.lang.IllegalStateException: Cannot convert value of type [java.lang.String] to required type [org.springframework.security.access.method.MethodS ecurityMetadataSource] for property 'securityMetadataSource': no matching editors or conversion strategy found
at org.springframework.beans.TypeConverterDelegate.co nvertIfNecessary(TypeConverterDelegate.java:233)
at org.springframework.beans.BeanWrapperImpl.convertI fNecessary(BeanWrapperImpl.java:466)
... 46 more 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T08:41:49.567

负责将您出现的字符串转换为`securityMetadataSource` `value`MethodSecurityMetadataSource 实例的类 - [MethodSecurityMetadataSourceEditor](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/access/method/MethodSecurityMetadataSourceEditor.html)在 Spring 3.1 中被删除，这就是您收到异常的原因。

虽然在 3.1 中添加了一个新类：[MethodSecurityMetadataSourceBeanDefinitionParser](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/config/method/MethodSecurityMetadataSourceBeanDefinitionParser.html)。它在您的 XML 文件中为您提供了一个新标签。
所以，而不是：

```
 <value>
     com.myPackage.foo=ROLE_ADMIN
     com.myPackage.bar=ROLE_ADMIN
     com.myPackage.inner.*=ROLE_ADMIN
  </value> 
```

你现在可以写：

```
 <s:method-security-metadata-source> 
    <s:protect method="com.myPackage.foo" access="ROLE_ADMIN"/>
    <s:protect method="com.myPackage.bar" access="ROLE_ADMIN"/>
    <s:protect method="com.myPackage.inner.*" access="ROLE_ADMIN"/>
 </s:method-security-metadata-source> 
```

PS：不要忘记将 xml 架构更新到 3.1：

```
xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd"> 
```

# android - 有什么方法可以知道其中一个应用程序何时打开？

> ID：10294463
> 
> 赞同：1
> 
> 时间：2012-04-24T08:38:15.640
> 
> 标签：android

我想做一个小服务来记录应用程序打开的次数。

例如，当我打开网络浏览器时，网络浏览器的计数器会增加。

当我打开谷歌市场时，谷歌标记的计数器会增加。

那么，打开应用程序时如何增加每个应用程序的计数器？

# regex - www 的所有子域，但有例外

> ID：10294468
> 
> 赞同：1
> 
> 时间：2012-04-24T08:38:50.490
> 
> 标签：regex

我有一个真正困扰我的正则表达式！

我想要的是所有子域，除了`www.domain.com`去`www.domain.com` 这实际上有效，但`w.domain.com`不匹配。实际上，如果子域包含字符“w”它会失败。

这是它的外观：

```
[^www]+\.domain.com 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:41:53.123

方括号, `[]`, 表示一个字符类。在字符类中使用`^`意味着您正在否定它。`[^www]`实际上意味着*除了* `w`要匹配的任何字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T09:12:35.860

```
.*(?<!www).domain.com 
```

将匹配所有子域，除了`www.domain.com`

在这里查看[http://regexr.com?30od1](http://regexr.com?30od1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-17T19:09:12.983

我知道这是旧的 - 但为了避免重复的帖子 - 你会如何做相反的事情？

允许 www（可选）但排除所有子域？

允许 www.domain.com domain.com

不允许 spider.domain.com me.domain.com

# c# - 确定所有线程何时完成c#

> ID：10294469
> 
> 赞同：9
> 
> 时间：2012-04-24T08:39:00.040
> 
> 标签：c#, multithreading, thread-safety

作为 C# 的初学者，我对线程非常陌生。我有一个程序将在 Windows 应用程序内触发多个线程。我的目标是为列表中的每个项目启动一个新线程。此列表中的项目是网络上的工作站名称。创建的每个线程都将在每台机器上进行修复，当线程完成时，它将写入发现的任何错误等的日志文件。但我想要确定的是所有线程何时完成。因此，如果我有 100 台机器、100 个线程，我如何确定何时全部关闭？

下面是我的方法：-

```
private void repairClientsToolStripMenuItem_Click(object sender, EventArgs e)
{
    if (machineList.Count() != 0)
    {
        foreach (string ws in machineList)
        {
            new Thread(new ParameterizedThreadStart(fixClient), stack).Start(ws);
        }
    }
    else
    {
         MessageBox.Show("Please import data before attempting this procedure");
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-24T08:42:18.833

这样做的方法是保留对所有线程的引用，然后[加入](http://msdn.microsoft.com/en-us/library/95hbf2ta.aspx)它们。这基本上意味着当前线程将阻塞，直到加入的线程完成。

将循环更改为：

```
foreach (string ws in machineList)
{
   var thread = new Thread(new ParameterizedThreadStart(fixClient), stack);
   _machineThreads.Add(thread)
   thread.Start();
} 
```

（其中 _machineThreads 是 的列表`System.Thread`）

然后，您可以阻止，直到所有内容都完成，例如：

```
private void WaitUntilAllThreadsComplete()
{
   foreach (Thread machineThread in _machineThreads)
   {
      machineThread.Join();
   } 
} 
```

**但是**-您几乎可以肯定不希望在您描述的场景中这样做：

*   您不应该创建大量线程 - 显式创建数百个线程不是一个好主意
*   您应该更喜欢其他方法 - 尝试查看[Parallel.ForEach](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.foreach.aspx)和[System.Threading.Task](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)。这些天来，.Net 在处理线程和异步任务时为您提供了很多帮助——我真的建议您阅读它，而不是尝试使用显式线程“滚动您自己的”。
*   这看起来像一个点击处理程序。它是 ASP.NET Web 表单还是桌面应用程序？如果是前者，我当然不建议生成大量线程来从请求中执行后台任务。无论哪种情况，您真的希望您的网页或 GUI 在等待线程完成时阻塞吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T08:48:31.610

你可以使用：IsAlive。但是你有一个参考，比如

```
 Thread t = new Thread(new ThreadStart(...));
 t.start();
 if(t.IsAlive)
 {
    //do something
 }
 else
 {
    //do something else
 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T09:04:29.773

另一个想法是在单独的线程中使用 Parallel.ForEach：如果你有太多机器要修复，这也是安全的

```
private void repairClientsToolStripMenuItem_Click(object sender, EventArgs e)
{

    if (machineList.Count() != 0)
    {
        AllFinished=False;
        new Thread(new ThreadStart(fixAllClients).Start();
    }
    else
    {
         MessageBox.Show("Please import data before attempting this procedure");
    }
}

private void fixAllClients(){
    var options = new ParallelOptions{MaxDegreeOfParallelism=10};
    Parallel.ForEach(machineList. options, fixClient);
    AllFinished=True;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-24T09:35:02.573

永远不要在 GUI 事件处理程序中等待线程完成或其他任何事情。如果您产生许多线程，（是的，不要这样做 - 请参阅 Rob 的帖子），或将许多任务提交到线程池，最后一个完成执行的实体应该向 GUI 线程发出作业完成的信号。通常，这涉及调用某个对象，该对象对剩余的任务/线程进行倒计时，并在最后一个触发时发出信号。查看 System.Threading.CountdownEvent。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-24T10:16:51.707

还有一种使用 CountdownEvent 类的替代方法。

启动线程的代码必须增加一个计数器，并将一个 CountdownEvent 对象传递给每个线程。每个线程在完成时都会调用 CountdownEvent.Signal()。

以下代码说明了这种方法：

```
using System;
using System.Threading;
using System.Threading.Tasks;

namespace ConsoleApplication6
{
    class Program
    {
        static void Main(string[] args)
        {
            int numTasks = 20;
            var rng = new Random();

            using (var finishedSignal = new CountdownEvent(1))
            {
                for (int i = 0; i < numTasks; ++i)
                {
                    finishedSignal.AddCount();
                    Task.Factory.StartNew(() => task(rng.Next(2000, 5000), finishedSignal));
                }

                // We started with a count of 1 to prevent a race condition.
                // Now we must decrement that count away by calling .Signal().

                finishedSignal.Signal(); 
                Console.WriteLine("Waiting for all tasks to complete...");
                finishedSignal.Wait();
            }

            Console.WriteLine("Finished waiting for all tasks to complete.");
        }

        static void task(int sleepTime, CountdownEvent finishedSignal)
        {
            Console.WriteLine("Task sleeping for " + sleepTime);
            Thread.Sleep(sleepTime);
            finishedSignal.Signal();
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-24T13:28:36.470

让我们先解决一些问题。

*   不要为此创建单独的线程。线程是一种昂贵的资源。而是使用线程池技术。
*   不要通过调用 , 或任何其他阻塞机制来阻塞 UI`Thread.Join`线程`WaitHandle.WaitOne`。

以下是我将如何使用 TPL 执行此操作。

```
private void repairClientsToolStripMenuItem_Click(object sender, EventArgs e) 
{ 
  if (machineList.Count() != 0) 
  { 
    // Start the parent task.
    var task = Task.Factory.StartNew(
      () =>
      {
        foreach (string ws in machineList)
        {
          string capture = ws;
          // Start a new child task and attach it to the parent.
          Task.Factory.StartNew(
            () =>
            {
              fixClient(capture);
            }, TaskCreationOptions.AttachedToParent);
        }
      }, TaskCreationOptions.LongRunning);

    // Define a continuation that happens after everything is done.
    task.ContinueWith(
      (parent) =>
      {
        // Code here will execute after the parent task including its children have finished.
        // You can safely update UI controls here.
      }, TaskScheduler.FromCurrentSynchronizationContext);
  } 
  else 
  { 
    MessageBox.Show("Please import data before attempting this procedure"); 
  } 
} 
```

我在这里所做的是创建一个父任务，它本身会启动子任务。请注意，我使用`TaskCreationOptions.AttachedToParent`将子任务与其父任务相关联。然后在我调用的父任务上，该任务在父任务`ContinueWith`及其所有子任务完成后执行。我`TaskScheduler.FromCurrentSynchronizationContext`用来让 UI 线程上的继续发生。

这是使用`Parallel.ForEach`. 请注意，这是一个更清洁的解决方案。

```
private void repairClientsToolStripMenuItem_Click(object sender, EventArgs e) 
{ 
  if (machineList.Count() != 0) 
  { 
    // Start the parent task.
    var task = Task.Factory.StartNew(
      () =>
      {
        Parallel.Foreach(machineList,
          ws =>
          {
            fixClient(ws);
          });
      }, TaskCreationOptions.LongRunning);

    // Define a continuation that happens after everything is done.
    task.ContinueWith(
      (parent) =>
      {
        // Code here will execute after the parent task has finished.
        // You can safely update UI controls here.
      }, TaskScheduler.FromCurrentSynchronizationContext);
  } 
  else 
  { 
    MessageBox.Show("Please import data before attempting this procedure"); 
  } 
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-02T23:08:57.043

Brian 的解决方案不完整并产生语法错误。如果不是因为语法错误，它将起作用并解决初始海报的问题。我不知道如何修复语法错误，因此我发布了这个问题以便解决它，以便可以解决最初的问题。请不要删除此消息。这与回答的最初问题有关。

@Brian Gideon：您的解决方案将是完美的，但以下代码除外：

```
// Define a continuation that happens after everything is done.
parent.ContinueWith(
  () =>
  {
    // Code here will execute after the parent task has finished.
    // You can safely update UI controls here.
  }, TaskScheduler.FromCurrentSynchronizationContext); 
```

与此相关的具体问题在于 () => 部分。这会产生一个语法错误，显示为*Delegate System.Action "System.Threading.Tasks.Task" does not take 0 arguments*

我真的希望这能奏效，但我不知道解决方案。我试图查找错误，但我不明白它需要什么参数。如果有人能回答这个问题，那将非常有帮助。这是这个问题唯一缺失的部分。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-04-24T08:55:29.950

您可以`WaitHandle`为您等待的每个线程创建：

```
WaitHandle[] waitHandles = new WaitHandle[machineList.Count()]; 
```

添加`ManualResetEvent`到列表并将其传递给线程：

```
for (int i = 0; i < machineList.Count(); i++)
{
    waitHandles[i] = new ManualResetEvent(false);
    object[] parameters = new object[] { machineList[i], waitHandles[i] };
    new Thread(new ParameterizedThreadStart(fixClient), stack).Start(parameters);
}

// wait until each thread will set its manual reset event to signaled state
EventWaitHandle.WaitAll(waitHandles); 
```

在你里面线程方法：

```
public void fixClient(object state)
{
    object[] parameters = (object[])state;
    string ws = (string)parameters[0];
    EventWaitHandle waitHandle = (EventWaitHandle)parameters[1];

    // do your job 

    waitHandle.Set();
} 
```

当所有线程都设置它们的等待句柄时，主线程将继续执行。

# python - 将 python 脚本重定向到另一个 python 脚本以验证登录凭据

> ID：10294473
> 
> 赞同：0
> 
> 时间：2012-04-24T08:39:18.583
> 
> 标签：python, cgi

我有一个登录 python 脚本，我想在其中获取用户名和密码并将其传递给另一个 python 脚本，该脚本使用数据库中的值验证用户名和密码。如果用户存在，它将创建一个cookie，并在cookie中设置用户名值并重定向到下一页，否则，它将返回到上一页。

这是我的 index.py 代码：

```
#!/usr/bin/python
import cgi;
import cgitb;
import sqlite3;
import os;
import Cookie;
import sys;

cgitb.enable()
form= cgi.FieldStorage()
username= None
userID = None
userPW= None

#Open connection
conn= sqlite3.connect("manager.db")
cur= conn.cursor()

def createdb():
    ###Create table login
    conn.execute(""" CREATE TABLE login (userid INTEGER PRIMARY KEY ,
    username TEXT, passwrd TEXT)""")
    ##
    ###Create table excursion
    conn.execute(""" CREATE TABLE excursion (excurid INTEGER PRIMARY KEY,
    location TEXT, excurDate TEXT, excurTime TEXT, user INTEGER, FOREIGN KEY(user) REFERENCES login(userid))""")
    ##
    #Create table sighting
    conn.execute(""" CREATE TABLE sighting (sightid INTEGER PRIMARY KEY,
    species TEXT, observation TEXT, loginuser INTEGER, userexcursion INTEGER, FOREIGN KEY(loginuser, userexcursion) REFERENCES excursion (user, excurid))""")
    ##
    #Insert username and password in login table
    conn.execute("""INSERT INTO login (userid,username,passwrd) VALUES(NULL,'Diego','diego')""")
    conn.commit()

    #Insert dummy data in excursion table
    conn.execute("""INSERT INTO excursion (excurid,location,excurDate,excurTime,user) VALUES(NULL,'Macquarie','04/01/2012','6:00pm',1)""")
    conn.execute("""INSERT INTO excursion (excurid,location,excurDate,excurTime,user) VALUES(NULL,'Carlton','04/05/2012','7:00am',1)""")
    conn.commit()

    #Insert dummy data in sighting table
    conn.execute("""INSERT INTO sighting (sightid,species,observation,loginuser,userexcursion) VALUES(NULL,'Duck','long beak',1,1)""")
    conn.execute("""INSERT INTO sighting (sightid,species,observation,loginuser,userexcursion) VALUES(NULL,'Parrots','beautiful and colorful',1,2)""")
    conn.commit()
    conn.close()       

if not os.path.exists("manager.db"):
    createdb();

#define start of page
pagehead1= """
    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
    <html>
    <head>
        <title> Home </title>
        <link rel='stylesheet' type='text/css' href='/index.css/'/>
    </head>

    <body>
"""

pagehead2="""

        <form method=POST action="http://localhost:8000/cgi-bin/validate.py">
            <div id="container">
                <div id="header">
                    <h1> Field Note Manager </h1>
                    <p class= "description"> Observe...Record...Save! </p>
                </div>

                <div id="wrapper">
                    <div id="content">
                        <p> Username: <input type="text" name="usernameLogin"/> </p>
                        <br/>
                        <p> Password: <input type="password" name="passwordLogin"/> </p>
                        <br/>
                        <p id="login"> <input type="submit" name="loginBtn" value="Login"/> </p>
                    </div>
                </div>

                <div id="footer">
                    <p> Copyright 42578647, 2012 </p>
                </div>
            </div>
    """

pagefoot= """ </form>
                  </body>
                  </html> """

print "Content_type: text/html\n\n"
print pagehead1
print pagehead2
print pagefoot 
```

这是我使用数据库验证用户名的代码：

```
#! usr/local/bin/python
import cgi;
import cgitb;
import Cookie;
import os;
import sqlite3;

#open connection
conn= sqlite3.connect("manager.db")
cur= conn.cursor()

username= None
form= cgi.FieldStorage()

UserPW= [form.getvalue('usernameLogin'), form.getvalue('passwordLogin')]
isValidate = validate(UserPW);

if isValidate == 1:
    print "Content_type: text/html\n\n"
    print """
    <html>
        <head> Redirecting </head>
        <body>
            <form method= POST action="http://localhost:8000/cgi-bin/page1.py">
            <p> Validated! <input type="submit" value="Enter"/> </p>
            </form>
        </body>
    </html> """
elif isValidate == 0:
    print "Content_type: text/html\n\n"
    print """
    <html>
        <head> Redirecting </head>
        <body>
            <form method=POST action= "http://localhost:8000/cgi-bin/index.py">
                <p> Username or Password incorrect! <input type="submit" value="Go back"/> </p>
            </form>
        </body>
    </html>
    """

def validate(UserPW):
    sql= "SELECT * FROM login"
    userPWDatabase=cur.execute(sql)
    cur.fetchall()
    for record in userPWDatabase:
        if record == UserPW:
            #Create cookie
            C= Cookie.SimpleCookie()
            #take the value of the index.py form variable username
            username= form.getvalue('usernameLogin')
            #set the cookie with the usernameLogin key
            C['usernameLogin']= username
            print C
            return 1
        else:
            return 0 
```

我不知道问题出在哪里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:01:56.253

您能否提供比“我不知道问题出在哪里”更详细的信息：到底发生了什么，如果有的话，您会收到什么日志消息。

您是否尝试在调用“验证”函数定义之前对其进行移动？我认为这可能是您问题的一部分。

* * *

更新：经过一些调查和一些修复后，我得到了它的工作：

1.  如前所述，“验证”函数定义应在调用之前设置
2.  您的 sql 查询不正确，因为“SELECT * FROM login”将返回 3 个字段（id、username 和 passwrd），因此您应该将其更改为“SELECT username,passwrd FROM login”
3.  sqlite 返回的记录是一个元组，并且您正在尝试将其与列表进行比较，因此存在 TYPE 不匹配。一种解决方案是否更改为：“如果列表（记录）== UserPW：”

此外，在 ubuntu 下查看 /var/log/apache2/error.log 有很大帮助。

这最终导致：

```
#!/usr/bin/env python

import cgi;
import cgitb;
import Cookie;
import os;
import sqlite3;

#open connection
conn= sqlite3.connect("manager.db")
cur= conn.cursor()

username= None
form= cgi.FieldStorage()

def validate(UserPW):
      sql= "SELECT username,passwrd FROM login;"
      cur.execute(sql)
      userPWDatabase=cur.fetchall()
      for record in userPWDatabase:
          if list(record) == UserPW:
              #Create cookie
              C= Cookie.SimpleCookie()
              #take the value of the index.py form variable username
              username= form.getvalue('usernameLogin')
              #set the cookie with the usernameLogin key
              C['usernameLogin']= username
              print C
              return 1
          else:
              return 0              

UserPW= [form.getvalue('usernameLogin'), form.getvalue('passwordLogin')]
isValidate = validate(UserPW);

if isValidate == 1:
      print "Content-type: text/html\n\n"
      print """
      <html>
          <head> Redirecting </head>
          <body>
              <form method= POST action="http://localhost:8000/cgi-bin/page1.py">
              <p> Validated! <input type="submit" value="Enter"/> </p>
              </form>
          </body>
      </html> """
elif isValidate == 0:
      print "Content-type: text/html\n\n"
      print """
      <html>
          <head> Redirecting </head>
          <body>
              <form method=POST action= "http://localhost:8000/cgi-bin/index.py">
                  <p> Username or Password incorrect! <input type="submit" value="Go back"/> </p>
              </form>
          </body>
      </html>
      """ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:22:14.600

我将代码 validate.py 更改为：

```
 #! usr/local/bin/python
import cgi;
import cgitb;
import Cookie;
import os;
import sqlite3;

cgitb.enable()
username= None
form= cgi.FieldStorage()

#open connection
conn= sqlite3.connect("manager.db")
cur= conn.cursor()

pagehead= """
    <html>
        <head> Redirecting </head>
        <body>

            """
pagefoot="""<form method= POST action="http://localhost:8000/cgi-bin/page1.py">
            <p> Validated! <input type="submit" value="Enter"/> </p>
            </form>
        </body>
    </html> """
errorpagefoot= """
<form action="http://localhost:8000/cgi-bin/index.py">
<p> Error! <input type="submit" value="Go Back"/> </p>
</form>
</body>
</html>"""

print "Content_type: text/html\n\n"
print pagehead
userName= form.getvalue('usernameLogin')
userPW= form.getvalue('passwordLogin')
userPWDatabase = conn.execute("SELECT username,passwrd FROM login WHERE username=? and passwrd=?",[userName,userPW])
cur.fetchone()
for result in userPWDatabase:
    userDb= result[0]
    pwDb= result[1]
    if userDb == userName and pwDb == userPW:
        #Create Cookie
        C= Cookie.SimpleCookie()
        #take the value of usernameLogin into the variable username
        username= form.getvalue('usernameLogin')
        #Set-Cookie header with the usernameLogin key
        C['usernameLogin'] = username
        print C
        print pagefoot    
    elif userDb != userName and pwDb != userPW:
        print errorpagefoot 
```

它现在正在工作，但它不再重定向到上一页，以防用户名或密码不正确

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T12:02:28.237

好的，在阅读了您的新代码之后，您似乎仍然有几个错误，但我认为主要错误是您尝试检查登录名/密码的方式：首先您从数据库中选择它，对用户名和密码进行过滤，这可以仅返回 1 或 0 结果，因为登录名是您的数据库中的主要登录名，然后您尝试循环检查结果并检查用户名和密码是否都正确或都不正确，因此不包括用户名是正确但不是密码（和反密码）。因此，我建议您为此更改代码的最后一部分：

```
print "Content-type: text/html\n\n"
print pagehead
userName= form.getvalue('usernameLogin')
userPW= form.getvalue('passwordLogin')
cur.execute("SELECT username,passwrd FROM login WHERE username=?",[userName])
userPWDatabase = cur.fetchone()
if userPWDatabase is not None:
        userDb= userPWDatabase[0]
        pwDb= userPWDatabase[1]
        #Create Cookie
        C= Cookie.SimpleCookie()
        #take the value of usernameLogin into the variable username
        username= form.getvalue('usernameLogin')
        #Set-Cookie header with the usernameLogin key
        C['usernameLogin'] = username
        print C
        print pagefoot    
else:
        print errorpagefoot 
```

请注意，您还可以使用过滤器对用户名和密码保留 SQL 查询，但是您不需要检查其他任何内容：如果没有结果，则两个字段之一不正确，并且有一个字段一定是好的。

此外，我不知道您的目标是什么（学习 cgi-bin/python 或设置一个真正的应用程序），但您可能有兴趣看看 Django（[www.djangoproject.com](http://www.djangoproject.com)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T12:16:17.403

我刚刚读到 Set-Cookie 标头的内容应该在该行之前：

```
print "Content_type: text/html\n\n" 
```

所以，我再次修复了我的代码，它现在工作正常。如果用户名/密码错误，它会返回上一个脚本，并在验证后继续下一个脚本这是最终代码：

```
#! usr/local/bin/python
import cgi;
import cgitb;
import Cookie;
import os;
import sqlite3;

cgitb.enable()
username= None
form= cgi.FieldStorage()

#open connection
conn= sqlite3.connect("manager.db")
cur= conn.cursor()

pagehead= """
    <html>
        <head> Redirecting </head>
        <body>

            """
pagefoot="""<form method= POST action="http://localhost:8000/cgi-bin/page1.py">
            <p> Validated! <input type="submit" value="Enter"/> </p>
            </form>
        </body>
    </html> """
errorpagefoot= """
<form action="http://localhost:8000/cgi-bin/index.py">
<p> Error! <input type="submit" value="Go Back"/> </p>
</form>
</body>
</html>"""

userName= form.getvalue('usernameLogin')
userPW= form.getvalue('passwordLogin')
userPWDatabase = conn.execute("SELECT username,passwrd FROM login WHERE username=? and passwrd=?",[userName,userPW])
cur.fetchone()
for result in userPWDatabase:
    userDb= result[0]
    pwDb= result[1]
    if userDb == userName and pwDb == userPW:
        #Create Cookie
        C= Cookie.SimpleCookie()
        #take the value of usernameLogin into the variable username
        username= form.getvalue('usernameLogin')
        #Set-Cookie header with the usernameLogin key
        C['usernameLogin'] = username
        print C
    elif userDb != userName and pwDb != userPW:
        print errorpagefoot

print "Content_type: text/html\n\n"
print pagehead
if username:
    print pagefoot
else:
    print errorpagefoot 
```

@亚历克西斯

感谢您的时间和帮助亚历克西斯 :)

# c# - WebClient 将 JPG 和 GIF 加载到图像

> ID：10294479
> 
> 赞同：0
> 
> 时间：2012-04-24T08:39:48.980
> 
> 标签：c#, windows-phone-7, gif, jpeg

在我的 XAML 中，我有：

```
<Image Height="150" HorizontalAlignment="Left" Margin="0,4,0,0" Name="imgLogo" Stretch="Fill" VerticalAlignment="Top" Width="417" />
<Image Height="343" HorizontalAlignment="Left" Margin="0,155,0,0" Name="imgPhoto" Stretch="Fill" VerticalAlignment="Top" Width="417" /> 
```

在后面的 C# 代码中，我有：

```
WebClient wcForLogo = new WebClient();
wcForLogo.DownloadStringCompleted += new DownloadStringCompletedEventHandler(wcForLogo_DownloadStringCompleted);
wcForLogo.DownloadStringAsync(new Uri("http://mySite/logo.gif"));

WebClient wcForPhoto = new WebClient();
wcForPhoto.DownloadStringCompleted += new DownloadStringCompletedEventHandler(wcForPhoto_DownloadStringCompleted);
wcForPhoto.DownloadStringAsync(new Uri("http://mySite/photo.jpg")); 
```

但现在我不知道如何捕捉图像并将其发布到我构建的 XAML 控件中。

2个问题：

1.  有没有办法将 e.Result 直接复制到 Image 控件，或者我应该缓存图像并将缓存用作源，还是应该将图像保存到隔离存储然后将其用作源，然后删除完成后的图像？无论哪种情况，你能告诉我如何使用代码吗？
2.  GIF 和 JPG 的处理方式不同吗？如果是这样，你能告诉我两种不同的方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:09:55.987

如果只想显示图片，则不必使用 WebClient。您可以直接在图像源中设置 Uri，控件将负责下载：

```
imgLogo.Source = new BitmapImage(new Uri("images/yourPicture.png", UriKind.Relative)); 
```

请注意，图像控件不支持 GIF。您仍然可以使用 ImageTools 库中的转换器来显示它们：使用[Silverlight 在 WP7 应用程序中显示 GIF](https://stackoverflow.com/questions/4152564/display-gif-in-a-wp7-application-with-silverlight)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T09:01:23.033

```
using System.Net;
using System.IO;
        private void Form1_Load(object sender, EventArgs e)
        {
            WebClient webclient = new WebClient();
            webclient.DownloadDataAsync(new Uri("http://mySite/logo.gif"));
            webclient.DownloadDataCompleted += callback;

        }
        void callback(object sender,DownloadDataCompletedEventArgs e)
        {
            var ms = new MemoryStream(e.Result);
            pictureBox1.Image = Image.FromStream(ms);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T08:59:48.610

如果您想保存在隔离存储中，请像这样使用

```
 WebClient m_webClient = new WebClient();

            Uri m_uri = new Uri("http://URL");

            m_webClient.OpenReadCompleted += new OpenReadCompletedEventHandler(webClient_OpenReadCompleted);

            m_webClient.OpenReadAsync(m_uri);

        }

    void webClient_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
    {
        int count;

        Stream stream = e.Result;

        byte[] buffer = new byte[1024];

        using (IsolatedStorageFile isf = IsolatedStorageFile.GetUserStoreForApplication())
        {

            using (System.IO.IsolatedStorage.IsolatedStorageFileStream isfs = new IsolatedStorageFileStream("IMAGES.jpg", FileMode.Create, isf))
            {
                count = 0;

                while (0 < (count = stream.Read(buffer, 0, buffer.Length)))
                {
                    isfs.Write(buffer, 0, count);
                }

                stream.Close();
                isfs.Close();
            }
        } 
```

要获取图像形式 isostore：

字节[] 数据；

```
 using (IsolatedStorageFile isf = IsolatedStorageFile.GetUserStoreForApplication())
        {

            using (IsolatedStorageFileStream isfs = isf.OpenFile(uri, FileMode.Open, FileAccess.Read))
            {
                data = new byte[isfs.Length];
                isfs.Read(data, 0, data.Length);
                isfs.Close();
            }

        }

        MemoryStream ms = new MemoryStream(data);

        BitmapImage bi = new BitmapImage();

        bi.SetSource(ms);

If you give the image name as image then set the source as bi:

        image.source = bi; 
```

如果要直接添加

```
 WebClient client = new WebClient();
  Stream stream = client.OpenRead(imageUrl);
  Bitmap bitmap = new Bitmap(stream);
  image.source = bitmap; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T09:08:21.557

假设您的图像控件被调用`MyImage`，您可以这样做以从 URL 加载图像：

```
MyImage.Source = new System.Windows.Media.Imaging.BitmapImage(new Uri("http://mySite/photo.jpg")); 
```

无需为下载图像而做所有的工作，框架已经为您完成了！

# java - 地图叠加气球关闭

> ID：10294480
> 
> 赞同：0
> 
> 时间：2012-04-24T08:39:50.737
> 
> 标签：java, android

我正在开发一个应用程序，在该应用程序中我需要在 google mapview 中设置 itemize overlay 和 ballon popup，所以我只需继续[这个](https://github.com/jgilfelt/android-mapviewballoons)，它对我来说很好。现在当我点击 overlayitem 时，它会得到带有附加数据的气球（在帮助下充气机）现在在那个充气机文件上，我设置了一个关闭按钮，它出现在气球的顶部。所以当点击关闭时，气球会关闭。但是在这里我遇到了一个事件，即我如何在点击事件时关闭这个气球。

如果它是单独的活动，那么我可以通过简单地调用 finish() 方法来挑战关闭。

但这里有不同的问题......所以请帮我解决这个问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:28:17.520

最好使用 android-mapviewballoons。他有一个很棒且有用的图书馆供我们​​在 Google 地图中使用。

![在此处输入图像描述](../Images/97e83fd3a91c001dbcd60b72b66f0c10.png)

这是他的仓库：[https ://github.com/jgilfelt/android-mapviewballoons](https://github.com/jgilfelt/android-mapviewballoons)

# redirect - 如何在 Nginx 中重定向 URL

> ID：10294481
> 
> 赞同：143
> 
> 时间：2012-04-24T08:39:54.860
> 
> 标签：redirect, nginx, url-rewriting

我需要将每个[http://test.com](http://test.com)请求重定向到[http://www.test.com](http://www.test.com)。如何才能做到这一点。

在服务器块中，我尝试添加

```
rewrite ^/(.*) http://www.test.com/$1 permanent; 
```

但在浏览器中它说

> 页面未正确重定向
> 
> Firefox 检测到服务器正在以永远不会完成的方式重定向对该地址的请求。

我的服务器块看起来像

```
 server {
            listen       80;
            server_name  test.com;
            client_max_body_size   10M;
            client_body_buffer_size   128k;

            root       /home/test/test/public;
            passenger_enabled on;
            rails_env production;

            #rewrite ^/(.*) http://www.test.com/$1 permanent;
            #rewrite ^(.*)$ $scheme://www.test.com$1;

            error_page   500 502 503 504  /50x.html;
            location = /50x.html {
                    root   html;
            }
    } 
```

* * *

## 回答 #1

> 赞同：283
> 
> 时间：2012-04-24T18:29:54.293

做你想做的最好的方法是添加另一个服务器块：

```
server {
        #implemented by default, change if you need different ip or port
        #listen *:80 | *:8000;
        server_name test.com;
        return 301 $scheme://www.test.com$request_uri;
} 
```

并编辑您的主服务器块 server_name 变量，如下所示：

```
server_name  www.test.com; 
```

*重要提示*：新`server`块是正确的方法，[`if`是邪恶的](https://www.nginx.com/resources/wiki/start/topics/depth/ifisevil/)。如果可能，您必须使用位置和服务器`if`。`Rewrite`有时也很[邪恶](https://www.nginx.com/resources/wiki/start/topics/tutorials/config_pitfalls/#taxing-rewrites)，因此将其替换为`return`.

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-07-26T18:17:56.160

与此处的另一个答案类似，但将重写中的 http 更改为 $scheme，如下所示：

```
server {
        listen 80;
        server_name test.com;
        rewrite     ^ $scheme://www.test.com$request_uri? permanent;
} 
```

并编辑您的主服务器块 server_name 变量，如下所示：

```
server_name  www.test.com; 
```

我必须这样做才能将 www.test.com 重定向到 test.com。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-24T09:57:55.913

首先确保您已经安装了带有 HTTP 重写模块的 Nginx。要安装它，我们需要 pcre-library

[如何安装 pcre 库](http://www.asep.us/2011/05/30/nginx-instalation-pcre-library-not-found/)

如果上面提到的已经完成或者你已经有了它们，那么只需在你的 nginx 服务器块中添加下面的代码

```
 if ($host !~* ^www\.) {
    rewrite ^(.*)$ http://www.$host$1 permanent;
  } 
```

要从您可以使用的每个请求中删除 www

```
 if ($host = 'www.your_domain.com' ) {
   rewrite  ^/(.*)$  http://your_domain.com/$1  permanent;
  } 
```

所以你的服务器块看起来像

```
 server {
            listen       80;
            server_name  test.com;
            if ($host !~* ^www\.) {
                    rewrite ^(.*)$ http://www.$host$1 permanent;
            }
            client_max_body_size   10M;
            client_body_buffer_size   128k;

            root       /home/test/test/public;
            passenger_enabled on;
            rails_env production;

            error_page   500 502 503 504  /50x.html;
            location = /50x.html {
                    root   html;
            }
    } 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2020-02-26T18:12:03.707

这是“nginx 重定向”在 Google 上的热门搜索。如果您只是想重定向一个位置：

```
location = /content/unique-page-name {
  return 301 /new-name/unique-page-name;
} 
```

# vaadin - 如何在vaadin中更改表格的行颜色

> ID：10294485
> 
> 赞同：6
> 
> 时间：2012-04-24T08:40:03.440
> 
> 标签：vaadin

嗨，我正在使用 vaadin，我有一个表，我使用 addItem 方法添加项目，我想做的是在添加新项目时我必须进行一些测试并设置添加行的颜色。

例如 test 的结果是 1 那么行颜色应该是 Red ，如果结果是 2 行颜色应该是绿色。

那么任何帮助如何做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T10:03:33.193

您可以使用 CellStyleGenerator 执行此操作并将其应用于一行中的所有单元格。更多关于 CellStyleGenerator 的信息[在这里](https://vaadin.com/book/-/page/components.table.html#components.table.css)。

# python - 将键盘输入传递给 Aptana 中已调试的 Python 代码

> ID：10294489
> 
> 赞同：3
> 
> 时间：2012-04-24T08:40:16.920
> 
> 标签：python, debugging, keyboard, aptana

我正在编写一些旨在在 Windows 7 控制台上运行的 Python 代码（又名“命令提示符”）。该程序能够通过运行一个调用 MC VC++ 运行时例程的专用线程来接受用户`msvcrt.getch()`键盘[输入](http://docs.python.org/library/msvcrt.html)。

我在 Aptana 上调试此代码时遇到问题，因为当我运行调试器时，键盘输入被重定向到 IDE，并且不会“到达”程序。

场景如下：

*   在调试器下运行代码（App Explorer --> 右键main.py --> Debug As --> Python Run）
*   “Aptana 脚本控制台”开始显示程序的标准输出。
*   在脚本控制台中，我点击了用户输入，但它并没有被传递给正在运行的程序，而是被 IDE 截获，以允许我在程序上下文可用的情况下以交互方式评估 Python 语句（在大多数情况下这是一个很棒的功能）

我的问题是：是否可以绕过或暂时禁用此行为，以便将击键传递给调试的应用程序？

# jquery - 如何从 jQuery 对象中获取特定值？

> ID：10294491
> 
> 赞同：3
> 
> 时间：2012-04-24T08:40:27.010
> 
> 标签：jquery

如果我有这样的对象：

```
var item = {
    id: '1',
    description: 'something'
} 
```

那么我如何提取这些值之一呢？如果我做

```
alert($(item.id)); 
```

然后我只是收到一个警告说'对象对象'。我看了一下这篇文章：[从 jQuery 对象获取基本元素](https://stackoverflow.com/questions/47837/getting-the-base-element-from-a-jquery-object)并尝试调用

```
alert($(item).get(0)); 
```

但结果相同。

另外，从术语的角度来看，这样的对象叫什么，以便下次我可以更具体一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T08:42:57.917

只需使用：

```
alert(item.id); 
```

这：`$(item.id)`将 item.id 包装到一个 jQuery 对象中，这就是你得到“对象对象”的原因

附言

您正在创建的是[对象文字表示法](http://www.fotiweb.com/2006/12/13/javascript-object-literal-notation/)中的对象，即花括号内的一组逗号分隔的名称/值对。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:48:31.313

```
console.log(item.id) 
```

`$()`返回一个 jQuery 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T08:48:33.187

试试这个：

警报($item .prop('id'));

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T08:53:52.203

使用正常程序：

```
alert(item.id); 
```

使用 jQuery：

```
alert($(item).get(0).id); 
```

**笔记**

```
 $(item) -> return an array

 $(item).get(0) -> return object which is equal to (var item)

 $(item).get(0).id -> return id value 
```

# c# - 形状上的均匀分布算法

> ID：10294497
> 
> 赞同：0
> 
> 时间：2012-04-24T08:40:51.097
> 
> 标签：c#, algorithm, distribution, division

我很难将其优雅地公式化为算法。

因此，我有一个给定的直边形状（即正方形，尽管最终形状仅与端点无关）。我得到笛卡尔坐标系上的边界端点： (2,-2) (2,2) (-2,2) (-2,-2)

我得到了任意数量的点（即 7 个​​），我想沿着形状的边缘（在本例中为正方形）均匀地分布这些点 (x,y)。

我目前的想法是获得所有端点的总长度，将其除以点数以获得段长度（然后我根据边缘对其进行归一化）。然后我从一个端点到另一个端点找到这个数量之间的点并累积归一化切片，当这个总数超过 1.0 时，我迭代端点并取余数并从那里开始......或类似的东西。

有人可以帮我把它放到算法中（最好是 C#），或者如果你有更好的解决方案，请告诉我。我想有一种排序或分布/除法算法可能会产生相同的影响，但我找不到。我希望这不是很明显。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:46:07.630

这需要多普遍？另外，如何表示您的形状和点？你的算法似乎没问题；您需要帮助将其转换为代码吗？

* * *

好的，这是我想出的东西。代码注释：

*   distance 方法接受两个 Points 并返回它们之间的距离。
*   normalize 方法取两个点并返回从第一个点指向第二个点的法线向量。
*   Point 类具有将点乘以标量的 multiply 方法
*   Point 类具有浮点（或双精度）精度

顺便说一下，我正在使用 Point 类来表示向量。

我没有测试过这个，所以可能有错误。该算法如何处理精确区域可能存在问题（例如，您的正方形上正好有 4 个点）。如果有问题或有任何疑问，请告诉我！:)

```
Point[] shapePoints; //already initialized
int numPoints; //already initialized
Point[] retPoints = new Point[numPoints];
int totalLength;
for(int i = 1; i < shapePoints.length; i++){
    totalLength += distance(shapePoints[i], (shapePoints[i-1]));
}
float segLength = ((float) totalLength) / numPoints);
Point currShape = shapePoints[0];
Point nextShape = shapePoints[1];
Point prev = currShape;
int counter = 2;
while(numPoints > 0){
    Point norm = normalize(new Point(nextShape.x - currShape.x, nextShape.y - currShape.y));
    if(distance(nextShape, prev) < segLength){
        int tempLength = segLength;
        tempLength -= distance(nextShape, prev);
        currShape = nextShape;
        nextShape = shapePoints[counter];
        counter ++;
        norm = normalize(new Point(nextShape.x - currShape.x, nextShape.y - currShape.y));
        norm.multiply(tempLength);
    }
    else{
        norm.multiply(segLength);
    }       
    retPoints[numPoints - 1] = norm;
    prev = retPoints[numPoints - 1];
    numPoints --;
} 
```

* * *

```
Point normalize(Point p){
    int scale = Math.sqrt(p.x * p.x + p.y * p.y);
    p.x = p.x / scale;
    p.y = p.y / scale;
    return p;
} 
```

# .net - 错误模板显示在其他控件上方，应隐藏时

> ID：10294498
> 
> 赞同：16
> 
> 时间：2012-04-24T08:40:55.947
> 
> 标签：.net, wpf, validation, xaml, idataerrorinfo

我正在尝试使用该`IDataErrorInfo`接口在我的 WPF 应用程序中实现验证，但我遇到了一个不太理想的情况。

我有这个模板，当控件无法验证时使用

```
<ControlTemplate x:Key="errorTemplate">
    <DockPanel LastChildFill="true">
        <Border Background="Red" DockPanel.Dock="Right" Margin="5,0,0,0" Width="20" Height="20" CornerRadius="10"
                                    ToolTip="{Binding ElementName=customAdorner, Path=AdornedElement.(Validation.Errors)[0].ErrorContent}">
            <TextBlock Text="!" VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold" Foreground="White" />
        </Border>
        <AdornedElementPlaceholder Name="customAdorner" VerticalAlignment="Center" >
            <Border BorderBrush="red" BorderThickness="1" />
        </AdornedElementPlaceholder>
    </DockPanel>
</ControlTemplate> 
```

一切都很好，直到我尝试在未通过验证的控件上方显示某些内容，例如在其上方显示停靠项：

![正常显示](../Images/b2b84e267169d21f7b1d9857fc8c72d5.png) ![部分控件隐藏时显示](../Images/31009901f373c0aef5680f17fc549c16.png)

我怎样才能避免这种情况并让我的错误模板显示在停靠项下方，因为它应该？

**编辑**

我发现我可以`TextBox`用 an`AdornerDecorator`来解决这个问题，但我真的不想为`TextBox`我的应用程序中的每个控件都这样做。有没有办法用a`Style`或其他方式设置它？

**编辑 2**

我可能会更改默认`TextBox`ControlTemplate 以包含`AdornerDecorator`，但我不太热衷于更改 WPF 的任何默认控件模板。欢迎任何其他建议。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-24T10:11:02.190

好的，我找到了一个相对简单的解决方案，它不会强迫我更改任何控件模板。

`TextBox`而不是`AdornerDecorator`像这样装饰每个

```
<StackPanel>
    <AdornerDecorator>
        <TextBox Text={Binding ...} />
    </AdornerDecorator>
    <AdornerDecorator>
        <TextBox Text={Binding ...} />
    </AdornerDecorator>
</StackPanel> 
```

我可以`AdornerDecorator`将整个视图包裹起来，从而达到相同的效果。

```
<AdornerDecorator>
    <StackPanel>
        <TextBox Text={Binding ...} />
        <TextBox Text={Binding ...} />
    </StackPanel>
</AdornerDecorator> 
```

这样我可以在每个视图中最多定义一次。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-02T07:03:23.217

基于@AdiLester 很好的答案，如果您的控件是从基类派生的，并且您不想放入`AdornerDecorator`每个控件的 XAML，那么请这样：

```
public class MyBaseUserControl : UserControl
{
    public MyBaseUserControl()
    {

    }

    protected override void OnContentChanged(object oldContent, object newContent)
    {
        base.OnContentChanged(oldContent, newContent);

        if (!(newContent is AdornerDecorator))
        {
            this.RemoveLogicalChild(newContent);

            var decorator = new AdornerDecorator();
            decorator.Child = newContent as UIElement;

            this.Content = decorator;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T10:05:12.293

我会使用一种风格，这里有一个你可以轻松适应的例子。

请注意，ErrorContent 来自 (Validation.Errors).CurrentItem.ErrorContent，而不是 Errors[0]。虽然两者都可以工作，但后者会在您的输出窗口中乱扔吞咽异常，如此[处所述](http://demandingdev.blogspot.com/2010/11/wpf-validationtemplate.html)。

```
<Style x:Key="TextBoxStyle" TargetType="{x:Type TextBox}">
    <Setter Property="Margin" Value="0,0,16,0" />
    <Setter Property="VerticalAlignment" Value="Center" />
    <Setter Property="VerticalContentAlignment" Value="Center" />

    <!--
    Error handling
    -->
    <Setter Property="Validation.ErrorTemplate">
        <Setter.Value>
            <ControlTemplate>
                <DockPanel LastChildFill="True">
                    <TextBlock DockPanel.Dock="Right" Text=" *" 
                               Foreground="Red" FontWeight="Bold" FontSize="16" 
                               ToolTip="{Binding ElementName=placeholder, Path=AdornedElement.(Validation.Errors).CurrentItem.ErrorContent}"/>
                    <Border BorderBrush="Red"  BorderThickness="1">
                        <AdornedElementPlaceholder Name="placeholder"></AdornedElementPlaceholder>
                    </Border>
                </DockPanel>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Style.Triggers>
        <Trigger Property="Validation.HasError" Value="True">
            <Setter Property="Background" Value="LightYellow"/>
        </Trigger>
    </Style.Triggers>
</Style> 
```

# jquery - IE 上的 jQuery 函数性能

> ID：10294502
> 
> 赞同：4
> 
> 时间：2012-04-24T08:41:25.203
> 
> 标签：jquery, html, css, performance, internet-explorer

我有这个功能，当光标经过时，我用它来悬停并聚焦两个表格中的每一行，并聚焦于每个 tr 的点击。它工作得很好，但我遇到了 IE 问题，因为速度变慢了，我不明白为什么。谁能告诉我如何提高此功能的性能？

查看实时示例： http: [//mainpage.ueuo.com/](http://mainpage.ueuo.com/)

```
function rowSelection(){
        var rows = $('.interactive tr');
        rows.click(function () {
            var i = $(this).GetIndex() + 1; // nth-child is 1-based
            rows.removeClass('selectedRow');
            rows.filter(':nth-child(' + i + ')').addClass('selectedRow');
        });
        rows.hover(function(){
            var i = $(this).GetIndex() + 1;
            rows.filter(':nth-child(' + i + ')').addClass('hoverx');
        },function(){         
            rows.removeClass('hoverx');
        });
    };

jQuery.fn.GetIndex = function(){
    return $(this).parent().children().index($(this));
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:56:25.573

你不能使用基于 CSS 的悬停来代替吗？这将在所有浏览器中表现得更好，尤其是 IE。

```
.interactive tr:hover td {
    background: lime !important;
} 
```

如果你想坚持使用 JavaScript/jQuery，那么我建议你摆脱这个：

```
<meta http-equiv="X-UA-Compatible" content="IE=8"> 
```

这迫使 IE 使用 IE8 模式。IE8 模式比 IE9 模式慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:54:29.660

尝试这个

```
$(document).ready(function(){

 $(".interactive tr").hover(function() {
   $(this).addClass("hoverx");
    }, function() {
   $(this).removeClass("hoverx");
  });

 $(".interactive tr").click(function() {
  $(".interactive tr.selectedRow").removeClass("selectedRow");
     $(this).addClass("selectedRow");
  });​ 
}); 
```

# c++ - Gcc 找不到葡萄酒库

> ID：10294503
> 
> 赞同：0
> 
> 时间：2012-04-24T08:41:26.027
> 
> 标签：c++, c, gcc, opensuse, wine

编译 LMMS 时出现以下错误：

```
/usr/lib64/gcc/x86_64-suse-linux/4.6/../../../../x86_64-suse-linux/bin/ld: cannot find -lshell32
/usr/lib64/gcc/x86_64-suse-linux/4.6/../../../../x86_64-suse-linux/bin/ld: cannot find -lcomdlg32
/usr/lib64/gcc/x86_64-suse-linux/4.6/../../../../x86_64-suse-linux/bin/ld: cannot find -lgdi32
/usr/lib64/gcc/x86_64-suse-linux/4.6/../../../../x86_64-suse-linux/bin/ld: cannot find -ladvapi32
/usr/lib64/gcc/x86_64-suse-linux/4.6/../../../../x86_64-suse-linux/bin/ld: cannot find -luser32
/usr/lib64/gcc/x86_64-suse-linux/4.6/../../../../x86_64-suse-linux/bin/ld: cannot find -lkernel32
/usr/lib64/gcc/x86_64-suse-linux/4.6/../../../../x86_64-suse-linux/bin/ld: cannot find -lntdll 
```

我有 32 位和 64 位版本的 wine，所有库都位于 /usr/lib(64)/wine/

我应该怎么做才能让它编译？

制作文件：http : [//pastebin.com/kgUe0cW1](http://pastebin.com/kgUe0cW1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:28:52.440

在您的编译命令中添加此选项行？
`-L/usr/lib(64)/wine`

然后您的 ld 将找到该`.so`文件。

# regex - 正则表达式：否定字符

> ID：10294509
> 
> 赞同：2
> 
> 时间：2012-04-24T08:42:00.113
> 
> 标签：regex, regex-negation

快速提问 -

如何用 {x,y} 创建一种字符串语言，但用 (xy) 否定所有字符串？

**我的尝试到目前为止：**

`\bx*[^(xy)]*y\b` 或 `\by*[^(xy)]*x\b` 或`\b[^(xy)][xy]*[^(xy)]*\b`

最后一个是最不受限制的，但在 [^(xy)] 的多次使用中显得笨拙。

完全否定包含（xy）但允许所有其他组合的字符串的最懒惰最方便的方法是什么？

谢谢

**已编辑：**允许的示例字符串：xxxxxxx yyyyyyyyy yxxxx yyyyyyxx

*不允许*的示例字符串：xxxxyxxx xyxxxx yyyyxyyy yyyxyxy 等

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T08:48:54.467

如果我正确理解挑战，您描述的字符串语言可以以任意数量的 y 开头，后跟任意数量的 x，因为这些是唯一允许的两个字符，并且您不能将 ay 放在 x已经出现，因为这会导致字符串“xy”出现。

```
\by*x*\b 
```

当然，我假设您实际上是在寻找一种更通用的解决方案来解决不像您给出的那样简单的案例。在这种情况下，[否定的前瞻断言](http://www.regular-expressions.info/lookaround.html)是最简单的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T08:46:34.140

使用负前瞻

```
\b((?!xy)[xy])+\b 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T08:51:49.410

**尝试：**

`\bx[^xy\s]*y\b`

**解释：**

```
<!--
\bx[^xy\s]*y\b

Options: ^ and $ match at line breaks

Assert position at a word boundary «\b»
Match the character “x” literally «x»
Match a single character NOT present in the list below «[^xy\s]*»
   Between zero and unlimited times, as many times as possible, giving back as needed (greedy) «*»
   One of the characters “xy” «xy»
   A whitespace character (spaces, tabs, and line breaks) «\s»
Match the character “y” literally «y»
Assert position at a word boundary «\b»
--> 
```

# xpages - Xpages（日期时间戳）验证和评估顺序

> ID：10294510
> 
> 赞同：0
> 
> 时间：2012-04-24T08:42:01.813
> 
> 标签：xpages

```
if((!submittedBy( 'button1' )) && (!submittedBy( 'button2' ) 
{
    return true;
}
else
{
    var IsL2UserTxt = sessionScope.get("IsL2User");

    if(IsL2UserTxt == "Yes")
    {
        //Bring the issue Date&Time
        var start = getComponent("label_IssueDateDt").getValue();

        //Bring the Permenent Fix Target Date&Time 
        var end = this.getSubmittedValue();
        var dStart:NotesDateTime = session.createDateTime(start);
        var dEnd:NotesDateTime = session.createDateTime(end);

        if (!start)
        {
             return false;
        }
        else if (!end) 
        {
            return false;
        }
        else
        {
             print("Start: "+start+", End: "+end+",DStart: "+dStart+", DEnd: "+dEnd+", Time Diff: "+dEnd.timeDifference(dStart));
             return (dEnd.timeDifference(dStart) > 0 )
        }
    }
    else
    {
        return true;
    } 
} 
```

我的 xpage 中有两个 Date Timestamp 编辑框，我在我的第二个 datetime stamp（Permenent Fix tartget Date&Time）编辑框上编写了如上所示的 validateExpression 代码。此处需要验证，即永久修复目标日期和时间应该大于发布日期和时间（dEnd.timeDifference（dStart）> 0）。

****上面的代码在这样的情况下工作，如果发布日期是 24/04/2012 11:16:51 AM 并且永久修复目标日期和时间 23/04/2012 11:16:51 AM 。但如果我的永久修复目标日期和时间在 2012 年 5 月 4 日到 2012 年 4 月 12 日之间，它将失败。我认为日期时间格式存在问题，因为永久修复目标日期的提交值是这样的，例如 2012-04-12T11:16:45+05:30。****

那么是否有任何解决方案来格式化提交值的日期时间值以避免上述问题。

关于 xpages 中验证评估顺序的另一件事。作为验证错误消息控件，随机显示消息的顺序不正确。

寻找您的积极回应。

问候， 尤格什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T15:50:51.097

```
var doValidate = (submittedBy( 'button1' ) || submittedBy( 'button2' )) &&   (sessionScope.get("IsL2User") == "Yes");
if (!doValidate) return true;
var dtIssue = getComponent("label_IssueDateDt").getSubmittedValue();
var dtPermFix =  this.getSubmittedValue();
if ( (dtIssue == null) || (dtPermFix == null) ) return false;
var difference = I18n.parseDateXMI(dtPermFix) - I18n.parseDateXMI(dtIssue);
return difference > 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T04:46:37.837

```
Use NotesDateTime(start.getDateOnly), NotesDateTime(end.getDateOnly) 
```

我们可以单独约会。通过这种方式，我们可以轻松处理。其他解决方案是常见的javascript。将日期拆分为年、月和日。通过这种方式不是更好的方式，但这也是解决方案。

通常，出于安全原因，我们使用 SSJS。数据将保密。出于其他原因，尝试使用 CSJS，你会觉得很酷。

# wmi - 将 WMI 脚本转换为 WMIC

> ID：10294511
> 
> 赞同：2
> 
> 时间：2012-04-24T08:42:04.213
> 
> 标签：wmi, wmi-query, wmic

我如何在 WMI 脚本下面写到 WMIC？

```
 strComputer = "." 
Set objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\Microsoft\SqlServer\ComputerManagement10") 
Set colItems = objWMIService.ExecQuery( _
    "SELECT * FROM ServerNetworkProtocol",,48) 
For Each objItem in colItems 
    Wscript.Echo "-----------------------------------"
    Wscript.Echo "ServerNetworkProtocol instance"
    Wscript.Echo "-----------------------------------"
    Wscript.Echo "Enabled: " & objItem.Enabled
    Wscript.Echo "ProtocolName: " & objItem.ProtocolName
Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-18T01:35:06.820

**WMIC 命令：**
wmic /namespace:\\root\Microsoft\SqlServer\ComputerManagement10 路径 ServerNetworkProtocol get /all

```
Enabled  InstanceName  MultiIpConfigurationSupport  ProtocolDisplayName  ProtocolName
TRUE     MSSQLEXPRESS  FALSE                        Shared Memory        Sm
FALSE    MSSQLEXPRESS  FALSE                        Named Pipes          Np
FALSE    MSSQLEXPRESS  TRUE                         TCP/IP               Tcp
FALSE    MSSQLEXPRESS  FALSE                        VIA                  Via 
```

**PowerShell 命令：**
powershell -command "Get-WmiObject -Namespace root\Microsoft\SqlServer\ComputerManagement10 -Class ServerNetworkProtocol |Format-Table Enabled, MultiIpConfigurationSupport, ProtocolDisplayName, ProtocolName -AutoSize"

```
Enabled MultiIpConfigurationSupport ProtocolDisplayName ProtocolName
------- --------------------------- ------------------- ------------
   True                       False Shared Memory       Sm
  False                       False Named Pipes         Np    
  False                        True TCP/IP              Tcp
  False                       False VIA                 Via 
```

# flowplayer - flowplayer在ie浏览器中不能全屏

> ID：10294513
> 
> 赞同：2
> 
> 时间：2012-04-24T08:42:17.940
> 
> 标签：flowplayer

但它在 chrome 和 firefox 中运行良好。这是我的代码：

```
<script>
        $f("player", "http://www.practice.com/ci/resource/flowplayer-3.2.9.swf", {
          plugins: {
            controls : {
                fullscreen : true,
            }
          },
          clip: {
            baseUrl: "http://www.practice.com/ci/resource",
            url: "info.flv",
            //urlResolvers: "secure",
            //scaling: "fit",
            onStart: function (clip) {
              document.getElementById("info").innerHTML = clip.baseUrl + "/" + clip.url;
            }
          }
        });
    </script> 
```

有什么不对？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:29:32.357

出现语法错误（逗号错误）：

```
fullscreen : true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:25:22.320

定义`fullscreen : true`在里面`clip`而不是在`controls`里面`plugin`看看。

# c - 如何在 C 中找到可以免费使用的端口？

> ID：10294515
> 
> 赞同：12
> 
> 时间：2012-04-24T08:42:18.660
> 
> 标签：c, linux, sockets, network-programming

操作系统是Linux。我有一个可以实时更改其端口的服务器进程。但是我想提前知道绑定之前端口是否空闲。

场景：服务器绑定 localhost:5000 并在 localhost:6000 接收到绑定请求。服务器必须检查端口是否空闲。此问题寻求提供检查端口是否空闲的例程的答案。

作为记录，我正在使用代码片段编辑我的问题，该代码片段检查端口是否可以免费使用。这并不意味着它会被使用。下面的代码回答了“如果端口现在可用”的问题，它不使用它。打开一个套接字，检查 bind 是否返回 EADDRINUSE 并关闭套接字。

```
#include <iostream>
#include <sys/socket.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <arpa/inet.h>
#include <errno.h>

int main(int argc, char **argv) {

    struct sockaddr_in serv_addr;
    if( argc < 2 )
        return 0;
    int port = atoi(argv[1]);

    int sockfd = socket(AF_INET, SOCK_STREAM, 0);
    if( sockfd < 0 ) {
        printf("socket error\n");
        return 0;
    } else {
        printf("Opened fd %d\n", sockfd);
    }

     bzero((char *) &serv_addr, sizeof(serv_addr));
     serv_addr.sin_family = AF_INET;
     serv_addr.sin_addr.s_addr = INADDR_ANY;
     serv_addr.sin_port = htons(port);
     if (bind(sockfd, (struct sockaddr *) &serv_addr, sizeof(serv_addr)) < 0) {

        if( errno == EADDRINUSE )
        {
            printf("the port is not available. already to other process\n");
        } else {
            printf("could not bind to process (%d) %s\n", errno, strerror(errno));
        }
    }

    if (close (sockfd) < 0 ) {
        printf("did not close fd: %s\n", strerror(errno));
        return errno;
    }

    return 0;

} 
```

以下是一些示例运行（部分输出）

```
[bash{1051}{51}]:[~/some_sources/checkbind]::./a.out 41067
the port is not available. already to other process
[bash{1052}{52}]:[~/some_sources/checkbind]::./a.out 22
could not bind to process (13) Permission denied
[bash{1053}{53}]:[~/some_sources/checkbind]::./a.out 22000
Opened fd 3 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-24T09:09:50.883

这是一个明显的[竞争条件](http://en.wikipedia.org/wiki/Race_condition)，因为您系统上的其他进程可能会并行绑定到端口。因此，您找到的任何解决方案都将是不完美的，您*仍然*需要根据“尝试`bind()`，如果失败选择一个新的端口号并重试”的方法来编写它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-31T01:12:06.817

我自己为此苦苦挣扎，并稍微修改了您的代码。

解决方案是设置`serv_addr.sin_port = 0`（自动分配端口）。

**注意**在`bind()`和`getsockname()`行中有从`sockaddr_in`到的不干净的演员表`sockaddr`。我已经看到它在很多地方做过，我正在寻找更安全的解决方案。

```
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>

// ... snip ...

int sock = socket(AF_INET, SOCK_STREAM, 0);
if(sock < 0) {
    printf("socket error\n");
    return;
}
printf("Opened %d\n", sock);

struct sockaddr_in serv_addr;
bzero((char *) &serv_addr, sizeof(serv_addr));
serv_addr.sin_family = AF_INET;
serv_addr.sin_addr.s_addr = INADDR_ANY;
serv_addr.sin_port = 0;
if (bind(sock, (struct sockaddr *) &serv_addr, sizeof(serv_addr)) < 0) {
    if(errno == EADDRINUSE) {
        printf("the port is not available. already to other process\n");
        return;
    } else {
        printf("could not bind to process (%d) %s\n", errno, strerror(errno));
        return;
    }
}

socklen_t len = sizeof(serv_addr);
if (getsockname(sock, (struct sockaddr *)&serv_addr, &len) == -1) {
    perror("getsockname");
    return;
}

printf("port number %d\n", ntohs(serv_addr.sin_port));

if (close (sock) < 0 ) {
    printf("did not close: %s\n", strerror(errno));
    return;
} 
```

# 程序输出

```
Opened 4
port number 59081 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-25T07:25:10.290

如果您的服务器被*告知*要使用哪个端口，就`bind()`这样吧。严重地。

当然，您可以解析`/proc/net/tcp`并查看端口是否正在使用中。但是然后呢？你现在仍然需要打电话`bind()`，因为你知道你的端口是空闲的，它会告诉你端口是否空闲，所以没有必要卑躬屈膝地`/proc/net/tcp`做所有这些（慢！）字符串生成和解析和额外的内核会通过不是很好优化的（阅读：与 相比超级慢`bind()`）诊断路径，只是为了在您完成解析之前获取可能已经过时的信息。所以只要打电话`bind()`，开心就好。

# spring - 将 spring 安全性从 webapp 传播到 soap webservice

> ID：10294517
> 
> 赞同：2
> 
> 时间：2012-04-24T08:42:22.567
> 
> 标签：spring, soap, spring-security, spring-ws, ws-security

我有以下情况：我们有几个 web 应用程序，都使用 Spring Security 进行身份验证/授权。我们想要创建一个将被所有这些 web 应用程序使用的 web 服务。通信将通过 https 进行。

我希望 webapp 的安全上下文传播到 web 服务，以便 web 服务实现中的方法上的 @Secured 注释正常工作。我查看了[spring ws security](http://static.springsource.org/spring-ws/sites/2.0/reference/html/security.html)，并使用 UsernameTokenProfile 成功实现了身份验证。但我似乎找不到一种基于标准的方式来传输授权信息（即用户的角色）。

1.  Spring 有没有办法在 web 服务中进行授权？（SAML，XACML？）
2.  在 web 服务中使用身份验证时，Spring 甚至构建了 SecurityContext 吗？如果我调试我的代码并要求 SecurityContextHolder.getContext() 我得到 null （我假设我的请求由 1 个线程处理）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:55:49.860

由于 Apache CXF 是通过基于 Spring 的配置文件配置的，我建议您查看其有关[AUTHORIZATION的文档](http://cxf.apache.org/docs/security.html)

我认为这可能会帮助你

# ios - 带有 2 个文本字段的 UIDatePicker（从/直到日期）？

> ID：10294518
> 
> 赞同：1
> 
> 时间：2012-04-24T08:42:23.417
> 
> 标签：ios, xcode, datepicker

我有一个日期选择器。我想让用户在“from”文本字段（明天上午 9 点开始）中选择日期和时间，然后选择文本字段“直到”（1.5 小时后开始）。

[从 TextFiled](http://i42.tinypic.com/r7kb5e.jpg) [到 TextField](http://i40.tinypic.com/akev06.jpg)

例如。“从”文本字段：25.04.2012 09:00，“直到”文本字段：25.04.2012 10:30

看一下我上传的图片。

到目前为止一切正常，但如果我点击“直到”文本字段，日期选择器没有设置正确的日期和时间。他设置了 25.04.2012 09:00 而不是 25.04.2012 10:30

到目前为止我的代码：

```
ViewDidLoad:

    //Create DatePicker

    self.thePicker = [[UIDatePicker alloc] initWithFrame:CGRectMake(0, 152, 325, 300)];
    self.thePicker.datePickerMode = UIDatePickerModeDateAndTime;
    [thePicker addTarget:self action:@selector(dateChanged) forControlEvents:UIControlEventValueChanged];

    //Set DatePicker to Tomorrow 9:00 o'clock

    NSDate *today = [NSDate date];

    NSCalendar *german = [[NSCalendar alloc]          initWithCalendarIdentifier:NSGregorianCalendar];

    [german setLocale:[NSLocale currentLocale]];
    NSDateComponents *nowComponents = [german components:NSYearCalendarUnit |  NSWeekCalendarUnit | NSHourCalendarUnit | NSDayCalendarUnit| NSMonthCalendarUnit| NSMinuteCalendarUnit | NSSecondCalendarUnit fromDate:today];

    [nowComponents setDay:[nowComponents day] +1]; 
    [nowComponents setWeek: [nowComponents week]]; 
    [nowComponents setHour:9];
    [nowComponents setMinute:0];
    [nowComponents setSecond:0];

    NSDate *beginningOfWeek = [german dateFromComponents:nowComponents];
    NSDate *pickereinstelldate= beginningOfWeek;

    [self.thePicker setDate:pickereinstelldate];

    //Set DatePicker to correct Format
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"dd.MM.yyyy  HH:mm"];
    NSString *datum =[dateFormatter stringFromDate:self.thePicker.date];

    //set the date at textfield "bis" to 1.5 hours later
    NSDate *morgenDate = [beginningOfWeek dateByAddingTimeInterval:3600*1.5];
    NSString  *newdate = [dateFormatter stringFromDate:morgenDate];

    //Set the until TextField with the newdate

     tfVon.text=datum;
    tfBis.text=newdate; 

    [self.view addSubview:thePicker];
    self.thePicker.hidden=YES;
    tfVon.inputView=thePicker;
    tfBis.inputView=thePicker;

} 
```

动作功能：

```
 -(IBAction)dateChanged
    {
    self.date = [thePicker date];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"dd.MM.yyyy  HH:mm"];
    NSString *datum =[dateFormatter stringFromDate:self.date];
    NSDate *neuesdatum = [date dateByAddingTimeInterval:3600*1.5];
    NSString *neuesd = [dateFormatter stringFromDate:neuesdatum];

   //when i click on "From" textfield
    if (dateBOOL==YES)

    {
        tfVon.text=datum;

        tfBis.text=neuesd;

    }
        //when i click on "Until" textfield
        if (dateBOOL==NO) {
        tfBis.text=neuesd;

        }    

} 
```

这是我将 datebool 设置为 no 的地方：

```
 -(BOOL)textFieldShouldBeginEditing:(UITextField *)textField
    {

    if (textField==tfVon)
    {

        dateBOOL=YES;
        self.thePicker.hidden=NO;

        return YES;
    }
    if (textField==tfBis)
    {

        dateBOOL=NO;
        self.thePicker.hidden=NO;
        return YES;
    }

    }
   return YES;

    } 
```

有没有办法可以将“直到”文本字段中的 DatePicker 设置为正确的时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:21:22.560

如果我得到你，你希望日期选择器显示用户选择的文本字段的日期。

由于您使用`textFieldShouldBeginEditing`，我也在此方法中发布代码（但您不认为`textFieldDidBeginEditing`这是一个更好的选择）。

```
-(BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
    if (textField==tfVon)
    {
        dateBOOL=YES;
    }
    else if (textField==tfBis)
    {
        dateBOOL=NO;
    }
    else
    {
      //?? should not happen
    }
    self.thePicker.hidden=NO; 
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"dd.MM.yyyy  HH:mm"];
    NSDate *dateOfCurrentTextField = [dateFormatter dateFromString:textField.text];
    [self.picker setDate: dateOfCurrentTextField animated:YES];
    return YES;
} 
```

# web-services - 带有多个@get 和@put 的简单的restful web 服务示例

> ID：10294521
> 
> 赞同：1
> 
> 时间：2012-04-24T08:42:42.270
> 
> 标签：web-services, http, rest, get

亲爱的 Stackoverflow 用户， 谁能给我一个简单的例子，在 netbeans 中有 2 个或更多 @get 和 @put 的 restful webservice？任何简单的纯文本示例就足够了。它不应该包括任何数据库！如果有人可以帮助我，我会非常高兴。我尝试了一些东西，但没有成功，这是代码

```
@Path("/simple")
public class SimpleResource_1 {
    @Context
    private UriInfo context;
    @GET
    @Produces("text/plain")
    public String getText() {
        return "hello world";
    }
@Path("/simple/simple1")
public class SimpleResource_11 {

    @Context
    private UriInfo context;
@GET
@Produces("text/plain")
public String getText1(){
    return "hi";
}
} 
```

尽管没有任何编译错误，但此代码出现运行时错误。我做对了吗？还是我错过了什么！

提前一吨！

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T08:56:31.263

假设您使用的是默认的 Netbeans 服务器堆栈，因此正在使用`javax.ws.rs`：

```
@Path("/admin/")
public class AdminResource {

    @GET
    @Produces('text/plain')
    @Path("/reset/")
    public String reset() {
        return "Reset successfully";
    }

    @GET
    @Produces('text/plain')
    @Path("/close/")
    public String closeAll() {
        return "Closed Successfully";
    }
} 
```

每个 Java 文件应该只有一个公共类。如果您创建了标准 Web 服务项目，Netbeans 应该为上述代码整理所需的导入。如果您想添加一个`@PUT`，您只需向资源添加另一个方法并适当地注释它。

# function - 如何将类声明为使用隐式参数扩展函数

> ID：10294522
> 
> 赞同：2
> 
> 时间：2012-04-24T08:42:43.737
> 
> 标签：function, scala, implicit

我想定义一个带有一个显式和一个隐式参数的函数，如下所示：

```
def foo(a: Int)(implicit b: Int) : Int 
```

但作为一个类或对象，像这样

```
object Foo extends ((Int,Int) => Int) {
  def apply(a: Int)(implicit b: Int) : Int = { ... }
} 
```

以便可以像这样调用该函数：

```
implicit val b = 2
val g = Foo(1) 
```

我没有得到类`Foo`应该正确扩展的基的声明。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T09:37:32.940

你不能。*Function2[T1, T2, R]*声明了抽象方法*apply(t1: T1, t2: T2): R*，所以如果你想混入*Function2*，你必须实现这个 arity-2 *apply*方法，它有不同的签名比你想使用的咖喱版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:04:36.260

所以这个问题有两个部分——首先，如何创建一个对象来实现一个带有柯里化参数列表的函数。然后，如何使这些参数列表之一隐含。

其中第一个绝对是可能的。请注意，柯里化函数是返回函数的函数。所以`f(x: Int)(y: Int)`实际上是 a `Function1`，而不是 a `Function2`：

```
scala> def f(x: Int)(y: Int) = x + y
f: (x: Int)(y: Int)Int

scala> f _
res0: Int => Int => Int = <function1> 
```

你当然可以创建一个实现这个的类：

```
scala> object Foo extends (Int => Int => Int) {
     |   def apply(x: Int) = {(y: Int) => x + y}
     | }
defined module Foo

scala> Foo(1)(2)
res1: Int = 3 
```

不幸的是，我不知道有任何方法可以使第二个参数列表隐式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T15:29:28.477

一个问题是：为什么您必须将该对象 Foo 传递给“期望 (Int,Int) => Int 的地方”？

我想对象 Foo 应该有一些更特殊的功能，这些功能会增强它的功能吗？

在这里分开两个问题似乎更好：a）函数（Int）（隐式Int）=> Int和b）对象Foo

```
object Foo {
  def apply(a: Int, b: Int) : Int = { ... }
}

def foo(a: Int)(implicit b: Int) : Int = Foo(a, b)

implicit val m:Int = 42

foo(5)  // --> res1: Int = 47 
```

如果您愿意，您可以将 'foo' 视为“伴随功能”...

除此之外：我想尝试应用 (Int)(implicit Int)=>Int “其中需要 (Int,Int) => Int”可能不起作用，因为这些类型并不相同。至少当您尝试将其放入

```
def bar(f:(Int,Int)=>Int) = .... 
```

方法 bar 无论如何都会用两个参数调用它的参数 f ，因为它希望它接受两个参数，并且不能假设 f 中提供的函数确实能够使用隐式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T14:13:29.287

`(Int, Int) => Int`您可以使用隐式转换，而不是扩展：

```
class Foo(f: (Int, Int) => Int) {
  def apply(a: Int)(implicit b: Int) : Int = f(a, b)
}

implicit def Foo_to_Function2(foo: Foo) = (x: Int, y: Int) => foo(x)(y) 
```

测试：

```
val foo = new Foo(_ * 10 + _)
foo(4) //error since no implicit Int yet
{
  implicit val impint = 5
  foo(4)  //45
}  
def takesF2(f: (Int, Int) => Int) = f(1, 2)
takesF2(foo)  //12 - works as normal Function2 
```

# c - 可变长度数组和分段错误

> ID：10294523
> 
> 赞同：0
> 
> 时间：2012-04-24T08:42:46.153
> 
> 标签：c, arrays, variable-length

在下面的代码中，如果我在扫描数组“x”的所需长度之前声明了可变长度数组“int array1[x]”，我会在执行时收到“分段错误（核心转储）”。（编译没有错误）。我在编译时使用选项 -std=c99 严格使用了 ANSI C99 标准。

我的问题是为什么我不能将所有声明组合在一起？

```
// code to find a minimum value in a variable-length array
#include<stdio.h>

int minval(int [], int); 

int main(void)
{
    int x, i;

    int minivalue;

    printf("Enter the total number of array elements you wish to define?");
    scanf("%i",&x);

    int array1[x];          

    printf("Enter the elements now:");
    for (i = 0; i < x; i++)
        scanf("%i",&array1[i]);

    minivalue = minval(array1, x);

    printf("\nMinimum value in the array is = %i\n",minivalue);

    return 0;
}

int minval(int array2[], int x)     
{
    int i;
    int minivalue;

    minivalue = array2[0];

    for (i=0; i < x; i++){
        if (minivalue > array2[i])
            minivalue = array2[i];  
    }

    return (minivalue);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T10:50:41.910

> 在下面的代码中，如果我在扫描数组“x”的所需长度之前声明了可变长度数组“int array1[x]”，我会在执行时收到“分段错误（核心转储）”。

您不能声明具有未初始化值的可变长度数组。

当您移动`int array1[x]`之前`scanf()`没有`x`有效值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:47:19.160

Replace

```
int array1[x]; 
```

with

```
int* array1 = (int*) malloc (x * sizeof int); 
```

so you allocate enough memory to have x elements contained in `array1`.

Do not forget to free the memory after, by adding

```
free(array1) 
```

at the end of your program.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T01:01:37.243

@Saurabh：尝试在 C99 标准中运行时播放“计算机”。你遇到了声明 int x。它有一些很大的垃圾价值。然后您读取具有较大值的数组声明-您尝试分配该值-堆栈内存不足-您出现段错误。相反，如果您先读取大小合理的 x 值，然后再读取数组分配，则可以在堆栈上分配内存。无论如何，这个 c99 功能很糟糕。改用 std::vector 。

# wcf - 版本化 WCF 服务的方法

> ID：10294524
> 
> 赞同：2
> 
> 时间：2012-04-24T08:42:52.970
> 
> 标签：wcf, versioning

有没有一种很好的方法来版本化 WCF 服务中的数据类型和方法？

在 1.0 到 4.5 版本中包含这样的方法会很好。

```
[ServiceContract()]
interface ITradeTrackingService
{
    [OperationContract()]
    [Version(1.0, 4.5)]
    void PublishQuote(Quote quote);
} 
```

还有一些在数据类型上类似的东西。

然后我想在我的网址中这样做：

```
server.com/ws/2.3/ 
```

然后在我的 Global.asax BeginRequest 中执行以下操作：

```
protected void Application_BeginRequest(object sender, EventArgs e)
{
    Service.Version = someParsingOfUrl(); // return 2.3;
} 
```

然后公开正确的方法并公开数据类型中的正确值。

这只是我在做梦还是可以以某种方式完成？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T09:21:48.877

有很多关于服务版本控制[的东西](https://stackoverflow.com/a/8704864/569662)——你需要考虑很多事情。

[此处](http://blogs.msdn.com/b/craigmcmurtry/archive/2006/07/23/676104.aspx)概述了我读过的有关版本控制的最低摩擦文章，但是，在某些地方似乎有点“hacky”，特别是在您使用接口继承来对端点合同进行版本控制的地方（请参见[此处](https://stackoverflow.com/a/8808893/569662)的示例）。

微软自己对此有很多话要说（[这里](http://msdn.microsoft.com/en-us/library/ms731060.aspx)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-14T14:58:49.337

Microsoft 发表了一篇关于WCF 中的[版本控制策略的优秀文章。](http://msdn.microsoft.com/en-us/library/ff384251.aspx)

在文章中，作者讨论了 Versioning Service Contracts 的两种主要方法：

> 敏捷版本控制：尽可能长时间地依赖向后兼容性，避免正式的合同和端点版本控制，直到兼容性被破坏。这种方法在需要频繁更新生产代码的敏捷环境中很有用。

![在此处输入图像描述](../Images/46d50b8aa09454af5ae878452f8ffc41.png)

> 严格版本控制：对服务合同、数据合同、消息合同或其他合同相关或端点相关更改的任何更改执行正式合同和端点版本控制。这种方法最适合生产更新频率较低或需要详细跟踪任何和所有更改的环境。

![在此处输入图像描述](../Images/1f9625c1a767827f89ac6451a0d422c2.png)

还有一种被称为半严格版本控制的方法，它位于敏捷和严格版本控制之间。

链接的文章也讨论了数据合同的版本控制。

# sqlite - 如何从表单中刷新检索到的数据库值

> ID：10294527
> 
> 赞同：1
> 
> 时间：2012-04-24T08:42:59.580
> 
> 标签：sqlite, blackberry

我已经能够将值检索到我的表单中。这些值在保存按钮单击时插入到表中，同时也被检索到同一个表单中（在同一个保存单击上）。但现在的问题是每个单击值以连续流的形式显示。我想在上次单击后清除屏幕（从表单中刷新值）并仅显示最新的表状态值。这是我正在处理的代码：

```
 public void fieldChanged(Field field, int context) //respond to button events
        {

            if (field == showInputButton) //if first button selected
            { 
                Dialog.alert(TextField1.getText()); //show text from first input field  

                try
                {    
                    //Open or create the database
                    Database db = DatabaseFactory.openOrCreate("database1.db");    

                    //Insert Data from db
                    Statement statement1 = db.createStatement("INSERT INTO DirectoryItems(category_id,name,phone,email) VALUES ('1','"+TextField1.getText()+"','"+TextField2.getText()+"','"+TextField3.getText()+"')");
                    statement1.prepare();
                    statement1.execute();       
                    statement1.close(); 
                  //Retrieve data
                    try
                    {
                            add(new RichTextField("Attempting to retrieve data from " + 
                                                                                        "database1.db on the SDCard."));

                            Statement st = db.createStatement("SELECT name FROM DirectoryItems");

                            st.prepare();

                            Cursor c = st.getCursor();

                            Row r;
                            int i = 0;

                            while(c.next()) 
                            {
                                        r = c.getRow();
                                        i++;
                                       add(new RichTextField(i + "Name = " + r.getString(0)));
                            }
                            if (i==0)
                            {
                                        add(new RichTextField("No data in the DirectoryItems table."));
                            }
                            st.close();
                            db.close();
                     }
                     catch( Exception e ) 
                    {         
                        System.out.println( e.getMessage() );
                        e.printStackTrace();
                    }

                  } 
```

有谁知道这个。请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:21:57.943

您可以通过禁用按钮继续，以便您允许用户仅获取一次值（即最新值）

```
 ((ButtonField)showInputButton).setEnabled(false); 
```

在您的字段更改实现中使用它。禁用按钮有助于很好地控制获取的值（如您的情况）。

# objective-c - 如何从我的应用程序中加载可可 dylib 并调用 dylib 的方法

> ID：10294528
> 
> 赞同：3
> 
> 时间：2012-04-24T08:43:03.043
> 
> 标签：objective-c, macos, cocoa, dylib

我没有找到任何关于在运行时创建和加载 dylib 的教程。只是从我看到的苹果中`dlopen`可以打开`dylibs`.

我创建了一个可可动态库并添加了方法说`-(void)displayMethod`。

我很困惑，是否只需要将`.dylib`文件复制到我的新项目或 dylib 的整个文件夹中。

任何人都可以给我很好的教程链接，其中包含有关如何设置路径以及如何加载可可 dylibs 的信息。目前我正在使用 XCode4。

# c# - 如何设置 2 种不同的解决方案，以便它们可以使用共享的 DTO/消息程序集

> ID：10294530
> 
> 赞同：2
> 
> 时间：2012-04-24T08:43:04.167
> 
> 标签：c#, .net, visual-studio, projects-and-solutions

在编写我的智能客户端应用程序时，我目前有 2 个单独的解决方案。

MyApp.BackEnd 和 MyApp.FrontEnd。两种解决方案都受 Subversion 源代码控制。

目前，我在 MyApp.BackEnd 解决方案中创建了一个 MyApp.Common 程序集，并在 MyApp.FrontEnd 解决方案中添加了对 DLL 的引用。我真的不喜欢这种做事方式，但它现在有效。

我想做的是以某种方式使其可以将 MyApp.Common 的代码文件保留在 MyApp.Backend 解决方案中，但能够在 MyApp.FrontEnd 解决方案中创建/编辑它们。

这将使我能够将 MyApp.FrontEnd 解决方案交给单独的开发人员，他/她将能够定义 DTO，而无需访问 MyApp.Backend 解决方案。

问题是我不知道该怎么做。如果您需要更多信息，请告诉我。我知道它可能通过在一个解决方案中包含所有代码文件来完成，但这有可能是巨大的，我非常热衷于保持后端和前端解决方案之间的分离。

非常感谢您的任何帮助

**解决方案：**感谢 pjotr 的回答和这个[有用的链接](http://amadiere.com/blog/2009/06/multiple-subversion-projects-in-one-visual-studio-solution-using-svnexternals/)，我现在已经设法解决了这个问题。

简单地说，我使用 TortoiseSVN 并在 MyApp.FrontEnd 存储库中选择了 ShowProperties，然后我添加了一个名为 svn-externals 的属性，并将其指向 MyApp.BackEnd 存储库中的 DTO 库，从那里我按照链接上的说明进行操作。现在我走了，谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:50:38.270

只需将现有的库项目添加到这两个解决方案中。

两种解决方案都可以存在于一个存储库中，或者您可以使用 svn:external 将库项目从一个存储库链接到另一个存储库

# java - 是否可以在 java 选项文件中使用环境变量？

> ID：10294532
> 
> 赞同：1
> 
> 时间：2012-04-24T08:43:05.867
> 
> 标签：java, jvm, jvm-arguments

> 指定 Java 选项和系统属性 您可以通过使用选项文件或使用环境变量在命令行上指定 Java™ 选项和系统属性。... 2.通过创建一个包含选项的文件，并在命令行上使用 -Xoptionsfile=file 指定它。

[http://publib.boulder.ibm.com/infocenter/realtime/v1r0/topic/com.ibm.rt.doc.10/user/specifying_options.html](http://publib.boulder.ibm.com/infocenter/realtime/v1r0/topic/com.ibm.rt.doc.10/user/specifying_options.html)

我在选项文件中指定了以下选项：

```
-Xdump:what
-Xdump:java:none
-Xdump:heap:none
-Xdump:system:none
-Xdump:snap:none
-Xdump:java:events=user,range=1..2,file=$TRACEDIR/javacore.%Y%m%d.%H%M%S.%pid.%seq.txt
-Xdump:heap:events=user,range=1..2,file=$TRACEDIR/heapdump.%Y%m%d.%H%M%S.%pid.%seq.phd 
```

但是 JVM 不评估环境变量 $TRACEDIR。
如果我不使用选项文件，而只是将这些选项添加到命令行，那么 JVM 会评估环境变量。
哪里有这样的区别？

**解答：**
如果您在命令行中使用环境变量，命令行预处理器会评估它们。不是JVM。

# objective-c - 在 iOS 应用程序中存储数据的最佳选择

> ID：10294533
> 
> 赞同：0
> 
> 时间：2012-04-24T08:43:09.913
> 
> 标签：objective-c, ios

我正在开发一个 iOS 应用程序（iPad），我的问题是选择如何存储我的数据（我有相当于 1Mb 的数据）。什么是最好的选择，为什么？（属性列表、XML、SQlite，。）。

感谢我们的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T08:52:30.400

这些信息不足以正确回答您的问题。影响决定的因素很多。持久性库和框架都有非常特殊的约束和学习曲线。

以下是一些需要考虑的问题：

1.  什么样的数据？
2.  多少数据？
3.  数据多久更改一次？以何种模式更改？
4.  数据从何而来（服务器、用户输入）
5.  是否要同步数据（iCloud、Dropbox、其他服务）
6.  什么是典型的访问模式？（数据库与整个文件）
7.  数据是否可移植？

# android - Android在RelativeLayout中拖动imageview Resized

> ID：10294537
> 
> 赞同：0
> 
> 时间：2012-04-24T08:43:19.517
> 
> 标签：android, imageview, drag

我目前正在制作一个 android 应用程序，它允许用户从列表中添加一些图像到屏幕上，并且允许用户在其上拖动图像。

我可以使用 onTouch 方法拖动图像。但是我遇到了一个问题，当我将图像视图拖动到左侧或底部大小时

imageview 将自动调整大小并且不能将其拖出到布局中。

如何在不调整图像视图大小的情况下将其拖到布局之外？

```
@Override
public boolean onTouch(View view, MotionEvent event)  {
    ImageView imageView = (ImageView)view;
    imageView.bringToFront();

    //  Handle event
    switch (event.getAction() & MotionEvent.ACTION_MASK)  {
        case MotionEvent.ACTION_DOWN:  {
            startPoint.set(event.getX(), event.getY());
            currentMode = EVENT_DRAG;
            break;
        }  

        case MotionEvent.ACTION_UP:
        case MotionEvent.ACTION_POINTER_UP:  {
            currentMode = EVENT_NONE;
            break;
        }  

        case MotionEvent.ACTION_MOVE:  {
            RelativeLayout.LayoutParams layoutPrarms = (RelativeLayout.LayoutParams)imageView.getLayoutParams();
            int left = layoutPrarms.leftMargin + (int)(event.getX() - startPoint.x);
            int top = layoutPrarms.topMargin + (int)(event.getY() - startPoint.y);
            layoutPrarms.leftMargin = left;
            layoutPrarms.topMargin = top;
            imageView.setLayoutParams(layoutPrarms);     
            break;
        }  
    }

    //  Indicate event was handled
    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:00:36.790

尝试让您的父布局为 LinearLayout。我只使用RelativeLayouts 遇到了这个问题。

# java - 如何在 Spring MVC 2.5 中将 setCommandClass() 与 MultiActionController 一起使用

> ID：10294542
> 
> 赞同：0
> 
> 时间：2012-04-24T08:43:56.493
> 
> 标签：java, spring, spring-mvc

我正在从 Struts2 控制器转向 Spring MVC 2.5

在 Struts2 的情况下，OGNL 曾经负责填充 Action 类的属性。在 Spring MVC 2.5 中，它们也有一个`SimpleFormController`可以`setCommandClass(UserDefinedBean.class)`在构造函数中调用来从参数自动填充 bean 类的属性。

但是如果`MultiActionController`（这对我的要求似乎非常有用）我正在`request.getParameter("paramName");`从请求中获取参数。有什么方法可以利用`setCommandClass()`with`MultiActionController`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T09:26:50.760

您可以将命令对象作为操作方法中的参数之一，例如：

```
public (ModelAndView | Map | String | void) actionName(HttpServletRequest request, HttpServletResponse response, Object commandObject); 
```

对于数据绑定的广泛使用，您始终可以覆盖 [initBinder(...)](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/web/servlet/mvc/multiaction/MultiActionController.html#initBinder%28javax.servlet.http.HttpServletRequest,%20org.springframework.web.bind.ServletRequestDataBinder%29)方法以拥有您的自定义绑定和验证器。

为什么使用 Spring 2.5.x 之间？为什么不是 Spring 3.0.x ？通过使用注释，您可以在新版本中获得更大的灵活性。甚至 Spring 也不推荐使用旧的扩展控制器的方法。只是一个建议，因为我不确定您的设计或要求。

# css - 绝对/相对定位布局溢出

> ID：10294543
> 
> 赞同：6
> 
> 时间：2012-04-24T08:43:57.637
> 
> 标签：css, overflow, css-position

很长一段时间以来，我一直在摆弄一个特定的布局问题，显然我走错了路。

以下是分解为基本组件的方法：

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>
<div class="stretched">
    <div class="header">SOME HEADER</div>
    <div class="someControls">
        <input type="button" value="click me"/>
        <input type="button" value="no me"/>
    </div>
    <div class="inner">
        some text...
    </div>
</div>
</body>
</html> 
```

使用以下CSS：

```
.stretched {
    position:absolute;
    height:auto;
    bottom: 0;
    top: 0;
    left: 0;
    right: 0;
    width: 250px;
    margin: 30px auto 20px;
    background-color: green;
}

.inner {
    margin:10px;
    background-color: red;   
    overflow: auto;        
} 
```

我想要做的是让`stretched`div 使用所有可用的垂直视口空间（在页眉和页脚上方和下方减去几个像素）并以固定的方式水平居中。

这似乎工作得很好。问题是该属性未按我`overflow: auto;`的意愿应用于内容。`inner`当`some text...`变长时，`inner`div 会覆盖我的容器并且不显示滚动条。

这是小提琴：[小提琴#1](http://jsfiddle.net/Rpdr9/365/)

我想避免在页面正文上有滚动条，而是让溢出由`inner`div 内的滚动条管理，从而`stretched`始终完全可见。

`position: absolute; top: 0; ...`我也可以对div应用相同的技巧`inner`，但是我必须明确指定`header`+的高度`someControls`，这是我想避免的，因为它在我的所有页面上都不同。

这就是我想要的工作方式（除了部分`top: 40px;`）：[fiddle #2](http://jsfiddle.net/5gyt5/6/)

我在这里做错了什么？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:01:09.963

我认为这对于纯 CSS 是不可能的（..适用于所有常见的浏览器）。

这是一种使用[旧 Flexbox](http://www.html5rocks.com/en/tutorials/flexbox/quick/)规范的方法：http: [//jsfiddle.net/thirtydot/xRr7e/](http://jsfiddle.net/thirtydot/xRr7e/)

不幸的是，它只[适用于](http://caniuse.com/flexbox)WebKit 浏览器/Firefox。

是时候为这个布局使用几行 JavaScript 了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:55:12.060

嘿为什么在你的样式表中定义绝对位置

替换这个

```
 .stretched {

    width: 250px;
    margin: 30px auto 20px;
    background-color: green;
} 
```

现场演示 [http://jsfiddle.net/rohitazad/Rpdr9/366/](http://jsfiddle.net/rohitazad/Rpdr9/366/)

更新了 js fiddle [http://jsfiddle.net/rohitazad/Rpdr9/368/](http://jsfiddle.net/rohitazad/Rpdr9/368/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T08:58:57.640

消除

```
position: absolute; 
```

并添加

```
border: 10px solid green; 
```

[http://jsfiddle.net/Rpdr9/367/](http://jsfiddle.net/Rpdr9/367/)

编辑：如果您不喜欢大边框，可以将边框大小更改为 1px。

```
border: 1px solid green; 
```

即使这样也有效。

# c# - 从 SOAP 消息中提取 SOAP 正文

> ID：10294544
> 
> 赞同：16
> 
> 时间：2012-04-24T08:44:04.717
> 
> 标签：c#, soap, xml-parsing

我想从 SOAP 消息中提取 SOAP 正文，我在 SOAP 正文中有一些数据，我必须在日期库中解析，所以这是代码：

```
public string Load_XML(string SoapMessage)
{
    //check soap message
    if (SoapMessage == null || SoapMessage.Length <= 0)
        throw new Exception("Soap message not valid");

    //declare some local variable
    int iSoapBodyStartIndex = 0;
    int iSoapBodyEndIndex = 0;

    //load the Soap Message
    //Učitaj string XML-a i pretvori ga u XML
    XmlDocument doc = new XmlDocument();

    try
    {
        doc.Load(SoapMessage);
    }

    catch (XmlException ex)
    {
        WriteErrors.WriteToLogFile("WS.LOAD_DOK_LoadXML", ex.ToString());

        throw ex;
    }

    //search for the "http://schemas.xmlsoap.org/soap/envelope/" URI prefix
    string prefix = string.Empty;
    for (int i = 0; i < doc.ChildNodes.Count; i++)
    {
        System.Xml.XmlNode soapNode = doc.ChildNodes[i];
        prefix = soapNode.GetPrefixOfNamespace("http://schemas.xmlsoap.org  /soap/envelope/");

        if (prefix != null && prefix.Length > 0)
            break;
    }

    //prefix not founded. 
    if (prefix == null || prefix.Length <= 0)
        throw new Exception("Can't found the soap envelope prefix");

    //find soap body start index
    int iSoapBodyElementStartFrom = SoapMessage.IndexOf("<" + prefix + ":Body");
    int iSoapBodyElementStartEnd = SoapMessage.IndexOf(">", iSoapBodyElementStartFrom);    -> HERE I HAVE AN ERROR!!!!   
    iSoapBodyStartIndex = iSoapBodyElementStartEnd + 1;

    //find soap body end index
    iSoapBodyEndIndex = SoapMessage.IndexOf("</" + prefix + ":Body>") - 1;

    //get soap body (xml data)
    return SoapMessage.Substring(iSoapBodyStartIndex, iSoapBodyEndIndex - iSoapBodyStartIndex + 1);
} 
```

我在这里遇到一个错误：

```
int iSoapBodyElementStartEnd = SoapMessage.IndexOf(">", iSoapBodyElementStartFrom); 
```

错误：

> 指数超出范围。必须是非负数且小于集合的大小。

如果有人知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-02T15:32:33.557

对于这样的请求：

```
String request = @"<?xml version=""1.0"" encoding=""UTF-8""?>
    <soap:Envelope xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance""
    xmlns:soapenc=""http://schemas.xmlsoap.org/soap/encoding/""
    xmlns:xsd=""http://www.w3.org/2001/XMLSchema""
    xmlns:soap=""http://schemas.xmlsoap.org/soap/envelope/"">
    <soap:Body>
    <ResponseData xmlns=""urn:Custom"">some data</ResponseData>
    </soap:Body>
    </soap:Envelope>"; 
```

以下代码完成了解包数据并仅获取`<ReponseData>`xml 内容的工作：

```
XDocument xDoc = XDocument.Load(new StringReader(request));

var unwrappedResponse = xDoc.Descendants((XNamespace)"http://schemas.xmlsoap.org/soap/envelope/" + "Body")
    .First()
    .FirstNode 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-24T13:49:28.843

Linq2Xml 使用起来更简单。

```
string xml = @"<?xml version=""1.0"" encoding=""UTF-8"" ?>
    <soap:envelope xmlns:xsd=""w3.org/2001/XMLSchema"" xmlns:xsi=""w3.org/2001/XMLSchema-instance"" xmlns:soap=""schemas.xmlsoap.org/soap/envelope/"">; 
    <soap:body> 
    <order> <id>1234</id>  </order> 
    </soap:body> 
    </soap:envelope>";

XDocument xDoc = XDocument.Load(new StringReader(xml));
var id =  xDoc.Descendants("id").First().Value; 
```

**- 编辑 -**

在 中循环元素`body`：

```
XDocument xDoc = XDocument.Load(new StringReader(xml));
XNamespace soap = XNamespace.Get("schemas.xmlsoap.org/soap/envelope/");

var items = xDoc.Descendants(soap+"body").Elements();
foreach (var item in items)
{
    Console.WriteLine(item.Name.LocalName);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-01T16:46:00.020

您可以利用`GetElementsByTagName`它来提取肥皂请求的主体。

```
private static T DeserializeInnerSoapObject<T>(string soapResponse)
{
    XmlDocument xmlDocument = new XmlDocument();
    xmlDocument.LoadXml(soapResponse);

    var soapBody = xmlDocument.GetElementsByTagName("soap:Body")[0];
    string innerObject = soapBody.InnerXml;

    XmlSerializer deserializer = new XmlSerializer(typeof(T));

    using (StringReader reader = new StringReader(innerObject))
    {
        return (T)deserializer.Deserialize(reader);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-20T14:18:56.203

简单的解决方案，如果 body 有多个孩子，你只需要删除信封：

```
 XmlDocument xmlDoc = new XmlDocument();
    xmlDoc.LoadXml(placeYourXmlHere);

    if (xmlDoc.DocumentElement.Name == "soapenv_Envelope")
    {
        string tempXmlString = xmlDoc.DocumentElement.InnerXml;
        xmlDoc.LoadXml(tempXmlString);
    } 
```

如果要同时删除信封和正文，其中正文仅包含一个子项：

```
 XmlDocument xmlDoc = new XmlDocument();
    xmlDoc.LoadXml(placeYourXmlHere);

    while (xmlDoc.DocumentElement.Name == "soapenv_Envelope" || xmlDoc.DocumentElement.Name == "soapenv_Body")
    {
        string tempXmlString = xmlDoc.DocumentElement.InnerXml;
        xmlDoc.LoadXml(tempXmlString);
    } 
```

现在 xml 被简化为 Body 的内容

# qt - 访问另一个 Qt Designer 表单类的 ui 元素

> ID：10294545
> 
> 赞同：2
> 
> 时间：2012-04-24T08:44:10.237
> 
> 标签：qt, class, qt-designer

在我的课堂上，我有一个使用 QtDesigner 设计的类的元素。这是一个对话框，我像这样使用它：

```
int status = dialogA->exec(); 
```

但是当我想通过这个对话框访问设计器表单时

```
dialogA->ui->someelement 
```

我明白了`invalid use of incomplete type 'struct Ui::DialogA'`。当然`ui`通常是私有的，但**我宣布它是 public**。

那么如何访问其他类的ui元素中的元素呢？

*（如果这太令人困惑，我可以尝试扩展以使其清楚......）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T14:02:42.763

ui 对象的类型在生成的 ui_*.h 文件中声明。

**但这**是一个非常、非常、非常糟糕的主意。请帮自己一个忙，在对话框类中定义干净的 get/set 方法以访问 ui 元素（或其他）的文本属性 - 但不能直接访问分离类的 ui 元素。当您更改对话框类时，这将在将来引起大量问题。

# c++ - WriteFile 用于以某种格式打印

> ID：10294547
> 
> 赞同：0
> 
> 时间：2012-04-24T08:44:13.123
> 
> 标签：c++, windows, printf, writefile

是否可以用于`WriteFile`打印格式化数据？（基于某些修饰符/说明符格式化的数据）我不能使用`fprintf`.

我想到的可能的解决方案是使用`sprintf`打印到缓冲区然后`WriteFile`打印缓冲区。

谢谢

# winforms - 我可以在控件中有 2 种前景色吗？

> ID：10294551
> 
> 赞同：1
> 
> 时间：2012-04-24T08:44:36.650
> 
> 标签：winforms, devexpress

我正在使用 DevExpress WinForms 控件，我想知道是否可以将单元格的字体颜色设置为“第一个单词为黑色，第二个单词为红色”。

这可能吗？在 DevExpress 中是否可以为每个控件设置不同的字体颜色？在 WinForms 中怎么样？

如果没有，我可以使用不同的“更疯狂”的方法来获得这个吗？每个单元格使用 2 个标签控件可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:15:51.783

这取决于您要使用哪个控件来执行此操作。

[此处](http://documentation.devexpress.com/#WindowsForms/CustomDocument4874)列出了支持 Html 格式（以及如何激活它）的控件。

# ipad - ipad 2 - How to use 2048x1536 resolution

> ID：10294552
> 
> 赞同：0
> 
> 时间：2012-04-24T08:44:51.763
> 
> 标签：ipad, drawing, 2d, max, screen-resolution

I'm writing a 2d application for ipad2\. I would like to use 2048*1536 pixel coordinate system instead of 1024x768\. It is possible? For example I would like to draw a rectangle like the following

```
CGRect rect = CGRectMake(2000,1000,10,10);
CGContextFillRect(context, rect); 
```

and see the rectanle on the screen. With ipad(one) this is not possible.

thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T08:47:48.647

I don't believe that's possible even on the newest retina iPad. Since it still uses the 1024x768 coordinate system and pixel doubling.

Why do you want to use 2048x1536 as the co-ordinate system, couldn't you just divide those by 2 and achieve the same effect?

# php - 我想要替换匹配的模式

> ID：10294564
> 
> 赞同：2
> 
> 时间：2012-04-24T08:45:18.193
> 
> 标签：php, regex, preg-replace

我正在尝试替换匹配的字符串，请参见下面的示例

```
<?php
    $str="this is going to bold [[this]]";
    echo preg_replace("/[[(.*)]]+/i","<b>$1</b>",$str);
?> 
```

所以输出看起来像这样

**这**将加粗

 ****编辑：**

```
<?php
    $str="bhai bhai *that* -wow- perfect";
    $find[0]="/*(.+)*/i";
    $find[1]="/-(.+)-/i";
    $rep[0]="<b>$1</b>";
    $rep[1]="<i>$1</i>";
    echo preg_replace($find,$rep,$str);
?> 
```

这是显示警告

警告：preg_replace() [function.preg-replace]：编译失败：在第 7 行的 C:\xampp\htdocs\page.php 中的偏移量 0 处没有重复内容

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T08:47:59.487

**试试这个 ：**

```
<?php
    $str="this is going to bold [[this]]";
    echo preg_replace("/\[\[(.+)\]\]+/i","<b>$1</b>",$str);
?> 
```

**输出 ：**

> **这**将加粗

 *** * *

**暗示 ：**

`[`和`]`字符被认为是*特殊*的，所以你必须转义它们（比如 : `\[`, `\]`）。

* * *

**更新 ：**

* * *

```
<?php
    $str="bhai bhai *that* -wow- perfect";
    $find[0]="/\*(.+)\*/i";
    $find[1]="/\-(.+)\-/i";
    $rep[0]="<b>$1</b>";
    $rep[1]="<i>$1</i>";
    echo preg_replace($find,$rep,$str);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:48:57.663

试穿这个尺寸

```
<?php
    $str="this is going to bold [[this]]";
    echo preg_replace("/(?:\[\[)(.*?)(?:\]\])/i","<b>$1</b>",$str);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T08:49:37.380

您需要转义正则表达式中的方括号。最终表达式应如下所示：

```
echo preg_replace('/\[\[(.*?)\]\]/im', '<b>$1</b>', $str); 
```

方括号是用于定义一组字符的特殊字符，因此如果您希望按字面匹配它们，则必须对其进行转义。****

# java - 如何在其他方法中使用 main 方法中的变量（用户输入）？

> ID：10294573
> 
> 赞同：0
> 
> 时间：2012-04-24T08:46:01.083
> 
> 标签：java, variables, methods

我正在尝试为课堂做作业，但我遇到了一个我找不到解决方案的问题。我的主要方法中有一个名为 passwd 的变量。我让用户输入可能的密码，并且该输入存储在变量中。然后我检查密码变量的长度以确保它符合长度要求。然后我想用另一种方法 chat 检查变量的每个字符以查看它是否是数字。

问题是我无法在 digitCheck() 方法中使用 main 方法中的 passwd 变量。

有人可以告诉我如何解决这个问题。

```
 package Password;

import java.awt.Component;
import javax.swing.JOptionPane;

/**
 *
 * @author Curtis
 */
public class Password 
{
private static Component frame;

//Main Method
public static void main(String[] args) 
{//Declaration of variables
    String passwd;
    int leng;
    boolean length = false;
    //Prompt user to enter possible password
    while(!length)
    {
        passwd = JOptionPane.showInputDialog("Please enter a possible password:\n" +  
            "Password must contain 6-10 characters\n"+
            "Password must contain both a letter and a digit");
        leng =passwd.length();//Determines Password Length
        if(leng>5 && leng<11)
            { 
                length = true;
                digitCheck();
            }
        else //Gives Password Length Error Message
        {
            length = false;
            JOptionPane.showMessageDialog(frame, "Your password does not meet the length requirements.", "Password Length Error", JOptionPane.ERROR_MESSAGE); 
        }
    }
}
//Digit Check Method
public static void digitCheck();
{// declaration of variables
    char c;
    int digits = 0;
    for(int i=0;i<leng;i++)
    {
        c = passwd.charAt(i);
        if(Character.isDigit(c))
            digits++;
    }

}

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T08:47:56.650

最直接的方法是`passwd`作为参数传递给`digitCheck()`：

```
public static void main(String[] args) {
            ...
            length = true;
            digitCheck(passwd);
            ...
}

public static void digitCheck(String passwd) {
   // use passwd here
   ...
} 
```

请注意，`leng`也无法访问。由于您可以通过调用 找出字符串的长度`passwd.lenth()`，因此无需`leng`作为单独的参数传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:49:25.867

您的问题是因为您在不同的范围内声明变量。你有两个选择：

任何一个：

*   将您的变量移动到全局变量，您可以通过在方法外部声明变量来执行此操作，通常在类声明下，在您的情况下，这可能只是 above 或 below `private static Component frame;`。

*   将您的变量作为参数传递给另一个方法，因此您需要将`digitCheck()`方法更改为`digitCheck(String passwd)`，然后像这样调用它`digitCheck(passwd)`：

第一个选项将允许您从您所在班级的任何部分访问变量。另一方面，第二个选项将允许您更轻松地重用您创建的方法，因为该方法将是自包含的，而不依赖于全局变量的使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T08:51:35.120

这是因为 digitCheck() 方法不知道 passwd 变量。

passwd 变量在 main() 方法的范围内声明。

要么将 passwd 变量传递给 digitCheck() 方法，要么将其设为类的静态成员，以便 digitCheck() 可以访问它。

# c#-4.0 - 由于事件处理程序导致的内存泄漏

> ID：10294574
> 
> 赞同：0
> 
> 时间：2012-04-24T08:46:05.840
> 
> 标签：c#-4.0, silverlight-4.0, memory-leaks

目前，我必须修复泄漏大量内存的现有 Silverlight 应用程序。使用[Redgate 的 ANT 分析器](http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/index2)，我设法检测到可能存在的问题。其中之一是一个包含 Web 服务的静态类，它包含两个事件处理程序以支持异步计算。
你已经猜到了……很多对象都为这个处理程序分配了一个事件，但大多数都不会再次释放它。结果，这些对象与这些静态事件相关联，因此几乎从未释放......

我需要一个简单的修复来解决这个问题。那么，我必须有哪些可能的选择来修复此内存泄漏，而这些更改不会产生很大影响？

使事件处理程序非静态将导致巨大的变化，因此是不受欢迎的动作......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:47:46.603

使用[弱事件模式](http://msdn.microsoft.com/en-us/library/aa970850.aspx)（不知道是否可以使用 SL）。这将允许调用静态方法时使用更脏的编程模型。

更好的选择是正确订阅/取消订阅事件（同意 tomasmcguinness），但这意味着您可以更改调用代码和/或要求消费者更好地开发。

另一种解决方案可以使用异步模式。也许在您的方法调用中等待回调委托，或者更好的是，返回一个 Task 对象。

# jquery - jQuery 验证自定义规则

> ID：10294578
> 
> 赞同：1
> 
> 时间：2012-04-24T08:46:15.200
> 
> 标签：jquery, validation

我为 jQuery 验证插件制定了一个自定义规则，我希望将其应用于不需要的字段。因此，当我在字段中输入内容时，应该检查它，但如果它是空的，则不应通过自定义规则检查它。

如果我没有将 required 设置为 true 并检查 this.optional(element) 我得到依赖不匹配。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:57:41.727

你可以试试这个。最初为 required 定义规则。然后您可以按如下方式添加或删除规则。

```
str=$("#theFeildId").text();

if(str==""){ 
   $("#theFeildId").rules("remove", "required");
   $("#theFeildId").removeClass("error");
}
else{
    $("#theFeildId").rules("add", "required");
} 
```

# google-maps - 如何在谷歌地图v3中更改方向路径的颜色

> ID：10294585
> 
> 赞同：7
> 
> 时间：2012-04-24T08:46:44.607
> 
> 标签：google-maps, google-maps-api-3

嗨，我正在研究地图[http://gidzior.net/map/v3_animate_marker_directions.html](http://gidzior.net/map/v3_animate_marker_directions.html)，它显示了从起点到终点的线。我想改变这条线的颜色，有人可以帮我吗？我认为这可能有助于改变这些价值观，但这些都不起作用。

```
polyline = new google.maps.Polyline({
    path: [],
    strokeColor: '#FF0000',
    strokeWeight: 3
    });
    poly2 = new google.maps.Polyline({
    path: [],
    strokeColor: '#FF0000',
    strokeWeight: 3
    }); 
```

通用汽车脚本

```
var map;
  var directionDisplay;
  var directionsService;
  var stepDisplay;
  var markerArray = [];
  var position;
  var marker = null;
  var polyline = null;
  var poly2 = null;
  var speed = 0.0000005, wait = 1;
  var infowindow = null;
  var zoomed;
  var zoomedd;
  var zoomeddd;

  var step = 50; // 5; // metres

  var myPano;   
  var panoClient;
  var nextPanoId;
  var timerHandle = null;

  var size = new google.maps.Size(26,25);
  var start_point = new google.maps.Point(0,0);
  var foothold = new google.maps.Point(13,15);

  var car_icon = new google.maps.MarkerImage("http://gidzior.net/map/car.png", size, start_point, foothold);

  var size2 = new google.maps.Size(87,87);
  var start_point2 = new google.maps.Point(0,0);
  var foothold2 = new google.maps.Point(43,87);

  var endIcon = new google.maps.MarkerImage("http://gidzior.net/map/end.png", size2, start_point2, foothold2);

function createMarker(latlng, label, html) {
// alert("createMarker("+latlng+","+label+","+html+","+color+")");
    var contentString = '<b>'+label+'</b><br>'+html;
    var marker = new google.maps.Marker({
        position: latlng,
        map: map,
        icon: car_icon,
        clickable: false,
        zIndex: Math.round(latlng.lat()*-100000)<<5
        });
    return marker;
}

function createEndMarker(latlng, label, html) {
    var contentString = '<b>'+label+'</b><br>'+html;
    var marker = new google.maps.Marker({
        position: latlng,
        map: map,
        icon: endIcon,
        clickable: false,
        zIndex: Math.round(latlng.lat()*-100000)<<5
        });
    return marker;
}

function initialize() {
  infowindow = new google.maps.InfoWindow(
    { 
      size: new google.maps.Size(150,50)
    });
    // Instantiate a directions service.
    directionsService = new google.maps.DirectionsService();

    // Create a map and center it on Warszawa.
    var myOptions = {
      zoom: 13,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      navigationControlOptions: 
        {
            style: google.maps.NavigationControlStyle.SMALL 
        }
    }
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    address = 'warszawa'
    geocoder = new google.maps.Geocoder();
    geocoder.geocode( { 'address': address}, function(results, status) {
       map.setCenter(results[0].geometry.location);
    });

    // Create a renderer for directions and bind it to the map.
    var rendererOptions = {
      map: map,
    }
    directionsDisplay = new google.maps.DirectionsRenderer(rendererOptions);

    // Instantiate an info window to hold step text.
    stepDisplay = new google.maps.InfoWindow();

    polyline = new google.maps.Polyline({
    path: [],
    strokeColor: '#FF0000',
    strokeWeight: 3
    });
    poly2 = new google.maps.Polyline({
    path: [],
    strokeColor: '#FF0000',
    strokeWeight: 3
    });
  }

    var steps = []

    function calcRoute(){

if (timerHandle) { clearTimeout(timerHandle); }
if (marker) { marker.setMap(null);}
polyline.setMap(null);
poly2.setMap(null);
directionsDisplay.setMap(null);
    polyline = new google.maps.Polyline({
    path: [],
    strokeColor: '#FF0000',
    strokeWeight: 3
    });
    poly2 = new google.maps.Polyline({
    path: [],
    strokeColor: '#FF0000',
    strokeWeight: 3
    });
    // Create a renderer for directions and bind it to the map.
    var rendererOptions = {
      map: map,
      suppressMarkers:true
    }
directionsDisplay = new google.maps.DirectionsRenderer(rendererOptions);

        var start = document.getElementById("start").value;
        var end = document.getElementById("end").value;
        var travelMode = google.maps.DirectionsTravelMode.DRIVING

        var request = {
            origin: start,
            destination: end,
            travelMode: travelMode,
            waypoints: [{
                location:new google.maps.LatLng(52.185570, 20.997255),
                stopover:false}],
            optimizeWaypoints: false
        };

        // Route the directions and pass the response to a
        // function to create markers for each step.
    directionsService.route(request, function(response, status) {
        if (status == google.maps.DirectionsStatus.OK){
        directionsDisplay.setDirections(response);

            var bounds = new google.maps.LatLngBounds();
            var route = response.routes[0];
            startLocation = new Object();
            endLocation = new Object();

            // For each route, display summary information.
        var path = response.routes[0].overview_path;
        var legs = response.routes[0].legs;
            for (i=0;i<legs.length;i++) {
              if (i == 0) { 
                startLocation.latlng = legs[i].start_location;
                startLocation.address = legs[i].start_address;
                //marker = google.maps.Marker({map:map,position: startLocation.latlng});
                marker = createMarker(legs[i].start_location,"start",legs[i].start_address,"green");
              }
              endLocation.latlng = legs[i].end_location;
              endLocation.address = legs[i].end_address;
              var steps = legs[i].steps;
              for (j=0;j<steps.length;j++) {
                var nextSegment = steps[j].path;
                for (k=0;k<nextSegment.length;k++) {
                  polyline.getPath().push(nextSegment[k]);
                  bounds.extend(nextSegment[k]);
                }
              }
            }

            polyline.setMap(map);
            document.getElementById("distance").innerHTML = (polyline.Distance()/1000).toFixed(2)+" km";
            map.fitBounds(bounds);
            createEndMarker(endLocation.latlng,"end",endLocation.address,"red");
            map.setZoom(18);
            startAnimation();
            zoomed=false;
            zoomedd=false;
            zoomeddd=false;
            step = 50;
            }                                                    
        });
    }

      var tick = 100; // milliseconds
      var eol;
      var k=0;
      var stepnum=0;
      var speed = "";
      var lastVertex = 1;

//=============== animation functions ======================
      function updatePoly(d) {
        // Spawn a new polyline every 20 vertices, because updating a 100-vertex poly is too slow
        if (poly2.getPath().getLength() > 20) {
          poly2=new google.maps.Polyline([polyline.getPath().getAt(lastVertex-1)]);
          // map.addOverlay(poly2)
        }

        if (polyline.GetIndexAtDistance(d) < lastVertex+2) {
           if (poly2.getPath().getLength()>1) {
             poly2.getPath().removeAt(poly2.getPath().getLength()-1)
           }
           poly2.getPath().insertAt(poly2.getPath().getLength(),polyline.GetPointAtDistance(d));
        } else {
          poly2.getPath().insertAt(poly2.getPath().getLength(),endLocation.latlng);
        }
      }

      function animate(d) {
// alert("animate("+d+")");
        if (d>eol) {;
          map.panTo(endLocation.latlng);
          marker.setPosition(endLocation.latlng);
          return;
        }
        if (d>eol-20000 && zoomeddd!=true) {
          map.setZoom(12); // or whatever value
          zoomeddd=true;
        }
        if (d>eol-10000 && zoomedd!=true) {
          map.setZoom(13); // or whatever value
          zoomedd=true;
        }
        if (d>eol-1500 && zoomed!=true) {
          map.setZoom(15); // or whatever value
          step = 15;
          zoomed=true;
        }
        var p = polyline.GetPointAtDistance(d);
        map.panTo(p);
        marker.setPosition(p);
        updatePoly(d);
        timerHandle = setTimeout("animate("+(d+step)+")", tick);
      }

function startAnimation() {
        eol=polyline.Distance();
        map.setCenter(polyline.getPath().getAt(0));
        // map.addOverlay(new google.maps.Marker(polyline.getAt(0),G_START_ICON));
        // map.addOverlay(new GMarker(polyline.getVertex(polyline.getVertexCount()-1),G_END_ICON));
        // map.addOverlay(marker);
        poly2 = new google.maps.Polyline({path: [polyline.getPath().getAt(0)], strokeColor:"#0000FF", strokeWeight:10});
        // map.addOverlay(poly2);
        setTimeout("animate(50)",2000);  // Allow time for the initial map display
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-24T09:13:24.610

将此添加到**`rendererOptions`**：

```
polylineOptions:{strokeColor:'someValidCSSColorValue'} 
```

[DirectionsRendererOptions](https://developers.google.com/maps/documentation/javascript/reference?hl=en#DirectionsRendererOptions)对象的 polylineOptions 成员接受任何[polylineOption](https://developers.google.com/maps/documentation/javascript/reference?hl=en#PolylineOptions)

# android - 安卓短信状态

> ID：10294593
> 
> 赞同：5
> 
> 时间：2012-04-24T08:47:32.670
> 
> 标签：android, sms, status

我知道不应该使用 SMS 提供程序，但我想知道名为“状态”的字段的可能值是什么（其他一些字段也是如此，但我最感兴趣的是状态）和当我这样做时，这些值意味着什么：

```
Uri uriSms = Uri.parse("content://sms/inbox");
Cursor c = context.getContentResolver().query(uriSms, null,null,null,null); 

//fields retrieved
0: _id
1: thread_id
2: address
3: person
4: date
5: protocol
6: read   
7: status
8: type
9: reply_path_present
10: subject
11: body
12: service_center
13: locked 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T07:51:09.460

我自己找到了答案。在 core/java/android/provider/Telephony.java[类中（这里是 github 上的类](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/provider/Telephony.java)）。有这些代码行：

```
/**
* The TP-Status value for the message, or -1 if no status has
* been received
*/
public static final String STATUS = "status";

public static final int STATUS_NONE = -1;
public static final int STATUS_COMPLETE = 0;
public static final int STATUS_PENDING = 32;
public static final int STATUS_FAILED = 64; 
```

如果您对这些值感兴趣，您可能还想查看“类型”列。它可能很有用。

# memory-leaks - 使用 GPU 处理 Ctrl+C 异常

> ID：10294595
> 
> 赞同：1
> 
> 时间：2012-04-24T08:47:36.510
> 
> 标签：memory-leaks, cuda, nvidia, gpu

我正在使用一些 GPU 程序（使用 CUDA 4.1 和 C），有时（很少）我必须使用 Ctrl+C 中途终止程序来处理一些异常。早些时候我尝试使用 CudaDeviceReset() 函数，但是[talonmies 的这个回复](https://stackoverflow.com/questions/7144195/cudadevicereset-for-multiple-gpus)取代了我对 CudaDeviceReset() 的信任，因此我开始以老式的方式处理此类异常，即“计算机重启”。随着项目规模的增长，这种方法越来越令人头疼。如果有人提出更好的解决方案，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T09:11:15.530

我认为这个问题更为根本——它实际上是一个应用程序设计问题，而不是一个 CUDA 问题。如果您正确设计应用程序以定期检查中断，并在中断时退出主循环并清理资源，那么您不应该遇到此问题（您甚至可以`cudaDeviceReset()`在退出时正确调用。

[这个问题](https://stackoverflow.com/questions/7475115/windows-ctrl-c-cleaning-up-local-stack-objects-in-command-line-app)的答案可能会有所帮助。而[这个](https://stackoverflow.com/questions/1641182/how-can-i-catch-a-ctrl-c-event-c)。而[这个](https://stackoverflow.com/questions/1151183/how-to-catch-the-control-c-exception-in-a-visual-c-console-app)。

# jquery - toggleClass('.selector',time) 上的 jQuery-UI 淡入淡出子容器

> ID：10294605
> 
> 赞同：2
> 
> 时间：2012-04-24T08:48:13.530
> 
> 标签：jquery, jquery-ui, transition

我尝试使用 jquery-ui 的 addClass/toggleClass 函数在两种状态之间进行转换。我的问题是我也想淡化子容器。

这是一个例子：http: [//jsfiddle.net/xhWjP/1/](http://jsfiddle.net/xhWjP/1/)

我也希望#blue 和#red 被动画化，而不仅仅是#transition 块。（点击）。是否已经有内置解决方案，或者我必须自己编写此行为的代码？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:57:41.980

可以使用 CSS3 过渡。（我认为这只是众多方法中的一种）。

```
-webkit-transition: all .2s linear; 
-moz-transition: all .2s linear; 
-ms-transition: all .2s linear; 
-o-transition: all .2s linear; 
transition: all .2s linear; 
```

[**演示**](http://jsfiddle.net/xhWjP/3/)

可用性：[http ://caniuse.com/#search=transition](http://caniuse.com/#search=transition)

IE 10+、FF 9+、Chrome 17+

# mysql - SQL 查询过滤建议

> ID：10294606
> 
> 赞同：1
> 
> 时间：2012-04-24T08:48:14.790
> 
> 标签：mysql, sql, doctrine

我不确定我想要做什么是可能的，但我一直在尝试用不同的方法来解决我需要的解决方案，但到目前为止我空手而归。

假设我有 2 个表（只是一个例子，在我的情况下，还有更多 + 更多数据）

一个称为客户端，另一个称为 form_data。我们在 clients 表中有多个客户，在 form_data 表中，对于 clients 表中存在的每个公司，我们都有多行。在 form_data 我们存储来自不同表单的序列化数据。（身份证和数据）

我目前正在从 form_data 表中提取所有记录，并且我正在尝试在数据列上使用正则表达式来过滤，例如在其中找到值“机油”。

我想要一种方法来进行此过滤，但过滤公司而不是表格..所以我想找到其中包含“机油”的表格，并删除没有此匹配项的 COMPANIES 的所有条目，但是我想保留为匹配的公司显示的所有表格。

我可以发布我的查询，但它相当长，我认为如果我们能解决上述问题，我应该足以实现实际查询。

问候

编辑：

```
SELECT f.form_question_has_answer_id AS f__form_question_has_answer_id, f.form_question_has_answer_request AS f__form_question_has_answer_request, 
f.form_question_has_answer_form_id AS f__form_question_has_answer_form_id, f.form_question_has_answer_user_id AS f__form_question_has_answer_user_id, 
p.project_company_has_user_id AS p__project_company_has_user_id, p.project_company_has_user_project_id AS p__project_company_has_user_project_id, 
p.project_company_has_user_user_id AS p__project_company_has_user_user_id, c.company_id AS c__company_id, c.company_hall_no AS c__company_hall_no, 
c.company_type AS c__company_type, c.company_company_name AS c__company_company_name, c.company_country AS c__company_country, 
c.company_stand_number AS c__company_stand_number, c.company_image_file_1 AS c__company_image_file_1, p2.project_id AS p2__project_id, 
p2.project_name AS p2__project_name, u.user_id AS u__user_id, u.user_username AS u__user_username, f2.form_id AS f2__form_id 
FROM form_question_has_answer f 
INNER JOIN project_company_has_user p ON f.form_question_has_answer_user_id = p.project_company_has_user_user_id 
INNER JOIN company c ON p.project_company_has_user_company_id = c.company_id 
INNER JOIN project p2 ON p.project_company_has_user_project_id = p2.project_id 
INNER JOIN user u ON p.project_company_has_user_user_id = u.user_id 
INNER JOIN form f2 ON p.project_company_has_user_project_id = f2.form_project_id 
WHERE f.form_question_has_answer_id IN ('19262', '21560', '23088', '22660', '14772', '18495', '18720', '21625', '19957', '20943') 
AND ((f2.form_template_name = "custom" AND p.project_company_has_user_garbage_collection = 0 AND p.project_company_has_user_project_id = 29) AND f.form_question_has_answer_request REGEXP 'item-cadcae') 
ORDER BY company_company_name asc 
```

该查询来自一个教义查询。

编辑：如果我的公司在 form_data 表中有 10 个表格，如果我按“机油”过滤，则该公司没有机油的所有表格都将被删除。所以如果公司 id 144 的 10 个表格中只有 1 个表格有机油这个词，那么其他 9 种形式在查询中丢失了。我想保留它们。我想要的是任何没有找到与该匹配项（机油）匹配的任何表格的公司，将其所有表格从搜索中删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:56:59.040

```
SELECT
    c.*
FROM 
    clients as c
    INNER JOIN (
        select 
            *
        from 
            forms
        where 
            sometext like '%motor oil%'
        ) as f
        ON f.client = c.id 
```

[http://sqlfiddle.com/#!3/5b616/1](http://sqlfiddle.com/#!3/5b616/1)

在这部分：

```
select 
    *
from 
      forms
where 
      sometext like '%motor oil%' 
```

您可以使用适当的过滤器放置任何从表单表中选择相关行的查询。

您也可以使用左外连接 where null 技术进行相反的操作。尽管在这种情况下修改子查询以返回不同客户端的列表可能会给您带来更符合您期望的结果：

```
SELECT
    c.*
FROM 
    clients as c
    LEFT OUTER JOIN (
        select 
            distinct 
                client
        from 
            forms
        where 
            sometext like '%motor oil%'
        ) as f
        ON f.client = c.id
where f.client is null 
```

[http://sqlfiddle.com/#!3/5b616/4](http://sqlfiddle.com/#!3/5b616/4)

因此，您的查询类似于：

```
SELECT
    c.*
FROM 
    company AS c 
    INNER JOIN (
                SELECT 
                    DISTINCT c.company_id 
                FROM 
                    form_question_has_answer f 
                    INNER JOIN project_company_has_user p 
                        ON f.form_question_has_answer_user_id = p.project_company_has_user_user_id 
                    INNER JOIN company c 
                        ON p.project_company_has_user_company_id = c.company_id 
                    INNER JOIN project p2 
                        ON p.project_company_has_user_project_id = p2.project_id 
                    INNER JOIN user u 
                        ON p.project_company_has_user_user_id = u.user_id 
                    INNER JOIN form f2 
                        ON p.project_company_has_user_project_id = f2.form_project_id 
                WHERE 
                    f.form_question_has_answer_id IN ('19262', '21560', '23088', '22660', '14772', '18495', '18720', '21625', '19957', '20943') 
                    AND ((f2.form_template_name = "custom" 
                    AND p.project_company_has_user_garbage_collection = 0 
                    AND p.project_company_has_user_project_id = 29) 
                    AND f.form_question_has_answer_request REGEXP 'item-cadcae') 
                ORDER BY company_company_name asc
            ) as f
                ON f.company_id= c.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T09:02:56.177

至少有一个与搜索匹配的表单的所有客户的所有表单数据：

```
SELECT * FROM `form_data`
WHERE `clientid` IN (
  SELECT DISTINCT `clientid` FROM `form_data`
  WHERE `data` RLIKE '[[:<:]]motor oil[[:>:]]'
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T08:53:08.520

不确定 为匹配的公司保留所有表格是什么意思？不只是为了这个...

```
select * from clients inner join form_data on clients.id = form_data.id where form_data.[data] like '%motor  oil%' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T08:55:23.900

这将返回为名称中也包含“机油”的公司填写的所有包含“机油”的表格：

```
SELECT  *
FROM    clients c
JOIN    form_data fd
ON      fd.client = c.id
WHERE   fd.data RLIKE '[[:<:]]motor oil[[:>:]]'
        AND c.name RLIKE '[[:<:]]motor oil[[:>:]]' 
```

# java - jsp中网页的url

> ID：10294620
> 
> 赞同：0
> 
> 时间：2012-04-24T08:49:22.047
> 
> 标签：java, jsp, url, servlets

我只需要一点帮助，那就是：我见过很多次`http://www.xyz.com/index.jsp?etetet%rr^_frfwrw....`。我只是想知道这个问号`?etetet%....`后面是什么`index.jsp`以及为什么它在 index.jsp 之后？有人可以解释一下这背后的原因吗？

我也在像这样运行我的应用程序：[http://localhost:8080/myproject/index.jsp](http://localhost:8080/myproject/index.jsp)

我怎样才能使我的网址看起来像上面的那样，即`http://localhost:8080/myproject/index.jsp?..eeqwe_%cdc...`

我正在使用 jsp、servlet 和 tomcat 服务器。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:55:00.833

这在 java 中称为“查询字符串” 之后传递的所有元素？可以从 request.getQueryString() 中检索字符

例如

```
test.jsp?myparam 
```

对 request.getQueryString() 的调用将返回“myparam”

通常，您使用由 & 字符分隔的 key=value 模式传递一些参数，以便使用解析器来理解几个参数，例如

```
test.jsp?param1=value1&param2=value2 
```

请注意，URL 的长度限制为 255 个字符

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T08:51:57.040

这就是所谓的 URL 查询或 URL 参数。这些参数可以在您的 HttpRequest 对象中访问，如下所示：

```
String name = (String) request.getParameter("name"); 
```

对于类似的 URL `blah?name=Donkey`，String 变量`name`将收到一个“驴”。

与您的示例不同，参数通常以键值对的形式出现，即。= 并且当传递多个参数时，这些对被与符号分开：

`blah?name=Donkey&quantity=10`

维基百科：[http ://en.wikipedia.org/wiki/Query_string](http://en.wikipedia.org/wiki/Query_string)

# c# - 为什么我的查询字符串不起作用？

> ID：10294623
> 
> 赞同：-1
> 
> 时间：2012-04-24T08:49:33.467
> 
> 标签：c#, asp.net

我在查询字符串中遇到问题。以下是我的asp代码

```
 <asp:Label ID="Lable1" runat="server" Text=""  ></asp:Label>
  <asp:Button ID="Button1" runat="server" Text="Button" onclick="Button1_Click" /> 
```

C#代码：

```
 protected void Page_Load(object sender, EventArgs e)
{   
}
protected void Button1_Click(object sender, EventArgs e)
{
    Lable1.Text += Request.QueryString["refresh"] ;
    Response.Redirect("QueryString1t.aspx?refresh=" + 1 + "");    
} 
```

据我所知，每次单击按钮时，Lable1 文本都会发生变化。Lable1 文本不应在页面加载时显示任何内容。在按钮单击上，它应该类似于第一次单击 1 和第二次单击 11 等等。但它没有按我的预期显示。所以请告诉我我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:58:31.050

您在设置标签文本后重定向，方法错误。

## 试试这个： -

```
protected void Page_Load(object sender, EventArgs e)
{
    Lable1.Text = Request.QueryString["refresh"];
}
protected void Button1_Click(object sender, EventArgs e)
{
    Response.Redirect("QueryString1t.aspx?refresh=" +
     string.IsNullOrEmpty(Request.QueryString["refresh"]) ? 0 :
      Convert.ToInt32(Request.QueryString["refresh"]) + 1 + "");    
} 
```

## 或这个： -

```
protected void Page_Load(object sender, EventArgs e)
{
}
protected void Button1_Click(object sender, EventArgs e)
{
    Lable1.Text = string.IsNullOrEmpty(Lable1.Text) ? "0" :
        (Convert.ToInt32(Lable1.Text) + 1).ToString();  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:01:01.227

看看这个：

[http://msdn.microsoft.com/en-us/library/ms178472.aspx](http://msdn.microsoft.com/en-us/library/ms178472.aspx)

特别是循环中的第四和第五个事件。

如果您希望在查找时更新文本，那么您需要将该代码放在页面加载中，而不是单击事件处理程序中。

简而言之，您必须这样考虑：每次进行重定向时，您都会丢失视图状态，

[http://msdn.microsoft.com/en-us/library/ms972976.aspx](http://msdn.microsoft.com/en-us/library/ms972976.aspx)

这是 ASP.NET 跟踪控件更新的方法，就像在事件处理程序中一样。因此，您的更新会立即丢失。

您将要命中的下一段代码是您的 load 事件，因此您*需要*在其中设置标签的 text 属性。

[如何通过 response.redirect 保留标签的值？](https://stackoverflow.com/questions/103765/how-do-i-persist-the-value-of-a-label-through-a-response-redirect)

# regex - 正则表达式检查 4 个连续数字

> ID：10294626
> 
> 赞同：7
> 
> 时间：2012-04-24T08:49:39.517
> 
> 标签：regex

我可以用吗

```
\d\d\d\d[^\d] 
```

检查四个连续的数字？

例如，

411112 好的

455553 好的

1200003 好的

f44443 好的

g55553 好的

3333 确定

f4442 否

45553 无

f4444g4444 无

f44444444 否

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-24T08:57:33.220

如果你想在一个字符串中找到任何一系列的 4 位数字，`/\d\d\d\d/`或者`/\d{4}/`会这样做。如果要查找一系列正好 4 位数字，请使用`/[^\d]\d{4}[^\d]/`. 如果字符串应仅包含 4 个连续数字，请使用`/^\d{4}$/`.

编辑：我想你想找到 4 个相同的数字，你需要一个反向引用。`/(\d)\1{3}/`可能是您正在寻找的。

编辑 2：`/(^|(.)(?!\2))(\d)\3{3}(?!\3)/`将仅匹配具有完全相同的 4 个连续数字的字符串。

第一组匹配字符串或任何字符的开头。然后有一个负前瞻，它使用第一组来确保后面的字符不匹配第一个字符（如果有的话）。第三组匹配任何数字，然后重复 3 次并反向引用第 3 组。最后有一个前瞻，确保后面的字符与连续数字系列不匹配。

这种事情在 javascript 中很难做到，因为你没有前向引用和后视之类的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T08:54:13.133

数字应该是字符串的一部分，还是只需要四个数字。在后一种情况下，正则表达式应该是`^\d{4}$`. `^`标记字符串的开始，结束`$`。这样可以确保只有四个数字是有效的，并且在此之前或之后都没有。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T08:53:43.523

这应该匹配四个数字 ( `\d\d\d\d`)，后跟一个非数字字符 ( `[^\d]`)。如果你只想匹配任何四位数字，你应该使用`\d\d\d\d`or `\d{4}`。如果要确保字符串仅包含四个连续数字，请使用`^\d{4}$`. 将`^`指示正则表达式引擎在字符串的开头开始匹配，而`$`将指示正则表达式引擎在字符串的末尾停止匹配。

# jquery - jquery $.ajax - 错误处理程序启动时没有明显错误

> ID：10294627
> 
> 赞同：1
> 
> 时间：2012-04-24T08:49:44.480
> 
> 标签：jquery, ajax

在[http://83.150.87.220/HelsinkiViSe/helsinki-map-application/ajax_test.php](http://83.150.87.220/HelsinkiViSe/helsinki-map-application/ajax_test.php)上，您可以在按下页面顶部的按钮时发送一个非常简单的异步 HTTP 请求。贝娄是它的代码：

```
var xmlString = "<request><session></session><target_id>20</target_id></request>";

// Build the URL to connect to
var url = "http://83.150.87.220/HelsinkiViSe.dll/load";

$.ajax({ 
    type: "POST", 
    url: url,
    dataType: 'application/xml',
    data: xmlString, 
    success: function(msg) { 
        //var data = JSON.parse(msg); 
        $("#text").html(msg); 
    },
    error: function(jqXHR, textStatus, errorThrown) {
        $("#text").html(jqXHR+'<br>'+textStatus+'<br>'+errorThrown); 
    }
}); 
```

如您所见，请求数据块是一段简单的 XML：

```
var xmlString = "<request><session></session><target_id>20</target_id></request>"; 
```

后端脚本也应该响应一个 XML 块，它确实如此（使用 Firebug 和 Chrome 的“代码检查器”监视通信）。这个块是：

```
<?xml version="1.0" encoding="UTF-8"?>
<response>
  <target>
    <target_id>20</target_id>
    <plot>20803/3</plot>
    <builder>(makasiini L3)</builder>
    <housing_form>avoin</housing_form>
    <block_name>JätkäHieta</block_name>
    <finnish_year></finnish_year>
    <target_name></target_name>
    <target_address></target_address>
    <office_space></office_space>
    <purpose></purpose>
    <reservations></reservations>
    <contacts></contacts>
  </target>
  <status>OK</status>
  <errormsg></errormsg>
</response> 
```

问题是错误处理程序仍然启动，而成功处理程序没有。这让我白发苍苍。你知道这可能是什么原因以及如何解决它吗？

提前致谢。

安德烈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:10:18.327

至少有两个甚至三个问题，我敢肯定其中一个只是调试代码：

1.  你已经告诉 jQuery 使用`dataType: "application/xml"`. 该`dataType`参数不是 MIME 类型，而是特定于 jQuery 的东西。你想要`dataType: "xml"`。

2.  （这可能是调试问题。）在您的`success`函数中，您将 XML 文档传递给`html`函数，这将引发错误。如果您将其更改为`text`，它会`"[object Document]"`改为显示，这是有道理的 - jQuery 已`Document`为您将 XML 反序列化为 XML 对象。

3.  您正在发送 XML 字符串而不对其进行编码。当您为`data`参数指定一个字符串时，**您**有责任确保它为传输（[参考](http://api.jquery.com/jquery.ajax/#sending-data-to-server)）正确编码。我很确定你需要换行

    ```
    data: xmlString 
    ```

    ...到

    ```
    data: encodeURIComponent(xmlString) 
    ```

    我说“相当肯定”是因为我不记得上次尝试将 XML 发布到服务器是什么时候了。但是您发送的任何东西`POST`通常都应该是 URL 编码的。

[现场工作示例](http://jsbin.com/uqurin)| [来源](http://jsbin.com/uqurin/edit)

# android - 如何从广播接收器调用服务方法？

> ID：10294629
> 
> 赞同：2
> 
> 时间：2012-04-24T08:49:51.173
> 
> 标签：android

我有 GPS 跟踪应用程序的主要目标是每隔 5 分钟将 GPS 坐标保存到支持的数据库中。所以我创建了`Service`&`receiver`因为即使我的应用程序也没有打开/运行，这应该可以工作。

用户输入执行代码后，它会创建数据库并进入欢迎屏幕。在那里它开始 GPS 捕获并将其保存到 PDA 数据库调用服务以上传。我有接收器，当电话是`Booted`它启动这个接收器和接收器呼叫服务。

我的问题是接收器不呼叫服务。它没有去服务类。

```
 protected void onStop(){
    super.onStop();
    if(gpsReceiver != null){
        unregisterReceiver(gpsReceiver);
    }
}

 @Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.home);

    gpsReceiver = new GpsReceiver();
    IntentFilter intentFilter1 = new IntentFilter(Intent.ACTION_BOOT_COMPLETED);
    intentFilter1.addAction(Intent.ACTION_BOOT_COMPLETED);
    intentFilter1.addAction(Intent.ACTION_POWER_CONNECTED);
    intentFilter1.addAction(Intent.ACTION_SCREEN_ON);
    registerReceiver(gpsReceiver, intentFilter1);

    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    locationManager.requestLocationUpdates(
           LocationManager.GPS_PROVIDER, 
           MINIMUM_TIME_BETWEEN_UPDATES, 
           MINIMUM_DISTANCE_CHANGE_FOR_UPDATES,
           new MyLocationListener()
    );
    locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, new MyLocationListener());
 }

 private class MyLocationListener implements LocationListener {
        public void onLocationChanged(Location location) {
            String message = String.format( "Location \n Longitude: %1$s \n Latitude: %2$s", location.getLongitude(), location.getLatitude());
            longitude = location.getLongitude();
            latitude =location.getLatitude();

            //save GPS coordinate to PDA DB
            GPSDBAdapter dbAdapter = GPSDBAdapter.getDBAdapterInstance(HomeActivity.this);
            dbAdapter.openDataBase();
            dbAdapter.insertGPS(longitude, latitude, "MASS", deserializeObject());
            dbAdapter.close(); 

            //After save GPS coordinate it upload to backend using service
            startService(new Intent(HomeActivity.this, UploadService.class));
            Toast.makeText(HomeActivity.this, message, Toast.LENGTH_LONG).show();
        }

        public void onStatusChanged(String s, int i, Bundle b) {
            Toast.makeText(HomeActivity.this, "Provider status changed",Toast.LENGTH_LONG).show();
        }

        public void onProviderDisabled(String s) {
           Toast.makeText(HomeActivity.this,"Provider disabled by the user. GPS turned off",Toast.LENGTH_LONG).show();
        }
        public void onProviderEnabled(String s) {
          Toast.makeText(HomeActivity.this, "Provider enabled by the user. GPS turned on",Toast.LENGTH_LONG).show();
        }

    } 
```

这是我的接收器。

```
 public class GpsReceiver extends BroadcastReceiver {
@Override
public void onReceive(final Context context, Intent intent) {
    int delay = 5000; // delay for 5 sec.
    //int period = 1000 *60*5; // repeat every 5min.
    int period = 30000; // repeat every 5min.

    //TO-REMOVE -TESTING PURPOSE
     Intent serviceIntent = new Intent(context,UploadService.class);
     context.startService(serviceIntent);

     if ("android.intent.action.BOOT_COMPLETED".equals(intent.getAction())) {
        Timer timer = new Timer();

        timer.scheduleAtFixedRate(new TimerTask() {
        public void run() {
            System.out.println(" Receiver done");
            Intent serviceIntent = new Intent(context,UploadService.class);
            context.startService(serviceIntent);
        }

        }, delay, period);
    }
} 
```

}

这是我的服务。

```
 public class UploadService extends Service{
private Thread serviceThread = null;
public static final String APPURL = "http://124.43.25.10:8080/Ornox/GPSPulseReceiver";

public static double longitude;
public static  double latitude ;

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void onCreate() {
    Log.d("========", "onCreate");
    Toast.makeText(UploadService.this, "Upload GPS Service Created", Toast.LENGTH_LONG).show();

}

@Override
public void onDestroy() {
    Toast.makeText(UploadService.this, "Upload Service Stopped", Toast.LENGTH_LONG).show();
}

@Override
public void onStart(Intent intent, int startid) {
    Toast.makeText(UploadService.this, "Upload Service Started", Toast.LENGTH_LONG).show();

    ConnectivityManager manager = (ConnectivityManager) getSystemService(MassGPSTrackingActivity.CONNECTIVITY_SERVICE);
    boolean is3g = manager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE).isConnectedOrConnecting();
    boolean isWifi = manager.getNetworkInfo(ConnectivityManager.TYPE_WIFI).isConnectedOrConnecting();
    if(is3g ||isWifi){
        if(!APPURL.equals("")){
            serviceThread = new ServiceThread();
            serviceThread.start();

        }
    }else {
        Toast.makeText(this, "GPRS/WIFI is not available", Toast.LENGTH_LONG).show();
    }

}

public void uploadGPSData() {
    GPSDBAdapter gpsAdapter = GPSDBAdapter.getDBAdapterInstance(this);
    gpsAdapter.openDataBase();
    try{
        String query = " SELECT ExecutiveCode,CaptureDate,CaptureTime,Longitude,Latitude" +//4
                        " FROM WMLiveGPSData " +
                        " WHERE UploadFlag ='1' ";
         ArrayList<?> stringList = gpsAdapter.selectRecordsFromDBList(query, null);
         System.out.println("==WMLiveGPSData==stringList=="+stringList.size());
         gpsAdapter.close();
         if(stringList.size() > 0){
             for (int i = 0; i < stringList.size(); i++) {
                 ArrayList<?> arrayList = (ArrayList<?>) stringList.get(i);
                 ArrayList<?> list = arrayList;
                 HttpResponse response = null;

                    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
                    nameValuePairs.add(new BasicNameValuePair("repc", (String)list.get(0)));
                    nameValuePairs.add(new BasicNameValuePair("rouc", "SE0160"));
                    nameValuePairs.add(new BasicNameValuePair("Date", (String)list.get(1)));
                    nameValuePairs.add(new BasicNameValuePair("Time", (String)list.get(2)));
                    nameValuePairs.add(new BasicNameValuePair("long", (String)list.get(3)));
                    nameValuePairs.add(new BasicNameValuePair("lat", (String)list.get(4)));
                    try {
                        HttpParams httpParameters = new BasicHttpParams();
                        int timeoutConnection = 3000000;
                        HttpConnectionParams.setConnectionTimeout(httpParameters,timeoutConnection);
                        int timeoutSocket = 5000000; // in milliseconds which is the timeout                                
                        HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);
                        HttpClient httpclient = new DefaultHttpClient(httpParameters);
                        HttpPost method = new HttpPost(APPURL);
                        // method.setHeader("Content-Type","text/xml");

                        method.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                        response = httpclient.execute(method);
                        System.out.println("==response==" + response);
                        if (response != null) {
                            Log.i("login",""+ response.getEntity().getContentLength());
                        } else {
                            Log.i("login", "got a null response");
                        }

                    } catch (ClientProtocolException e) {
                        e.printStackTrace();
                    } catch (IOException e) {
                        e.printStackTrace();
                    } catch (Exception e) {
                        Toast.makeText(getApplicationContext(),
                                "Could not connect to server. Please Try again",
                                Toast.LENGTH_SHORT).show();
                        Log.e("log_tag", "Error in http connection " + e.toString());
                    }
             }

         }
    }catch (Exception e) {
        e.printStackTrace();
    }

    //return response;
}

private class ServiceThread extends Thread {
    @Override
    public void run() {
          uploadGPSData();
    }   
}; 
```

}

这是我的清单文件

```
 <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".MassGPSTrackingActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

     <activity android:name=".HomeActivity"   android:screenOrientation="unspecified"></activity>
     <service android:enabled="true" android:name=".service.UploadService" />

    <receiver android:name="com.mass.gps.service.GpsReceiver">
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
            <action android:name="android.intent.action.BATTERY_CHANGED" />
            <action android:name="android.intent.action.ACTION_POWER_CONNECTED"/>
             <action android:name="android.intent.action.SCREEN_ON"/>
            <action android:name="android.intent.action." />
        </intent-filter>
    </receiver>

</application>

 <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
 <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
 <uses-permission android:name="android.permission.ACCESS_GPS"></uses-permission>
 <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
 <uses-permission android:name="android.permission.READ_PHONE_STATE" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WAKE_LOCK"/>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

问题是它没有进入服务类。

请帮我解决这个问题...

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:56:08.203

我认为你的包名不正确的清单文件

```
 <service android:enabled="true" android:name="com.mass.gps.service.UploadService" /> 
```

将您的服务名称指定为包名

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T09:24:58.243

在接收器中使用它：

```
Intent i = new Intent();
i.setClassName("com.intelligent.locator", "com.intelligent.locator.AlarmActivity");
i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(i); 
```

# php - CakePHP 2.0，模型函数的返回数据

> ID：10294633
> 
> 赞同：0
> 
> 时间：2012-04-24T08:50:18.287
> 
> 标签：php, cakephp-2.0

我使用 cakephp2.0，在一台服务器上， cakephp 从 Database 返回数据，例如：

```
Array
(
    [0] => Array
        (
            [users] => Array
                (
                    [user_id] => 1
                    [username] => admin
                    [password] => 90c4c3e64eb085da3a9feccc38489281
                    [admin_role] => 24
                    [datetime_reg_time] => 
                    [datetime_last_login] => 2012-04-24 15:15:55
                    [email] => 
                )

            [roles] => Array(...) 
```

但另一台服务器返回的数据是：

```
Array
(
    [0] => Array
        (
            [0] => Array
                (
                    [user_id] => 1
                    [username] => admin
                    [password] => 90c4c3e64eb085da3a9feccc38489281
                    [admin_role] => 24
                    [datetime_reg_time] => 
                    [datetime_last_login] => 2012-04-23 11:41:35
                    [email] => 
                    [roleId] => 24
                    [roleName] => 管理员
                    [rolePermissions] => 60,61,62,63,64,65,66,67,68,69,70,71,72,93,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,94,95,96,97,98,99,100,101,109,112,108,107
                )

        ) 
```

我不知道为什么.....不是PDO的版本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T01:42:37.823

我遇到过你问的

这是 cakephp 的错误

因为你的其他服务器 pdo 不支持**PDOStatement::getColumnMeta()**。</p>

[http://php.net/manual/en/pdostatement.getcolumnmeta.php](http://php.net/manual/en/pdostatement.getcolumnmeta.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T07:26:51.870

这是 php 的问题，当我安装 php 时，我应该这样配置： ./Configure ....--with-pdo-mysql=mysqlnd

# c++ - 类似于 PHP 和 Javascript 的 Astyle 库

> ID：10294634
> 
> 赞同：4
> 
> 时间：2012-04-24T08:50:22.387
> 
> 标签：c++, code-formatting, astyle

[Astyle](http://astyle.sourceforge.net/)是 Java C# C++ et al 的优秀代码格式化程序，但它不格式化 PHP 或 Javascrpt。是否有任何免费的 PHP 和 Javascript 开源代码格式化程序？谷歌对这种情况不是很有帮助。

注意：我需要一个 C/C++ 库，因为这是我正在使用的编程语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T19:02:14.420

最终选择了 PHP 类。我计划使用 PHP 运行以产生理想的结果代码可在[此处找到](http://pear.php.net/package/PHP_Beautifier/download)

# ssl - 如何获取 ldap/Active 目录的 ssl 证书

> ID：10294642
> 
> 赞同：7
> 
> 时间：2012-04-24T08:50:53.077
> 
> 标签：ssl, ldap

我是 LDAP / Active Directory 环境的新手。

我正在尝试使用 SSL 支持连接 LDAP / Active Directory。

要连接 LDAP/Active Directory，需要 SSL 证书来建立连接。

我一直在谷歌搜索，大部分结果是“使用 Microsoft CA（证书颁发机构）创建证书”。这是为 LDAP/Active Directory 生成证书的唯一方法吗？

如何获得 LDAP / Active Directory 的 SSL 证书？有没有其他方法可以获取 LDAP/Active Directory 的 SSL 证书？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T18:18:23.537

OpenSSL 工具可用于：

*   [生成新的自签名证书](http://www.madboa.com/geek/openssl/#cert-self)
*   [生成证书请求](http://www.madboa.com/geek/openssl/#cert-request)
*   [使用 LDAPS 从 LDAP 服务器检索现有证书（但不是从 OpenSSL 0.9.8 开始的 StartTLS）](http://www.madboa.com/geek/openssl/#cert-retrieve)

OpenSSL 可通过 Mac OS 和大多数 Linux 发行版上的控制台使用。

您可以在此处获取适用于 Windows 的 OpenSSL： [OpenSSL Distributions](https://www.openssl.org/source/)

Mac Keychain Access 应用程序也可用于生成证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:16:07.570

需要安全连接的 LDAP 客户端代码应连接到目录服务器侦听 SSL 连接的端口，或连接到目录服务器侦听不安全连接的端口，并使用`StartTLS extended operation`. 您引用的证书是目录服务器使用的证书。

# jquery - jquery 滑块在 ie8 及以下版本中没有行为

> ID：10294649
> 
> 赞同：1
> 
> 时间：2012-04-24T08:51:15.870
> 
> 标签：jquery, css, plugins, internet-explorer-8, internet-explorer-7

我真的很难过这一点，想知道你是否能指出可能是显而易见的。我有一个位于图像顶部的 JQuery 滑块插件（jQuery Cycle）。尽管在 ie8 之前的任何东西中，我都无法使背景透明且滑块大小正常。它在所有现代浏览器中都能完美运行。

该站点是 ukgreenenergy.co.uk，滑块位于顶部。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:39:31.740

插件有一些选项可以控制`background-color`. 看起来以下一项或两项应禁用白色背景。

```
cleartype: !$.support.opacity,  // true if clearType corrections should be applied (for IE) 
cleartypeNoBg: false, // set to true to disable extra cleartype fixing (leave false to force background color setting on slides) 
```

从代码中的注释来看，对于这个函数`clearTypeFix($slides)`来说，IE6 需要白色背景。这是 IE6 在应用淡入淡出过渡时的一个众所周知的修复。

设置`cleartypeNoBg: true`应该解决它。

**编辑：**哦，看起来在 IE和[Internet Explorer](http://www.workingconcept.com/blog/entry/internet-explorer-jquery-cycle-plugin-background-issue)[中具有透明度的jQuery 循环插件和 jQuery 循环插件背景问题之前已经提出了这个问题](https://stackoverflow.com/questions/1706081/jquery-cycle-plugin-with-transparency-in-ie)

# android - 如何为所有活动设置全屏布局

> ID：10294650
> 
> 赞同：1
> 
> 时间：2012-04-24T08:51:22.077
> 
> 标签：android, android-layout, android-intent, android-widget

我想让它变成全屏，并适用于所有智能手机，这个代码部分创建了一个可水平和垂直滚动的表格布局，我还想查看以布局为中心的edittext矩阵。谢谢

```
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
    WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.seconda);

    HorizontalScrollView HSC = new HorizontalScrollView(this);
    ScrollView VSC = new ScrollView(this);
    VSC.setBackgroundResource(R.drawable.lavagna_psd);

    tableLayout = new TableLayout(this);
    tableLayout.setGravity(Gravity.CENTER); 

    values = new EditText[3][3];

    for (int i = 0; i < 3; i++) {

      tableRow = new TableRow(this); 
      tableRow.setGravity(Gravity.CENTER);

      for (int j = 0; j < 3  ; j++) {
        values[i][j] = new EditText(this);
        values[i][j].setHint("r: " + (i) + " " + "c: " + (j));
        values[i][j].setPadding(10, 10, 10, 10);
        tableRow.addView(values[i][j]);
      }

      tableLayout.addView(tableRow);
    }

    VSC.addView(tableLayout);
    HSC.addView(VSC);
    setContentView(HSC);

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T09:19:34.680

您可以在 xml 配置或 Java 代码中使您的应用程序全屏显示。您可以在下面找到在这两种情况下如何执行此操作。

在 res/values 目录下的 styles.xml 中创建您自己的自定义样式。您可以使用不同的布尔值打开/关闭其任何选项，如下所示：

```
<style name="Theme.CustomizedFullScreen" parent="android:Theme">
    <item name="android:windowFullscreen">true</item>
    <item name="android:windowNoTitle">true</item>
</style> 
```

然后在清单文件中，您只需为您的应用程序提及此样式，如下所示：

```
android:theme="@style/Theme.CustomizedFullScreen" 
```

您也可以在 onCreate() 方法之后的 Activity 的 Java 文件中执行相同操作，如下所示：

```
requestWindowFeature(Window.FEATURE_NO_TITLE);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
        WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T08:56:08.417

只需将应用程序的主题设置为全屏即可。将以下内容添加到 AndroidManifest.xml 中的应用程序标签

```
android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T09:13:26.637

使用此代码，它也会隐藏通知栏，您可以查看全屏，您将此代码放在 super.onCreate() 和 SetContentView() 之间

```
super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
            getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                    WindowManager.LayoutParams.FLAG_FULLSCREEN);
            setContentView(R.layout.splash_image_layout); 
```

1.  拳头线用于去除应用名称栏，
2.  第二行也用于删除通知栏。

# php - 0 不会从数值的前面剥离

> ID：10294651
> 
> 赞同：2
> 
> 时间：2012-04-24T08:51:23.077
> 
> 标签：php, for-loop, int

我正在为朋友的网站开发一个项目，该项目假设生成完全随机的电话号码，以显示在“假”审查板上。我认为最好的方法是让我分别生成每个部分。所以 3-3-4，但无论我做什么，每次前面有一个 0 时，代码都会将其切断。这是我的意思的一个例子：

[http://www.shiningashes.net/Test.php](http://www.shiningashes.net/Test.php)

然而，这就是我的代码：

```
<?php
for ($i = 0000; $i <= 9999; $i++) {
echo $i;
echo "<br>";
}
?> 
```

如何让 0 停止被裁剪，以便显示 0？0001、0021、0123 等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:55:40.300

您可以使用[str_pad](http://php.net/manual/en/function.str-pad.php)

```
for ($i = 0; $i <= 9999; $i++) {
   echo str_pad($i, 4, '0', STR_PAD_LEFT);
   echo "<br>";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T08:58:38.553

您可以使用 printf 来格式化输出：

```
<?php
for ($i = 0; $i <= 9999; $i++) {
  printf("%04d<br>\n",$i);
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T08:55:59.950

如果要保留零，则需要将变量设为字符串。这意味着使用引号，并且永远不要在其上使用数字运算符。但是由于您依赖于在其上使用 ++，因此我建议使用以下 hack：

```
<?php
for ($i = 10000; $i <= 19999; $i++) {
    $str=substr ( $i , 0 , 4 );
    echo $i;
    echo $str;
    echo "<br>";
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T09:03:13.850

打印时需要将整数转换为字符串。

```
<?php
for ($i = 0; $i <= 9999; $i++) {
    printf("%04d<br />", $i);
 }
 ?> 
```

查看 printf/sprintf 的文档以获取更多信息。亲切的问候，斯特凡

# java - 在 Java 中验证 SAML 1.1 令牌的数字签名失败

> ID：10294653
> 
> 赞同：2
> 
> 时间：2012-04-24T08:51:27.257
> 
> 标签：java, digital-signature, saml

能够在 Java 中验证 SAML2.0 令牌的数字签名。使用下面的代码片段。

```
DOMValidateContext valContext = new DOMValidateContext(new X509KeySelector(), nl.item(0));
//Unmarshaling the XML Signature
XMLSignatureFactory factory = XMLSignatureFactory.getInstance("DOM");
XMLSignature signature = factory.unmarshalXMLSignature(valContext);

//Validating the XML Signature
boolean coreValidity = signature.validate(valContext);
if (coreValidity == false) {
   System.err.println("Signature failed"); 
} else {
   System.out.println("Signature passed");
}

if(!coreValidity){
boolean sv = signature.getSignatureValue().validate(valContext);
Iterator i = signature.getSignedInfo().getReferences().iterator();
  for (int j=0; i.hasNext(); j++) {
    boolean refValid = ((Reference)i.next()).validate(valContext);
  }
} 
```

但是**无法**在 Java 中验证 SAML1.1 令牌的数字签名。•引用验证（签名中每个引用的摘要的验证）失败 •签名验证（签名的密码验证）失败

***需要帮助来解决同样的问题。***

**使用下面的代码片段解决了异常**

```
NodeList assertnode = doc.getElementsByTagNameNS("urn:oasis:names:tc:SAML:1.0:assertion", "Assertion");
 NamedNodeMap attrStore = assertnode.item(0).getAttributes();
 System.out.println("ID - " + attrStore.getNamedItem("AssertionID").getNodeValue());
 IdResolver.registerElementById(doc.getDocumentElement(), attrStore.getNamedItem("AssertionID").getNodeValue()); 
```

***下面抛出异常***

```
exception:-> javax.xml.crypto.dsig.XMLSignatureException: javax.xml.crypto.URIReferenceException: com.sun.org.apache.xml.internal.security.utils.resolver.ResourceResolverException: Cannot resolve element with ID _165367aa-cf9b-442b-9f44-167ecbc84b54
javax.xml.crypto.dsig.XMLSignatureException: javax.xml.crypto.URIReferenceException: com.sun.org.apache.xml.internal.security.utils.resolver.ResourceResolverException: Cannot resolve element with ID _165367aa-cf9b-442b-9f44-167ecbc84b54
    at org.jcp.xml.dsig.internal.dom.DOMReference.dereference(DOMReference.java:352)
    at org.jcp.xml.dsig.internal.dom.DOMReference.validate(DOMReference.java:311)
    at org.jcp.xml.dsig.internal.dom.DOMXMLSignature.validate(DOMXMLSignature.java:244)
    at com.pkg.RequestProcessor.processTokenResponse(RequestProcessor.java:134)
    at com.pkg.LoginFilter.doFilter(LoginFilter.java:69)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:185)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:151)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:269)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: javax.xml.crypto.URIReferenceException: com.sun.org.apache.xml.internal.security.utils.resolver.ResourceResolverException: Cannot resolve element with ID _165367aa-cf9b-442b-9f44-167ecbc84b54
    at org.jcp.xml.dsig.internal.dom.DOMURIDereferencer.dereference(DOMURIDereferencer.java:82)
    at org.jcp.xml.dsig.internal.dom.DOMReference.dereference(DOMReference.java:344)
    ... 20 more
Caused by: com.sun.org.apache.xml.internal.security.utils.resolver.ResourceResolverException: Cannot resolve element with ID _165367aa-cf9b-442b-9f44-167ecbc84b54
    at com.sun.org.apache.xml.internal.security.utils.resolver.implementations.ResolverFragment.engineResolve(ResolverFragment.java:89)
    at com.sun.org.apache.xml.internal.security.utils.resolver.ResourceResolver.resolve(ResourceResolver.java:236)
    at org.jcp.xml.dsig.internal.dom.DOMURIDereferencer.dereference(DOMURIDereferencer.java:75)
    ... 21 more 
```

**下面还列出了来自 STS 服务器返回的请求的 XML**

```
<trust:RequestSecurityTokenResponseCollection
    xmlns:trust="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
    <trust:RequestSecurityTokenResponse>
        <trust:Lifetime>
            <wsu:Created
                xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">2012-04-20T11:58:45.250Z</wsu:Created>
            <wsu:Expires
                xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">2012-04-20T12:38:45.250Z</wsu:Expires>
        </trust:Lifetime>
        <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
            <EndpointReference xmlns="http://www.w3.org/2005/08/addressing">
                <Address>http://localhost:8080/</Address>
            </EndpointReference>
        </wsp:AppliesTo>
        <trust:RequestedSecurityToken>
            <saml:Assertion MajorVersion="1" MinorVersion="1"
                AssertionID="_eadcac75-e528-4b58-9b53-f6f03a8ec691" Issuer="http://3MTLO/STS/"
                IssueInstant="2012-04-20T11:58:45.250Z" xmlns:saml="urn:oasis:names:tc:SAML:1.0:assertion">
                <saml:Conditions NotBefore="2012-04-20T11:58:45.250Z"
                    NotOnOrAfter="2012-04-20T12:38:45.250Z">
                    <saml:AudienceRestrictionCondition>
                        <saml:Audience>http://localhost:8080/</saml:Audience>
                    </saml:AudienceRestrictionCondition>
                </saml:Conditions>
                <saml:AttributeStatement>
                    <saml:Subject>
                        <saml:SubjectConfirmation>
                            <saml:ConfirmationMethod>urn:oasis:names:tc:SAML:1.0:cm:bearer
                            </saml:ConfirmationMethod>
                        </saml:SubjectConfirmation>
                    </saml:Subject>
                    <saml:Attribute AttributeName="name"
                        AttributeNamespace="http://schemas.xmlsoap.org/ws/2005/05/identity/claims">
                        <saml:AttributeValue>user1</saml:AttributeValue>
                    </saml:Attribute>
                    <saml:Attribute AttributeName="Firstname"
                        AttributeNamespace="http://mmm.his.com/identity/claims">
                        <saml:AttributeValue>John</saml:AttributeValue>
                    </saml:Attribute>
                    <saml:Attribute AttributeName="Lastname"
                        AttributeNamespace="http://mmm.his.com/identity/claims">
                        <saml:AttributeValue>Doe</saml:AttributeValue>
                    </saml:Attribute>
                    <saml:Attribute AttributeName="emailaddress"
                        AttributeNamespace="http://schemas.xmlsoap.org/ws/2005/05/identity/claims">
                        <saml:AttributeValue>user@user.com</saml:AttributeValue>
                    </saml:Attribute>
                    <saml:Attribute AttributeName="role"
                        AttributeNamespace="http://schemas.microsoft.com/ws/2008/06/identity/claims">
                        <saml:AttributeValue>User</saml:AttributeValue>
                    </saml:Attribute>
                    <saml:Attribute AttributeName="ApplicationName"
                        AttributeNamespace="http://mmm.his.com/identity/claims">
                        <saml:AttributeValue>App1</saml:AttributeValue>
                    </saml:Attribute>
                </saml:AttributeStatement>
                <ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
                    <ds:SignedInfo>
                        <ds:CanonicalizationMethod
                            Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
                        <ds:SignatureMethod
                            Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" />
                        <ds:Reference URI="#_eadcac75-e528-4b58-9b53-f6f03a8ec691">
                            <ds:Transforms>
                                <ds:Transform
                                    Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature" />
                                <ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
                            </ds:Transforms>
                            <ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256" />
                            <ds:DigestValue>mLiTJH3R86N3G6N8f0qFmvbmzQMXELpn/JTn3xNGtf4=
                            </ds:DigestValue>
                        </ds:Reference>
                    </ds:SignedInfo>
                    <ds:SignatureValue>lpvRnkevRgtd+cuV+judi2rfM11CuvQ1hZQJlCYUz8wsJScub9vgB3PisDfFFSnV70dR+R6SVhXyrWraIbpXVNaCvghrDITEJirUS7rMxvM9haxFC1ujIXLamFhnNcKY7UP55dFhAO6hZxTtreUIFffg8GwfHdRsazmhPc5SMGPOH++zk+GsQywo+T+fKNby3r2jOz099pHWtcrkJCT5cFKwdnkU9Sre/AtlMWkCSALsjSOSiTHNyC/6gBW423Zowrltjs986m33jNWRxB/1FoCpKcXwbNp2GV8rPR6FzLRBn/j9IjsD7pO6XdPI8gfErDydNx0jiuJwunHB3spspw==
                    </ds:SignatureValue>
                    <KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
                        <X509Data>
                            <X509Certificate>MIIC5DCCAcygAwIBAgIQLhotot90t7ZCWstBDJgCfTANBgkqhkiG9w0BAQUFADAWMRQwEgYDVQQDEwtTVFNUZXN0Q2VydDAeFw0xMTEyMDYwMTM4MTZaFw0xMjEyMDUwNzM4MTZaMBYxFDASBgNVBAMTC1NUU1Rlc3RDZXJ0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAyQJJ6VeBw5yT4pNLTgW4wmKPit1omxdbSMVv7OxgRrECIKRxuGdNxkJHUhrjoyolLRnoXw5LpeLfD7eAWQPasvyumfCJZ07h5paLcS5gSqDy7R6YoTn4jUZwmqNh/X2lbHgIwkAWs7IWGHRkiPGDduDLK94nE6DErDO8pb8uIfL81wPCAnCCrI61C4lne5ES3f1tqpgfwSn23QHOJm9JGfXf8sAQvOd/sk+lpS16q4tHdjCpPZQtGv6pDMaz3OUWnkO82r5xgKYzxE+x6902mF7e8P2QenN99Ofo9sHP07aDTnXJG4nWDVFKzXaf299UCigz1LxtNitAeENZcvz0HQIDAQABoy4wLDALBgNVHQ8EBAMCBPAwHQYDVR0OBBYEFPT4jquZkXO8hlnKu4TSVANGO7YlMA0GCSqGSIb3DQEBBQUAA4IBAQCTnk3MwK6DWrJbSFxrr3ImCDXnpVR+sdypKdrVCme3Iwr0cnjJWkf16iMOIdoAmhC+A7JT6htAAXYk0gu06s1SMC/DPv/7a1zklO+FHS3gobx0pvFjBSDCC6ohqXCRxL5dos2r2SG2TCf4Uru9ihn0bdEy7BjdwQ7XM5cryrdVhhvf6o8Eh6z3EnqQyO4KPcCRREAXlQfrU0u/aPyYsBfoyjmsGTSMOxEDytwq20j35m0ckWg1mZi9r0BeL3klx4DS4Ibr5pyxyd9YmU/9AUlu+/pQqiVHKlv1qvUWsQ5S+2RWc+cvRwfRlGdBQeQqsvz9oyV3MXCmYFV4YKwVMyqb
                            </X509Certificate>
                        </X509Data>
                    </KeyInfo>
                </ds:Signature>
            </saml:Assertion>
        </trust:RequestedSecurityToken>
        <trust:RequestedAttachedReference>
            <o:SecurityTokenReference
                k:TokenType="http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1"
                xmlns:k="http://docs.oasis-open.org/wss/oasis-wss-wssecurity-secext-1.1.xsd"
                xmlns:o="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
                <o:KeyIdentifier
                    ValueType="http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.0#SAMLAssertionID">_eadcac75-e528-4b58-9b53-f6f03a8ec691</o:KeyIdentifier>
            </o:SecurityTokenReference>
        </trust:RequestedAttachedReference>
        <trust:RequestedUnattachedReference>
            <o:SecurityTokenReference
                k:TokenType="http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1"
                xmlns:k="http://docs.oasis-open.org/wss/oasis-wss-wssecurity-secext-1.1.xsd"
                xmlns:o="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
                <o:KeyIdentifier
                    ValueType="http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.0#SAMLAssertionID">_eadcac75-e528-4b58-9b53-f6f03a8ec691</o:KeyIdentifier>
            </o:SecurityTokenReference>
        </trust:RequestedUnattachedReference>
        <trust:TokenType>urn:oasis:names:tc:SAML:1.0:assertion
        </trust:TokenType>
        <trust:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue
        </trust:RequestType>
        <trust:KeyType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Bearer
        </trust:KeyType>
    </trust:RequestSecurityTokenResponse>
</trust:RequestSecurityTokenResponseCollection> 
```

# java - 根据请求创建 Hibernate-Session

> ID：10294655
> 
> 赞同：10
> 
> 时间：2012-04-24T08:51:28.637
> 
> 标签：java, hibernate, jetty, design-patterns, resteasy

我刚刚开始了一个简单的 Java 测试项目，它使用 Hibernate 管理一些实体，并提供一个 REST 接口来操作这些对象并提供一些额外的业务逻辑。REST 接口是使用 RESTEasy 和 Jetty 创建的。

到目前为止一切正常，但我觉得我实际上编写了太多样板代码。由于我在这些 Java 框架方面没有太多经验，我只是想知道是否有人可以给我一个关于如何改善这种情况的提示。

1.  为每个请求创建 Hibernate 会话

好吧，据我所知，我必须为每个请求创建一个 Hibernate 会话，最后我必须关闭它。所以目前我所有的服务方法都是这样的：

```
Session session = HibernateUtil.getInstance().getSessionFactory().openSession();
...
...
...
session.close(); 
```

有没有办法删除这两行以便以某种方式自动执行此操作？目前我的服务已注册为 RestEASY 单例。更改为 RESTeasy 资源并在构造函数中创建会话会解决问题吗？我认为它将解决创建会话的问题。但是在哪里关闭呢？

在 C++ 中，这可以很容易地创建一个范围对象，该对象在最后关闭会话。但是在Java中？

1.  每当发出这样的 REST 请求时，我都必须检查有效会话（用户必须事先登录）。ServletFilter 是正确的方法吗？

一般：我应该考虑使用任何其他模式或框架吗？我的意思是我想让它尽可能简单，特别是因为我没有那么多经验，我不想最终使用 Spring 或任何重量级框架。似乎我已经习惯了 Python 和 Django 的简单性，但是对于这个小项目，我必须使用 Java。

到目前为止，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T13:15:50.173

Hibernate 当前推荐的管理会话的方法在这个[wiki 页面](https://community.jboss.org/wiki/SessionsAndTransactions)上有详细说明。特别是，我认为你需要阅读最后一段：[这一切都非常困难，这不能做得更容易吗？](https://community.jboss.org/wiki/SessionsAndTransactions#This_is_all_very_difficult_cant_this_be_done_easier)

最后，您确实需要告诉持久层“我即将做某事”（通常也会让 Session 来做）和“我已经做完了”。您可以使用[注解](https://community.jboss.org/wiki/SessionsAndTransactions#Transaction_demarcation_with_EJBCMT)或[JTA 事务](https://community.jboss.org/wiki/SessionsAndTransactions#Transaction_demarcation_with_JTA)来完成，但这些信息仍然必须传达！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T09:56:58.580

将 SessionFactory 注入您的数据访问对象并使用 sessionFactory.getCurrentSession() 访问 Hibernate Session 对象。您可以使用任何可用的工厂类来实现这一点..

然后你的代码应该是这样的..

```
sessionFactory.getCurrentSession().save(newInstance); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T08:56:27.037

您应该尝试编写一个过滤器来执行此操作。如果您需要示例，Spring 的 OpenSessionInViewFilter 是一个很好的起点。

# python - 如何使用 SOCIAL_AUTH_PROCESS_EXCEPTIONS 设置

> ID：10294657
> 
> 赞同：1
> 
> 时间：2012-04-24T08:51:40.047
> 
> 标签：python, django, django-socialauth

我正在开发一个通过 django-socialauth 支持 Facebook 关联的网站。该库运行良好，除非有时我需要处理“帐户已在使用”ValueError。

从 django-socialauth 的[文档](http://github.com/omab/django-social-auth)（搜索“异常”）中可以看出，存在 SOCIAL_AUTH_PROCESS_EXCEPTIONS 设置以指定异常处理程序。所以我创建了一个虚拟函数：

```
SOCIAL_AUTH_PROCESS_EXCEPTIONS = 'myapp.utility.process_exceptions' 
```

但是当我启动 ValueError 时，处理程序永远不会被调用。以前有没有人使用过这个键 SOCIAL_AUTH_PROCESS_EXCEPTIONS 的经验？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:21:24.363

我认为您最好的选择是修改身份验证管道并创建您自己的此功能版本，位于 social_auth/backend/pipelines/associate.py 中：

def associate_by_email(details, *args, **kwargs): """返回与 details 中返回的电子邮件地址相同的用户条目。""" email = details.get('email')

```
warn_setting('SOCIAL_AUTH_ASSOCIATE_BY_MAIL', 'associate_by_email')

if email and setting('SOCIAL_AUTH_ASSOCIATE_BY_MAIL', True):
    # try to associate accounts registered with the same email address,
    # only if it's a single object. AuthException is raised if multiple
    # objects are returned
    try:
        return {'user': User.objects.get(email=email)}
    except MultipleObjectsReturned:
        raise AuthException(kwargs['backend'], 'Not unique email address.')
    except User.DoesNotExist:
        pass 
```

如果您替换此行：
raise AuthException(kwargs['backend'], 'Not unique email address.')
for a pass statement，那么如果数据库中有重复的电子邮件（意味着它不能关联到任何特定帐户） ，它不会尝试通过电子邮件关联，而是传递到管道中的下一个项目。最终，这应该会导致创建一个新帐户。

# java - 如何以编程方式将文件上传到 Windows Server 2003 远程桌面

> ID：10294658
> 
> 赞同：0
> 
> 时间：2012-04-24T08:51:46.570
> 
> 标签：java, windows, rdp

在给定安全凭证（用户名、密码）和 Windows 远程桌面设置 (rdp) 的情况下，如何以编程方式通过 Internet 从本地 Java 应用程序将文件上传到 Windows Server 2003 远程桌面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:58:20.530

有很多方法可以连接到远程 Windows Server 以共享文件：

```
File remote = new File("file:///server/share/path/to/file.txt"); 
```

或者使用[JCifs](http://jcifs.samba.org/) ro 连接到 Windows 共享。

# objective-c - 在方法中使用类似代码时的最佳实践

> ID：10294659
> 
> 赞同：1
> 
> 时间：2012-04-24T08:51:47.530
> 
> 标签：objective-c, coding-style

我有一个与 API 通信的实用程序方法，它使用 POST HTTP 请求进行通信，在我的实用程序类中，我有一个名为：

```
(void)makeConnectionWithParameters:(NSMutableDictionary*)parameters; 
```

它接受参数并设置 POST 的主体。但是，在一种特殊情况下，我想上传一些图像并且代码稍作更改以使上传所述图像成为可能，这种情况下的最佳做法是什么？我应该将方法重命名为：

```
(void)makeConnectionWithParameters:(NSMutableDictionary*)parameters andImages(NSArray*)images; 
```

并在所有其他情况下将 nil 设置为参数，或者我应该在调用“makeConnectionWithParameters”的方法中设置一个 bool 并检查该方法是否设置了 bool 并在这种情况下处理图像？

还有什么其他的想法可以让代码更漂亮吗？

这是方法：

```
(void)makeConnectionWithParameters:(NSMutableDictionary*)parameters
{
    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
    NSURL *url = [NSURL URLWithString:BASE_URL];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url cachePolicy:NSURLCacheStorageAllowed timeoutInterval:20];
    request.HTTPMethod = @"POST";

    NSString *boundary = @"myR4ND0Mboundary";
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary];
    [request setValue:contentType forHTTPHeaderField: @"Content-Type"];

    //Lägg till inloggningsuppgifter för API-anropet
    [parameters setValue:API_LOGIN forKey:@"api-login"];
    [parameters setValue:API_PASSWORD forKey:@"api-password"];

    //Lägg till alla parameterar i POST-bodyn
    NSMutableData *body = [NSMutableData data];

    for (NSString *param in parameters) 
    {
        [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"\r\n\r\n", param] dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[[NSString stringWithFormat:@"%@\r\n", [parameters objectForKey:param]] dataUsingEncoding:NSUTF8StringEncoding]];
    }

    if(hasImages)
    {
        int c = 0;
        for(UIImage* image in self.images)
        {
            c++;
            NSData *imageData = UIImageJPEGRepresentation(image, 1.0);
            if (imageData) 
            {
                [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
                [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"; filename=\"image.jpg\"\r\n", [NSString stringWithFormat:@"image%d", c]] dataUsingEncoding:NSUTF8StringEncoding]];
                [body appendData:[[NSString stringWithString:@"Content-Type: image/jpeg\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
                [body appendData:imageData];
                [body appendData:[[NSString stringWithFormat:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
            }
            imageData = nil;
        }
    }

    //Sätt content-length
    NSString *postLength = [NSString stringWithFormat:@"%d", [body length]];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setHTTPBody:body];
    NSURLConnection *connection = [[NSURLConnection alloc]initWithRequest:request delegate:self];

    if(connection)
    {
        receivedData = [NSMutableData dataWithLength:0];
    }
} 
```

我希望这一切都有意义。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T16:35:44.307

只需创建两个方法来生成请求对象，而不是实际的连接：

```
(NSMutableURLRequest*)makeConnectionWithParameters:(NSMutableDictionary*)parameters;
(NSMutableURLRequest*)makeConnectionWithParameters:(NSMutableDictionary*)parameters andImages(NSArray*)images; 
```

在第一个方法调用内部：

```
[self makeConnectionWithParameters:parameters andImages:nil]; 
```

...并对第二种方法中的图像进行 nil 检查。使用这两种方法获取您的请求，然后使用返回的对象创建 NSURLConnection。

# iphone - 如何在放大iphone时获取图像的坐标

> ID：10294662
> 
> 赞同：0
> 
> 时间：2012-04-24T08:51:49.817
> 
> 标签：iphone, objective-c

我正在做一个图像显示项目。

目的是显示从服务器获取的图像。

我们必须在用户缩放图像时获取不同的图像。

所以我需要在缩放时获取图像的坐标，然后必须将坐标传递给服务器，并且必须从服务器获取相应的图像。

那么如何在缩放并传递该坐标时获得不同的图像坐标。

谁能帮我解决这个问题。

提前致谢。

希望得到您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:59:39.860

您是否尝试过使用`bounds`您的图像？

当您放大视图时，框架保持不变，但图像的边界会发生变化。尝试在缩放时记录边界，您会明白我的意思。

框架和视图边界之间存在差异。

# ruby-on-rails - 如何访问模型中的 id

> ID：10294667
> 
> 赞同：0
> 
> 时间：2012-04-24T08:52:07.803
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个用户类，其中有很多简历，每个都有很多项目。在我的用户/显示页面上，我呈现了多份简历，这是有效的。在我的 users_controller 中，我有以下内容：

```
def show
 ...
 @resumes = @user.resumes.paginate(page: params[:page])
 @resume = @user.resumes.build if user_signed_in?
 @resume_items = @user.res.paginate(page: params[:page])
 @edu_items = @resume.edu.paginate(page: params[:page])
 ...
end 
```

我在我的用户模型中定义了函数 res：

```
def res
  Resume.where("student_id = ?", id)
end 
```

这工作得很好。但是，我正在尝试对我的 Resume 模型中的函数 edu 做同样的事情：

```
def edu
  Education.where("resume_id = ?", id)
end 
```

但它不起作用，@edu_items 没有被设置为任何东西。现在我知道它与这个方法特别有关，因为如果我将 id 更改为特定简历的 id，则该简历的项目将正确呈现，除了每个简历。我知道这是一个简单的解决方法，此时我已经盯着它看了太久，无法弄清楚。任何建议都会很棒。

编辑：@makaroni4：我不想让@educations = @user.educations，而是将每个简历中的项目分开。是否可以定义一种方法，例如使@educations = @resume.educations 的教育方法？

编辑2：我设法让我想做的工作，谢谢你的建议。我通过完全取消 edu 方法并将局部变量传递给局部变量来解决它：

```
 <%= render :partial => 'shared/edu', :as => :educations, :locals => {:resume_educations => resume_item.educations} %> 
```

共享/教育

```
<% if resume_educations.any? %>
   <ol class="educations">
     <%= render partial: 'shared/edu_item', collection: resume_educations %>
   </ol>
   <%= will_paginate @educations %>
<% end %> 
```

可能不是最干净的解决方案，但它似乎有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:38:58.727

我认为您的模型结构应如下所示：

```
class User < ActiveRecord::Base
  has_many :resumes

  def educations
    Education.joins(:resume => :user).where(:users => { :id => id })
  end
end

class Resume < ActiveRecord::Base
  belongs_to :user
  has_many :educations
end

class Education < ActiveRecord::Base
  belongs_to :resume
end 
```

因此，在您的控制器中，您可以像这样访问它们：

```
@resumes = @user.resumes
@educations = @user.educations # all users educations, from all resumes

or

@educations = @resume.educations # educations for particular resume 
```

我还建议你阅读这篇关于变量命名的文章[http://petdance.com/2012/04/the-worlds-two-worst-variable-names/ ，变量如](http://petdance.com/2012/04/the-worlds-two-worst-variable-names/)**resume_items**和方法**res**和**edu**应该说你'重新做 smtg 的方式不对。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T09:31:06.130

它不起作用，因为您的`edu`方法的结果将始终为空。

在您的代码中，您正在构建一个简历对象：

```
@resume = @user.resumes.build if user_signed_in? 
```

如果您使用`build`的对象已创建，但尚未保存到数据库中。这意味着你`@resume.id`是`nil`. 因此，您的`edu`方法的结果将为空。

您可以使用以下内容在数据库中创建记录：

```
@resume = @user.resumes.create if user_signed_in? 
```

但是您的`edu`方法仍将返回一个空集合，因为它是一条新记录，并且尚未与任何项目关联。

请详细说明您正在尝试做什么，因为由于上述原因，此代码`@resume.edu`将始终为空。

另外：考虑使用内置的 Rails 功能而不是创建自己的方法。

# sql - Oracle - 选择不同用户投票最多的项目

> ID：10294668
> 
> 赞同：1
> 
> 时间：2012-04-24T08:52:17.737
> 
> 标签：sql, oracle

我有如下的 oracle 表：

```
User - UserId,
Item - ItemId,
UserVote - UserVoteId, UserId, ItemId. 
```

现在用户可以多次投票。我很难处理这个查询：Get item(s) most voted **uniquely** - 这意味着来自同一个人的多张选票仅计为一张。

如果是 SQL Server，我可能已经创建了临时表和所有，但我不知道如何在 Oracle 中处理。我也很难考虑如何处理平局，这意味着如果两个项目都有 18 个“唯一”选票。在那种情况下，我想要这两个项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T08:59:55.380

```
SELECT  *
FROM    (
        SELECT  q.*,
                DENSE_RANK() OVER (ORDER BY votes DESC) AS dr
        FROM    (
                SELECT  itemId, COUNT(DISTINCT userId) AS votes
                FROM    userVote
                GROUP BY
                        itemId
                ) q
        )
WHERE   dr = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T08:58:06.947

也许是这样的：

```
WITH CTE
AS
(
    SELECT
        COUNT(DISTINCT UserId) AS votes,
        item.ItemId
    FROM
        UserVote
    GROUP BY
        item.ItemId
)
SELECT
    *
FROM
    item
    LEFT JOIN CTE
        CTE.ItemId=item.ItemId
ORDER BY
    votes DESC; 
```

这将使`COUNT`投票不同的用户。因此，您将拥有每个项目 ID 的唯一用户。我不知道你想要什么输出，所以我订购了得票最多的项目。如果您只想要前 10 名或其他内容，您可以很容易地将其添加到选择中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T09:09:18.263

```
select ItemID,
       VoteCount
from
  (
    select ItemID,
           count(distinct UserId) as VoteCount,
           rank() over(order by count(distinct UserId) desc) as rn
    from UserVote
    group by ItemID
  ) U
where rn = 1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T11:36:45.083

怎么样

```
SELECT "ItemId", COUNT(*) AS "VoteCount"
  FROM (SELECT DISTINCT "ItemId", "UserID"
          FROM "UserVote") a
  GROUP BY "ItemId"
  ORDER BY COUNT(*) DESC 
```

分享和享受。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T13:40:01.347

以下 ANSI 查询返回投票最多的项目，不考虑同一用户的多次投票（您必须将返回的行限制到您的应用程序中）：

```
SELECT ItemId, COUNT(DISTINCT UserId) AS "votes"
FROM UserVote
GROUP BY ItemId
ORDER BY "votes" DESC; 
```

如果确实需要限制查询的行数，可以使用 Oracle SQL 方言来实现：

```
SELECT ItemId, votes
FROM (
  SELECT ItemId, COUNT(DISTINCT UserId) AS "votes"
  FROM UserVote
  GROUP BY ItemId
  ORDER BY "votes" DESC
)
WHERE ROWNUM <= :n; -- :n is a placeholder for the number of rows to return 
```

# javascript - 使用 extJs 中 tab1 中选择的内容动态更改 tab2 的内容

> ID：10294672
> 
> 赞同：0
> 
> 时间：2012-04-24T08:52:40.920
> 
> 标签：javascript, extjs

我正在使用 extJs 框架。我创建了一个窗口，我的项目 json 对象有两个选项卡 tab1 和 tab2。现在tab1有一些图像，如果我在tab1中选择一些图像，tab2中的内容应该会自动改变。

例如：- 标签有 image1 和 image2 如果我点击 tab1 中的 image1，那么 tab2 应该显示你选择了第 1 号图片 如果我点击 tab1 中的 image2，那么 tab2 应该显示你选择了第 2 号图片

如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:35:59.197

看看这个： [http](http://dev.sencha.com/deploy/ext-4.0.7-gpl/examples/view/chooser/chooser.html) ://dev.sencha.com/deploy/ext-4.0.7-gpl/examples/view/chooser/chooser.html 也许这可以帮助你做你想做的事情

# c# - 如何找到可重复的字符

> ID：10294673
> 
> 赞同：2
> 
> 时间：2012-04-24T08:52:47.923
> 
> 标签：c#, regex

我不明白如何解决以下问题：

我有输入字符串“aaaabaa”，我正在尝试搜索字符串“aa”（我正在寻找字符的位置）预期结果是 0 1 2 5

*   **啊啊**啊
*   **啊啊**啊啊_
*   啊啊啊**_**
*   啊啊**啊啊**

我已经使用另一种方法（非RegEx）解决了这个问题。但我需要一个 RegEx 我是 RegEx 的新手，所以谷歌搜索真的帮不了我。任何帮助表示赞赏！谢谢！

PS我试过用`(aa)*`，`"\b(\w+(aa))*\w+"`但那些表达是错误的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:56:57.000

您可以通过使用前瞻来解决这个问题

```
a(?=a) 
```

将找到后跟另一个“a”的每个“a”。

如果您想更一般地执行此操作

```
(\p{L})(?=\1) 
```

这将找到后跟相同字符的每个字符。每个找到的字母都存储在一个捕获组中（因为括号周围），然后这个[捕获组](http://www.regular-expressions.info/brackets.html)通过使用（其中存储了匹配字符）被[正向超前断言](http://www.regular-expressions.info/lookaround.html)（the ）重用`(?=...)``\1``\1`

`\p{L}`是“字母”类别的 unicode 代码点

**代码**

```
String text = "aaaabaa";
Regex reg = new Regex(@"(\p{L})(?=\1)");

MatchCollection result = reg.Matches(text);

foreach (Match item in result) {
    Console.WriteLine(item.Index);
} 
```

输出

> 0
> 1
> 2
> 5

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T13:55:09.203

以下代码应适用于任何正则表达式，而无需更改实际表达式：

```
 Regex rx = new Regex("(a)\1"); // or any other word you're looking for.

        int position = 0;
        string text = "aaaaabbbbccccaaa";
        int textLength = text.Length;

        Match m = rx.Match(text, position);

        while (m != null && m.Success)
        {
            Console.WriteLine(m.Index);

            if (m.Index <= textLength)
            {
                m = rx.Match(text, m.Index + 1);
            }
            else
            {
                m = null;
            }
        }

        Console.ReadKey(); 
```

它使用该选项来更改每个连续搜索的正则表达式搜索的开始索引。实际问题来自于 Regex 引擎在默认情况下总是会在前一个匹配之后继续搜索。因此，它永远不会在另一个匹配项中找到可能的匹配项，除非您通过使用 Look ahead 构造或手动设置开始索引来指示它。

另一个相对简单的解决方案是将整个表达式保持向前看：

```
 string expression = "(a)\1"
        Regex rx2 = new Regex("(?=" + expression + ")");
        MatchCollection ms = rx2.Matches(text);
        var indexes = ms.Cast<Match>().Select(match => match.Index); 
```

这样一来，引擎将自动为找到的每个匹配项将索引推进一个。

[从文档](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.match.nextmatch.aspx)：

> 当通过调用 NextMatch 方法重复匹配尝试时，正则表达式引擎会给予空匹配特殊处理。通常，NextMatch 会在前一个匹配停止的位置开始搜索下一个匹配。但是，在空匹配之后，NextMatch 方法会在尝试下一个匹配之前前进一个字符。这种行为保证了正则表达式引擎将通过字符串进行。否则，由于空匹配不会导致任何向前移动，因此下一个匹配将在与上一个匹配完全相同的位置开始，并且会重复匹配相同的空字符串。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-24T08:56:46.647

试试这个：

[如何在 Java 中使用正则表达式查找重复字符？](https://stackoverflow.com/questions/664194/how-can-i-find-repeated-characters-with-a-regex-in-java)

它在 java 中，但是有正则表达式和非正则表达式的方式。C# Regex 与 Java 方式非常相似。

# xquery - 在 XQuery 中更新计数器

> ID：10294677
> 
> 赞同：13
> 
> 时间：2012-04-24T08:53:03.747
> 
> 标签：xquery, marklogic

我想在 xquery 中创建一个计数器。我最初的尝试如下所示：

```
let $count := 0
for $prod in $collection
let $count := $count + 1
return 
<counter>{$count }</counter> 
```

预期结果：

```
<counter>1</counter>
<counter>2</counter>  
<counter>3</counter> 
```

实际结果：

```
<counter>1</counter>
<counter>1</counter>  
<counter>1</counter> 
```

`$count`变量更新失败或被重置。为什么我不能重新分配现有变量？获得预期结果的更好方法是什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-24T09:29:27.567

尝试使用**'at'**：

```
for $d at $p in $collection
return 
element counter { $p } 
```

这将为您提供每个“$d”的位置。如果您想将它与子句一起使用`order by`，这将不起作用，因为位置基于初始顺序，而不是排序结果。为了克服这个问题，只需将 FLWOR 表达式的排序结果保存在一个变量中，并`at`在第二个 FLWOR 中使用该子句，该子句只是迭代第一个排序结果。

```
let $sortResult := for $item in $collection
                   order by $item/id
                   return $item

for $sortItem at $position in $sortResult
return <item position="{$position}"> ... </item> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-24T10:01:27.283

正如@Ranon 所说，所有*XQuery*值都是不可变的，因此您无法更新变量。但是如果你真的需要一个可更新的数字（不应该太频繁），你可以使用递归：

```
declare function local:loop($seq, $count) {
  if(empty($seq)) then ()
  else
    let $prod  := $seq[1],
        $count := $count + 1
    return (
      <count>{ $count }</count>,
      local:loop($seq[position() > 1], $count)
    )
};

local:loop($collection, 0) 
```

这完全符合您对示例的预期。

在*XQuery 3.0*中，甚至在标准库中定义了这个函数的更通用版本：[fn:fold-right($f, $zero, $seq)](http://www.w3.org/TR/xpath-functions-30/#func-fold-right)

也就是说，在您的示例中，您绝对应该`at $count`按照@tohuwawohu 所示使用。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-24T11:55:15.920

上面的所有解决方案都是有效的，但我想提一下，您可以使用 XQuery Scripting 扩展来设置变量值：

```
variable $count := 0;

for $prod in (1 to 10)
return {
  $count := $count + 1;
  <counter>{$count}</counter>
} 
```

[您可以在http://www.zorba-xquery.com/html/demo#twh+3sJfRpHhZR8pHhOdsmqOTvQ=](http://www.zorba-xquery.com/html/demo#twh+3sJfRpHhZR8pHhOdsmqOTvQ=)现场试用此示例

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-24T18:50:56.330

您也可以使用特定于 MarkLogic 的`xdmp:set`. 但这打破了函数式语言的假设，因此请保守地使用它。

[http://docs.marklogic.com/5.0doc/docapp.xqy#display.xqy?fname=http://pubs/5.0doc/apidoc/ExsltBuiltins.xml&category=Extension&function=xdmp:set](http://docs.marklogic.com/5.0doc/docapp.xqy#display.xqy?fname=http://pubs/5.0doc/apidoc/ExsltBuiltins.xml&category=Extension&function=xdmp:set)

`xdmp:set`对于实际代码中的示例，搜索解析器[https://github.com/mblakele/xqysp/blob/master/src/xqysp.xqy](https://github.com/mblakele/xqysp/blob/master/src/xqysp.xqy)可能会有所帮助。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-04-24T09:16:49.083

# 不可变变量

XQuery 是一种[函数式编程语言](http://en.wikipedia.org/wiki/Functional_programming)，其中涉及不可变变量，因此您**无法更改变量的值**。另一方面，您可以使用强大的功能集合，解决许多日常编程问题。

```
let $count := 0
for $prod in $collection]
  let $count := $count + 1
return 
<counter>{$count }</counter> 
```

`let $count`在第 1 行中，在所有范围内定义了这个变量，在这种情况下，这些都是以下行。`let $count`在第 3 行中定义了一个新`$count`的，它*在此代码块内*`0+1`的所有后续行中都有效- 未定义。因此，您确实将三倍加一，但立即丢弃结果。*`$count`*

 *[BaseX](http://www.basex.org) ' 查询信息显示了此查询的优化版本，即

```
for $prod in $collection
  return element { "counter" } { 1 } 
```

# 解决方案

要获取 中的元素总数`$collection`，您可以使用

```
return count($collection) 
```

对于 XQuery 函数列表，您可以查看[functx 的 XQuery 部分，它既](http://www.xqueryfunctions.com/)包含 XQuery 函数列表，也包含其他一些可以作为模块包含的有用函数。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-03-04T12:23:18.523

使用`xdmp:set`而不是下面的查询

```
let $count := 0
for $prod in (1 to 4)
return ( xdmp:set($count,number($count+1)) ,<counter>{$count }</counter> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-04-18T04:43:05.470

我认为您正在寻找类似的东西：

**查询：**

```
for $x in (1 to 10)
return
  <counter>{$x}</counter> 
```

**输出：**

```
<counter>1</counter>
<counter>2</counter>
<counter>3</counter>
<counter>4</counter>
<counter>5</counter>
<counter>6</counter>
<counter>7</counter>
<counter>8</counter>
<counter>9</counter>
<counter>10</counter> 
```*

# windows - Windows Mobile BackgroundWorker

> ID：10294679
> 
> 赞同：-2
> 
> 时间：2012-04-24T08:53:12.493
> 
> 标签：windows, windows-mobile

如何在 Windows Mobile 本机代码（C++）中使用后台工作人员执行异步任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T13:23:17.783

你的问题真的很模糊，但一般来说，后台任务是用线程完成的。这些是通过调用[CreateThread API](http://msdn.microsoft.com/en-us/library/bb202727.aspx)在 C 中创建的。网络上的使用示例比比皆是。 [这是](http://www.programmersheaven.com/mb/CandCPP/270487/270487/createthread-windows-threading/)我今天恰好在搜索引擎结果顶部的一个。

# tomcat - 客户端发送的请求在 Windows 中的语法不正确

> ID：10294683
> 
> 赞同：0
> 
> 时间：2012-04-24T08:53:27.973
> 
> 标签：tomcat, spring-mvc

我的应用程序出现问题，因为我使用的是 Apache Tomcat Server 7.0.26、Spring MVC 3.0、MySql，所以我的问题是

我已经实现了搜索页面，因此它将请求参数发送到控制器，它在 Ubuntu 上运行良好，但是当我在 Windows 7 上尝试时，它给了我错误：客户端发送的请求在 Windows 中的语法不正确。

这是我的控制器的代码：

* * *

```
@RequestMapping(value="/viewSelectedAdvance") 
public ModelAndView showSelectedAdvance(@RequestParam(value="date",required=false) Date date,@RequestParam(value="date1",required=false) Date date1) { 
    ModelAndView mav=new ModelAndView("showSelectedAdvance"); 
    List<Expense> expense=reportDAO.getExpenseReport(date,date1);
    mav.addObject("EXPENSE_SELECTED_REPORT", expense); 
    System.out.println(date); 
    System.out.println(date1); 
    return mav; 
} 
```

* * *

还有我的模板：

* * *

```
<form action="viewSelectedAdvance.html" method="post">
    <table style="border-collapse: collapse;" border="0" y cellspacing="0" cellpadding="0"> 
        <tr>
            <td>Enter Start Date</td> 
            <td>
                <input type="text" name="date" id="dt" readonly="true"/>
                <a href="javascript:NewCal('dt','yyyymmdd')"></a>
            <td>Enter End Date</td>
            <input type="text" name="date1" id="dt1" readonly="true" />
            <a href="javascript:NewCal('dt1','yyyymmdd')"></a> 
            <input type="submit" value="Generate Report" onClick="javascript:getDate();" /> 
    </table>
</form> 
```

我怎么解决这个问题

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:06:40.207

看这里：

[Java spring @RequestParam JSP](https://stackoverflow.com/questions/5831239/java-spring-requestparam-jsp)

由于您没有提供任何代码，我只是猜测这是您的问题。

* * *

更新：

用这个替换你的模板（清理版本）：

```
<form action="viewSelectedAdvance.html" method="post">
    <table style="border-collapse: collapse;" border="0" y cellspacing="0" cellpadding="0"> 
        <tr>
            <td>Enter Start Date</td> 
            <td>
                <input type="text" name="date" id="dt" readonly="true"/>
                <a href="javascript:NewCal('dt','yyyymmdd')"></a>
        </tr>
        <tr>
            <td>Enter End Date</td>
            <td>
                <input type="text" name="date1" id="dt1" readonly="true" />
                <a href="javascript:NewCal('dt1','yyyymmdd')"></a> 
                <input type="submit" value="Generate Report" onClick="javascript:getDate();" /> 
            </td>
        </tr>
    </table>
</form> 
```

什么是“隐形”链接？

# oracle - oracle请求（如何将数据excel导入oracle）

> ID：10294684
> 
> 赞同：0
> 
> 时间：2012-04-24T08:53:31.710
> 
> 标签：oracle, import-from-excel

将数据从 Excel (.xls) 导入 Oracle 数据库的最佳和/或最简单的方法是什么？

请用任何代码示例进行澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:47:32.843

将数据从 Excel 导入 Oracle Db 的最常用方法之一是将内容导出为 CSV，然后使用[SQL*Loader](http://www.orafaq.com/wiki/SQL%2aLoader_FAQ)将其导入表中。

然而，最简单的方法是使用评论中提到的 IDE，例如 TOAD 或 SQL Developer（这是我最喜欢的 Oracle DBM 工具）。

有关更多替代方法，请参阅[本文](http://oracleebusinesssuite.wordpress.com/2007/06/27/import-of-an-excel-or-any-other-file-external-data-into-oracle/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:13:59.187

您还可以使用 perl 读取 excel 电子表格并将电子表格中的值插入到数据库中。看看 CPAN 中的 DBD::Oracle 和 Spreadsheet::ParseExcel。

# java - 存储过程可以返回结果集吗？

> ID：10294687
> 
> 赞同：8
> 
> 时间：2012-04-24T08:53:34.230
> 
> 标签：java, mysql, swing

我有一个名为employee 的表，其中包含他的ID、姓名、电话号码。我使用 MySQL 作为我的数据库。为此，我正在使用 Java Swing。我现在正在使用 Java 搜索带有名称的员工表（我`like`在我的 Java 页面中使用了子句）。

现在我需要在存储过程中实现该功能。可能吗？如果可能的话，我们如何在 Java 代码中获取该结果集？

现在我已经编写了我的存储过程如下

```
BEGIN
     SELECT * FROM employee where empName like '%su%'
END 
```

示例代码将不胜感激..谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:47:27.507

首先是你应该编写发送参数的 msql 过程`LIKE`，

```
CREATE PROCEDURE simpleproc (param1 CHAR(20))
BEGIN
SELECT * FROM employee where empName like param1;
END 
```

然后从java程序你可以使用这个代码来使用程序，

```
CallableStatement cstmt = con.prepareCall("{call simpleproc(?)}");
cstmt.setString(1, "%su%");
ResultSet rs = cstmt.executeQuery(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T09:05:50.623

执行存储过程时，它实际上可能会返回多个 ResultSet 对象和/或如果它执行多个语句则更新计数。

您使用`CallableStatement`执行过程然后`getResultSet()`或`getUpdateCount()`获得正确的结果。对于多个结果集/语句，您调用`getMoreResults()`以移动存储过程的结果。

对于像这样的简单情况，您应该只需要调用`getResultSet()`一次并处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T09:03:27.267

是的你可以。一个存储过程甚至可以返回多个结果集。

```
DELIMITER $$ -- recognized by mysql client but not phpmyadmin

CREATE PROCEDURE prc_test()
BEGIN
        SELECT  *
        FROM    employee
        WHERE   empName LIKE '%su%';
END;
$$

DELIMITER ;

CALL prc_test(); -- to call 
```

# database - 有没有办法找到安装在 UNIX 服务器上的 Oracle DB 列表？

> ID：10294688
> 
> 赞同：1
> 
> 时间：2012-04-24T08:53:40.143
> 
> 标签：database, oracle, unix, sunos

我知道我的 UNIX 服务器上安装了 Oracle DB。有没有办法获得这些数据库名称？我正在使用 Sun 操作系统。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T13:08:51.420

你也可以试试`ps -ef | grep -i pmon`。每个正在运行的`pmon`进程将用于一个 DB，并基于`pmon`您的数据库的名称`ora_pmon_<db sid>`。可能有其他数据库当前未运行，但这将为您提供 Sun 盒子上的活动运行数据库。如果数据库管理员将`/var/opt/oracle/oratab`数据库正确列出在`oratab`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T08:57:22.667

```
cat /etc/oratab|grep -v "^#"|grep -v "N$"|cut -f1 -d: -s 
```

# html - 如何设置 QTextDocument 边距和其他属性（setHTML、打印到 pdf）？

> ID：10294692
> 
> 赞同：9
> 
> 时间：2012-04-24T08:53:46.203
> 
> 标签：html, qt4, python-3.x, pyqt4

我有以下`certificate`类用于从一些图像和数据中生成 pdf 文档。设置图像源后，我调用`generate()`函数并获取 test.pdf 输出文件。文档是基于`QTextDocument`类 using`setHtml(html)`方法创建的。

问题是我在文档周围有巨大的空白，而我希望带有徽标图像的标题“报告”位于页面的最顶部。我还想为表格添加下边框，但据我所知，Qt （[支持的 HTML 子集](http://qt-project.org/doc/qt-4.8/richtext-html-subset.html)）不支持它。

Python3代码：

```
class certificate:

def __init__(self):
    self.logo = None
    pdffile = 'test.pdf'
    self.histogram = None
    self.printer = QPrinter()
    self.printer.setPageSize(QPrinter.Letter)
    self.printer.setOutputFormat(QPrinter.PdfFormat)
    self.printer.setOutputFileName(pdffile)

def generate(self):
    document = QTextDocument()
    html = ""
    html += ('<head><title>Report</title><style></style></head>'
                 '<body><table width="100%"><tr>'
                    '<td><img src="{}" width="30"></td>'
                    '<td><h1>REPORT</h1></td>'
                 '</tr></table>'
                 '<p align=right><img src="{}" width="300"></p>'
                 '<p align=right>Sample</p></body>').format(self.logo, self.histogram)
    document.setHtml(html)
    document.print_(self.printer) 
```

我以前从未广泛使用过 html，也从未使用过 QTextDocument，如果有任何关于如何控制文档边距和表格属性的建议，我将不胜感激。

我想控制的其他相关属性是分辨率 - 我使用像素图像大小并且需要知道页面和边距大小（以像素为单位）。

**已编辑：** @mata 几乎回答了这个问题。我现在可以设置任何边距和分辨率，但不明白如何控制图像和字体大小。例如，如果我需要一个图像总是 50 毫米宽，并且 html 标题和正文字体大小在视觉上是相同的 - 如何实现它？

**EDITED2：**最后一部分也解决了。这是@mata修改的代码，它对任何`dpi`值都给出相同的结果：

```
dpi=96

document = QTextDocument()
html = """
<head>
    <title>Report</title>
    <style>
    </style>
</head>
<body>
    <table width="100%">
        <tr>
            <td><img src="{0}" width="{1}"></td>
            <td><h1>REPORT</h1></td>
        </tr>
    </table>
    <hr>
    <p align=right><img src="{2}" width="{3}"></p>
    <p align=right>Sample</p>
</body>
""".format('D:\Documents\IST Projects\diashape\docbook\Installation\images\istlogo_medium.png',
              40*dpi/96, 
              'D:\Documents\IST Projects\diashape\docbook\Installation\images\istlogo_medium.png', 
              200*dpi/96)

document.setHtml(html)

printer = QPrinter()
font = QFont()
font.setPointSize(12*dpi/96)
document.setDefaultFont(font)
printer.setResolution(dpi)
... 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-25T19:33:04.230

您可以在创建 QPrinter 时在构造函数中指定要使用的分辨率。然后在设置页面大小后，您可以使用`width`,`height`和`resolution`在打印机上找出该值，这就是我为*Letter*得到的值（dpi 值可以不同，它们取决于屏幕或打印机）：

```
QPrinter(QPrinter.ScreenResolution)   #   96dpi,  752x992
QPrinter(QPrinter.PrinterResolution)  #   72dpi,  564x744
QPrinter(QPrinter.HighResolution)     # 1200dpi, 9400x12400 
```

您也可以直接使用 .dpi 设置 dpi `setResolution`。width 和 height 返回的大小是页面大小（与 pageRect().size() 相同），它与纸张大小不同 - 因为页面也有边距，您可以这样设置：

```
printer.setPageMargins(12, 16, 12, 20, QPrinter.Millimeter) 
```

这将左右边距设置为 12 毫米，顶部设置为 16 毫米，底部设置为 20 毫米 - 例如，如果您想要更少的空白空间，您显然可以使用更小的值。您应该将文档大小设置为结果大小的大小：

```
document.setPageSize(QSizeF(printer.pageRect().size())) 
```

正如您自己注意到的那样，允许的 html 和 css 子集非常有限，特别是用于格式化表格。但是，您可以只使用 hr，而不是在表格上使用下边框，这可能看起来像您想要的那样。如果我像这样测试它，至少它看起来并不那么糟糕：

```
from PyQt4.QtGui import *
from PyQt4.QtCore import *

a=QApplication([])
document = QTextDocument()
html = """
<head>
    <title>Report</title>
    <style>
    </style>
</head>
<body>
    <table width="100%">
        <tr>
            <td><img src="{}" width="30"></td>
            <td><h1>REPORT</h1></td>
        </tr>
    </table>
    <hr>
    <p align=right><img src="{}" width="300"></p>
    <p align=right>Sample</p>
</body>
""".format('', '')

document.setHtml(html)

printer = QPrinter()
printer.setResolution(96)
printer.setPageSize(QPrinter.Letter)
printer.setOutputFormat(QPrinter.PdfFormat)
printer.setOutputFileName("test.pdf")
printer.setPageMargins(12, 16, 12, 20, QPrinter.Millimeter)
document.setPageSize(QSizeF(printer.pageRect().size()))
print(document.pageSize(), printer.resolution(), printer.pageRect())

document.print_(printer) 
```

# jquery - jQuery Validate Unobtrusive 不适用于 TextArea

> ID：10294699
> 
> 赞同：5
> 
> 时间：2012-04-24T08:54:25.880
> 
> 标签：jquery, asp.net-mvc-3, validation, jquery-validate, textarea

我在 ASP.NET MVC3 Razor 中使用“jQuery Validate Unobtrusive”。

我有一个带有“评论”表单的页面，如下所示：

**模型**

```
public class CommentModel
{

    [Required]
    public string Name { get; set; }

    [Required]
    [DataType(DataType.EmailAddress)]
    public string Email { get; set; }

    [DataType(DataType.Url)]
    [Display(Name = "Website URL")]
    public string WebsiteUrl { get; set; }

    [Required]
    public string Message { get; set; }

} 
```

**看法**

```
 @using (Html.BeginForm("AddComment", "Blog", new { @articleID = article.ID }))
    {
        <p>
            @Html.LabelFor(m => m.commentModel.Name)
            @Html.TextBoxFor(m => m.commentModel.Name)
            @Html.ValidationMessageFor(m => m.commentModel.Name)
        </p>
        <p>
            @Html.LabelFor(m => m.commentModel.Email)
            @Html.TextBoxFor(m => m.commentModel.Email)
            @Html.ValidationMessageFor(m => m.commentModel.Email)
        </p>
        <p>
            @Html.LabelFor(m => m.commentModel.WebsiteUrl)
            @Html.TextBoxFor(m => m.commentModel.WebsiteUrl)
            @Html.ValidationMessageFor(m => m.commentModel.WebsiteUrl)
        </p>
        <p>
            @Html.LabelFor(m => m.commentModel.Message)
            @Html.TextAreaFor(m => m.commentModel.Message)
            @Html.ValidationMessageFor(m => m.commentModel.Message)
        </p>
        <p>
            <input type="submit" value="Submit Comment" />
        </p>
    } 
```

但是，当表单被提交时，只有`Name`和`Email`返回一个验证错误，什么时候`Message`应该太：

![在此处输入图像描述](../Images/d27d25fd95fb11a65a40f5faad1c80c4.png)

如果我`Message`从更改`TextAreaFor`为`TextBoxFor`，则验证正常工作。

为什么会这样，我怎样才能让验证在我的文本框上工作？

* * *

可能还值得注意的是，我不必为此表单编写任何特定的 jQuery。我按照教程解释了这不是必需的，因为它全部由 MVC3 处理。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-04T20:18:34.460

`[DataType(DataType.MultilineText)]`用数据注解装饰相应的模型属性，并使用`Html.EditorFor`Helper 方法。

```
[Required]
[DataType(DataType.MultilineText)]
public string Message { get; set; } 
```

现在使用 `@Html.EditorFor`Helper 方法

```
@Html.EditorFor(m => m.RoleDescription) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T20:14:18.363

嵌套模型时，这是 TextAreaFor 的错误。可以这么说，将您的 CommentModel 的内容放在“根”模型中，一切都很好。或者，将 TextAreaFor 更改为 TextBoxFor 效果很好！

在一个不相关的话题上，我觉得我不是唯一一个像你一样尝试嵌套我的评论模型的人。这真的应该解决！

**编辑：** 这是该问题的错误票：

[http://aspnet.codeplex.com/workitem/8576](http://aspnet.codeplex.com/workitem/8576)

**Edit2：** Shyju 使用 EditorFor 的解决方法有效！有趣的是，它还在 的输出中添加了一些额外的类名，所以要小心它们不要与你的 CSS 冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-09T17:35:55.520

@Shyju 的答案似乎很完美，但我必须在 Site.css 文件中添加一些额外的东西才能使其工作：

应用@Shyju 解决方案并**为 textarea 添加 css**：

```
textarea.input-validation-error {
    border: 1px solid #e80c4d;
} 
```

现在它完美地工作了。

# javascript - jQuery 检查至少五个输入中有数据

> ID：10294701
> 
> 赞同：0
> 
> 时间：2012-04-24T08:54:34.583
> 
> 标签：javascript, jquery

我在页面上有许多输入，需要强制至少填写 5 个项目。如果没有，则显示一条消息，说您必须至少填写 5 个。到目前为止，我已经尝试了以下方法，但它只是一遍又一遍地显示错误。这样做的正确方法是什么？

```
$('div.inputs input').each(function(i) {
    $input = $(this);
    while (i < 5) {
        if ($($input).val() == '') {
            alert('must fill at least 5 items!');
        }
    }
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:57:30.267

~~您可以创建一个更好的选择器，然后：~~

 ~~```
if ($('div.inputs input[value!=""]').length < 5) {
  alert('must fill at least 5 items!');
} 
```~~ 

解释：

~~选择器`div.inputs input[value!=""]`选择所有具有`value`属性的输入字段，然后您可以获取所选项目的长度。~~

以前的解决方案（以某种方式）有效，但我推荐一个更好的解决方案：

```
if ($('div.inputs input').filter(function () { return $(this).val().length > 0; }).length < 5) {
  alert('must fill at least 5 items!');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T09:18:25.527

KARASZI István 的答案中显示的方法更简洁，但就解释代码有什么问题以及如何修复它而言，（主要）问题是`while`条件：

```
while(i<5) 
```

...正在评估一个变量，`i`，它不会被循环的内容改变。在`.each()`循环的第一次迭代中`i`为 0，因此`while`条件为真*并保持为真，*因此您将获得一个无限循环。

要保持代码的一般结构并遍历每个输入测试值，您可以执行以下操作：

```
var filled = 0;

$('div.inputs input').each(function (i) {
    if (this.value != '') {
        filled++;
        if (filled === 5)
           return false;
    }
});

if (filled < 5) {
    alert('must fill at least 5 items!');
} 
```

也就是说，对于每个非空白输入，递增一个计数器，然后在循环后检查计数器。请注意，`false`从`.each()`回调函数中返回会`.each()`立即停止循环；一旦我们达到最少 5 个非空值，就无需继续计数。

# solrnet - 如何使用 solrnet 查询带有 +（必需）匹配的 solr

> ID：10294702
> 
> 赞同：1
> 
> 时间：2012-04-24T08:54:35.500
> 
> 标签：solrnet

我正在使用 solrnet 库与 solr 进行交互。solrnet 中是否有一种方法可以格式化所需的查询。我已经看到`NotQuery`which 在查询中呈现`-`(not)，但我现在需要`+`在查询中使用 (required)。

这可能使用 solrnet 吗？

我试图实现一个`RequiredQuery`和`RequiredQuerySerializer`类似的`NotQuery`，但我无法将它注入到 solrnet 管道中。（我知道我可以修改 SolrNet 源代码，但我真的很想保持 solrnet 二进制文件不变。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T22:57:19.910

最简单的方法是`RequiredQuery`实现`ISelfSerializingQuery`（[示例](https://github.com/mausch/SolrNet/blob/2012f8fddec1fe5d7ad448961295c443402836f6/SolrNet/SolrQueryByDistance.cs)）。

一个单独的序列化器用于更复杂的情况，或者使事情更整洁。使用单独`ISolrQuerySerializer`的.`AggregateQuerySerializer``DefaultQuerySerializer`

# php - 在php中单击即可注销多个站点

> ID：10294704
> 
> 赞同：0
> 
> 时间：2012-04-24T08:54:59.267
> 
> 标签：php, redirect, header

在我的注销页面中，我必须完成 3 个任务

```
1\. destroy session
2\. logout from google account
3\. redirect to google home page 
```

我在注销页面中编写了以下代码：

```
<?php
    session_start();

    session_destroy();
    header('location: https://www.google.com/accounts/Logout');
    header('location: http://www.google.com');
?> 
```

第 1 步和第 3 步工作正常，但无法从谷歌帐户注销。

有什么建议吗？

# c# - 对于 C#，类似于 Ruby 的“除非”？

> ID：10294707
> 
> 赞同：16
> 
> 时间：2012-04-24T08:55:07.157
> 
> 标签：c#, ruby, if-statement

有没有办法在 C# 中做类似的事情？

IE。

```
i++ unless i > 5; 
```

这是另一个例子

```
weatherText = "Weather is good!" unless isWeatherBad 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-24T09:20:47.990

您可以使用扩展方法实现类似的目标。例如：

```
public static class RubyExt
{
    public static void Unless(this Action action, bool condition)
    {
        if (!condition)
            action.Invoke();
    }
} 
```

然后像这样使用它

```
int i = 4;
new Action(() => i++).Unless(i < 5);
Console.WriteLine(i); // will produce 4

new Action(() => i++).Unless(i < 1);
Console.WriteLine(i); // will produce 5

var isWeatherBad = false;
var weatherText = "Weather is nice";
new Action(() => weatherText = "Weather is good!").Unless(isWeatherBad);
Console.WriteLine(weatherText); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-24T08:57:52.117

**关于什么 ：**

```
if (i<=5) i++; 
```

* * *

`if (!(i>5)) i++;`也可以。

* * *

**提示：**没有`unless`确切的等价物。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T08:58:06.807

**编辑：这是错误的，因为 Ruby`unless`不像我的想法那样循环。我回答得太快了。**

下面回答错误

* * *

与基本关键字和运算符最接近的语法类似于

```
int x = 0;
do 
{
    x++;
} while (x < 5); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T08:58:20.090

有'三元运算`?:`符：

```
i = i > 5 ? i : i + 1
//if i>5 then i, else i++ 
```

（假设红宝石代码意味着我的想法）

# jquery - Jquery可排序，如何禁用拖放

> ID：10294709
> 
> 赞同：0
> 
> 时间：2012-04-24T08:55:09.033
> 
> 标签：jquery, drag-and-drop

```
<ul id="box">
<li id="1">1</li>
<li id="2">2</li>
</ul>

$("#box").sortable({ update: function() {
    var order = $("#box").sortable("serialize");
    alert(order);
  }
}); 
```

我想通过按下按钮来控制顺序，并禁用拖放。一切都很好，但我不知道如何禁用拖放但仍然保持这个列表可排序？

编辑 -

好的，现在我开始理解这一点。我根本不需要使用可排序的。如何在不使用可排序的情况下在 order 变量中获得相同的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:00:32.643

在这种情况下，您根本不需要 sortable 。只需使用`.append()`and`.prepend()`来移动位置。

```
$("#link-left").click(function() {
   $("#placetoshift").append($("#thesortablediv"));
}); 
```

# nant - 是否有任何工具或 API 可以可视化 NAnt 构建脚本？

> ID：10294719
> 
> 赞同：2
> 
> 时间：2012-04-24T08:55:42.450
> 
> 标签：nant, visualizer

我有一个复杂的[NAnt](http://nant.sourceforge.net/)构建脚本，其中包含很多文件`*.build`，`*.include`里面有很多目标，这些目标又被称为 via`depends`和 via `call`。我想以树状形式对所谓的内容进行视觉表示。它也应该是重新生成它的一种简单方法，因为脚本正在进一步增长。

是否有任何现成的工具或一些 API（最好是基于 .NET）可以用于此目的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T22:08:53.427

有[NAntBuilder](http://www.polestarsoft.com/products/nantbuilder/)虽然它看起来很贵（免费试用）。我从来没有亲自使用过它，所以我不能推荐它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T19:03:46.240

我还没有找到，但我的一般口头禅是“让你的设计师离开我的脸”。如果您有 30 或 50 个表，想象一下 Sql Management Studio 或 EF Design Surface 中的数据库图。一般来说，我的思维导图组织得更好。

最初可视化依赖关系的最佳方式可能是运行构建并观察任务名称出现在输出中。

# jquery - 如何围绕徽标创建三个元素的轨道

> ID：10294720
> 
> 赞同：1
> 
> 时间：2012-04-24T08:55:44.370
> 
> 标签：jquery, css, canvas, css-transitions, orbit

我是新手，我正在进行我的第一个项目：

我有三个元素（图像）和一个徽标。

当我点击一张图片时，这一张和另外两张应该在徽标周围 360° 的轨道上移动（当它们进入徽标背面时，z-index 较低，因此它们可以消失然后重新出现）。

这可能与 jquery 和 css3 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T09:35:30.980

Hiya **2 演示**从简单开始：

**1）**（使用 div）[http://jsfiddle.net/ErN8X/2/show](http://jsfiddle.net/ErN8X/2/show) & 代码：http: [//jsfiddle.net/ErN8X/2/](http://jsfiddle.net/ErN8X/2/)

**2)** [http://jsfiddle.net/qXP7H/show/](http://jsfiddle.net/qXP7H/show/)和代码：http: [//jsfiddle.net/qXP7H/](http://jsfiddle.net/qXP7H/)

另请参阅此处：[jQuery plugin to make an element orbit another?](https://stackoverflow.com/questions/7454667/jquery-plugin-to-make-an-element-orbit-another)

对于第二个演示，您可以从 jsfiddle 复制粘贴代码。休息一下，这应该会有所帮助，祝您愉快，如果有帮助，请不要忘记接受答案。！:)

**用于简单演示的 Jquery**

```
var angle = 0;     // starting position (degrees)
var distance = 30; // distance of b from a
var speed = 60;    // revolution speed in degrees per second
var rate  = 10;    // refresh rate in ms

function f() {

    var o = $('#a').offset();

    var t = o.top + (distance * Math.sin(angle * Math.PI/180.0));
    var l = o.left+ (distance * Math.cos(angle * Math.PI/180.0));

    $('#b').css({
        top: t,
        left: l
    });
    $('#c').css({
        top: t + 20,
        left: l + 30
    });
    $('#d').css({
        top: t +40,
        left: l +40
    });
    angle += (speed * (rate/1000)) % 360;
}

setInterval(f, rate);
​ 
```

# c++ - 有/没有虚拟的纯虚拟方法的实现？

> ID：10294722
> 
> 赞同：1
> 
> 时间：2012-04-24T08:55:48.930
> 
> 标签：c++, class, methods, virtual, abstract

如果我有一个带有“virtual void Method()=0”的 AbstractClass。如果 DerivedClass 将实现定义为 "virtual void Method() { }" 或简单地 "void Method() { }" 有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:04:35.393

没有区别。这只是为了清楚。

任何在基类中定义为虚拟的方法，在从它继承的类中也是虚拟的，无论它是否被这样声明。

# c++ - std::map 不插入空？

> ID：10294723
> 
> 赞同：0
> 
> 时间：2012-04-24T08:55:49.197
> 
> 标签：c++, map

今天我只注意到 empty_map[key] 将在地图中创建一个空元素。我没想到。有没有像容器一样的地图，我只会得到 null 而不会创建元素？我想没有也需要用 .find() 替换我的所有 []

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T09:00:08.943

你被 find() 困住了。这`map`就是设计的方式，并且没有类似的容器具有这种行为作为唯一的区别。（或者正如 BoBTFish 所说，你可以使用`at`）

更详细地说，您不能引用 NULL 值。这意味着您可以拥有一个指向元素或 end() 的迭代器，或者您可以拥有一个返回引用或引发异常的方法。 `find()`并且`at()`是这两个选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T09:22:41.107

如果您不喜欢它，您可以制作自己的容器来委托`std::map`但提供不同`const`的`operator[]`. 当然，请注意`operator[]`返回引用的全部意义在于：

```
std::map<Key, Value> theMap;
theMap[someKey] = someValue; 
```

能行得通。否则你将被迫这样做：

```
theMap.insert(std::make_pair(someKey, someValue)]; 
```

这似乎比使用`find`/`at`进行查找更糟糕。（或者您可以将`operator[]`迭代器返回到找到的项目，但这与使用完全相同`find`。）

# ms-access - VB+水晶报告

> ID：10294726
> 
> 赞同：0
> 
> 时间：2012-04-24T08:56:02.107
> 
> 标签：ms-access, vba, crystal-reports

我写了这段代码，但我得到“运行时错误'91'：”

```
Private Sub Command1_Click()
    Set rs = New ADODB.Recordset
    openConnection

    If Me.cmbMonth = "" And Me.cmbYear = "" Then
      MsgBox "Please select MONTH and YEAR"
      Exit Sub
    End If

    With crystalrpt

        .ReportFileName = App.Path & "\Report\VariableReport.rpt" <-- ERROR IS HERE
        .SelectionFormula = "{SW.dtaMonth}='" & cmbMonth.Text & "' and {SW.dtaYear}=" & dtaYear.Text & "" & _
        " and {SFW.dtaMonth}='" & cmbMonth.Text & "' and {SFW.dtaYear}=" & dtaYear.Text & "" & _
        " and {OT.dtaMonth}='" & cmbMonth.Text & "' and {OT.dtaYear}=" & dtaYear.Text & "" & _
        " and {CL.dtaMonth}='" & cmbMonth.Text & "' and {CL.dtaYear}=" & dtaYear.Text & "" & _
        " and {RM.dtaMonth}='" & cmbMonth.Text & "' and {RM.dtaYear}=" & dtaYear.Text & "" & _
        " and {EL.dtaMonth}='" & cmbMonth.Text & "' and {EL.dtaYear}=" & dtaYear.Text & "" & _
        " and {TRANS.dtaMonth}='" & cmbMonth.Text & "' and {TRANS.dtaYear}=" & dtaYear.Text & "" & _
        " and {WD.dtaMonth}='" & cmbMonth.Text & "' and {WD.dtaYear}=" & dtaYear.Text & "" & _
        " and {MP.dtaMonth}='" & cmbMonth.Text & "' and {MP.dtaYear}=" & dtaYear.Text & "" & _
        " and {NONSTOCK.dtaMonth}='" & cmbMonth.Text & "' and {NONSTOCK.dtaYear}=" & dtaYear.Text & "" & _
        " and {PACK.dtaMonth}='" & cmbMonth.Text & "' and {PACK.dtaYear}=" & dtaYear.Text & ""
        .WindowTitle = "Report"
        .Action = 1 'Will Show The Report

    End With

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:02:59.203

您可能正在尝试从您测试它的机器上存在的类创建一个类（对象）的实例，但不是在它被部署到的机器上......例如，我碰巧要知道我可以使 VB 程序利用 Nero Burning Rom 的类......我可以创建一个 nero 对象，并使用它的方法和属性......但这仅适用于具有 Nero 的机器安装的库。如果未安装，当您尝试创建对象时（通过与 new 或 createobject 的早​​期或后期绑定），应该引用该对象的变量仍设置为 Nothing，因为库未能创建请求的实例班级.....

# android - 在我完全植根的 Android 设备中执行“su”失败

> ID：10294729
> 
> 赞同：2
> 
> 时间：2012-04-24T08:56:11.603
> 
> 标签：android, android-ndk, su

当我将此行添加到我的代码中时

```
Process process = Runtime.getRuntime().exec("su -c"); 
```

或者

```
Process process = Runtime.getRuntime().exec("su"); 
```

试图运行“su”命令，

process.exitValue() 返回 1 表示失败。

这发生在我的一台 Android 设备上，而我的另一台 root 的 android 设备与此命令完美配合。（process.exitValue() 返回 0）

谁能教我如何追踪错误或如何修复它？

当我的两台设备几乎处于相同状态时，我对此错误感到困惑。

感谢您提前回复。

* * *

嗨，大家好，

感谢您与我讨论这个问题。您的回复暗示我已经删除了旧的 su 并放置了一个新的 su。幸运的是，返回值现在是 0，我猜这意味着正确。但是，你们中是否有人知道 .exec("su -c") 和 .exec("su") 之间有什么区别？如果您知道区别，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:57:56.900

该命令`su`（表示**Super User**）仅在有*根*手机上有效。这就是为什么您的手机可以识别并按预期工作的原因。所以，要么你植根你的其他设备，要么把这个想法放在非植根手机上:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T09:03:05.457

我**怀疑**您在有问题的手机上缺少**超级用户**，是吗？或者至少有关超级用户的某些内容可能是错误的（版本，二进制文件......）

`su`调用是否允许 root 访问的超级用户。

最新版本的超级用户似乎出现了许多问题。

尝试**删除**它并**安装**其他版本：

[http://goo.im/superuser](http://goo.im/superuser)

另一个注意事项：如果您尝试获得 root 访问权限或以 root 身份执行命令，则不应仅使用`exec("su")`. 看看由 stericson 自己编写的**RootTools**库；）

[http://code.google.com/p/roottools/](http://code.google.com/p/roottools/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-28T16:19:14.117

由于这是我搜索该短语时得到的唯一结果，因此我想我会为遇到此问题的其他人发布更新。

遵循安装[Cyanogenmod](http://wiki.cyanogenmod.org/w/Install_CM_for_spyder)的说明。通过禁用设备上的大容量存储模式（将其更改为其他选项之一）解决了我的问题。

# c++ - C++ 中的非法成员初始化

> ID：10294731
> 
> 赞同：4
> 
> 时间：2012-04-24T08:56:16.333
> 
> 标签：c++

```
class ZooAnimal {
public:
    virtual void draw();
    int resolveType() {return myType;}
protected:
    int myType;
};

class Bear : public ZooAnimal {
public:
    Bear (const char *name) : myName(name), myType(1){}
    void draw(){ };
private:
    std::string myName;
};

void main()
{

} 
```

当我编译上面的代码时，我遇到了以下错误

> 错误 C2614：“Bear”：非法成员初始化：“myType”不是基类或成员

为什么我会收到上述错误，因为我们可以从派生类访问受保护的成员？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-24T08:56:59.017

您不能在派生类初始化程序列表中初始化基类成员。

您需要为基类提供构造函数：

```
class ZooAnimal {
public:

    ZooAnimal(int type) : myType(type) {}

    virtual void draw();
    int resolveType() {return myType;}
    protected:
    int myType;
}; 
```

并从派生类中调用它：

```
class Bear : public ZooAnimal {
public:
                            //here//
Bear (const char *name) : ZooAnimal(1), myName(name) {}

void draw(){ };
private:
    std::string myName;
}; 
```

# salesforce - 通过电子邮件获取联系人和潜在客户的 SOQL 查询

> ID：10294732
> 
> 赞同：2
> 
> 时间：2012-04-24T08:56:20.097
> 
> 标签：salesforce, soql

我正在尝试编写一个单一的 soql 查询来获取所有联系人和带有特定电子邮件的潜在客户。现在，我可以编写两个不同的查询来搜索联系人和潜在客户。但这是否可以使用单个查询（搜索多个对象）。

我正在寻找单个查询的原因是，我在 javascript 中使用 salesforce REST API，我不希望两个单独的联系人和潜在客户搜索请求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T15:36:38.030

SOQL 不允许像 SQL 那样的 UNION 语句，因此（[目前](http://success.salesforce.com/ideaView?id=08730000000gmF6AAI)）无法在一个查询中执行此操作。

由于您希望减少您的请求，您可以创建一个[Apex 网络服务](http://www.salesforce.com/us/developer/docs/apexcode/index.htm)，然后您可以从您的 javascript 代码中调用它。Apex 部分将执行您的两个 SOQL 语句，然后返回结果。这仍然是两个查询，但在一个请求中完成。我不能确定使用这种方法是否会提高性能，这取决于许多因素。但这是你可以试验的东西。希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T16:58:55.213

谢谢亚当。这绝对是一条路。但我只是尝试了 SOSL 而不是 SOQL，workbench.developerforce.com 对我的查询有很大帮助。我能够触发一个简单的 SOSL 查询来搜索 Lead 和 Contact 对象。查询是

```
FIND {test@email.com} IN EMAIL FIELDS RETURNING Contact, Lead 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T18:26:38.640

SOSL 与 SOQL 有不同的限制和问题。对于这种情况，它看起来是最好的选择，但您应该知道两者之间的区别。每当我需要从多个对象类型中搜索文本字段时，我都会考虑使用 SOSL。但始终牢记限制。

# windows-phone-7.1 - 如何在 Wp7.1 中删除 backstack 直到所需的页面名

> ID：10294734
> 
> 赞同：0
> 
> 时间：2012-04-24T08:56:24.837
> 
> 标签：windows-phone-7.1, back-stack

我想从后台删除页面，直到当我在其他页面上说“F”时到达特定页面说“C”。是否可以在页面名称上删除 backstack？

谢谢和问候， 金谷

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:58:35.423

您可以轻松地遍历 backstack 并检查页面名称并删除如下项目：

```
 while (NavigationService.CanGoBack)
        {
            if (NavigationService.BackStack.First().Source.OriginalString == "/C.xaml")
            {
                break;
            }
            NavigationService.RemoveBackEntry();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T06:34:36.343

您可以像屏幕管理器一样记录您在代码中导航的所有页面。包含与默认堆栈顺序相同的页面。因此，您可以从该列表中找到所需页面的位置，并多次调用 remove back entry 函数。

# jquery - jQuery插件改变静态变量的值

> ID：10294738
> 
> 赞同：0
> 
> 时间：2012-04-24T08:56:35.863
> 
> 标签：jquery, variables, plugins, static

我有以下代码：

```
(function($){
    $.fn.aRSSFeed = function(options) {

        //  defaultne nastavenia triednych premennych

        $.aRSSFeed = {
            minHeight:          0,
            widgetPerPage:      9,
            initializedWidgets: 0,
            borderAround:       'centralBorder',
            widgetPerRow:       3,
            maxSavedFeeds:      24
        };

})(jQuery); 
```

而且我想在`widgetPerPage`使用插件初始化单个对象的元素之前从外部更改静态变量的值。

我怎么做？我试过以下：

```
 $.fn.aRSSFeed({
        maxSavedFeeds: 50
    }); 
```

或者：

```
$.fn.aRSSFeed.maxSavedFeeds = 50; 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T08:59:04.727

这应该工作：

```
$.aRSSFeed.maxSavedFeeds = 50 
```

编辑：是的，你错过了像其他人所说的结束 } 括号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:01:30.030

你错过了右`}`括号`$.fn.aRSSFeed = function(options) {`

```
(function($){
    $.fn.aRSSFeed = function(options) {

        //  defaultne nastavenia triednych premennych

        $.aRSSFeed = {
            minHeight:          0,
            widgetPerPage:      9,
            initializedWidgets: 0,
            borderAround:       'centralBorder',
            widgetPerRow:       3,
            maxSavedFeeds:      24
        };
    }  // you missed this brace

})(jQuery);

   $.fn.aRSSFeed.maxSavedFeeds = 50;
   console.log($.fn.aRSSFeed.maxSavedFeeds); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T14:04:11.780

```
(function($){
    $.fn.aRSSFeed = function(options) {

        //  defaultne nastavenia triednych premennych

        $.aRSSFeed = $.extend({
            minHeight:          0,
            widgetPerPage:      9,
            initializedWidgets: 0,
            borderAround:       'centralBorder',
            widgetPerRow:       3,
            maxSavedFeeds:      24
        }, options);
    };

})(jQuery); 
```

# java - 在 GWT FlexTable 中拖放

> ID：10294740
> 
> 赞同：3
> 
> 时间：2012-04-24T08:56:36.443
> 
> 标签：java, gwt, dynamic, drag-and-drop, flextable

我正在研究 GWT 项目中的拖放功能，我需要将小部件拖放到`FlexTable`.

我在...等中看到了一些关于 DnD 的示例`AbsolutePanel`，我对此进行了研究，但我没有找到有关上述问题的任何信息。

任何帮助都会得到帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T21:45:12.460

你考虑 gwtquery 的拖放插件吗？

它提供了使任何小部件（包括新的单元小部件）可轻松拖放和/或拖放的可能性，并且它是完全可配置的。

看看文档：[http ://code.google.com/p/gwtquery-plugins/wiki/DragAndDropPluginForGWTDeveloppers](http://code.google.com/p/gwtquery-plugins/wiki/DragAndDropPluginForGWTDeveloppers)

并在示例中：http: [//gwtquery-plugins.googlecode.com/svn/trunk/droppable/demo/GwtSimpleSample/GwtSimpleSample.html](http://gwtquery-plugins.googlecode.com/svn/trunk/droppable/demo/GwtSimpleSample/GwtSimpleSample.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T16:22:38.803

事实上，我完成了编码，而且效果非常好。我花了整整一个星期！但不是用的`GWTQuery`，我只用过`GWT`。

1.  我将其`FlexTable`移入 a`AbsolutePanel`以操作从`FlexTable`单元格中拖动的对象
2.  我使用了 java 事件、鼠标事件和处理程序
3.  我曾经`FocusPanel`将事件映射到
4.  在拖放对象的许多事件处理部分中操作了FlexTable

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T12:58:04.440

使用`DnD`in`AbsolutePanel`是一回事，使用 in 是`FlexTable`另一回事：维护起来
非常困难，因为它有很多关于行和列的操作要做，在添加*定位*器、删除和添加小部件时，这很痛苦一个**。但值得一试。`DnD``FlexTable`

# c# - 使用 foreach 枚举基数

> ID：10294742
> 
> 赞同：4
> 
> 时间：2012-04-24T08:56:43.590
> 
> 标签：c#, ienumerable

我正在尝试在扩展另一个类的类中执行此操作，该类实现`IEnumerable<T>`：

```
public override IEnumerator<T> GetEnumerator(){
    foreach (var item in base){
        // Some logic here
        yield return item;
        // Some more logic here
    }
} 
```

但是，这会失败并出现编译错误，指出“base”使用不正确。

我想继承父类的所有行为，除了将一些“虚拟”项插入枚举集合并跳过其他一些项。

我通过手动操作枚举器来解决这个问题（主要是做`foreach`扩展为除了调用`GetEnumerator`而`base`不是调用`this`）。但这并不会产生最直接的代码。

所以我的问题是：**这可以用foreach来完成吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T11:20:45.470

不，它不能用 foreach 完成。

`this`C#和`base`访问之间有很大的区别。当你使用`this`关键字时，它被归类为一个值（值的类型是出现使用的类的实例类型）。但是`base`关键字永远不会被视为一个值。它可能是[基访问](http://msdn.microsoft.com/en-us/library/aa691362%28v=vs.71%29.aspx)表达式的一部分，用于访问被当前类中类似名称的成员隐藏的基类成员：

```
 base.identifier 
   base[argument-list] 
```

所以，通过`base`关键字你只能访问基类的成员。但它不被视为基本类型的值，并且它不能是使用值的表达式的一部分（例如强制转换、foreach 语句等）。

唯一有效的方法是访问基类的成员：

```
public override IEnumerator<T> GetEnumerator()
{
    IEnumerator<T> enumerator = base.GetEnumerator();
    while (enumerator.MoveNext())
    {
        T item = enumerator.Current;
        // Some logic here
        yield return item;
        // Some more logic here
    }
} 
```

# jasper-reports - 执行 JasperViewer.viewReport(jasperPrint) 时 Jasper 报告创建失败；

> ID：10294746
> 
> 赞同：0
> 
> 时间：2012-04-24T08:56:51.467
> 
> 标签：jasper-reports

```
Could not create the report Report design not valid : 
     1\. Warning : Element bottom reaches outside band area : y=3 height=1 band-height=0
     2\. Warning : Element bottom reaches outside band area : y=0 height=29 band-height=0 Report design not valid 
```

我是 jasper Reports 4.5.1 的新手。问题是当我使用以下代码调用函数时，正在显示上述消息。

```
 JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, param, jdbcConnection);
 JasperViewer.viewReport(jasperPrint); 
```

非常感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:03:39.517

当您的模板中有重叠区域时，通常会显示此错误消息，例如，一个超出重复带的字段。从错误消息的详细信息来看，您似乎有 2 个高度非零的元素试图定位在已折叠为零高度的带中。

我希望这有帮助。

# javascript - 从表格单元格中的选择中获取文本

> ID：10294747
> 
> 赞同：1
> 
> 时间：2012-04-24T08:56:53.953
> 
> 标签：javascript, jquery, html

使用原始 javascript 或 jQuery，我需要从表格单元格中的选择中获取文本。我附上了我已经开始工作的代码，几乎可以得到我需要的东西。

```
var tbl = document.getElementById('tblHours');
var rowCount = tbl.rows.length;
var colCount = tbl.rows[0].cells.length;

for (var i = 0;i<rowCount;i++) {
    var myrow = tbl.rows[i];
    for (var j=0;j<colCount;j++) {
        alert(myrow.cells[j].firstChild.innerHTML);
    }
} 
```

这段代码的问题是它让我得到了选择的原始 html，我需要知道实际选择了哪些文本。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:01:46.690

切换到jquery！

```
var tbl = $('#tblHours');

tbl.find('tr').each(function(){
   $(this).find('td').each(function(){
       alert($(this).find('select :selected').val());
   });
}); 
```

我没有测试代码。举个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:00:44.390

如果您尝试通过此函数从中剥离 html 或仅使用其中的代码怎么办

```
function strip(html)
{
   var tmp = document.createElement("DIV");
   tmp.innerHTML = html;
   return tmp.textContent||tmp.innerText;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T09:05:21.667

```
for (var i = 0;i<$('#tblHours tr').length;i++) {
    var myrow = $('#tblHours').find('td');
    for (var j=0;j<myrow .length;j++) {
        alert(myrow.text());
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T09:05:41.397

对于 HTML 选择中的选定选项，请参阅：[http ://api.jquery.com/selected-selector/](http://api.jquery.com/selected-selector/)

试试这个代码（未测试）：

```
var tbl = document.getElementById('tblHours');
var rowCount = tbl.rows.length;
var colCount = tbl.rows[0].cells.length;

for (var i = 0;i<rowCount;i++) {
    var myrow = tbl.rows[i];
    for (var j=0;j<colCount;j++) {
        alert($(myrow.cells[j]).find('select :selected'));
    }
} 
```

# ios - EKEvent 使用 ical 事件将事件添加到当天

> ID：10294762
> 
> 赞同：2
> 
> 时间：2012-04-24T08:57:56.190
> 
> 标签：ios, xcode, events, calendar, ekevent

我正在使用以下代码将事件添加到 iphone 的日历中，

```
EKEventStore *eventStore = [[EKEventStore alloc] init];
EKEvent *event  = [EKEvent eventWithEventStore:eventStore];
event.title = @"title";
event.startDate = [NSDate date];
event.endDate = somedate;
[event setCalendar:[eventStore defaultCalendarForNewEvents]];
[eventStore saveEvent:event span:EKSpanThisEvent error:&err]; 
```

并访问我使用的事件，

```
EKEventStore *eventStore = [[EKEventStore alloc] init];
NSPredicate *predicate = [eventStore predicateForEventsWithStartDate:startDate endDate:endDate calendars:nil];     
NSArray *eventsOfTheMonth = [eventStore eventsMatchingPredicate:predicate];

NSMutableArray *tempEKEvents = [NSMutableArray arrayWithCapacity:[eventsOfTheMonth count]];

for (EKEvent *event in eventsOfTheMonth) {

        [tempEKEvents addObject:event];

    }

} 
```

出于某种原因，当我想向已经有 iCal 添加的事件的一天添加新事件时，该事件不会添加。但它会将事件添加到其他任何一天，即使是那些通过我的应用程序添加了多个事件的事件。

# c# - 使用 Installutil 安装服务

> ID：10294763
> 
> 赞同：2
> 
> 时间：2012-04-24T08:57:56.380
> 
> 标签：c#, .net, wcf, installutil

我要在 Windows 上安装 WCF 服务。

现在我想将它安装在运行 Windows 的服务器上并安装了 v3.5 .net 框架。

该服务已在框架 4 中编写，因此它不会运行。

我的问题是我可以使用框架 3.5 中的“installutil”来安装服务吗？为什么？

=== 更新===

我有在里面运行 wcf 的 Windows 服务。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T09:30:16.530

您使用 InstallUtil 安装 Windows 服务。如果您遵循以下 MSDN 文章[How to: Host a WCF Service in a Managed Windows Service](http://msdn.microsoft.com/en-us/library/ms733069.aspx)之类的内容，您的 WCF 服务可能已经在 Windows 服务中开发。

但是，如果 (Windows) 服务是用 .NET 4 编写的，并且您尝试从 .net 3.5 运行 installutil，您将收到以下错误：

> 初始化安装时发生异常：System.BadImageFormatException：无法加载文件或程序集“file:///C:\MyService.exe”或其依赖项之一。此程序集由比当前加载的运行时更新的运行时构建，并且无法加载。

要安装 .NET 4 (Windows) 服务，您需要使用 .NET 4 installutil，一旦您拥有 .NET 4，该安装工具将位于：C:\Windows\Microsoft.NET\Framework64\v4.0.30319\installutil.exe安装。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T08:59:32.917

installutil 用于安装 windows 服务而不是 wcf 服务

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T09:13:13.270

如果您可以控制构建服务，只需将其更改为面向 .NET 3.5 框架，您就应该能够安装它。

否则，如果该服务是针对 .NET Framework 4.0 构建的，并且服务器只安装了 .NET 3.5，我认为它不会运行，除非您在配置文件中明确覆盖它以在 .NET 3.5 下运行（我不推荐）。

顺便说一句，我总是建议人们使用[WiX 工具集](http://wixtoolset.org/)来为 Windows 服务编写安装程序，而不是使用 InstallUtil，因为 InstallUtil 是一个自定义的、非标准的 Visual Studio 工具来安装 Windows 服务，而 Windows Installer (MSI)经批准的 Windows 安装标准内置了对安装经过试验和测试的 Windows 服务的支持，并为您提供更多控制，例如停止和启动服务等。

# php - DOCUMENT_ROOT 已设置但无法在脚本中获取。为什么？

> ID：10294765
> 
> 赞同：1
> 
> 时间：2012-04-24T08:57:59.653
> 
> 标签：php, apache, apache2, ini

自去年 10 月以来，我的 php 脚本运行良好，上次我记得是 2 个月前，今天在执行它们时我遇到了 _SERVER['DOCUMENT_ROOT'] 变量的问题。

如果我查看 _SERVER 数组，它没有设置。如果我在脚本中执行：

```
phpinfo(); 
```

然后变量在那里并设置。但是调用它：

```
$_SERVER['DOCUMENT_ROOT'] 
```

返回空

这是什么原因？如何在我的脚本中再次使用它？我认为原因是 php 或 apache 更新，但在过去 2 个月中两者都更新了几次。

另外，我没有在 php.ini 文件中看到 DOCUMENT_ROOT。我确实看到了 doc_root，这是不同的。

我的 php：PHP 版本 5.3.5-1ubuntu7.7 阿帕奇：PHP 版本 5.3.5-1ubuntu7.7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:51:12.803

试试看`print_r($_SERVER)`是否真的设置好了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T20:08:51.630

`DOCUMENT_ROOT`是一个环境变量，通常由 (apache) 网络服务器在通过 CGI 调用您的脚本之前设置。如果您的网络服务器有错误或配置错误，则可能不再设置此环境变量。

您可以尝试使用 mod-rewrite、mod-cgi、mod-setenv 或类似工具进行调试和/或修复。如果这完全超出您的想象，请联系您的服务器管理员并讨论该问题，因为它可能有很多原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T15:58:49.187

如果可能是 Apache 配置问题：您是否在 Apache 配置文件中定义了文档根目录？

否则，您可以使用以下方法绕过它：

```
dirname(__FILE__) 
```

或者 ：

```
substr($_SERVER['SCRIPT_FILENAME'], 0, -strlen($_SERVER['SCRIPT_NAME'])); 
```

# php - PHP Javascript 链接

> ID：10294771
> 
> 赞同：0
> 
> 时间：2012-04-24T08:58:08.190
> 
> 标签：php, mysql, html

我有这个链接：

```
echo"<a href=\"$urlHTML\" onclick="return confirm('Please Confirm You Wish to Add these Details')">Delete</a>"; 
```

它用于将剥离的字符链接传递到页面，但在此之前使用 javascript 函数来让用户确认他们想要继续。基本上，在上面的链接上，我收到以下错误：

```
Parse error: syntax error, unexpected T_RETURN, expecting ',' or ';' in E:\xampp\htdocs\IDB\delete.php on line 411. 
```

如果有人能告诉我哪里出错了，那就太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:06:38.670

这个应该工作：

```
echo '<a href="'.$urlHTML.'" onclick="return confirm(\'please confirm\')">Delete</a>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:01:08.883

尝试：

```
 echo "<a href=\"$urlHTML\" onclick=\"return confirm('Please Confirm You Wish to Add these Details')\">Delete</a>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T09:01:20.357

逃离“符号

```
echo"<a href=\"$urlHTML\" onclick=\"return confirm('Please Confirm You Wish to Add these Details')\">Delete</a>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T09:01:39.350

让它像这样

```
 echo"<a href=\"$urlHTML\" onclick=\"return confirm('Please Confirm You Wish to Add these Details')\">Delete</a>"; 
```

您忘记转义 onclick 的内部双引号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T09:03:09.543

分离 PHP 和 HTML

```
?>
<a href="<?=$urlHTML?>" onclick="return confirm('Please Confirm You Wish to Add these Details')">Delete</a>
<?php 
```

# jquery - 淡出当前内容和淡入新内容 jquery

> ID：10294778
> 
> 赞同：3
> 
> 时间：2012-04-24T08:58:31.433
> 
> 标签：jquery, dynamic-data, fadein, fadeout, fading

我正在尝试创建一个侧面菜单，以便当用户单击链接时，div（页面中间）中的当前内容应该`fadeout`和新页面内容应该`fadeIn`，我创建了这个方法：

```
<script type="text/javascript">
    $('a').click(function() {
        $('#content').html('<img src="ajax-loader.gif" width="100" alt="loading">').show();
        var page = $(this).attr('href');
        $('#content').hide().load(page).fadeIn('slow');
        return false;
    });
</script> 
```

但是效果不如预期，有大神知道这个方法怎么增强吗？我期望`fadeout`当前内容到背景页面和`fadeIn`新内容。
*但是当前的内容就消失了*

我的html代码：

```
<body>
    <h1><img src="images/cooltext679404844.png"/></h1>
    <ul id="nav" class="mmenu" type="none">
        <li><a href="contact.php"> Contact </a></li>
        <li><a href="register.php"> Register </a></li>
        <li><a href="login.php"> Login</a></li>
        <li><a  href="upload.php"> Submit paper </a></li>
        <li><a  href="tabs.php"> tabs menu test </a></li>
        <li><a href="time-frame.php">profile</a></li>
        <li><a  href="status-reviews.php">check status of reviews</a></li>
    </ul>
    <p style="font-size: small;text-align: center;bottom: 0px;left: 300px; line-height: 0%;position:fixed; background-color: #cc8800">
        <a target="content" href="about.php">About us</a> | <a target="content" href="terms.php">Terms of service</a> | <a target="content" href="policy.php">Privacy Policy</a>
    </p>
    <div id="content"></div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:04:55.263

尝试：

```
 $("#content").fadeOut('slow', function(){
    $("#content").load(page, function () {
            $(this).fadeIn('slow');
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:02:17.110

在负载中使用回调。否则它会立即淡入：

```
var content = $('#content');
content.fadeOut().load(page, function() {
    content.fadeIn();
}); 
```

# c# - 一个 .net winforms 组件来比较两个文档？

> ID：10294789
> 
> 赞同：0
> 
> 时间：2012-04-24T08:59:21.347
> 
> 标签：c#, .net, winforms, user-interface, compare

我正在寻找一个 .net winforms 组件，它可以比较两个格式化的文档（在 .doc、.docx、.html、.rtf 中，它们中的任何一个都可以）并直观地发现变化。我们更喜欢看到 MS Word 在其跟踪更改模式中显示更改时所做的更改

我们期望只有几页长且编辑不多的简短文档（更改的单词很少，添加/删除段落等）

您是否知道可以免费或以其他方式推荐的组件

谢谢你，凯末尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T11:04:50.423

以下代码将比较两个单词文档并保存第三个文档中更改的合并。

添加 Microsoft Word 12.0 对象库的引用

```
using Microsoft.Office;

public static void comp()
{

    object missing = System.Reflection.Missing.Value;

    //create a readonly variable of object type and assign it to false.

    object readonlyobj = false;

    object filename = "C:\\romil1.docx";

    //create a word application object for processing the word file.

    Microsoft.Office.Interop.Word.Application app = new Microsoft.Office.Interop.Word.Application();

    //create a word document object and open the above file..

    Microsoft.Office.Interop.Word.Document doc = app.Documents.Open(

    ref filename, ref missing, ref readonlyobj, ref missing, ref missing,

    ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing);

    string filenm = "C:\\romil2.docx";

    object filenm3 = "C:\\romil3.docx";

    doc.TrackRevisions = true;

    doc.ShowRevisions = false;

    doc.PrintRevisions = true;

    doc.Compare(filenm);

    doc.Close(Microsoft.Office.Interop.Word.WdSaveOptions.wdDoNotSaveChanges);

    app.ActiveDocument.SaveAs(ref filenm3, ref missing, ref readonlyobj, ref missing, ref missing,

    ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing);

    app.Quit(Microsoft.Office.Interop.Word.WdSaveOptions.wdSaveChanges);

    MessageBox.Show("Process complete");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-09T11:14:46.063

您可以使用以下库之一来操作 Word 文档并自己构建文档比较方法。

1.  Microsoft Interop（需要安装 Office）
2.  OpenXML SDK
3.  [Aspose.Words for .NET](http://www.aspose.com/docs/display/wordsnet/Home)

由于这个问题很老，现在有更多可用的解决方案。

1.  [Groupdocs 比较](http://groupdocs.com/apps/comparison)
2.  [Aspose.Words for .NET 的文档比较](https://github.com/AsposeShowcase/Document_Comparison_by_Aspose_Words_for_NET)

我与 Aspose 一起担任开发人员宣传员。

# php - PHP sqlsrv 2 和 UTF-8

> ID：10294793
> 
> 赞同：1
> 
> 时间：2012-04-24T08:59:47.587
> 
> 标签：php, sql-server, windows, iis

请问，我应该怎么做才能将 UTF-8 的数据存储到 SQL Server (2005) 中，对吗？我的 html 页面是 UTF-8 编码的，表中的列是 nvarchar 类型，连接字符集设置为 UTF-8，但俄语字符串 'Логистика Другое' 存储为 '????????? ??????' 入表。我正在使用 sqlsrv v2。这是连接参数：

```
$dbConnParams = array('server' => "server", // SQL Server
                      'params' => array("Database"      => "dbname",
                                        "UID"           => 'user',
                                        "PWD"           => 'pass',
                                        "CharacterSet"  => 'UTF-8'));

$dbh = sqlsrv_connect($dbConnParams['server'], $dbConnParams['params']); 
```

(php 5.2.17, iis7.5, ms sql server 2005, sqlsrv 2)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:55:04.017

是历史原因造成的，我们使用 odbc 时没有绑定参数：

```
$sql = "usp_cis_upd
            @Key = " . $key . ",
            @Name = '" . $name . "'";
odbc_exec($dbh, $sql); 
```

如果绑定了参数，则重新编码并很好地保存字符串：

```
$sql = "usp_cis_upd
            @Key = ?,
            @Name = ?";

$params = array($Key,
                $Name);

$stmt = sqlsrv_query($dbh, $sql, $params); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T23:00:54.623

很可能是您的数据库设置有问题。存储数据的列需要有 Unicode 排序规则，否则将不接受 Unicode 字符，从而产生问号。

在您的数据库中使用 UTF-16 可能会解决您的问题。更深入的原因，请参见：http: [//blogs.msdn.com/b/qingsongyao/archive/2009/04/10/sql-server-and-utf-8-encoding-1-true-or -false.aspx](http://blogs.msdn.com/b/qingsongyao/archive/2009/04/10/sql-server-and-utf-8-encoding-1-true-or-false.aspx)

# hadoop - hadoop FIFO调度不会使提交的作业并行运行？

> ID：10294798
> 
> 赞同：0
> 
> 时间：2012-04-24T09:00:15.803
> 
> 标签：hadoop, parallel-processing, fifo

我已经配置了 4000 个地图的地图容量，并为每个作业配置了 500 个地图，基于我对 FIFO 模式的理解以及 如果我提交 8 个作业[在 hadoop 中并行](https://stackoverflow.com/questions/7483624/running-jobs-parallely-in-hadoop) 运行作业，这 8 个作业应该并行运行，对吗？但是，我仍然看到我提交的 8 个作业是按顺序运行的，这让我感到很奇怪。另一种方法是尝试公平调度程序，但我还有一些其他正在运行的错误......如何使其并行运行？

我现在是唯一的用户。

**问题**：作业跟踪器 Web UI 显示的总运行作业是什么？

实际上我已经提交了 80 个作业，所以所有作业都已成功提交，因为我可以在“运行作业”部分看到其中的 80 个，但它们只是按顺序运行

**问题**：您当前正在处理多少个输入文件？这与该工作的映射器数量有什么关系？

因为对于每个作业，我通过 mapred-site.xml 设置 map.task.num=500 配置 500 个地图。

以下是信息

Kind % Complete Num Tasks Pending Running Complete Killed 失败/Killed Task Attempts

地图 1.40% 500 402 91 7 0 0 / 0

减少 0.00% 1 1 0 0 0 0 / 0

**问题**：您可以将输入格式配置为仅运行 500 个地图，但有时 Hadoop 会忽略此值：例如，如果您有超过 500 个输入文件。

我确信这不会发生，因为我自定义了输入格式，因此要运行的映射器数量正是我在 mapred-site.xml 中配置的映射器数量

**问题**：当你开始你的工作时，你运行了多少个文件，你使用的是什么输入格式，如果你对输入文件使用了任何文件压缩，该怎么办？

好吧，我其实只运行了一个文件，但是这个文件会完全加载到所有的maptasks中，所以我实际上使用了distrbutecache机制，让每个maptask完全加载这个文件。我目前没有使用压缩

**问题**：作业跟踪器对配置的映射器和减速器插槽的总数显示什么？这与您的预期值 5000 相符吗？

下面是资料

Maps 减少 TotalSubmissions 节点 Map Task Capacity 减少 Task Capacity Avg. 任务/节点 黑名单节点

83 0 80 8 4000 80 510.00 0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:36:52.683

无论您运行 FairScheduler 还是 CapacityScheduler，您仍然应该能够并行运行作业，但是您可能会看到某些原因会导致您的作业按顺序运行：

*   你是唯一使用集群的人吗，如果不是，还有多少人在使用它：
    *   **问题**：作业跟踪器 Web UI 显示的总运行作业是什么？
*   如果您确实是在特定时间点在集群上运行的唯一作业，请检查 Job Tracker Web UI 以了解您当前正在运行的作业 - 您当前正在处理多少输入文件？这与该工作的映射器数量有什么关系？
    *   您可以将输入格式配置为仅运行 500 个映射，但有时 Hadoop 会忽略此值：例如，如果您有超过 500 个输入文件。
    *   **问题**：当你开始你的工作时，你运行了多少个文件，你使用的是什么输入格式，如果你对输入文件使用了任何文件压缩，该怎么办？
*   **问题**：作业跟踪器对配置的映射器和减速器插槽的总数显示什么？这与您的预期值 5000 相符吗？

# xml - 比较忽略特定 XPath 的 XML

> ID：10294799
> 
> 赞同：1
> 
> 时间：2012-04-24T09:00:21.553
> 
> 标签：xml, xpath, xmlunit

我正在使用 XML Unit 来比较两个 XML 并检查两者是否相似。我的要求是 - 我想在比较过程中忽略特定的 XPATH。由于 XPATH 可以是任何有效的 Xpath 语法，我如何忽略给定的 XPATH？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:43:50.593

您应该使用`DifferenceListener`并实现该`differenceFound`方法。参数差异提供了位置，因此您可以使用此信息与要忽略的 XPath 列表进行比较。

```
difference.getTestNodeDetail().getXpathLocation() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T09:39:51.700

我使用 xslt 通过 xpath 删除元素，然后比较两个处理后的 xml。

# c# - ParameterizedThreadStart 是否保证对象实例不会被垃圾收集？

> ID：10294800
> 
> 赞同：4
> 
> 时间：2012-04-24T09:00:21.600
> 
> 标签：c#, delegates, lambda, thread-safety

我一直在玩下面的代码：

```
class RunMeBaby
{
    public void Start()
    {
        while (true)
        {
            Console.WriteLine("I'm " + Thread.CurrentThread.ManagedThreadId);
            Thread.Sleep(1000);
        }
    }
}

class Program
{
    static void Main(string[] args)
    {
        RunMeBaby r = new RunMeBaby();
        Thread t = new Thread(r.Start);  // ParameterizedThreadStart delegate
        r = null;
        GC.Collect(GC.MaxGeneration);
        t.Start();

        r = new RunMeBaby();
        t = new Thread(() => r.Start()); // ThreadStart delegate
        t.Start();
        //Thread.Sleep(1000);
        r = null;
    }
} 
```

虽然 main 的第一部分执行顺利，但当我注释对`Thread.Sleep()`方法的调用时，第二部分失败，我得到一个空异常。

我的理解是 lambda 表达式被延迟评估，可能会发生新线程启动速度不够快并且主线程设置`r`为`null`第一个的情况。`r`现在我把这个“第二部分”放在一个具有本地范围的静态方法中，问题就消失了。但是我想知道在这种特殊情况下线程调度程序是否隐藏了问题，也许在具有不同工作负载的不同机器上仍然可能发生。或者关于 lambda 表达式是否有一些东西可以保证即使`r`超出范围，只要它没有被设置为`null`，它仍然以某种方式被引用。

最终我想知道我是否应该考虑`ParameterizedThreadStart`尽可能多地使用委托或坚持使用 lambda，因为我尊重某些条件以保持它们有效。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T09:07:32.523

在说垃圾回收之前，我们先来了解一下你写的代码。

两者之间存在巨大差异：

```
new Thread(r.Start) 
```

`Start`它为当前值的方法创建一个委托`r`，即

```
new Thread(new ThreadStart(r.Start)) // identical to new Thread(r.Start) 
```

在上述任何一种情况下，**现在**`r`都进行评估，因此以后对另一个实例（或 null）的更改不会影响它。对比：

 **```
new Thread(() => r.Start()) 
```

这是一个**捕获**变量的匿名方法`r`，即`r`仅**在调用匿名方法时**评估，即在第二个线程运行时。因此，是的：如果您更改 的值，`r`您很可能会得到不同的结果（如果将其更改为 null，则会出现错误）。

参数化线程启动也可以：

```
new Thread(state => ((RunMeBaby)state).Start(), r); 
```

**它将当前**值作为参数值传递`r`，因此现在是**固定**的；调用委托时，`state`获取*当时*（以前）存在的值`r`，因此您可以将其转换为适当的类型并安全地使用它。

现在！在垃圾收集方面，没有什么特别要知道的。是的，将引用传递给`r`a`ParameterizedThreadStart`将创建引用的**副本**（而不是对象的副本），因此将阻止垃圾收集，直到它不再在范围内。然而，原始`new Thread(r.Start)`方法也是如此。唯一变得棘手的是“捕获变量”示例 ( `() => r.Start()`)，尽管您看到的问题与 GC**无关，而是与捕获变量的规则有关。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T09:07:00.963

很多问题我都不明白。我能说的是

```
Thread t = new Thread(r.Start) 
```

创建一个委托，该委托将在内部指向提供要通过委托调用的方法实现的实例。因此，将 r 设置为 null 将无效，因为存在*Thread -> ParameterizedDelegate -> your method -> RunMeBaby*的关系。

```
r = new RunMeBaby();
t = new Thread(() => r.Start()); 
```

在 r 周围创建一个闭包，它仍然允许您修改 r。如果您将其设置为 null 并稍后访问它，您将获得**NRE**。**

# c++ - c++动态数组初值

> ID：10294801
> 
> 赞同：29
> 
> 时间：2012-04-24T09:00:28.173
> 
> 标签：c++

我需要动态创建一个整数数组。我发现在使用静态数组时，语法

```
int a [5]={0}; 
```

将所有元素的值正确初始化为 0。

创建动态数组时有没有办法做类似的事情

```
int* a = new int[size]; 
```

无需遍历数组的所有元素？或者也许用 for 循环分配值仍然是最佳方法？谢谢

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-04-24T09:04:53.633

当然，仅`()`用于值初始化：

```
 int* ptr = new int[size](); 
```

（取自我之前密切相关的问题的[答案）](https://stackoverflow.com/a/2468254/57428)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T09:01:42.790

我会做：

```
int* a = new int[size];
memset(a, 0, size*sizeof(int)); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-24T09:03:08.697

我建议你使用`std::vector<int>`或`std::array<int,5>`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-09-18T11:22:03.497

值初始化元素`()`

例子：

```
int *p = new int[10];       // block of ten uninitialized ints
int *p2 = new int[10]();    // block of ten ints value initialized to 0 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-10-19T10:59:36.213

要使用 0 以外的其他值进行初始化，

对于指针数组：

```
int size = 10;
int initVal = 47;
int *ptrArr = new int[size];
std::fill_n(ptrArr, size, initVal);
std::cout << *(ptrArr + 4) << std::endl;
std::cout << ptrArr[4] << std::endl; 
```

对于非指针数组

```
int size = 10;
int initVal = 47;
int arr[size];
std::fill_n(arr, size, initVal); 
```

几乎适用于任何数据类型！

！小心，一些编译器可能不会抱怨访问超出数组范围的值，这可能会返回非零值

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-24T10:30:55.230

```
int *a=new int[n];
memset(a, 0, n*sizeof(int)); 
```

这会将数组的所有字节设置为 0。`char *`同样，您也可以使用 memset。有关更正式的定义和用法，请参见[http://www.cplusplus.com/reference/clibrary/cstring/memset/ 。](http://www.cplusplus.com/reference/clibrary/cstring/memset/)

# visual-studio-lightswitch - 在 Lightswitch 中允许空字符串

> ID：10294802
> 
> 赞同：1
> 
> 时间：2012-04-24T09:00:31.867
> 
> 标签：visual-studio-lightswitch

我有一列不允许 null 但允许空字符串。我切换了`Allow Empty String`验证属性，但`A value is required`在插入带有空字符串的数据时仍然出现错误。结果，我必须在该字段中放置一个空格，然后在编辑模式下将其更改为空字符串。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T05:13:22.520

@Paul -*允许空字符串*仅适用于**附加**数据源中的字符串属性，因此如果您使用的是内部数据库，您将看不到该选项。

@Walter - 我认为您遇到了问题，因为字符串属性被初始化为*Null*，而不是空字符串。如果希望*TextBox*包含空字符串，则需要在表的*Created*方法或屏幕的*InitialiseDataWorkspace*方法中将其初始化为空字符串。在 SQL Server 中，这是正常的。Null 表示*没有*为该属性输入任何内容，而空字符串表示该属性已故意设置为*no value*。这是一个微妙的区别，很容易让人绊倒。

我希望这是有道理的：

Null = 列的值*未知*（尚未输入）

空白字符串 = 该列的值已被故意设置为*空白*

# iphone - 动画 UICircularProgressView

> ID：10294804
> 
> 赞同：2
> 
> 时间：2012-04-24T09:00:34.870
> 
> 标签：iphone, objective-c, ios, animation

我正在使用[UICircularProgressView](https://github.com/Zedenem/UICircularProgressView)并将其更改为我喜欢的。初始化很清楚，但无论如何我都会发布它：

```
UICircularProgressView *wheelProgress = [[UICircularProgressView alloc]initWithFrame:CGRectMake(someFrame)]; 
```

然后我正在设定正确的进度`CGFloat between 0-1`

```
CGFloat progress = .3;   // example
[self.wheelProgress setProgress:progress]; 
```

这工作得很好，看起来不错，但我真的很想以某种方式对其进行动画处理。到目前为止我还没有使用过动画，所以我的第一种方法是

```
for(tempProgress =! progress){
  incrementing tempProgress
  setting tempProgres to progressView
} 
```

这当然是非常丑陋的，并阻止了其他一切。

我想要实现的是从 0 到最终值的线性动画。

我看过：[动画教程](http://www.friendlydeveloper.com/2011/02/basic-ui-animation/)

并想出了这样的事情：

```
CGContextRef context = UIGraphicsGetCurrentContext();
[UIView beginAnimations:nil context:context];
[UIView setAnimationCurve:UIViewAnimationCurveLinear];
[UIView setAnimationDuration: 1];
wheelProgress.progress = (progress) ? progress : 0.0;
[UIView commitAnimations]; 
```

但不知何故这不起作用..

有什么想法我需要在这里解决吗？

在此先感谢塞巴斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:13:03.690

您正在使用的进度视图未设置为将进度作为动画属性。这样做非常复杂，我不确定它是否是您正在寻找的。

如果是，我认为您需要执行以下操作（我自己没有这样做，这只是基于我阅读过的文档和书籍）：

1.  重写视图以使用`CALayer`s 而`drawInContext`不是`drawRect`
2.  在`progress`图层上创建一个属性（使用`@dynamic`而不是`@synthesize`
3.  覆盖`actionForKey:`图层子类并`CABasicAnimation`为键返回 a`@"progress"`

这方面的例子可以在一些 SO 问题/答案中找到：[here](https://stackoverflow.com/questions/2395382/animating-a-custom-property-of-calayer-subclass)和[here](https://stackoverflow.com/questions/243266/how-can-i-use-custom-animations-for-onorderout-in-core-animation)应该让您开始或至少习惯可以使用的搜索词。[这](http://blog.pixelingene.com/2012/02/animating-pie-slices-using-a-custom-calayer/)看起来像是一个使用图层在饼图中绘制动画切片的好教程，这可能比从 UICircularProgressView 开始更接近您想要的。

或者，您可以使用 NSTimer 来实现这一点，它每 1/60 秒增加一次进度值，直到达到您想要的值。

# facebook - 在 Facebook 业务页面时间线上的网站上显示来自 FB 评论框的 Facebook 评论

> ID：10294807
> 
> 赞同：0
> 
> 时间：2012-04-24T09:00:54.860
> 
> 标签：facebook, api

我有一个客户希望他们的网站 Facebook 评论（来自评论框）显示在他们的 Facebook 业务页面上。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:04:00.477

创建一个 iframe 应用程序，将评论插件放在那里并指定 data-href/href (html5/xfbml) 与他们页面上的完全相同...

# android - Android 以写权限挂载文件系统

> ID：10294808
> 
> 赞同：4
> 
> 时间：2012-04-24T09:00:56.747
> 
> 标签：android, linux, sqlite, adb, mount

我正在使用的 Android 设备不支持它，所以我在从 AVD下载它之后`sqlite3`想到了`push`它。`pull`

我从 AVD 中拉出它没有问题，但我无法将它推送到设备上，因为我需要启用写权限。我试图关注[sqlite3: not found](https://stackoverflow.com/questions/7877891/sqlite3-not-found)

我尝试了以下

```
$ adb -d shell
$ mount
mount
rootfs / rootfs ro,relatime 0 0
tmpfs /dev tmpfs rw,relatime,mode=111 0 0
devpts /dev/pts devpts rw,relatime,mode=600 0 0
proc /proc proc rw,relatime 0 0
sysfs /sys sysfs rw,relatime 0 0
none /acct cgroup rw,relatime,cpuacct 0 0
tmpfs /mnt/asec tmpfs rw,relatime,mode=755,gid=1000 0 0
tmpfs /mnt/obb tmpfs rw,relatime,mode=755,gid=1000 0 0
tmpfs /mnt/usb tmpfs rw,relatime,mode=755,gid=1000 0 0
tmpfs /app-cache tmpfs rw,relatime,size=7168k 0 0
none /dev/cpuctl cgroup rw,relatime,cpu 0 0
/dev/block/mmcblk0p9 /system ext4 ro,relatime,barrier=1,data=ordered 0 0
/dev/block/mmcblk0p7 /cache ext4 rw,nosuid,nodev,noatime,barrier=1,data=ordered
/dev/block/mmcblk0p1 /efs ext4 rw,nosuid,nodev,noatime,barrier=1,data=ordered 0
nil /sys/kernel/debug debugfs rw,relatime 0 0
/dev/block/mmcblk0p10 /data ext4 rw,nosuid,nodev,noatime,barrier=1,data=ordered,
/dev/block/mmcblk0p4 /mnt/.lfs j4fs rw,relatime 0 0
/dev/block/vold/179:11 /mnt/sdcard vfat rw,dirsync,nosuid,nodev,noexec,noatime,n
epage=cp437,iocharset=iso8859-1,shortname=mixed,utf8,errors=remount-ro,discard 0 
```

我按照[此链接](http://android-tricks.blogspot.com/2009/01/mount-filesystem-read-write.html)尝试按如下方式安装文件系统，但出现权限错误。

```
$ mount -o rw,remount -t yaffs2 /dev/block/mmcblk0p9 /system
mount: Operation not permitted 
```

`push` `sqlite3`任何线索为了调试原因需要做什么才能进入 Adroid 设备？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-24T09:14:58.677

# 编辑：找到更好的解决方案

从主机（Linux 或 Windows PC），执行以下命令。

```
>> adb root
>> adb remount 
```

如果您有权限，默认情况下 remount 将使用 rw 重新安装 /system 分区。

下面提到的**注 1 和注 2仍然适用。**

* * *

## 老路

要重新挂载已挂载的系统，您需要具有 root 权限。做一个`su`. 您将进入根模式。然后运行以下命令。它会起作用的，我做过很多次。

所以这里是步骤：

```
 adb shell 
 su
 mount -o rw,remount /system 
```

**注意 1：**要执行命令`su`或`adb root`，您的设备必须是 root 并且在其上具有 su 可执行文件。如果命令`su`成功，终端提示符将从`$`变为`#`。

**注意2：** 最近的手机，安全性已经加强，即使手机root后`adb remount`也无法使用。据我所知，到目前为止还没有可用的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-22T12:19:41.953

正如 mk 所指出的，许多较新的手机都禁用了 adb root 和 adb remount。我的 LGL34C 被锁定，而 adb 几乎只对拉入文件系统的受保护区域有用。

但是有办法解决它（总是有办法）！当然，您仍然需要安装了 su 的 root 手机。在手机上安装 shell 终端和/或 sshd 服务。从本地操作系统重新挂载和写入 /system 工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-29T06:51:04.700

你没有权限的主要原因......那个脚本上没有根，因为 $ su 把它变成了 # 我相信......

# ruby - 阅读配置的用户环境变得越来越瘦

> ID：10294815
> 
> 赞同：2
> 
> 时间：2012-04-24T09:01:25.057
> 
> 标签：ruby, rack, thin

我从 ubuntu 下的参数集开始，如下所示

```
chdir: /var/www/myuser/current
rackup: /var/www/myuser/current/config.ru
environment: production
address: 0.0.0.0
port: 3000
timeout: 30
log: log/thin.log
pid: tmp/pids/thin.pid
max_conns: 1024
max_persistent_conns: 512
require: []
wait: 30
servers: 3
daemonize: true
user: myuser
group: myuser 
```

我想为“myuser”定义一组环境变量，以便可以在我在 Thin 中部署的机架应用程序中访问它们`ENV['MY_VAR']`。

我可以在不将变量一一添加到命令行的情况下进行一些配置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T15:18:48.677

[http://code.macournoyer.com/thin/usage/](http://code.macournoyer.com/thin/usage/)

您可以在您的应用程序目录中创建一个 YAML 文件并启动服务器，如：

```
thin -C ./config.yml 
```

要么，要么我真的不明白这个问题！

# c# - byte[] 不包含 SequenceEqual 认证方法的定义

> ID：10294817
> 
> 赞同：3
> 
> 时间：2012-04-24T09:01:28.430
> 
> 标签：c#, linq, web-services, rest, authentication

任何人都可以帮助解决我遇到的一些问题。我正在尝试创建一种自制的身份验证方法，我陷入了一些领域，并希望有人能提供帮助。我想问的第一件事是如何解决我在代码中评论的问题：

```
 public string Authentication(string studentID, string password)
    {
        var result = students.FirstOrDefault(n => n.StudentID == studentID);
        //find the StudentID that matches the string studentID 
        if (result != null)
        //if result matches then do this
        {
            //---------------------------------------------------------------------------- 
            byte[] passwordHash = Hash(password, result.Salt);
            string HashedPassword = Convert.ToBase64String(passwordHash);
            //----------------------------------------------------------------------------
            // take the specific students salt and generate hash/salt for string password (same way student.Passowrd was created)

            System.Text.UTF8Encoding enc = new System.Text.UTF8Encoding();
            byte[] UserPassword = enc.GetBytes(HashedPassword);
            UserPassword.SequenceEqual(result.Password); // byte[] does not contain a definition for SequenceEqual?
            //check if the HashedPassword (string password) matches the stored student.Password
        }
        return result.StudentID; 
        //if string password(HashedPassword)  matches stored hash(student.Passowrd) return student list 

        //else return a message saying login failed 
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T09:04:52.383

“不能像方法一样使用”可能是因为您添加了括号：`result.Password()`如果它是一个属性，请删除括号`result.Password`。添加括号会使编译器尝试将其编译为方法调用，而实际上它是一个属性或字段。

第二个错误是你试图返回`students`，这是一个学生列表。该方法需要 a`string`作为返回值。你的意思是改为`return result.StudentID;`吗？`List<Student>`例外情况是详细说明了从to编译演员表的失败尝试`string`。

对于你的后半部分问题，我无法提供任何建议。

**更新**

您应该找到一个调用`SequenceEqual`on的方法`byte[]`。这是一个 Linq 扩展方法，因此您可能需要添加：

`using System.Linq;`

到文件的顶部。

然后，您可能会在尝试将字符串传递给此方法时遇到错误：`SequenceEqual(result.Password);`.

# ruby-on-rails - 部署到 heroku 生成插件弃用警告，但不存在插件

> ID：10294826
> 
> 赞同：1
> 
> 时间：2012-04-24T09:01:55.707
> 
> 标签：ruby-on-rails, heroku

我在将 Rail 应用程序部署到 Heroku 时遇到了困难。我真的很感激一个想法清单来解决这个问题，我已经用尽了我的想法正在诉诸于把我的头发拉出来！

**短篇小说：** `heroku run rake db:migrate`产生错误：

```
Running rake db:migrate attached to terminal... up, run.1
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/01/04/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/01/04/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
rake aborted!
syntax error on line 7, col 11: `' 
```

这看起来应该很容易修复。问题是，我没有任何插件！

**长话短说：**我正准备重新部署 Rails 应用程序以进行登台。这是 Heroku 上的 Rails 3.0 应用程序，我刚刚完成了一次重大升级，包括升级到 Rails 3.2、Ruby 1.9.2、删除插件和重大重写。我现在正在尝试推送到 Heroku 的雪松堆栈以进行更多测试。

几天来，我一直在努力解决这个问题，并一直认为我正在取得进展，但随后感到失望。最近，我认为我的 git 存储库没有对齐，并且 Heroku 远程包含这些插件的旧提交。我不再认为是这种情况。（我确实想检查一下，但由于这个错误，我无法进入 Heroku 控制台来验证文件结构）。

确认一下，我的本地 master 和远程 github repo 上的 vendor/plugins 文件夹肯定是空的。它在远程 Heroku 分支上应该是空的，因为我已经推送了所有更新（我什至用新的远程名称创建了一个完全空白的应用程序来测试，但得到了同样的错误）。我说供应商/插件是空的，但实际上供应商/插件不存在，在我删除其中的插件后已被完全删除。

在早期版本中，我确实在应用程序中安装了两个插件：HABTM 复选框和 fancybox-rails。这些都已被卸载`rails plugin remove <<plugin name>>`。

我检查了错误中引用的文件`/app/rakefile:7`，但看不出这行有什么问题`MyApp::Application.load_tasks`。

如果我尝试启动 heroku 控制台，错误会略有不同，并且引用`/app/config/environment.rb:5)`. 我这里也看不到任何东西`MyApp::Application.initialize!`

我已经通过所有可能的地方寻找这些插件或旧`require`语句的任何残余，但一无所获。

我真的很感激任何关于我可以在哪里看的想法。如果需要，我可以提供更多信息，我只是不确定现阶段有什么用处！！

谢谢你帮我留头发！！

编辑

我正在添加错误中提到的 rakefile 的全部内容。我看不出这有什么问题。

```
# Add your own tasks in files placed in lib/tasks ending in .rake,
# for example lib/tasks/capistrano.rake, and they will automatically be available to Rake.

require File.expand_path('../config/application', __FILE__)
require 'rake'

MyApp::Application.load_tasks 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T03:50:55.743

经过大量的拉扯和挫败后，我终于在日志中找到了以下条目

```
/usr/local/lib/ruby/1.9.1/syck.rb:135:in `load': syntax error on line 7, col 11: `' (ArgumentError) 
```

syck.rb 解析 yaml 文件，我发现我有一个（小）问题，yaml 文件省略了一些特定于环境的信息。

有关更多详细信息，请参阅[此 SO question](https://stackoverflow.com/questions/10366009/heroku-logs-show-syntax-error-in-syck-rb-how-to-resolve-this/10369500#10369500)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T14:26:23.067

插件弃用警告来自 Heroku 在构建时注入到您的应用程序中的插件，因此它可以在平台上正常运行。这些可以忽略。

问题的症结似乎与源/rake 文件中的语法错误有关。这是重要的输出：

```
rake aborted!
syntax error on line 7, col 11: `' 
```

查看错误源自文件的第 7 行（发布堆栈跟踪的其余部分以供我们参考？），您会发现某种需要修复的语法错误。

如果您想清楚地区分插件加载和应用加载时间，您可以使用它`heroku run bash`来加载 shell，然后运行 ​​rake 任务以查看其输出被隔离：

```
$ heroku run bash
> bundle exec rake db:migrate 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T09:16:09.473

我在某处读到 heroku 使用插件来自动化一些任务......所以这不是你的错

如果您想消除弃用警告，请使用以下小片段：

```
# Load the rails application
require File.expand_path('../application', __FILE__)

# Initialize the rails application
ActiveSupport::Deprecation.silence do
  Selfcare::Application.initialize!
end 
```

# silverlight - ListBox WP7中的预加载器/进度条

> ID：10294830
> 
> 赞同：1
> 
> 时间：2012-04-24T09:02:08.957
> 
> 标签：silverlight, windows-phone-7, xaml, progress-bar

我想向 ListBox 添加一个预加载器，我已经向整个枢轴控件添加了一个预加载器，但我只为一个列表框显示它（我为每个枢轴页都有一个列表框）我希望为每个列表框创建单独的预加载器，有人做过吗？

我目前有一个预加载器控件，显示加载文本和进度条有什么方法可以将进度条附加到列表框，并显示它直到从 web 服务加载数据（对于每个不同的列表框）？

这是我当前的预加载器：

![](../Images/5dd59bd3ac5262e3f00d8011ae66aa18.png)

我在 xaml 中的列表的代码预览

```
<telerikPrimitives:RadDataBoundListBox HorizontalAlignment="Left" Margin="4,0,0,0" Name="listNearbyBusinesses" IsAsyncBalanceEnabled="True" AsyncBalanceMode="FillViewportFirst" SelectionChanged="listNearbyBusinesses_SelectionChanged" Height="535" VerticalAlignment="Top" Grid.RowSpan="2" Grid.ColumnSpan="2">
    <telerikPrimitives:RadDataBoundListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <Image Width="100" Height="100" x:Name="m_Image" Source="{Binding Image}"/>
                <StackPanel>

                    <TextBlock Text="{Binding Name}" TextWrapping="Wrap" Style="{StaticResource PhoneTextExtraLargeStyle}" />
                    <TextBlock Text="{Binding Type}" TextWrapping="Wrap" Margin="12,-6,12,0" Style="{StaticResource PhoneTextSubtleStyle}" />
                    <telerikInput:RadRating  IsReadOnly="True" Value="{Binding Rating}" Margin="12" ItemShapeHeight="20" ItemShapeWidth="20" />
                </StackPanel>
            </StackPanel>
        </DataTemplate>
    </telerikPrimitives:RadDataBoundListBox.ItemTemplate>
</telerikPrimitives:RadDataBoundListBox> 
```

# restkit - Restkit 10.0：新功能

> ID：10294831
> 
> 赞同：4
> 
> 时间：2012-04-24T09:02:11.357
> 
> 标签：restkit

RestKit 版本有什么新功能？我应该更新吗？变更记录在哪里？

我在以下几个新闻频道上找不到任何信息：网站、github、twitter、google 群组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:46:10.383

[这是在github上。](https://github.com/RestKit/RestKit/wiki/Upgrading-from-0.9.3-to-0.10.0) 并笼统地描述了这些变化。

我建议如果您正在积极开发中，您应该升级，如果您正在维护某些东西并且对 Restkit 没有任何问题，我会保持原样，直到您能够使用新版本进行全面测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T11:36:35.857

[http://restkit.org/api/](http://restkit.org/api/)这个页面会给你API文档。 [https://github.com/RestKit/RestKit/wiki/Upgrading-from-v0.10.x-to-v0.20.0](https://github.com/RestKit/RestKit/wiki/Upgrading-from-v0.10.x-to-v0.20.0) - 从 v0.10.x 升级到 v0.20.0

# javascript - 如何在 chrome 开发人员工具中实时查看数据属性值？

> ID：10294832
> 
> 赞同：20
> 
> 时间：2012-04-24T09:02:11.807
> 
> 标签：javascript, jquery

我想在开发人员工具中探索 DOM 时查看这些值。如果可能的话，还可以查看绑定到元素 javascript 的内容。这是否可以使用一些插件或者我将如何去做？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-24T09:16:01.657

元素上可以看到数据属性：http: [//cl.ly/0w3V2H311E21241J2j45](http://cl.ly/0w3V2H311E21241J2j45)

如果您使用的是 jQuerys `.data()`，它不会更改元素的数据属性，因此您必须调用`.data()`它才能看到它。我不知道有任何插件允许您在 DOM 资源管理器中查看它。

通过单击元素可以在右侧找到事件侦听器。向下滚动到 CSS 规则的底部，您将看到一个名为“事件侦听器”的部分： http: [//cl.ly/2f3c3z312c3D2w43321s](http://cl.ly/2f3c3z312c3D2w43321s)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-30T22:14:00.327

抱歉，您只能使用 Chrome 开发者工具。

然而，对于其他可以使用 Firefox 的人来说，知道 Firebug 有一个很棒的扩展可能会很有用：[FireQuery](http://firequery.binaryage.com/)，它完全按照您的要求做，还有其他好东西。

![火查询截图](../Images/af2e6c2e5073ccc1a11349014a4506f1.png)

# javascript - 将 JS 放在文档头部是否有正当理由？

> ID：10294835
> 
> 赞同：2
> 
> 时间：2012-04-24T09:02:33.687
> 
> 标签：javascript, html, caching, html-head

我的意思是：我知道只有来自 .js 文件的 JS 才会被缓存。还有，我90%的函数必须在页面（html）加载（渲染）的时候渲染，所以最好在关闭body标签之前放JS。（这也阻止了使用文档 .ready(); 并且页面本身的加载会更快）。

那么，将 JS 放在`<head></head>`. 期待代码的“顺序”，老实说，我不太介意......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T09:14:02.050

在部分内放置`<script src>`标签`<head>`是有意义的——在语义上。它确实会阻止浏览器在加载脚本之前呈现任何内容，但确保在您的代码的其余部分（例如，在正文中）中有一个对象（例如 jQuery）可用。

一种常见的做法是在 head 部分加载轻量级脚本加载库（[HeadJs](http://headjs.com/)、[LABjs](http://labjs.com/)等），然后懒惰地和/或按需加载*重的东西。*

话虽如此，HTML5 引入了`async`script 标签的属性并重新引入了该`defer`属性（[docs](http://dev.w3.org/html5/spec/the-script-element.html#attr-script-async)）。因此，您现在有一个非常好的和正当的理由将`<script src>`标签放在 head 部分中，因为：

1.  这说得通
2.  页面完成加载*后*脚本仍会加载

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T09:35:17.610

`<script>`标签导致两个问题：

1.  在加载脚本之前，脚本下方的所有内容都不会呈现。
2.  在脚本完成之前，脚本下方的所有组件都不会开始下载。

如果您需要在渲染任何内容之前执行一些 JavaScript，那么将其放入`<head>`唯一真的很有意义。

因此，将它放在页面中尽可能低的位置会带来更好的用户体验。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T09:05:32.440

该`<head>`部分中的元素的重要一点是它们在`<body>`开始加载之前被加载。

这是一个非常有效的功能，被大量使用（IMO）。

加载 DOM 之前必须运行的库、脚本必须在`<head>`部分中完成。

* * *

> *我给你一个场景*

想象一下，您需要计算屏幕总大小的 30% 大小并将其分配给里面的元素。

等待元素加载大，然后运行脚本重新加载调整它是愚蠢的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T09:06:07.840

将它放在标题中稍微语义化一些，但它通常没有任何优势。有时这是必要的——例如，使用 JavaScript 加载字体（使用 Google Webfonts 之类的东西）必须在标题中完成，否则页面将使用错误的字体呈现然后更改，这对用户来说看起来不太好。

# jquery-mobile - jQuery mobile 通过脚本更改选择值失败（没有任何反应）

> ID：10294836
> 
> 赞同：0
> 
> 时间：2012-04-24T09:02:41.557
> 
> 标签：jquery-mobile

我拼命地尝试在 pageshow 中更改选择的选项值，但它什么也没做。我不知道怎么改

```
<select name="sliderAutoConnect" id="sliderAutoConnect" data-role="slider">
      <option value="1">Off</option>
      <option value="2">On</option>
</select> 
```

和脚本：

```
$("#sliderAutoConnect option[value=2]").attr('selected', 'selected');
$('#sliderAutoConnect').selectmenu('refresh'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:23:28.873

您需要刷新滑块小部件而不是选择菜单。试试这个：

```
$('#sliderAutoConnect').slider('refresh'); 
```

当我测试它时，其他一切都对我有用。我只是改变了那一行。

# javascript - 在网页上关闭打印预览后，关闭窗口的Javascript功能在IE上无法正常工作

> ID：10294838
> 
> 赞同：2
> 
> 时间：2012-04-24T09:02:48.347
> 
> 标签：javascript, internet-explorer-7, print-preview

当我的大脑融化时，我在工作日结束时发布了这个问题。请帮助我。
我有一个网页，从事件处理程序调用 JavaScript 函数。JavaScript 函数用于关闭窗口。
像这样：

```
<HTML>
<HEAD>
<SCRIPT LANGUAGE="JavaScript">
function closeWin() {
    window.opener = null;
    window.close();
}
</SCRIPT>
</HEAD>
<BODY>
<FORM>
    <INPUT TYPE="button" VALUE="Close Me" 
    onClick="closeWin()">
</FORM>
</BODY>
</HTML> 
```

**此网页需要在 Internet Explorer 中运行（我使用 IE7）。**
当我单击“关闭我”按钮时，窗口将关闭。
我的问题是-
（1）右键单击页面并选择打印预览...（将显示打印预览页面）
（2）通过单击关闭（x）按钮关闭打印预览页面
（3）然后点击“关闭我”按钮，窗口不会关闭。
所以，我不知道如何解决这个问题，以便在查看打印预览后通过“关闭我”按钮正确关闭网页？

在步骤 (2) -
(2) 通过键盘上的退出键 ( Esc ) 关闭打印预览页
(3) 然后单击“关闭我”按钮，窗口将正常关闭。

我是 JavaScript 的初学者，我不太了解这个问题是如何发生的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T04:23:46.567

这将打开预览窗口并打印对话框

```
<script type="text/javascript"><!–
function ClickHereToPrint(){
try{
var oIframe = document.getElementById('ifrmPrint');
var oContent = document.getElementById('divToPrint').innerHTML;
var oDoc = (oIframe.contentWindow || oIframe.contentDocument);
if (oDoc.document) oDoc = oDoc.document;
oDoc.write("<head><title>title</title>");
oDoc.write("</head><body onload='this.focus(); this.print();'>");
oDoc.write(oContent + "</body>");
oDoc.close();
}
catch(e){
self.print();
}
}
// –&gt;</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T14:48:47.683

这是 IE 7、8 和 9 中的一个已知错误。请参阅[此](http://answers.microsoft.com/en-us/ie/forum/ie8-windows_xp/windowclose-after-print-preview-on-ie8/07c15a4b-6f55-e011-8dfc-68b599b31bf5?msgId=ceaed9ee-f556-e011-8dfc-68b599b31bf5.)

# nullpointerexception - IceFaces 3.0 java.lang.NullPointerException org.icefaces.impl.application.ExtendedExceptionHandler.handle

> ID：10294840
> 
> 赞同：-1
> 
> 时间：2012-04-24T09:02:48.860
> 
> 标签：nullpointerexception, icefaces

在 Netbean 7.1.1 和 Tomcat 7.0 下运行 IceFaces 3.0 时出现以下异常。

java.lang.NullPointerException org.icefaces.impl.application.ExtendedExceptionHandler.handle(ExtendedExceptionHandler.java:80) com.sun.faces.lifecycle.Phase.doPhase(Phase.java:119) com.sun.faces.lifecycle.LifecycleImpl .render(LifecycleImpl.java:139) javax.faces.webapp.FacesServlet.service(FacesServlet.java:410) org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)

一个简单的 panelPopup 用于显示一些信息。代码如下

```
 <f:facet name="body">
                <ice:panelGrid width="100%" cellpadding="0" cellspacing="0" column="1">
                    <ice:outputText value="Here is an example of placing outputText inside a draggable panelPopup."/>
                    <ice:outputText value="Of course other components could be used as well."/>
                </ice:panelGrid>
            </f:facet>
        </ice:panelPopup>
    </ice:form> 
```

我无法找出真正的问题在哪里。请帮助其他人提供解决方案，非常紧急。

问候拉梅什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T15:35:26.523

我之前已经看到 HttpMonitor 会导致问题，因此当您从 NetBeans 运行时尝试将其关闭可能是值得的。查看源代码，它似乎找不到表明请求不在 JSF 上下文中的 FacesContext 实例。可能需要更多关于错误何时以及如何发生的信息，以提供更好的指导。

# javascript - 时间戳解析在 IE 中不起作用

> ID：10294845
> 
> 赞同：1
> 
> 时间：2012-04-24T09:02:59.257
> 
> 标签：javascript, datetime

我有以下格式的时间戳：

[yyyy-MM-ddThh:mm:ssZ]（例如：2015-05-15T03:34:17Z）

我想将此时间戳解析为日期，格式如下：[Fri May 15 2015 09:04:17 GMT +5:30]：

现在，我使用以下代码进行解析，它在 Firefox 3.6+ 浏览器中运行良好。但问题是，**它在 Internet Explorer (IE) 8 中不起作用，在 IE 中它返回 'NaN'**。

## 我的 Javascript 代码是：

```
var myDate = new Date(timestampDate); 
//In Firefox i get myDate as Date object and i can get day, month and year. But in IE this myDate value is coming as NaN

var day = myDate.getDate();
var month = myDate.getMonth();
var year = myDate.getFullYear(); 
```

任何帮助都会得到回报。请给我一个解决方案，让它在 IE 中也能正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:13:17.727

`yyyy-MM-ddThh:mm:ssZ`是一个[ISO 日期](http://en.wikipedia.org/wiki/ISO_8601)。浏览器不能很好地支持它们，例如 FireFox 不解析`2015-05-15T03:34:17+01`。

在创建日期之前，您必须手动从字符串中提取元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T13:24:51.693

```
(function(){
    //if the browser correctly parses the test string, use its native method.
    var D= new Date('2011-06-02T09:34:29+02:00');

    if(D && +D=== 1307000069000) Date.fromISO= function(s){
        return new Date(s);
    };
     Date.fromISO= function(s){
        var day, tz,
        rx=/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*)?)([zZ]|([+\-])(\d\d):(\d\d))?$/,
        p= rx.exec(s) || [];
        if(p[1]){
            //extract the y-m-d h:m:s.ms digits:
            day= p[1].split(/\D/);
            for(var i= 0, L= day.length; i<L; i++){
                day[i]= parseInt(day[i], 10) || 0;
            };
            day[1]-= 1; //adjust month
            //create the GMT date:
            day= new Date(Date.UTC.apply(Date, day));
            if(!day.getDate()) return NaN;
            if(p[5]){
                // adjust for the timezone, if any:
                tz= (parseInt(p[5], 10)*60);
                if(p[6]) tz+= parseInt(p[6], 10);
                if(p[4]== '+') tz*= -1;
                if(tz) day.setUTCMinutes(day.getUTCMinutes()+ tz);
            }
            return day;
        }
        return NaN;
    }
})(); 
```

//**测试警报(Date.fromISO("2015-05-15T03:34:17Z").toUTCString())**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-23T14:04:29.560

我有同样的问题，发现这个，假设你使用 jQuery UI：

```
$.datepicker.parseDate('yy-mm-dd', '2014-02-14'); 
```

这是 UI Datepicker 的一个有用方法。我正要编写自己的日期解析器以使我的代码独立于 jqui，但它可能对其他人有所帮助，所以我将这个答案留在这里。

# sql - 将两张表合二为一

> ID：10294846
> 
> 赞同：2
> 
> 时间：2012-04-24T09:03:00.233
> 
> 标签：sql, sql-server-2012

我在 MSSQL Server 2012 中有两张表，想将它们合并到一张新表中。它们由列 messageID 链接。第一个表（*Message*）有

```
messageID
sender
date 
```

第二个表（*收件人信息*）有

```
messageID
recipient 
```

主要问题是在*Message*中 messageID 是主键，因此是唯一的。在*recipientInfo*中，messageID 不是唯一的（因为一封邮件可以有多个收件人）。我想要一张新桌子

*   每条消息一行，收件人在一列中串联
*   每条消息多行，当有多个收件人时（每行一个收件人）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T09:12:19.073

也许是这样的（如果您使用的是 MSSQL 2005+）：

```
CREATE TABLE NewTable
(
    messageID INT,
    sender VARCHAR(100),
    recipient VARCHAR(MAX),
    date DATETIME
)
INSERT INTO NewTable(messageID,sender,recipient,date)
SELECT
    [Message].messageID,
    [Message].sender,
    STUFF
    (
        (
            SELECT 
                ',' +recipient
            FROM
                recipientInfo
            WHERE
                recipientInfo.messageID=[Message].messageID
            FOR XML PATH('')
        )
    ,1,1,'') AS recipient,
    [Message].date
FROM
    [Message] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T09:06:00.213

您想创建一个视图并将现有表保留在那里吗？或者您想永久合并这两个表？

```
SELECT m.messageID, m.sender, m.date, r.recipient
INTO New_Table
FROM Message m LEFT OUTER JOIN
recipientinfo r on m.messageID = r.messageID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T09:06:35.780

```
select msg.messageID, msg.sender, rep.recipient, msg.date 
from Message msg 
left outer join recipientInfo rep on msg.messageID = rep.messageID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T09:22:42.010

你可能需要在这里整理拼写

```
 select sender,date,( select recipient+chr(10) from receipientInfo as r where r.messageid = m.messageid order by r.recipient FOR XML PATH ('')) as receipents from message as m 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-24T09:12:13.707

你可以合并这两个表

[https://www.simple-talk.com/sql/t-sql-programming/concatenating-row-values-in-transact-sql/](https://www.simple-talk.com/sql/t-sql-programming/concatenating-row-values-in-transact-sql/)

这可能是更适合的事情，并且有更多的方法可以做到这一点

# ios - UITableView中的TextField resignFirstResponder

> ID：10294850
> 
> 赞同：2
> 
> 时间：2012-04-24T09:03:10.303
> 
> 标签：ios, xcode, uitableview, tableview

我有一个带有 CustomCells 的 UITableView，其中包含一个 TextField。看看我上传的图片。

[Picture1](http://i44.tinypic.com/amaxli.jpg) [Picture2](http://i39.tinypic.com/so3e45.jpg) 我希望如果我开始滚动键盘应该隐藏。

我试过了

```
 - (void) scrollViewWillBeginDragging:(UIScrollView *)scrollView
{
   NSLog(@"Got called");
   ProductTableCell *cell;
   [cell.mengeTextField  resignFirstResponder];

} 
```

控制台日志：

```
2012-04-24 12:57:48.924 Book-App[21029:15803] Got called
2012-04-24 12:57:50.535 Book-App[21029:15803] Got called
2012-04-24 12:57:51.681 Book-App[21029:15803] Got called 
```

但这对我不起作用。

还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:22:01.797

使用这种方法`tableView:willDisplayCell:forRowAtIndexPath:`这将解决你的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T20:08:25.980

你的问题就是 Arcank 所说的，单元格没有定义。

```
- (void) scrollViewWillBeginDragging:(UIScrollView *)scrollView
{
   NSLog(@"Got called");
   ProductTableCell *cell;// <---this cell is nil
   [cell.mengeTextField  resignFirstResponder];
} 
```

现在，如果您无法访问该单元格，则有一种作弊方法。只需将其他东西放在第一响应者中，然后立即辞职。

```
- (void) scrollViewWillBeginDragging:(UIScrollView *)scrollView
    {
       NSLog(@"Got called");
       [scrollView becomeFirstResponder];
       [scrollView resignFirstResponder];//You might not even need this (not sure)
    } 
```

这将解决您的问题。如果 scrollView 不能成为第一响应者，只需使用其他可以的东西。（凑合）。

* * *

编辑：只需阅读您和 Aalok Parikh 的评论，这几乎就是他想说的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T09:16:05.077

在您的代码中，单元格永远不会被设置。是零。所以 -resignFirstResponder 消息无效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T09:16:54.723

实现这个方法 - (void)textFieldDidEndEditing:(UITextField *)textField{ [textField resignFirstResponder]; }

# objective-c - 核心数据获取请求中需要谓词？

> ID：10294851
> 
> 赞同：2
> 
> 时间：2012-04-24T09:03:10.623
> 
> 标签：objective-c, ios, core-data, nsmanagedobject, nsfetchrequest

我想在 NSFetchRequest 中省略谓词，以便删除实体的所有托管对象。

但是，当没有谓词时（根据 SQL 调试器），不会执行 fetch 请求。根据 Apple 的说法，谓词应该是可选的。

我需要如何更改代码以删除谓词？有任何想法吗？谢谢！

```
- (void)deleteEntity:(NSString*)entityName inContext:(NSManagedObjectContext *)context
    {  
        NSFetchRequest * request= [[NSFetchRequest alloc] init];
        [request setEntity:[NSEntityDescription entityForName:@"TableStructure" inManagedObjectContext:context]];
        //[entities setIncludesPropertyValues:NO]; //only fetch the managedObjectID
        NSPredicate * predicate = [NSPredicate predicateWithFormat:@"category = 'est'"];
        [request setPredicate:predicate];

    NSError *error = nil;
    NSArray *entitiesArray = [context executeFetchRequest:request error:&error];

    if (error) {
        NSLog(@"%@: Error fetching context: %@", [self class], [error localizedDescription]);
        NSLog(@"entitiesArray: %@",entitiesArray);
        return;
    }

    for(NSManagedObject *entity in entitiesArray) {
        [context deleteObject:entity];
    }

    NSError *saveError = nil;
    [context save:&saveError];
} 
```

## 更新 2

似乎我在数据库准备好之前调用了我的 fetch 请求。如何确保在核心数据数据库准备好之前不调用我的请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:49:46.007

如果您不想要它，您根本不分配谓词。删除以下行：

```
NSPredicate * predicate = [NSPredicate predicateWithFormat:@"category = 'est'"];
[request setPredicate:predicate]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T11:21:26.280

我在 Core Data 数据库准备好之前发出了我的 fetch 请求。

为了解决这个问题，我现在添加了`ImportFormulasInRequest`对 UIDocument openWithCompletion 处理程序的调用，它封装了我的核心数据数据库：

```
- (void)useDocument
{
    if (![[NSFileManager defaultManager] fileExistsAtPath:[self.myDatabase.fileURL path]]) {
        // does not exist on disk, so create it
        [self.myDatabase saveToURL:self.myDatabase.fileURL forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success) {
            [self setupFetchedResultsController];
        }];
    } else if (self.myDatabase.documentState == UIDocumentStateClosed) {
        // exists on disk, but we need to open it
        [self.myDatabase openWithCompletionHandler:^(BOOL success) {
            [self setupFetchedResultsController];
            [self ImportFormulasInContext:[self.myDatabase managedObjectContext]];
        }];
    } else if (self.myDatabase.documentState == UIDocumentStateNormal) {
        // already open and ready to use
        [self setupFetchedResultsController];
        [self ImportFormulasInContext:[self.myDatabase managedObjectContext]];
    }
} 
```

# php - 使用舷窗的跨域 javascript 调用在 Firefox 中不起作用

> ID：10294852
> 
> 赞同：0
> 
> 时间：2012-04-24T09:03:13.307
> 
> 标签：php, javascript

我有一个网站（**abc.com**），其中在 facebox 中打开了 iframe（**efg.com**）。我使用 porthole 来执行 java-script 跨域脚本，但这在 chrome 中运行良好，但在 firefox 和IE浏览器。

有没有其他方法可以使用 javascript 在跨域环境中发送消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:08:05.160

尝试 Apache url 重写

[http://httpd.apache.org/docs/2.0/misc/rewriteguide.html](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-23T11:30:04.307

我在使用 porthole 时也遇到了同样的问题，我无法将消息事件从子 iframe 发送到 firefox 和 IE 上的父页面，问题是我的 iframe 代码没有名称属性只有 id，所以我添加了一个名称属性到我的iframe 和中提琴！它现在可以在 Firefox 和 IE 上运行了！

请确保您的 iframe 将具有名称和 ID。:)

# java - 序列化相同的对象并观察不同的结果

> ID：10294854
> 
> 赞同：0
> 
> 时间：2012-04-24T09:03:16.670
> 
> 标签：java, memory, serialization

我想知道为什么当我使用 table 序列化内存中的**同一个对象时：**

```
ByteArrayOutputStream byteOutput = new ByteArrayOutputStream();
        ObjectOutputStream stream = new ObjectOutputStream(byteOutput);
stream.writeObject(m.view()); //view return a string

        stream.flush();
        stream.close();
        byteOutput.flush();
        byteOutput.close(); 
```

我多次运行我的程序，我得到不同的结果（差别不大，但仍然不同）

```
execution 1 :4497
execution 3 :4500
execution 4 :4500
execution 5 :4494 
```

m : 是一个包含其他类的另一个对象的对象。我不能在这里列出所有类，它是一个大框架，`string`序列化是一样的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:14:51.250

假设您的对象`m`来自您的代码，您似乎有不同的状态 ( `overhead`)。由于序列化是递归的，因此不仅您的对象，而且它包含的所有其他对象都必须相同。

请发布更多信息`m`及其连接以`overhead`获得更全面的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:55:40.380

*您的执行之间*有些不同，例如，您是否使用对象中的当前时间？

您可以向我们展示更多上下文，或者尝试自己找出不同之处，但只要您说没有什么不同，但结果您找不到解释...

尽量减少问题，你说 m.view() 总是产生相同的结果，你怎么知道？如果它总是返回相同的结果，将结果硬编码在一个字符串中，并向我们展示相同的字符串序列化多次会给出不同的结果......

# xslt - 通过 XSLT 代码读取文本文件中的行数

> ID：10294855
> 
> 赞同：1
> 
> 时间：2012-04-24T09:03:21.737
> 
> 标签：xslt, c#-4.0

谁能告诉我如何使用 xslt 代码读取文本文件中的行数。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T16:10:45.890

**使用这个 XPath 1.0 表达式来计算字符串中的行数`$pText`**：

```
1 + string-length() - string-length(translate($pText, '&#xA;', '')) 
```

**下面是使用此 XPath 表达式的完整 XSLT 1.0 转换：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:param name="pText" select="/*"/>

 <xsl:template match="/*">
  <xsl:value-of select=
  "1 + string-length($pText) - string-length(translate($pText, '&#xA;', ''))"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<text>aaaaa
bbbbb
ccccc</text> 
```

**产生了想要的正确结果：**

```
3 
```

**请注意**：您必须阅读 C# 程序中的文本文件并将其文本作为参数传递给转换。

* * *

**二、XSLT 2.0 解决方案**

几乎相同，但在 XSLT 2.0 中可以使用其标准`unparsed-text()`函数来读取文本文件：

```
<xsl:stylesheet version="2.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:param name="pTextFileName" select="'file:///c:/temp/delete/delete.txt'"/>

 <xsl:template match="/*">
  <xsl:variable name="vText" select="unparsed-text($pTextFileName)"/>
  "<xsl:value-of select="$vText"/>"
  ===================
  <xsl:value-of select=
  "1 + string-length($vText) - string-length(translate($vText, '&#xA;', ''))"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于任何 XML 文档（未使用）时，如果文件 'c:/temp/delete/delete.txt' 包含：**

```
aaaaa
bbbbb
ccccc 
```

**产生了想要的正确结果**：

```
3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:34:49.577

**您可以轻松地使用 XSLT 2.0 处理器来做到这一点：**

使用任何文本文件尝试 XSL 文件，以 param 形式给出`textFile`。它会计算文件中的行数。

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:xd="http://www.oxygenxml.com/ns/doc/xsl"
    exclude-result-prefixes="xs xd"
    version="2.0">

    <xsl:output method="text"/>

    <xsl:param name="textFile">file:/c:/style.css</xsl:param>

    <xsl:template match="/">
        <xsl:text>Count of line in file&#x20;</xsl:text><xsl:value-of select="$textFile"></xsl:value-of>
        <xsl:text>is&#x20;</xsl:text><xsl:value-of select="$CountOfLines"/>
    </xsl:template>

    <xsl:variable name="CountOfLines">
        <xsl:value-of select="count(tokenize(unparsed-text(resolve-uri($textFile,base-uri())),'[\r\n]+'))"/>
    </xsl:variable>

</xsl:stylesheet> 
```

# json - GSON 未正确处理初始化的静态列表

> ID：10294857
> 
> 赞同：0
> 
> 时间：2012-04-24T09:03:25.347
> 
> 标签：json, arraylist, gson

如果我这样做：

```
public static volatile ArrayList<Process> processes = new ArrayList<Process>(){
    {
        add(new Process("News Workflow", "This is the workflow for the news segment", "image"));
    }
}; 
```

然后这个：

```
String jsonResponse = gson.toJson(processes); 
```

jsonResponse 为空。

但如果我这样做：

```
public static volatile ArrayList<Process> processes = new ArrayList<Process>();
processes.add(new Process("nam", "description", "image"));
String jsonResponse = gson.toJson(processes); 
```

Json 响应是：

```
[{"name":"nam","description":"description","image":"image"}] 
```

这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T12:18:12.120

我不知道 Gson 有什么问题，但你知道，你在这里创建 ArrayList 的子类吗？

```
new ArrayList<Process>(){
    {
        add(new Process("News Workflow", "This is the workflow for the news segment", "image"));
    }
}; 
```

您可以通过以下方式检查

```
System.out.println( processes.getClass().getName() ); 
```

它不会打印`java.util.ArrayList`。

我认为您想使用静态初始化作为

```
public static volatile ArrayList<Process> processes = new ArrayList<Process>();
static {
    processes.add( new Process( "News Workflow", "This is the workflow for the news segment", "image" ) );
}; 
```

匿名类似乎有问题，同样的问题在这里

```
import com.google.gson.Gson;
import com.google.gson.GsonBuilder;

public class GSonAnonymTest {

    interface Holder {
        String get();
    }

    static Holder h = new Holder() {
        String s = "value";

        @Override
        public String get() {
            return s;
        }
    };

    public static void main( final String[] args ) {
        final GsonBuilder gb = new GsonBuilder();
        final Gson gson = gb.create();

        System.out.println( "h:" + gson.toJson( h ) );
        System.out.println( h.get() );
    }

} 
```

**UPD：**查看[Gson User Guide - Finer Points with Objects](https://sites.google.com/site/gson/gson-user-guide#TOC-Finer-Points-with-Objects)，最后一点“......匿名类和本地类被忽略且不包含在序列化或反序列化中......”

# java - 我在哪里可以看到 Maven 插件的默认执行计划？

> ID：10294861
> 
> 赞同：2
> 
> 时间：2012-04-24T09:03:50.760
> 
> 标签：java, maven, flexmojos

在我目前正在进行的一个项目中，我们使用 flexmojos-plugin 来编译一个小型 Flex 应用程序。该插件有各种配置，但没有配置目标，所以我想知道是什么让 Maven“知道”要执行的目标是什么？

该插件有[25 个目标](https://repository.sonatype.org/content/sites/maven-sites/flexmojos/3.8/plugin-info.html)，据我所知，它并没有全部运行。因此，我假设插件中必须有某种配置，说明默认执行哪些目标 - 某种默认执行。我查看[了 swf-compile Mojo 的源代码](http://www.jarvana.com/jarvana/view/org/sonatype/flexmojos/flexmojos-maven-plugin/4.0-pre-alpha-1/flexmojos-maven-plugin-4.0-pre-alpha-1-sources.jar!/org/sonatype/flexmojos/compiler/MxmlcMojo.java?format=ok)，我看不到任何类似“@default”注释的东西，那么它是在哪里配置的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:38:30.437

插件目标到生命周期阶段的实际映射来自包装类型，并在定义此包装的插件中​​提供（不包括 Maven 发行版提供的预定义包装，如`jar`等`ejb`）。

对于 Flexmojos，你可以在这里找到它：
[http ://www.jarvana.com/jarvana/view/org/sonatype/flexmojos/flexmojos-maven-plugin/4.0-pre-alpha-1/flexmojos-maven-plugin-4.0 -pre-alpha-1.jar!/META-INF/plexus/components.xml](http://www.jarvana.com/jarvana/view/org/sonatype/flexmojos/flexmojos-maven-plugin/4.0-pre-alpha-1/flexmojos-maven-plugin-4.0-pre-alpha-1.jar!/META-INF/plexus/components.xml)

该文件定义了 Plexus 的类型组件，`LifecycleMapping`为它自己的包装类型提供这些映射：`swc`、`swf`、`air`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T09:10:12.627

如果你进入一个特定的目标，你会看到该目标绑定到哪个生命周期阶段的文档页面。例如绑定到编译生命周期阶段的[https://repository.sonatype.org/content/sites/maven-sites/flexmojos/3.8/compile-swc-mojo.html 。](https://repository.sonatype.org/content/sites/maven-sites/flexmojos/3.8/compile-swc-mojo.html)在源代码中，您可以看到目标由**@phase**绑定到哪个生命周期阶段。

此外，如果您执行一个简单的 mvn clean package，您可以在运行期间在输出中看到目标。如下所示：

```
[INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ xsd --- 
```

# qt - QT嵌入式同时显示多国语言（中文、希伯来文、泰文）

> ID：10294863
> 
> 赞同：1
> 
> 时间：2012-04-24T09:03:52.773
> 
> 标签：qt, fonts, multilingual

我想显示多语言（英语、希伯来语、泰语、阿拉伯语、中文）作为选择列表，首先，我使用调试消息来显示支持系列，我不知道这是否是正确的查找方式支持字体，如果是错误的解决方案，请纠正我

```
/* output the support font */
QFontDatabase qfd ;
qDebug() << qfd.families(QFontDatabase::Hebrew);
qDebug() << qfd.families(QFontDatabase::Arabic);
qDebug() << qfd.families(QFontDatabase::Thai);
qDebug() << qfd.families(QFontDatabase::TraditionalChinese); 
```

得到调试消息后，我正在使用工具“makeqpf”创建 qpf2 文件发现一些关于插入替换 [QFont::insertSubstitution](http://qt-project.org/doc/qt-4.8/qfont.html#insertSubstitution) 和[QFont::insertSubstitutions](http://qt-project.org/doc/qt-4.8/qfont.html#insertSubstitutions)的 QFont 函数 ，我需要加载所有这些函数以显示正确的单词

> 其中 DejaVu Sans 用于 HEBREW、ARABIC 和 waree 用于泰语

这样，我可以显示中文、英文、希伯来文、阿拉伯文但不能显示泰文，

```
QFont font1("WenQuanYi Micro Hei [prerendered]",14,50,FALSE);
subs << "DejaVu Sans [prerendered]" << "Waree" ;
font1.insertSubstitutions("WenQuanYi Micro Hei [prerendered]", subs);
qApp->setFont(font1);

qDebug() << font1.family() ;
QStringList sl = font1.substitutions() ;
qDebug() << sl.isEmpty() ;
qDebug() << sl ;
qDebug() << font1.substitutes("WenQuanYi Micro Hei [prerendered]") ; 
```

我只是做另一个测试来改变字体系列

```
QFont font1("DejaVu Sans [prerendered]",14,50,FALSE);
subs << "WenQuanYi Micro Hei [prerendered]" << "Waree" ;
font1.insertSubstitutions("DejaVu Sans [prerendered]", subs);
qApp->setFont(font1); 
```

如果我先插入“DejaVu Sans”，当我打开多语言页面时，程序崩溃了，我猜是因为程序无法显示中文而崩溃，

我也尝试过独立阅读“泰语”字体“Waree”，如下所示

```
QFont font1("Waree",14,50,FALSE); 
```

这样，我可以在我的程序中看到“Thai”字体，但只有“Thai”，（希伯来语，阿拉伯语，繁体中文）都保持空白

最终目标是同时显示所有语言，所以我需要加载 waree 并正确显示，请帮助并感谢您的阅读！

任何回复将不胜感激！

# django-views - DJANGO simplejson

> ID：10294866
> 
> 赞同：0
> 
> 时间：2012-04-24T09:04:04.563
> 
> 标签：django-views

抱歉，我是 django 和 python 的初学者。我创建了一个项目，并且我有一个这样的 models.py：

```
from django.db import models

class Shoes(models.Model):
    type = models.CharField(max_length=30)
    start_date = models.DateTimeField() 
    number = models.IntegerField()
    def __unicode__(self):
        return str(self.id)
    class Meta:
        verbose_name_plural = "Shoes"

class Bottom(models.Model):
    type = models.CharField(max_length=30)
    finish = models.BooleanField()
    size = models.IntegerField()
    def __unicode__(self):
        return str(self.id)
    class Meta:
        verbose_name_plural = "Bottoms"

class Relation(models.Model):
    shoes = models.OneToOneField(Shoes)
    bottom = models.ForeignKey(Bottom)
    class Meta:
        verbose_name_plural = "Relations" 
```

我想在 json 中序列化这些类..对不起，我需要了解在哪里以及如何编写特定代码来执行它..我已经编写了一个文件 views.py 和一个 file.html 来查看带有这些对象表的网页，但是现在因为我需要编写一个 jquery 函数来允许在我添加新对象时自动更新网页，所以我认为我们需要在这样做之前序列化 json 中的数据。如果我说了一些愚蠢的话，谢谢并容忍我，因为我是这个领域的真正初学者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:14:22.940

你想序列化*类*吗？你想序列化对象！:) 为了序列化 Django 对象，您可以使用内置机制。读这个：

[https://docs.djangoproject.com/en/dev/topics/serialization/](https://docs.djangoproject.com/en/dev/topics/serialization/)

例如，您可以这样做：

```
from django.core import serializers
from django.http import HttpResponse

def someView(request):
    shoes_from_db = Shoes.objects.all()
    json = serializers.serialize(
             'json', shoes_from_db, fields=('type','start_date', 'number')
           )
    return HttpResponse(json, content_type="application/json") 
```

# asp.net - 不能对 DataRows 的 IEnumerable 进行数据绑定？异常？

> ID：10294867
> 
> 赞同：4
> 
> 时间：2012-04-24T09:04:06.550
> 
> 标签：asp.net, data-binding, ienumerable

我有一个返回 DataTable 的函数，我可以将它数据绑定到 DropDownlist 或 Repeater 就好了。但是，如果我对 DataTable 的 DataRows 的 IEnumerable 进行数据绑定，则会收到 HttpException：“DataBinding：'System.Data.DataRow' 不包含名为 'some_column' 的属性”。

```
repeater.DataSource = ThisReturnsDataTable();  // Works fine
repeater.DataSource = ThisReturnsDataTable.AsEnumerable();  // HttpException 
```

为什么是这样？

我不是在寻找解决问题的方法，例如：

```
repeater.DataSource = ThisReturnsDataTable().AsEnumerable().Select(
    x => new {some_column = x["some_column"]}); 
```

我只是想知道为什么使用 DataRows 的 IEnumerable 的数据绑定会失败。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-24T09:42:52.240

[我在这里](http://blog.slaks.net/2011/01/binding-to-lists-of-datarows.html)找到了一个很好的解释，尽管他对问题的第一个解决方案`AsDataView()`似乎不起作用/不存在（至少在 3.5 中）。`CopyToDataTable()`不过，工作得很好。

> .Net DataTables 在编写数据驱动的应用程序时非常有用。但是，它们有一个限制：没有明显的方法可以将网格（或其他控件）数据绑定到表中的任意数据行列表。您可以通过将 DataSource 设置为 DataTable 本身来直接绑定到整个表，也可以通过使用过滤器创建 DataView 来绑定到表的子集。
> 
> 通常，您不能绑定到 IEnumerable（例如，LINQ 查询）；数据绑定基础结构只能处理 IList（非泛型）或 IListSource。这适用于任何类型的数据源。因此，要绑定到任何 LINQ 查询，您需要调用 .ToList()。（或 .ToArray()）
> 
> 但是，当绑定到 DataTable 时，您甚至不能使用 List。如果您尝试，您将获得四列（RowError、RowState、Table 和 HasErrors）并且没有有用的信息。发生这种情况是因为 List 没有告诉数据绑定基础结构有关 DataRows 的特殊属性。要理解这个问题，需要一些背景知识
> 
> 数据绑定由 ListBindingHelper 和 TypeDescriptor 类控制。绑定到列表时，会调用 ListBindingHelper.GetListItemProperties 方法来获取列表中的列。如果列表实现了 ITypedList 接口，则调用其 GetItemProperties 方法。否则，它将使用 TypeDescriptor 来获取列表中第一项的属性。（这使用反射）
> 
> DataView 类（DataTable 也通过它绑定，使用 IListSource）实现 ITypedList 并返回显示表中列的 DataColumnPropertyDescriptors。这就是您可以绑定到 DataView 或 DataTable 并查看列的原因。但是，当您绑定到列表时，没有可以将列作为属性返回的 ITypedList。因此，它依靠反射并显示 DataRow 类的物理属性。
> 
> 要解决此问题，您需要将列表包装在 DataView 中，以便您可以利用其 ITypedList 实现。您可以使用 AsDataView() 方法来做到这一点。此方法仅适用于 DataTable 和 EnumerableRowCollection 类；它不能在任意 LINQ 查询上调用。您只能通过从 DataTable 调用特殊版本的 Cast、OrderBy、Where 和 Select 方法来获取 EnumerableRowCollection。
> 
> 因此，您可以通过对查询调用 AsDataView() 来将数据绑定到简单的 LINQ 查询。要绑定到列表或更复杂的查询，您可以使用丑陋的 hack：
> 
> ```
>  List<DataRow> list = ...; 
>     grid.DataSource = datatable.AsEnumerable()
>                    .Where(list.Contains)
>                    .AsDataView(); 
> ```
> 
> 类型化数据集不需要 AsEnumerable() 调用。
> 
> 您还可以调用 CopyToDataTable()，它将在任意 IEnumerable 上工作 [*原文如此]。*但是，它会生成行的深层副本，因此如果您希望用户更新数据，或者如果您希望用户查看（在代码中）对原始数据行所做的更改，则它没有帮助。

来自：http: [//blog.slaks.net/2011/01/binding-to-lists-of-datarows.html](http://blog.slaks.net/2011/01/binding-to-lists-of-datarows.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T17:40:54.993

我可能是错的，但我相信`.Where`你应该能够做这样的事情，而不是做这个条款：

```
DirectCast([datatable].AsEnumerable, EnumerableRowCollection(Of DataRow)).AsDataView() 
```

# javascript - 固定位置滚动和滚动条内的快速点击按钮元素

> ID：10294869
> 
> 赞同：2
> 
> 时间：2012-04-24T09:04:09.913
> 
> 标签：javascript, position, touch, fixed, web-applications

我正在为 iPad 制作一个小网络应用程序作为个人项目。它有两个 iScroll ( [http://cubiq.org/iscroll-4](http://cubiq.org/iscroll-4) ) 滚动条和里面的 div 列表。

我最初使用单个 ontouchstart 侦听器来选择行，但即使在滑动滚动时也会选择行。所以后来我添加了ontouchmove（设置一个标志来停止ontouchend中的事件触发）和ontouchend。但我仍然有未解决的问题：

*   点击停止动量滚动将选择行，
*   在滚动条内的行元素上实现“fastClick”（[https://github.com/alexblack/google-fastbutton](https://github.com/alexblack/google-fastbutton)）会禁用滚动。

关于在哪里实施/修复这些的任何帮助都会很棒。提前致谢。

编辑：我还试图弄清楚如何在 touchmove 之前触发 touchstart 事件时阻止 fastClick 触发事件。这意味着即使最终触摸坐标在“按钮”区域之外的位置，事件也会触发。

# php - Symfony 执行 Action 并停留在页面上

> ID：10294885
> 
> 赞同：1
> 
> 时间：2012-04-24T09:05:39.587
> 
> 标签：php, symfony1

我想执行一个动作并保持在同一页面上。

我创建了指向 eh 操作的链接，如下所示：

```
<?php  echo(link_to('Add to Watchlist', 'housing/addToWatchlist')) ?> 
```

它通过重定向执行此操作

```
echo('ADDING TO THA WATCHLIST');
$referrer = $request->getReferer();
return $this->redirect($referrer); 
```

如此处建议：[symfony 链接以更改语言并留在页面上](https://stackoverflow.com/questions/5343217/symfony-link-to-change-language-and-stay-on-the-page)

此解决方案有效，但不必要地重新加载页面，这可能需要更改语言而不是将项目添加到监视列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:08:37.873

无需重新加载页面，您需要使用 Javascript 和 Ajax 方法。 [http://www.symfony-project.org/jobeet/1_4/Propel/en/18](http://www.symfony-project.org/jobeet/1_4/Propel/en/18)

也检查出来`link_to_remote`。

# algorithm - 大规模元胞自动机是如何模拟的？

> ID：10294889
> 
> 赞同：3
> 
> 时间：2012-04-24T09:05:49.170
> 
> 标签：algorithm, cellular-automata

以 Minecraft 中的红石为例 - 它基本上是一个 15 状态元胞自动机，具有以下基本规则：

```
Redstone -> Redstone, powered of level Max(neighbours)-1 
```

以及各种连接元素的附加规则

```
Repeater, inactive -> Repeater, active, level 2 if its input is powered
Repeater, active, level 2 -> Repeater, active, level 1
Repeater, active, level 1 -> Repeater, inactive
Redstone, unpowered -> Redstone, powered if there is a neighbouring Repeater, level 1 or another source 
```

（我已经写了更多关于如何使用 CA 实现 Minecraft 的东西：http: [//madflame991.blogspot.com/2011/10/cellular-automata-in-minecraft.html](http://madflame991.blogspot.com/2011/10/cellular-automata-in-minecraft.html)）

**现在，我的问题是：游戏将如何更新巨大的红石装置？它使用什么数据结构？它真的是作为元胞自动机实现的吗？如果不是，那么您的最佳猜测是什么？**

PS 我不是要任何人看一下实际的源代码，只是想推测一下这个技术是如何实现的。...我在这里发布这个，在 SO 上，而不是在 gamedev 上，因为这是一个 CA 问题，而不是一个与 gamedev 相关的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-20T14:16:53.437

另一种模拟[令人难以置信的大规模元胞自动机](https://www.youtube.com/watch?v=My8AsV7bA94)（例如[Game of Life 中的 Game of Life](https://www.youtube.com/watch?v=xP5-iIeKXE8)）的可能方法是检测模式（滑翔机、滑翔机发电机等）并预测它们的未来演变并仅计算未知的部分（滑翔机进化）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T04:23:44.227

显而易见的方法是将世界划分为多个块（嘿，我的世界已经这样做了！）并将每个块分配给一个服务器。每个服务器负责处理对该块的更新，并负责与负责相邻块的服务器通信，向它们传播状态。

在像这样的元胞自动机的情况下，每个块必须将其边缘单元的当前状态传达给所有相邻的块，反之亦然，然后才能增加时间步长。请注意，通信开销随着块的增大而减少，因为块区域随着 O(n^2) 的增长而增长，而周长仅随着 O(n) 的增长而增长。

实际上，我怀疑你会发现它几乎没有那么同步，并且每个块异步模拟其中的红石，仅在事件发生时将更新传输到相邻块，并且不尝试与其他人保持同步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-02T14:26:53.007

Hashlife ( [1](https://en.wikipedia.org/wiki/Hashlife) ) 可以通过在非常大的空间上加速计算来满足您的需求。

# android - 无需手机即可访问 Whatsapp 功能

> ID：10294891
> 
> 赞同：-3
> 
> 时间：2012-04-24T09:05:51.323
> 
> 标签：android, iphone, whatsapp

我正在寻找一种从代码中访问 WhatsApp 功能的方法。我已经查过了，但似乎 WhatsApp 没有发布任何 API。

有谁知道这样做的另一种方法？也许使用第 3 方库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T17:53:59.167

**简短的回答：**不，如果没有模拟器，你就无法做到这一点。WhatsApp 没有 PC 版本，也没有 API。它仅在移动设备上运行。

**更长的答案：**是的，你可以在没有模拟器的情况下做到这一点。您只需要对应用程序进行逆向工程并了解它在内部是如何工作的。然后，您可以创建一个模仿移动版应用程序行为的应用程序，但在 PC 上。这需要相当高的技能，而且很可能违反 WhatsApp 的使用条款，因此无论如何您都不能这样做。

**替代答案＃1：**只需使用模拟器。我读过 WhatsApp 与[YouWave](http://youwave.com/)配合得很好。

**备选答案 #2：**考虑您是否需要使用 WhatsApp，或者是否可以切换到其他支持 PC 的应用程序。例如，[eBuddy XMS](https://play.google.com/store/apps/details?id=com.ebuddy.android.xms)应用程序似乎与 WhatsApp 做同样的事情，而且它似乎也有一个网络界面。

* * *

**2017 年 1月 11 日更新：**现在有一个[名为 Yowsup 的 Python 库可以满足](https://github.com/tgalal/yowsup)您的需求！我在浏览一些随机的 Raspberry Pi 的东西时遇到了它，这里有关于如何使用 Yowsup的[教程。](http://www.instructables.com/id/WhatsApp-on-Raspberry-Pi/?ALLSTEPS)

# java - 无法从 GoogleWeather API 获取内容长度

> ID：10294897
> 
> 赞同：1
> 
> 时间：2012-04-24T09:06:10.153
> 
> 标签：java, android, web, weather

我有一个 Android 应用程序，我想显示下载的天气数据的进度条。我将显示大约 5 个地方的天气预报。问题是当我想从响应头中获取 Content-Length 时。日志总是显示-1（这意味着该字段未在 URLConnection 变量中设置）。

这是我正在使用的代码：

```
private class DownloadWeatherData extends AsyncTask<String, Integer, String> {
        @Override
        protected String doInBackground(String... sUrl) {
            try {
                URL url = new URL("http://www.google.com/ig/api?weather=NY&hl=en&oe=utf-8");
                URLConnection connection = url.openConnection();

                int dataLenght = connection.getContentLength();
                Log.d("ANDRO_ASYNC", "Data lenght: " + dataLenght);

                InputStream input = new BufferedInputStream(url.openStream());

                byte data[] = new byte[1024];
                long total = 0;
                int count;

                while ((count = input.read(data)) != -1) {
                    total += count;
                    Log.d("ANDRO_ASYNC", ""+(int)((count)));
                }
                input.close();
            } catch (Exception e) {
            }
            return null;
        }
    } 
```

我能做些什么？还是有其他方法可以显示下载数据的进度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T10:17:51.393

问题出在android的`HttpUrlConnection`实现机制上。这[是官方文档所说的](http://developer.android.com/reference/java/net/HttpURLConnection.html)：

默认情况下，这种实现`HttpURLConnection`请求的服务器使用 gzip 压缩。由于`getContentLength()`返回传输的字节数，因此您无法使用该方法来预测可以从中读取多少字节`getInputStream()`。相反，读取该流直到它用尽：when`read()`返回 -1。可以通过在请求标头中设置可接受的编码来禁用 Gzip 压缩：

`urlConnection.setRequestProperty("Accept-Encoding", "identity");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T09:18:52.157

页面和其他文件通常不带有 Content-Length 标头（作为“数据块”发送）。在这种情况下，通常浏览器不会显示百分比，而是显示一个永久动画栏（“ `// // // // //`”）。

当然，当您知道站点的平均响应时间和客户端的传输速度时，您总是可以伪造它。

# c# - 构建 Linq 表达式

> ID：10294899
> 
> 赞同：1
> 
> 时间：2012-04-24T09:06:16.747
> 
> 标签：c#, linq

我可以**轻松**构建任何 linq 表达式，而无需使用`Expression`工厂方法。例如：

```
Func<int, string> f = i =>
{
    var result = i.ToString();
    //... rest of the code
    return result;
};

Expression<Func<string>> f2 = () => f(123);
var s = f2.Compile()(); 
```

通过调用工厂方法手动构建表达式有什么好处？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T09:14:02.893

例子：

*   您正在根据您事先不知道的模型的反射构建查询
*   您正在根据输入构建查询，即解析字符串`"(a.b + c) * 7"`
*   您正在将多个表达式组合成一个表达式（可能是访问者模式）
*   您正在做无法通过 lambda 有效表达的事情，即语句体、成员分配等（在 .NET 4.0 中可用，但不能通过 lambda 编译器）
*   您正在使用没有 lambda 编译器的语言/版本
*   您希望对 lambda 构造进行细粒度控制（即什么是常量，捕获什么等）
*   你只想了解这一切是如何运作的

# objective-c - RestKit：将单个对象映射到现有数组

> ID：10294904
> 
> 赞同：0
> 
> 时间：2012-04-24T09:06:41.400
> 
> 标签：objective-c, ios, json, core-data, restkit

我有以下从 RestService 获得的 JSON 结构：

```
{
    "customer": {
        "id": "123456",
        [more attributes ....]
        "items": [
            {
                "id": "1234",
            },
            {
                "id": "2345",
            }
            [more items...]
        ]
    }
} 
```

我使用 RestKit 成功映射到核心数据。然后，我从另一个 RestService （我无法更改）获取有关 items 数组中单个项目的更多详细信息。JSON答案看起来像

```
{
    "customer": {
        "id: "123456",
        "item": {
            "id": "1234",
            "name": "foo",
            [other attributes...]
        }
    }
} 
```

现在的问题是：我如何映射第二个答案，以便将单个项目添加到 items 数组中（或者如果它已经存在则更新）？

感谢您的任何想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:22:36.623

如果您设置适当`primaryKeyAttribute`的`RKManagedObjectMapping`对象，您应该能够按照您的意愿执行映射。如果您发布一些映射代码，实际上会更容易帮助您，但这就是我的意思

1.  为您的客户对象创建映射，定义所有可能的属性并声明`mappingObject.primaryKeyAttribute = @"id"`
2.  使用第一个请求（或您所说的第一个答案）执行映射
3.  第一个映射步骤完成后执行第二个请求

这应该最初创建您想要的客户对象，然后更新它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:48:18.543

如果您已经知道如何将 JSON 映射到 Core Data，那么剩下的就是获取您想要添加项目属性的对象（使用 id 或其他东西），然后设置它，重写旧的或添加新字段。这只是一般方法

# c# - C#在datagridview中搜索重复项

> ID：10294910
> 
> 赞同：1
> 
> 时间：2012-04-24T09:06:58.560
> 
> 标签：c#, .net, winforms, datagridview

使用**ms visual studio**和**csharp .net4**。

这是我必须检查重复的代码

```
 public void CheckForDuplicate()
    {
        DataGridViewRowCollection coll = ParetoGrid.Rows;
        DataGridViewRowCollection colls = ParetoGrid.Rows;
        List<string> listParts = new List<string>();
        int count = 0;
        foreach (DataGridViewRow item in coll)//379
        {
            foreach (DataGridViewRow items in colls)//143641
            {
                if (items.Cells[5].Value == item.Cells[5].Value)  
                {
                    if (items.Cells[2].Value != item.Cells[2].Value)
                    {
                        listParts.Add(items.Cells["Keycode"].Value.ToString());
                        count++;
                        dupi = true;

                        //txtDupe.Text = items.Cells["Keycode"].Value.ToString();
                        //this.Refresh();
                    }
                }
            }
        }
        MyErrorGrid.DataSource = listParts;
    } 
```

这是**允许用户保存**之前的**检查**。

 **```
private void butSave_Click(object sender, EventArgs e)
    {
        CheckForDuplicate();
        if (dupi == true)
        {
            txtDupe.Clear();

            dupi = false;
        }
        else
        {
            SaveMyWorkI();
            dupi = false;
        }
    } 
```

这是它正在查看的数据： ![在此处输入图像描述](../Images/effc8f7615fac1309db5243ada673ed3.png)

现在，我知道逻辑一定是有缺陷的，因为它无论如何都会保存。我基本上是在**pareto1**上的每个单元格中搜索，以查看用户是否进行了任何**重复**，如果是这样，它将不会保存，而是在另一个 datagridview 中显示零件编号等……嗯，这就是计划。

所以有人可以看看这个并告诉我

**1）**在我的**逻辑**中这是**失败**的地方，如果检查是正确的呢？

**2）**列表是否可以添加信息，如果是这样，简单**绑定到数据网格**视图是否足以显示结果？

**3）**如果这只是一种非常糟糕的搜索方式，有人可以提供反映我想要实现的目标的代码。

非常感谢您未来的评论。

更新:: 好的，感谢您的帮助，我的算法现在可以工作了，但我的最后一个问题是显示在帕累托列上重复的零件编号，而不是显示长度。

```
public void CheckForDuplicate()
    {
        DataGridViewRowCollection coll = ParetoGrid.Rows;
        DataGridViewRowCollection colls = ParetoGrid.Rows;
        List<string> listParts = new List<string>();
        int count = 0;
        foreach (DataGridViewRow item in coll)//379
        { 
            foreach (DataGridViewRow items in colls)//143641
            {
                count++;
                if ((items.Cells[5].Value != null))
                {
                    if ((items.Cells[5].Value != null) && (items.Cells[5].Value.Equals(item.Cells[5].Value)))
                    {
                        if ((items.Cells[2].Value != null) && !(items.Cells[2].Value.Equals(item.Cells[2].Value)))
                        {
                            listParts.Add(items.Cells["Keycode"].Value.ToString());

                            dupi = true;
                        }
                    }
                }
            }
        }
        MyErrorGrid.DataSource = listParts;
        var message = string.Join(Environment.NewLine, listParts);
        //MyErrorGrid.DataSource = message;
        MessageBox.Show(message);

    } 
```

即使消息框正确显示结果？绑定到我的数据网格时我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T15:04:39.453

这是一个简单的示例，展示了如何在数据输入期间执行验证。您可以通过多种方式自定义错误的显示方式（包括某种自定义对话框来解决错误），这可能会为您提供更好的解决方案。

```
public partial class Form1 : Form
{
    BindingSource bs;
    DataTable dt;    public Form1()
    {
        InitializeComponent();

        BindingList<BindingClass> data = new BindingList<BindingClass>
            { 
                new BindingClass{ Name = "one" }, 
                new BindingClass { Name = "two"} 
            };

        dataGridView1.DataSource = data;
        dataGridView1.CellValidating += new DataGridViewCellValidatingEventHandler(dataGridView1_CellValidating);

    }

    void dataGridView1_CellValidating(object sender, DataGridViewCellValidatingEventArgs e)
    {
        foreach (DataGridViewRow row in dataGridView1.Rows)
        {
            if (row.Index != e.RowIndex & !row.IsNewRow)
            {
                if (row.Cells[0].Value.ToString() == e.FormattedValue.ToString())
                {
                    dataGridView1.Rows[e.RowIndex].ErrorText =
                        "Duplicate value not allowed";                    

                    e.Cancel = true;
                    return;
                }
            }
        }
        dataGridView1.Rows[e.RowIndex].ErrorText = string.Empty;
    }

} 

    public class BindingClass
    {
        public string Name { get; set; }
    }

} 
```

当然，这并不总是符合您对用户喜欢使用什么的要求，但我认为这可能有助于查看另一种选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T09:16:02.893

您正在与**==**和**!=**进行比较。

`items.Cells[5].Value`暴露一个对象。

在您的情况下，这很可能是基于引用相等性进行相等性检查，这可能不是您想要的。尝试使用类似的东西`items.Cells[5].Value.Equals(item.Cells[5].Value)`

还请考虑在可用的最简单抽象上解决此类问题。例如，如果您将网格绑定到对象集合，那么您可以针对该对象集合执行清理操作，而无需考虑您在其上固定的任何 UI。

您还可以考虑使用 LINQ 命名空间中的**Distinct**扩展方法并为其提供一个`IEqualityComparer`^*以确保您使用 .NET Framework 中用于删除重复项的最有效代码。

* * *

^(*)) [IEqualityComparer](http://msdn.microsoft.com/en-us/library/ms132151.aspx)是一种抽象，当您认为两个对象相等时，它允许您在一个地方定义。*Distinct*提供了一个重载，您可以在其中指定这样的比较器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T09:22:43.087

看看这是否适合你

```
 var dup = dataGridView1.Rows.Cast<DataGridViewRow>().Distinct().Where(g => g.Index != 0); 
```

排除索引为 0 的行。它是标题行。**

# java - 更改我的 div 中某些文本的样式

> ID：10294913
> 
> 赞同：0
> 
> 时间：2012-04-24T09:07:22.027
> 
> 标签：java, html

我有这个 div

```
 <div  ui:field="myText" class="{style.myText}">  </div>      

   Node x  = divText.getChild(selectText.getSelectedIndex()-1).getFirstChild(); 
```

在节点 xi 中，我得到了我正在寻找的确切文本，但现在我想对该文本进行一些更改，例如仅更改该文本的颜色，

我不想更改 div 的颜色，我想更改 div 中某些特定节点的颜色

有什么办法可以做到这一点。

谢谢

# aptana - 有没有为 Aptana Studio 构建的夜间版本，我们可以从哪里下载它？

> ID：10294916
> 
> 赞同：1
> 
> 时间：2012-04-24T09:07:37.607
> 
> 标签：aptana

我在最近更新的 Aptana Studio 中使用的功能存在错误。错误跟踪器暗示该问题已修复，但暗示它将包含在 5 月下旬的更新中。Aptana Studio 是否有可以下载的每晚构建版本，如果有，从哪里下载？

我在论坛或谷歌上找不到任何东西，而且 git hub 上的选项看起来更旧而且不是官方的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T21:38:04.510

是的。访问[http://preview.appcelerator.com](http://preview.appcelerator.com)，您可以在其中下载每晚版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-04T19:11:29.117

这是一个链接，显示如何从 Aptana Studio 获取最新更新。

[Aptana Studio 3.0 的官方发布更新 URL 是什么？](https://stackoverflow.com/questions/11812485/what-is-the-official-release-update-url-for-aptana-studio-3-0)

（此处的另一个答案提供了 Appcelerator 的链接。）

以下是获取测试版的方法：

[http://preview.appcelerator.com/aptana/studio3/standalone/update/beta/](http://preview.appcelerator.com/aptana/studio3/standalone/update/beta/)

候选发布：http: [//preview.appcelerator.com/aptana/studio3/standalone/update/rc/](http://preview.appcelerator.com/aptana/studio3/standalone/update/rc/)

这个 url 可以在 Aptana 中用于更新到每晚构建，但我还没有尝试过。它适用于 Aptana 的插件版本：

[http://preview.appcelerator.com/aptana/studio3/plugin/update/nightly/site.xml](http://preview.appcelerator.com/aptana/studio3/plugin/update/nightly/site.xml)

# xml - spring xml中的默认占位符值

> ID：10294918
> 
> 赞同：4
> 
> 时间：2012-04-24T09:07:47.573
> 
> 标签：xml, spring, hibernate, placeholder

在我们的特定应用程序中，db.properties 文件由 3d 方提供。根据配置，此属性文件可以包含或不包含 db.schema 属性。因此，如果没有 db.schema 属性，则 db.username 必须用于 hibernate.default_schema 属性。

如果 db.schema 不存在，占位符 ${db.schema:db.username} 不会检索 db.username 的值，因此传播“db.schema”值而不是实际（即 dba）值。

所以，问题是：如果 db.schema 不存在（假设 db.username 始终存在），如何传播 db.username 的默认值？

```
<util:properties id="specificHibernateProperties">
    <prop key="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</prop>
    <prop key="hibernate.show_sql">true</prop>
    <prop key="hibernate.hbm2ddl.auto">update</prop>
    <prop key="hibernate.default_schema">${db.schema:db.username}</prop>
</util:properties> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T10:03:25.907

在 Spring 3 中，应该可以使用嵌套占位符。所以请试试这个：

```
${db.schema:${db.username}} 
```

/rgrds

# python - 如何使用 wx.displaySize() 查找两台显示器的屏幕尺寸

> ID：10294920
> 
> 赞同：8
> 
> 时间：2012-04-24T09:07:53.773
> 
> 标签：python, wxpython, multiple-monitors

我想使用 wxPython 获取两个显示器的屏幕大小。

获取一台显示器的屏幕尺寸：（screenSize 是 [] 包含 x 和 y 值）。

```
screenSize = wx.DisplaySize() 
```

但我想要一些适用于多个显示器的东西，如下所示：

```
screenSizeMonitor1 = wx.DisplaySize()
screenSizeMonitor2 = wx.DisplaySize() 
```

如果可能的话，最好知道哪个显示器在左边（如果使用两个显示器），哪个在右边。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-24T09:28:14.010

您可以使用[wx.Display类的](http://www.wxpython.org/docs/api/wx.Display-class.html)[GetGeometry()](http://www.wxpython.org/docs/api/wx.Display-class.html#GetGeometry)方法：

```
displays = (wx.Display(i) for i in range(wx.Display.GetCount()))
sizes = [display.GetGeometry().GetSize() for display in displays] 
```

要确定最左边的监视器，您只需比较由`wx.Rect`返回的实例的左坐标`GetGeometry()`。具有最小左坐标的监视器是最左边的监视器。

# objective-c - TabbarController tint color的Tabbar

> ID：10294922
> 
> 赞同：0
> 
> 时间：2012-04-24T09:07:59.603
> 
> 标签：objective-c, ios

当我在 iPhone 4.3 模拟器中使用此代码时，出现此错误，但在 iPhone 5 模拟器上运行时，它可以正常工作。

**代码**

```
 UITabBarController *tabB = [[UITabBarController alloc] init];
tabB.tabBar.tintColor=[UIColor colorWithRed:124.0/255.0 green:150.0/255.0 blue:32.0/255.0 alpha:1.0];

tabB.tabBar.selectedImageTintColor=[UIColor colorWithRed:187.0/255.0 green:255.0/255.0 blue:38.0/255.0 alpha:1.0];            
tabB.viewControllers = [NSArray arrayWithObjects:hc,bt, nil];
[self.navigationController pushViewController:tabB animated:YES]; 
```

**错误**

```
-[UITabBar setTintColor:]: unrecognized selector sent to instance 0x78787c0
2012-04-24 10:59:46.776 welcomeKidsWebsite[10357:12203] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UITabBar setTintColor:]: unrecognized selector sent to instance 0x78787c0'
*** Call stack at first throw:
(
    0   CoreFoundation                      0x01bcd5a9 __exceptionPreprocess + 185
    1   libobjc.A.dylib                     0x01d21313 objc_exception_throw + 44
    2   CoreFoundation                      0x01bcf0bb -[NSObject(NSObject) doesNotRecognizeSelector:] + 187
    3   CoreFoundation                      0x01b3e966 ___forwarding___ + 966
    4   CoreFoundation                      0x01b3e522 _CF_forwarding_prep_0 + 50
    5   welcomeKidsWebsite                  0x0005ac8e -[KidsWelcomeViewController GotoBooks:] + 622
    6   UIKit                               0x00e1f4fd -[UIApplication sendAction:to:from:forEvent:] + 119
    7   UIKit                               0x00eaf799 -[UIControl sendAction:to:forEvent:] + 67
    8   UIKit                               0x00eb1c2b -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 527
    9   UIKit                               0x00eb07d8 -[UIControl touchesEnded:withEvent:] + 458
    10  UIKit                               0x00e43ded -[UIWindow _sendTouchesForEvent:] + 567
    11  UIKit                               0x00e24c37 -[UIApplication sendEvent:] + 447
    12  UIKit                               0x00e29f2e _UIApplicationHandleEvent + 7576
    13  GraphicsServices                    0x02528992 PurpleEventCallback + 1550
    14  CoreFoundation                      0x01bae944 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 52
    15  CoreFoundation                      0x01b0ecf7 __CFRunLoopDoSource1 + 215
    16  CoreFoundation                      0x01b0bf83 __CFRunLoopRun + 979
    17  CoreFoundation                      0x01b0b840 CFRunLoopRunSpecific + 208
    18  CoreFoundation                      0x01b0b761 CFRunLoopRunInMode + 97
    19  GraphicsServices                    0x025271c4 GSEventRunModal + 217
    20  GraphicsServices                    0x02527289 GSEventRun + 115
    21  UIKit                               0x00e2dc93 UIApplicationMain + 1160
    22  welcomeKidsWebsite                  0x000024ac main + 188
    23  welcomeKidsWebsite                  0x000023e5 start + 53 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T11:24:37.617

使此版本独立的一个好方法是：

```
 if ([tabBarController.tabBar respondsToSelector:@selector(setTintColor:)]) {
        [tabBarController.tabBar setTintColor:color];
 } 
```

在 IOS 5 中，这将设置 tabbar tintcolor，在较低版本中它不会崩溃

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:16:59.413

根据[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITabBar_Class/Reference/Reference.html) `tintColor`仅适用于 iOS 5.0 及更高版本。线索是 4.3 模拟器在说`unrecognized selector sent to instance`这基本上意味着该方法不存在。

您需要执行以下操作之一：

> *   将所需的最低 iOS 设置为 5.0。
> *   仅在 iOS 5.0 或更高版本上运行时应用色调。
> *   使用两个版本都支持的替代方法。

文档摘录：

> 色调颜色
> 
> 应用于标签栏背景的色调颜色。@property(nonatomic, retain) UIColor *tintColor 可用性
> 
> ```
> Available in iOS 5.0 and later. 
> ```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-24T09:13:16.220

试试这个

```
tabB.tintColor=[UIColor colorWithRed:124.0/255.0 green:150.0/255.0 blue:32.0/255.0 alpha:1.0]; 
```

# jquery - Jquery UI DatePicker 代码冲突

> ID：10294924
> 
> 赞同：0
> 
> 时间：2012-04-24T09:08:11.817
> 
> 标签：jquery, jquery-ui

我正在尝试将 Jquery DatePicker 滚动到我已购买但无法显示日历的站点模板中。

所以，我已经剥离了所有页面内容，只留下了脚本/样式表等以及触发日历的 div。

这可以在[http://www.flowerssameday.co.uk/TestTemplate_Date.asp看到](http://www.flowerssameday.co.uk/TestTemplate_Date.asp)

正如您将看到的，没有日历。

但是，如果我从页面中删除以下 2 个脚本：

```
<script type="text/javascript">
if ( jQuery('#MM ul') ) { ddsmoothmenu.init({ mainmenuid: "MM", orientation: "h", classname: "slideMenu", contentsource: "markup" }); }
</script>
<script src="assets/js/onLoad.js"></script> 
```

然后日历显示就好了。

这也可以在[http://www.flowerssameday.co.uk/TestTemplate_Date_Working.asp看到](http://www.flowerssameday.co.uk/TestTemplate_Date_Working.asp)

当然，删除脚本会使模板无法正常工作。

我想知道是否有解决2个脚本不兼容的问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:10:20.290

好的，找到答案了。

onload.js 控制页面显示的淡入选项。body 标签有一个类，它的内容是不可见的，然后脚本会淡入页面。

更改了 css 并删除了 onload.js，现在日历看起来就好了。

# matlab - matlab中声音信号的强度

> ID：10294925
> 
> 赞同：-3
> 
> 时间：2012-04-24T09:08:20.370
> 
> 标签：matlab, audio, signal-processing

嗨，伙计们，我在试图找到声音信号的强度时遇到了困难。我搜索了很多，但没有得到任何好的答案或帮助。如果有人能指导我，我将非常感激。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:28:12.850

您可以只计算信号的[RMS](https://en.wikipedia.org/wiki/Root_mean_square)值，例如，如果您的样本在 X 中：

```
intensity_RMS = sqrt(sum(X.*X)/length(X)); 
```

# c# - 事件前后 SPListItem 的值如何？

> ID：10294928
> 
> 赞同：0
> 
> 时间：2012-04-24T09:08:29.960
> 
> 标签：c#, sharepoint, events

我有一个事件接收器，它会在 SPList 中的 SPListItem 更新时触发。我正在使用 ItemUpdated() 事件。

我想从事件之前获取值，以便比较已编辑的字段。

我怎么做？

```
if (properties.ListTitle == "Lista")
            {
                if (properties.AfterProperties["Start Time"].ToString() != properties.ListItem["Start Time"].ToString())
                {
                    string s = "hej";
                }
            }

            try
            {
                // ID for the site from the properties object
                Guid siteId = properties.SiteId;
                // ID for the list from the properties object
                Guid listId = properties.ListId;
                // ID for the list item from the properties object
                int listItemId = properties.ListItemId;

                SPSecurity.RunWithElevatedPrivileges(delegate()
                          {
                           // Code stuff
                          }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:17:32.843

```
 if (properties.ListTitle == "ListName")
    {
         //AfterProperties gives new value and ListItem gives the previously stored
         if(properties.AfterProperties["ColumnName"].ToString()!=properties.ListItem["ColumnName"].ToString())
         //Your code Here
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T13:45:35.270

如果列表是文档库，您可以使用[BeforeProperties](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spitemeventproperties.beforeproperties.aspx)。如果没有，从事件之前获取值的唯一方法是使用[版本](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.splistitem.versions.aspx)（如果列表有它们）或使用[ItemUpdating](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spitemeventreceiver.itemupdating.aspx)事件。

请参阅[在 SPItemEventReceiver 上使用 BeforeProperties 和 AfterProperties，以](http://www.synergyonline.com/Blog/Lists/Posts/Post.aspx?ID=122)获取概述不同事件和列表类型的事件接收器属性内容的表格。

# c# - 不能'绑定到 ViewModel

> ID：10294932
> 
> 赞同：1
> 
> 时间：2012-04-24T09:09:04.363
> 
> 标签：c#, windows-phone-7, silverlight-4.0, mvvm-light

我有一个过去几个小时无法解决的问题，这里是 ViewModel 代码：（PS：我无法共享 url 流，但不要担心它的行进，因为我用 BreakPoint 对其进行了测试）

```
private ObservableCollection<CustomerPublic> customers;
    List<CustomerPublic> liste = new List<CustomerPublic>();
    public ObservableCollection<CustomerPublic> Customers
    {
        get
        { return customers; }
        set
        {
            if (customers != value)
            {
                customers = value;
                RaisePropertyChanged("Customers");
            }
        }
    }
    private int id;
    public int ID
    {
        get
        {
            return id;
        }
        set
        {
            id = value;
            RaisePropertyChanged("ID");
        }
    }
    public Detail_AgenceViewModel(int id)
    {
        this.ID = id;
        PopulateCollection();  
    }
    public Detail_AgenceViewModel()
    {

    }

    private void PopulateCollection()
    {
        ParseFeedRequest();
    }

    private void ParseFeedRequest()
    {
        RestClient client = new RestClient();
        client.BaseUrl = "....";

        RestRequest request = new RestRequest();

        .......

        client.ExecuteAsync(request, ParseFeedCallBack);
    }

    public void ParseFeedCallBack(IRestResponse response)
    {
        if (response.StatusCode == HttpStatusCode.OK)
        {
            ParseXMLFeed(response.Content);
        }
    }

    private void ParseXMLFeed(string feed)
    {
        if (feed == null)
            return;
        XElement xmlItems = XElement.Parse(feed);

        liste = (from response in xmlItems.Descendants("result")
                 let lib = response.Element("lib")
                 let adresse = response.Element("adresse")

                 select new CustomerPublic
                 {
                     lib = lib == null ? null : lib.Value,
                     adresse = adresse == null ? null : adresse.Value,

                 }).ToList();

        Customers = new ObservableCollection<CustomerPublic>(liste);
                       } 
```

风景：

```
 <phone:PhoneApplicationPage.DataContext>
    <vm:Detail_AgenceViewModel/>
  </phone:PhoneApplicationPage.DataContext>
    <Grid x:Name="LayoutRoot"
      Background="Transparent">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <!--TitlePanel contains the name of the application and page title-->
    <StackPanel x:Name="TitlePanel"
                Grid.Row="0"
                Margin="12,17,0,28">
        <TextBlock x:Name="ApplicationTitle"
                   Text="MY APPLICATION"
                   Style="{StaticResource PhoneTextNormalStyle}" />
        <TextBlock x:Name="PageTitle"
                   Text="page name"
                   Margin="9,-7,0,0"
                   Style="{StaticResource PhoneTextTitle1Style}" />
    </StackPanel>

    <!--ContentPanel - place additional content here-->
    <StackPanel x:Name="ContentPanel" Grid.Row="2" Margin="12,0,12,0" Orientation="Vertical">

        <!--TextBox Text="{Binding Count, Mode=TwoWay}" x:Name="tbCount" />
        <TextBlock Text="{Binding Count}" /-->
        <ListBox x:Name="Agences" ItemsSource="{Binding Customers}"  >

            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Vertical">
                        <TextBlock Text="{Binding lib}" />
                        <TextBlock Text="{Binding adresse}" />

                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </StackPanel>
  </Grid> 
```

问题是一切顺利客户即使她已加载但什么也没有出现！有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:15:48.120

您正在将客户设置为可观察集合的新实例！

当您将 observable 集合更改为新实例时，您必须使用 INotifyPropertyChanged 告诉视图该集合已更改*为新实例*- 尽管会通知对集合中项目的更改，但不会通知对集合 ITSELF 的更改。

当你这样做时：

```
Customers = new ObservableCollection<CustomerPublic>(liste); 
```

视图仍然绑定到 OLD 集合。你应该做：

```
Customers.Clear();
foreach(var item in liste)
  Customers.Add(item); 
```

或确保 Customers 属性调用 NotifyPropertyChanged 函数。

查看此视频或文章以获取更多信息：

[http://www.codeproject.com/Articles/371217/Apex-Part-1-Create-Your-First-MVVM-Application](http://www.codeproject.com/Articles/371217/Apex-Part-1-Create-Your-First-MVVM-Application) http://www.youtube.com/watch?v=m4cx9w5fiwk&feature=youtu.be

祝你好运，如果这有帮助，请告诉我！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T12:22:01.130

我有类似的问题；

```
public void FillList(List<StockItem> siList)
    {

        listBox.ItemsSource = siList;

    } 
```

其中 sIList 是 X 项的填充列表，具有正确命名的属性。程序构建和运行良好，但未显示列表框。（这个问题是在过渡到 MVVM 时开始的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T13:20:25.273

我懂了。

检查您的数据上下文 - 我敢打赌它是空的。我在 WP7 中遇到过同样的问题。在 PhoneApplicationPage 的构造函数中执行以下操作：

DataContext = new Detail_AgenceViewModel();

并在那里初始化它。在 WP7 中，当我在 XAML 中创建数据上下文时，它为空。这有帮助吗？

# java - JAXB 为没有内容的标签设置值

> ID：10294935
> 
> 赞同：2
> 
> 时间：2012-04-24T09:09:22.303
> 
> 标签：java, xml, jaxb, xsd, javabeans

我正在使用 JAXB 从 XML 模式生成 bean 模型。模式中的构造之一是某个标签可以存在或不存在。例如下面代码片段中的 ping：

```
 <buildtime-behavior>
        <ping/>
    </buildtime-behavior> 
```

在 XSD 中，我将其映射为：

```
<xs:element name="buildtime-behavior">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="ping" minOccurs="0" maxOccurs="1"/>
        </xs:sequence>
    </xs:complexType>
</xs:element> 
```

在由 JAXB 生成的 BuildtimeBehavior 类中，这会导致：

```
public void setPing(Object value) 
```

现在我想设置或清除该标签。但是，我不能简单地执行“new Object()”，因为这将导致“java.lang.Object 无法转换为 org.w3c.dom.Element”。但我没有创建元素的文档。由 JAXB 生成的 ObjectFactory 没有 createPing() 方法...

如何设置 ping？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:37:28.807

`ping`您可以按如下方式创建元素：

```
package forum10294935;

import javax.xml.parsers.*;
import org.w3c.dom.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        Document document = db.newDocument();
        Element pingElement = document.createElement("ping");
    }

} 
```

在您的问题中，您说您从 XML 模式生成了模型。如果您可以修改模型或从 Java 类开始，下面是一个链接，您可以尝试使用`XmlAdapter`.

*   [使用 JAXB 将字符串值表示为元素名称（“foo” as ）](http://blog.bdoughan.com/2010/12/represent-string-values-as-element.html)

# javascript - 重建选项列表时失去选择选项的焦点

> ID：10294937
> 
> 赞同：1
> 
> 时间：2012-04-24T09:09:46.017
> 
> 标签：javascript, jquery, html

我正在动态设置我的选择字段的选项。每次表单更改时，都会从 Servlet 接收新数据并覆盖当前选择。

这里的问题是，如果我选择一个选项，表单会加载 javascript 函数，我会失去选择/焦点。

```
var capacityOptionsAsString = "";
for(var i = 0; i < capacityArray.length; i++) {
  capacityOptionsAsString += "<option value='" + capacityArray[i] + "'>" + capacityArray[i] + "</option>";
  console.log('capacity option: ' + capacityOptionsAsString);
}
$("select[name='inptCapacity']").find('option').remove().end().append($(capacityOptionsAsString)); 
```

知道如何保持选择吗？

* * *

**编辑**：也许我不够清楚。我想保留选择。所以必须验证，如果选项被选中，如果是，我们必须再次选择它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:11:33.923

只需再次设置焦点：

```
$("select[name='inptCapacity']").focus(); 
```

**更新**

获取选定的选项：

```
var selected_value = $("select[name='inptCapacity'] option:selected").val() 
```

做你的改变

```
$("select[name='inptCapacity']").find('option').remove().end().append($(capacityOptionsAsString)); 
```

再次选择它：

```
$('select[name='inptCapacity'] option[value="' + selected_value + "]').attr('selected', 'selected'); 
```

您完全需要一个 id 供您选择；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:16:13.097

```
$('select[name="inptCapacity"]').is(':focus');

$('form[name="formName"] :input').change(function() {

   // keep the select focus always on input change

   $('select[name="inptCapacity"]').focus(); 

}); 
```

# hadoop - 多种自定义可写格式

> ID：10294944
> 
> 赞同：0
> 
> 时间：2012-04-24T09:10:05.157
> 
> 标签：hadoop, writable

我有多个输入源，我使用 Sqoop 的 codegen 工具为每个输入源生成自定义类

```
public class SQOOP_REC1 extends SqoopRecord  implements DBWritable, Writable

public class SQOOP_REC2 extends SqoopRecord  implements DBWritable, Writable 
```

在 Map 方面，根据输入源，我相应地创建了上述 2 个类的对象。

我将键作为“文本”类型，并且由于我有 2 种不同类型的值，因此我将值输出类型保持为“可写”。

在减少方面，我接受值类型为可写。

```
 public class SkeletonReduce extends Reducer<Text,Writable, Text, Text> {

public void reduce(Text key, Iterable<Writable> values, Context context) throws     IOException,InterruptedException {

   }
} 
```

我也设置

```
job.setMapOutputValueClass(Writable.class); 
```

在执行过程中，它根本不进入reduce函数。

有人可以告诉我是否可以这样做？如果是这样，我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:01:24.143

考虑为您的值类型扩展 GenericWritable。您需要定义允许的类集（在您的情况下为 SQOOP_REC1 和 SQOOP_REC2），并且效率不高，因为它在 readFields 方法中创建了新的对象实例（但如果您有一小部分类，则可以覆盖它，只具有两种类型的实例变量，以及一个指示哪个是有效的标志）

*   [http://hadoop.apache.org/common/docs/r0.20.1/api/org/apache/hadoop/io/GenericWritable.html](http://hadoop.apache.org/common/docs/r0.20.1/api/org/apache/hadoop/io/GenericWritable.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T12:38:35.373

您不能指定`Writable`为您的输出类型；它必须是一个具体的类型。所有记录都需要在`Mapper`s 和`Reducer`s 中具有相同的（具体）键和值类型。如果您需要不同的类型，您可以创建某种`Writable`内部包含“A”或“B”的混合。它有点难看，但很有效，例如在 Mahout 中做了很多工作。

但我不知道为什么这会使减速器无法运行；根据此信息，这可能是完全不同的事情并且无法回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T05:21:37.107

好的，我想我知道如何做到这一点。根据 Doug Cutting 自己的建议

[http://grokbase.com/t/hadoop/common-user/083gzhd6zd/multiple-output-value-classes](http://grokbase.com/t/hadoop/common-user/083gzhd6zd/multiple-output-value-classes)

我使用 ObjectWritable 包装了这个类

```
ObjectWritable obj = new ObjectWritable(SQOOP_REC2.class,sqoop_rec2); 
```

然后在 Reduce 端，我可以获取包装类的名称并将其转换回原始类。

```
if(val.getDeclaredClass().getName().equals("SQOOP_REC2")){
                SQOOP_REC2temp = (SQOOP_REC2) val.get(); 
```

不要忘记

```
 job.setMapOutputValueClass(ObjectWritable.class); 
```

# php - 显示 3 个博客条目，然后是 3 张照片，然后是 3 个博客条目，然后是 3 张照片

> ID：10294950
> 
> 赞同：1
> 
> 时间：2012-04-24T09:10:26.030
> 
> 标签：php, while-loop

对 PHP 来说很新，我试图让我的页面显示 3 个博客条目，然后是 3 张照片，然后是另外 3 个博客条目，依此类推。

有人建议我使用 do while 循环，但很难让它工作，甚至很难理解它，我更习惯于在 CMS 中使用 foreach 循环。

这是我的原始代码，但前提是我手动显式添加了每个循环！

```
 <?php  // Show 3 blog entries
$entries = $page->children("sort=-sort, limit=3");
$count = 0;

foreach ($entries as $entry) { 

$count++; 
$class = "blog_box"; 
if ($entry == $entries->last()) {$class .= " blog_box_last"; }
if ($entry == $entries->first()) {$class .= " blog_box_first"; }
if (0 == $count % 2) { $class .= " blog_box_even"; }
?>

<div class="<?php echo $class; ?>">

<div class="blog_text">

<h3><?php echo $entry->title; ?></h3>
<h6><?php echo $entry->entry_date; ?></h6>
<p><?php echo $entry->body; ?></p>

</div><!-- /.blog_text -->

<?php if ($entry->image) { 

$image = $entry->image->width(350);

?>

<img src="<?php echo $image->url; ?>" width="<?php echo $image->width; ?>" alt="<?php echo $entry->title; ?>" />

<?php } ?>

<div class="clear"></div><!-- /.clear -->

</div><!-- /.blog_box -->

<?php }

?>

// Show 3 blog images

<?php $blog_images = $page->get("image_uploads")->find("limit=3");
foreach ($blog_images as $img) { 
$b_img = $img->size(200,140); ?>
<img src="<?php echo $b_img->url; ?>" width="<?php echo $b_img->width; ?>" height="<?php echo $b_img->height; ?>" alt="<?php echo $b_img->description; ?>" class="small_frame" />
<?php } ?> 
```

CMS 开发人员好心地为我尝试了一些代码，但我无法让它为我工作：

```
 $entries = $page->children("sort=-sort");
$images = $page->get("/image_uploads/"); 
$cnt = 0;

do {
    $cnt++; 
    $entry = $entries->shift();
    if($entry) {
        // output 1 entry
    }

    if($cnt == 3) {
        while(++$cnt <= 6) {
            $image = $images->shift();
            if($image) {
                // output 1 image
            }
        }
        $cnt = 0;
    }

} while(count($entries) && count($images)); 
```

我正在使用 ProcessWire。

提前谢谢各位！

# svg - 用 Raphael 创建这个 SVG

> ID：10294956
> 
> 赞同：0
> 
> 时间：2012-04-24T09:10:54.830
> 
> 标签：svg, raphael

我正在使用内联 SVG 元素，我想在 IE8 中运行它，任何人都可以用 Raphael 实现它吗？

```
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="643px" height="735px" viewBox="0 0 643 735" enable-background="new 0 0 643 735" xml:space="preserve">
  <a xlink:href="img/interactive/pietraCT/00.jpg" rel="floors" title="zobacz rzut parteru">
    <g id="ct_00">
      <polygon  points="172.25,647 381.75,640.75 422,641.75 422,665 415.75,679.5 402.75,679.5 401.25,667 393.751,665 363.625,665 352.005,671.673 346,673 338.625,677 172.25,672.5"/>
    </g>
  </a>
</svg> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T10:39:44.870

这是回答[here](https://stackoverflow.com/questions/9690241/rendering-svg-polygons-in-raphael-javascript-library)

简而言之，您需要使用 path() 调用，并且您需要修改您的点以遵守 Raphael 使用的约定（[在此处](http://raphaeljs.com/reference.html#Paper.path)定义）

[这](http://jsfiddle.net/amadanNM/A3ET9/)是使用您的多边形的小提琴。不过，您必须在右下角的窗口中向下滚动才能看到它。

# android - 通过 android 设备上的应用程序设置 ifconfig eth0 "ipaddress"

> ID：10294958
> 
> 赞同：0
> 
> 时间：2012-04-24T09:11:04.237
> 
> 标签：android, root, lan, ifconfig

我目前正在使用带有 RJ45 局域网连接的自定义 android 平台，现在的问题是我希望能够从我的自定义应用程序中设置 IP 地址。

使用'ifconfig'直接在作为root的android内核中的shell中工作，但我如何从应用程序中使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:29:38.393

您可以使用 stericson 的**RootTools**库：[http ://code.google.com/p/roottools/](http://code.google.com/p/roottools/)

你可以很容易地用它**运行 root shell 命令**:)

检查其 wiki 的**使用情况**：[http ://code.google.com/p/roottools/wiki/Usage](http://code.google.com/p/roottools/wiki/Usage)

*其实任何可以执行root命令的方法都应该没问题。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:21:47.580

## 我的解决方案：

由于它是我自己的内核构建，我编辑了“su”的源代码并将安全检查注释掉，所以基本上每个用户都可以成为 root..

不是一个非常漂亮或安全的解决方案，但我的设备无论如何都不会用于“未经授权”的应用程序，并且 rom 不会公开，所以这将是迄今为止的解决方案。

# iphone - 如何在 iPhone 上部署测试应用程序？

> ID：10294960
> 
> 赞同：0
> 
> 时间：2012-04-24T09:11:09.340
> 
> 标签：iphone, jailbreak

我想知道如何在 iPhone 4.3.2 上部署测试应用程序。使用 XCode 4.3 但无需购买许可证。

我已经越狱并安装了 AppSync4.0+

我问这个的原因是因为我正在从 Qt 移植一个应用程序，我想看看它在 iOS 下的行为。

我一直在使用 Qt4iOS 并在使用模拟器时构建了所有内容。现在我想在我的设备上看到它。

当我尝试它时，我得到了一些钥匙链错误。

给我一些链接或想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T01:28:03.197

... 一切皆有可能。这是关于所需的努力。并且为此付出的努力可能非常低。特别是因为您的设备已经越狱。

1.  您需要更改 Xcode 的代码签名以构建设备。可以在此处找到说明：http: [//iphonedevwiki.net/index.php/Xcode#Developing_without_Provisioning_Profile](http://iphonedevwiki.net/index.php/Xcode#Developing_without_Provisioning_Profile) （更好地保存原始文件的副本）。由于 Xcode 4.3 不再使用 /Developer 文件夹，因此您必须编辑 Xcode.app (./Xcode.app/Contents/Developer/...) 中的文件

2.  为设备构建您的应用程序。确保目标不是胖二进制文件（而只是构建一个 ARMv6 可执行文件），否则如果使用 ldid 进行伪签名，它将无法在您的设备上运行。

3.  为您的应用查找 .app 捆绑包

4.  将 .app 包复制到 /Applications/（不是 /var/mobile/Applications ！！！）（例如通过 ssh）。确保您的可执行文件的权限设置为 755。重新启动或重新启动，如果您做的一切正确，您将能够启动和测试您的应用程序。

玩得开心！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:16:50.027

我有同样的问题。

无论我们多么努力地尝试应用任何技巧来在未经许可的情况下在真实设备上测试应用程序，最重要的是**你做不到**。

您必须通过支付 99 美元向苹果注册，然后您可以在运行应用程序之前在 XCode 中将设备设置为您的真实设备。

请注意，即使在您向 Apple 注册后，创建 *.api 文件也是一项艰巨的任务。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-24T09:50:22.940

很简单：花 99 美元购买 iOS 开发者计划。

我敢肯定，浪费你的时间试图找到另一种方法会更昂贵。

# iphone - 如何在 ios 中通知用户，而应用程序已关闭/在后台

> ID：10294961
> 
> 赞同：3
> 
> 时间：2012-04-24T09:11:12.923
> 
> 标签：iphone, ios, notifications, push-notification, reminders

我想在到达“时间”时通知用户。

例如：

我有一个有很多行的表格视图。此行类似于提醒，用户可以在其中设置提醒的日期和时间。
因此，提醒连续设置为 4 月 24 日 12:15。
此时App已关闭。

那么我怎样才能通知用户这个时间已经到了呢？

**没有**苹果推送通知服务 有没有办法做到这一点？

**编辑 1：**
感谢您的回答，这是**本地通知**的示例：

```
//This example adds 20 seconds to current time, use it for testing 
    UILocalNotification *localNotification = [[UILocalNotification alloc] init];

    NSDate *currentDate = [NSDate date];
    NSDate *currentDatePlus = [currentDate dateByAddingTimeInterval:20];

    localNotification.fireDate = currentDatePlus;
    localNotification.alertBody = @"Hallo ayFon User";
    localNotification.soundName = UILocalNotificationDefaultSoundName;

    [[UIApplication sharedApplication] scheduleLocalNotification:localNotification];
    [localNotification release]; 
```

**编辑2：**

```
//Add this for iOS 5 Notifications
[[UIApplication sharedApplication] registerForRemoteNotificationTypes: 
 UIRemoteNotificationTypeAlert |
 UIRemoteNotificationTypeSound]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:20:24.670

您必须使用 iOS 的本地通知。他们是为了这个确切的目的而完成的。

您可以在此处找到文档：[本地和推送通知编程指南](https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction.html "本地和推送通知编程指南")。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T09:13:21.037

您不必使用推送通知 - 您可以使用本地通知。它们类似于推送通知，只是它们是在设备上生成的，因此您不需要网络连接。

这是警报类型应用程序相当常见的模式。

# c++ - 使用 TinyXML 从 C++ 类生成 XML

> ID：10294964
> 
> 赞同：0
> 
> 时间：2012-04-24T09:11:30.557
> 
> 标签：c++, xml-serialization, tinyxml

我想生成格式的 XML，

```
<Library>
<ConfigParams>
   <parameter name= "name1"> abc </parameter>
   <parameter name= "name2"> def </parameter>
</ConfigParams>
<Books>
 <Book>
    <name>xyz</name>
    <title>jlkjlkj</title>
     <Parameters>
         <parameter name= "name3">name1 </parameter>
         <parameter name= "name4"> name4 </parameter>
     </Parameters>
  </Book>
   <Book>
       <name>xyzkjk</name>
    <title>jlj</title>
     <Parameters>
         <parameter name= "name8">name22 </parameter>
         <parameter name= "name7"> name44 </parameter>
     </Parameters>
    </Book>
</Books>
</Library> 
```

为此，我决定使用 TinyXML：

我创建了以下类：

```
 class Param
 { 
  public:
    string value;
string name;

Param();

Param( string value, string name)
{ 
  this->value=value;
  this->name=name;
}

  };

class Parameters
{
public:
list<Param> param;

Parameters();
Parameters(list<Param> param)
 {
     this->param = param;
 }

};

class Book
{
public:
string name;
string title;
Parameters parameters;

Book();
Book(string name, string title, Parameters parameters)
{
     this->name = name;
     this->title = title;
     this->parameters = parameters;
}
};

class Books
{
public:
list<Book> books;

Books();
Books(list<Book> books)
{ 
    this->books = books;
}
};

class Library
{
public:
Parameters configParams;
Books books;

Library();
Library(Parameters configparams, Books books)
{
    this->configParams=configparams;
    this->books=books;
}

void save(const char* Filename);
};

class ConfigParams
{
public:
Parameters configparams;

ConfigParams();
ConfigParams(Parameters configparams)
{
    this->configparams = configparams;
}
}; 
```

现在，当我想为这个类层次结构生成一个 Xml 文档时，

```
void Library::save(const char* Filename)
{

TiXmlDocument doc;  
TiXmlElement* msg;

TiXmlDeclaration* decl = new TiXmlDeclaration( "1.0", "", "" );  
doc.LinkEndChild( decl ); 

TiXmlElement * root = new TiXmlElement("Library");  
doc.LinkEndChild( root );  

//block configparams
{
TiXmlElement * configparams= new TiXmlElement( "ConfigParams" );  
    root->LinkEndChild( configparams ); 

    Param param1=Param("name1", "abc");
    Param param2=Param("name2" ,"def");

 list<Param> params =list<Param>();
 list <Param>::iterator Iter;

 Iter=params.begin();
 params.insert(Iter,param1);
 params.insert(Iter,param2);

 Parameters parameters=Parameters(params);

 ConfigParams configparams=ConfigParams(parameters); 
```

但是，我不知道如何使用 TinyXml 将这些类添加到 XML 表单中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:32:58.497

TinyXML 是一个基于 DOM 的 XML 解析器/工具包。为了将 XML 保存到磁盘上的文件中，您需要创建一个 DOM，即 XML 的内存表示。我建议您在[这里](http://www.grinninglizard.com/tinyxmldocs/tutorial0.html)查看 TinyXML 教程，特别是标题为“将文档写入文件”的示例。

`save`您可以向所有需要序列化的类添加一个虚拟成员函数，并将它们传递给`ofstream`. 现在，您需要有人打开一个文件流并将其传递给`Library`类对象，该类对象会将其成员信息写入流，然后对于每个非平凡成员（即类型为“Param”）将调用该`save`函数在会员上。因此，您最终得到的是一组链式调用，以保存每个构建块负责输出自己的信息的位置。

您可以查看`operator<<`为用户类实现的方式并开始使用！

# wix - WiX 安装程序 - 更新问题

> ID：10294966
> 
> 赞同：1
> 
> 时间：2012-04-24T09:11:32.367
> 
> 标签：wix

我在尝试将 WiX 配置为在更新期间不从安装目录中删除某些配置文件时遇到了最糟糕的情况。

我已经搜索和谷歌搜索，但我被卡住了......

这就是我所拥有的。

```
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi" ... >
  <Product Id="PRODUCT_GUID" ...
     UpgradeCode="UPGRADE_GUID">
    ...
    <Upgrade Id="$(var.UpgradeCode)">
       <UpgradeVersion OnlyDetect="no" Property="REMOVEOLDVERSION" Maximum="$(var.ProductVersion)" IncludeMaximum="no" />
       <UpgradeVersion OnlyDetect="yes" Property="NEWERFOUND" Minimum="$(var.ProductVersion)" IncludeMinimum="no" />
    </Upgrade>

    <InstallExecuteSequence>
      <RemoveExistingProducts After="InstallFinalize" />
    </InstallExecuteSequence>
    ... 
```

文件如下：

```
 <Component Id="ConfigurationFiles" Guid="ConfigurationFiles_GUID" NeverOverwrite="yes">
      <File Id="SomeConf" Source=... />

    </Component> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T10:22:03.740

如果问题确实是*删除*配置文件，那么我认为您的意思是指定`Permanent="yes"`而不是`NeverOverwrite="yes"`.

但是，如果新版本的安装程序没有安装配置文件（我想这就是它们在升级后消失的原因），那么它们应该不是必需的，对吧？我不确定你为什么要在这种情况下保留配置文件。将它们标记为永久有效使得无法卸载它们。

如果您真的担心*覆盖*用户对这些配置文件所做的更改，那么我认为 Windows Installer 已经可以正确处理这个问题。[文件版本控制规则](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368599%28v=vs.85%29.aspx)已经有了基于文件修改时间戳的“用户数据”的概念，并且不会覆盖此类文件。

# java - 将 ResultSet 值传输到 HashMap 然后添加它们

> ID：10294972
> 
> 赞同：1
> 
> 时间：2012-04-24T09:11:50.097
> 
> 标签：java, hashmap, resultset

我想将`ResultSet`值传输到 HashMap 然后添加它们，所以我最初做了这个代码：

```
PreparedStatement pstmt=null;       
ResultSet rs = null; 
String query="SELECT record_id, SUM(ROUND(amtsourcedr, 2)) AS debit, SUM(ROUND(amtsourcecr, 2)) AS credit " +
                "FROM adempiere.fact_acct " +
                "GROUP BY record_id " +
                "ORDER BY record_id ASC";

    try
    {

        pstmt = DB.prepareStatement(query, null);
        rs = pstmt.executeQuery();

        while (rs.next())
        {

            int id = rs.getInt("record_id");
            BigDecimal sourceDr = rs.getBigDecimal("debit");
            BigDecimal sourceCr = rs.getBigDecimal("credit");
            System.out.println(id);
            System.out.println(sourceDr);
            System.out.println(sourceCr);

            MCUS_Exam exam = new MCUS_Exam(getCtx(), 0, null);
            exam.setCUS_Record_ID(id);
            exam.setCUS_AmtSourceDr(sourceDr);
            exam.setCUS_AmtSourceCr(sourceCr);
            exam.save();
        } 
```

是否可以使用hashmap通过java进行查询中的加法和舍入？如果是，那我该怎么做呢？

编辑： GROUP BY 实际上是我在 java 中复制时遇到的困难。

下面是原表：

```
 record_id    amountdr       amountcr
    1000000        0            213.7544
    1000000        0            270.00
    1000000      483.7544          0
    1000001        0            2250.6677
    1000001        0            400.5050
    1000001        0            12867.75
    1000001      15518.9327        0
    1000002        0            27000.6543
    1000002      27000.6543        0 
```

执行我给出的代码会将其添加到另一个表中：

```
 record_id    amountdr       amountcr
    1000000      483.75         483.75   
    1000001      15518.92       15518.93
    1000002      27000.65       27000.65 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:18:17.100

当然你可以做到——你可以在数据库上做的任何事情也可以在中间层上做。我要问的问题是：对于这个计算，哪一个是更好的选择？如果查询带回大量数据，我会说最好让数据库服务器完成工作。将大型数据集移动到中间层只是为了添加和舍入没有什么意义。

我的直觉是数据库非常适合这种计算。我看不出你有什么理由不允许它这样做。

但是，如果必须的话，它可能看起来像这样：

```
Map<String, Double> rs = new HashMap<String, Double>();
// How will you duplicate the GROUP BY?
double sum = 0.0;
for (String key : rs.keySet()) {
    sum += rs.get(key);
}
// Rounding is a display issue; I'd do it elsewhere 
```

考虑到 Map 已经完成了 GROUP BY：键必须是唯一的。当您从 ResultSet 映射到 Map 时，您必须检查 Map 中是否已存在键。如果没有，则将新键及其值添加到 Map；如果是，则获取现有值，将当前 ResultSet 值添加到其中，并将结果放回该键的 Map 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:18:47.280

答案是肯定的。

1.  从查询中删除 SUM、ROUND 和 GROUP BY 子句。

2.  当您迭代结果集时，创建 MUCS_Exam 对象并将它们添加到您的哈希图中：

    ```
    Map<Integer, MCUS_Exam> map = new HashMap<Integer, MCUS_Exam>();
    while (rs.next()) {
       // code here
       MCUS_Exam exam = new MCUS_Exam(getCtx(), 0, null);   
       map.put(id, exam);
       // perhaps some more code here...
    }
    ```

3.  有一种方法可以获取您的地图并计算任何内容...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T09:28:37.547

也是不答。聚合等最好在数据库中完成，因为更少的来回通信发生，将数据库编号编组到 java 对象和其他开销。

例如，您应该将数据库中的字段定义为 DECIMALS(..., 2) 而不是 DOUBLE。这是最重要的理智衡量标准。当您使用 BigDecimal 时，您可能已经拥有相同的合理数据库设计，但是多余的（？）舍入让我写了这个答案。

# php - 怎么了？我收到错误消息：在 eval() 中传递的参数无效

> ID：10294984
> 
> 赞同：0
> 
> 时间：2012-04-24T09:12:20.003
> 
> 标签：php, join, eval

我写下我的php代码：

```
<?php
        // 已有指定 material, 顯示 material 資訊
        if (strlen($m_id) > 0) {
            // 此 material 屬於哪些 mgroup
            $group_info = $mUtil->groupInfo($m_id);
            $group_names = array();
            foreach ($group_info as $mg_id => $row) {
                if (!$row["not_in_group"]) {
                    $group_names[] = $row["mg_name"];
                }
            }
        }
    ?>

  <table width="100%">
    <tr>
      <th colspan="2"><?php echo $m_name; ?></th>
    </tr>
    <tr class="odd">
      <th>Formula</th>
      <td width="80%"><?php echo $formula; ?></td>
    </tr>
    <tr class="odd">
      <th>Alias</th>
      <td><?php echo $alias; ?></td>
    </tr>
    <tr class="odd">
      <th>In groups</th>
      <!-- join() == implode() -->
      <td><?php echo join($group_names, ",&nbsp; "); ?></td>
    </tr>
  </table><br /><br /> 
```

但我收到这些错误消息：

```
Notice: Undefined variable: group_names in eval() (line 97 of D:\xampp\htdocs\drupal\modules\php\php.module(80) : eval()'d code).
Warning: join() [function.join]: Invalid arguments passed in eval() (line 97 of D:\xampp\htdocs\drupal\modules\php\php.module(80) : eval()'d code).
Notice: Undefined variable: group_names in eval() (line 97 of D:\xampp\htdocs\drupal\modules\php\php.module(80) : eval()'d code).
Warning: join() [function.join]: Invalid arguments passed in eval() (line 97 of D:\xampp\htdocs\drupal\modules\php\php.module(80) : eval()'d code). 
```

任何人都可以帮助我吗？非常感谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:17:16.250

未定义的错误是由于变量像`$group_names`只定义一次

```
if (strlen($m_id) > 0) { ... } //condition is true. 
```

确保您使用的变量在使用之前已实例化。

使用`isset($instancename)`可能是解决此问题的方法之一。

例子：

```
if(!isset($group_names)) $group_names = array();
// ^ if $group_names is not found then at least initialize it as an empty array
//   so that the rest of the script can go easy 
```

* * *

此外，`join()`需要胶水来加入阵列，但顺序不正确。

```
<?php echo join(", ", $group_names); ?> 
```

* * *

[注意：`eval()`但是，不鼓励使用]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T09:14:48.197

您对 join 函数的参数不正确，请在此处阅读[http://php.net/manual/en/function.join.php](http://php.net/manual/en/function.join.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T09:15:30.880

如果条件`strlen($m_id) > 0`是`false`则`$group_names`不会被初始化。但是，稍后您将无条件地使用它：

```
<td><?php echo join($group_names, ",&nbsp; "); ?></td> 
```

解决方案：将初始化移到`$group_names = array()`条件之外。

除此之外，您的参数顺序错误`join`（您应该切换它们）。

# android - 如何在android的媒体控制器中为下一个和上一个按钮编写代码

> ID：10294985
> 
> 赞同：0
> 
> 时间：2012-04-24T09:12:22.723
> 
> 标签：android

你好朋友，我在我的代码中使用媒体控制器，我包括下面的代码，但是任何人都可以告诉我应该在这个方法中写什么，这样我就可以在媒体播放器中播放下一首和上一首歌曲。

```
 mediaController.setPrevNextListeners(new View.OnClickListener() {
              @Override
              public void onClick(View v) {
                //next button clicked

                  myVideoView.setVideoPath(filename);
              }
            }, new View.OnClickListener() {
              @Override
              public void onClick(View v) {
                //previous button clicked
              }
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:20:26.023

你将有一个这样的数组列表..

```
 ArrayList<String> filename = new ArrayList<String>(); 
```

包含您要播放的所有文件..

维护当前正在播放的文件名的索引...并且您可以使用该索引移动到下一个和上一个文件名..

# google-maps - 生成 MD5 指纹时在 .android 密钥库中出错

> ID：10294989
> 
> 赞同：0
> 
> 时间：2012-04-24T09:12:39.400
> 
> 标签：google-maps

我想在我的 android 应用程序中使用谷歌地图..在生成 MD5 指纹时，我在控制台 keytool -list -alias androidkey -keystore debug.keystore 中输入了要求密码的命令，我不知道密码所以我输入了错误的密码所以它显示错误 keytool error: java.io.IOException: Keystore was tampered with, or password is wrong 所以我打开 debug.keystore 文件，现在关闭文件后它没有显示 debug.keystore 文件..它只显示调试文件.. 现在我再次尝试生成 MD5，它显示错误 keytool 错误：java.lang.Exception：密钥库文件不存在：debug.keystore 我该怎么办？请帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:09:30.853

您可以为 Eclipse 安装 Keytool 插件。Keytool 是一个有用的插件，可以创建和管理证书。如果要安装，请从帮助 >> 安装新软件菜单中将[http://keytool.sourceforge.net/update添加到可用软件列表中。](http://keytool.sourceforge.net/update)

# javascript - 如何防止注入的 JavaScript 文件参考代码在我的网页中运行？

> ID：10294992
> 
> 赞同：1
> 
> 时间：2012-04-24T09:12:46.890
> 
> 标签：javascript, security, gmail, code-injection, javascript-injection

我不知道是否可以阻止将 JavaScript 引用文件脚本注入网页，但我看到一些网站阻止您在注入的 JavaScript 引用文件脚本中运行函数，除非页面注册的是 JavaScript。例如，我能够将 10 个具有不同前缀的不同 JQuery 脚本（具有不同版本）注入到 Google Mail 中，但它们在阻止您执行某些 JQuery 命令方面做得很好。您可以做一些事情，但只能获取数据（而不是设置数据）.. 例如 $jquery171('html').html() （它只是查看页面的源代码）。如何防止其他脚本像在 Google Mail 中一样在我的网页中运行？有没有人这样做过？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T16:21:51.367

您所说的漏洞称为[跨站点脚本](https://www.owasp.org/index.php/Cross-site_scripting)；简称 XSS。OWASP 的[十大项目](https://www.owasp.org/index.php/Top_Ten)还将向您介绍作为 Web 应用程序开发人员应该了解的其他常见攻击。

为了保护您自己的代码免受 XSS 攻击，您绝不能将用户提交的数据打印到所提供的输出 HTML 页面。您必须根据您在 HTML 结构中打印用户数据的位置，以与上下文相关的方式对数据进行编码。请注意，所有不是来自您自己的程序的数据都应该被视为不受信任的——包括 HTTP 标头、URL、cookie、表单 POST 数据以及来自“外部”系统（如数据库）的数据。

请参阅[XSS 预防备忘单](https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet)，以更好地了解 HTML 输出的输出编码的基本原理。

无论您是否认为自己是恶意的，您对谷歌所做的一切都是非法的。您正在有效地执行 [部分] 渗透测试，以确定他们的代码对 XSS 的漏洞。虽然 GMail 可能不太介意这类事情——当然，它们必须处理恶意垃圾邮件 HTML 电子邮件——但其他一些网站的所有者肯定会这样做；在美国，人们因所做的远远少于你所描述的而被捕并受到指控。

开发您自己的网站进行测试。您将无权测试其他人的安全性。考虑看看像[WebGoat](http://owasp.org/index.php/Category%3aOWASP_WebGoat_Project)和[Gruyere](http://google-gruyere.appspot.com)这样的项目，为你提供一个合法允许攻击的环境。

# vb.net - 如何在vb中声明olFormatHtml

> ID：10294993
> 
> 赞同：0
> 
> 时间：2012-04-24T09:12:54.657
> 
> 标签：vb.net, outlook

我正在尝试发送格式为 HTML 的邮件，但我收到一个错误，显示`olFormatHtml`未声明。我该如何申报？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:06:04.677

替换`olFormatHtml`为`Outlook.OlBodyFormat.olFormatHTML`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-03T00:24:46.880

我在 Excel 2007 中使用 VBA 将工作簿附加到电子邮件并格式化该电子邮件的正文。我刚刚尝试了这个建议，得到了一个运行时错误 438：对象不支持这个属性或方法。

相反，我设置`.bodyformat = 2`将电子邮件文本显示为 html，并且它有效。例如....

```
Set Outlook = CreateObject("Outlook.Application")
Set MailItem1 = Outlook.CreateItem(0)

With MailItem1
    .BodyFormat = 2
    'sample formatting change....
    .htmlbody = "<font color = 'red'>" & "SAMPLE TEXT" & "</font><br/>"
    .display
End With

Set MailItem1 = Nothing
Set Outlook = Nothing 
```

# html - 使用 SeamFramwork 将实际 HTML 格式化为可读

> ID：10294994
> 
> 赞同：1
> 
> 时间：2012-04-24T09:12:57.373
> 
> 标签：html, jsf, richfaces, format, seam2

从 SeaMFramework 生成 xhtml 页面时，有没有办法将实际的 HTML 格式化为可读（格式良好）的文本。

我希望能够右键单击我的网页和查看源代码，其中 html 和 javascript 格式正确（选项卡式，新行）。我正在使用 JSF 和 Richfaces，它们对自己的 html 和 javascripts 进行分类，我希望它们更具可读性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T16:27:57.330

你可以使用[`JTidyFilter`](http://jtidy.sourceforge.net/multiproject/jtidyservlet/filter.html)这个。下载[jtidyservlet.jar](http://jtidy.sourceforge.net/nightly/jtidyservlet-r8-SNAPSHOT.jar)，将其放入`/WEB-INF/lib`并注册过滤器，如下所示`web.xml`：

```
<filter>
    <filter-name>jTidyfilter</filter-name>
    <filter-class>org.w3c.tidy.servlet.filter.JTidyFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>jTidyfilter</filter-name>
    <url-pattern>*.jsf</url-pattern> <!-- Or whatever you're using for JSF -->
</filter-mapping> 
```

我个人不会关心这个。该过滤器具有显着的性能影响，Chrome/Firebug/IE9 等浏览器的开发工具已经在 F12 上显示了格式良好的 HTML。无论如何，关心这一点的是（纯粹的）开发人员，而不是“愚蠢的”最终用户。