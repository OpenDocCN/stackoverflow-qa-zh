# StackOverflow 问答 12174000-12174999

# mifare - desfire 命令集详细信息

> ID：12174000
> 
> 赞同：4
> 
> 时间：2012-08-29T08:45:38.443
> 
> 标签：mifare

我有 java 卡方面的经验，但在为 Desfire 编程主机应用程序方面是新手，如何或在哪里可以找到 Desfire 的命令集描述？（我不需要像恩智浦在“产品简短数据表”中提到的一般信息），我需要命令指令代码和参数详细信息和响应（如 APDU 或其他东西）。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T17:35:31.910

我和你有完全相同的麻烦。与命令文档最接近的是一篇博客文章，其中展示了 desfire 通信的几个示例。

[http:](http://ridrix.wordpress.com/2009/09/19/mifare-desfire-communication-example/) //ridrix.wordpress.com/2009/09/19/mifare-desfire-communication-example/ `

但是有一个库可以帮助您将 desfire 命令放在一起：

[http://code.google.com/p/nfc-tools/wiki/libfreefare](http://code.google.com/p/nfc-tools/wiki/libfreefare)

编辑：事实证明，您无法自由获取文档。您需要签署 NDA 然后购买。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-02T01:25:04.907

可以从这个主机卡仿真项目中找到非常完整的命令发送。它展示了如何在 Android 手机上模拟 DESFire 卡：

*   [https://github.com/jekkos/android-hce-desfire/blob/master/hceappletdesfire/src/main/java/net/jpeelaer/hce/desfire/DesFireInstruction.java](https://github.com/jekkos/android-hce-desfire/blob/master/hceappletdesfire/src/main/java/net/jpeelaer/hce/desfire/DesFireInstruction.java)

我发现这个 PDF 很有用（旧型号的第三方命令列表） - 你可以开始使用获取应用程序列表之类的东西：

[http://neteril.org/files/M075031_desfire.pdf](http://neteril.org/files/M075031_desfire.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-05T20:15:14.863

您无需购买，在您签署 NDA 后，数据表是免费的，恩智浦让您可以下载安全文档。

# actionbarsherlock - 稍后无法显示隐藏在“onPrepareOptionsMenu”中的菜单项

> ID：12174001
> 
> 赞同：2
> 
> 时间：2012-08-29T08:45:43.360
> 
> 标签：actionbarsherlock, menuitem

我想创建一个菜单项并在稍后发生事件时显示它。但是，当我`menuItemDone.setVisible(true);`稍后在代码上触发时，菜单项不显示。它保持隐藏。知道如何创建隐藏菜单项并在事件发生时激活吗？菜单在活动中膨胀，片段的作用是：

```
 @Override
        public void onPrepareOptionsMenu(Menu menu) {
            menuItemDone = menu.findItem(R.id.pi_menu_done);
            if(some condition){
              menuItemDone.setVisible(false);
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:04:10.517

这对我有用..

```
public boolean onCreateOptionsMenu(Menu menu) 
{
    Menu m_menu = menu;
    m_menu.add(Menu.NONE, Menu.FIRST+1, 0, "one");
    m_menu.add(Menu.NONE, Menu.FIRST+2, 0, "two");
    m_menu.add(Menu.NONE, Menu.FIRST+3, 0, "three");
    m_menu.add(Menu.NONE, Menu.FIRST+4, 0, "four");
    return super.onCreateOptionsMenu(menu);
}

public boolean onPrepareOptionsMenu(Menu menu) 
{
     Menu m_menu = menu;

     if(bTested)
     {
         m_menu.findItem(Menu.FIRST+1).setVisible(false);
         m_menu.findItem(Menu.FIRST+2).setVisible(true);
     }
     else
     {
         m_menu.findItem(Menu.FIRST+1).setVisible(true);
         m_menu.findItem(Menu.FIRST+2).setVisible(false);
     }

     if(bConnected)
     {
         m_menu.findItem(Menu.FIRST+3).setVisible(false);
         m_menu.findItem(Menu.FIRST+4).setVisible(true);
     }
     else
     {
         m_menu.findItem(Menu.FIRST+3).setVisible(true);
         m_menu.findItem(Menu.FIRST+4).setVisible(false);
     }

     return super.onPrepareOptionsMenu(menu);
} 
```

# c# - 如何释放 BitMap 类持有的文件

> ID：12174004
> 
> 赞同：4
> 
> 时间：2012-08-29T08:45:53.547
> 
> 标签：c#

我有以下代码：

```
Bitmap image = new Bitmap(filePath);
...
image.Save(someOtherPath);
image.Dispose();
File.Delete(filePath);
File.Move(someOtherPath, filePath); 
```

File.Delete 行引发以下错误：

```
The process cannot access the file '...' because it is being used by another process. 
```

如何让 C# 释放它对文件的锁定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T08:47:49.900

尝试

```
using(var image = new Bitmap(filepath))
{
    image.Save(someOtherPath);
}

File.Delete(filePath);
File.Move(someOtherPath, filePath); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T08:55:38.240

```
the mistake came from the file open by your Image class
Image image;

using(FileStream myStream = new FileStream(path))
  {    
     image = Image.FromStream(myStream);
  } 
```

# javascript - 如何优化此 jquery 循环的执行时间？

> ID：12174005
> 
> 赞同：4
> 
> 时间：2012-08-29T08:45:53.547
> 
> 标签：javascript, jquery, performance, execution-time

我有一个循环，它遍历表 cel 中的所有 div，类为“GridCell”。在某些情况下，当调整网格或列的大小时，这需要发生。

我扩展了行数和列数，以查看更多时间差异，现在循环大约为 750 毫秒。

但我不明白的是，“只是循环的一部分”要快得多。请参阅以下三个循环。第一个是缓慢的。仅执行第一个循环的一部分的第二个和第三个循环非常快。

```
//Around 750 ms
$('table.Grid tbody td.GridCell > div').each(function() {
    var width = $(this).parent().width();
    $(this).css('width', width - 3);
});

//Around 60 ms
$('table.Grid tbody td.GridCell > div').each(function() {
    var width = $(this).parent().width();
});

//Around 15 ms
$('table.Grid tbody td.GridCell > div').each(function() {
    $(this).css('width', 100);
}); 
```

所以一条线，只有 60 或 15 毫秒，但两者加起来是 750。这有什么区别？

ps 执行循环的顺序无关紧要。第一个循环总是比其他循环慢很多，最后执行该循环时也是如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T08:53:04.920

In the first loop, you are calculating a computed width, then applying that to another element for each iteration. In the second loop, all you do is computing the width, and assigning it to a variable. And in the third loop, you are simply applying static inline styles.

What I’m saying is that the last two loops combined does not equal the functionality of the first, so it’s no surprise that the first one slower than the other two combined.

You should try something like:

```
var $divs = $('table.Grid tbody td.GridCell > div'),
    m = [];

// case 1
$divs.each(function() {
    var width = $(this).parent().width();
    $(this).css('width', width - 3);
});

// case 2
$divs.each(function() {
    m.push( $(this).parent().width() );
}).each(function(i) {
    $(this).css('width', m[i] - 3);
}); 
```

I made a simple perf test here: [http://jsperf.com/tablewidth](http://jsperf.com/tablewidth) and the difference seems to be very small.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T09:30:21.287

```
// collect the widths from the first row only
var widths = $('table.Grid tbody tr:first-child td.GridCell').map(function(idx) {
  return $(this).width() - 3;

  // or use:
  // return this.clientWidth - 3;
  // if you're not targeting IE <= 7
});

// apply the widths to each div
$('table.Grid tbody td.GridCell > div').each(function(idx) {
  this.style.width = widths[idx % widths.length] + 'px';
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T09:15:05.543

```
var $rows = $('table.Grid tbody').children('tr');

// we only need the widths from the first row
var widths = $rows.first().children('td').map(function() {
    return $(this).width() - 3;
}).get();

// process each row individually
$rows.each(function() {
    $('td.gridCell > div', this).css('width', function(i) {
         return widths[i];
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T09:07:58.193

我很难说出确切的细节，但我理解这个问题是这样的：

`var width = $(this).parent().width();`- 你调用这个，浏览器被迫让你获得所选元素的真实尺寸。 `$(this).css('width', 100);`- 这会导致浏览器重排文档。所以你运行这条线，浏览器必须重新计算页面的一部分。

为什么 first 的工作速度比其他两个循环慢？我看到它就像你只做一次`var width = $(this).parent().width();`它可以计算所有宽度并从缓存中给出它们。现在，当您只执行此行时`$(this).css('width', 100);`- 浏览器可以等到脚本执行。并一次重绘所有更新元素。但是，当您执行第一个循环时，您会强制浏览器计算宽度，而不是更新某些元素。尺寸缓存已损坏。现在你又想获得一个宽度，浏览器必须重绘页面。因此，每个循环它都会重绘一个与其他两个循环相反的页面，而它只能执行一次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T08:55:41.683

假设父级宽度的计算不是动态的（子级的大小调整会影响父级）并且宽度是恒定的（如果是大的话）。

```
var width = $(this).parent().width();

$('table.Grid tbody td.GridCell > div').each(function() {
    $(this).css('width', width - 3);
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-29T08:52:55.367

in your first example

```
$('table.Grid tbody td.GridCell > div').each(function() {
    var width = $(this).parent().width();
    $(this).css('width', width - 3);
}); 
```

you're evaluating `$(this)` twice. try to write instead

```
$('table.Grid tbody td.GridCell > div').each(function() {
    var $this = $(this);
    var width = $this.parent().width();
    $this.css('width', width - 3);
}); 
```

or ~~even better~~ (edit: *not sure*) try also to use the current element passed along the `each()` method

```
$('table.Grid tbody td.GridCell > div').each(function(i, el) {
    var $this = $(el);
    var width = $this.parent().width();
    $this.css('width', width - 3);
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-29T08:53:16.997

what if you use

```
$('table.Grid tbody td.GridCell > div').each(function(i,domEle) {
    $(domEle).css('width', $(domEle).parent().width() - 3);
}); 
```

And also try to use optimize selector in jQuery

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-29T09:46:27.703

好的，这是另一种选择：

```
$('table.Grid tbody td.GridCell > div').css('width', function() {
    return $(this.parentNode).width() - 3;
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-29T09:24:01.577

***这不一定是 JS 问题！***忘记循环，您根本不需要使用 JS/jQuery 来实现所需的功能。

要使子 div`.GridCell`占用*所有可用宽度 - 3px*，您可以使用以下 CSS 规则：

```
.GridCell>div {
  width:auto;             /*take up all available width (for block elements)*/
  margin:0 1.5px;         /*add a 1.5px buffer on both sides of the div*/
} 
```

如果您想真正花哨并且不关心浏览器兼容性矩阵有些差，您可以依赖 CSS3 `calc()`：

```
.GridCell>div {
  width:calc(100% - 3px); /*look up vendor-specific prefixes of the property
                            if you want for this to work on more browsers*/
  margin: 0 auto;         /*now that the width is calculated correctly above,
                            center the div. Or don't!*/
} 
```

[瞧](http://jsfiddle.net/ovfiddle/8AjaE/)

# python - 如何使用 ctypes python 指针更改结构字段

> ID：12174008
> 
> 赞同：1
> 
> 时间：2012-08-29T08:45:55.047
> 
> 标签：python, ctypes

下面是我使用 ctypes 访问 dll 值的代码。

我的目的是存储结构字段地址。每当结构中的值发生更改时，我都可以访问地址并获取更改的值。

```
DUMMY_DLL_PATH = "dummyModel.dll"

class MyStruct(ctypes.Structure):  
    _fields_ = [("field_one", ctypes.c_int),  
                ("field_two", ctypes.c_int)]  

d_m = ctypes.cdll.LoadLibrary(DUMMY_DLL_PATH)  

d_i = MyStruct.in_dll(d_m,"dummy_In")  

in_field = ctypes.c_int(d_i.field_one)  

#storing the address  
b = ctypes.addressof(in_field)  
b_v = ctypes.cast(b,ctypes.POINTER(ctypes.c_int))  

k= b_v.contents   

print 'before',d_i.field_one,k.value  
#changing the value  
d_i.field_one = 10  

print 'After',d_i.field_one,k.value 
```

### 输出：

```
Before 0 0  
After 10 0 
```

通过指针，值不会改变。仍然为 0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T12:26:10.990

问题是`in_field`一个新`c_int`对象占用与原始结构不同的内存。您想要的是`c_int.from_buffer`（[docs](http://docs.python.org/library/ctypes.html?highlight=from_buffer#ctypes._CData.from_buffer)），它共享原始对象的内存。这是一个例子：

### Windows DLL 源代码`x.c`编译为`cl /LD x.c`：

```
struct MyStruct
{
    int one;
    int two;
};

__declspec(dllexport) struct MyStruct myStruct = {1,2}; 
```

### Python脚本：

```
from ctypes import *

class MyStruct(Structure):
    _fields_ = [
        ("one", c_int),
        ("two", c_int)]
    def __repr__(self):
        return 'MyStruct({},{})'.format(self.one,self.two)

dll = CDLL('x')
struct = MyStruct.in_dll(dll,"myStruct")
alias1 = c_int.from_buffer(struct, MyStruct.one.offset)
alias2 = c_int.from_buffer(struct, MyStruct.two.offset)
print struct
print 'before',alias1,alias2
struct.one = 10
struct.two = 20
print 'after',alias1,alias2 
```

### 输出：

```
MyStruct(1,2)
before c_long(1) c_long(2)
after c_long(10) c_long(20) 
```

# php - YII 单独的日志文件以按类别存储消息

> ID：12174012
> 
> 赞同：2
> 
> 时间：2012-08-29T08:46:16.370
> 
> 标签：php, logging, yii

我想将我的日志消息存储在单独的日志文件中，而不是默认的 /protected/runtime/application.log 文件中。

我的 config/main.php 文件就像

```
'log'=>array(
            'class'=>'CLogRouter',
            'routes'=>array(
                array(
                    'class'=>'CFileLogRoute',
                    'levels'=>'error, warning,info,trace',
                    'categories'=>'system.*',
                ), 
```

我的日志消息功能在这里使用

```
public function changeLanguage($localLanguage)
{

    $currentLanguage=yii::app()->language;
    yii::app()->language=$localLanguage;
    $message='langusge changed from '.$currentLanguage.' to '.$localLanguage;
    $level='info';
    $category='system.web.CController';
    Yii::log($message, $level, $category);
} 
```

此日志消息与我的其他消息一起存储在 application.log 中。所以我想要单独的文件用于我的更改语言功能日志。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-29T08:54:48.423

您需要定义一个额外的日志路由，指定一个不同的[日志文件名](http://www.yiiframework.com/doc/api/1.1/CFileLogRoute#logFile-detail)：

```
'log'=>array(
    'class'=>'CLogRouter',
    'routes'=>array(
        array(
            'class'=>'CFileLogRoute',
            'categories'=>'system.*',
        ),
        array(
            'class'=>'CFileLogRoute',
            'logFile'=>'custom.log',
            'categories'=>'custom.*',
        ),
    )
) 
```

更多详细信息可以在权威指南的[日志记录](http://www.yiiframework.com/doc/guide/1.1/en/topics.logging)部分中找到。

# iphone - MPMoviePlayerController 中禁用了快进和计时器控件

> ID：12174015
> 
> 赞同：0
> 
> 时间：2012-08-29T08:46:27.327
> 
> 标签：iphone, objective-c, mpmovieplayercontroller

我正在使用 MPMoviePlayerController 播放媒体。它工作正常，但禁用了快进和计时器控件。我有以下代码：

```
 moviePlayer =  [[MPMoviePlayerController alloc]initWithContentURL:songUrl];
    [moviePlayer.backgroundView setBackgroundColor:[UIColor blackColor]];   
    moviePlayer.controlStyle = MPMovieControlStyleDefault;
    moviePlayer.shouldAutoplay = YES;
    [moviePlayer setScalingMode:MPMovieScalingModeNone];
    [self.view addSubview:moviePlayer.view];
      [moviePlayer setFullscreen:YES animated:NO]; 
```

我有以下屏幕截图：

![在此处输入图像描述](../Images/45a94c6d57d922251451b4925b5f44bd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:10:56.633

您没有向我们展示`songUrl`外观，但从症状来看，我猜它指的是一个没有`Content-Length`标头的 HTTP URL。因为 iOS 在完成读取文件之前无法确定文件长度，所以它没有要显示的长度。

或者，可能`songUrl`是指没有定义开始或结束时间的 HTTP 实时流媒体流（如实时提要）。

# wix - Burn: the Repair Button

> ID：12174017
> 
> 赞同：0
> 
> 时间：2012-08-29T08:46:36.510
> 
> 标签：wix, wix3.6, burn

I have some problems understanding how the 'repair button' works in burn. If my program is installed, and I'll click the repair button, my program is beeing installed again (if I understood the log files right). Is there a way to controll what's happening by clicking the button?? For example that it should redirect me to the .msi modify/change interface?

Am I right, that this line in the Rtf-theme:

> < Button Name="RepairButton" X="-171" Y="-11" Width="75" Height="23" TabStop="yes" FontId="0" HideWhenDisabled="yes">#(loc.ModifyRepairButton) < /Button >

the *loc.ModifyRepairButton* redirects me to somewhere else??

This is what I would like to achieve:

The user should have the possibility to add some packages after the installation, for example if he has forgotten to check somehting or some hardware has changed etc.

thanks!!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T16:35:43.253

The standard WiX UI doesn't appear to offer the user the ability modify installation options seleted during the initial installation, only to either uninstall completely or repair the installation.

If you want to have Burn allow you to modify the installation then I believe the only solution (at least for now) will be to create your own custom UI for Burn, e.g. by using the [managed bootstrapper application host](http://blogs.msdn.com/b/heaths/archive/2011/10/28/introducing-managed-bootstrapper-applications.aspx), and have that UI invoke the modify action on the bootstrapper engine (which will in turn invoke the modify action on your MSI).

The `#(loc.ModifyRepairButton)` is just the text to be displayed for the button - this syntax instructs Burn to look up the value of the `ModifyRepairButton` entry in the .wxl file. its the `Name` of the button which defines the behaviour of the button, however unfortunately there doesn't appear to be a corresponding "ModifyButton" behaviour defined in the standard boostrapper UI.

# iphone - 解析数据库 - 设置下载超时（目标 c）

> ID：12174018
> 
> 赞同：1
> 
> 时间：2012-08-29T08:46:37.383
> 
> 标签：iphone, objective-c, ios, download, timeout

我正在从 parse.com 下载我的应用程序的数据，但如果数据下载时间过长，我需要知道如何设置超时。我已经进行了互联网连接检查，如果有连接，它将下载数据，但如果互联网非常慢，我需要下载超时，这样用户就不会等待很长时间，因此无法使用该应用程序. 请帮助我如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T09:11:51.183

使用计时器。一段时间后只需调用方法。在方法内部取消下载

```
NSTimer *timerTimeOut = [NSTimer scheduledTimerWithTimeInterval:3.0 target:self selector:@selector(timeOutTriggered) userInfo:nil repeats:NO]; 
```

方法定义

```
 - (void)timeOutTriggered{
if( isDownloading )
{
    isDownloading = NO;
    [urlConnection cancel];
    [urlConnection release];          
}

isDownloading = NO;

 if( webData != nil ){
    [webData release];
    webData = nil;
 }
} 
```

# csv - 如何制作 schema.ini - 需要帮助

> ID：12174019
> 
> 赞同：2
> 
> 时间：2012-08-29T08:46:37.880
> 
> 标签：csv, schema, schema-design

早晨，

我是新手，所以只需要快速了解如何创建 schema.ini 文件。

我需要有 2 个列，一个用于产品 sku，它是一个字符串值。一个是价格，它是一个十进制值。

我目前在我的 schema.ini 中有以下内容，但我不确定它们应该是什么，我已将 sku 作为文本完成，但不确定小数点。

```
[test.csv]
ColNameHeader=False
Format=CSVDelimited
DateTimeFormat=dd-MMM-yyyy
Col1=sku Text
Col2=amzPrice 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:24:59.083

当您使用 JET 时，我建议最合适的数据类型是 Currency。这是一个 8 字节的十进制值，范围为 -922,337,203,685,477.5808 到 922,337,203,685,477.5807。我不鼓励使用 Double 来存储十进制数，因为它不精确。例如，请参阅[此 SO 问题](https://stackoverflow.com/questions/2256064/vb-net-best-data-type-for-storing-currency-values)。

如果您只需要有便士/美分的分辨率，那么您可以将您的货币值存储为整数数据类型（例如 Long）并将它们视为便士，而不是英镑。这样可以确保您永远不必担心舍入错误，但您不能拥有一分钱一分钱。

Microsoft 维护了一个[受支持的数据类型列表](http://msdn.microsoft.com/en-us/library/windows/desktop/ms709353%28v=vs.85%29.aspx)。[您可以在此处](http://en.wikibooks.org/wiki/JET_Database/Data_types)找到 JET 数据类型的定义。

# android - 通用代码的 SVN 存储库 -phonegap

> ID：12174028
> 
> 赞同：4
> 
> 时间：2012-08-29T08:47:09.943
> 
> 标签：android, ios, svn, cordova

我正在创建一个 phonegap 应用程序，它将由

```
Android 
Windows phone
iOS 
BlackBerry 
```

到目前为止，主要开发发生在 Android 上，所有的 JS/HTML 都被复制到其他平台上。继续前进，我们必须为所有平台保留不同的存储库，以便于维护。

我能想到的显而易见的方法是为每个平台创建一个文件夹并在那里维护代码。但在这种情况下，如果我们修改任何 www (JS/HTML/CSS/Images) 内容，我们将需要手动复制到所有 repos。

有没有更好的方法来处理公共文件，或者将相同的文件复制到 4 个位置是唯一的出路？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:02:37.347

一种可能的解决方案是将您的代码拆分为以下文件夹/存储库：

*   common - 包含所有独立于平台的文件
*   android - 包含 android 特定文件
*   windows - 包含 windows 特定文件
*   ios - 包含 ios 特定文件
*   blackberry - 包含黑莓特定文件

然后创建一个小脚本，通过执行以下步骤，可以从这些文件中创建一个有效的项目：

*   将文件夹的所有文件复制`common`到一个`target`文件夹
*   将平台文件夹（例如android）的文件复制到该`target`文件夹​​（并覆盖现有文件）
*   将目标文件夹打包到应用程序包并部署在设备上

因此，您必须仅在一个位置更改平台独立，并且仍然可以更改以添加特定于平台的代码（或覆盖特定平台的通用代码）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T08:59:53.213

You can use ["Externals"](http://svnbook.red-bean.com/en/1.0/ch07s03.html) for this. An external repository allows you to include a separate repository within a given repo - so within your device-specific repositories, you can include the common "JS/HTML" repository.

We have actually stepped away from this approach, because it does mean that every time someone commits a new version in the shared repo, that change immediately propagates to the other repositories. This can cause problems managing those dependencies - so we use a build script to check out a specific version from the shared repo as part of the build process.

# php - JavaScript 通过 SMTP 验证电子邮件

> ID：12174029
> 
> 赞同：-1
> 
> 时间：2012-08-29T08:47:12.930
> 
> 标签：php, javascript, email, smtp, email-validation

我想让我的网站表单在允许他们提交网络表单之前检查访问者插入的电子邮件是否有效并且存在。

我知道有很多 Javascript 可以检查电子邮件模式验证。但我需要诸如 SMTP 电子邮件检查或验证之类的东西。

访问者插入的电子邮件必须是有效格式并且存在，这是为了防止访问者插入无效的电子邮件、错误的电子邮件地址以及垃圾邮件地址。

请提供使用 Javascript 验证电子邮件的教程链接。

我相信服务器端脚本可以做到这一点，但我需要在网络访问者选择提交按钮以提交表单之前立即响应网络表单。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-29T08:54:12.170

仅检查电子邮件是否“有效”而不确认您的用户“拥有”该电子邮件帐户是没有意义的。因此，确认电子邮件地址有效且实际归该用户所有的唯一方法是向他们发送验证电子邮件。

在您的电子邮件中，您将包含一个唯一代码，并将其存储在数据库中。

然后在电子邮件中让他们单击指向您的网站的链接，您可以在其中验证唯一代码。这允许您确认电子邮件地址。

一旦用户确认了他们的电子邮件地址 - 然后让他们登录到您的网站

# windows-phone-7 - windows phone 7中的行更新

> ID：12174030
> 
> 赞同：0
> 
> 时间：2012-08-29T08:47:14.337
> 
> 标签：windows-phone-7, linq-to-sql

我正在开发一个 MVVM 应用程序，我正在尝试从 viewmodel 更新我的数据库对象。

我正在尝试更新`IsDisplayed`绑定到双向模式下切换开关的布尔值。但最终对象没有更新......出了什么问题？

这是我想保存布尔状态时调用的方法：

```
public static void UpdateIsDisplayedInServices(List<ECList> lists)
{
    ECList listToUpdate;

    foreach (ECList list in lists)
    {
        listToUpdate = GetECList(list.DatabaseId);

        listToUpdate = list;     // I also tried listToUpdate.IsDiplayed = list.IsDiplayed
        ECContextManager.Context.SubmitChanges();
    }
} 
```

编辑：

我做了一个单元测试来暴露问题。

```
[TestMethod]
public void _1DeactivateService()
{
    bool newBool = false;

    ECContextManager.Dispose();

    ECList service = ECListManager.GetECList(2);

    // IsDiplayed is true by default
    service.IsDisplayed = newBool;
    service.Subtitle = "test";

    ECContextManager.Context.SubmitChanges();
    ECContextManager.Dispose();

    ECList service2 = ECListManager.GetECList(2);

    if (newBool)
    {
        Assert.IsTrue(service2.IsDisplayed);
    }
    else
    {
        Assert.IsFalse(service2.IsDisplayed);
    }
} 
```

最后`service2`有副标题“测试”，但 IsDiplayed 值仍然是“真”......

# java - 在 Android 中隐藏、显示和聚焦 editText

> ID：12174037
> 
> 赞同：1
> 
> 时间：2012-08-29T08:48:22.500
> 
> 标签：java, android

我有两个相关的问题。

我在 editText 上应用幻灯片翻译，它是按钮。出于显而易见的原因，我创建了两个按钮，一个可见的，一个不可见的。为了隐藏可见的并显示不可见的，我正在使用以下代码：

```
public void onAnimationEnd(Animation animation) {
    textBox.setVisibility(View.GONE);
    button.setVisibility(View.GONE);
    button2.setVisibility(View.VISIBLE);
    textBox2.setVisibility(View.VISIBLE);
    textBox2.requestFocus();
    button2.setEnabled(true);
    button.setEnabled(false);
} 
```

`textBox`原始的 editText在哪里，`button`是它的随附按钮。`textBox2`是我要展示的。

然而，原始的 editText 及其按钮仍然可见，而另一组没有出现。任何想法上面有什么问题？

其次，我可以在我的 .java 文件中找到屏幕大小，但是我如何将它传递到我的 .xml 动画文件中呢？或者有没有更好的方法来根据屏幕尺寸调整过渡量？

这是我调用动画的方式：

```
Animation translateAnimation = AnimationUtils.loadAnimation(first.this, R.anim.translate);
textBox.startAnimation(translateAnimation); 
```

翻译.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android" android:fillAfter="true" android:fromYDelta="0" android:toYDelta="-160" android:duration="50" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T08:59:55.187

To answer the first part of your question you would probably want to call invalidate() on the views for which you have changed the visibility. For the second part it might be better if you could show how are you adjusting the transition in your code currently.

# django - 禁止 (403) CSRF 验证失败。请求中止

> ID：12174040
> 
> 赞同：10
> 
> 时间：2012-08-29T08:48:38.950
> 
> 标签：django, django-views, django-middleware

我正在制作登录表单的应用程序，但是当我运行我的应用程序并单击登录按钮时，将发生以下错误

**禁止 (403) CSRF 验证失败。请求中止。**

view.py 的代码如下：

```
from django.template import  loader
from django.shortcuts import render_to_response
from registration.models import Registration
from django.http import HttpResponse
from django.template import RequestContext
from django.shortcuts import redirect

def view_login(request,registration_id):
   t = loader.get_template('registration/login.html') 
   try:
         registration=Registration.objects.get(pk=registration_id)
   except Registration.DoesNotExist:
         return render_to_response("login.html",{"registration_id":registration_id})

def home(request,registration_id):
    if request.method == "POST":
      username = request.POST.get('user_name')
      password = request.POST.get('password')
      user = authenticate(username=username, password=password)
      if user is not None:
        if user.is_active:
          login(request, user)
        # success
          return render('registration/main_page.html',{'registration_id':registration_id},context_instance=RequestContext(user))
        else:
         #user was not active
           return redirect('q/',context_instance=RequestContext(user))
      else:
        # not a valid user
           return redirect('q/',context_instance=RequestContext(user))
    else:
       # URL was accessed directly
           return redirect('q/',context_instance=RequestContext(user)) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-29T08:51:45.833

您需要`{% csrf_token %}`在表单中添加

[https://docs.djangoproject.com/en/2.2/ref/csrf/](https://docs.djangoproject.com/en/2.2/ref/csrf/)

像那样 ：

```
<form>
    {% csrf_token %}
    <anything_else>
</form> 
```

此外，每次使用时都必须使用 RequestContext(request) `render_to_response`：

```
return render_to_response("login.html",
    {"registration_id":registration_id},
    context_instance=RequestContext(request)) 
```

而且您必须导入身份验证和登录：

```
from django.contrib.auth import authenticate, login 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T20:42:49.483

我在使用“The Definitive Guide to Django”一书时遇到了这个问题，其中使用了 1.1 版。本书没有解决后续版本中强制要求的 csrf_token 验证需求。

要解决此问题，请添加：

```
from django.template import RequestContext 
```

到 views.py 文件和 render_to_response 函数的这个添加参数：

```
context_instance = RequestContext(request) 
```

一定要在模板`{% csrf_token %}`的`<form>`标签内添加

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-30T04:00:43.937

只是评论 `'django.middleware.csrf.CsrfViewMiddleware'`

在您的**settings.py 中**，这对我有用：

```
//settings.py
MIDDLEWARE = [
'django.middleware.security.SecurityMiddleware',
'django.contrib.sessions.middleware.SessionMiddleware',
'django.middleware.common.CommonMiddleware',
#'django.middleware.csrf.CsrfViewMiddleware',
'django.contrib.auth.middleware.AuthenticationMiddleware',
'django.contrib.messages.middleware.MessageMiddleware',
'django.middleware.clickjacking.XFrameOptionsMiddleware',
] 
```

**除非您以其他方式管理 CSRF，否则这可能存在安全漏洞，并且不建议这样做，因为您将容易受到 CSRF 攻击**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-26T09:00:53.833

当您出现“禁止 (403) CSRF 验证失败。请求中止”时，您可以选择执行以下操作：

**选项（2）**（非首选）

进口：

```
from django.template.context_processors import csrf 
```

添加到上下文：

```
context = {}
context.update(csrf(request)) 
```

返回：

-Django > 1.9 有“context”而不是“context_instance”

```
return render_to_response("login.html",
    {"registration_id":registration_id},
    context=context) 
```

**选项（3）**（首选）

进口：

- 而不是导入“render_to_response”导入“render”

```
from django.shortcuts import render 
```

返回：

```
return render(request, "login.html", context) 
```

显然选项 3 更可取，因为“render”比“render_to_response”短，尤其是在您需要导入和添加内容时。我可以想象选项 2 保持更精简的上下文字典，但这似乎微不足道（？）。

为了清楚起见：

如上所述，这两种解决方案仍然需要您的 html 表单中的 {% csrf_token %}。并且**永远不要**关闭或评论 csrf middelware。

来源：

[RequestContext 上的旧 Django 1.9 文档](https://docs.djangoproject.com/en/1.9/ref/templates/api/#subclassing-context-requestcontext)

[csrf 处理器上的 Django 2 文档](https://docs.djangoproject.com/en/2.1/ref/templates/api/#django-template-context-processors-csrf)

[解释渲染的来源就足够了](https://stackoverflow.com/questions/17408947/python-render-with-csrf-protection)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-09-04T04:08:53.657

```
method: 'POST',
headers: {
              'Content-Type': 'application/json',
              "X-CSRFToken": $("[name=csrfmiddlewaretoken]").val()
         },

{% csrf_token %} => add this inside header tag in html 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-02-05T14:02:47.523

虽然这可能不是 OP 的问题，但我发现从 ezoic 添加验证代码实际上搞砸了我的 CSRF 流程。添加代码破坏了我的网站登录过程，可能还有其他形式。

# asp.net - HTML 表格在 IE9 中无法正确呈现

> ID：12174041
> 
> 赞同：7
> 
> 时间：2012-08-29T08:48:40.563
> 
> 标签：asp.net, vb.net, internet-explorer-9, rendering, html-table

真的很奇怪，这个。

我正在使用 an`asp:Repeater`创建一个 HTML 表，如下所示：

**标记：**

```
<asp:Repeater ID="myRpt" runat="server">
    <HeaderTemplate>
        <table id="myGrd" border="0" style="cursor:pointer;width:100%;  background-color:white;" cellpadding="2" cellspacing="0">
            <tbody>
    </HeaderTemplate>
    <ItemTemplate>
        <tr onclick="criteria.rowClicked(this);">
            <td style="border:solid 1px black;">
                <asp:Literal ID="lblName" runat="server"></asp:Literal>
            </td>
            <td style="border:solid 1px black;width:200px;">
                <asp:Literal ID="lblRange" runat="server"></asp:Literal>
            </td>

            <td style="display:none;" >
                <asp:Literal ID="lblMisc" runat="server"></asp:Literal>
            </td>
        </tr>
    </ItemTemplate>
    <FooterTemplate>
        </tbody> </table>
    </FooterTemplate>
</asp:Repeater> 
```

**VB：**

```
 Public Sub populateGrid(ByVal ds As DataSet)
        'ds is just made from a simple select query
        myRpt.DataSource = ds
        myRpt.DataBind()
    End Sub

 Private Sub myRpt_ItemDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.RepeaterItemEventArgs) Handles myRpt.ItemDataBound
        If e.Item.ItemType = ListItemType.Item Or e.Item.ItemType = ListItemType.AlternatingItem Then
            Dim lblName As Literal = e.Item.FindControl("lblName")
            Dim lblRange As Literal = e.Item.FindControl("lblRange")
            Dim lblMisc As Literal = e.Item.FindControl("lblMisc")

            lblName.Text = "<font style='font-size:10pt; font-family:arial;'>" & Trim(e.Item.DataItem("Name")) & "</font>"
            lblRange.Text = "<font style='font-size:10pt; font-family:arial;'>" & Trim(e.Item.DataItem("Range")) & "</font>"
            lblMisc.Text = "<font style='font-size:10pt; font-family:arial;'>" & Trim(e.Item.DataItem("Miscellaneous")) & "</font>"
        End If
    End Sub 
```

这在 Firefox 和 Chrome 中显示良好，并且大部分时间在 IE 中显示。然而，有时对于较大的表（50 多行），IE 的行为很奇怪。它似乎添加了一个空白单元格......

![在此处输入图像描述](../Images/0b64f7aedca171de599e9e13b45d5244.png)

...但 HTML 中没有任何内容 - 我使用开发人员工具进行了检查。不正确的行与正确的行具有相同的标记，但单元格文本除外。更重要的是，如果我删除了不正确的行，它上面的行就会开始显示错误。

请有人能建议为什么 IE 会这样渲染它，以及我能做些什么来阻止它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-31T16:56:02.127

这似乎是 IE9 在渲染大表时的一个已知错误。删除 table def 开始和结束标记之间的空格时，问题已解决，例如。`</td><td>`

[MSDN 讨论 IE 9 渲染](http://social.msdn.microsoft.com/Forums/en-ZA/iewebdevelopment/thread/e6f49d52-ec3f-47c5-802e-b80d1a58ed39)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T20:06:50.763

这是一个已知的 IE9 问题，您可以通过在 HTML 页面中的某处放置以下代码来解决此问题：

```
$(function() {
    var browser = $.browser;
    if ( browser.msie && browser.version.slice(0,3) == "9.0" ) {
        $('table').each(function(index) {
                var replace = $(this).html().replace(/td>\s+<td/g,'td><td'); 
                $(this).html(replace);
        });
    }
}); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-10-23T18:55:13.280

当发生 Click 事件时，我有一个巨大的表格。仅在 IE9 中发生，在 IE8、IE10、Chrome 等中一切正常。

上述解决方案对我以及其他同类答案都失败了。

我是这样解决的：

我在表格中添加了边框，很明显 HTML 不正确。要么缺少一些 colspan，要么需要的单元格`&nbsp;`或可能是任何东西。

我还注意到，现在有了表格`border=1`属性，点击扩展的问题就消失了。

所以我把一个类放在`xltable`桌子上并放入`.xltable td {border:0px solid white;}`我的css。

我的代码仍然不是“有效的”，但它可以工作。

# android - R.java android 丢失

> ID：12174052
> 
> 赞同：0
> 
> 时间：2012-08-29T08:49:10.143
> 
> 标签：android

清理项目时，我丢失了 R.java 类。那么请问我怎样才能找回呢？导致 R.java 在 gen 中自动定义。有没有办法做到这一点？

我已经将一个包导入到我的项目中，并在项目类和页面中使用它，但是当我导航到一个页面时使用一个包，应用程序会等待并且它仍在等待。

我怎样才能停止这个问题并转到下一页？

```
public class HomePage extends Activity {    
    @Override
        protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);
            setContentView(R.layout.person);
            Carousel car=(Carousel) findViewById(R.id.carousel);

            car.setOnItemClickListener(new OnItemClickListener(){

                public void onItemClick(CarouselAdapter<?> parent, View view,
                        int position, long id) {
                    // TODO Auto-generated method stub
                    if(position==0){
                        Intent i=new Intent(HomePage.this,StudentInformationActivity.class);

                        startActivity(i);
                        }else if(position==1){
                            Intent i=new Intent(HomePage.this,PersonalProfileActivity.class);
                            startActivity(i);
                        }

                }

            });
        }

    } 
```

在此页面上，我们使用人员作为活动，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T08:51:55.273

有时，当您清理项目时，R 文件会消失，我遇到了同样的问题。

我修复它的方法是：

*   确保所有的都`import android.R`被删除 - 再次清洁（如果这不能解决它，重新启动 eclipse 并重试）

或者

*   将指向 R 文件的指针放在注释 fe // setContentView(R.layout.main);
*   如果所有指向 R 文件的指针都在注释中，那么您应该只在文件中收到警告，并希望在其他地方出现错误。
*   修复错误，然后取消注释指针。有时 eclipse 会忽略一些错误并删除 R 文件，然后什么也没说，这很烦人，但这会解决它。:)

*   如果这仍然不起作用，您可以尝试创建一个新项目并将代码复制粘贴到其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T08:52:03.170

只需保存 XML 布局文件，它将自动生成新的 R 文件。但首先要确保该文件不包含任何错误。

关于第二个问题，我不确定我是否会得到它。我认为您的意思是您不能在此活动中引用 PersonalProfileActivity.class。如果它在另一个包中，请确保您导入的包包含此类。也不要忘记将它添加到您的清单文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T08:54:25.343

可能是您的 xml 文件中的错误。更正错误并清理项目。它会回来的！

# sql - 来自字符串的 SQL 查询

> ID：12174055
> 
> 赞同：2
> 
> 时间：2012-08-29T08:49:19.930
> 
> 标签：sql, sql-server

我正在尝试从使用变量生成的字符串中执行 SQL 查询。此 SP 生成一个 Select 查询，当我手动执行此查询时它可以工作，但是当它在 SP 中时，会出现类似的错误

> 消息 911，级别 16，状态 4，过程 sp_Products_Select，第 26 行
> 数据库“SELECT *，（从 SectionID = Products 的部分中选择部分”不存在。确保输入的名称正确。

从 SP 生成的查询

```
SELECT 
   *, 
   (Select Section 
    From Sections 
    Where SectionID = dbo.Products.SectionID) as Section,
   (Select Category 
    From Categories 
    Where CategoryID = Products.CategoryID) as Category 
FROM 
    Products 
WHERE 
    1 = 1AND (Status = 1 OR Status = 0) 
```

我的SP是，

```
ALTER PROC [dbo].[sp_Products_Select]
    @ProductID int,
    @Status int,
    @CategoryID int,
    @SectionID int
AS

DECLARE @SQL varchar(500)
SET @SQL ='SELECT *,(Select Section From Sections Where SectionID = Products.SectionID) as Section,(Select Category From Categories Where CategoryID = Products.CategoryID) as Category FROM Products WHERE 1 = 1';
IF @ProductID <> '0' BEGIN
    SET @SQL += 'AND ProductID = @ProductID';
END
IF  @Status <> 0 BEGIN 
    SET @SQL += 'AND Status = @Status';
END ELSE BEGIN
    SET @SQL += 'AND (Status = 1 OR Status = 0)';
END
IF @CategoryID <> '0' BEGIN
    SET @SQL += 'AND CategoryID = @CategoryID';
END
IF @SectionID <> '0' BEGIN
    SET @SQL += 'AND SectionID = @SectionID';
END

EXEC @SQL 
```

如何从 SP 正确执行此查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T08:53:34.917

~~您的`WHERE`条款中缺少一个空格：~~

 ~~```
WHERE 
    1 = 1AND (Status = 1 OR Status = 0) 
```~~ 

一定是：

```
WHERE 
    1 = 1 AND (Status = 1 OR Status = 0)
         *
         * space here is absolutely essential! 
```

~~因此，您需要更改构建 T-SQL 语句的存储过程的代码，以在其中至少放置**一个空格**`1 = 1`和`AND ....`~~

（*这不是问题，正如 Martin Smith 发现的那样......*）

**更新：**好的-毕竟似乎不需要空间.....

**但是**：尝试使用

```
EXEC (@SQL) 
```

我相信您在执行时需要将 SQL 语句放入括号中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T08:55:07.480

尝试简化您的查询，

```
SELECT  a.*, b.Section, c.Section
FROM    Products a
            INNER JOIN Sections b
                ON a.SectionID = a.SectionID
            INNER JOIN Categories c
                ON a.SectionID = c.Category 
```

在您的`SET @SQL`语法中，您需要`add extra space`使用它们。

```
SET @SQL += ' AND ProductID = @ProductID';
             ^ here 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T09:08:20.610

**编辑：**

所以`EXEC(..)`不会解决你所有的问题！

我认为你甚至需要声明 @ProductID 和 @CategoryID 以及动态查询的其他参数，如果你想在里面运行它们。

EXEC 启动另一个作用域，如另一个 StoredProcedure 调用。在其他范围内，您的 @variables 将不可用。您可以参考临时表，但不能参考内存表或变量。

我会说，将这些行更改为：

```
SET @SQL += 'AND ProductID = @ProductID' 
```

对于这样的事情（顺便说一句，这个有点难看）：

```
SET @SQL += 'AND ProductID = ' + CAST(@ProductID as varchar(20)) 
```

**或者**

看一下[sq_executesql](http://msdn.microsoft.com/en-us/library/ms188001.aspx)，您可以使用它为参数定义参数和值。如果您使用大量即席查询检查 SQL Profiler，引擎也会执行相同的操作。只需将输入作为带有 sp_executesql 和参数的动态 sql 运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T08:54:49.653

1=1 后需要一个空格

```
'SELECT *,(Select Section From Sections Where SectionID = Products.SectionID) as Section,(Select Category From Categories Where CategoryID = Products.CategoryID) as Category FROM Products WHERE 1 = 1 '; 
```

# eclipse - 为 Eclipse 转换 NetBeans build.xml

> ID：12174059
> 
> 赞同：0
> 
> 时间：2012-08-29T08:49:38.513
> 
> 标签：eclipse, netbeans, ant

我想知道是否有一种方法可以将为 Netbeans 创建的 build.xml 文件转换为可以在 eclipse 上运行的 build.xml 文件

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T03:16:09.830

我不知道有什么工具可以做到这一点。您可能需要手动转换。

让我们检查一下 netbeans 项目结构。

Netbeans 为项目生成一个`build.xml`（在项目的根文件夹中），但是，此构建文件不包含任何目标。所有生成的目标都放在`nbproject/build-impl.xml`. 通过这样做，可以将生成的内容和程序员以后可能添加的内容分开。

所以检查 build-impl.xml 然后。

它包含以下部分：

> *   初始化
> *   汇编
> *   罐
> *   执行
> *   调试
> *   文档
> *   junit编译
> *   junit 执行
> *   junit调试
> *   小程序
> *   清理

在初始化部分，目标为构建初始化了许多东西，包括许多宏定义。您可能会看到类似的东西`<j2seproject1:java classname="${run.class}"/>`，它们不是仅限于 netbeans 的任务。它们实际上是在构建文件的初始化部分中定义的宏。

因此，实际上，您可以在没有安装 netbeans 的情况下运行构建。但是，要在 eclipse 中使用它，您可能需要进行清理和一些修改。您可能需要检查定义的所有属性`nbproject/project.properties`；您可能需要删除其他转换为eclipse项目后永远不会使用的netbeans项目文件。

或者，也许，仅仅从现有源创建一个 Eclipse 项目可能会容易得多。

# c# - 使用 C# 验证 XML 元素

> ID：12174061
> 
> 赞同：0
> 
> 时间：2012-08-29T08:49:50.050
> 
> 标签：c#, xml

我们如何在 C#.Net 中验证 XML 元素

Xml 样本：

```
<Employee>
<Name>Taha</Name>
<Age>25</Age>
</Employee> 
```

如果有人给我发了上面的例子，但他忘记添加“Age”元素，那么我将如何在 C# 中验证它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T08:51:19.763

更好的方法是使用[XML Schema](http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschema%28v=vs.100%29.aspx)并对此进行验证。

您可以在 Code 项目中看到这篇文章：[C# - XML Schema Validator](http://www.codeproject.com/Articles/8781/C-XML-Schema-Validator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T08:51:26.350

您可以尝试使用 XSD 来验证您的 xml

[http://msdn.microsoft.com/en-us/library/astfyhd4%28v=vs.100%29](http://msdn.microsoft.com/en-us/library/astfyhd4%28v=vs.100%29)

您在此链接中有非常有趣的示例

[http://www.codeguru.com/csharp/csharp/cs_data/xml/article.php/c6737/Validation-of-XML-with-XSD.htm](http://www.codeguru.com/csharp/csharp/cs_data/xml/article.php/c6737/Validation-of-XML-with-XSD.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T09:27:22.983

回应其他发布的答案：您需要对您想要的内容进行一些架构验证。但是，您需要一个模式。如果没有，则需要创建一个。

你有两个选择：

1.  手写一个
2.  使用 xsd.exe（[XML 架构定义工具](http://msdn.microsoft.com/en-us/library/x6c1kb0s%28v=vs.110%29.aspx)）

选项一相当简单，但很乏味。选项二也相当简单，而且很快。使用 xsd.exe，您还可以选择生成 C# 类，您可以使用这些类在代码中操作文档并序列化为 XML。

# sml - 32 位 linux 和 64 位 linux 中的 SML 数据类型

> ID：12174062
> 
> 赞同：3
> 
> 时间：2012-08-29T08:49:54.017
> 
> 标签：sml

我认为在标准 ML 中：

*   int 在 32 位 Linux 上是 32 位

在 64 位 linux 上，int 也是 32 位的吗？此外，对于标准 ML，是否有一个地方（url）概述了不同数据类型的大小？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T09:15:50.533

整数的大小是特定于实现的——标准没有规定。[根据其文档](http://www.itu.dk/~sestoft/mosmllib/Int.html)，在 MoscowML 中，在 32 位平台上使用 31 位整数，在 64 位平台上使用 63 位整数。

SML/NJ 显然在 64 位和 32 位系统上都使用 31 位整数（我这么说显然是因为我没有在任何地方找到这个文档——我只是在我的 64 位机器上测试了它）。

在 MLton 中，甚至可以使用`-default-type`编译器的命令行参数设置 Int 的大小。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T09:16:43.613

您可以使用[`Int.precision`](http://www.standardml.org/Basis/integer.html#SIG%3aINTEGER.precision%3aVAL)来确定内置`Int`类型的大小。

类型的大小`Int`不是语言定义的，而是实现定义的，因此您要寻找的答案取决于您选择的编译器/解释器。

例如，Moscow ML 在 32 位机器上提供 31 位整数，在 64 位机器上提供 63 位整数。^(（[来源](http://www.itu.dk/~sestoft/mosmllib/Int.html#precision-val)）)

请注意，许多实现提供了几种 int 类型，其中一些可能是任意精度的。对于这些中的每一个，`precision`将存在一个相应的函数来告诉您该给定类型提供的精度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T21:49:00.917

请注意，高端 SML 实现[Poly/ML](http://www.polyml.org)默认提供无界（大）整数，因此您可以获得一个忠实的数学整数模型，而无需担心（通常的符号应用程序的正确性和效率）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-29T08:54:32.713

32 位或 64 位是指地址的维度。所以数据类型的大小相同，但指针大小会发生变化，因为 64 位系统使用 64 位来寻址内存

# java - 读取嵌入式 H2 数据库

> ID：12174066
> 
> 赞同：2
> 
> 时间：2012-08-29T08:50:36.180
> 
> 标签：java, python, database, h2

我正在使用用 Java 编写的第 3 方应用程序，它使用本地嵌入式 H2 数据库来存储数据。

我想编写一个 Python 应用程序来读取这些数据，并可能将其写回。关于在 SQLAlchemy 中使用 Postgress 引擎来实现这一点有很多建议，但是我从中收集到的是我需要在本地机器上安装某种服务器。我被困在这一点上。是否有这样的地方，访问它更像是一个文件以在本地对其运行 SQL 查询。这也将有助于打包（当我到达时）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-03T08:59:12.440

H2 通过充当 PostgreSQL 服务器来支持使用 PostgreSQL ODBC 驱动程序。

您需要在服务器模式下启动 H2。

你可以在这里读到它：

[http://www.h2database.com/html/advanced.html#odbc_driver](http://www.h2database.com/html/advanced.html#odbc_driver)

[http://www.theserverside.com/news/thread.tss?thread_id=46456](http://www.theserverside.com/news/thread.tss?thread_id=46456)

# objective-c - Objective-c的这段代码有什么问题

> ID：12174067
> 
> 赞同：0
> 
> 时间：2012-08-29T08:50:37.583
> 
> 标签：objective-c

【问题】code1不能编译，code2没有问题。所以为什么？【code1】</p>

```
#import <Foundation/Foundation.h>
int main(int argc, const char * argv[]){
    @autoreleasepool{
        NSLog(@"\nProgram is working........\n");
        int a=15;
        int b=55;
        int sum=0;
        sum=a+b;
        NSLog(@"The equality : %i + %i= %i\n",a,b,sum);
        NSLog(@"Program is over!\n");
   }
   return 0;
} 
```

【code2】</p>

```
#import <Foundation/Foundation.h>
int main(int argc, const char * argv[]){
    NSAutoreleasePool *pool=[[NSAutoreleasePool alloc] init];
    NSLog(@"\nProgram is working........\n");
    int a=15;
    int b=55;
    int sum=0;
    sum=a+b;
    NSLog(@"The equality : %i + %i= %i\n",a,b,sum);
    NSLog(@"Program is over!\n");
    return 0;
} 
```

【通知】</p>

## 这个编程环境是由GNU Gcc在win7下建立的。

希望大家说的详细些，非常感谢！</p>

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T08:54:58.020

该`@autoreleasepool`构造是 Apple 的 LLVM 编译器的一个特性，在 GCC 中不可用。

# javascript - 使用键盘快捷键将文件上传到 HTML5 页面

> ID：12174068
> 
> 赞同：6
> 
> 时间：2012-08-29T08:50:46.080
> 
> 标签：javascript, html

我知道可以通过 HTML5 File API 拖放来上传文件。这也可以通过从文件资源管理器复制文件并使用 CTRL-V/CMD-V 将其粘贴到网页中或通过右键单击上下文菜单粘贴来完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T09:04:14.050

你不能那样做。

您可以通过以下方式轻松获取文件路径：

```
$(document).on('paste',function(e){
    var path = e.originalEvent.clipboardData.getData("text");
});​ 
```

所以你可以把它展示给用户。

但是你不能改变自己的价值`<input type=file>`。

这是一种安全措施：想象一下您的脚本是否可以在用户提交表单之前更改要上传的文件的路径（或者甚至没有用户交互，就像现在其他表单元素一样）？对于每一项重要的安全保护，现代浏览器都没有已知的“解决方法”。

# iphone - 如何将 iPhone iOS 版本 4.3.5 升级到 5.0.1？

> ID：12174080
> 
> 赞同：0
> 
> 时间：2012-08-29T08:51:20.233
> 
> 标签：iphone, objective-c, ios, ios5, ios4

我在我的 iPhone 中使用 iOS 4.3.5 版，

我想升级到5.0.1版，

目前，如果我将连接到 iTunes，它会给我更新到 5.1.1 版，

但我需要一个版本 5.0.1，

请任何人告诉我如何下载 iOS 5.0.1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T08:57:39.937

`ipsw`不，您只能通过 iTunes 更新到最新版本的 iOS，如果您设法找到适合您的 iPhone的正确版本，您也许可以更新到 5.0.1 。

您可以选择 ipsw 来更新您的手机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T09:00:46.417

我认为 stackoferflow 不是问这类问题的地方，但如果你谷歌 ios 5.0.1 下载，我相信你会找到下载

然后，你可以用iTunes安装它，但你必须按住alt键点击更新，然后你可以选择你硬盘上的固件

# javascript - 如何将可数变量添加到 kinetic.js 中的函数和事件名称中？

> ID：12174083
> 
> 赞同：0
> 
> 时间：2012-08-29T08:51:29.070
> 
> 标签：javascript, variables, for-loop, mouseevent, kineticjs

如何在 kinetic.js 中将可数变量添加到函数和事件名称中？我有 2 个圆圈，想要更多，圆圈有鼠标悬停事件和功能等等。我不想复制粘贴圆圈功能，我想将它放在“for”循环中。但我不知道如何在函数名称和事件名称中添加变量。谢谢你的回答！

这是我的代码：

```
<head>
        <script src="kinetic-v4.0.0.js">    </script>
        <script>

            var layer = new Kinetic.Layer();
            var sfcolor = '#00ff00'         
            var nfcolor = '#0000ff'         
            var cfcolor = '#ff0000'         
            var smcolor = '#009a00'         
            var nmcolor = '#00009a'         
            var cmcolor = '#9a0000'         
            var slcolor = '#007000'         
            var nlcolor = '#000070'         
            var clcolor = '#700000'
            var sradius = 50
            var strokeWidth = 1
            function drawCircle1/*here an countable variable*/(sx, sy, sradius, sstrokeWidth, containerID) {
                var stage = new Kinetic.Stage({ container: containerID, width: 2*(sradius+strokeWidth+1), height: 2*(sradius+strokeWidth+1) });
                var circleLayer = new Kinetic.Layer();
                //circle
                var scircle = new Kinetic.Circle({
                    x: sx,
                    y: sy,
                    radius: sradius,
                    fill:  {
                    start: {
                        x: 0,
                        y: 0,
                        radius: 0
                    },
                    end: {
                        x: 0,
                        y: 0,
                        radius: sradius
                    },
                    colorStops: [0, sfcolor, 0.5, smcolor, 1, slcolor]
                    },
                    stroke: slcolor,
                    strokeWidth: sstrokeWidth
                });

                mouseover_event1/*here an countable var*/ = function() {
                    this.setFill({
                        start: {
                            x: 0,
                            y: 0,
                            radius: 0
                        },
                        end: {
                            x: 0,
                            y: 0,
                            radius: sradius
                        },
                        colorStops: [0, nfcolor, 0.5, nmcolor, 1, nlcolor]
                    });
                    this.setStroke(nlcolor);
                    scircle.off("click.event2/*here an countable var*/");
                    circleLayer.draw();
                };
                scircle.on("mouseover.event1/*here an countable var*/", mouseover_event1/*here an countable var*/);

                mouseout_event1/*here an countable var*/ = function() {
                    this.setFill({
                        start: {
                            x: 0,
                            y: 0,
                            radius: 0
                        },
                        end: {
                            x: 0,
                            y: 0,
                            radius: sradius
                        },
                        colorStops: [0, sfcolor, 0.5, smcolor, 1, slcolor]
                    });
                    this.setStroke(slcolor);
                    scircle.off("click.event2/*here an countable var*/");
                    circleLayer.draw();
                }
                scircle.on("mouseout.event1/*here an countable var*/", mouseout_event1/*here an countable var*/);

                click_event1 = function() {
                    this.setFill({
                        start: {
                            x: 0,
                            y: 0,
                            radius: 0
                        },
                        end: {
                            x: 0,
                            y: 0,
                            radius: sradius
                        },
                        colorStops: [0, cfcolor, 0.5, cmcolor, 1, clcolor]
                    });
                    this.setStroke(clcolor);
                    scircle.off("mouseout.event1/*here an countable var*/");
                    scircle.off("mouseover.event1/*here an countable var*/");
                    scircle.off("click.event1/*here an countable var*/");
                    scircle.on("click.event2/*here an countable var*/", click_event2/*here an countable var*/);

                    circleLayer.draw();
                };

                click_event2/*here an countable var*/ = function() {
                    this.setFill({
                        start: {
                            x: 0,
                            y: 0,
                            radius: 0
                        },
                        end: {
                            x: 0,
                            y: 0,
                            radius: sradius
                        },
                        colorStops: [0, nfcolor, 0.5, nmcolor, 1, nlcolor]
                    });
                    this.setStroke(nlcolor);
                    scircle.on("mouseout.event1/*here an countable var*/", mouseout_event1/*here an countable var*/);
                    scircle.on("mouseover.event1/*here an countable var*/", mouseover_event1/*here an countable var*/);
                    scircle.on("click.event1/*here an countable var*/", click_event1/*here an countable var*/);
                    scircle.off("click.event2/*here an countable var*/");
                    circleLayer.draw();
                };

                scircle.on("click.event1"/*here an countable var*/, click_event1/*here an countable var*/);

                circleLayer.add(scircle);
                stage.add(circleLayer);
        }
function drawCircle2/*here an countable var*/(sx, sy, sradius, sstrokeWidth, containerID)/*it is the same function with the variables count up manual*/ {
            var stage = new Kinetic.Stage({ container: containerID, width: 2*(sradius+strokeWidth+1), height: 2*(sradius+strokeWidth+1) });
            var circleLayer = new Kinetic.Layer();
            //circle
            var scircle = new Kinetic.Circle({
                x: sx,
                y: sy,
                radius: sradius,
                fill:  {
                start: {
                    x: 0,
                    y: 0,
                    radius: 0
                },
                end: {
                    x: 0,
                    y: 0,
                    radius: sradius
                },
                colorStops: [0, sfcolor, 0.5, smcolor, 1, slcolor]
                },
                stroke: slcolor,
                strokeWidth: sstrokeWidth
            });

            mouseover_event3/*here an countable var*/ = function() {
                this.setFill({
                    start: {
                        x: 0,
                        y: 0,
                        radius: 0
                    },
                    end: {
                        x: 0,
                        y: 0,
                        radius: sradius
                    },
                    colorStops: [0, nfcolor, 0.5, nmcolor, 1, nlcolor]
                });
                this.setStroke(nlcolor);
                scircle.off("click.event4/*here an countable var*/");
                circleLayer.draw();
            };
            scircle.on("mouseover.event3/*here an countable var*/", mouseover_event3/*here an countable var*/);

            mouseout_event3/*here an countable var*/ = function() {
                this.setFill({
                    start: {
                        x: 0,
                        y: 0,
                        radius: 0
                    },
                    end: {
                        x: 0,
                        y: 0,
                        radius: sradius
                    },
                    colorStops: [0, sfcolor, 0.5, smcolor, 1, slcolor]
                });
                this.setStroke(slcolor);
                scircle.off("click.event4/*here an countable var*/");
                circleLayer.draw();
            }
            scircle.on("mouseout.event3/*here an countable var*/", mouseout_event3/*here an countable var*/);

            click_event3/*here an countable var*/ = function() {
                this.setFill({
                    start: {
                        x: 0,
                        y: 0,
                        radius: 0
                    },
                    end: {
                        x: 0,
                        y: 0,
                        radius: sradius
                    },
                    colorStops: [0, cfcolor, 0.5, cmcolor, 1, clcolor]
                });
                this.setStroke(clcolor);
                scircle.off("mouseout.event3/*here an countable var*/");
                scircle.off("mouseover.event3/*here an countable var*/");
                scircle.off("click.event3/*here an countable var*/");
                scircle.on("click.event4/*here an countable var*/", click_event4/*here an countable var*/);

                circleLayer.draw();
            };

            click_event4/*here an countable var*/ = function() {
                this.setFill({
                    start: {
                        x: 0,
                        y: 0,
                        radius: 0
                    },
                    end: {
                        x: 0,
                        y: 0,
                        radius: sradius
                    },
                    colorStops: [0, nfcolor, 0.5, nmcolor, 1, nlcolor]
                });
                this.setStroke(nlcolor);
                scircle.on("mouseout.event3/*here an countable var*/", mouseout_event3/*here an countable var*/);
                scircle.on("mouseover.event3/*here an countable var*/", mouseover_event3/*here an countable var*/);
                scircle.on("click.event3/*here an countable var*/", click_event3/*here an countable var*/);
                scircle.off("click.event4/*here an countable var*/");
                circleLayer.draw();
            };

            scircle.on("click.event3/*here an countable var*/", click_event3/*here an countable var*/);

            circleLayer.add(scircle);
            stage.add(circleLayer);
        }
        window.onload = function() {
            drawCircle1/*here an countable var*/(sradius, sradius, sradius, strokeWidth, "1"/*here an countable var*/);
            drawCircle2/*here an countable var*/(sradius, sradius, sradius, strokeWidth, "2"/*here an countable var*/);
        };

    </script>

</head>
<body>
    <table border="2">
        <tr>
            <td> <div id="1"></div> </td>
        </tr>
        <tr>
            <td> <div id="2"></div> </td>
        </tr>
    </table>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:51:08.200

很抱歉问，但你真的需要计算事件 ID 吗？似乎你想要有几个圈子，每个圈子都有自己的孤立事件，是吗？

看看下面的代码是不是你要找的

```
<head>
        <script src="kinetic-v4.0.0.js">    </script>
        <script>

            var layer = new Kinetic.Layer();
            var sfcolor = '#00ff00'         
            var nfcolor = '#0000ff'         
            var cfcolor = '#ff0000'         
            var smcolor = '#009a00'         
            var nmcolor = '#00009a'         
            var cmcolor = '#9a0000'         
            var slcolor = '#007000'         
            var nlcolor = '#000070'         
            var clcolor = '#700000'
            var sradius = 50
            var strokeWidth = 1

            function drawCircle(sx, sy, sradius, sstrokeWidth, containerID) {
                this.stage = new Kinetic.Stage({ container: containerID, width: 2*(sradius+strokeWidth+1), height: 2*(sradius+strokeWidth+1) });
                this.circleLayer = new Kinetic.Layer();

                //circle
                this.scircle = new Kinetic.Circle({
                    x: sx,
                    y: sy,
                    radius: sradius,
                    fill:  {
                        start: {
                            x: 0,
                            y: 0,
                            radius: 0
                        },
                        end: {
                            x: 0,
                            y: 0,
                            radius: sradius
                        },
                        colorStops: [0, sfcolor, 0.5, smcolor, 1, slcolor]
                    },
                    stroke: slcolor,
                    strokeWidth: sstrokeWidth
                });

                this.mouseover_eventA = function() {
                    this.setFill({
                        start: {
                            x: 0,
                            y: 0,
                            radius: 0
                        },
                        end: {
                            x: 0,
                            y: 0,
                            radius: sradius
                        },
                        colorStops: [0, nfcolor, 0.5, nmcolor, 1, nlcolor]
                    });
                    this.setStroke(nlcolor);
                    this.off("click.eventB");
                    this.parent.draw();
                };
                this.scircle.on("mouseover.eventA", mouseover_eventA);

                this.mouseout_eventA = function() {
                    this.setFill({
                        start: {
                            x: 0,
                            y: 0,
                            radius: 0
                        },
                        end: {
                            x: 0,
                            y: 0,
                            radius: sradius
                        },
                        colorStops: [0, sfcolor, 0.5, smcolor, 1, slcolor]
                    });
                    this.setStroke(slcolor);
                    this.off("click.eventB");
                    this.parent.draw();
                }
                this.scircle.on("mouseout.eventA", mouseout_eventA);

                this.click_eventA = function() {
                    this.setFill({
                        start: {
                            x: 0,
                            y: 0,
                            radius: 0
                        },
                        end: {
                            x: 0,
                            y: 0,
                            radius: sradius
                        },
                        colorStops: [0, cfcolor, 0.5, cmcolor, 1, clcolor]
                    });
                    this.setStroke(clcolor);
                    this.off("mouseout.eventA");
                    this.off("mouseover.eventA");
                    this.off("click.eventA");
                    this.on("click.eventB", click_eventB);
                    this.parent.draw();
                };

                this.click_eventB = function() {
                    this.setFill({
                        start: {
                            x: 0,
                            y: 0,
                            radius: 0
                        },
                        end: {
                            x: 0,
                            y: 0,
                            radius: sradius
                        },
                        colorStops: [0, nfcolor, 0.5, nmcolor, 1, nlcolor]
                    });
                    this.setStroke(nlcolor);
                    this.on("mouseout.eventA", mouseout_eventA);
                    this.on("mouseover.eventA", mouseover_eventA);
                    this.on("click.eventA", click_eventA);    
                    this.off("click.eventB");
                    this.parent.draw();
                };

                this.scircle.on("click.eventA", click_eventA);

                this.circleLayer.add(this.scircle);
                this.stage.add(this.circleLayer);
            }
            window.onload = function() {
                for (i=1; i<=6; i++){                   
                    drawCircle(sradius, sradius, sradius, strokeWidth, i.toString());
                }
            };
    </script>
</head>
<body>
    <table border="2">
        <tr>
            <td> <div id="1"></div> </td>
        </tr>
        <tr>
            <td> <div id="2"></div> </td>
        </tr>
        <tr>
            <td> <div id="3"></div> </td>
        </tr>
        <tr>
            <td> <div id="4"></div> </td>
        </tr>
        <tr>
            <td> <div id="5"></div> </td>
        </tr>
        <tr>
            <td> <div id="6"></div> </td>
        </tr>
    </table>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:02:46.243

您可以使用for循环创建一个组并为其添加圆圈（如果我正确理解您的问题）

看看这个：http: [//jsfiddle.net/9vsps/2/](http://jsfiddle.net/9vsps/2/)

# jquery - 使用 jquery ajax 调用网络服务器时出现“NetworkError：500 Internal Server Error”

> ID：12174085
> 
> 赞同：0
> 
> 时间：2012-08-29T08:51:30.553
> 
> 标签：jquery, ajax, vb.net, web-services

我正在尝试使用 ajax 调用网络服务。Web 服务是用 vb.net 编写的。当我使用它的 url 直接调用它时它工作正常，但是当我使用 ajax 调用它时它返回

> NetworkError：500 内部服务器错误-http://localhost/chart/webService.asmx/HelloWorld。

这是我的网络服务代码：

```
Imports System.Web.Services
Imports System.Web.Services.Protocols
Imports System.ComponentModel

<System.Web.Services.WebService(Namespace:="http://tempuri.org/")> _
<System.Web.Services.WebServiceBinding(ConformsTo:=WsiProfiles.BasicProfile1_1)> _
<ToolboxItem(False)> _
Public Class webService
    Inherits System.Web.Services.WebService

    <WebMethod()> _
    Public Function HelloWorld() As String
        Return "Hello World"
    End Function

End Class 
```

这是javascript代码：

```
$(document).ready(function() {
    var webMethod = 'http://localhost/chart/webService.asmx/HelloWorld';
    $.ajax({
        type: "POST",
        url: webMethod,
        data: "{}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function(msg) {
            alert('all good');
        },
        error: function(e) {
            alert('err');
        }
    });
}); 
```

更新：

我将 HelloWorld() 更改为以下代码，但仍然出现相同的错误：

```
<WebMethod()> _
<ScriptMethod(ResponseFormat:=ResponseFormat.Json)> _
Public Function HelloWorld() As String
    Dim aa As New System.Web.Script.Serialization.JavaScriptSerializer
    Return aa.Serialize("Hello World")
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-24T13:50:43.047

利用：

```
data:{}, 
```

代替：

```
data:"{}", 
```

# c# - ActiveX 事件不同于 COM 事件？

> ID：12174090
> 
> 赞同：2
> 
> 时间：2012-08-29T08:51:43.453
> 
> 标签：c#, .net, events, com, powerbuilder

我创建了一个公开事件的 .Net 程序集。我可以毫无问题地使用来自 VB6 的事件。现在我已将程序集部署给 PowerBuilder 开发人员，他说如果 COM 对象不是 ActiveX，他无法处理来自 COM 对象的事件。

ActiveX 事件与普通 COM 事件有什么不同？我是否应该实现一些额外的接口，以便 PowerBuilder 可以“看到”事件？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:10:31.263

这两个事件都是通过[连接点](http://msdn.microsoft.com/en-us/library/s7zd1wd1%28v=vs.100%29.aspx)（`IConnectionPoint`和朋友）实现的。ActiveX 控件通常使用某些附加约束来实现连接点：

*   控件本身属于“Apartment”线程模型，并且事件将从创建控件的 STA 线程触发
*   传出事件接口是一个分派接口，但它可能在其声明中具有方法和属性，控件将调用`IDispatch::Invoke`以传递实际事件。
*   传出接口声明在类型库中可用，这就是 ActiveX 控件使用者发现现有事件的方式
*   该控件列出了类型库上一个 coclass 的主接口和事件接口，并且还有一个实现`IProvideClassInfo2`来提供此信息。

PowerBuilder 或其他 COM 事件使用者可能会依赖上述一个或多个项目，因此它只能与某些事件源一起使用，而拒绝与其他事件源一起使用。

# datetime - PowerBuilder DataWindow 日期语法

> ID：12174092
> 
> 赞同：0
> 
> 时间：2012-08-29T08:51:46.383
> 
> 标签：datetime, datepicker, powerbuilder, datawindow

我正在记录员工的`date_of_birth`、`year_employed`和`current_DateTime`记录数据（用户单击保存的实际日期和时间），因为公司正在自动化其记录。
DataWindow 对象中没有`datepicker`或`monthcalendar`控件可以使用户更容易选择日期。

1.  与用户在列上书写相比，最有效的方法是`dates`什么？
2.  `current_DateTime`在DataWindow中输入数据库的代码是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:16:28.627

## 1.日期时间选择

> datawindow 对象中没有 datepicker 或 monthcalendar 控件，这将使用户更容易选择日期。

不完全是。您可以添加一个下拉日历来帮助选择日期：

1.  在 DW 中选择一个日期/日期时间列
2.  在属性/编辑选项卡中：选择样式类型“EditMask”
3.  检查同一选项卡中的“下拉日历”设置

该字段将有一个下拉箭头，将显示一个日历以选择日期。

您还可以自定义遮罩以满足您的显示需求。

## 2.当前时间历史

您可以在将表中的默认值设置为 时定义您的`current_DateTime`列。在 PB 中完全忽略该字段。因此，当从 pb 添加新记录时，它将获得数据库定义的当前时间。`not null``Now()`

# python - 使用哪个 Python 测试框架？

> ID：12174093
> 
> 赞同：4
> 
> 时间：2012-08-29T08:51:48.630
> 
> 标签：python, unit-testing, python-unittest

我有很多目录，其中有 python 文件。都是普通的python文件。我没有使用任何类型的框架。我想从一个中心位置测试这些 py 文件。我应该只触发一个命令，并且应该调用每个目录中的所有 *_test.py 文件。那么，是否有任何现成的工具或框架可以满足我的要求？

我正在寻找用于测试普通 py 文件的 PyUnit。并考虑编写一个 shell 脚本，该脚本将通过使用正则表达式来匹配文件名来调用所有这些 *_test.py 文件。

任何人都可以提出任何其他方法。随时欢迎你。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T09:00:02.800

[鼻子](http://nose.readthedocs.org/en/latest/)做这一切。就`cd`在你的 Python 文件树的根目录下，然后运行

```
nosetests 
```

Nose使用[正则表达式](http://nose.readthedocs.org/en/latest/writing_tests.html)（基本上是单词或出现在名称中）[查找测试文件：](http://nose.readthedocs.org/en/latest/finding_tests.html)`test``Test`

> 如果它看起来像一个测试，那就是一个测试。目录、模块、类和函数的名称与 testMatch 正则表达式进行比较，匹配的被视为测试。任何作为 unittest.TestCase 子类的类也会被收集，只要它位于看起来像测试的模块内部。

# php - 如何从不同的 if 语句访问 php 中的相同变量？

> ID：12174094
> 
> 赞同：0
> 
> 时间：2012-08-29T08:51:50.023
> 
> 标签：php

我正在尝试从不同的 if 语句访问相同的变量。我该怎么做？我会展示我想做什么。

```
if{}
   if{}
   else{ $upfile }
else{} 
```

我的 php.ini 中有这种结构。我想要做的是在插入语句的最后一个 else 中访问 $upfile 。我该怎么做？

任何答案都是有帮助的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T08:52:46.847

You need to look into [variable scope](http://php.net/manual/en/language.variables.scope.php).

```
$upfile = 'test';
if{}
   if{}
   else{ $upfile }
else{} 
```

# php - 如何使用php解密散列密码？

> ID：12174104
> 
> 赞同：2
> 
> 时间：2012-08-29T08:52:22.357
> 
> 标签：php

我目前正在使用 MD5 和 SHA1 将我的用户密码保存在数据库中，但我不知道如何以纯文本形式取回它们。我试图回滚用于加密密码的相同代码，但它给了我一个错误。

我用来加密密码的代码：

```
 $hashedpassword = md5(md5(sha1(sha1(md5($normalpassword))))); 
```

我试着像这样做同样的事情

```
 $normalpassword = md5(md5(sha1(sha1(md5($hashedpassword))))); 
```

然后我意识到这很有趣:(!!请帮帮我......

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-29T08:54:05.030

MD5 和 SHA-1 是单向哈希函数，这意味着您无法从哈希值中取回原始字符串。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T08:55:05.707

你不能。散列是一种方法，您必须在登录表单中生成输入的新散列并检查它是否等于存储的散列。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-29T08:56:24.593

散列不是加密。

像 MD5 和 SHA1 这样的散列函数是无法反转的，它只能被验证。这通常是使用散列函数的重点，因为攻击者无法使用散列检索明文密码（其他攻击，例如使用彩虹表是可能的）。

更多细节可以在这里找到：[http ://en.wikipedia.org/wiki/Cryptographic_hash_function](http://en.wikipedia.org/wiki/Cryptographic_hash_function)

如果您想将散列密码存储在数据库中，请查看[PHPass](http://www.openwall.com/phpass/)。它是一个很好的 php 类，可以尽可能好地散列和验证密码，并广泛用于现代基于 php 的 Web 应用程序。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-29T08:55:22.050

如果你最终想要它们回来，你为什么还要加密它们？使用散列正是因为无法以明文形式取回密码。

如果您想要它们回来，请使用对称密码。

# c# - 我如何需要多个属性之一？

> ID：12174105
> 
> 赞同：3
> 
> 时间：2012-08-29T08:52:27.570
> 
> 标签：c#, asp.net, asp.net-mvc

例子：

```
public class Person
{
    [Required]
    [DisplayName("Firstname")]
    public string firstname { get; set; }

    [Required]
    [DisplayName("Lastname")]
    public string lastname{ get; set; }

    // I want to require at least one of these 3 phones
    [DisplayName("Mobile Phone")]
    public string mobilephone { get; set; }

    [DisplayName("Work Phone")]
    public string workphone { get; set; }

    [DisplayName("Home Phone")]
    public string homephone { get; set; }
} 
```

我想拥有至少一个电话号码，但我不在乎是哪一个。输入多个电话号码也应该是可能的。

有没有一种干净的方法可以做到这一点？还是我必须自己编写验证？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T08:56:14.363

是的，您必须自己编写验证。采用`IValidatableObject`

# php - url 上的 PHP/JSON 参数

> ID：12174107
> 
> 赞同：0
> 
> 时间：2012-08-29T08:52:44.820
> 
> 标签：php, json

我创建了一个连接到数据库的 php 文件，从表中获取数据并以 json 格式显示。

该文件名为 index.php。

要查看 json，我只需转到浏览器中的文件：

```
http://127.0.0.1/json/index.php and it displays:

{"title":[{"id":"1","title":"Title1","desc":"Description1"},{"id":"2","title":"Title2","desc":"Description2"}]} 
```

我需要做的是能够通过添加以下参数来过滤它：

```
For example: http://127.0.0.1/json/index.php?id=1 to just show the data with an id of 1 but it still shows all the data. 
```

这是php代码：

```
<?php

$username = "root";
$password = "";
$hostname = "localhost"; 

//connection to the database
$dbhandle = mysql_connect($hostname, $username, $password)
  or die("Unable to connect to MySQL");

$selected = mysql_select_db("mydb",$dbhandle)
  or die("Could not select mydb");

$result = mysql_query("SELECT * FROM contacts");
 $rows = array();
   while($r = mysql_fetch_assoc($result)) {
     $rows['title'][] = $r;
   }

 print json_encode($rows);

?> 
```

我在这里做错了什么或错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T08:56:12.593

```
<?php
    $username = "root";
    $password = "";
    $hostname = "localhost"; 

    //connection to the database
    $dbhandle = mysql_connect($hostname, $username, $password)
    or die("Unable to connect to MySQL");

    $selected = mysql_select_db("mydb",$dbhandle)
    or die("Could not select mydb");

    $id = 0;
    if(isset($_GET['id'])){ $id = (int)$_GET['id']; }

    if(!$id){
        $query = "SELECT * FROM `contacts`";
    } else {
        $query = "SELECT * FROM `contacts` WHERE `id`='".$id."'";
    }
    $result = mysql_query($query);
    $rows = array();
    while($r = mysql_fetch_assoc($result)) {
        $rows['title'][] = $r;
    }
    print json_encode($rows);
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T09:06:52.597

更改以下

```
$result = mysql_query("SELECT * FROM contacts"); 
```

到

```
$id = $_REQUEST['id'];

$query = 'SELECT * FROM contacts';

if(is_numeric($id))
    $query .= ' WHERE id = ' . $id;

$result = mysql_query($query); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T09:08:05.807

一方面，您必须将 WHERE 添加到您的 SQL 语句中......

```
SELECT * FROM `contacts` WHERE `id` = $id 
```

您在哪里看到`id`这应该是表中 id 列的名称，无论它可能是什么。但是您还必须先清理输入...

```
if(!is_numeric($_GET['id']))
    exit; // if not a number then exit

$id = mysql_real_escape_string($_GET['id']); // escape the input 
```

当然这是最基本的错误检查。你可以阐述一下。所以你的代码看起来更像这样......

```
<?php

$username = "root";
$password = "";
$hostname = "localhost"; 

//connection to the database
$dbhandle = mysql_connect($hostname, $username, $password)
  or die("Unable to connect to MySQL");

$selected = mysql_select_db("mydb",$dbhandle)
  or die("Could not select mydb");

if(!is_numeric($_GET['id']) || !$_GET['id'])
    exit; // if not an integer or id not set then exit

$id = mysql_real_escape_string($_GET['id']); // escape the input

$result = mysql_query("SELECT * FROM contacts WHERE id = $id");
 $rows = array();
   while($r = mysql_fetch_assoc($result)) {
     $rows['title'][] = $r;
   }

 print json_encode($rows);

?> 
```

而且您真的不应该使用 root 连接到 Web 应用程序中的数据库。而且米海也是对的，你应该使用 PDO 来代替，但对于这么简单的应用程序来说，它并不是真正需要的。

**编辑** 但上面的代码需要`id`输入。如果您希望仍然能够获得整个列表（如果没有`id`提供），它看起来像这样......

```
<?php

$username = "root";
$password = "";
$hostname = "localhost"; 

//connection to the database
$dbhandle = mysql_connect($hostname, $username, $password)
  or die("Unable to connect to MySQL");

$selected = mysql_select_db("mydb",$dbhandle)
  or die("Could not select mydb");

$sql = "SELECT * FROM `contacts`";

if(isset($_GET['id']) && $_GET['id'] > 0) {
    // if id is set then add the WHERE statement
    if(!is_numeric($_GET['id']))
        die('id must be an integer');  // if id is not an integer then exit
    $id = mysql_real_escape_string((int)$_GET['id']); // escape the input
    $sql .= " WHERE `id` = $id"; // append the WHERE statement to the sql
}

$result = mysql_query($sql);
 $rows = array();
   while($r = mysql_fetch_assoc($result)) {
     $rows['title'][] = $r;
   }

 print json_encode($rows);

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T08:54:48.000

您需要在`where`查询中添加条件。

```
$id = (int) $_GET['id'];
$result = mysql_query("SELECT * FROM contacts WHERE id = $id"); 
```

# maven - 构建依赖项时如何使詹金斯触发依赖项目的构建

> ID：12174112
> 
> 赞同：16
> 
> 时间：2012-08-29T08:53:09.740
> 
> 标签：maven, build, jenkins, maven-3, pom.xml

我有一个关于如何设置 Jenkins 和 maven 3 的简单问题。

为了简单起见，假设我们有四个项目：

**没有依赖关系的**模型**
**Commons**依赖于 Model
**Server**依赖于 Common 和 Model
**Frontend**依赖于 Model**

 **我想要实现的是，在模型上成功构建会触发所有项目的新构建，这些项目在其 pom 中依赖于模型（此处为 Common、Server 和 Frontend）

如果 Common 失败，则无需构建 Server。

在上述情况下，我似乎可以通过在 Model 和 Commons 上手动设置依赖项目来解决这个问题，但是这些信息已经可以在每个项目（服务器和前端）的 pom 文件中找到，这让我得出结论/希望 Jenkins 应该是能够自己解决这个问题。

Jenkins 是否可以通过解析 Jenkins 中定义的每个项目的 pom 来推断依赖树并自动执行某种最佳构建顺序/依赖处理，或者我是否必须设置“上游项目正在构建时的块构建”和“在其他项目之后构建”如上所述构建[依赖项目列表]”？

我正在使用 Jenkins 版本 1.473 和 Maven 3。
我们的 maven 项目 pom 不使用父标签或模块标签。

/本杰明

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-08T22:11:16.930

假设您想坚持使用 4 个单独的构建而不是多模块构建，那么做到这一点的方法是在 4 个项目中的每一个中选中构建触发器下的框

“在构建 SNAPSHOT 依赖项时构建”

然后你签入 Model，jenkins 基于 SVN 轮询启动该项目的构建，当构建完成时，它会看到 common 对模型有依赖关系，因此它会触发 common 的构建以查看它是否仍然构建反对更新的模型。

必须将 jenkins 作业创建为 maven 作业才能显示此选项。它不适用于自由风格的项目，即使它们运行的​​脚本恰好调用了 maven。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T09:31:58.290

这种事情的最佳解决方案是创建一个[多模块构建](http://www.sonatype.com/books/mvnex-book/reference/multimodule.html)，它会产生以下结构：

```
root (pom.xml)
  +--- model (pom.xml)
  +--- commons (pom.xml)
  +--- server (pom.xml)
  +--- frontend (pom.xml) 
```

在每个模块中，例如在 commons 中，您定义对模型模块等的依赖项。构建顺序将由 maven 自动完成。

有了这样的项目，您可以简单地进入根目录并执行以下操作：

```
mvn clean package 
```

您还可以使用：

```
mvn --pl --am server 
```

这将自动构建服务器以及所有依赖的模块。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-29T09:04:30.277

两种解决方案。

1.  在仅声明构建顺序（模型、公共资源、服务器和前端）的其他项目之上创建一个模块 pom。只需将这个项目安装到 Jenkins 中

2.  在每个作业中，都有一个复选框以“触发构建的内容”的形式激活 -> 在项目之后构建。（选项的名称可能与我写的不完全一样，因为我的 Jenkins 是用法语配置的......）**

# search - Deleting unwanted data in incremental imports when using Solr DIH

> ID：12174115
> 
> 赞同：3
> 
> 时间：2012-08-29T08:53:28.593
> 
> 标签：search, solr

I have a data to be indexed. The table has a column called 'state' which could be 'published' 'drafted' OR 'deleted'. Now I only index the data which has a state as 'published'. If a data in database is updated to 'deleted' from 'published' how do I deleted this data from my Solr index when using incremental imports.

The default behaviour of Solr will be to update the state of the data element to 'deleted' from 'published' which is not desired, rather i want to delete it from the solr index.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T09:10:18.417

您必须将 dataConfig 中的 deletedPkQuery 属性与所需的 sql 语句一起使用，例如

```
deletedPkQuery="select ID from table where state = 'deleted'" 
```

对你起作用吗？来源[http://wiki.apache.org/solr/DataImportHandler](http://wiki.apache.org/solr/DataImportHandler) 这是一个很好的教程：[http ://solr.pl/en/2011/01/03/data-import-handler-%E2%80%93 -从索引中删除数据/](http://solr.pl/en/2011/01/03/data-import-handler-%E2%80%93-removing-data-from-index/)

# python - 提交表单挂起，直到初始化过程完成

> ID：12174119
> 
> 赞同：0
> 
> 时间：2012-08-29T08:53:43.400
> 
> 标签：python, django, forms

我一直在编写一些启动一些测试脚本的 django 项目/应用程序。我之前问过一个关于如何在这里执行此操作的问题..[将 python 脚本与 django 集成](https://stackoverflow.com/questions/10890425/integrating-python-scripts-with-django)

我遇到了一个我认为不会发生的问题。我有一个工作表单，使用 jquery 显示某些复选框，这些复选框将启动 api 的值传递给我正在测试的应用程序。就像我最初问题中的代码一样。但是，当我提交表单时，表单在后端进程完成时挂起

```
submittest.initialise_test(t_start, t_templatename, t_datacenter)

return render_to_response('testsubmitted.html') 
```

我知道我可以使用 popen 或 cron，但是我已经编写了我的应用程序，并且需要进行一些重新设计。

有什么想法可以使 submittest.initialise_test(t_start, t_templatename, t_datacenter) 成为异步调用或解决此问题的方法吗？结果被写入数据库，然后我希望用它来渲染到结果页面，使用 ajax 来更新结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:30:16.910

您可以使用众多[django 后台队列应用程序](http://www.djangopackages.com/grids/g/workers-queues-tasks/)之一在后台进程中运行任务。

# jquery - jQuery 在 Firefox 中不起作用

> ID：12174120
> 
> 赞同：4
> 
> 时间：2012-08-29T08:53:43.370
> 
> 标签：jquery, html, firefox

jQuery 在 Firefox 中不起作用。它在 IE 和 Google chrome 中运行良好，但是当我尝试在 Mozilla Firefox 中运行我的应用程序时，jQuery 不起作用。有什么猜测吗？ *这是我的一段代码*

```
<!DOCTYPE HTML PUBLIC>
<html>
   <head>
      <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.js"></script>
      <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.js"></script>
      <style>
         div{
         width:200px;
         height:100px;
         border:1px solid red;
         }
      </style>
   </head>
   <body>
      <div> One</div>
      <div>Two</div>
      <div>Three</div>
   </body>
   <script>
      $('div').click(function(){
       alert("Hello.....");
      });
   </script>
</html> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T08:56:49.123

你应该使用 dom ready 事件

```
$(document).ready(function(){
  $('div').click(function(){
   alert("Hello.....");
  });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T09:03:14.240

将您的 jquery 代码放入`document.ready`.

```
 $(document).ready(function() {
  $('div').click(function(){
       alert("Hello.....");
      });

 }); 
```

给你的 div 一个适当的类。就像

```
<div class="clsDiv"> One</div> 
```

amd 像这样打电话。

```
 $('.clsDiv').click(function(){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-12T06:17:50.880

lukenz 和 Shree 做到了。html 元素的 JQUery 事件处理程序必须首先在 $(document).ready() 中注册。

# c# - 显示浮点数的格式？

> ID：12174122
> 
> 赞同：0
> 
> 时间：2012-08-29T08:53:57.013
> 
> 标签：c#, asp.net-mvc, devexpress

我需要在之前显示带有符号“+”或“-”的浮点数。

什么是正确的字符串格式？

例如。

```
-1,5
-1
-0,5
 0
+0,5
+1 
```

 *```
 settings.Columns.Add(column =>
          {
              column.FieldName = "current";
              column.Caption = "Numeric";
              column.ColumnType = MVCxGridViewColumnType.SpinEdit;
              var edsettings = column.PropertiesEdit as DevExpress.Web.ASPxEditors.SpinEditProperties;
              edsettings.DisplayFormatString = "0.#";
          }); 
```

这是 asp.mvc 中 devexpress 组件网格的列。其中“当前”是模型中的十进制值

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T09:02:05.217

使用分号分隔符定义正负值的不同格式，例如

`string.Format("{0:+0.0;-0.0}", floatValue)`

如果您不想在零之前有符号，请使用第三个选项：

`edsettings.DisplayFormatString = "+0.#;-0.#;0";`

参考：http: [//msdn.microsoft.com/en-us/library/0c899ak8.aspx#SectionSeparator](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx#SectionSeparator)*

# matlab - 使用matlab中的有序数据集绘制参数曲线

> ID：12174127
> 
> 赞同：3
> 
> 时间：2012-08-29T08:54:03.610
> 
> 标签：matlab, plot, parametric-equations

这是一个基本问题，我希望有一个比我更简单的解决方案：我有一个 Nx2 数据集，它是 2D 平面中的参数曲线。集合 A 是有序的，它是一个微分方程的解。

我如何绘制这个？有`scatter`，但这可能会留下空白（除非我确保在集合中添加更多点，但我宁愿不这样做）。

还有`ezplot`，但这有点烦人，因为它只接受函数作为参数，所以我必须创建一个函数来插入我的数据矩阵的每一列`A`。

必须有一种快速的单线方法来“连接点”在 2D 数据集中？有趣的是，GNUplot 会自动执行此操作！......但不幸的是，它并没有给出最好看的情节，恕我直言......

我发现了一个类似的问题（http://stackoverflow.com/questions/7408320/plot-a-parametric-equation-in-matlab），但这仅适用于函数图，这不是我所拥有的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T09:06:18.893

如果您的点相对于参数的排序正确，那么您可以简单地将每个点绘制为矩阵中的相应行。如果你的矩阵是`data`那么你可以简单地做

```
 x = data(:,1)
 y = data(:,2)
 plot(x,y) 
```

您显然可以将这 3 行合并为一条以保持紧凑性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T09:02:32.620

答案是使用`plot`函数。假设您的数据是`A`：

```
plot( A(:,1),A(:,2)); 
```

# c# - 由 adam freeman 和 steven sanderson 撰写的 Pro ASP.net MVC3 框架书

> ID：12174129
> 
> 赞同：0
> 
> 时间：2012-08-29T08:54:14.947
> 
> 标签：c#, asp.net, asp.net-mvc-3

我在使用 pro asp.net mvc 3 框架书时遇到问题。在第 175 页上创建产品存储库。

我有错误：错误 1 ​​'SportsStore.Domain.Concrete.EFProductRepository' 没有实现接口成员 'SportsStore.Domain.Abstract.IProductRepository.Products.set' SportsStore\SportsStore.Domain\Concrete\EFProductRepository.cs 11 18 SportsStore.Domain #

错误 2 命名空间“SportsStore.Domain”\SportsStore.WebUI\Infrastructure\NinjectControllerFactory.cs 11 26 SportsStore.WebUI 中不存在类型或命名空间名称“Concrete”

这是我的存储库：

```
using System; using System.Collections.Generic; 
using System.Linq; 
using System.Text; 
using SportsStore.Domain.Abstract; 
using SportsStore.Domain.Entities; 
//using System.Web;

namespace SportsStore.Domain.Concrete 
{
    public class EFProductRepository : IProductRepository
    {
        private EFDbContext context = new EFDbContext();
        public IQueryable<Product> Products
        {
            get { return context.Products; }
        }
    } 
} 
```

## 我的产品类是公开的：

```
namespace SportsStore.Domain.Entities 
{
  public class Product
  {
      public int ProductID { get; set; }
      public string Name { get; set; }
      public string Description { get; set; }
      public decimal Price { get; set; }
      public string Category { get; set; }
  } 
} 
```

## 我的界面：

```
using System; using System.Collections.Generic; using System.Linq; using System.Text; using SportsStore.Domain.Entities;

namespace SportsStore.Domain.Abstract 
{
  public interface IProductRepository
  {
      IQueryable<Product> Products { get; set; }
  } 
} 
```

## 我的 EFDBContext 类：

```
using System; 
using System.Collections.Generic; 
using System.Linq; 
using System.Text; 
using SportsStore.Domain.Entities; 
using System.Data.Entity;

namespace SportsStore.Domain.Concrete 
{
  public class EFDbContext : DbContext 
  {
      //DBset<type>   Property name is Products
      public DbSet<Product> Products { get; set; }
  }
} 
```

## 我的 ninjectcontrollerfactory 类：

```
using System; using System.Collections.Generic; 
using System.Linq; using System.Web; 
using System.Web.Mvc; 
using System.Web.Routing; 
using Ninject; 
using Moq; 
using SportsStore.Domain.Abstract; 
using SportsStore.Domain.Entities; 
using SportsStore.Domain.Concrete;

namespace SportsStore.WebUI.Infrastructure 
{
    public class NinjectControllerFactory : DefaultControllerFactory 
    {
        private IKernel ninjectKernel;

        public NinjectControllerFactory()
        {
            ninjectKernel = new StandardKernel();
            AddBindings();
        }

        protected override IController GetControllerInstance(RequestContext requestContext, Type controllerType)
        {
            return controllerType == null ? null : (IController)ninjectKernel.Get(controllerType);
        }

        private void AddBindings()
        {
            //P163 - Add a mock implementation of the IProductRepository Interface
            //Mock<IProductRepository> _mock = new Mock<IProductRepository>();
            //_mock.Setup(m => m.Products).Returns(new List<Product> 
            //{
            //    new Product {Name = "Football",Price = 25},
            //    new Product {Name = "Surf Board",Price = 179},
            //    new Product {Name = "Running Shoes",Price = 95},

            //}.AsQueryable());
            //_ninjectKernel.Bind<IProductRepository>().ToConstant(_mock.Object);

            ninjectKernel.Bind<IProductRepository>().To<EFProductRepository>();    //P176 Bind to our Live repository

        }

    } 
} 
```

有 3 个项目有参考：SportsStore.Domain SportsStore.UnitTests = ref to Moq, Ninject,SportsStore.Domain, SportsStore.WebUI SportsStore.WebUI = ref to Ninject,SportsStore.Domiain

我有搜索谷歌，它说将 SportsStore.Domain 项目的引用添加到 WebUI 项目但是当我这样做时它说它不能，因为它会导致循环依赖。

上面的错误 1 ​​和错误 2，我不明白，因为接口已实现，并且命名空间位于 NinjectControllerFactory 中，我将 IProductRepository 绑定到接口 EFProductRepository

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T20:04:08.397

把“集合”从

```
public interface IProductRepository 
{ 
    IQueryable<Product> Products { get; set; } 
} 
```

它应该可以解决您的问题

# git - 使用Git，如果在新功能分支期间，当我们需要做热修复时，我们应该创建一个热修复分支吗？

> ID：12174130
> 
> 赞同：2
> 
> 时间：2012-08-29T08:54:16.850
> 
> 标签：git, git-branch

似乎，假设我们将所有内容都提交为“版本 1.0 完成”，现在我们想要添加一个功能，最好创建一个分支，例如`newfeature`，这样当我们需要“热修复”或“快速修复”时"，我们可以在`master`分支和分支之间切换`newfeature`。

但我确实在一个例子中看到，操作是：

```
git checkout master
git checkout -b hotfix

// now do any fix that is needed in Emacs

git commit -am "finished hot fix"
git checkout master
git merge hotfix
git branch -d hotfix       // delete the hotfix branch 
```

问题是，应该`hotfix`创建并经历所有的合并和删除`hotfix`？为什么不直接切换到`master`分支并进行修复并提交它，仅此而已？是否有充分的理由创建`hotfix`分支？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:06:14.190

这完全取决于你。

我认为一个好的策略是根据修复的大小进行选择。如果期望一个优秀的开发人员更改一两个文件，每个文件几行，您可以在 master 分支上进行。

但是，另一方面，如果有 100 名开发人员从事该项目，并且新开​​发人员必须提供可能意味着大量工作的修复程序，10 多个文件和 100 多行要更改，那可能会更好并且更舒适地创建修补程序分支（删除它是一种很好的做法，因为它变得无用甚至令人烦恼）。

决定您是否需要特定分支的标准介于这些情况之间，并且是您（或您的管理员）的决定。

另一种有用的情况是，如果您同时处理不同的修复/功能并且它们是冲突的（例如配置不同，或者不再编译，...）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T09:06:23.693

如果您使用主分支作为开发分支，我认为创建另一个分支用于修补程序是没有用的。但是如果您使用这样的分支模型[，](http://nvie.com/posts/a-successful-git-branching-model/)它非常有用。

他们使用单独的开发和主分支。master 分支仅用于标记发布版本。因此，如果您的客户有问题并且您想要进行修补程序，您可以从主发布标签创建一个修补程序分支。因此，该修补程序与您的正常开发分支完全分离，客户只能得到他想要的东西，即修补程序。

合并和删除分支也可以。如果您使用 --no-ff ，您可以重建，有一个合并。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T10:26:49.410

看来您正在寻找某种 git 工作流，我推荐 Vincent Driessen 的git[分支](http://nvie.com/about/)[模型](http://nvie.com/posts/a-successful-git-branching-model/)[@nvie](https://github.com/nvie/)以及他编写的工具[git-flow 。](https://github.com/nvie/gitflow)这确实是一种使用 git 的优雅方式，你真的需要尝试一下。

# javascript - 在javascript中将样式显示从无更改为阻止？

> ID：12174133
> 
> 赞同：10
> 
> 时间：2012-08-29T08:54:28.437
> 
> 标签：javascript, html, jquery

这是html代码片段

```
<li style="opacity: 1;">
    <a id="LinkDisplay" class="optionsDropDown" style="color:#FF0000;display:none" href="javascript:showThisLink('LinkId');">
</li> 
```

这是在加载时调用的 jquery 函数

```
$(function () {
    $.ajax({
        url: url,
        dataType: 'json',
        data: '',
        type: 'POST',
        success: function (data) {
            alert("Test");
            document.getElementById("LinkDisplay").style.diplay="block"; // line 1
            // after this line execution i should see the link as i have
            // changed the link display from none to block but it is still invisible
        });
    });
} 
```

**第 1 行执行后，我不确定为什么我的链接不可见？**

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-29T08:56:52.830

您没有更改代码中的显示属性

```
 document.getElementById("LinkDisplay").style.display="block" 
```

在第 1 行之后将此代码插入到您的函数中

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-29T09:00:12.550

由于您使用的是 jQuery，因此您可以编写

```
$("#elemId").show() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-02T11:41:26.537

问题是**显示**在该行中的拼写：

```
document.getElementById("LinkDisplay").style.display="block"; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-29T08:57:19.797

父级`li`设置为`opacity: 0`，这使其透明。

您需要将其不透明度更新为 1 以使其可见。

替换这个：

```
document.getElementById("LinkDisplay").style.color = "#FF0000"; 
```

有了这个：

```
$('#LinkDisplay').show().parent('li').css({opacity: 1}); 
```

第二行是 jQuery（因为您已经在使用 jQuery，并且更容易找到父节点） - 它正在查找 LinkDisplay 链接并将其更改`display: none`为`display: block`，然后更改 parent`li`的不透明度以使其可见。

[工作的jsFiddle](http://jsfiddle.net/AQ3cr/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-29T09:00:07.670

看起来您已经在使用 jquery，因此您可以通过使用 $ 选择器语法来简化一点：

```
$('#LinkDisplay').css('display', 'block') 
```

您还可以使用[jQuery show](http://api.jquery.com/show/)方法来缩短第一部分，如下所示：

```
$('#LinkDisplay').show() 
```

`#`jQuery 选择器可以使用for id 和`.`for classes按 ID 或类查找元素。[jQuery css](http://api.jquery.com/css/)方法允许您使用多种方法获取和设置属性。并且[jQuery 的父](http://api.jquery.com/parent/)方法可以让你快速从 DOM 中的一个元素向上遍历来查找其他标签。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-29T09:00:09.287

使用 jQuery：

```
$('#LinkDisplay').css('display','block');
$('#LinkDisplay').parent().css('opacity','1'); 
```

# iphone - 在 Resources 文件夹下添加 iOS 图标和启动图像

> ID：12174134
> 
> 赞同：2
> 
> 时间：2012-08-29T08:54:28.940
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我已将所有图标和启动图像放在名为“ **Resources** ”的文件夹下，并将所有文件添加到 XCode 中。

当我通过选择此文件夹下的文件来选择 XCode 中的启动图像时，它说..

```
a file with name "Default.png" already exists. Do you want to replace it? 
```

当我选择是时，文件“ **Default.png** ”被复制并放置在项目根文件夹中，所以现在我有两个“ **Default.png** ”

是否可以使用文件夹中已有的`Resources`文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:18:42.503

我在 Xcode 中注意到了同样的奇怪行为。您可以删除项目根目录中的重复文件。将使用 Resource 文件夹中的图标，因为所有资源都已复制到 app 目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T08:58:25.670

**仅限 iPhone 的应用程序：**

```
iPhone-only applications may only have one launch image. It should be in PNG format and measure 320 x 480 pixels. Name your launch image file Default.png.

For iPhone 4 high resolution, you can include an additional launch image. It should be in PNG formate and measure 640 x 960 pixels. Name it Default@2x.png. This image will get picked up by the iOS if your app is running on an iPhone 4. 
```

**注意：**如果您的应用程序没有在 iPhone 4 上运行，并且您同时提供了 Default.png 和 Default@2x.png，iOS 将自动选择 Default.png 作为启动图像。

**解决方案**：删除项目根文件夹中的一个 Default.png 位置用于启动图像

**对于 ICON**：请参阅[此](http://developer.apple.com/library/ios/#qa/qa1686/_index.html)链接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T09:21:33.950

您可以使用资源文件夹下的 default.png 并删除 XCode 放在项目根文件夹下的那个。我问自己同样的问题，在`Info.plist`.

一切都在王子提到的这个[链接中。](http://developer.apple.com/library/ios/#qa/qa1686/_index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T19:20:00.743

你可以使用这个肮脏的技巧：在硬盘驱动器的某个地方找到图像。然后将其拖入 xcode - 如果需要，选择复制。图像位于根目录中并用作图标或启动。然后将查找器中的图像重新定位到项目中所需的文件夹中。然后转到 xcode 并选择您丢失的图像文件。在右侧边栏中单击位置下的小图标 - 选择图像的当前路径。现在您也可以在 xcode 文件列表中拖动您的图像。

或将图像放入文件夹。将它们添加到项目中。选择构建阶段-> 复制捆绑资源。单击 + 并选择您的图像。

或者

将图像放入项目中所需的文件夹。然后只需将图像添加到 xcode 文件列表 - 您将此文件添加到项目中。xcode 自动使用您的图像（如果它的名称看起来像 Def​​ault*.png）

结果-您需要在硬盘驱动器上的文件夹中创建图像并用作图标/启动图像

唯一的问题 - 如果您在 lauch 图像表单（摘要选项卡）上单击删除。你不能只使用你的图像作为启动。你应该从头开始做所有的步骤

ps：今天我遇到了这个问题-根据苹果文档-图像应该位于根目录中。但是如果您在新创建的项目中看到 - 苹果使用相同的方式 - 一旦添加图像。

希望这有帮助

# refactoring - 方法怎么可能只有 3 行？

> ID：12174137
> 
> 赞同：0
> 
> 时间：2012-08-29T08:54:32.753
> 
> 标签：refactoring

我正在阅读一本关于清洁编码的书，并且有示例代码。

作者说他书中几乎所有的方法都可能少于 5 行。

* * *

*这是一个看起来很难理解的未重构代码。*

```
 public static String testableHtml(
    PageData pageData,
    boolean includeSuiteSetup
  ) throws Exception {
    WikiPage wikiPage = pageData.getWikiPage();
    StringBuffer buffer = new StringBuffer();
    if (pageData.hasAttribute("Test")) {
      if (includeSuiteSetup) {
        WikiPage suiteSetup =
          PageCrawlerImpl.getInheritedPage(
                  SuiteResponder.SUITE_SETUP_NAME, wikiPage
          );
        if (suiteSetup != null) {
          WikiPagePath pagePath =
            suiteSetup.getPageCrawler().getFullPath(suiteSetup);
          String pagePathName = PathParser.render(pagePath);
          buffer.append("!include -setup .")
                .append(pagePathName)
                .append("\n");
        }
      }
      WikiPage setup = 
        PageCrawlerImpl.getInheritedPage("SetUp", wikiPage);
      if (setup != null) {
        WikiPagePath setupPath =
          wikiPage.getPageCrawler().getFullPath(setup);
        String setupPathName = PathParser.render(setupPath);
        buffer.append("!include -setup .")
              .append(setupPathName)
              .append("\n");
      }
    }
    buffer.append(pageData.getContent());
    if (pageData.hasAttribute("Test")) {
      WikiPage teardown = 
        PageCrawlerImpl.getInheritedPage("TearDown", wikiPage);
      if (teardown != null) {
        WikiPagePath tearDownPath =
          wikiPage.getPageCrawler().getFullPath(teardown);
        String tearDownPathName = PathParser.render(tearDownPath);
        buffer.append("\n")
              .append("!include -teardown .")
              .append(tearDownPathName)
              .append("\n");
      }
      if (includeSuiteSetup) {
        WikiPage suiteTeardown =
          PageCrawlerImpl.getInheritedPage(
                  SuiteResponder.SUITE_TEARDOWN_NAME,
                  wikiPage
          );
        if (suiteTeardown != null) {
          WikiPagePath pagePath =
            suiteTeardown.getPageCrawler().getFullPath (suiteTeardown);
          String pagePathName = PathParser.render(pagePath);
          buffer.append("!include -teardown .")
                .append(pagePathName)
                .append("\n");
        }
      }
    }
    pageData.setContent(buffer.toString());
    return pageData.getHtml();
  } 
```

* * *

上面的代码重构如下。

```
 public static String renderPageWithSetupsAndTeardowns(
    PageData pageData, boolean isSuite
  ) throws Exception {
    boolean isTestPage = pageData.hasAttribute("Test");
    if (isTestPage) {
      WikiPage testPage = pageData.getWikiPage();
      StringBuffer newPageContent = new StringBuffer();
      includeSetupPages(testPage, newPageContent, isSuite);
      newPageContent.append(pageData.getContent());
      includeTeardownPages(testPage, newPageContent, isSuite);
      pageData.setContent(newPageContent.toString());
    }
    return pageData.getHtml();
  } 
```

* * *

最后变成了这个样子

```
 public static String renderPageWithSetupsAndTeardowns(
    PageData pageData, boolean isSuite) throws Exception {
    if (isTestPage(pageData))
      includeSetupAndTeardownPages(pageData, isSuite);
    return pageData.getHtml();
  } 
```

* * *

我可以认识到这三个代码在重构时变得更好。

即使它有 3 或 4 行长，最后一个名为**includeSetupAndTeardownPages(pageData, isSuite) 的方法或其内部方法也**可能超过 5 行...

这对我来说看起来很矛盾，还是我想错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:06:59.103

我个人认为将方法分解为 5 行是没有意义的。这应该是有道理的：

*   该功能可以拆分，里面有一些通用任务。例如几个模块的初始化。在那里，将它分解为只涉及一个模块的较小功能是有意义的。
*   多次使用的单独代码。例如计算一些日期差异，您必须检查空值。

在我看来，将每种方法都分解为 5 行是不好的。所以你必须跳过代码才能看到真正发生了什么。此外，如果这不是现代编译的主题，那么您的代码会有更多的跳转，这可能会使您的代码变慢......好吧，也许只是几纳秒，但也有一些重要的实时问题。

一般来说，我多次听到（我也这么认为），最好不要编写比屏幕长的代码（函数/方法）。这样您就可以在不滚动的情况下阅读代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T09:14:14.590

干净的代码不应包含超过 5 行的方法的标准不一定是好的。

在我看来，一个人应该

*   尝试封装在代码的许多部分中常用的功能/更频繁地编写代码行数。这使得代码更不容易出错并且调试更容易！节省大量时间。
*   合并属于一个逻辑执行块的代码，使阅读代码更容易理解。一个好的结构物超所值，尤其是在处理大型项目时！
*   以使阅读代码更易于理解的方式命名函数！！！
*   彻底记录函数、参数、变量和代码，这样您就可以使用 doxygen 等工具轻松生成可打印的文档。当不止一个开发人员在处理您的代码时，它就派上用场了。

因此，与其坚持一个固定的数字，不如追求可理解性和结构！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T08:59:23.470

我猜作者正在将 1 种方法分解为 2、3、4 种或更多方法来实现这一目标。我不认为干净的代码是方法少于 5 行的代码。

# gwt - GWT从javascript调用java方法不起作用

> ID：12174140
> 
> 赞同：3
> 
> 时间：2012-08-29T08:54:44.733
> 
> 标签：gwt, gwt2, jsni

我有一个要求，我必须从 javascript 调用 java GWT 方法，但它不起作用。没有抛出异常，但应用程序挂在某个地方并且代码没有运行。当我不拨打该电话时，该应用程序运行良好。我的 GWT 编译成功。我正在 Firefox 的开发模式下进行测试。

我的代码是这样的 -

```
class CPClass {

    public native void jsCallViewDocument(String objectId)/*-{
        $wnd.jsCallViewDocument = 
            $entry(this.@com.srre.g0a.client.presenter.impl.viewdoc.CPClass::testJS(Ljava/lang/String;)(objectId));
    }-*/;

    private void testJS(String objectId) {
        SC.say("Call successfull" + objectId);
    }

    private void setDocName(ListGridRecord newRecord, someDTO currDocInfo) {

        String anchorTag = "<a href ='#' onclick = \"javascript:jsCallViewDocument('" 
            +  currDocInfo.getDocName() + "')\">" + currDocInfo.getDocName() + "</a>";

        newRecord.setAttribute(Display.GRID_FIELD_DOC_NAME, anchorTag);
    }

} 
```

到目前为止，我已经使用 JSNI 进行简单的调用，例如 $wnd.close() 或 $wnd.alert()，所以我可能会遗漏一些东西。我的类（定义了 Native 方法和要调用的方法）是否需要扩展 JavaScriptObject 或者该本地方法是否需要先注册？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T13:50:12.663

我想你在这里有点困惑。

只有在单击链接之前您已经`jsCallViewDocument()`从 Java 代码中调用了您的代码，否则该`$wnd.jsCallViewDocument`函数将不存在。

在这种情况下，将字符串传递给函数是没有意义的。

您可能想要的是这样的函数：

```
public static native void setupJsCallViewDocument(CPClass p) /*-{
    var fn = function(objectId) {
        // invoke our (Java) testJS function, passing objectId as a parameter
        $entry(
           p.@com.srre.g0a.client.presenter.impl.viewdoc.CPClass::testJS(Ljava/lang/String;)(objectId)
        );
    };

    // assign this function to the global jsCallViewDocument
    $wnd.jsCallViewDocument = fn;
}-*/; 
```

现在在您的`setDocName`功能中：

```
private void setDocName(ListGridRecord newRecord, someDTO currDocInfo) {
    // set up the native function call
    setupJsCallViewDocument(this);

    String anchorTag = "<a href ='#' onclick = \"javascript:jsCallViewDocument('" 
        +  currDocInfo.getDocName() + "')\">" + currDocInfo.getDocName() + "</a>";

    newRecord.setAttribute(Display.GRID_FIELD_DOC_NAME, anchorTag);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:18:33.953

您不需要`javascript:`in`onClick`属性（与`href`属性相反）

切换到：

```
String anchorTag = "<a href ='#' onclick = \"jsCallViewDocument('" 
        +  currDocInfo.getDocName() + "')\">" + currDocInfo.getDocName() + "</a>"; 
```

或者：

```
String anchorTag = "<a href = \"javascript:jsCallViewDocument('" 
        +  currDocInfo.getDocName() + "')\">" + currDocInfo.getDocName() + "</a>"; 
```

顺便说一句，为什么不在 java gwt 代码中分配事件监听器？

# c# - Windows 窗体中 PageLoad 的替代方案

> ID：12174148
> 
> 赞同：1
> 
> 时间：2012-08-29T08:55:02.783
> 
> 标签：c#, winforms, postback, desktop-application

[我在Windows 窗体](http://en.wikipedia.org/wiki/Windows_Forms)窗体上有许多事件。我有一个反馈标签，我必须写 feedbaxk.Text=""; 在每个事件的开始。

在[ASP.NET](http://en.wikipedia.org/wiki/ASP.NET)中，我一直`page_load`在每次回发时触发的事件中只编写一次，但表单加载只触发一次。

我试图用我的问题的标题进行搜索，发现以下两个最接近的答案：

*   *[WinForms 等效于 ASP.NET 页面加载事件](http://bytes.com/topic/c-sharp/answers/812784-winforms-equivalent-asp-net-page-load-event)*（字节）

*   *[WinForms 等效于 ASP.NET 页面加载事件](http://www.pcreview.co.uk/forums/winforms-equivalent-asp-net-page-load-event-t3515490.html)*(PC Review)

有一些相关的材料，但我无法从这些以及更多的材料中得到令人满意的答案。

**如何在 Windows 窗体中检测到将要触发的事件？**

**更新：**通过另一种方式谷歌搜索，我找到了一个与另一个链接链接的关闭链接，*[在 .NET 中查找 Windows 窗体控件的所有事件处理程序](https://stackoverflow.com/questions/3855985)*，*[是否可以从一个控件中“窃取”事件处理程序并将其提供给其他？](https://stackoverflow.com/questions/293007/is-it-possible-to-steal-an-event-handler-from-one-control-and-give-it-to-anoth/293031#293031)*. 看完这些后，我认为如果

1.  我可以在 Form_Load 的末尾以 win 形式获取所有事件的列表（之后我不再添加任何事件）。然后为所有事件添加一些通用功能（比如更改标签文本）。
2.  我可能能够从父事件继承我的所有事件，并在该事件中添加我想要的功能，然后为每个事件添加（覆盖）特定功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:50:38.940

这取决于您要处理的任何特定事件，因为在您的窗口中，您可以有 Resize、Click、Move 等事件。看看您参考 ASP.NET 提出的观点，您似乎想要处理这个一些按钮点击。

您可以尝试覆盖 WndProc 并处理[WM_COMMAND](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647591%28v=vs.85%29.aspx)消息。如果您想在单击某个特定按钮时处理此问题，那么我会说您为每个按钮处理此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:07:38.930

您可以使用[AOP](https://en.wikipedia.org/wiki/Aspect-oriented_programming)来做到这一点。使用 Unity（Unity 应用程序块）框架来装饰您的 Windows 窗体窗体中的所有事件方法。在事件方法调用之前调用您的自定义方法。

[使用反射和代理模式](https://en.wikipedia.org/wiki/Proxy_pattern)很容易实现和隐藏代码。相关文章是*[面向方面的编程、拦截和 Unity 2.0](http://msdn.microsoft.com/en-us/magazine/gg490353.aspx)*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T03:52:44.693

如果您想在所有按钮单击事件上运行一些代码，您可以创建一个如下所示的辅助方法，该方法将一个方法附加到表单上所有按钮的单击事件处理程序。

```
public static class UIHelper
{
    public static void RegesterButtonClicks(Form form, EventHandler method)
    {
        foreach (Control control in form.Controls)
        {
            if (control is Button)
            {
                control.Click += method;
            }
        }
    }
} 
```

然后创建您的方法以在所有按钮单击时运行。像这样的东西：

```
private void OnButtonClick(object sender, EventArgs e)
{
    //Code for all clicks here
} 
```

然后在 InitializeComponent() 下添加如下代码行；构造函数中的行

```
UIHelper.RegesterButtonClicks(this, OnButtonClick); 
```

如果需要，您还可以扩展辅助方法以将该方法附加到其他事件和其他类型的控件。

# jquery - 使用 jquery 选择元素并根据选择动态添加新元素

> ID：12174157
> 
> 赞同：0
> 
> 时间：2012-08-29T08:55:24.073
> 
> 标签：jquery, jquery-ui

如果特定类与当前元素匹配，我有以下代码来选择元素并动态添加

```
<script type="text/javascript">
                         $(document).ready(function(){
                              $('a#extra').click(function(event){
                                 // alert($(this).attr('class'));
                                if($(this).attr('class') == 'extra'){
                                    event.preventDefault();
                                    $(this).append('<div style="float:left;color:red;margin-left:10px;font:20px;margin: 3px 0 0 10px;">Please Login/Register to view Details</div>').slideToggle(5000);
                                    window.location.href='http://weddingsinwinnipeg.ca/signin/';
                                }
                             });
                         });
                     </script>

<a href="" class="extra extra_120" id="extra"></a>
<a href="" class="extra extra_145" id="extra"></a>
<a href="" class="extra extra_156" id="extra"></a> 
```

我想添加到我点击的锚元素，但上面的代码不起作用，请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T09:03:24.687

您也不应该有多个具有相同 ID 值的元素。阅读：[http ://css-tricks.com/the-difference-between-id-and-class/](http://css-tricks.com/the-difference-between-id-and-class/)

所以，

```
<a href="" class="extra extra_120" id="extra"></a>
<a href="" class="extra extra_145" id="extra"></a>
<a href="" class="extra extra_156" id="extra"></a> 
```

应该

```
<a href="" class="extra extra_120" id="extra1"></a>
<a href="" class="extra extra_145" id="extra2"></a>
<a href="" class="extra extra_156" id="extra3"></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T08:59:00.227

Use `.hasClass` instead,

`$(this).attr('class')` will return the whole class attribute like `"extra extra_120"`.

Change

```
 if($(this).attr('class') == 'extra'){ 
```

to

```
 if($(this).hasClass('extra')){ 
```

***Update:***

Didn't notice you use same ids, instead of same ids, just use class will be ok. And one more problem, you should redirect the page in the callback of `.slideDown`.

```
<script type="text/javascript">
$(document).ready(function () {
    $('a.extra').click(function (event) {
        event.preventDefault();
        $(this).append('<div style="float:left;color:red;margin-left:10px;font:20px;margin: 3px 0 0 10px;">Please Login/Register to view Details</div>').slideToggle(5000, function () {
            window.location.href = 'http://weddingsinwinnipeg.ca/signin/';
        });
    });
});
</script>

<a href="" class="extra extra_120"></a>
<a href="" class="extra extra_145"></a>
<a href="" class="extra extra_156"></a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T09:13:19.483

```
 <script type="text/javascript">
                         $(document).ready(function(){
                              $('.extralink').click(function(event){
                                 // alert($(this).attr('class'));
                                if($(this).attr('class') == 'extra'){
                                    event.preventDefault();
                                    $(this).append('<div style="float:left;color:red;margin-left:10px;font:20px;margin: 3px 0 0 10px;">Please Login/Register to view Details</div>').slideToggle(5000);
                                    window.location.href='http://weddingsinwinnipeg.ca/signin/';
                                }
                             });
                         });
                     </script>

<a href="" class="extra extra_120 extralink " ></a>
<a href="" class="extra extra_145 extralink " "></a>
<a href="" class="extra extra_156 extralink " ></a> 
```

我想这就是你要找的。如果我理解错了你的问题，请告诉我。我认为的解决方案是将“额外”类与“extralink”等另一个类的链接

# java - Perl 将 bash 管道发送到 Java

> ID：12174161
> 
> 赞同：0
> 
> 时间：2012-08-29T08:55:45.557
> 
> 标签：java, perl, bash, pipe

我是 Perl 初学者。我有这个 Perl 片段

```
$normal_pileup = "samtools mpileup -q 1 -f XXXX YYYYY";
$tumor_pileup = "samtools mpileup -q 1 -f XXXX ZZZZZ";

bash -c \"java -jar ttt.jar  <\($normal_pileup\) <\($tumor_pileup\) output 
```

他们尝试发出一个系统调用，将这些命令的输入通过管道传输到 Java 程序中。我无法让它工作。谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:52:42.043

您不能直接从 Perl 调用 bash。但是，如果您使用`system`， /bin/sh 将被调用，这可能不支持进程替换。

一种可能的解决方法是

```
system qq(echo 'java -jar ttt.jar  <($normal_pileup) <($tumor_pileup) output' | bash); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T09:18:12.687

```
$normal_pileup = "samtools mpileup -q 1 -f XXXX YYYYY"; 
```

不会执行任何命令，只会存储`samtools mpileup -q 1 -f XXXX YYYYY`为字符串。对于`$tumor_pileup`.

如果要执行命令使用

```
$normal_pileup = `samtools mpileup -q 1 -f XXXX YYYYY`; 
```

`bash`不是 Perl 命令。

```
`java -jar ttt.jar  ...` 
```

你“java”也很可能是错的

*   与`<`您一起指定读取 STDIN 的位置。应该是一个文件，但在您的情况下，您要指定上一个命令的输出。这仅在输出`samtool`是文件名时才有效。

*   如果您希望您的 java 程序处理另一个命令的输出，您将需要一个管道

    ```
    mycommand | java 
    ```

总结一下，我想你想要

```
` ( samtools mpileup -q 1 -f XXXX YYYYY; samtools mpileup -q 1 -f XXXX ZZZZZ ) | java -jar ttt.jar output ` 
```

# c# - 改进多线程循环中的繁重工作

> ID：12174165
> 
> 赞同：1
> 
> 时间：2012-08-29T08:55:51.747
> 
> 标签：c#, multithreading, task-parallel-library

我的数据处理有点问题。

```
public void ParseDetails()
{            
    for (int i = 0; i < mListAppInfo.Count; ++i)
    {
        ParseOneDetail(i);
    }
} 
```

对于 300 条记录，通常需要大约 13-15 分钟。

我试图通过使用来改进，`Parallel.For()`但它总是在某个时候停止。

```
public void ParseDetails()
{
    Parallel.For(0, mListAppInfo.Count, i => ParseOneDetail(i));
} 
```

在方法`ParseOneDetail(int index)`中，我设置了一个输出日志来跟踪正在处理的记录 ID。总是在某个时候挂掉，我不知道为什么..

```
ParseOneDetail(): 89 ...
ParseOneDetail(): 90 ...
ParseOneDetail(): 243 ...
ParseOneDetail(): 92 ...
ParseOneDetail(): 244 ...
ParseOneDetail(): 93 ...
ParseOneDetail(): 245 ...
ParseOneDetail(): 247 ...
ParseOneDetail(): 94 ...
ParseOneDetail(): 248 ...
ParseOneDetail(): 95 ...
ParseOneDetail(): 99 ...
ParseOneDetail(): 249 ...
ParseOneDetail(): 100 ...
_ <hang at this point> 
```

感谢您的帮助和建议，以改善这一点。谢谢！

`Edit 1`：更新方法：

```
private void ParseOneDetail(int index)
{
    Console.WriteLine("ParseOneDetail(): " + index + " ... ");
    ApplicationInfo appInfo = mListAppInfo[index];

    var htmlWeb = new HtmlWeb();
    var document = htmlWeb.Load(appInfo.AppAnnieURL);

    // get first one only
    HtmlNode nodeStoreURL = document.DocumentNode.SelectSingleNode(Constants.XPATH_FIRST);
    appInfo.StoreURL = nodeStoreURL.Attributes[Constants.HREF].Value;
} 
```

`Edit 2``Enigmativity`：这是按照建议运行一段时间后的错误输出，

```
ParseOneDetail(): 234 ...
ParseOneDetail(): 87 ...
ParseOneDetail(): 235 ...
ParseOneDetail(): 236 ...
ParseOneDetail(): 88 ...
ParseOneDetail(): 238 ...
ParseOneDetail(): 89 ...
ParseOneDetail(): 90 ...
ParseOneDetail(): 239 ...
ParseOneDetail(): 92 ...

Unhandled Exception: System.AggregateException: One or more errors occurred. ---
> System.Net.WebException: The operation has timed out
   at System.Net.HttpWebRequest.GetResponse()
   at HtmlAgilityPack.HtmlWeb.Get(Uri uri, String method, String path, HtmlDocum
ent doc, IWebProxy proxy, ICredentials creds) in D:\Source\htmlagilitypack.new\T
runk\HtmlAgilityPack\HtmlWeb.cs:line 1355
   at HtmlAgilityPack.HtmlWeb.LoadUrl(Uri uri, String method, WebProxy proxy, Ne
tworkCredential creds) in D:\Source\htmlagilitypack.new\Trunk\HtmlAgilityPack\Ht
mlWeb.cs:line 1479
   at HtmlAgilityPack.HtmlWeb.Load(String url, String method) in D:\Source\htmla
gilitypack.new\Trunk\HtmlAgilityPack\HtmlWeb.cs:line 1103
   at HtmlAgilityPack.HtmlWeb.Load(String url) in D:\Source\htmlagilitypack.new\
Trunk\HtmlAgilityPack\HtmlWeb.cs:line 1061
   at SimpleChartParser.AppAnnieParser.ParseOneDetail(ApplicationInfo appInfo) i
n c:\users\nhn60\documents\visual studio 2010\Projects\FunToolPack\SimpleChartPa
rser\AppAnnieParser.cs:line 90
   at SimpleChartParser.AppAnnieParser.<ParseDetails>b__0(ApplicationInfo ai) in
 c:\users\nhn60\documents\visual studio 2010\Projects\FunToolPack\SimpleChartPar
ser\AppAnnieParser.cs:line 80
   at System.Threading.Tasks.Parallel.<>c__DisplayClass21`2.<ForEachWorker>b__17
(Int32 i)
   at System.Threading.Tasks.Parallel.<>c__DisplayClassf`1.<ForWorker>b__c()
   at System.Threading.Tasks.Task.InnerInvoke()
   at System.Threading.Tasks.Task.InnerInvokeWithArg(Task childTask)
   at System.Threading.Tasks.Task.<>c__DisplayClass7.<ExecuteSelfReplicating>b__
6(Object )
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceled
Exceptions)
   at System.Threading.Tasks.Task.Wait(Int32 millisecondsTimeout, CancellationTo
ken cancellationToken)
   at System.Threading.Tasks.Parallel.ForWorker[TLocal](Int32 fromInclusive, Int
32 toExclusive, ParallelOptions parallelOptions, Action`1 body, Action`2 bodyWit
hState, Func`4 bodyWithLocal, Func`1 localInit, Action`1 localFinally)
   at System.Threading.Tasks.Parallel.ForEachWorker[TSource,TLocal](TSource[] ar
ray, ParallelOptions parallelOptions, Action`1 body, Action`2 bodyWithState, Act
ion`3 bodyWithStateAndIndex, Func`4 bodyWithStateAndLocal, Func`5 bodyWithEveryt
hing, Func`1 localInit, Action`1 localFinally)
   at System.Threading.Tasks.Parallel.ForEachWorker[TSource,TLocal](IEnumerable`
1 source, ParallelOptions parallelOptions, Action`1 body, Action`2 bodyWithState
, Action`3 bodyWithStateAndIndex, Func`4 bodyWithStateAndLocal, Func`5 bodyWithE
verything, Func`1 localInit, Action`1 localFinally)
   at System.Threading.Tasks.Parallel.ForEach[TSource](IEnumerable`1 source, Act
ion`1 body)
   at SimpleChartParser.AppAnnieParser.ParseDetails() in c:\users\nhn60\document
s\visual studio 2010\Projects\FunToolPack\SimpleChartParser\AppAnnieParser.cs:li
ne 80
   at SimpleChartParser.Program.Main(String[] args) in c:\users\nhn60\documents\
visual studio 2010\Projects\FunToolPack\SimpleChartParser\Program.cs:line 15 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T09:21:41.113

这本身不是一个答案，但是您可以尝试修改您的代码以使其像这样工作并让我们知道您是否仍然有错误？

```
public void ParseDetails()
{
    Parallel.ForEach(mListAppInfo.ToArray(), ai => ParseOneDetail(ai));
}

private void ParseOneDetail(ApplicationInfo appInfo)
{
    var htmlWeb = new HtmlWeb();
    var document = htmlWeb.Load(appInfo.AppAnnieURL);

    // get first one only
    HtmlNode nodeStoreURL = 
            document.DocumentNode.SelectSingleNode(Constants.XPATH_FIRST);
    appInfo.StoreURL = nodeStoreURL.Attributes[Constants.HREF].Value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:36:54.063

我会注释掉每一行`ParseOneDetail`并检查它是否完成运行。

如果是（应该），取消前半部分的注释，并检查它是否会再次完成。继续执行此二进制搜索，直到您准确确定是哪一行阻止它运行。该行中可能有一些不是线程安全的。

# cakephp - cake 1.3 - 缓存不加载模型

> ID：12174167
> 
> 赞同：0
> 
> 时间：2012-08-29T08:56:03.553
> 
> 标签：cakephp, caching, model, cakephp-1.3

在我的 users_controller 我有：

```
var $uses = array('User', ...);
function dosomething() {
  $this->User->findById($someId);
  ...
} 
```

它工作了大约一个小时，之后，我有错误：

```
PHP Fatal error:  Call to a member function findById() on a non-object 
```

当我让它`dump($this)`告诉我那`$this->User`只是一个空字符串。

在我从 TMP.'cache' 中删除所有文件后，它又可以正常工作一个小时。如果我将禁用缓存它一直工作正常

我试过了

`Cache::config('default', array('engine' => 'File'));`

和

`Cache::config('default', array('engine' => 'APC'));`

它的工作原理相同。

不幸的是我需要缓存，所以请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T02:40:07.043

我认为缓存默认持续时间是 1 小时。如果第一次正确创建，1小时后无法重新生成，我猜你的问题可能与权限有关。我的意思是，看起来您有权创建缓存文件，但以后无法删除它。

# delphi - Delphi - 为什么 TDate 和 TDateTime 相同？

> ID：12174168
> 
> 赞同：1
> 
> 时间：2012-08-29T08:56:04.820
> 
> 标签：delphi, tdatetime

在查看 System.pas 时，TDate 和 TDateTime 定义如下：

```
 TDateTime = type Double;

  TDate = type TDateTime;
  TTime = type TDateTime; 
```

显然 TDate 和 TDateTime 是相同的。

我只是在使用 TDate 和 TDateTime 时遇到了困难，因为我希望 TDate 只包含日期部分而不包含时间部分。

现在我想知道：这背后的意义是什么？当我将变量声明为 TDate 时，它​​应该包含一个日期，而不是一个 dat 和一个时间值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T08:58:52.303

They are not the same. If the declarations had been

```
TDate = TDateTime;
TTime = TDateTime; 
```

they *had* been the same. With the additional `type`, although they are still technically the same, i.e., they are still `double`s, they can be told apart. This, for instance, makes it possible to use different property editors in the Object Inspector for the two types (a date picker and a time picker, respectively), while you may use a 'date-time' picker for `TDateTime`.

In addition, even if it weren't for this, it might be good to use different 'aliases' for different purposes. This might make your source code easier to understand. For instance, if you do

```
var
  StartTime: TDate; 
```

then you know that `StartTime` contains only information about the date, and not the time (unless you abuse the norms).

# php - yii : jquery ajax 将数据添加到标签中

> ID：12174171
> 
> 赞同：0
> 
> 时间：2012-08-29T08:56:08.837
> 
> 标签：php, jquery, ajax, yii

Q : 如何通过ajax 将数据值添加到表格行的标签中？

状态：在表格中添加新行正在工作。此时，当用户选择商品时，价格应显示在标签（价格）处。从控制器返回很好。但价格没有显示在标签（价格）上。

这是我的看法

```
<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'acc-recei-form',
    'enableAjaxValidation'=>false,
)); ?>

    <p class="note">Fields with <span class="required">*</span> are required.</p>

    <?php echo $form->errorSummary($model); ?>
   <?php
    Yii::app()->clientScript->registerScript('add-item', "
        $('#add-item').click(function(){
            //console.log(item_template);
            $('#template .template_item').clone().appendTo('#item_list');
            $('#item_list .template_item').fadeIn();
            return false;
        });

        $('#AccRecei_acc_category_id').live('change', function(){
                                                               var itemID = $(this).val(),
                    vNode  = $(this);
                    $.ajax({
                  url: 'getitem/'+itemID,
                  dataType: 'json',
                  success: function(data){
                    var target = $(vNode).parents('tr');
                    alert(target);
                    $(target).find('.price').val(data.item_price);
                  }
                });
                //alert(vNode);
            });
");

    ?>
<table id="item_list">
<tr>
    <td>name</td>
    <td>price</td>
    <td>qty</td>
    <td>row_total</td>
<tr>
</table>
<!--- other fields -->

<div class="row buttons">
    <?php echo CHtml::submitButton($model->isNewRecord ? 'Create' : 'Save'); ?>
</div>

<?php $this->endWidget(); ?>

</div><!-- form -->

<table id="template" style="display:none;" >
<tr class="template_item">
    <td><?php
            echo $form->dropDownList($model,'acc_category_id', $accitemslist, array(
            'prompt'=>'Please select a category',
            'options'=>array("$model->acc_category_id"=>array('selected'=>'selected')),
            )
        ); 
        ?></td>
    <td><label id="price" class="price"></label></td>
    <td><input type="text" name="item_qty[]" class=".qty" /></td>
    <td><label id="row_total" class="row_total[]"></label></td>
<tr>
</table> 
```

这是控制器（来自 ajax 的调用）

```
public function actionGetitem()
    {
        echo CJSON::encode(array(
            'item_price'=>12, 
        ));
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:15:49.757

“标签”标签没有“价值”。尝试改用' [text()](http://api.jquery.com/text/) '。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-03T13:23:19.437

嗨，您可以在这里使用 jquery html 属性.. 给标签一些 id，然后使用下面的代码..

在 ajax 成功消息中，添加这个

$( "#label_ID" ).html( data.item_price )

# google-app-engine - 如何在 Python 2.7 中使用 Google App Engine Remote API 和联合登录？

> ID：12174172
> 
> 赞同：0
> 
> 时间：2012-08-29T08:56:09.640
> 
> 标签：google-app-engine, python-2.7

使用联合登录时，Google App Engine不[支持](http://code.google.com/p/googleappengine/issues/detail?id=3258&q=remote&colspec=ID%20Type%20Component%20Status%20Stars%20Summary%20Language%20Priority%20Owner%20Log)[Remote API 。](https://developers.google.com/appengine/docs/python/tools/remoteapi)但是，显然可以在 Python 2.5 中使用它，如下所述：

[http://blog.notdot.net/2010/06/Using-remote-api-with-OpenID-authentication](http://blog.notdot.net/2010/06/Using-remote-api-with-OpenID-authentication)

基于该解决方案和文章下方的评论，我创建了以下 Python 2.7 代码：

应用程序.yaml：

```
application: my_application
version: 1
runtime: python27
api_version: 1
threadsafe: true

builtins:
- appstats: on
#- remote_api: on

handlers:
- url: /remoteapi.*
  script: remote_api.app
- url: /.*
  script: main.app
  secure: never 
```

远程api.py：

```
from google.appengine.ext.remote_api import handler
from google.appengine.ext import webapp
import re

MY_SECRET_KEY = 'secret'
cookie_re = re.compile('^"?([^:]+):.*"?$')

class ApiCallHandler(handler.ApiCallHandler):
    def CheckIsAdmin(self):
        login_cookie = self.request.cookies.get('dev_appserver_login', '')
        match = cookie_re.search(login_cookie)
        if (match and match.group(1) == MY_SECRET_KEY
            and 'X-appcfg-api-version' in self.request.headers):
            return True
        else:
            self.redirect('/_ah/login')
            return False

app = webapp.WSGIApplication([('.*', ApiCallHandler)]) 
```

当我运行 remote_api_shell 命令时：

```
remote_api_shell.py -s my_application.appspot.com/remoteapi 
```

返回此错误：

```
Traceback (most recent call last):
  File "remote_api_shell.py", line 133, in <module>
    run_file(__file__, globals())
  File "remote_api_shell.py", line 129, in run_file
    execfile(script_path, globals_)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\re
mote_api_shell.py", line 140, in <module>
    main(sys.argv)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\re
mote_api_shell.py", line 136, in main
    appengine_rpc.HttpRpcServer)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\re
mote_api_shell.py", line 76, in remote_api_shell
    rpc_server_factory=rpc_server_factory)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\ext\remo
te_api\remote_api_stub.py", line 682, in ConfigureRemoteApi
    app_id = GetRemoteAppIdFromServer(server, path, rtok)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\ext\remo
te_api\remote_api_stub.py", line 525, in GetRemoteAppIdFromServer
    response = server.Send(path, payload=None, **urlargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\ap
pengine_rpc.py", line 366, in Send
    f = self.opener.open(req)
  File "C:\Python27\lib\urllib2.py", line 400, in open
    response = meth(req, response)
  File "C:\Python27\lib\urllib2.py", line 513, in http_response
    'http', request, response, code, msg, hdrs)
  File "C:\Python27\lib\urllib2.py", line 438, in error
    return self._call_chain(*args)
  File "C:\Python27\lib\urllib2.py", line 372, in _call_chain
    result = func(*args)
  File "C:\Python27\lib\urllib2.py", line 521, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
urllib2.HTTPError: HTTP Error 302: Found 
```

我的代码有什么问题？是否可以使用联合登录在 Google App Engine 上的 Python 2.7 中使用远程 API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T09:32:03.817

代码没有问题。像这样运行 remote_api_shell 命令：

```
remote_api_shell.py -s my_application.appspot.com -p /remoteapi 
```

当提示输入电子邮件地址时，填写 的值`MY_SECRET_KEY`。密码无所谓。

# php - 身份验证登录并不总是将会话数据保存到 Cakephp 中的所有页面

> ID：12174173
> 
> 赞同：0
> 
> 时间：2012-08-29T08:56:10.700
> 
> 标签：php, cakephp, cakephp-2.0

我的登录方法：

```
public function login() {
    if ($this->request->is('post')) {
        if ($this->Auth->login()) {
            return $this->redirect($this->Auth->redirect());
        } else {
            $this->Session->setFlash('Please enter a valid username or password', 'errors/flash_error');
        }
    }
} 
```

由于某种原因，它不会总是在它重定向到的页面上显示会话信息。我有一个名为的页面`/random`被路由到：

```
Router::connect('/random', array('controller' => 'submissions', 'action' => 'random')); 
```

当我去时`/random`，它不会显示这个：

```
<?= $this->Session->read('Auth.User.username'); ?> 
```

但如果我去任何其他页面，它会..

在我的 SubmissionsController.php 中`beforeFilter()`：

```
public function beforeFilter() {
    parent::beforeFilter();
    $this->Auth->loginRedirect = array(
        'controller' => 'users',
        'action' => 'login');
    $this->Auth->allow(
            'popular',
            'newest',
            'random',
            'view',
            'category',
    );
    $this->Auth->flash['element'] = 'errors/flash_error';
    $this->Auth->authError = 'Please login or sign up to submit a link.';
} 
```

适用于`popular`, `newest`, `view`, 但不适用于`random`or `category`...

知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:13:44.027

原来我`flush()`在我的 default.ctp 中使用。这导致了奇怪的会话问题。对于遇到类似问题的任何人，我建议不要使用它。

# mysql - 使用 mysql workbench 反向引擎命令行

> ID：12174175
> 
> 赞同：1
> 
> 时间：2012-08-29T08:56:12.073
> 
> 标签：mysql, mysql-workbench

我有一个实时数据库，我试图为数据库可视化生成模型/ ER 图。

打开命令行帮助，但无法真正找到执行相同操作的方法。

我的 sql 数据库存在的地方没有 UI 支持。

我可以使用命令行选项从中生成 ER 图或模型吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T17:43:14.793

您可以从 MySQL Workbench 主屏幕生成 EER 图。您不必在服务器中安装 GUI，因为您可以从运行 Workbench 的 PC 连接到它。您所要做的就是在 MySQL Workbench 中建立与您的服务器的连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T11:41:53.710

你不能，但下面的命令应该让你知道里面有什么：

*   显示数据库；
*   使用*数据库名称*；显示表格；
*   显示创建表表*名*；

# javascript - 使用 JS 为当前用户设置 peoplepicker 默认值

> ID：12174181
> 
> 赞同：1
> 
> 时间：2012-08-29T08:56:22.277
> 
> 标签：javascript, sharepoint

我正在使用 sharepoint services 3.0，并且创建了一个自定义列表表单。我在这个表单中有一个 peoplepicker 字段，需要默认设置为当前用户。

这是我到目前为止所得到的：

*   首先我的peoplepicker函数：

    函数 PeoplePicker(){

    ```
    this.context = null;
    this.web = null;
    this.currentUser = null;
    this.parentTagId = null

    this.SetParentTagId = function(id){
        this.parentTagId = id;
    }

    this.SetLoggedInUser = function(){
        if(this.parentTagId != null){
            this.getWebUserData();
        }
    }

    this.getWebUserData = function(){
        this.context = new SP.ClientContext.get_current();
        this.web = this.context.get_web();
        this.currentUser = this.web.get_currentUser();
        this.currentUser.retrieve();
        this.context.load(this.web);
        this.context.executeQueryAsync(Function.createDelegate(this, this.onSuccessMethod),
                                       Function.createDelegate(this, this.onFailureMethod));
    }

    this.onSuccessMethod = function(){
        this.setDefaultValue(this.currentUser.get_title());
    }

    this.onFailureMethod = function(){
        alert('request failed ' + args.get_message() + '\n' + args.get_stackTrace());
    }

    this.setDefaultValue = function(value){
        var parentTag = document.getElementById(this.parentTagId);
        if (parentTag != null) {
            var peoplePickerTag = this.getTagFromIdentifierAndTitle(parentTag, 'div',
                                                    'UserField_upLevelDiv', 'People Picker');
            if (peoplePickerTag) {
                peoplePickerTag.innerHTML = value;
            }
        }
    }

    this.getTagFromIdentifierAndTitle = function(parentElement, tagName, identifier, title){
        var len = identifier.length;
        var tags = parentElement.getElementsByTagName(tagName);
        for (var i = 0; i < tags.length; i++) {
            var tempString = tags[i].id;
            if (tags[i].title == title && (identifier == "" ||
                                tempString.indexOf(identifier) == tempString.length - len)) {
                return tags[i];
            }
        }
        return null;
    } 
    ```

    }

*   其次，我在我的 asp 内容中使用它的方式：

> ExecuteOrDelayUntilScriptLoaded(SetWebUserData, "PeoplePicker.js");
> 
> 函数 SetWebUserData() { var pplPicker = new PeoplePicker(); // 设置选择器的人的父标签ID。pplPicker.SetParentTagId('ctl00_PlaceHolderMain_g_ec44fef5_c1a6_4ade_b7e4_2b80803724a1_ff6_1_ctl00_ctl00_UserField'); pplPicker.SetLoggedInUser(); }

但是当我加载表单时没有任何反应......我是否使用了错误的父标签 ID？我从页面的源代码中获取它...

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T15:17:35.153

这是我的做法。

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript"> 
$(window).load(function(){
var columnName = 'Manager Name';   
var searchText = RegExp("FieldName=\"" + columnName + "\"", "gi");
$("td.ms-formbody").each(function() {  
if(searchText.test($(this).html())) {  
$(this).find("div[Title='People Picker']").html(getUserName());  
return false;  
}  
});
function getUserName() { 
var wshell=new ActiveXObject("wscript.shell"); 
var userName=wshell.ExpandEnvironmentStrings("%username%");  
return userName;}   
});
</script> 
```

我的人员选择器字段名为“经理姓名”，但它是一个变量，因此您可以更改它。我使用函数 getUserName() 来设置人员选择器的值。getUserName 使用环境字符串用户名。有些人会告诉你这不是最好的使用方法，因为它可能会被“伪造”。我在一个严格控制的公司环境中。就我个人而言，我认为大多数用户甚至都不知道该怎么做。

我认为您遇到的问题是人员选择器字段需要的值不仅仅是一个字符串。我相信它正在寻找一个键值对，这意味着您需要在 SharePoint 网站中分配的用户名和 ID 号。为了解决这个问题，我使用的代码只是将用户名字符串放在 html 表单字段中。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T07:20:07.327

这是我的实现方式，在这里我将用户名作为查询字符串传递，如果没有填充当前用户。根据您的需要进行修改。

```
 var Dname = queryString('DName'); 
        if(Dname!= null)
        {       
            var pp = getPickerInputElement('Employee');
            if(pp != null)
            {
                pp.innerHTML =Dname;
                document.getElementById('Emp').innerHTML=Dname;
            }
        }
        else
        {   
            fillPeoplePickerWithCurrentUser('Employee');
        }   
function fillPeoplePickerWithCurrentUser(pickerName)
    {
        var currentUser =getUserData();
    }
function getUserData() 
    {   
        context = new SP.ClientContext.get_current();             
        web = context.get_web(); 
        currentUser = web.get_currentUser(); 

        currentUser.retrieve(); 
        context.load(web);
        context.executeQueryAsync(onSuccessMethod, onFaiureMethodl);
    } 
```

# .net - 实体框架 1:0-1 关系使子实体多元化

> ID：12174182
> 
> 赞同：2
> 
> 时间：2012-08-29T08:56:24.287
> 
> 标签：.net, entity-framework

我注意到，当您在 EF 中创建 1:1 关系时（我使用的是 4.3），子实体是复数形式（或复数形式），即使最大相关行数为 1。

我发现一个帖子暗示了这一点，但没有说明为什么会这样，或者是否有固定版本或解决方法。

有人知道更多吗？

# gwt - 是否有任何自定义 GWT 皮肤/主题可用？

> ID：12174184
> 
> 赞同：1
> 
> 时间：2012-08-29T08:56:24.727
> 
> 标签：gwt

在标准 GWT 中，提供了 3 个主题（标准、镀铬、深色）。我想知道，如果有像这 3 个这样的可下载主题，我无法在 Google 上搜索任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:23:54.563

有一个 GWT 主题生成器：http: [//gwt-theme-generator.appspot.com/](http://gwt-theme-generator.appspot.com/)

# javascript - 如何验证文本区域不允许单词之间有空格

> ID：12174187
> 
> 赞同：2
> 
> 时间：2012-08-29T08:56:25.180
> 
> 标签：javascript, jquery

嗨，有什么方法可以限制两个单词之间没有空格的文本区域

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T09:50:03.080

我希望这个简单的 jquery 可以帮助

html

```
<textarea></textarea>
<span id="adf" style="display:none; color:red">No space allowed and use comma to seperate</span> 
```

jQuery

```
$('textarea').keypress(function(e) {
    if (e.which === 32) {
        $('#adf').css("display", "block");
        return false;
    }
    setTimeout(function() {
        $('#adf').slideUp('slow');
    }, 5000);
}); 
```

这是小提琴[链接](http://jsfiddle.net/H688j/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:24:40.207

我在这里找到了一个很好的例子：http: [//www.w3schools.com/jsref/tryit.asp?filename=tryjsref_onkeydown](http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_onkeydown)

如果键不合适，您需要处理 keydown 事件并返回 false。根据您的情况，可以使用以下代码：

```
<input type="text" value="QQ" onkeydown="return keydownHandler(event)"/> 
```

JS部分将是

```
function keydownHandler(event)
{
    var keynum;
    var keychar;
    var numcheck;

    if(window.event) // IE8 and earlier
    {
        keynum = event.keyCode;
    }
    else if(event.which) // IE9/Firefox/Chrome/Opera/Safari
    {
        keynum = event.which;
    }

    keychar = String.fromCharCode(keynum);
    numcheck = / /;
    return !numcheck.test(keychar);             
} 
```

# javascript - 使用 document.getElementById 获取 li title="info"

> ID：12174188
> 
> 赞同：0
> 
> 时间：2012-08-29T08:56:32.060
> 
> 标签：javascript, jira

我有`<div>..`如下：

```
<div id="customfield_16332_nfeed_component"> 
  <ul class="text token-input-list-facebook"> 
    <li title="Firm Name(Summ.)" class="token-input-token-facebook"> 
      <p>Firm Name(Details)...</p> 
      <span class="token-input-delete-token-facebook">×</span> 
    </li> 
    <li class="token-input-input-token-facebook"></li> 
  </ul> 
  <input type="text" style="border: 0px; padding: 0px; display: none; "/> 
</div> 
```

我的目标是使用 JavaScript实现`Firm Name(Summ.)`这一目标。`div`我的 JavaScript 代码：

```
var summ = document.getElementById("summary"); 
summ.onfocus=function(){ 
    var adsoyad= document.getElementById('customfield_16332_nfeed_component').getElementsByTagName('li'); 
    document.getElementById("summary").value = adsoyad; 
} 
```

但是，我没有配合

```
document.getElementById('customfield_16332_nfeed_component').getElementsByTagName('li') 
```

我该如何使用`document.getElementById`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:03:18.653

从第一个获取标题`li`

```
var adsoyad= document.getElementById('customfield_16332_nfeed_component');
adsoyad = adsoyad.getElementsByTagName('li');
adsoyad = adsoyad[0].getAttribute("title"); 
```

# android - NFC 如何监听 NdfMessage 推送完成的行为

> ID：12174194
> 
> 赞同：0
> 
> 时间：2012-08-29T08:56:49.397
> 
> 标签：android, nfc

我正在使用 API 级别 10 开发带有 NFC 的应用程序

我想听 NdfMessage 何时推送完成

但接口 NfcAdapter.OnNdefPushCompleteCallback 适用于 API 级别 14

那么它是否有另一种方法来监听推送 NdfMessage 的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T21:22:04.877

不，很遗憾，API 10 中无法检查 NDEF 传输是否成功。

# content-management-system - Yii 网格列值

> ID：12174195
> 
> 赞同：0
> 
> 时间：2012-08-29T08:56:50.017
> 
> 标签：content-management-system, yii

我有 2 个模型：1 个用于网站，1 个用于产品；

产品知道他属于网站x；在表产品中，我有 website_id

在产品中我有关系：

```
public function relations()
{
    // NOTE: you may need to adjust the relation name and the related
    // class name for the relations automatically generated below.
    return array(
                'relation_website' => array(self::BELONGS_TO,'Website','website_id'),
    );
} 
```

在产品模型的视图管理员中，我有：

```
$dataProvider = $model->search();
$dataProvider->pagination->pageSize = 100;

$this->widget('zii.widgets.grid.CGridView', array(
    'id' => 'product-grid',
    'dataProvider' => $dataProvider,
    'filter' => $model,
    'columns' => array(
        'id',
        'product',
        'price',
        'currency',
        array(
        'name' => 'website_id',
        'value' => $model->relation_website->website_id,
        ),
        /*
          'website_id',
          'url_id',
         */
        array(
            'class' => 'CButtonColumn',
            'template' => '{update}{delete}',
        ),
    ),
)); 
```

我现在有这个结果：

1 笔记本电脑 Acer Aspire V3-571G-73614G50Maii cu 处理器 Intel® CoreTM i7-3610QM 2.30GHz，Ivy Bridge，4GB，500GB，nVidia GeForce GT 640M 2GB，Linpus，黑色 3099.99 RON 1 <- 这里的值

而不是最后一个我想打印[http://www.eshop.com/](http://www.eshop.com/)，存储在网站表中的值，属于网站模型的表

1 笔记本电脑 Acer Aspire V3-571G-73614G50Maii cu 处理器 Intel® CoreTM i7-3610QM 2.30GHz，Ivy Bridge，4GB，500GB，nVidia GeForce GT 640M 2GB，Linpus，黑色 3099.99 RON [http://www.domain.com/](http://www.domain.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:11:01.273

看起来你需要类似的东西：

```
...
'value' => '$data->relation_website->name'
... 
```

[博客教程](http://www.yiiframework.com/doc/blog/1.1/en/post.admin#listing-posts-in-tabular-view)中有一个类似的示例，每个 Yii 开发人员都必须阅读

# blackberry - 如何更改 BlackBerry 中的文件/目录权限？

> ID：12174198
> 
> 赞同：0
> 
> 时间：2012-08-29T08:57:13.977
> 
> 标签：blackberry

是否可以将SD卡中现有目录/文件的权限设置为只读，这意味着它不能被用户删除？

[FileConnection](http://www.blackberry.com/developers/docs/5.0.0api/javax/microedition/io/file/FileConnection.html)有 setWritable()。我尝试使用它，但仍然没有运气。

```
FileConnection fconn = null;

try {
fconn = (FileConnection) Connector.open("file:///SDCard/BlackBerry/documents/TestDirectory/", Connector.READ_WRITE);

if (!fconn.exists()) fconn.mkdir();

// copyFile is taken from http://supportforums.blackberry.com/t5/Java-Development/copy-file/td-p/265877
copyFile("file:///SDCard/BlackBerry/documents/test.pdf","file:///SDCard/BlackBerry/documents/TestDirectory/test.pdf");
copyFile("file:///SDCard/BlackBerry/documents/data1.txt","file:///SDCard/BlackBerry/documents/TestDirectory/data1.txt");
copyFile("file:///SDCard/BlackBerry/music/gaudeamus.mp3","file:///SDCard/BlackBerry/documents/TestDirectory/gaudeamus.mp3");
fconn = (FileConnection) Connector.open("file:///SDCard/BlackBerry/documents/TestDirectory/", Connector.READ);              
fconn.setWriteable(false);
fconn.close();
}
catch (Exception e){

}
finally {
try {
    if (fconn != null) {
        fconn.close();
        fconn = null;
    }
} 
catch (Exception e) {
}
} 
```

# android - 有人可以帮助我使用 Android JSON 从 URL Web 服务器检索数据

> ID：12174202
> 
> 赞同：0
> 
> 时间：2012-08-29T08:57:24.870
> 
> 标签：android

我跟着[这个教程](https://www.thaicreate.com/mobile/android-json-from-url.html)。

这是我的最终代码`MainActivity.java`：

```
@SuppressLint({ "NewApi", "NewApi" })
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    // Permission StrictMode
    if (android.os.Build.VERSION.SDK_INT > 9) {
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy);
    }

    // listView1
    final ListView lisView1 = (ListView)findViewById(R.id.listView1);   

    /** JSON return
     *  [{"MemberID":"1","Name":"Weerachai","Tel":"0819876107"},
     * {"MemberID":"2","Name":"Win","Tel":"021978032"},
     * {"MemberID":"3","Name":"Eak","Tel":"0876543210"}]
     */

    String url = "http://10.0.2.2/Json/getJSON2.php";

    try {

        JSONArray data = new JSONArray(getJSONUrl(url));

        final ArrayList<HashMap<String, String>> MyArrList = new ArrayList<HashMap<String, String>>();
        HashMap<String, String> map;

        for(int i = 0; i < data.length(); i++){
            JSONObject c = data.getJSONObject(i);

            map = new HashMap<String, String>();
            map.put("MemberID", c.getString("MemberID"));
            map.put("Name", c.getString("Name"));
            map.put("Tel", c.getString("Tel"));
            MyArrList.add(map);

        }

        SimpleAdapter sAdap;
        sAdap = new SimpleAdapter(MainActivity.this, MyArrList, R.layout.activity_column,
                new String[] {"MemberID", "Name", "Tel"}, new int[] {R.id.ColMemberID, R.id.ColName, R.id.ColTel});      
        lisView1.setAdapter(sAdap);

        final AlertDialog.Builder viewDetail = new AlertDialog.Builder(this);
        // OnClick Item
        lisView1.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> myAdapter, View myView,
                    int position, long mylng) {

                String sMemberID = MyArrList.get(position).get("MemberID")
                        .toString();
                String sName = MyArrList.get(position).get("Name")
                        .toString();
                String sTel = MyArrList.get(position).get("Tel")
                        .toString();

                //String sMemberID = ((TextView) myView.findViewById(R.id.ColMemberID)).getText().toString();
                // String sName = ((TextView) myView.findViewById(R.id.ColName)).getText().toString();
                // String sTel = ((TextView) myView.findViewById(R.id.ColTel)).getText().toString();

                viewDetail.setIcon(android.R.drawable.btn_star_big_on);
                viewDetail.setTitle("Member Detail");
                viewDetail.setMessage("MemberID : " + sMemberID + "\n"
                        + "Name : " + sName + "\n" + "Tel : " + sTel);
                viewDetail.setPositiveButton("OK",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int which) {
                                // TODO Auto-generated method stub
                                dialog.dismiss();
                            }
                        });
                viewDetail.show();

            }
        });

    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

public String getJSONUrl(String url) {
    StringBuilder str = new StringBuilder();
    HttpClient client = new DefaultHttpClient();
    HttpGet httpGet = new HttpGet(url);
    try {
        HttpResponse response = client.execute(httpGet);
        StatusLine statusLine = response.getStatusLine();
        int statusCode = statusLine.getStatusCode();
        if (statusCode == 200) { // Download OK
            HttpEntity entity = response.getEntity();
            InputStream content = entity.getContent();
            BufferedReader reader = new BufferedReader(new InputStreamReader(content));
            String line;
            while ((line = reader.readLine()) != null) {
                str.append(line);
            }
        } else {
            Log.e("Log", "Failed to download result..");
        }
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return str.toString();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

然后当我运行程序进行测试时，我的 logcat 发现了这个警告：

[![](../Images/8e79a752621b2de4737b69214735c99b.png)](http://s7.postimage.org/v6261fa63/warn.jpg)

模拟器上的结果是列表视图的空白屏幕。

我仍然不知道如何解决它，有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T07:59:11.910

我认为响应 JSON 格式错误。这就是你得到异常的原因。在将其转换为 JSON 之前，请检查响应字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:50:30.583

您可以在调试器中运行它并检查数据的值，但很可能这就是发生错误的地方，所以也许在这一行：return str.toString(); 在 getJSONUrl 方法中，您可以检查 str 的值。

您的网络服务器发现的任何错误都将作为错误消息包含在内，这可能就是您的代码令人窒息的原因。

# javascript - 如何将此语法转换为 CoffeeScript（js2coffee 不起作用）？

> ID：12174208
> 
> 赞同：2
> 
> 时间：2012-08-29T08:57:54.797
> 
> 标签：javascript, coffeescript

基本上我需要将以下一段 JavaScript 翻译成 CoffeeScript。

```
location.href = "javascript:(" + function() {
  window.onbeforeunload = function() {
    notifyBackground(collectData());
    return undefined;
  };
} + "){}"; 
```

返回“未定义”很重要，因为如果我删除它，浏览器会要求用户确认他们想要离开页面。

你可能想知道我在做什么。基本上，它是[用于 Firefox 扩展开发的定位黑客](http://goo.gl/D7DbT)。

我尝试过执行以下操作：

```
location.href = "javascript:(" + ->
  window.onbeforeunload = ->
    notifyBackground(collectData())
    return undefined
+ ")()" 
```

但这变成了：

```
location.href = "javascript:(" + function() {
  return window.onbeforeunload = function(e) {
    notifyBackground(collectData());
    return void 0;
  };
};
return +")()"; 
```

使用[js2coffee.org](http://js2coffee.org)给了我这个：

```
location.href = "javascript:(" + ->
  window.onbeforeunload = ->
    notifyBackground collectData()
    "undefined"
 + "){}" 
```

如果我通过 CoffeeScript 运行它，我会得到这个 JS 输出（这是错误的）。

```
location.href = "javascript:(" + function() {
  return window.onbeforeunload = function() {
    notifyBackground(collectData());
    return "undefined";
  };
};
return +"){}"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T09:37:53.290

这足够接近吗？

```
location.href = "javascript:(#{-> 
  window.onbeforeunload = -> 
    notifyBackground(collectData())
    `undefined`
  return
}){}" 
```

编译为：

```
location.href = "javascript:(" + (function() {
  window.onbeforeunload = function() {
    notifyBackground(collectData());
    return undefined;
  };
}) + "){}"; 
```

注意 undefined 周围的反引号以避免`void 0`, 以防万一有所不同（我不确定它是否有效？）

## 编辑

在 Chrome 控制台`undefined == void 0`中`true`，所以也许

```
`undefined` 
```

可能只是：

```
undefined 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T08:59:54.710

Try [this](http://js2coffee.org/) site [http://js2coffee.org/](http://js2coffee.org/) its a js to coffee (and backwards) converter.

# asp.net - type="hidden" textinput controls are being shown / IIS7, MS Server 2008 R2 is the configuration

> ID：12174217
> 
> 赞同：0
> 
> 时间：2012-08-29T08:58:26.443
> 
> 标签：asp.net

Please help me with this issue, `type="hidden"` textinput controls are being shown.

Environment: IIS7, Windows Server 2008 R2

It works fine on Windows Server 2003, Win7 Ultimate, please guide me, if you can think of anything which can cause this problem,

Control code:

```
 <asp:TextBox ID="SopFunctionIDTextBox0" runat="server" type="hidden" 
                        Text="Do not show"
                        value='<%# Convert.ToInt32(Request.QueryString("SopFunctionID")) %>' /> 
```

When it is rendering it is showing the following in the source code:

Rendered from the problem server:

```
 <input name="ListView1$ctrl1$SopFunctionIDTextBox0" type="text" id="ListView1_ctrl1_SopFunctionIDTextBox0" type="hidden" value="101" /> 
```

For some reason it is adding `type="text"`

Rendered from working server:

```
<input name="ListView1$ctrl1$SopFunctionIDTextBox0" id="ListView1_ctrl1_SopFunctionIDTextBox0"   type="hidden" value="101" /> 
```

Thanks in advance

BSS

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T08:59:27.153

You should use an `asp:HiddenField` if that's what you want.

# android - 无法覆盖“活动”选项卡中的 showDialog

> ID：12174225
> 
> 赞同：1
> 
> 时间：2012-08-29T08:59:00.100
> 
> 标签：android, overriding

试图将我的应用程序从 android 2.2 (API 8) 降级到 android 2.1 (API7)，我遇到了一些对话框问题。基于[这个线程](https://stackoverflow.com/a/6259798/461212)，我试图捕捉这些异常但不能覆盖 showDialog 方法。

我根据这个对类似问题的[回答将 Java 编译器从 1.5 转换为 1.6，但没有任何变化，Eclipse 仍然返回：](https://stackoverflow.com/a/5776183/461212)

> 无法从 Activity 覆盖 final 方法

```
public class MyActivity extends Activity implements
        SeekBar.OnSeekBarChangeListener {

// ... some stuffs

    @Override // here is the issue
    public void showDialog(int dialogId) {
        try {
            super.showDialog(dialogId);
        } catch (IllegalArgumentException e) {
            Log.e(ACTIVITY_TAG, "Error dialog");
        }
    }
    @Override
    protected Dialog onCreateDialog(int id) {

        switch (id) {
        case DIALOG_ALERT:
            // Create out AlertDialog
            Builder builder = new AlertDialog.Builder(this);
            builder.setMessage(msg);
            builder.setCancelable(false);
            builder.setPositiveButton(GOTO_BOOK, new OkOnClickListener());
            builder.setNegativeButton(STAY_HERE, new CancelOnClickListener());
            AlertDialog dialog = builder.create();
            dialog.show();
            break;
        case DIALOG_ONCREATE:
            // Create out AlertDialog during the "onCreate" method (only "Ok"
            // button)
            Builder builder2 = new AlertDialog.Builder(getParent());
            builder2.setMessage(msg);
            builder2.setCancelable(false);
            builder2.setPositiveButton(GO_BACK, new OkOnClickListener());

            AlertDialog dialog2 = builder2.create();
            dialog2.show();
            break;
        }

        return super.onCreateDialog(id);

    }

    // ... some stuffs

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:13:27.893

这是活动的**最终方法**，因此您不能覆盖 this 。如果要显示对话框，只需调用该方法。

```
showDialog(ID); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T09:15:44.827

onCreateDialog 不应该显示对话框，显示部分将由框架完成。您需要做的就是返回正确的对话框。

移除覆盖部分。您不需要解决此问题的方法。你的代码有问题

消除

```
dialog.show(); 
```

也代替这个

```
return super.onCreateDialog(id); 
```

采用

```
return dialog; 
```

# mysql - 在存储过程 MySQL 中创建动态查询

> ID：12174229
> 
> 赞同：1
> 
> 时间：2012-08-29T08:59:35.007
> 
> 标签：mysql, stored-procedures, mysql-error-1064

**我在表格中有一个表格和行，如下所示**

```
CREATE TABLE Areas(AreaName VARCHAR(255),
                    PinCode VARCHAR(255))

INSERT INTO Areas(AreaName, PinCode)
      VALUES('Teynampet', '6000018'), 
            ('Ramapuram', '6000089'),
            ('TNagar', '6000017'), 
            ('Mylapore', '6000014'), 
            ('Gopalapuram', '6000087') 
```

**我写了一个如下的 SQL 过程**

```
DROP PROCEDURE IF EXISTS mp_test;
CREATE PROCEDURE mp_test(IN pArea VARCHAR(255))
   BEGIN
      SET @Query = 'SELECT PinCode FROM Areas';

      IF pArea != ''
      THEN
         SET @City = CONCAT(' WHERE AreaName = ', pArea);
      END IF;

      SET @Query = CONCAT(@Query, @City);

 PREPARE stmt FROM @Query;
 EXECUTE stmt;
END 
```

**当我调用程序时**

```
CALL mp_test('Teynampet'); 
```

当我执行时，我没有得到想要的结果，即 600018

如何在 SP 中动态构建查询

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:25:17.557

您将`pArea`参数连接到未引用的 SQL 中。也就是说`@Query`，你准备执行的内容是：

```
SELECT PinCode FROM Areas WHERE AreaName = Teynampet 
```

由于`Teynampet`未加引号，因此将其解析为（n 个未知）SQL 标识符而不是字符串。您应该：

*   在你的 SQL 中引用它：

    ```
    SET @City  = CONCAT(' WHERE AreaName = ', QUOTE(pArea)); 
    ```

*   将其作为参数传递给准备好的语句：

    ```
    SET @City  = CONCAT(' WHERE AreaName = ?');
    SET @param = pArea; 
    ```

    进而：

    ```
    EXECUTE stmt USING @param; 
    ```

但是，为什么在这里使用准备好的语句？您的过程可以重写为简单的`SELECT`（这引发了您是否需要使用存储过程的问题）：

```
CREATE PROCEDURE mp_test(IN pArea VARCHAR(255))
  SELECT PinCode FROM Areas WHERE pArea IN (AreaName, ''); 
```

（请注意，我建议您使用`NULL`而不是空字符串`''`，在这种情况下，上述测试将是`pArea IS NULL OR pArea = AreaName`）。

# image - Drupal Node Forms - Image field: How to directly upload an image after choosing a file (no need to click upload button)

> ID：12174231
> 
> 赞同：0
> 
> 时间：2012-08-29T08:59:40.077
> 
> 标签：image, drupal-7, field

I'm trying to change the default behavior of Drupal when adding an image through image field on a content type.

When you choose an image to assign to a node, it's not directly uploaded. You also need to click "upload" to display the preview of your image, and this is not really user friendly.

How can I change this (programmatically) to make Drupal start uploading directly the image after choosing the file.

Thank you for help

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:13:47.073

你可以这样做：

```
(function ($) {
  Drupal.behaviors.autoUpload = {
    attach: function(context, settings) {
      $('.form-item input.form-submit[value=Upload]', context).hide();
      $('.form-item input.form-file', context).change(function() {
        $parent = $(this).closest('.form-item');
        setTimeout(function() {
          if(!$('.error', $parent).length) {
            $('input.form-submit[value=Upload]', $parent).mousedown();
          }
        }, 100);
      });

      $('.form-item input.form-submit[value=Transférer]', context).hide();
      $('.form-item input.form-file', context).change(function() {
        $parent = $(this).closest('.form-item');
        setTimeout(function() {
          if(!$('.error', $parent).length) {
            $('input.form-submit[value=Transférer]', $parent).mousedown();
          }
        }, 100);
      });
    }
  };
})(jQuery); 
```

此解决方案适用于英文和法文浏览器。与[AutoUpload](https://www.drupal.org/project/autoupload)模块不同，该模块仅适用于以英文配置的浏览器。注意`[value=Upload]`/`[value=Upload]`属性

我发现了一个类似的帖子：

[https://drupal.stackexchange.com/questions/31121/how-can-i-automatically-upload-images-on-file-selection-rather-than-pressing-the](https://drupal.stackexchange.com/questions/31121/how-can-i-automatically-upload-images-on-file-selection-rather-than-pressing-the)

这正是我需要的..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:04:35.597

您应该可以使用[http://drupal.org/project/imce](http://drupal.org/project/imce)来满足您的需要。

我不确定图像字段，但是当我遇到这个问题时，我决定让用户在正文中添加图像，因为它对于 durpal 来说是一个更容易的选择 - 在文本中插入图像时，它们会立即显示。

IMCE + filefield 似乎是满足您直接需求的可行选择，他们确实提到了 AJAX 支持。

# javascript - JavaScript Hashtable / Dictionary

> ID：12174232
> 
> 赞同：1
> 
> 时间：2012-08-29T08:59:41.420
> 
> 标签：javascript, ecmascript-5, jscript

Consider the following article explaining hashtables / dictionaries in JavaScript:

[Can anyone recommend a good Hashtable implementation in Javascript?](https://stackoverflow.com/questions/130543/can-anyone-recommend-a-good-hashtable-implementation-in-javascript)

Given the accepted answer, I want to be able to do this:

```
var instance = new Dictionary();
instance['key1'] = 'Foo';
instance['key2'] = 'Bar';
instance['key3'] = 123;
instance['key4'] = true; 
```

but I want the key/value pairs to point to an object within the Dictionary internally. consider the following code structure

```
var Dictionary = function() {
    var dictionary; // <-- key value pairs should point to this, not to the Dictionary function;

    this.setValue = function(key, value) {
        dictionary[key] = value;
    }

    this.getValue = function() {
        return dictionary[key];
    }
} 
```

Is this possible?

**EDIT:**

One way I thought of designing the Dictionary object was like so:

```
var Dictionary = function() {
    this.setValue = function(key, value) {
        this[key] = value;  
    }

    this.getValue = function(key) {
        return this[key];
    }
} 
```

The problems with this are:

1.  I can assign like so instance['key1'] = 'foo'; and read like this instance.key1; I don't want this!!

2.  I can assign this instance['getValue'] = null; and then cannot get a value back because the function is now null!!

Neither of the above should occurr, hence the reason that the set and get functionality should apply to the internal object, not to the dictionary itself.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:27:58.730

```
function Dictionary()
{
    this.store = {};    
    this.setValue = function(key, value) {
        store[key] = value;
    }
    this.getValue = function(key)
    {
        return store[key];
    }
    return this;
}
//Testing
var dict = Dictionary();
dict.setValue('key','value');
alert(dict.getValue('key'));//displays "value"
alert(dict.getValue('unassignedKey'));//displays "undefined"
alert(dict['key']);//displays "undefined" (an unfortunate lack of syntactic convenience, we have to go through getValue).
alert(dict.key);//displays "undefined"
var dict2 = Dictionary();
dict2.setValue('key2', 'value2');
alert(dict2.getValue('key'));//displays "undefined"
alert(dict2.getValue('key2'));//displays "value2" 
```

# mysql - delete same data in one table with syntax error(mysql)

> ID：12174237
> 
> 赞同：1
> 
> 时间：2012-08-29T08:59:54.397
> 
> 标签：mysql, sql, rdbms

There are same url in my table. Each row can be identified by id. I want to delete same data in `url` fields. I am using mysql. I am trying `select` one(identified by the maximum id) of them as a new tempary table as `t2`, and then compare `url` between the original table and the tempary table in my `where` clause. There is syntax error in my statements, but I am not sure where it is. can u help me? thx guys.

The statements as follow:

```
delete from t1, 
(select url, max(id) as id
        from tjob_webpage as t1 
        group by url
) as t2 
where t1.url = t2.url 
      t1.id < t2.id; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:03:48.773

尝试这个，

```
delete t1
from t1 INNER JOIN
(select url, max(id)  maxID
        from tjob_webpage
        group by url
) as t2 
where t1.url = t2.url 
      t1.id < t2.maxID; 
```

# android - 如何在点击地图上的标记时显示信息窗口？

> ID：12174245
> 
> 赞同：0
> 
> 时间：2012-08-29T09:00:13.757
> 
> 标签：android, google-maps

当我搜索它时，我发现这些链接是解决方案：

[http://android-codes-examples.blogspot.in/2011/04/google-map-example-in-android-with-info.html](http://android-codes-examples.blogspot.in/2011/04/google-map-example-in-android-with-info.html)

和

[https://github.com/jgilfelt/android-mapviewballoons](https://github.com/jgilfelt/android-mapviewballoons)

但我发现两者都很复杂。

我想知道是否有任何简单的方法可以做到这一点。就像膨胀布局并将其显示为仅在单击的标记上的弹出窗口。

现在，当用户点击标记时，我只使用 Toast 来显示信息。但主要问题是我希望这个 toast（或其他布局）出现在被点击的标记上方，而不是在默认的 toast 位置。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T09:32:27.280

试试这个，根据你的要求修改：

```
@SuppressWarnings({ "deprecation" })
    @Override
    protected boolean onTap(int index)
    {
        CustomView customView=new CustomView(MyMap.this);
        absMap.removeAllViews();
        absMap.addView(customView);
        customView.setBackgroundResource(R.drawable.maplocation1);
        customView.setVisibility(View.INVISIBLE);

        customView.removeAllViews();

          absMap.invalidate();
          customView.bringToFront();
          customView.setVisibility(View.VISIBLE);
          TextView tv2=new TextView(MyMap.this);
        //  tv2.setText(overlayItemList.get(index).getTitle());
          tv2.setWidth(170);
          tv2.setSingleLine(true);
          tv2.setEllipsize(TruncateAt.END);
          tv2.setSingleLine(true);
          tv2.setSingleLine();

          tv2.setTextColor(Color.WHITE);
          tv2.setTextSize(14);
          tv2.setTypeface(Typeface.DEFAULT_BOLD);

          TextView tv1=new TextView(MyMap.this);
          tv1.setSingleLine();
          tv1.setWidth(170);
          tv1.setSingleLine(true);
          tv1.setEllipsize(TruncateAt.END);
          tv1.setSingleLine(true);
          tv2.setText(overlayItemList.get(index).getSnippet());

          tv1.setTextColor(Color.WHITE);
          tv1.setTextSize(12);
          tv1.setTypeface(Typeface.DEFAULT_BOLD);
          customView.setTag(overlayItemList.get(index).getTitle());
          customView.addView(tv2, new AbsoluteLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT,10,5));
          customView.addView(tv1, new AbsoluteLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT,10,25));
          customView.setLayoutParams(new MapView.LayoutParams( 250, 100, overlayItemList.get(index).getPoint(),-125,-137, MapView.LayoutParams.MODE_MAP|MapView.LayoutParams.TOP_LEFT));
          customView.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) 
            {
            }
        });

    } 
```

# c# - 存储单个/组整数值

> ID：12174246
> 
> 赞同：-1
> 
> 时间：2012-08-29T09:00:14.617
> 
> 标签：c#

我正在研究一个不寻常的要求，其中有一个整数参数 x，它可以采用单个值或一组值。如果参数取一组值，我只存储最大值和最小值就足够了。通常的 C# 思维使我有四个变量，即 x、minX、maxX 和布尔变量（以了解变量是采用单个值还是一组值），我有四个这样的参数，这导致类变量膨胀（总共 16变量）。

C# 中是否有任何构造可以帮助我在上述约束下进行有效存储？我想不出可以为空的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:03:41.527

你可以创建自己的[结构](http://msdn.microsoft.com/en-us/library/ah19swz4%28v=vs.71%29.aspx)

或查看[System.Tuple](http://msdn.microsoft.com/en-us/library/system.tuple.aspx) - 一个内置的通用“容器”类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:05:58.147

`min`和`max`。

如果只有一个值，那么`min`== `max`。

对于这种情况，您甚至可以向调用者提供一些糖：

```
public SomeType MyMethod(int minA, int maxA, int minB, int maxB, int minC, int maxC, int minD, int maxD)
{
  //real work here.
}
public SomeType MyMethod(int a, int b, int c, int d)
{
  return MyMethod(a, a, b, b, c, c, d, d);
} 
```

# android - Android ndk 8b 无法加载库

> ID：12174247
> 
> 赞同：6
> 
> 时间：2012-08-29T09:00:18.173
> 
> 标签：android, android-ndk

升级到 ndk 8b 我收到了一些崩溃报告（其中大多数是带有 Android 4.03 的 Galaxy SII）

```
java.lang.UnsatisfiedLinkError: Cannot load library: reloc_library[1286]: 1836 cannot locate '__gnu_thumb1_case_uqi'...
at java.lang.Runtime.loadLibrary(Runtime.java:370)
at java.lang.System.loadLibrary(System.java:535)
at com.iuculano.fplayer.SDLActivity.void onCreate(android.os.Bundle)(SourceFile:324)
at android.app.Activity.performCreate(Activity.java:4465)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1932)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1993)
at android.app.ActivityThread.access$600(ActivityThread.java:127)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4507)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
at dalvik.system.NativeStart.main(Native Method) 
```

异常是由一个简单的`System.loadLibrary("main");`

这是什么意思？`cannot locate '__gnu_thumb1_case_uqi'`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T17:09:29.567

这`__gnu_thumb1_case_uqi`是一个在密集的交换表上进行索引跳转的助手；快速实现切换。你有两个选择：避免它或链接它。

如果您增加优化级别（通过使用`-O3`），您可能不需要此符号。此外，更改 CPU 和使用`thumb2`指令可能会有所帮助。使用选项编译`-ffreestanding`也可以避免这个符号。如果您可以控制 switch 语句，则可以将其替换为函数指针数组。

该例程在*libgcc*中。您可以静态链接*libgcc*。在 Android SDK/编译器的某个地方，必须有一个`libgcc.a`. Link with `libgcc.a`, using `-L`and `-l`or use`-static-libgcc`链接器选项来获取代码（参见[http://gcc.gnu.org/onlinedocs/gcc/Link-Options.html](http://gcc.gnu.org/onlinedocs/gcc/Link-Options.html)）。

**编辑：** 如果你没有编译任何东西，那么你可以`libgcc.so`在你的系统上找到。对于 Android 设备，它可能在`/lib`或某个地方很奇怪。`/usr/lib`将 所在的目录添加`libgcc.so`到环境变量**`LD_LIBRARY_PATH`**中也可以解决问题。不幸的是，三星发布了不兼容的二进制文件，如果你不编译自己的代码，你就无法解决这个问题。正确的`libgcc.so`可能在`/usr/lib/thumb`多库发行版之类的东西中。我不太了解 Davlik 的东西，但 Android JVM 在运行时可能不会指向正确的库集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T08:22:25.807

你在为armv7编译吗？如果不是，请尝试为 armv7 编译。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T20:56:25.687

[为多种架构生成优化的 NDK 代码？](https://stackoverflow.com/questions/5089783/producing-optimised-ndk-code-for-multiple-architectures)

在上述链接中接受的答案中阅读有关“手臂”与“拇指”的信息。

然后，删除您为 thumb 构建的配置说明，并验证您正在为 arm 构建...

或者...

我会做出一个疯狂的猜测......它是您在“Android.mk”的链接器语句中的库顺序

尝试 ndk 的谷歌论坛...搜索“找不到符号”...

真的绝望吗？

[请参阅此处](http://web.cs.swarthmore.edu/~newhall/unixhelp/debuggingtips_C++.html)的“运行时错误”部分

# sql - 使用百分比数据聚合查询

> ID：12174252
> 
> 赞同：0
> 
> 时间：2012-08-29T09:00:29.827
> 
> 标签：sql, ms-access-2010, aggregation

我有一个查询，可以计算许多公司及其资产的石油生产效率。目前的查询是资产级别的，我需要重新编写它以聚合到公司级别。

这是代码：

```
SELECT qb1.CompanyName, qb1.AssetName, qb1.Year,
       (((qb1.DefaultOil*1000000)/qb2.MPPOil)*100) AS PEOIL
FROM PE_Field_OIL_GAS AS qb1 
INNER JOIN PE_Field_MPPOilRevised AS qb2 
ON qb1.Assetname=qb2.AssetName; 
```

它基于以下计算：

**((OIL × 1000000) ÷ MPP 油修正) × 100**

其中 MMPOil 是另一个字段中的计算列。

下面是聚合计算如何工作的示例：

**((((assetA OIL × 1000000) + (assetA OIL × 1000000)) ÷ (assetA MPP Oil 修改 + AssetB MPP Oil 修改)) × 100**

请注意，此查询输出一个**百分比**，因此它不仅仅是对所有资产级别数据求和的情况！任何帮助将非常感激 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T09:07:48.520

您可以将双方相加，然后计算百分比，按公司和年份分组。如果您不需要年份，请将其从选择列表和按列表分组中删除。

```
SELECT qb1.CompanyName, qb1.Year,
       (((sum(qb1.DefaultOil)*1000000)/sum(qb2.MPPOil))*100) AS PEOIL
FROM PE_Field_OIL_GAS AS qb1 
INNER JOIN PE_Field_MPPOilRevised AS qb2 
ON qb1.Assetname=qb2.AssetName
GROUP BY qb1.CompanyName, qb1.Year; 
```

# javascript - 在游戏中添加新单词

> ID：12174254
> 
> 赞同：5
> 
> 时间：2012-08-29T09:00:34.057
> 
> 标签：javascript, jquery

在我的拼写游戏中，新单词会一直添加，所以总是有新的单词可供选择。

添加到游戏中的每个单词都有一个图像的“src”和一个声音，会提示用户在游戏过程中正确拼写。

当我完成游戏的制作后，添加新词的工作就交给了我的一位同事。这意味着他必须为图片和音频以及单词添加链接。

由于他们对这类事情知之甚少，我想让他在添加单词时尽可能轻松地添加图像和声音，我想创建一个默认路径到一个共享位置，他将在其中存储所有这些东西。

这样他就可以只为单词输入“bug”，为图片输入“.bug-pic”，为声音输入“.bug-audio”，这样他就可以很容易地添加到 HTML 中。

**这是最好的方法吗？**

**他们输入这些东西的最简单方法是什么？**

这是我目前存储单词，声音和图像的方式...

```
<ul style="display:none;" id="wordlist">

    <li data-word="mum" data-audio="file:///C:/smilburn/AudioClips/mum.wav" data-pic="http://www.clker.com/cliparts/5/e/7/f/1195445022768793934Gerald_G_Lady_Face_Cartoon_1.svg.med.png"></li>

    <li data-word="cat" data-audio="file:///C:/smilburn/AudioClips/cat.wav" data-pic="http://www.clker.com/cliparts/c/9/9/5/119543969236915703Gerald_G_Cartoon_Cat_Face.svg.med.png"></li>

    <li data-word="dog" data-audio="file:///C:/smilburn/AudioClips/dog.wav" data-pic="http://www.clker.com/cliparts/e/9/4/1/1195440435939167766Gerald_G_Dog_Face_Cartoon_-_World_Label_1.svg.med.png"></li>

    <li data-word="bug" data-audio="file:///C:/smilburn/AudioClips/bug.wav" data-pic="http://www.clker.com/cliparts/4/b/4/2/1216180545881311858laurent_scarabe.svg.med.png"></li>

    <li data-word="rat" data-audio="file:///C:/smilburn/AudioClips/rat.wav" data-pic="http://www.clker.com/cliparts/C/j/X/e/k/D/mouse-md.png"></li>

    <li data-word="dad" data-audio="file:///C:/smilburn/AudioClips/dad.wav" data-pic="http://www.clker.com/cliparts/H/I/n/C/p/Z/bald-man-face-with-a-mustache-md.png"></li>

  </ul> 
```

**谢谢**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T10:33:28.747

我建议您简单地存储这样的信息：

```
<li data-word="mum" data-audio="mum.wav" data-pic="/5/e/7/f/1195445022768793934Gerald_G_Lady_Face_Cartoon_1.svg.med.png"></li> 
```

在阅读完你的 jsFiddle 之后，我建议你创建一个这样的 playAudio 函数：

```
function playAudioFile (audioFileName) {
    audioFileName = "http://www.wav-sounds.com/cartoon/" + audioFile;
    $("#mysoundclip").attr('src', audioFileName);
} 
```

之后你可以替换这个：

```
$("#mysoundclip").attr('src', listOfWords[rndWord].audio);
audio.play(); 
```

通过这样的事情：

```
playAudioFile(listOfWords[rndWord].audio); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T13:04:51.297

我将在这里打破你的模式，并建议一些从长远来看对我来说足够*简单*的东西（至少，比你这里的更简单）。

使用 HTML 标记来存储单词的问题在于：

1.  它是 HTML --- 浏览器将不得不解析它，*然后*不显示它，因为你已经得到了`<ul>`元素`display:none`（这只是一种浪费的努力），并且
2.  XML（或 HTML，无论哪种）相当臃肿，因为需要大量文本来表示信息。如果您要*玩拼写游戏*，我假设您将拥有数百或数千个这样的单词，并且您的单词的 HTML 表示**将**是大量带宽膨胀的垃圾。

所以！这是我的建议：

```
// create an external JS file to store your words,
// let's say, [words.js].

// then let's just store your words in an array
var words = [
    { word : "foo" , audio : "file:///C:/smilburn/AudioClips/foo.wav", pic : "http://www.clker.com/cliparts/5/e/7/f/1195445022768793934Gerald_G_Lady_Face_Cartoon_1.svg.med.png" },
    { word : "bar" , audio : "file:///C:/smilburn/AudioClips/bar.wav", pic : "http://www.clker.com/cliparts/5/e/7/f/1195445022768793934Gerald_G_Lady_Face_Cartoon_1.svg.med.png" },
    { word : "mum" , audio : "file:///C:/smilburn/AudioClips/mum.wav", pic : "http://www.clker.com/cliparts/5/e/7/f/1195445022768793934Gerald_G_Lady_Face_Cartoon_1.svg.med.png" }
]; 
```

它只是一个包含 Javascript 对象集合的普通 Javascript 数组。每个对象具有三个属性`word`：`audio`和`pic`。

将该文件加载到您的页面中，并从中读取一个脚本。遍历、使用和应用到您的页面会更加*容易*和*快捷。*读取和读取 JS 对象通常比从 DOM 解析和读取相同信息要快。

此外，标记更紧凑，并且您不会 [滥用] HTML DOM 来做（可以说）不应该做的事情。

第三，它比 HTML 标记更有条理和更清晰，我想你的同事更新和适应它会更容易。

最后，这种方法的一个好处是将代码写入模块非常容易，因此您可以更轻松地使用扩展/单词包之类的东西：

```
// something like this can work:

// [words.js]
var words = [
    // some base words
    { word : "foo", audio : "foo.wmv", pic : "foo.pic" }
    // ...
];

// [words.animals.js]
(function () {
    // do not do anything if the base [words.js] isn't loaded
    if (!words) { return; }

    // extend the base words
    words = words.concat([
        // new animal words!
        { word : "dog", audio : "bark.wmv", pic : "brian.jpg" }
        // ...
    ]);

})(); 
```

想法是，您可以将`words.js`文件加载到游戏中，它会完美运行。但是，如果用户还想添加新词（例如，动物的词），那么他们（您）可以加载辅助文件来增加您的基本词列表。

*使用 JS 对象比使用 HTML 标记更*容易做到这一点。

### 编辑

如果您**确实肯定最终答案必须**使用 HTML，我建议您将`data-word`属性从您的属性中删除`<li>`，而只使用它的文本值。

```
<li data-audio="dog.wmv" data-pic="dog.jpg">dog</li> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T09:07:59.097

您必须使用`attr()`将图像存储在默认位置。[在这里](http://api.jquery.com/attr/)，他们解释了存储图像的默认位置。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-04T20:28:21.573

您可能还需要考虑您将拥有哪些服务器端技术。

如果您必须通过 html 添加选项，那么您可以在页面的该部分执行的操作是让服务器动态生成 html 元素。

```
'ASP Classic example

<%
set fs = server.createObject("scripting.filesystem")
set folder = fs.getFolder("your path here")
for each file in folder.getFiles("*.wav")
 strWord = left(file.name, length(file.name)-4)
%><li data-word="cat"
    data-audio="path/to/folder/<%=strWord%>.wav"
    data-pic="path/to/folder/<%=strWord%>.png"></li>
<%
next
%> 
```

这只是一个 asp 经典示例，我相信您会发现其他特定于您使用的平台的示例。

但基本上......如果你想让它成为一个即插即用的操作，你必须在服务器上告诉输出页面什么是可用的。否则你可能会像以前一样做 html。技术并不总是会取代普通的数据输入。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-07T03:30:59.417

好吧，在我看来，您可以为您的同事使用数据库、服务器端脚本和表单。创建一个表单，他将使用该表单将信息上传到服务器并将路径存储到数据库中。

表格：

```
<form method="POST" action="myscript.php" enctype="multipart/form-data">
    <p>Word:<input type="text" name="my-word" id="my_word"></p>
    <p>Audio:<input type="file" name="audio" id="my_audio" /></p>
    <p>Picture:<input type="file" name="picture" id="my_picture" /></p>
    <p><input type="submit" name="submit" value="Submit" /></p>
</form> 
```

剧本：

```
<?php
    $conn = mysql_connect("your_host", "your_user", "your_pass") or die (mysql_error());
    mysql_select_db("your_database", $conn) or die (mysql_error());

    if( ( $_FILES[ 'audio' ][ 'error' ] > 0 ) || ( $_FILES[ 'picture' ][ 'error' ] ) ){
        echo "Error" . "<br />";
    }
    else{
        move_uploaded_file($_FILES["audio"]["tmp_name"], "your/upload/directory/for/audio/" . $_FILES["audio"]["name"]);
        move_uploaded_file($_FILES["picture"]["tmp_name"], "your/upload/directory/for/images/" . $_FILES["file"]["name"]);
        mysql_query( 'INSERT INTO your_table ( word, audio, image ) values ( "' . $_POST[ 'word' ] . '", "' . $_FILES[ 'audio' ][ 'name' ] . '", "' . $_FILES[ 'picture' ][ 'name' ] . '" )', $conn );
    }
?> 
```

当然，您的数据库应该有一个存储这 3 个值和一些 id 的表。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-31T10:40:38.247

我认为您可以在 javascript 中将更多条目添加到这样的列表中：

```
function addLI(id){
var Parent = document.getElementById(id);
var NewLI = document.createElement("LI");

NewLI.innerHTML = "this is a test";

Parent.appendChild(NewLI);
} 
```

我从这里找到的：http: [//bytes.com/topic/javascript/answers/520885-add-new-list-item](http://bytes.com/topic/javascript/answers/520885-add-new-list-item)

我建议为您的朋友添加名称、位置和图片的输入字段，以便添加更多条目，然后使用类似这个 js 函数的东西来添加新的子条目。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-07T09:01:02.040

如果您可以使用 PHP 访问服务器，我建议将所有项目放在一个数组中，然后循环遍历它们。

我在这里写了一个例子：

```
<?php
    $wordsArray = array(
            array('word'=> 'randomword' , 'audio' => 'test.mp3', 'picture' =>'pic.jpg'),
            array('word'=> 'randomword2' , 'audio' => 'test2.mp3', 'picture' =>'pic2.jpg')
        );

        $html = '';
        foreach($wordsArray as $word){
            $html .= '<li data-word="'.$word['word'].'" data-audio="'.$word['audio'].'" data-pic="'.$word['picture'].'"></li>';
        }
?>
    <html>
        <head>
            <title></title>
        </head>
        <body>
            <ul>
                <?php echo $html; ?>
            </ul>
        </body>
    </html> 
```

# python - 将离线文档链接到 IDLE - Linux

> ID：12174255
> 
> 赞同：2
> 
> 时间：2012-08-29T09:00:40.037
> 
> 标签：python, python-idle

通过 Internet 访问，IDLE 上的 < F1 > 在 Linux 上运行良好。没有互联网访问当然是行不通的。我已将 Python 文档下载为 html，但无法让 IDLE 直接引用它。

“IDLE Preferences”下有一个名为“Additional Help Sources”的对话框，但这仅允许用户为单个主题指定单个文件，而不是整个目录结构。我可以输入一个 URL，但我不清楚我应该输入什么作为“菜单项”。

我应该补充一点，将本地目录的 URL 添加到我的浏览器使我能够查看离线文档，这只是我缺少的 IDLE 链接。

我找到了对 PYTHONDOCS 环境变量的引用，但这似乎不适用于 Linux，它似乎是特定于 Windows 的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:00:19.130

您几乎完成了通过菜单项参考本地文档所需的所有设置。让我们更准确地看一下可以做什么：

1.  将 Python 版本的文档下载为[zipped html](http://docs.python.org/ftp/python/doc/2.7.3/python-2.7.3-docs-html.zip)。
2.  将该存档解压缩到您想要的目录，例如*/home/username/python-docs*。
3.  转到空闲：选项 -> 配置空闲... -> 常规 -> 其他帮助资源 -> 添加。
4.  为“菜单项”字段输入标签（它将是出现在 IDLE 的帮助菜单中的新菜单项的标签），例如“本地文档”。
5.  按“浏览”按钮并在解压缩的帮助源中选择“index.html”的路径。
6.  移至帮助 -> 本地文档，它将打开您本地版本的 Python 文档。

**更新：**

我在 Python 问题跟踪器上创建了[一张票](http://bugs.python.org/issue15808)，请求增强标准 IDLE 键配置，因此可以为自定义添加的附加帮助源菜单项添加键绑定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T19:56:35.007

实际上，IDLE 确实有代码可以在磁盘上查找 html 格式的 Python 文档集的副本，但路径是特定于平台的，并且在 Linux 的情况下，至少对于某些发行版来说已经过时了。如果您查看中的代码[`Lib/idlelib/EditorWindow.py`](http://hg.python.org/cpython/file/default/Lib/idlelib/EditorWindow.py)（我正在查看当前的 Python 3 源代码），您会看到对于 Linux 平台，它`index.html`在`/var/www/html/python`或`/usr/share/doc/python-docs-x.y/Doc/`. 例如，在当前的 Debian 系统上，Python doc 包安装在`/usr/share/doc/pythonx.y-doc/html`. `Python Docs`如果您安装了文档包然后创建了一个链接，当您从`Help`手册中选择时，IDLE 应该会离线找到文档。例如，对于 Python 3.3，您*可以*这样做：

```
sudo aptitude install python3.3-doc
sudo mkdir -p /var/www/html/
sudo ln -s /usr/share/doc/python3.3-doc/html python 
```

也就是说，应该更新默认位置（我会将其添加到 Rostyslav 打开的问题中）。

# tridion - 功能区组上的 Javascript

> ID：12174256
> 
> 赞同：5
> 
> 时间：2012-08-29T09:00:40.230
> 
> 标签：tridion, tridion-2011

[我按照如何在 Tridion 的功能区中水平创建自定义按钮一个低于另一个中](https://stackoverflow.com/questions/11682702/how-to-create-the-custom-buttons-horizontally-one-below-the-other-in-ribbon-of-t)提到的文章设法获得了一个新的功能区组

我现在正试图让 Javascript 在 Gui 中发生变化时运行（隐藏/显示按钮）。

我在配置中有这个：

```
<!-- In the cfg:groups part -->
<cfg:group name="ClientGuiMods.ContentGroup" description="">
    <cfg:fileset>
        <cfg:file type="script">/Scripts/CreateRibbonGroup.js</cfg:file>
    </cfg:fileset>
    <cfg:dependencies>
        <cfg:dependency>Tridion.Web.UI.Editors.CME</cfg:dependency>
    </cfg:dependencies>
</cfg:group>

<!-- In the ribbontoolbars add part -->
<ext:extension pageid="HomePage" name="Content" assignid="ContentGroupId">
    <ext:group>~/Scripts/ContentGroup.ascx</ext:group>
    <ext:dependencies>
        <cfg:dependency>ClientGuiMods.ContentGroup</cfg:dependency>
    </ext:dependencies>
    <ext:apply>
        <ext:view name="DashboardView">
            <ext:control id="DashboardToolbar" />
        </ext:view>
    </ext:apply>
</ext:extension> 
```

这在Javascript中：

```
Type.registerNamespace("ClientGuiMods");

ClientGuiMods.ContentGroup = function ContentGroup(element)
{
    console.log('RibbonGroupCreated');
    Tridion.OO.enableInterface(this, "ClientGuiMods.ContentGroup");
    this.addInterface("Tridion.Controls.RibbonItemsGroup", [element]);
}; 
```

我已经为 this.addInterface() 尝试了不同的参数，但它永远不会被调用。这是正确的方法吗？或者是否有另一种方法可以在主页功能区工具栏上调用脚本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T10:14:00.193

除了命令容器（阅读按钮）之外，我从未真正将组视为其他任何东西。所以我使用的唯一界面是`Tridion.Cme.Command`按钮 JavaScript。

但我认为您正在寻找的是您可以在**ContentGroup.ascx.cs中指定的 ControlResource**

```
using Tridion.Web.UI.Core;
using Tridion.Web.UI.Controls;
using Tridion.Web.UI.Core.Controls;

namespace ClientGuiMods
{
    [ControlResources("ClientGuiMods.ContentGroup")]
    public class ContentGroup : TridionUserControl
    {
    }
} 
```

现在，您可以`Tridion.ControlBase`在 JavaScript 中使用该接口。

```
Type.registerNamespace("ClientGuiMods");

ClientGuiMods.ContentGroup = function ContentGroup(element) {
    console.log('RibbonGroupCreated');
    Tridion.OO.enableInterface(this, "ClientGuiMods.ContentGroup");
    this.addInterface("Tridion.ControlBase", [element]);
};

ClientGuiMods.ContentGroup.prototype.initialize = function ContentGroup$initialize() {
    // the control is initialized here, we can use the following properties now
    var props = this.properties;
    var controls = props.controls;
    var container = this.getElement();
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T11:55:09.533

@Bart，我尝试了解决方案，但无法让它发挥作用。

在 chrome 中的 Javascripts 中进一步挖掘我发现没有钩子可以将任何额外的 Javascript 作为 RibbonGroup 触发（如果我错了，请纠正我）。

然而，我确实找到了一种方法来访问“主页”功能区页面并让它从那里触发事件。

我需要的额外内容是 DOM 中名为 HomePage 的 RibbonPage 上的“c:pagetype='Homepage'”，默认情况下不存在。这可以通过在最后包含一个加载事件脚本来设置。所以现在我的脚本看起来像这样。

```
Type.registerNamespace("ClientGuiMods");

ClientGuiMods.CreateRibbonPage = function CreateRibbonPage(element)
{
    Tridion.OO.enableInterface(this, "ClientGuiMods.CreateRibbonPage");
    this.addInterface("Tridion.Controls.RibbonPage", [element]);
};
ClientGuiMods.CreateRibbonPage.prototype.updateState = function CreateRibbonPage$updateState(stateObject)
{
    //...
    //Ribbonpage logic to update the state of your buttons and groups
};

console.log('Homepage: ' + document.getElementById('HomePage')); //.setAttribute('c:pagetype', 'HomePage');

var ClientScripts = {
    registerHomepage: function() {
        console.log('adding c:pagetype att');

        var homepage = document.getElementById('HomePage');

        if (homepage) {

            homepage.setAttribute('c:pagetype', 'HomePage');

        }
    }
}
if (document.addEventListener && !Tridion.Utils.Dom.isIE)
    $evt.addEventHandler(window, "DOMContentLoaded", ClientScripts.registerHomepage);
else
    $evt.addEventHandler(window, "readystatechange", ClientScripts.registerHomepage);

Tridion.Controls.Deck.registerPageType(ClientGuiMods.CreateRibbonPage, "HomePage"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T15:57:38.787

我在这里可能会偏离标准，但听起来您在同一组下有一系列按钮，并且您希望它们在可用性方面表现一致。

我有一个类似的情况，我需要在 Save、Save & Close 和 Save & New 操作上触发相同的事件。我最终做的是将代码编写为 Save 命令扩展（大致基于 Jaime[在此处](http://jaimesantosalcon.blogspot.co.uk/2011/10/2011-sdl-tridion-gui-extensions.html)的详细信息），然后，从 SaveClose 和 SaveNew 扩展中，我将调用 Save._isEnabled 和 Save._isAvailable 函数来确定我的命令是否可用，并且每当编辑者单击 SaveClose 和 SaveNew 时 Save._execute。

虽然不像彼得的建议那么优雅，但完成了工作。

# c# - 为什么这个简单的方法不起作用？

> ID：12174259
> 
> 赞同：2
> 
> 时间：2012-08-29T09:00:55.380
> 
> 标签：c#

它一定很简单，但我似乎找不到解释。为什么以下会产生这些错误：

1.  检测到无法访问的代码（在 result++ 上）
2.  WindowsFormsApplication1.Form1.GetResult(int, int)：并非所有代码路径都返回值

    ```
    private int GetResult(int start, int end)
    {
        for (int result = start; result < end; result++)
        {
            return result;
        } 
    } 
    ```

有谁能帮帮我吗？提前谢谢:)

**编辑：** 首先，感谢您的许多（快速）回复。我的愚蠢……但我没有看到它。

抱歉，我需要更精确地了解我想要接受的内容。我需要一种方法，从给定的起始值（int start）开始将值（结果）加 1，直到它达到另一个值（打算）。因此，如果我没记错的话，它也可能直接添加到开始整数。并返回该值？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-29T09:01:59.470

因为您的方法返回一个`int`类型，编译器无法确定您是否会进入循环。

如果`result`大于或等于怎么办`end`，在这种情况下，循环内的语句将不会执行，因此您会收到错误。

来自[MSDN - For 循环](http://msdn.microsoft.com/en-us/library/ch45axte%28v=vs.100%29.aspx)

> 因为条件表达式的测试发生在循环执行之前，所以 for 语句会执行零次或多次。

这为您提供了错误“并非所有代码路径都返回值”背后的原因，因为如果 for 循环执行`0`次数，则该方法将不会返回任何内容

对于警告“检测到无法访问的代码”，原因是您的更新表达式`result++`在执行 for 块之后执行。由于您的 for 块包含`return`语句，因此您将永远无法达到更新表达式

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T09:03:16.470

方法的开头有两种不同的情况：

*   案例`start < end`：您总是`result`在第一次循环运行时立即返回。因此`result`永远不会增加。

*   案例`start >= end`：您永远不会进入循环，因此您需要`return`在它之外再添加一条语句。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-29T09:04:14.800

很明显，这`result++`是无法到​​达的。如果有的话，您将在第一次执行循环后到达它 - 但在循环的第一次执行中，您返回，从而退出函数。

对于问题的第二部分，请参阅[Habib 的回答](https://stackoverflow.com/a/12174270/96780)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-29T09:07:32.357

多么聪明的编译器！

```
for (int result = start; result < end; result++)
{
    return result;
} 
```

... 相当于：

```
int result = start;
while(result < end) {
  return result;
  result++;
} 
```

如果在我们进入这段代码时 start >= end，while 循环的内容将永远不会运行。在这种情况下，程序流程不会命中以下`return`语句：**并非所有代码路径都返回 value**。

如果在我们进入函数时 start < end ，程序流程将进入循环，点击`return`语句，方法将返回。它不能击中`result++`语句。**检测到无法访问的代码**。

* * *

回应您的编辑：

```
public int getResult(int start, int end) {
   int result = start;
   while(result < end) {
       result++;
   }
   return result;
} 
```

...按照您的描述进行。但是，获得该结果是一种浪费的方式。如果 start=0 和 end=1000000，程序将循环一百万次。

通过以下方式，您将更有效地获得完全相同的结果：

```
public int getResult(int start, int end) {
   if(end > start) {
      return end;
   } else {
      return start;
   }
} 
```

甚至：

```
public int getResult(int start, int end) {
   return Math.Max(start,end);
} 
```

（虽然仍然不清楚你想要的结果是什么 if `start > end`）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-29T09:03:07.423

```
private int GetResult(int start, int end)
{
    int result = 0;
    for (result = start; result < end; result++)
    {
        return result;
    } 
    return result;
} 
```

这样该功能应该可以工作。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-29T09:04:22.973

您正在调用 for 循环。它设置 result=start 比较条件是否为真，然后返回结果。它怎么会达到结果++？=检测到无法访问的代码（在结果++上）

可能是当结果>结束时循环永远不会进入所以=并非所有代码路径都返回一个值

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-29T09:12:07.633

让我们假设条件“结果<结束”为真。然后控件将进入循环内的语句。由于它是一个返回语句，控制将来自函数/方法 GetResult。因此，控件永远不会达到“结果++”。这就是为什么你得到 - 无法访问的代码。

让我知道，如果它有用。

祝一切顺利 ！！！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-29T09:03:31.457

因为如果 start >= end 则不会进入循环

```
private int GetResult(int start, int end)
{
    for (int result = start; result < end; result++)
    {
        return result;
    } 
    return -1; // Path here exists
} 
```

出于兴趣，如果您想返回 and 之间的每个整数`start`，`end`您应该查看 yield return ：

```
 private IEnumerable<int> GetResult(int start, int end)
    {
        for (int result = start; result < end; result++)
        {
            yield return result;
        }
        // Now we don't need a return, because the loop will eventually complete
    } 
```

**编辑**查看评论，OP很可能想要一个数字序列。

上面的方法可以迭代

```
foreach (int anInt in GetResult(40, 50))
{
    Console.WriteLine(string.Format("Next value is {0}", anInt));
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-29T09:03:52.923

如果在 for 循环之后添加 return 语句，它将编译而不会出错。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-29T09:04:08.903

```
private int GetResult(int start, int end)
{
    int result = 0;

    for (result = start; result < end; result++)
    {
        return result;
    } 
    return result;

} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-08-29T09:04:46.483

此函数返回`start`if `start < end`，否则不返回任何内容。

你的方法的目的是什么？

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-08-29T09:05:56.260

让我们考虑一个您的条件`result < end`失败的场景。所以控制不会进入循环，会退出循环。但是外面没有 return 语句，所以它会返回什么，因为另一端期望一些整数是 return ，所以这就是你得到错误的原因。

这将起作用：-

```
private int GetResult(int start, int end)
{
    for (int result = start; result < end; result++)
    {
        return result;
    } 
return 0;
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-08-29T09:06:20.800

如果 start > end 值，循环内的代码将永远不会被执行，因此不会有任何东西从函数返回，因此你会得到这些错误。此外，没有必要像你一样使用 for 循环，因为在第一步本身 if start

```
private int GetResult(int start, int end)
{   
    if(start<end)
       return start;
    return -1;
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-08-29T09:06:23.873

我不认为`for`和`return`做你认为他们做的事。当我阅读您的代码时，它可能被简化为：

```
private int GetResult(int start, int end)
{
    if (start < end)
    {
        return start;
    }
    else
    {
        return 0; // or another default for when start >= end
    }
} 
```

因为`return`会从方法返回。由于循环的第一次迭代（如果 start < end）将立即返回`result`，它已设置为 的值`start`。

正如您的代码所示，该`else`部分丢失了。因此，当 start >= end 时，编译器不知道你想要返回什么，并且 result++ 也永远不会被调用，因为你直接返回，所以它会抛出错误和警告。

# jquery - ajax 成功后重绘数据表 - 不是服务器处理

> ID：12174261
> 
> 赞同：0
> 
> 时间：2012-08-29T09:01:03.663
> 
> 标签：jquery, datatables

我有一个数据表（不是服务器处理），我有 2 个链接，每行一个批准一个拒绝。单击任一链接后，它会修改数据库。这工作正常，我还使用以下内容在单击任一链接后删除该行。

```
parent.animate({'backgroundColor':'#fb6c6c'},300); 
parent.slideUp(300,function() {});` 
```

问题是如果单击批准按钮，数据表中的 days_left 会被计算修改（这工作正常），但我需要在 ajax 成功时重新绘制。

因此过程将是单击批准链接，计算 days_left，使用新的 days 左侧列更新表格。

任何帮助都会很棒我已经坚持了一段时间。

![在此处输入图像描述](../Images/1faf135b25c512aa016a5d295f491817.png)

```
$('a.deny').click(function(e) {
    e.preventDefault();
    var parent = $(this).closest("tr");
    $.ajax({
      type: 'get',
      url: 'index.php',
      data: 'ajax=1&deny=' + parent.attr('id').replace('record-',''),
      beforeSend: function() {
        parent.animate({'backgroundColor':'#fb6c6c'},300);
      },
      success: function() {
        parent.slideUp(300,function() {});      
    }
    });
  });

$('a.approve').click(function(e) {
    e.preventDefault();
    var parent = $(this).closest("tr");
    $.ajax({
      type: 'get',
      url: 'index.php',
      data: 'ajax=1&approve='+ parent.attr('id').replace('record-','')+'&employee='+ parent.attr('title')+'&acyear=' + parent.attr('lang'),
      beforeSend: function() {
        parent.animate({'backgroundColor':'#fb6c6c'},300);
      },
      success: function() {
        parent.slideUp(300,function() {});
        var $adwpTable = $("#department_waiting_approval_table_a").dataTable( { bRetrieve : true } );
        $adwpTable.fnDraw();                
        }
    });
  }); 
```

**编辑 - 添加了更多信息**

```
if(isset($_GET['approve']) && isset($_GET['employee']) && isset($_GET['acyear'])) {
  $result = mysql_query('UPDATE requests SET approved = 1 WHERE id = '.$_GET['approve'].'');
  $result2 = mysql_query('UPDATE holiday_entitlement_business_manual 
          SET days_left = new_entitlement- IFNULL((SELECT sum(days) 
          FROM requests where user='.$_GET['employee'].' AND academic_year='.$_GET['acyear'].' AND approved=1),0) 
          WHERE userid='.$_GET['employee'].' AND academic_year='.$_GET['acyear'].'');
}

if(isset($_GET['deny'])) {
  $result = mysql_query('UPDATE requests SET denied = 1 WHERE id = '.$_GET['deny'].'');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:09:41.080

您可以在成功函数中提供一个数据参数

```
$('a.deny').click(function(e) {
e.preventDefault();
var parent = $(this).closest("tr");
$.ajax({
  type: 'get',
  url: 'index.php',
  data: 'ajax=1&deny=' + parent.attr('id').replace('record-',''),
  beforeSend: function() {
    parent.animate({'backgroundColor':'#fb6c6c'},300);
  },
  success: function(data) {
    parent.slideUp(300,function() {});  
    parent.children('.days_left').html(data);
}
}); 
```

});

然后，您调用的脚本必须返回剩余的天数。

# php - mod_rewrite slash snafu

> ID：12174263
> 
> 赞同：2
> 
> 时间：2012-08-29T09:01:06.013
> 
> 标签：php, apache, .htaccess, mod-rewrite

So I know this question has been asked 20 other times and 20 different ways but after all of my researching I still can't seem to figure this out. My setup works great until I type in a URL with a trailing slash and then I get 404 errors. For example, when I type in the URL `mydomain.com/first` and hit enter, it works fine. When I type in `mydomain.com/first/` and hit enter, it works fine then too. But then, if I type in `mydomain.com/second` it sends me to `mydomain.com/first/second` and throws a 404 error.

Here is my entire htaccess page:

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z0-9_\-]+)/?$ index.php?url=$1 [NC,L]
</IfModule> 
```

My index page:

```
<?php
define('ROOT_DIR', dirname(__FILE__) . '/'); // Define the root directory for use in includes 
require_once (ROOT_DIR . 'library/bootstrap.php');

$url = strtolower($_GET['url']);

include(ROOT_DIR . 'views/headerView.php');

switch($url)
{
    case "first": include(ROOT_DIR . 'views/firstPageView.php');
        break;
    case "second": include(ROOT_DIR . 'views/secondPageView.php');
        break;
    default: include(ROOT_DIR . 'views/homeView.php');
} 

include 'views/footerView.php';
?> 
```

And the default homeView template:

```
<p>This is the home page.</p>
<p>To the first page. <a href="first">First Page</a></p>
<p>To the second page. <a href="second">Second Page</a></p> 
```

I would think that since the slash is optional and not part of the back reference, that the slash would be left off the URL after the page load but in my above example, its clearly not. Any advice would be most appreciated. Thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:25:15.133

Here is what should work:

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z0-9_\-]+)/?$ /myProject/index.php?url=$1 [NC,L]
</IfModule> 
```

You need to put in the / in front of index.php.

Otherwise Apache will look for the index.php file in your current directory.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T01:08:53.963

Hope this will help

```
RewriteRule ^([A-Za-z0-9\_\-]*)/?$ index.php?url=$1 [L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T07:20:51.253

your mod_rewrite config is ok, the problem is on the client. if current path is `/foo/first`, `<a href="second"/>` will lead to `/foo/second`. if it's `/foo/first/`, the same `<a href/>` will lead to `/foo/first/second`.

# php - json_encode 将 php 数组传递给 javascript 数组

> ID：12174266
> 
> 赞同：1
> 
> 时间：2012-08-29T09:01:24.937
> 
> 标签：php, javascript, arrays, json

我有一个更维度的 php 数组，我想将它传递给一个 javascript 数组。

这是数组：

> ```
> $this->_db_list_arrray[$this->getID()][$key] = $row; 
> ```

它就像 "16":[[{"article_no_internal":"9987213"}]] 等等。我这样编码：

> ```
> $shipping_part_list_array = json_encode($db_obj->getArticleList($elements)); 
> ```

在javascript中

> ```
> alert("<?php  echo $shipping_part_list_array; ?>"); 
> ```

但警报仅显示 []。

有没有更好的方法将 php 数组传递给 java 脚本数组？

```
array(1) {
  [16]=>
  array(2) {
    [0]=>
    array(1) {
      [0]=>
      array(2) {
        ["article_no_internal"]=>
        string(6) "999184"
        ["article_name_internal"]=>
        string(29) "Geschenkbox Kerzenschein 2011"
      }
    }
    [1]=>
    array(1) {
      [0]=>
      array(2) {
        ["article_no_internal"]=>
        string(6) "999184"
        ["article_name_internal"]=>
        string(29) "Geschenkbox Kerzenschein 2011"
      }
    }
  }
} 
```

这是在我的控制台中，现在我需要解析以获取正确的数据。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T09:06:45.593

您需要添加单引号来提醒您的 JSON 字符串：

```
alert('<?php  echo $shipping_part_list_array; ?>'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T09:04:33.110

您不应该在 JSON 编码值周围加上双引号；只需执行以下操作：

```
alert(<?php echo $shipping_part_list_array; ?>); 
```

但是，出于调试目的，以下会更好：

```
console.log(<?php echo $shipping_part_list_array; ?>); 
```

最后，将其分配给 JavaScript 变量：

```
var list = <?php echo $shipping_part_list_array; ?>; 
```

# django - 多个站点和用户

> ID：12174267
> 
> 赞同：4
> 
> 时间：2012-08-29T09:01:39.337
> 
> 标签：django

我们正在针对同一个数据库运行多个 django 站点（我们称它们为 site1、site2、site3），并且我们希望允许它们之间存在重复的用户名。Site 和 auth 框架似乎没有实现这一点，默认情况下，username 是 auth.User 中的唯一字段。

所以到目前为止我所做的（猴子补丁，搞砸了用户对象......）：

```
User._meta.get_field('username')._unique = False
User.add_to_class('site', models.ForeignKey(Site, default=Site.objects.get_current().id, blank=True, null=True))
User._meta.unique_together = (('username', 'site'),) 
```

这件作品去掉了用户名的唯一性，增加了一个站点字段，使夫妇（用户名，站点）唯一。

如果某些用户在不同站点上具有相同的用户名，那么在请求 User.objects.get(username=xx) （例如，身份验证后端）时可能会出现问题。所以，我决定修补 User.objects 管理器：

```
def get_query_set(filter=True):
    q = QuerySet(User.objects.model, using=User.objects._db)
    if filter:
        return q.filter(site = Site.objects.get_current())
    return q
User.objects.get_query_set = get_query_set 
```

到目前为止似乎工作。但是......站点使用几乎相同的对象，很可能我们使用管理界面更改这些对象的用户字段，这对所有站点都是通用的......因此，如果我想为一个对象（它有auh.User 的外键）到 site2 的用户，同时在 site1 上以管理员身份登录，这是行不通的，因为用户管理器将在 site=site1 上过滤。

我挖了一下，发现这似乎有效：

```
class UserDefaultManager(UserManager):
    def get_query_set(self, filter=None):
        return QuerySet(User.objects.model)
User._default_manager = UserDefaultManager() 
```

据我了解， _default_manager 由相关的对象管理器使用。然后， User.objects.get(username=xx) 过滤网站，而 an_object.user 不会。

好吧，问题是：是的，这很混乱，我很确定会有缺陷，但它们是什么？

下一个问题是：如果它是有效的，那么放置这段代码的最佳位置在哪里？它当前位于 models.py 文件中，只是在加载模块时运行...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:46:55.227

而不是这个，我建议使用配置文件：

模型.py：

```
from django.contrib.auth.models import User

class UserProfile(models.Model):
    """ Modèle ajoutant des propriété au modèle User """
    user = models.OneToOneField(User, editable=False)
    site1 = models.BooleanField()
    site2 = models.BooleanField()
    site3 = models.BooleanField()

def create_user_profile(sender, instance, created, **kwargs):
    """ Crée la jonction entre le modèle User, et le modèle UserProfile """
    if created:
        UserProfile.objects.create(user=instance)

post_save.connect(create_user_profile, sender=User) 
```

并在每个站点上创建一个装饰器：

装饰器.py：

```
try:
    from functools import wraps
except ImportError:
    from django.utils.functional import wraps
from django.http import HttpResponseForbidden
from django.contrib.auth.decorators import login_required
from distrib.views.error import error403

def site1_required(function):
    @wraps(function)
    @login_required
    def decorateur(request, *k, **a):
        if request.user.get_profile().site1 or request.user.is_superuser:
            return function(request, *k, **a)
        else:
            result = error403(request)
            return HttpResponseForbidden(result)
    return decorateur
    return function 
```

然后在每个视图上添加装饰器，如果不允许用户在此站点上连接，他将收到 http403 错误。

# c# - 使用适当的小数点将字符串值转换为十进制

> ID：12174273
> 
> 赞同：2
> 
> 时间：2012-08-29T09:02:08.617
> 
> 标签：c#, decimal

我有以字符串格式存储的值&我想转换成十进制。

前任：

`11.10`当我尝试转换为十进制时，我已经以字符串格式存储它给我`11.1`而不是`11.10`.

我通过以下方式尝试过

```
string getnumber="11.10";
decimal decinum=Convert.ToDecimal(getnumber); 
```

我也试过这个

```
decinum.ToString ("#.##"); 
```

但它返回字符串，我想要十进制。

这可能是什么解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T09:15:02.907

正如已经评论`11.1`过的，它的值与`11.10`

```
decimal one=11.1;
decimal two=11.10;
Console.WriteLine(one == two); 
```

将输出`true`

to string 方法中的`#`格式化程序表示一个可选数字，如果它为零，则会抑制（并且抑制是有效的 - `0`in`4.05`不会被抑制）。尝试

```
decinum.ToString("0.00"); 
```

你会看到字符串值`11.10`

理想情况下，您实际上想要使用类似的东西

```
string input="11.10";
decimal result;

if (decimal.TryParse(input,out result)) {
   Console.WriteLine(result == 11.10);
} else {
  // The string wasn't a decimal so do something like throw an error.
} 
```

在上述代码的末尾，结果将是您想要的小数，“true”将输出到控制台。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T09:36:51.750

这将完美地工作

```
string getnumber = "11.10";
decimal decinum = Math.Round(Convert.ToDecimal(getnumber), 2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T09:05:52.783

`decimal`数据类型存储一个*值*。11.1 的值与 11.10 的值相同 - 从数学上讲，它们是完全相同的数字，因此它的行为正确。

您似乎想要将数字*显示*为 11.10，但这取决于显示它的代码 - 我不知道您是在写入日志文件、在网页上显示还是在任何其他格式上显示 - 但那独立于数据类型的内部表示`decimal`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T09:06:02.803

没有解决方案，这是预期的行为。 `11.10`在字符串中 =`11.1`在数字中

您不能在小数部分存储零，否则`11.10`将不同于`11.100`，如果您谈论的是字符串，则这是正确的，但如果您谈论的是数字，则不是。

我认为您的问题仅在演示级别上。你为什么不更好地解释你想要做什么。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-29T09:06:11.630

用小数表示的 11.10 是 11.1，就像它是 11.1000000000000000000000000000000000000 一样。

对于数学过程，不要担心它如何显示自己。如果您要显示该值，那么将其转换为字符串也不是什么大问题。请记住

```
decinum.ToString ("#.##"); 
```

正在返回一个字符串（来自“ToString”函数），而不是将“decinum”转换为字符串。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-29T09:14:23.203

```
 string getnumber = "11.10";
    double decinum = double.Parse(getnumber); 
```

# git - GitHub - 按作者列出提交

> ID：12174276
> 
> 赞同：168
> 
> 时间：2012-08-29T09:02:25.677
> 
> 标签：git, github

[GitHub上](http://github.com/)有没有办法在浏览器中列出单个作者所做的所有提交（既不是本地的，例如通过`git log`，也不是通过API）？

单击提交列表（提交历史）中的用户名只会导致该用户的个人资料页面。检查 GitHub UI 和搜索（谷歌，StackOverflow）并没有找到一种方法来做到这一点。

* * *

## 回答 #1

> 赞同：208
> 
> 时间：2012-08-29T09:06:50.390

如果作者有 GitHub 帐户，只需在提交历史记录中的任意位置单击作者的用户名，您可以看到的提交将被过滤为该作者的提交：

![屏幕截图显示了单击以过滤提交的位置](../Images/e23383ddfdd6cf8d3251a573b2cf7880.png)

您还可以在 repo 的“贡献者”页面上单击其名称下方的“n commits”链接：

![另一个截图](../Images/081514bed1734867c1fa02b6390cc580.png)

或者，您可以直接附加`?author=<theusername>`或附加`?author=<emailaddress>`到 URL。例如，[https://github.com/jquery/jquery/commits/master](https://github.com/jquery/jquery/commits/master?author=dmethvin) ?author=dmethvin或[https://github.com/jquery/jquery/commits/master?author=dave.methvin@gmail.com](https://github.com/jquery/jquery/commits/master?author=dave.methvin@gmail.com)都给出我：

![仅包含 Dave Methvin 提交的屏幕截图](../Images/05921c43509c56ddde6870a6a0a319fb.png)

对于没有 GitHub 帐户的作者，只能通过电子邮件地址过滤，并且您需要手动添加`?author=<emailaddress>`到 URL - 作者的姓名将无法从提交列表中单击。

* * *

您还可以使用命令行从命令行获取特定作者的提交列表

```
git log --author=[your git name] 
```

例子：

```
git log --author=Prem 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2017-03-10T15:16:57.097

在查看 repo 的“commits”部分时，只需在 URL 中添加`?author=<emailaddress>`或。`?author=<githubUserName>`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2022-01-15T01:01:44.047

替换`torvalds`为您想要的作者的 Github 用户名。

[https://github.com/search?o=desc&s=committer-date&type=Commits&q=author:torvalds](https://github.com/search?o=desc&s=committer-date&type=Commits&q=author:torvalds)

您将看到作者对**所有存储库**的所有提交，按提交日期降序排序。

# android - 通知重新启动我的活动并在通知上暂停按钮

> ID：12174279
> 
> 赞同：0
> 
> 时间：2012-08-29T09:02:33.647
> 
> 标签：android, statusbar, notificationmanager

当我在启动我的应用程序时通过状态栏单击它时，我的通知会重新启动，它会从服务器流式传输音频并显示通知，直到我没有从状态栏中清除它，所以我的问题是当我单击我的应用程序通知时它会重新启动活动并停止流媒体音乐..所以请建议我解决方案，以停止从通知再次重新启动应用程序，我想显示通知栏上的通知，直到我退出应用程序我也想在通知上显示暂停和播放按钮，所以请也帮帮我

```
public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState); 

        setContentView(R.layout.activity_main);

        nm=(NotificationManager)getSystemService(NOTIFICATION_SERVICE);

        Intent intent = new Intent(this,MainActivity.class);
        PendingIntent pi= PendingIntent.getActivity(this, 0, in`enter code here`tent, 0);
         String body = " Welcome to streaming ";
         String title = "radio";
         Notification n = new Notification(R.drawable.png, body, System.currentTimeMillis());
         n.setLatestEventInfo(this , title, body, pi);
         n.defaults=Notification.DEFAULT_ALL;
         nm.notify(uniid,n);` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:10:22.403

将此添加到您通过通知启动的活动中的清单文件中，就好像它已经在运行一样，它不会再次重新启动..

```
android:launchMode="singleTop"
android:configChanges="orientation|keyboardHidden" // fixes orientation 
```

不允许在背压时破坏您的应用程序：

```
 @Override
public void onBackPressed()
{
    moveTaskToBack(true);
    //super.onBackPressed();   // comment this line else your app will be destroyed

} 
```

# php - 在编码 php 时出错...意外的 '['

> ID：12174284
> 
> 赞同：-5
> 
> 时间：2012-08-29T09:02:49.887
> 
> 标签：php, function

我的 php 代码有错误

这是我的代码

```
function cart() {
    foreach($_SESSION as $name => $value) {
        if ($value>0) {
            if (substr($name, 0, 5) == 'cart_'){
                $id = substr($name, 5, (strlen($name)-5));
                $get = mysql_query('SELECT id, name, price FROM products WHERE id=' .mysql_real_escape_string((int)$id));
                while ($get_row = mysql_fetch_assoc($get)){
                    $sub = $get_row['price'] * $value;
                    echo $get_row['name'].' x '.$value.' @ '.get_row['price'].' = '.$sub.'<br />' ;
                }
            }
        }
        else{
            echo "your cart is empty.";
        }
    }
} 
```

错误是

```
 Parse error: syntax error, unexpected '[', expecting ',' or ';' in C:\xampp\htdocs\shoppingcart\cart.php on line 39 
```

这是

```
 echo $get_row['name'].' x '.$value.' @ '.get_row['price'].' = '.$sub.'<br />' ; 
```

我认为我的代码是正确的

请帮我

我只是这个领域的新手

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T09:03:49.387

将`$`符号添加到`get_row['price']`：

```
 echo $get_row['name'].' x '.$value.' @ '.$get_row['price'].' = '.$sub.'<br />' ; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T09:04:14.810

```
'.get_row['price'].' 
```

上面的代码应该是

```
'.$get_row['price'].' 
```

它缺少美元符号:)

干杯

加文

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T09:04:27.077

换上。`get_row['price']`_`$get_row['price']`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T09:05:11.197

`$`你之前错过了一个`get_row['price']`。做了：

```
$get_row['price'] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-29T09:05:30.837

```
echo $get_row['name'].' x '.$value.' @ '.`$`get_row['price'].' = '.$sub.'<br />' ; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-29T09:41:36.233

我认为它更好：

```
echo $get_row['name']." x ".$value." @ ".$get_row['price']." = ".$sub."<br />"; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-29T09:10:22.350

您缺少一个`$`：

尝试这个：

```
echo $get_row['name'].' x '.$value.' @ '.$get_row['price'].' = '.$sub.'<br />' ; 
```

# erlang - erlang:is_port/1 和套接字

> ID：12174288
> 
> 赞同：3
> 
> 时间：2012-08-29T09:03:11.493
> 
> 标签：erlang

我正在阅读更多关于`erlang:is_port/1`所以我决定用几个值来测试它。

我看到，对于普通套接字，它会`true`在套接字启动时回复，`false`否则（即套接字已关闭）。

也可以`is_port/1`与 ssl 套接字一起使用吗？我试过但它总是返回`false`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T11:39:31.550

如果您将*SSL Socket*称为 (for example) 的返回值`ssl:connect/2,3`，那么答案是“否”。SSL 应用程序上下文中的 SSL 套接字属于一种`sslsocket()`类型，[根据文档](http://www.erlang.org/doc/man/ssl.html)，它对用户是不透明的，绝对不是端口。具体来说，它们是记录：

```
%% Looks like it does for backwards compatibility reasons
-record(sslsocket, {fd = nil, pid = nil}). 
```

# xml - JAXP Transformer 通过 DOMSource 返回样式表

> ID：12174297
> 
> 赞同：2
> 
> 时间：2012-08-29T09:03:35.443
> 
> 标签：xml, xslt, jaxp

我遇到了一个奇怪的问题，似乎找不到任何解决方案。我只是试图将 XSLT 样式表应用于 XML 文件（在这种情况下，SPARQL 查询结果格式化为 XML，但任何其他 XML 文件都会给出相同的结果）。在这种情况下，我需要通过 DOMSource 重新使用已加载的 XML 文档来创建转换器。您可以在下面找到代码（简化；通常，样式表文档来自其他地方）：

```
TransformerFactory factory = TransformerFactory.newInstance();
Document stylesheet = db.parse(new File("C:/workspace_5/stylesheet.xml"));
Transformer xformer = factory.newTransformer(new DOMSource(stylesheet));

Source source = new StreamSource(new FileInputStream("C:/workspace_5/xml-file.xml"));        
ByteArrayOutputStream bOut = new ByteArrayOutputStream();
Result result = new StreamResult(bOut);

xformer.transform(source, result); 
```

StreamResult 的输出流返回加载的样式表，而不是转换后的 XML。如果我将第二行和第三行替换为：

```
Transformer xformer = factory.newTransformer(new StreamSource(
    new FileInputStream(""C:/workspace_5/stylesheet.xml"))); 
```

然后一切正常。是的，当然我可以将加载的样式表文档序列化为字符串，将其转换为 ByteArrayInputStream（或者更糟糕的是，将其写入文件），然后使用它来创建 StreamSource，但这很愚蠢。

有什么原因这不起作用吗？

xml-file.xml 代码：

```
<?xml version="1.0"?>
<sparql>
  <head>
    <variable name="buyerName"/>
  </head>
  <results>
    <result>
      <binding name="buyerName">
        <literal>John Doe</literal>
      </binding>
    </result>
  </results>
</sparql> 
```

stylesheet.xml 代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:po="http://www.w3.org/2002/ws/sawsdl/spec/wsdl/order#"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

<xsl:template match="/sparql">
    <xsl:for-each select="results/result">

        <buyer xsi:type="po:Buyer">
            <name xsi:type="string"><xsl:value-of select="binding[@name='buyerName']/literal" /></name>
        </buyer>

    </xsl:for-each>
</xsl:template>
</xsl:stylesheet> 
```

谢谢！

威廉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T08:21:06.980

您的 DocumentBuilderFactory 很可能不知道命名空间。尝试打开命名空间感知：

```
factory.setNamespaceAware(true); 
```

您可以[查看这篇文章](https://stackoverflow.com/questions/12780355/xslt-transformation-passing-parameters/13468540#13468540)以获取相关代码。

# c# - 无法在 ASP.NET 项目中使用服务引用

> ID：12174298
> 
> 赞同：1
> 
> 时间：2012-08-29T09:03:38.123
> 
> 标签：c#, asp.net-mvc, wcf

我成功地将 WCF 服务引用添加到我的 ASP.NET 项目，但我无法使用它。
我无法通过`using MyProject.MyService`.

这在一个标准的 Windows 窗体项目中工作，我现在，所请求的服务正在工作。

谢谢你的帮助。

编辑：在生成服务客户端期间出现警告
我认为“主要”警告如下

```
Warning 1   Custom tool warning: Cannot import wsdl:portType
Detail: An exception was thrown while running a WSDL import extension:System.ServiceModel.Description.DataContractSerializerMessageContractImporter
Error: Type 'Newtonsoft.Json.Linq.JToken' is a recursive collection data contract which is not supported. Consider modifying the definition of collection 'Newtonsoft.Json.Linq.JToken' to remove references to itself. 
```

此警告仅在 ASP.NET 项目的生成中出现。这一代在我的其他项目中工作。

看来这是我不负责的班级的问题。我是否必须更改服务引用创建的设置或避免原始 WCF 服务类中的某些导入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:09:19.767

我们需要更多信息以便为您解决此问题。是否添加了引用但您不能使用它？

我建议查看 reference.cs 文件（在服务引用下，您可能需要告诉解决方案资源管理器显示所有文件 - 顶部的文件夹和文件的小图标）并查看生成它的名称空间。

我认为您可能只是没有使用正确的名称空间来引用客户端。

另一种可能性：检查任何编译器警告，它们可能会为您提供有关正在发生的事情的线索。

编辑：这似乎是其他人遇到的问题。你有安装 json.net 包吗？

详情请参阅以下内容：

[使用稍微复杂的方法引用 WCF 服务时获取“递归集合数据契约”](https://stackoverflow.com/questions/12069176/getting-recursive-collection-data-contract-when-referencing-a-wcf-service-with)

# c# - 是否建议模拟具体课程？

> ID：12174304
> 
> 赞同：38
> 
> 时间：2012-08-29T09:03:56.213
> 
> 标签：c#, unit-testing, mocking, nsubstitute

模拟框架网站中给出的大多数示例都是模拟接口。假设我目前正在使用的 NSubstitute，他们所有的模拟示例都是模拟接口。

但实际上，我看到了一些开发人员模拟具体类。是否建议模拟具体课程？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-08-29T22:52:09.713

理论上，模拟一个具体的类绝对没有问题；我们正在针对逻辑接口（而不是关键字`interface`）进行测试，并且该逻辑接口是否由 a`class`或提供并不重要`interface`。

在实践中，.NET/C# 使这有点问题。正如您提到的 .NET 模拟框架，我假设您仅限于此。

在 .NET/C# 中，默认情况下成员是非虚拟的，因此任何基于代理的模拟行为方法（即从类派生，并覆盖所有成员以执行特定于测试的内容）都将不起作用，除非您明确标记成员作为`virtual`. 这导致了一个问题：您正在使用一个模拟类的实例，该实例在您的单元测试中是完全安全的（即不会运行任何真实代码），但除非您确定一切正常，否则您`virtual`最终可能会得到真实和模拟代码的混合运行（如果有构造函数逻辑，这可能会特别成问题，它总是运行，并且如果有其他具体的依赖关系需要新建，则更加复杂）。

有几种方法可以解决这个问题。

*   使用`interfaces`. 这是可行的，也是我们在[NSubstitute 文档](http://nsubstitute.github.io/help/creating-a-substitute/)中建议的方法，但缺点是可能会使用实际上不需要的接口使您的代码库膨胀。可以说，如果我们在代码中找到好的抽象，我们自然会得到可以测试的整洁、可重用的接口。我还没有看到它像那样成功，但是 YMMV。:)
*   努力使一切虚拟化。一个有争议的缺点是我们建议所有这些成员都旨在成为我们设计中的扩展点，而我们真的只想改变整个类的行为以进行测试。它也不会停止构造函数逻辑的运行，如果具体类需要其他依赖项，它也无济于事。
*   [通过Fody的](https://github.com/Fody/Fody)[Virtuosity 插件之](https://github.com/Fody/Virtuosity)类的东西使用程序集重写，您可以使用它来将程序集中的所有类成员修改为虚拟的。
*   使用基于非代理的模拟库，例如[TypeMock](https://www.typemock.com/) *（付费）*、[JustMock](http://www.telerik.com/products/mocking.aspx) *（付费）*、[Microsoft Fakes](https://msdn.microsoft.com/en-us/library/hh549175.aspx) *（需要 VS Ultimate/Enterprise，尽管其前身[Microsoft Moles](https://www.microsoft.com/en-us/research/project/moles-isolation-framework-for-net/)是免费的）*或[Prig](http://urasandesu.github.io/Prig/) *（免费 + 开源）*。我相信这些能够模拟类的所有方面，以及静态成员。

反对最后一个想法的一个常见抱怨是您正在通过“假”接缝进行测试；我们正在超越通常用于扩展代码的机制来改变我们代码的行为。需要超越这些机制可能表明我们的设计存在刚性。我理解这个论点，但我见过创建另一个接口的噪音超过好处的情况。我想这是意识到潜在的设计问题的问题。如果您不需要来自测试的反馈来突出设计刚性，那么它们是很好的解决方案。

我要抛出的最后一个想法是在我们的测试中改变单元的大小。通常我们有一个单一的类作为一个单元。如果我们有许多内聚的类作为我们的单元，并且有接口作为围绕该组件的明确定义的边界，那么我们可以避免模拟尽可能多的类，而只是在更稳定的边界上模拟。这可以使我们的测试变得更加复杂，其优势在于我们正在测试一个内聚的功能单元，并被鼓励围绕该单元开发可靠的接口。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-01T18:09:01.563

**更新**：

3年后我想承认我改变了主意。

从理论上讲，我仍然不喜欢仅仅为了方便创建模拟对象而创建接口。在实践中（我正在使用 NSubstitute）它更容易使用，`Substitute.For<MyInterface>()`而不是模拟具有多个参数的真实类，例如`Substitute.For<MyCLass>(mockedParam1, mockedParam2, mockedParam3)`，每个参数应该单独模拟。[NSubstitute 文档](http://nsubstitute.github.io/help/creating-a-substitute/)中描述了其他潜在问题

在我们公司，现在推荐的做法是**使用接口。**

**原始答案**：

如果您不需要创建同一抽象的多个实现，请不要创建接口。正如[David Tchepak 所指出的那样](https://stackoverflow.com/a/12187583/52277)，您不想使用实际上可能不需要的接口来膨胀您的代码库。

来自 [http://blog.ploeh.dk/2010/12/02/InterfacesAreNotAbstractions.aspx](http://blog.ploeh.dk/2010/12/02/InterfacesAreNotAbstractions.aspx)

> 您是否从类中提取接口以启用松散耦合？如果是这样，您的接口和实现它们的具体类之间可能存在 [1:1 的关系。](http://martinfowler.com/bliki/InterfaceImplementationPair.html)这可能[不是一个好兆头](http://simpleprogrammer.com/2010/11/02/back-to-basics-what-is-an-interface)，并且违反了 [重用抽象原则 (RAP)](http://www.codemanship.co.uk/parlezuml/blog/?postid=934)。
> 
> **只有一个给定接口的实现是一种代码异味。**

如果您的目标是可测试性，我更喜欢[David Tchepak 上面的回答](https://stackoverflow.com/a/12187583/52277)中的第二个选项。

但是，我不相信您必须将所有内容都虚拟化。仅将要替换的方法设为虚拟就足够了。我还将在方法声明旁边添加一条注释，该方法是虚拟的，只是为了使它可以替代单元测试模拟。

但是请注意，替换具体类而不是接口有一些限制。例如[对于 NSubstitute](http://nsubstitute.github.com/help/auto-and-recursive-mocks/)

> 注意：不会为类创建递归替换，因为创建和使用类可能会产生潜在的副作用

.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T09:11:30.693

问题是：为什么不呢？

我可以想到几个有用的场景，例如：

具体类的实现还没有完成，或者做它的人不可靠。所以我模拟了指定的类，并针对它测试我的代码。

模拟执行数据库访问等操作的类也很有用。如果您没有测试数据库，您可能希望为测试返回始终不变的值（通过模拟类很容易）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T09:09:51.190

不是不推荐，是如果你别无选择，你可以这样做。

通常设计良好的项目依赖于为单独的组件定义接口，因此您可以通过模拟其他组件来单独测试它们中的每一个。但是，如果您正在使用**不允许更改的遗留代码/代码**并且仍然想测试您的类，那么您别无选择，也不能因此受到批评（假设您努力尝试将这些组件切换到接口并被剥夺了这样做的权利）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-01T22:14:26.410

假设我们有：

```
class Foo {
    fun bar() = if (someCondition) {
        “Yes”
    } else {
        “No”
    }
} 
```

没有什么能阻止我们在测试代码中进行以下模拟：

```
val foo = mock<Foo>()
whenever(foo.bar()).thenReturn(“Maybe”) 
```

问题是它设置了类 Foo 的不正确行为。Foo 类的真实实例将永远无法返回“Maybe”。

# javascript - 如何找到特定的字符串并根据字符进行替换？

> ID：12174307
> 
> 赞同：0
> 
> 时间：2012-08-29T09:04:09.880
> 
> 标签：javascript, string

我正在尝试查找特定字符，例如“？” 然后删除字符后面的所有文本，直到我碰到一个空格。

以便：

```
var string = '?What is going on here?';
Then the new string would be: 'is going on here'; 
```

我一直在使用这个：

```
var mod_content = content.substring(content.indexOf(' ') + 1); 
```

但这不再有效，因为特定的字符串也可以在字符串的中间。

除了这个，我还没有真正尝试过任何东西。我完全不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:07:56.290

采用：

```
string = string.replace(/\?\S*\s+/g, ''); 
```

***更新：*** 如果也想删除最后一个`?`，请使用

```
string = string.replace(/\?\S*\s*/g, ''); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:09:05.250

```
var firstBit = str.split("?");
var bityouWant = firstBit.substring(firstBit.indexOf(' ') + 1); 
```

# objective-c - 颁发的证书状态

> ID：12174317
> 
> 赞同：0
> 
> 时间：2012-08-29T09:04:54.717
> 
> 标签：objective-c, xcode

惠，

我不确定问题出在哪里，但是每当我想提交我的应用程序时，就会发生这种情况，之后我尝试吊销我的证书并要求它回来，状态为“已发布”。我怎么解决这个问题 ？tq。

应用程序未通过协同设计验证。签名无效，或未使用 Apple 提交证书签名。(-19011)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T09:12:05.447

您确定要使用分发配置文件而不是开发人员配置文件来签署您的应用程序以供提交吗？

这是此失败的常见原因。

也可能是您正在使用 Xcode 4.5 或 iOS6（它们是预发布的），这会阻止提交。

一般来说 - 我发现 Apple [Technical Note on Code Signing Issues](http://developer.apple.com/library/ios/#technotes/tn2250/_index.html)是解决此类问题的一个很好的参考。

# c++ - 递归调用溢出

> ID：12174319
> 
> 赞同：1
> 
> 时间：2012-08-29T09:05:06.110
> 
> 标签：c++, visual-studio-2008, recursion

在测试数据集上，以下代码有效，但是当我更改为具有相似大小的第二个测试集时，它会溢出。

要将标记字符串更改为关联的新标记字符串，我使用此向量查找函数

```
//looks for input string in vector and returns output, 'c' is check row, 'r' is return row
string vectorSearch(string &check, int &direction, int n, int c, int r, int level) 
{
    if ((direction == 1 && check.length() <= 1) || n == list.size()-1 ||(direction == 0 && check.length() > 1)) { //if reading and string is 1 char then pass over
        if (direction == 1){ //convert '???' into '?'
            string temp = "";
            bool wildToken = false;
            for (unsigned int i = 0; i < check.length(); i++) {
                temp+='?';
                if (check.compare(temp) == 0) { check = '?'; wildToken = false; } //done,'???" case, return '?' token
                else if (check[i] == '?') wildToken = true; //not done searching
            }
        }

        return check;
    } else {
        if (list[n][c] == check || list[n][c] == ('0'+check)) //add dummy '0'
            return list[n][r];
        else 
            return vectorSearch (check, direction, n+1, c, r, level);
    }
} 
```

经过十几次转换后，堆栈溢出

从此函数调用vectorSearch

```
//this function takes an ontology and direction==1 (default) changes from string 
//to single char or if direction==0 takes single char and converts to string representation
string Lexicon::convertOntology(string input, int level, int direction, string out, string temp) 
{
    if (input == "" && temp == "") 
        return out; //check for completed conversion
    else {
        if (direction == 0 || input[0] == '.' || input[0] == '-' || input == "" ) { //found deliniator or end
            if (temp == "") temp = input[0]; //condition for reverse w/o deleniators
            if (input != "") return convertOntology(input.substr(1), level+1, direction, 
                out+=vectorSearch(temp, direction, 0, direction, 1-direction, level));
            else {
                string empty = "";
                return convertOntology(empty, level+1, direction, out+=vectorSearch(temp, direction, 0, direction, 1-direction, level));
            }
        } else 
            return convertOntology(input.substr(1), level, direction, out, temp+=input[0]); //increment and check
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T09:13:52.407

调用堆栈是一种有限资源，可以像其他任何资源一样被耗尽。您的函数越大（相对于您在其中创建的局部变量的创建），每次调用在堆栈上使用的空间量就越大。这是递归不可避免的，除非您可以以某种方式限制递归调用的数量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T09:19:57.850

在堆栈空间用完之前，您只能进行如此深入的递归。幸运的是，任何递归函数都可以重写为迭代。我相信下面是你的vectorSearch的正确迭代实现，我会把后一个留给你。

```
string vectorSearch(string &check, int &direction, int n, int c, int r, int level) 
{
    while(true)
    {
        if ((direction == 1 && check.length() <= 1) || n == list.size()-1 ||(direction == 0 && check.length() > 1)) { //if reading and string is 1 char then pass over
            if (direction == 1){ //convert '???' into '?'
                string temp = "";
                bool wildToken = false;
                for (unsigned int i = 0; i < check.length(); i++) {
                    temp+='?';
                    if (check.compare(temp) == 0) { check = '?'; wildToken = false; } //done,'???" case, return '?' token
                    else if (check[i] == '?') wildToken = true; //not done searching
                }
            }

            return check;
        } else if (list[n][c] == check || list[n][c] == ('0'+check)) {//add dummy '0'
                return list[n][r];
        }

        n++;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T22:31:07.830

感谢您的评论和评论。

这些函数很好——这个递归函数包要求字符串存在于它所作用的数据库中，并且在这些错误识别特殊条件并插入一个虚拟字符之前，字符串检查。在这两个函数之前有一个递归函数——我没有正确地看到我已经编写了三个递归函数的捆绑包——并且其中一个正在参数中搜索比数据库中存在的字符串更长的字符串；显然参数比堆栈宽。检查参数，其中一个没有更新，也没有控制。

我修复了特殊条件，字符串现在长度相同并且搜索参数是固定的。

发布的功能并不太复杂。

# linux - Bash在脚本中拦截通配符

> ID：12174320
> 
> 赞同：4
> 
> 时间：2012-08-29T09:05:06.153
> 
> 标签：linux, bash

我正在使用 Bash 脚本从文本文件中逐行读取，其中包含特殊字符（正则表达式）。当我使用`echo "${SOME_VAR}"`它时，它不会按**原样**显示文本。

我熟悉[防止 * 在 bash 脚本中被扩展](https://stackoverflow.com/questions/2470638/prevent-to-be-expanded-in-the-bash-script)。

如何按原样显示和使用文本？

**UPDATE** 文本（TSV）文件包含类似于（最后一个条目是 psql 查询）的元组

```
bathroom    bathroom    select name from photos where name ~* '\mbathroom((s)?|(''s)?)\M'; 
```

我正在阅读 CSV，如下所示：

```
tail -n+2 text.file | while IFS=$'\t' read x y z
do
    echo "${z}"
done 
```

这给出了输出

```
select name from photos where name ~* 'mbathroom((s)?|(''s)?)M'); 
```

请注意，缺少“\”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T09:37:38.013

尝试使用以下`-r`标志`read`：

```
tail -n+2 text.file | while IFS=$'\t' read -r x y z
do
    echo "${z}"
done 
```

从`read`手册页：

> -r 不要以任何特殊方式处理反斜杠字符。将每个反斜杠视为输入行的一部分。

# objective-c - 是否有给定的函数、属性或方法可以在以下情况下获得大小？

> ID：12174322
> 
> 赞同：0
> 
> 时间：2012-08-29T09:05:10.163
> 
> 标签：objective-c, uikit

我将 UILabel 旋转 30 度。

在这种情况下，我想获得一个绑定大小。

有给定的功能吗？（函数、属性、方法等）

```
 UILabel *uiLabel = [[[UILabel alloc] initWithFrame:CGRectMake(100, 100, 100, 20)] autorelease];
    uiLabel.text = @"UILabel Text";
    uiLabel.transform = CGAffineTransformMakeRotation((CGFloat) (-M_PI/4));

    CGSize rotatedBound = uiLabel.????? 
```

![在此处输入图像描述](../Images/eb71dd318a6694995419efc8159cf52d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:10:43.137

该属性的`size`成员`frame`反映了新的容器大小：

```
CGSize rotatedBound = uiLabel.frame.size; 
```

# iphone - 需要帮忙。Apple 的带有地址的可达性类不起作用

> ID：12174323
> 
> 赞同：0
> 
> 时间：2012-08-29T09:05:15.013
> 
> 标签：iphone, xcode, networking, ip-address, reachability

我想检查我的相机是否已连接，但我似乎无法让它工作。我添加了可达性 .h 和 .m。感谢您对我的学校项目的所有帮助！

```
- (void)viewDidAppear:(BOOL)animated {

Reachability *reachabilityForCam = [Reachability reachabilityWithAddress:struct sockaddr_in callAddress; 
                                     callAddress.sin_len = sizeof(callAddress); 
                                     callAddress.sin_family = AF_INET; 
                                     callAddress.sin_port = htons(80); 
                                     callAddress.sin_addr.s_addr = inet_addr("X.X.X.X")];     
                                     if ([reachabilityForCam currentReachabilityStatus] == NotReachable) {
    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Cam is not reachable" delegate:nil cancelButtonTitle:@"Close" otherButtonTitles:nil];
    [alertView show];
    [self dismissModalViewControllerAnimated:YES];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:27:41.313

感谢您为您的学校项目开发 iOS 项目。但是要检查相机是否可用，您应该使用[`UIImagePickerController`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)类 API 而不是 Rechability。

请检查如下。 `if ([UIImagePickerController isCameraDeviceAvailable:UIImagePickerControllerSourceTypeCamera]) {}`

我希望这能帮到您。

# .net - 包含 Html 编码和特殊字符问题的流

> ID：12174324
> 
> 赞同：0
> 
> 时间：2012-08-29T09:05:19.103
> 
> 标签：.net, encoding, stream

我的程序通过发出 HttpWebRequest 并从 HttpWebResponse 读取流来读取网页内容。
我查看了html内容并看到了这个。

```
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
```

所以我这样做了：

```
Encoding CorrectEncoding = Encoding.GetEncoding("iso-8859-1");
StreamReader readStream = new StreamReader(receiveStream, CorrectEncoding);
result = readStream.ReadToEnd(); 
```

但在内部`result`，我看到的是 Bj?rn，而不是在浏览器中看到 Björn。知道我做错了什么吗？
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:08:23.433

使用 HttpWebResponse 的标头

```
response.Headers[HttpResponseHeader.ContentType] 
```

或者

```
response.Headers[HttpResponseHeader.ContentEncoding] 
```

而不是查看流。

# image - 更改 HTML5 画布上的光标

> ID：12174326
> 
> 赞同：1
> 
> 时间：2012-08-29T09:05:24.420
> 
> 标签：image, html, canvas, cursor, mouse-cursor

我的网站中有一个画布和一个图像旋转功能。所以我想在尝试旋转图像时更改鼠标光标。我一开始就试过这个，

```
 <canvas id="draw" style="cursor: url(img/rotate.cur)"> 
```

但我没能成功。我在 Chrome 中得到的是“无效的属性值”。可能是什么问题呢？

提前致谢

# node.js - heroku node.js bash：节点：找不到命令

> ID：12174330
> 
> 赞同：6
> 
> 时间：2012-08-29T09:05:40.207
> 
> 标签：node.js, heroku, web-deployment

在雪松堆栈上的 heroku 上部署我的应用程序似乎有一个奇怪的问题，我的节点进程甚至没有被调用

我的 Procfile 如下：

```
web: node web.js 
```

和我的 package.json 文件：

```
{
 "name": "fuuzik",
 "version": "0.0.1",
 "dependencies": {
   "express": "3.x",
   "jade":"*",
   "mime-magic":"*"
  },
 "engines": {
  "node": "0.8.x",
  "npm": "1.1.x"
  }
} 
```

因此，在我提交并推送之后，heroku 检测到它是一个节点应用程序并正确构建了我的依赖项，甚至说它已部署.. 但应用程序在部署时立即崩溃，heroku 日志返回：

```
2012-08-29T08:52:14+00:00 heroku[api]: Deploy d9fdb17 by he610@doc.ic.ac.uk
2012-08-29T08:52:14+00:00 heroku[web.1]: State changed from crashed to starting 
2012-08-29T08:52:14+00:00 heroku[slugc]: Slug compilation finished
2012-08-29T08:52:16+00:00 heroku[web.1]: Starting process with command `node web.js`
2012-08-29T08:52:16+00:00 app[web.1]: bash: node: command not found
2012-08-29T08:52:17+00:00 heroku[web.1]: Process exited with status 127 
2012-08-29T08:52:17+00:00 heroku[web.1]: State changed from starting to crashed 
```

foreman 运行良好，根目录周围有几个 .php 文件（因为我正在移植一些旧代码），但我很确定 Procfiles 的逻辑应该允许这样做

根据要求，这是本地 npm install 的输出：

```
--[/DEBUG]--
jade@0.27.2 node_modules/jade
├── commander@0.6.1
└── mkdirp@0.3.0

express@3.0.0rc3 node_modules/express
├── methods@0.0.1
├── range-parser@0.0.4
├── fresh@0.1.0
├── cookie@0.0.4
├── crc@0.2.0
├── commander@0.6.1
├── debug@0.7.0
├── mkdirp@0.3.3
├── send@0.0.3 (mime@1.2.6)
└── connect@2.4.3 (pause@0.0.1, bytes@0.1.0, qs@0.4.2, formidable@1.0.11)

mime-magic@0.3.0 node_modules/mime-magic 
```

这是我推送时的 git 日志（它有点大，所以我链接了它）：

[http://pastebin.com/d424TBfR](http://pastebin.com/d424TBfR)

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-05T22:43:04.660

尝试删除您的 Procfile。

显然，Procfile 指示 heroku 使用它来运行应用程序，`node main.js`但 node 不是有效命令，因为它不包含在 PATH 变量或类似变量中。

通过删除 Procfile，heroku 检测到该应用程序是一个流星应用程序，并使用具有完整路径的节点二进制文件运行它。

另外，请记住`ROOT_URL`必须以 http:// 开头

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-11-12T21:08:05.737

这些命令解决了这个问题

```
heroku buildpacks:set heroku/nodejs
git commit -am "empty" --allow-empty
git push heroku master 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T23:54:36.577

Libmagic（mime-magic 需要）期待与 heroku 提供的不同版本的 libc。您将需要找到一个替代库或自己为 heroku 的 libc 版本编译它。

# mysql - 零件数据库 - 网络模型/分层模型/嵌套集/无环图。哪个在这里？

> ID：12174331
> 
> 赞同：1
> 
> 时间：2012-08-29T09:05:40.777
> 
> 标签：mysql, hierarchical-data, nested-sets, directed-acyclic-graphs

我们正在使用 PHP / SQL 构建一个零件数据库，该数据库将输出为树结构。在开始使用嵌套集模型进行编码之后，我们意识到我们需要调整模型以允许多个父级。

实际上，每个子节点可以有多个父节点，每个父节点可以有多个子节点，但每个节点不能是它自己的亲戚。我们希望将零件集合 (A) 链接到父零件并创建更大的零件 (B)，同时保持原始集合 (A) 隔离。该部分集合 (A) 可以在另一个部分树中使用，但是对部分集合 (A) 的任何更改都会调整它存在于其中的所有实体。

我们使用类似于邻接模型的依赖链接和每个部分的唯一树 ID 修改了嵌套模型，这允许单个树从中构建。

这可以完美地链接零件，但是在取消链接零件时会出现问题。E 部分可以是 D 部分和 C 部分的一部分。当 C 部分链接到 B 部分时，没有经过遍历就没有到 E 部分的唯一路径，树越大越广泛。

有没有最适合这样的零件数据库的模型？我们已经研究了问题标题中的方法以及混合这些模型的潜力，但目前尚不清楚哪种方法或组合适合此目的。

非常感谢任何输入。谢谢。

# ms-access - Microsoft Access 中的 Sql 查询

> ID：12174341
> 
> 赞同：0
> 
> 时间：2012-08-29T09:06:09.443
> 
> 标签：ms-access

我用 Microsoft Access 编写了这个查询：

```
SELECT p.artnbr                            AS [Number], 
   p.name                              AS Name, 
   s.sizename                          AS Sizes, 
   s.sizeindex                         AS SizeIndex, 
   s.oid                               AS SizeId, 
   l.name                              AS LocationName, 
   (SELECT od.quantity 
    FROM   orderdetails od 
    WHERE  od.ORDER = (SELECT o.oid 
                       FROM   [order] o 
                       WHERE  o.active = -1 
                              AND o.location = l.oid) 
           AND od.productsize = s.oid) AS Quantity 
FROM   [size] AS s 
   INNER JOIN (product AS p 
               INNER JOIN (favorite AS f 
                           INNER JOIN location AS l 
                                   ON f.customer = l.customer) 
                       ON p.oid = f.product) 
           ON p.oid = s.product 
WHERE  f.customer = @customer 
```

下面的链接显示了我使用的表格及其关系。 [https://dl.dropbox.com/u/18377860/QueryTables.png](https://dl.dropbox.com/u/18377860/QueryTables.png)

此查询返回正确的结果，但如您所见，我正在使用子查询来获取数量。我不知道如何使用连接语句而不是那个长子查询来重写这个查询。任何帮助，将不胜感激。
问候

编辑：为了更清楚，我的查询需要获取（产品、尺寸、位置）的所有唯一组合，无论它们是否有 [Order] 并显示订购数量。如果特定组合的订单不存在，则数量应为空。

EDIT2：我设法构建了查询，它看起来像这样：

```
SELECT p.ArtNbr                    AS [Number], 
   p.Name                          AS Name, 
   s.SizeName                      AS Sizes, 
   s.SizeIndex                     AS SizeIndex, 
   s.Oid                           AS SizeId, 
   l.Name                          AS LocationName, 
   so.qty                          AS Quantity
FROM ([Size] AS s 
         INNER JOIN (Product AS p 
               INNER JOIN (Favorite AS f 
                           INNER JOIN Location AS l 
                                   ON f.Customer = l.Customer) ON p.OID = f.Product) 
                       ON p.OID = s.Product) 
      LEFT JOIN 
          (SELECT od.ProductSize       AS PS, 
                  od.Quantity          AS qty, 
                  o.Location as Location 
           FROM OrderDetails AS od INNER JOIN [Order] AS o ON od.Order = o.OID 
           WHERE o.Active = -1)  AS so ON so.PS = s.OID
WHERE f.Customer = @customer AND (l.OID = so.Location OR so.Location is null) 
```

我确实像马特说的那样，我将子查询移到 FROM 部分，我在派生表的选择查询中包含 ProductSize 和 Location，然后将结果与“Size”表链接，最后我在 where 部分添加了一个条件以消除每个位置的相同记录的重复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T09:02:11.790

我设法构建了查询，它看起来像这样：

```
SELECT p.ArtNbr                    AS [Number], 
   p.Name                          AS Name, 
   s.SizeName                      AS Sizes, 
   s.SizeIndex                     AS SizeIndex, 
   s.Oid                           AS SizeId, 
   l.Name                          AS LocationName, 
   so.qty                          AS Quantity
FROM ([Size] AS s 
         INNER JOIN (Product AS p 
               INNER JOIN (Favorite AS f 
                           INNER JOIN Location AS l 
                                   ON f.Customer = l.Customer) ON p.OID = f.Product) 
                       ON p.OID = s.Product) 
      LEFT JOIN 
          (SELECT od.ProductSize       AS PS, 
                  od.Quantity          AS qty, 
                  o.Location as Location 
           FROM OrderDetails AS od INNER JOIN [Order] AS o ON od.Order = o.OID 
           WHERE o.Active = -1)  AS so ON so.PS = s.OID
WHERE f.Customer = @customer AND (l.OID = so.Location OR so.Location is null) 
```

我确实像马特说的那样，我将子查询移到 FROM 部分，我在派生表的选择查询中包含 ProductSize 和 Location，然后将结果与“Size”表链接，最后我在 where 部分添加了一个条件以消除每个位置的相同记录的重复。

# java - Android 中的向后兼容性和 SDK 更新

> ID：12174349
> 
> 赞同：2
> 
> 时间：2012-08-29T09:06:21.447
> 
> 标签：java, android, android-asynctask

由于我需要`AsyncTask.executeOnExecutor()`针对 的函数，因此`SDK level 7`我采用了最后一个`ASyncTask`代码并创建了一个`mAsyncTask`类。

我想使用`mAsyncTask`if`API level is < 11`和 A​​ndroid 的默认值`AsyncTask`（以便抓住未来的 SDK 更新。

由于`AsyncTask`扩展的定义可能需要很多行。`mAsyncTask`复制/粘贴并扩展每个类（和`AsyncTask`）然后在运行时执行一个或另一个是丑陋且难以维护的。

有什么技巧可以用来避免这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:10:44.743

由于您不能使用 relfexion 子类化“真正的” AsyncTask，因此唯一的方法是创建单独的 APK。

# java - 如果返回值取决于阻塞操作的结果，方法是否会阻塞？

> ID：12174350
> 
> 赞同：1
> 
> 时间：2012-08-29T09:06:21.507
> 
> 标签：java, android, multithreading, file, blocking

我在继承自 Thread 类的类中编写了以下方法：

```
protected File createFile(String fileName){
        try {
            File file = new File(fileName);
            if(!file.exists())
                file.createNewFile();
            else{
                file.delete();
                file.createNewFile();
            }
            file.mkdirs();
            return file;
        }catch (IOException e) {
            e.printStackTrace();
            return null;
        }
    } 
```

一旦线程已经启动，它将从活动中调用。如果我从我的活动中这样做：

```
File logFile = mThread.createFile("/Logs/test.txt");
if(logFile!=null)
//do something
else
//do something else 
```

在创建文件之前它会阻塞吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:40:27.953

是的，它会阻塞。

重要的不是调用方法的类，而是调用它`run()`的线程的方法。有很大概率是

```
File logFile = mThread.createFile("/Logs/test.txt");
if(logFile!=null)
//do something
else
//do something else 
```

从您的活动`run`方法（由android处理）调用，并且直接从另一个线程类调用方法不会神奇地使该线程运行此方法。

为确保您不会使用此`createFile`方法阻止您的活动，您应该使用消息传递机制，以便在非活动线程`createFile`的方法中调用。`run()`

有关如何在线程之间传递消息，请参阅本文中的示例[。](https://stackoverflow.com/questions/3222375/message-passing)总而言之，您的活动线程将从您的其他线程设置一个变量。该线程定期检查此变量并根据它执行操作。[这是主要思想，但在网上](https://www.google.com/search?q=passing%20message%20between%20threads%20java)有很多关于线程安全和这些情况下出现的其他问题的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T18:04:03.250

Your`Activity`是一组由 Android 在 UI 线程上调用的回调方法。这些回调在生命周期内执行`Activity`（如文档中详细描述的那样）。在执行一个回调时，不会执行其他与 UI 相关的回调。

如果任何一个回调需要很长时间，那么 UI 就会停止响应（您经常会看到这被称为“UI 被阻止”）。

回答实际问题：是的，UI 线程将在等待您的回调完成时停止处理其他事件，包括对`createFile`方法的调用。

我在这里假设（因为从问题中不清楚）调用`createFile`是在`Activity`生命周期回调方法之一（如`onCreate`）或与相关的 UI 事件回调`Activity`（如`OnClickListener`附加到 a`Button`上`Activity`）。

* * *

如果您不想在创建文件时阻止 UI 线程，那么您将需要`createFile`从不同的“后台”线程执行调用。

**请注意**，如果您需要从“后台”线程对 UI 进行更新，则必须确保将对 Android UI API 的调用安排在 UI 线程上。

这可以使用`Thread`and`Handler`对象来完成，但使用 an 通常更方便，`AsyncTask`因为它提供了一个方便的方法框架，可以在后台任务和 UI 更新的正确线程上调用这些方法。

# java - 解组工作不正确：javax.xml.bind.UnmarshalException：意外元素

> ID：12174354
> 
> 赞同：2
> 
> 时间：2012-08-29T09:06:26.840
> 
> 标签：java, xml, jaxb

有异常

```
javax.xml.bind.UnmarshalException: unexpected element 
(uri:"", local:"ConnectorCommandType") 
```

试图解组 xml，如下所示：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?> 
  <ConnectorCommandType> ........ </ConnectorCommandType> 
```

该异常基本上表示在 jaxb 上下文中找不到该元素。但是调试表明这个类在当前的 jaxb 上下文中存在并且是已知的。类 ConnectorCommandType 是从 xsd xml 作为`<xs:complexType>`元素生成的。

xsd中可能有错误吗？

有没有人遇到过这样的问题？有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:13:04.037

解决方案取决于对以下问题的回答：

*类上是否有`@XmlRootElement(name="ConnectorCommandType")`注释`ConnectorCommandType`，或者类`@XmlElementDecl(name="ConnectorCommandType")`中的创建方法上有注释`ObjectFactory`？*

**如果答案是YES**

`package-info`您生成的模型中有一个吗？看起来好像您的[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现需要一个命名空间限定的文档。就像是：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ConnectorCommandType xmlns="YOUR_NAMESPACE_HERE">
     ........ 
</ConnectorCommandType> 
```

了解更多信息

*   [http://blog.bdoughan.com/2010/08/jaxb-namespaces.html](http://blog.bdoughan.com/2010/08/jaxb-namespaces.html)
*   [http://blog.bdoughan.com/2012/07/jaxb-and-root-elements.html](http://blog.bdoughan.com/2012/07/jaxb-and-root-elements.html)

**如果答案是否定的**

如果`ConnectorCommandType`元素没有与类关联，那么您将需要使用采用类参数的解组方法之一。

*   [http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/Unmarshaller.html#unmarshal%28javax.xml.stream.XMLStreamReader,%20java.lang.Class%29](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/Unmarshaller.html#unmarshal%28javax.xml.stream.XMLStreamReader,%20java.lang.Class%29)

# paypal - PayPal 加密按钮作为文本链接

> ID：12174358
> 
> 赞同：1
> 
> 时间：2012-08-29T09:06:43.683
> 
> 标签：paypal

我使用 PayPal Api 创建加密的 BuyNow 按钮。Api 返回按钮作为表单 HTML 代码。

```
<form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----MIIIWwYJKoZIhvcNAQcEoIIITDCCCEgCAQExggE6MIIBNgIBADCBnjCBmDELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExETAPBgNVBAcTCFNhbiBKb3NlMRUwEwYDVQQKEwxQYXlQYWwsIEluYy4xFjAUBgNVBAsUDXNhbmRib3hfY2VydHMxFDASBgNVBAMUC3NhbmRib3hfYXBpMRwwGgYJKoZIhvcNAQkBFg1yZUBwYXlwYWwuY29tAgEAMA0GCSqGSIb3DQEBAQUABIGAWicsbzx8E3DiwoiAmsPDgFMXMXw2Vv4brJMg0h+4q3XDYZIlUmqe68cz/G98LcdjCRPzdj8ysAL9omG+CajwB+6Lh1gU8XnqolRbY0qrj515o2aUbR4mIZnRVMpFakSuX/xB/yvy++Tjr/1bCltQAKDGltKO3SC4lAWuZmOnRwMxCzAJBgUrDgMCGgUAMIIBpQYJKoZIhvcNAQcBMBQGCCqGSIb3DQMHBAjebWIsZ7c0uYCCAYD1BBI60xmtUikWJcD9qEVSQAwTQQQP4gHXND31K3fHootn0Tp84WE8JBDYnYB8PXegdvZCTEpGd4+LEmz/20B+LL/rhqlphri3RmatJpPBI5YxpKKxslVskqQgvW6C0YhTaTCxqaU3e5jMVm5kAfDE1BvJnjTDDzie5mAMp0XutUu0oz7Fj3dn+h/BaxfVYLrwDo3pEOD307j+6PX+RI3KAsbMopFJ2RsmsBQmSLDgkfuHUr9zUYrySKKWWHKAI0llg0hlhXmNyaia3ukKOtdj0mEtkjpnbtbRaUOCscm9TBo6fxtnWlvhhO0iaLRSQEgeoe94dJg+feZ0/7yTa1l5Estb6SqdXKtzsVBnYFAiUpmIYl6u7Tk0ubaR/wPH8zeF1oPOfhnSMI8PNrdNvE3s4s9VQNTSA7I5jYOux78H44U3cuK5YNINqMaDMc0EEirV9YBm39agLLKzAr+WAGjJnarhTIUfpmWUx6ncz3V85ZViOu8XVP3NUhcUTfff66egggOlMIIDoTCCAwqgAwIBAgIBADANBgkqhkiG9w0BAQUFADCBmDELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExETAPBgNVBAcTCFNhbiBKb3NlMRUwEwYDVQQKEwxQYXlQYWwsIEluYy4xFjAUBgNVBAsUDXNhbmRib3hfY2VydHMxFDASBgNVBAMUC3NhbmRib3hfYXBpMRwwGgYJKoZIhvcNAQkBFg1yZUBwYXlwYWwuY29tMB4XDTA0MDQxOTA3MDI1NFoXDTM1MDQxOTA3MDI1NFowgZgxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMREwDwYDVQQHEwhTYW4gSm9zZTEVMBMGA1UEChMMUGF5UGFsLCBJbmMuMRYwFAYDVQQLFA1zYW5kYm94X2NlcnRzMRQwEgYDVQQDFAtzYW5kYm94X2FwaTEcMBoGCSqGSIb3DQEJARYNcmVAcGF5cGFsLmNvbTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAt5bjv/0N0qN3TiBL+1+L/EjpO1jeqPaJC1fDi+cC6t6tTbQ55Od4poT8xjSzNH5S48iHdZh0C7EqfE1MPCc2coJqCSpDqxmOrO+9QXsjHWAnx6sb6foHHpsPm7WgQyUmDsNwTWT3OGR398ERmBzzcoL5owf3zBSpRP0NlTWonPMCAwEAAaOB+DCB9TAdBgNVHQ4EFgQUgy4i2asqiC1rp5Ms81Dx8nfVqdIwgcUGA1UdIwSBvTCBuoAUgy4i2asqiC1rp5Ms81Dx8nfVqdKhgZ6kgZswgZgxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMREwDwYDVQQHEwhTYW4gSm9zZTEVMBMGA1UEChMMUGF5UGFsLCBJbmMuMRYwFAYDVQQLFA1zYW5kYm94X2NlcnRzMRQwEgYDVQQDFAtzYW5kYm94X2FwaTEcMBoGCSqGSIb3DQEJARYNcmVAcGF5cGFsLmNvbYIBADAMBgNVHRMEBTADAQH/MA0GCSqGSIb3DQEBBQUAA4GBAFc288DYGX+GX2+WP/dwdXwficf+rlG+0V9GBPJZYKZJQ069W/ZRkUuWFQ+Opd2yhPpneGezmw3aU222CGrdKhOrBJRRcpoO3FjHHmXWkqgbQqDWdG7S+/l8n1QfDPp+jpULOrcnGEUY41ImjZJTylbJQ1b5PBBjGiP0PpK48cdFMYIBpDCCAaACAQEwgZ4wgZgxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMREwDwYDVQQHEwhTYW4gSm9zZTEVMBMGA1UEChMMUGF5UGFsLCBJbmMuMRYwFAYDVQQLFA1zYW5kYm94X2NlcnRzMRQwEgYDVQQDFAtzYW5kYm94X2FwaTEcMBoGCSqGSIb3DQEJARYNcmVAcGF5cGFsLmNvbQIBADAJBgUrDgMCGgUAoF0wGAYJKoZIhvcNAQkDMQsGCSqGSIb3DQEHATAcBgkqhkiG9w0BCQUxDxcNMTIwODI5MDg1NTU1WjAjBgkqhkiG9w0BCQQxFgQUaBaJ4m2GzLbeacAcXs2DCghZIEgwDQYJKoZIhvcNAQEBBQAEgYB3vXv0Qlqda8ejg8FWLie/fvC9p8sk/TP+gBXnxi5sNPM0N9NTHp3Epu8qZR9FJVctrBkeF5BosIqhCfNe9HV12PFbv7N9jXSNJ8Dkr0TVtlAWhSmoeaDDHSm3uhYYJ4wcWImLSGufOdoE/cyGys8rxv7noJN6YjTfbgXbum9DZQ==-----END PKCS7-----
">
<input type="image" src="https://www.sandbox.paypal.com/en_US/i/btn/btn_buynow_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.sandbox.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form> 
```

问题是我不想将 FORM 用于 paypal 按钮，而且我也找不到更改嵌入在表单 html 代码中的默认 paypal 按钮的方法。我想使用加密的贝宝按钮作为简单的文本链接。

我试图只复制所有表单变量并使用以下参数构建 url

```
https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_s-xclick&encrypted=-----BEGIN PKCS7-----MIIIWwYJKoZIhvcNAQcEoIIITDCCCEgCAQExggE6MIIBNgIBAD..... 
```

不幸的是，它不起作用。也许有人有解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T03:00:28.517

您复制的链接错误。[它会正常工作。](https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_s-xclick&encrypted=-----BEGIN%20PKCS7-----MIIIWwYJKoZIhvcNAQcEoIIITDCCCEgCAQExggE6MIIBNgIBADCBnjCBmDELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExETAPBgNVBAcTCFNhbiBKb3NlMRUwEwYDVQQKEwxQYXlQYWwsIEluYy4xFjAUBgNVBAsUDXNhbmRib3hfY2VydHMxFDASBgNVBAMUC3NhbmRib3hfYXBpMRwwGgYJKoZIhvcNAQkBFg1yZUBwYXlwYWwuY29tAgEAMA0GCSqGSIb3DQEBAQUABIGAWicsbzx8E3DiwoiAmsPDgFMXMXw2Vv4brJMg0h%2b4q3XDYZIlUmqe68cz/G98LcdjCRPzdj8ysAL9omG%2bCajwB%2b6Lh1gU8XnqolRbY0qrj515o2aUbR4mIZnRVMpFakSuX/xB/yvy%2b%2bTjr/1bCltQAKDGltKO3SC4lAWuZmOnRwMxCzAJBgUrDgMCGgUAMIIBpQYJKoZIhvcNAQcBMBQGCCqGSIb3DQMHBAjebWIsZ7c0uYCCAYD1BBI60xmtUikWJcD9qEVSQAwTQQQP4gHXND31K3fHootn0Tp84WE8JBDYnYB8PXegdvZCTEpGd4%2bLEmz/20B%2bLL/rhqlphri3RmatJpPBI5YxpKKxslVskqQgvW6C0YhTaTCxqaU3e5jMVm5kAfDE1BvJnjTDDzie5mAMp0XutUu0oz7Fj3dn%2bh/BaxfVYLrwDo3pEOD307j%2b6PX%2bRI3KAsbMopFJ2RsmsBQmSLDgkfuHUr9zUYrySKKWWHKAI0llg0hlhXmNyaia3ukKOtdj0mEtkjpnbtbRaUOCscm9TBo6fxtnWlvhhO0iaLRSQEgeoe94dJg%2bfeZ0/7yTa1l5Estb6SqdXKtzsVBnYFAiUpmIYl6u7Tk0ubaR/wPH8zeF1oPOfhnSMI8PNrdNvE3s4s9VQNTSA7I5jYOux78H44U3cuK5YNINqMaDMc0EEirV9YBm39agLLKzAr%2bWAGjJnarhTIUfpmWUx6ncz3V85ZViOu8XVP3NUhcUTfff66egggOlMIIDoTCCAwqgAwIBAgIBADANBgkqhkiG9w0BAQUFADCBmDELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExETAPBgNVBAcTCFNhbiBKb3NlMRUwEwYDVQQKEwxQYXlQYWwsIEluYy4xFjAUBgNVBAsUDXNhbmRib3hfY2VydHMxFDASBgNVBAMUC3NhbmRib3hfYXBpMRwwGgYJKoZIhvcNAQkBFg1yZUBwYXlwYWwuY29tMB4XDTA0MDQxOTA3MDI1NFoXDTM1MDQxOTA3MDI1NFowgZgxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMREwDwYDVQQHEwhTYW4gSm9zZTEVMBMGA1UEChMMUGF5UGFsLCBJbmMuMRYwFAYDVQQLFA1zYW5kYm94X2NlcnRzMRQwEgYDVQQDFAtzYW5kYm94X2FwaTEcMBoGCSqGSIb3DQEJARYNcmVAcGF5cGFsLmNvbTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAt5bjv/0N0qN3TiBL%2b1%2bL/EjpO1jeqPaJC1fDi%2bcC6t6tTbQ55Od4poT8xjSzNH5S48iHdZh0C7EqfE1MPCc2coJqCSpDqxmOrO%2b9QXsjHWAnx6sb6foHHpsPm7WgQyUmDsNwTWT3OGR398ERmBzzcoL5owf3zBSpRP0NlTWonPMCAwEAAaOB%2bDCB9TAdBgNVHQ4EFgQUgy4i2asqiC1rp5Ms81Dx8nfVqdIwgcUGA1UdIwSBvTCBuoAUgy4i2asqiC1rp5Ms81Dx8nfVqdKhgZ6kgZswgZgxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMREwDwYDVQQHEwhTYW4gSm9zZTEVMBMGA1UEChMMUGF5UGFsLCBJbmMuMRYwFAYDVQQLFA1zYW5kYm94X2NlcnRzMRQwEgYDVQQDFAtzYW5kYm94X2FwaTEcMBoGCSqGSIb3DQEJARYNcmVAcGF5cGFsLmNvbYIBADAMBgNVHRMEBTADAQH/MA0GCSqGSIb3DQEBBQUAA4GBAFc288DYGX%2bGX2%2bWP/dwdXwficf%2brlG%2b0V9GBPJZYKZJQ069W/ZRkUuWFQ%2bOpd2yhPpneGezmw3aU222CGrdKhOrBJRRcpoO3FjHHmXWkqgbQqDWdG7S%2b/l8n1QfDPp%2bjpULOrcnGEUY41ImjZJTylbJQ1b5PBBjGiP0PpK48cdFMYIBpDCCAaACAQEwgZ4wgZgxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMREwDwYDVQQHEwhTYW4gSm9zZTEVMBMGA1UEChMMUGF5UGFsLCBJbmMuMRYwFAYDVQQLFA1zYW5kYm94X2NlcnRzMRQwEgYDVQQDFAtzYW5kYm94X2FwaTEcMBoGCSqGSIb3DQEJARYNcmVAcGF5cGFsLmNvbQIBADAJBgUrDgMCGgUAoF0wGAYJKoZIhvcNAQkDMQsGCSqGSIb3DQEHATAcBgkqhkiG9w0BCQUxDxcNMTIwODI5MDg1NTU1WjAjBgkqhkiG9w0BCQQxFgQUaBaJ4m2GzLbeacAcXs2DCghZIEgwDQYJKoZIhvcNAQEBBQAEgYB3vXv0Qlqda8ejg8FWLie/fvC9p8sk/TP%2bgBXnxi5sNPM0N9NTHp3Epu8qZR9FJVctrBkeF5BosIqhCfNe9HV12PFbv7N9jXSNJ8Dkr0TVtlAWhSmoeaDDHSm3uhYYJ4wcWImLSGufOdoE/cyGys8rxv7noJN6YjTfbgXbum9DZQ==-----END%20PKCS7-----%0D%0A)

但是，托管按钮要好得多。并可通过[ButtonManager API](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_ButtonMgrAPIIntro)进行编辑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T20:11:59.587

在 BMCreateButton API 调用中，设置 BUTTONTYPE=HOSTED，而不是 BUTTONTYPE=ENCRYPTED。它在安全方面将是相同的，但它也会返回一个“EMAILLINK”，然后您可以使用它。

BUTTONTYPE=ENCRYPTED 很遗憾不会返回 EMAILLINK。

此外，如果您在链接中包含完整的加密文本，您可能会遇到 Apache 中的 LimitRequestLine 限制（默认值：8190），具体取决于您的 Apache 配置。
保持 URL 尽可能短会好得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-19T14:46:46.743

我遇到了同样的问题，我`urlencode`得到了加密的值并且它起作用了。我希望这对遇到相同问题但不想使用 API 制作托管按钮的其他人有所帮助。

# eclipse - m2e 附加配置

> ID：12174364
> 
> 赞同：2
> 
> 时间：2012-08-29T09:06:58.800
> 
> 标签：eclipse, maven, m2e

当我使用 m2e 插件构建 eclipse 配置文件`.classpath`时，我需要编写一些额外的配置文件。

例如，我需要编写一个 flex 文件`.actionScriptProperties`。

我可以使用`maven-eclipse-plugin`with`additionalConfig`配置来做到这一点，但与 eclipse ide 的集成并不是很好。

我可以用 m2e 做到这一点吗？

我可以在更新项目按钮中调用 eclipse 目标吗？

# ios - 带有 navigationController 的 UIViewPopover 的 viewWillDisappear 方法

> ID：12174366
> 
> 赞同：0
> 
> 时间：2012-08-29T09:07:01.660
> 
> 标签：ios, xcode, uinavigationcontroller, uipopovercontroller

我正在开发一个显示弹出框的应用程序。此弹出框包含两个带有导航控制器的视图。这是导航层次结构：

```
--(row)-->   PopoverView1   --(barButton)-->   PopoverView2 
```

当我在弹出框之外点击时，我也想保存 PopoverView1 中包含的数据。问题是当我导航到 PopoverView2 时，也会调用 viewWillDisappear 并且弹出框会关闭。

感谢并为我的英语感到抱歉；）

# c# - 从外键获取集合

> ID：12174367
> 
> 赞同：0
> 
> 时间：2012-08-29T09:07:01.813
> 
> 标签：c#, sql-server, entity-framework, linq-to-entities

在这样的两个表中

```
table Person
{
    int Id -> primary key
    varchar name
    varchar nick
    int GroupId -> foreign key
}

table Group
{
    int Id -> primary key
    varchar name
} 
```

如果我使用

```
var result = (from c in myDataBase.Group
             select c).ToList<Group>(); 
```

我只得到组列表，但字段`System.Data.Objects.DataClasses.EntityCollection<Person>`为空。我应该如何更改查询以获取人员列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:10:41.610

目前还不清楚必须在哪里`System.Data.Objects.DataClasses.EntityCollection<Person>`，但我想*你*正在寻找[内连接](http://msdn.microsoft.com/en-us/library/bb397941.aspx)

```
 var query = from person in people
                join group in groups on person.GroupId equals group .Id
                select new {.. something... }; 
```

在这里，我*假设*您有某个地方`people`（`Person` 类型集合），并且想要从该集合中找到所有人员以及他们从相关的匹配信息 `Group`。

如果这不是您要的，请澄清。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:08:27.210

我解决了以下问题：

```
myDataBase.Group.Include("Person").Select(a => a).ToList(); 
```

顺便说一句：`Include()`linq 查询中的等价物是什么`from...where...select`？

# php - 我的 .htaccess 中的错误！文件

> ID：12174370
> 
> 赞同：0
> 
> 时间：2012-08-29T09:07:14.167
> 
> 标签：php, .htaccess

我的 .htaccess 文件的重写引擎有问题，我使用这个文件将 url`site.com/name.php?n=ahmad` 从`site.com/ahmad`

* * *

```
RewriteEngine On
RewriteRule ^([a-zA-Z0-9_-]+)$  name.php?n=$1
RewriteRule ^([a-zA-Z0-9_-]+)/$ name.php?n=$1u 
```

* * *

当我在那些状态下调用页面时我的错误我有空白页：

1.  `site.com/ahmad.s`
2.  `site.com/english/` 我网站上的英文文件夹，但我无法显示。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T09:17:30.680

```
RewriteEngine On

# Allow any files or directories that exist to be displayed directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^([a-zA-Z0-9_-.]+)$  name.php?n=$1 [QSA,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:17:31.330

将您的规则更改为：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-z0-9._-]+)/?$ /name.php?n=$1 [L,NC] 
```

# php - 存储在本地文件夹中的条形码图像不起作用

> ID：12174374
> 
> 赞同：0
> 
> 时间：2012-08-29T09:07:32.497
> 
> 标签：php, barcode

我在我的网站中使用了条形码生成。当我在 HTML 标签中使用它时，它工作正常。

```
<div class="barcode_img"><img src="<?php echo AT::getUrl(); ?>/barcode/image.php?code=code39&o=1&dpi=150&t=30&r=1&rot=0&text=TEST NAME WITH SPACE&f1=Arial.ttf&f2=10&a1=&a2=&a3=" class="barcode fr"/></div> 
```

我需要将该图像存储在名为“media/barcode/”的本地文件夹中。为此，我使用了以下代码：

```
$valid_barcodename="testimage";
$barcodeurl = AT::getUrl() . "barcode/image.php?code=code39&o=1&dpi=150&t=30&r=1&rot=0&text=TEST NAME WITH SPACE&f1=Arial.ttf&f2=10&a1=&a2=&a3=";
        $barcode_img = 'media/barcode/testing_' .$valid_barcodename . '.png';
        file_put_contents($barcode_img, file_get_contents($barcodeurl)); 
```

存储在该文件夹中的图像不为空。当我分析它时，我发现，如果我在没有空格的情况下命名为“TEST NAME WITH SPACE”（TESTNAMEWITHSPACE），它就可以工作。

但是，如果我给它空间，它就行不通了。问题是什么？

注意： AT::getUrl() - 用于获取我的基本 url。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:12:53.047

空格在 URL 中具有特殊含义，因此您必须对它们进行编码：

```
$text = urlencode("TEST NAME WITH SPACE")
$barcodeurl = AT::getUrl() . "barcode/image.php?code=code39&o=1&dpi=150&t=30&r=1&rot=0&text=". $text ."&f1=Arial.ttf&f2=10&a1=&a2=&a3="; 
```

在上面的代码中，`$text`现在包含您的文本，已编码并准备在您的 URL 中使用（您会注意到空格已被`%20`代码替换）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T09:42:49.503

> 注意：如果您要打开带有特殊字符（例如空格）的 URI，则需要使用 urlencode() 对 URI 进行编码。

[http://docs.php.net/file_get_contents](http://docs.php.net/file_get_contents)

或者，如果在您的服务器上启用，您可以使用 cURL。

```
function curl($url, $setopt = array(), $post = array())
{
    $curl = curl_init();
    curl_setopt($curl, CURLOPT_URL, $url);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($curl, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, 0);
    curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, 2);
    if( ! empty($post))
    {
        curl_setopt($curl, CURLOPT_POST, 1);
        curl_setopt($curl, CURLOPT_POSTFIELDS, $post);
    }
    if( ! empty($setopt))
    {
        foreach($setopt as $key => $value)
        {
            curl_setopt($curl, constant($key), $value);   
        }
    }
    $data = curl_exec($curl);
    curl_close($curl);
    return $data;
} 
```

用法：

```
file_put_contents($barcode_img, curl($barcodeurl)); 
```

# css - 类取决于其他

> ID：12174377
> 
> 赞同：1
> 
> 时间：2012-08-29T09:07:36.663
> 
> 标签：css

我有一个名为的 Css 属性

```
.Zero
{
width:100px;
} 
```

我有另一个电话

```
.One 
```

我需要第一类是同一类（零）+ 10 px 例如

如果零类 = 500

一级 = 510

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:26:36.867

据我了解这样写：

```
.Zero,.One
 {
 width:100px;
 }
.One{
 padding-right:10px;
} 
```

你也可以使用javascript。像这样写：

```
var modWidth = $('.Zero').width();
$('.one').css({width: modWidth + 10}); 
```

检查这个[http://jsfiddle.net/mweEh/](http://jsfiddle.net/mweEh/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:26:46.050

仅使用 css 是不可能的，但您可以使用[SCSS - http://sass-lang.com/](http://sass-lang.com/)

它将允许您分配一个变量并用作

```
$width: 500;

.Zero{
  width: $width;
}

.one{
  width: $width + 10;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T09:18:56.760

据我所知，单独使用 CSS 是不可能做到这一点的。你应该使用 javascript+css 来做到这一点。

# c# - .NET 的图形数据库，它对我们的案例有帮助吗？

> ID：12174379
> 
> 赞同：0
> 
> 时间：2012-08-29T09:07:38.493
> 
> 标签：c#, .net, database, graph, graph-databases

我们的应用程序的简短描述：我们分析 .NET 程序集并检测它们之间的依赖关系（例如方法调用）。我们将这些依赖项保存在 MSSQL 服务器数据库中。从代码中的类/方法中，我们现在可以找到所有直接和间接的依赖关系，并且能够找出如果我们更改接口或实现，哪些代码可能会中断。

尽管我们充分利用了索引（降低了我们的导入性能，但无论如何都会在一夜之间运行），但我们仍然存在性能问题。当我们导入同一个程序集的许多版本时，我们有大量的数据，查询需要几秒钟，这还不够快（目标是<1.5s）。

由于依赖项是一种类似图的结构，我们想知道从 MSSQL 切换到 NoSQL 图数据库是否会有所帮助。这需要一些时间，所以我们希望首先有一些外部输入。

如果是，您当然也可以发布推荐的 .NET 图形数据库 :-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:39:12.993

称我为老家伙，但我会非常小心地进行这样的技术转换 - 正如这个[SO 问题](https://stackoverflow.com/questions/11299179/what-net-compatible-graph-database-solutions-have-a-proven-track-record)所示，技术选择相当有限，我认为你冒着将项目变成“Neo4J”项目的风险，而不是而不是“依赖管理”项目。如果你真的达到了缓冲区，那值得考虑，但听起来你不应该在那里讨论你正在讨论的数据量。

我要考虑的第一件事是查看[“嵌套集”模型](http://www.ibase.ru/devinfo/DBMSTrees/sqltrees.html)- 这专门解决了检索给定节点的所有子节点时的性能问题。

# mysql - Ruby CSV：如何将 nil 字段写为 \N

> ID：12174383
> 
> 赞同：0
> 
> 时间：2012-08-29T09:07:48.370
> 
> 标签：mysql, ruby, csv

我想用 ruby​​ 的默认 CSV 库编写一个 CSV，以便使用 MySQL 的快速导入 LOAD DATA INFILE。

目前，当我为一个字段输入 nil 时，它写为`...;;...`，而不是我希望它是`...;\N;...`（大写 N 表示 NULL，不要与 \n 换行符混淆）。

```
CSV.open(product_updates_file_name, "wb", {col_sep: ";", headers: false, force_quotes: false}) do |product_csv|
    product_csv << ["foo", nil, "bar"]
end 
```

它目前导致十进制字段在数据库中加载为 0.00 而不是 NULL。

我知道，之后我可以将其设置为 NULL，但是有数百万行和几列受到影响，所以我强烈希望按照 MySQL 的预期编写 CSV：

[http://dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:05:15.960

You could modify the CSV-methods:

```
require 'csv'
class Array
  alias :old_to_csv :to_csv
  #Extend to_csv for usage like ["foo", nil, "bar"].to_csv( :col_sep => ";")
  def to_csv(options)
    self.map{|s| s.nil? ? '\N' : s }.old_to_csv 
  end
end  

class CSV
  alias :old_push :<<
  def <<(data)
    case data
      when Array
        old_push data.map{|s| s.nil? ? '\N' : s }
      else
        old_push data
      end
  end
end

#Testcode:
puts ["foo", nil, "bar"].to_csv( :col_sep => ";")   #--> [["foo", "\\N", "bar"]]
CSV.open('test.csv', "wb", 
      {col_sep: ";", headers: false, force_quotes: false }
  ) do |product_csv|     
    product_csv << ["foo", nil, "bar"] 
end 
#-> Creates test.csv with 'foo;\N;bar' 
```

This works only, if you insert Arrays. If you insert other stuff, you must modify the logic.

* * *

Remark: My first idea was to use a converter. But it worked only for parsing a csv, not for writing.

```
CSV::Converters[:nil_N] = lambda{|s| 
  s.nil? ? '\N' : s
}
p CSV.parse('foo;;bar', :col_sep => ";",  :converters => :nil_N)
#-> [["foo", "\\N", "bar"]] 
```

Perhaps somebody else knows a way to use converters to build csv-files.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:35:02.720

尝试像这样覆盖`nil`'s`to_s`方法：

```
class << nil
  def to_s
    "my nil placeholder text"
  end
end 
```

所有使用的代码`to_s`都将使用此实现作为值 nil。

# java - java - 向正则表达式添加长度约束

> ID：12174384
> 
> 赞同：0
> 
> 时间：2012-08-29T09:07:49.897
> 
> 标签：java, regex, alphanumeric

我需要一个正则表达式来匹配长度为 11 的字母数字 ASCII 字符串。目前我正在使用这个正则表达式：`^\p{ASCII}*$`。

有没有办法给它添加一个长度约束？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:09:38.350

这应该可以解决问题：

```
^\p{ASCII}{0,11}$ 
```

这意味着您最多有 11 个字符。

如果你只需要 11\. 你使用：

```
^\p{ASCII}{11}$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T09:10:21.583

是的，使用`{n,m}`量词。例如，`^\p{ASCII}{11}$`。虽然我不知道是什么`\p{ASCII}`，但试试`[[:ascii:]]`or `[[:alpha:]]`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T09:09:56.327

您可以使用（我怀疑您至少需要一个字符）

```
^\p{ASCII}{1,11}$ 
```

或者如果它的长度必须为 11

```
^\p{ASCII}{11}$ 
```

# zend-framework - 是否可以对 Zend Lucene 搜索结果进行 GROUP BY？

> ID：12174391
> 
> 赞同：0
> 
> 时间：2012-08-29T09:08:04.713
> 
> 标签：zend-framework, lucene

我一直在寻找是否可以对 Zend Lucene 搜索结果进行类似于 MySQL 的 GROUP BY 过滤器，这样如果它返回一些具有相同指定字段的行，它只会返回 1 行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:26:22.450

我不确定 Zend，但在 Lucene/Solr 世界中，此功能称为“字段折叠”。

几点建议：

*   [代码示例](http://www.searchworkings.org/blog/-/blogs/search-result-grouping-field-collapsing-in-lucene-solr)
*   [JIRA 问题](https://issues.apache.org/jira/browse/LUCENE-1421)
*   [分组收集器](http://lucene.apache.org/core/3_6_1/api/contrib-grouping/org/apache/lucene/search/grouping/BlockGroupingCollector.html)

# .net - RESTful 身份验证。客户端，无状态的未认证

> ID：12174393
> 
> 赞同：5
> 
> 时间：2012-08-29T09:08:06.277
> 
> 标签：.net, rest, authentication, .net-4.5, c#-5.0

我正在为一些开发实现一组 RESTful 服务，其中一个是**身份验证服务**。

此**身份验证服务**对两种身份进行身份验证：

*   **应用程序**。*基于 AppKey 的身份验证，因此客户端必须注册密钥才能访问其余服务*。
*   **用户**。*基于众所周知的凭据（用户+密码）的用户身份验证，因此人类和机器可以通过客户端应用程序使用这些 RESTful 服务。*

这些 RESTful 服务**是*无状态***的。

当客户端应用程序针对**身份验证服务**进行身份验证时，或者当人或机器使用凭据作为身份进行身份验证时，这两个操作都会分别生成**AppToken**和**UserToken**。

这些令牌是加盐哈希，因此对 RESTful 基础架构的后续请求将在不共享*AppKey*和*凭据*的情况下进行身份验证。

从完全无状态方法的角度来看，这些令牌不应该存储在服务层的任何位置，而是以某种客户端状态（fe，Web 客户端将使用*HTTP cookie*存储它）。**这就是我当前的实现现在的工作方式**。

*因为使用这些令牌*重新验证每个请求并让服务层接收来自客户端的令牌，因此它可以比较*来自客户端的令牌*并*检查它是否是在服务层重新生成它的有效令牌并与客户拥有的*太贵了，我已经实现了一个服务层**AppToken**和**UserToken**，两者都有一个到期日期和一个所有者（为其创建令牌的应用程序或用户），以检查令牌是否来自客户端的存在于令牌存储中。

*客户端如何以交互方式取消身份验证？* **只是删除客户端安全状态**。如果是 Web 客户端，它会丢弃身份验证 cookie 并刷新页面，客户端检测到没有身份验证 cookie 并将用户重定向到登录页面。

从 RESTful 服务的角度来看，*这是一种无状态的非身份验证*：客户端不知道拥有服务层伪身份验证状态的*技巧。***它只是一个服务实现细节——一个性能优化——。**

我不会列出无状态服务的*优点*，因为我绝对确定这种方法是可行的，但我发现了一个问题：**无状态身份验证/未身份验证意味着客户端不会通知服务器他们关闭会话，所以安全存储以很多无用的记录结束**。

如果服务客户端的会话时间有限（fe、1 小时、3 小时、一天...），这不是一个大问题，但是**如果用户必须*永远进行身份验证（8 个月、一年）会发生什么)* ?** . **你如何区分*什么是过期的令牌？***

有一些方法可以解决这种情况：

1.  **每当服务层收到请求时，它都会更新令牌到期日期，因此自动化过程可能会丢弃那些已过期的令牌，定义令牌的任意到期时间（fe 24 小时）**。

2.  **妥协架构的无状态特性，让客户端通知服务层他们不想再被验证，因此服务可以将关联的令牌丢弃到客户端会话**（*但是等等......如果客户端关闭 Web 客户端会发生什么？用户永远不会主动通知服务必须丢弃令牌......所以......僵尸令牌还在那里，所以自动化过程应该丢弃它们，但是......什么是僵尸令牌？**我不喜欢这种方法**）*。

3.  **完全无状态身份验证，无存储，按请求身份验证。**

**这就是问题！你建议的方法是什么 - 即使不是 1.、2\. 或 3\. - 为什么？**

感谢您的长时间阅读-老实说，我相信该问题的结论对任何人都非常有用-！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T07:04:29.470

### 第三

无状态身份验证，基于令牌。假设传输级加密。

*   `[X]S[S]`-- X 由 S 的公钥签名
*   `[X|Y]`-- X 和 Y 在同一个信封中
*   `Y [M]S[Y] -> S`-- Y 将签名消息 M 发送给 S。

**目标：** 客户 C 希望与服务 S 通话。

1.  客户端 C 将其共享密钥或公钥发送给服务 A，C 知道服务 A 的端点和公钥 ( )。`PK[C]``PK[A]`

2.  `A [now + interval | user-id or PK[C]]S[A] -> C`

    解释：

    服务 A 为当前日期/时间添加一个间隔作为到期。在要发送的缓冲区中现在是到期日期和用户 ID （假设您有一个有效的身份提供者）。`PK[C]`

    `[now + interval | user-id or PK[C]] = T`

    A 签名；

    `[T]S[A]`

3.  客户端 C 希望与后端服务 S 对话。

4.  `C [[M|[T]S[A]]S[C] -> S`

    C 将消息 M 和它从 A 签署的令牌发送到服务 S。

5.  S 关心 C 确实发送了它，并验证了它从信封中读取的 C 的签名。`S[C]`

    S 验证令牌的签名。失败意味着请求被拒绝。`S[A]`

    S 验证令牌：用户 ID/正确且令牌日期 >= 现在。过期令牌意味着向客户端 C 发送“令牌过期”消息。如果令牌签名错误，则权限被拒绝。`[T]S[A]``PK[C]`

    （可选；S 授权 C，题外话）

6.  S 执行工作并发送回客户端 C。`[M[2]]S[S]`

这不会有太多开销；验证签名是一个非常快的操作。

## 证书

问题“ [C# Sign Data with RSA using Bouncy Castle](https://stackoverflow.com/a/8845111/63621) ”显示了您如何签署和验证一段字符串，即您发送的消息。

您将需要证书；如果您正在使用配置管理器（您应该这样做！;)），例如 puppet，那么您[创建一个证书签名请求 (CSR)](http://www.openssl.org/docs/HOWTO/certificates.txt)，然后[使用 puppet 对其进行签名](http://docs.puppetlabs.com/man/cert.html)。

### 特别是关于*未经*身份验证的帖子

有一种叫做*证书撤销请求*的东西，它基本上是一个已被撤回且不被信任/使用的公钥的洗衣清单。放在那里并广播撤销，它基本上通过要求客户端进行另一轮*证书签名请求来执行。*`PK[C]`

 *此外，如果您希望能够使特定*令牌*`T`过期，请在创建令牌时向令牌添加唯一 ID (UUID/GUID) ，并拥有一个*令牌撤销列表*，在更改时类似地广播，您可以在令牌 UUID 时清除它们到期。因此，如果接收到的 T 在其中，服务还将检查*令牌撤销列表。*

## 基于哈希的令牌

看看软件巨头在做什么。例如 Amazon 的 REST 接口，它使用共享密钥：

> Amazon S3 REST API 使用基于密钥 HMAC（哈希消息身份验证代码）的自定义 HTTP 方案进行身份验证。要对请求进行身份验证，您首先连接请求的选定元素以形成一个字符串。然后，您使用您的 AWS 秘密访问密钥来计算该字符串的 HMAC。非正式地，我们将此过程称为“签名请求”，我们将 HMAC 算法的输出称为“签名”，因为它模拟了真实签名的安全属性。最后，使用本节中描述的语法将此签名添加为请求的参数。

[阅读有关亚马逊计划的更多信息。](http://docs.amazonwebservices.com/AmazonS3/latest/dev/RESTAuthentication.html)

## 上面的颠覆/攻击向量

*   我最初描述的方案需要 SSL，它容易受到众多证书颁发机构[以及许多其他东西的](https://www.google.com/search?hl=en&q=site:theregister.co.uk%20ssl%20vulnerability)攻击。
*   您很容易受到重放攻击，即中间人重新发送消息。如果您的 REST 接口是*幂等*的，那么您是安全的。如果您向请求添加服务器已知的加密*随机数*，您也是安全的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-04T09:50:11.090

**选择的方法：完全无状态的身份验证和非身份验证**

最后，我得到了一个结论和一个*协议*，以便切换到整个完全无状态的基于令牌的身份验证和非身份验证。

***如何实现？***

首先，这是您需要对应用程序进行基于令牌的无状态身份验证（但用户身份验证将以相同的方式工作，不包括此清单）：

*   一个应用程序注册系统。应用程序是对您的服务的访问。它是“您的应用程序访问网络上的某些服务（内联网、互联网、云......）。这是创建*应用程序密钥*（跳过此进行用户身份验证）。
*   服务器证书，因此客户端到服务的连接使用 HTTPS/SSL 进行加密。

这是验证应用程序的流程：

1.  客户端向身份验证服务发送身份验证请求。此请求必须包含**应用程序密钥 (AppKey)**。

2.  身份验证服务接收先前发送的请求。

3.  现在，身份验证服务创建一个*应用程序令牌*(AppToken)，它是必要信息的自描述串联，用于跟踪具体的经过身份验证的客户端到依赖于身份验证服务的服务。

4.  *AppToken*是一个复合字符串（*这个组合可以是一个使用 JSON 序列化的对象*）：

    *   应用程序哈希（*a SHA - 或其他 - 这是连接一些应用程序信息的结果。这个信息将是服务机密 +*到期日期*（它是令牌本身的一部分）。**为什么到期日期？**。想象一下中间人或其他东西可以破坏安全并修改令牌的过期时间？当加密令牌被解密以验证请求时，再次哈希过期日期+ AppKey的结果将不再产生相同的哈希，因此令牌无效。
    *   **发行日期**。创建令牌时的当前 UTC 日期+时间。
    *   **到期日**。令牌将不再有效的 UTC DateT+Time。
5.  身份验证服务加密第 4 步结果（JSON 序列化对象）。**使用 AppKey 作为对称密码的密钥或密码。就我而言，我将为此使用 Rijndael。

6.  后续请求将包含此令牌以避免发送纯文本凭据。这些请求也将始终包含**AppKey**，因此身份验证服务将能够识别正在尝试对请求进行身份验证的应用程序。

7.  一段时间后，令牌过期或无效，客户端请求新的 AppToken。或者客户端被用户关闭并且没有可以保存安全令牌的持久存储，因此下一个客户端会话将在需要时请求新的。

* * *

有关此类身份验证方法的 .NET 实现的一些提示和详细信息：

*   我已经使用`System.Security.Cryptography.RijndaelManaged`类进行对称加密。AppKey 和 AppToken （在基于令牌的用户身份验证的情况下，它几乎是相同的解决方案）都是使用`RijndaelManaged`类生成的。

*   加密文本被转换为 HEX 字符串。这与身份验证响应一起发送。在我们的例子中（一个 RESTFul API），代表*AppToken*的 HEX 字符串将作为响应头发送。每当请求包含此 HEX 字符串时，身份验证过程会将其重新转换为原始加密文本，然后将其解密以评估令牌是否有效。

* * *

*感谢 Henrik 的努力。我在您自己的答案中采用了一些概念，并将它们与我自己的结论混合在一起。**

# mod-rewrite - Mod重写子文件夹中的子文件夹

> ID：12174396
> 
> 赞同：3
> 
> 时间：2012-08-29T09:08:17.340
> 
> 标签：mod-rewrite, subdirectory

这是我在网络服务器上的文件结构：

```
DOCUMENT_ROOT/
  foo/
    www/
    .htaccess
  bar/
  index.php 
```

`foo/.htaccess`如果我想将所有内容从`www.myserver.com/foo/www/`to重定向，我应该写什么`www.myserver.com/foo/`？

我试过这个：

```
RewriteEngine On
RewriteRule ^(.*)$ /www/$1 [L,NE] 
```

但始终显示错误 404。我尝试使用 RewriteBase 进行详细说明也没有成功。

非常感谢

PS 当`www/`和`.htaccess`在 DOCUMENT_ROOT 中时，它可以正常工作。但是当我把它们放到子文件夹中时，总是得到错误 404 :-(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T09:28:34.937

> 是的，我想去`http://www.myserver.com/foo/`拿东西`/foo/www`

如果您的 htaccess 文件在其中，这将永远不会起作用，`/foo/www`因为除非请求是针对内部的东西，否则它将不会生效`/foo/www`。该请求只是`/foo`为了忽略该`.htaccess`文件。您需要将`.htaccess`文件移动到文档根目录，将其更改为：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/foo/www
RewriteRule ^foo/(.*)$ /foo/www/$1 [L] 
```

或将其移动到`/foo`目录，将其更改为：

```
RewriteEngine On
RewriteBase /foo
RewriteCond %{REQUEST_URI} !^/foo/www
RewriteRule ^(.*)$ www/$1 [L] 
```

# c# - 在 C# 中访问 SQL Server 存储过程输出参数

> ID：12174399
> 
> 赞同：3
> 
> 时间：2012-08-29T09:08:24.920
> 
> 标签：c#, sql-server, tsql, stored-procedures

我有一个简单的 SQL Server 存储过程：

```
ALTER PROCEDURE GetRowCount

(
@count int=0 OUTPUT
)

AS
Select * from Emp where age>30;
SET @count=@@ROWCOUNT;

RETURN 
```

我正在尝试访问以下 C# 代码中的输出参数：

```
SqlConnection con = new SqlConnection();
con.ConnectionString = "Data Source=localhost\\SQLEXPRESS;Initial Catalog=answers;Integrated Security=True";

SqlCommand cmd = new SqlCommand();
cmd.Connection = con;

cmd.CommandText = "GetRowCount";
cmd.CommandType=CommandType.StoredProcedure;
cmd.Parameters.Add(new SqlParameter("@count", SqlDbType.Int));
cmd.Parameters["@count"].Direction = ParameterDirection.Output;
con.Open();
SqlDataReader reader=cmd.ExecuteReader();
int ans = (int)cmd.Parameters["@count"].Value;
Console.WriteLine(ans); 
```

但是在运行代码时，会在代码的倒数第二行抛出 NullReferenceException。我哪里错了？提前致谢！

PS 我是 SQL 过程的新手，所以我参考[了这篇文章](http://support.microsoft.com/kb/306574/nl)。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-29T09:11:16.840

我建议你把你的`SqlConnection`和`SqlCommand`放入使用块中，以保证它们的正确处理。

另外，如果我没记错的话，输出参数只有在您完全读取了返回的结果数据集后才可用。

既然您似乎根本不需要它 - 为什么不直接使用`.ExecuteNonQuery()`呢？这能解决问题吗？

```
using (SqlConnection con = new SqlConnection("Data Source=localhost\\SQLEXPRESS;Initial Catalog=answers;Integrated Security=True"))
using (SqlCommand cmd = new SqlCommand("dbo.GetRowCount", con))
{
    cmd.CommandType = CommandType.StoredProcedure;

    cmd.Parameters.Add(new SqlParameter("@count", SqlDbType.Int));
    cmd.Parameters["@count"].Direction = ParameterDirection.Output;

    con.Open();
    cmd.ExecuteNonQuery();  // *** since you don't need the returned data - just call ExecuteNonQuery
    int ans = (int)cmd.Parameters["@count"].Value;
    con.Close();

    Console.WriteLine(ans);
} 
```

另外：因为您似乎只对行数真正感兴趣 - 为什么不将您的存储过程简化为如下所示：

```
ALTER PROCEDURE GetRowCount
AS
   SELECT COUNT(*) FROM Emp WHERE age > 30; 
```

然后在您的 C# 代码中使用此代码段：

```
 con.Open();

    object result = cmd.ExecuteScalar();

    if(result != null)
    {
        int ans = Convert.ToInt32(result);
    }

    con.Close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T09:10:47.153

只需使用 ExecuteNonQuery ，在这种情况下你不能使用 ExecuteReader 没有参数

```
cmd.ExecuteNonQuery(); 
```

或者，如果您想尝试使用 ExecuteScalar 和 ReturnValue

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T09:11:32.233

您必须指定它是存储过程而不是查询

```
cmd.CommandType = CommandType.StoredProcedure; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T09:10:28.080

你应该添加

```
cmd.CommandType = CommandType.StoredProcedure 
```

在调用它之前

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-15T05:37:42.630

我发现问题，它的连接字符串。但是现在，在代码中：

```
 usuary = (string)cmd.Parameters["@USUARIO"].Value;
password = (string)cmd.Parameters["@CLAVE"].Value; 
```

编译器 infomrs 那值是空的...

# installshield - 如何让 InstallShield 卸载以前的版本？

> ID：12174400
> 
> 赞同：13
> 
> 时间：2012-08-29T09:08:25.310
> 
> 标签：installshield, uninstallation

我已按照此处概述的说明进行操作，但它并不能完全按照我的需要工作。：

[如何让 InstallShield LE 自动卸载现有安装？](https://stackoverflow.com/questions/11540520/how-to-get-installshield-le-to-uninstall-the-existing-installation-automatically)（显然这对其他人有用，所以值得一看。如果成功了，请务必支持@JYelton的回答）

这些说明的结果是我可以安装应用程序而无需*卸载*，但现在我的“添加或删除程序”窗口中有 2 个独立的应用程序实例。它实际上并没有卸载以前的版本，它只是将新版本的应用程序与以前的应用程序一起安装。

如何让 InstallShield 卸载以前版本的应用程序？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-29T12:12:35.950

使用升级路径视图配置新项目以删除旧项目：添加新升级路径，并浏览到您以前的 .msi 文件以确保它使用正确的升级代码。如有必要，然后调整出现的设置；通常它们应该是正确的。

# amazon-s3 - Amazon S3 & CloudFront 高成本

> ID：12174404
> 
> 赞同：3
> 
> 时间：2012-08-29T09:08:54.167
> 
> 标签：amazon-s3, amazon-cloudfront

我们正在上传和服务/流媒体（图片、视频），使用 amazon s3 进行存储，并结合 cloudfront 来提供媒体服务。该网站的使用量很小，但亚马逊的成本达到每月 3000 美元，报告显示 90% 的成本来自 S3 服务。

听说如果您不以正确的方式编码，云计算可能会很昂贵。现在我的问题是：正确的方式是什么？我应该在哪里更加注意上传文件的方式或提供文件的方式？

有没有其他人不得不处理意外的高成本，如果是，是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T01:16:51.347

另一个更好地了解您的存储桶中正在发生的事情的机会：[Qloudstat](https://qloudstat.com/welcome)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T19:39:22.660

我们有几乎相似的模型。我们从 S3 和 cloudfront 流式传输 (rtmp)。我们确实有 1000 多个文件和不错的负载，但我们每月的 s3 账单约为 50 美元（与您的数字相比可以忽略不计）。首先，您应该向 AWS 的技术支持投诉您的费用。他们总是给你一个很好的回应，并建议更好的利用资源的方法。其次，我认为如果您进行实时流式传输，将文件分成卡盘并逐个流式传输，而不是流式传输或下载整个文件，就用户不观看的 i/o 而言，这可能是有效的整个视频，但只是其中的一部分。此外，您可以尝试利用缓存吃应用程序级别。

# jquery - jquery表单验证不允许字段非必填字段的空间？

> ID：12174406
> 
> 赞同：0
> 
> 时间：2012-08-29T09:09:04.213
> 
> 标签：jquery, jquery-ui, jquery-validate

jquery表单验证不允许字段非必填字段的空间我试过这个但不工作

```
$(document).ready(function(){

jQuery.validator.addMethod("noSpace", function(value, element) { 
 return value.indexOf(" ") < 0 && value != ""; 
   }, "No space please and don't leave it empty");

$("form").validate({
 rules: {
  name: {
      noSpace: true
  }
   }
    });

  }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:29:08.557

你可以使用这么多的代码。

```
 jQuery.validator.addMethod("noSpace", function(value, element) { 
 return value.indexOf(" ") < 0 ; 
  }, "No space please and don't leave it empty") 
```

# matlab - 如何改进以下代码的计算时间

> ID：12174408
> 
> 赞同：-5
> 
> 时间：2012-08-29T09:09:04.883
> 
> 标签：matlab

你能给我建议我的代码来改进时间计算吗？因为这段代码会花费很多时间。有时我不会得到结果。我的案例是如何结合 RandomMatriceA [1 12] 和 RandomMatriceB [0 2]。

例子：

```
ProcessTime=[2 2 2 3 3] %number of consecutive value RandomMatriceA

RandomMatriceA=[1 2 3 4 5;
               3 4 2 1 5;
               1 4 2 3 5;
               5 1 2 3 4]

RandomMatriceB=[0 2 0 0 1;%humber of consecutive zeros
                0 0 0 1 1;
                1 2 1 0 0;
                0 0 1 1 1]

Result   =[1 1 0 0 2 2 3 3 4 4 4 0 5 0 0 0;
           3 3 4 4 4 2 2 0 1 1 0 5 5 5 0 0;
           0 1 1 0 0 4 4 4 0 2 2 3 3 5 5 5;   
           5 5 5 1 1 0 2 2 0 3 3 0 4 4 4 0]

NewMatric{1}=[1 2 0 0 0 0 0 0 0 0 0 0 0 0 0 0;
              0 0 0 0 0 0 0 0 1 2 0 0 0 0 0 0;
              0 1 2 0 0 0 0 0 0 0 0 0 0 0 0 0;
              0 0 0 1 2 0 0 0 0 0 0 0 0 0 0 0;

NewMatric{2}= just only identify value 2;
NewMatric{3}= for value 3  
NewMatric{4}= value 4; 
```

实际上，我制作了以下代码来强制 NewMatric 中的每一列必须具有每列值 1 的总和等于 2。

如果你们中的某个人想给我建议以改善计算时间，非常感谢。

```
 clc
clear all
A=2;
B=12;
C=4;
ProcessTime= [ 11 11 11 11 4 4 4 4 4 4 4 2 ]; %Converting Matrice

RandomMatriceA=zeros(A,B,C);
RandomMatriceB=zeros(A,B,C);
SumRandomMatriceB=zeros(1,A,C);
ConvertMatriceA=zeros(A,B,C);
ProcessRandomMatriceA=zeros(A,B,C);
StartProcess=zeros(A,B,C);
ZerosCoordinate=zeros(A,B,C);
total=zeros(1,1,C);

%make first random matrice
for ii=1:C;    
    for a=1:A
        RandomMatriceA(a,:,ii)=randperm(B); %batasan tidak boleh satu kelompok melakukan lebih dari satu aktivitas dalam satu waktu
    end
end
%make second random matrice
for ii=1:C;
    RandomMatriceB(:,:,ii)=randint(A,B,[0 2]);
end

%Make sure sum all element per row in RandomMatriceB <=11
for ii=1:C;
    SumRandomMatriceB(1,:,ii)=sum(RandomMatriceB(:,:,ii),2); 
    for jj=1:A,
        while SumRandomMatriceB(1,jj,ii) > 11 
              RandomMatriceB(jj,:,ii)=randint(1,B,[0 2]);
              SumRandomMatriceB(1,:,ii)=sum(RandomMatriceB(:,:,ii),2);
        end
    end  
end

%After making RandomMatriceA and RandomMatriceB, then Make New Matrice
%which has size (8,85,10)
%To know varible of new matrice which is result of combining
%RandomMatriceA,RandomMatriceB and ProcessTime
for ii=1:C;
    for a=1:A,
        for b=1:B,
            ConvertMatriceA(a,b,ii)=ProcessTime(RandomMatriceA(a,b,ii));%FirstVarible:Consecutive The Number of value in all element of RandomMatriceA
            ProcessRandomMatriceA(a,b,ii)=ProcessTime(RandomMatriceA(a,b,ii))+RandomMatriceB(a,b,ii);
            EndProcess=cumsum(ProcessRandomMatriceA,2);%secondVaribale:to know in which column The Consecutive value RandomMatrice will be end
            StartProcess(a,b,ii)=EndProcess(a,b,ii)-(ProcessTime(RandomMatriceA(a,b,ii))-1);%ThirdVariable:to know in which column The Consecutive Value will be start
        end
    end
end

%To know in which column and row in new matrice will have zeros
 for ii=1:C,        
    for a=1:A;
        for b=1:B
            if RandomMatriceB (a,b,ii)~=0
               ZerosCoordinate(a,b,ii)=StartProcess(a,b,ii)-RandomMatriceB(a,b,ii);%To know in which column in new matrice will have value zeros
            else
               ZerosCoordinate(a,b,ii)=RandomMatriceB(a,b,ii);
            end
        end
    end
 end
%to force/make column 43th will be filled by zeros in every row.
for ii=1:C;
       while size(find(ZerosCoordinate(:,:,ii)==43),1)<A, %looping untuk mendapatkan hari libur diminggu ke 43
           for a=1:A;
              if numel(find(ZerosCoordinate(a,:,ii)==43))==1, %mengharuskan adanya libur di minggu ke 43
                 continue;
              else
                 %make sure sum of element new random row in RandomMatriceB
                 %<=11
                 newRow = randi([0 2],1,B);
                 sumnewRow=sum(newRow,2);
                 while sumnewRow >11,
                       newRow = randi([0 2],1,B);
                       sumnewRow=sum(newRow,2);
                 end
                 %replace newRow to row in RandomMatriceB
                 RandomMatriceB(a,:,ii)=newRow; %proses pergantian baris yang tidak sesuai dengan konstrain
                 %random row in RandomMatriceA
                 RandomMatriceA(a,:,ii)=randperm(B); %randoming baris kromosom yang tidak sesuai dengan konstrain
                 %Try to know variabel to make NewMatrice
                 for b=1:B;
                     ConvertMatriceA(a,b,ii)=ProcessTime(RandomMatriceA(a,b,ii));
                     ProcessRandomMatriceA(a,b,ii)=ProcessTime(RandomMatriceA(a,b,ii))+RandomMatriceB(a,b,ii);
                     EndProcess=cumsum(ProcessRandomMatriceA,2);
                     StartProcess(a,b,ii)=EndProcess(a,b,ii)-(ProcessTime(RandomMatriceA(a,b,ii))-1);
                 end
                 for b=1:B
                     %To know column and row which has value zeros
                    if RandomMatriceB(a,b,ii)~=0
                       ZerosCoordinate(a,b,ii)=StartProcess(a,b,ii)-RandomMatriceB(a,b,ii);
                    else
                       ZerosCoordinate(a,b,ii)=RandomMatriceB(a,b,ii); 
                    end
                end
             end
           end
       end
end

%Make New Matrice (8,85,10) by considering variable above 
max_row_length = max(StartProcess(:,B) + ConvertMatriceA(:, B) - 1); %to know row length
result = zeros(size(StartProcess, 1),max_row_length, size(StartProcess,3)); %preallocation size

for row = 1 : size(StartProcess, 1)
    for column = 1 : size(StartProcess, 2)
         for depth = 1 : size(StartProcess,3)
             s = StartProcess(row, column,depth);
             c = ConvertMatriceA(row, column,depth);
             v = RandomMatriceA(row,column,depth);
             result(row, s : s + c - 1,depth) = v;%this matrix is new matrix (8,85,10) which is result of combining RandomMatriceA,RandomMatriceB and ProcessTime
         end
     end
end

%Make A new Matrice per Value (B).
newMatrice = arrayfun(@(b) (result == b).*cumsum((result == b),2),nonzeros(unique(result)), 'UniformOutput', false);  %indikator pemakaian bagian

%to know how many number of value 1 per column in matrice
%bagian1,bagian2,bagian3 and bagian4
SumOnePerColumn=cell(1,4);
SumOnePerColumn{1}=sum(newMatrice{1}==1);
SumOnePerColumn{2}=sum(newMatrice{2}==1);
SumOnePerColumn{3}=sum(newMatrice{3}==1);
SumOnePerColumn{4}=sum(newMatrice{4}==1);

%to count how many column which has sum of value one per column ~=2&~=0,
gab=cell(1,4);
gabb{1}=sum(SumOnePerColumn{1}~=0 &SumOnePerColumn{1}~=2);
gabb{2}=sum(SumOnePerColumn{2}~=0 &SumOnePerColumn{2}~=2);
gabb{3}=sum(SumOnePerColumn{3}~=0 &SumOnePerColumn{3}~=2);
gabb{4}=sum(SumOnePerColumn{4}~=0 &SumOnePerColumn{4}~=2);

for yyy=1:C; 
total(1,1,yyy)= gabb{1}(1,1,yyy)+gabb{2}(1,1,yyy)+gabb{3}(1,1,yyy)+gabb{4}(1,1,yyy);%Total
end

for ii=1:C;
    if total(:,:,ii)==0;
        continue;
    else
       while total(:,:,ii)~=0;%to make total=0 by randoming RandomMatriceA and RandomMatriceB
             for a=1:A
                 RandomMatriceA(a,:,ii)=randperm(B); %batasan tidak boleh satu kelompok melakukan lebih dari satu aktivitas dalam satu waktu
             end
             %make second random matrice
             RandomMatriceB(:,:,ii)=randint(A,B,[0 2]);
             %Make sure sum all element per row in RandomMatriceB <=11
             SumRandomMatriceB(:,:,ii)=sum(RandomMatriceB(:,:,ii),2); 
             for jj=1:A,
                    while SumRandomMatriceB(1,jj,ii) > 11 
                    RandomMatriceB(jj,:,ii)=randint(1,B,[0 2]);
                    SumRandomMatriceB(1,:,ii)=sum(RandomMatriceB(:,:,ii),2);
                    end
             end  
             for a=1:A,
                 for b=1:B,
                      ConvertMatriceA(a,b,ii)=ProcessTime(RandomMatriceA(a,b,ii));%FirstVarible:Consecutive The Number of value in all element of RandomMatriceA
                      ProcessRandomMatriceA(a,b,ii)=ProcessTime(RandomMatriceA(a,b,ii))+RandomMatriceB(a,b,ii);
                      EndProcess=cumsum(ProcessRandomMatriceA,2);%secondVaribale:to know in which column The Consecutive value RandomMatrice will be end
                      StartProcess(a,b,ii)=EndProcess(a,b,ii)-(ProcessTime(RandomMatriceA(a,b,ii))-1);%ThirdVariable:to know in which column The Consecutive Value will be start
                 end
                 for bb=1:B
                     if RandomMatriceB (a,bb,ii)~=0
                        ZerosCoordinate(a,bb,ii)=StartProcess(a,bb,ii)-RandomMatriceB(a,bb,ii);%To know in which column in new matrice will have value zeros
                     else
                        ZerosCoordinate(a,bb,ii)=RandomMatriceB(a,bb,ii);
                     end
                 end
             end
       while size(find(ZerosCoordinate(:,:,ii)==43),1)<A, %looping untuk mendapatkan hari libur diminggu ke 43
           for a=1:A;
              if numel(find(ZerosCoordinate(a,:,ii)==43))==1, %mengharuskan adanya libur di minggu ke 43
                 continue;
              else
                 %make sure sum of element new random row in RandomMatriceB
                 %<=11
                 newRow = randi([0 2],1,B);
                 sumnewRow=sum(newRow,2);
                 while sumnewRow >11,
                       newRow = randi([0 2],1,B);
                       sumnewRow=sum(newRow,2);
                 end
                 %replace newRow to row in RandomMatriceB
                 RandomMatriceB(a,:,ii)=newRow; %proses pergantian baris yang tidak sesuai dengan konstrain
                 %random row in RandomMatriceA
                 RandomMatriceA(a,:,ii)=randperm(B); %randoming baris kromosom yang tidak sesuai dengan konstrain
                 %Try to know variabel to make NewMatrice
                 for b=1:B;
                     ConvertMatriceA(a,b,ii)=ProcessTime(RandomMatriceA(a,b,ii));
                     ProcessRandomMatriceA(a,b,ii)=ProcessTime(RandomMatriceA(a,b,ii))+RandomMatriceB(a,b,ii);
                     EndProcess=cumsum(ProcessRandomMatriceA,2);
                     StartProcess(a,b,ii)=EndProcess(a,b,ii)-(ProcessTime(RandomMatriceA(a,b,ii))-1);
                 end
                 for b=1:B
                     %To know column and row which has value zeros
                    if RandomMatriceB(a,b,ii)~=0
                       ZerosCoordinate(a,b,ii)=StartProcess(a,b,ii)-RandomMatriceB(a,b,ii);
                    else
                       ZerosCoordinate(a,b,ii)=RandomMatriceB(a,b,ii); 
                    end
                end
             end
           end
       end
       %To make one combining matrice to replace combining matrice which
       %doesnt have total=0
       max_row= 85;
       DummyResult = zeros(A, max_row);
       for bbb= 1 : B
           for aaa= 1 : A
               su = StartProcess(aaa,bbb,ii);
               cu = ConvertMatriceA(aaa,bbb,ii);
               vu = RandomMatriceA(aaa,bbb,ii);
               DummyResult(aaa, su : su + cu - 1) = vu;
           end
       end

        indhasil= arrayfun(@(b) (DummyResult == b).*cumsum((DummyResult == b),2),nonzeros(unique(DummyResult)), 'UniformOutput', false);  %indikator pemakaian bagian

        SumOnePerColumnIndhasil=cell(1,4);
        SumOnePerColumnIndhasil{1}=sum(indhasil{1}==1);
        SumOnePerColumnIndhasil{2}=sum(indhasil{2}==1);
        SumOnePerColumnIndhasil{3}=sum(indhasil{3}==1);
        SumOnePerColumnIndhasil{4}=sum(indhasil{4}==1);

        %to know how many column that has not yet had
        %SumOnePerColumnIndhasil= 2 and 0.
        gabbh=cell(1,4);
        gabbh{1}=sum(SumOnePerColumnIndhasil{1}~=0 &SumOnePerColumnIndhasil{1}~=2);
        gabbh{2}=sum(SumOnePerColumnIndhasil{2}~=0 &SumOnePerColumnIndhasil{2}~=2);
        gabbh{3}=sum(SumOnePerColumnIndhasil{3}~=0 &SumOnePerColumnIndhasil{3}~=2);
        gabbh{4}=sum(SumOnePerColumnIndhasil{4}~=0 &SumOnePerColumnIndhasil{4}~=2);

        total(1,1,ii)=gabbh{1}+gabbh{2}+gabbh{3}+gabbh{4};
       end      
    end 
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T09:33:43.450

在我的机器上，代码**非常快**，因为它会**立即**中止并出现错误；-)

一些问题：

1.  第 25 行：没有`randint()`函数（我使用的是 Matlab R2011b）。

2.  第 30 行：这`SumRandomMatriceB(:,:,ii)=sum(RandomMatriceB(:,:,C),2);`不起作用，因为 `size(SumRandomMatriceB(:,:,ii)) == 1x12`但是 `size(sum(RandomMatriceB(:,:,1),2)) == 8 x 1`，所以存在尺寸不匹配。

3.  第 58 行：没有调用函数或矩阵`libur`。

4.  第 89 行：`ProcessMatriceA`从未创建过矩阵。

5.  第 90 行：变量`bb`未清除。

我只浏览了你一半的代码，就发现**了五个严重错误**。老实说，我没有心情为您解决这些错误。但是，当您有运行版本的代码时，我建议您输入

```
profile viewer 
```

在命令行中。它将调出分析器。只需告诉它代码的文件名，它就会显示非常漂亮的时序图和统计信息。在分析之后，您可以非常具体地询问代码的哪一部分速度很慢，如果可能的话，我很乐意提供解决方法。

# database - Magento 中的数据库表不存在：sales_flat_shipment_grid

> ID：12174410
> 
> 赞同：0
> 
> 时间：2012-08-29T09:09:12.577
> 
> 标签：database, magento

我们正在使用 Magento 1.4.0.1 并希望使用来自 3rd 方开发人员的扩展。由于连接到表“sales_flat_shipment_grid”，该扩展不起作用：

```
$collection = $model->getCollection()->join('sales/shipment_grid', 'increment_id=shipment', array('order_increment_id'=>'order_increment_id', 'shipping_name' =>'shipping_name'), null,'left'); 
```

不幸的是，我们的数据库中不存在该表。因此出现错误“无法检索实体配置：sales/shipment_grid”。如果我将此部分注释掉，则扩展程序正在工作，但我想，它不能正常工作。

有人知道这张表吗？目录有一个后端选项来使用“平面表”选项，但这仅适用于目录。并且表格已经存在，无论选中哪个选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T09:37:14.517

从表名可以看出，该表包含有关货物的信息，并在后端网格中使用。问题是该表是在 1.4.1.1 中创建的，因此您不会在商店中找到它。

我看到了 3 种解决问题的方法：

1.  您可以创建此表并编写一些脚本，该脚本将通过 cron 填充必要的数据
2.  您可以在该第 3 方扩展中重写 SQL 查询，以便它从其他来源获取必要的数据
3.  您可以将 Magento 至少升级到 1.4.1.1（强烈推荐）

# cakephp - 将字符串/文本发送到 cakePHP 中的方法/函数

> ID：12174411
> 
> 赞同：0
> 
> 时间：2012-08-29T09:09:13.140
> 
> 标签：cakephp, formhelper

大家好。我目前正在使用 cakePHP 开发一个聊天应用程序。这将是一个专注于回答问题的聊天应用程序。这意味着用户将收到基于他/她的问题的自动回复。我现在正在处理不需要用户登录的聊天界面。一旦用户发送了问题，聊天应用程序才会与数据库表进行交互。现在我的问题是如何将问题发送到控制器中将被解析的方法。我尝试在视图文件中执行以下操作：

```
<!--View/People/index.ctp-->
<h1>This is the chat interface</h1>
<?php $this->Html->charset(); ?>

<p>
<!--This is the text area where the response will be shown-->
<?php
echo $this->Form->create(null);
echo $this->Form->textarea('responseArea', array('readonly' => true, 'placeholder' => 
'***********************************************************************************
WELCOME! I am SANTI. I will be the one to answer your questions regarding the enrollment process 
and other information related to it. ***********************************************************************************', 'class' => 'appRespArea'));
echo $this->Form->end();
?>
</p>

<p>
<!--This is the text area where the user will type his/her question-->
<?php 
echo $this->Form->create(null, array('type' => 'get', 'controller' => 'people', 'action' => 'send', ));
echo $this->Form->textarea('userArea', array('placeholder' => 'Please type your question here', 'class' => 'userTextArea'));
echo $this->Form->end('Send');
?>
</p> 
```

这是控制器：

```
<!--Controller/PeopleController.php-->
<?php
class PeopleController extends AppController{
    public $helpers = array('Form');

    public function index(){

    }

    public function send(){
        //parsing logic goes here
    }
}
?> 
```

如您所见，我告诉 index.ctp 中的表单将操作指向 PeopleController 中的 send() 方法，以便它可以在与数据库交互之前解析问题。当我单击按钮时出现的问题是我总是被重定向到 /users/login 这不是我想要发生的。我只希望应用程序将自己指向/people/send。在这种情况下似乎有什么问题？我试图在 Internet 和文档中寻找答案，然后对其进行测试，但到目前为止还没有解决问题。谁能帮我解决这个问题？这么多天我一直在努力解决这个问题。

我不断收到此错误：

```
Missing Method in UsersController
Error: The action *login* is not defined in controller *UsersController*

Error: Create *UsersController::login()* in file: app\Controller\UsersController.php.

<?php
class UsersController extends AppController {

public function login() {

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:13:03.127

如果您使用的是 Auth 组件，那么您可能需要更改您的`PeopleController`代码：

```
<!--Controller/PeopleController.php-->
<?php
class PeopleController extends AppController{
    public $helpers = array('Form');

   public beforeFilter()
   {
      parent:: beforeFilter();
      $this->Auth->allow('index', 'send');
   }

   public function index(){

   }

   public function send(){
    //parsing logic goes here
   }
}
?> 
```

这是因为您使用了 people/send 作为表单操作。并且用户没有登录，这意味着没有设置任何 Auth 会话。这就是为什么它总是将用户重定向到登录页面，如果没有登录页面，那么它会显示错误。

所以我把 send() 方法也公开了，这样任何人都可以访问它。希望这个概念对你有所帮助。

# spring - 模板模式和simplejdbtemplate

> ID：12174414
> 
> 赞同：0
> 
> 时间：2012-08-29T09:09:26.703
> 
> 标签：spring, design-patterns

我使用过[SimpleJdbcTemplate](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/jdbc/core/simple/SimpleJdbcTemplate.html)并且对它很满意。我也掌握（或认为我掌握）[模板方法模式的概念](http://en.wikipedia.org/wiki/Template_method_pattern)

然而，我在将这两个放在一起时遇到了一些麻烦。SimpleJdbcTemplate 是如何准确实现这种模式的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:01:44.150

Spring 的 JDBC 模板（以及 JMS 模板和许多其他模板）与模板方法无关。

Spring 的模板旨在通过将样板代码封装在方法中来减少样板代码，并让用户通过回调、策略实现等提供有意义的逻辑。

模板方法是一种特定的设计模式，超类定义了整个流程，并让子类通过实现一些特定的方法来挂钩自己的逻辑。

# java - J2ME - LWUIT Java 运行时异常 - 您必须在类路径中的 LWUIT 之前包含平台端口>

> ID：12174417
> 
> 赞同：0
> 
> 时间：2012-08-29T09:09:39.113
> 
> 标签：java, java-me, lwuit, runtimeexception

在你问之前，是的，我确实已经在这里看到并尝试了[解决方案](https://stackoverflow.com/questions/5510986/you-must-include-the-platform-port-before-the-lwuit-in-the-classpath-runtime-exc)。

但它没有用。我不断收到错误。“您必须在类路径中的 LWUIT 之前包含平台端口。”

我正在使用 Netbeans、JDK 1.6（尽管我认为 J2ME 并不关心）并且我正在编译到 Blackberry。

在同事的 PC 上，该应用程序正在编译和运行良好。我检查了一切，他的每一个配置都与我的匹配。我什至检查了库的导入顺序。我按照提到的解决方案（所有库，不仅仅是 LWUIT 库）按依赖顺序编译它们，但我仍然不断收到此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:47:00.513

您提供的链接是正确答案，请仔细检查您的类路径并确保 LWUIT 在 LWUIT4IO 之前。

我建议迁移到不会发生这种情况的[代号一。](http://www.codenameone.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:43:43.483

转到您的项目属性并包含所有可选包，然后试一试。

# sql-server-2008 - 转换和连接

> ID：12174420
> 
> 赞同：3
> 
> 时间：2012-08-29T09:09:44.633
> 
> 标签：sql-server-2008, date, string-concatenation

我的输入是整数月份和年份。

*   **月 年**
*   8 2011
*   9 2012
*   10 2012

我希望将输出作为月份和年份连接为月份名称和年份。

*   mon_yr
*   2011 年 8 月
*   2012 年 9 月
*   2012 年 10 月

请在这个问题上帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:15:26.257

试试这个：

使用 DateName 函数查找月份名称，但该函数需要一个日期值作为输入，因此在内部查询中将月份编号转换为日期。

```
declare @month int=3
declare @year int=2012

Select DateName( month , DateAdd( month , @month , 0 ) - 1 )
                                           +' '+cast( @year as char(4)) 
```

**结果**：

```
March 2012 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T09:22:36.837

这是另一个解决方案：

```
declare @month int
declare @year int

select @month = 3
select @year = 2012

select datename(month , dateadd(mm, @month, '20120101')) + ' ' + cast(@year as char(4)) 
```

# java - 为什么“long var = System.nanoTime()”和“System.nanoTime()”在使用时间上有如此不同？

> ID：12174421
> 
> 赞同：2
> 
> 时间：2012-08-29T09:09:49.783
> 
> 标签：java

我做了一个这样的基准：

```
for (int i = 0; i < 1000 * 1000; ++i) {
    long var = System.nanoTime();
} 
```

我的电脑用 jdk6.0 需要 41 毫秒

以下代码仅需 1 毫秒！！！

```
for (int i = 0; i < 1000 * 1000; ++i) {
    System.nanoTime();
} 
```

我认为可能是 long var 花费了时间，所以我进行了这样的测试：

```
 for (int i = 0; i < 1000 * 1000; ++i) {
    long var = i;
} 
```

只需1毫秒！！！

那么，为什么第一个代码块这么慢？我是中国人。对不起我的英语不好！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T09:12:14.090

这实际上取决于您如何运行基准测试。你最有可能得到 <1ms 的运行，因为 JVM 并没有真正运行你的代码：它已经确定代码没有被使用并跳过它：

```
for (int i = 0; i < 1000 * 1000; ++i) {
    long var = i;
} 
```

相当于

```
//for (int i = 0; i < 1000 * 1000; ++i) {
//    long var = i;
//} 
```

JVM 可能正在运行第二个版本。

您应该阅读[如何用 Java 编写微基准测试](https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java)或使用基准测试库，例如[caliper](http://code.google.com/p/caliper/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T09:12:29.913

JIT 需要时间来检测您的代码没有做任何有用的事情。代码越复杂，花费的时间就越长（或者它可能根本检测不到）

在第二种和第三种情况下，它可以用任何东西替换代码（我怀疑你可以让它长 100 倍，它不会再运行了）

* * *

另一种可能性是您正在以相同的方法运行所有三个测试。当第一个循环迭代超过 10,000 次时，整个方法在后台编译，这样当第二个和第三个循环运行时，它们就被删除了。

一个简单的测试方法是改变循环的顺序，或者更好地将每个循环放在它自己的方法中来停止它。

# javascript - 我使用 css zIndex 的简单 jquery 幻灯片无法正常工作

> ID：12174424
> 
> 赞同：2
> 
> 时间：2012-08-29T09:09:51.720
> 
> 标签：javascript, jquery, css

我正在尝试使用 jquery 进行演示，但`next`按钮工作正常，但`back`按钮没有按我预期的那样工作，请帮我解决这个问题。提前致谢。

[**我在这里试过**](http://jsfiddle.net/sureshpattu/uW2ZU/)

这是我的html代码：

```
<div id="slider">
<div id="next">Next</div>
<div id="prev">Back</div>
<div class="slide s1">I'm slide 1</div>
<div class="slide s2">I'm slide 2</div>
<div class="slide s3">I'm slide 3</div> 
```

​</p>

这是我的脚本：

```
var c=0;
var b=3;
$('.slide:gt(0)').hide();
$('#next').click(function(){
c++;
$('.slide').eq(c).css({zIndex : c}).show('slow');
});
$('#prev').click(function(){
b--;
$('.slide').eq(c).css({zIndex : b}).show('slow');
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:29:09.127

您没有正确跟踪幻灯片。您不需要两个索引，只需在用户单击下一步时在其他幻灯片之上显示新幻灯片，并在用户单击返回时隐藏顶部幻灯片。

像这样：

```
var c=0;
$('.slide:gt(0)').hide();
$('#next').click(function(){
    if(c < $('.slide').size()-1) c++;
    $('.slide').eq(c).css({zIndex : c}).show('slow');
});
$('#prev').click(function(){
    if(c>0){
        $('.slide').eq(c).css({zIndex : c}).hide('slow');
        c--;
    }
});​ 
```

[请参阅此小提琴（已更新以适用于未确定的 NR 幻灯片）](http://jsfiddle.net/uW2ZU/14/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T09:26:34.387

您无需在按钮单击`var b = 3`减量之前定义只是隐藏幻灯片。`back`

```
var c=0;
$('.slide:gt(0)').hide();

$('#next').click(function(){
    c++;
    $('.slide').eq(c).css({zIndex : c}).show('slow');
});

$('#prev').click(function(){
    //hide the slide
    $('.slide').eq(c).css({zIndex : c}).hide('slow');
    c--;
    $('.slide').eq(c).css({zIndex : c}).show('slow');
}); 
```

## [看演示](http://jsfiddle.net/akhurshid/vu2QD/)

# java - 如何使用 Java 将文件夹从 Windows 上传到 Linux 机器

> ID：12174437
> 
> 赞同：1
> 
> 时间：2012-08-29T09:10:27.737
> 
> 标签：java

如何使用 Java 将文件夹从 Windows 上传到 Linux 机器。Windows 机器是客户端机器。我正在使用 putty 在 windows 机器上建立与 Linux 机器的连接，java 代码将在 linux 机器上运行。这是一个基于 servlet 的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:14:41.493

我建议尝试 FTP，因为您从 Linux 到 Windows 工作。

Windows 对这些事情有点胡思乱想，因此可能需要进行一些设置才能使其正常工作。

查看[如何通过 SFTP 从服务器检索文件？](https://stackoverflow.com/questions/14617/java-what-is-the-best-way-to-sftp-a-file-from-a-server)一些建议。

如果可以的话，我会反转这个过程，将文件夹从 Windows 复制到 Linux，Linux 似乎更容易设置来处理这种事情......恕我直言

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:19:43.160

您可以使用 FTP、SSH 或 Telnet。首选 FTP 和 SSH。如果您选择 SSH，我建议您使用[JSch](http://www.jcraft.com/jsch/)。对于 FTP，您可以使用Jakarta 的[VFS](http://commons.apache.org/vfs/)。

# java - 用于高延迟连接的 sslsocket 会话机制

> ID：12174440
> 
> 赞同：4
> 
> 时间：2012-08-29T09:10:33.290
> 
> 标签：java, sockets, network-programming

我想**在高延迟连接上使用 SSLSocket**。**SSL Handshake**需要多次往返，在能够使用此套接字之前会导致很高的延迟。当我需要大量短套接字通信时，它会成为**瓶颈。**

当然，替代方案应该是在 Socket 上实现 VirtualSocket，但我认为这种方法在一些著名的框架中已被弃用，这让我觉得它非常棘手......

在 JAVA 6 中，**是否有会话机制**允许用户打开第二个套接字而无需再次握手？如何配置这个？

我本来想自己编写一个测试代码，但我无法访问生产环境（发生高延迟的地方），也不知道套接字延迟模拟工具。

谢谢你的帮助，

雷诺

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:02:48.867

只要对等方也支持 JSSE SSL 会话机制，它就会自动工作。确保对等端的 SSL 会话超时设置为适合您的目的的合理值，例如 15 分钟。

# sql - 查询酒店数据库的sql

> ID：12174443
> 
> 赞同：1
> 
> 时间：2012-08-29T09:10:43.347
> 
> 标签：sql

我正在尝试从酒店数据库中回答以下问题

显示 2011 日历年每个月的预订数量。

到目前为止，这是我想出的。

```
SELECT booking_no,
       date_in,
       Count(*)
FROM   booking
WHERE  date_in >= '01-jan-11'
       AND date_in <= '31-dec-11'
GROUP  BY booking_no,
          date_in
ORDER  BY date_in; 
```

这些是数据库标题

来宾

```
Name Type
--------------------- ------------
GUEST_NO 
SURNAME 
GIVEN 
DOB 
SEX 
HOME_PHONE 
WORK_PHONE 
FAX 
ADDRESS 
SUBURB 
STATE 
POSTCODE 
```

房间

```
Name Type
--------------------- ------------
ROOM_NO 
FLOOR_NO 
SPA_BATH 
NUM_BEDS 
PRICE 
LINKED_ROOM_NO ) 
```

预订

```
Name Type
--------------------- -----------
BOOKING_NO 
GUEST_NO 
ROOM_NO
DATE_IN 
DATE_OUT 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:18:28.600

你需要的是一个`MONTH`函数。这在大多数数据库引擎中都是一样的。所以试试

```
SELECT booking_no, Month(date_in), Count(booking_no) 
```

和

```
GROUP BY Month(date_in)
ORDER BY Month(date_in); 
```

您还可以使用以下命令简化 where 子句`YEAR`：

```
WHERE Year(date_in) = 2011 
```

共：

```
SELECT Month(date_in),
       Count(*)
FROM   booking
WHERE  Year(date_in) = 2011
GROUP  BY Month(date_in)
ORDER  BY Month(date_in); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T09:14:48.687

你想要每月的数量，所以

```
select month(date_in), count(*) 
from booking 
where year(date_in)=2011
group by month(date_in)
order by month(date_in); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T09:17:53.607

试试他的：

```
SELECT Count(booking_no) bookings,
       Month(date_in)    month_name
FROM   booking
WHERE  date_in >= '01-jan-11'
       AND date_in <= '31-dec-11'
GROUP  BY Month(date_in)
ORDER  BY Month(date_in); 
```

不要在 where 子句中使用“ ”，如果您在列`year(date_in)=2011`上有索引，它将阻止使用索引。`date_in`如果你没有，那也没关系。

# sql - 如何从sybase中的字符串中提取子字符串？

> ID：12174448
> 
> 赞同：2
> 
> 时间：2012-08-29T09:10:55.963
> 
> 标签：sql, sap-ase

通过查询，我得到了这个字符串`"Order::Resource(PPP32#BB300320LQ00J#AAAR05504)"`。我想在 # 字符之前、之间和之后提取字符串，如下所示：

ID = PPP32

sub_id = BB300320LQ00J

sup_id =AAAR05504

**有谁知道如何做到这一点？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T09:21:41.253

```
declare @start int, @end int, @secondstring varchar(100)

select @start = charindex('#',@string)
select @secondstring = substring(@string, @start+1, len(@string))

select @end = charindex('#',@secondstring)

select substring(@string,1, @start-1),
       substring(@string,@start+1,@end-1), 
       substring(@string, @start+@end+1, len(@string)-@end) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T09:32:13.533

这是正确的解决方案：

```
declare @string varchar(50)
select @string = 'Order::Resource(PPP32#BB300320LQ00J#AAAR05504)'
declare @start int, @end int, @secondstring varchar(100)

select @start = charindex('#',@string)
select @secondstring = substring(@string, @start+1, len(@string))

select @end = charindex('#',@secondstring)

select substring(@string,charindex('(', @string)+1, @start-1-charindex('(', @string)),
       substring(@string,@start+1,@end-1), 
       substring(@string, @start+@end+1, len(@string)-(@start+@end+1)) 
```

# compiler-construction - 如何将整个图像移动到 4G 虚拟空间之上？

> ID：12174451
> 
> 赞同：0
> 
> 时间：2012-08-29T09:11:03.887
> 
> 标签：compiler-construction, linker

我想编译一个程序，这样当它加载到内存中时，它的所有部分都在 4G 空间以上（我在 x86_64 机器上）。我尝试指定 .text、.data 和 .bss 部分，但似乎还不够。有没有一种方便的方法来做我想做的事情？谢谢。

注意： http: [//sourceware.org/ml/binutils/2012-08/msg00480.html](http://sourceware.org/ml/binutils/2012-08/msg00480.html)解决了我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T03:14:41.580

[该线程](http://sourceware.org/ml/binutils/2012-08/msg00480.html)解释了如何将 64 位二进制文​​件移动到 4G 虚拟空间之上。简而言之，您需要添加`-fPIE -pie`选项来告诉编译器和链接器您希望可执行文件可以加载到任意虚拟地址。`-pie`将要求链接器将您的目标文件链接到可以在 4G 虚拟地址上加载的库。默认库通常在`-mcmodel=small`无法加载超过 2G 虚拟空间的模式下编译，有关详细信息，请参阅[3.17.15 Intel 386 和 AMD x86-64 选项。](http://gcc.gnu.org/onlinedocs/gcc/i386-and-x86_002d64-Options.html)

# magento - Magento：将报价转换为订单

> ID：12174454
> 
> 赞同：9
> 
> 时间：2012-08-29T09:11:13.003
> 
> 标签：magento

将magento中的报价对象转换为订单所涉及的步骤是什么。

说我有以下内容：

```
$quote = Mage::getModel('sales/quote')->load(100); 
```

尚无订单，此报价对象仍处于活动状态。

我如何从这里完成该报价并从中下订单。

我试过了：

```
$service = Mage::getModel('sales/service_quote', $quote);
$service->submitAll(); 
```

这会创建一个订单，但不会完成报价。此外，订单处于待处理状态且未处理，即尚未开具发票。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-29T18:35:51.410

你试过`Mage_Sales_Model_Convert_Quote`-`toOrder`方法吗？

```
 /**
     * Convert quote model to order model
     *
     * @param   Mage_Sales_Model_Quote $quote
     * @return  Mage_Sales_Model_Order
     */
    public function toOrder(Mage_Sales_Model_Quote $quote, $order=null) 
```

例子：

```
$quote = Mage::getModel('sales/quote')->load(100);
$order = Mage::getSingleton('sales/convert_quote')->toOrder($quote); 
```

# css - IE中输入字段中文本光标的颜色总是黑色？

> ID：12174462
> 
> 赞同：1
> 
> 时间：2012-08-29T09:11:35.417
> 
> 标签：css, internet-explorer

有什么方法可以更改 IE 浏览器的文本光标颜色？其他浏览器使用可逆颜色正确处理它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:54:44.063

如果您指的是输入字段中的**插入符号**（您在键入时得到的小水平指示器），不幸的是在 IE 中无法更改它。

另一方面，如果您指的是悬停时的鼠标光标，您可以使用 CSS`cursor`属性更改它；

```
input, textarea {
    cursor: pointer; /*makes the cursor a hand-like pointer*/
    cursor: crosshair; /*makes the cursor a crosshair*/
    cursor: url(img.gif); /*use img.gif as a cursor*/
} 
```

更多关于可能声明的信息可以在这里找到：[little link](http://www.w3schools.com/cssref/pr_class_cursor.asp)。

我希望这有帮助！

# sublimetext2 - 在 sublime text 2 命令中访问 HOME 路径

> ID：12174463
> 
> 赞同：5
> 
> 时间：2012-08-29T09:11:36.027
> 
> 标签：sublimetext2

我想要一个简单的 sublime-command 来打开我的主文件夹中的特定（点配置）文件。有没有我可以使用的变量或其他魔法，比如 ${packages}，但是对于用户的主文件夹？

目前我有（Default.sublime-commands）

```
{
    "caption": "Edit my config",
    "command": "open_file",
    "args": {
        "file": "/Users/MyName/.myconfig"
    }
} 
```

但想摆脱硬编码的用户名。

不幸的是，我在 sublime 的 api“文档”中找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-14T16:23:15.497

可以使用如下自定义命令来完成：

```
import sublime_plugin, getpass

class OpenCustomFileCommand(sublime_plugin.WindowCommand):
  def run(self, file_name):
    if("{username}" in file_name):
      file_name = file_name.replace("{username}", getpass.getuser())
    self.window.open_file(file_name) 
```

和以下（Default.sublime-commands）：

```
{
  "caption": "Edit my config",
  "command": "open_custom_file",
  "args": { "file_name": "/Users/{username}/.myconfig" }
} 
```

当然，您可以使用自己的替换来**扩展OpenCustomFileCommand。**

PS 命令必须存储在 ST2 的 Packages 目录中，即文件**open_custom_file.py**

# jsf - 如何隐藏/显示 点击一个

> ID：12174464
> 
> 赞同：0
> 
> 时间：2012-08-29T09:11:36.403
> 
> 标签：jsf, jsf-2, primefaces

我正在使用 JSF 2.0 和 primefaces 3.3。我想隐藏/显示一个菜单项的工具栏。

这是更多信息。

```
<p:menubar autoSubmenuDisplay="true" style="width:99%">
                    <p:submenu label="Projects">
                        <p:menuitem id="m11" value="Select Product" actionListener="#{menuBean.renderTool}" update="t1" />
                        <p:menuitem id="m12" value="Select Project" />
                        <p:menuitem id="m13" value="Select Contract" />
                    </p:submenu>
                    <p:menuitem id="m2" value="Global" />

                    <p:menuitem id="m7" value="Exit" />
                </p:menubar>

                <p:toolbar id="t1" rendered="#{menuBean.renderToolbar}">
                    <p:toolbarGroup align="left" style="height:20px;">
                        <h:outputText value="Projects " />
                        <h:outputText value=" - select Product" />
                    </p:toolbarGroup>
                </p:toolbar> 
```

**托管豆**

```
private boolean renderToolbar = false;
//getters and setters
public void renderTool(ActionEvent actionEvent){
        System.out.println("inside renderTool method...");
        renderToolbar = true;
    } 
```

actionListener 方法正在执行 但是，它没有更新或呈现工具栏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:29:56.063

你提供的信息不多。

但是，一种方法是使用带有`onclick`事件处理程序的 Javascript。像这样（未经测试的代码）：

```
<p:toolbar id="toolbarID" />
<p:menu>
    <p:menuitem onclick="$('#toolbarID').toggle();" />
</p:menu> 
```

我认为 primefaces 已经包含 jquery，因此您应该能够开箱即用地使用 jquery 选择器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T09:51:43.307

将一些布尔变量添加到您的 bean

```
boolean someBoolean; //+ getter/setter 
```

并在您的`renderToolbar`方法中添加

```
someBoolean = !someBoolean; // toggle the disaplay on and off 
```

在 xhtml 中更改

```
<p:toolbar id="t1" rendered="#{menuBean.renderToolbar}"> 
```

进入

```
<h:panelGroup id="t1">
    <p:toolbar rendered="#{menuBean.someBoolean}">
.
.
.
</h:panelGroup> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T21:47:02.173

Daniel 提供的解决方案使用支持 bean 工作。但是，如果显示/显示某些元素不依赖于数据，而更像是客户端的东西或简单的用户控制元素，我建议不要使用支持 bean。为客户端的东西使用支持 bean 会导致延迟，或者正如普通用户所说：“它很慢”。

取而代之的是使用 Jens 建议的 JavaScript 之类的客户端。由于您使用的是 PrimeFaces，因此您可以使用 jQuery。`toggle()`一个演示 jQuery和函数`show()`的简单示例：`hide()`

```
<h:form>
    <p:menubar>
        <p:menuitem value="Toggle" onclick="$(&quot;[id='t1']&quot;).toggle()" />
        <p:menuitem value="Show" onclick="$(&quot;[id='t1']&quot;).show()" />
        <p:menuitem value="Hide" onclick="$(&quot;[id='t1']&quot;).hide()" />
    </p:menubar>
</h:form>

<p:toolbar id="t1" /> 
```

请注意，如果您`p:toolbar`生活在诸如表单之类的容器中，则客户端 ID 以表单 ID 为前缀。

# indexing - 变量初始化中的未定义索引

> ID：12174467
> 
> 赞同：-1
> 
> 时间：2012-08-29T09:11:52.370
> 
> 标签：indexing, undefined

```
$result2 = mysql_query($query, $con);
            while($data2 = mysql_fetch_assoc($result2))
            {
                $x = $data2["x"];
                $y = $data2["y"];
                echo "$x";
                echo "$y";
                if($x<0 && $y<0)
                {
                    echo "village: $data[village]  ";
                    echo "player: $data[player]  ";
                    echo "position: ($data[x]|$data[y])<br>";
                }
                else if($x>0 && $y>0)
                {
                    echo "village: $data[village]  ";
                    echo "player: $data[player]  ";
                    echo "position: ($data[x]|$data[y])<br>";
                }
                else if($x>0 && $y<0)
                {
                    echo "village: $data[village]  ";
                    echo "player: $data[player]  ";
                    echo "position: ($data[x]|$data[y])<br>";
                }
            } 
```

我收到错误

```
Notice: Undefined index: y in C:\xampp\htdocs\debal\nw_check_exec.php on line 48

Notice: Undefined index: x in C:\xampp\htdocs\debal\nw_check_exec.php on line 47 
```

第 47 行和第 48 行是：-

```
$x = $data2["x"];
$y = $data2["y"]; 
```

我认为我已经正确地完成了所有事情，但我无法找出错误的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:13:50.887

可能`$data2`确实没有索引`x`，因此您需要检查它并使用 instat 默认值。

您可以使用一个小的内联 if 语句：

```
$x = isset($data2["x"]) ? $data2["x"] : 0;
$y = isset($data2["y"]) ? $data2["y"] : 0; 
```

顺便说一句，你真的定义了这么多常量吗？例如这里：

```
$data[village] 
```

这意味着必须有一个`village`可能具有某种价值的常数“村”？

也许你应该用以下方式交换它：

```
$data["village"] 
```

# carousel - 识别内容轮播

> ID：12174469
> 
> 赞同：0
> 
> 时间：2012-08-29T09:11:58.633
> 
> 标签：carousel

[任何人都可以识别本网站](http://www.grohe.com/uk/)上使用的轮播吗？它似乎可以与响应式网站无缝协作，并且只需很少的 css 更改就可以完美地适合我的设计。源代码显示了一个名为 anchorScroll.js 的东西，但搜索却一无所获。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T09:23:26.590

这是一个自定义解决方案，而不是插件。`Application_NewsSpinner`在[http://cdn12.grohe.com/application/resources/javascript/scripts/common.js](http://cdn12.grohe.com/application/resources/javascript/scripts/common.js)中查找第 1072 行

**但不要窃取代码！**获得灵感很好，但您应该找到自己的解决方案或使用官方插件！看看[http://finnrudolph.de/ImageFlow](http://finnrudolph.de/ImageFlow)或[http://www.jcoverflip.com/demo](http://www.jcoverflip.com/demo)

# php - 在ajax内部调用ajax

> ID：12174470
> 
> 赞同：2
> 
> 时间：2012-08-29T09:12:00.180
> 
> 标签：php, ajax, jquery, symfony

这是我在这里的第一天也是第一个问题，如果我的问题对于这个平台来说非常琐碎，希望你能原谅我。

我正在尝试在 ajax 中调用 ajax，一个 ajax 调用将调用一个 cotroller 操作，其中它将在数据库中插入一条记录，第一个 ajax 调用的操作是

```
public function createAction(Request $request){
    if ($request->isXmlHttpRequest()) {
        $name = $request->get("gname");
        $description = $request->get("desc");
                    $portfolio_id = $request->get("PID");
                    $portfolio = $this->getDoctrine()
                        ->getRepository('MunichInnovationGroupPatentBundle:PmPortfolios')
                        ->find($portfolio_id);
        $portfolio_group = new PmPatentgroups();
        $portfolio_group->setName($name);
        $portfolio_group->setDescription($description);
        $portfolio_group->setPortfolio($portfolio);
        $portfolio_group->setOrder(1000000);
        $portfolio_group->setIs_deleted(0);
        $em = $this->getDoctrine()->getEntityManager();
        $em->persist($portfolio_group);
        $em->flush();
        $msg = 'true';
    }
    echo $msg;
    return new Response();
} 
```

第二个 ajax 调用将获取第一个 ajax 调用插入的更新数据，此调用的操作是

```
public function getgroupsAction(Request $request){
    if ($request->isXmlHttpRequest()) {

        $id = $request->get("PID");
        $em = $this->getDoctrine()->getEntityManager();
        $portfolio_groups = $em->getRepository('MunichInnovationGroupPatentBundle:PmPatentgroups')
        ->getpatentgroups($id);
        echo json_encode($portfolio_groups);
        return new Response();
    }
} 
```

我的 JQuery 如下

```
 $.ajax({
         type: 'POST',
         url: url,
         data: data,
         success: function(data) {
         if(data == "true") {
                 $("#new-group").fadeOut("fast", function(){
                 $(this).before("<strong>Success! Your Portfolio Group is created Successfully.</strong>");
                 setTimeout("$.fancybox.close()", 3000);
                 });
                  $.ajax({
                          type: 'POST',
                          url: getgroups,
                          data: data,
                          success: function(data) 
                          { 
                            var myArray = JSON.parse(data); 
                            var options = $("#portfolio-groups"); 
                            for(var i = 0; i < myArray.length; i++)
                            { 
                              options.append($("<option />").val(myArray[i].id).text(myArray[i].name)); 
                             } 
                       } 
                });
            }
         }
     }); 
```

我在第一个成功内调用第二个 ajax 以确保第一个 ajax 成功完成，但第二个 ajax 调用没有获取更新的数据。

如何确保在第一个 ajax 完成后调用第二个 ajax 并且我也得到最近插入的数据

谢谢

**我的解决方案** 只使用一个 ajax 调用

在进行插入的创建操作中，在插入之后获取投资组合的所有组，并返回 json_encode($portfolio_groups);

在 JQuery 内部

```
 $.ajax({
        type: 'POST',
        url: url,
        data: data,
        success: function(data) {
              $("#new-group").fadeOut("fast", function(){
              $(this).before("<strong>Success! Your Portfolio Group is created Successfully.</strong>");
              setTimeout("$.fancybox.close()", 3000);
              });
              var myArray = JSON.parse(data); 
              var options = $("#portfolio-groups"); 
              for(var i = 0; i < myArray.length; i++)
              { 
                 options.append($("<option />").val(myArray[i].id).text(myArray[i].name)); 
               } 
            }
       }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T09:17:45.080

我认为问题可能在于您有很多变量名称“数据”。在第二个 ajax 调用中，发送的数据将始终为“true”，但我怀疑您想发送其他内容。我会给他们独特的名字，让事情更清楚，看看会发生什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T13:40:53.313

只需使用一个 ajax 调用

在进行插入的创建操作中，在插入之后获取投资组合的所有组，并返回 json_encode($portfolio_groups);

在 JQuery 内部

```
$.ajax({
    type: 'POST',
    url: url,
    data: data,
    success: function(data) {
          $("#new-group").fadeOut("fast", function(){
          $(this).before("<strong>Success! Your Portfolio Group is created Successfully.</strong>");
          setTimeout("$.fancybox.close()", 3000);
          });
          var myArray = JSON.parse(data); 
          var options = $("#portfolio-groups"); 
          for(var i = 0; i < myArray.length; i++)
          { 
             options.append($("<option />").val(myArray[i].id).text(myArray[i].name)); 
           } 
        }
   }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T09:22:18.693

Ajax 在第一个 Ajax 的成功方法中，正如您所做的那样，应该确保您在第一个 Ajax 之后调用第二个 Ajax。只有在返回结果后才会触发成功方法。
对于测试，在调用第二个之前，在第一个 Ajax req 中添加 console.log()。以及第二个 Ajax 成功方法中的另一个 console.log()。

尝试将 console.log 放在第一个 success->data 变量上，看看你得到了什么。如果您有错误，我将导致第二个请求失败。

# cocoa - 如何像evernote一样实现NSToolbarItem动画

> ID：12174472
> 
> 赞同：2
> 
> 时间：2012-08-29T09:12:00.047
> 
> 标签：cocoa, animation, nstoolbar, nstoolbaritem

我想实现一个动画，就像 Max OS X 上的印象笔记应用程序的同步动画。

该按钮如下所示： ![在此处输入图像描述](../Images/5dde2a43e2b2e25428961799aa492a0a.png)

动画运行时，只有白色箭头在旋转。

我尝试使用`Core Animation`，步骤如下：

1 我将a拖到`NSButton`工具栏并将其设置为出口aBtn。我将蓝色黑色背景图像设置为 aBtn。

2 我创建了一个`CALayer`实例变量 aLayer 并将其添加到 aBtn。所以它看起来像上面的按钮。

3 单击aBtn 时，我将旋转动画添加到aLayer。它运行得很好。

问题是当我想自定义工具栏时，工具栏调色板中显示的 aBtn 没有 aLayer，只有蓝色背景图像。

然后我试图找到显示或关闭工具栏调色板的事件或通知。因此，我可以在显示或隐藏工具栏调色板之前重置 aBtn 的图像。但是，当工具栏调色板关闭时，我无法收到通知。

有人可以提出任何建议吗？

如果您对如何实现此动画有好的想法，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T05:12:21.490

我创建一个 gif 来存储动画，并`NSImageView`为 gif 创建一个。然后我用`-[NSToolBarItem setView:]`.

使用 gif 比使用 Core Animation 实现它更简单。

# wpf - 关闭 WPF 应用程序时出现间歇性 NullReferenceException

> ID：12174473
> 
> 赞同：0
> 
> 时间：2012-08-29T09:12:03.950
> 
> 标签：wpf, winforms

我有一个 WPF 应用程序，其中包含托管在`WindowsFormsHost`. 当应用程序关闭时，`NullReferenceException`会间歇性地抛出一个（大约每十个关闭一个）。

我们正在图表上绘制实时数据。对于绘图，我们使用`Control.Invoke`.

这是异常的堆栈跟踪：

```
System.NullReferenceException: Object reference not set to an instance of an object.
   at System.Windows.Media.MediaContext.RegisterICompositionTargetInternal(ICompositionTarget iv)
   at System.Windows.Interop.HwndTarget..ctor(IntPtr hwnd)
   at System.Windows.Interop.HwndSource.Initialize(HwndSourceParameters parameters)
   at System.Windows.Forms.Integration.ElementHost.OnHandleCreated(EventArgs e)
   at System.Windows.Forms.Control.WmCreate(Message& m)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.Integration.ElementHost.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam) 
```

# sql - 这可以通过 SQL 查询实现吗？

> ID：12174485
> 
> 赞同：0
> 
> 时间：2012-08-29T09:12:31.297
> 
> 标签：sql, sql-server-2008

对不起这个问题的通用标题，但我不知道该怎么说。所以这里是：

我有一个包含以下信息的表：

```
computerName | userName |           date          | logOn | startUp
             |          |                         |       |
ID_000000001 |  NULL    | 2012-08-14 08:00:00.000 |  NULL |   1
ID_000000001 |  NULL    | 2012-08-15 09:00:00.000 |  NULL |   0
ID_000000003 | user02   | 2012-08-15 19:00:00.000 |   1   |  NULL
ID_000000004 | user02   | 2012-08-16 20:00:00.000 |   0   |  NULL 
```

我想计算机名和用户名是不言自明的

`logOn`是`1`用户在机器上`0`登录和注销的时间。

`startUp`是`1`机器打开和`0`关闭的时间。

另一个条目总是`NULL`分别，因为我们不能同时登录和启动。

现在我的任务是：找出上个月（或任何给定时间，但现在假设一个月）哪些计算机开启*的时间最少。这甚至可以用 SQL 实现吗？*<-- 小心：我不需要知道电脑打开了多少次，而是每台电脑在给定的时间空间内打开了多少小时/分钟

还有两个小问题：

我们*不能*说每台计算机的第一个条目是`1`列中`startUp`的，因为记录这些事件的脚本是最近安装的，因此可能在开始记录时计算机已经在运行。

我们*不能*假设如果我们按顺序排序`date`并且只显示`startUp`条目将全部交替为 1 和 0 的列，因为如果通过拔出插头强制关闭计算机，则不会有关闭日志，并且可能连续两个 1。

编辑：`userName`当有值时当然是 N​​ULL `startUp`，因为打开/关闭不会显示哪个用户这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:17:03.640

您可以按计算机分组，并使用 where 筛选特定月份的初创公司：

```
select  computerName
,       count(*)
from    YourTable
where   '2012-08-01' <= [date] and [date] < '2012-09-01' 
        and startup = 1
group by
        computerName
order by
        count(*) desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T09:52:40.933

在存储过程中，带有游标和 fetch 循环。你使用一个 temptable 按计算机名存储正常运行时间。我给你主要计划，我会让你在[TSQL 指南](http://msdn.microsoft.com/en-us/library/ms190669%28v=sql.105%29.aspx)中看到细节。

另一个链接：[TSQL Cursor 的一个很好的例子](http://www.jackdonnell.com/articles/SQL_CURSOR.htm)。

```
 DECLARE @total_hour_by_computername    
declare @computer_name varchar(255)
declare @RowNum int

 --Now in you ComputerNameList cursor, you have all different computernames:
declare ComputerNameList cursor for
select DISTINCT computername from myTable

-- We open the cursor
OPEN ComputerNameList

     --You begin your foreach computername loop :
    FETCH NEXT FROM ComputerNameList 
    INTO @computer_name
    set @RowNum = 0 
    WHILE @@FETCH_STATUS = 0
    BEGIN

     SET @total_hour_by_computername=0;

     --This query selects all startup 1 dates by computername order by date.
     select @current_date=date from myTable where startup = 1 and computername = @computername order by date

         --You use a 2nd loop on the dates that were sent you back: 

         --This query gives you the previous date 
         select TOP(1) @previousDate=date from myTable 
         where computername = @computername and date < @current_date and startup is not null
         order by date DESC

         --If it comes null, you can decide not to take it into account.
         --Else
         SET @total_hour_by_computername=@total_hour_by_computername+datediff(hour, @previousDate, @current_date);

    --Once all dates have been parsed, you insert into your temptable the results for this computername

    INSERT INTO TEMPTABLE(Computername,uptime) VALUES (@computername,@total_hour_by_computername)

--End of the @computer_name loop
  FETCH NEXT FROM ComputerNameList 
    INTO @computer_name
END
CLOSE ComputerNameList
DEALLOCATE ComputerNameList 
```

您只需要在您的 temptable 中进行选择，以确定哪一台计算机的运行时间最长。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T09:52:59.453

正如 RoadWarrior 所指出的，当关闭消息被丢弃时，不可能有准确的报告。但这里试图产生一些有用的东西。我将假设表名是`computers`：

```
SELECT c1.computerName,
       timediff(MIN(c2.date), c1.date) as upTime
FROM computers as c1, computers as c2
WHERE c1.computerName=c2.computerName
  AND c1.startUp=1 AND c2.startUp=0
  AND c2.date >= c1.date
GROUP BY c1.date
ORDER BY c1.date; 
```

这将生成计算机运行的所有时间段的列表。要生成您请求的报告，您可以将上述查询用作子查询：

```
SELECT
  c3.computerName,
  SEC_TO_TIME(SUM(TIME_TO_SEC(c3.upTime))) AS totalUpTime
FROM
  (SELECT c1.computerName,
          timediff(MIN(c2.date), c1.date) AS upTime
   FROM computers AS c1, computers AS c2
   WHERE c1.computerName=c2.computerName
     AND c1.startUp=1 AND c2.startUp=0
     AND c2.date >= c1.date
   GROUP BY c1.date
   ORDER BY c1.date
  ) AS c3
GROUP BY c3.computerName
ORDER BY c3.totalUpTime; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T09:17:12.250

试试这个查询（用`table_name`你的表名替换）：

```
SELECT SUM(startUp) AS startupTimes 
FROM table_name
GROUP BY computerName
ORDER BY startupTimes 
```

这将输出每台计算机已启动的次数。要仅获取第一行（启动次数最少的计算机），您可以附加`LIMIT 1`到查询中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T09:27:53.757

如果（根据您的最后一段）您没有记录所有关机事件。那么您没有可用的信息来生成显示每台计算机已打开的时间量的报告。因为您没有记录计算机关闭的所有实例，所以您使用什么 SQL 查询并不重要。

FWIW，这个模式不是 3NF。更常见的方法是用一个列记录每个事件，例如：

计算机 ID：用户 ID：事件 ID：事件日期

前三列分别是另一个存储详细信息的表的外键。尽管即使使用此模式，对于启动/关闭事件，用户 ID 也会为空。

# iphone - 停止 CATransition 动画

> ID：12174489
> 
> 赞同：1
> 
> 时间：2012-08-29T09:12:51.660
> 
> 标签：iphone, catransition

我正在使用此代码为我的视图制作波纹动画

```
transition = [CATransition animation];
    transition.delegate = self;
    transition.duration = 3;
    transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    NSString *types[4] = {@"cube", @"rippleEffect", @"cube", @"alignedCube"};
    NSString *subtypes[4] = {kCATransitionFromLeft, kCATransitionFromRight, kCATransitionFromTop, kCATransitionFromRight};
    transition.type = types[1];
    transition.subtype = subtypes[1]; 
```

现在我想通过点击停止动画，然后我想从我停止的视图开始......

我试过了

[view.layer removeAllAnimations];

但我发现以下事情不起作用..任何建议？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T09:42:11.507

将动画的速度设置为 0 可暂停，设置为 1 可再次恢复。看看[https://developer.apple.com/library/ios/#qa/qa2009/qa1673.html](https://developer.apple.com/library/ios/#qa/qa2009/qa1673.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:50:58.237

您可以从 CALayer 获取当前动画状态。

```
 #import <QuartzCore/QuartzCore.h>

   myView.layer.modelLayer.frame = myView.layer.presentationLayer.frame; 
```

# c++ - 模板函数和非模板函数调用顺序

> ID：12174493
> 
> 赞同：2
> 
> 时间：2012-08-29T09:13:04.480
> 
> 标签：c++, linux, templates

在Linux中我得到

```
template max() is called 
```

但在 Windows 下我得到

```
non-template max() is called 
```

为什么？在 Linux 中，我使用 gcc 4.5，在 Windows 中，我使用 VS2008。

```
#include <iostream>
#include <vector>

template < typename T > 
inline void max( const int& a, const T& b ) 
{
    std::cout << "template max() is called" << std::endl;
}

template < typename T > 
inline void Imax( const int& a, const std::vector<T>& b)
{
    max(a, b[0]);
}

inline void max( const int& a, const int& b ) 
{
    std::cout << "non-template max() is called" << std::endl;
}

int main()
{
    std::vector<int> v;
    v.push_back(1);
    Imax(1, v);       
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T09:27:28.023

在准标准 C++ 中，您可能会得到 non-template `max`。（没有标准，很难说你*应该*得到什么，但我知道的所有准标准编译器都会将名称查找推迟到实例化。）从 C++89 开始，你应该得到 template `max`; 名称查找分两个阶段进行：定义模板时（此时，只有模板`max`可见），以及实例化模板时，但在实例化点，仅用于依赖名称，并且仅使用 ADL。在您的代码中，`max`是一个从属名称，但触发 ADL 的符号是`std::vector`（在 中绘制`std`）和`int`，它不会添加任何内容，甚至不会添加全局命名空间。`max`所以找不到非模板。

这些规则是 C++ 委员会最后正式制定的规则之一，编译器不可能在一夜之间改变，所以实际上，如果编译器的日期是 1995 年之前的任何时间，您可能会期待预标准行为。对于以后的任何事情，我倾向于将其视为编译器错误，但是...编译器必须支持现有代码，理想情况下，以后的编译器将可以选择使用以前的名称查找规则。（我说的很理想，因为有两组不兼容的名称查找规则显然不是微不足道的。对于大多数编译器实现者来说，仅仅让一组正确就足够困难了。）

众所周知，即使在今天，Microsoft 的模板实现也不符合标准。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T09:26:52.857

`max`in的调用`Imax`依赖于 T，因此 max 应该在模板定义上下文（模板 max 所在的位置）中进行搜索，并与实例化上下文中的参数相关查找相结合。`int`ADL 不应该找到没有关联命名空间的独立最大值。所以我认为 gcc 是正确的。

请注意，如果您有细微的变化：

```
#include <iostream>
#include <vector>

struct S {};

template < typename T > 
inline void max( const S& a, const T& b ) 
{
    std::cout << "template max() is called" << std::endl;
}

template < typename T > 
inline void Imax( const S& a, const std::vector<T>& b)
{
    max(a, b[0]);
}

inline void max( const S& a, const S& b ) 
{
    std::cout << "non-template max() is called" << std::endl;
}

int main()
{
    std::vector<S> v;
    v.push_back(S());
    Imax(S(), v);       
    return 0;
} 
```

这里，全局命名空间与 S 相关联，因此 ADL 查找在实例化点找到了非模板最大值。

# javascript - 将 unicode 字符串从 django 传递到 javascript

> ID：12174494
> 
> 赞同：8
> 
> 时间：2012-08-29T09:13:08.347
> 
> 标签：javascript, python, django, unicode

我的数据中有一堆 unicode 字符串，我需要将它们从我的 django 视图传递到模板，以便在 JavaScript 脚本中使用，该脚本将它来回传递到网络。

问题是我希望字符串以 JavaScript unicode 形式表示，但我从 python 获取带有**u**前缀的字符串。

例如，对于字符串**mężczyźni**，Python 将其存储为**u'm\u0119\u017cczy\u017ani'**但是当它被传递给模板时，它*不会*删除**u**前缀，这会在处理它时给 JavaScript 带来问题。我希望它只是**'m\u0119\u017cczy\u017ani'**以便模板中的 JavaScript 代码可以使用它。

我尝试使用 urqluote、smart_unicode、force_unicode 但无法找到解决方案，甚至无法破解。

我该怎么办 ？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-29T09:23:43.733

**编辑：** Django 1.7+[不再包含 simplejson](https://docs.djangoproject.com/en/1.7/releases/1.7/#features-removed-in-1-7)。代替

```
from django.utils import simplejson 
```

写

```
import json 
```

然后使用`json`而不是`simplejson`.

* * *

您可能正在打印数据字典的 python repr，并尝试在 javascript 中解析它：

```
{{ your_python_data }} 
```

相反，您可以将数据导出为 json：

```
from django.utils import simplejson

json_data_string = simplejson.dumps(your_data) 
```

并直接在javascript中加载数据：

```
var your_data = {{ json_data_string }}; 
```

您还可以制作[模板过滤器](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#)：

```
from django.utils import simplejson
from django import template
from django.utils.safestring import mark_safe

register = template.Library()

@register.filter
def as_json(data):
    return mark_safe(simplejson.dumps(data)) 
```

在您的模板中：

```
{% load your_template_tags %}

{{ your_python_data|as_json }} 
```

请注意，您应该小心 XSS，如果某些“数据”来自用户输入，那么您应该对其进行清理。

# ruby - 未初始化的常量 Object::Rails

> ID：12174499
> 
> 赞同：1
> 
> 时间：2012-08-29T09:13:37.383
> 
> 标签：ruby, ruby-on-rails-3, scheduled-tasks

我正在尝试使用[发条宝石](https://github.com/tomykaira/clockwork)安排我的工作。我需要一个文件使用

```
 require "#{Rails.root}/path/to/some/file" 
```

我明白了

```
 uninitialized constant Object::Rails 
```

错误。可能有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:22:26.633

尝试加载导轨

```
require File.expand_path("./config/environment", __FILE__) 
```

# python - 黑莓：WhatsApp messageStore.db 文件解密

> ID：12174500
> 
> 赞同：-1
> 
> 时间：2012-08-29T09:13:40.437
> 
> 标签：python, blackberry, whatsapp

对于 Android 和 iPhone，我可以使用 python 解密我的 WhatsApp 加密消息文件。但对于黑莓，我没有取得任何成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T05:38:33.623

搜索“whatsapp 数据库加密”（在 Bing 上不少于）会发现这份来自荷兰的学生报告： [WhatsApp 数据库加密项目报告](https://www.os3.nl/_media/2011-2012/students/ssn_project_report.pdf)

黑莓专门有一个部分，上面写着：

> 标题告诉我们，我们正在处理一个利用 BlackBerry 加密系统的加密可能性的文件。

# vb.net - 在 VB 中的 WCF 中使用串行 (RS232) 缩放

> ID：12174501
> 
> 赞同：0
> 
> 时间：2012-08-29T09:13:40.207
> 
> 标签：vb.net, wcf, serial-port

在工作中，我必须得到一些秤才能与计算机系统对话，这本身并不是特别困难，因为我已经有了一个工作实用程序。问题是我们的控制系统使用 WCF，当我被带入时，我没有使用 VB 的经验。我已经设法让 WCF 服务通过 com 端口发送数据，但我在努力接收。其他人有任何建议或链接可能会有所帮助吗？我觉得我可能花了太长时间试图完成这项工作，因为我从星期五开始就一直在尝试......

# c# - 如何在视图状态中存储从字典继承的类的实例？

> ID：12174507
> 
> 赞同：3
> 
> 时间：2012-08-29T09:13:52.650
> 
> 标签：c#, asp.net, dictionary, viewstate, webpage

在网页中，我将 a 存储`Dictionary`在`ViewState`：

```
Dictionary<string, string> items = new Dictionary<string, string>();
ViewState["items"] = items; 
```

它工作得很好。但是，由于某些原因，我想使用自己的类而不是`Dictionary`直接使用：

```
class MyDictionary : Dictionary<string, string> 
{
   ... 
}
MyDictionary items = new MyDictionary();
ViewState["items"] = items; 
```

它没有按预期工作。ASP.NET 抱怨这个事实

> *MyDictionary 未标记为可序列化*

没关系，因为没有继承类属性。所以我改变了我的代码：

```
[Serializable]
class MyDictionary : Dictionary<string, string> { ... } 
```

但如果我这样做，我会收到另一条错误消息，这一次是在页面回发之后：

> *此页面的状态信息无效，可能已损坏。*
> *System.Web.UI.ObjectStateFormatter.Deserialize（流输入流）*

如果 viewstate 可以序列化 a `Dictionary`，为什么它不适用于从它继承的类？如何使这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T09:28:58.753

你需要一个反序列化构造函数到你的类。

```
class MyDictionary : Dictionary<string, string> 
{
   public MyDictionary (){ }
   protected MyDictionary (SerializationInfo info, 
                           StreamingContext ctx) : base(info, ctx) { }
} 
```

如果您查看字典类，它需要反序列化。

```
protected Dictionary(SerializationInfo info, StreamingContext context); 
```

*用测试页试了一下，效果很好。*

# perl - 无法在 HTML 页面中获得对 iframe 的基于 cookie 的访问权限

> ID：12174510
> 
> 赞同：2
> 
> 时间：2012-08-29T09:14:04.443
> 
> 标签：perl, lwp, way2sms

我正在尝试通过 Perl LWP 中的 Way2sms 自动发送短信。我能够成功登录。然后我点击浏览器中的**发送短信**链接进入短信发送页面。从那里，根据页面 url 和 sms 字段所在的 iframe 的 url，我尝试构建表单应该发布到的页面的绝对 URL，并使用正确的参数发布（你可以在图像中看到这一切）。但是，没有发送短信。谁能告诉我我在这里做错了什么？（CPAN 中有一个类似的模块可以通过 来完成此操作`Mechanize`，我正在尝试不同的方法）

```
use LWP::UserAgent;
use HTTP::Cookies;
my $cookie_jar = HTTP::Cookies->new(
file => "cookies.txt",
autosave => 1,
);
my $ua = LWP::UserAgent->new(
    agent =>
      'Mozilla/5.0 (X11; Linux x86_64; rv:14.0) Gecko/20100101 Firefox/14.0.1',
    cookie_jar => $cookie_jar,
);
my $response = $ua->post(
    'http://site2.way2sms.com/contentt/bar/Login1.action',
    {
        username => $mob,
        password => $pass,
    }
);

if ( $response->is_redirect ) {
    $response = $ua->get( $response->header('Location') );
    print 5 if $response->decoded_content =~ /Kaustav Mukherjee/i; #prints it, showing that the login is successful
}
my $smsresp = $ua->post("http://site5.way2sms.com/jsp/quicksms.action",[MobNo=>$mob,textArea=>'Hello World']);
if ( $smsresp->is_redirect ) {
   $smsresp = $ua->post($smsresp->header('Location'),[MobNo=>$mob,textArea=>'Hello World']);
   } 
```

![在此处输入图像描述](../Images/f88d4a13f3f450d9121b43b88e51d229.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T02:39:56.530

这是一个可以帮助您的间接答案：

1.  如果您必须使用这个网站，请尝试使用 CasperJS 之类的东西。可能需要发生一些 JavaScript 魔法。
2.  也许您可以使用 Google Voice 或其他更智能的服务来自动发送短信。看起来 CPAN 上的某个人已经为此提供了一个[甜蜜的 Google::Voice 模块](http://search.cpan.org/~tempire/Google-Voice-0.05/lib/Google/Voice.pm)。

# php - PHP 获取电子邮件附件

> ID：12174513
> 
> 赞同：3
> 
> 时间：2012-08-29T09:14:20.067
> 
> 标签：php, forms, email, email-attachments

我有一个表格，我有一个输入文件来放置附件。碰巧我拥有的所有数据都以我想通过电子邮件发送的形式发送。但是，在我这样做之前，我将所有输入的数据重定向到另一个 php 页面并使用 get 接收它。

所以我的第一个问题是，如何通过get获取其他php页面中的附件内容？

之后，在我验证了新 php 页面中的所有数据后，我假装通过电子邮件发送。我打算使用这段代码：

```
 //define the receiver of the email 
$to = 'myemail@something.com'; 
//define the subject of the email 
$subject = 'Test email with attachment'; 
//create a boundary string. It must be unique 
//so we use the MD5 algorithm to generate a random hash 
$random_hash = md5(date('r', time())); 
//define the headers we want passed. Note that they are separated with \r\n 
$headers = "From: webmaster@example.com\r\nReply-To: webmaster@example.com"; 
//add boundary string and mime type specification 
$headers .= "\r\nContent-Type: multipart/mixed; boundary=\"PHP-mixed-".$random_hash."\""; 
//read the atachment file contents into a string,
//encode it with MIME base64,
//and split it into smaller chunks
$attachment = chunk_split(base64_encode(file_get_contents('attachment.zip'))); 
//define the body of the message. 
ob_start(); //Turn on output buffering 
?> 
--PHP-mixed-<?php echo $random_hash; ?>  
Content-Type: multipart/alternative; boundary="PHP-alt-<?php echo $random_hash; ?>" 

--PHP-alt-<?php echo $random_hash; ?>  
Content-Type: text/plain; charset="iso-8859-1" 
Content-Transfer-Encoding: 7bit

Hello World!!! 
This is simple text email message. 

--PHP-alt-<?php echo $random_hash; ?>  
Content-Type: text/html; charset="iso-8859-1" 
Content-Transfer-Encoding: 7bit

<h2>Hello World!</h2> 
<p>This is something with <b>HTML</b> formatting.</p> 

--PHP-alt-<?php echo $random_hash; ?>-- 

--PHP-mixed-<?php echo $random_hash; ?>  
Content-Type: application/zip; name="attachment.zip"  
Content-Transfer-Encoding: base64  
Content-Disposition: attachment  

<?php echo $attachment; ?> 
--PHP-mixed-<?php echo $random_hash; ?>-- 

<?php 
//copy current buffer contents into $message variable and delete current output buffer 
$message = ob_get_clean(); 
//send the email 
$mail_sent = @mail( $to, $subject, $message, $headers ); 
//if the message is sent successfully print "Mail sent". Otherwise print "Mail failed" 
echo $mail_sent ? "Mail sent" : "Mail failed"; 
```

但我有一个疑问，哪里有“attachment.zip”我应该放什么？将在这个新的 php 页面上获取附件数据的变量？

提前致谢！

忘记上面的部分：

这是我在表格上的声明和提交按钮：

```
<form id="formElem" name="formElem" enctype="multipart/form-data" action="" method="post">

<button name='enviar_candidatura' id='enviar_candidatura' value='enviar_candidatura' onclick='return false;' type='submit'> 
```

当我单击上面的按钮时，我输入以下 jquery 函数：

```
$('#enviar_candidatura').bind('click',function(){

    var conta_Duplicates;
    conta_Duplicates=dadosImportantes();
    //alert("Deu");
    var preenchimentoForm=true;
    //alert("Contasssss"+conta1);
    //var eventos=$countEventos;
    var eventos=conta_Duplicates[2];
    //alert("Wiggins"+eventos);
    //var empregos=$countEmpregos;
    var empregos=conta_Duplicates[1];
    //var cursos=$countCursos;
    var cursos=conta_Duplicates[0];

    //alert($countEmpregos);
    if($('#formElem').data('errors')){
        preenchimentoForm=false;

        dadosFormularios(form, preenchimentoForm, cursos, empregos, eventos);
        return false;
    }
    else{
        dadosFormularios(form, preenchimentoForm, cursos, empregos, eventos);
    }
} 
```

在这个函数中我遇到了困难，因为如果我是对的，我应该在这里为表单元素分配一个 var，以便我可以将她传递给函数“dadosFormularios”。

一旦进入 dadosFormularios(...)，它就在那里，我想调用

```
form.action = 'index.php?pagina=candidaturasB&'+ qstringA; 
```

重定向到我将发送带有附件的电子邮件的 php 页面。

希望我对外语中的一些变量感到清楚和抱歉，希望这不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T09:32:38.617

您正在填写的表格需要`enctype="multipart/form-data"`并且需要`method="post"`上传才能正常工作。

像这样：

```
<form method="post" action="" enctype="multipart/form-data" id="myform" onsubmit="return checkForm(this)";>
    <input type="file" name="filename" />
    // ...........
</form> 
```

之后，在您的发送邮件中，您可以获得带有 的文件`$_FILES['filename']['tmp_name']`，注意`filename`必须与输入的名称相同：

```
$attachment = chunk_split(base64_encode(file_get_contents($_FILES['filename']['tmp_name']))); 
```

功能

```
<script type="text/javascript">
    function checkForm(form){
        // process fieds
        return checkNextFunction(form);
    }

    function checkNextFunction(form){
         form.action = 'myurl.php';
         return true;
    }
</script> 
```

检查[JSFiddle](http://jsfiddle.net/BK4ZK/)。

# jquery - jQuery 和 jQuery-UI 同名方法冲突

> ID：12174514
> 
> 赞同：2
> 
> 时间：2012-08-29T09:14:20.590
> 
> 标签：jquery, html, jquery-ui, methods, conflict

在我的 HTML 页面中，我的菜单中有一些元素需要使用 jQuery 1.7.1 显示或隐藏。但在那个页面中，我也导入了 jQuery-UI-1.8.17。当我编写代码来显示和隐藏元素（在 NetBeans 中）时，我选择了 jQuery JS 源代码，用于 hide() 和 show()。

问题是，当我重新进入 IDE 时，其中一些元素似乎正在使用 jQuery UI 源代码，因为它具有相同名称的方法！...也许出于这个原因，有时，这些元素不会出现并且按预期消失...如何避免 IDE 和手写代码中的这种冲突？

注意：我尝试在 $(document).ready(function(){...} 函数之前添加 $.noConflict()，但是另一个插件在布局中崩溃了 (jquery.layout-1.3.0_RC-30.2.js)有了它，所以我再次删除了它。

# php - WordPress插件父子关系

> ID：12174516
> 
> 赞同：-1
> 
> 时间：2012-08-29T09:14:23.393
> 
> 标签：php, wordpress

我正在创建一个插件类别导入器在 wordpress 中我有三个数组

```
<?php
$Id={'1','2,'3','4','5'};
$Title={'Electronic','Mobile','Iphone','Freezer','Lg'};
$Catid={'0','1','2','1','4'};
?> 
```

现在我如何使用它们来维护父子关系，孩子是 $Catid 与 $Id 匹配的那些意味着移动是电子的孩子。我需要将它们插入数据库并在 Wp-admin 中显示关系。我被困在这里有任何帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:09:25.973

我在我的代码中使用了以下约定

```
$Id as $myid
$Title as $mytitle
$Catid as $catid

    for($i=0;$i<count($myid);$i++)
    {

        if($catid[$i]==0)
        {
            $my_cat = array('cat_name' => $mytitle[$i], 'category_description'     => 'A Cool Category', 'category_nicename' => $mytitle[$i],         'category_parent' => '');
            // Create the category
            $my_cat_id = wp_insert_category($my_cat);
        }
        else {
            for($j=0;$j<count($myid);$j++)
            {
                if($myid[$j]==$catid[$i]){
                    $parent=trim($mytitle[$j]);
                    break;
                }

            }

            $query="SELECT `term_id`
FROM `wp_terms`
WHERE `name` = '$parent'";

            $res=$wpdb->get_results($query);

            foreach($res as $result)
            {
                $parent_id=$result->term_id;
            }

            //var_dump($res);die;
            $my_cat = array('cat_name' => $mytitle[$i], 'category_description'     => 'A Cool Category', 'category_nicename' => $mytitle[$i],         'category_parent' => $parent_id);
            $my_cat_id = wp_insert_category($my_cat);
        }

    } 
```

# html - 如果给定绝对位置，Firefox 和 Internet Explorer 不会相对于父级定位

> ID：12174518
> 
> 赞同：3
> 
> 时间：2012-08-29T09:14:25.013
> 
> 标签：html, css, internet-explorer, firefox, css-position

我`position: absolute;`的容器内部有问题`position: relative;`

我认为，默认行为是，具有`position: absolute;`的子元素相对于其父容器定位自己，如果该元素具有`position: absolute;`或`position: relative;`

在尝试此操作时，我发现 FF 和 IE（最新版本）显示出不同的行为，将内容放在页面上。

想知道为什么？它涉及一个下拉菜单，其中子菜单`left: -9999px;`在悬停时从视口中取出`left: auto;`

在 Chrome 中，它工作正常。抱歉，如果这个问题已经被问过 - 但使用这样的词进行搜索只会显示位置的正常问题。

代码：

```
<div id="steuerung">
<ul>
  <li><a href="#">Link</a>

    <ul>
     <li><a href="#">Sublink</a> </li>
     <li><a href="#">Sublink</a> </li>
     <li><a href="#">Sublink</a> </li>
     <li><a href="#">Sublink</a> </li>
     <li><a href="#">Sublink</a></li>
    </ul>
  </li>
</ul>
</div> 
```

CSS：

```
div#steuerung li {
    display: inline;
    list-style: none;
    position: relative;
}
div#steuerung ul li ul {
    position: absolute;
    left: -9999px;
    display: block;
    z-index: 2;
    width: 99%;
}
div#steuerung ul li:hover ul {
    left: auto;

} 
```

在此处完成代码：www.step-town.com/new/

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:22:31.570

试试这个

[http://jsfiddle.net/3Nh86/](http://jsfiddle.net/3Nh86/)

我认为最好的方法是在你的 ul 子菜单上使用“display：none”和“display：block”，无需 Javascript。

# php - 哪个openssl版本支持php中的sha256

> ID：12174519
> 
> 赞同：3
> 
> 时间：2012-08-29T09:14:26.277
> 
> 标签：php, openssl

我为我们的客户编写了一个简单的 php 库。该库使用 openssl 验证和签名方法，采用 SHA256 算法。我认为这种对 SHA256 的算法支持对于 PHP 和 openssl 来说是一种新的东西。但是不知道是从哪个版本开始支持SHA256的。

这会导致使用早期版本的 openssl 和 php 的客户端出现一些问题。而且我找不到上面指定的版本。

那么是什么版本呢，openssl最开始在rsa签名和验证中支持sha256呢？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-27T14:20:34.343

由于[PHP DOCS](http://us2.php.net/manual/en/openssl.signature-algos.php) `OPENSSL_ALGO_SHA256`常量 vas 在 PHP 5.4.8 中首次添加。

我在尝试验证 SHA256 时也遇到了这个问题。现在不知道怎么办）

# c# - 组合框选择下拉列表中的项目C#

> ID：12174523
> 
> 赞同：-1
> 
> 时间：2012-08-29T09:14:45.030
> 
> 标签：c#, winforms, combobox

我有一个组合框，其中填充了数据库表中的项目。当我更改文本时，我用数据库表中的项目重新填充组合框。

但是当我输入文本并打开带有建议的列表时，没有选择列表中的项目。我希望选择一个项目，因此当您按 Enter 键时，它会成为所选项目。

这是一个winforms应用程序。

谢谢。

```
 cbxNaam.Items.Clear();
 string query = "SELECT bedr_naam FROM tblbedrijf WHERE bedr_naam LIKE '%" + cbxNaam.Text + "%'";
 string[] bedrijfsnamen = Functions.DataTableToArray(Global.db.Select(query));
 cbxNaam.Items.AddRange(bedrijfsnamen);
 cbxNaam.Select(cbxNaam.Text.Length + 1, 0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:36:18.250

您需要在列表中选择一个项目 - 看起来您正试图在一个项目中选择一些文本。

将其他评论中的一些信息拼凑在一起，看起来您实际上想对下拉列表中的文本进行通配符匹配，为此，您需要修改处理程序的行为以处理文本更改的事件/方法，或者派生自组合框并覆盖它或在您的实例上添加一个事件侦听器。

然后你可以搜索你的数组中的数据——比如

```
private void cbxNaam_TextChanged(object sender, EventArgs e)
{
     var matchingStrings = bedrijfsnamen.Where(s => s.Contains(cbxNaam.Text));
     cbxNaam.SelectedItem = matchingStrings[0];
} 
```

您需要注意多个匹配项目等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:33:45.353

如果您使用的是**WINFORMS**，

您必须使用[AutoCompleteMode](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.autocompletesource.aspx)设置为`AutoCompleteMode.Append`和[AutoCompleteSource](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.autocompletesource.aspx)设置为`AutoCompleteSource.ListItems`

请检查此答案[ComboBox AutoComplete Custom Capabilities](https://stackoverflow.com/a/1776466/1547740)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T09:39:38.060

我不知道我是否理解你，如果没有，对不起！这是我的答案：

如果您希望在您写入组合框时填充您的组合框，您需要设置其属性：

AutoCompleteMode**追加** 和 AutoCompleteSource 到**ListItems**

在 Enter 上，您的项目将被选中。

希望我帮助你？摇滚！！！:-)

# objective-c - 使用 prepareForSegue 在视图之间发送图像

> ID：12174527
> 
> 赞同：1
> 
> 时间：2012-08-29T09:14:49.777
> 
> 标签：objective-c, ios, uiimageview, storyboard, segue

我正在使用情节提要开发 Iphone 应用程序。

我在视图中有一个按钮（SelectionViewController），当用户单击该按钮时，它会转到另一个视图（ImagesResultsViewController）（。

我需要的是将图像从第一个视图发送到第二个视图。为此，我将 segue 标识符命名为“resultViewSegue”，并使用 prepareForSeague 方法获取对目标视图的引用并将图像放在其上的 UIImage 视图中：

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    //if the segue identifier is "resultViewSegue"
    if([segue.identifier isEqualToString:@"resultViewSegue"])
    {
        //get the destination view which is ImagesResultsViewController
        ImagesResultsViewController * destinationView = segue.destinationViewController;

        //Set the image in the UIImageView
        [destinationView.mainImageView setImage:myImageToSend];
        //mainImageView is a UIImageView in the "ImagesResultsViewController" I created a property for it and synthesize it
    }
} 
```

但是图像没有设置。调试后我发现它`destinationView.mainImageView`是空的。如何获取 UIImageView 的参考并从 segue 设置其图片？

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T09:22:43.467

在 ImagesResultsViewController 中创建 UIImage 属性在 prepareForSegue 方法中将其设置为您想要的图像，然后在 viewdidload 中将其设置为 UIImageView

# ios5 - 使用 didselectrowAtindex 进行排序的 UiTableview 返回先前的选择？

> ID：12174528
> 
> 赞同：0
> 
> 时间：2012-08-29T09:14:51.797
> 
> 标签：ios5, uitableview, segue, didselectrowatindexpath

我希望有人可以帮我解决这个问题。我在这里做错了什么。我试图继续查看详细信息。问题是我第一次选择它时，它返回一个 nil 值，第二次、第三次等它返回我之前选择的值。

我希望有人可以帮助我。

提前非常感谢。

问候，

哈科

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
  {

      NSInteger section = [indexPath section];
      NSArray *HS = [sect objectForKey:[alles objectAtIndex:section]];
      passString = [HS objectAtIndex:indexPath.row];

   }

 -(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{

     SiTDetailViewController *vcTarget = [segue destinationViewController];

    vcTarget.mijnString = passString;

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T18:37:32.603

呵呵……想通了。我有点傻，“延迟”是因为我同时使用了 seque 和 didSelectRowAtIndexPath。这就是它的工作方式：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{

  NSIndexPath *path = [self.tableView indexPathForSelectedRow];
  NSArray *HS = [sect objectForKey:[alles objectAtIndex:path.section]];
  passString = [HS objectAtIndex:path.row];
  SiTDetailViewController *vcTarget = [segue destinationViewController];
  vcTarget.mijnString = passString;

} 
```

# asp.net-web-api - web api odata 服务 - 返回复杂类型

> ID：12174529
> 
> 赞同：1
> 
> 时间：2012-08-29T09:14:55.340
> 
> 标签：asp.net-web-api

我想创建返回 reault 类型的 web api odata 服务，该类型由集合数据成员和其他成员组成，如此服务返回：

[http://services.odata.org/OData/OData.svc/Suppliers](http://services.odata.org/OData/OData.svc/Suppliers) ?$filter=Address/City eq 'Redmond'

如您所见，结果类型由集合数据成员和附加成员组成

谁能给我发个样品怎么做？

我无法成功创建这种复杂类型并能够通过那里的值过滤集合项

正如您在此查询中看到的那样，它返回所有结果而不过滤项目

services.odata.org/OData/OData.svc/Suppliers

我希望能够像这样过滤这种类型：

services.odata.org/OData/OData.svc/Suppliers?$filter=Address/City eq 'Redmond'

在这个查询中，我设法过滤了集合成员项目并仍然返回其他数据成员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:42:46.007

如果您只想实现过滤器，例如：services.odata.org/OData/OData.svc/Suppliers?$filter=Address/City eq 'Redmond'

[请在http://aspnet.codeplex.com/SourceControl/changeset/view/903afc4e11df#Samples%2fNet4%2fCS%2fWebApi%2fODataServiceSample%2fReadMe.txt](http://aspnet.codeplex.com/SourceControl/changeset/view/903afc4e11df#Samples%2fNet4%2fCS%2fWebApi%2fODataServiceSample%2fReadMe.txt)查看示例

它有一个具有可查询属性的供应商和地址模型。它应该适用于相同的 $filter 查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:00:24.260

Odata 支持隐含在 asp.net webapi RC 中。您只需要从您的操作返回一个 IQueryable 并用 [QueryableAttribute] 标记它。只有这么多支持基于查询字符串的数据过滤。

当我看到 RTM 中没有构建 [QueryableAttribute] 时，我有点失望。

在 RTM 中，它作为单独的包提供，Microsoft.AspNet.WebApi.OData 在 Nuget 上以预览/alpha 形式提供。完整版本将于今年秋季晚些时候发布。您可以从这里获取它（http://www.nuget.org/packages/Microsoft.AspNet.WebApi.OData）。有一个很好的概述帖子（http://blogs.msdn.com/b/alexj/archive/2012/08/15/odata-support-in-asp-net-web-api.aspx）

# c++ - cpp项目中的计时命令（windows）

> ID：12174532
> 
> 赞同：2
> 
> 时间：2012-08-29T09:15:07.867
> 
> 标签：c++, timing

我希望有人能帮我解决这个问题（英语不是我的母语，所以对于任何语法或拼写错误，我深表歉意）：

作为我正在编码的项目的一部分，我需要为一些命令计时。更具体地说：我有 2 组命令（我们称它们为 set A 和 set B） - 我需要执行 set A，然后等待特定的毫秒数（在 set A 中计算），然后执行 set B。我做了它在组之间使用睡眠（时间）命令。

现在，我需要合并另一组命令（C 组），它们将在 A 组和 B 组之间循环运行，而不是简单地什么都不做。意思是，而不是程序之前空闲的时间（等待指定的毫秒数），我需要它循环 C 集 -**但问题是它*必须*循环 C与它在空闲时间等待的时间*完全相同*.**

我怎样才能在不使用线程的情况下做到这一点？（并且通常保持尽可能简单）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:07:03.977

我猜 C 中命令集的“工作时间”是已知的。C 是一个循环，它可以/应该在等待时间到期时完成。

在这种情况下，我建议使用[性能计数器](https://stackoverflow.com/a/1739265/1504523)来倒计时等待时间。根据计算的内容和 C 中引入的开销，获得的精度可以在微秒范围内。

伪代码：

```
Delay = 1000
Do A
CounterBegin = GetCounter()
// and now the C loop
while ((GetCounter() - CounterBegin) < Delay) {
   Do C
}
Do B 
```

注意：计数器值将使用计数器频率转换为时间。请参阅上面的链接以获取详细信息。

# ios - UIWebView 中的 pdf 文件：更改页码信息框的语言

> ID：12174533
> 
> 赞同：0
> 
> 时间：2012-08-29T09:15:12.067
> 
> 标签：ios, pdf, uiwebview

在 UIWebview 中打开 pdf 时，屏幕左上角会出现一个小信息框。我希望此信息框的语言与应用程序语言相同。目前我只有法语“1 sur 2”，而我需要荷兰语“1 op 2”

是否可以为此强制使用语言？我一直在更改 nsuserdefaults 的应用程序语言，但似乎对此没有影响。任何帮助将不胜感激，谢谢！

![在此处输入图像描述](../Images/cac0898f6f12374b4793504393baeece.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:16:36.257

这个信息框似乎使用了设备的语言。在 NSUserdefaults 中更改语言时，需要重新启动应用程序，然后 uiwebview 才会考虑到这一点。

# php - 调用一个通用的静态类方法 php

> ID：12174536
> 
> 赞同：2
> 
> 时间：2012-08-29T09:15:27.400
> 
> 标签：php, oop, templates

我想写一个泛型方法，在 php 中引用泛型类（但方法相同）。

```
class A {

    public static function Dox(){
    }

}

class B {

    public static function Dox(){
    }

}

class C{

    public static function Include($class){
    $result = $class::Dox(); //instead of 2 methods => A::Dox and B::Dox
    }

} 
```

我得到一个错误。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T09:21:44.830

`include`是一个[关键字](http://docs.php.net/reserved.keywords)。将您的方法重命名为 foo()、bar() 或任何非关键字。

例如

```
<?php
class A {
    public static function Dox() { return 'A::Dox'; }
}

class B {
    public static function Dox() { return 'B::Dox'; }
}

class C {
    public static function foo($class) {
        $result = $class::Dox();
        echo 'result: ', $result, "\n";
    }
}

foreach( array('A','B') as $c ) {
    C::foo($c);
} 
```

印刷

```
result: A::Dox
result: B::Dox 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:19:13.937

[`call_user_func`](http://php.net/manual/en/function.call-user-func.php)行得通吗？

```
class A {
    public static function Dox() {
    }
}

class B {
    public static function Dox() {
    }
}

class C {
    public static function Include($class) {
        $result = call_user_func(array($class, "Dox"));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T09:52:30.263

包括关键字“特定关键字”。

试试看：

```
public static function IncludeXXX(){...} 
```

# amazon-s3 - 如何在亚马逊 s3 服务器上提供日志写入路径

> ID：12174538
> 
> 赞同：1
> 
> 时间：2012-08-29T09:15:35.703
> 
> 标签：amazon-s3, amazon-ec2, amazon

我正在使用 Amazon Elastic Beanstalk 来托管我的 java 网站。现在我面临的问题是我无法看到我的日志文件（Log4J 日志）所以我想使用 amazon s3 服务器来存储日志，所以有人可以告诉我执行此操作的过程或方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:48:26.203

[Beanstalk FAQ](http://aws.amazon.com/elasticbeanstalk/faqs/#store-in-s3)声明它确实将日志文件发送到 S3。
[这个问题的答案](https://stackoverflow.com/questions/8161069/rotating-s3-logging-using-log4j-with-elastic-beanstalk)和[引用的这篇博客文章](http://www.lustforge.com/2012/07/15/logrotate-apache-logs-to-amazon-s3/)（取自另一个 SO 问题）有关于 log4j 和 beanstalk 的详细信息

# silverlight - 如何从 Silverlight 客户端中的远程 Web 服务获取实际异常？

> ID：12174546
> 
> 赞同：0
> 
> 时间：2012-08-29T09:15:51.087
> 
> 标签：silverlight, web-services, exception

```
[WebMethod]
    public void Test()
    {
        throw new ArgumentNullException();
    } 
```

我想在 silverlight 客户端 webservice 调用完成方法中获取实际的异常（例如：ArgumentNullException）。我该如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:12:17.403

Completed 事件应该有两个期望返回的参数：对象发送者和事件的 CompletedEventArgs 集合，名为 e。

完成的事件 args 包含一个异常 e.Error，它应该是返回的异常。

# java - JSP中的textarea值显示 - Struts2 - AppEngine

> ID：12174547
> 
> 赞同：0
> 
> 时间：2012-08-29T09:16:00.690
> 
> 标签：java, html, google-app-engine, jsp, struts2

表单`textarea`作为输入。值存储到 appengine 数据存储区。显示保存数据的值时，不显示空格。如何显示包括空格？

在jsp中我有：

```
<s:property value="user.aboutMySelf"/> 
```

`\n`不显示空格或换行符。

对此最好的方法是什么？

# macos - 单击远程通知后，应用程序将无法打开'

> ID：12174557
> 
> 赞同：6
> 
> 时间：2012-08-29T09:16:35.267
> 
> 标签：macos, apple-push-notifications, osx-mountain-lion

我遇到了远程通知和 OSx 10.8 的问题。我成功启用了远程推送通知。它们也被传送到我的系统，但是当我尝试单击一个时，没有任何反应。此外，对于此应用程序更新，我必须启用沙盒！

Mac 控制台日志：

```
29.08.12 11:03:50,600 usernoted[194]: Cannot find originating application to launch for event action.  file://localhost/Users/clueckler/Library/Developer/Xcode/DerivedData/mysms_OSX_Client-bcaianxrdhpztmdcnsrgzqdtqmvi/Build/Products/Debug/mysms_test.app/ is not the same app as the one that sent the original notification.
29.08.12 11:03:50,600 usernoted[194]: Error finding application com.mysms.osx.client.test. 
```

我认为这是 AdHoc-Test 或其他问题的问题。所以我尝试将它提交到AppStore成功！但是 AppStore 版本出现了同样的问题（现在我将它从商店中删除了......）

这个问题有解决方案吗？

编辑（代码信息）：

```
- (void)awakeFromNib { 
// Register app for remote notification 
[[NSApplication sharedApplication] registerForRemoteNotificationTypes:(NSRemoteNotificationTypeBadge | NSRemoteNotificationTypeSound | NSRemoteNotificationTypeAlert)]; 
} 

- (void)application:(NSApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken { 
//Post token to server 
} 
```

# python - 获取网页时出现“NoneType 对象不可调用”错误

> ID：12174559
> 
> 赞同：0
> 
> 时间：2012-08-29T09:16:52.460
> 
> 标签：python, download, nonetype

我对python很陌生，我写了这段代码

```
def geturl(url):
    url = urllib.quote(url,'/:')
    log( __name__ ,"Getting url:[%s]" % url)
    try:
        req = urllib2.Request(url)
        response = urllib2.urlopen(req)
        content    = response.read()
        return_url = response.geturl()
        response.close()
    except Exception, e:
        log( __name__ ,"Failed to get url because %s" % str(e))
        content    = None
        return_url = None
    return(content, return_url)

def myFunc():
    searchurl="http://www.google.com"
    socket.setdefaulttimeout(3)
    content, response_url = geturl(searchurl)
    if content is None:
        log( __name__ , "Content is None!!")
    content = content.replace("string1", "string2") 
```

当我运行它时，我收到此错误：NoneType 对象不可调用。我不明白为什么......我了解到 NoneType 是 None 的类型，但我检查“content”变量是否为 None 并且不是。谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T09:20:13.187

您没有给出错误的行，但是我怀疑以下内容是错误的：

```
if content is None:
    log( __name__ , "Content is None!!")
content = content.replace("string1", "string2") 
```

当`content`is Indeed时`None`，会发出一条日志，但函数会继续执行，直到调用`replace`引发异常。

# javascript - 从 Javascript 调用 VB.Net

> ID：12174565
> 
> 赞同：0
> 
> 时间：2012-08-29T09:17:15.543
> 
> 标签：javascript, vb.net

我正在尝试通过功能键在我的 ASP.Net 页面上调用 VB.Net 子例程。我已经设法使用 Javascript 函数检测到按键，现在正尝试从 Javascript 调用 VB.Net 子例程。我已经看到提出了两种方法，但都没有成功：

1.  使用 jQuery
2.  使用 Web 方法

1) 使用 jQuery，我在 Web 浏览器中收到一条错误消息，显示 PageMethods undefined。我正在使用带有 EnablePageMethods = “True” 的 ScriptManager，并且在 Javascript 函数中有语法“PageMethods.VBsubroutine()，但似乎无法识别 PageMethods。

2）我还声明了 WebMethods 如下（用于测试目的）：

```
<System.Web.Services.WebMethod()> _
Public Sub ToggleTestButton()
    If btnTest.Text = “Alpha” Then
        btnTest.Text = “Omega” 
    Else
        btnTest.Text = “Alpha”
    End If
End Sub 
```

* * *

有些人建议应该将 WebMethods 声明为

```
<System.Web.Services.WebMethod()> _
Public Shared Function xxx() 
```

但是我得到一个错误，带有`btnTest.Text`下划线的控件。关于必须创建对象实例的事情？问题在于`Shared`. 此外，我不打算从函数中获得任何输出，因此使用 Sub.

有人建议它必须是`Public Shared Function`。请告知为什么会这样，或者是否有其他方法可以实现这一目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T14:42:31.893

webmethod 路由无法访问页面上的元素，除非我弄错了，否则应该只在需要异步执行 sub 时使用。

我认为最好的方法是在页面上放置一个隐藏按钮，然后从检测到函数调用的js中，单击该按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T15:28:51.387

当用户在他的浏览器（客户端）中按下某个键时，你想在你的 asp.net 服务器上调用 vb.net 函数吗？

如果是，那么您可以尝试ajax。

# javascript - 对于通过快速 http 响应返回的 json 对象，NodeJS 的“断言”测试失败

> ID：12174567
> 
> 赞同：3
> 
> 时间：2012-08-29T09:17:25.853
> 
> 标签：javascript, node.js, serverside-javascript

最近对 NodeJS 产生了兴趣，我终于设法拿到了一本 NodeJS 的书。书中的一个简单示例是创建一个快速服务器并编写一个测试来验证作为练习的一部分公开的简单 API。

请参考以下代码（我使用的是node v0.8.8）

服务器 (nodeExample.js)

```
 var express = require('express')
     var app = express.createServer()
     app.listen(8000)
     var msgs = []

     app.get('/', function(req, res) {
        res.send('Welcome to Node Twitter')
     })

     app.post('/send', express.bodyParser(), function(req, res) {
        if (req.body && req.body.tweet) {
           msgs.push(req.body.tweet)
           res.send({status:"ok", message:"Message received"})
        } else {
            res.send({status:"nok", message:"Message not received"})
        }
    })

    app.get('/tweets', function(req,res) {
    res.send(msgs)
    }) 
```

考试

```
var http = require('http'),
assert = require('assert')
var opts = {
  host: 'localhost',
  port: 8000,
  path: '/send',
  method: 'POST',
  headers: {'content-type':'application/x-www-form-urlencoded'}
}

var req = http.request(opts, function(res) {
 res.setEncoding('utf8')
 var data = "";
res.on('data', function(d) {
  data += d
})
res.on('end', function() {
  assert.strictEqual(data, {status:"ok", message:"Message received"})
 })
})

req.write('tweet=test')
req.end() 
```

我设法让服务器启动并运行没有问题（除了一个警告，即 express 的 createServer 方法已被弃用，尽管这似乎不是困扰我的问题）；但是当我运行测试时，assert 会抛出一个异常，表明测试失败，这显然不应该发生。

这是问题的屏幕截图

![在此处输入图像描述](../Images/1f2dae9d6b5cee7bfc8ba202d1da7f05.png)

如果您仔细观察错误，则似乎是响应部分附加了转义字符“\n”，这似乎是导致问题的原因。

我试图通过

1.  尝试不同的相等检查（equal、strictEqual 和 deepEqual）
2.  从响应中删除 utf8 编码

但没有运气（除非我当然对字符串化的测试数据执行相等性检查，针对手动删除格式的返回的字符串化响应对象）。

所以问题是，

1.  为什么以上述方式格式化响应？仅仅是为了可读性吗？
2.  假设我不允许删除格式，我该如何对刚刚收到的响应数据执行断言测试。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-29T09:55:51.480

您从服务器得到的回复是一个 JSON 字符串：

```
'{
    "status": "ok",
    "message": "Tweet received"
}' 
```

您正在将其与一个对象进行比较：

```
{status:"ok", message:"Message received"} 
```

既然我收集到你想断言你得到了正确的回复，我建议你`JSON.parse`先回复，然后将两个对象与`assert.deepEqual`：

```
assert.deepEqual(JSON.parse(data), {status:"ok", message:"Message received"}) 
```

这可能是比将字符串与对象进行比较更明智的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-14T17:30:51.777

两件事情：

```
res.on('end', function(){
  assert.deepEqual(JSON.parse(data), {"status": "ok", "message": "Tweet received"});
});

if (req.body && req.body.tweet) {
    tweets.push(req.body.tweet);
    console.log("success:" + req.body.tweet);
    res.send({"status": "ok", "message": "Tweet received"});
} else {... 
```

# java - 用于服务器应用程序的 C++ 与 Java

> ID：12174571
> 
> 赞同：7
> 
> 时间：2012-08-29T09:17:45.183
> 
> 标签：java, c++, c, latency

我需要制作低延迟服务器，其中原始数据吞吐量不如处理数千个同时连接的能力重要。我不知道用什么语言。Java 更简单，开发速度更快，界面美观，满足我的所有需求 + 对网络的良好支持（JAVA NIO 和选择器类）。但实际上我除了编程之外对java没有太多经验，所以即使我读到java之类的东西今天并不比native C/C++慢，仍然对性能有一些疑问，因为c/c++是编译成二进制代码的，但是 java .class 文件被解释，所以在翻译中必须有开销。

*   有人可以发表一下自己的经历吗？
*   有人编写了低延迟应用程序吗？
*   你的意思是更好地用于那种类型的应用程序？

编辑：应用程序将成为服务器以支持实时网络应用程序（如聊天等）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-29T09:21:45.120

通常人们想要一个低延迟的应用程序，所以我不知道你所说的低延迟是什么意思。

> 所以即使我读到像java这样的东西今天也不会比原生C/C++慢

它仍然稍微慢一些，只是在大多数情况下还不够重要。

例如，无论您使用哪种语言，网络 IO 都是网络 IO。例如，该语言不会使您的网络更快或更慢，除非在最极端的低延迟情况下。

> ，因为c/c++被编译成二进制代码，但是java .class文件被解释，

Java 在运行时被编译为本机代码，因此两个系统最终都运行本机代码。

> 所以翻译中必须有开销。

启动时有开销。但是一旦应用程序运行起来，影响就小得多了。

> 有人编写了高延迟应用程序吗？

如果您的网络具有高延迟，那么您的语言就不太重要。

> 你的意思是更好地用于那种类型的应用程序？

我建议您使用您最熟悉的语言。

> 应用程序将成为服务器以支持实时网络应用程序

在这种情况下，如果您正确编码，您的网络延迟可能会远高于应用程序的延迟。

* * *

为您提供一个广泛的概念，典型的互联网连接有 5 到 20 毫秒的延迟。典型用户只能以 50 毫秒的延迟做出反应。几乎可以用任何语言编写延迟为 20 - 50 毫秒的服务器。延迟为 200 - 500 微秒的服务器可以用 Java 或 C++ 编写。如果您想要少于 100 微秒，包括到客户端的延迟，您正在为您的核心引擎寻找专业硬件和一些 C++ 代码。在这种情况下，服务器和消费者可能会在同一建筑物中，即使不是同一个机架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T09:23:12.063

大多数 JVM 实现都使用[即时 (JIT)](http://en.wikipedia.org/wiki/Just-in-time_compilation)编译技术，因此它们几乎可以与提前编译的程序（在 C++ 或 Ocaml 中）一样高效。

我在下面采取 Linux 的观点。

`.class`JVM 通常会将您的字节码文件的热点转换为机器代码（增量地，一次地） 。

您可以考虑使用其他语言，例如 Ocaml（使用[Ocsigen](http://ocsigen.org/)作为 Web 部件）或[Opa](http://opalang.org/)

当然，您总是可以用 C（或 C++）重写应用程序的非常关键的部分，并从 Java（或 Ocaml，或其他语言）代码中调用它。

您可以在运行时生成针对实际 Web 作业量身定制的机器代码。查看[asmjit](https://asmjit.com/)或[GNU Lightning](https://www.gnu.org/software/lightning/)。您可以生成 C 代码（在运行时，如[Bismon](https://github.com/bstarynk/bismon/) - 在[本](http://starynkevitch.net/Basile/bismon-chariot-doc.pdf)报告草案中描述并由[CHARIOT](http://www.chariotproject.eu/)资助- 确实）然后将其编译为[插件](https://en.wikipedia.org/wiki/Plug-in_(computing))和[dlopen(3)](https://man7.org/linux/man-pages/man3/dlopen.3.html)和[dlsym(3)](https://man7.org/linux/man-pages/man3/dlsym.3.html)它。另请参阅[此](https://softwareengineering.stackexchange.com/a/257873/40065)答案。运行时 C 代码生成器的一个更简单的示例是我的[manydl.c](https://github.com/bstarynk/misc-basile/blob/master/manydl.c)（适用于 Linux）。

您可以考虑使用 HTTP 服务器库，例如[libonion](https://www.coralbits.com/libonion/)或[POCO](https://pocoproject.org/)或[Wt](https://www.webtoolkit.eu/wt)

您可以考虑使用[SBCL在](https://sbcl.org/)[Common Lisp](https://en.wikipedia.org/wiki/Common_Lisp)中编写您的 Web 应用程序。[https://common-lisp.net/](https://common-lisp.net/)提供了许多库- 包括与 Web 相关的库。

您可以使用[GNU guile](https://www.gnu.org/software/guile/)或[Python](https://python.org/)对您的服务器进行编码。您可以轻松找到加速 Web 服务的插件或扩展。

当然，观察到的延迟取决于您的硬件。在廉价的[RaspberryPi和在](https://rasperrypi.org/)[top500.Org](https://top500.org/)上列出的高端超级计算机上，情况会有所不同

# c# - 使用工作注释将 XSD 转换为 C# 的免费工具/扩展

> ID：12174572
> 
> 赞同：0
> 
> 时间：2012-08-29T09:17:45.840
> 
> 标签：c#, xsd, xsd.exe, xsd2code

是否有任何工具或版本的 XSD2Code 或 xsd.exe 可以生成 C# 实体以及来自 XSD2Code 的注释？

XSD2Code 和 xsd.exe 都忽略注释（对于 XSD2Code，EnableSummaryComment 只是不能很好地工作），我不想花时间分析和更改它们背后的源代码......有谁知道是否有任何完全工作和免费的选择？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-09-30T11:08:39.300

[XmlSchemaClassGenerator](https://github.com/mganss/XmlSchemaClassGenerator)支持对元素、属性和类型进行注释。它还根据限制生成 XML 文档，并且它是开源的。全面披露：我是主要作者。

```
/// <summary>
/// <para>Complex root type.</para>
/// <para>Information root.</para>
/// </summary>
[System.CodeDom.Compiler.GeneratedCodeAttribute("XmlSchemaClassGenerator", "1.0.0.0")]
[System.SerializableAttribute()]
[System.Xml.Serialization.XmlTypeAttribute("root", Namespace="http://example.org/annotations")]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlRootAttribute("root", Namespace="http://example.org/annotations")]
public partial class Root
{

    /// <summary>
    /// <para>
    ///            Test data in element.
    ///          </para>
    /// <para xml:lang="en">Minimum length: 1.</para>
    /// <para xml:lang="en">Maximum length: 50.</para>
    /// </summary>
    [System.ComponentModel.DataAnnotations.MinLengthAttribute(1)]
    [System.ComponentModel.DataAnnotations.MaxLengthAttribute(50)]
    [System.Xml.Serialization.XmlElementAttribute("TestElement", Namespace="http://example.org/annotations")]
    public string TestElement { get; set; }

    /// <summary>
    /// <para>
    ///          Optional test data in attribute.
    ///        </para>
    /// <para xml:lang="en">Minimum length: 1.</para>
    /// <para xml:lang="en">Maximum length: 50.</para>
    /// </summary>
    [System.ComponentModel.DataAnnotations.MinLengthAttribute(1)]
    [System.ComponentModel.DataAnnotations.MaxLengthAttribute(50)]
    [System.Xml.Serialization.XmlAttributeAttribute("TestAttribute", Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string TestAttribute { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T22:32:44.117

你有一个你所追求的例子吗？例如，使用 xsd2code 这个

```
<xs:attribute name="Test" use="optional">
    <xs:annotation>
        <xs:documentation>Test data number when combined with schema name provides the stub response.</xs:documentation>
    </xs:annotation>
    <xs:simpleType>
        <xs:restriction base="xs:string">
            <xs:minLength value="1"/>
            <xs:maxLength value="50"/>
        </xs:restriction>
    </xs:simpleType>
</xs:attribute> 
```

产生这个

```
/// <summary>
/// Test data number when combined with schema name provides the stub response.
/// </summary>
[System.Xml.Serialization.XmlAttributeAttribute()]
public string Test { get; set; } 
```

你追求不同的东西吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-09T10:19:49.527

我刚刚用 xsd2code 和下面的 xsd 测试了这个。看起来 xsd2code 只支持在生成的 C# 代码中出现的属性注释。

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
           xmlns:example="http://example.org/annotations"
           targetNamespace="http://example.org/annotations"
           elementFormDefault="qualified">
  <xs:annotation>
    <xs:documentation>
      Demonstration of xs:annotation xs:documentation blocks to appear in xsd2code generated C# code.
      Note: 
      - xsd.exe does not support annotations. Tested with NETFX 4.5.1 Tools.
      - xsd2code only for attributes. Teste with version 3.4.0.32990.
    </xs:documentation>
  </xs:annotation>
  <xs:element name="root" type="example:root">
    <xs:annotation>
      <xs:documentation>Information root.</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:complexType name="root">
    <xs:annotation>
      <xs:documentation>Complex root type.</xs:documentation>
    </xs:annotation>
    <xs:all>
      <xs:annotation>
        <xs:documentation>
          Elements in any order.
        </xs:documentation>
      </xs:annotation>
      <xs:element name="TestElement" type="example:string50">
        <xs:annotation>
          <xs:documentation>
            Test data in element.
          </xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:all>
    <xs:attribute name="TestAttribute" use="optional" type="example:string50">
      <xs:annotation>
        <xs:documentation>
          Optional test data in attribute.
        </xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:simpleType name="string50">
    <xs:restriction base="xs:string">
      <xs:minLength value="1"/>
      <xs:maxLength value="50"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:annotation>
    <xs:documentation>
      End of the XSD.
    </xs:documentation>
  </xs:annotation>
</xs:schema> 
```

# java - 关于引用方法和变量的 Java 约定

> ID：12174573
> 
> 赞同：5
> 
> 时间：2012-08-29T09:17:48.777
> 
> 标签：java, object, coding-style, naming-conventions

Java 约定第 10.2 节建议使用类名而不是对象来使用静态变量或方法，即`MyClass.variable1`or`MyClass.methodName1()`代替

```
MyClass Obj1 = new MyClass();    
Obj1.variable1;
Obj1.methodName1(); 
```

没有解释这背后的基本原理，尽管我怀疑这与内存使用有关。如果有人可以解释这一点，那就太好了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T09:20:28.057

我猜你的意思是“用于静态方法和变量”。

内存方面没有区别，当然除非您创建实例只是为了调用该方法。约定不是为了内存效率，而是为了编码器效率，这与代码的可读性直接相关。

理由是通过阅读

```
MyClass.methodName1() 
```

你知道它是一个静态方法，它不能使用或改变你的`Obj1`实例。

如果你写

```
obj1.variable1; // note the "o" instead of "O", please do follow conventions 
```

那么读者必须阅读您的源代码才能知道 variable1 是否是静态的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T09:22:14.950

如果您使用对象进行静态变量访问，那么编译器将只替换它`Class Name`。

所以

```
MyClass Obj1 = new MyClass();    
Obj1.variable1;
Obj1.methodName1(); 
```

它与

```
MyClass.variable1;
MyClass.methodName1(); 
```

`Now Why to differentiate? Answer is - It is for better reading If someone see method being called on Class then he immediately come to know that it is static method. Also it prevents generation of one additional object to access the method.`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T09:22:57.350

这与`public` `static`方法和变量有关。由于这些方法/变量与相应的类而不是类的实例相关联，因此最好将这些方法或变量称为`className.methodName()`或`className.variableName`

[“了解实例和类成员”](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)将是了解使用 static 关键字创建属于类而不是类的实例的字段和方法的一个很好的起点

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T09:28:04.793

只是因为，公共静态方法或公共静态变量不与任何对象相关联，而是与类相关联。尽管语言设计者提供了在对象上调用它们的灵活性，但代码的读者会混淆它们是静态变量/方法还是实例方法/变量。所以可读性是要求开发人员在类上调用它们的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T09:46:23.413

您可以使用类名表示法或使用对象访问静态成员。不建议使用对象表示法，因为它可能会非常混乱。

```
public class TheClass {
    public static final staticValue = 10;
    public static void staticMethod() {
        System.out.println("Hello from static method");
    }

    public static void main(String ... args) {
        TheClass obj = null;

        // This is valid
        System.out.println(obj.staticValue);
        // And this too
        System.out.println(obj.staticMethod());

        // And this is also valid
        System.out.println(((TheClass)null).staticValue);
        // And this too
        System.out.println(((TheClass)null).staticMethod());

    }
} 
```

如果使用类名表示法调用静态方法和变量会更清楚。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-29T09:22:15.217

静态变量属于类而不属于对象（实例）。静态变量可以通过类名直接访问，不需要任何对象。它节省了空间，不必为每个类的相同数据设置变量。

```
Syntax : <class-name>.<variable-name>

public class AA{

 static int a =10;

} 
```

**你可以打电话**

```
System.out.println(AA.a);
System.out.println(aObject.a); 
```

两个调用之间没有区别，但保持编码约定以保持更多的可读性

# optimization - 如何使用 devexpress 控件减小页面大小

> ID：12174575
> 
> 赞同：1
> 
> 时间：2012-08-29T09:17:49.083
> 
> 标签：optimization, size, devexpress, megabyte

我目前有一个页面优化问题。这是一个类似仪表板的页面，它包含带有 3 个组的 AspxNavBar（手风琴控件的模拟），组在回调面板内包含 2 个图表，在回调面板内包含 4 个网格（1 个主 + 3 个从属），具有许多组合框的过滤控件和一个回调面板。

页面的总重量约为 4 兆字节，此外，页面的首次加载会立即在相关网格（第一行在主网格中被“选中”）和带有图表的面板（用于调整图表大小）上启动回调）。

有没有办法减少页面大小，比如 html 的大小或 devexpress 控件的回调/视图状态？我已经搜索并找到了禁用行缓存的建议（实际上没有帮助），将文本框切换到本机模式（我没有文本框）等。我还禁用了所有网格的视图状态并摆脱了 2回调面板，但这也没有导致页面大小显着减小（〜1-2％）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T12:30:06.477

我已经设法使用以下方法将页面大小从**4.5Mb**减少到**575Kb**：

* * *

1.  我已经从整个页面和所有内部用户控件中禁用了 ViewState。我已经在必要的地方为单独的控件启用了它（实际上我最后根本没有想出任何视图状态）。
2.  我已经在可能的情况下禁用了某些控件的回调状态，因为我不需要任何关于回调时页面的信息，除了那些我明确地作为回调参数传递的信息。
3.  我稍微简化了布局。（去掉了过滤控件上的另外 2 个回调面板 - 这是一个内部有 2 个组合框的面板。我现在在每个组合框上执行 2 个回调而不是 1 个面板回调。组合框回调更快更健康，因为它们不要将页面布局返回为 html）。此外，我已将标签更改为跨度，将按钮更改为输入等。我摆脱了一些嵌套标签。
4.  用于`RenderMode='Lightweight'`（`AspxNavBar`实际上，仅将页面大小减少了约 20kb）
5.  改进了架构背后的代码，重构了 javascript，减少了回调和事件回发的数量（!filter 现在使用回调来应用）等。

* * *

仅此而已 =) 希望对某人有所帮助。

# cocoa-touch - 从 UITabBarController 设置类委托

> ID：12174576
> 
> 赞同：0
> 
> 时间：2012-08-29T09:17:50.790
> 
> 标签：cocoa-touch, ios5, ios6

全部，

在我以前的经历之后，我有点不愿意问这个 - 但我似乎无法在任何地方找到答案......

我在 uitabbarcontroller 中有 2 个视图控制器。其中一个是设置表 - 另一个是我的应用程序的主视图控制器。当设置更改时，我想在主视图控制器中更新一些控件。

我已经在设置视图控制器中设置了一个委托方法，它应该允许这样做 - 但显然由于设置视图控制器不是从主视图控制器调用的 - 它无法使用正常设置。

无论如何，我可以在应用程序启动时使用 tabbarcontroller 设置委托关系吗？

我非常感谢可以提供的任何帮助。

提前谢谢了...

史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:20:10.117

问题解决了......我忘记了我在 TabBarVC 和主要和设置 VC 之间有导航 VC！

# c++ - C++：作为引用或指针的基本类型成员变量

> ID：12174581
> 
> 赞同：2
> 
> 时间：2012-08-29T09:18:08.100
> 
> 标签：c++, inheritance, class-members

我想知道在 C++ 中完成设计困境的最佳方法可能是什么......

我有一个类，其中包含另一个类类型的成员变量`Base`，并且创建的真实对象是`Derived`从`Base`.

该类不需要修改这些变量，它只是使用它们。其他人正在创建这些变量。这些`Derived`类还需要转到我类中的容器（std::vector、QList 等）类，因此它们应该执行正确的复制构造和分配。

所以，我想知道什么可能是最好的：

1.  将成员变量创建为 a`Base*`并让我们管理它们以及它们使用的内存。这导致了经典的内存泄漏问题......有人在不再使用对象时忘记删除它。
2.  将成员变量创建为 a `Base&`，让我们祈祷它们在某处超出范围时不会消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:45:14.747

@hansmaad 是对的，如果您在控制对象的生命周期时遇到问题，您应该与创建或管理它的人共享其所有权。
您有 2 个选项：
1)`boost::shared_ptr`或者`std::tr1::shared_ptr`
您可以轻松地将此类用于任何类型`Base`而无需更改`Base`，但是如果您在多线程环境中工作，则很难实现线程安全，`shared_ptr`并且不要忘记是否将对象创建为共享使用此类之一，您不应该直接管理对象的生命周期，并且从原始指针创建新的共享对象是不合法的，您应该始终复制构造共享对象。例如：

```
boost::shared_ptr<Base> sharedObject( new Drived() );
boost::shared_ptr<Base> validCopy( sharedObject );    // Ok share ownership
Base* p = sharedObject.get();
boost::shared_ptr<Base> invalidCopy( p );    // Error, can't create new shared_ptr from raw pointer 
```

2）`boost::intrusive_ptr`
您可以轻松地使其线程安全，并且可以将其作为原始指针或智能指针传递，因为它可以从原始指针构造，因为引用计数是在类中实现的，但是您应该更改类的定义并添加引用计数机制

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T09:27:58.023

拥有引用成员变量总是一个糟糕的选择，因为编译器生成的赋值和移动赋值会做错事，或者不是人们所期望的。

坚持成员变量的指针或智能指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T09:25:36.363

你应该考虑所有权。谁拥有这些对象？如果这个问题没有明确的答案，您应该使用`std::shared_ptr<Base>`（共享所有权）。如果有一个类拥有该对象，而所有其他类只使用它们，则可以使用 a `std::unique_ptr<Base>`，一个指针容器，`boost::ptr_vector`或者如果没有多态性，它只拥有具体实例的类。在所有其他类中，您可以使用指向该对象的普通指针（首选作为类成员）或引用（首选作为参数，如果不允许 null）。

案例 1 - 共享所有权

```
class IWorkOnBaseObjects
{
    std::vector<std::shared_ptr<Base>> mySubset;
};

class MeToo
{
    std::shared_ptr<Base> iNeedThisOne;
}; 
```

案例2

```
class HomeOfBaseObjects
{
    std::vector<std::uniqe_ptr<Base>> baseObjects;
};

class IWorkOnBaseObjects
{
    std::vector<Base*> mySubset;
}; 
```

案例3

```
class A : public Base{};
class B : public Base{};

class HomeOfAObjects
{
    std::vector<A> aObjects;
};

class HomeOfBObjects
{
    std::vector<B> bObjects;
};

class INeedABaseObject
{
    Base* thisOne;
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T09:31:05.150

我会为您的向量（即 , `vector<Base *>`not `vector<Base>`）和您的容器类使用指针，原因如下：

*   如果将派生对象存储在向量中，则该向量可能会重新调整大小，这会导致所有对象“移动”到内存中的新位置。这将使所有未完成的指针和引用无效
*   如果您的容器包含引用，则无法像包含指针那样轻松地复制它，因为引用只能在定义时绑定（因此在构造函数中通过`MyClass::MyClass(int &a) : memberA(a) {}`，如果内存服务）
*   指针可以根据需要通过其他方式（例如 set 方法）进行更改，并且可以在缺少信息的情况下设置为 null

就所有权而言，jrok 是第一个说的：`shared_ptr<>`是你的朋友。不要重新发明轮子，只需使用标准库为您简化事情。在这种情况下，您唯一需要担心的是循环指针（即对象指向自身，因此始终存在有效指针）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T09:35:31.540

引用成员变量要考虑的第一件事是您的类（不是`Derived`，将具有作为指针或引用的数据成员的类`Base`）是否需要值语义（这是另一种说法，“正确复制和分配”）。

如果是这样，那么引用成员变量或多或少马上就不可能了，因为它们不能被重新安置。在一些奇怪的情况下，无论如何你都可以使用它们，但你不妨假设你不会，并使用指针。

引用数据成员有时对具有“实体语义”的类型很有用（也就是说，它们根本不分配，可能复制也可能不复制），但它们仍然没有给你带来很多好处。它们还可能诱使您误入编写带有`const Base&`参数的构造函数并将其存储在引用数据成员[*] 中的错误。

谁拥有对象（并负责释放它）完全独立于您使用的是指针还是引用。可能有一个一般约定，不要对你拥有的东西使用引用（并且*应该*有一个约定，不要对你拥有的东西使用原始指针，你应该选择或编写一个合适的智能指针。智能指针类可以保存一个原始指针）。但这只是惯例。当且仅当你有一个指针时，你不应该假设你管理内存。

总结：使用指针，然后单独决定如何管理内存。

[*] 这是一个错误，因为最终有人会不小心在初始化程序中使用临时对象，然后您的类的实例及其引用数据成员将比临时对象寿命更长。出于这个原因，在返回后存储引用以供使用的东西不应该带`const &`参数，即使它们不修改对象。他们可以`const *`取而代之。在 C++11 中，如果还有一个右值引用重载，我想它们可能没问题，以防止`const&`为临时选择重载，但这不是我尝试过的东西。

# java - 如何使用 java.. 从 .prn (pcl6) 文件中提取所需数据？

> ID：12174583
> 
> 赞同：2
> 
> 时间：2012-08-29T09:18:12.063
> 
> 标签：java

```
// extract data from .prn 
```

如何使用 java 或任何其他语言从打印机生成的哑 .prn 文件 (pcl6) 中提取数据。是否有任何用于此的 java Api，例如用于 pdf 文件读取 (iText) 的 Api。我用谷歌搜索了很多，但还没有发现
任何有用的东西。谢谢大家...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T09:56:12.130

.prn 文件将包含为其生成的任何特定打印机的代码，如果您知道这些代码，您可以提取它们，其余的将是纯文本，然后可以保存到普通的 .txt 文件中。

Workarround 会将其转换为 pdf 并获取内容以及如何获取内容，但我认为这在编程上并不简单。因此您可以使用 PDF 打印机驱动程序，例如[CutePDF](http://www.cutepdf.com/)或[GhostPCL](http://www.ghostscript.com/GhostPCL.html)

# ruby-on-rails - 如何访问在 EngineYard 中启动的 Resque Web UI

> ID：12174586
> 
> 赞同：1
> 
> 时间：2012-08-29T09:18:24.143
> 
> 标签：ruby-on-rails, resque, engineyard

我有一个在 EngineYard 上运行的项目，我已经开始 resque-web

```
Starting 'resque-web'...
'resque-web' is already running at http://0.0.0.0:5678 
```

从命令行，我可以看到工人的状态，有 3 个工人处于空闲状态。

我无法通过访问 xxxx:5678 看到 Resque Web UI，如果 xxxx 是我可以访问我的应用程序的地方。如何使用 Web 界面查看工作人员及其状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T17:13:29.313

像这里建议的那样在 routes.rb 中安装 resque 网络： [Resque, Devise and admin authentication](https://stackoverflow.com/questions/7283728/resque-devise-and-admin-authentication)

```
 resque_constraint = lambda do |request|
    request.env['warden'].authenticate? and request.env['warden'].user.admin?
  end

  constraints resque_constraint do
    mount Resque::Server, :at => "/admin/resque"
  end 
```

我发现您可能会在尝试通过 engineyard 上的 HTTP 访问 resque 网络时遇到“403 - 禁止”错误。在这种情况下，请尝试使用 HTTPS。

# php - Drupal 7 drupal_mail 剥离 HTML？

> ID：12174591
> 
> 赞同：5
> 
> 时间：2012-08-29T09:18:34.483
> 
> 标签：php, html, drupal, sendmail, content-type

我有一个自定义模块，我正在尝试使用 drupal_mail 函数 (D7) 生成 HTML 电子邮件。邮件正在通过，甚至显示文本/html，但是在到达收件箱之前，某处似乎正在剥离 HTMl。

首先，在一个函数中，我正在构建我的标题/正文/其他变量并发送到自定义函数：

```
 $body = "We thought you'd like to know that ".$fullname." has marked your project as completed.
    <br /><br />
    Please visit the link at <a href='http://".$_SERVER['HTTP_HOST']."/survey/customer/".$customer[0]->unique_id."'>http://".$_SERVER['HTTP_HOST']."/survey/customer/".$customer[0]->unique_id."</a> to take the survey.";
    $returnMail = latch_send_mail('pro_realized',$customer[0]->customer_email,$user->mail,$title,$body); 
```

然后我有 latch_mail latch_send_email 功能：

```
function latch_mail($key, &$message, $params) {
    $headers = array(
    'MIME-Version' => '1.0',
    'Content-Type' => 'text/html; charset=UTF-8; format=flowed',
    'Content-Transfer-Encoding' => '8Bit',
    'X-Mailer' => 'Drupal'
);

foreach ($headers as $key => $value) {
    $message['headers'][$key] = $value;
}

$message['body'][] = $params['body'];
$message['subject'] = $params['subject'];
} 
```

和

```
function latch_send_mail($key,$to,$from,$title,$body,$headers='') {
    $params['body']=$body;
    $params['subject'] = t($title);
    return drupal_mail('latch', $key, $to, language_default(), $params, $from,TRUE);
} 
```

我希望电子邮件带有我的 a 标签和 br 标签，但它是这样通过的：

```
We thought you'd like to know that John Doe has marked your project as completed. Please visit the link at http://latch.local/survey/customer/34c91b8883cd70b32c65feb7adf9c393 [1] to take the survey. [1] http://latch.local/survey/customer/34c91b8883cd70b32c65feb7adf9c393 
```

不知何故，它把我的链接变成了脚注，同时完全删除了 br 标签。

您可以提供的任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T23:32:31.587

开箱即用，Drupal 无法发送 HTML 电子邮件。为了让 Drupal 支持 HTML 电子邮件，您需要 HTML Mail 模块。[http://drupal.org/project/htmlmail](http://drupal.org/project/htmlmail) 一旦你有了所有的 HTML 就应该这样发送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-31T14:49:53.947

这是一种具有完整解释的替代方法。首先，安装并启用[Mime Mail](https://www.drupal.org/project/mimemail)模块。您可以阅读[README.txt](http://cgit.drupalcode.org/mimemail/tree/README.txt)以获取有关如何使用它的完整说明。我给你一个简短的版本。

您需要为您的模块启用 Mime Mail。您可以使用`hook_enable`或`hook_update_N`在 中执行此操作`example.install`：

```
function example_enable() {
  mailsystem_set(array(
    'example_examplekey' => 'MimeMailSystem',
  ));
} 
```

当您转到时，`admin/config/system/mailsystem`您会看到已为您的模块添加了一个新条目：

> 示例模块（examplekey key）类
> 
> 哑剧邮件系统

现在您不再需要指定任何`text/html`标题，Mime Mail 会处理这个问题。所以你不需要这个：

```
$headers['Content-Type'] = ... 
```

如果需要，您可以将`$message['plaintext']`非 HTML 替代方案添加到您的邮件中，但这不是必需的。

就是这样！

# java - Highcharts、MySql 和 Vaadin

> ID：12174592
> 
> 赞同：0
> 
> 时间：2012-08-29T09:18:37.513
> 
> 标签：java, jquery, highcharts, vaadin

我正在寻找一个示例，将 Highcharts 与来自 Java 中的 MYSQL 的数据与 Vaadin 框架结合使用。我真的不知道这是否可能。当我尝试使用 Vaadin InvientCharts 时，我被重定向到 Highcharts。Highcharts 看起来对我的项目很有希望，但我想与 Java 和 Mysql 一起使用。如果我错了，请详细说明。我是这方面的初学者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:57:23.000

对的，这是可能的。Invient Charts（它是基于 JavaScript 的 HighCharts 的 Java 包装器）完全独立于数据源。Invient Charts 包包含说明和如何在您的 Vaadin 项目中使用它的示例。

您可以使用[Vaadin SQLContainer 插件](https://vaadin.com/directory#addon/vaadin-sqlcontainer)从数据库中获取数据。该链接后面有一个简单的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T02:52:57.260

您可以使用 JPAContainer 或 HbnContainer。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-06T12:58:49.607

该插件建议我的@miq 似乎不再维护。

这个看起来更流行： [https ://vaadin.com/directory#!addon/highchartsapi-add-on](https://vaadin.com/directory#!addon/highchartsapi-add-on)

# android - 删除选中的复选框

> ID：12174597
> 
> 赞同：0
> 
> 时间：2012-08-29T09:18:45.387
> 
> 标签：android, checkbox, delete-row

我正在尝试删除选定的复选框。在下面的代码之后我不知道该怎么做：我正在使用一个简单的光标适配器。我还想知道如何选择和取消选择所有复选框。我已经研究了一切，但找不到任何答案。我被困了3天。另外，我不确定下面的代码是否是我需要的正确路径。

```
public class SecondCheckedListView extends ListActivity {

 private Cursor mCursor;
 private Long mRowId;
DBAdapter db = new DBAdapter(this);

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.secondcheckedlistview);
    db.open();
    fillData();

 }

private void fillData() {
    mCursor = db.getAllContacts();
   startManagingCursor(mCursor);
   String[] from = new String[]{DBAdapter.KEY_FIRSTNAME, DBAdapter.KEY_LASTNAME}; 
   int[] to = new int[]{R.id.textView1, R.id.textView2};
   SimpleCursorAdapter d = 
           new SimpleCursorAdapter(this, R.layout.rowcheckedlistview, mCursor, from, to);
       setListAdapter(d);

}

public class MyAdapter extends SimpleCursorAdapter {

    private final Context mContext;
    private final int mLayout;
    private final Cursor mCursor;
    private final int mNameIndex;
    private final int mIdIndex;
    private final LayoutInflater mLayoutInflater;

    private final class ViewHolder {
            public TextView firstname;
            public TextView lastname;
            public CheckBox cBox;
    }
    public MyAdapter(Context context, int layout, Cursor c,
            String[] from, int[] to) {
        super(context, layout, c, from, to);
        this.mContext = context;
        this.mLayout = layout;
        this.mCursor = c;
        this.mNameIndex = mCursor.getColumnIndex(DBAdapter.KEY_FIRSTNAME);
        this.mIdIndex = mCursor.getColumnIndex(DBAdapter.ROW_ID);
        this.mLayoutInflater = LayoutInflater.from(mContext);

    }

    @Override
    public View getView(final int pos, View convertView, ViewGroup parent) {
        if (mCursor.moveToPosition(pos)) {
            ViewHolder viewHolder;
            if(convertView == null) {
                convertView = mLayoutInflater.inflate(mLayout, null);

                viewHolder = new ViewHolder();
                viewHolder.firstname = (TextView)     convertView.findViewById(R.id.textView1);
                viewHolder.lastname = (TextView) convertView.findViewById(R.id.textView2);
                viewHolder.cBox = (CheckBox) convertView.findViewById(R.id.bcheck);

                convertView.setTag(viewHolder);

            }else{
                viewHolder = (ViewHolder) convertView.getTag();
            }
            String firstname = mCursor.getString(mNameIndex);
            String rowId = mCursor.getString(mIdIndex);

}
        return convertView;
    }

    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:43:02.527

你是什​​么意思“删除”？您想从列表视图中删除复选框吗？您可能需要执行类似 viewHolder.RemoveView(cBox); 的操作。

如果您想选择/取消所有复选框，您可能需要基于其他一些按钮或复选框。我用另一个复选框来做到这一点，如下所示：

```
private OnClickListener setSelectAllListener = new OnClickListener() {
    @Override
    public void onClick(View v) {
        selectAllTouched = true;
        if (!selectAllCheck.isChecked()) {
           selectAll = false;
           studs.notifyDataSetChanged();
         }
        else {
           selectAll = true;
           studs.notifyDataSetChanged();
        }
    }
}; 
```

然后在我的自定义适配器中对列表视图中的每个复选框进行处理，我使用这个：

```
 if (selectAllTouched) {
            if(selectAll){
                holder.here.setChecked(true);
                itemCheckedHere.set(pos, true);
                int who= new Integer(holder.text2.getText().toString());
                mDbHelper.updateAttend(who, classnum, ATTEND, 1, attendDate );
            }
            else{
                holder.here.setChecked(false);
                itemCheckedHere.set(pos, false);
                int who = new Integer(holder.text2.getText().toString());
                mDbHelper.updateAttend(who, classnum, ATTEND, 0, attendDate );
            }
        } 
```

我使用了一个稀疏数组 itemCheckedHere 来保存所有复选框的值，因此滚动不会改变结果视图上的值。

# google-maps - 2013/5/19 之后呢？

> ID：12174599
> 
> 赞同：1
> 
> 时间：2012-08-29T09:18:49.787
> 
> 标签：google-maps, google-maps-api-2

您知道如何关闭 Google Maps API 2 吗？会有一种警报而不是应用程序？

他们的网站上没有太多关于它的信息 [https://developers.google.com/maps/documentation/javascript/v2/reference](https://developers.google.com/maps/documentation/javascript/v2/reference)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:17:17.707

尚未宣布任何内容。有关 Google Maps API 的公告通过博客发布：http: [//googlegeodevelopers.blogspot.com/](http://googlegeodevelopers.blogspot.com/)我建议现在升级。

# jquery - 在 IE9 回调上对 JSON 的 jQuery AJAX 请求未定义

> ID：12174601
> 
> 赞同：1
> 
> 时间：2012-08-29T09:18:51.410
> 
> 标签：jquery, json, internet-explorer

就在今天，我注意到我的 IE 有一个重大问题。

我有一个循环，每 5 秒接收一次有关系统和用户的各种详细信息，并根据需要更新页面上的值。我只是通过检查 HTML 中的必需值来构建查询，例如：

```
var query = '?name=value&other=bar';
if($('input.something').attr('checked') == 'checked') {
   query += '&more=info';                      
} 
```

构建查询后，我使用 $.get 检索信息：

```
$.get('json_builder.php' + query, function(callback) {
   alert(callback);
}); 
```

**我的回调是一个 JSON 字符串，我使用$.parseJSON(callback);**将其转换为对象；我使用该对象来访问我的数据。

我在除 IE 之外的所有浏览器上收到带有 JSON 回调的警报，在 IE 中我得到“未定义”。

但是，请求通过了，正如在开发人员工具部分中我看到的响应实际上是存在的，但由于某种原因，变量“回调”被保留为“未定义”。

我尝试使用 $.getJSON 而不是 $.get - 结果相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T01:13:00.370

我遇到了这个问题，但是经过大量试验和错误后，我将我的 php 标头代码从...

```
header('Content-Type: application/json; charset=utf8'); 
```

至...

```
header('Content-Type: application/json'); 
```

为我解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:04:15.817

我将使用 $.ajax 构建它，如下所示，不确定这是否是您已经尝试过的：

```
var dataToSend = {'name':'value', 'other':'bar'};
if($('input.something').attr('checked') == 'checked') {
   dataToSend.push({'more':'info'});
}
    $.ajax({
    url:'json_builder.php',
    data:dataToSend,
    success function(callback) {
       alert(callback);
        },
    dataType:'json'
    }); 
```

# php - 使用前缀的 PHPUnit 测试文件

> ID：12174602
> 
> 赞同：4
> 
> 时间：2012-08-29T09:18:55.183
> 
> 标签：php, unit-testing, testing, phpunit

我需要测试一系列子文件夹中的所有类。但是，在我进行大型重构之前，我不想测试这些子文件夹中的其他文件。

我要测试的文件都以 开头，`class.`例如.`class.apis.php``class.something.php`

因此，为了运行我的测试，我对 PHPUnit 进行了以下配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<phpunit backupGlobals="true" backupStaticAttributes="true" colors="true"
    convertErrorsToExceptions="true"
    convertNoticesToExceptions="true" convertWarningsToExceptions="true"
    processIsolation="false"
    stopOnFailure="false" syntaxCheck="true" verbose="true"
    strict="true">
    <php>
        <includePath>../</includePath>
    </php>

    <testsuites>
        <testsuite name="MSBO Test Suite">
            <directory>PHPUnit</directory>
        </testsuite>
    </testsuites>

    <filter>
        <whitelist addUncoveredFilesFromWhitelist="true">
            <directory suffix=".php">../classes/</directory>
            <directory suffix=".php">../modules/</directory>
            <exclude>
                <directory>../classes/external/</directory>
            </exclude>
        </whitelist>
    </filter>
</phpunit> 
```

但我找不到任何关于如何向白名单添加前缀的信息。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T18:26:49.683

我们使用不同的扩展名，而不是前缀，所以我们有：

```
<directory suffix=".class">lib/UTIL</directory> 
```

您可能可以在文件名过滤器中使用通配符，尽管我没有尝试过。

```
<file>lib/UTIL/AJAX*.class</file> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-05T20:42:48.207

相当老的线程，但只是为了补充以前的回应。此功能是为 PHPUnit 6.5.10 添加的。您可以在以下位置查看相关更新：

*   [https://github.com/sebastianbergmann/phpunit/issues/3218](https://github.com/sebastianbergmann/phpunit/issues/3218)
*   [https://github.com/sebastianbergmann/phpunit/commit/2d53bd5ae8ec6f81bb3be9d397f1f4cfac69ff97](https://github.com/sebastianbergmann/phpunit/commit/2d53bd5ae8ec6f81bb3be9d397f1f4cfac69ff97)

也可在`phpunit >v7.2`（经过测试`v7.5.17`并正常工作）。不确定添加了哪个特定版本。

# iphone - 如何强制接收 iOS 上的反向地理编码数据的语言？

> ID：12174606
> 
> 赞同：4
> 
> 时间：2012-08-29T09:19:08.490
> 
> 标签：iphone, objective-c, locale, reverse-geocoding

当我打电话时

```
geocoder reverseGeocodeLocation:currentLoc completionHandler: 
```

我根据 iPhone 上设置的语言环境获取所有数据（城市、县、...）。

我如何强制始终以英语获取这些数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-01-20T02:19:32.657

对于未来的读者来说，接受的答案是不正确的（至少不再是）。

```
UserDefaults.standard.set(["en"], forKey: "AppleLanguages")
gc.reverseGeocodeLocation(loc) {
    print($0 ?? $1!)

    UserDefaults.standard.removeObject(forKey: "AppleLanguages")
    print(UserDefaults.standard.object(forKey: "AppleLanguages") as! [String])
} 
```

调用`removeObject(forKey:)`很重要，因为您要将返回的值重置为`UserDefaults`系统设置。一些答案使您保持调用的原始值`UserDefaults.standard.object(forKey: "AppleLanguages")`并在获取地址后对其进行设置，但这将阻止您`UserDefaults`与 iOS“设置”应用程序中的全局语言首选项同步。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T13:16:35.250

您不能强制使用从`CLGeocoder`或检索的地理数据的语言`MKReverseGeocoder`。它始终是设备的系统语言。如果您想获取英文数据，您需要构建自己的地理编码器，这相对容易使用[Google Maps API](https://developers.google.com/maps/documentation/geocoding/)实现。

这是 Google Maps API 中支持的语言的电子表格： [https ://spreadsheets.google.com/pub?key=p9pdwsai2hDMsLkXsoM05KQ&gid=1](https://spreadsheets.google.com/pub?key=p9pdwsai2hDMsLkXsoM05KQ&gid=1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-15T09:42:16.337

**更新斯威夫特 4**：

只需使用此代码强制以英文返回数据：

```
func fetchCityAndCountry(from location: CLLocation, completion: @escaping (_ locality: String?, _ country:  String?, _ error: Error?) -> ()) {
    CLGeocoder().reverseGeocodeLocation(location, preferredLocale: Locale.init(identifier: "en")) { placemarks, error in
        completion(placemarks?.first?.locality,
                   placemarks?.first?.country,
                   error)
    }
} 
```

您可以更改区域设置标识符以将数据翻译成任何其他语言（“ca”、“es”、“fr”、“de”...）。

例如，可以像这样调用此函数：

```
fetchCityAndCountry (from: userLocationCL) { locality, country, error in
   guard let locality = locality, let country = country, error == nil else { return }
   // your code
} 
```

其中 userLocationCL 是当前用户位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-12T12:42:19.423

iOS 11 有一个新`-reverseGeocode...`方法可以接受要使用的语言环境：

```
- (void)reverseGeocodeLocation:(CLLocation *)location preferredLocale:(NSLocale *)locale
    completionHandler:(CLGeocodeCompletionHandler)completionHandler 
```

快速签名：

```
func reverseGeocodeLocation(_ location: CLLocation, preferredLocale locale: Locale?, completionHandler: @escaping CLGeocodeCompletionHandler) 
```

放置您喜欢的任何语言环境。此示例仅使用当前语言环境

```
NSLocale *currentLocale = [NSLocale currentLocale];
[self.geocoder reverseGeocodeLocation:self.location preferredLocale:currentLocale
    completionHandler:^(NSArray<CLPlacemark *> * _Nullable placemarks, NSError * _Nullable error) {

    // Handle the result or error
}]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-10T04:36:02.283

只需将语言环境设置为特定您的语言

```
let locale = Locale(identifier: "en_US")
CLGeocoder().reverseGeocodeLocation(location, preferredLocale: locale, completionHandler: {(placemarks, error) in

}) 
```

# c# - 附加属性抛出 ParseException

> ID：12174610
> 
> 赞同：3
> 
> 时间：2012-08-29T09:19:20.690
> 
> 标签：c#, wpf, xaml, attached-properties

我已按照[将自定义属性添加到 XAML 中的元素中的说明进行操作？](https://stackoverflow.com/questions/5782864/wpf-xaml-custom-attribute-tags)但不幸的是，设计师告诉我他找不到该元素，并且在启动程序时我得到一个 XamlParserException 并显示消息*Cannot set unknown member '{clr-namespace:myNs}MediaElementProperties.MediaId'*。

我的设置：

*   `XamlReader.Load(fileStream)`使用显示命令动态加载的 Xaml-Page
*   使用如下代码的内容页面本身：

    ```
    <MediaElement myNs:MediaElementProperties.MediaId="test" ... /> 
    ```

    其中 myNs 定义为

    ```
     xmlns:myNs="clr-namespace:MyNamespace" 
    ```

*   MediaElementProperties 的定义如下所示：

    ```
    namespace MyNamespace {
    public static class MediaElementProperties
    {
        public static readonly DependencyProperty MediaIdProperty = 
           DependencyProperty.Register("MediaId", typeof(string), typeof(MediaElementProperties), new FrameworkPropertyMetadata(string.Empty));

        public static string GetMediaId(UIElement element)
        {
            return (string)element.GetValue(MediaIdProperty);
        }

        public static void SetMediaId(UIElement element, string value)
        {
            element.SetValue(MediaIdProperty, value);
        }
    }} 
    ```

你有什么想法为什么我不断收到异常？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T09:26:39.550

[`RegisterAttached`](http://msdn.microsoft.com/en-us/library/system.windows.dependencyproperty.registerattached.aspx)如[Zabavsky 所述](https://stackoverflow.com/questions/12174610/attached-properties-throwing-parseexception#comment16296592_12174610)[，](https://stackoverflow.com/users/1199711/zabavsky)附加属性需要注册。

使用时，`XamlReader`您可能需要完全限定您的`xmlns`，即使代码在同一个程序集中，即

```
xmlns:myNs="clr-namespace:MyNamespace;assembly=MyApplication" 
```

# javascript - 在用户使用动画滚动 175px 后缩小固定的 Div

> ID：12174611
> 
> 赞同：0
> 
> 时间：2012-08-29T09:19:23.390
> 
> 标签：javascript, jquery, css-position, onscroll

我有一个固定在页面顶部的 div，它包含到网站的导航。它的高度为 175 像素。当您向下滚动页面时，此 DIV 将继续显示。

当用户向下滚动页面 175px 并在向下滚动页面时保持在 90px 时，我希望这个 div 缩小到 90px 的高度。当他们向上滚动到顶部时，我希望 DIV 恢复到原来的 175px 高度。

我希望在这样做时制作动画（最好向上滑动和向下滑动），并且更喜欢使用 CSS3 来这样做......

这是我到目前为止所拥有的一个小提琴，但因为我是一个查询菜鸟，不知道该怎么做...... [http://jsfiddle.net/bnsUB/](http://jsfiddle.net/bnsUB/)

**编辑：** 我忘了提到我在这个 DIV 中也有内容，需要在容器向上/向下滑动时调整其填充等。因此，如果这些填充值也可以缩小/增长，那将是一个额外的好处

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T09:32:47.537

您需要根据`$.scrollTop()`窗口的当前值触发一个动作。

就像是：

```
$(document).scroll(function(){
    if ($(this).scrollTop()>175){
        // animate fixed div to small size:
        $('.wrapper').stop().animate({ height: 90 },100);
    } else {
        //  animate fixed div to original size
        $('.wrapper').stop().animate({ height: 175 },100);
    }
}); 
```

这里是：http: [//jsfiddle.net/bnsUB/4/](http://jsfiddle.net/bnsUB/4/)

如果您想为任何其他内容（例如填充和边距）设置动画，只需将它们作为值添加到您传递给`.animate()`函数的对象中。（例如 -`{ height: 175, 'padding-top': 20, 'margin-top': 10 }`等等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:41:09.050

```
$(window).scroll(function()
{
    if  ($(window).scrollTop() == $(document).height() - $(window).height())
      {
        $('#tt').animate({height:'90px'}, 500);
      }

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-03T12:39:28.453

这是香草JS和CSS动画的解决方案：

JS：

```
window.onscroll = function () {
  scrollFunction()
};

function scrollFunction() {
  if (document.body.scrollTop > 175 || document.documentElement.scrollTop > 175) {
    document.getElementById("header").classList.add("narrow");
  } else {
    document.getElementById("header").classList.remove("narrow");
  }
} 
```

CSS：

```
#header{
  transition: 0.2s;
  height: 175px;
}
#header.narrow{
  height: 90px !important;
}
#header .anyelementclass{
  transition: 0.2s;
}
#header.narrow .anyelementclass{
  /* any style here */
} 
```

# c# - 无法向群组电子邮件 ID 发送邮件

> ID：12174616
> 
> 赞同：1
> 
> 时间：2012-08-29T09:19:43.343
> 
> 标签：c#, email, smtp

我正在使用 smtp (c#) 并尝试将邮件发送到组 id（官方 id），但它无法发送邮件。尽管通过相同的代码我能够将邮件发送到个人 id。知道这里可能有什么问题。以下我正在使用的代码

```
MailMessage mail = new MailMessage();
mail.To = "group@company.com";
mail.From = "me@company.com";
mail.Subject = "Test Mail: please Ignore";
mail.Body = body;
SmtpMail.SmtpServer = "mailhub.int.company.com";
SmtpMail.Send(mail) 
```

我的邮箱中出现以下错误：

```
Delivery has failed to these recipients or distribution lists:

group@company.com
Not Authorized. You are not authorized to send to this recipient or distribution list. For distribution lists please check approved senders in the corporate directory.

  _____  

Sent by Microsoft Exchange Server 2007    

Diagnostic information for administrators:

Generating server: GSPWMS005.int.company.com

group@company.com
#550 5.7.1 RESOLVER.RST.AuthRequired; authentication required ## 
```

从错误中我可以知道缺少某些身份验证，但不确定是哪个身份验证或如何解决它。如果我通过我的前景向该组发送邮件，那么它的工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:31:54.490

[http://msdn.microsoft.com/en-us/library/59x2s2s6.aspx](http://msdn.microsoft.com/en-us/library/59x2s2s6.aspx)

```
MailMessage message = new MailMessage(from, to);

message.Body = "This is a test e-mail message sent by an application. ";
message.Subject = "Test Email using Credentials";

NetworkCredential myCreds = new NetworkCredential("username", "password", "domain");
CredentialCache myCredentialCache = new CredentialCache();        
try 
{
    myCredentialCache.Add("ContoscoMail", 35, "Basic", myCreds);
    myCredentialCache.Add("ContoscoMail", 45, "NTLM", myCreds);

    client.Credentials = myCredentialCache.GetCredential("ContosoMail", 45, "NTLM");
    client.Send(message);
    Console.WriteLine("Goodbye.");
}
catch(Exception e)
{
    Console.WriteLine("Exception is raised. ");
    Console.WriteLine("Message: {0} ",e.Message);
} 
```

# opengl-es - 在片段着色器中翻转纹理时出现别名

> ID：12174618
> 
> 赞同：1
> 
> 时间：2012-08-29T09:19:56.697
> 
> 标签：opengl-es, opengl-es-2.0, glsl

我创建了一个多纹理片段着色器，我想在其中翻转其中一个纹理，但是这样做时，我的纹理变得锯齿状。这个问题有解决方案吗？

![锯齿状边框](../Images/a1514dea3de7e5a4bfb1a233977336e3.png)

这是我的片段着色器代码：

```
void main(void)
{
    lowp vec4 camera = texture2D(texture0, destinationTexCoord);
    lowp vec4 viewfinder = texture2D(texture1, vec2(destinationTexCoord.x, 1.0 - destinationTexCoord.y));

    lowp vec4 result = mix(camera, viewfinder, viewfinder.a);
    gl_FragColor = result;
} 
```

我正在使用的纹理过滤：

```
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE); 
```

一些背景信息：我在我的片段着色器中混合这些纹理（混合代码被剥离）所以我不是在寻找一个解决方案，我旋转第二个平面并将它们合并到帧缓冲区中。我想知道在我的片段着色器中翻转/旋转纹理坐标是否是个好主意。

最后，我将传递一个统一的说法：旋转或不旋转，从而导致一个纹理是否旋转。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:33:30.437

对 destinationTexCoord 使用 mediump 而不是 lowp 将提高 vec2(destinationTexCoord.x, 1.0 - destinationTexCoord.y) 计算的采样率。但是，我的建议是使用两个不同的 vec2，而不是使用依赖纹理读取。即*cameraTexCoord*和*viewfinderTexCoord*。您可以避免在片段着色器中进行 mediump 计算，并利用硬件（希望）优化的垂直片段插值。

实际上没有理由将 lowp 用于纹理坐标，除非它们是相关的，在这种情况下，lowp 可能更适合片段着色器计算。否则，根据我的经验，lowp 并没有带来任何收益（虽然我只知道 iOS 上的 PowerVR 硬件）。

# ruby-on-rails - 如何使用 gem 零剪贴板导轨？

> ID：12174621
> 
> 赞同：2
> 
> 时间：2012-08-29T09:20:00.650
> 
> 标签：ruby-on-rails, zeroclipboard

我在Gemfile中添加了gem [zero-clipboard-rails](https://github.com/nragaz/zero-clipboard-rails)，运行`bundle install`，不明白下一步是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T20:01:15.783

zero-clipboard-rails 不适用于最新的 Rails 版本。

我刚刚发布了一个 gem 来解决这个问题。

*   [zeroclipboard-rails](https://github.com/HaNdTriX/zeroclipboard-rails)。

查看 github-pages 以获取使用说明。

# javascript - 如何在 google.maps.DirectionsTravelMode 中使用公交模式？

> ID：12174631
> 
> 赞同：0
> 
> 时间：2012-08-29T09:20:42.267
> 
> 标签：javascript, html, google-maps

嘿，我正在研究 gmap 2。当我使用 travlmode DRIVING 时，我在使用 TRANSIT 模式时获得了适当的公共交通工具旅行时间，它提供了适当的时间，但我想显示源和目的地之间的所有站点，并想在 gmap 上使用一些图像作为标记？

# c# - 无法使用 c# 从 autoingest 下载 iTunes Connect Weekly Opt-In Report（GZip 标头中的幻数不正确错误）

> ID：12174632
> 
> 赞同：0
> 
> 时间：2012-08-29T09:20:44.513
> 
> 标签：c#, app-store-connect

我们成功地从 iTunes autoingest 端点获取了许多报告： **https ://reportingitc.apple.com/autoingestion.tft**

然而，一些报告，而不是直接在正文中返回数据，而是返回一个 ZIP 文件，每当我们尝试读取响应时，我们都会得到：

**GZip 标头中的幻数不正确。确保您传入的是 GZip 流。**

响应标头如下所示，指示 zip 文件：

{
内容编码：
内容处置：附件；文件名=O_S_W_XXXXXXXX_20120805.zip
文件名：O_S_W_XXXXXXXX_20120805.zip
传输编码：分块
内容类型：应用程序/a-gzip
日期：2012 年 8 月 29 日星期三 08:54:35 GMT
Set- Cookie：JSESSIONID=XXXXXXXXXXXXXXXX；路径=/
服务器：Apache-Coyote/1.1
}

但是我真的不知道如何访问这个附件，我认为这个错误可能与我试图在一个操作中准备好附件和响应的其他部分而实际上只有部分响应是拉链。

代码看起来像这样：

```
HttpWebRequest w = (HttpWebRequest)WebRequest.Create(url);
w.Method = "POST";

byte[] byteArray = Encoding.UTF8.GetBytes(postData);

w.ContentLength = byteArray.Length;

using (Stream dataStream = w.GetRequestStream())
{

dataStream.Write(byteArray, 0, byteArray.Length);

dataStream.Close();

using (WebResponse resp = w.GetResponse())
{

    using (System.IO.Compression.GZipStream s = new System.IO.Compression.GZipStream(resp.GetResponseStream(), System.IO.Compression.CompressionMode.Decompress))
    {
    // Just trying to read one byte causes the error.
    s.ReadByte();
    }

} 
```

任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:12:27.947

看看这个[问题及其接受的答案](https://stackoverflow.com/questions/1619172/itunes-connect-api)。

使用[提琴手](http://www.fiddler2.com)截取线路上的字节（请参阅 Inspectors 选项卡）。

从 API 中可以看出：流不是 GZipped 而是 Zipped。

[在这里](https://stackoverflow.com/questions/836736/unzip-files-programmatically-in-net)查看一个库以在 c# 中解压缩流

在您的应用程序开始时添加以[克服 http 100 响应](http://msdn.microsoft.com/en-us/library/system.net.servicepointmanager.expect100continue.aspx)：

> ServicePointManager.Expect100Continue = true;

使用它，您将在获得 WebResponse 之后按如下方式实现解压缩：

```
using (ZipInputStream s = new ZipInputStream(resp.GetResponseStream()) {

    ZipEntry theEntry;
    while ((theEntry = s.GetNextEntry()) != null) {

        Console.WriteLine(theEntry.Name);

        string directoryName = Path.GetDirectoryName(theEntry.Name);
        string fileName      = Path.GetFileName(theEntry.Name);

        // create directory
        if ( directoryName.Length > 0 ) {
            Directory.CreateDirectory(directoryName);
        }

        if (fileName != String.Empty) {
            using (FileStream streamWriter = File.Create(theEntry.Name)) {

                int size = 2048;
                byte[] data = new byte[2048];
                while (true) {
                    size = s.Read(data, 0, data.Length);
                    if (size > 0) {
                        streamWriter.Write(data, 0, size);
                    } else {
                        break;
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:16:23.150

终于想通了！

我需要设置：

```
webRequest.AutomaticDecompression = DecompressionMethods.None; 
```

以前我将其设置为尝试：

```
w.AutomaticDecompression = DecompressionMethods.GZip | DecompressionMethods.Deflate; 
```

.NET 在我有机会阅读之前尝试解压缩响应，但未能成功。

我现在可以读取字节数组并在将文件保存到磁盘后对其进行解密。

# html - 如何在 CSS 中突出显示菜单。我使用了 a:active 但它没有达到我预期的目的

> ID：12174635
> 
> 赞同：0
> 
> 时间：2012-08-29T09:20:47.493
> 
> 标签：html, css, asp.net-mvc-4

.cshtml

```
<li>@Html.ActionLink("Tools", "Index", new { Area = "", Controller = "Tools" })</li> 
```

.css

```
a:active
{
    font-weight: bold;
    background: #F96611;
    border: 3px solid #FFB380;
} 
```

a:active 仅在鼠标单击按下和释放之间起作用。但是我需要在鼠标单击菜单后**突出****显示菜单。**谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:24:51.360

你不能添加css。.active 仅适用于点击，但不适用于活动状态。您可以使用下面的 jquery 代码在单击时添加类

```
$('li').click(function() {
  $(this).addClass('youractiveclass'); 
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:28:53.007

鼠标单击菜单后，它会变成“已访问”，您应该将其添加到您的 css 中：

```
a:visited
{
    font-weight: bold;
    background: #F96611;
    border: 3px solid #FFB380;
} 
```

你也可以为*a.hover*和*a.link做到这一点*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T09:29:11.413

这可以通过 CSS（使用`visited`）实现。CSS`active`伪类仅适用于点击期间，而不是之后。如果您想要持久的效果，请使用`visited`或更好的 Javascript。通过 javascript，您还可以对其进行自定义，以便通过交替单击添加或删除样式：

```
$("#menu").click(function() {
  $(this).toggleClass('highlightclass');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T10:46:40.633

只有当您按住链接上的鼠标按钮时，活动状态才有效。这就是它应该的样子。

检查这个小提琴以了解：http: [//jsfiddle.net/8fqGp/](http://jsfiddle.net/8fqGp/)

如果要持续突出显示菜单项，则应遵循 Sowmya 或 Cupidvogel 的回答。

# php - 使用 javascript 强制下载

> ID：12174638
> 
> 赞同：1
> 
> 时间：2012-08-29T09:20:59.287
> 
> 标签：php, javascript, mootools

我有一个这样的 php 文件：

```
<?php

header("Content-type: application/octet-stream");
header("Content-Disposition: attachment; filename=\"my-data.csv\"");

$data = stripcslashes($_REQUEST['data']);
echo $data; 

?> 
```

我可以向它发布（正确格式化的）数据，它会返回一个 csv 文件。我这样做：

```
 var data = $('table').toCSV('tbody > tr');
    $('table').addEvent('click', function(){            
        new Request({
                url: 'getCSV.php',
                method: 'post'                  
        }).send('data=' + data);            
    }); 
```

在 Firebug 中，我可以看到请求有效并且响应正常。但是没有弹出下载对话框；如何解决？我需要在 PHP 文件中使用不同的标头吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:38:51.377

正如 Gavin 所说，ajax 调用不能强制下载，响应只是保存到一个变量中。您必须创建一个隐藏的表单和 POST 数据。像这样：

```
var data = $('table').toCSV('tbody > tr');

$('table').on('click', function(){            
    $('<form action="getCSV.php" target="_new" method="POST" style="display: none;">'+
        '<textarea name="data">'+data+'</textarea>'+
      '</form>')
    .appendTo('body')
    .submit();          
}); 
```

PS我没有测试过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T09:46:22.580

我将JS更改为：

```
 var data = $('lijst').toCSV('tbody > tr');

    var form    = new Element('form', {method: 'post', action : 'getCSV.php'});
    var field   = new Element('input', {type: 'hidden', name: 'data', value: data});
    var submit  = new Element('input', {'type' : 'submit', 'value' : 'Download'});
    form.adopt(field,submit);

    form.inject($('lijst').getElement('caption')); 
```

这在表格中添加了一个不错的下载按钮，并且当浏览器遵循表单提交时，会弹出下载对话框。谢谢你和我一起思考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T11:26:02.353

另一种方法是使用 iframe。因此，当单击“下载”按钮时，您会在页面中注入 iframe。清理干净后就可以了。

```
document.body.inject(
 new Element('iframe', {
    'src': 'http://url.to.download', 
    'style': {
        'display': 'none'
     }
 })
); 
```

# html - 使用内联块将垂直对齐应用于两个 div

> ID：12174646
> 
> 赞同：13
> 
> 时间：2012-08-29T09:21:20.627
> 
> 标签：html, vertical-alignment, css

所以我有一些DIV。结构是这样的

```
 <div id="content">
        <div id="lcol">some content</div>
        <div id="lcol">some<br />content</div>
    </div> 
```

我的问题是两个 div 的高度不同。我正在使用`display:inline-block`“lcol”，而“内容”只是一个普通的 div。两个 lcol div 确实并排显示，但它们锚定在 div 的底部。我希望它们与 div 的顶部对齐。我尝试添加`vertical-align:top`到“内容”，但什么也没发生。

有任何想法吗？

JsFiddle：http: [//jsfiddle.net/qxe8h/1/](http://jsfiddle.net/qxe8h/1/)

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-29T09:23:48.740

给你的**内联块**元素**vertical-align:top 。**像这样写：

 **```
#lcol {vertical-align:top;} 
```

检查这个[http://jsfiddle.net/qxe8h/2/](http://jsfiddle.net/qxe8h/2/)**

# java - 如何在 jfreechart 中将形状与动态图表相结合

> ID：12174650
> 
> 赞同：2
> 
> 时间：2012-08-29T09:21:38.413
> 
> 标签：java, jfreechart, draw, shape

我知道，我们可以在 java 中将普通图形形状添加到 jfreechart 的图表面板中，但是，如果它是动态图表，即每 1 分钟更新一次。比从数据集中获取某个点的 X/Y 并每 1 分钟重新绘制所有图形更简单的方法。还有另一个问题，当声明矩形的一个边缘的图表点将在 30 分钟后隐藏在轴后面（如果缩放显示图表的小部分）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T23:24:42.850

`DynamicTimeSeriesCollection`,[在这里](https://stackoverflow.com/a/5048863/230513)说明, 可能满足您的要求。每隔一分钟更新一次时，它可以轻松跟上步伐，并且仅自动显示最新的`nMoments`. 此[替代](https://stackoverflow.com/a/6517440/230513)using`TimeSeriesCollection`保留添加到`setMaximumItemAge()`每个中指定的限制的所有数据`TimeSeries`。

# eclipse - JUNIT 的默认 Eclipse 配置（VM、类路径）？

> ID：12174656
> 
> 赞同：4
> 
> 时间：2012-08-29T09:21:58.150
> 
> 标签：eclipse

我有默认配置，例如 VM 参数 (-Xms512m -Xmx1024m -XX:MaxPermSize=256M) 以及运行所有 JUNIT 测试用例的类路径文件夹。

目前在eclipse中，我总是为每个测试用例创建相同/重复的配置，否则测试用例失败。

有没有办法将上述配置为所有 JUNIT 测试用例的默认值，以避免创建现有测试用例的副本并重命名测试用例名称？

原因是每当我需要运行一个新的测试用例时，我都需要进行上述操作。如果有办法，Junit 测试用例将自动选择默认配置，测试用例将自动运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T10:31:35.067

您可以在 Eclipse 首选项中设置默认 VM 参数，这些参数将用于每个运行配置，因此您甚至不必为您的应用程序设置它们：

`Window`-> `Preferences`-> `Java`-> `Installed JRE`-> 选择您的活动 JRE 并单击`Edit`。提出你的论点`Default VM Arguments`。

# function - Fortran 90，函数，数组

> ID：12174658
> 
> 赞同：1
> 
> 时间：2012-08-29T09:22:14.200
> 
> 标签：function, fortran

我是 Fortran 编程的新手。我有两个 .f90 文件。

fmat.f90

```
function fmat(t,y)
 implicit none
 real::t
 real::y(2)
 real::fmat(2)
 fmat(1) = -2*t+y(1)
 fmat(2) = y(1)-y(2)
end function fmat 
```

而且， main.f90 看起来像：

```
program main
 implicit none
 real::t
 real::y(2)
 real::fmat(2)
 real::k(2)
 t=0.1
 y(1)=0.5
 y(2)=1.4
 k=fmat(t,y)
 write(*,*) k
end program main 
```

所以，我期待 0.3 -0.9。但我不断收到以下错误消息：

```
ifort fmat.f90 main.f90

main.f90(13): error #6351: The number of subscripts is incorrect.   [FMAT]
k=fmat(t,y)
--^
compilation aborted for main.f90 (code 1) 
```

任何帮助表示赞赏！

!==== 编辑 ====

我感谢马克的回答。我实际上可以使用“子例程”方法编译单独的文件而不会出现任何错误。

main.f90

```
program main
  implicit none
  real::t
  real::y(2)
  real::k(2)
  t=0.1
  y(1)=0.5
  y(2)=1.4
  call fmat_sub(t,y,k)
  write(*,*) k
end program main 
```

fmat_sub.f90

```
subroutine fmat_sub(t,y,k)
  implicit none
  real::t
  real::y(2),k(2)
  k(1) = -2*t+y(1)
  k(2) = y(1)-y(2)
end subroutine fmat_sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T09:44:58.830

`main`你的声明 in`real::fmat(2)`告诉编译器这`fmat`是一个秩为 1 且长度为 2 的实数数组。它没有告诉它任何关于`fmat`写在其他文件中的函数的信息。

避免此类问题的一种好方法是使用现代 Fortran 的功能。将您的子例程和函数放入*模块*中并*使用关联*。所以，换成`fmat.f90`类似的东西

```
module useful_functions

contains
function fmat(t,y)
 implicit none
 real::t
 real::y(2)
 real::fmat(2)
 fmat(1) = -2*t+y(1)
 fmat(2) = y(1)-y(2)
end function fmat

end module useful_functions 
```

并修改`main.f90`为类似

```
program main
 use useful_functions
 implicit none
 real::t
 real::y(2)
 real::k(2)
 t=0.1
 y(1)=0.5
 y(2)=1.4
 k=fmat(t,y)
 write(*,*) k
end program main 
```

这种方法允许编译器为模块函数生成*显式接口，并允许它在编译时检查**虚拟参数*和*实际参数*之间的匹配。

由于您是新手，我已将一些关键术语用斜体表示，请在您的编译器手册或其他喜欢的 Fortran 文档中阅读它们。

解决问题的另一种方法是编辑`main.f90`以包含 function 的源代码`fmat`，如下所示：

```
program main
 implicit none
 real::t
 real::y(2)
 real::k(2)
 t=0.1
 y(1)=0.5
 y(2)=1.4
 k=fmat(t,y)
 write(*,*) k

contains

function fmat(t,y)
 implicit none
 real::t
 real::y(2)
 real::fmat(2)
 fmat(1) = -2*t+y(1)
 fmat(2) = y(1)-y(2)
end function fmat
end program main 
```

我赞成第一种方法，当你的程序和项目变得很大并且模块化的好处开始成为必需品而不是好东西时，它可以更好地扩展，但是第二种方法对于你正在学习语言的小程序来说是可以的。

# qt - qDebug() 如何打印枚举值？

> ID：12174666
> 
> 赞同：12
> 
> 时间：2012-08-29T09:22:26.840
> 
> 标签：qt

我们的应用程序中有一段简单的代码：

```
void tAccessPoint::OnStateChanged(QAbstractSocket::SocketState state)
{
    qDebug() << m_ID << " " << state; 
```

由于这里不重要的原因，我试图替换 qDebug 的使用，所以我使用了这篇[C++ 格式宏/​​内联 ostringstream](https://stackoverflow.com/questions/303562/c-format-macro-inline-ostringstream)中的代码。但我惊讶地发现，当我这样做时，这个**状态**不再显示为文本值，而是显示为数值。qDebug() 似乎知道枚举值的名称，而不仅仅是值。它是如何做到这一点的，我可以在我的代码中做同样的事情吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-29T09:58:37.647

这里没有 moc 魔法，QtNetwork 在 network/socket/qabstractsocket.h 中明确定义了操作符：

```
QDebug operator<<(QDebug, QAbstractSocket::SocketState) {
    switch (state) {
    case QAbstractSocket::UnconnectedState:
        debug << "QAbstractSocket::UnconnectedState";
        break;
    case QAbstractSocket::HostLookupState:
        debug << "QAbstractSocket::HostLookupState";
        break;
    case QAbstractSocket::ConnectingState:
        debug << "QAbstractSocket::ConnectingState";
        break;
    case QAbstractSocket::ConnectedState:
        debug << "QAbstractSocket::ConnectedState";
        break;
    case QAbstractSocket::BoundState:
        debug << "QAbstractSocket::BoundState";
        break;
    ...
    return debug;
} 
```

但是您可以使用`QDebug`将数据发送到`QString`函数内部：

```
 QString output;
 QDebug(&output) << ... 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-05-05T23:35:07.347

也许这个枚举到 QString 的转换会很有用：

```
const QMetaObject & mo = QAbstractSocket::staticMetaObject;
QMetaEnum me = mo.enumerator(mo.indexOfEnumerator("SocketState"));
QString test(me.valueToKey(QAbstractSocket::UnconnectedState)); 
```

# oop - 具有可扩展功能的用户界面的设计模式

> ID：12174670
> 
> 赞同：1
> 
> 时间：2012-08-29T09:22:45.993
> 
> 标签：oop, design-patterns

假设我正在为硬件配件编写用户界面。该配件有两个版本 - 比如说 Widget Lite 和 Widget Pro。

Widget Pro 可以做 Widget Lite 可以做的所有事情，但是有更多的选择，并且可以做一些 Widget Lite 做不到的事情。更详细地说，Widget Lite 有一个通道，widget Pro 有两个，所以当涉及到类似于音量控制的东西时，我只需要一个用于 Lite 的控件，但两个用于 Pro 允许独立控制。

在我第一次尝试构建一个应用程序来处理这个问题时，我让代表 Widget Pro 的类扩展了 Widget Lite，但后来我得到了各种条件案例来处理看起来很难看的差异。有谁知道合适的设计模式来帮助解决这种情况？我的想象力在想出可能对我的搜索有帮助的同义词时出现空白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:43:42.933

我将从查看[插件](http://martinfowler.com/eaaCatalog/plugin.html)模式（依赖倒置的一种形式）开始。

尝试抽象 Lite 和 Pro 版本通用的接口，例如

```
interface IBaseWidget
{
   IControl CreateVolumeControl();
   // ... etc
} 
```

在单独的程序集/dll 中，实现您的 Lite 和 Pro 小部件：

```
class LiteWidget : IBaseWidget
{
   int _countCreated = 0;
   IControl CreateVolumeControl()
   {
       _countCreated++;
       if (_countCreated > 1)
       {
          throw new PleaseBuyTheProVersionException();
       }
   }
} 
```

由于您不想通过 Lite 部署分发 Pro 版本，因此您需要在运行时加载 dll，例如通过约定（例如，您的基础应用程序查找名为 *Widget.dll 的 DLL），或通过配置，它找到了适用的具体实现`IBaseWidget`。根据@Bartek 的评论，理想情况下，您不希望您的基础引擎类工厂“了解”特定的具体类`IBaseWidget`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T09:50:30.250

访客模式可能对您有用。检查[工厂](http://www.dofactory.com/Patterns/PatternVisitor.aspx)。

访客班...

> ...为对象结构中的每个 ConcreteElement 类声明一个访问操作。该操作的名称和签名标识了向访问者发送访问请求的类。这让访问者可以确定被访问元素的具体类。然后访问者可以通过其特定的界面直接访问元素

这类似于 Vikdor 所说的抽象类实现。

[这](http://en.wikipedia.org/wiki/Visitor_pattern)是一个 wiki 链接。

> 访问者模式需要一种支持单一调度和方法重载的编程语言。

我已经使用访问者模式提供了一个非常简单的实现，以满足您对 WidgetLite 和 Pro 的不同频道和音量设置的要求。我在评论中提到访问者模式将极大地帮助您减少 if-else 调用。

基本理念是您将控制权（例如音量）传递给小部件，它会知道如何根据需要使用它。因此，控制对象本身具有非常简化的实现。每个小部件的代码保持在一起！！

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace WidgetVisitor
{
    //This is the widget interface. It ensures that each widget type
    //implements a visit functionality for each control. The visit function
    //is overloaded here.
    //The appropriate method is called by checking the parameter and this 
    //avoids the if-then logic elegantly
    public interface Widget
    {
        void visit(Volume vol);
        void visit(Channel chan);
        void Display(AllControls ac);
    }

    //This is the interface which defines the controls. Each control that 
    //inherits this interface needs to define an "accept" method which 
    //calls the appropriate visit function of the right visitor,
    //with the right control parameter passed through its call!
    //This is how the double dispatch works.
    //Double dispatch: A mechanism that dispatches a function call to different concrete 
    //functions depending on the runtime types of two objects involved in the call.
    public interface WidgetControls
    {
        void accept(Widget visitor); 

    }

    //I have implemented the volume control and channel control
    //Notice how the code for defining each control is the SAME
    //in visitor pattern! This is double dispatch in action
    public class Volume : WidgetControls
    {
        public int volLevel { get; set; }
        public int volJazz { get; set; }
        public int volPop { get; set; }
        public void accept(Widget wc)
        {
            wc.visit(this);
        }
    }

    public class Channel : WidgetControls
    {
        public int channelsProvided { get; set; }
        public int premiumChannels { get; set; }
        public void accept(Widget wc)
        {
            wc.visit(this);
        }
    }

    //Widget lite implementation. Notice the accept control implementation
    //in lite and pro.
    //Display function is an illustration on an entry point which calls the
    //other visit functions. This can be replaced by any suitable function(s)
    //of your choice
    public class WidgetLite : Widget
    {
        public void visit(Volume vol)
        {
            Console.WriteLine("Widget Lite: volume level " + vol.volLevel);
        }

        public void visit(Channel cha)
        {
            Console.WriteLine("Widget Lite: Channels provided " + cha.channelsProvided);
        }

        public void Display(AllControls ac)
        {
            foreach (var control in ac.controls)
            {
                control.accept(this);
            }

            Console.ReadKey(true);
        }
    }

    //Widget pro implementation
    public class WidgetPro : Widget
    {
        public void visit(Volume vol)
        {
            Console.WriteLine("Widget Pro: rock volume " + vol.volLevel);
            Console.WriteLine("Widget Pro: jazz volume  " + vol.volJazz);
            Console.WriteLine("Widget Pro: jazz volume  " + vol.volPop);
        }

        public void visit(Channel cha)
        {
            Console.WriteLine("Widget Pro: Channels provided " + cha.channelsProvided);
            Console.WriteLine("Widget Pro: Premium Channels provided " + cha.premiumChannels);
        }

        public void Display(AllControls ac)
        {
            foreach (var control in ac.controls)
            {
                control.accept(this);
            }

            Console.ReadKey(true);
        }
    }

    //This is a public class that holds and defines all the 
    //controls you want to define or operate on for your widgets
    public class AllControls
    {
        public WidgetControls [] controls { get; set; }

        public AllControls(int volTot, int volJazz, int volPop, int channels, int chanPrem)
        {
            controls = new WidgetControls []
            {
                new Volume{volLevel = volTot, volJazz = volJazz, volPop = volPop},
                new Channel{channelsProvided = channels, premiumChannels = chanPrem}
            };
        }
    }

    //finally, main function call
    public class Program
    {
        static void Main(string[] args)
        {
            AllControls centralControl = new AllControls(3, 4, 2, 5, 10);

            WidgetLite wl = new WidgetLite();
            WidgetPro wp = new WidgetPro();

            wl.Display(centralControl);
            wp.Display(centralControl);

        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T09:26:25.193

我强烈建议你有一个`Widget`既来自`Widget Lite`又`Widget Pro`派生的基类。

```
public class Widget {}

public class WidgetLite : Widget {}

public class WidgetPro : Widget {} 
```

`Pro`拥有基类和基类内部共享的属性/方法`Lite`。这对您来说是一个更清洁的设计。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T09:27:30.333

我会这样做：

```
 AbstractWidget (Abstract class)
                   /\
                  /  \
                 /    \
                /      \
               /        \
         WidgetLite   WidgetPro 
```

公共代码将进入 AbstractWidget（抽象，因为它不应该被实例化），这两个类之间不同的行为将进入具体类。

# autocomplete - 使用 NGrams 在 solr 中搜索 Suggester（自动完成）（建议器组件的一种排序规则）

> ID：12174672
> 
> 赞同：0
> 
> 时间：2012-08-29T09:22:58.570
> 
> 标签：autocomplete, solr, collation, autosuggest

我正在使用 EdgeNGrams 使用 solr 进行自动完成搜索。我使用 solr 3.3，我想使用来自建议者的排序规则作为多词搜索的自动完成解决方案。不幸的是，对于多词搜索，Suggester 只返回一个排序规则

如果用户正在搜索员工姓名，则应应用自动完成。即，想要像谷歌搜索这样的结果。在配置下对我来说工作正常。

## 架构.xml

```
<fieldType name="edgytext" class="solr.TextField" positionIncrementGap="100" omitNorms="true">
    <analyzer type="index">
      <tokenizer class="solr.KeywordTokenizerFactory" />
      <filter class="solr.LowerCaseFilterFactory" /> 
  <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
  </analyzer>
<analyzer type="query">
 <tokenizer class="solr.KeywordTokenizerFactory" /> 
 <filter class="solr.LowerCaseFilterFactory" />
 <filter class="solr.EdgeNGramFilterFactory" minGramSize="1" maxGramSize="15" side="front" />    
</analyzer> 
```

```
<field name="title" type="edgytext" indexed="true" stored="true" omitNorms="true" omitTermFreqAndPositions="true"/>
<field name="empname" type="edgytext" indexed="true" stored="true" omitNorms="true" omitTermFreqAndPositions="true" />

<field name="autocomplete_text" type="edgytext" indexed="true" stored="false"  multiValued="true" omitNorms="true" omitTermFreqAndPositions="false" />
<copyField source="empname" dest="autocomplete_text"/>

<copyField source="title" dest="autocomplete_text"/> 
```

* * *

网址：$http://local:8080/test/suggest/?q=michael

```
 Result :
   <?xml version="1.0" encoding="UTF-8" ?> 
<response>
<lst name="responseHeader">
<int name="status">0</int> 
<int name="QTime">1</int> 
</lst>
<result name="response" numFound="0" start="0" /> 
<lst name="spellcheck">
<lst name="suggestions">
<lst name="michael">
<int name="numFound">9</int> 
<int name="startOffset">0</int> 
<int name="endOffset">7</int> 
<arr name="suggestion">
  <str>michael bolton</str> 
  <str>michael foret</str> 
  <str>michael force</str>
  <str>michael w. smith featuring andrae crouch</str> 
</arr>
</lst>
<str name="collation">michael bolton</str> 
</lst>
</lst>
</response> 
```

它对我来说很好。当我用“michael f”搜索时，得到如下响应。(http://local:8080/test/suggest/?q=michael f)

回复 ：

```
 <?xml version="1.0" encoding="UTF-8" ?> 
 <response>
 <lst name="responseHeader">
 <int name="status">0</int> 
 <int name="QTime">1</int> 
 </lst>
 <result name="response" numFound="0" start="0" /> 
<lst name="spellcheck">
<lst name="suggestions">
<lst name="michael">
<int name="numFound">9</int> 
<int name="startOffset">0</int> 
<int name="endOffset">7</int> 
<arr name="suggestion">
  <str>michael bolton</str> 
  <str>michael foret</str> 
  <str>michael force</str> 
  <str>michael w. smith featuring andrae crouch</str> 
   .....
</arr>
</lst>
<lst name="f">
<int name="numFound">10</int> 
<int name="startOffset">8</int> 
<int name="endOffset">9</int> 
<arr name="suggestion">
  <str>f**k the facts</str> 
  <str>fairest lord jesus</str> 
  <str>franz ferdinand</str> 
  <str>françois rauber</str> 
  .........
</arr>
</lst>
<str name="collation">michael bolton f**k the facts</str> 
</lst>
</lst>
</response>. 
```

所以当我用“michael f”搜索时，我应该只得到“michael foret”和“michael force”。传入的数据以“f”开头。如果我在 solr 中的配置设置有任何问题，请建议我。

提前致谢，

阿尼尔。

# ios - 提交 ios app 后需要从苹果获取的信息

> ID：12174673
> 
> 赞同：0
> 
> 时间：2012-08-29T09:23:01.517
> 
> 标签：ios, app-store

我已将应用程序提交到应用程序商店，应用程序状态类似于“元数据被拒绝”和以下审核状态。

> 我们已开始审核您的应用，但无法继续，因为我们需要一个演示帐户才能完全访问您的应用功能。
> 
> 请在您应用的版本信息的评论说明部分提供演示帐户详细信息。请确保您提供的信息包含展示您的应用功能功能所需的任何数据。
> 
> 您可以在 iTunes Connect 应用程序信息的查看备注部分提供演示帐户信息，包括密码。
> 
> 虽然您的 iTunes Connect 应用程序状态显示为拒绝元数据，但我们不需要新的二进制文件来纠正此问题。请访问 iTunes Connect，管理您的应用程序。选择您的应用程序，然后单击查看所需版本的详细信息。单击版本信息旁边的编辑按钮以编辑您的应用程序的评论，然后单击“保存”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:27:57.927

查看描述，您的应用程序似乎需要一些特定帐户才能登录才能使用应用程序功能。因此，Apple 人员在您向他们提供测试帐户以登录应用程序之前，无法访问您的应用程序。

您无需重新提交应用程序二进制文件。您只需提供帐户信息即可访问您的应用程序。这就是他们在描述中的意思。

如果这些信息对您有帮助，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T09:35:56.070

您必须传达演示部分的凭据，以便苹果可以尝试

# ruby-on-rails - 带有 simple_form 的 RoR：自动将 nil 分配给“空”属性？

> ID：12174676
> 
> 赞同：0
> 
> 时间：2012-08-29T09:23:20.880
> 
> 标签：ruby-on-rails, simple-form

当通过表单提交一个空字段时，该属性将变为“”，就像在空格中一样，但我认为它应该为零？

如果属性更新为空，是否可以将属性保持为零？

我确实找到了这个宝石：

[https://github.com/grosser/clear_empty_attributes](https://github.com/grosser/clear_empty_attributes)

但我不明白现在这个问题是如何解决的（那颗宝石已经 3 岁了），也许我错过了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:30:58.077

关于什么：

```
class Foo < ActiveRecord::Base

  before_update :clear_empty_attrs

  def clear_empty_attrs
    changes.each { |k, v| write_attribute(k, nil) if v.last.blank? }
  end
end 
```

# python - 在 Eclipse 中创建 python 模块时出错

> ID：12174684
> 
> 赞同：1
> 
> 时间：2012-08-29T09:23:53.217
> 
> 标签：python, eclipse, pydev

   我已经在我的 Eclipse 中安装了 PyDev。而且我已经将解释器 Python 配置为 Python26，它已经安装在我的 Windows 操作系统中。我能够创建 python 项目。但是当我在 eclipse 错误日志中创建 Python 模块时，我得到了一些异常，如下所示：

```
java.lang.IllegalAccessError：试图从类 org.python.pydev.navigator.PythonBaseModelProvider 访问方法 org.eclipse.jface.viewers.ColumnViewer.isBusy()Z
    在 org.python.pydev.navigator.PythonBaseModelProvider.runUpdates(PythonBaseModelProvider.java:1050)
    在 org.python.pydev.navigator.PythonBaseModelProvider.processRunnables(PythonBaseModelProvider.java:1015)
    在 org.python.pydev.navigator.PythonBaseModelProvider.processDelta(PythonBaseModelProvider.java:994)
    在 org.python.pydev.navigator.PythonBaseModelProvider.resourceChanged(PythonBaseModelProvider.java:978)
    在 org.eclipse.core.internal.events.NotificationManager$2.run(NotificationManager.java:282)
    在 org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)
    在 org.eclipse.core.internal.events.NotificationManager.notify(NotificationManager.java:276)
    在 org.eclipse.core.internal.events.NotificationManager.broadcastChanges(NotificationManager.java:148)
    在 org.eclipse.core.internal.resources.Workspace.broadcastPostChange(Workspace.java:311)
    在 org.eclipse.core.internal.resources.Workspace.endOperation(Workspace.java:1018)
    在 org.eclipse.core.internal.resources.File.create(File.java:163)
    在 org.eclipse.core.internal.resources.File.create(File.java:176)
    在 org.python.pydev.ui.wizards.files.PythonModuleWizard.doCreateNew(PythonModuleWizard.java:87)
    在 org.python.pydev.ui.wizards.files.AbstractPythonWizard.performFinish(AbstractPythonWizard.java:125)
    在 org.eclipse.jface.wizard.WizardDialog.finishPressed(WizardDialog.java:742)
    在 org.eclipse.jface.wizard.WizardDialog.buttonPressed(WizardDialog.java:373)
    在 org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:618)
    在 org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:227)
    在 org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
    在 org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:938)
    在 org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3682)
    在 org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3293)
    在 org.eclipse.jface.window.Window.runEventLoop(Window.java:820)
    在 org.eclipse.jface.window.Window.open(Window.java:796)
    在 org.eclipse.ui.internal.navigator.wizards.WizardShortcutAction.run(WizardShortcutAction.java:94)
    在 org.eclipse.jface.action.Action.runWithEvent(Action.java:498)
    在 org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:546)
    在 org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:490)
    在 org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:402)
    在 org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
    在 org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:938)
    在 org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3682)
    在 org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3293)
    在 org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2389)
    在 org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2353)
    在 org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2219)
    在 org.eclipse.ui.internal.Workbench$4.run(Workbench.java:466)
    在 org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:289)
    在 org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:461)
    在 org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    在 org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:106)
    在 org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:169)
    在 org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:106)
    在 org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:76)
    在 org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:363)
    在 org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:176)
    在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    在 sun.reflect.NativeMethodAccessorImpl.invoke（未知来源）
    在 sun.reflect.DelegatingMethodAccessorImpl.invoke（未知来源）
    在 java.lang.reflect.Method.invoke（未知来源）
    在 org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:508)
    在 org.eclipse.equinox.launcher.Main.basicRun(Main.java:447)
    在 org.eclipse.equinox.launcher.Main.run(Main.java:1173)

```

谁能说我的配置有什么问题？..提前谢谢..

# html - HTML 5 元素在带有modernizr 的 IE 7 中不起作用

> ID：12174685
> 
> 赞同：0
> 
> 时间：2012-08-29T09:23:59.973
> 
> 标签：html, modernizr

我无法使用modernizr在IE 7中获得html 5元素，这里是小提琴：[小提琴](http://jsfiddle.net/AJBweb1986/xmJaf/)

不知道我在 IE 8 中做错了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:27:44.167

由于 HTML5 通过标记我们的新页面而受到更多关注，而让 IE 识别新元素（例如，新元素。

下载 html5shiv.js(https://github.com/aFarkas/html5shiv/) 并且必须插入到 head 元素中（这是因为 IE 在渲染它们之前需要知道该元素 - 所以它不能坐在页面的页脚，即有问题的元素下方）。

编辑 1

使用 IE，即使使用 shiv，您也需要将 HTML 5 元素声明为块元素。我将此行用于 Internet Explorer，但您可以根据需要修改它。

```
header,nav,article,footer,section,aside,figure,figcaption{display:block} 
```

来自[Modernizr 文档](http://www.modernizr.com/docs/#html5inie)：“您可能还希望将其中许多元素设置为 display:block;”

# c# - 格式化电话号码

> ID：12174691
> 
> 赞同：-2
> 
> 时间：2012-08-29T09:24:34.263
> 
> 标签：c#, .net, c#-4.0

我想格式化电话号码，电话号码的长度不是固定的，但应该在 7-15 位之间。

我需要将此*12345678*格式化为 Like *1234-567-8*

如果有任何数字增加或减少，则应最终将其删除。意味着我想要 **4Digit-3Digit-ResrtOFDigit**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:27:40.117

假设您的字符串将包含至少 8 个字符。

```
string str = "123456781213123";
if (str.Length > 7)
    str = str.Substring(0, 4) + "-" + str.Substring(4, 3) + "-" + str.Substring(7); 
```

`str`将举行

```
1234-567-81213123 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:35:41.250

我得到了解决方案：

```
private static string FormatePhoneNumber(string phoneNumber_)
{
    return Regex.Replace(phoneNumber_, @"(\d{4})(\d{3})(\d{" + (phoneNumber_.Length - 7).ToString() + "})", "$1-$2" + ((phoneNumber_.Length - 7) == 0 ? "" : "-$3"));
} 
```

谢谢你的帮助。

# asp-classic - 当 Language=VBScript 时在 JScript 中使用 VBScript 函数

> ID：12174692
> 
> 赞同：1
> 
> 时间：2012-08-29T09:24:34.730
> 
> 标签：asp-classic

我知道如果 language="JScript" 可以使用以 VBScript 编码的函数，如下所示：

```
<%@ language="JScript" %>
<% Response.Write(myFunc()); %>
<script runat="server" language="vbscript">
    Function myFunc
        myFunc="test"
    End Function
</script> 
```

但是，在用 JScript 重构脚本之前，我想知道，假设语言设置为 VBScript，是否还有可能在 JScript 中使用 VBScript 函数。或者，在这种情况下，只有相反的方式是可能的。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:09:40.450

在使用 jscript、vbscript 和 Python 之前，我已经对此进行了测试。可以从另一种语言的代码块中调用一种语言的函数并使用结果。

不过有一些注意事项：

您需要确保函数返回其他语言可以识别的类型；因此将 Python 对象返回到 vbscript 将不起作用，但如果您使用字符串、数字和布尔值等简单类型，则可以。我认为即使是数组也可以在 vbscript 和 jscript 之间工作。

第二个要考虑的是，脚本在服务器上的处理顺序是有先后顺序的；我不再确切知道它是什么，但 ASP 将首先处理一种语言，然后再处理另一种。
当您的代码以不同的语言调用函数并且找不到该函数时，这可能会导致奇怪的事情发生，因为 ASP 仍需要处理该函数的语言。

只要您在函数中执行并确保仅使用一种特定语言在这些函数之外编写代码，这应该不是问题。

以下是有关执行顺序的更多信息：[http ://www.kidslovepc.com/asp/order_execution.shtml](http://www.kidslovepc.com/asp/order_execution.shtml)

# lambda - CRM 2011 在 CreateQuery 中使用 Func<> 将所有实体添加到 xrmServiceContext 中的附加实体

> ID：12174697
> 
> 赞同：1
> 
> 时间：2012-08-29T09:25:12.153
> 
> 标签：lambda, entity, dynamics-crm-2011, func

当我经过一个

```
Func<EntityType,bool> sourceFunc = a => a.Name == "name"; 
```

到：

```
var crmEntities = m_xrmServiceContext.CreateQuery<EntityType>().Where(sourceFunc); 
```

然后打电话

```
int i = crmEntities.ToList().Count; 
```

它将 EntityType 的所有实体放入 xrmServiceContext 附加实体中，即 488 个实体！

但是，如果我使用原始 lambda 表达式而不是 Func<> ，则如下所示：

```
var crmEntities = m_xrmServiceContext.CreateQuery<EntityType>().Where(a => a.Name = "name"); 
```

然后打电话

```
int i = crmEntities.ToList().Count; 
```

它将仅返回附加实体中的 1 个实体。

我想使用 Func<> 但我不认为我希望在 xrm 服务上下文中的附加实体中拥有所有这些实体。知道为什么要把它们都放在那里吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T09:46:39.197

有趣..解决方案是通过

```
Expression<Func<EntityType,bool>> 
```

代替

```
Func<EntityType,bool> 
```

它只向附加实体返回 1 个实体 :)

# java - 如何使用 OWL API 读取注释内的 rdf:description

> ID：12174698
> 
> 赞同：2
> 
> 时间：2012-08-29T09:25:11.723
> 
> 标签：java, rdf, owl, owl-api

我是 OWL API 的新手。如何获取`rdfs:label`以下 OWL 文件中的值？ `oboInOwl:hasSynonym`是一个注解属性。

```
<oboInOwl:hasSynonym>
  <rdf:Description>
    <rdf:type rdf:resource="&oboInOwl;Synonym"/>
    <rdfs:label xml:lang="en">Endocardiums</rdfs:label>
  </rdf:Description>
</oboInOwl:hasSynonym> 
```

我正在使用猫头鹰 API。我不想使用 XML 解析器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-01T18:59:34.320

这是重新创建包含您所描述的结构类型的本体的代码，并显示如何检索您感兴趣的注释属性值。 `getSampleOntology()`创建本体（并打印它），并`main`显示您可以如何开始`x`，找到它的`hasSynonym`值，然后找到`rdfs:label`这些值的 s。这是基于文档中的[OWL API 代码示例](http://sourceforge.net/p/owlapi/code/ci/aef6981535f07a2d0d44c394b9f4d5415f36025a/tree/contract/src/test/java/org/coode/owlapi/examples/Examples.java#l1242)。

```
import org.semanticweb.owlapi.apibinding.OWLManager;
import org.semanticweb.owlapi.io.OWLOntologyDocumentTarget;
import org.semanticweb.owlapi.io.RDFXMLOntologyFormat;
import org.semanticweb.owlapi.io.SystemOutDocumentTarget;
import org.semanticweb.owlapi.model.IRI;
import org.semanticweb.owlapi.model.OWLAnnotation;
import org.semanticweb.owlapi.model.OWLAnnotationAssertionAxiom;
import org.semanticweb.owlapi.model.OWLAnnotationProperty;
import org.semanticweb.owlapi.model.OWLAnnotationSubject;
import org.semanticweb.owlapi.model.OWLAnonymousIndividual;
import org.semanticweb.owlapi.model.OWLAxiom;
import org.semanticweb.owlapi.model.OWLDataFactory;
import org.semanticweb.owlapi.model.OWLIndividual;
import org.semanticweb.owlapi.model.OWLNamedIndividual;
import org.semanticweb.owlapi.model.OWLObjectProperty;
import org.semanticweb.owlapi.model.OWLObjectPropertyAssertionAxiom;
import org.semanticweb.owlapi.model.OWLOntology;
import org.semanticweb.owlapi.model.OWLOntologyCreationException;
import org.semanticweb.owlapi.model.OWLOntologyFormat;
import org.semanticweb.owlapi.model.OWLOntologyManager;
import org.semanticweb.owlapi.model.OWLOntologyStorageException;
import org.semanticweb.owlapi.vocab.OWLRDFVocabulary;

public class OWLAPIAnnotations {
    final static OWLOntologyManager manager = OWLManager.createOWLOntologyManager();
    final static OWLDataFactory factory = manager.getOWLDataFactory();
    final static String ns = "http://example.org/";
    final static OWLNamedIndividual x = factory.getOWLNamedIndividual( IRI.create( ns+"x" ));
    final static OWLAnonymousIndividual y = factory.getOWLAnonymousIndividual();
    final static OWLObjectProperty hasSynonym = factory.getOWLObjectProperty(IRI.create(ns + "hasSynonym"));

    public static OWLOntology getSampleOntology() throws OWLOntologyCreationException, OWLOntologyStorageException {
        OWLOntology ontology = manager.createOntology();
        manager.addAxiom( ontology, factory.getOWLClassAssertionAxiom( factory.getOWLClass(IRI.create(ns + "Synonym")), y));
        manager.addAxiom(ontology, factory.getOWLObjectPropertyAssertionAxiom(hasSynonym, x, y));
        OWLAnnotation ann = factory.getOWLAnnotation( factory.getOWLAnnotationProperty(OWLRDFVocabulary.RDFS_LABEL.getIRI()), factory.getOWLLiteral("Endocardium", "en"));
        manager.addAxiom(ontology, factory.getOWLAnnotationAssertionAxiom(y, ann));
        manager.saveOntology(ontology, System.out);
        return ontology;
    }

    public static void main(String[] args) throws OWLOntologyCreationException, OWLOntologyStorageException {
        OWLOntology ontology = getSampleOntology();
        for( OWLIndividual object : x.getObjectPropertyValues( hasSynonym, ontology ) ) {
            for ( OWLAnnotationAssertionAxiom aAxiom : ontology.getAnnotationAssertionAxioms( (OWLAnnotationSubject) object ) ) {
                if ( aAxiom.getProperty().equals( factory.getRDFSLabel() ) ) {
                    System.out.println( aAxiom.getValue() );
                }
            }
        }
    }
} 
```

最后的输出（显示注释值）是：

```
"Endocardium"@en 
```

生成的本体是（删除注释，用于空间）：

```
<?xml version="1.0"?>
<rdf:RDF xmlns="http://www.w3.org/2002/07/owl#"
     xml:base="http://www.w3.org/2002/07/owl"
     xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
     xmlns:owl="http://www.w3.org/2002/07/owl#"
     xmlns:xsd="http://www.w3.org/2001/XMLSchema#"
     xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
     xmlns:example="http://example.org/">
    <ObjectProperty rdf:about="http://example.org/hasSynonym"/>
    <Class rdf:about="http://example.org/Synonym"/>
    <NamedIndividual rdf:about="http://example.org/x">
        <example:hasSynonym>
            <rdf:Description>
                <rdf:type rdf:resource="http://example.org/Synonym"/>
                <rdfs:label xml:lang="en">Endocardium</rdfs:label>
            </rdf:Description>
        </example:hasSynonym>
    </NamedIndividual>
</rdf:RDF> 
```

# ruby-on-rails - rails 是如何实现 before_filter 的？

> ID：12174704
> 
> 赞同：21
> 
> 时间：2012-08-29T09:25:42.107
> 
> 标签：ruby-on-rails, ruby

我对 rails 如何实现过滤器感兴趣`before_filter`。

但是看了源码后，我还是一头雾水。

我注意到 rails 的框架维护一个`filter_chain`, 并在目标方法之前运行过滤器。

但是，我不明白一个重要的过程：rails 如何捕获方法调用？

我的意思是，例如，我有一个 class `Dog`，并将 a 设置`before_filter`为方法 bark。

当我调用时`dog.bark`，rails 应该以某种方式捕获此调用，并改为运行其修改后的方法。

但是，我在源代码中没有找到这样的代码。

谁能告诉我这个想法或指出代码在哪里？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-29T11:08:03.223

当您设置 a`before_filter`或任何类似的过滤器*（想想`after_filter`, `around_filter`）*时，您可以使用[Symbol](http://www.ruby-doc.org/core-1.9.3/Symbol.html)或[Proc](http://www.ruby-doc.org/core-1.9.3/Proc.html)、 lambda 或块。

```
before_filter :bark
before_filter Proc.new { |k| k.bark } 
```

上面通过调用将符号或块附加到[此处](https://github.com/rails/rails/blob/master/actionpack/lib/abstract_controller/callbacks.rb#L55)[`set_callback`](https://github.com/rails/rails/blob/master/activesupport/lib/active_support/callbacks.rb#L366)的堆栈中。这构建了您所指的“链”。

此“链”中的每个项目都是该类的一个实例[`ActiveSupport::Callbacks::Callback`](https://github.com/rails/rails/blob/master/activesupport/lib/active_support/callbacks.rb#L85)。这个班知道

*   它必须运行的方法（符号）或块*（即您的类的`:bark`方法）*
*   它必须在其中运行的上下文*（即您的`Dog`班级）*

`Callback`实例附加到[`ActiveSupport::Callbacks::CallbackChain`](https://github.com/rails/rails/blob/master/activesupport/lib/active_support/callbacks.rb#L85)in 。[`__update_callbacks`](https://github.com/rails/rails/blob/master/activesupport/lib/active_support/callbacks.rb#L351)

当每个`Callback`类初始化时，[`_compile_filter`](https://github.com/rails/rails/blob/master/activesupport/lib/active_support/callbacks.rb#L229)运行以将过滤器从`Symbol`、`Proc`、 lambda 或块标准化为通用的可调用格式。

最后，当`CallbackChain`运行时，它将调用[`start`](https://github.com/rails/rails/blob/3-2-stable/activesupport/lib/active_support/cal.lbacks.rb#L171)每个`Callback`实例，**此时**过滤器实际上是在适当的上下文中执行的。

* * *

重要的是要指出您**不会**创建像这样的过滤器

```
before_filter dog.bark 
```

这将执行`dog.bark`并将其返回值传递`before_filter`给附加到`CallbackChain`. 目的是将某种指令传递`before_filter`给 Rails 以便稍后为您执行。你会改为做类似的事情

```
before_filter Proc.new { d = Dog.new; d.bark } 
```

中的代码`Proc`未执行。当上面的行由 Rails 运行时。相反，Rails 被告知`Proc`将`CallbackChain`. 这`Proc`是您传递给 Rails 以在适当的时间执行的“指令”。

* * *

> 首先，rails 是如何知道我打过电话的：bark

至于这个，假设你的`Dog`类被简单地定义为

```
class Dog
  def bark

  end

  def eat

  end
end 
```

*（虽然这是一个可怕的例子）*，你可能想要有类似的东西

```
before_bark :eat 
```

这需要您定义`bark`回调，然后告诉您的`bark`方法运行相关的`bark`回调。

```
class Dog
  extend ActiveModel::Callbacks

  define_callbacks :bark

  before_bark :eat

  def bark
    run_callbacks(:bark) { YOUR BARK CODE HERE }
  end

  def eat

  end
end 
```

你可以看看这是怎么[`ActiveRecord::Callbacks`](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/callbacks.rb)做到的。

这确实是一个不好的例子，因为您可以（并且应该）`eat`直接从 调用`bark`，但这应该明白这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T11:15:25.653

Rails 不会按照您描述的方式捕获方法调用。如果您查看`AbstractController::Base.process`它将查找为调度的操作调用的方法，运行过滤器，然后调用实际的方法。也就是说，你的控制器方法不是直接调用的，而是通过这个`process`方法调用的。

# java - Struts 动作相关问题

> ID：12174708
> 
> 赞同：0
> 
> 时间：2012-08-29T09:25:59.723
> 
> 标签：java, jakarta-ee, struts

我放了一个标签

```
<form action="/emailConfig.do"> 
```

在我的 jsp 页面中并将操作放入 struts_config.xml 文件中

```
 <action path="/emailConfig" type="a.b.EmailConfigAction" name="emailConfigForm" 
          scope="request" validate="false">
        <forward name="success" path="/emailConfig.jsp" />
        <forward name="failure" path="/emailConfig.jsp" />
</action> 
```

但是当我执行任何事件（按钮单击/链接单击）时，页面不会显示，但会出现异常，即

“请求的资源 (/emailConfig.do) 不可用。”

任何人都可以帮我解决我所缺少的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:53:54.877

已经解决了这个问题。我刚换

```
 <form> tag with <html:form> 
```

快乐编码！:)

# java - 使用 Transformer 缩进 XML 内部数据

> ID：12174711
> 
> 赞同：2
> 
> 时间：2012-08-29T09:26:18.940
> 
> 标签：java, xml, formatting, xml-formatting

我正在使用[本](http://t.genedavis.com/library/xml/java_dom_xml_creation.jsp)教程编写一个 XML 文件。我申请了

```
transformer.setOutputProperty("{http://xml.apache.org/xalan}indent-amount", "4");
transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "yes");
transformer.setOutputProperty(OutputKeys.INDENT, "yes"); 
```

xml格式化代码。

但是对于长 xml 数据，它向我显示 xml 像 khis：

```
<kml>
<Placemark>
    <name>yong</name>
    <Polygon>
        <timezone>EASTERN</timezone>
        <outerBoundaryIs>
            <LinearRing>
                <coordinates>-77.05788457660967,38.87253259892824,100
-77.05465973756702,38.87291016281703,100
-77.05315536854791,38.87053267794386,100
-77.05552622493516,38.868757801256,100
-77.05844056290393,38.86996206506943,100
-77.05788457660967,38.87253259892824,100</coordinates>
            </LinearRing>
        </outerBoundaryIs>
    </Polygon>
</Placemark>
</kml> 
```

但我想按以下方式格式化：

```
<kml>
<Placemark>
    <name>yong</name>
    <Polygon>
        <timezone>EASTERN</timezone>
        <outerBoundaryIs>
            <LinearRing>
                <coordinates>
                    -77.05788457660967,38.87253259892824,100
                    -77.05465973756702,38.87291016281703,100
                    -77.05315536854791,38.87053267794386,100
                    -77.05552622493516,38.868757801256,100
                    -77.05844056290393,38.86996206506943,100
                    -77.05788457660967,38.87253259892824,100
                </coordinates>
            </LinearRing>
        </outerBoundaryIs>
    </Polygon>
</Placemark>
</kml> 
```

这个怎么做？这种格式的变压器有什么方法或其他属性可以实现吗？提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T09:41:43.253

我不知道这是否可能。

我想你的字段坐标是一个字符串。Transformer 确实会修改 String 的内容以防止例如更改您的 String 是一个文本，其中空格、制表符和换行符具有含义。

如果您需要对齐此字段，您可以：

*   手动执行（假设坐标字段始终位于第五级并添加您自己的 \n\t\t\t\t\t.
*   如果允许，请更改坐标字段的类型...

# string - Matlab中有没有类似java函数String.split(delimiter)的函数？

> ID：12174712
> 
> 赞同：10
> 
> 时间：2012-08-29T09:26:21.373
> 
> 标签：string, matlab

是否有一个（默认）Matlab 函数，其行为类似于 java 方法 split(delimiter)，您可以在其中基于任意分隔符对字符串进行标记？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-29T09:40:07.640

有一个名为的内置函数`textscan`可以做到这一点：

```
>> C = textscan('I like stack overflow', '%s', 'delimiter', 'o');    
>> C = C{1}

C = 
    'I like stack '
    'verfl'
    'w' 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-29T10:05:37.533

这里有不止一种拆分字符串的方法。罗迪·奥尔登休斯刚刚提到的一个，还有一些其他的：

1> 使用功能`regexp`：

```
>> str = 'Good good study Day day up';
>> regexp(str,'\s','split')
ans = 
    'Good'    'good'    'study'    'Day'    'day'    'up'
>> 
```

2> 使用功能`strread`：

```
>> str = 'Section 4, Page 7, Line 26';
>> strread(str, '%s', 'delimiter', ',')
ans = 
    'Section 4'
    'Page 7'
    'Line 26'
>> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T09:32:06.937

有一个类似于您在[名为](http://www.mathworks.com/matlabcentral/fileexchange/4278)`xml_toolbox`.

它被称为`strsplit`。

> strsplit('我喜欢堆栈溢出','o')

答案=

> '我喜欢堆栈' 'verfl' 'w'

# jakarta-ee - java网站中的连接错误。tnsping 显示服务正在运行

> ID：12174714
> 
> 赞同：0
> 
> 时间：2012-08-29T09:26:27.107
> 
> 标签：jakarta-ee, connection-pooling, runtime-error, tnsnames

我有一个在 Windows 7 中运行的 java 网站应用程序，它使用 oracle 数据库来实现其功能。数据库具有默认 SID 名称 orcl。当我使用 tnsping 时，我可以看到 orcl 服务处于活动状态。除一部分外，大多数应用程序都运行良好。我想知道是否有人可以帮助我解决以下错误：-

```
1\. cause:

message:null,java.lang.reflect.InvocationTargetException

at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at org.olat.course.statistic.StatisticAutoCreator.createController(StatisticAutoCreator.java:73)
at org.olat.course.statistic.StatisticActionExtension.createController(StatisticActionExtension.java:40)
at org.olat.course.statistic.StatisticMainController.createController(StatisticMainController.java:80)
at org.olat.core.gui.control.generic.layout.GenericMainController.getContentCtr(GenericMainController.java:258)
at org.olat.core.gui.control.generic.layout.GenericMainController.event(GenericMainController.java:221)
at org.olat.core.gui.control.DefaultController.dispatchEvent(DefaultController.java:196)

2\. cause:

message:Could not get JDBC Connection; nested exception is java.sql.SQLException: The Network Adapter could not establish the connection,org.springframework.jdbc.CannotGetJdbcConnectionException

at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80)
at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:381)
at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:455)
at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:463)
at org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:471)
at org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:476)
at org.springframework.jdbc.core.JdbcTemplate.queryForLong(JdbcTemplate.java:480)
at org.olat.course.statistic.SimpleStatisticInfoHelper.doGetFirstLoggingTableCreationDate(SimpleStatisticInfoHelper.java:63)
at org.olat.course.statistic.SimpleStatisticInfoHelper.getFirstLoggingTableCreationDate(SimpleStatisticInfoHelper.java:81)
at org.olat.course.statistic.StatisticDisplayController.getStatsSinceStr(StatisticDisplayController.java:517)

3\. cause:

message:The Network Adapter could not establish the connection,java.sql.SQLException

at oracle.jdbc.driver.SQLStateMapping.newSQLException(SQLStateMapping.java:70)
at oracle.jdbc.driver.DatabaseError.newSQLException(DatabaseError.java:133)
at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:199)
at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:480)
at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:413)
at oracle.jdbc.driver.PhysicalConnection.(PhysicalConnection.java:508)
at oracle.jdbc.driver.T4CConnection.(T4CConnection.java:203)
at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:33)
at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:510)
at java.sql.DriverManager.getConnection(DriverManager.java:582)

4\. cause:

message:The Network Adapter could not establish the connection,oracle.net.ns.NetException

at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:328)
at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:421)
at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:634)
at oracle.net.ns.NSProtocol.connect(NSProtocol.java:208)
at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:966)
at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:292)
at oracle.jdbc.driver.PhysicalConnection.(PhysicalConnection.java:508)
at oracle.jdbc.driver.T4CConnection.(T4CConnection.java:203)
at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:33)
at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:510)

5\. cause:

message:Connection timed out: connect,java.net.ConnectException

at java.net.PlainSocketImpl.socketConnect(Native Method)
at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)
at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
at java.net.Socket.connect(Socket.java:525)
at java.net.Socket.connect(Socket.java:475)
at java.net.Socket.(Socket.java:372)
at java.net.Socket.(Socket.java:186)
at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:127) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:37:40.060

您是否在 /src/main/java/org/olat/course/statistic/_spring/statisticContext.xml 中实现了 Oracle 特定模板？这有点具体，因为日志基础设施有一些数据库供应商特定的元素。

请注意，OLAT 和 OpenOLAT 均未正式支持 Oracle。使用 Oracle 时还有其他已知问题，例如 NULL 值处理。MySQL 和 Oracle 在这里有不同的理念。这些问题在休眠层无法解决，您必须测试整个应用程序并进行代码更改。

如果您正在使用 OpenOLAT (http://www.openolat.org) 并愿意为 Oracle 兼容性调整做出贡献，请订阅 OpenOLAT 邮件列表并将您的补丁发送给我们。

干杯弗洛里安

# .htaccess - 将目录重写为子域

> ID：12174717
> 
> 赞同：1
> 
> 时间：2012-08-29T09:26:33.947
> 
> 标签：.htaccess, rewrite, subdomain

我有一个包含两个子域的页面：[cw.sidenote.hu](http://cw.sidenote.hu)和[cellwars.sidenote.hu](http://cellwars.sidenote.hu)，它们都指向[sidenote.hu/cellwars/](http://sidenote.hu/cellwars/)。

`cw.sidenote.hu`当我访问或`cellwars.sidenote.hu`URL 更改为/保持格式时，我想实现什么`cellwars.sidenote.hu`，而不是更改为`sidenote.hu/cellwars/`.

这是我目前在我的`.htaccess`文件中的内容：

```
RewriteEngine on

# Some hosts require a rewritebase rule, if so, uncomment the RewriteBase line below. If you are running from a subdirectory, your rewritebase should match the name of the path to where stacey is stored.
# ie. if in a folder named 'stacey', RewriteBase /stacey
#RewriteBase /cellwars

ErrorDocument 404 /404.html

# Rewrite any calls to *.html, *.json, *.xml, *.atom, *.rss, *.rdf or *.txt if a folder matching * exists
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !public/
RewriteCond %{DOCUMENT_ROOT}/public/$1.$2 !-f
RewriteRule (.+)\.(html|json|xml|atom|rss|rdf|txt)$ $1/ [L]

# Add a trailing slash to directories
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !(\.)
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ([^/]+)$ $1/ [L]

# Rewrite any calls to /* or /app to the index.php file
RewriteCond %{REQUEST_URI} /app/$
RewriteRule ^app/ index.php [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)/$ index.php?$1 [L]

# Rewrite any file calls to the public directory
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !public/
RewriteRule ^(.+)$ public/$1 [L] 
```

这些是我尝试使用的重写规则，但似乎这会使站点进入无限的重写循环：

```
# cw.sidenote.hu -> cellwars.sidenote.hu
RewriteCond %{HTTP_HOST} ^cw.sidenote.hu$
RewriteRule ^(.*)$ http://cellwars.sidenote.hu/ [R=301,L]

# sidenote.hu/cellwars/* -> cellwars.sidenote.hu/*
RewriteCond %{REQUEST_URI} ^/cellwars/?(.*)$
RewriteRule ^(.*)$ http://cellwars.sidenote.hu/%1 [R=301,L] 
```

这是我从 Chrome 中得到的：

```
This webpage has a redirect loop
The webpage at http://cellwars.sidenote.hu/ has resulted in too many redirects. Clearing your cookies for this site or allowing third-party cookies may fix the problem. If not, it is possibly a server configuration issue and not a problem with your computer.
Here are some suggestions:
    Reload this webpage later.
    Learn more about this problem.
Error 310 (net::ERR_TOO_MANY_REDIRECTS): There were too many redirects. 
```

有人可以帮我吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:38:17.373

尝试用此替换您的 htaccess 文件内容（我没有更改任何内容`ErrorDocument 404 /404.html`）：

```
RewriteEngine on

# Some hosts require a rewritebase rule, if so, uncomment the RewriteBase line below. If you are running from a subdirectory, your rewritebase should match the name of the path to where stacey is stored.
# ie. if in a folder named 'stacey', RewriteBase /stacey
RewriteBase /

# cw.sidenote.hu -> cellwars.sidenote.hu
RewriteCond %{HTTP_HOST} ^cw\.sidenote\.hu$
RewriteRule ^(.*)$ http://cellwars.sidenote.hu/$1 [R=301,L]

# sidenote.hu/cellwars/* -> cellwars.sidenote.hu/*
RewriteCond %{HTTP_HOST} ^(www\.)?sidenote\.hu$
RewriteRule ^cellwars/?(.*)$ http://cellwars.sidenote.hu/$1 [R=301,L]

ErrorDocument 404 /404.html

# Rewrite any calls to *.html, *.json, *.xml, *.atom, *.rss, *.rdf or *.txt if a folder matching * exists
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !public/
RewriteCond %{DOCUMENT_ROOT}/public/$1.$2 !-f
RewriteRule (.+)\.(html|json|xml|atom|rss|rdf|txt)$ $1/ [L]

# Add a trailing slash to directories
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !(\.)
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ([^/]+)$ $1/ [L]

# Rewrite any calls to /* or /app to the index.php file
RewriteCond %{REQUEST_URI} /app/$
RewriteRule ^app/ index.php [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)/$ index.php?$1 [L]

# Rewrite any file calls to the public directory
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !public/
RewriteRule ^(.+)$ public/$1 [L] 
```

# installation - 安装程序在错误的程序文件夹中传递文件时出现问题

> ID：12174720
> 
> 赞同：0
> 
> 时间：2012-08-29T09:26:36.877
> 
> 标签：installation, windows-installer, 32bit-64bit, installshield

我是 InstallShield 菜鸟，我只是在尝试 InstallShield 中的几个功能。

我有一个基本的 MSI 项目（InstallShield 2010）。我在我的项目中创建了 3 个功能，即 -
1) 32 位
2) 64 位
3) 通用文件
所有这些功能将文件传送到程序文件文件夹，这是默认安装文件夹。

这些功能中的每一个都包含 2 个组件 -
1\. 一个 .txt 文件
2\. 和一个注册表项。

**对于 64 位功能下的两个组件，我已将 64 位组件选项设置为 true**

在**32 位功能**的设置设计中，我将**发布标志设置为“X86”**
，对于**64 位功能**，我将**发布标志设置为“X64”**

现在我已经配置了 2 个版本
1\. X8​​6 版本 - 包含 32 位功能 + 通用功能
2\. X64 版本 - 包含 64 位功能 + 通用功能

现在，当我执行 64 位 MSI 时，我的所有文件都被传送到 ProgramFiles x86 文件夹，而不是 ProgramFiles 文件夹。

但是我可以看到 64 位注册表是在 HKLM\software 配置单元下正确创建的，而不是在 WOW6432Node 下

我已经在不同的选项上苦苦挣扎了将近一天，没有任何进展:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T12:16:12.280

确保您的 64 位版本执行以下两项操作：

*   根目录下的文件`[ProgramFiles64Folder]`而不是`[ProgramFilesFolder]`，可能通过适当的自定义操作来设置目录
*   使用模板摘要`x64`代替`Intel`（加上相同的语言代码列表）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T09:51:26.267

迈克尔，你确实让我走上了正确的道路。

我仍然使用 programFiles 文件夹作为我的基本安装目录，并在 costfinalize 之后创建了一个目录自定义操作，它检查最终机器的目标架构并将 Installdir 设置为 Program Files x86（用于 32 位安装）和 Program Files x64 用于 64 位安装。

谢谢 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-30T04:07:29.690

*   使用 x64 的模板摘要
*   将 64 位组件设置为是

# excel - 运行时错误“1004”：对象“_Global”的方法“范围”失败

> ID：12174723
> 
> 赞同：12
> 
> 时间：2012-08-29T09:26:41.177
> 
> 标签：excel, vba

我在使用生成参考编号的表格时遇到了问题。但是当我尝试生成参考号时。它有一条错误消息说：

> 运行时错误“1004”：对象“_Global”的方法“范围”失败

当我点击 Debug button 时，它显示如下代码：

它突出显示代码第 4 行的错误

```
Sub clearTemplate()
    ' Clear Template Content
    Range(inputTemplateHeader) = NO_ENTRY
    Range(inputTemplateContent) = NO_ENTRY     - (highlighted error)
End Sub

Sub clearRefNo()
    ' Clear cell G2 reference number
    Range(cellRefNo) = NO_ENTRY

    ' Open "Report_ref_no.xls"
    If Not (IsFileOpen) Then Workbooks.Open filename:=ThisWorkbook.Path & "\" & FACCESS

    ' Activate "Report_ref_no.xls"
    Windows(FACCESS).Activate

    ' Access column D
    Range(cellFirstRefNo).Select
    Selection.End(xlDown).Select

    If refNo = Cells(ActiveCell.Row, ActiveCell.Column - 1).Value Then
        ' Log Development Code column
        Cells(ActiveCell.Row, ActiveCell.Column) = NO_ENTRY

        ' Log Issuer column
        Cells(ActiveCell.Row, ActiveCell.Column + 1).Value = NO_ENTRY

        ' Log Date column
        Cells(ActiveCell.Row, ActiveCell.Column + 2).Value = NO_ENTRY
    End If

    ' Save & Close workbook
    ActiveWindow.Close True
End Sub 
```

谁能帮我解决这个问题？我不知道出了什么问题？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-29T12:54:15.353

当您像这样引用 Range 时，它​​被称为非限定引用，因为您没有具体说明该范围在哪个工作表上。非限定引用由“_Global”对象处理，该对象确定您所引用的对象，这取决于您的代码所在的位置。

如果您在标准模块中，则不合格的 Range 将引用 Activesheet。如果您在工作表的类模块中，则不合格的 Range 将引用该工作表。

inputTemplateContent 是一个变量，其中包含对一个范围的引用，可能是一个命名范围。如果您查看该命名范围的 RefersTo 属性，它可能在代码执行时指向除 Activesheet 之外的工作表。

解决此问题的最佳方法是通过指定工作表来避免不合格的 Range 引用。喜欢

```
With ThisWorkbook.Worksheets("Template")
    .Range(inputTemplateHeader).Value = NO_ENTRY
    .Range(inputTemplateContent).Value = NO_ENTRY
End With 
```

调整工作簿和工作表引用以适应您的特定情况。

# routing - 将模块/动作/重定向到模块/动作

> ID：12174726
> 
> 赞同：0
> 
> 时间：2012-08-29T09:26:46.990
> 
> 标签：routing, seo, symfony-1.4

我的问题很简单，如何使用 symfony 1.4 实现 SEO 优化任务？

第一个问题，不仅仅是一个 SEO 问题，而是一个 symfony 1.4 的问题，一般来说，symfony 对 URL 做了一件奇怪的事情，比如：

> 模块/动作

和

> 模块/动作/

第一个有效，第二个被拒绝或抛出错误，或者最常见的有效，但不重定向（使用 301）到第一个，这应该是一个约定，因为 SEO 明智的这些 url 不是完全相同的。这不应该。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:36:55.643

这是 symfony 中的一个常见错误，这个尾部的斜杠会引起麻烦。有些人会告诉你这是正常的，因为第一个是*文件*，第二个是*目录*。由于你不能用 symfony 浏览目录，它会抛出一个错误。

但是您有两个选择作为解决方法，使用 htaccess 或使用自定义路由。

**htaccess：（**从[这里](http://symfony-blog.driebit.nl/2010/07/url-routes-with-or-without-a-trailing-slash/)）

```
RewriteRule ^(.+)/$ http://%{HTTP_HOST}/$1 [R=301,L] 
```

**自定义路由：（**从[这里](http://vacskamati.blogspot.fr/2010/05/how-to-allow-trailing-slash-in-urls-in.html)）

`/apps/frontend/config/factories.yml`

```
all:
  routing:
    # class: sfPatternRouting
    class: myPatternRouting 
```

创建类：

`apps/frontend/lib/myPatternRouting.class.php`

```
<?php
class myPatternRouting extends sfPatternRouting
{
  protected function normalizeUrl($url)
  {
    $url = parent::normalizeUrl($url);

    // remove trailing slash
    $url = preg_replace('/\/$/', '', $url);

    return $url;
  }
} 
```

# iphone - 如何将位置纬度与字符串进行比较

> ID：12174737
> 
> 赞同：0
> 
> 时间：2012-08-29T09:27:37.103
> 
> 标签：iphone, xcode, location

当我从 locationManager 获取位置时，我的问题是有时无法正确加载。所以我想检查我的位置是否不同于 0.0000000。为此，我将坐标转换为字符串。然后将该字符串与 isEaqual 进行比较。

```
NSMutableString *nicla=@"0.0000000";
while(true){
cLoc=appDelegate.currentLocaiton;
lat=[NSString stringWithFormat:@"%f", [cLoc coordinate].latitude];
lng=[NSString stringWithFormat:@"%f", [cLoc coordinate].longitude];

NSLog(@"Execution Time: %f lat: %p lng: %p", executionTime, lat, lng);
    NSLog(lat);
    NSLog(lng);
    NSLog(nicla);
    if([lat isEqual:nicla]){ }
    else break;
} 
```

我也尝试了 isEaqualToString 但结果相同，在我的日志中那些是相同的字符串......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T09:36:30.453

`longitude`并且`latitude`只是双值，为什么要将它们转换为 NSString 来比较它们？只需使用

```
if([cLoc coordinate].latitude == 0.00) {} 
```

# jpa - Liferay JPA 类加载器错误

> ID：12174739
> 
> 赞同：0
> 
> 时间：2012-08-29T09:27:42.573
> 
> 标签：jpa, integration, liferay

**已编辑（我正在简化，因为我原来的问题太复杂了）：**

在 Liferay 6.1.20 中创建一个 portlet 插件

在您的 portlet 的 web.xml 中添加一个 spring 上下文加载器

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext.xml</param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

在您的应用程序上下文中添加一个 EntityManagerFactory 的实例

```
<bean id="localEntityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceXmlLocation" value="WEB-INF/classes/META-INF/persistence.xml" />
</bean> 
```

确保在您的持久性定义中引用 JPA 实现

```
<persistence-unit name="casd" transaction-type="RESOURCE_LOCAL">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <properties>
        <property name="eclipselink.weaving" value="false" />
    </properties>
</persistence-unit> 
```

看雄猫哭泣

```
java.lang.LinkageError: loader constraint violation in interface itable initialization: when resolving method "org.eclipse.persistence.jpa.PersistenceProvider.getProviderUtil()Ljavax/persistence/spi/ProviderUtil;" the class loader (instance of org/apache/catalina/loader/WebappClassLoader) of the current class, org/eclipse/persistence/jpa/PersistenceProvider, and the class loader (instance of org/apache/catalina/loader/StandardClassLoader) for interface javax/persistence/spi/PersistenceProvider have different Class objects for the type javax/persistence/spi/ProviderUtil used in the signature 
```

玩 hibernate3.jar、eclipselink.jar、persistence.jar 直到筋疲力尽，然后意识到 Liferay 正对着你笑。

你将如何从 Liferay 的脸上抹去那个恼人的笑容？换句话说，

**如何在 liferay 6.1.20 的 portlet 插件中的 spring 上下文中实例化 JPA 提供程序而不会出现类加载器错误？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:22:44.073

行。我设法“解决”了将 ecliseplink.jar 从 /ROOT/WEB-INF/lib 移动到 {tomcat}/lib/ext

我不喜欢它作为一种解决方案，不得不与 ext 混淆，但这是一个接受或离开它的情况。

# jpa-2.0 - 将 Infinispan 缓存条目与数据库同步

> ID：12174747
> 
> 赞同：1
> 
> 时间：2012-08-29T09:28:04.243
> 
> 标签：jpa-2.0, jboss6.x, infinispan

我想知道我是否可以使用 Infinispan 与 Oracle 数据库进行缓存数据同步。这是我的场景。我有两个主要应用程序。一个是高并发使用的应用程序，第二个用作管理模块。由于它是高度并发的，我想减少数据库连接（将实体加载到缓存中（读写启用）并从这个地方使用它而不调用数据库）。但同时我想根据缓存更改更新数据库，因为管理模块直接使用数据库。该更新过程（缓存到数据库）可以在实体级别处理而不涉及应用程序吗？请让我知道 Infinispan 是否支持这种情况。如果支持请分享想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T02:28:36.127

对的，这是可能的。Infinispan 支持此用例。

这应该只是简单的配置“问题”。您只需要使用正确配置的 CacheStore 即可`passivation disabled`。它将使您的缓存（由高度并发的应用程序使用）与数据库同步。

它究竟是什么原因造成的？

> 禁用钝化后，无论何时修改、添加或删除元素，该修改都会通过缓存加载器保存在后端存储中。驱逐和缓存加载之间没有直接关系。如果您不使用逐出，则持久存储中的内容基本上是内存中内容的副本。

这里的内存是指缓存。如果您想了解更多关于此和其他有趣选项的信息，请参阅：[https ://docs.jboss.org/author/display/ISPN/Cache+Loaders+and+Stores#CacheLoadersandStores-cachepassivation](https://docs.jboss.org/author/display/ISPN/Cache+Loaders+and+Stores#CacheLoadersandStores-cachepassivation)

也许值得考虑前面提到的驱逐。是否禁用或启用它。它主要取决于您的高并发应用程序产生的负载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-29T06:29:19.967

实际上，这仅在您在同一集群中为管理模块使用 Infinispan 时才有效。如果使用 Infinispan 将 A 加载到内存中，然后直接使用 admin 模块将 A 更改为数据库中的其他内容，那么 Infinispan 将不知道 A 已更新。

# python - 使用 Python 的 Android 应用程序

> ID：12174749
> 
> 赞同：-1
> 
> 时间：2012-08-29T09:28:15.897
> 
> 标签：python

我如何使用 python 制作我的 android 应用程序。有没有办法使用python制作android应用程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T09:30:54.843

看看这个[教程](http://www.ibm.com/developerworks/opensource/library/mo-python-sl4a-1/index.html)。

使用 Python 和 SL4A 的 Android 应用程序，第 1 部分：设置您的开发环境

# jasper-reports - isStretchWithOverflow 的 iReport 问题

> ID：12174751
> 
> 赞同：3
> 
> 时间：2012-08-29T09:28:34.010
> 
> 标签：jasper-reports, ireport

目前，当文本字段中的内容太长时，我使用属性***isStretchWithOverflow来换行。***有用。但我想知道如何确定它断线的方式。

下面是我的*jrxml*文件的片段：

```
<textField isStretchWithOverflow="true">
    <reportElement positionType="Float" width="150" height="20"/>
    <box leftPadding="15">

    </box>
    <textFieldExpression><![CDATA[$F{content}]]></textFieldExpression>
</textField> 
```

对于像这样的内容

```
oh my god test="longstring" abcdefg hijk 
```

我要把“longstring”当作一个词。所以我的想象输出是

```
oh my god test=
"longstring" abcdefg
hijk 
```

但实际输出是

```
oh my god test="
longstring" abcdefg
hijk 
```

另一个问题类似

原来的内容是

```
abc.def/hij/k.lmnopqrstu 
```

我想

```
abc.def/
hij/k.
lmnopqrstu 
```

但实际输出是

```
abc.
def/hij/k.
lmnopqrstu 
```

遇到“/”不换行

有什么办法可以做我想做的事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-06T12:35:22.403

net.sf.jasperreports.engine.fill.TextMeasurer 实现（net.sf.jasperreports.engine.fill.JRMeasuredText 接口）类使用私有 RuleBasedBreakIterator 类实现的 java.text.BreakIterator 接口。RuleBasedBreakIterator 读取 JDK 提供的文件，该文件定义了要在其上执行换行符的字符。由于 RuleBasedBreakIterator 类是私有的，我还没有找到一种简单的方法来更改默认行为。通过修改以下属性，可以使用替代实现替换 net.sf.jasperreports.engine.fill.TextMeasurer：

```
#Default text measurer
net.sf.jasperreports.text.measurer.factory=default
net.sf.jasperreports.text.measurer.factory.default=net.sf.jasperreports.engine.fill.TextMeasurerFactory 
```

除非您可以通过自定义在 JDK 中实现健壮的中断逻辑，否则这在实践中可能并不可取。

对于某些人来说，另一种选择可能是使用 IBM JDK，它不提供 ICU4J，它提供了 RuleBasedBreakIterator 的可定制实现，如下所述：

[http://sujitpal.blogspot.com/2008/05/tokenizing-text-with-icu4js.html](http://sujitpal.blogspot.com/2008/05/tokenizing-text-with-icu4js.html)

# asp.net - 简单的数据访问/下载 ASP.NET

> ID：12174754
> 
> 赞同：0
> 
> 时间：2012-08-29T09:28:40.233
> 
> 标签：asp.net, database, devexpress

我是一名 winforms 程序员，需要为我们的 sql server 数据库设置一个数据访问网站。该数据库包含天气数据（风、温度等）。我希望用户能够选择开始和停止日期以及下载数据集。我知道这应该很容易构建，但我想就什么是最好的技术提出一些建议。

我需要实体框架吗？我们拥有 Developer Express ASP.NET 的许可证。任何想法都可以使用，因为我对所有可用的选项完全感到困惑，而且我很长时间没有建立任何 ASP.NET 网站......

谢谢，

埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:39:09.653

是的，具有 Developer Express ASP.NET 的许可证。你可以使用实体框架

如果你想使用 ORM 技术。映射关系对象；你有向导帮助你创建数据库和映射

[http://msdn.microsoft.com/en-us/data/ef.aspx](http://msdn.microsoft.com/en-us/data/ef.aspx)

您还可以仅将 ADO.Net 与数据适配器、存储过程、数据集数据表等一起使用......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T09:53:21.087

对于第一次传递/原型，我建议您使用 ADO.Net 并查看它如何与您的数据集一起运行。然后，一旦事情变得更清楚，我可能会研究 ORM。根据您提到的用例 ORM*可能*是矫枉过正。

# knockout.js - KnockoutJS 映射，来自 WebAPI 的 JSON

> ID：12174756
> 
> 赞同：3
> 
> 时间：2012-08-29T09:28:49.957
> 
> 标签：knockout.js, asp.net-web-api

我可以使用以下代码将从 .net WebAPI 返回的 JSON 绑定到淘汰视图模型。

```
function viewModel() {
    var self = this;
    self.temps = ko.observableArray([]);
}

$(function () { 
    var model = new viewModel();

    $.get('../api/Temp/', function (data) { 
        model.temps(data);
    });

    ko.applyBindings(model);       

}); 
```

当我尝试使用[Ryan Niemeyer 的映射示例](http://www.knockmeout.net/2011/04/utility-functions-in-knockoutjs.html)时，我在返回的 Json 上使用时得到 null，`ko.utils.parseJson`而当我尝试`ko.utils.arrayMap`直接使用时，我得到未定义。

如果我尝试以下操作，我也很难将 get 请求放入一个单独的函数中，我的数据绑定停止工作

```
function dataFromServer() {
    $.get('../api/Temp/', function (data) { 
        return data;
    });
}

$(function () { 
    var model = new viewModel();
    var data = dataFromServer();
    model.temps(data);

    ko.applyBindings(model);       

}); 
```

从服务器返回 JSON：

```
[{"Id":1,"Name":"Test1","TypeId":100,"Temp":21.0,"Peak":true},{"Id":2,"Name":"Test2","TypeId":100,"Temp":21.0,"Peak":true},{"Id":3,"Name":"Test3","TypeId":101,"Temp":21.0,"Peak":true}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:36:46.503

您的 AJAX 调用是异步的，因此它不会立即从您的函数返回您的数据：

```
$.get('../api/Temp/', function (data) { 
        return data;
    }); 
```

您可能希望将要写入结果的 observable/observableArray 传递到您的函数中，例如：

```
function dataFromServer(temps) {
    $.get('../api/Temp/', function (data) { 
        return temps(data);
    });
} 
```

然后这样称呼它：

```
var model = new viewModel();
dataFromServer(model.temps); 
```

# sap-ase - 将双精度转换为数字 - Sybase

> ID：12174761
> 
> 赞同：2
> 
> 时间：2012-08-29T09:28:56.907
> 
> 标签：sap-ase

我有一个双精度类型的列，我想将此列中的值复制到另一个类型为 numeric(19,2) 的列。

当我这样做`select CONVERT( numeric(19,2), PriceNettoTmp) from Table`时，它会起作用，但当我这样做时，`update Table set PriceNetto = CONVERT( numeric(19,2), PriceNettoTmp)`它不会。

`update`在 Squirrel SQL 中执行时的错误消息：

> 写入列 -1Data 时发生数据截断错误，长度为 -1 个字节，传输了 -1 个字节。

`update`在 Sybase Central 中执行时的错误消息：

> 无法执行语句。将 FLOAT NULL 值 '10,449999999999999.0' 显式转换为 NUMERIC 字段期间算术溢出。Sybase 错误代码 = 247 严重级别 = 16，状态 = 1，事务状态 = 0 第 1 行

有谁知道有什么问题？

* * *

**编辑**

我找到了一个可行的解决方案：`update Table set PriceNetto = CONVERT( numeric(19,2), str_replace(str(PriceNettoTmp,19,2),',','.'))`

虽然我仍然不明白为什么`select`工作而`update`不是。还有比我更简单的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:45:55.977

解决方案（如OP所述）

```
update Table set PriceNetto = CONVERT( numeric(19,2), str_replace(str(PriceNettoTmp,19,2),',','.')) 
```

# c# - Fluent 验证 (MVC3) 中的本地化消息

> ID：12174768
> 
> 赞同：2
> 
> 时间：2012-08-29T09:29:13.707
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

在我正在使用的 MVC 3 应用程序中`fluent validation`。

```
public class AccountModelValidator : AbstractValidator<AccountModel>
    {
        public AccountModelValidator()
        {
           m.NewPassword).WithMessage(Translator.Data["ConfirmPasswordValidation"]);
        }
    } 
```

对于本地化，我使用的是从[这里](http://blog.kosev.net/2010/06/tutorial-create-aspnet-mvc-localization.html)找到的示例，但我发现我对所有语言都有相同的验证消息。

原因是验证器不知道我更改了语言。

我怎样才能正确地做到这一点？

也许我应该使用 WithLocalizedMessage 但它仅适用于 .resx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-22T12:02:03.290

当 WithLocalizedMessage 为所有语言返回相同的值时，很可能尚未设置文化（这发生在 POST 上，其中操作处理程序尚未运行）

解决方案是在不同的位置设置文化： [为多语言 ASP.NET MVC Web 应用程序设置 CurrentCulture 的最佳位置](https://stackoverflow.com/questions/8226514/best-place-to-set-currentculture-for-multilingual-asp-net-mvc-web-applications)

# c - 使用 ## 连接一个字符串，使用 C 中的一个整数值连接微控制器

> ID：12174771
> 
> 赞同：1
> 
> 时间：2012-08-29T09:29:29.907
> 
> 标签：c, concatenation, microcontroller

我需要用一个整数连接一个字符串。我正在使用这个代码：

```
#include<stdio.h>
#define SW_ENUM_VALID_COUNT(x) SW##x##_VALID_COUNT

void main()
{
      int b = 16;
      int SW16_VALID_COUNT=8;
       printf("%d",SW_ENUM_VALID_COUNT(b));
} 
```

我应该怎么做才能得到表达式的结果，`SW_ENUM_VALID_COUNT(b) <=> SW16_VALID_COUNT`因为现在结果是`SWb_VALID_COUNT`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T09:38:01.663

你不能这样做。

变量的值（例如`b`在您的代码中）对预处理器不可用。

# bash - 意外令牌附近的 Ubuntu BASH 语法错误

> ID：12174773
> 
> 赞同：0
> 
> 时间：2012-08-29T09:29:40.283
> 
> 标签：bash, ubuntu, ubuntu-12.04

我正在按照本教程[http://ubuntuforums.org/showthread.php?t=1550470](http://ubuntuforums.org/showthread.php?t=1550470)为 Phorinix 测试套件安装 GUI，并将其安装在 Ubuntu 12.04 上。我已经安装了测试套件和 PHP5，它们都在终端中运行良好，但我现在正在尝试创建 GUI。

运行本教程的这一部分时：

```
cd /usr/share/aclocal
sudo cp libtool.m4 libtool.m4~backup
sudo chmod 777 libtool.m4
(start line) sudo cat lt~obsolete.m4 ltoptions.m4 ltsugar.m4 ltversion.m4 >>libtool.m4 (end line)
sudo chmod 644 libtool.m4 
```

我收到以下错误：

> bash：意外标记“sudo”附近的语法错误

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:18:20.930

`(start line)`和标记看起来更像注释，`(end line)`而不是适合脚本其余部分的命令。但如果他们真的属于，他们需要与线路的其余部分分开

```
(start line); sudo cat ... >> libtool.m4; (end line) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:28:55.543

删除`(start line)`和`(end line)`。当论坛为了使代码块适合一定宽度而切断行时，原始发布者添加了这些。

# cuda - Cuda 纹理内存不继承正确的值

> ID：12174782
> 
> 赞同：0
> 
> 时间：2012-08-29T09:30:16.393
> 
> 标签：cuda, textures, gpu

我正在尝试将 2D 数组绑定到纹理并在数据之间进行插值。我的问题是。当我将数组绑定到纹理时，我访问的值完全是胡说八道。即使我试图访问第一个值 (text2D(tex,0.0f,0.0f) 我没有意义。所以我想我绑定错了或者我的 memcopy 错了。任何想法我的错误是?

这是代码

```
#include <stdio.h>
#include <iostream>
#include "cuda.h"
#include <stdlib.h>
#include "cuda_runtime.h"
#include "device_launch_parameters.h"
#include "HelloWorld.h"

#include "linearInterpolation_kernel.cu"
#include "linearInterpolation_kernel2.cu" 
#include "linearInterpolation_kernel3.cu" 

using namespace std;
using std::cout;

const int blocksize = 16; 

__global__ 
void hello(char *a, int *b) {
    a[threadIdx.x] += b[threadIdx.x];
}

////////////////////////////////////////////////////////////////////////////////
// These are CUDA Helper functions

    // This will output the proper CUDA error strings in the event that a CUDA host call returns an error
    #define checkCudaErrors(err)           __checkCudaErrors (err, __FILE__, __LINE__)

    inline void __checkCudaErrors( cudaError err, const char *file, const int line )
    {
        if( cudaSuccess != err) {
            printf("%s(%i) : CUDA Runtime API error %d: %s.\n",file, line, (int)err, cudaGetErrorString( err ) );

        }
    }

    // This will output the proper error string when calling cudaGetLastError
    #define getLastCudaError(msg)      __getLastCudaError (msg, __FILE__, __LINE__)

    inline void __getLastCudaError( const char *errorMessage, const char *file, const int line )
    {
        cudaError_t err = cudaGetLastError();
        if( cudaSuccess != err) {
            printf("%s(%i) : getLastCudaError() CUDA error : %s : (%d) %s.\n", file, line, errorMessage, (int)err, cudaGetErrorString( err ) );

        }
    }

int main()
{
    int N = 200; 
    float *A; 
    A = (float *) malloc(N*sizeof(float));
    float *B;
    B = (float *) malloc(N*sizeof(float));
    float *result;
    result = (float *) malloc(N*sizeof(float));
    float angle = 0.5f; 

    for(int i = 0; i < N; i++){
        A[i] = (float)rand();
        B[i] = (float)rand();
    }
    cout << A[3] << endl;
    cout << B[3] << endl;

    ipLinearTexture(A,B,result,angle,N);

    float result2;

    result2 = (angle)*A[3] + (1-angle)*B[3]; 

    printf(" A %f B %f Result %f\n", A[3], B[3], result[3]);
    cout << result2 << endl;

    return 1;
}

void ipLinearTexture(float *A, float* B, float* result, float angle, int N)
{
    float cuTime;

    const int N2 = N;
    float *dev_result;
    float **AB; 

    AB = (float **) malloc( N * sizeof(float *));

    if(AB)
    {
        for(int i = 0; i < N; i++)
        {
            AB[i] = (float *) calloc( 2 , sizeof(float *));
        }
    }
    for (int i = 0; i < N; i++)
    {
        AB[i][0] = A[i]; 
        AB[i][1] = B[i];
    }

    cudaMalloc(&dev_result, N * sizeof(float));
    unsigned int size = N * 2 * sizeof(float);

    cudaChannelFormatDesc channelDesc = cudaCreateChannelDesc(32, 0, 0, 0, cudaChannelFormatKindFloat);
    cudaArray* cu_array;

    checkCudaErrors(cudaMallocArray( &cu_array, &channelDesc,N,2 )); 
    checkCudaErrors(cudaMemcpyToArray( cu_array, 0, 0, AB, size, cudaMemcpyHostToDevice));

    tex.addressMode[0] = cudaAddressModeClamp;
    tex.addressMode[1] = cudaAddressModeClamp;
    tex.filterMode = cudaFilterModeLinear; 
    tex.normalized = false;    // access with normalized texture coordinates

    checkCudaErrors(cudaBindTextureToArray( tex, cu_array, channelDesc));

    dim3 dimBlock(10, 1, 1);
    dim3 dimGrid((int)ceil((double)N*2/dimBlock.x), 1, 1);

    transformKernel3<<< dimGrid, dimBlock, 0 >>>( dev_result, N, 2, angle);

    checkCudaErrors(cudaUnbindTexture(tex));

    cudaMemcpy(result, dev_result, N * sizeof(float), cudaMemcpyKind::cudaMemcpyDeviceToHost);
    result[0] = (float)cuTime;
    cout << "==================================================" << endl;

    for (int i = 0 ; i < N ;i++)
    {
        cout << result[i] << endl;      
    }

    cout << "==================================================" << endl;

    cudaFree(dev_result);
    cudaFreeArray(cu_array);
} 
```

这是内核中的代码

```
#ifndef _SIMPLETEXTURE_KERNEL3_H_
#define _SIMPLETEXTURE_KERNEL3_H_

// declare texture reference for 2D float texture
texture<float, 1> tex;

////////////////////////////////////////////////////////////////////////////////
//! Transform an image using texture lookups
//! @param g_odata  output data in global memory
////////////////////////////////////////////////////////////////////////////////
__global__ void
transformKernel3( float* g_odata, int width, int height, float theta) 
{
    unsigned int id = blockIdx.x*blockDim.x + threadIdx.x;

    if (id < width*height)
    {       

        g_odata[id] = tex1D(tex, xid * 2 + 0.5f);

    }
}

#endif // #ifndef _SIMPLETEXTURE_KERNEL_H_ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:24:57.343

就像 OpenGL 中的概念一样，您可以认为 2D 纹理是一个矩形场。每个小矩形的中心点是您的数组数据。因此，`tex2D(tex, 0.5f/width, 0.5f/height)`这正是您的数组数据的第一个值。( `width`&`height`是二维数组数据的宽度和高度)

# lucene.net - ASP.NET 和 Lucene 近似搜索

> ID：12174786
> 
> 赞同：0
> 
> 时间：2012-08-29T09:30:23.290
> 
> 标签：lucene.net

在 Lucene 的邻近搜索中，搜索单词的顺序是不被维护的。

有什么方法可以过滤搜索，以便 word1 在结果文档中总是出现在 word2 之前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:14:10.830

有`SpanNearQuery`那个。

[http://lucene.apache.org/core/old_versioned_docs/versions/2_9_4/api/all/org/apache/lucene/search/spans/SpanNearQuery.html](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_4/api/all/org/apache/lucene/search/spans/SpanNearQuery.html)

```
SpanTermQuery tq1 = new SpanTermQuery(new Term("field", "word1"));
SpanTermQuery tq2 = new SpanTermQuery(new Term("field", "word2"));
SpanNearQuery spanNear = new SpanNearQuery(new SpanQuery[]{tq1,tq2}, 2, true); 
```

# javascript - 无法通过内容脚本使用 jQuery 更改 HTML 元素的样式

> ID：12174790
> 
> 赞同：2
> 
> 时间：2012-08-29T09:30:37.003
> 
> 标签：javascript, jquery, html, google-chrome-extension, content-script

我正在为 chrome 编写一个扩展名作为“内容脚本”。我的扩展程序应该改变谷歌主页（https://www.google.com）的背景颜色我写了这段代码（包括jquery）：

```
$(".gsib_a").style="background:#FF0000"; 
```

但没有奏效。我确定我已将 jQuery 添加到内容脚本中，并且已设置 manifest.json 文件。我敢肯定，因为这段代码有效：

```
$(".gsib_a").hide(); 
```

而且我确信使用**gsib_a**类更改元素的**样式**正是我需要和影响的。因为我已经通过**Chrome Developer Tools**对其进行了测试。

 ****好的，谁知道问题所在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:43:39.497

如果要更改属性，请使用[attr 方法](http://api.jquery.com/attr/)： `$('.gsib_a').attr('style','background-color:#FF0000')​;`

但您可以直接使用[css 方法](http://api.jquery.com/css/)更改 css ：

```
​$('.gsib_a').css('background-color','#FF0000')​; 
```****

# android - CheckedTextView 不能在 setOnItemClickListener onCreate 方法中切换

> ID：12174791
> 
> 赞同：0
> 
> 时间：2012-08-29T09:30:40.820
> 
> 标签：android, toggle, oncreate, onclicklistener, checkedtextview

我有 ArrayAdapter，我在其中设置了文件数组：

```
adapter = new ArrayAdapter<Item>(this,
            R.layout.file_manager, R.id.checkedTextItem,
            fileList) 
            {

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // creates view
            LayoutInflater inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View view = inflater.inflate(R.layout.item, null);
            view.setFocusable(false);
            CheckedTextView textView = (CheckedTextView) view
                    .findViewById(R.id.checkedTextItem);

            // put the image on the text view
            textView.setCompoundDrawablesWithIntrinsicBounds(
                    fileList[position].icon, 0, 0, 0);

            textView.setTextColor(Color.WHITE);
            textView.setText(fileList[position].file);
            if(fileList[position].icon == R.drawable.directory_icon)
                textView.setCheckMarkDrawable(null);
            else if(fileList[position].icon == R.drawable.directory_up)
                textView.setCheckMarkDrawable(null);

            // add margin between image and text (support various screen
            // densities)
            int dp5 = (int) (5 * getResources().getDisplayMetrics().density + 0.5f);
            textView.setCompoundDrawablePadding(dp5);

            textView.setFocusable(false);

            return view;

        }
    }; 
```

然后我想通过单击项目来更改 CheckedTextView 的可检查状态。我这样做：

```
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
     setContentView(R.layout.file_manager);
    lv = (ListView)findViewById(R.id.fileManagerList);
    loadFileList();
    file_list = findViewById(R.id.filesList);
    lv.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
    lv.setFocusable(false);
    lv.setAdapter(adapter);

    lv.setOnItemClickListener(new android.widget.AdapterView.OnItemClickListener() {
          public void onItemClick(AdapterView<?> myAdapter, View myView, int myItemInt, long mylng) {
            //String selectedFromList = (lv.getItemAtPosition(myItemInt).toString());
            chosenFile = fileList[myItemInt].file;
            File sel = new File(path + "/" + chosenFile);

            if (sel.isDirectory()) {

                firstLvl = false;

                str.add(chosenFile);

                fileList = null;
                path = new File(sel + "");
                //adapter.notifyDataSetChanged();
                loadFileList();
                lv.setAdapter(adapter);

            }
            else if (chosenFile.equalsIgnoreCase("up") && !sel.exists()) {

                // present directory removed from list
                String s = str.remove(str.size() - 1);

                // path modified to exclude present directory
                path = new File(path.toString().substring(0,
                        path.toString().lastIndexOf(s)));
                fileList = null;

                // if there are no more directories in the list, then
                // its the first level
                if (str.isEmpty()) {
                    firstLvl = true;
                }

                loadFileList();
                lv.setAdapter(adapter);
            }
            else
            {
                View view = myAdapter.getChildAt(myItemInt);
                CheckedTextView textView = (CheckedTextView) view
                        .findViewById(R.id.checkedTextItem);        
                Toast toast = Toast.makeText(getApplicationContext(),textView.isChecked(), Toast.LENGTH_LONG);
                toast.show(); 

                textView.toggle();

                textView.setChecked(true);
            }

    }

});

} 
```

单击事件正在正确处理。我可以在 onCreate() 方法的 else 语句中获取 CheckedTextView 项 - 我检测到它的 id 并且还可以获得它的文本。但是当我尝试切换它或 setCheckable 时 - 它无法处理。然而，当我切换或 setCheckable 我的适配器中的所有项目时 - 可以更改检查状态......这可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:33:00.083

因为Android重用了视图。当您的可检查项目列表滚动到屏幕之外时，底部显示的新项目将从以前的项目中重复使用。您需要跟踪每个项目的状态（稀疏数组效果很好），并在每个视图中检查数组的状态并相应地设置 checkedtextview。

# c# - 扩展页面类

> ID：12174792
> 
> 赞同：6
> 
> 时间：2012-08-29T09:30:41.657
> 
> 标签：c#, wpf, xaml, inheritance, polymorphism

是否可以扩展 C# 的 WPF 工具包（或任何其他 WPF 类）中的“页面”类？我试图做的事情：

```
public class ExtendedPage : Page{
   protected void doStuff(){
      // lots of joy n pleasure
   }
}

public partial class RandomWindow : ExtendedPage{
   private void randomMethod(){
      doStuff(); // causes error
   }
} 
```

我问的原因很明显：在扩展页面类 (ExtendedPage) 之后，子类 (RandomWindow) 无法访问其基类的方法。这（至少这是我的猜测）是由 RandomWindow 的部分情况引起的。由于不幸的是这个类是由 WPF 生成的（链接到相应的 *.xaml），我无法找到部分类的另一部分。

这个问题可能会导致一个非常明显的答案，让我看起来像个白痴，但显然我无法弄清楚。我可能会补充一点，我刚刚开始使用 C#，我的编程起源是 Java。

确切的错误消息是“'type' 的部分声明不得指定不同的基类”（CS0263）。

作为对其中一条评论的回应： *.xaml 中的“Page”声明似乎生成了一个代码隐藏文件，其基类是“Page”（而不是 ExtendedPage）。更改它似乎也不起作用，编译器抱怨找不到类型 ExtendedPage。

```
<Page x:Class="...RandomWindow" ... />
// to
<src:ExtendedPage x:class="...RandomWindow" 
xlmns:src="...ExtendedPage" /> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T09:52:24.113

> 'type' 的部分声明不得指定不同的基类

好吧，这很简单，您可能在某处有一个 XAML，如下所示：

```
<Page x:Class="MyApp.MyNamespace.RandomWindow" ....> 
```

但是，隐式指定 a`Page`作为基础，您需要：

```
<local:ExtendedPage x:Class="MyApp.MyNamespace.RandomWindow"
                    xmlns:local="clr-namespace:MyApp.NSContainingExtendedPage"
                    ...> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:35:06.413

> 扩展页面类 (ExtendedPage) 后，子类 (RandomWindow) 无法访问其基类的方法

这是错误的。如果可能的话，扩展一个类可以让你访问基类的所有`public`成员`protected`。

*部分*只与类的**代码在不同文件中的分布有关，与编译后的***真实*呈现无关。编译后，它成为一种单一且坚固的类型。

您在此处发布的内容应该可以正常工作。

# python - 给定两个实体的“通过”表中的 Django 访问数据

> ID：12174793
> 
> 赞同：0
> 
> 时间：2012-08-29T09:30:41.950
> 
> 标签：python, sql, django, orm, many-to-many

我在 SO 中浏览了很多“通过表访问”，所以如果我错过了什么，请随时关闭它。

我有一个表 A、一个表 B、一个 nn 关系和一个直通表 C。C 包含“in_stock”属性。显然，对象 A1 和 B1 的配对总是唯一的。因此，如果给我 A1 和 B1，我如何在模板中访问“直通表”C 中的“in_stock”属性？

**附加信息：**

我正在遍历模板中的 Bs A1，所以在迭代中我可以有 A1-B1，另一个 A1-B2 等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:24:33.320

我使用自定义标签来这样做：

（假设您在模板中有 A1）

```
{% load custom_tag %}
<ul>
{% for b in Bs %}
    {% autoescape off %}
        <li>in_stock for {{ A1 }} and {{ b }} : {{ A1|through:b }}</li>
    {% endautoescape %}
</ul>
{% endfor %} 
```

custom_tag.py

```
register = template.Library()

def through(A1, b):
    t = "%s" % (C.objects.get(b=b, a=A1).in_stock)
    return t

register.filter(through) 
```

# xpages - ft 搜索视图的行数

> ID：12174794
> 
> 赞同：0
> 
> 时间：2012-08-29T09:30:46.700
> 
> 标签：xpages

我有一个执行搜索的视图。我想知道这个视图在这个搜索之后有多少行。我试过了`rows = view1.getEntryCount();`

但这给出了“原始”视图的行数，而不是我的搜索结果。

**编辑** 以下工作但效率不高。有更好的主意吗？

```
productTest=sessionScope.get("product");
landTest=sessionScope.get("country");
var length = view1.getEntryCount();
var entries = view1.getAllEntries();
var i = 0;
var rows = 0;
var currentEntry = entries.getFirstEntry();
while(i < length){
land = currentEntry.getColumnValues().elementAt(0);
prod = currentEntry.getColumnValues().elementAt(1);
if (land == landTest & prod == productTest)
    {
    rows++;
    }
currentEntry = entries.getNextEntry();
i++;
}
viewScope.queryString = rows;   ` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:25:28.033

我在我的博客上找到了这个。如果它仍然有效，请尝试：

> var entryCount = viewData.getEntryCount();
> 
> var viewControl = getComponent('viewControlId');
> 
> var rowCount = viewControl.getRowCount();
> 
> // 如果搜索处于活动状态 -> 行数，否则为 entrycount
> 
> var count = (viewControl.getDataSource().getSearch()) ? 行数：入口数；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:38:31.227

请试试

`rows = view1.getrowlines`

# javascript - 将 Javascript/Jquery 隔离为一个元素

> ID：12174799
> 
> 赞同：1
> 
> 时间：2012-08-29T09:31:06.047
> 
> 标签：javascript, jquery, web

使用 LESS CSS，我能够限制整个样式表作用于特定的 div 元素。我想将整个 javascript 文件限制为我页面上的特定 div 元素。

例如，在页面顶部引导的 js 文件具有操作 DOM 中的表元素的代码。它完成了它的工作，但也完成了页面上的所有表格元素，而不是我想要的一个特定元素。现在实际的解决方案是将所有相应的 jquery 选择器更改为更具体的标识符。我知道。但是代码堆积如山，这是不可行的。

有没有办法将 javascript/jquery 代码限制为特定的 div？

我也想避免使用 iframe。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:40:14.240

您可以检查元素`if (jQuery('#element').html() !== null)`。

在这种情况下，我正在查看`#element`dom 中是否存在。如果它返回`true`我正在通过 ajax 加载我的插件。

```
if (jQuery('#element').html() !== null) {
    jQuery.ajax({
        url: '../assets/js/plugins/myplugin.js',
        type: 'GET',
        dataType: 'script',
        cache: true,
        success: function(data, textStatus, xhr) {
            // Do whatever you want
        }
    });
} 
```

但是，如果您有多个相似的元素，您就无法在不更改选择器的情况下进行具体说明。也许您可以处理元素的索引（DOM 中的位置）的宽度。

```
$("div:eq(2)") //get third div 
```

*   [http://api.jquery.com/index/](http://api.jquery.com/index/)
*   [http://api.jquery.com/eq-selector/](http://api.jquery.com/eq-selector/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T09:43:11.813

你可以做这样的事情

在 jQuery 中

```
var $div = function(sel) {
  $(sel, YOUR_DIV);
} 
```

之后，`$('selector')`您可以使用`$div('selector')`.

# php - 使用开关和某些功能的意外 Inifite 循环

> ID：12174800
> 
> 赞同：0
> 
> 时间：2012-08-29T09:31:11.147
> 
> 标签：php

基本上我有一段代码，它有一个 switch 语句和一些函数。它使用浏览器“”给出的参数进入 switch 语句`?step=X`，然后选择适当的函数。

我的问题是，即使在每个函数结束时我指定转到下一个 switch 语句，它也不会这样做，并且不知何故它变成了我在浏览器中使用“step = x”选择的函数的无限循环......

为什么卡在 1 个函数中而不是遍历它们？（该步骤的代码在脚本末尾突出显示）

我在任何选定函数的浏览器中得到输出。所以它进入了开关和选定的函数......但随后它变成了无限循环，因为在浏览器中我得到了 300 个相同的回显语句。它永远无法遍历它们或退出选定的函数。

```
<?php 
//DB Config File
$dbFile = 'dbconfig.php';

$username = $_GET['username'];
$password = $_GET['password'];
$server = $_GET['server'];
$dbname = $_GET['dbname'];
$step = $_GET["step"];

function createfile ($dbFile) {
        //Creates File and populates it.
        $fOpen = fopen($dbFile, 'w');
global $username, $password, $server, $dbname;
            $fString .= "<?php\n";
            $fString .= "// Database Constants\n";
            $fString .= "\$DB_SERVER =" . "\"" . $server . "\";\n";
            $fString .= "\$DB_USER =" . "\"" . $username . "\";\n";
            $fString .= "\$DB_PASS =" . "\"" . $password . "\";\n";
            $fString .= "\$DB_NAME =". "\"" . $dbname . "\";\n";
            $fString .= "?>";

        fwrite($fOpen, $fString);
        fclose($fOpen);
return true;
}

try {
$db = new PDO ('mysql:host=' .$server.';dbname='.$dbname,$username,$password);

if ($db) { //if succesful at connecting to the DB

if (file_exists($dbFile)){
    if (is_readable($dbFile) && is_writable($dbFile)){ 

        //Creates File, populates it and redirects the user

    if (createfile($dbFile)) { 
    echo "nelxt";
    stepFunction($step);
    exit ();
            }

        } else { 

        echo "The file {$dbFile} cannot be accessed. Please configure the file manualy or grant Write and Read permission.";  }

    } else {

        //Creates File, populates it and redirects the user

    if (createfile($dbFile)) {

    echo "next";
        stepFunction($step);
    exit ();
            }

        }

}

} catch (PDOException $e) { //Catchs error if can't connect to the db.
    echo  'Connection failed: ' . $e->getMessage();
}

// Prepare SQL Statements
$IDB = $db->prepare( 
 "CREATE TABLE pages (
  id int(11) NOT NULL auto_increment,
 subject_id int(11) NOT NULL,
  menu_name varchar(30) NOT NULL,
  position int(3) NOT NULL,
  visible tinyint(1) NOT NULL,
  content text NOT NULL,
  PRIMARY KEY  (id)
)ENGINE=MyISAM AUTO_INCREMENT=7 DEFAULT CHARSET=utf8");

$IDB2 = $db->prepare("
CREATE TABLE subjects (
  id int(11) NOT NULL auto_increment,
  menu_name varchar(30) NOT NULL,
  position int(3) NOT NULL,
  visible tinyint(1) NOT NULL,
  PRIMARY KEY  (id)
)ENGINE=MyISAM AUTO_INCREMENT=6 DEFAULT CHARSET=utf8");

$IDB3 = $db->prepare("
CREATE TABLE users (
  id int(11) NOT NULL auto_increment,
  username varchar(50) NOT NULL,
  hashed_password varchar(40) NOT NULL,
  PRIMARY KEY  (id)
)ENGINE=MyISAM AUTO_INCREMENT=2 DEFAULT CHARSET=utf8");

//Set Option to True or False
if (empty ($_GET['fot']) ) { 
    $fOT = false; 
    } else { $fOT = true;
        }

///////////////////////////////
// PROBLEMATIC STEP BEGINS HERE 
///////////////////////////////

function createTablePages (){

    global $db,$IDB;

                echo "0 <br>";
                stepFunction (1);

}
function createTableSubjects ($fOT){

    global $db,$IDB2;

                echo "1 <br>";
                stepFunction (2);
}

function createTableUsers ($fOT){

    global $db,$IDB3;
    echo "3 <br>";

}

function stepFunction ($step,$fOT){
global $db,$IDB1,$IDB2,$step,$fOT;

switch ($step) {
    case 0: echo "hola";
            createTablePages ($fOT);
            break;
    case 1: echo "hola2";
            createTableSubjects($fOT);
            break;
    case 2: createTableUsers ($fOT);
            break;
    }

}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:53:49.080

使固定

```
function stepFunction ($step,$fOT){
global $db,$IDB1,$IDB2,$step,$fOT; 
```

到

```
function stepFunction ($step){
global $db,$IDB1,$IDB2; 
```

您正在`$step`使用同名的全局变量覆盖您的变量。因此，当你和`?step=0`你一起打电话`stepFunction`时，`0`它会转到`createTablePages`then 它会转到`stepFunction`with `1`，但会立即被替换为 0 （因为那是 global`$step`的值）并且一次又一次地......

# ruby-on-rails - Rails：创建评论验证路径（接受或拒绝）

> ID：12174805
> 
> 赞同：0
> 
> 时间：2012-08-29T09:31:20.310
> 
> 标签：ruby-on-rails, comments

在我的应用中，用户可以为产品撰写评论。但在发布评论之前，管理员需要接受或拒绝评论（允许用户更改评论）。

为了管理验证部分，我在控制器中创建了`validate`方法。`Reviews`管理员在新评论附近有两个按钮（链接）：接受、拒绝。该按钮重定向到`validate#reviews`并发送适当的参数：`review_id`和`admin_action`（接受或拒绝）。

**如何创建按钮（链接）的路径？**

我尝试了很多组合，`link_to "accept", polymorphic_path([review, :validate => 'accep'])`但没有成功。*我很难弄清楚 URL 应该是什么样子！*当然，我`get 'reviews/validate'`之前加过routes.rb。

如果你有类似的情况，你是怎么做的？有最佳实践吗？

**更新**

我也试过`link_to "Accept", polymorphic_path(:reviews => review, :validate => 'accept')`了，但*提供了一个 Nil 位置。无法构建 URI*。

**更新 2**

我想使用该`validate`方法（而不是创建两个方法`accept`and `reject`），因为有常见的数据处理，例如获取评论，检查管理员身份验证，...

所以，在我的控制器中，我正在寻找类似的东西：

```
def activate
    # Get review, using review_id

    # Check in the admin has the right to validate the review

    # Execute the correct action: accept or reject.
end

private
def accept
    ...
end

def reject
    ...
end 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:48:19.623

在您的 routes.rb 中：

```
resources :reviews do
  member do
    put :accept
    put :reject
  end
end 
```

这将通过帮助程序accept_review_path(@review) 和reject_review_path(@review) 使url reviews/:id/accept 和reviews/:id reject 可用。

最后一件事，在您的评论控制器中添加

```
def accept
  @review = Review.find(params[:id])
  # Your accept logic here
end

def reject
  @review = Review.find(params[:id])
  # Your reject logic here
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:41:13.473

您只需添加一个新的**审核**获取方法作为**验证**控制器的成员。然后通过给出命令**rake routes**找到这个动作的路径。然后使用参数为您的按钮提供该路径。参数应该是 1 。接受，2。拒绝。

# java - 如何避免多对多关系的双向插入

> ID：12174806
> 
> 赞同：0
> 
> 时间：2012-08-29T09:31:20.663
> 
> 标签：java, jpa, many-to-many

我有两个具有 am:n 关系的表。当我从数据库中提取数据时，这种关系应该是双向的，所以，我需要`@ManyToMany`在两个实体类中。但是，同时，我需要非所有者类在我对其执行持久或合并操作时不插入所有者类。

例如，我有`Gene`类，即所有者类，我有`Ontology`类。一个基因有很多本体，一个本体有很多基因。经典的多对多关系。如果我坚持或合并一个基因，我也想插入它的本体，但我不希望这个本体插入插入与其链接的所有其他基因。

另一方面，如果我插入一个本体，我不想插入与该本体相关的基因。

我一直在尝试使用很多 JPA 标签，但`@ManyToMany`没有任何东西可以按照我想要的方式工作。

有没有人有解决这个问题的想法？

基因类

```
@ManyToMany(cascade = CascadeType.ALL)
@JoinTable(name = GeneTables.GENEINFO_HAS_ONTOLOGY,
joinColumns =
@JoinColumn(name = "GeneInfo_WID", referencedColumnName = "WID"),
inverseJoinColumns =
@JoinColumn(name = "Ontology_WID", referencedColumnName = "WID"))
private Set<Ontology> ontology; 
```

本体类

```
@ManyToMany(cascade = CascadeType.REFRESH, mappedBy = "ontology")
private Set<GeneInfo> geneInfo; 
```

我尝试了所有 Cascade 类型，甚至没有使用 cascade 选项。结果是一样的。

执行此代码时出现此错误

```
EntityManager em = getEntityManager();
m.getTransaction().begin();
em.persist(ontology);
em.getTransaction().commit(); 
```

我有这个错误：

```
[EL Warning]: 2012-08-29 14:52:13.013--UnitOfWork(544628019)--java.lang.IllegalStateException: During synchronization a new object was found through a relationship that was not marked cascade PERSIST 

at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commitInternal(EntityTransactionImpl.java:102)

at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commit(EntityTransactionImpl.java:63)

at org.jbiowh.core.datasets.ontology.controller.OntologyJpaController.create(OntologyJpaController.java:41)

at org.jbiowh.tools.prototypes.Test.main(Test.java:65) 
```

**解决了**

我解决了这个问题。我创建控制器类来处理特殊的级联。

Ontology 控制器类的 create 方法将是：

```
if (loadGeneFlag && ontology.getGene() != null && !ontology.getGene().isEmpty()) {
    Set<Gene> geneSet = new HashSet<>();
    GeneJpaController gController = new GeneJpaController(emf);
    for (Gene gene : ontology.getGene()) {
        Gene geneOnDB = em.find(Gene.class, gene.getWid());
        if (geneOnDB != null) {
            geneSet.add(geneOnDB);
        } else {
            gController.create(gene);
            geneSet.add(em.getReference(Gene.class, gene.getWid()));
        }
    }
    ontology.setGene(geneSet);
} 
```

此代码将使用 Gene 控制器类创建所有基因引用，而不是遵循级联操作。这使我有可能在 Gene 控制器类上正确处理 Gene 级联。现在，我没有任何重复的对象，也没有例外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:40:24.143

这些基因从何而来？

如果它们是新的，那么您需要将它们持久化，或者在基因关系上设置级联持久化。如果它们存在，那么您需要在当前 EntityManager/事务的上下文中找到它们。

如果您不想再持久化，则不要将它们添加到基因集合中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:54:08.283

在两个实体上设置**cascade=CascadeType.REFRESH**或删除两个实体上的级联属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T12:37:32.023

您必须在双向关系的一侧使用 mappedBy。

见， [http ://en.wikibooks.org/wiki/Java_Persistence/ManyToMany#Bi-directional_Many_to_Many](http://en.wikibooks.org/wiki/Java_Persistence/ManyToMany#Bi-directional_Many_to_Many)

# vb.net - 如何在 VB.NET tabcontrol 中关闭单个选项卡

> ID：12174807
> 
> 赞同：1
> 
> 时间：2012-08-29T09:31:28.750
> 
> 标签：vb.net, tabs, tabcontrol

我在 VB.Net 中有一个 tabcontrol，如何实现它以使其具有用于关闭单个选项卡的“X”？

# jquery - jQuery执行顺序问题

> ID：12174808
> 
> 赞同：2
> 
> 时间：2012-08-29T09:31:30.410
> 
> 标签：jquery, html, treeview

使用 jQuery 我想首先加载一个本地 html 文件（其中包含一个特殊的 id 元素），然后我想运行一个 jQuery 插件来处理从外部页面加载的特殊 id 元素。

但它没有按预期工作。

您可以在下面看到没有按预期工作的代码片段。

```
$("#left").load("tree.html");

$("#tree").treeview({
        collapsed: false,
        animated: "medium",
        persist: "location"
    }); 
```

* ***一旦我将 tree.html 的内容移动到实际页面。树视图插件正在工作**好的！**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T09:34:36.613

在加载完成之前正在执行树视图。您可以使用[load 方法](http://api.jquery.com/load/)的完整回调来解决此问题

```
$('#left').load('tree.html', function() {
    $("#tree").treeview({
        collapsed: false,
        animated: "medium",
        persist: "location"
    });
}); 
```

值得注意的是，jQuery 中的大多数操作都不会阻塞，因此当您需要对负载或 AJAX 请求进行操作时，最好使用提供的回调。

# javascript - Javascript中变量前的+运算符是什么？

> ID：12174810
> 
> 赞同：10
> 
> 时间：2012-08-29T09:31:32.323
> 
> 标签：javascript

我正在研究 Raphael JS 库，但我看到了这个：

```
Animation.prototype.delay = function (delay) {
    var a = new Animation(this.anim, this.ms);
    a.times = this.times;
    a.del = +delay || 0;
    return a;
}; 
```

延迟变量前的 + 运算符是什么？

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-29T09:33:28.443

如果可能，它将~~字符串~~变量转换为数字：`+'21.2'`等于`Number(21.2)`。如果转换失败，它会返回`NaN`（这就是`|| 0`您的示例代码中的作用）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-29T09:33:28.390

如果变量有数字，这是一种将变量值设为数字的方法。替代你可以使用`Number`功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-08T11:15:19.893

它是一**元运算符**。`string`它从 a或`boolean`什至`null`值转换/解析数字。

它可以：

从字符串中解析一个数字，因此 +"23" 返回 23
Parse +True/+False 分别为 1 或 0。
甚至 +null 也会返回 0。

当然，您可以`Math.*`对上述这些返回执行功能。

例如。

```
let str = "25.5";
Math.ceil(+str) // would return 26 
```

我希望这有帮助！

# facebook - FB.scrollTo() 在我的 FB 标签上不起作用

> ID：12174814
> 
> 赞同：0
> 
> 时间：2012-08-29T09:31:44.637
> 
> 标签：facebook

我试图偷偷摸摸地为页面上的标签编写了一个 FB 应用程序......该应用程序允许您粘贴一些 HTML 代码，然后将其显示在您的标签上。

然后我粘贴了一个 iframe 的 html 代码（我已经给了一个特定的高度）。iframe 从 Wordpress 站点中提取内容。但是由于有些页面比其他页面长，并且 iframe 设置为 1400px 以容纳所有页面内容而不会出现滚动条，因此您必须手动向上滚动页面。

我试过以下APP代码将FB页面滚动到顶部......

```
<body style="overflow: hidden;"> 

    <!-- echo out iframe page code -->

<div id="fb-root"></div>
<script type="text/javascript">
window.fbAsyncInit = function() {
    FB.init({
     appId: 123456789, 
     status: true, 
     cookie: true, 
     xfbml: true
    });

    FB.Canvas.setAutoGrow();
    FB.Canvas.scrollTo(0,0);
    };

    //Load the JavaScript SDK asynchronously
    (function() {
        var e = document.createElement('script'); e.async = true;
        e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
        document.getElementById('fb-root').appendChild(e);
    }());
</script>

 </body> 
```

但滚动到顶部的东西不起作用......任何输入表示赞赏！

我刚刚想到 FB.scrollTo 可能正在工作，但是因为当我在嵌入式 iframe 中导航时没有重新加载该 App 文件，它不会调用它......所以我需要在新的时候触发 FB.scrollTo iframe 内容加载...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T23:37:49.377

我想你想使用[https://developers.facebook.com/docs/reference/javascript/FB.Canvas.scrollTo/](https://developers.facebook.com/docs/reference/javascript/FB.Canvas.scrollTo/) (FB.Canvas.scrollTo)

但是，此功能只有一个目的：滚动到**画布应用程序**(https://apps.facebook.com/yourapp) 上的某个位置。如果您手动插入 iframe，它也不起作用。在画布应用上，您的应用会自动加载到 iframe 中。

此外，这仅在您将 Canvas Height 设置为 Settable 时才有效。

# powershell - 使用 WMI 从 CPU 使用率 >90% 的系统获取进程列表

> ID：12174815
> 
> 赞同：1
> 
> 时间：2012-08-29T09:31:43.823
> 
> 标签：powershell, wmi, wmic

我们正在开发使用 WMI 的远程管理软件。我在从 CPU 使用率 >90% 的远程设备获取进程列表时遇到问题。大多数情况下，我的 WMIC 命令都会超时。我正在远程查询 Win32_Process 有什么解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T06:47:13.260

在 PowerShell 中，

```
Get-WMIObject -Query "Select * From Win32_PerfFormattedData_PerfProc_Process WHERE PercentProcessorTime>=90" 
```

这有帮助吗？

# php - sip.conf 配置文件 - 为每条记录添加新行

> ID：12174816
> 
> 赞同：0
> 
> 时间：2012-08-29T09:31:44.387
> 
> 标签：php, python, ruby, regex, linux

我有一个 sip 配置文件，如下所示：

```
[1664]
username=1664
mailbox=1664@8360
host=192.168.254.3
type=friend
subscribemwi=no
[1679]
username=1679
mailbox=1679@8360
host=192.168.254.3
type=friend
subscribemwi=no
[1700]
username=1700
mailbox=1700@8360
host=192.168.254.3
type=friend
subscribemwi=no
[1701]
username=1701
mailbox=1701@8360
host=192.168.254.3
type=friend
subscribemwi=no 
```

对于每条记录，我需要添加另一行（每条记录的**vmxten**）例如上面变成：

```
[1664]
username=1664
mailbox=1664@8360
host=192.168.254.3
type=friend
subscribemwi=no
vmexten=1664
[1679]
username=1679
mailbox=1679@8360
host=192.168.254.3
type=friend
subscribemwi=no
vmexten=1679
[1700]
username=1700
mailbox=1700@8360
host=192.168.254.3
type=friend
subscribemwi=no
vmexten=1700
[1701]
username=1701
mailbox=1701@8360
host=192.168.254.3
type=friend
subscribemwi=no
vmexten=1701 
```

你会说最快的方法是什么？文件中有数百条记录，因此手动修改所有记录需要很长时间。

你会使用正则表达式吗？你会用sed吗？我很想知道你将如何解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:37:46.563

只需匹配`^\[(\d+)\]`并替换为`[\1]\r\nvmexten=\1`. 不确定 python/ruby 是否使用`\1`或`$1`. 但我相信你会弄清楚的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T09:42:34.730

`(\[(\d+)][^\[]+)`用`\1vmexten=\2\n`我的文本编辑器中的作品替换

# objective-c - 当我运行一个简单的 Objective-C 程序时，它经常说有些东西已经在运行

> ID：12174817
> 
> 赞同：0
> 
> 时间：2012-08-29T09:31:52.180
> 
> 标签：objective-c

当我运行一个简单的 Objective-C 程序时，它经常说：

> “C-Features”已经在运行。单击停止以终止并启动新实例。”

我想知道这意味着什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T09:39:11.837

如果您尝试在模拟器中运行应用程序，请在 Xcode 中单击停止。如果这没有帮助，请重新启动 Xcode 和模拟器，然后重试。模拟器可能正在运行另一个尚未“发布”的实例。

# xamarin.ios - MonoDevelop 中缺少重构选项

> ID：12174820
> 
> 赞同：0
> 
> 时间：2012-08-29T09:31:55.860
> 
> 标签：xamarin.ios, monodevelop

我正在使用 MonoDevelop 的 3.0.3.5 版本，并且正在查看 MonoTouch 的 Pluralsight 教程，其中 John Sonmez 在 ViewController 中使用了一些在我的 MonoDevelop 版本中不可用的重构工具/方法。例如 - Refactor->Override/Implement members...，封装字段...等等。我在弹出窗口中唯一可用的重构工具是重命名 :)

是否有更多重构工具可供下载？

感谢您的帮助，我还是 MonoDevelop 的新手 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:31:41.763

来自塞巴斯蒂安，回答[这个问题](https://stackoverflow.com/questions/12032880/override-implement-members-in-monodevelop)

> 在对 MD 3.0 进行的代码代码完成引擎的重写中，一些重构功能被重新组织或删除（目前）。

# c++ - 在 C++ 中通过套接字发送二进制数据

> ID：12174822
> 
> 赞同：0
> 
> 时间：2012-08-29T09:31:59.123
> 
> 标签：c++, sockets, c++11

在 C++ 中，我有这样的数据结构：

```
struct Data 
{ 
int N; 
double R; 
char Name[20];
}; 
```

我必须将这些数据从客户端发送到不同系统上的服务器（我必须发送一组数据结构，但我可以一个一个地发送它）。我想将它作为二进制数据发送，以便我可以在另一端提取数据并将其放入相同的结构类型中。

如果（客户端和服务器）都使用相同的编译器编译，则 sizeof(Data) 和结构中的所有位填充将是相同的。但是由于服务器是运行 Linux 的 64 位，而客户端甚至可以是 32 位窗口，因此 Data 中数据的顺序可能会有所不同。

我对吗？处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T09:36:26.540

假设所有客户端和服务器将始终使用相同的编译器构建相同的架构和操作系统，这几乎总是一个坏主意。最好编写代码，将结构的成员显式打包和解包为具有指定顺序的字节流，或者将数据转换为可以在另一端解析的非二进制格式（例如 JSON 或 XML）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T09:41:39.113

您可以使用[Boost.Serialization](http://www.boost.org/libs/serialization/)来编组/解组（即将您的数据从源计算机格式转换为适合传输的格式，然后从该格式转换为目标计算机使用的格式）您的数据和[Boost.Asio](http://www.boost.org/libs/asio/)来处理通信.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T09:44:03.190

正确的协议定义将帮助您解决此问题。有一个固定长度的标头，后跟可变长度的数据。

像这样的东西

***标头**********

[数据大小] - 2 个字节

[MSG ID] - 1 个字节

***包*********

[N] - 4 个字节

[R] - 8 个字节

[Len] - 2 个字节

[名称] - Len 字节

读取字节并填充结构

# java - 如何提高 Weka 中 SMO 分类器的性能？

> ID：12174825
> 
> 赞同：1
> 
> 时间：2012-08-29T09:32:06.150
> 
> 标签：java, machine-learning, classification, smo

我正在使用 weka SMO 分类器对文档进行分类。smo 有很多可用的参数，如内核、容差等。我使用不同的参数进行了测试，但在大数据集上没有得到好的结果。

对于 90 多个类别，只有 20% 的文档得到正确分类。

请任何人告诉我在 SMO 中获得最高性能的最佳参数集。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T15:00:52.287

这里的主要问题不是分类本身，而是选择合适的特征。使用原始 HTML 会导致非常大的噪音，进而导致分类结果非常差。因此，要获得好的结果，请执行以下操作：

1.  提取**相关文本**。不仅要删除 HTML 标签，还要准确获取描述项目的文本。
2.  创建**关键字字典**。例如卡布奇诺、拿铁、白米饭等。
3.  使用[**词干提取**](http://en.wikipedia.org/wiki/Stemming)或[**词形**](http://en.wikipedia.org/wiki/Lemmatisation)还原来获取单词的基本形式并避免将例如“cotton”和“cottons”计算为 2 个不同的单词。
4.  从文本制作**特征向量。**属性（特征名称）应该是字典中的所有单词。值可能是：二进制（如果单词出现在文本中，则为 1，否则为 0），整数（文本中相关单词的出现次数），[tf-idf](http://en.wikipedia.org/wiki/Tf%2aidf)（如果您的文本长度非常不同，则使用此值）等。
5.  只有在所有这些步骤之后，您才能使用**分类器**。

很可能分类器类型在这里不会发挥重要作用：无论使用何种分类技术，基于字典的特征通常都会产生非常准确的结果。您可以使用 SVM (SMO)、朴素贝叶斯、ANN 甚至 kNN。更复杂的方法包括创建类别层次结构，例如，类别“咖啡”包含在类别“饮料”中，而类别“饮料”又是类别“食品”的一部分。

# android - Linux中的模拟器键盘输入

> ID：12174828
> 
> 赞同：2
> 
> 时间：2012-08-29T09:32:18.937
> 
> 标签：android, keyboard, emulation

将 SDK 工具 rev 更新到 20 后，Android 模拟器不会从我的桌面键盘获取键盘输入。当按下桌面键盘的一个键时，模拟器会死，我必须杀死它的进程。

Android 模拟器也没有从模拟器自己的键盘中获取键盘输入。[但是我已经按照Android emulator does not take keyboard input - SDK tools rev 20](https://stackoverflow.com/questions/11235370/android-emulator-doesnt-take-keyboard-input-sdk-tools-rev-20)中的步骤解决了这个问题。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:36:43.007

在创建/编辑 avd 时，您需要提及键盘支持。

![在此处输入图像描述](../Images/a0b557a59dd9ac8a7917b2b332765858.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:35:45.760

```
Open Android Virtual Device Manager 
Select Your AVD 
Edit
Hardware -> New (Open Property Window)
Select Keyboard Support and Click on Ok
Now Make it True 
```

![在此处输入图像描述](../Images/bd3a8f1fc6cfd4ef03136a6146c4edd7.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T09:37:01.807

> 一个 Avd 管理器，选择你 Emulator (Right side)---> Edit---> Hardware(right side) ---> new---> property ---> Keyboardsupport --> yes

# javascript - 如何在输入中添加或减去天数？

> ID：12174830
> 
> 赞同：1
> 
> 时间：2012-08-29T09:32:29.483
> 
> 标签：javascript, calendar, add

我正在尝试在我拥有的输入中增加或减少一些天数。实际上它来自我从mysql注册的数据。它给了我一些日子，我想增加或减少。

实际上我已经完成了添加天数的功能。

函数来了::

```
​&lt;script type="text/javascript">
    function addday() {
        var items = new Array();
        var itemCount = document.getElementsByClassName("date");

        for (var i = 0; i < itemCount.length; i++) {
            items[i] = document.getElementById("date" + (i + 1)).value;
        }

        for (var i = 0; i < itemCount.length; i++) {
            items[i] = document.getElementById("date" + (i + 1)).value;
            var itemDtParts = items[i].split("-");
            var itemDt = new Date(itemDtParts[2], itemDtParts[1] - 1, itemDtParts[0]);
            nb=document.getElementById('nb')

                itemCount[i].value = (itemDt.getDate() < 9 ? "0" : "")+ (itemDt.getDate()+nb)+ "-" + (itemDt.getMonth() < 9 ? "0" : "") + (itemDt.getMonth() + 1) + "-" + itemDt.getFullYear();

        }
       return items;
       }
</script> 
```

真正关心的是，不是给我一天加上我在输入字段中为此写的天数。

它向我显示类似的内容：

27[对象 HTMLInputElement]-08-2012

所以我不知道如何改变它。

接受我最崇高的敬意。

非常感谢您的帮助。

SP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:36:25.417

改变：

```
nb=document.getElementById('nb') 
```

到：

```
nb=document.getElementById('nb').value; 
```

你应该很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:38:41.827

```
nb=document.getElementById('nb')

itemCount[i].value = (itemDt.getDate() < 9 ? "0" : "")+ (itemDt.getDate()+nb)+ "-" + (itemDt.getMonth() < 9 ? "0" : "") + (itemDt.getMonth() + 1) + "-" + itemDt.getFullYear(); 
```

itemCount[i].value 似乎很奇怪。我想应该是 items[i]

另外我认为第一个 if 语句重复了第二个。

# c - 指针初始化为什么？

> ID：12174835
> 
> 赞同：6
> 
> 时间：2012-08-29T09:32:55.550
> 
> 标签：c, pointers, character, function-pointers

一直让我感到困惑的一件事是字符指针。在漫长的四年之后，我再次徘徊在 c 中。

以上述案例为例。为什么`char`指针会以这种方式表现？当指针指向任何内容时，我们如何直接寻址指针的内容，或者它就像 char 指针存储地址以外的东西！

```
#include <stdio.h>
#include <stdlib.h>

int main()
{ 
char* charPtr="I cant understand why";
int* intPtr=60;

printf("%d\n", intPtr); //displays 60
printf("%p\n", intPtr); // displays the hex value of 60

printf("%s\n", charPtr); // displays the wh0le string
printf("%p\n", charPtr); // displays the start address of the string
return 0; 
```

}

接下来是`int`指针，它如何接受值 60 以及它存储在哪里？

撇开 char 指针和 malloc 不谈，我认为指针的基本思想是获取指向的地址！

为什么这些情况

```
 *intptr = 60 ; // should be setting the pointee's value to 60
  intptr = 60 ;  // sets the address 
```

抛出编译错误同时

```
 int* intPtr=60; 
```

在没有得到指针的情况下偷偷溜进来（或者是60作为地址，如果是这样，为什么在前一种情况下这是不可接受的）！

我想我在这里遗漏了一些东西，但是嘿！你猜怎么了 ？他们告诉我在 SO 中搜索！

编辑：将 char 指针指向的地址提供给 int 指针也不会引发错误！

```
int8_t* intPtr= (int8_t*)0x80485c8 ; // works without casting too ! I guess addresses are acceptable. 
```

取消引用它会给出一个`I`与字符串的第一个相等的值。这是一个好的做法还是存在任何其他解释这忽略了它们的字节位大小分配，例如 int 可以容纳一个 char 等等..？

正如 hmjd 指出的那样，“初始化语法”是问题所在！我编写自己的代码没有问题，但是在修改某人的代码时会出现问题！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T09:38:10.207

> 当指针指向任何内容时，我们如何直接寻址指针的内容，或者它就像 char 指针存储地址以外的东西！

我*认为*混淆是初始化语法。这：

```
char* charPtr="I cant understand why"; 
```

不取消引用`charPtr`。它相当于：

```
char* charPtr;
charPtr = "I cant understand why"; 
```

两个代码片段都将字符串文字的地址存储`"I cant understand why"`到`charPtr`. 没有指向什么都没有发生的指针的解引用。任何类型的指针变量只能存储地址。

这：

```
int* intPtr=60; 
```

存储`60`in的地址`intPtr`：没有`int`发生分配或延迟。此时不`int`存在变量。编译器应该在这一行发出警告。任何顺从的尝试`intPtr`很可能会导致崩溃。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T11:34:02.690

在 C 中，像“我不明白为什么”这样的*字符串文字*`char`被存储为这样的数组，这样内存在程序的整个生命周期内都是可用的（所有地址都是凭空提取的，并不意味着代表任何特定的平台或架构）：

```
Item        Address        0x00  0x01  0x02  0x03
-----       -------        ----  ----  ----  ----
"I..."      0x00080000      'I'   ' '   'c'   'a'
            0x00008004      'n'   '''   't'   ' '
            0x00008008      'u'   'n'   'd'   'e'
            0x0000800C      'r'   's'   't'   'a' 
            0x00008010      'n'   'd'   ' '   'w' 
            0x00008014      'h'   'y'  0x00  0x?? 
```

字符串字面量也是一个*数组表达式*，在大多数情况下，“N-element array of `T`”类型的表达式将被转换为“pointer to `T`”类型，其值将是数组第一个元素的地址（例外情况是数组表达式是`sizeof`或一元运算符的操作数`&`，或者是用于在声明中初始化*数组的字符串文字）。*

所以当你写

```
char* charPtr = "I can't understand why"; 
```

您将字符串文字的*地址*`charPtr`复制到：

```
Item        Address        0x00  0x01  0x02  0x03
----        -------        ----  ----  ----  ----
charPtr     0xffbe4000     0x00  0x08  0x00  0x00 
```

请注意，如果声明是

```
char str[] = "I can't understand why"; 
```

`str`将被分配为一个`char`足够长的数组来保存字符串，并且字符串的*内容*将被复制到它：

```
Item        Address        0x00  0x01  0x02  0x03
-----       -------        ----  ----  ----  ----
str         0xffbe4000      'I'   ' '   'c'   'a'
            0xffbe4004      'n'   '''   't'   ' '
            0xffbe4008      'u'   'n'   'd'   'e'
            0xffbe400C      'r'   's'   't'   'a' 
            0xffbe4010      'n'   'd'   ' '   'w' 
            0xffbe4014      'h'   'y'  0x00  0x?? 
```

当你写

```
int* intPtr = 60; 
```

您正在使用 60 初始化*指针*值，而不是将其设置为指向值为 60 的匿名整数：

```
Item        Address        0x00  0x01  0x02  0x03
----        -------        ----  ----  ----  ----
intPtr      0xffbe4004     0x00  0x00  0x00  0x3C 
```

地址 60 很可能不是有效地址，因此尝试取消引用`intPtr`很可能会导致未定义的行为。

你有没有写过类似的东西

```
int x = 60;
int *intPtr = &x; 
```

那么你会有这样的情况：

```
Item        Address        0x00  0x01  0x02  0x03
----        -------        ----  ----  ----  ----
x           0xffbe4004     0x00  0x00  0x00  0x3C
intPtr      0xffbe4008     0xff  0xbe  0x40  0x04 
```

在这种情况下， 的值`intPtr`是 的地址`x`。

最后，注意*初始化*和*赋值*不是一回事。

```
T *x = value; 
```

不取消引用`x`并分配`value`给结果；它`value`直接分配给`x`. 的类型`value`被视为`T *`。请注意，您*应该*收到警告

```
int *intPtr = 60; 
```

沿着“从整数制作指针而不进行强制转换”的思路。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-29T12:51:15.693

当你写：

```
 char* charPtr = "I can't understand why"; 
```

这意味着字符串“我不明白为什么”的基地址被分配给

charPtr 因为字符串文字也是指向该字符串的指针。

它可以被视为：

![存储在 char 数组中的字符串的概念](../Images/18ba0489b79cbb7f5086cbcd66b38e70.png)

这意味着，在 charPtr 中存储了整个字符串的基地址。现在这就是您在代码中所做的。

```
 char *charPtr="i cant understand why"; 
```

除此之外，如果您打印以下语句：

```
printf("%c","i cant understand why"[0]);//prints i
printf("%c","i cant understand why"[2]);//prints c 
```

这两个 printf 证明了我的概念，即字符串“我不明白为什么”本身就是一个指向存储字符串的 char 数组的指针。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T09:38:45.127

你`intPtr`被初始化为指向绝对内存地址`60`。这里没有后备商店。

由于您没有取消引用指针本身，因此您永远不会尝试读取`60`可能会使您的程序崩溃的地址，具体取决于环境。

相反，您将指针值传递给该指针值，该指针值`printf`几乎可以作为参数，并按照您在格式字符串中指定的值解释这些值。在您的情况下，它将解释指针的地址而不是指针值。地址是`60`这样显示的。如果你使用`*intPtr`它可能会崩溃。

# android - 如何使Android自定义时钟时间准确？

> ID：12174837
> 
> 赞同：1
> 
> 时间：2012-08-29T09:33:12.990
> 
> 标签：android, timer, handler

我制作了一个显示服务器当前时间的 appWidget（例如 2012-08-29, 12:00:08）。我在每个修复持续时间（例如 1 小时）请求服务器时间。如果收到服务器时间，则更新 appWidget 显示。在此期间，我启动一个处理程序来更新时间，如下所示：

```
 mTick = new Runnable() {
        public void run() {
            mMillis += 1000;
            long now = SystemClock.uptimeMillis();
            long next = now + (1000 - now % 1000);
            mHandler.postAtTime(mTicker, next);
        }
    }
    mTicker.run(); 
```

我的问题： 1 过了很长一段时间（一天过去了），AppWidget 中显示的时间比实际服务器时间慢。我怀疑我上面使用的方法不够准确，无法更新时间。关于这个问题有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T09:49:03.247

您不应该使用[SystemClock.uptimeMillis()](http://developer.android.com/reference/android/os/SystemClock.html#uptimeMillis%28%29)因为它不包括在深度睡眠中花费的时间，这就是您的应用小部件不同步的原因。

您应该改用[SystemClock.elapsedRealtime()](http://developer.android.com/reference/android/os/SystemClock.html#elapsedRealtime%28%29)调用

Upd：对不起，我想我误解了这里的问题。您要做的是在未来一段时间后使用 postAtTime 发布可运行的内容。请注意，postAtTime 不包括设备处于深度睡眠的时间。

您需要的是在重新绘制小部件之间跟踪准确的增量数量。您应该为此使用 SystemClock.elapsedRealtime() 。

算法应该是这样的：

```
long serverTime = getServerTime();
long lastTime = SystemClock.elapsedRealtime();

// Somewhere in updateWidget() or call on timer:
serverTime = serverTime  + SystemClock.elapsedRealtime() - lastTime;
lastTime = SystemClock.elapsedRealtime();
// At this moment in serverTime variable you have "server" time adjusted by the time which passed on device, including time spent in deep sleep 
```

# php - 使用 pdftk 在 PHP 中基于批量模板生成 pdf

> ID：12174838
> 
> 赞同：7
> 
> 时间：2012-08-29T09:33:13.663
> 
> 标签：php, pdf, pdf-generation, pdftk, fdf

我正在基于模板批量生成 pdf 文件，但很快就遇到了很大的性能问题。我目前的情况如下：

1.  从 db 获取要填充的数据
2.  基于单个数据行和pdf表单创建fdf
3.  将`.fdf`文件写入磁盘
4.  使用 pdftk (fill_form with flatten 命令) 将 pdf 与 fdf 合并
5.  继续迭代行，直到`.pdf`生成所有的
6.  最后将所有生成的文件合并在一起，并将单个pdf提供给客户端

我使用`passthru`将原始输出提供给客户端（节省写入文件的时间），但这只是一点性能改进。200 条记录的总操作时间约为 50 秒，我想以某种方式缩短到至少 10 秒。

理想的情况是在内存中操作所有这些 pdf，而不是将它们中的每一个都写入单独的文件，但是由于我无法将这种数据传递给像 pdftk 这样的外部工具，所以输出将是不可能的。另一个想法是生成一个`.fdf`包含所有这些行的大文件，但看起来这是不允许的。

我在这里错过了一些非常微不足道的东西吗？

我很感谢您的任何建议。

PS。我知道我可以使用一些好的库，比如 pdflib，但我现在只考虑开放许可库。

**编辑：**

我正在弄清楚`.fdf`使用相同的pdf作为模板构建具有多个页面的文件的语法，花了几个小时但找不到任何好的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T05:27:18.493

在面对同样的问题很长一段时间后（想基于 LaTeX 生成我的 pdf），我终于决定改用另一种粗略但有效的技术：

我分两步生成我的 pdf：首先我使用[twig](http://twig.sensiolabs.org/ "枝条")或 smarty 之类的模板引擎生成 html。其次，我使用[mpdf](http://www.mpdf1.com/mpdf/ ".pdf")从中生成 pdf。我尝试了许多其他 html2pdf 框架并最终使用了 mpdf，它非常成熟并且开发了很长时间（频繁更新，功能丰富）。使用这种技术的好处：您可以使用 css 来设计您的文档（mpdf 完全具有 css 功能） - 这与 css 好处一起提供（http://www.csszengarden.com）并且非常容易生成动态表格。

Mpdf 解析 html 表格并查找 theader、tfooter 元素，如果您的表格大于一个页面大小，则将其放在每个页面上。您还可以使用动态实体（如 page nr 等）定义页眉和页脚元素。

我知道，使用这条弯路似乎是一种解决方法，但老实说，没有乳胶，pdf 任何引擎都像 html 一样强大和简单！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T18:26:54.800

尝试其他不太复杂的库，例如 fpdf ( [http://www.fpdf.org/](http://www.fpdf.org/) )

我觉得它很好而且很精简。

总是找到小的库，只做你需要它们做的事情。

图书馆越大，消耗的资源就越多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T21:31:30.583

这不会帮助您解决多页问题，但我注意到 pdftk 接受该`-`字符表示“从标准输入读取”。

您可以`.fdf`通过它的标准输入将其发送到 pdftk 进程，以避免将它们写入磁盘。

# mysql - 在从属设备上删除数据库会影响复制

> ID：12174839
> 
> 赞同：0
> 
> 时间：2012-08-29T09:33:15.503
> 
> 标签：mysql, replication

我的复制崩溃了，因为从服务器的服务器 IP 地址被错误地更改了。现在relay-bin文件已经用完了服务器的所有空间，我无法打开mysql服务器。通过删除 .MYD、.MYI、.frm 文件来删除数据库会影响复制启动时的复制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T09:37:42.507

在这种情况下，您绝对不应该开始删除文件。我解决这个问题的典型方法（它发生的频率比人们想象的要多）是将某些东西（通常是一个大数据库）移动到另一个磁盘，然后将其链接回来。

重要的是，您检查并仔细检查您的权限，这包括`AppArmor`和`SELinux`配置文件：对于两者，链接与目录不同。

# install4j - 将 install4j ( 4.2.8 ) 重新托管到另一台服务器

> ID：12174843
> 
> 赞同：0
> 
> 时间：2012-08-29T09:33:24.227
> 
> 标签：install4j

我曾尝试通过互联网搜索我的查询，并尝试在此站点上查找。但没有运气。

抱歉，我们对 install4j 非常陌生，但被要求执行一些任务。

我们的组织有 install4j 浮动许可证（已购买）。我们有一台 CentOS Linux 机器“ABC”作为这个 install4j 的许可证服务器。

现在，我们计划关闭这台机器“ABC”，并希望有另一台 RHEL Linux 机器“XYZ”作为我们 install4j 的许可证服务器。

请注意，我们的 install4j 版本是 4.2.8。

你能把这个活动的说明发给我们吗？

谢谢，维沙尔丘格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T16:12:35.470

它是这样工作的：

*   在新机器上安装许可证服务器
*   将文件 license.txt 从旧许可证服务器传输到新许可证服务器
*   关闭旧的许可证服务器
*   启动新的许可证服务器

# database - 从相关表中排序信息 - Symfony2

> ID：12174847
> 
> 赞同：0
> 
> 时间：2012-08-29T09:33:33.003
> 
> 标签：database, symfony, doctrine-orm

**A.**我有一张用户桌和一张朋友桌，以下是他们的联系：

这在**用户**类中：

```
 /**
     * @ORM\OneToMany(targetEntity="Friend", mappedBy="user")
     */
    protected $friends;

public function __construct()
    {
        $this->friends = new ArrayCollection();
    } 
```

这是在**Friend**类中：

```
/**
 * @ORM\ManyToOne(targetEntity="User", inversedBy="friends")
 * @ORM\JoinColumn(name="user_id", referencedColumnName="id")
 */
protected $user; 
```

我有一个模板，我在其中渲染当前用户的朋友只是使用

```
$friends = $user->getFriends(); 
```

但现在我希望能够对用户的朋友进行排序。我用这个函数创建了一个存储库类：

```
public function findAllOrderedByName()
    {
        return $this->getEntityManager()
            ->createQuery('SELECT f FROM EMMyFriendsBundle:Friend f ORDER BY f.name ASC')
            ->getResult();
    } 
```

但它显示所有用户的所有朋友，而不仅仅是当前用户。有没有办法只显示当前用户的朋友而不使用“WHEREfriend.user_id = user.id”之类的东西？如果是，请告诉我该怎么做。

**B.**我想问的另一件事是如何管理我的控制器。

这是渲染模板以显示所有未排序朋友的操作：

```
/*
 * @Displays the basic information about all the friends of an user
 */
public function displayAction()
{
    $user = $this->get('security.context')->getToken()->getUser();

    if($user->getName() === NULL)
    { 
        $name = $user->getUsername();
    } 
    else 
    {    
        $name = $user->getName();
    }

    $this->get('session')->setFlash('hello', 'Hello, '.$name.'!');

    $friends = $user->getFriends();

    $cat = new Category();

    $dd_form = $this->createForm(new \EM\MyFriendsBundle\Entity\ChooseCatType(), $cat);

    return $this->render('EMMyFriendsBundle:Home:home.html.twig', array(
        'name' => $name, 'friends' => $friends, 'user' => $user,
        'dd_form' => $dd_form->createView()));
} 
```

我有一个**sortAction**，但我不知道怎么写。应该和上面一样，只有行

```
 $friends = $user->getFriends(); 
```

应该替换为

```
$friends = $em->getRepository('EMMyFriendsBundle:Friend')
        ->findAllOrderedByName(); 
```

但是如果我复制它，就会有很多代码重复，而且很愚蠢。我想到了一个带有 if 语句的控制器，但是里面有什么？请给我一些想法！提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:43:55.513

做这个：

```
/**
 * @ORM\OneToMany(targetEntity="Friend", mappedBy="user")
 * @ORM\OrderBy({"name" = "ASC"})
 */
protected $friends; 
```

# gwt - GWT celltable 简单寻呼机 下一个和上一个按钮

> ID：12174854
> 
> 赞同：0
> 
> 时间：2012-08-29T09:33:49.387
> 
> 标签：gwt, celltable, simplepager

我正在`CellTable`使用`SimplePager`. 当我将页面大小设置为 5 时，我的分页工作正常，仅显示 5 条记录。我的问题是下一个和上一个按钮是默认出现的，还是我们必须配置它们。我看过展示案例示例代码，但没有看到任何外部配置。我的`SimplePager`代码如下：

//创建寻呼机

```
SimplePager.Resources resources = GWT.create(SimplePager.Resources.class); 
SimplePager simplePager = new SimplePager(TextLocation.CENTER, resources , false, 0, true);
simplePager.setDisplay(cellTableSearchResults);
simplePager.setPageSize(5);

// create data provider
ListDataProvider<GridDTO> dataProvider = new ListDataProvider<GridDTO>();
dataProvider.addDataDisplay(cellTableSearchResults);
dataProvider.setList(components); 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:18:37.070

`SimplePager`是一个包含这些按钮的小部件。你只是忘了显示它吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-25T09:32:19.147

将页面大小设置为`celltable by cellTable.setPageSize(5);` 不设置 simplepagers 页面大小`simplePager.setPageSize(5);`

这将拆分单元格表以将 5 行显示为可见项目。

# vb.net - 如何为 Enter 键自动化 TextBox 控件

> ID：12174857
> 
> 赞同：0
> 
> 时间：2012-08-29T09:34:12.053
> 
> 标签：vb.net

我必须为每个文本框控件执行以下操作。

```
 If e.KeyCode = Keys.Enter Then
     Me.DateDateTimePicker.Focus()
 End If 
```

如果有 For Next 循环选项，请提及我应该在哪个子例程下编写循环。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:41:39.243

正如其他人所说，您只能使用一种方法来处理多个事件。

此外，您可以执行发件人自定义代码：

```
Sub MyEventHandler(sender as Object, e as Event) Handles obj.ev, obj2.ev, obj3.ev

    'Use sender property (properly casted, if necessary) 
    'to run sender specific code

    DirectCast(sender, TextBox).Text = "foo"

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:56:19.657

根据您的说法，我认为这应该放在您尝试从中运行这段代码的文本框中的 KeyPressed 事件中。您还可以将多个控件的多个事件集成到一个方法中。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T12:09:14.547

您可以将代码放在“KeyUp”事件中，然后更改一个文本框的“KeyUp”事件以处理多个文本框 keyups 事件，但只能为所有这些事件执行一个代码，请检查：

```
Private Sub ***TextBox1_KeyUp***(ByVal sender As Object, _
    ByVal e As System.Windows.Forms.KeyEventArgs) _
    Handles TextBox1.KeyUp, ***TextBox2.KeyUp***, ***TextBox3.KeyUp***

        '*************
        'Write your code Here
        '*************
 End Sub 
```

# javascript - 用更大的图像交换缩略图？

> ID：12174858
> 
> 赞同：1
> 
> 时间：2012-08-29T09:34:14.493
> 
> 标签：javascript, jquery

我有一个 400px x 400px 的大图像和 3 个较小的图像，每个图像都是 100px x 100px。

当您单击其中一个缩略图时，它是否可以与较大的图像交换，本质上是放大它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:15:51.450

编辑：

**HTML：**

```
<div id="imgThumbs">
    <a href="#" class="showImg"><img src="img1-thumb.jpg" width="100" height="100" alt="Image 1" /></a>
    <a href="#" class="showImg"><img src="img2-thumb.jpg" width="100" height="100" alt="Image 2" /></a>
    <a href="#" class="showImg"><img src="img3-thumb.jpg" width="100" height="100" alt="Image 3" /></a>    
</div>

<div id="imgHolder"></div> 
```

**CSS：**

```
#imgThumbs {  
    overflow: hidden;
    margin: 20px auto;
    width: 366px;
    text-align: center;
}

.showImg { 
    width: 100px; 
    padding: 10px; 
    float:left; 
    border: 1px solid #fff;
    border-radius: 5px;    
}

#imgHolder {
    border-top: 5px solid #bbb;
    padding: 20px;
    margin: 0 auto;
    width: 80%;
}

.active {
    border: 1px dashed #aaa;
    background-color: #f4f4f4;
} 
```

**jQuery：**

```
$('.showImg').hover(function(){        
    $(".showImg").removeClass("active");
    $(this).addClass("active");

    var imgURL = $(this).find('img').attr("src");    
    $('#imgHolder').find('img').attr("src", imgURL);    
});​ 
```

### [工作演示](http://fiddle.jshell.net/Gkjx2/show/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:37:01.577

是的，这是可能的，而且很容易。

你可以做类似的事情

```
// small images have the class 'small'
$('img.small').click(function(){
    this.src = 'path to big image';
}); 
```

通常您使用文件命名约定。所以你的代码可能是

```
$('img.small').click(function(){
    // changes the source of small images
    // from somepath.png to somepath-big.png
    this.src = this.src.split('.')[0]+'-big.png';
    $(this).removeClass('small');
}); 
```

但是你必须决定你到底想做什么......

# python - 为什么在 Python 中使用 JSON？

> ID：12174859
> 
> 赞同：-2
> 
> 时间：2012-08-29T09:34:17.040
> 
> 标签：python, json

这可能是最愚蠢的问题。但我只是想听听有经验的人的意见。为什么在 Python 中使用 JSON？是创建代码兼容还是类似的东西？我曾经从我的主管那里听说有人会编写 Python 函数，它会返回 JSON 对象，然后该函数可以在 Objective C 中使用吗？这甚至可能吗？请解释！！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T09:39:09.090

作为您的示例，当您需要将数据从 python 返回到 Object-C 或任何其他环境时，您需要一种数据格式来保存数据。

Json 是一种很棒的数据格式。来自 javascript，但非常像 python dict。

当然，您可以自己定义新格式。（带有 eval 的 Python.dict 等）但是使用 json 更容易：

*   你不需要告诉你的同事学习你自定义的数据格式，
*   并且有很多用于任何语言的 json 库。

Json 是字符串，而不是“对象”。所以从一种语言（VM/ENV）转换到另一种语言很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:47:55.133

假设您在 python 中进行了一些返回列表的计算；并假设此列表需要稍后由某些 C 程序使用。

然后，解决此问题的一种方法是将列表写入文件并让 C 程序从该文件中读取列表。为了实现这一点，您需要将列表写入文件中，以便您可以在 C 程序中正确读取它。

虽然这样编写它没有任何问题，但您可能希望节省一些时间来定义文件存储协议（或写入和读取文件的方式。它实际上称为[编组和反编组](http://wiki.answers.com/Q/What_is_marshalling_and_Demarshalling)或[序列化和反序列化](http://en.wikipedia.org/wiki/Serialization)）和编写必要的代码来写入文件并从中读取。因此，您可能希望使用大多数语言都有库的流行编组和解组协议。JSON 就是这样一种流行的编组协议。其他包括[Pickle](http://en.wikipedia.org/wiki/Pickle_%28Python%29)和[protobuf](http://code.google.com/p/protobuf/)。

希望这可以帮助

# php - 在浏览器中打开文本文件 - 服务器错误

> ID：12174861
> 
> 赞同：0
> 
> 时间：2012-08-29T09:34:25.370
> 
> 标签：php, javascript, html

我试图在我的浏览器中打开一个文本文件，当从我的本地机器上打开它时它工作得很好但是当我将我的文件上传到我的网络服务器时，到文本文件的链接不再有效，我得到一个断开的链接错误浏览器。

这是我打开txt文件的代码：

```
<div style="width: 100%; background-color: #CCC;text-align: center;">
<a href="code.txt" onclick="window.open(this.href,this.target,'height=300, width=500');return false;">Code</a>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T09:49:00.330

A relative URL (neither a complete URL, i.e. one that starts with a protocol like `http://` nor one that starts with a `/` indicating the root of the site) is relative to the last `/` in the URL. This means that if you have `<a href="code.txt">Code</a>` on `http://www.example.com/dir/page.html` then `page.html` is dropped and `code.txt` is appended, leading to `http://www.example.com/dir/code.txt`. If the `code.txt` file is not uploaded to that location on your webserver, it will not be found.

Are you sure `code.txt` is live on the server? That is to say can you navigate manually to the text file on your server?

Are you sure your PHP file is in the same directory as `code.txt`?

Are there any case (upper/lowercase) issues, like @BugFinder mentioned?

Does it work without the JavaScript popup? From your question it doesn't sound like a JS issue, but seeing as @Sathish thought there was something to correct with your popup behavior (it looks fine to me) it's worth removing that variable and seeing if a plain link works.

Are there any permission issues or restrictions on your server preventing the file from being displayed? For that matter, what is the exact error code and message you are receiving? 404? Something else?

I'm inclined to guess from what you've said so far that the file hasn't actually been uploaded. Alternatively, it's not actually in the same directory as your PHP file, despite what you've said. If it's neither of these issues, please update your question with more details.

* * *

If the file exists according to FTP, there's a couple of possibilities:

1.  The file is on the server, but not where you think it is. For example, many webhosts have a private root directory that is not accessible to the web, inside of which is a `public_html/` or `www/` directory which is the actual root of your website. Have you been able to upload other files to your website in the past? It sounds like the PHP file is successfully available, so assuming the txt file's in the same place, this isn't the issue.
2.  Your website is not set to allow .txt files to be served up to browsers. Have you been able to upload and see any txt files, or is this the first file with this problem? What happens if, for the sake of trying it, you rename the file to `code.html` and upload that to the same place?

For the record, this is likely a far better question to bring up with your host (or just look through their docs / support) than with StackOverflow, it's not a programming question but a hosting issue. Since we don't know who your host is, nor the intricacies of every individual hosting provider, it's hard to diagnose what's wrong.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:38:34.533

要通过单击链接打开新窗口，您需要使用 javascript 的 window.open 方法。

```
<a href="javascript: void(0)" 
onclick="window.open('popup.txt', 
'windowname1', 
'width=200, height=77'); 
 return false;">Click here for txt</a> 
```

# jquery - 动态形式：在 jeasyui 中使用元素时 idAttr 未定义

> ID：12174866
> 
> 赞同：1
> 
> 时间：2012-08-29T09:34:42.387
> 
> 标签：jquery, html

我正在使用[Jeasyui](http://www.jeasyui.com)创建表单元素，我需要使用[jQuery Dynamic Form](http://sroucheray.org/blog/jquery-dynamic-form/)复制表单中的一些元素。

JS：

```
// generate combobox with jeasyui
$('#empPhoneType').combobox({  
  url: '<?=BASE_URL?>mdm/employee/contacttype?t=mail',  
  valueField:'id',  
  textField:'name'  
}); 
// called to generate dynamic element
$('#phoneWrapper').dynamicForm('#phone-add', '#phone-remove', {limit:5}); 
```

HTML：

```
<form id="form"> 
      <label for="empPhone">Telepon</label>
      <div style="margin-bottom: 10px;" id="phoneWrapper"> 
            <select id="empPhoneType" name="empPhoneType"></select> 
            <input type="text" id="empPhone" name="empPhone"/>  
       </div>
      <a href="#" id="phone-remove">[ - ] &nbsp;</a>
      <a href="#" id="phone-add">[ + ]</a>

 ​&lt;/form>​​​​​​​​​​​​​ 
```

当我运行代码时，元素是重复的，但它给出了这个错误：

> 类型错误：idAttr 未定义。newIdAttr = idAttr.slice(0,-1) + 索引，

但是当我删除初始化 jeasyui >> $('#empPhoneType') 时，元素被复制并且没有给出任何错误

有人能帮我吗？

* * *

好的，我已经解决了这个问题。问题出`dynamic-form.js` 在函数中，`normalizeClone()`它运行每个循环的函数`formFields`（“输入、复选框、选择、文本区域”）。

当它循环时`formFields`，有一个变量试图捕获元素 id。但是当元素没有id时没有处理。所以我只是放置一个处理程序来处理元素是否没有 id。

原始功能：

```
elmnt.find(formFields).each(function(){ 
        var that = $(this);
        var idAttrs = that.attr("id");
        var nameAttr = that.attr("name"); 
        var origNameAttr = that.attr("origname");
        var newIdAttr = idAttrs.slice(0, -1) + index;
        match = matchRegEx.exec(nameAttr);

        if (idAttrs) {
            that.attr("name", match[1]+index+match[3]);

            that.attr("origid", idAttrs);

            elmnt.find("label[for='"+idAttrs+"']").each(function(){
                $(this).attr("for", newIdAttr);
            });
            that.attr("id", newIdAttr);
        }
    }); 
```

向函数添加处理程序：

```
elmnt.find(formFields).each(function(){ 
        var that = $(this);
        var idAttrs = that.attr("id");
        if (idAttrs) {
            var nameAttr = that.attr("name"); 
            var origNameAttr = that.attr("origname") || idAttrs.slice(0, -1);
            var newIdAttr = idAttrs.slice(0, -1) + index;
            match = matchRegEx.exec(nameAttr);

            if(match)
                that.attr("name", match[1]+index+match[3]);

            that.attr("origid", idAttrs);

            elmnt.find("label[for='"+idAttrs+"']").each(function(){
                $(this).attr("for", newIdAttr);
            });
            that.attr("id", newIdAttr);
        }
    }); 
```

# bash - 每次目录更改时设置一个 bash 变量

> ID：12174871
> 
> 赞同：7
> 
> 时间：2012-08-29T09:34:59.020
> 
> 标签：bash, path, prompt

我希望我的 bash shell 有一个可用的变量，类似于`pwd`但等于当前工作目录的一部分，而不是整个路径。

IE，

```
$PWD=/a/b/c/d/e/f  
$PATH_SECT=c/d/e 
```

我有一个已经显示此路径的提示，但我想在每次更改目录时将环境中的变量更新为此值。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T11:02:38.270

您可以使用该`promptcmd`功能。从`man bash`我们了解到，这个函数是在显示提示之前执行的。默认情况下它是空的（或者更确切地说，未定义）。

一个简单的例子：

```
promptcmd(){
    local p=$(pwd)
    PATH_SECT=${p/\/a\/b\/}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:34:51.977

你可以`alias`在你的 : 中使用一个和一个函数`.bashrc`：

```
alias cd="supercd"  # call the function
function supercd(){
  builtin cd "$@"   # original cd
  PATH_SECT=$(pwd)  # or whatever
} 
```

# php - 在php代码中得到未定义的变量

> ID：12174874
> 
> 赞同：-1
> 
> 时间：2012-08-29T09:35:03.603
> 
> 标签：php, variables

运行 php 时收到错误消息

然而结果出来了

这是我的代码

```
function cart() {
    foreach($_SESSION as $name => $value) {
        if ($value>0) {
            if (substr($name, 0, 5) == 'cart_'){
                $id = substr($name, 5, (strlen($name)-5));
                $get = mysql_query('SELECT id, name, price FROM products WHERE id=' .mysql_real_escape_string((int)$id));
                while ($get_row = mysql_fetch_assoc($get)){
                    $sub = $get_row['price'] * $value;
                    echo $get_row['name'].' x '.$value.' @ &pound'.number_format($get_row['price'], 2).' = &pound'.number_format($sub, 2).' <a href="cart.php?remove='.$id.'">[-]</a> <a href="cart.php?add='.$id.'">[+]</a> <a href="cart.php?delete='.$id.'">[Delete]</a><br />' ;
                }
            }
            $total += $sub;
        }
    }
    echo $total;
}
?> 
```

我收到一条错误消息

```
 Notice: Undefined variable: total in C:\xampp\htdocs\shoppingcart\cart.php on line 54 
```

第 54 行是

```
 echo $total; 
```

我的代码有什么问题？？

我想我已经定义了代码

```
 $total += $sub; 
```

谢谢你帮助我:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:36:43.217

要使用 a`+=`它需要先设置，否则你会收到警告。

在它上面弹出一个`$total=0;`，你应该很甜。

```
function cart() {
    $total=0;
    // rest of your code... 
```

[您可以在此处](http://php.net/manual/en/language.operators.assignment.php)进一步了解赋值运算符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T09:37:16.550

例如，如果您`$_SESSION`为空，则永远不会初始化该变量。此外，运算符`+=`意味着向变量添加一些内容 - 如果未事先设置变量，则会触发通知。

您可以`$total = 0;`在循环之前放置：

```
$total = 0;
foreach($_SESSION as $name => $value) {
... 
```

**无论如何，始终初始化您的变量**是一个很好的做法，这样您就可以避免一些糟糕的意外。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T09:36:52.197

将此添加为函数的第一行：

```
$total = 0; 
```

因为现在你的循环第一次运行时，$total 不是一个已知的 var

# c# - 锁定文件较长时间的一些问题

> ID：12174876
> 
> 赞同：0
> 
> 时间：2012-08-29T09:35:14.653
> 
> 标签：c#, .net, file, locking

我有一个函数正在读取文件并在列表中添加一些字符串并返回此列表。因为我希望没有人也没有任何东西可以改变、删除或任何我正在阅读的当前文件，所以我锁定了它。一切都很好，我以某种方式做到了：

```
public static List<string> Read(string myfile)
{
  using (FileStream fs = File.Open(myfile, FileMode.Open, FileAccess.Read, FileShare.None))
  {
    //read lines, add string to a list
    //return list
  }
} 
```

没关系。现在我在另一个类中有另一个函数，它正在处理列表并调用其他函数等等。现在有时我想移动我正在阅读的文件。这就是问题所在：因为我现在在一个新函数中并且该函数`Read(string myfile)`已经被处理，所以文件中没有更多的锁。

```
//in another class
public static void DoStuff(/*somefile*/)
{
  List<string> = Read(/*somefile*/);
  //the file (somefile) is not more locked!
  //do stuff

  if (something)
    Move(/*somefile*/) //could get an error, file maybe not more there or changed...
} 
```

所以另一个函数/用户可以更改文件，重命名它，删除它或其他任何东西=>我无法移动这个文件。或者我将移动更改的文件，但我不知道那是什么。如果我使用线程，另一个具有相同功能的线程可以再次锁定文件，我无法移动它。

这就是为什么我需要将这个文件锁定更长的时间。有没有简单的方法？还是我必须更换我的`using (FileStream fs = File.Open(myfile, FileMode.Open, FileAccess.Read, FileShare.None)`代码？有什么建议么？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T09:46:00.063

保持它锁定的唯一方法是保持它完全打开，就像你在代码中所做的那样。

也许你需要`//do stuff`在你的 using 语句中，然后在调用之后直接`Move`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:59:32.980

再多的锁定也无法阻止这一点。锁只保护文件中的**数据**。用户（或任何其他程序）仍然可以移动或重命名文件。文件的属性，包括名称、时间戳和文件属性是分开存储的，可以随意更改。

这只是您在任何 Windows 程序中必须处理的事情。仅捕获异常就足以让您知道文件发生了某些事情，这种情况很少见。用户很少会感到惊讶。如果您*真的*需要预先知道，那么您可以使用 FileSystemWatcher 在它发生时获取通知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T11:34:03.977

只有在调用 Read 方法时才锁定文件。

如果您想保持锁定并仅在您决定时释放它，请使用您的方法 OpenFile(string filename) 和 CloseFile(string filename)。然后从 Read 方法中删除 using 语句。

开始工作时打开它（锁定）。需要时阅读。当您必须移动它时，只需创建一个具有相同名称的新文件并复制内容即可。关闭原始文件（解锁）并删除它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T12:59:53.197

如果你想保持文件锁定更长时间，那么你需要重构你的代码，以便`Stream`对象保留更长时间 - 我会更改`Read`方法以接受 a `FileStream`，有点像这样

```
using (FileStream fs = File.Open(myfile, FileMode.Open, FileAccess., FileShare.None))
{
    List<string> = Read(fs);
    if (something)
    {
        File.Move(/* somefile */)
    }
} 
```

您将遇到的问题是该`File.Move`方法将失败，因为该文件已被锁定（由您锁定，但`File.Move`不知道）。

根据您想要执行的具体操作，可能会找到一种在“移动”文件的同时保持文件锁定的方法，（例如，如果您`something`事先知道您可以打开文件指定[`FileOptions.DeleteOnClose`](http://msdn.microsoft.com/en-us/library/system.io.fileoptions.aspx)并编写一个新的在所需目标中具有相同内容的文件），但这与移动文件并不完全相同，因此这完全取决于您要执行的操作。

一般来说，这样的事情几乎总是比它们的价值更麻烦 - 你最好在移动文件之前解锁文件并捕获/处理由于移动而引发的任何异常。

# msbuild - Visual Studio 2012 RTM 关闭后内存中有 MSBuild.exe

> ID：12174877
> 
> 赞同：26
> 
> 时间：2012-08-29T09:35:15.823
> 
> 标签：msbuild, visual-studio-2012

我注意到当 Visual Studio 2012 RTM 关闭时，许多 MsBuild.exe 实例仍在内存中。

为什么 ？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-30T09:26:08.600

在 Visual Studio 关闭后，MSBuild 进程会继续运行一段时间（我相信是 15 分钟）。这是一种提高性能的尝试，其想法是如果很快启动另一个构建，则可以重用空闲的 MSBuild 进程，并且可以消除产生新进程的开销。

如果从命令行构建，您可以通过设置环境变量`MSBUILDDISABLENODEREUSE=1`（在启动 VS 之前）或指定`/nodeReuse:false`（或）来禁用此功能。`/nr:false`

在 MSConnect 上提交的相关问题：

*   [MSbuild 激增](http://connect.microsoft.com/VisualStudio/feedback/details/737860/msbuild-and-msbuildtaskhost-processes-proliferate-after-exiting-vs11-beta)
*   [VS11 中的幽灵 MSBuild.exe](http://connect.microsoft.com/VisualStudio/feedback/details/731094/ghost-msbuild-exe-in-vs11-when-using-custom-task)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-15T02:44:44.207

您可以在 Visual Studio 中关闭并行构建功能。[如何：设置多处理器构建的并发构建数](https://msdn.microsoft.com/en-us/library/y0xettzf(v=vs.90).aspx)

# c# - C# 应用程序在我处置时退出

> ID：12174878
> 
> 赞同：0
> 
> 时间：2012-08-29T09:35:30.063
> 
> 标签：c#, forms

基本上我有一个登录窗口，一旦用户登录并显示另一个窗口，它应该关闭，现在我只是隐藏它（Form.Hide（））但是我不希望占用不必要的系统资源，我不需要我已经登录后的登录窗口。

这是我执行操作的代码片段：

```
MainWindow w = new MainWindow();
        TimeRegisterApI.Instance.Windows.Add(w.Text,w);
        TimeRegisterApI.Instance.Windows[w.Text].Show();
        this.Dispose(); 
```

Windows 是一个字典，它以标题为键存储表单的引用。TimeRegisterApi 是一个单例。基本上发生的情况是我的应用程序在我登录后退出，而不是在我希望它处理时退出登录窗口（关闭并转到垃圾收集器。）

我知道将标题作为键可能会导致重复的键条目，但在我目前的设计中没问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:39:09.230

您必须让您的窗口表单登录为模态表单，父表单是您的主表单，它将允许您等待答案（如保存对话框）并返回主窗口表单）这是您的主表单，因此您存在

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:49:28.527

好的，我解决了问题，基本上发生的情况是，当从`program.cs`at运行的窗口被释放时`application.run(window)`，它会关闭程序，因为它是主窗口，我认为可以`e.cancel`对此窗口的 dispose 事件进行处理，但是我通过像这样在新窗口中运行窗口解决了这个问题`application.run`：

来自program.cs，相关行

```
 static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new LoginWindow());
        start();
    }

 public static void start()
    {
        if (TimeRegisterApI.isLoggedIn())
        {
            MainWindow w = new MainWindow();

            Application.Run(w);
        }
    } 
```

# jquery - jquery对话框内的输入框

> ID：12174880
> 
> 赞同：1
> 
> 时间：2012-08-29T09:35:35.673
> 
> 标签：jquery, dialog

单击 jquery 对话框的保存按钮时如何获取在 jQuery 输入框中输入的值。

```
window.parent.$('#divDialog')
  .attr('title', 'Edit ATM Details')
  .html('<table><tr align="center"><td align="center">Enter ATM ID &nbsp;</td><td align="center"><input id="txtEditATM" name="txtEditATM" type="text" /></td></tr></table>')
  .dialog({
     buttons: {
              "Save": function() {
                                 var atmid = $('#txtEditATM').val();
                                 //Next Processing Done Here
                                 }
              }
   }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:43:32.110

您的输入也在窗口父级中，因此您应该：

`var atmid = window.parent.$('#txtEditATM').val();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:46:24.530

我会把它分解，使它更容易阅读和更容易控制你的上下文

```
var div = window.parent.$('#divDialog');
        div.attr('title', 'Edit ATM Details').html('<table><tr align="center"><td align="center">Enter ATM ID &nbsp;</td><td align="center"><input id="txtEditATM" name="txtEditATM" type="text" /></td></tr></table>');

        div.dialog({
             buttons: {
                      "Save": function() {
                                         var atmid = div.find('#txtEditATM').val();
                                         //Next Processing Done Here
                                         }
                      }
            }); 
```

# java - 如何使用 JAVA servlet 获取 POST 请求以使用 GWAN

> ID：12174883
> 
> 赞同：1
> 
> 时间：2012-08-29T09:35:48.550
> 
> 标签：java, servlets, post, g-wan

我正在尝试使用 GWAN 的 java servlet。使用 api.Gwan 类很容易让 GET 请求工作。

我的问题是如何让 POST 请求正常工作。

```
import api.Gwan;

public class ProccessGETRequest {
    public static int jmain(long env, String[] args) {
    //GET request  is contained in the args
    ...
    //but how do you access the POST request?
    }
} 
```

如果此功能不存在，有人可以建议一个实现。这将更容易弄清楚 api.Gwan 类是否是开源的...... :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:51:35.950

在 C servlet 中，post 和 get args 都在“args”中。我没有在 G-WAN 中尝试过 java，但我认为 post args 应该在同一个位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:52:14.550

Richard 是对的：G-WAN 为您进行解析，因此`jmain(args)`包含 GET 和 POST 请求的参数。

您没有什么特别的事情要做，请参阅`loan.java`可以在 GET 和 POST 两种模式下使用的示例。

对于某些语言，G-WAN API 有时会部分移植（例如 C# 或 Java），因为`xbuffers`在使用 UTF16 字符和抽象的平台上使用与 UTF8一起使用的 G-WAN 几乎没有意义`strings`（它们无论如何都需要数据副本才能与 G-WAN 通话）。

高性能例程也是如此，如果它们被封装在语言包装器中，它们将失去它们的目的（速度）。

但是，如果您遗漏了某些特定的东西，那么 G-WAN 开发人员愿意添加功能，正如我过去所看到的那样。只需给他们一行。

# php - apache_request_headers 和 array_key_exists

> ID：12174885
> 
> 赞同：-2
> 
> 时间：2012-08-29T09:36:00.403
> 
> 标签：php, android, http-headers

这更像是一个警告而不是一个问题，但有人可能能够提供更好的解决方案。

我正在从我的 Android 应用程序发送自定义请求标头。当请求到达 PHP 服务器时，我检查此标头及其值是否存在。为此，我使用 获取标头数组，**`apache_request_headers()`**然后使用 . 检查标头**`array_key_exists()`**。

但是，**`array_key_exists('custom-header', $Hdr)`**将返回**false**！所以我用 print_r 转储了数组，你瞧，数组键确实存在于数组中。这是输出：

```
Array
(
    [Accept-Encoding] => gzip
    [Connection] => Keep-Alive
    [Content-Type] => application/x-www-form-urlencoded
    [Content-Length] => 103
    [Host] => www.somedomain.com
    [custom-header] => my-custom-header-value
) 
```

我是如何解决这个问题的？

像这样克隆数组：

```
// recuperate the request headers
$Hdr = apache_request_headers();

// clone the array as it will not correctly search with array_key_exists
$Keys = array_keys($Hdr);
$Values = array_values($Hdr);
$Headers = array();
for($i = 0; $i < count($Keys); $i++)
{
    $Headers[$Keys[$i]] = $Values[$i];
} 
```

现在，当我使用 查询新数组时**`array_key_exists('custom-header', $Headers)`**，它返回 true ！

这是一个已知问题吗？

有更好的解决方案吗？

**注意**：*我已经更改了实际值的名称以保护我的代码，这里作为示例给出 - 请不要发布对这些值的更正*:-)

**编辑**：这发生在我在 Apache 版本 2.2.22 上运行 PHP 版本 5.3.10 的共享服务器上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:13:31.777

按照您的代码示例：

```
$Hdr = apache_request_headers();

$Keys = array_keys($Hdr);
$Values = array_values($Hdr);
$Headers = array();
for($i = 0; $i < count($Keys); $i++)
{
    $Headers[$Keys[$i]] = $Values[$i];
}

var_dump($Hdr === $Headers); # true 
```

我们可以得出`$Hdr`等于`$Headers`。[（为什么不会）]

您应该知道这`array_key_exists`是区分大小写的，因此`Custom-Header`和`custom-header`不是相同的键。

你能不能试试：

```
array_key_exists('custom-header', array_change_key_case($Hdr)); 
```

或者稍微改变一下你的代码：

```
$Hdr = apache_request_headers();
$Headers = array();
foreach($Hdr as $Key => $Value)
{
    $Headers[strtolower($Key)] = $Value;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:50:31.113

给定您的示例数据

```
Array
(
    [Accept-Encoding] => gzip
    [Connection] => Keep-Alive
    [Content-Type] => application/x-www-form-urlencoded
    [Content-Length] => 104
    [Host] => androidgmap.letrajet.com
    [User-Agent] => LeTrajet Edition Cèdre
    [letrajet-sig] => 32dbc2........
) 
```

这包含两个可能的问题，小写标题名称和“è”字符，它们可能会或可能不会在您的请求和/或比较代码中正确编码。需要更多细节来验证，但是：

```
key is missing : false
MyUserAgent == 'LeTrajet Edition CÃ¨dre' : false 
```

怀疑您有“è”字符的字符集问题。您需要在进行比较的 PHP 代码中解决这个问题。但是，此问题与数据有关，与标题键无关。

你的代码中也有这个：

```
else if($MyUserAgent == "LeTrajet Edition Cedre" 
```

如果您的数据中有 Cèdre，那怎么能匹配？

编辑：根据 OP 的评论截断签名。

# android - 如何在android中从一页调用构造函数到另一页？

> ID：12174886
> 
> 赞同：-1
> 
> 时间：2012-08-29T09:36:04.897
> 
> 标签：android

我有两个类，A 类和 B 类。在 BI 类中创建了一个构造函数。在 AI 类中创建了 onresume 方法。从 AI 类的 onresume 方法想调用 B 类的构造函数。我怎样才能做到这一点？请指导我。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:38:36.363

当您在 class的**onResume**中创建 class 的`new`对象时，它会自动为其对象调用 class 的构造函数。`B`**`A``B`**

 **例如：

```
B obj = new B();  //the 'new' keyword will call the constructor itself 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:55:17.120

如果两个类都是公共的并且属于同一个包，则可以使用代码在B类中调用A类的构造函数，

```
B objb = new B(); 
```

否则，您需要从 A 类扩展 B 类。**

# php - PHPExcel 输出到浏览器在 IE 中不起作用

> ID：12174887
> 
> 赞同：1
> 
> 时间：2012-08-29T09:36:10.230
> 
> 标签：php, internet-explorer, phpexcel

我有一个 PHP 脚本，它使用 PHPExcel 打开模板，从数据库查询中插入值，然后将结果返回给浏览器。它在 Firefox 中完美运行，但在 Internet Explorer (8) 中，当它尝试打开文件时，它会中断：

> Internet Explorer 无法从 my.domain 下载 generate.php。
> 
> Internet Explorer 无法打开此 Internet 站点。请求的站点不可用或找不到。请稍后再试。

我正在使用（`generate.php`）的代码如下：

```
// Open template
$xlRead = PHPExcel_IOFactory::createReader('Excel5');
$xl = $xlRead->load('Template.xls');

$xl->setActiveSheetIndex(0);

// Write data
$xl->getActiveSheet()->fromArray($dbOutput, null, 'A1');

// Output to browser
header('Last-Modified: '.gmdate('D, d M Y H:i:s').' GMT');
header('Cache-Control: no-store, no-cache, must-revalidate');
header('Cache-Control: post-check=0, pre-check=0', false);
header('Pragma: no-cache');
header('Content-Type: application/vnd.ms-excel');
header('Content-Disposition: attachment;filename=MyReport.xls');

$xlWrite = PHPExcel_IOFactory::createWriter($xl, 'Excel5');
$xlWrite->save('php://output') 
```

* * *

**编辑**似乎这个问题只在 SSL 之后影响 IE。因此，这与几个类似的 SO 问题是相同的问题。人们的建议是调整标题，但到目前为止，我所看到的解决方案的组合都没有奏效......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T16:13:28.787

如果上述方法都不适合您，并且您仍希望在 SSL 下运行，您可以始终将文件写入磁盘并提供下载链接，或者您可以提示用户输入电子邮件地址并将文件作为附件发送. 如果你走电子邮件路线，PHPMailer 有一个相当简单的发送附件的方法。我不确定 100%，但我认为文件需要先写入磁盘才能使用 PHPMailer 附加，但您始终可以在发送后立即取消链接文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T10:06:55.833

这一切都归结为 IE 对您设置的标头的处理。[Microsoft 自己](http://support.microsoft.com/kb/316431)对这个已知问题的回答应该可以为您解决问题。

他们的解决方案摘要：“删除无缓存标头或标头。”

# actionscript-3 - 使用动作脚本 3 中的文本文件将图像动态加载到舞台

> ID：12174888
> 
> 赞同：1
> 
> 时间：2012-08-29T09:36:10.690
> 
> 标签：actionscript-3

我想使用文本文件动态地将图像添加到 Flash 阶段。使用 URLLoader 和 URLRequest 类访问名为 textPic.txt 的文本文件。目前我已经使用这个脚本加载了文本文件：

```
public class imgLoader extends MovieClip
    {
        private var myTextloader:URLLoader=new URLLoader();
        var fl_TextURLRequest:URLRequest = new URLRequest("textPic.txt");

        public function imgLoader()
        {
            myTextloader.addEventListener(Event.COMPLETE,onloaded);
            //myTextloader.load(new URLLoader("textPic.txt"));
            myTextloader.load(fl_TextURLRequest);
        }
            private function onloaded(e:Event):void
        {
            trace(e.target.data);

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:49:01.277

```
import com.adobe.serialization.json.JSON;

var ldr :URLLoader = new URLLoader;
ldr.addEventListener( Event.COMPLETE, loadHandler );
ldr.load( new URLRequest('images.json') );

function loadHandler( e:Event ):void
{
    var rawData:String = String(e.target.data);
    var imageData:Array = JSON.decode(rawData) as Array;

    for (var i:int = 0; i < imageData.length; i++)
    {
       trace( imageData[i].name + '  url: ' + imageData[i].url );
    }
} 
```

图像.json：

```
[
  {
     "name": "Image 1",
     "url": "image1.jpg"
  },
  {
     "name": "Image 2",
     "url": "image2.jpg"
  },
  {
     "name": "Image 3",
     "url": "image3.jpg"
  }
] 
```

# c# - FluentValidation 3：WithMessage 字符串格式错误

> ID：12174892
> 
> 赞同：1
> 
> 时间：2012-08-29T09:36:18.060
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, fluentvalidation

`FluentValidation 3`当我使用重载的 WithMessage 方法时，我使用并且我遇到了一个奇怪的问题。

复合格式字符串的格式不正确。我得到“ `true`”而不是`{0}`我的格式字符串。所有其他格式项目都不会被替换。

**例如：**

```
 public class MyModelValidator : AbstractValidator<MyModel>
    {
        public MyModelValidator()
        {
            RuleFor(x => x.Caption).NotNull().WithMessage("{0} ----- {1}", "one", "two" );
        }
    } 
```

我得到的验证字符串是：“ `true----- {1}`”而不是“ `one----- two`”。

你能解释一下，我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:01:00.220

嗯，响应是......在源代码中。

您使用以下重载（我必须说，它的用法并不清楚）`WithMessage`：

```
public static IRuleBuilderOptions<T, TProperty> WithMessage<T, TProperty>(this IRuleBuilderOptions<T, TProperty> rule, string errorMessage, params object[] formatArgs) {
    var funcs = ConvertArrayOfObjectsToArrayOfDelegates<T>(formatArgs);
    return rule.WithMessage(errorMessage, funcs);
    } 
```

所以“一”和“二”被更改为一个数组 `Func<T, object>`，当然，这会导致你的代码出现奇怪的行为......

你应该`string.Format`在你的情况下使用

```
WithMessage(string.Format("{0} ----- {1}", "one", "two" )); 
```

顺便说一句，FluentValidation 消息“已经预先格式化”：`{0}`在 WithMessage 中使用的目标是修改`{0}`. 例如，NotNull 具有“1 个参数”的预格式化消息。我认为这就是为什么你的`{0}`被转化为“真实”的原因。

# c# - C# 探查器作为库，而不是应用程序

> ID：12174895
> 
> 赞同：5
> 
> 时间：2012-08-29T09:36:28.260
> 
> 标签：c#, profiling

有谁知道 C# 中的分析器库，我可以将其嵌入到我的源代码中，以进行基于样本的分析？即定期获取指令指针位置，将其存储在内存中并允许将其保存到文件中并稍后分析，大概是通过某些桌面应用程序？

我知道有很多传统的分析器应用程序（如 JetBrains、Ants 等），但我想分析在非桌面平台上运行的 C# 程序，这些分析器都不能使用。我希望我的应用程序自行采样，而不是外部分析器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:16:11.723

Eqatec [profiler](http://www.eqatec.com/profiler/)可能适合。我知道至少在早期版本中，分析已编译到您的二进制文件中。

用户指南似乎很好地概述了如何使用它：

[http://eqatec.zendesk.com/entries/20325613-user-guide#Intro](http://eqatec.zendesk.com/entries/20325613-user-guide#Intro)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:11:00.403

ETW 跟踪基础结构提供了该功能。尝试运行 Microsoft 的 perfview 工具。它使用 ETW 来显示采样的堆栈跟踪。

您可以自己使用 ETW 来构建采样分析器。不过，这可能有点工作。

# tridion - 是否可以在工作流中发布组件修订？

> ID：12174902
> 
> 赞同：4
> 
> 时间：2012-08-29T09:36:50.617
> 
> 标签：tridion, tridion-2011

我们当前的设置是我们有两个目标，Staging 和 Live。协作者可以在受影响的组件仍在工作流中时对其进行更新。最后一个活动被设置为将相关页面发布到 Live。是否可以从工作流中将组件更新（例如 2.2、2.5 修订版）发布到 Staging？

**Page.Publish()**方法的 TOM API 文档似乎没有输入参数来完成此目的。

编辑：我们当前设置的其他详细信息：我们尝试发布的页面有一个“自定义渲染器”，可以这么说。页面模板设置为递归地从某个文件夹中提取组件并相应地构建 HTML。使用的方法是**Folder.GetItems(OrganizationalItemItemsFilter)**。它检索组件列表及其数据。该页面没有组件演示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:41:28.137

**对于标准的 Tridion 解决方案，即使用 Page+ComponentPresentations+Workflow，这就足够了：**

在方法中设置`activateWorkflow`参数将发布工作流修订。这是第三个参数：`True``Publish()`

```
Public Function Publish( ByVal targets As Variant,
            ByVal activateBlueprinting As Boolean,
            ByVal activateWorkflow As Boolean,
            ByVal rollbackOnFailure As Boolean,
            Optional ByVal publishTime As Date = 0,
            Optional ByVal unpublishTime As Date = 0,
            Optional ByVal deployTime As Date = 0,
            Optional ByVal resolveComponentLinks As Boolean = True,
            Optional ByVal priority As TDSDefines.EnumPublishPriority = Normal,
            Optional ByVal ignoreRenderFailures As Boolean = False,
            Optional ByVal maximumRenderFailures As Long = 0 ) As String 
```

参考：TOM API 文档：“ *activateWorkflow | 指示项目是否正在（取消/重新）从用户的工作列表中发布。* ”

* * *

但是，如果**自定义**渲染器用于构建页面输出，例如`Folder.GetItems()`用于检索模板中的组件时，则需要额外调用才能实际检索组件的最新版本，例如 Nuno 的[版本零`-v0`技巧](https://forum.sdltridion.com/topic.asp?TOPIC_ID=7504&TID=mfOdK1ky969mxF-kQ4tcWMvsdBRjsma67MFGiFz9T5UhjpEDkZ907GrIvaYGX77Xyg)。

请注意，如果您决定这样做，最新版本将始终发布到您的目标，它可能不完全是“批准”的内容。

# facebook - facebook元标签描述未更新

> ID：12174907
> 
> 赞同：10
> 
> 时间：2012-08-29T09:36:56.907
> 
> 标签：facebook, meta-tags

3 天前，我更新了 facebook 元标记中的描述，但在 facebook 上分享链接时，更改并没有反映出来。相反，旧的描述仍然出现。根据 Facebook 的说法，它每 24 小时抓取一次您的页面，以确保描述（和其他共享数据）是最新的。[但是，可以通过在Facebook URL Linter](https://developers.facebook.com/tools/debug)中输入帖子 URL 来手动刷新它

我确实手动刷新了它，现在等了 3 天。当我看到 linter 的调试输出时，它会显示正确的最新描述，但在共享链接时仍会显示旧描述。

**如何重现：**

这是我们的网站：[https](https://www.tradeinsports.se/#tis1) ://www.tradeinsports.se/#tis1 （这是瑞典语，请多多包涵）。如果您转到上面的链接并单击两个可用产品中的任何一个，然后在 facebook 上分享，您可以看到描述与 linter 调试输出中出现的描述不同。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-03-04T04:38:36.093

转到此页面：[https ://developers.facebook.com/tools/debug/](https://developers.facebook.com/tools/debug/)

输入网址并单击“调试”。

点击“获取新的抓取信息”。

该页面上有很多对您网站的社交媒体方面很有帮助的好数据。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-29T09:43:20.133

如果您正在实现 Facebook Share 或 Facebook Like 按钮，并且您的 og: 元标记被忽略，则可能是 Facebook 的过度缓存。

清除 Facebook 缓存并强制 Facebook 使用来自您的 og: 元标记的信息的最快方法是对 URL 进行 Lint。

在 Linter 中输入包含 og: 元标记的网页的 URL，Facebook 将清除该页面的缓存。然后，您的 Share 或 Like 按钮应该开始从您的 og: 元标记中提取正确的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-04T17:21:15.117

我也有这个问题。刮板显示了正确的信息，但共享 url 仍然填充了旧数据。

我解决这个问题的方法是使用该`feed`方法，而不是`share`，然后手动填充数据（不使用 share 方法公开）

像这样的东西：

```
shareToFB = () => {
    window.FB.ui({
    method: 'feed',
    link: `signup.mydomain.com/?referrer=${this.props.subscriber.sid}`,
    name: 'THIS WILL OVERRIDE OG:TITLE TAG',
    description: 'THIS WILL OVERRIDE OG:DESCRIPTION TAG',
    caption: 'THIS WILL OVERRIDE THE OG:URL TAG'
  });
}; 
```

# mysql - (EXCEL)VBA 旋转按钮，在 sql 数据库日期时间中逐步执行

> ID：12174911
> 
> 赞同：0
> 
> 时间：2012-08-29T09:37:05.913
> 
> 标签：mysql, excel, vba

我在 MySQL 中有一个 sql 数据库表，其中有很多具有不同日期时间值的行。例如：

```
2012-08-21 10:10:00   <-- with these date there are around 12 rows
2012-08-21 15:31:00   <-- with these date there are around 5  rows
2012-08-22 11:40:00   <-- with these date there are around 10 rows
2012-08-22 12:17:00   <-- with these date there are around 9  rows
2012-08-22 12:18:00   <-- with these date there are around 7  rows
2012-08-25 07:21:00   <-- with these date there are around 6  rows 
```

如果用户单击 SpinButton1_SpinUp() 或 SpinButton1_SpinDown() 按钮，那么它应该执行以下操作：

**SpinButton1_SpinUp()**按钮应该从 sql 表中过滤掉这些数据，该表是我们当前所在的下一个表。示例：我们当前选择了：2012-08-21 15:31:00。用户点击 SpinUp 按钮，然后程序从数据库中选择这些日期，这是下一个更高的值，例如：2012-08-22 11:40:00。 **因此，用户点击 SpinUp 按钮，数据库中选择的数据将从日期：2012-08-21 15:31:00 更改为日期：2012-08-22 11:40:00**

**SpinButton1_SpinDown()**将与 SpinUp 按钮完全相反。 **当用户点击 SpinDown 按钮时，在数据库中选择的数据将从日期：2012-08-21 15:31:00 更改为日期为 2012-08-21 10:10:00 的数据**

所以我认为我们当前所在的日期应该存储在一个变量中。但是在点击按钮时，不是应该在数据库中选择每个更大或更低的数据，只有那些最接近的更大或最接近的更低日期的数据。

**我怎样才能做到这一点？**

我希望我描述我的问题是可以理解的。我的母语不是英语，所以可能会发生误解！有什么不明白的请追问！感谢您的阅读！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:30:18.287

在 MySQL 数据库中创建一个显示 DISTINCT 数据值的视图，并将其用作旋转按钮的数据源

```
CREATE VIEW DISTDATES as
SELECT DISTINCT mydate FROM mytable 
```

然后，您可以进一步将此日期加入 mytable（例如列表字段）

# linux - CHOWN 在 LINUX (EC2) 中运行进程

> ID：12174916
> 
> 赞同：0
> 
> 时间：2012-08-29T09:37:20.273
> 
> 标签：linux, tomcat, permissions, chown

我在 EC2 Linux 实例中有两个用户 A 和 B。A 在 X 组中，B 在 Y 组中。我以用户 A 身份启动 tomcat 实例。我拥有 tomcat 实例目录为“chown -RA:Y tomcat/”

我以用户身份启动了tomcat。如何以用户 B 的身份停止 tomcat 或以用户 B 的身份重新启动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:45:31.893

由于用户B属于Y组，所以需要对tomcat文件夹/bin/catalina.sh文件有Y组的执行权限。请检查您是否拥有它。如果没有，您必须在 tomcat 文件夹/bin/catalina.sh 上使用 chmod x5x 给它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:03:46.093

用于`sudo`设置允许用户 B 以用户 A 身份运行某些事情（特别是停止和启动脚本）的规则（可能无需提供密码，即使这是需要且被认为足够安全的情况下）。

# c# - 绘制图元时擦除部分 RenderTarget？

> ID：12174921
> 
> 赞同：0
> 
> 时间：2012-08-29T09:37:36.770
> 
> 标签：c#, graphics, xna

我正在使用 XNA 创建一个类似绘画的应用程序。

我有一个充当画布的渲染目标。当用户绘制一些东西时，我使用`DrawUserPrimitives`三角形条绘制相应的三角形来制作线条和其他曲线。

我想在应用程序中实现一个橡皮擦，以便用户可以从纹理中擦除三角形。我过去使用过 OpenGL，我会像这样使用混合函数： `glBlendFunc(GL_ZERO, GL_ONE_MINUS_SRC_ALPHA);`

我将如何在 XNA 中做到这一点？我尝试将`GraphicsDevice`混合模式设置为`AlphaBlend`、`Additive`等。但它不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:14:11.773

如果您将代码更改为使用 a`Texture2D`而不是 a `RenderTarget2D`，则可以使用`RenderTarget2D.GetTexture()`从`RenderTarget2D`.

当然，可能会影响性能，但是如果您可以通过减少执行次数的方式优化代码，例如临时绘制背景颜色而不是实际擦除，然后遍历像素释放鼠标后，您可以使其工作。

可能有更好的方法，但我找不到。

# parsing - LR(0) 解析器中的后缀和右关联运算符

> ID：12174926
> 
> 赞同：1
> 
> 时间：2012-08-29T09:37:47.287
> 
> 标签：parsing, lexer, lr, associativity, postfix-operator

是否可以构造一个 LR(0) 解析器来解析具有前缀和后缀运算符的语言？例如，如果我有一个带有 +（加法）和 ! （阶乘）运算符通常优先于 1+3！应该是 1 + 3！= 1 + 6 = 7，但如果解析器是 LR(0)，那么当它在堆栈上有 1+3 时，它肯定会减少而不是移位？

另外，右结合运算符会带来问题吗？例如，2^3^4 应该是 2^(3^4) 但同样，当解析器在堆栈上有 2^3 时，它如何知道减少或移位？

如果这不可能，是否还有办法使用 LR(0) 解析器，可能通过更改语法在适当的位置添加括号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-14T16:56:07.637

LR(0) 解析器的弱点在于它们只能解析无前缀语言，即语言中没有字符串是任何其他语言的前缀的语言。这通常使得解析这样的表达式有点棘手，因为像 5 是 5! 的前缀。这也解释了为什么很难获得右关联运算符 - 给定一个像

> S → F | F ^ 小号

解析器在看到 F 后将发生移位/缩减冲突，因为它无法判断是扩展它还是再次缩减。这与前面提到的无前缀属性有关。

LR(0) 的这个弱点是人们在实践中很少使用它的原因之一。SLR(1) 和 LALR(1) 解析器通常可以解析这些文法，因为它们有一个前瞻标记，可以让它们决定是移位还是归约。在上述情况下，解析器不会遇到移位/缩减冲突，因为在决定是缩减 F 还是移位 ^ 时，他们可以看到移位 ^，因为在 S 之后应该出现 ^ 的位置没有正确的字符串。

# ruby - RSpec 测试使用文件：Errno::EACCES

> ID：12174940
> 
> 赞同：0
> 
> 时间：2012-08-29T09:38:38.967
> 
> 标签：ruby, rspec, ruby-1.9.2

我目前在使用 rspec 运行测试时遇到问题。所有测试文件 (*_spec.rb) 都可以成功运行。在同样罕见的情况下，`Errno::EACCES`可能会出现错误，并且其中一个测试可能会失败。例如：
文件中的所有测试`*_spec.rb`运行：

1.  成功地。
2.  成功地。
3.  一个测试失败了。
4.  成功地。
5.  一项测试失败（与#3 不同）。
6.  等等

异常从以下行引发：

1.  `FileUtils.mv`
2.  `FileUtils.mkdir_p`
3.  `FileUtils.rm_r`

所有这些列表都适用于文件或目录，并在测试中多次使用。即：
创建文件夹（带有子文件夹，带有文件等），重命名文件夹，测试某些东西，删除..等等。

看起来问题隐藏在“时间”中的某个地方（如果*尚未*完成*某些*操作并且另一个操作尝试访问该操作）。这个心意来自：

 *```
begin
  FileUtils.mv(a, b) # if an `Errno:EACCESS` was raised here
rescue               #
  FileUtils.mv(a, b) # it wouldn't be raised now
end 
```

**问题是**：
如何解决？（我的意思`Errno:EACCESS`是很少复制和一些测试）

* * *

*   在每次操作文件后添加`sleep`是不可接受的，但它会有所帮助。
*   ruby 的方法（`FileUtils.(mv|rm_r|mkdir_p)`）可以修改为重试一次，`Errno::EACCES`但这是最好的解决方案吗？

PS
对不起我的英语并随时提出任何问题，因为我试图尽可能简短地解释。在此先感谢您，至少您已经读到了最后；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:23:52.297

寻找根本原因，不要屈服于您提到的解决方法。

首先确保您使用`before`and`after`来设置和拆除文件固定装置。如果您在规范本身中编写设置和拆卸过程，则在测试失败时您将面临无法运行的风险。

其次，确保您的设置和拆卸过程为每个测试创建不同的文件和目录。如果您所做的只是阅读，则可以使用共享设备，但对于所有其他事情（移动、创建、附加、删除），请使用新的文件/目录。最好的办法是使用新生成的临时文件和目录。它将使您的测试独立，甚至允许并行运行它们。

第三，检查哪些其他进程可能使用您的测试创建/使用的文件。我不知道您的设置，这完全取决于此，但可能是 Web 服务器、浏览器（例如通过 selenium）、邮件服务器等。只需检查您在构建过程中运行的其他进程。*

# linux - 在 Linux 上删除多个文件的部分文件名

> ID：12174947
> 
> 赞同：56
> 
> 时间：2012-08-29T09:38:56.733
> 
> 标签：linux, bash, shell

我想从当前目录中的所有文件名中删除**test.extra**

```
for filename in *.fasta;do 

    echo $filename | sed \e 's/test.extra//g'

done 
```

但它抱怨没有创建 file.echo 是为了确保它正确列出。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-08-29T09:50:24.443

首先使用 'sed -e' 而不是 '\e'

我建议你在 bash 中这样做

```
for filename in *.fasta; do 
    [ -f "$filename" ] || continue
    mv "$filename" "${filename//test.extra/}"

done 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-08-29T09:55:23.410

尝试`rename "extra.test" "" *`

或者`rename 's/extra.test//;' *`

```
$ find
./extra.test-eggs.txt
./extra.testbar
./fooextra.test
./ham-extra.test-blah

$ rename "extra.test" "" *
$ find
./-eggs.txt
./bar
./foo
./ham--blah 
```

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2015-03-12T02:27:48.500

我知道这个胎面很旧，但是下面的 oneliner，从经过验证的答案中得到启发，对我帮助很大；）

```
for filename in ./*; do mv "./$filename" "./$(echo "$filename" | sed -e 's/test.extra//g')";  done 
```

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2012-08-29T09:46:11.753

试试`rename`命令：

```
rename 's/test.extra//g' *.fasta 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-29T13:10:12.813

```
$ mmv '*test.extra*.fasta' '#1#2.fasta' 
```

这是安全的，因为`mmv`如果它会覆盖现有文件（有命令行选项可以关闭它），它根本不会做任何事情。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-03-05T07:36:58.653

```
 // EXTENSION - File extension of files
 // STRING - String to be Replace

      for filename in *.EXTENSION;
      do  [ -f "$filename" ] || continue;  
      mv "$filename" "${filename//STRING/}"; 
      done 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-12-29T13:18:56.603

在**Kali linux**中重命名命令是*rename.ul*

rename.ul 'string-to-remove' 'string-to-replace-with' *.jpg

例如： rename.ul 'useless-string' '' *.jpg 这将从所有 jpg 图像的文件名中删除无用字符串。

# java - 仅当文件已更改时，如何才能下载文件？

> ID：12174948
> 
> 赞同：2
> 
> 时间：2012-08-29T09:38:58.753
> 
> 标签：java

我正在制作一个程序，它是游戏私人服务器的启动器。如果我更改服务器，我必须更改客户端，所以我希望它只下载更改的文件，而不是覆盖旧文件。我正在使用保管箱来存储文件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T09:43:09.993

在 Java 7 中，您可以使用[WatchService获取通知](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)

使用此 API，您可以注册各种事件

```
ENTRY_CREATE – A directory entry is created.
ENTRY_DELETE – A directory entry is deleted.
ENTRY_MODIFY – A directory entry is modified.
OVERFLOW – Indicates that events might have been lost or discarded. You do not have to register for the OVERFLOW event to receive it. 
```

以下代码片段显示了如何为所有三种事件类型注册 Path 实例：

```
import static java.nio.file.StandardWatchEventKinds.*;

Path dir = ...;
try {
WatchKey key = dir.register(watcher,
                       ENTRY_CREATE,
                       ENTRY_DELETE,
                       ENTRY_MODIFY);
} catch (IOException x) {
 System.err.println(x);
} 
```

使用 WatchEvent，您可以调用适当的通知到您的应用程序文件已更改并下载它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T09:41:14.183

使用数据库在服务器端维护文件版本或进行校验和以识别修改后的文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T09:48:23.077

I'd start by taking a look at the [Dropbox SDK](https://www.dropbox.com/developers/reference/sdk)

I'd also make sure that each file on the server has a MD5 (other checksum) associated with it. You could download these checksums and compare them to the files you have installed on your local machine. If any of the checksums are different, then you can download the file you need.

Have a look at [How can I generate an MD5 hash?](https://stackoverflow.com/questions/415953/generate-md5-hash-in-java) and [How do I generate an MD5 digest for a file](http://www.avajava.com/tutorials/lessons/how-do-i-generate-an-md5-digest-for-a-file.html)

# c# - 运行时编译 CSharp。是否可以从运行时代码访问主程序的字段？

> ID：12174955
> 
> 赞同：1
> 
> 时间：2012-08-29T09:39:18.563
> 
> 标签：c#, compilation, runtime

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.CSharp;
using System.CodeDom.Compiler;
using System.Reflection;

namespace ConsoleApplication1
{
    class Program
    {
        public int xx = 1; // variable I want to access from the runtime code

        static void Main(string[] args)
        {            
            CSharpCodeProvider provider = new CSharpCodeProvider();
            CompilerParameters parameters = new CompilerParameters();
            parameters.GenerateInMemory = true;
            parameters.ReferencedAssemblies.Add("System.dll");

            CompilerResults results = provider.CompileAssemblyFromSource(parameters, GetCode());
            var cls = results.CompiledAssembly.GetType("ConsoleApplication1.Program");
            var method = cls.GetMethod("DynamicMethod", BindingFlags.Static | BindingFlags.Public);
            method.Invoke(null, null);

            int a = int.Parse(Console.ReadLine()); // pause console
        }       

        static string[] GetCode()
        {
            return new string[]
            {
            @"using System;

            namespace ConsoleApplication1
            {
                class Program
                {
                    public static void DynamicMethod()
                    {                        
                        Console.WriteLine(""Hello, world!"");
                    }
                }
            }"
            };
        }
    }
} 
```

我想知道是否可以从 runetime 代码中访问变量**int xx （例如，将 xx = 2; 放在“hello world”之后。那太棒了谢谢 :)**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T09:53:28.450

是的，您可以提供它，但您需要：

*   添加对包含的程序集的引用`xx`（为方便起见，我将其称为此程序集`StaticAssembly`- 所以它可能`StaticAssembly.exe`是正在运行的控制台 exe）
*   `Program`输入`StaticAssembly`一个类型，以便`public`它可以访问
*   要么做成`xx`一个`static`字段，要么实例化一个实例`Program`并以某种方式将其传递给动态代码

例如，以下工作（我正在使用“实例化实例并传递它”方法，所以我添加了一个参数`DynamicMethod`）：

```
using System;
using System.CodeDom.Compiler;
using System.Reflection;
using Microsoft.CSharp;

namespace StaticAssembly
{
    public class Program
    {
        public int xx = 1; // variable I want to access from the runtime code

        static void Main(string[] args)
        {
            CSharpCodeProvider provider = new CSharpCodeProvider();
            CompilerParameters parameters = new CompilerParameters();
            parameters.GenerateInMemory = true;
            parameters.ReferencedAssemblies.Add("System.dll");
            parameters.ReferencedAssemblies.Add("StaticAssembly.exe");

            CompilerResults results = provider.CompileAssemblyFromSource(parameters, GetCode());
            var cls = results.CompiledAssembly.GetType("GeneratedAssembly.Program");
            var method = cls.GetMethod("DynamicMethod", BindingFlags.Static | BindingFlags.Public);
            var p = new Program();
            p.xx = 42;
            method.Invoke(null, new object[] {p});

            int a = int.Parse(Console.ReadLine()); // pause console
        }

        static string[] GetCode()
        {
            return new string[]
            {
            @"using System;

            namespace GeneratedAssembly
            {
                class Program
                {
                    public static void DynamicMethod(StaticAssembly.Program p)
                    {                        
                        Console.WriteLine(p.xx);
                        Console.WriteLine(""Hello, world!"");
                    }
                }
            }"
            };
        }
    }
} 
```

# excel - 使用 OI-3.5-FINAL 将多行写入 EXCEL

> ID：12174958
> 
> 赞同：0
> 
> 时间：2012-08-29T09:39:28.607
> 
> 标签：excel, file-io, apache-poi

我有一些数据可以将它们放入 Excel 表中，4 个值，n 行。我试过这个：

```
final HSSFWorkbook wb = new HSSFWorkbook();
final HSSFSheet sheet = wb.createSheet();
FileOutputStream stream;
HSSFRow row = null;
try {
    stream = new FileOutputStream(targetDirectory + "workbook.xls");

    for (int i = 1; i < data.size(); i++) {

        row = sheet.createRow((short) i);
        cell = row.createCell(0);
        cell.setCellValue("Das");
        cell = row.createCell(1);
        cell.setCellValue("hier");
        cell = row.createCell(2);
        cell.setCellValue("soll");
        cell = row.createCell(3);
        cell.setCellValue("rein");
        wb.write(stream);

    }

    stream.close();

} catch ... 
```

在写入 EXCEL 文件时，我可以看到大小增加到 1.600 kB。当我打开工作表时，我看到一行。关闭文件而不保存将大小减小到 4 kB。似乎所有的行都在那里但不可见？

任何想法，我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:01:12.100

我不知道为什么，但你似乎在每一行上写出工作簿，总是写在同一个文件中。这意味着您最终会在同一个文件中获得工作簿的多个副本，这根本不是您想要的！

将`wb.write`呼叫移到最后，它应该一切正常。Excel 是二进制格式，它不像 CSV，所以你应该只在完成后才写出文件

# c++ - Blackmagic 框架：从 yuv 转换为 RGB 以在 openCV 中使用

> ID：12174961
> 
> 赞同：0
> 
> 时间：2012-08-29T09:39:29.433
> 
> 标签：c++, opencv, rgb, yuv

我在将相机捕获的 YUV 格式的图像转换为 RGB 格式时遇到问题。

用于执行此操作的功能如下：

```
int uwidth = 1920;
int uheight= 1080;

int i = 0,j = 0, r = 0, g = 0, b = 0;
typedef unsigned char BYTE;
IplImage* m_RGB = cvCreateImage(cvSize(uwidth, uheight), IPL_DEPTH_8U, 3);
unsigned char* pData = (unsigned char *) frameBytes;

for(i = 0, j=0; i < uwidth * uheight*3 ; i+=6, j+=4)
{
   unsigned char u = pData[j];
   unsigned char y = pData[j+1];
   unsigned char v = pData[j+2];

   b = 1.0*y + 8 + 1.402*(v-128);
   g = 1.0*y - 0.34413*(u-128) - 0.71414*(v-128);
   r = 1.0*y + 1.772*(u-128);

   if(r>255) r =255;
   if(g>255) g =255;
   if(b>255) b =255;
   if(r<0)   r =0;
   if(g<0)   g =0;
   if(b<0)   b =0;

   m_RGB->imageData[i] = (BYTE)(r*220/256);
   m_RGB->imageData[i+1] = (BYTE)(g*220/256);
   m_RGB->imageData[i+2] =(BYTE)(b*220/256);

}

cvNamedWindow("ck", CV_WINDOW_AUTOSIZE);
cvShowImage( "ck", m_RGB );
cvReleaseImage(&m_RGB); 
```

问题是我的屏幕上的窗口中没有一张而是两张图像，而且我们有很好的颜色但不是很好的比例。

有人知道这些问题吗？

**编辑：** [图像输出](http://i.stack.imgur.com/2oky6.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-01T05:24:56.547

如果您正在为 Mac 编程，请查看最近在 OSX 10.9 甚至 10.10 中添加的 vImage 转换库。里面的东西真的很震撼。我正在自己进行 24 位到 32 位的转换，并将其磨练到大约 6 毫秒/帧 (1920x1080)。被 vImage 超过 15X 及时吹出水面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T10:13:32.220

假设`imageData`定义为

```
BYTE* imageData; 
```

在这种情况下，这个循环说明了很多：

`for(i = 0, j=0; i < uwidth * uheight*3 ; i+=6, j+=4)`

`i+=6`意味着每次设置一个像素时，您将跳过下一个像素（或者您希望执行的操作，一次设置 2 个像素）。

```
j+=4
unsigned char u = pData[j];
unsigned char y = pData[j+1];
unsigned char v = pData[j+2]; 
```

表示您的相机格式为[UYVY](http://www.fourcc.org/yuv.php#UYVY)：

*   它描述了两个连续的像素 P0 和 P1
*   P0 和 P1 的色度通道相同。`U = U0 = U1`和`V = V0 = V1`
*   发光通道不同。第一个用于 P0，第二个用于 P1。

您需要通过迭代设置 2 个像素：

```
m_RGB->imageData[i] = r1;
m_RGB->imageData[i+1] = g1;
m_RGB->imageData[i+2] =b1;
m_RGB->imageData[i+3] = r2;
m_RGB->imageData[i+4] = g2;
m_RGB->imageData[i+5] =b2; 
```

`r1`和（和其他）之间的区别在于您在转换公式中`r2`使用了两个不同的。`Y`

# file-io - 将 IRandomAccessStream 获取到 Windows Store App 中的文件

> ID：12174967
> 
> 赞同：1
> 
> 时间：2012-08-29T09:39:45.857
> 
> 标签：file-io, windows-store-apps

我需要将 IRandomAccessStream 放到没有选择器的文件中。

但是，我坚持使用 IStorageFile 或 IRandomAccessStreamReference 并且找不到从其中任何一个获取 IRandomAccessStream 的方法。

我用 C++（没有 /ZW）编写代码，但我认为在这种情况下并不重要。

请帮忙，摩西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:58:16.423

我设法使用 StorageFile 的 OpenReadAsync 做我想做的事。但这涉及 2 个异步调用并且很麻烦。我想知道是否有更短更优雅的方式。相关示例代码如下：

```
IFACEMETHODIMP MyClass::BeginCreateObject( 
    //... rest of parameters
    _In_ IMFAsyncCallback *pCallback,
    _In_ IUnknown *punkState)
{
    OutputDebugStringW(__FUNCTIONW__);
    HRESULT hr;

    HString hstrStorageFile;
    hstrStorageFile.Set(RuntimeClass_Windows_Storage_StorageFile);

    // Get the Activation Factory
    ComPtr<IActivationFactory> pStorageFileActivationFactory;
    hr = GetActivationFactory(hstrStorageFile.Get(), &pStorageFileActivationFactory);
    if (FAILED(hr))
    {
        ::Microsoft::WRL::Details::RaiseException(hr);
    }

    // QI for StorageFileStatics
    ComPtr<IStorageFileStatics> pStorageFileStatics;
    hr = pStorageFileActivationFactory.As(&pStorageFileStatics);
    if (FAILED(hr))
    {
        ::Microsoft::WRL::Details::RaiseException(hr);
    }

    HString hstrFileName;
    hstrFileName.Set(L"My_Cool_Movie.ts");

    // Call CreateFileAsync
    __FIAsyncOperation_1_Windows__CStorage__CStorageFile * operation;    
    hr = pStorageFileStatics->GetFileFromPathAsync(hstrFileName.Get(),
        &operation
        );
    if (FAILED(hr))
    {
        ::Microsoft::WRL::Details::RaiseException(hr);
    }

    typedef IAsyncOperationCompletedHandler<StorageFile*> HandlerDoneType; 
    ComPtr<HandlerDoneType> handler(Callback<HandlerDoneType>( 
        this, &MyClass::FileOpenCompletionHandler)); 
    hr = operation->put_Completed(handler.Get()); 

   ComPtr<IMFAsyncResult> spResult;

   //maybe I should pass some data in the first parameter?
   hr = MFCreateAsyncResult(nullptr, pCallback, punkState, &_spOpenResult);

   //the further processing will be done in the completion handler
    return  hr;
}

IFACEMETHODIMP MyClass::EndCreateObject( 
    _In_ IMFAsyncResult *pResult,
    _Out_  MF_OBJECT_TYPE *pObjectType,
    _Out_  IUnknown **ppObject)
{
    OutputDebugStringW(__FUNCTIONW__);
    if (pResult == nullptr || pObjectType == nullptr || ppObject == nullptr)
    {
        return E_INVALIDARG;
    }

    HRESULT hr = S_OK;
    //get a random access stream 
    if(!_spFile)
    {
        return E_FAIL;
    }

    ComPtr<IRandomAccessStream> streamHandle;
    hr = _spStream.As(&streamHandle);
    if (FAILED(hr))
    {
        ::Microsoft::WRL::Details::RaiseException(hr);
    }

    //Do what you need with IRandomAccessStream!
    //...

    return S_OK;
}

IFACEMETHODIMP MyClass::CancelObjectCreation( 
    _In_ IUnknown *pIUnknownCancelCookie)
{
    return E_NOTIMPL;
}

HRESULT MyClass::FileOpenCompletionHandler( IAsyncOperation<StorageFile*>* async, AsyncStatus status)
{
    //file is open, call the invoke to carry one

    if (status == Completed) { 
        HRESULT hr = async->GetResults(_spFile.GetAddressOf()); 

        if (_spFile) { 
            ComPtr<IRandomAccessStreamReference> streamReference;
            hr = _spFile.As(&streamReference);
            if (FAILED(hr))
            {
                ::Microsoft::WRL::Details::RaiseException(hr);
            }

            __FIAsyncOperation_1_Windows__CStorage__CStreams__CIRandomAccessStreamWithContentType * operation;    
            hr = streamReference->OpenReadAsync(&operation);

            if (FAILED(hr))
            {
                ::Microsoft::WRL::Details::RaiseException(hr);
            }

            typedef IAsyncOperationCompletedHandler<IRandomAccessStreamWithContentType*> OpenReadAsyncHandlerDoneType; 
            ComPtr<OpenReadAsyncHandlerDoneType> handler(Callback<OpenReadAsyncHandlerDoneType>( 
                this, &MyClass::FileOpenReadCompletionHandler)); 

            hr = operation->put_Completed(handler.Get()); 
        }

        return hr;
    }
    else { 
        OutputDebugStringW(L"Unexpected async status\n");
        return E_FAIL;
  } 

    return S_OK;
}

HRESULT MyClass::FileOpenReadCompletionHandler( IAsyncOperation<IRandomAccessStreamWithContentType*>* async, AsyncStatus status)
{
    if (status == Completed) { 
        HRESULT hr = async->GetResults(_spStream.GetAddressOf()); 

        if (_spStream) { 
            _spOpenResult->SetStatus(S_OK);
            hr = MFInvokeCallback(_spOpenResult.Get());
            _spOpenResult.ReleaseAndGetAddressOf();
        }
        return hr;
    }
    else { 
        OutputDebugStringW(L"Unexpected async status\n");
        return E_FAIL;
  } 

    return S_OK;
} 
```

# php - 创建一个类的所有常量的数组？

> ID：12174971
> 
> 赞同：4
> 
> 时间：2012-08-29T09:40:04.713
> 
> 标签：php, arrays, class-constants

我正在使用一个定义了近 20 个常量的类，因为我想要一个数组中的所有这些常量值，我只想知道

**是否有任何方法可以创建一个类的所有常量的数组？**

我尝试使用[紧凑](http://in2.php.net/manual/en/function.compact.php)但它不适用于常量。

```
class Alpha
{
 const ONE = 'fixone'; 
 const TWO = 'fix_two';
 const THREE = 3     

   public function __construct()
   {
     protected $arr_constant = compact(ONE,TWO,THREE); // gives FATAL Error
     // is there any method which collect all consant and create an array?
     protected $arr_contact = get_all_constant(__CLASS__); 
     var_dump($arr_constant);
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T09:42:01.407

```
$ref = new ReflectionClass('Alpha');
var_dump($ref->getConstants()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T09:41:40.110

使用： http: [//php.net/manual/en/function.get-defined-constants.php](http://php.net/manual/en/function.get-defined-constants.php)

并且： http: [//php.net/manual/en/reflectionclass.getconstants.php](http://php.net/manual/en/reflectionclass.getconstants.php)

# python - 已安装的 Python 应用程序和 Google 客户端 ID

> ID：12174972
> 
> 赞同：8
> 
> 时间：2012-08-29T09:40:06.317
> 
> 标签：python, oauth-2.0, google-tasks-api

我是 python 初学者，我想做一个基本的谷歌任务客户端。这将是一个原生应用程序。我不明白的一点是如何保持“客户机密”实际上是机密的，因为它要包含在程序代码中。

我搜索并找到了一个帖子，引用了谷歌论坛的帖子，并且基本上建议将其赠送。

我花了几个小时试图得到这个东西，但是，我现在没有答案。所以，我有两个问题要问：

1.  泄露客户秘密的后果是什么？
2.  如果让人们看到秘密是危险的，有没有办法保密，或者，有没有办法进行经典登录以支持应用程序特定密码登录谷歌帐户？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T10:51:11.817

我假设您在谈论 OAuth。

是的，你嵌入了秘密——但不，这不是真正的秘密；在此处查看另一篇文章：[OAuth - 在您的应用程序中嵌入客户端密码？](https://stackoverflow.com/questions/6737918/oauth-embedding-client-secret-in-your-application).

谷歌的文档实际上也说了同样的话；来自：[https ://developers.google.com/accounts/docs/OAuth2#installed](https://developers.google.com/accounts/docs/OAuth2#installed)

> 注册时获取的 client_id 和 client_secret 嵌入到你的应用程序的源代码中。在这种情况下，client_secret 显然不被视为秘密。

并且试图保护它是没有意义的——它必须通过网络到达谷歌，任何拥有[Fiddler](http://www.fiddler2.com/fiddler2)等的人都可以以纯文本形式观看它。

至于影响：我相信客户秘密背后的想法是保护客户供应商（就是你）。从理论上讲，如果我知道你的客户端密钥和秘密，我可以制作一个恶意网站/客户端，让用户合法登录，然后删除他们的所有任务，看起来你有责任。使用 Web 服务进行防御可能是有意义的，但对于已安装的客户端，用户可能是从某个地方（应用商店、网站等）下载的，希望确保它是合法的。

# asp.net - 在 Asp.net 日历中显示美国服务器的 IST 日期和时间

> ID：12174979
> 
> 赞同：0
> 
> 时间：2012-08-29T09:40:31.417
> 
> 标签：asp.net

我有一个 asp.net 日历，用于显示从访问数据库中获取的事件。它工作正常，但由于服务器是基于美国的，因此根据印度标准时间 (IST)，它会在当天下午 12:30（实际 IST 时间后 11 小时 30 分钟）后更改。对于使用它的人来说，这有点令人困惑。

我想要一个解决方案，以便日历在正确的时间更改为今天的日期，即 IST 上午 12:00。或者您可能会说服务器的时间应该增加 11 小时和 30 分钟，以便根据 IST 显示日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T05:27:53.380

解决了！！！

声明了一个 DateTime 变量并使用 DateTime.UtcNow，将 5 小时和 30 分钟添加到结果中。然后这个结果 DateTime 被用作今天的日期。

```
DateTime todayDate = new DateTime();
todayDate = DateTime.UtcNow.AddHours(5).AddMinutes(30);
Calendar1.TodaysDate = todayDate; 
```

# mysql - MySQL - 组合/支点

> ID：12174980
> 
> 赞同：1
> 
> 时间：2012-08-29T09:40:33.910
> 
> 标签：mysql, pivot, combinations

我有一个与这个非常相似的问题：
[How to pivot a MySQL entity-attribute-value schema](https://stackoverflow.com/questions/649802/how-to-pivot-a-mysql-entity-attribute-value-schema)
or this one
[Enumerating combination via SQL](https://stackoverflow.com/questions/9220310/enumerating-combinations-via-sql)

我有两张桌子：

### 变化

```
ID | item_id | name
=================================
 1 | 1       | color
 2 | 1       | size
 3 | 1       | material
 4 | 1       | lenght
================================== 
```

### 变异数据

```
ID | variation_id | value
=================================
 1 | 1            | red
 2 | 1            | white
 3 | 1            | black
 4 | 2            | s
 5 | 2            | m
 6 | 3            | cotton
 7 | 4            | 100
================================== 
```

名称和值是用户输入。
每个项目最多有 4 个变体，每个变体有 n 个值。

### 一些测试数据

```
CREATE TABLE variations ( id int PRIMARY KEY, item_id int, name varchar(50));
INSERT INTO variations (id, item_id, name) 
VALUES (1, 1, 'color'),
       (2, 1, 'size'),
       (3, 1, 'material'),
       (4, 1, 'length');

CREATE TABLE variation_data ( id int PRIMARY KEY, variation_id int, val varchar(50));
INSERT INTO variation_data (id, variation_id, value) VALUES
  (1, 1, 'red'),
  (2, 1, 'white'),
  (3, 1, 'black'),
  (4, 2, 's'),
  (5, 2, 'm'),
  (6, 3, 'cotton'),
  (7, 4, '100'); 
```

### 期望的结果：

```
red     S   cotton  100
red     M   cotton  100
white   S   cotton  100
white   M   cotton  100
black   S   cotton  100
black   M   cotton  100 
```

不幸的是，我无法解决这个问题。
我希望你能给我一个提示。

谢谢你的支持！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T06:02:52.073

我可以建议你这个查询 -

```
SELECT v.item_id,
  GROUP_CONCAT(IF(v.name = 'color', vd.val, NULL)) color,
  GROUP_CONCAT(IF(v.name = 'size', vd.val, NULL)) size,
  GROUP_CONCAT(IF(v.name = 'material', vd.val, NULL)) material,
  GROUP_CONCAT(IF(v.name = 'length', vd.val, NULL)) length
FROM variations v
  JOIN variation_data vd
    ON vd.variation_id = v.id
GROUP BY v.item_id 
```

它不会返回所需的结果，但会“旋转”。

# c# - 在 C# 的 while 循环中嵌套 StreamReader 和 StreamWriter

> ID：12174981
> 
> 赞同：0
> 
> 时间：2012-08-29T09:40:35.203
> 
> 标签：c#, streamreader, streamwriter

我正在编写一个代码，其中有一个文本文件，其中包含 10000 多行唯一键（每个键在一个新行中）。我需要将密钥与我提供的 ProductID 和 ProductFeatures 一起插入表中。

我通过使用以下代码实现了这一点，该代码检查表中已经存在的键并减少键的冗余（表中没有键会出现两次）。

```
public void reader(string productid,string productfeature)
{
    con.Open();
    using (StreamReader sr = new StreamReader(Server.MapPath("keys.txt")))
    {
        while(sr.Peek() >=0)
        {
            string str = sr.ReadLine();
            SqlCommand cmd = new SqlCommand("select count(newkey) from serialkey where newkey ='"+str.ToString()+"'", con);
            int keyvalue = Convert.ToInt32(cmd.ExecuteScalar());
            if (keyvalue == 0)
            {
                com = new SqlCommand("insert into SerialKey (productid,productfeatures,newkey) values ('" + productid.ToString() + "','" + productfeature.ToString() + "','" + key + "')", con);
                com.ExecuteNonQuery();
            }
        }
    }
    con.Close();
} 
```

这段代码对我来说绝对没问题，但是我决定在这个过程中做一些修改。

1.  只要将密钥插入表中，就应该从文本文件中删除密钥（行）。

为此，我想我必须在同一个 while 循环中使用 StreamWriter/Textwriter，所以我尝试使用此代码。

```
using (StreamReader sr = new StreamReader(Server.MapPath("keys.txt")))
{
    while (sr.Peek() >= 0)
    {
        string str = sr.ReadLine();
        SqlCommand cmd = new SqlCommand("select count(newkey) from serialkey where newkey ='" + str.ToString() + "'", con);
        int keyvalue = Convert.ToInt32(cmd.ExecuteScalar());

        if (keyvalue == 0)
        {
            string line = null;
            sr.Close();
            TextWriter writer = new StreamWriter(Server.MapPath("keys.txt"), true);
            if (insert(productid, productfeature, str))
            {
                if (str != null)
                {
                    writer.WriteLine(line);
                }
                writer.Flush();
                writer.Close();
            }                    
        }
    }
} 
```

我想我已经使用了正确的逻辑来删除已插入的行。如果我保留代码行

```
sr.Close(); 
```

我收到以下错误

> “无法从关闭的 TextReader 中读取。”

如果我删除线

```
sr.Close(); 
```

我得到错误

> “该进程无法访问文件 'myfolderpath\keys.txt'，因为它正被另一个进程使用。”

是否可以在 whileloop 中使用 StreamReader 和 StreamWriter 的嵌套。最后，我必须删除刚刚插入到表中的行。

提前致谢，

维克内什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T09:56:34.063

问题归结为在您阅读文件时写入文件。

在某个最大可能文件大小以下，最简单的方法是首先将整个内容读入内存，这样你就有了一个可以使用的行列表。只需添加将保留到列表中的行，并在关闭阅读器后编写它们。

达到一定大小后，会占用太多内存，但您可以写入不同的文件，然后将其复制到旧文件上。

我会举个例子，但代码的其他问题意味着我无法完全弄清楚你在做什么（`line`始终为空，但正在写入，`str`永远不会为空，但会检查以防万一）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:51:39.090

我仍然无法对从 keys.txt 文件中获取内容的方法进行排序，然后将密钥插入到我的表中，然后从 keys.txt 文件中删除行（其中存在密钥）。一旦将特定的密钥插入表中，就应该从 txt 文件中删除一个密钥，但不知何故，我以另一种方式排序，但我认为它不够有效。

在这里，我获取所有键并将它们存储在一个数组中，然后使用 foreach 循环将它们插入，然后清除 txt 文件的内容。

但由于性能问题，我仍然更喜欢前一种方法。然而任何人都可以尝试这段代码。

从文件 keys.txt 中获取 3000 行密钥然后将它们插入表中的时间延迟大约需要 8 秒。

我仍然在以下几行中引用源代码

```
using (StreamReader sr = new StreamReader(Server.MapPath("keys.txt")))
    {

        string keys = sr.ReadToEnd();
        string[] allkeys = Regex.Split(keys, "\r\n");
        foreach (string values in allkeys)
        {
            SqlCommand cmd = new SqlCommand("select count(newkey) from serialkey where newkey ='" + values.ToString() + "'", con);
            int keyvalue = Convert.ToInt32(cmd.ExecuteScalar());

            if (keyvalue == 0)
            {
                com = new SqlCommand("insert into SerialKey (productid,productfeatures,newkey) values ('" + productid.ToString() + "','" + productfeature.ToString() + "','" + key + "')", con);
                com.ExecuteNonQuery();
            }

        }
        sr.Close();
        File.WriteAllText(Server.MapPath("keys.txt"), string.Empty);
} 
```

希望这段代码可以帮助有同样问题的人。这对我来说只是另一种方式，而不是我的查询的解决方案。

# javascript - 使用 PhoneGap 和 jQuery Mobile 在 android 设备上显示动态列表视图

> ID：12174982
> 
> 赞同：0
> 
> 时间：2012-08-29T09:40:46.827
> 
> 标签：javascript, ajax, cordova, jquery-mobile

我的代码有问题。它适用于 Chrome，但不适用于 Android，甚至 alert("test") 也不会被调用。我使用PhoneGap制作了apk。我也使用 jQuery Mobile。我错过了什么？有没有其他方法可以根据来自 json 响应的数据制作动态列表视图？

谢谢你的回答。

```
$( document ).bind( "mobileinit", function(){
    $.support.cors = true;
    $.mobile.allowCrossDomainPages = true;
    $.mobile.loadingMessageTextVisible = true; 
    $.mobile.showPageLoadingMsg();
})

$( document ).ready(function (){

$.support.cors = true;
$.mobile.allowCrossDomainPages = true;
e.preventDefault();
    alert("test");//-----------------------------------------------

        $.ajax({                                                                   
        crossDomain: true,
        type: 'GET',
        url: 'http://ip/services/rest/contact/list', 
        callback: 'jsonpCallback',
        jsonpCallback: 'jsonpCallback',
        jsonp: '_jsonp',
        contentType:  'application/json',
        dataType: 'jsonp json',
        timeout : 10000,

        success: function(data){
            var html ='';
            alert("data.firstName");
            $.each(data, function(key, data) {
            html += '<li><a class=contact href="#" ><h1>' + data.label + '</h1><p>'+ data.customerName + '</p><p>' + data.phone + ', ' + data.email + '</p><p>' + data.id + '</p></a></li>';
            $('#ul_id').append($(html));
            html='';
            });
            $('#ul_id').trigger('create');    
            $('#ul_id').listview('refresh');
        },
        error: function (xhr, ajaxOptions, thrownError){
            alert("Status: " + xhr.status + ", Ajax option: " + ajaxOptions + ", Thrown error: " + thrownError);
            //location.reload();
        },
    }); 
; 
```

});

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T11:26:24.690

根据[jquerymobile 文档](http://jquerymobile.com/demos/1.1.1/docs/api/events.html)，您应该使用`$(document).bind('pageinit')`，而不是`$(document).ready()`。此外，当使用phonegap 时，您需要绑定到`deviceready'。

尝试将您的代码更改为以下内容：

```
document.addEventListener("deviceready", onDeviceReady, true);

$( document ).bind( "mobileinit", function(){
    $.support.cors = true;
    $.mobile.allowCrossDomainPages = true;
    $.mobile.loadingMessageTextVisible = true; 
    $.mobile.showPageLoadingMsg();
});

var onDeviceReady = function(){

$.support.cors = true;
$.mobile.allowCrossDomainPages = true;
e.preventDefault();
    alert("test");//-----------------------------------------------

    $.ajax({                                                                   
    crossDomain: true,
    type: 'GET',
    url: 'http://ip/services/rest/contact/list', 
    callback: 'jsonpCallback',
    jsonpCallback: 'jsonpCallback',
    jsonp: '_jsonp',
    contentType:  'application/json',
    dataType: 'jsonp json',
    timeout : 10000,

    success: function(data){
        var html ='';
        alert("data.firstName");
        $.each(data, function(key, data) {
        html += '<li><a class=contact href="#" ><h1>' + data.label + '</h1><p>'+ data.customerName + '</p><p>' + data.phone + ', ' + data.email + '</p><p>' + data.id + '</p></a></li>';
        $('#ul_id').append($(html));
        html='';
        });
        $('#ul_id').trigger('create');    
        $('#ul_id').listview('refresh');
    },
    error: function (xhr, ajaxOptions, thrownError){
        alert("Status: " + xhr.status + ", Ajax option: " + ajaxOptions + ", Thrown error: " + thrownError);
        //location.reload();
    },
}; 
```

# sql-server - IFilters 2.0 能否全文索引 Office 2007 文档中图表中的文本？

> ID：12174984
> 
> 赞同：3
> 
> 时间：2012-08-29T09:40:54.147
> 
> 标签：sql-server, full-text-search, office-2007, full-text-indexing, ifilter

我有一个包含 PowerPoint 演示文稿的全文目录。其中一些演示文稿包含图表，在这些情况下，图表通常是幻灯片上的主要内容。因此，在进行搜索时，我希望能够搜索图表中的文本（例如饼图上的标签、条形图上的类别等）。

我很失望（也很惊讶）发现这似乎不起作用。我可以在演示文稿本身中搜索文本，但不能搜索图表上的任何文本。

请告诉我，我需要更改某个设置！

[我已经为在 PowerPoint 中创建的图表以及在 Excel 中创建然后粘贴到 PowerPoint 中的图表进行了尝试。]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:23:42.040

Gary，Office 文档中的文本提取由[Office 过滤器包](https://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=17062)处理，因此，对于过滤器不解析的嵌入数据，全文无法执行任何操作。

我使用最新的 Office 过滤器成功地重现了我的 SQL Server 2012 安装中的问题。一个快速的解决方法是将标签/类别添加到每张幻灯片的注释部分，该部分会被解析和过滤并返回到全文索引器。

# android - Android webview 无法正确呈现 html 内容

> ID：12174991
> 
> 赞同：1
> 
> 时间：2012-08-29T09:41:27.137
> 
> 标签：android, webview

我完全不知道这是否是正确的方法，但是只要 webview 正在加载，我就会显示启动画面，当 webview 完成加载时，我会显示 webview。

但是 webview 的 HTML 内容没有正确呈现。它在我的 Android 手机以及我拥有的所有其他设备上的内置浏览器中正确显示内容。所以问题仅限于这个应用程序。

MainActivity.java

```
package dk.zerone.vuc;

import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.Bundle;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.graphics.Color;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class MainActivity extends Activity {

public final boolean networkCheck() {
    ConnectivityManager connec =  (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);

    if ( connec.getNetworkInfo(0).getState() == NetworkInfo.State.CONNECTED ||
    connec.getNetworkInfo(0).getState() == NetworkInfo.State.CONNECTING ||
    connec.getNetworkInfo(1).getState() == NetworkInfo.State.CONNECTING ||
    connec.getNetworkInfo(1).getState() == NetworkInfo.State.CONNECTED ) {
        return true;
    } else if (connec.getNetworkInfo(0).getState() == NetworkInfo.State.DISCONNECTED || connec.getNetworkInfo(1).getState() == NetworkInfo.State.DISCONNECTED  ) {
        return false;
    }
    return false;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    /* Splash screen */
    setContentView(R.layout.splash);

    if(networkCheck()) {

        String url = "http://mobil.vucfyn.dk/mobil";

        final WebView webview;
        webview = new WebView(MainActivity.this);
        webview.loadUrl(url);

        webview.setWebViewClient(new WebViewClient() {
            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                //view.loadUrl(url);
                return false;
            } 

            @Override
            public void onPageFinished(WebView view, String url) { 
                super.onPageFinished(view, url); 
                setContentView(webview);

             } 
        });

    } else {
        AlertDialog alertDialog = new AlertDialog.Builder(MainActivity.this).create();
        alertDialog.setTitle("Fejl");
        alertDialog.setMessage("Ingen forbindelse til internettet");

        alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {

            }
        });
        alertDialog.show();
    }
  }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
    } 
} 
```

LogCat 输出：

```
08-29 09:29:56.572: D/dalvikvm(545): GC_FOR_ALLOC freed 66K, 3% free 10191K/10503K, paused 58ms
08-29 09:29:56.579: I/dalvikvm-heap(545): Grow heap (frag case) to 11.036MB for 1048592-byte allocation
08-29 09:29:56.640: D/dalvikvm(545): GC_CONCURRENT freed 1K, 4% free 11214K/11591K, paused 4ms+4ms
08-29 09:29:56.849: I/WebView(545): webview.loadUrl(url)
08-29 09:29:57.139: D/gralloc_goldfish(545): Emulator without GPU emulation detected.
08-29 09:29:57.849: E/chromium(545): external/chromium/net/disk_cache/backend_impl.cc:1097: [0829/092957:ERROR:backend_impl.cc(1097)] Critical error found -8
08-29 09:29:58.029: W/chromium(545): external/chromium/net/disk_cache/storage_block-inl.h:119: [0829/092958:WARNING:storage_block-inl.h(119)] Failed data load.
08-29 09:29:58.029: W/chromium(545): external/chromium/net/disk_cache/storage_block-inl.h:119: [0829/092958:WARNING:storage_block-inl.h(119)] Failed data load.
08-29 09:29:58.039: W/chromium(545): external/chromium/net/disk_cache/storage_block-inl.h:119: [0829/092958:WARNING:storage_block-inl.h(119)] Failed data load.
08-29 09:29:58.059: E/chromium(545): external/chromium/net/disk_cache/entry_impl.cc:830: [0829/092958:ERROR:entry_impl.cc(830)] Failed to save user data
08-29 09:30:00.349: E/libEGL(545): call to OpenGL ES API with no current context (logged once per thread)
08-29 09:30:00.360: D/ShaderProgram(545): couldn't load the vertex shader!
08-29 09:30:00.360: E/libEGL(545): call to OpenGL ES API with no current context (logged once per thread)
08-29 09:30:00.360: D/ShaderProgram(545): couldn't load the vertex shader!
08-29 09:30:00.360: E/libEGL(545): call to OpenGL ES API with no current context (logged once per thread)
08-29 09:30:00.360: D/ShaderProgram(545): couldn't load the vertex shader!
08-29 09:30:00.360: E/libEGL(545): call to OpenGL ES API with no current context (logged once per thread)
08-29 09:30:00.360: D/ShaderProgram(545): couldn't load the vertex shader!
08-29 09:30:00.360: E/libEGL(545): call to OpenGL ES API with no current context (logged once per thread)
08-29 09:30:00.360: D/ShaderProgram(545): couldn't load the vertex shader! 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T10:14:53.883

如果该网站有 javascript，则您缺少此行：

```
webView.getSettings().setJavaScriptEnabled(true); 
```

如果您的目标高于 2.3.3，请尝试将其添加到清单文件中。

```
android:hardwareAccelerated="true" 
```

# java - 确保 Spring 上下文在 ThreadPoolTask Executor 测试期间保持活动状态的智能方法

> ID：12174993
> 
> 赞同：4
> 
> 时间：2012-08-29T09:41:28.900
> 
> 标签：java, multithreading, spring, junit, threadpool

我们试图在我们的应用程序的多线程部分和数据库访问之间实现一种保证，以便数据库不会受到太多线程（客户要求）的影响，同时保持系统的其他部分充分利用有必要数量的线程。

设计似乎可以工作（弹簧批处理分区+使用 ThreadPoolTask​​Executor 处理数据访问），但问题在于测试设计（基于[http://helenaedelson.com/?p=432](http://helenaedelson.com/?p=432)）。

现在，我必须将 Thread.sleep(4000) 添加到我的单元测试中，以确保在生成的额外线程发生更改以完成其工作并返回返回值之前，Spring 上下文不会从测试中被杀死到主线程。

有人会对如何使这个测试实现更智能有一些更好的想法吗？

测试者：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration({ "classpath:partitionJdbcJob.xml" })
@DirtiesContext(classMode = ClassMode.AFTER_CLASS)
public class TaskTests {
protected static final Logger logger = LoggerFactory.getLogger(TaskTests.class);

@Autowired
private OrderServiceImpl orderService;

@Test
public void testExecution() {
    logger.info("Starting execution thread...");

    for (int i = 0; i < 8; i++) {
        orderService.dispatch();
    }

    try {
        // So that spring context is not destroyed from under the multi-threaded runnables
        Thread.sleep(4000);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
} 
```

}

测试服务：

```
@Service("orderServiceImpl")
public class OrderServiceImpl {
protected static final Logger logger = LoggerFactory.getLogger(OrderServiceImpl.class);

@Resource(name = "beanTaskExecutor")
private TaskExecutor taskExecutor;
// private AsyncTaskExecutor taskExecutor;

CompletionService completionService;

@Autowired
public void OrderServiceImpl(DataSource dataSource) {
    completionService = new ExecutorCompletionService(taskExecutor);
}

public void dispatch(final RetailPriceOptimization order) {
    logger.info("Starting dispatch execution...");

    if (this.taskExecutor != null) {
        logger.info("taskExecutor found...");
        this.taskExecutor.execute(new Runnable() {
            public void run() {
                withExecutor(order);
            }
        });
    }

    try {
        Object future1 = completionService.take().get();
        Object future2 = completionService.take().get();
    } catch (InterruptedException e) {
        e.printStackTrace();
    } catch (ExecutionException e) {
        e.printStackTrace();
    }
    logger.info("Completed dispatch execution...");
}

private void withExecutor(final RetailPriceOptimization order) {
    logger.info("Starting withExecutor execution...");

    Object result1 = completionService.submit(new Callable<String>() {
        public String call() {
            return findById("0000dd2gsl1u1546");
        }
    });
    Object result2 = completionService.submit(new Callable() {
        public Object call() {
            return orderDao.find(new Long("16"));
        }
    });
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-13T18:57:25.440

现在您的测试似乎是同步的，因为您`completionService .take()`在方法内部调用了两次`dispatch(...)`。将`take()`等到作业完成。所以当我读到它时，你根本不需要你的线程睡眠。

另外，我认为根本不需要`CompletionService`。您应该只保留 2 个期货，然后`get(...)`一次调用它们。似乎您无论如何都在等待 2 个调用完成，它们将同时运行。 `CompletionService`只有当您可以立即开始处理其中一个结果时，它们才是好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-13T19:20:05.960

你不尝试重构你的服务。

```
@Service
public class ConcurrentService{

    public Map<String, Object> createList(){
       this.asynCall();
    }

    @Async("taskExecutor")
    private Future<Map<String, Object>> asynCall(){
            //I will use submit instead of execute
            return this.taskExecutor.submit(new Callable(){
                 //Override the proper logic following interface
             })
    .....
    }

} 
```

对于您要并行执行的所有进程，请在 @Async 后面使用一个新方法，这使其异步执行，在您用于合并响应的方法或仅用于启动并行进程的方法中，使用 Future API 等到作业完成。

> boolean [isDone()](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html#isDone())如果此任务完成，则返回 true。完成可能是由于正常终止、异常或取消——在所有这些情况下，此方法都将返回 true。

这将等待所有期货完成

```
while(future1.isDone() future2.isDone()){
//Do Something in the meanwhile
}
//Code will start the execution once both process are completed 
```

您可以构建一个 wrap 方法以更轻松、更动态地等待完成。

要做到这一点的 Spring 配置是：

```
<task:annotation-driven executor="taskExecutor"  mode="aspectj" />

<bean id="taskExecutor" class="org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor">
    <property name="corePoolSize" value="50" />
    <property name="maxPoolSize" value="300" />
    <property name="queueCapacity" value="30" />
</bean> 
```

对我来说，这是集成测试，因为您使用的是真实的对象和服务，上面的配置将导致测试正确执行所有业务逻辑，并将等待所有流程完成，因此您不需要线程。睡眠，在您的示例中的方法执行之后>

```
orderService.dispatch(); 
```

您将能够创建断言列表以验证过程是否按预期工作，不要忘记这是测试目的的一部分。

# c++ - Boost::Bimap 等价于双向多图

> ID：12174997
> 
> 赞同：20
> 
> 时间：2012-08-29T09:41:41.257
> 
> 标签：c++, boost, multimap, bimap

问题的第一部分是我正在尝试使用 boost::bimap，但是从文档中我不清楚如何定义双向多图。

问题的第二部分是我需要它是一个方向的地图和另一个方向的多地图，这可以使用 boost::bimap 来完成吗？

有没有人有这方面的经验或者可以指出我正确的页面？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-29T09:54:15.943

一切都在文档中...... [http://www.boost.org/doc/libs/1_51_0/libs/bimap/doc/html/boost_bimap/the_tutorial/discovering_the_bimap_framework.html](http://www.boost.org/doc/libs/1_51_0/libs/bimap/doc/html/boost_bimap/the_tutorial/discovering_the_bimap_framework.html)

```
typedef boost::bimap<bimaps::multiset_of<int>, bimaps::set_of<int>> bimap_t; 
```

例子。

```
#include <iostream>
#include <boost/bimap.hpp>
#include <boost/bimap/set_of.hpp>
#include <boost/bimap/multiset_of.hpp>

namespace bimaps = boost::bimaps;

int main()
{
   typedef boost::bimap<bimaps::multiset_of<int>, bimaps::set_of<int>> bimap_t;
   typedef bimap_t::value_type value_type;
   bimap_t bimap;
   bimap.insert(value_type(1, 1));
   bimap.insert(value_type(1, 2));
   auto& left = bimap.left;
   auto it = left.find(1);
   std::cout << "LEFT" << std::endl;
   for (; it != left.end(); ++it)
   {
      std::cout << it->first <<  " " << it->second << std::endl;
   }
   auto& right = bimap.right;
   auto r_it = right.find(2);
   std::cout << "RIGHT" << std::endl;
   for (; r_it != right.end(); ++r_it)
   {
      std::cout << r_it->first << " " << r_it->second << std::endl;
   }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-13T14:59:11.377

ForEverR 的答案对于您问题的第一部分（如何定义双向多图？）部分正确。

对于第二部分（访问一个双向映射，它是一个方向的映射和另一个方向的多映射）这是不正确的。

正确的访问方式是 [ [http://rextester.com/BXBDHN12336](http://rextester.com/BXBDHN12336) ]：

```
//bimap operations

#include <boost/bimap.hpp>
#include <boost/bimap/set_of.hpp>
#include <boost/bimap/multiset_of.hpp>

int main()
{
   typedef boost::bimap<boost::bimaps::multiset_of<int>, boost::bimaps::set_of<int>> bimap_t;
   typedef bimap_t::value_type value_type;
   bimap_t bimap;
   bimap.insert(value_type(1, 1));
   bimap.insert(value_type(10, 50)); 
   bimap.insert(value_type(1, 2));
   bimap.insert(value_type(9, 15));   

   typedef bimap_t::left_const_iterator l_itr_t;
   typedef std::pair<l_itr_t,l_itr_t> l_itr_range_t;

   l_itr_range_t ii = bimap.left.equal_range(1);

   std::cout << "LEFT" << std::endl;        
   for(l_itr_t it = ii.first; it != ii.second; ++it)
   {
     std::cout << "Key = " << it->first << "    Value = " << it->second << std::endl;
   }  

   std::cout << "RIGHT" << std::endl;
   std::cout << "Key = " << 1 << "    Value = " << bimap.right.at(1) << std::endl;
}

stdout:
LEFT
Key = 1    Value = 1
Key = 1    Value = 2
RIGHT
Key = 1    Value = 1 
```

由于插入数据的顺序，ForEverR 的示例“似乎”有效，但是当您在末尾插入另一对时检查结果 bimap.insert(value_type(9, 15));：

```
#include <iostream>
#include <boost/bimap.hpp>
#include <boost/bimap/set_of.hpp>
#include <boost/bimap/multiset_of.hpp>

namespace bimaps = boost::bimaps;

int main()
{
   typedef boost::bimap<bimaps::multiset_of<int>, bimaps::set_of<int>> bimap_t;
   typedef bimap_t::value_type value_type;
   bimap_t bimap;
   bimap.insert(value_type(1, 1));
   bimap.insert(value_type(1, 2));
   bimap.insert(value_type(9, 15));
   auto& left = bimap.left;
   auto it = left.find(1);
   std::cout << "LEFT" << std::endl;
   for (; it != left.end(); ++it)
   {
      std::cout << it->first <<  " " << it->second << std::endl;
   }
   auto& right = bimap.right;
   auto r_it = right.find(2);
   std::cout << "RIGHT" << std::endl;
   for (; r_it != right.end(); ++r_it)
   {
      std::cout << r_it->first << " " << r_it->second << std::endl;
   }
}

stdout: 
LEFT
1 1
1 2
9 15
RIGHT
2 1
15 9 
```