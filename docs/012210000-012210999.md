# StackOverflow 问答 12210000-12210999

# ruby-on-rails - Rails：长轮询实践

> ID：12210000
> 
> 赞同：5
> 
> 时间：2012-08-31T06:30:35.993
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, long-polling

我正在开发一个允许用户发布到房间/页面的应用程序，就像论坛或这里（stackoverflow）。我已经构建了整个应用程序，但是，我还有最后一个障碍要克服：如何为用户处理更新帖子。

我已经对该主题进行了大量研究，并且我相信长轮询是要走的路，至少在我获得大量流量之前（如果发生这种情况，我将弄清楚如何实现 websockets）。这是因为长轮询将更容易实现，得到更广泛的支持，并且鉴于我正在部署到 heroku，因此可以轻松快速地升级我的服务器资源。无论如何，我想知道长轮询的最佳实践是什么，无论是在用户交互方面，还是在服务器负载方面。

我应该自动将帖子放在页面上，还是创建一个警报系统，例如 stackoverflow 上的警报系统？

任何和所有输入将不胜感激。如果您认为我的逻辑无论如何是错误的，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:46:09.997

对于这样的系统，我们建议使用类似[pusher](https://addons.heroku.com/pusher)的东西。查看文档以获取有关如何执行此操作的更多详细信息。[https://devcenter.heroku.com/articles/pusher](https://devcenter.heroku.com/articles/pusher)

# c# - ItextSharp 中的 Pdf 合并问题（合并 Pdf 后不保留其值）

> ID：12210002
> 
> 赞同：2
> 
> 时间：2012-08-31T06:31:01.420
> 
> 标签：c#, asp.net, pdf, merge, itextsharp

我们正在尝试使用 ITextSharp 合并三个 PDF。问题是合并后我们只能从第一个 PDF 中获取数据，而其他两个 PDF 不保留它们的值。

所有这些 PDF 具有相同的结构（即它们使用具有不同数据的相同模板），所以我的假设是它们具有相同的字段（AcroFields），这可能会在合并时产生这个问题。

这是合并代码：

```
public void MergeFiles(string destinationFile, string[] sourceFiles)
    {
        try
        {
            int f = 0;
            string outFile = destinationFile;
            Document document = null;
            PdfCopy writer = null;
            while (f < sourceFiles.Length)
            {
                // Create a reader for a certain document
                PdfReader reader = new PdfReader(sourceFiles[f]);
                // Retrieve the total number of pages
                int n = reader.NumberOfPages;
                //Trace.WriteLine("There are " + n + " pages in " + sourceFiles[f]);
                if (f == 0)
                {
                    // Step 1: Creation of a document-object
                    document = new Document(reader.GetPageSizeWithRotation(1));
                    // Step 2: Create a writer that listens to the document
                    writer = new PdfCopy(document, new FileStream(outFile, FileMode.Create));
                    // Step 3: Open the document
                    document.Open();
                }
                // Step 4: Add content
                PdfImportedPage page;
                for (int i = 0; i < n; )
                {
                    ++i;
                    if (writer != null)
                    {
                        page = writer.GetImportedPage(reader, i);
                        writer.AddPage(page);
                    }
                }

                PRAcroForm form = reader.AcroForm;
                if (form != null)
                {
                    if (writer != null)
                    {
                        writer.CopyAcroForm(reader);
                    }
                }

                f++;
            }
            // Step 5: Close the document
            if (document != null)
            {
                document.Close();
            }
        }
        catch (Exception)
        {
            //handle exception
        }
    } 
```

这被称为如下：

```
 string[] sourcenames = { @"D:\1.pdf", @"D:\2.pdf", @"D:\3.pdf" };
    string destinationname = @"D:\pdf\mergeall\merge3.pdf";
    MergeFiles(destinationname, sourcenames); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:35:55.603

经过一番搜索，我自己弄清楚了...以下是解决方案...

我创建了重命名 PDF 中的字段的功能，以便在合并后将重命名字段。

```
private static int counter = 0;
private void renameFields(PdfReader pdfReader)
        {
            try
            {
                string prepend = String.Format("_{0}", counter++);
                foreach (DictionaryEntry de in pdfReader.AcroFields.Fields)
                {
                    pdfReader.AcroFields.RenameField(de.Key.ToString(), prepend + de.Key.ToString());
                }
            }
            catch (Exception ex)
            {
                throw ex;
            }
        } 
```

此函数在“MergeFiles”函数中调用如下...

```
 // Create a reader for a certain document
             PdfReader reader = new PdfReader(sourceFiles[f]);
             renameFields(reader);
          // Retrieve the total number of pages
             int n = reader.NumberOfPages; 
```

# javascript - ui 选项卡无法正常工作

> ID：12210005
> 
> 赞同：0
> 
> 时间：2012-08-31T06:31:51.500
> 
> 标签：javascript, jquery, jquery-ui-tabs

我使用了 ui-tabs ，这是我使用的代码：

```
<script type="text/javascript">
  $(function () {
    $('#tabs').tabs({ event: '' });
  });

  function validateContact() {
    var fname = $('#first_name1').val();

    if (fname == '') {
      alert("Enter Name");
    } else {
      $('#tabs').tabs({ event: 'click' });
      doitcontact();
    }
  }

  function doitcontact() {
    var cnt = $("#frmdocontact").serialize();

    $.ajax({
      type: "POST",
      url: "doitcontact.php",
      data: cnt,

      success: function (msg) {
        var spt = msg.split('#$@$');
        //alert(spt);

        $('#hid_uid').val(spt[0]);
        $('#custom').val(spt[0]);

        $('#hid_add_vehicle').val(spt[0]);
        $('#hid_saleid').val(spt[1]);

        var valreturn = $("#return").val();

        if (valreturn) {
          valreturn = valreturn + "?cntdoit=" + spt[0];
          $("#return").val(valreturn);
        }

        //alert(msg);
        //console.log(contactSent);
        var pkg = $('input:radio[name=pkg]:checked').val();

        var $tabs = $('#tabs').tabs();
        var selected = $tabs.tabs('option', 'selected');
        $tabs.tabs('select', selected + 1);
        //window.location="thankyou.php"
      }
    });

  }
</script>

<ul>
  <li id="tabVInfo"><a href="#tabs-2">Contact Information</a></li>
  <li id="tabVCond"><a href="#tabs-3">Vehicle Information</a></li>
  <li id="tabVPhoto"><a href="#tabs-4">Additional Vehicle Information</a></li>
  <li id="tabVCheck"><a href="#tabs-5">Check Out</a></li>
</ul>

<div id="tabs-2">
  <form id="frmdocontact" name="frmdocontact" method="post">
    <input id="first_name1" maxlength="40" name="first_name" size="20" type="text" />
    <input type="button" id="sub" name="sub" value="Next >>" class="next-product" onclick="validateContact();" />
  </form>
</div>

<div id="tabs-">hhhhhhhhh</div>
<div id="tabs-4">kkkkkkkk</div>
<div id="tabs-5">llllllllll</div> 
```

我想在页面加载时删除 clicked 事件。这工作正常。然后，如果已经填写了数据，我必须能够单击选项卡。因此，如果我填写了第 1 页和第 2 页并且在第 3 页，那么他们应该能够单击 1 或 2 选项卡，并且其中应该包含已经输入的数据。

这里第 1 页和第 2 页表示 div。在我的代码中，当我加载页面时，选项卡不可点击。然后我将数据输入到第 1 页并单击 nex 按钮，然后它转到第 2 页，所有选项卡现在都可以单击。

但我实际上需要第 1 页标签 pnly 应该是可点击的。

我怎样才能做到这一点？

任何人都可以解决它吗？

是否有任何解决方案？......

尽快给出解决方案…………

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T08:38:43.990

只需删除标签调用中的 {event: ''} 即可启用所有点击。然后更改要禁用的选项卡的 HREF。在此示例中，我禁用了签出选项卡。

```
$("#tabs").tabs();
$("#tabVCheck > a").attr("href", "#"); 
```

你可以在这里测试它：http: [//jsfiddle.net/nKsZF/28/](http://jsfiddle.net/nKsZF/28/)

# android - XML 错误 - 执行 Google Android NDK 第 1 课

> ID：12210009
> 
> 赞同：0
> 
> 时间：2012-08-31T06:32:04.710
> 
> 标签：android, xml, eclipse, android-ndk

编码：

```
<?xml version="1.0" encoding="utf-8"?> 
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:weightSum="1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

   <EditText android:id="@+id/edit_message"
        android:layout_weight = "1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:hint="@string/edit_message" />
   <Button
        android:id="@+id/bSend"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/button_send" />
</LinearLayout> 
```

错误信息：

```
BUILD FAILED
C:\My First App\res\layout\activity_main.xml:7: Unexpected element "{}LinearLayout" {antlib:org.apache.tools.ant}LinearLayout 
```

该代码几乎与 Android 网站上的代码完全相同，而且我似乎无法让它工作，这真的很令人沮丧。是代码中的问题，还是在我这边？我正在使用 Eclipse

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T03:55:33.417

我遇到了同样的错误。我在 Ubuntu 12.04 中使用 Indigo，无论我使用什么库或 Eclipse 插件，它总是在那里。

对我有用的是重新下载并重新安装 Android SDK（在您的情况下可能不需要），并从 Eclipse 网站下载 Eclipse Classic (Juno)，而不是使用存储库中的 Indigo 包。课上说无论如何都推荐Classic，所以无论如何，我很高兴它现在可以工作。

如果您使用的是 Windows，我仍然建议您下载最新的 Classic 版本，否则我无法提供帮助。

# c# - c# 通过字符串访问对象实例

> ID：12210010
> 
> 赞同：1
> 
> 时间：2012-08-31T06:32:05.583
> 
> 标签：c#, reflection

我有一个像这样的静态类：

```
public static class MyApp
{
    public static volatile MultiThreadLogger Logger = new MultiThreadLogger();
} 
```

还有这样的字符串：

```
"MyApp.Logger" 
```

如何仅在知道字符串的情况下获取对象引用？字符串可以不同`"MyOtherNamespace.Subnamespace.StaticObjA.MemberIwantToAccess"`，我不想创建一个新实例，我想访问静态实例 - 只是通过字符串。

可能的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T06:41:09.760

```
Type t = Type.GetType("MyApp");
PropertyInfo p = t.GetProperty("Logger", Reflection.BindingFlags.Public | Reflection.BindingFlags.Static | Reflection.BindingFlags.FlattenHierarchy);
return p.GetValue(null, null); 
```

[http://msdn.microsoft.com/en-us/library/w3f99sx1.aspx](http://msdn.microsoft.com/en-us/library/w3f99sx1.aspx)

[如何使用反射获取静态属性](https://stackoverflow.com/questions/451453/how-to-get-a-static-property-with-reflection)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T06:38:14.197

```
public class ClassFactory
{
    static Dictionary<string, object> _Instances;

    public static object Get(string type)
    {
        lock (_Instances)
        {
            object inst;
            if (_Instances.TryGetValue(type, out inst)) return inst;

            inst = Activator.CreateInstance(Type.GetType(type));
            _Instances.Add(type, inst);

            return inst;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T06:41:22.940

您在寻找特定的课程吗？在这种情况下，您可以添加一个属性，然后使用反射、MEF 或类似的方法在程序集中迭代定义的类，直到找到正确的类。

如果你正在寻找一个对象（类的一个实例），你需要在某种工厂中“注册”它，可能是一个静态字典，然后从那里加载它。

更好的解决方案是考虑 IoC 容器 (http://en.wikipedia.org/wiki/Inversion_of_control)。IoC 容器将处理生命周期管理并返回不同版本以供测试或应用程序的不同部分。可以在[http://weblogs.asp.net/sfeldman/archive/2008/02/14/understanding-ioc-container.aspx](http://weblogs.asp.net/sfeldman/archive/2008/02/14/understanding-ioc-container.aspx)和[http://www.hanselman 上找到对它们的一个很好的解释。 com/blog/ListOfNETDependencyInjectionContainersIOC.aspx](http://www.hanselman.com/blog/ListOfNETDependencyInjectionContainersIOC.aspx)。

# http - 如何配置 apache 以在每个 HTTP 错误 500 上发送电子邮件

> ID：12210011
> 
> 赞同：6
> 
> 时间：2012-08-31T06:32:07.117
> 
> 标签：http, apache, httpd.conf

我有一些在 apache2 上运行的服务器应用程序；Ruby on Rails、PHP 等。

在所有情况下，只要 apache 响应 HTTP 错误 500 内部服务器错误，我都希望 apache 向我发送一封电子邮件。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-31T06:35:42.063

一种方法是使用发送电子邮件的 php 脚本，以及输出某种 500 消息。然后使用`ErrorDocument`指令：

```
ErrorDocument 500 /path/to/script/that/sends/email.php 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-03T10:33:10.207

## 无法将 apache 配置为发送电子邮件。

您可以采取一些措施来获得相同的结果：

1.  您可以使用[ErrorDocument 指令](http://httpd.apache.org/docs/2.2/mod/core.html#errordocument)让它指向某个 CGI 脚本，即 perl、PHP 或任何其他服务器端执行的脚本。然后，该脚本可以发送电子邮件并响应错误 500 文档。

2.  您可以使用一些外部工具来查看您的 apache 日志文件并配置这些工具来向您发送电子邮件。有几种工具和方法可以做到这一点。[对于 Linux，在https://serverfault.com/questions/45246/linux-monitor-logs-and-email-alerts](https://serverfault.com/questions/45246/linux-monitor-logs-and-email-alerts)上建议了许多工具和方法

3.  编写一个apache模块。我认为 mod_tee 是一个很好的起点。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-11T19:40:00.290

创建一个名为`log_monitor.sh`：

```
#!/usr/bin/perl -w

use strict;

my $cachefile="/var/cache/lastpos-apache2-scan4maxclntOrSigKill";
my $logfile="/var/log/httpd/error_log";
my $searchstr=" 500 ";

my $lastpos=0;
if (-f $cachefile) {
    open FH,"<".$cachefile;
    $lastpos=<FH>;
    close FH;
};

my $newpos=(stat $logfile)[7];

open FH,"<".$logfile;
seek FH,$lastpos,0;
while (<FH>) {
    print if m/$searchstr/i;
};
close FH;

open FH,">".$cachefile;
print FH $newpos;
close FH; 
```

`$searchstr`根据需要进行修改。请注意“500”周围的空格，因为您不想匹配在路径或文件名（以及其他位置）中包含“500”的文件上包含 404 的错误。

将脚本配置为通过 cron 每 X 分钟运行一次。X 的值越大，您收到的电子邮件就越少（对于与您提供的字符串匹配的所有错误，每 X 分钟只有 1 封电子邮件）。cron 作业的结果将自动通过电子邮件发送给您（如果 cron 设置正确）

# php - 带有 MySQL 查询的 Foreach 循环

> ID：12210015
> 
> 赞同：2
> 
> 时间：2012-08-31T06:32:41.407
> 
> 标签：php, mysql, sql

我有一个数组。

```
$select_crm=mysql_query("select * from party_details where subcaseid='$under_row[partyid]'");
$select_array=array($select_crm);
if(mysql_num_rows($select_crm)>0)
 {
  foreach($select_array as $v)
  {
    $fetch_crm=mysql_fetch_array($v);
    echo $fetch_crm['party_name'];
    echo $fetch_crm['partyid'];``
  }
 } 
```

但它不能正常工作。`$select_crm`有两行，但它只打印一个。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T06:37:51.997

`$select_array`是一个只有一个元素的数组：查询结果资源。因此`foreach`循环只会运行一次，只打印第一项。

您的循环应该看起来像那里的每个教程：

```
while($fetch_crm = mysql_fetch_assoc($v)) { ... } 
```

注意`fetch_assoc`，不是`fetch_array`。`fetch_array`如果您不打算使用数字索引，则调用毫无意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T08:32:53.067

尝试这个：

```
 <?php 
 $select_crm = 
mysql_query("select * from party_details where subcaseid='$under_row[partyid]'");

 while($select_array = mysql_fetch_assoc($select_crm))
 {
    echo $select_array['party_name'];
    echo $select_array['partyid'];
  }
 ?> 
```

希望它会有所帮助。快乐编码！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T06:41:10.130

```
$select_crm="select * from party_details where subcaseid='{$under_row[partyid]}'";
$crm = mysql_query($select_crm) or die(mysql_error());
$row_crm = mysql_fetch_assoc($crm);
$totalRows_crm = mysql_num_rows($crm);

if($totalRows_crm > 0) {
    do {
       /*foreach ($row_crm as $field) {
           echo $field;
       }*/

       echo $row_crm['party_name'];
       echo $row_crm['partyid'];
    } while ($row_crm = mysql_fetch_assoc($crm));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T06:41:57.540

不要使用foreach，你应该这样使用，

```
$select_crm= mysql_query("select * from party_details where subcaseid='$under_row[partyid]'");
while($result = $db->fetchByAssoc($select_crm))
{
   echo $result ['party_name'];
   echo $result ['partyid'];
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-31T06:37:56.533

就我而言，你必须这样做：

```
$select_crm=mysql_query("select * from party_details where subcaseid='{$under_row['partyid']}'");
if(mysql_num_rows($select_crm)>0)
 {
  while ($select_array = mysql_fetch_assoc($select_crm))
  {
    echo $select_array['party_name'];
    echo $select_array['partyid'];
  }
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-31T06:52:02.770

尝试这个

```
$result = mysql_query("your select query");
while($row = mysql_fetch_assoc($result)){
echo $row['columnNam1'];
echo $row['ColumnName2'];
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-31T06:37:17.203

您的代码正在迭代一个数组，该数组仅在您上面显式创建的 2 行以具有一个元素；-)

您错误地使用了`mysql_fetch_assoc`. 查看[手册页](http://us2.php.net/mysql_fetch_assoc)和那里的示例代码以获取您的解决方案。（当您在那里时，请注意大红色的已弃用通知；请继续阅读！）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-31T07:09:20.003

用这个：

```
$select_crm=mysql_query("select * from party_details where subcaseid='$under_row[partyid]'");
while($row=mysql_fetch_assoc($select_crm)) {

echo $row['party_name'];

echo $row['party_id'];

} 
```

# ios - AVAudioPlayer 不会在 didEnterRegion 中播放

> ID：12210018
> 
> 赞同：0
> 
> 时间：2012-08-31T06:32:52.357
> 
> 标签：ios, avaudioplayer, cllocationmanager

我问这样的问题是因为 UIAlertView 会消失。只是不是 AVAudioPlayer。这是我的代码：

```
- (void)locationManager:(CLLocationManager *)manager didEnterRegion:(CLRegion *)region

{
    NSLog(@"MapViewController - didEnterRegion");

    LocationReminder *theLocationReminder = [self.locationReminders objectForKey:region.identifier];

    NSError *error;
    NSURL *theUrl = [NSURL URLWithString:theLocationReminder.audioURI];

    NSLog(@"theUrl = %@",theUrl);

    AVAudioPlayer *thePlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:theUrl error:&error];

    NSLog(@"thePlayer.url = %@",thePlayer.url);

    [thePlayer play];

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"entered region..." message:@"You have Entered the Location." delegate:nil cancelButtonTitle:@"OK"  otherButtonTitles: nil];
    alert.tag = 2;
    [alert show];
} 
```

我在测试后检查了设备上的日志，虽然在我四处走动测试时确实显示了警报视图，但 AVAudioPlayer 不会播放，即使它具有正确的 URL。

我应该提到，虽然我在所需背景模式下的 plist 中启用了音频，但我仍然在应用程序中（因此背景不会成为问题）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T06:55:32.453

您没有维护对它的引用，`thePlayer`因此它正在被释放（假设您使用的是 ARC）。`@interface`可能在您的类块中添加一个属性，例如

```
@property (nonatomic, strong) AVAudioPlayer *player; 
```

然后代替你做的那条线

```
self.player = [[AVAudioPlayer alloc] initWithContentsOfURL:theUrl error:&error]; 
```

希望这可以帮助！

# macos - 可可中鼠标单击事件的通知

> ID：12210020
> 
> 赞同：0
> 
> 时间：2012-08-31T06:32:56.610
> 
> 标签：macos, cocoa, mouseevent

我是 Mac App 开发的新手，我想要鼠标点击通知，即当我们点击鼠标时，必须触发通知。就像 iOS 中的键盘通知一样。我们必须使用的通知名称是什么，例如iOS 中键盘的**UITextViewTextDidBeginEditingNotification**。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T06:39:12.913

将您的 NSTextField 的委托设置为 NSTextFieldDelegate，然后将调用以下方法：

```
- (void)textDidBeginEditing:(NSNotification *)notification; 
```

`-(void)mouseDown:(NSEvent *)theEvent{}`或者如果您想跟踪鼠标事件，请调用此方法

# linq - 有没有办法把这个小方法变成 lambda 或 linq 语句？

> ID：12210021
> 
> 赞同：0
> 
> 时间：2012-08-31T06:33:01.447
> 
> 标签：linq, c#-4.0, reflection, lambda, refactoring

我有以下方法：

```
private static object[] GenerateParameters(MethodBase executingMethod)
{
    var parameterInfoList = MethodBase.GetCurrentMethod().GetParameters();
    var parameterObjectList = new List<object>();

    for (var i = 0; i < parameterInfoList.Count(); i++)
    {
        parameterObjectList.Add(parameterInfoList.GetValue(i));
    }

    return parameterObjectList.ToArray();
} 
```

在我看来，这是臃肿和过于复杂。有没有办法把这个方法变成一两行代码来做同样的事情？可能使用 Lambda 或 LINQ。

之所以我认为它如此臃肿，是因为你只能从一个parameterInfo数组中获取参数的值，而不是每个parameterInfo（parameterInfo没有GetValue）。必须有更好的方法来做到这一点。

**编辑**

有很多很棒的答案，每个人都有效，所以谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T06:51:40.400

检查这个

```
 return MethodBase.GetCurrentMethod().GetParameters().ToArray <object>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T06:46:45.500

```
return Enumerable.Repeat<object>(parameterInfoList.GetValue(0), parameterInfoList.Count).ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T06:49:18.167

假设`parameterInfoList.GetValue(0)`实际上必须是`parameterInfoList.GetValue(i)`？

```
var parameterInfoList = MethodBase.GetCurrentMethod().GetParameters();
return Enumerable.Range(0, parameterInfoList.Count()).Select(x => parameterInfoList(x)).ToArray(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T06:58:57.887

1.  我假设您想要返回作为参数传递给此方法的方法的参数列表，但您总是返回其`GenerateParameters`自身的参数。因此，`parameterInfoList`您应该使用`executingMethod`.

2.  您只是将第一个元素添加到参数数组，`GetValue(0)`而不是`GetValue(i)`.

但是既然你只想退货，`ParameterInfo[]`难道就这么简单吗？

```
private static ParameterInfo[] GenerateParameters(MethodBase executingMethod)
{
    return executingMethod.GetParameters().ToArray();
} 
```

也许我误解了您的要求，因为这是一种不必要的方法。

# php - 如何在 CodeIgniter 中使用表单 URL

> ID：12210028
> 
> 赞同：0
> 
> 时间：2012-08-31T06:33:45.603
> 
> 标签：php, codeigniter

我有这个代码： -

```
<form action="<?php echo base_url();?>login/process" method="post" name="process">
    <h2>User Login</h2>
    <br />
    <?php if(! is_null($msg)) echo $msg;?>            
    <label for="username">Username</label>
    <input type="text" name='username' id='username' size="25" /><br />
    <label for="password">Password</label>
    <input type="password" name="password" id='password' size="25" /><br />                         
    <input type="Submit" value="Login" />         
</form> 
```

但它不起作用。

当我删除此链接时

```
 <form action="<?php echo base_url();?>login/process" method="post" name="process"> 
```

之后它就可以工作了。

现在我的问题是如何在 CodeIgniter 中使用表单 URL。

我知道我们也可以这样做：

```
<?=form_open('main/index/')?> 
```

但我现在不想更改我的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:05:47.587

你不能在codeigniter中使用。而不是使用这个：

```
<?php  echo form_open('admin/login/chk_admin');?>
    <h2>User Login</h2>
    <br />
    <?php if(! is_null($msg)) echo $msg;?>            
    <label for="username">Username</label>
    <input type="text" name='username' id='username' size="25" /><br />
    <label for="password">Password</label>
    <input type="password" name="password" id='password' size="25" /><br />                         
    <input type="Submit" value="Login" />         
</form> 
```

# sql - 使用批处理输入从 oracle 表中检索记录，其中某些列标准是可选的

> ID：12210030
> 
> 赞同：1
> 
> 时间：2012-08-31T06:33:57.763
> 
> 标签：sql, oracle

我发现我们可以从`Oracle`具有批量输入的表中检索记录，如下所示：

```
SELECT 
    * 
FROM
    invoices
WHERE
    (invoice_id, entity_id) IN 
                               (
                                   (1, 101), 
                                   (2, 102), 
                                   (3, 102)
                               ) 
```

现在，我需要触发一个查询，其中一列的输入无关紧要，但仍然能够进行批量查询。

例如

```
SELECT 
    * 
FROM
    invoices
WHERE
    (invoice_id, entity_id, vendor_id) IN 
                               (
                                   (1, 101, 201), 
                                   (2, 102, 202), 
                                   -- no criteria on vendor_id for the tuple below
                                   (3, 102)   
                               ) 
```

如果我运行此查询，查询引擎会报告以下错误：

```
ERROR at line 1:
ORA-00920: invalid relational operator 
```

是否可以首先进行这样的查询？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T06:49:05.657

[Oracle：表达式列表：](http://docs.oracle.com/cd/B19306_01/server.102/b14200/expressions014.htm#i1033664)

> 每个集合中的表达式数量必须与比较条件中运算符之前或成员条件中 IN 关键字之前的表达式数量匹配。

您可以将这些条件分开：

```
SELECT 
    * 
FROM
    invoices
WHERE
    (invoice_id, entity_id, vendor_id) IN 
                               (
                                   (1, 101, 201), 
                                   (2, 102, 202)
                               )
    or 
    (invoice_id, entity_id) IN 
                               (
                                   -- no criteria on vendor_id for the tuple below
                                   (3, 102)   
                               ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T06:54:02.607

```
SELECT 
    * 
FROM
    invoices
WHERE
    (invoice_id, entity_id, vendor_id) IN 
                               (
                                   select 1, 101, 201 from dual
                                   union 
                                   select 2, 102, 202 from dual
                                   union
                                   select 3, 102, vendor_id from invoices
                               ) 
```

# java - 如何捕获硒测试异常？

> ID：12210035
> 
> 赞同：1
> 
> 时间：2012-08-31T06:34:39.823
> 
> 标签：java, selenium

我在使用 Chrome 时遇到问题 - 它经常引发以下异常

`org.openqa.selenium.remote.UnreachableBrowserException.`

所以我想抓住所有这些，而不是导致构建失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:38:59.013

我认为这是一个已知问题 -

[http://code.google.com/p/selenium/issues/detail?id=3000](http://code.google.com/p/selenium/issues/detail?id=3000)

[http://code.google.com/p/selenium/issues/detail?id=4319](http://code.google.com/p/selenium/issues/detail?id=4319)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:39:42.747

如果发生失败状态代码，您需要告诉客户端抛出异常......

```
public class MyHtmlUnitDriver extends HtmlUnitDriver {public class MyHtmlUnitDriver extends HtmlUnitDriver {
    public MyHtmlUnitDriver(){
super();
this.getWebClient().getOptions().setThrowExceptionOnFailingStatusCode(true);
} 
```

# android - Android - MainActivity 继续实例化

> ID：12210037
> 
> 赞同：0
> 
> 时间：2012-08-31T06:34:45.330
> 
> 标签：android, leadbolt

我对android开发很陌生，所以请忍受我的无知。

在加载我的主要活动之前，我创建了一个启动画面。Splash 工作正常，但导致问题的是主要活动，它继续实例化。

**`Splash.java`**

```
public class Splash extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_splash);

    final AdController optinController = new AdController(
            getApplicationContext(), "SECTION_ID");

    final Splash splash = this;

    optinController.loadOptin((Activity) splash, "SECTION_ID",
        new AdOptinListener() {
            public void onAdOptin() {
                // once optin process is complete, continue to main app activity
                launchMain();
            }
        }
    );

}

public void launchMain() {
    finish();
    Intent myIntent = new Intent(Splash.this, MainActivity.class);
    myIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP);
    startActivity(myIntent);
}
} 
```

**`MainActivity.java`**

```
public class MainActivity extends Activity {
private AdController myController;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    myController = new AdController(getApplicationContext(), "SECTION_ID");
    myController.loadNotification();
}
} 
```

在清单文件中：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".Splash"
        android:label="@string/title_activity_splash" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" 
        android:launchMode="singleInstance">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

我用过`android:launchMode="singleInstance"`，但它仍然在不断地重新实例化。

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-05T05:05:02.497

在 manifest.xml 中，将 category 设置为 LAUNCHER 您要首先启动的活动，并将 Other 设置为 DEFAULT，如下例所示。

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".Splash"
        android:label="@string/title_activity_splash" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" 
        android:launchMode="singleInstance">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T06:45:13.083

公共类 Splash 扩展 Activity{

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);//|Window.FEATURE_INDETERMINATE_PROGRESS
    setContentView(R.layout.splash);

    final Timer time = new Timer();
    time.schedule(new TimerTask() {
        @Override    
        public void run() {
            Intent intent = new Intent(Splash.this,MainActivity.class);
            startActivity(intent);
            finish();
        }
    },1000);
}} 
```

它会起作用，我会通过 instatiating 准确地得到你。也不要使用单个实例，你不应该在这里需要它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T06:55:40.537

是的，以下是我的清单文件片段，只需为您的启动屏幕使用计时器并在特定时间后移动到您的主类。

活动 android:name=".Splash" android:screenOrientation="portrait" android:label="@string/app_name">

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T06:55:52.333

我认为您必须删除意图标志 Intent.FLAG_ACTIVITY_SINGLE_TOP

# jsf-1.2 - 丰富的面孔面板菜单项呈现相同的页面

> ID：12210040
> 
> 赞同：1
> 
> 时间：2012-08-31T06:35:24.643
> 
> 标签：jsf-1.2

1.  丰富的面孔面板菜单项。有 4 个菜单。第 4 个菜单包含一个菜单项，其中 action=”#{Test.t1}”.Managed Bean : Test /// Property : t1 [getters & setters]。在 t1[getter] 中，加载第 4 页的内容。

问题：单击第 4 个菜单时，会加载第 4 个菜单内容。然后再次单击第一个或第二个或第三个菜单，第四个菜单的页面呈现，但不是第一个或第二个或第三个。

尝试过：

1\. actionListener to menuItems 我试图在点击第一个或第二个或第三个菜单项时重定向到其他页面。动作监听器代码：FacesContext.getCurrentInstance().getExternalContext().redirect("test1.faces"); 发生了什么：不重定向。预期内容：应该在执行操作之前重定向。

# c# - 如何每五分钟使用 c# int 刷新页面？

> ID：12210056
> 
> 赞同：7
> 
> 时间：2012-08-31T06:36:12.723
> 
> 标签：c#, asp.net

如何在每五分钟内使用 c# 刷新页面`ASP.NET`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T06:47:13.020

一种是Javascript：

```
setTimeout("location.reload(true);", timeout); 
```

第二个是 Meta 标签：

```
<meta http-equiv="refresh" content="300"> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T06:43:39.667

在标题中使用以下 HTML 元标记`<META HTTP-EQUIV="REFRESH" CONTENT="300">`应该可以解决问题

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T06:49:01.823

您不能强制 HTML 页面从服务器端刷新。客户端必须请求该页面。

执行此操作的唯一方法始终涉及使用 META 刷新标记、刷新 HTTP 标头或强制在间隔内重新加载页面的 javascript。

任何“服务器端”解决方案都可以通过将 javascript 或 META 标记写入页面来实现。根本没有其他方法可以做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T06:51:25.587

最简单的方法是

```
<Head>
<meta equiv="refresh" content="5">
</Head> 
```

或使用计时器控件每五分钟刷新一次网页，例如：在 form.aspx 和表单加载中拖放计时器控件，添加如下代码

```
<asp:Timer ID="Timer1" runat="server" Interval="6000" ontick="Timer1_Tick" /> 
```

表单加载

```
public void DoMagic()
{

}
protected void Timer1_Tick(object sender, EventArgs e)
{
DoMagic();
Label1.Text = "";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T11:36:01.520

```
 window.setInterval(function () {
            // this will execute every 1 second

            methodCallOrAction();

        }, 1000);

function methodCallOrAction()
{
// u can call an url or do something here
} 
```

# objective-c - nspredicate 转义 url

> ID：12210058
> 
> 赞同：0
> 
> 时间：2012-08-31T06:36:28.223
> 
> 标签：objective-c, ios, nspredicate, nsfetchrequest

当为 NSFetchRequest 使用 NSPredicate 并搜索 URL 时，是否需要转义“/”？

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(url == %@) , aURL]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T06:43:08.293

这样做是因为我假设 aURL 是字符串：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(url == %@") , aURL]; 
```

也试试这样：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"ANY url  like '%@'" , aURL]; 
```

# c++ - GetActiveObject API 无法从 ROT 获取正在运行的实例

> ID：12210082
> 
> 赞同：1
> 
> 时间：2012-08-31T06:38:07.930
> 
> 标签：c++, com

1.  我们有一个在浏览器上运行的插件。这个插件是一个 DLL，它创建了一个 out proc COM 服务器（比如 MyApp.exe）。请注意，此应用程序作为[此处](http://msdn.microsoft.com/en-us/ms679687.aspx)给出的提升服务器运行。

2.  MyApp.exe 的入口点将 CLSID 注册到 ROT。因此，当 ROT 发生注册时，我不确定它是否为正在运行的进程维护任何安全上下文。

3.  我们尝试从插件 dll 中获取已注册的 MyApp.exe 实例。这失败了，说操作不可用，因为插件正在通过浏览器作为中等 IL 级别运行。（是的，如果 UAC 关闭，它对我有用，问题仅在它打开时）。

我已经尝试了上面链接中提到的注册表修改，但它对我不起作用。

请建议。

谢谢

# php - json_decode 返回字符串类型而不是对象

> ID：12210084
> 
> 赞同：8
> 
> 时间：2012-08-31T06:38:15.037
> 
> 标签：php, json

我将一个 JSON 编码的字符串传递给`json_decode()`并期望它的输出是一个对象类型，但我得到的是一个字符串类型。我怎样才能返回一个对象？

在文档中，以下内容返回一个对象：

```
$json = '{"a":1,"b":2,"c":3,"d":4,"e":5}';
var_dump(json_decode($json)); 
```

但是，如果我`json_encode()`先输入字符串然后调用`json_decode()`，则输出是字符串而不是对象：

```
$json = json_encode('{"a":1,"b":2,"c":3,"d":4,"e":5}');
var_dump(json_decode($json)); 
```

这只是一个简化的例子。实际上，我正在做的是通过 AJAX 将 JSON 编码的字符串推送到 PHP。然而，它确实说明了将这个编码的 JSON 字符串转换为我可以在 PHP 中读取的对象的问题，例如“ `$json->a`”。

如何返回对象类型？

感谢您的回复！这个问题的实际上下文是使用来自 API 的 JSON 响应。但是，当我对此响应执行 json_decode 并尝试访问以下值时 - $json=json_decode(json response from API); echo $json->a 它给了我一个错误：stdClass 类的对象无法转换为字符串

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T06:49:37.637

该函数`json_encode`用于以 JSON 格式对原生 PHP 对象或数组进行编码。

例如，在`$json = json_encode($arr)`哪里`$arr`

```
$arr = array(
  'a' => 1,
  'b' => 2,
  'c' => 3,
  'd' => 4,
  'e' => 5,
); 
```

将返回字符串`$json = '{"a": 1, "b": 2, "c": 3, "d": 4, "e": 5}'`。此时，您不需要**再次**对其进行编码`json_encode`！

要取回您的数组，只需执行`json_decode($json, true)`.

如果您`true`从调用中省略 ，`json_decode`您将获得一个 的实例`stdClass`，并在 JSON 字符串中指定各种属性。

如需更多参考，请参阅：

[http://www.php.net/manual/en/function.json-encode.php](http://www.php.net/manual/en/function.json-encode.php)

[http://www.php.net/manual/en/function.json-decode.php](http://www.php.net/manual/en/function.json-decode.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T07:05:13.470

不要在 JSON 数组上写入，而是先尝试将其放入 PHP 数组。

```
<?php
$array = array(
'a' => 1,
'b' => 2,
'c' => 3,
'd' => 4,
'e' => 5
);
//Then json_encode()
$json = json_encode($array);
echo $json;
die;
?> 
```

在您的情况下，您使用的是ajax。所以当你获得成功时，你可以这样做：

```
$.ajax({
    url: 'example.com',
    data: {

    },
    success: function(data) {
        console.log(data);
    }
}); 
```

在console.log()中的数据之后可以添加json var，如data.a，data.b ...

此外，使用您提供的字符串，您不需要 json_encode，因为它已经是 json 格式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T06:48:23.127

```
var_dump(json_decode($json, true)); 
```

[http://hk.php.net/manual/en/function.json-decode.php](http://hk.php.net/manual/en/function.json-decode.php)

# android - 当我使用显式 setText 调用调用 show 方法时，Android DialogFragment 视图不会更新

> ID：12210089
> 
> 赞同：0
> 
> 时间：2012-08-31T06:38:33.883
> 
> 标签：android, android-dialogfragment

`show()`我正在尝试创建一个片段，当显示时，它会根据我传递给该方法的额外项目来更改其内容。对话框片段实例是为了可重用性而保留的，换句话说，我只需将片段实例化一次，并`show()`在我希望显示它时使用它显示的新对象进行调用。它在第一次显示时工作正常，但对于随后的显示调用，我无法更改编辑文本的文本。你会在下面的课程中看到，我实际上已经明确地在`show()`代码块之后将文本更改为“我被改变了”，但这从未反映在 ui 中。

```
public class RegisterFragment extends DialogFragment implements View.OnClickListener, DialogInterface.OnClickListener
    {
    private static final String KEY_SOURCE = "source";
    private static String source;
    private static JSONObject listEntry;
    private RegisterItem item;

    private boolean spinnerMode;
    private boolean viewsCreated;

    private TextView label1, label2;
    private EditText field1 = null, field2 = null;
    private Spinner spinner;
    private ArrayAdapter<String> adapter;
    private Button send, cancel;

    private OnClickSendCancelButtonListener sendListener;

    public static RegisterFragment newInstance(String source)
        {
        RegisterFragment fragment = new RegisterFragment();
        Bundle b = new Bundle();
        b.putString(KEY_SOURCE, source);
        fragment.setArguments(b);
        return fragment;
        }
    @Override
    public void onCreate(Bundle savedInstanceState)
        {
        super.onCreate(savedInstanceState);

        Bundle b = this.getArguments();
        if (b != null)
            {
            source = b.getString(KEY_SOURCE);
            load(source);
            }
        adapter = new ArrayAdapter<String>(getActivity(), android.R.layout.simple_spinner_item);
        adapter.setDropDownViewResource(android.R.layout.simple_dropdown_item_1line);
        viewsCreated = false;
        }

    public RegisterItem getRegisterItem()
        {
        return this.item;   
        }

    @Override
    public void onAttach(Activity activity)
        {
        super.onAttach(activity);

        try
            {
            this.sendListener = (OnClickSendCancelButtonListener) activity;
            }
        catch (ClassCastException e)
            {
            throw new ClassCastException("Activity must implement RegisterFragment#OnClickSendCancelButtonListener");
            }
        }

    private void load(String source)
        {
        if (item == null)
            item = new RegisterItem();
        item.loadData(source);
        spinnerMode = item.hasChoices();

        if (!viewsCreated)
            return;

        label1.setText(item.field1Label);
        label2.setText(item.field2Label);

        send.setText(item.sendButtonText);
        cancel.setText(item.cancelButtonText);

        Log.v("RegisterFragment", "FIELD1: " + item.defaultField1);
        Log.v("RegisterFragment", "FIELD2: " + item.defaultField2);

        if (spinnerMode)
            {
            field1.setVisibility(View.GONE);
            spinner.setVisibility(View.VISIBLE);

            adapter.clear();
            for(String choice: item.choices)
                adapter.add(choice);
            adapter.notifyDataSetChanged();
            }
        else
            {
            field1.setVisibility(View.VISIBLE);
            spinner.setVisibility(View.GONE);
            }

        if (item.hasDefaults())
            {
            Log.v("RegisterFragment", "Setting text for field 2");
            field2.setText(item.defaultField2);
            Log.v("RegisterFragment", "FIELD2 TEXT: " + field2.getText().toString());
            if (spinnerMode)
                spinner.setSelection(adapter.getPosition(item.defaultField2));
            else
                field1.setText(item.defaultField1);
            }
        }

    public void show(FragmentManager manager, String tag, String source, String listEntry)
        {
        Log.v("Register Fragment", "Showing fragment\nSOURCE STRING: " + source);
        load(source);
        RegisterFragment.source = source;
        try {
            RegisterFragment.listEntry = new JSONObject(listEntry);
        } catch (JSONException e) {
            e.printStackTrace();
        }
        super.show(manager, tag);
        if (field2 != null)
            field2.setText("I Have Been Changed");
        }

    @Override
    public void dismiss()
        {
        if (field1 != null)
            field1.setText("");
        if (field2 != null)
            field2.setText("");
        super.dismiss();
        }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
        {
        View v = inflater.inflate(R.layout.register_screen, null);

        spinner = (Spinner) v.findViewById(R.id.register_spinner);
        spinner.setAdapter(adapter);

        label1 = (TextView) v.findViewById(R.id.register_label1);
        label2 = (TextView) v.findViewById(R.id.register_label2);

        field1 = (EditText) v.findViewById(R.id.register_field1);
        field2 = (EditText) v.findViewById(R.id.register_field2);

        send = (Button) v.findViewById(R.id.register_send);
        cancel = (Button) v.findViewById(R.id.register_cancel);

        send.setOnClickListener(this);
        cancel.setOnClickListener(this);

        viewsCreated = true;
        load(source);

        return v;
        }

    @Override
    public void onDestroyView() {
        super.onDestroyView();
        viewsCreated = false;
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:06:40.350

您的代码应该可以工作。但一定要试试这个。

```
EditText text = (EditText)getDialog().findViewById(R.id.register_field2);
text.setText("I have been changed"); 
```

# php - 学说 2.1 通过外国实体的身份一对一的双向关联

> ID：12210094
> 
> 赞同：0
> 
> 时间：2012-08-31T06:39:02.033
> 
> 标签：php, doctrine-orm, foreign-keys

我正在使用 Doctrine 2.1，其中支持通过外部实体的身份（外键作为标识符）。

[http://docs.doctrine-project.org/projects/doctrine-orm/en/2.1/tutorials/composite-primary-keys.html#identity-through-foreign-entities](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.1/tutorials/composite-primary-keys.html#identity-through-foreign-entities)

是否可以通过具有双向关系的外国实体进行身份识别？我正在尝试，但在加载数据设备时出现以下错误：

> [PDO异常]
> 
> SQLSTATE [23000]：完整性约束违规：1452 无法添加或更新子行：外键约束失败（`table`. `user`, CONSTRAINT `FK_187DDE86BF396750`FOREIGN KEY ( `id`) REFERENCES `address`( `user_id`)）

这是我的实体：

```
/**
 * @Entity
 */
class User
{
    /** @Id @Column(type="integer") @GeneratedValue */
    private $id;

    /** @OneToOne(targetEntity="Address") */
    private $address;
}

/**
 * @Entity
 */
class Address
{
    /** @Id @OneToOne(targetEntity="User") */
    private $user;
} 
```

如果我删除从用户到地址的引用，错误就会消失！

我希望能够做到以下几点：

```
$address = $user->getAddress(); 
```

..但似乎我将不得不这样做：

```
$address = $entityManager->find('Address', $user->getId()); 
```

那正确吗？有没有办法做到这一点？

**更新1：**

我希望能够从任一侧（双向）设置关系，但这似乎不可能。

老实说，我不确定关系的反面的意义是什么，因为**“仅对关联的反面所做的更改被忽略”**。

取自这里的文档：http: [//docs.doctrine-project.org/projects/doctrine-orm/en/2.1/reference/association-mapping.html#owning-side-and-inverse-side](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.1/reference/association-mapping.html#owning-side-and-inverse-side)

重点是什么？

从应用程序的角度来看，这样做似乎更有意义：

`$user->setAddress($address);`

而不是：

`$address->setUser($user);`

但是第一个是不可能的，因为：

1.  使关系双向刹车
2.  `User`一面必须是反面，所以无论如何`$user->setAddress($address);`都会被忽略！

请有人解释一下:)

马修

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-02T17:07:17.003

您的问题与“作为标识符的外键”无关，而是与关系的拥有方有关：

在 Doctrine 中，关系可能是双向的，但在这种情况下，关系必须有一个“onwing-side”。这意味着：

*   在您的“实体部分”：您的两个实体都有一个相互引用的属性。在您的情况下，您在用户中有 $address，在地址中有 $user，您可以使用 $user->getAddress() 和 $address->getUser()

*   在您的“sql 部分”上：只有一个表，即拥有方，具有引用另一个表的属性。

您可以通过在非拥有方使用“mappedBy”来告知 Doctrin 拥有方是什么。在您的情况下，使用外键作为标识符，您没有选择：拥有方是具有外键的一方。所以，测试一下：

```
/**
 * @Entity
 */
class User
{
    /** @Id @Column(type="integer") @GeneratedValue */
    private $id;

    /** @OneToOne(targetEntity="Address", mappedBy="user") */
    private $address;
}

/**
 * @Entity
 */
class Address
{
    /** @Id @OneToOne(targetEntity="User", inversedBy="address")) */
    private $user;
} 
```

另一个重点：在双向关系中，当您设置非拥有方时，Doctrine 无法自动更新对方。所以你必须手动完成。由于每次创建新用户和地址时都不必考虑这一点，您可以在 setter 中自动执行该过程：

```
// in class User :
public function setAddress($address) {
    $address->setUser($this);           // <= here it is !!!
    $this->address = $address;
    return $this;
}

// in class Address :
public function setUser($user) {
    $this->user = $user;
    return $this;
} 
```

现在，您可以根据需要设置地址，而无需担心这个拥有方面的东西：

```
$address = new Addresse();
$address->set...
$user->setAddress($address); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:34:45.940

您的用户实体中定义的地址字段是否有 getter？

```
public function getAddress()
{
  return $this->address;
} 
```

请记住，学说总是返回集合。

# ruby-on-rails - 包括 has_many 到的列

> ID：12210095
> 
> 赞同：3
> 
> 时间：2012-08-31T06:39:08.977
> 
> 标签：ruby-on-rails, postgresql, activerecord

我有三个模型`User`，`Team`和`Membership`。在 Membership 模型中，a 有一个字段 role，它存储当前团队的用户角色。

当一个团队有很多用户并且我列出他们并显示团队的用户角色时，我的查询计数当然会爆炸。

有没有办法加载所有 Team 用户并包含 Membership 模型中的角色列？

```
User
has_many :memberships, dependent: :destroy
has_many :teams,       through: :memberships 

Team
has_many :memberships, dependent: :destroy
has_many :users,       through:   :memberships

Membership
belongs_to :user
belongs_to :team 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T09:06:05.130

我相信这会奏效

```
team = Team.first #for example
users = team.users.select("*, memberships.role AS role") 
```

所以每个用户都会得到角色

```
users.first.role 
```

# java - 一个简单的误解：如何在 Android 上合并 java 类

> ID：12210098
> 
> 赞同：0
> 
> 时间：2012-08-31T06:39:28.750
> 
> 标签：java, android

这可能是其中最简单的问题，但请体谅我。

我正在研究一些关于如何在 EditText 中包装文本的教程，我认为这些链接会对我有很大帮助。

[StackOverFlow 答案 1](https://stackoverflow.com/questions/5033012/auto-scale-textview-text-to-fit-within-bounds/5535672#5535672)

[StackOverFlow 答案 2](https://stackoverflow.com/questions/2617266/how-to-adjust-text-font-size-to-fit-textview/7875656#7875656)

现在我的问题是，我怎样才能合并那个 java 类。如您所见，我仍然是一名学生，在这些**扩展**方面我几乎没有经验。我尝试过使用实例化（我更倾向于使用 vb.net），这是我的代码

```
private AutoResizeTextView autoResizeTextView;// instantiate

//and on my textview
txtCalc.setTextSize(autoResizeTextView); 
```

它不工作。你能帮我解决我的声明，因为我正在为我的学校项目创建一个计算器吗？

非常感谢您的时间和精力

**编辑** 我不知道我是否理解正确，但这就是我在布局上所做的

```
 <com.bracks.androidtest.AutoResizeTextView
    android:id="@+id/screen"
    android:layout_width="285dp"
    android:layout_height="54dp"
    android:layout_gravity="center"
    android:layout_marginTop="5dp"
    android:background="@drawable/box_border"
    android:clickable="false"
    android:enabled="false"
    android:gravity="center"
    android:longClickable="false"
    android:textColor="#333333"
    android:textSize="30dp" 
    /> 
```

先生，它不工作。我不知道那是不是因为代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T06:54:50.503

希望你能明白：

首先：

```
private AutoResizeTextView autoResizeTextView;// instantiate 
```

你没有在那里实例化任何东西。要创建对象，您必须调用构造函数。

```
//and on my textview
txtCalc.setTextSize(autoResizeTextView); 
```

看起来你`txtCalc`应该`AutoResizeTextView`代替`TextView`. **不要尝试这个**：

```
txtCalc = autoResizeTextView; 
```

而是将 XML 文件（布局）中的视图类型从`<TextView />`更改为`<yourPackageName.AutoResizeTextView></yourPackageName.AutoResizeTextView>`

# postgresql - 如何监控 Postgres 的长时间运行事务？

> ID：12210101
> 
> 赞同：3
> 
> 时间：2012-08-31T06:39:52.087
> 
> 标签：postgresql, transactions, monitoring

可以监控 Postgres 事务的持续时间吗？我希望收到有关长期交易的通知，主要是为了在它们引起问题之前发现“交易中的空闲”问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T07:36:42.727

您可以监视`pg_stat_activity`系统表的内容

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T08:45:36.363

Bucardo 项目中的[check_postgres](http://bucardo.org/wiki/Check_postgres)脚本提供了多种监控选项，包括用于长时间运行的空闲事务的 AFAIK 选项。

# c++ - gcc 4.7.1 支持线程吗？

> ID：12210102
> 
> 赞同：7
> 
> 时间：2012-08-31T06:39:54.220
> 
> 标签：c++, multithreading, gcc, mingw

我按照[此处](https://stackoverflow.com/a/6560774/938244)关于设置 CodeBlocks 以使用 GCC 4.7.1 的说明进行操作。我提到的页面上提供的示例编译得很好，但是当我尝试编译以下代码时，它随后产生了错误。我必须说我什至通过编译器设置（-std=c++11）设置编译器 C++11 标志，但仍然没有运气。编译失败的代码：

```
#include <iostream>
#include <thread>
#include <vector>

//This function will be called from a thread

void func(int tid) {
    std::cout << "Launched by thread " << tid << std::endl;
}

int main() {
    std::vector<std::thread> th;

    int nr_threads = 10;

    //Launch a group of threads
    for (int i = 0; i < nr_threads; ++i) {
        th.push_back(std::thread(func,i));
    }

    //Join the threads with the main thread
    for(auto &t : th){
        t.join();
    }

    return 0;
} 
```

错误：

```
 main.cpp||In function 'int main()':|
 main.cpp|13|error: 'thread' is not a member of 'std'|
 main.cpp|13|error: 'thread' is not a member of 'std'|
 main.cpp|13|error: template argument 1 is invalid|
 main.cpp|13|error: template argument 2 is invalid|
 main.cpp|13|error: invalid type in declaration before ';' token|
 main.cpp|19|error: request for member 'push_back' in 'th', which is of non-class type 'int'|
 main.cpp|19|error: 'thread' is not a member of 'std'|
 main.cpp|23|error: no matching function for call to 'begin(int&)'|
 main.cpp|23|note: candidates are:|
 \include\c++\4.7.1\initializer_list|89|note: template<class _Tp> constexpr const _Tp* std::begin(std::initializer_list<_Tp>)|
 \include\c++\4.7.1\initializer_list|89|note:   template argument deduction/substitution failed:|
 main.cpp|23|note:   mismatched types 'std::initializer_list<_Tp>' and 'int'|
 \include\c++\4.7.1\bits\range_access.h|87|note: template<class _Tp, unsigned int _Nm> _Tp* std::begin(_Tp (&)[_Nm])|
 \include\c++\4.7.1\bits\range_access.h|87|note:   template argument deduction/substitution failed:|
 main.cpp|23|note:   mismatched types '_Tp [_Nm]' and 'int'|
 \include\c++\4.7.1\bits\range_access.h|58|note: template<class _Container> decltype (__cont.begin()) std::begin(const _Container&)|
 \include\c++\4.7.1\bits\range_access.h|58|note:   template argument deduction/substitution failed:|
 main.cpp|23|required from here|
 \include\c++\4.7.1\bits\range_access.h|58|error: request for member 'begin' in '__cont', which is of non-class type 'const int'|
 \include\c++\4.7.1\bits\range_access.h|48|note: template<class _Container> decltype (__cont.begin()) std::begin(_Container&)|
 \include\c++\4.7.1\bits\range_access.h|48|note:   template argument deduction/substitution failed:|
 main.cpp|23|required from here|
 \include\c++\4.7.1\bits\range_access.h|48|error: request for member 'begin' in '__cont', which is of non-class type 'int'|
 main.cpp|23|error: no matching function for call to 'end(int&)'|
 main.cpp|23|note: candidates are:|
 \include\c++\4.7.1\initializer_list|99|note: template<class _Tp> constexpr const _Tp* std::end(std::initializer_list<_Tp>)|
 \include\c++\4.7.1\initializer_list|99|note:   template argument deduction/substitution failed:|
 main.cpp|23|note:   mismatched types 'std::initializer_list<_Tp>' and 'int'|
 \include\c++\4.7.1\bits\range_access.h|97|note: template<class _Tp, unsigned int _Nm> _Tp* std::end(_Tp (&)[_Nm])|
 \include\c++\4.7.1\bits\range_access.h|97|note:   template argument deduction/substitution failed:|
 main.cpp|23|note:   mismatched types '_Tp [_Nm]' and 'int'|
 \include\c++\4.7.1\bits\range_access.h|78|note: template<class _Container> decltype (__cont.end()) std::end(const _Container&)|
 \include\c++\4.7.1\bits\range_access.h|78|note:   template argument deduction/substitution failed:|
 main.cpp|23|required from here|
 \include\c++\4.7.1\bits\range_access.h|78|error: request for member 'end' in '__cont', which is of non-class type 'const int'|
 \include\c++\4.7.1\bits\range_access.h|68|note: template<class _Container> decltype (__cont.end()) std::end(_Container&)|
 \include\c++\4.7.1\bits\range_access.h|68|note:   template argument deduction/substitution failed:|
 main.cpp|23|required from here|
 \include\c++\4.7.1\bits\range_access.h|68|error: request for member 'end' in '__cont', which is of non-class type 'int'|
 main.cpp|23|error: unable to deduce 'auto&' from '<expression error>'|
||=== Build finished: 14 errors, 4 warnings (0 minutes, 6 seconds) ===| 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T06:42:14.477

使用 mingw，gcc 的线程支持取决于您获得的构建版本。有些构建不支持线程，有些则支持。

我相信[http://code.google.com/p/mingw-builds/downloads/list](http://code.google.com/p/mingw-builds/downloads/list)上的 mingw 构建支持线程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T06:42:41.417

MinGW 根本不会使用 '-std=c++0x' 进行编译。奇怪的是，'-std=gnu++0x' 有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-09T00:20:25.210

尝试 MinGw 构建：

[http://sourceforge.net/projects/mingwbuilds/](http://sourceforge.net/projects/mingwbuilds/)

此安装程序将允许您选择所需的任何 MinGW，还包括`c++11`线程功能。

# kendo-ui - 如何将复选框列添加到剑道网格

> ID：12210105
> 
> 赞同：9
> 
> 时间：2012-08-31T06:40:26.857
> 
> 标签：kendo-ui, kendo-grid

我正在尝试向 KendoUI 网格添加一个复选框列。这是[小提琴](http://jsfiddle.net/JNMvn/17/)。

我从剑道论坛关注了[这篇文章。](http://www.kendoui.com/forums/ui/grid/grid-checkbox.aspx)
有人可以指出我在这里做错了什么。

这是相关代码：

```
data-columns = '[
    {"field":"Name", "filterable":true},
    {"field":"Price", "filterable":false},
    "UnitsInStock",
    {"field":"Recon"},
    "template": "<input type='checkbox' #= (Recon == true) ? checked ='checked' : '' # disabled />"
]' 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-31T07:39:03.093

将您的列更改为：

```
[{"field":"Name", "filterable":true}, {"field":"Price", "filterable":false}, "UnitsInStock", {"field":"Recon", "template": "<input type=\"checkbox\" />" }]' 
```

你的语法有一些错误，还有一些未转义的引号。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-17T19:02:32.350

您可以简单地将一列添加为复选框列。

```
data-columns = '[
{"field":"Name", "filterable":true},
{"field":"Price", "filterable":false},
"UnitsInStock",
{"field":"Recon"},
{ selectable: true, width: "50px" } //selectable means it's a checkbox column
]' 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-05-17T09:26:40.777

> 在模板部分使用 CheckBox 参见下面的示例：

```
 {
    title: "Deck Options",
    field: "DeckOption",
    template: "<input type='checkbox' #= (DeckOption == true) ? checked ='checked' : '' # disabled/>",
    width: "7%",
    sortable: {
    mode: "single",
    allowUnsort: false
    } 
```

# mysql - 使用 MySQL 创建事件时出错

> ID：12210107
> 
> 赞同：0
> 
> 时间：2012-08-31T06:40:34.667
> 
> 标签：mysql

我正在使用下面的代码在 MYSQL 中创建一个事件。在这个时候，我想删除并使用查询创建一个表。

```
Drop  Event  if exists EVT_UP_TIMESHEET;
CREATE EVENT EVT_UP_TIMESHEET
  ON SCHEDULE EVERY '1' Day
  STARTS '2012-08-01 12:00:00'
DO

  Drop table if exists tbl_temp;

 create table tbl_temp as ( SELECT e.userid            AS Employee_ID,

       e.memo              AS Employee_Name,
   e.Department        AS Department,
..... 
```

它返回以下错误：

> 错误：表 tbl_temp 已存在。

请帮助我做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T06:43:39.783

使用`CREATE TABLE IF NOT EXISTS tbl_temp`代替`create table tbl_temp`

或者要删除可以使用的表，[`TRUNCATE TABLE`](http://dev.mysql.com/doc/refman/5.5/en/truncate-table.html)而不是`DROP TABLE`创建可以使用的表，[`INSERT...SELECT`](http://dev.mysql.com/doc/refman/5.5/en/insert-select.html)而不是`CREATE TABLE`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T06:59:01.910

作为一种解决方法 - 尝试使用[TRUNCATE TABLE](http://dev.mysql.com/doc/refman/5.5/en/truncate-table.html)和[INSERT...SELECT](http://dev.mysql.com/doc/refman/5.5/en/insert-select.html)语句而不是 DROP/CREATE TABLE。

# php - 媒体上传在 magento 自定义模块编辑器中不起作用

> ID：12210108
> 
> 赞同：1
> 
> 时间：2012-08-31T06:40:46.400
> 
> 标签：php, image, magento, upload, module

我在 magento 中创建了一个自定义模块，其中包含一个文本框和一个编辑器。但是当我尝试使用编辑器上传图像或视频时，它会向我显示类似的错误。

```
error: error in [unknown object].fireEvent():

event name: open_browser_callback

error message: MediabrowserUtility is not defined 
```

因此，我无法在我的模块中上传任何图像或视频。

如何解决这个问题呢？请帮我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:14:07.683

在您的 config.xml 中，您有：

```
<events>
  <cms_wysiwyg_config_prepare>
    <observers>
      <variable_observer>
        <class>core/variable_observer</class>
        <method>prepareWysiwygPluginConfig</method>
      </variable_observer>
    </observers>
  </cms_wysiwyg_config_prepare>
</events> 
```

在块/Adminhtml/WHATEVER/Edit.php

```
protected function _prepareLayout() {
    parent::_prepareLayout();
    if (Mage::getSingleton('cms/wysiwyg_config')->isEnabled()) {
        $this->getLayout()->getBlock('head')->setCanLoadTinyMce(true);
        $this->getLayout()->getBlock('head')->setCanLoadExtJs(true);
    }
} 
```

然后在 Block/Adminhtml/WHATEVER/Edit/Tab/Form.php 的顶部

```
 protected function _prepareForm() {
            $form = new Varien_Data_Form();
            $this->setForm($form);
            $wysiwygConfig = Mage::getSingleton('cms/wysiwyg_config')->getConfig(array('add_variables' => false,
         'add_widgets' => false,
          'add_images' => true,
          'files_browser_window_url' => Mage::getSingleton('adminhtml/url')->getUrl('adminhtml/cms_wysiwyg_images/index'),
          'files_browser_window_width' => (int) Mage::getConfig()->getNode('adminhtml/cms/browser/window_width'),
          'files_browser_window_height'=> (int) Mage::getConfig()->getNode('adminhtml/cms/browser/window_height')
         )); 
```

再向下：

```
 $fieldset->addField('not-called-content', 'editor', array(
                                    'name'      => 'not-called-content',
                                    'label'     => Mage::helper('WHATEVER')->__('Content'),
                                    'title'     => Mage::helper('WHATEVER')->__('Content'),
                                    'style'     => 'width:550px; height:300px;',
                                    'required'  => false,
                                    'config'    => $wysiwygConfig,
                                    'wysiwyg'   => true
                                    )); 
```

标准陷阱：不要将您所见即所得的区域称为“内容”。Magento 已经将其用于表单 ID。

# iphone - 如何动态设置 UITextfield 宽度？

> ID：12210118
> 
> 赞同：-4
> 
> 时间：2012-08-31T06:42:10.993
> 
> 标签：iphone, ios, ipad, uitextfield

我必须制作 iPad 应用程序。

有三个问题`textfields`。我必须`UITextField`动态设置宽度，`text`来自**webservice**。我必须设置`UITextField`与问题文本相同的宽度..

当文本问题大小较小`UITextField`时，大小较小，当文本问题大小较大时`UITextField`，大小较大，

我有以下代码.....

```
txtQuestionOne.hidden=NO;
            txtQuestionTwo.hidden=NO;
            txtQuestionThree.hidden=NO;

            imgQueone.hidden=NO;
            imgQueTwo.hidden=NO;
            imgQueThree.hidden=NO;

            [txtQuestionOne setPlaceholder:[[appDelegate.questions objectAtIndex:0] objectForKey:@"question"]];

            appDelegate.FirstQues =[[appDelegate.questions objectAtIndex:0] objectForKey:@"question"];

            NSLog(@"current q1 %@", [[appDelegate.questions objectAtIndex:0] objectForKey:@"question"]);

            if ([[[appDelegate.questions objectAtIndex:0] objectForKey:@"permission"] isEqualToString:@"1"]) {

                ratingButton1.hidden=NO;

                ratingLabel1.hidden=NO;
            }

            [txtQuestionTwo setPlaceholder:[[appDelegate.questions objectAtIndex:1] objectForKey:@"question"]];

            appDelegate.SecondQues =[[appDelegate.questions objectAtIndex:1] objectForKey:@"question"];

            NSLog(@"current q2 %@", [[appDelegate.questions objectAtIndex:1] objectForKey:@"question"]);

            if ([[[appDelegate.questions objectAtIndex:1] objectForKey:@"permission"] isEqualToString:@"1"]) {

                ratingButton2.hidden=NO;

                ratingLabel2.hidden=NO;
            }

            [txtQuestionThree setPlaceholder:[[appDelegate.questions objectAtIndex:2] objectForKey:@"question"]];

            appDelegate.ThridQues =[[appDelegate.questions objectAtIndex:2] objectForKey:@"question"];

            NSLog(@"current q3 %@", [[appDelegate.questions objectAtIndex:2] objectForKey:@"question"]);

            if ([[[appDelegate.questions objectAtIndex:2] objectForKey:@"permission"] isEqualToString:@"1"]) {

                ratingButton3.hidden=NO;

                ratingLabel3.hidden=NO;
            } 
```

请帮助我，我不知道我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T09:35:36.700

使用它来获取指定字体样式的 NSString 的大小。并使用返回的 CGSize 设置 UI 元素的大小，可以是 label、textfield。

```
 (comments from apple documentation)
// Single line, no wrapping. Truncation based on the UILineBreakMode.
- (CGSize)sizeWithFont:(UIFont *)font; // Uses UILineBreakModeWordWrap
- (CGSize)sizeWithFont:(UIFont *)font forWidth:(CGFloat)width lineBreakMode:(UILineBreakMode)lineBreakMode;

// for multi lined
// Wrapping to fit horizontal and vertical size. Text will be wrapped and truncated using the UILineBreakMode. If the height is less than a line of text, it may return
// a vertical size that is bigger than the one passed in.
// If you size your text using the constrainedToSize: methods below, you should draw the text using the drawInRect: methods using the same line break mode for consistency

- (CGSize)sizeWithFont:(UIFont *)font constrainedToSize:(CGSize)size; // Uses UILineBreakModeWordWrap;
- (CGSize)sizeWithFont:(UIFont *)font constrainedToSize:(CGSize)size lineBreakMode:(UILineBreakMode)lineBreakMode; 
```

例如：

```
NSString *valueString = @"This is example";
CGSize newSize = [valueString sizeWithFont: [UIFont fontWithName: @"TrebuchetMS" size: 12] ];

// assign new size
CGRect textFrame = textbox. frame;
textFrame. size  = newSize; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T06:46:03.677

你试过这个吗

```
CGRect frame= yourTextField.frame;
frame.size.width=your_required_width;
yourTextField.frame=frame; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T06:58:42.473

看看[这个](https://stackoverflow.com/a/9132270/729763)帖子

它向您展示了使用`sizeWithFont`它为您提供了一个来自文本大小的 CGSize 对象。然后用这个 CGSize 对象的数据编辑你的文本框。

# android - 如何在android中单击警报对话框的按钮时启动进度对话框？

> ID：12210120
> 
> 赞同：0
> 
> 时间：2012-08-31T06:42:13.990
> 
> 标签：android, progressdialog, android-alertdialog

我想在单击警报对话框的“是”按钮时启动进度对话框。但是当我运行它时。它给了我一个窗口已经集中的警告，忽略了焦点增益。它有时有效，有时会发出警告。并且进度对话框不会启动。请提供一些建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T07:07:54.720

例如 -

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    AlertDialog.Builder ab = new AlertDialog.Builder(this);
    ab.setMessage("Choose Yes/No :");
    ab.setPositiveButton("Yes", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface arg0, int arg1) {
            // TODO Auto-generated method stub
            arg0.dismiss();
            ProgressDialog pd = new ProgressDialog(PDActivity.this);
            pd.setMessage("test");
            pd.show();
            pd.setCancelable(true);
        }
    });

    ab.setNegativeButton("No", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            // TODO Auto-generated method stub

        }
    });
    ab.show();
} 
```

像上面那样试试..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T06:44:02.257

在启动进度对话框之前关闭警报对话框。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T06:58:33.707

单击是按钮时，首先关闭警报对话框，然后启动进度对话框。

# javascript - 获取数组中多个html对象的id

> ID：12210124
> 
> 赞同：0
> 
> 时间：2012-08-31T06:42:21.237
> 
> 标签：javascript, jquery, html

一个 div 中有多个对象。我想通过他们的类获取所有这些元素的 id。元素的数量可以变化。我这样做是

```
arr= $(".listitem #checkBox").hasClass('checkedItem').attr('id'); 
```

但它只返回第一项

如果我用它作为

```
arr= $(".listitem #checkBox").hasClass('checkedItem').map(function() {
     return this.id;
}).get(); 
```

控制台上的错误是`Object true has no method 'map'`

如何获取所有 **CheckedItems的 ID**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T06:45:25.320

该[`.hasClass()`方法](http://api.jquery.com/hasClass/)返回一个布尔值，指示 jQuery 对象中的任何元素是否具有该类，而布尔值没有`.map()`方法。

相反，使类成为选择器的一部分，以便 jQuery 对象仅包含具有该类的元素：

```
arr= $(".listitem #checkBox .checkedItem").map(function() {
     return this.id;
}).get(); 
```

请注意，您的原始选择器`".listitem #checkBox"`应该只匹配一个或零个元素，因为 id 应该是唯一的。出于这个原因，我在上面假设您正在尝试检查属于`#checkBox`. 让我知道您的 html 的结构，我可以调整选择器以匹配...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T06:46:30.493

这里的问题是您正在尝试查询多个项目，但您正在使用 ID 进行查找。

```
arr= $(".listitem #checkBox").... 
```

（`#checkBox`部分）

此代码永远不会返回数组。

[HTML 4.01 的 ID 属性规范](http://www.w3.org/TR/1999/REC-html401-19991224/struct/global.html#adef-id)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T06:49:35.870

使用它，您将获得所有已检查项目的 id

```
var selected = new Array();
$('#checkbox input:checked').hasClass('checkedItem').each(function() {
    selected.push($(this).attr('id'));
}); 
```

# java - 我应该如何编写 .i 文件以在 Java 或 C# 中包装回调

> ID：12210129
> 
> 赞同：7
> 
> 时间：2012-08-31T06:42:38.373
> 
> 标签：java, c#, c, swig

我的 C 程序使用定期调用的回调函数。我希望能够处理 Java 或 C# 程序中的回调函数。我应该如何编写 .i 文件来实现这一点？

C 回调看起来是这样的：

```
static void on_incoming_call(pjsua_acc_id acc_id, pjsua_call_id call_id, pjsip_rx_data *rdata) 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-03T16:09:57.657

如果您有机会通过回调传递一些数据，您可以这样做，但您需要编写一些 JNI 胶水。我整理了一个完整的示例，说明如何将 C 风格的回调映射到 Java 接口。

您需要做的第一件事是确定一个适合 Java 端的接口。我假设在 C 中我们有如下回调：

```
typedef void (*callback_t)(int arg, void *userdata); 
```

我决定在 Java 中将其表示为：

```
public interface Callback {
  public void handle(int value);
} 
```

（`void *userdata`Java 端的丢失并不是一个真正的问题，因为我们可以将状态存储在很简单的`Object`实现中`Callback`）。

然后我编写了以下头文件（它不应该只是一个头文件，但它使事情变得简单）来练习包装：

```
typedef void (*callback_t)(int arg, void *data);

static void *data = NULL;
static callback_t active = NULL;

static void set(callback_t cb, void *userdata) {
  active = cb;
  data = userdata;
}

static void dispatch(int val) {
  active(val, data);
} 
```

我能够使用以下接口成功包装这个 C：

```
%module test

%{
#include <assert.h>
#include "test.h"

// 1:
struct callback_data {
  JNIEnv *env;
  jobject obj;
};

// 2:
void java_callback(int arg, void *ptr) {
  struct callback_data *data = ptr;
  const jclass callbackInterfaceClass = (*data->env)->FindClass(data->env, "Callback");
  assert(callbackInterfaceClass);
  const jmethodID meth = (*data->env)->GetMethodID(data->env, callbackInterfaceClass, "handle", "(I)V");
  assert(meth);
  (*data->env)->CallVoidMethod(data->env, data->obj, meth, (jint)arg);
}
%}

// 3:
%typemap(jstype) callback_t cb "Callback";
%typemap(jtype) callback_t cb "Callback";
%typemap(jni) callback_t cb "jobject";
%typemap(javain) callback_t cb "$javainput";
// 4:
%typemap(in,numinputs=1) (callback_t cb, void *userdata) {
  struct callback_data *data = malloc(sizeof *data);
  data->env = jenv;
  data->obj = JCALL1(NewGlobalRef, jenv, $input);
  JCALL1(DeleteLocalRef, jenv, $input);
  $1 = java_callback;
  $2 = data;
}

%include "test.h" 
```

该界面有很多部分：

1.  A`struct`存储调用 Java 接口所需的信息。
2.  的一个实现`callback_t`。它接受`struct`我们刚刚定义的用户数据，然后使用一些标准 JNI 调度对 Java 接口的调用。
3.  一些类型映射会导致`Callback`对象作为真实的`jobject`.
4.  一个类型映射，它在 Java 端隐藏`void*`并设置`callback`数据并为实际函数填充相应的参数，以使用我们刚刚编写的函数将调用分派回 Java。它采用对 Java 对象的全局引用，以防止随后对其进行垃圾收集。

我写了一个小 Java 类来测试它：

```
public class run implements Callback {
  public void handle(int val) {
    System.out.println("Java callback - " + val);
  }

  public static void main(String argv[]) {
    run r = new run();

    System.loadLibrary("test");
    test.set(r);
    test.dispatch(666);    
  }
} 
```

如您所愿。

需要注意的几点：

1.  如果您`set`多次调用，它将泄漏全局引用。您要么需要提供一种取消设置回调的方法，防止设置多次，要么使用弱引用。
2.  如果您周围有多个线程，您将需要`JNIEnv`比我在这里更聪明。
3.  如果您想混合 Java 和 C 的回调实现，那么您需要在此解决方案上进行相当多的扩展。您可以公开 C 函数以用作回调，`%constant`但这些类型映射将阻止您的包装函数接受此类输入。可能你会想要提供重载来解决这个问题。

[在这个问题](https://stackoverflow.com/questions/4313004/registering-java-function-as-a-callback-in-c-function)中有一些更好的建议。

我相信 C# 的解决方案会有些相似，具有不同的类型映射名称和您用 C 编写的回调函数的不同实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-18T22:11:28.560

### C++ 到 C# 回调示例

这很好地允许 C++ 执行对 C# 的回调。

测试下：

*   `C#`: 视觉工作室 2015
*   `C++`: 英特尔 Parallel Studio 2017 SE
*   `C++`：应该适用于 Visual Studio 2015 C++（任何人都可以验证这一点吗？）。
*   `C++`：对于生成标准 .dll 的任何其他 Windows C++ 编译器应该可以很好地工作（任何人都可以验证这一点吗？）。

在您的 SWIG`.i`文件中，包含此文件`callback.i`：

```
//////////////////////////////////////////////////////////////////////////
// cs_callback is used to marshall callbacks. It allows a C# function to
// be passed to C++ as a function pointer through P/Invoke, which has the
// ability to make unmanaged-to-managed thunks. It does NOT allow you to
// pass C++ function pointers to C#.
//
// Tested under:
// - C#: Visual Studio 2015
// - C++: Intel Parallel Studio 2017 SE
//
// Anyway, to use this macro you need to declare the function pointer type
// TYPE in the appropriate header file (including the calling convention),
// declare a delegate named after CSTYPE in your C# project, and use this
// macro in your .i file. Here is an example:
//
// C++: "callback.h":
//    #pragma once
//    typedef void(__stdcall *CppCallback)(int code, const char* message);
//    void call(CppCallback callback);
//
// C++: "callback.cpp":
//    #include "stdafx.h" // Only for precompiled headers.
//    #include "callback.h"
//    void call(CppCallback callback)
//    {
//        callback(1234, "Hello from C++");
//    }
//
// C#: Add this manually to C# code (it will not be auto-generated by SWIG):
//    public delegate void CSharpCallback(int code, string message);
//
// C#: Add this test method:
//    public class CallbackNUnit
//    {
//        public void Callback_Test()
//        {
//            MyModule.call((code, message) =>
//            {
//                // Prints "Hello from C++ 1234"
//                Console.WriteLine(code + " " + message);
//            });   
//        }        
//    }
//
// SWIG: In your .i file:
//   %module MyModule
//   %{
//     #include "callback.h"
//   %}
//   
//   %include <windows.i>
//   %include <stl.i>
//   
//   // Links typedef in C++ header file to manual delegate definition in C# file.
//   %include "callback.i" // The right spot for this file to be included!
//   %cs_callback(CppCallback, CSharpCallback)
//   #include "callback.h"
//
// As an alternative to specifying __stdcall on the C++ side, in the .NET
// Framework (but not the Compact Framework) you can use the following
// attribute on the C# delegate in order to get compatibility with the
// default calling convention of Visual C++ function pointers:
// [UnmanagedFunctionPointerAttribute(CallingConvention.Cdecl)]
//
// Remember to invoke %cs_callback BEFORE any code involving Callback. 
//
// References: 
// - http://swig.10945.n7.nabble.com/C-Callback-Function-Implementation-td10853.html
// - http://stackoverflow.com/questions/23131583/proxying-c-c-class-wrappers-using-swig             
//
// Typemap for callbacks:
%define %cs_callback(TYPE, CSTYPE)
    %typemap(ctype) TYPE, TYPE& "void *"
    %typemap(in) TYPE  %{ $1 = ($1_type)$input; %}
    %typemap(in) TYPE& %{ $1 = ($1_type)&$input; %}
    %typemap(imtype, out="IntPtr") TYPE, TYPE& "CSTYPE"
    %typemap(cstype, out="IntPtr") TYPE, TYPE& "CSTYPE"
    %typemap(csin) TYPE, TYPE& "$csinput"
%enddef 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-31T07:03:30.847

C# 解决方案：您必须使用委托。看代码示例

```
public delegate void DoSome(object sender);

public class MyClass{
      public event DoSome callbackfunc;

      public void DoWork(){
            // do work here 
            if(callbackfunc != null)
                     callbackfunc(something);
      }
} 
```

这也类似于事件处理机制，但理论上两者在 c# 中都有相同的实现

Java解决方案：必须使用接口，看这个示例代码

```
interface Notification{
      public void somthingHappend(Object obj);
}

class MyClass{
     private Notification iNotifer;

     public void setNotificationReciver(Notification in){
            this.iNotifier = in;
     }

     public void doWork(){
            //some work to do
            if(something heppens){ iNotifier.somthingHappend(something);}
     }
} 
```

实际上您可以使用通知列表来实现一组回调接收器

# jquery - 如何让 jquery 像 CSS 悬停一样悬停？

> ID：12210130
> 
> 赞同：1
> 
> 时间：2012-08-31T06:42:39.260
> 
> 标签：jquery, css, hover

我在这里使用 jquery 和 css 代码制作了两个悬停效果：

[http://jsfiddle.net/UFSvN/3/](http://jsfiddle.net/UFSvN/3/)

jquery hover 和 css hover 是有区别的。对于jquery悬停，如果您将鼠标移动到框上很短的时间并快速离开框，它将同时运行鼠标进入和鼠标离开动画并完成它们，而鼠标进入后鼠标不在框上-动画结束...

但是对于css悬停，如果悬停该框，悬停效果将运行鼠标离开动画，前提是您将鼠标悬停在框上直到鼠标悬停动画结束/完成！

我怎样才能让 jquery 像 CSS 悬停一样悬停？！当我将鼠标移到盒子上一秒钟时，我不想让整个动画完全运行！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T06:46:39.823

用于[`.stop()`](http://api.jquery.com/stop/)停止当前正在运行的动画。

示例：http: [//jsfiddle.net/UFSvN/4/](http://jsfiddle.net/UFSvN/4/)

在小提琴中，我传入了 'true' 作为参数。这将清除动画队列。请阅读 jQuery 文档；它还向您展示了许多其他很酷的事情，例如传递第二个参数以跳转到动画的末尾。

# php - Freebsd 中旋转 postfx 生成的邮件日志的默认工具是什么？

> ID：12210138
> 
> 赞同：1
> 
> 时间：2012-08-31T06:43:03.540
> 
> 标签：php, linux, logging, freebsd, postfix-mta

我的情况是我想在我的 php 脚本发送邮件后随时轮换 postfix 的邮件日志。
这样我就可以分析日志文件，将不同的错误消息发送给不同的发件人，然后删除旋转的日志文件，防止原始邮件日志变得太大。
我的 Freebsd 版本是 8.0 发行版。
是否有可能我不必安装任何额外的程序工具，从而增加了设置系统的难度。
提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T06:50:54.467

不能`logrotate`对你有帮助吗？它是用于在 nix 系统上进行日志轮换的相当标准的工具。

如果我处于您的情况，我会使用`logrotate`并编写自定义脚本来对日志执行我想要的操作：由于您没有以精确的方式表达您的需求，因此很难给出准确的答案。

当您说要为此使用 PHP 时，我希望您的意思不是“从 Web 服务器内部”，而是“作为系统脚本语言”。例如，我真的不会让 Apache PHP 模块操纵系统日志。实际上，我会确保它们不在它的范围内。

此外，我认为这可能是[服务器故障](https://serverfault.com/)或[UNIX / Linux](https://unix.stackexchange.com/)的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T18:19:42.050

FreeBSD 使用[newsyslog(8)](http://www.freebsd.org/cgi/man.cgi?query=newsyslog)进行日志轮换。它由 /etc/newsyslog.conf 配置，默认情况下使用 /var/log/maillog 的每日轮换。

如果确实有必要，您可以通过调用来触发非预定轮换`newsyslog -F /var/log/maillog`。但是恕我直言，最好不要并且只更改 newsyslog.conf 中的策略，因为 a) 不需要额外的代码，b) 意味着配置记录了系统的状态。

# oracle - ArcSDE 数据库重构工具选项

> ID：12210140
> 
> 赞同：2
> 
> 时间：2012-08-31T06:43:03.853
> 
> 标签：oracle, gis, arcgis, liquibase, refactoring-databases

我们在我们的应用程序中使用 liquibase 作为进化的数据库变更管理工具，当我们在“通用”数据库模式中使用它时效果很好。

但是我们也使用 esri arcSDE 9.3 平台而不是 Oracle 来处理 GIS 应用程序，在这种情况下，模式中的所有（或几乎所有）表（GIS 和“字母数字”表）都通过以下方式进行管理（创建表、授权等）弧SDE。因此，当我们现在要创建新的要素类时，我们使用 arcCatalog，这样就无法使用 liquibase 或其他自动重构工具直接通过 SQL 来管理要素类的更改。

因此，如果我们不能使用 liquibase 来管理更改，至少我们希望通过命令行对我们的功能执行管理操作。我们已经开始寻找避免使用 arcCatalog 的工具，然后尝试使用脚本自动化更改，我们正在研究这些可能性：

1.  每次我们对监视 oracle 连接的一个要素类进行更改时，尝试捕获 arcCatalog/arcSDE 正在执行的 SQL。它给我们带来了一组过于复杂的 SQL 指令，包括索引、版本控制表等，所以我们放弃了这种方式。

2.  使用安装在 arcSDE 服务器上的[sdelayer 和 sdetable 管理命令。](http://resources.esri.com/help/9.3/geodatabase/pdf/admincmd.pdf)

3.  使用[数据管理工具](http://webhelp.esri.com/arcgisdesktop/9.3/index.cfm?TopicName=An_overview_of_the_data_management_toolbox)：一个基于 python 的库来管理要素类，但它必须在安装了桌面版本的机器上执行。

最后两个选项将提供一种从命令行管理功能的方法，但我们的目标是找到/开发一种工具来管理类似于 liquibase 的方式的更改。但是有了这些工具，我们必须找到一个工具，让我们将每个 SQL DDL 操作映射到一个 arcSDE 命令，而目前没有 db 重构工具提供这个（目前我们有检查 liquibase、dbdeploy、flyway）。

有人用 arcSDE 解决了这个进化变更管理问题吗？对解决此问题的另一种方法有何见解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T03:26:28.850

尽管我不熟悉您提到的其中一种产品（特别是 liquibase - 我使用过 Oracle 并且我非常熟悉 ArcGIS（ArcMap 和 ArcCatalog），但我会对此进行尝试。

这只是一些可能有助于我对您的问题的解释的附加信息。

我的解释 - “有什么简单的方法可以管理或使我们能够自动管理 Oracle 数据库中的 GIS 数据表，而不必一直使用 ArcCatalog？”

所以 - 我将把这个概念重新投入使用 - 我知道 SQL Server 具有空间数据类型“几何”等，并且您可以绕过 SDE 并让 ArcGIS 直接连接和解释这些数据，甚至无需安装 SDE。我也知道 Oracle 有兼容的空间类型。因此，我可能会考虑从 ArcCatalog 创建的托管 FC 迁移我的数据，并将它们推送到基于 oracle-native 几何的表中。通过这种方式，您可以将它们视为常规表，从解决方案中删除 ESRI，并使用 liquibase 等管理它们。希望这会有所帮助。

我还会考虑升级到 10.1 或至少 10.0（我保证我不是卧底推销员），尽管这将要求您的用户在客户端与您一起 (http://resources.arcgis.com/en/ help/main/10.1/index.html#//002q000000n8000000），因为如果您确实选择使用 Python 来管理您的东西，那么新的 python API 使用起来更容易和更快（arcpy 与 GP 模型）。（不管怎样，这两个 API 都不是很好开发的，而且编码不直观或速度不快。）

祝你好运。

# php - Kohana 3.2 中使用 ORM 模型（结果）的字段的自定义过滤器

> ID：12210141
> 
> 赞同：0
> 
> 时间：2012-08-31T06:43:05.017
> 
> 标签：php, orm, model, filter, kohana

我想知道是否有办法从 ORM 中过滤结果。我希望为我的模型创建一个自定义方法，例如，用于过滤来自我的数据库的输出。现在，只能以表单的形式过滤来自 POST 的数据以将它们保存到数据库中，但是，我想要相反。

如果我的表中有一个名为“identification”的字段，其值为“8-985-256”，我希望该值为“08-0985-00256”（不要担心如何添加额外的零，那部分简单）。

假设我的模型上有一个名为“format_identification”的自定义方法。然后，我使用 ORM 类获取数据，如下所示：

```
$user = ORM::factory('user', 1); 
```

我想回显标识，但是使用正确的格式：

```
echo $user->format_identification(); 
```

这应该打印“08-0985-00256”。如果我使用字段的名称，那可以，但是值的格式不是。

我希望你明白我想要做什么。

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:28:46.323

将公共方法添加到您的`Model_User`文件中，称为`format_identification`：

```
<?php defined('SYSPATH') or die('No direct access allowed.');

class Model_User extends ORM {

    public function format_identification() {

        $identification_value = $this->identification;

        // Add the extra zeros to value

        return $identification_value;

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-04T10:24:05.740

我认为有更好的方法来解决您的问题：

```
class Model_User extends ORM {

    public function __get($column) {
        if($column=='identification'){
         // Do your stuff
        }
        return parent::__get($column);
    }

} 
```

# php - 我可以将数据传递给 Codeigniter 输出类而不显示它吗？

> ID：12210144
> 
> 赞同：16
> 
> 时间：2012-08-31T06:43:13.390
> 
> 标签：php, codeigniter, codeigniter-2, dompdf

我正在努力让用户能够生成发票和其他表格数据的 PDF 副本。为此，我将[dompdf](http://code.google.com/p/dompdf/)包装到一个可以与 CI 一起使用的库中，并创建了一个方法，该方法将根据 CI 的返回值生成 PDF `output->get_output()`。包装器类似于[Github 上的这个](https://github.com/hadiariawan/CodeIgniter-Dompdf-Library)。

问题是，我想不出一种方法将视图（以及 PDF 所需的 HTML/CSS）放入 CI 的输出类中，而不是`load->view()`，它将写入浏览器。

我唯一的其他选择是使用 curl 来请求页面，但这似乎很愚蠢，因为我可以从输出缓冲区中得到它。我只是不希望将 HTML 发送到浏览器，因为我设置了标题告诉浏览器期待 PDF。

需要明确的是，这就是我想要完成的（按照我想要完成的顺序）：

1.  做我通常会做的一切来准备要显示的视图
2.  将视图加载到 CI 输出类中，但不显示它
3.  将返回值传递`output->get_output()`给我的 dompdf 库
4.  设置适当的标题
5.  执行我的 dompdf 方法，将 PDF 发送到浏览器

[根据输出类文档](http://codeigniter.com/user_guide/libraries/output.html)，我看不到任何执行步骤 2 的方法。

是否可以在不显示的情况下查看输出类？如果是这样，怎么做？我正在使用 CI 2.0.3。

**编辑**

非常有帮助的[Anthony Sterling](https://stackoverflow.com/users/734499/anthony-sterling)指出，我可以通过设置第三个参数告诉加载器类返回一个字符串而不是将视图呈现为 TRUE，从而[从加载器类中获取我想要的东西。](https://twitter.com/AnthonySterling/status/241426835634786304)例如：

```
$lotsaHtml = $this->load->view('fooview', $somearray, TRUE); 
```

这在我的特定情况下会更好，因为我不需要加载部分。*但是，这仍然是一个有效且（我认为）有趣的问题，如果我确实*有一堆部分，那么知道我是否可以从 OB 得到相同的结果也会很方便。这些可以连接起来，但是很糟糕。

似乎我应该能够让输出类不渲染任何东西（否则，为什么`get_output()`存在？）所以我可以用它知道的一切做其他事情。我只是找不到实现这一目标的方法。

**编辑 2**

一些伪代码（但离现实不远）通过展示我所做的然后解释我真正*想做*的来说明我希望做什么。

假设我在使用名为的模型命名`genpdf($id)`的控制器中有一个公共方法：`invoice``inv`

```
public function genpdf($invoiceId) {
    $this->load->library('dompdflib');
    $this->pagedata['invoice_data'] = $this->inv->getInvoice($invoiceId);
    $html = $this->load->view('pdfgen', $this->pagedata, TRUE);
    $this->dompdflib->sendPdf($html);
} 
```

这与我现在可以使用的代码几乎相同。在那里，我要求加载程序解析并将`pdfgen`视图的结果作为字符串提供给我，我将其传递给我的 dompdf 包装器中的函数，该函数设置标题并将 PDF 发送到浏览器。

只需获取输出缓冲区本身（在正确设置标题/等之后），这似乎很容易做到。

还是我只需要`append_output()`在加载的每个部分都连续调用输出类？

加载大量模型的多个方法需要协同工作才能生成这些（它们是事后才加入的），所以我希望将它们全部收集起来并直接从输出类中检索它。可能我只需要逐步交谈`output->append_output()`才能实现这一目标。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-08T11:32:45.797

...所以-我理解正确吗-您想将整个最终输出（不仅仅是视图）作为字符串而不显示给用户吗？为什么不重载控制器的 _output() 函数？

```
class Your_controller extends CI_Controller
{
       function stuff()
       {
           // do whatever - prep $data etc
           $this->load->view('your_view', $data);
       }

       function _output($output)
       {
           // send $output to your library - get results blah blah
           $result_pdf_file = $this->your_pdf_library_generator($output);

           // Show something else to the user
           echo "hi - I'm not what you expected - but here is your PDF";

           echo $result_pdf_file; // or something like that
       }
 } 
```

这意味着您可以将任何您喜欢的内容发送到输出类 - 但除了您想要的内容之外，什么都不会显示。

有一些方法可以改进这个想法（即钩子，打开/关闭输出的变量等） - 但最简单的方法是让这个控制器专门用于您的 pdf_generation 命令。

> 根据输出类文档，我看不到任何执行步骤 2 的方法。是否可以在不显示的情况下查看输出类？如果是这样，怎么做？我正在使用 CI 2.0.3。

控制器 _output() 文档实际上在[CI 控制器文档](http://codeigniter.com/user_guide/general/controllers.html#output)中，这就是它躲避您的原因。

# java - 休眠获取操作导致更新操作

> ID：12210147
> 
> 赞同：0
> 
> 时间：2012-08-31T06:43:29.277
> 
> 标签：java, spring, hibernate

我们使用 HibernateTemplate 来获取一个对象，但是它会导致一个更新动作。我们的数据库是只读的，因为我们不需要更新数据。

为什么会这样？请帮我..

我的代码：

```
 public <T> T get(Class<T> clasz, Serializable id) {
    return (T) getHibernateTemplate().get(clasz, id); 
```

}

错误信息如下：

```
org.springframework.jdbc.UncategorizedSQLException: Hibernate operation: Could not execute JDBC batch update; uncategorized SQLException for SQL [update kytv_resource_station set area=?, create_id=?, create_time=?, display=?, modify_id=?, modify_time=?, nature=?, partner=?, showDomain=?, status=?, tv_character=?, tv_desc=?, tv_elogo=?, tv_elogo_id=?, tv_keyword=?, tv_logo=?, tv_logo_id=?, tv_name=?, tv_order=?, tv_short_name=?, tv_show_name=?, tv_tvm_name=? where id=?]; SQL state [HY000]; error code [1290]; The MySQL server is running with the --read-only option so it cannot execute this statement; nested exception is java.sql.BatchUpdateException: The MySQL server is running with the --read-only option so it cannot execute this statement
        at org.springframework.jdbc.support.SQLStateSQLExceptionTranslator.translate(SQLStateSQLExceptionTranslator.java:124)
        at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.translate(SQLErrorCodeSQLExceptionTranslator.java:322)
        at org.springframework.orm.hibernate3.HibernateAccessor.convertJdbcAccessException(HibernateAccessor.java:424)
        at org.springframework.orm.hibernate3.HibernateAccessor.convertHibernateAccessException(HibernateAccessor.java:410)
        at org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:424)
        at org.springframework.orm.hibernate3.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:374)
        at org.springframework.orm.hibernate3.HibernateTemplate.get(HibernateTemplate.java:522)
        at org.springframework.orm.hibernate3.HibernateTemplate.get(HibernateTemplate.java:516) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:23:29.573

由于此查询，您的程序有错误

```
 update kytv_resource_station set area=?, create_id=?, create_time=?, display=?, modify_id=?, modify_time=?, nature=?, partner=?, showDomain=?, status=?, tv_character=?, tv_desc=?, tv_elogo=?, tv_elogo_id=?, tv_keyword=?, tv_logo=?, tv_logo_id=?, tv_name=?, tv_order=?, tv_short_name=?, tv_show_name=?, tv_tvm_name=? where id=? 
```

您的程序显示 MySql 错误 1290，在 mysql 文档中这意味着

```
 The MySQL server is running with the %s option so it cannot execute this statement. 
```

您的意思是`Our database are read-only`，为什么要进行更新操作。如果您需要正确答案，请发布带有编辑问题的代码。

# android - 在 Android 的 PutExtra 中传递图像

> ID：12210156
> 
> 赞同：3
> 
> 时间：2012-08-31T06:43:46.217
> 
> 标签：android, image, android-intent

我想将我在 PutExtra() 中设置为按钮的背景图像与意图对象传递给另一个类。

任何人都可以知道该怎么做吗？

谢谢大卫布朗

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-03-28T08:07:38.220

发件人活动：

```
Bitmap bitmap = BitmapFactory.decodeResource
                (getResources(), R.drawable.sticky_notes); // your bitmap
        ByteArrayOutputStream bs = new ByteArrayOutputStream();
        bitmap.compress(Bitmap.CompressFormat.JPEG, 50, bs);
        intent.putExtra("byteArray", bs.toByteArray()); 
```

接收者活动：

```
 if(getIntent().hasExtra("byteArray")) {
            ImageView imv= new ImageView(this);
            Bitmap bitmap = BitmapFactory.decodeByteArray(
                    getIntent().getByteArrayExtra("byteArray"), 0, getIntent().getByteArrayExtra("byteArray").length);
            imv.setImageBitmap(bitmap);
          } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T06:46:22.630

Intent 只能保留 40 KB。如果您可以压缩小于 40 KB 的图像 - 您可以将其放入附加文件中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T06:52:18.403

```
intent.putExtra("imageData", bitmap) 
```

更好的方法是创建链接而不是直接传递位图。

```
intent.putExtra("image_url",R.drawable.image); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T06:54:45.670

尝试这个...

首先在位图中获取图像。

```
Bitmap tileImage = BitmapFactory.decodeResource(getResources(), R.drawable.floore); 
```

将其转换为字节数组。

```
 ByteArrayOutputStream stream = new ByteArrayOutputStream();
      photo.compress(Bitmap.CompressFormat.PNG, 100, stream);
      byte[] byteArray = stream.toByteArray();

      Bundle b = new Bundle();
      b.putByteArray("camara",byteArray);

      Intent intent3 = new Intent(this,Second.class);
      intent3.putExtras(b);
      startActivity(intent3); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T06:48:15.627

如果您确定它不会从内存中删除（换句话说 - 不要像那样存储位图），您可以通过`Bitmap`（因为它正在实施）。`Parcelable`

`Bitmap`它本身只是原生资源的一个小型 Java 包装器，因此不会占用太多空间。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-14T01:28:00.513

传递可能非常大的文件时要小心，例如照片或图库文件。即使压缩它，大小也可能超过 putExtra 的可接受限制。我建议从图库中发送文件的图像链接或文件路径。在我的应用程序中，我总是尽可能地压缩我的文件，但总是有一个应用程序崩溃。

```
Intent intent = new Intent(getActivity(), PhotoViewActivity.class);
intent.putExtra("url", url);
//OR file path
intent.putExtra("path", path);
startActivityForResult(intent,PHOTO_VIEW_REQUEST); 
```

在那种情况下，在 PhotoViewActivity

```
 String url = getIntent().getStringExtra("url");
    String path = getIntent().getStringExtra("path");
    if(url != null && !url.isEmpty()){
        //Get using Picasso or other framework
    }else if(path != null && !path.isEmpty()){
        //In my case I transform in Bitmap
        //see this link for more detail : https://stackoverflow.com/questions/16804404/create-a-bitmap-drawable-from-file-path

    }else{
        //Throw exception and close activity
    } 
```

如何在 Bitmap 中转换路径： [从文件路径创建 Bitmap/Drawable](https://stackoverflow.com/questions/16804404/create-a-bitmap-drawable-from-file-path)

# wcf - 在序列化时忽略 DataMember

> ID：12210157
> 
> 赞同：2
> 
> 时间：2012-08-31T06:43:49.823
> 
> 标签：wcf, c#-4.0, serialization

我有一个 WCF 服务，想忽略序列化中的某些部分。我怎么做？我用 IgnoreDatamember() 进行了测试，但它不起作用。

```
[DataContract(Name = "M")]
public class Message
{
    [DataMember(Name = "H"), IgnoreDataMember()]
    public MessageHeader Header { get; set; }

    [DataMember(Name = "B")]
    public string Body { get; set; } 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T06:50:45.063

只需删除完整的`DataMember`属性。

# objective-c - 在 Objective-C iOS 中增加/减少一个数字

> ID：12210160
> 
> 赞同：0
> 
> 时间：2012-08-31T06:44:38.013
> 
> 标签：objective-c, ios, cocoa-touch, uikit

我是 xcode 和 iOS 编程的新手。我已遵循本教程： [http ://www.thetutorialblog.com/cocoa-objective-c/creating-a-basic-ipad-application/](http://www.thetutorialblog.com/cocoa-objective-c/creating-a-basic-ipad-application/)

我让它与一个“- 按钮”、一个标签和一个“+ 按钮”一起工作。但我想要其中的多个，我已经添加了教程代码并像这样复制它：

```
IBOutlet UILabel *currentNumber2;

-(IBAction)incrementNumber2:(id)sender2;
-(IBAction)decrementNumber2:(id)sender2;

-(IBAction)incrementNumber2:(id)sender2 {
    number++;
    [currentNumber2 setText:[NSString stringWithFormat:@"%d", number]];
}

-(IBAction)decrementNumber2:(id)sender2 {
    number--;
    [currentNumber2 setText:[NSString stringWithFormat:@"%d", number]];
} 
```

但是当我按下第一个 + 按钮时，它会在第一个标签中增加 +1，然后当我按下第二个 + 按钮时，它会继续从 label2 中的第一个按钮开始计数，所以它会输入 2。明白吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:08:39.647

这是面向对象编程的典型行为：该对象的`number`每个方法调用都共享单个实例。如果你想支持多个`number`实例，你有两个选择：向你的类添加更多实例变量，并在你创建更多实例时开始添加越来越多的代码，或者只是生成你的类的一个新实例。

请注意，您将很快做出有价值的认识：有时*建模域*与我们的应用程序域具有不同的*对象需求*（即您应该说“但我不应该制作更多我的实例`UIViewController`！！”，而您是对）。*这是迈向 iOS深度*支持的架构的第一步：模型-视图-控制器。在这种情况下`number`，您的模型应该与控制器分离，控制器应该能够处理任意数量的它们（不仅仅是您碰巧创建 ivars 的数量）。

这是一条很好的道路:-)

# ruby-on-rails - 具有嵌套模型的表单

> ID：12210171
> 
> 赞同：0
> 
> 时间：2012-08-31T06:46:10.227
> 
> 标签：ruby-on-rails, models, nested-forms

我正在尝试创建一个具有一个模型（“请求”）嵌套在另一个模型（“订单”）中的表单的站点。具体来说，我希望订单/新页面有一个由用户可以填写然后提交的请求组成的表单，因此它们都与创建的订单相关联。

根据某人的建议，我查看了有关该主题的 Railscast (#196)，我遇到了一个我无法弄清楚的问题，所以我想我会问。问题是，我正在按照他的指示进行操作，但请求表并没有出现。然而，与 Order 模型相关的表单字段出现了，我真的很困惑，因为我基本上是逐字复制了 Railscast。想法？

这是我的表单代码。特别是 fields_for 标记中未显示在我的网站上的部分：

```
<%= form_for(@order) do |f| %>
  <% if @order.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@order.errors.count, "error") %> prohibited this order from being saved:</h2>

      <ul>
      <% @order.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

    <p>
        <%= f.label :user_name %><br />
        <%= f.text_field :user_name %>
    </p>
    <p>
        <%= f.label :user_email %><br />
        <%= f.text_field :user_email %>
    </p>

<% f.fields_for :requests do |builder| %>
    <p>
        <%= builder.label :item, "Item" %><br />
        <%= builder.text_field :item %>
    </p>
    <p>
        <%= builder.label :lbs, "LBs" %> <br />
        <%= builder.text_field :lbs %>
    </p>
<% end %>

    <p><%= f.submit "Submit Order" %></p>
<% end %> 
```

这是我的两个模型的代码，先订购：

```
class Order < ActiveRecord::Base
  attr_accessible :order_status, :price_estimate, :price_final, :user_email, :user_name, :user_phone
  has_many :requests, :dependent => :destroy
  accepts_nested_attributes_for :requests
end

class Request < ActiveRecord::Base
  attr_accessible :item, :lbs, :notes, :order_id, :status
  belongs_to :order
end 
```

最后，如果它是相关的，我根据演员的建议添加到我的订单控制器创建操作中：

```
def new
    @order = Order.new
    3.times { @order.requests.build }

    respond_to do |format| # this part I copied from a tutorial. But when I commented it out, it didn't change anything, so I don't think this is the problem
      format.html # new.html.erb
      format.json { render json: @order }
    end
  end 
```

帮助？我对此感到非常困惑。我猜这个问题可能与“建造者”有关，但我对此并不陌生，一个小时左右的摆弄并没有带来多少收获。

非常感谢任何帮助。（另外，作为一个后记。我放弃并上床睡觉，明天再看这个。抱歉，如果我在那之前没有跟进任何问题）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:19:32.443

我在这里看到两个错误。

在视图中，替换：

```
<% f.fields_for :requests do |builder| %> 
```

和：

```
<%= f.fields_for :requests do |builder| %> 
```

在您的订单模型中，替换：

```
attr_accessible :order_status, :price_estimate, :price_final, :user_email, :user_name, :user_phone 
```

和：

```
attr_accessible :order_status, :price_estimate, :price_final, :user_email, :user_name, :user_phone, :requests_attributes 
```

# delphi - TSQLQuery.FieldByName().AsString -> TStringStream 损坏数据

> ID：12210174
> 
> 赞同：4
> 
> 时间：2012-08-31T06:46:28.857
> 
> 标签：delphi, stream, sql-server-2008-r2, delphi-xe2

我正在使用德尔福 XE2。我的代码从 SQL-Server 2008 R2 数据库中提取数据。返回的数据是一个`nvarchar(max)`包含 1,055,227 字节数据的字段。我使用以下代码将字段数据保存到文件中：

```
procedure WriteFieldToFile(FieldName: string; Query: TSQLQuery);
var
  ss: TStringStream;
begin
  ss := TStringStream.Create;
  try
    ss.WriteString(Query.FieldByName(FieldName).AsString);
    ss.Position := 0;
    ss.SaveToFile('C:\Test.txt');
  finally
    FreeAndNil(ss);
  end;
end; 
```

当我在十六进制查看器中检查文件时，前 524,287 个字节（正好是 1/2 兆）看起来是正确的。其余字节（524,288 到 1,055,227）都是空值（#0），而不是原始数据。

这是将字符串字段从 a 保存`TSQLQuery`到文件的正确方法吗？我选择使用`TStringStream`是因为我最终会添加代码来对流上的数据执行其他操作，而使用`TFileStream`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T07:21:58.957

`TStringStream`is `TEncoding`-aware 在 XE2 中，但您没有在构造函数中指定任何编码，因此`TEncoding.Default`将使用，这意味着您提供给它的任何字符串都将在内部转换为操作系统默认的 Ansi 编码。确保编码支持您尝试使用的 Unicode 字符，或者指定更合适的编码，例如`TEncoding.UTF8`.

还要确保它`AsString`返回一个有效且正确的`UnicodeString`值。`TStringStream`如果将垃圾作为输入，将无法正确保存数据。确保`FieldByName()`返回一个指向`TWideStringField`对象而不是`TStringField`对象的指针，以便正确处理数据库的 Unicode 数据。

# c# - 使用 C# 应用程序的 asp.net 中的 Sql Query 错误

> ID：12210176
> 
> 赞同：1
> 
> 时间：2012-08-31T06:46:34.877
> 
> 标签：c#, sql

我只是试图通过数据网格显示详细信息利用此查询

```
select 
P.Sitename as Site
,P.Vendorname as Vendor
,P.POno,PS.Itemcode as ItemCode
,sum(PS.Quantity) as Qty
,sum(PS.Basic) as Basic
,Sum(PS.DiscountAmt) as [Disc Amt]
,sum(PS.PFAmt) as [PF Amt]
,sum(PS.EDAmt) as [ED Amt]
,sum(PS.VATCSTAmt) as [VATCST Amt]
,sum(PS.Netamt) as Total
,I.Itemname as Itemname
,I.UOM as UOM  
from tbl_Itemmaster I, tbl_Purchaseorder_sub PS,tbl_Purchaseorder P 
where P.POdate between '8/30/2012' and '8/31/2012' 
and PS.status in (4,5) 
and I.Itemidentify=Ps.ITemcode 
and PS.pono=p.POno 
group by PS.Itemcode,P.Sitename,P.Vendorname,I.Itemname,I.UOM   
order by Site,Vendor,ItemCode 
```

但是，我在执行此操作时遇到错误，即

```
"Column 'tbl_Purchaseorder.POno' is invalid in the select list because 
it is not contained in either an aggregate function or the GROUP BY clause." 
```

请谁能告诉我我该如何纠正它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T06:50:42.410

您需要将 POno 添加到 GROUP BY Cluase

就像是

```
select  P.Sitename as Site,
        P.Vendorname as Vendor,
        P.POno,
        PS.Itemcode as ItemCode,
        sum(PS.Quantity) as Qty,
        sum(PS.Basic) as Basic,
        Sum(PS.DiscountAmt) as [Disc Amt],
        sum(PS.PFAmt) as [PF Amt],
        sum(PS.EDAmt) as [ED Amt],
        sum(PS.VATCSTAmt) as [VATCST Amt],
        sum(PS.Netamt) as Total ,
        I.Itemname as Itemname,
        I.UOM as UOM  
from    tbl_Itemmaster I, 
        tbl_Purchaseorder_sub PS,
        tbl_Purchaseorder P 
where   P.POdate between '8/30/2012' 
and     '8/31/2012' 
and     PS.status in (4,5) 
and     I.Itemidentify=Ps.ITemcode 
and     PS.pono=p.POno 
group by    PS.Itemcode,
            P.Sitename,
            P.Vendorname,
            I.Itemname,
            I.UOM,
            P.POno <-- You need to add this to your query
order by    Site,
            Vendor,
            ItemCode 
```

# sql - 如何在查询中获取逗号分隔值？

> ID：12210178
> 
> 赞同：3
> 
> 时间：2012-08-31T06:46:44.160
> 
> 标签：sql, sql-server

嗨，我有一张桌子叫`tbdSales`

```
Brand     Cust_ID  Prd_ID

Aftron  44301   T3485
Aftron  44301   T0628
Aftron  44301   T2952
Aftron  44301   T1958
Aftron  44302   T1940
Aftron  44302   T1939
Aftron  44303   T2419
Aftron  44303   T2045 
```

在此表中，我希望用&`Product_ID`与 group 分隔逗号`Brand``Cust_ID`

我产生了如下查询：

```
SELECT DISTINCT 
      Brand
    , Cust_ID
    , (
        SELECT DISTINCT second_id + ', ' 
        FROM tbdSales t2
        WHERE t2.Brand = t1.Brand AND t2.Cust_ID = t1.Cust_ID
        FOR XML PATH('')
    ) AS prd_ID into SalReport
FROM tbdSales t1 
GROUP BY Brand,Cust_ID 
```

上面的查询给出了结果。但是，如果记录更多（10,000 条），则需要 5 分钟左右的时间。

请让我知道减少查询完成时间的任何其他方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:30:43.423

试试这个[SQLFiddle 示例](http://sqlfiddle.com/#!3/0d425/16)。它使用[带有 CTE 的递归查询](http://msdn.microsoft.com/en-us/library/ms186243%28SQL.105%29.aspx)。要获得更快的结果，您需要 Brand、Cust_ID、Prd_ID 上的索引：

```
with t2 as 
( select t0.*,
  row_number() over (partition by Brand,Cust_id order by Prd_id asc) G_id
  from
 (
  select distinct Brand,Cust_id,Prd_id from tbdSales
 ) t0 

 ),
  t1 as (
    select t.*,
           cast(Prd_id as varchar(max)) as m2
     from t2 t where g_id=1

 union all
 select b.*,
        cast(c.m2+','+b.Prd_id as varchar(max)) as m2
     from t2 b
         inner join t1 c
             on (c.g_id+1 = b.G_id) 
                and (b.Brand=c.Brand)
                and (b.Cust_id=c.Cust_Id)

)
  select brand,cust_id,M2 as Prd_id from 
  (
  select t1.*, 
         row_number() over (partition by Brand,Cust_id order by g_id desc) rn 
             from t1
  ) t3 where rn=1
 order by Brand,Cust_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:41:37.770

```
SELECT distinct brand, Cust_ID, Replace( Replace( Replace(
                            (   select t2.Prd_ID
                                from @Sales as t2 
                                where t2.brand = t1.brand and t2.Cust_ID = t1.Cust_ID
                                For XML Raw)
                                 , '"/><row Prd_ID="', ', ')
                                 , '<row Prd_ID="', '')
                                 , '"/>', '') FROM  @Sales t1 
```

你好，试试这个。

# php - Amazon SQS 消息未在 PHP 中删除

> ID：12210189
> 
> 赞同：0
> 
> 时间：2012-08-31T06:47:36.653
> 
> 标签：php, amazon-web-services, amazon-sqs

我列出了我的 Amazon SQS 队列中的消息，然后可以选择删除它们，一次一条。当我删除消息时，我会收到一条成功消息。但是，没有一条消息被删除，它们都返回到队列中。

这是列表队列代码：

```
<?php
include_once("sdk.class.php");

// Instantiate
$sqs = new AmazonSQS();
$rows = $sqs->get_queue_size('https://sqs.us-east-1.amazonaws.com/199992002821/SomeQueueSQS');

echo "<table>";
echo "<tr>";
echo "<td width=20 valign=top bgcolor=" . $adHeading . " align=left><strong>No</strong></td>";
echo "<td width=200 valign=top bgcolor=" . $adHeading . " align=left><strong>Message</strong></td>";
echo "<td width=50 align='right' bgcolor=" . $adHeading . "><a href='sqs.php'><img src='images/icon_refresh.png' border='0'></a></td>";
echo "</tr>";

for ($j = 0; $j < $rows; ++$j)
  {

    // Get Message
    $response = $sqs->receive_message('https://sqs.us-east-1.amazonaws.com/199992002821/SomeQueueSQS', array(
  'VisibilityTimeout' => 30
));
$body = $response->body->ReceiveMessageResult->Message[0]->Body;
$rcpt_hand=($response->body->ReceiveMessageResult->Message[0]->ReceiptHandle);

    $id = $j + 1;

    echo "<tr>";
    echo "<td valign=top bgcolor=" . $bgcolor . ">$id</td>";
    echo "<td valign=top bgcolor=" . $bgcolor . ">$body</td>";
    echo "<td valign=top><a href=sqsdelete.php?sid=$rcpt_hand><img   src=images/icon_delete.gif border=0 width=18 height=18></a></td>";
    echo "</tr>";

  }

echo "</table>";
?> 
```

这是删除代码：

```
<?php

if ($response = $sqs->delete_message('https://sqs.us-east-1.amazonaws.com/199992002821/SomeQueueSQS', $rcpt_hand)) {
  echo "Message deleted<br>";
} else {
  echo "Message not deleted<br>";
}

// Get list of unprocessed and valid messages
$rows = $sqs->get_queue_size('https://sqs.us-east-1.amazonaws.com/199992002821/SomeQueueSQS');

echo "<table>";
etc... 
```

谢谢

安德烈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:36:50.397

您的删除代码中的`if()`条件是错误的。您的条件将*始终*返回 true。

您需要提出请求，然后检查`$response->isOK()`is`true`或`false`. 如果请求成功完成，AWS 将返回一个`2xx`状态码，该`isOK()`方法将返回`true`.

如果您进行了更改并开始看到失败，请使用`print_r($response->body)`查看 SQS 发回的错误消息。那应该可以帮助您调试。

# asp.net-mvc - 使用 CSS 时如何使用 Action Link

> ID：12210193
> 
> 赞同：0
> 
> 时间：2012-08-31T06:47:46.890
> 
> 标签：asp.net-mvc, html, css, razor, asp.net-mvc-4

```
<li class="rtsLI" id="Summary"><a href="javascript:void(0);" onclick="javascript:rtsXXX.OnClientTabSelected(this‌​, 0);" class="rtsLink"><span class="rtsTxt">Test</span></a></li> 
```

上面我替换为以下操作链接：

```
<li class="rtsLI" >@Html.ActionLink("test1", "Index", new { Area = "Area1", Controller = "controller1" }, new { @class = "rtsLink rtsTxt"})</li> " 
```

起初css工作正常。但是在使用 Actionlink 时，css 不起作用。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T07:32:18.617

标准的 ActionLink 帮助程序总是对链接文本进行 HTML 编码。这意味着如果你想在里面渲染 HTML，你就不能使用它。您有 3 种可能性：

1.  修改你的CSS，这样你就不需要在链接中使用span，这样`rtsTxt`类就可以直接应用于链接
2.  编写一个不对文本进行 HTML 编码的自定义 ActionLink 帮助器，它允许您生成相同的标记：

    ```
    public static class ActionLinkExtensions
    {
        public static IHtmlString ActionLinkUnencoded(
            this HtmlHelper htmlHelper, 
            string linkText, 
            string actionName, 
            object routeValues, 
            object htmlAttributes
        )
        {
            var urlHelper = new UrlHelper(htmlHelper.ViewContext.RequestContext);
            var link = new TagBuilder("a");
            link.MergeAttributes(new RouteValueDictionary(htmlAttributes));
            link.Attributes["href"] = urlHelper.Action(actionName, routeValues);
            link.InnerHtml = linkText;
            return new HtmlString(link.ToString());
        }
    } 
    ```

    进而：

    ```
    <li>
        @Html.ActionLinkUnencoded(
            "<span class=\"rtsTxt\">User Security</span>", 
            "index", 
            new { area = "Tools", controller = "UserSecurity" }, 
            new { @class = "rtsLink" }
        )
    </li> 
    ```

3.  使用 Url.Action 助手：

    ```
    <li class="rtsLI">
        <a href="@Url.Action("index", new { area = "Tools", controller = "UserSecurity" })" class="rtsLink">
            <span class="rtsTxt">User Security</span>
        </a>
    </li> 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:04:33.870

这样写代码：

```
<li class="rtsLI" >@Html.ActionLink("<span class='rtsTxt'>User Security</span>", "Index", new { Area = "Tools", Controller = "UserSecurity" }, new { @class = "rtsLink"})</li>` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T07:32:39.147

最好的选择是使用`@Url.Action`扩展方法

```
<li class="rtsLI" id="Summary"><a href="@Url.Action("Index", new { Area = "Tools", Controller = "UserSecurity" })" class="rtsLink"><span class="rtsTxt">User Security</span></a></li> 
```

# javascript - Javascript，使用原型定义两个具有相同名称的函数（跨两个不同的文件）

> ID：12210194
> 
> 赞同：0
> 
> 时间：2012-08-31T06:47:48.323
> 
> 标签：javascript, internet-explorer-8, internet-explorer-9, prototype

我有一些代码，其中一个文件（文件 A）中有一个“var Signature”。并且在同一个文件 A 中创建了一个方法“Signature.prototype.PreSaveSignature = ..”。然后在第二个文件（文件 B）中，创建相同的方法“Signature.prototype.PreSaveSignature = ..”。

现在在 IE8 及更低版本中，它执行文件 B 中的方法……而在 IE9 中，它执行文件 A 中的方法。如何？使用原型有两个同名的方法有什么正当理由吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T06:54:20.477

同一个原型上不能有两个不同的方法同名。最后定义的那个将对将来创建的对象起作用。您可以将其`Signature.prototype.PreSaveSignature`视为方法指针的存储槽。它只能保存一个值，最后分配给该存储槽的值就是将用于签名`Signature()`对象的值。

如果您在不同的浏览器中遇到不同的行为，那是因为您在一个浏览器中遇到了不同的错误，或者您在不同的浏览器中获得了不同的加载和执行时间以及动态加载的内容。

# jquery - 根据 URL 突出显示特定的 DIV

> ID：12210195
> 
> 赞同：0
> 
> 时间：2012-08-31T06:47:59.573
> 
> 标签：jquery, html, css

我有一个**常见问题**列表，例如，页面`faq.html`如下：

```
<div id="faq1">...</div>
<div id="faq2">...</div> 
```

`DIVs`当我通过特定的 URL 将访问者发送到那里时，我现在想跳动或简单地突出其中一个。在我的结帐页面上说我有一个链接说它`"Find help here"`链接到`#faq2`.

如何通过在 URL 中添加触发器来在**元素**`(pulsate/blink)`的背景中触发简单的突出显示动画，如下所示：`FAQ Div`

 **[http://www.test.com/faq.html?highlight=faq2](http://www.test.com/faq.html?highlight=faq2)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T06:51:09.073

如果您可以将[片段](http://en.wikipedia.org/wiki/Fragment_identifier)添加到 URL，则可以使用 CSS`:target`伪类。

[http://jsfiddle.net/9yNVp/](http://jsfiddle.net/9yNVp/)

HTML：

```
<a href="#see" id="see">See</a> <a href="#works" id="works">works</a> <a href="#well" id="well">well</a>​ 
```

CSS：

```
a:target{
    transition:background-color 1s ease-in;
    -webkit-transition:background-color 1s ease-in;
    -moz-transition:background-color 1s ease-in;
    background-color: yellow;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T06:52:11.290

为了突出它，你可以这样做

```
var Blinkcnt = 0;
function BlinkDiv(DivId) {
    if (Blinkcnt % 2 == 0) {
        $('#' + DivId).animate({ backgroundColor: "#E1E1E1" }, 500);
        Blinkcnt += 1;
    }
    else {
        $('#' + DivId).animate({ backgroundColor: "#F8F8F8" }, 500);
        Blinkcnt += 1;
    }
    if (Blinkcnt < 10) {
        setTimeout(function () {
            BlinkDiv();
        }, 500);
    }
    else {
        Blinkcnt = 0;
        $('#' + DivId).animate({ backgroundColor: "#F8F8F8" }, 500);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T06:52:24.440

您可以使用 CSS`:target`选择器来使用它（因此`faq2`仅当片段为 时才定位`#faq2`，使用`faq2:target` `{ ... }`）。

还要对其进行动画处理，请查看**CSS3 过渡**和关键帧。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T07:01:28.537

```
$(function() {
    var params = window.location.href.split('?')[1].trim().split('&');
    var location = '';

    for( var i=0; i<params.length; i++ ) {
        var pair = params[i].split('=');
        location = pair[0] ==='highlight' ? pair[1] : '';
    }

    if ( location ) {
        $('#'+location).effect("highlight", {}, 3000);
        // or $('#'+location).effect("pulsate", { times:3 }, 2000);
    }
}); 
```

[http://docs.jquery.com/UI/Effects/Highlight](http://docs.jquery.com/UI/Effects/Highlight)
[http://docs.jquery.com/UI/Effects/Pulsate](http://docs.jquery.com/UI/Effects/Pulsate)**

# java - 线程“main”中的异常 java.nosuchmethoderror:main

> ID：12210196
> 
> 赞同：0
> 
> 时间：2012-08-31T06:48:02.987
> 
> 标签：java

> **可能重复：**
> ['java.lang.NoSuchMethodError：线程“main”中的主要异常'的原因](https://stackoverflow.com/questions/5407250/causes-of-java-lang-nosuchmethoderror-main-exception-in-thread-main)

我是java的新手。我想写一个程序来交换2个。
我在上面写了 2 个程序。一个正在运行，另一个没有。
我无法理解未运行程序的错误。请帮助我理解我的错误。
在这里，我给你两个程序以及输出。

正在运行的程序：

```
public class SwapElementsExample {

public static void main(String[] args) {

int num1 = 10;
int num2 = 20;

System.out.println("Before Swapping");
System.out.println("Value of num1 is :" + num1);
System.out.println("Value of num2 is :" +num2);
swap(num1, num2); 
}

private static void swap(int num1, int num2) {  
int temp = num1;  
num1 = num2;  
num2 = temp;  

System.out.println("After Swapping");
System.out.println("Value of num1 is :" + num1);
System.out.println("Value of num2 is :" +num2);
}
} 
```

输出是：

num1 的交换
值之前是：10
num2 的值是：20 num1 的
交换
值之后是：20
num2 的值是：10

在上述程序中我没有任何问题。
但在下一个程序中，我找不到什么故障。
请帮我找出错误。

```
class Swap  
{  
public static void main(int a, int b)  
{  
int c=0;  
c=b;  
b=a;  
a=c;  
c=0;  
System.out.println(a);  
System.out.println(b);  
}  
} 
```

在执行中没有错误消息。
但在运行时有一个错误消息，即：
线程“main”中的异常 java.nosuchmethoderror:main

请让我知道这个程序的问题。

* * *

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T06:49:46.307

`public static void main(int a, int b)` 是不正确的。

必须是： `public static void main(String[] args)`。这是根据定义。

如果要获取第一个和第二个参数：

```
int a = Integer.parseInt(args[0]);
int b = Integer.parseInt(args[1]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T06:49:56.997

问题出在这里

```
public static void main(int a, int b) 
```

Java 总是从您在第一个示例代码中声明的 main 方法开始执行程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T06:54:41.710

当您启动 java 应用程序时，java 解释器会尝试查找方法

```
public static void main(String[] args) 
```

运行应用程序。

在一个类中，您可以声明多个具有相同名称但具有不同参数的方法。像那样：

```
public static void main(String[] args) {

}

public static void main(int a, int b) {

}

public static void main(float a, float b) {

} 
```

所有这些方法都将被编译器接受。因为每个方法都不是仅仅通过它的名字来识别的，而是通过它的名字和签名来识别的。签名基于您传递给方法的参数。每个参数的类型和参数序列都是签名体。

因此，当您在没有内部方法的情况下启动应用程序时`public static void main(String[] args)`，解释器无法找到`main`具有预期签名的方法`String[] args`，并引发异常。

# php - 索引数组 foreach 速记

> ID：12210200
> 
> 赞同：0
> 
> 时间：2012-08-31T06:48:16.120
> 
> 标签：for, foreach, php, php, 语言无关, 编程语言, php, loops, language-agnostic, programming-languages

数据：

```
$players = array(
    new Player('psycketom'),
    new Player('stackexchanger'),
    new Player('max')
); 
```

通常，为了从数组中的每个对象中获取一些东西，我们必须使用[for](/questions/tagged/for "显示标记为“为”的问题") / [foreach](/questions/tagged/foreach "显示标记为“foreach”的问题")。

```
foreach ($players as $player)
{
    var_dump( $player->score );
} 
```

但是，由于这是一项重复性任务，**有没有办法将其简化为沿着这些想象的线（？）**：

```
var_dump( every( $players )->score );

every( $players )->score += 40; 
```

由于我没有看到[php](/questions/tagged/php "显示标记为“php”的问题")的这种功能，**有没有办法实现它？**

我已经使用[php](/questions/tagged/php "显示标记为“php”的问题")作为主要语言提出了这个问题，但是与[语言无关](/questions/tagged/language-agnostic "显示标记为“与语言无关”的问题")和[编程语言](/questions/tagged/programming-languages "显示标记为“编程语言”的问题")代表问题的第二部分：**哪些语言支持这种或至少类似的速记？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T06:58:01.660

所以，你是正确的，PHP 不支持这种“开箱即用”（除了有点，见下文）。我所知道的第一种语言是Objective-C（嗯，至少是CoreFoundation 库）。NSArrays 和其他集合具有（在一行中）指示[应在所有成员上执行给定方法的方法](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/doc/uid/20000137-BABCBHFG)；更酷（至少对我来说）是“keypaths”的概念以及[NSArray](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/doc/uid/20000137-BBCIBCDJ)和其他人对它们的支持。一个例子; 假设您有一组“人”，每个人都有一个父母，而他们又有一个“名字”：

```
arrayOfNames = [peopleArray valueForKeyPath:"parent.name"]; 
```

arrayOfNames 现在是所有父母姓名的数组。

PHP 最接近的东西是[array_map](http://us3.php.net/manual/en/function.array-map.php)，您可以将它与匿名函数一起使用以非常快速地将某些东西组合在一起。

**尽管可能是轶事**，但应该记住，如果只有一条语句要执行，则循环结构*不需要*花括号；所以任何更好的解决方案都需要与之竞争：

```
foreach($players as $p) $p->score += 40; 
```

我会为那些 OOP 粉丝提到一个*更深层次*的解决方案......如果你使用集合对象而不是数组，那么世界就是你的牡蛎，拥有这样的东西。想到的最简单的概念就是php的魔术`__call()`方法。迭代您的成员并为您的用户发出调用有多简单？为了获得更多控制，您可以实施几种不同的迭代策略（一种用于转换，一种用于过滤器等。本质上，差异是返回的内容）。所以理论上你可以创建几个不同的迭代器类，并在你的“主”集合类中实现几个方法来获取其中一个，这些方法将使用以下内容进行预初始化：

```
$players->transform()->addScore(40); 
```

其中 transform() 返回“不返回数组”迭代器的实例，该迭代器使用 __call() 技术。

此时天空开始打开，您可以开始构建过滤迭代器，它接受谓词并返回对象子集的另一个集合，这样的语法是可能的：

```
// send flyer to all parents with valid email address
$parentsPredicate = new Predicate('email');
$players->filteredByPredicate($parentsPredicate)->each()->email($fyler_email_body); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T06:53:15.413

你可以这样做：

```
var_dump(array_map(function($el){return $el->score;}, $players));

array_walk($players, function($el) {$el->score += 40;}); 
```

# php - PHP登录脚本上的对象移动页面

> ID：12210202
> 
> 赞同：0
> 
> 时间：2012-08-31T06:48:23.723
> 
> 标签：php, redirect

我已经整理了一个登录脚本，整理我的意思是我从论坛中复制并粘贴了一些代码片段，并通过反复试验使其正常工作。

到目前为止脚本工作正常，登录时根本没有问题，唯一的问题来自当您尝试登录而不填写任何字段时，它给了我一些奇怪的错误并将我重定向到一个空白页面

> 对象移动
> 
> 该文件可以在这里找到

这不是一个大问题，因为我不明白为什么人们会尝试使用空白字段登录，但这是我想知道如何解决以供将来参考的问题。

以下是我的代码的登录部分：

```
<?php
session_start();

$data=array("user1"=>array("url"=>"page1.php","password"=>"12345"),
            "user2"=>array("url"=>"page2.php","password"=>"12345"),
        "user3"=>array("url"=>"page3.php","password"=>"12345")
        );

if(isset($_POST['username']) && isset($_POST['password'])) {

    $user = strtolower($_POST['username']);
    $pass = strtolower($_POST['password']);

    if($data[$user]['password'] == $pass) {     
       $_SESSION['username'] = $user . " " . $pass;
       header('Location: ' . $data[$user]['url']);
    } else {
        echo '<script type="text/javascript">window.onload = function() { document.getElementById("loginError").innerHTML = "' . "Invalid login details. Please try again." . '"; }</script>';
        logIn();
    }
} else {
    logIn();
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T06:54:13.093

确保或更改 `header('Location: ' . $data[$user]['url']); 重定向时是绝对路径，而不是相对路径。请参阅相关帖子作为我[在 IIS7 上的回答 PHP - Receiving "Object Moved" html page 而不是实际重定向的](https://stackoverflow.com/questions/5382219/php-on-iis7-receiving-object-moved-html-page-instead-of-actually-redirecting)证明。

要解决该空白密码问题，请将检查更改为以下内容：

```
if(isset($_POST['username']) && !empty($_POST['username']) && 
    isset($_POST['password']) && !empty($_POST['password']) ) { 
    //Do code here
}
else
{
   logIn(); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T06:54:40.337

当您比较要使用的字符串时，`===`或`!==`：

```
...
$user = strtolower(trim($_POST['username']));
$pass = strtolower(trim($_POST['password']));

if($user !== '' && $pass !== '') {
  //continue with login logic
  if($data[$user]['password'] === $pass) { 
  ...
}
else{
//print error
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-31T07:30:32.677

在尝试读取不存在的数组索引的密码和 URL 之前，您应该检查用户名是否存在于数组中。

```
session_start();

$data=array("user1"=>array("url"=>"page1.php","password"=>"12345"),
            "user2"=>array("url"=>"page2.php","password"=>"12345"),
            "user3"=>array("url"=>"page3.php","password"=>"12345")
            );

if (!empty($_POST['username'] && !empty($_POST['password'])) {

    $user = strtolower($_POST['username']);
    $pass = strtolower($_POST['password']);

    if (isset($data[$user]) && $data[user]['password'] == $pass) {
        $_SESSION['username'] = $user . ' ' . $pass;
        header("Location: " . $daa[$user]['url']);
    } else {
        echo '<script type="text/javascript">window.onload = function() { document.getElementById("loginError").innerHTML = "' . "Invalid login details. Please try again." . '"; }</script>';
        logIn();
    }

} else {
    logIn();
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-31T07:09:35.353

我认为没有定义 logIn() 函数....请检查。如果还没有，请也为您的 html 发布代码。

# android - Android：调整画廊项目的大小

> ID：12210213
> 
> 赞同：1
> 
> 时间：2012-08-31T06:49:19.110
> 
> 标签：android, android-imageview, android-gallery

我`Gallery`在我的项目中使用。我想要的功能如下：

1.  屏幕上一次应该有 5 个可见的图像。
2.  图像数量可以动态增加或减少。
3.  中心图像或者我们可以说选择的图像应该大于四个图像的其余部分。（0,1,[2],3,4）。
4.  中心 1 的相邻图像应小于所选图像，但大于角落处的图像。（0，[1]，2，[3]，4）。
5.  屏幕角落的图像应小于其余图像。

我不知道如何实现这一点。我已经改变了中心的大小，`ImageView`但我不知道如何设置其余四个图像的大小。请提供此问题的解决方案。

这是我更改 ImageView 大小的代码

```
import android.content.Context;
import android.graphics.drawable.BitmapDrawable;
import android.util.Log;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.Gallery;
import android.widget.ImageView;
import android.widget.ImageView.ScaleType;

public class InfiniteGalleryResourceAdapter extends BaseAdapter {
/** The width of each child image */
private static final int G_ITEM_WIDTH = 60;
/** The height of each child image */
private static final int G_ITEM_HEIGHT = 250;

/** The context your gallery is running in (usually the activity) */
private Context mContext;
private int imageWidth;
private int imageHeight;
/** The array of resource ids to draw */
private final int[] imageIds;

public InfiniteGalleryResourceAdapter(Context c, int[] imageIds ) {

    this.mContext = c;
    this.imageIds = imageIds;
}

/**
 * The count of how many items are in this Adapter
 * This will return the max number as we want it to scroll as much as possible
 */
@Override
public int getCount() {
    return imageIds.length;
}

@Override
public Object getItem(int position) {
    return position;
}

@Override
public long getItemId(int position) {
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    // convertView is always null in android.widget.Gallery

    ImageView i = getImageView();
    int itemPos = (position % imageIds.length);

    try {
        // first we calculate the item position in your list, because we have said the adapters size is Integer.MAX_VALUE
        // the position getView gives us is not use-able in its current form, we have to use the modulus operator
        // to work out what number in our 'array of paths' this actually equals
        Log.d("item position", String.valueOf(itemPos));

        i.setImageResource(imageIds[itemPos]);
        ((BitmapDrawable) i.getDrawable()).setAntiAlias(true); // Make sure we set anti-aliasing otherwise we get jaggies (non-smooth lines)

    } catch (OutOfMemoryError e) {
        // a 'just in case' scenario
        Log.e("InfiniteGalleryResourceAdapter", "Out of memory creating imageview. Using empty view.", e);
    }

    return i;
}

/**
 * Retrieve an ImageView to be used with the Gallery
 * @return an ImageView with width and height set to DIP values
 */
private ImageView getImageView() {
    setImageDimensions();

    ImageView i = new ImageView(mContext);
    i.setLayoutParams(new Gallery.LayoutParams(imageWidth, imageHeight));
    i.setScaleType(ScaleType.CENTER_INSIDE);
    return i;
}

/**
 * Sets the dimensions for each View that is used in the gallery
 * lazily initialized so that we don't have to keep converting over and over
 */
private void setImageDimensions() {
    if (imageWidth == 0 || imageHeight == 0) {
        imageWidth = AndroidUtils.convertToPix(mContext, G_ITEM_WIDTH);
        imageHeight = AndroidUtils.convertToPix(mContext, G_ITEM_HEIGHT);
    }
}
} 
```

# ruby-on-rails - 在控制器内创建一个新的 Rails 应用程序

> ID：12210214
> 
> 赞同：0
> 
> 时间：2012-08-31T06:49:21.850
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

嗨，我创建了一个新的 rails 应用程序。在控制器内部，我使用了一个 shell cmd 来创建一个新的 rails 应用程序，

```
class DemoController < ApplicationController
  def index
    exec "rails new testing -d postgresql"
  end

  def list
  end
end 
```

我收到以下错误。无法在另一个目录中初始化新的 Rails 应用程序，请先切换到非 Rails 目录。输入“rails”寻求帮助。

我知道在另一个应用程序中创建一个新的 Rails 应用程序是不可能的。

是否有任何函数可以在 exec 命令中指定存储位置？或类似这样的 exec "[directory location] rails new testing -d postgresql"..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T06:56:55.910

您可以将路径传递给`rails new`命令：

```
system "rails new /target/folder/testing -d postgresql" 
```

或者`cd`到目标文件夹然后运行`rails new`​​. 像这样：

```
system "cd /target/folder && rails new testing -d postgresql" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-14T16:44:54.997

我知道这已经很晚了，但是想做类似的事情，这对我有用：

1.  `cd ~/Projects; rails new #{@app.name}`（周围有反引号）- 这个是“默默地”执行的。没有显示输出，应用程序在`rails new`运行时挂起

2.  `system "cd ~/Projects; rails new #{@app.name}"`- 这显示了控制台上的输出，即生成的文件与应用程序一起显示，`bundle install`同时应用程序挂起

3.  `exec "cd ~/Projects; rails new #{@app.name}"`- 这会关闭服务器并显示和的`rails new`输出`bundle install`

我想从另一个应用程序中创建一个应用程序。在你的情况下，我想你可以这样做： `exec "cd folder_name; rails new testing -d postgresql"`. 我建议您使用前两个选项中的任何一个来`exec`关闭服务器并使您的应用程序停止。

# android - 如何阅读收到的短信

> ID：12210219
> 
> 赞同：0
> 
> 时间：2012-08-31T06:49:39.070
> 
> 标签：android

> **可能重复：**
> [检测短信传入和传出](https://stackoverflow.com/questions/2735571/detecting-sms-incoming-and-outgoing)

我想读取传入的短信以检查短信中是否存在特定值

我发现这个短信接收代码我想检查接收短信是否具有以下值 xml 值

请帮助我如何检查

```
//this is response which i check in reciving sms

00
LOG
00
Adeel Aslam
10.00
10/05/2012 10:00
+100

//this is code which i found for sms recive
     public class SmsReceiver extends BroadcastReceiver
  {
@Override
public void onReceive(Context context, Intent intent) 
{
    //---get the SMS message passed in---
    Bundle bundle = intent.getExtras();        
    SmsMessage[] msgs = null;
    String str = "";            
    if (bundle != null)
    {
        //---retrieve the SMS message received---
        Object[] pdus = (Object[]) bundle.get("pdus");
        msgs = new SmsMessage[pdus.length];            
        for (int i=0; i<msgs.length; i++){
            msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
            str += "SMS from " + msgs[i].getOriginatingAddress();                     
            str += " :";
            str += msgs[i].getMessageBody().toString();
            str += "\n";        
        }
        //---display the new SMS message---
        Toast.makeText(context, str, Toast.LENGTH_SHORT).show();
    }   

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T06:54:52.473

您可以使用`contains()`方法检查短信中是否存在特定单词。

```
 if(str.contains("LOG"))
  {
    // Perform your task here.
   } 
```

# javascript - 从.js文件调用html中的js函数

> ID：12210222
> 
> 赞同：1
> 
> 时间：2012-08-31T06:49:56.687
> 
> 标签：javascript, html

好的，我知道如何在我的 html 中注册我的 js 文件并从我的 html 文件中调用 .js 中的函数。在这里我试图做相反的事情，我在 .js 文件中有一个函数，我想调用我的 html 文件中的一个函数。我该如何注册 html （实际上是 .aspx ），但这对于这个问题的范围并不重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T06:52:58.417

只需确保在 .js 包含中的代码调用它之前在页面上定义了 HTML 中的 JavaScript 函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T06:54:22.310

只需将外部脚本包含在页面的正文标记末尾或函数声明后的任何位置。

**页面**：

```
<body>
    content content
     <script>
        /* Function to be called */
        function s(){
           alert('Hello World!');
        }
     </script>
     <script src="myJS.js"></script>
</body> 
```

**myJS.js**：

```
/* Call a page function */
s(); 
```

当您的外部文件被加载时，您的函数`s()`将被声明。

# html - 仅水平滚动的容器 div 内的 2 行 div

> ID：12210223
> 
> 赞同：0
> 
> 时间：2012-08-31T06:50:03.627
> 
> 标签：html, css, horizontal-scrolling

我有一个带有导航缩略图的图像滑块。我想要做的是缩略图将被布置成 2 行。每行有 6 个 div（意味着首先显示 12 个 div），然后当有多余时它水平溢出并且应该有一个水平滚动。这与这个问题有关：

[强制横向扩展](https://stackoverflow.com/questions/5743065/force-horizontal-expansion)。唯一不同的是

我希望我的 div 显示 2 行而不是 1 行。我已经设法使用上述链接给出的解决方案显示一行。

这是我的代码：HTML

```
<div id="nav">
      <div id="thumbsWrap">
            <img alt="thumbnail">
            <img alt="thumbnail">
            <img alt="thumbnail"> 
             and so on and so on......
       </div>
 </div> 
```

CSS

```
 #nav{bottom: 26px;height: 128px;left: 108px;overflow-x: auto; overflow-y:hidden;     position: absolute;width: 756px;}
#nav #thumbsWrap{width: auto; white-space: nowrap}
#nav a.thumbs{width:116px; height:95px; background: #4e5b63; display:inline-block; border-radius:8px; margin:6px 10px 0 0;} 
```

任何帮助将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T07:47:42.933

如果您要使用相同的 div 两次，请使用类而不是 ID。ID 不应该重复，特别是如果 JS 正在使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T06:58:52.850

唯一简单的方法是添加两次相同的 div。

```
<div id="nav">
    <div class="thumbsWrap">
        <img alt="thumbnail">
        <img alt="thumbnail">
        <img alt="thumbnail"> 
        and so on and so on......
    </div>
    <div class="thumbsWrap">
        <img alt="thumbnail">
        <img alt="thumbnail">
        <img alt="thumbnail"> 
        and so on and so on......
    </div>
</div> 
```

在这里演示[http://jsfiddle.net/txCzq/32/](http://jsfiddle.net/txCzq/32/)

# string - 搜索唯一网址

> ID：12210233
> 
> 赞同：0
> 
> 时间：2012-08-31T06:51:04.107
> 
> 标签：string, algorithm, hash, string-search

给定一组 100 万（非常大）的编号。URL 的。从列表中找到“第一个”“唯一”URL。

我的方法：使用完美的散列函数构建散列，这会有所帮助。但是我的问题是散列大数据是不可能的，那么我该如何解决这个问题。

有什么方法可以就地做吗？请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:09:43.883

给定一个输入列表`["c","a","b","a","c"]`，我的第一种方法是：

1.  将 URL 列表转换为元组列表，该列表将每个元素与其在列表中的位置相关联。现在你有`[(0,"c"),(1,"a"),(2,"b"),(3,"a"),(4,"c")]`.
2.  按第二个元组元素（URL）按字典顺序对列表进行排序。现在你有`[(1,"a"),(3,"a"),(2,"b"),(0,"c"),(4,"c")]`.
3.  将后续相等元组的序列（如果第二个元素相等，则元组相等）分组到子列表中。现在你有`[[(1,"a"),(3,"a")],[(2,"b")],[(0,"c"),(4,"c")]]`.
4.  过滤列表，使您只有长度为 1 的列表。现在您有了`[[(2,"b")]]`.
5.  如果结果列表为空，则列表中没有唯一的 URL。如果它非空，则按第一个元组元素（字符串中的位置）对列表进行排序。在这种情况下，您会得到相同的列表 - `[[(2,"b")]]`。
6.  取列表的第一个元素。现在你有`[(2,"b")]`.
7.  此列表中的 ( *only* ) 元组告诉您第一个唯一 URL，以及输入列表中的位置：它是输入列表`b`中位置的 URL `2`。

# php - 什么替换了 Smarty 3 中的 register_modifier

> ID：12210235
> 
> 赞同：5
> 
> 时间：2012-08-31T06:51:10.303
> 
> 标签：php, smarty, template-engine

我正在考虑从 2 升级到 Smarty 3 并使用注册了少量修饰符

```
register_modifier($ModifierName, $FunctionName) 
```

我在文档中找不到指示我应该将这些更改为的位置，我已经尝试过了。

```
$Smarty->Register->Modifier( 
```

但得到一个错误。有人可以指出我的文档。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T06:59:42.193

原来它已被移至

```
registerPlugin() 
```

[http://www.smarty.net/docs/en/api.register.plugin.tpl](http://www.smarty.net/docs/en/api.register.plugin.tpl)

# r - 如何使用 vapply 下载网页？

> ID：12210237
> 
> 赞同：1
> 
> 时间：2012-08-31T06:51:13.377
> 
> 标签：r

我可以使用 lapply、sapply、mapply 下载网页。

```
urls <- c(
    "http://stat.ethz.ch/R-manual/R-devel/library/base/html/connections.html",
    "http://en.wikipedia.org/wiki/Xz")
x1=lapply(urls,readLines)
x2=sapply(urls,readLines)
x3=mapply(con=urls,readLines) 
```

在这个例子中如何使用 vapply？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T07:06:26.340

你将不得不包装`readLines`一些总是返回相同长度向量的东西

例如

```
vapply(urls, function(i)  list(readLines(i)), list(1)) 
```

这是有效的，因为虽然`readLines`将返回可变数量的行，但它是`list`长度为 1 的 a 的第一个元素

# java - 摆动异常中的 javafx “工具包未初始化”

> ID：12210245
> 
> 赞同：2
> 
> 时间：2012-08-31T06:52:00.947
> 
> 标签：java, swing, javafx-2

我读过这篇文章： [JavaFx 2.x - Swing : Not on FX application thread](https://stackoverflow.com/questions/12182592/javafx-2-x-swing-not-on-fx-application-thread/12202749#12202749)

参考“线程中的异常”AWT-EventQueue-0“java.lang.IllegalStateException：未初始化工具包”

我在这里找到了一个讨论[JavaFX 2.1: Toolkit not initialized](https://stackoverflow.com/questions/11273773/javafx-2-1-toolkit-not-initialized)

但我无法使用该解决方案

“在 Swing 事件调度程序线程中建立 JFXPanel：”

因为它保持未定义的时间等待。

我在 JDesktopPane 中使用 JInternalFrame 时遇到了同样的问题。

我试过了：

```
final CountDownLatch latch = new CountDownLatch(1);
SwingUtilities.invokeLater(new Runnable() {
  @Override
  public void run() {
    final JFXPanel javafxPanel = new JFXPanel();
    latch.countDown();       
    BorderPane pane = new BorderPane();
    javafxPanel.setScene( new Scene(pane) {
      Text text = new Text("Hello World");            
    });
    frame.getContentPane().add(javafxPanel, BorderLayout.CENTER);
  }
});        
this.add(frame);
try {
    latch.await();
} catch (InterruptedException ex) {
    System.out.println("err");
    Logger.getLogger(WorkspacePanel.class.getName()).log(Level.SEVERE, null,     ex);
} 
```

其中 frame 是 JInternalFrame 而这是 JDesktopPane。

有什么帮助吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T07:35:13.350

> 因为它保持未定义的时间等待。

这种等待可能是由`latch`. 如果您发布的代码是在事件调度线程上触发的，则该`latch.await()`调用将阻塞 EDT 并确保`Runnable`您在 EDT 上发布的代码永远不会执行，因此`latch.countDown()`永远不会到达该语句。您可以使用该方法快速检查这一点`EventQueue.isDispatchThread`。

我强烈建议简单地删除`CountDownLatch`, 因为在另一个上运行该代码`Thread`不是一种选择，因为您正在使用 Swing 组件，应该在事件调度线程上访问/修改/创建/...。

[此外，一旦您移除了闩锁，您将遇到与链接问题](https://stackoverflow.com/q/12182592/1076463)中相同的异常。这

```
javafxPanel.setScene( new Scene(pane) {
  Text text = new Text("Hello World");            
}); 
```

必须在 JavaFX 线程上执行，而不是在 Event Dispatch 线程上执行。请参阅[我](https://stackoverflow.com/a/12184250/1076463)关于如何解决该问题的答案。

# firefox - Firefox 15 及更高版本：在删除文件时不会触发输入类型 = 文件的更改事件

> ID：12210252
> 
> 赞同：0
> 
> 时间：2012-08-31T06:52:38.240
> 
> 标签：firefox, drag-and-drop, onchange, input-type-file

将文件从磁盘拖放到输入框时，不会为 input type='file' 元素触发“更改”事件。相同的代码适用于其他主要浏览器，但不适用于 Firefox 15 及更高版本。

```
 $("input[type='file']").change(
        function(){
            // Do form submit
        }
    ); 
```

实现相同目的的一种 hack-ish 方法是使用 setTimeout 和 HTML5 'drop' 事件。

```
 $("input[type='file']").on('drop',function(event){
        this.files = event.originalEvent.dataTransfer.files;
        setTimeout(function(){
            //  Do form submit
        }, 0);  // Note that the timeout is 0ms
    }); 
```

不确定这是否是最好的方法......

PS：不使用 setTimeout(..) 直接提交表单在 FF 15+ 中不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:04:34.643

看起来像[https://bugzilla.mozilla.org/show_bug.cgi?id=786172](https://bugzilla.mozilla.org/show_bug.cgi?id=786172)它的价值。

# java - iReport：列出参数值（无数据库连接）

> ID：12210262
> 
> 赞同：1
> 
> 时间：2012-08-31T06:53:22.513
> 
> 标签：java, pdf, jasper-reports, ireport

我正在尝试使用 JasperReports 为我的网站制作 PDF 报告，并使用 iReport 设计报告。

我不想使用数据库连接，我想直接从 Java 传递所有数据。例如，我想传递一个字符串列表（用户名），然后在我的 PDF 中简单地列出这些名称。我看到 iReport 提供了一个 List 组件，但我不知道如何使用它，因为我找到的所有文档都谈到了从数据库中获取的列表数据。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T09:04:47.873

我能想到的唯一方法是：

首先创建一个 java.uti.list 类型的参数，比如名称，
创建一个字段以显示该参数
转到文本字段表达式并将 $F{field_name} 替换为 $P{Name}.get(1).toString()
这将打印列表中的第二项

我还没有找到一种方法来循环遍历列表以打印出每个项目。

# highcharts - 如何在Highcharts的柱形图中显示值为0的列？

> ID：12210265
> 
> 赞同：9
> 
> 时间：2012-08-31T06:53:29.363
> 
> 标签：highcharts, bar-chart, stacked

我要传递给：

```
 series: [{
                        name: 'Fixed bugs',
                        data: fixed,
                        pointWidth: 40
                    }, {
                        name: 'Assigned Bugs',
                        data:assigned,
                        pointWidth: 40
                    }, {
                        name: 'Re-Opened Bugs',
                        data: Reopened,
                        pointWidth: 40
                    },
                    {
                        name: 'Closed Bugs',
                        data: closed,
                        pointWidth: 40
                    }] 
```

到[这个图表](http://www.highcharts.com/demo/column-stacked/gray)，我有这样的数据：

```
 data: fixed=[3,5,5,8]
    data:assigned=[0,1,0,0] 
```

并跟随。现在我想显示为零值的列...对我来说，它没有显示为零的列值。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-12-11T11:32:21.473

minPointLength 将起作用。用这个。

```
plotOptions: {
    column: {
    minPointLength: 3
    }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-08-06T05:53:13.030

您可以使用该`minPointLength`选项非常简单地做到这一点。它设置每列的最小像素数，默认为 0，因此不会显示零值。[它在此处](http://api.highcharts.com/highcharts#plotOptions.column.minPointLength)的文档中。

试试[这个 JSFiddle](http://jsfiddle.net/YsEEJ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T08:04:13.903

不确定您要显示什么，但也许您可以尝试像这样显示数据标签：

```
plotOptions: {
    series: {
        dataLabels: {
            enabled: true,
            color: 'gray'
        }
    }
} 
```

[尝试演示](http://jsfiddle.net/6UMnK/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T12:44:48.950

这是一种方法 - 尽管我认为让列为零值且不可见是最好的方法。

找到一个非常低的数字，您的任何数据点都没有，但仍保持 >0。让我们说它是 0.005。当您引入数据时，任何值为 0 的值都会为其分配 0.005 值。在您的工具提示格式化程序中，对值执行 IF。如果它是 0.005，则将其设为 0。这样您就可以看到“零”列，但显示的工具提示也将为 0。如果您正在对堆叠列进行任何类型的计算，那么您还需要在其中考虑这个非 0 0 值。

# php - 如何在服务器上创建一个包含多个用户名和密码的文件夹，以便为每个用户在特定时间下载文件

> ID：12210275
> 
> 赞同：-2
> 
> 时间：2012-08-31T06:54:26.063
> 
> 标签：php

如何在服务器上创建具有多个用户名和密码的文件夹，为每个用户指定时间下载文件，并且只有一个用户可以一次访问服务器上的文件夹，并且用户名和密码没有多个联系

注意：每个用户的特定时间请代码示例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T06:56:57.363

用户指定的时间是什么意思？

要下载带有用户名 + 密码的文件，您可以使用 PHP 脚本来检查身份验证，如果用户已登录，请执行简单的 readfile()（带有适当的标题）

# joomla - 从 joomla 2.5 中的 SEF URL 中删除视图和布局名称

> ID：12210277
> 
> 赞同：1
> 
> 时间：2012-08-31T06:54:33.953
> 
> 标签：joomla, url-rewriting, joomla2.5, sef, joomla-sef-urls

我正在使用 joomla 2.5 我想显示没有视图和布局名称的 SEF。

```
http://localhost/cars/vehicles/buyer/vehicle_overview/7/18
to 
http://localhost/cars/vehicles/carname 
```

在上面的网址中，我必须显示汽车的名称，而不是视图、布局和 ID。我正在使用 js_autoz 组件并想更改该组件中的 SEF。

您能否提供任何示例来删除视图和布局？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T13:59:59.633

必须在组件前端（站点）内创建一个 router.php 文件。

演示链接：

[http://docs.joomla.org/Supporting_SEF_URLs_in_your_component](http://docs.joomla.org/Supporting_SEF_URLs_in_your_component)
[设置 joomla 组件 router.php](https://stackoverflow.com/questions/6926445/setting-joomla-component-router-php)

# ios - 像 GrabCut 这样的图像分割算法可以在 iPhone GPU 上运行吗？

> ID：12210278
> 
> 赞同：5
> 
> 时间：2012-08-31T06:54:37.957
> 
> 标签：ios, image-processing, gpu

我一直在玩 iPhone 上的 GrabCut 算法（在 OpenCV 中实现）。表演是可怕的。即使在模拟器上运行大约 800x800 的图像也需要大约 10-15 秒。在我的手机上它运行了几分钟，最终内存不足并崩溃（iPhone 4）。我敢肯定，如果我用 C 编写自己的算法版本，我可能会做一些优化，但我觉得再多的优化都不会让它接近可用。我在一些学术论文中挖掘了一些性能测量，甚至他们在多核 1.8 ghz CPU 上看到了 30 秒的运行时间。

所以我唯一的希望是 GPU，我对此一无所知。到目前为止，我已经对 OpenGL ES 进行了一些基础研究，但这是一个非常深入的话题，我不想浪费数小时或数天来学习基本概念，以便了解我是否在正确的道路。

所以我的问题是双重的：

1) 像 GrabCut 这样的东西可以在 GPU 上运行吗？如果是这样，我希望有一个“学习 OpenGL ES”以外的起点。理想情况下，我想知道我需要特别注意哪些概念。请记住，我没有使用 OpenGL 的经验，也没有图像处理方面的经验。

2）即使这种算法可以在GPU上运行，我应该期待什么样的性能提升？考虑到当前的运行时间在 CPU 上的最佳时间约为 30 秒，GPU 似乎不太可能在运行时间中产生足够大的凹痕以使算法有用。

编辑：为了让算法“有用”，我认为它必须在 10 秒或更短的时间内运行。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-21T23:29:28.773

似乎grabcut并没有从图像分辨率中受益。这意味着结果的质量并不直接取决于输入图像的质量。另一方面，性能受益于尺寸，这意味着图像越小，执行剪切的算法就越快。因此，尝试将图像缩小到 300x300，应用抓取，取出蒙版，将蒙版缩放到原始大小，然后将蒙版应用于原始图像以获得结果。让我知道它是否有效。

卢卡

# .net - RhinoMocks 是否死了？

> ID：12210287
> 
> 赞同：7
> 
> 时间：2012-08-31T06:54:59.673
> 
> 标签：.net, unit-testing, mocking, rhino-mocks

最后一次构建是在 2010 年 1 月 5 日。

我要学习一个模拟框架，我不想学习一个产品会死。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-12-02T16:22:48.980

**Rhino Mocks 并没有更发达——但值得注意的是，它复活了大约一年**。[Rhino Mocks 的作者Ayende Rahien](http://ayende.com/blog)不再开发它，在闲置两年后，[Mike Meisinger](http://meisinger2.wordpress.com/)担任了项目开发负责人。

[您可以在 Mike Meisinger 博客的Rhino-Mocks](https://meisinger2.wordpress.com/category/rhino-mocks/)类别下跟踪当前 Rhino Mocks 的进度及其新功能。

您可以在以下位置查看重新激活的 Rhino Mocks：

*   [GitHub](https://github.com/meisinger/rhino-mocks/)
*   [NuGet (Rhino Mocks 3.6.1) [最新稳定]](https://www.nuget.org/packages/RhinoMocks/)
*   [NuGet (Rhino Mocks 4.0.0-alpha3)](https://www.nuget.org/packages/RhinoMocks/4.0.0-alpha3)

阅读更多：

*   (2013-05-08) **Ayende：[Rhino Mocks 的状态](http://ayende.com/blog/161826/the-state-of-rhino-mocks)**
*   (2013-05-16) 迈辛格：[犀牛模拟状态](http://meisinger2.wordpress.com/2013/05/16/state-of-rhino-mocks/)
*   (2013-05-19)**梅辛格：[犀牛模拟新家](http://meisinger2.wordpress.com/2013/05/19/rhino-mocks-new-home/)**
*   (2013-05-22) Ayende：[犀牛模拟未来](http://ayende.com/blog/162241/rhino-mocks-future)
*   (2013-05-28) Meisinger：[规划下一个 Rhino Mock](http://meisinger2.wordpress.com/2013/05/28/planning-the-next-rhino-mock/)
*   (2014-03-31) Meisinger：[Rhino Mocks 4.0.0 Alpha 发布](https://meisinger2.wordpress.com/2014/03/31/rhino-mocks-4-0-0-alpha-released/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-03T22:58:52.843

犀牛似乎不再开发了。您可以查看更多最新的框架（最后更新日期在括号中）：

*   (09.2011)[起订量](http://code.google.com/p/moq/)
*   (08.2012) [FakeItEasy](https://github.com/FakeItEasy/FakeItEasy)
*   (08.2012) [NSubstitute](http://nsubstitute.github.com/)

在功能方面，它们都是相似的，选择使用哪一个通常是语法偏好的问题。另请注意，虽然尚未开发，但仍然可以使用 Rhino 进行大多数模拟/存根；没有一个较新的框架提供了您无法使用 Rhino 完成的特别重要的功能。只是代码可能更复杂一些。

[根据Roy Osherove的[这项民意调查，起订量似乎是 3 种中最受欢迎的（截至 2012 年 5 月）。](http://osherove.com/blog/2012/5/4/annual-poll-which-isolation-framework-do-you-use-if-any.html)然而，FakeItEasy 或 NSubstitute[将进入](http://osherove.com/blog/2012/6/26/fakeiteasy-or-nsubstitute-which-should-i-use-for-samples-in.html)Roy 的单元测试书的第二版。]

# java - 我怎么说@ManyToOne 在 Play 2.0 中是 @Required？

> ID：12210288
> 
> 赞同：0
> 
> 时间：2012-08-31T06:55:11.567
> 
> 标签：java, playframework, playframework-2.0

考虑一个包含实体 Post 和 Author 的博客。Post 和 Author 之间存在 ManyToOne 关系：

```
@Entity
public class Post extends Model {
  @Required
  public String subject;

  @ManyToOne
  @Required
  public Author author;

  //...
} 
```

然后，在视图中：

```
@form(routes.Post.new()) {
  @inputText(postForm("subject"))
  @select(
    postForm("author.id"), 
    options(Author.options()), 
    '_label -> "Author",
    '_default -> "-- Select author --",
    '_showConstraints -> true
  )
  <input type="submit" value="Create" />
} 
```

在控制器中使用 a 验证此字段`Form<Post>`时，在执行 form.hasErrors() 时，作者字段的 @Required 约束将被忽略。

我怎么能说这个字段是必需的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:54:03.640

`id`在这种情况下，您的表单默认传递`Author`（或空字符串，如果未选中），您最快的解决方案将是：

```
if (postForm.hasErrors()
        || form().bindFromRequest().get("author.id")==null
        || form().bindFromRequest().get("author.id").equals("")) {

    return badRequest(postAdd.render(postForm));
} 
```

最终，您可以验证 Author 对象是否可访问，如果不可访问则返回错误消息：

```
Author authorRef =
     Author.find.ref(Long.valueOf(form().bindFromRequest().get("author.id")));

if (postForm.hasErrors() || authorRef == null) {
    return badRequest(postAdd.render(postForm));
} 
```

**编辑**当然，如果您根本不传递该字段（例如，您将从`@select{...}`视图中删除），则`@Required`约束将捕获该字段。

# facebook - Access_token 来自他们页面的 CNN 新闻帖子

> ID：12210290
> 
> 赞同：0
> 
> 时间：2012-08-31T06:55:14.047
> 
> 标签：facebook, facebook-graph-api, access-token

如何获取 CNN 的 access_token？
CNN 不会使用我创建的应用程序。

或者
我如何从我自己的 json 兴趣列表中*过滤和阅读 CNN 帖子。*

CNN 和 Gizmag 等网站确实为他们的帖子提供了 RSS 提要并做到了这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T13:13:57.147

要阅读 CNN 的提要，您需要任何有效的访问令牌。它可以是应用访问令牌。页面所有者不必安装您的应用程序。

你可以在`https://graph.facebook.com/CNN/feed?access_token=XXXX`

创建您的应用程序，然后按照[这些说明获取应用程序访问令牌](https://developers.facebook.com/docs/authentication/applications/)或使用其中一个 Facebook SDK，它会在您初始化 SDK 时从您的应用程序 ID 获取一个令牌。

唯一的例外是您的页面有年龄或国家/地区限制。然后，您需要满足页面所有者标准的用户访问令牌。如果您尝试查看 Maker's Mark (MakersMark) 页面，这将不起作用。

# perl - 错误 - '全局符号需要明确的包名'

> ID：12210291
> 
> 赞同：1
> 
> 时间：2012-08-31T06:55:21.670
> 
> 标签：perl

我正在尝试为矩阵乘法编写脚本。它只是一个基本程序，但我无法弄清楚以下错误：

全局符号“@ref_mat1”在 multiplication.pl 第 49 行需要明确的包名称。

全局符号“@ref_mat2”在 multiplication.pl 第 49 行需要明确的包名称。

下面是我的脚本：

```
 #!/usr/bin/perl -w
    use strict;

     my @mat1=(
        [2,3,4],
        [1,2,3],
        [3,4,5]
            );

    my @mat2=(
            [2],
            [3],
            [4]
           );

    my ($i, $j, $k);
    my $r_product=[];

   $r_product= mat_multiplication(\@mat1,\@mat2);

    sub mat_multiplication
        {

         my ($ref_mat1,$ref_mat2)=@_;
         my($mat1_row,$mat1_col)=total_rows_column($ref_mat1);
         my($mat2_row,$mat2_col)=total_rows_column($ref_mat2);
             for($i=0;$i<$mat1_row;$i++)
            {
               for($j=0;$j<$mat2_col;$j++)
                {
                   my $sum=0;
                   for($k=0;$k<$mat1_col;$k++)
                    {
                      $sum=$sum+$ref_mat1[$i][$k]*$ref_mat2[$k][$j];
                    }
                    $r_product->[$1][$j]=$sum;
                }
            } 
            return $r_product;

        }

    sub total_rows_column
             { 
              my($r_mat) =@_;
              my $num_row=@{$r_mat};
              my $num_col=@{$r_mat->[0]};
              return($num_row,$num_col);
             } 
```

我搜索了这个问题并找到了一个链接

[“全局符号需要显式包名”的解释](https://stackoverflow.com/questions/3592770/explanation-of-global-symbol-requires-explicit-package-name)

但仍然无法解决它。请看看，让我知道我在哪里做错了。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T07:00:28.473

`$ref_mat1`并且`$ref_mat2`是对数组的引用。在 Perl 中，如果您想访问不能`$reference[$idx]`直接使用的数组的引用——您必须`->`在引用之后使用运算符，如下所示：`$ref_mat1->[0]`.

没有它，Perl 认为它`$ref_mat1[0]`指的是一个`@ref_mat1`不存在的数组。是的，两者`$var`和`@var`可以同时存在，但内容不同，请参见以下示例：

```
use strict;
use Data::Dumper;

my $abc = 42;
my @abc = (1, 2, 3);

print Dumper($abc), Dumper(\@abc); 
```

# twitter - 带有动态文本和事件的推文按钮

> ID：12210292
> 
> 赞同：0
> 
> 时间：2012-08-31T06:55:22.220
> 
> 标签：twitter, tweets, webintents

我想`input`在我的页面中有一个字段和一个按钮，以便用户可以手动输入推文文本，然后当他提交按钮时，实际的推特状态提交将使用用户输入的文本打开。此外，当用户在 Twitter 上提交推文时，我还希望得到回调，例如[Web Intents Javascript Events](https://dev.twitter.com/docs/intents/events)

据我所知，有两种方法可以做到这一点：

1.  在每次更改输入后使用 重新渲染推文按钮`twttr.widgets.load();`，类似于[此](http://jsfiddle.net/chris27/DQw5b/4/)示例，仅使用`onchange`输入事件而不是更新按钮。**问题**是当推文按钮被重新渲染时，它会消失一会儿。
2.  下一个选项是不使用 twitter 按钮，而是当用户点击提交时打开一个新窗口并重定向到[https://twitter.com/share](https://twitter.com/share)，并将推文文本作为查询参数（如 twitter 建议在[Build Your Own Tweet按钮](https://dev.twitter.com/docs/tweet-button)）。**这个解决方案的问题**是当用户在 Twitter 上提交推文时我没有收到事件。

有什么想法可以结合这两个要求，动态更改推文文本并在推文提交时获取事件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:36:53.930

不确定这是否可行，但我的第一个想法是使用推文按钮，并在其上添加一个不可见的 div，它将捕获用户的点击，用用户的文本重新加载小部件，并在 250 毫秒后触发对小部件的点击（或者在慢速设备上重新加载可能需要多长时间）。你只会得到一个闪烁，所以它看起来不流畅，但它也不会看起来像一个错误。

# jquery - How to disable vertical scroll while enable swipeleft and swiperight event using jquery mobile?

> ID：12210294
> 
> 赞同：0
> 
> 时间：2012-08-31T06:55:22.450
> 
> 标签：jquery, jquery-mobile, swipe, vertical-scrolling

I have a html jquery mobile multi-page and using swipeleft and swiperight events to flip pages. it works great.

Now I wanna disable the vertical scroll.

From solution I found in stackoverflow, it suggest to use the following

```
$(document).delegate('.ui-content', 'touchmove', false);​ 
```

but in this case, the original swipeleft and swiperight events are disabled too.

Is there a way that I can disable the vertical scroll while keeping the swipeleft and swiperight events?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:47:37.913

You could add the following to your

```
<script>
    function BlockMove(event) {
      // Tell Safari not to move the window.
        event.preventDefault();
    }
    </script> 
```

and add this to your body tag

```
<body onload="setTimeout(function() { window.scrollTo(0, 1) }, 100);" ontouchmove="BlockMove(event);"> 
```

This will disable the page scrolling allowing you to swipe

# javascript - 添加 div 的函数（在函数之间切换）

> ID：12210298
> 
> 赞同：1
> 
> 时间：2012-08-31T06:55:40.727
> 
> 标签：javascript, function, add

希望有人可以帮助我。我正在尝试创建一个添加`div`（不是问题）的函数。

问题是我希望该函数检查`div`之前是否为`div1`or `div2`，然后添加下一个。

模式应如下所示：div1、div2、div1、div2 等。现在我有 2 个按钮，其中一个添加 div1，另一个添加 div2。我需要一个按钮，它在单击时添加 1 个 div，但会检查已添加的 div，然后内联添加下一个 div（div1 或 div2）。

到目前为止我的代码：

```
function div1(){
                    var div1 = document.createElement("div");

                    div1.className = "div1";

                    $('.wrapper').append(div1);
                }

                function div2(){
                    var div2 = document.createElement("div");
                    div2.className = "div2";

                    $('.wrapper').append(div2);

                }

                $(".addDiv1").click(function(){
                    div1();
                })
                $(".addDiv2").click(function(){
                    div2();
                }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T07:04:58.283

直观地说，我将创建一个通用函数，根据之前的状态更改您要添加的 div 的类，以及一个全局变量来跟踪您所处的状态：

```
var current_class = "div1"

function newdiv(myclass){
  var div = document.createElement("div");
  div.className = myclass;
  $('.wrapper').append(div);
}

$(".addDiv").click(function(){
  newdiv(current_class);
  if (current_class == "div1"){
    current_class = "div2"
  }
  else {
    current_class = "div1"
  }
}) 
```

# android - 如何在安卓的谷歌地图上找到用户附近的餐馆、医院？

> ID：12210300
> 
> 赞同：0
> 
> 时间：2012-08-31T06:55:49.220
> 
> 标签：android

> **可能重复：**
> [在 Android 中使用 Google Maps API 显示当前位置和附近地点以及两个地点之间的路线](https://stackoverflow.com/questions/8428209/show-current-location-and-nearby-places-and-route-between-two-places-using-googl)

在我的应用程序中，我能够检测到用户，但现在我需要在用户位置附近的地图上找到并显示餐馆和医院。那么我现在该如何进行呢？

# python - 将大集合拆分为较小的集合？

> ID：12210307
> 
> 赞同：2
> 
> 时间：2012-08-31T06:56:42.750
> 
> 标签：python, mongodb

我有一个可能会非常大的集合。现在我知道 MongoDB 对此并没有真正的问题，但我真的不知道如何设计一个可以舒适地处理非常大的数据集的模式。因此，我将概述问题。

我们正在为我们的客户收集大量数据。基本上，当我们收集这些数据时，它表示为一个 3 元组，比如说 (a, b, c)，其中 b 和 c 分别是集合 B 和 C 的成员。在这种特殊情况下，我们知道 B 集和 C 集不会随着时间的推移而增长太多。对于我们现有的客户，我们谈论的是约 200,000 名会员。但是，A 集是随着时间不断增长的集。目前我们的每个客户大约有 2,000,000 名成员，但这会增长（可能会很快）。此外，b->a 和 c->a 之间存在 1->n 个关系。

该数据集的工作负载基本上分为 3 个用例。集合将定期更新，其中 A 将获得最多的写入，而 B 和 C 将获得一些，但不多。第二个用例是随机访问 B，然后聚合 C 中与 b \in B 相关的一些文档。最后一个用例基本上是从 A 和 B 流式传输一个大子集以生成一些新数据。

我们面临的问题是索引变得相当大。目前我们有一个大约 8 个小客户的测试设置，目前总数据集大小约为 15GB，索引运行在 3GB 到 4GB 左右。这里的问题是我们的数据集中并没有真正的热区。它基本上会在所有文档中获得均匀分布的负载。

基本上我们已经提出了 2 个选项来做到这一点。我在上面描述的那个，所有客户的所有数据都堆积在一个集合中。这意味着我们必须在某个字段中创建一个索引，将该集合中的文档链接到特定客户。

另一种选择是将所有 b 和 c 放在一起（这些集合相对较小），但将 C 集合分开，每个客户一个。我可以想象最后一个解决方案有点难以管理，但由于我们很少同时访问多个客户的数据，它可以防止内存问题。MongoDB 将能够将客户索引加载到内存中并从那里运行。

您对此有何看法？

PS：我希望这不是太含糊，如果有什么不清楚的地方，我会详细说明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:59:37.683

听起来更大的集合（如果我正确地遵循的话，A）可以合理地放入它自己的数据库中。我说的是数据库而不是集合，因为现在 2.2 发布了，您希望尽量减少繁忙数据库与其他数据库之间的锁争用，并且最好使用单独的数据库（2.2 引入了数据库级锁定）。当然，这是从单个副本集模型来看的。

此外，索引大小听起来与您的数据大小有点不成比例-您确定它们都是必要的吗？修剪不需要的索引，组合和使用复合索引可能会显着减少您在索引增长方面遇到的痛苦（它也可能使更新和插入更有效）。这确实需要细节，并且可能属于另一个问题，或者可能属于 mongodb-user 组中的一个线程，因此多个眼睛可以查看并提出建议。

如果我们用分片的可能性来看待它，那么真正重要的部分是选择一个分片键，它允许您确保在分片上保留您经常需要一起访问的片段的局部性。这将更适合单个分片集合（除非您以某种方式手动拆分和平衡块，否则跨多个相关分片集合保留位置将非常棘手）。分片使您能够在索引达到单实例限制等时水平扩展，但这将使分片键决策非常重要。

同样，选择该分片键的细节超出了这个更一般性讨论的范围，类似于我上面提到的潜在索引审查。

# php - php循环遍历sql结果

> ID：12210309
> 
> 赞同：1
> 
> 时间：2012-08-31T06:56:46.503
> 
> 标签：php, mysql

我有一个名为`sales_product`列的表

```
sales_product_id, sales_id, type, class, age 
```

我在 php 中有一个查询说

```
$sql = "SELECT * from sales_product WHERE sales_id = " . $_GET['sales_id]; 
```

假设此查询返回两行。

```
$result = mysql_query($sql); 
```

如何循环遍历此结果并保存在数组中，以便稍后我可以检索数据，例如

```
echo $sales_product[$i]['sales_product_id'];
echo $sales_product[$i]['sales_product_id'];
........ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T06:58:42.353

`mysql_fetch_assoc`循环执行`while`：

```
$result = mysql_query($sql);
$rows[] = array();

while ( $row = mysql_fetch_assoc($result) ) {
    echo $row['sales_product_id'];
    $rows[] = $row;
}

var_dump($rows); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T06:59:08.467

使用[mysql_fetch_assoc](http://php.net/manual/en/function.mysql-fetch-assoc.php)

```
while ($row = mysql_fetch_assoc($result)) {
    echo $row["sales_product_id"];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T07:17:15.073

由于 mysql_ 已被宣布弃用，因此我将使用
mysqli_* 扩展名 回答您的问题

```
//Prepare an SQL statement for execution
$stmt = $mysqli->prepare("SELECT * from sales_product WHERE sales_id = ?");

//bind parameter to the prepared statement      
$stmt->bind_param("i", $_GET['sales_id]);

//execute it 
$stmt->execute();

//store the result  
$result = $stmt->get_result();

//loop through the  result set
while ($myrow = $result->fetch_assoc()) 
{

      $salesIds[]  = $myrow["sales_product_id"];

} 
```

有关更多信息，请参阅 php 文档。
谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T07:05:01.403

像这样的东西应该可以工作，这将为您提供您要求的格式（未经测试）：

```
while($row = mysql_fetch_assoc($result)) {
    $sales_product[] = $row;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T07:01:42.337

尝试这个，

```
$result = mysql_query($sql);
while ( $row = mysql_fetch_assoc($result) ) {
    echo $row['columnName'];
} 
```

如果您需要索引，请使用 mysql_fetch_array()

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-31T07:03:27.783

检查这个。

```
$sql="SELECT sales_product_id, sales_id, type, class, age From sales_product";
$sales= $db->query($sql);
while($sale = $db->fetchByAssoc($sales))
{
    echo $sales['sales_product_id'];
    echo $sales['type'];
 // here instead echo uyou will add data in your array

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-31T06:58:12.847

看一眼

[mysql_fetch_array();](http://php.net/manual/en/function.mysql-fetch-array.php)

**笔记**

不鼓励使用此扩展程序。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。另请参阅 MySQL：选择 API 指南和相关的常见问题解答以获取更多信息。此功能的替代方案包括：

[mysqli_fetch_array()](http://www.php.net/manual/en/mysqli-result.fetch-array.php)

[PDOStatement::fetch()](http://www.php.net/manual/en/pdostatement.fetch.php)

# jquery - 如何强制网站加载到顶部？

> ID：12210310
> 
> 赞同：0
> 
> 时间：2012-08-31T06:56:49.747
> 
> 标签：jquery, html, css

我正在开发一个视差网站。出于某种原因，每当我刷新页面时，它总是在底部而不是顶部加载。有谁知道如何覆盖这个？还是因为我的代码有问题，导致浏览器在底部加载？

如果需要，我将提供代码，但这更像是一个一般性问题。只想知道为什么浏览器会在底部而不是顶部重新加载。（在 Chrome 和 Firefox 上测试）。

好的，这里是代码。首先，它的 HTML5 和加载 jQuery 1.8.0

代码：

```
<!-- Section #1 / Intro -->
<section id="first" class="story" data-speed="8" data-type="background">        
    <div class="heart" data-type="sprite" data-offsetY="100" data-Xposition="50%" data-speed="-2"></div>        

    <article>

        <img src="images/blackout.png" alt="tutorial-title" width="auto" height="auto" />

    </article>
</section>

<!-- Section #2 / Background Only -->
<section id="second" class="story2" data-speed="5" data-type="background">
    <article>
        <h2>Background Only</h2>
            <p>my text stuff appears here</p>   
    </article>
</section> 
```

因此，每次我刷新浏览器时，网站总是在第 2 节而不是第 1 节加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:10:07.033

你可以用这个

```
$("html, body").animate({ scrollTop: 0 }, 0); 
```

# java - java中数组的向下转换

> ID：12210311
> 
> 赞同：4
> 
> 时间：2012-08-31T06:56:53.507
> 
> 标签：java, arrays, casting

我不确定数组的向下转换是如何工作的。
这个工作的例子：

```
String[] sArray = {"a", "b"};  
Object[] o = sArray;  
f((String[]) o);  

static void f(String[] s){  
  System.out.println("Ok");   
} 
```

但对于以下情况：在
`new F(cert, (X509Certificate[]) ks.getCertificateChain("ALIAS"), key));`
哪里`F`

```
public F(X509Certificate certificate, X509Certificate[] certificateChain, PrivateKey privateKey) {      
} 
```

我明白了`ClassCastException`

> java.lang.ClassCastException：[Ljava.security.cert.Certificate; 与 [Ljava.security.cert.X509Certificate 不兼容；

为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T07:58:36.817

Java 中的数组是对象，因此有一个类。它们不仅仅是无身份的容器。当你说：

```
String[] sArray = {"a", "b"}; 
```

您正在创建一个 class 对象`String[]`，并在其中放入两个字符串。有另一种写法可以更清楚地说明：

```
String[] sArray = new String[] {"a", "b"}; 
```

您可以将引用转换为数组，就像您将引用转换为任何其他对象一样；您始终可以进行扩大转换（例如将类型表达式分配给类型`String[]`变量`Object[]`），并且可以使用显式强制转换进行缩小转换（例如将类型表达式分配给类型`Object[]`变量`String[]`）。与其他对象一样，当您执行显式案例时，会在运行时检查对象的实际类，如果它不符合所需的类型，`ClassCastException`则抛出 a。与其他对象一样，当您进行转换时*，对象的实际类*不会改变。只有*变量的类型*。

在您的情况下，它看起来像`ks.getCertificateChain("ALIAS")`返回 a `Certificate[]`。其中的元素可能是 的实例`X509Certificate`，但数组本身仍然是`Certificate[]`. 当您尝试将其强制转换为 时`X509Certificate[]`，将失败。

如果您需要 a `X509Certificate[]`，那么您要做的就是将数组的内容复制到一个新数组中，即 a `X509Certificate[]`。您可以按照 tbk 的建议执行此操作，或者您可以调用[`Arrays.copyOf`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOf%28U%5B%5D,%20int,%20java.lang.Class%29)，看起来像：

```
Certificate[] Certificates = ks.getCertificateChain("ALIAS");
X509Certificate[] x509Certificates = Arrays.copyOf(certificates, certificates.length, X509Certificate[].class); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T07:00:07.030

您不能在 java 中转换数组，但您可以通过执行以下操作来解决它：

```
Certificate[] certs = ...;
X509Certificate[] x509certs = new X509Certificate[certs.length];
for(int i = 0; i < certs.length; i++) {
  x509certs[i] = (X509Certificate)certs[i];
} 
```

[编辑：这篇文章](https://stackoverflow.com/questions/1500044/downcasting-an-array-in-java-remove-the-unchecked-warning-game)中显示了一个替代方案。但是，它涉及`System.arraycopy()`在运行时可能会执行相同的操作。

# coldfusion - 通过 ColdFusion 连接到 LDAP

> ID：12210317
> 
> 赞同：0
> 
> 时间：2012-08-31T06:57:12.400
> 
> 标签：coldfusion, active-directory

我试图通过 ColdFusion 获得与我们的 LDAP 的以下连接，但是，我永远无法让它返回任何值（即 results.recordcount 始终等于 0）。我认为我的问题出在查询的“开始”部分，所以我做了一些研究并尝试了许多值，但似乎没有任何效果。

```
<cfldap 
  server = "adserver" 
  action = "query" 
  username = "DOMAIN\username" 
  password = "apassword" 
  name = "results" 
  scope="subtree" 
  start = "dc=domain.local" 
  attributes = "givenname,surname,uid,userid,groupMembership,mail,dn,roles,memberof,cn,samaccountName">

<cfoutput>
  #results.recordcount#
</cfoutput> 
```

我试图访问的广告的结构如下。我正在尝试访问所示树底部的“用户”部分。

```
Active Directory Users and Computers
- Saved queries
- domain.local
  - option1
  - option2
  - NAME1
    - option1
    - option2
    - NAME2
      - Computers
      - Disabled Users
      - Groups
      - Users 
```

如果我右键单击“用户”并查看属性，它会告诉我它的规范名称是 domain.local/NAME1/NAME2/Users，我认为这与我的问题有关。

我应该为 cfldap 的“开始”部分使用什么想法？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T07:09:19.577

我强烈建议您使用 Softerra 的 LDAP 浏览器 (http://www.ldapbrowser.com/) 之类的程序浏览您的 AD，然后找到要开始搜索的层次结构的可分辨名称。使用它，我能够找到要定位的 LDAP 结构的确切 DN。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T13:47:43.713

尝试这样的事情。从高级别开始，然后使用过滤器属性向下钻取，我的运气最好。

```
<cfldap action="query" start="DC=server, DC=domain, DC=com" filter="OU=Users" 
username = "DOMAIN\username" password = "apassword" name = "results" 
scope="subtree" attributes = "givenname,surname,uid,userid,groupMembership,mail,dn,roles,memberof,cn,samaccountName"> 
```

# c# - 在 C# webresponse 上应用 DOM 查询

> ID：12210319
> 
> 赞同：0
> 
> 时间：2012-08-31T06:57:30.730
> 
> 标签：c#, javascript, asp.net, dom

我正在创建 Web 请求并在 C# 中使用 webresponse 对象。

有什么方法可以`document.getElementByClass('')`在 Web 响应字符串上应用 DOM 查询（等）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:05:23.533

是的，您可以使用[Html Agility Pack](http://htmlagilitypack.codeplex.com/)使用 XPath 或 Linq 查询节点。

# mysql - 使用 mysql 禁用列 'column_name' 不能为空

> ID：12210320
> 
> 赞同：1
> 
> 时间：2012-08-31T06:57:37.423
> 
> 标签：mysql

因此，每当我尝试将 NULL 插入指定为 NO NULL 的列中时，我都会收到“列 'column_name' 不能为空”。我可以做 INSERT IGNORE 这会很好，但我不喜欢那样做。

我很确定有一个全局变量可以设置，以便在 db 中禁用此验证。我以为我在 @@global.sql_mode 中启用了严格模式，但它是空的。

如果您知道我应该更改哪个变量来禁用此错误，请告诉我！非常感谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T07:04:24.710

```
ALTER TABLE table_name ALTER column_name SET DEFAULT default_value; 
```

我想非空标志是有一点的。根据自己的喜好添加 default_value （我猜是 0 ）。如果列不是文本/blob，这也有效。

# redis - 如何向redis发送随机命令？

> ID：12210321
> 
> 赞同：1
> 
> 时间：2012-08-31T06:57:52.720
> 
> 标签：redis, booksleeve

我在 c#/.NET 上通过 bookleeve 使用 redis

假设我想发送一个未实现的命令，例如`SCRIPT FLUSH`or `EVAL`。我如何用书套做到这一点？另外我不确定是否实现了回声，因此以它为例会很酷。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T07:44:42.577

Flush 在那里 - 在 .Server 下尝试（从内存中 - 不在 PC 附近）。对于其他人 - 没有“运行自定义命令”API，但我的收件箱中有贡献（等待合并）添加这些。它们甚至可能是问题列表中的附件（我真的不记得了）。或者等几天。

# android - Outofmemoryerror ByteArrayOutputStream 将大文件发送到 WS

> ID：12210322
> 
> 赞同：0
> 
> 时间：2012-08-31T06:58:00.790
> 
> 标签：android, out-of-memory, bytearrayoutputstream

我将视频发送到网络服务，并且可以处理小于 10MB 的视频，如果视频大约 12MB，给我内存不足错误：

这是我的代码：

```
 FileInputStream fileInputStream = new FileInputStream(fichero);

                int bytesAvailable = fileInputStream.available();
                int maxBufferSize = 1024 * 1024 * 2;
                int bufferSize = Math.min(bytesAvailable, maxBufferSize);
                byte[] buffer = new byte[bufferSize];

                int bytesRead = fileInputStream.read(buffer, 0, bufferSize);

                while (bytesRead > 0) {
                    dos.write(buffer, 0, bufferSize);
                    bytesAvailable = fileInputStream.available();
                    bufferSize = Math.min(bytesAvailable, maxBufferSize);
                    // nuevos
                    byte byt[] = new byte[bufferSize];
                    fileInputStream.read(byt);

                    // nuevos
                    bytesRead = fileInputStream.read(buffer, 0, bufferSize);
                    // esto es nuevo
                    dos.write(buffer, 0, bufferSize);
                    // ya no es nuevo
                } 
```

我认为这是因为我正在缓冲所有视频，但我不知道如何在不保存缓冲区的情况下发送它。

这是堆栈错误：

```
08-31 08:54:20.925: E/AndroidRuntime(18476): Caused by: java.lang.OutOfMemoryError
08-31 08:54:20.925: E/AndroidRuntime(18476):    at java.io.ByteArrayOutputStream.expand(ByteArrayOutputStream.java:91)
08-31 08:54:20.925: E/AndroidRuntime(18476):    at java.io.ByteArrayOutputStream.write(ByteArrayOutputStream.java:216)
08-31 08:54:20.925: E/AndroidRuntime(18476):    at org.apache.harmony.luni.internal.net.www.protocol.http.RetryableOutputStream.write(RetryableOutputStream.java:60)
08-31 08:54:20.925: E/AndroidRuntime(18476):    at java.io.DataOutputStream.write(DataOutputStream.java:99)
08-31 08:54:20.925: E/AndroidRuntime(18476):    at com.reparalia.movilidad.AdjuntarFicheros$SubeFichero.doInBackground(AdjuntarFicheros.java:702)
08-31 08:54:20.925: E/AndroidRuntime(18476):    at com.reparalia.movilidad.AdjuntarFicheros$SubeFichero.doInBackground(AdjuntarFicheros.java:1) 
```

702行是dos.write(buffer, 0, bufferSize);

有什么方法可以发送视频吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:24:12.023

`ByteArrayOutputStream`首先分配 32 字节或默认情况下构造函数指定的内存量。当该缓冲区被填满时，缓冲区的大小`ByteArrayOutputStream` **加倍**。对于大型物体，这可能是一个真正的问题。你最好的选择是

1.  使用构造函数指定的缓冲区大小，或者
2.  扩展`ByteArrayOutputStream`和覆盖写入方法，以便重新分配对您的流更有利。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T07:34:36.603

您可以尝试使用库类来完成，而不是自己编写代码来复制流。

在 Guava 中，可以使用[ByteStreams](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/io/ByteStreams.html)类。如果您是 Commons IO 类型的人，则可以[使用 IOUtils](http://commons.apache.org/io/apidocs/org/apache/commons/io/IOUtils.html)。

在 IOUtils 中，您的代码将如下所示：

```
FileInputStream fileInputStream = new FileInputStream(fichero);
OutputStream dos = ...
IOUtils.copy(fileInputStream, dos); 
```

我省略了必要的异常处理和流关闭。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-09T08:50:03.883

发生这种情况是因为 - 如果在预先知道主体长度时既没有**setFixedLengthStreamingMode(int) ，也没有设置****setChunkedStreamingMode(int)**。在这种情况下，HttpURLConnection 被迫在传输之前将完整的请求正文缓冲在内存中，从而浪费（并且可能耗尽）堆并增加延迟。链接中很好地解释了 - [http://developer.android.com/reference/java/net/HttpURLConnection.html](http://developer.android.com/reference/java/net/HttpURLConnection.html)

**请在您的代码中添加以下行 -** HttpUrlConnectionObject。**setChunkedStreamingMode(maxBufferSize)** ; 默认系统值设置为 0 HttpUrlConnectionObject.setChunkedStreamingMode(0);

这对我有用。

# svn - 只是将存储库从 1.5 服务器移动到 1.7 服务器是错误的吗？

> ID：12210324
> 
> 赞同：5
> 
> 时间：2012-08-31T06:58:02.070
> 
> 标签：svn, svn-repository

我们在 Subversion 1.5 服务器下有 SVN 存储库。
我需要将此存储库移动到另一个 Subversion 1.7 服务器。

据我了解有3种方式：

*   只需将存储库移动到新服务器即可。

*   创建 SVN 1.5 存储库的转储并使用所谓的[转储加载循环](http://subversion.apache.org/faq.html#dumpload)将转储导入新的 1.7 服务器。

    `svnadmin dump`

    `svnadmin load`

*   将存储库移动到新服务器，然后将其升级到支持的最新架构版本：

    `svnadmin upgrade`

**只是将我的存储库的文件夹从 1.5 服务器移动到新的 1.7 服务器是错误的吗？
会不会有什么问题？如果是 - 有什么问题？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T15:44:30.037

仅移动存储库即可，但不会为您提供最佳结果*。*Subversion 1.6 引入了一些存储库优化，当您不执行转储/加载循环时会错过这些优化。

```
svnadmin upgrade <REPOSITORY> 
```

将使未来的版本能够存储 1.6 中的新信息，但不会升级旧版本。但它至少会比坚持使用 1.5 存储库更好/相同/相同。

（1.7 没有引入新格式，所以你正在升级格式到 1.6 兼容）

1.6 格式的新功能：

*   表示共享（磁盘使用改进）
*   存储节点是每个日志项的文件还是目录（svn 日志改进）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:01:32.830

我不是最有经验的颠覆管理员，但我认为转储/加载到新服务器将是一项非常轻松且直接的任务。它得到我的投票。

# asp.net - 使菜单项的行为类似于按钮

> ID：12210329
> 
> 赞同：1
> 
> 时间：2012-08-31T06:58:18.640
> 
> 标签：asp.net, button, menuitem, menubar

是否可以使菜单项的行为类似于按钮？我的意思是，不是将 NavigateUrl 属性设置为新页面，而是在单击项目时分配一个方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:15:33.947

您可以为菜单添加点击处理程序。[MenuItemClick](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.menu.menuitemclick.aspx)告诉您单击了哪个项目。

```
<asp:menu id="NavigationMenu"
        onmenuitemclick="NavigationMenu_MenuItemClick" 
        runat="server"> 
```

您可以根据用户单击的项目采取措施。

```
 void NavigationMenu_MenuItemClick(Object sender, MenuEventArgs e)
  {
    if (e.Item.Text == "MyItem")
    {
      //do some processing
    }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:17:09.397

试试下面的：

```
<asp:menuitem navigateurl="javascript:YourJScript()" 
```

如果您需要在服务器端执行某个方法，请使用隐藏变量，然后在 javascript 方法中设置一个标志并提交页面。

在服务器端，检查页面加载中的标志并根据需要调用方法。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T07:10:03.743

当然你可以做到..你可以调用服务器端函数`__dopostback()`，例如在你的菜单项的点击上你可以调用它`Javascipt function`

```
<script type="text/javascript">
function SaveWithParameter(parameter)
{
  __doPostBack('btnSave ', parameter)
}
</script> 
```

# testing - SOAP UI 断言

> ID：12210337
> 
> 赞同：-1
> 
> 时间：2012-08-31T06:58:52.470
> 
> 标签：testing, soapui, assertions, assertion

在 SOAPUI 中，对于内容断言，我们可以进行 OR 操作。
例如

> 状态 = 失败或未经授权

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:18:18.050

间接这是可能的。您可以添加脚本断言并使用 if 条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T11:22:03.787

我不相信无论如何在单独的断言之间使用 OR 操作，但如果您只是检查消息的内容，您可以在包含断言中使用正则表达式，如图所示

![包含断言](../Images/e0078a32b085b951d43d67d02a9cfbc1.png)

# python - SCons 可以自己下载文件吗？

> ID：12210341
> 
> 赞同：2
> 
> 时间：2012-08-31T06:59:05.037
> 
> 标签：python, scons

我正在研究用于下载外部依赖项的 SCons 选项，而且我对它很陌生。那么，有没有办法从网络下载构建期间所需的文件，还是我必须用 Python 编写？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T07:46:59.090

是的，下载只能用 python 实现的文件。使用 scons，您可以进行特殊操作（称为下载文件的 python 实现）并将 Depends 设置为其他目标/源。但是检查网络文件的依赖似乎太难了。我建议您将其拆分为 2 个任务。首先 - 检查文件并构建，其次 - 下载文件。

```
if not CheckNetworkFiles() :
    print "Network files not found, run: scons download_network_files to correct it."
    Exit(1)
// else continue build

...
if "download_network_files" in COMMAND_LINE_TARGETS:
    Exit( downloadNetworkFiles() ) // python code for downloading files 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-21T19:09:08.640

scons wiki 中有一个用户贡献的构建器，它应该提供大部分（如果不是全部）您正在寻找的东西。

[https://bitbucket.org/scons/scons/wiki/DownloadUnpack](https://bitbucket.org/scons/scons/wiki/DownloadUnpack)

# logging - azure 上的本机 C++ 代码日志记录支持

> ID：12210342
> 
> 赞同：0
> 
> 时间：2012-08-31T06:59:05.937
> 
> 标签：logging, azure, native-code

是否支持在 azure 云中运行的本机 C++ 代码的“日志记录功能”？我有一个从 azure worker 角色产生的本机代码。本机代码启动后，我可以将本机可执行文件的状态记录到 azure blob 或 azure WADLogs 吗？因此，无需远程日志记录，就可以通过 blob 查看器检查日志。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:29:23.577

本机代码没有内置功能，但是如果您的模块可以将日志写入特定文件夹或事件日志，Azure 诊断可以从那里提取它并写入 Azure Blob/WAD blob 存储。也可能有其他方法，但我可以建议您实现目标的几种方法。

在您首先在您的 Worker 角色中启用 Azure 诊断后，您可以使用以下两个选项中的任何一个：

1.  将 Azure 诊断配置为从 Azure 本地存储中的特定文件夹读取日志。现在修改您的本机模块以将所有日志写入特定的本地存储文件夹，其余作业从本地存储文件夹收集日志，然后发送到 Azure WAD 容器将由 Azure 诊断负责。我认为这是最简单的选择。这是[一篇](http://convective.wordpress.com/2009/12/08/custom-diagnostics-in-windows-azure/)解释如何配置 Azure 角色以从特定文件夹读取/传输日志的文章。

2.  如果可以将 Azure 诊断配置为收集事件日志，则可以从本机模块直接写入事件日志，并且 Azure 诊断会将事件日志移动到 Azure WAD 存储。

如果你根本不想使用 Azure 诊断，可以从本机模块和 REST API 直接写入 Azure Blob 存储。有点难，但你肯定能做到。

# javascript - 一页结帐在 Magento 版本中不起作用。1.7.0.2

> ID：12210345
> 
> 赞同：1
> 
> 时间：2012-08-31T06:59:15.183
> 
> 标签：javascript, magento, checkout, magento-1.7

出现一页结帐屏幕，但从未提供以访客身份登录或结帐的选项。当我在 IE 中运行结帐页面时，它会显示一些 java 脚本错误。在这里我附上屏幕截图 [SCREENSHOT1](http://i49.tinypic.com/906f4z.jpg)

[屏幕截图2](http://i46.tinypic.com/15e92ky.jpg)

[屏幕截图3](http://i45.tinypic.com/11s2l43.jpg)

任何人请帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:03:17.183

你的“比伯……”领域真的存在吗？据我所知，您有标签，但没有输入：这将是一个问题:)

# c# - 在将记录保存到数据库时在屏幕上显示“正在保存....”动画

> ID：12210347
> 
> 赞同：0
> 
> 时间：2012-08-31T06:59:30.737
> 
> 标签：c#, jquery, ajax, asp.net-mvc-3, razor

据我所知，有两种可能的设计方法：

1.  使用 gif 文件。单击“保存”按钮后，它应该在屏幕上显示“正在保存...” gif 文件几秒钟（延迟是硬编码的），然后应该开始将记录保存到数据库的过程。理想情况下，这会降低性能，因为动画延迟和保存记录都需要时间。

2.  多线程。保存记录和动画应该并行完成。我不知道如何做到这一点。

哪个是可能的？

请分享一些信息和代码片段。另外，发布任何其他可以解决此问题的想法。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:12:42.433

改用这个插件

[jquery 插件消息](http://bassistance.de/jquery-plugins/jquery-plugin-message/)

[现场演示](http://jquery.bassistance.de/message/demo/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:04:36.460

我认为第一个更好..将下面的代码放在页面中，然后在单击按钮时加载相应的 div id。

```
 <div id="divLoading" class="loading-div">
            <img id="imgLoading" class="loading-img" src="images/loading.gif"" />
            <span>Just a moment...</span>
        </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T07:05:09.180

第二个很容易做到：

使用 JQUERY api，

欲了解更多信息：[这里](http://api.jquery.com/jQuery.ajax/)

```
$.ajax({
  type: "POST",
  url: "some.php", // here server side saving code will be here.
  data: { name: "John", location: "Boston" }
}).done(function( msg ) {
  alert( "Data Saved: " + msg );
}); 
```

同时，您只需要显示 GIF 之类的图像 Loading... 然后保存。

# c# - 适用于 Windows 8 的 BingMapsDirectionsTask 等效项

> ID：12210354
> 
> 赞同：0
> 
> 时间：2012-08-31T07:00:04.157
> 
> 标签：c#, windows-8

一切都在标题中，我正在寻找 Windows Phone 7 中存在的 BingMapsDirectionsTask 在 Windows 8 中的等效项。我的目的是在不使用 bing 地图 API 的情况下显示路线。

提前感谢您的帮助，最好的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T16:56:50.793

由于 Bing 不是内置的，因此您需要手动访问 Bing 或 Google API 以手动获取路线或任何您使用的东西。

[必应地图 API](http://www.microsoft.com/maps/developers/web.aspx)

[谷歌地图 API](https://developers.google.com/maps/)

# android - Eclipse Juno XML 自动完成

> ID：12210358
> 
> 赞同：1
> 
> 时间：2012-08-31T07:00:16.923
> 
> 标签：android, eclipse, eclipse-juno

昨天我安装了新的 Eclipse Juno 并注意到一件事：在编辑 XML 文档（例如布局文件）时，它没有在键入“android:”后显示可能的选项列表，而 Eclipse Indigo 总是这样做。这真的很有帮助，因为它可以通过长命令节省时间，并且如果您不确定哪些选项是可能的，它会有所帮助。有没有办法解决这个问题？谢谢

# parsing - 禁用 commandLink jsf2 PrimeFaces 的条件

> ID：12210362
> 
> 赞同：0
> 
> 时间：2012-08-31T07:00:35.780
> 
> 标签：parsing, jsf-2, primefaces

我想在这种情况下禁用 commandLink： `<p:commandLink id="buttonchoix" value="choisir" disabled="#{editCommandController.result < car.stock}" />`

但它为我生成了这个错误（法语）：

> 错误解析 /vues_admin/editCommand.xhtml：错误跟踪 [行：88] La valeur de l'attribut "disabled" associé à un type d'élément "null" ne doit pas contenir le caractère '<'

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T07:12:13.593

改用`lt`（小于）

```
<p:commandLink id="buttonchoix" value="choisir" disabled="#{editCommandController.result lt car.stock}" /> 
```

另外，请在此处查看下一个**BalusC**答案[有条件地显示 JSF 组件](https://stackoverflow.com/a/4870557/617373)

# javascript - Bookmarklet 目标页面 DOM 遍历。如何？

> ID：12210367
> 
> 赞同：0
> 
> 时间：2012-08-31T07:01:10.257
> 
> 标签：javascript, dom, bookmarklet, traversal

如何制作一个小书签，将内容放入字段并提交表单？

我认为沿着这些思路：

1)var p = document.open(http://site.com/form.htm)

2) var h = p.innerHTML

3) var f = h.getElementById('formfield')

现在如何让当前页面的 URL 成为“formfield”的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:02:50.163

如果您希望将当前页面的 URL 放入表单域，可以这样做：

```
f.value = window.location; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T07:18:19.050

```
var p = document.open(http://site.com/form.htm) 
```

这行不通。你可能会想到 window.open。如果您使用 window.open，则只有在小书签从同一域运行时，它才会对您的目的有用。如果从任何其他域运行，它将打开窗口，但您将无法对新打开的窗口中的文档执行任何其他操作。

```
var h = p.innerHTML 
```

这对您的情况没有任何帮助。它只返回一个文本字符串。

```
var f = h.getElementById('formfield') 
```

这是不正确的，因为它使用“h”，这是不正确的。你可能想要的是这个...

```
var w = window.open('http://site.com/form.htm');
// need code that will check if window is done loading before you use next line!
w.document.getElementById('formfield').value = window.location; 
```

如果您将页面上的小书签与表单一起使用，则只需要以下内容：

```
document.getElementById('formfield').value = window.location; 
```

如果您想打开另一个域的窗口，请输入表单值，然后提交表单 - 使用小书签无法做到这一点。小书签面临与页面中任何其他 javascript 相同的限制。这是为了安全，以防止互联网上的任何网页试图控制您的浏览器并像您一样在其他网站上做事。在这种情况下，您唯一合理的选择是创建/使用浏览器插件/扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T07:51:37.927

如果我理解正确，您想使用书签将当前 URL 和其他一些数据提交到您的服务器。

我会这样做：

1.  使用 JavaScript 将表单附加到当前 DOM。该表单应在书签中进行硬编码。
2.  填写表格，您现在在访客页面上，同一个域。
3.  提交表单，可能使用 target="_blank" 作为结果。

由于跨域限制，您不能使用 Ajax 代替表单来提交数据。

# java - 如何比较 2 个 xml 字符串？

> ID：12210370
> 
> 赞同：0
> 
> 时间：2012-08-31T07:01:31.193
> 
> 标签：java, xml, diff

我对比较 java 中的 2 个 xml 字符串有一个非常具体的要求。我有 2 个 xml 字符串。原始和修改。我需要将原始 xml 字符串与修改后的字符串进行比较，并找出已修改的内容。

例如：

原始xml是

```
 <Mycontacts>
        <contact>
           <firstName>Robert</firstName>
           <PhoneNumber>9053428756</PhoneNumber>
           <lastName>Bobbling</lastName>
           <mobile>4168014523</mobile>
        </contact>
        <contact> 

           <firstName>Lily</firstName>
           <PhoneNumber>9053428756</PhoneNumber>
           <lastName>Bobbling</lastName>
           <mobile>4168014523</mobile>
        </contact>
    </Mycontacts> 
```

修改后的xml：

```
 <Mycontacts>
        <contact>
           <firstName>Robert</firstName>
           <PhoneNumber>40454321333</PhoneNumber>
           <lastName>Bobbling</lastName>
           <mobile>4168014523</mobile>
        </contact>
      </Mycontacts> 
```

由于此处修改了 1 个联系人并删除了 1 个 ID，因此我想形成 2 个 xml 的树。1 是 modify_xml，1 是删除 xml

修改xml：

```
 <contact>

            <firstName>Robert</firstName>
        <PhoneNumber>40454321333</PhoneNumber>
        <lastName>Bobbling</lastName>
           <mobile>4168014523</mobile>
        </contact> 
```

删除 xml：

```
 <contact>
           <name>Lily</name>
      </contact> 
```

如何使用 java API 来做到这一点？解析每个节点并为每个联系人条目创建地图是一个不错的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:22:38.957

假设 XML 布局不随时间变化，我会将 XML 文件解析为 Java 对象并进行比较。您可以使用[XStream](http://xstream.codehaus.org/)或[JAXB](http://www.vogella.com/articles/JAXB/article.html)来执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T07:17:19.887

[http://xmlunit.sourceforge.net/](http://xmlunit.sourceforge.net/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T08:34:14.283

一般情况下非常困难的问题，例如，如果您想检测元素名称已更改但值保持不变，或者您想检测两个元素仍然存在但顺序已颠倒。如果您了解数据的结构会容易得多，例如您能够区分哪些值充当标识符，因此问题减少到在另一个文件中找到具有相同标识符的元素，然后询问哪个它的非识别属性已经改变。

要点是，在尝试设计之前，您需要详细说明需求。

# php - 如何在标题上创建弹出框，然后单击关闭按钮然后不使用 jquery 或 php 在站点中显示？

> ID：12210375
> 
> 赞同：-5
> 
> 时间：2012-08-31T07:01:45.080
> 
> 标签：php, javascript, jquery

我想使用`jquery`或创建`PHP`功能`Javascript`：

> 加载网站后，在带有关闭按钮的标题上显示弹出框，当单击关闭按钮时，弹出窗口关闭。如果未单击关闭按钮，则该弹出窗口将显示在网站的所有页面中。

你能给我建议吗？我对此一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:39:35.327

试试这个 -[**演示**](http://jsfiddle.net/HN3Ba/14/)

单击按钮时，我们将`display`fieldset 的属性设置为`none`，因此不显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:12:15.880

像[`fancybox`](http://fancybox.net/home)什么？你可以用这个[`guide`](http://fancybox.net/howto)。

**编辑**：

按照你在你的php页面中给出的链接试试这个。

```
<?php session_start();?>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script>
//jquery code
$(document).ready(function(){
$('#close_popup').click(function(){
$('#header').css('display','none');
$.post("test.php");
});
})
</script>
</head>
<body>
<div id="header" style="width:100%;top:0;<?php if(isset($_SESSION['isHeaderClosed']) && $_SESSION['isHeaderClosed'] == true) echo 'display:none;'; ?>">
content <input type="button" id="close_popup"/>
</div>
</body>

</html> 
```

（在所有页面中放置 session_start()、div 标头和 jquery 代码）。

在新页面 test.php

```
<?php
session_start();
$_SESSION['isHeaderClosed']=true;
?> 
```

# bash - 如何使用 Bash 更改多个文件名大小写以匹配另一个目录？

> ID：12210376
> 
> 赞同：2
> 
> 时间：2012-08-31T07:01:51.533
> 
> 标签：bash, case, minecraft

我正在从一个基于 YAML 的系统迁移到另一个，将数据从一种管理风格合并到另一种管理风格。

在`path/to/directory/one/`, 文件名是`foobar1.yml`, `foobar2.yml`, ... 在`path/to/new/directory/two/`, 文件名是`FooBar1.yml`, `FooBar3.yml`, ...

在原始系统中，`path/to/directory/other/`有文件名`FooBar1.dat`, `FooBar2.dat`. 它们与 中的文件 1:1 匹配`path/to/directory/one/`，但它们具有正确的大小写以及不同的扩展名和文件内容。

我想使用 bash 读取 中的每个文件`path/to/directory/one/`，获取我需要导入的行，更改其中一行，并将它们写入正确的相应文件以`path/to/new/directory/two/`匹配正确的大小写，如果该文件确实创建一个新文件已经不存在了。

具体来说，我正在尝试将 Minecraft 插件的数据从 Essentials 迁移到 AdminCmd 和 WorldPos。

以下是各种文件和格式的示例：http: [//pastebin.com/PMtCMXGt](http://pastebin.com/PMtCMXGt)

这里的第一个问题，所以如果我太具体或太模糊，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:49:00.447

就像是：

```
cd path/to/directory/one/
for f in *.yml
do
    grep 'whatyouwant' $f >> path/to/new/directory/two/$(sed 's/foobar/FooBar/' <<<$f)
done 
```

我们使用`bash`“这里的字符串”来构建新的文件名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T06:25:09.130

我写了一些我认为你可以使用的东西的基础。让我知道它是否派上用场或缺少

```
DIRONE=/path/to/dir/one
DIROTHER=/path/to/dir/other

for f in $DIRONE/*.yml
do
    basename $f
done | sed -e 's/(.+)\.yml/\1/' | while read name; 
    do

            # find a matching .dat file in $DIRTWO
            for f2 in $DIROTHER/*.dat
            do
                    basename $f2
            done | sed -r 's/(.+)\.dat/\1 \L\1/' | while read nameOrig nameLower; 
                    do
                            if [ $nameLower -eq $name ]; then
                                    #nameLower is foobar1.yml in /path/to/dir/one
                                    #nameHigher is FooBar1.dat in /path/to/dir/two
                                    echo "$nameOrig matches $name"
                                    break;
                            fi
                    done
    done 
```

# mvvm - 正确使用 MVVM Light Messenger 的方法

> ID：12210377
> 
> 赞同：10
> 
> 时间：2012-08-31T07:01:55.717
> 
> 标签：mvvm, mvvm-light, messaging

使用`Messenger`class 的正确方法是什么？我知道它可以用于 ViewModels/Views 通信，但是将它用于技术/业务服务层是一种好方法吗？

例如，日志/导航服务在构造函数中注册一些消息，并知道这些消息何时出现在应用程序中。发送者（ViewModel ou Service）不引用服务接口，只引用messenger发送消息。这是一个示例服务：

```
using System;
using System.Windows;
using System.Windows.Navigation;
using Microsoft.Phone.Controls;
using App.Service.Interfaces;
using GalaSoft.MvvmLight.Messaging;

namespace App.Service
{
    public class NavigationService : INavigationService
    {
        private PhoneApplicationFrame _mainFrame;

        public event NavigatingCancelEventHandler Navigating;

        public NavigationService()
        {
            Messenger.Default.Register<NotificationMessage<Uri>>(this, m => { this.NavigateTo(m.Content); });
        }

        public void NavigateTo(Uri pageUri)
        {
            if (EnsureMainFrame())
            {
                _mainFrame.Navigate(pageUri);
            }
        }

        public void GoBack()
        {
            if (EnsureMainFrame()
                && _mainFrame.CanGoBack)
            {
                _mainFrame.GoBack();
            }
        }

        private bool EnsureMainFrame()
        {
            if (_mainFrame != null)
            {
                return true;
            }

            _mainFrame = Application.Current.RootVisual as PhoneApplicationFrame;

            if (_mainFrame != null)
            {
                // Could be null if the app runs inside a design tool
                _mainFrame.Navigating += (s, e) =>
                {
                    if (Navigating != null)
                    {
                        Navigating(s, e);
                    }
                };

                return true;
            }

            return false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-05T13:15:18.177

对我来说，messenger 的主要用途是因为它允许 viewModel 之间的通信。假设您有一个视图模型，用于为搜索功能提供业务逻辑，并且您的页面/窗口上有 3 个视图模型想要处理搜索以显示输出，信使将是在松散绑定中执行此操作的理想方式方式。

获取搜索数据的视图模型将简单地发送一条“搜索”消息，该消息将被当前注册以使用该消息的任何东西所使用。

这里的好处是：

1.  视图模型之间的轻松通信，无需每个视图模型相互了解
2.  我可以在不影响消费者的情况下更换生产者。
3.  我可以毫不费力地添加更多消息消费者。
4.  它使视图模型保持简单

编辑： **那么，服务呢？**

ViewModel 都是关于如何将数据呈现给 UI。他们获取您的数据并将其塑造成可以呈现给您的视图的东西。ViewModel 从服务中获取数据。

服务向 ViewModel 提供数据和/或业务逻辑。服务工作是为业务模型请求提供服务。如果服务需要通信/使用其他服务来完成其工作，则应使用依赖注入将这些服务注入到服务中。服务通常不会使用信使相互通信。Messenger 非常关注视图模型级别的水平通信。

我见过的一件事是使用 messenger 作为[中介](http://sourcemaking.com/design_patterns/mediator)，而不是将服务直接注入到 viewmodel 中，而是将 messenger 注入到 viewmodel 中。viewmodel 订阅一个事件并从该事件中接收包含模型的事件。如果您正在接收稳定的更新流，或者您正在接收来自多个服务的更新，并且您希望将这些更新合并到一个流中，那就太好了。

当您执行请求/响应类型请求时，使用信使而不是注入服务没有任何意义，因为您必须编写更多代码来执行此操作，而您必须编写直接注入服务并且它使代码难以阅读。

看看你的代码，上面。想象一下，如果您必须为那里的每个方法（Navigate、CanNavigate、GoBack、GoForward 等）编写一个事件。你最终会收到很多消息。您的代码也将更难遵循。

# sql - SQL Server 2008 日期时间范围查询

> ID：12210378
> 
> 赞同：8
> 
> 时间：2012-08-31T07:02:33.607
> 
> 标签：sql, sql-server-2008

我有一张桌子叫`Users`：</p>

```
CreateTime                     UserName
========================================
2012-08-30 14:23:12:000           zhang
2012-08-30 15:11:13:000           li
2012-08-30 16:32:22:000           wang
2012-08-31 11:23:12:000           steven
2012-08-31 12:05:14:000           zhao
2012-08-31 08:23:12:000           ddd 
```

和一个查询：

```
select UserName 
from Users  
where CreateTime >= '2012-08-30' and CreateTime <= '2012-08-31' 
```

因此，结果应该是 6 行，但事实并非如此。

如何解决这个问题？

使用 SQL Server`Convert`功能`CONVERT(VARCHAR(23), CreateTime, 121)`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-31T07:09:44.630

它没有显示 6 行，因为`2012-08-31`解释器将其接收为`2012-08-31 00:00:00 AM`. 由于您希望查看截至 31 日（包括 31 日）的数据，您可以***明确***提及时间或查询第二天的日期。

**使用次日日期的示例**

```
SELECT UserName 
FROM Users  
WHERE CreateTime >= '2012-08-30' AND CreateTime < '2012-09-01' 
```

**明确提及时间的示例**

```
SELECT UserName 
FROM Users  
WHERE CreateTime >= '2012-08-30 00:00:00' AND CreateTime < '2012-09-31 23:59:59' 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-31T07:22:39.890

你所需要的只是[`CAST`](http://msdn.microsoft.com/en-us/library/ms187928.aspx)你的`CreateTime`from `Datetime`to`Date`像这样：

```
SELECT  UserName FROM Users 
WHERE CAST(CreateTime as date)>='2012-08-30' 
AND CAST(CreateTime as date)<= '2012-08-31'; 
```

你也可以像这样使用`BETWEEN`而不是：`<=``>=`

```
SELECT  UserName FROM Users 
WHERE CAST(CreateTime as date) BETWEEN 
'2012-08-30' AND '2012-08-31'; 
```

# [*看到这个 SQLFiddle*](http://sqlfiddle.com/#!3/41043/9)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T07:04:48.033

基本问题是，当您简单地输入一个日期时，SQL Server 将该日期解释为该日期的午夜。因此，当您询问“2012-08-31”时，它的真正含义是“2012-08-31 12:00AM”。

最好的解决方案是比你想要的那一天多走一天，使用少于，而不是少于或等于。

```
select  UserName from  Users  where CreateTime>='2012-08-30' and CreateTime < '2012-09-01' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T07:04:40.843

试试这个

```
select  UserName 
from  Users  
where CreateTime>='2012-08-30' and CreateTime<'2012-09-01' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T07:06:33.200

`CreateTime<='2012-08-31'`最后三个日期永远不会正确，因为它们的时间戳是在午夜之后。`2012-08-31`是 的缩写`2012-08-31 00:00:00`，因此只返回前三行。

您应该始终包含时间戳 - 另外：`BETWEEN`按照其他答案中的建议使用是个好主意。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-31T07:08:27.393

```
select  UserName from  Users  where CreateTime>='2012-08-30' and CreateTime < '2012-09-01' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-24T10:50:01.570

您应该使用以下内容：

```
SELECT UserName 
 FROM Users 
WHERE DATEDIFF(d, '2012-08-30', CreateTime) >= 0 
  AND DATEDIFF(d, @ToDate, '2012-09-01') <=0 
```

您不需要通过此查询传递小时和分钟。

# javascript - jQuery detach() v/s remove() v/s hide()

> ID：12210381
> 
> 赞同：12
> 
> 时间：2012-08-31T07:03:01.843
> 
> 标签：javascript, jquery, highcharts

我在我的页面中使用 highcharts。有点重

当用户单击按钮时，它会动态加载高图，当用户单击`close`按钮时，它会删除/隐藏图表。

我想知道哪个是更好的选择。

1.  用户点击时隐藏图表？它会减慢页面的其余部分（因为存在大量的 javascript 和处理程序？）或者，

2.  `remove()`它，以便它使页面更轻（但是在这里，当用户再次单击按钮时，我需要再次加载图表）或者，

3.  使用`detach()`, 以便在重新加载 highcharts 时，它的工作速度比`remove()`（但它不会使页面更重，因为 jQuery 处理程序一直存在？）

我从 jQuery 文档中知道，

[。消除（）](http://api.jquery.com/remove/)

> .remove() 方法从 DOM 中取出元素。当您想要删除元素本身以及其中的所有内容时，请使用 .remove()。除了元素本身，所有与元素关联的绑定事件和 jQuery 数据都将被删除。

[。分离（）](http://api.jquery.com/detach/)

> .detach() 方法与 .remove() 方法相同，不同之处在于 .detach() 保留与已删除元素关联的所有 jQuery 数据。当移除的元素稍后要重新插入到 DOM 中时，此方法很有用。

[。隐藏（）](http://api.jquery.com/hide/)

> 匹配的元素将立即隐藏，没有动画。这大致相当于调用 .css('display', 'none')

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T07:28:26.393

如果你只是想不时隐藏/显示一个对象，那么使用 jQuery`.hide()`和`.show()`. 这是最简单的，只要您要保留对象，您也可以使用`.hide()`and `.show()`。除非对象消耗大量内存，否则它应该不是问题。

`.remove()`（同时保存并稍后在 DOM 中重新插入相同的对象）对您几乎没有用处，因为它会破坏与该对象关联的一些数据，因此您可能无法轻松地将其重新插入页面中。

`.remove()`您实际上让前一个对象被垃圾收集器销毁，然后在再次需要时从头开始重新创建它是最节省内存的操作，但除非它消耗大量内存或者您有很多内存（例如数千个），在没有任何有意义的好处的情况下，这样做可能只是更多的工作。

`.detach()`（虽然保存并稍后在 DOM 中重新插入相同的对象）会起作用，但它的工作量比`.hide()`and更多，`.show()`而且，老实说，我很怀疑你会发现这两个选项之间的区别。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-31T07:47:34.037

3 将触发渲染和重绘，因此，如果您关心性能，请使用 .hide()，因为它会“节省”一些 dom 操作（可能还有 2 次重绘）。不要忘记图表上的听众。

但是，我发现 forperformance`.addClass('hidden')`和`.removeClass('hidden')`, 使用 css 规则 ( `.hidden {display: none}`) 效果最好。（只要您不隐藏滚动）。

# c++ - VS2010更改路径宏

> ID：12210382
> 
> 赞同：1
> 
> 时间：2012-08-31T07:03:05.197
> 
> 标签：c++, visual-studio-2010, qt

嗨，我有一个 VS2010 项目女巫，我从一台机器移到另一台机器。而在新机器上，QT 安装在不同的位置。

现在项目找不到 QT 头文件和库。当我查看项目属性时，我看到所有 QT 路径都是用 makro $(QTDIR) 设置的，这个路径是旧机器的路径。有什么办法可以改变makro的值吗？

寻求帮助

![道具经理](../Images/81e9e03c1737541ed77a5ee645347046.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T07:31:29.343

There is such thing as User Macros in VS 2010\. It can be defined in Property Sheets. To find it you should open `View->Property Manager` panel, and there you'll see your projects and configurations. It will look like this:

![enter image description here](../Images/fb460ff7eb154ebf6516eb252ccaf886.png)

In my project, I have a `foldernames` property sheet, in QT the name might be different. So you should right-click the property sheet and you'll see `User macros` page under `Common properties`:

![enter image description here](../Images/a9aca39dfc2c786123225191d6a781e6.png)

Check there for your `QTDIR` macro.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T07:26:57.993

我相信 QTDIR 是您需要在 Windows 上定义的系统/用户变量。您可以看一下： http: [//support.microsoft.com/kb/310519](http://support.microsoft.com/kb/310519)，它解释了如何设置该值。

或者，你可以看看：[http ://www.itechtalk.com/thread3595.html](http://www.itechtalk.com/thread3595.html)

设置变量后，您可能需要重新启动 Visual Studio

要检查变量是否已设置，请在命令提示符下键入以下内容： *echo %QTDIR%*

# html - 边界半径 .less 不起作用

> ID：12210383
> 
> 赞同：1
> 
> 时间：2012-08-31T07:03:05.867
> 
> 标签：html, css, less

我有一个站点，我想使用 .less 而不是 .css，但是我的边框半径有问题，如果我将相同的代码复制到一个 css 文件中，在 .less 中工作不会。不起作用，它不需要我的半径和 div 是矩形的。我使用了编译器，它给了我 0 个错误。不知道是不是兼容性问题。这是我的代码，它在 less 但在

**CSS工作**：

```
.colLeft{
    position:absolute;
    top:0;
    left:0;
    background:#fff;
    height:100%;
    width:24%;  
    z-index:0;
}

.colCenter{
    position:absolute;
    top:0;
    left:18%;
    height: 100%;
    width: 68%;
    background: #ccc;
    border-left: 1px solid #333;
    border-radius: 50px 0px 0px 50px / 250px 0px 0px 250px;
    z-index:100;
    overflow:hidden;
    -moz-box-shadow: 1px 1px 1px #000;
    -webkit-box-shadow: 1px 1px 1px #000;
    box-shadow: 1px 1px 1px #000;
}

.colRight{
    position:absolute;
    top:0;
    left:81%;
    background:#fff;
    height:100%;
    width:18%;  
    z-index:1000;
    border-left: 1px solid #333;
    border-radius: 50px 0px 0px 50px / 250px 0px 0px 250px;
} 
```

**网页**：

```
<div class="colLeft" id="one">
</div>
<div class="colCenter" id="two">
    <div class="content">
    <div class="img_background">
                <img src="img/sfondi/<?php echo (basename($_SERVER['HTTP_REFERER'],'.php'));  ?>.jpg" alt="" class="old_img"/>
            </div>
        </div>
    </div>
    </div>
    <div class="colRight" id="three">
        <a href="index.php" id="next">index</a>
        <a href="next.php" id="next">NEXT</a>
    </div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T10:56:46.987

```
border-radius: 50px 0px 0px 50px / 250px 0px 0px 250px; 
```

应该

```
border-radius: 50px 0px 0px ~"50px / 250px" 0px 0px 250px; 
```

否则你会得到一个部门。

Less 正在引入仅在括号内进行除法的策略，以便有效的 css 不会改变，但这将在未来的版本中（例如，可能是 1.4.0）

# c++ - gdb 奇怪的行为（ [next] 在块代码上跳回几行）

> ID：12210384
> 
> 赞同：3
> 
> 时间：2012-08-31T07:03:06.270
> 
> 标签：c++, gdb

在调试直接代码块时，我注意到 gdb 的非常奇怪的行为。我使用以下命令正常运行 gdb。

```
gdb ./exe
break main
run
next 
```

然后`[enter]`几次。我得到的结果是

```
35      world.generations(generations);
(gdb) 
36      world.popSize(100);
(gdb) 
37      world.eliteSize(5);
(gdb) 
41      world.setEvaluationFnc( eval );
(gdb) 
37      world.eliteSize(5);
(gdb) 
39      world.pXOver(0.9);
(gdb) 
38      world.pMut(0.9);
(gdb) 
41      world.setEvaluationFnc( eval );
(gdb) 
```

绝对没有理由两次越过这些线。我不明白这种行为。代码如下所示：

```
(gdb) list 39
34      SimpleGA<MySpecimen> world;
35      world.generations(generations);
36      world.popSize(100);
37      world.eliteSize(5);
38      world.pMut(0.9);
39      world.pXOver(0.9);
40  
41      world.setEvaluationFnc( eval );
42  
43      world.setErrorSink(stderrSink); 
```

我不确定我是否应该忽略它，或者我的代码中发生了一些邪恶的事情。该应用程序使用 OpenMP 并经过编译以使用它。但是，`info thread`说只有一个线程在运行。此外，一切似乎都给出了正确的结果，但即使执行两次也应该没有问题，因为这些大多是一些普通的二传手。

有没有人看到过这样的事情或有任何提示可以在哪里进行调查？我自己失败了=）。

感谢您的提示，luk32。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T08:04:58.173

很可能是编译器重新排列了代码。我想“新”命令仍然可以正常工作？

如果可能，尝试在关闭优化的情况下进行调试；这增加了可执行文件更接近源代码的可能性。

# objective-c - SDWebImage 在缓存它们之前调整来自 url 的图像大小/缩放/裁剪图像

> ID：12210387
> 
> 赞同：10
> 
> 时间：2012-08-31T07:03:13.080
> 
> 标签：objective-c, ios5, sdwebimage

如何在缓存来自 url 的图像之前调整大小、缩放和裁剪图像。我试图用下面的代码来实现这一点。

```
[cell.profilePicture setImageWithURL:[NSURL URLWithString:[rowData objectForKey:@"pictureUrl"]] placeholderImage:nil];
cell.profilePicture.image = [self imageByScalingAndCroppingForSize:CGSizeMake(cell.profilePicture.frame.size.width, cell.profilePicture.frame.size.height) image:cell.profilePicture.image]; 
```

这产生了一个奇怪的结果。首先，它显示了一个未调整大小/缩放/裁剪的版本。但是，当我向下滚动然后返回时，它会显示一个调整大小/缩放/裁剪的版本。我知道这段代码首先缓存图像并调整大小/缩放/裁剪它们。但是，我想不出更好的解决方案。我认为应该有一些东西可以下载图像以便独立调整大小/缩放/裁剪和缓存。有任何想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-02T13:56:53.287

我自己想出了解决方案。

代替

```
[cell.profilePicture setImageWithURL:[NSURL URLWithString:[rowData objectForKey:@"pictureUrl"]] placeholderImage:nil]; 
```

自动下载和缓存图像，使用这个

```
SDWebImageManager *manager = [SDWebImageManager sharedManager];
[manager downloadWithURL:url delegate:self options:0 success:^(UIImage *image) 
{
    cell.profilePicture.image = [self imageByScalingAndCroppingForSize:CGSizeMake(cell.profilePicture.frame.size.width, cell.profilePicture.frame.size.height) image:image];
} failure:nil]; 
```

不要忘记包括

```
#import <SDWebImage/UIImageView+WebCache.h>
@interface YourViewController : UIViewController <SDWebImageManagerDelegate> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-02T23:26:15.013

如果要**缩放** `UIImage`，请尝试以下方式：

```
 - (void)viewDidLoad {
   [super viewDidLoad];

        SDWebImageManager *manager = [SDWebImageManager sharedManager];
        [manager downloadImageWithURL:[NSURL URLWithString:yourPhotoURL]
                              options:SDWebImageRefreshCached
                             progress:nil
                            completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType, BOOL finished, NSURL *imageURL) {
                CGSize size = CGSizeMake(50,50);//width,height
                imageView.image = [self imageWithImage:image scaledToSize:size];
            }];
    }
- (UIImage *)imageWithImage:(UIImage *)image scaledToSize:(CGSize)newSize{
     UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);
     [image drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
     UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
     UIGraphicsEndImageContext();
     return newImage;
} 
```

`imageWithImage`方法来源：[调整 UIImage 大小的最简单方法？](https://stackoverflow.com/questions/2658738/the-simplest-way-to-resize-an-uiimage)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-06T16:57:35.980

这是一个很好的例子，说明如何使用 SDWebImageManagerDelegate 实现。

```
#import <Foundation/Foundation.h>
#import <SDWebImage/SDWebImageManager.h>

@interface ImageLoader : NSObject <SDWebImageManagerDelegate>
+ (instancetype)sharedImageLoader;
@end

@implementation ImageLoader

+ (instancetype)sharedImageLoader
{
    static ImageLoader* loader = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        loader = [[ImageLoader alloc] init];
    });

    return loader;
}

- (UIImage *)imageManager:(SDWebImageManager *)imageManager
 transformDownloadedImage:(UIImage *)image
              withURL:(NSURL *)imageURL
{
    // Place your image size here
    CGFloat width = 50.0f;
    CGFloat height = 50.0f;
    CGSize imageSize = CGSizeMake(width, height);

    UIGraphicsBeginImageContext(imageSize);
    [image drawInRect:CGRectMake(0, 0, width, height)];
    image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return image;
}

@end

Then just add the delegate where needed.

[SDWebImageManager sharedManager].delegate = [ImageLoader sharedImageLoader]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-05T07:36:58.220

If anyone is looking for swift-3 version

```
 self.postImage.sd_setImage(with: URL(string: image)!, placeholderImage: UIImage(named: "image_placeholder"),options: SDWebImageOptions(rawValue: 0),
      completed: { (image, error, cacheType, imageURL) in
         //Scale or do what ever you want to do to the image          
         let newImage = self.scaleImage(image: image!, view: self.postImage)
         self.postImage.image = newImage
     })

func scaleImage(image:UIImage, view:UIImageView) -> UIImage {

        let oldWidth = image.size.width
        let oldHeight = image.size.height

        var scaleFactor:CGFloat
        var newHeight:CGFloat
        var newWidth:CGFloat
        let viewWidth:CGFloat = view.width

        if oldWidth > oldHeight {

            scaleFactor = oldHeight/oldWidth
            newHeight = viewWidth * scaleFactor
            newWidth = viewWidth
        } else {

            scaleFactor = oldHeight/oldWidth
            newHeight = viewWidth * scaleFactor
            newWidth = viewWidth
        }

        UIGraphicsBeginImageContext(CGSize(width:newWidth, height:newHeight))
        image.draw(in: CGRect(x:0, y:0, width:newWidth, height:newHeight))
        let newImage = UIGraphicsGetImageFromCurrentImageContext()
        UIGraphicsEndImageContext()
        return newImage!

    } 
```

`

# python - 如何将 PyPi 依赖项添加到 DEB 包

> ID：12210389
> 
> 赞同：8
> 
> 时间：2012-08-31T07:03:18.120
> 
> 标签：python, installation, distutils, deb, autobahn

我使用创建了一些`python`应用程序`autobahn`并使用`baazar builddeb`. 在 python setup.py 文件中，我添加`requires`了包含所有必需依赖项的标签。是否可以告诉 debian 软件包安装程序安装这些软件包？

我添加了一些部门`debian/control>Depends`但是：

1.  `dpkg -i my_package`不安装依赖项。只是显示错误，我需要手动安装这些 deps。

2.  标准 Ubuntu 存储库中不存在某些软件包。例如高速公路。一般来说，我希望通过以下方式安装所有 python 依赖项`pip/easy_install`

我正在使用`DistUtilsExtra.auto.setup`个性化的`install`操作。所以我想我可以在`easy_install packages`那里跑。这是个好主意吗？

谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-18T18:04:28.607

使用 python-stdeb 包从 pypi 创建 debian 包，然后像任何其他包一样依赖它们。

见[http://pypi.python.org/pypi/stdeb](http://pypi.python.org/pypi/stdeb)

# c# - DropDownList 填充方法会影响回发行为吗？

> ID：12210394
> 
> 赞同：0
> 
> 时间：2012-08-31T07:03:32.747
> 
> 标签：c#, asp.net

我已经开始在现有项目中重写代码，并改变了`dropdownlists`填充两个代码的方式。`DataBind`在回发后使用`SelectedValue`具有正确值时`Page_Load`。但是在使用时`AddRange`始终`SelectedValue`是下拉列表中的第一个值。

下拉列表的填充方式如何影响回发行为？是的，页面中也有 java 脚本，但我看不出它们如何干扰这一点。

工作方式（`SelectedValue`在 中是正确的`Page_Load`）：

```
protected void Page_Init(object sender, EventArgs e)
{
    IList<ListItem> list = new List<ListItem>();
    list.Add(new ListItem(Resources.Site.OriginalStructure, "0"));
    list.Add(new ListItem("5", "5"));
    list.Add(new ListItem("10", "10"));
    list.Add(new ListItem("15", "15"));
    list.Add(new ListItem("20", "20"));
    list.Add(new ListItem("25", "25"));

    DropDownList1.DataSource = list;
    DropDownList1.DataTextField = "Text";
    DropDownList1.DataValueField = "Value";
    DropDownList1.DataBind();

    DropDownList2.DataSource = list;
    DropDownList2.DataTextField = "Text";
    DropDownList2.DataValueField = "Value";
    DropDownList2.DataBind();   
} 
```

不起作用的方式（`SelectedValue`始终是 ddl in 中的第一个值`Page_Load`）：

```
protected void Page_Init(object sender, EventArgs e)
{
    var numberQuestionsPerPageDdlValues = new[]
    {
        new ListItem(Resources.Site.OriginalStructure, "0"),
        new ListItem("5", "5"),
        new ListItem("10", "10"),
        new ListItem("15", "15"),
        new ListItem("20", "20"),
        new ListItem("25", "25")
    };
    DropDownList1.Items.AddRange(numberQuestionsPerPageDdlValues);
    DropDownList2.Items.AddRange(numberQuestionsPerPageDdlValues);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:56:15.503

> “正确的 SelectedValue”是指用户在页面上选择的值

您`DropDownList`在每次回发时将其绑定到它的 DataSource。你应该只这样做`if(!Page.IsPostBack)`。否则事件将不会被触发并且`SelectedValue`用户的 将被覆盖。

我也建议`page_load`改用。

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!Page.IsPostBack)
    {
        IList<ListItem> list = new List<ListItem>();
        list.Add(new ListItem(Resources.Site.OriginalStructure, "0"));
        list.Add(new ListItem("5", "5"));
        list.Add(new ListItem("10", "10"));
        list.Add(new ListItem("15", "15"));
        list.Add(new ListItem("20", "20"));
        list.Add(new ListItem("25", "25"));

        DropDownList1.DataSource = list;
        DropDownList1.DataTextField = "Text";
        DropDownList1.DataValueField = "Value";
        DropDownList1.DataBind();

        DropDownList2.DataSource = list;
        DropDownList2.DataTextField = "Text";
        DropDownList2.DataValueField = "Value";
        DropDownList2.DataBind(); 
    }   
} 
```

# php - 为什么 smarty3 作者删除了函数名中的大量下划线

> ID：12210397
> 
> 赞同：0
> 
> 时间：2012-08-31T07:04:06.233
> 
> 标签：php, smarty

我正在考虑升级到 smarty3，但是很多很多功能已经改名了。

```
assign_by_ref 
```

已更改为

```
assignbyref 
```

这个功能在数百个地方使用，有没有人知道这种疯狂是否有方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:24:37.013

正如您可以阅读随每个 Smarty-Download 分发的 README 文件：

> Smarty 3 API 已被重构为面向一致性和模块化的语法。Smarty 2 API 语法仍受支持，但会发出弃用通知。您可以禁用通知，但强烈建议您将语法调整为 Smarty 3，因为 Smarty 2 语法必须通过额外的重新路由包装器运行。

早在 2010 年，Smarty3 的 Beta 和 RC 阶段就进行了更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T04:59:38.110

绝不是理想的，但它很容易添加

```
 assign_by_ref 
```

复制`sysplugins/smarty_internal_data.php`assignbyref

这避免了使用显然很慢的 smartyBC 包装器，并且似乎工作正常。

# java - 在 PHP 中解析转义的 JSON

> ID：12210398
> 
> 赞同：3
> 
> 时间：2012-08-31T07:04:11.963
> 
> 标签：java, php, json, parsing, apache-httpclient-4.x

我是 PHP 世界的新手，在 PHP 中解析 JSON 时遇到问题。我想使用我的 Java 客户端使用`Apache HttpClient 4.x`和POST 数据到 PHP 脚本`Gson`。

我的 JSON：

```
[{"Knt_KntWatchId":"15","type":"INSERT","Knt_Nazwa1":"a"},{...},...] 
```

我用 Java 发送它，使用`HttpClient`and `Gson`：

```
 List<Contact> contacts = ...;
    HttpPost post = new HttpPost(CONTACTS_SERVICE);
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("key", AppConstants.KEY));
    nameValuePairs.add(new BasicNameValuePair("data", new Gson().toJson(contacts)));
    post.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    post.setHeader("Content-Type", "application/x-www-form-urlencoded; charset=UTF-8"); 
```

在页面上：

```
if (isset($_POST['data'])) {
    $data = $_POST['data'];
    $json = json_decode($data, true);
    var_dump($json);
    var_dump($data); 
```

我得到的是：

```
NULL string(3651) "[{\"Knt_KntWatchId\":\"15\",\"type\":\"INSERT\",\"Knt_Nazwa1\":\"a\"},... 
```

我怎样才能让它工作？

PHP 5.2 - 无法使用`json_last_error()`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-31T07:08:53.807

尝试使用[stripslashes()](http://uk.php.net/stripslashes)

```
$string = stripslashes('[{\"Knt_KntWatchId\":\"15\",\"type\":\"INSERT\",\"Knt_Nazwa1\":\"a\"}]');
print_r(json_decode($string)); 
```

所以我会

```
$json = json_decode(stripslashes($data), true); 
```

# android - 无法安装 API 8

> ID：12210402
> 
> 赞同：0
> 
> 时间：2012-08-31T07:04:26.650
> 
> 标签：android, installation

我`API 4`正在尝试安装android`API 8`但它无法正常工作 我正在禁用安装选项

我收到一些这样的错误

1.  SSL 对等关闭不正确
2.  连接重置

我应该安装任何工具来安装 API 8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:24:52.563

低版本的安卓系统无法安装高版本的应用。在 Android 应用程序中，我们可以定义`uses-sdk android:minSdkVersion="8"`. 低版本 API 可以安装在 AndroidManifest.xml 文件中。

# internationalization - Ruby on Rails 中的 I18n 和重定向会导致一些问题

> ID：12210405
> 
> 赞同：0
> 
> 时间：2012-08-31T07:04:30.707
> 
> 标签：internationalization, ruby-on-rails-3.2

我看到了一个“railscasts”演员表，并没有像他们告诉我的那样。这是我的 route.rb 的一部分

```
 scope ':locale', :locale=> /#{I18n.available_locales.join("|")}/ do
    #..........
    #..........
    namespace :admin do
      resources :products do
         get :who_bought, :on=>:member
     end
     end
  end

  match '*path', :to=> redirect("/#{I18n.default_locale}/%{path}")
  match '', :to=> redirect("/#{I18n.default_locale}") 
```

因此，现在引起了一些问题。看我的日志。

```
Started GET "/products/4/who_bought.atom" for 127.0.0.1 at 2012-08-31 09:58:35 +0400
2012-08-31 09:58:35 INFO -- 

Started GET "/en/products/4/who_bought" for 127.0.0.1 at 2012-08-31 09:58:35 +0400
2012-08-31 09:58:35 INFO -- 

Started GET "/en/en/products/4/who_bought" for 127.0.0.1 at 2012-08-31 09:58:35 +0400
2012-08-31 09:58:35 INFO -- 

Started GET "/en/en/en/products/4/who_bought" for 127.0.0.1 at 2012-08-31 09:58:35 +0400
2012-08-31 09:58:35 INFO -- 

Started GET "/en/en/en/en/products/4/who_bought" for 127.0.0.1 at 2012-08-31 09:58:35 +0400
2012-08-31 09:58:35 INFO -- 

Started GET "/en/en/en/en/en/products/4/who_bought" for 127.0.0.1 at 2012-08-31 09:58:35 +0400
2012-08-31 09:58:35 INFO -- 

Started GET "/en/en/en/en/en/en/products/4/who_bought" for 127.0.0.1 at 2012-08-31 09:58:35 +0400
2012-08-31 09:58:35 INFO -- 

Started GET "/en/en/en/en/en/en/en/products/4/who_bought" for 127.0.0.1 at 2012-08-31 09:58:35 +0400 
```

或者

```
Started GET "/assets/logo.png" for 127.0.0.1 at 2012-08-31 10:55:36 +0400
2012-08-31 10:55:36 INFO -- Served asset /logo.png - 404 Not Found (13ms)
2012-08-31 10:55:36 INFO -- 

Started GET "/assets/products/tea1.jpg" for 127.0.0.1 at 2012-08-31 10:55:36 +0400
2012-08-31 10:55:36 INFO -- Served asset /products/tea1.jpg - 404 Not Found (2ms)
2012-08-31 10:55:38 INFO -- 

Started GET "/en/assets/logo" for 127.0.0.1 at 2012-08-31 10:55:38 +0400
2012-08-31 10:55:38 INFO -- 

Started GET "/en/assets/products/tea1" for 127.0.0.1 at 2012-08-31 10:55:38 +0400
2012-08-31 10:55:38 INFO -- 

Started GET "/en/en/assets/logo" for 127.0.0.1 at 2012-08-31 10:55:38 +0400
2012-08-31 10:55:38 INFO -- 

Started GET "/en/en/assets/products/tea1" for 127.0.0.1 at 2012-08-31 10:55:38 +0400
2012-08-31 10:55:38 INFO -- 

Started GET "/en/en/en/assets/logo" for 127.0.0.1 at 2012-08-31 10:55:38 +0400
2012-08-31 10:55:38 INFO -- 

Started GET "/en/en/en/assets/products/tea1" for 127.0.0.1 at 2012-08-31 10:55:38 +0400
2012-08-31 10:55:38 INFO -- 

Started GET "/en/en/en/en/assets/logo" for 127.0.0.1 at 2012-08-31 10:55:38 +0400
2012-08-31 10:55:38 INFO -- 

Started GET "/en/en/en/en/assets/products/tea1" for 127.0.0.1 at 2012-08-31 10:55:38 +0400
2012-08-31 10:55:38 INFO -- 

Started GET "/en/en/en/en/en/assets/logo" for 127.0.0.1 at 2012-08-31 10:55:38 +0400
2012-08-31 10:55:38 INFO -- 

Started GET "/en/en/en/en/en/assets/products/tea1" for 127.0.0.1 at 2012-08-31 10:55:38 +0400
2012-08-31 10:55:38 INFO -- 

Started GET "/en/en/en/en/en/en/assets/logo" for 127.0.0.1 at 2012-08-31 10:55:38 +0400
2012-08-31 10:55:38 INFO -- 

Started GET "/en/en/en/en/en/en/assets/products/tea1" for 127.0.0.1 at 2012-08-31 10:55:38 +0400
2012-08-31 10:55:38 INFO -- 

Started GET "/en/en/en/en/en/en/en/assets/logo" for 127.0.0.1 at 2012-08-31 10:55:38 +0400
2012-08-31 10:55:38 INFO -- 

Started GET "/en/en/en/en/en/en/en/assets/products/tea1" for 127.0.0.1 at 2012-08-31 10:55:38 +0400
2012-08-31 10:55:38 INFO -- 

Started GET "/en/en/en/en/en/en/en/en/assets/logo" for 127.0.0.1 at 2012-08-31 10:55:38 +0400
2012-08-31 10:55:38 INFO -- 
```

如果我去`"http://localhost:3000/en/fdsfdsfdsfds"`它会将我重定向到`"http://localhost:3000/en/en/en/en/en/en/en/en/en/en/en/en/en/en/en/en/en/en/en/en/en/fdsfdsfdsfds"`

我想摆脱它。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:20:34.383

问题出在您的路线文件上（假设您没有重定向到其他地方）。尝试将最后一位更改为：

```
root to: redirect("/#{I18n.default_locale}") 
match '*path', :to => redirect("/#{I18n.default_locale}/%{path}") 
```

也许删除其他地方的电话

```
puts "INFO... 
```

这使您的日志变得混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:21:01.420

问题是您没有处理对无效资源的范围请求。您的应用程序通过向其添加区域设置来重定向请求，但如果在区域设置块中没有与它匹配的内容，则它会继续向下并到达`match`catch-all 行，将另一个区域设置附加到它，无穷无尽。

*声明资源后*，您需要在范围块*内*添加另一条全能行，如下所示：

 *```
scope ':locale', :locale=> /#{I18n.available_locales.join("|")}/ do

  ...

  namespace :admin do
    resources :products do
      get :who_bought, :on=>:member
   end
  end

  root to: "locale#root"
  match "*path", to: "locale#not_found"
end

match '*path', :to=> redirect("/#{I18n.default_locale}/%{path}")
match '', :to=> redirect("/#{I18n.default_locale}") 
```

在您提供的情况下，请求 URL 与任何资源都不匹配，因为您已将资源命名为 下`admin`，因此您需要在具有前缀等的 URL 上访问`/en/admin/`它们`/es/admin/`。

另请参阅：[为什么 Rails 应用程序意外重定向而不是匹配路由？](https://stackoverflow.com/questions/10052158/why-rails-app-is-redirecting-unexpectedly-instead-of-matching-the-route)*

# c - 数组到字符串的转换

> ID：12210406
> 
> 赞同：0
> 
> 时间：2012-08-31T07:04:31.063
> 
> 标签：c

```
`#include<reg51.h>
#include<string.h>
#include"_LCD_R8C.c"
unsigned char c[11];
void serial_int (void) interrupt 4
{
static unsigned char chr[11];
int i,j;
if (RI==1)      
{
    RI = 0;     
        TI = 0;     
    chr[11] = SBUF;       
        for(j=0;j<1;j++)
         {
       for(i=0;i<=10;i++)
        {
      c[i]=chr;
    }
       c[11]='\0';
     }
   }
} 
```

> ```
> int main()
> {
> unsigned char a[2][11]={"$0016221826","$0123456789"};
> int i,j;
>     lcd_init();
>     lcd_clear();
>     SCON = 0x50;              
>     TMOD = 0x20;                
>     TH1  = 0xFD;                 
>     ET0  = 0;                     
>     TR1  = 1;                       
>     RI   = 1;                   
>     ES   = 1;                   
>     EA   = 1;                   
>     for(i=0;i<=1;i++)
> {
>   **j=strcmp(a,c);**
>     if(j==0)
>       {
>       lcd_printxy(1,1,"yes");
>       }
>     else
>       {
>       lcd_printxy(1,6,"no");
>       }
> }
> }` 
> ```

编译器在第 55 行（粗体）发出警告：指向不同对象的指针。数组到字符串的转换怎么样？这是对的吗？接收到的字符串应该与可用的字符串数组进行比较。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:55:57.150

创建一个包含字符串的数组，例如

```
char foo[] = "bar"; 
```

它实际上与以下相同

```
char foo[] = { 'b', 'a', 'r', '\0' }; 
```

或以下

```
const char *foo = "bar"; 
```

此变量`foo`可以用作数组（即第二个字母是`foo[1]`）或用作可以传递给函数的指针（如`strlen(foo)`将返回 3）。

因此，从程序的角度来看，字符数组或字符指针是等价的，但不能分配给字符数组但可以分配给指针的例外。所以以下是可以的：

```
char foo[] = "bar";
char *pfoo = foo; 
```

但这不行：

```
const char *pfoo = "bar";
char foo[] = pfoo;    /* Error! */ 
```

字符数组和字符指针之间还有另一点不同：在字符数组上使用`sizeof`运算符返回数组中的字符数（包括终止的零），但在字符指针上它返回指针的大小。

例子：

```
char foo[] = "foo";
const char *bar = "bar";

printf("sizeof(foo) = %lu\n", sizeof(foo));
printf("strlen(foo) = %lu\n", strlen(foo));
printf("sizeof(bar) = %lu\n", sizeof(bar));
printf("strlen(bar) = %lu\n", strlen(bar)); 
```

如果您在 64 位机器（其中指针为 8 个字节）上运行上述代码，它将打印：

```
sizeof(foo) = 4
strlen(foo) = 3
sizeof(bar) = 8
strlen(bar) = 3

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:07:59.303

`a`是字符指针数组，`c`而是字符指针。你必须改变你的喜欢`j=strcmp(a[i],c);`

编辑：

在您的`serial_int`函数中，`chr`是字符数组，因此`c[i]=chr`不正确。我不知道你的逻辑是什么，但在语法上它应该是`c[i]=chr[i]`.

此外，您没有使用`j`父循环，这表明您在内部 for 循环的每次迭代中都在做同样的事情。

# css - 用于识别两个样式表中重复的 CSS 选择器的工具

> ID：12210412
> 
> 赞同：5
> 
> 时间：2012-08-31T07:04:38.047
> 
> 标签：css

我们将外部内容连同其关联的外部 CSS 样式表一起引入现有站点，并且需要识别在两个文件中共享相同名称的 CSS 选择器。一旦确定，我们计划手动修改新导入文件中的每个副本，然后相应地更改 HTML。

有谁知道可以做到这一点的工具？我想到的一种痛苦的方法是将所有 CSS 合并到一个 Word 文档中，然后在页面上进行手动查找？不过，这将是很好的避免。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:19:35.743

有一个名为[Dust me selectores](https://addons.mozilla.org/en-US/firefox/addon/dust-me-selectors/)的 firefox 插件，旨在查找未使用的 CSS 代码。这可能是您正在寻找的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:14:05.980

您可以将文件合并为一个，使用启用了排序选择器的[CodeBeautifier 之类的工具。](http://www.codebeautifier.com/)不过需要注意的是：排序选择器可能会改变它们应用于最终文档的方式。

# android - 如何将xml文件放在一个新的单独文件夹中？

> ID：12210417
> 
> 赞同：-1
> 
> 时间：2012-08-31T07:04:45.227
> 
> 标签：android, directory

我有 30 个 xml 文件或布局，为了方便起见，我想将它们放在单独的文件夹中。我应该在哪里创建此文件夹以及如何检索这些文件？提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:12:18.603

您不应将布局放在除布局文件夹之外的单独文件夹中。

# jquery - 如何更改 Nivo Slider controlNav 点的顺序？

> ID：12210419
> 
> 赞同：0
> 
> 时间：2012-08-31T07:04:46.003
> 
> 标签：jquery, slider, direction, nivo-slider

是否可以更改 Nivo Slider controlNav 点的顺序？

DOM 生成的元素是这样的：

```
<div class="nivo-controlNav">
    <a rel="0" class="nivo-control active">1</a>
    <a rel="1" class="nivo-control">2</a>
    <a rel="2" class="nivo-control">3</a>
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T07:31:37.077

我更改了 jquery.nivo.slider.js 文件，如下所示：更改已注释！

```
 if(settings.directionNav){
        slider.append('<div class="nivo-directionNav"><a class="nivo-prevNav">'+ settings.prevText +'</a><a class="nivo-nextNav">'+ settings.nextText +'</a></div>');

        $('a.nivo-prevNav', slider).live('click', function(){
            if(vars.running) { return false; }
            clearInterval(timer);
            timer = '';
            vars.currentSlide += 2; //changed from -=2
            nivoRun(slider, kids, settings, 'prev');
        });

        $('a.nivo-nextNav', slider).live('click', function(){
            if(vars.running) { return false; }
            clearInterval(timer);
            timer = '';
            nivoRun(slider, kids, settings, 'next');
        });
    } 
```

这部分：

```
vars.currentSlide--; //instead of ++
startSlide: 4, // change from 0 to [number of slides-1] 
```

# iphone - 执行某些代码后如何为 UIButton 分配不同的选择器（取消先前的选择器方法）

> ID：12210423
> 
> 赞同：0
> 
> 时间：2012-08-31T07:04:51.380
> 
> 标签：iphone, objective-c, ios, ipad

我有一个按钮名称“button1”，我为它提供了一个选择器，如下所示

```
[button1 addTarget:self action:@selector(buttonPressedMethod:) forControlEvents:UIControlEventTouchUpInside]; 
```

现在在我执行完某些代码之后。我希望这个方法“buttonPressedMethod:”不再参与到游戏中。

我想分配一个不同的选择器方法。说

```
[button1 addTarget:self action:@selector(dummymethod:) forControlEvents:UIControlEventTouchUpInside]; 
```

我现在得到的是。

这两种方法都被调用。我希望一次只调用一种方法。请给出一些取消选择器方法的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T07:09:14.110

在添加新目标之前删除您的第一个目标：

```
[button1 removeTarget:self action:@selector(buttonPressedMethod:) forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T10:06:23.130

有一个变量来跟踪按钮的当前操作。

```
SEL currentAction;

// assign action to button using this
currentAction = @selector (newAction:);
[button1 addTarget: self action: currentAction forControlEvents: UIControlEventTouchUpInside];

// remove previous action action before assigning new one
if (currentAction)
{
    [button1 removeTarget: self action: currentAction forControlEvents: UIControlEventTouchUpInside];
}
// and then reassign action like explained above 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T08:03:24.283

简单试试吧。创建一个方法并将目标添加到 button1 然后进行条件检查以调用另一个方法，例如

```
-(void)button1Clicked:(id)sender{

         if(check_your_Condition==true) { [self previousMethod];}

         else { [self laterMethod];}

} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-31T07:11:48.200

保持一个布尔标志。当您想调用第一个选择器时：

```
if(flag==True)
{
[button1 addTarget:self action:@selector(buttonPressedMethod:) forControlEvents:UIControlEventTouchUpInside];
} 
```

之后，在你想要的地方设置标志为假。

```
if(flag==false)
{
[button1 addTarget:self action:@selector(dummymethod:) forControlEvents:UIControlEventTouchUpInside];
} 
```

# c# - 反射获取对象属性以对列表进行排序

> ID：12210424
> 
> 赞同：7
> 
> 时间：2012-08-31T07:04:56.337
> 
> 标签：c#, sorting, reflection

我想通过存储在其中的对象的属性对 c# 中的列表进行排序。我有这个：

```
if (sortColumn == "Login")
{
    if (sortDir == "ASC")
    {
        filteredList.Sort((x, y) => string.Compare(x.Login, y.Login, true));
    }
    else
    {
        filteredList.Sort((x, y) => string.Compare(y.Login, x.Login, true));
    }
 } 
```

它工作正常，但我想做更通用的，以便不必知道要排序的字段。我有这样的想法：

```
//With sortColumn = "Login";
if (sortDir == "ASC")
{
    filteredList.Sort((x, y) => string.Compare(x.GetType().GetProperty(sortColumn), y.GetType().GetProperty(sortColumn), true));
}
else
{
    filteredList.Sort((x, y) => string.Compare(y.GetType().GetProperty(sortColumn), x.GetType().GetProperty(sortColumn), true));
} 
```

显然这不起作用，但这就是我想要的。有可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T07:19:33.760

反射代码不正确，看看这个

```
PropertyInfo pi1 = typeof(x).GetProperty(sortColumn);
PropertyInfo pi2 = typeof(y).GetProperty(sortColumn);

//With sortColumn = "Login";
if (sortDir == "ASC")
{
    filteredList.Sort((x, y) => string.Compare(pi1.GetValue(x, null), pi2.GetValue(y, null), true));
}
else
{
    filteredList.Sort((x, y) => string.Compare(pi2.GetValue(y, null), pi1.GetValue(x, null), true));
} 
```

我认为这对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T07:10:24.940

这就是我用来解决同样问题的方法。

用法如下：`mySequence.OrderByPropertyName("Login", SortDirection.Descending)`.

```
public enum SortDirection
{
    Ascending,
    Descending
}

public static IOrderedEnumerable<T> OrderByPropertyName<T>
(
    this IEnumerable<T> items,
    string propertyName,
    SortDirection sortDirection = SortDirection.Ascending
)
{
    var propInfo = typeof(T).GetProperty(propertyName);
    return items.OrderByDirection(x => propInfo.GetValue(x, null), sortDirection);
}

public static IOrderedEnumerable<T> OrderByDirection<T, TKey>
(
    this IEnumerable<T> items,
    Func<T, TKey> keyExpression,
    SortDirection sortDirection = SortDirection.Ascending
)
{
    switch (sortDirection)
    {
        case SortDirection.Ascending:
            return items.OrderBy(keyExpression);
        case SortDirection.Descending:
            return items.OrderByDescending(keyExpression);
    }
    throw new ArgumentException("Unknown SortDirection: " + sortDirection);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T07:21:51.113

我已经检查了 dateTime 并且工作正常。

```
 List<DateTime> list = new List<DateTime>();
    list.Add(DateTime.Now);
    list.Add(DateTime.UtcNow.AddYears(2));

    list.Sort((x, y) => (Convert.ToString(x.GetType().GetProperty("DayOfYear").GetValue(x)).CompareTo(Convert.ToString(y.GetType().GetProperty("DayOfYear").GetValue(y))))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-31T14:34:54.313

扩展 verdesmarald 后，我将 Ascending 和 Descending 分离为单独的方法，并添加了 ThenBy 方法：

```
using System.Collections.Generic;

namespace System.Linq
{
    public static class IEnumerableExtensions
    {
        enum SortDirection
        {
            Ascending,
            Descending
        }

        public static IOrderedEnumerable<T> OrderBy<T>
            (this IEnumerable<T> items,
            string propertyName)
        {
            var propInfo = typeof (T).GetProperty(propertyName);
            return items.OrderByDirection(x => propInfo.GetValue(x, null), SortDirection.Ascending);
        }

        public static IOrderedEnumerable<T> ThenBy<T>
            (this IOrderedEnumerable<T> items,
            string propertyName)
        {
            var propInfo = typeof(T).GetProperty(propertyName);
            return items.ThenByDirection(x => propInfo.GetValue(x, null), SortDirection.Ascending);
        }

        public static IOrderedEnumerable<T> OrderByDescending<T>
            (this IEnumerable<T> items,
            string propertyName)
        {
            var propInfo = typeof(T).GetProperty(propertyName);
            return items.OrderByDirection(x => propInfo.GetValue(x, null), SortDirection.Descending);
        }

        public static IOrderedEnumerable<T> ThenByDescending<T>
            (this IOrderedEnumerable<T> items,
            string propertyName)
        {
            var propInfo = typeof(T).GetProperty(propertyName);
            return items.ThenByDirection(x => propInfo.GetValue(x, null), SortDirection.Descending);
        }

        private static IOrderedEnumerable<T> OrderByDirection<T, TKey>
            (this IEnumerable<T> items,
            Func<T, TKey> keyExpression,
            SortDirection sortDirection)
        {
            switch (sortDirection)
            {
                case SortDirection.Ascending:
                    return items.OrderBy(keyExpression);
                case SortDirection.Descending:
                    return items.OrderByDescending(keyExpression);
            }
            throw new ArgumentException("Unknown SortDirection: " + sortDirection);
        }

        private static IOrderedEnumerable<T> ThenByDirection<T, TKey>
            (this IOrderedEnumerable<T> items,
                Func<T, TKey> keyExpression,
                SortDirection sortDirection)
        {
            switch (sortDirection)
            {
                case SortDirection.Ascending:
                    return items.ThenBy(keyExpression);
                case SortDirection.Descending:
                    return items.ThenByDescending(keyExpression);
            }
            throw new ArgumentException("Unknown SortDirection: " + sortDirection);
        }
    }
} 
```

# javascript - 捕获 AJAX 调用

> ID：12210435
> 
> 赞同：1
> 
> 时间：2012-08-31T07:05:30.897
> 
> 标签：javascript, ajax, firefox-addon

我正在开发一个 Firefox 插件。它在浏览器中加载后基本上解析 HTML 文档。我能够捕获表单提交、单击链接等事件。但是，当 HTML 页面通过 AJAX 调用静默提交并部分更新时，我无法捕获它们 - 因此我如何捕获网页 AJAX 请求/附加组件中的响应？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T08:35:16.910

虽然您可以尝试检测 AJAX 调用，但您真正想要检测的是页面修改。您可以为此使用[突变观察者](https://hacks.mozilla.org/2012/05/dom-mutationobserver-reacting-to-dom-changes-without-killing-browser-performance/)（在 Firefox 14 中引入）。例如：

```
var observer = new MutationObserver(onDocumentChange);

// We are interested in elements being added/removed and text changes, not in
// attribute changes however.
var config = { attributes: false, childList: true,
               characterData: true, subtree: true };

// Start observing the content page's document
var doc = gBrowser.contentWindow.document;
observer.observe(doc, config); 
```

`onDocumentChange`每当对内容文档进行更改时，都会调用该函数。

# android - 如何从arraylist中获取值

> ID：12210437
> 
> 赞同：0
> 
> 时间：2012-08-31T07:05:35.833
> 
> 标签：android, arrays

我正在处理来自服务器的 XML 解析，xml 是

```
<?xml version="1.0" encoding="utf-8"?>
<Activities><Activity ID="1" Title="Title1" />
</Activities 
```

我已经解析了 XML，现在我的 ArrayList 中有我的 ID 和 Title，现在我只想获取 Title 值以便我可以填充我的微调器（DropDown）

为了在arraylist中获取值，我在获取如何单独获取标题后使用bean（设置获取bean）

这样我就可以用标题值填充我的 Spinner

请帮忙谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:13:32.557

创建一个 ArrayAdapter，如下所示：

```
ArrayAdapter<String> adapter=new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, list)
{
  public Object getItem(int position)
  {
      BeanClass map=list.get(position);//I assume bean class Have name BeanClass
      return map.getTitle();
  }
}; 
```

并将此适配器设置为微调器。

# batch-file - 将特定进程的编号与编号进行比较

> ID：12210438
> 
> 赞同：1
> 
> 时间：2012-08-31T07:05:43.393
> 
> 标签：batch-file, variable-assignment

在此线程的帮助下，我得到了特定进程的编号：

[如何使用批处理文件计算当前正在运行的同名进程的数量](https://stackoverflow.com/questions/6550200/how-to-count-amount-of-processes-with-identical-name-currently-running-using-a?answertab=oldest#tab-top)

我希望将此命令的结果分配给一个变量，然后将变量与一个数字进行比较。我的代码如下：

```
@echo off
setlocal enabledelayedexpansion 
set procName=chrome.exe
set a=tasklist /FI "IMAGENAME eq %procName%" 2>NUL | find /I /C "%procName%"
if !a! equ 1 (
    echo !a!
    echo %procName% starts to run...
) else (
    echo !a!
    echo %procName% has not run!
) 
```

在这里，'set a=tasklist /FI "IMAGENAME eq %procName%" 2>NUL | 得到了 '0' 查找 /I /C "%procName%"' 命令。它还给了我“回声！a！”的“回声关闭”提示。

仅供参考，在 cmd 中运行以下命令时

> 任务列表 /FI "IMAGENAME eq chrome.exe" 2>NUL | 找到 /c /i "chrome.exe"
> 
> 设置 a=tasklist /FI "IMAGENAME eq chrome.exe" 2>NUL | 找到 /c /i "chrome.exe"

输出分别为 16 和 0。

什么原因？如何将命令的结果分配给变量？如何将变量与数字进行比较？

太感谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T16:54:41.187

好吧，`set a=tasklist /FI "IMAGENAME eq chrome.exe" 2>nul | find /c "chrome.exe"`对我也不起作用。这很好，因为我不知道它应该如何工作。

我相信这会更快，因为它没有`FIND.EXE`写入、读取和删除的开销`proc_temp`。

```
set a=0
for /f "skip=3" %%x in ('tasklist /FI "IMAGENAME eq chrome.exe"') do set /a a=a+1
echo Total chrome.exe tasks running: %a% 
```

**编辑：**我刚刚发现`set /a`不需要扩展变量，因此删除了`setlocal`and`endlocal`命令并更改了`set /a`语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:31:22.723

在环境 a 中的这一行之后，具有所寻求的进程的 pid

```
for /F "tokens=1,2,*" %%a in ('tasklist /fi "imagename eq %procName%"') do if !%%a!==!%procName%!  set a=%b 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T04:58:19.670

我想我找到了解决方案：

```
tasklist /fi "imagename eq %procName%" 2>nul | findstr /i %procName% | find /c /v "">proc_temp
set /p current_num= < proc_temp
echo !current_num! 
```

另外我认为代码可以简化。希望你们中的一些人可以提供简短的版本:)

# xml - 多行上的 WiX XmlFile setValue

> ID：12210443
> 
> 赞同：2
> 
> 时间：2012-08-31T07:06:12.793
> 
> 标签：xml, wix, windows-installer

我`<util:XmlFile>`在安装期间使用带有 setValue 的标签来更新 xml 文件的内容，但它只替换找到的第一个条目。

据我谷歌搜索，该设计仅更新第一个。

有没有人遇到过这个麻烦？
还有其他解决这个问题的好方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T10:33:42.400

您必须使用`bulkSetValue`而不是`setValue`. 更多信息：[http ://wix.sourceforge.net/manual-wix3/util_xsd_xmlfile.htm](http://wix.sourceforge.net/manual-wix3/util_xsd_xmlfile.htm)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-31T09:53:22.543

我所做的解决方法是创建一个`CustomAction`. .NET 使用 XmlDocument 读取所有节点并替换您需要的所有值很容易。我不喜欢这个选项，但我想我别无选择。

# iphone - 是否可以一次更改重复目标的方案名称，它的产品名称？

> ID：12210444
> 
> 赞同：0
> 
> 时间：2012-08-31T07:06:22.253
> 
> 标签：iphone, xcode

我正在研究目标。我也知道如何更改重复目标的方案名称和产品名称。但我的问题是，如果我更改重复目标的名称，那么它也会更改产品名称。是否可以这样做？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:10:51.673

我尝试了同样的方法，它没有改变。您必须通过选择目标手动更改它，然后在构建设置中，搜索“产品名称”并从那里进行更改。另外，尝试将设置从 Simulator 更改为 iOS Device（活动方案旁边的设置）。这将产品名称更改为新名称，否则对于模拟器它将继续显示以前的名称。HTH。

# assembly - x86 程序集 masm32 窗口应用程序停止响应

> ID：12210447
> 
> 赞同：0
> 
> 时间：2012-08-31T07:06:29.477
> 
> 标签：assembly, x86, masm32

我设法创建了一个窗口（感谢 SO 的每个人！），但是每当它运行时，窗口就会形成，但它会立即中断并弹出一个窗口说“test.exe 已停止响应”（test.exe 是程序名称）。

这是代码：

```
.386 
.model flat,stdcall 
option casemap:none
WinMain proto :DWORD,:DWORD,:DWORD,:DWORD

include \masm32\include\windows.inc 
include \masm32\include\user32.inc 
include \masm32\include\kernel32.inc 
include \masm32\include\gdi32.inc 
includelib \masm32\lib\user32.lib 
includelib \masm32\lib\kernel32.lib 
includelib \masm32\lib\gdi32.lib

 .data 
 ClassName db "SimpleWinClass",0 
 AppName  db "If you get this, it worked.",0 
 char WPARAM 20h                       

.data? 
hInstance HINSTANCE ? 
CommandLine LPSTR ?

.code 
start: 
push NULL
call GetModuleHandle 
mov    hInstance,eax 
call GetCommandLine
mov CommandLine,eax
push SW_SHOWDEFAULT
push CommandLine
push NULL
push hInstance
call WinMain
push eax
call ExitProcess

WinMain proc hInst:HINSTANCE,hPrevInst:HINSTANCE,CmdLine:LPSTR,CmdShow:DWORD 
LOCAL wc:WNDCLASSEX 
LOCAL msg:MSG 
LOCAL hwnd:HWND 
mov   wc.cbSize,SIZEOF WNDCLASSEX 
mov   wc.style, CS_HREDRAW or CS_VREDRAW 
mov   wc.lpfnWndProc, OFFSET WndProc 
mov   wc.cbClsExtra,NULL 
mov   wc.cbWndExtra,NULL 
push  hInst 
pop   wc.hInstance 
mov   wc.hbrBackground,COLOR_WINDOW+1 
mov   wc.lpszMenuName,NULL 
mov   wc.lpszClassName,OFFSET ClassName 
push IDI_APPLICATION
push NULL
call LoadIcon
mov   wc.hIcon,eax 
mov   wc.hIconSm,eax 
push IDC_ARROW
push NULL
call LoadCursor
mov   wc.hCursor,eax 
lea eax, wc
push eax
call RegisterClassEx
push NULL
push hInst
push NULL
push NULL
push CW_USEDEFAULT
push CW_USEDEFAULT
push CW_USEDEFAULT
push CW_USEDEFAULT
push WS_OVERLAPPEDWINDOW
lea eax, AppName
push eax
lea eax, ClassName
push eax
push NULL
call CreateWindowEx
    mov   hwnd,eax 
push SW_SHOWNORMAL
push hwnd
call ShowWindow  
  push hwnd
  call UpdateWindow
     .WHILE TRUE 
         push 0
         push 0
         push NULL
         lea eax, msg
         push eax
         call GetMessage
         .BREAK .IF (!eax)
        lea eax, msg
        push eax
        call TranslateMessage
        lea eax, msg
        call DispatchMessage
     .ENDW 
     mov     eax,msg.wParam 
     ret 
WinMain endp

WndProc proc hWnd:HWND, uMsg:UINT, wParam:WPARAM, lParam:LPARAM 
    LOCAL hdc:HDC 
    LOCAL ps:PAINTSTRUCT

    .IF uMsg==WM_DESTROY 
    push NULL
    call PostQuitMessage
    .ELSEIF uMsg==WM_CHAR 
        push wParam 
        pop  char 
    push TRUE
    push NULL
    push hWnd
    call InvalidateRect
     .ELSEIF uMsg==WM_PAINT 
    lea eax, ps
    push eax
    push hWnd
    call BeginPaint
        mov    hdc,eax 
    push 1
    lea eax, char
    push eax
    push 0
    push 0
    push hdc
    call TextOut
    lea eax, ps
    push eax
    push hWnd
    call EndPaint
    .ELSE 
    push lParam
    push wParam
    push uMsg
    push hWnd
    call DefWindowProc
        ret 
    .ENDIF 
        xor    eax,eax 
        ret 
    push 0
    call ExitProcess
WndProc endp 
end start 
```

为什么老是断？我已经看到当我不放入时也会发生同样的事情，`call ExitProcess`但我有这个时间，那为什么它会一直关闭？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T19:56:22.740

由于您是初学者并使用 MASM，我强烈建议您不要使用推送/呼叫！！！！除了错误，不使用 INVOKE 将一无所获。

如果您使用过调用，ml 就会发现问题。

你在这里错过了什么吗？

```
lea eax, msg
call DispatchMessage 
```

你忘了`push eax`！

另外，为了您和其他必须阅读您的代码的人，请使用缩进样式。通常在左边距和助记符之间有 4 个空格。

# php - Wordpress：javascript 在服务器上的 wp-admin 中不起作用

> ID：12210450
> 
> 赞同：0
> 
> 时间：2012-08-31T07:06:40.500
> 
> 标签：php, javascript, wordpress

我在 wp-admin 中创建了一个名为“vendors”的自定义帖子类型。现在我想要的是用户无法输入重复的帖子标题。所以我正在做的是当用户输入帖子标题时，我通过在functions.php中保存自定义帖子功能中的查询检查它输入的帖子标题不存在它应该保存帖子但如果它已经存在我应用删除查询并删除该帖子并显示javascript 警报“此条目已存在”并通过 javascript window.location 将用户重定向到 wp-admin/post_new.php 以重新设置。**它在localhost**上工作得很好。但是当我上传到服务器上时。删除查询工作正常，但它在 wp-admin/edit.php 上自动重定向。window.location 和 alert 都不起作用。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:14:12.820

将新的 wp-admin 文件夹上传到服务器。那是正确的解决方案。它对我有用。

出现此问题的原因是有时可能会在上次上传 wordpress 文件夹时出现一些问题。

# c - 如何防止 memcpy 缓冲区溢出？

> ID：12210451
> 
> 赞同：11
> 
> 时间：2012-08-31T07:06:43.603
> 
> 标签：c, memcpy, buffer-overflow, fortify-source

程序中有一些固定大小的二进制缓冲区用于存储数据，而 memcpy 用于将缓冲区从一个缓冲区复制到另一个缓冲区。由于源缓冲区可能大于目标缓冲区，如何检测是否存在缓冲区溢出？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-31T07:09:34.583

您必须知道源缓冲区中有多少数据以及目标缓冲区中有多少可用空间。

`memcpy()`如果目标缓冲区中没有足够空间存储您要从源缓冲区复制的所有数据，请不要调用。（如果源大于目标，您必须决定是否可以截断数据。）

如果您不知道，请重写代码，以便您知道有多少空间；否则，它是不安全的。

请注意，如果源缓冲区和目标缓冲区有可能重叠，则应使用`memmove()`而不是`memcpy()`.

在 C++`memcpy()`中，首先对使用不屑一顾；这是一种 C 风格的操作，而不是 C++。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-09-12T16:12:32.440

> 如何检测是否存在缓冲区溢出？

我认为你有三四个选择（给予或接受）。

* * *

第一种选择是为`memcpy`. 这是我在我的职权范围内对代码的要求，并且我会定期对其进行审核。我还要求验证所有参数，并断言所有参数。

断言创建自调试代码。我希望开发人员编写代码；而且我不希望他们浪费时间调试。所以我要求他们编写可以自行调试的代码。ASSERT 还可以很好地记录事情，因此他们可以跳过文档。在发布版本中，ASSERT 被前置宏删除。

```
errno_t safe_memcpy(void* dest, size_t dsize, void* src, size_t ssize, size_t cnt)
{
    ASSERT(dest != NULL);
    ASSERT(src != NULL);
    ASSERT(dsize != 0);
    ASSERT(ssize != 0);
    ASSERT(cnt != 0);

    // What was the point of this call?
    if(cnt == 0)
        retrn 0;

    if(dest == NULL || src == NULL)
        return EINVALID;

    if(dsize == 0 || ssize == 0)
        return EINVALID;

    ASSERT(dsize <= RSIZE_MAX);
    ASSERT(ssize <= RSIZE_MAX);
    ASSERT(cnt <= RSIZE_MAX);

    if(dsize > RSIZE_MAX || ssize > RSIZE_MAX || cnt > RSIZE_MAX)
        return EINVALID;

    size_t cc = min(min(dsize, ssize), cnt);
    memmove(dest, src, cc);

    if(cc != cnt)
        return ETRUNCATE;

    return 0;
} 
```

如果您`safe_memcpy`返回非 0，则存在错误参数或潜在缓冲区溢出等错误。

* * *

第二种选择是使用 C 标准提供的“更安全”的功能。C 通过[ISO/IEC TR 24731-1, Bounds Checking Interfaces](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1225.pdf)具有“更安全”的功能。在符合标准的平台上，您可以简单地调用`gets_s`and `sprintf_s`。它们提供一致的行为（例如始终确保`NULL`终止字符串）和一致的返回值（例如成功时为 0 或`errno_t`）。

```
errno_t  err = memcpy_s(dest, dsize, src, cnt);
... 
```

不幸的是，gcc 和 glibc 不符合 C 标准。Ulrich Drepper（glibc 维护者之一）称边界检查接口是*[“非常低效的 BSD 废话”](http://www.sourceware.org/ml/libc-alpha/2000-08/msg00053.html)*，并且从未添加过它们。

* * *

第三种选择是使用平台的“更安全”接口（如果存在）。在 Windows 上，这恰好与[ISO/IEC TR 24731-1, Bounds Checking Interfaces](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1225.pdf)中的相同。您还拥有 String Safe 库。

在 Apple 和 BSD 上，您没有`memcpy`. 但是你确实有更安全的字符串函数，比如`strlcpy`,`strlcat`和朋友。

* * *

在 Linux 上，您的第四个选择是使用 FORTIFY_SOURCE。FORTIFY_SOURCE 使用高风险函数的“更安全”变体，`memcpy`例如`strcpy`和`gets`。当编译器可以推断目标缓冲区大小时，它会使用更安全的变体。如果副本超出目标缓冲区大小，则程序调用`abort()`. 如果编译器无法推断目标缓冲区大小，则不使用“更安全”的变体。

`-U_FORTIFY_SOURCE`要禁用 FORTIFY_SOURCE 进行测试，您应该使用或编译程序`-D_FORTIFY_SOURCE=0`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-31T07:08:43.030

您应该始终了解并检查 src 和 dest 缓冲区大小！

```
void *memcpy(void *dest, const void *src, size_t n); 
```

`n`永远不应大于`src`或`dest`大小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T07:27:52.827

例如，如果您有：

目标 4 字节大小

源 5 字节大小

您可以确保将最多 4 个字节复制到目标缓冲区：

```
size_t getCopySize(size_t sourceSize, size_t destSize)
{
    return (destSize <= sourceSize ? destSize : sourceSize);
}
memcpy(destination, source, getCopySize(sizeof(source),sizeof(destination))); 
```

根据您的应用程序，您还可以确保稍后将复制剩余的数据，或者如果可以忽略某些数据，则可以跳过它。

# jquery - 从查询集填充的 django 可编辑下拉列表

> ID：12210453
> 
> 赞同：1
> 
> 时间：2012-08-31T07:06:59.047
> 
> 标签：jquery, django

我正在寻找一种可能的方法来制作从查询集中填充的 django 组合框，但我没有设法在网络中找到相关的东西。是否可以像下面这样管理某事？我有一个模型表单，我想将一个字段呈现为组合框。重要提示：不是作为使用 ModelChoiceField 的经典下拉列表，而是作为由查询集填充的可编辑下拉列表？我知道我可以为此使用 jquery，但是如何使用查询集填充它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:13:05.583

Django 确实支持动态初始值，请在以下位置了解更多信息：[https ://docs.djangoproject.com/en/dev/ref/forms/api/#dynamic-initial-values](https://docs.djangoproject.com/en/dev/ref/forms/api/#dynamic-initial-values)

您可能只需要某种 jquery 插件来使其可编辑。事实上，正如所建议的那样，选择可能会是一个不错的选择。

# java - RabbitMQ AMQP Java 客户端关闭处理程序的目的是什么？

> ID：12210455
> 
> 赞同：3
> 
> 时间：2012-08-31T07:07:22.653
> 
> 标签：java, rabbitmq

[RabbitMQ 文档](http://www.rabbitmq.com/api-guide.html#shutdown)介绍了如何添加关闭侦听器以及何时调用侦听器，但我看不到处理程序的用途。似乎所有的 Java 示例（包括[https://github.com/rabbitmq/rabbitmq-tutorials](https://github.com/rabbitmq/rabbitmq-tutorials)）都忽略了关闭处理程序。在哪些情况下，我应该更喜欢关闭侦听器而不是简单地捕获`ShutdownSignalException`（和`IOException`）异常？

另一个令人费解的问题是当处理程序完成时控制流去哪里。

可能相关的 SO 问题：

*   [使用运行 RabbitMQ 消费者安全结束 Java 应用程序的最佳方法是什么](https://stackoverflow.com/questions/6699669)
*   [使用 RabbitMQ（Java 客户端），有没有办法确定消费期间网络连接是否关闭？](https://stackoverflow.com/questions/2472278)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-24T20:24:23.783

捕获 IOException 可以告诉您是否由于方法调用而导致连接/通道关闭，但连接/通道也可以不由自主地关闭，例如与服务器的连接丢失。在这种情况下，ShutdownListener 是了解连接/通道关闭的唯一方法。

关闭侦听器通常用于提供连接/通道恢复，尽管可靠地恢复本身就是一个挑战。为此，请查看[Lyra](https://github.com/jhalterman/lyra)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-24T20:35:11.233

`ShutdownListener`我见过的主要用途是自动重新连接。您监听关机，当它发生时，尝试重新连接。

例如，这是[rabbitmq-ha-client](https://github.com/joshdevins/rabbitmq-ha-client)的基础，它在[HaConnectionFactory.HaShutdownListener](https://github.com/joshdevins/rabbitmq-ha-client/blob/8b2ca8c6e37eefdc26ad907ebdd73383bdac3d01/src/main/java/net/joshdevins/rabbitmq/client/ha/HaConnectionFactory.java#L76)中完成。

# function - 我们可以在准备好的语句中调用sql函数吗？

> ID：12210456
> 
> 赞同：0
> 
> 时间：2012-08-31T07:07:29.920
> 
> 标签：function, jdbc, prepared-statement

我有一个oracle函数。函数名称是 TESTFUNCTION。我使用的代码是

```
PreparedStatement pStmt = con.prepareStatement("SELECT dbo.TESTFUNCTION(?,?)") ; 
```

我也设置了参数。

```
ResultSet rs = pStmt.executeQuery(); 
```

此代码将产生以下异常

```
java.sql.SQLSyntaxErrorException: ORA-00923: FROM keyword not found where expected 
```

任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:11:31.413

当您尝试执行 SELECT 语句并且您错过或放错了 FROM 关键字时，会发生此错误。尝试检查 from 关键字。

[在这里](http://www.techonthenet.com/oracle/errors/ora00923.php)查看详细信息。

注意：在这种情况下，最好使用[Callable Statement](http://www.tutorialspoint.com/jdbc/jdbc-statements.htm)而不是prepared statement。

在这种情况下，您可以使用 callable 语句：

```
String SQL = "{call dbo.TESTFUNCTION(?,?)}";
   cstmt = con.prepareCall (SQL); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:14:16.470

[PreparedStatement](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)对SQL 查询有用，对函数调用没有用。对于函数调用和存储过程，请使用[CallableStatement](http://docs.oracle.com/javase/6/docs/api/java/sql/CallableStatement.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-17T12:34:56.800

您缺少 FROM 关键字。改成这样：

```
PreparedStatement pStmt = con.prepareStatement("SELECT dbo.TESTFUNCTION(?,?) FROM dual;") ; 
```

# cakephp - 在 CakePHP 中处理错误时设置页面标题

> ID：12210457
> 
> 赞同：2
> 
> 时间：2012-08-31T07:07:34.623
> 
> 标签：cakephp, cakephp-2.0

在处理 404 之类的错误时，我需要从默认的“错误”更改页面标题。所以我需要将我的标题放在我的布局的变量 $title_for_layout 中。我尝试通过更改 app/Config/core.php 中的配置并将页面标题设置为控制器来创建自定义错误处理功能

```
Configure::write('Error.handler', function($code, $description, $file = null, $line = null, $context = null) {
     $this->set('title_for_layout', 'Vyskytla sa chyba');
}); 
```

正如我所料，我收到了一个 PHP 错误（第 59 行是代码示例中的第二行）

```
Fatal error: Using $this when not in object context in /var/www/web/app/Config/core.php on line 59 
```

那么如何为我的 default.ctp 布局设置标题？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T07:10:12.227

**在 CakePHP 2.0 中，您可以尝试以下代码来实现您所需要的。**

尝试这个：

/app/Config/core.php

异常渲染需要设置为`AppExceptionRender`. 例子：

```
Configure::write('Exception', array(
        'handler' => 'ErrorHandler::handleException',
        'renderer' => 'AppExceptionRenderer',
        'log' => true
)); 
```

/app/Controller/ErrorsController.php

```
class ErrorsController extends AppController {
    public $name = 'Errors';

    public function beforeFilter() {
        parent::beforeFilter();
        $this->Auth->allow('error404');
    }

    public function error404() {
        //$this->layout = 'default';
            $this->set('title_for_layout', 'Vyskytla sa chyba'); 
    }
} 
```

/app/Lib/Error/AppExceptionRenderer.php

```
App::uses('ExceptionRenderer', 'Error');

class AppExceptionRenderer extends ExceptionRenderer {

    public function notFound($error) {
        $this->controller->redirect(array('controller' => 'errors', 'action' => 'error404'));
    }
} 
```

/app/View/Errors/error404.ctp

```
<div class="inner404">
    <h2>404 Error - Page Not Found</h2>
</div> 
```

将其插入您需要的位置：`throw new NotFoundException();`

参考：[CakePHP 2.0 - 如何制作自定义错误页面？](https://stackoverflow.com/questions/9620363/cakephp-2-0-how-to-make-custom-error-pages)

**对于 < CakePHP 2.x：**

如果您在 app/views/errors 中创建自定义错误页面视图，那么在该错误视图页面的 php 部分中，您可以使用：

```
$this->setLayout("Title for the error page here"); 
```

然后，当您看到错误页面时，它将有您的标题。同样，如果您设置自定义错误页面。

这是执行您需要的相同操作的另一种方法。

```
// Create an error.php file in your /app folder with the following code:

<?php
class AppError extends ErrorHandler {
    function error404($params) {
            $this->controller->layout = "error";
            $this->set('title_for_layout', 'Vyskytla sa chyba');
            parent::error404($params);
    }
}
?> 
```

# iphone - 如何在 Flurry SDK 中展示广告？

> ID：12210461
> 
> 赞同：3
> 
> 时间：2012-08-31T07:07:55.217
> 
> 标签：iphone, objective-c, ads, flurry

如何快速使用 AppCircle？我正在使用 flurry sdk 但在这里找不到 AppCircle 头文件。如何通过flurry sdk给谁做广告？

[http://support.flurry.com/index.php?title=AppCircle/GettingStarted/TechnicalQuickStart](http://support.flurry.com/index.php?title=AppCircle/GettingStarted/TechnicalQuickStart)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:45:59.650

我正在与 Flurry 支持人员交谈，他们说 - 当前的 SDK 版本不包含 AppCircle。相应的功能会在以后的 SDK 版本中增加，或者您可以尝试使用旧的 SDK。我确实尝试了 2.2.5 Android SDK - 它可以工作，但 AppCircle.getOffer() 返回 null。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T12:08:23.320

Flurry Sdk 链接与 AppCircle 文件。首先我要导入这个 sdk [https://github.com/brightapps-in/Flurry-SDK-for-iPhone](https://github.com/brightapps-in/Flurry-SDK-for-iPhone)

在 appdelegate 中导入：

```
#import "FlurryAPI+AppCircle.h" 
```

和

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
   appDelegate=(AppDelegate*) [[UIApplication sharedApplication]delegate];
   [FlurryAPI setAppCircleDelegate:self];
   [FlurryAPI setAppCircleEnabled:YES];
   [FlurryAPI startSession:@"App Circle key"];
} 
```

在您的班级中导入：-

```
- (void)viewDidLoad
{
    UIView *banner = [FlurryAPI getHook:@"APP_MAIN_HOOK"
                                   xLoc:0
                                   yLoc:0
                                   view:self.view];
} 
```

# python - 在 python 脚本中提供指导

> ID：12210469
> 
> 赞同：0
> 
> 时间：2012-08-31T07:08:53.233
> 
> 标签：python

我编写了一个 python 代码，它接受用户的输入并操纵输入以提供结果。我希望提供一个类似功能的帮助，如果用户将其中一个条目留空，则会出现该功能。

```
 dir  = raw_input("Enter dir:")
    path = raw_input("Enter path:")

    print random_method(dir, path) 
```

现在，如果用户没有为 dir 或 path 输入任何值，则必须在 python 引发它自己的错误之前告知警告或指导。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:14:21.427

你的意思是这样的：

```
dir  = raw_input("Enter dir:")
if not dir:
    dir = raw_input("Do you really want to leave a blank? Enter dir:")
path = raw_input("Enter path:")
if not path:
    path = raw_input("Do you really want to leave a blank? Enter dir:") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T07:15:55.497

```
dir  = raw_input("Enter dir:")
path = raw_input("Enter path:")
if '' in (dir.strip(),path.strip()): #if anyone of these is empty then print the error
    print "either dir or path is empty"
else: 
    print random_method(dir, path) 
```

# python - 如何在python中执行某个时间段的功能？

> ID：12210472
> 
> 赞同：2
> 
> 时间：2012-08-31T07:09:02.527
> 
> 标签：python, function, time, execution

我有一个功能：

```
perform(val) 
```

我想这样调用它两次：

```
perform(True)
perform(False) 
```

在这里，我希望第一个函数调用`perform(True)`执行 5 个小时。5 小时后，in 的最后一条语句一`perform(True)`执行，就必须返回，并且`perform(False)`必须执行。

与此类似的东西：

```
while passed_time < 5:00:
    perform(True)
perform(False) 
```

或者也许`perform(val)`应该改变的定义？

```
def perform(val):
    while passed_time < 5:00
        do_something1()
        do_something2()
        do_something3()
        do_something4()

    return 
```

我怎样才能做到这一点？

此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T07:12:44.487

```
from datetime import datetime, timedelta
start = datetime.now()
while datetime.now() - start < timedelta(seconds=5*60*60):
    perform(True)
perform(False) 
```

# c++ - 动态确定从 C/C++ 源构建的任何动态库的 gcc 版本

> ID：12210478
> 
> 赞同：0
> 
> 时间：2012-08-31T07:09:18.880
> 
> 标签：c++, gcc, dynamic-library

我从某个地方得到了一个 abc.so 库，在使用 gcc4.4.3 时，我收到错误，表明这个 abc.so 是不兼容的类型。知道如何找到这个库的版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:14:55.163

在 Unix 下：

列出二进制文件中的字符串，然后简单地 grep GCC 版本：

```
 strings -a <binary>| grep "GCC:" 
```

这将为您提供用于构建二进制文件的 GCC 版本。但我不确定这是你想知道的。您还可以通过使用获取有关二进制文件的更多信息`readelf -h <binary>`

# html - 子列表父级中的 CSS 菜单布局

> ID：12210484
> 
> 赞同：1
> 
> 时间：2012-08-31T07:09:37.487
> 
> 标签：html, css

在假期期间，我一直在利用空闲时间来提高我的 HTML 知识。

在我设计 CSS 菜单期间。我面临一些问题，不知道如何解决。

我试图从谷歌搜索。由于我的英语不好，我无法找到解决方案，所以我在这里寻求帮助。

**问题：**

我试图设计一个带有可扩展子菜单的 CSS 菜单。为什么子菜单的父列表没有变化？

正如您从屏幕截图中看到的那样。产品菜单与其他菜单不同**。**

有什么解决办法吗？

**截屏**

由于我的声誉，我无法提供屏幕截图，所以我将提供一个链接：

[http://i151.photobucket.com/albums/s155/HongJaiz/CSSMenu.jpg](http://i151.photobucket.com/albums/s155/HongJaiz/CSSMenu.jpg)

**CSS3 编码**

```
body{
    position: relative;
    height: 100%;
    background: -webkit-gradient(linear, left top, left bottom, from(#ccc), to(#fff));

}

.navbox {
    position: relative;
    float: left;
}

ul#expList {
    list-style: none;
    display: block;
    width: 200px;
    position: relative;
    padding: 60px 0 60px 0;
    background: url(shad2.png) no-repeat;
    -webkit-background-size: 50% 100%;
}

li#expList {
    list-style: none;
    display: block;
    width: 200px;
    position: relative;
    padding: 60px 0 60px 0;
    background: url(shad2.png) no-repeat;
    -webkit-background-size: 50% 100%;
}

ul li {
    list-style: none;
}

li {
    margin: 5px 0 0 0;
}

ul#expList li a {
    -webkit-transition: all 0.3s ease-out;
    background: #cbcbcb url(border.png) no-repeat;
    color: #174867;
    padding: 7px 15px 7px 15px;
    -webkit-border-top-right-radius: 10px;
    -webkit-border-bottom-right-radius: 10px;
    width: 100px;
    display: block;
    text-decoration: none;
    -webkit-box-shadow: 2px 2px 4px #888;
}

ul#expList li a:hover {
    background: #ebebeb url(border.png) no-repeat;
    color: #67a5cd;
    padding: 7px 15px 7px 30px;
} 
```

**HTML 编码**

```
<ul id="expList">
    <li class="home"><a href="">Home</a></li>
    <li class="freebies">Product
        <ul>
            <li><a href="">List 1</a></li>
            <li><a href="">List 2</a></li>
            <li><a href="">List 3</a></li>
        </ul>
    </li>
    <li class="about"><a href="">Register</a></li>
    <li class="about"><a href="">About Us</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:16:01.770

只是因为你已经给了子菜单的样式`<a></a>`并且`<li></li>`在子菜单的父级的情况下，即**`Product`**你没有将它包装在`<a></a>`标签中，这样做会解决你的问题

```
<ul id="expList">
    <li class="home"><a href="">Home</a></li>
    <li class="freebies"><a>Product</a>
        <ul>
            <li><a href="">List 1</a></li>
            <li><a href="">List 2</a></li>
            <li><a href="">List 3</a></li>
        </ul>
    </li>
    <li class="about"><a href="">Register</a></li>
    <li class="about"><a href="">About Us</a></li>
</ul> 
```

# ruby-on-rails - Debian 6 中 Ruby on Rails 应用程序的 Phusion Passenger + Nginx 虚拟主机配置

> ID：12210495
> 
> 赞同：1
> 
> 时间：2012-08-31T07:10:34.343
> 
> 标签：ruby-on-rails, nginx, virtualhost, passenger

**我的问题是我如何在 Debian 6 下使用 Phusion Passenger + Nginx 将端口 80 的所有实例与适当的相同子域映射到以下场景。**

**注意：**我是 ruby​​ on rails 和服务器托管的新手，我无法表达我的愿景作为问题，如果我错了或纠正我，请原谅我。

嗨，我有一个使用 ruby​​ on rails 开发的产品，将托管在具有 32 GB 内存和 8 核服务器处理器的专用服务器中。每个客户端都应该有单独的数据库和单独的 rails 实例。我正在复制 - 使用单独的文件夹为每个客户端复制代码并提供不同的数据库名称，因此每个都用作不同的实例。基本上所有客户端的源代码都是相同的，但只有数据库名称不同，所以我将源代码放在不同的文件夹中，并作为每个客户端的单独 Rails 应用程序。

**例如：**

我有一个主临时域

```
www.product.com 
```

对于每个客户端，我需要将单独的子域映射到具有相同端口（80）但具有不同 rails 实例名称的同一服务器

```
www.client1.product.com
www.client2.product.com
www.clientn.product.com 
```

据我所知，如果我启动 rails 实例，每个实例都将从单独的端口号开始

```
client1 with start at port 3001
client2 with start at port 3002
client3 with start at port 3003 
```

**我的问题是如何在 Debian 6 下使用 Phusion Passenger + Nginx 将所有实例与端口 80 映射到适当的相同子域**

如果我访问

`www.client4.product.com` ，我需要让应用程序在端口 3004 中运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-15T17:00:25.287

我希望您现在已经找到了解决方案，但是为了 stackoverflow 存档，我将提供一个答案。

一般来说，您应该在 nginx 中使用反向代理 ( [http://wiki.nginx.org/RubyonRailsMongrel](http://wiki.nginx.org/RubyonRailsMongrel) )，而您的上游将是运行您的专用 Rails 应用程序 (我将使用重复的代码来隔离您的客户端运行环境。）您将能够使用此方法提供负载平衡。

现在，你规定了乘客的使用，如果你编译带有乘客扩展的 nginx，你可以使用一个非常简单的设置。（请访问[http://www.modrails.com/documentation/Users%20guide%20Nginx.html](http://www.modrails.com/documentation/Users%20guide%20Nginx.html)以获得更好的解释）

```
server {
  listen 80;
  listen [::]:80 default_server ipv6only=on; # please for a better world be IPv6 compliant !
      server_name www.client1.product.com;
  root /my/rails/app1;
      passenger_enabled on;
}
server {
  listen 80;
  listen [::]:80 default_server ipv6only=on;
      server_name www.client2.product.com;
  root /my/rails/app2;
      passenger_enabled on;
} 
```

…………

# objective-c - 如何从 Objective-C 类型编码中获取字节大小

> ID：12210497
> 
> 赞同：4
> 
> 时间：2012-08-31T07:10:45.727
> 
> 标签：objective-c, reflection

使用 NSMethodSignature 我可以通过 getArgumentTypeAtIndex: 获取方法参数类型。[它根据本文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html#//apple_ref/doc/uid/TP40008048-CH100-SW1)返回一个 c 字符串。所以就像“i”代表int，“I”代表无符号。

是否有一个函数可以接受这种编码并以字节为单位返回类型大小？

像这样的东西：

```
int paramSize = typeEncodingSize("i");
NSLog(@"%s is %d bytes", "i", paramSize);
//this would be the encoding for a struct that has three fields. An id, a pointer and an int.
paramSize = typeEncodingSize("{example=@*i}"); //two 8 byte pointers & one 4 byte int
NSLog(@"%s is %d bytes", "{example=@*i}", paramSize); 

which would output: 
i is 4 bytes
{example=@*i} is 20 bytes 
```

我认为在某个地方必须有一个 api 函数，因为[[NSInvocation setArgument:atIndex:]](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSInvocation_Class/Reference/Reference.html)的文档说

> 复制的字节数由参数大小决定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-15T20:51:00.930

我知道这很旧，但我遇到了同样的问题。

解决方案似乎是 method `NSGetSizeAndAlignment`。

[https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Functions/#//apple_ref/c/func/NSGetSizeAndAlignment](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Functions/#//apple_ref/c/func/NSGetSizeAndAlignment)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:19:27.867

你试过`sizeof()`吗？这是确定结构或其他类型大小的常用方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T10:39:15.857

Caleb`sizeof()`是正确的，因为基本上你可以将任何东西传递给`@encode`只有当它也被 . 接受时`sizeof()`。没有什么像`@decode`. 您可以下载[类转储](http://www.codethecode.com/projects/class-dump/)源代码并查看`CDTypeParser.m`文件，例如如何解析它。

# regex - 将“/A/B”的规则重写为“/B?id=A”

> ID：12210503
> 
> 赞同：0
> 
> 时间：2012-08-31T07:11:20.140
> 
> 标签：regex, nginx, rewrite, query-string

我正在尝试重写以下 URL：

```
example.com/[name1]/[name2] 
```

至：

```
example.com/[name2].htm?id=[name1] 
```

我正在尝试这个重写规则：

```
rewrite ^/(\d+)/(.+)/ /$2?id=$1 last; 
```

但它似乎确实有效。有人可以帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:12:38.617

您在重写中忘记了 .htm

正如您正则表达式所假设的那样，name1 总是由所有数字组成是否正确？

更新：

```
location ~ ^/([A-Za-z0-9]+)/(.+)/$ {
  rewrite ^/([A-Za-z0-9]+)/(.+)/ /$2.htm?id=$1 last; 
} 
```

基本上我们在这里做的是：

*   我们与位置上的正则表达式匹配，这将选择我们要重写的 url
*   在 location 块中，我们然后进行重写

（注意：我们需要重复正则表达式，因为 rewrite 指令会重置 $1 和 $2 反向引用的内容，如果我们在哪里做其他事情，我们可以直接在 location 块中使用它们）

# dojo - 数据网格中按钮的 ID

> ID：12210505
> 
> 赞同：0
> 
> 时间：2012-08-31T07:11:25.837
> 
> 标签：dojo, dojox.grid.datagrid

我有以下代码用于在 DataGrid 的每一行中添加按钮：

```
structure: [
    {field: 'msConstId', width: '0%', name: 'Milestone',hidden: true},
    {field: 'edit', width: '8%', name: 'Edit',formatter: function(data, rowIndex) { 
         return new dijit.form.Button({style: "width: 80px;",label:"Edit", iconClass:"dijitIconEditTask",showLabel:true, onClick:function(){    updateMilestone.show(); populateUpdateControls(); }});
    }},
    {field: 'delete', width: '10%', name: 'Delete',formatter: function(data, rowIndex) {
         return new dijit.form.Button({style: "width: 80px;",label:"Delete", iconClass:"dijitIconDelete",showLabel:true, onClick:function(){    deleteMilestoneDialog(); }});
    }}
] 
```

问题是我想为每个按钮分配一个 id 作为“editBtnRowIndex”和“deleteBtnRowIndex”。我想使用 id 来启用和禁用特定网格行中的按钮。

那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T01:32:07.720

我不得不通过查看其他字段中的数据并使用以下内容禁用该行的按钮来解决此问题：

```
var rowdata = grid.getItem(rowIndex); 
```

rowIndex 作为参数传递给格式化程序函数。

```
var val = rowdata.myRowID;
if(val=='specific value') {
   //return disabled button
} else {
   //return enabled button
} 
```

# iphone - 如何使用核心蓝牙框架将 macmini 与带有 iOS6 beta 的 iphone 4s 连接？

> ID：12210528
> 
> 赞同：0
> 
> 时间：2012-08-31T07:12:52.753
> 
> 标签：iphone, ios6, core-bluetooth

如何使用核心 CBPeripheralManager 为 ios6 广播和接收广告..

# php - 格式化 foreach 的结果

> ID：12210530
> 
> 赞同：-4
> 
> 时间：2012-08-31T07:12:56.543
> 
> 标签：php, jquery

字段信息：logi_jo[varchar]、logi_cntrlnum[int]、logi_remark[varchar]、logi_poin[varchar]

```
var val = document.getElementById("logi_jo").value;
var val2 = document.getElementById("logi_cntrlnum").value;
var val3 = document.getElementById("logi_remark").value;
var val4 = document.getElementById("logi_poperson").value;
document.location.href = "ppc_logistic-mngt_home2.php?logi_jo=" + val + "&logi_cntrlnum=" + val2 + "&logi_remark=" + val3 + "&logi_poperson=" + val4; 
```

**点击提交后的网址：**

sample_link.php?logi_jo=123a&logi_cntrlnum=000002&logi_remark=deliver&logi_poperson=chunkchunks

```
$logi_jo = $_REQUEST['logi_jo'];
$logi_cntrlnum = $_REQUEST[logi_cntrlnum];
$logi_remark = $_REQUEST['logi_remark'];
$logi_poin = $_REQUEST['logi_poperson'];

if(isset ($_GET)) {
  foreach ($_GET as $key => $value)

  if($key != '') {
    $sql .= "$key = '$value' && "; 
  }
}

$sql= substr_replace ($sql , '', strlen($sql) -3 , 2);
echo $sql; 
```

输出：logi_jo = '1' && logi_cntrlnum = '2' && logi_remark = '3' && logi_poperson = '4'

问题：我如何修改输出.. 例如**logi_remark 没有答案**.. 其中准备**输出变为：** logi_jo = '123a' && logi_cntrlnum = '000002' && logi_remark = ''&& logi_poperson='chunkchunks'**我该如何修改它像这样：** logi_jo = '123a' && logi_cntrlnum = '000002' && logi_poperson='chunkchunks'（解释：如果变量等于零（0）或''（没有答案）它不会出现..）

最后，如果可能，如果字段是 [int] 它没有 '' 像这样 logi_cntrlnum = '000002' 它应该像这样 logi_cntrlnum = 000002 谢谢你 xD

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:36:10.790

您可以简单地使用 if else 语句

```
foreach ($_GET as $key => $value)
    if($key != '') {
        if($key=='logi_remark' && ($value=='' || $value==0))
            $value='chunkchunks';
        $sql .= "$key = '$value' && ";
    } 
```

除了你的“000002”不是int，但你可以把它变成2

```
if(is_numeric($value))
    $value=(int)$value; 
```

# php - 我想修复php数组

> ID：12210538
> 
> 赞同：-4
> 
> 时间：2012-08-31T07:13:27.923
> 
> 标签：php

我想修复php数组。

亲爱的我的数组如下：

```
$stmyarr=Array ( [0] => [0]=>aaa,[1]=>ddd,[2]=>bbb,[3]=>ccc) 
```

我想删除 [0] =>

所以显示时的结果

```
Array ([0]=>aaa,[1]=>ddd,[2]=>bbb,[3]=>ccc) 
```

怎么做 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T07:14:25.483

简单，只需将数组名称重新分配给`[0]`

```
// after your original $stmyarr
$stmyarr = array(0 => array( 0 => 'aaa', 1 => 'ddd', 2 => 'bbb', 3 => 'ccc'));
$stmyarr = $stmyarr[0];
print_r($stmyarr); 
```

结果是：

```
Array
(
    [0] => aaa
    [1] => ddd
    [2] => bbb
    [3] => ccc
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:22:13.753

```
$stmyarr=array ( '0' => array('0'=>'aaa','1'=>'ddd','2'=>'bbb','3'=>'ccc'));
$stmyarr=current(array_values($stmyarr)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T07:16:53.593

```
$stmyarr=array ('0' => array('0'=>'a','1'=>'b','2'=>'c'));
$array = array_values($stmyarr[0]);
print_r($stmyarr); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T07:18:18.317

只是

```
$stmyarr = $stmyarr[0]; 
```

将来阅读阵列[手册](http://php.net/manual/en/language.types.array.php)肯定会有所帮助。

# php - 如何编辑 Magento 的 API 函数“items()”以获取产品的 ImageUrl

> ID：12210540
> 
> 赞同：2
> 
> 时间：2012-08-31T07:13:34.960
> 
> 标签：php, android, magento

我正在尝试通过编辑**Magento 的 API来获取产品的****图像 URL**。我曾经获取过**URL**，但我得到了错误的**URL**。 **`items() function``$product-> getImageUrl()`**

 ******我得到的**URL**是我们为没有图像 的**产品**放置的**默认图像（图像即将推出，如图像的 url）。**

 **我正在使用**XML-RPC从****Android 客户端**调用该函数。 我得到的产品的其他详细信息是正确的，但是我得到的产品**URL**是错误的。而且，我得到的不同产品的 所有**URL都是相同的。**

 ******仅供参考，我在响应中得到的 URL 如下：

^(http://192.168.1.237/machinetest/media/catalog/product/cache/0/image/265x/9df78eab33525d08d6e5fb8d27136e95/images/catalog/product/placeholder/image.jpg)

我正在编辑的功能如下：

```
public function items($filters = null, $store = null)
{
    $collection = Mage::getModel('catalog/product')->getCollection()
        ->addStoreFilter($this->_getStoreId($store))
        ->addAttributeToSelect('name');

    if (is_array($filters)) {
        try {
            foreach ($filters as $field => $value) {
                if (isset($this->_filtersMap[$field])) {
                    $field = $this->_filtersMap[$field];
                }
                $collection->addFieldToFilter($field, $value);
            }
        } catch (Mage_Core_Exception $e) {
            $this->_fault('filters_invalid', $e->getMessage());
        }
    }
    $result = array();

    foreach ($collection as $product) {
         //$result[] = $product->getData();
           $result[] = array( // Basic product data
            'product_id' => $product->getId(),
            'sku'        => $product->getSku(),
            'name'       => $product->getName(),
            'set'        => $product->getAttributeSetId(),
            'type'       => $product->getTypeId(),
           'category_ids'=> $product->getCategoryIds(),
             'url_path'  =>  $product-> getImageUrl() // Added the Method here 
        );
    }
    return $result;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T16:48:43.030

我最近在处理图像，我相信我对它有很好的理解。

我不认为约书亚所说的是“真正的”正确答案。很高兴他的回答可以解决您的问题，但我无法忍受看到误导性信息。

至于他的第一个选项，是“正确的”。

让我分解代码：

`Mage_Catalog_Model_Product_Media_Config`

```
public function getMediaUrl($file)
{
    $file = $this->_prepareFileForUrl($file);

    if(substr($file, 0, 1) == '/') {
        return $this->getBaseMediaUrl() . $file;
    }

    return $this->getBaseMediaUrl() . '/' . $file;
}

public function getBaseMediaUrl()
{
    return Mage::getBaseUrl('media') . 'catalog/product';
}

protected function _prepareFileForUrl($file)
{
    return str_replace(DS, '/', $file);
} 
```

如您所见，它只是简单地添加`media/ + catalog/product + $file`.

$file 取自数据库，值将类似于`/e/x/example.jpeg`

您上传的产品图片存储在这些文件夹中。

现在，对于为什么`$product-> getImageUrl()`给你错误的 URL 的问题仍然未知。

Josua 建议的第二个选项的代码：

```
$this->helper('catalog/image')
    ->init($product, $type)
    ->resize(163, 100); 
```

与 几乎“几乎”相同`$product->getImageUrl()`，只是有所不同`resize`

`Mage_Catalog_Model_Product`

```
public function getImageUrl()
{
    return (string)$this->_getImageHelper()->init($this, 'image')->resize(265);
} 
```

因此，对于他的第二个选项，它将与您的旧代码给出相同的结果。我不知道他为什么建议第二个选项，我认为他从不检查这些功能背后的内容（这不是一个好主意，因为它可能导致错误信息）

当您调用时`$product->getImageUrl()`，它会尝试从缓存中加载您的图像（如果存在），如果不存在，它将从数据库中加载图像（获取路径，然后从媒体文件夹中查找正确的图像）并创建缓存。如果找不到图像或发生错误，它将获取占位符图像。

我的建议是检查是否抛出异常。您需要使用旧代码`$product->getImageUrl()`。打开你的`app/code/core/Mage/Catalog/Helper/Image.php`

然后转到：

`Mage_Catalog_Helper_Image`

```
public function __toString()
{
    try {
        if( $this->getImageFile() ) {
            $this->_getModel()->setBaseFile( $this->getImageFile() );
        } else {
            $this->_getModel()->setBaseFile( $this->getProduct()->getData($this->_getModel()->getDestinationSubdir()) );
        }

        if( $this->_getModel()->isCached() ) {
            return $this->_getModel()->getUrl();
        } else {
            if( $this->_scheduleRotate ) {
                $this->_getModel()->rotate( $this->getAngle() );
            }

            if ($this->_scheduleResize) {
                $this->_getModel()->resize();
            }

            if( $this->getWatermark() ) {
                $this->_getModel()->setWatermark($this->getWatermark());
            }

            $url = $this->_getModel()->saveFile()->getUrl();
        }
    } catch( Exception $e ) {
        //put log to show error message
        Mage::log($e->getMessage());
        $url = Mage::getDesign()->getSkinUrl($this->getPlaceholder());
    }
    return $url;
} 
```

如果抛出`Mage::log($e->getMessage());`异常，则记录在日志中。很可能会调用您的占位符图像，因为引发了异常。

这只是我的一个建议，以确保您的图像/其他事情没有问题，因为实际上您已经通过直接从`media/catalog/product/...`

Josua 代码的另一个更正：

注意 $full_product = Mage::getModel('catalog/product')->load($product_id);

这是绝对没有必要的，因为在 foreach($collection as $product) 内部，将加载产品对象，因此不需要再次加载产品（$product_id 也未定义）

更新，只是修复你的代码：

```
public function items($filters = null, $store = null)
{
    $collection = Mage::getModel('catalog/product')->getCollection()
        ->addStoreFilter($this->_getStoreId($store))
        ->addAttributeToSelect(array('name','image'));
        //->addAttributeToSelect('name'); add another select, either image / small_image / thumbnail, modify it as you need

    if (is_array($filters)) {
        try {
            foreach ($filters as $field => $value) {
                if (isset($this->_filtersMap[$field])) {
                    $field = $this->_filtersMap[$field];
                }
                $collection->addFieldToFilter($field, $value);
            }
        } catch (Mage_Core_Exception $e) {
            $this->_fault('filters_invalid', $e->getMessage());
        }
    }
    $result = array();

    foreach ($collection as $product) {
         //$result[] = $product->getData();
           $result[] = array( // Basic product data
            'product_id' => $product->getId(),
            'sku'        => $product->getSku(),
            'name'       => $product->getName(),
            'set'        => $product->getAttributeSetId(),
            'type'       => $product->getTypeId(),
           'category_ids'=> $product->getCategoryIds(),
             'url_path'  =>  $product-> getImageUrl() // Added the Method here 
        );
    }
    return $result;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-03T05:15:24.480

只需写下请尝试这种方式..您将在顶部获得解决方案

您可以使用此代码获取图像，只需通过它，您将获得图像

```
public function items($filters = null, $store = null)
{
    $collection = Mage::getModel('catalog/product')->getCollection()
        ->addStoreFilter($this->_getStoreId($store))
        ->addAttributeToSelect('name');

    if (is_array($filters)) {
        try {
            foreach ($filters as $field => $value) {
                if (isset($this->_filtersMap[$field])) {
                    $field = $this->_filtersMap[$field];
                }

                $collection->addFieldToFilter($field, $value);
            }
        } catch (Mage_Core_Exception $e) {
            $this->_fault('filters_invalid', $e->getMessage());
        }
    }

    $result = array();

    foreach ($collection as $product) {
//            $result[] = $product->getData();

        $_product = Mage::getModel('catalog/product')->load($product->getId());
        $_image=$_product->getImageUrl();

        $result[] = array( // Basic product data
            'product_id' => $product->getId(),
            'sku'        => $product->getSku(),

            'name'       => $product->getName(),
            'set'        => $product->getAttributeSetId(),
            'type'       => $product->getTypeId(),
           'category_ids'=> $product->getCategoryIds(),
            'image_url_path' =>  $_image
        );
    }

    return $result;
} 
```

希望它的工作，如果你有任何疑问告诉我，我会帮助你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T12:45:48.813

你的代码太棒了！

是的，您可以通过以下方式获取图片网址：

```
'url_path'  =>  Mage::getModel('catalog/product_media_config')
                ->getMediaUrl($product->getImage());//getSmallImage(), getThumbnail() 
```

* * *

或通过调用另一个选项：

```
$type = 'small_image';
'url_path'  => $this->helper('catalog/image')
                   ->init($product, $type)
                   ->resize(163, 100); 
```

可以通过 'image' small_image' 或 'thumbnail' 改变

**默认：**

*   基本图像：265x265 像素

*   小图像：135x135 像素

*   缩略图图像：75x75 像素

* * *

**更简单的选择（详细）：**

```
public function items($filters = null, $store = null)
{
    $collection = Mage::getModel('catalog/product')->getCollection()
        ->addStoreFilter($this->_getStoreId($store))
        ->addAttributeToSelect('name');

    if (is_array($filters)) {
        try {
            foreach ($filters as $field => $value) {
                if (isset($this->_filtersMap[$field])) {
                    $field = $this->_filtersMap[$field];
                }
                $collection->addFieldToFilter($field, $value);
            }
        } catch (Mage_Core_Exception $e) {
            $this->_fault('filters_invalid', $e->getMessage());
        }
    }
    $result = array();

    foreach ($collection as $product) {
         //$result[] = $product->getData();
           $full_product = Mage::getModel('catalog/product')->load($product_id);

           $result[] = array( // Basic product data
            'product_id' => $product->getId(),
            'sku'        => $product->getSku(),
            'name'       => $product->getName(),
            'set'        => $product->getAttributeSetId(),
            'type'       => $product->getTypeId(),
            'category_ids'=> $product->getCategoryIds(),
            'url_path'  =>  $full_product->getImageUrl(),
            // 'product_path' => $full_product->getProductUrl() 
            // you can call $full_product->getData();
        );
    }
    return $result;
} 
```**************

# javascript - 更新谷歌地图标记而不重建地图

> ID：12210548
> 
> 赞同：0
> 
> 时间：2012-08-31T07:14:26.373
> 
> 标签：javascript, jquery, google-maps-api-3

我正在使用这样的谷歌地图api：

```
this.init_map = function(lat, lng){
var mapOptions = {
  center: new google.maps.LatLng(lat, lng),
  zoom: 17,
  mapTypeId: google.maps.MapTypeId.ROADMAP
};
var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

var marker = new google.maps.Marker({
  position: new google.maps.LatLng(lat, lng),
  map: map,
  title:"I'm Here!"
});
} 
```

这需要 lat 和 lng，并且可以很好地绘制地图，但是当新的 lat & lng 变量通过 websocket 被推入这个函数时，页面不会重新加载，但是地图会用新的 lat & lng 中的标记重新绘制位置。

我想在不重绘地图的情况下更新地图上的标记。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T07:43:23.883

```
var map = null;
var markers = [];

this.init_map = function(){
var mapOptions = {
  center: new google.maps.LatLng(lat, lng),
 zoom: 17,
  mapTypeId: google.maps.MapTypeId.ROADMAP
};
map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
}

this.addMarker = function(lat, lng, id){
  var marker = new google.maps.Marker({
    position: new google.maps.LatLng(lat, lng),
    map: map,
    title:"I'm Here!"
  });
  markers.push({ id: id, markerObject: marker});
}

this.updateMarkerCoordinates(lat, lng, id){
  //I let you loop the markers array, compare ids and retrieve the marker
    marker.setPosition(new google.maps.LatLng(lat, lng));
} 
```

# javascript - 连接以访问对象属性

> ID：12210552
> 
> 赞同：1
> 
> 时间：2012-08-31T07:14:33.050
> 
> 标签：javascript

> **可能重复：**
> [动态对象属性名称](https://stackoverflow.com/questions/4244896/dynamic-object-property-name)

我想动态生成对对象属性的访问。

如果我尝试访问`mydata[i].val.name`，我会得到`somename`.

如果我尝试`mydata[i] + bar[j]`（其中 bar[j] === '.val.name'），它会失败。

我如何动态地创建这样的东西？这样我就可以使用用户生成的值访问对象的任何属性？

* * *

一些代码：

如果我有一个对象，我希望能够遍历它的属性，收集我感兴趣的属性。理想情况下，我想要以下内容：

```
var processData = function (data, keys, values) {
  var returnData = [], i, j, k;
  var parsedData = JSON.parse(data);
  var keys = keys || null;
  var values = values || null;
  var datalen = parsedData.length;

  for (i = 0; i < datalen; i++) {
      returnData[i] = {};
      for(j = 0; j< keys.length; j++){
          for(k = 0; k < values.length; k++){
              returnData[i][keys[j]] = parsedData[i] + values;
          }
      }
  }

  return returnData;
}; 
```

然后像这样使用它：

```
var keys = ["foo","bar"];
var values = [".val.name", ".val.date"];
processData(data, keys, values); 
```

但这不起作用，在控制台中我看到`foo="[object Object].val.name"`而不是预期的`foo="ACME Industries"`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:30:09.723

如果你试试：

```
new Object() + '.john.doe' 
```

它将连接为一个字符串，所以你会得到`"[object Object].john.doe"`.

您应该创建一个可以处理动态属性名称的函数（并且有很多这样的名称）。您可能还希望将`".foo.bar"`语法松散为字符串（除非您打算使用`eval()`），而只使用数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T07:30:28.617

如果您想坚持将下标构造为带有点的字符串的模式，则必须滚动自己的查找函数，如下所示：

```
function descend(object, sub) {
    var handle = object,
        stack = sub.split('.'),
        history = [],
        peek;

    while (handle[stack[0]]) {
        if (peek) {
            history.push(peek);
        }
        peek = stack.shift();
        handle = handle[peek];
    }

    if (stack.length > 0) {
        history.push(peek);
        throw "Traversal error, could not descend to '" + stack.join('.') + "' from '" + history.join('.') + "'.";
    }

    return handle;
}

var x = {
    a: {
        b: {
            c: 15
        },
        d: 4
    }
};

console.log(descend(x, "a"));
console.log(descend(x, "a.b"));
console.log(descend(x, "a.b.c"));
console.log(descend(x, "a.d"));

function processData(data, keys, values) {
    if (keys.length !== values.length) {
        throw "Mismatched keys and value lookups";
    }

    var i,
        len = keys.length,
        gathered = {},
        k,
        scratch,
        v;

    for (i = 0; i < len; i += 1) {
        k = descend(data, keys[i]);
        scratch = values[i].split('.');
        scratch.shift();
        v = descend(k, scratch.join('.'));
        gathered[keys[i]] = v;
    }

    return gathered;
}

var data = {
    foo: {
        val: {
            name: "ACME Industries"
        }
    },
    bar: {
        val: {
            date: (new Date())
        }
    }
};
var keys = ["foo","bar"];
var values = [".val.name", ".val.date"];
processData(data, keys, values); 
```

请注意：如果没有这种查找方式，这将不会像编码一样高效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T07:33:49.473

如果我理解正确，您需要使用

```
mydata[i]["val"]["name"] 
```

所以，我会使用这样的东西：

```
var result =getItemByValuesPath(myData[i],values);
alert(result);

function getItemByValuesPath(item, values)
{
    var result = item;

    var vals = values.split(".");
    for(var j=0; j<values.length; j++)
    {
        if(result==undefined)
            {
                    return null;
            }
    result = result[values[j]];
    }
} 
```

# blackberry - BlackBerry TripleDESEncryption 输出转换为字符串

> ID：12210554
> 
> 赞同：1
> 
> 时间：2012-08-31T07:14:52.300
> 
> 标签：blackberry, encryption

我正在尝试使用 TripleDESEncryption 加密字符串并遵循我在互联网上找到的这个示例（链接： http: [//www.blackberry.com/developers/docs/3.6api/net/rim/device/api/crypto/doc -files/CryptoTest.html#sampleMD5Digest](http://www.blackberry.com/developers/docs/3.6api/net/rim/device/api/crypto/doc-files/CryptoTest.html#sampleMD5Digest)）：

```
// sampleTripleDESEncryption
private static int sampleTripleDESEncryption( byte[] secretKey, byte[] plainText, byte[] cipherText ) throws CryptoTokenException, CryptoUnsupportedOperationException
{
    // Create a new Triple-DES key based on the 24 bytes in the secretKey array
    TripleDESKey key = new TripleDESKey( secretKey );

    // Create a new instance of the Triple-DES encryptor engine, passing in the newly 
    // created key
    TripleDESEncryptorEngine engine = new TripleDESEncryptorEngine( key );

    // Encrypt one block (8 bytes) of plainText into cipherText
    engine.encrypt( plainText, 0, cipherText, 0 );

    // Return the block size of the engine
    return engine.getBlockLength();
} 
```

但是，我想将加密数据转换为字符串。我不确定 cipherText 变量是否是要转换的变量。有什么帮助吗？我将如何转换它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T09:41:04.117

你只是不希望结果会通过参数返回。

所以首先在`chiperText`. 调用该方法，您将得到`chiperText`具有返回长度（返回值）的缓冲区。

# html - 通过 html 链接将参数传递给程序

> ID：12210557
> 
> 赞同：3
> 
> 时间：2012-08-31T07:15:04.850
> 
> 标签：html, windows, parameters

我需要通过单击 html 链接从本地用户的文件系统运行程序。

当我使用这个

```
<a href="C:\Windows\System32\NETSTAT.EXE">CLICK</a> 
```

它工作正常。但是当我尝试将参数传递给 exe 文件时，它失败了。

```
<a href="C:\Windows\System32\NETSTAT.EXE -a">CLICK</a> 
```

任何人都知道如何传递参数？

谢谢

**更新**

其用途如下：如果系统中有新记录可用，则在线系统会向用户发送电子邮件。因此，用户将单击其电子邮件客户端中的**链接**，该链接将使用所需参数打开其本地 exe 程序，以显示新记录。

我不想发送带有 bat 文件的电子邮件，因为我的网络管理员不允许这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T07:40:56.810

我只看到一个解决方案，使用 .BAT 文件，其中将是“netstat.exe -a”，例如命名为 netstat-a.bat。

```
<a href="C:\Windows\System32\NETSTAT-A.BAT">CLICK</a> 
```

这是非常不完美的解决方案，但可以工作:)

您也可以尝试此代码，但这取决于浏览器和用户权限：

```
<html>
 <head>
     <script language="JavaScript" type="text/javascript"> 
         MyObject = new ActiveXObject( "WScript.Shell" ) 
         function RunNotePad()  
         { 
            MyObject.Run("netstat.exe -a") ; 
        } 

    </script>
 </head>
 <body>
    <h1>Run a Program</h1>
    This script launch the file >> c:\windows\notepad.exe<p>
    <button onclick="RunNotePad()">Run Windows NotePad</button>
 </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:48:43.527

从我的角度来看， `<A>`它区分大小写，它将被`C:\Windows\System32\NETSTAT.EXE -a`视为整个路径而不是`-a`参数。上面的链接正在工作，因为它也作为一个参数，它在 system32 内部，它为什么执行

同样，它被 `<a href="C:\Windows\System32\NETSTAT.EXE -a">CLICK</a>`视为一个不存在的整个文件，因此只有一种方法可以解决问题，将其作为 .bat 整个路径并保存并提供路径并保存 netstat-a.bat 或任何你想要的`<a>`并给出整条路径`<a>C:\Windows\System32\NETSTAT.EXE-a.bat</a>`

# vb.net - 未检测到已声明的变量

> ID：12210558
> 
> 赞同：1
> 
> 时间：2012-08-31T07:15:06.137
> 
> 标签：vb.net, variable-declaration

好吧，我正在玩visual basic，似乎有一段很长的时间开始使用它xD。无论如何不知道为什么我会收到以下错误：

> `UACLevel_Level`未声明。由于其保护级别，它可能无法访问。

我尝试单击小帮助图标，但它什么也没给我。

```
Dim ConsentPromptBehaviorAdmin = My.Computer.Registry.GetValue("HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System", "ConsentPromptBehaviorAdmin", Nothing)
Dim EnableLUA = My.Computer.Registry.GetValue("HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System", "EnableLUA", Nothing)
Dim PromptOnSecureDesktop = My.Computer.Registry.GetValue("HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System", "PromptOnSecureDesktop", Nothing)
Dim UACLevel_Value = ConsentPromptBehaviorAdmin + EnableLUA + PromptOnSecureDesktop
If UACLevel_Value = 0 Then
    Dim UACLevel_Level = "Never notify me."
ElseIf UACLevel_Value = 6 Then
    Dim UACLevel_Level = "Notify me only when programs try to make changes to my computer(do not dim desktop)."
ElseIf UACLevel_Value = 7 Then
    Dim UACLevel_Level = "Default - Notify me only when programs try to make changes to my computer."
ElseIf UACLevel_Value = 4 Then
    Dim UACLevel_Level = "Always Notify Me"
Else
    Dim UACLevel_Level = "Customized UAC Level"
End If
MsgBox("UACLevel is " & UACLevel_Value & ": " & UACLevel_Level) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T07:22:35.540

`UACLevel_Level``If`在块内声明。在代码块内声明的变量仅在该代码块中可见。

这与 VB6/VBA 不同，它在块外是可见的（此时您会收到多重声明错误，因为您声明了五次）。

`UACLevel_Level`在块外声明`If`，只在块内给它赋值`If`。

请参阅[Visual Basic 中的范围以](http://msdn.microsoft.com/en-us/library/1t0wsc67.aspx)供将来参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:21:13.900

对于任何感兴趣的人，最终结果如下。

```
Module Module1

    Sub Main()
        Dim ConsentPromptBehaviorAdmin = My.Computer.Registry.GetValue("HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System", "ConsentPromptBehaviorAdmin", Nothing)
        Dim EnableLUA = My.Computer.Registry.GetValue("HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System", "EnableLUA", Nothing)
        Dim PromptOnSecureDesktop = My.Computer.Registry.GetValue("HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System", "PromptOnSecureDesktop", Nothing)
        Dim UACLevel_Value = ConsentPromptBehaviorAdmin + EnableLUA + PromptOnSecureDesktop
        Dim UACLevel_level As String
        If UACLevel_Value = 0 Then
            UACLevel_level = "Never notify me."
        ElseIf UACLevel_Value = 6 Then
            UACLevel_level = "Notify me only when programs try to make changes to my computer(do not dim desktop)."
        ElseIf UACLevel_Value = 7 Then
            UACLevel_level = "Default - Notify me only when programs try to make changes to my computer."
        ElseIf UACLevel_Value = 4 Then
            UACLevel_level = "Always Notify Me"
        Else
            UACLevel_level = "Customized UAC Level"
        End If
        MsgBox("UACLevel is " & UACLevel_Value & ": " & UACLevel_Level)

    End Sub

End Module 
```

# php - php和codeigniter中switch和case的使用

> ID：12210560
> 
> 赞同：2
> 
> 时间：2012-08-31T07:15:16.090
> 
> 标签：php, codeigniter, switch-statement, case

我想在 php 和 codeigniter 库中使用`switch`和`case`，我尝试如下代码，但我没有收到输出。我该怎么办？

**演示：** [http ://codepad.viper-7.com/Wq0Noj](http://codepad.viper-7.com/Wq0Noj)

```
function indicators() {
    $CI = &get_instance();
    $Year = '1355';
    $Month = '03';

    switch ($Year) {
        case 1354:
            $key=array('0.6','0.6','0.6','0.6','0.6','0.6','0.6','0.6','0.6','0.6','0.6','0.6','0.6');
            $output = $key[$Month-1];
            break;
        case 1355:
            $key=array('0.6','0.7','0.2','0.4','0.7','0.1','0.7','0.2','0.5','0.9','0.4','0.8');
            $output = $key[$Month-1];
            break;
        echo $output; // The output should be: 0.7
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T07:18:29.283

我认为您的`echo`需求也超出了`switch`...检查以验证。

是的，回声需要在外面。比较时实际上应该强制类型。

```
<?php

$s = '5';

switch ($s) {
    case 5:
        echo "Foo\n";
        break;
    default:
        echo "Bar\n";
        break;
}

echo $s; 
```

**输出**

```
Foo
5 
```

对于您的示例：

```
<?php

function indicators() {
    $Year = '1355';
    $Month = '03';

    switch ($Year) {
        case 1354:
            $key=array('0.6','0.6','0.6','0.6','0.6','0.6','0.6','0.6','0.6','0.6','0.6','0.6','0.6');
            $output = $key[$Month-1];
            break;
        case 1355:
            $key=array('0.6','0.7','0.2','0.4','0.7','0.1','0.7','0.2','0.5','0.9','0.4','0.8');
            $output = $key[$Month-1];
            break;
    }
    echo $output; // The output should be: 0.7
}

indicators(); 
```

**输出**

```
0.2 
```

根据代码，这是正确的。 `'03' - 1 == 2`. `$key[2] == '0.2'`

正如@vstm 在下面的评论中指出的那样，[文档](http://php.net/manual/en/control-structures.switch.php)指出“开关/案例确实比较松散”。

# android - 在android上使用帧缓冲区时，场景不渲染

> ID：12210564
> 
> 赞同：1
> 
> 时间：2012-08-31T07:16:00.437
> 
> 标签：android, opengl-es, opengl-es-2.0

我正在尝试将我的应用程序切换为使用帧缓冲区/渲染缓冲区对象（希望稍后渲染到纹理），但是每当我使用帧缓冲区/渲染缓冲区时，什么都不会渲染。当默认帧缓冲区保持打开状态时，默认情况下，它渲染得很好；所有颜色、深度和模板相关的功能都完全按照预期工作。

初始化代码：

```
if(frameBuffer == 0 || !GLES20.glIsFramebuffer(frameBuffer)){
    int[] retVal = new int[1];
    GLES20.glGenFramebuffers(1, retVal, 0);
    frameBuffer = retVal[0];
    retVal[0] = 0;

    if(renderBufferColour != 0 || !GLES20.glIsRenderbuffer(renderBufferColour)){
        GLES20.glGenRenderbuffers(1, retVal, 0);
        renderBufferColour = retVal[0];
    }

    if(renderBufferDepth != 0 || !GLES20.glIsRenderbuffer(renderBufferDepth)){
        GLES20.glGenRenderbuffers(1, retVal, 0);
        renderBufferDepth = retVal[0];
    }

    if(renderBufferStencil != 0 || !GLES20.glIsRenderbuffer(renderBufferStencil)){
        GLES20.glGenRenderbuffers(1, retVal, 0);
        renderBufferStencil = retVal[0];
    }
} 
```

帧缓冲启用代码（注释掉这个允许使用默认缓冲区进行渲染）：

```
GLES20.glBindFramebuffer(GLES20.GL_FRAMEBUFFER, frameBuffer);

GLES20.glBindRenderbuffer(GLES20.GL_RENDERBUFFER, renderBufferColour);
GLES20.glRenderbufferStorage(GLES20.GL_RENDERBUFFER, GLES20.GL_RGBA4, width, height);
GLES20.glFramebufferRenderbuffer(
        GLES20.GL_FRAMEBUFFER,
        GLES20.GL_COLOR_ATTACHMENT0,
        GLES20.GL_RENDERBUFFER,
        renderBufferColour);

GLES20.glBindRenderbuffer(GLES20.GL_RENDERBUFFER, renderBufferDepth);
GLES20.glRenderbufferStorage(GLES20.GL_RENDERBUFFER, GLES20.GL_DEPTH_COMPONENT16, width, height);
GLES20.glFramebufferRenderbuffer(
        GLES20.GL_FRAMEBUFFER,
        GLES20.GL_DEPTH_ATTACHMENT,
        GLES20.GL_RENDERBUFFER,
        renderBufferDepth);

GLES20.glBindRenderbuffer(GLES20.GL_RENDERBUFFER, renderBufferStencil);
GLES20.glRenderbufferStorage(GLES20.GL_RENDERBUFFER, GLES20.GL_STENCIL_INDEX8, width, height);
GLES20.glFramebufferRenderbuffer(
        GLES20.GL_FRAMEBUFFER,
        GLES20.GL_STENCIL_ATTACHMENT,
        GLES20.GL_RENDERBUFFER,
        renderBufferStencil);

if (GLES20.glCheckFramebufferStatus(GLES20.GL_FRAMEBUFFER) != GLES20.GL_FRAMEBUFFER_COMPLETE)
    throw new RuntimeException(String.format("Failed to make complete framebuffer object %x", GLES20.glCheckFramebufferStatus(GLES20.GL_FRAMEBUFFER))); 
```

最后的异常不会被抛出，并且`glGetError()`在每一步之后检查时，不会返回任何错误。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T02:55:11.990

好的，在阅读了OpenGLES 2.0手册之后，我遇到了这一段：

```
By allowing the images of a renderbuffer to be attached to a framebuffer,
OpenGL ES provides a mechanism to support off-screen rendering. Further, by
allowing the images of a texture to be attached to a framebuffer, OpenGL ES provides
a mechanism to support render to texture. 
```

在我看来，应用程序渲染缓冲区总是**在屏幕外**而不是**在屏幕上**，正如我所期望的那样。如果我没看错的话，这就是屏幕上没有图像的原因。

# internet-explorer - 在vs2008中创建新mfc项目时“导航到网页被取消”

> ID：12210566
> 
> 赞同：0
> 
> 时间：2012-08-31T07:16:01.417
> 
> 标签：internet-explorer, visual-studio-2008, mfc, internet-explorer-8, project

我在 vs2008 中遇到了一个奇怪的问题。当我创建新的 MFC 项目时，此弹出窗口打开时显示**“导航到网页已取消”。**

![](../Images/a39290ca46173f6ec33645769ebeb1de.png) 我一直在修理我的视觉工作室，但问题仍然存在。

从 Windows 功能中关闭 Internet Explorer 后。

![在此处输入图像描述](../Images/2f74a5505a7bfffc67ed3a4f817ea9d2.png)

# android - Android：使用 Google Map 的新 API 进行路由

> ID：12210567
> 
> 赞同：1
> 
> 时间：2012-08-31T07:16:05.607
> 
> 标签：android, google-maps, routes

我是一名新的 Android 开发人员，在求助于 SO 提出这个问题之前，我一直在研究这个主题超过 2 周。我发现的很多路由代码都在不再支持的 KML 中。

如果有人可以为我提供示例或工作代码来执行此操作，我将不胜感激，请注意我是一名初学者 android 开发人员。

太感谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T14:37:25.100

[您可以在此处](https://stackoverflow.com/a/11745316/1230123)查看我的帖子，它向您展示了如何从 JSON 而不是 KML 获取路线，因为它不再受支持。

# unix - Shell脚本中的字符小写到大写

> ID：12210568
> 
> 赞同：1
> 
> 时间：2012-08-31T07:16:33.593
> 
> 标签：unix

我的价值为： **james,adam,john** 我正在努力使它成为**James,Adam,John**（每个名字的第一个字符应该是大写）

根据kev（下），

$ echo '詹姆斯，亚当，约翰' | sed 's/\<./\u&/g' James,Adam,John（并非在所有系统中都有效）

我无法在不同的系统中做同样的事情。我正在使用 .ksh，但我不知道是因为 ksh 还是不同的系统。任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T07:21:06.397

您可以使用`sed`：

```
$ echo 'james,adam,john' | sed 's/\<./\u&/g'
James,Adam,John 
```

*   模式`\<.`将匹配每个单词的第一个字符
*   用于`\u&`使其大写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T07:21:41.203

使用 bash：

```
A="james adam john"
B=( $A )
echo "${B[@]^}" 
```

输出是：

```
James Adam John 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T07:18:43.123

有无限的可能性，但查找`tr`和 shell 字符串替换（如果你的 shell 支持它）。然后是 GNU `sed`、awk、perl 和许多其他语言......

# ios - 如何使用 MFMailComposeViewController 在电子邮件正文中添加图像

> ID：12210571
> 
> 赞同：25
> 
> 时间：2012-08-31T07:16:43.163
> 
> 标签：ios, ios5, mfmailcomposeviewcontroller

我正在尝试找出在电子邮件正文中添加图像而不是在 ios 中作为附件添加图像的最佳方法。

1）Apple提供了一个功能“ **addAttachment** ”，文档说，要在内容中添加任何图像，我们应该使用这个功能，但我尝试了这个功能，并发送了一封邮件，我在浏览器上查看，收到的是一个附件。

2）其次，许多博客说要使用**base64 编码，**但这也行不通，图像被作为损坏的图像发送。

所以朋友们，请帮助我找到最好的解决方案来做到这一点。

问候兰吉特

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-08-31T07:24:17.767

将电子邮件格式设置为 HTML。这段代码在我的应用程序中运行良好。

```
MFMailComposeViewController *emailDialog = [[MFMailComposeViewController alloc] init];

NSString *htmlMsg = @"<html><body><p>This is your message</p></body></html>";

NSData *jpegData = UIImageJPEGRepresentation(emailImage, 1.0);

NSString *fileName = @"test";
fileName = [fileName stringByAppendingPathExtension:@"jpeg"];
[emailDialog addAttachmentData:jpegData mimeType:@"image/jpeg" fileName:fileName];

emailDialog setSubject:@"email subject"];
[emailDialog setMessageBody:htmlMsg isHTML:YES];

[self presentModalViewController:emailDialog animated:YES];
[emailDialog release]; 
```

**斯威夫特 5**

```
import MessageUI

    func composeMail() {

        let mailComposeVC = MFMailComposeViewController()

        mailComposeVC.addAttachmentData(UIImage(named: "emailImage")!.jpegData(compressionQuality: CGFloat(1.0))!, mimeType: "image/jpeg", fileName:  "test.jpeg")

        mailComposeVC.setSubject("Email Subject")

        mailComposeVC.setMessageBody("<html><body><p>This is your message</p></body></html>", isHTML: true)

        self.present(mailComposeVC, animated: true, completion: nil)
    } 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-11-20T19:24:04.157

我最近刚刚为 Swift 经历了这个。

在 Swift 中添加照片到电子邮件的功能：

```
func postEmail() {
    var mail:MFMailComposeViewController = MFMailComposeViewController()
    mail.mailComposeDelegate = self
    mail.setSubject("your subject here")

    var image = // your image here
    var imageString = returnEmailStringBase64EncodedImage(image)
    var emailBody = "<img src='data:image/png;base64,\(imageString)' width='\(image.size.width)' height='\(image.size.height)'>"

    mail.setMessageBody(emailBody, isHTML:true)

    self.presentViewController(mail, animated: true, completion:nil)
} 
```

返回格式化图像的函数：

```
func returnEmailStringBase64EncodedImage(image:UIImage) -> String {
    let imgData:NSData = UIImagePNGRepresentation(image)!;
    let dataString = imgData.base64EncodedStringWithOptions(NSDataBase64EncodingOptions(rawValue: 0))
    return dataString
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-02T10:08:34.060

我发现（至少在我的情况下）PNG 将在消息编辑器中工作，但在用户打开/接收消息时不起作用。

作曲家[Dandily 展示徽标 PNG 图像！](http://i.stack.imgur.com/oKm60.png)

查看器[这里没有太多的标志图像。](http://i.stack.imgur.com/zuPOO.png)

（偶尔会在图像应该出现的位置出现浅蓝色轮廓。）

使用下面的 HTML 正文字符串和下面的转换似乎可以解决问题。

* * *

使用 JPEG 的消息正文 HTML 字符串

```
NSString *body = [NSString stringWithFormat:
                  @"\
                  <html>\
                    <body>\
                        Check out the App!\
                        <br>\
                        Isn't this a terriffic logo?!.\
                        <br>\
                        <img src = \"data:image/jpeg;base64,%@\" width = 100 height= 100>\
                        <br>\
                        <a href = \"%@\" > CLICK ITTTTTTT! </a>\
                    </body>\
                  </html>",
                  imageString, @"http://www.LOLamazingappLOL.com"]; 
```

* * *

使用 JPEG 数据将图像转换为字符串

```
+ (NSString *)dataStringFromImage:(UIImage *)image
{
    NSData *imgData = UIImageJPEGRepresentation(image, 1);
    return [imgData base64EncodedStringWithOptions:kNilOptions];
} 
```

附加信息：

*   iOS 目标 = 8.0
*   iOS 设备 = 9.1
*   我对 HTML 感到很糟糕！

感谢@Richard 对这个问题的正确答案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-03T06:18:01.727

需要注意的几件事： - 使用 addAttachmentData - 使用 setMessageBody 并设置 isHTML:true

您不必在电子邮件正文中手动添加。api会处理这个问题。

```
func postEmail() {
var mail:MFMailComposeViewController = MFMailComposeViewController()
mail.mailComposeDelegate = self
mail.setSubject("your subject here")
var image = // your image here
var imageData = UIImageJPEGRepresentation(image, 1)
mail.addAttachmentData(imageData, mimeType:"image/jpeg", fileName:"Your Filename"
var emailBody = "<html><body><p>This is your message</p></body></html>"
mail.setMessageBody(emailBody, isHTML:true)

self.presentViewController(mail, animated: true, completion:nil)} 
```

# jquery - 动画后如何设置焦点

> ID：12210572
> 
> 赞同：2
> 
> 时间：2012-08-31T07:16:43.633
> 
> 标签：jquery, jquery-ui

我想在使用 div.focus 和 animate() 滚动到页面顶部后将焦点设置在 id 的文本框上，比如说 txtName。

是否有一个功能可以指定在像 document.ready 一样的动画之后在 document.ready 之后执行？

我用来滚动的代码如下所示。

```
$(".gototop").click(function(){ 
    var focusElement = $("#contents"); 
    $(focusElement).focus(); 
    ScrollToTop(focusElement); 
}); 

function ScrollToTop(el) { 
    $('html, body').animate({ scrollTop: $(el).offset().top - 50 }, 'slow');           
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T07:18:50.877

您可以在动画的回调中将焦点设置为元素，这样动画完成时它将获得焦点：

```
function ScrollToTop(el) { 
    $('html, body').animate({ 
        scrollTop: $(el).offset().top - 50 }, 
    'slow', function() {
        $("#txtName").focus();
    });           
} 
```

如果`el`是您希望关注的元素，您可以使用传递的变量而不是`#txtName`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T07:21:50.393

该`animate`函数接受一个回调，该回调将在动画完成后执行。你可以这样做：

```
$(".gototop").click(function(){ 
    var focusElement = $("#contents");
    ScrollToTop(focusElement, function() { focusElement.focus(); }); 
}); 

function ScrollToTop(el, callback) { 
    $('html, body').animate({ scrollTop: $(el).offset().top - 50 }, 'slow', callback);
} 
```

# knockout.js - 禁用计算的 observable

> ID：12210573
> 
> 赞同：3
> 
> 时间：2012-08-31T07:16:45.930
> 
> 标签：knockout.js

我有一个问题是计算出的 observable 正在从地狱（Ordo n^2）创建通知链。

我需要做的是这个

```
Disable computed observable
Do stuff
Enable observable and notify subscribers (View) 
```

发现了这个，但它已经超过一年了，

[http://www.knockmeout.net/2011/04/pausing-notifications-in-knockoutjs.html](http://www.knockmeout.net/2011/04/pausing-notifications-in-knockoutjs.html)

我希望现在有一些内置的解决方案？

编辑：显示问题的小提琴。[http://jsfiddle.net/8mxBA/](http://jsfiddle.net/8mxBA/)

它非常接近真实站点代码尝试使用顶部复选框选择所有项目它只会对计算的canSave进行两次调用，尝试取消选中它，它将对计算的canSave进行n次调用，并且由于canSave方法迭代整个集合可能会变慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T11:43:46.330

尝试油门选项（'不是扩展器'）。

```
comp = ko.computed(function () {
    return stuff;
}, this, {throttle: 1}); 
```

我相信油门扩展器将计算包装在一个额外的计算中，因此效率较低。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-20T16:44:26.657

检查一下，这是对`throttle`扩展器的更新：http: [//knockoutjs.com/documentation/rateLimit-observable.html](http://knockoutjs.com/documentation/rateLimit-observable.html)

# c++ - 如何将 stl 对象存储在共享内存（C++）中？

> ID：12210581
> 
> 赞同：14
> 
> 时间：2012-08-31T07:17:06.610
> 
> 标签：c++, stl, shared-memory

我有以下代码模式：

```
class A {
    double a, b, c;
    ...
};

class B {
    map<int, A> table; // Can have maximum of MAX_ROWS elements.
    ...
};

class C {
    B entries;
    queue<int> d;
    queue<int> e;
    ...
}; 
```

现在我想将一个 C 类型的对象存储在共享内存中，以便不同的进程可以追加、更新和读取它。我怎样才能做到这一点？（注意：我知道如何在共享内存中存储一​​个具有固定大小的简单 C 数组。另外，请记住 B.table 可能有任意条目。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-31T07:22:06.753

使用[boost::interprocess](http://www.boost.org/doc/libs/1_51_0/doc/html/interprocess.html)，这个库公开了这个功能。

编辑：这里有一些你需要做的改变：

该示例已经定义了一个从共享内存块分配的分配器，您需要将其传递给`map`和`queue`。这意味着您必须更改定义：

```
class B
{
  map<int, A, less<int>, MapShmemAllocator> table;

  // Constructor of the map needs the instance of the allocator
  B(MapShmemAllocator& alloc) : table(less<int>(), alloc)
  { }
} 
```

对于`queue`，这个稍微复杂一点，因为它实际上只是一个适配器，所以需要将真正的实现类作为模板参数传入：

```
typedef queue<int, deque<int, QueueShmemAllocator> > QueueType; 
```

现在您的班级`C`略有变化：

```
class C
{
  B entries;
  QueueType d, e;

  C(MapShmemAllocator& allocM, QueueShmemAllocator& allocQ) : entries(allocM), d(allocQ), e(allocQ)
  { }
} 
```

现在从段管理器中，`C`使用分配器构造一个实例。

```
C *pC = segment.construct<C>("CInst")(allocM_inst, allocQ_inst); 
```

我认为这应该可以解决问题。注意：您将需要提供两个分配器（一个 for`queue`和一个 for `map`），不确定是否可以从同一个段管理器构造两个分配器，但我不明白为什么不能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T08:32:04.247

这可能很棘手。对于初学者，您需要一个自定义分配器：Boost Interprocess 有一个，我将从它开始。在您的确切示例中，这可能就足够了，但更一般地说，您需要确保所有子类型也使用共享内存。因此，如果您想从一个字符串映射，该字符串还需要一个自定义分配器，这意味着它具有与 不同的类型`std::string`，并且您不能从一个`std::string`（但您可以使用两个迭代器构造函数，例如：

```
typedef std::basic_string<char, std::char_traits<char>, ShmemAllocator> ShmemString;
std::map<ShmemString, X, std::less<ShmemString>, ShmemAllocator> shmemMap; 
```

访问如下：

```
shmemMap[ShmemString(key.begin(), key.end())] ... 
```

当然，您定义的进入映射的任何类型也必须使用共享内存进行任何分配：Boost Interprocess 有一个 `offset_ptr`这可能会有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-01T23:57:48.583

在共享内存中构建和使用 STL 对象并不棘手（尤其是使用 boost::interprocess 包装器）。当然，您还应该使用同步机制（对于 boost 的 named_mutex 也不是问题）。

真正的挑战是在共享内存中保持 STL 对象的一致性。基本上，如果其中一个进程在错误的时间点崩溃，它会给其他进程留下两个大问题：

*   锁定的互斥锁（可以使用棘手的 PID 到互斥锁映射、强大的互斥锁（只要可用）、定时互斥锁等来解决。

*   处于不一致状态的 STL 对象（例如，erase() 过程中的半更新映射结构）。通常，这还无法恢复，您需要从头开始销毁并重新构建共享内存区域中的对象（可能还会杀死所有其他进程）。您可能会尝试在您的应用程序中拦截所有可能的外部信号并交叉手指希望一切顺利并且处理永远不会在糟糕的时刻失败。

在决定在系统中使用共享内存时请记住这一点。

# matlab - 是否有将经过的秒数转换为 HH:MM:SS 格式的 Matlab 函数？

> ID：12210583
> 
> 赞同：14
> 
> 时间：2012-08-31T07:17:12.273
> 
> 标签：matlab

我想将经过的秒数转换为 HH:MM:SS 格式。是否有内置函数，或者我必须自己编写？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-31T07:43:36.847

`datestr`可能是您正在寻找的功能。将您的时间间隔表示为一天的小数部分，例如：

```
>> datestr(0.25, 'HH:MM:SS.FFF')

ans =

06:00:00.000 
```

也就是说，一天的四分之一是 6 小时。如果您想以这种方式转换超过一天的时间间隔，则必须调整第二个参数，该参数会格式化函数的输出，例如：

```
>> datestr(2.256789741, 'DD:HH:MM:SS.FFF')

ans =

02:06:09:46.634 
```

的第一个参数`datestr`也可以是*日期向量*或*日期字符串*，而不是日期序列号。这应该让您开始，如果您有问题，请提出另一个问题或编辑这个问题。

--
要使用 datestr 以秒为单位转换时间，请将值除以 24*60*60。

样本：

```
t1 = toc;
timeString = datestr(t1/(24*60*60), 'DD:HH:MM:SS.FFF'); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-31T07:49:07.367

我不知道内置函数。但是，在 Matlab 的文件交换中有一个[SEC2HMS 。](http://www.mathworks.com/matlabcentral/fileexchange/22817-seconds-to-hours-minutes-seconds)基本上，它归结为类似

```
function [hours, mins, secs] = sec2hms(t)
    hours = floor(t / 3600);
    t = t - hours * 3600;
    mins = floor(t / 60);
    secs = t - mins * 60;
end 
```

如果您还想对其进行格式化，请使用`printf`：

```
function hms = sec2hms(t)
    hours = floor(t / 3600);
    t = t - hours * 3600;
    mins = floor(t / 60);
    secs = t - mins * 60;
    hms = sprintf('%02d:%02d:%05.2f\n', hours, mins, secs);
end

sec2hms(69.9904)
ans =
    00:01:09.99 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-20T11:55:51.730

如果您想将小时、分钟和秒作为双精度数，请考虑以下代码行：

```
seconds = 5000;
hms = fix(mod(seconds, [0, 3600, 60]) ./ [3600, 60, 1])

hms =

 1    23    20 
```

这行代码比使用内置的 datestr 函数快 100 多倍。

```
nIterations = 10000;

tic
for i = 1:nIterations
    hms = fix(mod(seconds, [0, 3600, 60])./[3600, 60, 1]);
end
sprintf('%f ms\r', toc / nIterations * 1000) 
```

给出 0.001934 毫秒。

```
tic
for i = 1:nIterations
    datestr(seconds/24/3600, 'HH:MM:SS');
end
sprintf('%f ms\r', toc / nIterations * 1000) 
```

给出 0.209402 毫秒。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-22T17:42:12.200

如果您想要原始的第二个输入，只需将其转换为一天的一小部分：

> > datestr(25/24/3600, 'DD-HH:MM:SS')
> > 
> > 答案=
> > 
> > 00-00:00:25

只给它 25 秒（从 tic/toc 开始）

# knockout.js - KnockoutJS 区分可观察和计算

> ID：12210588
> 
> 赞同：1
> 
> 时间：2012-08-31T07:17:31.260
> 
> 标签：knockout.js

我有一个包含三个变量的 KnockoutJS 穆德尔：A 和 B 都是可观察的，C 是这样计算的：返回 A*B。

如您所见，C 是 A * B 的结果。但我也希望能够从输入中更改 C（这使其成为可观察的，并且 A 是 C 除以 B 的结果。

为了更有意义。A = 我们的货币金额，B 是汇率。然后 C 将是计算的目标金额。但有时用户不知道我们货币的金额，但知道目的地金额。我们货币的金额需要计算，而不是可观察的。我希望用户能够灵活地计算其中一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:27:50.893

您可以使用读/写计算来实现这一点。这是示例：

查看型号：

```
function ViewModel() {
    var self = this;
    self.amount = ko.observable();
    self.rate = ko.observable();
    self.result = ko.computed({
        read: function() {
            if (self.amount() && self.rate())
                return self.amount() * self.rate();
        },
        write: function(value) {
            if (self.rate()) {
                self.amount(value / self.rate());
            }
        }
    });
}

var viewModel = new ViewModel();
ko.applyBindings(viewModel); 
```

看法：

```
<input data-bind="value: amount" />
<input data-bind="value: rate" />
<input data-bind="value: result" /> 
```

[小提琴](http://jsfiddle.net/UXGfX/5/)

# iphone - 设置没有委托的表格视图

> ID：12210589
> 
> 赞同：1
> 
> 时间：2012-08-31T07:17:42.583
> 
> 标签：iphone, objective-c, ios, uitableview

我在视图控制器中有一个**UITableView 。**我想在不设置**UITableViewDelegate 或 UITableViewDataSource 委托**的情况下为表视图设置视图、属性等。

是否可以通过编程方式进行？（类似`[tableView setNumberOfSections:2]`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:21:16.387

不，这是不可能的。但也许您可以选择使用静态表格视图？在那里您不需要委托，但您的行数/节数是固定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:21:48.190

不，但你可以设置

```
myTableView.delegate = self;
myTableView.dataSource = self; 
```

然后为同一类中的方法添加代码（因此您不需要创建新的自定义类）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T07:24:56.567

你不能，你为什么要这样做？使用委托的系统可以为您提供最灵活的解决方案，您不必使用所有委托和数据源方法。如果您选择，它只是可以完全自定义您的表的工作方式，但基本实现几乎没有工作。

只需采用 UITableViewDelegate 和 UITableViewDataSource 协议，您就可以使用任何类作为委托，因此您不需要创建任何专门的类。例如，只需使用您的 viewController。

# java - 需要服务器端图表 api 的 kickstart，数据表示为 pojos

> ID：12210592
> 
> 赞同：1
> 
> 时间：2012-08-31T07:17:55.767
> 
> 标签：java, charts, birt, business-intelligence

我正在寻找服务器端 java 图表 api。我已经玩过 jfreechart 但它会产生丑陋的图表并且微调外观似乎很复杂。

现在我在看免费的双向工具。所有这些（birt，jasper，pentaho，？）的问题是文档专注于所见即所得报告。我的观点不同。我有 webapp(gwt) 和数据（pojo，表示以 html 和 pdf 形式发布的数据透视表），并希望输出漂亮的图表（svg、png、svg 和 js？）。如果以后可以通过所见即所得工具调整图表布局/外观，那就太好了——但这不是必须的。

那么什么工具可以开箱即用地创建漂亮的图表呢？并且有一个很好的文档化 api 可以集成到服务器端（入门教程会很好）？

我必须解决的第一个问题是从我的 pojos（“表”）中制作“报告”。

**澄清：**正如主题所暗示的，我需要在**服务器端使用****基于 java 的**解决方案（图表也以 pdf/png 格式发布在要导出的文档中）。目前唯一的建议仍然是 jfreechart？

 **birt/jasper/pentaho 等 bi 解决方案中包含的图表 api 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:28:54.900

JFreeChart 是 Java 应用程序中最流行的图表引擎之一。如果您不喜欢它的输出，我不确定您是否会喜欢任何输出。

需要注意的另一件事是 JasperReports 使用相同的 JFreeChart 来呈现其图表。我不确定这一点，但我认为 Pentaho 也是如此。

如果您只需要图表而不需要完整报告，我建议您使用 JFreeChart。如果你学得好，你肯定会得到好看的结果。JFreeChart FAQ 页面中的最后一个问题提供了其他基于 Java 的图表库的完整列表。你可能想看看那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:31:12.827

I think it is possible yet very hard to make JFreeCharts look good. I guess it is the most advanced PNG-outputing chart lib for Java. Most of charting libraries are now JavaScript based either non-free [amCharts](http://www.amcharts.com) or free [jqPlot](http://www.jqplot.com/). I'd recommend using jqplot if you can show charts in browser only and don't need to generate PDG server-side (I'm not sure if it is possible with jqplot).

You may want to try some new libs. These look promising:

*   [charts4j](https://code.google.com/p/charts4j/)
*   [easycharts](http://www.objectplanet.com/easycharts/) - see licensing for this one

As for reporting platforms I was evaluating BIRT, Jasper and Pentaho and I found BIRT the easiest and most promissing. You can implement your own datasource for BIRT (it doesn't need to be SQL) and build reports from POJOS.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T09:54:06.597

好的，我开始感谢我在[这里](http://www.eclipse.org/forums/index.php/mv/msg/371375/906199/#msg_906199)的链接：

*   [http://www.birt-exchange.org/org/devshare/designing-birt-reports/463-birt-chart-engine-api-webinar-examples/](http://www.birt-exchange.org/org/devshare/designing-birt-reports/463-birt-chart-engine-api-webinar-examples/) - 包含一个 ppt 演示文稿和许多简单的示例
*   [http://wiki.eclipse.org/BIRT/FAQ/Charts2.2](http://wiki.eclipse.org/BIRT/FAQ/Charts2.2) - 很好的概述

乍一看，我的希望已经实现：

*   开箱即用的图表看起来更好
*   api/架构似乎更灵活/组织得更好（例如图表布局/颜色可以指定为xml）
*   使用开源 eclipse 东西的总体感觉更好（不要问为什么）
*   更好的 svg 渲染 - 与 javascript 交互！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T07:43:48.520

我建议使用[jqPlot](http://www.jqplot.com/)。我有非常好看且功能强大的 api，可以使用 svg 在浏览器中呈现图表，也可以为您提供 jpg 输出。

Primefaces 还封装了 jqPlot 和 jFreeChart，因此您可以使用它轻松渲染图表，但不会像使用纯 jqPlot 那样具有灵活性。使用 Primefaces 可以完全满足您从 POJO 呈现图表的要求。

有关详细信息，请参阅[Primefaces 演示](http://www.primefaces.org/showcase-labs/ui/home.jsf)。**

# c# - Visual Studio 2012 和智能感知

> ID：12210593
> 
> 赞同：3
> 
> 时间：2012-08-31T07:17:56.507
> 
> 标签：c#, asp.net-mvc-3, visual-studio-2012

我认为这只是发生在我身上，但是每次我在 VS 中启动我的项目时，我都必须执行 devenv.exe/resettsettings 否则智能感知不起作用。有谁知道为什么有任何特殊原因？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T07:22:03.017

应启用这些选项：

```
Tools->Options->Text Editor->C#->General->Auto list members
Tools->Options->Text Editor->C#->General->Parameter information
Tools->Options->Text Editor->C#->Intellisense->Show completion list after a character is typed 
```

如果它不起作用试试这个： `Tools->Import and export settings->Reset all settings`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T14:07:41.460

经过很多帖子，我可以很好地解决这个问题：

执行 Visual Studio 2012 的开发人员提示命令 -->`gacutil /u Microsoft.VisualStudio.CSharp.Services.Language.Interop`

为我解决了这个问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-11T14:48:22.247

关闭当前选项卡（其中 Intellisense 不起作用）并重新打开它。很多时候这对我来说已经足够了，无聊，但也足够了。

# php - PHP - 发布结果集

> ID：12210597
> 
> 赞同：0
> 
> 时间：2012-08-31T07:18:15.590
> 
> 标签：php, resultset

我一直在网上寻找，我遇到的每篇文章似乎都在说一些稍微不同的东西。如果我正在使用结果集并且程序在发布结果之前退出，究竟会发生什么？

有没有更好的方法来确保它总是发生？数据库连接也是如此。

```
 if($statement->fetch()) {
        exit("Result!");
    }

    $statement->free_result(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:24:19.933

`free_result`告诉数据库引擎它可以释放结果集。

仅当您担心返回大型结果集的查询使用了多少内存时才需要调用它。所有相关的结果内存都会在脚本执行结束时自动释放。

您可以使用`register_shutdown_function`它来确保您的结果从内存中释放出来

```
function shutdown(){
    global $statement;
    if($statement){
        $statement->free_result();
    }
}

register_shutdown_function('shutdown'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:22:29.227

您可以[`register_shutdown_function`](http://php.net/manual/en/function.register-shutdown-function.php)在 PHP 中使用以确保一个函数/许多函数在退出时触发。在您的示例中，您还可以将 if 语句更改为以下内容：

```
$exitResult = null;
if($statement->fetch()) {
    $exitResult = "Result!";
}

$statement->free_result();
if ($exitResult !== null) exit($exitResult); 
```

不过应该注意的是，大多数插件/扩展（连接到数据库等）在 PHP 进程关闭后（在脚本结束时）会自行清理。

如果你在一个类中使用这个，你可以保存引用`$statement`然后[`__destruct`](http://php.net/manual/en/language.oop5.decon.php#language.oop5.decon.destructor)在类中使用一个函数。

# c# - 在 Revit API 中表示墙的外部核心面或内部核心面的几何线

> ID：12210601
> 
> 赞同：0
> 
> 时间：2012-08-31T07:18:22.373
> 
> 标签：c#, revit, revit-api

我想为墙的各个层提取表示平面视图中墙的线段。

Revit API 中有什么机制允许我这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T04:13:03.273

我不确定你是否能得到你想要的东西 - 但这是我的想法......你需要使用 Parts 功能（查看具有许多静态方法的 PartUtils 类来完成工作）将你的墙分成基于其层的部分。拥有图层后，您将能够从图层中提取面部几何图形，并从那里决定如何将面部点投影/提取到您感兴趣的平面上。

Jeremy Tammik 有几篇相关的博客文章：

*   [http://thebuildingcoder.typepad.com/blog/2011/10/retrieving-detailed-wall-layer-geometry.html](http://thebuildingcoder.typepad.com/blog/2011/10/retrieving-detailed-wall-layer-geometry.html)
    *   [http://thebuildingcoder.typepad.com/blog/2012/01/identifying-wall-compound-layers-and-parts.html](http://thebuildingcoder.typepad.com/blog/2012/01/identifying-wall-compound-layers-and-parts.html)

祝你好运，马特

# c - 如何使 Tru64 Unix 中的 C 代码在 Linux 64 位中工作？

> ID：12210606
> 
> 赞同：1
> 
> 时间：2012-08-31T07:18:48.677
> 
> 标签：c, linux, unix, migration

我想知道在移动 C 程序时可能遇到的问题，例如。服务器进程从 Tru64 Unix 到 Linux 64 位，为什么？由于两者都是 64 位平台，程序需要进行哪些可能的修改，或者只在新环境中重新编译源代码？我有点困惑，在我开始工作之前我必须知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T07:52:27.373

我在 90 年代初花了很多时间（*天哪，我觉得自己老了……*）将 32 位代码移植**到**Alpha 架构。当它被称为 OSF/1 时，它又回来了。

从 Alpha 到 x86_64 时，您不太可能遇到与位宽相关的任何困难。

例如，开发人员更清楚假设 导致的问题`sizeof(int) == sizeof(void *)`。这是我在将代码移植到 Alpha 时遇到的最常见的问题。

您确实发现差异的地方在于两个系统在符合各种 API 规范（例如 POSIX、XOpen 等）方面的差异。也就是说，这些差异通常很容易解决。

如果 Alpha 代码使用了 SVR4 风格的 API（例如流），那么与使用更多类似 BSD 的 API 相比，您可能会遇到更多困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T07:48:01.657

64 位架构只是架构分类的近似值。

理想情况下，您的代码将只对变量的所有描述使用“语义”类型，特别是对于大小`size_t`和`ptrdiff_t`指针算术以及`[u]intXX_t`假定特定宽度的类型。

如果不是这种情况，重点是比较所有标准算术类型（所有整数类型、浮点类型和指针），如果它们在两个平台上映射到相同的概念。如果您发现差异，您就会知道潜在的问题点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T07:59:51.307

检查两个平台使用的[64 位数据模型](http://en.wikipedia.org/wiki/64-bit_computing#64-bit_data_models)，大多数 64 位类 Unix 操作系统使用 LP64，因此您的目标平台很可能使用相同的数据模型。在这种情况下，鉴于代码本身可以编译和链接，您应该不会有什么问题。

如果您在两个平台上使用相同的编译器（例如 GCC），您也不必担心不兼容的编译器扩展或未定义或实现定义行为的差异。在任何情况下都应该避免这种行为——即使编译器是相同的，因为它可能在目标架构之间有所不同。如果您没有使用相同的编译器，那么您需要谨慎使用扩展。#pragma 指令是一个特殊的问题，因为允许编译器悄悄地忽略它无法识别的#pragma。

最后，为了编译和链接，C 标准库之外的任何库依赖项都需要在两个平台上都可用。大多数操作系统调用都将可用，因为 Unix 和 Linux 共享相同的 POSIX API。

# php - 使用 Ajax 或 JavaScript 选择下拉列表选项后在同一页面上执行 PHP 脚本

> ID：12210608
> 
> 赞同：1
> 
> 时间：2012-08-31T07:18:51.347
> 
> 标签：php, javascript, mysql, html, ajax

我正在创建一个 MySQL 查询，当用户从更多下拉列表中选择选项时将执行该查询。

我想要的是，在选择下拉列表选项时，应在同一页面上使用 ajax/javascript 自动执行与该选项相关的查询。因为我在同一页面上有 html 和 php 代码。

早些时候我使用下拉列表的表单提交选项，但由于下拉选项的数量超过五个来过滤结果，因此查询变得难以实现。这就是为什么我想单独细化每个下拉列表的结果。

任何帮助表示赞赏。提前致谢！

我的下拉列表 HTML 代码是：

```
<p>
<label for="experience">Experience :</label>
<select id="experience" name="experience">
    <option value="" selected="selected">All</option>
    <option value="Fresher">Fresher</option>
    <option value="Experienced">Experienced</option>
</select>
</p> 
```

用于执行相关查询的 PHP 代码是：

```
<?php
if (isset($_GET['exp'])) {

    switch ($_GET['exp']) {

        case 'Experienced':
        $query = "SELECT job_seekers.ID, job_seekers.Name, job_seekers.Skills, job_seekers.Experience FROM job_seekers where job_seekers.Experience!='Fresher'";
        break;

    case 'Fresher':
        $query = "SELECT job_seekers.ID, job_seekers.Name, job_seekers.Skills, job_seekers.Experience FROM job_seekers where job_seekers.Experience='Fresher'";
        break;

    default:
        $query = "SELECT job_seekers.ID, job_seekers.Name, job_seekers.Skills, job_seekers.Experience FROM job_seekers";

    }
}
$result = mysql_query($query) or die(mysql_error());

echo "<ul class=\"candidates\">";

while($row = mysql_fetch_row($result))
{
    echo "<li>";
    echo "<p> <b>ID:</b> <u>$row[0]</u> </p>";
    echo "<p> <b>Name :</b> $row[1] </p>";
    echo "<p> <b>Key Skills:</b> $row[2] </p>";
        echo "<p> <b>Experience:</b> $row[3] </p>";
    echo "</li>";
}

    echo "</ul>";               

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T07:29:36.430

当你想通过 AJAX 调用一个 php 脚本时，你应该使用 Jquery 提供的 $.ajax

[http://api.jquery.com](http://api.jquery.com)

所以你可以像这样使用它：

```
$.ajax({
    url: 'ajax.php',
    data: {
        //put parameters here such as which dropdown you are using
    },
    success: function(response) {
        //javascript and jquery code to edit your lists goes in here.
        //use response to refer to what was echoed in your php script
    }
}); 
```

这样，您将拥有动态下拉列表和您想要的精致结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:40:43.667

您不能在同一页面上重新执行 PHP 部分。而是使用 Ajax 请求来执行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T09:17:17.180

```
<?php
if (isset($_GET['experience'])) {

    echo $_GET['experience'];
        /* do mysql operations and echo the result here */
    exit;
}
?>
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script type="text/javascript">
function myFunction(value)
{
    if(value!="All")
    {
        $.ajax(
        {
            type: "GET",
            url: '<?php echo $_SERVER['PHP_SELF']; ?>',
            data: { experience: value},
            success: function(data) {
                $('#resultDiv').html(data);
        }
    });
    }
    else
    {
        $('#resultDiv').html("Please select a value.");
    }
}
</script>
</head>

<body>
<p>
<label for="experience">Experience :</label>
<select id="experience" name="experience" onChange="myFunction(this.value)">
    <option value="All" selected="selected">All</option>
    <option value="Fresher">Fresher</option>
    <option value="Experienced">Experienced</option>
</select>
</p>
<div id="resultDiv">
Please select a value.
</div>
</body>
</html> 
```

# nhibernate - 清除集合时对子项进行 NHibernate Cascade Delete

> ID：12210609
> 
> 赞同：4
> 
> 时间：2012-08-31T07:19:03.293
> 
> 标签：nhibernate, nhibernate-mapping, cascade, nhibernate-cascade

我已经搜索了很多地方，但仍然找不到我正在寻找的答案。

我正在使用 NHibernate 3.2 - 代码映射

我有以下映射文件：

```
public class ParentMapping: EntityMapping<Parent>
{
        public ParentMapping()
        {
            Set(x => x.Children, map =>
                                           {
                                               map.Cascade(Cascade.All);
                                               map.Inverse(true);
                                           }, r => r.OneToMany());
        }
}

public class ChildMapping: JoinedSubclassMapping<Child> // This is a subclass of something else.
{
        public RequiredSkillMapping()
        {
            ManyToOne(x => x.Parent, map => { map.NotNullable(true); });
        }
} 
```

级联保存工作正常。

```
session.Save(parent) will save the children and associate them correctly. 
```

当我尝试打电话时：

```
var parent = session.Get<Parent>(1);
parent.Children.Clear();

session.Save(parent); or session.SaveOrUpdate(parent) or session.Update(parent) 
```

实体与父实体保持关联。

我通过调用它来工作：

```
foreach(var child in parent.Children)
{
session.Delete(child);
}

parent.Children.Clear(); 
```

我希望有一种方法可以拯救父母吗？

干杯，

詹姆士

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-31T07:34:05.277

级联意味着对父级的操作级联到子级。

*   插入父级时，子级也被插入。
*   删除父级时，子级也被删除。
*   Update 在 NH 中是特殊的，但这也意味着当调用父级的 update 时，子级也被“更新”了。
*   等等

集合本身属于父级，因此集合上的更改与父级一起存储。但是当孩子不再在集合中时，没有理由删除它们。NH 不知道您是否需要它们来做其他事情。

有级联删除孤儿。

```
map.Cascade(Cascade.All | Cascade.DeleteOrphans) 
```

这意味着已在集合中并从集合中删除的项目将被删除。它可能对您的情况有用。请注意，从集合中删除后，无法将项目用于任何东西。您甚至不能将它们添加到另一个父级。

要使 NH 在每种情况下都自动正确地删除未使用的项目，需要持久的垃圾收集。这是非常低效的，NH 没有实施。

“foreach child delete”是可以的。当孩子不再使用并需要删除时，您可能需要这样做才能告诉 NH。

# c# - C# 文件算法优化

> ID：12210612
> 
> 赞同：0
> 
> 时间：2012-08-31T07:19:18.660
> 
> 标签：c#, algorithm

只需为我正在运营呼叫中心的朋友编写以下算法，他想格式化他的文件名并根据月份和日期移动目录。但是呼叫中心有超过 350 万个文件，而且该程序似乎工作了 12 个小时，只处理了不到 20gb

那么有没有办法优化下面的算法，

```
class Program
{        
    // How much deep to scan. (of course you can also pass it to the method)
    const int HowDeepToScan = 20;

    static void Main(string[] args)
    {
        ProcessDir(@"E:\Hard Disk 2\", 1);
        Console.WriteLine("Islem Bitmistir");
        Console.ReadLine();
    }

    public static void ProcessDir(string sourceDir, int recursionLvl)
    {
        if (recursionLvl <= HowDeepToScan)
        {
            ChangeDirectories(sourceDir);

            // Recurse into subdirectories of this directory.
            string[] subdirEntries = Directory.GetDirectories(sourceDir);
            foreach (string subdir in subdirEntries)
                // Do not iterate through reparse points
                if ((File.GetAttributes(subdir) &
                     FileAttributes.ReparsePoint) !=
                         FileAttributes.ReparsePoint)
                    ProcessDir(subdir+@"\",recursionLvl + 1);
        }
    }

    public static void ChangeDirectories(string givenPath)
    {
        DataTable resultSet = new DataTable();
        SqlDataAdapter adapter = new SqlDataAdapter();
        SqlCommand cmd = new SqlCommand();
        SqlConnection callCenterConnection = new SqlConnection(@"Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=CallCenter;Data Source=.");
        //Directory of mp3s
        string sourceDir = givenPath;
        //Get the files inside that directory
        string[] fileEntries = Directory.GetFiles(sourceDir);
        callCenterConnection.Open();
        //Iterate through those files
        foreach (string fullFileName in fileEntries)
        {
            //Get the file name without path and extension
            string fileNameWithoutExtension = Path.GetFileNameWithoutExtension(fullFileName);
            adapter = new SqlDataAdapter("SELECT TOP 1 ID,Time,Tel,AgentID FROM ResultTable WHERE ID=" + fileNameWithoutExtension, callCenterConnection);
            adapter.Fill(resultSet);
        }
        adapter.Dispose();
        if (resultSet.Rows.Count != 0)
        {
            foreach (DataRow dr in resultSet.Rows)
            {
                DateTime fileDate = Convert.ToDateTime(dr["Time"]);
                if (!File.Exists(@"E:\Ses Dosyalari" + @"\" + fileDate.Year + @"\" + fileDate.Month + @"\" + Convert.ToString(dr["Time"]).Replace(":", ".") + " - " + Convert.ToString(dr["Tel"]) + " - " + Convert.ToString(dr["AgentID"]) + ".mp3"))
                {
                    File.Move(sourceDir + Convert.ToString(dr["ID"]) + ".mp3", @"E:\Ses Dosyalari" + @"\" + fileDate.Year + @"\" + fileDate.Month + @"\" + Convert.ToString(dr["Time"]).Replace(":", ".") + " - " + Convert.ToString(dr["Tel"]) + " - " + Convert.ToString(dr["AgentID"]) + ".mp3");
                    cmd = new SqlCommand("UPDATE ResultTable SET Used = 1 WHERE ID="+Convert.ToString(dr["ID"]), callCenterConnection);
                    cmd.ExecuteNonQuery();
                }
            }
        }
        cmd.Dispose();
        callCenterConnection.Close();
        resultSet.Clear();
        resultSet.Dispose();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:38:19.477

很有可能瓶颈不是代码的性能特征，而是位置之间的网络。

也就是说，特别是第二种方法有很大的优化空间。

首先，总是批量处理数据库中的数据，一次检查一条记录的存在成本很高，一次读取它们并将它们放入一个列表中。迭代所述列表以执行您的移动/状态更新。

其次，您将字符串与`+`use `String.Format`or连接起来`String.Concat`（或者`StringBuilder`如果这更符合您的喜好）

由于此操作中最繁重的资源是网络，我建议使用压缩库来包装一个目录的所有文件（至少）将其运送到远程站点并有一个进程将其解压缩并发送返回完成通知。少送就是多。

# database-project - Visual Studio 数据库项目：Include If Exists 检查项目中的所有对象

> ID：12210618
> 
> 赞同：1
> 
> 时间：2012-08-31T07:19:40.507
> 
> 标签：database-project

我已经将我的数据库导入到数据库项目中，到目前为止一切看起来都很好。我想知道是否有任何方法可以删除对象的后缀。

例如：每个表文件的名称为“SomeTable.table.sql”，每个过程的名称为“SomeProcedure.proc.sql”。我希望文件名遵循简单的命名约定，如“SomeObject.sql”。

此外，项目中的所有对象都只有 Create 语句。我想将其更新为： IF EXISTS 语句，例如：

```
IF EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[SomeTableName]') AND type in (N'U'))

BEGIN

        DROP TABLE [SomeTableName]
END
GO

CREATE TABLE SomeTabeName....... 
```

我尝试在网上搜索很多此类内容，但找不到任何有用或完美的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:40:26.530

据我所知，无法配置导入目标文件的命名。但是，至少在数据库项目的最新版本中，您应该能够在导入后自己重命名它们，并且您还可以根据需要在文件夹中组织文件。

不可能仅仅因为这不是他们的目的而使用“如果存在”来存储对象定义文件。它们在那里代表对象，允许您在源代码控制系统中查看对象如何随着时间的推移而演变。这些脚本不是为执行而设计的。如果要从数据库项目进行部署，则需要使用发布功能，或使用模式比较。这会生成一个*旨在*运行的脚本。

# java - 使用 javaws 的 UnsatisfiedLinkError

> ID：12210620
> 
> 赞同：0
> 
> 时间：2012-08-31T07:19:48.957
> 
> 标签：java, android, jnlp, unsatisfiedlinkerror, java-web-start

我正在尝试使用 android 屏幕投射。[http://code.google.com/p/androidscreencast/](http://code.google.com/p/androidscreencast/)安装的所有要求都在那里..这是我得到的错误，

```
$ javaws androidscreencast.jnlp

$ java.lang.UnsatisfiedLinkError: /usr/lib/jvm/jdk1.6.0/jre/lib/i386/libdeploy.so: libstdc++.so.5: cannot open shared object file: No such file or directory
    at java.lang.ClassLoader$NativeLibrary.load(Native Method)
    at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1751)
    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1647)
    at java.lang.Runtime.load0(Runtime.java:770)
    at java.lang.System.load(System.java:1005)
    at com.sun.deploy.config.UnixConfig.loadLibDeploy(UnixConfig.java:38)
    at com.sun.deploy.config.UnixConfig.<clinit>(UnixConfig.java:26)
    at com.sun.deploy.config.ConfigFactory.newInstance(ConfigFactory.java:11)
    at com.sun.deploy.config.Config.getInstance(Config.java:662)
    at com.sun.deploy.config.Config.<clinit>(Config.java:678)
    at com.sun.javaws.Main.continueInSecureThread(Main.java:119)
    at com.sun.javaws.Main$1.run(Main.java:106)
    at java.lang.Thread.run(Thread.java:619) 
```

这里缺少什么文件/路径？可以做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:18:26.703

**原因**：服务器未正确关闭。因此出现了这个错误。

**解决方案**：启动任务管理器，查找 PID（进程 ID）值较高的 Javaw.exe 并杀死该进程，然后启动服务器。

**解释**：如果您启动任务管理器并查找 javaw.exe，您会发现 2 个具有此名称的进程。其中一个过程用于 Eclipse，另一个用于未正确关闭的服务器。所以你需要杀死 Servers Javaw.exe 进程。

要识别这杀死具有高 PID 值的进程，因为您只能在启动 eclipse 后启动服务器（除非您使用外部 tomcat）。

希望这可以帮助..

# php - 重定向表单相关 url 以在 html 或 php 文件中的 iframe 中打开

> ID：12210627
> 
> 赞同：1
> 
> 时间：2012-08-31T07:20:43.247
> 
> 标签：php, iframe, url-redirection, url-masking

好的，感谢这个网站上的好人，我能够创建一个指向表单依赖变量 url 的 php 文件。我想尝试设置的是屏蔽定向 url，以便不显示变量 url，或者至少将其打开到 iframe，这样地址栏至少不存在。

我尝试过的一些事情：在创建的表单页面上，该页面具有指向我的 php 文件的操作，我创建了一个 iFrame 并将目标设置为 iFrames 名称------- iFrame 显示在表单上，​​但是在提交整页加载，不在 iFrame 中

创建了一个 iFrame.html 文档，将表单页面操作设置为 html 文档，然后将文档中的 iFrame 源设置为 php 文件，并在同一窗口中加载相同的内容，并且没有 iFrame 显示

试图在 php 文档中插入 iFrame 但出现解析错误

任何帮助都将不胜感激，即使它只是朝着正确方向的一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:06:47.880

如果您想简单地隐藏 URL 中的参数（例如，不允许用户轻松编辑它们），您可以简单地将表单更改为使用 POST 而不是 GET: `<form action="serverside.php" method="post">`。在服务器端，您还必须将 $_GET 更改为 $_POST 或 $_REQUEST（最后一个将 get 和 post 变量与具有更高优先级的 post 结合起来）。

# c# - 确定墙壁交叉点是斜接还是对接

> ID：12210632
> 
> 赞同：0
> 
> 时间：2012-08-31T07:21:06.523
> 
> 标签：c#, revit-api

使用 Revit API 如何确定墙交叉（连接）类型是斜接连接还是对接连接。

在哪里是对接连接，我如何确定哪一面墙是对接的？

我可以以编程方式更改交叉点类型吗？我如何使用 Revit API 来执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T04:05:24.373

在墙壁对象上，有一个 LocationCurve 属性。在 LocationCurve 对象上，您会发现两个相关属性：

*   ElementsAtJoin[ int end ]：确定在给定端加入的元素。
*   JoinType [ int end ]：确定连接类型（即斜接、对接等）

JoinType 是可变的。

# azure - 在 Windows Azure 上从网站、云服务和虚拟机中选择什么

> ID：12210635
> 
> 赞同：3
> 
> 时间：2012-08-31T07:21:21.690
> 
> 标签：azure, azure-web-app-service, azure-virtual-machine

我已经了解 windows azure 并从事云服务、存储和 WASD 方面的工作，仍然有很多方法可以将我们的应用程序放在 Azure 上，包括**网站、云服务、虚拟机**，所以很多开发人员对从上面选择什么有疑问列表？（像我这样的）

我提出这个问题的目的只是 Azure 的专家可以区分这些术语，**在哪种情况下最合适的**术语是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T07:53:44.640

我认为这篇博文很好地总结了这一切：“Windows Azure 网站、Web 角色和 VM：何时使用哪个？”

[http://blogs.msdn.com/b/silverlining/archive/2012/06/27/windows-azure-websites-web-roles-and-vms-when-to-use-which.aspx](http://blogs.msdn.com/b/silverlining/archive/2012/06/27/windows-azure-websites-web-roles-and-vms-when-to-use-which.aspx)

# c# - C# WinForm DataGridView 过滤器暂停

> ID：12210636
> 
> 赞同：0
> 
> 时间：2012-08-31T07:21:23.417
> 
> 标签：c#, datagridview, filter, dataset

我有一个 VisualStudio 生成的数据集。
我将它们连接到 DataGridView（由 VisualStudio 连接的宽度）。
我正在使用过滤器。例如：
`xyBindingSource.Filter = "yx = 'tart'";`

我的问题：
如果我更改 yx 列的任何值（从 tart 更改为其他任何值），更改的行将在 CellEndEdit 事件运行之前删除。
在 CellEndEdit 事件中，DataGridViewCellEventArgs 将包含正确的行号和列号。
但是事件 args 所指向的行并不是被编辑的，因为选择的行被更早地删除了。

我能做些什么？

感谢帮助：
诺比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:23:10.230

您可以使用`DataGridView.CurrentCellDirtyStateChanged`事件来处理这个问题。`DataGridView.CellValueChanged`如果您这样做，这可以引发事件：

```
void dataGridView1_CurrentCellDirtyStateChanged(object sender,
    EventArgs e)
{
    if (dataGridView1.IsCurrentCellDirty)
    {
        dataGridView1.CommitEdit(DataGridViewDataErrorContexts.Commit);
    }
} 
```

`CommitEdit`手动引发`DataGridView.CellValueChanged`事件。您可以`Filter`再次在此事件中重新加载您的方法。试试看。

# java - 使用代理设置打开网站-Java

> ID：12210640
> 
> 赞同：2
> 
> 时间：2012-08-31T07:21:43.480
> 
> 标签：java, selenium

有没有办法用代理设置打开一个网站说 google.com。在其中一个论坛中，我发现了以下代码。但是当浏览器出现时，它需要默认的 Firefox 设置，即没有代理。运行时似乎无法正常工作。

如何使用 set 属性启动网站

在一个论坛中我发现： System.setProperty("proxySet", "true") System.setProperty("http.proxyHost", "myproxy")

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:12:25.270

假设您使用 WebDriver2，您可以使用合适的首选项创建 FirefoxProfile：

```
FirefoxProfile profile = new FirefoxProfile();
profile.SetPreference("network.proxy.type", "1");
profile.SetPreference("network.proxy.http", "<proxy_ip>");
profile.SetPreference("network.proxy.http_port", "<proxy_port>");
FirefoxDriver = new FirefoxDriver(profile); 
```

# facebook - Facebook Flash 游戏高分 API

> ID：12210653
> 
> 赞同：1
> 
> 时间：2012-08-31T07:22:18.697
> 
> 标签：facebook, actionscript-3, flash, open-source

由于我是 Facebook 游戏的新手，是否有任何用于 Flash 游戏的第三方 API。实际上我使用了 mochi highscore API，但我不想通过 mochi 登录。通过facebook id直接提交。让我知道任何第三方 API 或建议任何教程。

问候，钱杜

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T13:34:02.867

在 Facebook 中将分数发布到高分相当容易，请查看以下代码。您所需要的只是一个用户 ID，当您登录用户时从 facebook 获得一个用户 ID，以及您在游戏中使用的值，例如经验、积分或其​​他分数。

```
// post experience as score
$experience = 1000; // get this from your database 
$contents = file_get_contents("https://graph.facebook.com/oauth/access_token?client_id=".FACEBOOK_APP_ID."&client_secret=".FACEBOOK_SECRET_KEY."&grant_type=client_credentials");

$exploded = explode("=",$contents);

$accessToken = $exploded[1];
$score_URL = 'https://graph.facebook.com/' . $userFacebookID . '/scores';
$score_result = https_post($score_URL,
  'score=' . $experience
  . '&access_token=' . $accessToken
); 
```

https_post 函数如下所示：

```
function https_post($uri, $postdata) 
{
    $ch = curl_init($uri);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $postdata);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER,true);
    $result = curl_exec($ch);
    curl_close($ch);

    return $result;
} 
```

您可以在获得 facebook 用户 ID 后将其放入您的 index.php 中，并且每次他们来游戏时都会发送他们的分数。

希望有帮助。

# iphone - 在不定义 init 方法的情况下定义和使用方便的构造函数是不好的做法？

> ID：12210656
> 
> 赞同：2
> 
> 时间：2012-08-31T07:22:22.180
> 
> 标签：iphone, objective-c

通常，您定义 init 或 initWith... 方法并在方便的构造函数中调用它们，如下所示：

```
@implementation MyClass1 : NSObject
@synthesize n, s;

-(id)init
{
    self = [super init];
    if (self) {
        self.n = 1;
    }
    return self;
}

-(id)initWithString:(NSString *)s
{
    self = [self init];
    if (self) {
        self.s = s;
    }
    return self;
}

+(id)myClass
{
    return [[self alloc] init];
}

+(id)myClassWithString:(NSString *)s
{
    return [[self alloc] initWithString:s];
}
@end 
```

但我认为可以在不定义 init 或 initWith... 方法的情况下定义方便的构造函数，如下所示：

```
@implementation MyClass2
@synthesize n, s;

+(id)myClass
{
    MyClass2 *obj = [[self alloc] init];
    obj.n = 1;
    return obj;
}

+(id)myClassWithString:(NSString *)s
{
    MyClass2 *obj = [self myClass];
    obj.s = s;
    return obj;
}

@end 
```

在不定义 init 方法的情况下定义方便的构造函数是不好的做法吗？
如果这是不好的做法，你能告诉我缺点或问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:04:18.743

我不确定这是否真的是一种不好的做法。通常，当我编写便利构造函数时，它们看起来像这样：

```
+ (FSClub *)clubWithXMLElement:(SMXMLElement *)element;
{
    FSClub *club = [[FSClub alloc] init];
    if (club)
    {
        club.identifier = [element integerValueWithPath:@"id"];
        club.name       = [element valueWithPath:@"naam"];
        club.referer    = [element URLWithPath:@"referer"];
    }
    return club;
} 
```

该代码仍然考虑到可能的内存问题（初始化失败），例如在“正常”初始化构造函数中。只有初始化成功时才会设置值。

接口文件定义如下：

```
@interface FSClub : NSObject

@property (nonatomic, assign, readonly) NSInteger identifier;
@property (nonatomic, copy, readonly)   NSURL    *referer;
@property (nonatomic, copy, readonly)   NSString *name;

+ (FSClub *)clubWithXMLElement:(SMXMLElement *)element;

@end 
```

请注意，这些属性是只读的。我更喜欢创建不可变对象，因为它们在线程代码中更容易处理。在这种情况下设置属性的唯一方法是使用便捷构造函数。

当我创建便利构造函数时，这些通常是我用来实例化对象的唯一方法。也就是说，`-init`大部分时间不会使用该方法。此外，即使您不使用它们，编写大量初始化程序也会占用大量开发人员时间。我不会创建我不使用的方法。

当您创建代码作为框架的一部分时*- 您与许多不认识的人共享的代码 -*在这种情况下，您可能想要编写便利构造函数以及所有普通构造函数，因为您不能确保代码将如何在人们自己的项目中使用。例如，在紧密循环中使用便利构造函数创建大量对象可能对性能不利，因为这些对象被添加到自动释放池中。我认为在 ARC 场景中也是如此。在这种情况下，可以选择使用“普通”构造函数来创建对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:46:08.663

```
//I think it is BAD. First of all, you confused CLASS and OBJECT, you get an object like this

//    [[CLASSNAME alloc] init];

//not like this: 

//    [[OBJECT alloc] init];

//so, what you want to do shall be like this:

//    +(id)myClass
//    {
//        MyClass2 *obj = [[[self class] alloc] init];
//        obj.n = 1;
//        return obj;
//    } 
```

请首先忽略，感谢@W'rkncacnter。

但是，在这里您返回的是您自己拥有的对象而没有自动释放，不建议这样做。

也许您真正想要的是工厂方法之类的东西？

```
+(id)myObjectWithString:(NSString *)string
{
    MyClass2 *obj = [[[MyClass2 alloc] init] autorelease];
    obj.s = string;
    return obj;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T08:36:10.333

像你一样做`MyClass1`它可以更容易地定义一个指定的初始化器。[苹果推荐这些](http://developer.apple.com/library/ios/#documentation/general/conceptual/CocoaEncyclopedia/Initialization/Initialization.html)；它们有助于减少代码重复。

# sharepoint - Outlook：保存联系人时发生冲突

> ID：12210661
> 
> 赞同：1
> 
> 时间：2012-08-31T07:22:40.350
> 
> 标签：sharepoint, outlook, outlook-addin, outlook-2010

我正在处理一个涉及 Outlook 和 SharePoint 之间的联系人同步的项目。虽然微软为此提供了一个开箱即用的解决方案，但它不满足一些特定的要求，如自定义列同步。为此，我们必须创建一个 Outlook 加载项。此加载项处理因同步而创建的联系人文件夹的 ItemAdd 和 ItemChange 事件。

在 ItemChange 事件中，我检查 Notes 字段中的标志，并确定更改是从 SharePoint 还是 Outlook 进行的，并相应地更新联系人项目。

这是我的 ItemChange 事件的代码。

```
void Items_ItemChange(object Item)
    {

        try
        {

            ContactItem ctItem = Item as Outlook.ContactItem;

            string customFieldsAndFlag = ctItem.Body;

            Dictionary<string, string> customColumnValueMapping = new Dictionary<string, string>();

            if (!string.IsNullOrEmpty(customFieldsAndFlag))
            {
                string[] flagAndFields = customFieldsAndFlag.Split(';');
                if (flagAndFields.Length == 2)
                {
                    //SharePoint to Outlook
                    if (flagAndFields[0] == "1")
                    {

                        foreach (string customColumnAndValue in flagAndFields[1].Split('|'))
                        {
                            string[] KeyAndValue = customColumnAndValue.Split('=');

                            if (KeyAndValue.Length == 2)
                            {
                                if (ctItem.UserProperties[KeyAndValue[0]] == null)
                                {
                                    ctItem.UserProperties.Add(KeyAndValue[0], OlUserPropertyType.olText, true, OlUserPropertyType.olText);
                                    ctItem.UserProperties[KeyAndValue[0]].Value = KeyAndValue[1];
                                }
                                else
                                {
                                    ctItem.UserProperties[KeyAndValue[0]].Value = KeyAndValue[1];
                                }
                            }

                        }

                        ctItem.Body = "2;" + flagAndFields[1];

                    }
                    //Outlook to SharePoint
                    else
                    {

                        foreach (string customColumnAndValue in flagAndFields[1].Split('|'))
                        {
                            string[] KeyAndValue = customColumnAndValue.Split('=');

                            if (KeyAndValue.Length == 2)
                            {
                                if (ctItem.UserProperties[KeyAndValue[0]] != null && ctItem.UserProperties[KeyAndValue[0]].Value != null)
                                {
                                    KeyAndValue[1] = ctItem.UserProperties[KeyAndValue[0]].Value.ToString();
                                }
                                customColumnValueMapping.Add(KeyAndValue[0], KeyAndValue[1]);
                            }

                        }

                        string newBody = string.Empty;

                        foreach (KeyValuePair<string, string> kvp in customColumnValueMapping)
                        {
                            newBody += kvp.Key + "=" + kvp.Value + "|";
                        }

                        if (newBody == flagAndFields[1])
                        {
                            return;
                        }
                        else
                        {
                            ctItem.Body = "0;" + newBody;
                        }

                    }

                }

            }
            ctItem.Save();

        }
        catch(System.Exception ex)
        {
            // log the error always
            Trace.TraceError("{0}: [class]:{1} [method]:{2}\n[message]:{4}\n[Stack]:\n{5}",
                DateTime.Now, // when was the error happened
                MethodInfo.GetCurrentMethod().DeclaringType.Name, // the class name
                MethodInfo.GetCurrentMethod().Name,  // the method name
                ex.Message, // the error message
                ex.StackTrace // the stack trace information
            );
            // now display a friendly error to the user
            MessageBox.Show("There was an application error, you should save your work and restart Outlook.",
              "TraceAndLog",
              MessageBoxButtons.OK,
              MessageBoxIcon.Error);
        }
    } 
```

现在的问题是，联系人项目更新第一次从 Outlook 正常工作。联系人得到正确更新，加载项工作正常，更改也能很好地反映在 SharePoint 中。但是，当我尝试再次使用 Outlook 编辑联系人时，会弹出一个弹出窗口，提示“无法更改项目，因为它已被其他用户或在另一个窗口中更改。您想在该项目的默认文件夹中复制一份吗？ ？” 并且 oulook 加载项此后停止工作。

任何人都可以为这个问题提出一个解决方案吗？ *我无法使用 ctItem.Close()，因为当我使用此函数时，同步过程不起作用，并且更改不会填充到 SharePoint。*

# android - Android：在真实设备上运行

> ID：12210662
> 
> 赞同：0
> 
> 时间：2012-08-31T07:22:41.957
> 
> 标签：android

我是安卓新手。我无法让应用程序在真实设备上运行。我正在使用`Eclipse`.

我按照 android 开发者论坛中的说法进行操作，但`eclipse AVD`没有找到任何 USB 连接设备。`usb debuging`我在我的手机中启用并`android:debuggable="true"`在清单文件中设置，但 Eclipse 没有连接设备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:46:36.407

在真实设备上测试您的应用程序之前，请检查您的设备在运行设备中是否可见。如果它不可见，只需`PdaNet`在桌面计算机上安装一件事，它将检测相应手机的驱动程序并安装它。您可以在[这里获取](http://download.cnet.com/PdaNet/3000-10440_4-75059341.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-02T19:54:07.410

看到这个网址：[http](http://creandroid.blogspot.com/2013/10/del-eclipse-un-dispositivo-android.html) ://creandroid.blogspot.com/2013/10/del-eclipse-un-dispositivo-android.html 或

[http://developer.android.com/tools/device.html](http://developer.android.com/tools/device.html)

在这些链接中是如何在真实设备中直接运行应用程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T07:27:45.513

您的 PC 识别您的手机设备了吗？换句话说，您是否正确安装了驱动程序？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T07:28:52.297

您可能只缺少一点。根据[http://developer.android.com/tools/device.html](http://developer.android.com/tools/device.html)您必须为 adb 安装 USB 驱动程序（如果您在 Windows 上开发），或者您需要添加一个 udev 规则文件，其中包含每种类型的 USB 配置您要用于开发的设备（如果您在 Ubuntu Linux 上开发）

# java - JDK 合规性 - 虚假安全？

> ID：12210665
> 
> 赞同：5
> 
> 时间：2012-08-31T07:23:02.910
> 
> 标签：java, compilation, cross-compiling, backwards-compatibility

我安装了 Java 7，但将我的项目 JDK 合规性设置为 Java 6。不幸的是，这与使用 Java 6 编译不同。

例如，接口在 Java 7 中`javax.imageio.stream.ImageInputStream` 扩展`Closable`，而在 Java 6 中并非如此。在我的设置下使用`ImageInputStream`where a`Closable`可以很好地编译（Java 7 符合 Java 6），但在使用 Java 6 时会出现编译错误。这是假设的吗要这样吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-31T07:34:19.950

为了为较旧的 JRE 编译 Java 代码，您需要做两件事：

*   适当设置合规级别。正如dystroy所解释的那样，这确保编译器生成旧JVM可以理解的字节码。
*   使用旧的 Java 系统库。这可以确保您根据旧 JRE 附带的 Java 系统库版本（java.lang.*、java.net.* 等）进行编译。

您已经涵盖了第一点，但没有涵盖第二点，因此您的问题。

如何执行此操作取决于您的构建环境。

*   在 Eclipse 中，要使用的 Java 系统库设置为构建路径的一部分：转到项目属性/Java 构建路径/库，然后删除错误的“JRE 系统库”并使用“添加库... ”。
*   使用 plain 编译时`javac`，使用 option `-bootclasspath`。示例：（`javac -target 1.5 -bootclasspath jdk1.5.0/lib/rt.jar OldCode.java`来自[javac 联机帮助页](http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/javac.html)的“交叉编译选项”部分）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-31T07:27:26.213

您设置的 JDK 合规性主要是类格式。

类的字节码格式有几次演变。JDK 可以以以前的格式编译，而 VM 不能执行以更新的格式编译的类。

但是使用的库始终是您用于执行的 JDK 中可用的库。javax.imageio.stream.ImageInputStream 的 JDK 6 版本未与 Java 7 捆绑在一起。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T07:35:30.310

`bootclasspath`编译时使用该选项。[我认为如果进行交叉编译](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html#crosscomp-options)，JDK 7 会警告不要这样做。

# ios - 将 PonyDebugger 与 Monotouch 一起使用？

> ID：12210669
> 
> 赞同：3
> 
> 时间：2012-08-31T07:23:07.180
> 
> 标签：ios, core-data, xamarin.ios, nsurlconnection, ponydebugger

[Ponydebugger](http://corner.squareup.com/2012/08/ponydebugger-remote-debugging.html)看起来是一个非常有用的工具。

有没有办法将它与 Xamarin 的[Monotouch](http://xamarin.com/features)一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:10:15.787

这看起来是一个非常好的方法（我不会祈祷下雨，但会有一个长周末到来...... ;-)。

乍一看，您应该能够像使用任何其他本地库（即创建绑定）一样将它与 MonoTouch 一起使用，并将其`.a`与您的应用程序链接。

**好**消息是它应该相对简单，因为 API 很小（相对于代码库和您获得的功能）。

**坏**消息是我很确定它不会，如果**没有更改**，处理`System.Net.WebClient`，`HttpWebRequest`......因为它们不是建立在`NSUrl*`类之上的。

# c++ - 带有“=”（等号）符号的 C++ 命令行参数

> ID：12210671
> 
> 赞同：2
> 
> 时间：2012-08-31T07:23:10.747
> 
> 标签：c++, command-line-arguments

如果 C++ 中包含等号，我如何解析命令行选项？一个例子是：

```
./testApp --parameter1=value1 
```

我使用以下行来检查参数是否存在：

```
bool cmdOptionExists(char** begin, char** end, const std::string& option)
{
    return std::find(begin, end, option) != end;
} 
```

但是，如果参数包含等号，这将返回 false

```
cmdOptionExists(argv, argv+argc, "parameter1"); 
```

甚至打印：

```
for(int i=0;i<argc;i++)
        printf("Argument: %s\n", argv[i]); 
```

不包括参数 1 的任何指示。然而，删除等号将正确打印它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T07:29:17.337

中的命令行选项以`argv`空格分隔。因此，要么您必须自己检测`key=value`选项，要么使用命令行解析器。我建议[Boost::Program Options](http://www.boost.org/doc/libs/1_51_0/doc/html/program_options.html)。

例子：

```
namespace po = boost::program_options;
po::options_description desc("Allowed options");
desc.add_options()
    ("foo", po::value<std::string>(), "do bar")
;

po::variables_map vm;
po::store(po::parse_command_line(argc, argv, desc), vm);
po::notify(vm);

std::string foo;

if (vm.count("foo")) {
    foo = vm["foo"].as<std::string>();
} else {
    throw("Foo not set.");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T07:57:25.460

您可以像解析其他任何内容一样解析它们。在您的示例中，`argv[1]`可能包含`"--parameter1=value1"`.[1] 因此，如果您想在 处打断它`'='`，请使用`std::find`找到`'='`并打断它。我首先将其转换为`std::string`，但这并不是必需的。对于像您在 中找到的空终止字符串 `argv[i]`，`argv[i]`是“开始”迭代器，`argv[i] + strlen( argv[i] )`是“结束”迭代器。

[1] 正式地，标准实际上并没有对此做太多说明，因为这一切都发生在程序中的任何内容执行之前。然而，实际上，最常见的系统将允许调用您的程序的程序传递几乎任何东西——甚至`argv[0]`是标准确实指定的 . 我知道的所有 shell 或命令处理器都将使用空格将命令行分解为单词，而无需元字符。（什么被认为是元字符，以及如何处理它们，差异很大。）

# html - 中间垂直对齐 菜单

> ID：12210673
> 
> 赞同：2
> 
> 时间：2012-08-31T07:23:20.787
> 
> 标签：html, css

 我需要垂直对齐菜单的中间标签。另外，如果客户端将更改标签的值并将其分成两行，它将停留在中间。据我所知，垂直对齐：中间适用于表格单元格，但我需要从`<li>`元素生成菜单。请参阅下面的示例代码。

html

```
 <ul>
    <li><a href="#">qwe</a></li>
    <li><a href="#">asd</a></li>
    <li><a href="#">zxcvbnm asdfgh</a></li>
  </ul> 
```

css

```
ul {
  list-style: none;
}
li {
  float:left;
  border: 1px solid;
  margin: 1px;
  height: 60px;
  width: 60px;
  background: tomato;
  text-align: center;
  vertical-align: middle;  
}
a {
  vertical-align: middle;
} 
``` 

[在jsbin](http://jsbin.com/awihoy/1/edit)工作原型

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T07:27:55.340

嗨，现在给 li`display:table-cell`并**删除** `float:left`

像这样

```
 li {
     display:table-cell;
       vertical-align: middle;
float:left; // remove this line  
    } 
```

***[演示](http://jsbin.com/awihoy/4/edit)***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:30:13.357

只需添加`line-height:60px`到您的`a`标签即可。

**[看演示](http://jsbin.com/awihoy/7/edit)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T07:34:37.393

用于元素`display: inline-block`。`<a>`

```
ul {
  list-style: none;
}
li {
  float:left;
  border: 1px solid;
  margin: 1px;
  height: 60px;
  line-height: 60px;
  width: 60px;
  background: tomato;
  text-align: center;
  vertical-align: middle;  
}
a {
  vertical-align: middle;
  display: inline-block;
  line-height: normal;
} 
```

小提琴示例：http: [//jsbin.com/ohazot/1/edit](http://jsbin.com/ohazot/1/edit)

# regex - Perl 如何从文件中打印唯一的对

> ID：12210674
> 
> 赞同：0
> 
> 时间：2012-08-31T07:23:23.673
> 
> 标签：regex, arrays, perl

我试图弄清楚如何使用 Perl 从文件中打印唯一的数据对。

例如，

```
Input: (check.pl)
A23072 A25058
A25058 A23072 
Output:
A23072 A25058 
```

为了解决这个任务，我创建了文件 check.pl 的副本并遍历它以找到正则表达式。我编写了以下代码，但无法过滤数据。

```
#!/usr/bin/perl -w
use strict;
use warnings;
open FH, "<check.txt" || die "Error\n";
open FH1, "<checkcopy.txt" || die "Error\n";
chomp (my @array=<FH1>);
my %count=();

while (<FH>) 
{
my @values = split;
next if grep /\D/, @values or @values != 2;

my $re = qr/\A$values[0]\s+$values[1]\z|\A$values[1]\s+$values[0]\z/;

   foreach my $key (@array) 
   {
      if ((grep $_ =~ $re, $key) && (grep ++$count{$_} == 1, $key) )
      {
        print "$key\n";
      }
   }    
}
1; 
```

任何帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T07:28:16.010

您也可以将值存储在散列中，这使得查找它们变得更加容易。就像是：

```
my %duplicates;
while (<>) {
  my @values = split;
  next if @values != 2;

  my @sorted  = sort @values;
  $duplicates{ $sorted[0] } ||= {};
  next if $duplicates{ $sorted[0] }->{ $sorted[1] };

  $duplicates{ $sorted[0] }->{ $sorted[1] } = 1;
  print join(' ', @values), "\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T10:28:09.997

这是我看到的一个类似问题的技术，使用`sort`.

```
#!/usr/bin/perl
use strict;
use warnings;

my %seen;
my @array;

while (<DATA>) {
    next unless 2 == (@array = split);
    my $key = join "", sort @array;
    print unless $seen{$key}++;
}

__DATA__
A23072 A25058
A25058 A23072 
```

# php - 如何通过 PHP 制作 MYSQL 数据的多维数组

> ID：12210678
> 
> 赞同：1
> 
> 时间：2012-08-31T07:23:39.080
> 
> 标签：php, mysql, database, multidimensional-array

我想从数据库中创建一个包含多维数组的数组。该数据库有 3 个表，一张用于车辆，一张用于损坏，一张用于损坏照片。

**表车辆**有两列**id**和**name**

**表damages**有四列**damagesID**、**vehicleID**、**damagesType**和**damagesDescription**。

**表damagesPhotos**有三列**damagesPhotoID**和**damagesID**和**damagesPhotoUrl**

我需要将这三列组合成一个数组，如下所示：

```
$vehicle = array( 
   "id" => "somestring", 
   "name" => "somestring", 
   "damages" => array( 
       "damagesType" => "somestring", 
       "damagesDescription" => "somestring", 
          "photoOfDamages" => array( 
            "damagesPhotoUrl" => "somestring" 
          ) 
  ) 
); 
```

我的代码看起来像这样，但工作方式不正确。

```
$result = mysql_query( "SELECT * from vehicle v LEFT JOIN damages d ON v.id = d.vehicleID LEFT JOIN damagesPhotos p ON d.damagesID = p.damagesID WHERE d.damagesID = p.damagesID AND v.id = 1") or die(mysql_error());  

$rowsResult  = array();

while ($r = mysql_fetch_assoc($result))
    {
        $rowsResult  [] = $r;       
    }

mysql_free_result($result);

echo json_encode($rowsResult);
... 
```

/莫腾

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T07:38:26.047

由于这在 mysql 中是不可能的，所以我们可以编写一个脚本来提供有关特定车辆的所有信息，并使用这些数据，我们可以创建一个数组。参考以下代码。

```
$query = "SELECT * from vehicle v LEFT JOIN damages d ON v.id = d.vehicleID LEFT JOIN   damagesPhotos p ON d.damagesID = p.damagesID WHERE d.damagesID = p.damagesID AND v.id = 1";

$result = mysql_query($query);

$i = 0;
$vehicle = array();
while($row = mysql_fetch_array($result)){
      $vehicle[$i] = array( 
        "id" => $row[id], 
        "name" => $row[name], 
        "damages" => array( 
            "damagesType" => $row[damagesType], 
            "damagesDescription" => $row[damagesDescription], 
            "photoOfDamages" => array( 
               "damagesPhotoUrl" => $row[damagesPhotoUrl] 
            ) 
         )
      );
      $i++;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T07:35:16.673

在这里不可能让 MySQL 为您完成所有工作（好吧，*可以*让它完成*大部分*工作，但不要这样做），因为来自 MySQL 或任何 SQL 驱动的数据库的结果集可以完全具有两个维度。第一个维度是行的集合，第二个维度是每行的列的集合。

根据示例目标数据结构，您有两种选择：

1.  获取初始结果集 ( `vehicle LEFT JOIN damages`) 并对其进行迭代，运行查询以获取照片
2.  按照您当前的操作将所有表连接在一起，并将其后处理为所需的多维结构。

这是一个折衷方案 - 选项 1 会导致更多的数据库流量，但检索的数据不超过所需的数据，而选项 2 将其减少为具有较少数据库流量的单个查询，但检索的数据多于所需的数据，因为每个照片行都承载了整个车辆的数据。

选项 1 将是使用准备好的语句的主要候选者，这是您无法利用`mysql_*`函数的优势。您应该改用[PDO](http://php.net/manual/en/book.pdo.php)或[MySQLi](http://php.net/manual/en/book.mysqli.php)。我个人推荐PDO。这样做还有许多其他原因，包括有一天 MySQL 扩展将从 PHP 中删除，正确使用准备好的语句可以完全消除通过用户输入进行 SQL 注入导致的任何安全问题风险。

我可能会推荐选项2。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T07:28:46.970

你不能从 mysql 得到一个多维数组，它只是给你一个二维结果集。您可以获得每行的许多列值。如果您希望它像这样嵌套，则必须在检索结果后处理该数组。

像这样的东西：

```
$vehicles = array();

while ($r = mysql_fetch_assoc($result))
{
    $vehicle['id'] = $r['id']; 
    ...
    $damage = array();
    $damage['damagesType'] = $r['damagesType'];
    ...
    $vehicle['damages'] = $damage;
    ...
    array_push($vehicles, $vehicle);      
}
echo json_encode($vehicles); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T18:47:23.810

感谢**Vinay**，我的阵列看起来像这样。那很好 ：）

```
[{"vehilceId":"1",
"name":"AW55005",
"damages":{
    "damagesType":"Exterior",
    "damagesDescription":"Rust",
    "photoOfDamages":{
        "damagesPhotoUrl":"link to damagesPhoto 01"
        }
    }
},

{"vehilceId":"1",
"name":"AW55005",
"damages":{
    "damagesType":"Exterior",
    "damagesDescription":"Rust",
    "photoOfDamages":{
        "damagesPhotoUrl":"link to damagesPhoto 02"
        }
    }
},

{"vehilceId":"1",
"name":"AW55005",
"damages":{
        "damagesType":"Interior",
        "damagesDescription":"Scratch",
        "photoOfDamages":{
            "damagesPhotoUrl":"link to damagesPhoto 03"
            }
        }
} 
```

但是正如你所看到的，前两个对象是相同的，只是damagesPhotoUrl 不同。如何合并这两个数组，使其看起来像这样：

```
{"vehilceId":"1",
"name":"AW55005",
"damages":{
    "damagesType":"Exterior",
    "damagesDescription":"Rust",
    "photoOfDamages":{
        {"damagesPhotoUrl":"link to damagesPhoto 01"},
        {"damagesPhotoUrl":"link to damagesPhoto 02"}
    }
    }
}, ... 
```

/莫腾

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T05:27:46.103

解决你的主要问题后。我正在为新问题写这篇文章。据我所知，您不能将值分配给数组中的相同键，这意味着您不能允许有重复的键。因为如果多个可以具有相同的键，您将如何访问所需的值。这就是为什么您可以选择另一种方式来合并您的价值。按以下方式重新排列您的阵列。

```
$key = "damagesPhotoUrl";
$value = "link to damagesPhoto 01";
$array[$key][] = $value; 
```

然后你可以访问它：

```
echo $array[$key][0];
echo $array[$key][1]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-10T20:58:49.277

很晚了....但是如果您使用 PDO，那么 PDO::FETCH_COLUMN 和 PDO::FETCH_GROUP 可以生成 3 维数组。我认为它是有限的，我不是很喜欢 SQL 的人，但是说“你不能从 mysql 获取多维数组......或任何 SQL 驱动的数据库 - 可以有两个维度”可能不太正确。

对不起我的英语和题外话（这个问题是关于 mysql，而不是 pdo）

[http://php.net/manual/en/pdostatement.fetchall.php](http://php.net/manual/en/pdostatement.fetchall.php)

（伪数组）：

```
array(
  array(//group 1
    array(
      0=>item1,
      0=>item2...
      )
    array(
      0=>item1,
      0=>item2...
      )
    array(
      0=>item1,
      0=>item2...
      )
    array(
      0=>item1,
      0=>item2...
      )
  )...
  array(//group 2
    array(
      0=>item1,
      0=>item2...
      )
    array(
      0=>item1,
      0=>item2...
      )
   )...
) 
```

# java - 安全访问 AppScale 应用程序

> ID：12210679
> 
> 赞同：1
> 
> 时间：2012-08-31T07:23:50.940
> 
> 标签：java, appscale

with`AppScale`是否有一种工具`AppScale`可以“保护”与它一起部署的应用程序，例如，一个应用程序只能通过某种安全连接访问？

所以我们不必在应用程序上放置太多安全逻辑（如 Spring 安全性），特别是对于那些唯一目的是提供对数据存储区的 Restful 键值访问的应用程序，如下所示：[http ://bit.ly /RvLUTw](http://bit.ly/RvLUTw)和[http://bit.ly/PTZkW](http://bit.ly/PTZkW)。其目的并不是真正的 Web 应用程序，而是“数据存储设备”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T15:41:33.133

当然，由于 AppScale 只运行 Google App Engine 应用程序，因此您为 App Engine 应用程序所做的任何事情都可以在 AppScale 上运行。如果“安全连接”是指 HTTPS，那么您可以获取`app.yaml`文件并`secure:always`在每条路由上添加以强制使用 HTTPS。这是一个例子：

```
handlers:

- url: /youraccount/.*
  script: accounts.py
  login: required
  secure: always 
```

如果“安全连接”是指经过身份验证的访问，则可以使用[用户 API](https://developers.google.com/appengine/docs/python/users/)将访问限制为登录用户或白名单上的用户。如果您需要以编程方式访问它，您可以通过脚本登录 AppLoadBalancer（因为它具有 RESTful 接口），保存它提供给您的 cookie，然后在您向应用发出请求时使用它。

# php - 用于 Windows Azure 的 php 中的购物车

> ID：12210680
> 
> 赞同：-4
> 
> 时间：2012-08-31T07:24:01.197
> 
> 标签：php, azure, responsive-design, shopping-cart

是否有任何内置 php 的购物车可以在 Windows Azure 上运行。我不知道 Azure 云。请帮忙

如果有很多，那么我更喜欢具有响应式布局的那个。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:49:37.317

出色地，

我想澄清一些事情，因为存在误导性信息。首先，一切都正确 - PHP 确实是 Windows Azure 中的一等公民。但从那时起，有两种方法：

*   [Windows Azure 云服务](http://www.windowsazure.com/en-us/home/scenarios/cloud-services/)（又名 WebRole 和[PHP 开发中心](https://www.windowsazure.com/en-us/develop/php/)中提到的所有内容）
*   [Windows Azure 网站](http://www.windowsazure.com/en-us/home/scenarios/web-sites/)（又名 Azure 网站）

采用云服务方法，现有的 PHP 购物车无需修改即可运行。因为云服务是 PaaS 产品，具有**无状态**角色。[（您可以从我的博客文章](http://blogs.staykov.net/2011/12/windows-azure-basics-part-1-of-n.html)中了解有关术语的更多信息 - 即云服务/角色/角色实例- 这一切都与 PaaS 和云服务有关）。如果您选择云服务 - 获取*任何*现有的 PHP 购物车并开始修改它 - 从它如何存储 Session 到它如何写入和读取文件到持久存储。

采用 Windows Azure WebSite 方法 - 您实际上可以采用任何现有的 PHP 购物车并在 Windows Azure WebSite 中运行它。您可以这样做，也可以选择一些图库 - 您可以通过点击几下安装例如 WordPress，然后添加一些[购物车插件](http://wordpress.org/extend/plugins/tags/shopping-cart)。您可以对[Joomla](http://extensions.joomla.org/extensions/e-commerce/shopping-cart)甚至[Drupal](http://www.ubercart.org/)做同样的事情。

所有这些都在 Windows Azure 网站的网站库中得到支持。安装后，您可以自定义它们。

需要注意的一点是，Windows Azure 网站目前处于预览阶段，因此没有 SLA，并且不支持在 WAWS 上运行任何商业项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:18:40.213

当涉及 Windows Azure 时，PHP 是一等公民。查看[PHP 开发中心](https://www.windowsazure.com/en-us/develop/php/)以获取更多信息。

现在，您可以选择使用 SQL Azure 或在专用的 IaaS 平台产品上运行 MySQL，甚至可以使用 Windows Azure 网站运行它：[使用 WebMatrix 创建和部署 PHP-MySQL Windows Azure 网站](https://www.windowsazure.com/en-us/develop/php/tutorials/website-w-mysql-and-webmatrix/)。

因此，如果您有一个在 MySQL 上运行的基于 PHP 的购物车，您也应该能够在 Azure 上运行它。

# c# - 如何在网络浏览器上阻止图像

> ID：12210681
> 
> 赞同：6
> 
> 时间：2012-08-31T07:24:00.673
> 
> 标签：c#, winforms, webbrowser-control, image

我正在使用 a 构建一个 C# 应用程序，`WebBrowser`并且我试图找出一种阻止图像的方法，即让它们在网站加载时不显示（以便网站加载更容易）。

我试图`<img>`通过获取标签`webBrowser1.DocumentText`并使用来删除图像来删除标签，但是当我使用代码时`Regex.Replace`，它会显示一个空白页面。`aaa`有没有更好的方法来删除图像？非常感谢任何帮助。

**代码：**

```
var html_source = webBrowser1.DocumentText;
var newOne = Regex.Replace(html_source, "<img.*/>", "", RegexOptions.Multiline);
webBrowser1.DocumentText = newOne + "aaa"; 
```

**更新：**

我已经尝试了下面的代码（仅用于测试），但仍然显示我只是`aaa`.

```
var html_source = webBrowser1.DocumentText;
webBrowser1.DocumentText = html_source + "aaa"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T15:10:23.553

Webbrowser 控件使用与 Internet Explorer 相同的设置。

您可以轻松禁用图像，但请注意，它会影响 Internet Explorer，以及您的网络浏览器控件（以及其他使用 Internet Explorer 功能的程序）

禁止加载图像：

1.) 打开智能资源管理器

2.) 转到“工具”>“互联网选项”

3.) 转到“高级”选项卡

4.）向下滚动，直到找到“显示图片”复选框，然后取消选中它（它位于“多媒体”部分）

此更改的效果存储在我相信的注册表中，因此您也应该能够以编程方式对其进行编辑。但是请记住，它不仅会影响您的应用程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-27T16:29:30.780

你可以试试这个：

```
private void webBrowser1_ProgressChanged(object sender, WebBrowserProgressChangedEventArgs e)
{
  if (webBrowser1.Document != null)
  {
     foreach (HtmlElement imgElemt in webBrowser1.Document.Images)
     {
        imgElemt.SetAttribute("src", "");
     }
   }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-31T07:34:36.667

**编辑**

在 SO 和一个完整的项目上找到[**了这个问题**](https://stackoverflow.com/questions/2048424/disable-image-loading-from-webbrowser-control-in-c-net-before-the-documentcompl)[，它可以帮助你在codeproject.com](http://www.codeproject.com/Articles/9032/Extended-web-browser-control-for-NET-1-0-1-1)上。在这个例子中，有一个**使用 webBrowser COM 组件的 userControl**。正如我在原始答案中所写，我*认为*不可能*阻止 .net Framework WebBrowser 加载图像*。在浏览器控件接收到纯 html 文本后，您需要访问以下级别以**拦截加载图像。**

> ...控件中最模糊和最重要的部分是**IDispatch_Invoke_Handler()**。...如何**实现 IDispatch::Invoke**以 **限制 IE 显示的内容**（例如图像、ActiveX 控件、Java）。我发现，如果您在代码中添加一个 IDispatch_Invoke_Handler() 方法，**COM 调度标识符为 -5512，那么它就可以完成这项工作**。一个非常晦涩的答案，但效果很好......

**原来的**

你可以试试这个

```
private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
     Debug.WriteLine("documentCompleted");
     HtmlDocument doc = webBrowser1.Document;
     foreach (HtmlElement  imgElemt in doc.Images)
     {
         imgElemt.SetAttribute("src", "");
     }
} 
```

但正如 MSDN 所说

> 处理 DocumentCompleted 事件以在新文档完成加载时接收通知。当 DocumentCompleted 事件发生时，新文档已完全加载，这意味着您可以通过 Document、DocumentText 或 DocumentStream 属性访问其内容。

我认为您不能使用 .net 框架中的 webBrowser 控件来执行此操作。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-31T08:52:23.320

最近，我需要拦截和分析网络浏览器控件中的所有通信。我认为我使用的技术可以帮助你。

你需要什么：

*   [Awesomium.Net](http://awesomium.net/)：基于 Chromium 引擎的 .net 控件
*   [Fiddler Core](http://www.fiddler2.com/fiddler/core/)：一个 http 内存代理，允许你监控 http 通信。
*   [HtmlAgility 包](http://htmlagilitypack.codeplex.com)：根据您选择的解决方案，HAP 可以帮助您以比正则表达式更可靠的方式动态更改 html 内容的 DOM。

我选择使用 Awesomium 是因为它提供了比开箱即用的 Web 浏览器控件更多的功能。就我而言，它允许我定义要使用的代理而不是系统范围的设置。

Fiddler Core 用于拦截通信。它的 API 提供了在发出请求时拦截/篡改/...的方法。在我的情况下，我只是将响应正文转发到我的业务类，但在你的情况下，你应该能够过滤 mime-type 以更改 HTML DOM（**使用 HtmlAgility 包！！！！！！**）或返回非 200图像的 http 状态。

这是我使用的代码。我的应用程序是 WPF，但您可以通过一些努力使其适应 winform：

```
public partial class App : Application
{
    static App()
    {
        // First, we set up the internal proxy
        SetupInternalProxy();
        // The we set up the awesomium engine
        SetupBrowser();
    }
    private static void SetupInternalProxy()
    {
        // My requirement is to get response content, so I use this event.
        // You may use other handlers if you have to tamper data.
        FiddlerApplication.AfterSessionComplete += FiddlerApplication_AfterSessionComplete;
        FiddlerApplication.Log.OnLogString += (o, s) => Debug.WriteLine(s);

        FiddlerCoreStartupFlags oFCSF = FiddlerCoreStartupFlags.Default;

        //this line is important as it will avoid changing the proxy for the whole system.
        oFCSF = (oFCSF & ~FiddlerCoreStartupFlags.RegisterAsSystemProxy);

        FiddlerApplication.Startup(0, oFCSF);

    }
    private static void SetupBrowser()
    {
        // We may be a new window in the same process.
        if (!WebCore.IsRunning)
        {
            // Setup WebCore with plugins enabled.
            WebCoreConfig config = new WebCoreConfig
            {
                // Here we plug the internal proxy to the awesomium engine
                ProxyServer = "http://127.0.0.1:" + FiddlerApplication.oProxy.ListenPort.ToString(),
                // Adapt others options related to your needs
                EnablePlugins = true,
                SaveCacheAndCookies = true,
                UserDataPath = Environment.ExpandEnvironmentVariables(@"%APPDATA%\MyApp"),
            };
            WebCore.Initialize(config);
        }
        else
        {
            throw new InvalidOperationException("WebCore should be already running");
        }
    }
    // Here is the handler where I intercept the response
    private static void FiddlerApplication_AfterSessionComplete(Session oSession)
    {
        // Send to business objects
        DoSomethingWith(
            oSession.PathAndQuery,
            oSession.ResponseBody,
            oSession["Response", "Content-Type"]
            );

    }
} 
```

正如我在评论中所说，您可以使用 AfterSessionComplete 的另一个事件处理程序。这取决于您的要求（阅读提琴手核心 SDK 以获得帮助）。

最后一句话：此代码从应用程序类（相当于 Winform 中的 Program 类）运行。为了在 windows 类中使用结果，您可能需要使用消息传递系统或发布全局事件（注意内存泄漏）。您还必须知道 AfterSessionComplete 事件是从多个线程触发的，有时是同时触发的。您将使用某种 Invoking 在 UI 线程中工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-04T03:05:58.193

```
HtmlElementCollection elc = WebBrowser1.Document.GetElementsByTagName("img");
foreach (HtmlElement el in elc)
{
   if (el.GetAttribute("src") != null)
   {
       el.SetAttribute("src", "");
   }
} 
```

如果有任何元素可能包含图像，那么它将在`img`标签中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-31T07:31:39.117

You can use the Lazy Load load technique for this purpose. See [http://engineering.slideshare.net/2011/03/faster-page-loads-with-image-lazy-loading/](http://engineering.slideshare.net/2011/03/faster-page-loads-with-image-lazy-loading/)

# android - 如何在 android 中为 android 版本 2.2 添加 Google API 8

> ID：12210686
> 
> 赞同：0
> 
> 时间：2012-08-31T07:24:23.417
> 
> 标签：android, google-maps, android-intent

我正在尝试为 android 版本 2.2 添加 Google API 8，并且我使用此 [http://dl-ssl.google.com/android/repository/repository.xml](http://dl-ssl.google.com/android/repository/repository.xml) 链接来执行加载 API，但我没有得到它，请帮我克服这一点。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:31:47.333

Download and install the **Android SDK** from the site [http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)

# android - 我的简单安卓计算器有问题

> ID：12210687
> 
> 赞同：0
> 
> 时间：2012-08-31T07:24:36.437
> 
> 标签：android

对不起，我编码了一个简单的 android 计算器，然后它显示 XML 错误，我更改了一些代码但它不起作用。为什么这样？

这是主要代码

```
<LinearLayout xmlsn:android ="http://schemas.android.com/apk/res/android"
xmlns:tools ="http://schemas.android.com/tools"
android:orientation="vertical"
android:layou_width="fill_parent"
android:layou_height="fill_parent"
android:paddingTop="5dip">
<TextView
android:id="@+id/tv"
android:layout_width="fill_parent"
android:layout_height="40dip"
android:layout_marginLeft="5dip"
andorid:layout_marginRight="5dip"
android:background="#FFFFFF"
android:gravity="center_verticallright"
android:textColor="#ff0000"
android:textSize="30dip">
</TextView>
<LinearLayout
android:orientation="horizontal"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:paddingTop="5dip"> 
```

然后我收到错误警告：

![错误警告](../Images/65200ea6a7ebcc71180db90f9fffb0af.png)

它说

* * *

在此行找到多个注释：

*   错误：解析 XML 时出错：格式不正确（令牌无效）

*   元素类型“LinearLayout”必须后跟属性规范“>”或“/>”。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:32:13.530

Well. Are you sure, you've closed your `LinearLayout` tag? The editor cannot find the tag `</LinearLayout>`

It should probably be in the very bottom of your layout file.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:27:27.047

我认为你的 textview 没有结束 > 。就在上面`</textview>`添加一个 >

您的图片太小而无法真正看到，所以也许您应该上传您的代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T08:06:31.450

试着放

```
 </LinearLayout>
</LinearLayout> 
```

在结束时`xml`

并且拼写不正确，应该和宽度`android:layout_height`不`android:layou_height` 一样

所以结果将是

```
<LinearLayout xmlns:tools="http://schemas.android.com/tools"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent"
    android:orientation="vertical"
    android:paddingTop="5dip"
    xmlsn:android="http://schemas.android.com/apk/res/android" >

    <TextView
        android:id="@+id/tv"
        android:layout_width="fill_parent"
        android:layout_height="40dip"
        andorid:layout_marginRight="5dip"
        android:layout_marginLeft="5dip"
        android:background="#FFFFFF"
        android:gravity="center_verticallright"
        android:textColor="#ff0000"
        android:textSize="30dip" >
    </TextView>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:paddingTop="5dip" >
    </LinearLayout>

</LinearLayout> 
```

# c++ - 在整个解决方案 MVS 2008 中查找函数的用法

> ID：12210689
> 
> 赞同：0
> 
> 时间：2012-08-31T07:24:37.620
> 
> 标签：c++, visual-studio, visual-studio-2008, visual-assist, visual-assist-x

我使用 Visual Studio 2008 和 Visual Assist X 在 C++ 上进行编码。我想找到一个函数用法 - 解决方案中调用函数调用的所有行（请注意，我不想找到调用具有相同名称的函数的行，但我想找到确切调用该函数的地方。）我该怎么做？

# apache-pig - Pig：多次调用外部方法

> ID：12210690
> 
> 赞同：1
> 
> 时间：2012-08-31T07:24:47.400
> 
> 标签：apache-pig

我想在我的 Pig 中使用 methods ，`REPLACE`但我无法以一种好的方式使用它。`SUBSTRING``INDEXOF`

*   第一种情况：`REPLACE`在`REGEX_EXTRACT_ALL`：

    ```
    data_split = FOREACH data GENERATE FLATTEN(REGEX_EXTRACT_ALL(line, 
        MY_REGULAR_EXPRESSION)) 
    AS (
        timestamp: chararray,
        url: chararray,
        REPLACE(url , '.*?://', '') AS clean_url: chararray); 
    ```

我想使用 REPLACE 删除`http://`URL 中的前导。在这种情况下，我得到：

```
Error during parsing. Encountered " "(" "( "" 
```

*   第二种情况：重用输出：

    ```
    ws = FOREACH data_split {
        clean_url = REPLACE(url , '.*?://', '');
        url_index = INDEXOF(clean_url, '/');
        web_server = SUBSTRING(clean_url, 0, url_index);
        GENERATE
            web_server,
            timestamp,
            ip
            ; 
    ```

这种情况都不起作用，当我尝试`clean_url`从以前的调用中重用时`REPLACE`，我得到了

```
Attempt to give operator of type 
    org.apache.pig.backend.hadoop.executionengine.physicalLayer.expressionOperators.POUserFunc       
    multiple outputs.  This operator does not support multiple outputs. 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:32:56.277

我认为您不能在指定架构的`UDF`范围内使用 a 。`AS clause`我假设您已经以这种方式拥有它：

```
inp = LOAD 'data.txt' AS (line:chararray);
data_split = FOREACH inp 
               GENERATE FLATTEN(REGEX_EXTRACT_ALL(line, MY_REGULAR_EXPRESSION)) 
               AS (url:chararray, timestamp:chararray);

res = FOREACH data_split GENERATE REPLACE(url , '.*?://', ''), timestamp;
... 
```

至于你的第二个问题：
使用哪个 Pig 版本？我认为这是一个[错误](https://issues.apache.org/jira/browse/PIG-2134)，在 0.10.0 版本中我无法重现它。

# sql - T-SQL 动态数据透视

> ID：12210692
> 
> 赞同：16
> 
> 时间：2012-08-31T07:24:52.470
> 
> 标签：sql, sql-server, tsql, dynamic, pivot

好的，我有一张看起来像这样的桌子

```
ItemID | ColumnName | Value
1      | name       | Peter
1      | phone      | 12345678
1      | email      | peter@host.com
2      | name       | John
2      | phone      | 87654321
2      | email      | john@host.com
3      | name       | Sarah
3      | phone      | 55667788
3      | email      | sarah@host.com 
```

现在我需要把它变成这样：

```
ItemID | name  | phone    | email
1      | Peter | 12345678 | peter@host.com
2      | John  | 87654321 | john@host.com
3      | Sarah | 55667788 | sarah@host.com 
```

我一直在查看动态支点示例，但似乎我无法将它们融入我的场景。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-31T07:39:50.313

看看下面的例子

```
CREATE TABLE #Table (
        ID INT,
        ColumnName VARCHAR(250),
        Value VARCHAR(250)
)

INSERT INTO #Table SELECT 1,'name','Peter' 
INSERT INTO #Table SELECT 1,'phone','12345678' 
INSERT INTO #Table SELECT 1,'email','peter@host.com' 
INSERT INTO #Table SELECT 2,'name','John' 
INSERT INTO #Table SELECT 2,'phone','87654321' 
INSERT INTO #Table SELECT 2,'email','john@host.com' 
INSERT INTO #Table SELECT 3,'name','Sarah' 
INSERT INTO #Table SELECT 3,'phone','55667788' 
INSERT INTO #Table SELECT 3,'email','sarah@host.com' 

---I assumed your tablename as TESTTABLE--- 
DECLARE @cols NVARCHAR(2000) 
DECLARE @query NVARCHAR(4000) 

SELECT  @cols = STUFF(( SELECT DISTINCT TOP 100 PERCENT 
                                '],[' + t.ColumnName 
                        FROM    #Table AS t 
                        --ORDER BY '],[' + t.ID 
                        FOR XML PATH('') 
                      ), 1, 2, '') + ']' 

SELECT  @cols

SET @query = N'SELECT ID,'+ @cols +' FROM 
(SELECT t1.ID,t1.ColumnName , t1.Value FROM #Table AS t1) p 
PIVOT (MAX([Value]) FOR ColumnName IN ( '+ @cols +' )) 
AS pvt;' 

EXECUTE(@query)

DROP TABLE #Table 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T07:55:24.457

尝试这个：

SQL Server 2005+

```
 ;with 
        cte_name  as(select * from <table> where ColumnName='name'),
        cte_phone as(select * from <table> where ColumnName='phone'),
        cte_email as(select * from <table> where ColumnName='email')
  select n.ItemID,n.Value [Name],p.Value [Phone],e.Value [Email] 
  from  cte_name n
  join  cte_phone p
  on    n.ItemID=p.ItemID
  join  cte_email e
  on    n.ItemID=e.ItemID 
```

# [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/8eb00/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T07:42:15.280

您不需要动态数据透视表，因为它将是一个不同的表。只需执行以下操作：

```
name    phone   email
---------------------------------
Peter            
        123456
                 peter@host.com 
```

检查这个[SQL 小提琴](http://www.sqlfiddle.com/#!3/1a3ac/8)

```
SELECT DISTINCT u.ItemID, n.Value as 'name', p.Value as 'phone', e.Value as 'email'
FROM UserData u
INNER JOIN(
SELECT ItemID, Value 
FROM UserData WHERE ColumnName = 'name') n ON n.ItemID = u.ItemID
INNER JOIN(
SELECT ItemID, Value 
FROM UserData WHERE ColumnName = 'phone') p ON p.ItemID = u.ItemID
INNER JOIN(
SELECT ItemID, Value 
FROM UserData WHERE ColumnName = 'email') e ON e.ItemID = u.ItemID 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-31T07:32:15.600

Here's a query I'm using for my contactlist :)

```
SELECT *
FROM
    (
    SELECT Contact_Id AS CT
          , [Age]
          , [Sex]
          , [State]
          , [Country]
          , [Keyword]
          , [Married]
          , [Kids]
          , [Car]
     FROM
         (SELECT c.PropertyName
               , c.ValueString
               , c.Contact_Id
          FROM
              ContactProfiles c) AS ctp
         PIVOT (max(ctp.ValueString) FOR PropertyName IN ([Age], [Sex], [State], [Country], [Keyword], [Married], [Kids], [Car])) AS PivotTable
         ) AS pvt

WHERE
    pvt.[Age] > 18
    AND (pvt.[State] = 'CA' OR pvt.[State] = 'NY')
    AND pvt.[Sex] = 'F'
    --*AND pvt.[Keyword] LIKE '%B;%'
    AND pvt.[Married] = 'True'
    AND pvt.[Kids] > 0 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-31T08:06:39.347

你有没有试过这个：

```
SELECT ItemID, name, phone, email
FROM
(SELECT [ItemID] ,[ColumnName] ,[Value] FROM Item) Item
PIVOT (MAX(Value) FOR ColumnName IN (name, phone, email) ) as pvt 
```

# android - 我怎样才能得到国家（或其 ISO 代码）？

> ID：12210696
> 
> 赞同：54
> 
> 时间：2012-08-31T07:25:08.490
> 
> 标签：android, location, country-codes

获取国家代码的最佳方法是什么？

到目前为止，我知道两种方法。一种是通过 TelephonyManager 获取，另一种是通过 Locale 获取。在 Android 上查找国家/地区代码的另一种最佳且独特的方式是什么？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-09-06T07:12:02.930

尝试这个：

```
TelephonyManager tm = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
String countryCode = tm.getSimCountryIso(); 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-09-09T16:37:09.833

关于这个总是有大量的讨论，我永远不明白为什么开发人员和公司会选择复杂的方式。用户选择的语言，是指他/她希望在他/她的手机中始终看到的语言。他们不打算让应用程序使用与其他人或系统不同的语言。

选择非常直接：使用区域设置（获取**用户选择的首选**语言），或者尽最大努力让他们以他们已经说过不想看到的语言向他们展示信息。

要获取国家代码，请使用：

```
Locale.getDefault().getCountry(); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-12-23T07:04:56.557

利用：

```
TelephonyManager tm = (TelephonyManager)getSystemService(getApplicationContext().TELEPHONY_SERVICE);
String countryCode = tm.getNetworkCountryIso(); 
```

好过`getSimCountryIso`因为`getSimCountryIso`依赖运营商把国家ISO烧到SIM卡里，而且还支持CDMA网络。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-05-27T01:29:58.317

您可以使用此代码获取[ISO 2](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2#Officially_assigned_code_elements)：

```
Locale.getDefault().getCountry() 
```

这是为了获得[ISO 3](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-3#Officially_assigned_code_elements)：

```
Locale.getDefault().getISO3Country() 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-09-07T09:40:01.463

我通过IP地址解决了它。您可以获取手机的 IP 地址。如果您使用的是 Wi-Fi，那么它将是 Wi-Fi[热点](https://en.wikipedia.org/wiki/Hotspot_%28Wi-Fi%29)的IP 地址或移动服务提供商服务器的 IP 地址，因此您可以从该 IP 地址发送到 Web 服务或跟踪该国家/地区的其他东西IP地址。

如果 Internet 提供 IP 地址所在的国家/地区，则有一些资源（数据库）可用。

这是示例[http://whatismyipaddress.com/ip-lookup](http://whatismyipaddress.com/ip-lookup)。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-05-10T12:48:36.470

我认为 IP 地址是最好的方法，因为它会为您提供当前电话所在的国家/地区。

如果你这样做

```
Locale.getDefault().getCountry(); 
```

你得到用户选择国家的国家，所以你可以选择英格兰，你可以在西班牙，也许你需要知道他/她现在在哪里。

示例：假设您的应用*只能*在英格兰购买商品。用户来自西班牙，但他/她正在英国度假，他/她想购买您的产品……如果您使用

```
Locale.getDefault().getCountry(); 
```

该用户将无法购买您的产品，因此 IP 地址是我认为的最佳方式。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-09-04T08:39:24.310

Reto Meier 有一篇很棒的文章： [http ://android-developers.blogspot.com/2011/06/deep-dive-into-location.html](http://android-developers.blogspot.com/2011/06/deep-dive-into-location.html)

它描述了获取 Android 设备位置的不同技术，包括源代码。

接下来，当您获得位置时，很容易为它获取国家 - 您可以使用在线[网络服务](https://stackoverflow.com/questions/41504/timezone-lookup-from-latitude-longitude)或[离线数据库](https://stackoverflow.com/questions/5584602/determine-timezone-from-latitude-longitude-without-using-web-services-like-geona)。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-09-13T06:46:20.707

没有 GPS 和 Google 服务（中国）的国家很难找到。`TelephonyManager`如果您的手机中没有任何 SIM 卡，则无法使用。

如果`Locale`中国用户将他/她的语言设置为英语（您将获得的国家/地区将是美国或英国），则将无法使用。

如果您的应用程序需要 Internet 连接，则可以选择。您可以使用这个名为[ip-api 的 API](http://ip-api.com/json)。如果您打算使用它，请先阅读他们的[文档。](http://%20http://ip-api.com/docs/)

还有其他 API，例如[freegeoip API](http://freegeoip.net/json/)。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2018-09-14T08:04:48.840

这是一个完整的例子。尝试从 TelephonyManager（从 SIM 卡或 CDMA 设备）获取国家代码，如果不可用，请尝试从本地配置中获取。

```
private static String getDeviceCountryCode(Context context) {
    String countryCode;

    // Try to get the country code from the TelephonyManager service
    TelephonyManager tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
    if(tm != null) {
        // Query first getSimCountryIso()
        countryCode = tm.getSimCountryIso();
        if (countryCode != null && countryCode.length() == 2)
            return countryCode.toLowerCase();

        if (tm.getPhoneType() == TelephonyManager.PHONE_TYPE_CDMA) {
            // Special case for CDMA devices
            countryCode = getCDMACountryIso();
        } else {
            // For 3G devices (with a SIM card), query getNetworkCountryIso()
            countryCode = tm.getNetworkCountryIso();
        }

        if (countryCode != null && countryCode.length() == 2)
            return countryCode.toLowerCase();
    }

    // If the network country is not available (tablets maybe), get the country code from the Locale class
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N) {
        countryCode = context.getResources().getConfiguration().getLocales().get(0).getCountry();
    } else {
        countryCode = context.getResources().getConfiguration().locale.getCountry();
    }

    if (countryCode != null && countryCode.length() == 2)
        return  countryCode.toLowerCase();

    // General fallback to "us"
    return "us";
}

@SuppressLint("PrivateApi")
private static String getCDMACountryIso() {
    try {
        // Try to get country code from SystemProperties private class
        Class<?> systemProperties = Class.forName("android.os.SystemProperties");
        Method get = systemProperties.getMethod("get", String.class);

        // Get homeOperator that contain MCC + MNC
        String homeOperator = ((String) get.invoke(systemProperties,
                "ro.cdma.home.operator.numeric"));

        // First three characters (MCC) from homeOperator represents the country code
        int mcc = Integer.parseInt(homeOperator.substring(0, 3));

        // Mapping just countries that actually use CDMA networks
        switch (mcc) {
            case 330: return "PR";
            case 310: return "US";
            case 311: return "US";
            case 312: return "US";
            case 316: return "US";
            case 283: return "AM";
            case 460: return "CN";
            case 455: return "MO";
            case 414: return "MM";
            case 619: return "SL";
            case 450: return "KR";
            case 634: return "SD";
            case 434: return "UZ";
            case 232: return "AT";
            case 204: return "NL";
            case 262: return "DE";
            case 247: return "LV";
            case 255: return "UA";
        }
    }
    catch (ClassNotFoundException ignored) {
    }
    catch (NoSuchMethodException ignored) {
    }
    catch (IllegalAccessException ignored) {
    }
    catch (InvocationTargetException ignored) {
    }
    catch (NullPointerException ignored) {
    }

    return null;
} 
```

另一个想法是尝试像这个[答案](https://stackoverflow.com/a/26753601/3680373)中的 API 请求，或者使用[良好的位置](https://javapapers.com/android/android-location-fused-provider/)。

参考资料在[这里](https://stackoverflow.com/a/52136339/3680373)和[这里](https://stackoverflow.com/a/19415296/3680373)。

# arrays - 如果它的值等于，则从数组中删除项目

> ID：12210697
> 
> 赞同：0
> 
> 时间：2012-08-31T07:25:11.380
> 
> 标签：arrays, actionscript-3

我有一个数字数组：

```
var myArray:Array = [12345, 23456, 34567, 45678]; 
```

如果我想删除说，`34567`有没有一种干净有效的方法呢？我猜我需要遍历数组，获取该值的位置，然后拼接该位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T10:50:03.317

您可以使用`Array.indexOf`来检查可以在数组中找到值的索引。如果没有找到，它将是`-1`. 在我的示例中，我一直循环并删除，直到索引为`-1`.

```
function removeFromArray(list:Array, value:*):void
{
    if (!list || !list.length) return;
    var index:int;
    while((index = list.indexOf(value)) > -1)
    {
         list.splice(index, 1);
    }
}

// test scenario

var myArray:Array = [12345, 23456, 34567, 45678, 34567];

trace("before:" + myArray);
//before:12345,23456,34567,45678,34567

removeFromArray(myArray, 34567);

trace("after:" + myArray);
//after:12345,23456,45678 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T08:57:55.147

如果您有多次出现 34567 ，您可以使用[数组方法 filter()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html#filter%28%29)过滤数组：

```
var myArray:Array = [12345, 23456, 34567, 45678, 34567]; // 34567

myArray = myArray.filter(
    function ( item : int, index : int, array : Array ) : Boolean {
        return ( item != 34567 ); // return true if item is not 34567
    }
) 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-31T07:26:40.973

等等，刚刚想到这个：

```
public function ArrayFinder() 
    {   
        var i:int =  (myArray.indexOf(34567));
        splice(i, 1);
    } 
```

# qt - QTableView 立即关闭

> ID：12210698
> 
> 赞同：0
> 
> 时间：2012-08-31T07:25:12.783
> 
> 标签：qt, qtableview

我尝试在程序中使用 QTableView。我已经在我开始的另一个测试项目中修复了模型中的所有错误。

现在，我尝试在我的主项目中插入模型和 QTableView，但与其他项目相比，QTableView 仅打开半秒钟，然后立即关闭！但是，相同的代码在测试项目中运行良好。

这是我在测试项目中的代码：

```
#include <QApplication>
#include <QTableView>
#include "start.h"
#include "mymodel.h"

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    QTableView tableView;
    MyModel myModel(0);
    tableView.setModel(&myModel);
    tableView.setSelectionBehavior(QAbstractItemView::SelectRows);
    tableView.show();
    //Start w;
    //w.show();

    return a.exec();
} 
```

这是主项目中的相关代码：

```
void Startseite::on_ButtonOK_clicked()
{
    switch (ui->menuLeiste->currentIndex()) {

    case 0:
    {
        QTableView tableview;
        Model myModel(0);
        tableview.setModel(&myModel);
        tableview.setSelectionBehavior(QAbstractItemView::SelectRows);
        tableview.show();
        break;
    }

    case 1:
    {
        // other functions...
    }
}
} 
```

模型是一个 QAbstractTableModel。

有谁知道，为什么 TableView 关闭？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:23:22.423

您需要在堆上创建模型和视图，否则它们将在结束时超出范围`on_ButtonOK_clicked`并被销毁。

它适用于您的测试项目，因为您在其中创建了两者，`main`并且它们仅在程序结束时被销毁。

# python - AttributeError：“模块”对象没有属性“foo”

> ID：12210703
> 
> 赞同：0
> 
> 时间：2012-08-31T07:26:32.593
> 
> 标签：python, module

这是2个py文件

aa.py

```
import bb
b = 3
bb.foo() 
```

bb.py

```
import aa
def foo():
    print(aa.b) 
```

从 aa.py 运行时，出现此错误

```
Traceback (most recent call last):
  File "D:\pyproj\Mytest\src\aa.py", line 7, in <module>
    import bb
  File "D:\pyproj\Mytest\src\bb.py", line 6, in <module>
    import aa
  File "D:\pyproj\Mytest\src\aa.py", line 9, in <module>
    bb.foo()
AttributeError: 'module' object has no attribute 'foo' 
```

# 另一集

只是我想解决问题，但我注意到一些有趣或有线的东西

我修改了测试

aa.py

```
print('before import bb in aa.py')
import bb
print('after import bb in aa.py')
bb.foo()
print('end of all') 
```

bb.py

```
def foo():
    print('before import aa in bb.foo()')
    import aa
    print('after import aa in bb.foo()') 
```

从 aa.py 开始

```
before import bb in aa.py
after import bb in aa.py
before import aa in bb.foo()
before import bb in aa.py
after import bb in aa.py
before import aa in bb.foo()
after import aa in bb.foo()
end of all
after import aa in bb.foo()
end of all 
```

谁能解释一下？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T07:30:52.813

The problem is a circular dependency: `aa` imports `bb`, which imports `aa`. Then `aa` calls `bb.foo()`, but this function has not yet been completely defined in `bb`, since the import of `aa` is not completed.

It is better to avoid such complex dependencies. What you can do is pass `aa.b` as an argument to `bb.foo()`:

aa.py

```
import bb
b = 3
bb.foo(b) 
```

bb.py

```
def foo(b):
    print(b) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T07:32:36.697

This is the circular dependency problem, You should `import aa` in `bb.py` locally not globally:

```
def foo():
    import aa
    print(aa.b) 
```

# python - 正则表达式查找条目的第二次出现

> ID：12210706
> 
> 赞同：1
> 
> 时间：2012-08-31T07:26:42.960
> 
> 标签：python, regex

我不是正则表达式专家。因此，我的技能被打败了。考虑以下文本：

```
[SectionTitle0]
...
Name: NameOfTechC
...

[SectionTitle1]
...
Name: NameOfZoneC
... 
```

我有兴趣使用正则表达式提取 Tech-C 和 Zone-C 的名称。这看起来像一个 config-section-party，尽管我可能会使用一个库来解析配置。但这个摘录是一个更大文件的一部分。因此，配置解析器在这里不起作用。

目前，我用`Name:\s?(.+)`. 在 python 中使用`re.findall`会返回一个包含两个名称的列表。有没有办法使用类似的东西

```
TechC_name: regex1
ZoneC_name: regex2 
```

返回 Tech-C 名称或 Zone-C 名称的列表？

**[更新]**
我想澄清一些观点。“名称：”的位置不固定，因此可能在条目之前列出相同的点，在条目之后列出相同的点。我更新了我的问题。

我认识到有时 SectionTitle0（以前的“Tech-C”）和 SectionTitle1（以前的“Zone-C”）是相同的。这使它有点复杂。可能有一种方法可以构建适合第一次出现的“名称：”和匹配第二次（或第 n 次）出现的“名称：”的正则表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:48:36.530

您正在寻找的两个正则表达式是：

TechC_名称：

```
re.findall(r"\[Tech-C\]\nName: (.*?)\n", s) 
```

ZoneC_name:

```
re.findall(r"\[Zone-C\]\nName: (.*?)\n", s) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:10:26.787

您可以轻松获得以下格式的输出：-

```
[(section1, name1), (section2, name2), ...] 
```

通过以下正则表达式实现：-

```
import re
re.findall(r"\[(\S+)\]\nName: (\w+)", t) 
```

输出将是： -

```
[('Tech-C', 'NameOfTechC'), ('Zone-C', 'NameOfZoneC')] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T13:52:45.307

## 正则表达式：

```
\[([^\]]*)\][\r\n]+(?:(?!Name:).*[\r\n]+)*?Name:\s*(.*) 
```

有效地将章节标题和名称捕获到组`\1`和`\2`.

## 执行

```
import re

data  = """[SectionTitle0]
...
Name: NameOfTechC
...

[SectionTitle1]
...
Name: NameOfZoneC
...
"""

regexStr = r'\[([^\]]*)\][\r\n]+(?:(?!Name:).*[\r\n]+)*?Name:\s*(.*)'
regex    = re.compile(regexStr)
regex.findall(data) 
```

# python - 使用 Qt 在 Python 中调整主窗口大小

> ID：12210710
> 
> 赞同：2
> 
> 时间：2012-08-31T07:26:58.850
> 
> 标签：python, resize, pyside, qmainwindow, pyuic

我在`ui_main.py`文件中有一个 gui（在 Qt Designer 中设计）。我以这种方式将它加载到我的主`*.py`文件中：

```
from PyQt4 import QtGui, QtCore
from ui_main import Ui_MainWindow
class MyForm(QtGui.QMainWindow):
    def __init__(self, parent=None):
        QtGui.QMainWindow.__init__(self)
        self.ui = Ui_MainWindow()
        self.ui.setupUi(self)
... 
```

ui_main.py 文件：

```
from PyQt4 import QtCore, QtGui

try:
    _fromUtf8 = QtCore.QString.fromUtf8
except AttributeError:
    _fromUtf8 = lambda s: s

class Ui_MainWindow(object):
    def setupUi(self, MainWindow):
        MainWindow.setObjectName(_fromUtf8("MainWindow"))
        MainWindow.resize(667, 559) 
```

我需要在应用程序启动期间调整主窗口的大小。我的主要问题是我无法访问主窗口对象。

```
 self.ui.MainWindow.resize(300,300)
 AttributeError: 'Ui_MainWindow' object has no attribute 'MainWindow' 
```

如果我添加到`ui_main.py`文件：

```
class Ui_MainWindow(object):
    def setupUi(self, MainWindow):
        self.uiui = MainWindow 
```

我可以调整我的主窗口大小：

```
self.ui.uiui.resize(300,300) 
```

但我知道编辑生成的 ui 文件非常糟糕。如何在不编辑 gui 文件的情况下调整主窗口的大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T17:23:46.740

由（通过 Qt Designer）创建的 ui 模块`pyuic`只是一个简单的辅助类，带有几个初始化方法。

这两种方法都从 Qt Designer 中获取一个顶级 ui 类的实例（通常是 a `QMainWindow`），然后*将*所有 ui 元素添加*到*该实例中。这确保了在 Qt Designer 中创建的所有内容都可以从顶级小部件访问。

因此，您的`MyForm`子类将`self`（的实例`QMainWindow`）传递给`setupUi`，然后它成为`MainWindow`您在 ui 文件中看到的变量。

这意味着您只需执行以下操作即可调整主窗口的大小：

```
self.resize(300, 300) 
```

# .net - Tridion：模板生成器和 Visual Studio 调试

> ID：12210711
> 
> 赞同：5
> 
> 时间：2012-08-31T07:27:02.143
> 
> 标签：.net, tridion, templating, tridion-2011

我们正在使用 Visual Studio 2008 创建复合模板。在调试时，我们附加到模板生成器的过程。但是，在 VS 2008 中附加进程时，我们无法找到模板生成器进程 ID。

这在我们的开发服务器上运行良好，其中 VS 2008、CMS（Tridion 2011 SP1）和模板生成器位于同一台服务器上。但如果 VS2008 和 Template Builder 安装在 CMS 服务器以外的机器上，则不起作用。

将所有（VS2008、模板生成器和 CMS）都放在同一台服务器上，特别是为了调试，这是一个先决条件吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T07:47:19.613

当您在本地计算机上时，您确实可以直接连接到该`TcmTemplateDebugHost.exe`进程，但远程 Visual Studio 有一个您可以使用的内置解决方案。

它在[此处](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_D76A55C77B39455C88BA8159131156AC)的文档中进行了描述（需要登录，有关详细信息，请参见[http://docportal.sdl.com/sdltridion](http://docportal.sdl.com/sdltridion)），有关如何在 Visual Studio 中设置远程调试的更多详细信息可以在[msdn上找到](http://msdn.microsoft.com/en-us/library/bt727f1t.aspx)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-31T10:02:40.263

正如 Bart 建议的那样，您可以参考文档。为 2011 SP1 设置远程调试与 2009 非常相似。如果您有“SDL Tridion 2009 模板手册”，您可以参考 -82 页（第 7.3.6 节）。以下是它建议的相同步骤-

**执行步骤** 1\. 访问运行 Content Manager 服务器的机器。

1.  在这台机器上，远程启动 Visual Studio 远程调试监视器，这是一个名为 msvsmon.exe 的可执行文件，位于创建 .NET 程序集的客户端机器上。此可执行文件位于文件夹中：c:\Program Files\Microsoft Visual Studio 8\Common7\IDE\Remote Debugger\\ 其中是您的客户端计算机上的 CPU 架构（x64、ia64 或 x86）。您可以选择共享此文件夹，以便 Content Manager 服务器机器可以访问它。确保以在客户端计算机上运行 Visual Studio 的用户身份运行此可执行文件（例如，您可以使用 runas 命令从 Windows 命令行提示符执行此操作）。此用户必须是 Content Manager 服务器机器上的本地管理员。

2.  在您的客户端计算机上，启动 Visual Studio 并打开 .NET 程序集项目。

3.  此外，启动模板生成器并打开或创建复合模板。

4.  在代码中的某处设置断点。

5.  从主菜单中，选择 Debug > Attach to Process 。出现 Attach to Process 对话框。

6.  在此对话框中： • 对于**Qualifier**，填写 Content Manager 服务器计算机的名称，例如 username@TCMSERVER，其中 username 是运行 msvsmon.exe 的用户的名称。然后单击对话框底部的**刷新。****可用进程**表现在显示在 Content Manager 服务器机器上运行的进程。• 在此表中，找到名为 **TcmTemplateDebugHost**的正在运行的进程。在这种情况下，请通过检查 ID 来识别此过程的特定实例。**您可以通过检查 Template Builder 中的Output**视图来找出进程的 ID，该视图包含以下行：

在 ID 为 7728 的进程“TcmTemplateDebugHost”中开始调试，其中 7728 是进程的 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-04T08:25:37.083

Days are passed and we are stepping into the future with more ideas and implementations day by day.

It's time to say bye to remote debugger host.

We have a new facility to debug all the tridion templates locally without connecting to remote debugger host which is called as **"TcmDebugger"**.

**[SDL Tridion Content Manager .NET Templating Debugger](https://code.google.com/p/tcmdebugger/)**

For more details, refer **[How to debug Tridion Templates without connecting to TcmTemplateDebugHost.exe](https://tridion.stackexchange.com/questions/4414/how-to-debug-tridion-templates-without-connecting-to-tcmtemplatedebughost-exe)**

# excel - 将命名范围从一个工作簿复制粘贴到另一个工作簿

> ID：12210712
> 
> 赞同：0
> 
> 时间：2012-08-31T07:27:02.797
> 
> 标签：excel, vba

我想将命名范围从模板复制到我当前的工作簿，该工作簿是空白的。问题是我在这个新工作簿中没有任何现有范围。所以，我无法从其他书中复制粘贴范围。这是我尝试过但似乎不起作用的方法：

```
Sub cpyRange()

Dim rng1 As Range, rng2 As Range

Set rng2 = Workbooks.Open("C:\SVN\Template.xls").Sheets("Report").Range("REPORT")

rng2.Copy

ThisWorkbook.Sheets(1).Select

Selection.PasteSpecial Paste:=xlPasteValues

ActiveWorkbook.Save
ActiveWorkbook.Close

MsgBox ("done")

End Sub 
```

我想将该范围内的所有数据及其范围名称复制粘贴到我当前的工作簿中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T09:05:52.913

您的代码中至少有两个具体问题： 1\. PasteSpecial 是 Range 的一种方法，而不是工作表。2.粘贴不复制范围名称。

下面的代码将复制到目标工作表的单元格 A1，然后创建一个名称来引用目标工作表中的选择：

```
Sub cpyRange()
Dim SourceWorkbook As Excel.Workbook
Dim RangeName As String
Dim TargetWorkbook As Excel.Workbook
Dim TargetSheet As Excel.Worksheet

RangeName = "REPORT"
Set SourceWorkbook = Workbooks.Open("C:\SVN\Template.xls")
SourceWorkbook.Sheets("Report").Range(RangeName).Copy
Set TargetWorkbook = ThisWorkbook
Set TargetSheet = TargetWorkbook.Sheets(1)
TargetSheet.Range("A1").PasteSpecial Paste:=xlPasteValues
TargetWorkbook.Names.Add RangeName, "='" & TargetSheet.Name & "'!" & Selection.Address
SourceWorkbook.Close savechanges:=True
MsgBox ("done")
End Sub 
```

我添加了更多变量，以使其更加灵活。

# java - Java在循环中动态更改函数名

> ID：12210713
> 
> 赞同：1
> 
> 时间：2012-08-31T07:27:08.633
> 
> 标签：java

我在一个类中定义了 5 个函数。在另一个类中，我有一个多循环结构，它尝试计算上述每个函数在包含许多字符串的输入文件上所花费的时间。

我希望输出使得对于输入文件的每个条目，计算并打印出每个函数超过 10 次调用所花费的平均时间。所以，输出应该是 -

输入字符串 | 函数1平均时间 | f2AvgTime 等等。

我想不出一种优雅的方式来为单个输入字符串调用所有这 5 个函数 10 次。现在我似乎在做的是这个 -

```
 for (inputString):
         for (iteration 1 to 10):
             call function 1
         for (iteration 1 to 10):
             call function2
    and so on.... 
```

有没有办法将函数名称存储在数组或某些数据结构中，并在单个迭代循环中调用它们？反正我的工作已经完成了。我只是好奇是否有更好的设计。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T07:44:24.880

使用`Runnable`界面，

```
void runMultipleTimes(Runnable run, int times) {
    for (int i = 0; i < times; i++) {
        run.run();
    }
} 
```

然后使用匿名本地类来包装各个函数，即

```
runMultipleTimes(new Runnable() {
    @Override
    void run() {
        function1();
    }
}, 10 /* how often to run */); 
```

这在某种程度上符合 Java API。`Runnable`是 Java 到处使用的关键接口。同时，我相信它通常只执行一次。因此，您可以确保它可以多次运行！

但是到目前为止，除了将s 存储在集合中`for`的能力之外，您对显式循环的收获并不多：`Runnable`

```
for (Runnable run : runCollection) {
    runMultipleTimes(run, 100);
} 
```

如果您想避免`Runnable`自己编写 s，可以使用 Java 反射按`String`名称获取方法，甚至通过完全自省。本质上，您将编写*一个* `Runnable`执行 one的程序`java.lang.reflect.Method`。Runnable 方法更灵活一些，因为您还可以执行以下操作：

```
runCollection.add(new Runnable() {
    @Override
    void run() {
        function(123456);
    }
});

runCollection.add(new Runnable() {
    @Override
    void run() {
        function(654321);
    }
}); 
```

使用不同的参数运行*相同的函数。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T07:30:35.400

您可能想查看反射：http: [//java.sun.com/developer/technicalArticles/ALT/Reflection/](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)。

它允许您检查类的成员并调用您想要的成员。特别是，请查看上面链接中的“按名称调用方法”部分。

# css - CSS a:hover 奇怪地继承了样式

> ID：12210714
> 
> 赞同：1
> 
> 时间：2012-08-31T07:27:09.770
> 
> 标签：css, hyperlink, hover, inheritance

我意识到，如果我在 CSS 中设置链接的样式，则使用具有类名的父元素，即：

```
div.class a { ... } 
```

链接的悬停状态也继承了这个样式表，但前提是我规定了一个特定的类。

[JSFiddle](http://jsfiddle.net/w8CqW/)

如何在不重复 :hover 样式表的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T07:30:25.110

您可以使用`!important`悬停样式。

```
a:hover {color:#d00 !important;} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T07:49:19.823

选择器`div.div a`比选择器更具体`a:hover`，所以它会优先。

如果您使悬停选择器更具体，它也将用于最后一个 div。例如：

```
html body a:hover {color:#d00;} 
```

# android - 如何在 Android 中缓存视图？

> ID：12210730
> 
> 赞同：7
> 
> 时间：2012-08-31T07:28:19.567
> 
> 标签：android

我正在构建一个动态生成一些标签和视图的应用程序。我定义了我的“自定义视图”在 xml 布局中的外观，并从代码中扩展了这个布局。

因为膨胀的布局总是一样的，我只想做这一步。有了布局后，我想缓存它，下次需要时使用它。

问题是，如果我将膨胀的布局放入缓存中（例如在哈希图中）并将其添加到父布局中，下次当我尝试再次添加它时（这次我将从缓存中获取布局）系统说我的布局已经有一个父级。

你知道有什么方法可以在不删除子视图的情况下从父视图中分离子视图吗？

添加了一些代码：

```
 private static HashMap<String, LinearLayout> mComponentsCache;

// inflate and add the layout in cache
layout = (LinearLayout)mLf.inflate(R.layout.form_textbox, mHolder, false);
mComponentsCache.put(FormFieldType.TYPE_TEXT, layout); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-31T08:38:39.060

你实际上不能这样做。我引用你的评论

`I want to do it in this way because is no point to re-inflate the same view which was already inflated. As an example I have to show 5 textboxes which have the same layout but different content.`

您每次都必须充气，因为您需要此文本框的 5 个不同实例。如果你不想膨胀，你应该找到一种方法来复制已经创建的布局，这无助于改进，因为复制也是“昂贵的”。

事实上，为了清楚起见，膨胀视图不会经过 XML 解析（以防万一），它是编译代码，因此，努力实现一种创建你的观点的副本是没有意义的。

底线：坚持通货膨胀。

# php - 在magento中禁用视图渲染

> ID：12210731
> 
> 赞同：0
> 
> 时间：2012-08-31T07:28:20.843
> 
> 标签：php, zend-framework, magento, zend-pdf

如何在magento的`\app\code\core\Mage\Wishlist\Helper\Data.php`文件中调用以下两行

```
$this->_helper->layout()->disableLayout();   
$this->_helper->viewRenderer->setNoRender(); 
```

实际上 Data.php 中有一个自己创建的函数 getPdf() 用于生成愿望清单项目的 pdf。它通过使用语句生成没有错误的 PDF

```
$pdf->save("hello.pdf"); 
```

但是当我使用以下语句时

```
$pdfString = $pdf->render();
header("Content-Disposition: attachment; filename=myfile.pdf");
header("Content-type: application/x-pdf");
echo $pdfString; 
```

它抛出错误：Adobe 阅读器无法打开 myfile.pdf，因为它不是受支持的文件类型或文件已损坏。现在我需要调用这两行

```
$this->_helper->layout()->disableLayout();   
$this->_helper->viewRenderer->setNoRender(); 
```

在 getPdf() 函数中，它不会在 pdf 文档中添加 html 内容。你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:12:03.537

在 echo 之前`$pdfString`，添加以下代码以禁用视图渲染和布局：

```
$vr = Zend_Controller_Action_HelperBroker::getStaticHelper('viewRenderer');
$vr->setNoRender(true);

$layout = Mage::getSingleton('core/layout');
$layout->disableLayout(); 
```

如果`Mage::getSingleton()`调用没有返回正确的布局对象，您也可以尝试`$layout = $this->getLayout();`

# php - php curl 下载文件并获取头文件

> ID：12210732
> 
> 赞同：0
> 
> 时间：2012-08-31T07:28:22.483
> 
> 标签：php, curl, header, download

我想通过 php 中的 curl 下载文件也得到它的标题。

```
// handler
$h = fopen($filePath , 'w');

// curl
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_TIMEOUT, 5);
curl_setopt($ch, CURLOPT_FILE, $h);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_HEADERFUNCTION, array($this, 'getAllHeaders'));
$a = curl_exec($ch); // return false;
curl_close($ch);
fclose($h);

public function getAllHeaders($ch, $header)
{
    // check for 200 ok
    if (preg_match('/HTTP[\/\.0-9\s\t]+200[\s\t]+OK/i', $header)) {

        // header 200 found
        $this->header200 = true;
    }

    // grab all headers keys and values
    preg_match('/^(?P<key>[a-z0-9\-]+)\:(?P<value>.*)$/i', $header, $matches);

    // cycle
    foreach ($matches as $key => $value) {
        if (!is_numeric($key)) {
            $this->headers[strtolower(trim($key))] = trim($value);
        }
    }

    // headers
    return $this->headers;
} 
```

但我无法获取标题和文件不被下载。我该如何解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T01:40:29.407

以下约束适用于您不满足的 getAllHeaders()：

> 使用此回调函数时必须写入头数据。返回写入的字节数。

来源：[php.net](http://php.net/manual/en/function.curl-setopt.php#refsect1-function.curl-setopt-parameters)

怎么样：

```
public function getAllHeaders($ch, $header)
{
    // store header here (how about storing in a field that is an array of headers?)

    return strlen($header);
} 
```

# reporting - 如何在微策略中查看sql报表的数据库名称

> ID：12210736
> 
> 赞同：0
> 
> 时间：2012-08-31T07:28:44.677
> 
> 标签：reporting, microstrategy

任何人都可以帮助我吗？如何在微策略中查看sql报表的数据库名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T13:14:18.493

在 MicroStrategy Desktop 上，当您右键单击报表并选择“查看 SQL”时，您将看到如下内容：

```
DB User:        db_user_xxx
DB Instance:    db_instance_xxx 
```

如果您随后转到管理 > 配置管理器 > 数据库实例，您可以查看报告中提到的数据库实例。

编辑该对象将允许您查看该数据库实例正在使用的 ODBC 连接。

然后，您只需查看 Intelligence Server 机器上的 ODBC 定义即可获得更多详细信息。

# c# - C# - Base64 编码的 JPEG 到 Base64 编码的 BMP

> ID：12210738
> 
> 赞同：1
> 
> 时间：2012-08-31T07:28:48.383
> 
> 标签：c#, base64

```
byte[] bytes = Convert.FromBase64String(in);
Image image = Image.FromStream(new MemoryStream(bytes));
MemoryStream objMS = new MemoryStream();
image.Save(objMS, System.Drawing.Imaging.ImageFormat.MemoryBmp);
string out = Convert.ToBase64String(objMS.ToArray())
objMS.Close(); 
```

上面的代码失败并显示非常无用的错误消息：

```
'Value cannot be null. Parameter name: encoder' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T07:34:41.453

您不应该使用`ImageFormat.MemoryBmp`，那仅用于表示内存中的位图。没有任何编码器可以将其保存为文件。

使用`ImageFormat.Bmp`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T07:34:33.150

改变

```
image.Save(objMS, System.Drawing.Imaging.ImageFormat.MemoryBmp); 
```

至

```
image.Save(objMS, System.Drawing.Imaging.ImageFormat.Bmp); 
```

*PS：也`string out = ...`应该是`string @out = ...`*（`out`是ac#的关键字）

# javascript - 使用 javascript 验证 Ajax 组合框

> ID：12210743
> 
> 赞同：0
> 
> 时间：2012-08-31T07:28:56.637
> 
> 标签：javascript, asp.net, asp.net-ajax

我在我的代码中使用 ajax 组合框代替下拉列表，现在我想在客户端验证它。我选择使用 javascript 并使用以下代码来验证它：

```
function validateCombobox(){
    var comboboxId = document.getElementById('<%=ComboBox1.ClientID%>');
    if(comboboxId.value=="some value") {
        alert("Error");
    }
} 
```

但我无法验证组合框。

我的html代码是：

```
<asp:ComboBox ID="ComboBox1" runat="server"
    AutoCompleteMode="Suggest" 
    CaseSensitive="false" 
    DropDownStyle="DropDownList">
</asp:ComboBox> 
```

浏览器上 ASP 生成的代码：

```
<div onchange="javascript:setTimeout('__doPostBack(\'ctl00$ctl00$ContentPlaceHolder$ContentPlaceHolder1$unit\',\'\')', 0)"
    id="ctl00_ctl00_ContentPlaceHolder_ContentPlaceHolder1_unit" style="display:inline;">
    <table id="ctl00_ctl00_ContentPlaceHolder_ContentPlaceHolder1_unit_unit_Table"
      class="ajax__combobox_inputcontainer" cellspacing="0" cellpadding="0" border="0"
      style=
      "border-width:0px;border-style:None;border-collapse:collapse;display:inline;position:relative;top:5px;">
        <tr>
            <td class="ajax__combobox_textboxcontainer">
                <input type="text" autocomplete="off" style="width:150px;"
                    name="ctl00$ctl00$ContentPlaceHolder$ContentPlaceHolder1$unit$unit_TextBox"                    
                    id="ctl00_ctl00_ContentPlaceHolder_ContentPlaceHolder1_unit_unit_TextBox" />
            </td>
            <td class="ajax__combobox_buttoncontainer">
                <button type="button" 
                    id="ctl00_ctl00_ContentPlaceHolder_ContentPlaceHolder1_unit_unit_Button">
                </button>
            </td>
        </tr>
    </table>
    <ul id="ctl00_ctl00_ContentPlaceHolder_ContentPlaceHolder1_unit_unit_OptionList"
      class="ajax__combobox_itemlist" style="display:none;visibility:hidden;">
        <li>GM</li>
        <li>KG</li>
    </ul>
    <input type="hidden"  value="0" 
        name="ctl00$ctl00$ContentPlaceHolder$ContentPlaceHolder1$unit$unit_HiddenField"\
        id="ctl00_ctl00_ContentPlaceHolder_ContentPlaceHolder1_unit_unit_HiddenField"/>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:30:19.373

在@Sethu 和@Scott 给出的答案的帮助下得到了解决方案：

我使用以下代码：

```
function validateCombobox(){
    var comboBox = document.getElementById('<%=ComboBox1.ClientID%>_ComboBox1_TextBox');
    if(comboBox.value=="some value")
    {
        alert("Error");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:34:59.990

组合框在客户端创建多个 html。

最初，该值存储在隐藏字段中。

```
function validateCombobox()
{
var comboCotainer= document.getElementById('<%=ComboBox1.ClientID%>');
var hdnField = FindChild(comboCotainer);
if(hdnField != null && hdnField.value == "-1")
{
 alert("Error");
}
}

function FindChild(container) {
        var hiddenControl = null;
        if (container.children && container.children.length > 0) {
            for (var i = 0; i < container.children.length; i++) {
                if (container.children[i].type == "hidden") {
                    hiddenControl = container.children[i];
                    break;
                 }
            }
        }

        return hiddenControl;
    } 
```

位 jquery 将消除 FindChild 功能

如果您使用 Jquery，请使用以下代码

```
function validateCombobox() {
        var selectedVal = $('#<%=ComboBox1.ClientID%> input[type=hidden]').val();
        if (selectedVal == "-1") {
            alert("Error");
        }
    } 
```

隐藏控件保存所选项目的索引，因此检查 -1 或非负值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T15:59:37.730

尝试这个。

```
function validateCombobox(){
    var comboboxObject = document.getElementById('<%=ComboBox1.ClientID%>');
    var inputs = comboboxObject.getElementsByTagName('input');
    for (i = 0; i < inputs.length; i++) {
        if (inputs[i].type == 'text' && inputs[i].value == "some value") {
            alert("Error");
            break; //why loop further?
        }
    }
} 
```

# android - Droid VNC 是如何工作的？

> ID：12210748
> 
> 赞同：4
> 
> 时间：2012-08-31T07:29:27.557
> 
> 标签：android, vnc, vnc-server, vnc-viewer

我已经在我的平板电脑上安装了[Droid VNC Server 。](https://play.google.com/store/apps/details?id=org.onaips.vnc&feature=search_result#?t=W251bGwsMSwxLDEsIm9yZy5vbmFpcHMudm5jIl0.)我还在[http://github.com/oNaiPs/droid-VNC-server](http://github.com/oNaiPs/droid-VNC-server)上检查了它的源代码，但我没有找到任何代码行来捕获屏幕并上传到查看器。那么它是怎样工作的？它如何捕获 Droid 的屏幕？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-06T10:34:04.923

它有 3 种模式可以尝试阅读您的屏幕：

1.  帧缓冲区
2.  SurfaceFlinger
3.  格拉洛克

我只在 Android x86 上尝试过，并且只让帧缓冲模式工作。假设 2\. 和 3\. 如果你在 ARM 上工作得更好。基本上，它所做的就是直接读取帧缓冲设备（/dev/graphics/fb0，就像 Linux 上一样）。通过阅读，我的意思是它需要一系列屏幕“快照”并将它们发送到 VNC 客户端，因为它请求屏幕更新。帧缓冲设备是 Android 写入屏幕内容的层，然后通过图形管道将其传递到硬件（图形显示芯片 -> 屏幕）。将帧缓冲区想象成视频中的帧，一系列帧构成视频，帧缓冲区代表屏幕实际动态变化的内容。

关于输入 Droid VNC 服务器通过网络接收指针和键事件，对其进行处理，然后将它们发送到 /dev/input 设备，然后由 Android 处理，就好像它们是本地键盘或鼠标输入一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T07:34:34.670

查看[jni/vnc/ 文件夹](https://github.com/oNaiPs/droid-VNC-server/tree/master/jni/vnc)。对我来说，当然看起来像一个 VNC 服务器。

# ruby - 配置思考狮身人面像和飞行狮身人面像时出错

> ID：12210751
> 
> 赞同：11
> 
> 时间：2012-08-31T07:29:43.407
> 
> 标签：ruby, ruby-on-rails-3, sphinx, thinking-sphinx

我在 Heroku 上运行 Rails 3 应用程序。我在`Thinking Sphinx`我的应用程序中使用搜索引擎。为了使它与 Heroku 一起工作，我`flying-sphinx`按照 Heroku 文档中的建议在我的 gemfile 中添加了一个 gem。

这就是我的 gemfile 中的内容

```
gem 'thinking-sphinx', '2.0.11' 
gem 'flying-sphinx',   '0.7.0' 
```

按照这里提到的步骤[https://devcenter.heroku.com/articles/flying_sphinx](https://devcenter.heroku.com/articles/flying_sphinx)，添加飞行狮身人面像插件（Heroku 插件：添加飞行狮身人面像：木）后，当我运行 heroku 运行飞行狮身人面像配置我得到以下错误：

```
 /app/vendor/bundle/ruby/1.9.1/gems/flying-sphinx-0.8.0/lib/flying_sphinx/sphinx_configuration.rb:2:in 'initialize': uninitialized constant FlyingSphinx::SphinxConfiguration::ThinkingSphinx (NameError)
    from /app/vendor/bundle/ruby/1.9.1/gems/flying-sphinx-0.8.0/lib/flying_sphinx/cli.rb:31:in 'new'
    from /app/vendor/bundle/ruby/1.9.1/gems/flying-sphinx-0.8.0/lib/flying_sphinx/cli.rb:31:in 'configure'
    from /app/vendor/bundle/ruby/1.9.1/gems/flying-sphinx-0.8.0/lib/flying_sphinx/cli.rb:20:in 'block in run'
    from /app/vendor/bundle/ruby/1.9.1/gems/flying-sphinx-0.8.0/lib/flying_sphinx/cli.rb:20:in 'each'
    from /app/vendor/bundle/ruby/1.9.1/gems/flying-sphinx-0.8.0/lib/flying_sphinx/cli.rb:20:in 'all?'
    from /app/vendor/bundle/ruby/1.9.1/gems/flying-sphinx-0.8.0/lib/flying_sphinx/cli.rb:20:in 'run'
    from /app/vendor/bundle/ruby/1.9.1/gems/flying-sphinx-0.8.0/bin/flying-sphinx:5:in ''
    from vendor/bundle/ruby/1.9.1/bin/flying-sphinx:19:in 'load'
    from vendor/bundle/ruby/1.9.1/bin/flying-sphinx:19:in '' 
```

而且我无法继续进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T01:16:52.330

只是为了回答最初的问题 - 通过堆栈跟踪，如果看起来你正在使用 fly-sphinx 0.8.0 - 这绝对是错误的，因此是更新的版本。希望您听从了 Bert 的建议并尝试了 0.8.5（0.7.1 是 Rails 2.3 的最新版本）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-16T23:59:33.443

我为 rails 3 设置的 Gemfile 设置：

```
gem 'thinking-sphinx', "~> 2.0.10", require: 'thinking_sphinx'
gem 'flying-sphinx',   '0.8.4' 
```

或者

```
# sphinx 
gem 'thinking-sphinx', '3.0.3'
gem 'flying-sphinx', '1.0.0' 
```

# extjs - 如何在 ExtJs 中获取组合框的 valueField 值

> ID：12210752
> 
> 赞同：1
> 
> 时间：2012-08-31T07:29:45.477
> 
> 标签：extjs, extjs4

我在 Extjs 中创建了一个组合框，其中显示了报告的名称，当用户选择任何报告时，应该在后端发布报告的 id。我无法获得报告的 ID。我正在使用商店在组合框中填充数据。

我在 Extjs 中创建了一个模型，例如

```
Ext.define('Report', {
    extend: 'Ext.data.Model',
    fields: [
        {name: 'ReportId', type: 'int'},
        {name: 'DisplayName',  type: 'string'}
    ]
}); 
```

商店就像

```
 var reportStore = Ext.create('Ext.data.Store', {
    model: 'Report',
    autoLoad: true,
    proxy: {
        type: 'ajax',
        url: 'reportlist.json'
}); 
```

像组合框

```
var comboReports = Ext.create('Ext.form.field.ComboBox', {
    displayField: 'DisplayName',
   valueField: 'ReportId',
   fieldLabel: 'Report',
    store: reportStore,
    queryMode: 'local',
    emptyText: 'Select a report',
    selectOnFocus: true,
    listeners: {
            select: function(combo, selection) {
                if (combo.getValue()) {
        //showData(reportId); here i want the id of seleted report to passed.

                }
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T07:49:57.313

实际`combo.getValue()`返回选中项的reportId。 `showData(combo.getValue());`是你需要的。

# sql - 查询性能良好的放松条件？

> ID：12210754
> 
> 赞同：0
> 
> 时间：2012-08-31T07:29:57.727
> 
> 标签：sql, search, plsql

我有这样的代码：

```
Search(for 'this' using 'a','b','c','d')
if result is not found
    search(for 'this' using null,'b','c','d')
    if result is not found
      ...
      if result is not found
           search(for 'this' using null,null,null,null)
 ...
return 
```

它是递归调用自身但参数较少的存储过程。函数内部是一个基于参数生成的动态查询（一些参数涉及加入另一个表，一些只是 where 子句中的附加条件）

有人告诉我，这会浪费性能，因为它需要一次又一次地重新搜索整个表。

我有这样的想法，如果我们先搜索所有内容，然后从该结果开始过滤它。可能会更好。

我可以做些什么来改进代码？有没有办法通过普通查询获得相同的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:42:01.867

您也许可以使用 UNION，如下所示：

```
SELECT * FROM TABLE
  WHERE COL1='A'     AND COL2='B' AND COL3 = 'C' AND COL4 = 'D'
UNION ALL
SELECT * FROM TABLE
  WHERE COL1 IS NULL AND COL2='B' AND COL3 = 'C' AND COL4 = 'D'
UNION ALL
SELECT * FROM TABLE
  WHERE COL1 IS NULL AND COL2 IS NULL AND COL3 = 'C' AND COL4 = 'D'
UNION ALL
SELECT * FROM TABLE
  WHERE COL1 IS NULL AND COL2 IS NULL AND COL3 IS NULL AND COL4 = 'D'
UNION ALL
SELECT * FROM TABLE
  WHERE COL1 IS NULL AND COL2 IS NULL AND COL3 IS NULL AND COL4 IS NULL 
```

分享和享受。

# java - JFreeChart，如何重新调整 y 轴

> ID：12210755
> 
> 赞同：0
> 
> 时间：2012-08-31T07:29:58.880
> 
> 标签：java, jfreechart

我想重新调整图表，但我真的不知道该怎么做。我设置为缩放，但它正在解决我的问题。
事实上，绘图上的数据以小数据显示。
代码如下所示：

```
public class DrawChart {

private static final Random random = new Random();
RefreshGraph refresh;

public DrawChart(JPanel panel){
    this.refresh = new RefreshGraph();
    this.displayChart (panel);
}

private void displayChart(JPanel jpanel){
    final DefaultCategoryDataset dataset = new DefaultCategoryDataset();

    Timer timer = new Timer(1000, new ActionListener(){
        @Override
        public void actionPerformed(ActionEvent e){
            refresh.getRefresh (dataset);
        }
    });
    timer.start ();

    JFreeChart chart = createChart(dataset);

    ChartPanel panel=new ChartPanel(chart);
    panel.setPreferredSize (new Dimension(700,300));
    jpanel.setLayout(new java.awt.BorderLayout());
    jpanel.add (panel, BorderLayout.CENTER);
    jpanel.setVisible(true);
}

private JFreeChart createChart(final CategoryDataset dataset){
    final JFreeChart result = ChartFactory.createLineChart ("", null, null, dataset, PlotOrientation.VERTICAL, true, true, false);

    //Set the background color for the chart
    result.setBackgroundPaint (Color.white);

    //get the plot for customization
    final CategoryPlot plot = result.getCategoryPlot ();
    plot.setBackgroundPaint(Color.lightGray);
    plot.setDomainGridlinePaint(Color.white);
    plot.setRangeGridlinePaint(Color.white);
    plot.zoom (0.5);

    CategoryAxis domainAxis = plot.getDomainAxis ();
    final IntervalMarker target = new IntervalMarker(0.25, 1.0);

    //This thread will read the tempory file every minutes and refresh the graph
    Timer timer = new Timer(5000, new ActionListener(){
        public void actionPerformed(ActionEvent e){
            boolean eof_=false;
            try{
                File labelingraph = new File(System.getProperty("user.dir")+"\\period.in");
                if(labelingraph.exists ()){
                    BufferedReader readPeriod = new BufferedReader(new FileReader(labelingraph));
                    while(eof_!=true){
                        String _line = readPeriod.readLine ();
                        if(_line!=null){
                            target.setLabel("Period : "+_line);
                        }else{eof_=true;}
                    }
                }
            }
            catch(IOException io){System.out.println ("Error while accessing the file : "+io.getMessage());}
        }
    });
    timer.start ();

    target.setLabelFont(new Font("SansSerif", Font.ITALIC, 11));
    target.setLabelAnchor(RectangleAnchor.LEFT);
    target.setLabelTextAnchor(TextAnchor.CENTER_LEFT);
    target.setPaint(new Color(222, 222, 255, 128));
    plot.addRangeMarker(target, Layer.BACKGROUND);

    return result;
}} 
```

缩放仅缩小 y 轴值，折线图本身保持稳定。
如何重新调整图表以使其具有良好的可见性？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:52:26.500

我通过使用这些代码行解决了这个问题

```
NumberAxis rangeAxis = (NumberAxis) plot.getRangeAxis();
rangeAxis.setRange (1.200, 1.320);
rangeAxis.setStandardTickUnits(NumberAxis.createStandardTickUnits ());
rangeAxis.setTickUnit (new NumberTickUnit(0.005, df, 0)); 
```

尤其是最后一行。

谢谢大家

# php - 警告：无法修改标头信息 - 已为 php 301 重定向发送的标头

> ID：12210759
> 
> 赞同：-1
> 
> 时间：2012-08-31T07:30:12.483
> 
> 标签：php

我已经从 php 创建了 301 重定向。以下是我重定向网址的代码。

```
$current_url = substr($redirect_url, 11);
$sqlr = "SELECT old_url, new_url FROM cscart_301_redirection WHERE old_url  = '$current_url' ";
$resultr = mysql_query($sqlr);
$rowr = mysql_fetch_array($resultr);
$newurl = $rowr['new_url'];

if(mysql_num_rows($resultr)>0)
{
    header ('HTTP/1.1 301 Moved Permanently');
    header ('Location: '.$host.$newurl);
} 
```

但是当代码在实时服务器上运行时，我得到了

警告：无法修改标头信息 - 此错误已发送标头。请让我知道我在哪里做错了？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T07:48:04.223

`<?php . . . ?>`“标头已发送”错误通常是由于 PHP 开始和结束标记 ( )前后有空格引起的

`ob_start()`通过编写您的 if 条件来尝试以下代码。[ob_start() 方法](http://php.net/manual/en/function.ob-start.php)将打开输出缓冲。当输出缓冲处于活动状态时，不会从脚本发送输出（除了标题），而是将输出存储在内部缓冲区中。

```
$current_url = substr($redirect_url, 11);
$sqlr = "SELECT old_url, new_url FROM cscart_301_redirection WHERE old_url  = '$current_url' ";
$resultr = mysql_query($sqlr);
$rowr = mysql_fetch_array($resultr);
$newurl = $rowr['new_url'];

if(mysql_num_rows($resultr)>0)
{
    ob_start();
    header ('HTTP/1.1 301 Moved Permanently');
    header ('Location: '.$host.$newurl);
    die;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-31T07:48:53.877

> 警告：无法修改标头信息 - 标头已由（**输出开始于**/home/indianet/public_html/var/compiled/customer/%%45^45E^45E480CD%%index.tpl.ph‌​p: **9**）在 /home /indianet/public_html/var/compiled/customer/%%FD^FD1^FD153A02%%top.tpl.php**在第 32 行**

在执行 top.tpl.php 中第 32 行的标头函数之前，脚本输出中的第 9 行`%%45^45E^45E480CD%%index.tpl.ph‌​p`被发送到客户端。

http响应看起来像

```
header1
header2
header3
<--empty line-->
body
body
body 
```

即，一旦将内容发送到客户端，php 将发送所有标头以及“空行”，并且无法返回标头部分（您不能“撤消”将响应标头与响应分开的空行正文一旦发送给客户端）。您需要[输出缓冲](http://docs.php.net/ref.outcontrol)，即 php 尽可能长时间地保留响应的内容/正文。或者 - 更可取的 - 以某种方式构建您的脚本，即在生成输出之前处理标头。在重定向的情况下，无论如何说“您在 url 找到内容，但是嘿，这是内容”并没有多大意义。

# clojure - 如何将向量转换为记录？

> ID：12210761
> 
> 赞同：6
> 
> 时间：2012-08-31T07:30:13.457
> 
> 标签：clojure

例如，如果我有：

```
(defrecord Item [name cost]) 
```

我怎么能转换`["ball" 10]`成`{:name "ball", :cost 10}`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-31T07:36:27.460

```
user=> (defrecord Item [name cost])
user=> (apply ->Item ["ball" 10])
#user.Item{:name "ball", :cost 10} 
```

简短解释发生了什么。`(->Item "ball" 10)`是从给定参数创建记录的语法之一。它与 相同`(Item. "ball" 10)`。在您的情况下，您有参数向量，因此我们`(apply fn args-vector)`用来处理。

# asp.net - 如何用 mvc4 actionlink 列表替换列表

> ID：12210763
> 
> 赞同：0
> 
> 时间：2012-08-31T07:30:21.673
> 
> 标签：asp.net, html, css, razor, asp.net-mvc-4

工作正常：

```
<li class="rtsLI" id="Summary">
    <a href="javascript:void(0);"            
       onclick="javascript:rtsTestContainerTabsManager.OnClientTabSelected(this, 0);" 
       class="rtsLink">
           <span class="rtsTxt">Test</span>
    </a>
</li> 
```

想用 Actionlink 替换上面的代码：（**CSS在这里不起作用**..）

```
<li class="rtsLI" >
    @Html.ActionLink("Controller1", "Index", 
                     new { Area = "Area1", Controller = "Controller1" }, 
                     new { @class = "rtsLink rtsTxt" })
</li> 
```

我的问题是当我使用**Actionlink**时无法**识别****CSS**。我使用了单个 CSS 属性。然后它也不起作用。

 ****请给我一个解决方案。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:34:35.440

因为您想将标签包装在锚标签中，据我所知这不适用于`@Html.ActionLink()`. 例如，如果您尝试这样做：

```
@Html.ActionLink("<span class='rtsTxt'>User Security</span>", "Index", 
                 new { Area = "Tools", Controller = "UserSecurity" }, 
                 new { @class = "rtsLink" }) 
```

不管用。

使用 Url.Action 辅助方法作为解决方法（以防没有其他答案更适合您的需求）。

例如，可以在您的视图中标记以下内容：

```
<a href="@Url.Action("Index",  
                 new { Area = "Tools", Controller = "UserSecurity" })" class="rtsLink" onclick="javascript:rtsMemoTextMenuContainerTabsManager.OnClientTabSelected(this, 0);">
   <span class="rtsTxt">User Security</span>
</a> 
```****

# uiview - loading multiple UIViews into UIScrollView dynamically

> ID：12210773
> 
> 赞同：0
> 
> 时间：2012-08-31T07:30:56.963
> 
> 标签：uiview, uiscrollview

I'm trying to load mutiple `UIViews` into `UIScrollView` dynamically - just like posts on facebook. But I don't quite understand how you position the `UIViews` dynamically one after another. Can someone provide me some advice?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T12:15:28.827

我在网上某处找到了一种循环方法。想感谢消息来源，但我忘记了从哪里得到的：

```
- (void)constructPosts:(NSArray*)listOfItems
{
    [scrollView setContentSize:CGSizeMake(self.view.frame.size.width, scrollView.frame.size.height*[listOfItems count])];
    CGRect frame = CGRectMake(10, 10, 300, 200);
    for (int i = 0; i < [listOfItems count]; i++)
    {
        UIView *aView = [[UIView alloc] init];
        UILabel *test = [[UILabel alloc] initWithFrame:CGRectMake(0, 20, 100, 20)];
        [test setUserInteractionEnabled:YES];
        test.text = [NSString stringWithFormat:@"%@",[listOfItems objectAtIndex:i]];
        NSLog(@"setting up gestures");

        [aView addSubview:test];

        [aView setBackgroundColor:[UIColor grayColor]];
        frame.origin.y=((frame.size.width+5)*i+5 + (i/3) * 5);
        aView.frame = frame;
        [scrollView addSubview:aView];
    }

} 
```

# android - 访问 /dev/mem 和 /dev/kmem 的问题

> ID：12210774
> 
> 赞同：3
> 
> 时间：2012-08-31T07:30:57.693
> 
> 标签：android, linux, linux-kernel

我有 Android 2.3.7 (Cyanogen mod)，我的设备上不存在 2 个节点 /dev/mem 和 /dev/kmem。我尝试了以下两个命令来创建节点：

```
# mknod /dev/mem c 1 1
# chown root.mem /dev/mem

# mknod /dev/kmem c 1 2
# chown root.kmem /dev/kmem 
```

但我得到了错误：`chown: unknown user/group root:mem`

似乎我可以创建节点，但我无法将它们与 mem 和 kmem 绑定。请给我一些建议。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:14:39.537

您可能会看到几个单独的问题：

1.  您正在使用的 Android 安装没有现有的用户组`mem`并`kmem`用于控制对这些设备的访问。只需使用现有组...

2.  `/dev/kmem`很可能会被[禁用](http://cateee.net/lkddb/web-lkddb/DEVKMEM.html)——在这种情况下，创建设备节点将无济于事。

3.  我希望*至少*`/dev/mem`被[过滤](http://cateee.net/lkddb/web-lkddb/STRICT_DEVMEM.html)，如果不是通过一些补丁完全禁用的话。

 *为什么需要使用这些虚拟设备中的任何一个？*

# php - Sphinx 多动态数据库索引

> ID：12210776
> 
> 赞同：3
> 
> 时间：2012-08-31T07:31:05.867
> 
> 标签：php, mysql, database, sphinx

在我的情况下，我有一个包含多个数据库的 Web 应用程序；每个注册客户一个数据库。由于这些数据库是在用户注册时创建的，因此我无法手动将这些源添加到 sphinx 配置中。但是所有数据库都具有相同的结构，搜索查询也相同；当然只是不同的数据库名称和数据。所以，问题是；可以将 sphinx 配置为从例如 ini 或其他外部文件中获取数据库列表，然后为这些数据库创建索引吗？那么，我可以在查询中传递数据库名称以从指定的数据库索引中获取结果吗？还是有其他工具，解决我的问题的其他方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T07:42:11.060

*sphinx.conf*文件有一个技巧。如果它是可执行的，Sphinx 会尝试执行它并接受它的输出作为配置。例如，您可以将多个配置文件合并为一个：

```
#!/bin/bash
# Sphinx configuration
cat /usr/local/etc/sphinx.d/*.conf 
```

你可以使用这个技巧来构建一个索引所有数据库的配置。

# multithreading - Runtime.getRuntime().availableProcessors() 不返回可用内核

> ID：12210778
> 
> 赞同：3
> 
> 时间：2012-08-31T07:31:09.033
> 
> 标签：multithreading, jvm, cpu, core

我们有一台带有 4 个 Intel Xeon E7 4850 处理器（NUMA 节点）的高端服务器机器，每个处理器有 10 个内核和 2 个线程。所以实际上我们有 80 个核心的机器。（Windows 任务管理器显示 80 个内核）现在我的问题是当我执行 Runtime.getRuntime().availableProcessors() 时它返回 40，所以我的应用程序只产生 40 个线程。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T15:51:50.377

除非您使用的 Windows 2003 存在错误：*“Windows Server 2003 中错误地报告了启用物理超线程的处理器的数量或物理多核处理器的数量”* ...

...如果启用了超线程，则“40 个核心”的计数是错误的结果，这似乎是因为 Windows 报告了正确数量的逻辑 CPU 核心。

如果 Java 修复不可用，那么您可以使用 JNI[调用 GetLogicalProcessorInformation() Windows API 调用](http://msdn.microsoft.com/en-us/library/ms683194.aspx)（包括源代码，适用于 XP SP3 和更新版本）。

# selenium - Selenium Java Code (TestNG framework) for Bold appearance of text shown on webpage

> ID：12210779
> 
> 赞同：0
> 
> 时间：2012-08-31T07:31:08.443
> 
> 标签：selenium, selenium-rc

Can anyone provide me the Selenium Java Code (TestNG framework) for Bold appearance of text shown on a webpage .I am using Selenium RC to execute my testcases ,and i use Eclipse for selenium testscript preparation in java.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:31:01.383

此代码列出了当前页面中所有带有粗体文本的元素。（代码假定 WebDriver 被定义为“驱动程序”。）

```
List<WebElement> temps =  driver.findElements( By.cssSelector("*") );
for( int i=0; i<temps.size(); i++ ) {
  if( temps.get(i).getCssValue("font-weight").equals( Integer.toString(700) ) ) {
    System.out.println(temps.get(i).getText());
  }
} 
```

# ios - I dont have ios as an option in Titanium Appcelarator configure dashboard

> ID：12210783
> 
> 赞同：1
> 
> 时间：2012-08-31T07:31:23.280
> 
> 标签：ios, titanium, appcelerator, dashboard

I have Titanium Appcelerator installed in my Windows xp pc. Also i have Android SDK in my machine. But i dont find IOS as an option in Titanium Dashboard. What may be the reasons and how do i overcome it?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T11:33:02.773

iOS 开发需要 xCode 和 iOS SDK。由于 Apple 的规定，这些只能安装在 Apple OS (OSX) 上。

可能的解决方案：

1.  购买安装了 Apple 操作系统的 Apple 硬件
2.  使用已安装的 Apple 操作系统虚拟化硬件
3.  通过 macincloud.com 等服务租用时间

# browser - Set Value of a TextArea inside a WebBrowser Control (C# )

> ID：12210789
> 
> 赞同：1
> 
> 时间：2012-08-31T07:31:42.500
> 
> 标签：browser, textarea, set

```
textarea dir="ltr" tabindex="-1" role="textbox" aria-label="Rich text editor, vB_Editor_001_editor, press ALT 0 for help." class="cke_source cke_enable_context_menu" style="width: 100%; height: 100%; min-width: 100%; max-width: 100%; resize: none; outline: none; text-align: left; 
```

This is the textarea. I want to send value there but. There isnt name or id. I couldnt send value.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T02:39:46.937

使用 WebBrowser HtmlDocument [GetElementsByTagName](http://msdn.microsoft.com/en-us/library/system.windows.forms.htmldocument.getelementsbytagname.aspx)函数

```
var elements = WebBrowser1.Document.GetElementsByTagName("textarea");
foreach (HtmlElement element in elements)
{
     if (element.InnerHTML.Contains("Rich text editor"))
     {
          // do something
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T02:46:15.830

是否可以简单地设置 id，然后给它一个*runat="server"*属性，或者是什么阻止你这样做？

**标记：**

```
<textarea id="myTextArea" runat="server" tabindex="-1" role="textbox" 
aria-label="Rich text editor, vB_Editor_001_editor, press ALT 0 for help."
class="cke_source cke_enable_context_menu" 
style="width: 100%; height: 100%; min-width: 100%; max-width: 100%; resize: none; outline: none; text-align: left;"> 
```

**C#代码：**

```
myTextArea.Value = "This is the inner value"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T15:20:08.817

```
const string textUWantToInput = "Inputed text";
var input = webBrowser1.Document.GetElementsByTagName("textarea");
input[0].SetAttribute("value", textUWantToInput); 
```

# c# - QueryOver filtering on collection of strings: NullReferenceException

> ID：12210791
> 
> 赞同：1
> 
> 时间：2012-08-31T07:31:48.787
> 
> 标签：c#, nhibernate, queryover

I have items. Each item belongs to a group. And each item owns a (possibly empty) list of tags (strings) useful for boosting text search. The search should find items matching their description, description of the group they belong to or one or more tags (all in OR conditions).

I'm trying to select items by a search key through the following QueryOver.

```
Item i = null;
ItemGroup g = null;
String tag = null;

session
    .QueryOver<Item>(() => i)
    .JoinAlias(x => x.Group, () => g, JoinType.InnerJoin)
    .JoinAlias(x => x.Tags, () => tag, JoinType.LeftOuterJoin) //left outher join because it is possible for an item to have no tags at all.
    .Where(
        new Disjunction()
            .Add(Restrictions.On(() => p.Description).IsInsensitiveLike(searchKey, MatchMode.Anywhere))
            .Add(Restrictions.On(() => g.Description).IsInsensitiveLike(searchKey, MatchMode.Start))
            .Add(Restrictions.On(() => tag).IsInsensitiveLike(searchKey, MatchMode.Start)) //this condition throws an exception
    )
    .Take(maxResults)
    .Future(); 
```

Item class is mapped as follows:

```
<class name="Item" table="Items">
<id name="Id">
    <generator class="guid.comb" />
</id>

    <natural-id>
        <property name="Code" not-null="true" />
    </natural-id>
    <property name="Description" not-null="true" />
    <many-to-one name="Group" column="ID_Group" not-null="true" fetch="join" />
    <property name="ExpiryDate" />
    <list name="Tags" table="Items_Tags">
        <key column="ID_Item" />
        <index column="Idx" />
        <element column="Tag" />
    </list>
</class> 
```

Query execution throws a NullReferenceException. Removing the last condition in the disjunction the exception is not thrown.

I didn't get rid of this without using magic strings.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:34:47.383

使用这个，如果我误解了请纠正我

```
session
    .QueryOver<Item>(() => i)
    .JoinAlias(x => x.Group, () => g, JoinType.InnerJoin)
    .JoinAlias(x => x.Tags, () => tag, JoinType.LeftOuterJoin) //left outher join because it is possible for an item to have no tags at all.
    .Where(
        new Disjunction()
            .Add(Restrictions.On(() => p.Description).IsInsensitiveLike(searchKey, MatchMode.Anywhere))
            .Add(Restrictions.On(() => g.Description).IsInsensitiveLike(searchKey, MatchMode.Start))
            .Add(Restrictions.On(() => tag.Tag).IsInsensitiveLike(searchKey, MatchMode.Start)) //this condition throws an exception
    )
    .Take(maxResults)
    .Future(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T15:40:21.297

我最近没有检查过，但据我所知 NHibernate 不支持直接使用 QueryOver 或 Criteria API 查询值集合。

我建议您最好的解决方法是使用 SQLCriteria：

```
 var tagCriteria = new SQLCriterion(
            new SqlString("{alias}.Id IN (SELECT ID_Item FROM Items_Tags WHERE Tag LIKE ?)"),
            new[] {searchKey + "%"},
            new[] {NHibernateUtil.String}
            );

        session
            .QueryOver<Item>(() => i)
            .JoinAlias(x => x.Group, () => g, JoinType.InnerJoin)
            .Where(
                new Disjunction()
                    .Add(Restrictions.On(() => p.Description).IsInsensitiveLike(searchKey, MatchMode.Anywhere))
                    .Add(Restrictions.On(() => g.Description).IsInsensitiveLike(searchKey, MatchMode.Start))
                    .Add(tagCriteria)
            )
            .Take(maxResults)
            .Future(); 
```

# android - 我的第一个 Android 应用程序的输出未显示

> ID：12210797
> 
> 赞同：0
> 
> 时间：2012-08-31T07:32:23.137
> 
> 标签：android

我是 Android 的初学者，正在尝试运行 Hello World，但是当 Emulator 出现时，只显示 Android 图像。我的输出“Hello World”从未出现。

**`MainActivity.class`**

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        TextView text = new TextView(this);
        text.setText("Hello World, Android");
        setContentView(text);
       // setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

当模拟器弹出时，我可以等待 5-10 分钟，但输出永远不会出现。我没有更改任何 XML 文件中的任何内容。我正在尝试测试“hello world”程序。

我正在使用 Eclipse。

## 编辑

**`activity_main.xml`**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world"
        tools:context=".MainActivity" />

</RelativeLayout> 
```

**`androidManifest.XML`**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.myfirstapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T07:35:06.400

你把你的添加`Activity`到`AndroidManifest`文件中了吗？

**例子**

```
<application android:label="@string/app_name"
    android:icon="@drawable/ic_launcher">
    <activity android:name=".YourActivity">
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

**更新**

改变

```
setContentView(text) 
```

到

```
setContentView(R.layout.activity_main) 
```

这意味着您将使用预定义的 XML 文件作为此`Activity`.

如果要更改 xml 中的 TextView：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // find the TextView in the XML file defined by setContentView
    TextView text = (TextView) findViewById(R.id.mTextView);
    text.setText("Your text");
} 
```

不要忘记将属性 `android:id="@+id/mTextView" 添加到 XML 中的 TextView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:38:26.227

您必须编辑 manifest.xml：

```
<application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".MainActivity"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T07:54:09.143

我建议您“改进”您的 MainActivity：

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);  //The XML where the text view is
        TextView text = (TextView) findViewById(R.id.TEXTVIEWID); // The id of the text view
        text.setText("Hello World, Android");

    }
} 
```

那么xml应该是：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/TEXTVIEWID"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true" />

</RelativeLayout> 
```

对于基础知识，您可以按照[本](http://androidcodemonkey.blogspot.ch/2010/01/hello-world-your-first-android.html)教程进行操作！

# c# - 传递选择器函数时，OrderBy 未翻译成 SQL

> ID：12210799
> 
> 赞同：2
> 
> 时间：2012-08-31T07:32:27.833
> 
> 标签：c#, entity-framework, linq-to-entities, sql-order-by, sql-server-profiler

当我执行时：

```
var t = db.Table1.OrderBy(x => x.Name).ToList(); 
```

在 SQL 探查器中，这是翻译后的 SQL：

```
SELECT 
[Extent1].[ID] AS [ID], 
[Extent1].[Name] AS [Name]
FROM [dbo].[Table1] AS [Extent1]
ORDER BY [Extent1].[Name] ASC 
```

哪个是对的。

但是，如果我将选择器函数传递给 OrderBy：

```
Func<Table1, string> f = x => x.Name;
var t = db.Table1.OrderBy(f).ToList(); 
```

翻译后的 SQL 为：

```
SELECT 
[Extent1].[ID] AS [ID], 
[Extent1].[Name] AS [Name]
FROM [dbo].[Table1] AS [Extent1] 
```

orderby 完全没有翻译。

有什么问题？它们是相同的 lambda 函数，唯一的区别是在第二种情况下，它首先分配给一个变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T11:11:36.217

因为在 IQueryable 世界中，您需要一个`Expression<Func<TModel, TValue>>`作为 OrderBy 的扩展参数，而不是`Func<TModel, TValue>`

[http://msdn.microsoft.com/en-us/library/system.linq.queryable.orderby](http://msdn.microsoft.com/en-us/library/system.linq.queryable.orderby)

# vb.net - .NET: What is making my Form resize on Show()

> ID：12210800
> 
> 赞同：1
> 
> 时间：2012-08-31T07:32:28.070
> 
> 标签：vb.net, winforms

Before showing a form my code adjusts its size, but after calling its Show() method it has a size that is neither the one it's initialized to in ...Designer.vb nor the one I just set it to.

I set a breakpoint in its Resize() handler, and the chain of calls from Show() to Resize() looks like this:

```
MyApp.exe!MyApp.SearchListForm.frmSearchList_Resize(Object eventSender, System.EventArgs eventArgs) Line 2256   Basic
System.Windows.Forms.dll!System.Windows.Forms.Control.OnResize(System.EventArgs e) + 0xbb bytes 
System.Windows.Forms.dll!System.Windows.Forms.Form.OnResize(System.EventArgs e) + 0xd bytes 
System.Windows.Forms.dll!System.Windows.Forms.Control.OnSizeChanged(System.EventArgs e) + 0x29 bytes    
System.Windows.Forms.dll!System.Windows.Forms.Control.UpdateBounds(int x, int y, int width, int height, int clientWidth, int clientHeight) + 0x9c bytes 
System.Windows.Forms.dll!System.Windows.Forms.Control.UpdateBounds() + 0xd1 bytes   
System.Windows.Forms.dll!System.Windows.Forms.Control.WmCreate(ref System.Windows.Forms.Message m) + 0x29 bytes 
System.Windows.Forms.dll!System.Windows.Forms.Control.WndProc(ref System.Windows.Forms.Message m) + 0x2e7 bytes 
System.Windows.Forms.dll!System.Windows.Forms.ScrollableControl.WndProc(ref System.Windows.Forms.Message m) + 0x2a bytes    
System.Windows.Forms.dll!System.Windows.Forms.ContainerControl.WndProc(ref System.Windows.Forms.Message m) + 0x10 bytes 
System.Windows.Forms.dll!System.Windows.Forms.Form.WmCreate(ref System.Windows.Forms.Message m) + 0xe bytes 
System.Windows.Forms.dll!System.Windows.Forms.Form.WndProc(ref System.Windows.Forms.Message m) + 0x193 bytes    
System.Windows.Forms.dll!System.Windows.Forms.Control.ControlNativeWindow.OnMessage(ref System.Windows.Forms.Message m) + 0x10 bytes    
System.Windows.Forms.dll!System.Windows.Forms.Control.ControlNativeWindow.WndProc(ref System.Windows.Forms.Message m) + 0x31 bytes  
System.Windows.Forms.dll!System.Windows.Forms.NativeWindow.DebuggableCallback(System.IntPtr hWnd, int msg, System.IntPtr wparam, System.IntPtr lparam) + 0x57 bytes 
[Native to Managed Transition]  
[Managed to Native Transition]  
System.Windows.Forms.dll!System.Windows.Forms.UnsafeNativeMethods.CreateWindowEx(int dwExStyle, string lpszClassName, string lpszWindowName, int style, int x, int y, int width, int height, System.Runtime.InteropServices.HandleRef hWndParent, System.Runtime.InteropServices.HandleRef hMenu, System.Runtime.InteropServices.HandleRef hInst, object pvParam) + 0x3c bytes  
System.Windows.Forms.dll!System.Windows.Forms.NativeWindow.CreateHandle(System.Windows.Forms.CreateParams cp) + 0x225 bytes 
System.Windows.Forms.dll!System.Windows.Forms.Control.CreateHandle() + 0x125 bytes  
System.Windows.Forms.dll!System.Windows.Forms.Form.CreateHandle() + 0x9f bytes  
System.Windows.Forms.dll!System.Windows.Forms.Control.Handle.get() + 0x45 bytes 
System.Windows.Forms.dll!System.Windows.Forms.Form.SetVisibleCore(bool value) + 0x160 bytes 
System.Windows.Forms.dll!System.Windows.Forms.Control.Show() + 0x10 bytes 
```

I'm assuming there's some component with a Location and Size that force the Form to shape itself to their needs, but I can't really tell from the stack trace and I don't know how to find out what the cause is.

Any suggestions?

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T18:31:02.497

您的 AutoScaleMode 设置为默认值，`Font`并且您分配了比 Windows 默认值更大（或更小）的字体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-22T20:38:58.730

我怀疑您的表单的初始大小很小 - 这将导致您看到的行为。如果是这样，请为您的表单指定一个与初始大小相等的 MinimumSize（0,0 除外）。如果您没有提供最小尺寸，则在调用 GetClientRect() 和 GetWindowRect() 时（在调用 UpdateBounds() 期间），根据您的环境，似乎为您计算了一个最小尺寸。对我来说，这是 113x28。

# jsp - JavaBean 值不会出现在 POST 请求中

> ID：12210803
> 
> 赞同：0
> 
> 时间：2012-08-31T07:32:42.097
> 
> 标签：jsp, servlets, javabeans

我有一个共享 JavaBean 实例的 servlet 和 JSP - servlet 初始化它们（因为 bean 需要构造函数参数）并将它们存储在会话中，然后转发到 JSP，它获取用户输入并通过表单 POST 请求提交回 servlet . 在 servlet 的`doPost`方法中，它再次检索 JavaBean，但它的所有值都将由表单设置为空。如果我在表单上使用 GET 方法，则填充值，并且在调试时我可以看到 JavaBean 属性值实际上已设置。那为什么我的`doPost`方法从会话中检索具有空值的 bean？有趣的是，通过每个对象的构造函数参数传入的字段实际上是正确设置的，无论是 GET 还是 POST——只是那些通过表单管理的属性没有设置。

**缩写代码示例**

*小服务程序*

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException
{
    HttpSession session = request.getSession();
    Customer customer = (Customer)session.getAttribute("customer");
    if (customer == null)
    {
        customer = new Customer(.....);
        session.setAttribute("customer", customer);
    }
    Address address = (Address)session.getAttribute("address");
    if (address == null)
    {
        address = new Address(.....);
        session.setAttribute("address", address);
    }
    forward("/checkout.jsp", request, response);
}
...
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException
{
    PrintWriter out = response.getWriter();
    Customer customer = (Customer)request.getSession().getAttribute("customer");
    if (customer != null)
    {
        out.println("Customer: " + customer.toString());
    }
    Address address = (Address)request.getSession().getAttribute("address");
    if (address != null)
    {
        out.println("Address: " + address.toString());
    }
} 
```

*JSP*

```
<jsp:useBean id="customer" class="com.mycompany.myproject.Customer" scope="session" />
<jsp:setProperty name="customer" property="*"/>
<jsp:useBean id="address" class="com.mycompany.myproject.Address" scope="session" />
<jsp:setProperty name="address" property="*"/>

...

<form method="POST" action="${pageContext.request.contextPath }/checkout">
    <table>
        <tr>
            <td>Title</td>
            <td><input type="text" name="title" value="${ customer.title }" /></td>
        </tr>
        <tr>
            <td>Given name</td>
            <td><input type="text" name="givenName" value="${ customer.givenName }" /></td>
        </tr>
        ...
    </table>
    <input type="submit" value="Place order" />
</form> 
```

当我在此表单中输入数据并单击“下订单”时，toString() 调用的输出将 和 的所有字段显示`customer`为`address`空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T22:38:59.433

所以似乎我不想要的东西是不可能的——这`<jsp:setProperty ... property="*" />`是我需要的，但在我提供另一个 JSP 之前它不可用，我想*在*访问 servlet 中的 bean 后执行此操作。所以我可以执行以下操作之一：

*   在我的 servlet 中使用 bean 之前，重定向到另一个 JSP 以填充我的值
*   手动设置值
*   使用反射来设置它们（可能是可扩展性的赢家）
*   可能使用类似[BeanUtils的东西](http://commons.apache.org/beanutils/)

# php - How do I break a foreach loop after it has looped for a set desired number of times instead of the entire array in PHP?

> ID：12210804
> 
> 赞同：-2
> 
> 时间：2012-08-31T07:32:45.990
> 
> 标签：php, foreach, break

> **Possible Duplicate:**
> [limiting number of times a loop runs in php](https://stackoverflow.com/questions/1998204/limiting-number-of-times-a-loop-runs-in-php)

I am trying to break a foreach loop reading a feed of tweets - after three tweets. Would somebody help with the code I need to supplement to the one i have already.

```
<?php
function getTweets($Username) {
$feedURL = "http://twitter.com/statuses/user_timeline.rss?screen_name=" . $username;

$content = file_get_content($feedURL);
$tweets = new SimpleXMLElement ($content);

foreach ($tweets->channel->item as $tweet) {
    echo "<ul>";
    echo "<li>$tweet->description<br />$tweet->pubDate</li>";
    echo "</ul>";
}
?>
} 
```

Thanking you in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T07:36:37.717

大概是这样的。

```
$max_count = 3;
$counter = 0;
foreach ($tweets->channel->item as $tweet) {
    echo "<ul>";
    echo "<li>$tweet->description<br />$tweet->pubDate</li>";
    echo "</ul>";
    if($counter == $max_count){
        break;
    }
    $counter++;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T07:36:19.567

您可以使用[休息](http://php.net/manual/en/control-structures.break.php)

```
foreach ($tweets->channel->item as $tweet) {
    echo "<ul>";
    echo "<li>$tweet->description<br />$tweet->pubDate</li>";
    echo "</ul>";
    if( someCondition )
    {
        break;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T07:37:29.027

我假设项目已编入索引：

```
foreach ($tweets->channel->item as $i => $tweet) {
    echo "<ul>";
    echo "<li>$tweet->description<br />$tweet->pubDate</li>";
    echo "</ul>";
    if ($i == 2) {
        break;
    }
} 
```

# .net - 存储过程需要时间执行导致 .net 中的超时异常

> ID：12210806
> 
> 赞同：0
> 
> 时间：2012-08-31T07:32:55.060
> 
> 标签：.net, sql

我们希望在提供的范围内对所有日期的金额求和。

逻辑就像 - 在 while 循环中，我们将日期范围的金额列的总和添加到另一个变量中

这需要 1-3 分钟才能执行，具体取决于日期范围。

正因为如此，我们在代码端遇到了超时异常。

我们是否可以在存储过程中进行更改以减少时间，或者是否有任何其他方法可以在代码中处理此问题，以便不会引发异常。

请帮忙...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T07:47:56.733

## 调整查询性能的各种方法包括：

*   重写您的查询

没有一种方法可以编写查询。如果您发现使用 OUTER JOIN 的查询需要很长时间，请使用 INNER JOIN 重写它。或者，WHERE 子句的编写方式可能会导致过多的数据库读取操作。

*   规范化或去规范化表

虽然规范化表会产生理想的数据库设计，但它通常会导致查询不佳。如果您发现经常使用的查询必须跨越太多规范化表，请考虑一些数据重复。

*   添加索引

缺乏明确定义的索引是查询需要很长时间才能执行的常见原因。创建索引将导致查询查找索引而不是表。

*   删除索引。在某些情况下，导致查询执行缓慢的原因是定义不明确的索引。例如，不包含表中经常查找的列的索引。在这种情况下，最好删除索引并重新创建它。

从在存储过程中激活查询执行时间开始，看看什么需要时间

> SET STATISTICS TIME ON 选择 * from ......

您还可以通过以下方式查看查询的图形执行计划： *单击查询 > 包括实际执行计划。*

您可以阅读更多关于查询性能调优的信息：[Pinal Dave 的博客](http://blog.sqlauthority.com/2010/02/16/sql-server-stored-procedure-optimization-tips-best-practices/)，在这方面他是最好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:42:13.330

正确的方法是优化你的程序，但由于你没有发布代码，我不能说什么，另一种方法是处理症状，因此通过增加 Connectionstring 中的 Timeout 不会引发异常，例如：

```
"CommandTimeout = try any greater value;" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T08:53:58.163

如果您的查询确实需要该时间量，您可以通过将 SqlCommand 的[CommandTimeout 属性](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.commandtimeout.aspx)设置为适当的值来防止超时。

但首先检查查询是否可以优化。

# regex - 什么？！意思是？

> ID：12210807
> 
> 赞同：58
> 
> 时间：2012-08-31T07:32:55.903
> 
> 标签：regex

`?!`以下正则表达式 中的含义是什么？

```
new RegExp('http:\/\/(?!' + location.hostname + ')') 
```

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-08-31T07:34:01.110

这是一个[否定的前瞻](http://www.regular-expressions.info/lookaround.html)，这意味着要匹配的表达式，其中的部分`(?!...)` *不能*匹配。在这种情况下，正则表达式`http://` *仅*在它后面没有当前主机名时才匹配（大致请参见 Thilo 的评论）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-31T07:34:43.673

这是一个负面的前瞻性，您可以[在此处](http://www.regular-expressions.info/lookaround.html)查看更多信息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-31T07:35:06.080

这是一个环顾四周。

`location.hostname`不得跟随`http:\/\/`

# mysql - 通过 Wlan 同步 MAMP 数据库

> ID：12210809
> 
> 赞同：3
> 
> 时间：2012-08-31T07:33:06.327
> 
> 标签：mysql, database, macos, sync, mamp

进入 wlan 后，我会使用自动同步工具在 iMac 和 MB Air 之间同步工作文件。

现在我还想同步我的本地 MAMP Webdev 环境。我试图同步我的整个 MAMP 文件夹，但这导致了一个痛苦和绝望的世界，就像有人在这里提到的那样，这不是一个好主意。

现在我有了另一个想法：是否有某种自动化的 db-export 脚本，所以我可以同步 .sql 文件并让它在我的另一台计算机上自动重新导入。

是否存在这样的事情：

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T02:44:35.047

我通常使用命令行根据具体情况执行此操作，我的机器上有 100 个表:)

您可以创建两个 sh 脚本；导出.sh

```
%pathtomysqlbin%/mysqldump -u%admin% -p$adminpw% --all-databases > tmpfile.sql 
```

和 import.sh

```
%pathtomysqlbin%/mysql -u%admin% -p%adminpw < tmpfile.sql 
```

然后告诉您的同步工具在开始之前执行 export.sh 脚本，最后 - 当您开始在另一台计算机上工作时手动运行 import.sh :)

# php - PHP get_headers() 报告的标题与 CURL 不同

> ID：12210816
> 
> 赞同：8
> 
> 时间：2012-08-31T07:33:42.790
> 
> 标签：php, curl, http-headers

怎么`get_headers()`可能返回与通过 CURL 获取不同的结果？这是我的代码：

```
header("Content-type: text/plain");
$url = 'http://www.foxbusiness.com/index.html';

echo "get_headers() headers:\n\n";
$headers = get_headers($url);
print_r($headers);

echo "\n\nCURL headers\n\n";
$curl = curl_init();
curl_setopt_array( $curl, array(
    CURLOPT_HEADER => true,
    CURLOPT_NOBODY => true,
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_URL => $url ) );
$headers = explode( "\n", curl_exec( $curl ) );
curl_close( $curl );
print_r($headers); 
```

这是结果：

```
get_headers() headers:

Array
(
    [0] => HTTP/1.0 403 Forbidden
    [1] => Server: AkamaiGHost
    [2] => Mime-Version: 1.0
    [3] => Content-Type: text/html
    [4] => Content-Length: 283
    [5] => Expires: Fri, 31 Aug 2012 07:29:14 GMT
    [6] => Date: Fri, 31 Aug 2012 07:29:14 GMT
    [7] => Connection: close
)

CURL headers

Array
(
    [0] => HTTP/1.1 200 OK
    [1] => Server: Apache
    [2] => X-FoxNews-EdgeTTL: 2m
    [3] => Content-Type: text/html;charset=UTF-8
    [4] => Cache-Control: max-age=64
    [5] => Date: Fri, 31 Aug 2012 07:29:14 GMT
    [6] => Connection: keep-alive
    [7] => 
    [8] => 
) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T07:49:10.280

`get_headers`当您将 cURL 配置为执行 HEAD 请求时，默认情况下将执行 GET 请求。[首先通过使用 HEAD 为请求方法放置不同的](http://php.net/manual/en/function.get-headers.php#example-3797)[HTTP 流上下文](http://php.net/manual/en/context.http.php) ，使请求与 cURL 发送的请求相同。

此外，服务器似乎需要一个用户代理，因此请确保您[在 php.ini中](http://php.net/manual/en/filesystem.configuration.php#ini.user-agent)[提供`user_agent`](http://php.net/manual/en/filesystem.configuration.php#ini.user-agent)或将其添加到流上下文中。

以下应该有效：

```
stream_context_set_default(
    array(
        'http' => array(
            'method' => 'HEAD',
            'user_agent' => "PHP"
        )
    )
); 
```

请参阅[http://codepad.viper-7.com/cOO9XS](http://codepad.viper-7.com/cOO9XS)

请注意，它`stream_context_set_default`修改了全局默认流上下文，因此一旦您调用上述方法，使用此流包装器对其他方法的任何调用现在都将执行 HEAD 请求。不像，例如，`file_get_contents`不允许`get_headers`通过函数的参数提供自定义流上下文。换句话说，确保在获得标头后将方法改回 GET。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T07:54:36.143

在 get_headers 之前添加一个不同的 User-Agent 标头：

```
stream_context_set_default(
    array(
        'http' => array(
            'method' => 'HEAD',
            'header' => "User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.79 Safari/537.1\r\n"
        )
    )
); 
```

而且，不妨指定 HEAD ，因为您只需要标题。通过此更改，您将获得正确的标题。

**输出**

```
get_headers() headers:

Array
(
    [0] => HTTP/1.0 200 OK
    [1] => Server: Apache
    [2] => X-FoxNews-EdgeTTL: 2m
    [3] => Content-Type: text/html;charset=UTF-8
    [4] => Cache-Control: max-age=76
    [5] => Date: Fri, 31 Aug 2012 07:53:24 GMT
    [6] => Connection: close
)

CURL headers

Array
(
    [0] => HTTP/1.1 200 OK
    [1] => Server: Apache
    [2] => X-FoxNews-EdgeTTL: 2m
    [3] => Content-Type: text/html;charset=UTF-8
    [4] => Cache-Control: max-age=76
    [5] => Date: Fri, 31 Aug 2012 07:53:24 GMT
    [6] => Connection: keep-alive
    [7] => 
    [8] => 
) 
```

# workflow-foundation-4 - WF4 版本控制 - 如何取消/终止无效实例？

> ID：12210839
> 
> 赞同：1
> 
> 时间：2012-08-31T07:34:47.640
> 
> 标签：workflow-foundation-4

我有一个使用 WorkflowFoundation 4.1 实现的状态机工作流。我正在使用 SQL Server 持久性存储和 WorkflowApplication 类来加载和运行工作流。

我正在对状态机工作流模型进行更改，并且发现现有实例很容易中断。我已经编写了可以将工作流重播回正确状态的代码，这基本上是一个迁移，可以正常工作，但是我还需要能够清除旧的工作流实例。

主要问题是，如果工作流无效，我什至无法加载它，所以我也无法终止或取消它。

有没有办法使用工作流 API 来删除工作流而不加载它（即，SqlPersistenceStore 上的某些命令），还是我必须手动清理数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T09:22:16.673

SqlWorkflowInstanceStore 不允许您直接这样做。您将需要进入数据库并删除那里的记录。如果您使用的是 AppFabric，则实际上有一个命令可以删除工作流实例，而无需为此目的先加载它。应该有一个 PowerShell 命令来使用代码执行此操作。

# c# - 用不同语言解析字符串的高效快速方法

> ID：12210840
> 
> 赞同：0
> 
> 时间：2012-08-31T07:34:57.527
> 
> 标签：c#, regex, string, list, rest

我有一个类似的字符串（通过 Google Transliterate REST 调用生成，并音译成**2**种语言）：

> “这个世界是美丽的，♥♥♥♥एंडথিসইসবিয়াউতিফুলআন্দ令人惊讶的神秘अमज़िन्ग्लीअमज़िन्ग्लीम्य्स्तेरिऔसম্য্স্তেরীয়ুস”

现在 Google Transliterate REST 调用一次允许**五个**单词，所以我必须循环，将其添加到*列表中*，然后连接字符串。这就是为什么我们看到（**每种**语言的）每个 CHUNK 都是**5 个**单词。单词总数为**7 个**单词，因此前**5** ( `This world is beautiful and`) 位于前**2** ( `amazingly mysterious`) 后。

我如何最有效地解析句子，以便得到如下内容：

> 这个世界是美丽而令人惊叹的神秘थिसथिसवर्ल्डइसबेऔतिफुलएंडअमज़िन्ग्लीअमज़िन्ग्लीথিসবর্ল্ডইসবিয়াউতিফুলআন্দআমাজিন্গ্লিআমাজিন্গ্লি

由于句子的*长度和可以转换成的语言**数量*可以是动态的，可能使用*每种语言的列表可以工作*，然后再连接起来？

我使用了一种方法，一次一个地音译每个单词，效果很好，但是太慢了，因为它增加了对 API 的调用次数。

有人可以帮助我有效（和动态）实施这种情况吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:41:38.330

每种语言的一个列表是要走的路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:43:08.990

如果你指的是不同语言的不同字符 ASCII 码，你可以在这里使用这个答案：

[正则表达式西班牙语和阿拉伯语单词](https://stackoverflow.com/questions/10881765/regular-expression-spanish-and-arabic-words)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T07:45:16.633

为谷歌翻译的 API 付费，然后每个请求的长度限制最多为 5,000 个字符[https://developers.google.com/translate/v2/faq](https://developers.google.com/translate/v2/faq)

另外，是的，正如丹尼尔所说 - 按语言对文本进行分组是必要的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T11:01:42.443

我已经试过了，如果我误解了你的问题，请纠正我

```
string statement = "This world is beautiful and थिस वर्ल्ड इस बेऔतिफुल एंड থিস বর্ল্ড ইস বিয়াউতিফুল আন্দ amazingly mysterious अमज़िन्ग्ली म्य्स्तेरिऔस আমাজিন্গ্লি ম্য্স্তেরীয়ুস ";
            string otherLangStmt = statement;

            MatchCollection matchCollection =   Regex.Matches(statement, "([a-zA-Z]+)");
            string result = "";
            foreach (Match match in matchCollection)
            {
                if (match.Groups.Count > 0)
                {
                    result += match.Groups[0].Value + " ";
                    otherLangStmt = otherLangStmt.Replace(match.Groups[0].Value, string.Empty);
                }                
            }
            otherLangStmt = Regex.Replace(otherLangStmt.Trim(), "[\\s]", " ");

            Console.WriteLine(result);
            Console.WriteLine(otherLangStmt); 
```

# android - 有没有办法从应用程序自动发送邮件？

> ID：12210841
> 
> 赞同：1
> 
> 时间：2012-08-31T07:34:59.303
> 
> 标签：android, email

我创建了一个应用程序，它获取位置信息（纬度、经度、高度）并使用 ACTION_SEND 向某个 gmail 帐户发送电子邮件。但我无法将自动生成的邮件发送到该帐户。每当位置发生变化时，我都需要发送邮件。但是我的应用程序正在显示可用的选择器列表。请给我一些想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:50:45.213

从您的情况来看，当您的位置正确更改时，您需要发送邮件。所以，你已经从你的班级[onLocationChanged](http://developer.android.com/reference/android/location/LocationListener.html#onLocationChanged%28android.location.Location%29)了。从那里，您可以使用[此](https://stackoverflow.com/a/2033124/940096)示例发送邮件。

例如，

```
public void onLocationChanged(Location loc)
{
    // Call the GmailSender as per the example
    try {   
        GMailSender sender = new GMailSender("username@gmail.com", "password");
        sender.sendMail("This is Subject",   
                        "This is Body",   
                        "user@gmail.com",   
                        "user@yahoo.com");   
        } catch (Exception e) {   
            Log.e("SendMail", e.getMessage(), e);   
        }
} 
```

因此，您可以简单地在您的位置发生变化时发送邮件，而不是通过单击按钮发送邮件。

# asp.net - asp.net MVC 3 中的 aspx 页面

> ID：12210846
> 
> 赞同：0
> 
> 时间：2012-08-31T07:35:20.460
> 
> 标签：asp.net, asp.net-mvc-3

我有一个 MVC3 应用程序。在视图文件夹中，我创建了一个名为报告的文件夹，在报告中我添加了一个名为“participantReport.aspx”的 aspx 页面。我在共享文件夹中创建了一个母版页（一个普通的不是 MVC3 母版页）并将其用于这个 aspx 页面。

问题是当我将 url 键入为“localhost:xxxx/Reports/participantReport.aspx”时，我得到一个“'/'应用程序中的服务器错误。找不到资源。” 信息。

在控制器中，我使用了如下所示的功能：-

```
 public RedirectResult Reports()
    {
        return Redirect("~/Reports/ParticipantReport.aspx");
    } 
```

如何访问此页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:43:44.670

默认情况下，您的视图文件夹中有一个 web.config，在 web.config 中定义了一个捕获所有处理程序：

```
<httpHandlers>
  <add path="*" verb="*" type="System.Web.HttpNotFoundHandler"/>
</httpHandlers> 
```

因此，该视图文件夹中的每个请求都将发送到 http not found 处理程序。解决方案是将报表移到视图文件夹之外。

# c# - 如何以毫米为单位绘制矩形

> ID：12210853
> 
> 赞同：0
> 
> 时间：2012-08-31T07:36:11.717
> 
> 标签：c#, asp.net-mvc

```
using (var mem = new MemoryStream())
using (var bmp = new Bitmap(85, 54))
using (var gfx = Graphics.FromImage((Image)bmp))
{
    // gfx.SmoothingMode = SmoothingMode.AntiAlias;
    gfx.PageUnit = GraphicsUnit.Millimeter;
    gfx.FillRectangle(Brushes.Red, new Rectangle(0, 0, bmp.Width, bmp.Height));

    //add question
    gfx.DrawString(captcha, new Font("Arial", 5), Brushes.Blue, bmp.Width / 2, bmp.Height/2);

    //render as Jpeg
    bmp.Save(mem, System.Drawing.Imaging.ImageFormat.Jpeg);
    img = this.File(mem.GetBuffer(), "image/Jpeg");
}

return img; 
```

这行不通。我需要 85x54 毫米

这是怎么做的？

**我需要绘制打印**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:42:43.610

此位图的大小以像素为单位。

当您在常规显示器上显示位图时，单个像素将为 1/96 英寸。其他显示器可能有其他 DPI（[每英寸点数](http://en.wikipedia.org/wiki/Dots_per_inch)） - 例如[Retina 显示器](http://en.wikipedia.org/wiki/Retina_display)

大多数打印机至少支持 300 DPI。

因此，您需要做的是获取[屏幕](https://stackoverflow.com/questions/6844161/how-to-get-dpi-in-c-sharp-net)或[打印机](http://msdn.microsoft.com/en-us/library/system.drawing.printing.pagesettings.printerresolution.aspx)的 DPI并相应地调整位图的大小，或者使用允许您指定 DPI 的图像格式（矢量？）。某些位图格式还允许您指定预期的 DPI

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:41:49.600

数字图像始终以像素为单位。从不以毫米或英寸为单位。根据您在打印时使用的 DPI（每英寸点数），像素将转换为毫米或英寸。

对于屏幕，使用每英寸 72 像素，对于打印使用 300。

对于您的图片 (85x54mm = 3.34x2.12in)，使用 (3.34 * 300) x (2.12 * 300) = 1002 x 637 像素进行打印。

# iphone - 当我在 mkMapView 中更改分段时无法更改引脚颜色

> ID：12210860
> 
> 赞同：0
> 
> 时间：2012-08-31T07:36:48.463
> 
> 标签：iphone, objective-c, xcode, google-maps, mkmapview

我对 mapView 中的注释有一些问题。让我们看一下我的要求。

我想让用户选择会议地点。

有两种选择。

1）我应该列出附近的数据

或者

2）他可以将图钉拖放到任何他想要的地方！

为此，我创建了一个细分市场。附近数据的第一个索引和删除 pin 的第二个索引。

对于第一个选项（**“附近”**），我需要从**卖方位置、买方位置以及卖方和买方之间的中点**获取附近的数据。所以我调用google api并通过传递纬度和经度三次来获取数据。第一次获取数据时没有问题。我的数组填满了所有数据（包括 3 个响应），并且引脚颜色也会根据要求发生变化。

买方（红色）卖方（紫色）中点（绿色）

现在，当我单击放置引脚时，所有数据都会从数组中删除，并且在地图上放置一个引脚。

到现在为止它工作正常！

但是，当您再次单击“附近”时，问题就开始了！毫无疑问，它可以为我提供我想要的数据，但不会保留别针颜色。

```
-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation {

    if ([segmentND selectedSegmentIndex]==0) {

        if ([annotation isKindOfClass:[MKUserLocation class]])
            return nil;

       static NSString* BridgeAnnotationIdentifier = @"bridgeAnnotationIdentifier";
        MKPinAnnotationView* pinView = (MKPinAnnotationView *)
        [myMapView dequeueReusableAnnotationViewWithIdentifier:BridgeAnnotationIdentifier];
        if (!pinView)
        {
            MKPinAnnotationView* customPinView = [[[MKPinAnnotationView alloc]
                                                   initWithAnnotation:annotation reuseIdentifier:BridgeAnnotationIdentifier] autorelease];

            switch (self.pinColor) {
                case 0:
                {
                    customPinView.pinColor = MKPinAnnotationColorPurple;
                }
                    break;
                case 1:
                {
                    customPinView.pinColor = MKPinAnnotationColorRed;
                }
                    break;
                case 2:
                {
                    customPinView.pinColor = MKPinAnnotationColorGreen;
                }
                    break;
                default:
                    break;
            }
            customPinView.canShowCallout = YES;

            UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

            [rightButton addTarget:self
                            action:@selector(showDetails:)
                  forControlEvents:UIControlEventTouchUpInside];
            customPinView.rightCalloutAccessoryView = rightButton;

            return customPinView;
        }
        else
        {
            pinView.annotation = annotation;
        }
        return pinView;
    }
    else {

        // Code of dragging dropping pin. It works Fine.s
    }
} 
```

我附上[图片](http://i.stack.imgur.com/1AqNy.png)以获得更多想法。

请给我解决方案或任何其他方式来实现它。**记住别针颜色是区分卖方买方和中点的必要条件！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T20:15:13.923

您当前方法的问题在于 self.pinColor 不会根据地图需要查看的注释而改变。它可以并且会在任何时候调用 viewForAnnotation 。也许地图已经滚动，一个大头针刚刚回到视野中。也许应用程序被置于后台，只是被用户重新带回视图。您需要分析注释的原因是传递以确定在视图中使用哪种引脚颜色。您使用什么对象进行注释？如果它是 HAnno 并且它有一个名为 pinColor 的属性，你会做这样的事情而不是你的 switch 语句。

```
HSAnno* currentAnno = (HSAnno *)annotation;
pinView.pinColor = currentAnno.pinColor; 
```

这样，无论需要重绘什么注释， viewForAnnotation 总是会返回正确的彩色图钉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:42:37.180

当不存在可重复使用的 pin 时，您在该代码部分设置 pincolor。

```
if (!pinView)
    ....
    customPinView.pinColor = MKPinAnnotationColorPurple;
    ....
} 
```

当`viewForAnnotation`被调用并找到可重复使用的引脚时，它们就会被使用。那里有错误的颜色引脚。

在

```
else
{
    pinView.annotation = annotation;
} 
```

部分，它应该可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T07:50:32.457

认为这里弄错了

```
 else
    {
        pinView.annotation = annotation;
    }
    return pinView; 
```

改正为

```
 else
    {
        pinView.annotation = annotation;        
        return pinView;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T07:54:32.317

这是我对您的代码和`MKMapView`委托进行的少量修改。以前，您已经更改了`pin`内部颜色`if`，使其在第一次`MKMapView`加载时只调用一次。

```
-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation 
{            
    if ([annotation isKindOfClass:[MKUserLocation class]])
        return nil;

    static NSString* BridgeAnnotationIdentifier = @"bridgeAnnotationIdentifier";
    MKPinAnnotationView* pinView = (MKPinAnnotationView *)
    [mapView dequeueReusableAnnotationViewWithIdentifier:BridgeAnnotationIdentifier];
    if (!pinView)
    {
        pinView = [[[MKPinAnnotationView alloc]
                                            initWithAnnotation:annotation reuseIdentifier:BridgeAnnotationIdentifier] autorelease];
    }
    else
    {
        pinView.annotation = annotation;
    }

    switch (self.pinColor) {
        case 0:
        {
            pinView.pinColor = MKPinAnnotationColorPurple;

        }
            break;
        case 1:
        {
            pinView.pinColor = MKPinAnnotationColorRed;
        }
            break;
        case 2:
        {
            pinView.pinColor = MKPinAnnotationColorGreen;
        }
            break;
        default:
            break;

    pinView.canShowCallout = YES;

    UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

    [rightButton addTarget:self
                    action:@selector(showDetails:)
          forControlEvents:UIControlEventTouchUpInside];
    pinView.rightCalloutAccessoryView = rightButton;

    return pinView;
}

    return pinView;
} 
```

PS我已经删除了您`UISegment`在我身边检查的第一个条件，请在实施时按原样添加。

# mysql - MySQL数据库表示文件夹结构最有效的方法？

> ID：12210867
> 
> 赞同：2
> 
> 时间：2012-08-31T07:37:19.017
> 
> 标签：mysql, sql, database, nosql, schema

我想创建一个数据库模式来表示每个用户创建的文件夹结构。

例如：

```
My Documents
 -- My Pictures
 -- My Videos
    -- Summer Holidays 
```

所以我能想到的最简单的方法就是创建一个名为：

文件夹结构包含：

```
id,user_id,folder_name,parent_id,child_id 
```

考虑到每个用户都可以创建许多文件夹，这个表会爆炸，我不确定性能。

有没有更好的方法来存储这种数据？我正在考虑为每个用户存储基于文档的（nosql）...

谢谢您的帮助！

# c# - 为什么 VS2010 在 COMException 上停止，如果存在 try catch 并且异常设置设置为第一次不抛出

> ID：12210869
> 
> 赞同：3
> 
> 时间：2012-08-31T07:37:34.543
> 
> 标签：c#, .net, exception-handling, comexception

我有以下代码：

```
try
{
    ((System.ComponentModel.ISupportInitialize)(this.axWebBrowser1)).EndInit();
}
catch
{
} 
```

我将异常对话框配置为不停止任何处理：

![在此处输入图像描述](../Images/79e5509cc37ea15275292de0b9d6b35c.png)

无论如何 VS 在以下异常上停止并且无法继续执行。有任何想法吗？

![在此处输入图像描述](../Images/f53d201cfdef0acb7830560ea6b31231.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T07:49:01.280

在调试器的设置部分中，有一个“[当异常跨越 AppDomain 或托管/本机边界时中断](http://msdn.microsoft.com/en-us/library/85yzd16c.aspx)”复选框，这就是不使用 catch 的原因。

# node.js - 如何获取 json 对象数组而不是猫鼬文档

> ID：12210870
> 
> 赞同：24
> 
> 时间：2012-08-31T07:37:45.217
> 
> 标签：node.js, mongodb, express, mongoose

当我执行如下`.find`操作时：

```
Collection.find({name: 'Erik'}, function (err, docs) {
   // do momething
}); 
```

'docs' 变量填充了一组功能齐全的猫鼬文档。但我需要得到一组纯 JSON 对象。

我知道我可以通过 forEach 循环遍历 'docs' 数组并使用 .toJSON() 方法获取对象。mongoose 是否支持该功能，我有兴趣吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-31T14:01:28.667

如果您使用的是 Mongoose 3.x，您可以使用[`lean`](http://mongoosejs.com/docs/api.html#query_Query-lean)查询选项来执行此操作：

```
Collection.find({name: 'Erik'}).lean().exec(function (err, docs) {
    // docs are plain javascript objects instead of model instances
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-07-26T12:45:15.180

```
.exec(function(err, docs){
    docs= docs.map(o => o.toObject()); 
```

这将包括**virtuals**和**getter**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-07T06:53:37.740

Map through results and convert each to JS object:

```
const result = await model.find({some: 'query'});
return result.map((r) => r.toObject()); 
```

# ruby - 如何通过 ruby net-ssh 访问 bin 文件夹中的命令？

> ID：12210873
> 
> 赞同：0
> 
> 时间：2012-08-31T07:38:00.027
> 
> 标签：ruby, net-ssh

我正在使用 net-ssh 连接到我的服务器并且需要运行一些 ruby​​ 命令。

以下不起作用：

```
puts ssh.exec!("ruby -v")
bash: ruby: command not found 
```

我总是需要指定完整路径：

```
puts ssh.exec!("/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby -v") 
```

这对于一般的其他命令（rvm 等）也是如此。

是否有任何选项可以加载 bin 文件夹中的命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:14:43.603

[net-ssh 和远程环境](https://stackoverflow.com/questions/6854055/net-ssh-and-remote-environment)

你需要来源 .bashrc/.zshrc/ 等

`ssh.exec!("source ~/.zshrc; /usr/bin/env ruby -v")`

# python - 是否有任何工具可以直接从文本构建对象，例如谷歌协议缓冲区？

> ID：12210874
> 
> 赞同：0
> 
> 时间：2012-08-31T07:38:12.200
> 
> 标签：python, orm, protocol-buffers

在大多数日志处理系统中，日志文件是制表符分隔的文本文件，文件的架构是单独提供的。例如。

```
12 tom tom@baidu.com
3 jim jim@baidu.com 
```

架构是

```
id : uint64
name : string
email : string 
```

为了找到像这个*person.name == 'tom'*这样的记录，代码是

```
for each_line in sys.stdin:
  fields = each_line.strip().split('\t')
  if feilds[1] == 'tom':  # magic number
    print each_line 
```

有很多神奇的数字 1 2 3。

**有没有像谷歌协议缓冲区这样的工具**（它是二进制的），所以我们可以直接从文本构建对象？

```
Message Person {
  uint64 id = 1;
  string name = 2;
  string email = 3;
} 
```

所以我们比这样构建人：person = lib.BuildFromText(line)

```
for each_line in sys.stdin:
  person = lib.BuildFromText(each_line) # no magic number
  if person.name == 'tom':
    print each_line 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:02:47.480

lib.BuildFromText() 函数如何知道如何命名字段？它们只是您传递给它的行中的值，对吗？以下是如何在 Python 中执行此操作：

```
import sys
from collections import namedtuple
Person = namedtuple('Person', 'id, name, email')
for each_line in sys.stdin:
    person = Person._make(each_line.strip().split('\t'))
    if person.name == 'tom':
        print each_line 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:57:01.067

```
import csv

Person = {
    'id': int,
    'name': str,
    'email': str    
}

persons = []
for row in csv.reader(open('CSV_FILE_NAME', 'r'), delimiter='\t'):
    persons.append({item[0]: item[1](row[index]) for index, item in enumerate(Person.items())}) 
```

# android - 收到新短信时如何开始新活动（我使用了 Intent 但显示错误）？

> ID：12210875
> 
> 赞同：1
> 
> 时间：2012-08-31T07:38:16.483
> 
> 标签：android

如果收到特定的短信并且它具有特定的价值，我该如何开始新的活动？我使用了意图，但在代码中显示错误此错误显示在意图中

> 未为 SmsReceiver 类型定义方法 startActivity(Intent)

下面是我的代码：

```
package com.mypackage;

import java.util.Map;

import android.content.BroadcastReceiver;
import android.content.Context;
 import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
 import android.widget.Toast;

  public class SmsReceiver extends BroadcastReceiver {

   public void onReceive(Context context, Intent intent) 
{
    //---get the SMS message passed in---
    Bundle bundle = intent.getExtras();        
    SmsMessage[] msgs = null;
    String str = "";            
    if (bundle != null)
    {
        //---retrieve the SMS message received---
        Object[] pdus = (Object[]) bundle.get("pdus");
        msgs = new SmsMessage[pdus.length];            
        for (int i=0; i<msgs.length; i++){
            msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
            str += "SMS from " + msgs[i].getOriginatingAddress();                     
            str += " :";
            str += msgs[i].getMessageBody().toString();
            str += "\n";     
            if(str.contains("00"));
            {
                Intent k = new Intent(this.getApplicationContext(),    
   AgAppMenu.class);
                startActivity(k);
            }

        }
        //---display the new SMS message---
        Toast.makeText(context, str, Toast.LENGTH_SHORT).show();
    }   

}
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:42:53.023

您应该从`Activity`一项新任务开始。

```
Intent k = new Intent(this.getApplicationContext(), AgAppMenu.class);
k.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(k); 
```

# apache - .htaccess 允许访问一个文件和一个文件夹

> ID：12210881
> 
> 赞同：1
> 
> 时间：2012-08-31T07:38:50.790
> 
> 标签：apache, .htaccess

我的文件夹结构看起来像这样。

```
-beta
   +folder1
   +folder2
   +folder3
   file1.php
   file2.php 
```

现在我想限制所有文件和文件夹，但不限制 folder2 和 file2.php 我如何编写我的 .htaccess 来做到这一点。这就是我写的。

```
Options +FollowSymlinks
RewriteEngine on
RewriteCond %{REQUEST_URI} !/folder2%$
RewriteCond %{REQUEST_URI} !/file2.php
RewriteRule $ /beta/file2.php [R=302,L] 
```

不知何故，上述方法在一个系统中有效，但在其他系统中无效。你能指出我在这里做错了什么吗？

谢谢，

萨哈

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T07:53:46.797

尝试更改您的规则，以便让 2 个文件夹通过，然后将所有内容重定向到 file2：

```
Options +FollowSymlinks
RewriteEngine on
RewriteBase /beta/
RewriteRule ^file2\.php - [L]
RewriteRule ^folder2 - [L]
RewriteRule ^ file2.php [L,R=302] 
```

您遇到的错误可能来自`%`您的状况。

如果您想彻底禁止访问其他任何内容，您可以将最后一条规则更改为：

```
RewriteRule ^ - [L,F] 
```

* * *

> 如果你不介意你能解释一下每一行吗？

该`RewriteBase`指令让重写引擎知道相对路径的 URI-base 为`/beta/`. 因此，所有不以 a 开头的文件/路径名都`/`将自动具有该基础。

接下来的两条规则只是简单地与 URI 匹配，并使用字符“通过” `-`，这意味着“不做任何事情”。因此，当您请求`/folder2`or时`/file2.php`，重写引擎什么也不做，并让请求通过，就好像什么都没发生一样。但是，如果请求是其他任何内容，则前两条规则将不匹配，最后一条规则将匹配，因为正则表达式是`^`，它匹配所有内容。该规则的目标将所有内容重定向到`/beta/file2.php`（因为基础）。

方括号中带有标志的禁止规则`F`是一样的，如果请求不是针对文件夹 2 或文件 2.php，则该规则将匹配它 ( `^`) 并通过 ( `-`) 但`F`标志使其返回一个“403 Forbidden”，而不是服务于请求的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:52:33.210

使用`REQUEST_FILENAME`insted`REQUEST_URI`我希望这会有所帮助

```
Options +FollowSymlinks
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !/folder2
RewriteCond %{REQUEST_FILENAME} !/file2.php
RewriteRule $ /file2.php [R=302,L] 
```

# jquery - jquery滑块错误未捕获的TypeError：无法调用未定义的方法'addClass'

> ID：12210884
> 
> 赞同：9
> 
> 时间：2012-08-31T07:38:58.400
> 
> 标签：jquery, jquery-ui

我的 jQuery 滑块有问题。在我更新滑块的值后，它不再起作用并显示一条错误消息

```
"Uncaught TypeError: Cannot call method 'addClass' of undefined". 
```

我没有任何想法来解决这个问题。谢谢！

这是示例代码：

```
 $("#slider-range").slider({

        range:true,     
        min: minPrice,
        max: maxPrice,  
        values:[ minPrice ,  maxPrice ],        
        slide: function( event,ui ){},

        change: function( event,ui ){

            $( "#amount" ).val( "$" + ui.values[0] + " - $" + ui.values[1] );
        }           
    }); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-31T07:43:19.850

* * *

类型错误：似乎您为滑块的值设置了无效值。因此它无法加载 - 将 int 放入字符串并将其用作布尔值 - 永远不会工作......

:)-

干杯

比格

# windows-phone-7 - 无法从 WP7 中的 WebBrowser 控件中删除所有 cookie（任何域）。这是真的吗？

> ID：12210887
> 
> 赞同：0
> 
> 时间：2012-08-31T07:39:25.637
> 
> 标签：windows-phone-7

在我的应用程序中，我使用 WebBrowser 控件。用户可以访问[http://mail.google.com](http://mail.google.com)，然后在不从 google.com 注销的情况下访问[http://twitter.com](http://twitter.com)，然后访问[http://abcd.com](http://abcd.com)等。

现在我的要求是重新启动 WebBrowser 控件并重新访问这些网站并强制用户再次登录这些网站。

我尝试了很多选择，但我失败了。我无法确切知道如何从“我的网络浏览器”控件中删除所有 cookie 并重新开始。

**任何机构都可以成功地做到这一点吗？你能分享你的代码吗？**

# javascript - 动态 js HTML5 Canvas 中的 stage.toJSON()

> ID：12210888
> 
> 赞同：0
> 
> 时间：2012-08-31T07:39:28.367
> 
> 标签：javascript, image, html5-canvas, kineticjs

你可以参考这个例子

[http://www.html5canvastutorials.com/kineticjs/html5-canvas-load-complex-stage-with-kineticjs/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-load-complex-stage-with-kineticjs/)

M 试图达到同样的效果，就像一个工作室，用户可以选择保存和重新加载画布。但它涉及图像。对于静态图像，我使用与上述示例相同的方法。但是有很多动态图像我通过ajax调用放置在画布内..并且获取图像的ID对于不同的图像是不同的但是没有办法知道图像的数量所以怎么能我为新图像添加了相同的功能，并使其对所有图像都通用。因为图像的数量是动态的，所以我无法在不知道的情况下为图像添加功能。请帮助..希望我是能够解释自己

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:10:55.613

试试这个：http: [//jsfiddle.net/sKymY/2/](http://jsfiddle.net/sKymY/2/)

要完成这项工作，您必须添加一个名为 src 的自定义属性和图像地址，并为它们命名图像（或您选择的任何名称）。

# javascript - 这里返回真假有什么用？

> ID：12210891
> 
> 赞同：0
> 
> 时间：2012-08-31T07:39:50.227
> 
> 标签：javascript, html, dom

```
function userid_validation(uid, mx, my) {
  var uid_len = uid.value.length;

  if (uid_len == 0 || uid_len >= my || uid_len < mx) {
    alert("User Id should not be empty / length be between " + mx + " to " + my);
    uid.focus(); //is this focus will be on alert box?  
    return false; //what is use of this false ?
  }

  return true; //what is use of this true?
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:44:32.010

我想它可以防止事件冒泡。防止链接和表单的标准行为（防止重定向和提交）是常见的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:43:05.933

如果没有看到代码是从哪里调用的，就不能完全确定......但很可能它是从 DOM0 事件处理程序（由 分配的`<element>.onclick=`）调用的

false 将阻止默认操作发生，而 true 将允许它发生。

```
function userid_validation(uid,mx,my)
{
  var uid_len = uid.value.length;
  if (uid_len == 0 || uid_len >= my || uid_len < mx)
  {
    alert("User Id should not be empty / length be between "+mx+" to "+my);
    uid.focus(); //is this focus will be on alert box?
    return false; //what is use of this false ? 
  }
return true; //what is use of this true? 
} 
```

# javascript - showAuthenticationDialog 不关闭窗口上的弹出窗口

> ID：12210892
> 
> 赞同：0
> 
> 时间：2012-08-31T07:39:56.247
> 
> 标签：javascript, facebook, spotify

我们正在编写一个 spotify 应用程序，它使用 showAuthenticationDialog-Dialog 来邀请用户 facebook 朋友。

邀请有效，但弹出窗口不会在 Windows 上关闭（在 Mac 上会关闭！）。

代码如下所示：

```
 var redir = "https://server/services/callback/facebook/apprequest/?source=spotify&user_id=" + uID;

    var data = "user_id=" + session.otheruser.id;
    var url = "http://www.facebook.com/dialog/apprequests?app_id=" + FB_APP_ID + "&message=" + encodeURIComponent( msg ) + "&redirect_uri=" + encodeURIComponent( redir ) + "&display=popup&data=" + encodeURIComponent( data ); 

    auth.showAuthenticationDialog(url, 'http://moosify.com', {
        onSuccess : function(response) {
            console.log("Success! Here's the response URL: " + response);
        },

        onFailure : function(error) {
            console.log("Authentication failed with error: " + error);
        },

        onComplete : function() { }
    }); 
```

服务器实际上是我们的服务器 URL。（在 manifest.json 中）

# delphi - TJvDockServer 和可停靠控件

> ID：12210894
> 
> 赞同：2
> 
> 时间：2012-08-31T07:40:29.900
> 
> 标签：delphi

我正在使用对接模块在 Delphi (BDS 2006) 和 JVCL 库中编程。我有一个问题 - 如果控件具有属性`DragKind = dkDock`和`DragMode = dmAutomatic`，那么 TJvDockServer 组件莫名其妙地认为控件既是客户端又提供对接。这是错误的，因为我发现，JVCL 的对接功能通常只控制包含组件类 TJvDockClient 的类 TForm。我想知道是否有可能以某种方式阻止 TJvDockServer 停靠类与 TForm 不同的控件？在 Delphi 中，每个事件的典型停靠期间称为 OnGetSiteInfo 停靠，并且可以过滤客户端，但在 TJvDockServer 中没有此类事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T20:38:50.060

属性 DragKind 和 DragMode 是标准 VCL 属性。对接是内置在 VCL 中的，从外观上看，它似乎在不涉及任何绝地代码的情况下工作得很好。

VCL 中已经内置了停靠表单以外的其他内容的能力。因此，您发现这种莫名其妙的情况向我表明您认为 Jedi 添加了对 VCL 的对接。不，它只是添加了一些漂亮的东西，比如“标签式笔记本对接”和带有假窗口标题栏的“联合区域”。

话虽如此，Forms 也是从 TCustomControl 继承的，实际上任何 TCustomControl 都可以停靠。就像 VCl 让您可以拖动和停靠并降落在 TPanel 上一样。好吧，这是一个古怪的功能，你的面板可以在运行时变成你的表单，但如果你不相信我，试试看。是 VCL 对你这样做，而不是 Jedi。

如果以你的智慧，你想阻止任何不是 TForm 的东西，我认为你可以。你肯定能对吗？ **更新**。是的你可以。OnDockOver 可以很好地阻止停靠在您想要阻止停靠的任何面板上。Jedi JvDockPanel 的诀窍在于您在设计时看不到它们，因此您需要通过在运行时将它们连接到代码中来访问它们的事件。

就像普通的TPanels一样，JvDockPanels有一个TPanel.OnDockOver事件，如果你想检查你正在停靠的东西，并且将Accept设置为false，它将被阻止停靠。

好的，这有效：

```
type
  TCustomControlAccess = class(TCustomControl);

procedure TMainForm.FormCreate(Sender: TObject);
begin
    TCustomControlAccess(dockServer.TopDockPanel).OnDockOver := MyDockOverEvent;
    TCustomControlAccess(dockServer.CustomDockPanel).OnDockOver := MyDockOverEvent;

    ...
end; 
```

JvDockPanel.OnDockOver 面板事件确实会触发，但您需要使用类似上述 hack 的 hack 来实际处理事件。

**更新**之前认为没有办法阻止这一点。但是我错了。弄清楚了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T06:02:05.917

虽然我无法准确重现您在 Delphi XE2 中的行为，但通常我似乎设法阻止 JediVCL 组件的 VCL-frag-n-drop。

也许这不是最好的方法，但我不知道哪些是框架创建者的原创想法。

[http://wiki.delphi-jedi.org/wiki/JVCL_Help:TJvDockServer](http://wiki.delphi-jedi.org/wiki/JVCL_Help:TJvDockServer)声称只有表单应该停靠。没有强制执行，只是硬连线的 JVCL 检查例程总是被调用。

* * *

```
 unit JvDockSupportControl;
    ....
    TJvDockCustomControl = class(TJvCustomControl)
    ....
    protected
      procedure GetSiteInfo(Client: TControl; var InfluenceRect: TRect; 
            MousePos: TPoint; var CanDock: Boolean); override;

  ...........

  function TJvDockCustomControl.GetJvDockManager: IJvDockManager;
  begin
  // Result := IJvDockManager(DockManager);
    DockManager.QueryInterface(IJvDockManager, Result);
  end;

  procedure TJvDockCustomControl.GetSiteInfo(Client: TControl; var InfluenceRect: TRect; MousePos: TPoint; var CanDock: Boolean);
  var jdm: IJvDockManager; idm: IDockManager;
  begin
    idm := DockManager;
    if nil <> idm then
       idm.QueryInterface(IJvDockManager, jdm);

    if nil = jdm
       then CanDock := false
       else jdm.GetSiteInfo(Client,InfluenceRect, MousePos, CanDock);
  end; 
```

* * *

```
 unit JvDockTree;
     .....
  procedure TJvDockTree.GetSiteInfo(Client: TControl;
  var InfluenceRect: TRect; MousePos: TPoint; var CanDock: Boolean);
  begin
    CanDock := IsDockable(DockSite, Client);

    If CanDock then begin
       GetWindowRect(DockSite.Handle, InfluenceRect);
       InflateRect(InfluenceRect, DefExpandoRect, DefExpandoRect);
    end;
  end; 
```

[http://issuetracker.delphi-jedi.org/view.php?id=5271](http://issuetracker.delphi-jedi.org/view.php?id=5271)

[http://issuetracker.delphi-jedi.org/view.php?id=5974](http://issuetracker.delphi-jedi.org/view.php?id=5974)

# android - 通过 Intent 捕获图像时如何获取方向类型？

> ID：12210895
> 
> 赞同：4
> 
> 时间：2012-08-31T07:40:37.887
> 
> 标签：android, android-camera, android-camera-intent

通过意图捕获图像时，我遇到了一个问题。

我正在使用默认意图代码来捕获图像。如下。

```
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                 startActivityForResult(intent, TAKE_PHOTO_CODE); 
```

并在 onActivityResult 中接收它，如下所示。

```
 @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    if( TAKE_PHOTO_CODE==requestCode){

        try {
             Bundle extras = data.getExtras();
             Bitmap mImageBitmap = (Bitmap) extras.get("data");
             selectedImagePath = saveImageInfo(mImageBitmap, "image");
             ExifInterface exif = new ExifInterface(selectedImagePath);
            Toast.makeText(getBaseContext()," "+exif.getAttribute(ExifInterface.TAG_ORIENTATION), Toast.LENGTH_SHORT).show();

         try {
                showDialog(DIALOG_UPLOADING);

            } catch (Exception e) {

                e.printStackTrace();
            }
          } catch (Exception e) {

          e.printStackTrace();
          Toast.makeText(getApplicationContext(), "No image selected.. ", Toast.LENGTH_SHORT).show();
        }
    }

} 
```

我想要在这个 onActivityResult 方法中捕获的图像方向，我已经搜索并找到了 ExifInterface，但它对我不起作用，我在 LG Optimus Android 设备上进行测试，它总是为我返回 0。

问题是在捕获图像后它会旋转。任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:07:18.647

您可以使用该方法获得旋转，然后根据结果旋转图像 -

```
private int getDisplayRotation() {
    int rotation = getWindowManager().getDefaultDisplay().getRotation();
    switch (rotation) {
        case Surface.ROTATION_0: return 0;
        case Surface.ROTATION_90: return 90;
        case Surface.ROTATION_180: return 180;
        case Surface.ROTATION_270: return 270;
    }
    return 0;
} 
```

为了摆脱许多设备特定的问题，我从头开始创建相机您可以从[https://github.com/vinsol/expense-tracker/tree/master/src/com/vinsol/expensetracker/cameraservice获取代码](https://github.com/vinsol/expense-tracker/tree/master/src/com/vinsol/expensetracker/cameraservice)

然后使用以下方法调用它

```
private void startCamera() {
    if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED)) {
        Intent camera = new Intent(this, Camera.class);
        File file = new File("123.jpg");
        Log.d("camera file path "+file.toString() );
        camera.putExtra("FullSizeImagePath", file.toString());
        startActivityForResult(camera, PICTURE_RESULT);
    } else {
        Toast.makeText(this, "sdcard not available", Toast.LENGTH_LONG).show();
    }
} 
```

# java - 在虚拟机中运行单实例 AppScale

> ID：12210896
> 
> 赞同：1
> 
> 时间：2012-08-31T07:40:40.410
> 
> 标签：java, appscale

我试图在安装在 Vmware 盒子中的单实例节点中运行 AppScale，并在同一服务器虚拟机中运行 appscale-tools 并收到此错误：

```
root@appscale:~appscale-tools-bin# ./appscale-run-instances --ips ips.yaml
About to start AppScale over a non-cloud environment.
Head node successfully created at 127.0.0.1\. It is now starting up cassandra via the command line arguments given.
Generating certificate and private key
Starting server at 127.0.0.1 
Please wait for the controller to finish pre-processing tasks.
Warning: Permanently added '127.0.0.1' (RSA) t othe list of known host.
Error: Couldn't find me in the node map 
```

我被告知的解决方案是更改此源中的代码：

```
appscale/AppController/lib/helperfunctions.rb 
```

并查找`self.local_ip()`并更改为：

```
def self.local_ip()
  return "127.0.0.1"
end 
```

但是当我跑步时

```
./appscale-run-instances --ips ips.yaml 
```

我不确定，但它只是继续说： `"Please wait for the controller to finish pre-processing tasks."` 已经有几分钟了。

所以我决定终止它，这就是我得到的：

```
"...common_functions.rb:399:in 'sleep_unti_port_is_open" 
```

在这种情况下，我似乎需要打开一个端口，我在 Ubuntu 中运行 AppScale，我应该在我的服务器中打开哪个端口？

这是完整的命令行：

```
./appscale-run-instances --ips ips.yaml 

About to start AppScale over a non-cloud environment.
Head node successfully created at 127.0.0.1\. 
It is now starting up cassandra via the command line arguments given. 
Generating certificate and private key.
Starting server at 127.0.0.1 

Please wait for the controller to finish pre-processing tasks. 

^C./../lib/../lib/common_functions.rb:399:in sleep': Interrupt
 from ./../lib/../lib/common_functions.rb:399:in 'sleep_until_port_is_open'
 from ./../lib/../lib/common_functions.rb:397:in 'loop'
 from ./../lib/../lib/common_functions.rb:397:in 'sleep_until_port_is_open' 
 from ./../lib/../lib/common_functions.rb:1359:in 'start_appcontroller' 
 from /usr/lib/ruby/1.8/timeout.rb:62:in ttimeout. 
 from ./../lib/../lib/common_functions.rb:1351:in 'start_appcontroller' 
 from ./../lib/../lib/common_functions.rb:548:in 'start_head_node' 
 from ./../lib/appscale_tools.rb:284:in trun_instances' 
 from ./appscale-run-instances:14 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-12T02:15:00.657

在此处使用预构建的 Appscale 图像或按照[此处列出的步骤](http://www.appscale.com/community/downloads/)[https://github.com/AppScale/appscale/wiki/Virtualized-Cluster](https://github.com/AppScale/appscale/wiki/Virtualized-Cluster)将解决此问题。

它还具有构建脚本：

```
$ sudo su
# cd /root
# wget -O - http://bootstrap.appscale.com | sh 
```

# c# - 应用程序调用了为不同线程编组的接口

> ID：12210898
> 
> 赞同：5
> 
> 时间：2012-08-31T07:40:48.883
> 
> 标签：c#, .net, com, wmi

我正在使用 WMI 来查询设备。插入或移除新设备时，我需要更新 UI（以使设备列表保持最新）。

```
private void LoadDevices()
{
    using (ManagementClass devices = new ManagementClass("Win32_Diskdrive"))
    {
        foreach (ManagementObject mgmtObject in devices.GetInstances())
        {
            foreach (ManagementObject partitionObject in mgmtObject.GetRelated("Win32_DiskPartition"))
            {
                foreach (ManagementBaseObject diskObject in partitionObject.GetRelated("Win32_LogicalDisk"))
                {
                    trvDevices.Nodes.Add( ... );
                }
            }
        }
    }
}

protected override void WndProc(ref Message m)
{
    const int WM_DEVICECHANGE = 0x0219;
    const int DBT_DEVICEARRIVAL = 0x8000;
    const int DBT_DEVICEREMOVECOMPLETE = 0x8004;
    switch (m.Msg)
    {
        // Handle device change events sent to the window
        case WM_DEVICECHANGE:
            // Check whether this is device insertion or removal event
            if (
                (int)m.WParam == DBT_DEVICEARRIVAL ||
                (int)m.WParam == DBT_DEVICEREMOVECOMPLETE)
        {
            LoadDevices();
        }

        break;
    }

    // Call base window message handler
    base.WndProc(ref m);
} 
```

此代码引发异常并显示以下文本

`The application called an interface that was marshalled for a different thread.`

我放

```
MessageBox.Show(Thread.CurrentThread.ManagedThreadId.ToString()); 
```

在 LoadDevices 方法的开头，我看到它总是从同一个线程 (1) 调用。您能否解释一下这里发生了什么以及如何摆脱这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T12:29:25.823

最后我使用新线程解决了它。我拆分了这个方法，所以现在我有`GetDiskDevices()`方法`LoadDevices(List<Device>)`，我有`InvokeLoadDevices()`方法。

```
private void InvokeLoadDevices()
{
    // Get list of physical and logical devices
    List<PhysicalDevice> devices = GetDiskDevices();

    // Check if calling this method is not thread safe and calling Invoke is required
    if (trvDevices.InvokeRequired)
    {
        trvDevices.Invoke((MethodInvoker)(() => LoadDevices(devices)));
    }
    else
    {
        LoadDevices(devices);
    }
} 
```

当我收到 DBT_DEVICEARRIVAL 或 DBT_DEVICEREMOVECOMPLETE 消息时，我调用

```
ThreadPool.QueueUserWorkItem(s => InvokeLoadDevices()); 
```

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-21T21:30:29.670

对于 w10 上的 UWP，您可以使用：

```
public async SomeMethod()
{
    await CoreWindow.GetForCurrentThread().Dispatcher.RunAsync(CoreDispatcherPriority.High, () =>
        {
             //   Your code here...
        });
} 
```

# android - 手机上的apk解析错误，但在模拟器上运行良好

> ID：12210899
> 
> 赞同：1
> 
> 时间：2012-08-31T07:40:54.943
> 
> 标签：android, emulation

我的应用程序在模拟器上运行良好，但是当我在设备上运行时，解析包时出错！

应该进行哪些更改才能使其在设备上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:43:50.393

在以下情况下，安装会给出指定的错误：

```
Name of the package is changed after signing: Use the exact name as the signed package is (instead, adjust the name in Manifest)
Package is compiled against on higher API level: Correct the API level in Manifest file
Package is executed from SD-card: Run (install) the apk -file from phones memory OR use adb command to install it 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:47:57.813

很可能，您是针对更高的 API 级别编译的。转到您的清单文件并更改此行

```
uses-sdk android:minSdkVersion="VERSION_NUMBER_YOU_USING" 
```

到

```
uses-sdk android:minSdkVersion="3" 
```

看看你是否可以在你的设备上安装 apk。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T07:48:49.870

您在 Android-Manifest.xml 中的 minSdkVersion 值超过了您的手机 API 级别。减少它以安装在您的手机上。在此处找到适合您手机 Android 版本的 API 级别：
1.5：API 级别 3
1.6：API 级别 4
2.0：Api 级别 5
2.0.1：API 级别 6
2.1：API 级别 7
2.2：API 级别 8
2.3：API 级别 9
2.3 .3：API 级别 10
3.0：API 级别 11
3.1：API 级别 12
3.2：API 级别 13
4.0：API 级别 14
4.0.3：API 级别 15
4.1：API 级别 16

# java - j2me 中的 HTTP 连接

> ID：12210904
> 
> 赞同：0
> 
> 时间：2012-08-31T07:41:05.950
> 
> 标签：java, httpconnection

在我的应用程序中，我试图访问 1 个返回 XML 响应的 API。现在的问题是我从 API 获取响应代码，但是当我直接在 Web 浏览器中运行 API 时，我得到 XML 响应。问题是否出在服务器端或在我的代码中。请帮助我。

这是我的代码：

```
try{
//            System.out.println("b4 conn");
            HttpConnection conn = (HttpConnection)Connector.open(rssUrl);
            conn.setRequestProperty("Content-Type","application/x-www-form-urlencoded");
            System.out.println("after conn="+conn.getResponseCode());                ---------->I am not getting the response here(so going to catch and closing the application).
            if(conn.getResponseCode()==HttpConnection.HTTP_OK)
            {

                Some stuff goes here.
            }
catch(Exception ex){
       // System.out.println("Error = "+ex);
        m.DisplayCloseAsk();

        } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:00:17.267

您正在读取响应代码，您需要从 HTTPConnection 读取**响应**，试试这个：

```
InputStream response = conn.getInputStream(); 
```

然后从此 InputStream 中读取数据（响应）。

看看这个[关于 SO 的迷你教程](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests)。

# ssl - 您是否应该提供一个 crt 文件来帮助人们验证您的 OAuth2 api 上的证书？

> ID：12210905
> 
> 赞同：0
> 
> 时间：2012-08-31T07:41:18.713
> 
> 标签：ssl, https, oauth-2.0, ssl-certificate

我有一个通过 HTTPS 运行的 OAuth2 api。由于 OAuth2 依赖于 HTTPS 的安全性（不做任何自己的签名），我在开发人员文档中添加了一条注释，鼓励开发人员确保他们在其客户端应用程序中验证 ssl 证书。

我注意到一些应用程序使 crt 文件公开可用或将其包含在他们的客户端中：[https ://github.com/stripe/stripe-ruby/tree/master/lib/data](https://github.com/stripe/stripe-ruby/tree/master/lib/data)

我认为这只是为了确保它使用正确的证书（而不是任何系统安装的证书）？如果是这样，在您的 API 页面上向开发人员公开此 crt 文件是否是一个好主意，以及生成此文件的简单命令/方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:02:41.657

当一个人以这种方式公开证书时，他鼓励客户对证书进行二进制比较，即不是以相应标准定义的方式通过构建证书链并验证它们来验证证书），而是简单地将提供的证书与证书进行比较存储在客户端中。

这种方法在几个方面被打破：

1.  二进制比较不会让客户端知道证书已被吊销
2.  通过二进制比较，服务器证书的更改将需要更新所有客户端，以便将新证书包含在其中。升级失败将意味着无法连接。

因此，包含证书和“直接”使用此类证书是没有意义的，对服务器所有者和客户端都没有意义。

二进制比较适用的唯一情况是使用自签名证书时（在这种情况下，构建和验证链将不起作用）。但是在任何情况下，自签名证书都是一个坏主意（由于上面列出的原因和其他一些原因）。

# android - 片段活动捕获 onKeyDown 并在片段中使用

> ID：12210906
> 
> 赞同：31
> 
> 时间：2012-08-31T07:41:24.587
> 
> 标签：android, android-activity, fragment, onkeydown

我有寻呼机的片段活动：

```
List<Fragment> fragments = new Vector<Fragment>();
    fragments.add(Fragment.instantiate(this, PastEventListFragment.class.getName(),bundle));
    fragments.add(Fragment.instantiate(this, EventListFragment.class.getName(),bundle));

    this.mPagerAdapter  = new EventPagerAdapter(super.getSupportFragmentManager(), fragments);
    //
    ViewPager pager = (ViewPager)super.findViewById(R.id.viewpager1);

    pager.setAdapter(this.mPagerAdapter);
    pager.setCurrentItem(1); 
```

我赶上 onKeyDown 事件：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_MENU) {

    }
    return super.onKeyDown(keyCode, event);
} 
```

问题是：如何在我在此活动中实例化的所有片段中使用事件。谢谢

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-31T08:17:42.050

您可以做的是在您的片段类中定义一个自定义方法。例如：

```
public void myOnKeyDown(int key_code){
   //do whatever you want here
} 
```

并在 Activity 类中引发按键事件时调用此方法。例如：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_MENU) {
        ((PastEventListFragment)fragments.get(0)).myOnKeyDown(keyCode);
        ((EventListFragment)fragments.get(1)).myOnKeyDown(keyCode);

        //and so on...
    }
    return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-02-25T14:43:07.123

如果有人对如何使用 Boradcast 感兴趣：

在 onViewCreated 的片段中

```
@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);

// Register to receive messages.
// We are registering an observer (mMessageReceiver) to receive Intents
// with actions named "custom-event-name".
 LocalBroadcastManager.getInstance(this).registerReceiver(mMessageReceiver,
 new IntentFilter("activity-says-hi"));

...}

 // Our handler for received Intents. This will be called whenever an Intent
 // with an action named "custom-event-name" is broadcasted.
 private BroadcastReceiver mMessageReceiver = new BroadcastReceiver() {
 @Override
 public void onReceive(Context context, Intent intent) {
 // Get extra data included in the Intent

 doSomethingCauseVolumeKeyPressed();

 }
}; 
```

你的 keyevent - 投入活动的代码

```
@Override
public boolean dispatchKeyEvent(KeyEvent event) {
    int action = event.getAction();
    int keyCode = event.getKeyCode();
    switch (keyCode) {
        case KeyEvent.KEYCODE_VOLUME_UP:
            if (action == KeyEvent.ACTION_DOWN) {
                sendBroadcast();
            }
            return true;
        case KeyEvent.KEYCODE_VOLUME_DOWN:
            if (action == KeyEvent.ACTION_DOWN) {
                sendBroadcast();
            }
            return true;
        default:
            return super.dispatchKeyEvent(event);
    }
} 
```

您的广播发件人：

```
private void  sendVolumeBroadcast(){
    Intent intent = new Intent("activity-says-hi");
    LocalBroadcastManager.getInstance(this).sendBroadcast(intent);
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-12-06T09:44:09.777

正如其他人所提到的，接受的答案导致活动与其片段之间的紧密耦合。

我建议改用某种基于事件的实现。这更可重用，并产生更好的软件架构。在以前的项目中，我使用了以下解决方案之一（Kotlin）：

### 广播

使用 Android 的 LocalBroadcastManager：[文档](https://developer.android.com/reference/android/support/v4/content/LocalBroadcastManager)

创建一个广播接收器：

```
class SomeBroadcastReceiver : BroadcastReceiver() {

    override fun onReceive(context: Context?, intent: Intent?) {
        val keyCode = intent?.getIntExtra("KEY_CODE", 0)
        // Do something with the event
    } 
```

}

在您的活动中：

```
class SomeActivity : AppCompatActivity() {

    override fun onKeyDown(keyCode: Int, event: KeyEvent?): Boolean {
        val intent = Intent("SOME_TAG").apply { putExtra("KEY_CODE", keyCode) }
        LocalBroadcastManager.getInstance(this).sendBroadcast(intent)
        return super.onKeyDown(keyCode, event)
    }

} 
```

然后，在任何片段（或服务等）中：

```
class SomeFragment : Fragment() {

    val receiver = SomeBroadcastReceiver()

    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {

        val filter = IntentFilter().apply { addAction("SOME_TAG") }
        LocalBroadcastManager.getInstance(context!!).registerReceiver(receiver, filter)

        return super.onCreateView(inflater, container, savedInstanceState)
    }

} 
```

### 事件总线

使用[事件总线](https://github.com/greenrobot/EventBus)

创建一个事件类：

```
data class Event(val keyCode: Int) 
```

在您的活动中：

```
class SomeActivity : AppCompatActivity() {

    override fun onKeyDown(keyCode: Int, event: KeyEvent?): Boolean {
        EventBus.getDefault().post(Event(keyCode))
        return super.onKeyDown(keyCode, event)
    }

} 
```

然后，在您的片段中：

```
class SomeFragment : Fragment() {

    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {

        // Register for events
        EventBus.getDefault().register(this)

        return super.onCreateView(inflater, container, savedInstanceState)
    }

    @Subscribe
    public fun onKeyEvent(event : Event) {
        // Called by eventBus when an event occurs
    }

    override fun onDestroyView() {
        super.onDestroyView()
        EventBus.getDefault().unregister(this)
    }

} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-08-05T15:24:51.450

按照@hsu.tw 的回答以避免紧密耦合，我发现了这个[要点](https://gist.github.com/brucetoo/f7c9bcabe2ce51610ccf)。

避免紧密耦合是有代价的：您需要一个可聚焦的视图（幸运的是，这是我的情况，因为我已经在前台有一个可以监听其他触摸事件的视图，所以我只是添加了`View.OnKeyListener`它）。

`View.OnKeyListener`独立于 Activity将 a 附加到 Fragment 中的视图所需的步骤是（检查[要点](https://gist.github.com/brucetoo/f7c9bcabe2ce51610ccf)）：

```
 view.setFocusableInTouchMode(true);
 view.requestFocus();
 view.setOnKeyListener(pressKeyListener); 
```

`onViewCreated`我在Fragment的回调中实现了这一点

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-04T09:22:41.330

我对 Activity 和 Fragment 类进行了子类化以执行 KeyEvents 传递。对我来说，它看起来比发送本地广播更清晰。但是这个解决方案可能不是那么灵活。自行选择首选方式。

这是活动：

```
public abstract class KeyEventPassingActivity extends Activity {

    public interface KeyEventListener extends View.OnKeyListener {
        boolean isVisible();
        View getView();
    }

    private final List<KeyEventListener> keyEventHandlerList = new ArrayList<>();

    @Override
    public boolean dispatchKeyEvent(KeyEvent event) {
        for (KeyEventListener handler : keyEventHandlerList) {
            if (handleKeyEvent(handler, event)) {
                return true;
            }
        }
        return super.dispatchKeyEvent(event);
    }

    void addKeyEventHandler(@NonNull KeyEventListener handler) {
        keyEventHandlerList.add(handler);
    }

    void removeKeyEventHandler(@NonNull KeyEventListener handler) {
        keyEventHandlerList.remove(handler);
    }

    /**
     * @return <tt>true</tt> if the event was handled, <tt>false</tt> otherwise
     */
    private boolean handleKeyEvent(@Nullable KeyEventListener listener, KeyEvent event) {
        return listener != null
                && listener.isVisible()
                && listener.onKey(listener.getView(), event.getKeyCode(), event);
    }
} 
```

和片段：

```
public abstract class KeyEventHandlingFragment extends Fragment
        implements KeyEventPassingActivity.KeyEventListener {

    @SuppressWarnings("deprecation")
    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);
        if (activity instanceof KeyEventPassingActivity) {
            ((KeyEventPassingActivity) activity).addKeyEventHandler(this);
        }
    }

    @Override
    public void onDetach() {
        Activity activity = getActivity();
        if (activity instanceof KeyEventPassingActivity) {
            ((KeyEventPassingActivity) activity).removeKeyEventHandler(this);
        }
        super.onDetach();
    }
} 
```

要点：[https ://gist.github.com/0neel/7d1ed5d26f2148b4168b6616337159ed](https://gist.github.com/0neel/7d1ed5d26f2148b4168b6616337159ed)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-06-14T08:02:03.577

我在开发 Android TV 应用程序时遇到了同样的问题。

我这样解决这个问题：

在 onCreateView 方法中，我通过某个 View 调用“requestFocus”。（我将其标记为 ViewA。）然后我将 KeyEventListener 设置为 ViewA。

在您的情况下，您应该在 Adapter 和 PagerChangeListener 中执行此操作（set-KeyEventListener）。

# apache-flex - 使用 pepflashplayer.dll 在 Chrome 中出现错误 2032

> ID：12210907
> 
> 赞同：0
> 
> 时间：2012-08-31T07:41:30.763
> 
> 标签：apache-flex, iis-7, flash

我有一个 flex 应用程序，它在 chrome 获得新播放器之前一直运行良好：21.0.1180.83\PepperFlash\pepflashplayer.dll

应用程序在从 xml 文件加载参数时必须中断。它挂起显示应用程序的加载程序，底部是“错误#2032”消息。

应用程序仍然可以在我的本地主机和其他浏览器上运行，但不能在生产服务器（IIS7）上运行。不幸的是，这也意味着它更难调试......

一些可能是错误的怀疑：

*   如果我禁用 pepflashplayer，它会在 chrome 中再次运行（在旧播放器上），所以我相信它与播放器有关。
*   它可能与跨域文件有关吗？我只有子域上的 crosdomain.xml 文件（parameters.xml 所在的位置）
*   是否与 IIS 中为 xml 设置的 mimo 类型有关
*   我还连接到网络服务。此外，它是一个问题，因为它是 http 到 https 的调用。这可能是问题所在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T07:12:14.910

好的，我解决了。问题出在一个旧的 .actionscriptproperties 自动生成的文件中，其中包含许多对各种 crossdomain.xml 的过时引用。

似乎这不会在项目清理中得到清理，因此需要重新导入项目以修复 #2032 错误。

希望这可以帮助某人。

# python - Monkey 修补模块中的功能以进行单元测试

> ID：12210910
> 
> 赞同：8
> 
> 时间：2012-08-31T07:41:51.090
> 
> 标签：python, unit-testing, monkeypatching

我在一个模块中有以下方法，它调用从另一个模块导入的另一个方法：

```
def imported_function():
    do_unnecessary_things_for_unittest() 
```

实际需要测试的方法，导入并使用上述函数：

```
from somewhere import imported_function

def function_to_be_tested():
    imported_function()
    do_something_more()
    return 42 
```

**import_function**中的内部调用和相关计算并不重要，它们也不是我想要测试的，所以我只想在测试实际函数**function_to_be_tested**时跳过它们。

因此，我尝试对测试方法中**某处**命名的模块进行猴子补丁，但没有运气。

```
def test_function_to_be_tested(self):
    import somewhere
    somewhere.__dict__['imported_function'] = lambda : True 
```

问题是，如何在测试时对模块的方法进行修补，以便在测试阶段不会调用它？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-31T08:34:23.283

I think better to use [Mock Library](http://pypi.python.org/pypi/mock/)

So you can do something like:

```
from somewhere import imported_function

@patch(imported_function)
def test_function_to_be_tested(self, imported_function):
    imported_function.return_value = True
    #Your test 
```

I think for unit tests it's better than monkey patch.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-31T08:01:05.847

假设您有以下文件：

**某处.py**

```
def imported_function():
    return False 
```

**测试文件**

```
from somewhere import imported_function

def function_to_be_tested():
    return imported_function() 
```

A call to `testme.function_to_be_tested()` would return `False`.

* * *

Now, the trick is to import `somewhere` *before* `testme`:

```
import somewhere
somewhere.__dict__['imported_function'] = lambda : True

import testme
def test_function_to_be_tested():
    print testme.function_to_be_tested()

test_function_to_be_tested() 
```

**Output:**

> True

* * *

Or, reload the `testme` module

```
import testme

def test_function_to_be_tested():
    print testme.function_to_be_tested()
    import somewhere
    somewhere.__dict__['imported_function'] = lambda : True
    print testme.function_to_be_tested()
    reload(testme)
    print testme.function_to_be_tested()

test_function_to_be_tested() 
```

**Output:**

> False
> False
> True

# perl - Oracle WE8ISO8859P15 字符集在 perl 脚本中转换为 utf8

> ID：12210917
> 
> 赞同：0
> 
> 时间：2012-08-31T07:42:22.470
> 
> 标签：perl, oracle, utf-8, character-encoding

首先，我有一个数据库，不允许我更改任何内容，因此我必须处理给定的字符集。

这是数据库的字符集：

```
SELECT * from NLS_DATABASE_PARAMETERS 
 WHERE parameter IN ( 'NLS_LANGUAGE', 'NLS_TERRITORY', 'NLS_CHARACTERSET');

NLS_LANGUAGE             GERMAN     
NLS_TERRITORY            GERMANY
NLS_CHARACTERSET         WE8ISO8859P15 
```

当连接到这个数据库（使用 perl）时，我将连接字符集设置为`WE8ISO8859P15`. 我认为到目前为止我做得对。:)

现在是棘手的部分，它失败了。数据库中的数据需要转换为 utf8，才能在我使用数据的浏览器中正确显示。

据我了解，设置 NLS_LANG 应该为我处理这个问题吗？设置时，它应该将`WE8ISO8859P15`数据（动态）转换为`utf8`，对吗？

因此，在 perl 中建立连接之前，我将环境变量设置为

```
$ENV{'NLS_LANG'} = ".AL32UTF8" 
```

但是没有任何改变，我做错了吗？

手动转换数据时，在 perl 脚本中如下所示：

```
Encode::from_to($data, 'iso-8859-15', 'utf8'); 
```

它的工作如预期。

我真的很感激一些帮助。

谢谢，安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:59:42.307

我不是 perl 专家。但`NLS_LANG`参数通常需要类似于

```
NLS_LANG = GERMAN_GERMANY.AL32UTF8 
```

不仅仅是`AL32UTF8`。是否`NLS_LANG`设置在您环境中的其他位置？还是 perl 脚本是唯一设置它的东西？

# c# - 获取不在帧就绪事件中的彩色图像

> ID：12210931
> 
> 赞同：0
> 
> 时间：2012-08-31T07:43:06.603
> 
> 标签：c#, kinect, openkinect, nui

我的kinect有点问题。当我尝试从事件中获取彩色图像时： Sensor_AllFramesReady 一切正常。例子：

```
using (ColorImageFrame colorFrame = e.OpenColorImageFrame()) {
    //save image for print
    if (colorFrame == null) {
        return;
    }
    byte[] colorData = new byte[colorFrame.PixelDataLength];
    colorFrame.CopyPixelDataTo(colorData);
    int averagedImage = colorFrame.Width * PixelFormats.Bgr32.BitsPerPixel / 8;
    int stride = colorFrame.Width * 4;
    pictureBitmap = BitmapSource.Create(colorFrame.Width, colorFrame.Height, 96, 96, PixelFormats.Bgr32, null, colorData, stride);
} 
```

但是当我尝试在事件之外执行相同的代码时

```
using (ColorImageFrame Image = Sensor.ColorStream.OpenNextFrame(10)) {

} 
```

我收到错误：“设置事件侦听器后无法调用此 API”

我尝试在调用此函数之前删除该事件，但这不会改变任何内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:03:45.717

您必须选择事件处理程序或轮询方法。您可以使用该事件并保存最后一帧以在其他地方使用它。

# sencha-touch - 如何更改 sencha touch 2 中按钮边框半径的默认值？

> ID：12210935
> 
> 赞同：0
> 
> 时间：2012-08-31T07:43:21.423
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我正在使用 Sencha Touch 2，我需要更改应用程序中按钮的默认边框半径。

怎样才能做到？请给我一个代码示例。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:06:06.653

我会尝试这样的事情：

```
.x-button {
  border-radius:0.2em !important;
} 
```

仅当您确定要更改应用程序中每个按钮的边框半径时。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T10:36:21.447

包括

```
$button-radius: '2px'; 
```

在您的 custom-theme.scss 文件中

然后使用命令 compass compile 编译 scss 文件。

# node.js - 使用核心 nodejs 创建会话机制

> ID：12210937
> 
> 赞同：0
> 
> 时间：2012-08-31T07:43:30.160
> 
> 标签：node.js, cookies

我正在尝试在 nodejs 中为登录、聊天会话等创建一个完整的会话管理。我用谷歌搜索了很多，我得到的每个解决方案都带有一些框架/模块。我不想使用任何模块/框架。我宁愿为此建立自己的解决方案：

所以这是计划：

1.  我将在客户端机器上设置一个会话 cookie（尚未弄清楚如何）
2.  对于每个cookie，我将在数据库中维护一个唯一的ID，而不是像php那样的文件（我使用的是mongodb）
3.  当用户打开应用程序时，将设置一个 cookie，将在数据库中创建一个条目，并从 db 中获取相应的信息。

我还没有为此制定一个具体的计划。我想知道这样做是否是个好主意？我在某处读到......'真正的男人不使用任何框架。他们自己做一切'：P

如果我的方向错误，请纠正我。M只是从这些事情开始......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:33:27.573

我不知道任何封闭源代码的 node.js 框架。只需选择一个似乎可以做你想做的事，下载它，然后研究源代码，看看开发人员是如何实现它的。然后提出你（感知到的）他们如何做到的改进。您可能会发现实施会话管理涉及一大堆对您来说从未明显的挑剔细节。

如果这是一项不允许您查看相关代码的学校作业，请忽略上述所有建议。如果是这样，我同情你，因为你有一个不称职的老师。

# css - 制作 列出可点击的图像并保持格式

> ID：12210939
> 
> 赞同：0
> 
> 时间：2012-08-31T07:43:39.680
> 
> 标签：css, html

我正在使用`<ul>`. 单击项目可展开或折叠节点。

列表图像（项目符号）不可点击，因此解决方案似乎是隐藏它们并只显示我自己的图像。这样做的问题是，当一个项目换行到下一行时，列表项的默认换行缩进行为会丢失。

如何在 CSS 中实现我想要的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:12:08.593

无需用图像替换子弹。当您将`onclick`an 的事件绑定`li`到某个函数时，单击项目符号似乎也会触发它。要将`onclick`项目符号的 绑定到不同的函数，请将`li`文本内容包装在 a 中`span`并分配不同的`onclick`事件；就像是：

```
$("li").click(function() {
   alert("I'm a bullet! Glee's awesome!");
});
$("li span").click(function(event) {
   alert("I'm some text! Glee's awesome!");
   event.stopPropagation(); //make sure the li onclick isn't fired
}); 
```

还有一个工作演示：[little link](http://jsfiddle.net/7EbVw/6/)。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T07:46:34.833

你可以使用这个：

```
li { 
    padding-left: 1em;
    text-indent: -1em;
} 
```

也可以是

```
#myDiv { 
    padding-left: 1em;
    text-indent: -1em;
} 
```

这将在您的列表/div 的第一行之后缩进。

`display: block;`如果它不起作用，您可能还需要将 a 添加到元素中。没有测试过，但试一试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T07:53:32.803

对我来说，标签前面的项目符号`<li>`似乎完全可以点击：http: [//jsfiddle.net/jfriend00/5xzNR/](http://jsfiddle.net/jfriend00/5xzNR/)所以我认为您可以只允许您的常规`<li>`标签可点击。

# machine-learning - 我是否应该返回更多建议，然后在精确召回曲线中有相关文档？

> ID：12210940
> 
> 赞同：3
> 
> 时间：2012-08-31T07:43:42.977
> 
> 标签：machine-learning, information-retrieval, precision-recall

我正在尝试绘制精确召回曲线，但我有比相关文档更多的文档推荐。假设对于一个训练示例，只有 3 个相关文档：A、C、E。但它可能是从 A 到 Z 的所有文档。然后我将其向量化为：

原始 = [1, 0, 1, 0, 1, ... ]

假设我的预测对 A、C、E 具有最大的值，而对所有其他文档具有较小的值：

预测 = [0.9, 0.1, 0.8, 0.1, 0.7, ... ]

然后我计算前 k 个预测的精度和召回率，首先仅使用具有 {0.9} 的预测，然后使用 {0.9 , 0.8} 和 {0.9, 0.8, 0.7} 的预测。在那之前我的精度是1。但是在那之后，精度只能下降，因为没有更多的相关文件。继续用 {0.9, 0.8, 0.7, 0.1, ...} 计算精度/召回率是否正确？

我想我通过提问找到了这个缺陷，当我返回建议 {0.9, 0.8, 0.7} 时，不仅精度为 1，而且召回率也是如此。那我应该停下来退回文件，对吧？

**编辑：解释是可以返回更多文档，但是在返回所有相关文档后，召回率保持为 1，并且精度直线下降。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:27:51.927

似乎这取决于您的曲线的相关尺寸是什么，即您想要测量其效果的参数是什么？

例如，如果有趣的参数是 k，即返回的文档数，那么您可以将其从 1 更改为某个 n，并计算每个点的 P/R（实际上，您可能会在通过某个特定点后得到一条非常陡峭的线）价值）。

您还可以使用其他 sachem，例如使用阈值 - 返回分数大于 some 的所有文档。在这种情况下，您可以将 s 从 1 变为 0.1，并计算每个点的 P/R。

假设您在多个测试实例上执行测试，人们会期望匹配文档的确切数量会有所不同；因此，对于给定的（合理的）k，平均精度和召回率将小于 1，即使对于特定实例之一，相关文档的数量小于 k。

# xml - Oracle SQL*Loader 可以处理 XML 吗？

> ID：12210944
> 
> 赞同：1
> 
> 时间：2012-08-31T07:43:57.783
> 
> 标签：xml, oracle, upload, sql-loader

Oracle 是否提供 XML 格式文件的标准化上传？我认为用于 XML 输出的规范格式 structure =`ROWSET/ROW/columname`可以通过运行带有适当控制文件内容的 sqlldr 再次上传回表中。
但是我在网络上的任何地方都找不到任何关于此的信息，并且试验后的错误消息似乎表明只能将 XML 上传到 XML 类型格式的表格中，我只想在普通表格中上传数据但提供数据以 XML 格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:54:29.340

不，SQL*Loader 只能处理“平面”文件。

一种选择是编写一个 XSLT 转换，将`ROWSET/ROW/column`格式转换为文本文件，然后将其导入目标表。

另一种选择是将 XML 导入单行，然后使用 Oracle 的 XML 函数从该临时表中选择一个关系结果并将其插入到实际表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T20:49:34.470

没有标准化的选项，但使用这种特定格式，您可以做到。如果你有一张桌子：

```
CREATE TABLE test_tab (
    id NUMBER,
    text VARCHAR2(50)
); 
```

以及您在`test_tab.xml`文件中的记录：

```
<ROWSET>
<ROW>
<ID>1</ID>
<TEXT>This is some text</TEXT>
</ROW>
<ROW>
<ID>2</ID>
<TEXT>This is some more text</TEXT>
</ROW>
<ROW>
<ID>3</ID>
<TEXT>This is some other text</TEXT>
</ROW>
<ROW>
<ID>4</ID>
<TEXT>This is also some text</TEXT>
</ROW>
</ROWSET> 
```

和一个控制文件`test_tab.ctl`：

```
LOAD DATA
INFILE 'test_tab.xml'
CONCATENATE 4
INTO TABLE test_tab
(
    dummy FILLER CHAR(15) TERMINATED BY "<ROW>",
    id CHAR(10) ENCLOSED BY "<ID>" AND "</ID>",
    text CHAR(40) ENCLOSED BY "<TEXT>" AND "</TEXT>"
) 
```

你可以做：

```
sqlldr usr/pwd control=test_tab.ctl

Commit point reached - logical record count 4

SELECT * FROM test_tab;

        ID TEXT
---------- --------------------------------------------------
         1 This is some text
         2 This is some more text
         3 This is some other text
         4 This is also some text 
```

你也可以从同一个文件创建一个外部表，如果你把目录放在 Oracle 可以看到的目录中：

```
CREATE TABLE test_tab (
    id NUMBER,
    text VARCHAR2(50)
)
ORGANIZATION EXTERNAL
(
    TYPE ORACLE_LOADER
    DEFAULT DIRECTORY some_dir
    ACCESS PARAMETERS
    (
        RECORDS DELIMITED BY "</ROW>"
        FIELDS
        (
            dummy CHAR(15) TERMINATED BY "<ROW>",
            id CHAR(10) ENCLOSED BY "<ID>" AND "</ID>",
            text CHAR(40) ENCLOSED BY "<TEXT>" AND "</TEXT>"
        )
    )
    LOCATION ('test_tab.xml')
)
PARALLEL
REJECT LIMIT UNLIMITED;

Table created.

SELECT * FROM test_tab;

    ID TEXT
---------- --------------------------------------------------
     1 This is some text
     2 This is some more text
     3 This is some other text
     4 This is also some text 
```

# iphone - 逆向工程？

> ID：12210945
> 
> 赞同：7
> 
> 时间：2012-08-31T07:44:01.450
> 
> 标签：iphone, ios, reverse-engineering, ipa

我有***.ipa**文件，它是 iphone 应用程序。

*   是否可以在该 ipa 中使用逆向工程并提取代码..？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T07:55:22.147

好吧，这并不是真正的黑客行为，但它肯定可以帮助您识别 UI 的某些部分......执行以下操作：

1- 在 Xcode 上创建一个新项目（与您的选择无关）

2-将您的设备连接到您的计算机

3- 在您的设备上分析您的项目。

4- 在配置文件中，选择**核心动画**

5-在选项上选择**颜色混合图层** 它将如下所示： ![在此处输入图像描述](../Images/2df10402fd604ff6600799f49ad3b53e.png)

6- 在配置文件运行时拔下您的设备。你的手机现在看起来像这样：

![在此处输入图像描述](../Images/c1f75519e1e17cad92e56624b198797c.png)

7-转到您要检查的应用程序。

尽管您看不到任何代码，但这可以帮助您识别应用程序的关键部分。要恢复正常，您可以重新启动设备，或者只是转到配置文件并再次运行它，然后取消选中**颜色混合图层**选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:48:48.377

如此处所述：[如何使用 Xcode 打开解密的 IPA 内容](https://stackoverflow.com/questions/6806545/how-to-use-xcode-to-open-decrypted-ipa-contents)ipa 只是可执行文件的“压缩”版本。

因此，如果您能够提取，则主要是反汇编可执行文件（汇编代码/反汇编程序）的问题。

但不知何故，这闻起来像鱼。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T07:55:58.310

不可能按照你想要的方式！`.ipa`文件仅包含资源（图像、声音文件、数据库文件等）和编译的类。代码作为二进制文件包含在这些编译的类中，因此，您最多可以看到应用程序是如何构造成类以及如何使用资源的，但无法获得开发人员编写的实际代码。您可以参考[这个 SO question](https://stackoverflow.com/questions/10222946/how-to-find-out-what-profile-was-used-for-building-ipa-file/10223230#10223230)来简要了解如何做到这一点。

# c# - NHibernate / LINQ：如何编写这个 JOIN 查询？

> ID：12210946
> 
> 赞同：2
> 
> 时间：2012-08-31T07:44:04.313
> 
> 标签：c#, nhibernate, join, linq-to-nhibernate

我得到了一个与实体 F 具有多对多关系的实体 E。现在我想计算与 F 的某个实例相关的所有 E 实例。

在过去的 HQL 时代，我使用了以下查询：

```
select count(*) from E e inner join e.fCollection f where f.id = :id 
```

:id 是相关 F 实例的主键。e.fCollection 是包含所有 F 实例的集合，e 与之相关。

使用 NH-to-LINQ，似乎无法加入 fCollection。

有任何想法吗？：） 先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T07:46:10.137

试试这个：

```
e.Count(x => x.fCollection.Any(y => y.id == id)); 
```

这将返回`e`具有至少一个具有指定 id 的集合项的 s 的数量。
如果您想要具有指定 id 的集合项的数量，请使用以下命令：

```
e.fCollection.Count(x => x.id == id); 
```

# javascript - Dojo 增强网格在 IE 9 中无法正常工作

> ID：12210949
> 
> 赞同：0
> 
> 时间：2012-08-31T07:44:15.707
> 
> 标签：javascript, dojo, grid

我有一个增强的网格，它连接到一个对象存储（其中包含一个内存存储）。结构非常简单，即它只显示没有“无滚动”或类似内容的行。在 Opera、Chrome 和 FF 中一切正常，但在 IE 中，网格内容的定位完全错误。不幸的是，我不能发布图片，但我也在道场邮件列表中提出了这个问题，我上传了图片。这是链接：
[http ://dojo-toolkit.33424.n3.nabble.com/Problem-with-the-positioning-of-the-grid-in-ie-9-td3989165.html](http://dojo-toolkit.33424.n3.nabble.com/Problem-with-the-positioning-of-the-grid-in-ie-9-td3989165.html)

我已经搜索了很多，并尝试了很多东西，但到目前为止没有任何改变...... 任何帮助将不胜感激。

这是我如何设置网格的代码：

```
var grid = new EnhancedGrid({
                        id：“网格”，
                        存储：数据存储，
                        查询：过滤，
                        自动宽度：真，
                        自动高度：真，
                        保持行：'5'，
                        行数：'60'，
                        插件：{
                            嵌套排序：真，
                            饼干：{过期：10}，
                            出口商：是的，
                            间接选择：{ headerSelector：true，宽度：'30px'，样式：'文本对齐：中心；'}，
                            菜单：{ rowMenu：“row_menu”}
                        },
                        结构：grid_structure
                    }， “网格”）;
网格.启动（）；

```

提前谢谢，Gernot

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T16:08:10.297

嘿，你不能直接捕捉到错误。为 IE 做一些跟踪和错误开发。我也遇到过很多关于 IE 和 Dojo DataGrid 的问题。

从您的网格中删除所有 cookie、选择和额外功能，并保持非常简单。尝试使基本的在 IE 上工作。

然后一一添加功能并验证它们是否正常工作，您将在此过程中找到罪魁祸首。

在此过程中，请记得经常清除浏览器缓存。

其繁琐的工作在解决问题后您将有很大的满足感。

祝一切顺利。

# android - 当任何设备中存在多个应用程序以对任何传入的 SMS 执行某些操作时，如何处理 Android 中的情况？

> ID：12210954
> 
> 赞同：1
> 
> 时间：2012-08-31T07:44:27.960
> 
> 标签：android, sms, handler

当手机中有一些应用程序为任何传入的 SMS 定义了**onReceive()**方法上的一些操作并且任何一个应用程序正在调用**abortBroadcast()**方法以从收件箱中删除短信时会发生什么。当然，我不知道他们在他们的应用程序中为他们的听众定义了什么优先级。因此，在这种情况下，假设我还想对任何传入的短信执行一些操作，并且还想将其保存在用户的收件箱文件夹中，那么当其他一些应用程序已经阅读并删除它时，我将如何获取该短信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:10:50.287

由于 sms 是受保护的广播，只有 Android 框架可以发送广播，所以没有人可以`abortBroadcast`对其进行操作。
为了存储短信，您永远不应该使用默认短信`contentProvider`，因为它将由系统消息传递应用程序更新。您应该使用自己的数据库或仅从默认消息传递应用程序已存储的数据库中获取项目。

# mysql - 做“small_table LEFT JOIN large_table”是不好的做法吗？

> ID：12210957
> 
> 赞同：2
> 
> 时间：2012-08-31T07:44:41.397
> 
> 标签：mysql, indexing

我正在连接到一个我无法管理的数据库，并且我编写了一个查询，该查询在两个表之间进行了左连接 - 一个很小，一个大几个数量级。在某些时候，数据库返回了这个错误：

> 表 '/tmp/#sql_some_table.MYI' 的密钥文件不正确；尝试修复它

我联系了管理员，并被告知我收到此错误是因为我的左连接不正确，我不应该将小表左连接到大表，并且我应该反转连接顺序。他们给出的原因是，当按照我的方式完成时，MySQL 将尝试创建一个太大的临时表并且查询将失败。他们的解决方案在其他地方失败了，但这在这里并不重要。

我发现他们的解释很奇怪，所以我对我的查询进行了解释：

```
 id = '1'
  select_type = 'SIMPLE'
        table = 'small_table'
         type = 'ALL'
possible_keys = NULL
          key = NULL
      key_len = NULL
          ref = NULL
         rows = '23'
        Extra = 'Using temporary; Using filesort'

           id = '1'
  select_type = 'SIMPLE'
        table = 'large_table'
         type = 'ref'
possible_keys = 'ID,More'
          key = 'ID'
      key_len = '4'
          ref = 'their_db.small_table.ID'
         rows = '41983'
        Extra = NULL 
```

（第二个表中的 41983 行对我来说不是很有趣，我只需要最新的记录，这就是为什么我的查询`order by large_table.ValueDateTime desc limit 1`在最后。）

我非常小心地按管理员自己告诉我的列进行选择，应该保存唯一值（因此我假设索引），但似乎他们没有索引这些列。

我的问题是 - 是按照我的方式进行连接（'small_table LEFT JOIN large_table'）一般是不好的做法，还是可以通过适当的索引成功执行此类查询？

编辑：这是查询的样子（这不是实际的查询，但类似）：

```
select large_table.ValueDateTime as LastDate,
       small_table.DeviceIMEI as IMEI,
       small_table.Other_Columns as My_Names,
       large_table.Pwr as Voltage,
       large_table.Temp as Temperature
from small_table left join large_table on small_table.ID = large_table.ID
where DeviceIMEI = 500
order by ValueDateTime desc
limit 1; 
```

基本上我正在做的是尝试获取设备的最新数据，因为电压和温度会随时间变化。DeviceIMEI、ID 和 ValueDateTime 应该是唯一的，但没有索引（就像我之前说的，我不管理数据库，我只有读取权限）。

编辑2：

**请专注于回答我的实际问题，而不是尝试重写我的原始查询。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:47:52.797

左连接的东西是红鲱鱼。

然而，临时表空间不足是一个实际问题。但是你加入的顺序没有区别。唯一重要的是 MySQL 必须处理多少行。

这让我想到了 LIMIT 命令：

这是问题所在：

它为了获得您要求的单行，MySQL 必须对整个记录集进行排序，然后获取最上面的记录集。为了对其进行排序，它必须将其存储在内存中或磁盘上。这就是你空间不足的地方。您请求的每一列都存储在磁盘上，用于整个表，然后进行排序。

这很慢，非常慢，并且会占用大量磁盘空间。

解决方案：

您希望 MySQL 能够使用索引进行排序。但在您的查询中它不能。它使用索引作为连接引用，而 MySQL 每个查询只能使用一个索引。

您甚至在排序列上有索引吗？先试试那个。

另一种选择是做一个单独的查询，在这里你只选择大表的 ID，LIMIT 1。然后临时表要小得多，因为它只有 ID，没有所有其他列。

Once you know the ID then retrieve all the columns you need directly from the tables. You can do this in one shot with a subquery. If you post your query I could rewrite it to show you, but it's basically `ID = (SELECT ID FROM ..... LIMIT 1)`

# user-interface - InstallShield (Windows Installer) 操作文本未针对自定义操作进行更新

> ID：12210958
> 
> 赞同：-2
> 
> 时间：2012-08-31T07:44:42.717
> 
> 标签：user-interface, progress-bar, windows-installer, installshield, installshield-2010

我正在使用 installshield 为产品开发安装程序，但我在更新自定义操作的 ActionText（当前操作描述）时遇到问题。

我在这里按照以下步骤操作：http: [//helpnet.flexerasoftware.com/installshield17helplib/ActionTextSettings.htm](http://helpnet.flexerasoftware.com/installshield17helplib/ActionTextSettings.htm)这很有意义，应该可以工作，但是我的自定义操作不会更新 UI 中的操作文本。

我在想，因为我的自定义操作运行并等待长时间运行的进程结束，所以它可能会阻塞负责更新操作文本的线程。

现在写了，好像没什么意义，但是不知道还有什么办法！

自定义操作的主要细节是：

```
Filename & Command line: wscript.exe "invisible.vbs" "longrunningbatch.bat"
Return Processing:       Synchronous
In-Script Execution:     Commit Execution in System Context 
```

invisible.vbs 包含：

```
CreateObject("Wscript.Shell").Run """" & WScript.Arguments(0) & """", 0, True 
```

上面的行应该隐藏 shell 窗口，'True' 确保 shell 在批处理文件完成运行之前不会返回。

我还根据链接将自定义操作添加到操作文本列表中，并将其与字符串相关联。

应该正常工作吗？

还有其他人经历过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-17T05:42:10.690

首先，您需要更新您的 Windows 安装程序，因为如果您已将操作从提交更改为延迟，并且您没问题，那么您就做了一些不寻常的事情。延迟操作适用于以某种与安装相关的方式修改系统的操作。提交动作是为了完成相关的延迟动作已经完成的任何工作（例如，延迟动作修改了一些系统文件。提交动作删除了未修改的系统文件的备份）。此外，如果您有一个延迟操作，那么您还应该有一个回滚操作，如果用户取消安装或安装失败，它会撤消延迟操作所做的任何操作。

以下两个链接应该可以帮助您指明正确的方向：

[http://blogs.flexerasoftware.com/installtalk/2011/10/i-take-it-all-back-using-windows-installer-msi-rollback-actions.html](http://blogs.flexerasoftware.com/installtalk/2011/10/i-take-it-all-back-using-windows-installer-msi-rollback-actions.html)

[http://www.installsite.org/pages/en/isnews/200108/index.htm](http://www.installsite.org/pages/en/isnews/200108/index.htm)

其次，如果自定义操作所做的只是更新进度对话框中的操作文本，那么您根本不需要它。Flexera 没有记录这一点，但您可以为通过直接编辑器构建的任何自定义操作设置操作文本。为此，请在“ActionText”表中添加条目，其中“Action”列是您的自定义操作的名称，“Description”列是您要显示的文本。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-31T08:28:04.033

行，

所以我找到了这篇文章： http: [//community.flexerasoftware.com/archive/index.php](http://community.flexerasoftware.com/archive/index.php?t-82772.html) ?t-82772.html ，它基本上说由于我的自定义操作设置为提交执行，安装在当时有效完成它正在运行，因此没有必要更新进度文本。

因此，针对我的情况的解决方法是将我的自定义操作移到 InstallFinalize 之前并切换到“延迟执行”。

希望这可能对某人有所帮助。

# asp.net-mvc - 在 ASP.NET MVC 控制器中创建进程

> ID：12210959
> 
> 赞同：1
> 
> 时间：2012-08-31T07:44:53.257
> 
> 标签：asp.net-mvc, iis, process

我需要通过我的 MVC 控制器运行应用程序。为了获得我使用以下[链接](https://stackoverflow.com/questions/909910/how-to-find-the-execution-path-of-a-installed-software)的安装路径（我使用了 Fredrik Mörk 提供的答案）。它有效，我可以通过一个进程运行 exe。当我在 IIS 上部署此解决方案时出现问题，它没有像在本地开发环境中创建进程那样创建进程。谁能告诉我如何通过托管在 IIS 上的解决方案创建 Windows 进程？

```
 private string GetPathForExe(string fileName)
    {
        private const string keyBase = @"SOFTWARE\Wow6432Node\MyApplication";
        RegistryKey localMachine = Registry.LocalMachine;
        RegistryKey fileKey = localMachine.OpenSubKey(string.Format(@"{0}\{1}", keyBase, fileName));
        object result = null;
        if (fileKey != null)
        {
            result = fileKey.GetValue("InstallPath");
        }
        fileKey.Close();
        return (string)result;
    }

    public void StartMyApplication()
    {
        Process[] pname = Process.GetProcessesByName("MyApplication");
        if (pname.Length == 0)
        {
            string appDirectory = GetPathForExe("MyApplication");

            Directory.SetCurrentDirectory(appDirectory);
            ProcessStartInfo procStartInfo = new ProcessStartInfo("MyApplication.exe");
            procStartInfo.WindowStyle = ProcessWindowStyle.Hidden;
            Process proc = new Process();
            proc.StartInfo = procStartInfo;
            proc.Start();
        }
    } 
```

# silverstripe - 将字段限制为某些用户

> ID：12210962
> 
> 赞同：0
> 
> 时间：2012-08-31T07:45:18.973
> 
> 标签：silverstripe

**使用 SilverStripe 2.4.7。**

我已经进行了一些搜索，但似乎无法找到答案。我想在 dataobjectmanager 的弹出窗口中包含一个复选框，但不是针对每个用户。

我有两个单独的页面，一个给一个用户，另一个给另一个，我只想要一个复选框。我认为一个 if 语句就足够了，又快又简单，对吧？

```
public function getCMSFields()
{
    $categories = array("Morning","Afternoon", "Evening", "Night");

    return new FieldSet(
        new TextField('Title'),
        new DatePickerField('Date', 'Date'),
        new ImageField('Photo', 'Photo'),
        new MoneyField('AdultPrice', 'Adult Price'),
        new MoneyField('ChildPrice', 'Child Price'),
        new DropdownField('Category', 'Choose a Category', $categories)
    ); 
```

这是我对 if 语句方法的尝试

```
 if($this->ClassName == 'Movie'){
        $films= DataObject::get('Films');

        if (!empty($films)) {

        // create an array('ID'=>'Name')
        $map = $films->toDropdownMap('ID', 'Name');

        $fieldset->push(new CheckboxSetField(
            $name = "Films",
            $title = "Select Films",
            $source = $map
            ));
        }
    } 
```

基本上，如果我在 getCMSFields_forPopup 中使用它，但不只是在 getCMSFields 中使用它，而是将我的 checkboxsetfield 更改为下拉菜单，这将有效。

**编辑**

我发现我的方法不起作用，因为 DOM 弹出窗口不能具有包含 DOM (DataObjectManager) 的页面的类名。这是一个简单的继承问题，我不敢相信我以前没见过。有关我如何解决原始查询的详细信息，请参阅下面的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:10:34.190

最后答案很简单。我做了以下，我希望有人觉得这很有用。

像往常一样在页面上创建复选框集

```
if(Permission::check("ADMIN")){
        if (! empty($values)) 
        {
            $checkBox = new CheckboxSetField(                                           
                $name = "Values",
                $title = "Select Value",
                $source =  $values
            );
            $fieldset->push($checkBox);
        }
    } 
```

带有 Permission::check("ADMIN") 的 if 语句检查管理员是否已登录，如果已登录，则仅显示复选框集。

您还需要在此方法中包含 $fieldset->push 以将其添加到 cms。ADMIN 可以更改为您在安全面板中创建的任何用户组，因此这是一种适应性强的方法。

我发现这对我来说是最好的方法，但如果有人可以改进它/提供更好的解决方案，我很想听听。

# android - 当调用 videoview.pause() 时视频未暂停时，Sony Tablet S 问题

> ID：12210966
> 
> 赞同：1
> 
> 时间：2012-08-31T07:46:00.270
> 
> 标签：android, video

当我播放视频时，它播放流畅，但播放几分钟后，比如 10 分钟后，我收到弹出消息“你的 10 分钟播放结束”。

所以，当我收到一条弹出消息时，理想情况下视频应该暂停（正如我正在打电话`videoview.pause())` 但视频没有暂停。

实际上，当弹出窗口时，视频会暂停 1-2 秒，然后再次从上次播放开始。但我的要求是，只要我不单击任何按钮（弹出对话框），视频就不应继续播放。

我对 Sony Tablet S 使用相同的代码，我在三星平板电脑中使用它，上面提到的问题正在发生。

所以，我想知道这个问题是因为操作系统还是其他原因？

*使用的平台：*

索尼平板电脑 S：安卓 4.0.3

三星平板电脑：Android 3.0.1

# windows-hosting - wshshell icacls 句柄无效

> ID：12210970
> 
> 赞同：0
> 
> 时间：2012-08-31T07:46:27.533
> 
> 标签：windows-hosting

我正在使用 wshsell 调用 icacls 来更改文件夹的权限。它返回以下错误：

> C:\Windows\System32\icacls.exe C:\test\test1 /T /grant:r IFC\ailen123staff-002:R
> 
> 成功处理0个文件；处理 1 个文件失败 C:\test\test1：句柄无效。

如果我把它放在 DOS 提示符下运行它，这个相同的命令就可以工作。但它在我的asp脚本上失败了。我将匿名用户指定为管理员，但仍然失败。任何的想法？

它曾经工作，但它突然停止工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:30:37.830

我想通了。它是应用程序池用户。我将应用程序池用户更改为管理员，问题就消失了。

# java - setDefaultCloseOperation 改为显示 JFrame

> ID：12210972
> 
> 赞同：7
> 
> 时间：2012-08-31T07:46:35.410
> 
> 标签：java, swing, jframe, windowlistener

我正在制作一个文字处理器应用程序以练习 Java，我希望这样当用户尝试关闭应用程序时，会出现一个 JFrame，要求保存更改。

我正在考虑 setDefaultCloseOperation() 但到目前为止我运气不佳。如果可能的话，我还希望它在用户单击窗口右上角的“X”时出现。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-31T07:49:29.580

您可以将 JFrame DefaultCloseOperation 设置为 DO_NOTHING，然后设置一个 WindowsListener 来获取关闭事件并执行您想要的操作。我会在几分钟后发布一个例子。

**编辑：**这是示例：

```
public static void main(String[] args) {
        final JFrame frame = new JFrame("Test Frame");

        frame.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);

        frame.setSize(800, 600);

        frame.addWindowListener(new WindowAdapter() {
            //I skipped unused callbacks for readability

            @Override
            public void windowClosing(WindowEvent e) {
                if(JOptionPane.showConfirmDialog(frame, "Are you sure ?") == JOptionPane.OK_OPTION){
                    frame.setVisible(false);
                    frame.dispose();
                }
            }
        });

        frame.setVisible(true);
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T08:38:58.007

```
import java.awt.event.*;
import javax.swing.*;

public class QuickGuiTest {

    public static void main(String[] args) {
        Runnable r = new Runnable() {
            @Override
            public void run() {
                final JFrame frame = new JFrame("Test Frame");

                frame.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
                frame.setSize(600, 400);
                frame.addWindowListener(new WindowAdapter() {
                    @Override
                    public void windowClosing(WindowEvent e) {
                        int result = JOptionPane.showConfirmDialog(
                                frame, "Are you sure?");
                        if( result==JOptionPane.OK_OPTION){
                            // NOW we change it to dispose on close..
                            frame.setDefaultCloseOperation(
                                    JFrame.DISPOSE_ON_CLOSE);
                            frame.setVisible(false);
                            frame.dispose();
                        }
                    }
                });
                frame.setVisible(true);
            }
        };
        SwingUtilities.invokeLater(r);
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T07:51:29.390

*   您必须`WindowListener`在`JFrame`.

*   在`windowClosing`方法内部，您可以提供所需的代码。

例如：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class ClosingFrame extends JFrame {

    private JMenuBar MenuBar = new JMenuBar();
    private JFrame frame = new JFrame();
    private static final long serialVersionUID = 1L;
    private JMenu File = new JMenu("File");
    private JMenuItem Exit = new JMenuItem("Exit");

    public ClosingFrame() {
        File.add(Exit);
        MenuBar.add(File);
        Exit.addActionListener(new ExitListener());
        WindowListener exitListener = new WindowAdapter() {

            @Override
            public void windowClosing(WindowEvent e) {
                int confirm = JOptionPane.showOptionDialog(frame,
                        "Are You Sure to Close this Application?",
                        "Exit Confirmation", JOptionPane.YES_NO_OPTION,
                        JOptionPane.QUESTION_MESSAGE, null, null, null);
                if (confirm == JOptionPane.OK_OPTION) {
                    System.exit(0);
                }
            }
        };
        frame.addWindowListener(exitListener);
        frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
        frame.setJMenuBar(MenuBar);
        frame.setPreferredSize(new Dimension(400, 300));
        frame.setLocation(100, 100);
        frame.pack();
        frame.setVisible(true);
    }

    private class ExitListener implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent e) {
            int confirm = JOptionPane.showOptionDialog(frame,
                    "Are You Sure to Close this Application?",
                    "Exit Confirmation", JOptionPane.YES_NO_OPTION,
                    JOptionPane.QUESTION_MESSAGE, null, null, null);
            if (confirm == JOptionPane.OK_OPTION) {
                System.exit(0);
            }
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                ClosingFrame cf = new ClosingFrame();
            }
        });
    }
} 
```

# jsp - 带有条件和相对 url 的 JSTL 提交表单不起作用

> ID：12210975
> 
> 赞同：0
> 
> 时间：2012-08-31T07:46:36.877
> 
> 标签：jsp, jstl, jsp-tags

以下是创建或更新 Post 对象的表单（我也使用 spring 表单标签）：

```
<sf:form method="<c:choose><c:when test="${post.id==0}">post</c:when><c:otherwise>put</c:otherwise></c:choose>" commandName="post">
    Title:<sf:input path="title" /><sf:errors path="title" /><br />
    Body:<sf:textarea path="body" cols="70" rows="6" /><sf:errors path="body" /><br />
</sf:form> 
```

而当`post.id==0`, 则表示要创建这篇文章，而表单的方法应该是“POST”，否则它会被更新并且方法将是“PUT”。

但是上面的代码会导致异常：

```
org.apache.jasper.JasperException: /WEB-INF/jsp/posts/_form.jsp (line: 5, column: 41) Unterminated &lt;sf:form tag 
```

什么问题，怎么解决？

* * *

更新：

对于行动，它应该是：

```
<c:url value="/posts/" /> for create and 
<c:url value="/posts/${post.id}/" /> for update. 
```

那么最后的动作将是`/appcontext/posts`或

```
/appcontext/posts/1 
```

更新2：

对于行动，我可以使用：

```
${post.id == 0 ? '/posts/' : '/posts/${post.id}'} 
```

但是，这里注意 url 中的“/”，它将与主机相关。

也就是说，表单动作将是：

```
http://localhost/posts 
```

虽然我希望它是：

```
http://localhost/context/posts 
```

这就是为什么我更喜欢`<c:url>`它会为我添加上下文。

我想要这种方式：

```
${post.id == 0 ? '<c:url value="/posts/" />' : '<c:url value="/posts/${post.id}"/>'} 
```

哪个不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:38:13.140

您在其他标签的属性中使用标签。`"`是嵌套的。

试试这个：

```
 <sf:form method="${post.id == 0 ? 'post' : 'put'}" commandName="post"
          action="${post.id == 0 ? './posts/' : './posts/${post.id}'}">
    ...

    <input type="submit" value="Submit" name="submit" />
    or
    <a href="#" onClick="submit();">submit with link and JavaScript</a>

 </sf:form>

 <c:url value="${post.id == 0 ? './posts/' : './posts/${post.id}'}" var="url">
 </c:url>

 <a href="${url}">Huhu ein Link</a> 
```

如果您使用`./`它将引用相同的路径。您还可以通过`request.getContextPath()`在您的`JSP Page`或中获取上下文路径`Servlet`。

看看[这里](https://stackoverflow.com/questions/296873/basic-html-how-to-set-relative-path-to-current-folder)。

```
> ${post.id == 0 ? '<c:url value="/posts/" />' : '<c:url
> value="/posts/${post.id}"/>'} 
```

这也行不通，又嵌套了一遍。请阅读[Java 教程](http://docs.oracle.com/javaee/5/tutorial/doc/bnakc.html)。

# python - 阻止 windows 键 wxPython

> ID：12210976
> 
> 赞同：1
> 
> 时间：2012-08-31T07:46:41.480
> 
> 标签：python, windows, wxpython

我正在使用 wxpython 创建一个用于在学校编写测试的应用程序，它需要能够阻止 windows 键、alt-tab 等以防止作弊。这是可能的，如果是的话，你是怎么做的？

我知道你不能阻止 ctrl + alt + del，但是是否可以检测到它何时被按下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T13:28:05.857

简单的答案是否定的，除非这是一个无法访问计算机硬件的触摸屏应用程序。那可能会奏效。否则，您将不得不研究如何使用 Microsoft 策略等锁定您的 PC。或者您可以通过锁定的 Linux 安装来做到这一点。无论如何，这并不是你可以用 wxPython 管理的东西。这是您必须在操作系统级别进行管理的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:55:36.177

我在类似的讨论中遇到了这个问题，[http ://timgolden.me.uk/python/win32_how_do_i/track-session-events.html](http://timgolden.me.uk/python/win32_how_do_i/track-session-events.html)

它提供了跟踪用户事件的大纲，例如由 ctrl + alt + del 按触发的用户事件。

它可能会提供一种解决方法来阻止按键。

# joomla - Joomla | 模块国际化 | 新开发者

> ID：12210983
> 
> 赞同：0
> 
> 时间：2012-08-31T07:47:20.347
> 
> 标签：joomla, joomla-extensions

我尝试在 Joomla 中创建一个非常简单的模块。虽然我的整个代码是正确的，并且模块工作正常，但我不能让它支持 I18n 功能。

更具体地说，我的模块目录是这样的：

```
mod_mymodname:
    languages:
        en-GB.mod_mymodname.ini
    mod_mymodname.php
    mod_mymodname.xml 
```

然后在我的 mod_mymodname.xml 我有那个代码：

```
<?xml version="1.1" encoding="utf-8"?>
<extension type="module" version="2.5.0" client="site">
    <name>MyModName</name>
    ... Other Options ...
    <files>
        <filename module="mod_mymodname">mod_mymodname.php</filename>
        <filename>mod_mymodname.xml</filename>
    </files>
    <languages folder="languages">
        <language tag="en-GB">en-GB.mod_mod_mymodname.ini</language>
    </languages>
    <config>
        <fields name="params">
            <fieldset name="basic">
                <field name="modid" size="50" type="text" label="MODID" description="Description here" />
            </fieldset>
        </fields>
    </config>
</extensions> 
```

我的 en-GB.mod_mymodname.ini 里面有那个内容

```
MODID=Module ID 
```

问题是在我的管理部分中，字段标签的值是“MODID”而不是“模块 ID”

这有什么问题吗？是我的第一个 Joomla 模块，我不确定一切是否正确。

**注意**：该模块不需要在前端进行任何翻译。管理部分只需要I18n。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T07:53:04.980

确保您在语言文件中提到了正确的 MODID 文本。

```
en-GB.mod_mymodname.ini ---> This file was used for declaring the text what we given in that module 
```

*   **只需在en-GB.mod_mymodname.ini**这个语言文件中添加以下行。

MODID="模块ID"

保存并检查模块..希望这会工作....

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T08:26:11.670

语言文件需要在 joomla 语言文件夹中。如果您从管理员安装了模块，请检查语言文件夹并检查您的文件是否存在。

签入管理员/语言/en-GB/

此外，您可能必须更改在 xml 中提到语言文件的方式。

看看这个链接以获得更详细的描述

[http://docs.joomla.org/Specification_of_language_files#Language_file_naming_conventions_and_precedence](http://docs.joomla.org/Specification_of_language_files#Language_file_naming_conventions_and_precedence)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T10:11:17.890

确保您还有 en-GB.mod_mymodname.sys.ini 用于翻译来自 xml 的文本。

我也想到了别的东西。似乎确实存在一个已知问题，只有当语言文件位于主语言文件夹而不是扩展语言文件夹中时，才会翻译 xml 中的某些字符串。所以我通常把副本放在两个地方，即使将扩展文件放在核心文件夹中被认为是不好的做法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T04:09:17.410

首先添加你的 module.xml 语言标签

```
<languages folder="languages">
    <language tag="fr-FR">fr-FR.mod_mod_mymodname.ini</language>
    <language tag="fr-FR">fr-FR.mod_mod_mymodname.sys.ini</language>
</languages> 
```

然后在您的模块语言文件夹中创建两个新文件 fr-FR.mod_mod_mymodname.ini fr-FR.mod_mod_mymodname.sys.ini 在 .ini 文件中添加要翻译的文本，例如 MOD_MYMODULE_USERNAME="this is my mod"

然后将此常量值添加到您的模块 default.php 文件中，例如
JText::_ ('MOD_MYMODULE_USERNAME')

# backbone.js - Backbone：如何更改模型的顺序

> ID：12210984
> 
> 赞同：0
> 
> 时间：2012-08-31T07:47:21.500
> 
> 标签：backbone.js

在一个集合中，我们如何改变模型的顺序？

这不是对模型进行排序，也不是编写比较器函数来实现排序顺序。

当从对象数组构建集合时，模型的顺序将是插入顺序。

现在我的问题是：在集合建立后，如何根据我的喜好改变模型的位置。

例如，在构建集合时，模型按照原始数组的顺序为：0、1、2、3、4、5。现在，我想更改顺序，如 2、4、0、1、3， 5.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:52:49.950

事实上，它归结为编写一个比较器——如果你想在集合中强加模型的某种顺序，你实际上是在对它们进行排序。要实现您想要的，似乎最简单的方法是向`order`模型添加一些属性，然后编写一个比较器来处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-07T01:04:13.703

我知道这是一篇旧帖子，但我有同样的帖子并想出了一个解决方案。简而言之，我的解决方案是将`collection.models`列表替换为包含相同模型的新列表，但按照我希望它的顺序...下面是我的用例和示例（使用咖啡脚本）。

**注意：**我不是 100% 确定这不会有问题，因为这会更改集合的列表，而不是就地对原始列表进行排序。但是我还没有找到故障模式，我已经测试了几个。

我的用例是一个可排序的 DOM 列表（通过[jquery.ui/sortable](http://api.jqueryui.com/sortable/)）。我需要集合的顺序来反映 DOM 上显示的内容。

1.  每个可排序的 DOM 元素都有一个`data-cid`对应于模型的属性，我在`initialize`每个`Backbone.View`列表项的方法中都这样做了。

    ```
    class ListItem extends Backbone.View
      ... 
      initialize: (options = {}) ->
        @$el.attr "data-cid", @model.cid 
    ```

2.  父级`Backbone.View`（一个无序列表）监听一个`sortupdate`事件（用户对某事进行排序），然后用新的顺序构造一个 cid 列表，并将其传递到要排序的集合中。

    ```
    class List extends Backbone.View
      ...
      tagName: "ul"
      events:
        "sortupdate" : "sort"

      render: ->
        @$el.html("") # reset html
        @collection.each (model) =>
          view = new ListItem model: model
          @$el.append view.render().$el
        return @

      sort: (e, ui) ->
        e.stopPropagation()
        orderByCid = @$el.children().map(-> $(@).attr "data-cid")
        @collection.orderModels orderByCid 
    ```

3.  该集合以与 cids 使用的顺序相同的顺序创建一个新的`Backbone.Collection::get`模型列表，然后用它替换它的模型列表。

    ```
    class DataList extends Backbone.Collection
      ...
      orderModels: (cids = []) ->
        # Add validation that all the cids exist in the collection
        # and that list and collection are the same length!
        result = []
        result.push @get(cid) for cid in cids
        @models = result 
    ```

# ssl - axtls ssl_client_new 双重释放或损坏

> ID：12210986
> 
> 赞同：0
> 
> 时间：2012-08-31T07:47:34.480
> 
> 标签：ssl

我对 AXTLS 有一个小问题。我正在尝试与服务器建立 SSL 通信，但看起来它在“ssl_client_new”函数中双重释放了某些东西。

该代码创建一个新的 ctx (ssl_ctx_new) 并在初始化期间加载证书 (ssl_obj_load)（这里没问题），套接字已连接，当我调用“ssl_client_new”时，libc 检测到双重释放：

> “双重免费或损坏（fasttop）：0x0809f740”

我在 gdb 下启动了应用程序，这是回溯：

```
Program received signal SIGABRT, Aborted. 0xb7fdd424 in
__kernel_vsyscall () (gdb) bt
#0  0xb7fdd424 in __kernel_vsyscall ()
#1  0xb7d371ef in __GI_raise (sig=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:64
#2  0xb7d3a835 in __GI_abort () at abort.c:91
#3  0xb7d722fa in __libc_message (do_abort=2, fmt=0xb7e6a3bc "*** glibc detected *** %s: %s: 0x%s ***\n") at ../sysdeps/unix/sysv/linux/libc_fatal.c:201
#4  0xb7d7ce42 in malloc_printerr (action=<optimized out>, str=<optimized out>, ptr=0x809f740) at malloc.c:5007
#5  0x080712fd in asn1_name ()
#6  0x0806849f in x509_new ()
#7  0x080642cc in process_certificate ()
#8  0x08067caa in do_clnt_handshake ()
#9  0x08066675 in basic_read ()
#10 0x08067a07 in ssl_client_new () 
```

ctx指针和sockets没问题，最后两个参数为NULL和0。( *http://axtls.sourceforge.net/dox/group_c_api.html#ga4eef242a559b06d72b862c1e5ab3d0a2* )

这是我的套接字的 strace：

```
socket(PF_INET, SOCK_STREAM, IPPROTO_IP) = 8

fcntl64(8, F_GETFL)                     = 0x2 (flags O_RDWR)
fcntl64(8, F_SETFL, O_RDWR|O_NONBLOCK)  = 0
connect(8, {sa_family=AF_INET, sin_port=htons(443), sin_addr=inet_addr("81.12.132.173")}, 16) = -1 EINPROGRESS (Operation now in progress)
select(9, NULL, [8], NULL, {10, 0})     = 1 (out [8], left {9, 996818})
getsockopt(8, SOL_SOCKET, SO_ERROR, [0], [4]) = 0
fcntl64(8, F_SETFL, O_RDWR)             = 0

fcntl64(8, F_GETFL)                     = 0x2 (flags O_RDWR)
fcntl64(8, F_SETFL, O_RDWR)             = 0

write(8, "\26\3\1\0003\1\0\0/\3\1P@hf?\222Y\3046n\215\364\317\34-D8\311\270=\225"..., 56) = 56
read(8, "\26\3\1\0J", 5)                = 5
read(8, "\2\0\0F\3\1Q\301_\210\267\200\352*}H\330\265\n;\33\253\31\24\320\377+\3\371\276g\362"..., 74) = 74

read(8, "\26\3\1\20)", 5)               = 5
read(8, "\v\0\20%\0\20\"\0\5\0070\202\5\0030\202\3\353\240\3\2\1\2\2\23w\0\0~\263\3446"..., 4137) = 2632
read(8, "1\0270\25\6\3U\4\n\f\16Vodafone Group1)0'\6\3U"..., 1505) = 1505 
```

所以ssl握手开始了。在此之后立即：

```
open("/dev/tty", O_RDWR|O_NOCTTY|O_NONBLOCK) = 9
writev(9, [{"*** glibc detected *** ", 23}, {"./HTTPS_TOOL", 11}, {": ", 2}, {"double free or corruption (fastt"..., 35}, {": 0x", 4}, {"082ba740", 8}, {" ***\n", 5}], 7*** glibc detected *** ./HTTPS_TOOL: double free or corruption (fasttop): 0x082ba740 ***
) = 88 
```

有任何想法吗？哪个可能是问题，我该怎么办？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T23:51:40.097

你还在解决这个问题吗？我还没有任何关于此的报告，这可能是图书馆被使用的一种方式。

该库已在 Valgrind 中检查过多次，最近没有任何问题。您能否在 Valgrind 中运行它来验证？

# linux - Shell 脚本 - 我将如何比较不同 dat 的相同文件

> ID：12210990
> 
> 赞同：0
> 
> 时间：2012-08-31T07:47:47.547
> 
> 标签：linux, shell

我在一个目录中有数百个文件，文件的名称和日期如下所示。我将如何比较不同日期的相同文件。

前任 ：

```
/test/
xyz-my_S1logfile.Aug.25.gz  
bhd-my_S1logfile.Aug.30.gz
ddddf-my_S2logfie.Aug.25.gz
zsed-my_S2logfie.Aug.30.gz

Compare the size of xyz-my_S1logfile.Aug.25.gz and bhd-my_S1logfile.Aug.30.gz
ddddf-my_S2logfie.Aug.25.gz and zsed-my_S2logfie.Aug.30.gz
..... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:03:04.160

除非我误解了您的问题，否则您希望在目录中查找具有重复内容的文件。执行此操作的标准方法是为每个文件的内容生成强哈希。例如对于[SHA256](http://en.wikipedia.org/wiki/SHA-2)，您可以使用该[`sha256sum`](http://linux.die.net/man/1/sha256sum)工具：

```
sha256sum /my/dir/* > sha256sums.txt 
```

或者更好：

```
find /my/dir -type f -print0 | xargs -r0 sha256sum > sha256sums.txt 
```

考虑到尚未发现任何 SHA-2 变体的冲突，您可以*有理由相信*具有相同哈希的任何文件都是相同的。然后，您可以使用[`sort`](http://linux.die.net/man/1/sort)和[`uniq`](http://linux.die.net/man/1/uniq)查找重复的哈希值，每个哈希值都有一个出现计数：

```
cat sha256sums.txt | sort | cut -b -32 | uniq -cd | sort -nr 
```

然后，您可以`sha256sums.txt`为相应文件列表的每个重复哈希对文件进行 grep。

或者，如果您想要一个自动化工具，您可以尝试[FsLint](http://www.pixelbeat.org/fslint/)，它[支持查找重复文件](http://en.flossmanuals.net/fslint/ch004_duplicates/)。

# android - Android 微调器不工作

> ID：12210997
> 
> 赞同：-1
> 
> 时间：2012-08-31T07:48:14.007
> 
> 标签：android, mobile, spinner

我正在尝试在我的应用程序中实现一个 Android 微调器，但是在与放置在其中的 Activity 关联的 java 文件中遇到了一些问题。

我得到的错误如下：

```
1\. setContentView(R.layout.activity_display_asleep_at);
    - cannot be resolved or is not a field
2\. cycles_array (where ArrayAdapter<CharSequence> is...)
    - cannot be resolved or is not a field
3\. spinner (where "android.widget.Spinner spinner" is...)
    - cannot be resolved or is not a field 
```

我的代码如下：

```
import android.R;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Toast;
import android.widget.Spinner;

public class DisplayAsleepAt extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_display_asleep_at);
        getActionBar().setDisplayHomeAsUpEnabled(true);
        android.widget.Spinner spinner = (android.widget.Spinner) findViewById(R.id.spinner);
        ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
            this, R.array.cycles_array, android.R.layout.simple_spinner_item);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner.setAdapter(adapter);

    spinner.setOnItemSelectedListener(new MyOnItemSelectedListener());
} 
```

这是我正在使用的 xml 文件：

```
<Spinner 
    android:id="@+id/AA_spinner_prompt"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:prompt="@string/AA_spinner_promptTXT" 
    android:layout_alignParentRight="true" /> 
```

这是我有数组的 strings.xml 文件：

```
<string-array name="cycles_array">
    <item>1</item>
    <item>2</item>
    <item>3</item>
    <item>4</item>
    <item>5</item>
    <item>6</item>
    <item>7</item>
</string-array> 
```

如果有人对可能出了什么问题有任何想法，将不胜感激。如果您需要，我可以随时发布更多信息。谢谢大家。

编辑：

这是我正在使用的整个 xml 文件。我已经浏览了一段时间，似乎找不到任何问题......也许我现在只是累了......

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingRight="5dp"
    android:paddingLeft="5dp"
    android:paddingTop="5dp"
    android:paddingBottom="5dp" >

    <TextView
        android:id="@+id/AA_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/AA_titleTXT"
        android:layout_alignParentTop="true"
        android:layout_marginBottom="10dp"
        android:textSize="35dp"
        android:textStyle="italic"
        tools:context=".DisplayAsleepAt" />
    <TextView
        android:id="@+id/AA_intro"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/AA_introTXT"
        android:textSize="15dp"
        android:layout_below="@id/AA_title" />
    <Button
        android:id="@+id/AA_button_pick"
        android:layout_width="250dp"
        android:layout_height="wrap_content"
        android:text="@string/AA_button_pickTXT"
        android:layout_marginTop="20dp"
        android:layout_marginBottom="20dp"
        android:layout_centerHorizontal="true"
        android:onClick="showTimePickerFragment" />
    <TextView
        android:id="@+id/AA_rem_cycles"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/AA_rem_cyclesTXT"
        android:textSize="15dp"
        android:layout_marginBottom="20dp"
        android:layout_below="@id/AA_button_pick" />
    <Spinner 
        android:id="@+id/AA_spinner_prompt"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:prompt="@string/AA_spinner_promptTXT"  />
    <TextView
        android:id="@+id/AA_final_time"
        android:layout_width="75dp"
        android:layout_height="wrap_content"
        android:text="@string/AA_final_timeTXT"
        android:textSize="15dp" />
    <Button
        android:id="@+id/AA_create_alarm_button"
        android:layout_width="250dp"
        android:layout_height="wrap_content"
        android:text="@string/AA_create_alarm_buttonTXT"
        android:layout_centerHorizontal="true" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:50:56.617

该错误意味着您的 XML 布局在语法上存在问题，并且无法自动生成 R。尝试查看您的 xml 代码，如果仍然有问题，请发布您的 xml 代码。

更改此代码

```
android.widget.Spinner spinner = (android.widget.Spinner) findViewById(R.id.spinner); 
```

到

```
android.widget.Spinner spinner = (android.widget.Spinner) findViewById(R.id.AA_spinner_prompt); 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:22:13.583

从您的代码中删除这一行：

```
import android.R; 
```

然后清理并重建您的项目。

# git - 如何让 git 使用 Textmate 作为我的默认编辑器？

> ID：12210998
> 
> 赞同：7
> 
> 时间：2012-08-31T07:48:27.160
> 
> 标签：git, bash, terminal, osx-lion, textmate

在命令行中，如果我这样做`mate <filepath>`，它会在 TextMate 中为我打开正确的文件。

但是当我这样做时：

```
$ mate -v
open: invalid option -- v
Usage: open [-e] [-t] [-f] [-W] [-R] [-n] [-g] [-h] [-b <bundle identifier>] [-a <application>] [filenames] [--args arguments] 
```

另外，当我这样做时`git commit`，我会看到：

```
$ git commit
error: cannot run mate: No such file or directory
error: There was a problem with the editor 'mate'.
Please supply the message using either -m or -F option. 
```

我的`~/.bashprofile`有以下几行：

```
#Set Textmate as my default editor from the command-line
alias mate='open -a TextMate.app'

export EDITOR="/usr/local/bin/mate -w" 
```

`~/.bashrc`只有这个：

```
alias mate='open -a TextMate.app' 
```

**编辑 1**

我的`~/.gitconfig`包括以下内容：

```
[user]
    name = My Name
    email = myemail@address.com
[core]
    editor = mate
[github]
    user = marcamillion
    token = 50e3iuaidsgadjkhwkjegakjhbsdkjb30432 (don't worry, this is fake) 
```

帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-31T08:09:47.177

> 用于编辑提交日志消息的编辑器将从 GIT_EDITOR 环境变量、core.editor 配置变量、VISUAL 环境变量或 EDITOR 环境变量（按此顺序）中选择。

假设配对路径正确，配置它的简单方法是运行

```
git config --global core.editor "/usr/local/bin/mate -w" 
```

当然，假设您可以运行`/usr/local/bin/mate -w`. `/usr/local/bin/mate -w`通过与本地用户一起运行来检查。如果找不到，您可以使用`which mate`它来查找它是否存在于您的路径中 - 如果不存在，我认为您需要使用别名 ( `open -a TextMate.app -w`) 中的表单。

编辑：将评论合并到答案中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-31T08:12:39.797

通过将以下内容添加到 ~/.gitconfig 的核心部分

```
[core]
    editor = mate 
```

更新：好的，如果它已经存在，那么问题可能出在 textmate 而不是 git 上。

同学2：

在首选项中，有一个终端选项卡和一个安装按钮 当您单击安装时，伴侣将位于 /usr/local/bin/mate 中，并且一切正常。

同学1：

您需要创建一个符号链接 [http://manual.macromates.com/en/using_textmate_from_terminal.html](http://manual.macromates.com/en/using_textmate_from_terminal.html)

我有 textmate 1（我现在使用 vim :)

```
ls -l `which mate`

lrwxr-xr-x  1 jameskyburz  staff  66 Jul  1  2011 /usr/local/bin/mate -> /Applications/TextMate.app/Contents/SharedSup 
```

ln -s /Applications/TextMate.app/Contents/Resources/mate /usr/local/bin/mate

# eclipse - GWT Eclipse 不会将类编译成 war/WEB-INF/classes

> ID：12210999
> 
> 赞同：4
> 
> 时间：2012-08-31T07:48:32.287
> 
> 标签：eclipse, class, gwt, compilation

我使用 GWT 2.5 版、eclipse 3.7 和 java 1.6.0_35

我遇到了这个问题，因为我手动删除了 myProject/war/WEB-INF/classes 中的类。在 eclipse 中一切看起来都很好，但是当我使用 ant 或 gwt compile over eclipse 进行编译时，它不会在该特定文件夹中生成任何新类。结果，我收到了一个类目录为空的战争文件。我怎样才能修复它，使课程回到这个文件夹？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T16:44:40.293

确保 Project⇒Properties⇒Java Build Path 中的“默认输出文件夹”指向正确的位置。使用内置的 Ant，这可能是`myProject/war/WEB-INF/classes`.

另外，在 Project⇒Properties⇒Google⇒Web Application 中检查“This Project has a WAR directory”。对于 Ant，路径应该是`war`.