# StackOverflow 问答 12415000-12415999

# ruby-on-rails - Heroku：推送到应用程序外部创建的 url

> ID：12415001
> 
> 赞同：0
> 
> 时间：2012-09-13T21:22:22.237
> 
> 标签：ruby-on-rails, heroku

通常，当我部署到 Heroku 时，我会在 Rails 控制台中使用以下命令创建 heroku 应用程序

```
heroku create mycustomappname 
```

然后它创建那个heroku url

```
http://mycustomappname.herokuapp.com 
```

然后当我推送到 heroku 时，该应用程序在该自定义域中可用。

然而，在 Facebook 上创建一个画布应用程序并选择 Heroku 托管后，Facebook 给了我 heroku 网址。我的本地主机上有一个 rails 应用程序。如果不是从 Rails 控制台中创建的，我如何推送到该特定的 heroku url？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T21:28:26.587

从控制台运行它：

```
heroku git:remote -a <heroku url> 
```

这会将 heroku url 的远程添加到您的 git 配置中。另请参阅[这篇文章](https://devcenter.heroku.com/articles/git)。

# silverlight - 在 SystemTray 可见性更改后避免布局移位

> ID：12415002
> 
> 赞同：1
> 
> 时间：2012-09-13T21:22:39.137
> 
> 标签：silverlight, windows-phone-7, xaml

当上部 WP7 SystemTray 被用户操作显示或隐藏时，我试图避免主布局的垂直位移。

我一直在尝试将 SystemTray 的可见性更改与向主布局添加边距相结合，如下所示

```
SystemTray.IsVisible = false;
LayoutRoot.Margin = new Thickness(0, 32, 0, 0); 
```

但是，正如预期的那样，结果并不是很顺利。我想有一些东西可以帮助 xaml 方面，但仍然没有找到我要找的东西。所以..有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T05:17:14.497

`grid1`在布局根的顶部保留一个高度为 32 像素（与系统托盘相同）的网格。并保持不透明度`SystemTray`，`0.99`使系统托盘与`grid1`. 现在，当它的可见性为 false 时，grid1 将接管。我还没有尝试过，这只是我认为应该可行的想法。祝一切顺利。

当用户改变方向时网格高度/宽度会改变（如果这是你要在你的应用程序中做的），必须牢记这一点。

# matlab - 创建一个包含参数的单独文件

> ID：12415004
> 
> 赞同：1
> 
> 时间：2012-09-13T21:22:46.253
> 
> 标签：matlab, variables, global-variables

我是 Matlab 世界的新手，我正在尝试用这个强大的软件创建我的第一个模拟。我会将我的应用程序的所有参数放入一个唯一的 m 文件中。我在某处读过我必须将所有变量初始化为全局变量，以便它们可以在任何地方使用，但在那之后，这些变量将自动在我位于的所有其他 m 文件中可用在参数文件的同一文件夹中，只需调用它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:46:41.840

如果要共享超出函数范围的变量，可以声明这样的函数

```
function globalFun
global var1 var2
var1 = 5; 
var2 = 6; 
```

. . . 然后从这样的脚本中调用它。. .

```
global var1 var2
var1 = 0; 
var2 = 0;
globalFun 
```

您将看到工作区中的值已更新，即使该函数未返回任何输出。

然而，这样做，你打开了调试地狱的潜力！如果您需要在函数之间传递大量变量并且不想编写具有大量参数列表的函数，请考虑使用结构。替换`gloabalFun`为 。.

```
function s = structFun(s)    
s.var1 = 5; 
s.var2 = 6; 
```

然后这样称呼它。.

```
s.var1 = 0; 
s.var2 = 0;
s = structFun(s); 
```

这样，您总是可以一目了然地看到哪些功能正在修改什么。

# wordpress - 仅显示顶级类别的孩子

> ID：12415006
> 
> 赞同：0
> 
> 时间：2012-09-13T21:23:16.513
> 
> 标签：wordpress, categories

想象一下，我有一个这样的 URL 结构：www.domain.com/category/subcategory/

这是我的代码：

```
<?php
$args=array(
    'child_of' => $cat-id,
    'hide_empty' => 0,
    'orderby' => 'name',
    'order' => 'ASC'
);
$categories=get_categories($args);
foreach($categories as $category) { 
    echo '<a href="' . get_category_link( $category->term_id ) . '" title="' . sprintf( __( "View all posts in %s" ), $category->name ) . '" ' . '>' . $category->name.'</a>';  } 
?> 
```

当我在“www.domain.com/category/”上时，代码会正确显示该类别的所有子项，但在“www.domain.com/category/subcategory/”上时，代码不会显示任何结果，因为子类别没有任何子类别。我需要代码仅显示顶级类别的子级，即使在其子页面上也是如此。

我如何做到这一点？TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T00:00:52.827

```
$ancestors = get_ancestors($cat-id, 'category');
$args=array(
    'child_of' => ($ancestors ? end($ancestors) : $cat-id), //If category has ancestors, use the top-most ancestor, otherwise, use the current category ID
    'hide_empty' => 0,
    'orderby' => 'name',
    'order' => 'ASC'
);
$categories=get_categories($args);
foreach($categories as $category) { 
    echo '<a href="' . get_category_link( $category->term_id ) . '" title="' . sprintf( __( "View all posts in %s" ), $category->name ) . '" ' . '>' . $category->name.'</a>';  } 
```

# logging - 我可以让 Rails 3 将生产日志保存 90 天吗？

> ID：12415014
> 
> 赞同：0
> 
> 时间：2012-09-13T21:24:13.743
> 
> 标签：logging, ruby-on-rails-3.2, production-environment, log-rotation

Rails 3 似乎会在一段时间后自动截断生产日志。我希望能够保存过去 90 天的生产日志，以便能够审核我的应用程序的行为。根据[这个答案](https://stackoverflow.com/posts/8107549/revisions)，旧的Rails`Logger`至少支持将日志分成不同的日子，如果不自动删除旧的，但Rails现在使用`BufferedLogger`不支持这些选项。

无论哪种方式，看起来我可能不得不求助于配置 Unix`logrotate`来获得我想要的日志保留策略。这对我来说很好，但我还必须防止 Rails 自动截断日志，这样我就不会丢失任何东西，我不知道该怎么做。

是否有另一种与 Rails 一起使用的日志记录工具（可能是 gem），它可以在一个地方处理这一切？如果没有，我该如何防止`BufferedLogger`截断日志，以免妨碍它`logrotate`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T21:44:07.790

AFAIK，根本没有截断。BufferedLogger 源不显示日志文件的任何限制。

[http://engineering.freeagent.com/2011/10/12/understanding-the-rails-logger/](http://engineering.freeagent.com/2011/10/12/understanding-the-rails-logger/)是一些内部结构的很好的指南。但似乎您需要自己进行轮换。

# php - 从文档中获取节点值

> ID：12415020
> 
> 赞同：-1
> 
> 时间：2012-09-13T21:25:02.113
> 
> 标签：php, xml

我在 PHP 中有 XML，我正在尝试获取状态节点的值：

```
<?xml version="1.0" encoding="utf-8" ?>
<response>
  <result>
    <form name="MREP">
      <update>
        <criteria>
          <field name="Serial_Number" compOperator="Equals" value="A-000-1012"></field>
          <reloperator>AND</reloperator>
          <field name="MREP_Type" compOperator="Equals" value="0"></field>
        </criteria>
        <newvalues>
          <field name="Is_being_Used">
            <value><![CDATA[TRUE]]></value>
          </field>
        </newvalues>
        <status>Success</status>
      </update>
    </form>
  </result>
</response> 
```

我试过

```
$xml = simplexml_load_string($mrepValide); 
echo $xml->status; 
```

（其中 $mrepValide 是上面显示的 XML 字符串）

但我认为它不起作用，因为状态不是父节点。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T21:31:06.043

文档结构为：

```
<response>
 <result>
  <form name="MREP">
   <update>
    ...
    <status>Success</status>
   </update>
  </form>
 </result>
</response> 
```

因此，您必须正确导航它，例如：

```
echo $xml->result->form->update->status; 
```

[http://codepad.viper-7.com/lQxOoF](http://codepad.viper-7.com/lQxOoF)

花点时间熟悉[*Basic SimpleXML Usage*](http://php.net/simplexml.examples-basic)，它向您展示了如何在 SimpleXML 对象中移动和使用。

# c# - 异步 SslStream 错误

> ID：12415021
> 
> 赞同：1
> 
> 时间：2012-09-13T21:25:13.547
> 
> 标签：c#, client-server, message, sslstream

我创建了一个异步 SslStream 侦听器，但它没有正确接收来自客户端的消息

侦听器代码

```
Code Removed 
```

`joran i don't want the code to be here anymore`

这是我尝试发送到服务器“Hello From Client”的消息

这是我的服务器控制台如何显示它

```
Hello
 From
 Clie
t 
```

谁能告诉我为什么我没有正确收到消息？，这真的很奇怪，我无法解决，请我帮忙

并且\或者我可以使用 StreamReader 接收消息吗？它是非阻塞的，所以代码将保持异步吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T21:54:06.037

您尚未发布将生成的字节数组转换为字符串的代码，这将有所帮助。看到您将读取缓冲区的长度声明为 5 个字节，我怀疑这与每行输出 5 个字符有关。

# ruby - 如何以编程方式在 Facebook 页面上发布（分享）YouTube 视频？

> ID：12415025
> 
> 赞同：1
> 
> 时间：2012-09-13T21:25:36.760
> 
> 标签：ruby, facebook, facebook-graph-api, youtube, koala

目前，我将一些科学视频直接上传到 YouTube 和 Facebook。我宁愿简单地将它们上传到 YouTube，然后在 Facebook 页面上分享。迄今为止我遇到的问题以及直接上传的原因是我只能将视频共享到我的用户帐户上，而他们不会发布到我想要的页面上。我不希望这些出现在我的用户帐户上。

***这如何在 Ruby（或 Ruby on Rails）中完成？*** 我愿意接受宝石建议或任何其他方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T00:09:44.267

您可以在您的 Facebook 帐户上发布一个[提要，包括 youtube 视频的网址。](https://developers.facebook.com/docs/reference/api/post/)

著名的宝石是[koala](https://github.com/arsduo/koala/)和[fb_graph](https://github.com/nov/fb_graph)。

使用考拉的例子

```
fb_api = Koala::Facebook::API.new(access_token)
fb_api.put_wall_post(message, {:link => youtube_video_url,
                               :description => description,
                               :name => video_title}) 
```

# c++ - struct s { T0 t0; 之间的关系 T1 t1；... } 和 std::tuple 吨

> ID：12415026
> 
> 赞同：-1
> 
> 时间：2012-09-13T21:25:37.650
> 
> 标签：c++, c++11, tuples

特别是如果 Tj 是内置类型或指向内置类型的指针，是否有人知道不布置内存的编译器`offsetof(s, tj) != &get<j>(t) - &get<0>(t)`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T23:12:31.667

该标准不要求实现以*任何特定方式*布置元组。至少有一种流行的实现以相反的顺序排列成员，另一种以给定的顺序排列它们。允许*任何布局。*我实现了一个[元组，它对最小化填充的成员进行布局](https://bitbucket.org/martinhofernandes/wheels/src/default/include/wheels/tuple.h++)，这也是标准库的合法实现。

# grails - Grails cache-ehcache 插件和 TTL 值

> ID：12415029
> 
> 赞同：5
> 
> 时间：2012-09-13T21:25:53.657
> 
> 标签：grails, ehcache

谁能确认是否可以使用带有 ehcache 扩展的 grails 缓存插件来设置 TTL 设置，例如 timeToLiveSeconds？

基本插件的文档明确声明不支持 TTL，但 ehcache 扩展提到了这些值。到目前为止，我还没有成功为我的缓存设置 TTL 值：

```
grails.cache.config = {
    cache {
        name 'messages'
        maxElementsInMemory 1000
        eternal false
        timeToLiveSeconds 120
        overflowToDisk false
        memoryStoreEvictionPolicy 'LRU'
    }
}

@Cacheable('messages')
def getMessages() 
```

但是，消息会无限期地缓存。我可以使用 @CacheEvict 注释手动刷新缓存，但我希望在使用 ehcache 扩展时支持 TTL。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T21:04:07.860

是的，该`cache-ehcache`插件绝对支持 TTL 和 EhCache 原生支持的所有缓存配置属性。如文档中所述，基本缓存插件实现了一个不支持 TTL 的简单内存缓存，但缓存 DSL 将通过任何未知的配置设置传递给底层缓存提供程序。

您可以通过将以下内容添加到`Config.groovy`或来配置 EhCache 设置`CacheConfig.groovy`：

```
grails.cache.config = {
    cache {
        name 'mycache'
    }

    //this is not a cache, it's a set of default configs to apply to other caches
    defaults {
        eternal false
        overflowToDisk true
        maxElementsInMemory 10000
        maxElementsOnDisk 10000000
        timeToLiveSeconds 300
        timeToIdleSeconds 0
    }
} 
```

您可以在运行时验证缓存设置，如下所示：

```
grailsCacheManager.cacheNames.each { 
   def config = grailsCacheManager.getCache(it).nativeCache.cacheConfiguration
   println "timeToLiveSeconds: ${config.timeToLiveSeconds}"
   println "timeToIdleSeconds: ${config.timeToIdleSeconds}"
} 
```

有关其他缓存属性，请参阅[CacheConfiguration 的 EhCache javadoc 。](http://ehcache.org/apidocs/net/sf/ehcache/management/CacheConfiguration.html)您还可以通过 logging`grails.plugin.cache`和`net.sf.ehcache`.

请注意，Grails 缓存插件实现了自己的缓存管理器，它与本机 EhCache 缓存管理器不同且分开。如果您直接配置了 EhCache（使用 ehcache.xml 或其他方式），那么这些缓存将与 Grails 插件管理的缓存分开运行。

注意：在旧版本的 Cache-EhCache 插件中确实存在一个错误，即 TTL 设置未正确设置并且对象将在一年内到期；[这已在Grails-Cache-Ehcache 1.1](https://github.com/grails-plugins/grails-cache-ehcache/pull/5)中修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:36:40.327

ehcache 核心插件支持 TTL 属性。你是如何安装插件的？对于我的项目，我只有：

```
compile ":cache-ehcache:1.0.0" 
```

在插件闭包中的 BuildConfig.groovy 中。由于此插件依赖于核心 grails 缓存插件，因此您无需声明它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-21T16:05:40.537

`grails-app/conf/BootStrap.groovy`我可以在启动时使用脚本覆盖配置来解决此问题。

例如，这是用于覆盖名为“mycache”的缓存的默认生存时间为*60 秒的脚本：*

```
class BootStrap {

    def grailsCacheManager

    def init = { servletContext ->
        grailsCacheManager.getCache("mycache").nativeCache
                        .cacheConfiguration.timeToLiveSeconds = 60
    }
    def destroy = {
    }
} 
```

# android - OpenCV 示例得到“无法创建 BuildConfig 类”

> ID：12415030
> 
> 赞同：0
> 
> 时间：2012-09-13T21:26:01.237
> 
> 标签：android, eclipse, opencv, sample, buildconfig

我目前正在尝试运行[此处](http://sourceforge.net/projects/opencvlibrary/files/opencv-android/2.3.1/OpenCV-2.3.1-android-bin.tar.bz2/download)找到的适用于 Android 的 OpenCV 示例（我已尝试使用更新的版本，但我遵循了[此](https://stackoverflow.com/questions/9198949/errors-importing-opencv-in-eclipse-wont-go-away)问题答案中的建议）并且遇到了错误

> 未能创建 BuildConfig 类

也

> OpenCV-2.3.1] Android 需要编译器合规级别 5.0 或 6.0。而是找到了“1.7”。请使用 Android 工具 > 修复项目

对于第**一个错误**；我仍然找不到解决方案；我尝试用[上面提到](https://stackoverflow.com/questions/9198949/errors-importing-opencv-in-eclipse-wont-go-away)的答案中建议的（2.3.1）而不是 2.4.2（也尝试过 2.4.0）替换最新的 OpenCV。答案建议使用确切的版本 2.3.1，但到目前为止它似乎并没有起到作用。

对于**第二个错误**，我尝试按照[此处](https://stackoverflow.com/questions/7637144/android-requires-compiler-compliance-level-5-0-or-6-0-found-1-7-instead-plea)的建议调整*JDK*编译版本，但该问题仍未解决。

以下是一些错误的快照：

![在此处输入图像描述](../Images/913a5e95dcc33df6565f6dc746fa48b4.png)

**使用：**
- Eclipse Indigo
- Windows7- 64bit

我在网上找不到太多关于这个问题的帮助，我一直在寻找解决它一段时间的方法。我已经按照[本教程](http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/android_binary_package.html#get-the-opencv-package-for-android-development)中的确切步骤进行操作（完成下载 ndk 并达到这一点），其中确实可以预料到错误，并且在教程中似乎很容易消除，但它们并不像那些有问题的那样。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:11:22.120

Below are three solutions that, combined, seemed to do the trick (to eliminate the errors). The samples work fine now (tested on an Android 2.2 phone):

*   I've noticed a line in [this](http://opencv.itseez.com/doc/tutorials/introduction/android_binary_package/android_binary_package.html#open-opencv-library-and-samples-in-eclipse) tutorial (seems as another version of that linked in the question) stating

    > If you have created workspace in the package directory, then just click Browse... button and instantly close directory choosing dialog with OK button!

    This seems as a must; **placing the package directory** in the eclipse workspace that is. I've seen this recommendation also as an answer to [this](https://stackoverflow.com/questions/8964035/cant-add-library-to-my-android-project) question.

*   I've **also installed Android API 11** from the SDK manager (earlier I've only installed the API levels 8 and 16) which was the recommended minimum level in the tutorial. The mere installation was a step I've made as suggested in an answer to [this](https://stackoverflow.com/questions/10083301/androidbug-in-build-path) question where the question referred to an error similar to one of those I've found trying to build the samples. I am unsure however whether this was one of the reasons why errors faded, since I did this step before moving the opencv library to the eclipse workspace with no testing of the sample projects in between as far as I recall.

    I've tested the samples on an Android2.2 (API level 8) phone however(*not* emulator. I'm not sure if that's possible since in [this](http://docs.opencv.org/trunk/doc/tutorials/introduction/android_binary_package/O4A_SDK.html#open-opencv-library-and-samples-in-eclipse) tutorial it mentioned that only sample projects *Tutorial 0* and *Tutorial 1* would work on an emulator, from my experience so far neither have), which is also the minimum API level (8) currently set in my opencv samples' manifest files, and it worked.

*   Lastly, I had this error remaining;

    > Cannot run program "\ndk-build": Launching failed *PROJECT NAME* C/C++ Problem

    which was easily resolved but accessing the **project properties** (per needed project), heading to **C/C++ Build** > **Environment** > **Add** (seen to the right of the table heading *Environment variables to set* > fill in the **Name** with *NDKROOT* and provide your ndk path in the **Value**. For the reference from which I've found this advice (and where there exist other options) please check this [Q&A](https://groups.google.com/forum/#!topic/android-opencv/rlrSrVNwwgg).

That was my experience for letting the OpenCV samples for Android work.

# dotcloud - 将点云沙盒风味转换为现场风味？

> ID：12415033
> 
> 赞同：0
> 
> 时间：2012-09-13T21:26:16.073
> 
> 标签：dotcloud

有没有办法将现有的“沙盒”点云部署转换为“实时”风格？还是我必须销毁并重新创建它？

我想这样做有两个原因：1）保留我的应用程序的旧名称......即 dotcloud.com 上的子域 2）避免移动我的数据库数据的小麻烦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T16:26:17.127

您自己还不能更改它，但如果您前往我们的[支持页面](http://support.dotcloud.com)并提交票证，我们很乐意升级您的应用程序风格。

**更新**：我被告知我们只为旧版应用程序提供转换，因此如果您是沙盒用户，那么您必须推送新应用程序或销毁沙盒应用程序，然后才能将其重新推送为 Live。请参阅[http://docs.dotcloud.com/0.4/guides/flavors/](http://docs.dotcloud.com/0.4/guides/flavors/)了解有关风味工作原理的更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T21:38:49.460

不。它就在文档中，当然我在发布后立即找到了它：

“应用一旦被推送，就无法改变它的风格，所以花点时间选择合适的吧！” [http://docs.dotcloud.com/0.4/guides/flavors/](http://docs.dotcloud.com/0.4/guides/flavors/)

# c# - 从一个下拉列表中选择类别以在另一个下拉列表中显示子类别

> ID：12415037
> 
> 赞同：0
> 
> 时间：2012-09-13T21:26:54.810
> 
> 标签：c#, asp.net, drop-down-menu, code-behind

我试图通过 C# 制作另一个下拉列表控件。我的计划是，第一个 DropDownList 显示诸如“大小”“性别”“模型”之类的类别，当您选择其中一个时，将出现一个新的 DropDownList，其中包含先前选择的类别的新子类别。

例如，如果我选择“Size”，则会出现一个新的 DropDownList，并可以从多种尺寸中进行选择。

我得到一个错误，同时测试听起来像这样：确保您的方法参数格式正确。

这是我的代码的样子：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using ContactTableAdapters;

public partial class Test : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    protected void ddlTwo_SelectedIndexChanged(object sender, EventArgs e)
    {
        ddlTwo.Items.Clear();
        if (ddlThree.SelectedValue != "0")
        {
            Contact.CategoriesDataTable table;
            ddlTwo.AppendDataBoundItems = true;
            ddlTwo.Items.Add(new ListItem("Choose", "0"));
            CategoriesTableAdapter subM = new CategoriesTableAdapter();
            int CategoryID = Convert.ToInt32(ddlThree.SelectedValue); //This is where I get the error
            table = subM.GetCategoryByCategoryID(CategoryID);
            foreach (Contact.CategoriesRow row in table)
            {

                string text = row.Category;
                string value = row.CategoryID.ToString();
                ddlTwo.Items.Add(new ListItem(text, value));

            }
        }
    }
} 
```

谁能告诉我，我可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T21:46:26.540

看起来您正在返回一个无法转换为整数的值。

您可以做的是创建一个可以引用您的措辞值的 Enum ：

```
int CategoryID = Enum.GetValues(typeof(Category), (ddlThree.SelectedValue)); 
```

你的枚举看起来像这样：

```
enum Category
{
Size= 1,
Gender = 2,
Value = 3
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T21:49:54.890

如果您实际上是在响应 ddlTwo 上的事件，请使用以下命令：

```
protected void ddlTwo_SelectedIndexChanged(object sender, EventArgs e)
    {
        ddlThree.Items.Clear();
        if (ddlTwo.SelectedValue != "0")
        {
            Contact.CategoriesDataTable table;
            ddlThree.AppendDataBoundItems = true;
            ddlThree.Items.Add(new ListItem("Choose", "0"));
            CategoriesTableAdapter subM = new CategoriesTableAdapter();
            int CategoryID = Convert.ToInt32(ddlTwo.SelectedValue); //This is where I get the error
            table = subM.GetCategoryByCategoryID(CategoryID);
            foreach (Contact.CategoriesRow row in table)
            {

                string text = row.Category;
                string value = row.CategoryID.ToString();
                ddlThree.Items.Add(new ListItem(text, value));

            }
        }
    } 
```

# jsp - 为什么 ArrayList 返回空字符串 [] [] []？

> ID：12415038
> 
> 赞同：0
> 
> 时间：2012-09-13T21:26:58.443
> 
> 标签：jsp, jakarta-ee, servlets, web

这是我的数据库查询功能

```
 public static List<UserPass> selectAllUser() {
            ConnectionPool pool = ConnectionPool.getInstance();
            Connection connection = pool.getConnection();
            PreparedStatement ps = null;
            ResultSet rs = null;

            List<UserPass> usersPass = new ArrayList<UserPass>();

            String query = "select * from UserPass";
            try{
            ps = connection.prepareStatement(query);
            rs = ps.executeQuery();

            while(rs.next()){
            UserPass users = new UserPass();
            users.setUserName(rs.getString("user_name"));
            usersPass.add(users);

            }

            return usersPass; 
```

这是我的 UserPass 对象获取函数

```
 public ArrayList<UserPass> getusernames(){

   return usernames;
   } 
```

我的 servlet dopost 就是这样

```
 request.setAttribute("users", UserPassDb.selectAllUser());

    String forward = "/testpage.jsp";
    RequestDispatcher view = request.getRequestDispatcher(forward);
    view.forward(request, response); 
```

我的显示jsp页面是

```
 <form action="TestServlet" method="post">
                <input type="submit">

            </form>

            <c:forEach var="user" items="${users}">

                <c:out value="${user.usernames}"/> 

            </c:forEach> 
```

UserPass 类

```
 /*
            * To change this template, choose Tools | Templates
            * and open the template in the editor.
            */
            package business;

            import java.io.Serializable;
            import java.util.ArrayList;

            /**
            *
            * @author One
            */
            public class UserPass implements Serializable {

                public String username;
                public String password;

                public ArrayList<UserPass> usernames;

                public UserPass(){
                    this.username ="";
                    this.password ="";  
                    this.usernames = new ArrayList<UserPass>();
                }

                public void setUserName(String username) {
                    this.username = username;

                }
                public String getUserName(){

                    return username;
                }

                public ArrayList<UserPass> getusernames(){

                return usernames;
            }
                public void setusernames(ArrayList<UserPass> a){

                    this.usernames = a;
                }
            } 
```

尝试改变它告诉我财产不存在，据我所知。我肯定错了

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T04:31:47.960

你有`getusernames()`哪些回报`ArrayList`，你没有提到`setusernames(ArrayList<UserPass> )`。

但是，如果你想显示用户名，在 JSP 中，改变

```
<c:forEach var="user" items="${users}">

        <c:out value="${user.username}"/> 

</c:forEach> 
```

> 这是如何工作的：

这`users`是请求属性，它是一个`List<UserPass>`. 现在，当您使用 迭代它时`forEach`，您将`UserPass`进入`user`每一行。

然后从bean`user.username`调用。`getUserName``UserPass`

在您的情况下`user.usernames`，它返回 empty `Arraylist`。

# javascript - django smartselect加载jquery两次

> ID：12415043
> 
> 赞同：0
> 
> 时间：2012-09-13T21:27:12.970
> 
> 标签：javascript, jquery, django, django-apps

由于 django 的应用程序，即智能选择，我遇到了麻烦，它尝试自行加载 jquery。我已经自己在头脑中加载 jquery，然后我正在加载与 JQuery UI 相关的东西。但是随着 smartselect 进入正文，它还会再次加载 jquery，这会导致 UI 相关内容出现问题。我不明白如果已经加载了 smartselect jquery，我该如何停止它。

以下是智能选择应用程序的 widgets.py 文件的代码。

```
 import django
from django.conf import settings
from django.forms.widgets import Select
from django.contrib.admin.templatetags.admin_static import static
from django.core.urlresolvers import reverse
from django.utils.encoding import iri_to_uri
from django.utils.safestring import mark_safe
from django.db.models import get_model
import locale
from smart_selects.utils import unicode_sorter

if django.VERSION >= (1, 2, 0) and getattr(settings,
        'USE_DJANGO_JQUERY', True):
    USE_DJANGO_JQUERY = True
else:
    USE_DJANGO_JQUERY = False
    JQUERY_URL = getattr(settings, 'JQUERY_URL', 'http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js')

class ChainedSelect(Select):
    def __init__(self, app_name, model_name, chain_field, model_field, show_all, auto_choose, manager=None, *args, **kwargs):
        self.app_name = app_name
        self.model_name = model_name
        self.chain_field = chain_field
        self.model_field = model_field
        self.show_all = show_all
        self.auto_choose = auto_choose
        self.manager = manager
        super(Select, self).__init__(*args, **kwargs)

    class Media:
        if USE_DJANGO_JQUERY:
            js = [static('admin/%s' % i) for i in
                  ('js/jquery.min.js', 'js/jquery.init.js')]
        elif JQUERY_URL:
            js = (
                JQUERY_URL,
            )

    def render(self, name, value, attrs=None, choices=()):
        if len(name.split('-')) > 1: # formset
            chain_field = '-'.join(name.split('-')[:-1] + [self.chain_field])
        else:
            chain_field = self.chain_field

        if self.show_all:
            view_name = "chained_filter_all"
        else:
            view_name = "chained_filter"
        kwargs = {'app':self.app_name, 'model':self.model_name, 'field':self.model_field, 'value':"1"}
        if self.manager is not None:
            kwargs.update({'manager': self.manager})
        url = "/".join(reverse(view_name, kwargs=kwargs).split("/")[:-2])
        if self.auto_choose:
            auto_choose = 'true'
        else:
            auto_choose = 'false'
        empty_label = iter(self.choices).next()[1] # Hacky way to getting the correct empty_label from the field instead of a hardcoded '--------'
        js = """
        <script type="text/javascript">
        //<![CDATA[
        (function($) {
            function fireEvent(element,event){
                if (document.createEventObject){
                // dispatch for IE
                var evt = document.createEventObject();
                return element.fireEvent('on'+event,evt)
                }
                else{
                // dispatch for firefox + others
                var evt = document.createEvent("HTMLEvents");
                evt.initEvent(event, true, true ); // event type,bubbling,cancelable
                return !element.dispatchEvent(evt);
                }
            }

            function dismissRelatedLookupPopup(win, chosenId) {
                var name = windowname_to_id(win.name);
                var elem = document.getElementById(name);
                if (elem.className.indexOf('vManyToManyRawIdAdminField') != -1 && elem.value) {
                    elem.value += ',' + chosenId;
                } else {
                    elem.value = chosenId;
                }
                fireEvent(elem, 'change');
                win.close();
            }

            $(document).ready(function(){
                function fill_field(val, init_value){
                    if (!val || val==''){
                        options = '<option value="">%(empty_label)s<'+'/option>';
                        $("#%(id)s").html(options);
                        $('#%(id)s option:first').attr('selected', 'selected');
                        $("#%(id)s").trigger('change');
                        return;
                    }
                    $.getJSON("%(url)s/"+val+"/", function(j){
                        var options = '<option value="">%(empty_label)s<'+'/option>';
                        for (var i = 0; i < j.length; i++) {
                            options += '<option value="' + j[i].value + '">' + j[i].display + '<'+'/option>';
                        }
                        var width = $("#%(id)s").outerWidth();
                        $("#%(id)s").html(options);
                        if (navigator.appVersion.indexOf("MSIE") != -1)
                            $("#%(id)s").width(width + 'px');
                        $('#%(id)s option:first').attr('selected', 'selected');
                        var auto_choose = %(auto_choose)s;
                        if(init_value){
                            $('#%(id)s option[value="'+ init_value +'"]').attr('selected', 'selected');
                        }
                        if(auto_choose && j.length == 1){
                            $('#%(id)s option[value="'+ j[0].value +'"]').attr('selected', 'selected');
                        }
                        $("#%(id)s").trigger('change');
                    })
                }

                if(!$("#id_%(chainfield)s").hasClass("chained")){
                    var val = $("#id_%(chainfield)s").val();
                    fill_field(val, "%(value)s");
                }

                $("#id_%(chainfield)s").change(function(){
                    var start_value = $("#%(id)s").val();
                    var val = $(this).val();
                    fill_field(val, start_value);
                })
            })

            dismissAddAnotherPopup = function(win, newId, newRepr) {
                oldDismissAddAnotherPopup(win, newId, newRepr);
                if (windowname_to_id(win.name) == "id_%(chainfield)s") {
                    $("#id_%(chainfield)s").change();
                }
            }
            var oldDismissAddAnotherPopup = dismissAddAnotherPopup;
        })(jQuery || django.jQuery);
        //]]>
        </script>

        """ % {"chainfield":chain_field, "url":url, "id":attrs['id'], 'value':value, 'auto_choose':auto_choose, 'empty_label': empty_label}
        final_choices = []

        if value:
            item = self.queryset.filter(pk=value)[0]
            try:
                pk = getattr(item, self.model_field + "_id")
                filter = {self.model_field:pk}
            except AttributeError:
                try: # maybe m2m?
                    pks = getattr(item, self.model_field).all().values_list('pk', flat=True)
                    filter = {self.model_field + "__in":pks}
                except AttributeError:
                    try: # maybe a set?
                        pks = getattr(item, self.model_field + "_set").all().values_list('pk', flat=True)
                        filter = {self.model_field + "__in":pks}
                    except: # give up
                        filter = {}
            filtered = list(get_model(self.app_name, self.model_name).objects.filter(**filter).distinct())
            filtered.sort(cmp=locale.strcoll, key=lambda x:unicode_sorter(unicode(x)))
            for choice in filtered:
                final_choices.append((choice.pk, unicode(choice)))
        if len(final_choices) > 1:
            final_choices = [("", (empty_label))] + final_choices
        if self.show_all:
            final_choices.append(("", (empty_label)))
            self.choices = list(self.choices)
            self.choices.sort(cmp=locale.strcoll, key=lambda x:unicode_sorter(x[1]))
            for ch in self.choices:
                if not ch in final_choices:
                    final_choices.append(ch)
        self.choices = ()
        final_attrs = self.build_attrs(attrs, name=name)
        if 'class' in final_attrs:
            final_attrs['class'] += ' chained'
        else:
            final_attrs['class'] = 'chained'
        output = super(ChainedSelect, self).render(name, value, final_attrs, choices=final_choices)
        output += js
        return mark_safe(output) 
```

D 我知道如何检查 jquery 是否已经加载到 JS 中。但是Django如何处理它，不知道。有时我认为这些东西仍然有效，但有时不行。不明白为什么会这样。以上是我在未定义`$('.datepicker').datepicker()`并通过萤火虫检查后得出的结论。有时这段代码也不会引起问题。我不明白为什么。

请告诉你们是否有任何想法。请问我是否不够清楚。

谢谢

* * *

更新

这是我加载 jquery 和 jquery ui 的方式：

```
 <!DOCTYPE html>
<html class="no-js" lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Kaasib.com</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="{{STATIC_URL}}css/style.css" />
  <link rel="stylesheet" href="{{STATIC_URL}}css/ui-lightness/jquery-ui-1.8.23.custom.css" />
  <script src="{{STATIC_URL}}js/libs/jquery-1.7.1.min.js"></script>
  <script src="{{STATIC_URL}}js/libs/jquery-ui-1.8.23.custom.min.js "></script>

  <script src="{{STATIC_URL}}js/main.js"></script>
</head> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T22:07:04.333

好的，问题出在我的最后，我遇到了错误， `Error: ReferenceError: dismissAddAnotherPopup is not defined Source File: http://localhost:8000/jobs/create Line: 195`

所以我通过将这`var oldDismissAddAnotherPopup = dismissAddAnotherPopup;`一行放在`dismissAddAnotherPopup()`函数定义之后来解决这个问题。不知道为什么，但它开始产生问题，所以我再次遇到那个 js 错误，但现在我的代码正在运行并且它正在显示 datepicker。

我的模板文件中还有一些代码再次加载 jquery。很抱歉，这是我自己的错，因为我使用 HTML5 样板有点错误。因此，对于这个问题的 yu 来说，唯一的好信息是首先正确检查某些东西的用法，然后再使用它。

# objective-c - paymentWithProductIdentifier 在特定应用购买中已弃用

> ID：12415044
> 
> 赞同：5
> 
> 时间：2012-09-13T21:27:16.637
> 
> 标签：objective-c, ios, xcode

> **可能重复：**
> [paymentWithProductIdentifier 的替代解决方案是什么？](https://stackoverflow.com/questions/10848181/what-is-the-alternative-solution-for-paymentwithproductidentifier)

您好，我正在尝试为 ios 5 和新的 ios 6 设置应用程序购买。我被告知我的“paymentWithProductIdentifier 已弃用”，我想知道是否有人可以告诉我如何修改我的代码，我有点困惑。

```
 SKProduct *selectedProduct = <#from the products response list#>;
  SKPayment *payment = [SKPayment paymentWithProduct:selectedProduct];
 [[SKPaymentQueue defaultQueue] addPayment:payment]; 
```

我看到人们提出以下建议，但我从我的代码中不确定“产品响应列表将是什么”。我以为会，但事实并非如此。

```
 [response.products]; 
```

这是我的方法代码，如果有人能告诉我要改变什么，将不胜感激，谢谢！

```
 -(void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response 

   { 

 SKProduct *validProduct = nil;

 int count = [response.products count];

NSLog (@"count for in app purchases is %d", count);

 if (count>0) {

    validProduct = [response.products objectAtIndex:0];
    SKPayment *payment = [SKPayment paymentWithProductIdentifier:@"appUpdate1"];

    [[SKPaymentQueue defaultQueue] addTransactionObserver:self];
    [[SKPaymentQueue defaultQueue] addPayment:payment]; // <-- KA CHING!

     NSLog (@"payment proccessed I think");
 }
 } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-14T00:33:41.863

看起来您假设只有一种产品，您将其设置为 validProduct。你应该可以使用

```
SKPayment *payment = [SKPayment paymentWithProduct:validProduct] 
```

productIdentifier 是 SKProduct 的属性，因此此方法使用从 SKProduct 获取的标识符创建新的支付对象。

# javascript - 使用 Javascript 有条件地添加

> ID：12415045
> 
> 赞同：1
> 
> 时间：2012-09-13T21:27:35.007
> 
> 标签：javascript

我需要添加一组以下形式的数字：http: [//jsfiddle.net/XxrCZ/1/](http://jsfiddle.net/XxrCZ/1/) 总数必须是仅启用（通过复选框）数字的总和......

我尝试使用此代码，并添加此条件：

```
if ( $(this).is('[type=text]') && parseInt( $(this).val() ) %% $(this).disabled==false )

function sumar()
    {    var total = 0;
         var i = 0;       
        $("#frm input").each( function()
        {
            if ( $(this).is('[type=text]') && parseInt( $(this).val() )  )
            {

                total = total + parseInt($(this).val());
                i++;
            }

        });

        document.frm.total.value = total;

    } 
```

请问有人可以帮我吗？提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T21:30:20.047

```
var sum = 0;
$('input[type="text"]:enabled').each(function(){
   var v = Number($(this).val());
   sum += v;
}); 
```

[演示](http://jsfiddle.net/mrobin/XxrCZ/2/)- 我添加了一个计算按钮，只是为了在启用复选框后触发重新计算。

# xamarin.ios - NSUserDefaults.StandardUserDefaults.SetString() 没有持久化

> ID：12415054
> 
> 赞同：2
> 
> 时间：2012-09-13T21:28:27.697
> 
> 标签：xamarin.ios, nsuserdefaults

我在一个简单的 MonoTouch iPad 应用程序中使用以下代码：

```
 if (NSUserDefaults.StandardUserDefaults.StringForKey("spid") == null) 
        {
            NSUserDefaults.StandardUserDefaults.SetString ("spid", "myName");
            NSUserDefaults.StandardUserDefaults.SetString ("spdomain", "myDomain");
            NSUserDefaults.StandardUserDefaults.SetString ("sppwd", "myPassword");
            NSUserDefaults.StandardUserDefaults.Synchronize();
        }

        WebClient wc = new WebClient();
        wc.Credentials = new NetworkCredential(NSUserDefaults.StandardUserDefaults.StringForKey("spid"), 
                                               NSUserDefaults.StandardUserDefaults.StringForKey("sppwd"), 
                                               NSUserDefaults.StandardUserDefaults.StringForKey("spdomain")); 
```

目的（现在直到我构建了正确的视图）是提供将存储在 plist 文件中的默认凭据（稍后它将被移动到 KeyChain 中以提高安全性）。但是，对 StringForKey("spid") 等的调用返回 null 而不是 "myName"。

为什么调用 Synchronize() 后我的默认值没有保留？即使在每个 SetString() 之后添加 Synchronize() 调用也不能解决问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T22:04:04.090

遵循 Apple API的参数`SetString`（和约定，这对于 .NET 开发人员来说相当混乱，包括我在内），它把第一个参数的**值**和第二个参数作为**name**。

所以你需要写：

```
 NSUserDefaults.StandardUserDefaults.SetString ("myName", "spid");
        NSUserDefaults.StandardUserDefaults.SetString ("myDomain", "spdomain");
        NSUserDefaults.StandardUserDefaults.SetString ("myPassword", "sppwd");
        NSUserDefaults.StandardUserDefaults.Synchronize(); 
```

获得正确的行为。

# ios - CardIO (iOS Xcode)，收到 __udivmodsi4 的链接错误：

> ID：12415058
> 
> 赞同：1
> 
> 时间：2012-09-13T21:28:33.930
> 
> 标签：ios, xcode, card.io

将 CardIO (iOS XCode) 引入我的构建后，我收到 __udivmodsi4 的链接错误

以下是我的环境的一些细节：

*   编译器版本 GCC 4.2
*   XCode v 3.2.5，iOS SDK 4.2

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T21:42:47.227

使用 card.io 需要 Xcode 4.x。这是因为旧的 Xcode 版本使用旧的编译器版本，它不提供对`__udivmodsi4`.

# r - 为 R 安装和编译 cplexAPI 包源

> ID：12415059
> 
> 赞同：1
> 
> 时间：2012-09-13T21:28:39.707
> 
> 标签：r, api, installation, package, cplex

操作系统：Windows 7 x64

R 安装：2.15.1 x64

Cplex 安装：Cplex Studio Academic 124（32 位和 64 位）

我安装了 Rtools，并且我有一个独立的 cygwin 安装，其中包含所有必需的软件包。我也安装了 MikTex...

我设置了以下环境标志...

```
CPLEX_PATH=C:\Program Files\IBM\ILOG\CPLEX_Studio_Academic124
CPLEX_STUDIO_DIR=C:\Program Files\IBM\ILOG\CPLEX_Studio_Academic124
CPLEX_STUDIO_LIB32=C:\Program Files (x86)\IBM\ILOG\CPLEX_Studio_Academic124\opl\bin\x86_win32;C:\Program Files (x86)\IBM\ILOG\CPLEX_Studio_Academic124\opl\oplide\;C:\Program Files (x86)\IBM\ILOG\CPLEX_Studio_Academic124\cplex\bin\x86_win32;C:\Program Files (x86)\IBM\ILOG\CPLEX_Studio_Academic124\cpoptimizer\bin\x86_win32
CPLEX_STUDIO_LIB64=C:\Program Files\IBM\ILOG\CPLEX_Studio_Academic124\opl\bin\x64_win64;C:\Program Files\IBM\ILOG\CPLEX_Studio_Academic124\opl\oplide\;C:\Program Files\IBM\ILOG\CPLEX_Studio_Academic124\cplex\bin\x64_win64;C:\Program Files\IBM\ILOG\CPLEX_Studio_Academic124\cpoptimizer\bin\x64_win64 
```

然后，当我在 RI 中运行安装命令时，出现以下错误

* * *

```
> install.packages("c:/cplexAPI_1.2.2.tar.gz", type="source")
Installing package(s) into ‘C:/Users/root/Documents/R/win-library/2.15’
(as ‘lib’ is unspecified)
inferring 'repos = NULL' from the file name
* installing *source* package 'cplexAPI' ...
** package 'cplexAPI' successfully unpacked and MD5 sums checked
** libs

*** arch - i386
cygwin warning:
  MS-DOS style path detected: C:/PROGRA~1/R/R-215~1.1/etc/i386/Makeconf
  Preferred POSIX equivalent is: /cygdrive/c/PROGRA~1/R/R-215~1.1/etc/i386/Makeconf
  CYGWIN environment variable option "nodosfilewarning" turns off this warning.
  Consult the user's guide for more details about POSIX paths:
    http://cygwin.com/cygwin-ug-net/using.html#using-pathnames
gcc  -I"C:/PROGRA~1/R/R-215~1.1/include" -DNDEBUG -g -D_R_=1 -DUSE_R=1 -I"C:\Program Files\IBM\ILOG\CPLEX_Studio_Academic124\cplex\include"         -O3 -Wall  -std=gnu99 -mtune=core2 -c cplexAPI.c -o cplexAPI.o
gcc  -I"C:/PROGRA~1/R/R-215~1.1/include" -DNDEBUG -g -D_R_=1 -DUSE_R=1 -I"C:\Program Files\IBM\ILOG\CPLEX_Studio_Academic124\cplex\include"         -O3 -Wall  -std=gnu99 -mtune=core2 -c cplexR.c -o cplexR.o
gcc  -I"C:/PROGRA~1/R/R-215~1.1/include" -DNDEBUG -g -D_R_=1 -DUSE_R=1 -I"C:\Program Files\IBM\ILOG\CPLEX_Studio_Academic124\cplex\include"         -O3 -Wall  -std=gnu99 -mtune=core2 -c cplex_checkAPI.c -o cplex_checkAPI.o
gcc  -I"C:/PROGRA~1/R/R-215~1.1/include" -DNDEBUG -g -D_R_=1 -DUSE_R=1 -I"C:\Program Files\IBM\ILOG\CPLEX_Studio_Academic124\cplex\include"         -O3 -Wall  -std=gnu99 -mtune=core2 -c cplex_longparamAPI.c -o cplex_longparamAPI.o
gcc  -I"C:/PROGRA~1/R/R-215~1.1/include" -DNDEBUG -g -D_R_=1 -DUSE_R=1 -I"C:\Program Files\IBM\ILOG\CPLEX_Studio_Academic124\cplex\include"         -O3 -Wall  -std=gnu99 -mtune=core2 -c init.c -o init.o
gcc -shared -s -static-libgcc -o cplexAPI.dll tmp.def cplexAPI.o cplexR.o cplex_checkAPI.o cplex_longparamAPI.o init.o -LC:\Program Files (x86)\IBM\ILOG\CPLEX_Studio_Academic124 -LC:\Program Files\IBM\ILOG\CPLEX_Studio_Academic124\opl\bin\x64_win64;C:\Program Files\IBM\ILOG\CPLEX_Studio_Academic124\opl\oplide\;C:\Program Files\IBM\ILOG\CPLEX_Studio_Academic124\cplex\bin\x64_win64;C:\Program Files\IBM\ILOG\CPLEX_Studio_Academic124\cpoptimizer\bin\x64_win64 -lm -lcplex124 -LC:/PROGRA~1/R/R-215~1.1/bin/i386 -lR
c:/rtools/gcc-4.6.3/bin/../lib/gcc/i686-w64-mingw32/4.6.3/../../../../i686-w64-mingw32/bin/ld.exe: cannot find -lcplex124
collect2: ld returned 1 exit status
ERROR: compilation failed for package 'cplexAPI'
* removing 'C:/Users/root/Documents/R/win-library/2.15/cplexAPI'
Warning messages:
1: running command 'C:/PROGRA~1/R/R-215~1.1/bin/x64/R CMD INSTALL -l "C:/Users/root/Documents/R/win-library/2.15"   "c:/cplexAPI_1.2.2.tar.gz"' had status 1 
2: In install.packages("c:/cplexAPI_1.2.2.tar.gz", type = "source") :
  installation of package ‘c:/cplexAPI_1.2.2.tar.gz’ had non-zero exit status 
```

* * *

我不确定我做错了什么或我错过了什么

# java - 在简单的文件复制 java 程序中调用方法的问题

> ID：12415062
> 
> 赞同：0
> 
> 时间：2012-09-13T21:28:52.013
> 
> 标签：java, methods, call

```
import java.io.*;
import java.util.StringTokenizer;

class FileCopy
{
        public static void main(String[] args) throws IOException
        {
                String infile = null;
                String outfile = null;
                BufferedReader stdin = new BufferedReader(new InputStreamReader(System.in));    

                if (args.length >= 2) //both files given via command line
                {
                        infile = args[0];
                        if (fileExists(infile) == false)
                        {
                                infile = getInputFile();
                        }
                        outfile = args[1];
                }
                else if (args.length == 1) //input file given via command line
                {
                        infile = args[0];
                        outfile = getOutputFile();
                }
                else //no files given on command line
                {
                        infile = getInputFile();
                        outfile = getOutputFile();
                }

                //create file objects to use
                File in = new File(infile);
                File out = new File(outfile);

                /*
                 *rest of code
                 */
        }

        //get the input file from the user if given file does not exist
        public static String getInputFile() throws IOException
        {
                BufferedReader stdin = new BufferedReader(new InputStreamReader(System.in));
                String fileName = null;
                boolean haveFile = false;

                do
                {
                        System.out.println("Enter a valid filename:");
                        System.out.print(">> ");
                        fileName = stdin.readLine();
                        haveFile = fileExists(fileName);
                }while(haveFile == false);

                return fileName;        
        }

        //get the output file and test things
        public static String getOutputFile()
        {
                return null;
        }

        //check the given file to see if it exists in the current working directory
        public static boolean fileExists(String n)
        {
                boolean exist = false;
                if (n.length() != 0)
                {
                        File tmp = new File(n);
                        exist = tmp.exists();
                }
                return exist;
        }
} 
```

我在第 53 行调用 fileExists 时遇到问题。据我所知，语法是正确的，但它只是无限期地停留在 do 循环中。在 Jcreator 中单步执行该程序并没有找到任何解决方案，尽管有趣的是，该程序直接跳过了第 53 行而没有跳转到 fileExists。有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T21:42:47.980

之后`File tmp = new File(n);`，添加`System.out.println(tmp.getAbsolutePath());`。它可能会立即指出路径文件名中出了什么问题。

# url - magento url 无法正确呈现

> ID：12415063
> 
> 赞同：0
> 
> 时间：2012-09-13T21:29:01.587
> 
> 标签：url, magento

我已经构建了一个 magento 模板模块，该模块生成一个单一类别的产品列表，在这个网站上的人们的帮助下，以及 Christian Young @ [http://workingmagento.blogspot.ca/的一篇好文章](http://workingmagento.blogspot.ca/)

唯一的问题是 href Url 无法正确呈现。

网址如下所示：

```
 <button class="button btn-cart" onclick="setLocation('http://shop.com/en/checkout/cart/add?product=&qty=1')" type="button"> 
```

网址应如下所示：

```
 <button class="button btn-cart" type="button" onclick="setLocation('http://mshop.com/en/checkout/cart/add/uenc/aHR0cDovL3Nob3Btc2N0ZXN0LmNvbS9lbi9tb2JpbGU4MjAwLmh0bWw,/product/12/')"> 
```

这是代码：

```
$productCollection = Mage::getModel('catalog/category')->load(4)
    ->getProductCollection()
    ->addAttributeToSelect('*')
    ->addAttributeToFilter('status', 1)
    ->addAttributeToFilter('visibility', 4)
    ->setOrder('price', 'ASC');
?>

<div class='block block-list'> 
<div class='block-title'><strong><span><?php echo $this->__('SPECIALS') ?></span></strong></div>
    <div class='block-content'> 
        <ul>
            <h2><?php echo $this->__( $this->getLabel() ); ?></h2>
            <?php foreach ($productCollection as $product): ?>
                <div class="item">
                    <a class="product-image" href="<?php echo $product->getProductUrl() ?>">
                        <img src="<?php echo $this->helper('catalog/image')->init($product, 'small_image')->resize(150); ?>" alt="<?php echo $this->htmlEscape($this->getImageLabel($product, 'small_image')) ?>" />
                    </a>
                    <a class="product-name" href="<?php echo $product->getProductUrl() ?>"><?php echo $this->htmlEscape($product->getName()) ?></a>                     
                   <?php echo $this->getPriceHtml($product, true) ?>                       
                </div>

                <div class="cms-price-box" style=" text-align:center;"></div>
                <div class="button-row" style="text-align:center;">                 
                    <button class="button btn-cart" type="button" onclick="setLocation('<?php echo $this->getUrl('')."checkout/cart/add?product=".$this->getId()."&qty=1"  ?>')" class="button"><span><?php echo $this->__('Add to Cart') ?></span></button>
                </div>
                <br/><br/>
            <?php endforeach ?>
        </ul>
     </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T21:42:55.983

试试下面的代码：

```
<?php
    /** @var $cartHelper Mage_Checkout_Helper_Cart */
    $cartHelper = Mage::helper('checkout/cart');
?>
<button class="button btn-cart" type="button" onclick="setLocation('<?php echo $cartHelper->getAddUrl($product); ?>')" class="button"> 
```

您还可以添加其他选项作为 Mage_Checkout_Helper_Cart::getAddUrl() 方法的第二个参数。

# jquery - 使用 jquery/offset 浮动 div - 忽略 href 主题标签

> ID：12415073
> 
> 赞同：1
> 
> 时间：2012-09-13T21:30:08.007
> 
> 标签：jquery, html, scroll, hashmap

```
<script type="text/javascript">
$(document).ready(function () {  
  var top = $('#rt_outer').offset().top - parseFloat($('#rt_outer').css('marginTop').replace(/auto/, 0));
  $(window).scroll(function (event) {
    // what the y position of the scroll is
    var y = $(this).scrollTop();

    // whether that's below the form
    if (y >= top) {
      // if so, ad the fixed class
      $('#rt_outer').addClass('fixed');
    } else {
      // otherwise remove it
      $('#rt_outer').removeClass('fixed');
    }
  });
});
</script> 
```

问题很简单。如果我使用标头重定向到页面中的新位置（比如说一半，我在使用 header("somepage.php#halfway") 处理 php 脚本后跳转到#halfway，则由该脚本处理的 div 容器获胜'在页面向任一方向滚动之前不要向下跳。

我知道有一个解决方案，我只是不知道是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T21:35:17.320

您可以使用 Window 的 hashchange 事件：

```
$(window).on("hashchange", function () {
   console.log('hash changed'); 
});​ 
```

对于您的解决方案，您可以将滚动代码提取到一个函数中，然后从滚动和 hashchange 处理程序中调用该函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:19:28.753

根据 John Koerner 的回复，我能够进行一些研究并提出解决方案。[您可以在http://www.colonelcoon.net?override=true/](http://www.colonelcoon.net?override=true/)上看到它的实际效果

这是我最终使用的代码...

```
<script src="http://github.com/cowboy/jquery-hashchange/raw/v1.3/jquery.ba-hashchange.js"></script>
<script type="text/javascript">
$(document).ready(function () {

var top = $('#rt_outer').offset().top - parseFloat($('#rt_outer').css('marginTop').replace(/auto/, 0));

  function checkScroll() {
    // what the y position of the scroll is
    var y = $(this).scrollTop();

    // whether that's below the form
    if (y >= top) {
      // if so, ad the fixed class
      $('#rt_outer').addClass('fixed');
    } else {
      // otherwise remove it
      $('#rt_outer').removeClass('fixed');
    }
  }

  $(window).hashchange(function (event) {
      checkScroll();
  });

  $(window).scroll(function (event) {
      checkScroll();
  });

  $(window).hashchange();
});
</script> 
```

# php - 如何连接5张桌子

> ID：12415074
> 
> 赞同：-3
> 
> 时间：2012-09-13T21:30:09.180
> 
> 标签：php, mysql, sql, database

我的 db.movi​​es 中有 5 个表。像这样：

**db.movi​​es**

```
id | title   | plot
------------------
1  | matrix  | ddd 
```

**db.aka**

```
id | movie_id | aka_title | aka_country
----------------------------------------
1  | 1        | neo       | usa 
```

**db.genre**

```
id | genre_id | movie_id 
------------------------
1  | 1        | 1
2  | 2        | 1 
```

**db.genre_name**

```
id | genre_name
---------------
1  | sci-fi
2  | action 
```

**db.tags**

```
id | movie_id | keyword
-----------------------
1 | 1         | hacker
2 | 1         | computer 
```

如何像这样创建 db.movi​​es 表：

**db.movi​​es**

```
id | title   | plot | genre          | aka | aka_country | tags
1  | matrix  | ddd  | sci-fi, action | neo | usa         | hacker, computer 
```

我怎样才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T21:47:18.490

您将要为此使用 a [`LEFT JOIN`](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)：

```
select m.id,
    m.title,
    m.plot,
    GROUP_CONCAT(distinct g.genre_name)  as genre,
    a.aka_title,
    a.aka_country,
    GROUP_CONCAT(distinct t.keyword) keyword
from movies m
left join aka a
    on m.id = a.movie_id
left join genre g
    on m.id =g.movie_id
left join genre_name gn
    on g.genre_id = gn.id
left join tags t
    on m.id = t.movie_id
group by m.id 
```

我不知道您为什么要将此数据存储在另一个表中，我猜您只是指结果而不是表。如果任何表不存在记录，这`LEFT JOIN`将允许返回记录。

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/a0691/20)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T21:41:56.950

您可以使用：

```
select
    mov.id,
    mov.title,
    mov.plot,
    group_concat(distinct genre_name) as genre,
    aka_title as aka,
    aka_country,
    group_concat(distinct keyword) as tags
from movies mov
join aka on mov.id = aka.movie_id
join genre gen on mov.id = gen.movie_id
join genre_name gna on gen.genre_id = gna.id
join tags tag on mov.id = tag.movie_id
group by mov.id; 
```

# 见[sqlfiddle](http://sqlfiddle.com/#!2/24efcd/25)

# php - PHP转义字符被拉出

> ID：12415079
> 
> 赞同：0
> 
> 时间：2012-09-13T21:30:33.123
> 
> 标签：php, encoding, escaping

我有一个文件，其中包含如下代码行：

```
$var = "<link rel=\"stylesheet\" href=\"" . GLOBAL_PATH . "system/modules/" . $path . "/" . $css . "\" media=\"screen\">" 
```

我将其打开，然后将其保存回服务器。当我使用 fwrite() 保存回服务器然后重新打开时，我得到了这个：

```
$var = "<link rel="stylesheet" href="" . GLOBAL_PATH . "system/modules/" . $path . "/" . $css . "" media="screen">" 
```

...转义引号的斜线消失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T21:34:44.513

它们并没有“消失”，因为它们在技术上不在原始字符串中。考虑一下：

```
$str = "\"";
echo strlen($str); // 1, not 2! 
```

... 因为`$str`字符串只存储一个符号（双引号），反斜杠用于防止它被误读为字符串文字的结尾。

虽然 PHP 能够神奇地恢复“丢失”的斜线（使用`magic_quotes_runtime`指令），但它在 PHP 5.3 中已被弃用并在 5.4 中*被删除。*

*当您确实*需要恢复它们时，另一种方法是使用[addlashes()](http://php.net/addslashes)函数。

 *```
$str = "\"";
echo addslashes($str); // \" 
```*

# css - CSS列表菜单；按钮翻转时的额外填充

> ID：12415080
> 
> 赞同：1
> 
> 时间：2012-09-13T21:30:38.930
> 
> 标签：css, navigation, padding

我一直在疯狂地试图弄清楚为什么当我翻转它们时我的导航按钮上会出现额外的填充。不过，它只显示在它们的左侧和右侧。这是它的截图的链接：

[http://i179.photobucket.com/albums/w319/jdauel/Screenshot2012-09-13at25417PM.png](http://i179.photobucket.com/albums/w319/jdauel/Screenshot2012-09-13at25417PM.png)

我认为这与我的 CSS 有关，但我不知道了。请帮我？？？我尝试使用 Firebug 来解决它，但没有占上风。

这是代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"     
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Farren's Photography</title>
<style type="text/css">
html {
height: 100%;
width: 100%;
}
body {
margin: 0px;
}
#container {
font-family: Georgia, "Times New Roman", Times, serif;
font-size: 1.2em;
color: #000;
background-color: #06F;
text-align: left;
padding: 0px;
height: 650px;
width: 960px;
margin-right: auto;
margin-left: auto;
background-image: url(images/background_image.png);
background-repeat: no-repeat;
margin-top: 45px;
}
a:link {
color: #FFF;
}
a:visited {
color: #FFF;
}
a:hover {
color: #FFF;
}
#container #logo {
}
#container #logo #fp-logo {
background-image: url(images/logo.png);
height: 137px;
width: 408px;
text-indent: -9999px;
display: block;
}
#logo {
height: 137px;
width: 408px;
position: relative;
padding-top: 35px;
padding-right: 0px;
padding-bottom: 0px;
padding-left: 35px;
}
#main {
background-color: #FFF;
min-height: 383px;
width: 707px;
position: relative;
left: 217px;
top: 16px;
right: 36px;
bottom: 113px;
}
#container #navbar {
font-family: Georgia, "Times New Roman", Times, serif;
font-size: 14px;
color: #FFF;
text-align: right;
height: 45px;
background-color: #CC0000;
position: relative;
top: 8px;
bottom: 0px;
left: 0px;
right: 0px;
}
#container #navbar ul li a {
text-decoration: none;
}
#container #navbar ul {
list-style-type: none;
padding-top: 16px;
}
#container #navbar ul li {
display: inline;
background-color: #280803;
margin: 0px;
height: 0px;
width: 0px;
position: relative;
padding-top: 16px;
padding-right: 15px;
padding-bottom: 17px;
padding-left: 15px;
}
#container #navbar ul li a:link {
text-decoration: none;
color: #FFF;
}
#container #navbar ul li a:visited {
text-decoration: none;
color: #FFF;
}
#container #navbar ul li a:hover {
text-decoration: none;
color: #FFF;
background-color: #027e8e;
padding-top: 16px;
padding-right: 15px;
padding-bottom: 17px;
padding-left: 15px;
margin: 0px;
}
#footer {
font-family: Arial, Helvetica, sans-serif;
font-size: x-small;
height: 28px;
position: relative;
top: 8px;
color: #FFF;
font-style: italic;
}
</style>
</head>

<body>
<div id="container">
<div id="logo"><a href="http://www.farrensphotography.com" title="Farren's Photography"     
target="_self" id="fp-logo">Farren's Photography</a></div><!-- end logo -->
<div id="main">
<div id="content">
</div><!-- end content -->
</div><!-- end main -->
<div id="navbar">
<ul>
 <li><a href="index.html" target="_self">Home</a></li>
 <li><a href="portfolio.html" target="_self">Portfolio</a></li>
 <li><a href="mystyle.html" target="_self">My Style</a></li>
 <li><a href="specials.html" target="_self">Specials</a></li>
 <li><a href="pricing.html" target="_self">Pricing</a></li>
 <li><a href="contact.html" target="_self">Contact</a></li>
</ul>
</div>
<!-- end navbar -->
<div id="footer">
<div id="copyright">All images copyright© Farrens Photography
</div><!-- end copyright -->
<div id="network">Facebook button
</div><!-- end network -->
</div><!-- end footer -->
</div><!-- end container -->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T05:10:44.427

***[演示](http://tinkerbin.com/MtEBGArs)*** ......................

嗨，现在只需像这样更改您的CSS

```
#container #navbar ul {
list-style-type: none;
margin:0;
padding:0;}

#container #navbar ul li {
display: inline-block;
vertical-align:top;
  background-color: #280803;
margin:0;
  padding:0;
position: relative;

}
#container #navbar ul li a:link {
text-decoration: none;
color: #FFF;
}
#container #navbar ul li a:visited {
text-decoration: none;
color: #FFF;
}

#container #navbar ul li a{
  display:block;
  line-height:45px;
  padding-left:10px;
  padding-right:10px;
}
#container #navbar ul li a:hover {
color: #FFF;
background-color: #027e8e;
} 
```

***[现场演示](http://tinkerbin.com/MtEBGArs)***

# spring - 如何使用 jpa、hibernate 和 scurity 启动和配置 spring base mvc webapplication

> ID：12415082
> 
> 赞同：0
> 
> 时间：2012-09-13T21:30:49.623
> 
> 标签：spring, spring-mvc, spring-security, jpa-2.0

我正在尝试使用 Spring mvc + security 开发一个基于 Spring 的 web 应用程序，使用 Hibernate 的 JPA。当然，我阅读了文档、一本书和其他示例。但是因为我对 spring 真的很陌生，所以我不知道哪种方式是最好的，或者是你使用 spring 3.1 的方式

我有一个工作 mvc 项目，我在其中创建了一些控制器。我用新实体修改了 spring jpa 模板项目。但现在我读的越多，我得到的问题就越多……

**1\. 创建 mvc、security jpa 项目的最佳方式是什么？** 我应该从头开始，我应该使用来自 sts 的 mvc 模板项目并添加 jpa 的依赖项，hibernate。或者反过来......从那个 jpa sts 模板开始并集成 mvc ？

我找到了一个示例项目，它看起来与我正在尝试做的事情很接近[https://github.com/making/springmvc-jpa-blank](https://github.com/making/springmvc-jpa-blank)。但接下来我的问题开始了。

**2\. 我应该使用哪个 ApplicationContext？**

AnnotationConfigWebApplicationContext ? XMLConfig*上下文？我不知道我应该使用哪种方式。通常我想要注释方式。

我想我必须将该代码插入我的 web.xml

```
<!-- Configure ContextLoaderListener to use AnnotationConfigWebApplicationContext
   instead of the default XmlWebApplicationContext -->
<context-param>
  <param-name>contextClass</param-name>
  <param-value>
      org.springframework.web.context.support.AnnotationConfigWebApplicationContext
  </param-value>
</context-param>

<!-- Configuration locations must consist of one or more comma- or space-delimited
   fully-qualified @Configuration classes. Fully-qualified packages may also be
   specified for component-scanning -->
<context-param>
  <param-name>contextConfigLocation</param-name>
  <param-value>com.acme.AppConfig</param-value>
</context-param> 
```

然后我可以用 @Configuration 注释一个类，并加载其他东西，比如我的 persitens xml。？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-08T15:57:23.157

Now 2 years later i would use [http://projects.spring.io/spring-boot/](http://projects.spring.io/spring-boot/) with this nice webpage ([http://start.spring.io/](http://start.spring.io/)) for starting a new project.

# c# - MigraDoc - 段落中的某些文本加粗

> ID：12415083
> 
> 赞同：23
> 
> 时间：2012-09-13T21:30:53.433
> 
> 标签：c#, pdfsharp, migradoc

在 MigraDoc 中，如果我有一个段落，我怎么能只加粗段落中的*一些*文本，而不是整个段落。

编辑：下面是我用来添加粗体段落的典型代码。

```
var paragraph = section.AddParagraph("This text");
paragraph.Format.Font.Bold = true; 
```

我不能只添加单独的段落来分割文本，因为 MigraDoc 在段落之间放置了空格。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-13T22:38:18.357

尝试以下几行：

```
var paragraph = section.AddParagraph("This text"); 

paragraph.AddFormattedText("Text in Bold Style", TextFormat.Bold); 
```

# gwt - GWT 延迟绑定是否在单个入口点的范围内返回相同类型的单例？

> ID：12415085
> 
> 赞同：3
> 
> 时间：2012-09-13T21:31:03.917
> 
> 标签：gwt

假设我有许多用作库的 GWT 模块，以及一个具有继承所有库模块的入口点的模块。

每个子模块都需要访问`SomeClass`.

如果我调用`GWT.create(SomeClass.class)`模块 A 和 B，我会得到相同的实例吗？如果是这样，这是否有保证？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T03:10:12.503

No.`GWT.create(SomeClass.class)`编译为`new SomeClass()`，除非有某种类型的重新绑定规则 - a`replace-with`或`generate-with`规则将导致 this 改为调用这些规则选择的任何类型的默认构造函数。

这意味着这`GWT.create`不是提供对单例实例的访问的合适方式。相反，请考虑使用一些 DI 工具，例如 Gin，或通过始终传递相同实例的手动 DI。也可以使用`static`关键字来保留一个实例，所有编译到同一个应用程序中的代码都可以引用它。

# testing - 在 Symfony2 中编写功能测试时，仅使用选项的标签而不是其直接值来设置选择字段的值

> ID：12415087
> 
> 赞同：6
> 
> 时间：2012-09-13T21:31:13.433
> 
> 标签：testing, symfony, web-crawler

在编写功能测试时，如果我只有我想要的选项的标签，而没有实际值，如何设置选择框的值？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-15T01:21:01.093

我不确定我是否得到了你所需要的，我想你有这样的表格

```
<form action="..." method="post">
    ...
    <select id="my_form_category" name="my_form[category]"> 
        <option value="1">category1</option>
        <option value="2">category2</option>
        <option value="3">category3</option>
   </select>
   ...
   <button type="submit">Edit</button>

 </form> 
```

并且您要选择`category2`. 即使您不知道选项值，您也可以使用爬虫来提取它

```
$client = static::createClient();
// go to form
$crawler = $client->request('GET', '...');
$value = $crawler->filter('#my_form_category option:contains("category2")')->attr('value');
$form = $crawler->selectButton('Edit')->form();
$form['my_form[category]']->select($value);
// ... set other values
$client->submit($form); 
```

# sql - 高效多参数搜索的数据结构

> ID：12415091
> 
> 赞同：3
> 
> 时间：2012-09-13T21:31:41.157
> 
> 标签：sql, data-structures

我收集了多维对象（例如`class Person = {age : int , height : int, weight : int etc...}`）。我需要使用某些维度固定而其余未指定（例如`getallPersonWith {age = c , height = a}`或`getAllPersonWith {weigth = d}`...）的查询来查询集合

现在我有一个多图`{age, Height,...}`（例如可以固定的所有维度）-> 。要`List : Person`执行查询，我首先计算验证查询的键集，然后合并映射中的相应列表。就查询速度而言，有什么更好的吗？特别是有什么更接近按维度使用一个排序列表（我认为这是最快的解决方案，但管理起来太麻烦:)）

为了清楚起见，我不是在寻找 sql 查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T08:01:55.797

为了您的目的，您可以查看： [http ://code.google.com/p/cqengine/](http://code.google.com/p/cqengine/)

应该让你朝着正确的方向前进

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T22:26:52.183

你的意思是这样的：

```
SELECT * FROM person p
WHERE gender = 'F'
  AND age >=18
  AND age < 30
  AND weight > 60 -- metric measures here !!
  AND weight < 70
  AND NOT EXISTS (
    SELECT * from couple c
    WHERE c.one = p.id OR c.two=p.id
    ); 
```

你为什么认为我使用 SQL？

# jquery - Jquery 序列化数据

> ID：12415092
> 
> 赞同：0
> 
> 时间：2012-09-13T21:31:50.713
> 
> 标签：jquery, forms, validation, post, jquery-validate

所以我在这个表单上有几个文本框、下拉菜单和单选选项。当用户单击提交时，我想保存所有这些信息，以便将其放入数据库中。这就是表单的所有输入

```
<div id="reg2a">
First Name: <br/><input type="text" name="fname" /> <br/>
Last Name: <br/><input type="text" name="lname" /> <br/>
Address: <br/><input type="text" name="address" /> <br/>
City: <br/><input type="text" name="city" /> <br/>
State: <br/><input type="text" name="state" /> <br/>
Zip Code: <br/><input type="text" name="zip" /> <br/>
Phone Number: <br/><input type="text" name="phone" /> <br/>
Fax: <br/><input type="text" name="fax" /> <br/>
Email: <br/><input type="text" name="email" /> <br/>
Ethnicity: <i>Used only for grant reporting purposes</i> <br/><input type="text" name="ethnicity" /> <br/><br/>

Instutional Information Type (select the best option) <br/>
<select name="iitype">
<option value="none">None</option>
<option value="uni">University</option>
<option value="commorg">Community Organization</option>
</select> <br/><br/>

    Number of sessions willing to present:
    <select id="vennum_select" name="vnum">
      <?php for($i=0;$i<=3;$i++) { ?>
        <option value="<?php echo $i ?>"><?php echo $i ?></option>
      <?php } ?><br/>
    </select><br/>
    Number of tables requested:
    <select id="tabnum_select" name="tnum">

      <?php for($i=1;$i<=3;$i++) { ?>
        <option value="<?php echo $i ?>"><?php echo $i ?></option>
      <?php } ?>
    </select><br/><br/>
    Awarding of a door prize during the conference will result in a reduction in the cost of your first table. <br/><br/>
    I am providing a door prize for delivery during the conference of $75 or more
    <select id="prize_select" name="pnum">
        <option value="0">No</option>
        <option value="1">Yes</option>  
    </select><br/>

Prize name: <input type="text" name="prize_name" /><br/>
Description: <input type="text" name="descr" /><br/>
Value: <input type="text" name="retail" /><br/><br/>

Name of Institution: <br/><input type="text" name="institution" /> <br/><br/>

Type (select the best option) <br/>
<select name="type">
<option value="none">None</option>
<option value="k5">K-5</option>
<option value="k8">K-8</option>
<option value="68">6-8</option>
<option value="912">9-12</option>
</select> <br/><br/>

Address: <br/><input type="text" name="address_sch" /> <br/>
City: <br/><input type="text" name="city_sch" /> <br/>
State: <br/><input type="text" name="state_sch" /> <br/>
Zip Code: <br/><input type="text" name="zip_sch" /> <br/>

<form name="frm2sub" id="frm2sub" action="page3.php" method="post">
<input type="submit" name="submit" value="Submit" id="submit" />
</form>
</div> 
```

这是我的jQuery函数：

```
$("#frm2sub").submit( function() {  
    var values = {};
values["fname"] = $("#fname").val();
}); 
```

我可以为每个输入框执行此操作，但我想将所有这些数据提供给下一页。那么如何将这个数组放入 $_POST 中呢？顺便说一句，我试过做

```
var data = $("#reg2a").serialize(); 
```

和

```
var data = $(document).serialize(); 
```

数据最终为空。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T21:36:22.290

您需要在输入周围放置一个表单，然后为表单提供一个 ID 并使用 jQuery 的[序列化](http://api.jquery.com/serialize/)函数。这将为您提供所有值的 URL 编码字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T21:39:03.233

您应该将所有输入元素包装在表单标记中。然后所有数据将在 page3.php 的 $_POST 变量中可用

像这样：

```
<form name="frm2sub" id="frm2sub" action="page3.php" method="post">
    <div id="reg2a">
    First Name: <br/><input type="text" name="fname" /> <br/>
    Last Name: <br/><input type="text" name="lname" /> <br/>
    Address: <br/><input type="text" name="address" /> <br/>
    City: <br/><input type="text" name="city" /> <br/>
    State: <br/><input type="text" name="state" /> <br/>
    Zip Code: <br/><input type="text" name="zip" /> <br/>
    Phone Number: <br/><input type="text" name="phone" /> <br/>
    Fax: <br/><input type="text" name="fax" /> <br/>
    Email: <br/><input type="text" name="email" /> <br/>
    Ethnicity: <i>Used only for grant reporting purposes</i> <br/><input type="text" name="ethnicity" /> <br/><br/>

    Instutional Information Type (select the best option) <br/>
    <select name="iitype">
    <option value="none">None</option>
    <option value="uni">University</option>
    <option value="commorg">Community Organization</option>
    </select> <br/><br/>

        Number of sessions willing to present:
        <select id="vennum_select" name="vnum">
          <?php for($i=0;$i<=3;$i++) { ?>
            <option value="<?php echo $i ?>"><?php echo $i ?></option>
          <?php } ?><br/>
        </select><br/>
        Number of tables requested:
        <select id="tabnum_select" name="tnum">

          <?php for($i=1;$i<=3;$i++) { ?>
            <option value="<?php echo $i ?>"><?php echo $i ?></option>
          <?php } ?>
        </select><br/><br/>
        Awarding of a door prize during the conference will result in a reduction in the cost of your first table. <br/><br/>
        I am providing a door prize for delivery during the conference of $75 or more
        <select id="prize_select" name="pnum">
            <option value="0">No</option>
            <option value="1">Yes</option>  
        </select><br/>

    Prize name: <input type="text" name="prize_name" /><br/>
    Description: <input type="text" name="descr" /><br/>
    Value: <input type="text" name="retail" /><br/><br/>

    Name of Institution: <br/><input type="text" name="institution" /> <br/><br/>

    Type (select the best option) <br/>
    <select name="type">
    <option value="none">None</option>
    <option value="k5">K-5</option>
    <option value="k8">K-8</option>
    <option value="68">6-8</option>
    <option value="912">9-12</option>
    </select> <br/><br/>

    Address: <br/><input type="text" name="address_sch" /> <br/>
    City: <br/><input type="text" name="city_sch" /> <br/>
    State: <br/><input type="text" name="state_sch" /> <br/>
    Zip Code: <br/><input type="text" name="zip_sch" /> <br/>

    <input type="submit" name="submit" value="Submit" id="submit" />

    </div>
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T21:36:01.490

您应该序列化您的 FORM 标签的 ID。但实际上您并没有使用 AJAX 来发布表单，所以 $_POST 只是通过实际发布数据来实现。利用

```
<form action="process.php" method="post"> 
```

然后只需提交，$_POST 就会保存您的数据...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T21:40:26.903

您的表单周围没有标签。添加表单标签并将其序列化。这将获取表单内的所有元素

```
$('#myform').serialize(); 
```

# python - Auth注册头痛

> ID：12415093
> 
> 赞同：0
> 
> 时间：2012-09-13T21:32:16.527
> 
> 标签：python, django, authentication, redirect, login

我无法弄清楚为什么身份验证在此注册视图中不起作用。我这么说是因为用户正在输入数据库并且它正在重定向到下一个所需的页面（它有一个 login_required 装饰器），但随后它又重定向回登录页面。Authenticate 使用给定的值在 shell 中返回新用户。我也在这里调试并粘贴了：[http](http://dpaste.org/J1HZ5) ://dpaste.org/J1HZ5/出了什么问题？

```
def register(request):
    if request.method == 'POST':
        form = UserCreationForm(request.POST)
        if form.is_valid():
            new_user = form.save()
            new_user = authenticate(username = request.POST['username'],
                                    password = request.POST['password1'])

            login(request, new_user)
            context = RequestContext(request)    
            context['user_id'] = new_user.id
            context['new_user'] = new_user
            url = '/user/%s/' % new_user.id
            return HttpResponseRedirect(url)
    else:
        form = UserCreationForm()
    return render_to_response("registration/register.html", {'form': form},
                              context_instance=RequestContext(request)) 
```

网址.py：

```
urlpatterns = patterns('',
    # Examples:
    url(r'^$', 'crewcal.views.index', name='home'),
    # url(r'^ssc/', include('ssc.foo.urls')),

    url(r'^events/(?P<event_id>\d+)/$', 'crewcal.views.event'),
    url(r'^events/new/$', 'crewcal.views.new_event', name='new_event'),
    url(r'^commit/$', 'crewcal.views.commit'),
    url(r'^user/(?P<user_id>\d+)/$', user, name='user'),
    url(r'^users/$', 'crewcal.views.users'),

    url(r'^register/$', register, name='join'),
    url(r'^login/$', 'django.contrib.auth.views.login'),
    url(r'^logout/$', logout, {'next_page': '/'}, name='logout'),
    url(r'^log_in/$', log_in, name='log_in'),

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls)),
) 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T21:46:33.063

您可能想发布您的 UserCreationForm 代码，但我注意到的一件事是您正在运行`authenticate(...)`调用，但实际上并没有检查它的结果然后重定向。查看 Django 源代码，有一个内置的身份验证表单`django.contrib.forms.AuthenticationForm`（`authenticate()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T05:26:01.380

您的问题出在这一行：

```
url(r'^user/(?P<user_id>\d+)/$', user, name='user'), 
```

确保`user`是一个有效的视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T21:45:20.380

您是否安装了 django 会话中间件？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-17T19:23:54.600

您的密码字段是命名`password1`还是`password`？

```
def register(request):
    if request.method == 'POST':
        form = UserCreationForm(request.POST)
        if form.is_valid():
            new_user = form.save()
            new_user = authenticate(username = request.POST['username'],
                                    password = request.POST['password1']) # here?

            login(request, new_user)
            # rest of the code... 
```

# cocoa-touch - NSNumberFormatter 自定义？

> ID：12415097
> 
> 赞同：2
> 
> 时间：2012-09-13T21:32:35.953
> 
> 标签：cocoa-touch, cocoa

我希望使用 NSNumberFormatter 仅在提供的数字上附加一个百分比（'%'），而不用乘以 100。

`kCFNumberFormatterPercentStyle`我不想要的自动罐头x100。

例如，将 5.0 转换为 5.0% 与 500%。

使用以下内容：

```
NSNumberFormatter *percentFormatter = [[NSNumberFormatter alloc] init];
[percentFormatter setNumberFormat:@"##0.00%;-##0.00%"]; 
```

但是 NSNumberFomatter 中不存在“setNumberFormat”。

我需要将此 NSNumberFormatter 用于我的 Core-Plot 标签。

如何自定义 NSNumberFormat？

里克。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T21:48:49.817

资料来源：Apple 的 NSDecimalNumber 参考。

显然我通过说我不希望输出为 100 倍来暗示答案。我正在使用具有“setMultiplier”方法的 NSDecimalNumber。

因此，在我使用罐装 kCFNumberFormatterPercentStyle 作为格式化程序后，
我使用了 'setMultiplier:1'，如下所示：

```
 NSNumberFormatter *percentFormatter = [[NSNumberFormatter alloc] init];
 [percentFormatter setNumberStyle:kCFNumberFormatterPercentStyle];
 [percentFormatter setMultiplier:[NSNumber numberWithInt:1]]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T21:36:37.923

您是否尝试过使用`setMultiplier`来防止它乘以 100？

```
NSNumberFormatter *percentFormatter = [[NSNumberFormatter alloc] init];
[percentFormatter setNumberStyle: NSNumberFormatterPercentStyle];
[percentFormatter setMultiplier:1]; 
```

如果您只需要添加百分号，则可以使用以下替代方法`NSNumberFormatter`：

```
[NSString stringWithFormat:@"%3.2f%%", [myNumber doubleValue]]; 
```

并且您应该调整精度说明符（3.2）以适应您要显示的位数。

# c# - 尝试以编程方式删除文件夹时出现“目录不为空”错误

> ID：12415105
> 
> 赞同：39
> 
> 时间：2012-09-13T21:33:44.217
> 
> 标签：c#, asp.net

在我的应用程序中，我构建了一个系统，用户可以在其中创建图片库。照片以 category_name/gallery_name/{pictures} 格式保存在磁盘上的文件夹中。每张上传的照片都存储在上面给出的相关目录结构下。

但是，在尝试删除类别以及从数据库中删除时，我也想从系统中删除相关文件夹。当我第一次收到错误消息“目录不为空”时，我[搜索并找到](https://stackoverflow.com/questions/329355/cannot-delete-directory-with-directory-deletepath-true)了这个解决方案：

```
public static void DeleteDirectory(string target_dir)
    {
        string[] files = Directory.GetFiles(target_dir);
        string[] dirs = Directory.GetDirectories(target_dir);

        foreach (string file in files)
        {
            File.SetAttributes(file, FileAttributes.Normal);
            File.Delete(file);
        }

        foreach (string dir in dirs)
        {
            DeleteDirectory(dir);
        }

        Directory.Delete(target_dir, false);
    } 
```

使用此解决方案，“gallery_name”文件夹中的照片会被很好地删除，然后gallery_name 文件夹本身会被很好地删除。所以我们现在只剩下一个空的category_name 文件夹。然后调用上述子例程 ( `Directory.Delete(target_dir, false);`) 中的最后一段代码来删除 category_name 文件夹。错误再次引发..

有谁知道解决这个问题？

1.  `Directory.Delete(target_dir, true);`没用，这就是我尝试替代方案的原因。
2.  我可以完全控制父文件夹，并且 category_name 和 gallery_name 文件夹也是以编程方式创建的，没有任何问题。
3.  正如我所提到的，使用此代码删除子目录（gallery_name 文件夹）及其内容（照片）就好了。导致错误的是 category_name 文件夹，即使在此代码之后，它只是一个空文件夹。

我得到的异常消息是：

```
System.IO.IOException was unhandled by user code
  HResult=-2147024751
  Message=The directory is not empty.

  Source=mscorlib
  StackTrace:
       at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
       at System.IO.Directory.DeleteHelper(String fullPath, String userPath, Boolean recursive, Boolean throwOnTopLevelDirectoryNotFound)
       at System.IO.Directory.Delete(String fullPath, String userPath, Boolean recursive, Boolean checkHost)
       at System.IO.Directory.Delete(String path)
       at MyApp.PhotoGallery.Categories.deleteCategory(Int32 cID, String categoryname) in d:\Documents\My Dropbox\web projects\MyAppFolder\App_Code\BLL\PhotoGallery.vb:line 291
       at _admhades_PhotoGallery.deleteCategory(Int32 categoryID, String categoryname) in d:\Documents\My Dropbox\web projects\HavadisPre\_admhades\PhotoGallery.aspx.vb:line 71 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-09-13T21:38:09.833

您可以只使用`Directory.Delete(target_dir, true);`递归删除目录和所有文件。您不必编写自定义函数。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-01-20T09:47:07.117

这对我有用，即使我打开了文件资源管理器：

```
public static void DeleteFilesAndFoldersRecursively(string target_dir)
{
    foreach (string file in Directory.GetFiles(target_dir))
    {
        File.Delete(file);
    }

    foreach (string subDir in Directory.GetDirectories(target_dir))
    {
        DeleteFilesAndFoldersRecursively(subDir);
    }

    Thread.Sleep(1); // This makes the difference between whether it works or not. Sleep(0) is not enough.
    Directory.Delete(target_dir);
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-11-20T17:40:49.433

这个问题快把我逼疯了。`Directory.Delete(dirPath, recursive: true);`使用删除目录及其内容时，我看到了海报的确切行为。就像海报一样，即使调用引发了“目录不为空”的异常。该调用实际上递归地删除了目录的所有内容，但未能删除所提供路径的根目录。疯狂。

就我而言，我发现问题是由窗口资源管理器中的**左侧导航树是否**显示我试图删除的目录打开引起的。如果是这样，那么似乎正在发生某种排队删除或目录内容删除的缓存导致问题。**此行为可能看起来很奇怪且不可预测，因为只要在 Windows 左侧导航树中未打开**该目录，在 Windows 资源管理器中查看要删除的目录就不会导致此问题。

可能需要几张图片来说明这一点。请注意，在下面的路径中，窗口显示 1346。1346 是目录 1001 的子目录。在这种情况下，递归删除 1346 的调用将成功，因为我们在 Window 的资源管理器中查看 1346 本身不是问题。

[![在此处输入图像描述](../Images/734dc48ec15f58fe77c1ca919eeab627.png)](https://i.stack.imgur.com/qbYiX.png)

但是在下图中，请注意，在下面的路径中，我们正在查看目录 1018。 **但是**在左侧中殿，我们打开了目录 1349（见箭头）。这就是导致问题的原因，至少对我而言。`Directory.Delete(dirPath, recursive: true);`如果在这种情况下我们调用`dirPath`目录 1349，它将抛出“目录不为空”。例外。但是如果我们在异常发生后检查目录，我们会发现它已经删除了目录的所有内容，实际上**现在**是空的。

所以这看起来很像一个边缘情况，但它是我们开发人员可能遇到的情况，因为当我们测试代码时，我们希望观察文件夹是否被删除。并且很难理解是什么触发了它，因为它是关于 Windows 资源管理器的左侧导航栏而不是窗口的主要内容区域。

[![在此处输入图像描述](../Images/9bdcab186bc43201a9c0fd1d6889206b.png)](https://i.stack.imgur.com/h762c.png)

无论如何，尽管我不喜欢下面的代码，但它确实为我解决了所有情况下的问题：

```
 //delete the directory and it's contents if the directory exists
        if (Directory.Exists(dirPath)) {
            try {
                Directory.Delete(dirPath, recursive: true);                //throws if directory doesn't exist.
            } catch {
                //HACK because the recursive delete will throw with an "Directory is not empty." 
                //exception after it deletes all the contents of the diretory if the directory
                //is open in the left nav of Windows's explorer tree.  This appears to be a caching
                //or queuing latency issue.  Waiting 2 secs for the recursive delete of the directory's
                //contents to take effect solved the issue for me.  Hate it I do, but it was the only
                //way I found to work around the issue.
                Thread.Sleep(2000);     //wait 2 seconds
                Directory.Delete(dirPath, recursive: true);
            }
        } 
```

我希望这对其他人有帮助。花了很多时间来追踪和解释，因为这真的很奇怪。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-02-19T09:00:29.000

这并不像我想要的那样完整，但这些是过去在我遇到类似问题时帮助过我的事情。

该文件正在被其他东西使用。这意味着您已经创建了一个文件夹/文件，但尚未发布它。使用 .Close() （如果适用）。

与锁相关的问题。

`Directory.Delete(rootFolder, true)`当指定的根文件夹中没有文件夹时，您使用了（其中 true 表示递归删除）。

它被另一个程序打开。现在，除了安装可以提供帮助但仅在某些情况下才真正起作用的[Process Monitor](http://technet.microsoft.com/en-gb/sysinternals/bb896645.aspx)之外，我不知道从哪里开始。

像 Anti Virus 之类的东西，甚至（在 Windows 上）像 Def​​ender 之类的东西过去都曾导致过这个问题。

> 当您调用 Directory.Delete 并且以这种方式打开文件时，Directory.Delete 成功删除所有文件，但是当 Directory.Delete 调用 RemoveDirectory 时会抛出“目录不为空”异常，因为有一个文件标记为删除但没有实际删除。

显而易见的事情包括确保您有权删除文件夹（不仅是您，还有运行程序的帐户）。

您尝试删除的文件是只读的。首先将文件夹中所有文件的文件属性从只读更改。

该路径由其他 Windows 组件共享，因此在创建/删除文件夹时要小心。

[来源](http://msdn.microsoft.com/en-us/library/fxeahc5f%28v=vs.85%29.aspx)
[来源](http://social.msdn.microsoft.com/Forums/en/winformssetup/thread/e35b8ea7-e3a6-4335-8f6a-08896c426afd)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-08T14:06:51.107

就我而言，我创建了我的目录，程序以管理员身份运行。当我尝试在没有管理员权限的情况下删除同一目录时，出现“目录不为空”错误。

**解决方案：**以管理员身份运行应用程序或手动将其删除。

# jquery - Jquery Cycle 2 不同的幻灯片同步

> ID：12415108
> 
> 赞同：1
> 
> 时间：2012-09-13T21:34:01.387
> 
> 标签：jquery, synchronization, slideshow, sync, cycle

我是这个地方的新手，但我在编写 javascript/jquery 方面相对较新，但我一直在使用 jquery 循环，并尝试同时运行两个幻灯片。这是我的代码：

```
$(document).ready(function() {
$('.slideshow1').cycle({ //first slide
    fx: 'fade',
    containerResize: false, //for autoresizing using CSS
    slideResize: false, //for autoresizing using CSS
    fit: 1, //for autoresizing using CSS
    speed:   2000, 
    timeout: 5000, 
    after: function(currSlideElement, nextSlideElement, options, forwardFlag) {
      $('.slideshow2').cycle('next');
}
});
$('.slideshow2').cycle({
    speed:   2000, 
    timeout: 0, 
}); 
```

它在大多数情况下都有效，但我注意到它在 Opera 中不起作用，Opera 有没有办法运行它？我还需要通知你们，代码是用于两个不同的幻灯片，一个内置自动调整大小的幻灯片，依赖于浏览器的窗口和 CSS。第二个只是一个简单的，没有调整大小的幻灯片。我明显的问题是如何让它在 Opera 中运行（如果我使用正确的代码），是否有更优化的方式可以工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:16:16.023

您可能想尝试 jQuery Cycle 插件的更新版本：[Cycle2](http://www.malsup.com/jquery/cycle2/)

# java - 如何在我的服务器发送/接收线程中解决这个 indexOutOfBoundsException？

> ID：12415109
> 
> 赞同：0
> 
> 时间：2012-09-13T21:34:01.727
> 
> 标签：java, serialization, client, classcastexception, indexoutofboundsexception

我正在用 Java 创建一个带有服务器和多个客户端的多人游戏。一切都运行得很完美，直到我按下服务器中的 Kick 按钮来踢客户端。

在将第一个加入的人踢出三个之后，服务器的接收线程出错：

```
java.lang.IndexOutOfBoundsException: Index: 2, Size: 2
    at java.util.ArrayList.rangeCheck(ArrayList.java:604)
    at java.util.ArrayList.get(ArrayList.java:382)
  > at networktest.Server$3.run(Server.java:186)
    at java.lang.Thread.run(Thread.java:722) 
```

尖线是**ois = new ObjectInputStream**我在服务器接收线程中接收*数据类型的地方。*服务器完美地踢了第一个人，但也删除了列表中的第二个人，并出现*java.lang.ClassCastException*错误。

**服务器接收：**

```
private static Thread receive = new Thread()
{
    @Override
    public void run()
    {
        ObjectInputStream ois;

        while (true)
        {
            for (int i = 0; i < list_sockets.size(); i++)
            {
                try
                {
                    ois = new ObjectInputStream(list_sockets.get(i).getInputStream());
                    int receive_state = (Integer) ois.readObject(); // receive state

                                            ois = new ObjectInputStream(list_sockets.get(i).getInputStream());
                    byte datatype = (byte) ois.readObject(); // receive datatype

                                            if(datatype == 2){
                                                ois = new ObjectInputStream(list_sockets.get(i).getInputStream());
                                                ChatLine chatLine = (ChatLine) ois.readObject(); // receive ChatLine
                                            } else if (datatype == 0){
                                                ois = new ObjectInputStream(list_sockets.get(i).getInputStream());
                                                DataPackage dp = (DataPackage) ois.readObject(); // receive dp
                                                list_data.set(i, dp);
                                            }

                    if (receive_state == 1) // Client Disconnected by User
                    {
                        disconnectClient(i);
                        i--;
                    }
                }
                catch (Exception ex) // Client Disconnected (Client Didn't Notify Server About Disconnecting)
                {
                                        System.err.println("Error @ receive:");
                                        ex.printStackTrace();
                    disconnectClient(i);
                    i--;
                }
            }
                            try {
                                this.sleep(3);
                            } catch (InterruptedException ex) {
                                Logger.getLogger(Server.class.getName()).log(Level.SEVERE, null, ex);
                            }
        }
    }
}; 
```

**用户发送：**

```
Thread send = new Thread()
{
    public void run()
    {
        ObjectOutputStream oos;
        byte datatype = 0;

        while (connected){
            if (socket != null){
                try {
                    DataPackage dp = new DataPackage();
                    dp.x = Client.player.x;
                    dp.y = Client.player.y;
                    dp.username = username;
                    dp.charType = charType;
                    dp.walking = (byte)Client.player.walking;
                    if (Client.outputChatLine.line != null)
                        datatype = 2;
                    else {
                        datatype = 0;
                    }

                    oos = new ObjectOutputStream(socket.getOutputStream());
                    oos.writeObject(Integer.valueOf(Client.this.state)); // send state

                    oos = new ObjectOutputStream(socket.getOutputStream());
                    oos.writeObject(Byte.valueOf(datatype)); // send datatype

                    if (datatype == 2)
                    {
                        oos.reset();
                        oos.writeObject(Client.outputChatLine);
                        Client.outputChatLine = new ChatLine();
                    } else {
                        oos = new ObjectOutputStream(socket.getOutputStream());
                        oos.writeObject(dp);
                    }

                    if (Client.this.state == 1) {
                        connected = false;
                        socket = null;

                        JOptionPane.showMessageDialog(null, "Client Disconnected", "Info", 1);
                        System.exit(0);
                    }

                }
                catch (Exception ex){}
            }
            try {
                this.sleep(2);
            } catch (InterruptedException ex) {
                Logger.getLogger(Client.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    }
}; 
```

**断开客户端方法：**

```
public static void disconnectClient(int index)
{
    try
    {
        list_clients_model.removeElementAt(index);
        list_client_states.remove(index);
        list_data.remove(index);
        list_sockets.remove(index);
    }
    catch (Exception ex) {}
} 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T21:59:38.027

看起来您希望其他线程`list_sockets`在您执行操作时将一些数据填充到其中`sleep(3)`。但是你没有同步来确保这只发生在你睡觉的时候。

`list_sockets` *另一个线程与*您自己的线程调用同时更新的情况也很可能发生`list_sockets.get(i)`。并且 ArrayList 实现几乎肯定不会编写为在两个不同的线程中同时执行两个不同的方法。例如，当您尝试读取元素时，另一个线程可能正在调整支持数组的大小，然后任何疯狂的事情都可能出错，包括您看到的错误。

您需要了解线程间同步。至少您需要`synchronized`块来保护对共享数据结构的访问。当你在它的时候；查看`wait`/`notify`或一些更高级别的并发工具来摆脱那个可怕的 3 毫秒轮询循环——而是让将工作放入列表的线程显式地唤醒工作线程。

# jquery - Jquery 总是返回索引 -1

> ID：12415111
> 
> 赞同：0
> 
> 时间：2012-09-13T21:34:12.120
> 
> 标签：jquery, indexing, removechild

这是我用来返回按钮父 div 索引的索引代码：

```
j('#optionform').index( j(this).parent() ) 
```

我试图找出单击按钮的 DIV 索引，因此我可以删除 DIV。

HTML 布局是这样的：

```
 <form id="optionform" onsubmit="return false;">
    <label><input type="checkbox" id="s_name" value="s_name"> Survey Name </label>
    <label><input type="checkbox" id="s_type" value="s_type"> Survey Type </label><br>
                    Filter Results:<br>
    <div id="template" style="display: none;">
                        Column: <select id="fcolumn[]">
                            <option></option>
    <option value="s_name">Survey Name</option>
    <option value="s_type">Survey Type</option>
    </select><br>
                        Filter Type: <select id="ftype[]">
                            <option></option>
                            <option value="=">Equals</option>
                            <option value="LIKE">Like</option>
                        </select><br>
                        Filter content: <input type="text" id="fcontent[]"><br>
    <img src="images/add.png" width="32px" onclick="addTemp(); return false;">
    <img src="images/delete.png" width="32px" onclick="alert(j(this).attr('src')); remTemp(j('#optionform').index( j(this).parent() )); return false;">
                    </div>
<div class="template" style="display: block;">
                        Column: <select id="fcolumn[]">
                            <option></option>
    <option value="s_name">Survey Name</option>
    <option value="s_type">Survey Type</option>
    </select><br>
                        Filter Type: <select id="ftype[]">
                            <option></option>
                            <option value="=">Equals</option>
                            <option value="LIKE">Like</option>
                        </select><br>
                        Filter content: <input type="text" id="fcontent[]"><br>
    <img src="images/add.png" width="32px" onclick="addTemp(); return false;">
    <img src="images/delete.png" width="32px" onclick="alert(j(this).attr('src')); remTemp(j('#optionform').index( j(this).parent() )); return false;">
                    </div>
<div class="template" style="display: block;">
                        Column: <select id="fcolumn[]">
                            <option></option>
    <option value="s_name">Survey Name</option>
    <option value="s_type">Survey Type</option>
    </select><br>
                        Filter Type: <select id="ftype[]">
                            <option></option>
                            <option value="=">Equals</option>
                            <option value="LIKE">Like</option>
                        </select><br>
                        Filter content: <input type="text" id="fcontent[]"><br>
    <img src="images/add.png" width="32px" onclick="addTemp(); return false;">
    <img src="images/delete.png" width="32px" onclick="alert(j(this).attr('src')); remTemp(j('#optionform').index( j(this).parent() )); return false;">
                    </div>
 </form> 
```

但它总是`-1`在索引中返回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T21:38:18.480

尝试`$(this).parent().index(".template")`，但是请记住，您的第一个模板 div 有一个 id 而不是一个类。那是错字吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T21:38:04.660

为什么可以直接删除它的父级时需要div的索引。

```
j('#optionform').parent().remove(); 
```

`j('#optionform').parent(`) 将给出单击按钮的 Div

# ruby-on-rails - Rails 多选框：从参数中注入默认值

> ID：12415112
> 
> 赞同：0
> 
> 时间：2012-09-13T21:34:28.477
> 
> 标签：ruby-on-rails, multiple-select

我目前在 Rails 表单中有一个多选框，如下所示：

```
= select_tag :in_all_tags, options_from_collection_for_select(Tag.where(:project_id => @project.id), :id, :name, @in_all_tags_param), { :id => "tags", :tabindex => "3", "data-placeholder" => "Choose Tags", :multiple => "multiple" } 
```

在哪里

```
@in_all_tags_param = params[:in_all_tags] 
```

问题是，`@in_all_tags_param`只会使用 from 的最后一个值填充选择表单`params[:in_all_tags]`。因此，如果 url 字符串为`in_all_tags=5&in_all_tags=8`，则多选中的预选值将仅为 8。

据我了解，解决这个问题的方法是附加`[]`到多个参数的字段名称，这样`:in_all_tags`就变成了`in_all_tags[]`

但是，当我尝试这个时，提交表单返回：

```
Expected type :default in params[:in_all_tags], got Array 
```

任何建议表示赞赏。

干杯...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T21:40:20.197

您需要将一个`:name`元素添加到与`:multiple => true`它相同的哈希中。所以我在我的应用程序上使用了类似的流派，我也这样做了`{ :multiple => true, :name => "lesson[genre_ids][]" }`。名字必须是`model[attribute][]`。

# linux - lfs 7.2 编译 glibc 2.16.0

> ID：12415114
> 
> 赞同：4
> 
> 时间：2012-09-13T21:34:57.940
> 
> 标签：linux, glibc, linux-from-scratch

我正在按照 lfs 中的过程制作一个 linux 系统。但是，当我在[此页面](http://www.linuxfromscratch.org/lfs/view/stable/chapter05/glibc.html)上执行第五步（即 make 之前的一步）时，最后我得到了一个错误。

```
 configure: error: linker with -z relro support required 
```

现在，如果我打电话给 make 我得到一个错误

```
 make: *** No targets specified and no makefile found.  Stop. 
```

我在 ubuntu 12.04 机器上运行它。
如何修复此错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T09:31:36.530

请执行下列操作：-

```
sudo apt-get install gawk 
```

然后重试。这对我有用。

# java - '(' 或 '[' 在 UNIX 下预期编译错误

> ID：12415122
> 
> 赞同：0
> 
> 时间：2012-09-13T21:35:22.253
> 
> 标签：java, unix, javac

这是我的一段代码。windows下没问题。

`LinkedList<TreeNode> queue = new LinkedList<TreeNode>();`

但是在 UNIX 中，`javac`在第一个尖括号附近给出“'(' 或 '[' expected”`new LinkedList<TreeNode>`

那有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T21:40:04.627

在你的unix盒子上做java -version。如果您没有获得 1.5+ 版本（显然是这种情况），则不支持泛型。

你应该在 Unix 上升级你的 JDK

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T21:39:29.727

可能在您的 UNIX 机器上仍然安装了一个不知道[Generics](http://en.wikipedia.org/wiki/Generics_in_Java)的旧 Java（在 Java SE 5.0 之前） 。

# php - 试图将mysql结果放入字符串

> ID：12415125
> 
> 赞同：0
> 
> 时间：2012-09-13T21:35:53.380
> 
> 标签：php, mysql, pdo

我正在尝试将 mysql 查询结果放入我试图找到答案的字符串中，但所有类似的帖子都得到了子查询答案，这不是我想要做的。

例如

```
 +----------------------------------+
    |            Fruits_tbl            |
    +----+---------+---------+---------+
    | ID |  Fruit  |  Color  |  Number |
    +----+---------+---------+---------+
    |  1 |  Orange |  Orange |    3    |
    |  2 |  Apple  |  Red    |    5    |
    +----+---------+---------+---------+

    $sql = "select Fruits,Color,Number from Fruits_tbl where ID = 2";
    $result = $pdo->query($sql);
    $row = $result->fetch();
    print_r($row); 
```

这会给我类似
Array([0]=>"Apple", [1]=>"Red", [2]=>"5", [Fruit]=>"Apple", [Color]=>"红色", [数字]=>"5")

内爆会给我两个
我想要的只需要一个字符串=“Apple，Red，5”

我目前拥有的是

```
$string = $row['Fruit'].", ".$row['Color'].", ".$row['Number'] 
```

如您所见，这相当乏味。
是否有类似 implode 但只返回索引数组之类的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T21:50:05.000

您可以修改您的[fetch](http://www.php.net/manual/en/pdostatement.fetch.php)以获得一个关联数组：

```
$row = $result->fetch(PDO::FETCH_ASSOC); 
```

或者，您可以获得一个列表：

```
$row = $result->fetch(PDO::FETCH_NUM); 
```

其中任何一个都可以针对单个值内爆，并且不会包含 array_unique() 的开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T21:37:56.183

`$row[Fruit].", ".$row[Color]`需要是`$row['Fruit'].", ".$row['Color']`

我误解了你想做什么。

使用`array_unique()`并内爆它们。

```
$string = rtrim(implode(',', array_unique($your_array)),','); 
```

# java - 使用 ContentProvider 在 SQLITE 中缓慢检索数据需要很长时间

> ID：12415127
> 
> 赞同：2
> 
> 时间：2012-09-13T21:36:09.060
> 
> 标签：java, android, performance, sqlite, android-contentprovider

我在 Android 中有一个应用程序（运行 4.0.3），它在表 A 中存储了大量数据。表 A 位于 SQLite 数据库中。我使用 ContentProvider 作为数据库上方的抽象层。

这里的大量数据意味着每月有近 80,000 条记录。表 A 的结构如下：

```
String SQL_CREATE_TABLE = "CREATE TABLE IF NOT EXISTS " + TABLE_A + " ( " + 
        COLUMN_ID + " INTEGER PRIMARY KEY NOT NULL" + "," + 
        COLUMN_GROUPNO      + " INTEGER NOT NULL DEFAULT(0)" + "," + 
        COLUMN_TIMESTAMP    + " DATETIME UNIQUE NOT NULL" + "," + 
        COLUMN_TAG          + " TEXT" + "," + 
        COLUMN_VALUE        + " REAL NOT NULL" + "," + 
        COLUMN_DEVICEID     + " TEXT NOT NULL" + "," +
        COLUMN_NEW          + " NUMERIC NOT NULL DEFAULT(1)" + " )"; 
```

这是索引语句：

```
String SQL_CREATE_INDEX_TIMESTAMP = "CREATE INDEX IF NOT EXISTS " + TABLE_A +
        "_" + COLUMN_TIMESTAMP + " ON " + TABLE_A + " (" +
        COLUMN_TIMESTAMP + ") "; 
```

我已将列和表名定义为字符串常量。

从表 A 中检索此数据时，我的速度已经明显变慢。问题是，当我从该表中检索数据时，我首先将其放入 ArrayList 中，然后再显示它。显然，这可能是错误的做事方式。我试图找到一种更好的方法来使用 ContentProvider 来解决这个问题。但这不是困扰我的问题。

问题是由于某种原因，从最多只有 12 条记录的其他表中检索数据需要更长的时间。我看到这种延迟随着表 A 中记录数量的增加而增加。这没有任何意义。如果我从表 A 中检索数据，我可以理解延迟，但为什么从其他表中检索数据时会出现延迟。

澄清一下，如果表 A 为空或少于 3000 条记录，我不会遇到这种延迟。

可能是什么问题呢？

编辑：2012 年 9 月 14 日上午 9:53

为了澄清，我使用 ContentProvider 来管理数据库。为了查询数据，我使用了 context.getContentResolver().query 方法。

我在 ContentProvider 中的查询代码：

```
@Override
public Cursor query(Uri uri, String[] projection, String selection,
        String[] selectionArgs, String sortOrder) {
    final SQLiteQueryBuilder queryBuilder = new SQLiteQueryBuilder();
    final SQLiteDatabase db = dbHelper.getReadableDatabase();

    String tableName = getTableName(uri);

    queryBuilder.setTables(tableName);

    Cursor cursor = queryBuilder.query(db, projection, selection, selectionArgs, null, null, sortOrder);
    cursor.setNotificationUri(getContext().getContentResolver(), uri);

    return cursor;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:15:50.170

所以这很尴尬：

显然，在应用程序加载期间的某处有一行代码正在从表 A 中检索数据。这就是整个应用程序变慢的原因。

无论如何，我仍然需要弄清楚如何使用 ContentProvider 优化从表 A 加载数据。

# vba - 如果文件包含某些文本，我如何从文件中提取字符串并将其输入到单元格中？(VBA)

> ID：12415131
> 
> 赞同：-1
> 
> 时间：2012-09-13T21:36:30.867
> 
> 标签：vba, if-statement, excel

假设我有以下路径和文件名：

P:\...\Annual and Quarterly Budget Data\ECMQA 2012Q1.xls

我想编写一个执行以下操作的 if then 语句（不确定我的语句是否设置正确）：

```
If InStr(1, "P:\...\Annual and Quarterly Budget Data\ECMQA 2012Q1.xls", "QA", vbTextCompare) > 0 Then
    BD.Sheets("Sheet1").Range("C2").value = "2012Q1"
End If 
```

我希望它自动从文件中读取，而不是仅仅输入“2012Q1”。问题是我实际上循环了 12 个左右的文件，并且有两种类型，“ECMQA 2012Q1.xls”（或 ECMQB 2012Q2.xls 等）和“ECM 年度预算 2012.xlsx”

如果我的文件是年度文件（如果文件包含“年度”），那么我想要：

```
BD.Sheets("Sheet1").Range("C2").value = "2012" 
```

我希望它从实际文件中读取它，与另一个文件相同......不是我输入“2012”

有没有办法做到这一点？

任何帮助将不胜感激！

编辑：

这是循环：

```
Dim wb As Workbook, sFile As String, sPath As String
Dim itm As Variant
Dim strFileNames  As String

sPath = "C:\Actuary\Cash Flow Forecast\Annual and Quarterly Budget Data\"

''Retrieve the current files in directory
sFile = Dir(sPath)
Do While sFile <> ""
    strFileNames = strFileNames & "," & sFile
    sFile = Dir()
Loop

''Open each file found
For Each itm In Split(strFileNames, ",")
    If itm <> "" Then
        Set wb = Workbooks.Open(sPath & itm)

        ''DO LOTS OF CALCULATIONS

        'wb.Close True
    End If
Next itm 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T23:12:00.170

Filesystemobject 有一种从文件名中提取基本名称的方法：

```
Msgbox createobject("scripting.filesystemobject").getbasename("myTest.xlsx") 'myTest 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T22:13:55.447

有很多方法可以使用 split、right、left、mid 甚至 regex 来满足您的需求。这实际上取决于可能的源字符串的构成以及它们包含多少变化。

根据您的示例，以下显示了最后一个变量给出“2012”的各种操作

```
Sub test()

fPath = "P:\...\Annual and Quarterly Budget Data\ECMQA 2012Q1.xls"

fArray = Split(fPath, "\")
fnamewithtext = fArray(UBound(fArray))
fnamewithoutext = Split(fArray(UBound(fArray)), ".")(0)

ifannual = Left(Split(fArray(UBound(fArray)), " ")(1), 4)

End Sub 
```

# formbuilder - 使用 BPMN2 应用程序的表单生成器作为 HumanTAsk 渲染

> ID：12415132
> 
> 赞同：1
> 
> 时间：2012-09-13T21:36:35.057
> 
> 标签：formbuilder

我们需要为 BPM 系统（基于 JBPM）定义一个 formBuilder，我们想知道我们是否可以在没有 form Runner 的情况下重用 formBuilder 来为人工任务定义表单并通过 HumanTask 服务（由我们实现）捕获表单提交。可以单独使用表单生成器吗？

# php - Jquery ajax POST 标签/值对

> ID：12415137
> 
> 赞同：0
> 
> 时间：2012-09-13T21:36:57.807
> 
> 标签：php, jquery

我想在 Ajax .POST 中传递标签/值对，但找不到任何解决方案。Ajax .POST 通常会发送 id/值对，但我无法更改我的 id，而是想发送标签/值对。我提供了部分表格。请提供任何帮助。

```
 $.ajax({
            url:"allfields.php",
            type:"POST",
    //      dataType:"json",
            data: $("#frmRequest").serialize(),
            success: function(msg){
                alert("Form Submitted: "+ msg);
                return msg;

              },
             error: function() {
            alert('Error occured');
             }
        });

<body>
     <form id="frmRequest" name="frmRequest" >

                <div class="clearfix" id="idRequestDetails"  >
                    <table width="809" border="0" id="tbl_data_1_1_1_1__" summary="Profile">
                      <tr>
                        <th width="156" scope="col"><label class="labelrequest" for="txtProfileName1__">Name</label>
                        </th>
                        <th width="74" scope="col"><label class="labelrequest" for="txtProfileUserID1__">User ID</label></th>
                        <th width="131" scope="col"><label class="labelrequest" for="txtSiteCost1__">Site Cost Centre</label></th>
                         <th width="182" scope="col"><label class="labelrequest" for="txtDetail1__">Additional Details</label></th>
                      </tr>
                      <tr>
                        <td><input type="text" name="txtProfileName1__" id="txtProfileName1__" tabindex="100" /></td>
                        <td><input name="txtProfileUserID1__" type="text" class="clearfix" id="txtProfileUserID1__" tabindex="110" size="8" /></td>
                        <td><input name="txtSiteCost1__" type="text" id="txtSiteCost1__" tabindex="220" size="8" /></td>

                        <td><textarea name="txtDetail1__" rows="1" id="txtDetail1__" tabindex="240"></textarea></td>
                      </tr>
                    </table>
                  </div>
        </body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T21:40:54.457

这是一个例子：

***HTML***

```
<form>
    <label>Label1</label><input type="text" value="1">
    <label>Label2</label><input type="text" value="some">
</form> 
```

***jQuery***

```
var dataToServer = [];
$('form label').each(function() {
    dataToServer.push({
        label: $(this).text(),
        value: $(this).next().val()        
    });
});

console.log(data);
// output
// [ {label: 'Label1', value: '1'}, {label: 'Label2', value: 'some'}] 
```

***[工作示例](http://jsfiddle.net/WmQvT/1/)***。

希望这可以给你一些指导。

### 根据commnet

***AJAX 部分***

```
$.ajax({
    url: "allfields.php",
    type: "POST",
    dataType:"json",
    data: dataToServer,   // send above data here
    success: function(msg) {
        alert("Form Submitted: " + msg);
        return msg;
    },
    error: function() {
        alert('Error occured');
    }
}); 
```

### 最后一枪

```
$('#submit').on('click', function() {
    var dataToServer = [];
    $('#frmRequest label').each(function(i, el) {
        var temp= {},
            label = $(this).text(),
            value = $('#' + $(this).attr('for')).val();
        temp[label] = value;
        dataToServer.push(temp);
    });
    console.log(dataToServer);
}); 
```

***[查看控制台输出](http://jsfiddle.net/DqCbz/8/)***

# android - 为什么 xml 文本编辑器的大纲视图不知道 Android 的架构？

> ID：12415140
> 
> 赞同：1
> 
> 时间：2012-09-13T21:37:14.440
> 
> 标签：android, xml, android-layout

从文本编辑器中编辑 XML 布局并右键单击大纲视图中的元素时，我希望在上下文菜单中看到允许的子类型，就像我在 XML 文本编辑器中使用自动完成时所做的一样。

这只是尚不支持，还是我必须以某种方式配置模式？

![大纲编辑器添加子上下文菜单](../Images/7b72ea655cae48d0fde574766e3f19fb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T21:42:15.887

在查看图形布局时，大纲视图知道架构。右键单击不允许您从要添加的有效子项中进行选择，但将无效元素从调色板拖动到大纲视图将显示“无效”图标。拖放有效元素会将子元素放置在已放置的元素中。

我的猜测是，adt 开发人员不希望用户使用文本视图中的大纲视图来添加新元素。他们可能希望用户转而切换到图形视图并直接从图形表示而不是文本添加元素。

![图形编辑器的大纲视图](../Images/8ad8b10f4a3e340b3f241af80ce71cad.png)

# macos - 确保在 RubyMine 的 EOF 处换行

> ID：12415147
> 
> 赞同：31
> 
> 时间：2012-09-13T21:37:58.247
> 
> 标签：macos, rubymine

如何在 RubyMine（Mac OS 上的 v 4.5.3）中的文件末尾强制换行？
*例如，类似于 Sublime Text 2*

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-09-14T08:09:13.953

在设置中的“保存”选项上启用**“确保文件结束前有空行**`Editor`” ：

![确保保存时文件结束前有空行](../Images/dd3513fba6778dc3a0d0e7b5ecfcf850.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-11-25T02:56:47.657

在 RubyMine 6 或更高版本中（在 Mac OSX 上）：

在设置中启用“**在保存时确保文件末尾换行**”选项`Editor`。

![在此处输入图像描述](../Images/4af420bb91cfbfd191c9afdf9a3d9bcd.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-08-22T17:19:34.423

RubyMine 与许多其他编辑器一起支持基本配置的[EditorConfig](http://editorconfig.org/)标准。

`.editorconfig`您可以通过在项目的根目录下放置一个名为的文件，在每个文件的末尾强制执行换行：

```
# top-most EditorConfig file
root = true

# Unix-style newlines with a newline ending every file
[*]
end_of_line = lf
insert_final_newline = true 
```

可以禁用特定文件类型或文件名的设置。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-08-22T13:28:11.743

在 RubyMine 2016.2.1 中，您必须转到`Preferences > Editor > General > Other > Ensure line fedd at file end on Save`. [RubyMine 2016.2.1 中的首选项截图](http://i.stack.imgur.com/3nTJs.png)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-08-10T08:00:21.560

## 红宝石矿 2021.2

*“确保每个保存的文件都以换行符结尾”*

[![在此处输入图像描述](../Images/0a71597db8e3308a08fcc4105316b460.png)](https://i.stack.imgur.com/TG375.png)

# php - 从linux脚本调用的命令行php参数中的空格

> ID：12415149
> 
> 赞同：0
> 
> 时间：2012-09-13T21:38:04.287
> 
> 标签：php, bash

我在 Ubuntu 中有这个脚本，我在其中调用文件 load.php，我想传递参数 $filexml

```
#!/bin/bash
...
filexml="/Program Files/myfile.xml"
./load.php $filexml 
```

文件 load.php 是：

```
#!/usr/bin/env php
<?php
echo $_SERVER['argv']['params'][1];
exit; 
```

但是结果是不完整的，因为它需要参数直到 /Program Files/ 目录中的空间。像这样：

```
$/Program 
```

请帮忙 ：）

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T21:39:56.087

与往常一样的解决方案。

```
./load.php "$filexml" 
```

# java - FIleNotFound 打开失败：EACCES（权限被拒绝）

> ID：12415157
> 
> 赞同：4
> 
> 时间：2012-09-13T21:38:44.093
> 
> 标签：java, android, android-emulator

当我尝试写入“/mnt/sdcard/report/”时，我在 Android 上遇到“打开失败：EACCES（权限被拒绝）”。我的第一步是创建不起作用的“报告”文件夹。然后我尝试编写引发上述异常的内容。我已将`<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />`应用程序标记设置为对等（外部）。当我收到错误时，我正在尝试在模拟器上运行 JUnit 仪器测试。有任何想法吗？代码如下。

```
 if (mReportDir == null) {
            if (mContext.getFilesDir() != null) {
                mOutputStream = mContext.openFileOutput(fileName, 0);
            } else {
                mOutputStream = mTargetContext.openFileOutput(fileName, 0);
            }
        } else {
            File f = new File(mReportDir);
            if (!f.exists()) {
                f.mkdirs();
            }
            mOutputStream = new FileOutputStream(new File(mReportDir, fileName));
        } 
```

mReportDir 等于“/mnt/sdcard/report”，fileName 等于“junit-report.xml”，我相信 f.mkdirs 返回 false 并且永远不会创建该目录。我想知道为什么我的权限被拒绝。我正在尝试重用自定义 JUnit 测试运行器。

我已将 hw.sdCard= yes 添加到 avd 设置。启动后，我进入 shell 并输入 mount：

```
~$ adb shell
# mount
rootfs / rootfs ro 0 0
tmpfs /dev tmpfs rw,nosuid,mode=755 0 0
devpts /dev/pts devpts rw,mode=600 0 0
proc /proc proc rw 0 0
sysfs /sys sysfs rw 0 0
none /acct cgroup rw,cpuacct 0 0
tmpfs /mnt/asec tmpfs rw,mode=755,gid=1000 0 0
tmpfs /mnt/obb tmpfs rw,mode=755,gid=1000 0 0
none /dev/cpuctl cgroup rw,cpu 0 0
/dev/block/mtdblock0 /system yaffs2 ro 0 0
/dev/block/mtdblock1 /data yaffs2 rw,nosuid,nodev 0 0
/dev/block/mtdblock2 /cache yaffs2 rw,nosuid,nodev 0 0 
```

同样，我从 Ant 脚本以编程方式启动 AVD。我可以通过编程方式安装 SD 卡吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-13T22:49:41.607

发现问题了！创建 AVD 时，我从未指定 SD 卡的大小。我编辑并设置了 512MiB 的大小，现在它可以写了！谢谢所有回复的人！:)

# android - 如何从当前时间戳获取 shell 输出。Linux, Unix

> ID：12415163
> 
> 赞同：0
> 
> 时间：2012-09-13T21:39:04.870
> 
> 标签：android, linux, shell, unix, adb

在许多 shell 命令中，输出是连续的事件流，例如系统日志。我只需要查看现在或当前系统时间的输出。这是我从 adb logcat 得到的程序输出，

```
09-03 17:12:04.562   479   957 I ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.amazon.mShop.android/com.amazon.mShop.home.HomeActivity } from pid 1230
09-03 17:12:04.687   479  1030 I ActivityManager: Start proc com.amazon.mShop.android for activity com.amazon.mShop.android/com.amazon.mShop.home.HomeActivity: pid=19164 uid=10158 gids={1006, 3003}
09-03 17:12:05.593   479   912 I ActivityManager: Starting: Intent { dat=?paramSuggestionText=cell%20phone flg=0x20000 cmp=com.amazon.mShop.android/com.amazon.mShop.search.SearchActivity (has extras) } from pid 19164
09-03 17:12:05.796   479   620 I ActivityManager: Displayed com.amazon.mShop.android/com.amazon.mShop.search.SearchActivity: +186ms (total +1s119ms)
09-03 17:12:08.601   479   620 I ActivityManager: Displayed com.amazon.mShop.android/com.amazon.mShop.home.HomeActivity: +3s925ms
09-03 17:12:08.601   479   620 I ActivityManager: Resumed Activity: com.amazon.mShop.android/com.amazon.mShop.search.SearchActivity totalTime: 4037 ms
09-03 17:13:35.742   479   957 I ActivityManager: Starting: Intent { act=intentActionStartActivity flg=0x20000 cmp=com.amazon.mShop.android/com.amazon.mShop.categoryBrowse.CategoryBrowseActivity } from pid 19164
09-03 17:13:36.007   479   620 I ActivityManager: Displayed com.amazon.mShop.android/com.amazon.mShop.categoryBrowse.CategoryBrowseActivity: +222ms
09-03 17:13:53.328   479   957 I ActivityManager: Starting: Intent { dat=?&paramSuggestionFilters=s%3An%3A%2C%3A4991425011%0As%3An%3A%2C%3A4991426011%0As%3An%3A%2C%3A5088769011%0As%3An%3A%2C%3A5263615011&paramDepartmentName=Programs flg=0x20000 cmp=com.amazon.mShop.android/com.amazon.mShop.search.SearchActivity (has extras) } from pid 19164
09-03 17:13:53.484   479   620 I ActivityManager: Displayed com.amazon.mShop.android/com.amazon.mShop.search.SearchActivity: +145ms 
```

它是一个连续流，显示系统启动时的事件，但我只需要来自当前系统时间的日志。那么，我该如何实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T02:42:08.550

根据[adb](http://developer.android.com/tools/help/logcat.html)手册，可以分两步执行此操作：

1.  使用清除日志`logcat -c`
2.  使用常规`logcat`调用进行持续日志监控

如果这应该结合在一起，我想只是运行`logcat -c && logcat`将是解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T04:36:24.153

我的问题用 logcat -c 选项解决了。更通用的解决方案是使用 tail -f 命令行选项。虽然它不是超级准确但有效。

# c++ - 初始化完成 opengl 支持可用

> ID：12415164
> 
> 赞同：3
> 
> 时间：2012-09-13T21:39:18.273
> 
> 标签：c++, eclipse, opengl, ubuntu, opencv

我已经在 Ubuntu 12.04 32 位平台上使用 OpenGl、Qt 和 OpenNI 构建了 OpenCV 2.4.1，但是每当我运行 Learning OpenCV Book 中列出的示例程序时。

例如：

```
 #include "highgui.h"

    int main( int argc, char** argv ) {
        cvNamedWindow( "Example2", CV_WINDOW_AUTOSIZE );
        //CvCapture* capture = cvCaptureFromAVI( argv[1] );
        CvCapture* capture = cvCreateFileCapture( argv[1] );
        IplImage* frame;
        while(1) {
            frame = cvQueryFrame( capture );
            if( !frame ) break;
            cvShowImage( "Example2", frame );
            char c = cvWaitKey(33);
            if( c == 27 ) break;
        }
        cvReleaseCapture( &capture );
        cvDestroyWindow( "Example2" );
    } 
```

我在控制台中收到此消息：

```
init done 
opengl support available 
```

我想知道我哪里出错了。我在编译时没有收到任何错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T15:37:48.380

这不是错误。我的机器上有类似的配置，每次运行时都会看到这些语句。这些语句与您编程的内容无关。我已经运行了您的确切代码，它显示视频没有任何问题。也许在您打开捕获后添加此错误检查以确保它找到了视频：

```
if (!capture) {
    std::cout << "COULD NOT OPEN CAPTURE\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-13T19:00:45.593

我遇到了同样的问题，然后我在最后添加了 waitKey(0) 并显示了图像。

# c - 随机字母分布限制

> ID：12415165
> 
> 赞同：0
> 
> 时间：2012-09-13T21:39:25.307
> 
> 标签：c

我正在编写一个拼字游戏程序，它将随机生成一个由 7 个字母组成的数组。

这是我的代码，它生成字母并将它们放入数组中，效果很好。

```
char randomletters (char letters[8], int i){

srand((time(NULL)));

for(i=0; i<7; i++){
    letters[i] = (rand() % 26 + 65);
}

     return letters[8];
} 
```

我唯一的问题是弄清楚如何使用标准的拼字游戏分布来限制某个字母出现的次数。比如'B'只能出现两次。我在想一种方法是 26 if 语句计算每个字母有多少，如果它太多然后重新开始？似乎这不是最好的方法。

不是在寻找代码答案，只是关于如何实现它的想法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:07:46.390

```
char array[] = "AAAAAAAAABBCCD";

unsigned remaining = sizeof array;

int get_a_letter(void)
{
  unsigned idx;
  int sample;

  if (!remaining) return EOF;

  idx = urnd(remaining);
  sample = array[idx] ;
  array [idx] = array [--remaining];
  array [remaining] = sample; // @Note:1
  return sample;
} 
```

`urnd(xxx)`是一个函数，应该返回一个介于 0 和 (xxx-1) 之间的随机值，*包括*.

更新

@Note1：此语句对于绘制随机字母不是必需的，但它有助于下一轮：重置`remaining = sizeof array;`就足以重新开始。（数组将被打乱，但所有的首字母仍然存在）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T21:43:34.903

创建一个struct数组来保存一个字母和可以使用的次数。随机选择 0 到 25 之间的数字，如果所选单元格的计数 >0，则将字母添加到机架中减少字母计数，重复直到机架计数 7 个瓷砖，重复整个思考直到剩下少于 7 个字母。

# javascript - 如何在按 Enter 之前检查焦点在哪里？

> ID：12415169
> 
> 赞同：2
> 
> 时间：2012-09-13T21:39:49.197
> 
> 标签：javascript, focus

我是 JavaScript 新手，想知道是否有办法在用户按下 Enter 按钮之前检查焦点的位置。我想根据焦点以不同的方式处理事情。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T21:49:50.163

我猜这基于焦点意味着如果用户在一个输入上按下回车键你想做一件事，如果用户按下回车键进入另一个输入做其他事情。

如果我是对的，您不必检查焦点在哪里。您想将函数绑定到 onkeypress 事件。

```
<script>
function doStuffOnEnter()
{
    var x = event.keyCode;
    if(x == 13) // if user pressed intro
    {
       //do stuff
    }
}
</script>
<input type="text" onkeypress="doStuffOnEnter()" /> 
```

上面的代码非常基础，但仅供您了解。

更多信息在这里：[http ://www.w3schools.com/jsref/event_onkeypress.asp](http://www.w3schools.com/jsref/event_onkeypress.asp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T21:46:20.067

如果您的网站使用 jQuery，这对于 JavaScript 新手来说很常见，那么您可以将 DOMElement 存储在一个全局变量中以供您检查。

```
var currentFocus = null;
$('input, textarea').focus(function() { 
    currentFocus = this; 
}); 
```

这将让您知道用户按下回车键时最后一次“关注”的位置。如果您不使用 jQuery，代码会稍长一些，但想法相同。

# mysql - Mysql HOUR() 将 -HH 转换为 HH，这是功能还是错误？

> ID：12415176
> 
> 赞同：7
> 
> 时间：2012-09-13T21:40:20.273
> 
> 标签：mysql, time

如果我进行如下查询：

```
SELECT HOUR( TIMEDIFF('2012-08-12 02:25:00', 
                      '2012-09-14 02:25:33') ) as result 
```

结果是 792，即使我从未来的日期减去过去的数据。

如果我删除`HOUR()`并执行：

```
SELECT TIMEDIFF('2012-08-12 02:25:00', 
                '2012-09-14 02:25:33')  as result 
```

那么值为`-792:00:33`。因此显然`HOUR()`是将 -792 转换为 792。我已经尝试过使用其他日期，结果是相同的（总是返回正小时）。

[该手册](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_hour)没有说明这种行为。

这是一个错误，还是我可以依赖它存在于所有最近的 mysql 安装中的功能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-07-30T09:10:27.400

有一种方法可以得到正时和负时。`EXTRACT`会得到负数。

```
SELECT EXTRACT(HOUR FROM '-01:00:00'), HOUR('-01:00:00') 
```

将返回：

```
-1    1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T22:13:19.767

似乎这是一种预期的行为（不能说是错误还是功能）。请参阅示例：

```
mysql> select hour('-23:00:00');
+-------------------+
| hour('-23:00:00') |
+-------------------+
|                23 |
+-------------------+
1 row in set (0.04 sec) 
```

如果您需要从那里获取时间，我建议您解析结果（如果可能，在 SQL 之外）

# html - 如何下推身体并改变其高度？

> ID：12415180
> 
> 赞同：2
> 
> 时间：2012-09-13T21:40:32.063
> 
> 标签：html, css

我试图通过一些填充来抵消身体标签。但是，我想调整正文，以免它掉到浏览器窗口下方并引起滚动条。

这是我要完成的一个示例：http: [//jsfiddle.net/jM9Np/1/](http://jsfiddle.net/jM9Np/1/)

**HTML：**

```
<body> </body>​ 
```

**CSS：**

```
html, body {
 height: 100%;   
}

body {
 margin-top: 20em;
 background-color: LemonChiffon;
} 
```

理想情况下，我想从身体的高度中减去 20em。无论如何，是否可以在没有任何 Javascript 的情况下以所有浏览器（Internet Explorer 除外）支持的方式执行此操作？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T22:05:39.853

这取决于。您可以使用边框，f.ex：

```
html {
  height: 100%
}

body {
  border-top: 20em solid #fff;
  background-color: LemonChiffon;
} 
```

[http://jsfiddle.net/jM9Np/10/](http://jsfiddle.net/jM9Np/10/)

但恕我直言，最好的方法是在正文中添加另一个 DIV 并将其绝对定位：

```
html, body {
  height: 100%
}

div {
  position: absolute;
  top: 20em;
  bottom: 0;
  left: 0;
  right: 0;
  background-color: LemonChiffon;
} 
```

[http://jsfiddle.net/za4e3/](http://jsfiddle.net/za4e3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T21:51:04.233

如果您的目标是当前版本的主流浏览器，那么您很幸运！这甚至应该在 IE9 上工作（参见[完整支持表](http://caniuse.com/calc)）：

```
html {
 height: 100%;   
}

body {
 margin-top: 20em;
 height: calc(100% - 20em); 
 background-color: LemonChiffon;
} 
```

[http://jsfiddle.net/jM9Np/3/](http://jsfiddle.net/jM9Np/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T21:56:17.750

我会做类似的事情

```
html{
height: 100%; 
background-color:black;
}
body {
height:80%;
margin-top: 20%;
background-color: LemonChiffon;
} 
```

# html - 从带有图像的 HTML 文件创建 Sharepoint 页面

> ID：12415184
> 
> 赞同：2
> 
> 时间：2012-09-13T21:40:53.410
> 
> 标签：html, image, sharepoint, upload

我正在尝试在 Sharepoint 中创建一个可编辑的页面。我已经有了 HTML 格式的页面（它很大），里面有很多图片。以前我刚刚在 sharepoint 中创建了一个新页面并将 HTML 源粘贴到其中，手动上传/插入图像，一次一个。

不幸的是，我无法在合理的时间内完成此操作，因为此 HTML 文件正在使用许多图像。

因此，我想要一个可编辑的 Sharepoint 页面，该页面可以使图像从如下所示的目录中保持完整：thepage.html

1.png

2.png

...

...

...

343.png

ETC

有任何想法吗？

编辑：为了更清楚 - 这是一个 HTML 格式的规范文档，所以它有很多文本和标题与图像集成。我希望将其转换为可从 Sharepoint 界面编辑的实际 Sharepoint 页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T20:10:02.900

似乎最好在这里使用一个低技术的解决方案，一些 HTML 编辑并使用最好的方式为您上传多个文件。

假设

```
C:\mypage
    -> \page.html
    -> \images\1.png
    -> \images\2.png
    ...
    -> \images\100.png 
```

通过用户界面

*   转到文档或图像库，并使用“上传多个文件/图像”（这只出现在 Internet Explorer 上）
*   假设您将其上传到 //sharepoint/myimages
*   创建一个新的内容页面（比如文章页面，或带有内容编辑器 WebPart 的 WebPart 页面）
*   假设您的页面现在位于 //sharepoint/pages/mypage.aspx
*   将您的 html 更改为`<img src="images/1.png" />`指向`<img src="../myimages/1.png" />`
*   编辑新创建页面的 HTML（功能区 > 编辑 HTML 源），粘贴您的 HTML 代码

通过 SharePoint 设计器

*   将所有图像拖放到所需位置
*   重复上面的 HTML 步骤

要批量替换文本，SharePoint Designer、您最喜欢的 HTML 编辑器或事件记事本可以使用 CTRL+H 菜单/编辑 > 查找和替换选项很好地完成此操作。

注意：那里的 //sharepoint 地址是您网站的 http url，所以不会让我使用完整的假地址作为示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-11T20:23:51.083

1.  在 IE 或 Word 中，将页面保存为完整的网页，以便创建 HTML 文件和包含图像的文件夹。
2.  在网上，创建指向 Sharepoint 的 Web 文件夹 (WebDAV)。这样，您可以从资源管理器中的文件系统访问它。
3.  打开您的新网络位置，导航到您希望 HTML 文件所在的库，然后将文件和文件夹拖放到那里。

然后该文件将在浏览器中可见，带有图片，但该文件夹将被隐藏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T22:02:16.730

如果我正确理解了您的问题。您可以使用此帖子答案通过 javascript 和 php 加载图像列表 -> [从文件夹加载图像列表](https://stackoverflow.com/questions/758594/load-list-of-image-from-folder)。将文件上传到 Share Point 服务器并使用该文件夹。

或者您可以动态编写 c# 代码来读取 Share Point 文件夹并显示图像。

# xpages - Xpages - 如何将值保存到客户端javascript输入的列表框中

> ID：12415186
> 
> 赞同：0
> 
> 时间：2012-09-13T21:41:04.623
> 
> 标签：xpages

我有一个列表框，我正在使用客户端 javascript 添加和删除项目。问题是这些新值没有保存到列表框（绑定到字段）。返回的唯一值是在列表框中设置的原始值。这些值都在客户端上，因为我可以遍历数组。如何获取这些值来替换当前存在的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-04T16:36:03.917

在 中`List Box properties`，您必须设置`mutiple = true`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T15:30:39.453

默认情况下，列表框有一个您在保存期间可能看不到的验证器，（您需要添加错误控件才能看到它）并且验证器不接受使用 CSJS 添加的新值

如果您在列表框控件中设置 disableValidators="true" ，您会抑制验证器并且保存工作正常。您还需要在保存之前使用 CSJS 选择列表框中的条目，

归功于杰西·加拉格尔

托马斯

# cassandra - 恒定负载下的 Cassandra 延迟模式

> ID：12415189
> 
> 赞同：1
> 
> 时间：2012-09-13T21:41:14.703
> 
> 标签：cassandra, performance

我的生产设置中有非常不寻常的延迟模式：

整个集群（3 台机器：48 gig ram、7500 rpm 磁盘、6 个内核）每 10 分钟显示一次延迟峰值，所有机器同时出现。

请参阅[此屏幕截图](https://skitch.com/tobsch/eupt4/datastax-opscenter)。我检查了日志文件，似乎当时没有进行压缩。

我有 2k 读取和 5k 读取/秒。目前还没有进行任何优化。缓存设置为“ALL”，行缓存的命中率约为 0.7。

有任何想法吗？调整 memtable 大小是一种选择吗？

最好的，

托拜厄斯

# css - 切换 div 容器与它下面的另一个容器重叠

> ID：12415193
> 
> 赞同：2
> 
> 时间：2012-09-13T21:41:47.013
> 
> 标签：css, html, position, containers

我网站的表单页面上有 3 个 div。每当我单击切换按钮时，左上角的切换与底部 div 重叠。

我想要做的是，当单击顶部 div 容器时，左下角的 div 容器应该向下移动，并在切换关闭时移回原来的位置。

我已经包含了正确 div 的 css，我不知道这是否是影响它旁边两个 div 位置的 css。

**切换前**

![在此处输入图像描述](../Images/5d56ed527a009766b44d546c29feeadd.png)

**切换后**

![在此处输入图像描述](../Images/a12aea902f5a72d643ac2e0efe2955a2.png)

**切换的 CSS**

```
#toggle-view {
list-style:none;    
font-family:arial;
font-size:10px;
margin:0;
padding:0;
width:200px; 
position: absolute;
}

#toggle-view li {
    list-style:none;
    text-decoration:none;
    font-size:13px;
    font-family:'lato';
    padding:2px;
    margin:10px;
    margin-left:20px;
    position:relative;
    cursor:pointer; 
    border-radius: 5px;    
}

 #toggle-view li a:hover {
    color: brown;  
}

#toggle-view h3 {
    margin:0;
    font-size:13px;
    color:#2a5a9a;
}

#toggle-view span {
    position:absolute;
    right:5px; top:0;
    color:#2a5a9a;
    font-size:20px;
    font-weight: bolder;
}

#toggle-view p {
    margin:5px 0;
    display:none;
}

#toggle-view a{
    padding:5px 0;
    color:#35371c; 
}

#toggle-view a:hover{

     color:#2a5a9a;
} 
```

**左框的 CSS**

```
.report{
position: absolute;
margin-top:100px;
margin-left:0;
padding-left: 20px;
} 
```

**右框的 CSS**

```
.register-body {
height:auto;
font-size:1em;
width:710px;
position:relative;
color:#000;
border-radius:5px;
background-color:#d2d4bb;
line-height:20px;         
margin:20px 0 20px 250px;
padding:15px 15px 0; 
} 
```

**更新**

当我改变

```
#toggle-view {
position: absolute;
} 
```

至

```
#toggle-view {
position: relative;
} 
```

和

```
.report{
 position: absolute;
} 
```

至

```
.report{
 position: relative;
 } 
```

我懂了 ：

![在此处输入图像描述](../Images/214bcb79826d49d12eb6796555b55743.png)

右框被推到左下框下方。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T21:46:26.150

这是因为您使用的是绝对位置。尝试在没有绝对定位的情况下进行布局，然后它会根据你的全能意志移动、弯曲和弯曲！:)

# javascript - 如何在窗口调整大小时更改 img src？

> ID：12415195
> 
> 赞同：4
> 
> 时间：2012-09-13T21:42:02.143
> 
> 标签：javascript, jquery

根据浏览器尺寸换出图像时，我有点进退两难。

我的页面上有一组图像，我需要在调整浏览器大小时将其关闭。我基本上已经将我所有的图像分成了特定宽度的子文件夹。IE。我有一个名为“1280”、“1152”、“1024”等的文件夹。当浏览器重新调整大小并命中正确的断点时，我使用 javascript 来查找和替换文件夹名称。

就目前而言，我拥有的代码*确实*有效，但仅在重新加载页面时才有效。如果用户按住鼠标并调整窗口大小，则路径不会改变，或者更确切地说，在第一个断点被击中后它们似乎不会改变，即。从宽度 > 1280 像素到小于 1152 像素。

问题是我已经花了一整天的时间编码，而我只是在一天结束时才进入这个..所以我的头脑已经完全模糊了，我无法从逻辑上思考这个问题！如果有人可以在这里帮助我，我将不胜感激，因为我的截止日期很紧，我需要完成它。

我已经精简了代码以使其更清晰，但这是我到目前为止所拥有的：

```
<img src="/images/1280/img1.jpg" alt="" class="swap" />
<img src="/images/1280/img2.jpg" alt="" class="swap" />
<img src="/images/1280/img3.jpg" alt="" class="swap" />
<img src="/images/1280/img4.jpg" alt="" class="swap" />
<img src="/images/1280/img5.jpg" alt="" class="swap" /> 
```

和javascript：

```
function checkResolution() {
    // Resolution width > 1280px
    if ($(window).innerWidth() > 1280) {
        replaceImagePaths("1280");
    }
    // Resolution 1152px - 1279px
    else if ($(window).innerWidth() >= 1152 && $(window).innerWidth() <= 1279) {
        replaceImagePaths("1152");
    }
    // Resolution width 1024px - 1151px
    else if ($(window).innerWidth() >= 1024 && $(window).innerWidth() <= 1151) {
        replaceImagePaths("1024");
    }
    // Resolution width 768px - 1023px
    else if ($(window).innerWidth() >= 768 && $(window).innerWidth() <= 1023) {
        replaceImagePaths("768");
    }
    // Resolution width < 768px
    else if ($(window).innerWidth() <= 767) {
        replaceImagePaths("mobile");
    }
}

$(window).resize(function() {
    checkResolution();
});

$(document).ready(function() {
    checkResolution();
});

function replaceImagePaths(resolution) {
    // Switch images
    $('.swap').each(function() {
        var imagePath = $(this).attr('src');
        $(this).attr('src', imagePath.replace("mobile", resolution));
        $(this).attr('src', imagePath.replace("768", resolution));
        $(this).attr('src', imagePath.replace("1024", resolution));
        $(this).attr('src', imagePath.replace("1152", resolution));
        $(this).attr('src', imagePath.replace("1280", resolution));
    }
}​ 
```

奇怪的是，假设您从大于 1280 的浏览器宽度开始并向下调整大小，则路径将切换到下一次测量，即。从 1280 到 1152，但之后它似乎不起作用。但是，在重新调整大小后刷新页面时，它们*都会起作用。*

我知道这与我的 replaceImagePaths() 函数有关，但我不知道哪里出错了。该功能背后的理论是我只是全面替换每条路径，但似乎我正在覆盖这些值。我不确定。那里肯定发生了一些古怪的事情。

谢谢你的帮助！

（ps 我意识到有很多替代方法可以根据浏览器大小切换图像，但在这种特殊情况下，我必须使用 js 来这样做）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T22:02:51.293

可能是您没有在 replaceImagePaths 函数中正确关闭 jQuery 循环吗？我还对代码进行了其他一些小的改进。

```
function checkResolution() {
    // Resolution width > 1280px
    if ($(window).innerWidth() > 1280) {
        replaceImagePaths("1280");
    }
    // Resolution 1152px - 1279px
    else if ($(window).innerWidth() >= 1152 && $(window).innerWidth() <= 1279) {
        replaceImagePaths("1152");
    }
    // Resolution width 1024px - 1151px
    else if ($(window).innerWidth() >= 1024 && $(window).innerWidth() <= 1151) {
        replaceImagePaths("1024");
    }
    // Resolution width 768px - 1023px
    else if ($(window).innerWidth() >= 768 && $(window).innerWidth() <= 1023) {
        replaceImagePaths("768");
    }
    // Resolution width < 768px
    else if ($(window).innerWidth() <= 767) {
        replaceImagePaths("mobile");
    }
}

function replaceImagePaths(resolution) {
    // Switch images
    $('img.swap').each(function(){
        var imagePath = $(this).attr('src');

        $(this).attr('src', imagePath.replace(/mobile|768|1024|1152|1280/, resolution));//with the right regex you can do it all in one

    });//was missing the  ");"
}

$(window).resize(function() {
    checkResolution();
});

$(function(){
    checkResolution();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T21:44:34.157

我的建议是用带有新 src 的新图像元素完全替换图像元素，因为我会说浏览器认为图像元素已经加载了它的图像并忽略对 src 属性的更改。

# c++ - 如何控制 LLVM IR 中全局变量的位置？

> ID：12415196
> 
> 赞同：1
> 
> 时间：2012-09-13T21:42:10.070
> 
> 标签：c++, code-generation, llvm, llvm-ir

我正在尝试修改 LLVM，使其在内存中保持某些常量和函数连续。
换句话说，我需要确保某些函数的机器代码*总是*在内存中以大约 4 字节的常量开头。*函数体本身不得修改。*

我可以通过以某种方式修改 LLVM IR 来实现这一点吗？

*   如果是：我将如何在 LLVM IR 中声明以使变量和函数在内存中保持连续？

*   如果不是：我应该修改代码生成过程的哪一部分（即，通过哪个（es））来实现这一点？任何指向我应该查看的项目/文件的链接都会有所帮助，因为我还不确定从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:15:35.353

据我所知，我认为您不能仅通过修改 IR 来做到这一点。你必须自己写一些东西来处理它。它也不应该是通过 - 它太低级，它应该在[特定于目标的代码生成](http://llvm.org/docs/WritingAnLLVMBackend.html)期间运行。您可以捎带现有的目标，只需修改这方面，当然，您不必从头开始编写新目标。不过，我不知道哪个位置对这个有好处。

我认为在代码生成期间将此信息从 IR 级别传递到 DAG 的一种好方法是使用元数据：将元数据附加到将它们相互链接的函数或关联常量，然后使用该链接一起发射。[有关如何传输元数据的信息，](http://lists.cs.uiuc.edu/pipermail/llvmdev/2010-September/034464.html)请参阅llvm-dev 上的此线程。

# javascript - jQuery Animate Step 函数

> ID：12415199
> 
> 赞同：1
> 
> 时间：2012-09-13T21:42:30.847
> 
> 标签：javascript, jquery, loops, jquery-animate

我在 step 函数中遇到了一些问题。我必须在 STEP 函数中调用一个复杂的函数，但我试图限制调用次数以提高性能。为了让事情变得更复杂，我正在为 2 个属性设置动画。

```
obj.animate({'width':newWidth+px,'height':newHeight+px},
{duration:time,queue:false,step:function(now,fx){
   complicatedFunction();
}}); 
```

该函数考虑了 OBJ 的位置/尺寸，然后计算大约 10 个其他元素的新尺寸和位置，因此间隔必须相当流畅（也许每 3 次或第 4 次迭代？）什么是限制调用 complexFunction 的次数？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T21:47:14.763

最简单的方法是使用计数器。

```
var counter = 0;

obj.animate({'width':newWidth+px,'height':newHeight+px},
{duration:time,queue:false,step:function(now,fx){
   if (counter % 4 === 0) { // run function every 4 steps
       complicatedFunction();
   }
   counter++;
}}).promise().done(complicatedFunction); 
```

使用此方法，您还应该在`.promise().done()`回调中运行它。（更新以反映）

# c# - 从 C# 的 PDF 模板创建 PDF 文档

> ID：12415200
> 
> 赞同：0
> 
> 时间：2012-09-13T21:42:34.063
> 
> 标签：c#, pdf

我有几个 PDF 模板，例如租赁和租赁协议。现在客户将选择一个模板，然后会打开一个表格供他填写所需的详细信息——当然，表格内容会因所选模板而异。

现在我需要将收集到的信息写入 PDF 模板中的适当位置并创建一个新的 PDF 文档。

什么是最好的方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:24:09.250

您可以为此使用[Amyuni PDF Creator .Net](http://www.amyuni.com/en/developer/pdfcreator/features/)。

*   您可以使用随软件包提供的 PDF 编辑器直观地创建 PDF 模板，也可以根据需要以编程方式创建它们。
*   您可以使用还提供的 PDF 查看器控件显示 PDF 表单（模板）。
*   您可以将 PDF 表单的内容保存为新的 PDF 文件，如果需要，您可以通过 在所有页面的所有对象中将[Annotation 属性设置为 false 来首先展平可编辑字段。](http://www.amyuni.com/WebHelp/Amyuni_PDF_Creator_for_NET/Amyuni_PDFCreator_IacObject/properties/IacObject_Properties.htm)

*通常的免责声明适用*

您可以使用的其他库：

*   PDFSharp（开源，它允许您创建 PDF 文件，但不能显示它们）
*   iText（[AGPL](http://en.wikipedia.org/wiki/Affero_General_Public_License)，它允许您创建和处理 PDF 文件，但不能显示它们）

# ruby-on-rails-3 - Google-Maps-for-Rails 空白地图

> ID：12415204
> 
> 赞同：2
> 
> 时间：2012-09-13T21:42:58.400
> 
> 标签：ruby-on-rails-3, gmaps4rails

我正在运行 Ruby 1.9、Rails 3.2.8 和 gmaps4rails 1.5.5。我遵循了自述文件，仔细检查了页脚中有 <%= yield :scripts %> ，但我仍然有一个空白的白框，地图应该没有错误。我已经使用 Firebug 和 Google JS 进行了检查，gmaps4rails JS 似乎正在加载，并且我的控制器的 @json 变量包含 lats 和 longs。我只是不确定接下来要检查什么。

为什么会出现这种情况，我该如何解决问题？

# visual-studio-2010 - Visual Studio 2010 命令提示符 - 构建所有解决方案文件

> ID：12415205
> 
> 赞同：1
> 
> 时间：2012-09-13T21:43:01.737
> 
> 标签：visual-studio-2010, command-prompt

有没有办法在给定目录中搜​​索所有解决方案文件（.sln）并全部构建它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:03:59.280

您可以使用此批处理文件：

```
for /F %%a in ('dir *.sln /s/b') do msbuild "%%a" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T21:45:34.333

您可以通过使用批处理或 PowerShell 来查找文件集，然后驱动构建过程的命令行调用来执行此操作。

# r - R 中的 par() 选项 pin 和 oma

> ID：12415206
> 
> 赞同：4
> 
> 时间：2012-09-13T21:43:17.587
> 
> 标签：r

`par`当我`oma`使用`pin`. 使用时，`oma`标题会向上（似乎超出`oma`范围）`pin`；当`pin`被注释掉（如下）时，`oma`标题位置在视觉上很吸引人。我试过轮换`par`选项序列，认为一个可能会压倒其他选项，但没有运气。代码如下。线索赞赏！谢谢，汤姆

```
par(mfrow=c(1,2)) # 1X2 graphs
par(oma=c(0,0,5,0))  # top has 5 lines of space 
par(mar=c(4,4,2,1)+.1)  # margin lines
#par(pin=c(1.9,1.9))  # plot areas for graphs

# plot 1
plot(rnorm(n=20),col="olivedrab",pch=19,ylim=c(-2.0,2.0),xlim=c(0,20),ylab="",xlab="")
mtext("Observation No.",side=1,line=3)
mtext("Random variate",side=2,line=3)
mtext("Olivedrab Plot",side=3,line=2,cex=1.5)

# plot 2
plot(rnorm(n=20),col="olivedrab2",pch=19,ylim=c(-2.0,2.0),xlim=c(0,20),ylab="",xlab="")
mtext("Observation No.",side=1,line=3)
mtext("Random variate",side=2,line=3)
mtext("Olivedrab Plot",side=3,line=2,cex=1.5)

mtext("Army Olive Drab Plots",side=3,line=3,cex=2,outer=TRUE)  # add outer label 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T22:50:54.457

你没有描述你想看到什么，只有什么代码产生了你不喜欢的东西。猜测您希望看到`mtext`的“主标题”离图形设备的外边缘更远（更靠近图形），我建议您使用负数进行放置。正如帮助页面所说，'line' 指定“从 0 开始向外计数”（尽管我无法找到我们应该期望零线在哪里的描述。）

```
par(mfrow=c(1,2)) # 1X2 graphs
par(oma=c(0,0,5,0))  # top has 5 lines of space 
par(mar=c(4,4,2,1)+.1)  # margin lines
par(pin=c(1.9,1.9))  # plot areas for graphs

# plot 1
plot(rnorm(n=20),col="olivedrab",pch=19,ylim=c(-2.0,2.0),xlim=c(0,20),ylab="",xlab="")
mtext("Observation No.",side=1,line=3)
mtext("Random variate",side=2,line=3)
mtext("Olivedrab Plot",side=3,line=2,cex=1.5)

# plot 2
plot(rnorm(n=20),col="olivedrab2",pch=19,ylim=c(-2.0,2.0),xlim=c(0,20),ylab="",xlab="")
mtext("Observation No.",side=1,line=3)
mtext("Random variate",side=2,line=3)
mtext("Olivedrab Plot",side=3,line=2,cex=1.5)

mtext("Army Olive Drab Plots",side=3,line=-3,cex=2,outer=TRUE) 
```

# java - 通过 ektorp 弹性地使用 java 中的 couchdb

> ID：12415211
> 
> 赞同：0
> 
> 时间：2012-09-13T21:43:36.900
> 
> 标签：java, couchdb, pojo, ektorp

即使文档中缺少字段，我如何从 couchdb 文档中实例化 Pojo - 在这种情况下，我如何告诉 ektorp 忽略该字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T06:58:41.820

不知道你的意思是什么，如果 pojo 的属性不存在，那么在从 CouchDB 反序列化后它将为 null（或原始类型为 0/true）。

# jsf - 在单独的 jar 中部署具有复合组件的支持 bean

> ID：12415212
> 
> 赞同：0
> 
> 时间：2012-09-13T21:43:44.450
> 
> 标签：jsf, jsf-2, web-deployment, composite-component, backing-beans

我在 JBoss AS 6.1 上部署我的 Web 应用程序时遇到了一些困难。我当前的项目分为主 Web 应用程序（使用 JSF 2 facelets 的控制器/托管 bean 和 Web 前端）和一个带有复合组件 + 支持 bean 的 jar。但是当我尝试访问该页面时，我收到一个错误，即无法实例化指定的组件类型。

将支持 bean 复制到主 Web 应用程序可以解决问题，但这不是我想要的。那么有什么需要注意的吗？

支持豆看起来像

```
@FacesComponent(value = "elementBase")
public class ElementBase extends UINamingContainer {
    ...
} 
```

和复合组件接口

```
<composite:interface componentType="elementBase">
... some attributes
</composite:interface> 
```

jar的结构如下

```
-- META-INF
    |-- resources
    |    |-- components
    |         |-- elementBase.xhtml
-- com
    |-- example
    |    |-- ElementBase.class 
```

我也尝试`faces-config.xml`在`META-INF`文件夹中添加组件类型，但仍然找不到组件类型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T15:36:51.477

[通过 BalusC 对JEE6> Packaging JSF facelets (xhtml) and ManagedBeans as JAR](https://stackoverflow.com/questions/6104498)问题的回答

> 至于托管 bean 和其他 JSF 类，如验证器、转换器等，只需使用`@ManagedBean`、`@FacesValidator`、`@FacesConverter`等注释它们，并以通常的方式将它们打包到 JAR 中。您只需`/META-INF/faces-config.xml`在 JAR 中提供一个 JSF 2.0 兼容文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">
</faces-config> 
```

> 这样，JSF 将被触发以扫描 JAR 中的类以查找 JSF 特定的注释。或者，您也可以以 JSF 1.x 的方式在 JAR 的 faces-config.xml 中注册它们。

和[Java EE6 教程：应用程序配置资源文件](http://docs.oracle.com/javaee/6/tutorial/doc/bnawp.html)

> 一个应用程序可以有多个应用程序配置资源文件。JavaServer Faces 实现通过查找以下内容来查找配置文件：
> 
> *   `/META-INF/faces-config.xml`在 Web 应用程序`/WEB-INF/lib/`目录和父类加载器中的任何 JAR 文件中命名的资源。如果存在具有此名称的资源，则将其作为配置资源加载。这种方法对于包含一些组件和渲染器的打包库是实用的。此外，任何名称以 faces-config.xml 结尾的文件也被视为配置资源并按此方式加载。
>     
>     
> *   Web 部署描述符文件中的上下文初始化参数 ，`javax.faces.application.CONFIG_FILES`它为您的 Web 应用程序指定多个配置文件的一个或多个（逗号分隔）路径。此方法最常用于企业级应用程序，这些应用程序将维护大型应用程序每个部分的文件的责任委托给不同的组。
>     
>     
> *   `/WEB-INF/`应用程序目录中名为 faces-config.xml 的资源。简单的 Web 应用程序以这种方式使其配置文件可用。

..我可以解决我的问题。

# 一步一步解决

1.  创建支持 bean

    ```
    @FacesComponent(value = "elementBase")
    public class ElementBase extends UINamingContainer {
        ...
    } 
    ```

2.  和具有以下接口的复合组件

    ```
    <composite:interface componentType="elementBase">
        ... some attributes, value holder, ..
    </composite:interface> 
    ```

3.  在已部署的 jar 中提供一个`faces-config.xml`，以指示该 jar 包含带注释的类。已部署 jar 的结构应如下所示

    ```
    -- META-INF
        |-- resources
        |    |-- components
        |         |-- elementBase.xhtml
        |-- faces-config.xml
    -- com
        |-- example
        |    |-- ElementBase.class 
    ```

4.  `/WEB-INF/lib`在 Web 应用程序的文件夹中部署 jar 。

# 研究/相关链接和主题

*   [JEE6> 将 JSF facelets (xhtml) 和 ManagedBeans 打包为 JAR](https://stackoverflow.com/questions/6104498)
*   [Java EE6 教程：应用程序配置资源文件](http://docs.oracle.com/javaee/6/tutorial/doc/bnawp.html)
*   [JSF facelets 模板打包](https://stackoverflow.com/questions/9290482)
*   [如何创建模块化 JSF 2.0 应用程序？](https://stackoverflow.com/questions/6199458)

# web-scraping - 从维基百科抓取数据

> ID：12415214
> 
> 赞同：6
> 
> 时间：2012-09-13T21:43:56.060
> 
> 标签：web-scraping, wikipedia, wikipedia-api

我正在尝试寻找或构建一个网络爬虫，它能够通过并找到美国的每个州/国家公园以及它们的 GPS 坐标和陆地区域。我研究了一些框架，如 Scrapy，然后我看到有一些专门用于 Wikipedia 的站点，例如[http://wiki.dbpedia.org/About](http://wiki.dbpedia.org/About)。其中任何一个是否有任何特定优势，或者将信息加载到在线数据库中是否会更好？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-20T05:43:36.703

假设您要解析像[这个 Wikipedia page 这样](http://en.wikipedia.org/wiki/List_of_national_parks_of_the_United_States)的页面。以下代码应该可以工作。

```
var doc = new HtmlDocument(); 
doc = .. //Load the document here. See doc.Load(..), doc.LoadHtml(..), etc.

//We get all the rows from the table (except the header)
var rows = doc.DocumentNode.SelectNodes("//table[contains(@class, 'sortable')]//tr").Skip(1);
foreach (var row in rows) {
    var name = HttpUtility.HtmlDecode(row.SelectSingleNode("./*[1]/a[@href and @title]").InnerText);
    var loc = HttpUtility.HtmlDecode(row.SelectSingleNode(".//span[@class='geo-dec']").InnerText);
    var areaNodes = row.SelectSingleNode("./*[5]").ChildNodes.Skip(1);
    string area = "";
    foreach (var a in areaNodes) {
        area += HttpUtility.HtmlDecode(a.InnerText);
    }

    Console.WriteLine("{0,-30} {1,-20} {2,-10}", name, loc, area);
} 
```

我对其进行了测试，它产生以下输出：

```
Acadia                         44.35A°N 68.21A°W    47,389.67 acres (191.8 km2)
American Samoa                 14.25A°S 170.68A°W   9,000.00 acres (36.4 km2)
Arches                         38.68A°N 109.57A°W   76,518.98 acres (309.7 km2)
Badlands                       43.75A°N 102.50A°W   242,755.94 acres (982.4 km2)
Big Bend                       29.25A°N 103.25A°W   801,163.21 acres (3,242.2 km2)
Biscayne                       25.65A°N 80.08A°W    172,924.07 acres (699.8 km2)
Black Canyon of the Gunnison   38.57A°N 107.72A°W   32,950.03 acres (133.3 km2)
Bryce Canyon                   37.57A°N 112.18A°W   35,835.08 acres (145.0 km2)
Canyonlands                    38.2A°N 109.93A°W    337,597.83 acres (1,366.2 km2)
Capitol Reef                   38.20A°N 111.17A°W   241,904.26 acres (979.0 km2)
Carlsbad Caverns               32.17A°N 104.44A°W   46,766.45 acres (189.3 km2)
Channel Islands                34.01A°N 119.42A°W   249,561.00 acres (1,009.9 km2)
Congaree                       33.78A°N 80.78A°W    26,545.86 acres (107.4 km2)
Crater Lake                    42.94A°N 122.1A°W    183,224.05 acres (741.5 km2)
Cuyahoga Valley                41.24A°N 81.55A°W    32,860.73 acres (133.0 km2)
Death Valley                   36.24A°N 116.82A°W   3,372,401.96 acres (13,647.6 km2)
Denali                         63.33A°N 150.50A°W   4,740,911.72 acres (19,185.8 km2)
Dry Tortugas                   24.63A°N 82.87A°W    64,701.22 acres (261.8 km2)
Everglades                     25.32A°N 80.93A°W    1,508,537.90 acres (6,104.8 km2)
Gates of the Arctic            67.78A°N 153.30A°W   7,523,897.74 acres (30,448.1 km2)
Glacier                        48.80A°N 114.00A°W   1,013,572.41 acres (4,101.8 km2)
(...) 
```

我认为这是一个开始。如果某些页面失败，您必须查看布局是否更改等。

当然，您还必须找到一种方法来获取您要解析的所有链接。

**一件重要的事情**：你知道是否允许抓取*维基百科*吗？我不知道，但你应该在做之前看看它是否......`;)`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-23T11:28:33.247

虽然这个问题有点老了，但现在可用的另一种选择是避免任何抓取并直接从[protectedplanet.net](http://www.protectedplanet.net)获取原始数据——它包含来自[世界保护区数据库](http://www.wdpa.org/)和[联合国保护区清单的](http://www.unep-wcmc.org/un-list-of-protected-areas_269.html)数据。（披露：我曾在[UNEP-WCMC](http://www.unep-wcmc.org)工作，该组织生产和维护数据库和网站。）

它可免费用于非商业用途，但您需要注册才能下载。例如，[此页面](http://protectedplanet.net/search?country_id=232)可让您以 KMZ、CSV 和 SHP 格式下载美国的 22,600 个保护区（包含纬度、经度、边界、IUCN 类别和一堆其他元数据）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T08:52:34.010

我认为这不是最好的方法。

我的想法是从 openstreetmap.org（或任何其他您可以查询的基于 GEO 的 API）访问 API，然后向它询问您想要的数据。国家公园很容易找到。您可以从 Wikipedia 之类的来源获取名称，然后要求任何一个 GEO API 为您提供所需的信息。

顺便说一句，[维基百科国家公园列表有](http://en.wikipedia.org/wiki/List_of_national_parks_of_the_United_States)什么问题？

# regex - 查找数字匹配，替换为分隔匹配。常用表达

> ID：12415215
> 
> 赞同：1
> 
> 时间：2012-09-13T21:44:06.123
> 
> 标签：regex, enterprise

我正在搜索 1234567.0 的出现并将所有匹配项替换为 1234567 我正在使用企业向导，但无法理解为什么我与 Visual Studio 一起使用的正则表达式在程序中不起作用。

现在我正在尝试`(/d{9})(/d{7})`我知道我已经离开这里并继续深入研究正则表达式的神秘世界。

任何正则表达式向导都有两美分。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T21:47:37.507

用第一个匹配组替换怎么样`(\d+)\.\d+`..？这会修剪包括句点在内的小数部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T21:46:33.327

`\d+\.\d+`将匹配 1 个或多个数字，后跟一个小数，然后是一个或多个数字。

如果要捕获整数部分，请在其周围加上括号。

`(\d+)\.\d+`

* * *

`\d`是数字的特殊字符

`+`意思是“至少匹配其中之一”

`\.`只匹配一个句点。由于`.`是一个特殊字符，你必须用`\`

# javascript - batman.js 输入值

> ID：12415223
> 
> 赞同：3
> 
> 时间：2012-09-13T21:44:47.820
> 
> 标签：javascript, coffeescript, batman.js

我想将输入字段的值从视图传递给控制器​​。在不将输入字段绑定到模型属性的情况下实现此目的的最佳方法是什么？例子：

看法：

```
<form data-event-submit="searchHero">
    <input type="text" placeholder="Name..." data-bind="myquery"/>
</form> 
```

控制器：

```
searchHero: ->
    console.log myquery 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:55:34.563

实际上，这段代码将输入的内容绑定到`myquery`控制器的 prop 上，因此您可以通过标准的 batman 访问它`get`：

```
searchHero: ->
  console.log @get 'myquery' 
```

# asp.net-mvc - 同一子域下的天蓝色 wcf 和 mvc

> ID：12415224
> 
> 赞同：1
> 
> 时间：2012-09-13T21:45:07.977
> 
> 标签：asp.net-mvc, wcf, azure, subdomain

我通过 Azure 使用两个 WebRoles 启动并运行了我的项目。一个 MVC 项目和一个 WCF。我想知道是否可以将两个 Web 应用程序放在同一个子域下。那可能吗？还是我最终会拥有 2 个子域（一个用于 mvc 的子域和一个用于 wcf 的子域）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T02:59:19.583

理想情况下，您将每个项目放在不同的云服务下。两个云服务，两个项目（mvc 和 wcf）。它们有两个不同的 *.cloudapp.net 地址。

# android - 启用的首选项取决于其他首选项

> ID：12415226
> 
> 赞同：16
> 
> 时间：2012-09-13T21:45:12.227
> 
> 标签：android, android-preferences

我目前正在开发一个 droid 应用程序，并且想知道是否有一种方法可以根据另一个首选项的值启用或禁用首选项。

例如，如果我有 checkbox_pref1，如果启用，则启用 option2/3/4，如果禁用 checkbox_pref1，则 option2/3/4 自动变为禁用，或者是否有 XML 属性可以完成此操作，或者我会这样做需要代码来实现这个效果。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-13T21:53:53.217

您可以使用`dependency`属性执行此操作。在您的`Preference`XML 中，将以下行添加到您的`checkbox_pref2`、`checkbox_pref3`和`checkbox_pref2`Preferences 中：

```
android:dependency="checkbox_pref1" 
```

有用的链接：

[Android 快速首选项教程](http://www.javacodegeeks.com/2011/01/android-quick-preferences-tutorial.html)

[Android 偏好文档（#dependency）](http://developer.android.com/reference/android/preference/Preference.html#attr_android:dependency)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-21T11:50:55.503

这是我在选中主复选框首选项之前禁用 PreferenceScreen 的示例 - 感谢 kcoppock！对不起，我的声望不够高，无法超越你。

```
 <CheckBoxPreference
            android:title="@string/Day1_title"
            android:summary="@string/Day1_summary"
            android:key="pref_Day1" />
        <PreferenceScreen
            android:dependency="pref_Day1"
            android:key="day1_screen"
            android:summary="@string/Extra_Options">
            <EditTextPreference
              android:title="@string/Day1_title"
              android:summary="@string/Workout_Date"
              android:key="Day1_date"/>
            <EditTextPreference
              android:title="@string/Comment_title"
              android:key="Day1_comment"/>
        </PreferenceScreen> 
```

# http - Google OAuth 1.0 - 将范围端口设置为 443（AuthSub 令牌的范围错误）

> ID：12415234
> 
> 赞同：0
> 
> 时间：2012-09-13T21:45:40.620
> 
> 标签：http, oauth, port, authsub

我一直在尝试学习 OAuth (1.0)，并通过尝试访问我在 Google 上的联系人来测试我的代码。这很容易，因为我不必建立朋友/消费者关系（Google 只允许匿名/匿名消费者令牌），并且因为 Google 有 OAuth Playground 来帮助我。

所以我将我的代码设置如下

*   请求令牌： [https ://www.google.com/accounts/OAuthGetRequestToken?scope=https%3A%2F%2Fwww.google.com%2Fm8%2Ffeeds%2F](https://www.google.com/accounts/OAuthGetRequestToken?scope=https%3A%2F%2Fwww.google.com%2Fm8%2Ffeeds%2F)
*   授权请求令牌： [https ://www.google.com/accounts/OAuthAuthorizeToken](https://www.google.com/accounts/OAuthAuthorizeToken)
*   访问令牌： [https ://www.google.com/accounts/OAuthGetAccessToken](https://www.google.com/accounts/OAuthGetAccessToken)

一切似乎进展顺利——我得到了请求令牌，授权良好，并且能够获得访问令牌。然后我尝试向[https://www.google.com/m8/feeds/contacts/default/full/提出请求](https://www.google.com/m8/feeds/contacts/default/full/)

唯一的问题是，我不断收到此错误：“401：AuthSub 令牌的范围错误”

我对此感到困惑，因为当我在 OAuth Playground ( [http://googlecodesamples.com/oauth_playground/index.php](http://googlecodesamples.com/oauth_playground/index.php) ) 中使用相同的消费者信息发出相同的请求时，一切都会正常进行。

最终，我发现了以下问题：[HTTP/1.1 401 Token invalid - AuthSub token has wrong scope](https://stackoverflow.com/questions/1656311/http-1-1-401-token-invalid-authsub-token-has-wrong-scope)

最佳答案让我找到了我的解决方案——我正在使用的一个 JAR 中有一段代码，它总是将端口设置为 https 的 443 或 http 的 80。当我单步执行我的代码并将端口更改为 -1 时，我的请求运行良好，并且我能够获得我想要的信息。

不幸的是，我无法更改 JAR 文件中的代码，所以我将不得不在最后解决问题。在回答这个问题时，“乔纳森”说：

> 另一种解决方法是将 :443 包含在令牌范围中；它只需要匹配

我尝试将我的请求令牌查询字符串更改为`?scope=https%3A%2F%2Fwww.google.com **%3A443** %2Fm8%2Ffeeds%2F`Google 只是拒绝给我一个请求令牌 - 它给了我一个 400 错误说`Invalid scope: https://www.google.com:443/m8/feeds/`。将 https 更改为 http 没有任何作用。我将如何按照乔纳森（几乎一年没上网）的建议去做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T21:57:02.150

Google 的 auth 范围是 URL 的事实基本上是学术性的——它们实际上并没有提供任何有用的东西（[自己看](http://www.googleapis.com/auth/userinfo.email)），所以添加一个端口只会让 Google 感到困惑。所以乔纳森的建议是不正确的。

它们甚至看起来像 URL 的唯一原因是它们可以被认为是普遍唯一的（即使这只能说是正确的）。

所以不要把auth 放在`:443`你的 auth 范围内。

# php - 通过带有选择框（php）的表单提交值

> ID：12415236
> 
> 赞同：0
> 
> 时间：2012-09-13T21:45:59.223
> 
> 标签：php, xhtml

好的，我花了最后一个小时试图找到解决方案，但没有运气，所以我会问你们是否可以提供帮助！

看起来很简单，我如何将选择框的值提交到外部 php 页面！

我确定这段代码应该可以工作，但它根本没有提交值。

```
test.php
    <form action="test2.php"
         method="post"
        enctype="multipart/form-data">
    <p>
    What is your Gender?

    <select name="formGender">
      <option value="">Select...</option>
      <option value="M">Male</option>
      <option value="F">Female</option>
    </select>
    </p>

    <input type="submit" 
            name="submit"
            value="Submit" />
            </form>

test2.php

    <?php
    if(isset($_POST['formSubmit']) )
    {

      $varGender = mysql_real_escape_string($_POST['formGender']);

      echo $varGender;
      }
      else{
      echo "Something went wrong";
      }
    ?> 
```

然而，我最终总是得到“出了点问题”，这意味着数据没有提交。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T21:50:20.850

`$_POST['formSubmit']`永远不会设置，因为您没有名称为“formSubmit”的字段。怎么样`if(isset($_POST['formGender']))`？

# subdomain - CNAME 值而不是 HOST 值

> ID：12415241
> 
> 赞同：0
> 
> 时间：2012-09-13T21:46:09.230
> 
> 标签：subdomain, flask, cname, werkzeug

如果我们有一个客户的 cname 记录 sub1.notourserver.com 指向类似 abcdefg.ourserver.com 的东西，我们将主机读取为 sub1.notoursever.com。我们是否有可能从这个请求中以某种方式获取 abcdefg.ourserver.com 的值？我们有一个子域路由设置，但由于主机与我们的 SERVER_NAME 配置设置不匹配，它没有启动它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:31:07.120

HTTP 不提供该信息，因此 Flask/Werkzeug 也不提供。您需要在 Flask/Werkzeug 中使用客户端实际使用的（子）域名。

如果你真的做不到，你需要破解一个维护显式映射（或发出 DNS 请求）和补丁的 WSGI 中间件`environ['HTTP_HOST']`。

# php - 如何在 git 项目中嵌套 git 项目？

> ID：12415243
> 
> 赞同：1
> 
> 时间：2012-09-13T21:46:16.057
> 
> 标签：php, git, tortoisegit

**问题：**将 git 存储库嵌套在 git存储库中，*而不*将第二个存储库存储在主机主存储库中。回购需要是两个独立的实体。通过这种方式，我可以轻松更新客户端站点的基本代码（用于多个站点）。

**两个 repos 的原因：**我有一个我的项目使用的基本 php 框架。每个客户都有自己的存储库，其中包含该站点所需的文件。由于 git/submodules 的工作方式，我必须将“框架”作为主仓库，将“客户代码”作为子模块。原因是我*必须*拥有*index.php 和 .htaccess*（框架的一部分）在根目录中。这很好，因为我的框架旨在根据需要进行扩展。我可以将我需要的任何客户端文件放在“站点”文件夹中，并将其存储为单独的存储库。明显的缺点是为了设置站点，您必须首先安装“框架 repo”，然后安装“client repo”。由于这些是私有的，因此此设置很好。我也喜欢能够从另一个项目更新我的框架的好处。现在麻烦的是我从该克隆中所做的任何推送都包括“客户端代码”。此外，由于我需要对框架的本地测试进行相同的设置，因此将子模块添加回主框架存储库。我想好为什么不克隆包含“客户端代码”的“站点”文件夹并将该文件夹添加到忽略列表中。我必须手动更新每个，但那很好。然而 torisegit 似乎认为它现在是一个子项目（有限支持），我什至不能将该文件夹添加到忽略列表中。所以我假设嵌套 git 克隆是不好的，但我可能做错了。

**目标：**我需要能够部署两个存储库。我的“框架”我肯定必须是基础/根仓库。然后我需要以某种方式将第二个“客户端”存储库嵌入到基本存储库内的文件夹中。“客户端”存储库从不存储框架代码，只存储它自己的代码。我希望能够更新和推送对“框架代码”的更改（它的 alpha 版本有很多错误修复），而不需要存储任何关于“客户端代码”的内容，因此我可以轻松地将其克隆到新站点的新文件夹中. 同样，客户端代码存储在框架根目录上一级的单个文件夹中。（见下面的例子）。当我尝试复制粘贴文件夹甚至手动将其添加到忽略文件时，作为 git clone 执行此操作会破坏 TortoiseGit 和可能的 git。

**最后的想法：**也许子项目会起作用，但似乎没有太多支持，我不明白如何使用它。我试图将它保留在主要工具上，以便我的两个主要工具 TortoiseGit 和 NetBeans 支持一切。也许有一种方法可以不在主仓库中存储子模块，但我找不到它。也许子文件夹会起作用，但似乎又没有太多支持。似乎最简单的方法就是忽略该文件夹，但至少 TortoiseGit 在我尝试此操作时似乎坏了，但我可能做错了。

**示例文件夹布局：**

```
-.git（框架回购）
- 系统 *framework 文件夹
-- foo *framework 文件夹
-- bar *framework 文件夹
- 站点（第二个 repo aka 客户端的根目录）
-- .git (客户端仓库)
-- config.php *客户端文件
- index.php *框架文件
- .htaccess *框架文件

```

“系统”文件夹、index.php 和 .htaccess 是 PHP 框架的一部分，对我的所有站点都是通用的。“站点”文件夹包含包含该站点文件的第二个存储库。第二种选择是重写我的框架，使其存储在自己的文件夹中并被新的 index.php 调用。然而，这是一次重大的改写，对它的写作方式来说是一场噩梦。加上处理 .htaccess 文件的问题，因为它必须在根目录中。当然我可以复制它，但是对该文件的任何更改都不会在拉取中得到更新。但在这一点上，我认为这是唯一的方法。

希望这是有道理的。我没有想法，但真的想让这个工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T21:58:13.380

您始终可以将第二个存储库克隆到您喜欢的第一个存储库中的任何位置，然后将第二个存储库添加到您的`.gitignore`文件中。

在上面的示例中，您只需添加：

```
site/ 
```

到你的`.gitignore`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T21:48:12.583

Git 子模块是我能想到的最好的东西。[在这里](http://git-scm.com/book/en/Git-Tools-Submodules)查看。将代码拆分为可重用的存储库也非常方便。

# facebook - fb.login - 来自 webapp 的 Iphone 呼叫不起作用

> ID：12415257
> 
> 赞同：2
> 
> 时间：2012-09-13T21:47:21.757
> 
> 标签：facebook, login, add

当我将我的 web 应用程序添加到我的 iPhone 上的主页时，当 Javascricpt 调用时`fb.login()`，屏幕始终保持空白。

如果我没有在我的 Iphone 上添加我的 webapp，那么当 Javascript 调用时`fb.login()`，它可以工作。

我只有 iPhone 有这个问题，Android 没有。

你知道有什么办法可以解决这个问题吗？

# php - 怎么了？什么都不会加载（几乎）！

> ID：12415258
> 
> 赞同：1
> 
> 时间：2012-09-13T21:47:26.883
> 
> 标签：php, .htaccess, mod-rewrite

好吧……我的标题有点夸张……

我的网站是用 PHP 构建的，我试图“require_once”的所有文件都没有被加载。我更改的唯一文件是我的 .htaccess 文件。我对 .htaccess 一无所知，而我所拥有的完全来自于网络搜索。怎么了？感谢您提前提供任何帮助。

```
RewriteEngine on

<Files 403.shtml>
order allow,deny
allow from all
</Files>
ReWriteBase /
RewriteCond %{REQUEST_FILENAME} !-d
ReWriteRule !index.php index.php [L] 
```

此外，如果我注释掉最后两行，我的网站运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T21:50:39.537

好吧，`require_once`与文件无关`.htaccess`：它是一个 PHP 指令，而不是 Apache 指令。您必须正确设置文件的[include_path](http://www.php.net/manual/en/ini.core.php#ini.include-path)*并*确保这些目录和文件是可访问的（即，对它们设置正确的权限）。

如果您显示从 failed 收到的错误消息`require`，那么就如何修复它为您提供具体建议会容易得多。

**更新**如果您需要将对 .php 文件的所有非 AJAX 请求重定向到`index.php`，您`.htaccess`应该是这样的：

```
RewriteEngine on

RewriteCond %{HTTP:x-requested-with} ^XMLHttpRequest$
RewriteRule . - [L]

RewriteCond %{REQUEST_FILENAME} !-d
ReWriteRule .php$ index.php 
```

这基本上意味着以下内容：“所有 AJAX 请求 - 去你需要的东西，如果你不去某个目录并且以 .php 结尾，那么所有非 AJAX 请求 - 去 index.php 代替”。

如果不检查 .php（或一些类似的检查），您将重定向到`index.php`所有脚本加载程序；并且，除非您从某个外部 CDN 执行此操作，否则它不适用于您的情况。)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T22:01:10.763

尝试将最后两行更改为：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule . index.php [L] 
```

如果您希望您的 URL 看起来像这样（您可能会这样做）：

```
http://yoursite.com/some/path/somewhere 
```

然后将最后一行更改为：

```
RewriteRule ^([^/]*)(.*)$ index.php?first=$1&second=$2 
```

如果那是您想要实现的目标，请确保如果您正在尝试：

```
http://yoursite.com/about 
```

实际上没有一个名为 about 的文件夹，这一行：

```
RewriteCond %{REQUEST_FILENAME} !-d 
```

检查名称为“about”的文件夹是否存在，如果存在，则页面不会重定向，文件也是如此，假设您转到：

```
http://yoursite.com/about.html 
```

如果 about.html 确实存在，则页面不会重定向。

希望这是有道理的。

如果您需要更多信息，[http://jrgns.net/content/redirect_request_to_index](http://jrgns.net/content/redirect_request_to_index)似乎相当简洁和有用。

# javascript - 自定义字幕显示，jQuery，javascript

> ID：12415261
> 
> 赞同：0
> 
> 时间：2012-09-13T21:47:42.363
> 
> 标签：javascript, jquery

我正在使用我构建的图像库函数，尝试使用缩略图的图像属性在完整图像下**方生成标题。****alt**和**标题**。缩略图库侧没有问题。另一方面，标题返回**undefined**，并出现在第一个缩略图下方，而不是完整图像下方。

```
$('.gallery li img').hover(function(){
        var $viewer = $(this).parents('.viewer');
      $('.full-img',$viewer).attr('src',$(this).attr('src').replace('thumb/', ''));
      $('.full-img',$viewer).attr('alt',$(this).attr('alt').replace('thumb/', ''));
         var caption_alt = $('.full-img',$viewer).attr('alt');
         var caption_title = $('.full-img',$viewer).attr('title');
      if (caption_alt !== "" && caption_title !== ""){('.full-img', $viewer).after('<p class="captiontitle">' + caption_title + '</p>' + '<p class="captionalt">' + caption_alt + '</p>')}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T21:59:38.620

试试这个

```
$('.gallery li img').hover(function(){
        var $viewer = $(this).parents('.viewer');
        $('.full-img',$viewer).attr('src',$(this).attr('src').replace('thumb/', ''));
        $('.full-img',$viewer).attr('alt',$(this).attr('alt').replace('thumb/', ''));//missed . here
         var caption_alt = $('.full-img',$viewer).attr('alt');//missed . here
         var caption_title = $('.full-img',$viewer).attr('title');//missed . here
      if (caption_alt !== "" && caption_title !== ""){('.full-img', $viewer).after('<p class="captiontitle">' + caption_title + '</p>' + '<p class="captionalt">' + caption_alt + '</p>')}
}); //missed a . and an ending double quote " 
```

# jsp - JSTL c:url 标记 - servlet 上下文

> ID：12415263
> 
> 赞同：2
> 
> 时间：2012-09-13T21:48:10.863
> 
> 标签：jsp, url, jstl

我们正在编写使用 Spring MVC 的应用程序。`c:url`今天我在 .jsp 文件中发现了一些有趣的机智标签。

所以我争取终于到了知道这个标签做什么的时候了。

例如在这个页面上：http: [//heavyz.sourceforge.net/homepage/homepage_zh/comp/notes/jstl-core.html](http://heavyz.sourceforge.net/homepage/homepage_zh/comp/notes/jstl-core.html)我可以读到它做了这样的事情

> 附加当前 servlet 上下文的名称

和

> value 属性用于指定基本 URL，然后标记会根据需要对其进行转换。如果此基本 URL 以正斜杠开头，则将附加一个 servlet 上下文名称。可以使用 context 属性提供明确的上下文名称。如果省略此属性，则将使用当前 servlet 上下文的名称。

但我想知道这`current servlet context`件事，因为我的登录表单中有

```
 <form name='f' action="<c:url value='/j_spring_security_check' />"
    method='POST'>
    <fieldset>

        <div class="form_elem">
            <label for="j_username">Login: </label> <input type="text"
                name="j_username" value="" />
        </div>
        <div class="form_elem">
            <label for="j_password" accesskey="l">Hasło:</label> <input
                type="password" name="j_password">
        </div>
        <div class="form_elem">
            <label for="_spring_security_remember_me">Zapamiętaj mnie?</label> <input
                type='checkbox' name='_spring_security_remember_me'
                id="_spring_security_remember_me" value="true" />
        </div>
        <input name="submit" type="submit" value="Send" class="newline" />
    </fieldset>
    <a href="register">Register</a><br>
</form> 
```

你可以注意到附近的斜线`j_spring_security_check`，但在我没有这个斜线之前，当有人在注册后刷新时，他得到了登录页面，但是浏览器中的这个链接例如

```
localhost:8080/taboret/activateAccount/50555449564956495757565057535150535649494956565550554949565752545053505252485450 
```

如果现在发送了登录表单，它会被发送到`http://localhost:8080/taboret/activateAccount/j_spring_security_check`

但我在想这个 servlet 上下文只是`taboret`应用程序的名称。

那这`Prepending the name of the current servlet context`意味着什么？

# java - 无法让 Castor 的 MappingTool 工作

> ID：12415265
> 
> 赞同：1
> 
> 时间：2012-09-13T21:48:16.103
> 
> 标签：java, web-services, web, castor

我正在尝试使用该程序使用 Castor 1.3.2 自动生成映射文件。

但这是我得到的异常 - java.lang.IllegalArgumentException: No enum const class org.exolab.castor.mapping.xml.types.BindXmlNodeType.element

这是一个相当基本的测试，我做错了什么？

公共类 CastorMapping {

```
 public CastorMapping()
    {
        try
        {
            MappingTool tool = new MappingTool();
            tool.setInternalContext(new org.castor.xml.BackwardCompatibilityContext());
            tool.addClass(TestRequest.class);
            OutputStream file = new FileOutputStream("gen_mapping.xml" );
            Writer writer = new OutputStreamWriter(file);
            tool.write(writer);
        }
        catch (Exception ex)
        {
            ex.printStackTrace();
        }
    }

    public static void main(String[] args)
    {
        new CastorMapping();
    } 
```

}

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T23:25:05.517

我自己试过这个，我相信你做的一切都是正确的。

我浏览了 castor 源代码，据我所知，当他们将 BindXmlNodeType 重新设计为枚举类而不是常规类时，他们在 1.3 和 1.3.2 之间的某个地方破坏了 MappingTool。有一些代码他们正在寻找 BindXmlNodeType.element，但现在 BindXmlNodeType 是一个枚举，他们需要查找 ELEMENT（大写字母）。但我离题了...

如果您有能力恢复到 Castor 1.3，那么一切都应该正常。

顺便说一句 - 我试图升级到 1.3.3-rc1 但 Intellij 无法解决 maven 依赖项。例如 1.3.3-rc1 中的 castor-xml 现在依赖于 Spring！这个错误可能会在以后的版本中修复，但我不抱希望。

# android - 适用于 monodroid 的 Admob 6.1.0

> ID：12415267
> 
> 赞同：0
> 
> 时间：2012-09-13T21:48:19.633
> 
> 标签：android, xamarin.android, admob

我有一个用 monodroid 制作的应用程序，它正处于发布阶段（准备发布），但我希望我的应用程序有一个免费的广告支持版本。我一直在网上搜索有关在 monodroid 上实现 Admob 6.1.0 的教程，但没有任何运气。我不得不提一下，我以前从未使用过广告。

我想知道是否有人能够在 monodroid 上使用 Admob 6.1.0，如果您可以分享您的知识

我已经看过[这个](https://github.com/jamesmontemagno/MonoDroid-Admob6/tree/master/AdMob6Sample)源代码和[这个](http://www.gregshackles.com/2011/02/using-admob-in-a-monodroid-application/)教程，但我无法正确理解如何实现它。如果有人可以作为社区 wiki 提供答案，我会很好，这样它可以帮助其他人在 monodroid 中介绍 Admob

编辑：

逐步尝试了 Greg Shackles 示例，我现在收到此错误`android.view.InflateException: Binary XML file line #1: Error inflating class com.google.ads.AdView`。关于如何使其工作的任何建议？

编辑2：

更改了 XML 文件，现在出现 2 个新错误：`Java.Lang.NoClassDefFoundError`和`System.TypeInitializationException`. XML 看起来像这样：

```
<?xml version="1.0" encoding="UTF-8" ?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/Background2"
    >
  <com.google.ads.AdView android:id="@+id/ad"
                           android:layout_width="wrap_content"
                           android:layout_height="wrap_content"
                           ads:adSize="BANNER"
                           ads:adUnitId="AD_UNIT_ID_GOES_HERE"
                           ads:testDevices="TEST_EMULATOR,TEST_DEVICE_ID_GOES_HERE"
                           ads:loadAdOnCreate="true"/>
</RelativeLayout> 
```

adview 是这样调用的：

```
public class MyActivity : Activity
    {
        private View _adView;
        protected override void OnCreate (Bundle bundle)
        {
            base.OnCreate (bundle);
            SetContentView(Resource.Layout.AboutActivityLayout);
            AdMobHelper.RegisterEmulatorAsTestDevice();
            _adView = FindViewById(Resource.Id.Ad);
            AdMobHelper.RequestFreshAd(_adView);

            loadData();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T00:06:45.303

您收到的第一个错误“android.view.InflateException: Binary XML file line #1: Error inflating class com.google.ads.AdView”与 Jar Build Action 设置有关。

您应该首先检查两件事：

1.  jar 文件的 Build Action 属性设置为“AndroidJavaLibrary”
2.  名为“AdMobHelper.java”的 java 文件应将 Build Action 属性设置为“AndroidJavaSource”

在我看来，您现在遇到的错误与未正确配置为 AndroidJavaSource 的 java 文件有关。

# android - 英语旁边的android语音识别

> ID：12415268
> 
> 赞同：0
> 
> 时间：2012-09-13T21:48:20.990
> 
> 标签：android

使用谷歌翻译时，可以切换到俄语语音识别，但是如何在安卓手机中实现谷歌俄语语音引擎呢？

现在，我可以使用默认的谷歌英语语音引擎，有没有可能我可以选择不同的语言，比如日语、西班牙语、法语等。（我的意思是谷歌语音识别）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:48:54.187

调用识别器时设置[RecognizerIntent.EXTRA_LANGUAGE 。](http://developer.android.com/reference/android/speech/RecognizerIntent.html#EXTRA_LANGUAGE)

# c# - 在 XAML 中使用自定义选项在“ItemsControl”中显示用户控件

> ID：12415272
> 
> 赞同：0
> 
> 时间：2012-09-13T21:49:03.843
> 
> 标签：c#, xaml, mvvm, scrollviewer, winrt-xaml

我有一个`ItemsControl`输入`ScrollViewer`，我将我`ItemsPanel`的设置`ItemsControl`为水平`StackPanel`并将它绑定到`ObservableCollection`。`userControls`现在我想当用户点击`UserControls`我的打开图标时`ItemsControl`，自动`scrollviwer`偏移更改以显示点击的图标`UserControl`。（我的每个图标都有一个`usercontrols`）

而且当用户打开新`UserControl`的，我想我的`ItemsControl`自动显示它（现在当我打开一个新的`usercontrol`我应该滚动`ItemControl`到它），我可以用上面的控件来做到这一点，如果是，你能告诉我怎么做吗？如果没有，我很高兴告诉我应该使用哪些控件以及如何使用控件？

# jquery - JQVMap 点击功能

> ID：12415274
> 
> 赞同：4
> 
> 时间：2012-09-13T21:49:05.047
> 
> 标签：jquery, onclick, jqvmap

这是一个非常简单的问题，我不是网络专业人士。我需要创建一个交互式地图。我正在使用 JQVMap。现在我需要点击区域，它会回调一个状态的 URL。我正在给予和在网站中作为示例给出的功能。但我不知道如何设置与状态和 URL 的链接。

```
jQuery(document).ready(function() {
    jQuery('#vmap').vectorMap({
        map: 'usa_en',
        backgroundColor: '#ffffff',
        color: '#333333',
        hoverColor: '#af090f',
        selectedColor: '#0076a3',
        enableZoom: true,
        showTooltip: true,
        scaleColors: ['#C8EEFF', '#006491'],
        onRegionClick: function(element, code, region)
        {
            var message = 'You clicked "'
                + region 
                + '" which has the code: '
                + code.toUpperCase();

            alert(message);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T23:25:31.737

onRegionClick 回调包含构建动态 URL 所需的一切。它返回单击事件本身、代表您单击的区域的 2 位代码以及您单击的区域的全名。例如，如果您使用美国地图并单击科罗拉多州，您将返回 (regionClickEvent,'co','Colorado')

在第一个示例中，我在被点击的区域之外构建了一个动态 url，并将您重定向到那里。如果州名称或代码不会成为 URL 的一部分，您可以执行类似于第二个示例的操作，在该示例中检查单击了哪个区域并相应地处理它。

您将需要更新 URL 以特定于您的需求，但希望这能给您和想法。

*** * ex.使用区域动态构建 url * ***

```
$('#vmap')
    .vectorMap({
    map: 'usa_en',
    onRegionClick: function (event, code, region) {
        window.location.replace("http://geology.com/state-map/" + region.toLowerCase() + ".shtml");
    }
}) 
```

*** * ex.检查被点击的区域并根据其他一些规则重定向 * ***

```
$('#vmap')
    .vectorMap({
    map: 'usa_en',
    onRegionClick: function (event, code, region) {
        switch (code) {
        case "co":
            window.location.replace("http://www.google.com");
            break;
        case "ca":
            window.location.replace("http://www.yahoo.com");
            break;
        case "tx":
            window.location.replace("http://www.bing.com");
            break;
            }
        },
    onRegionOver: function (event, code, region) {
       document.body.style.cursor = "pointer";
        },
    onRegionOut: function (element, code, region) {
           document.body.style.cursor = "default";
        }
}) 
```

在更新的光标内容上...如果您不想在每个状态上都这样做，您可以像我们在 onRegionClick 上一样进行相同的检查，并检查代码并查看它是否是您想要显示该样式的状态光标上。
或者，如果您不想显示为可点击状态，您可以在事件像这样触发之前终止该事件。

```
onRegionOver: function (event, code, region) {
     if (code == "tx") 
          event.preventDefault();
     else 
          document.body.style.cursor = "pointer";
}, 
```

无论如何，希望这会有所帮助。

# scala - 不确定方法在 scala 类中如何工作

> ID：12415275
> 
> 赞同：2
> 
> 时间：2012-09-13T21:49:04.033
> 
> 标签：scala

我正在尝试理解以下类中的 add 方法，该方法取自《Scala 编程 - 第二版》一书。这是否正确：“add”方法定义了一个 Rational 类型的运算符。我不知道新 Rational 中发生了什么：

```
numer * that.denom + that.numer * denom,
denom * that.denom 
```

numer 和 denom 是如何在这里分配的？, 为什么每个表达式用逗号分隔？全班：

```
class Rational(n: Int , d: Int) {

  require(d != 0)

  private val g = gcd(n.abs, d.abs)
  val numer = n / g
  val denom = d/ g

  def this(n: Int) = this(n, 1)

  def add(that: Rational): Rational = 
    new Rational(
        numer * that.denom + that.numer * denom,
        denom * that.denom
        )

  override def toString = numer +"/" + denom

  private def gcd(a: Int, b: Int): Int = 
    if(b == 0) a else gcd(b, a % b)
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T21:56:27.550

这两个表达式是`Rational`构造函数的参数，因此它们将分别是`private val`s`n`和`d`。例如

```
class C(a: Int, b: Int)
val c1 = new C(1, 2) // here 1, 2 is like the two expressions you mention 
```

该`add`方法实现有理数加法：

```
 a     c     a*d     c*b     a*d + c*b
--- + --- = ----- + ----- = -----------
 b     d     b*d     b*d        b*d 
```

在哪里

```
 a = numer
 b = denom
 c = that.numer
 d = that.denom 
```

# java - 使用线程池将紧耦合方法转换为松耦合的优雅方法

> ID：12415276
> 
> 赞同：1
> 
> 时间：2012-09-13T21:49:06.600
> 
> 标签：java, multithreading, concurrency

1.  我想不出一个更好的标题，所以很感激编辑。
2.  我遇到的问题是，库公开的许多方法需要花费大量时间，因为它们会做很多脑力劳动或阻塞 I/O ......例如，当我要求 Solr 索引文档时。
3.  因此，为了解决这个问题，我最终要做的是编写包装器代码，该代码本质上是调用线程的 run() 方法中的方法。我启动工作线程以实现并行性，然后提取结果并将它们与原始调用进行比较。
4.  我突然想到有人可能想出了一个优雅的方法来做到这一点，基本上：

    1.  采取一种方法
    2.  获取某种工厂方法以将其转换为异步调用
    3.  此外，围绕它包装一个 ExecutorService，这样您就可以将调用排队并让一个工作线程池通过它。

假设我有一个像这样的课程：

```
public class SomeUtilClass {

  public int someComplicatedTask(int x, int y, int z) {
    // some very very complicated IO CPU bound task
  }

  // other equally lifting methods go here
} 
```

有没有一种优雅的方法可以在每个方法前面放置一个线程池和任务队列。

所以基本上我做这样的事情：

```
wrappedObject = EncapsulateWithThreadPoolAndTaskQueueFactory.wrap(SomeUtilClass,
    10 /*worker threads*/);

String ticket1=wrappedObject.asyncExecSomeComplicatedTask(1,2,3);
String ticket2=wrappedObject.asyncExecSomeComplicatedTask(4,5,6);
String ticket2=wrappedObject.asyncExecSomeComplicatedTask(7,8,9);

wrappedObject.joinOnTicket(ticket1); 
int result1=wrappedObject.getRestTicket(ticket1); 
```

等等……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T22:40:34.580

我们之前使用过`TaskFactory`带有回调的系统。也就是说，我们将它用于请求和响应，但它可以用于许多事情。基本上，你会有一个`TaskFactory`界面：

```
public interface TaskFactory<T, R> {
    Callable<R> taskFor(T t);
}

public interface Callback<R> {
    void onCallback(R r);
    void onException(Throwable t);
} 
```

对于请求/响应的东西，我们使用了一个实例`TaskFactory<Request, Response>`来为我们提供执行网络 I/O 并返回的对象的`Callable`实例：`Request``Response`

```
public class RequestTaskFactory implements TaskFactory<Request, Response> {
    public Callable<Response> taskFor(Request request) {
        return new RequestTask(request);
    }
} 
```

和任务：

```
class RequestTask implements Callable<Response> {
    private final Request request;

    public RequestTask(Request request) {
        this.request = request;
    }

    public Response call() {
        // Open socket
        // Send request
        // Receive response
        Response resp = getResponse(socket);
        return resp;
    }
} 
```

最后一个接口和类将它们联系在一起：

```
public interface TaskHandler<T, R> {

    TaskFactory<T, R> getTaskFactory();

    Future<R> submit(T t);

    void submit(T t, Callback<R> callback);
} 
```

如果您愿意，您还可以使用另一种方法在事件分派线程上执行回调`SwingUtilities.invokeLater`，以防您使用 Swing。实施：

```
public class TaskHandlerImpl<T, R> implements TaskHandler<T, R> {

    private final ExecutorService executor;
    private final TaskFactory<T, R> taskFactory;

    public TaskHandlerImpl(TaskFactory<T, R> taskFactory, int threadPoolSize) {
        this.taskFactory = taskFactory;
        this.executor = Executors.newFixedThreadPool(threadPoolSize);
    }

    public TaskFactory<T, R> getTaskFactory() {
        return taskFactory;
    }

    public Future<R> submit(T t) {
        return executor.submit(taskFactory.taskFor(t));
    }

    public void submit(T t, Callback<R> callback) {
        executor.execute(new CallbackTask(taskFactory.taskFor(t)
    }

    private static class CallbackTask<R> implements Runnable {
        private final Callback<R> callback;
        private final Callable<R> callable;

        CallbackTask(Callback<R> callback, Callable<R> callable) {
            this.callback = callback;
            this.callable = callable;
        }

        public void run() {
            try {
                callback.onCallback(callable.call());
            } catch (Exception ex) {
                callback.onException(ex);
            }
        }
    }
} 
```

然后，这几乎只是编写您的`TaskFactory`、`Callable`和`Callback`实现的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T02:38:10.767

除了我更一般的并发答案之外，另一个选择是使用 Java 的[`Proxy`](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Proxy.html)类。

假设您有一个类`Foo`，并且想要包装它，以便它将在后台线程中执行其所有方法。它有一个`doSomething`需要很长时间才能执行的方法。

```
public class Foo {

    public void doSomething() {
        // network I/O or something
        Thread.sleep(5000);
    }
} 
```

要使用`Proxy`，您需要一个接口。（请参阅[本教程](http://www.javaworld.com/jw-11-2000/jw-1110-proxy.html)。）从以下位置创建接口`Foo`：

```
public interface Foo {
    void doSomething();
} 
```

并让你的旧`Foo`类实现你的新接口：

```
public class FooImpl implements Foo { ... } 
```

Java`Proxy`需要两件事才能工作：接口（得到了）和[`InvocationHandler`](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/InvocationHandler.html). 这`InvocationHandler`是将在后台线程中执行方法的内容。

以下是我们如何`Proxy`使用 的实例创建`FooImpl`：

```
Foo foo = new FooImpl();
foo = (Foo) Proxy.newInstance(
        System.getClassLoader(),
        new Class[] { Foo.class },
        new BackgroundInvocationHandler(foo)); 
```

很简单，真的。现在我们只需要写`BackgroundInvocationHandler`：

```
public class BackgroundInvocationHandler implements InvocationHandler {

    private static final int THREAD_COUNT = 20;
    private static final Executor executor = Executors.newFixedThreadPool(THREAD_COUNT);

    private final Object obj;

    public BackgroundInvocationHandler(Object obj) {
        this.obj = obj;
    }

    public Object invoke(Object proxy, Method m, Object[] args) throws Throwable {
        executor.execute(new MethodInvoker(m, args, obj));
        return null;
    }

    private static class MethodInvoker implements Runnable {

        private final Method m;
        private final Object[] args;
        private final Object target;

        MethodInvoker(Method m, Object[] args, Object target) {
            this.m = m;
            this.args = args;
            this.target = target;
        }

        @Override
        public void run() {
            try {
                m.invoke(target, args);
            } catch(Exception e) {
                // TODO log me
            }
        }
    }
} 
```

正如我确定您可能预期的那样，这只适用于返回的方法`void`。该`Proxy`实例将返回`null`任何返回非`void`. 但是，您始终可以将其与回调或事件分派结合使用，以从这些东西中获取结果。请记住，这就像提交作业并离开它们，因此如果不实施某种回调系统，您将无法获得任何回报。

再说一句：如果您想确保*所有*对象都被包装，那么您需要一个工厂来创建`Foo`对象：

```
public class FooFactory {
    public static Foo createFoo() {
        Foo foo = new FooImpl();
        foo = (Foo) Proxy.newInstance(
                System.getClassLoader(),
                new Class[] { Foo.class },
                new BackgroundInvocationHandler(foo));
        return foo;
    }
} 
```

然后将`FooImpl`包设为私有，这样包外的任何人都无法通过`public`从类声明中删除来访问它：

```
class FooImpl implements Foo { ... } 
```

你去吧。这是包装对象以通过简单的方法调用进行后台调用的好方法。此代码将`doSomething`在后台执行并立即打印给定的语句：

```
Foo myFoo = FooFactory.createFoo();
myFoo.doSomething();
System.out.println("Prints immediately without waiting"); 
```

与我的其他答案相比，这更接近您想要的，但由于返回类型要求而受到更多限制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T23:17:15.980

*我更喜欢在实现它们的地方实现*方法的 Runnable 或 Callable 版本，而不是各种（并且可能是多个）客户端类对代码进行小包装，以鼓励用户（通过简化）异步使用它们。显然，这意味着您预计它们将被异步使用。你甚至可以传递参数。例如

```
public class Foo {

   public String someLongMethodA(Object...args) {
      // code that takes a long time here
      return someResult;
   }

   public Callable<String> callableLongMethodA(final Object...args) {
      return new Callable<String>() {
         @Override
         public String call() throws Exception {
            return someLongMethodA(args);
         }

      };
   }

   public Integer someLongMethod2(int loopCount) {
      // yet more long running code here
      return 42;  // the meaning of life
   }

   public Callable<Integer> callableLongMethod2(final int loopCount) {
      return new Callable<Integer>() {
         @Override
         public Integer call() throws Exception {
            return someLongMethod2(loopCount);
         }         
      };
   }  

} 
```

这远非完美，因为您正在编写大量样板代码。但这就是 Eclipse 模板的用途。此外，在某些情况下，您必须小心客户端在进行初始调用后不会更改参数。

# ios - 使用 Xcode 4.5 加载表视图控制器时在 iOS 6 设备上崩溃。通用汽车

> ID：12415277
> 
> 赞同：0
> 
> 时间：2012-09-13T21:49:17.287
> 
> 标签：ios, xcode, uitableview

我看到在 iOS 6 上发布了其他问题，所以我希望现在可以在这里问他们......

我正在测试使用 Xcode GM 4.5 构建的已发布应用程序。在运行 GM iOS 6 固件的设备上加载表视图控制器时发生崩溃。构建到运行 iOS 5.1 或 4.3.5 的设备时不会发生崩溃。我从下面包含的错误中推断（可能不正确），表视图的插座连接方式一定有问题，但它在 5.1 和 4.3.5 中工作，并且代码与 iOS 6 中发生的情况相同我不清楚出了什么问题。

我已经从设备中删除了以前版本的应用程序，重置它并清理了项目，但这无济于事。

我查看了发行说明，但没有看到任何指出需要在 iOS 6 中完成的工作。

错误是：

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '-[UITableViewController loadView] loaded the "XViewController" nib but didn't get a UITableView.' 
```

感谢任何关于我需要做什么来解决这个问题的指示。

- 附加信息：

（注：XViewController 实际上是应用程序中的 LogViewController。）

在类接口文件中，我将出口声明为：

```
@property (strong, nonatomic) IBOutlet UITableView *logTableView; 
```

在 xib 中，这里是 File's Owner 的连接检查器：

![在此处输入图像描述](../Images/d39b82f6ddb2e5ae84d9141004c5cbb7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T10:24:26.907

异常`[UITableViewController loadView] loaded the "XViewController" nib but didn't get a UITableView.`意味着您的“XViewController.xib”文件包含一个`UITableViewController`类（可能是它的文件所有者？），其`view`IBOutlet 绑定到`UITableView`.

**`UITableViewController`实例需要它们的`view`出口是一个`UITableView`**（或它的自定义子类之一，如果你创建了任何一个），而**不是`UIView`**像你捕获的任何其他类型的（即使它的子类中`UIView`包含一些或其他）。`UITableView`

# jquery - jQuery：图像突出显示

> ID：12415279
> 
> 赞同：1
> 
> 时间：2012-09-13T21:49:21.237
> 
> 标签：jquery

这可能是一个简单的解决方案，但我只是没有看到它。我很感激帮助。

我正在关注本指南：[http ://tympanus.net/codrops/2010/07/04/image-highlighting-preview/](http://tympanus.net/codrops/2010/07/04/image-highlighting-preview/)

指导演示：[http ://tympanus.net/Tutorials/ImageHighlighter/](http://tympanus.net/Tutorials/ImageHighlighter/)

这是我的代码（也在下面）：http: [//jsfiddle.net/Draven/Xa4f3/9/](http://jsfiddle.net/Draven/Xa4f3/9/)

多个问题：

*   它没有显示缩放、加载和关闭图标。
*   当您将鼠标从图像上移开时，叠加不会消失。
*   图像正在“缩略图”下加载。

HTML：

```
<img src="http://www.daysofthedead.net/los_angeles/images/guests/coming_soon_sunday_hover.png" alt="http://www.daysofthedead.net/los_angeles/images/guests/coming_soon_sunday_hover.png" class="ih_image" width="510" height="150">
<div id="ih_overlay" class="ih_overlay" style="display:none;"></div> 
```

CSS：

```
.ih_overlay{
    position:fixed;
    top:0px;
    left:0px;
    right:0px;
    bottom:0px;
    background:#000;
    z-index:10;
    opacity:0.9;
    filter:progid:DXImageTransform.Microsoft.Alpha(opacity=90);
}
img.ih_image{
    margin:10px 0px;
    position:relative;
    -moz-box-shadow:1px 1px 4px #000;
    -webkit-box-shadow:1px 1px 4px #000;
    box-shadow:1px 1px 4px #000;
    opacity:0.7;
    filter:progid:DXImageTransform.Microsoft.Alpha(opacity=70);
}
.ih_image_clone_wrap{
    position:absolute;
    z-index:11;
}
.ih_image_clone_wrap span.ih_zoom,
.ih_image_clone_wrap span.ih_loading,
.ih_image_clone_wrap span.ih_close{
    position:absolute;
    top:10px;
    right:10px;
    width:24px;
    height:24px;
    text-indent:-9000px;
    -moz-border-radius:6px;
    -webkit-border-radius:6px;
    border-radius:6px;
    opacity:0.8;
    cursor:pointer;
    -moz-box-shadow:1px 1px 2px #000;
    -webkit-box-shadow:1px 1px 2px #000;
    box-shadow:1px 1px 2px #000;
    z-index:999;
    filter:progid:DXImageTransform.Microsoft.Alpha(opacity=80);
}
.ih_image_clone_wrap span.ih_zoom{
    background:#000 url(http://www.daysofthedead.net/images/ih/zoom.png) no-repeat center center;
}
.ih_image_clone_wrap span.ih_loading{
    background:#000 url(http://www.daysofthedead.net/images/ih/loader.gif) no-repeat center center;
}
.ih_image_clone_wrap span.ih_close{
    background:#000 url(http://www.daysofthedead.net/images/ih/close.png) no-repeat center center;
}
.ih_image_clone_wrap img{
    opacity:0.7;
    -moz-box-shadow:1px 1px 10px #000;
    -webkit-box-shadow:1px 1px 10px #000;
    box-shadow:1px 1px 10px #000;
    filter:progid:DXImageTransform.Microsoft.Alpha(opacity=70);
}
.ih_image_clone_wrap img.ih_preview{
    opacity:1;
    position:absolute;
    top:0px;
    left:0px;
}​ 
```

JS：

```
/**
 * timeout to control the display of the overlay/highlight
 */
var highlight_timeout;

/**
 * user hovers one image:
 * create a absolute div with the same image inside,
 * and append it to the body
 */
$('img.ih_image').bind('mouseenter', function() {
    var $thumb = $(this);

    var $clone = $('<div />', {
        'id': 'ih_clone',
        'className': 'ih_image_clone_wrap',
        'html': '<img src="' + $thumb.attr('src') + '" alt="' + $thumb.attr('alt') + '"/><span class="ih_zoom"></span>',
        'style': 'top:' + $thumb.offset().top + 'px;left:' + $thumb.offset().left + 'px;'
    });

    var highlight = function() {
        $('#ih_overlay').show();
        $('BODY').append($clone);
    }
    //show it after some time ... 
    highlight_timeout = setTimeout(highlight, 700);

    /**
     * when we click on the zoom, 
     * we display the image in the center of the window,
     * and enlarge it to the size of the real image, 
     * fading this one in, after the animation is over.
     */
    $clone.find('.ih_zoom').bind('click', function() {
        var $zoom = $(this);
        $zoom.addClass('ih_loading').removeClass('ih_zoom');
        var imgL_source = $thumb.attr('alt');

        $('<img class="ih_preview" style="display:none;"/>').load(function() {
            var $imgL = $(this);
            $zoom.hide();
            var windowW = $(window).width();
            var windowH = $(window).height();
            var windowS = $(window).scrollTop();

            $clone.append($imgL).animate({
                'top': windowH / 2 + windowS + 'px',
                'left': windowW / 2 + 'px',
                'margin-left': -$thumb.width() / 2 + 'px',
                'margin-top': -$thumb.height() / 2 + 'px'
            }, 400, function() {
                var $clone = $(this);
                var largeW = $imgL.width();
                var largeH = $imgL.height();
                $clone.animate({
                    'top': windowH / 2 + windowS + 'px',
                    'left': windowW / 2 + 'px',
                    'margin-left': -largeW / 2 + 'px',
                    'margin-top': -largeH / 2 + 'px',
                    'width': largeW + 'px',
                    'height': largeH + 'px'
                }, 400).find('img:first').animate({
                    'width': largeW + 'px',
                    'height': largeH + 'px'
                }, 400, function() {
                    var $thumb = $(this);
                    /**
                     * fade in the large image. Replace the zoom with a cross,
                     * so the user can close the preview mode
                     */
                    $imgL.fadeIn(function() {
                        $zoom.addClass('ih_close').removeClass('ih_loading').fadeIn(function() {
                            $(this).bind('click', function() {
                                $clone.remove();
                                clearTimeout(highlight_timeout);
                                $('#ih_overlay').hide();
                            });
                        });
                        $thumb.remove();
                    });
                });
            });
        }).error(function() {
            /**
             * error loading image. Maybe show a message : 'no preview available'?
             */
            $zoom.fadeOut();
        }).attr('src', imgL_source);
    });
}).bind('mouseleave', function() {
    /**
     * the user moves the mouse out of an image.
     * if there's no clone yet, clear the timeout
     * (user was probably scolling through the article, and 
     * doesn't want to view the image)
     */
    if ($('#ih_clone').length) return;
    clearTimeout(highlight_timeout);
});

/**
 * the user moves the mouse out of the clone.
 * if we don't have yet the cross option to close the preview, then
 * clear the timeout
 */
$('#ih_clone').live('mouseleave', function() {
    var $clone = $('#ih_clone');
    if (!$clone.find('.ih_preview').length) {
        $clone.remove();
        clearTimeout(highlight_timeout);
        $('#ih_overlay').hide();
    }
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:04:22.983

我又看了看，有一个变化确实似乎产生了很大的不同。

进行克隆时，您指定了其中一项设置为
`'className': ih_image_clone_wrap',`

将其替换为：
`'class': 'ih_image_clone_wrap',`

查看完整代码：

```
var $clone = $('<div />', {
    'id': 'ih_clone',
    'class': 'ih_image_clone_wrap',
    'html': '<img src="' + $thumb.attr('src') + '" alt="' + $thumb.attr('alt') + '"/><span class="ih_zoom"></span>',
    'style': 'top:' + $thumb.offset().top + 'px;left:' + $thumb.offset().left + 'px;'
}); 
```

此外，如果您从评论中提到的原始标签中删除`width`和设置，图像大小差异将得到修复。`height``img`

如果您希望它为 510 x 150，只需将其应用于您的克隆，就可以了。

除非我弄错了，否则这似乎已经解决了所有问题：

*   它没有显示缩放、加载和关闭图标（已修复）
*   当您将鼠标从图像上移开时，覆盖不会消失（已修复）
*   图片正在“缩略图”下加载（已修复）

### [演示](http://jsfiddle.net/Xa4f3/26/)

希望这有帮助。

# php - 带有 rand() 和一个种子的随机数

> ID：12415280
> 
> 赞同：1
> 
> 时间：2012-09-13T21:49:29.847
> 
> 标签：php

我必须生成大量唯一键。一把钥匙应由 16 位数字组成。我想出了以下代码：

```
function make_seed()
{
    list($usec, $sec) = explode(' ', microtime());
    return (float) $sec + ((float) $usec * 100000);
}
function generate_4_digits(){
    $randval = rand(100, 9999);
    if($randval < 1000){
        $randval = '0'.$randval;
    }
    return (string)$randval;
}
function generate_cdkey(){
    return generate_4_digits() . '-' . generate_4_digits() . '-' . generate_4_digits() . '-' . generate_4_digits();
}

srand(make_seed());
echo generate_cdkey(); 
```

结果非常有希望，`6114-0461-7825-1604`. 然后我决定生成 10 000 个密钥，看看我得到了多少重复项：

```
srand(make_seed());
$keys = array();
$duplicates = array();
for($i = 0; $i < 10000; $i++){
    $new_key = generate_cdkey();
    if(in_array($new_key, $keys)){
        $duplicates[] = $new_key;
    }
    $keys[] = $new_key;
}
$keys_length = count($keys);
var_dump($duplicates);
echo '<pre>';
for($i = 0; $i < $keys_length; $i++){
    echo $keys[$i] . "\n";
}
echo '</pre>'; 
```

在第一次运行时，我得到了`1807`重复，这非常令人失望。但是对于接下来的每次运行，我都感到非常惊讶，我得到了相同数量的重复项！？当我仔细查看生成的密钥时，我意识到最后一个密钥与第一个`1807`密钥完全相同。所以我可以在`8193`没有一个重复的情况下生成？！如此接近 2^13？！我们可以得出结论`rand()`是否适合生成 maz 2^13 唯一数字？但为什么？

我更改了要使用的代码，`mt_rand()`即使生成 50 000 个密钥也没有重复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:04:01.813

在那里扔一些 uniquid() 。

[http://www.php.net/manual/en/function.uniqid.php](http://www.php.net/manual/en/function.uniqid.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T22:06:13.323

这可能是您正在寻找的更多内容。[openssl_random_pseudo_bytes ( int $length [, bool &$crypto_strong ] )](http://www.php.net/manual/en/function.openssl-random-pseudo-bytes.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T21:58:12.193

这可能与 srand 的行为有关。检查重复项时，您只对所有 10000 个键运行一次 srand 。也许 srand 只产生足够的 ~2^13 个键？您使用的是什么 PHP 版本？由于 4.2.0 srand 不再需要，但也许如果你调用它，它会自动停止脚本的其余部分。

# c# - 数据未从 jquery ajax 调用传递到我的 mvc4 控制器中的 actionresult 方法

> ID：12415281
> 
> 赞同：0
> 
> 时间：2012-09-13T21:49:41.610
> 
> 标签：c#, javascript, jquery, asp.net-mvc

当从 jquery 向我的控制器发送一个 json 对象时，数据被传递到该方法中，但由于某种原因为空。此外，我似乎无法在没有得到 404 的情况下发布数据，我被迫使用 get 方法。

我的 Javascript 和 jquery 调用如下所示：

```
var searchQuery = {

    'scope': 'global',
    'query': s
};
console.log(searchQuery);
$.ajax({
    type: "GET",
    url: "Search/SearchSite",
    contentType: "application/json; charset=utf-8",
    data: searchQuery,
    dataType: "json",
    success: function (msg) {
        $("#pageContent").html(msg);
    }
}); 
```

我的控制器如下所示：

```
[System.Web.Mvc.HttpGet]
public virtual ActionResult SearchSite(MyQuery query)
{
    string sendBack = "info to send:" + query.query;
    return Content(sendBack);
} 
```

我的课看起来像这样：

```
public class MyQuery
{
    /// <summary>
    /// Defines the scope of the search Global etc.
    /// </summary>
    public string scope { get; set; }
    /// <summary>
    /// Defines the search query
    /// </summary>
    public string query { get; set; }
} 
```

我已经尝试了一切简化，只是发送一个字符串，但由于某种原因也被取消了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T23:30:08.400

Action Method 中的参数与 MyQuery 属性之一之间存在冲突：它们都被命名为“query”。如果您重命名其中之一，您的代码将起作用。

```
public virtual ActionResult SearchSite(MyQuery myQuery)
{
     string sendBack = "info to send: " + myQuery.query;
     return Content(sendBack); 
} 
```

# c++ - 从向量到数组 c++

> ID：12415290
> 
> 赞同：-2
> 
> 时间：2012-09-13T21:50:36.353
> 
> 标签：c++, arrays, vector, signal-processing

我有 6 个函数来自使用大量向量的信号处理工具箱。由于我的 DSP 上的一些内存问题，我需要改用数组。有没有一种简单的方法可以将向量转换为数组以及所使用的函数，即插入、push_back、擦除等？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T21:53:22.283

您可以使用 c++ 向量元素存储在内存中连续的保证并使用

```
Type *array = &vector[0]; 
```

从向量中获取“指向数组的指针”。

# linux - 使用 dup2 复制手动管道时出现无法解释的行为

> ID：12415292
> 
> 赞同：1
> 
> 时间：2012-09-13T21:51:02.593
> 
> 标签：linux, posix, pipe, systems-programming, dup2

我有两组代码都试图执行类似`ls|grep pip` 一个有效的和一个无效的。

工作代码创建了 2 个子进程，每个子进程使用一个子进程来执行一个命令，另一个简单地尝试通过创建一个子进程来执行此操作。即在说孩子和父母中的grep中执行ls。这似乎不起作用。而且我似乎也没有任何错误。

有人可以告诉我问题是什么吗？它为什么存在？

不工作：

 `````
void runpipe()
{
    pid_t childpid;
    int fd[2];
    pipe(fd);
    int saved_stdout;
    int saved_stdin;
    saved_stdout=dup(STDOUT_FILENO);
    saved_stdin=dup(STDIN_FILENO);
    if((childpid=fork())==0)
    {
            dup2(fd[WRITE_END],STDOUT_FILENO);
            close(fd[WRITE_END]);
            execlp("/bin/ls","ls command","-l",NULL);

            dup2(STDOUT_FILENO,fd[1]);
            _exit(0);
    }
    else if(childpid>0)
    {

            dup2(saved_stdout,STDOUT_FILENO);
            dup2(fd[READ_END],STDIN_FILENO);
            close(fd[READ_END]);
            execlp("/bin/grep","grep","pip",NULL);
            wait();
            _exit(0);

    }
    else
    {
            printf("ERROR!\n");
    }
} 
````  `以下是代码：

在职的：

 `````
 int runpipe(){
    pid_t pid;
    int fd[2];

    pipe(fd);
    int i;
    pid=fork();

    if (pid==0) {

            printf("i'm the child used for ls \n");
            dup2(fd[WRITE_END], STDOUT_FILENO);
            close(fd[READ_END]);
            execlp("ls", "ls", "-al", NULL);
            _exit(0);
    } else {
            pid=fork();

            if (pid==0) {
                    printf("i'm in the second child, which will be used to grep\n");
                    dup2(fd[READ_END], STDIN_FILENO);
                    close(fd[WRITE_END]);
                    execlp("grep", "grep","pip",NULL);
            }
            else wait();
    }
    return 0;
} 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T22:03:28.880

在执行 grep 之前，父级需要关闭管道的写入端。出于某种原因，您的具有两个孩子的代码会关闭该文件描述符，但不会在只有一个孩子的代码中。您将打开几个描述符，但管道上的写入端是重要的。读取器（exec'd grep）将在管道写入端的所有副本都关闭之前完成。由于未能关闭它，grep 是保持它打开的那个，因此 grep 永远不会终止，而只是等待更多数据。````

# imagemagick - 有没有办法将 ImageMagick 传递给 RGBA 数组以将其渲染为图像？

> ID：12415294
> 
> 赞同：3
> 
> 时间：2012-09-13T21:51:05.603
> 
> 标签：imagemagick, imagemagick-convert

问题几乎说明了一切。

这个想法是生成程序PNG。我知道 imageMagick 的 '-fx' 运算符，但它很慢。

一种解决方法可能是将我的数组保存到 .bmp （这几乎只是保存它），然后使用 ImageMagick 将 .bmp 转换为 .png 但最好有更直接的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T03:03:59.393

为此，您可以利用 ImageMagick 的 TXT 图像格式。我无法告诉您有关性能的任何信息，您必须对其进行测试。

首先尝试以下方法：

```
convert  some-small.png  some-small-png.txt
convert  some-small.jpg  some-small-jpg.txt
convert  some-small.tif  some-small-tif.txt
[...] 
```

（这种转换也可能很慢。）

然后进行反向转换：

```
convert  some-small-png.txt  some-small-roundtripped.png
convert  some-small-png.txt  some-small-roundtripped.jpg
convert  some-small-png.txt  some-small-roundtripped.tif
[...] 
```

（这种转换应该更快。）

将初始 PNG、JPEG、TIFF 与往返的比较。

查看 *.txt 文件以了解其格式：

*   它是一个正式的文本描述，逐行枚举每个像素的坐标和相应的颜色值。
*   第一行是描述图像尺寸、深度和使用的色彩空间的标题。
*   另请注意，在每一行上`#`（描述相应颜色的十六进制值）之后的所有内容都不是必需的——您可以将其视为注释。此外，每行上所有剩余的空白都是可选的。

这意味着您可以重新组织您的 RGBA 数组，使其与 ImageMagick 的 TXT 图像格式匹配（正如我所说，您既不需要十六进制值也不需要友好的颜色名称），然后只需调用`convert`（在添加所需的标题行）。

* * *

## 更新

我给你举个例子。

这是极其简单的，去掉了空格、名称和颜色的#hex 值，2x2 像素 sRGBA 迷你图像由`2x2.txt`. 它的文件大小为 129 字节。

```
猫 2x2.txt
 # ImageMagick 像素枚举：2,2,65535,srgba
 0,0:(65535,0,0,65535)
 0,1:(0,65535,0,65535)
 1,0:(0,0,65535,65535)
 1,1:(0,0,0,0)

```

您将其转换为 PNG 图像：

```
convert  2x2.txt  2x2.png 
```

`2x2.png`是 293 字节。由于 2x2 像素的 PNG 太小而无法在网站上识别，我们可以转换为更大的图像：

```
convert 2x2.txt  -scale 10000%  200x200.png
convert 2x2.txt  -scale 1000%   20x20.png 
```

这 2 个 PNG 在网页上是可识别的：

![200x200.png](../Images/39736cfa957ec8fbd9d42782e5479f46.png)   ![20x20.png](../Images/e115e6ecf0c3534877d40d05875b3a53.png)

为了演示完整的格式（不去掉空格、名称或颜色的#hex 值），让我们创建相应的 20x20.txt 并查看它：

```
转换 20x20.png 20x20.txt

猫 20x20.txt
 # ImageMagick 像素枚举：20,20,255,srgba
 0,0: (255, 0, 0,255) #FF0000 红色
 1,0: (255, 0, 0,255) #FF0000 红色
 2,0: (255, 0, 0,255) #FF0000 红色
 3,0: (255, 0, 0,255) #FF0000 红色
 4,0: (255, 0, 0,255) #FF0000 红色
 5,0: (255, 0, 0,255) #FF0000 红色
 6,0: (255, 0, 0,255) #FF0000 红色
 7,0: (255, 0, 0,255) #FF0000 红色
 8,0: (255, 0, 0,255) #FF0000 红色
 9,0: (255, 0, 0,255) #FF0000 红色
 10,0: ( 0, 0,255,255) #0000FF 蓝色
 11,0: ( 0, 0,255,255) #0000FF 蓝色
     [……]
     [……]
     [……]
 7,19: ( 0,255, 0,255) #00FF00 石灰
 8,19: ( 0,255, 0,255) #00FF00 石灰
 9,19: ( 0,255, 0,255) #00FF00 石灰
 10,19: ( 0, 0, 0, 0) #00000000 无
 11,19: ( 0, 0, 0, 0) #00000000 无
 12,19: ( 0, 0, 0, 0) #00000000 无
 13,19: ( 0, 0, 0, 0) #00000000 无
 14,19: ( 0, 0, 0, 0) #00000000 无
 15,19: ( 0, 0, 0, 0) #00000000 无
 16,19: ( 0, 0, 0, 0) #00000000 无
 17,19: ( 0, 0, 0, 0) #00000000 无
 18,19: ( 0, 0, 0, 0) #00000000 无
 19,19: ( 0, 0, 0, 0) #00000000 无

```

# node.js - node-static 正在发送 .aspx 扩展内容作为下载

> ID：12415297
> 
> 赞同：0
> 
> 时间：2012-09-13T21:51:31.907
> 
> 标签：node.js, file-extension, node-static

我不确定如何使用 node-static 来处理 .aspx 文件。

我正在使用 node-static 来提供 .html .js .css 和图像（按预期工作），但是当我请求 test.aspx（公共文件夹中的文件）时，它会提示浏览器（Chrome 和 FF）当我希望将其视为 HTML (text/html) 时，将其作为文件下载。

节点代码真的很基础

```
var node_static = require('node-static');
var node_static_file = new(node_static.Server)('./public');
var http = require('http');
var server = http.createServer(function(req, res) { 
    // static file server 
    req.addListener('end', function () {
        node_static_file.serve(req, res, function (err, result) {
            if (err) { // There was an error serving the file
                res.writeHead(err.status, err.headers);
                res.write("Error: Page " + err.message + " (" + err.status + ")");
                res.end();
            }
        });
    });
}).listen(80); 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T22:04:16.757

这是因为 node-static 不知道是什么类型的文件`aspx`。目前看起来没有默认方法来扩展节点静态的矿类型。

您可以[在代码](https://github.com/cloudhead/node-static/blob/master/lib/node-static.js#L198)中看到，如果 mime 类型不存在，则 Content-Type 设置为`application/octet-stream`。快速破解将进入您的`node_modules`目录并编辑`lib/node-static/mime.js`文件并包含`aspx`扩展名并为其提供内容类型`text/html`.

# ios - 调整 PDF 页面大小的问题

> ID：12415298
> 
> 赞同：0
> 
> 时间：2012-09-13T21:51:36.627
> 
> 标签：ios, pdf, png

我需要将 PDF 文档页面转换为单独的 PNG 文件，但是在将足够大的 PDF 文档版本放入我的图形上下文时遇到了问题。无论我尝试哪种 PDF，页面总是大约 500 像素高。如何获得每个页面的更大版本（/更高质量）？

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *pdfPath = [documentsDirectory stringByAppendingPathComponent:[[_issue objectForKey:@"Issue"] lastPathComponent]];
NSURL *pdfFileUrl = [NSURL fileURLWithPath:pdfPath];
CGPDFDocumentRef pdf = CGPDFDocumentCreateWithURL((__bridge CFURLRef)pdfFileUrl);

CGPDFPageRef myPageRef = CGPDFDocumentGetPage(pdf, pageNumber);
CGRect aRect = CGPDFPageGetBoxRect(myPageRef, kCGPDFCropBox);
UIGraphicsBeginImageContext(CGSizeMake(2008 / (aRect.size.height / aRect.size.width), 2008));
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSaveGState(context);
CGContextTranslateCTM(context, 0.0, aRect.size.height);
CGContextScaleCTM(context, 2.0, -1.0);

CGContextSetGrayFillColor(context, 1.0, 1.0);
CGContextFillRect(context, aRect);

CGPDFPageRef page = CGPDFDocumentGetPage(pdf, pageNumber);
CGAffineTransform pdfTransform = CGPDFPageGetDrawingTransform(page, kCGPDFMediaBox, aRect, 0, true);

CGContextConcatCTM(context, pdfTransform);
CGContextSetInterpolationQuality(context, kCGInterpolationHigh);
CGContextSetRenderingIntent(context, kCGRenderingIntentDefault);
CGContextDrawPDFPage(context, page); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:26:17.790

正如 iPDFdev 在评论中回答的那样，可以在这里找到解决方案：[Best way to convert PDF to high-resolution image in Cocoa](https://stackoverflow.com/questions/7661479/best-way-to-convert-pdf-to-high-resolution-image-in-cocoa)

# ember.js - 在 EmberJS 车把模板中迭代模型的属性

> ID：12415299
> 
> 赞同：3
> 
> 时间：2012-09-13T21:51:39.017
> 
> 标签：ember.js, handlebars.js, ember-data

有没有办法在 EmberJS 中迭代视图的上下文属性？我正在为 ORM 使用 Ember-Data (https://github.com/emberjs/data)。

假设我使用 connectOutlets 向具有电子邮件、姓名等属性的用户注册 UserView。在连接的 Handlebars 模板中，无论如何我可以遍历这些属性吗？

我基本上需要构建一个可以与不同模型重用的通用视图......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T15:17:35.470

Ryan 对属性的看法是正确的，但实际上需要做一些事情才能真正达到目标。我这里的例子是使用最新的 RC1 Ember。

这是一个与模型无关的编辑器模板：

```
<script type="text/x-handlebars" data-template-name="edit_monster">
    {{#if clientId}}
    <h1>Edit Monster: {{name}}</h1>
    <div>
        {{#each metadata}}
            <span class="edit-label">{{name}}</span>
            <span class="edit-field">
                {{view App.AutoTextField typeBinding="type" nameBinding="name" }}
            </span>
        {{/each}}
    </div>
    {{else}}
    No monster selected.
    {{/if}}  
</script> 
```

为了完成这项工作，我们需要一些魔法魔法。这个控制器是一个好的开始：

```
App.EditMonsterController = Em.ObjectController.extend({
    metadata: function() {
        var vals = [];
        var attributeMap = this.get('content.constructor.attributes');
        attributeMap.forEach(function(name, value) {
             vals.push(value);   
        });
        return vals;
    }.property('content')

}); 
```

它使用 Ryan 提到的“属性”属性来提供元数据，我们将这些元数据输入到模板中的 #each 中！

现在，这是一个我们可以用来提供文本输入的视图。需要一个外部容器视图来将 valueBinding 输入到实际的文本字段中。

```
App.AutoTextField = Ember.ContainerView.extend({
    type: null,
    name: null,

    init: function() {
        this._super();
        this.createChildView();
    },
    createChildView: function() {
         this.set('currentView', Ember.TextField.create({
                    valueBinding: 'controller.' + this.get('name'),
                    type: this.get('type')
                }));   
    }.observes('name', 'type')
}); 
```

这是一个展示整个疯狂事物的小提琴：http: [//jsfiddle.net/Malkyne/m4bu6/](http://jsfiddle.net/Malkyne/m4bu6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T01:33:44.477

代表模型的 Ember Data 对象具有`attributes`包含给定模型的所有属性的属性。这就是 Ember Data`toJSON`用来将您的模型转换为 Javascript 对象的方法。

您可以使用此 attributes 属性来读取模型属性，然后将这些特定属性从实例中提取出来。这是一个例子。

[http://jsfiddle.net/BdUyU/1/](http://jsfiddle.net/BdUyU/1/)

只是重申这里发生了什么。我们从 App.User 读取属性，然后从 App.ryan 和 App.steve 中提取值。希望这是有道理的。

# api - 雅虎 api 时区

> ID：12415301
> 
> 赞同：1
> 
> 时间：2012-09-13T21:51:48.490
> 
> 标签：api, yahoo

我如何从 yahoo api 接收接收日期时间的特定时区？

什么是默认时区？

[http://hk.finance.yahoo.com/d/quotes.csv?e=.csv&f=sl1d1t1&s=USDHKD=x](http://hk.finance.yahoo.com/d/quotes.csv?e=.csv&f=sl1d1t1&s=USDHKD=x)

[http://finance.yahoo.com/d/quotes.csv?e=.csv&f=sl1d1t1&s=USDHKD=x](http://finance.yahoo.com/d/quotes.csv?e=.csv&f=sl1d1t1&s=USDHKD=x)

接收时间相同

```
private String GetRequest() throws ClientProtocolException, IOException{
    HttpClient httpClient = new DefaultHttpClient();
    HttpContext localContext = new BasicHttpContext();
    HttpGet httpGet = new HttpGet("http://finance.yahoo.com/d/quotes.csv?e=.csv&f=sl1d1t1&s=USDHKD=x");
    HttpResponse response = httpClient.execute(httpGet, localContext);

    BufferedReader reader = new BufferedReader(
        new InputStreamReader(
          response.getEntity().getContent()
        )
      );

    String line;
    while ((line = reader.readLine()) != null) {
         String[] RowData = line.split(",");
         String value = RowData[1];//value = qoute
         String date = RowData[2].replaceAll("\"", "");
         String time = RowData[3].replaceAll("\"", "");
         tvDateTimeValue.setText(date+"\t"+time);
         return value;
    }
    return "";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-28T06:05:29.033

看起来是`America/New_York`时区。

这些人也这么认为（虽然不确定他们的信息来源是什么）

[http://www.kksou.com/php-gtk2/Joomla-Gadgets/Yahoo-Stock-Quote-AJAX-version.php](http://www.kksou.com/php-gtk2/Joomla-Gadgets/Yahoo-Stock-Quote-AJAX-version.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T21:54:37.787

看起来该值*始终*以 UTC 给出。这对我来说似乎完全合理。特别是，它从不模棱两可，从不受到历史变化等的影响。

如果要显示特定时区的数据，请自行执行转换。（我会给出示例代码，但您没有指定如何访问 API，例如您使用的是哪种语言。）

# templates - 在 iframe 中显示的 Joomla 模板

> ID：12415303
> 
> 赞同：0
> 
> 时间：2012-09-13T21:52:08.407
> 
> 标签：templates, iframe, joomla

我有一个网站需要 iframe 才能将预订小部件插入到 Joomla 文章中。我在文章中显示 iframe 没有问题，但问题是模板也在文章中显示。就好像 iframe 也将整个网站包裹在文章中一样。我只需要显示预订小部件。你可以在这里看到它[http://www.archersinn.com/reservations](http://www.archersinn.com/reservations)。预订小部件是我的客户使用的第三方，所以我只需要弄清楚如何正确显示它。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T23:07:15.213

iframe 指向[https://secure.rezovation.com/Reservations/CheckAvailability.aspx?s=w36FN02v7M&type=raw](https://secure.rezovation.com/Reservations/CheckAvailability.aspx?s=w36FN02v7M&type=raw)但该网站已为您制作了自定义模板，以便与您网站的外观和感觉相匹配。

所以它根本不应该是一个 iframe。只需将 Reservation 按钮的 URL 更改为以下内容，您应该可以排序：[https ://secure.rezovation.com/Reservations/CheckAvailability.aspx?s=w36FN02v7M&type=raw](https://secure.rezovation.com/Reservations/CheckAvailability.aspx?s=w36FN02v7M&type=raw)

许多预订系统都是这样做的。他们在自己的系统上拥有预订引擎，并在交易结束时重定向回您的网站。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T23:00:41.947

您可以在 joomla url 的末尾仅显示使用此参数的组件

```
?tmpl=component 
```

[http://www.archersinn.com/reservations?tmpl=component](http://www.archersinn.com/reservations?tmpl=component)

但是您需要在此页面之前执行此操作。

在页面中，您插入您的预订代码，您有来自 Joomla 的风格，但不是 joomla，我是对的吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T23:02:52.513

在您的`iframe`情况下，您正在调用外部网页。如果您可以控制外部小部件网站的外观，您可以将该页面配置为看起来像您当前的页面 - [http://www.archersinn.com/reservations](http://www.archersinn.com/reservations)，并带有介绍和标题等。

`reservations`您可以考虑将菜单项指向外部站点 - [https://secure.rezovation.com/Reservations/CheckAvailability.aspx?s=H4LUxh0dk0&type=raw](https://secure.rezovation.com/Reservations/CheckAvailability.aspx?s=H4LUxh0dk0&type=raw) ，而不是将菜单项链接到您网站内的文章。将菜单项类型更改为`External Link`并设置为在父窗口中打开它。

# php - 我应该在 PHP 中使用 var 关键字吗？

> ID：12415306
> 
> 赞同：1
> 
> 时间：2012-09-13T21:52:21.917
> 
> 标签：php

我刚刚查看了我的代码，我意识到我从未使用过

```
var 
```

但是我读了

[http://www.php.net/manual/en/keyword.class.php](http://www.php.net/manual/en/keyword.class.php)

似乎说应该使用var。

```
<?php
class Cart {
    var $items;  // Items in our shopping cart
     ....blah
}
?> 
```

在这个例子中，隐私是 var 设置的。

出于我的目的，我通常会这样做：

```
private $some_var;
public $some_var;
protected $some_var; 
```

什么是最佳实践？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T21:54:03.800

var 与 public 相同。但是大多数现代编码标准更喜欢“公共”而不是 var。

但是，根本没有真正的区别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T21:58:17.413

PHP4 使用了 var。php4 与 php5 一样具有对象，但 php5 在处理和扩展对象方面做得更好。我知道的 php5 中的任何表达式都不需要 Var。他们继续允许使用它，因为他们必须允许 php4 中的旧代码在 php5 上运行。

在 php5 中，您对所有对象变量使用 public、private、protected。我相信 VAR 和 public 在技术上是一回事， var 将被视为公共变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T21:54:04.257

`var`是php4*唯一*的事情。对于所有 php5 代码，您需要使用适当的可见性范围关键字。

# c# - 自动迁移播种和 AddOrUpdate 不匹配，总是添加

> ID：12415307
> 
> 赞同：2
> 
> 时间：2012-09-13T21:52:24.057
> 
> 标签：c#, entity-framework

我有一个具有以下流畅 API 配置的 Sessions 对象

```
HasMany(s => s.Enrollments);
HasRequired(s => s.Course).WithMany(c => c.Sessions).HasForeignKey(s => s.CourseId);
HasRequired(s => s.Teacher).WithMany(t => t.Sessions).HasForeignKey(s => s.TeacherId);
HasRequired(s => s.Term).WithMany(t => t.Sessions).HasForeignKey(s => s.TermId); 
```

我正在尝试使用以下内容播种我的数据（我在 AddOrUpdate 之前查询每个 thisCourse、currentTerm、smith 对象）

```
context.Sessions.AddOrUpdate(s => new { s.CourseId, s.TermId, s.TeacherId },
  new Session { Course = thisCourse, Term = currentTerm, Teacher = smith}
); 
```

这总是导致添加：

```
<new id>   1   1   1 
```

我不知道为什么我的匹配条件失败了，这没有正确更新，但总是在添加。

# javascript - XML 使用 jQuery 解析选定的元素

> ID：12415309
> 
> 赞同：0
> 
> 时间：2012-09-13T21:52:30.570
> 
> 标签：javascript, xml, jquery, xml-parsing

我需要一点帮助来解析我的 XML。XML如下：

```
 <?xml version="1.0"?>
<config>
    <game title="Dementia">
            <cat>
                <catTitle>Mild</catTitle>
                <item>mild-1</item>
                <item>mild-2</item>
                <item>mild-3</item>
            </cat>
            <cat>
                <catTitle>Moderate</catTitle>
                <item>Moderate-1</item>
                <item>Moderate-2</item>
                <item>Moderate-3</item>
            </cat>
            <cat>
                <catTitle>Severe</catTitle>
                <item>Severe-1</item>
                <item>Severe-2</item>
            </cat>
    </game>

    <game title="Risks">
        <cat>
            <catTitle>Low</catTitle>
            <item>Low-1</item>
            <item>Low-2</item>
            <item>Low-3</item>
        </cat>
        <cat>
            <catTitle>Medium</catTitle>
            <item>Medium-1</item>
            <item>Medium-2</item>
            <item>Medium-3</item>
        </cat>
        <cat>
            <catTitle>High</catTitle>
            <item>High-1</item>
            <item>High-2</item>
        </cat>
    </game>

</config> 
```

正如您在此配置文件中看到的，有两个“游戏”。每个都有自己的标题属性。我设法选择了这些属性并将它们添加到一个下拉菜单中，用户可以从中选择他们想要玩的游戏。

我的问题是，目前当我解析文档时，它会解析两种游戏，而不仅仅是我想要的游戏。

目前我的代码是：

```
$(xml).find("cat").each(function(idx, v) {
        categoryArrays[idx] = [];

        $(v).find("catTitle").each(function(){

            //$(xml).find('title:contains("Dimentia")').each(function(){
            numberofCategories = numberofCategories+1;
            tmpCategory = $(this).text();
            categoryNames.push(tmpCategory);

            var $cat = $('<div id=catPileBox>' +
                            '<div class="catPileBoxTitle font">' + tmpCategory + '</div>' +
                            '<div class="catPileBoxBody font"> </div>' +
                        '</div>')
                    .fadeIn('slow').appendTo('#catPile').attr('categoryName', tmpCategory).attr('categoryNum', idx).droppable({
                containment: '#content',
                stack: '#catPileBox',
                cursor: 'move',
                drop: handleDropEvent
            });
        });

        //ITEM PARSING
            $(v).find("item").each(function( i , vi) {
                categoryArrays[idx].push( $(vi).text() );

                numberofItems = numberofItems+1;
                tmpItem = $(this).text();

                //Add Item to Array
                itemNames.push(tmpItem);

                       //UI CREATION and Atrribute setting
                        var $item = //$('<div id=itemPileBox div class=font >' + tmpItem + '</div>')

                $('<div id=itemPileBox>' +
                        '<div class="itemPileBoxPic"><img src="icon.jpg"></div>'+
                        '<div class="itemPileBoxTitle font">' + tmpItem + '</div>' +
                        '<div class="itemPileBoxBody font">Having a fit and going mental</div>' +
                        '</div>')

                                .fadeIn('slow').appendTo('#itemPile').attr('itemName', tmpItem).attr('categoryNum', categoryArrayNum).draggable({
                            containment: '#content',
                            stack: '#itemPileBox',
                            cursor: 'move',
                            revert: true
                        });

                        console.log("Item Created: " + tmpItem + " // Item's Category:" + categoryArrayNum) ;

            });

        console.log('-- Category Array Num: ' + categoryArrayNum + ' contains: ' + categoryArrays[categoryArrayNum]);
        categoryArrayNum++;
        });

      $(shuffleItems());
      console.log("// ITEMS ASSIGNED TO CATEGORIES");

    } 
```

我知道，在开始时，我需要添加一些内容，以查找与组合框中选择的标题匹配的游戏属性。

*如果有人能告诉我如何选择或有选择地解析文档中“游戏标题=痴呆”的部分并忽略任何其他游戏（及其孩子），我可以更改所有变量以匹配组合框中的变量。 .*

**感谢您的时间，并提前感谢！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:05:27.967

假设您有一个 XMLDoc，您可以这样做：

```
$(xml).find("game[title=Dementia] cat").each(... 
```

获取具有标题的`cat`元素下的所有元素。`game``Dementia`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T22:08:16.707

试试这个代码：

```
var xmlDoc = $.parseXML('<?xml version="1.0"?><config>     <game title="Dementia">             <cat>                 <catTitle>Mild</catTitle>                 <item>mild-1</item>                 <item>mild-2</item>                 <item>mild-3</item>             </cat>             <cat>                 <catTitle>Moderate</catTitle>                 <item>Moderate-1</item>                 <item>Moderate-2</item>                 <item>Moderate-3</item>             </cat>             <cat>                 <catTitle>Severe</catTitle>                 <item>Severe-1</item>                 <item>Severe-2</item>             </cat>     </game>      <game title="Risks">         <cat>             <catTitle>Low</catTitle>             <item>Low-1</item>             <item>Low-2</item>             <item>Low-3</item>         </cat>         <cat>             <catTitle>Medium</catTitle>             <item>Medium-1</item>             <item>Medium-2</item>             <item>Medium-3</item>         </cat>         <cat>             <catTitle>High</catTitle>             <item>High-1</item>             <item>High-2</item>         </cat>     </game>  </config>' )
console.log($(xmlDoc ).find("game[title=Dementia]"))​ 
```

这是[jsfiddle](http://jsfiddle.net/6M5Uh/1/)

# c - C中的列表维护问题

> ID：12415310
> 
> 赞同：-1
> 
> 时间：2012-09-13T21:52:33.033
> 
> 标签：c, list, driver

假设我正在为设备编写驱动程序。有寄存器列表（A）需要在一些程序（B）中专门处理。一段时间后，有些人可能会发现某些寄存器（C）的值需要根据不同的情况进行更改（例如对于无线网卡，情况可能是不同的信道）。但是如果他们决定这样做，他们还需要将此寄存器（C）添加到列表（A）中，以便例程（B）也可以专门处理寄存器（C）。

所以问题是这种类型的寄存器在开发的早期阶段可能会发现很多或经常发现。我想知道是否有很好的方法来保持这一点。

我正在考虑静态维护它并在某些程序员在寄存器上执行某些操作时忘记与列表同步时引发编译错误。但这看起来是一个糟糕的选择（http://stackoverflow.com/questions/12412742/how-to-throw-a-compiling-error-in-c）

要动态维护这样的列表（A），对于驱动程序来说可能太重了......有什么提示吗？

让我将讨论限制在使用 gcc 编译器的 linux 驱动程序上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T21:55:50.763

您可以让驱动程序维护列表并使用 ioctl 调用添加或删除项目。

这会很糟糕。

# html - 从 CSS3 的 scaleY 变换中恢复空间

> ID：12415311
> 
> 赞同：3
> 
> 时间：2012-09-13T21:52:38.363
> 
> 标签：html, css, transform

我在一个 div 上做一个 scaleY，虽然它在视觉上按照我想要的方式工作，但页面仍然表现得像它的原始高度。我正在缩小它，并且不希望它上方和下方有空白。我知道我可能可以将它与负边距或其他东西一起破解，但我想知道是否有更好的方法，比如我不知道让页面自然塌陷到转换后释放的空间中。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:45:06.010

CSS 变换不会改变页面的布局，因此所有带有变换的元素都会占用与没有变换的元素一样多的空间。这就是转变的美妙之处。如果要缩小元素并更改页面，则需要在元素上使用高度 CSS。

# concurrency - Clojure 中的死简单 Fork-Join 并发

> ID：12415316
> 
> 赞同：6
> 
> 时间：2012-09-13T21:53:14.173
> 
> 标签：concurrency, clojure, future

我有两个独立的昂贵功能。我想并行运行它们。我不想处理期货等（我是 Clojure 的新手，很容易混淆）。

我正在寻找一种同时运行两个功能的简单方法。我希望它像下面这样工作

```
(defn fn1 [input] ...) ; costly
(defn fn2 [input] ...) ; costly

(let [[out1 out2] (conc (fn1 x) (fn2 y))] ...) 
```

我希望它返回一个带有一对输出的向量。它应该只在两个线程都终止后才返回。理想情况下， conc 应该适用于任意数量的输入。我怀疑这是一个简单的模式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T22:48:03.900

在 Clojure 中使用期货非常容易。无论如何，这是一个避免它们的答案

```
(defn conc [& fns]
  (doall (pmap (fn [f] (f)) fns))) 
```

`pmap`在后台使用期货。`doall`将强制序列进行评估。

```
(let [[out1 out2] (conc fn1 fn2)]
        [out1 out2]) 
```

请注意，我解构`out1`并`out2`试图保留您的示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T00:10:13.230

您确实需要一个宏来保留所需的语法，尽管还有其他方法可以获得相同的行为，正如其他答案所示。这是一种方法：

```
(defn f1 [x] (Thread/sleep 500) 5)
(defn f2 [y] 2)

(defmacro conc [& exprs]
  `(map deref
        [~@(for [x# exprs] `(future ~x#))]))

(time (let [[a b] (conc (f1 6) (f2 7))]
       [a b]))
; "Elapsed time: 500.951 msecs"
;= (5 2) 
```

扩展显示了它是如何工作的：

```
(macroexpand-1 '(conc (f1 6) (f2 7)))
;= (clojure.core/map clojure.core/deref [(clojure.core/future (f1 6)) 
;=                                       (clojure.core/future (f2 7))]) 
```

您指定了两个函数，但这应该适用于任意数量的表达式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T22:49:22.730

我知道您不希望您的最终解决方案公开期货，尽管说明如何使用期货进行此操作很有用，然后将它们包装在隐藏此细节的东西中：

```
core> (defn fn1 [input] (java.lang.Thread/sleep 2000) (inc input))
#'core/fn1                                                                                     
core> (defn fn2 [input] (java.lang.Thread/sleep 3000) (* 2 input))
#'core/fn2                                                                                     
core> (time (let [f1 (future (fn1 4)) f2 (future (fn2 4))] @f1 @f2))
"Elapsed time: 3000.791021 msecs" 
```

然后我们可以将它包装在围绕期货的许多 clojure 包装器中。最简单的只是一个函数，它接受两个函数并并行运行它们。

```
core> (defn conc [fn1 fn2] 
         (let [f1 (future (fn1)) 
               f2 (future (fn2))] [@f1 @f2]))
#'core/conc                                                                                    
core> (time (conc #(fn1 4) #(fn2 4)))
"Elapsed time: 3001.197634 msecs" 
```

这避免了将其编写为宏的需要，方法是让 conc 将函数运行而不是主体进行评估，然后通过将调用放在`#`调用前面来创建要传递给它的函数。

这也可以用 map 和 future-call 来编写：

```
core> (map deref (map future-call [#(fn1 4) #(fn2 42)]))
(5 84) 
```

然后你可以改进 conc 直到它看起来像（正如 Julien Chastang 明智地指出的那样）`pmap`

# javascript - 如果单击 img src 包含特定文本

> ID：12415318
> 
> 赞同：6
> 
> 时间：2012-09-13T21:53:20.890
> 
> 标签：javascript, jquery

大家好，如果点击了img src，我如何检查是否包含特定文本，然后执行某些功能？

例子：

`<img src="file:///C:/path/img4-dog.jpg">, <img src="file:///C:/path/img4-cat.jpg">`

如果单击 img src 包含类似的“狗”，则运行警报？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-13T21:55:38.700

```
$('img').click(function(){
   if (this.src.indexOf("dog") != -1) 
      alert('contains dog');
}) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-13T21:55:12.733

```
$('img').click(function(e) {

    if ($(this).attr('src').indexOf('dog') != -1) {
        alert('this contains dog');
    } 

}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-13T21:56:54.643

尝试这个

```
$('img').click(function(){
   if($(this).attr('src').toLowerCase().indexOf("dog") >= 0){
       alert('text found');
     }
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-13T21:55:08.440

```
$('img').click(function(){
    if($(this).attr('src').indexOf('img4-dog') >= 0) alert('found');
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-13T22:01:09.643

```
$('img').on('click', function() {
    var imgsrc = $(this).attr('src');
   // Use a regular expression to find a match
    var test = imgsrc.search(/dog/);
    if (test > -1) {
      // do something
    }
}); 
```

# javascript - 简写javascript中的多个动作

> ID：12415320
> 
> 赞同：2
> 
> 时间：2012-09-13T21:53:28.443
> 
> 标签：javascript, shorthand

嗨，我想知道如果在简写 javascript 中满足条件，是否有运行多个函数或方法的好方法。

我试过这个，但不起作用：

```
!gameView?launchFull(); alert('action 2'):returnView(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T22:02:33.767

你能做到吗？是的。
工作示例

```
var x = true;
!x?(alert('true 1'),alert('true 2')):(alert('false 1'),alert('false 2')); 
```

注意各部分周围的括号。

但是，你应该这样做吗？**不**。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-13T21:55:19.930

> 如果有好的方法

不。

三元运算符是执行简单“If A x = y ELSE x = z”的好方法。试图超越这一点是制造难以理解的混乱的好方法。

使用适当的`if { } else { }`.

可读性*远比*简短更有价值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T21:58:07.467

你可以这样做。

> 函数 m() {alert("我是 M");}
> 
> 函数 k() {alert("我是 K");}
> 
> 函数 l() {alert("我是 L");}
> 
> m.call();
> 
> 变量函数 = 1===1 ？升：k；
> 
> 函数调用（）；

Func 将作为委托工作，并且在进行调用时，它将具有与变量关联的函数

# sql - SQL将日期时间格式更改为特定样式

> ID：12415322
> 
> 赞同：1
> 
> 时间：2012-09-13T21:53:46.857
> 
> 标签：sql, database, tsql

我正在尝试将日期时间值转换为特定格式，但没有任何样式代码似乎符合我的要求。我尝试了有关样式代码的 SQLUSA 帖子，但没有一个是完全正确的。

我有一列将日期/时间存储为**yyyy-mm-dd hh:nn:ss （24 小时制）**

我有一个选择声明，如果我想使用此列，但将日期表示为：**mm/dd/yyyy hh:nn:ss AM/PM**

我最接近的是：

```
CONVERT(varchar,[datetimecolum],22) AS [newcolumnname] 
```

但这只会给我一个 2 位数的年份，而不是一个世纪年（yyyy）。

有任何想法吗？我完全迷路了。:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T22:07:48.473

首先，日期时间字段不是以特定的字符串格式存储的，而是作为序列号存储的。因此，您在屏幕上看到的不是存储的内容，而是您的数据库工具对日期的默认呈现。其次，你为什么要在 SQL 中这样做？如果您将值传递给应用程序，请从本机类型进行转换。第三，我认为 22 不是 TSQL 中的有效转换代码。检查[http://msdn.microsoft.com/en-us/library/ms187928.aspx](http://msdn.microsoft.com/en-us/library/ms187928.aspx)，了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T21:59:16.333

来自：http: [//msdn.microsoft.com/en-us/library/ms187928.aspx](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

从列出的所有其他格式来看，它会推断只需在格式编号上添加 100 即可获得“与世纪”（yyyy）。

虽然根据文档（和我的测试）没有格式 22（或 122） - 所以你必须结合其他两种格式才能得到你需要的：

`CONVERT(varchar,[datetimecolum],101) + ' ' + CONVERT(varchar,[datetimecolum],108) AS [newcolumnname]`

[SQLFiddle 演示](http://sqlfiddle.com/#!3/639b4/6)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T22:46:07.107

我认为这样做

```
 select stuff(convert(varchar(20),getdate(),22),7,2,
  CAST( DATEPART(yyyy,getdate()) as CHAR(4))) 
```

这很接近，但没有 AM PM

```
 select convert(varchar(100),getdate(),22), 
   + ' ' + CAST(DATEPART(mm,getdate()) as CHAR(2))
   + '/' + CAST( DATEPART(dd,getdate()) as CHAR(2))
   + '/' + CAST( DATEPART(yyyy,getdate()) as CHAR(4))
   + ' ' + CAST(DATEPART(HH,getdate()) as CHAR(2))
   + ':' + CAST(DATEPART(mi,getdate()) as CHAR(2))
   + ':' + CAST(DATEPART(ss,getdate()) as CHAR(2)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T22:07:57.443

这比我原来的更笨重，但它有效，除了你不会在几小时或几分钟内得到前导零。您也可以修改此代码以执行此操作，但那样会变得非常混乱，所以我把它留给您 ;-)

换句话说，如果日期 + 时间是

2012 年 3 月 1 日晚上 10:01:35，

你会得到：

2012 年 3 月 1 日晚上 10:1:35

烦人，嗯？

无论如何，给你。希望这可以帮助。

```
SELECT dt.ID,
CASE WHEN EXISTS(SELECT DATEPART(HH, mt.TheDate)
                FROM MyTable AS mt 
                WHERE mt.ID = dt.ID 
                AND (DATEPART(HH, mt.TheDate)) > 12)
    THEN
        (SELECT
        CONVERT(varchar,(MONTH(dt.TheDate))) + '/' +
        CONVERT(varchar,(DAY(dt.TheDate))) + '/' +
        CONVERT(varchar,(YEAR(dt.TheDate))) + ' ' +
        CONVERT(varchar, DATEPART(HH, dt.TheDate)-12) + ':' +
        CONVERT(varchar,(DATEPART(mi, dt.TheDate))) + ':' +
        CONVERT(varchar,(DATEPART( ss, dt.TheDate))) + ' PM')
    ELSE
        (SELECT
        CONVERT(varchar,(MONTH(dt.TheDate))) + '/' +
        CONVERT(varchar,(DAY(dt.TheDate))) + '/' +
        CONVERT(varchar,(YEAR(dt.TheDate))) + ' ' +
        CONVERT(varchar, DATEPART(HH, dt.TheDate)) + ':' +
        CONVERT(varchar,(DATEPART(mi, dt.TheDate))) + ':' +
        CONVERT(varchar,(DATEPART( ss, dt.TheDate))) + ' AM') END As FullDate
FROM MyTable AS dt 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T00:10:50.633

你需要分两部分来做，你需要使用东西来删除毫秒。如果找到其他方法来摆脱毫秒，我会更新

```
SELECT CONVERT(VARCHAR(10), GETDATE(), 101)+' '+STUFF(RIGHT(CONVERT(VARCHAR(26), GETDATE(), 109),14),9,4,'') 
```

输出 ：`09/13/2012 11:15:21PM`

编辑：如果你想要在 AM/PM 之前有空间，然后使用`' '`而不是`''`in stuff

```
SELECT CONVERT(VARCHAR(10), GETDATE(), 101)+' '+STUFF(RIGHT(CONVERT(VARCHAR(26), GETDATE(), 109),14),9,4,' ') 
```

输出 ：`09/13/2012 11:15:59 PM`

# python - 打印格式？哪个更好python

> ID：12415327
> 
> 赞同：3
> 
> 时间：2012-09-13T21:54:16.767
> 
> 标签：python

我一直很好奇

为什么 python 有不同的打印方式？

例如

```
print "this is ",a," and " ,b 
```

对比

```
print "this is %d and %d" %(a,b) 
```

有性能问题吗？和东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T22:00:26.520

在 Python 中还有更多“打印内容”的方法，包括更现代的[`str.format()`](http://docs.python.org/library/stdtypes.html#str.format)方法`sys.stdout.write('foo')`，以及可能的其他方法。

就区别`print a, b, c`和`%`格式而言，我通常使用前者主要用于调试输出，当你只需要一堆变量之间的空格时。当我想要精确格式或对格式进行更多控制时，我使用`%`（实际上，这些天我总是使用`str.format`）。

例如：

```
print 'DEBUG:', var1, var2 
```

相对：

```
print 'Benchmarks took {0:.3f}s to run'.format(seconds) 
```

此外，`%`格式化`str.format`更为通用——它们实际上不打印任何东西，它们返回一个字符串，您可以打印、写入文件、存储在数据库中、作为 Web 响应发送等。

关于性能——别担心。这三个几乎可以肯定是很快的，过早的优化是万恶之源。

我真的不想发布数字（因为这可能会鼓励错误的思维方式），但是`timeit`使用起来非常简单，我忍不住。

```
C:\>python -m timeit -s "import cStringIO; s = cStringIO.StringIO()"
                     "print >>s, 'this is', 'a', 'test'"
100000 loops, best of 3: 3.39 usec per loop

c:\>python -m timeit -s "import cStringIO; s = cStringIO.StringIO()"
                     "print >>s, 'this is %s test' % 'a'"
1000000 loops, best of 3: 1.32 usec per loop

C:\>python -m timeit -s "import cStringIO; s = cStringIO.StringIO()"
                     "print >>s, 'this is {0} test'.format('a')"
1000000 loops, best of 3: 1.64 usec per loop 
```

我不太确定为什么该`print a, b, c`方法明显慢，可能是实现细节。但是，不要担心——打印到文件或屏幕所需的时间可能远远超过字符串格式化部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T22:00:11.890

第二种方法可以更好地格式化打印的参数。例如，您可以指定将数字格式化为十六进制，或指定浮点数要显示的小数位数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T21:58:37.627

两者本质上是一样的。Python 提供了格式化选项，以避免在复杂的字符串中使用重复的逗号，这对于输入和阅读来说都会变得乏味。有时一个会更适合特定情况，有时另一个会。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T22:01:11.757

它在性能问题上很友好——不是在时间上，而是在空间上。

这些陈述是相等的：

```
print "this is ",a," and " ,b
sys.stdout.write("this is ");sys.stdout.write(" ");sys.stdout.write(str(a));sys.stdout.write(" ");sys.stdout.write(" and ");sys.stdout.write(str(b));sys.stdout.write("\n"); 
```

这些是平等的：

```
print "this is %d and %d" %(a,b)
sys.stdout.write("this is %d and %d" %(a,b));sys.stdout.write("\n") 
```

通常，如果您打印许多元素，则认为第一个版本更快，因为一个接一个地写入流。

第二个版本需要处理和复制部分字符串`"this is %d and %d"`。因此，如果你有很多元素并且你格式化了很多次并且字符串很大，那么它可能会比版本 1 占用更多的内存。

但是因为 Python 是相当高级的，所以我不能确定哪个性能更好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T04:19:40.080

在我们讨论打印内容的方法时，我只想对[日志记录模块大喊一声。](http://docs.python.org/library/logging.html)

```
import logging
# call once per process
logging.basicConfig(level=logging.INFO)

# do this when you would print
logging.info('this is %d and %d', a, b) 
```

当你突然意识到“哦，这个项目就在这里”时，就像打印一样简单，但非常容易配置以按日期自动旋转、自定义格式等记录到文件。

# ios - iPhone 5 armv7s 处理器与前代有何不同？

> ID：12415331
> 
> 赞同：5
> 
> 时间：2012-09-13T21:54:44.637
> 
> 标签：ios, iphone-5, armv7

iPhone 5 是第一款配备 armv7s 处理器的 Apple 设备。

指令集是否相同？

向后兼容性怎么样？iPhone 5 能否运行为 armv6 和 armv7 架构编译的应用程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T10:07:15.363

AnandTech对新CPU有分析：[http ://www.anandtech.com/show/6292/iphone-5-a6-not-a15-custom-core](http://www.anandtech.com/show/6292/iphone-5-a6-not-a15-custom-core)

主要区别显然是 ARMv7s 支持 VFPv4（但您应该阅读完整的文章，它非常透彻）。

CPU 向后兼容，它将能够执行为 ARMv6 和 ARMv7 编译的应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T08:25:23.523

这可能根本不是一个不同的处理器。他们可能刚刚开始为具有不同 ABI 的新模式编译所有内容。在 Linux 世界中，他们正在通过转向硬浮点 (arm7hf) 进行类似的过渡。

# ruby-on-rails - Rails 3 中的子域约束路由

> ID：12415336
> 
> 赞同：3
> 
> 时间：2012-09-13T21:55:10.890
> 
> 标签：ruby-on-rails, routes, subdomain

目前我有这样的路线：

```
constraints(:subdomain => 'api') do
  ...blah blah...
end 
```

这很好用`api.domain.com`，我们将在生产中使用。然而，在我们的登台服务器上，`api.project.mycompany.com`这并没有那么好用。

我的问题是：有没有办法让子域和子子域都可以使用？如果没有，那么我如何使它仅与子子域一起使用？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-06-05T13:29:43.847

您可以使用正则表达式而不是字符串：

```
constraints(:subdomain => /^api(\.project)?$/) do
  ...blah blah...
end 
```

# python - Python正则表达式重复

> ID：12415338
> 
> 赞同：2
> 
> 时间：2012-09-13T21:55:16.460
> 
> 标签：python, regex, expression

我有一个这样的字符串

> --x123-09827--x456-9908872--x789-267504

我试图获得像 123:09827 456:9908872 789:267504 这样的所有价值

我试过 (--x([0-9]+)-([0-9])+)+

但它只给了我最后一对结果，我正在通过 python 测试它

```
>>> import re
>>> x = "--x123-09827--x456-9908872--x789-267504"
>>> p = "(--x([0-9]+)-([0-9]+))+"
>>> re.match(p,x)
>>> re.match(p,x).groups()
('--x789-267504', '789', '267504') 
```

我应该如何使用嵌套重复模式编写？

非常感谢！

大卫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T22:04:16.133

像这样编码：

```
x = "--x123-09827--x456-9908872--x789-267504"
p = "--x(?:[0-9]+)-(?:[0-9]+)"
print re.findall(p,x) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T22:04:40.190

试试这个

```
p='--x([0-9]+)-([0-9]+)'
re.findall(p,x) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T22:06:01.667

只需使用该`.findall`方法，它会使表达式更简单。

```
>>> import re
>>> x = "--x123-09827--x456-9908872--x789-267504"
>>> r = re.compile(r"--x(\d+)-(\d+)")
>>> r.findall(x)
[('123', '09827'), ('456', '9908872'), ('789', '267504')] 
```

您还可以使用`.finditer`which 可能对较长的字符串有帮助。

```
>>> [m.groups() for m in r.finditer(x)]
[('123', '09827'), ('456', '9908872'), ('789', '267504')] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T22:11:56.217

使用 re.finditer 或 re.findall。那么您就不需要包裹整个表达式的额外括号了。例如，

```
 >>> import re
    >>> x = "--x123-09827--x456-9908872--x789-267504"
    >>> p = "--x([0-9]+)-([0-9]+)"
    >>> for m in re.finditer(p,x):
    >>>    print '{0} {1}'.format(m.group(1),m.group(2)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T22:08:05.927

无需使用正则表达式：

```
>>> "--x123-09827--x456-9908872--x789-267504".replace('--x',' ').replace('-',':').strip()
'123:09827 456:9908872 789:267504' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-13T22:41:10.650

您不需要正则表达式。这是一个简单的单行非正则表达式解决方案：

```
>>> input = "--x123-09827--x456-9908872--x789-267504"
>>> [ x.replace("-", ":") for x in input.split("--x")[1:] ]
['123:09827', '456:9908872', '789:267504'] 
```

如果这是一个关于正则表达式的练习，这里是一个使用重复（技术上）的解决方案，尽管该`findall(...)`解决方案可能是首选：

```
>>> import re
>>> input = "--x123-09827--x456-9908872--x789-267504"
>>> regex = '--x(.+)'
>>> [ x.replace("-", ":") for x in re.match(regex*3, input).groups() ]
['123:09827', '456:9908872', '789:267504'] 
```

# php - 在foreach中将数组添加到自身而不重复？

> ID：12415341
> 
> 赞同：0
> 
> 时间：2012-09-13T21:55:26.630
> 
> 标签：php, arrays, foreach

```
 public function GetOpsPremiums()
    {
        // Get the Cost Multiplier
        $costMulti  = $this->GetCostMultiplier();
        // Get the Prem Ops
        $premOps    = $this->GetPremOpsEL();
        // Get the Factors
        $factors    = $this->GetFactors();

        // Get the full class array
        $classArray = $this->GetClassArray();

        foreach ($classArray as $key => $values) {
            $classTotalHalved = $values / 1000;
            $mainMultiplier = $costMulti * $premOps[$key] * $factors[$key]['premops'];
            $premium = $classTotalHalved * $mainMultiplier;
            $opsPremiums = array(
                            $key => round($premium)
                        );
        }
        return $opsPremiums;
    } 
```

我希望 $opsPremiums 不只是一次迭代 1 次。我需要它进行迭代并将其自身添加到自身中。

我试过了

```
foreach ($opsPremiums as $key2 => $values2) {
     $opsPremiums = array(
                         $key => round($premium)
                    );
} 
```

有人可以向我解释我需要做什么才能让 $opsPremium 整齐地堆叠到一个数组中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T22:05:28.397

应该是这样

```
foreach ($opsPremiums as $key2 => $values2) {

 $opsPremiums[] = array(
                     $key => round($premium)
                );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T22:00:33.953

我有点不确定您的意思，但是您是否要在 $opsPremium 中返回所有结果？

问题是您在每次迭代时将其设置为数组，而不是添加到其中。

```
$opsPremium = array();
foreach ($classArray as $key => $values) {
        $classTotalHalved = $values / 1000;
        $mainMultiplier = $costMulti * $premOps[$key] * $factors[$key]['premops'];
        $premium = $classTotalHalved * $mainMultiplier;
        $opsPremiums[] = array(
                        $key => round($premium)
                    );
}
return $opsPremiums; 
```

将 $opsPremium 存储在循环之外并每次都添加到循环中将为您做到这一点。

如果这不是您所要求的，我深表歉意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T22:06:52.420

您似乎对如何谈论您的问题的术语感到非常困惑。我相信您应该问的是，我想将一些额外的项目（包括其自身）添加到数组中以供返回。在这种情况下，您需要的魔法是数组连接。我有点不确定您的数组需要什么，但您可以使用 [] 运算符将任何内容附加到任何 php 数组。如果您回答更详细的问题，也许我可以为您提供进一步的帮助。

根据您要添加到数组中的内容，您可能需要使用 array_merge、array_push 来使程序运行。

# git - 在版本控制环境中管理生产资产/数据的最佳方式是什么？

> ID：12415342
> 
> 赞同：1
> 
> 时间：2012-09-13T21:55:29.057
> 
> 标签：git, version-control

我为我的 Django 站点设置了一个相当简单的设置。

*   本地开发副本
*   私人 BitBucket git repo 中的副本
*   从 git 克隆到服务器
*   将这一切联系在一起的织物文件

对于每个站点，我有两件事我不在 git 中维护：（`/media/`人们在实时站点中上传的内容，通常链接到数据库）和数据库（一个 sqlite3 文件）。我从 git 中排除了这个，因为我从不希望我的数据/媒体本地副本上的测试工作被上传。如果我确实需要，我会手动上传。

我对`git`. 我在直接本地→生产交换中使用 Bazaar，但现在中间有 BitBucket，我真的很想将它们用于异地备份。

我知道大多数人在听到人们这么说时都会畏缩，但这意味着我可以让我的客户访问 BB 回购所以如果我“被公共汽车撞到”（令人担忧的是，我的客户的话），他们有足够的访问权限来获得新服务器启动并运行。由于我自己的偏执狂，他们根本无法访问我在其他客户端之间共享的生产服务器。

### 我可以忍受你讨厌我问但我有三个问题：

1.  假设我不打算听，那么在回购中以一个方向存储备份的最佳方法是什么？我可以编写备份创建脚本（创建一个新的 tar），但是我在 git 中的什么地方存储呢？

2.  我可以避免将它们下载到我的本地分支吗？这不是世界末日，但这些已经是备份。我不需要在每个回购中都有一份副本。

3.  如果我想轮换备份，例如 7 天，永久清理旧备份的最佳方法是什么？我收集到即使在我从实时分支中删除它们之后，git 也会自然地保留一份过时备份的副本。我需要一种方法来防止这种情况。

我愿意听取替代解决方案，但我最想知道 git 是否可以被我的邪恶命令扭曲。否则它是如此多才多艺。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T12:45:50.393

'1' 和 '2' 是半可解的。你用的是bitbucket，是吗？只需为备份创建一个新的存储库。问题解决了，您只需要将它克隆到您需要的地方。'3' 表明 git 可能不是您想做的正确技术。

根据定义，git 需要到达提交历史中每个文件的每个先前状态。您可以使用诸如`filter-branch`...之类的命令来解决它，但为什么呢？Git 竭尽全力保留过去的状态。这就是它的精神。在 git 存储库中每 7 天编写一次擦除备份的脚本比使用更适合您的问题的技术要麻烦得多。亚马逊免费套餐中的 S3 存储桶怎么样？使用正确配置的 IAM 策略为您的客户提供访问权限，整个解决方案可以以每年的一小部分价格获得。它是S3。它有 11 个完整的九。除非您的网站绝对庞大，否则您可以花很少的钱进行数月的备份。

# c# - 非托管导出 / Delphi / .NET 4 / Robert Giesecke

> ID：12415347
> 
> 赞同：2
> 
> 时间：2012-09-13T21:56:00.157
> 
> 标签：c#, .net, .net-4.0

我已成功使用 Roberts [UnmanagedExportLibrary.zip](https://sites.google.com/site/robertgiesecke/Home/uploads/unmanagedexports)从 Delphi 2007 调用 .NET 2/3.5 程序集。

但是，当我使用 VS2010 将 C# 程序集重新编译为面向 .NET 4 时，调用会因 ntdll.dll 中的堆栈溢出异常而崩溃。（ntdll 调用 ntdll）加载 mscorlib/mscoreei 后。

在针对 .NET 4 时，还有其他人可以使用它吗？- 罗伯特的文档似乎暗示这应该有效。

顺便说一句，罗伯特的伟大工作 - 非常有用。

谢谢迈尔斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-09T06:30:34.840

数组更加棘手，因为您需要更加注意分配和销毁数组的位置。最干净的方法总是在调用者处分配，将数组传递给被调用者，让它填充数组。在您的上下文中，这种方法看起来像这样：

```
public struct Sample
{
    [MarshalAs(UnmanagedType.BStr)]
    public string Name;
}

[DllExport]
public static int func(
    [Out, MarshalAs(UnmanagedType.LPArray, SizeParamIndex=1)]
    Sample[] samples, 
    ref int len
)
{
    // len holds the length of the array on input
    // len is assigned the number of items that have been assigned values 
    // use the return value to indicate success or failure
    for (int i = 0; i < len; i++)
        samples[i].Name = "foo: " + i.ToString();
    return 0;
} 
```

您需要指定需要在向外方向编组的数组。如果您希望以两种方式编组值，那么您将使用`In, Out`而不是`Out`. 您还需要使用`MarshalAs`with`UnmanagedType.LPArray`来指示如何编组数组。而且您确实需要指定大小参数，以便编组器知道要编组回非托管代码的项目数。

然后在 Delphi 端，你声明这样的函数：

```
type
  TSample = record
    Name: WideString;
  end;
  PSample = ^TSample;

function func(samples: PSample; var len: Integer): Integer; stdcall; 
  external dllname; 
```

像这样称呼它：

```
var
  samples: array of TSample;
  i, len: Integer;
....
len := 10;
SetLength(samples, len);
if func(PSample(samples), len)=0 then
  for i := 0 to len-1 do
    Writeln(samples[i].Name); 
```

* * *

**更新**

正如 AlexS [发现][1]（请参阅下面的评论），仅在 .net 4 上支持通过引用传递大小参数索引。在早期版本中，您需要按值传递大小参数索引。

我选择在这里通过引用传递它的原因是允许以下协议：

1.  调用者传入一个值*，*指示数组有多大。
2.  被调用者传递一个值*，*指示已填充多少元素。

这在 .net 4 上运行良好，但在早期版本中，您需要为步骤 2 使用额外的参数。

参考 [https://stackoverflow.com/a/22507948/4339857](https://stackoverflow.com/a/22507948/4339857)

# java - 为什么我使用哈希码生成器为 2 个相等的对象获取不同的哈希码值？

> ID：12415349
> 
> 赞同：5
> 
> 时间：2012-09-13T21:56:08.073
> 
> 标签：java, groovy

我在这里做错了什么？

```
 @Override
        public int hashCode()
        {
            HashCodeBuilder hashCodeBuilder = new HashCodeBuilder();
            hashCodeBuilder.append(this.getId()).append(this.getDocFamilyUuid())
                           .append(this.getCorrelationId());

            return hashCodeBuilder.hashCode();
        } 
```

这就是我在 groovy 中创建对象的方式。这些字段被设置为静态常量

```
DocInfo docInfo =  new DocInfo(id:DOC_ID, correlationId: CORRELATION_ID, docFamilyUuid: DOC_FAMILY_UUID) 
```

我试图断言

```
assert docInfo.hashCode() ==
           new DocInfo([id:DOC_ID,
                   correlationId: CORRELATION_ID,
                   docFamilyUuid:DOC_FAMILY_UUID]).hashCode() 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-13T21:58:05.473

我怀疑问题是您正在调用`hashCode()`而不是`toHashCode()`，假设您使用的是[commons-lang HashCodeBuilder](http://commons.apache.org/lang/api/org/apache/commons/lang3/builder/HashCodeBuilder.html)。换句话说，你得到的是构建器本身的哈希码，而不是它正在构建的哈希码:)

现在奇怪的是，它们被记录为在我链接到的 JavaDoc 版本中返回相同的内容。所以我想知道你是否有一个旧版本 - 或者你可能正在使用一个完全不同的版本`HashCodeBuilder`......

编辑：`HashCodeBuilder.hashCode()`是的，在 2.5+ 版本中被覆盖为 return `toHashCode()`，但是 OP 使用的是 2.3 版本，它不能那样工作。

# ios - “在 iOS xx 及更高版本中可用”是什么意思？

> ID：12415358
> 
> 赞同：1
> 
> 时间：2012-09-13T21:56:55.317
> 
> 标签：ios

这到底是什么意思？我已经看到了可用性：iOS（6.0 和更高版本）和其他版本号，但我认为这并不是它的确切含义。这真的意味着它仅适用于 iOS 6 及更高版本吗？如果是这样，那为什么 iOS 2.0f 及更高版本的类似方法会贬值？当iOS版本低于6.0或指定可用性时，我不应该仍然使用它吗？

一个例子是 NSTextAlignmentCenter。它指定它是可用性：iOS（6.0 及更高版本），但我正在为 iOS 4.3 及更高版本构建应用程序。我目前正在检查设备的 iOS 版本并选择 NSTextAlignmentCenter 和 UITextAlignmentCenter 之间的文本对齐方式。对我来说，这似乎很奇怪。不应该适用于 iOS SDK 6.0 及更高版本，而不是 iOS 6.0 及更高版本吗？

我知道这看起来有点吹毛求疵，但它有很大的不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T22:17:48.330

> 我已经看到了可用性：iOS（6.0 和更高版本）和其他版本号，但我认为这并不是它的确切含义。这真的意味着它仅适用于 iOS 6 及更高版本吗？

是的，这确实意味着仅在 iOS 6 及更高版本中可用。

您链接到应用程序的大多数 Apple 提供的框架都是动态的——它们不是内置在您的应用程序中，而是在应用程序启动时链接。它们作为操作系统的一部分存在于设备上。这意味着进行追溯更改（例如添加新方法）既困难又不可能。重要的更改（例如安全修复）通常在次要操作系统更新中进行。API 的功能更改通常保留用于更重要的升级。

某些更改确实会追溯发生。例如，对象字面量不仅适用于 iOS 6，而且适用于 5 和（我认为）甚至 4。这是因为在对象字面量的情况下，变化发生在编译器中，而不是在操作系统或框架中。只要您使用的是理解对象文字语法的编译器，编译器发出的目标代码就会与旧系统兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T22:04:03.217

这意味着您可以从这个 xx OS 版本开始使用它。

请以下列方式考虑这一点——包括 API 在内的每个功能都有其诞生的初始版本 (xx)。它存在了一段时间（通过几个版本），在某些时候它变旧了（新功能可以做同样的事情，但更好）并且它被标记为已弃用。它仍然可以使用，但不再推荐。并且在某个时刻，此功能/API 会死掉（变得不受支持）。

因此，如果您计划支持 iOS 4.3 及更高版本，您将不得不选择在 iOS 4.3 到 6.0 中存在的功能（已经诞生，但尚未死去）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T21:59:27.943

这意味着它所说的。如果它显示“2.0 及更高版本”，那么您可以在任何面向 SDK 2.0 或更高版本的应用程序中安全地使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T22:12:45.477

它不是指 SDK 版本 - 它是 iOS 版本。iOS 的每个版本都添加了它支持的新 API，因此您不能使用该版本中不存在的 API（如 NSTextAlignmentCenter）。

# matlab - MATLAB中两个字符串元胞数组的交集

> ID：12415361
> 
> 赞同：3
> 
> 时间：2012-09-13T21:57:15.703
> 
> 标签：matlab, cell, intersection

我有两个元胞数组，X 和 Y。每个元胞数组由字符串组成：即，X{i} 是所有 i 的字符串，Y{i} 也是如此。我想找到两个单元格数组的交集（大概是第三个单元格数组}，它具有 X 和 Y 共有的字符串。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T03:02:11.803

有一个函数可以做到这一点： `intersect`

例如：

```
    >> X = {'a', 'b'; 'c', 'd'};
    >> Y = {'c', 'd', 'e', 'f'};
    >> Z = 相交(X, Y)

    Z =

        'c' 'd'

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T22:25:19.550

可能有一个函数可以做到这一点 - 我不记得了。但是你可以很容易地做到这一点`ismember`：

```
a = {'a', 'b', 'c'};
b = {'b', 'd', 'a'};
intersection = a(ismember(a, b)); 
```

# android - Android - 我可以使用不同的提供商重复使用联系人选择器吗？

> ID：12415363
> 
> 赞同：0
> 
> 时间：2012-09-13T21:57:20.310
> 
> 标签：android

我想通过执行以下操作来重用用户设备的本机联系人选择器：

```
public void doLaunchContactPicker(View view) {
    Intent contactPickerIntent = new Intent(Intent.ACTION_PICK,
            Contacts.CONTENT_URI);

            // Made up code that I am sure doesn't exist
            contactPickerIntent.putExtra("MyRemote3rdPartyContactList", remoteContacts)

    startActivityForResult(contactPickerIntent, CONTACT_PICKER_RESULT);
} 
```

但是，我不想查看他们在设备上的联系人，而是想重新配置联系人 UI 以指向我通过应用程序中的 web 服务调用填充的自定义联系人提供程序。

如果可能的话，我将如何去做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T22:01:11.540

技术上不可能：默认的联系人选择器没有任何代码可以让您为其提供不同的数据源。

如果你真的想要，你可以[打开源代码](https://github.com/android/platform_packages_apps_contacts/blob/master/src/com/android/contacts/activities/ContactSelectionActivity.java)并戳它：也许你可以将它重用于你的目的。

# c - 如何在open mp的for循环中解决“返回0或返回1”？

> ID：12415364
> 
> 赞同：0
> 
> 时间：2012-09-13T21:57:20.010
> 
> 标签：c, openmp

这是我到目前为止解决`return 1;`,所做的`return 0;`，它实际上是一个使用回溯算法的数独求解器，所以我试图并行化它，但我无法得到完整的结果。（如果我的实施有误，请纠正我）实际发生了什么？有人可以帮忙吗？！

这是我指的网站，我曾经按照他们的方式行事：[http ://www.thinkingparallel.com/2007/06/29/break-out-of-loops-in-openmp/#reply](http://www.thinkingparallel.com/2007/06/29/breaking-out-of-loops-in-openmp/#reply)

```
int solver (int row, int col)
{
   int i;
   boolean flag = FALSE;
   if (outBoard[row][col] == 0)
   {
      #pragma omp parallel num_threads(2)
      #pragma omp parallel for //it works if i remove this line
      for (i = 1; i < 10; i++)
      {
         if (checkExist(row, col, i)) //if not, assign number i to the empty cell
            outBoard[row][col] = i;

         #pragma omp flush (flag)
         if (!flag)
         {
            if (row == 8 && col == 8)
            {
               //return 1;
               flag = TRUE;
               #pragma omp flush (flag)
            }
            else if (row == 8)
            {
               if (solver(0, col+1))
               {
                  //return 1;
                  flag = TRUE;
                  #pragma omp flush (flag)
               }
            }
            else if (solver(row+1, col))
            {
               //return 1;
               flag = TRUE;
               #pragma omp flush (flag)
            }
         }
      }

         if (flag) { return 1; }

         if (i == 10) 
         { 
            if (outBoard[row][col] !=  inBoardA[row][col]) 
            outBoard[row][col] = 0;
        return 0; 
          } 

     } 
     else 
      { 
        if (row == 8 && col == 8) 
         { 
        return 1; 
          } 
         else if (row == 8) 
         {    
            if (solver(0,col+1)) return 1; 
          } 
          else 
          { 
            if (solver(row+1,col)) return 1; 
           } 

     return 0;
    }
} 
```

* * *

```
5 0 0 0 0 3 7 0 0
7 4 6 1 0 2 3 0 0
0 3 8 0 9 7 5 0 2
9 7 0 4 0 0 2 0 0
0 0 2 0 0 0 4 0 0
0 0 4 0 0 5 0 1 9
4 0 3 2 7 0 9 8 0
0 0 5 3 0 9 6 7 4
0 0 7 5 0 0 0 0 3
Sudoku solved :
5 2 9 8 0 3 7 4 1
7 4 6 1 5 2 3 9 0
1 3 8 0 9 7 5 6 2
9 7 0 4 1 0 2 3 6
0 1 2 9 6 0 4 5 8
3 6 4 7 8 5 0 1 9
4 0 3 2 7 6 9 8 5
2 8 5 3 0 9 6 7 4
6 9 7 5 4 8 1 2 3 
```

`//return 1;`是原来的序列号，因为在里面`return`是不允许的`parallel for`，所以我`#pragma opm flush`以前把它去掉了，但是结果不完整，还是在数独中留下了几个空格。

感谢您的回答：>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:36:02.470

首先，由于`solver`是递归调用的，它使每个递归级别的线程数加倍。我不认为这是你打算做的。 **编辑**：仅当使用 启用嵌套并行性时才适用`omp_set_nested()`，默认情况下不是。所以只有第一次调用`solver`will fork。

```
#pragma omp parallel num_threads(2)
#pragma omp parallel for 
```

在您的代码中尝试在另一个并行区域中创建一个并行区域，这将导致后面的循环执行两次，因为外部`parallel`已经创建了两个线程。这应该替换为

```
#pragma omp parallel num_threads(2)
#pragma omp for 
```

或等价物`#pragma omp parallel for num_threads(2)`。

二、这段代码：

```
if (checkExist(row,col,i))//if not, assign number i to the empty cell
    outBoard[row][col] = i; 
```

创建一个竞争条件，两个线程并行将不同的值写入同一个单元格。您可能希望为要使用的每个线程创建一个单独的板副本。

另一个代码部分，

```
if (outBoard[row][col] != inBoardA[row][col]) 
    outBoard[row][col] = 0; 
```

似乎在并行区域之外，但在`solver`对它的嵌套调用中，它也在由最外层创建的不同线程中并行执行`solver`。

**最终（e）**（18.09）无论如何，即使您设法调试/更改代码以正确并行运行（正如我自己所做的那样 -*如果有人感兴趣，我会尝试提供代码，哪个我怀疑*），结果将是此代码的并行执行不会给您带来太多优势。我心中的原因如下：

想象一下什么时候`solver`迭代超过 9 个可能的单元格值，它会创建 9 个执行分支。如果您使用 OpenMP 创建 2 个线程，它将以某种方式在线程之间分配顶级分支，例如一个线程执行 5 个分支，另一个线程执行 4 个分支，并且每个线程中的分支将一个接一个地连续执行。如果初始数独状态有效，则只有一个分支会导致正确的解决方案。其他分支在遇到解决方案差异时会被缩短，因此有些运行时间较长，有些运行时间较短，而导致正确解决方案的分支运行时间最长。您无法预测执行哪些分支需要什么时间，因此无法合理地平衡线程之间的工作负载。即使您使用 OpenMP 动态调度，也有可能当一个线程执行最长的分支时，

由于创建线程并在它们之间同步数据会产生一些重大开销（与`solver`0.01-10 毫秒的顺序运行时间相比），您会看到并行执行时间比顺序执行时间稍长或稍短，具体取决于输入。

无论如何，如果顺序求解器的运行时间低于 10 毫秒，为什么要让它并行呢？

# php - Drupal FAPI 错误；无法创建对/从字符串偏移量或重载对象的引用

> ID：12415366
> 
> 赞同：5
> 
> 时间：2012-09-13T21:57:39.013
> 
> 标签：php, drupal, drupal-7

我正在尝试按照本教程的内容向我的用户注册页面上的几个文本字段添加一些自定义自动完成功能；[http://drupal.org/node/854216](http://drupal.org/node/854216)。

我已经能够成功地做到这一点，但是现在每当我提交注册表单时，我都会得到一个空白页，并且此错误会显示在日志中；

> PHP 致命错误：无法在第 6448 行的 /var/www/html/drupal/includes/common.inc 中创建对字符串偏移量或重载对象的引用，引用者：http://[...]/drupal/?q =用户/注册

我现在找不到这个话题，但是当我最初在谷歌上搜索这个问题时，我在某处读到这个问题通常是属性键中添加或遗漏了“#”符号。因为没有 # 符号，它将该属性的值视为子属性，因此是数组。或者类似的东西，但是在仔细检查之后，我使用的所有属性似乎都应该是我放置的。

**这是代码，有谁知道我做错了什么？**

```
function gtx_alterations_menu() {
  $items = array();
  $items['city/autocomplete'] = array(
    'page callback' => 'city_autocomplete',
    'access callback' => TRUE,
    'type' => MENU_CALLBACK
  );
  return $items;
}

function gtx_alterations_form_alter(&$form, &$form_state, $form_id) {
  if ($form_id == 'user_register_form') {
    $form['field_city_of_residence']['#type'] = 'textfield';
    $form['field_city_of_residence']['#title'] = t('City of Residence');
    $form['field_city_of_residence']['#autocomplete_path'] = 'city/autocomplete';
    $form['field_headquarters_location']['#type'] = 'textfield';
    $form['field_headquarters_location']['#title'] = t('Headquarters Location');
    $form['field_headquarters_location']['#autocomplete_path'] = 'city/autocomplete';
  }
}

function city_autocomplete($string = '') {
  $cities = array();
  $locations = array();
  $results = file_get_contents('http://graph.facebook.com/search?q='.urlencode($string).'&type=adcity');

  $results = preg_replace('/\\\\u0*([0-9a-fA-F]{1,5})/', '&#x\1;', $results);

  preg_match_all('/"name":"[^,]+/', $results, $cities);
  preg_match_all('/"subtext":".+?,[^"]+/', $results, $locations);

  $final = array();

  foreach ($cities[0] as $key => $value) {
    $value = substr($value, 8);
    $subtext = substr($locations[0][$key], 11);
    $result = $value . ', ' . $subtext;

    $final[$result] = $result;
  }

  drupal_json_output($final);
} 
```

* * *

**我尝试过的一些事情**

当试图缩小问题范围时，我决定注释掉这两行；

```
$form['field_city_of_residence']['#autocomplete_path'] = 'city/autocomplete';
$form['field_headquarters_location']['#autocomplete_path'] = 'city/autocomplete'; 
```

删除错误，但这自然意味着自动完成功能也被禁用。

* * *

另外将 city_autocomplete($string) 的内容替换为

```
drupal_json_output(array('test' => 'test')); 
```

不能解决错误，这意味着问题不在该函数中。

* * *

从这两行中删除 # 符号

```
$form['field_city_of_residence']['#autocomplete_path'] = 'city/autocomplete';
$form['field_headquarters_location']['#autocomplete_path'] = 'city/autocomplete'; 
```

导致上一个错误被这个错误替换，

```
Unsupported operand types in /var/www/html/drupal/includes/form.inc on line 1755 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T23:43:01.033

Drupal 7 中的字段表单有点混乱，看看[Why is hook_form_alter so messy in d7?](https://drupal.stackexchange.com/questions/27767/why-is-hook-form-alter-so-messy-in-d7/27784#27784) 有点崩溃。

可以说实际的 HTML 元素（您要更改其值的元素）在数组的更深处找到，例如

```
$form['field_city_of_residence'][LANGUAGE_NONE][0]['value']['#type'] = 'textfield';
$form['field_city_of_residence'][LANGUAGE_NONE][0]['value']['#title'] = t('City of Residence');
$form['field_city_of_residence'][LANGUAGE_NONE][0]['value']['#autocomplete_path'] = 'city/autocomplete'; 
```

# sql - SQL Query, return Price for Max(DateField)

> ID：12415385
> 
> 赞同：2
> 
> 时间：2012-09-13T21:59:28.253
> 
> 标签：sql, tsql

I have this sql table:

```
Niin char(9)
EffectiveDate Date
Price  currency 
```

The NIIN repeates itself with different EffectiveDate and Price values like so

```
**NIIN           EffectiveDate       Price**

012345678        6/1/2011              89.00
012345678        6/1/2012              99.00
012345678        6/1/2012              99.00
123456789        5/1/2011              77.00
123456789        5/1/2012              80.00
123456789        5/1/2012              80.00
etc.... 
```

What I need to do is return the NIIN, with the Price of the Max EffectiveDate, assuming that if there are duplicate EffectiveDate values, the Price will always be the same.

Therfore from the example I supplied the query would return:

```
012345678       99.00
123456789       80.00 
```

Thanks for any help.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T22:02:50.980

Select only the ones where there isn't a higher effective date using `NOT EXISTS`

```
SELECT t.niin, t.price 
  FROM theTable t 
 WHERE NOT EXISTS(SELECT NULL 
                    FROM theTable ot
                   WHERE ot.niin = t.niin
                     AND ot.effectiveDate > t.effectiveDate
                  ) 
```

This was answer was inspired by a [similar question I asked a few years ago](https://stackoverflow.com/a/4823506/330057), answered by [OMG Ponies](https://stackoverflow.com/users/135152/omg-ponies).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T22:07:33.170

you can use CTE for this:

```
;with cte as
(
  select niin,
    row_number() over(partition by niin order by effectivedate desc) rn,
    price
  from yourtable
)
select niin, price
from cte
where rn = 1 
```

see [SQL Fiddle with Demo](http://sqlfiddle.com/#!3/d5bcf/4)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T22:38:32.850

my two cents

```
SELECT DISTINCT Niin, Price
FROM <tablenamehere> nt1
WHERE EffectiveDate = (SELECT MAX(EffectiveDate) 
                       FROM <tablenamehere> nt2 
                       WHERE nt1.Niin = nt2.Niin) 
```

I think reads a bit more intuitively

# ajax - jQuery UI AutoComplete 使用 Ajax 和 Json 崩溃

> ID：12415395
> 
> 赞同：0
> 
> 时间：2012-09-13T22:00:13.763
> 
> 标签：ajax, json, jquery-ui, autocomplete

不知道这是否重要，但 msg.d 大约有 300 行长。当我提醒 msg.d 时，我得到了格式正确的 Json 数据。

```
$("#supplierSelect").autocomplete({
    source: function( request, response ) {
        $.ajax({
            type: "POST",
            url: "SupplierAdmin.aspx/PopulateSupplierSelectDropDownList",
            data: "{}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {
                response( $.map( msg.d, function( item ) {
                    return {
                        label: item.title,
                        value: item.turninId
                    }
                }));
            }
        });
    }
}).fadeIn(); 
```

如果你能告诉我如何只在成功时淡入，非常感谢。

**编辑：** “正确格式化的 Json 数据”实际上在标签和值周围有引号，并且顺序被切换。现在检查，看看它是否有所作为。抱歉信息不完整。

**Edit2：** 我选择了 response( $($.parseJSON(msg.d)).map( function()... ，现在当我输入任何内容时，自动完成功能会下拉整个名称列表并选择一个框中的值。我是否可以假设这不是正确的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T16:33:45.587

需要将 parseJSON 添加到地图中。

# android - 让上滑动画起作用？

> ID：12415399
> 
> 赞同：0
> 
> 时间：2012-09-13T22:00:35.827
> 
> 标签：android

我想为向上和向内滑动的视图设置动画。我的布局：

```
<RelativeLayout>
    <LinearLayout
        android:id="@+id/foo"
        android:layout_width="fill_parent"
        android:layout_height="40dp"
        android:layout_alignParentBottom="true" />
</RelativeLayout> 
```

布局“foo”固定在我的活动布局的底部。我希望最初隐藏它。例如，我希望它的顶部 y 坐标是开始屏幕的底部像素。

当我单击 UI 中其他位置的按钮时，我希望 foo 向上滑动，并在其底部边缘接触屏幕底部时结束。

当我单击另一个按钮时，我希望 foo 向下滑动，回到其原始起始位置（其顶部边缘位于屏幕底部像素的位置）。

我正在尝试使用以下动画定义来做到这一点：

```
// slide up
<set
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:interpolator="@android:anim/accelerate_interpolator">
  <translate
    android:fromYDelta="-100%"
    android:toYDelta="0%"
    android:duration="700"
    android:fillBefore="true"
    android:fillAfter="true">
  </translate>
</set>

// slide down
<set
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:interpolator="@android:anim/accelerate_interpolator">
  <translate
    android:fromYDelta="0%"
    android:toYDelta="-100%"
    android:duration="700"
    android:fillBefore="true"
    android:fillAfter="true">
  </translate>
</set> 
```

所以我的理解 - 如果我应用上滑动画， foo 应该将自身重新定位在 -100% y，因为 fillBefore 是真的。然后它应该动画到它的原始位置，然后停留在那里，因为 fillAfter 是真的。向下滑动动画的工作原理类似。

但它不起作用，视图似乎跳来跳去。任何想法如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T22:45:44.150

我认为你需要的一切都是一个 SlidingDrawer 类。wrap_content 存在一些问题，因此您可以使用[WrappingSlidingDrawer](http://code.google.com/p/sw6android/source/browse/sw6.schedule/branches/prototype1/src/sw6/visualschedule/activitylist/WrappingSlidingDrawer.java?spec=svn1245&r=1170)。

您应该能够隐藏“手柄”或根本不这样做，并使用其他一些按钮向下和向上滑动滑块。

希望有帮助:)

# matlab - 是否可以检测到 Matlab 函数的忽略输出？

> ID：12415400
> 
> 赞同：3
> 
> 时间：2012-09-13T22:00:47.077
> 
> 标签：matlab

假设我有一个功能强大的主力：

```
[a b c d] = lotsOfComputation(); 
```

在某些用例中，我可能只需要它的一两个输出。在这些情况下，我会忽略带有`~`. 是否可以从`lostOfComputation`函数中检测到这一点？

（是的，我知道更优雅的解决方案是重构为单独的函数。我已经为直接用例做了这个，但问题仍然在我的脑海中。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T22:16:52.923

当然，试试[nargout](http://www.mathworks.co.uk/help/matlab/ref/nargout.html)，它会返回输出参数的数量。好吧，实际上，当参数被省略时，这将起作用，但它会将 ~ 视为一个参数。这是一个例子：

```
function [a b c] = test()
  a=0;b=0;c=0;
  disp(nargout);
end

>> [a, b] = test();
   2
>> [~, b] = test();
   2
>> [~, ~, ~] = test();
   3 
```

所以也许你的确切问题的答案是否定的，至少不是`nargout`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T22:18:33.370

直接回答你的问题，我不知道。

但是，如果您要求这样做以节省可能浪费的计算，您可以将您的函数拆分为子函数，但使用`deal`.

例如，如果您一直想要`a`and `b`from `lotsOfComputation`，您可以将您的函数重新制作为

```
[a b] = lotsOfComputation(); 
```

然后你可以有两个单独的计算`c`和`d`

```
[c] = cComp();
[d] = dComp(); 
```

然后，您可以将原始函数编写为

```
[a b c d] = deal(lotsOfComputation(), cComp(), dComp()); 
```

如果您想忽略`c`or的输出`d`，可以在 deal 函数中将函数调用替换为 null 值，即

```
[a b ~ d] = deal(lotsOfComputation(), 0, dComp()); 
```

我知道这并不能直接回答这个问题，但它可能具有理论上的意义:)

# jquery - 在 Jquery 日期选择器中解释错误的月份，从 MySQL 中提取数据

> ID：12415404
> 
> 赞同：3
> 
> 时间：2012-09-13T22:00:55.863
> 
> 标签：jquery, mysql, jquery-ui, datepicker

感谢您提前提供帮助。我才刚刚开始，所以我可能会以完全错误的方式做这件事

好的，问题是在 DatePicker 中调用 PHP 中的日期值**2012、2、13**（2012 年 2 月 13 日）被解释为 2012 年 3 月 13 日，因为 2 表示从 0 开始的第三个月是 3 月，我得到了那么多。

```
//从日期时间字段中获取最小日期

    $sqlmin = "从 table1 中选择 min(datetime)";
    $resultmin = mysql_query($sqlmin);
    $mindate = mysql_fetch_array($resultmin);
    $datetime1 = date('Y, n, j', strtotime($mindate[0])); //这将给我 2012 年 2 月 13 日（2 月）

```

现在在 JS 部分

```
    $（函数（）{
       $( "#fromdate" ).datepicker({
       dateFormat: 'yy-mm-dd',
       minDate: new Date( php echo $datetime1; ), // 这认为是三月，但我想要二月

```

所以问题是我怎样才能让日期选择器中的月份是**二月**而不是**三月**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:09:57.043

请改用此格式：`"F j, Y, g:i a"`

参考： [http ://www.php.net/manual/en/function.date.php#example-665](http://www.php.net/manual/en/function.date.php#example-665)

```
$datetime1 = date("F j, Y, g:i a"); // March 10, 2001, 5:16 pm 
```

这是 JavaScript 预期的格式之一。

```
minDate: new Date("<?php echo $datetime1; ?>") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T22:06:22.773

只需更改新的 Date 函数：

```
minDate: 
$(function() {
   var phpDate = new Date( php echo $datetime1; );
   $( "#fromdate" ).datepicker({
   dateFormat: 'yy-mm-dd',
   minDate: phpDate.setMonth(phpDate.getMonth() - 1), 
```

getMonth 将返回 0-11，而 setMonth 将正确使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-21T14:56:14.427

我设法通过创建月份名称列表来解决“错误月份”的问题：

```
$(function() {
                $( "#alkupvm" ).datepicker({
                    dateFormat:"yy-mm-dd", 
                    firstDay:1, 
                    dayNamesMin:["Su","Ma","Ti","Ke","To","Pe","La"],
                    monthNames:["Tammikuu", "Helmikuu", "Maaliskuu", "Huhtikuu", "Toukokuu", "Kes&auml;kuu", "Hein&auml;kuu", "Elokuu", "Syyskuu", "Lokakuu", "Marraskuu", "Joulukuu"],
                    minDate:"-2y",
                    stepMonths: 1,
                    maxDate:"+2m"

                    });
                }); 
```

这里特别是monthNames 列表/数组。现在月份显示正确。

# javascript - 登录后如何获取 Facebook accessToken？

> ID：12415407
> 
> 赞同：-2
> 
> 时间：2012-09-13T22:01:01.270
> 
> 标签：javascript, facebook-graph-api, facebook-login

我可以登录，但我需要获取`accessToken`，以便可以调用其他 API，例如*获取朋友等。*

方法 ,`getLoginStatus`被调用但没有进入`success`响应块。

这是我的代码：

```
$(document).ready(function() {
    window.fbAsyncInit = function() {
        FB.init({
            appId: <<My appId>>, // App ID
            status: true, // check login status
            cookie: true, // enable cookies to allow the server to access the session
            xfbml: true,  // parse XFBML
            oauth: true
        });
        FB.getLoginStatus(function(response){
            alert('response='+response);
        });
        window.setTimeout(checkLogStatus, 1000);
        function checkLogStatus(){
            alert("check");
            // fetch the status on load
            FB.getLoginStatus(function(response){
                alert('response='+response);
            });
        }
    };

    // Load the SDK Asynchronously
    (function(d){
        var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) {return;}
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "//connect.facebook.net/en_US/all.js";
        ref.parentNode.insertBefore(js, ref);
    }(document));
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:31:45.017

> 我需要获取 accessToken

SDK 通常能够很好地自行处理访问令牌——自动将其包含在对 API 的任何后续请求中，而无需您手动执行任何操作。

所以我不太清楚，你在这里实际遇到/试图解决什么问题。

# ios - 在 Coco2D 2.0 iOS 中画线

> ID：12415408
> 
> 赞同：0
> 
> 时间：2012-09-13T22:01:05.847
> 
> 标签：ios, cocos2d-iphone

我有一个线条精灵并调用 CCSprite 的绘图功能。

```
-(void) draw
{
 [super draw];
 ccDrawColor4F(....);
 ccDrawLine(...);
 } 
```

游戏第一次运行，但随后在应用程序内重新启动游戏会崩溃

我拿出这个CCSprite，问题就消失了，所以很明显CCSprite的这个绘图功能有问题。如何解决？

# assembly - push ecx 是做什么的？

> ID：12415415
> 
> 赞同：-6
> 
> 时间：2012-09-13T22:01:12.677
> 
> 标签：assembly, nasm

我看到代码，`push ecx`但我不知道它的用途。它是否将 ecx 的值更改为其他值？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-13T22:07:37.890

它将 的值压`ecx`入堆栈。 `ecx`是一个 x86 CPU 寄存器，它可以保存一定数量的位值（`rcx`现代 x86 CPU 上的 32 或 64（当时称为））。

*调用栈*被分成*栈帧*。调用函数时会创建堆栈帧，将传递给函数的参数压入堆栈，然后执行函数。当函数运行时，局部函数变量也通过使用`push`和存储在堆栈中`pop`。 `push`把*东西放在堆栈上*，然后`pop` *把最后放在上面的东西拿走，退后*。

你必须把堆栈想象成一堆盘子，你把一个放在上面，（推）然后你再把同样的一个拿下来（弹出），然后你才能到达下面的下一个。

导致函数当前运行的函数都在这个堆栈上，如果你愿意，可以坐在当前函数堆栈框架的“下方”。当当前函数返回时，它会从堆栈中弹出（堆栈帧被破坏）并且调用者函数可以从它离开的地方继续。

为了这个解释，我已经简化了一些位。

# sql - SQL：遍历行并更新具有相同主键的行集

> ID：12415428
> 
> 赞同：0
> 
> 时间：2012-09-13T22:02:57.007
> 
> 标签：sql, db2

我有一个名为***Provider_Compliances***的表 （ProviderNum、ProviderLocation、HistorySequence、ProviderEffectiveDate、PeriodBeginDate、PeriodEndDate、IsCompliant）

## 数据示例：

```
ProviderNum |ProviderLocatin  |HistorySequence|ProviderEffectiveDate|PeriodBeginDate|PeriodEndDate|IsCompliant
         1  |              1  |          2  |   2012-01-01        |  2010-01-03   | 2012-01-01  | No
         2  |              2  |          2  |   2012-01-01        |  2012-01-02   | 9999-12-31  | Yes 
```

Provider_Compliances 表的主键是 (ProviderNumber,HistorySequence, ProviderLocation, ProviderEffectiveDate)。

我正在尝试添加一个新列（ComplianceNumber），然后将 Provider_Compliance 表的主键更改为复合键（ComplianceNumber、HistorySequence）。

我不想丢失任何预先存在的数据。

所以，我想这样做：

//1st，添加默认值为0的新列（ComplianceNumber）

```
ALTER TABLE Provider_Compliances ADD ComplianceNumber DECIMAL(10) DEFAULT 0 
```

//2nd，更新所有现有的行

```
UPDATE Provider_Compliances SET ComplianceNumber = (NEXT VALUE FOR Provider_Compliances_Sequence) 
```

//3、修改主键

```
ALTER TABLE Provider_Compliances DROP PRIMARY KEY
ALTER TABLE Provider_Compliances ADD PRIMARY KEY(ComplianceNumber, HistorySequence) 
```

第 2 步的问题在于它将每一行设置为一个新的 ComplianceNumber。我希望具有相同 ProviderNumber + ProviderLocation + ProviderEffectiveDate 的每一行都被授予相同的 ComplianceNumber。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:36:19.533

您将能够使用 SQL 脚本执行此操作，如下所示

1.  创建一个临时表，其中包含按 ProviderNumber + ProviderLocation + ProviderEffectiveDate 的记录组，包括新列
2.  循环遍历临时表并更新新列（使用增量编号 - 或根据需要）
3.  将此表与原始表连接并使用临时表中的值更新原始表的新列

# c# - Lucene 搜索不起作用

> ID：12415431
> 
> 赞同：0
> 
> 时间：2012-09-13T22:03:03.460
> 
> 标签：c#, search, lucene, sitecore, sitecore6

我有一个功能可以搜索 Sitecore 内容项中的一些文章并给我价值。到目前为止，我已经建立了我的索引，它显示在我的 IndexViewer 中。但是函数的返回是 0。我查看了这个链接：[http](http://sitecoregadgets.blogspot.com/2009/11/working-with-lucene-search-index-in_25.html) ://sitecoregadgets.blogspot.com/2009/11/working-with-lucene-search-index-in_25.html了解更多信息。

```
 protected IEnumerable<Item> ShowHomePageNews(int numOfArticles, string stringofCountries)
    {
        List<Item> items = new List<Item>();
        Sitecore.Search.Index indx = SearchManager.GetIndex("newsArticles");
        using (IndexSearchContext searchContext = indx.CreateSearchContext())
        {
            var db = Sitecore.Context.Database;
            CombinedQuery query = new CombinedQuery();
            QueryBase catQuery = new FieldQuery("countries", stringofCountries); //FieldName, FieldValue.
            SearchHits results = searchContext.Search(catQuery); //Searching the content items by fields.
            SearchResultCollection result = results.FetchResults(0, numOfArticles);
            foreach (SearchResult i in result)
            {
                items = result
                              .Where(r => !r.Title.StartsWith("*"))
                              .Select(r => db.GetItem(new Sitecore.Data.ItemUri(r.Url).ToDataUri()))
                              .ToList();
                //Lucene.Net.Documents.Field url = i.Document.GetField("_url");
                //Sitecore.Data.ItemUri itemUri = new Sitecore.Data.ItemUri(url.StringValue());
                //Sitecore.Data.Items.Item item = Sitecore.Context.Database.GetItem(itemUri.ToDataUri());
                //items.Add(item);
            }
        }
        return items;
    } 
```

在这里结果是0。我在这里做错了什么？

这是我在 IndexViewer 中看到的快照：

![索引查看器](../Images/9a33e5c7190e8c5bdd128b904e6e7d8d.png)

**编辑：**

我在“catQuery”中传递了一个“NZ”，我得到了结果。因为在我的索引查看器中，我看到了 Field Name = _name，其中包含 NZ。我得到了这个部分。但是，我希望我的每个字段都被索引。我在 IndexViewer 中只看到 3 个字段：_url、_group 和 _name。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:32:20.733

因此，您的国家/地区应由索引器标记。作为一个多列表，它们将由 GUID 标记。使用上面的代码通过 GUID 搜索单个国家/地区应该可以。但是，如果您要搜索多个国家/地区，其中任何传入的国家/地区都可能触发匹配，您需要以不同的方式构建查询。

```
CombinedQuery query = new CombinedQuery();

//apply other filters here to query if need be

//and country filter by creating a new clause (combinedquery) and "ORing" within it (QueryOccurance.Should)
CombinedQuery query3 = new  CombinedQuery();
//here you would actually iterate over your country list
query3.Add(new FieldQuery("countries", country1GUID), QueryOccurance.Should);
query3.Add(new FieldQuery("countries", country2GUID), QueryOccurance.Should);
query.Add(query3, QueryOccurance.Must); 
```

# scala - 在 Scala Mapper/Record 特征中键入上限

> ID：12415433
> 
> 赞同：2
> 
> 时间：2012-09-13T22:03:28.700
> 
> 标签：scala, lift

我对 Lift 的 Mapper 和 Record 框架中的标准模式感到困惑：

```
trait Mapper[A<:Mapper[A]] extends BaseMapper {
  self: A =>
  type MapperType = A 
```

Mapper trait 的类型参数是什么意思？类型A是Mapper的参数，要求是Mapper[A]的子类，怎么可能，或者我只是不明白这个定义的意思。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T22:23:16.540

此模式用于能够捕获 的实际子类型`Mapper`，这对于在方法中接受该确切类型的参数很有用。

传统上，您不能声明该约束：

```
scala> trait A { def f(other: A): A  }
defined trait A

scala> class B extends A { def f(other: B): B = sys.error("TODO") }
<console>:11: error: class B needs to be abstract, 
since method f in trait A of type (other: A)A is not defined
(Note that A does not match B)
   class B extends A { def f(other: B): B = sys.error("TODO") } 
```

当您可以访问精确类型时，您可以执行以下操作：

```
scala> trait A[T <: A[T]] { def f(other: T): T  }
defined trait A

scala> class B extends A[B] { def f(other: B): B = sys.error("TODO") }
defined class B 
```

请注意，这也可以通过有界类型成员实现：

```
 trait A { type T <: A; def f(other: T): T }
 class B extends A { type T <: B; def f(other: T): T = sys.error("TODO") } 
```

# c# - 如何在 Sql Azure 中重置标识种子

> ID：12415434
> 
> 赞同：17
> 
> 时间：2012-09-13T22:03:30.097
> 
> 标签：c#, sql, entity-framework, azure-sql-database

我尝试了以下方法来重置列的身份种子：

```
DBCC CHECKIDENT ('dbo.Stuff', RESEED, 0) 
```

这在 sql azure 中不起作用，我想知道这样做的最佳方法是什么。删除并重新创建表？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-03-29T23:22:10.367

我认为@haldyr 的答案可能被不公平地删除为正确的。

最新版本的 SQL Azure (v12) 确实支持`DBCC CHECKIDENT`（[以及其他一些](https://msdn.microsoft.com/library/azure/ee336281.aspx?f=255&MSPPError=-2147217396)），但是如果您的 azure 数据库服务器不是全新的，您将需要升级。

升级很容易，转到新门户上的 azure DB 服务器（实际服务器不是 DB 本身），然后单击大`Latest Update`按钮。

![在此处输入图像描述](../Images/5263476553e2987e1d01a02773917635.png)

**注意：**请注意升级有很多注意事项（就像一些旧的东西不支持它），所以它值得阅读文章[http://azure.microsoft.com/en-us/documentation/articles/sql-数据库-预览-whats-new/#V12AzureSqlDbPreviewGaTable](http://azure.microsoft.com/en-us/documentation/articles/sql-database-preview-whats-new/#V12AzureSqlDbPreviewGaTable)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-06T19:52:26.217

如您所见，[Windows Azure SQL 数据库当前不支持 DBCC CHECKIDENT](http://msdn.microsoft.com/en-us/library/windowsazure/ee336253.aspx)。重新设置标识的最完整方法是创建一个具有相同结构的新表，并将标识设置为重新设置的值 IDENTITY(reseedval,1)，使用 SET IDENTITY_INSERT 表名 ON 从原始表加载现有记录，然后删除旧表，并重命名新表。重置权限、重置约束等。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-05-01T11:18:39.610

我最近自己也遇到了这个问题。我通过在表中插入和删除项目来解决它，直到达到所需的种子值。

在下面的示例中，这将为用户表重新设定种子，因此下一个新项目的 Id 为 3500。

```
BEGIN TRANSACTION
GO

DECLARE @max_id int

SELECT @max_id = max([Id]) FROM users

WHILE (@max_id < 3499)
BEGIN
    INSERT INTO Users (Username, Password) VALUES ('','')
    SELECT @max_id = max([Id]) FROM Users
    DELETE FROM Users WHERE [Id] = @max_id
END

COMMIT 
```

希望这可以帮助。

# security - 使用 C# 使用 HMAC-MD5 对字符串进行签名

> ID：12415438
> 
> 赞同：5
> 
> 时间：2012-09-13T22:03:58.083
> 
> 标签：security, c#-4.0, hmac

我得到了以下 HMAC 密钥（十六进制格式）：

52320e181a481f5e19507a75b3cae4d74d5cfbc328f7f2b738e9fb06b2e05b55b632c1c3d331dcf3baacae8d3000594f839d770f2080910b52b7b8beb3458c08

我需要签署这个字符串：

1100002842850CHF91827364

结果应该是这样的（十六进制格式）：

2ad2f79111afd818c1dc0916d824b0a1

我有以下代码：

```
string key = "52320e181a481f5e19507a75b3cae4d74d5cfbc328f7f2b738e9fb06b2e05b55b632c1c3d331dcf3baacae8d3000594f839d770f2080910b52b7b8beb3458c08";
string payload = "1100002842850CHF91827364";

byte[] keyInBytes = Encoding.UTF8.GetBytes(key);
byte[] payloadInBytes = Encoding.UTF8.GetBytes(payload);

var md5 = new HMACMD5(keyInBytes);
byte[] hash = md5.ComputeHash(payloadInBytes);

var result = BitConverter.ToString(hash).Replace("-", string.Empty); 
```

但是，我没有得到结果。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-06-28T04:10:58.987

使用密钥 HMAC md5 散列时

```
 var data = Encoding.UTF8.GetBytes(plaintext);
        // key
        var key = Encoding.UTF8.GetBytes(transactionKey);

        // Create HMAC-MD5 Algorithm;
        var hmac = new HMACMD5(key);

        // Compute hash.
        var hashBytes = hmac.ComputeHash(data);

        // Convert to HEX string.
        return System.BitConverter.ToString(hashBytes).Replace("-", "").ToLower(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T04:25:13.403

而不是这样做：

```
byte[] keyInBytes = Encoding.UTF8.GetBytes(key); 
```

您需要将密钥从十六进制字符串转换为字节数组。在这里您可以找到示例：

[如何将字节数组转换为十六进制字符串，反之亦然？](https://stackoverflow.com/questions/311165/how-do-you-convert-byte-array-to-hexadecimal-string-and-vice-versa-in-c)

# matlab - 有一些例外的彩色三角形

> ID：12415450
> 
> 赞同：0
> 
> 时间：2012-09-13T22:04:43.743
> 
> 标签：matlab, plot, geometry, color-mapping

我正在尝试绘制三角形的二维网格。我想根据给定 `A`的正标量数组为每个三角形着色，每个三角形一个；例如，假设`A`保持每个三角形的面积，我希望大三角形比小三角形更粉红。我知道该怎么做：

```
patch('Faces',tri,'Vertices',V,'FaceColor','flat',
            'FaceVertexCData',A,...
            'CDataMapping','scaled');
colormap(pink); 
```

但是，我还有另一个布尔数组`B`，每个三角形一个布尔值。例如，它标记了哪些三角形是等腰三角形。如果一个三角形被标记为`1`，`B`我想把它染成黄色。

我认为这可以通过`A(B==1)=-1`改变 的`colormap`巧妙设置来实现`caxis`，但这是最优雅的方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T07:34:09.447

你想跳过一些三角形的着色（用一种颜色着色），还是对这些三角形使用不同的颜色图？

对于 2D 绘图，第一种情况相对简单。您可以将这些三角形中的 A 设置为 NaN，并且 patch 不会绘制它们。此外，更改绘图的背景颜色将有效地以您想要的颜色显示未绘制的三角形

```
A(B)=NaN;
set(gca,'Color',[1 0 0]); % red 
```

如果要使用不同的颜色或颜色范围，则必须附加颜色图并将 A 中的值设置为相应三角形的值比任何其他三角形的 A“足够大”：

```
cmap = [colormap; [1 0 0]]; % red
colormap(cmap);
A(B) = max(A)+1; 
```

无需玩轴。

否则，如果您想包含两种不同的色标，则必须使用补丁图的 CData 属性，请参阅此处的一个很好的教程[来](http://www.mathworks.se/support/solutions/en/data/1-GNRWEH/index.html)绘制两个图，一个是灰度图，一个是彩色图。

还有[这篇](https://stackoverflow.com/questions/5457723/how-to-overlay-a-pcolor-plot-with-a-contour-plot-that-uses-a-different-colormap)文章是关于如何用两个不同的颜色图绘制两个不同的数据集。这是通过附加两个颜色图并确保两个数据集访问最终颜色图的不同部分来完成的。

# jquery - 使用 jquery .each() 函数时，在回调中使用 Element 参数的目的是什么？

> ID：12415451
> 
> 赞同：2
> 
> 时间：2012-09-13T22:04:43.177
> 
> 标签：jquery, parameters, closures, element, each

查看 jquery 中 .each() 函数的文档会显示以下方法签名：

`.each( function(index, Element) )`

[http://api.jquery.com/each/](http://api.jquery.com/each/)

我可以理解需要传入一个索引以便它可以在回调中使用，但是如果您可以通过`this`关键字引用当前元素，为什么还要显式包含 Element 参数？它只是为了让您可以指定您选择的实例名称吗？我的意思是，如果您仍然必须在 jquery 方法中包装一个命名实例`$()`来取回一个 jquery 对象，那不完全一样`this`吗？文档似乎没有提到它为什么在那里。

### 更新：

我认为这与闭包有关，但我不确定。看起来我所说的“命名实例”实际上是数组中元素的本地副本或克隆，存储在回调范围内的变量中。我怀疑通过使用`this`它来引用一个变量，就好像它是某种闭包一样。@thecodeparadox 在一个萤火虫控制台中发现了一些让我思考这个问题的东西。仍然不太确定有什么区别，或者为什么您需要在数组中拥有一个本地范围的元素值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:06:21.827

`Element`指发生循环的 Object 的每个元素。在回调函数中，您还可以使用也获取每个值`this`。

例如：

```
$(['a','b', 'c']).each(function(i, el) {
  console.log(el);
  console.log(this); 
}); 
```

## 我发现的一件事

对于上面的例子，如果你看到`console.log(el)`你会得到结果：

```
a, b, c.. 
```

但如果你看到`console.log(this)`你会看到 String 对象。

`console.log(el)`要获得与您需要编写的输出相同的输出`console.log( this[0] )`。

这意味着直接获取原始值`el`即回调参数可靠且容易。

***[打开萤火虫并查看输出](http://jsfiddle.net/6BhxC/1/)***。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T22:07:23.870

"this" 的上下文可以在 .each 块内经常更改，因此它们提供对元素的引用，从而使您不必执行诸如 "var that = this;" 之类的操作。

# android - 旧的列表视图仍然存在

> ID：12415455
> 
> 赞同：0
> 
> 时间：2012-09-13T22:05:09.917
> 
> 标签：android, listview, android-listview

我有一个工作正常并显示从表查询中获得的数据的活动。使用 OnItemClick 方法，我对其进行了设置，以便如果选择了一行，则新活动以新的 ListView 开始，但原始 ListView 中的许多元素都在新的 listview 中，包括每行上的切换按钮和文本视图。知道是什么原因造成的吗？

这是初始的 ListView。按钮不显示，只是 ListView 中的所有内容：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="#81BEF7"
android:orientation="vertical" >

<Button
    android:id="@+id/btnAddNurseToRoster"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/add" 
    android:focusable="true"/>

<Button
    android:id="@+id/btnRemoveNurseFromRoster"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/btnAddNurseToRoster"
    android:layout_toRightOf="@+id/btnAddNurseToRoster"
    android:text="@string/delete" 
    android:focusable="true"/>

<ListView
    android:id="@+id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/btnAddNurseToRoster"
    android:textColor="#FFFFFF"
    android:textStyle="bold"/>

</RelativeLayout> 
```

新的列表视图：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:background="#81BEF7"
android:orientation="vertical" >

<TextView
    android:id="@+id/tvAssignmentsText"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textSize="25dp"
    android:textColor="#FFFFFF"
    android:text="Assignments"
    android:gravity="center_horizontal"
    android:background="#663399"
    />

<ListView
    android:id="@+id/lvAssignmentsList"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/tvAssignmentsText"
    android:paddingTop="20dp"
    android:textColor="#FFFFFF"
    android:textStyle="bold"/>

</ 
```

下面是调用新 ListView 的代码：

```
package com.deadEddie.staffingmanagement;

import android.app.Activity;
import android.database.Cursor;
import android.os.Bundle;
import android.support.v4.widget.SimpleCursorAdapter;
import android.util.Log;
import android.widget.ListAdapter;
import android.widget.ListView;

public class ShowAssignments extends Activity {

DbCommunicator getAssignmentsList;
ListView assignmentsList;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.assignments);
    displayList();

}

private void displayList() {

    // instantiate ListView object
    assignmentsList = (ListView) findViewById(R.id.lvAssignmentsList);

    // instantiate variables for CursorAdapter
    int [] to = new int [] {R.id.rbAssignmentsList };
    String [] from = new String [] {DbCommunicator.KEY_ROOM_NUMBER};

    // instantiate getAssignmentsList with new DbCommunicator object and open
    getAssignmentsList = new DbCommunicator(this);
    getAssignmentsList.open();

    // get and manage cursor
    Cursor assignmentsCursor = getAssignmentsList.getAssignments(this);
    startManagingCursor(assignmentsCursor);

    // list adapter
    ListAdapter assignmentsListAdapter = new SimpleCursorAdapter(this,     R.layout.nurse_list, assignmentsCursor, from, to, 0);

    assignmentsCursor.moveToNext();

    // set ListView
    assignmentsList.setAdapter(assignmentsListAdapter);
    assignmentsList.setItemsCanFocus(true);
}

} 
```

添加用于填充原始 ListView 的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content" >

<ToggleButton
    android:id="@+id/rosterDutyStatus"
    android:layout_width="50dp"
    android:layout_height="40dp"
    android:layout_alignParentLeft="true"
    android:textOff="Off Duty"
    android:textOn="On Duty"
    android:textSize="10dp" 
    android:focusable="false"/>

<TextView
    android:id="@+id/rosterListLname"
    android:layout_width="120dp"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/rosterDutyStatus"
    android:layout_toRightOf="@+id/rosterDutyStatus"
    android:paddingTop="6dp"
    android:textColor="#FFFFFF"
    android:textSize="18dp"
    android:textStyle="bold" 
    android:focusable="false"
    android:focusableInTouchMode="false"/>

<TextView
    android:id="@+id/rosterListFname"
    android:layout_width="60dp"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/rosterListLname"
    android:layout_toRightOf="@+id/rosterListLname"
    android:paddingTop="6dp"
    android:textColor="#FFFFFF"
    android:textStyle="bold" />

<TextView
    android:id="@+id/rosterListMI"
    android:layout_width="10dp"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/rosterListFname"
    android:layout_toRightOf="@+id/rosterListFname"
    android:paddingTop="6dp"
    android:textColor="#FFFFFF"
    android:textStyle="bold" />

<TextView
    android:id="@+id/rosterListID"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/rosterListMI"
    android:layout_toRightOf="@+id/rosterListMI"
    android:visibility="invisible" />

<TextView
    android:id="@+id/rosterViewAssignment"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/rosterDutyStatus"
    android:paddingRight="50dp"
    android:text="@string/assigned"
    android:textColor="#FFFFFF"
    android:textStyle="bold" />

<TextView
    android:id="@+id/firstAssignment"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/rosterViewAssignment"
    android:layout_toRightOf="@+id/rosterViewAssignment"
    android:text="@string/noAssignments"
    android:textColor="#FFFFFF"
    android:textStyle="bold"/>

<TextView
    android:id="@+id/secondAssignment"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/firstAssignment"
    android:layout_toRightOf="@+id/firstAssignment"
    android:textColor="#FFFFFF"
    android:textStyle="bold"/>

<TextView
    android:id="@+id/thirdAssignment"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/secondAssignment"
    android:layout_toRightOf="@+id/secondAssignment"
    android:textColor="#FFFFFF"
    android:textStyle="bold"/>

<TextView
    android:id="@+id/fourthAssignment"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/thirdAssignment"
    android:layout_toRightOf="@+id/thirdAssignment"
    android:textColor="#FFFFFF"
    android:textStyle="bold"/>

<TextView
    android:id="@+id/fifthAssignment"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/fourthAssignment"
    android:layout_toRightOf="@+id/fourthAssignment"
    android:textColor="#FFFFFF"
    android:textStyle="bold"/>

<TextView
    android:id="@+id/sixthAssignment"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/fifthAssignment"
    android:layout_toRightOf="@+id/fifthAssignment"
    android:textColor="#FFFFFF"
    android:textStyle="bold"/>"
-->

</RelativeLayout> 
```

调用我试图更改的原始布局的代码：

```
package com.deadEddie.staffingmanagement;

import android.app.Dialog;
import android.app.ListActivity;
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.os.Handler;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.Button;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;
import android.widget.AdapterView.OnItemClickListener;

public class EditRoster extends ListActivity implements OnClickListener {

String TAG = "EditRoster";
Button addNurse; 
Button deleteNurse; 
DbCommunicator rosterView;
ListView listView; 

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.edit_roster);
    addNurse = (Button) findViewById(R.id.btnAddNurseToRoster);
    deleteNurse = (Button) findViewById(R.id.btnRemoveNurseFromRoster);
    displayNurseRoster();
    displayDialog();

    addNurse.setOnClickListener(this);
    deleteNurse.setOnClickListener(this);   
}

// method to put timer on dialog
public void timerDelayRemoveDialog(long time, final Dialog dialogView){
    Handler handler = new Handler();
    handler.postDelayed(new Runnable() {
        public void run() {
            dialogView.dismiss();
        }
    }, time);
}

private void displayDialog() {
    Dialog d = new Dialog(this);
    d.setTitle("Select Nurse to Adjust Assignments");
    d.show();
    timerDelayRemoveDialog(2000, d);
}

public void displayNurseRoster(){

    listView = (ListView) findViewById(android.R.id.list);

    // int variables filled with NURSE_TABLE data
    int[] to_nurseTable = new int[] {

            // int list for data from NURSE_TABLE fields
            R.id.rosterDutyStatus,
            R.id.rosterListLname, 
            R.id.rosterListFname, 
            R.id.rosterListMI, 
            R.id.rosterListID,
            // int list for data from ASSIGNMENTS_TABLE fields
            R.id.firstAssignment};

    // String array holding data fields from NURSE_TABLE 
    String[] from_nurseTable = new String [] {

            // fields from NURSE_TABLE
            DbCommunicator.KEY_DUTY_STATUS,
            DbCommunicator.KEY_LNAME, 
            DbCommunicator.KEY_FNAME, 
            DbCommunicator.KEY_MI,
            DbCommunicator.KEY_NURSE_ROWID,
            DbCommunicator.KEY_ROOM_NUMBER}; 

    // instantiate instance of DbCommunicator object
    rosterView = new DbCommunicator(this);

    // open instance
    rosterView.open();

    // get & manage cursor for NURSE_TABLE data
    Cursor nurseTableCursor = rosterView.getNurseRosterCursor(this);
    startManagingCursor(nurseTableCursor);

    // instantiate cursor adaptor
    ListAdapter nurseTableAdapter = new SimpleCursorAdapter(this,
            R.layout.nurse_list, nurseTableCursor, from_nurseTable, to_nurseTable);

    nurseTableCursor.moveToNext();

    // set listView
    listView.setAdapter(nurseTableAdapter);
    rosterView.close();
    listView.setItemsCanFocus(true);
    listView.setOnItemClickListener(new OnItemClickListener(){

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {
            Log.i(TAG, "onItemClickListener set");
            Intent showAssignments = new Intent("com.deadEddie.staffingmanagement.SHOWASSIGNMENTS");
            startActivity(showAssignments);
        }

    });

}// displayNurseRoster()

@Override
public void onClick(View v) 
{
    switch (v.getId())
    {
    case R.id.btnAddNurseToRoster:
        Intent add = new Intent("com.deadEddie.staffingmanagement.ADDNURSETOROSTER");
        startActivity(add);
        break;

    case R.id.btnRemoveNurseFromRoster:

        break;
    } // switch
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T02:42:52.683

好的。知道了。刚刚意识到，当我在每个方法中实例化 ListAdapter 时，我错误地使用了相同的布局 (nurse_list)，因此它试图将我的新数据查询应用于原始布局（这当然被搞砸了）。谢谢你看一看，真的很感激。

对不起，如果这会浪费任何人的时间。也许对其他新手来说是一个教训。

# haskell - 递归函数判断一个数是否为素数

> ID：12415456
> 
> 赞同：1
> 
> 时间：2012-09-13T22:05:12.710
> 
> 标签：haskell, primes

我需要实现一个递归函数，如果数字是素数则返回 1，否则返回 0。作业问题说我不能使用 '%' mod。Haskell应该是这样的......我不确定。

```
isprime x = prime(x sqrt(x))

prime x i = | i==1 = 1
            | mod(x i)==0 = 0
            | otherwise = prime(x i-1)

mod num div | num<div = n
            | otherwise = mod(num-div div) 
```

我在 C 中测试了一个算法，因为我的 Mac 上没有 Haskell 编译器，但是出现了问题，因为它在`primes-1`. 我知道为什么。

```
int main (int argc, const char * argv[]){
    int a=0,b=31;
    printf("\n Prime numbers between %d and %d \n",a,b);

    for(int a=0; a<=b; a++){
        if(isPrime(a)==0){
            printf("%d, ",a);
        } 
    }
    return 0;
}

int isPrime(int x){
    return prime(x, sqrt(x));
}

int prime(int x, int i){
    if(i==0){
        return 0;
    }
    else if(mod(x,i)==1){
        return 1;
    }
    else{
        return prime(x, i-1);
    }
}

int mod(int num, int div){
    if(num<div) return num;
    else return mod(num-div, div);
} 
```

算法返回这个：

```
Prime numbers between 0 and 31 
0, 1, 2, 3, 4, 6, 8, 12, 14, 18, 20, 24, 30,
Program ended with exit code: 0 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T22:30:19.303

你的基本想法很好。在 Haskell 中，您可以使用列表而不是迭代。以下是您需要调查的内容：

1.  安装并使用 ghci。
2.  如果你不知道如何在 Haskell 中做任何事情，请访问*Learn You a Haskell for Great Good* [http://learnyouahaskell.com/](http://learnyouahaskell.com/)
3.  列出理解。了解`[n^2 | n <- [1..10]]`含义并使用类似的列表。
4.  `sqrt`在hoogle [http://www.haskell.org/hoogle/](http://www.haskell.org/hoogle/)上查找功能
5.  因为 Haskell 是静态类型的，你需要在`Integer`和之间转换一些数字类型`Float`。抬头看看你什么`Float -> Integer`时候`Integer -> Float`做。**不要**使用`unsafeCoerce`- 它不安全并且会严重破坏事物。
6.  使用 hoogle 查找`[Bool] -> Bool`。我为什么这么建议？会有什么`[Bool]`帮助，无论如何你会怎么做？（再次修改列表理解。）
7.  了解更多信息并尝试后，请返回更具体的问题。
8.  总是尽早开始你的作业，特别是如果你错过了课程！

你被设置这个作业不是因为部门被困在决定 102659473841923461 是否是素数的方法上，而是因为他们希望你学习一些 Haskell。尽量不要在不学习的情况下尝试解决问题——这只会使下一个任务变得更加困难！（这就是为什么我抵制将另一个答案中的“伪代码”翻译成 Haskell 的原因。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T22:10:25.507

我不知道 Haskell，也不想给你答案，但我可以提供一个方法。

如果您检查从 2 到 sqrt(n) 的所有数字，并且它们都不是 n 的因数，则 n 是素数。

因此，使用以下伪代码的函数调用可能会起作用：

```
def isPrime(n):
   return isPrimeHelper(n,sqrt(n))

def isPrimeHelper(n,counter):
   if counter == 1 return True
   if n % counter == 0 return False
   else return isPrime(n,counter-1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T09:11:44.927

[（显然，有一个关于家庭作业的新政策，即[“如果你不想要一个经过全面审查、完整和可测试的答案，Stack Overflow 不是问的地方——Tim Post”](https://meta.stackexchange.com/questions/147100/trogdor-ate-my-homework-tag#comment421799_147100)，所以这里是）。]

基本上，您的代码几乎是正确的（1*不是*素数），没有一些语法问题。

```
isprime x = prime x (floor $ sqrt $ fromIntegral x)   where
  prime x i | i==1 && x > 1  = 1
            | x == i*div x i = 0
            | otherwise      = prime x (i-1)

-- mod x i = x - i*div x i
-- mod x i == 0 = x == i*div x i 
```

`fromIntegral`只是一些适配器，它允许我们使用一个`Integral`值作为参数，`sqrt`它需要一个 `Floating`参数。尝试在 GHCi 提示符下使用`:i sqrt`or等​​（也可以~~阅读一些文档~~google）。`:i Integral`

 ~~但在算法上还有改进的地方。首先，最好从另一个方向尝试除数，从 2 到 number's `sqrt`，因为任何给定的数字都更有可能具有较小的因数而不是较大的因数。其次，在尝试了 2 之后，没有必要尝试任何其他偶数作为可能的除数。这给了我们

```
isprime x | x == 2          = 1
          | x < 2 || even x = 0
          | otherwise       = go 3
  where
    r = floor $ sqrt $ fromIntegral x
    go i | i > r          = 1
         | x == i*div x i = 0        -- really, | rem x i == 0 = 0
         | otherwise      = go (i+2) 
```

* * *

这通常会使用`Bool`s 和一个高阶函数（如`and`捕获递归和测试模式）来写下来（因此它不再是递归的）：

```
isprime x = if isPrime x then 1 else 0

isPrime x = x==2 || x>2 && odd x && 
              and [rem x d /= 0 | d <- [3,5..floor $ sqrt $ fromIntegral x]] 
```

仍然有一些冗余：在我们测试了 3 之后，也不需要测试它的任何倍数（就像我们对 2 和偶数所做的那样）。我们真的只需要通过*主要*因素进行测试：

```
isPrime x = x>1 && and 
    [rem x d /= 0 | d <- takeWhile (<= (floor $ sqrt $ fromIntegral x)) primes]

primes = filter isPrime [2..]
       = 2 : filter isPrime ([3..] `minus` [4,6..])
       = 2 : filter isPrime [3,5..]
       = 2 : 3 : filter isPrime ([5,7..] `minus` [9,15..])
       = 2 : 3 : 5 : filter isPrime (([7,9..]`minus`[9,15..])`minus`[25,35..])
       ........... 
```

这里我们看到了 Eratosthenes 筛的出现，**P** = {3,5, ...} \ **U** {{ *p ² , p ² + 2p,* ...} | *p*中的**p** }（不包含`2`）。

也可以看看：

*   [http://en.wikipedia.org/wiki/Haskell_features#Prime_numbers](http://en.wikipedia.org/wiki/Haskell_features#Prime_numbers)
*   [http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)
*   [http://www.haskell.org/haskellwiki/Prime_numbers](http://www.haskell.org/haskellwiki/Prime_numbers)~~

# java - 一个 ServerSocket 和多个 Socket 之间的通信

> ID：12415458
> 
> 赞同：0
> 
> 时间：2012-09-13T22:05:15.660
> 
> 标签：java, sockets, networking

我试图让我的 ServerSocket 与多个套接字通信，但我不知道如何，到目前为止，我意识到调用 serverSocket.accept() 将返回一个套接字以在服务器和第一个套接字之间进行通信，但是当第二个和 on正在尝试连接到 ServerSocket，它允许它们连接，但没有获得新的套接字与它们通信，那么，我如何与第二个 Socket 进行通信？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T22:07:08.863

简而言之，如果您想同时与两个套接字通信，则需要生成一个新线程。

```
ServerSocket ss = new ServerSocket(... params ...);
while(isRunning) {
    Socket socket = ss.accept();
    Runnable r = new SocketHandler(socket); // write the socket handler class
    Thread t = new Thread(r);
    t.start();
} 
```

现在很明显，您可以对此进行很多很多改进。最明显的是保留 r 和/或 t 的引用，以便您可以更好/更严格地控​​制它们，并能够随意阻止它们。但是这些功能远远超出了这个问题的范围。

# objective-c - 回到基础 - 我想导入一个 UIView，但我看不到它

> ID：12415465
> 
> 赞同：0
> 
> 时间：2012-09-13T22:05:40.423
> 
> 标签：objective-c, ios, uiview, addsubview

正如标题所述，我正在尝试导入 UIView，但无法使其正常工作。第一段代码显示了我在不导入任何内容的情况下尝试做的事情：

```
@interface ViewController : UIViewController
{

  UIView *firstUIView;
  UIView *secondUIView;

}

@end

@implementation ViewController

-(void)firstUIView
{
    firstUIView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 300)];
    firstUIView.backgroundColor = [UIColor redColor];
    [self.view addSubview:firstUIView];
}

-(void)secondUIView
{
    secondUIView = [[UIView alloc] initWithFrame:CGRectMake(0, 100, 320, 100)];
    secondUIView.backgroundColor = [UIColor blueColor];
    [self.view addSubview:secondUIView];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
  // Do any additional setup after loading the view, typically from a nib.

    [self firstUIView];
    [self secondUIView];

}

@end 
```

现在下面的位没有给出相同的结果，但我想要它 - 我哪里出错了？

```
- (void)viewDidLoad
   {
     [super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

     firstUIViewExternal *firstUIView = [[firstUIViewExternal alloc]     initWithFrame:CGRectMake(0, 0, 320, 300)];
     secondUIViewExternal *secondUIView = [[secondUIViewExternal alloc] init];

     [self.view insertSubview:firstUIView aboveSubview:self.view];
     [self.view addSubview:secondUIView];

    }

    @end 
```

firstUIViewExternal 和 secondViewExternal 的代码相同，只是名称不同，如下：

```
-(void)secondUIView
 {
     secondUIView = [[UIView alloc] initWithFrame:CGRectMake(0, 100, 320, 100)];
     secondUIView.backgroundColor = [UIColor blueColor];
     [self addSubview:secondUIView];
 } 
```

然后使用 #imported 导入它们，在上面的 -(void)viewDidLoad 方法中声明使用。

**为什么导入的版本不起作用？**

如果需要，我会提供任何额外的信息。谢谢：-）

这是我想通过导入 UIViews 来实现的，但我得到的是一个空白的白色：

![在此处输入图像描述](../Images/eb38677a9e406e41ae055baf833fd9b9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:25:13.580

我在您的代码中注意到两件事：

1.  您没有指定 secondUIView 的帧大小。
2.  您只需要覆盖“UIViewExternal”视图中的 initWithFrame 方法并从您的 UIView 继承。

您要导入的视图的代码应如下所示：

。H：

```
#import <UIKit/UIKit.h>
@interface firstUIViewExternal : UIView
@end 
```

米：

```
#import "firstUIViewExternal.h"
@implementation
   - (id)initWithFrame:(CGRect)frame
   {
        self = [super initWithFrame:frame];
        if (self) {
                // Initialization code
                self.backgroundColor = [UIColor blueColor];
        }
        return self;
    }
@end 
```

# c# - 运行 SQL Server 报告服务时如何解决“远程服务器返回错误：(401) 未经授权”？

> ID：12415467
> 
> 赞同：2
> 
> 时间：2012-09-13T22:05:48.170
> 
> 标签：c#, ssrs-2008

我正在使用此[代码](http://www.codeproject.com/Articles/25994/Creating-a-Proxy-to-Download-PDF-Reports-from-SRS)从 SSRS 创建和下载 PDF 报告，但收到以下错误：

> 远程服务器返回错误：(401) Unauthorized。

我的代码是：

```
protected void Page_Load(object sender, EventArgs e)
{
    MemoryStream ms;
    // this name is what the user will see when they are prompted for download.
    string customFileName = "NewFileName.pdf";

    if (!this.IsPostBack)
    {
        try
        {
            string strRequest = "http://myServer.com/ReportServer?%2fmetadata_report%2fMetadataReport1&rs%3aCommand=Render&rs%3AFormat=PDF&grpId=3";
            WebRequest request = WebRequest.Create(strRequest);
            request.ContentType = "application/pdf";

            string userName = "username";
            string password = "password";
            string domain = "myServer.com";

            // Create and then pass in network credentials to acecss the reporting server
            System.Net.NetworkCredential credentials = new NetworkCredential(userName, password, domain);
            request.Credentials = credentials;

            HttpWebResponse response = (HttpWebResponse)request.GetResponse();

            using (response)
            {
                // Get the stream from the server
                using (Stream stream = response.GetResponseStream())
                {
                    // Use the ReadFully method from the link above:
                    byte[] data = ReadFully(stream, response.ContentLength);

                    // Return the memory stream.
                    ms = new MemoryStream(data);
                }
            }

            // Clear out the headers that may already exist, then set content type and add a header to name the file
            Response.Clear();
            Response.ContentType = "application/pdf";
            Response.AddHeader("content-disposition", "inline; ");

            //// Write the memory stream containing the pdf file directly to the Response object that gets sent to the client
            ms.WriteTo(Response.OutputStream);
        }
    }
} 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:13:28.363

这是权限问题。

检查这些：

[http://jhonatantirado.wordpress.com/2011/04/16/reporting-services-2008-asking-for-username-and-password/](http://jhonatantirado.wordpress.com/2011/04/16/reporting-services-2008-asking-for-username-and-password/)

[http://forums.asp.net/p/1202398/2103516.aspx](http://forums.asp.net/p/1202398/2103516.aspx)

[将凭据传递给 Sql Report Server 2008](https://stackoverflow.com/questions/671694/passing-credentials-to-sql-report-server-2008)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T22:22:23.963

你能试试这个吗？

```
// Create and then pass in network credentials to acecss the reporting server
CredentialCache cc = new CredentialCache();
cc.Add(new Uri("http://myServer.com/"), "Negotiate", new NetworkCredential("Username", "Password", "Domain"));
request.Credentials = cc; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-29T09:34:02.193

因为这个，过去一周我掉了很多头发。在我的案例中，报告定义与我的 Sql 服务器和 IIS 位于同一台服务器中。我通过从 ssrs 服务器中提取报告来测试我的开发机器上的所有内容。在这一点上，一切都工作得很好。现在，只要我在生产服务器中部署我的应用程序，它就开始给我这个错误。我有一个单独的报告用户，它使用在开发机器上工作的必要权限进行排序。微软的安全功能可以防止双跳。如果你用谷歌搜索 LSA，我相信你会得到足够的。请记住 impersonate=true 不会有任何好处。

以下是我的解决方案，它就像一个魅力：

> 方法 2：禁用身份验证环回检查通过将 HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Lsa 注册表子项中的 DisableLoopbackCheck 注册表项设置为 1，重新启用 Windows Server 2003 中存在的行为。要将 DisableLoopbackCheck 注册表项设置为 1，请按照在客户端计算机上执行以下步骤： 单击开始，单击运行，键入 regedit，然后单击确定。找到并单击以下注册表子项： HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Lsa 右键单击​​ Lsa，指向新建，然后单击 DWORD 值。键入 DisableLoopbackCheck，然后按 Enter。右键单击 DisableLoopbackCheck，然后单击修改。在数值数据框中，键入 1，然后单击确定。退出注册表编辑器。重新启动计算机。注意您必须重新启动服务器才能使此更改生效。默认情况下，Windows Server 2003 SP1 中打开了环回检查功能，并且 DisableLoopbackCheck 注册表项设置为 0（零）。当您禁用身份验证环回检查并打开 Windows Server 2003 服务器以对 NTLM 进行中间人 (MITM) 攻击时，安全性会降低。

详细研究：[阅读这里](https://support.microsoft.com/en-us/help/926642/error-message-when-you-try-to-access-a-server-locally-by-using-its-fqd)

希望它可以帮助某人。

谢谢

# jquery - 引用 Jquery 时出错

> ID：12415474
> 
> 赞同：0
> 
> 时间：2012-09-13T22:06:21.117
> 
> 标签：jquery, asp.net-mvc

我有一个 asp.net MVC 4 解决方案。它工作正常。如果我尝试在 cshtml 文件顶部添加一些链接，如下所示，我的 MVC 解决方案会中断。单击链接时，我看到的只是“未定义”一词。

我做错了什么？

```
 <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T22:10:03.450

你肯定那条线是干什么的？您已经编译并运行了没有该行的解决方案，它没问题吗？那是一个 CSS 文件，它本身与 jQuery 无关。所以我猜你脑子里有一些误报。验证每个步骤，您可能会惊讶于您的问题是其他问题。

您可以发布错误消息的屏幕以及更详细的代码示例吗？

似乎即使使用您提供的新代码示例，这与问题无关。您需要向我们提供更多信息。另请注意，您可能还应该包括 script type="text/javascript"。

添加到 css 链接 type="text/css" />

添加到 javascript 包括 type="text/javascript"

这可能会解决您的问题，但我对此表示怀疑，可能与这些行无关。

# javascript - 向下滑动页面时需要显示标题行

> ID：12415477
> 
> 赞同：1
> 
> 时间：2012-09-13T22:06:26.117
> 
> 标签：javascript, jquery, html, css

我不知道在引用 CSS 时它叫什么，但在 Excel 中，您可以冻结窗格（例如标题行），这样当您向下滚动时，您仍然可以看到您正在查看的数据的列标题。在我的网页上，我有一个类似网格的数据。有什么东西可以用来保存这些数据，***或者***我只需要制作两个单独的表格并努力让第一个和第二个表格对齐吗？

我也对 jQuery 插件或计划旧的 js 解决方案持开放态度。

我添加了一些代码来帮助：

```
<table border="1" class="usertablex" width="100%">
    <thead>
        <tr>
            <th>Name</th>
            <th>City</th>
        </tr>
        </thead>
    <tbody style="height:20px;overflow:scroll;">
        <tr class="subtext">
            <td class="Dwidth175">John Silva</td>
            <td class="Dwidth80" align="center" > New York</td>
        </tr>
        <tr class="subtext">
            <td class="Dwidth175">John Thomas</td>
            <td class="Dwidth80" align="center" > New York</td>
        </tr>
        <tr class="subtext">
            <td class="Dwidth175">Xris</td>
            <td class="Dwidth80" align="center" > New York</td>
        </tr>
        <tr class="subtext">
            <td class="Dwidth175">Bob Denver</td>
            <td class="Dwidth80" align="center" > New York</td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T22:11:33.230

将您的标题放入 a`thead`并将您的数据放入`tbody`，为 the 定义一个固定高度`tbody`并将`overflow:scroll`属性添加到它。应该够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T22:13:59.123

这是一个名为[Pure CSS Scrollable Table with Fixed Header](http://www.imaputz.com/cssStuff/bigFourVersion.html)的工作示例。它通过将`tbody`元素设置为`display:block`,`overflow:auto`并添加特定`tbody`高度来工作。

**编辑：**它适用于 Firefox 和 Chrome，但 IE7、8、9 似乎已经破坏了对原始方法的支持。由于该`<tbody style="display:block; overflow:auto"/>`技巧在目标浏览器中不起作用，我认为您将需要使用两个带有“table-layout：fixed”的表来保持列宽刚性或找到一个将单个表分成两个的插件以同样的方式自动（也许只适用于 IE7+）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T22:10:57.440

尝试使用`position: fixed;`css 选择器

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T22:11:46.847

如果你在标题周围放一个 div 你可以给它 css

```
.divname
{
    position:fixed
    top:0;
} 
```

它将保持在屏幕顶部的位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T14:20:56.000

感谢所有人的建议，但我发现这更适合我的需要。

[http://www.farinspace.com/jquery-scrollable-table-plugin/](http://www.farinspace.com/jquery-scrollable-table-plugin/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-14T23:48:37.853

我已经在 IE8 和 OS X 上的 Chrome 中对此进行了测试。虽然这个解决方案有一些缺点，并且可能需要对其他浏览器进行进一步调整，但我认为这会有所帮助。例如表格必须有一个固定的宽度——为了有一个灵活的宽度，我相信你需要添加一些额外的 JS 来设置窗口大小时的宽度。

基本上，这个想法是你将表格包裹在几个 div 中——设置`position: relative;`在外部的 div 中——在内部的 div 中`overflow: auto;`使用 a `height`，然后克隆`thead`并`position: absolute;`在左上角。

[http://jsfiddle.net/ZDeDw/2/](http://jsfiddle.net/ZDeDw/2/)

任何人都可以分叉并进行改进——只需发表评论即可。

# silverlight - Silverlight 中的 HttpWebRequest

> ID：12415482
> 
> 赞同：0
> 
> 时间：2012-09-13T22:06:57.473
> 
> 标签：silverlight, silverlight-4.0

如何在 Silverlight 中重新创建以下代码？当谈到异步时，我很迷茫。

```
public class StringGet 
{ 
    public static string GetPageAsString(Uri address) 
    { 
        string result = ""; 

        // Create the web request 
        HttpWebRequest request = WebRequest.Create(address) as HttpWebRequest; 

        // Get response 
        using (HttpWebResponse response = request.GetResponse() as HttpWebResponse) 
        { 
            // Get the response stream 
            StreamReader reader = new StreamReader(response.GetResponseStream()); 

            // Read the whole contents and return as a string 
            result = reader.ReadToEnd(); 
        } 
        return result; 
    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-14T02:05:36.767

```
public void DownloadHtml(Uri address){
  WebClient webClient = new WebClient();
  webClient.DownloadStringCompleted += WebClientDownloadString_Complete;
  webClient.DownloadStringAsync(address)
}

private void WebClientDownloadString_Complete(object sender, DownloadStringCompletedEventArgs e) {
  if (e.Error == null) {
    string html = e.Result;
  }
} 
```

# selenium - Selenium IDE：验证文本并单击表中相应行中的链接

> ID：12415483
> 
> 赞同：0
> 
> 时间：2012-09-13T22:07:00.853
> 
> 标签：selenium, selenium-ide

我正在尝试验证 td *NameEdit*中的文本，然后单击相应行中的*EditTemplate*链接。我试图找到正确的 xpath，但我不确定这是否是正确的方法。

到目前为止，测试步骤如下所示：

```
command : click
target  : //a[contains(text(${x}),'view/modify')]
value   : 
```

* * *

```
<table>
    <tbody>
        <tr>
            <td>
                <span id="NameEdit">vpxgX1</span>
            </td>
            <td>
                <span id="ShowInDropDown">No</span>
            </td>
            <td>
                <span id="OwnerName">Test</span>
            </td>
            <td>
                <span id="DateModifiedEdit">9/5/2012 4:38:25 PM</span>
            </td>
            <td>
                <a href="EditTemplate">view/modify</a>
            </td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T22:31:55.820

```
String xPath="//*table/tbody/tr[last()]/a"
String txt=driver.findElement(By.xpath(xPath)).getText().trim();
//verification
Assert.assertTrue(txt.equals("view/modify"));
//clicking:
driver.findElement(By.xpath(xPath)).click(); 
```

# macos - OSX iOS-如何使用终端/脚本从 .cer 和私钥为 APNS 创建 .p12？

> ID：12415487
> 
> 赞同：2
> 
> 时间：2012-09-13T22:07:10.907
> 
> 标签：macos, terminal, push-notification, apple-push-notifications

我可以使用以下方法为 Apple 推送通知服务生成所需的 .pem 文件：

在 Mac 上，使用 Keychain Access 应用程序从私钥创建 CSR 并上传到 Provisioning Portal 并生成所需的证书。下载 .cer 文件并将其拖放到 Keychain Access 应用程序中。选择此 .cer 文件和私钥，然后选择导出 2 项。将其保存为 .p12 文件。使用 openssl 将 .p12 转换为 .pem

这个方法一切正常，除了我想创建一个脚本来自动化这个。

那么有没有办法使用终端（bash脚本，Apple脚本）从下载的.cer文件创建.p12文件）和存储在钥匙串访问中的私钥？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T16:21:22.077

我还没有在 Mac 上尝试过，但是 Adob​​e 有[说明](http://help.adobe.com/en_US/as3/iphone/WS144092a96ffef7cc-371badff126abc17b1f-7fff.html)（阅读第二部分）如何在 Windows 上执行此操作。AFAIK openssl cli for Mac 和 Window 具有通用界面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-01T21:22:05.677

我必须这样做才能使证书与我们的 .NET 推送提供程序服务应用程序配合得很好，所以我将转换过程变成了一个 shell 脚本。我不是该过程中使用的工具的专家，因此我们将不胜感激，但它肯定对我们有用。

检查脚本的开头注释以了解使其全部工作所需的步骤，如果您没有正确使用它，它应该向您吐出一条使用线。

[https://gist.github.com/misterwell/7e27d7396724580352f1](https://gist.github.com/misterwell/7e27d7396724580352f1)

# javascript - 单引号，双引号，加号 Javascript

> ID：12415491
> 
> 赞同：0
> 
> 时间：2012-09-13T22:07:27.827
> 
> 标签：javascript, jquery

我不擅长JS。我试图从这些代码中修改一个 jQuery 插件：

```
aTag +=  " style='"+innerStyle+"'";
aTag += arrow + '<span>text here</span>'; 
```

这些代码：

```
//aTag +=  " style='"+innerStyle+"'";
aTag += arrow + '<span style="'+innerStyle+'">text here</span>'; 
```

基本上我想将 innerStyle 的内容从锚标记移动到跨度标记。然而，在 Firebug 中，我在搬家后看到了这个烂摊子：

```
<span blue;"="" solid="" 1px="" border:="" 25px;="" text-indent:="" transparent;="" -80px="" 5px="" scroll="" no-repeat="" image.png")="" images="" web="" 127.0.0.1="" http:="" style="background: url(">text</span> 
```

为什么它适用于锚标签而不适用于跨度标签？加号（+）有什么用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T22:11:18.843

`+`就像在这种情况下所做的那样（连接文本）。这里的问题是，在第一个实例中生成的 HTML 如下所示：

```
style='some contents with a " symbol' 
```

而在第二种情况下，正在生成的是：

```
style="some contents with a " symbol" 
```

...正如您所见，它已损坏 - 将您的代码更改为：

```
aTag += arrow + "<span style='" + innerStyle + "'>text here</span>"; 
```

它会起作用。

# opencl - 仅在 AMD gpus 上排队的内核比预期的慢

> ID：12415492
> 
> 赞同：1
> 
> 时间：2012-09-13T22:07:30.167
> 
> 标签：opencl

我正在执行如下所示的基准测试

```
CHECK( context = clCreateContext(props, 1, &device, NULL, NULL, &_err); );
CHECK( queue = clCreateCommandQueue(context, device, 0, &_err); );
#define SYNC() clFinish(queue)
#define LAUNCH(glob, loc, kernel) OCL(clEnqueueNDRangeKernel(queue, kernel, 2,\
                                                             NULL, glob, loc,\
                                                             0, NULL, NULL))

/* Build program, set arguments over here */

START;
for (int i = 0; i < iter; i++) {
    LAUNCH(global, local, plus_kernel);
}
SYNC();
STOP;
printf("Time taken (plus) : %lf\n", uSec / iter);

START;
for (int i = 0; i < iter; i++) {
    LAUNCH(global, local, minus_kernel);
}
SYNC();
STOP;
printf("Time taken (minus): %lf\n", uSec / iter);

START;
for (int i = 0; i < iter; i++) {
    LAUNCH(global, local, plus_kernel);
    LAUNCH(global, local, minus_kernel);
}
SYNC();
STOP;
printf("Time taken (both) : %lf\n", uSec / iter); 
```

结果看起来很奇怪：

```
Time taken (plus) : 31.450000
Time taken (minus): 28.120000
Time taken (both) : 2256.380000 
```

`START`, 并且`STOP`只是启动和停止计时器的宏。这是相关的宏。

我不确定为什么排队是内核减慢它们的速度（并且仅在 AMD GPU 上）！

**编辑**我正在使用 Radeon 7970

**编辑**两个内核都在独立内存上运行。这里还有系统信息。

操作系统：Ubuntu 11.10

fglrx信息：

```
display: :0  screen: 0
OpenGL vendor string: Advanced Micro Devices, Inc.
OpenGL renderer string: AMD Radeon HD 7900 Series 
OpenGL version string: 4.2.11762 Compatibility Profile Context 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:11:50.290

我认为答案与在较新的 GPU 上缓存数据有关（特别是 Radeon 7970，它使用了[下一代图形计算 (GCN)](http://www.amd.com/us/Documents/GCN_Architecture_whitepaper.pdf)架构。

这种架构的优点之一是它的缓存功能（此时有点接近 CPU 缓存）。如果您执行这样的调用：

```
PLUS
PLUS 
PLUS
.... 
```

然后是驻留在 GPU 内部缓存中的内存。另一方面，如果您拨打这样的电话：

```
PLUS
MINUS
PLUS 
MINUS
... 
```

如果两个内核具有与之关联的不同内存对象，则数据会从每个 CU 上的硬件设备中踢出，导致需要从非常缓慢的全局内存中引入它们。

两种简单的方法来测试是否是这种情况：

1.  仅运行具有不同迭代次数的 Plus。随着迭代次数的增加，平均时间将减少，因为第一次运行（将数据带入）的成本已摊销。此外，您应该注意到第一次之后的所有调用应该是相对相等的。

2.  使 Plus 和 Minus 内核在相同的内存对象上运行。如果减速的原因是因为内存对象的缓存，那么总体运行时间应该是 PLUS 和 MINUS 的单个运行时间的平均值（可能取决于实验 1）。

让我知道你是否知道这是否真的如此！

# android - 增强现实视野(android)

> ID：12415500
> 
> 赞同：0
> 
> 时间：2012-09-13T22:07:48.770
> 
> 标签：gps-ar 。, android, augmented-reality

我想从头开始制作一个增强现实应用程序。该应用程序是一个可以识别 POI 的[gps-ar 。](/questions/tagged/gps-ar "显示标记为“gps-ar”的问题")正如我注意到的那样，您必须使用指南针、加速度计和您的移动摄像头。我看到了一个在 iphone 中提到的主题和 FOV（视野）中的问题。我如何计算 poi 何时在任何 android 设备的 FOV 中？正如我注意到的那样，计算取决于手机摄像头的规格。

# livevalidation - 提交表单时如何确定哪些 livevalidations 失败

> ID：12415504
> 
> 赞同：2
> 
> 时间：2012-09-13T22:08:10.497
> 
> 标签：livevalidation

我在一个高大的表单中使用 LiveValidation（所以当用户单击表单底部的提交按钮时，一些表单已经滚动到屏幕顶部）。

用户可能没有访问过表单上的每个字段，因此在填写表单时可能没有看到“状态”的验证失败。

如果通过提交表单触发的验证失败，我想确定哪些字段失败（以便我可以将焦点设置到第一个验证失败的字段，以便用户可以看到它）。

如何确定哪些字段未通过验证？答案可能是显而易见的，但它现在逃脱了我。

# binding - POST 中的 Web API 模型绑定问题

> ID：12415506
> 
> 赞同：4
> 
> 时间：2012-09-13T22:08:26.827
> 
> 标签：binding, model, asp.net-web-api

我是 Web API 的新手，这让我很困惑。

这是模型：

```
public class Model
{
   public string firstname { get; set; }
   public string lastname { get; set; }
} 
```

这是控制器：

```
public class TestController : ApiController
{
    [HttpPost]
    public void Test(Model request)
    {

    }
} 
```

我正在使用 html 表单进行发布，它将命中控制器：

```
<html>
<head>
    <title></title>
</head>
<body>
    <form action="/Test" method="post">
        <input type="text" name="​firstname" value="test1" />
        <input type="text" name="lastname" value="test2" />
        <input type="submit" value="Submit" />
    </form>
</body>
</html> 
```

但是，当我调试控制器时，模型对象已经`firstname=null`正确`lastname`出现。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-28T18:17:49.140

所以这是我以前见过的最奇怪的事情。将此用作您的视图：

```
<html>
<head>
    <title></title>
</head>
<body>
    <form action="/Home" method="post">
        @*<input type="text" name="​firstname" value="test1" />*@
        <input type="text" name="firstname" value="test1" />
        <input type="text" name="lastname" value="test2" />

        <input type="submit" value="Submit" />
    </form>
</body>
</html> 
```

**编辑：** 不确定您是否这样做，但基本上您的代码是 this `name="&#8203;firstname"`。不知道你是不是想把它加进去来惹人生气，但你在那里有一个特殊的角色

# c# - 任何类似 C++/CLI 的 Resharper

> ID：12415507
> 
> 赞同：4
> 
> 时间：2012-09-13T22:08:31.760
> 
> 标签：c#, c++-cli, resharper

叫我被宠坏了。但是我非常习惯在 C# 中使用 Resharper 来反转编程风格。例如，调用一个类中不存在的方法，Resharper 会为您创建它，只需几个按键。现在我正在为客户端编写 C++/CLI，而 Resharper 不支持 C++/CLI。这让我慢了下来。有没有像 C++/CLI 的 Resharper 之类的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T02:16:30.360

编辑 1： 只是对我之前的答案的快速更新，Jetbrains 已经发布了 Resharper for C++，这真是太棒了 - 由于解析 c++ 的固有性质，存在一些限制并且不如 Resharper for c# 强大（但是！）但他们保持添加改进 - [Resharper for C++。](https://www.jetbrains.com/resharper-cpp/whatsnew/)

我用过 [http://www.wholetomato.com/](http://www.wholetomato.com/)

对于 c++ cli，虽然不像 r# 那样功能丰富，但它非常易于使用且功能强大。将生产力提高了许多倍。我会推荐这个。

# z3 - SAT/SMT 求解器中的变量消除

> ID：12415509
> 
> 赞同：3
> 
> 时间：2012-09-13T22:08:45.990
> 
> 标签：z3, smt

在 SMT/SAT 求解中，是否有一些技术可以从公式中确定不相关的变量？即那些可以有任何值并且不影响公式可满足性的那些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T22:34:26.393

对于命题可满足性的情况，公式是从句的合取，每个子句都是文字的析取。例如`(A | B) & (!B | A) & (!A | B | A)`

如果一个变量在整个公式中仅作为正字面量或仅作为负数字面出现，则可以安全地删除它，并且可以删除它出现的任何子句并将其视为满足。但从严格意义上讲，这样一个变量的值并不是无关紧要的，因为它可能是唯一可以在满足某些公式的赋值中满足这些子句的变量。此类变量称为纯变量，此阶段称为纯字面消除。

在纯字面消除之前，应清理公式，以便删除包含既未否定又出现否定的变量的任何子句。这可能导致一些变量变得纯粹。此外，在整个求解过程中，当一个变量被识别为纯变量时，它应该被消除。

例如，子句`(!A | B | A)`被平凡满足：无论 A 取什么值，它都被满足。

然后`(A | B) & (!B | A) & (!A | B | A)`->`(A | B) & (!B | A)`

现在 A 是纯的并且可以设置为 True 导致找到令人满意的分配。请注意，无需做出任何决定即可找到解决方案，我们只需应用两个规则。

# visual-studio-2010 - 未找到“CudaCompile”任务

> ID：12415511
> 
> 赞同：0
> 
> 时间：2012-09-13T22:08:51.210
> 
> 标签：visual-studio-2010, visual-studio, cuda

我正在尝试开始使用 CUDA。

我全新安装了 VS2010 专业版的试用版，并在 NVIDIA 的网站上下载了 Visual Studio 插件（[这里](http://developer.nvidia.com/content/nvidia-nsight-visual-studio-edition)）

我安装了正确的驱动程序版本，并且 Nsight 插件会自动安装 CUDA Toolkit。

问题是，无论我尝试编译什么 CUDA 项目，我总是会收到此错误：

```
1>  Compiling CUDA source file kernel.cu...
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\BuildCustomizations\CUDA 4.2.targets(361,9): error MSB3686: Unable to create Xaml task.  Compilation failed.  
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\BuildCustomizations\CUDA 4.2.targets(361,9): error MSB3686: Source file 'C:\Windows\TEMP\uq13nrom.0.cs' could not be found
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\BuildCustomizations\CUDA 4.2.targets(361,9): error MSB3686: No inputs specified
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\BuildCustomizations\CUDA 4.2.targets(361,9): error MSB3686: 
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\BuildCustomizations\CUDA 4.2.targets(361,9): error MSB4036: The "CudaCompile" task was not found 
```

即使使用 CUDA 示例中提供的解决方案，我以前也从未使用过 Visual Studio，而且我在 Web 上找不到与此错误相关的任何资源。

我花了一整天的时间试图修复它。我还尝试卸载/重新安装所有内容；没有成功。

让我抓狂的是，在安装之后，我的项目实际上确实构建了一两个小时。出于某种我无法解释的原因，一切都开始失败。

如果你能提供任何信息，我会非常非常高兴。我没有看到任何其他方法来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T07:59:22.893

所以，我今天早上醒来，直接走到电脑前，手里拿着一杯咖啡，本以为会花一整天时间让我的工具正常工作

. . . 直到我意识到一切正常。

**导致午夜错误的**相同代码今天早上编译得非常完美。****

 **唯一的区别？**Visual Studio 中的更新**。这是我在睡眠期间应用的所有更新的屏幕截图：

![在 VS2010 上执行的更新](../Images/83e5d2a7e10703a9c0ba630d162273fc.png)

我敢打赌，其中一个人解决了我的问题，**可能与 .NET 框架 4**相关。

希望这可以帮助某人；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-21T15:46:14.647

它与配置无关。项目设置文件中有一些东西 [by me/you] 搞砸了。我在将旧项目从 CUDA 4.4 更新到 CUDA 5.5 时遇到了这个问题。我尝试根据新项目文件之一修改旧项目文件......更改构建目标和其他相关内容......

新项目正在编译和执行，而旧的更新项目将我带到这个页面。稍后我将使用解决方案更新线程。当然，在我的情况下，它不是 .NET 框架或任何更新

编辑：我将 .prop 和其他文件从 CUDA 安装目录复制到 Visual Studio 目录，它又开始工作了。也许，我错误地修改了这些文件。**

# iphone - XML PList 到 JSON 转换器并在客户端处理 JSON 响应

> ID：12415512
> 
> 赞同：2
> 
> 时间：2012-09-13T22:08:56.367
> 
> 标签：iphone, ios, json, cocoa-touch, plist

是否有任何工具可以将我的 XML PLIST 转换为 JSON。我对 JSON 格式没有太多想法。我有一个 PLIST，我想要一个等效的 JSON 文件。

此外，我们如何使用目标 C 在 iOS 客户端上处理 JSON 响应。到目前为止，我一直在使用 PList 响应。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T18:26:35.110

最好的方法（在 os x 上）是使用命令行工具 plutil。

它是这样使用的：

```
plutil -convert xml1 filenameToConvert -o outputFilename 
```

这些是“-convert”之后的选项：xml1、binary1、json。为此，我们将使用 json。对于此命令，您必须与 plist 文件位于同一目录中。对于这个测试，我们将 test.plist（由 xcode 以 xml 格式创建的 xml 文件）转换为 json。它将创建一个名为 test.json 的文件：

```
plutil -convert json test.plist -o test.json 
```

要将它转换回来，我们会去：

```
plutil -convert xml1 test.json -o test.plist 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T22:16:55.043

其他人之前曾在此处询问过将 .plist 文件转换为 json[的问题](https://stackoverflow.com/questions/6066350/command-line-tool-for-converting-plist-to-json)。

一旦你有你的 json 格式的数据，你就可以使用 Apple 的`NSJSONSerialization`类，记录[在这里](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)：

> 您使用 NSJSONSerialization 类将 JSON 转换为 Foundation 对象并将 Foundation 对象转换为 JSON。

不过，您还可以使用其他库，其中一些您可以在[此问题](https://stackoverflow.com/questions/286087/best-json-library-to-use-when-developing-an-iphone-application)的答案中找到。

# actionscript-3 - Adobe Flash 无法在框架中运行代码

> ID：12415513
> 
> 赞同：1
> 
> 时间：2012-09-13T22:08:56.410
> 
> 标签：actionscript-3, flash

好的，我对 Flash 还很陌生，最近两天我一直在尝试编写一些 ActionScript。我不能用一段简单的代码来工作：

```
stop(); 
```

所以……很简单吧？;)

我有一个 10 帧动画，我试图让动画在第 5 帧停止。所以我从时间轴中选择第 5 帧，然后打开动作菜单，我只需编写 stop(); 在窗口中。当我运行它时，我收到以下错误消息：

```
In ActionScript 3.0 code cannot be placed directly on objects. Please select an object or use the Code Snippet panel to apply code to the current selection on stage. 
```

我完全明白这是一个简单的问题，答案可能很明显，但我找不到......

谢谢

编辑：

我尝试调试它，它在调试器中有效，但在闪存中无效...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T07:09:36.913

您将代码“放在”对象上，这在 AS3 中是不允许的（感谢上帝）。为了避免它，创建一个新层并将其命名为“代码”（或任何您想要的），然后将代码放入其中

# c# - 如何在实体框架中删除和重新创建表

> ID：12415521
> 
> 赞同：1
> 
> 时间：2012-09-13T22:10:43.450
> 
> 标签：c#, asp.net, sql, asp.net-mvc-3, entity-framework

在我的`Global.asax`文件中，在我的`ApplicationStart()`函数下，我想删除一个表并在应用程序启动时干净地重新创建它。完成此操作的最佳方法是什么，以便每次启动程序时都能无缝？为了更好地了解，我在一个表中跟踪在线用户，但是当应用程序再次启动时，显然我想清除这个表。我需要删除并重新创建表，因为如果我只是截断它，身份种子将不会重新开始（我使用的是 sql azure，所以我无法运行 db 命令来重置种子）。另外，如果我只是截断了我的表格，那么重置种子不是一个坏习惯吗？我已经这样做了，我已经在 id 1000 了，就在测试之后。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T04:04:48.240

您可以使用 ExecuteStoreCommand 方法执行普通的 SQL TRUNCATE 命令。就像这样`dbContext.ExecuteStoreCommand("TRUNCATE TABLE myTable");`。截断从表中删除所有记录并重置自动 ID 的种子。

# objective-c - Box2D 地面盒

> ID：12415523
> 
> 赞同：0
> 
> 时间：2012-09-13T22:11:11.437
> 
> 标签：objective-c, ios, box2d

我对 Box2D 很陌生，我正在尝试用一些盒子和地面制作一个简单的场景，但无论我做什么，盒子都会从地面掉下来。

这就是我初始化我的 Box2D 世界的方式：

```
b2Vec2 gravity;
gravity.Set(0.0f, -9.81f);

bool doSleep = true;

world = new b2World(gravity);
world->SetAllowSleeping(doSleep);
world->SetContinuousPhysics(true);

b2BodyDef groundBodyDef;
groundBodyDef.position.Set(0, 0); // bottom-left corner

b2Body* groundBody = world->CreateBody(&groundBodyDef);

b2EdgeShape groundBox;

groundBox.Set(b2Vec2(0,0), b2Vec2(screenSize.width/PTM_RATIO,0));
groundBody->CreateFixture(&groundBox, 0);

groundBox.Set(b2Vec2(0,screenSize.height/PTM_RATIO), b2Vec2(screenSize.width/PTM_RATIO,screenSize.height/PTM_RATIO));
groundBody->CreateFixture(&groundBox, 0);

groundBox.Set(b2Vec2(0,screenSize.height/PTM_RATIO), b2Vec2(0,0));
groundBody->CreateFixture(&groundBox, 0);

groundBox.Set(b2Vec2(screenSize.width/PTM_RATIO,screenSize.height/PTM_RATIO), b2Vec2(screenSize.width/PTM_RATIO,0));
groundBody->CreateFixture(&groundBox, 0); 
```

这就是我将对象添加到场景中的方式：

```
b2BodyDef bodyDef;
bodyDef.type = b2_dynamicBody;

CGPoint p = CGPointMake(sprite.x, sprite.y);

bodyDef.position.Set(p.x/PTM_RATIO, p.y/PTM_RATIO);
bodyDef.userData = (void*)sprite;

b2Body *body = world->CreateBody(&bodyDef);

b2PolygonShape dynamicBox;

dynamicBox.SetAsBox(sprite.width/PTM_RATIO, sprite.height/PTM_RATIO);

b2FixtureDef fixtureDef;
fixtureDef.shape = &dynamicBox;
fixtureDef.density = 13.0f;
fixtureDef.friction = 0.0f;
fixtureDef.restitution = 0.5f;
body->CreateFixture(&fixtureDef);

body->SetType(b2_dynamicBody);

sprite.physicsBody = body; 
```

这是我的代码：

```
int32 velocityIterations = 8;
int32 positionIterations = 1;

world->Step(1.0f/60.0f, velocityIterations, positionIterations);

for (b2Body* b = world->GetBodyList(); b; b = b->GetNext())
{
    if (b->GetUserData() != NULL)
    {
        SEPhysicsSprite * sprite = (SEPhysicsSprite*)b->GetUserData();

        CGPoint newCenter = CGPointMake(b->GetPosition().x * PTM_RATIO,
                                        b->GetPosition().y * PTM_RATIO);

        sprite.x = newCenter.x;
        sprite.y = newCenter.y;
        sprite.rotation = b->GetAngle();
    }
} 
```

这应该在屏幕底部创建一个地面，但我的对象只是掉了下来。如果我只是一个盒子触摸屏幕的左侧并让它掉下来，它会撞到什么东西，就像它正在碰撞的一个微小的像素，只是反弹一点然后继续下落。

我已经查看了许多针对 iphone 和 c++ 等的示例，它们都有类似的初始化代码，我不明白为什么我的代码不起作用。请停下来！

# visual-studio-2010 - 错误 VS1290：背板配置文件丢失

> ID：12415526
> 
> 赞同：1
> 
> 时间：2012-09-13T22:11:24.183
> 
> 标签：visual-studio-2010, visual-studio

我正在使用 TFS 2012 在 VS2010 上开发一个分层应用程序，该应用程序有一些类库项目、单元测试和一个 mvc4 web。

此错误出现在我的错误列表中：

`VS1290: The backplane configuration file is either missing, corrupted, or not valid and must be repaired. Otherwise, integrations between designers will no longer function. Repair the Visual Studio installation and try again.`

做一些搜索我发现[了这一点](http://connect.microsoft.com/VisualStudio/feedback/details/540386/vs1290-the-backplane-configuration-file-is-either-missing-corrupted-or-not-valid)，但由于不可复制而被关闭。我将不胜感激提供的任何帮助。

请注意，该应用程序**正在**运行，但我还是想解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T18:51:46.283

Saldy 我的解决方案是重新安装 Visual Studio。

# cuda - 编译到 sm_20 时，nvcc 4.2“ptxas 错误：指令 'ld' 的操作数类型非法”

> ID：12415530
> 
> 赞同：2
> 
> 时间：2012-09-13T22:11:50.967
> 
> 标签：cuda

sm_13 编译正常，但 sm_20 多次出现此错误。PTX 文件在不同的编译选项之间完全不同。以下是 PTX 文件中违规行的示例：

```
ld.global.u32   %r1, [cudaTextureLeftSource_3D_UI8]; 
```

# sql - 修改 SQL Server 数据库以支持俄罗斯数据

> ID：12415532
> 
> 赞同：2
> 
> 时间：2012-09-13T22:11:55.113
> 
> 标签：sql, sql-server-2008, unicode, character-encoding, multibyte

我目前正在修改 SQL Server 2008 数据库以支持需要支持多字节字符集的不同数据，例如俄语。我正在将所有`varchar`列转换为`nvarchar`等。我想知道是否需要执行任何其他操作以确保 SQL Server 数据库将支持俄罗斯数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T22:57:52.120

If any of your Varchar fields had a `DEFAULT ''` set, this should be changed to `DEFAULT N''` when you change them to NVarchar

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T22:40:34.280

看看[Server-Side Programming with Unicode](http://msdn.microsoft.com/en-us/library/ms191313%28v=sql.105%29.aspx)。它很简短，而且很重要。

# c# - List 无法解释的异常 . 包含在 List 的 lambda 内 。在哪里

> ID：12415533
> 
> 赞同：1
> 
> 时间：2012-09-13T22:12:25.920
> 
> 标签：c#, .net, linq, lambda

好的，所以我目前正在尝试查找列表中不存在于另一个字符串列表中的所有字符串。这是我的代码目前的样子：

```
var items = GetLiveItems(); // Returns List<string>
var currentItems = GetCurrentItems(); // Returns List<string>, Exception here

var rogueItems = items.Where(i => !currentItems.Contains(i)).ToList(); 
```

当我运行上面的代码时，我在第二行得到一个 System.NullReferenceException。如果我去掉第三行（items.Where...），异常就会消失。这两个列表相当大，第一个有 180k 字符串，第二个是 290k 字符串，但它们每个只有 12 个字符长。

可能是什么问题？

编辑：

```
public static List<string> GetCurrentItems()
{
    var db = DatabaseFactory.CreateDatabase("DB");
    var command = db.GetStoredProcCommand("getItems");

    var items = new List<string>();

    using (var reader = SafeSqlReader(db.ExecuteReader(command)))
    {
        while (reader.Read()) items.Add(reader.GetString("name"));
    }

    return items;
} 
```

编辑：

所以使用下面的代码：

```
var rogueItems = items.Except(currentItems).ToList(); 
```

工作。谁能解释为什么我以前的方法没有？以及其他建议的方法。

编辑：

所以，由于我很难在一个可以与大家分享的项目中重现这个，我想提供这个屏幕截图来证明我没有疯。

[![无法解释的异常](../Images/e5e16286890322452598fde953361a05.png)](https://i.stack.imgur.com/yoHZ7.png)

编辑：

这是带有例外逻辑的屏幕截图，您可以看到我成功地跨过了我之前遇到异常的线路。

[![这里也不例外](../Images/a5b0e4499affb7b13c21d90c99aa39ac.png)](https://i.stack.imgur.com/eyXl3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:15:02.707

听起来像一个延迟加载问题。使用 linq，在您枚举结果之前，查询实际上不会运行。所以问题可能在于你的 SQL 生成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T22:29:00.030

尝试使用`EXCEPT`Linq 方法 - [http://code.msdn.microsoft.com/LINQ-Set-Operators-374f34fe](http://code.msdn.microsoft.com/LINQ-Set-Operators-374f34fe)而不是`WHERE !Contains`

# ant - 如何在 Ant 中重新映射一堆目录？

> ID：12415535
> 
> 赞同：0
> 
> 时间：2012-09-13T22:12:40.977
> 
> 标签：ant

我有以下内容：

```
<dirset dir="../release">
    <include name="*/src/**"/>
</dirset> 
```

但我想把“*/src”去掉。这是怎么做到的？我一直无法弄清楚如何使用`<mapper/>`or来做到这一点`<pathconvert/>`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:19:30.847

如果我正确理解您的问题，您只需要添加一个排除项，即：

```
<dirset dir="../release">
    <include name="*/src/**"/>
    <exclude name="*/src"/>
</dirset> 
```

... 也许：

```
<dirset dir="../release" id="ds">
    <include name="*/src/**"/>
</dirset>
<pathconvert refid="ds" property="ds.prop">
    <mapper type="regexp" from=".*/src/(.*)" to="\1" />
</pathconvert> 
```

# distributed-caching - Infinispan Hotrod 远程服务器异常

> ID：12415537
> 
> 赞同：1
> 
> 时间：2012-09-13T22:12:43.330
> 
> 标签：distributed-caching, infinispan

我正在尝试在远程服务器上使用 Infinispan 远程缓存。我正在使用 Java 应用程序连接到服务器并将对象存储在内存中。

当我使用环回地址 (127.0.0.1) 为本地 hotrod 服务器运行此应用程序时，它可以工作。但是，当我尝试将它用于远程服务器时，它会失败。

这是代码片段：

导入 org.infinispan.client.hotrod.RemoteCache；导入 org.infinispan.client.hotrod.RemoteCacheManager；

```
public class HotRodRemoteClient {

     public void start() {
         RemoteCacheManager manager = new RemoteCacheManager("10.100.9.28");
         RemoteCache<Integer, Ticket> cache = manager.getCache();
      }
} 
```

这是一个例外：

```
ISPN004017: Could not fetch transport
org.infinispan.client.hotrod.exceptions.TransportException:: Could not connect to server: /10.100.9.28:11222
     at org.infinispan.client.hotrod.impl.transport.tcp.TcpTransport.<init>(TcpTransport.java:90)
     at org.infinispan.client.hotrod.impl.transport.tcp.TransportObjectFactory.makeObject(TransportObjectFactory.java:57)
     at org.apache.commons.pool.impl.GenericKeyedObjectPool.borrowObject(GenericKeyedObjectPool.java:1220)
     at org.infinispan.client.hotrod.impl.transport.tcp.TcpTransportFactory.borrowTransportFromPool(TcpTransportFactory.java:254)
     at org.infinispan.client.hotrod.impl.transport.tcp.TcpTransportFactory.getTransport(TcpTransportFactory.java:145)
     at org.infinispan.client.hotrod.impl.operations.FaultTolerantPingOperation.getTransport(FaultTolerantPingOperation.java:44)
     at org.infinispan.client.hotrod.impl.operations.RetryOnFailureOperation.execute(RetryOnFailureOperation.java:67)
     at org.infinispan.client.hotrod.impl.RemoteCacheImpl.ping(RemoteCacheImpl.java:432)
     at org.infinispan.client.hotrod.RemoteCacheManager.ping(RemoteCacheManager.java:538)
     at org.infinispan.client.hotrod.RemoteCacheManager.createRemoteCache(RemoteCacheManager.java:520)
     at org.infinispan.client.hotrod.RemoteCacheManager.getCache(RemoteCacheManager.java:452)
     at org.infinispan.client.hotrod.RemoteCacheManager.getCache(RemoteCacheManager.java:447)
     at com.packtpub.infinispan.chapter2.HotRodRemoteClient.start(HotRodRemoteClient.java:17)
     at com.packtpub.infinispan.chapter2.HotRodRemoteClient.main(HotRodRemoteClient.java:65)

Caused by: java.net.ConnectException: Connection refused
     at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
     at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:599)
     at sun.nio.ch.SocketAdaptor.connect(SocketAdaptor.java:100)
     at org.infinispan.client.hotrod.impl.transport.tcp.TcpTransport.<init>(TcpTransport.java:81)

             ... 13 more 
```

我可以 ping 服务器 10.100.9.28：

```
shell> ping 10.100.9.28

PING 10.100.9.28 (10.100.9.28): 56 data bytes
64 bytes from 10.100.9.28: icmp_seq=0 ttl=64 time=0.261 ms
64 bytes from 10.100.9.28: icmp_seq=1 ttl=64 time=0.184 ms
64 bytes from 10.100.9.28: icmp_seq=2 ttl=64 time=0.290 ms
64 bytes from 10.100.9.28: icmp_seq=3 ttl=64 time=0.285 ms 
```

我使用 Infinispan 5.1.6、Maven 3.04、JDK6.33。

我的 hotrod 服务器在 Centos 5.5 上运行，但 Java 应用程序在 Mac 10.7 上

两台机器上的防火墙都被禁用。

我怀疑这是配置问题。我应该改变什么才能让它工作？

谢谢，

雅各布尼康

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-14T08:40:36.787

您应该在构造函数中添加端口：

```
RemoteCacheManager manager = new RemoteCacheManager("10.100.9.28", port); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-29T16:29:50.850

在配置文件standalone.xml 中查看hotrod 的套接字绑定没有接口或适用的接口。默认standalone.xml：

```
<socket-binding-group name="standard-sockets" default-interface="public" port-offset="${jboss.socket.binding.port-offset:0}">
    <socket-binding name="management-native" interface="management" port="${jboss.management.native.port:9999}"/>
    <socket-binding name="management-http" interface="management" port="${jboss.management.http.port:9990}"/>
    <socket-binding name="management-https" interface="management" port="${jboss.management.https.port:9443}"/>
    <socket-binding name="ajp" port="8009"/>
    <socket-binding name="hotrod" interface="management" port="11222"/>
    <socket-binding name="http" port="8080"/>
    <socket-binding name="https" port="8443"/>
    <socket-binding name="memcached" interface="management" port="11211"/>
    <socket-binding name="remoting" port="4447"/>
    <socket-binding name="txn-recovery-environment" port="4712"/>
    <socket-binding name="txn-status-manager" port="4713"/>
</socket-binding-group> 
```

尝试改变

```
 <socket-binding name="memcached" interface="management" port="11211"/> 
```

为了

```
 <socket-binding name="memcached" port="11211"/> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-05-07T07:35:15.030

> 属性 props = new Properties();
> 
> props.put("infinispan.client.hotrod.server_list", "127.0.0.1:11222");
> 
> RemoteCacheManager manager = new RemoteCacheManager(props);
> 
> RemoteCache defaultCache = manager.getCache();

引用自：[https ://access.redhat.com/site/documentation/en-US/Red_Hat_JBoss_Data_Grid/6.1/html/Getting_Started_Guide/Create_a_New_RemoteCacheManager.html](https://access.redhat.com/site/documentation/en-US/Red_Hat_JBoss_Data_Grid/6.1/html/Getting_Started_Guide/Create_a_New_RemoteCacheManager.html)

希望这可以帮助！

# python - 在python中将没有文件路径的文件名添加到csv

> ID：12415540
> 
> 赞同：1
> 
> 时间：2012-09-13T22:12:45.243
> 
> 标签：python, csv

我正在使用 Blair 的 Python 脚本，它修改 CSV 文件以将文件名添加为最后一列（脚本附加在下面）。但是，我不是单独添加文件名，而是在最后一列中获取路径和文件名。

`cmd`我使用以下命令在 Windows 7 中运行以下脚本：

```
python C:\data\set1\subseta\add_filename.py C:\data\set1\subseta\20100815.csv 
```

生成的 ID 字段由以下内容填充`C:\data\set1\subseta\20100815.csv`，但我只需要`20100815.csv`.

我是python的新手，所以任何建议都值得赞赏！

```
import csv
import sys

def process_file(filename):
    # Read the contents of the file into a list of lines.
    f = open(filename, 'r')
    contents = f.readlines()
    f.close()

    # Use a CSV reader to parse the contents.
    reader = csv.reader(contents)

    # Open the output and create a CSV writer for it.
    f = open(filename, 'wb')
    writer = csv.writer(f)

    # Process the header.
    header = reader.next()
    header.append('ID')
    writer.writerow(header)

    # Process each row of the body.
    for row in reader:
        row.append(filename)
        writer.writerow(row)

    # Close the file and we're done.
    f.close()

# Run the function on all command-line arguments. Note that this does no
# checking for things such as file existence or permissions.
map(process_file, sys.argv[1:]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T22:16:20.783

使用`os.path.basename(filename)`. 有关更多详细信息，请参阅[http://docs.python.org/library/os.path.html](http://docs.python.org/library/os.path.html)。

# php - PHP fsocketopen 虽然是代理

> ID：12415541
> 
> 赞同：1
> 
> 时间：2012-09-13T22:12:48.370
> 
> 标签：php, curl, proxy

我目前正在使用 PHP 打开端口 43 连接，以使用此代码直接从注册表获取 whois 信息。

```
// connecting to the whois server.  
$handle = fsockopen($server, 43);  
        if (!$handle)  
            return false; // connection failure   

        //asking the server  
        fwrite($handle, $domain_name."\r\n");  

        // getting response  
        $response = '';  
        while (!feof($handle))  
            $response .= fgets($handle, 1024);  

        fclose($handle); 
```

它工作得很好，但是我想通过代理服务器连接，所以我通过它路由我的互联网连接。如果这能够使用 cURL，我会使用 curl_setopt($curl_handle, CURLOPT_PROXY, $ip_address . ':4040'); 但我找不到使用 fsocketopen 的方法。如何使用 cURL 或 fsocketopen() 完成此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T23:37:23.610

套接字没有代理。只是网关和路由器在中间（如果有的话）。你在谈论 cURL，它有代理——它只使用 http/s 代理服务。例如，如果您在服务器 example.com:8080 上有 http 代理服务，您首先需要在端口 8080 上打开与服务器 example.com（套接字）的连接，然后发送您的请求，代理将转发您的请求并返回响应。在您的情况下，您只需在特定主机上的端口 43 上打开 tcp 连接并直接与目标服务器交换数据。如果您不想直接执行此操作并透露您的 ip（或其他内容），您也需要一些服务。如果您可以访问其他机器，则可以使用它来完成这项工作。如果你想手动完成，你可以使用 ssh 或类似的东西，如果你想让它自动化，你'

希望这可以帮助。

顺便说一句，我认为没有理由在 whois 服务上使用代理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T23:59:50.720

您可以使用[SOCKS](http://en.wikipedia.org/wiki/SOCKS)代理将 TCP 连接从您的计算机中继到 SOCKS 服务器到 WHOIS 服务器，但您必须通过`fsockopen`.

另一种方法是在服务器上使用[ProxyChains](http://proxychains.sourceforge.net/)并通过 PHP 执行它。我在这里回答了一个类似的问题（[How to capture and feed telnet using php and shell scripting?](https://stackoverflow.com/questions/11461929/how-to-capture-and-feed-telnet-using-php-and-shell-scripting/11462845#11462845)），它展示了如何从 PHP 调用代理链以在远程服务器上执行 WHOIS 命令并读取响应。

# ruby-on-rails-3 - RoR：为什么我得到未定义的方法'hidden_ field_tag'？

> ID：12415544
> 
> 赞同：5
> 
> 时间：2012-09-13T22:13:14.757
> 
> 标签：ruby-on-rails-3, form-helpers

现在我连续有两个表格

```
<section>
        <%= render 'shared/micropost_form_purchase' %>
        <%= render 'shared/micropost_form_sale' %>
      </section> 
```

然后为 _micropost_form_purchase.html.erb

```
<%= form_for(@micropost) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <div class="field no-indent">
    <%= f.text_area :content, placeholder: "What's something else you want to buy?" %>
    <%= f.hidden_field_tag :type, :value => "purchase" %>
  </div>
  <%= f.submit "Post", class: "btn btn-large btn-primary" %>
<% end %> 
```

对于 _micropost_form_sale.html.erb 我有

```
<%= form_for(@micropost, :html => { :id => "sale" }) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <div class="field no-indent">
    <%= f.text_area :content, placeholder: "What's something else you want to buy?" %>
    <%= f.hidden_field_tag :type, :value => "sale" %>
  </div>
  <%= f.submit "Post", class: "btn btn-large btn-primary" %>
<% end %> 
```

所以我希望第一个微博自动成为购买微博（我在微博数据库中有一个名为 type 的列，它是一个我想描述销售或购买的字符串），第二个微博我希望它成为销售微博。我使用 hidden_​​field_tag 是因为我认为您不必在控制器中定义它，但我错了吗？hidden_​​field 更合适吗？如何使用 hidden_​​field_tag？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-13T22:43:04.697

您可以使用：

```
<%= f.hidden_field :type, :value => "sale" %> 
```

或者：

```
<%= hidden_field_tag 'micropost[type]', "sale" %> 
```

但不是：

```
<%= f.hidden_field_tag :type, :value => "sale" %> 
```

Using`f.hidden_field`将使用变量中的值`@micropost`，而`hidden_field_tag`不会使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T22:15:00.270

`f.hidden_field`它不应该是`f.hidden_field_tag`你使用模型的表单助手:)

# ios - iOS 大型 SQLite 数据集性能缓慢

> ID：12415547
> 
> 赞同：1
> 
> 时间：2012-09-13T22:13:27.850
> 
> 标签：ios, performance, sqlite, core-data

我有一个正在为 iOS 开发的应用程序，它根据当前视图的边界框在地图上显示轨迹。因此，当用户在地图上移动时，它将加载适当的轨迹集。

SQLite 表很大，有 260k 行，其中每一行都是轨迹上的一个​​点。该表具有主键 (int)、纬度 (float)、经度 (float) 和名称 (varchar)。纬度和经度列已编入索引。当我查询时，我正在寻找纬度在右下角和左上角纬度之间的位置以及经度在左上角和右下角经度之间的位置。该查询在桌面和手机上都能完美运行，因为它返回了预期的结果。问题是，在我的 Mac 上，查询会立即返回，而在手机上，它可能只需要 4 秒就可以返回任何内容。瓶颈似乎确实是数据库查询，我开始认为这是硬件的限制。

我曾尝试使用 CoreData，这是我首先注意到问题的地方。然后我开始使用 FMDB 访问数据库，但仍然遇到问题。

我没有对数据库或连接进行任何调整。

queryForTrails 方法的核心

```
 if( ![db open] ) {
        [db release];
        NSLog(@"Error opening DB: %@", dbPath);
    }

    FMResultSet *trails = [db executeQueryWithFormat:@"SELECT zname, zlatitude, zlongitude FROM ztrail WHERE ztype = 1 and zlatitude BETWEEN %@ and %@ AND zlongitude BETWEEN %@ and %@ order by zname", lrLat, ulLat, ulLon,lrLon];

    //Start to load the map with data
    NSString *lastTrailName=@"";
    int idx = 0;
    CLLocationCoordinate2D *trailCoords = nil;
    NSUInteger coordSize = 20;

    trailCoords = malloc(sizeof(CLLocationCoordinate2D)*coordSize);
    while( [trails next] ) {
        NSString *trailName = [trails stringForColumnIndex:0];
        NSString *lat = [trails stringForColumnIndex:1];
        NSString *lon = [trails stringForColumnIndex:2];

        if( [lastTrailName compare:trailName] != NSOrderedSame ) {
            if(idx > 0) {
                [trailLines addObject:[MKPolyline polylineWithCoordinates:trailCoords count:idx]];
                free(trailCoords);
                idx = 0;
                coordSize = 20;
            }
            lastTrailName = trailName;
            trailCoords = malloc(sizeof(CLLocationCoordinate2D)*coordSize);
        }

        if(idx == coordSize) {
            coordSize *= 2;
            trailCoords = realloc(trailCoords, sizeof(CLLocationCoordinate2D) * coordSize);
        }

        trailCoords[idx++] = CLLocationCoordinate2DMake([lat doubleValue], [lon doubleValue]);
    }

    //Build the new polyline
    [trailLines addObject:[MKPolyline polylineWithCoordinates:trailCoords count:idx]];
    //NSLog(@"Num Trails: %d", [trailLines count]);
    free(trailCoords);
    //NSLog(@"Num of Points %d for %@",idx, lastTrailName);

    if( [trailLines count] > 0 ) {
        dispatch_async(dispatch_get_main_queue(),^{
            [mapView addOverlays:trailLines];
        });
    } 
```

如果需要，我可以提供一些 NSLog 数据。我也会为 Android 做同样的应用程序，所以我现在想尝试解决性能问题。

# mysql - 我需要一个好的 MySQL 数据库结构

> ID：12415548
> 
> 赞同：0
> 
> 时间：2012-09-13T22:13:41.903
> 
> 标签：mysql, database, layout, structure

我对 MySQL 很陌生，并不真正知道如何为以下设置创建一个好的布局：

一个riddim（节奏）可以容纳几首曲调（歌曲）。一首歌具有以下信息/字段：名称、艺术家、标签、制作人、最后修改的时间戳、年份、歌词、标志、标签、来源。

riddim 具有字段名称、上次修改时间、流派、youtube 和图像。

这是一个更好理解的插图：http: [//img194.imageshack.us/img194/6553/93112345.png](http://img194.imageshack.us/img194/6553/93112345.png)

如果我将所有信息放在一个表中，我将有冗余数据（例如流派或图像），因为每行带有艺术家/曲调的都会有它所唱的旋律（节奏）。

目前我的表格如下所示：

RIDDIMS 表：

```
+---------------+--------------+------+-----+-------------------+-------+
| Field         | Type         | Null | Key | Default           | Extra |
+---------------+--------------+------+-----+-------------------+-------+
| riddim        | varchar(255) | NO   | MUL | NULL              |       |
| genre         | varchar(9)   | NO   |     | NULL              |       |
| youtube       | varchar(11)  | NO   |     | NULL              |       |
| image         | varchar(11)  | NO   |     | NULL              |       |
| last_modified | timestamp    | NO   |     | CURRENT_TIMESTAMP |       |
+---------------+--------------+------+-----+-------------------+-------+ 
```

调音表：

```
+---------------+--------------+------+-----+-------------------+-------+
| Field         | Type         | Null | Key | Default           | Extra |
+---------------+--------------+------+-----+-------------------+-------+
| riddim        | varchar(255) | NO   | MUL | NULL              |       |
| artist        | varchar(255) | NO   | MUL | NULL              |       |
| tune          | varchar(255) | NO   |     | NULL              |       |
| label         | varchar(255) | NO   |     | NULL              |       |
| producer      | varchar(255) | NO   |     | NULL              |       |
| year          | varchar(4)   | NO   |     | NULL              |       |
| lyrics        | text         | NO   |     | NULL              |       |
| flag          | varchar(12)  | NO   |     | NULL              |       |
| tag           | varchar(255) | NO   |     | NULL              |       |
| source        | varchar(255) | NO   |     | NULL              |       |
| last_modified | timestamp    | YES  |     | CURRENT_TIMESTAMP |       |
+---------------+--------------+------+-----+-------------------+-------+ 
```

但我敢肯定这不是一个好的布局。你们对表/数据库结构的外观有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:18:38.753

将“谜语”和“曲调”放在单独的表格中是使用正确的结构。基本上将您的数据建模为符号对象，如果某些字段实际上属于两个不同的对象，它应该在两个不同的表中。

要将两个表连接在一起，请在属于父表的表上（在这种情况下，一个riddem 有很多曲调，因此曲调属于riddem）放置一个对父id 字段的引用。所以在这种情况下，tunes 表应该有一个名为“riddem_id”的字段，该字段设置为该曲调所属的riddem。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T22:22:20.967

tunes 表的riddim 字段应该是riddims 表主键的[外键。](http://en.wikipedia.org/wiki/Foreign_key)通常，除非您绝对确定它们是唯一的，否则将文本字段用作主键并不是一个好主意。更安全的选择是使用一个名为 id 或 riddim_id 的字段，它是一个带有 AUTO_INCREMENT 属性集的数字。这样，您添加的每个新项目都将自动获得自己的唯一密钥。然后将外键设置为与另一个表中链接记录的 id 具有相同的值。

如果您使用这种结构，那么您不需要（实际上也不应该）复制任何数据。要查找有关曲调所在的谜语的信息，请在选择查询中进行[连接。](http://en.wikipedia.org/wiki/Join_%28SQL%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T22:45:16.590

MySQL 与其他关系数据库没有太大区别。因此，如果您有使用 Oracle、DB2、PostgreSQL 的经验，您可以在您的设计中使用它。

在您的解释中，您没有提到两个表之间可能存在的父子关系。曲调表是riddim表的父级吗？

如果是真的，您必须使用riddim 表中的riddim 字段作为指向tunes 表中主要riddim 字段的外键。您可以拥有多个引用单曲记录的riddim 记录。

为什么 image 和 youtube 有 11 个字符对我来说并不明显。如果 youtune 字段包含实际 URL，则需要更多字符。您是否要使用枚举器对 youtube 和图像字段进行编码以避免长字符串？

问问自己，您的典型搜索将如何执行？最重要的搜索领域是什么？

我不确定为什么您对年份字段使用 VARCHAR 类型。SMALLINT 对于搜索和存储来说就足够了，而且效率更高。通常，整数类型对于搜索操作要高效得多。

# regex - 用于解析 Active Directory distinctName 的正则表达式

> ID：12415552
> 
> 赞同：0
> 
> 时间：2012-09-13T22:13:58.330
> 
> 标签：regex, parsing, active-directory, distinguishedname

AD 中 distinctname 的值通常采用以下格式：

```
CN=lastName\,firstName,OU=Users - XYZ,OU=Users-Test Place,OU=UsersAll,DC=Dom1,DC=Dom2 
```

我想使用正则表达式解析它并取回以下值

```
CN=lastName\, firstName
OU=Users - XYZ
OU=Users-Test Place
OU=UsersAll
DC=Dom1
DC=Dom2 
```

模式 "\w+=\w+" 没有帮助。

我看到了问题，但不知所措。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T00:46:20.697

Distinguished Names 的语法在 RFC 4514（它取代了 RFC 2253）中进行了规定，并且它并不能用正则表达式完全解析。OpenLDAP 包含一些库函数，它们将解析和验证它的价值。但是，如果您需要一个快速而简单的正则表达式，您可以使用以下 Posix ERE：（`([^\,]|\\.)*`在 Perl、Python 或具有类似正则表达式扩展的其他语言中，使用`(?:[^\,]|\\.)*`以避免不必要的捕获。）

这意味着“匹配除`,`and之外的任何字符序列`\`，可能还包括一对`\`和任何单个字符”。这是实际 LDAP 规范的超集，它不允许`\`后跟除十六进制数字或少数特殊字符之一以外的任何内容，因此它将接受许多无效的 DN 组件，但它应该接受所有有效的而且，我相信，永远不会吞下分隔 DN 组件的逗号。

这是一个使用 grep 在 bash 中的简单测试：

```
$ echo 'CN=lastName\, firstName,OU=Users - XYZ,OU=Users-Test Place,OU=UsersAll,DC=Dom1,DC=Dom2' |
> grep -oE '([^\,]|\\.)*'
CN=lastName\, firstName
OU=Users - XYZ
OU=Users-Test Place
OU=UsersAll
DC=Dom1
DC=Dom2 
```

# java - 取消/中止/中断 spring-android resttemplate 请求

> ID：12415554
> 
> 赞同：4
> 
> 时间：2012-09-13T22:14:07.783
> 
> 标签：java, android, multithreading, networking, resttemplate

我在专用于执行 spring android 请求的线程中使用 spring android。

我无法中止从 spring android 启动的请求（例如 getForObject ）。

我尝试过了 ：

*   到达底层输入流以关闭，但它完全包裹在 springandroid restemplate 中，无法从外部访问
*   中断线程
*   获取其余模板的请求工厂并调用destroy
*   获取工厂的连接管理器并调用shutdown
*   更改其余模板工厂的 http 客户端
*   更改其余模板工厂的请求工厂

但我无法中止请求并快速发送新请求。第一个必须达到超时。

我怎么能“杀死”一个 spring android 请求以获得一个稳定的休息模板来发送一个新请求？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T08:01:17.240

我建议使用 ResponseExtractor。

您可以调用 RestTemplate 的执行方法，如下所示。

```
 File file = (File) restTemplate.execute(rootUrl.concat("/vocasets/{vocasetId}/{version}"), HttpMethod.GET, requestCallabck,
            responseExtractor, uriVariables); 
```

ResponseExtractor 有 extractData 方法。您可以通过响应的 getBody() 从 extractData 方法获取正文输入流。

扩展 ResponseExtractor 以取消您的请求。

祝你好运。

就我而言，我使用了 Listener 方式。

```
static class FileResponseExtractor implements ResponseExtractor<File> {
            ...

    public void setListener(ReceivingListener listener) {
        this.listener = listener;
    }

    @Override
    public File extractData(ClientHttpResponse response) throws IOException {
        InputStream is = response.getBody();

        long contentLength = response.getHeaders().getContentLength();

        long availableSpace = AvailableSpaceHandler.getExternalAvailableSpaceInMB();
        long availableBytes = AvailableSpaceHandler.getExternalAvailableSpaceInBytes();
        Log.d(TAG, "available space: " + availableSpace + " MB");

        long spareSize = 1024 * 1024 * 100;
        if(availableBytes < contentLength + spareSize) {
            throw new NotEnoughWritableMemoryException(availableSpace);
        }

        File f = new File(temporaryFileName);
        if (f.exists())
            f.delete();
        f.createNewFile();

        OutputStream o = new FileOutputStream(f);

        listener.onStart(contentLength, null);
        boolean cancel = false;
        try {
            byte buf[] = new byte[bufferSize];
            int len;
            long sum = 0;
            while ((len = is.read(buf)) > 0) {
                o.write(buf, 0, len);
                sum += len;
                listener.onReceiving(sum, len, null);

                cancel = !listener.onContinue();
                if(cancel) {
                    Log.d(TAG, "Cancelled!!!");
                    throw new CancellationException();
                }
            }
        } finally {
            o.close();
            is.close();
            listener.onFinish(null);

            if(cancel) {
                f.delete();
            }
        }

        return f;

    }

} 
```

# visual-studio-2012 - VS2012 - 为什么我的主 UI 线程显示绿色调试语句？

> ID：12415557
> 
> 赞同：13
> 
> 时间：2012-09-13T22:14:36.553
> 
> 标签：visual-studio-2012

***编辑****：如果您遇到同样的问题（并且您习惯于在 VS2010 下看不到此问题），请在下面发表评论，以便我知道这不仅仅是我 - 但请务必检查 Han 的回答以确保这些情况都不会出现。 ..*

* * *

我一直在更新我的应用程序以在 VS2012 RTM 中使用 .NET 4.5 运行，并注意到一些我不太理解的东西，即意外地以绿色突出显示的语句（而不是黄色）。

![在此处输入图像描述](../Images/30884f79310daf310d90c1e08e506d2f.png)

现在我很清楚这*应该*是什么意思，IDE 甚至向我展示了一些解释工具提示。

> 这是该线程从当前函数返回时要执行的下一条语句

但是，绝对没有关于此代码的异步或线程。在这个简单的例子中，我相信你会同意它`string.ToUpper()`不会在另一个线程中关闭。我可以单步执行代码没有问题。

没有其他事情发生，我在主线程上，你可以在这里看到。

![s](../Images/3f482864326c210ab68499c5eaff4112.png)

我**正在**使用`async`and `await`（`MVVM-Light`上述方法是 RelayCommand 的结果），但即使代码路径直接关闭事件处理程序（例如 `PreviewKeyDown`.

![在此处输入图像描述](../Images/8b88495560559e1c60573bcca86351c8.png)

如果我创建一个新应用程序，我无法复制它——颜色如预期的那样是黄色的——即使使用`await`.

有人知道吗？它开始让我发疯！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T13:09:01.867

当当前指令指针不在语句的开头时，它是绿色*的*。一些常见的原因：

*   在线程代码中很常见，在一个线程中设置断点并将上下文切换到另一个线程。另一个线程将在完全随机的位置被调试器中断。通常在您没有源代码或调试信息的代码中，例如 String.ToUpper()，调试器只能显示“最接近”的源代码
*   使用 Debugger + Break All 进入调试器。与上面相同的想法，指令指针将位于随机地址
*   在您没有调试信息的代码中获取异常。编辑器显示调用堆栈中它确实有源代码的最后一个条目。您需要调用堆栈窗口来查看引发实际异常的位置。或者异常助手，它存在的原因
*   调试优化代码。抖动优化器严重扰乱代码，使得调试器可能无法准确显示当前位置
*   有过时的调试信息或在调试时编辑代码
*   当项目的目标平台设置为 AnyCPU 时，会发生由 x64 抖动生成的调试代码。x64 抖动有许多未得到修复的长期错误，生成错误的调试信息就是其中之一。直到完全重写后才解决的问题，由 RyuJIT 项目完成，并首次在 .NET 版本 4.6 中提供。在您的 EXE 项目中以 x86 为目标是一种解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-15T17:52:25.187

我知道这是旧帖子，但我想用我的经验回答这个问题。我最近在我的一个 WCF 应用程序中遇到了同样的问题。在调试并仔细查看服务日志后，我发现我的代码给出了这个错误，因为服务达到了代码执行的最大允许限制，一旦服务达到最大允许时间限制，它就试图卸载当前的调试会话。

> ***绿色语句中的错误***：这是线程返回时要执行的下一条语句

因此，为了避免这个问题，您可以尝试查看任何潜在的代码（代码/服务超时或任何其他代码块），它们试图卸载您当前正在执行的代码上下文并尝试修复它，此外@Hans 给出的原始解释仍然非常多与解决此问题相关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-11T10:58:01.417

其实我也面临这个问题。这是因为我在横向模式下错过了一些布局组件，所以检查所有 Id 和组件并运行，你不会得到这个错误。

# c# - 有没有办法以编程方式从 WCF 主机推送 NamepaceMappings？

> ID：12415559
> 
> 赞同：2
> 
> 时间：2012-09-13T22:14:45.100
> 
> 标签：c#, visual-studio-2010, wcf, .net-4.0

我有一个 WCF 服务，需要我将以下内容添加到`Reference.svcmap`

```
<NamespaceMappings>
  <NamespaceMapping TargetNamespace="http://schemas.datacontract.org/2004/07/System.DirectoryServices" 
                    ClrNamespace="System.DirectoryServices" />
</NamespaceMappings> 
```

如果我没有该行，我会收到以下错误：

```
警告 1 自定义工具警告：无法导入 wsdl:portType
详细信息：运行 WSDL 导入扩展时引发异常：
 System.ServiceModel.Description.DataContractSerializerMessageContractImporter
错误：具有数据协定名称“DirectoryServicesCOMException”的 ISerializable 类型
  在命名空间'http://schemas.datacontract.org/2004/07/System.DirectoryServices'
  无法导入。无法自定义数据协定命名空间
  ISerializable 类型和生成的命名空间
  “DomainManagement.Console.UserManagementProxy”与所需的 CLR 不匹配
  命名空间“System.DirectoryServices”。检查所需的命名空间是否已
  映射到不同的数据合约命名空间并考虑映射它
  显式使用命名空间集合。
错误源的 XPath：
 //wsdl:definitions[@targetNamespace='http://example.com/v1']/wsdl:portType[@name='IUserManagement']

```

我也知道在客户端和服务器之间有一个通用的 DLL 也可以解决这个问题，但我不想要求任何客户端也有随附的 DLL 来与服务通信。

我了解问题和修复（dll 和编辑文件）。我想知道的是：在主机端有什么我可以做的，所以每个订阅此服务的客户端在 Visual Studio 中生成代理后不需要对服务进行任何额外的配置？（即使用`SvcUtil`和使用`/n:http://schemas.datacontract.org/2004/07/System.DirectoryServices,System.DirectoryServices`参数不是首选选项）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:29:12.263

我认为这仅仅是因为某些类型“不能很好地序列化”。尝试跨 WCF 传递 NameValueCollection（在 VS2010 之前）会产生与您看到的完全相同的错误，尽管它是可序列化的。我不时看到的另一个是 SqlException（[请参见此处](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/e5356dcd-0097-43fb-b36e-aa26f34bc45c/)）。

唉，我不知道有任何服务器端解决方案。我发现为客户端提供“服务接口”DLL 是最简洁的方法 - 它避免了通过 svcutil/add 服务引用生成客户端代码，但您似乎有理由不这样做。另一种方法是重构您的服务器端代码以避免传递`DirectoryServicesCOMException`. 您可以尝试谷歌搜索“NameValueCollection WCF 序列化”问题，看看当时是否有任何建议的解决方法可能适用于您的方案。我怀疑不是，因为这是由它在内部实现某些接口的方式引起的。

# ios - 导入 CoreData 时检查重复项

> ID：12415564
> 
> 赞同：0
> 
> 时间：2012-09-13T22:15:46.680
> 
> 标签：ios, performance, core-data, restkit, nsfetchrequest

我正在使用 RestKit 将数据导入核心数据存储，并且需要检查重复项。如果该商品已在商店中，我想使用最新属性对其进行更新。如果它是一个新项目，我想创建它。

导入很慢，所以我使用 Instruments 并看到导入的最长部分是检查项目是否已经存在（使用 fetch 请求）

所以我想知道是否检查该项目是否已经在商店中，是否更快：

*   使用 countForFetchRequest 查看 item 是否已经存在，然后执行 FetchRequest 返回 item 进行更新或
*   只需执行FetchRequest 以获取要更新的项目
*   还是有更好的方法来做到这一点？

我认为 countForFetchRequest 会更快，因为没有返回整个 NSManagedObject，并且只有在我知道将有一个 NSManagedObject 时才执行获取请求。

谢谢

`- (Product *)productWithId:(int)productID {`

```
 NSManagedObjectContext *context = [Model sharedInstance].managedObjectContext;
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"product_id == %d", productID];
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    request.entity = [NSEntityDescription entityForName:@"Product" inManagedObjectContext:context];
    request.predicate = predicate;
    request.fetchLimit = 1;

    NSError *error = nil;

    NSUInteger count = [context countForFetchRequest:request error:&error];

    if (!error && count == 1) {
        NSArray *results = [context executeFetchRequest:request error:&error];
        if (!error && [results count]) {
            return [results objectAtIndex:0];
        }
        return nil;
    }

    return nil; 
```

`}`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T11:09:58.000

据我所知，在 Core Data 中查找和/或导入对象的最佳方式在[Implementing Find-or-Create Efficiently](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/CoreData/Articles/cdImporting.html)中有描述。

该文档描述了一种基于排序数据的*查找或创建模式：您从服务下载的数据和您从商店获取的数据。*

我真的建议您阅读我提供的链接。你会看到你的表演加速了。

显然你应该在后台完成工作，防止主线程冻结，使用线程限制或新的 iOS Core Data queue API。

希望有帮助。

# php - 获取页面 URL 以便使用它来包含

> ID：12415566
> 
> 赞同：0
> 
> 时间：2012-09-13T22:15:59.820
> 
> 标签：php, include

所以我制作了一个脚本，这样我就可以使用包含来获取我的页眉、页面和页脚。如果文件不存在，则为 404。一切正常。现在我的问题是我应该如何将 url 的结尾作为页面。例如，

我想这样做，以便当有人访问 example.com/home/test 时，它会自动包含 test.php 例如。

故事的道德启示。如何获取页面名称。然后用它来“屏蔽”页面的结尾，这样我就不需要让每个 URL 都是 something.com/home/?p=home

到目前为止，这是我的代码。

```
<?php 
include($_SERVER['DOCUMENT_ROOT'].'/home/lib/php/_dc.php');
include($_SERVER['DOCUMENT_ROOT'].'/home/lib/php/_home_fns.php');

$script   = $_SERVER['SCRIPT_NAME']; //This returns /home/index.php for example =/
error_reporting(E_ALL);
include($_SERVER['DOCUMENT_ROOT'].'/home/default/header.php');
if($_GET["p"] == 'home' || !isset($_GET["p"])) {
    include($_SERVER['DOCUMENT_ROOT'].'/home/pages/home.php');
} else if(file_exists($_SERVER['DOCUMENT_ROOT'].'/home/pages/'.$_GET["p"].'.php'))      {
    include($_SERVER['DOCUMENT_ROOT'].'/home/pages/'.$_GET["p"].'.php');    
} else {
    include($_SERVER['DOCUMENT_ROOT'].'/home/default/404.php'); 
}
include($_SERVER['DOCUMENT_ROOT'].'/home/default/footer.php');
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:21:23.757

PHP 本身不会是这里的最佳选择，除非您希望您的网站到处都是空的“重定向”PHP 文件。我建议查看 Apache 服务器的`mod_rewrite`模块。这里有[一些](http://www.addedbytes.com/articles/for-beginners/url-rewriting-for-beginners/)[指南](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)可以帮助您入门。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T22:25:28.737

最简单的方法是在 /home/whatever 文件夹中有一个 index.php 文件。然后使用 $_SERVER['PHP_SELF'] 之类的东西并提取名称，如果您想自动化它，或者由于您已经自己编写文件，请将其硬编码到其中。

然而，这看起来完全错误，如果您打算创建一个更复杂/更严肃的应用程序，您可能应该研究 mod-rewrite。

我还推荐 cakePHP 框架，它可以解决整个控制器路径。

# wpf - 如何为从 Enum WPF 生成的单选按钮设置 IsChecked = True

> ID：12415568
> 
> 赞同：0
> 
> 时间：2012-09-13T22:16:12.400
> 
> 标签：wpf, mvvm, wpf-controls, wpftoolkit

我从枚举中生成了 RadioButtons，如下所示。

```
 <ObjectDataProvider MethodName="GetValues" ObjectType="{x:Type sys:Enum}" x:Key="GetRadioTypes">
            <ObjectDataProvider.MethodParameters>
                <x:Type TypeName="Enums:RadioTypes"/>
            </ObjectDataProvider.MethodParameters>
        </ObjectDataProvider>

<ItemsControl ItemsSource="{Binding Source={StaticResource GetRadioTypes}}" VerticalAlignment="Center">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <RadioButton  Margin="10" GroupName="MyRadios" Checked="RadioButton_Checked"  Content="{Binding}" >
                         </RadioButton>
                    </StackPanel>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl> 
```

现在我有兴趣检查默认生成的第一个 RadioButton。我怎样才能做到这一点？？

如果我在 ItemTemplate 中为 RadioButton 设置了 IsChecked = "True"，则默认情况下会检查生成我不想发生的每个人。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T03:38:15.137

例如，如果您将 itemscontrol 更改为列表框，您将可以访问 SelectedItem 属性。将其绑定到视图模型、SelectedRadio（或其他）中的属性，然后将 SelectedRadio 设置为 vewmodel 构造函数中的第一个枚举。

# java - 为 Set 中的元素分解新类与字符串值的好处

> ID：12415569
> 
> 赞同：1
> 
> 时间：2012-09-13T22:16:15.380
> 
> 标签：java

这更像是一个设计问题，涉及代码简单性与性能。

假设您要确保给定用户 ID 的一组值在两个系统之间是相同的。此处的示例是检查一个学生 ID 在系统 A 和系统 B 中的课程注册数量是否相同。

为此，我们创建：

```
List<String> studentList = new ArrayList<String>();
Set<String> sysAEnrollments = new HashSet<String>();
Set<String> sysBEnrollments = new HashSet<String>();
private Map<String, String> badEnrollList = new HashMap<String, String>(); 
```

并适当地填写它们，给定一个学生 id 列表（studentList）：

```
studentList = getCurrentStudentList();

for (String id : studentList){
   sysAEnrollments = getSysAEnrollments(id);
   sysBEnrollments = getSysBEnrollments(id);
   if (!sysAEnrollments.containsAll(sysBEnrollments)){
      badEnrollList.put(id, getBadEnrollmentsById(id, sysAEnrollments, sysBEnrollments));
   }
} 
```

**问题：**方法“ *getBadEnrollmentsById* ”应该返回什么？

要么是具有足够含义的串联字符串，因此可以将其打印出来。或者有一个新对象，例如另一个包含课程 ID 列表的集合，可用于进一步处理但更难用于打印输出。

为了清晰和性能，是否值得彻底设计所有预期对象或用连接字符串替换其中一些？

**笔记：**

*   系统A优先作为权威来源
*   *getBadEnrollmentsById*的输出应该包含所有课程并标记系统 B 中缺少的课程。

**建议的解决方案：（2012-SEP-14）**

**编辑（2012-SEP-17）：更新 Course 类以包括 hashCode 和 equals**

根据 user351721 的建议，我继续对符合预期结果/要求的剩余对象进行建模。微小的改变产生了很大的不同，让我能够克服这个设计缺陷并完成实现。

修改后的集合是：

```
List<String> studentList = new ArrayList<String>();
Enrollment sysAEnrollments;
Enrollment sysBEnrollments;
Map<String, List<String>> badEnrollList = new HashMap<String, List<String>>(); 
```

我们填充注册：

```
for (String id : studentList){
    sysAEnrollments = getSysAEnrollments(id);
    sysBEnrollments = getSysBEnrollments(id);
    if (!sysAEnrollments.getCourses().containsAll(sysBEnrollments.getCourses())){
        List<String> missingCourses = getProblemEnrollmentListById(id, sysAEnrollments, sysBEnrollments);
        badEnrollList.put(id, missingCourses);
    }
} 
```

因此，现在可以通过获取每个 ArrayList 并打印课程名称来从 badEnrollList 打印输出。带有 * 的课程名称意味着它在 sysB 中缺失。

Enrollment 类如下所示：

```
public class Enrollment {
    private Set<Course> courses = new HashSet<Course>();
    public void setCourses(Set<Course> courses){
        this.courses = courses;
    }
    public Set<Course> getCourses(){
        return this.courses;
    }
} 
```

Course 课程最终是这样的：

```
public class Course {
    private String id;
    private String name;

    public String getId() {
        return id;
    }
    public void setId(final String id) {
        this.id = id;
    }
    public String getName() {
        return name;
    }
    public void setName(final String name) {
        this.name = name;
    }

    // Must override hashCode() and equals()
    @Override
    public boolean equals(Object o){
        if (o == this)
            return true;
        if (!(o instanceof Course))
            return false;
        Course c = (Course) o;
        return c.id.equals(this.id) && c.name.equals(this.name);
    }

    @Override 
    public int hashCode(){
        // Magic numbers as shown on Joshua Bloch's book "Effective Java" 2nd Edition, p.48
        int result = 17;
        result = 31 * this.id.hashCode();
        result = 31 * this.name.hashCode();
        return result;
    }   
} 
```

这些变化可能看起来很微妙，但重要的线索是 Enrollments 不是字符串的集合，Enrollments 是 Courses 的集合，并且每个 Course 都有一个名称和一个可用性属性。它们似乎没有做太多，但通过使用它们，我定义了我正在使用的对象，并记录了这些类在未来如何被重用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:47:05.340

> 连接字符串

这意味着您必须定义一个模式和相应的一组有效字符串，并实现对实体类的验证和转换。提供一个接口或类将使您在一年左右的时间内更容易更新您的代码，更不用说可能与您的应用程序一起工作的其他程序员了。为什么不将学生、注册或课程对象存储在 中`badEnrollList`？这些对象看起来如何，您想用它们做什么？

一般来说：是的，彻底设计所有预期的对象是值得的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T23:10:53.350

我觉得一个集合，例如`List<String>`将是一个理想的返回值。这使您可以更有效地捕获两组之间的多个差异，并更直观地处理第二个对象中缺失的课程。打印列表也不会那么难 - 取决于您希望如何传达信息。

还值得一提的是，for 的`.equals()`方法`Set`是一种更简洁、更直观的方式来确保两组之间的等价性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T01:46:16.493

“Growing Object-Oriented Software, Guided by Tests”解决了这个问题：第 7 章，“值类型”。值得一读。摘录：

> 我们编写的代码越多，我们就越相信我们应该定义类型来表示域中的值概念，即使它们没有多大作用。它有助于创建一个更不言自明的一致域模型。例如，如果我们在系统中创建一个 Item 类型，而不仅仅是使用 String，我们可以找到与更改相关的所有代码，而无需跟踪方法调用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T01:23:14.540

我不会使用所有这些集合和映射，而是使用反映实际业务对象的普通旧 Java 对象 (POJO)。根据您的指示，您的学生具有某种 id，并且在系统 A 和系统 B 上注册了课程。我将构建一组定义如下的学生对象：

```
public class Student {
    private String id;
    private List<String> enrollmentsA;
    private List<String> enrollmentsB;

    // appropriate getters and setters
} 
```

根据您是否想对类做任何其他事情，甚至最好创建某种形式的 EnrolledClass 对象来表示它。

在学生班级中，我将有一种方法来确定“不良”入学率。如果您想要对这些数据做的只是生成一封电子邮件，它甚至可以像字符串一样简单：

```
public String getBadEnrollmentsMessage() {
    List<String> enrolledBoth = getCommonEnrollments();
    List<String> enrolledOnlyA = getAOnlyEnrollments();
    List<String> enrolledOnlyB = getBOnlyEnrollments();

    StringBuilder output;
    // format the contents of the above lists into output
    // format should be however you want it in the email.

    return output.toString();
} 
```

然后，您可以将学生地图发送到电子邮件注册消息：

```
HashMap<Student, String> studentEmails;

for (Student s : allStudents) {
    studentEmails.put(s, s.getBadEnrollmentsMessage());
} 
```

当然，如果您有类似的方法`getBadEnrollmentsMessage()`，我什至不确定您是否首先需要学生和字符串的 Map。坦率地说，您可以创建一个`sendEnrollmentEmail`方法，传入 a ，然后通过那里`Student`提取消息。`getBadEnrollmentsMessage()`

# php - 将网站转换为 xml？

> ID：12415571
> 
> 赞同：1
> 
> 时间：2012-09-13T22:16:32.657
> 
> 标签：php, xml

我正在使用此代码来获取网站的内容：

```
$data = file_get_contents('http://domain.com/'); 
```

现在，我想将其转换`$data`为 XML 对象以轻松解析它。例如：

```
<?xml version='1.0' encoding='ISO-8859-1'?>
<html>
    <body>
         <div id='main'>
         </div>
    </body>
</html> 
```

预先感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T22:22:47.887

PHP 中内置了几个类和 API，可供使用。

看看这里：[http ://www.php.net/manual/en/refs.xml.php](http://www.php.net/manual/en/refs.xml.php)

由于您使用网站的源代码，因此最好使用 DOMDocument 并将其加载为 HTML（因为它就是这样）。

```
$data = file_get_contents('http://example.com/');
$dom = new DOMDocument();
$dom->loadHTML( $data ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T22:22:50.643

为什么要将其转换为xml？您也可以轻松地将其解析为 html..

例如，只需使用[http://php.net/manual/pl/class.domdocument.php](http://php.net/manual/pl/class.domdocument.php)

# php - 如果后跟数字，则删除字符后的所有内容

> ID：12415572
> 
> 赞同：0
> 
> 时间：2012-09-13T22:16:33.167
> 
> 标签：php, regex

对不起，复杂的标题！

例如说我有以下字符串：

```
package-name-1.0.5.00124.4 
```

我想拆分这个字符串，以便我只有“包名”。

目前我正在使用以下代码，如果包名称有破折号，则该代码不起作用：

```
list ($var) = explode ("-", $var); 
```

如果破折号后面跟着数字，我需要分解字符串，如下所示：

```
list ($var) = explode ("-[0-9]", $var); 
```

我不擅长正则表达式，所以这就是我在这里的原因，在此先感谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T22:18:42.823

您可以选择几种方法来解决此问题。一种是[`preg_replace`](http://php.net/manual/en/function.preg-replace.php)，用空字符串替换尾随的破折号加数字和点：

```
$name = preg_replace('/-[0-9.]+$/', '', $var); 
```

另一个是用来[`rtrim`](http://www.php.net/manual/en/function.rtrim.php)做同样的事情：

```
$name = rtrim($var, '0123456789.-'); 
```

**[看到它在行动](http://ideone.com/BLRJS)**。

# c# - 用 C# 编写泛型算术

> ID：12415576
> 
> 赞同：4
> 
> 时间：2012-09-13T22:17:07.957
> 
> 标签：c#, .net, generics, math

我有一个数字列表，我编写了一个对这些数字执行一些计算的方法；总而言之，它是关于一页代码。该方法对这些数字执行一些算术和比较。

我的问题是，在一种情况下，列表是一个`IList<byte>`，而在​​另一种情况下，它是一个`IList<float>`. 两种情况下的算法完全相同（是的，我知道溢出错误和精度损失等问题，但在我的情况下它有效）。我如何编写一个可以处理两个列表的方法？我不能写类似 void 的东西`DoStuff<T>(IList<T> numbers)`，因为没有`+ - * /`通用的算术运算符 ()。

一种解决方案是将所有内容简单地存储为浮点数，但我想避免它。列表很长，因此存储浮点数而不是字节会占用太多内存。我也可以做类似的事情`DoStuffFloat(byteList.Select(b => (float)b))`，但如果可以避免的话，我也不想支付性能损失。

没有复制粘贴整个方法并将“float”替换为“byte”（反之亦然），是否有一些不错的解决方案？

编辑：我应该提到我仅限于在这个项目中使用 .NET 3.5。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T22:54:44.350

您可以做的是创建一个包含您想要支持的操作的通用接口，创建一个通用工厂来为支持的类型创建实例以执行操作，并使用它。

例如，

```
public interface IOperations<T>
{
    T Add(T a, T b);
    T Subtract(T a, T b);
    T Multiply(T a, T b);
    T Divide(T a, T b);
}

public static class Operations<T>
{
    public static IOperations<T> Default { get { return Create(); } }

    static IOperations<T> Create()
    {
        var type = typeof(T);
        switch (Type.GetTypeCode(type))
        {
        case TypeCode.Byte:
            return (IOperations<T>)new ByteOperations();
        case TypeCode.Single:
            return (IOperations<T>)new SingleOperations();
        default:
            var message = String.Format("Operations for type {0} is not supported.", type.Name);
            throw new NotSupportedException(message);
        }
    }

    class ByteOperations : IOperations<byte>
    {
        public byte Add(byte a, byte b)      { return unchecked ((byte)(a + b)); }
        public byte Subtract(byte a, byte b) { return unchecked ((byte)(a - b)); }
        public byte Multiply(byte a, byte b) { return unchecked ((byte)(a * b)); }
        public byte Divide(byte a, byte b)   { return unchecked ((byte)(a / b)); }
    }

    class SingleOperations : IOperations<float>
    {
        public float Add(float a, float b)      { return a + b; }
        public float Subtract(float a, float b) { return a - b; }
        public float Multiply(float a, float b) { return a * b; }
        public float Divide(float a, float b)   { return a / b; }
    }
} 
```

```
T Mean<T>(IList<T> numbers)
{
    var operations = Operations<T>.Default;
    var sum = numbers.Aggregate(operations.Add);
    var count = (T)Convert.ChangeType(numbers.Count, typeof(T));
    return operations.Divide(sum, count);
}

var resultByte = Mean(new byte[] { 1, 2, 3, 4 });                // 2
var resultSingle = Mean(new float[] { 1.1F, 2.1F, 3.1F, 4.1F }); // 2.6F
var resultInt = Mean(new int[] { 1, 2, 3, 4 });                  // not supported 
```

如果您不介意小的性能损失，您可以动态创建所需的操作。

```
class GenericOperations<T> : IOperations<T>
{
    public GenericOperations()
    {
        add = CreateLambda(Expression.Add);
        subtract = CreateLambda(Expression.Subtract);
        multiply = CreateLambda(Expression.Multiply);
        divide = CreateLambda(Expression.Divide);
    }
    private Func<T, T, T> add, subtract, multiply, divide;
    private static Func<T, T, T> CreateLambda(Func<Expression, Expression, BinaryExpression> op)
    {
        var a = Expression.Parameter(typeof(T), "a");
        var b = Expression.Parameter(typeof(T), "b");
        var body = op(a, b);
        var expr = Expression.Lambda<Func<T, T, T>>(body, a, b);
        return expr.Compile();
    }

    public T Add(T a, T b)      { return add(a, b); }
    public T Subtract(T a, T b) { return subtract(a, b); }
    public T Multiply(T a, T b) { return multiply(a, b); }
    public T Divide(T a, T b)   { return divide(a, b); }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-13T22:30:12.623

我不知道这是否是您案例的最佳方法，但它对类似案例也很有用。

这可以通过使用[`dynamic`](http://msdn.microsoft.com/en-us/library/dd264741%28v=vs.100%29)关键字来完成。动态会做的是直到运行时才会进行编译时检查。

这是一个小示例程序来展示它是如何工作的。

```
class Program
{
    static void Main()
    {
        List<byte> bytes = new List<byte>();
        bytes.Add(2);
        bytes.Add(1);

        List<float> floats = new List<float>();
        floats.Add(2.5F);
        floats.Add(1F);

        Console.WriteLine(DoStuff(bytes));
        Console.WriteLine(DoStuff(floats));
        Console.ReadLine();
    }

    static dynamic DoStuff(IList items)
    {
        dynamic item0 = items[0];
        dynamic item1 = items[1];
        return item0 - item1;
    }

} 
```

不幸的是，在我的快速测试中，我无法`IList<dynamic> work`使用非泛型`IList`然后访问成员作为`dynamic`工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T22:36:36.983

创建类来包装底层值，并让它们每个都实现一个接口，其中包含您需要的操作。然后，使用`IList`该接口的 s 而不是原始值。

# javascript - 大型数据集不会显示 JQuery 对话框

> ID：12415577
> 
> 赞同：0
> 
> 时间：2012-09-13T22:17:15.480
> 
> 标签：javascript, jquery, json, modal-dialog

jquery 对话框可以容纳的最大数据大小是否存在？我有几乎 1 mb 大的 json，我试图在模态对话框中显示。我从文件中读取的一个小数据集一直运行良好。但是我实际上从请求中获得的大型数据集根本不会显示 - 没有框，没有数据，什么都没有。

我在我的成功代码块中放了一个断点，一切都运行了。什么可能导致该框不显示？

# php - 带有 If 条件的 HTML 代码中的 PHP 内容

> ID：12415581
> 
> 赞同：2
> 
> 时间：2012-09-13T22:17:22.967
> 
> 标签：php, html

我正在尝试仅使用 PHP if 条件显示文本内容，但我有几个错误，我看不出错误在哪里有人可以帮助我解决这个问题，这里是代码：

```
<?php
  if(
     isset($_POST['send']) &&
     !validateDiscp($_POST['Discp']) || !validateSize($_POST['Size'])
  ) : ?>

<div id="error">
  <ul>
    <?php if(!validateDiscp($_POST['Discp'])):?>
     <li><strong>Discription:</strong>Discription need to be larger then 10!</li>
    <?php endif?>
    <?php if(!validateSize($_POST['Size'])):?>
     <li><strong>Invalid Size:</strong> Size needs to bi S M L XL</li>
    <?php endif ?>
      </ul>
</div>

<?php elseif(isset($_POST['send'])):?>
<div id="error" class="valid">
  <ul>
    <li><strong>Congratulations!</strong> All fields are OK ;)</li>
  </ul>
</div>
<?php endif ;?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:23:53.683

我会重写整个外部块。而是这样做：

```
 <? if( isset($_POST['send'])&&  !validateDiscp($_POST['Discp']) || !validateSize($_POST['Size']) ) { ?>
        <div id="error">
            <ul>
               <?php if(!validateDiscp($_POST['Discp'])) { ?>
                    <li><strong>Discription:</strong> Discription need to be larger then 10!</li>
                <?php } ?>
                <?php if(!validateSize($_POST['Size'])) { ?>
                    <li><strong>Invalid Size:</strong> Size needs to bi S M L XL</li>
                <?php } else { 
        $nothing = true;
                 ?>

            </ul>
        </div>

    <?php if( isset( $nothing ) and isset($_POST['send'] ) ) { ?>
        <div id="error" class="valid">
            <ul>
                <li><strong>Congratulations!</strong> All fields are OK ;)</li>
            </ul>
        </div>

     <? } ?> 
```

我认为你的逻辑缺陷在于你有一个悬空的 else 语句。相反，添加一些逻辑来检测 else 案例何时被击中，并添加你的额外逻辑和你的好去。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T22:24:30.510

所有的`endif`s 都需要`;`在他们之后。另外，我不确定这是实际错误还是只是代码被包装，但请确保您的第一个`if`都在一行上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T14:24:59.007

改变它在这里工作的东西之后是代码

```
 <?php if(isset($_POST['send']) && !validateDiscp($_POST['Discp'])|| !validateSize($_POST['Size'])  ):?>

    <div id="error">
                <ul>
                    <?php if(!validateDiscp($_POST['Discp'])):?>
                        <li><strong>Discription:</strong> Discription need to be larger then 10!</li>
                    <?php endif;?>
                    <?php if(!validateSize($_POST['Size'])):?>
                        <li><strong>Invalid Size:</strong> Size needs to bi S M L XL</li>
                    <?php endif; ?>

                </ul>
            </div>
    <?php elseif(isset($_POST['send']) ):?> 
```

# php - Http 1.0 有什么我必须注意的吗？（php，生成请求）

> ID：12415582
> 
> 赞同：0
> 
> 时间：2012-09-13T22:17:30.387
> 
> 标签：php, http, request

题目有点奇怪，我来表达一下。我使用这种方法来生成发布请求：

[http://www.jonasjohn.de/snippets/php/post-request.htm](http://www.jonasjohn.de/snippets/php/post-request.htm)

没关系，但是在调整大小之后，我意识到数据发生了一些变化，有不需要的空白。只有在更大尺寸的情况下，才会出现“分块”标志。我将 Http/1.1 协议更改为 Http/1.0，现在传输看起来不错！但是有什么落后的陷阱吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:30:59.813

当然，http 1.0 和 1.1 之间有许多重要的区别，请查看[本文](http://www8.org/w8-papers/5c-protocols/key/key.html)以获得概述。

我可以直接发现影响您的代码的一个是

```
 // send the request headers:
    fputs($fp, "POST $path HTTP/1.1\r\n");
    fputs($fp, "Host: $host\r\n"); 
```

Host 标头字段在 http 1.0 中不存在，这可能会影响您通过[基于名称的虚拟主机](http://en.wikipedia.org/wiki/Virtual_hosting#Name-based)发布到托管多个域和/或子域的服务器的能力- 服务器不会知道您正在调用的域。

作为一般说明，以这种方式编写发布请求是一个很好的练习，了解幕后发生的事情总是很好，但出于生产目的，我会使用成熟的、经过良好测试的机制，如[cURL](http://php.net/manual/en/book.curl.php)

并供参考：

*   [RFC 1945](http://www.ietf.org/rfc/rfc1945.txt)定义了 http 1.0
*   [RFC 2616](http://www.ietf.org/rfc/rfc2616.txt)定义了 http 1.1

# objective-c - RestKit - 使用空值/空数组映射 JSON 响应

> ID：12415584
> 
> 赞同：0
> 
> 时间：2012-09-13T22:17:40.470
> 
> 标签：objective-c, ios, json, null, restkit

如何在 RestKit GET 期间优雅地处理（预期的）nil 密钥路径？

如果用户没有任何事件，当我调用 getAllEvents API 时，API 将在有效负载中返回一个空值，例如`{"events":null}`. null 值会导致调用 RestKit`request: didFailLoadWithError`和`objectLoader: didFailWithError`方法，我不一定想要，因为这是有 0 个事件的预期行为。它给出的错误信息是`Could not find an object mapping for keyPath: ''`.

我可以在映射配置和/或委托方法中处理这个问题，还是我需要修改 API，也许返回一个空字符串而不是 null。当列表为空时，JSON 应该返回什么标准？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T23:53:54.360

> 当列表为空时，JSON 应该返回什么标准？

实际上我不知道，但我会使用一个空数组：

```
{ 'events' : [] } 
```

如果一个值为空，我根本不会发送它[节省带宽]。

编辑：[也看到这个答案](https://stackoverflow.com/questions/9619852/what-is-the-convention-in-json-for-empty-vs-null)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T02:51:18.247

更新：这不再适用于 RestKit v0.10.x。请参阅@moonwave99 的回答。

找到了解决方案！

我最终做了一些与 moonwave 的建议非常相似的事情，只是我现在将 null 对象更改为空数组。

```
- (void)objectLoader:(RKObjectLoader*)loader willMapData:(inout id *)mappableData {

  id events = [*mappableData objectForKey:@"events"];

  if (events == [NSNull null]) {
    NSLog(@"it's null");
    [*mappableData setObject:@"" forKey:@"events"];
  }
} 
```

为了成功处理现在为空的非空数组，我必须告诉事件映射忽略未知的键路径。

```
[eventsMapping setIgnoreUnknownKeyPaths:YES]; 
```

现在，RestKit 不再调用 didFailWithError 委托方法，而是像我一直期望/希望的那样调用 didLoadObjects。从那里我可以在尝试分配给我的原生 Cocoa 对象之前检查数组是否为空。

```
- (void)objectLoader:(RKObjectLoader*)objectLoader didLoadObjects:(NSArray*)objects {

  if ([objects count] == 0) {

    // No events, alert user

  }
  else if ([[objects objectAtIndex:0] isKindOfClass:[Events class]]) {

    Events *events = [objects objectAtIndex:0];

} 
```

# python - Python：项目存在于列表内的字典中

> ID：12415586
> 
> 赞同：0
> 
> 时间：2012-09-13T22:17:50.610
> 
> 标签：python, list

```
b = [{'a': 1, 'b': 2}, {'a': 3, 'b': 4}, {'a': 5, 'b': 6}] 
```

如何确定 b 是否有条目`'a'=5`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T22:19:02.510

`any()`与生成器表达式一起使用：

```
if any(x["a"] == 5 for x in b):
    # whatever 
```

`b`一旦找到第一个匹配项，这将停止迭代。

如果你喜欢函数式编程，你也可以这样做

```
from operator import itemgetter
from itertools import imap
if 5 in imap(itemgetter("a"), b):
    # whatever 
```

我很确定，尽管包括我在内的大多数人都更喜欢第一个变体。

# sql-server - 如果满足条件，则更新 sql server 表中的第一行

> ID：12415590
> 
> 赞同：3
> 
> 时间：2012-09-13T22:18:14.823
> 
> 标签：sql-server, tsql

我有一个包含以下行的表。

**tbl图片**

*   PICID
*   图片名称
*   画廊ID
*   活跃

我想运行一个查询来选择例如所有带有`galleryID=3`和的图片`isActive=1`

如果此选择中没有图片且 isActive 行为 1（换句话说，查询不返回任何结果）我想`isActive=1`用`galleryID=3`

有人可以指导我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T22:58:20.043

Here you go. Basically, it checks to see if there are any Active records in that set, and if not, updates the first one (determined by the picID). You can stick it in a stored procedure or function if you like, or just run the script and change the gallery ID manually.

```
DECLARE @Count INT,
@GalleryID INT

SET @GalleryID = 3

SELECT @Count = COUNT(*)
FROM tblPictures
WHERE galleryID=@GalleryID and isActive=1

IF @Count = 0
BEGIN

UPDATE tblPictures
SET isActive = 1
WHERE picID = (
    SELECT TOP 1 picID 
    FROM tblPictures 
    WHERE galleryID = @GalleryID 
    ORDER BY picID
    )

END 
```

MOAR CODE

This should update the first picture (by picID) in any gallery without an active picture:

```
UPDATE tblPictures
SET isActive = 1
WHERE picID IN (
    SELECT picID 
    FROM (
        SELECT galleryID, MIN(picID) AS 'picID'
        FROM tblPictures AS p
        JOIN (
            SELECT galleryID 
            FROM tblPictures 
            WHERE isActive = 1
            ) AS s ON p.galleryID <> s.galleryID
        GROUP BY galleryID
        )
    ) 
```

The innermost subquery finds the galleries that DO have active pictures. The next step up finds the galleryIDs excluding the ones that have pictures. Then we find the lowest picID for each galleryID and use those to update the table.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-14T07:19:20.977

尝试这个：

```
declare @tav table

(

gallaryid int,

isactive int

)

insert into @tav 

select

3,0 union all

select

4,0 union all

select

5,1

select * from @tav

update @tav set isactive=1

where gallaryid=3 and isactive=(select top(1)isactive from @tav  order by isactive)

select * from @tav

where gallaryid=3 and isactive=1 
```

# php - 如何通过数组而不是字符串来分解字符串？

> ID：12415602
> 
> 赞同：1
> 
> 时间：2012-09-13T22:19:48.787
> 
> 标签：php, arrays, string, replace, explode

我有一个这样的字符串`012A345B67Z89`，我需要用任何字母（AZ）爆炸。

我正在寻找的结果是这样的：

```
$str = '012A345B67Z89';
$result = explode(range('A','Z'),$str);
print_r($result); 
```

并得到：

```
array(
    [0] = 012
    [1] = 345
    [2] = 67
    [3] = 89
) 
```

理想情况下在 php.ini 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T22:21:58.107

尝试 preg_split：

```
$str = '012A345B67Z89';
$result = preg_split("/[a-z]/i",$str);
print_r($result); 
```

这应该给你你想要的确切输出（没有逗号）：

```
Array
(
    [0] => 012
    [1] => 345
    [2] => 67
    [3] => 89
) 
```

# r - R：从具有时间戳的有序二进制集中创建全长时间序列

> ID：12415606
> 
> 赞同：-1
> 
> 时间：2012-09-13T22:20:53.430
> 
> 标签：r, datetime, time-series

假设我有一个文件，其中包含一些这样的条目：

```
02/10/11 10:26:35 AM UTC, 0
02/10/11 10:26:38 AM UTC, 1
02/10/11 10:26:42 AM UTC, 0 
```

是否有任何直接的方法`R`可以将此信息转换为全长二进制时间序列（假设采样间隔为一秒），用零和一估算？

在此示例中，系列将是：*0 0 0 1 1 1 1 0*

编辑：因为 Dirk 和 Josh 提供了独特的解决方案，我想看看他们在处理时间方面的比较：

```
library(xts)
library(data.table)
library(rbenchmark)

doseq <- function(N,Nby){
  base.t <<- Sys.time()
  t.seq <<- base.t + seq.int(from=0, to=N, by=Nby)
  n.t <<- length(t.seq)
  val.seq <<- (1:n.t - 1) %% 2
}

josh <- function(N,Nby=10){
  doseq(N,Nby)
  dt1 <- data.table(time = t.seq, val=val.seq, key="time")
  dt2 <- data.table(time = with(dt1, seq(min(time), max(time), by=1)), key = "time")
  dtf <- dt1[dt2, rolltolast = TRUE]
  return(dtf)
}

dirk <- function(N,Nby=10){
  doseq(N,Nby)
  xt1 <- xts(val.seq, t.seq)
  secs <- seq(start(xt1), end(xt1), by="1 sec")
  xtf <- zoo::na.locf(merge(xt1, xts(, secs)))
  return(xtf)
}

bm <- benchmark(josh(1e2,10), josh(1e3,10), josh(1e4,10), josh(1e5,10), josh(1e6,10),
  dirk(1e2,10), dirk(1e3,10), dirk(1e4,10), dirk(1e5,10), dirk(1e6,10),
  columns=c("test", "replications","elapsed", "relative"),
  replications=10)

print(bm) 
```

给予：

```
 test replications elapsed relative
6    dirk(100, 10)           10   0.024    1.000
7   dirk(1000, 10)           10   0.026    1.083
8  dirk(10000, 10)           10   0.044    1.833
9  dirk(1e+05, 10)           10   0.321   13.375
10 dirk(1e+06, 10)           10   3.342  139.250
1    josh(100, 10)           10   0.034    1.417
2   josh(1000, 10)           10   0.036    1.500
3  josh(10000, 10)           10   0.070    2.917
4  josh(1e+05, 10)           10   0.453   18.875
5  josh(1e+06, 10)           10   5.381  224.208 
```

所以看起来它们并没有太大的不同，但是`xts`方法比`data.table`方法快一些。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T23:00:29.680

以下是使用**data.table**包的方法：

```
library(data.table)

## Some example data
X <- data.table(time = Sys.time() + c(0,3,7), val=c(0,1,0), key = "time")

## A data.table with one row for each second spanned by X
Y <- data.table(time = with(X, seq(min(time), max(time), by=1)), key = "time")

## Merge them
X[Y, rolltolast = TRUE]
#                   time val
# 1: 2012-09-13 15:58:53   0
# 2: 2012-09-13 15:58:54   0
# 3: 2012-09-13 15:58:55   0
# 4: 2012-09-13 15:58:56   1
# 5: 2012-09-13 15:58:57   1
# 6: 2012-09-13 15:58:58   1
# 7: 2012-09-13 15:58:59   1
# 8: 2012-09-13 15:59:00   0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T23:01:10.403

是的，[xts](http://cran.r-rpoject.org/package=xts)包可以提供帮助。

首先，创建一个`xts`对象：

```
R> pt <- strptime(c("02/10/11 10:26:35 AM", "02/10/11 10:26:38 AM", 
+                    "02/10/11 10:26:42 AM"), "%d/%m/%y %H:%M:%S %p", tz="UTC")
R> vals <- c(0,1,0)
R> x <- xts(vals, pt)
R> x
                    [,1]
2011-10-02 10:26:35    0
2011-10-02 10:26:38    1
2011-10-02 10:26:42    0
Warning message:
timezone of object (UTC) is different than current timezone (). 
R> 
```

我们可以忽略警告——我有一个美国时区。

现在，我们可以创建从该变量开始到结束的秒数序列：

```
R> secs <- seq(start(x), end(x), by="1 sec") 
```

现在来看看魔术：通过将我们的原始对象与该网格的“空”对象合并，我们扩展为 gridL

```
R> x2 <- merge(x, xts(, secs))
R> x2
                     x
2011-10-02 10:26:35  0
2011-10-02 10:26:36 NA
2011-10-02 10:26:37 NA
2011-10-02 10:26:38  1
2011-10-02 10:26:39 NA
2011-10-02 10:26:40 NA
2011-10-02 10:26:41 NA
2011-10-02 10:26:42  0
Warning message:
timezone of object (UTC) is different than current timezone (). 
```

剩下的就是调用`na.locf()`：

```
R> x2 <- na.locf(merge(x, xts(, secs)))
R> x2
                    x
2011-10-02 10:26:35 0
2011-10-02 10:26:36 0
2011-10-02 10:26:37 0
2011-10-02 10:26:38 1
2011-10-02 10:26:39 1
2011-10-02 10:26:40 1
2011-10-02 10:26:41 1
2011-10-02 10:26:42 0
Warning message:
timezone of object (UTC) is different than current timezone (). 
R> 
```

# sql - 每月获取新数据

> ID：12415608
> 
> 赞同：3
> 
> 时间：2012-09-13T22:21:15.803
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我的数据如下所示：

```
+--------+-----------+---------+
| doctor | datefield | patient |
+--------+-----------+---------+
| A      | 1/1/2011  | ABC123  |
| A      | 1/20/2011 | AAA123  |
| A      | 1/21/2011 | AAA123  |
|        |           |         |
| A      | 2/1/2011  | ABC123  |
| A      | 2/10/2011 | BBBYYY  |
|        |           |         |
| B      | 1/1/2011  | ABC123  |
| B      | 1/20/2011 | AXA435  |
| B      | 1/21/2011 | AAA123  |
|        |           |         |
| B      | 2/1/2011  | ABC123  |
| B      | 2/10/2011 | BBBYYY  |
+--------+-----------+---------+ 
```

我想计算每个医生的新病人数`as compared to the entire date range for that specific doctor`。

假设2011 年**1 月**是第一个月。

**逻辑：**

> 1.  2011 年 1 月，A 医生有 2 名新患者
> 2.  2011 年 2 月，A 医生有 1 名新患者
> 3.  2011 年 1 月，B 医生有 3 名新患者
> 4.  2011 年 2 月，B 医生有 1 名新患者

这是我想要的结果：

```
+--------+-------+------+----------------+
| doctor | month | year | # new patients |
+--------+-------+------+----------------+
| A      |     1 | 2011 |              2 |
| A      |     2 | 2011 |              1 |
| B      |     1 | 2011 |              3 |
| B      |     2 | 2011 |              1 |
+--------+-------+------+----------------+ 
```

你能帮我开始吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T23:07:21.480

更正了乔的答案的语法

```
select doctor, year, month, count(patient) [num_new]
from (select doctor, patient, min(MONTH([datefield])) [month], min(YEAR([datefield]))  [year]
    from [dbo].[test_aakruti]
    group by doctor, patient) as table1
group by doctor, [year], [month] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T22:40:34.977

只需将其分解为几个步骤：

*   确定给定患者和医生的第一个月是哪一个月（即`select doctor, patient, min(month) from mytable group by doctor, patient`）

*   通过按医生和月份对先前结果进行分组来计算新患者的数量

应该能够使用子查询或临时表/表变量来执行此操作，无论您喜欢哪种方式。

编辑：我写的查询可能看起来像：

```
select doctor, year, month, count(1) [num_new]
from
(
    select doctor
           ,patient
           ,datepart(mm, min(datefield)) [month]
           ,datepart(yyyy, min(datefield)) [year]
    from mytable
    group by doctor, patient
) sub
group by doctor, year, month 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T22:47:57.033

获取一个月的患者总数非常简单：

```
SELECT Doctor, YEAR(datef) AS yr, MONTH(datef) AS mnth, COUNT(patient) AS totPatients FROM ##doctors
GROUP BY Doctor, YEAR(datef), MONTH(datef)

Doctor  yr      mnth    totPatients
A       2011    1       3
A       2011    2       2
B       2011    1       3
B       2011    2       2 
```

但是获取新患者的数量稍微复杂一些。为此，我们需要获得每个患者的第一次访问。这可以通过以下方式完成：

```
SELECT doctor, patient, MIN(MONTH(datef)) AS Mnth, MIN(YEAR(datef)) AS Yr FROM ##doctors GROUP BY doctor, patient 
```

然后，通过将两者结合起来，我们得到了想要的结果：

```
WITH fstVisit AS (
    SELECT doctor, patient, min(month(datef)) AS Mnth, min(year(datef)) AS Yr FROM ##doctors GROUP BY doctor, patient
    )
    SELECT Doctor,  yr, mnth, COUNT(patient) AS totPatients FROM fstVisit
    GROUP BY Doctor, yr, mnth

Doctor  yr      mnth    totPatients
A       2011    1       2
A       2011    2       1
B       2011    1       3
B       2011    2       1 
```

# android - 如何找出支持屏幕的 android:requiresSmallestWidthDp

> ID：12415611
> 
> 赞同：0
> 
> 时间：2012-09-13T22:21:32.703
> 
> 标签：android

我如何确定在下设置 android:requiresSmallestWidthDp 的值

我想支持小屏幕，但我可以看到在 3.3 中，事情开始被切断。

我没有在布局中指定任何尺寸。主要使用相对布局，以及wrap_content。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T05:07:27.583

正如文档所述（[http://developer.android.com/guide/topics/manifest/supports-screens-element.html#requiresSmallest](http://developer.android.com/guide/topics/manifest/supports-screens-element.html#requiresSmallest)），此参数目前不仅被 Android 设备忽略，而且目前被 Google Play也是。所以它目前绝对什么都不做。除非您的应用程序开发是在不寻常的情况下完成的，否则目前在您的应用程序中包含此内容将是“镀金”（[http://en.wikipedia.org/wiki/Gold_plating_%28software_engineering%29](http://en.wikipedia.org/wiki/Gold_plating_%28software_engineering%29)）。换句话说，你现在可能不应该把它放在你的清单中。

据推测，在未来的某个时候，Google Play 会根据这个参数进行过滤。那时它将变得有用，人们将开始在他们的清单中包含参数。

# encryption - 在 C# 中生成公钥和私钥对并将公钥保存为纯文本

> ID：12415613
> 
> 赞同：4
> 
> 时间：2012-09-13T22:21:50.870
> 
> 标签：encryption, private-key, public-key, plaintext, rsacryptoserviceprovider

我需要在 C# 应用程序和微控制器 (pic32mx795) 之间实现加密。我遇到的问题是生成我正在使用 RSACryptoServiceProvider 的公钥和私钥对，但我只能获取密钥属性而不是完整的公钥。

```
RSACryptoServiceProvider RSA = new RSACryptoServiceProvider();
RSAParameters RSAKeyInfo = RSA.ExportParameters(false); 
```

我无法为微控制器提供关键参数，因为它只需要密钥（作为字节）。有一个库可以做到这一点，但它只能在 2012 年 11 月的某个时候提供（[SW300055](http://www.microchipdirect.com/productsearch.aspx?Keywords=SW300055)）。我正在使用 SW300052 库对微控制器执行加密（密钥大小限制为 256 位）。

我还在这个线程中尝试了 bouncycastle 建议（[生成密钥并在文本框中显示它们）](https://stackoverflow.com/questions/6531054/generate-public-private-key-pair-and-show-them-in-textbox-in-asp-net)。它以 PEM 格式保存密钥。据我了解，密钥以 base64 格式保存。我已将密钥长度指定为 256 位，但是当将公钥转换回字节时，它是 62 字节。

```
byte[] encodedDataAsBytes = Convert.FromBase64String (publicKeyString); 
```

我还查看了 Microsoft 的强名称工具 (sn.exe)，但它支持的最小密钥大小为 384 位。

有什么方法可以生成公钥对并使用 c#（或任何其他工具）以纯文本/字节形式获取公钥？我是否最好使用对称密钥加密来加密会话密钥？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T22:27:19.267

您可以在 windows 框上设置[证书服务器](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376539%28v=vs.85%29.aspx)并直接请求它们。您需要安装 MS 证书服务。您还可以使用[makecert并使用](http://msdn.microsoft.com/en-us/library/bfsktky3.aspx)[c#](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.publickey.aspx)访问密钥。

或者您可以[通过编程方式生成密钥对](http://msdn.microsoft.com/en-us/library/5e9ft273.aspx)。

# json - 使用 CakePHP 查询坐标数据库以返回谷歌地图的 JSON

> ID：12415617
> 
> 赞同：0
> 
> 时间：2012-09-13T22:22:14.807
> 
> 标签：json, cakephp, google-maps-api-3

我有以下示例：[http](http://dev.driz.co.uk/googlemap/) ://dev.driz.co.uk/googlemap/表示我在 CakePHP 中构建的应用程序的映射功能（请注意，此示例未使用 Cake）。

使用 JSON，我使用一些标记填充 Google 地图，并使用 Geolocation 将地图置于您所在位置的中心，这样您就可以看到您周围的帖子。因此，在现实生活中的应用程序中，JSON 文件将使用数据库中的 Cake 动态构建。

我想要做的是使用您所在位置的坐标（用户）查询数据库以查找在这些坐标的 10 英里半径内的帖子。然后拉出 10 个帖子...然后我想这样做，以便您可以拖动地图并在您扩大半径时加载更多帖子，如果这有意义的话。**问题是如何将坐标/10 英里半径传回 CakePHP 以查询数据库中的帖子！**

有这方面的例子吗？有人可以发布一些代码示例来帮助我开始构建这样的查询吗？我有一个查询可以从数据库中提取 10 个帖子，但它不会根据坐标搜索帖子......对于一组坐标，我将如何在 10 英里半径范围内执行此操作？

查询的一个例子是：

```
public function gMapTest() {

        $posts = $this->Post->find('all', array('limit'=>10,'conditions'=>array('Post.status'=>array(1,2)),'order'=>array('Post.datetime'=>'desc'),
        'contain'=>array('User'=>'Profile'))); 

        $this->set('posts',$posts);

        $this->set('_serialize', 'posts');
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:58:49.047

在您的模型上使用地理编码器行为：

```
$this->Post->Behaviors->attach('Tools.Geocoder');
$this->Post->setDistanceAsVirtualField($lat, $lng);
$options = array('order' => array('Post.distance' => 'ASC'), 'limit' => 10);
$posts = $this->Post->find('all', $options); 
```

[http://www.dereuromark.de/2012/06/12/geocoding-with-cakephp/](http://www.dereuromark.de/2012/06/12/geocoding-with-cakephp/)

# php - Zend Framework 2 自动加载

> ID：12415621
> 
> 赞同：12
> 
> 时间：2012-09-13T22:22:34.947
> 
> 标签：php, zend-framework2, zend-autoloader

我刚开始研究 Zend Framework 2（一般来说是 ZF 的新手），在[用户指南](http://framework.zend.com/manual/2.0/en/user-guide/modules.html)中，他们在添加新模块时使用自动加载。然而，我发现这个解释对于一个菜鸟来说是相当具有挑战性的。他们正在`Module.php`模块目录中添加一个文件，其中包含以下代码：

```
public function getAutoloaderConfig()
    {
        return array(
            'Zend\Loader\ClassMapAutoloader' => array(
                __DIR__ . '/autoload_classmap.php',
            ),
            'Zend\Loader\StandardAutoloader' => array(
                'namespaces' => array(
                    __NAMESPACE__ => __DIR__ . '/src/' . __NAMESPACE__,
                ),
            ),
        );
    } 
```

现在我做了一些挖掘，试图弄清楚这个自动加载是怎么回事。据我了解，自动加载使用`spl_autoload_register()`并且是一种避免`require_once()`在代码中无处不在的方法。因此，当尝试使用未定义的类时，`autoload()`将运行已注册的方法，该方法仅进行数组查找并包含如下所示的文件（如果已添加）。

```
// Zend/Loader/ClassMapAutoloader.php
public function autoload($class)
{
    if (isset($this->map[$class])) {
        require_once $this->map[$class];
    }
} 
```

由于性能，这似乎很聪明。我希望我刚才写的是正确的。基于此，我试图从第一个代码片段中弄清楚发生了什么`getAutoloaderConfig()`，但我很困惑。似乎此方法返回的数组用于`AutoloaderFactory::factory()`，但我不确定用于什么目的。似乎用选项实例化自动加载器，但具体是做什么的，我不确定。我猜数组的第二个条目指定了在哪里可以找到模块名称空间的源文件——至少这是我的猜测。然而，我不确定的第一个条目。在用户指南中，它说明了以下内容：

> 由于我们正在开发中，我们不需要通过类映射加载文件，因此我们为类映射自动加载器提供了一个空数组。

该文件只返回一个空数组。我不确定这个 ClassMapAutoloader 的目的是什么。

对不起，如果我的观点不清楚；基本上我试图弄清楚发生了什么`getAutoloaderConfig()`以及`mymodule/autoload_classmap.php`用于什么。如果有人可以对此有所了解，那将不胜感激！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-13T22:39:16.513

类图用于向 PHP 显示类的最直接方式。它本质上是在说“你正在寻找的`A\Class\Youre\Looking\For`，不要再看这个文件了：`xyz.php`。这将被表达为：

```
return array(
    'A\Class\Youre\Looking\For' => ___DIR__.'/xyz.php'
) 
```

没有它，PHP 必须运行整个自动加载器链，这可能会非常昂贵。为什么它说“我们正在开发中”？因为类映射文件通常由一些脚本在生产服务器上生成。基本上，现在不要太担心它。是微优化...

该`getAutoloaderConfig()`方法只是为您在真正高级的应用程序中提供一些灵活性。大多数情况下，您可以只使用 SkeletonApplication 和 SkeletonModule 的样板代码，不用管它。真的，你现在甚至可以杀死这个`'Zend\Loader\ClassMapAutoloader' => array(__DIR__ . '/autoload_classmap.php',)`部分。

这只是未来改进的一个钩子，如果您刚开始使用 ZF2（像我一样；），无需担心太多。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-06T10:25:53.700

ZF2 有许多可用的自动装载机。

最常见的 2 个（或开发人员直接与之交互的 2 个）是`Zend\Loader\ClassMapAutoloader`和`Zend\Loader\StandardAutoloader`。

1.  classmap 自动加载器通常在模块级别使用，以提供简单但快速的数组查找机制。它配置了一个关联数组`key => value`对，键代表类，值代表定义类的文件名。

2.  另一方面，标准自动加载器旨在保存“命名空间”和基本目录的列表。然后通过将该命名空间的基目录路径添加到类名前面来构建引用但尚未加载的类的路径，以到达类文件的最终绝对路径，然后尝试包括。`/path/to/ZF2/bin/classmap_generator.php`您可以通过运行或`zftool.phar`生成类映射来快速填充 classmap_autoload.php 文件 。

`Zend\Loader\AutoloaderFactory`旨在管理各种自动装载机，并确保没有冲突。当然，最终，所有自动加载功能都利用 PHP SPL 自动加载。

的目的`getAutoloaderConfig()`是向自动加载器工厂识别哪些自动加载器可用于该模块的命名空间。

在上面显示的示例中，按照优先顺序，类映射自动加载器，然后是标准自动加载器。如果您不想为该模块使用类映射自动加载器，只需从`getAutoloaderConfig()`.

方法名称`getAutoloaderConfig()`是保留的。如果定义了此方法，则在模块初始化过程中，将`Zend\ModuleManager\AutoloaderListener`附加一个侦听器 ()，该侦听器检索此方法返回的配置，并将其添加到合并配置中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-25T06:22:00.493

一个 Web 应用程序由许多 PHP 类组成，每个类通常位于一个单独的文件中。这引入了*包含*文件的需要。

随着应用程序大小的增加，可能很难包含每个需要的文件。Zend Framework 2 本身包含数百个文件，以这种方式加载整个库及其所有依赖项可能非常困难。此外，在执行生成的代码时，PHP 解释器将花费 CPU 时间来处理每个包含的文件，即使您没有创建其类的实例。

为了解决这个问题，在 PHP 5.1 中，引入了类自动加载功能。PHP 函数`spl_autoload_register()`允许您注册一个*自动加载器*函数。对于复杂的网站，您甚至可以创建多个链接在堆栈中的自动加载器函数。

在脚本执行期间，如果 PHP 解释器遇到尚未定义的类名，它会依次调用所有已注册的自动加载器函数，直到自动加载器函数包含该类或引发“未找到”错误。这允许“延迟”加载，当 PHP 解释器仅在类调用时处理类定义时，当它确实需要时。

因为每个库的供应商都使用自己的代码命名和文件组织约定，所以您必须为每个依赖库注册不同的自定义自动加载器函数，这很烦人（实际上这是一项不需要的工作）。为了解决这个问题，引入了 PSR-0 标准。

[PSR-0 标准](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)（PSR 代表 PHP 标准推荐）定义了应用程序或库必须遵循的 推荐代码结构，以保证自动加载器的互操作性。

Web 应用程序的每个模块都注册了一个自动加载器，这使得自动加载模块中的任何 PHP 类成为可能。这是使用类的`getAutoloaderConfig()`方法完成的`Module`。

ZF2 有一个名为 的特殊组件`Zend\Loader`，其中包含两个常用自动加载器类的实现：标准自动加载器 ( `Zend\Loader\StandardAutoloader`) 和类映射自动加载器 ( `Zend\Loader\ClassMapAutoloader`)。

基于 ZF2 的应用模块符合 PSR-0 标准这一事实使得使用标准自动加载器成为可能。

类映射自动加载器可以用作标准自动加载器的更快替代品。这个自动加载器希望您向它传递一个类映射数组。类映射的每个*key=>value*对分别是类名和包含该类的 PHP 文件的路径。

Zend Framework 2 中自动加载的概念在《[使用 Zend Framework 2](https://leanpub.com/using-zend-framework-2)》一书中得到了很好的解释。

# jquery - 将 jquery 砌体中的角戳定位到左侧

> ID：12415627
> 
> 赞同：0
> 
> 时间：2012-09-13T22:22:53.803
> 
> 标签：jquery, jquery-masonry

任何人都知道我可以如何更改 jquery masonry 中的角标记以显示在左侧而不是右侧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T23:18:47.107

简单：只需将“corner stamp element”设为第一个 .masonry-brick 元素。第一个，即最顶部和最左侧的元素将始终保持在该位置，除非您预先添加元素。

# jquery - JQuery提交按钮不起作用

> ID：12415628
> 
> 赞同：0
> 
> 时间：2012-09-13T22:22:56.040
> 
> 标签：jquery, forms, post, serialization

所以我有一个 3 页的注册页面。在第一页上有三个选项，如果用户选择第一个选项，那么提交按钮会显示在第二页的底部。如果用户选择选项 2 或 3，那么在第二页上，提交按钮只会在选择某个单选按钮后出现。这是第二页的代码：

```
<form id="everything" method="post" action="Page3.php">
<input type="radio" id="Reg_num_r1" name="Reg_num_r" value="1"/> Register 1 <br/>
<input type="radio" id="Reg_num_r2" name="Reg_num_r" value="2"/> Registration 1+ <br/>
<input type="submit" name="submit" value="Submit" id="submit"  style="display:none;"/>
</form> 
```

这是 JQuery 代码：

```
$(document).ready(function(e) {
if(type==1) {
        $("#submit").show();
    }

$("input[name= 'Reg_num_r']").change( function () {
        if($(this).val()==1) {
            $('#Reg_num2').hide();
        } else {
            $('#Reg_num2').show();
        }
        $("#submit").show();
    });
$("#everything").submit( function() {
        var data = $("#everything").serialize();
        alert(data);
        return true;
    });
} 
```

如果我在第一页上选择了第一个选项并单击第二页上的提交按钮，它会完美运行，我会进入第三页。但是，如果我选择选项 2 或 3，那么提交按钮将不起作用。我不断点击它，没有任何反应。我认为这是因为它从选项 2 或 3 开始就被隐藏了，但我不知道解决方法。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:25:33.480

您试图引用一个带有 id 的表单，`$("#everything").submit()`但该表单只有一个名称。要么给它一个 id 要么将你的代码更改为`$("form[name='everything']").submit()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T22:27:15.913

选择`$("#everything")`器不存在。您的表单没有此 ID。尝试：

```
$("form[name=everything]").submit( function() {
    ...
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T22:28:11.977

```
$("#everything") is the ID in the selector.. But you do not have a form with ID  

<form name="everything" id="everything" 
```

进行此更改以使其正常工作..

# windows - 如何对任务栏加载项进行编程（不是系统托盘图标）

> ID：12415631
> 
> 赞同：1
> 
> 时间：2012-09-13T22:23:27.963
> 
> 标签：windows, taskbar

我正在寻找一个小应用程序，它将作为 Windows 任务栏上的一个按钮驻留（如果它只与 Win7+ 兼容，那很好），但我不知道从哪里开始将小部件放到任务栏本身.

请参阅此附加图像，该图像取自 HP 笔记本电脑，其中自定义支持中心覆盖在任务栏上：![在此处输入图像描述](../Images/7f364df4c1cd58a6ca353e0a56afbf44.png)

请注意，这不是系统托盘中存在的标准应用程序图标。它也不是您的标准任务栏按钮，即固定快捷方式。它是某种在任务栏上注册此项目的自定义程序。我在其他有电池指示灯并且有当前电量的机器上看到过类似的东西（在 Windows 7 为其添加图标之前）。

我希望在任务栏的开头放置一个交互式元素，就像这样（仅在不同的位置，更左，在开始按钮旁边）。我一直在寻找帮助我开始使用这个元素的文档，但我找不到任何东西。任何人都可以提供有关如何开始的提示吗？

我可以用 C#、C++ 或其他语言编写，所以只需一个指向正确位置的指针就可以了。谢谢你。

# .net - 我是否使用 RSACryptoServiceProvider.SignHash 对数据进行签名？

> ID：12415632
> 
> 赞同：1
> 
> 时间：2012-09-13T22:23:30.080
> 
> 标签：.net, security, encryption, sign

愚蠢的问题，但 IIRC RSA 只能根据其密钥大小加密有限数量的位。非对称密码可以使用相同的密钥长度加密更多（并且运行速度更快）。[在这种情况下，我可以使用RSACryptoServiceProvider.SignHash](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rsacryptoserviceprovider.signhash.aspx)仅签署有限数量的位吗？还是可以在签名时使用而我不需要使用AES来签名？（我可以这样做，因为内容是用 AES 加密的）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T23:34:15.720

RSA 确实只能加密有限数量的数据。*对称密码可以用**更短*的密钥长度加密更多，并且确实运行得更快（给定现代密码）。

您只能使用`SignHash`Indeed 签署有限数量的数据。该方法只希望您通过数据传递散列字节，这些字节总是相对较小，例如大约 16 到 64 个字节（MD5 到 SHA512）。RSA 密钥/模数大小通常要大得多，即使 RSA 1024 的大小已经是 128 字节，尽管您需要从该数字中减去相当多的填充开销。

您通常不使用 AES 进行签名。使用对称密码进行签名称为 MAC'ing，但对于签名，RSA 与上述哈希算法配对。

在您的情况下，我会尝试阅读更多有关密码学的内容，并且会保留为特定库提供的示例。

# android - Android 整数数组

> ID：12415634
> 
> 赞同：2
> 
> 时间：2012-09-13T22:23:44.753
> 
> 标签：android, arrays, integer

您好，我是 Android 开发的新手，我决定使用 AndroidPlot 库。要创建图表，我需要输入这样的数字数组

```
Number[] seriesOfNumbers = {4, 6, 3, 8, 2, 10}; 
```

我需要帮助的是在我的应用程序中创建该数据。我的应用程序每天运行一次服务，我希望它收集一定数量并将其添加到此数组中。例如说这样的事情..

```
ArrayList<Integer> seriesOfNumbers = new ArrayList<Integer>();
seriesOfNumbers.add(5);
// Save the array 
```

然后第二天检索该数组并向其添加另一个数字，依此类推。我读过我应该使用 SQLite，但我每天只存储一个数字。我不能每天都创建一个新数组，因为我需要前几天的数据。这样做的正确方法是什么？谢谢

编辑：

这是据我所知

```
public static void saveArray(Context ctx) 
{

    SharedPreferences sharedPreferences = PreferenceManager
            .getDefaultSharedPreferences(ctx);

    SharedPreferences.Editor sharedPreferencesEditor = sharedPreferences
            .edit();

    Number[] list = new Number[10];

    StringBuilder str = new StringBuilder();

    for (int i = 0; i < list.length; i++) 
    {

        str.append(list[i]).append(",");

    }

    sharedPreferencesEditor.putString("string", str.toString());

    sharedPreferencesEditor
            .commit();

}

public void getArray(Context ctx)
{
    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(ctx);
    String savedString = prefs.getString("string", "1");

    StringTokenizer st = new StringTokenizer(savedString, ",");

    for (int i = 0; i < 1; i++) 
    {
        array[i] = Integer.parseInt(st.nextToken());

    }

} 
```

我想做的是能够通过 saveArray(Context ctx) 传递一个整数并将其添加到数组中。然后它被解析成一个字符串存储到共享首选项中，然后由 getArray(Context ctx) 检索，如果有任何意义，它会在其中重新创建为一个数组。非常感谢任何帮助注意：上面的代码导致FC

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T22:29:53.073

尝试这样的事情：

```
ArrayList<Integer> seriesOfNumbers = existsList() ? loadList() : new ArrayList<Integer>();
seriesOfNumbers.add(5);
saveList(seriesOfNumbers); 
```

你只需要实现 ...List() - 方法，也许通过使用 Sqlite。

# java - 有没有办法在 Swing 中以亚像素精度绘制线条？

> ID：12415640
> 
> 赞同：9
> 
> 时间：2012-09-13T22:24:26.853
> 
> 标签：java, swing, line, subpixel

[这个问题以前有人问过](https://stackoverflow.com/questions/7759549/java-draw-line-based-on-doubles-sub-pixel-precision)，但答案并没有解决问题，所以我再问一次。

有人建议`g2.drawLine`您可以使用`g2.draw(line)`, where `line`is a来代替使用`Line2D.Double`. 但是，正如您从屏幕截图中看到的那样，线条仍然绘制成好像它们以整数像素结束（每组 10 条线完全平行）。

```
import javax.swing.*;
import java.awt.*;
import java.awt.geom.Line2D;

public class FrameTestBase extends JFrame {

    public static void main(String args[]) {
        FrameTestBase t = new FrameTestBase();
        t.add(new JComponent() {
            public void paintComponent(Graphics g) {
                Graphics2D g2 = (Graphics2D) g;
                g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
                        RenderingHints.VALUE_ANTIALIAS_ON);
                for (int i = 0; i < 50; i++) {
                    double delta = i / 10.0;
                    double y = 5 + 5*i;
                    Shape l = new Line2D.Double(5, y, 200, y + delta);
                    g2.draw(l);
    // Base case, with ints, looks exactly the same:
    //              g2.drawLine(5, (int)y, 200, (int)(y + delta));
                }
            }
        });

        t.setDefaultCloseOperation(EXIT_ON_CLOSE);
        t.setSize(220, 300);
        t.setVisible(true);
    }
} 
```

![非平行线](../Images/8fa3a302ca0c21efbf51c077109fb334.png)

那么在 Swing 中是否不可能正确渲染不完全在像素上结束的线条？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T00:26:09.150

尝试设置以下内容：

```
g2d.setRenderingHint(RenderingHints.KEY_STROKE_CONTROL, RenderingHints.VALUE_STROKE_PURE); 
```

取自这个答案： [Java - 亚像素线精度是否需要 AffineTransform？](https://stackoverflow.com/questions/5018635/java-does-subpixel-line-accuracy-require-an-affinetransform)

这是比较的结果：

![在此处输入图像描述](../Images/bbbb56333f76abd83c3a21feb4fe62b9.png)

# c# - 当我尝试从自定义类中停止 Timer 时，我不断收到 NullReferenceException

> ID：12415648
> 
> 赞同：0
> 
> 时间：2012-09-13T22:25:11.067
> 
> 标签：c#, .net, nullreferenceexception

我有一个使用表单设计器创建的计时器（这使它成为主表单窗口的成员，对吧？）我在此类中以不同的方法停止计时器。目前我通过将它传递给另一个方法并分配给`t`这个类的私有成员来让它工作。我意识到发生这种情况时它可能为空，但当我调试它并且它让我发疯时它不是。

`System.NullReferenceException was unhandled by user code Message=Object reference not set to an instance of an object.`

```
 private void domDocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
        // do a doc scan here then remove the handler

        var form = Form.ActiveForm as MainWindow;
        form.pagesToVisit = docScan(b.Document, this.domain);

        if (t != null) { t.Start(); }
        // here i need to stop a timer that is a member of the main form

        b.DocumentCompleted -= domDocumentCompleted;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T22:54:34.613

请注意，您的代码在事件中。该事件可能在与主窗体操作的线程不同的线程中被调用。请参阅[如何：对 Windows 窗体控件](http://msdn.microsoft.com/en-us/library/ms171728%28v=vs.90%29.aspx) 进行线程安全调用以了解如何解决此问题。

此外，从事件内部删除事件也不是好习惯。

# apache - .htaccess 中的 301 重定向以重新提交 URL-s

> ID：12415654
> 
> 赞同：1
> 
> 时间：2012-09-13T22:25:23.080
> 
> 标签：apache, mod-rewrite, redirect

我想问我如何重定向搜索引擎以重新审视我新的、新鲜的、重写的 URL-s？

所以，我以前的 URL-s 的结构是这样的：

[http://www.sample.com/tutorials.php?name=something](http://www.sample.com/tutorials.php?name=something)

现在它们看起来更干净更好了：

[http://www.sample.com/tutorials/programming/something.php](http://www.sample.com/tutorials/programming/something.php)

所以，正如我所说，我希望谷歌（和其他引擎）看看我的新链接，这些链接对 SEO 更友好，因此我会更好地被索引。

有人告诉我 301 重定向方法是最好的，但我不知道它是什么、它是如何工作的以及在哪里学习如何使用它。所以，我问你。

旁注：更新我的 sitemap.xml 文件并将其重新提交给 Google 网站管理员工具是否有助于此过程？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T22:45:21.490

有 2 种（在这种情况下）重定向。当客户端（无论是浏览器、搜索引擎索引机器人还是其他任何东西）请求 URI 时，服务器可以告诉客户端“您要查找的内容存在，但它在其他地方”。在**302**或临时重定向的情况下，它本质上是在告诉客户端“您要查找的内容存在，但它暂时在*此*URL 上”。在**301**或永久重定向的情况下，它本质上是在告诉客户端“您要查找的内容存在，但它已永久移至*此*URL”。

对于后者，浏览器、代理服务器和搜索引擎索引知道旧 URL 不再有效并停止使用它，从现在开始使用服务器通过 301 重定向返回的新 URL . 对于像谷歌这样的搜索引擎，它有一个旧 URL 的索引，以及它在该 URL 的整个生命周期中积累的所有数据。当其中一个机器人看到 301 时，它知道旧 URL 及其内容并没有消失，而是永久移动到另一个 URL。Google 为旧 URL 收集的所有相关数据都会被转移到新 URL。谷歌可能可以在没有 301 重定向的情况下解决大部分问题，但这是确保谷歌获得权利的可靠方法。

您可以通过 mod_rewrite 进行这样的重定向：

```
RewriteEngine On
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /tutorials\.php\?name=([^&\ ]+)
RewriteRule ^ /tutorials/programming/%1.php [L,R=301] 
```

您应该将它放在文档根目录中 htaccess 文件的顶部附近。该条件检查是否已`/tutorials.php`使用查询字符串进行了实际请求`name="something"`。“某事”部分按匹配分组，并通过`%1`反向引用访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T22:35:31.923

301 重定向是服务器可以做出的响应，它向用户（或搜索引擎）发出他们正在寻找的页面已永久移动到指定的其他页面的信号。可以将 apache 配置为为某些 url 提供 301，但是让您使用的任何服务器端语言接受请求，然后发出 301 可能更容易。

Google 很有可能会在没有 301 或其他任何东西的情况下很快弄清楚发生了什么，但向他们提交站点地图或使用Google 网站管理员工具中的[URL 参数功能可能会有所帮助。](https://support.google.com/webmasters/bin/answer.py?hl=en&answer=1235687)

# c# - StructureMap - 注册通用类型

> ID：12415655
> 
> 赞同：1
> 
> 时间：2012-09-13T22:25:27.537
> 
> 标签：c#, generics, types, structuremap

我有以下代码：

```
public class Dispatcher : IDispatcher {
  public void Send(Order order) {
    var type = typeof(IOrderHandler<>).MakeGenericType(order.GetType());
    var handler = ObjectFactory.GetInstance(type);
  }
} 
```

**注意：**我正在尝试获取 IOrderHandler，在这种情况下，订单为： public class CoffeOrder : Order { }

我的 StructureMap 配置如下：

```
ObjectFactory.Initialize(x => {
  x.For<IOrderHandler>().Use<OrderHandler>();
}); 
```

调试时出现以下错误： {"StructureMap configuration failures:\r\nError: 104\r\nSource: Registry: StructureMap.Configuration.DSL.Registry, StructureMap, Version=2.6.4.0, ...

我尝试了其他选项，但总是以 104 错误或 202 错误结束：“StructureMap 异常代码：202\nNo Default Instance defined for PluginFamily Proj.Test.Tests+IOrderHandler`1[[Proj.Test.Tests+CoffeOrder,项目测试，...

注意： CoffeOrder 是我在测试中通过的订单类型。

我的 Handler 类和接口代码如下：

```
public class CoffeHandler : OrderHandler<CoffeOrder> {
  public override void Handle(CoffeOrder order) {
    // Some Code
  } // CoffeHandler
} 

public interface IOrderHandler {
  void Handle(Order order);
} // IOrderHandler

public interface IOrderHandler<TOrder> : IOrderHandler where TOrder : Order {
  void Handle(TOrder order);
} // IOrderHandler

public abstract class OrderHandler : IOrderHandler {
  public abstract void Handle(Order order);
} // OrderHandler

public abstract class OrderHandler<TOrder> : OrderHandler, IOrderHandler<TOrder> where TOrder : Order {

  public override void Handle(Order order) {
    TOrder torder = (TOrder)order;
    Handle(torder);
  } // Handle

  public abstract void Handle(TOrder order);

} // OrderHandler 
```

有人可以帮我吗？

谢谢你，米格尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T02:07:07.877

请注意，您在注册时会立即失败，而不是在解决时失败。你的注册说：“当请求一个类型的类时`IOrderHandler`，返回一个具体的实例`OrderHandler`

您`OrderHandler`是一个抽象类，因此 StructureMap 无法创建它的具体实例。如果您按照以下方式注册，

```
ObjectFactory.Initialize(
            x => x.For<IOrderHandler<CoffeOrder>>().Use<CoffeHandler>()); 
```

您是说，“当请求一个类型的类时`IOrderHandler<CoffeOrder>`（这是您在示例中请求的），返回一个具体实例`CoffeHandler`。这是一个有效的映射，因为它可以实例化一个`CoffeHandler`.

虽然上面解决了您的问题，但我有一种预感，如果您想要注册许多不同的实现，您可能希望 StructureMap 为您做更多的工作。如果是这种情况，那么您很幸运，因为 StructureMap 支持开放泛型。

然后您的分辨率代码将如下所示：

```
var handler = ObjectFactory.ForGenericType(typeof(IOrderHandler<>))
             .WithParameters(order.GetType())
             .GetInstanceAs<IOrderHandler>(); 
```

如果你有一个具体的通用实现，`IOrderHandler<>`你可以注册它。但是由于您不这样做并且 [根据我的直觉] 您不想注册每个具体实例，因此您需要进行扫描。如何做到这一点确实是一个不同的问题，如果不知道您要扫描什么，我无法回答。但是您可以[在此处](http://lostechies.com/jimmybogard/2009/12/18/advanced-structuremap-connecting-implementations-to-open-generic-types/)查看详细介绍 Structure Map 开放泛型的博客文章，其中包括涵盖扫描的示例。

# jquery - 图片标题在悬停时从顶部滑动

> ID：12415658
> 
> 赞同：0
> 
> 时间：2012-09-13T22:25:34.057
> 
> 标签：jquery

我有一个标题在悬停时淡入，然后在鼠标离开时向下滑动。如何更改此设置，以便标题在 mouseenter 上从图像顶部向下滑动，然后在 mouseleave 上再次向上滑动？

```
<a href="link.html">
    <div class='wrapper'>
        <img alt="" width="184" height="69" src="image.png" />
        <div class="description">
            <div class="description_content">Title<br /><small>Description text</small></div>
        </div>
    </div>
</a> 
```

jQuery

```
$(window).load(function(){  
        $('div.description').each(function(){  
        $(this).css('opacity', 0);  
        $(this).css('width', $(this).siblings('img').width());  
        $(this).parent().css('width', $(this).siblings('img').width());  
        $(this).css('display', 'block');  
    });  

$('div.wrapper').mouseenter(function(){    
    $(this).children('.description').stop().fadeTo(700, 1);  
}).mouseleave(function(){  
    $(this).children('.description').stop().slideUp(700);  
});

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:30:32.373

试试这个：

```
$('div.wrapper').mouseenter(function(){    
    $(this).children('.description').stop().slideDown(700);  
}).mouseleave(function(){  
    $(this).children('.description').stop().slideUp(700);  
}); 
```

# html - 使用 margin:auto 垂直对齐 div

> ID：12415661
> 
> 赞同：138
> 
> 时间：2012-09-13T22:26:15.233
> 
> 标签：html, css, centering

所以我知道如果我们使用`margin:0 auto;`. 应该`margin:auto auto;`如何工作我认为它应该工作？也垂直居中？

为什么也`vertical-align:middle;`不起作用？

```
.black {
    position:absolute;
    top:0;
    bottom:0;
    left:0;
    right:0;
    background:rgba(0,0,0,.5);
}
.message {
    background:yellow;
    width:200px;
    margin:auto auto;
    padding:10px;
}
```

```
<div class="black">
    <div class="message">
        This is a popup message.
    </div>
</div>
```

[JSFiddle](http://jsfiddle.net/yWnZ2/)

* * *

## 回答 #1

> 赞同：188
> 
> 时间：2012-09-14T02:23:07.650

**2020 年 8 月更新**

尽管下面的有用信息仍然值得一读，但我们已经使用 Flexbox 有一段时间了，所以按照[这个答案](https://stackoverflow.com/a/26079837/1028679)使用它。

* * *

**你不能使用：**

`vertical-align:middle`因为[它***不适***用于块级元素](http://www.w3.org/TR/CSS21/visudet.html#propdef-vertical-align)

`margin-top:auto`并且`margin-bottom:auto`因为[它们使用的值将计算***为零***](http://www.w3.org/TR/CSS2/visudet.html#Computing_heights_and_margins)

`margin-top:-50%`因为[基于百分比的边距值是相对于包含块的***宽度计算的***](http://www.w3.org/TR/CSS2/box.html#margin-properties)

事实上，文档流和[元素高度计算算法](http://www.w3.org/TR/CSS2/visudet.html#Computing_heights_and_margins)的本质使得不可能使用边距来使元素在其父元素中垂直居中。每当更改垂直边距的值时，它将触发父元素高度重新计算（重新流动），这反过来又会触发原始元素的重新居中......使其成为无限循环。

**您可以使用：**

[像这样的一些解决方法](http://www.jakpsatweb.cz/css/css-vertical-center-solution.html)适用于您的场景；这三个元素必须像这样嵌套：

```
.container {
    display: table;
    height: 100%;
    position: absolute;
    overflow: hidden;
    width: 100%;
}
.helper {
    #position: absolute;
    #top: 50%;
    display: table-cell;
    vertical-align: middle;
}
.content {
    #position: relative;
    #top: -50%;
    margin: 0 auto;
    width: 200px;
    border: 1px solid orange;
}
```

```
<div class="container">
    <div class="helper">
        <div class="content">
            <p>stuff</p>
        </div>
    </div>
</div
```

根据 Browsershot，[JSFiddle可以正常工作。](http://jsfiddle.net/ovfiddle/yVAW9/)

* * *

## 回答 #2

> 赞同：143
> 
> 时间：2014-09-27T22:37:19.097

自从 2012 年提出这个问题以来，我们在浏览器对 flexbox 的支持方面取得了长足的进步，我觉得这个答案似乎是强制性的。

如果您的父容器的显示为`flex`，则**yes** , `margin: auto auto`（也称为`margin: auto`）将使其水平和垂直居中，无论它是否为`inline`or`block`元素。

```
#parent {
    width: 50vw;
    height: 50vh;
    background-color: gray;
    display: flex;
}
#child {
    margin: auto auto;
}
```

```
<div id="parent">
    <div id="child">hello world</div>
</div>
```

请注意，不必绝对指定宽度/高度，如在此***[示例 jfiddle](http://jsfiddle.net/yea6r8n4/)***中，它使用相对于视口的大小。

尽管浏览器对 flexbox 的支持在发布时处于历史最高水平，但许多浏览器仍然不支持它或需要供应商前缀。有关更新的浏览器支持信息，请参阅[http://caniuse.com/flexbox 。](http://caniuse.com/flexbox)

## 更新

由于这个答案受到了一些关注，我还想指出，`margin`如果您正在使用`display: flex`并且想要将容器中的所有元素居中，则根本不需要指定：

```
#parent {
    width: 50vw;
    height: 50vh;
    background-color: gray;
    display: flex;
    align-items: center; /* vertical */
    justify-content: center; /* horizontal */
}
```

```
<div id="parent">
    <div>hello world</div>
</div>
```

* * *

## 回答 #3

> 赞同：66
> 
> 时间：2013-08-07T14:44:08.270

这是我找到的最佳解决方案：http: [//jsfiddle.net/yWnZ2/446/](http://jsfiddle.net/yWnZ2/446/)适用于 Chrome、Firefox、Safari、IE8-11 和 Edge。

如果你有一个声明的`height`( `height: 1em`, `height: 50%`, 等等) 或者它是一个浏览器知道高度的元素 ( `img`, `svg`, 或者`canvas`例如), 那么你需要的垂直居中是这样的：

```
.message {
    position: absolute;
    top: 0; bottom: 0; left: 0; right: 0;
    margin: auto;
} 
```

您通常需要指定 a`width`或`max-width`以便内容不会拉伸屏幕/容器的整个长度。

如果您将它用于您希望始终在视口中居中与其他内容重叠的模式，请使用`position: fixed;`这两个元素而不是`position: absolute`. [http://jsfiddle.net/yWnZ2/445/](http://jsfiddle.net/yWnZ2/445/)

这是一个更完整的文章：http: [//codepen.io/shshaw/pen/gEiDt](http://codepen.io/shshaw/pen/gEiDt)

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2015-07-19T19:23:01.847

编辑：现在是 2020 年，我会改用弹性框。

原答案：

html

```
<body>
  <div class="centered">
  </div>
</body> 
```

CSS

```
.centered {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
} 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2014-09-17T17:21:17.570

我知道这个问题来自 2012 年，但我找到了最简单的方法，我想分享。

HTML：

```
<div id="parent">
     <div id="child">Content here</div>
</div> 
```

和 CSS：

```
#parent{
     height: 100%;
     display: table;
}    
#child {
     display: table-cell;
     vertical-align: middle; 
} 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2012-09-13T23:19:34.090

**如果您知道要居中的 div 的高度，则**可以将其绝对定位在其父级中，然后将`top`值设置为`50%`. 这将使子 div 的顶部下降其父级的 50%，即太低。`margin-top`通过将其设置为其高度的一半将其拉回。所以现在你的子 div 的垂直中点位于父 div 的垂直中点 - 垂直居中！

例子：

```
.black {
    position:absolute;
    top:0;
    bottom:0;
    left:0;
    right:0;
    background:rgba(0,0,0,.5);
}
.message {
    background:yellow;
    width:200px;
    margin:auto auto;
    padding:10px;
    position: absolute;
    top: 50%;
    margin-top: -25px;
    height: 50px;
}
```

```
<div class="black">
    <div class="message">
        This is a popup message.
    </div>
</div>
```

[http://jsfiddle.net/yWnZ2/2/](http://jsfiddle.net/yWnZ2/2/)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-09-01T11:15:32.617

这两个解决方案只需要两个嵌套元素。
**First -****如果内容是静态的**（手动中心），则相对和绝对定位。

```
.black {
    position:relative;
    min-height:500px;
    background:rgba(0,0,0,.5);

}
.message {
    position:absolute;
    margin: 0 auto;
    width: 180px;
    top: 45%; bottom:45%;  left: 0%; right: 0%;
} 
```

[https://jsfiddle.net/GlupiJas/5mv3j171/](https://jsfiddle.net/GlupiJas/5mv3j171/)

或**用于流体设计**- 对于确切的内容中心，请改用以下示例：

```
.message {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
} 
```

[https://jsfiddle.net/GlupiJas/w3jnjuv0/](https://jsfiddle.net/GlupiJas/w3jnjuv0/)

您需要设置“最小高度”以防内容超过窗口高度的 50%。您还可以使用移动和平板设备的媒体查询来控制此高度。但前提是您使用响应式设计。

我想如果出于某种原因需要，您可以更进一步并使用简单的 JavaScript/JQuery 脚本来操作最小高度或固定高度。

**第二**-**如果内容是流动的**，你还可以使用垂直对齐和文本居中对齐的表格和表格单元 css 属性：

```
/*in a wrapper*/  
display:table; 
```

和

```
/*in the element inside the wrapper*/
display:table-cell;
vertical-align: middle;
text-align: center; 
```

完美地工作和扩展，通常用作响应式网页设计解决方案，具有操纵对象宽度的网格布局和媒体查询。

```
.black {
    display:table;
    height:500px;
    width:100%;
    background:rgba(0,0,0,.5);

}
.message {
    display:table-cell;
    vertical-align: middle;
    text-align: center;
} 
```

[https://jsfiddle.net/GlupiJas/4daf2v36/](https://jsfiddle.net/GlupiJas/4daf2v36/)

我更喜欢精确内容居中的表格解决方案，但在某些情况下，相对绝对定位会做得更好，特别是如果我们不想保持内容对齐的精确比例。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-07-04T12:30:21.603

```
.black {
    display:flex;
    flex-direction: column;
    height: 200px;
    background:grey
}
.message {
    background:yellow;
    width:200px;
    padding:10px;
    margin: auto auto;
}
```

```
<div class="black">
    <div class="message">
        This is a popup message.
    </div>
</div>
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-09-13T22:42:16.350

没有一种简单的方法可以使 div 垂直居中，这在每种情况下都能奏效。

但是，根据情况有很多方法可以做到这一点。

以下是其中几个：

*   设置父元素的顶部和底部填充，例如 padding:20px 0px 20px 0px
*   使用表格，表格单元格将其内容垂直居中
*   将父元素的相对位置和要垂直居中的 div 设置为绝对并将其样式设置为 top:50px; 底部：50px；例如

您也可以在 Google 上搜索“css 垂直居中”

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-08-09T12:50:11.560

使用弹性盒：

**HTML：**

```
<div class="container">
  <img src="http://lorempixel.com/400/200" />
</div> 
```

**CSS：**

```
.container {
  height: 500px;
  display: flex;
  justify-content: center; /* horizontal center */
  align-items: center;     /* vertical center */
} 
```

[查看结果](https://jsfiddle.net/64wwkvm8/)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-04-07T19:52:57.877

可变高度，边距顶部和底部自动

```
.black {background:rgba(0,0,0,.5);
width: 300px;
height: 100px;
display: -webkit-flex; /* Safari */
display: flex;}
.message{
background:tomato;
margin:auto;
padding:5%;
width:auto;
}
```

```
<div class="black">
<div class="message">
    This is a popup message.
</div>
```

可变高度，边距顶部和底部自动

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-10-06T10:24:47.017

我认为你可以用 Flexbox 解决这个问题

```
.black {
  height : 200px;
  width : 200px;
  background-color : teal;
  border: 5px solid rgb(0, 53, 53);
  /* This is the important part */
  display : flex;
  justify-content: center;
  align-items: center;
}

.message {
  background-color :  rgb(119, 128, 0);
  border: 5px solid rgb(0, 53, 53);
  height : 50%;
  width : 50%;
  padding : 5px;
}
```

```
<div class="black">
    <div class="message">
        This is a popup message.
    </div>
</div>
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2022-01-08T09:35:21.507

```
.black {
    position:absolute;
    /*
        Replace with a one line inset property.
    top:0;
    bottom:0;
    left:0;
    right:0;
    */
    inset: 0;
    background:rgba(0,0,0,.5);
    /*
        Since no one has mentioned it yet,
        here it is the grid display and
        the place-content property.
    */
    display:grid;
    place-content: center;
}
.message {
    background:yellow;
    width:200px;
    /*
        There's no point here.
    margin:auto auto;
    */
    padding:10px;
}
```

```
<div class="black">
    <div class="message">
        This is a popup message.
    </div>
</div>
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2020-04-12T14:51:27.257

```
.black {
    position:absolute;
    top:0;
    bottom:0;
    left:0;
    right:0;
    background:rgba(0,0,0,.5);
}
.message {
    position: absolute;
    top:50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background:yellow;
    width:200px;
    padding:10px;
}

 - 

----------

<div class="black">
<div class="message">
    This is a popup message.
</div> 
```

# jquery - 当 td 包含文本标签时，如何对表列求和？

> ID：12415662
> 
> 赞同：0
> 
> 时间：2012-09-13T22:26:21.863
> 
> 标签：jquery, text, html-table, sum, tablecell

我正在尝试对表中列的值求和并将该总和放入另一个 html 字段中。我遇到的挑战是 TD 单元格中的值是简单的文本标签。 [http://jsfiddle.net/dm4AZ/60/](http://jsfiddle.net/dm4AZ/60/)

```
<table>
   <tr>
      <td>100</td>
   </tr>
   <tr>
      <td>200</td>
   </tr>
   <tr>
      <td>100</td>
   </tr>
</table>
<br>
<dl>
    <dt>Total Value:</dt>
    <dd id="mySum"></dd>
</dl>

$(document).ready(function(){
     colSum();
});

function colSum() {
    var sum=0;
    //iterate through each input and add to sum
    $('myTD').each(function() {     
            sum += parseInt(this.html());                     
    }); 
    //change value of total
       $('#mySum').html(sum);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T22:30:02.797

标记中没有 myTD 。此外，当您想读取每个选择器的值时，您需要使用

**$(this)** 而不仅仅是**这个**

```
 $('myTD').each(function() {     
                sum += parseInt(this.html());                     
        }); 
```

应该

```
$('td').each(function() {     
            sum += parseInt($(this).text());                     
    }); 
```

检查这个[更新的小提琴](http://jsfiddle.net/sushanth009/dm4AZ/63/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T22:30:06.463

这将起作用：

```
 $(document).ready(function(){
      colSum();
    });

    function colSum() {
      var sum=0;
      //iterate through each input and add to sum
      $('td').each(function() {     
        sum += parseInt($(this).text());                     
      }); 
      //change value of total
      $('#mySum').html(sum);
    } 
```

# jquery - IE7 jQuery.animate() 无法向左滑动所有内容

> ID：12415663
> 
> 赞同：0
> 
> 时间：2012-09-13T22:26:30.097
> 
> 标签：jquery, jquery-animate, internet-explorer-7

我正在设计一个网站，其中前端导航涉及将整个页面的内容向左、向右和向下滑动。这在除 IE7 之外的所有内容中都可以正常工作。最奇怪的是，三个动画中的一个可以完美运行（就好像它是现代浏览器一样），但由于某种原因，其他两个功能无法正常工作。

这是有效的功能：

jQuery('#block-block-16 p').live('click',function(){ FadeHeaderFooter();

```
var $structure = jQuery('#structure');
var $colorBlock = jQuery('#news-color-block');  
var colorHeight = parseInt($colorBlock.css('margin-top'));
var w = jQuery(window).width(); //major difference
var slideHeight = FindSweetSpot('#news-color-block');

$structure.animate({ marginLeft: (w+2000) + "px" }, //math is different
                        1500, function(){
    $colorBlock.animate({ marginTop: (colorHeight - slideHeight) + "px" }, 
                        1000, function(){
        window.open (fakeurl.com','_self',false);
    });
}); 
```

});

这是没有的：

jQuery('#block-block-18 p').live('click',function(){ FadeHeaderFooter();

```
var $structure = jQuery('#structure');
var $colorBlock = jQuery('#about-color-block');
var colorHeight = parseInt($colorBlock.css('margin-top'));
var w = jQuery("#main-content").width();
var slideHeight = FindSweetSpot('#about-color-block');

$structure.animate({ marginLeft: ((w/2)*-1) + "px" }, //
                        1500, function(){
    $colorBlock.animate({ marginTop: (colorHeight - slideHeight) + "px" }, 
                        1000, function(){
        window.open ('fakeurl.com','_self',false);
    });
}); 
```

});

两者几乎相同。您会看到变量 w 是用不同的元素声明的，但这似乎不是问题（并且适用于所有其他浏览器）。问题似乎是我在哪里计算新的 marginLeft 将是什么。

即这个有效：marginLeft: (w+2000) + "px"

这个没有：marginLeft: ((w*.5)*-1) + "px"

第一个将页面向右滑动，第二个试图将所有内容向左滑动。

似乎 IE7 无法向左滑动东西？我认为这可能是乘以-1，所以我尝试了这个：

var dist = (w*.5); var 幻灯片 = 距离 - 距离 - 距离；

徒劳无功。任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T15:24:51.617

我发现了问题！定义为 w （ var w = jQuery("#main-content").width(); ）的元素具有“相对”的位置值，通过将该值切换为“绝对”，我能够获得所需的全面发挥作用。

学过的知识：

在 IE7 中使用 jQuery.animate() 时，请确保父元素绝对定位。这适用于您正在制作动画的孩子也绝对定位时。

# python - 动态创建的类中的 Python 继承

> ID：12415668
> 
> 赞同：2
> 
> 时间：2012-09-13T22:27:15.867
> 
> 标签：python, metaclass, monkeypatching

我正在尝试使用元类来实现以下功能：

```
class foo( object ):

    def __init__( self ):
        self.val = 'foo'

    def bar( self ):
        print 'hello world'
        print self.val

f = foo()
f.bar() #prints 'hello world' followed by foo

def newbar( self ):
    super( **?**, self).bar()
    print 'another world!'

fooNew = type('fooNew', (foo,), {'bar':newbar})
n = fooNew()
n.bar() # should print everything in f.bar() followed by 'another world!' 
```

我知道我可以使用猴子补丁来实现我自己的函数 newbar。但是有一个细微的区别，我希望新的 bar 函数首先运行基类 bar 函数，然后才运行任何附加功能。

我怎样才能做到这一点？或者我怎么能做得更好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T22:32:10.827

使用`super()`调用基类方法在某些多重继承情况下具有优势，但在大多数其他情况下（即在 95% 的用例中）存在劣势。所以这里干脆不要使用`super()`，而是直接调用基类方法。

我会采用另一种方式（前提是我确定我真的想动态创建一个类）。您可以在函数中定义整个类并返回它：

```
def class_factory():
    class NewFoo(foo):
        def bar(self):
            foo.bar()
            print 'another world!'
    return NewFoo 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T22:31:29.260

您可以更改 的定义`newbar`以返回一个函数：

```
def newbar_factory(cls):
    def newbar(self):
        super(cls, self).bar()
        # Alternately, as Sven points out you could do
        # cls.bar(self)
        print "another world!"

    return newbar

# Use
fooNew = type('fooNew', (foo,), {'bar':newbar_factory(foo)}) 
```

可能有更好的方法来完成您正在尝试做的事情 - 但这*应该*可以解决问题。

# html - 尝试打印时网站上的 CSS 消失

> ID：12415670
> 
> 赞同：0
> 
> 时间：2012-09-13T22:27:24.823
> 
> 标签：html, css, printing, web

我有一个网站，我花了很多时间编程，[www.omdyac.org](https://web.archive.org/web/20181112203710/http://omdyac.org/)，我最近尝试打印它的主页，我希望它只打印屏幕上出现的内容，但是当它打印时我找到了这个。 ![主页](../Images/b491d2d4d2486c15b87547fe7ac82fc7.png) ![降低](../Images/61aff873af8df22c7d8e16aa575a988b.png) （这是页面上的两个单独的图像。）为什么当我尝试打印这个网站时，所有的 CSS 格式都消失了？

通过将媒体类型从屏幕更改为全部，我让它看起来像这样

[![它看起来如何](../Images/372fd0092e848e7569e0532015f63a27.png)](https://i.stack.imgur.com/IbtQ7.png)

但这就是它应该看起来的样子，为什么灰色没有出现？

[![它应该是什么样子](../Images/55fd524ee211e1fd987294eec7b1b730.png)](https://i.stack.imgur.com/MoLwD.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T22:33:23.930

您的`link`标签已`media="screen"`设置。这意味着 CSS 只会在屏幕上应用，而不是在打印页面时应用。要使 CSS 也适用于打印，请设置`media="all"`或省略该`media`属性。您还可以设置`media="print"`仅打印样式。希望这可以帮助！
编辑：为了节省墨水，浏览器不打印背景。我建议您创建一个打印样式表。对于打印，可以隐藏页面的许多元素，例如搜索框和导航。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T22:30:18.037

这是因为您应该阅读更多关于 css 的内容，尤其是 css 媒体类型（包括打印） [http://www.w3schools.com/css/css_mediatypes.asp](http://www.w3schools.com/css/css_mediatypes.asp)

# ruby-on-rails-3 - Rails 3.0 设计了从管理员到用户的帐户验证 - 未定义的方法“edit_user_path”

> ID：12415671
> 
> 赞同：0
> 
> 时间：2012-09-13T22:27:30.940
> 
> 标签：ruby-on-rails-3, devise

我正在尝试创建一个管理员帐户来验证用户的注册，因为我有 2 个设计模型：管理员和用户。

**我已按照以下步骤操作：**
[https ://github.com/plataformatec/devise/wiki/How-To%3a-Require-admin-to-activate-account-before-sign_in](https://github.com/plataformatec/devise/wiki/How-To%3a-Require-admin-to-activate-account-before-sign_in)

但是从视图中我得到了这个错误：
未定义的方法`edit_user_path'

**这是我的 app/models/user.rb**

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  attr_accessible :email, :password, :password_confirmation, :remember_me

  def active_for_authentication? 
    super && approved? 
  end 

  def inactive_message 
    if !approved? 
      :not_approved 
    else 
      super # Use whatever other message 
    end 
  end

  def self.send_reset_password_instructions(attributes={})
    recoverable = find_or_initialize_with_errors(reset_password_keys, attributes, :not_found)
    if !recoverable.approved?
      recoverable.errors[:base] << I18n.t("devise.failure.not_approved")
    elsif recoverable.persisted?
      recoverable.send_reset_password_instructions
    end
    recoverable
  end
end 
```

**应用程序/控制器/unapproved_users_controller.rb**

```
class UnapprovedUsersController < ApplicationController

  def index
    if params[:approved] == "false"
      @users = User.find_all_by_approved(false)
    else
      @users = User.all
    end
  end
end 
```

**应用程序/views/unapproved_users.html.haml**

```
%h1 Users

= link_to "All Users", :action => "index"
|
= link_to "Users awaiting approval", :action => "index", :approved => "false"

%table
    - @users.each do |user|
        %tr
            %td= user.email
            %td= user.approved
            %td= link_to "Edit", edit_user_path(user) 
```

**此路径导致问题：**
= link_to "Edit", edit_user_path(user)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:35:04.530

选项 #1 - 检查`rake routes`正确的助手

选项#2 - 您需要设置一个管理员界面来编辑用户，因为我很确定设计只为`current_user`想要编辑另一个用户的人提供界面。

选项 #3 - 使用类似[RailsAdmin 的东西](https://github.com/sferik/rails_admin)

# macos - 苹果和 Internet Explorer

> ID：12415674
> 
> 赞同：-1
> 
> 时间：2012-09-13T22:27:52.983
> 
> 标签：macos, internet-explorer

我认识的某个聪明人刚刚提到将 Internet Explorer 下载到 Mac 上的想法似乎违反直觉，尽管这样做可能是有意义的，因为 Safari 似乎在我们正在处理的项目的某个站点上存在问题。我只是想知道为什么会这样，并且非常感谢任何澄清。总之：

```
 Why does it not make sense to download Internet Explorer onto a Mac? 
```

非常感谢提前！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T22:30:04.900

用于 Macintosh 的 Internet Explorer 的最后一个版本是 5.2，于 2003 年推出。它甚至无法在现代机器上运行。构建只是不兼容。

如果您想尝试不同的浏览器，Chrome 和 Firefox 都可以在 OSX 上运行。

要在 Mac 上运行 Internet Explorer，您需要使用某种虚拟化，通过 Boot Camp 或 Parallels 运行 Windows。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T22:48:01.317

如果您正在寻找一个严肃的答案：

使用 IE7 for Windows 进行测试的最佳方法是使用 IE7 for Windows。仅仅因为你有一台 Mac 并不意味着你不能这样做。您可以通过 BootCamp 运行 Windows。或者购买一个 99 美元的二手 Windows 盒子并借用 Mac 的键盘/鼠标等。当然，通过 Parallels、VMware 等在 OS X 下的 VM 中运行 Windows 要方便得多，而且几乎可以肯定足够好。Wine 大部分都可以工作，但配置起来可能很繁琐，并且可能会崩溃和/或出现视觉问题真实 Windows 不会发生的故障；如果你真的想认真对待，你可能想看看 Crossover。

但测试 IE7 for Windows 的下一个最佳方法实际上是 Opera。当然，对于更高版本的 IE 中仍然存在的 bug 和怪癖，它们会完美地模拟 IE7，但对于已修复的 bug，这并不是特别重要的重点。另一方面，Opera 努力模仿所有重要浏览器的怪癖。确保启用 IE quirks 模式，并将用户代理设置为在 Windows 上伪装成 IE7，你应该是金色的。

但是对于您实际提出的问题，没有可能是正确的笼统答案。将 Internet Explorer 下载到 Mac 上可能没有意义的原因有很多，也有很多原因。

*   您不能在任何现代 Mac 上运行 IE for Mac。
    *   如果你有一台老式的 Mac，它运行的是 10.2 或 10.3 而不是 10.4，它已经有 IE（如果你想重新安装它，它是 OS X 安装的一部分），所以没有理由下载 IE。
    *   您也不能再从任何地方合法下载 IE for Mac（旧版 OS X 的一部分除外）。
    *   与任何现代浏览器相比，Mac 版 IE 实际上远不像 Windows 版 IE7。
*   您不能在 Mac OS X 上运行适用于 Windows 的 IE（或适用于 Windows Mobile 的 Pocket IE）。
    *   但是你可以在 wine 下运行它。
    *   您可以在运行 Windows 的虚拟机中运行它。
        *   除了 Windows 附带 Internet Explorer，因此没有理由下载它。
        *   除非您的 Windows 带有旧版本并且您想要更新它。
    *   如果您愿意，Mac 可以运行 Windows 而不是 OS X（例如，通过 BootCamp）。
        *   与 VM 相同的警告。
    *   除了运行它之外，下载它可能还有其他原因。
        *   如果您的 Mac 可以访问快速 Internet 连接，而您的 Windows 机器没有，您可能需要在 Mac 上下载安装程序以将其本地复制到 Windows。
        *   有时您只想用完互联网带宽。
        *   也许您正在测试下载速度。
        *   也许你要甩掉你的男朋友，首先你想让他超过每月带宽限制 300 美元。
        *   当 Microsoft 的某些人在日志中注意到您在 Mac 上下载了 IE 时，他们可能会觉得这很有趣，并且给陌生人的脸上带来微笑总是很好的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T22:30:16.353

我必须这样做，因为我正在开发软件，而客户希望将其设计为 IE 7（他们所有机器上的版本）。

如果我有我的 druthers，我会在虚拟化（例如 VMWare）下运行它，但是我放错了旧的 XP CD，所以我选择了 Wine（它工作得很好，但有时会崩溃） .

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T23:10:16.737

我建议使用 VirtualBox，它可以让您直接在 Mac 上运行 MSIE： [https ://www.virtualbox.org/](https://www.virtualbox.org/)

...以下是 MSIE 6、7、8 和 9 的 VM： [https ://github.com/xdissent/ievms](https://github.com/xdissent/ievms)

祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-12T14:11:59.500

为 Mac 安装 Internet Explorer 绝对不是一个好主意。它根本无法正常工作，因为它在 2005 年被 Microsoft 停产。但是，如果您必须使用它来查看某些只能在 IE 中运行的网站，这是为 Mac 下载和安装它的最简单方法：[http： //machow2.com/download-internet-explorer-for-mac/](http://machow2.com/download-internet-explorer-for-mac/)

# php - 查找注入空格的 PHP 文件

> ID：12415675
> 
> 赞同：7
> 
> 时间：2012-09-13T22:28:01.707
> 
> 标签：php, regex, bash, grep

PHP 文件中的空格有时会出现问题，因此我试图找到符合常见问题标准的文件。我正在尝试以递归方式查找具有以下一种或两种条件的所有文件：

1) 不以`<`or`#`字符开头。

**和/或**

2) 不以`>`字符结尾，除非它以大括号结尾，后跟任意数量的换行符。

我认为第一个条件是：`$[^<#]`

我认为第二个条件是：`[ [^>^] | [}\n*^]]`

但是，请注意，在我幼稚的正则表达式中`$`，它`^`表示文件的开始和结束，而不是文件中的任何行。即使有了这些，假设它们是正确的，我将如何组合它们？像这样？

```
[$[^<#]] | [[ [^>^] | [}\n*^]]] 
```

然后，将它们放入 grep 中：

```
grep -r [$[^<#]] | [[ [^>^] | [}\n*^]]] * 
```

显然，这是行不通的（tm）。有人可以教我如何纠正错误吗？谢谢。

这是一个很好的文件：

```
<?php

?> 
```

这是这样的：

```
<?php
function someFunc(){
}

‏ 
```

这也很好：

```
#!/usr/bin/php -q
<?php
?> 
```

领先的 HTML 很好：

```
<html>
<?php
echo '</html>';
?> 
```

尾随 HTML 也很好：

```
<?php
echo '<html>';
?>
</html> 
```

这很糟糕（领先的换行符）：

```
‏
<?php

?> 
```

这也很糟糕（领先空间）：

```
‏ <?php

?> 
```

这也很糟糕（尾随换行符）：

```
<?php

?>
‏ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T00:30:55.340

很快就提出了一个我认为可以满足您要求的表达方式。这里已经很晚了，出于某种原因，我在 stackoverflow 上。无论如何，我希望我得到了你的要求。

试试这个正则表达式`/\A(?:\s+.*>|[^<#].*>\s*|<.*>\s+)\Z/s`。在这里解释：[http ://regex101.com/r/cT7eY5](http://regex101.com/r/cT7eY5)

我希望这会有所帮助。如果我以任何方式误解了您，请澄清，我会尝试调整表达方式。

# javascript - 使用 JavaScript 向 gridview 添加行

> ID：12415681
> 
> 赞同：0
> 
> 时间：2012-09-13T22:29:08.397
> 
> 标签：javascript, asp.net, sorting, gridview

有没有办法使用 JavaScript 向 gridview 添加行？现在，我将 GridView 的 onclick 方法设置为 sortTrGrid(gridviewname)，sortTrGrid 方法的结构如下。我可以按正确的顺序获取表格中的行，但是网页上没有任何变化。

```
 function sortTrGrid(sender) {
        var table = document.getElementById(sender.id);
        var rows = new Array(table.rows);

        for (var i = 0; i < table.rows; i++) {
            rows[i] = table.rows[i];
        }

        for (var i = table.rows; i > 0; i--) {
            table.deleteRow(document.getElementById(i));
            table.rows[i] = rows[i];
        }

    }//end GridSort 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T02:10:11.290

假设您的页面包含数据源中的所有行（无分页），并且您希望在客户端对 GridView 行进行排序以提高性能（不影响服务器），您可以执行以下操作：

（此代码允许在单击 GridView 标题时对数字和文本进行排序和升序和降序排序）

如果你想查看完整的工作示例，[我刚刚上传到我的 GitHub 站点](https://github.com/jupaol/SO-Answers/blob/master/Visual%20Studio%202012/src/SO/WebForms/WebForms_1/Topics/JQuery/SortGridViewRows.aspx)

## 截屏

### 无序

![在此处输入图像描述](../Images/43b5718504f4d77dbbc63407740daea9.png)

### 第一次点击 - ASC 订单

![在此处输入图像描述](../Images/e8635dd766a56afc6fadfefb7e6d8be6.png)

### 第二次点击 - DESC 订单

![在此处输入图像描述](../Images/b5a324022b027a120a76877a8b31dd54.png)

## 绑定 GridView

```
<asp:LinqDataSource runat="server" ID="lds" 
    ContextTypeName="WebForms_1.DataAccess.PubsDataContext"
    TableName="jobs"
    EntityTypeName="WebForms_1.DataAccess.jobs">
</asp:LinqDataSource>
<asp:GridView runat="server" ID="gv" DataSourceID="lds" DataKeyNames="job_id">

</asp:GridView> 
```

## jQuery代码

```
<script type="text/javascript">
    $(function () {
        var $gv = $("table[id$=gv]");
        var $headers = $("th", $gv);
        var $rows = $("> tbody > tr:not(:has(table, th))", $gv);

        $rows.addClass("grid-rows");
        $headers.addClass("grid-headers");

        $headers.toggle(function (e) {
            sortGrid($(this), 0);
        }, function (e) {
            sortGrid($(this), 1);
        });

        function sortGrid(row, direction) {
            var colIndex = $(row).parent().children().index($(row));
            var $rowsArray = $.makeArray($rows);
            var $sortedArray = $rowsArray.sort(function (o, n) {
                var $currentCell = $("td:nth-child(" + (colIndex + 1) + ")", $(o));
                var $nextCell = $("td:nth-child(" + (colIndex + 1) + ")", $(n));
                var currentValue = parseFloat($currentCell.text()) ? parseFloat($currentCell.text()) : $currentCell.text();
                var nextValue = parseFloat($nextCell.text()) ? parseFloat($nextCell.text()) : $nextCell.text();

                if (direction == 0) {
                    return currentValue < nextValue ? -1 : 1;
                }
                else {
                    return currentValue > nextValue ? -1 : 1;
                }
            });

            $("> tbody > tr:not(:has(table, th))", $gv).remove();
            $("tbody", $gv).append($sortedArray);
        }
    });
</script> 
```

# mysql - 是什么导致我的 UPDATE 语句不起作用？

> ID：12415682
> 
> 赞同：3
> 
> 时间：2012-09-13T22:29:10.920
> 
> 标签：mysql, vb.net

大家晚上好

我正在使用以下内容尝试更新我的 MySQL 数据库中的记录，但记录没有被更新，我也没有发现任何异常。您的帮助将不胜感激：

```
dbConn = New MySqlConnection("Server=" & FormLogin.ComboBoxServerIP.SelectedItem & ";Port=3306;Uid=trojan;Password=horse;Database=accounting")
    Try
        If dbConn.State = ConnectionState.Open Then
            dbConn.Close()
        Else
            Try
                dbConn.Open()
                Dim dbAdapter As New MySqlDataAdapter("UPDATE customer " & _
                                                      "SET accountNumber= '" & TextBoxAccount.Text & "', nameLAST='" & TextBoxLastName.Text & "', nameFIRST='" & TextBoxFirstName.Text & "'" & _
                                                      "nameSALUTATION='" & ComboBoxSalutation.SelectedItem & "', nameCOMPANY='" & TextBoxCompanyName.Text & "', addressSTREET='" & TextBoxAddress1.Text & "'" & _
                                                      "addressSTREET1='" & TextBoxAddress2.Text & "', addressCITY='" & TextBoxCity.Text & "', addressSTATE='" & ComboBoxState.SelectedItem & "'" & _
                                                      "addressZIPCODE='" & MaskedTextBoxZip.Text & "', phone='" & MaskedTextBoxPhone.Text & "', fax='" & MaskedTextBoxFax.Text & "', email='" & TextBoxEmail.Text & "'" & _
                                                      "WHERE accountNumber='" & TextBoxAccount.Text & "';", dbConn)
            Catch ex As Exception
                MessageBox.Show("A DATABASE ERROR HAS OCCURED" & vbCrLf & vbCrLf & ex.Message & vbCrLf & _
                            vbCrLf + "Please report this to the IT/Systems Helpdesk at Ext 131.")
            End Try
            MessageBox.Show("Customer account SUCCESSFULLY updated!")
            Call lockForm()
        End If
    Catch ex As Exception
        MessageBox.Show("A DATABASE ERROR HAS OCCURED" & vbCrLf & vbCrLf & ex.Message & vbCrLf & _
                            vbCrLf + "Please report this to the IT/Systems Helpdesk at Ext 131.")
    End Try
    Call lockForm()
    dbConn.Close() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T00:41:06.603

使用`MySQLCommand`而不是`MySQLDataAdapter`. 您违背了使用 ADONet 的目的，因为您的代码仍然容易受到 sql 注入的攻击。使其参数化。以下是您的代码中的修改代码。它`Using-End Using`用于正确处理对象处置。

```
Dim ConnectionString As String ="Server=" & FormLogin.ComboBoxServerIP.SelectedItem & ";Port=3306;Uid=trojan;Password=horse;Database=accounting"
Dim iQuery As String = "UPDATE customer " & _
                       "SET accountNumber = @accountNumber, nameLAST = @nameLAST, nameFIRST = @nameFIRST, " & _
                       "    nameSALUTATION = @nameSALUTATION, nameCOMPANY = @nameCOMPANY, addressSTREET = @addressSTREET, " & _
                       "    addressSTREET1 = @addressSTREET1, addressCITY = @addressCITY, addressSTATE =  @addressSTATE, " & _
                       "    addressZIPCODE = @addressZIPCODE, phone = @phone, fax = @fax, email = @email               " & _
                       "WHERE accountNumber = @accountNumber"

Using dbConn As New MySqlConnection(ConnectionString)
    Using dbComm As New MySQLCommand()
        With dbComm
            .Connection = dbConn
            .CommandType = CommandType.Text
            .CommandText = iQuery
            .Parameters.AddWithValue("@accountNumber", TextBoxAccount.Text )
            .Parameters.AddWithValue("@nameLAST", TextBoxLastName.Text)
            .Parameters.AddWithValue("@nameFIRST", TextBoxFirstName.Text)
            .Parameters.AddWithValue("@nameSALUTATION", ComboBoxSalutation.SelectedItem)
            .Parameters.AddWithValue("@nameCOMPANY", TextBoxCompanyName.Text)
            .Parameters.AddWithValue("@addressSTREET", TextBoxAddress1.Text)
            .Parameters.AddWithValue("@addressSTREET1", TextBoxAddress2.Text)
            .Parameters.AddWithValue("@addressCITY", TextBoxCity.Text)
            .Parameters.AddWithValue("@addressSTATE", ComboBoxState.SelectedItem)
            .Parameters.AddWithValue("@addressZIPCODE", MaskedTextBoxZip.Text)
            .Parameters.AddWithValue("@phone", MaskedTextBoxPhone.Text)
            .Parameters.AddWithValue("@fax", MaskedTextBoxFax.Text)
            .Parameters.AddWithValue("@email", TextBoxEmail.Text)
        End With
        Try
            dbConn.Open
            dbComm.ExecuteNonQuery()

            MessageBox.Show("Customer account SUCCESSFULLY updated!")
            Call lockForm()
        Catch( ex as MySQLException)
            MessageBox.Show("A DATABASE ERROR HAS OCCURED" & vbCrLf & vbCrLf & ex.Message & vbCrLf & _
                                vbCrLf + "Please report this to the IT/Systems Helpdesk at Ext 131.")
        Finally
            dbConn.Close()
        End Try
    End Using
End Using 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T22:36:32.850

在这种情况下，我会使用[ExecuteNonQuery](http://dev.mysql.com/doc/refman/5.0/es/connector-net-examples-mysqlcommand.html)，因为您不能以您尝试使用它的方式使用 MySQLDataAdapter。另外请使用参数，因为您正在做的事情会使您面临 SQL 注入攻击。最后，您不需要更新 accountNumber，因为您正在使用它来查找要更新的行！

# php - PHP - 来自变量的函数名称

> ID：12415683
> 
> 赞同：0
> 
> 时间：2012-09-13T22:29:10.860
> 
> 标签：php, function, variables

好的，我已经找到了一个可能的解决方案，但由于某种原因，我无法让它在我的应用程序中工作。显然，如果我有一个包含名称函数的变量，我可以使用

```
<?php echo $variable(); ?> 
```

输出具有相同名称的函数。

我正在使用 Codeigniter。它的表单助手中有一个函数来输出一个文本字段，即

```
<?php form_input(); ?> 
```

我有一个变量

```
<?php $instance['taxon_field'] = 'form_input'; ?> 
```

如果我回显这个变量，我会得到所需的值“form_input”。但是，一旦我尝试回应

```
$instance['taxon_field']() 
```

我收到警告：

```
Message: Illegal string offset 'taxon_field' 
```

和一个致命错误：

```
Call to undefined function p() 
```

我在这里真的一无所知，因为仅回显变量会给出'form_input'，但回显$variable（）只会给出'p'。

我在哪里做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:32:29.987

这里的实际问题`$instance`不是数组，而是字符串。从报错信息来看，是一个值以 . 开头的字符串`p`。

该语法`$var[$key]`不仅用于访问数组元素，还用于索引字符串，其中`$var[0]`将是第一个字符（实际上是字节）`$var`等。如果`$instance`是字符串并且您编写，`$instance['taxon_field']`那么 PHP 将尝试转换`'taxon_field'`为整数以便索引到字符串中。这导致`0`按照通常的[转换规则](http://www.php.net/manual/en/language.types.string.php#language.types.string.conversion)，因此整个表达式为您获取字符串的第一个字母。

假设字符串以`p`它开头，那么它为什么会尝试调用具有该名称的函数就很明显了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T22:53:14.667

使用[call_user_func()](http://www.php.net/manual/en/function.call-user-func.php)

```
call_user_func($instance['taxon_field']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T21:13:40.790

造成的混乱实际上是我自己的错，因为我没有提供一些我认为不重要但结果很重要的附加信息。我的 $instance[] 数组实际上是 foreach 循环的结果（准确地说是其中两个），并且是更大的多维数组的一部分。实际代码更复杂，但我会尝试正确表示它：

```
<?php
$bigger_array = array(
    0 => array(
        'field_one' => 'value_one',
        'field_two' => 'value_two',
        'field_three' => 'new_function'
    ),
    1 => array(
        'field_one' => 'new_value_one',
        'field_two' => 'new_value_two',
        'field_three' => 'echo'
    )
);

function new_function()
{
    echo 'New function called.';
}

foreach($bigger_array as $instance)
{
    $name = $instance['field_three'];
    $name('Hello World!');
}
?> 
```

这将输出以下内容：

> 调用了新函数。致命错误：在第 69 行的 /opt/lampp/htdocs/bla.php 中调用未定义的函数 echo()

换句话说，新定义的函数可以正常工作，但内置的“回声”却不行。

这实际上不是我最初的问题，这是我在尝试调试初始问题时遇到的问题。最初的问题是从一维数组创建函数可以正常工作。而在 foreach 循环中从多维数组创建函数会将数组转换为具有其最后一个成员的值的字符串。

现在，我仍然不能完全回答我的问题，但我认为我提供的信息可能会导致解决方案。在我在这里给出的简化示例中，为什么我收到未定义 echo() 函数的消息，而新函数工作正常？

# c# - 如何公开 WCF 方法？

> ID：12415685
> 
> 赞同：0
> 
> 时间：2012-09-13T22:29:17.647
> 
> 标签：c#, .net, wcf

我想通过 url 访问 WCF 方法。例如：

本地主机：8080/TestService.svc/MyMethod

当我执行上述操作时，我得到一个网页找不到。在接口文件中，我在上面的 MyMethod 中添加了以下内容。

```
[WebGet]  
[OperationContract]  
void MyMethod(); 
```

但这并没有改变任何东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:39:33.193

您的 web.config 看起来如何？你在使用 REST 吗？

你看过下面的帖子吗？ [使 WCF Web 服务与 GET 请求一起工作](https://stackoverflow.com/questions/944678/making-a-wcf-web-service-work-with-get-requests)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T23:28:31.820

这是一个[很好的例子](http://msdn.microsoft.com/en-us/magazine/dd315413.aspx)，说明如何实现这一点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T22:34:47.033

我不认为你可以。你需要使用 REST 来做你想做的事。或者使用将创建代理对象来使用服务的控制器/操作（如果这是 MVC），例如

```
ServiceClient client = new ServiceClient();
client.MyMethod() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T23:32:01.163

我认为最快的解决方案是使用工厂。他们似乎很可能想要一个安静的服务，所以如果你遵循本指南，你甚至不需要在 web.config 中指定任何内容。请参阅此问题的第一个答案。

[RESTful WCF 的最低配置](https://stackoverflow.com/questions/139821/bare-minimum-configration-for-restful-wcf)

# grails - Grails 中的视频播放器

> ID：12415686
> 
> 赞同：2
> 
> 时间：2012-09-13T22:29:19.130
> 
> 标签：grails, video

我正在寻找一种将视频播放器添加到我的 grails 应用程序中的方法。除了 flash 我找不到任何其他我更喜欢 HTML

有没有办法可以将播放的 HTML5 视频嵌入到我的应用中

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T15:33:02.263

我建议使用 HTML5`<video>`标签。它是非 Flash 的，可以在现代浏览器中使用。如果您需要支持较旧的浏览器，您唯一真正的选择是通过 Flash 或 Silverlight 等插件，不幸的是。

# javascript - 如何将行/列动态添加到 Google 柱形图中

> ID：12415689
> 
> 赞同：12
> 
> 时间：2012-09-13T22:29:28.457
> 
> 标签：javascript, google-api, visualization

我想创建一个 Column Chart ，使用 Google Visualization API ，我可以发送数据以数组形式填充图表的 DataTable 。但是我需要生成具有可变列/行数的图表，具体取决于我的数组包含的内容，我不知道如何正确迭代它们并将它们添加到 DataTable 中。

这是解析 STATIC 数据以生成图表的示例：（所有这些都在 javascript 中）

```
var data = google.visualization.arrayToDataTable([
      ['Year', 'Sales', 'Expenses'],
      ['2004',  1000,      400],
      ['2005',  1170,      460],
      ['2006',  660,       1120],
      ['2007',  1030,      540]
    ]); 
```

API 有这些添加列和行的方法： - 获取与上述相同数据的不同方法：

```
var data = new google.visualization.DataTable();
data.addColumn('string', 'Year');
data.addColumn('number', 'Sales');
data.addColumn('number', 'Expenses');
data.addRows([  ['2004', 1000 , 400], ['2005', 1170, 460], ['2006', 660, 1120], ['2007',1030,540]
  ]); 
```

我需要的是一个 for 循环或一个双 for 循环来迭代我发送的数组列表并动态添加行内容。

更准确地说，在一种情况下我会有上面写的数据，在另一种情况下我会有这个：

```
['Year', 'Sales', 'Expenses' , 'Other'],
['2004',  1000,      400     ,  232   ],
['2005',  1170,      460    ,  421   ],
['2006',  660,       1120    ,  4324  ],
['2007',  1030,      540     ,  4234  ],
['2008',  1530,      50     ,    234  ], 
```

所以我会通过函数中的参数解析这些数据让我们说（我不知道这是否是正确的想法）许多包含每一行的数组列表：Row1=['2004', 1000, 400, 232] Row2=[' 2005'、1170、460、421] 和....

如何使用 for 循环或双 for 循环来迭代我发送的数组列表以动态生成包含数据的数据表（行数和列数可变）？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-14T00:26:58.790

[这是jsfiddle](http://jsfiddle.net/R6Sh8/)中的一个有效解决方案。

看下面的函数。这会遍历一组数据并更新图表：

```
// function to update the chart with new data.
      function updateChart() {

          dataTable = new google.visualization.DataTable();

          var newData = [['Year', 'Sales', 'Expenses' , 'Other'],
            ['2004',  1000,      400     ,  232   ],
            ['2005',  1170,      460    ,  421   ],
            ['2006',  660,       1120    ,  4324  ],
            ['2007',  1030,      540     ,  4234  ],
            ['2008',  1530,      50     ,    234  ]];

          // determine the number of rows and columns.
          var numRows = newData.length;
          var numCols = newData[0].length;

          // in this case the first column is of type 'string'.
          dataTable.addColumn('string', newData[0][0]);

          // all other columns are of type 'number'.
          for (var i = 1; i < numCols; i++)
            dataTable.addColumn('number', newData[0][i]);           

          // now add the rows.
          for (var i = 1; i < numRows; i++)
            dataTable.addRow(newData[i]);            

          // redraw the chart.
          chart.draw(dataTable, options);        

      } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-20T10:27:43.940

```
var obj = JSON.parse(r.d);//Json data will come from any web service or any other source
 var data2 = new google.visualization.DataTable();    
 //To Add Column Dynamically

    for (var j = 0; j < array.length; j++) // this array contains columns
     {
      if (j == 0)
      {
          data2.addColumn(typeof (array[j]), array[j]);
      }
     else
       {
          data2.addColumn('number', array[j]);//if 2nd column must be integer
       } 
    }   
     //   To Add Rows Dynamically to a google chart  

                 data2.addRows(obj.length);\\Total Rows
                     for (var i = 0; i < obj.length; i++)
                     {
                        for (var k = 0; k < array.length; k++)//Total Column 
                         {
                           if (k == 0) 
                             {
                               data2.setCell(i, k, obj[i][array[k]].toString());//if first Column is String
                             } 
                              else
                             {
                               data2.setCell(i, k, parseInt([obj[i][array[k]]]));//if other columns are int type... for charts mostly we treat just first column as string
                             }
                         }
                    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-02T08:08:33.267

您可以将数据放在一个字符串中并使用 JSON.parse(stringData)。年份列必须用双引号括起来

```
var data = new google.visualization.DataTable();  
data.addColumn('string', 'Year');  
data.addColumn('number', 'Sales'); 
data.addColumn('number', 'Expenses'); 

var stringData = '[["2004", 1000 , 400], ["2005", 1170, 460], ["2006", 660, 1120], ["2007",1030,540]]';

data.addRows(JSON.parse(stringData)); 
```

# iis-7 - 如何修复“Microsoft Excel 无法打开或保存更多文档”

> ID：12415690
> 
> 赞同：26
> 
> 时间：2012-09-13T22:29:30.830
> 
> 标签：iis-7, asp.net-4.0, office-interop, windows-7-x64, excel-interop

我正在使用 IIS 7.5 在 Windows 7 64 位上运行 C# ASP.NET 4.5 Web 应用程序。它使用的应用程序池名称为“ASP.NET v4.0”，其标识为 ApplicationPoolIdentity。该应用程序使用 MS Office Interop（Microsoft Excel 14.0 对象库）。

在 line `wBook = wBooks.Add(Missing.Value);`，它会引发以下错误：

> Microsoft Excel 无法打开或保存更多文档，因为没有足够的可用内存或磁盘空间。
> 
> u2022 要提供更多可用内存，请关闭不再需要的工作簿或程序。
> 
> u2022 要释放磁盘空间，请从要保存到的磁盘中删除不再需要的文件。：在 Microsoft.Office.Interop.Excel.Workbooks.Add(Object Template)

1) 我让帐户 IIS apppool\ASP.NET v4.0 完全控制 DCOM 配置中的 MS Excel 应用程序。

2) 我让 IIS apppool\ASP.NET v4.0 完全控制 'C:\Windows\SysWOW64\config\systemprofile' 并在其中创建了一个桌面文件夹。

3) 虽然不推荐，但我需要继续使用 Interop。

4) 该应用程序在 Windows Server 2003/Windows XP 32 位上运行良好。

5）机器上安装了MS Office 2010（64位，试用版）。

6) 我不希望更改应用程序。从 ApplicationPoolIdentity 到网络服务等的池标识。 ApplicationPoolIdentity 是 IIS 7 中的新型标识，建议使用。

如果我在 DCOM Config 中选择“交互式用户”（我以管理员身份登录），它工作正常，但它会导致其他问题。我需要使用 ASP.NET v4.0 的“启动用户”。所以看起来这是一个权限问题。

请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-07-05T18:40:26.460

使用文件资源管理器右键单击文件，选择`Properties`，然后`General`选项卡并单击`Unblock`按钮。此错误消息非常具有误导性。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-04-22T22:08:41.250

转到注册表编辑器上的此项（运行 | Regedit） **HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\User Shell 文件夹**

将密钥**缓存**更改为**C:\Windows\Temp**

我的类似问题就是这样解决的。

问候，

里普利

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-03-26T08:13:35.927

我有同样的问题，我的服务器机器中的内存没有问题，最后我能够通过以下步骤修复它

1.  在您的应用程序托管服务器中，转到其“组件服务”
2.  ![在此处输入图像描述](../Images/2a00b485c4a0fd8c814d11649ec64f8a.png)

3.在右侧找到“Microsoft Excel 应用程序”。

4.右键打开属性

5.在身份选项卡下选择交互用户选项，然后单击确定按钮。

再次检查。希望能帮助到你

**注意**：但现在您可能会遇到另一个 COM 错误“正在检索组件的 COM 类工厂...”。在这种情况下，只需将身份设置为此用户并输入具有足够权限的用户的用户名和密码。就我而言，我输入了高级用户组的用户。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-10-07T10:12:06.927

**像这样测试。有时，权限问题。**

> cmd => dcomcnfg

点击

> 组件服务>计算>我的电脑>Dcom config>并选择micro soft Excel Application

右键单击 Microsoft Excel 应用程序

> 属性>授予 Asp.net 权限
> 
> 选择身份表>选择交互式用户>选择确定

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-04-01T02:00:30.440

我也遇到了同样的情况，谷歌搜索了几次后发现了两种解决方案。希望这可以帮助。

方式01：

在尝试在 Excel 中打开文件之前，请在 Windows 的文件资源管理器中找到它。右键单击该文件并选择属性。在“常规”选项卡的底部，单击“取消阻止”按钮。取消阻止文件后，Windows 应该记住并且 Excel 不会再次询问您。此选项适用于某些文件类型，但不适用于其他文件类型。如果您没有取消阻止按钮，请使用方式 2。

方式02：

如果您通常将下载的 Excel 文件存储在一个文件夹中，则此选项会更好。在 Excel 中，单击文件 » 选项 » 信任中心 » 信任中心设置 » 受信任的位置。单击添加新位置。浏览到存储 Excel 文件的文件夹，选择此位置的子文件夹也受信任，然后单击确定。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-19T21:54:51.230

在 DCOM 配置中授予必要的权限后，我还需要将 IIS 中的应用程序标识更改为[自定义帐户](https://stackoverflow.com/questions/25367756/iis-express-website-works-fine-not-in-iis/58468193#58468193)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-18T17:48:20.843

如果上述方法均无效，请尝试以下方法：

*   在`Component services >Computes >My Computer>Dcom config>Microsoft Excel Application>Properties`中，转到安全选项卡，单击所有三个部分的自定义并添加要运行该应用程序的用户，并为该用户授予完全权限。

*   去`C:\Windows\Temp`确保它存在并且它不会提示你输入。

# wpf - 识别 WPF 中 DataGridTextColumn 中 User 和 Programmatic 之间的变化

> ID：12415692
> 
> 赞同：1
> 
> 时间：2012-09-13T22:29:43.310
> 
> 标签：wpf, data-binding

我想区分程序更改和用户更改之间的 DataGridTextColumn 更改。

```
<DataGridTextColumn Header="Position" Binding="{Binding Position, StringFormat=N2}" Width="100" IsReadOnly="False"/> 
```

在上列中，如果用户修改了 Position 的值，我需要知道才能知道该值。

我正在寻找类似于[Ignoring text/value changes due to databinding的东西](https://stackoverflow.com/questions/7841292/ignoring-text-value-changes-due-to-databinding)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T23:30:47.380

所以 Position 是公共财产。

永远不要在代码中设置位置。在您的代码更改位置（然后是 NotifyPropertyChanged）。任何对 Position 的调用都来自 UI。

```
 private sting position;

 public sting Position
 {  
     get { return position; }
     set 
     {
         if (position == value) return;
         position = value;
     }
 } 
```

# postgis - 尝试为 postgis 创建模板数据库 postgresql 时出现问题

> ID：12415693
> 
> 赞同：2
> 
> 时间：2012-09-13T22:29:45.883
> 
> 标签：postgis, postgresql-9.1

我使用的是 ubuntu 12.04，我已经安装了 postgis2.1 和 postgresql9.1 ......我是一个新手！......我按照这个教程来创建一个模板数据库：[http ://linfiniti.com/ 2012/05/installing-postgis-2-0-on-ubuntu/](http://linfiniti.com/2012/05/installing-postgis-2-0-on-ubuntu/)我被卡住了，不知道现在该怎么办......

当我尝试执行以下命令时：

```
psql -d template_postgis2 -f /usr/share/postgresql/9.1/contrib/postgis-2.0/postgis.sql

```

我有以下错误（我只复制粘贴到末尾，因为对于不同的行号是相同的错误）：

```
psql:/usr/share/postgresql/9.1/contrib/postgis-2.1/postgis.sql:6050：错误：当前事务被中止，命令被忽略直到事务块结束
psql:/usr/share/postgresql/9.1/contrib/postgis-2.1/postgis.sql:6056：错误：当前事务被中止，命令被忽略直到事务块结束
回滚

```

我注意到每个错误都链接到我执行的脚本 postgis.sql 中以“LANGUAGE ....”开头的命令我在互联网上看到这种错误可能是由于未安装的 plpgsql但这不是我的情况，因为当我输入：

```
createlang -d template_postgis2 plpgsql

```

（如教程中给出的）机器返回

```
createlang：语言“plpgsql”已安装在数据库“template_postgis2”中

```

有没有人知道发生了什么？和/或我应该怎么做？也许因为我使用的是 postgis2.1 而不是 2.0，就像在教程 linfinity.com 中一样，它把事情搞砸了？

编辑：错误消息的开头如下：

```
$ psql -d template_postgis2 -f /usr/share/postgresql/9.1/contrib/postgis-2.1/postgis.sql
放
开始
psql：/usr/share/postgresql/9.1/contrib/postgis-2.1/postgis.sql:47：错误：语言c的权限被拒绝
psql：/usr/share/postgresql/9.1/contrib/postgis-2.1/postgis.sql:52：错误：当前事务被中止，命令被忽略直到事务块结束

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T09:40:36.173

在 Postgres 9.1 中有一种创建空间数据库[的新方法：](http://postgis.refractions.net/documentation/manual-2.0/postgis_installation.html#create_new_db_extensions)

```
psql -d template_postgis2 -c "CREATE EXTENSION postgis;" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T20:57:34.997

刚刚在某个论坛上找到：

`sudo ldconfig`

[更新：在官方文档](https://docs.djangoproject.com/en/dev/ref/contrib/gis/install/geolibs/#building-from-source)中找到了这个建议：

> 在 Linux 平台上，可能需要在安装每个库后运行 ldconfig 命令。

修复了从 postgis 模板创建数据库时可能出现的 postres 错误

# objective-c - 内联函数与宏

> ID：12415694
> 
> 赞同：2
> 
> 时间：2012-09-13T22:29:49.363
> 
> 标签：objective-c, ios, c, macros, inline

我正在使用 C 和 Objective-C 开发一个 iOS 应用程序，我想编写一小段代码，它将在多个地方执行数千次。将其设为一个`inline`函数并确保它始终被扩展（我永远不会获取它的地址）是否安全，或者我应该将其设为宏？代码很小，并且会非常频繁地执行，所以我想确保我最终不会有成千上万的函数调用，但如果可能的话，我仍然希望函数方法的类型安全。 ..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T22:52:00.950

如果您想确保函数是内联的，请将其设为“extern inline”（这是 GNU-C 特性）。此类函数仅用于内联；编译器永远不会为它生成一个“真正的”函数。因此，如果内联失败，您应该会收到链接器错误。我认为 clang 已经“继承”了这个特性。

通常，如果可能，请始终使用内联而不是宏。许多 C 编译器多年来一直使用它是有原因的，C++ 最终将它添加为核心特性；它使使用起来更加安全可靠。仍然有需要宏的东西，但这些东西很少而且相差甚远。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T22:44:49.767

是的，您应该在宏上使用内联函数。

性能将与宏相同（毕竟代码是内联的），并且您还将获得类型安全。

注意，这假设您的函数足够简单，编译器可以内联。`-Winline`如果不是这种情况，gcc 的选项会发出警告；不确定哪些标志在您的平台上做同样的事情。

如果您可能更喜欢宏（例如，延迟评估），另请参阅[这篇文章](https://stackoverflow.com/questions/1571392/pros-and-cons-of-different-macro-function-inline-methods-in-c)- 但根据您的问题，听起来内联函数是明确的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T23:03:10.887

我可能错了，但我知道编译器只能内联同一源文件中的函数。如果您的内联函数在文件 A 中并且您试图在其他地方使用它，则它不能被内联，*除非**链接*器进行链接时优化。

这是因为编译器一次只将一个 C 文件编译成一个目标文件。它无法从另一个目标文件中*获取*内联函数，因为首先，它可能尚未编译，其次，它不知道要查找哪个目标文件。

# solr - Sunspot Solr 访问搜索结果中的非存储属性字段

> ID：12415697
> 
> 赞同：2
> 
> 时间：2012-09-13T22:29:56.523
> 
> 标签：solr, sunspot, sunspot-rails, sunspot-solr, websolr

我在 Rails 上使用 Sunspot Solr 进行搜索。

在我的类定义中，我有这样的东西（从我的真实中简化）：

```
searchable do
  text :name
  integer :count
  boolean :priority
end 
```

**我有什么方法可以直接在搜索的命中结果中访问整数和布尔字段的值？**

我看到有设置属性字段的选项`stored => true`，这使它们可用于命中对象。但是，整数和布尔字段显然已经按原样存储在某个地方，因为我能够对它们进行排序和过滤，只是不能通过命中对象的存储方法访问它们，所以有什么办法可以让它们显示出来?

`stored => true`如果答案是否定的，那么当传递给整数或布尔字段时究竟在做什么？

我在 Websolr 上有一个相当大的索引，用它重新索引`stored => true`会有点令人望而却步。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T11:07:12.633

[常用字段选项](http://wiki.apache.org/solr/SchemaXml#Common_field_options)

indexed=true|false
如果该字段应该被“索引”，则为真。如果（且仅当）一个字段被索引，那么它是可搜索的、可排序的和可分面的。

stored=true|false
如果字段的值在搜索期间应可检索，则为真。

索引和存储数据的维护方式不同。Solr 内部使用索引数据进行操作。
如果要显示数据，则必须使用存储属性为 true 来索引数据。

# javascript - Fancybox 是否会静音 Click 事件？

> ID：12415699
> 
> 赞同：7
> 
> 时间：2012-09-13T22:29:57.660
> 
> 标签：javascript, jquery, fancybox-2

这是我的问题，这是我的示例代码。

HTML：

```
<a class="fancybox" rel="group" href="img1.jpg"> <img src="img1_thumb.jpg"> </a>
<a class="fancybox" rel="group" href="img2.jpg"> <img src="img2_thumb.jpg"> </a> 
```

JS：

```
 var header = '<img id="w" src="logo.gif">';

$('.fancybox').fancybox({
    afterLoad: function() {
        this.wrap.prepend(header);
    }, // afterLoad
}); //fancybox

$('#w').click(function() {console.log('clicked');}); 
```

如果您单击缩略图来启动 FancyBox，`afterLoad`则会出现在标题中，但是当您单击图像并观看控制台时，您什么也得不到。

想法？我正在尝试使用 FancyBox 的`$.fancybox.close()`方法，但如果我无法触发 click 事件，我将被迫内联使用它，为了不使用 JS 内联，我宁愿不这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T22:33:15.777

您应该使用`.on()`或等效于动态绑定，或在 afterLoad 回调中绑定。它与 Fancybox 无关：您使用 jQuery 选择器进行绑定，该选择器匹配 DOM 中尚不存在的内容。或者，您可以尝试直接绑定到内存中的元素，但您应该先熟悉使用 DOM 绑定。

# ruby - 匹配属于特定域及其子域的所有电子邮件地址

> ID：12415701
> 
> 赞同：0
> 
> 时间：2012-09-13T22:30:02.187
> 
> 标签：ruby, regex, email, string-matching

我希望匹配来自特定域的所有电子邮件地址。

任何来自`example.com`或`foo.example.com`应该匹配的电子邮件都应该被拒绝。为此，我可以做一些基本的字符串匹配来检查给定的字符串是否以或包含结尾，`example.com`这会很好，但这也意味着类似的东西`fooexample.com`会通过。

因此，基于上述要求，我开始研究一种可以传递域及其子域的模式。我能够想出以下正则表达式模式：

```
`/\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.example.com\b/i` 
```

这仅匹配子域，但我在“[如何使用正则表达式匹配特定域中的所有电子邮件地址？](https://stackoverflow.com/questions/5191560/how-to-match-all-email-addresses-at-a-specific-domain-using-regex) ”中看到了处理主域的模式。

有没有办法将这两者结合成适用[于 example.com 中任何地址的](http://rubular.com/r/elQJF06igX)东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T23:07:29.607

怎么样

```
/\b(?:(?![_.-])(?!.*[_.-]{2})[a-z0-9_.-]+(?<![_.-]))@(?:(?!-)(?!.*--)[a-z0-9-]+(?<!-)\.)*example\.com\b/i 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T00:00:19.327

这也将匹配 'tagged' 和 'tagged-subdomain' 邮件，如 a+b@example.com 和 a+b@i.example.com

```
(([A-Za-z0-9]+_+)|([A-Za-z0-9]+\-+)|([A-Za-z0-9]+\.+)|([A-Za-z0-9]+\++))*[A-Za-z0-9]+@(?:(?!-)(?!.*--)[a-z0-9-]+(?<!-)\.)*example\.com\b 
```

希望对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T01:53:46.173

我建议阅读“[停止使用复杂的正则表达式验证电子邮件地址](http://davidcelis.com/blog/2012/09/06/stop-validating-email-addresses-with-regex/?utm_source=rubyweekly&utm_medium=email)”。

从那时起，我会寻找：

```
/@.*\bexample\.com/ 
```

例如：

```
%w[foo@example.com foo@barexample.com foo@subdomain.example.com].grep(/@.*\bexample\.com/)
=> ["foo@example.com", "foo@subdomain.example.com"] 
```

很容易得到一个维护噩梦的正则表达式，并且不能满足您的需要。我强烈建议保持简单。

# tsql - 从日期时间中获取时间并将其转换为秒？

> ID：12415715
> 
> 赞同：12
> 
> 时间：2012-09-13T22:30:59.430
> 
> 标签：tsql, sql-server-2005

我正在运行 SQL Server 2005。从技术上讲，我知道如何从 tsql 日期时间中获取时间。

```
CONVERT(VARCHAR(8),GETDATE(),108) AS HourMinuteSecond 
```

问题是我有一个日期时间字段，我需要从本质上获取时间部分，将其转换为整数，特别是秒。然后我需要对这个整数做一些算术运算，这里不讨论。我在 stackoverflow 上进行了搜索，但没有找到特定于该问题的问题。有任何想法吗？我真的在这里寻找最佳实践，我担心为此特定目的创建一个 udf，因为它完全将查询优化器抛出了窗口。

我看过这个网页，所以请不要粘贴。：

[http://forums.devx.com/showthread.php?171561-TSQL-Converting-HH-MM-SS-to-seconds](http://forums.devx.com/showthread.php?171561-TSQL-Converting-HH-MM-SS-to-seconds)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-13T22:36:44.253

使用[`DATEPART`](http://msdn.microsoft.com/en-us/library/ms174420.aspx)：

```
(DATEPART(HOUR, GETDATE()) * 3600) +
(DATEPART(MINUTE, GETDATE()) * 60) +
(DATEPART(SECOND, GETDATE())) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-13T23:20:37.137

只是我的 2 美分……另一种方法

编辑：为 SQL Server 2005 添加了方法（谢谢迈克尔）

对于 SQL Server 2008

```
SELECT DATEDIFF(SECOND, CONVERT(date, GETDATE()), GETDATE()) 
```

对于 sql server 2005+

```
SELECT DATEDIFF(SECOND, DATEADD(dd, 0, DATEDIFF(dd, 0, GETDATE())), GETDATE()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T22:39:20.560

你想要的功能是 DatePart

```
Declare @d DateTime
Select @d = GetDate()
Select (DatePart(HOUR, @d) * 3600) + (DatePart(MINUTE, @d) * 60) + DatePart(SECOND, @d) 
```

# uitextfield - 移动到 UITableView 中的下一个 textField

> ID：12415716
> 
> 赞同：1
> 
> 时间：2012-09-13T22:31:03.097
> 
> 标签：uitextfield, tableview, next, becomefirstresponder

我有一个充满子类文本字段的 tableView。以下是我创建它们的方式：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSString *cellIdentifier = kOddCellIdentifier;

    CustomCell01 *oddCell = (CustomCell01 *)[tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    oddCell.myTextfield.delegate=self;
    oddCell.myTextfield.tag = indexPath.row;
    oddCell.myTextfield.text=[[self.Page01dataArray objectAtIndex:indexPath.row]objectForKey:@"value"];
    bool editable = [[[self.Page01dataArray objectAtIndex:indexPath.row] objectForKey:@"editable"] boolValue];
    if (editable==true) {
        oddCell.myTextfield.textColor=[UIColor redColor];
    } else {
        oddCell.myTextfield.textColor=[UIColor blackColor];
        [oddCell.myTextfield setBorderStyle:UITextBorderStyleNone];
        oddCell.myTextfield.enabled=NO;
    }
    [oddCell.myTextfield addTarget:self action:@selector(updateField:) forControlEvents:UIControlEventEditingDidEnd];

    return oddCell;
} 
```

当用户点击“下一步”按钮时，我不知道如何移动到下一个文本字段。通常我应该让下一个文本字段成为第一响应者，但是由于我所有的文本字段都具有相同的名称“myTextfield”，我不知道该怎么做。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T01:19:59.513

在`cellForRowAtIndexPath`中，将名称设置为`"myTextfield-<row>"`. 然后你可以解析它并知道 prev/next 字段是什么。您已经设置`myTextfield.tag`为，`indexPath.row`因此您甚至不必解析名称。您知道上一个和下一个字段分别是`"myTextfield-<tag-1>"`和`"myTextfield-<tag+1>"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T08:39:35.280

我终于设法通过在 cellForRowAtIndexPath 中创建一个数组来找到解决方案

```
[nextTFarray addObject:oddCell.myTextfield]; 
```

接着：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    int i=[nextTFarray count];
    int x=textField.tag+1;
    UITextField *nextTextField = (UITextField *)[nextTFarray objectAtIndex:x];
    if (x<i-1) {
        [nextTextField becomeFirstResponder];
    } else {
        [textField resignFirstResponder];
    }
    return YES;
} 
```

# objective-c - 得到“重复的接口定义”错误，肯定要#import ing头文件

> ID：12415720
> 
> 赞同：21
> 
> 时间：2012-09-13T22:31:48.377
> 
> 标签：objective-c, ios, xcode

我正在帮助一个 iOS 项目，其中包含许多 AppDelegate 中许多不同类共有的方法和定义。因此，在每个类中，在 .h 文件中，我使用 #import "AppDelegate.h"。这工作正常，直到我需要访问已经将 AppDelegate 导入另一个导入 AppDelegate 的类中的一个类。此时，我收到 AppDelegate 的重复接口定义错误。

好的，这看起来很公平。我已经将 AppDelegate 导入到我正在导入的文件中，因此 AppDelegate 正在从两个不同的地方导入。所以我删除了 AppDelegate 行，一切都很好。

但是当我需要导入两个都需要导入 AppDelegate 的类时会发生什么？

我有一个非常具体的问题，我正试图解决这个问题，我知道它是由与此有关的某些事情引起的，但我不确定是什么。所以我希望我能弄清楚我应该如何处理这种导入，并将其他所有内容整理出来，并希望这能解决我的问题。因此，更具体地说：

我有 ClassA.h、ClassB.h 和 ClassC.h。都有#import“AppDelegate.h”。当我需要在 ClassA 中使用 #import "ClassB.h" 时，我会从 ClassA 中删除 #import "AppDelegate.h" 行。一切顺利。但是，如果我还需要#import "ClassC.h" 到 ClassA 中，但 ClassB 和 ClassC 需要有 #import "AppDelegate.h"，会发生什么？

编辑：

我在一个干净的项目中尝试了上面描述的确切场景，它构建得很好，所以还有其他东西在起作用。但是我可以肯定地说，这个问题之前在这个项目中出现的时候，是一个重复的AppDelegate接口定义，当我删除#import“AppDelegate.h”这一行时，错误消失了，我仍然可以通过其他导入的文件访问 AppDelegate.h 方法和枚举。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-13T23:00:01.403

最好的预防和治疗方法是遵循一些关于何时从头文件导入的指南。作为一般规则，切勿从 Objective-C 标头导入，除非在以下情况下：

1.  您需要扩展在另一个标头中声明的类。
2.  您需要声明与另一个标头中声明的协议的一致性。
3.  您需要在公共方法和/或属性中引用另一个标头中定义的非类、非协议类型。要引用协议和类，请使用`@class`or前向声明它们`@protocol`，例如`@class ClassFromOtherHeader;`

其他所有人都`#import`应该参与您的实施。`#import`我的建议是根据这些规则开始将所有语句从标题中移到实现文件中。从您认为是问题根源的文件开始，然后向外移动。这将解决您的问题，并为您带来更清晰的代码和更快的构建时间。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-04-28T18:18:51.493

对我来说，上述答案都没有帮助，[这里](https://stackoverflow.com/questions/5180232/duplicate-interface-declaration-for-class-test-coredataappdelegate)给出的答案也不起作用。

为我解决的问题是关闭 Xcode，转到 ~/Library/Developer/Xcode/DerivedData 并删除与该项目关联的所有派生数据。之后我重新打开了这个项目，它工作正常。

希望对某人有所帮助！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-09T20:17:58.330

就我而言，提到的解决方案都没有解决这个问题。Xcode 报告了我在 Swift 中重写的类的重复接口。不知何故，它一直在为一个在项目中没有直接引用的类拉入 Objective-C 头文件。

我打开终端，`cd`进入项目目录，然后运行以下命令来追踪任何包含类头的文件： `grep -nr ProblemClassName.h .`

事实证明，桥接头包含一个过时的文件，该文件甚至没有在项目导航器中引用。这反过来又导入了 Xcode 错误中引用的头文件，这些头文件也不包含在 Xcode 项目导航器中。现在我知道不要只依赖 Xcode 项目导航器来查找错误引用的文件。

**tl;dr**仔细检查桥接头，以确保所有导入的文件都应该在那里，并且没有导入反过来导入问题头的头。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-21T14:28:40.057

我发现一个项目有一个子项目，而不是使用正确的语法引用子项目中的包含：

```
#import <SubProject/Filename.h> 
```

它是直接导入它们

```
#import <Filename.h> 
```

这只是可能的，因为子项目的路径包含在主项目的“标题搜索路径”中 - 这是错误的业务方式。所以我从那里删除了它。子项目应在其“构建阶段 - 复制文件”部分中复制所需的包含文件（这实际上已经发生），并且应使用使用 Subproject/Filename.h 语法的正确导入形式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-22T02:40:50.997

Fwiw 我开始看似随机地得到这个 - 对我来说，修复是要做的`Product->Clean`，它神奇地消失了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-13T09:41:44.907

对我来说，我忘了在 m 文件的接口定义中包含括号。

# javascript - 按 tab-index 的顺序循环一个 jQuery 选择

> ID：12415722
> 
> 赞同：2
> 
> 时间：2012-09-13T22:32:01.263
> 
> 标签：javascript, jquery, forms, validation

所以我有不同数量的表单输入，并且根据应用程序在 CMS 中的设置方式，它们可以位于不同的“页面”上（仅在同一文档中显示/隐藏页面）。这意味着它们的标签索引不一定遵循 DOM 结构。

它们也是不同的表单类型。

我将如何按标签索引的顺序循环（验证）？

（注意：标签索引并不总是遵循增量模式，因为显示/隐藏按钮之一上的“下一步”按钮也有一个标签索引）

我想过这样的事情：

```
var $inputs = $('input[type="text"], select, input[type="radio"]'),
numInputs = $inputs.length,
numInputsChecked = 0,
tabIndex = 0;

while(numInputs != numInputsChecked){
  var $input = $inputs.filter(function(){
     return $(this).attr("tabindex") == tabIndex;
  });
  if($input.length){
     // Do validation code
     numInputsChecked++;
  }

  tabIndex++;
} 
```

但我相信应该有更好的方法来完成这项任务。（注意，我没有实际测试过这段代码，我只是想说明我在想什么）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:56:22.693

This approach will do it, but there may be a more elegant way (I didn't put much time into this):

HTML:

```
<input type="text" tabindex="2" />
<select tabindex="4"></select>
<input type="text" tabindex="1" />
<input type="text" tabindex="3" /> 
```

JS:

```
/**
 * Sort arrays of objects by their property names
 * @param {String} propName
 * @param {Boolean} descending
 */
Array.prototype.sortByObjectProperty = function(propName, descending){
    return this.sort(function(a, b){
        if (typeof b[propName] == 'number' && typeof a[propName] == 'number') {
            return (descending) ? b[propName] - a[propName] : a[propName] - b[propName];
        } else if (typeof b[propName] == 'string' && typeof a[propName] == 'string') {
            return (descending) ? b[propName] > a[propName] : a[propName] > b[propName];
        } else {
            return this;
        }
    });
};
$(function(){
    var elms = [];
    $('input, select').each(function(){
        elms.push({
            elm: $(this),
            tabindex: parseInt($(this).attr('tabindex'))
        })
    });
    elms.sortByObjectProperty('tabindex');

    for (var i = 0; i < elms.length; i++) {
        var $elm = elms[i].elm;
        console.log($elm.attr('tabindex'));
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T22:50:03.500

默认情况下，jQuery 选择器按 DOM 顺序返回一个元素数组。请参阅[http://docs.jquery.com/Release%3AjQuery_1.3.2](http://docs.jquery.com/Release%3ajQuery_1.3.2)。

但是，您可以通过扩展 jQuery 的默认选择器来添加自定义选择器行为，请参阅：http: [//james.padolsey.com/javascript/extending-jquerys-selector-capabilities/](http://james.padolsey.com/javascript/extending-jquerys-selector-capabilities/)，使用类似于[此插件](http://james.padolsey.com/javascript/sorting-elements-with-jquery/)的技术对所选输入数组进行排序. 请记住忽略实际重新排列元素的部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T23:37:52.427

如前所述，对对象进行排序是毫无意义的；无论如何，您仍然可以使用 Array 原型。...

您的需求值得编写所有代码吗？

“更好的方法”是什么意思？

-> 选择不那么贪婪的方法（函数调用、缓存对象等）

我认为你的代码是好的，也许你可以优化你的代码并摆脱检查输入：

```
 var $input = $inputs.filter(function(){
       return $(this).attr("tabindex") == tabIndex;
  });
  // Preventing your code from processing this element upon next loop if any.
  $inputs = $inputs.not($input); 
```

但这在处理大量节点集合时确实很有意义......

# python - py2app -- 导入外部模块

> ID：12415724
> 
> 赞同：0
> 
> 时间：2012-09-13T22:32:14.893
> 
> 标签：python, py2app, sys.path

是否可以`py2app`设置为将用户的典型内容`sys.path`（运行 python 时，而不是 py2app .app）附加到 py2app 设置的路径的末尾？

我正在捆绑一个带有交互式 python 提示的应用程序——我希望其他用户能够使用他们构建的模块，但主 .app 中没有提供这些模块。如果他们尝试导入与 捆绑在一起的东西*，*我`py2app`希望使用该`py2app`版本。

`--use-pythonpath`和`--site-packages`选项`py2app`似乎没有添加常规 python 所做的所有目录。

# android - 将 EditText 设置为常量 n db

> ID：12415728
> 
> 赞同：0
> 
> 时间：2012-09-13T22:32:48.593
> 
> 标签：android, sqlite, insert, constants, type-conversion

是否可以从编辑文本字段中获取数据并将其作为常量插入 SQLite 数据库。我正在尝试将数据插入到 SQLite 主键表中，并且需要将该数据作为数据库接受它的常量。我找不到任何可以说明我如何做到这一点的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T00:43:32.337

我得说，我不太清楚你所说的恒定是什么意思。几乎每个教程都建议您使用此方法插入数据库：

```
 ContentValues values = new ContentValues();
    values.put(DB_COLUMN, EtString);
    long id = db.insert(DB_TABLE, null, values); 
```

EtString 是您从 edittext 字段（使用 .getText、.toString 或其他）获得的字符串。此方法还将为您可以引用的表中的字符串提供一个 id。但是只要知道，如果你的数据库表中已经有一个 _id 字段，那么每行信息都已经获得了一个 id，而无需你做任何事情。

这是一个很好的教程： [http ://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

# html - iframe 中的 HTML 锚点在 Chrome 或 Safari 中不起作用

> ID：12415731
> 
> 赞同：4
> 
> 时间：2012-09-13T22:33:12.423
> 
> 标签：html, css, iframe

首先，我不认为自己只是 HTML/CSS 的黑客。话虽如此，我在 Chrome 和 Safari 中的附加代码有问题（Firefox 和 Opera 工作得很好）。问题是单击中心 iframe 中的帮助图标之一应该将正确的 iframe 发送到适当的锚点，但事实并非如此。我希望帮助主题在没有滚动条的情况下从一个主题移动到另一个主题。

索引.html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Lorem ipsum dolor</title>
<link href="apstyle.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div class="Body">
    <div class="leftnav"><p>Something</p></div>
    <div class="main"><iframe src="Setup.html" name="main" id="main" width="450" height="100%" frameborder="0"></iframe></div>
    <div class="right"><iframe src="Help.html" name="help" id="help" width="235" height="100%" frameborder="0" scrolling="no"></iframe></div>
</div>
</body>
</html> 
```

安装程序.html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="apstyle.css" rel="stylesheet" type="text/css" />
<title></title>
</head>
<body>
<div class="options">
    <p>Get Help #2
    <a href="Help.html#help2" target="help">
        <img src="helpicon16.png" alt="help2" class="help_icon"/>
    </a>
    </p>
    <p>Get Help #3
    <a href="Help.html#help3" target="help">
        <img src="helpicon16.png" alt="help3" class="help_icon"/>
    </a>
    </p>
</div>
</body>
</html> 
```

和CSS

```
@charset "UTF-8";

.Body {
float : left;
clear : both;
width : 100%;
margin-top : 5px;
margin-bottom : 5px;
}

.leftnav {
float : left;
height : 500px;
width : 155px;
margin-left : 25px;
background-color : #eae6e3;
}

.main {
float : left;
height : 500px;
width : 445px;
margin-left : 5px;
}
.right {
clear : right;
float : left;
height : 500px;
width : 185px;
margin-left : 5px;
}

iframe.help {
overflow : hidden;
}

div.spacer {
height: 1000px;
} 
```

任何帮助将不胜感激

我想添加 Help.html 可能会使这更容易复制

帮助.html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<title>Help</title>
<link href="apstyle.css" rel="stylesheet" />
</head>
<body>
<div class="HelpPage">
<h2>Help Stuff</h2>

<a id="help1"></a>
<h3>Help #1</h3>
<p>This is help #1</p>
<div class="spacer"></div>

<a id="help2"></a>
<h3>Help #2</h3>
<p>This is help #2</p>
<div class="spacer"></div>

<a id="help3"></a>
<h3>Help #3</h3>
<p>This is help #3</p>
<div class="spacer"></div>

</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T22:49:32.253

消除 ：

```
scrolling="no" 
```

它适用于 Windows 上的 Chrome 21。

**编辑**

仍然删除`scrolling="no"`但将html代码更改为`Help.html`：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<title>Help</title>
<link href="apstyle.css" rel="stylesheet" />
<style>
html {
    overflow:hidden;
}
</style>
</head>
<body>
<div class="HelpPage">
<h2>Help Stuff</h2>

<a id="help1"></a>
<h3>Help #1</h3>
<p>This is help #1</p>
<div class="spacer"></div>

<a id="help2"></a>
<h3>Help #2</h3>
<p>This is help #2</p>
<div class="spacer"></div>

<a id="help3"></a>
<h3>Help #3</h3>
<p>This is help #3</p>
<div class="spacer"></div>

</div>
</body>
</html> 
```

见这里：[testing.dpwebdev.co.uk/stackoverflow/anchors](http://testing.dpwebdev.co.uk/stackoverflow/anchors/)

# javascript - jQuery自定义验证比较多个输入的序列

> ID：12415734
> 
> 赞同：0
> 
> 时间：2012-09-13T22:33:30.280
> 
> 标签：javascript, jquery, validation

我正在使用 jQuery 验证插件来检查 3 个日期输入的序列（例如）是否按升序排列。我的方法是编写一个循环，从上到下比较输入日期（首先检查第一个和第二个，然后检查第二个和第三个）。

我的问题：

1.  我需要应用此验证规则多少次？目前，我将此规则应用于第一个输入。不过，它检查了我的 3 个输入是否按顺序排列。错误消息总是显示在第一个输入旁边。无论错误的位置。
2.  我是否应该将函数修改为仅比较自身输入与其后继输入，并将其应用于除最后一个输入之外的所有输入？

**更新**一个新问题...如果我回答问题 2。我需要为必要的元素应用此验证规则 n-1 次（我也可以构建一个新类）。我的新问题是如何告诉 jQuery 应该比较哪两个日期（第一次检查日期 1 和日期 2，第二次检查日期 2 和日期 3）？ [演示](http://jsfiddle.net/godhong/Ks2yr/18/)

HTML（具有三个日期输入的表格）

```
<form id="form1"><table><tr class = "app_dates"><th><label for = "id_Date_apt"> Application Date 1 (MM/DD): </label></th> <td> <input id = "id_Date_apt" type = "text" value = "01/11" name = "Date_apt"/></td></tr>
<tr class = "app_dates"><th><label for = "id_Date_apt"> Application Date 2 (MM/DD): </label></th> <td> <input id = "id_Date_apt2" type = "text" value = "12/12" name = "Date_apt2"/></td></tr>
<tr class = "app_dates"><th><label for = "id_Date_apt"> Application Date 3 (MM/DD): </label></th> <td> <input id = "id_Date_apt3" type = "text" value = "03/13" name = "Date_apt3"/></td></tr>
<tr><td><input type="submit" value="Submit"><input type="reset" value="Reset"></td></tr></table></form> 
```

JS

```
$(document).ready(function() {
    //create a function used compare the sequence of input values
    function isDate() {
    var siz = $('input[id^="id_Date_"]').size()
    date = []
    temp_f = 0

// this for loop compares the secquences of application dates in pairs    
    for (var i = 0; i < siz - 1; i++) {
        j = i + 1
        var date1_m = parseFloat($('input[id^="id_Date_apt"]:eq(' + i + ')').val().slice(0, 2))
        var date2_m = parseFloat($('input[id^="id_Date_apt"]:eq(' + j + ')').val().slice(0, 2))
        var date1_d = parseFloat($('input[id^="id_Date_apt"]:eq(' + i + ')').val().slice(3, 5))
        var date2_d = parseFloat($('input[id^="id_Date_apt"]:eq(' + j + ')').val().slice(3, 5))
        var date1_full = new Date(1960, date1_m - 01, date1_d)
        var date2_full = new Date(1960, date2_m - 01, date2_d)

        if (date1_full > date2_full) {
            temp = 0
        }
        else {
            temp = 1
        }
        temp_f = temp_f + temp
    } //end of for loop

    if (temp_f != siz-1) {
        return false;
    }
    else {
        return true;
    }
}

//validation////
$.validator.addMethod("dateFormat", function(value, element) {
    return isDate();
}, "Inputs are not in sequence");

$("#form1").validate({
    submitHandler: function(form) {
        SubmittingForm()
    },
    rules: {
        //should I add the validation rule for Date_apt2 and Date_apt3??    
        Date_apt: {
            dateFormat: true
        }
    }
})

})​ 
```

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T23:51:55.660

What I would do is check each date against its predecessor. Since people usually fill in forms from top down, I'd consider the *second* date in a pair to be the wrong when when they're out of order. But either way is fine.

You don't need to put an explicit rule for each date in the `.validate()` call. If you give a form element a class name that matches a validation method, the method will be called automatically. So just give all but the last or first `date_aptN` elements the class `dateFormat`.

# asp.net-mvc - Orchard CMS 1.5 加载页面非常慢

> ID：12415736
> 
> 赞同：3
> 
> 时间：2012-09-13T22:34:08.173
> 
> 标签：asp.net-mvc, orchardcms

我正在使用 Orchard 1.5 开发我的第一个站点，我担心站点的速度。我意识到在开发模式下，页面是动态编译的，这会导致速度变慢，但是我已经完成了以下操作以将站点设置为生产模式，并且仍然从一个页面到另一个页面，每个请求都需要 2 到 6 秒到展示。这是我所做的：

1.  使用“发布”构建构建解决方案
2.  从站点注销（以匿名方式查看）
3.  将应用程序设置为 IIS 中的根站点
4.  禁用“形状跟踪”模块
5.  `<compilation debug="false" ...>`在 web.config 中设置
6.  将主题设置为基本 TheThemeMachine 主题

我只有 5 页非常基本的内容，主页仅包含 Orchard 设置中的默认内容。所有页面加载缓慢。这是我的站点地图：

*   主页*（2 秒加载）*
*   关于我们*（2 秒加载）*
    *   Bios *（投影页面 - 6 秒加载）*
        *   John Doe *（2 秒加载）*
        *   玛丽珍*（2 秒加载）*

有了这些设置，页面加载时间仍然慢得令人无法接受。我只是在我的本地机器上测试它，还没有将它推广到生产服务器上，但是我的机器是一台强大的四核机器，运行 Windows 7 和 8GB 内存，所以我看不出它有多大不同于我们的生产服务器。由于所有请求都是本地请求，因此网络带宽不是问题。唯一与完全生产不同的是应用程序正在访问网络上的 SQL 服务器，但我无法想象会有这么多的 SQL 流量。

仅供参考 - 我正在检查 FireBug 的加载时间，并且只使用从初始 GET 到服务器的值，而不是任何辅助请求。

对于 Orchard 站点，我看到的内容是否正常，或者我应该进行哪些其他更改来优化性能？当我访问 www.orchardproject.net 时，即使所有内容都非常快速（<300ms 响应），那么为什么我的简单配置如此缓慢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T02:51:00.773

为什么不在尝试优化之前运行[Miniprofiler来测量减速的位置？](http://miniprofiler.com/)您可以[为 Orchard 获取一个模块，](http://orchardprofiler.codeplex.com/)使其易于插入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:39:36.640

我刚刚将[缓存模块](http://gallery.orchardproject.net/List/Modules/Orchard.Module.Contrib.Cache)添加到我们的[新站点](http://pearlandvictory.com/)，并将所有页面添加到 1.5 标准的性能设置页面，这很有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-17T03:28:47.810

我的网站越来越慢……我终于注意到我有近 5 万条评论！大多数被标记为垃圾邮件，但它们仍在填满数据库。我现在正在尝试清理它们，并会发现这是否有帮助（我会在我这样做时更新）

# scala - Akka Actor pubsub：在一个 EventStream 中使用多个参数订阅？

> ID：12415740
> 
> 赞同：2
> 
> 时间：2012-09-13T22:34:26.553
> 
> 标签：scala, akka

作为参考，这个问题源于[通过套接字循环的 Scala 方法性能（收集或 foreach 或其他）？](https://stackoverflow.com/questions/12394486/scala-method-performance-collect-or-foreach-or-other-looping-through-sockets)

我在一个actor中存储一个对websocket的引用，然后将该actor订阅到一个Akka EventStream：

```
val socketActor = system.actorOf(Props(new Actor {
  val socket = WebSocketConnection

  def receive = {
    case d: AppMessage ⇒ socket.send(d)
  }
}))
system.eventStream.subscribe(socketActor, classOf[AppMessage]) 
```

让我烦恼的是，我可以用 EventStream 制作的唯一分类器是类类型。因此，如果您想将消息路由到不同的参与者，比如基于 userId，您是否需要创建多个 EventStreams 并手动构建 EventBus 或者这里有什么我遗漏的东西？

如果我能做一些简单的事情就好了：

```
system.eventStream.subscribe(socketActor, Map("userId" -> userId, "teamId" -> teamId) ) 
```

这可能只是一个概念问题，因为我不太确定 EventStream 代表什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T16:54:48.920

这是我基于`ActorEventBus`此 Gist 的解决方案：[https ://gist.github.com/3757237](https://gist.github.com/3757237)

我发现这比处理 EventStreams 更易于维护。也许将来需要多个 EventStream，但此时它很容易支持当前的基础架构。

## 消息总线

首先，MessageBus 根据 PubSub 通道处理到封装在 actor 中的套接字的传出消息：

```
case class MessageEvent(val channel:String, val message:String)

/**
 * message bus to route messages to their appropriate contexts
 */
class MessageBus extends ActorEventBus with LookupClassification {

    type Event = MessageEvent
  type Classifier = String

  protected def mapSize(): Int = {
    10
  }

  protected def classify(event: Event): Classifier = {
    event.channel
  }

  protected def publish(event: Event, subscriber: Subscriber): Unit = {
    subscriber ! event
  }

}

object MessageBus {

  val actorSystem = ActorSystem("contexts")
  val Bus = new MessageBus

  /**
   * create an actor that stores a browser socket
   */
  def browserSocketContext(s: WebSocketConnection, userId: Long, teamId: Long) = {
    val subscriber = actorSystem.actorOf(Props(new BrowserSocket(s,userId,teamId)))

    Bus.subscribe( subscriber, "/app/socket/%s" format s.toString)
    Bus.subscribe( subscriber, "/app/browser/u/%s" format userId )
    Bus.subscribe( subscriber, "/app/browser/t/%s" format teamId )
    Bus.subscribe( subscriber, "/app/browser" )
  }
} 
```

## 带有 Actor 的套接字访问

这是实际包含套接字的演员：

```
/**
 * actor wrapping access for browser socket
 */
class BrowserSocket(
  val s: WebSocketConnection,
  val userId: Long,
  val teamId: Long

) extends Actor {

  def receive = {
    case payload:MessageEvent => 
      s.send(payload.message)

    case ping:MessagePing =>
      s.ping(ping.data)

  }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T23:00:27.053

据我所知，EventStreams 和 Event Bus 用于记录和监控。您通常使用 Actor 构建所需的功能并在它们之间传递消息。

因此，您将其发送`AppMessage`给自定义路由器参与者，该参与者将整理出要发送到的支持参与者。如果路由器认为合适，也许路由器可以产生支持演员，或者演员可以在路由器上订阅（通过传递适当的消息）。这主要取决于您需要实现的逻辑。

# html - 为什么我的页脚不会出现在正确的区域？我可以影响 CSS 吗？

> ID：12415742
> 
> 赞同：5
> 
> 时间：2012-09-13T22:34:38.377
> 
> 标签：html, css

在我的网站 christianselig.com 上，我的页脚出现在所有页面上，除了 about.html 页面 (http://christianselig.com/about.html) 由于某些原因它显示在顶部附近。

该页面由两个浮动的 div（一个左，一个右）组成，一个 div 将两者都包裹起来，我意识到浮动可能是问题所在，但我不知道该怎么做。相关的 CSS 和 HTML 可以在下面找到，更多的东西显然可以在网站上找到。

HTML：

```
<div class="footer-wrapper">
            <div class="footer">
                <p class="copyright">Copyright &copy; 2012 Christian Selig</p>
                <ul>
                    <li><a href="#">Home</a></li>
                    <li><a href="#">About</a></li>
                    <li><a href="#">Work</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </div>
        </div> 
```

CSS：

```
.footer-wrapper {
    background: #f7f7f7; /* Old browsers */
    background: -moz-linear-gradient(top,  #f7f7f7 0%, #d6d6d6 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#f7f7f7), color-stop(100%,#d6d6d6)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #f7f7f7 0%,#d6d6d6 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #f7f7f7 0%,#d6d6d6 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #f7f7f7 0%,#d6d6d6 100%); /* IE10+ */
    background: linear-gradient(to bottom,  #f7f7f7 0%,#d6d6d6 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f7f7f7', endColorstr='#d6d6d6',GradientType=0 ); /* IE6-9 */
    border-top: 1px solid #ccc;
    margin: 15px auto 0 auto;
    overflow: hidden;
    padding: 8px 0 5px 0;
}

    .footer {
        color: #808080;
        clear: both;
        font-family: 'Lucida Grande', Helvetica, Arial, sans-serif;
        font-size: 0.7em;
        width: 900px; 
    }

        .copyright {
            float: left;
            margin: 0 0 5px 60px;
        }

        .footer ul {
            float: right;
            margin: 0 60px 5px 0;
        }

        .footer li {
            display: inline;
            padding-right: 12px;
        }

            .footer li:last-child {
                padding-right: 0;
            }

        .footer a {
            color: #808080;
            text-decoration: none;
        }

        .footer a:hover, .footer a:active {
            text-decoration: underline;
        } 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T22:39:48.717

你的问题在里面`lr-wrapper`。您的两个元素`left-side`并`right-side`没有填满整个宽度，在它们之间留出空间以适应其他浮动元素。

您需要`clear`在页脚之前添加一个来告诉所有其他元素留在下面，您可以通过在页脚 div 上方添加它来做到这一点：

```
<div style="clear: both;"></div> 
```

或者您可以以正确的方式进行操作，将其添加到您的 css 中，然后`clearfix`在您需要一些东西来打破浮动时应用该类：

```
/*
 * Clearfix: contain floats
 *
 * For modern browsers
 * 1\. The space content is one way to avoid an Opera bug when the
 *    `contenteditable` attribute is included anywhere else in the document.
 *    Otherwise it causes space to appear at the top and bottom of elements
 *    that receive the `clearfix` class.
 * 2\. The use of `table` rather than `block` is only necessary if using
 *    `:before` to contain the top-margins of child elements.
 */

.clearfix:before,
.clearfix:after {
    content: " "; /* 1 */
    display: table; /* 2 */
}

.clearfix:after {
    clear: both;
}

/*
 * For IE 6/7 only
 * Include this rule to trigger hasLayout and contain floats.
 */

.clearfix {
    *zoom: 1;
} 
```

更多信息可以在这里找到：http: [//html5boilerplate.com/](http://html5boilerplate.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T22:40:50.087

您只需添加以下内容以及现有样式：

```
.lr-wrapper { overflow:hidden; } 
```

*[更多信息](http://www.quirksmode.org/css/clearing.html#link3)*

# ruby-on-rails - 在 Rails 中跟踪修订

> ID：12415744
> 
> 赞同：0
> 
> 时间：2012-09-13T22:34:50.840
> 
> 标签：ruby-on-rails, version-control

我希望在为项目管理构建的 Rails 实例中跟踪一些相对基本的修订。我很惊讶在这个话题上发现很少，所以我想我会把它贴在这里。也许我只是在寻找错误的地方？我会在接近顶部时明确表示：我*不*只是想使用某人的宝石（如 Paper Trails），除非有人能告诉我这确实是我唯一的选择。认为这是一个理论上的练习，而不是一个最适合生产的时间练习。

My basic organization idea is this: one `Project` model with many `Revision` models, organized by `created_at`. The `Project` is basically just an ID, with most data housed in the `Revision`s. The first `Revision` contains all necessary data - which users are involved in the project, when it's due, etc. Then the easiest thing to do would be to duplicate that `Revision`, with changes, for each subsequent change. But that seems to be adding a lot of unnecessary data to the table every time, especially if only one of 12 fields is changed.

我对 Rails 很陌生，所以一些 MVC，更强大的面向对象的东西对我来说仍然是新的。我的想法是`Revision`只包含`created_at`、`User`创建它的人以及任何实际更改的字段。但如果这是最好的策略，我将如何在 Rails 中展平这些数据？也就是说，如果我有这个表用于`Revision`s：

```
Project_ID   | Title   | Description   | Due Date   | Created_at | Created_by
-------------|---------|---------------|------------|------------|-----------------
1            | Test    | Test project  | 9/28/2012  | 9/10/2012  | Ben
1            |         |               | 9/31/2012  | 9/13/2012  | Stuart
1            |         | Changed proj  |            | 9/13/2012  | Liz 
```

而且，事实上，这是做到这一点的最佳方式，我将如何将其展平以获取`Test,Changed proj,9/31/2012`ID `Project`1？如果这不是最好的解决方法……那是什么？

另一件需要注意的事情是，其中一些字段将通过`has_many`和连接到其他模型`has_many :through`。对我来说，这排除了`Revision`使用仅包含修改字段名称和新内容的模型的想法。

我想这样做而不只是使用别人的图书馆。感觉就像一个相对较小的问题，我只是不知道如何开始解决。但也许我正试图打开一个比感觉大得多的蠕虫罐？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T22:39:49.663

这个话题实际上有相当多的内容。以下是可能有帮助的链接列表：

*   [Paper Trail 上的 Railscasts 插曲](http://railscasts.com/episodes/255-undo-with-paper-trail)
*   [纸迹](https://github.com/airblade/paper_trail)
*   [act_as_revisable](https://github.com/fatjam/acts_as_revisable)

我建议您始终检查[Ruby Toolbox](https://www.ruby-toolbox.com/)以获取所需的 gem，并查看[Railscasts](http://railscasts.com/)以获取教程。

# c# - 如何创建可拖动和可拖动的控件列表？

> ID：12415745
> 
> 赞同：0
> 
> 时间：2012-09-13T22:34:50.863
> 
> 标签：c#, xaml, mvvm, drag-and-drop, winrt-xaml

我有一个`ItemControl`并且我将`ItemPanel`属性设置为水平`StackPanel`并将其绑定到`ObservableCollection`图标。现在我希望用户能够通过拖放删除图标，`ItemControl`并且还可以通过拖放来更改项目位置。（看起来像 MacOSX DocBar）。我可以用上面的控件做到这一点吗？如果是，请告诉我如何。如果不是，我很感激告诉我应该使用哪些控件以及如何

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T23:38:27.253

您应该能够使用自己继承的控件版本。Microsoft 以允许轻松继承和覆盖行为的方式编写他们的控件。

它应该类似于这里所做的：http: [//www.codeproject.com/Articles/7841/Drag-and-Drop-Treeview-control](http://www.codeproject.com/Articles/7841/Drag-and-Drop-Treeview-control)

您想观看 DragStart 和 DragLeave 之类的事件，并且当它不在您的控制范围内并执行放置时，请执行您的操作。

更多信息：http: [//msdn.microsoft.com/en-us/library/za0zx9y0.aspx](http://msdn.microsoft.com/en-us/library/za0zx9y0.aspx)

祝你好运。

# audio - 为 A2DP 重新采样音频输出（来自 PCM WAV）

> ID：12415746
> 
> 赞同：0
> 
> 时间：2012-09-13T22:34:53.243
> 
> 标签：audio, bluetooth, resampling, a2dp

如何在 CM7 智能手机上通过蓝牙 2.1将`PCM WAV 32,000Hz`带有流的立体声带入耳机？这可能吗？*SBC 真的是个坏主意。*`1024 kbps (125 KB)``DSPManager`

 *也许可以使用耳机配置文件（HSP）？我不知道此配置文件中支持的编解码器。

*@TJD：因为它压缩了压缩流。我的 Epic 4G 不支持 Apt-X。我的耳机 Gemix BH-04A 黄色。**

# c - getchar() 在 printf() 之前执行

> ID：12415756
> 
> 赞同：0
> 
> 时间：2012-09-13T22:36:34.457
> 
> 标签：c

在我的简单程序中，当它执行`getchar`方法时在方法之前执行`printf`。为什么会发生这种情况以及如何解决这个问题？

```
#include <stdio.h>
#include <stdlib.h>

#define SUCCESS 0

void exit_Pro()
{
    printf("Press any Key to exit: ");
    fflush(stdin);
    getchar();
}
int main(int argc, char **argv) {
    atexit(exit_Pro);

    return SUCCESS;
} 
```

平台：Window 7 编译器（IDE）：Eclipse CDT

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T22:55:23.320

刷新“标准输入”？printf 在“stdout”上运行。你的意思是冲那个吗？冲洗“stdin”没有意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T23:44:20.157

首先，我同意胡说八道：`fflush(stdin)`是一件坏事。这里有[进一步的解释](http://faq.cprogramming.com/cgi-bin/smartfaq.cgi?answer=1052863818&id=1043284351)。（如果*9*位经验丰富的程序员都告诉我我做错了什么，我会相信他们。）

现在，为了帮助您调试代码，您能告诉我们这个简化的代码在您的系统上是否存在同样的问题吗？

```
#include <stdio.h>

int main(int argc, char *argv[]) {
    printf("Press any Key to exit: ");
    fflush(stdout);
    getchar();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T23:05:29.810

如果您使用`stderr`（无缓冲）怎么办？这个对我有用。

```
void exit_Pro()
{
    fprintf(stderr, "Press any Key to exit: ");
    getchar();
} 
```

# java - 如何在 Monodevelop 中获取 Java？

> ID：12415761
> 
> 赞同：0
> 
> 时间：2012-09-13T22:36:44.447
> 
> 标签：java, ide, download, monodevelop

我知道 MonoDevelop 带有用于 C 和 C#（以及其他）的 IDE，但是我如何获得 Java 呢？假设我在 64 位 Windows 机器上。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T22:59:27.013

There is some support for Java in Mono using IKVM.NET. Take a look at the [http://www.mono-project.com/Java](https://github.com/mono/monodevelop/tree/master/extras/JavaBinding)

There is also a plugin for Java in MonoDevelop - [https://github.com/mono/monodevelop/tree/master/extras/JavaBinding](https://github.com/mono/monodevelop/tree/master/extras/JavaBinding), using IKVM.NET as well. You can try to build it and check how it goes.

Keep in mind that the purpose of IKVM.NET is to run Java code on top of .NET framework, so it will be "another Java" at least.

# django - django - url 模式和 if-else 视图

> ID：12415763
> 
> 赞同：0
> 
> 时间：2012-09-13T22:36:51.297
> 
> 标签：django, url

我正在尝试在 django 1.4 中构建（有点 RESTFul）URL，它允许按书籍章节过滤，然后还可以按书籍章节和章节进行过滤。但是，截至目前，只有特定章节**和**章节 URL 的返回信息。当我只是输入一个章节时，页面显示没有任何内容。

我在 settings.py 中的 urlpatterns：

```
url(r'^(?i)book/(?P<chapter>[\w\.-]+)/?(?P<section>[\w\.-]+)/?$', 'book.views.chaptersection'), 
```

我的意见.py：

```
from book.models import contents as C
def chaptersection(request, chapter, section):

if chapter and section:

    chapter = chapter.replace('-', ' ')
    section = section.replace('-', ' ')

    info = C.objects.filter(chapter__iexact=chapter, section__iexact=section).order_by('symb')
    context = {'info':info}
    return render_to_response('chaptersection.html', context, context_instance=RequestContext(request))

elif chapter:

    chapter = chapter.replace('-', ' ')

    info = C.objects.filter(chapter__iexact=chapter).order_by('symb')
    context = {'info':info}
    return render_to_response('chaptersection.html', context, context_instance=RequestContext(request))

else:
    info = C.objects.all().order_by('symb')
    context = {'info':info}
    return render_to_response('chaptersection.html', context, context_instance=RequestContext(request)) 
```

再次......第 1 章第 1 节的“book/1/1”处的 URL 工作正常，但不是“book/1”，从技术上讲，它应该显示第 1 章的所有内容。我没有收到错误，但同时时间，屏幕上什么也没有显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T22:55:26.757

您已将尾部斜杠设为可选，但您的正则表达式仍需要至少一个字符作为 section 参数。

尝试改变

```
(?P<section>[\w\.-]+) 
```

到

```
(?P<section>[\w\.-]*) 
```

就个人而言，我发现声明两种 URL 模式比使用可选参数更清晰。

```
url(r'^(?i)book/(?P<chapter>[\w\.-]+)/$', 'book.views.chaptersection'),
url(r'^(?i)book/(?P<chapter>[\w\.-]+)/(?P<section>[\w\.-]+)/$', 'book.views.chaptersection'), 
```

这需要对您的`chaptersection`视图进行小幅调整以生成`section`可选参数：

```
def chaptersection(request, chapter, section=None): 
```

# java - 将时间更改为特定时区的最简单方法

> ID：12415764
> 
> 赞同：0
> 
> 时间：2012-09-13T22:36:51.963
> 
> 标签：java, android, time, timezone

有两个字符串

```
String date = "9/13/2012";
String time = "5:48pm"; 
```

时间是 GMT+0，我想将其更改为 GMT+8，将时间更改为特定时区的最简单方法是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T22:45:05.467

*   使用`SimpleDateFormat`设置为 UTC 时区解析它
*   使用您感兴趣的时区设置解析`Date`值的格式`SimpleDateFormat`。（它可能不仅仅是“UTC + 8” - 您应该找出您*真正*想要的 TZDB 时区 ID。

例如：

```
SimpleDateFormat inputFormat = new SimpleDateFormat("MM/dd/yyyy h:mma", Locale.US);
inputFormat.setTimeZone(TimeZone.getTimeZone("Etc/UTC");
Date date = inputFormat.parse(date + " " + time);

// Or whatever format you want...
SimpleDateFormat outputFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm", Locale.US);
outputFormat.setTimeZone(targetTimeZone);
String outputText = outputFormat.format(date); 
```

（如果您可以改用[Joda Time](http://joda-time.sf.net)，那就太好了 - 但我知道它对于 Android 应用程序来说相当大。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T22:44:27.793

Joda-Time 库提供了一组很好的对象，用于处理多个时区中的日期/时间。[http://joda-time.sourceforge.net/](http://joda-time.sourceforge.net/)

例如这样的事情：

```
 String date = "9/13/2012";
    String time = "5:48pm";

    String[] dateParts = date.split("/");
    Integer month = Integer.parseInt(dateParts[0]);
    Integer day = Integer.parseInt(dateParts[1]);
    Integer year = Integer.parseInt(dateParts[2]);

    String[] timeParts = time.split(":");
    Integer hour = Integer.parseInt(timeParts[0]);
    Integer minutes = Integer.parseInt(timeParts[1].substring(0,timeParts[1].lastIndexOf("p")));

    DateTime dateTime = new DateTime(year, month, day, hour, minutes, DateTimeZone.forID("Etc/GMT"));
    dateTime.withZone(DateTimeZone.forID("Etc/GMT+8")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-07-30T21:12:14.097

# *java.time*

`java.util`日期时间 API 及其格式化 API已`SimpleDateFormat`过时且容易出错。建议完全停止使用它们并切换到[现代 Date-Time API](https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html) ^*。

另外，下面引用的是来自[**Joda-Time**](https://www.joda.org/joda-time/)[主页](https://www.joda.org/joda-time/)**的通知：**

 **> 请注意，从 Java SE 8 开始，用户被要求迁移到 java.time (JSR-310) - JDK 的核心部分，它取代了这个项目。

**使用`java.time`现代日期时间 API 的解决方案：**

```
import java.time.LocalDateTime;
import java.time.OffsetDateTime;
import java.time.ZoneOffset;
import java.time.format.DateTimeFormatter;
import java.util.Locale;

public class Main {
    public static void main(String[] args) {
        String date = "9/13/2012";
        String time = "5:48pm";

        DateTimeFormatter dtf = DateTimeFormatter.ofPattern("M/d/u h:ma", Locale.UK);
        LocalDateTime ldtSource = LocalDateTime.parse(date + " " + time, dtf);

        OffsetDateTime odtSource = ldtSource.atOffset(ZoneOffset.UTC);
        OffsetDateTime odtTarget = odtSource.withOffsetSameInstant(ZoneOffset.of("+08:00"));

        System.out.println(odtTarget);

        // In a custom format
        System.out.println(odtTarget.format(dtf));
    }
} 
```

**输出：**

```
2012-09-14T01:48+08:00
9/14/2012 1:48am 
```

[`ONLINE DEMO`](https://ideone.com/I2QlRX)

**[从Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**了解有关现代日期时间 API 的更多信息。

* * *

^(* 出于任何原因，如果您必须坚持使用 Java 6 或 Java 7，则可以使用[***ThreeTen-Backport，***](http://www.threeten.org/threetenbp/)它将大部分*java.time*功能向后移植到 Java 6 和 7。如果您正在为 Android 项目和 Android API 工作level 仍然不符合 Java-8，请检查[Java 8+ APIs available through desugaring](https://developer.android.com/studio/write/java8-support-table)和[How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)。)**

# matlab - 在 Matlab 中将 unicode 字符串写入文件

> ID：12415767
> 
> 赞同：8
> 
> 时间：2012-09-13T22:37:05.153
> 
> 标签：matlab, unicode, utf-8

我有一个包含乌尔都语字符的字符串，例如 'بجلی' 这是一个 1x4 数组。我想将其保存到一个文件中，该文件将在外部查看。尽管此字符串不会显示在主命令窗口中，但变量“str”确实保存了它。当我使用 fprintf(fid, str) 保存它并在记事本中打开该文件时，原始字符上会出现“箭头”。我可以轻松地将我的字符手动粘贴到记事本中。问题出在哪里？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-14T03:01:27.667

您需要使用 fwrite() 而不是 fprintf()：

```
fid = fopen('temp.txt', 'w');

str = char([1576, 1580,  1604, 1740, 10]);

encoded_str = unicode2native(str, 'UTF-8');
fwrite(fid, encoded_str, 'uint8');

fclose(fid); 
```

验证：

```
perl -E "open my $fh, q{<:utf8}, q{temp.txt}; while (<$fh>) {while (m/(.)/g) {say ord $1}}"
1576
1580
1604
1740 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-07-22T13:49:47.937

`fprintf`为了在文件中写入 UTF-8 字符串，实际上没有必要避免。这个想法是正确打开文件：

```
f = fopen('temp.txt', 'w', 'native', 'UTF-8');
s = char([1576, 1580, 1604, 1740]);
fprintf(f, 'This is written as UTF-8: %s.\n', s);
fclose(f); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-07T21:18:42.360

查找字符图中的每个字符似乎很难。代码可以修改为以下代码：

```
fid = fopen('temp.txt', 'w');
str = char(['س','ل','ا','م');
encoded_str = unicode2native(str, 'UTF-8');
fwrite(fid, encoded_str, 'uint8');
fclose(fid); 
```

这似乎更容易，但唯一的缺点是它需要您安装阿拉伯语/波斯语/乌尔多语，...。

# android - 如何在列表视图下方放置固定按钮？

> ID：12415773
> 
> 赞同：3
> 
> 时间：2012-09-13T22:37:36.570
> 
> 标签：android, android-layout

有没有办法在列表视图正下方有一个按钮，以便随着列表视图的增长，按钮向下移动但按钮永远不会被推离屏幕。IE，一旦列表视图超出屏幕，按钮仍然始终可见，并且列表视图是可滚动的。

我设法使按钮始终位于屏幕底部，但我希望它直接位于列表视图下方，而列表视图小于屏幕。

我尝试过使用相对和线性布局的各种安排并使用 weight 属性，而看起来它们应该起作用的东西根本不起作用，因此在发布之前可能值得检查任何答案。

澄清：换一种说法：我想要一个按钮位于列表视图下方，随着它的增长向下移动，但我不希望按钮被推到屏幕外

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:19:34.373

[上一篇文章](https://stackoverflow.com/a/5487716/595947)正是您想要做的。它的基本作用是将按钮始终保持在列表的底部。但是当列表超出屏幕区域时，它的高度会受到`weight`参数的限制。
这样，列表的底部边缘就在按钮的上方`LinearLayout`，您将获得与您正在寻找的相同的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-08T09:48:04.793

如果您想在列表项的末尾显示此按钮。然后使用此代码

```
final Button btnAddMore = new Button(this);
btnAddMore.setText(R.string.art_btn_moreIssues);
exArticlesList = (ExpandableListView) this.findViewById(R.id.art_list_exlist);
exArticlesList.addFooterView(btnAddMore); 
```

或者，如果您在布局末尾显示按钮，则使用此代码。

```
<RelativeLayout
android:id="@+id/relativeLayout"
android:layout_width="match_parent"
android:layout_height="match_parent">

<ListView
    android:id="@+id/listView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_above="@+id/btn_New" >
</ListView>

<Button
    android:id="@+id/btn_New"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:layout_marginBottom="20dp"
    android:text="@string/New"
    android:width="170dp"
    android:layout_alignParentBottom="true" />
  </RelativeLayout> 
```

# ios - 在地图视图上重新添加注释以更新其标题

> ID：12415778
> 
> 赞同：3
> 
> 时间：2012-09-13T22:38:28.697
> 
> 标签：ios, mkmapview, mkannotation

正如您在下面看到的，我以基本的方式模拟了我的问题。我有一个定期调用方法的计时器。在这种方法中，我创建了一个 switch-case 条件来模拟我的想法。

一旦在地图上添加大头针，然后再次读取（大头针不断下降）它们。

我想添加我的图钉，然后只更改代表天气值的标题。

```
- (IBAction)playBtn:(id)sender {

     timer = [NSTimer scheduledTimerWithTimeInterval:(4.0) target:self selector:@selector(control) userInfo:nil repeats:YES];

}

-(void)control{
    NSMutableArray *annotationArray = [[[NSMutableArray alloc] init] autorelease];

    switch (value%2) {
        case 0:
        {

    // Create some annotations
    Annotation *annotation = nil;

    annotation = [[Annotation alloc] init];
    annotation.coordinate = CLLocationCoordinate2DMake(29.7161,-95.3906);
    annotation.color = RGB(13, 0, 182);
    annotation.title = @"17";
    [annotationArray addObject:annotation];
    [annotation release];

    annotation = [[Annotation alloc] init];
    annotation.coordinate = CLLocationCoordinate2DMake(30.168456,-95.504480);
    annotation.color = RGB(0, 182, 146);
    annotation.title = @"16";
    [annotationArray addObject:annotation];
    [annotation release];

    // Center map
    //self.mapView.visibleMapRect = [self makeMapRectWithAnnotations:annotationArray];

    // Add to map
    //[self.mapView addAnnotations:annotationArray];
        }
            break;
        case 1:
        {
            // Create some annotations
            Annotation *annotation = nil;

            annotation = [[Annotation alloc] init];
            annotation.coordinate = CLLocationCoordinate2DMake(29.7161,-95.3906);
            annotation.color = RGB(13, 0, 182);
            annotation.title = @"27";
            [annotationArray addObject:annotation];
            [annotation release];

            annotation = [[Annotation alloc] init];
            annotation.coordinate = CLLocationCoordinate2DMake(30.168456,-95.504480);
            annotation.color = RGB(0, 182, 146);
            annotation.title = @"25";
            [annotationArray addObject:annotation];
            [annotation release];

        }
            break;
    }
    [self.mapView addAnnotations:annotationArray];
    [mapView setNeedsDisplay];
    value++; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T02:45:49.450

如果要更新已添加到地图的注记的属性，使用新属性再次添加它（无需先删除旧属性）只需在同一位置创建并添加*另一个*注记（使用新属性） .

如您所见，调用`removeAnnotation`然后`addAnnotation`会导致闪烁和另一个拖放动画。

相反，您必须获取对*现有*注释的引用，然后更新其属性。

如果它只是一个注释，您可以保留对它的类级 ivar 引用，并在值更改时使用该引用更新属性。

如果您需要在不同的时间更新不同的注解，一个简单的方法是在地图视图的`annotations`数组中搜索您想要更新的注解。

这要求您在注释类中有一个属性，该属性对于每个注释都是唯一的，并且（理想情况下）对于每个注释都保持不变。换句话说：如果您要更新注解的`title`，请不要将`title`用作“唯一”注解标识符。

相反，添加另一个属性（例如，一个 int 或字符串），您在创建它时分配给每个注释并且不会更改，以便您以后可以使用该值找到注释。

例如，假设您添加了一个调用`annotationId`注解类的 int 属性，并且您希望使用 id# 42 更新注解：

```
BOOL annFound = NO;

//loop through the map view's annotations array to find annotation id# 42...
for (id<MKAnnotation> ann in mapView.annotations)
{
    if ([ann isKindOfClass:[MyAnnotationClass class]])
    {
        MyAnnotationClass *myAnn = (MyAnnotationClass *)ann;
        if (myAnn.annotationId == 42)
        {
            annFound = YES;
            myAnn.title = @"some new title";
            break;
        }
    }
}

if (!annFound)
{
    //annotation id# 42 is not yet on the map.
    //create it and add to map... 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T22:47:47.617

我认为您需要删除旧注释，因为注释数组是只读的 NSArray *oldAnnotaions = [map annotaions]; [mapView removeAnnotations:oldAnnotations];

# python - 如何在 Python 中打开文件后释放内存

> ID：12415783
> 
> 赞同：17
> 
> 时间：2012-09-13T22:39:06.517
> 
> 标签：python, memory, file-io, large-files

我在 Python 中打开一个 3 GB 的文件来读取字符串。然后我将这些数据存储在字典中。我的下一个目标是使用这本字典构建一个图表，以便我密切监视内存使用情况。

在我看来，Python 将整个 3 GB 文件加载到内存中，我无法摆脱它。我的代码如下所示：

```
with open(filename) as data:

    accounts = dict()

    for line in data:
        username = line.split()[1]
        IP = line.split()[0]

        try:
            accounts[username].add(IP)
        except KeyError:
            accounts[username] = set()
            accounts[username].add(IP)

print "The accounts will be deleted from memory in 5 seconds"
time.sleep(5)
accounts.clear()

print "The accounts have been deleted from memory"
time.sleep(5)

print "End of script" 
```

最后一行在那里，以便我可以监控内存使用情况。该脚本使用了超过 3 GB 的内存。清除字典可以释放大约 300 MB。当脚本结束时，剩余的内存被释放。

我正在使用 Ubuntu，并且我已经使用终端中的“系统监视器”和“免费”命令监控了内存使用情况。

我不明白的是为什么在我清除字典后 Python 需要这么多内存。文件是否仍存储在内存中？如果是这样，我该如何摆脱它？我的操作系统没有看到释放的内存有问题吗？

编辑：我试图在清除字典后强制执行 gc.collect()，但无济于事。

EDIT2：我在 Ubuntu 12.04.LTS 上运行 Python 2.7.3

EDIT3：我意识到我忘了提到一些非常重要的事情。我真正的问题不是我的操作系统没有“取回”Python 使用的内存。后来，Python 似乎没有重用该内存（它只是要求操作系统提供更多内存）。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-14T00:02:33.230

这对我来说也没有任何意义，我想弄清楚这是如何/为什么会发生的。（我认为这也应该是这样工作的！）我在我的机器上复制了它——尽管文件更小。

我在这里看到了两个离散的问题

1.  为什么 Python 将文件读入内存（使用惰性行读取，它不应该 - 对吗？）
2.  为什么 Python 不为系统释放内存

我对 Python 内部知识一无所知，所以我只是做了很多网络搜索。所有这一切都可能完全不合时宜。（我几乎不再发展了，过去几年一直在科技的商业方面工作）

## 懒人读...

我环顾四周，发现了这个帖子 -

[http://www.peterbe.com/plog/blogitem-040312-1](http://www.peterbe.com/plog/blogitem-040312-1)

它来自更早版本的python，但这条线引起了我的共鸣：

> readlines() 一次读取整个文件并按行拆分。

然后我看到了这个，也是旧的 effbot 帖子：

[http://effbot.org/zone/readline-performance.htm](http://effbot.org/zone/readline-performance.htm)

关键的收获是：

> 例如，如果您有足够的内存，您可以使用 readlines 方法将整个文件放入内存中。

和这个：

> 在 Python 2.2 及更高版本中，您可以遍历文件对象本身。这很像幕后的 readlines(N)，但看起来好多了

查看 xreadlines 的 pythons 文档 [ [http://docs.python.org/library/stdtypes.html?highlight=readline#file.xreadlines](http://docs.python.org/library/stdtypes.html?highlight=readline#file.xreadlines) ]：

> 此方法返回与 iter(f) 相同的内容 自 2.3 版以来不推荐使用：改为用于文件中的行。

这让我觉得也许正在发生一些啜饮。

因此，如果我们查看 readlines [ [http://docs.python.org/library/stdtypes.html?highlight=readline#file.readlines](http://docs.python.org/library/stdtypes.html?highlight=readline#file.readlines) ] ...

> 使用 readline() 读取直到 EOF 并返回包含如此读取的行的列表。

这似乎就是这里发生的事情。

然而， readline 看起来像我们想要的 [ [http://docs.python.org/library/stdtypes.html?highlight=readline#file.readline](http://docs.python.org/library/stdtypes.html?highlight=readline#file.readline) ]

> 从文件中读取一整行

所以我尝试将其切换到 readline，并且该进程从未超过 40MB（之前它增长到 200MB，即日志文件的大小）

```
accounts = dict()
data= open(filename)
for line in data.readline():
    info = line.split("LOG:")
    if len(info) == 2 :
        ( a , b ) = info
        try:
            accounts[a].add(True)
        except KeyError:
            accounts[a] = set()
            accounts[a].add(True) 
```

我的猜测是，我们并没有真正懒惰地阅读带有`for x in data`结构的文件——尽管所有文档和 stackoverflow 评论都表明我们是。 `readline()`对我来说消耗的内存明显减少，并且`realdlines`消耗的内存量与`for line in data`

## 释放内存

在释放内存方面，我对 Python 的内部结构不太熟悉，但我回想起我使用 mod_perl 的时候......如果我打开一个 500MB 的文件，那个 apache 子进程就会增长到那个大小。如果我释放了内存，它只会在那个孩子中是免费的——垃圾收集的内存在进程退出之前永远不会返回给操作系统。

所以我在这个想法上四处寻找，发现一些链接表明这可能会发生：

[http://effbot.org/pyfaq/why-doesnt-python-release-the-memory-when-i-delete-a-large-object.htm](http://effbot.org/pyfaq/why-doesnt-python-release-the-memory-when-i-delete-a-large-object.htm)

> 如果创建一个大对象并再次删除它，Python 可能已经释放了内存，但所涉及的内存分配器并不一定会将内存返回给操作系统，因此看起来 Python 进程使用了​​更多的虚拟内存比它实际使用的。

那有点老了，后来我在 python 中发现了一堆随机（已接受）补丁，这表明行为已更改，您现在可以将内存返回给操作系统（截至 2005 年，大多数补丁已提交并显然获得批准）。

然后我发现这个帖子[http://objectmix.com/python/17293-python-memory-handling.html](http://objectmix.com/python/17293-python-memory-handling.html) - 并注意评论#4

> > `free()`"""- 补丁 #1123430：Python 的小对象分配器现在会在一个 arena 中的所有内存再次未使用时返回一个 arena 给系统。在 Python 2.5 之前，arenas（256KB 内存块）从未被释放。一些应用程序会看到现在虚拟内存大小下降，尤其是长时间运行的应用程序，有时会临时使用大量小对象。请注意，当 Python 将竞技场返回到平台 C`free()`时，不能保证平台 C 库将反过来将该内存返回给操作系统。补丁的效果是停止使这成为不可能，并且在测试中它似乎至少在基于 Microsoft C 和 gcc 的系统上有效。感谢 Evan Jones 的辛勤工作和耐心.
> 
> 因此，对于 linux 下的 2.4（如您所测试的那样），您确实不会总是取回已使用的内存，因为要收集大量的小对象。
> 
> 因此（我认为）您在执行 f.read() 和 f.readlines() 之间看到的区别在于前者将整个文件作为一个大字符串对象（即不是一个小对象）读取，而后者则返回行列表，其中每一行都是一个 python 对象。

如果 'for line in data:' 构造本质上是 wrapping`readlines`而不是`readline`，也许这与它有关？也许拥有单个 3GB 对象不是问题，而是拥有数百万个 30k 对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T02:51:03.927

您正在尝试哪个版本的python？

我在 Python 2.7/Win7 上做了一个测试，它按预期工作，内存被释放。

在这里，我生成像您这样的示例数据：

```
import random

fn = random.randint

with open('ips.txt', 'w') as f: 
    for i in xrange(9000000):
        f.write('{0}.{1}.{2}.{3} username-{4}\n'.format(
            fn(0,255),
            fn(0,255),
            fn(0,255),
            fn(0,255),
            fn(0, 9000000),
        )) 
```

然后是你的脚本。我用 defaultdict 替换了**dict****因为**抛出异常会使代码变慢：

 **```
import time
from collections import defaultdict

def read_file(filename):
    with open(filename) as data:

        accounts = defaultdict(set)

        for line in data:
            IP, username = line.split()[:2]
            accounts[username].add(IP)

    print "The accounts will be deleted from memory in 5 seconds"
    time.sleep(5)
    accounts.clear()

    print "The accounts have been deleted from memory"
    time.sleep(5)

    print "End of script"

if __name__ == '__main__':
    read_file('ips.txt') 
```

如您所见，内存达到了 1.4G，然后被释放，剩下 36MB：

![defaultdict 的内存使用情况](../Images/b99f5d8e84c9fc6295b83098af1b0590.png)

使用您的原始脚本，我得到了相同的结果，但速度有点慢：

![在此处输入图像描述](../Images/e4b2778747f830920839af198abe4234.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T02:04:46.227

*Python 何时释放内存以供Python*重用和何时将内存释放回操作系统之间存在差异。Python 有用于某些类型对象的内部池，它会自行重用这些对象，但不会将其返回给操作系统。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T22:43:29.563

[gc 模块](http://docs.python.org/library/gc.html)可能很有用，尤其是函数`collect`。我自己从未使用过它，但从文档来看，它看起来可能很有用。我会`gc.collect()`在你跑步之前尝试跑步`accounts.clear()`。**

# ruby-on-rails - 数据映射器不接受正则表达式

> ID：12415784
> 
> 赞同：0
> 
> 时间：2012-09-13T22:39:08.163
> 
> 标签：ruby-on-rails, ruby, regex, sinatra, datamapper

我正在使用正则表达式来验证我的 sinatra 应用程序中使用 data_mapper gem 发送到我的数据库的表单字段。我在模型中用于该字段的代码是：

```
property :price, Float, :required => true, :format => /\$?\d{0,3}\.{1}\d{2}/ 
```

它正在从参数中保存：

```
b.price = params[:price] 
```

但是，当我尝试保存时，我不断收到无效的格式错误。我用[rubular](http://rubular.com/r/aSgVeCodW8)检查了我的正则表达式，它似乎工作正常。有人知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:22:23.750

这并不完美，但这是我目前正在做的解决方案：

```
property :price, Float, :required => true 
validates_format_of :price, :with => /\$?\d{0,3}(\.{1}\d{2})?/ 
```

进而：

```
c = params[:price]
c[0] == "$" ? b.price = c[1,7] : b.price = c 
```

因此，如果有一个“$”，我只是将数字保存到 b.price 没有它，否则整个事情都会设置为 b.price。我觉得应该有更好的方法...

# asp.net-mvc - 实体框架选择具有祖父母 ID 的对象

> ID：12415791
> 
> 赞同：1
> 
> 时间：2012-09-13T22:39:40.713
> 
> 标签：asp.net-mvc, linq, entity-framework

使用 SQL，我将执行以下操作...

```
SELECT G.* FROM GOAL G
INNER JOIN Plan P ON
P.planID = G.planID
INNER JOIN User U ON
U.userID = P.userID
WHERE U.userID = @userID 
```

在我的控制器（MVC4）`"ActionResult Edit"`中，我执行以下操作，这是两个查询，我怎么能只做一个？目标是确保用户只能对自己的数据执行“编辑”操作，而不是其他人的目标。

```
var plan = db.Plan.Where(b => b.UserID == CurrentUserID).FirstOrDefault();
Goal goal = db.Goals
            .Where(b => b.PlanID == plan.ID)
            .FirstOrDefault();
return View(goal); 
```

模型

```
public class Plan
{
    public int ID { get; set; }
    [Required]
    public int UserID { get; set; }
}
[Table("PlanGoal")]
public class Goal
{
    public int ID { get; set; }

    [Required]
    public int PlanID { get; set; } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T22:53:06.783

将**虚拟** `Plan`属性添加到`Goal`类

```
public class Goal
{
    public int ID { get; set; }        
    public virtual Plan Plan { set;get;}    
    [Required]
    public int PlanID { get; set; } 
} 
```

现在你可以像这样查询它

```
Goal goal = db.Goals
            .Where(b => b.Plan.UserID == CurrentUserID).FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T23:08:29.827

或者您可以将目标和计划结合在一起，而不是在您的`Goal`课程中添加属性：

```
Goal goal = (from g in db.Goals
            from p in db.Plan
            where p.UserID == CurrentUserID
             && g.PlanID == p.ID
            select g).FirstOrDefault(); 
```

# android - 接收期间的 Socket io 错误

> ID：12415795
> 
> 赞同：1
> 
> 时间：2012-09-13T22:40:03.380
> 
> 标签：android, json, socket.io

我正在使用库 Gottox/socket.io-java-client 使用套接字 io 制作 android 应用程序我成功地将数据发送到服务器，但是我在接收来自服务器的响应时遇到问题我收到了这些错误

```
09-14 01:31:43.441: E/AndroidRuntime(585): FATAL EXCEPTION: main
09-14 01:31:43.441: E/AndroidRuntime(585): java.lang.NullPointerException
09-14 01:31:43.441: E/AndroidRuntime(585):  at a.a.a.SocketsActivity$1.onClick(SocketsActivity.java:121)
09-14 01:31:43.441: E/AndroidRuntime(585):  at android.view.View.performClick(View.java:2408)
09-14 01:31:43.441: E/AndroidRuntime(585):  at android.view.View$PerformClick.run(View.java:8816)
09-14 01:31:43.441: E/AndroidRuntime(585):  at android.os.Handler.handleCallback(Handler.java:587)
09-14 01:31:43.441: E/AndroidRuntime(585):  at android.os.Handler.dispatchMessage(Handler.java:92)
09-14 01:31:43.441: E/AndroidRuntime(585):  at android.os.Looper.loop(Looper.java:123)
09-14 01:31:43.441: E/AndroidRuntime(585):  at android.app.ActivityThread.main(ActivityThread.java:4627)
09-14 01:31:43.441: E/AndroidRuntime(585):  at java.lang.reflect.Method.invokeNative(Native Method)
09-14 01:31:43.441: E/AndroidRuntime(585):  at java.lang.reflect.Method.invoke(Method.java:521)
09-14 01:31:43.441: E/AndroidRuntime(585):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-14 01:31:43.441: E/AndroidRuntime(585):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-14 01:31:43.441: E/AndroidRuntime(585):  at dalvik.system.NativeStart.main(Native Method)
09-14 01:31:48.433: I/global(585): Default buffer size used in BufferedOutputStream constructor. It would be better to be explicit if an 8k buffer is required.
09-14 01:31:49.481: I/io.socket(585): > 3:::{"Action":  "AuthenticateUser","Parameters":[{"UserName": "a","Password": "a"}]}
09-14 01:31:49.481: I/io.socket(585): < 1::
09-14 01:31:50.681: I/io.socket(585): < 5:::{"name":"message","args":[{"Action":"AuthenticateUser","RequestStatus":"100","RequestStatusMessage":"Invalid UserName/password"}]}
09-14 01:31:50.681: W/System.err(585): a.a.a.SocketIOException: Exception was thrown in on(String, JSONObject[]).
09-14 01:31:50.681: W/System.err(585): Message was: 5:::{"name":"message","args":[{"Action":"AuthenticateUser","RequestStatus":"100","RequestStatusMessage":"Invalid UserName/password"}]}
09-14 01:31:50.691: W/System.err(585):  at a.a.a.IOConnection.transportMessage(IOConnection.java:684)
09-14 01:31:50.691: W/System.err(585):  at a.a.a.WebsocketTransport.onMessage(WebsocketTransport.java:99)
09-14 01:31:50.691: W/System.err(585):  at de.roderick.weberknecht.WebSocketReceiver.run(WebSocketReceiver.java:57)
09-14 01:31:50.691: W/System.err(585): Caused by: java.lang.ClassCastException: a.a.a.IOConnection
09-14 01:31:50.691: W/System.err(585):  at a.a.a.IOConnection.findCallback(IOConnection.java:487)
09-14 01:31:50.701: W/System.err(585):  at a.a.a.IOConnection.transportMessage(IOConnection.java:679)
09-14 01:31:50.701: W/System.err(585):  ... 2 more 
```

这是我的代码

```
private void SendDataToServer(String username,String password)
    {
          SocketIO socket=new SocketIO();
        try {
            socket = new SocketIO("http://41.69.103.53:1333/");
        } catch (MalformedURLException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
          socket.connect(new IOCallback() {
              public void onMessage(JSONObject json, IOAcknowledge ack) {
                  try {

                      System.out.println("Server said:" + json.toString(2));
             //         x=json.toString(2);
              //        z=json.toString();

                  } catch (JSONException e) {
                      e.printStackTrace();

                  }
              }

              public void onMessage(String data, IOAcknowledge ack) {
                //tv.setText(data);
                  //System.out.println("Server said: " + data);
                //  x=data;
              }

              public void onError(SocketIOException socketIOException) {
                //tv.setText(socketIOException.toString());
                //System.out.println("an Error occured");
                  request=0;
                  socketIOException.printStackTrace();
              }

              public void onDisconnect() {
              //    tv.setText("Connection terminated.");
                  //System.out.println("Connection terminated.");
                  request=0;
              }

              public void onConnect() {
              //    tv.setText("Connection terminated.");
                //  System.out.println("Connection established");
              }

              public void on(String event, IOAcknowledge ack, Object... args) {
                //tv.setText("Server triggered event '" + event + "'");
                 // System.out.println("Server triggered event '" + event + "'");
                  x=event;
              }
          });

          // This line is cached until the connection is establisched.
          String request="{\"Action\":  \"AuthenticateUser\""+","+
                  "\"Parameters\":";
          String request_2="[{"+"\"UserName\": "+"\""+username_string+"\""+","+
           "\"Password\""+": "+"\""+password_string+"\""+"}]}";
          String FinalRequest_login=request+request_2;
          socket.send(FinalRequest_login);

    } 
```

我找到了导致异常的行

```
public void transportMessage(String text) {
        logger.info("< " + text);
        IOMessage message;
        try {
            message = new IOMessage(text);
        } catch (Exception e) {
            error(new SocketIOException("Garbage from server: " + text, e));
            return;
        }
        resetTimeout();
switch (message.getType()) {
        case IOMessage.TYPE_DISCONNECT:
            try {
                findCallback(message).onDisconnect();
            } catch (Exception e) {
                error(new SocketIOException(
                        "Exception was thrown in onDisconnect()", e));
            }
            break;
case IOMessage.TYPE_EVENT:
            try {
                JSONObject event = new JSONObject(message.getData());
                Object[] argsArray;
                if (event.has("args")) {
                    JSONArray args = event.getJSONArray("args");
                    argsArray = new Object[args.length()];
                    for (int i = 0; i < args.length(); i++) {
                        if (args.isNull(i) == false)
                            argsArray[i] = args.get(i);
                    }
                } else
                    argsArray = new Object[0];
                String eventName = event.getString("name");
                try {
                    findCallback(message).on(eventName,
                            remoteAcknowledge(message), argsArray);
                } **catch (Exception e) {
                    error(new SocketIOException(
                            "Exception was thrown in on(String, JSONObject[]).\n"
                                    + "Message was: " + message.toString(), e));**
                } 
```

这是异常 **捕获 (Exception e) { error(new SocketIOException("Exception was throw in on(String, JSONObject[]).\n" + "Message was: " + message.toString(), e));**

因为这个功能

```
public void on(String event, IOAcknowledge ack, Object... args) {
    for (SocketIO socket : sockets.values())
            socket.getCallback().on(event, ack, args);
    } 
```

任何人都可以帮我解决它或帮助我为什么我会得到这个例外？提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T09:30:53.030

然后在方法上试试这个：

```
@Override
        public void on(String event, IOAcknowledge ack, Object... args) {
            Object[] a = args;

            Log.d("app", a[0].toString());
}           
    }); 
```

我首先将 args 对象解析为对象数组，然后我调用 0 索引处的值

但这取决于服务器响应，您可以查看日志以获取详细的服务器响应

# python - 在鼻子测试对象中获取测试类实例以与装饰生成器目标中的实例同步

> ID：12415797
> 
> 赞同：0
> 
> 时间：2012-09-13T22:40:06.897
> 
> 标签：python, generator, nose

我一直在研究一种方法，可以让鼻子中的生成器生成测试，以获得针对正在测试的特定迭代定制的描述。只要我的生成器目标方法从不尝试`self`从我的生成器类访问，我就有一些有用的东西。我看到我的所有生成器目标实例都有一个公共测试类实例，而鼻子正在为生成器的每个测试运行生成一个一次性的测试类实例。这导致`setUp`在鼻子创建的每个测试实例上运行，但永远不会在生成器目标绑定到的实例上运行（当然，真正的问题是我看不到如何将鼻子创建的实例绑定到生成器目标）。这是我用来尝试解决这一切的代码（是的，我知道装饰器作为可调用类可能会更好，但是鼻子，至少我拥有的版本 1.2.1，明确检查测试是否是函数或方法，因此可调用的类根本不会运行）：

```
import inspect

def labelable_yielded_case(case):

    argspec = inspect.getargspec(case)
    if argspec.defaults is not None:
        defaults_list = [''] * (len(argspec.args) - len(argspec.defaults)) + argspec.defaults
    else:
        defaults_list = [''] * len(argspec.args)
    argument_defaults_list = zip(argspec.args, defaults_list)
    case_wrappers = []

    def add_description(wrapper_id, argument_dict):

        case_wrappers[wrapper_id].description = case.__doc__.format(**argument_dict)

    def case_factory(*factory_args, **factory_kwargs):

        def case_wrapper_wrapper():

            wrapper_id = len(case_wrappers)

            def case_wrapper(*args, **kwargs):

                args = factory_args + args
                argument_list = []
                for argument in argument_defaults_list:
                    argument_list.append(list(argument))
                for index, value in enumerate(args):
                    argument_list[index][1] = value
                argument_dict = dict(argument_list)
                argument_dict.update(factory_kwargs)
                argument_dict.update(kwargs)
                add_description(wrapper_id, argument_dict)
                return case(*args, **kwargs)

            case_wrappers.append(case_wrapper)
            case_wrapper.__name__ = case.__name__
            return case_wrapper

        return case_wrapper_wrapper()

    return case_factory

class TestTest(object):

    def __init__(self):

        self.data = None

    def setUp(self):

        print 'setup', self
        self.data = (1,2,3)

    def test_all(self):

        for index, value in enumerate((1,2,3)):
            yield self.validate_equality(), index, value

    def test_all_again(self):

        for index, value in enumerate((1,2,3)):
            yield self.validate_equality_again, index, value

    @labelable_yielded_case
    def validate_equality(self, index, value):
        '''element {index} equals {value}'''

        print 'test', self
        assert self.data[index] == value, 'expected %d got %d' % (value, self.data[index])

    def validate_equality_again(self, index, value):

        print 'test', self
        assert self.data[index] == value, 'expected %d got %d' % (value, self.data[index])

    validate_equality_again.description = 'again' 
```

当通过鼻子运行时，`again`测试工作得很好，但是使用装饰生成器目标的测试集都失败了，因为`self.data is None`（因为`setUp`永远不会运行，因为`TestTest`存储在闭包中的实例不是鼻子运行的实例）。我尝试让装饰器成为 的基类的实例成员，但是鼻子抛出了关于传递给未绑定的`TestTest`参数太少（否）的错误。有什么办法可以使这项工作（没有砍头），还是我在不能让产量目标成为实例成员或没有为每个产量测试都贴上每个测试标签之间做出选择？`self``labelable_yielded_case`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T16:16:39.563

修复了它（至少对于这里的情况，尽管我认为我在所有情况下都得到了它）。我不得不摆弄`case_wrapper_wrapper`并`case_wrapper`让工厂返回附加到正确类的包装案例，但不以任何方式绑定到任何给定实例。我还有另一个代码问题，因为我在包装器包装器中构建参数 dict，但没有将它传递给案例。工作代码：

```
import inspect

def labelable_yielded_case(case):

    argspec = inspect.getargspec(case)
    if argspec.defaults is not None:
        defaults_list = [''] * (len(argspec.args) - len(argspec.defaults)) + argspec.defaults
    else:
        defaults_list = [''] * len(argspec.args)
    argument_defaults_list = zip(argspec.args, defaults_list)
    case_wrappers = []

    def add_description(wrapper_id, argument_dict):

        case_wrappers[wrapper_id].description = case.__doc__.format(**argument_dict)

    def case_factory(*factory_args, **factory_kwargs):

        def case_wrapper_wrapper():

            wrapper_id = len(case_wrappers)

            def case_wrapper(*args, **kwargs):

                argument_list = []
                for argument in argument_defaults_list:
                    argument_list.append(list(argument))
                for index, value in enumerate(args):
                    argument_list[index][1] = value
                argument_dict = dict(argument_list)
                argument_dict.update(kwargs)
                add_description(wrapper_id, argument_dict)
                return case(**argument_dict)

            case_wrappers.append(case_wrapper)
            case_name = case.__name__ + str(wrapper_id)
            case_wrapper.__name__ = case_name
            if factory_args:
                setattr(factory_args[0].__class__, case_name, case_wrapper)
                return getattr(factory_args[0].__class__, case_name)
            else:
                return case_wrapper

        return case_wrapper_wrapper()

    return case_factory

class TestTest(object):

    def __init__(self):

        self.data = None

    def setUp(self):

        self.data = (1,2,3)

    def test_all(self):

        for index, value in enumerate((1,2,3)):
            yield self.validate_equality(), index, value

    @labelable_yielded_case
    def validate_equality(self, index, value):
        '''element {index} equals {value}'''

        assert self.data[index] == value, 'expected %d got %d' % (value, self.data[index]) 
```

# html - 在 CSS 中设置移动页面缩放/缩放

> ID：12415799
> 
> 赞同：8
> 
> 时间：2012-09-13T22:40:24.250
> 
> 标签：html, css, responsive-design

我正在为**无法更改标记或包含任何 JS**的网站制作主题。我只能控制我的主题的 CSS，我只能在页面正文中编写一些 HTML。

我正在尝试使这个主题具有响应性，但是如果没有像这样的视口元标记，我看不到如何控制手持设备上的初始缩放或页面缩放：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

所以发生的情况是，即使我可以通过 CSS`@media`查询应用特定于移动设备的布局，但在手机上查看时网站会被缩小。文本和图像在您放大之前太小，一旦放大，布局太大并且有一个水平滚动条。它在桌面上调整大小的浏览器窗口中看起来很完美；问题是手机浏览器会自动缩放页面。

所以我正在寻找一种解决方法。我目前有两条思路，我欢迎任何其他建议：

1.  有什么方法可以单独在 CSS 中执行 viewport 元标记的功能吗？
2.  我可以在特定于移动设备的样式中强制设置最大页面宽度，以便移动浏览器不会缩放页面吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T23:20:00.750

有`@viewport`，它可能会帮助你。但是支持的很少。看看这个链接[http://dev.opera.com/articles/view/an-introduction-to-meta-viewport-and-viewport/](http://dev.opera.com/articles/view/an-introduction-to-meta-viewport-and-viewport/)

# iphone - OSX Keychain Access-Generate CSR from existing Private Key for APNS（Apple Push Notification Service）

> ID：12415801
> 
> 赞同：12
> 
> 时间：2012-09-13T22:40:30.353
> 
> 标签：iphone, ios, macos, push-notification, apple-push-notifications

当您需要为 APNS 创建新证书时，供应门户“向导”始终提供创建新 CSR 的步骤，这意味着您还需要创建新的公钥/私钥。这些可能会开始失控，那么有没有办法从现有的私钥在钥匙串访问中创建一个 CSR（代码签名请求），而不必每次都创建一个新的？

谢谢

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-02-12T23:34:17.267

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T22:40:30.353

当您进入配置文件以启用/配置推送通知时，它要求的第一件事是 CSR（代码签名证书）。

**您可以使用 Keychain Access 中的现有**私钥生成此私钥，而不是创建新私钥。

只需打开钥匙串访问，然后滚动并找到以前的 PRIVATE KEY（可能称为您的名字），然后右键单击（两指单击）并选择**Request A Certificate From A Certificate Authority With "bla bla bla"**。

我只是在用户电子邮件地址和 CA 电子邮件地址中输入相同的电子邮件地址，然后选择保存到磁盘。

然后上传以创建您的 .cer 文件

# android - 使用 onTouchEvent 时避免 ArrayIndexOutOfBoundsException

> ID：12415802
> 
> 赞同：1
> 
> 时间：2012-09-13T22:40:31.100
> 
> 标签：android, android-listview

我遇到了这个错误：

```
09-13 18:20:50.183: ERROR/AndroidRuntime(300): java.lang.ArrayIndexOutOfBoundsException
09-13 18:20:50.183: ERROR/AndroidRuntime(300):     at android.view.MotionEvent.getY(MotionEvent.java:792)
09-13 18:20:50.183: ERROR/AndroidRuntime(300):     at android.widget.AbsListView.onTouchEvent(AbsListView.java:2040) 
```

这里有一个问题： [http ://code.google.com/p/android/issues/detail?id=10238#c6](http://code.google.com/p/android/issues/detail?id=10238#c6)

当我尝试将 MotionEvent 从一个 ListView 传递给另一个时，出现此错误。但是，这只发生在一个 ListView 具有带有 onClickListeners 的视图时。

```
public boolean onTouch(View view, MotionEvent event) {

    if(event.getAction() == MotionEvent.ACTION_DOWN && !requestedFocus) {
        view.requestFocus();
        requestedFocus = true;
    } else if (event.getAction() == MotionEvent.ACTION_UP) {
        requestedFocus = false;
    }

    if(view == leftListView && view.isFocused()) {
        rightListView.dispatchTouchEvent(event);
    } else if(view == rightListView && view.isFocused()) {
        leftListView.dispatchTouchEvent(event);
    }
    return false;
} 
```

使用上面的代码，一切正常，直到`rightListView`动态加载具有 onClickListeners 的视图。然后，此视图传递给的任何 MotionEvent`leftListView`都会导致 ArrayIndexOutOfBoundsException。`leftListView`不过，从工作到工作的事件`rightListView`都符合预期。

这似乎是因为 AbsListView 的 mActivePointerId == INVALID_POINTER，例如 -1。我尝试使用反射来改变这个值......但它没有帮助。

所以，我的问题是，有没有办法解决这个问题？

我的目标是同步两个 ListView 的滚动，所以如果另一个方法可行，我愿意放弃这种方法。我曾尝试使用 ScrollListeners，但它们会导致其他问题。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T00:49:10.753

我认为您有一个数组，例如该数组的大小为 9，并且您使用的是 index[10]。

# ruby-on-rails - gem install 的权限错误

> ID：12415808
> 
> 赞同：0
> 
> 时间：2012-09-13T22:40:50.930
> 
> 标签：ruby-on-rails, heroku, permissions, gem

昨天我遇到了一个非常奇怪的问题，在试图找出一些 heroku 问题的过程中，我的整个 Rails 环境就消失了。Bundle、RVM、rails 等不再被识别。所以我只是忽略了可能的原因并重新安装了所有内容。大部分工作，但现在我遇到了权限问题。如果我捆绑安装，它需要我输入我的计算机密码以获得许可。

我刚刚在我想要部署的新目录中尝试“gem install heroku”时遇到了以下问题。

错误：执行 gem ... (Gem::FilePermissionError) 您没有写入 /Library/Ruby/Gems/1.8 目录的权限。

知道如何取回这些权限以使事情再次顺利进行吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T00:16:03.193

在目录上使用 chmod，如下所示：

sudo chmod -R g+w /Library/Ruby/Gems/1.8

那可能行得通。

# android - 在 Mac 上为 Android 编译 LuaJit 2。汇编程序错误：lj_vm.s:5：错误：未知伪操作：`.private_extern'

> ID：12415810
> 
> 赞同：2
> 
> 时间：2012-09-13T22:41:01.180
> 
> 标签：android, assembly, android-ndk, luajit

请提供有关在 mac 上构建 android LuaJit 的建议或解决`pseudo-op: '.private_extern'`汇编程序错误的一般提示。

[我在 Mac 上并按照说明在 doc/install 或http://luajit.org/install.html#android](http://luajit.org/install.html#android)中编译 LuaJit2 ：

我所做的唯一更改是更改`linux-x86`以`darwin-x86`获得`NDK`交叉编译器。我还添加了`TARGET_SYS=Linux`（我尝试过使用和不使用）每个安装说明：“只要主机操作系统和目标操作系统不同，您就需要指定`TARGET_SYS`，否则会出现汇编程序或链接器错误……”</p>

所以我的构建脚本如下所示：

```
NDK=$ANDROID_NDK
NDKABI=8
NDKVER=$NDK/toolchains/arm-linux-androideabi-4.4.3
NDKP=$NDKVER/prebuilt/darwin-x86/bin/arm-linux-androideabi-
NDKF="--sysroot $NDK/platforms/android-$NDKABI/arch-arm"

make HOST_CC="gcc -m32" CROSS=$NDKP TARGET_SYS=Linux TARGET_FLAGS="$NDKF" 
```

我的`$ANDROID_NDK`观点`r8b NDK`。但我也尝试了`r8`and `r7`，并且我尝试`gcc 4.6`了 with `r8b`。在所有情况下，我都会遇到类似的错误。

```
==== 构建 LuaJIT 2.0.0-beta9 ====
使-C src
ASM lj_vm.o
lj_vm.s：汇编器消息：
lj_vm.s:5：错误：未知伪操作：`.private_extern'
lj_vm.s:8：错误：未知伪操作：`.private_extern'
lj_vm.s:25：错误：未知伪操作：`.private_extern'

…

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-20T15:28:23.153

我不确定，但我认为当您第一次尝试构建时，您在构建不成功后`TARGET_SYS=Linux`忘记了目录中的干净`*.o`文件。`src/host`

出于这个原因，您已经看到了很多错误，例如：`Error: unknown pseudo-op: '.private_extern'`

要清理所有生成和构建的文件，请运行`make clean`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T23:23:58.973

我能够毫无问题地构建 LuaJIT 2.0.0-beta10。发布的问题是在构建 beta9 或更低版本时：看起来他们修补了任何问题。

# php - 从 URL 字符串中删除“http://”

> ID：12415815
> 
> 赞同：1
> 
> 时间：2012-09-13T22:41:28.533
> 
> 标签：php, string

我正在为我的自定义域使用 bit.ly 缩短器。它输出`http://shrt.dmn/abc123`；但是，我希望它只输出`shrt.dmn/abc123`.

这是我的代码。

```
//automatically create bit.ly url for wordpress widgets
function bitly()
{
  //login information
  $url = get_permalink();  //for wordpress permalink
  $login = 'UserName'; //your bit.ly login
  $apikey = 'API_KEY'; //add your bit.ly APIkey
  $format = 'json'; //choose between json or xml
  $version = '2.0.1';
  //generate the URL
  $bitly = 'http://api.bit.ly/shorten?version='.$version.'&longUrl='.urlencode($url).'&login='.$login.'&apiKey='.$apikey.'&format='.$format;

  //fetch url
  $response = file_get_contents($bitly);
//for json formating
  if(strtolower($format) == 'json')
  {
    $json = @json_decode($response,true);
    echo $json['results'][$url]['shortUrl'];
  }
  else //for xml formatting
  {
    $xml = simplexml_load_string($response);
    echo 'http://bit.ly/'.$xml->results->nodeKeyVal->hash;
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T22:42:56.693

只要它应该是 url 并且如果有`http://`- 那么这个解决方案是最简单的：

```
$url = str_replace('http://', '', $url); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T22:43:38.957

更改以下行：

```
 echo $json['results'][$url]['shortUrl']; 
```

对于这个：

```
 echo substr( $json['results'][$url]['shortUrl'], 7); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-13T22:43:52.853

你想做一个 preg_replace。

```
$variable = preg_replace( '/http:\/\//', '', $variable ); (this is untested, so you might also need to escape the : character ). 
```

您也可以使用 $variable = str_replace('http://', '', $variable ) 达到相同的效果

# php - 打破大规模 MySQL 更新

> ID：12415822
> 
> 赞同：0
> 
> 时间：2012-09-13T22:42:17.660
> 
> 标签：php, mysql, codeigniter, bigdata

现在我的 CodeIgniter 模型中有这样的东西：

```
<?php 
$array = array(...over 29k IDs...);
$update = array();
foreach ($array as $line) {
   $update[] = array('id' => $line, 'spintax' => $this->SpinTax($string));
   ### $this->SpinTax parses the spintax from a string I have. It has to be generated for each row.
}
$this->db->update_batch('table', $update, 'id');
?> 
```

`504 Gateway Time-out`前 20k 条记录更新得很好，但在它完成之前我得到了一个。

我尝试将 nginx 服务器超时增加到一些荒谬的值（比如 10 分钟），但我仍然收到错误消息。

我该怎么做才能使它**不**超时。我已经阅读了许多答案和如何对更新进行分段，但我继续收到服务器超时。一个`PHP`或 CodeIgniter 解决方案会非常好，我需要将此代码部署到可能未使用的多个服务器`nginx`（Apache 中的类似错误）。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T22:59:28.703

您可能需要通过命令行和`set_time_limit(0)`. 如果您使用的是 codeigniter，请查看如何通过用户指南运行命令行。[http://codeigniter.com/user_guide/general/cli.html](http://codeigniter.com/user_guide/general/cli.html)

现在，在你这样做之前，你提到你正在使用数组块。如果您从数据库中获取所有值，则无需使用`array_chunk`. 例如，只需设置一个 get 变量。/your/url?offset=1000，完成后，重定向到同一件事，但使用 2000，依此类推，直到完成。

不是最好的或最干净的，但可能会完成。

# php - PHP Curl 下载问题

> ID：12415823
> 
> 赞同：0
> 
> 时间：2012-09-13T22:42:24.727
> 
> 标签：php, arrays, curl

我有一个函数，它将一个 url 数组作为输入。我已经验证了 url 是正确的，我可以完美地循环它们。我还使用 curl_getinfo 验证了 curl 正在下载正确的页面。但是，每个页面的 curl (html) 输出都是相同的。这是我的代码：

```
 $urls = array();
     $urls = getpages($mainpage);
     print_r($urls);
     foreach($urls as $link) {
         echo $link. '<br><br><br>';
         $circdl = my_curl($link);
         echo $circdl. '<br><br><br>';
         $circdl = NULL;
     } 
```

url的输出数组如下：

```
 Array ( [0] => http://www.site.com/savings/viewcircular?promotionId=81498&sneakpeek=&currentPageNumber=1 [1] => http://www.site.com/savings/viewcircular?promotionId=81498&sneakpeek=&currentPageNumber=2 
```

$link 也像 curl_getinfo 中的 curl 一样正确输出。我通过这个循环运行了另一个 url 数组，它们工作正常，但我怀疑这里的问题是 url 的格式（与号）。我真的很难过为什么这些页面没有按预期下载。

这是 my_curl 函数：

```
 function my_curl($url)
 {
$timeout=10;
$error_report=TRUE;
$curl = curl_init();
$cookiepath = drupal_get_path('module','mymodule'). '/cookies.txt';

// HEADERS AND OPTIONS APPEAR TO BE A FIREFOX BROWSER REFERRED BY GOOGLE
$header[] = "Accept: text/xml,application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5";
$header[] = "Cache-Control: max-age=0";
$header[] = "Connection: keep-alive";
$header[] = "Keep-Alive: 300";
$header[] = "Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7";
$header[] = "Accept-Language: en-us,en;q=0.5";
$header[] = "Pragma: "; // BROWSERS USUALLY LEAVE BLANK

// SET THE CURL OPTIONS - SEE http://php.net/manual/en/function.curl-setopt.php
curl_setopt( $curl, CURLOPT_URL,            $url  );
curl_setopt( $curl, CURLOPT_USERAGENT,      'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.6) Gecko/20091201 Firefox/3.5.6'  );
curl_setopt( $curl, CURLOPT_HTTPHEADER,     $header  );
curl_setopt( $curl, CURLOPT_REFERER,        'http://www.google.com'  );
curl_setopt( $curl, CURLOPT_ENCODING,       'gzip,deflate'  );
curl_setopt( $curl, CURLOPT_AUTOREFERER,    TRUE  );
curl_setopt( $curl, CURLOPT_RETURNTRANSFER, TRUE  );
curl_setopt( $curl, CURLOPT_FOLLOWLOCATION, TRUE  );
curl_setopt( $curl, CURLOPT_COOKIEFILE,     $cookiepath );
curl_setopt( $curl, CURLOPT_COOKIEJAR,      $cookiepath );
curl_setopt( $curl, CURLOPT_TIMEOUT,        $timeout  );

// RUN THE CURL REQUEST AND GET THE RESULTS
$htm = curl_exec($curl);

// Check for page request

//$info = curl_getinfo($curl);
//echo 'Took ' . $info['total_time'] . ' seconds to send a request to ' . $info['url'];

// ON FAILURE HANDLE ERROR MESSAGE
if ($htm === FALSE)
{
    if ($error_report)
    {
        $err = curl_errno($curl);
        $inf = curl_getinfo($curl);
        echo "CURL FAIL: $url TIMEOUT=$timeout, CURL_ERRNO=$err";
        var_dump($inf);
    }
    curl_close($curl);
    return FALSE;
}

// ON SUCCESS RETURN XML / HTML STRING
curl_close($curl);
return $htm; 
```

}

非常有趣的是，如果我运行这个：

```
 echo my_curl('http://www.site.com/savings/viewcircular?promotionId=81498&sneakpeek=&currentPageNumber=2') 
```

输出是正确的!!??:(

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T23:31:29.680

我发现问题在于将 url 的编码传递给我的函数。我错误地剥离了编码并将“人类可读”的结尾附加到 url。这导致页面无法被主机正确识别。我解决这个问题的方法是忽略我更好的判断，不理会编码。现在传递数组时，页面正在正确加载。感谢所有看过这个的人。真的把我难住了！

这是我的代码片段以供解释：

```
 function getpages($url) {
 global $host;
 $circdl = my_curl($url);
 $circqp = htmlqp($circdl,'body');
 //Extract last page number
 $lastpagenumber = $circqp->branch()->find('li[class="last-page"]')->text();
 $lastpagenumberurl = $circqp->branch()->find('li[class="last-page"]')->children('a')->attr('href');  
 //Extract page link root
 $pagelinkroot = substr_replace($lastpagenumberurl,"",-2);
 $currentpage = "=";               
 $lpn = intval($lastpagenumber);

 //Move through the remaining pages
 $pagelinks = array();
   for ($i = 1; $i <= $lpn; ++$i) {
   $pagelinks[] = join(array($host,$pagelinkroot,$currentpage,$i));
   }
   return $pagelinks;
 } 
```

Substr_replace 用于简化编码。我将其从 20 更改为 2 以仅剥离末端，然后通过链接将其附加到循环之后。

# ios - 新的更大的 iPhone 5 显示屏是否需要单独的视图控制器？

> ID：12415824
> 
> 赞同：1
> 
> 时间：2012-09-13T22:42:26.577
> 
> 标签：ios, xcode, uiviewcontroller, iphone-5

我有一个非常笼统的问题 - 但我在任何地方都找不到直接的答案！如果有人知道，请赐教！

我想知道使用新 iPhone 5 尺寸提交到 App Store 的计划。我假设如果我们不希望它们在新设备上被装箱，我们都需要为我们所有的应用程序制作新的图形和单独的视图？所以我的问题是，我是否要制作一个仅针对此设备的新视图控制器？如果是这样 - 我应该在这段代码中添加什么来实现这一点？（如你所见，我用 iPad 视图完成了它）

AppDelegate.mm

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        self.viewController = [[ViewController alloc] initWithNibName:@"ViewController_iPhone" bundle:nil];
    } else {
        self.viewController = [[ViewController alloc] initWithNibName:@"ViewController_iPad" bundle:nil];
    }
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

期待发现！谢谢！肖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:45:04.837

你不必重做所有事情。那会很疯狂。您只需要获取屏幕或主窗口的大小，而不是硬编码 480 点高度。并将自动调整大小的蒙版设置为具有灵活的高度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:33:46.243

我有一个已经在应用商店中的应用，我想更新它以获得新的屏幕分辨率。 **简单的答案是我在 Retina 4 英寸启动图像中添加了一个空白屏幕截图。** 完成此操作后，应用程序会自行调整大小。我的应用程序是带有文本和照片条目的所有表格和 Web 视图，因此它的大小调整得很漂亮。

在发现这一点之前我确实尝试了几件事，但是一旦我发现启动图像是我的应用程序没有全屏加载的原因，我就删除了所有其他更改。

# c# - 使用洋葱架构使用多个 API 和 WebServices

> ID：12415826
> 
> 赞同：4
> 
> 时间：2012-09-13T22:42:32.737
> 
> 标签：c#, design-patterns, domain-driven-design, onion-architecture

我目前正在使用洋葱架构设置 Visual Studio 解决方案。我对如何构建解决方案有很好的理解，但我遇到了一些麻烦。我的解决方案是使用多个 API。这些 API 使用 WCF、Soap Web 服务和 RESTSharp 用于 REST 服务。我不确定如何构建它。

最大的困惑在于 REST 服务，因为它不仅使用 RESTSharp，还使用一些用于序列化的 POCO 类。我也有：

```
ApiResult<T> where T is any of the POCO classes. 
```

我的第一个想法是创建 Infrastructure.RestSharp，我将在其中实现所有返回 ApiResult 的接口，但问题是我将这些 POCO 类和 ApiResult 放在哪里？由于接口正在使用它们，它们将不得不进入核心的某个地方，但是哪里是放置它们的好地方呢？

WCF 和肥皂服务呢？我会创建一个 Infrastructure.WebServices 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T16:06:13.147

也许这会有所帮助。这是我用于使用 Onion Architecture 设置 Visual Studio 项目的图表。箭头显示哪些项目引用了其他项目。蓝框是我创建的项目。橙色项目是第 3 方项目或 .NET API。

*   UnitTests、Web (UI) 以及依赖注入和数据访问层项目都位于洋葱的外层。
*   所有参考都向内指向核心（外部层除外，它可以指向侧面）。
*   所有 API 都通过外层项目访问。

![洋葱架构图](../Images/b0e50adca88be5be5a0e5620ab2ed2d6.png)

# xml - XSL 1.0 带有空标签的多级分组

> ID：12415829
> 
> 赞同：3
> 
> 时间：2012-09-13T22:42:45.100
> 
> 标签：xml, xslt, xslt-1.0

这是我第一次在这里发帖，所以对于篇幅和任何格式问题或缺乏信息，我提前道歉。我已经解决这个问题几天了，我已经广泛研究了我的问题，但还没有找到解决方案，所以我希望这里有人可以帮助我。这是一个与 xslt 相关的问题，几个月前我才开始在 xslt 中编码，所以我没有那么有经验。

基本上，我有一个输入 XML，其中可能包含重复记录和空标签，我需要将它们重新组织成一个 javascript 关联数组，以便能够在客户端有效地操作和显示这些值。

**我的问题是：即使使用的字段标签为空，是否有办法进行多级分组。如果没有，有没有办法通过用关键字替换空标签然后应用我的模板的其余部分来编辑 xsl 中的 xml？**

要了解我的问题，这里有详细信息。这是我的输入 XML

```
<cds>
    <sections>
        <section name="myteam_CurrentAgeCompleteSection" link="false">
            <detail name="">
                <record>
                    <field name="AGERANGEID">30-39</field>
                    <field name="NUMOFCOUNTAGE">1</field>
                    <field name="ORGUNITID">00001001</field>
                    <field name="PARENTORGUNITID">00000100</field>
                    <field name="ORGUNITNAME">Human Resources</field>
                </record>
                <record>
                    <field name="AGERANGEID">&gt;=70</field>
                    <field name="NUMOFCOUNTAGE">5</field>
                    <field name="ORGUNITID">00001001</field>
                    <field name="PARENTORGUNITID">00000100</field>
                    <field name="ORGUNITNAME">Human Resources</field>
                </record>
            </detail>
        </section>
        <section name="myteam_CurrentGenderCompleteSection" link="false">
            <detail name="">
                <record>
                    <field name="PARENTORGUNITID">00000100</field>
                    <field name="ORGUNITID">00001001</field>
                    <field name="ORGUNITNAME">Human Resources</field>
                    <field name="NUMOFGENDERCOUNT">5</field>
                    <field name="GENDER">2</field>
                </record>
                <record>
                    <field name="PARENTORGUNITID">00000100</field>
                    <field name="ORGUNITID">00001001</field>
                    <field name="ORGUNITNAME">Human Resources</field>
                    <field name="NUMOFGENDERCOUNT">7</field>
                    <field name="GENDER">1</field>
                </record>
            </detail>
        </section>
        <section name="myteam_CurrentRaceCompleteSection" link="false">
            <detail name="">
                <record>
                    <field name="ORGUNITNAME">Human Resources</field>
                    <field name="PARENTORGUNITID">00000100</field>
                    <field name="ORGUNITID">00001001</field>
                    <field name="NUMOFRACE">10.0</field>
                    <field name="RACENAME" />
                </record>
                <record>
                    <field name="ORGUNITNAME">Human Resources</field>
                    <field name="PARENTORGUNITID">00000100</field>
                    <field name="ORGUNITID">00001001</field>
                    <field name="NUMOFRACE">1</field>
                    <field name="RACENAME">Asian</field>
                </record>
                <record>
                    <field name="ORGUNITNAME">Human Resources</field>
                    <field name="PARENTORGUNITID">00000100</field>
                    <field name="ORGUNITID">00001001</field>
                    <field name="NUMOFRACE">1</field>
                    <field name="RACENAME">American Indian</field>
                </record>
            </detail>
        </section>
        <section name="myteam_ChildAgeColumnSection" link="false">
            <detail name="">
                <record>
                    <field name="AGERANGEID">40-49</field>
                    <field name="NUMOFCOUNTAGE">1</field>
                    <field name="ORGUNITID">50000013</field>
                    <field name="PARENTORGUNITID">00001001</field>
                    <field name="ORGUNITNAME">IT computer center (D)</field>
                </record>
                <record>
                    <field name="AGERANGEID">50-59</field>
                    <field name="NUMOFCOUNTAGE">2</field>
                    <field name="ORGUNITID">50000013</field>
                    <field name="PARENTORGUNITID">00001001</field>
                    <field name="ORGUNITNAME">IT computer center (D)</field>
                </record>
                <record>
                    <field name="AGERANGEID">&gt;=70</field>
                    <field name="NUMOFCOUNTAGE">5</field>
                    <field name="ORGUNITID">50000013</field>
                    <field name="PARENTORGUNITID">00001001</field>
                    <field name="ORGUNITNAME">IT computer center (D)</field>
                </record>
            </detail>
        </section>

        <section name="myteam_ChildGenderColumnSection" link="false">
            <detail name="">
                <record>
                    <field name="PARENTORGUNITID">00001001</field>
                    <field name="ORGUNITID">50000013</field>
                    <field name="ORGUNITNAME">IT computer center (D)</field>
                    <field name="NUMOFGENDERCOUNT">4</field>
                    <field name="GENDER">2</field>
                </record>
                <record>
                    <field name="PARENTORGUNITID">00001001</field>
                    <field name="ORGUNITID">50000147</field>
                    <field name="ORGUNITNAME">Personnel Administration (D)</field>
                    <field name="NUMOFGENDERCOUNT">3</field>
                    <field name="GENDER">1</field>
                </record>
                <record>
                    <field name="PARENTORGUNITID">00001001</field>
                    <field name="ORGUNITID">50000013</field>
                    <field name="ORGUNITNAME">IT computer center (D)</field>
                    <field name="NUMOFGENDERCOUNT">4</field>
                    <field name="GENDER">1</field>
                </record>
            </detail>
        </section>
        <section name="myteam_ChildGenderColumnSection" link="false">
            <detail name="">
                <record>
                    <field name="PARENTORGUNITID">00001001</field>
                    <field name="ORGUNITID">50000013</field>
                    <field name="ORGUNITNAME">IT computer center (D)</field>
                    <field name="NUMOFGENDERCOUNT">4</field>
                    <field name="GENDER">2</field>
                </record>
                <record>
                    <field name="PARENTORGUNITID">00001001</field>
                    <field name="ORGUNITID">50000147</field>
                    <field name="ORGUNITNAME">Personnel Administration (D)</field>
                    <field name="NUMOFGENDERCOUNT">3</field>
                    <field name="GENDER">1</field>
                </record>
                <record>
                    <field name="PARENTORGUNITID">00001001</field>
                    <field name="ORGUNITID">50000013</field>
                    <field name="ORGUNITNAME">IT computer center (D)</field>
                    <field name="NUMOFGENDERCOUNT">4</field>
                    <field name="GENDER">1</field>
                </record>
            </detail>
        </section>
        <section name="myteam_ChildGenderColumnSection" link="false">
            <detail name="">
                <record>
                    <field name="PARENTORGUNITID">00001001</field>
                    <field name="ORGUNITID">50000013</field>
                    <field name="ORGUNITNAME">IT computer center (D)</field>
                    <field name="NUMOFGENDERCOUNT">4</field>
                    <field name="GENDER">2</field>
                </record>
                <record>
                    <field name="PARENTORGUNITID">00001001</field>
                    <field name="ORGUNITID">50000147</field>
                    <field name="ORGUNITNAME">Personnel Administration (D)</field>
                    <field name="NUMOFGENDERCOUNT">3</field>
                    <field name="GENDER">1</field>
                </record>
            </detail>
        </section>
    </sections>
</cds> 
```

上网查了一下，发现处理多级分组的最好方法是使用xsl:key和generate-id()。效果很好，数据完全符合我的要求，所以我的 xsl 流程是正确的。但不幸的是，如果 xsl:key 中使用的字段是一个空标签，当我使用 concat() 进入多级分组时，它会失败。

```
<!-- Start external variables -->   
<!-- Field names -->
<xsl:variable name="ageFieldName" select="'AGERANGEID'" />
<xsl:variable name="genderFieldName" select="'GENDER'" />
<xsl:variable name="raceFieldName" select="'RACENAME'" />
<xsl:variable name="ouIdFieldName" select="'ORGUNITID'" />
<xsl:variable name="ouNameFieldName" select="'ORGUNITNAME'" />

<!-- Keys -->   
<xsl:key use="field[@name='AGERANGEID']" name="AGERANGEID" match="detail/record" />
<xsl:key use="concat(field[@name='AGERANGEID'],'|', field[@name='ORGUNITID'])" name="AGERANGEID_merge" match="detail/record" />
<xsl:key use="field[@name='GENDER']" name="GENDER" match="detail/record" />
<xsl:key use="concat(field[@name='GENDER'],'|', field[@name='ORGUNITID'])" name="GENDER_merge" match="detail/record" />
<xsl:key use="field[@name='RACENAME']" name="RACENAME" match="detail/record" />
<xsl:key use="concat(field[@name='RACENAME'],'|', field[@name='ORGUNITID'])" name="RACENAME_merge" match="detail/record" />

<xsl:key use="field[@name='ORGUNITID']" name="ORGUNITID" match="detail/record" />

<xsl:template match="/">
    var analyticsMap = {<xsl:call-template name="buildAnalyticsTable" />};
</xsl:template>

<xsl:template name="buildAnalyticsTable">       
    <!-- Age -->
    "<xsl:value-of select="$ageFieldName"/>" : {
    <xsl:apply-templates mode="buildAnalyticsTableRangeLevel" select="//detail/record[generate-id()=generate-id(key($ageFieldName, field[@name=$ageFieldName]))]">
        <xsl:with-param name="keyName" select="$ageFieldName"/>
        <xsl:with-param name="countField" select="'NUMOFCOUNTAGE'"/>     
        <xsl:with-param name="label" select="'Age Range'" />
        <xsl:with-param name="isGender" select="'false'" />
    </xsl:apply-templates>
    },

    <!-- Gender -->
    "<xsl:value-of select="$genderFieldName"/>" : {
    <xsl:apply-templates mode="buildAnalyticsTableRangeLevel" select="//detail/record[generate-id()=generate-id(key($genderFieldName, field[@name=$genderFieldName]))]">
        <xsl:with-param name="keyName" select="$genderFieldName"/>
        <xsl:with-param name="countField" select="'NUMOFGENDERCOUNT'"/>  
        <xsl:with-param name="label" select="'Gender'" />
        <xsl:with-param name="isGender" select="'true'" />
    </xsl:apply-templates>
    },

    <!-- Race -->
    "<xsl:value-of select="$raceFieldName"/>" : {
    <xsl:apply-templates mode="buildAnalyticsTableRangeLevel" select="//detail/record[generate-id()=generate-id(key($raceFieldName, field[@name=$raceFieldName]))]">
        <xsl:with-param name="keyName" select="$raceFieldName"/>
        <xsl:with-param name="countField" select="'NUMOFRACE'"/>     
        <xsl:with-param name="label" select="'Race'" />
        <xsl:with-param name="isGender" select="'true'" />
    </xsl:apply-templates>
    }

</xsl:template>

<xsl:template match="detail/record" mode="buildAnalyticsTableRangeLevel">
    <xsl:param name="keyName" />
    <xsl:param name="countField" /> 
    <xsl:param name="label" />
    <xsl:param name="isGender" />
    <xsl:variable name="value" >
        <xsl:call-template name="testForUnknown">
            <xsl:with-param name="name" select="field[@name=$keyName]"/>
        </xsl:call-template>
    </xsl:variable>
    <xsl:variable name="name">
        <xsl:call-template name="testForGender">
            <xsl:with-param name="isGender" select="$isGender"/>
            <xsl:with-param name="name" select="$value"/>
        </xsl:call-template>
    </xsl:variable>

    "<xsl:value-of select="$value"/>" : {       
    "analyticsLabel" : "<xsl:value-of select="$label"/>",
    "analyticsName" : "<xsl:value-of select="$name"/>",
    <xsl:apply-templates mode="buildAnalyticsTableCountLevel" select="key($keyName, field[@name=$keyName])[generate-id()=generate-id(key(concat($keyName, '_merge'), concat(field[@name=$keyName],'|', field[@name=$ouIdFieldName])))]">
        <xsl:with-param name="countField" select="$countField"/>
    </xsl:apply-templates>
    },          
</xsl:template>

<xsl:template match="detail/record" mode="buildAnalyticsTableCountLevel">
    <xsl:param name="countField" />
    "<xsl:value-of select="field[@name=$ouIdFieldName]"/>" : {
    "analyticsOUname" : "<xsl:value-of select="field[@name=$ouNameFieldName]"/>",
    "analyticsValue" : "<xsl:value-of select="field[@name=$countField]"/>"
    },
</xsl:template>    

<xsl:template name="testForUnknown">
    <xsl:param name="name" /> 
    <xsl:choose>        
        <xsl:when test="string-length($name) = 0">
            <xsl:value-of select="'Unknown'"/>
        </xsl:when>
        <xsl:otherwise>
            <xsl:value-of select="$name" />
        </xsl:otherwise>
    </xsl:choose>
</xsl:template>

<xsl:template name="testForGender">
    <xsl:param name="isGender" />
    <xsl:param name="name" /> 
    <xsl:choose>
        <xsl:when test="$isGender = 'true' and $name = 1">
            <xsl:value-of select="'male'" />            
        </xsl:when> 
        <xsl:when test="$isGender = 'true' and $name = 2">
            <xsl:value-of select="'female'" />      
        </xsl:when>
        <xsl:otherwise>
            <xsl:value-of select="$name" />
        </xsl:otherwise>
    </xsl:choose>
</xsl:template> 
```

这是我的转换的输出

```
 var analyticsMap = {        

    "AGERANGEID" : {

    "30-39" : {     
    "analyticsLabel" : "Age Range",
    "analyticsName" : "30-39",

    "00001001" : {
    "analyticsOUname" : "Human Resources",
    "analyticsValue" : "1"
    },

    },          

    "&gt;=70" : {       
    "analyticsLabel" : "Age Range",
    "analyticsName" : "&gt;=70",

    "00001001" : {
    "analyticsOUname" : "Human Resources",
    "analyticsValue" : "5"
    },

    "50000013" : {
    "analyticsOUname" : "IT computer center (D)",
    "analyticsValue" : "5"
    },

    },          

    "40-49" : {     
    "analyticsLabel" : "Age Range",
    "analyticsName" : "40-49",

    "50000013" : {
    "analyticsOUname" : "IT computer center (D)",
    "analyticsValue" : "1"
    },

    },          

    "50-59" : {     
    "analyticsLabel" : "Age Range",
    "analyticsName" : "50-59",

    "50000013" : {
    "analyticsOUname" : "IT computer center (D)",
    "analyticsValue" : "2"
    },

    },          

    },

    "GENDER" : {

    "2" : {     
    "analyticsLabel" : "Gender",
    "analyticsName" : "female",

    "00001001" : {
    "analyticsOUname" : "Human Resources",
    "analyticsValue" : "5"
    },

    "50000013" : {
    "analyticsOUname" : "IT computer center (D)",
    "analyticsValue" : "4"
    },

    },          

    "1" : {     
    "analyticsLabel" : "Gender",
    "analyticsName" : "male",

    "00001001" : {
    "analyticsOUname" : "Human Resources",
    "analyticsValue" : "7"
    },

    "50000147" : {
    "analyticsOUname" : "Personnel Administration (D)",
    "analyticsValue" : "3"
    },

    "50000013" : {
    "analyticsOUname" : "IT computer center (D)",
    "analyticsValue" : "4"
    },

    },          

    },

    "RACENAME" : {

    "Unknown" : {       
    "analyticsLabel" : "Race",
    "analyticsName" : "Unknown",

    },          

    "Asian" : {     
    "analyticsLabel" : "Race",
    "analyticsName" : "Asian",

    "00001001" : {
    "analyticsOUname" : "Human Resources",
    "analyticsValue" : "1"
    },

    },          

    "American Indian" : {       
    "analyticsLabel" : "Race",
    "analyticsName" : "American Indian",

    "00001001" : {
    "analyticsOUname" : "Human Resources",
    "analyticsValue" : "1"
    },

    },          

    }

}; 
```

正如你所看到的，在 Race->Unknown 部分，它并没有通过应用模板模式“buildAnalyticsTableCountLevel”来完成它，所以我从来没有得到 ORGUNITID 信息，这对我正在做的事情非常重要。

不幸的是，我无法编辑传入的 xml，因为这是在各种项目中使用的更大框架的一部分，我无法更改它。所以我必须用我得到的东西工作。

我尝试在 xsl:key 中使用 string() 方法，但这让一切变得更糟。任何提示或帮助表示赞赏。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T03:32:08.883

**像这样更改样式表的开头**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:my="my:my">
 <xsl:output method="text"/>

 <my:unknown>Unknown</my:unknown> 
```

并将其中一个`key`定义更改为：

```
 <xsl:key name="RACENAME_merge" match="detail/record" 
  use="concat((field[@name='RACENAME']
              |document('')/*/my:unknown[not(field[@name='RACENAME'])]),
              '|', field[@name='ORGUNITID'])"  /> 
```

最后，将其中一个更改`xsl:apply-templaes`为：

```
<xsl:apply-templates mode="buildAnalyticsTableCountLevel"
select="key($keyName, field[@name=$keyName])
          [generate-id()=generate-id(key(concat($keyName, '_merge'),
          concat((field[@name=$keyName]
                 |document('')/*/my:unknown[not(current()/field[@name='RACENAME'])]),
                 '|', field[@name=$ouIdFieldName])))]">
    <xsl:with-param name="countField" select="$countField"/>
</xsl:apply-templates> 
```

**这些更改后的完整代码变为**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:my="my:my">
 <xsl:output method="text"/>

 <my:unknown>Unknown</my:unknown>

 <!-- Start external variables -->
 <!-- Field names -->
 <xsl:variable name="ageFieldName" select="'AGERANGEID'" />
 <xsl:variable name="genderFieldName" select="'GENDER'" />
 <xsl:variable name="raceFieldName" select="'RACENAME'" />
 <xsl:variable name="ouIdFieldName" select="'ORGUNITID'" />
 <xsl:variable name="ouNameFieldName" select="'ORGUNITNAME'" />

 <!-- Keys -->
 <xsl:key use="field[@name='AGERANGEID']" name="AGERANGEID" match="detail/record" />
 <xsl:key use="concat(field[@name='AGERANGEID'],'|', field[@name='ORGUNITID'])" name="AGERANGEID_merge" match="detail/record" />
 <xsl:key use="field[@name='GENDER']" name="GENDER" match="detail/record" />
 <xsl:key use="concat(field[@name='GENDER'],'|', field[@name='ORGUNITID'])" name="GENDER_merge" match="detail/record" />
 <xsl:key use="field[@name='RACENAME']" name="RACENAME" match="detail/record" />
 <xsl:key use="concat((field[@name='RACENAME']
                     |document('')/*/my:unknown[not(current()/field[@name='RACENAME'])]),
                     '|', field[@name='ORGUNITID'])"
  name="RACENAME_merge" match="detail/record" />

 <xsl:key use="field[@name='ORGUNITID']" name="ORGUNITID" match="detail/record" />

 <xsl:template match="/">
    var analyticsMap = {<xsl:call-template name="buildAnalyticsTable" />};
 </xsl:template>

 <xsl:template name="buildAnalyticsTable">
    <!-- Age -->
    "<xsl:value-of select="$ageFieldName"/>" : {
    <xsl:apply-templates mode="buildAnalyticsTableRangeLevel" select="//detail/record[generate-id()=generate-id(key($ageFieldName, field[@name=$ageFieldName]))]">
        <xsl:with-param name="keyName" select="$ageFieldName"/>
        <xsl:with-param name="countField" select="'NUMOFCOUNTAGE'"/>
        <xsl:with-param name="label" select="'Age Range'" />
        <xsl:with-param name="isGender" select="'false'" />
    </xsl:apply-templates>
    },

    <!-- Gender -->
    "<xsl:value-of select="$genderFieldName"/>" : {
    <xsl:apply-templates mode="buildAnalyticsTableRangeLevel" select="//detail/record[generate-id()=generate-id(key($genderFieldName, field[@name=$genderFieldName]))]">
        <xsl:with-param name="keyName" select="$genderFieldName"/>
        <xsl:with-param name="countField" select="'NUMOFGENDERCOUNT'"/>
        <xsl:with-param name="label" select="'Gender'" />
        <xsl:with-param name="isGender" select="'true'" />
    </xsl:apply-templates>
    },

    <!-- Race -->
    "<xsl:value-of select="$raceFieldName"/>" : {
    <xsl:apply-templates mode="buildAnalyticsTableRangeLevel" select="//detail/record[generate-id()=generate-id(key($raceFieldName, field[@name=$raceFieldName]))]">
        <xsl:with-param name="keyName" select="$raceFieldName"/>
        <xsl:with-param name="countField" select="'NUMOFRACE'"/>
        <xsl:with-param name="label" select="'Race'" />
        <xsl:with-param name="isGender" select="'true'" />
    </xsl:apply-templates>
    }

 </xsl:template>

 <xsl:template match="detail/record" mode="buildAnalyticsTableRangeLevel">
    <xsl:param name="keyName" />
    <xsl:param name="countField" />
    <xsl:param name="label" />
    <xsl:param name="isGender" />
    <xsl:variable name="value" >
        <xsl:call-template name="testForUnknown">
            <xsl:with-param name="name" select="field[@name=$keyName]"/>
        </xsl:call-template>
    </xsl:variable>
    <xsl:variable name="name">
        <xsl:call-template name="testForGender">
            <xsl:with-param name="isGender" select="$isGender"/>
            <xsl:with-param name="name" select="$value"/>
        </xsl:call-template>
    </xsl:variable>

    "<xsl:value-of select="$value"/>" : {
    "analyticsLabel" : "<xsl:value-of select="$label"/>",
    "analyticsName" : "<xsl:value-of select="$name"/>",
    <xsl:apply-templates mode="buildAnalyticsTableCountLevel"
    select="key($keyName, field[@name=$keyName])
              [generate-id()=generate-id(key(concat($keyName, '_merge'),
              concat((field[@name=$keyName]
                     |document('')/*/my:unknown[not(current()/field[@name='RACENAME'])]),
                     '|', field[@name=$ouIdFieldName])))]">
        <xsl:with-param name="countField" select="$countField"/>
    </xsl:apply-templates>
    },
 </xsl:template>

 <xsl:template match="detail/record" mode="buildAnalyticsTableCountLevel">
    <xsl:param name="countField" />
    "<xsl:value-of select="field[@name=$ouIdFieldName]"/>" : {
    "analyticsOUname" : "<xsl:value-of select="field[@name=$ouNameFieldName]"/>",
    "analyticsValue" : "<xsl:value-of select="field[@name=$countField]"/>"
    },
 </xsl:template>

 <xsl:template name="testForUnknown">
    <xsl:param name="name" />
    <xsl:choose>
        <xsl:when test="string-length($name) = 0">
            <xsl:value-of select="'Unknown'"/>
        </xsl:when>
        <xsl:otherwise>
            <xsl:value-of select="$name" />
        </xsl:otherwise>
    </xsl:choose>
 </xsl:template>

 <xsl:template name="testForGender">
    <xsl:param name="isGender" />
    <xsl:param name="name" />
    <xsl:choose>
        <xsl:when test="$isGender = 'true' and $name = 1">
            <xsl:value-of select="'male'" />
        </xsl:when>
        <xsl:when test="$isGender = 'true' and $name = 2">
            <xsl:value-of select="'female'" />
        </xsl:when>
        <xsl:otherwise>
            <xsl:value-of select="$name" />
        </xsl:otherwise>
    </xsl:choose>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<cds>
    <sections>
        <section name="myteam_CurrentAgeCompleteSection" link="false">
            <detail name="">
                <record>
                    <field name="AGERANGEID">30-39</field>
                    <field name="NUMOFCOUNTAGE">1</field>
                    <field name="ORGUNITID">00001001</field>
                    <field name="PARENTORGUNITID">00000100</field>
                    <field name="ORGUNITNAME">Human Resources</field>
                </record>
                <record>
                    <field name="AGERANGEID">&gt;=70</field>
                    <field name="NUMOFCOUNTAGE">5</field>
                    <field name="ORGUNITID">00001001</field>
                    <field name="PARENTORGUNITID">00000100</field>
                    <field name="ORGUNITNAME">Human Resources</field>
                </record>
            </detail>
        </section>
        <section name="myteam_CurrentGenderCompleteSection" link="false">
            <detail name="">
                <record>
                    <field name="PARENTORGUNITID">00000100</field>
                    <field name="ORGUNITID">00001001</field>
                    <field name="ORGUNITNAME">Human Resources</field>
                    <field name="NUMOFGENDERCOUNT">5</field>
                    <field name="GENDER">2</field>
                </record>
                <record>
                    <field name="PARENTORGUNITID">00000100</field>
                    <field name="ORGUNITID">00001001</field>
                    <field name="ORGUNITNAME">Human Resources</field>
                    <field name="NUMOFGENDERCOUNT">7</field>
                    <field name="GENDER">1</field>
                </record>
            </detail>
        </section>
        <section name="myteam_CurrentRaceCompleteSection" link="false">
            <detail name="">
                <record>
                    <field name="ORGUNITNAME">Human Resources</field>
                    <field name="PARENTORGUNITID">00000100</field>
                    <field name="ORGUNITID">00001001</field>
                    <field name="NUMOFRACE">10.0</field>
                    <field name="RACENAME" />
                </record>
                <record>
                    <field name="ORGUNITNAME">Human Resources</field>
                    <field name="PARENTORGUNITID">00000100</field>
                    <field name="ORGUNITID">00001001</field>
                    <field name="NUMOFRACE">1</field>
                    <field name="RACENAME">Asian</field>
                </record>
                <record>
                    <field name="ORGUNITNAME">Human Resources</field>
                    <field name="PARENTORGUNITID">00000100</field>
                    <field name="ORGUNITID">00001001</field>
                    <field name="NUMOFRACE">1</field>
                    <field name="RACENAME">American Indian</field>
                </record>
            </detail>
        </section>
        <section name="myteam_ChildAgeColumnSection" link="false">
            <detail name="">
                <record>
                    <field name="AGERANGEID">40-49</field>
                    <field name="NUMOFCOUNTAGE">1</field>
                    <field name="ORGUNITID">50000013</field>
                    <field name="PARENTORGUNITID">00001001</field>
                    <field name="ORGUNITNAME">IT computer center (D)</field>
                </record>
                <record>
                    <field name="AGERANGEID">50-59</field>
                    <field name="NUMOFCOUNTAGE">2</field>
                    <field name="ORGUNITID">50000013</field>
                    <field name="PARENTORGUNITID">00001001</field>
                    <field name="ORGUNITNAME">IT computer center (D)</field>
                </record>
                <record>
                    <field name="AGERANGEID">&gt;=70</field>
                    <field name="NUMOFCOUNTAGE">5</field>
                    <field name="ORGUNITID">50000013</field>
                    <field name="PARENTORGUNITID">00001001</field>
                    <field name="ORGUNITNAME">IT computer center (D)</field>
                </record>
            </detail>
        </section>
        <section name="myteam_ChildGenderColumnSection" link="false">
            <detail name="">
                <record>
                    <field name="PARENTORGUNITID">00001001</field>
                    <field name="ORGUNITID">50000013</field>
                    <field name="ORGUNITNAME">IT computer center (D)</field>
                    <field name="NUMOFGENDERCOUNT">4</field>
                    <field name="GENDER">2</field>
                </record>
                <record>
                    <field name="PARENTORGUNITID">00001001</field>
                    <field name="ORGUNITID">50000147</field>
                    <field name="ORGUNITNAME">Personnel Administration (D)</field>
                    <field name="NUMOFGENDERCOUNT">3</field>
                    <field name="GENDER">1</field>
                </record>
                <record>
                    <field name="PARENTORGUNITID">00001001</field>
                    <field name="ORGUNITID">50000013</field>
                    <field name="ORGUNITNAME">IT computer center (D)</field>
                    <field name="NUMOFGENDERCOUNT">4</field>
                    <field name="GENDER">1</field>
                </record>
            </detail>
        </section>
        <section name="myteam_ChildGenderColumnSection" link="false">
            <detail name="">
                <record>
                    <field name="PARENTORGUNITID">00001001</field>
                    <field name="ORGUNITID">50000013</field>
                    <field name="ORGUNITNAME">IT computer center (D)</field>
                    <field name="NUMOFGENDERCOUNT">4</field>
                    <field name="GENDER">2</field>
                </record>
                <record>
                    <field name="PARENTORGUNITID">00001001</field>
                    <field name="ORGUNITID">50000147</field>
                    <field name="ORGUNITNAME">Personnel Administration (D)</field>
                    <field name="NUMOFGENDERCOUNT">3</field>
                    <field name="GENDER">1</field>
                </record>
                <record>
                    <field name="PARENTORGUNITID">00001001</field>
                    <field name="ORGUNITID">50000013</field>
                    <field name="ORGUNITNAME">IT computer center (D)</field>
                    <field name="NUMOFGENDERCOUNT">4</field>
                    <field name="GENDER">1</field>
                </record>
            </detail>
        </section>
        <section name="myteam_ChildGenderColumnSection" link="false">
            <detail name="">
                <record>
                    <field name="PARENTORGUNITID">00001001</field>
                    <field name="ORGUNITID">50000013</field>
                    <field name="ORGUNITNAME">IT computer center (D)</field>
                    <field name="NUMOFGENDERCOUNT">4</field>
                    <field name="GENDER">2</field>
                </record>
                <record>
                    <field name="PARENTORGUNITID">00001001</field>
                    <field name="ORGUNITID">50000147</field>
                    <field name="ORGUNITNAME">Personnel Administration (D)</field>
                    <field name="NUMOFGENDERCOUNT">3</field>
                    <field name="GENDER">1</field>
                </record>
            </detail>
        </section>
    </sections>
</cds> 
```

**产生了想要的正确结果**：

```
 var analyticsMap = {

    "AGERANGEID" : {

    "30-39" : {
    "analyticsLabel" : "Age Range",
    "analyticsName" : "30-39",

    "00001001" : {
    "analyticsOUname" : "Human Resources",
    "analyticsValue" : "1"
    },

    },

    ">=70" : {
    "analyticsLabel" : "Age Range",
    "analyticsName" : ">=70",

    "00001001" : {
    "analyticsOUname" : "Human Resources",
    "analyticsValue" : "5"
    },

    "50000013" : {
    "analyticsOUname" : "IT computer center (D)",
    "analyticsValue" : "5"
    },

    },

    "40-49" : {
    "analyticsLabel" : "Age Range",
    "analyticsName" : "40-49",

    "50000013" : {
    "analyticsOUname" : "IT computer center (D)",
    "analyticsValue" : "1"
    },

    },

    "50-59" : {
    "analyticsLabel" : "Age Range",
    "analyticsName" : "50-59",

    "50000013" : {
    "analyticsOUname" : "IT computer center (D)",
    "analyticsValue" : "2"
    },

    },

    },

    "GENDER" : {

    "2" : {
    "analyticsLabel" : "Gender",
    "analyticsName" : "female",

    "00001001" : {
    "analyticsOUname" : "Human Resources",
    "analyticsValue" : "5"
    },

    "50000013" : {
    "analyticsOUname" : "IT computer center (D)",
    "analyticsValue" : "4"
    },

    },

    "1" : {
    "analyticsLabel" : "Gender",
    "analyticsName" : "male",

    "00001001" : {
    "analyticsOUname" : "Human Resources",
    "analyticsValue" : "7"
    },

    "50000147" : {
    "analyticsOUname" : "Personnel Administration (D)",
    "analyticsValue" : "3"
    },

    "50000013" : {
    "analyticsOUname" : "IT computer center (D)",
    "analyticsValue" : "4"
    },

    },

    },

    "RACENAME" : {

    "Unknown" : {
    "analyticsLabel" : "Race",
    "analyticsName" : "Unknown",

    "00001001" : {
    "analyticsOUname" : "Human Resources",
    "analyticsValue" : "10.0"
    },

    },

    "Asian" : {
    "analyticsLabel" : "Race",
    "analyticsName" : "Asian",

    "00001001" : {
    "analyticsOUname" : "Human Resources",
    "analyticsValue" : "1"
    },

    },

    "American Indian" : {
    "analyticsLabel" : "Race",
    "analyticsName" : "American Indian",

    "00001001" : {
    "analyticsOUname" : "Human Resources",
    "analyticsValue" : "1"
    },

    },

    }

 }; 
```

# sql-server-2008 - 如果用户输入“ABCD-EFGH”而不是“ABCDEFGH”，则 SQL 查询返回结果

> ID：12415832
> 
> 赞同：2
> 
> 时间：2012-09-13T22:43:03.323
> 
> 标签：sql-server-2008, tsql, search

我正在使用 SQL Server 2008 并且需要编写一个查询，该查询应该返回一条记录，说明`ABCDEFGH`用户是否输入了诸如`ABCD-EFGH`or之类的搜索字符串`ABDEFGH`（即类似的记录）。

我将如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T22:57:41.587

you need to employ some sort of editDistance algorithm i.e Levenshtein distance ,Jaro–Winkler distance to calculate the difference between 2 strings.

look at this thread for Levenshtein distance implemented as udf

[Levenshtein distance in T-SQL](https://stackoverflow.com/questions/560709/levenshtein-distance-in-t-sql)

you will use the UDF like this (just an example)

```
SELECT * FROM dbo.myTable
WHERE   dbo.editDistance(mycol,@SearchString)<2 
```

# sql - SSIS Excel 到 SQL 导入——文件的前 6 行包含标题相关信息

> ID：12415838
> 
> 赞同：3
> 
> 时间：2012-09-13T22:43:32.480
> 
> 标签：sql, sql-server, excel, ssis, bids

我正在将数千行（120K）的数据从 excel 文件导入 SQL Server。现在我正在尝试使用 SSIS 来完成此操作，但考虑到构建 excel 文件的 excel 模板似乎仅在第一行中不包含标题（大约前 6 行包含标题信息），我立即遇到了一些问题. 如何使用 BIDS 中的 SSIS 数据流任务处理导入来解决此问题？或者通过直接读取 Excel 文档中的每一行来读取行会更好吗？

我认为在这里会有所帮助的其他信息是

a）我正在尝试找到一种替代方法来从 Windows 客户端应用程序中读取每个 excel 行，然后将数据逐行写入数据库

b) 我的 excel 文档中有大约 4 个 excel 工作表

c）如果有一种方法可以从 excel 中逐行读取并有效地完成，而不是使用我不太熟悉的 Windows 客户端中的 SSIS。我将不胜感激有关如何的任何建议

d) 我的 excel 文档的特定标题位于第 7 行，我已将其最小化，因为该信息仅用于我的后端需求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T23:49:58.683

您可以将`OpenRowset`Excel 数据源（属性窗口，自定义属性部分中的 OpenRowset）的属性设置为类似于 的值`Sheet1$a6:j`，其中`a`包含数据的第一列，包含数据`j`的最后一列，`6`通常是数据之前带有标题的行。数据应该从下一行开始。您还可以通过设置类似于 的值来设置要读取的最后一行`Sheet1$a6:j20`。
请注意，第一个给定行有时被视为标题行，有时被视为包含数据的第一行。例如使用excel：
![excel数据](../Images/9b3c012bea3830fb010a58bab40ba655.png)
当我设置`OpenRowset`为`Sheet1$a3:j`第三行时被视为标题行：
![数据预览 1](../Images/c4b4e174f7843e1e642357598be23ec4.png)
但是当我设置`OpenRowset`为`Sheet1$a3:j8`这一行时被视为第一行数据：
![数据预览 2](../Images/646043bda8b7ab96326117dd6404aa80.png)
奇怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T05:59:41.483

尝试这个 ，

除了使用 SSIS，你可以在 sql server 中使用 OPENROWSET 函数，下面的查询逐步执行，因为我们需要在 sql server 中将所有必需的选项设置为正确，在使用 OPENROWSET 函数之前，

```
--execute step by step to process excel data into sqlserver using OPENROWSET/OPENDATASOURCE
sp_configure
sp_configure 'show advanced options',1
reconfigure
sp_configure 'Ad Hoc Distributed Queries',1
reconfigure
SELECT * INTO XLImport8 FROM OPENROWSET('Microsoft.Jet.OLEDB.4.0',
'Excel 8.0;Database=D:\StatusReport.xls', 'SELECT * FROM [Sheet1$]')
select * from XLImport8 
```

谢谢，

文卡特。

# .net - 使用 NuGet 包的通用代码分发？

> ID：12415839
> 
> 赞同：0
> 
> 时间：2012-09-13T22:43:36.530
> 
> 标签：.net, architecture, nuget, projects-and-solutions

鉴于分布式企业级系统设计和自托管 NuGet 存储库服务器，是否有人认为使用 NuGet 包作为为系统各层分发已编译 dll 的一种方法是个好主意？

该系统的架构将遵循严格的洋葱架构原则和设计......

优点：
- NuGet 版本控制非常棒。
- 与 CI 服务器（在我的例子中为 TeamCity）集成，这似乎是一个非常优雅的解决方案。
- 易于部署并供其他团队成员使用。
- 更新很容易（使用 TeamCity，更容易）
- 还有其他的吗？

缺点：
- 在进行故障排除时调试并跳转到代码中（尽管 NuGet 可以包含调试符号，只是还没弄清楚如何在 teamcity 中执行此操作。）
- 其他？

感谢您的反馈！

相关：[Git 子模块与 Nuget 包](https://stackoverflow.com/questions/12411929/git-submodules-vs-nuget-packages)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T05:00:51.010

您可以将 NuGet 包用于当前系统之外的任何依赖项。越稳定，越容易。

关于符号，请查看此链接以了解如何在本地设置您自己的 SymbolSource 服务器[http://www.xavierdecoster.com/setting-up-your-own-symbolsource-server-step-by-step](http://www.xavierdecoster.com/setting-up-your-own-symbolsource-server-step-by-step)。在 TeamCity 中，您只需确保将 -Symbols 标志传递到 NuGet.exe 命令行。

# matlab - 在matlab中比较两个不匹配的矩阵

> ID：12415848
> 
> 赞同：-1
> 
> 时间：2012-09-13T22:44:51.310
> 
> 标签：matlab

我有两个尺寸不匹配的矩阵。A 是 16x2 矩阵，B 是 17x2 矩阵。首先，我想在 A 和 B 的第一列中找到任何数字，例如 leq 90。假设 A 的第一列中有 8 个数字，B 的第一列有 6 个数字，即 leq 150。然后我希望能够将 A 与 B 进行比较，如果 A 中的任何数字在B（仅第一列）然后我想将该数字保留在 A 中，否则删除 A 中的整行。例如，如果 A 中第一列中的 8 个数字 = [25, 34, 45, 55, 66, 75, 84, 110] 和 B = [10, 30, 50, 70, 90, 110] 并且想找到任意两个在 +-5 范围内的数字一次得到结果 C= [34, 45, 66、84、110]。请注意，我需要 45 或 55 但不是两者都需要。C 当然是一个 2x1 矩阵，但第 2 列中的值与比较无关。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T23:41:28.353

让我们假设检查后的 A 和 B 矩阵如下所示（根据您的值）

```
A = [[25; 34; 45; 55; 66; 75; 84; 110] (1:8)']; % size 8 x 2  
B = [[10; 30; 50; 70; 90; 110] (1:6)']; % size 6 x 2 
```

定义容差并创建一个 8 x 6 矩阵，将 A 的第一列中的每个元素与 B 的第一列中的每个元素的绝对差值进行比较：

```
tol = 5;
C = abs(bsxfun(@minus, A(:,1), B(:,1)'))<=tol;

>> C

C =

     0     1     0     0     0     0
     0     1     0     0     0     0
     0     0     1     0     0     0
     0     0     1     0     0     0
     0     0     0     1     0     0
     0     0     0     1     0     0
     0     0     0     0     0     0
     0     0     0     0     0     1 
```

上面的每个元素==1 定义了 B 的某些元素的容差范围内的匹配。通过仅保留矩阵中的第一个匹配来拒绝多个匹配（您可以扩展为保留随机匹配）。

这意味着如果您在 B 中找到某些 A 的匹配项，请忽略此特定 A 的所有其他 B

```
D = C; % initialize matrix of unique elements
for i = 1:size(C,1)-1 
    D(i+1:end, C(i,:)) = 0; % if more than one match, keep only first
end

 D =

     0     1     0     0     0     0
     0     0     0     0     0     0
     0     0     1     0     0     0
     0     0     0     0     0     0
     0     0     0     1     0     0
     0     0     0     0     0     0
     0     0     0     0     0     0
     0     0     0     0     0     1 
```

最后，使用 any 仅指定 D 中的那些行，即 A 中的元素在 B 中至少有一个匹配项并拒绝所有其他行

```
A(~any(D, 2), :) = []; % reject points that don't match 

>> A

A =

    25     1
    45     3
    66     5
   110     8 
```

# c++ - 对数组，乱码输出（未分配的内存？）

> ID：12415850
> 
> 赞同：0
> 
> 时间：2012-09-13T22:45:02.300
> 
> 标签：c++

来自 Java，我试图用 C++ 实现一个简单的 Battleships 游戏，但已经被这个数组卡住了：

```
#include <iostream>
#include <utility>

using namespace std;

class Ship{
    private:
        int length;
        bool direction; //false = left, true = down
        pair <int,int> coords[];
    public:
        Ship(int x, int y, bool, int);
        void printship();
};

Ship::Ship(int x, int y, bool dir, int l){ 
    pair <int,int> coords[l];
    length = l;
    if (dir){
        for (int i = 0; i < l; i++){
            coords[i] = make_pair(x, y+i);
        }   
    }   
    else{
        for (int i = 0; i < l; i++){
            coords[i] = make_pair(x+i, y); 
        }   
    }   
}
void Ship::printship(){
    for (int i = 0; i < length; i++){
        cout << "x: " << coords[i].first << ", y: " << coords[i].second << endl;
    }   
}

int main(){
    Ship tests(2,3,true,3);
    tests.printship();
    return 0;
} 
```

我得到的是：

```
x: 134515168, y: 0
x: 0, y: 9938131
x: 1, y: -1080624940 
```

我猜有些东西指向未分配的内存，但我不知道是什么，为什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T22:47:24.867

您有两个不同的变量，都称为`coords`. 一个是私有成员变量，另一个是构造函数的局部变量。因为您在构造函数中创建的局部变量会隐藏成员变量，所以构造函数永远不会初始化成员变量。

试试这个：

```
#include <iostream>
#include <utility>
#include <vector>

using namespace std;

class Ship{
    private:
        int length;
        bool direction; //false = left, true = down
        vector< pair <int,int> > coords; // *** CHANGE HERE
    public:
        Ship(int x, int y, bool, int);
        void printship();
};

Ship::Ship(int x, int y, bool dir, int l){ 
    length = l;
    if (dir){
        for (int i = 0; i < l; i++){
            coords.push_back(make_pair(x, y+i)); // *** CHANGE HERE
        }   
    }   
    else{
        for (int i = 0; i < l; i++){
            coords.push_back(make_pair(x+i, y)); // *** CHANGE HERE
        }   
    }   
}
void Ship::printship(){
    for (int i = 0; i < length; i++){
        cout << "x: " << coords[i].first << ", y: " << coords[i].second << endl;
    }   
}

int main(){
    Ship tests(2,3,true,3);
    tests.printship();
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T22:59:57.580

在您的构造函数中，您有一个初始化的局部变量`coords`，而不是您的成员变量。此外，您可能应该使用 aa`vector`而不是数组，因为这样您就不必担心分配和释放内存：

```
class Ship{
private:
    bool direction; //false = left, true = down
    vector<pair<int,int>> coords;
public:
    Ship(int x, int y, bool, int);
    void printship();
};

Ship::Ship(int x, int y, bool dir, int l){ 
    if (dir){
        for (int i = 0; i < l; i++){
           coords.push_back(make_pair(x, y+i));
        }   
    }   
    else{
        for (int i = 0; i < l; i++){
           coords.push_back(make_pair(x+i, y)); 
        }   
    }   
}

void Ship::printship(){
    for (vector<pair<int, int>>::iterator it = coords.begin(); it != coords.end(); ++it)
        cout << "x: " << it->first << ", y: " << it->second << endl;
    }   
} 
```

# php - 如果数据库中存在值，请选中复选框

> ID：12415853
> 
> 赞同：1
> 
> 时间：2012-09-13T22:45:08.367
> 
> 标签：php

我有一个表单，允许用户使用复选框从作业中添加或删除用户。目前，工程师的姓名等存储在一个名为“用户”的表中，并由他们的用户类型工程师识别。表单上的复选框是通过使用 while 循环来创建的，以显示 mysql 查询。这样做是为了以后可以通过网页将新用户添加到数据库中，并且他们的名字将自动添加到可用工程师列表中。要将工程师添加到工作中，只需勾选他们的姓名并提交表格。

这很好用，但我希望用户能够通过选中和取消选中另一个表单上的框来添加或删除用户，但我无法思考如何做到这一点。

分配给作业的用户存储在名为 calls_engineers 的多对多表中，该表有 3 个字段

id_ce（唯一标识） call_ce（工作标识，外键） Engineer_ce（工程师标识，外键）

Engineer_ce 是“用户”表中的用户主键，即“id”。

我到目前为止的代码是......

```
<?  $sql = "SELECT * FROM calls_engineers WHERE call_ce = '$diary_id'";
      $result = mysql_query($sql) or die(mysql_error());
      $row2 = mysql_fetch_array($result);
      $sql = "SELECT * FROM users WHERE type = 'engineer' ORDER BY first_name";
      $result = mysql_query($sql) or die(mysql_error());
      while ($row = mysql_fetch_array($result)){ ?>
          <div style="width:70px; float:left">
              <? 
                  if($row2['engineer_ce'] == $row['id']){
              ?>
              <input type="checkbox" name="engineer[]" checked="checked" value="<? echo $row['id']; ?>" />
              <? echo '   '.$row['first_name']; 
              } else { ?>
                  <input type="checkbox" name="engineer[]" value="<? echo $row['id']; ?>" />
              <? echo '   '.$row['first_name'];
              }?>
          </div>
  <?
      }

  ?> 
```

所有这一切都是为每个工程师用户创建复选框，但如果用户被分配到工作中，它不会检查它们。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T22:51:57.073

您永远不会循环调用 calls_engineers 表。使用

```
$row2 = mysql_fetch_array($result); 
```

实际上不会找到工程师的所有任务。现在检查每个工程师是否包含在当前工作中：

```
<?  

  $sql = "SELECT * FROM users WHERE type = 'engineer' ORDER BY first_name";
  $result = mysql_query($sql) or die(mysql_error());
  while ($row = mysql_fetch_array($result)){ ?>

      <div style="width:70px; float:left">
          <input type="checkbox" name="engineer[]" <? 
              $result2 = mysql_query("SELECT * FROM calls_engineers WHERE call_ce = '".mysql_real_escape_string($diary_id)."' AND engineer_ce = ".$row['id']);
              if(mysql_num_rows($result2) > 0) echo 'checked="checked"';
             ?> value="<? echo $row['id']; ?>" />
          <? echo '   '.$row['first_name']; ?>
      </div>

  <? } ?> 
```

# java - 本地化和 L&F

> ID：12415858
> 
> 赞同：1
> 
> 时间：2012-09-13T22:45:49.733
> 
> 标签：java, swing, localization, uimanager

我认为如果我让用户能够在“主题”（L&F）之间进行选择和切换，那就太好了。我会让他在 Java 金属（默认）、系统默认和更多我会从互联网上下载的选项之间进行选择...

我的应用程序也是双语的（您可以选择两种语言来显示）。但是，完全翻译我的申请很重要。我可以处理简单的东西，命名 JLabels、JButtons、框架标题等......

但也有一些预定义组件的字符串我无法轻松管理（例如 JFileChooser）。有人告诉我可以使用 UIManager 更改它们，但它们的字符串是特定于 L&F 的。

现在，无论为每个 L&F 翻译我的应用程序有多么有趣，我都希望有一些集中的方式来控制这些字符串。

毕竟，JFileChoose (eg) 是同一个组件，无论使用哪种 L&F，对吧？它在自身的相同部分打印文本，不是吗？所以，应该有一些我可以访问的东西，可以让我“主”控制打印到预定义组件上的文本，我假设......

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T23:53:19.197

*   不容易的工作，

*   必须阅读[修改外观](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html)

*   最重要的是[在启动后改变外观](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html#dynamic)

*   必须接受您也必须将[Keys 的值覆盖到 UIManeger](https://stackoverflow.com/questions/12394608/java-uimanager-key-list/12412378#12412378)中，[注意外观和感觉之一](https://stackoverflow.com/questions/12405436/change-text-color-of-substance-lookandfeel)

*   不同的可能`L&F`有不同`Font`的 s 并且`Colors`对于具体来说`JComponents`，乘以`Native OS`

*   在某些情况下，如果您要更改`Color`或`ColorUIResources`（`Font`或`FontUIResources`） ，这很重要

*   `JFileChooser`是复合`JComponents`的，你可以提取它的成员，

*   最好的起点[可能是这个想法](https://stackoverflow.com/a/10909869/714968)，

*   [Nimbus Look and Feel](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/nimbus.html)拥有自己的生活

# django - django比较日期和日期

> ID：12415863
> 
> 赞同：0
> 
> 时间：2012-09-13T22:46:34.033
> 
> 标签：django, date, comparison

我试图拒绝导入日期小于已导入日期的行。

```
timelimit = Operation.objects.filter(account = 3).aggregate(Max('date'))
for row in csv.reader(reencode(f), delimiter=';', quotechar='"')
  if row != []:
    if row[0]>timelimit:
      operation.date=row[0] 
```

行看起来像：2012-01-12,something,0,something2

当然比较 row[0]>timelimit 是错误的 - 但什么是正确的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T23:04:39.297

```
 #this will convert your string("2012-01-12") to a datetime object

    from datetime import datetime
    >>> x = datetime.strptime(row[0], "%Y-%m-%d")
    >>> x
    >>> datetime.datetime(2012, 1, 12, 0, 0) 
```

然后您也可以像这样在 datetime 对象中转换 timelimit：

```
 timelimit = datetime(2011, 10, 10) 
```

然后比较这两者是微不足道的：

```
 x > timelimit 
```

# php - MySQL从所有行添加值

> ID：12415868
> 
> 赞同：1
> 
> 时间：2012-09-13T22:47:02.723
> 
> 标签：php, mysql

如何将我的表“视频”列中的所有整数 _view_count_ 相加，然后将其回显以显示在我的页面上？

例如：

如果第 1 行有`view_count == 328`

和

如果第 2 行有`view_count == 271`

我如何让 MySQL 将它们加在一起并回显出来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T22:48:30.997

您可以使用 MySQL [`SUM()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_sum)，您的 SQL 查询看起来类似于：

```
SELECT SUM(view_count) FROM videos; 
```

要*查询*和`echo`值，如果您`mysqli`在 PHP 代码中使用方法，您可以使用：

```
$result = $mysqli->query('SELECT SUM(view_count) AS sum FROM videos;');
$row = $result->fetch_assoc($result);
echo $row['sum']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T22:48:17.893

假设您`$mysqli`定义了一个对象，您的代码应如下所示：

```
$query = "SELECT Sum(view_count) as mySum FROM videos";
$result = $mysqli->query($query);
$row = $result->fetch_assoc($result);
echo $row['mySum']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T22:48:31.367

`SELECT SUM(view_count) FROM videos`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T22:55:52.290

假设您有一个 COLUMN id，您可以将**SUM**与**IN**一起使用，如下所示：

```
SELECT SUM(view_count) FROM videos WHERE id in (1,2) 
```

# jquery - 点击 iframe → 父窗口滚动到位置？

> ID：12415870
> 
> 赞同：2
> 
> 时间：2012-09-13T22:47:05.057
> 
> 标签：jquery, iframe, scroll, jquery-animate

单击 iframe 中的任意位置时，我希望我的父页面滚动到该 iframe 底部下方的位置。但无论我在这里为偏移量设置了多大的数字，父级只会滚动直到 iframe 的底部与视口的底部对齐 - 不再进一步。我怎样才能让它滚动超出这个范围？

```
$('#iframe1').click(function () {
    $('html,body', window.parent.document).animate({
        scrollTop: '+=' + 700 + 'px'
    }, 'fast');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T22:49:43.003

根据我的测试，在我测试过的所有四种浏览器（Firefox、IE、Chrome 和 Safari）中都可以找到以下作品：

**主页：**

```
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <title>Main Page</title>
</head>
<body>
  <iframe src="iframe.html" style="width:400px; height:500px;"></iframe>
    <div style="width: 200px;">
    <p>
      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer enim diam,
      pharetra at aliquam sed, luctus vel augue. Donec nec hendrerit velit. Sed
      fermentum volutpat libero a viverra. Mauris gravida cursus pulvinar. Morbi lorem
      nunc, pretium ut sollicitudin vel, facilisis ac ligula. Vestibulum imperdiet
      luctus augue, id euismod diam posuere ut. Suspendisse commodo ante nec dui
      suscipit ullamcorper porta justo consequat. Sed et eleifend erat. Duis ornare,
      nisi id hendrerit commodo, mauris metus dapibus arcu, ac tempor arcu justo sed
      arcu. Sed elementum ornare dolor, ac malesuada est vulputate non. Etiam nisl
      sapien, vestibulum ut blandit sed, suscipit vel erat. Sed elementum orci vitae
      magna vulputate consequat at ac lorem. Aenean libero risus, ornare sed posuere
      vitae, molestie vitae elit.
    </p>
    <p>
      Nullam nec lorem id turpis iaculis pretium. Pellentesque quam libero, pulvinar
      vitae viverra at, tincidunt vel dui. Mauris libero nibh, posuere eget aliquet
      eget, fermentum nec mi. Cras at venenatis ipsum. Fusce sed fermentum ante. Nam
      varius quam in lectus dignissim consequat. Cras semper, ligula eu ullamcorper
      pulvinar, orci quam vulputate lorem, vel dignissim lectus ipsum a justo. Etiam
      nibh nisi, tristique sit amet adipiscing in, volutpat non dolor. Etiam eros mi,
      consectetur sed adipiscing ut, egestas vel mauris. Pellentesque habitant morbi
      tristique senectus et netus et malesuada fames ac turpis egestas. Donec lacus
      leo, feugiat ac lacinia ac, aliquam quis ante. In eleifend gravida lectus, vitae
      rhoncus erat sagittis quis. In in nibh at risus faucibus dignissim. 
    </p>
  </div>
</body>
</html> 
```

**iframe 内容：**

```
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <title>iframe Page</title>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
  <script type="text/javascript">
    /// wait till document ready
    $(function(){
      /// target the entire iframe page for a click
      $('body').click(function () {
          /// step back to the parent window and tell it to animate scroll
          $('html,body', window.parent.document).animate({
              scrollTop: '+=700px'
          }, 'fast');
      });
    })
  </script>
</head>
<body>
  <p>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer enim diam,
    pharetra at aliquam sed, luctus vel augue. Donec nec hendrerit velit. Sed
    fermentum volutpat libero a viverra. Mauris gravida cursus pulvinar. Morbi lorem
    nunc, pretium ut sollicitudin vel, facilisis ac ligula. Vestibulum imperdiet
    luctus augue, id euismod diam posuere ut. Suspendisse commodo ante nec dui
    suscipit ullamcorper porta justo consequat. Sed et eleifend erat. Duis ornare,
    nisi id hendrerit commodo, mauris metus dapibus arcu, ac tempor arcu justo sed
    arcu. Sed elementum ornare dolor, ac malesuada est vulputate non. Etiam nisl
    sapien, vestibulum ut blandit sed, suscipit vel erat. Sed elementum orci vitae
    magna vulputate consequat at ac lorem. Aenean libero risus, ornare sed posuere
    vitae, molestie vitae elit.
  </p>
</body>
</html> 
```

有了上述内容，我没有遇到任何问题，所以我只能假设您的页面设置中存在导致问题的原因。我不确定您的代码是如何通过直接在 iframe 本身上放置一个“点击”处理程序来工作的*（这在我的任何测试中都不起作用）*所以它可能是您在其他地方有另一个点击功能正在被触发并且是没有像您期望的那样滚动页面？或者它可能是浮动或位置问题（关于你的 iframe），但如果你说你可以手动滚动到正确的位置，那么我怀疑这会是一个原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-12T23:14:09.573

我发现的最简单的解决方案是修改您的 iframe html 以包含 onload="window.parent.parent.scrollTo(0,0)" ，如下例所示：

```
<iframe src="https://myiframe.com" width="100%" height="1500px" onload="window.parent.parent.scrollTo(0,0)" /> 
```

# db2 - DB2 LIKE 运算符字符范围

> ID：12415873
> 
> 赞同：1
> 
> 时间：2012-09-13T22:47:33.960
> 
> 标签：db2, sql-like

我试图`LIKE`在 DB2 上的查询中构造一个运算符，用于检查 varchar 是否只是两位数。我在网上看过，似乎 DB2 不支持字符范围，即 [0-9]。我已经尝试过`LIKE '[0-9][0-9]'`，但没有从 DB2 收到错误，但是当我通过查看同一个表的 SELECT * 可以看到与此完全匹配的行时，该查询的结果集中没有显示任何行。

如果确实如此，我是否可以在 DB2 中复制它？我的语法`LIKE`错了吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T05:49:33.467

[TRANSLATE](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0000862.html)函数更适合验证包含有限数量的有效值的表达式。

`WHERE TRANSLATE( yourExpressionOrColumn, '000000000', '123456789') = '00'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T23:19:18.123

[找到了](https://stackoverflow.com/a/5370761/854854)。不，你不能，也没有可以代表 OR in 的符号`LIKE`。

# ruby-on-rails - Heroku：如何在“git push -f”之后“git pull”

> ID：12415875
> 
> 赞同：7
> 
> 时间：2012-09-13T22:47:46.067
> 
> 标签：ruby-on-rails, git, heroku, github

尝试推送到 Heroku 后，我收到了此错误消息（复制如下）。我最初设置了一个 facebook 画布应用程序并选择了在 heroku 选项上的托管。它给了我一个heroku url，我在我的机器上开发的应用程序中添加了它作为远程

```
heroku git:remote -a desolate-springs-1684 
```

但是当我推动时，我得到了这个错误

```
error: failed to push some refs to 'git@heroku.com:desolate-springs-1684.git'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes (e.g. 'git pull') before pushing again.  See the
'Note about fast-forwards' section of 'git push --help' for details.
localhost:nhl michaelmitchell$ 
```

所以我做了

```
git push -f heroku master 
```

但现在我显然必须做一个'git pull'。但是，我在“git pull”之后放了什么？heroku 网址的名称？或者是其他东西？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-13T22:56:39.607

强制你`git push`不是一个好主意，因为你丢失了你或其他合作者在你的工作副本中丢失的任何提交。

在推送之前，您应该将上游更改合并或重新定位到本地工作副本中。

在本地合并更改

```
$ git pull heroku master
$ git push heroku master 
```

在本地重新设置更改

```
$ git pull --rebase heroku master
$ git push heroku master 
```

顺便说一句，既然您已经推送了更改，您实际上不需要做任何其他事情。远程存储库已包含您的所有更改。

如果由于某种原因`$ git status`命令返回过时的引用，只需运行

```
$ git pull heroku 
```

获取所有远程更改。请注意，除非您指定目标分支（或者您启用了跟踪分支），`git pull`否则只会下载（而不是合并）上游更改。

另请注意，不应将 Heroku 视为 git 托管。这意味着`git pull`从 Heroku 执行 a 是非常罕见的。相反，您应该使用 git 托管（例如 GitHub 或 BitBucket）来存储您的存储库，并且只执行推送到 Heroku 来部署应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T23:03:50.253

该错误基本上意味着存储库中的代码比您尝试推送的代码更新。

您必须进行拉取并更新您自己的工作存储库，然后再次推送，或者只是强制推送

```
git pull heroku master 
```

附带说明一下，如果您不熟悉所有 git 命令，我建议您使用 GUI，因为它可能会使整个过程不那么不堪重负。

这里有很多很棒的客户：http: [//git-scm.com/downloads/guis](http://git-scm.com/downloads/guis)

# python - 修复表无法解决键“PRIMARY”的重复条目“1”

> ID：12415877
> 
> 赞同：0
> 
> 时间：2012-09-13T22:47:50.897
> 
> 标签：python, mysql

> 我无法执行以下代码，显然这些语句是代码的一部分。

```
cursor.execute("select max(propernoun_SRNO) from tblauto_tagged")

starting_index = cursor.fetchone()[0]

if starting_index  == None :

    starting_index = 1

ending_index = int(starting_index) +len(s)

i = 0

for j in range(starting_index,ending_index):
    for i in range(0,len(s)):
        c.append(nnp_array_index_coloumn.count(i))
        add1 = add1 + c[i-1]
        add2 = add1 + c[i]
        cursor.execute("INSERT INTO tblauto_tagged(propernoun_SRNO,tagger,train,propernoun,propernoun_ID) VALUES (?,?,?,?,?)",(j,str(iput),str(corpora),str(nnp_array[add1:add2]),0))
        for item in nnp_array_index_coloumn:
            if item not in uniques:
                uniques.append(item)
                add1=0;add2=0 
```

> 产生的错误是

```
IntegrityError: ('23000', "[23000] [MySQL][ODBC 5.1 Driver][mysqld-5.1.61-community]Duplicate entry '1' for key 'PRIMARY' (1062) (SQLExecDirectW)") 
```

> 我阅读了不同用户以前尝试解决问题的方法，但对我来说没有任何结果。

```
mysql> repair table  tblauto_tagged;
+--------------------------------+--------+----------+---------------------------------    ------------------------+
| Table                          | Op     | Msg_type | Msg_text                                                   |
+--------------------------------+--------+----------+---------------------------------------------------------+
| collegedatabase.tblauto_tagged | repair | note     | The storage engine for the table     doesn't support repair |
+--------------------------------+--------+----------+---------------------------------------------------------+
1 row in set (0.00 sec) 

mysql> select * from tblauto_tagged;
Empty set (0.00 sec) 
```

> 在您提出所有有用的建议之后，我使用了以下语句

```
cursor.execute("INSERT INTO tblauto_tagged(tagger,train,propernoun,propernoun_ID) VALUES (?,?,?,?)",(str(iput),str(corpora),str(nnp_array[add1:add2]),0)) 
```

> 我又遇到了一个麻烦，今天肯定不是我的日子。为了让我的问题更清楚，我正在用一些额外的信息编辑这个问题。在propernoun_SRNO =149之前一切正常

```
 mysql> select propernoun_SRNO ,tagger, train,propernoun,propernoun_ID from tblauto_tagged where propernoun_SRNO =149;
+-----------------+--------+-------+------------------------------------------------------------------------------------------------------------+---------------+
| propernoun_SRNO | tagger | train | propernoun                                                                                                   | propernoun_ID |
+-----------------+--------+-------+------------------------------------------------------------------------------------------------------------+---------------+
|             149 | 1      | 1     | ['Wing', 'tank', 'Hopper', 'BU', 'crewmember', 'beam', 'injured', 'Drug', 'Serious', 'Marine', 'Incident'] |             0 |
+-----------------+--------+-------+------------------------------------------------------------------------------------------------------------+---------------+ 
```

> 在propernoun_SRNO = 150之后，这就是我得到的。

```
mysql> select propernoun_SRNO ,tagger, train,propernoun,propernoun_ID from tblauto_tagged where propernoun_SRNO =150;
+-----------------+--------+-------+------------+---------------+
| propernoun_SRNO | tagger | train | propernoun | propernoun_ID |
+-----------------+--------+-------+------------+---------------+
|             150 | 1      | 1     | []         |             0 |
+-----------------+--------+-------+------------+---------------+
1 row in set (0.00 sec) 
```

> 一直到propernoun_SRNO = 22201

```
mysql> select max(propernoun_SRNO) from tblauto_tagged;
+----------------------+
| max(propernoun_SRNO) |
+----------------------+
|                22201 |
+----------------------+
1 row in set (0.00 sec)

mysql> select propernoun_SRNO ,tagger, train,propernoun,propernoun_ID from tblauto_tagged where propernoun_SRNO =22201;
+-----------------+--------+-------+------------+---------------+
| propernoun_SRNO | tagger | train | propernoun | propernoun_ID |
+-----------------+--------+-------+------------+---------------+
|           22201 | 1      | 1     | []         |             0 |
+-----------------+--------+-------+------------+---------------+
1 row in set (0.00 sec) 
```

> 我不知道问题是什么，但我认为这需要一些专家的意见。正如前面的评论中提到的，我应该使用序列，请指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T23:31:22.330

解释 zerkms 的评论：您正在尝试插入一个具有主键值的行（`propernoun_SRNO`如果我没记错的话），它已经在使用中。

如果您尝试将所有新行插入数据库，请不要为主键指定值，并且 MySQL 应该自动计算一个值，假设该列设置为`AUTO_INCREMENT`.

如果您尝试使用这些 ID 替换现有行，请使用`REPLACE`而不是`INSERT`，或在插入新行之前删除现有行。

# objective-c - 如何在Objective-C（可可）中删除二维数组

> ID：12415884
> 
> 赞同：4
> 
> 时间：2012-09-13T22:48:20.327
> 
> 标签：objective-c, c, arrays, cocoa

我想要一个简单的 2D **C**类型数组，`x[ 10][20] ;`并希望在需要释放内存时删除它，但可可没有删除方法。什么是最好的方法？（就像性能问题一样）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T23:05:03.187

您不会释放内存，因为仅通过声明数组就在堆栈上分配了内存。离开该方法时，内存将被释放。尽管 if is 是使用 C malloc 函数在堆上分配的，但您应该释放内存。

看看这个[文档](http://staff.um.edu.mt/csta1/courses/lectures/csa2060/c8a.html)。这解释了关于 C 内存管理的一切。

# c# - 使用 Silverlight 通过 SSL 调用 Sharepoint Web 服务

> ID：12415885
> 
> 赞同：1
> 
> 时间：2012-09-13T22:48:22.540
> 
> 标签：c#, wcf, web-services, sharepoint-2007, silverlight-5.0

我有一个 Silverlight 5 应用程序，它从几个 Sharepoint 列表中获取一些数据。一切正常，然后我们将站点设置为允许 SSL，我尝试更新服务引用以使用 https 调用 Web 服务。它更新了客户端配置绑定以使用安全模式传输。但是当它调用服务时，它给出了一个错误：

> System.ServiceModel.CommunicationException：尝试向 URI 'https://devlpadmin.thelittlegym.com/_vti_bin/Lists.asmx' 发出请求时出错。这可能是由于在没有适当的跨域策略或不适合 SOAP 服务的策略的情况下尝试以跨域方式访问服务。您可能需要联系服务的所有者以发布跨域策略文件并确保它允许发送与 SOAP 相关的 HTTP 标头。此错误也可能是由于在 Web 服务代理中使用内部类型而不使用 InternalsVisibleToAttribute 属性造成的。有关更多详细信息，请参阅内部异常。---> System.Security.SecurityException ---> System.Security.SecurityException：安全错误。

有谁知道问题是什么或如何获得比“安全错误”更多的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:14:33.837

我经历了很多不同的事情组合，我不确定到底发生了什么，但现在它正在起作用。我认为最初站点/服务遇到了一些奇怪的问题，促使我尝试手动配置 Silverlight 以传递 NTLM 传输凭据。在这样做时，我可能创建了一个导致错误的无效配置文件。正在运行的配置是：

```
 <bindings>
        <basicHttpBinding>
            <binding name="ListsSoap" maxBufferSize="2147483647" maxReceivedMessageSize="2147483647">
              <security mode="Transport" />
            </binding>
        </basicHttpBinding>
    </bindings>
    <client>
        <endpoint address="https://devadmin.mydomain.com/_vti_bin/Lists.asmx"
            binding="basicHttpBinding" bindingConfiguration="ListsSoap"
            contract="SPListsService.ListsSoap" name="ListsSoap" />
    </client> 
```

因此，如果您遇到此错误并且没有进行跨域调用，则怀疑存在某种底层服务错误。如果您不使用 Silverlight，则可以启用跟踪以追踪错误。如果您使用的是 Silverlight，我仍然不知道可以做些什么来缩小范围，但请注意，Silverlight仅支持普通 .net WCF 客户端所做[的配置选项的一部分。](http://msdn.microsoft.com/en-us/library/ms195526%28v=vs.95%29.aspx)

# windows - 是否有禁用 Windows8 手势的方法

> ID：12415886
> 
> 赞同：6
> 
> 时间：2012-09-13T22:48:24.570
> 
> 标签：windows, kiosk

我们需要在其中一个应用程序中禁用 Windows 8 的一些内置手势，以防止用户离开应用程序。（想想信息亭登录屏幕）。是否有方法仍然允许用户使用触摸与应用程序交互但禁用/拦截一些内置手势（例如将应用程序停靠在左侧、转到桌面等）。

我们的备份解决方案是在某些屏幕上完全禁用触摸（这是我们可以做的），但我们想要更好的用户体验，并且只禁用我们绝对需要的手势（类似于禁用 windows 键、ctrl+ alt+del 而不是整个键盘）。

最初的搜索和调查没有找到我们一直在寻找的东西，所以我们要么在寻找错误的东西，要么在错误的地方。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T08:44:27.490

您可以在 Windows 8 Embedded 中禁用手势。也许你可以在 Windows 8 中试试这个。

注册表项：

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\ImmersiveShell\EdgeUI]
"DisabledEdges"=dword:0000000f

0x01 : Disables left edge input and app switcher gesture.
0x02 : Disables right edge input and charm bar gesture.
0x04 : Disables top edge input and top application bar gesture.
0x08 : Disables bottom edge input and bottom application bar gesture. 
```

如果要禁用每个手势，只需添加 dword:0000000f (15)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T02:18:56.717

要以编程方式执行此操作，您可以调用下面链接中的函数。它需要 hWnd 到您想要定位的窗口。

[http://msdn.microsoft.com/en-us/library/windows/desktop/jj553591%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/jj553591%28v=vs.85%29.aspx)

下面的 C++ 将搜索窗口标题为“helloworld”的窗口，并为它禁用所有 Windows 8 手势。这不适用于 Windows 应用商店应用程序，并且必须在窗口打开时调用该函数。如果应用程序关闭并重新打开，手势将返回。另外，我相信它仅在应用程序全屏时才有效。

```
#include "stdafx.h"
#include <windows.h>
#include <iostream>
#include <propsys.h>
#include <propkey.h>

using namespace std;

HWND windowHandle;

HRESULT SetTouchDisableProperty(HWND hwnd, BOOL fDisableTouch)
{
    IPropertyStore* pPropStore;
    HRESULT hrReturnValue = SHGetPropertyStoreForWindow(hwnd, IID_PPV_ARGS(&pPropStore));
    if (SUCCEEDED(hrReturnValue))
    {
        PROPVARIANT var;
        var.vt = VT_BOOL;
        var.boolVal = fDisableTouch ? VARIANT_TRUE : VARIANT_FALSE;
        hrReturnValue = pPropStore->SetValue(PKEY_EdgeGesture_DisableTouchWhenFullscreen, var);
        pPropStore->Release();
    }
    return hrReturnValue;
}

BOOL CALLBACK MyEnumProc(HWND hWnd, LPARAM lParam)
{
    TCHAR title[500];
    ZeroMemory(title, sizeof(title));    

    GetWindowText(hWnd, title, sizeof(title)/sizeof(title[0]));

    if (!_tcscmp(title, _T("helloworld")))
    {
        SetTouchDisableProperty(hWnd,true);
    }

    return TRUE;
}

int _tmain(int argc, _TCHAR* argv[])
{   
    EnumWindows(MyEnumProc, 0);
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-26T07:22:03.220

Windows 魅力栏由`explorer.exe`.

因此，如果您的应用可以在没有它的情况下运行，那么您可以通过首先禁用 explorer.exe 的自动重启来绕过它（以管理员身份运行）：

```
reg add "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon" /v "AutoRestartShell" /t REG_DWORD /d 0 
```

然后下面的行代表我的`launch.bat`- 最终按预期工作：

```
;; kill explorer (this disables all windows functionalities
taskkill /f /im explorer.exe

;; start your kiosk app - should block the batch execution (so explorer.exe doesn't get executed at the end)
"\path\to\your\app.exe"

;; relaunch explorer.exe after you close the app to give back the functionality to windows
explorer.exe 
```

我使用上述方法让无键盘信息亭应用程序运行。因为使用键盘您仍然可以使用`alt`+关闭应用程序`f4`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-24T20:35:16.283

至少在 8.1 中，似乎有一个名为 Assigned Access 的功能：

[http://blogs.technet.com/b/askpfeplat/archive/2013/10/28/how-to-setup-assigned-access-in-windows-8-1-kiosk-mode.aspx](http://blogs.technet.com/b/askpfeplat/archive/2013/10/28/how-to-setup-assigned-access-in-windows-8-1-kiosk-mode.aspx)

[http://windows.microsoft.com/en-us/windows-8/assigned-access](http://windows.microsoft.com/en-us/windows-8/assigned-access)

设置 > 更改 PC 设置 > 帐户 > 其他帐户 > 设置帐户以分配访问权限

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T06:44:53.770

手势由 explorer.exe 处理。如果您用您的应用程序替换 Windows shell（默认：explorer.exe），那么在操作系统级别将不再有手势。

注册表项：

HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows_NT\CurrentVersion\Winlogon\

键：“Shell”（REG_SZ）=“path_to_your_application”

您也可以仅为当前用户执行此操作 (HKEY_CURRENT_USER\SOFTWARE\Microsoft\Windows_NT\CurrentVersion\Winlogon)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-14T20:48:20.930

将**IsTapEnabled**、**IsDoubleTapEnabled**、**IsRightTapEnabled**和**IsHoldingEnabled 设置**为**false**应该禁用 UI 元素中的手势，但它们是属性，而不是方法。我还没有看到一种方法可以禁用特定元素的***所有手势。***

我知道禁用每个控件以响应手势是荒谬的，但是如果您需要从字面上禁用从 Root 到 Children 的所有控件，那么在根上创建附加属性并将这些属性设置为 false 可能是一种解决方案。

# vba - 从另一个子调用类型变量

> ID：12415890
> 
> 赞同：3
> 
> 时间：2012-09-13T22:48:55.887
> 
> 标签：vba, excel, global-variables, subroutine

您好我有一系列子程序如下：

1.  DataCollection() ：从电子表格中收集数据并将其写入自定义类型变量。

2.  NewSub() ：做其他事情，但与问题无关。

我想保留先前声明的相同变量，并在第二个子中分配值。我想我必须以某种方式使它们成为全局变量，但到目前为止无法解决，无论我做什么，我都会得到变量未定义错误。我的代码如下：

```
Option Explicit

Public Type Trucks
    NumberOfAxles As Integer
    AxleWeights(15) As Double
End Type

Public Sub DataCollection()

Dim NumberOfTrucks As Integer
Truck(10) As Trucks
Dim i, j, k As Integer

'Determine Number of Trucks
NumberOfTrucks = Cells(6, 8)

'Populate Truck Arrays (Trucks 1 to 5)

k = 0
For i = 1 To 5
    Truck(i).NumberOfAxles = Cells(9, 4 + 4 * k)
    k = k + 1
Next i

k = 0
For i = 1 To 5
    For j = 1 To Truck(i).NumberOfAxles
        Truck(i).AxleWeights(j) = Cells(31 + j, 3 + 4 * k)
    Next j
    k = k + 1
Next i

End Sub

Public Sub NewSub()

For i = 1 To Truck(10).NumberOfAxles
    Cells(27 + i, 22) = Truck(10).AxleWeights(i)
Next i

End Sub 
```

任何想法都将受到欢迎！谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T02:14:30.867

将变量保持在尽可能有限的范围内。

如果您从 DataCollection 调用 NewSub，则将 Trucks() 设置为 DataCollection 本地并将其作为参数传递给 NewSub。

如果您不从另一个调用一个，但它们在同一个模块中，则将 Trucks() 声明为模块级变量。为此，请使用 Private 关键字并在模块顶部的任何过程之外进行声明。

最后，如果 NewSub 在不同的模块中，则需要声明一个全局变量。使用 Public 关键字并在它自己的名为 MGlobals 的模块中声明它。为什么是自己的模块？限制全局变量的使用并将它们全部声明在同一个地方是一种很好的做法，这样您就可以更有效地管理它们。（这意味着也将您的公共类型移动到 MGlobals。）

好的，说了这么多，现在停止使用类型。在您的项目中的某个时刻，您将需要一些 Type 无法为您提供的功能。我知道你不这么认为，但它会发生。因此，您将创建一个执行此操作的函数，它将变得一团糟。所以创建一个卡车类和一个卡车类。Truck 类将包含这两个属性。Trucks 类将包含一个私有集合对象，该对象包含所有 Truck 实例。您需要的唯一全局变量是 gclsTrucks。只要在范围内，您的所有 Truck 实例。您所有的繁重工作都应该在卡车类中进行。现在做一点额外的工作将为您节省很多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T00:08:34.937

您可以使用如下全局变量。

```
Dim global_var As Integer
'

Sub doA()
global_var = global_var + 1
Debug.Print global_var

End Sub

Sub doB()
global_var = global_var + 10
Debug.Print global_var
End Sub

Sub main()
doA
doB
doA
End Sub 
```

你声明你的变量

```
Truck(10) As Trucks 
```

而不是

```
Public Type Trucks
    NumberOfAxles As Integer
    AxleWeights(15) As Double
End Type 
```

换句话说，只需将“Dim”移到例程之外。

# git - Git 分支与提交

> ID：12415892
> 
> 赞同：3
> 
> 时间：2012-09-13T22:49:18.197
> 
> 标签：git, branch, commit

我有一个**主**分支到我提交最后一次更改的地方，然后在我运行之后

```
git branch test
git checkout test 
```

我删除了项目文件夹中的文件**README**

然后我跑了

```
git checkout master 
```

现在没有**README**文件了。

我认为当你创建一个新分支时，就像创建一个新提交一样。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T22:55:53.300

Creating a branch is not like creating a new commit. Creating a branch is like creating an easy to read reference to a commit hash.

So by being on the `master` branch and then going:

```
git branch test
git checkout test
rm README
git checkout master 
```

You will still have unstaged changes on the `master` branch, because you didn't actually do anything to `test`.

If you do `git status` you should have README missing.

You can get it back by doing `git checkout README`.

# .htaccess - 使用 htaccess 将子目录重定向到子域

> ID：12415896
> 
> 赞同：5
> 
> 时间：2012-09-13T22:49:50.080
> 
> 标签：.htaccess, mod-rewrite, bluehost

我对使用 .htaccess 比较陌生，除了我在网上阅读的内容之外，我从未做过任何编码。我正在使用 Bluehost，我想将我的博客子目录重定向到子域。示例：我想将 www.example.com/blog 重定向到 blog.example.com。

我已经有代码可以始终添加 www。到根文件夹中我的博客地址的开头，但我不知道如何使用.htaccess中的代码完成上述重定向。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T09:14:29.840

如今，许多网络主机都在其管理面板中提供了一种简单的子域创建实现方式。你只需要去那里，选择你的子域名，然后将它指向你树中的一个目录。

如果你不能，那么它会有点复杂（你需要将该子域解析为你的服务器 ip，配置一些虚拟主机......等等）并且你可能没有足够的权限来做到这一点（除非你是在专用服务器上）。

**编辑 2**

要将对 www.example.com/blog 的请求重定向到 blog.example.com，请尝试以下操作：

```
RewriteEngine on

RewriteCond %{HTTP_HOST} ^(www\.)?example\.com$
RewriteRule ^blog/(.*)$ http://blog.example.com/$1 [L,QSA,R=301]

RewriteCond %{HTTP_HOST} ^blog\.example\.com$
RewriteCond %{REQUEST_URI} !^blog/
RewriteRule ^(.*)$ /blog/$1 [L,QSA] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-19T09:18:24.883

我想加我的两分钱，

1）要回答上面的问题，这个重写应该解决它：

```
RewriteEngine on
RewriteCond %{REQUEST_URI} !\.
RewriteRule ^/blog$ http://blog.example.com [R=302,L] 
```

2）但是，我认为这本身还不够，您还需要更改 DNS，以便 blog.example.com 指向正确的服务器，这可以通过类似这样的 cname 来完成：

```
blog.example.com  CNAME example.com TTL 1080 
```

（不完全是它的外观，但使用您的 DNS 网络界面进行设置）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-21T19:52:47.643

你试过这个吗？

```
RewriteEngine on
RewriteBase /
RewriteRule ^/blog/(.*)$ http://blog.subdomain.com/$1 [R=301,L] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-24T05:54:30.020

RewriteCond %{HTTP_HOST} ^check.domain.info$

RewriteCond %{REQUEST_URI} !^/check/

重写规则 (.*) /check/$1

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-14T08:22:48.920

要将 subdomain1 和 subdomain2 以及 directory3 重定向到具有 HTTPS:// 的目录，我使用以下代码：

```
RewriteEngine on

RewriteCond %{HTTP_HOST} ^subdomain1.example.com [OR]
RewriteCond %{HTTP_HOST} ^subdomain2.example.com [OR]
RewriteCond %{HTTP_HOST} ^example\.com/subdomain3 [NC]
RewriteRule ^(.*)$ https://example.com/subdirectory/$1 [R=301,L] 
```

# java - 如何使用 QueryRunner 类删除记录

> ID：12415907
> 
> 赞同：0
> 
> 时间：2012-09-13T22:51:11.130
> 
> 标签：java, jsp, jstl

如何使用 QueryRunner 类从 mysql 数据库中删除记录？ids 作为字符串数组传递。您还可以建议使用 apache common db utils 进行 DML 操作是否有好处，有哪些替代方案或最佳实践？

下面是我的 StudentDAO.java 类的摘录。

```
 public boolean deleteStudent(String [] ids) {

            Connection connection = null;
            String query;
            boolean result = false;

            try {
                Context initCtx = new InitialContext();
                Context envCtx = (Context) initCtx.lookup("java:comp/env");
                DataSource ds = (DataSource) envCtx.lookup("jdbc/cmsDB");
                connection = ds.getConnection();

                QueryRunner run = new QueryRunner(ds);
                query = "delete tbl_student where student_id";// what should i put here???
                int nor = run.update(query, ids); //nor = no of records

                if (nor > 0) {
                    result = true;
                } else {
                    result = false;
                }
            } catch (NumberFormatException e) {
                // e.getMessage();
                e.printStackTrace();
            } catch (SQLException e) {
                e.printStackTrace();
            } catch (Exception e) {
                e.printStackTrace();
            } finally {
                DbUtils.closeQuietly(connection);
            }
            return result;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:00:24.273

```
public static String join(String[] s, String delimiter) {
    int imax = s.length;
    String strJoin="";
    if (imax > 1) {
        int i = 0;
        for (i = 0; i < imax-1; i++) {
            strJoin += s[i] + delimiter;

        }
        strJoin += s[i];            
    }
    else
        strJoin += s[0];
    return strJoin;
}

public boolean deleteStudent(String [] ids) {
    ...
    ...
    ...
    query = "delete tbl_student where student_id in ("+ join(ids,",") +")";
    ...
    ...
    ...
] 
```

# solr - Sunspot Solr：是否可以在不重新索引所有行的情况下添加字段？

> ID：12415910
> 
> 赞同：1
> 
> 时间：2012-09-13T22:51:39.950
> 
> 标签：solr, sunspot, sunspot-rails, sunspot-solr, websolr

在 Sunspot 的[文档](https://github.com/sunspot/sunspot)中，它说：

> 如果您更改对象的“模式”（可搜索块中的代码），则必须重新索引所有对象，以便更改反映在 Solr

如果不遵循此程序会怎样？

具体来说，我在 Websolr 上有一个相当大的索引，如果我只是添加一个布尔字段而不重新索引，会发生什么？

我希望能够按`true`布尔字段的值进行过滤，但我永远不需要按`false`或`nil`值进行过滤。这会奏效，还是必须始终遵守重新索引的警告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T11:02:27.143

在您的情况下，如果您添加字段并且不索引数据，它仍然可以工作。
但是，现有数据将没有该字段的值。
只有插入的新文档才会有它的值。
您当然可以根据值过滤文档，并且现有文档的字段值为零。

通常这取决于你改变了什么。

如果更改字段类型的查询时间分析，则不需要重新索引。一个简单的重新启动或核心重新加载会为您工作。

如果您想要所有文档的字段值，则架构中的更改将需要重新索引集合。
如果更改字段类型，则需要重新索引内容，因为在索引时对字段类型所做的分析会有所不同。
如果您不重新索引，则为该字段执行的查询时间分析将与索引的不同，并且不会找到匹配项。

# jquery-ui - jQuery自动完成列表位置更改

> ID：12415917
> 
> 赞同：0
> 
> 时间：2012-09-13T22:52:08.407
> 
> 标签：jquery-ui, jquery, jquery-plugins, jquery-selectors

我想将位置移动到我的 jQuery UI 建议列表的左侧。这里的功能和一切工作都很好

不幸的是，我不知道如何将该列表移动到左对齐大约 10px 页面是响应式的，这就是为什么害怕如何向左移动。

我认为这是文档：[http](http://docs.jquery.com/Plugins/Autocomplete/autocomplete) ://docs.jquery.com/Plugins/Autocomplete/autocomplete 。

![在此处输入图像描述](../Images/9826f80af754b6b0f4c86df18d674898.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T23:09:48.233

您可以在此类中设置样式

```
.ui-menu .ui-menu-item a.ui-state-hover, .ui-menu .ui-menu-item a.ui-state-active
{
    margin-left: -10px !important;
} 
```

尝试将其添加到您的 CSS 而不是 jQuery-ui CSS 文件中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T23:09:38.437

您可以添加 `margin-left: -11px;`到列表 DIV

# javascript - 将类添加到 .click 函数

> ID：12415918
> 
> 赞同：3
> 
> 时间：2012-09-13T22:52:10.477
> 
> 标签：javascript, jquery, raphael, colorbox

StackOverflow 的新手，JavaScript/jQuery 的新手。我一直在尝试开发一个包含矢量地图的网站（使用 Raphael 插件），当单击地图的特定区域时，我希望它使用 Colorbox 插件打开一个灯箱。我有 Raphael 和 Colorbox 插件单独工作（我有适用于 Raphael 的悬停功能，并且当点击普通链接时我有 Colorbox 工作）。但是，当它是一个被点击的 Raphael 元素时，我不确定如何让 Colorbox 工作。

这是因为我认为我需要将“内联”类添加到 Raphael 元素，但是我的 .click 函数只能获取一个 url（我不能添加一个类）。

抱歉，如果这个问题没有多大意义，我已经转了几个小时了。

当前的 .click 函数。locs 是一个单独文档中的 Raphael 对象数组。locarr 是一个包含这些对象的数组，用于 for 循环。id 和 url 是 Raphael 对象的元素。

```
 .click(function(){
       location.href = locs[locarr[this.id]].url
    }) 
```

Colorbox 与普通链接一起使用，如下所示。但我想不出一种将类添加到我的 .click 函数的方法。我尝试了各种版本的 .addClass 和类似的版本，但没有成功。

```
<a href="#link" class="inline">LINK</a> 
```

我认为我的问题是因为 HTML 中不存在 Raphael 对象（网址直接取自 JavaScript 文档。

如果这没有意义，再次抱歉。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T23:08:34.910

不会假装试图完全理解你想要什么，所以我要取消当前的标题。如果是这种情况，并且您想为元素添加一个类以用于某种样式的样式，并且您希望它在单击链接时执行此操作，您可以尝试..

```
$('.inline').click(function(e)
 {
    e.preventDefault();//stops the mouse click from triggering a normal click event
    $(this).addClass('className');//adds a defined class from your stylesheet
    //$(this).css({"color":"#FF0"});//changes the style properties without a class
  }); 
```

由于您在评论中说您的 JS 正在生成链接。你可以试试..

```
$('body').delegate('click', '.inline', function(e)
 {
    e.preventDefault();//stops the mouse click from triggering a normal click event
    $(this).addClass('className');//adds a defined class from your stylesheet
    //$(this).css({"color":"#FF0"});//changes the style properties without a class
  }); 
```

或者你可以试试

```
$('.inline').live('click', function(e)
 {
    e.preventDefault();//stops the mouse click from triggering a normal click event
    $(this).addClass('className');//adds a defined class from your stylesheet
    //$(this).css({"color":"#FF0"});//changes the style properties without a class
  }); 
```

# ruby-on-rails - Rails：从外部数据库获取数据

> ID：12415920
> 
> 赞同：1
> 
> 时间：2012-09-13T22:52:17.773
> 
> 标签：ruby-on-rails, database

我正在尝试从外部数据库中读取一些数据并将其显示到我的主页中。这是我已经走了多远：

在我的 database.yml 文件中：

```
external_db:
  adapter:  mysql2
  database: external_src
  username: external_src
  password: mypassword
  host: myblog.com 
```

我没有页面模型，所以我创建了一个：/app/models/pages.rb

并添加了以下内容：

```
class Blog < ActiveRecord::Base
  establish_connection(:external_db)
  set_table_name :posts
end 
```

现在，在我的页面控制器中，我如何检索数据？假设我在该数据库中有一个名为 pots 的表，我想检索 id 为 2 的帖子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T23:53:07.127

像任何其他模型一样使用`#find`方法，即：

```
Blog.find(2) 
```

应该管用

[未经测试]

# php - 显示空白数组的 SimpleXML 提要 - 如何获取内容？

> ID：12415924
> 
> 赞同：1
> 
> 时间：2012-09-13T22:52:34.867
> 
> 标签：php, wordpress, rss, simplexml, feed

我正在尝试使用 simpleXML 提要从 rss 提要中获取图像，并通过数组解析数据并返回到 foreach 循环中......

在源代码中，[description] 的数组显示为空白，尽管我已经设法使用另一个循环将其拉出，但是，我终生无法弄清楚如何拉入下一个数组，随后每个帖子的图像！

帮助？

你可以在这里查看我的进度：http: [//dev.thebarnagency.co.uk/tfolphp.php](http://dev.thebarnagency.co.uk/tfolphp.php)

这是原始提要：feed://feeds.feedburner.com/TheFutureOfLuxury?format=xml

```
$xml_feed_url = 'http://feeds.feedburner.com/TheFutureOfLuxury?format=xml';
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $xml_feed_url);
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$xml = curl_exec($ch);
curl_close($ch);

function produce_XML_object_tree($raw_XML) {
libxml_use_internal_errors(true);
try {
    $xmlTree = new SimpleXMLElement($raw_XML);
} catch (Exception $e) {
    // Something went wrong.
    $error_message = 'SimpleXMLElement threw an exception.';
    foreach(libxml_get_errors() as $error_line) {
        $error_message .= "\t" . $error_line->message;
    }
    trigger_error($error_message);
    return false;
}
return $xmlTree;
}

$feed = produce_XML_object_tree($xml);

print_r($feed);

foreach ($feed->channel->item as $item) {
// $desc = $item->description;

echo '<a href="'.$item->link.'">link</a><br>';

    foreach ($item->description as $desc) {
        echo $desc;`

    } 
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T02:25:57.483

你能用吗

```
wp_remote_get( $url, $args ); 
```

我从这里得到[http://dynamicweblab.com/2012/09/10-useful-wordpress-functions-to-reduce-your-development-time](http://dynamicweblab.com/2012/09/10-useful-wordpress-functions-to-reduce-your-development-time)

还可以获取有关此功能的更多详细信息[http://codex.wordpress.org/Function_API/wp_remote_get](http://codex.wordpress.org/Function_API/wp_remote_get)

希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T13:02:49.460

我不完全清楚你的问题是什么 - 你提供的代码似乎工作正常。

您提到“每个帖子的图像”，但我看不到 XML 中专门标记的任何图像。我可以看到的是，在`content`XML 的节点中的 HTML 内部，经常有一个`<img>`标签。就 XML 文档而言，这整个 HTML 块只是一个用特殊标记`<![CDATA[`和. 分隔的字符串`]]>`。如果您将此字符串放入 PHP 变量中（使用`(string)$item->content`您可以找到一种`<img>`从其中提取标签的方法 - 但请注意，HTML 不太可能是有效的 XML。

要提到的另一件事是，SimpleXML 不是，正如您反复提到的那样，它是一个数组——它是一个对象，而且是一个特别神奇的对象。您对 SimpleXML 对象所做的一切 - `foreach ( $nodeList as $node )`、`isset($node)`、`count($nodeList)`、`$node->childNode`、`$node['attribute']`等 - 实际上是一个函数调用，通常返回另一个 SimpleXML 对象。它是为方便而设计的，因此在许多情况下，编写看起来很自然的东西比检查对象更有帮助。

例如，由于每个`item`只有一个`description`，您不需要内部`foreach`循环 - 以下都将具有相同的效果：

*   `foreach ($item->description as $desc) { echo $desc; }`（遍历所有带有标签 name 的子元素`description`）
*   `echo $item->description[0];`（具体访问第一`description`个子节点）
*   `echo $item->description;`（隐式访问第一个/唯一的`description`子节点；这就是为什么你可以编写`$feed->channel->item`并且如果有第二个`channel`元素它仍然可以工作，它会忽略它）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-17T04:37:32.947

我遇到了一个问题，simplexml_load_file 也将一些数组部分返回为空白，即使它们在您直接查看源 URL 时包含数据。

原来数据在那里，但它是 CDATA，所以它没有正确显示。

这可能是 op 遇到的同样问题吗？

无论如何，我的解决方案是这样的：

所以最初我用这个：

```
$feed = simplexml_load_file($rss_url); 
```

我得到了这样的空描述：

```
[description] => SimpleXMLElement Object
    (
    ) 
```

但后来我在 PHP.net 网站的评论中找到了这个解决方案，说我需要使用 LIBXML_NOCDATA： [https ://www.php.net/manual/en/function.simplexml-load-file.php](https://www.php.net/manual/en/function.simplexml-load-file.php)

```
$feed = simplexml_load_file($rss_url, "SimpleXMLElement", LIBXML_NOCDATA); 
```

进行此更改后，我得到如下描述：

```
[description] => My description text! 
```

# css - Subversion：“svn update”丢失 CSS 数据

> ID：12415932
> 
> 赞同：0
> 
> 时间：2012-09-13T22:53:28.143
> 
> 标签：css, linux, svn

最近，我注意到 Subversion 的奇怪行为。偶尔，看似随机的，“svn up”命令会对我的 CSS 文件造成严重破坏。99% 的时间它都可以正常工作，但是当它变坏时，它就非常糟糕了。

Subversion 并没有注意到应有的冲突，而是似乎正在丢弃所有传入的冲突行并报告成功的合并。这会导致手动合并非常不方便，因为传入的更改实际上会消失，除非它们被手动放回文件中。

我会相信这是一个用户错误的情况，但我只是看着它发生。我们有两位设计师经常处理相同的 CSS 文件，但他们都熟悉并精通解决冲突。

几乎可以想象，当两位设计师都有大量的更改要签入并且一个人击败另一个人时，就会发生这种情况。这是否可能会以某种方式混淆 SVN 的合并算法？

欢迎任何处理来自 SVN 的此类行为的经验或有用的轶事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:27:28.637

如果你能找到一个 diff/merge 程序，它能够更好地检测此结构文件中的最小更改，请使用该`-diff-cmd`选项`svn update`来调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T23:35:03.783

这可能很乏味，但您可以使用以下方法检查 CSS 文件中的更改

```
svn diff -r 100:101 filename/url 
```

例如，从您的 HEAD 修订中退出。这应该显示进行了哪些更改，进行了哪些修订以及由谁进行。这听起来像是我以前遇到过的合并问题，但不幸的是，我发现自己通过查看以前的修订并手动合并它们来解决它。

# css - 可以修改 CSS 以将 div 的内容缩放到 100% 的窗口吗？

> ID：12415933
> 
> 赞同：0
> 
> 时间：2012-09-13T22:53:36.877
> 
> 标签：css, scale

我目前正在使用这个框架模板构建一个站点：http: [//cargocollective.com/montessori](http://cargocollective.com/montessori)

我的目标是让缩略图按比例缩放以填充 100% 的屏幕，就像这个网站一样：http: [//mariohugo.com](http://mariohugo.com)（调整窗口大小以查看此操作）

有谁知道这是否可以通过以任何方式修改 CSS 来完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T23:34:02.917

该网站是用 JavaScript 完成的——如果你关闭 JavaScript，你根本就看不到任何图像。不是很兼容！

您可以使用流畅的 CSS 布局做类似的事情，尽管它不会像那个网站那样流畅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T23:16:53.813

看看 twitter 引导框架[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)。它可能会帮助你。

# php - 用户配置文件的 Htaccess 重写和可能的冲突

> ID：12415934
> 
> 赞同：0
> 
> 时间：2012-09-13T22:53:41.060
> 
> 标签：php, .htaccess, mod-rewrite

我需要问一些关于 htaccess 重定向的问题。我知道有很多关于 htaccess、重写和漂亮的个人资料 url 的问题，但我从来没有找到我的问题的真正答案，我希望能在你的帮助下找到。

如您所知，那个漂亮的 url 规则就像将“mydomain.com/profile.php?username=myuser”更改为“mydomain.com/myuser”一样。

但是假设我的登录网址有一个重写规则：www.mydomain.com/login

这意味着如果用户尝试使用与“登录”完全相同的用户名，您将如何处理重写时可能出现的冲突？

实际上可能的解决方案可能是最小字符限制，例如最少 6 个字符，但它看起来并不优雅，因为您放弃了使用超过 6 个字符的选项，例如“/resetpassword”。

当用户选择用户名时，“禁止词”类型的数组控件可能是一种解决方案，但是您需要预见不应该使用的所有可能性。

许多大型网站都使用这种重写方法。特别是 Facebook 同时对页面和用户使用“/username”类型的规则。

无论如何，如果有人知道这种 url 重定向/重写规则背后的魔力是什么，请帮助我:)

谢谢

PS：我知道还有另一种解决方案，例如“/user/username”，但现在直接指向基本 url 并缩短完整 url 越来越流行，我只需要了解这方面的可能性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T23:08:24.833

为什么不在站点的根目录中有一个登录子目录，其中包含用于登录用户的相关文件？这样，你的 htaccess 文件中的重写规则只需要处理整个用户重定向的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T23:04:21.863

你正在寻找的是一种叫做“路线”的东西。它们通常由 MVC 框架实现，例如 Zend Framework、Symfony 的 CakePHP。

他们本质上所做的是将*每个*请求转发到某个 index.php，该 index.php 反过来会计算出`$_SERVER['REQUEST_URI']`应该从哪些 PHP 文件处理请求。

我不建议通过 PHP 将重写规则放入您的 .htaccess 文件中。相反，尝试进入 PHP 框架。他们为你做艰苦的工作。

就个人而言，我使用 Zend 框架。但我不会向初学者推荐新版本 2。试试ZF1。它实际上很容易进入。

# spring - Spring Security - 登录失败时检查记住我

> ID：12415935
> 
> 赞同：-1
> 
> 时间：2012-09-13T22:53:53.353
> 
> 标签：spring, spring-security, remember-me

登录失败时如何获得记住我的价值并重新打开登录页面？我可以在控制器上获取 _spring_security_remember_me 的值吗？

发生登录错误时，我只需要保留复选框的值！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T07:02:14.007

您的问题有点不清楚，或者您对 spring security 如何记住我有一个错误的形象。阅读 Spring Security 参考第 11 章“Remember-Me 身份验证”

简而言之，它是这样工作的：

*   如果用户使用他的用户名和密码成功登录并启用了记住我复选框，Spring Security 将创建一个 cookie 来验证用户并将其“发送”给用户

*   未登录用户请求安全页面（需要身份验证）spring 将检查他是否为有效 cookie。

    *   如果他有这样的 cookie，spring security 将“自动”“登录”他并向他显示页面
    *   如果他没有有效的 cookie，spring 会将他转发到登录页面（见上文）

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:49:20.823

您可以尝试以下解决方案：1.将自定义过滤器插入spring安全过滤器链2.在此过滤器中获取http会话并存储请求参数的值

当我们更改登录表单（添加另一个参数）时，我们需要自定义登录表单的 spring 表示和 spring 登录处理过滤器。这是配置：

```
<authentication-manager alias="authenticationManager"/>

<beans:bean id="myFilter" class="test.MyAuthenticationProcessingFilter">
    <custom-filter position="AUTHENTICATION_PROCESSING_FILTER" />
    <beans:property name="defaultTargetUrl" value="/initialize.action"/>
    <beans:property name="authenticationFailureUrl" value="/login_failed.action"/>
    <beans:property name="authenticationManager" ref="authenticationManager"/>
    <beans:property name="alwaysUseDefaultTargetUrl" value="true"/>
    <beans:property name="filterProcessesUrl" value="/perform_login"/>
</beans:bean>

<beans:bean id="entryPoint" class="org.springframework.security.ui.webapp.AuthenticationProcessingFilterEntryPoint">
    <beans:property name="loginFormUrl" value="/login.action"/>
</beans:bean> 
```

MyAuthenticationProcessingFilter 扩展了 spring 的 org.springframework.security.ui.webapp.AuthenticationProcessingFilter，包装了获取请求参数的尝试身份验证方法并将其存储在 http 会话中。编写这个类只是为了展示这个想法，为了更好地练习浏览 AuthenticationProcessingFilter 代码以获取用户名和密码参数。

公共类 MyAuthenticationProcessingFilter 扩展 AuthenticationProcessingFilter {

```
@Override
public Authentication attemptAuthentication(HttpServletRequest request)
        throws AuthenticationException {
    String param = request.getParameter("_spring_security_remember_me");

    HttpSession session = request.getSession();
    if (session != null || getAllowSessionCreation()) {
        session.setAttribute("_spring_security_remember_me", param);
    }

    return super.attemptAuthentication(request);
}

} 
```

您可能会注意到“myFilter”和“entryPoint”bean 一起定义了由 element inside 定义的参数。当您想要默认行为时使用。但在我们的例子中，我们使用自定义 bean，因此您应该完全删除元素。现在我们需要告诉使用我们的bean。“myFilter” bean 通过使用 bean 定义中的元素传递给 spring 链：

```
<beans:bean id="myFilter" class="test.MyAuthenticationProcessingFilter">
    <custom-filter position="AUTHENTICATION_PROCESSING_FILTER" />
    ...
</beans:bean> 
```

“entryPoint”被传递给 using 属性：

```
<http entry-point-ref="entryPoint">
    ...
    <!-- no form-login here -->
</http> 
```

# maps - 将 XML 属性添加到 GMap3 infoBubbles

> ID：12415939
> 
> 赞同：0
> 
> 时间：2012-09-13T22:54:13.303
> 
> 标签：maps

虽然我在 Gmapv2 中得到了这个工作..版本 3 被证明有点棘手。

我想将其他属性从 XML 文件添加到 infobubble 中，但是无论我尝试添加它们，它都会破坏点击标记？

```
 <script type="text/javascript">
    var infowindow;
    var map;
    function initialize() {

        var myLatlng = new google.maps.LatLng(54.046575, -2.8007399);
        var myOptions = {
          zoom: 13,
          center: myLatlng,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
        downloadUrl("http://www.xxxxxx.com/xxxxx.com/server/venue_output.php",         function(data) {
          var markers = data.documentElement.getElementsByTagName("marker");
          for (var i = 0; i < markers.length; i++) {
            var latlng = new         google.maps.LatLng(parseFloat(markers[i].getAttribute("latitude")),
                                parseFloat(markers[i].getAttribute("longitude")));
                                var event_name =         markers[i].getAttribute("event_title");
      var event_start = markers[i].getAttribute("event_start");
      var event_link = markers[i].getAttribute("event_link");    
            var marker = createMarker(markers[i].getAttribute("event_name"),latlng);
           }
         });
      }

      function createMarker(name, latlng) {
        var marker = new google.maps.Marker({position: latlng, map: map, bounce:true, icon : new google.maps.MarkerImage('http://www.gigizmo.com/gigizmo.com/app/images/marker.png')});
        google.maps.event.addListener(marker, "click", function() {
          if (infowindow) infowindow.close();
          infowindow = new google.maps.InfoWindow({content: "<b>" + name + "</b>" });
          infowindow.open(map, marker);
        });
        return marker;
      }

    </script> 
```

如何将我的 javascript 值（例如 event_link）添加到此标记窗口？

```
 infowindow = new google.maps.InfoWindow({content: "<b>" + name + "</b>" }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T16:00:30.997

你可以试试这个代码片段，提供在：[这个例子](http://www.pjtecnologia.com.br/maps/exemplos/check-lat-lng-is-inside-a-circle.html "在这个例子中")

```
function createMarker(..){

        eval(" infowindow"+time+" = new google.maps.InfoWindow({ content: pt.latLng.toString() });");
        eval(" marker"+time+" = new google.maps.Marker({ position: pt.latLng, map: map });");
        eval(" google.maps.event.addListener(marker"+time+", \"click\", function() { infowindow"+time+".open(map, marker"+time+"); });");
        time++;
//rest of your code
} 
```

另外，谈到我以前的经验：确保您的 XML 文件不包含换行符。特别是作为您设置为“名称”变量的值。

# python - 如何使用 SCons 的 env.Command 将时间戳附加到匹配的字符串

> ID：12415942
> 
> 赞同：0
> 
> 时间：2012-09-13T22:54:23.097
> 
> 标签：python, unix, build, scons

我一直在尝试使用 SCons 的 env.Command 函数中的 sed shell 命令对 .properties 文件中的 .txt 文件名进行字符串替换。我目前无法理解如何在此文件中为这些文件名附加时间戳。

我天真地尝试在构建步骤中使用 bash 变量，如下所示：

```
 env.Command('foo.out', 'foo.in', "dateVar=$(date +%F-%k-%M); sed -i \"s/\.txt/\.txt?v=$dateVar/g\" example.properties"); 
```

...但这只会导致失败，因为 SCons 试图解析任何带有美元符号的东西。有谁知道我怎样才能实现这个附加？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T00:03:34.197

`$`通过将其编写为保护SCons 解析器`$$`：

```
env.Command('foo.out', 'foo.in',
            'dateVar=$$(date +%F-%k-%M); '
            'sed -i "s/\.txt/\.txt?v=$$dateVar/g" example.properties'); 
```

# node.js - 有没有办法在 Connect/Express 3 中获取协议

> ID：12415943
> 
> 赞同：2
> 
> 时间：2012-09-13T22:54:31.887
> 
> 标签：node.js, express, connect

有没有办法在 Express 中获取协议（http|https）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T23:01:07.013

[`req.protocol`](http://expressjs.com/api.html#req.protocol)：

```
app.get('/protocol', function (req, res) {
    res.send(req.protocol);
}); 
```

不过，您可能还需要为您的应用程序：[`enable`](http://expressjs.com/api.html#app.enable) [`trust proxy`](http://expressjs.com/api.html#app-settings)

```
app.configure('production', function () {
    app.enable('trust proxy');
}); 
```

# facebook - Facebook 提到在您的应用程序之外标记用户？

> ID：12415949
> 
> 赞同：1
> 
> 时间：2012-09-13T22:55:23.707
> 
> 标签：facebook, facebook-opengraph, tagging

Facebook 最近允许在 Open Graph 中添加提及标记 [https://developers.facebook.com/docs/opengraph/mention_tagging/](https://developers.facebook.com/docs/opengraph/mention_tagging/)

我正在开发一个共享照片的应用程序，我希望我的用户能够通过提及标记来标记其他 Facebook 用户，即使这些 Facebook 用户当前没有使用我的应用程序。

从他们的 API 看来，这似乎是可能的，但是，我无法对其进行测试，因为它需要 Facebook 批准的标记操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:28:00.480

> I haven't been able to test it out because it requires a Facebook approved action for tagging.

Actions do not have to be approved for them to be tested with [test users](https://developers.facebook.com/docs/test_users/).

So just create two of those from your app settings panel, make them become friends … and go ahead with testing your mention tagging.

# user-interface - 木槌有图形用户界面吗？

> ID：12415950
> 
> 赞同：5
> 
> 时间：2012-09-13T22:55:25.437
> 
> 标签：user-interface, machine-learning, text-mining, mallet

有人看过[Mallet](http://mallet.cs.umass.edu)的 GUI吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T23:00:27.423

[http://code.google.com/p/topic-modeling-tool/](http://code.google.com/p/topic-modeling-tool/)

you might also be interested in:

[http://electricarchaeology.ca/2011/11/11/topic-modeling-with-the-java-gui-gephi/](http://electricarchaeology.ca/2011/11/11/topic-modeling-with-the-java-gui-gephi/)

# google-apps-script - 我需要创建一个带有所需文本输入的 html 表单。我该怎么做？

> ID：12415952
> 
> 赞同：0
> 
> 时间：2012-09-13T22:55:28.623
> 
> 标签：google-apps-script

我用 htmlService 做了一个表单，但我需要验证字段以使其成为强制性的。

请给我一些想法；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T23:02:07.733

由于您使用的是 HtmlService，因此您需要编写一些自定义 JavaScript，以在提交表单或按下按钮时检查某些表单字段的值。

# machine-learning - 在进行检查时更新和估计训练示例值的权重

> ID：12415953
> 
> 赞同：4
> 
> 时间：2012-09-13T22:55:40.057
> 
> 标签：machine-learning, artificial-intelligence

我正在阅读 Tom Mitchell 的机器学习书，第一章。

我想要做的是编写程序与自己玩跳棋，并学会在最后获胜。我的问题是关于它遇到的非终端板位置的信用分配。也许我们可以使用其特征和随机权重的线性组合来设置值，如何使用 LMS 规则对其进行更新？因为除了结束状态，我们没有训练样本。

我不确定我是否清楚地说明了我的问题，尽管我尝试过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:26:57.417

我没有读过那本书，但我的方法如下。假设白方获胜。然后，白方通过的每个位置都应该得到正值，而黑方通过的每个位置都应该得到负值。如果你重复这个推理，每当你有一组动作组成一个游戏时，你应该从胜利者的所有位置上增加一些分数，并从失败者的所有位置上移除一些分数。你这样做是为了一堆电脑与电脑游戏。

你现在有一个由一堆棋子位置和各自分数组成的数据集。您现在可以计算这些位置的特征并训练您最喜欢的回归器，例如 LMS。

这种方法的一个改进是训练回归器，然后进行更多的游戏，其中每个动作是根据该动作的预测得分随机抽取的（即导致得分较高的位置的动作具有更高的概率）。然后你更新这些分数并重新训练回归器等。

# jquery - 使用 CSS 过滤器获取元素

> ID：12415957
> 
> 赞同：1
> 
> 时间：2012-09-13T22:55:54.363
> 
> 标签：jquery, css

我正在尝试`filter`从 CSS 文件中查找应用了样式的所有元素。

例如

```
.fourty {

    filter:alpha(opacity=40);
}
.fifty {

    filter:alpha(opacity=50);
}
.sixty {

    filter:alpha(opacity=60);
} 
```

我将如何捕捉这些元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:59:33.120

```
var foundels = [];

$(els).each(function(){
    if($(this).css('filter') == 'alpha(opacity=60)')
        foundels.push(this);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T23:49:47.950

添加`class`到具有的元素怎么样`filter`？
然后您可以执行以下操作：

```
var $elements = $('.yourClass'); 
```

或者，如果您不想添加课程，可以执行以下操作。

```
var $elements = $('*').filter(function() {
    return $(this).css('filter') != 'auto';
}); 
```

我建议你添加`opacity`到 css，因为`filter`不是跨浏览器。所以你的代码应该如下。

```
var $elements = $('*').filter(function() {
    var $element = $(this);
    return $element.css('filter') != 'auto' || $element.css('opacity') != 1;
}); 
```

[演示](http://jsfiddle.net/N75B8/3/)

# java - German characters in JTextField

> ID：12415960
> 
> 赞同：6
> 
> 时间：2012-09-13T22:56:13.993
> 
> 标签：java, swing, unicode, jtextfield

I'm working on a Java application for people learning German, and I have run into a problem with the special characters of this language. I want to make a subclass of JTextField that will interpret ALT + a as ä, ALT + o as ö and so on, while behaving as usual for all ASCII characters.

My attempts so far:

```
public class GermanTextField extends JTextField implements KeyListener{
  public GermanTextField() {
    init();
  }

  // other constructors ...

  private void init() {
    addKeyListener(this);
  }

  public void keyPressed(KeyEvent arg0) {}

  public void keyReleased(KeyEvent arg0) {}

  public void keyTyped(KeyEvent evt) {
    if(evt.getKeyChar() == 'o' && evt.isAltGraphDown()){
      setText(getText() + "ö");
      evt.consume();
    }
  }

} 
```

Code above does not work (`GermanTextField` behaves like standard JTextField), and when I print `evt.getKeyChar()` to console this is what I get:

```
?
?
?
? 
```

This may be due to my own language, because ALT + o produces ó on my system. Of course I could have done it like that:

```
 public void keyTyped(KeyEvent evt) {
    if(evt.getKeyChar() == 'ó'){
      setText(getText() + "ö");
      evt.consume();
    }
  } 
```

But it probably won't work on any systems other than Polish.

My question is: is there any solution to this problem that will behave as expected on systems with different language settings?

* * *

# Full solution to this problem, based on MvGs answer:

```
package daswort.gui;

import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.util.HashMap;
import java.util.Map;

import javax.swing.JTextField;

public class GermanTextField extends JTextField implements KeyListener{

  private Map<Integer, String> transform = 
      new HashMap<Integer, String>();

  public GermanTextField() {
    init();
  }

  public GermanTextField(int columns) {
    super(columns);
    init();
  }

  public GermanTextField(String text, int columns) {
    super(text, columns);
    init();
  }

  public GermanTextField(String text) {
    super(text);
    init();
  }

  private void init() {
    transform.put(KeyEvent.VK_A, "äÄ");
    transform.put(KeyEvent.VK_U, "üÜ");
    transform.put(KeyEvent.VK_O, "öÖ");

    addKeyListener(this);
  }

  public void keyPressed(KeyEvent evt) {
    if(evt.isAltGraphDown()){
      String umlaut = transform.get(evt.getKeyCode());
      if(umlaut != null){
        int idx = evt.isShiftDown() ? 1 : 0;
        setText(getText() + umlaut.charAt(idx));
      }
    }
  }

  public void keyReleased(KeyEvent arg0) {}

  public void keyTyped(KeyEvent evt) {
    if(evt.isAltGraphDown()){
      evt.consume();
    }
  }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T23:55:51.580

要识别独立于当前语言环境的关键事件，请不要使用`getKeyChar`. 相反，用于`isKeyCode()`标识独立于与其关联的字符的键。像这样：

```
if (evt.getKeyCode() == KeyEvent.VK_O && evt.isAltGraphDown()) 
```

这应该与任何键盘布局上的`Alt Gr`+匹配。`O`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T00:17:08.693

> 这可能是由于我自己的语言，因为 ALT + o 在我的系统上产生ó。当然我可以这样做：

对[JTextComponents](http://docs.oracle.com/javase/tutorial/uiswing/components/text.html)使用[DocumentFilter](https://stackoverflow.com/a/9430683/714968)

> 但它可能不适用于除波兰语之外的任何系统。
> 
> 我的问题是：这个问题是否有任何解决方案可以在具有不同语言设置的系统上按预期运行？

*   不，没有，

*   希望所有 PC 都为`Locale`in `Native OS`(错误的决定)估算了正确的值

*   您可以`Unicode Chars`使用`ALT`和编写任何内容`numbers`

*   最安全的只是用户操作关于 的设置`Locale`，然后您可以为具体`Locale`（自己的`Encode Page`）创建一个字符数组

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T23:13:16.283

问题是 JTextField 使用与 JTextArea 不同的默认字体。在我编写的必须支持多语言的应用程序中，我遇到了同样的问题。

出现问题的原因是 JTextField 通常用于显示等宽字体，例如 Courier New。通常，Java 不包含用于显示 Kanji 的等宽图形字体的额外映射。

您的修复工作有效，因为没有名为“123”的字体，因此采用默认值（对话框）。“对话框”字体在内部映射到您平台的 font.properties 文件中的字体系列。这将与 JTextField 使用的字体相同。

我有以下修复，以确保在所有图形组件中使用相同的字体定义。您还可以找到 JTextField 的特定键并进行更改。这样您就不必担心任何组件的字体，它们将通过对话框进行初始化。请在包含 JTextField 的类中输入以下代码。

```
Object fontDefinition = new UIDefaults.ProxyLazyValue("javax.swing.plaf.FontUIResource", null, new Obje

java.util.Enumeration keys = UIManager.getDefaults().keys();
while (keys.hasMoreElements()) {
    Object key = keys.nextElement();
    Object value = UIManager.get(key);
    if (value instanceof javax.swing.plaf.FontUIResource) {
        UIManager.put(key, fontDefinition);
    }
} 
```

希望这可以帮助。

# javascript - Uncaught ReferenceError: show_pic is not defined at file:///android_asset/www/index.html:27

> ID：12415964
> 
> 赞同：2
> 
> 时间：2012-09-13T22:57:01.810
> 
> 标签：javascript, android, html, jquery-mobile

I am receiving the following error from eclipse (09-13 15:53:10.266: E/Web Console(24208): Uncaught ReferenceError: show_pic is not defined at file:///android_asset/www/index.html:27) when I attempt to call this function stored in main.js:

```
function show_pic() {
navigator.camera.getPicture(dump_pic, captureError, {
    quality : 50
});
} 
```

Here is the html

```
 <!DOCTYPE HTML>
<html>
  <head>
    <meta name="viewport" content="width=device-width" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
<script src="cordova-2.0.0.js"></script>
<script src="main.js"></script>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-     1.1.1.min.css" />
  <body>
  <div data-role="page">
  <div data-role="content">
  <div style="text-align:center;margin:20px;">
        <img id="cameraPic" src="" style="width:120px;height:120px;"></img>
    </div>
  </div>
    <div data-role="footer" data-position="fixed">      
        <div data-role="navbar">
            <ul>
                <li><a href="#">One</a></li>
                <li><a href="#" onClick="show_pic()">Two</a></li>
                <li><a href="#">Three</a></li>
            </ul>
        </div><!-- /navbar -->
    </div><!-- /footer -->
  </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T01:57:30.790

我修改了你的代码。如果我理解得很好，您想在单击`navbar`按钮时显示您拍摄的照片或在指定位置的照片`Two`。

根据您想要做的（显示您正在拍摄的照片，或显示位于您设备中的照片等），我定义了 3 种不同的功能`show_pic`，您可以尝试并使用适合您需求的功能（2其中已经在评论中）。

此外，在考虑到我评论中的先前建议的同时，我将您的函数`show_pic()`直接包含在 HTML 代码中（在`script`标签中），而不是`main.js`：

所以这里是修改后的 HTML 文件：

```
<!DOCTYPE html>
<html>
    <head>

        <meta name="viewport" content="width=device-width" />
        <meta http-equiv="Content-type" content="text/html; charset=utf-8">

        <!--  BASIC INCLUDES (TO CHANGE ACCORDING TO YOU) -->    

        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile.structure-1.1.0.min.css" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />

        <script type="text/javascript" charset="utf-8" src="cordova-2.0.0.js"></script>
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>      
        <script type="text/javascript" src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>

        <!--  END - BASIC INCLUDES --> 

        <script type="text/javascript" charset="utf-8">

            var pictureSource;   // picture source
            var destinationType; // sets the format of returned value 

            // Wait for Cordova to connect with the device
            //
            document.addEventListener("deviceready",onDeviceReady,false);

            // Cordova is ready to be used!
            //
            function onDeviceReady() {
                pictureSource=navigator.camera.PictureSourceType;
                destinationType=navigator.camera.DestinationType;
            }

            // Called when a photo is successfully retrieved
            //
            function onPhotoDataSuccess(imageData) {
                // Uncomment to view the base64 encoded image data
                // console.log(imageData);

                // Get image handle
                //
                var smallImage = document.getElementById('smallImage');

                // Unhide image elements
                //
                smallImage.style.display = 'block';

                // Show the captured photo
                // The inline CSS rules are used to resize the image
                //
                smallImage.src = "data:image/jpeg;base64," + imageData;
            }

            // Called when a photo is successfully retrieved
            //
            function onPhotoURISuccess(imageURI) {
                // Uncomment to view the image file URI 
                // console.log(imageURI);

                // Get image handle
                //
                var largeImage = document.getElementById('largeImage');

                // Unhide image elements
                //
                largeImage.style.display = 'block';

                // Show the captured photo
                // The inline CSS rules are used to resize the image
                //
                largeImage.src = imageURI;
            }

// YOUR FUNCTIONS `show_pic()` --------------------------------------------------
            // YOUR FUNCTION `show_pic()`
            //
            function show_pic() {
                // Take picture using device camera and retrieve image as base64-encoded string
                navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 50,
                                        destinationType: destinationType.DATA_URL });
            }

//            // YOUR FUNCTION `show_pic()`. Ex of use: onclick="show_pic(pictureSource.PHOTOLIBRARY);"
//            //
//            function show_pic() {
//                // Take picture using device camera, allow edit, and retrieve image as base64-encoded string  
//                navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 20, allowEdit: true,
//                                            destinationType: destinationType.DATA_URL });
//            }
//            
//            // YOUR FUNCTION `show_pic()`
//            //
//            function show_pic(source) {
//                // Retrieve image file location from specified source
//                navigator.camera.getPicture(onPhotoURISuccess, onFail, { quality: 50, 
//                                            destinationType: destinationType.FILE_URI,
//                                            sourceType: source });
//            }

// END - YOUR FUNCTION `show_pic()` ----------------------------------------------

            // Called if something bad happens.
            // 
            function onFail(message) {
                alert('Failed because: ' + message);
            }

            </script>

    </head>
    <body>
        <div data-role="page">
            <div data-role="content">
                <div style="text-align:center;margin:20px;">
                    <img id="cameraPic" src="" style="width:120px;height:120px;"></img>
                </div>
            </div>
            <div data-role="footer" data-position="fixed">      
                <div data-role="navbar">
                    <ul>
                        <li><a href="#">One</a></li>
                        <li><a href="#" onClick="show_pic()">Two</a></li>
                        <li><a href="#">Three</a></li>
                    </ul>
                </div><!-- /navbar -->
            </div><!-- /footer -->
        </div>
    </body><!-- <-- You forgot this missing DIV -->

</html> 
```

* * *

**PS：**

*   由于您是从外部网络 (http://code.jquery.com/) 导入 CSS / JS 文件，因此请确保您已将适当的白名单规则添加到您的文件`res/xml/cordova.xml`中。我猜你可能需要添加类似`<access origin="http://code.jquery.com/" />`. 查看此链接了解更多信息：[http](http://docs.phonegap.com/en/2.0.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide) ://docs.phonegap.com/en/2.0.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide 。

*   此外，由于您是在 Android 上开发，因此请确保`app/res/xml/`通过添加：修改您的文件`<plugin name="Camera" value="org.apache.cordova.CameraLauncher" />`，并`app/AndroidManifest`通过添加`<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />` .

* * *

希望这可以帮助。如果你有任何问题，你可以问我。

此外，有关更多有用信息，您可能需要查看在线文档：[http ://docs.phonegap.com/en/2.0.0/cordova_camera_camera.md.html#camera.getPicture](http://docs.phonegap.com/en/2.0.0/cordova_camera_camera.md.html#camera.getPicture)

# javascript - 如何在禁用点击时保持悬停属性

> ID：12415966
> 
> 赞同：8
> 
> 时间：2012-09-13T22:57:17.140
> 
> 标签：javascript, jquery, html, css

所以我有这个列表，通过 CSS 添加了一些悬停效果。HTML：

```
<li><a href="#">Current Period</a>
  <ul>
        <li><a href="#">2012</a>
        <li> a href="#">2011</a> //...you get the point 
```

CSS：

```
#nav a:hover {
    background-color: #fff;
    color: #333;
} 
```

当用户将鼠标悬停在当前时间段上时，会出现一个子元素列表（2012、2011 ......它们有自己的子元素）。我的问题是用户可以点击“当前期间”。我已经设法通过向锚添加一个类来删除点击，如下所示：

```
<li><a href="#" class="noclick">Current Period</a> .... 
```

CSS：

`.noclick { pointer-events: none; cursor: default; }`

但这当然会删除悬停功能。我想在使按钮不可点击的同时保持悬停效果（我在想javascript，但我想要一个更“直接”的解决方案）。我很感激任何帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T00:23:43.537

在您的单击处理程序中测试单击的项目是否具有该类：

```
$("#nav a").click(function(e){
     if ($(e.target).hasClass("noclick"))
         return false;

     // your other code here
}); 
```

请注意，通过测试事件的[`target`元素](http://api.jquery.com/event.target/)，您不会阻止对子元素的点击工作。

或者，如果“noclick”类没有动态更改，即那些“noclick”链接以“noclick”开头并将始终为“noclick”，您可以更改选择器，以便您的点击处理程序不会绑定到这些特定元素：

```
$("#nav a").not(".noclick").click(function() { ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T23:00:14.777

你有没有尝试过？

```
$('.noclick').unbind('click'); 
```

或者

```
$('.noclick').click(function(e){e.preventDefault();}); 
```

或者

```
<a href="javascript:void(0);">Text</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T23:04:43.493

只需更改以下行：

```
<li><a href="#" class="noclick">Current Period</a> .... 
```

对于这个

```
<li><a href="#" class="noclick" onclick="return false;">Current Period</a> .... 
```

并更改您的以下 CSS：

```
.noclick { pointer-events: none; cursor: default; } 
```

对于这个

```
.noclick { cursor: default; } 
```

那应该做你想做的事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T23:03:43.073

您可以使用 noClick 类来阻止默认事件

```
('.noclick').on('click' , function(e) {
     e.preventDefault();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T00:12:28.020

在 .noclick 类上删除指针事件

```
.noclick { cursor: default; } 
```

并将 js 添加到 .noclick 元素

```
$('.noclick').each(function() {
    var $this = $(this);
    $this.hover(function() {
        // do something...
    });
    $this.click(function() {
        return false;
    });
}); 
```

# javascript - Bootstrap 2.1 javascript nested tabs: inner tab closes outer tab

> ID：12415970
> 
> 赞同：0
> 
> 时间：2012-09-13T22:57:44.863
> 
> 标签：javascript, jquery, tabs, twitter-bootstrap

I thought I ask SO for help before I file a bugreport. I have a twitter bootstrap tab inside another tab, and wenn I click to change to the next inner tab, bootstrap.js does not only remove the .active from the closest .tab-pane, but also from the outer .tab-pane. I tried to dive into the code, but my javascript isn't good enough to fully understand it. I tried to manually add the active class to the outer .tab-pane with jquery and also tried .tab('show') on the data-toggle="tab" element. It seems like that bootstrap.js finds **all** .tab-content and then removes the .active from its children. Or maybe I have a mistake in my markup (well from experience 99% of the time it's human error). The javascript is all boilerplate, I just call the first tab with tab('show'). Here's my markup:

```
<ul id="sidebar" class="unstyled naviTab">
    <li class="accordion-group">...</li>
    <li class="accordion-group active">
        <h2 id="module1-title1" class="module-header" href="#getting-started" data-toggle="tab" data-original-title="">...</h2>
    </li>
</ul>
...
...
<ul class="unstyled tab-content">
    <li id="course" class="tab-pane">
    <li id="getting-started" class="tab-pane active">
        <div class="wizard stepTab">
            <a class="active" href="#module1-step1" data-toggle="tab">1.Step</a>
            <a class="" href="#module1-step2" data-toggle="tab">2.Step</a>
            <a class="" href="#module1-step3" data-toggle="tab">3.Step</a>
        </div>
        <ul class="links unstyled tab-content">
            <li id="module1-step1" class="tab-pane active" data-original-title="">...</li>
            <li id="module1-step2" class="tab-pane">
            <li id="module1-step3" class="tab-pane">
        </ul>
    </li>
</ul> 
```

And after clicking a href="#module1-step2":

```
<ul id="sidebar" class="unstyled naviTab">
    <li class="accordion-group">...</li>
    <li class="accordion-group active">
        <h2 id="module1-title1" class="module-header" href="#getting-started" data-toggle="tab" data-original-title="">...</h2>
    </li>
</ul>
...
...
<ul class="unstyled tab-content">
    <li id="course" class="tab-pane">
    <li id="getting-started" class="tab-pane">
        <div class="wizard stepTab">
            <a class="" href="#module1-step1" data-toggle="tab">1.Step</a>
            <a class="active" href="#module1-step2" data-toggle="tab">2.Step</a>
            <a class="" href="#module1-step3" data-toggle="tab">3.Step</a>
        </div>
        <ul class="links unstyled tab-content">
            <li id="module1-step1" class="tab-pane" data-original-title="">...</li>
            <li id="module1-step2" class="tab-pane active">
            <li id="module1-step3" class="tab-pane">
        </ul>
    </li>
</ul> 
```

Notice how the outer tab-panes are all inactive.

If anybody has run into this problem or can tell me where I messed up I'd be very grateful!

**EDIT1** Here's my javascript. I actual don't have to include any js because bootstrap.js works just fine just with the html attributes(and that's probably the reason why it breaks). I tried different approaches (.each(), e.preventDefault()) but nothing seemed to work. But here's my js anyway:

```
<script>
/*global $*/
"use strict";
$(function () {
    $('.naviTab li:first-child h1').tab('show');  //shows the first child of the outer tab on load. Could just add an .active to the markup instead
    $('#sidebar li:first-child').addClass('active');  //this is for the accordion that the outer tab links are enbedded in
    $('.stepTab a').click(function () {
        if ($(this).closest('li').hasClass('active') == false) {  //this is supposed to check if the outer tab has .active and add it if it doesn't. Unfortunately it doesn't work...
            $(this).closest('li').addClass('active');
        }
        $(this).siblings().removeClass('active');  //this is for css styling purposes on the inner tab a's
        $(this).addClass('active');
    });
});
</script> 
```

Cheers for any suggestions!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-18T18:24:21.257

正如 albertedevigo 所说，您只需要为每个选项卡提供唯一的 ID，无论选项卡是否嵌套，这是因为 javascript 操作将打开/关闭此特定选项卡：

```
<div class="tabbable">
<ul class="nav nav-tabs">
    <li class="active"><a href="#tab1" data-toggle="tab">Section 1</a></li>
    <li><a href="#tab2" data-toggle="tab">Section 2</a></li>
</ul>
<div class="tab-content">
    <div class="tab-pane active" id="tab1">
        <p>I'm in Section 1.</p>
    </div>
    <div class="tab-pane" id="tab2">
        <p>Howdy, I'm in Section 2.</p>
        <div class="tabbable">
            <ul class="nav nav-tabs">
                <li class="active"><a href="#tab3" data-toggle="tab">Section 3</a></li>
                <li><a href="#tab4" data-toggle="tab">Section 4</a></li>
            </ul>
            <div class="tab-content">
                <div class="tab-pane active" id="tab3">
                    <p>I'm in Section 3.</p>
                </div>
                <div class="tab-pane" id="tab4">
                    <p>Howdy, I'm in Section 4.</p>
                </div>
            </div>
        </div>
    </div>
</div> 
```

看看[jsfiddle.net/simbirsk/RS4Xh/2](http://jsfiddle.net/simbirsk/RS4Xh/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T16:40:40.237

问题是我没有为内部选项卡中的链接使用 an，而只是一个带有 a's 的 div（出于 css 原因必须这样做）。我不知道引导程序要求链接采用 ul > li > a 格式。现在它知道了！如果有人有同样的问题，我会留下这个问题。为帮助干杯！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T23:54:26.667

也许这应该有助于[http://www.juvenpajares.com/?p=204](http://www.juvenpajares.com/?p=204) Custom Accordion Using Bootstrap Framework

# c# - Why "var" keyword sets to certain type?

> ID：12415971
> 
> 赞同：3
> 
> 时间：2012-09-13T22:57:47.997
> 
> 标签：c#, anonymous-types

Why `var a = 7;` would set `a` type to a certain type (i.e. `int` instead of `byte`)? Are there any rules/defaults/checks made on the fly by C# compiler?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-13T23:00:18.300

It's not clear what you mean by "on the fly" - but the C# compiler simply follows the rules laid down in the spec. For a declaration of the kind:

```
var a = expression; 
```

the type of `a` is the type of `expression`. The expression `7` is of type `int`, although it's *also* known to be a constant within the range of `byte`, allowing:

```
byte a = 7; 
```

to compile. The *availability* of that conversion to `byte` doesn't change the type of the expression `7` though, so `int` is what the C# compiler uses for the type of `a`.

Note that I'd recommend against using `var` for constants like this. It ends up with code which can get pretty confusing around the boundaries of `int`, `uint`, `long` etc. `var` is meant to help with anonymous types, and also to help make code *more* readable. When it makes code *less* readable, just don't use it.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T23:14:16.830

The compiler treats any integer literal in your code, that does not have a suffix, as an `int`.

So this:

```
byte myByte = 255; 
```

..is actually implicitly converting the `int` constant 255, to a byte.

That is why `var` is infered to be an integer.. because the compiler uses integer literals by default.

If you were to do this:

```
var a = 7L; 
```

A would be of type `long`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T23:00:40.270

有默认值，我不能立即告诉你所有这些。类似于如果您调用 5/7 它默认为整数除法。但如果你做 5/7.0 那么它会做常规除法。var 只是将类型设置为分配值的类型，在没有强制转换的情况下，默认情况下它是整数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T23:00:25.613

`var` does not mean "determine the type at runtime", it means "determine the type using the result type of the expression on the right hand side of the assignment operator." It is determined at compile time.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T23:01:31.093

根据[手册](http://msdn.microsoft.com/en-us/library/bb383973.aspx)：

> 隐式类型的局部变量是强类型的，就像您自己声明了类型一样，但编译器确定类型。

[和](http://msdn.microsoft.com/en-us/library/bb384061.aspx)：

> var 关键字指示编译器从初始化语句右侧的表达式推断变量的类型。

简而言之，编译器将检查分配给变量的数据的最低可用类型，并将所述变量强类型化为该数据类型。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-13T23:01:41.790

var 关键字自动将给定值设置为编译器可以转换的类型。例如：var s = ""; 包含一个字符串，并将成为一个字符串。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-09-13T23:06:24.273

它将 a 设置为表达式类型，因为 var 是通用类型，并且由于 CLR 为您处理它需要的内存管理，并将确定表达式的类型并使变量成为该类型。

# ruby-on-rails - Ruby on Rails: Active Record query fails to execute only when hosted on heroku.

> ID：12415973
> 
> 赞同：2
> 
> 时间：2012-09-13T22:57:52.353
> 
> 标签：ruby-on-rails, database, sqlite, postgresql, heroku

I have a page which simply displays all of the Links in my database sorted by the voteCount. Here is the controller:

```
class PagesController < ApplicationController
  def index
    params[:per_page] ||= 5
    params[:page]     ||= 1

    @links = Link.order('voteCount DESC').paginate(:page => params[:page], :per_page => params[:per_page])

  end
end 
```

I save query the database using the paginate plugin, and prepend it with:

```
.order('voteCount DESC') 
```

When I run this command on my local server, it runs fine. However, as soon as I deploy it to heroku, it fails. This is the output I get when I check the logs/execute it in the console:

```
Link Load (2.0ms)  SELECT "links".* FROM "links" ORDER BY voteCount DESC LIMIT 5 OFFSET 0
ActiveRecord::StatementInvalid: PG::Error: ERROR:  column "votecount" does not exist
LINE 1: SELECT  "links".* FROM "links"  ORDER BY voteCount DESC LIMI...
                                                 ^ 
```

I've checked using the console, the voteCount column is definitely there. This might be due to the fact that my local environment runs sqlite3 and heroku makes me use postgres ....

Any help would be really appreciated. Thanks.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T02:09:31.713

您有区分大小写的问题。当你说这样的话：

```
create_table :links do |t|
  t.integer :voteCount
end 
```

Rails 会将这样的 SQL 发送到 PostgreSQL 以创建列：

```
"voteCount" integer 
```

标识符周围的双引号使其区分大小写，这意味着您必须`"voteCount"`永远引用它。如果你这样说：

```
.order('"voteCount" DESC') 
```

一切都会奏效。

SQLite 不关心标识符大小写，因此您可以在 SQLite 中说`voteCount`, `votecount`, `VOTECOUNT`, ... ，这并不重要。

Rails 总是引用它在与 PostgreSQL 对话时产生的标识符。通常这无关紧要，Rails 约定是使用小写标识符，而 PostgreSQL 在使用它们之前将不带引号的标识符折叠为小写，因此默认情况下一切正常。

这里有一些相关的最佳实践：

1.  在同一个堆栈上开发和部署。
2.  在 PostgreSQL 中使用带有下划线分隔的单词的小写列名。这也恰好与通常的 Ruby 约定相匹配。

我建议您改用`vote_count`作为列名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T23:07:30.250

您的 heroku 应用程序可能尚未迁移该列

```
heroku run rake db:migrate 
```

# android - In Android, make Layout expand when clicked over everything else?

> ID：12415977
> 
> 赞同：1
> 
> 时间：2012-09-13T22:58:44.197
> 
> 标签：android, xml, layout

Is it possible to allow a view to expand when clicked? Right now I am using a linearlayout to keep three different layouts in descending order. When a component is clicked I want the component to expand and take over the screen. How can this be done?

Example:

```
Before Click
 ___________
|           |
|      A    |
|           |
|___________|
|           |
|      B    |
|___________|
|           |
|      C    |
|___________|

After "C" component is clicked:

 ___________
|           |
|           |
|           |
|           |
|     C     |
|           |
|           |
|           |
|           |
|___________| 
```

A, B, and C are LinearLayouts held in position with weighted values given in the main.xml.

Also, the C is meant to expand upwards using Animations perhaps.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T23:17:39.320

为什么不直接删除视图 A 和 B？

```
viewA.setVisibility(View.GONE);
viewB.setVisibility(View.GONE); 
```

# mysql - How to move data from one SQLite to MySQL with different designs?

> ID：12415989
> 
> 赞同：2
> 
> 时间：2012-09-13T23:00:13.970
> 
> 标签：mysql, database, sqlite, web, migration

The problem is: I've got a SQLite database which is constantly being updated though a proprietary application.

I'm building an application which uses MySQL and the database design is very different from the one of SQLite.

I then have to copy data from SQLite to MySQL but it should be done very carefully as not everything should be moved, tables and fields have different names and sometimes data from one table goes to two tables (or the opposite).

In short, SQLite should behave as a client to MySQL inserting what is new and updating the old in an automated way. It doesn't need to be updating in real time; every X hours would be enough.

A google search gave me this: [http://migratedb.sourceforge.net/](http://migratedb.sourceforge.net/)

And asking a friend I got information about the Multisource plugin (Squirrel SQL) in this page: [http://squirrel-sql.sourceforge.net/index.php?page=plugins](http://squirrel-sql.sourceforge.net/index.php?page=plugins)

I would like to know if there is a better way to solve the problem or if I will have to make a custom script myself.

Thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T06:55:06.360

我为此推荐一个自定义脚本：

1.  如果不是表和字段之间的一对一转换，那么工具可能无济于事。在你的问题中，你说：

    > ...有时来自一个表的数据会转到两个表（或相反）。

2.  如果您只想要差异，那么您需要为此构建逻辑，除非 SQLite 数据库中的每条记录都有时间戳。

3.  你要更新 MySQL 数据库吗？如果没有，您可以完全删除 MySQL 数据库并使用 SQLite 中的所有数据每 X 小时刷新一次吗？

此外，如果您**对脚本语言（如 php、python、perl、ruby 等）感到满意**，它们有 SQLite 和 MySQL 的 API；构建自己的脚本很容易，您可以根据程序逻辑更轻松地控制自定义。特别是如果您想在数据之间运行“转换”，而不仅仅是简单的映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T06:12:41.717

我希望我对您的理解正确，您将定期将存储在 SQLite DB 中的数据刷新到 MySQL DB。正确的？

**所以我会这样做。**

1.  创建一个 Cron，它每 x 分钟启动一次脚本。
2.  将 SQLite 中的数据导出到 CSV 文件中。
3.  将`LOAD DATA INFILE`CSV 数据导入 MySQL

**代码示例`LOAD DATA INFILE`**

```
LOAD DATA INFILE 'PATH_TO_EXPORTED_CSV' REPLACE INTO TABLE your_table FIELDS TERMINATED BY ';' ENCLOSED BY '\"' LINES TERMINATED BY '\\n' IGNORE 1 LINES ( @value_column1, @unimportend_value, @value_column2, @unimportend_value, @unimportend_value, @value_column3) SET diff_mysql_column1 = @value_column1, diff_mysql_column2 = @value_column2, diff_mysql_column3 = @value_column3); 
```

这段代码你可以查询到你想要的尽可能多的数据库表。您也可以更改变量`@value_column1`。我很急。现在就是这样。询问是否有不清楚的地方。问候迈克尔

# objective-c - 在单独的类中设置 MapKit 委托的正确方法

> ID：12415991
> 
> 赞同：2
> 
> 时间：2012-09-13T23:00:23.123
> 
> 标签：objective-c, ios, mkmapview, mapkit

为 MapKit 设置单独的委托类的正确方法是什么？

我有 MapView 类子类化 MKMapView 和符合 MKMapViewDelegate 协议的裸 MapDelegate 类只有一个初始化方法。

这是我使用的 MapView 初始化方法的摘录：

```
# MapView.m ...
@implementation MapView

- (id) initWithFrame:(CGRect)frame {
    if (self = [super initWithFrame:frame]) {

    // [self setShowsUserLocation:YES];

    [self setDelegate:[[MapDelegate alloc] initWithMapView:self]]; 
```

MapDelegate 类拥有的唯一方法是

```
# MapDelegate.m ...
- (id)initWithMapView:(MapView *)aMapView {
    self = [super init];
    self.mapView = aMapView;
    return self;
} 
```

拥有*[self setShowsUserLocation:YES];* 评论说，一切正常 - 我看到了地图。如果我取消注释这一行，我的应用程序开始崩溃。

我的 MapDelegate 类缺少什么？

更新 1：如果我不使用单独的类 MapDelegate 并仅设置 setDelegate:self - 一切正常。

更新2：现在我明白了*[self setDelegate:[[MapDelegate alloc] initWithMapView:self]];的问题。*字符串是我需要 MapDelegate 类的寿命比现在长（委托属性具有*弱*属性）。如果我执行以下操作：

```
@property (strong) id delegateContainer;
....
[self setDelegateContainer:[[MapDelegate alloc] init]];
[self setDelegate:self.delegateContainer]; 
```

...有用！是否有更好的方法来保留 MapDelegate 生命周期以及 MKMapView 的生命周期？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T22:31:41.790

在等待足够长的时间等待可能出现在这里的任何答案并确保原始有问题的行为两次以上之后，我将根据问题的第二次更新发布我自己的答案：

[self setDelegate:[[MapDelegate alloc] initWithMapView:self]]; 的问题 string 是 MapDelegate 类应该能够在问题的*initWithFrame*方法范围之外保持活动状态，因为*委托*属性具有*弱*属性。可能的解决方案是创建一个实例变量作为委托类的容器，例如：

```
@property (strong) id delegateClass;
....
[self setDelegateClass:[[MapDelegate alloc] init]];
[self setDelegate:self.delegateClass]; 
```

这解决了原来的问题。

**稍后更新**

虽然可以在单独的类中设置 MKMapView 的委托，但我现在意识到不应该使用这样的模型：

Currently I always prefer to use my controllers (i.e. controller layer in MVC in general) as delegates for all of my View layer classes (map view, scroll view, text fields): controller level is the place where all the delegates of different views can meet - all situated in controller layer, they can easily interact with each other and share their logic with the general logic of your controller.

On the other hand, if you setup your delegate in a separate class, you will need to take additional steps to connect your separate delegate with some controller, so it could interact with a rest part of your logic - this work have always led me to adding additional and messy pieces of code.

**很快：不要为委托使用单独的类（至少 Apple 提供的视图类委托），使用一些常见的地方，如控制器（对于 UIScrollView、MKMapView、UITableView 等视图或 NSURLConnection 等模型的 fx）。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T23:27:30.853

我认为`viewDidLoad`设置地图视图会更好。这只是一个猜测，但可能崩溃是由于尚未加载视图。

当然`MKMapView`，根本不推荐子类化。您通常会将您的地图作为子视图，并将主视图设置为委托。从文档：

> 尽管您不应该继承 MKMapView 类本身，但您可以通过提供委托对象来获取有关地图视图行为的信息。

最后，如果您真的想拥有一个单独的委托类，则不需要设置它`mapView`，因为所有委托方法都将映射作为参数传递。

# java - 用安卓手机发送TCP命令但没有数据发送

> ID：12415997
> 
> 赞同：2
> 
> 时间：2012-09-13T23:00:33.003
> 
> 标签：java, android, sockets, tcp, packet

我需要通过wifi从android手机发送命令到路由器，通过电线，到“有线电视盒”<---现在假设有线电视盒。从我的笔记本电脑发送命令时，我在wireshark 阅读中获得了大量健康的数据。此外，有线电视机顶盒会做出响应并按照指示进行操作。但是，一旦我尝试将应用程序放在手机上并使用它，什么也没有发生。如果我将命令从手机发送到计算机，我会在手机和计算机之间来回发送 2 个空包。我在这里做错了什么？我已经为此苦苦挣扎了3天。

```
import android.util.Log;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.InetAddress;
import java.net.InetSocketAddress;
import java.net.Socket;
import java.net.SocketAddress;
import java.util.ArrayList;

public class TCPRunnable implements Runnable{
    private final String ip;
    private final int port;
    private final ArrayList<String> commands;

//<editor-fold defaultstate="collapsed" desc="Constructors">
    @Deprecated
    public TCPRunnable(String ip,int port,ArrayList<String> Cmds){
        this.ip=ip;
        this.port=port;
        this.commands = Cmds;
    }
    public TCPRunnable(String ip,int port,String Cmd){
        this.ip=ip;
        this.port=port;
        this.commands = new ArrayList<String>();
        this.commands.add(Cmd);
    }
//</editor-fold>

//<editor-fold defaultstate="collapsed" desc="Static Properties">

//</editor-fold>

//<editor-fold defaultstate="collapsed" desc="Instance Properties">

//</editor-fold>

    public void run() {
        try {
            InetAddress serverAddr = InetAddress.getByName(this.ip);
            SocketAddress socketadd= new InetSocketAddress(serverAddr,port);

            Log.d("TCP","R: Making the socket.");
            Socket socket = new Socket();
                //new Socket();//
            Log.d("TCP","R: Connecting...");
            socket.connect(socketadd, 1500);

        //  PrintWriter out = new PrintWriter (new BufferedWriter( new OutputStreamWriter(socket.getOutputStream())),true);

            InputStream socketReader = socket.getInputStream();
            OutputStream socketWriter = socket.getOutputStream();
             try {
                for (int i = 0; i < commands.size();i++){
                    String Cmd = commands.get(i);
                    Log.d("TCP","R: Sending: '"+Cmd+"'");
                    byte [] iByte;
                    byte[] oByte = new byte[100];//in 32 bit signed integers
                    int CmdLen = 0;
                    CmdLen = commands.get(i).length();
                    oByte[0] = (byte) Integer.parseInt("AF", 16);
                    oByte[1] = (byte) Integer.parseInt("FA", 16);
                    oByte[2] = (byte) Integer.parseInt("F0", 16);
                    oByte[3] = (byte) (255-oByte[2]);
                    oByte[4] = (byte) (Cmd.length() +2);
                    oByte[5] = (byte) (255-oByte[4]);
                    oByte[6] = (byte) Integer.parseInt("07", 16);
                    iByte = Cmd.getBytes();
                    System.arraycopy(iByte, 0, oByte, 7, Cmd.length());
                    oByte[7+CmdLen] = (byte) Integer.parseInt("00",16);
                    oByte[8+CmdLen] = (byte) Integer.parseInt("00",16);

                    Object [] data = new Object [3];
                    data[0]=oByte;
                    data[1]=0;
                    data[2]=(9 + CmdLen);
                    //ping(IP,PORT);
                    //disconnect();
                    //connect();
                    socketWriter.write((byte[])data[0],(Integer)data[1],(Integer)data[2]);
                    socketWriter.flush();
                    Log.d("TCP","R: Sent.");
                    //Thread.sleep(500L);
                }
            }catch (Exception ex){
                Log.e("TCP", "S: Sending failed: "+ex);
            }finally{

                socketWriter.flush();
                socketWriter.close();
                socket.close();
                Log.d("TCP","R: Done.");
             }

        } catch (IOException ex) {
            Log.e("IOEXCEPTION",""+ex);
        }

    }
//<editor-fold defaultstate="collapsed" desc="Static Methods">

//</editor-fold>

//<editor-fold defaultstate="collapsed" desc="Instance Methods">

//</editor-fold>

//<editor-fold defaultstate="collapsed" desc="Accessors">

//</editor-fold>

} 
```

**编辑：** 我仍然无法发送数据。但至少我现在知道为什么“不发送数据”了。这是因为我将数据发送到笔记本电脑而不是机器本身。 **第二次编辑** ，我的代码注释掉 //sleep(500L);，它应该被取消注释。否则，您发送数据太快而无法收到响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T23:07:55.097

那两个包是这样的吗？

```
SYN -->
    <-- SYN ACK 
```

不是有第三个 ACK​​ 回去吗？

我看到您在流中发出 a `flush`，但我不确定操作系统是否尊重该请求。你能尝试发送更多数据，比如几千字节，看看是否有任何结果吗？Wireshark 捕获也很有用。

**更新**

在 pastebin 中，您尝试连接到 .32，这是您的笔记本电脑。在成功的情况下，0.32 连接到 0.42。显然，如果您的笔记本电脑上的端口 20036 未打开且未运行该服务，则您无法连接到它。

有一些方法可以解决这个问题：

A) 如果在笔记本电脑和手机上使用无线连接，您可以将笔记本电脑置于混杂模式以收听所有包。谷歌在这里提供帮助。

B）您可以设置笔记本电脑以将连接重定向到盒子，以便您可以嗅探笔记本电脑。这取决于笔记本电脑的操作系统。

*   对于 Linux，您可以使用类似[redir的东西](http://linux.die.net/man/1/redir)
*   Linux 和 Windows 似乎都有[rinetd](http://www.boutell.com/rinetd/)

C) 直接与盒子通信，并root你的Android设备，然后[直接在Android设备上安装一个数据包捕获软件](https://stackoverflow.com/questions/5121732/monitor-network-activity-in-android-phones)。

**更新**

用于 Windows 的 rinetd：

rinetd.conf：

```
0.0.0.0 port_to_listen_on_laptop box_ip_address target_box_port 
```

然后：

```
rinetd.exe -c rinetd.conf 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T20:44:24.007

不确定这是否是我必须做的唯一改变，但我知道取消注释“Thread.sleep(500L);” 帮助很大。在能够发送任何数据之前，套接字很可能已关闭。所以需要一些时间来让命令在关闭套接字之前通过。