# StackOverflow 问答 11394000-11394999

# model-view-controller - 存储视图数据在哪里？

> ID：11394001
> 
> 赞同：0
> 
> 时间：2012-07-09T11:18:39.857
> 
> 标签：model-view-controller, backbone.js

View 有一些数据，比如选择了哪一行，或者在提交表单之前输入了一些数据。存储这些数据的最佳位置在哪里？

我认为模型是与服务器同步的一切。这是真的吗？也许有像modelView这样的新概念来存储视图数据

ps：我的项目有一些模块，我希望从一个模块退出并再次进入后，显示选定的行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T12:28:54.977

Backbone 没有为视图数据提供特殊的存储。您可以将其存储在您选择的任何位置，这里有两个选项：

A）向视图添加键值：

`this.currentRow = 3;`

B) 向视图添加一个主干模型以保存所有数据：

`this.extraData = new Backbone.Model({currentRow : 3});`

`this.extraData.set('currentRow', 5);`

`this.extraData.get('currentRow');`

我更喜欢第二个，因为您可以使用 Backbone 的所有优点，例如绑定到 currentRow 的更改。模型不必与服务器同步（但考虑将其同步到 localStorage 以将用户的状态保留在应用程序中）。

# delphi - Delphi中图标的线程加载

> ID：11394007
> 
> 赞同：4
> 
> 时间：2012-07-09T11:18:51.987
> 
> 标签：delphi, icons, delphi-2009

使用Delphi 2009，尝试做一个启动器。为了让它“活泼”，我真的很想在后台线程中加载图标。

我使用了此处找到的解决方案： [Can 48x48 or 64x64 icons be getting from the Vista Shell?](https://stackoverflow.com/questions/1703186/can-48x48-or-64x64-icons-be-obtained-from-the-vista-shell)

如果不在线程中运行，这可以正常工作。一旦我把它放在一个线程中，一些图标就不是“获取”的，或者是某种通用图标。我什至尝试序列化线程（实际上使它们过时），但它产生了相同的结果。

所以，问题是：如何在线程中加载图标（具有与链接示例相同的可用选项）？

/拉尔斯

编辑：在 GetIconFromFile 中添加了一些非常基本的错误检查

```
if SHGetFileInfo( PChar( aFile ),
                FILE_ATTRIBUTE_NORMAL,
                SFI,
                SizeOf( TSHFileInfo ),
                SHGFI_ICON
                  or SHGFI_LARGEICON
                  or SHGFI_SHELLICONSIZE
                  or SHGFI_SYSICONINDEX
                  or SHGFI_TYPENAME
                  or SHGFI_DISPLAYNAME ) <> 0 then
begin
  if not Assigned( aIcon ) then
    aIcon := TIcon.Create;
  aImgList := GetImageListSH( SHIL_FLAG );
  aIndex := SFI.iIcon;
  if aImgList <> 0 then
    aIcon.Handle := ImageList_GetIcon( aImgList, aIndex, ILD_NORMAL );
end; 
```

这没有任何区别。我仍然得到一些通用图标（不过，只有在线程中调用它时）

Edit2：线程代码（非常简单）：

```
procedure TIconLoader.Execute;
var
  Item : TGridItem;
  I : TIcon;
begin
  inherited;

  while not terminated do
  begin
    Item := nil;
    if assigned(FOnNeedGridItem) then
    begin
      Synchronize(
          procedure
          begin
            FOnNeedGridItem(Self, Item);
          end
      );
    end;

    if assigned(Item) then
    begin
      GetIconFromFile(Item.FFilename, I, SHIL_EXTRALARGE);
      Synchronize(
          procedure
          begin
            Item.SetIcon(I);
          end
      );
//      I.Free;
    end
    else
      Terminate;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T06:23:08.107

的文档`SHGetFileInfo`指定您必须在调用函数之前初始化 COM。由于 COM 初始化是按线程进行的，因此您需要在线程中初始化 COM。这意味着调用`CoInitialize`或`CoInitializeEx`从`Execute`线程的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T17:50:41.327

也许您可以使用 Delphi 2009 中引入的 TThread.Queue 方法来简化您的线程代码。

一篇提供一些示例和背景信息的文章在这里：

[使用参数同步和排队](http://www.uweraabe.de/Blog/2011/01/30/synchronize-and-queue-with-parameters/)

TThread.Queue 是非阻塞的。这允许为所有图标顺序创建后台工作线程，然后让它们异步加载。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-10T01:25:49.490

尝试移动这个：

```
GetIconFromFile(Item.FFilename, I, SHIL_EXTRALARGE); 
```

成`synchronize`块。你应该在使用后调用[DestroyIcon()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648063%28v=vs.85%29.aspx)`SHGetFileInfo()`。

# asp.net - 计时器计时时文本框失去焦点

> ID：11394010
> 
> 赞同：1
> 
> 时间：2012-07-09T11:18:58.453
> 
> 标签：asp.net

我在页面上的特定部分放置了一个计时器控件，但是每次计时器滴答作响时，另一个部分中的文本框（我有多个文本框）都会失去焦点。

我该如何解决这个问题？我尝试将计时器放在单独的更新面板中。计时器 Tick 事件中的代码是

```
 protected void Timer1_Tick(object sender, EventArgs e)
    {
        if ((List<AllPostInformation>)Session["AllNewsPostCollection"] != (List<AllPostInformation>)Session["CheckExistData"])
        {
            if ((List<AllPostInformation>)Session["AllNewsPostCollection"] != null)
            {

                List<AllPostInformation> o = new List<AllPostInformation>();
                o = (List<AllPostInformation>)Session["AllNewsPostCollection"];
                rptNews.DataSource = o;
                rptNews.DataBind();
            }
            Session["CheckExistData"] = Session["AllNewsPostCollection"];
        }
    } 
```

并在asp页面上

```
 <asp:UpdatePanel runat="server" ID="upTimer">
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="Timer1" EventName="Tick" />
        </Triggers>
        <ContentTemplate>
            <asp:Timer ID="Timer1" runat="server" Interval="5000" />
        </ContentTemplate>
    </asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:45:33.393

如果您查看此链接中的帖子，[Focus lost on partial postback with UserControls inside UpdatePanel](https://stackoverflow.com/questions/4583948/focus-lost-on-partial-postback-with-usercontrols-inside-updatepanel)，您会发现您不需要将计时器控件放在更新面板中，而是将要更新的项目放入。

# javascript - 如何更改不可点击日期的 jquery 日期选择器 css

> ID：11394011
> 
> 赞同：0
> 
> 时间：2012-07-09T11:19:02.423
> 
> 标签：javascript, jquery, datepicker

我正在使用 jquery 日期选择器，我希望我在**beforeShowDay**函数中放入的日期列表应该获得不同的颜色，并且也无法被选择或单击....下面是一些代码

我经常用谷歌搜索这个问题......我找到了我的问题的一半解决方案......它会改变那些特殊日期的颜色，但可以点击，但我希望它们不被**选中**

```
<style type="text/css">
    td.specialDay, table.ui-datepicker-calendar tbody td.specialDay  a { 
    background: none !important;
    background-color: #fffac2 !important; 
    color: black;
     }
</style>
<script type="text/javascript"> 

    var unavailableDates = ["30-7-2012","11-7-2012","15-8-2012"];
    function unavailable(date) {
      dmy = date.getDate() + "-" + (date.getMonth()+1) + "-" + date.getFullYear();
      if ($.inArray(dmy, unavailableDates) < 0) {
        return [true,"","Book Now"];
      } else {
        return [true,"specialDay","Booked"];
      }
    }

    $(function() {

             $( "#datepicker" ).datepicker({

                    minDate: 0, 
                    maxDate: "+3M +10D",
                    beforeShowDay: unavailable 

                });

              });

    </script> 
```

如果有任何解决方案请告诉我...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:37:47.123

在其他情况下，您需要提及 false 以使无法选择喜欢

```
if ($.inArray(dmy, unavailableDates) < 0) {
        return [true,"","Book Now"];
      } else {
        return [false,"specialDay","Booked"];
      } 
```

我发现了你的问题。请检查 dmy 变量。并且工作正常的代码是

```
 var unavailableDates = ["30-7-2012","11-7-2012","15-8-2012"];
    function unavailable(date) {
     var year, month, day, currDate;
     year = String(date.getFullYear());
     month = String(date.getMonth() + 1);
    if (month.length === 1) {
         month = "0" + month;
    }
    day = String(date.getDate());
     if (day.length === 1) {
         day = "0" + day;
     }
      dmy = String(day+'-'+month+'-'+year);
      if ($.inArray(dmy, unavailableDates) < 0) {
        return [true,"","Book Now"];
      } else {
        return [false,"specialDay","Booked"];
      }
    } 
```

希望这可能会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:09:46.173

您在检查数组中的日期时遇到问题。请检查这个工作正常的[链接](http://jsfiddle.net/MYVMw/2/)和正确的方法。我希望它对你有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T06:26:15.827

这对我有用......希望有这种问题的人也能帮助他们

在我的回答中，我已经突出了 3 点，所以据此

在第 1 步和第 2 步中添加此 css 在第 3 步编辑或复制粘贴这样

希望任何寻找这类问题的人都能得到答案..如果没有，请告诉我..如果我能解释更多

```
<style type="text/css">
  .ui-state-active  {      //1.add this
    background: blue !important;
}
.ui-state-active .ui-state-default{   //2\. add this
    background: red !important;
}

</style>
<script type="text/javascript"> 

    var unavailableDates = ["30-7-2012","11-7-2012","15-8-2012"];
    function unavailable(date) {
      dmy = date.getDate() + "-" + (date.getMonth()+1) + "-" + date.getFullYear();
      if ($.inArray(dmy, unavailableDates) < 0) {
        return [true,"","Book Now"];
      } else {
        return [false,"ui-state-active","booked"]; //3\. edit here like this..
      }
    }

    $(function() {

             $( "#datepicker" ).datepicker({

                    minDate: 0, 
                    maxDate: "+3M +10D",
                    beforeShowDay: unavailable 

                });

              });

    </script> 
```

# c# - C# - DataGridView 不能添加行？

> ID：11394012
> 
> 赞同：10
> 
> 时间：2012-07-09T11:19:03.650
> 
> 标签：c#, datagridview

我有一个简单的 C# Windows 窗体应用程序，它应该显示一个 DataGridView。作为 DataBinding，我使用了一个对象（选择了一个名为 Car 的类），它看起来像这样：

```
class Car
{
    public string color { get; set ; }
    public int maxspeed { get; set; }

    public Car (string color, int maxspeed) {
        this.color = color;
        this.maxspeed = maxspeed;
    }
} 
```

但是，当我将 DataGridView 属性设置`AllowUserToAddRows`为时`true`，仍然没有小 * 允许我添加行。

有人建议设置`carBindingSource.AllowAdd`为`true`，但是，当我这样做时，我得到一个`MissingMethodException`说我的构造函数找不到。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-09T14:58:37.210

您的 Car 类需要有一个无参数的构造函数，并且您的数据源需要类似于 BindingList

将 Car 类更改为：

```
class Car
{
    public string color { get; set ; }
    public int maxspeed { get; set; }

    public Car() {
    }

    public Car (string color, int maxspeed) {
        this.color = color;
        this.maxspeed = maxspeed;
    }
} 
```

然后绑定这样的东西：

```
BindingList<Car> carList = new BindingList<Car>();

dataGridView1.DataSource = carList; 
```

您也可以为此使用 BindingSource，您不必这样做，但 BindingSource 提供了一些有时可能需要的额外功能。

* * *

如果由于某种原因您绝对不能添加无参数构造函数，那么您可以处理绑定源的添加新事件并调用 Car 参数化构造函数：

设置绑定：

```
BindingList<Car> carList = new BindingList<Car>();
BindingSource bs = new BindingSource();
bs.DataSource = carList;
bs.AddingNew +=
    new AddingNewEventHandler(bindingSource_AddingNew);

bs.AllowNew = true;
dataGridView1.DataSource = bs; 
```

和处理程序代码：

```
void bindingSource_AddingNew(object sender, AddingNewEventArgs e)
{
    e.NewObject = new Car("",0);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T11:37:25.993

您需要添加AddingNew 事件处理程序：

```
public partial class Form1 : Form
{
    private BindingSource carBindingSource = new BindingSource();

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        dataGridView1.DataSource = carBindingSource;

        this.carBindingSource.AddingNew +=
        new AddingNewEventHandler(carBindingSource_AddingNew);

        carBindingSource.AllowNew = true;

    }

    void carBindingSource_AddingNew(object sender, AddingNewEventArgs e)
    {
        e.NewObject = new Car();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-22T22:20:24.300

我最近发现，如果你使用你实现自己的绑定列表，`IBindingList`你必须`true`在你`SupportsChangeNotification`的除了`AllowNew`.

但是，[MSDN](https://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.allowusertoaddrows(v=vs.110).aspx)文章`DataGridView.AllowUserToAddRows`仅指定了以下注释：

> 如果 DataGridView 绑定到数据，如果此属性和数据源的 IBindingList.AllowNew 属性都设置为 true，则允许用户添加行。

# python - 带有 sqlite3 模块的 Centos 上的 python 2.7.3 问题

> ID：11394013
> 
> 赞同：2
> 
> 时间：2012-07-09T11:19:06.257
> 
> 标签：python, sqlite, python-2.7, centos

我想在我的 centos 服务器上使用 sqlite3，但它总是报告相同的错误（已安装模块）....

```
Python 2.7.3 (default, Jun 29 2012, 19:03:18) 
[GCC 4.4.6 20110731 (Red Hat 4.4.6-3)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import sqlite3
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "sqlite3/__init__.py", line 24, in <module>
    from dbapi2 import *
  File "sqlite3/dbapi2.py", line 27, in <module>
    from _sqlite3 import *
ImportError: No module named _sqlite3 
```

在 ubuntu 等上工作正常....关于我在这里缺少什么的任何想法？

* * *

我再次重新编译 2.7.3，它很好地捕获了 sqlite3 库。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-02-26T03:40:43.260

如果你在 RHEL/centos 6 下，你可以试试这个：

```
cp /usr/lib64/python2.6/lib-dynload/_sqlite3.so /usr/local/lib/python2.7/sqlite3/ 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-07T23:20:18.133

这适用于 CentOS：

`ln -s /usr/lib64/python2.6/lib-dynload/_sqlite3.so /usr/local/lib/python2.7/lib-dynload/`

`/usr/local/lib/python2.7/`已经在 python 的路径上。无需复制文件或添加 python 的路径。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-23T09:10:09.300

首先找到：

```
find / -name _sqlite3.so
/usr/usr/lib/python2.6/lib-dynload/_sqlite3.so
/usr/local/service/python2.7/lib/python2.7/lib-dynload/_sqlite3.so
/usr/lib64/python2.6/lib-dynload/_sqlite3.so 
```

下一个

```
cp /usr/local/service/python2.7/lib/python2.7/lib-dynload/_sqlite3.so /usr/local/lib/python2.7/sqlite3/ 
```

这个centso 6.5 python2.7.10

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-07T18:07:52.173

如果您在 Red Hat 5 或 CentOS 5 机器上使用 Python 2.7.3，那么在从源代码构建 Python 时，存在一个阻止 SQLite 模块正确编译的错误；运行时应该会看到一条错误消息`make`。它已在 2.7.4 中修复，因此您最好的选择是升级。

如果这是不可能的，那么有一个可用的补丁。这是[错误页面和补丁](http://bugs.python.org/issue14572)。

# c# - 将“：”分隔字符串拆分为给定数量的块的最快方法是什么，其中结果/记录长度是可变的

> ID：11394020
> 
> 赞同：2
> 
> 时间：2012-07-09T11:19:34.807
> 
> 标签：c#

我从 TCP 侦听器接受了一个大字符串，格式如下

“1,7620257787,0123456789,99,0922337203,9223372036,32.5455,87,12.7857,1 / 1 / 2012,9223372036：1,7620257787,0123456789,99,0922337203,9223372036,32.5455,87,12.7857：2012/2/1 ，234234234：3,7620257787,01234343456789,99,0922337203,9223372036,32.5455,87,12.7857,1 / 1 / 2012,9223372036：34,76202343457787,012434343456789,93339,34340922337203,9223372036,32.5455,87,12.7857,1 / 1 /2012,9223372036”

您可以看到这是一个 : 分隔的字符串，其中包含以逗号分隔的字段的记录。

我正在寻找将字符串拆分为给定数量的块的最佳（最快）方法，并注意一个块应包含完整记录（字符串最多':'）

或其他说法，不应该有任何不以以下结尾的块：

例如 20 MB 字符串到 4 个 5 MB 的块，每个块都有正确的记录（因此每个块的大小可能不完全是 5 MB，但非常接近它，所有 4 个块的总和将是 20 MB）

我希望你能理解我的问题（抱歉英语不好）

我喜欢下面的链接，但是在拆分时它并没有处理完整的记录，也不知道这是否是最好和最快的方法。

[按长度变量将字符串拆分为更小的字符串](https://stackoverflow.com/questions/3008718/split-string-into-smaller-strings-by-length-variable)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T11:27:39.937

我不知道“大字符串”有多大，但最初我会尝试使用[String.Split](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T11:57:34.323

这个想法是将数据的长度划分为所需的块数，然后向后看以搜索当前块中的最后一个 sep。

```
 private string[] splitToBlocks(string data, int numBlocks, char sep)
    {
        // We return an array of the request length
        if (numBlocks <= 1 || data.Length == 0)
        {
            return new string [] { data };
        }

        string[] result = new string[numBlocks];

        // The optimal size of each block
        int blockLen = (data.Length / numBlocks);

        int idx = 0; int pos = 0; int lastSepPos = blockLen;
        while (idx < numBlocks)
        {
            // Search backwards for the first sep starting from the lastSepPos
            char c = data[lastSepPos];
            while (c != sep) { lastSepPos--; c = data[lastSepPos]; }

            // Get the block data in the result array
            result[idx] = data.Substring(pos, (lastSepPos + 1) - pos);

            // Reposition for then next block
            idx++;
            pos = lastSepPos + 1;

            if(idx == numBlocks-1)
                lastSepPos = data.Length - 1;
            else
                lastSepPos = blockLen * (idx + 1);
        }
        return result;
    } 
```

请测试一下。我还没有完全测试边缘情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T12:41:41.427

好的，我建议你分两个步骤：

1.  将字符串拆分成块（见下文）
2.  检查块的完整性

在 linq 的帮助下将字符串拆分为块（linq 扩展方法取自[Split a collection into `n` parts with LINQ?](https://stackoverflow.com/questions/438188/split-a-collection-into-n-parts-with-linq)）：

```
string tcpstring = "chunk1 : chunck2 : chunk3: chunk4 : chunck5 : chunk6";
int numOfChunks = 4;

var chunks = (from string z in (tcpstring.Split(':').AsEnumerable()) select z).Split(numOfChunks);

List<string> result = new List<string>();
foreach (IEnumerable<string> chunk in chunks)
{
    result.Add(string.Join(":",chunk));                             
}

.......

static class LinqExtensions
{
    public static IEnumerable<IEnumerable<T>> Split<T>(this IEnumerable<T> list, int parts)
    {
        int i = 0;
        var splits = from item in list
                     group item by i++ % parts into part
                     select part.AsEnumerable();
        return splits;
    }
} 
```

我清楚地了解你的目标吗？

**[编辑]** 在我看来，如果考虑性能，更好的方法是使用 String.Split 方法进行分块

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T11:24:00.750

您似乎想在“：”上拆分（您可以使用拆分方法）。然后你必须在拆分到每个已拆分的块后添加“：”。（然后，您可以在“，”上拆分所有已被“：”拆分的字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T11:26:45.543

```
int index = yourstring.IndexOf(":");

string[] whatever = string.Substring(0,index);

yourstring = yourstring.Substring(index); //make a new string without the part you just cut out. 
```

这是一个通用视图示例，您需要做的就是建立一个迭代，该迭代将在遇到“：”字符时运行；干杯...

# objective-c - QLPreviewController 仅显示单个文件

> ID：11394021
> 
> 赞同：0
> 
> 时间：2012-07-09T11:19:37.803
> 
> 标签：objective-c, ios, events, qlpreviewcontroller

我正在使用 QLPreviewController 来显示一组文件。但是，它只显示第一个，我似乎无法滑动或做任何事情来显示第二个。我究竟做错了什么？我必须手动设置吗？如果是这样 - 我将如何去做？

这是来自我的 AppDelegate.m：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // normal viewcontroller init here 

    [self showPreview] ;

    return YES;
}

NSArray* documents ;
QLPreviewController* preview ;

- (void) showPreview
{
    documents = [[NSArray alloc] initWithObjects: @"photo" , @"photo2" , nil ] ;

    preview = [[QLPreviewController alloc] init];
    preview.dataSource = self;
    preview.delegate = self;

    preview.view.frame = [[UIScreen mainScreen] bounds];
    //save a reference to the preview controller in an ivar
    //  self.previewController = preview;
    //refresh the preview controller
    [preview reloadData];
    [[preview view] setNeedsLayout];
    [[preview view] setNeedsDisplay];
    [preview refreshCurrentPreviewItem];
    preview.view.userInteractionEnabled = YES;

    //add it  
    [self.viewController.view addSubview:preview.view];
} 
```

我还在同一个 AppDelegate.m 文件中声明了两个回调函数：

```
- (id <QLPreviewItem>) previewController: (QLPreviewController *) controller previewItemAtIndex: (NSInteger) index
{
    NSString* filename = [documents objectAtIndex:index] ;      //  @"photo" ; 
    NSURL* returnURL = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource: filename ofType:@"jpg" ]] ;

    return returnURL ;
}

- (NSInteger) numberOfPreviewItemsInPreviewController: (QLPreviewController *) controller
{
    return [documents count];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:44:43.533

你显示错了。QLPreviewController 是一个 UIViewController，这意味着您基本上有两种显示方式：

1.  将其推送到您的 UINavigationController 中。
2.  以模态方式显示它（这可以在有或没有 UINavigationController 的情况下完成 - 取决于您是否需要导航栏）。

如果您选择选项 2，您将获得“免费”导航箭头以在项目之间切换。对于选项 1，您需要自己创建箭头。

以下内容取自[QLPreviewController](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/QLPreviewController_Class/Reference/Reference.html)文档：

> 如果列表中有多个项目，模态呈现（即全屏）控制器会显示导航箭头，让用户在项目之间切换。对于使用导航控制器推送的 Quick Look 预览控制器，您可以在导航栏中提供用于在导航列表中移动的按钮。

# tomcat - 如何在 Tomcat 中两次部署相同的 Grails 应用程序？

> ID：11394022
> 
> 赞同：0
> 
> 时间：2012-07-09T11:19:38.703
> 
> 标签：tomcat, grails, deployment, war

如果我在 Tomcat 中两次部署相同的 Grails 应用程序（即 myApplication_first.war、myApplication_second.war），则 Tomcat 无法部署 WAR 文件，可重现。它抱怨类 XYZ 已经存在于 TEMP 文件夹中（这是真的，由于以前的部署）。因此，更改全局 Tomcat TEMP 文件夹没有任何意义，因为两个项目无论如何都会再次使用同一个文件夹。

我通常知道如何部署应用程序两次，但不是在 Grails 上下文中，因为它自己已经管理了很多东西。

有没有办法实现这个计划？

我们使用 Grails 版本 1.3.7。

我搜索了很多可能的解决方案，但没有一个适合我的需求。

*   在多个 Tomcat 实例上部署
*   仅部署一个应用程序并使用一些唯一标识符来识别提供单个数据源和内容的强制/客户端。（请参阅[在 tomcat 上多次部署相同的应用程序](https://stackoverflow.com/questions/8092505/deploy-the-same-application-multiple-times-on-tomcat)）
*   用另一个应用程序服务器替换 Tomcat

我想到但对我来说仍然有点奇怪的一种方法是，在部署期间动态更改所有类的包（使用 ANT 或类似的东西）。这样它们就不会在Tomcat TEMP 文件夹中发生碰撞。这可能是一个潜在的解决方案吗？甚至有可能以一种优雅的方式吗？

亲切的问候，克里斯托弗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T21:53:12.873

Checkout the [tomcat manager application](http://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html). It has a reload option that might solve your issue.

Some companies disable the manager (additional webapp that comes with the tomcat distribution). I understand the security concerns, but this can be addresses, the manager definately simplifies app deployment.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T18:32:25.893

我已经能够毫无问题地将两个几乎相同的 grails 1.3.7 应用程序部署到同一个 tomcat 7 实例上。第二个应用程序基本上是第一个应用程序的克隆，只是对一些源文件进行了一些小改动。每个应用程序都有不同的 WAR 名称（看起来您已经在这样做了），而且我还确保 Config.groovy 中的 grails.app.context 对于每个应用程序都是不同的。我相信tomcat在一些早期版本的WAR文件名中存在下划线问题，但我不知道最新版本是否仍然如此。尝试使用不带下划线的不同 WAR 名称，并编辑 grails.app.context 以匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T13:22:35.877

我有类似的情况，我的解决方案是将应用程序“转换”为 grails 插件，然后创建更多（我有 6 个）应用程序，这些应用程序使用了这个插件，并且在每个应用程序中我都调整了配置（DataSource 等）。即使最终的 WAR 文件几乎 100% 相同，它也能正常工作。

您是否也尝试过 TomCat 虚拟主机？

# smarty - 没有文件属性的 Smarty {include} 安全吗？

> ID：11394023
> 
> 赞同：0
> 
> 时间：2012-07-09T11:19:45.817
> 
> 标签：smarty, smarty3

例如，`{include 'path/to/template.tpl'}`？

~~所述格式的文档中没有提及，但~~它似乎与以下内容相同：

```
{include file='path/to/template.tpl'} 
```

这是一个怪癖，还是设计使然？当我不传递其他变量时，我更喜欢更简洁的语法，但想确保它是一种可接受的格式（版本 3.0.7）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:23:30.113

`{include "foo"}`等`{extend "foo"}`是 Smarty3 中引入的简写符号（故意）。使用它们是安全的。其中有很多，例如`{foreach $foo as $bar}`（与 相比`{foreach from=$foo item="bar"}`）。它们在性能方面没有区别，因此实际上归结为您的个人/团队偏好。

# plone - setText() 在 Plone 对象上失败

> ID：11394024
> 
> 赞同：4
> 
> 时间：2012-07-09T11:19:45.870
> 
> 标签：plone, ploneformgen

我担心我可能会忽略一些非常明显的东西，但我会很感激任何建议。我在 Plone 的 Ploneformgen 表单文件夹中有一个名为“设置”的纯文本文件。下面的代码成功地改变了这个文件中的文本，当我把它放在一个 Python 脚本中时，当使用表单字段之一中的覆盖（例如，字符串字段中的默认表达式）查看表单时调用。

```
obj = context['settings']
obj.setText('Some text:2;More text:2')
obj.reindexObject() 
```

我的问题是我希望能够使用自定义脚本适配器或使用表单的验证后脚本覆盖调用的脚本来修改“设置”中的文本。这些都不起作用（并且用于验证字段的各个字段中的覆盖似乎也不允许这样做）。

setText() 在某些地方工作而不在其他地方工作有什么原因（这条线`obj = context['settings']`似乎没有问题）？我错过了什么？

据我所知，这不是权限问题，而且我有点困惑的是，如果在查看表单时调用的代码如果在提交表单时调用则不起作用。

我可以创建一个新的文本文件并使用以这些方式调用的脚本向其中添加文本没问题：这似乎是调用`setText()`现有文件的特定问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:50:46.150

解决方案是在调用时显式设置 mimetype `setText()`：

```
obj.setText("Some text", mimetype='text/plain') 
```

或者

```
obj.setText("Some text", mimetype='text/html') 
```

作为适当的。我不知道为什么会这样，但确实如此。

# vba - 将 vba 中的“#N/A”值检查到一个范围内

> ID：11394029
> 
> 赞同：5
> 
> 时间：2012-07-09T11:19:54.227
> 
> 标签：vba, error-handling, excel

我想`#N/A`用 VBA 将一个值检查到 excel 中。所以经过一番研究，我做了这个代码：

```
Set MyTab = Range(name)
If (Not IsEmpty(MyTab.value)) And (MyTab(i, j).value <> CVErr(xlErrNA)) Then
   Call BuildRequest(False, id, MyTab, i, j)
End If 
```

但是当它传递时`MyTab(i, j).value <> CVErr(xlErrNA)`我有一个错误`13(type error)`，我不知道为什么。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-09T11:34:05.557

您首先需要检查单元格是否包含错误：

```
If IsError(MyTab(i, j).Value) Then
    If MyTab(i, j).Value <> CVErr(xlErrNA) Then 
```

除非您确实想知道错误的类型（#N/A、#DIV/0！等），否则您不妨将测试替换为：

```
If (Not IsEmpty(MyTab.value)) And (Not IsError(MyTab(i, j).value)) Then 
```

如果需要检查错误类型，可以这样写：

```
Dim shouldBuildRequest As Boolean

shouldBuildRequest = Not IsEmpty(MyTab.value)
If IsError(MyTab(i, j).Value) Then
    shouldBuildRequest = shouldBuildRequest AND (MyTab(i, j).Value <> CVErr(xlErrNA))
End If

If shouldBuildRequest Then
    Call BuildRequest(False, id, MyTab, i, j)
End If 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-09T11:36:55.270

另一种检查错误的方法

```
If CVErr(MyTab(i, j).Value) = CVErr(xlErrNA) 
```

# java - javacv上的轮廓数不正确？

> ID：11394030
> 
> 赞同：5
> 
> 时间：2012-07-09T11:19:55.847
> 
> 标签：java, opencv, javacv

我编写了简单的代码来检索图像中的轮廓数并获取图像中的轮廓数。但它总是给出错误的答案。请问有人可以解释一下吗？

```
 import com.googlecode.javacpp.Loader;
 import com.googlecode.javacv.CanvasFrame;
 import static com.googlecode.javacpp.Loader.*;
 import static com.googlecode.javacv.cpp.opencv_core.*;
 import static com.googlecode.javacv.cpp.opencv_imgproc.*;
 import static com.googlecode.javacv.cpp.opencv_highgui.*;
 import java.io.File;
 import javax.swing.JFileChooser;

 public class TestBeam {
     public static void main(String[] args) {
         CvMemStorage storage=CvMemStorage.create();
         CvSeq squares = new CvContour();
         squares = cvCreateSeq(0, sizeof(CvContour.class), sizeof(CvSeq.class), storage);
         JFileChooser f=new JFileChooser();
         int result=f.showOpenDialog(f);//show dialog box to choose files
             File myfile=null;
             String path="";
         if(result==0){
             myfile=f.getSelectedFile();//selected file taken to myfile
             path=myfile.getAbsolutePath();//get the path of the file
         }
         IplImage src = cvLoadImage(path);//hear path is actual path to image
         IplImage grayImage    = IplImage.create(src.width(), src.height(), IPL_DEPTH_8U, 1);
         cvCvtColor(src, grayImage, CV_RGB2GRAY);
         cvThreshold(grayImage, grayImage, 127, 255, CV_THRESH_BINARY);
         CvSeq cvSeq=new CvSeq();
         CvMemStorage memory=CvMemStorage.create();
         cvFindContours(grayImage, memory, cvSeq, Loader.sizeof(CvContour.class), CV_RETR_EXTERNAL, CV_CHAIN_APPROX_SIMPLE);
         System.out.println(cvSeq.elem_size());
         CanvasFrame cnvs=new CanvasFrame("Beam");
         cnvs.setDefaultCloseOperation(javax.swing.JFrame.EXIT_ON_CLOSE);
         cnvs.showImage(src);
         //cvShowImage("Final ", src);

     }
 } 
```

这是我使用的示例图像

![在此处输入图像描述](../Images/b25e842e8cd5ab3f75e2af5a2844553b.png)

但是代码总是将输出返回为 8。请有人解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:20:02.057

cvSeq.elem_size() 将以字节为单位返回序列元素的大小，而不是轮廓的数量。这就是为什么每次输出都是 8 的原因。请参阅以下链接以获取更多信息。 [http://opencv.willowgarage.com/documentation/dynamic_structures.html#cvseq](http://opencv.willowgarage.com/documentation/dynamic_structures.html#cvseq)

要查找轮廓数，您可以使用以下代码段

```
int i = 0;
while(cvSeq != null){
i = i + 1;
cvSeq = cvSeq.h_next();
}
System.out.println(i); 
```

使用您提供的参数 CV_RETR_EXTERNAL 将仅提供外部轮廓，即图像中的图像边界（前提是您没有反转图像）。您可以使用 CV_RETR_LIST 获取所有轮廓。有关参数的更多信息，请访问以下链接。 [http://opencv.willowgarage.com/documentation/structural_analysis_and_shape_descriptors.html#findcontours](http://opencv.willowgarage.com/documentation/structural_analysis_and_shape_descriptors.html#findcontours)

# android - android在视图下绘制动画

> ID：11394032
> 
> 赞同：-1
> 
> 时间：2012-07-09T11:20:12.043
> 
> 标签：android, android-layout, android-animation, android-view

我有层次结构：

```
Buttons  (Button childs)
   myView (View child)
      RelativeView (has background image) 
```

在 myView 中，我绘制了具有动画的圆圈（缩放 0.5 到 1.0 大小），它的性能非常低（绘制速度非常慢）

我不能使用surfaceview，因为surfaceview在任何视图下都不能透明，如果它是
透明的，它必须是 `surface.setZOrderOnTop(true);`

该怎么办？

附言

绘图代码

```
 // Square is Button that need to has animated circle under it
for (int i = 0; i < squares.size(); i++) {
        Square square = squares.get(i);
        if (square.animIndex == -1)
            continue;
        int left = square.getLeft();
        int top = getRelativeTop(square);

        int w = (int) (square.animIndex * square.getMeasuredWidth() * 4 / 10f);

        square.animIndex++;

        if (square.animIndex > 10) {
            square.animIndex = -1;
        }
              //note is circle bitmap
        c.drawBitmap(note, null, new Rect(left - w / 2 + square.getMeasuredWidth() / 2, top - w / 2
                + square.getMeasuredHeight() / 2, left - w / 2 + square.getMeasuredWidth() / 2 + w, top
                - w / 2 + square.getMeasuredHeight() / 2 + w), null);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:25:19.747

如果没有看到您的完整代码，很难看出瓶颈的原因可能是什么，并且从您的问题中也不太清楚您要准确绘制什么，所以我只能给您一些指示。

如果您发布的代码是`onDraw()`方法，那么我会考虑将所有计算移出并移至另一个后台线程。因为`onDraw()`是在主（GUI）线程中执行的，所以您应该尽可能**少**地进行计算，即您的位图应该准备好转储到屏幕上，并且任何参数都应该作为变量提供，即不要调用`getMeasuredHeight()`。`onDraw()`

你也在做演员：

> int w = (int) (square.animIndex * square.getMeasuredWidth() * 4 / 10f);

如果可以，请避免混合浮点数和整数，但再次从 onDraw() 方法中获取此计算。

Fianlly 因为“onDraw()”在主线程中运行，所以您必须不要“占用”计算线程。这将导致您的应用程序无响应/缓慢，因此您的用户将卸载。您尝试绘制的内容可能没有任何问题，只是**您**的处理方式导致了问题。

# c# - 如何解决 System.ArgumentException：在 mvc 3 中已经添加了具有相同键的项目？

> ID：11394033
> 
> 赞同：0
> 
> 时间：2012-07-09T11:20:19.533
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, model-view-controller

我创建了 ViewModel 来测试这个答案：[How to fill ViewModel which has List<T> property after click submit button mvc 3?](https://stackoverflow.com/questions/11360795/how-to-fill-viewmodel-which-has-listt-property-after-clicking-submit-button-mv)

我需要复选框列表，请查看 WeeklyModel.Also WeeklyViewModel。我想在复选框中列出 alldoays。在下面说我的错误。这是愚蠢的错误。我无法理解 reson to solve 怎么解决呢？谢谢...请看有帮助（我需要什么）文章：[我何时使用视图模型、部分、模板并使用 MVC 3](https://stackoverflow.com/questions/6157348/when-do-i-use-view-models-partials-templates-and-handle-child-bindings-with-mv) 模型处理子绑​​定：

```
 public class WeeklyModel

        {
            public string Name { get; set; }
            public string Value { get; set; }
            public bool IsChecked { get; set; }
        }

       public class WeeklyViewModel
        {
            public IEnumerable<WeeklyModel> Settings { get; set; }
            public WeeklyViewModel()
            {
                Settings = new List<WeeklyModel>();
            }

        } 
```

控制器：

```
 public ActionResult CreateWeekly()
       {
           var model = new WeeklyViewModel();
            List<WeeklyModel> li = new List<WeeklyModel>();
            li.Add( new WeeklyModel(){ Name="Monday", Value="mon", IsChecked=false});
            model.Settings = li;
               return View(model);
       }
       [HttpPost]
        public ActionResult CreateWeekly( WeeklyViewModel weekly)
       {

           return View("CreateWeekly", weekly);
       } 
```

我创建了 Views/Trigger/EditorTemplates/WeeklyModels.aspx ：

```
 <%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/ChildSite.Master" Inherits="System.Web.Mvc.ViewPage<GenSystem.Models.WeeklyModel>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">

</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
<%:Html.CheckBoxFor(m=>m.IsChecked) %>
<%:Html.LabelFor(m=>m.IsChecked,Model.Name) %>
<%:Html.HiddenFor(m=>m.Name) %>
<%:Html.HiddenFor(m=>m.Value) %>

</asp:Content> 
```

看法 ：

```
 <%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/ChildSite.Master" Inherits="System.Web.Mvc.ViewPage<GenSystem.Models.WeeklyViewModel>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    CreateWeekly
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

<% 

    using (Html.BeginForm())
    {
          %>

      <div>
     <%:Html.EditorFor(m => m.Settings)%>
      </div>
    <br />
       <input value="GenerateForWeekly" name="submitButton" type="submit" />
          <%} %>
</asp:Content> 
```

如何解决此错误：

System.ArgumentException：已添加具有相同键的项目。在 System.ThrowHelper.ThrowArgumentException(ExceptionResource 资源) 在 System.Collections.Generic.Dictionary `2.Insert(TKey key, TValue value, Boolean add) at System.Collections.Generic.Dictionary`2.Add(TKey key, TValue value) 在 Transformer.NET.Token.ParseAnchors() 在 Transformer.NET.TextTransformer.Parse(列出`1 tokensType, Dictionary`2 个变量) 在 Transformer.NET.TextTransformer.Transform(List`1 tokensType, Dictionary`2 个变量）在 Transformer.NET.TextTransformer.Transform(List`1 tokensType) 在 Transformer.NET.TextTransformer.Transform() 在 Ext.Net.ExtNetTransformer.Transform(String text) 在 Ext.Net.InitScriptFilter.Transform() 在Ext.Net.InitScriptFilter.Flush() 在 System.Web.HttpWriter.Filter(Boolean finalFiltering) 在 System.Web.HttpResponse.FilterOutput() 在 System.Web.HttpApplication.CallFilterExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute( ) 在 System.Web.HttpApplication.ExecuteStep(IExecutionStep 步骤，Boolean& completedSynchronously)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:25:01.280

编辑器模板应该是`.ascx`控件，而不是`.aspx`页面。您的文件也被错误命名。它被命名`WeeklyModels.aspx`但正确的名称是`WeeklyModel.ascx`（没有`s`），因为你的类被称为`WeeklyModel`而不是`WeeklyModels`。

所以在里面`~/Views/Shared/EditorTemplates/WeeklyModel.ascx`你可以放以下内容：

```
<%@ Control 
    Language="C#" 
    Inherits="System.Web.Mvc.ViewUserControl<GenSystem.Models.WeeklyModels>" 
%>
<%= Html.CheckBoxFor(m => m.IsChecked) %>
<%= Html.LabelFor(m => m.IsChecked, Model.Name) %>
<%= Html.HiddenFor(m => m.Name) %>
<%= Html.HiddenFor(m => m.Value) %> 
```

在您的主视图中`CreateWeekly.aspx`：

```
<%@ Page 
    Title="" 
    Language="C#" 
    MasterPageFile="~/Views/Shared/ChildSite.Master" 
    Inherits="System.Web.Mvc.ViewPage<GenSystem.Models.WeeklyViewModel>" 
%>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    CreateWeekly
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <% using (Html.BeginForm()) { %>
        <div>
            <%= Html.EditorFor(m => m.Settings) %>
        </div>
        <br />
        <input value="GenerateForWeekly" name="submitButton" type="submit" />
    <% } %>
</asp:Content> 
```

# scala - 为什么 scala 的模式处理在用于类型匹配的 for 循环中不起作用？

> ID：11394034
> 
> 赞同：8
> 
> 时间：2012-07-09T11:20:20.470
> 
> 标签：scala, casting, pattern-matching

我正在针对一个 API 进行编码，该 API 可以让我访问远程文件系统。API 返回文件和目录列表作为节点对象列表（文件和目录的父级）。

我只想在目录上工作，而忽略文件。我尝试在`for`循环中使用类型模式匹配，但它不起作用：

```
for {
    dir: CSDir <- workarea.getChildren() // <-- I'm getting an error here complaining about type conversion
} {
    println(dir)
} 
```

这是一个类似的示例，使用 scala 基本对象在没有依赖关系的情况下运行它：

```
val listOfBaseObjects:List[Any] = List[Any]("a string", 1:Integer);

for (x: String <- listOfObjects) {
  println(x)
} 
```

我最终在 for 循环中使用了常规模式匹配，并且效果很好：

```
// This works fien
for (child <- workarea.getChildren()) {
  child match {
    case dir: CSDir => println(dir)
    case _ => println("do not nothing")
  }
} 
```

## 问题：

你能告诉我为什么第一个/第二个例子在 scala 1.9 中不起作用吗？

在“Scala 编程”中， `for`循环被宣传为使用相同的模式匹配，`match`因此它应该可以工作。

如果 for 和 match 不同，如果您能指出一些更详细的文章，那就太好了。分配中的模式匹配怎么样？

## 更新：

我不能接受一个回答说不可能跳过 for 循环中的元素，因为这与“Prog. in scala”相矛盾。这是第 23.1 节的一个片段：

> `pat <- expr`...该模式`pat`与该列表的所有元素一一匹配。...如果匹配失败，则不会抛出 MatchError。相反，该元素只是从迭代中丢弃

事实上，下面的例子工作得很好：

```
scala> val list = List( (1,2), 1, 3, (3,4))
scala> for ((x,y) <- list) { println (x +","+ y) }
1,2
3,4 
```

为什么类型匹配不起作用？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-09T13:05:50.463

这是[长期存在的问题 900](https://issues.scala-lang.org/browse/SI-900)，之前已经讨论过很多次。常见的解决方法是使用类似的东西：

```
for (y@(_y:String) <- listOfBaseObjects) {
    println(y)
} 
```

Jason Zaugg 在上述票证的评论中提供了一个更好的版本：

```
object Typed { def unapply[A](a: A) = Some(a) }

for (Typed(y : String) <- listOfBaseObjects) {
    println(y)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T11:27:50.977

你想要做的基本上是：迭代所有`workarea.getChildren()`类型的元素`CSDir`（换句话说：匹配一些标准）。~~普通循环/for 理解迭代*所有*元素。你不能说：遍历所有具有这种类型的元素并跳过其他元素。你必须更明确。~~

你有什么想法：

```
workarea.getChildren() collect {case dir: CSDir => dir} foreach println 
```

它完全符合您的要求：*收集*所有元素`workarea.getChildren()`并*为*它们中的每一个调用`println`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-06-19T18:50:20.433

这个怎么样：

```
val listOfBaseObjects: List[Any] = List[Any]("a string", 1:Integer);

for (x <- listOfBaseObjects if x.isInstanceOf[String]) {
  println(x)
} 
```

# java - 正则表达式 - 允许输入键（java）

> ID：11394035
> 
> 赞同：0
> 
> 时间：2012-07-09T11:20:20.703
> 
> 标签：java, regex

在我的 Web 应用程序中，我希望用户只输入 SELECT 语句。我正在使用以下正则表达式来验证条目。

```
(^(?i)select.+)(\\w|\\W) 
```

上面的代码确保条目应该以 SELECT 开头，然后是 WHITESPACE（示例：SELECT * FROM TABLE1）但是当用户在创建查询时使用“ENTER”键时，正则表达式会失败。所以我想要 REGEX 到所有 'ENTER' 键。谁能告诉我 REGEX 的语法以允许用户在文本区域中使用“ENTER”键吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T11:26:54.393

小题外话：你的代码没有做任何事情来确保后面的空格，`SELECT`因为点匹配除换行符以外的任何字符。

但是现在，要回答您的问题：您需要`(?s)`标志以允许点也匹配换行符。另外，您应该使用`\s`令牌来断言空格的存在。尾随`(\w|\W)`相当神秘 - 它也匹配任何字符......

所以我建议这样做：

```
"^(?is)select\\s.*" 
```

甚至

```
"^(?i)select\\s" 
```

因为这已经足以检查字符串是否以`SELECT<space>`.

# php - 在不知道输入名称的情况下将多个表单保存到会话

> ID：11394038
> 
> 赞同：0
> 
> 时间：2012-07-09T11:20:30.207
> 
> 标签：php, html, ajax, forms, session

```
 <form id="questions_1">
     <div data-role="collapsible-set" data-theme="" data-content-theme="" id='q1'>
      <!-- GETS QUESTIONS FROM THE DATABASE -->
     </div>
    </form> 
```

所以我有一个表格可以持续 5 页，如上所示，我想保存每个步骤的所有数据，我正在考虑将每个表格的所有数据传递到 .php 页面：

```
 function formSubmit1() {
     $("#questions_1").submit(function() {
      $.post('addToSession.php',$("#questions_1").serialize().function(data) {
      });
     return false;
     });
    } 
```

通过将以下代码添加到每个“提交”/下一页按钮，我想我可以调用该函数。

```
 <a data-role="button" href="#questions_2" onClick=formSubmit1()>Next</a> 
```

这可能需要一些自定义，但我真正不确定的部分是如何在不知道其 ID 的情况下获取所有数据。这个想法是让这个投票中的问题在顺序、大小和问题上有所不同，所以我需要一个可以处理任何输入的通用代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:28:41.553

用于`$_REQUEST`在提交时从表单中获取数据。拿到数据后`$_SESSION['name'] = $_REQUEST`。

# java - 如何在 apache karaf 中安装和运行 osgi bundle

> ID：11394040
> 
> 赞同：7
> 
> 时间：2012-07-09T11:20:39.567
> 
> 标签：java, apache, osgi, bundle

我有一个简单的问题。我按照本[教程](http://www.javaworld.com/javaworld/jw-03-2008/jw-03-osgi1.html?page=2)创建了一个 HelloWorld osgi 包。如何使用 apache [Karaf](http://karaf.apache.org/manual/latest-2.2.x/index.html)安装和启动这个包？如何使用 osgi:install 命令引用捆绑包？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T11:39:17.697

您可以将捆绑包放入“部署”目录，Karaf 会注意到并安装它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-10T09:24:19.880

好的，这是另一个问题，但这里是：

您几乎走在正确的轨道上，我已经测试了您链接到的 Karaf 开发人员指南中的那个（*第二个*mvn 调用）。文档不太正确，我需要更改两件事：

*   版本已关闭，2.2.5 确实有效（在我的机器上），将其更改为 2.2.8 似乎有帮助。
*   包名称是 com.mycompany.package。由于 package 是一个关键字，因此无法编译，因此我将其更改为 com.mycompany.bundle。

所以我的原型命令是：

```
mvn archetype:generate \
-DarchetypeGroupId=org.apache.karaf.archetypes \
-DarchetypeArtifactId=karaf-bundle-archetype \
-DarchetypeVersion=2.2.8 \
-DgroupId=com.mycompany \
-DartifactId=com.mycompany.bundle \
-Dversion=1.0-SNAPSHOT \
-Dpackage=com.mycompany.bundle 
```

然后进入新建的项目文件夹：com.mycompany.bundle：

```
cd com.mycompany.bundle 
```

和一个 mvn 安装：

```
mvn install 
```

然后在'target/'文件夹中有一个jar文件，你可以像我之前说的那样将它安装到Karaf安装中。

## 在 Eclipse 中创建包

*   新建 -> 插件项目 -> 选择名称 -> 检查参数 -> 如果您愿意，可以使用模板。

*   选择您的项目 -> 导出 -> 插件/片段 -> 选择一个文件夹

有你的jar文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-25T19:06:46.273

弗兰克的回答很快帮助了我：
我用这个原型创建了一个包：

```
 mvn archetype:generate \
    -DarchetypeGroupId=org.apache.karaf.archetypes \
    -DarchetypeArtifactId=karaf-bundle-archetype \
    -DarchetypeVersion=2.2.8 \
    -DgroupId=com.mycompany \
    -DartifactId=com.mycompany.bundle \
    -Dversion=1.0-SNAPSHOT \
    -Dpackage=com.mycompany.bundle 
```

然后我做了一个`mvn eclipse:eclipse`和`mvn install`。将生成的 jar 复制到我正在运行的 JBoss Fuse 服务器的部署目录后，它会打印“Starting the bundle”。:-)

# java - 将来自服务器的 JSON 对象响应存储到 sqlite 数据库中

> ID：11394041
> 
> 赞同：0
> 
> 时间：2012-07-09T11:20:41.527
> 
> 标签：java, android, json, parsing, sqlite

> **可能重复：**
> [将数据从 Json 对象保存到数据库（SQLite）](https://stackoverflow.com/questions/6288500/save-data-from-json-object-to-database-sqlite)

我正在制作一个从服务器获取数据、保存并稍后在没有连接时使用这些数据的 android 应用程序。如何在 SQLite 数据库中保存 JSON 对象，我不知道。请给我一些例子以更好地理解它。我真的很感谢你的帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:25:02.263

将 json 转换为字符串，然后将其插入数据库。当你需要它时，从数据库中检索它并使用：

```
data = new JSONObject(str).getJSONObject("data"); 
```

str = 从数据库中检索的 json 字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:30:13.983

尝试这个...

我假设现在您正在从 JSON 对象获取数据，问题是保存它。

1.  查看要存储在 SQLITE DB 中的字段类型和字段数。

2.  将 JSON 对象中的值存储在其相应的数据类型中。

3.  假设 JSON 对象 User 有 4 个字段

    名称 - 字符串 密码 - 字符串或 char[] 年龄 - int 城市 - 字符串

4.  检索如下值。

    `jsonObject.getString("name");`

    `jsonObject.getString("password");`

    `jsonObject.getInt("age");`

    `jsonObject.getString("city");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T11:33:27.833

非常适合使用 JSON、PHP 和 ANDROID 保存在 mysql 中，因为它们可以完美地协同工作，而不是在 sqlite 中尝试

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T11:26:55.780

试试这个

[如何在android中的sqlite中保存json中的数据](https://stackoverflow.com/questions/6563118/how-to-save-data-from-json-in-sqlite-in-android)

[如何在 SQLite 中存储 JSON](https://stackoverflow.com/questions/8375382/how-to-store-json-in-sqlite)

[https://codereview.stackexchange.com/questions/9766/android-optimize-json-insertion-to-sqlite-insert-on-duplicate-key-ignore](https://codereview.stackexchange.com/questions/9766/android-optimize-json-insertion-to-sqlite-insert-on-duplicate-key-ignore)

希望这会帮助你。

# c - 如何复制指针以指向同一个对象

> ID：11394043
> 
> 赞同：7
> 
> 时间：2012-07-09T11:20:51.470
> 
> 标签：c, pointers, struct, duplicates

我是所有 C 编程的新手，我有一个问题，

例如，如果我有一个结构，并且我正在指向它，我想创建一个新指针以指向相同的数据，但不是让两个指针指向同一个对象。如果不复制结构中的每个字段，我怎么能做到这一点？

```
typedef struct
{
 int x;
 int y;
 int z;
}mySTRUCT;

mySTRUCT *a;
mySTRUCT *b;
a->x = 1;
a->y = 2;
a->z = 3; 
```

现在我希望 b 指向相同的数据

```
b = *a 
```

这是不正确的，编译器对我大喊大叫

任何帮助都会很棒！谢谢你 ：）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-09T11:36:03.687

首先，您的代码不正确。您创建了一个名为的*指针*`a`，但没有为它创建任何指向的东西。`a->x`在它指向某个东西之前，您不得取消引用它（使用）。

一旦你实际上有一些结构供你的指针指向，那么你可以通过赋值来复制它们：

```
myStruct a_referand = {0};
myStruct b_referand = {0};
myStruct *a = &a_referand;
myStruct *b = &b_referand;

a->x = 1;
*b = *a; // copy the values of all members of a_referand to b_referand
// now b->x is 1
b->x = 2;
// now b->x is 2 but a->x is still 1 
```

# c - openGL数学书学习矩阵旋转/投影平截头体设置等

> ID：11394050
> 
> 赞同：2
> 
> 时间：2012-07-09T11:21:08.080
> 
> 标签：c, math, opengl, matrix, projection

我正在寻找一本解释清楚的书来学习openGL矩阵运算，截锥体生成（类似于[http://www.songho.ca/opengl/gl_projectionmatrix.html](http://www.songho.ca/opengl/gl_projectionmatrix.html)，但对齐次坐标的覆盖范围更大，解释得更好一点） , 矩阵运算, 等等... 3D 导向你已经知道了

我正在尝试使用 openGL 深入研究 3D 事物，我首先想要强大的数学背景

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T11:40:44.440

您可以查看卡内基梅隆大学关于[计算机图形学介绍](http://www.cs.cmu.edu/afs/cs/academic/class/15462-s12/www/)的讲座。CMU 有很棒的教程，但并没有完全给出“黑板”解决方案（在课时完成的示例）

如果你也想找到这些，那么我推荐[http://www.cs.utexas.edu/~fussell/courses/cs384g/schedule.shtml](http://www.cs.utexas.edu/~fussell/courses/cs384g/schedule.shtml)

这里还有一些

*   [http://www.cs.cornell.edu/courses/cs4620/2011fa/lectures/practicum02.pdf](http://www.cs.cornell.edu/courses/cs4620/2011fa/lectures/practicum02.pdf)
*   [http://programmedlessons.org/VectorLessons/index.html](http://programmedlessons.org/VectorLessons/index.html)
*   [http://www.opengl-tutorial.org/beginners-tutorials](http://www.opengl-tutorial.org/beginners-tutorials) \
*   [http://en.wikipedia.org/wiki/Transformation_matrix](http://en.wikipedia.org/wiki/Transformation_matrix)
*   [http://cs.fit.edu/~wds/classes/graphics/Transform/transform/](http://cs.fit.edu/~wds/classes/graphics/Transform/transform/)

请记住，如果您实际上正在寻找“强大的背景”，则必须学习其他一些数学和算法的东西，例如[Convolution](http://www.roborealm.com/help/Convolution.php)和[QuadTrees](http://en.wikipedia.org/wiki/Quadtree)、[kdTrees](http://en.wikipedia.org/wiki/K-d_tree)和[bsp 树](http://en.wikipedia.org/wiki/Binary_space_partitioning)，但您可以在深入了解更多 OpenGL 时同时这样做

当然，还有 OpenGL 的主要 3D 美感——[光线追踪](http://en.wikipedia.org/wiki/Ray_tracing_%28graphics%29)，这是一种技术，通过该技术，简单的物理和涉及照明对象的术语（衰减、阴影、折射、反射、漫反射、环境光、镜面反射）很重要。这是我参加的一门课的一些见解 [http://www.cs.washington.edu/education/courses/cse457/12sp/lectures/ray-tracing.pdf](http://www.cs.washington.edu/education/courses/cse457/12sp/lectures/ray-tracing.pdf)

希望所有这些都有帮助

# sql - SQL - 混合存在“和”和“或”

> ID：11394051
> 
> 赞同：0
> 
> 时间：2012-07-09T11:21:12.607
> 
> 标签：sql, hibernate

我无法获得一个可行的查询，其中我可以有多个必需的记录并且存在一个“两个之一”。

我使用的是 Hibernate，hql，sql 显然不会有根本的不同，但这意味着我不能使用完全连接（因此很尴尬）。

我基本上想要什么，但不能，因为我不知道如何混合内部和外部存在调用：

```
select 1
from  application
where
application = ? and
exists (select 1 from x where ...) and
exists (select 1 from y where ...) and
exists ((exists (select 1 from Document where ...))
or 
(exists (select 1 from QA answer where ...))) 
```

所以我需要 x & y，但只要存在 1，Document 或 QA 都可以接受。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:30:28.350

像这样的东西？

```
select 1
from  application
where
application = ? and
exists (select 1 from x where ...) and
exists (select 1 from y where ...) and
(
    exists (select 1 from Document where ...)
    or 
    exists (select 1 from QA answer where ...)
); 
```

# c# - 使用 .net webservice 以像素为单位发送图像

> ID：11394052
> 
> 赞同：2
> 
> 时间：2012-07-09T11:21:13.407
> 
> 标签：c#, .net

我写了一个以像素形式发送图像的网络服务。它工作正常，但是当我们在参数中提供大量数据时，它不会获取完整数据。它需要有限的数据或小图像。这是参数限制吗？或者我如何在参数中给出大数据？

这是我的代码

```
 [WebMethod]
    public XmlDocument testuploadimage(string image)
    {

        XmlDocument login = new XmlDocument();
        XmlDeclaration dec = login.CreateXmlDeclaration("1.0", null, null);
        login.AppendChild(dec);
        XmlElement root = login.CreateElement("CreateUser");
        login.AppendChild(root);

        try
        {

                string actFolder = Server.MapPath("~/Images/");
                string s = image.Replace(" ", string.Empty);

                string imgname = DateTime.UtcNow.ToString().Replace(" ", "").Replace("AM", "").Replace("PM", "").Replace("/", "").Replace("-", "").Replace(":", "") + ".png";
                //       string imgname = DateTime.UtcNow.ToString("yyyyMMddHHmm") + ".png";

                byte[] imageBytes = Convert.FromBase64String(image.Replace(" ","+"));
                MemoryStream ms = new MemoryStream(imageBytes, 0, imageBytes.Length);
                // MemoryStream ms = new MemoryStream(imageBytes);
                // Convert byte[] to Image
                //  ms.Write(imageBytes, 0, imageBytes.Length);

                Image image2 = Image.FromStream(ms);
                image2.Save(actFolder + imgname);

                XmlElement root1 = login.CreateElement("uploaded");
                root1.InnerText = "true";
                root.AppendChild(root1);
                XmlElement root2 = login.CreateElement("path");
                root2.InnerText = "http://Myserver/HeritageWebServices/Images/" + imgname;
                root.AppendChild(root2);

                return login;

            }
            catch (Exception ex)
            {
                ErrLogMgr.LogErrorMessage(string.Format("{0}{1}", "testuploadimage() for the image :",
                                                       image), "testUploadimage Inputs",
                                                        ERRORSOURCE.CSASERVICE);
                XmlDocument cd = new XmlDocument();
                cd.LoadXml("<Message>" + ex + "</Message>");

                return cd; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:31:19.600

两件事情

尝试更改 web.config 文件上的 maxRequestLength。

我看到您正在使用 base64 发送图像，您可以在将其转换为 base64 之前尝试压缩字节数组，以减少图像或尝试转换为更压缩的图像类型（ej：bmp 到 png）。

问候

# libxml2 - 无法使用 libxml2 读取 XML 节点的内容

> ID：11394059
> 
> 赞同：0
> 
> 时间：2012-07-09T11:21:34.793
> 
> 标签：libxml2

我只是想读取之前写出文件的 XML 节点内容中的字符串。这是代码：

```
int main() {

xmlNodePtr n, n2, n3;
xmlDocPtr doc;
xmlChar *xmlbuff;
int buffersize;
xmlChar* key;

doc = xmlNewDoc(BAD_CAST "1.0");
n = xmlNewNode(NULL, BAD_CAST "root");

xmlNodeSetContent(n, BAD_CAST "test1");
n2 = xmlNewNode(NULL, BAD_CAST "devices");
xmlNodeSetContent(n2, BAD_CAST "test2");
n3 = xmlNewNode(NULL, BAD_CAST "device");
xmlNodeSetContent(n3, BAD_CAST "test3");

//n2 = xmlDocCopyNode(n2, doc, 1);
xmlAddChild(n2,n3);
xmlAddChild(n,n2);

xmlDocSetRootElement(doc, n);

xmlSaveFormatFileEnc( FILENAME, doc, "utf-8", 1 );

doc = xmlParseFile(FILENAME);
n = xmlDocGetRootElement(doc);

key = xmlNodeListGetString(doc, n, 1);
printf("keyword: %s\n", key);
xmlFree(key);

n = n->children;

key = xmlNodeListGetString(doc, n, 1);
printf("keyword: %s\n", key);
xmlFree(key);

n = n->children;

key = xmlNodeListGetString(doc, n, 1);
printf("keyword: %s\n", key);
xmlFree(key);

n2 = xmlNewNode(NULL, BAD_CAST "address");
xmlAddChild(n,n2);

xmlDocSetRootElement(doc, n);

xmlSaveFormatFileEnc( FILENAME, doc, "utf-8", 1 );

return 0;
} 
```

此代码的输出是 -> 关键字：(null) 关键字：test1 关键字：(null)

为什么我看不到 test2 和 test3？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:06:20.617

您生成的 XML 文件是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<root>
    test1
    <devices>
        test2
        <device>
            test3
        </device>
    </devices>
</root> 
```

在 libxml 中，子项包含文本节点和元素。您需要检查类型字段以了解节点指向的内容。

这是您可以使用的代码（我确信有更好的方法可以做到这一点，但它清楚地显示了您应该执行的类型测试）。我使用 n 作为元素节点，使用 n2 搜索文本节点。

```
// Get <root>    
n = xmlDocGetRootElement(doc);
n2 = n -> children;
while (n2 != NULL && n2 -> type != XML_TEXT_NODE)
    n2 = n2 -> next;
if (n2 != NULL)
{
   key = xmlNodeListGetString(doc, n2, 1);
   printf("keyword: %s\n", key);
   xmlFree(key);
}

// grab child
n = n -> children;
while (n != NULL && n -> type != XML_ELEMENT_NODE)
    n = n -> next;
if (n == NULL)
    return -1;

// grab its 1st text child       
n2 = n -> children;
while (n2 != NULL && n2 -> type != XML_TEXT_NODE)
    n2 = n2 -> next;
if (n2 != NULL)
{
   key = xmlNodeListGetString(doc, n2, 1);
   printf("keyword: %s\n", key);
   xmlFree(key);
}

// grab child
n = n -> children;
while (n != NULL && n -> type != XML_ELEMENT_NODE)
    n = n -> next;
if (n == NULL)
    return -1;

// grab its 1st text child       
n2 = n -> children;
while (n2 != NULL && n2 -> type != XML_TEXT_NODE)
    n2 = n2 -> next;
if (n2 != NULL)
{
   key = xmlNodeListGetString(doc, n2, 1);
   printf("keyword: %s\n", key);
   xmlFree(key);
} 
```

# asp.net - 为本地化设置 TemplateField HeaderText 动态

> ID：11394060
> 
> 赞同：4
> 
> 时间：2012-07-09T11:21:36.377
> 
> 标签：asp.net, data-binding

我正在尝试为我的 ASP.NET 代码创建本地化，但在设置 TemplateField 的 HeaderText 时遇到问题

我有这个有效

```
 <asp:TemplateField HeaderText="Description">
                        <ItemTemplate>
                            <%# Eval("Description") %>
                        </ItemTemplate>
                        <FooterTemplate>
                            <asp:Panel ID="Panel5" runat="server" DefaultButton="EditSubmission">
                                <asp:TextBox runat="server" ID="Submission_DescriptionTxtBox" TextMode="MultiLine"
                                ToolTip='<%# GetById("atforbedringsforslag_description_tooltip") %>'/>

                                </asp:Panel>
                        </FooterTemplate>
                    </asp:TemplateField> 
```

但我想改变

```
<asp:TemplateField HeaderText="Description"> 
```

至

```
<asp:TemplateField HeaderText='<%# GetById("atforbedringsforslag_description_title") %>'> 
```

但后来我得到

> 只有具有 DataBinding 事件的对象才支持数据绑定表达式。System.Web.UI.WebControls.TemplateField 没有 DataBinding 事件。

我应该如何设置这个字段？我可以找到一些使用 OnRowCreated 的，但是您使用索引号访问字段，然后如果稍后添加新字段，则很容易出错或忘记更改索引

* * *

编辑我的解决方案：

创建了自定义表达式构建器

```
using System.Web.Compilation;
using System;
using System.CodeDom;

public class LocalizationExpressionBuilder : ExpressionBuilder
{
    public override CodeExpression GetCodeExpression(System.Web.UI.BoundPropertyEntry entry, object parsedData, ExpressionBuilderContext context)
    {
        CodeExpression[] inputParams = new CodeExpression[] { new CodePrimitiveExpression(entry.Expression.Trim()), 
                                                    new CodeTypeOfExpression(entry.DeclaringType), 
                                                    new CodePrimitiveExpression(entry.PropertyInfo.Name) };

        // Return a CodeMethodInvokeExpression that will invoke the GetRequestedValue method using the specified input parameters 
        return new CodeMethodInvokeExpression(new CodeTypeReferenceExpression(this.GetType()),
                                    "GetRequestedValue",
                                    inputParams);
    }

    public static object GetRequestedValue(string key, Type targetType, string propertyName)
    {
        // If we reach here, no type mismatch - return the value 
        return GetByText(key);
    }

    //Place holder until database is build
    public static string GetByText(string text)
    {
        return text;
    }
} 
```

将前缀添加到我的 web.config

```
<system.web>
<compilation debug="true" defaultLanguage="c#" targetFramework="4.0">
  <expressionBuilders>
    <add expressionPrefix="localizeByText" type ="LocalizationExpressionBuilder"/>
  </expressionBuilders>
    </compilation>
</system.web> 
```

我现在可以像这样得到我的文字

```
<asp:TemplateField HeaderText='<%$ localizeByText:Some text %>'> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T11:36:39.750

您可以构建自己的自定义`Expression Builder`来调用您的`GetById`方法。查看以下链接，了解如何构建表达式构建器以及如何使用它的旧但很好的文章：

[http://www.4guysfromrolla.com/articles/022509-1.aspx](http://www.4guysfromrolla.com/articles/022509-1.aspx)

当您有一个表达式生成器时，您可以将它与`<%$`语法一起使用。这与数据绑定语法不同`<%#`。

对于 HeaderText 字段，不允许使用 DataBinding 语法（不知道为什么，但这就是 MS 的做法）。允许使用表达式语法，并且在您完成自定义表达式构建器后将起作用。

一定要浏览我链接的页面，它有很多文字，但最终让你表达构建器不会花费太多精力......

此外，该页面底部有一个链接，指向作者制作的表达式构建器库。看看它们，也许其中一个可以直接用于解决您的问题（特别是`CodeExpressionBuilder`）。

# c++ - 当 C++ 模板类中存在循环依赖时，修复包含顺序

> ID：11394063
> 
> 赞同：3
> 
> 时间：2012-07-09T11:21:51.597
> 
> 标签：c++, circular-dependency

我遇到了一个循环依赖问题，其中包含标题的顺序很重要。[这个](https://stackoverflow.com/questions/3353831/resolving-a-circular-dependency-between-template-classes)问题类似，但它没有记录一个类实例化另一个类的对象的解决方案。

**问题：**

*   我有两个班级：Foo 和 Bar。酒吧是模板化的。（Foo 可能会或可能不会被模板化）。
*   Foo有一个Bar的实例，Bar有一个Foo类型的指针，Bar的实现需要通过这个指针访问Foo的成员。
*   Foo 和 Bar 必须 **在单独的文件**中实现。由于 Bar 是模板化的，它的声明和实现必须在同一个文件中。

在下面的代码中，如果 main.cpp 在 Foo.h 之前包含 Bar.h，则代码编译，而当 Foo.h 在 Bar.h 之前包含时不会编译。*有没有一种方法可以编译代码，而不管 main.cpp 中包含的标头的顺序如何？*

**Foo.h**

```
#ifndef FOO_H
#define FOO_H

#include"Bar.h"
class Foo
{
    public:
        Bar<> B;
        void fooStuff(){};

};
#endif 
```

**酒吧.h**

```
#ifndef BAR_H
#define BAR_H

class Foo;
template<int N=0> class Bar
{
    public:
        Foo * F;
        void barStuff();
};

#include"Foo.h"
 template<int N> void Bar<N>::barStuff()
{
        F->fooStuff();
};
#endif 
```

**主文件**

```
#include"Foo.h"
#include"Bar.h"
int main()
{
    Foo F;
    F.B.barStuff();
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T11:26:09.673

是的：`Foo`之前声明`Bar`，因为`Bar`只使用一个指针，它不需要完整的定义。`Foo`然后在之后定义`Bar`- 它使用一个对象，因此它确实需要定义。

```
class Foo;

template<int N> class Bar
{
    public:
        Foo * M;
        void barStuff();
};

class Foo
{
    public:
        Bar<42> B;
        void fooStuff(){}
};

template<int N> void Bar<N>::barStuff()
{
    M->fooStuff();
} 
```

通常，对于需要类的任何属性（例如其大小或成员）的任何内容，您都需要完整定义，并且只需要在声明函数、指针或引用时使用类名的声明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T06:50:15.093

我需要在 Foo 之前包含 Bar，无论它们以什么顺序包含在 main.cpp 中。以下黑客似乎有效：

在 Foo.h 中，将 Bar.h 包含在头部防护**之外。**由于 Bar 也有头守卫，所以它不会被多次包含在内。

**Foo.h**

```
#include"Bar.h"

#ifndef FOO_H
#define FOO_H

class Foo
{
    public:
        Bar<> B;
        void fooStuff(){};

};
#endif 
```

**酒吧.h**

```
#ifndef BAR_H
#define BAR_H

class Foo;
template<int N=0> class Bar
{
    public:
        Foo * F;
        void barStuff();
};

#include"Foo.h"
 template<int N> void Bar<N>::barStuff()
{
        F->fooStuff();
};
#endif 
```

**主文件**

```
#include"Foo.h"
#include"Bar.h"
int main()
{
    Foo F;
    F.B.barStuff();
}; 
```

# ios - NSCFString 0x2749a0 valueForUndefinedKey 此类不符合键数据的键值编码

> ID：11394064
> 
> 赞同：1
> 
> 时间：2012-07-09T11:21:55.477
> 
> 标签：ios, json, sbjson

我的 json ：

```
{
 "name": "notification",
 "args": [
         "{\"data\":  [{\"foreignId\":\"BF7E9276D8607DA5916F796F9F1B9743_2\",\"id\":\"\",\"img\":{\"small\":\"http://jiepang.com/static/img/icon-special-newbie.gif\"},\"poiId\":\"4fe133bb581f7129d6c3f2b3\",\"poiName\":\"Incubation Club Cafe - ICC\",\"source\":\"jiepang\",\"what\":\"aaaa。\",\"when\":\"\"}],\"size\":3,\"toWho\":[\"4ffa80c8e4b0f73fa2b758c9\"],\"type\":5,\"when\":\"2012-07-09T17:23:24Z\"}"
 ]
} 
```

我的代码：

```
 NSDictionary* data=(NSDictionary *)[packet.data JSONValue];

NSString* str=[NSString stringWithFormat:@"%@",[data objectForKey:@"name"]];
txtview.text = [txtview.text stringByAppendingString:str];

NSData *jsonData = [packet.data dataUsingEncoding:NSUTF8StringEncoding];
__autoreleasing NSError* error = nil;
NSDictionary *resultdata = [NSJSONSerialization JSONObjectWithData:jsonData options:0 error:&error];
// NSDictionary* arr=[data valueForKeyPath:@"args.data"];

NSMutableDictionary *peopleListFromJson = [[NSMutableDictionary alloc] init];
peopleListFromJson = [resultdata valueForKeyPath:@"args.data"];
// NSArray *peopleListFromJson = [[result objectForKey:@"data"]objectForKey:@"list"];

if ( ![peopleListFromJson isKindOfClass:[NSArray class]] && peopleListFromJson!=nil) {
    peopleListFromJson =[NSArray arrayWithObject:peopleListFromJson];
}

for (NSDictionary *peopleFromJson in peopleListFromJson)
{

    if([peopleFromJson objectForKey:@"foreignId"]!=[NSNull null])
    {

        NSString* str=[NSString stringWithFormat:@"%@",[peopleFromJson objectForKey:@"foreignId"]];
        txtview.text = [txtview.text stringByAppendingString:str];
    }
} 
```

但它给了我：

```
[<__NSCFString 0x2749a0> valueForUndefinedKey:]: this class is not key value coding-compliant for the key data.'
*** First throw call stack: 
```

我正在使用 ios5，**没有**ARC。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T11:40:19.633

这意味着您的密钥路径不正确。处理数组时不能使用键路径，因为不知道需要数组的哪一项。

您需要访问`NSArray`存储在 key 下的`args`，然后取出第一项（这是一个字符串），然后将该字符串转换为`NSDictionary`，然后取出 key for `data`。

更快的方法是确保您的 JSON 格式更好：

```
{
  "name": "notification",
  "args": {"data": [{"foreignId": "BF7E9276D8607DA5916F796F9F1B9743_2", "id": "", "img":{"small": "http://jiepang.com/static/img/icon-special-newbie.gif"}, "poiId":"4fe133bb581f7129d6c3f2b3", "poiName":"Incubation Club Cafe - ICC","source":"jiepang","what":"aaaa。","when":""}],"size":3,"toWho":["4ffa80c8e4b0f73fa2b758c9"],"type":5,"when":"2012-07-09T17:23:24Z"}]
} 
```

# hibernate - JPA + DB2 无法执行简单查询

> ID：11394066
> 
> 赞同：0
> 
> 时间：2012-07-09T11:22:02.073
> 
> 标签：hibernate, db2, jt400

**Edit1：** 当 Hibernate 连接到 MS-SQL 时，所有的列和表都在扫描。[日志](http://chopapp.com/#8kvl5v3a)

但是当 Hibernate 连接到 DB2 时，它会尝试再次识别（呈现）所有包含“i”字母的表和列。[日志](http://chopapp.com/#bg4x8aki)

扫描表格和列后，我意识到所有字母都很大。事实上，在 DB2 上每个字母都很大。Hibernate 使用小写字母进行查询，由于 DB2 对大写字母的敏感性，它不能识别列名。出于这个原因，它会在下面发出警报，

```
WARN SqlExceptionHelper: SQL Error: -99999, SQLState: 42703 
15:15:22,025 ERROR SqlExceptionHelper: An undefined column name was detected. 
```

我怎么解决这个问题？

* * *

我必须使用 jpa 从 db2 中的表中检索数据。当我尝试使用实体管理器执行查询时，我收到错误，不知道问题到底出在哪里。 **我的代码在 MS-SQL 和 HSQL-DB 上运行...但我连接 DB2 时出现消息错误：***

*   查询 qry = em.createQuery("from Holding h where h.RDeleted=:arg1");-

    13:26:38,135 DEBUG SQL：选择holding0_.HoldingId 作为HoldingId1_，holding0_.RDeleted 作为RDeleted1_，holding0_.InsertDate 作为InsertDate1_，holding0_.SavesUserId 作为SavesUse4_1_，holding0_.UpdateDate 作为UpdateDate1_，holding0_.Updater 作为Updater1_，holding0_.Description 作为Descript7_1_ ，holding0_.HoldingName as HoldingN8_1_ from Holding holding0_ where holding0_.RDeleted=? 休眠：选择holding0_.HoldingId 作为HoldingId1_，holding0_.RDeleted 作为RDeleted1_，holding0_.InsertDate 作为InsertDate1_，holding0_.SavesUserId 作为SavesUse4_1_，holding0_.UpdateDate 作为UpdateDate1_，holding0_.Updater 作为Updater1_，holding0_.Description 作为Descript7_1_，holding0_.HoldingName 作为HoldingN8_1_从控股holding0_ where holding0_.RDeleted=? 13:26:38,428 WARN SqlExceptionHelper：SQL 错误：-99999，SQLState：42703 13:26:38,428 错误 SqlExceptionHelper：

但它查询有效：

```
Select h.holdingId, h.holdingName, h.description from Holding h 
```

**我的数据源：**

```
<bean class="org.apache.commons.dbcp.BasicDataSource" id="dataSourceDB2_JT400" destroy-method="close">
        <property value="com.ibm.as400.access.AS400JDBCDriver" name="driverClassName"/> 
        <property value="jdbc:as400://192.168.1.1/GULERP" name="url"/> 
        <property value="user" name="username"/> 
        <property value="PW" name="password"/> 
        <property value="5" name="initialSize"/>
    </bean> 
```

**我的实体管理器：**

```
<bean id="entityManagerFactory"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="persistenceUnitName" value="erp" />
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                <property name="showSql" value="true" />
                <property name="generateDdl" value="false" />
                <property name="databasePlatform" value="org.hibernate.dialect.DB2400Dialect" />
            </bean>
        </property>
        <property name="dataSource" ref="dataSourceDB2_JT400"/>
    </bean> 
```

**和我的域：**

```
@Entity
@AccessType("field")
@Table(name = "Holding", uniqueConstraints = {@UniqueConstraint(columnNames={"HoldingName"})})
public class Holding extends BaseClass implements Serializable {

    transient static final long serialVersionUID = 5473887143181971744L;

    @Id
    @Column(name = "HoldingId", nullable = false, length=36)
    @GeneratedValue(generator="system-uuid")
    @GenericGenerator(name = "system-uuid", strategy = "uuid")
    private String holdingId;

    @Basic(optional = false)
    @Column(name = "HoldingName", nullable = false, length = 100)
    private String holdingName;

    @Column(name = "Description", length = 210)
    private String description;

    @OneToMany(mappedBy = "holdingId", fetch = FetchType.LAZY)
    private List<Company> companyList; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:28:26.700

尝试执行“来自Holding h”的查询。如果它仍然会下降：

> 错误 SqlExceptionHelper：检测到未定义的列名。

那么这意味着您将列名映射为错误的属性名。

* * *

您提到，以下查询有效：

```
Select h.holdingId, h.holdingName, h.description from Holding h 
```

您可以通过将所有列一一添加到选择中来跟踪导致异常的列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T14:13:04.710

**解决方案：**

```
 @Override
    @PreAuthorize("hasRole('ROLE_ADMIN')")
    public List<HoldingDto> getHoldingList()
    {
        List<HoldingDto> holdLst = null;
        try
        {
            String aa = (String) q.getSingleResult();

            CriteriaBuilder cb = em.getCriteriaBuilder();
            CriteriaQuery<HoldingDto> q = cb.createQuery(HoldingDto.class);
            Root<Holding> h = q.from(Holding.class);
            q.select(cb.construct(HoldingDto.class, h.get("holdingId"), h.get("holdingName"), h.get("description"), h.get("savesUserId"), h.get("insertDate"),
                    h.get("updateDate"), h.get("updater"), h.get("RDeleted")));
            holdLst = em.createQuery(q).getResultList();
        } 
        catch(NoResultException e)
        {
            e.printStackTrace();
        }
        catch (Exception e)
        {
            throw new RuntimeException(e);
        }

        return holdLst;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T13:10:52.940

查询 qry = em.createQuery("from Holding h where h.RDeleted=:arg1");-

不应该

查询 qry = em.createQuery("select h from Holding h where h.RDeleted=:arg1") ?

# ajax - 使用 Eclipse PDT 和 Zend Debugger 调试 AJAX 项目的 PHP 代码

> ID：11394068
> 
> 赞同：1
> 
> 时间：2012-07-09T11:22:10.560
> 
> 标签：ajax, eclipse-pdt, zend-debugger

我不确定我是否正确，但似乎 Eclipse PDT + Zend Debugger 在调试 Ajax 项目时存在问题。我正在开发一个项目，其中所有请求都通过单个 PHP 文件传递​​（甚至是下载图像等资源请求）。当我想在第一个请求成功返回后在 Eclipse 中启动调试会话时，第二个请求返回以下错误消息：

> 由于未完成的调试会话，Zend Studio 调试器发生通信错误。未捕获的 SyntaxError：意外的令牌 <
> 
> 要重新加载页面，请单击刷新

在我看来，由于第一个请求使 Zend 服务器保持忙碌，第二个请求无法成功连接到它。在这种情况下，我已经配置了 Eclipse，因此它不会停在每一页的第一行，但仍然没有运气。

这是否意味着在自由发送请求的 PHP + Ajax 项目中，无法调试？有没有人在类似的情况下测试过这个和/或 xdebug？

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T08:11:30.443

我只是想让我的开发人员知道当我切换到 xdebug 时不存在同样的问题。

# javascript - 委托 Javascript 函数

> ID：11394074
> 
> 赞同：3
> 
> 时间：2012-07-09T11:22:49.283
> 
> 标签：javascript

作为一个显着简化的场景，假设我有 2 个 Javascript 对象，定义如下：

```
var ClassA = Class.extend({
    'say': function(message) {
        console.log(message);
    }

    ... // some more methods ...
});

var ClassB = Class.extend({
    init: function(obj) {
        this._target = obj;
    }
}); 
```

我想在 Javascript 中有某种机制可以使我们执行以下技巧：

```
var b = new ClassB( new ClassA() );
b.say("hello"); 
```

我想找个方法检测是否有方法被调用`ClassB`，并且方法没有定义在里面`ClassB`，那么我可以自动把方法调用转发到on `ClassA`，它是in的成员变量`ClassB`。

在现实世界的场景中，一个对象被实现为 brwoser 插件并使用标签`ClassA`插入到网页中。`<object>`它的方法是用 C++ 代码实现的，所以我无法从它的原型中分辨出它的方法，并`ClassB`事先将它插入到 的原型中。

我想使用该技术来创建一个原生 Javascript 对象，以及 ClassA 界面的窄化版本。有没有办法我可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T11:58:14.097

我认为没有快速的跨浏览器解决方案。

如果你只需要 Firefox，那么使用[`__noSuchMethod__`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/noSuchMethod)

请参见此处：[is-there-such-a-thing-as-a-catch-all-key-for-a-javascript-object](https://stackoverflow.com/questions/2357618/is-there-such-a-thing-as-a-catch-all-key-for-a-javascript-object) 和此处：[javascript-getter-for-all-properties](https://stackoverflow.com/questions/994143/javascript-getter-for-all-properties)

否则，我会尝试这样的事情：

```
var b = new ClassB( new ClassA() );

// functionToCall is a string containing the function name
function callOnB(functionToCall) {
    if(typeof b[functionToCall] === function) {
        b[functionToCall]();
    } else {
        b._target[functionToCall](); // otherwise, try calling on A
    }
} 
```

这是使用[方括号表示法](http://www.jibbering.com/faq/faq_notes/square_brackets.html)，其中

```
b.say('hello') 
```

是相同的

```
b['say']('hello') 
```

当然，您可能应该扩展它以接受参数：

```
function callOnB(functionToCall, listOfArguments) {...} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T02:04:06.200

Thanks to jfrej's hint on **noSunchMethod**, I did some more research on it and it turns out what I need is quit fit with Harmony Proxies([here](http://wiki.ecmascript.org/doku.php?id=harmony%3aproxies) and [here](http://prog.vub.ac.be/~tvcutsem/proxies/index.html)). And an example can be found at [http://jsbin.com/ucupe4/edit#source](http://jsbin.com/ucupe4/edit#source)

Another related post: [http://dailyjs.com/2010/03/12/nosuchmethod/](http://dailyjs.com/2010/03/12/nosuchmethod/)

# java - 如何将大量数据从数据库返回到 Web 客户端？

> ID：11394075
> 
> 赞同：0
> 
> 时间：2012-07-09T11:22:57.140
> 
> 标签：java, database, jakarta-ee, tomcat, web-applications

我有以下问题：
我有一个将数据存储在数据库中的 Web 应用程序。我希望客户能够将例如 2 个表的数据提取到一个文件中（对于客户来说是本地的）。
数据库可以任意大（这意味着我不知道数据库中可能有多少数据。可能很大）。
最好的方法是什么？
是否应该**将所有**数据`SELECT`从表中取出并作为单个结构返回给客户端以存储在文件中？
还是应该分部分检索数据，例如前 100 个，然后是下 100 个条目等，并在客户端中创建单个结构？
这里有什么利弊需要考虑的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:15:43.640

我已经构建了类似的东西 - 这里有一些非常尴尬的问题，特别是当文件大小可能超出您在浏览器中可以轻松处理的范围时。随着数据量的增长，生成文件的时间也随之增加；这反过来又不是 Web 应用程序所擅长的，因此您冒着 Web 服务器对即使是少数访问者都请求大文件感到不满意的风险。

我们所做的是将应用程序分成 3 个部分。

“文件请求”是一个简单的网页，经过身份验证的用户可以在其中请求他们的文件。这将在网页请求的上下文之外启动第二部分：

文件生成器。在我们的例子中，这是一个 Windows 服务，它查看带有文件请求的数据库表，选择最新的，运行适当的 SQL 查询，将输出写入 CSV 文件，然后压缩该文件，然后将其移动到输出目录并向用户发送链接。它设置数据库中记录的状态，以确保在任何一个时间点只发生一个进程。

FTP/WebDAV 站点：ZIP 文件被写入一个可通过 FTP 和 WebDAV 访问的文件夹 - 这些协议往往比标准 HTTP 下载更适合处理大文件。

这工作得很好——用户不喜欢等待他们的文件，但延迟很少超过几分钟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:54:16.010

我们有一个类似的用例，其中包含大约一个 oracle 集群。40GB 的数据。最适合我们的解决方案是每个 select 语句的最大数据量，因为它显着减少了 DB 开销。

话虽如此，有三个优化对我们来说非常有效：

1.) 我们将数据分成 10 个大小大致相同的集合，并从数据库中并行选择它们。对于我们的集群，我们发现大约有 8 个并行工作的连接。比单个连接快 8 倍。最多 12 个连接有一些额外的加速，但这取决于您的数据库和您的 dba。

2.) 一旦您谈到大量数据，请远离休眠或其他 ORM，并使用定制的 JDBC。使用所有可以达到的优化（例如 ResultSet.setFetchSize()）

3.) 我们的数据压缩得非常好，将数据通过 gziper 可以节省大量 I/O 时间。在我们的例子中，它从关键路径中消除了 I/O。顺便说一句，这也适用于将数据存储在文件中。

# jpa-2.0 - 对 JPA 标准选择的 NoResultException 有用的附加输出

> ID：11394077
> 
> 赞同：0
> 
> 时间：2012-07-09T11:23:03.810
> 
> 标签：jpa-2.0, criteria-api

只要`CriteriaQuery`JPA2 中的 a 没有产生结果，`NoResultException`就会抛出 a。这个异常并不是很有用，因为只有关于抛出异常的行号的上下文信息可能会给出一些指示出了什么问题。

我想要一些口语输出“寻找一类类型和应用的限制在哪里和”。看起来，`CriteriaQuery`对这些信息相当害羞，但看起来，结合反射和 getter 方法，我最终会得到我想要的所有信息，但它会非常混乱和麻烦。

有没有更好的方法来检索进入`CriteriaQuery`-Object 的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:24:50.223

只要您坚持使用 JPA API，[CriteriaQuery](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/CriteriaQuery.html)的公共接口就是您所拥有的。

如果您准备好具体实现并使用 Hibernate 实现，则可以通过将其转换为[org.hibernate.ejb.CriteriaQueryImpl](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/ejb/criteria/CriteriaQueryImpl.html)来获得更多。例如，渲染方法似乎提供了对具有[getQueryString](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/ejb/criteria/CriteriaQueryCompiler.RenderedCriteriaQuery.html#getQueryString%28%29)方法的嵌套类的访问。

很可能从其他 JPA 实现中可以找到一些类似的方法。

# android - 在android中加密外部XML

> ID：11394078
> 
> 赞同：1
> 
> 时间：2012-07-09T11:23:05.290
> 
> 标签：android, xml, encryption

我想实现这样的场景，即我在 RAW 文件夹中为用户提供一些 XML 文件，并且我想对它们进行加密，以便用户无法通过浏览应用程序的 APK 来访问这些文件。android中是否有任何可用的包或技术来执行此类操作。请告诉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:31:08.287

没有为您的 APK 中的资源加密/解密的特定目的提供任何内容。也没有要求您作为 RAW 资源提供的资源适合任何特定格式，因此您对作为 RAW 提供的 XML 有很大的自由度。

一种选择是加密 XML 文件中的某些内容，并在解析文件时动态解密它们。如果 XML 是您自己设计的，并且您可以灵活地对其进行修改，那么这可能是更可取的（当然，也可以由您自行决定）。

另一种选择是在将整个文件放入 APK 之前对其进行加密。在此选项中，您需要将资源作为纯文件打开并解密从中读取的内容；一旦它被完全解密，您就可以将数据传递给您的 XML 解析器。

# objective-c - EXC BAD ACCESS in main

> ID：11394079
> 
> 赞同：1
> 
> 时间：2012-07-09T11:23:08.347
> 
> 标签：objective-c, ios

我有一个有害的`EXC_BAD_ACCESS`错误。我启用了僵尸跟踪，但程序没有生成特定的堆栈跟踪，而是始终在 main 处停止 `return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));`

有谁知道为什么我没有有意义的堆栈跟踪？该应用程序使用核心数据，并且大部分核心数据活动都包含在`performBlockAndWait`方法中 - 这可能与它有关吗？

我还有一条来自 NSZombieEnabled 的日志消息，上面写着`*** -[_PFArray release]: message sent to deallocated instance 0x395d0fe0`。有没有办法找出日志消息中的地址最初分配的内容？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:30:11.003

就在这里。使用模拟器上的仪器运行您的应用程序。选择 Zombies 工具并执行使您的应用程序崩溃的确切步骤。Zombies 乐器仅在模拟器上可用，因为 Mac 上的 RAM 比 iOS 设备上的多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:33:14.943

您可以查看有关崩溃[的](http://www.raywenderlich.com/10209/my-app-crashed-now-what-part-1)教程并弄清楚该怎么做。密切关注这部分：

> 当程序被捕获做它不应该做的事情时，就会发生异常。你现在看到的是这个异常的后果：应用程序做错了，异常被抛出，Xcode 向你显示结果。理想情况下，您希望确切了解引发异常的位置。幸运的是，您可以使用异常断点告诉 Xcode 在那一刻暂停程序。断点是一种调试工具，可在特定时刻暂停您的程序。

# c# - 将图像从 WP7 发送到 WCF 并转换为位图

> ID：11394080
> 
> 赞同：0
> 
> 时间：2012-07-09T11:23:12.077
> 
> 标签：c#, wcf, windows-phone-7, bitmap, bitmapimage

我正在尝试将图片从我的 Windows Phone 发送到需要 System.Drawing.Bitmap 的 WCF 服务。但是，我无法从手机中获取 BitmapImage，并在 WCF 服务上获取 Bitmap。我在 C# 中这样做。

我尝试将 BitmapImage 制作成 byte[]，通过 WCF 发送它，然后将其转换回 BitmapImage，然后将其转换为 Bitmap。我可以得到BitmapImage的大小，但是图像中的数据是空的。任何可能出错的线索？

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:57:12.643

问题可能出在`maxReceivedMessageSize`. 你说你可以得到 BitmapImage 的大小，但它是正确的大小吗？如果没有，则在 WCF 的 web.config 中添加以下行：

```
<bindings>
  <wsHttpBinding>
    <binding name="wsHttp"
                 maxReceivedMessageSize ="50000000"
                 messageEncoding="Mtom"
                 maxBufferPoolSize="50000000" >
      <readerQuotas maxDepth="32"
         maxStringContentLength="2147483647"
         maxArrayLength="2147483647"
         maxBytesPerRead="8192"
         maxNameTableCharCount="2147483647" />
    </binding>
  </wsHttpBinding>
</bindings> 
```

现在再试一次，它现在应该可以工作了。

# r - R 有效地填充向量

> ID：11394091
> 
> 赞同：2
> 
> 时间：2012-07-09T11:24:07.613
> 
> 标签：r, loops

我有一个相当大的向量（长度> 500,000）。它包含一堆`NA`穿插的，`1`并且总是保证它以 . 开头`1`。

我想根据对另一个向量（与 长度相同）的连续索引的比较操作，`NA`用`v1`替换其中的一些。`1``v2``v1`

是否有一种有效的方法可以在矢量化符号中执行此操作，以便在低级实现中完成循环？也许使用`ifelse`？

下面的可重现示例：

```
v1<-c(1,NA,NA,NA,1,NA,NA,NA,NA,NA,1,NA,NA,1,NA,1,NA,NA,NA,NA,NA,NA,NA,NA,NA,1)
v2<-c(10,10,10,9,10,9,9,9,9,9,10,10,10,11,8,12,12,12,12,12,12,12,12,12,12,13)
# goal is to fill through v1 in such a way that whenever 
# v1[i] == NA and v1[i-1] == 1 and v2[i] == v2[i-1], then v1[i] == 1
MM<-data.frame(v1,v2)
for (i in 2:length(v1)){ 
    # conditions: v1[i-1] == 1; v1[i]==NA; v2[i]==v2[i-1]
    if (!is.na(v1[i-1]) && is.na(v1[i]) && v2[i]==v2[i-1]){
        v1[i]<-1
    }
}
MM$v1_altered<-v1
MM 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T14:28:34.097

可能有一个更快的解决方案，但这是我在几分钟内能想到的最好的解决方案。对于小向量，我的解决方案比 OP 慢，但对于较大的向量，速度却越来越快。

```
library(zoo)  # for na.locf
library(rbenchmark)

v1<-c(1,NA,NA,NA,1,NA,NA,NA,NA,NA,1,NA,NA,1,NA,1,NA,NA,NA,NA,NA,NA,NA,NA,NA,1)
v2<-c(10,10,10,9,10,9,9,9,9,9,10,10,10,11,8,12,12,12,12,12,12,12,12,12,12,13)
V1 <- rep(v1, each=20000)  # 520,000 observations
V2 <- rep(v2, each=20000)  # 520,000 observations

fun1 <- function(v1,v2) {
  for (i in 2:length(v1)){ 
    if (!is.na(v1[i-1]) && is.na(v1[i]) && v2[i]==v2[i-1]){
      v1[i]<-1
    }
  }
  v1
}
fun2 <- function(v1,v2) {
  # create groups in which we need to assess missing values
  d <- cumsum(as.logical(c(0,diff(v2))))
  # for each group, carry the first obs forward
  ave(v1, d, FUN=function(x) na.locf(x, na.rm=FALSE))
}
all.equal(fun1(V1,V2), fun2(V1,V2))
# [1] TRUE
benchmark(fun1(V1,V2), fun2(V1,V2))
#           test replications elapsed relative user.self sys.self
# 1 fun1(V1, V2)          100  194.29 6.113593    192.72     0.17
# 2 fun2(V1, V2)          100   31.78 1.000000     30.74     0.95 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T12:18:56.203

它可能不会更快，但`v1[i] <- v1[i-1] * (cmp[i-1] == 0)` 避免了所有显式的“if”调用。我现在无法对其进行测试，但是您可以尝试@James 解决方案与循环遍历此表单，例如一个 1e4 长度的向量，看看哪个执行得更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T11:39:54.877

矢量化解决方案如下所示：

```
v1[-1] <- ifelse(diff(v2), 0, v1[-length(v1)]) 
```

但是上面的方法行不通，而且我认为您无法避免显式循环，因为如果我理解正确，您想传播新值。那么，怎么样：

```
cmp <- diff(v2)
for (i in 2:length(v1)){
    v1[i] <- if(cmp[i-1]) 0 else v1[i-1]
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T09:59:49.610

使用编译器包可以大大加快函数 fun1 的速度。使用 Joshua 提供的代码并使用编译器包对其进行扩展：

```
library(zoo)  # for na.locf
library(rbenchmark)
library(compiler)

v1 <- c(1,NA,NA,NA,1,NA,NA,NA,NA,NA,1,NA,NA,1,NA,1,NA,NA,NA,NA,NA,NA,NA,NA,NA,1)
v2 <- c(10,10,10,9,10,9,9,9,9,9,10,10,10,11,8,12,12,12,12,12,12,12,12,12,12,13)

fun1 <- function(v1,v2) {
    for (i in 2:length(v1)){
        if (!is.na(v1[i-1]) && is.na(v1[i]) && v2[i]==v2[i-1]){
            v1[i]<-1
        }
    }
    v1
}

fun2 <- function(v1,v2) {
    # create groups in which we need to assess missing values
    d <- cumsum(as.logical(c(0,diff(v2))))
    # for each group, carry the first obs forward
    ave(v1, d, FUN=function(x) na.locf(x, na.rm=FALSE))
}

fun3 <- cmpfun(fun1)

fun1(v1,v2)
fun2(v1,v2)
all.equal(fun1(v1,v2), fun2(v1,v2))
all.equal(fun1(v1,v2), fun3(v1,v2))

Nrep <- 1000

V1 <- rep(v1, each=Nrep)
V2 <- rep(v2, each=Nrep)
all.equal(fun1(V1,V2), fun2(V1,V2))
all.equal(fun1(V1,V2), fun3(V1,V2))

benchmark(fun1(V1,V2), fun2(V1,V2), fun3(V1,V2)) 
```

我们得到以下结果

```
benchmark(fun1(V1,V2), fun2(V1,V2), fun3(V1,V2))
          test replications elapsed relative user.self sys.self user.child
1 fun1(V1, V2)          100  12.252 5.706567    12.190    0.045          0
2 fun2(V1, V2)          100   2.147 1.000000     2.133    0.013          0
3 fun3(V1, V2)          100   3.702 1.724266     3.644    0.023          0 
```

所以编译出来的 fun1 比原来的 fun1 快很多，但还是比 fun2 慢。

# sql-server - Oracle SQL Developer Mac OS 无法批量插入 SQL Server 数据库

> ID：11394092
> 
> 赞同：0
> 
> 时间：2012-07-09T11:24:20.157
> 
> 标签：sql-server, macos, bulkinsert, oracle-sqldeveloper, csv

我正在尝试将一组平面文件导入 SQL 服务器数据库。我下载并安装了适用于 Mac OS 的 Oracle SQL Developer。我安装了正确的插件，可以很好地连接到数据库、创建表和执行查询。问题是我正在尝试使用批量插入将一些制表符分隔的文件导入数据库。但问题是，批量插入似乎不起作用。批量插入代码如下

```
BULK INSERT sessions
FROM '/.../sessions.txt'
WITH (FIELDTERMINATOR='\t',ROWTERMINATOR='\n') 
```

这是我得到的错误日志

```
Error starting at line 1 in command:
BULK INSERT sessions
Error at Command Line:1 Column:0
Error report:
SQL Error: Incorrect syntax near 'sessions'.
Error starting at line 2 in command:
FROM '/..../sessions.txt'
Error at Command Line:2 Column:0
Error report:
SQL Error: Incorrect syntax near the keyword 'FROM'.
Error starting at line 3 in command:
WITH (FIELDTERMINATOR='\t',ROWTERMINATOR='\n')
Error at Command Line:3 Column:0
Error report:
SQL Error: Incorrect syntax near '('. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:59:32.260

`BULK INSERT`是在 SQL Server 上执行的语句。所涉及的文件名在 NT 部署的 SQL Server 实例的上下文中相互影响。`'/.../sessions.txt'`不是有效的 NT 文件名，NT 使用`\`完整路径文件名中的目录分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-09T14:12:09.420

尝试`0x0a`作为行终止符：

```
BULK INSERT sessions
FROM '/.../sessions.txt'
WITH (FIELDTERMINATOR='\t', ROWTERMINATOR='0x0a') 
```

# gwt - 如何使用 gwt 历史查找浏览器后退按钮单击

> ID：11394093
> 
> 赞同：3
> 
> 时间：2012-07-09T11:24:22.950
> 
> 标签：gwt, browser-history, gwt-history

我正在为前进和后退浏览器按钮使用历史侦听器。但我无法找出历史后退按钮的点击。如果有任何想法请 rply ..对我来说很紧急...谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:20:14.313

您的代码可以使用历史管理系统发送的令牌来确定您要采取什么样的行动。假设您在 page1，并且该页面由令牌“page1”标识。现在，您转到第 2 页。如果单击后退按钮，您将收到令牌“page1”。您可以使用它来设置与 page1 相关的状态。有关更多信息，请参阅此[Google 文档](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsHistory)。

# php - 如何修复警告：mail() [function.mail]：SMTP 服务器响应：需要 530 SMTP 身份验证。在 C:\xampp\htdocs\.. 第 22 行错误

> ID：11394099
> 
> 赞同：2
> 
> 时间：2012-07-09T11:24:41.627
> 
> 标签：php, xampp, mail-server

我是 PHP 新手，并以在线脚本为例。我已经设置了 Xampp，并且 php 已安装并可以正常工作。我尝试使用 hMailServer 设置本地邮件服务器，但是我不完全确定设置是否正确。无论如何，这是PHP代码：

```
<?php

$subject="";
$detail="";
$customer_mail="";
$name="";

// Contact subject
$subject ="$subject"; 

// Details
$message="$detail";

// Mail of sender
$mail_from="$customer_mail"; 

// From 
$header="from: $name <$mail_from>";

// Enter your email address
$to ='sean.myers92@gmail.com';
$send_contact=mail($to,$subject,$message,$header);

// Check, if message sent to your email 
// display message "We've recived your information"
if($send_contact){
echo "We've recived your contact information";
}
else {
echo "ERROR";
}
?> 
```

以及相应的 HTML 代码：

```
<table width="400" border="0" align="center" cellpadding="3" cellspacing="1">
<tr>
<td><strong>Contact Form </strong></td>
</tr>
</table>
<table width="400" border="0" align="center" cellpadding="0" cellspacing="1">
<tr>
<td><form name="form1" method="post" action="test.php">
<table width="100%" border="0" cellspacing="1" cellpadding="3">
<tr>
<td width="16%">Subject</td>
<td width="2%">:</td>
<td width="82%"><input name="subject" type="text" id="subject" size="50"></td>
</tr>
<tr>
<td>Detail</td>
<td>:</td>
<td><textarea name="detail" cols="50" rows="4" id="detail"></textarea></td>
</tr>
<tr>
<td>Name</td>
<td>:</td>
<td><input name="name" type="text" id="name" size="50"></td>
</tr>
<tr>
<td>Email</td>
<td>:</td>
<td><input name="customer_mail" type="text" id="customer_mail" size="50"></td>
</tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><input type="submit" name="Submit" value="Submit"> <input type="reset" name="Submit2" value="Reset"></td>
</tr>
</table>
</form>
</td>
</tr>
</table> 
```

当我提交表单时，我收到错误警告：mail() [function.mail]: SMTP server response: 530 SMTP authentication is required。有什么想法可能是错的吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T19:55:17.227

来自 hMailServer 的论坛：[http ://www.hmailserver.com/forum/viewtopic.php?f=6&t=22039](http://www.hmailserver.com/forum/viewtopic.php?f=6&t=22039)

在 IP 范围内。转到我的计算机 IP 范围并取消勾选本地到外部和/或外部到外部的身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:39:29.290

它的 php 未配置您可以更新以指向 php.ini 中的有效 smtp 服务器查找`[mail function]`这仅适用于 Windows 您可能希望在本地设置邮件服务器，因为不支持密码或使用 [http:// sourceforge.net/projects/phpmailer](http://sourceforge.net/projects/phpmailer)支持登录

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T11:42:32.007

从此链接[http://code.google.com/a/apache-extras.org/p/phpmailer/downloads/list](http://code.google.com/a/apache-extras.org/p/phpmailer/downloads/list)下载最新的 phpmailer并阅读其 gmail 教程。对我来说，它也适用于本地系统:) + 这是非常简单的教程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T11:26:08.333

Xampp 没有内置邮件服务器。您需要设置一个。

[PHP 的邮件问题，无法发送](https://stackoverflow.com/questions/11377724/mail-issues-with-php-unable-to-send/11377748#comment14994116_11377748)

[使用 XAMPP 发送邮件时出错](https://stackoverflow.com/questions/1598705/error-on-sending-mail-with-xampp?rq=1)

另一种方法是使用另一个 stmp 服务器（即 googlemail）和一个邮件库，如 PEAR:Mail 或 swiftmailer 来建立一个 imap/smtp 连接和登录凭据

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-09T11:54:38.067

> /** * 返回错误字符串，如果成功则返回 null */
> 
> **function** authSendEmail($sendto, $replyto, $subject, $message, $namefrom=""){
> //SMTP + SERVER DETAILS
> /* * * * CONFIGURATION START * * * */
> $smtpServer = "mail.server.com";
> $端口=“25”；
> $timeout = "5";
> $username = "test@server.com";
> $密码=“测试”；
> $newLine = "\r\n";
> /* * * * 配置结束 * * * * */
> 
> ```
>  /*
>   2ХХ — команда успешно выполнена
>   3XX — ожидаются дополнительные данные от клиента
>   4ХХ — временная ошибка, клиент должен произвести следующую попытку через некоторое время
>   5ХХ — неустранимая ошибка
>   */
> 
>   //0    //Connect to the host on the specified port
>       $smtpConnect = fsockopen($smtpServer, $port, $errno, $errstr, $timeout);
>       $smtpResponse = fgets($smtpConnect, 1024);
>       if(empty($smtpConnect) || $smtpResponse{0} !='2' )
>       {
>         return  "Failed to connect: $smtpResponse";
>       }
> 
>   //1    //hello server
>       fputs($smtpConnect,"EHLO servername" . $newLine);
>       $smtpResponse = fgets  ($smtpConnect);
>       if($smtpResponse{0} !='2' )
>         return "Failed: $smtpResponse";
> 
>       $smtpResponse = fgets  ($smtpConnect);
>       if($smtpResponse{0} !='2' )
>         return "Failed: $smtpResponse";
> 
>       $smtpResponse = fgets  ($smtpConnect);
>       if($smtpResponse{0} !='2' )
>         return "Failed: $smtpResponse";
>       $smtpResponse = fgets  ($smtpConnect);
>       if($smtpResponse{0} !='2' )
>         return "Failed: $smtpResponse";
>       $smtpResponse = fgets  ($smtpConnect);
>       if($smtpResponse{0} !='2' )
>         return "Failed: $smtpResponse";
>       $smtpResponse = fgets  ($smtpConnect);
>       if($smtpResponse{0} !='2' )
>         return "Failed: $smtpResponse";
> 
>   //2    //Request Auth Login
>       fputs($smtpConnect,"AUTH LOGIN" . $newLine);
>       $smtpResponse = fgets($smtpConnect, 1024);
>       if($smtpResponse{0} !='3' )
>         return "Failed: $smtpResponse";
> 
>   //3    //Send username
>       fputs($smtpConnect,  base64_encode($username).$newLine);
>       $smtpResponse = fgets($smtpConnect, 1024);
>       if($smtpResponse{0} !='3' )
>         return "Authentification failed: $smtpResponse";
> 
>   //4    //Send password
>       fputs($smtpConnect,  base64_encode($password).$newLine);
>       $smtpResponse = fgets($smtpConnect, 1024);
>       if($smtpResponse{0} !='2' )
>         return "Failed: $smtpResponse";
> 
>   //6    //Email From
>       fputs($smtpConnect, "MAIL FROM: ".$username . $newLine);
>       $smtpResponse = fgets($smtpConnect, 1024);
>       if($smtpResponse{0} !='2' )
>         return "Failed: $smtpResponse";
> 
>   //7    //Email To
>       fputs($smtpConnect, "RCPT TO: ".$sendto . $newLine);
>       $smtpResponse = fgets($smtpConnect, 1024);
>       if($smtpResponse{0} !='2' )
>         return "Failed: $smtpResponse";
> 
>   //8    //The Email
>       fputs($smtpConnect, "DATA" . $newLine);
>       $smtpResponse = fgets($smtpConnect, 1024);
>       if($smtpResponse{0} !='3' )
>         return "Failed: $smtpResponse";
> 
>   //9 //Construct Headers
>       $headers = "MIME-Version: 1.0" . $newLine;
>       $headers .= "Content-type: text/html; charset=windows-1251" . $newLine;
>       $headers .= "To: Администратор <$sendto>" . $newLine;
>       $headers .= "From: $namefrom <$username>" . $newLine;
>       $headers .= "Reply-To: $namefrom <$replyto>" . $newLine;
>       $headers .= "X-Mailer: ".phpversion(). $newLine;
> 
>       fputs($smtpConnect, "Subject: $subject\n$headers\n\n$message\n.\n" );
>       $smtpResponse = fgets($smtpConnect, 515);
>       if($smtpResponse{0} !='2' )
>         return "Failed: $smtpResponse";
> 
>   //10    // Say Bye to SMTP
>       fputs($smtpConnect,"QUIT" . $newLine);
>       $smtpResponse = fgets($smtpConnect, 1024);
>       if($smtpResponse{0} !='2' )
>         return "Failed: $smtpResponse";
> 
>       return false;
> }
> 
> ?> 
> ```

# maven - 为什么 Maven 元数据不包括所有工件的特定版本

> ID：11394104
> 
> 赞同：1
> 
> 时间：2012-07-09T11:25:03.463
> 
> 标签：maven, metadata, maven-plugin

我有很多工件被上传到不同的 nexus 托管存储库，并且我的许多工件在某个时候都有一个以 XX.Y.0.0 结尾的发布版本，即以 0.0 结尾。我已经尝试了很多次，但是 maven 元数据 xml 文件不包括这些版本。xml 元数据文件包括之前和之后的版本，但从不包括这个特定版本。

你们有谁知道为什么，并希望有解决方案？我尝试删除元数据 xml 文件，并尝试使用 nexus 进行重建，但没有任何反应。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:47:38.097

尝试强制 Nexus 重建元数据。有时它会损坏。

Maven 将 1.2.3.0.0 等版本视为等同于 1.2.3。

有关 Maven 版本控制方案的更多详细信息，请查看[此处](http://docs.codehaus.org/display/MAVEN/Versioning)。

# javascript - 如何隐藏除最后一个之外的数据网格列

> ID：11394107
> 
> 赞同：-1
> 
> 时间：2012-07-09T11:25:12.770
> 
> 标签：javascript, extjs, extjs3

这是预期的结果：[http](http://rghost.net/39116974/image.png) ://rghost.net/39116974/image.png 。因此，我们无法取消选中名为“Caption”的最后一项。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:27:38.180

`Ext.grid.column.ColumnView`有财产[`hideable`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.column.Column-cfg-hideable)。

> False 以防止用户隐藏此列。
> 
> 默认为：真

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T22:20:52.267

这个怎么样

```
for(var i=0; i< grid.columns.length - 1; i++)
    grid.columns[i].hide(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-22T12:10:41.270

如果你想隐藏所有，但一个，你需要看一下**Ext.grid.GridView** 的方法**handleHdMenuClick**（我在2.3、3.0、3.1 ext版本中使用过），你就会明白你需要使用**fixed**您的专栏的属性：

 ****```
 handleHdMenuClick : function(item){
    var index = this.hdCtxIndex;
    var cm = this.cm, ds = this.ds;
    switch(item.id){
        case "asc":
            ds.sort(cm.getDataIndex(index), "ASC");
            break;
        case "desc":
            ds.sort(cm.getDataIndex(index), "DESC");
            break;
        default:
            index = cm.getIndexById(item.id.substr(4));
            if(index != -1){
                if(item.checked && cm.getColumnsBy(this.isHideableColumn, this).length <= 1){
                    this.onDenyColumnHide();
                    return false;
                }
                cm.setHidden(index, item.checked);
            }
    }
    return true;
},

    isHideableColumn : function(c){
    return !c.hidden && !c.fixed;
}, 
```

但在 2.x 版本中唯一的区别是它使用了**固定**属性，但在 > 3.x 中它没有。您将需要添加覆盖文件来解决此问题：

```
 Ext.override(Ext.grid.GridView, {
        handleHdMenuClick : function(item) {
            var store     = this.ds,
                dataIndex = this.cm.getDataIndex(this.hdCtxIndex),
                result    = true;

            switch (item.getItemId()) {
                case 'asc':
                    store.sort(dataIndex, 'ASC');
                    break;
                case 'desc':
                    store.sort(dataIndex, 'DESC');
                    break;
                default:
                    result = this.handleHdMenuClickDefault(item);
            }
            return result;
        },

        handleHdMenuClickDefault: function(item) {
            var colModel = this.cm,
                itemId   = item.getItemId(),
                index    = colModel.getIndexById(itemId.substr(4));

            if (index != -1) {
                if (item.checked && colModel.getColumnsBy(this.isHideableColumn, this).length <= 1) {
                    this.onDenyColumnHide();
                    return false;
                }
                colModel.setHidden(index, item.checked);
            }
        },

        isHideableColumn : function(c) {
            return !c.hidden && !c.fixed;
        }
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T22:50:50.767

在渲染网格之前，您可以找到最后一列并将其可隐藏设置为 false。

IE：

```
myGrid.on( 'beforerender', function(){
    myGrid.colModel = myGrid.getColumnModel();
    myGrid.colModel.config[ myGrid.colModel.config.length - 1 ].hideable = false;
} ); 
```****

# java - Java Android蓝牙连接并在列表视图中添加搜索设备的结果

> ID：11394109
> 
> 赞同：0
> 
> 时间：2012-07-09T11:25:31.373
> 
> 标签：java, android, bluetooth

我正在尝试使用蓝牙制作一个 java android 应用程序，在列表视图中搜索所有配对或未配对的设备并连接到设备后显示结果时遇到了一些麻烦，在我的代码中我试图连接一个使用它的mac地址的设备，但它不起作用，我在文本视图中显示结果，知道吗？？？？谢谢你。

```
public class Conexion_bluetooth extends Activity {
TextView out; 

// Debugging
private static final UUID MY_UUID = UUID.fromString("fa87c0d0-afac-11de-8a39-0800200c9a66");
private BluetoothAdapter mBluetoothAdapter = null;
private BluetoothSocket mmSocket=null;
private static final String TAG = "BluetoothChat";
private static final boolean D = true;

private static final int REQUEST_ENABLE_BT = 3;

private BluetoothAdapter mBluetoothAdapter = null;

ListView lstDispositivos;
ListView lstDispositivos2;

@Override
public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     if(D) Log.e(TAG, "+++ ON CREATE +++");

     // Set up the window layout
     setContentView(R.layout.activity_conexion_bluetooth);

     // Get local Bluetooth adapter
     mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();

     // If the adapter is null, then Bluetooth is not supported
     if (mBluetoothAdapter == null) {
         Toast.makeText(this, "Bluetooth is not available", Toast.LENGTH_LONG).show();
         finish();
         return;
     }
 }

@Override
//Comprueba que el bluetooth esta conectado
public void onStart() {
    super.onStart();
    if(D) Log.e(TAG, "++ ON START ++");

    // Si el bluetooth no está activado muestra un mensaje solicitando permiso para activarle
    if (!mBluetoothAdapter.isEnabled()) {
        Intent enableIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
        startActivityForResult(enableIntent, REQUEST_ENABLE_BT);
        Toast.makeText(this, "conectando...", Toast.LENGTH_LONG).show();

    }else{
        Toast.makeText(this, "conectado", Toast.LENGTH_LONG).show();
    }
}

public void buscar(View view){
    //TextView dispositivos = (TextView) findViewById(R.id.dispositivos);

    if (mBluetoothAdapter.isDiscovering()) {
        Toast.makeText(this, "\nCancel discovery...", Toast.LENGTH_LONG).show();
        mBluetoothAdapter.cancelDiscovery(); 
    }else{
        Toast.makeText(this, "\nStarting discovery...", Toast.LENGTH_LONG).show();
        //mBluetoothAdapter.
        mBluetoothAdapter.startDiscovery(); 
        Toast.makeText(this, "\nDone with discovery...", Toast.LENGTH_LONG).show();
    }

    final TextView dispositivos = (TextView) findViewById(R.id.dispositivos);
    String dispositivo[] = new String[]{};
    final Vector<String> dispositivosBT = new Vector<String>();
    //final int dispEncontrados=0;

    // Create a BroadcastReceiver for ACTION_FOUND
    final BroadcastReceiver mReceiver = new BroadcastReceiver() {
        public void onReceive(Context context, Intent intent) {
            //String dispositivosBT[] = new String[]{};
            String action = intent.getAction();
            // When discovery finds a device
            if (BluetoothDevice.ACTION_FOUND.equals(action)) {
                //setContentView(R.layout.dispositivos_bluetooth);//determinamos que al iniciar la aplicacion aparezca esta pantalla
                    // Get the BluetoothDevice object from the Intent
                BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
                    //  Add the name and address to an array adapter to show in a ListView
                    dispositivos.append("\n" + device.getName() + "\n" + device.getAddress());
            }
        }
    };
    // Register the BroadcastReceiver
    IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);
    registerReceiver(mReceiver, filter); // Don't forget to unregister during onDestroy

    //dispositivosBT = new String[dispositivos.length()];
    //final ArrayAdapter<String> adaptador = new ArrayAdapter<String>(this, android.R.layout.simple_expandable_list_item_1, dispositivosBT);
    final TextView dispositivosSincronizados = (TextView) findViewById(R.id.dispositivosSincronizados);
    Set<BluetoothDevice> pairedDevices = mBluetoothAdapter.getBondedDevices();
    // If there are paired devices
    if (pairedDevices.size() > 0) {
        // Loop through paired devices
        for (BluetoothDevice device : pairedDevices) {
            // Add the name and address to an array adapter to show in a ListView
            dispositivosSincronizados.append("\n" + device.getName() + "\n" + device.getAddress());
        }
    }
}
public void paraBusqueda(View view){
    if (mBluetoothAdapter.isDiscovering()) {
        Toast.makeText(this, "\nCancel discovery...", Toast.LENGTH_LONG).show();
        mBluetoothAdapter.cancelDiscovery();
    }else{
        Toast.makeText(this, "\nis not discovering...", Toast.LENGTH_LONG).show();
    }

}

public void pararBluetooth(){
    if (mBluetoothAdapter.isEnabled()) {
        Intent enableIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
        startActivityForResult(enableIntent, REQUEST_ENABLE_BT);        
    }
}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_conexion_bluetooth, menu);
    return true;
}

public void conectar(View view){
    String address = "00:15:83:07:d1:14";
 device = mBluetoothAdapter.getRemoteDevice(address);
 Toast.makeText(getApplicationContext(), "cONNECTING", Toast.LENGTH_SHORT).show();
 try {

 mmSocket = device.createRfcommSocketToServiceRecord(MY_UUID);
 mmSocket.connect();
 } catch (IOException e) {
 // TODO Auto-generated catch block
 e.printStackTrace();
 }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:59:12.727

最近我们用蓝牙玩了一些应用程序。我不是安卓专家。您可以尝试以下方法。
1.检查你的蓝牙设备的UUID
2.连接到蓝牙需要在一个单独的线程中
3.在调试模式下运行应用程序并检查异常或错误。
请参阅[android 蓝牙文档](http://developer.android.com/guide/topics/connectivity/bluetooth.html)
如果您仍然有同样的问题，请查看蓝牙示例应用程序，否则我将发送我为建立连接而编写的代码。

问候
斯里尼

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T05:11:44.483

使用*AsyncTask*我们可以建立*蓝牙*连接。

```
 public class BluetoothConnectionActivity extends Activity {

    private Button connectButton;

    @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            connectButton = (Button) findViewById(R.id.connectButton);
            connectButton.setOnclickListener(View.onClickListener() {
                        @Override
                    public void onClick(View v) {
                           String address = "00:15:83:07:d1:14";
                   new ConnectAsyncTask(address).execute();
                    }
                    });

        }

    private class ConnectAsyncTask extends AsyncTask<String, Void, Boolean> {
        @Override
        protected void onPostExecute(Boolean isConnected) {
            Toast.makeText(getApplicationContext(), "Connecting...",
                    Toast.LENGTH_SHORT).show();
        }

        @Override
        protected Boolean doInBackground(String... param) {
            BluetoothDevice device = BluetoothAdapter
                    .getDefaultBluetoothAdapter().getRemoteDevice(param[0]);
            try {
                BluetoothSocket mmSocket = device
                        .createRfcommSocketToServiceRecord(MY_UUID);
                mmSocket.connect();
            } catch (Exception e) {
                e.printStackTrace();
                Log.d("BluetoothConnectivity", "ERROR:" + e.getMessage());
                return false;
            }
            return true;
        }

        @Override
        protected void onPostExecute(Boolean isConnected) {
            if (isConnected) {
                Toast.makeText(getApplicationContext(), "Connected",
                        Toast.LENGTH_SHORT).show();
            } else {
                Toast.makeText(getApplicationContext(), "Failed to connected",
                        Toast.LENGTH_SHORT).show();
            }
        }
    }
} 
```

问候斯里尼

# android - 当背景为黑色时，Android PorterDuff.Mode.CLEAR 无法正常工作

> ID：11394111
> 
> 赞同：1
> 
> 时间：2012-07-09T11:25:45.003
> 
> 标签：android, paint, porter-duff

我需要一些关于我正在使用的应用程序的帮助。我正在尝试创建一个绘画应用程序，几天前我注意到了一个问题，现在我决定进行一些研究来解决它。当我使用`PorterDuff.Mode.CLEAR`我的刷子作为橡皮擦时，它在我的背景是白色的情况下正常工作。但是，如果我将背景设置为其他颜色（例如 Black like : `mCanvas.drawColor(Color.BLACK);`）并且在我使用橡皮擦后，我使用橡皮擦的地方会被涂成白色。这是我为橡皮擦设置变量的方式：

```
erase.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            stamp=false;
            MODE = ERASER_MODE;
            mPaint.setColorFilter(null);
            mPaint.setShader(null);
            mPaint.setMaskFilter(null);
            mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));
        }
    }); 
```

那么有什么想法为什么会发生，我该如何解决这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:41:12.843

其实我发现我的问题在哪里。在我用于绘图等的自定义视图中，我正在这样做

```
 @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
        mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
        mCanvas = new Canvas(mBitmap);
        mCanvas.drawColor(parentColor); //parentColor = currentBackgroundColor
    }

    @Override
    protected void onDraw(Canvas canvas) {
        canvas.drawColor(Color.WHITE);
        canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
        canvas.drawPath(mPath, mPaint);
    } 
```

我只需要改变我的

# android - 在 XML 视图中，行未对齐

> ID：11394112
> 
> 赞同：0
> 
> 时间：2012-07-09T11:25:53.950
> 
> 标签：android, xml, eclipse

我正在尝试`Layout`使用 xml 视图而不是图形布局，但我经常看到当我将光标放在特定行时，它是之前的行（现在显示该行的重复）。这让我很难使用 xml，因为在将光标放在正确的行之前，我无法直接看到我正在编辑的位置。

当我重新启动 Eclipse 时问题就消失了，但这对我来说并不是一个真正的选择，因为我在非 SSD 硬盘驱动器上处理大型项目（需要永远启动）。非常感谢任何帮助！

![Eclipse XML 屏幕抓取](../Images/ce50a3f417f7f0dbc2bf791efa431268.png)

当我显示行号时，我可以看到编辑器在编号行下方显示代码，就好像它正在使用某种代码的缓存图像或其他东西。如图所示，`</RelativeLayout>`位于第 38 行下方，这应该是不可能的，并且不可点击。虽然当我点击第 38 行时，`</RelativeLayout>`也会显示在那里。整个景色是这样的。第 10 行实际上是第 9 行，依此类推。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:29:15.760

这对我有用...只需保存文件，将其关闭并再次打开 xml，您应该可以正常编辑它。无需重新启动 Eclipse。

# django - 如何显示对象的相关内容

> ID：11394114
> 
> 赞同：0
> 
> 时间：2012-07-09T11:25:57.413
> 
> 标签：django

我有一个可以有很多对话的联系人类。但每个对话都可以属于一个联系人。所以它是一对多的关系。

```
class Contact(models.Model):
    first_name          = models.CharField()
    last_name           = models.CharField()   

class Conversation(models.Model):
    contact             = models.ForeignKey(Contact)
    notes               = models.TextField()

    def __unicode__(self):
        return self.notes 
```

现在，当我将联系人传递给模板时，我希望有一个字段显示联系人的最后一次对话。

```
contacts= profile.company.contact_set.all()[:10]
calls = []

for c in contacts:
    calls.append(max(c.conversation_set.all())) 
```

我像这样传递它们：

```
vars = {'contacts' : contacts, 'calls': calls}
variables = RequestContext(request, vars)
return render_to_response('main_page.html', variables) 
```

在模板中，我想出了这个魔法：

```
{% for idx, val in contacts %}
                    <tr>
                        <td>...
                        </td>
                        <td>    
                            {% if calls %}  
                                 {{ calls.idx }} 
                            {% endif %}</td>
                    </tr>
{% endfor %} 
```

这不会显示任何呼叫。但是，如果我用 calls.0 替换了 calls.idx，我会显示第一个。

我究竟做错了什么？除此之外，它可能比这更容易完成。:) 我愿意接受更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:10:35.960

您不能在模板语言中进行这种间接查找 -`calls.idx`将始终引用`idx`属于`calls`.

但是我认为更好的解决方案是将调用值直接添加到联系人对象上——不要忘记在 Python 中对象是动态的，因此您可以在它们上添加任何您喜欢的内容。

```
for c in contacts:
    c.max_call = max(c.conversation_set.all()) 
```

顺便说一句，这`max`真的有效吗？我不确定它会根据什么进行比较。另一种方法是[`get_latest_by`](https://docs.djangoproject.com/en/dev/ref/models/options/#get-latest-by)在您的对话模型中定义，然后您可以完全避免此循环，只需`{{ contact.conversation_set.get_latest }}`通过循环为每个联系人调用您的模板。

（请注意，这仍然是非常低效的，有多种方法可以一次性获得整个最大对话集，但现在就可以了。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:14:59.937

```
class Contact(models.Model):
    # your code here

   @property
   def last_conversation(self):
       try:
           return self.conversation_set.order_by("-some_date_or_order_field")[0]
       except IndexError:
           return None 
```

然后你不必在你的视图中关心这个，只需要在你的模板中调用“c.last_contact”。

# c# - 获取模板字段标签内的文本框值？

> ID：11394121
> 
> 赞同：2
> 
> 时间：2012-07-09T11:26:19.477
> 
> 标签：c#, asp.net

如何获取`templateField`标签内的文本框值？

这是我的代码：

```
 <Fields>
   <asp:TemplateField >
     <ItemTemplate >
     <asp:TextBox ID="SUBJEK" runat="server" Width="600px" Text='<%# Bind("SUBJEK") %>' />
     </ItemTemplate>
    </asp:TemplateField>
  </Fields> 
```

我试图通过以下方式获得价值：

```
TextBox subjek = (TextBox)DV1.FindControl("SUBJEK") as TextBox; 
```

但是，它没有用。这是错误消息：

> “无法将类型 'System.Web.UI.Control' 转换为 'JobList.TextBox'”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:58:31.773

您已转到单元格以查找控件，提供行索引和列索引

```
int indexOfRowYouAreFinding = 0;
int indexOfColYouAreFinding = 2;

TextBox subjek = DV1.Rows[indexOfRowYouAreFinding].Cells[indexOfColYouAreFinding].FindControl("SUBJEK")[0] as TextBox; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T13:10:16.177

您的命名空间中有另一个名为`TextBox`.

检查一下，`JobList.TextBox`是不是asp.net TextBox。

这应该有助于：

```
var subjek = (TextBox)DV1.FindControl("SUBJEK") as System.Web.UI.WebControls.Textbox; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T11:28:12.860

`FindControl`方法返回一个`array`控件而不是单个控件，因此您需要提及`index`.

```
TextBox subjek = DV1.FindControl("SUBJEK")[0] as TextBox; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T13:05:24.710

详细信息视图中有多行，因此您必须提供从中选择文本框值的行的索引。 `TextBox t= ( TextBox )DV1.Rows[0].FindControl("SUBJEK");`

此代码将返回第一行值。

# debugging - jdb maven：安装Mojo源

> ID：11394126
> 
> 赞同：0
> 
> 时间：2012-07-09T11:26:50.023
> 
> 标签：debugging, maven-plugin, jdb

我尝试`install::install`使用`mvnDebug`/`jdb -attach 8000` 我很容易地进行调试`org.apache.maven.plugin.DefaultBuildPluginManager:101` ，然后踩到`mojo.execute()`它会导致我：

```
main[1] where
  [1] org.apache.maven.plugin.install.InstallMojo.execute (InstallMojo.java:76)
  [2] org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:101)
... 
```

我从 svn 中找到了 InstallMojo.java 的源代码，但我应该如何知道要签出的标签？
谢谢，
马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:13:09.423

[根据给定的信息，您使用的是 maven-install-plugin 的 2.3.1 版本，您可以简单地读取该特定版本的 pom 文件，这意味着在maven central](http://search.maven.org/#search%7Cga%7C1%7Cmaven-install-plugin)中搜索该版本。[pom 文件](http://search.maven.org/remotecontent?filepath=org/apache/maven/plugins/maven-install-plugin/2.3.1/maven-install-plugin-2.3.1.pom)将为您提供所需的信息：

摘抄：

```
<scm><connection>scm:svn:http://svn.apache.org/repos/asf/maven/plugins/tags/maven-install-plugin-2.3.1</connection>
<developerConnection>scm:svn:https://svn.apache.org/repos/asf/maven/plugins/tags/maven-install-plugin-2.3.1</developerConnection> 
```

这为您提供了 Apache SVN 存储库中 SVN 标签的确切位置，当然还有您可以签出的正确位置。

# java - java.util.Scanner 不工作

> ID：11394128
> 
> 赞同：0
> 
> 时间：2012-07-09T11:26:52.240
> 
> 标签：java

我使用 Rational Software Architect 作为我的 IDE，我无法导入 java.util.Scanner，似乎 java.util 包中没有 Scanner，我应该包含一些 jar 文件来使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T11:29:05.560

[java.util.Scanner](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)是在 1.5 版（“Java 5”）中引入的，我对 Rational Software Architect 不熟悉，但可能您需要将项目设置为使用正确的 Java 版本（1.5 或更高版本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:29:45.687

没有 java.util.scanner 是 j2se 5 和 6 的一部分 您使用的是哪个 IDE？尝试一个简单的测试。使用一个文件启动一个新的 java 项目并尝试使用扫描仪，看看会发生什么

# javascript - Android：除了使用 addJsInterface 和 onJsPrompt 之外，js 调用 native 还有其他方法吗？

> ID：11394131
> 
> 赞同：1
> 
> 时间：2012-07-09T11:27:02.827
> 
> 标签：javascript, android, android-webview

Android WebView 将 addJsInterface 提供为一个 js-native-bridge，但是如果记忆对我有用的话，它从 Android 2.3 开始就被打破了。一些聪明人通过覆盖 onJsPrompt 找到了解决方法。我很好奇除了这两种方法之外，是否还有另一种方法可以让 js 在 webview 中调用 native。谢谢。

# c# - excel表格中的SQL查询语句

> ID：11394135
> 
> 赞同：1
> 
> 时间：2012-07-09T11:27:15.647
> 
> 标签：c#, .net, sql, oracle

我有一个形式的 SQL 查询：

```
Update TableName Set TaskStatus=xxx where TaskID=xx; 
```

我的 C# 代码中有这个 SQL 查询。

在一个 Excel 文件中，在 B 单元格下，我有一组语句，如 Rejected、Completed、Closed 等。我的 C# 代码读取这些单元格并采取适当的措施。例如，如果它读取已完成，则执行以下查询：

```
Update TableName Set TaskStatus=Completed where TaskID=xx; 
```

我的问题是，在一个单元格中，我的值无法完成。当我的代码读取此单元格并将其合并到查询中时，

```
 Update TableName Set TaskStatus=Can't Complete where TaskID=xx; 
```

它抛出一个错误，指出“引号应该关闭”它假设不能作为 SQL 关键字或 SQL 引号中的引号。我该如何克服呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T11:34:25.160

AFAIK 使用参数化的 SQL 命令解决了这个问题，sincs SqlParameter 对象在这些情况下为你做扩展。您的代码中的类似内容应该可以解决您的问题：

```
string sql = "Update TableName Set TaskStatus=@status where TaskID=@id;";
SqlCommand cmd = new SqlCommand();
cmd.CommandType = CommandType.Text;
cmd.CommandText = sql;
cmd.Parameters.AddWithValue("status", status_excel_call_value);
cmd.Parameters.AddWithValue("id", your_task_id);

cmd.ExecuteNonQuery(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T11:34:12.070

您可以替换`'`为`''`. 引号定义了一个文本，因此您的代码会打开，但不会通过插入来关闭文本“区域” `Can't`。

# iphone - 选择新按钮时如何完成选定按钮的突出显示？

> ID：11394136
> 
> 赞同：0
> 
> 时间：2012-07-09T11:27:24.063
> 
> 标签：iphone, uibutton, highlighting, activity-finish

```
-(IBAction)choiceOne:(id)sender{

    if ([Choice2 isSelected]) {
        [Choice2 performSelector:@selector(finishHighlight:) withObject:sender afterDelay:0];
        score = score -4;
        score = score+8;
        NSLog(@"Score updated %i touched from choice 1 ",score);
        [self performSelector:@selector(doHighlight:) withObject:sender afterDelay:0];

        checker =1 ;

    }else if ([Choice3 isSelected]) {
          [Choice3 performSelector:@selector(finishHighlight:) withObject:sender afterDelay:0];
        score = score -2;
        score = score+8;
        NSLog(@"Score updated %i touched from choice 1 ",score);
        [self performSelector:@selector(doHighlight:) withObject:sender afterDelay:0];

        checker =1 ;
    }
    else {
        score = score+8;
        NSLog(@"Score updated %i touched from choice 1 ",score);
        [self performSelector:@selector(doHighlight:) withObject:sender afterDelay:0];

        checker =1 ;
    }

} 
```

如果从菜单中按下任何其他按钮，我必须从所选按钮完成突出显示

```
- (void)doHighlight:(UIButton*)b {
    [b setHighlighted:YES];
}    
-(void)finishHighlight:(UIButton*)a{

    [a setHighlighted:NO];

} 
```

这些是我在上面使用的功能......和

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:36:22.063

如果两个按钮都连接到“IBOutlets”，这将非常容易。他们是吗？例如：

```
IBOutlet UIButton * mode1;
IBOutlet UIButton * mode2; 
```

参数 a 和 b 在这个特定的...中被忽略了

```
-(IBAction) button1Pressed:(id)sender {

    [self performSelector:@selector(highlightButton1:) withObject:sender afterDelay:0.0];
}

- (void)highlightButton1:(UIButton *)a { 
        [mode1 setHighlighted:YES];
    [mode2 setHighlited:NO];
}
-(IBAction) button2Pressed:(id)sender {

    [self performSelector:@selector(highlightButton2:) withObject:sender afterDelay:0.0];
}

- (void)highlightButton2:(UIButton *)b { 
    [mode1 setHighlighted:NO];
    [mode2 setHighlited:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:31:28.913

是的..只需使用迭代来获取按钮并将它们设置为正常，或者您可以拥有一个实例变量来存储先前选择的按钮。所以你只需要改变这个按钮的状态。因此，由您决定哪种方法更适合您。

# android - Android：检测何时安装应用程序

> ID：11394141
> 
> 赞同：4
> 
> 时间：2012-07-09T11:27:41.003
> 
> 标签：android, broadcastreceiver, android-download-manager

我正在尝试使用`DownloadManager`该类从服务器下载 Android 应用程序，安装它，然后检测安装何时完成。我正在使用两个接收器：一个用于检测下载过程，另一个用于检测安装过程。第一个接收器工作正常，但第二个没有。我做错了什么？

```
DownloadManager dm = (DownloadManager) DownloadApplicationActivity.this.getSystemService(Context.DOWNLOAD_SERVICE);
DownloadManager.Request req = new DownloadManager.Request(Uri.parse(MY_LINK));
req.setTitle(MY_TITLE)
                .setDescription("Downloading ....")
                // download the package to the /sdcard/downlaod path.
                .setDestinationInExternalPublicDir(
                        Environment.DIRECTORY_DOWNLOADS,
                        MY_PATH);
        long enqueue = dm.enqueue(req);
BroadcastReceiver receiver= new BroadcastReceiver() {
@Override
public void onReceive(Context context, Intent intent) {
    String action = intent.getAction();
    if (DownloadManager.ACTION_DOWNLOAD_COMPLETE.equals(action)) {
        Query query = new Query();
        query.setFilterById(enqueue);
        Cursor c =dm.query(query);
        if (c.moveToFirst()) {
            int columnIndex = c.getColumnIndex(DownloadManager.COLUMN_STATUS);
            if (DownloadManager.STATUS_SUCCESSFUL == c.getInt(columnIndex)) {
                // show a notification bar.
                NotificationManager notificationManager = (NotificationManager) this.getSystemService(Context.NOTIFICATION_SERVICE);
                Notification notification = new Notification(R.drawable.icon,"",System.currentTimeMillis());

                notification.flags |= Notification.FLAG_AUTO_CANCEL;
                notification.flags |= Notification.FLAG_NO_CLEAR;
                Intent i = new Intent(Intent.ACTION_VIEW);
                // when the notification is clicked, install the app.
                        i.setDataAndType(Uri.fromFile(new File(Environment
                                .getExternalStorageDirectory() + APP_PATH)),"application/vnd.android.package-archive");
                        PendingIntent pendingIntent = PendingIntent.getActivity(
                                activity, 0, i, 0);
                        notification.setLatestEventInfo(activity, MY_TEXT, MY_TEXT,pendingIntent);
                        notification.number += 1;
                        notificationManager.notify( 0, notification);
                        //i want to detect the app's installation, I register a ne receiver
                        registerReceiver(installReceiver,new IntentFilter(Intent.ACTION_PACKAGE_ADDED));
            }
        }           
};  

BroadcastReceiver installReceiver= new BroadcastReceiver() {
@Override
public void onReceive(Context context, Intent intent) {
    String action = intent.getAction();
    if (Intent.ACTION_PACKAGE_ADDED.equals(action)) {
        Uri data = intent.getData();
        String packageName = data.getEncodedSchemeSpecificPart();
        Log.i("The installed package is: ", "" + packageName);

            }
        }           
}; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T12:39:29.530

我解决了我的问题，我添加了

```
IntentFilter intentFilter = new IntentFilter();
intentFilter.addAction(Intent.ACTION_PACKAGE_ADDED);
intentFilter.addAction(Intent.ACTION_PACKAGE_INSTALL);
intentFilter.addDataScheme("package"); 
```

行前：

```
registerReceiver(installReceiver, intentFilter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:56:25.377

你可以试试下面的代码。通过这种方式，您可以获得可以由意图调用的所有活动，并且如果您知道活动名称并且它存在于 .. 检索到的列表中，那么您就`queryIntentActivities()`知道它已安装。

```
public void callQrScan()
    {
    Intent intent1 = new Intent("com.google.zxing.client.android.SCAN");    

    if(isCallable(intent1)== true){

    Context context = getApplicationContext();
    CharSequence text = "Scan Niet Gelukt";
    int duration = Toast.LENGTH_SHORT;

    Toast toast = Toast.makeText(context, text, duration);
    toast.show();
    }
    else{
        Context context = getApplicationContext();
        CharSequence text = "Scan Niet Gelukt";
        int duration = Toast.LENGTH_SHORT;

        Toast toast = Toast.makeText(context, text, duration);
        toast.show();
    }

    Button tempbutton = (Button)findViewById(R.id.Button03);

    tempbutton.setOnClickListener(new OnClickListener()
    {
        public void onClick(final View v)
    {
                callQrScan();
    }
    });

    }

    private boolean isCallable(Intent intent1) {  
                List<ResolveInfo> list = getPackageManager().queryIntentActivities(intent1,   
            PackageManager.MATCH_DEFAULT_ONLY);  
        if(list.size() > 0)
                return true ;  
        else
            return false;

    } 
```

希望能帮助到你 ：）

# php - 使用 PHP 和 XML 创建 1000 个图像的 CSS 精灵

> ID：11394145
> 
> 赞同：0
> 
> 时间：2012-07-09T11:27:53.887
> 
> 标签：php, xml, sprite

我有一个包含大约 1000 个图像 URL 的 XML 文件。我想使用 PHP 创建所有图像的精灵。

*   XML 文件大小约为 30 MB
*   图片大小约为 15kb

**我怎样才能完成它？**

这是我的代码（我收到致命错误：允许的内存大小...）：

```
<?php

$dest              = imagecreatefromjpeg('15000x2000.jpg');
$increasing_width  = 0;
$increasing_height = 0;

$xmldata = '1000-images.xml';

$open = fopen($xmldata, 'r');

$content = stream_get_contents($open);

fclose($open);

$xml = new SimpleXMLElement($content);
foreach ($xml->xpath('//image') as $image) {
    $src = imagecreatefromjpeg('test/' . $image->picture->attributes() . '.jpg');

    if ($increasing_width == '15000') {
        $increasing_width = '0';
        $increasing_height += 200;
    }

    imagecopymerge($dest, $src, $increasing_width, $increasing_height, 0, 0, 150, 200, 100);

}

imagejpeg($dest, '15000x2000.jpg');

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-23T22:35:03.557

# java - Jetty 在 http 请求中对绝对 URL 的请求返回 400

> ID：11394146
> 
> 赞同：1
> 
> 时间：2012-07-09T11:28:05.467
> 
> 标签：java, http, tomcat, jetty

我已经用 Jetty 替换了 Tomcat。现在，对于第三方系统发送的请求，我有 400 个 http 错误代码。正如我所看到的，我发送的测试`curl`与网络浏览器的区别在于 http 动词中的 url：

```
POST http://10.15.1.9:49302 HTTP/1.0
Host: 10.15.1.9
Content-Type: text/xml
Content-Length: 71065
User-Agent: hpost/0.1
Pragma: no-cache
Accept: */* 
```

此请求不起作用，但使用相对 URL 发布，例如可以`POST / HTTP/1.0`正常工作。谁错了？我无法更改第三方系统，那么，是否可以让码头接受此类请求？

我已经尝试过 Jetty v6.1.26、v7.6.4 和 v8.1.4 - 工作方式相同。

* * *

好的，我认为原因是 url 后面缺少斜杠，`POST http://10.15.1.9:49302/ HTTP/1.0`工作正常。

有没有人知道是码头问题还是客户端发送了格式错误的网址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T04:50:36.753

虽然 HTTP 规范[RFC-2616](https://www.rfc-editor.org/rfc/rfc2616)说[服务器必须接受请求行的 absoluteuri](https://www.rfc-editor.org/rfc/rfc2616#section-5.1.2)，但这通常只用于代理请求。

对于 Jetty，请求行`POST http://10.15.1.9:49302 HTTP/1.0`被视为 HTTP/1.0 请求，并且属于[RFC-1945 的请求行 URI](https://www.rfc-editor.org/rfc/rfc1945#section-5.1.2)规则，该规则声明 absoluteuri 始终是代理请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T20:11:18.353

我已经[报告了这个问题](https://jira.codehaus.org/browse/JETTY-1533)，现在已经修复了。

# mysql - cakephp和mysql中字段的最小值和最大值

> ID：11394147
> 
> 赞同：6
> 
> 时间：2012-07-09T11:28:05.837
> 
> 标签：mysql, cakephp, aggregate-functions, max, min

我正在尝试为 cakephp 和 mysql 站点构建搜索功能。选择不同的参数，如产品的价格或长度会触发一个 ajax 调用，该调用返回匹配结果的数量。我想用长度和价格的最小值和最大值扩展返回的结果。我试过这样做，[http://bin.cakephp.org/view/1004813660](http://bin.cakephp.org/view/1004813660)。使用前 4 个发现太费时了。最后一个在本地运行，但出现错误；

1140 - 如果没有 GROUP BY 子句，混合没有 GROUP 列的 GROUP 列 (MIN(),MAX(),,...) 是非法的

远程，由于 ONLY_FULL_GROUP_BY 开启。

是否可以使用最后一个选项进行一些改进，或者我可以关闭 ONLY_FULL_GROUP_BY？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T01:32:57.990

如果我理解你的话，你想得到一个单一的请求

*   MIN(Yacht.price) 作为 min_price
*   MAX(Yacht.price) 作为 max_price
*   MIN(Yacht.long) 作为 min_length
*   MAX(Yacht.long) 作为 max_length

正确的 ？

为此，您不需要任何“分组依据”子句。MIN 和 MAX 函数已经是聚合函数。但是没有什么能阻止您在单个请求中使用多个聚合函数。

您是否尝试过简单地这样做？

```
$stats = $this->Yacht->find(array(
    'conditions' => $conditions,
    'fields' => array(
        'MIN(Yacht.price) as min_price',
        'MAX(Yacht.price) as max_price',
        'MIN(Yacht.long) as min_length',
        'MAX(Yacht.long) as max_length'
     )
    )
); 
```

顺便说一句，根据[文档](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#find-first)，您的原始代码似乎有很多冗余。“find('first', array(...))” 本身可确保您只获得一个结果，因此，无需在请求中指定“'limit' => 1”，也无需在“order”子句中指定无论如何只能是一个领域:)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T20:56:19.560

可以在这里找到设置服务器模式的方法...如果您阅读文档的顶部，它将告诉您如何设置服务器模式默认值：

[http://dev.mysql.com/doc/refman/5.1/en/server-sql-mode.html](http://dev.mysql.com/doc/refman/5.1/en/server-sql-mode.html)

但是，我不确定是否有必要获得您的解决方案。我认为您的查询运行了很长时间，因为您需要在代码中使用不同的 group by 并且查询更少。您应该能够使用逻辑组来最大化您的主键（索引）：

```
'group' => 'Yacht.id' 
```

所以你有一个查询返回所有内容：

```
$this->Yacht->find('first', array(
'conditions' => $conditions,
'fields' => array('MAX(Yacht.price) as max_price', 'MIN(Yacht.price) as min_price', ...)
'group' => 'Yacht.id'
'order' => '...')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:41:07.593

我最终通过改变我的搜索方式解决了这个问题。我没有在可能导致连接的条件中进行查询，而是明确地使用 where 进行搜索。我有类似的事情，

```
$conditions = array('Brand.name LIKE'=> '%bla%'); 
```

我用它代替了它

```
 $condtions = array('Yacht.brand_name LIKE' => '%bla%'); 
```

我不得不稍微重构一下数据库，但速度和数据库规范化之间的权衡是我可以接受的。

# javascript - JavaScript 代码在失去焦点时停止

> ID：11394148
> 
> 赞同：1
> 
> 时间：2012-07-09T11:28:07.820
> 
> 标签：javascript, focus, delay, sleep

我们的项目使用了各种库（Kinetic Js、jquery、buzz.js 等），我们有很多动画和一些声音同时播放，我们的目的是在用户更改选项卡时停止所有 JavaScript 进程或浏览器的窗口，失去焦点。

我们知道`onBlur`and`onFocus`使我们能够检测到这种变化，并且通过一个`setTimeOut`函数我们可以阻止它。我们想知道是否有更有效的方法或更底层的解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:26:29.607

这些天，有 requestAnimationFrame() [http://dvcs.w3.org/hg/webperf/raw-file/tip/specs/RequestAnimationFrame/Overview.html](http://dvcs.w3.org/hg/webperf/raw-file/tip/specs/RequestAnimationFrame/Overview.html)

包含有关浏览器支持信息的文章，以及如何在不支持它的浏览器中进行模拟：http: [//paulirish.com/2011/requestanimationframe-for-smart-animating/](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)。

# git - 更改 git 冲突标记

> ID：11394150
> 
> 赞同：10
> 
> 时间：2012-07-09T11:28:11.720
> 
> 标签：git, merge, latex, git-merge

是否可以将冲突标记更改为用户定义的内容？

**动机：**

在我身上发生了好几次，由于仓促和不太小心地合并了几个分支，我的 LaTeX 文档中有一些遗留的合并标签。对于大多数编程项目，这些标签会导致语法错误，因此我会发现它们。然而，在 Latex 中，<<<<、==== 和 >>>> 标记只是编译成一些其他字符序列而没有任何警告。

为了解决这个问题，我想将这些冲突标记更改为无法编译的东西，或者至少让它们非常明显地发现（例如分页符、大字体警告或编译警告）。

我当然可以制作一个（bash）脚本，用我选择的东西替换所有这些标记，但我更希望它是解决这个问题的更优雅的解决方案。

PS 我找到了 merge.conflictstyle 选项，但是 diff3 选项只添加了 |||| 也可以在没有警告的情况下编译的标记。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T11:39:26.933

即使有一种方法可以使自定义冲突标记 LaTeX 成为特定的（我认为没有，但我很可能是错的），选择一个在所有情况下都有效的方法可能很困难。一个更简单的解决方案是启用 git 的 stock “pre-commit” 钩子，它在提交时识别冲突标记，如果存在则拒绝提交。要启用它：

```
cd <repo>
mv .git/hooks/pre-commit.sample .git/hooks/pre-commit 
```

git 附带的 stock hook 也会查找空格错误。要手动运行检查，请使用以下命令：

```
git diff --check 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T12:00:10.030

`conflict-marker-size`也许你可以用一个*大数字*来改变属性。所谓*大数字*，我的意思是一个会触发 Latex 警告的数字，因为该行太长了。

```
$ cat .gitattributes
*.tex conflict-marker-size=100 ;# Or whatever makes Latex unhappy 
```

# jquery - 如何将视频添加到灯箱？

> ID：11394152
> 
> 赞同：0
> 
> 时间：2012-07-09T11:28:18.880
> 
> 标签：jquery, html, css

我对这一切都是新手，我肯定会努力变得更好！我试图添加到这个灯箱中的视频是我的新广告：（http://www.gatorgraphix.com/uploads/5/1/7/6/5176322/gator_graphix_commercial.mp4）但我很难把它放进去我的灯箱并自动播放。你能帮我吗？？这是我的脚本：

```
<htmL>
    <head>
        <title>Gator Graphix™ Commercial</title>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

        <style type="text/css">

        body
        {
             font-family: Helvetica, Arial;
        }

        .backdrop
    {
            position:absolute;
            top:0px;
            left:0px;
            width:100%;
            height:100%;
            background:#000;
            opacity: .0;
            filter:alpha(opacity=0);
            z-index:50;
            display:none;
        }

        .box
        {
            position:absolute;
            top:20%;
            left:30%;
            width:640px;
            height:310px;
            background:#ffffff;
            z-index:51;
            padding:10px;
            -webkit-border-radius: 5px;
            -moz-border-radius: 5px;
            border-radius: 5px;
            -moz-box-shadow:0px 0px 5px #444444;
            -webkit-box-shadow:0px 0px 5px #444444;
            box-shadow:0px 0px 5px #444444;
            display:none;

        }

        .close
        {
            float:right;
            margin-right:6px;
            cursor:pointer;
        }

        </style>

        <script type="text/javascript">

            $(document).ready(function(){

                $('.lightbox').click(function(){
                     $('.backdrop, .box').animate({'opacity':'.50'}, 300, 'linear');
                     $('.box').animate({'opacity':'1.00'}, 300, 'linear');
                     $('.backdrop, .box').css('display', 'block');

                });

                $('.close').click(function(){
                    close_box();

                });

                $('.backdrop').click(function(){
                    close_box();

                });

            });

            function close_box()
            {
                $('.backdrop, .box').animate({'opacity':'0'}, 300, 'linear', function(){
                        $('.backdrop, .box').css('display', 'none');
                    });
            }

        </script>

    <Head>
    <body>

    <h1>Gator Graphix™ Commercial</h1>
    <a href="#" class="lightbox">Click To View Our New Commercial</a>

    <div class="backdrop"></div>
    <div class="box"><div class="close">x</div>Gator Graphix™ Commercial</div>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:38:59.873

在玩了几个灯箱脚本之后，我发现 shadowbox - ( [http://www.shadowbox-js.com/download.html](http://www.shadowbox-js.com/download.html) ) 非常完美。

在此处链接的下载页面上，您可以选择所有播放器类型，这将允许您嵌入 Flash、视频、图像等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:33:58.223

您可以使用[http://iaian7.com/webcode/mediaboxAdvanced](http://iaian7.com/webcode/mediaboxAdvanced)

# c# - 回发时添加了用户控件，但不显示

> ID：11394153
> 
> 赞同：2
> 
> 时间：2012-07-09T11:28:21.663
> 
> 标签：c#, asp.net, user-controls

我在 UpdatePanel 中有一个占位符控件，当单击“添加车辆”按钮时，我需要出现一个新的“行”控件（第一个“行”是以声明方式添加的）。然而，用户控件被添加但不显示。我怎样才能解决这个问题？

```
protected void AddVehicleButton_Click(object sender, EventArgs e)
        {

            int count = Convert.ToInt32(VehicleRegistrationCountHiddenField.Value);
            var TBId = "VehicleRegistrationEnhancedTextBox" + count;
            IList<Panel> oldPanels = (IList<Panel>)Session["VehiclePanels"] ?? new List<Panel>();

            //Seperator
            Literal hr = new Literal { Text = "<HR/>" };

            //Vehicle Registration
            UserControl uc = new UserControl(){ID="3"};
            uc.LoadControl("~/Controls/ImageUploadAndCrop/ImageUploadAndCrop.ascx");

            Label vehicleRegistration = new Label
                                            {
                                                ID = TBId + "_Label",
                                                AssociatedControlID = TBId,
                                                Text = "Vehicle Registration:"
                                            };
            EnhancedTextBox vehicleTypeTextBox = new EnhancedTextBox
                                                     {
                                                         ID = TBId,
                                                         Required = true,
                                                         RequiredErrorText = "Vehicle Registration is a required field."
                                                     };

            //Readd previously added panels
            foreach (var addedPanel in oldPanels)
            {
                AddVehiclePlaceholder.Controls.Add(addedPanel);
            }

            //Add new controls to the form
            Panel newPanel = new Panel();

            newPanel.Controls.Add(hr);
            newPanel.Controls.Add(uc);
            newPanel.Controls.Add(vehicleRegistration);
            newPanel.Controls.Add(vehicleTypeTextBox);

            AddVehiclePlaceholder.Controls.Add(newPanel);

            //Increment the ID count
            count++;
            VehicleRegistrationCountHiddenField.Value = count.ToString();

            //Save the panel to the Session.
            oldPanels.Add(newPanel);
            Session["VehiclePanels"] = oldPanels;          

        } 
```

html如下：

```
<div id="Step2" style="" data-step="2">
<h2> Step 2 (optional): Capture the offender(s) vehicle Information. </h2>
<hr>
<div id="VehicleTypeFields">
<div>
<label for="">Vehicle Registration</label>
<div id="Body_Body_UpdatePanel1">
<div>
<div>
<script type="text/javascript" src="/Controls/ImageUploadAndCrop/Javascript/jquery.Jcrop.min.js">
<link type="text/css" rel="stylesheet" href="/Controls/ImageUploadAndCrop/CSS/jquery.Jcrop.css">
<script type="text/javascript">
<div>
<div id="Body_Body_VehicleRegistrationImageUploadAndCrop_UploadPanel">
</div>
<input id="Body_Body_VehicleRegistrationEnhancedTextBox" type="text" placeholder="CA123-456" name="ctl00$ctl00$Body$Body$VehicleRegistrationEnhancedTextBox">
</div>
</div>
</div>
</div>
<div id="Body_Body_AddVehiclesUpdatePanel">
<input id="Body_Body_VehicleRegistrationCountHiddenField" type="hidden" value="2" name="ctl00$ctl00$Body$Body$VehicleRegistrationCountHiddenField">
<div>
<hr>
<label id="Body_Body_VehicleRegistrationEnhancedTextBox1_Label" for="Body_Body_VehicleRegistrationEnhancedTextBox1">Vehicle Registration:</label>
<input id="Body_Body_VehicleRegistrationEnhancedTextBox1" type="text" name="ctl00$ctl00$Body$Body$VehicleRegistrationEnhancedTextBox1">
<span id="Body_Body_VehicleRegistrationEnhancedTextBox1_RequiredFieldValidator" style="display:none;">Vehicle Registration is a required field.</span>
</div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T15:20:05.690

问题是您在 UserControl 的新实例上使用 LoadControl 而不是页面的实现。IE而不是这个：

```
UserControl uc = new UserControl(){ID="3"}; 
uc.LoadControl("~/Controls/ImageUploadAndCrop/ImageUploadAndCrop.ascx"); 
```

改为这样做：

```
Control uc = LoadControl("~/Controls/ImageUploadAndCrop/ImageUploadAndCrop.ascx"); 
uc.ID = 3; 
```

我认为这将解决您的直接问题，没有任何显示，但还有其他问题。虽然可以将整个控件存储在会话状态中，但我自己的测试表明这样做存在异常。相反，我会确保你给你的用户控件的每个实例一个唯一的 ID（不是每次都“3”），并将这些 ID 存储在某个地方。然后循环遍历这些 ID，为每个 ID 调用 LoadControl，在循环时设置控件 ID（这是为了将过去的视图状态重新应用到用户控件所必需的。

我还将将该循环移动到 Page_Init 或 Page_Load 以便您动态创建的用户控件可以正确地参与页面的生命周期。在该点击事件中创建它们对于他们捕捉自己的事件来说为时已晚，并且在该点击事件之外的回发的情况下根本不会创建它们。

# php - PHP - 在客户端断开连接时杀死 exec

> ID：11394159
> 
> 赞同：4
> 
> 时间：2012-07-09T11:28:57.443
> 
> 标签：php, exec, kill, disconnect

我的 C++ 应用程序有非常原始的 Web 前端。客户端（网络浏览器）进入 php 站点并用参数填写表单。比（在提交后）php 调用*exec*并且应用程序完成它的工作。应用程序可以工作超过一分钟，并且需要大量的 RAM。

是否有可能检测到与客户端断开连接（例如关闭 Web 浏览器中的选项卡）。我想这样做，因为断开连接后客户端将无法看到计算结果，所以我可以杀死应用程序并释放服务器上的一些 RAM。

感谢您的任何帮助或建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:52:57.173

只要 C++ 程序在运行时生成输出，而不是在终止之前生成所有输出，请`passthru()`使用`exec()`.

这会导致 PHP 在生成内容时将输出刷新到客户端，这允许 PHP 检测客户端何时断开连接。PHP 将在客户端断开连接时终止并立即终止子进程（只要`ignore_user_abort()`未设置）。

例子：

```
<?php

  function exec_unix_bg ($cmd) {
    // Executes $cmd in the background and returns the PID as an integer
    return (int) exec("$cmd > /dev/null 2>&1 & echo $!");
  }
  function pid_exists ($pid) {
    // Checks whether a process with ID $pid is running
    // There is probably a better way to do this
    return (bool) trim(exec("ps | grep \"^$pid \""));
  }

  $cmd = "/path/to/your/cpp arg_1 arg_2 arg_n";

  // Start the C++ program
  $pid = exec_unix_bg($cmd);

  // Ignore user aborts to allow us to dispatch a signal to the child
  ignore_user_abort(1);

  // Loop until the program completes
  while (pid_exists($pid)) {

    // Push some harmless data to the client
    echo " ";
    flush();

    // Check whether the client has disconnected
    if (connection_aborted()) {
      posix_kill($pid, SIGTERM); // Or SIGKILL, or whatever
      exit;
    }

    // Could be done better? Only here to prevent runaway CPU
    sleep(1);

  }

  // The process has finished. Do your thang here. 
```

要收集程序的输出，请将输出重定向到文件而不是`/dev/null`. 我怀疑您将需要为此`pcntl`安装，因为 PHP 手册表明常量是由扩展定义的 - 尽管我从来没有安装过一个没有另一个，所以我不确定任何一种方式。`posix``SIGxxx``pcntl`

# android - 在 Android 的 PhoneGap 中使用 LocalStorage 的问题

> ID：11394160
> 
> 赞同：0
> 
> 时间：2012-07-09T11:29:00.180
> 
> 标签：android, cordova, local-storage, phonegap-plugins, html5-appcache

解决方法： 应用程序错误 - 发生网络错误。(file:///android_asset/www/messagedetails.html?Id=29) 在 Android 4.0 中，我使用的是 LocalStorage。这种方法给了我解决问题的方法。但是当应用程序长时间没有运行或保持暂停时，我又面临这个问题。我无法从一页导航到另一页。:(

我添加了清除App缓存的代码，这是正确的方法吗？？？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:00:17.057

我相信您遇到了“Unknown Chromium Error -6”问题。文件 URL 不能包含参数是 Android 4.0 版本中的一个已知错误。（在此处进一步查看：[Android 4.0 问题](http://code.google.com/p/android/issues/detail?id=17535)）。有许多可能的解决方案；

1.  重新设计以使用 LocalStorage 来传递参数。
2.  将 PhoneGap 升级到 1.7+ (Cordova)，似乎可以解决问题。我没试过。

希望能帮助到你。

# c++ - 加载/卸载时由共享库执行的代码

> ID：11394163
> 
> 赞同：3
> 
> 时间：2012-07-09T11:29:07.283
> 
> 标签：c++, dll, shared-libraries

是否可以在加载（或卸载）库时立即执行的共享库（Windows 上的 .dll 和 linux 上的 .so）中创建一个函数？

就像 main() 函数是可执行文件的入口点一样，我可以定义一个函数在加载或卸载 DLL 时执行吗？

例如：

```
void _atstart()
{
    // Initialize some stuff needed by the library
}

void _atexit()
{
    // Release some allocated resources
} 
```

我想我在某个地方看到过这样的例子，但我再也找不到了，在互联网上也找不到任何关于这个的东西。

如果它有任何用处，我正在用 MinGW 编译代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T11:36:53.210

在 C++ 中，您至少可以创建某个类的全局实例

```
class ResourceHolder {
public:
    ResourceHolder() {
        // at start
    }

    ~ResourceHolder() {
        // at exit
    }
};

ResourceHolder theHolder; 
```

但是，如果您在库中使用另一个全局变量，则需要一些意识。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T11:33:21.720

对于 Windows，您可以使用`DllMain`：

```
BOOL WINAPI DllMain(
  __in  HINSTANCE hinstDLL,
  __in  DWORD fdwReason,
  __in  LPVOID lpvReserved
); 
```

第二个参数`fdwReason`指定是加载还是卸载库。完整参考： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms682583 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682583(v=vs.85).aspx)

```
BOOL WINAPI DllMain(HINSTANCE hinstDLL, DWORD fdwReason, LPVOID lpReserved)
{
    switch (fdwReason)
    {
    case DLL_PROCESS_ATTACH:
        // code for library load
        break;
    case DLL_PROCESS_DETACH:
        // code for library unload
        break;
    }
    return (TRUE);
} 
```

对于 Linux，您可能可以使用：

```
__attribute__ ((constructor))
__attribute__ ((destructor)) 
```

但这只是在谷歌搜索后出现的，所以你必须自己调查 - [http://tdistler.com/2007/10/05/implementing-dllmain-in-a-linux-shared-library](http://tdistler.com/2007/10/05/implementing-dllmain-in-a-linux-shared-library)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-15T16:30:38.683

如前所述，在 Window 下，您可以从`DllMain`. 但是要小心，因为有很多限制（`CoInitialize`例如，禁止使用 COM 函数）。您不能依赖的一件事是，无法保证加载/卸载 dll 的顺序，因此您不能调用`DllMain`驻留在另一个 dll 中的函数：它今天可以工作，但明天不行： )

MSDN 上的更多在线信息：[ [http://msdn.microsoft.com/en-us/library/windows/desktop/ms682583(v=vs.85).aspx]](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682583(v=vs.85).aspx])

帕特里斯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T11:33:30.367

在 Windows 下，您可以编写自己的 DllMain() 版本。

# javascript - 使用 document.write() 将结果写入单独的页面

> ID：11394166
> 
> 赞同：0
> 
> 时间：2012-07-09T11:29:14.950
> 
> 标签：javascript, html

我正在使用 document.write() 将 html 代码写入 javascript。

但结果出现在同一页面中，我想在单独的页面中显示结果。

```
document.write('<table width="1000" border="1">');

                        document.write('<tr width="1000">'); 
                        document.write('<td width="100" bgcolor="#D8D8D8">Country</td>');
                        document.write('<td width="100" bgcolor="#D8D8D8">MCC</td>');
                        document.write('<td width="100" bgcolor="#D8D8D8">MNC</td>');
                        document.write('<td width="100" bgcolor="#D8D8D8">Network</td>');
                        document.write('<td width="100" bgcolor="#D8D8D8">Old Price</td>');
                        document.write('<td width="100" bgcolor="#D8D8D8">Current Price</td>');
                        document.write('<td width="100" bgcolor="#D8D8D8">Effective</td>');
                        document.write('<td width="100" bgcolor="#D8D8D8">Status</td>');
                        document.write('</tr>'); 
                        document.write('</table>'); 
```

所以这个表正在网页中显示，我希望这个结果显示在另一个网页中。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T11:33:33.203

先使用`window.open()`，然后写入此窗口：

```
var w = window.open('','','width=200,height=100');
w.document.write("your html"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T11:33:45.660

试试这个

```
var doc =window.open('','mydoc',
  'width=350,height=250'
   +',menubar=0'
   +',toolbar=1'
   +',status=0'
   +',scrollbars=1'
   +',resizable=1');
 doc.document.writeln(
  '<html><head><title>doc</title></head>'
   +'<body >'
   +'something'
   +'</body></html>'
 ); 
```

# jquery - jQuery：将 .delay() 与 .stop() 结合使用会使 .stop() 无用。为什么？

> ID：11394168
> 
> 赞同：2
> 
> 时间：2012-07-09T11:29:26.073
> 
> 标签：jquery, delay, fade

我正在做这样的事情[http://jsfiddle.net/8ErSL/2/](http://jsfiddle.net/8ErSL/2/)

当您将鼠标悬停在任何文本框 (div) 中时，其中会出现一个小图标。

我想阻止图标的淡入淡出效果重复多次，因为我不小心悬停了 div，你知道这有点烦人。我知道有一种方法可以通过添加来防止这种情况`.stop()`，它就像一个魅力。

但是当我试图通过添加来延迟图标的出现时，`.delay(500)`它`.stop()`变得无用了，并且随着您在 div 中不断移动光标，淡化效果不断重复。

我怎样才能解决这个问题？我需要延迟和防止重复的淡入淡出效果。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:38:24.700

请阅读：http: [//forum.jquery.com/topic/stop-does-not-clear-delay](http://forum.jquery.com/topic/stop-does-not-clear-delay)

[http://bugs.jquery.com/ticket/6255](http://bugs.jquery.com/ticket/6255)

这可能会有所帮助：[延迟（）或停止（）超时？](https://stackoverflow.com/questions/3329197/jquery-delay-or-timeout-with-stop)

> 据我了解， stop() 无法清除延迟。这是来自关于延迟的文档；
> 
> .delay() 方法最适合在排队的 jQuery 效果之间进行延迟。因为它是有限的——例如，它不提供取消延迟的方法——.delay() 不能替代 JavaScript 的原生 setTimeout 函数，这可能更适合某些用例。

另外，如果我完全误解了您的问题，请让我知道`:)`将删除此帖子。希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:40:15.720

我想你可以试试这样的。

```
var $prev;   
$(".codebox").hover( function() {
   var $icon = $(".icon", this);
   if ($prev) {
      $prev.stop(true)
           .delay(500).fadeOut('fast'); // so animation will be shown here as well
   }        
   $icon.delay(500).fadeIn("fast");
   $prev = $icon;
}, function() {
   $(".icon", this).delay(500).fadeOut("fast");
} ); 
```

[演示](http://jsfiddle.net/8ErSL/6/)。

关键是当鼠标进入另一个方块时，我们强制隐藏方块的图标。我们不能在“离开”时这样做（因为当鼠标离开一个区域而不去另一个区域时它会弄乱我们的动画），但是如果我们存储“上一个”，我们可以在下一个“进入”事件中做到这一点某种缓存中的图标。

**更新**还有另一种更[简单的方法](http://jsfiddle.net/8ErSL/8/)：

```
$(document).ready( function () {
    $(".codebox").hover( function() {
       $(".icon", this).delay(500).fadeIn("fast");
    }, function() {
       $(".icon", this).stop(true).delay(500).fadeOut("fast");
    } );
}); 
```

...如果您不介意该块在鼠标刚刚经过时根本不会突出显示。)

# iphone - 设置多个对象

> ID：11394170
> 
> 赞同：1
> 
> 时间：2012-07-09T11:29:38.880
> 
> 标签：iphone, objective-c

我正在努力寻找下面显示的代码的简写版本。基本上我将事件保存到核心数据中。每个事件最多有 15 个联系人。newEvent 来自 Event 类。

下面的代码效果很好，但我不想让每个联系人重复 15 次。有没有更简单的方法？

```
if ([[selectedContacts objectAtIndex:14] objectAtIndex:0] != (id)[NSNull null]) {
    newEvent.contact15 = [[selectedContacts objectAtIndex:14] objectAtIndex:0];
}
else {
    newEvent.contact15 = @"";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T11:45:12.580

您可以使用此代码

```
-(void) Solve{
    for (int i = 0 ; i < 15 ; i++){
        Contact *con = [newEvent.contacts objectAtIndex:14 - i];
        if ([[selectedContacts objectAtIndex:14 - i] objectAtIndex:0] != (id)[NSNull null]) {
            con = [[selectedContacts objectAtIndex:14 - i] objectAtIndex:0];
        }
        else {
            con = @"";
        }
    }
} 
```

只是你应该`contact`在你的`newEvent`类中定义为`Array`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:38:15.967

您可以使用`NSSelectorFromString`to 转换`[NSString stringWithFormat:@"setContact%d", 15]`为`SEL`value，然后使用`performSelector`. 但ARC不会喜欢这样。

您可以`#define`使用此语句创建一个 C 宏，然后调用它 15 次并立即调用`#undef`它。它会短得多，虽然不漂亮。

但最好的办法是将类重新设计为具有单个`contacts`数组。

# java - 使用变量调用哈希表

> ID：11394181
> 
> 赞同：1
> 
> 时间：2012-07-09T11:31:08.573
> 
> 标签：java, hashtable

我正在为一个程序使用多个哈希表，即 table1 table2 table3 等。每个表都有 3 个键值对。键相同但值不同。现在在我的程序的 UI 中，我有一个组合框来从用户那里选择表名。选择后，我将其存储在一个变量中，并希望使用该变量打开相应的表。

感谢 Eric Coolman 的[这篇文章](https://groups.google.com/forum/embed/?place=forum/codenameone-discussions&showsearch=true&showpopout=true&hl=en&parenturl=http://www.codenameone.com/discussion-forum.html#!searchin/codenameone-discussions/HashTable/codenameone-discussions/c-utanyjEAs/cKMotTk6MKkJ)，我在这里编辑了我的查询。

```
Hashtable table1 = new Hashtable();

table1 .put("COL1", Double.toString(dvalue1));
table1 .put("COL2", value2);
table1 .put("COL3", value3);

Hashtable table2 = new Hashtable();

table2 .put("COL1", Double.toString(dvalue4));
table2 .put("COL2", value5);
table2 .put("COL3", value6);

// reading that value back:

double dvalue1 = Double.parseDouble((String)table1.get("COL1"));
double value6= Double.parseDouble((String)table2.get("COL3"));` 
```

在这里我如何使用变量而不是 table1 和 table2？语法是什么。我是java新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T11:34:51.160

首先，您的结构看起来像是在[拒绝对象](https://stackoverflow.com/questions/3725703/how-to-store-more-than-one-string-in-a-map)：您所拥有的`Hashtable`对象可能应该是具有 3 个字段（ 和 ; 或更易读的版本）的自定义类型`col1`的`col2`对象`col3`。

下一步：您可以简单地使用第三个变量来打开您从哪个对象读取：

```
Hashtable readFromMe;
if (someCondition)
  readFromMe=table1;
else
  readFromMe=table2;

Object o = readFromMe.get("COL3"); 
```

此代码将从`table1`if `someCondition`is`true`和`table2`else 中读取。

此外，上述代码前 5 行的较短版本将是`Hashtable readFromMe = someCondition ? table1 : table2;`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T11:39:29.927

将您的两个表放在另一个哈希表中，并使用密钥访问您想要的表。

```
Hashtable<String, Hashtable> tables = new Hashtable<String, Hashtable>();
Hashtable<String, String> table1 = new Hashtable<String, String>();

table1 .put("COL1", Double.toString(dvalue1));
table1 .put("COL2", value2);
table1 .put("COL3", value3);

tables.put("table1", table1);

Hashtable<String, String> table2 = new<String, String> Hashtable();

table2 .put("COL1", Double.toString(dvalue4));
table2 .put("COL2", value5);
table2 .put("COL3", value6);

tables.put("table2", table2);

// reading that value back:

double dvalue1 = Double.parseDouble(tables.get("table1").get("COL1"));
double value6= Double.parseDouble(tables.get("table2").get("COL3"));` 
```

# iphone - 如何使用OpenGL制作只有右侧和顶部的立方体

> ID：11394188
> 
> 赞同：0
> 
> 时间：2012-07-09T11:31:47.290
> 
> 标签：iphone, opengl-es, 3d, core-graphics

我想展示简单`Cube with Right & Top`的部分，下面是我正在寻找的图像。

![在此处输入图像描述](../Images/a871b2b05cd3a60d34e54d4ee47e6e30.png)

我参考 [了这个链接](http://www.endodigital.com/opengl-es-2-0-on-the-iphone/part-fourteen-creating-the-cube/)并尝试按照我的要求进行编辑，但没有成功。

# xml - 使用 xslt 从属性中获取值

> ID：11394189
> 
> 赞同：0
> 
> 时间：2012-07-09T11:31:47.430
> 
> 标签：xml, xslt, xpath

输入.xml：

```
<comp>
  <link id="#c1-tbl-0001"/>
</comp> 
```

输出.xml：

```
<comp>
  <link newid="#c1-tbl-0001"/><tableno>1.1</tableno>
</comp> 
```

我需要属性值中 tableno 的值，例如 tb1 中的 1 和 0001 中的另一个 1。所以输出应该是 1.1

我使用了以下 xsl，但它没有给出确切的结果。

```
 <xsl:element name ="tableno">
  <xsl:value-of select ="substring(@id,7)"/>.<xsl:value-of select="substring(@id,12)"/>
</xsl:element> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:37:36.710

首先，您要读取的属性是 named `id`，而不是`href`。（编辑：你似乎已经纠正了这一点。）

您必须给第一个`substring`电话一个长度，以便它只捕获一个数字：

```
<xsl:value-of select="substring(@id, 7, 1)"/>.<xsl:value-of select="substring(@id, 12)"/> 
```

如果第二个数字可能使用多个数字，但您想去除零，您可以

```
<xsl:value-of select="substring(@id, 7, 1)"/>.<xsl:value-of select="number(substring(@id, 9))"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:11:43.693

您的输入有错误。看起来你在“tbl”中有一个字母 l，你的意思是放一个数字 1，如“tb1”。

无论如何，这就是你如何做到的......

如果您的输入文档是...

```
<comp>
  <link id="#c1-tbl-0001"/>
</comp> 
```

...然后应用样式表...

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>

<xsl:template match="/comp">
<comp>
  <link newid="#c1-tbl-0001"/>
  <tableno><xsl:value-of select="concat( substring(link/@id,7,1), '.')" />
           <xsl:number value="substring(link/@id,9)" /></tableno>
</comp>
</xsl:template>

</xsl:stylesheet> 
```

...将产生...

```
<?xml version="1.0" encoding="utf-8"?>
<comp>
  <link newid="#c1-tbl-0001" />
  <tableno>1.1</tableno>
</comp> 
```

替代模板内容可能是...

```
<comp>
  <link newid="#c1-tbl-0001"/>
  <tableno><xsl:value-of select="
   concat( substring(link/@id,7,1), '.', number( substring(link/@id,9))" />
  </tableno>
</comp> 
```

使用更好，因为您可以很好地控制格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T13:36:41.053

如果我们只知道有两个数字由包含破折号的字符串分隔，则更通用的解决方案：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="link">
     <xsl:value-of select=
     "translate(concat(substring-before(@id, '-'),
                     '.',
                        substring-after(@id, '-')
                     ),
                            translate(concat(substring-before(@id, '-'),
                                             '.',
                                             substring-after(@id, '-')
                                             ),
                                       '.123456789',
                                       ''
                                       ),
                      ''
                      )
     "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<comp>
    <link id="#c1-tbl-0001"/>
</comp> 
```

**产生了想要的正确结果：**

```
1.1 
```

# r - 如何在 [R] 中进行通常需要双 for 循环的简单操作？

> ID：11394191
> 
> 赞同：1
> 
> 时间：2012-07-09T11:31:48.127
> 
> 标签：r

我对 R 很陌生，而且我来自 C++ 背景。我有一个包含多行和多列的数据框。我的问题是如何以不同的方式做到这一点，因为它需要永远运行。我有超过 6 万行和大约 15 列。有一个更好的方法吗？非常感谢您的帮助！

```
counter <-0

 for(j in 7:length(SeaStateData[3,]))
 {
  for( i in 1:length(SeaStateData[,3]))
      {

        if(!is.na(SeaStateData[i,j]) & !is.na(SeaStateData[i+1,j]))
        if(SeaStateData[i,j] == SeaStateData[i+1,j])
         {
          counter <- counter + 1
         }

       }
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T11:37:59.497

我会试试这个：

```
nr <- nrow(SeaStateData)
nc <- ncol(SeaStateData)
counter <- sum(SeaStateData[1:(nr - 1), 7:nc] ==
               SeaStateData[2:nr, 7:nc],
               na.rm = TRUE) 
```

子集代表两个子矩阵，相对偏移为一行。运算符将`==`产生一个逻辑向量（在这种情况下是一个矩阵，它只是一个添加了维度信息的向量），其中包含`TRUE`两个项目是否匹配、`FALSE`它们是否不同以及`NA`其中一个是否为`NA`。`sum`over a 逻辑向量计算所有值`TRUE`。该`na.rm`属性告诉它删除`NA`值；否则`sum`也会如此`NA`。`sum(…, na.rm = TRUE)`大致相同`sum(na.omit(…))`。

# c# - C# Property Grid 属性选择多次显示表单

> ID：11394196
> 
> 赞同：2
> 
> 时间：2012-07-09T11:32:38.080
> 
> 标签：c#, winforms, propertygrid

我创建了一个具有自定义数组值的属性网格。当用户选择其中一个下拉菜单时，我希望它显示一个表单。我的问题不是它不起作用，不是它过度活跃并且尽管只声明了一次，但它显示了大约 6 次表单。如果我选择 ShowDialog，它会显示表单两次，并在尝试关闭第二个对话框时创建另外两个表单实例。下面是我正在使用的代码。我不知道出了什么问题。

```
//Property Grid Type
 internal class TransferConnectionPropertyConverter : StringConverter
    {
        public override bool GetStandardValuesSupported(ITypeDescriptorContext context)
        {
            return true;
        }

        public override bool GetStandardValuesExclusive(ITypeDescriptorContext context)
        {
            return true;
        }

        public override TypeConverter.StandardValuesCollection GetStandardValues(ITypeDescriptorContext context)
        {
            return new StandardValuesCollection(new string[] { "", NEW_CONN });
        }            
    }

//Property Grid Node
[Category("Connection"),
Description("Specifies the type of connection for this task.")]
[TypeConverter(typeof(TransferConnectionPropertyConverter))]
public string TransferProtocol
{
    get
    {
         if (stConnectionType == NEW_CONN)
         {
              ConnectionDetailsForm connDetails = new ConnectionDetailsForm();
              connDetails.Show();                        
         }
         return stConnectionType;
    }
    set
    {
         stConnectionType = value;
    }                                       
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:10:13.960

为此，您需要一个编辑器，并且您绝对不想在`get property`属性期间显示表单，因为在 PropertyGrid 的生命周期中可能会多次调用它。

简单的类（从[这个例子](https://stackoverflow.com/a/359736/719186)中找到）：

```
public class StringEditor : UITypeEditor {
  public override UITypeEditorEditStyle GetEditStyle(ITypeDescriptorContext context) {
    return UITypeEditorEditStyle.Modal;
  }

  public override object EditValue(ITypeDescriptorContext context, IServiceProvider provider, object value) {
    IWindowsFormsEditorService svc = (IWindowsFormsEditorService)
      provider.GetService(typeof(IWindowsFormsEditorService));
    if (svc != null) {
      svc.ShowDialog(new ConnectionDetailsForm());
      // update etc
    }
    return value;
  }
} 
```

然后你为这个编辑器装饰你的属性（注意，我删除了转换器，因为你的属性只是一个字符串，没有什么可以转换的）：

```
[Category("Connection")]
[Description("Specifies the type of connection for this task.")]
[Editor(typeof(StringEditor), typeof(UITypeEditor))]
public string TransferProtocol {
  get {
    return stConnectionType;
  }
  set {
    stConnectionType = value;
  }
} 
```

# c# - 如何设置搜索 ASP.NET MVC3 时显示的页数

> ID：11394202
> 
> 赞同：0
> 
> 时间：2012-07-09T11:32:54.387
> 
> 标签：c#, asp.net-mvc-3, pagination

如何缩短列表中显示的页数？

目前搜索时，结果页面会显示列表中的每个数字，例如首页1、2、3、4、5、6、7、8、9、10等到最后一页。一些搜索结果最多可以有 40 页，所以看起来有点乱。

如何更改代码以显示这样的页面，例如第一页 1、2、3、...9、10。最后一页。

选择第三页时，列表将显示第3、4、5，... 9、10。最后一页。

我正在使用 .NET MVC3。这是用于生成视图的代码

```
 <%@ Control Language="C#"Inherits="System.Web.Mvc.ViewUserControl<MyApp.Web.Extensions.PaginatedList<MyApp.Data.Product>>" %>
<div style="text-align: center; margin-bottom: 5px;">
<ul id="paginator">
    <% if (Model.HasPreviousPage)
       { %>
    <li>
        <%= Html.RouteLink("First Page", new { namespaces = "Administrator", controller = "Products", action = "ViewAll", page = 0 })%></li>
    <% } %>
    <% else %>
    <% { %>
    <li>First Page</li>
    <% } %>
    <%-- Show all the pages here in a list --%>
    <% for (int i = 0; i < Model.TotalPages; i++) %>
    <% { %>
    <% if (i == Model.PageIndex) %>
    <% { %>
    <li>
        <%: i+1 %></li>
    <% } %>
    <% else %>
    <% { %>
    <li>
        <%= Html.RouteLink((i + 1).ToString(), new { namespaces = "Administrator", controller = "Products", action = "ViewAll", page = i })%>
    </li>
    <% } %>
    <% } %>
    <% if (Model.HasNextPage)
       { %>
    <li>
        <%= Html.RouteLink("Last Page", new { namespaces = "Administrator", controller = "Products", action = "ViewAll", page = Model.TotalPages - 1 })%></li>
    <% } %>
    <% else %>
    <% { %>
    <li>Last Page</li>
    <% } %>
</ul>
</div> 
```

这个类的代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
namespace MyApp.Web.Extensions
{
public class PaginatedList<T> : List<T> where T : MyApp.Data.Product
{
    public int PageIndex { get; private set; }
    public int PageSize { get; private set; }
    public int TotalCount { get; private set; }
    public int TotalPages { get; private set; }

    public PaginatedList(IQueryable<T> source, int pageIndex, int pageSize)
    {
        PageIndex = pageIndex;
        PageSize = pageSize;
        TotalCount = source.Count();
        TotalPages = (int)Math.Ceiling(TotalCount / (double)PageSize);
        this.AddRange(source.OrderBy(t => t.CreatedDate).OrderByDescending(t => t.CreatedDate).Skip(PageIndex * PageSize).Take(PageSize));
    }

    public bool HasPreviousPage
    {
        get
        {
            return (PageIndex > 0);
        }
    }

    public bool HasNextPage
    {
        get
        {
            return (PageIndex + 1 < TotalPages);
        }
    }
  }
} 
```

如果需要更多信息，请发表评论。还要提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T11:47:34.807

这就是你要找的...

[使用 ASP.NET MVC 进行分页](http://blogs.taiga.nl/martijn/2008/08/27/paging-with-aspnet-mvc/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T11:42:58.697

使用自定义 jquery 分页。下面是一些很好的例子......尝试任何一个。

[http://www.gowestwebdesign.com/demos/jquery-cycle-gallery-next-back-paging/#thedemo](http://www.gowestwebdesign.com/demos/jquery-cycle-gallery-next-back-paging/#thedemo)

[http://d-scribe.de/webtools/jquery-pagination/demo/demo_options.htm](http://d-scribe.de/webtools/jquery-pagination/demo/demo_options.htm)

[http://www.freelancer.com/work/jquery-pagination-demo/](http://www.freelancer.com/work/jquery-pagination-demo/)

[http://tympanus.net/jPaginate/](http://tympanus.net/jPaginate/)

# c# - 静态变量的生命周期

> ID：11394203
> 
> 赞同：0
> 
> 时间：2012-07-09T11:32:54.797
> 
> 标签：c#, asp.net, .net, wpf, static-members

有没有办法设置静态变量的生命周期 - 即：它在被重置之前保持活动状态多长时间？我希望可能有一个可以应用的属性。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T12:05:00.757

静态变量中值的生命周期与包含 AppDomain 的值相同。IE。如果您获得一个新的 AppDomain（因为您的 IIS 应用程序重新启动），您将获得一个静态变量的新副本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T11:44:26.623

静态成员与类型本身相关联，而不是与该类型的实例相关联。因此，它们的生命周期仅限于它们创建的时间和顺序，并且它们不会被类型的实例“重置”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T12:54:36.317

在我的例子中，当我使用 ASP.NET 时，有问题的项目应该在一个请求的生命周期内保持“活动”状态，所以在考虑它之后 HttpContext["Items"] 集合是最好的。例如，如果：

```
 private static SomeObject _books;
    protected static SomeObject Books
    {
        get
        {
            if (_books == null) {
                _books = new SomeObject();
            }
            return _books ;
        }
    }

    protected static SomeObject AVariable
    {
        get
        {
            SomeObject books = HttpContext.Current.Items["books"] as SomeObject; 
            if (books == null) {
                books = new SomeObject();
                HttpContext.Current.Items["books"] = books;
            }
            return books;
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T11:35:22.393

一个静态变量在应用程序的生命周期内保存并在所有线程之间共享。它仅在应用程序重新启动时重置（例如 web.config 更改）。

如果这是用于缓存之类的东西，我建议设置一个计时器以定期更新该值。

# objective-c - NSRegularExpression 和 NSString 比较

> ID：11394204
> 
> 赞同：0
> 
> 时间：2012-07-09T11:33:03.377
> 
> 标签：objective-c, ios, nsstring, nsregularexpression

我想用`NSRegularExpression`正确的顺序完成一些操作。我有一个`NSString`：

```
my_simple_string 
```

我想调用一个方法（我的方法，在这里无关紧要），就像 CSS 样式一样，所以在我的`NSDictionary`我有`NSStrings`：

```
*
my*
my_simple*
my_simple_string 
```

我想要做的是我的方法需要上述所有这些值。我目前使用

```
IsEqualToString 
```

并比较每个子字符串。但这不是一个完美的解决方案，当我在网络上进行研究时，我发现一篇建议使用`NSRegularExpression`它的帖子，但我不知道它有什么帮助。

**更重要的一件事——“_”不是分隔符，我没有分隔符。**

**编辑：**

```
NSString *str = @"my_simple_string";
NSArray *arr = [NSArray arrayWithObjects:@"*",@"my*",@"my_simple*",@"my_simple_string*", nil];

for(int i = 0 ; i < [str length] ; i++) {
    NSString *cut = [str substringToIndex:i];
    cut = [cut stringByAppendingString:@"*"];
    for(int j = 0; j < [arr count] ; j++)
        if([cut isEqualToString:[arr objectAtIndex:j]])
            NSLog(@"find it!");
}

NSLog(@"-----"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:09:38.583

这看起来像一个典型的正则表达式应用程序。`NSRegularExpression`您可以在[Apple 文档](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)中找到有关如何使用的示例。

如果这是您第一次处理正则表达式，您最好查看互联网上的一些教程（有很多）。

# python - Python QTreeWidget设置根元素

> ID：11394216
> 
> 赞同：1
> 
> 时间：2012-07-09T11:33:43.690
> 
> 标签：python, pyqt4, qtreewidget, qtreewidgetitem

我正在研究 python 插件。我使用 PYQT4 设计器来制作表单。我将查询结果列出到**QTreeWidget**中，如下所示：

```
 items = []
     for row in c.fetchall():

          item = QTreeWidgetItem()
          item.setText(0,unicode (row[0]))
          items.append(item)

 self.treeWidget.insertTopLevelItems(0, items) 
```

项目完美地列在 QTreeWidget 中。

![在此处输入图像描述](../Images/ced60288fa67f862af3bc236bf7984ce.png)

但我想将一些项目作为父母，例如：EX：

ACO_010

```
-2
-1
-7 and so on... 
```

我如何将任何项目设置为其他项目的**父**（根）。？？？我试过

```
self.treeWidget.__init__ (self,valestimate,items, int type = self.treeWidget.Type) 
```

但没有成功。如何在**QTreeWidget**中设置父级？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T16:35:51.097

使用 parentItem.addChild(childItem)

（参见[QTreeWidgetItem 文档](http://qt-project.org/doc/qt-4.8/qtreewidgetitem.html#addChild "QTreeWidgetItem 文档")）

# jquery - 设置后如何使用 jQuery 更改 :-moz-placeholder 颜色？

> ID：11394217
> 
> 赞同：4
> 
> 时间：2012-07-09T11:33:44.630
> 
> 标签：jquery, css, html, placeholder

我遇到了一个问题，如果输入字段的背景颜色发生变化，占位符颜色会混合太多。

我已经解决了可读文本颜色问题，因此它可以正确返回正确的浅色或深色。

我一生都无法弄清楚如何将 CSS 属性设置为特定输入框的计算颜色。请给一些指导？

```
input:-moz-placeholder
{
    color: #BBBBBB;
}
input::-webkit-input-placeholder
{
    color: #BBBBBB;
} 
```

返回的颜色是`#222222`，但`$('#input').css()`调用不起作用，因为它直接针对元素 CSS 而不是元素。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T13:24:04.653

在此解决方案中，我首先在页面加载时将样式块动态附加到 <head> ：

```
// add style block to the <head> with default placeholder css on page load
var defaultColor = 'BBBBBB';
var styleContent = 'input:-moz-placeholder {color: #' + defaultColor + ';} input::-webkit-input-placeholder {color: #' + defaultColor + ';}';
var styleBlock = '<style id="placeholder-style">' + styleContent + '</style>';
$('head').append(styleBlock); 
```

然后，要更改占位符文本颜色，我只需更新样式块的内容：

```
var randomColor = Math.floor(Math.random()*16777215).toString(16);
styleContent = 'input:-moz-placeholder {color: #' + randomColor + ';} input::-webkit-input-placeholder {color: #' + randomColor + ';}'
$('#placeholder-style').text(styleContent); 
```

查看 jsFiddle：

[使用 jQuery 更改占位符文本颜色](http://jsfiddle.net/uEB2u/)

# python - django admin 中不可修改的属性

> ID：11394219
> 
> 赞同：1
> 
> 时间：2012-07-09T11:33:47.313
> 
> 标签：python, django, django-admin, readonly

我有简单的模型类：

```
class Book(models.Model):
    title = models.CharField(max_length=100)
    authors = models.ManyToManyField(Author) 
```

我想在 django admin中设置`title` **不可修改的属性。**我应该怎么做才能设置这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T11:43:04.393

将字段名称添加到`readonly_fields`该模型的`ModelAdmin`类。根据[文档](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.readonly_fields)：

> 默认情况下，管理员将所有字段显示为可编辑。此选项中的任何字段（应该是列表或元组）将按原样显示其数据且不可编辑。

在您的情况下，这看起来像：

```
readonly_fields = ("title",) 
```

# android - 列表视图中的空视图

> ID：11394222
> 
> 赞同：0
> 
> 时间：2012-07-09T11:33:55.067
> 
> 标签：android, android-listview, android-viewpager

我在使用 ViewPager 时遇到了一些问题，我使用以下 instantiateItem 方法创建了一个 PagerAdapter

```
 @Override
    public Object instantiateItem(View collection, int position) {
        View v = in.inflate(R.layout.weeklyoverviewview, null);
        ListView lv = (ListView) v.findViewById(R.id.weeklyoverviewlist);
        WeekAdapter a = new WeekAdapter(cxt, time.plusWeeks(position).getWeekOfWeekyear(), time.plusWeeks(position).getYear());
        lv.setAdapter(a);
        TopNavigatorView nv = (TopNavigatorView) v.findViewById(R.id.weeklyoverviewnavigator);
        nv.setTitle("W" + time.plusWeeks(position).getWeekOfWeekyear() + " - " + time.plusWeeks(position).getYear());
        ((ViewPager) collection).addView(v, 0);
        return v;
    } 
```

WeekAdapter 看起来像

```
 public class WeekAdapter extends BaseAdapter {

        public ArrayList<View> views;

        public WeekAdapter(Context context, int week, int year) {
            LayoutInflater in = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            views = new ArrayList<View>();
            DateTime d = new DateTime().withYear(year).withWeekOfWeekyear(week);
            for (int i = 0; i < 7; i++) {
                View v = in.inflate(R.layout.weeklyoverviewlisttitle, null);
                TextView t = (TextView) v.findViewById(R.id.weeklytitletext);
                t.setText(d.withDayOfWeek(i + 1).dayOfWeek().getAsText() + ", " + d.withDayOfWeek(i + 1).monthOfYear().getAsText() + " "
                        + d.withDayOfWeek(i + 1).getDayOfMonth() + ", " + d.withDayOfWeek(i + 1).getYear());
                views.add(v);
            }
        }

        public int getCount() {
            return views.size();
        }

        public Object getItem(int arg0) {
            return views.get(arg0);
        }

        public long getItemId(int arg0) {
            return views.get(arg0).getId();
        }

        public View getView(int arg0, View arg1, ViewGroup arg2) {
            return views.get(arg0);
        }

    } 
```

问题是前 3 页看到直接实例化似乎是正确的，但是当我滑动到另一个视图时，我在列表视图中有 7 个项目，但文本为空。当我用日志检查文本视图中的文本时，我看到文本设置正确，但我没有出现。

编辑：像这样， http: [//i50.tinypic.com/108e8ac.png](http://i50.tinypic.com/108e8ac.png)，不能显示为图像 couse 声誉..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:14:20.867

Found the solution myself, but no idea what so ever why it's working. I changed the ListView's height to fill_parent instead of wrap_content

# silverlight - 从 PropertyChanged 回调将 TwoWay 绑定更改推送到绑定项目

> ID：11394225
> 
> 赞同：0
> 
> 时间：2012-07-09T11:33:58.397
> 
> 标签：silverlight, visual-studio-lightswitch, visual-studio-2012

我有一个 LightSwitch 屏幕，它由一个包含 CustomControl 的列表组成。此 CustomControl 具有一组依赖属性，它们通过 TwoWay 绑定绑定到实体上的属性。

在 CustomControl 的依赖属性之一上，我有一个 PropertyChangedCallback，它在 LightSwitch 页面上执行一个方法。然后，这将在列表绑定到的项目集合中运行一些计算。

大多数情况下这很好，但在某些情况下，计算似乎是在触发它们的更改从 CustomControl 上的 TwoWay 绑定推送到实体之前运行的。我该如何解决这个问题？我需要确保在从 TwoWay 绑定推送对 CustomControl 依赖项属性的更改之后运行 LightSwitch 页面中的代码。

通过以下方式在 CustomControl 上创建绑定：

```
 SetBinding(AxleNumberProperty, new Binding("Value.Number") { Mode = BindingMode.TwoWay }); 
```

依赖属性看起来像：

```
 public static readonly DependencyProperty AxleNumberProperty =
        DependencyProperty.Register("AxleNumber", typeof(int), typeof(AxleViewer), new PropertyMetadata((d, e) => ((AxleViewer)d).RecalculateSquare())); 
```

我对依赖属性的回调如下所示：

```
 private void RecalculateSquare()
    {
        IContentItem contentItem = (IContentItem)DataContext;
        IScreenDetails screenDetails = contentItem.Screen.Details;

        screenDetails.Dispatcher.BeginInvoke(() => screenDetails.Commands["UpdateSquare"].Execute());
    } 
```

然后在屏幕内我有：

```
 partial void UpdateSquare_Execute()
    {
        // perform calculation on this.Axles
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:17:41.730

如果属性有任何变化，您可以检查 propertychangedcall back 方法，然后只执行您的计算代码。否则删除 propertychangedcallback 并将您的代码放入 Property 的设置器中。

干杯! 维诺德

# c# - .net 在后面的代码中发布表单

> ID：11394229
> 
> 赞同：3
> 
> 时间：2012-07-09T11:34:20.800
> 
> 标签：c#, .net

我想在后面的代码中制作一个帖子表单。我有简单的 html 帖子正在工作，但是当我尝试使它成为 WebRequest 时，我无法使其工作。

提前感谢您的时间。

这是工作>

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title>Untitled Page</title>
</head>
<body>
<form action="http://www.pay-pos.com/test.php" method="post">
<textarea name="datafromuser">
<CC5Request><Name>Mert</Name><Password>123</Password><ClientId>1058</ClientId><IPAddress>213.456.654.456</IPAddress><Adress>asdsa</Adress><OrderId>123</OrderId><Type>Auth</Type>
<Number>4522115422659661</Number><ExpiresAy>01</ExpiresAy><ExpiresYil>13</ExpiresYil><Cvv2Val>123</Cvv2Val><Total>10</Total><Taksit></Taksit><Kdv>18</Kdv><BankaID>1</BankaID>
<TcKimlik>12345678912</TcKimlik></CC5Request>
</textarea>
<input type="submit" value="aaa" />
</form>
</body>
</html> 
```

这不起作用>

```
String ali = "<CC5Request><Name>Mert</Name><Password>123</Password><ClientId>xxxx</ClientId><IPAddress>213</IPAddress><Adress>asdsa</Adress>" +
                        "<OrderId>123</OrderId><Type>Auth</Type><Number>1234567891234567</Number><ExpiresAy>01</ExpiresAy><ExpiresYil>13</ExpiresYil><Cvv2Val>123</Cvv2Val>" +
                        "<Total>10</Total><Taksit></Taksit><Kdv>xx</Kdv><BankaID>1</BankaID><TcKimlik>12345678912</TcKimlik></CC5Request>";
                    WebRequest req = WebRequest.Create("http://www.pay-pos.com/test.php?datafromuser=" + ali);
                    req.Credentials = CredentialCache.DefaultCredentials;
                    req.Method = "POST";
                    HttpWebResponse loWebResponse = (HttpWebResponse)req.GetResponse();
                    Encoding enc = Encoding.GetEncoding(1254); 

                    StreamReader loResponseStream =

                       new StreamReader(loWebResponse.GetResponseStream(), enc);

                    string lcHtml = loResponseStream.ReadToEnd();
                    loWebResponse.Close();
                    loResponseStream.Close(); 
```

编辑：实验 1

```
String postData = "Name=Mert" +
              "&Password=123" +
              "&ClientId=1058" +
              "&IPAddress=213.456.654.456" +
              "&Adress=asdsa" +
              "&OrderId=123" +
              "&Type=Auth" +
              "&Number=4522115422659661" +
              "&ExpiresAy=01" +
              "&ExpiresYil=13" +
              "&Cvv2Val=123" +
              "&Total=10" +
              "&Taksit=1" +
              "&Kdv=18" +
              "&BankaID=1" +
              "&TcKimlik=12345678912";

            string URI = "http://www.pay-pos.com/test.php";

            WebClient wc = new WebClient();
            wc.Headers["Content-type"] = "application/x-www-form-urlencoded";
            string HtmlResult = wc.UploadString(URI, postData); 
```

实验 2

```
 HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create("http://www.pay-pos.com/test.php");
        request.Method = WebRequestMethods.Http.Post;
        request.ContentLength = postData.Length;
        request.ContentType = "application/x-www-form-urlencoded";
        request.KeepAlive = false; //also tried true as well

        StreamWriter writer = new StreamWriter(request.GetRequestStream());
        writer.Write(postData);
        writer.Close();
        HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        StreamReader reader = new StreamReader(response.GetResponseStream());
        String responseString = reader.ReadToEnd();

        response.Close(); 
```

实验 3 !!!工作!!!

```
String ali = "datafromuser=<CC5Request><Name>Mert</Name><Password>123</Password><ClientId>1058</ClientId><IPAddress>213.456.654.456</IPAddress><Adress>asdsa</Adress><OrderId>123</OrderId><Type>Auth</Type>" +
"<Number>4522115422659661</Number><ExpiresAy>01</ExpiresAy><ExpiresYil>13</ExpiresYil><Cvv2Val>123</Cvv2Val><Total>10</Total><Taksit></Taksit><Kdv>18</Kdv><BankaID>1</BankaID>"+
"<TcKimlik>12345678912</TcKimlik></CC5Request>";

            byte[] byteArray = System.Text.Encoding.UTF8.GetBytes(ali);

            WebRequest req = WebRequest.Create("http://www.pay-pos.com/test.php");

            req.ContentType = "application/x-www-form-urlencoded"; 
            req.ContentLength = byteArray.Length;
            req.Method = "POST"; 

            Stream dataStream = req.GetRequestStream(); 
            dataStream.Write(byteArray, 0, byteArray.Length); 
            dataStream.Close();

            HttpWebResponse response = (HttpWebResponse)req.GetResponse();
            StreamReader reader = new StreamReader(response.GetResponseStream());
            String responseString = reader.ReadToEnd();

            response.Close(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T11:52:56.787

我看到的第一件事是你试图使用查询字符串来发布表单数据。您的“表单数据”应该是这样的：

```
 String ali = "datafromuser=<CC5Request><Name>Mert</Name><Password>123</Password><ClientId>xxxx</ClientId><IPAddress>213</IPAddress><Adress>asdsa</Adress>" +
                            "<OrderId>123</OrderId><Type>Auth</Type><Number>1234567891234567</Number><ExpiresAy>01</ExpiresAy><ExpiresYil>13</ExpiresYil><Cvv2Val>123</Cvv2Val>" +
                            "<Total>10</Total><Taksit></Taksit><Kdv>xx</Kdv><BankaID>1</BankaID><TcKimlik>12345678912</TcKimlik></CC5Request>"; 
```

接下来，您需要从表单数据中获取 bytes[]。

```
byte[] byteArray = Encoding.UTF8.GetBytes(ali); 
```

设置一些标题：

```
req.ContentType = "application/x-www-form-urlencoded"; 
req.ContentLength = byteArray.Length;
req.Method = "POST"; 
```

现在将您的数据写入请求流。

```
Stream dataStream = req.GetRequestStream(); 
dataStream.Write(byteArray, 0, byteArray.Length); 
dataStream.Close(); 
```

终于……得到你的回应。还要注意，任何实现 IDisposable 的东西都应该包含在一个`using`语句中，即`Stream`and `WebResponse`。

另请注意，提交按钮不是表单发布数据的一部分。服务器可能正在期待它。

编辑：这是 Microsoft 提供的完整示例，可逐步指导您。

[http://msdn.microsoft.com/en-us/library/debx8sh9.aspx](http://msdn.microsoft.com/en-us/library/debx8sh9.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T11:50:15.573

这可能会帮助你。

```
string URI = "http://www.myurl.com/post.php";
string myParamters = "param1=value1&param2=value2";

WebClient wc = new WebClient();
wc.Headers["Content-type"] = "application/x-www-form-urlencoded";
string HtmlResult = wc.UploadString(URI, myParameters); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T11:56:17.757

这是一个简单的例子。postData 取决于形式

```
String postData = "Name=" + Username +
              "&Password=" + Password +
              "&Retype=" + Password +
              "&Email=" + HttpUtility.UrlEncode(EmailAddress) +
              "&RealName=" + String.Format("{0}+{1}", FirstName.Replace(" ", "+"), LastName.Replace(" ", "+")); 
```

现在创建请求并发布数据：

```
HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(url);
request.Method = WebRequestMethods.Http.Post;
request.ContentLength = postData.Length;
request.ContentType = "application/x-www-form-urlencoded";
request.KeepAlive = false;

StreamWriter writer = new StreamWriter(request.GetRequestStream());
writer.Write(postData);
writer.Close();
HttpWebResponse response = (HttpWebResponse)request.GetResponse();
StreamReader reader = new StreamReader(response.GetResponseStream());
String responseString = reader.ReadToEnd();

response.Close(); 
```

您可以使用 Fiddler 来捕捉 postData 的外观。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T12:32:54.603

像这样试试。

```
using (WebClient client = new WebClient())
   {

       byte[] response = client.UploadValues("http://dork.com/service", new NameValueCollection()
       {
           { "home", "Cosby" },
           { "favorite+flavor", "flies" }
       });
   } 
```

您将需要这些包括：

```
using System;
using System.Collections.Specialized;
using System.Net; 
```

如果您坚持使用静态方法/类：

```
public static class Http
{
    public static byte[] Post(string uri, NameValueCollection pairs)
    {
        byte[] response = null;
        using (WebClient client = new WebClient())
        {
            response = client.UploadValues(uri, pairs);
        }
        return response;
    }
} 
```

然后简单地说：

```
Http.Post("http://dork.com/service", new NameValueCollection() {
    { "home", "Cosby" },
    { "favorite+flavor", "flies" }
}); 
```

# powershell - Powershell调用Powershell脚本

> ID：11394232
> 
> 赞同：6
> 
> 时间：2012-07-09T11:34:37.210
> 
> 标签：powershell

`& powershell .\other.ps1`和之间的行为有何不同`& .\other.ps1`？

编辑：特别是，如果出现错误，它们有何不同`other.ps1`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-09T11:38:53.693

在前一种情况下，您将获得另一个 PowerShell 进程，并且脚本无法读取当前会话中定义的变量：

```
PS> $foo = 'bar'
PS> 'Write-Host $foo'|Set-Content x.ps1
PS> & powershell .\x.ps1

PS> & .\x.ps1
bar 
```

# django - 注销后不显示django消息

> ID：11394235
> 
> 赞同：-2
> 
> 时间：2012-07-09T11:34:55.230
> 
> 标签：django

> **可能重复：**
> [注销时的 django 消息](https://stackoverflow.com/questions/11393929/django-message-when-logout)

一旦用户退出站点，它应该重定向到主页并在顶部显示“U 已成功退出”消息。我使用 from django.contrib.auth import logout as auth_logout 进行注销，我的注销视图为

```
@secure_required
def signout(request):
    auth_logout(request)
    messages.success(request, ("You r successfully logged out"), fail_silently=True)
    return redirect('/') 
```

有人帮我在主页上显示消息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:44:53.580

**你试过什么？**

您可以为此目的使用消息框架，请在发布广泛问题之前尝试理解或改写特定问题

[https://docs.djangoproject.com/en/dev/ref/contrib/messages/](https://docs.djangoproject.com/en/dev/ref/contrib/messages/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:45:44.687

签出 django 消息框架：[https ://docs.djangoproject.com/en/dev/ref/contrib/messages/](https://docs.djangoproject.com/en/dev/ref/contrib/messages/)

在您看来：

```
def contact(request):
    if request.POST:
        messages.success(request, 'Success!')
     return render_to_response (...) 
```

# jquery - 使用 JQuery 和 IE9 从 HTML 文件输入中检查文件大小

> ID：11394251
> 
> 赞同：0
> 
> 时间：2012-07-09T11:35:54.483
> 
> 标签：jquery, forms, internet-explorer

我正在使用 JQuery 检查表单文件输入字段中的文件大小和类型。HTML 是：

```
<input name="source" id="imageFile" type="file" style ="border: 1px solid #576675;"> 
```

和jQuery：

```
$('#imageFile').bind('change', function() {

   var imageSize = this.files[0].size/1048576;
   var imageType = this.files[0].type.toString();

   //.... checking different condition for imageSize and imageType....///
}); 
```

该代码适用于 FireFox 和 Chrome，但在 IE9 中出现以下错误：

```
SCRIPT5007: Unable to get value of the property '0': object is null or undefined 
```

我已经阅读[了这篇文章](https://stackoverflow.com/questions/1601455/check-file-input-size-with-jquery)，但是在 IE9 中真的没有办法做到这一点吗？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:05:29.280

它可能与您遇到此错误的许多其他问题有关 - 我以前也遇到过这些问题。
请参阅此 SO 链接 - [IE9 JavaScript 错误：SCRIPT5007：无法获取属性“ui”的值：对象为空或未定义](https://stackoverflow.com/questions/5787245/ie9-javascript-error-script5007-unable-to-get-value-of-the-property-ui-obje)

我很确定元标记解决方案对我有用。否则，如果此解决方案不适合您，您可能不必在 IE9 中执行某些任务。

# c# - 我应该阅读 Web 服务 (SOAP)

> ID：11394254
> 
> 赞同：0
> 
> 时间：2012-07-09T11:36:18.253
> 
> 标签：c#, asp.net, vb.net, web-services

我正在考虑为基于 Web 的 Timesheet 应用程序使用 Web 服务 (SOAP)。将有大约 250-300 人使用该网站。

**开发环境：** VS2010（VB.NET、ASP.NET 和 AJAX 或 Telerik）和 ORACLE

**办公环境：** Web 服务器位于英国，但用户将通过不同国家访问此应用程序。***（主要来自欧洲，但很少有用户在澳大利亚）***

过去，我曾将 Web 服务用于稍大一点的应用程序。我的计划是使用网络服务作为数据层。我将以 XML 格式传递 Oracle 存储过程值，然后在存储过程中提取它们。Web 服务函数将调用存储过程，然后将数据集对象返回给 UI。

（所有与数据库相关的功能（数据提供者等）都将在网络服务中，如连接和返回数据集的功能。）

此应用程序中还将有许多报告，尤其是财务报告。

将来，我将使用此 Web 服务开发一些其他（中小型）应用程序。

![在此处输入图像描述](../Images/6fb2186adf6213132c463dadda5229a0.png)

> **我想知道网络服务是否会降低性能？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:45:17.217

当然，使用 web 服务进行数据检索会降低应用程序的性能，因为您添加了另一层。必须对数据进行（反）序列化，这需要处理时间。

什么是替代方案？如果您不使用 Web 服务，则必须在 ASP.Net 站点将引用和使用的单独项目中编写数据访问代码，但它需要数据库服务器和 Web 服务器之间的直接连接。如果这不是问题：使用最直接的方法。代码越少，可能的错误就越少。

但是，如果您希望客户端通过这些 Web 服务（例如通过 AJAX）获取实时数据，或者如果您想创建可以在任何地方运行并引用数据的应用程序，那么 Web 服务绝对是您的最佳选择。

# perl - 搜索特定的重复 ID

> ID：11394258
> 
> 赞同：0
> 
> 时间：2012-07-09T11:36:29.783
> 
> 标签：perl, duplicates

我编写了一个 perl 脚本，它读取 2 个不同的文件，比较这两个文件中的 ID，并且只打印 ID 匹配的数据。ID文件被读入一个数组，而数据文件被逐行读取。这一切都很好，但是现在我需要添加更多内容。在我的数据文件中，我有时会出现 ID 重复的行，因为该主题已经多次访问以提供样本。因此，我需要查找这些重复项并仅记录最近的访问日期。

所以我的数据文件看起来像这样：

```
 ID  DOV  Data1  Data2 etc etc 
```

现在我已经看到哈希是搜索重复项的方法，但是我看到的所有修复都是简单地不加选择地删除重复项，这不是我想要的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:52:59.550

这将显示每个 ID 的最后一个 DOV，对输入数据做出*很多*假设，因此很有可能它不会为您开箱即用。（特别是，如果您的输入数据未按日期排序，则它根本不起作用，因为它只取每个 ID 看到的最后一个日期。此外，如果日期的格式包含空格，例如“ Mon Jul 9 15:51:22 CEST 2012"，它只会获取到第一个空格的日期（本例中为“Mon”）。这里的重点只是为了演示基本技术，而不是提供完整的解决方案.

```
#!/usr/bin/env perl    

use strict;
use warnings;

my %visit;
while (<DATA>) {
  my ($id, $date) = split;
  $visit{$id} = $date;
} 

for my $id (sort keys %visit) {
  print "$id => $visit{$id}\n";
} 

__DATA__
1       2012-01-01
2       2012-01-02
1       2012-02-03
3       2012-02-04
2       2012-03-05
3       2012-03-06
4       2012-04-07
1       2012-04-08
5       2012-05-09
1       2012-05-10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:02:26.137

```
# read id file
my %id_hash;
while (<IDFILE>) {
  chomp;
  $id_hash{$_} = 1;
}

#read data file
while (<DATAFILE>) {
  my @arr = split(/\s+/, $_);
  if (defined $id_hash{$arr[0]}) { # only process if exists in id file
    # and only if this is the first data entry or a later visit
    if ( (not ref $id_hash{$arr[0]}) or ($id_hash{$arr[0]}[1] < $arr[1]) ) {
      # store all data in an array ref
      $id_hash{$arr[0]} = [ @arr ];
    }
  }
}

for my $id (keys %id_hash) {
  print join(" ", @{$id_hash{$id}}), "\n";
} 
```

# asp.net - System.Globalization.DateTimeFormatInfo.calendar 导致抛出异常

> ID：11394259
> 
> 赞同：3
> 
> 时间：2012-07-09T11:36:38.537
> 
> 标签：asp.net, .net

我使用此代码将我的文化更改为 .Net3.5 中的波斯文化：

```
if (CultureInfo.CurrentCulture.ToString() == "fa-IR")
        {
            CultureInfo persianCalture = new CultureInfo("fa-IR");
            DateTimeFormatInfo info = persianCalture.DateTimeFormat;
            info.AbbreviatedDayNames = new string[] { "&nbsp;&nbsp;ی&nbsp;&nbsp;", "&nbsp;&nbsp;د&nbsp;&nbsp;", "&nbsp;&nbsp;س&nbsp;&nbsp;", "&nbsp;&nbsp;چ&nbsp;&nbsp;", "&nbsp;&nbsp;پ&nbsp;&nbsp;", "&nbsp;&nbsp;ج&nbsp;&nbsp;", "&nbsp;&nbsp;ش&nbsp;&nbsp;" };
            info.DayNames = new string[] { "يکشنبه", "دوشنبه", "سه‌شنبه", "چهارشنبه", "پنجشنبه", "جمعه", "شنبه" };
            info.AbbreviatedMonthNames = new string[] { "فروردين", "ارديبهشت", "خرداد", "تير", "مرداد", "شهريور", "مهر", "آبان", "آذر", "دی", "بهمن", "اسفند", "" };
            info.MonthNames = new string[] { "فروردين", "ارديبهشت", "خرداد", "تير", "مرداد", "شهريور", "مهر", "آبان", "آذر", "دی", "بهمن", "اسفند", "" };
            info.AbbreviatedMonthGenitiveNames = new string[] { "فروردين", "ارديبهشت", "خرداد", "تير", "مرداد", "شهريور", "مهر", "آبان", "آذر", "دی", "بهمن", "اسفند", "" };
            info.AMDesignator = "صبح";
            info.PMDesignator = "عصر";
            info.ShortDatePattern = "yyyy/MM/dd";
            info.FullDateTimePattern = "yyyy/MM/dd hh:mm:ss";
            info.LongDatePattern = "yyyy MMMM dd dddd";
            info.FirstDayOfWeek = DayOfWeek.Saturday;
            persianCalture.DateTimeFormat = info;
            PersianCalendar PersianCal = new PersianCalendar();

            typeof(DateTimeFormatInfo).GetField("calendar", (System.Reflection.BindingFlags.NonPublic | (System.Reflection.BindingFlags.Public | System.Reflection.BindingFlags.Instance))).SetValue(info, PersianCal);
            typeof(CultureInfo).GetField("calendar", (System.Reflection.BindingFlags.NonPublic | (System.Reflection.BindingFlags.Public | System.Reflection.BindingFlags.Instance))).SetValue(persianCalture, PersianCal);
            Thread.CurrentThread.CurrentCulture = persianCalture;
            Thread.CurrentThread.CurrentUICulture = persianCalture;
            CultureInfo.CurrentCulture.DateTimeFormat = info;
            CultureInfo.CurrentUICulture.DateTimeFormat = info;
        } 
```

但下面的行是抛出 ArgumentNullException ：

System.Globalization.DateTimeFormatInfo.calendar

```
 typeof(DateTimeFormatInfo).GetField("calendar", (System.Reflection.BindingFlags.NonPublic | (System.Reflection.BindingFlags.Public | System.Reflection.BindingFlags.Instance))).SetValue(info, PersianCal);
        typeof(CultureInfo).GetField("calendar", (System.Reflection.BindingFlags.NonPublic | (System.Reflection.BindingFlags.Public | System.Reflection.BindingFlags.Instance))).SetValue(persianCalture, PersianCal); 
```

有谁知道为什么会抛出这个异常？

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:24:12.343

尝试使用：`typeof(DateTimeFormatInfo).GetProperty("Calendar"....)`

DateTimeFormatInfo 有一个 Calendar 属性（大写 C）。

希望这可以帮助，

谢。

# php - 禁用cookies时如何访问php会 话？

> ID：11394260
> 
> 赞同：1
> 
> 时间：2012-07-09T11:36:38.700
> 
> 标签：php, session, post, cookies, get

我为客户构建的电子商务系统有问题，一些订单出现空白。我添加了代码来检查是否正在设置会话，并且没有在某些订单上设置它们，这就是它出现空白的原因。

我使用会话的原因是存储订单信息

例如：`$_SESSION['data']=$_POST;`

我只能假设用户在他们的浏览器中禁用了 cookie，并且想知道如何解决这个问题。

我想做的是检查是否启用了cookie，如果不通过发送会话ID `$_GET`，但我如何`$_SESSION['data']`使用会话ID访问？

所以我的问题是：

如何检查是否启用了 cookie，如果没有通过 get 发送会话 ID，以及如何`$_SESSION['data']`使用会话 ID 进行访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:46:31.567

您必须手动打开会话管理器，例如使用

```
<?
session_id($_GET['session_id']); 
session_start();
//you can now acccess $_SESSION['data'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T11:54:11.233

您可以在 php.ini 中设置 session.use_trans_sid，它会自动通过 GET 或 POST 附加会话 id

它通过再次在 php.ini 中根据 url_rewriter.tag 条目自动重写某些元素（例如 href）来实现这一点。

请注意，通常最好使用 cookie，因为将会话 ID 存储在 url 中会导致用户无意中与其他人共享其会话 ID

# ios - UIImageView 动画的动画帧图像

> ID：11394266
> 
> 赞同：0
> 
> 时间：2012-07-09T11:37:02.423
> 
> 标签：ios, cocoa-touch, animation

是否有任何软件可以获取 UIImageView 动画帧的图像。如何创建这些图像？是否有任何网站可以帮助我处理图像。我真的很想为我的应用程序添加动画，但我无法为其获取图像。如何设计或获取动画图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:40:40.870

您可以使用任何图像编辑器。值得注意的应用程序是：

*   Photoshop（付费）
*   Pixelmator（付费）
*   GIMP（免费）

您将以与创建任何其他图像相同的方式创建动画帧 - 除了会有多个图像，推进动画的帧 - 而不是单个图像。

# xml - XQuery - 是否可以生成非 XML 文档？

> ID：11394267
> 
> 赞同：1
> 
> 时间：2012-07-09T11:37:08.430
> 
> 标签：xml, xquery

我想使用 XQuery 从我的 XML 文档生成 Java 源代码，例如：

```
<configuration package="my.package.name">

    <property>
        <name>First</name>
        <value>0</value>
        <description>First description</description>
    </property>

    <property>
        <name>Second</name>
        <value>2</value>
        <description>Second description</description>
    </property>
... 
```

应该生成：

```
package my.package.name;

class MyClass {
    // First description
    private String first;

    // Second description
    private String second;
} 
```

我试图这样开始：

```
xquery version "1.0";

"package "+$doc/@package
"class "+$doc/@classname
{
for $property in $doc//property
    return {
        "private String "+$property/name::text()
    }
} 
```

语法显然不正确，我想知道它是否可行。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:17:44.893

细节取决于您的查询处理器。应该可以将查询结果作为字符串返回，也可以使用 XSL 中的文本序列化方法；但是您调用它的方式因一个查询处理器而异。（两种方式的区别在于，文本序列化方式会自动将查询结果中的任何内容转成字符串，然后将字符串拼接起来）。

以下是如何以返回单个字符串的查询的形式执行此操作：

```
declare variable $nl "= '&#10;';
concat(
  "package ", $doc/@package, $nl,
  "class ", $doc/@classname, $nl,
  string-join(
    (for $property in $doc//property
     return {
        concat("private String ", $property/name)
     }), $nl)
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T13:22:16.803

查询：

```
declare function xf:XML2Java($configuration as element(configuration))
    as xs:string {
    let $package := string($configuration/@package)
    let $newline := "&#13;"
       for $property in $configuration/property
       let $variable := data($property/name)
       let $javadoc := data($property/description)
       return
        fn:concat($package,$newline,"class MyClass{",$newline,"//",$javadoc,$newline,"private String ",$variable,";",$newline," }")     
}; 
```

输入：

```
<configuration package="com.test">
    <property>
        <name>Test</name>
        <value>somevalue</value>
        <description>This is test variable</description>
    </property>
</configuration> 
```

输出：

```
com.test
class MyClass{
//This is test variable
private String Test;
 } 
```

这是在 WebLogic 研讨会 XQuery 设计器中完成的。

# android - NoClassDefFound：在运行 cwac-wakeful 的演示时

> ID：11394270
> 
> 赞同：1
> 
> 时间：2012-07-09T11:37:20.550
> 
> 标签：android, commonsware-cwac

我对 NoClassDefinitionfound 有疑问，在从[https://github.com/commonsguy/cwac-wakeful](https://github.com/commonsguy/cwac-wakeful)运行 com.commonsware.cwac.wakeful.demo 时，它没有获得启动器活动 DemoActivity。注意，我已经从上面的链接集成了相同的库。请帮助我，谢谢。

```
07-09 17:20:30.994: E/AndroidRuntime(3107): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.commonsware.cwac.wakeful.demo/com.commonsware.cwac.wakeful.demo.DemoActivity}: java.lang.ClassNotFoundException: com.commonsware.cwac.wakeful.demo.DemoActivity in loader dalvik.system.PathClassLoader[/data/app/com.commonsware.cwac.wakeful.demo-2.apk] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:53:01.183

更新 adb 后我遇到了这个问题。我的外部 jar 位于名为“lib”而不是“libs”的目录中。

# google-analytics - 谷歌分析自定义报告和/或过滤器

> ID：11394273
> 
> 赞同：3
> 
> 时间：2012-07-09T11:37:29.160
> 
> 标签：google-analytics

我在创建自定义报告时遇到问题。是否有一个选项可以过滤到广告“或”不仅“和”其他页面。实际上，我需要跟踪以 www.web.com/page1/ 开头的每个页面，但我还需要一个多语言页面，因此可以访问 www.web.com/en/page1/ 或 www.web.com/ge/ page1/ 或 www.web.com/fr/page1/ 等等，有八种不同的语言。有没有办法用一份报告来追踪它们？ ![过滤器](../Images/8ba199beea1c846258e36fcd518026fb.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T19:13:30.133

只好自己做这件事。以下是过滤器的操作：

(1) 对于第一个字段，设置**Include**。

(2) 对于第二个字段，设置**Page**。

(3) 对于第三个字段，设置**Regex**。

(4) 对于第四个字段，输入一个正则表达式，它匹配您需要过滤的所有 OR 子句，仅此而已。在您的示例中（假设您的所有语言代码都是 2 个字符）：

```
^/[A-Za-z]{2}/page1/$ 
```

这将匹配您网站上的所有内容，其中包含您的问题中语言代码所在的两个字符。

另一种选择是过滤掉确切的值。您也可以使用正则表达式来执行此操作。仅包括“en”和“fr”语言代码：

```
^/en/page1/$|^/fr/page1/$ 
```

请注意，管道字符在此处用作两个完整正则表达式之间的 OR 语句。

希望这可以帮助其他人这样做！

# android - 从 ant 和 adt 构建时 APK 不一样

> ID：11394281
> 
> 赞同：2
> 
> 时间：2012-07-09T11:38:15.123
> 
> 标签：android, ant, apk, adt

我有一个安卓项目。我可以从 Eclipse 中的 ADT 和命令行中的 ant 将它发布到 apk。apk 文件不一样。我解压缩了apk文件并比较了内容。主要区别在于 classes.dex 文件。从 ADT 编译的文件比从 ant 编译的文件要小一些。

为什么他们不一样？当我向用户发布我的应用程序时，哪个更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:40:23.733

`Why are they not the same?`-- 可能存在一些细微的编译器标志差异，导致输出略有不同。

`Which is better when I release my app to users?`-- 你执行测试的版本。两者之间可能没有明显的区别，但是如果一个二进制文件被测试而另一个没有，我需要一个很好的理由来分发未经测试的版本（我不认为这样的理由存在）。

# windows - OFBiz 和 UNIX 头疼

> ID：11394288
> 
> 赞同：2
> 
> 时间：2012-07-09T11:38:30.270
> 
> 标签：windows, unix, installation, ofbiz

我有几个问题，我想问他们可能听起来有点愚蠢，但请给我几个答案：

1.  是否可以在非专用虚拟主机上安装 ofbiz 以及它需要什么以及。
2.  将其托管在“办公室”的服务器上是否是个好主意。
3.  你能给我一些关于如何使用 windows 访问 UNIX 服务器的提示（不能更具体，因为我不知道它到底是什么 UNIX）（我有 root 密码）？

PS我知道这些听起来很笨，但是……对不起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:38:31.853

1-您可以在任何可以运行tomcat的系统上安装ofbiz。

2-这取决于你想如何使用它。如果你只打算从办公室网络访问它，那么我建议它在办公室的机器上。如果您需要从外部访问它，那么这将不起作用，除非您托管另一个实例并同步它们。

3- 如果您打算在 UNIX/Linux 上托管它，那么您需要一些技能才能成功执行任务（至少如果您需要生产数据库）。

如果我是你，我会在继续之前阅读更多关于该主题的内容。这是[Ofbiz文档的链接](http://ofbiz.apache.org/documentation.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T07:58:33.380

3) 要访问远程 UNIX 服务器，您可能会使用 SSH 协议。在 Windows上， [PuTTY](http://www.chiark.greenend.org.uk/~sgtatham/putty/ "油灰")是最流行的 SSH 客户端。

# sql-server - 在 SQL Server 2008 中更新结果行时不停止 CURSOR 循环

> ID：11394290
> 
> 赞同：1
> 
> 时间：2012-07-09T11:38:47.883
> 
> 标签：sql-server, cursor

我想将Table 的`DriverID`列设置`Driver`为 5000, 5001 ,....

为此，我编写了这个脚本：

```
use WeighbridgeDB
GO

DECLARE @NewDriverID int;
SET @NewDriverID = 5000;

DECLARE Driver_Cursor CURSOR FOR 
SELECT DriverID FROM Driver
FOR UPDATE;

OPEN Driver_Cursor;

FETCH NEXT FROM Driver_Cursor

WHILE @@FETCH_STATUS = 0
BEGIN
    UPDATE Driver SET DriverID = @NewDriverID WHERE CURRENT OF Driver_Cursor;
    SET @NewDriverID += 1;
    FETCH NEXT FROM Driver_Cursor
END

CLOSE Driver_Cursor;
DEALLOCATE Driver_Cursor;
GO 
```

但是 While 循环不会停止，并且值`@@FETCH_STATUS`始终为 0。我认为 Cursor 会重建自身，因为更新发生在表或其他东西上。

如何纠正这种情况？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T11:44:48.363

无论如何，您不需要游标（一般来说，除了极少数情况外，请尽量避免在 TSQL 中使用这些游标）

```
WITH T AS
(
SELECT *,
       ROW_NUMBER() OVER (ORDER BY DriverID) + 4999 AS NewDriverID
FROM Driver
)
UPDATE T SET DriverID = NewDriverID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:53:34.823

你可以这样做：

```
UPDATE Driver
SET
    Driver.DriverID = d.NewDriverID 
FROM
(
    select 
        ROW_NUMBER() Over (ORDER BY DriverID) + 5000 AS NewDriverID,
        Driver.DriverID 
    from Driver 
) AS d
WHERE Driver.DriverID = p.DriverID 
```

几乎没有理由使用游标。

# html - Div 未填充 100% 高度

> ID：11394291
> 
> 赞同：0
> 
> 时间：2012-07-09T11:38:53.397
> 
> 标签：html, css, height

我似乎有一个问题，我的容器 div 没有达到页面底部的 100% 高度。[您可以在http://jsfiddle.net/hqC3U/](http://jsfiddle.net/hqC3U/)看到布局

我已经尝试了从最小高度到不工作的肮脏旧黑客的所有方法。

有没有人有一些建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:52:36.540

您不能将百分比值应用于 div 高度，因为理论上您的高度可能是无限的。您将不得不使用最小高度之类的东西。

# javascript - 没有调用ajax函数

> ID：11394294
> 
> 赞同：0
> 
> 时间：2012-07-09T11:39:02.377
> 
> 标签：javascript, jquery, asp.net, json

我的实际要求是我想检索从我的 aspx 页面返回到 html 页面的值。提前致谢

```
 ```
<script type="text/javascript">

  function getCars() {
      alert("ji");
      $.ajax({
          type: "POST",
          url: "http://localhost:1967/WebSite14/Default.aspx",
          data: "{}",
          contentType: "json",
          dataType: "json",
          success: function (response) {
              var cars = response.emp;
              alert("ji");
              $('#output').empty();
              $.each(cars, function (index, emp) {

                  $('#output').append('<p><strong>' + emp.Expiry + ' ' +
                            emp.Expiry + '</strong><br /> Year: ' +
                            emp.Expiry + '<br />Doors: ' +
                            emp.Expiry + '<br />Colour: ' +
                            emp.Expiry + '<br />Price: £' +
                            emp.Expiry + '</p>');
              });
          },
          failure: function (msg) {
              $('#output').append('hi');
          }
      });
  } 
``` 
```

请帮助我，我错了，这是我的 aspx 页面返回的内容，而且我不知道我应该怎么做才能成功：函数（响应）请帮助我

```
 {
    "emp": [
        {
            "Name": "Apple",
            "Expiry": 1,
            "Price": 3.99,
            "Sizes": [
                "Small",
                "Mediu",
                "Large"
            ]
        },
        {
            "Name": "Apple",
            "Expiry": 1,
            "Price": 3,
            "Sizes": [
                "Small",
                "Mediu",
                "Large"
            ]
        }
    ]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:45:34.080

我继续使用这种格式从链接中获取数据，它有效，感谢你们的支持

```
if (xmlHttp.readyState==4)
        {
            alert(xmlHttp.status);
            if(xmlHttp.status==200)
            {

            alert("hi");
            var jsondata=eval("("+xmlHttp.responseText+")") //retrieve result as an JavaScript object
            jsonOutput=jsondata.message.result;
            alert(jsonOutput);

            InitializeLeadStorage()

        }
        } 
```

# sql-server - SQL Server 动态查询中的嵌套查询

> ID：11394295
> 
> 赞同：0
> 
> 时间：2012-07-09T11:39:05.063
> 
> 标签：sql-server, dynamic, nested

我正在尝试使用动态查询实现嵌套查询。

我尝试过这样的事情：

```
SET @str = 'Select @GRP= ' + @Field +' 
           from Hist_Tab 
           Where TerminalID in (Select id from newtab where lease='+@Lease +')';

exec sp_executesql @query=@str,

@params= N' @GRP Numeric(15,2) Ouptut',
@GRP=@GRP Output 
```

但似乎我无法以这种方式实现嵌套查询......

有什么建议吗？？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-03T23:22:46.430

对于传入的任何局部变量，您需要确保在每一侧添加额外的 '' 以便动态语句在执行时以与此等效的方式结束： where lease = 'value of @Lease' 以您的方式书面是把它变成：其中租约=@Lease的价值

将引发错误，因为与租约进行比较的 varchar 值缺少单引号。

尝试这个：

```
SET @str = 'Select @GRP= ' + @Field +' 
           from Hist_Tab 
           Where TerminalID in (Select id from newtab where lease='''+@Lease +''')';

exec sp_executesql @query=@str,

@params= N' @GRP Numeric(15,2) Ouptut',
@GRP=@GRP Output 
```

# google-apps-script - 使用 UserProperties 时出现数据库错误

> ID：11394296
> 
> 赞同：0
> 
> 时间：2012-07-09T11:39:08.980
> 
> 标签：google-apps-script

我编写了一个简单的脚本，旨在为脚本的任何新用户在其中创建一个新文件夹和文件。文件夹的 id 保存在 UserProperties 中。但是在测试时的某个时候，我在尝试查找任何项目属性（使用文件->项目属性）时收到一条消息“数据存储错误”。之后，我拥有的所有其他脚本中都发生了相同的错误。

基本上我根本无法查看或编辑任何属性。我该如何摆脱它？有没有办法清除 userProperties？（首先要做的是清除浏览器的缓存，但显然属性没有存储在那里）这个问题的原因可能是什么？

```
Browser: Chrome 20.0.1132.47
OS: Windows 7 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:58:23.370

问题跟踪器上有一个已知问题 -[问题 1519](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1519)。请订阅它，以便您知道何时有可用的补救措施

# grails - 域类混淆

> ID：11394298
> 
> 赞同：1
> 
> 时间：2012-07-09T11:39:12.837
> 
> 标签：grails

我有一个使用 groovy-grails 的应用程序，它是一个网络应用程序。我有几个问题。

1）我有标准的用户界面，它在提交时通过网络服务获取所有数据。所以我的域对象应该是什么样子，因为我没有数据库表交互。这些对象可以在 Domian 对象下声明，或者它们必须是 Models/POJO java 类。

即说我有员工创建屏幕，姓名，姓氏，电话，角色。一旦我点击 createemployee 服务。我得到一个成功或失败的状态。我会在屏幕上显示它们。

我可以将员工声明为 domian 类并在 UI 中映射每个值吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:48:45.420

我建议在域类文件夹之外创建它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-06T18:33:35.357

Grails DomainClass 与数据库紧密相关。如果您的项目中不需要 GORM/Hibernate，而是使用 Web 服务，那么您将失去 Grails 的一些出色功能，但没关系。

因此，我建议您仅使用 DomainClass 来利用脚手架功能，以便快速入门。之后，您应该创建一个服务来通过 Web 服务访问您的数据，并使用该服务而不是控制器中的 DomainClasses。

查看 Grails 参考文档中的[数据绑定](http://grails.org/doc/latest/guide/theWebLayer.html#dataBinding)和[命令对象](http://grails.org/doc/latest/guide/theWebLayer.html#commandObjects)章节。您必须了解它才能将您的 DomainClasses 移动到命令对象并获得数据绑定的全部好处

# java - 用于 main 的 JNI CallStaticVoidMethod 不返回到 C++

> ID：11394299
> 
> 赞同：-3
> 
> 时间：2012-07-09T11:39:17.007
> 
> 标签：java, c++, java-native-interface

> **可能重复：**
> [如何在从 JNI 调用的代码中捕获 System.exit()](https://stackoverflow.com/questions/4542853/how-to-trap-system-exit-in-code-called-from-jni)

`JNI CallStaticVoidMethod`调用后正确启动`Java`进程但不返回`C++`代码，然后退出。我的`java code`没有，`system.exit(0)`但只有`return;`

```
jclass StringClass = m_JVMEnv->FindClass("java/lang/String");
    int numOfArguments = (int)m_ServerArguments.size() + 4 ;
    int argumentIndex = 0;

    jobjectArray jargs = m_JVMEnv->NewObjectArray(numOfArguments, StringClass, NULL);    

    m_JVMEnv->SetObjectArrayElement(jargs, argumentIndex++, m_JVMEnv->NewStringUTF("start"));

    std::string strJavaClassPath = "-classpath=";
    strJavaClassPath             += "\"";
    for ( std::size_t idx = 0; idx < m_listOfJars.size() - 1 ; idx++) {
        strJavaClassPath += m_ProductLibDir + "\\lib\\" + m_listOfJars[idx] + ";";
    }
    strJavaClassPath      += m_ProductLibDir + "\\lib\\" + m_listOfJars[m_listOfJars.size() - 1] ;
    strJavaClassPath      += "\"";

    m_JVMEnv->SetObjectArrayElement(jargs, argumentIndex++, m_JVMEnv->NewStringUTF(strJavaClassPath.c_str()));

    for ( std::vector<std::string>::iterator iter = m_ServerArguments.begin(); iter != m_ServerArguments.end(); ++iter) {
        std::string argument = *iter;
        m_JVMEnv->SetObjectArrayElement(jargs, argumentIndex++, m_JVMEnv->NewStringUTF(argument.c_str()));
    }
    m_JVMEnv->SetObjectArrayElement(jargs, argumentIndex, m_JVMEnv->NewStringUTF("-dir=E:\\Avinash\\personal\\work\\CreateJvm\\Debug"));    

    m_JVMEnv->CallStaticVoidMethod(m_CacheServerLauncherClass, m_MainMethodID, jargs);

    std::cout << "I am done with launching java program" << std::endl;
    m_RunningJVMInstance->DestroyJavaVM();
    CheckForJNIException(); 
```

`m_JVMEnv->CallStaticVoidMethod(m_CacheServerLauncherClass, m_MainMethodID, jargs);`此行之后程序控制不返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:00:46.213

您的 Java 代码将需要一个线程来运行，如果您想要另一个线程用于您的 C++ 代码，则必须创建一个。

# mysql - 在 MySQL 中使用 NHibernate guid.comb 主键时如何避免碎片？

> ID：11394305
> 
> 赞同：2
> 
> 时间：2012-07-09T11:39:32.723
> 
> 标签：mysql, sql-server, nhibernate

我正在将数据库从 Microsoft SQL Server 迁移到 MySQL/MariaDB。在 MSSQL 上，数据库`uniqueidentifier`对所有主键使用 (GUID) 数据类型。NHibernate 用于在数据库和应用程序之间映射数据，并`guid.comb`采用该策略生成 GUID，以避免聚集索引的碎片化。

MySQL 没有专用的 GUID 数据类型，新的数据库模式`BINARY(16)`用于所有标识符。无需对 NHibernate 映射进行任何更改，我就可以启动我们的应用程序，持久保存新实体并从 MySQL 数据库加载它们。伟大的！然而，事实证明，按顺序生成的 GUID 在`BINARY(16)`列中的排序非常不按顺序排列，从而产生不可接受的索引碎片。

阅读这个问题后，发现[MSSQL 有一种非常特殊的 GUID 排序方法](https://stackoverflow.com/questions/7810602/sql-server-guid-sort-algorithm-why)。这 16 个字节首先按最后 6 个字节排序，然后按倒序排列，而我的幼稚 MySQL 实现首先按第一个字节排序，然后是下一个字节，依此类推。

这引出了我的问题：如何避免 MySQL 数据库中的这种碎片，同时保留现有的 GUID 和`guid.comb`策略？我自己有一个解决方案的想法（发布在下面），但我不禁觉得我可能错过了一些东西。当然，其他人之前一定已经处理过这个问题，也许有一种简单的方法可以解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T11:39:33.583

正如[Alberto Ferrari 观察到的](http://sqlblog.com/blogs/alberto_ferrari/archive/2007/08/31/how-are-guids-sorted-by-sql-server.aspx)并[在 StackOverflow 上讨论的](https://stackoverflow.com/questions/7810602/sql-server-guid-sort-algorithm-why)，Microsoft SQL Server 通过按特定顺序比较字节来对 GUID 进行排序。由于 MySQL 将`BINARY(16)`“直接”排序，我们需要做的就是在读取/写入数据库时​​重新排序字节。

NHibernate 允许我们定义自定义数据类型，可用于数据库和对象之间的映射。我已经实现了一个`BinaryGuidType`, 能够根据 MSSQL 对 GUID 排序的方式对产生的字节进行重新[`Guid.ToByteArray()`](http://msdn.microsoft.com/en-us/library/system.guid.tobytearray.aspx)排序，并将它们重新排序为构造函数接受的格式[`Guid(byte[])`](http://msdn.microsoft.com/en-us/library/90ck37x3.aspx)。

字节顺序如下所示：

```
int[] ByteOrder = new[] { 10,11,12,13,14,15,8,9,6,7,4,5,0,1,2,3 }; 
```

将 a保存`System.Guid`到 a`BINARY(16)`是这样的：

```
var bytes = ((Guid) value).ToByteArray();
var reorderedBytes = new byte[16];

for (var i = 0; i < 16; i++)
{
    reorderedBytes[i] = bytes[ByteOrder[i]];
}

NHibernateUtil.Binary.NullSafeSet(cmd, reorderedBytes, index); 
```

将字节读回 a`System.Guid`如下所示：

```
var bytes = (byte[]) NHibernateUtil.Binary.NullSafeGet(rs, names[0]);
if (bytes == null || bytes.Length == 0) return null;

var reorderedBytes = new byte[16];

for (var i = 0 ; i < 16; i++)
{
    reorderedBytes[ByteOrder[i]] = bytes[i];
} 
```

[这里的完整源代码`BinaryGuidType`。](https://gist.github.com/3075912)

这似乎运作良好。在一个表中创建和持久化 10.000 个新对象，它们完全按顺序存储，没有索引碎片的迹象。

# ruby - 在 Mac 上安装 Ruby 1.9.3

> ID：11394308
> 
> 赞同：1
> 
> 时间：2012-07-09T11:39:42.313
> 
> 标签：ruby, macos, rvm

我在我的 Mac 上安装了 ruby​​ 1.9.2p320，我尝试更新它，但不知道如何更新，所以我使用*rvm*安装 ruby​​ 1.9.3，一旦安装完成，输入后`ruby -v`我仍然得到 ruby​​ 1.9.2p320。

## 更新

**感谢Simone Carletti**，我现在安装了 ruby​​ 1.9.3 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:44:47.590

使用 RVM 安装 Ruby 版本

```
$ rvm install 1.9.3 
```

然后切换到它

```
$ rvm use 1.9.3 
```

后一个命令可能是您忘记执行的命令。

您可能需要为您的项目配置一个[.rvmrc](https://rvm.io//workflow/rvmrc/)文件以记住这些设置。

关于另一个问题，您应该打开一个单独的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T07:04:57.047

您还可以安装使用**rbenv**来安装和管理不同版本的 Ruby。

**注意：**我对 rvm 没有任何意见。我只是注意到安装各种红宝石是一个不断的问题来源，无论是在堆栈溢出中还是在工作中！

**要求**

*   在这里，我假设您有[Homebrew](https://brew.sh/)。（如果您还没有安装它，请确保`/usr/local/`在安装完成后您的权限是正确的，否则您可能会遇到看起来很神秘的错误，这些错误不应阻止您安装 Ruby。）
*   `rvm implode`在安装 rbenv 之前运行。这将破坏 rvm。

**使用 Homebrew 安装 rbenv**

1.  更新自制软件。

    ```
     $ brew update 
    ```

2.  安装 rbenv。

    ```
     $ brew install rbenv 
    ```

3.  安装 ruby​​ 构建。

    ```
     $ brew install ruby-build 
    ```

4.  按照安装这些公式后列出的说明操作，以使其在您的 shell 中正确可用。

**安装 Ruby 1.9.3**

1.  查看可以安装的 Ruby 版本。

    ```
     $ rbenv install 
    ```

2.  安装一个。这篇文章的最新版本是`1.9.3-p194`.

    ```
     $ rbenv install 1.9.3-p194 
    ```

**使用 Ruby 1.9.3**

```
$ rbenv global 1.9.3-p194 
```

**重新散列 rbenv**

有时您需要 run `rbenv rehash`，例如当您安装具有操作系统本机扩展的 gem 时。

```
$ rbenv rehash 
```

使用 rbenv 可以做很多其他事情，比如在特定目录中使用特定的 Ruby，或者在 shell 中使用特定的 ruby​​。有关更多信息，请参阅相应的文档！

# grails - 动态计算一个 el 表达式

> ID：11394309
> 
> 赞同：3
> 
> 时间：2012-07-09T11:39:44.143
> 
> 标签：grails, groovy

如何在控制器中动态获取 el 表达式的值。对于等式。

```
class ElController {
  def index() = {
    def a = "\${1 + 3}"
    unknownElEvaluator(a) // ->"2"
    ....
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T11:47:12.100

您可以使用 Groovy SimpleTemplateEngine 做到这一点：

```
import groovy.text.SimpleTemplateEngine

def binding = [:]
def a = "\${1 + 3}"
String rslt = new SimpleTemplateEngine().createTemplate( a )
                                        .make( binding )
                                        .toString()
assert rslt == '4' // 4 not 2 as in your question 
```

尽管知道为什么要在控制器中执行此操作会很有趣...

或者，您应该能够添加：

```
def groovyPagesTemplateEngine 
```

到您的控制器（或者最好作为单独的服务类，因为您最终可能希望从代码中的多个位置执行此操作）

然后，从方法内部，执行：

```
def binding = [:]
def a = "\${1 + 3}"

String rslt = new StringWriter().with { writer ->
  groovyPagesTemplateEngine.createTemplate( a, 'myscript' )
                           .make( binding )
                           .writeTo( writer )
  writer.toString()
} 
```

# c# - 在复杂/单窗口 WPF 应用程序中使用 Thread 的最佳方式

> ID：11394314
> 
> 赞同：3
> 
> 时间：2012-07-09T11:40:00.867
> 
> 标签：c#, .net, wpf, multithreading, performance

我想知道改进我的 WPF 应用程序的最佳解决方案是什么。

我知道 WPF 会强制您在创建 UI 的线程上完成所有 UI 工作。这对我来说是个大问题，因为我的 UI 非常大而且我只有 1 个窗口，所以我不能每个窗口拆分 1 个线程。

当我进行平移和缩放时，每次都需要刷新所有内容，我的一个 CPU 使用率达到 100%，直到全部完成。

因此，我将尝试解释我的应用程序中的内容：

*   1 个窗口（屏幕大小）
*   虚拟面板，12000 px X 12000 px（我在其中进行平移和缩放）
*   大约 2000 个控件（按钮、开关和其他一些复杂控件）
*   在我的控件后面，我的背景有一个大位图，但我将我的背景拆分为我堆叠的 100 个较小的位图（因为 1 个 12k 像素 x 12k 像素的位图会使我的应用程序崩溃）
*   10 个虚拟显示器，连接到远程计算机（提供位图）并每 50 毫秒刷新一次内容
*   .NET 4.0，多点触控应用程序

所以只是我可以进行平移和缩放的应用程序（没有 10 个显示器），控件的数量有很多滞后，当我放置显示器时，它会加倍滞后......

我的应用程序需要大约 1.5 GB 的虚拟内存。

我搜索了尽可能使用调度程序来制作线程，但我没有找到我想要的......他们到处谈论 1 个线程/窗口......但我只有 1 个窗口，不知道该怎么做。

*   我不能分成更小的窗口。
*   我无法减少控件的数量或刷新时间。
*   我无法改变技术 (WPF)

所以这是真正的问题：**我在哪里可以创建新线程来帮助我的渲染时间？要将作业拆分到不同的 CPU...**

我发现他们谈论这个的不同网站......但没有回答我的问题：

[使用多个 UI 线程运行 WPF 应用程序](http://eprystupa.wordpress.com/2008/07/28/running-wpf-application-with-multiple-ui-threads/)

[MSDN](http://msdn.microsoft.com/en-us/library/ms741870.aspx)

[使用 WPF 调度程序](http://www.switchonthecode.com/tutorials/working-with-the-wpf-dispatcher)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:51:35.947

所以我对此进行了一些搜索。一个应用程序可以在不同的线程中创建不同的窗口或页面：一段代码取自[这里](http://eprystupa.wordpress.com/2008/07/28/running-wpf-application-with-multiple-ui-threads/)

```
 private void OnCreateNewWindow(
  object sender,
  RoutedEventArgs e)
  {
    Thread thread = new Thread(() =>
    {
      Window1 w = new Window1();
      w.Show();

      w.Closed += (sender2, e2) =>
      w.Dispatcher.InvokeShutdown();

      System.Windows.Threading.Dispatcher.Run();
    });

   thread.SetApartmentState(ApartmentState.STA);
   thread.Start();
  } 
```

所以这是个好消息。但在你的情况下，这并不适用，因为你有一个窗口，我试过这个它并没有真正起作用：

```
 private void OnCreateNewWindow(object sender, RoutedEventArgs e)
     {
       SynchronizationContext syncContext = SynchronizationContext.Current;
       var btn = sender as Button;
       var st = btn.Parent as StackPanel;

       Thread thread = new Thread(() =>
         {
            Button button = new Button();
            syncContext.Post(delegate { st.Children.Add(button) ;}, null); //Exception here
         });

        thread.SetApartmentState(ApartmentState.STA);
        thread.Start();
     } 
```

我试图在不同的线程中创建一个单独的控件，它可以工作，但是当我尝试将它添加到 stackPanel 时它失败了 `InvalidOperationException`

我知道它不会直接回答你的问题，但我至少你知道，同一个控件中的所有控件都`Window`必须属于同一个线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T12:02:07.170

听起来您最需要使用虚拟化技术。用户在任何时候都只能看到虚拟工作空间的一小部分，所以你应该只刷新那部分。

除此之外，你有没有介绍过？究竟是什么与你的 CPU 挂钩？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T20:08:16.417

我会“伪造”这些控件，并在缩放时将它们绘制到背景中。您甚至可以绘制看起来像控件的小图像。当使用较小（缩放）的背景时，您可以加快缩放速度。然后准备好后，我无法想象需要同时使用 2k 个控件，因此只能重新绘制或添加可以看到/操作的控件。计算每个控件的 x,y 并检查它们是否存在于 viewrectangle 中并绘制它们，比绘制它们要快得多。

大多数壮观的图形都是用这些技巧完成的。

# php - 在正则表达式中使用 preg_match() 表达式时的未知修饰符“v”

> ID：11394323
> 
> 赞同：1
> 
> 时间：2012-07-09T11:40:24.923
> 
> 标签：php, regex

```
 $regex = '/\b'.$keyword.'\b/i'; // case insensitive match
        if (preg_match($regex, $linkedin_html) == 0)
        {
            $this->_htmlValidationFailed++;
            continue;                
        } 
```

当我使用此代码时..我收到错误作为未知修饰符'v'..

请让我知道是什么问题并帮助我纠正。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T11:44:25.983

```
<?php
$keyword = preg_quote( $keyword, '/' );

$regex = '/\b'.$keyword.'\b/i'; // case insensitive match
if (preg_match($regex, $linkedin_html) == 0)
{
   $this->_htmlValidationFailed++;
   continue;                
} 
```

# json - 如何将 Map[String, Any] 转换为 Json？

> ID：11394329
> 
> 赞同：1
> 
> 时间：2012-07-09T11:40:48.543
> 
> 标签：json, scala, lift

我已经调用了 JObject：

```
jObject.values 
```

所以我得到地图[字符串，任何]。我修改了这张地图并获得了 Map[String, Any] 的新实例。现在我不会实现与“值”方法相反的东西：我不会将我的 Map[String, Any] 转换为 JObject（或 json 字符串）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:48:59.680

这有点棘手，因为通过调用`.values`您会丢失与字段关联的类型信息（因此为什么映射的值类型是`Any`）。

为了获得 a `JObject`，您需要将 a 传递给`List[JField]`构造函数。因此，您需要将每个地图条目 ( `(String, Any)`) 转换为`JField`. 映射名称很简单；挑战是将 a 转换`Any`为`JValue`.

您可能可以通过模式匹配或类型检查来做一些事情（例如，如果值是 an `Int`，则将其强制转换为 int 并包装在 a 中`JInt`），但是与所有不完整的模式匹配一​​样，这将是脆弱的 - 你怎么办非原始人以它们出现的方式将它们包裹起来？

* * *

所以我建议一般来说，最好的方法是*不要*尝试从输出中执行此操作，`.values`而是将对象传递给自身。一旦您丢失了类型信息，就很难确定地找回，而且几乎任何解决方案都必然涉及脆弱的猜测。

# ios - 如何从坐标中获取本地化街道名称？

> ID：11394330
> 
> 赞同：3
> 
> 时间：2012-07-09T11:40:55.020
> 
> 标签：ios, localization, reverse-geocoding

我使用 CLGeocoder 从地理坐标中获取地址。

```
self.geocoder = [[CLGeocoder alloc] init]; 
///

[self.geocoder reverseGeocodeLocation:loc completionHandler:^(NSArray *placemarks, NSError *error) {
      if (placemarks.count) {
             CLPlacemark *placemark = [placemarks objectAtIndex:0];

             NSString *string = ((NSString *)[[placemark addressDictionary] objectForKey:kABPersonAddressStreetKey];
     }
}]); 
```

据我了解，CLGeocoder 在“本地”本地化中返回街道名称（如果我们在乌克兰并选择乌克兰语言环境 - 我们将获得乌克兰本地化的街道名称）。

此代码返回我的字符串，本地化为我当前的位置（乌克兰）。如果语言环境设置为另一个位置，它会给我街道的英文本地化名称。如何强制 CLGeocoder 只在特定位置给我地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:54:44.637

不幸的是，我对此一无所知`GLGeocoder`，但我过去曾将[Google Maps API](http://maps.googleapis.com/maps/api/geocode/json?latlng=57.5,12.3&sensor=true&language=uk)用于此类事情，恕我直言，效果非常好。

# mysql - 为多个表在数据库上设置特定于列的用户权限

> ID：11394333
> 
> 赞同：0
> 
> 时间：2012-07-09T11:41:16.183
> 
> 标签：mysql, sql

我正在尝试为一所学校开发一个门户，教师可以在其中输入学生的分数，甚至监控他们所教的各个班级的表现。我的数据库结构如下：

每个类（部门）一张表，带有字段，

`Name` `Roll_no` `Total-Marks` `Subject1` `Subject2`...

Query_1：现在，如果有一位老师教 XA 班的科目`Subject1`，比如说。如何为老师创建用户名并限制她只能对列进行更改`Subject1`？

Query_2：教师应该能够使用她想要的用户名和密码从任何地址登录数据库。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:00:56.983

Q1：你可以有一个权限表，每次老师访问一个表时，你都可以在那里检查它们是否被允许。

Q2: select * from TeacherTable where username='username' and password='password'

我想你有界面，如果你从任何地方说，我会认为是一个网络界面，所以它应该很容易实现。

# android - ImageView 缩放+平移动画

> ID：11394340
> 
> 赞同：2
> 
> 时间：2012-07-09T11:42:04.450
> 
> 标签：android, android-imageview, scale, translate-animation

我正在尝试实现一个非常复杂的动画：我在 ScrollView 中有一个缩小的图像，当我点击它时，我希望它缩放到它的真实 X 和 Y + 最终位于顶部ScollView 并在屏幕中居中。

所以，第一个问题：有没有办法设置一个缩放动画的开始和结束，以及 dp 中的高度？

而且，第二个问题：有没有办法设置带有开始和结束容器视图的翻译动画？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:13:29.233

动画通常使用像素大小参数，但您可以使用静态方法轻松地将 dp 转换为像素：

```
public static int dpToPixels(Context context, float dp) {
    final float scale = context.getResources().getDisplayMetrics().density;
    return (int) (dp * scale + 0.5f);
} 
```

关于你的第二个问题，我不认为动画可以超越它的原始观点。

# javascript - 如何根据特定条件向表中插入数据

> ID：11394344
> 
> 赞同：1
> 
> 时间：2012-07-09T11:42:22.297
> 
> 标签：javascript, sql, sqlite, insert

我有 3 张桌子：`TimeTable`, `Subject`, `WeekDay`.

该`TimeTable`表具有以下字段：`SubjectId`, `WeekDayId`。

我想向`TimeTable`表中插入值，但数据来自名称，而不是`id.s`，所以我想执行这个语句：

```
Insert into TimeTable SubjectId , WeekDayId 
Select WeekDay.WeekdayId , Subject.SubjectId from weekday , Subject 
Where Subject.SubjectName=IPSubjectName And Weekday.WeekDayName=IPWeekDayName 
```

现在我有两个问题：

1.  这个语句在 sqlite 中可用吗（我写对了吗）？

2.  我怎样才能动态地输入这些值（IPSubjectName、IPWeekDayName）。
    ie 如果我有 var SubjectName, var WeekDayName，那么该语句将如何编写？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:51:00.427

1.  是的，我认为您编写的语句在 SQLite 中可用。
2.  我假设您编写了一个调用此查询的 PHP 函数，在这种情况下，您的变量名将变为`$SubjectName`and `$WeekDayName`。然后，您的代码将变为：

    ```
    Where Subject.SubjectName=$SubjectName AND Weekday.WeekDayName=$WeekDayName 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:18:08.137

Pass the values as parameters in the function where you are executing the query and replay the right hand side clause with `${paramname1}` and `${paramname2}`.

# c# - 如何更改我要使用的 JIT 类型

> ID：11394345
> 
> 赞同：6
> 
> 时间：2012-07-09T11:42:23.810
> 
> 标签：c#, .net, jit

我试图了解如何配置我想要使用的 JIT 类型。

比如说，我知道 JIT 有 3 种类型（Pre、Econo 和 Normal）。但是有以下奇怪的问题。

1.  .NET 在部署服务器中运行的默认 JIT 是什么？

2.  如果默认是正常的，我们是否可以灵活地更改设置以使用 pre 或 econo。如果是这样我可以在哪里改变这个？

不确定，如果此设置在 machine.config 或其他内容中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T13:54:06.510

我以前从未听说过“Econo jit”。我确实看到了 google 链接，它们都指向谈论 .NET 1.x 的旧文章。“经济”部分似乎是通过不尽可能优化生成的机器代码和跳过 IL 验证来实现的。

自 .NET 2.0 以来，此选项肯定不再存在。只有一种抖动，IL 总是经过验证，但可以关闭优化。就像在程序的调试版本中一样，[Debuggable] 属性控制它。有不同*种类*的抖动，Microsoft 提供的抖动可以针对 x86、x64 或 ARM 处理器。但这是一个逻辑上的区别，不同的处理器需要不同的机器代码。抖动选择是自动的。关闭优化几乎没有意义。

“Pre jit”仍然存在，您使用 ngen.exe 预编译您的程序集。它使用与在运行时生成代码的抖动完全相同的抖动。它改善了程序的热启动时间，但它并不总是最好的解决方案，因为生成的代码效率不高，并且会减慢冷启动速度。使用 ngen.exe 需要编写一个安装程序，在安装时在用户机器上运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:47:03.750

您的意思是像这样更改 JIT 编译器的编译器选项吗？

[有什么方法可以更改 .NET JIT 编译器以提高性能而不是编译时间？](https://stackoverflow.com/questions/98624/is-there-any-way-to-change-the-net-jit-compiler-to-favor-performance-over-compi)

还是您的意思是使用与.net 附带的完全不同的编译器？我不知道这是可能的。例如，如果您在 .net 旁边安装了单声道，则需要使用单声道显式启动，这不是正在运行的 .net 程序集可以决定的事情。

# git - 使用 GitHub 桌面客户端进行上游拉取

> ID：11394349
> 
> 赞同：16
> 
> 时间：2012-07-09T11:42:54.360
> 
> 标签：git, github, github-for-mac

我似乎找不到使用 GitHub 的 Mac 桌面客户端（当前为 1.2.13）执行“git pull upstream master”的选项。在命令行之外还支持吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-29T22:29:03.380

据我所知，Github 客户端不支持此功能。

解决此问题的方法可以将主存储库更改为您要使用的上游存储库，然后将存储库更改回您自己的存储库。

1.  转到设置选项卡
2.  将“主要远程存储库”更改为您要使用的上游存储库。
3.  按“更新遥控器”
4.  按“同步分支”
5.  将“主要远程存储库”更改回您使用的原始分叉存储库。
6.  按“更新遥控器”

你完成了。

![在此处输入图像描述](../Images/b30ccc77590d6fd22ab61ce5e1ab20bf.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T11:47:08.980

根据[mac客户端的主页](http://mac.github.com/)，“同步按钮”将对配置的远程仓库执行此操作。

> **同步分支**
> 
> 同步按钮将您的更改推送到 GitHub 并在一次操作中拉下其他人的更改。当您有尚未推送的更改或 GitHub 上有您尚未拉下的新更改时，它会通知您。

我找不到使用当前版本的客户端（版本 1.2.13 (b919fb2)）支持多个遥控器的方法，但在紧要关头，我想您可以更改左侧“设置”下的“主要远程存储库”侧边栏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-08T21:05:47.860

使用最新版本的 GitHub 客户端（至少是 Mac 版本）可以做到这一点，但这并不是特别容易。

该过程涉及将主版本作为第二个分支同步到您的计算机，然后向您自己发出拉取请求。我写了一篇博客文章来解释如何做到这一点，这已经足够令人费解了：

[http://prolatio.blogspot.com/2015/08/merge-upstream-into-your-fork-in-github.html](http://prolatio.blogspot.com/2015/08/merge-upstream-into-your-fork-in-github.html)

[编辑：GitHub 桌面应用程序的最新 Beta 版于 2015 年 8 月 12 日发布，使执行此操作变得更加容易。这个答案很快就会过时。]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-27T13:09:30.380

这是我这样做的方式...

首先，在 repo 根目录启动一个终端窗口

[![在 repo 根目录启动终端窗口](../Images/e77cf90a20e89bb27bb1d7d76a5b5a55.png)](https://i.stack.imgur.com/EKw1G.png)

然后您可以运行`git remote -v`以检查当前已连接的遥控器。在这里我可以看到源代码库是按名称引用的`upstream`

[![在此处输入图像描述](../Images/dcbe03b941078107fb151fbd92a8e607.png)](https://i.stack.imgur.com/HjDXg.png)

然后你可以拉入你当前的本地分支`git pull <remote> <branchname>`

[![在此处输入图像描述](../Images/d512c3f79ef13a4bbde9e566910ecbed.png)](https://i.stack.imgur.com/WcREi.png)

或者，要将分支索引和工作树重置为上游远程的最新提交，只需使用`git reset --hard upstream/master`

[![在此处输入图像描述](../Images/7865e18d0c8184dda48b63f6a02300fb.png)](https://i.stack.imgur.com/5OJSL.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-21T16:18:12.627

GitHub Desktop 会获取`upstream`您 fork 中的所有分支，因此您应该会看到它们在分支列表中显示为`upstream/<branch>`.

您可以在使用 GitHub Desktop 中的合并分支功能将来自上游的更改合并到您的 fork 中时选择这些分支。

# xpages - 回复历史 Xpages 怎么样？

> ID：11394351
> 
> 赞同：3
> 
> 时间：2012-07-09T11:43:02.577
> 
> 标签：xpages

我将创建一个简单的 Reply-With-history 函数，该函数从带有 RichText 控件（使用 CkEDITOR）的 XPages 打开另一个具有前一页历史记录的 XPages（richtext + 附件 + 图像等......）

我认为这是可能的..但我不知道正确的方法。

有人有什么建议吗？

Tnx 给所有人

PS 认为您有一个入站电子邮件文档，并且您创建了按钮**回复历史和附件**...Inotes 使用 CkEditor 打开一个新网页，在正文中有入站邮件...并进入附件实用程序（我认为是 DownloadControl）有 Inboud 文档的附件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:38:26.830

这样的事情会添加一个受当前文档约束的父文档

```
var content = <richTextControl>.getValue();
if(dominoDoc.isResponse())
{
    var doc = database.getDocumentByUNID(dominoDoc.getParentId());
    content += "\n\n";
    content += "=================== Previous: ==================";
    content += doc.getItemValueString("content");
} 
```

所以这将获得当前内容，添加 2 行空格，添加一行以显示结尾，然后是其父内容。根据您的用例，可能会将其放入范围变量中，然后单击按钮将其添加到当前文档中。

**编辑：**

如果你想处理一个字段的附件，你可以使用下面我重复使用的代码来遍历附件列表并返回链接。供您使用，您可能需要将其更改为使用 for 循环

```
var al:java.util.list = dominoDoc.getAttachment("Body");
var eo:NotesEmbeddedObject = "";
if(!al.isEmpty())
{
   eo = al.get(index);
   return eo.getHref();
}
else
{
   return "";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T19:21:59.123

使用 Notes 文档的 Mime 方法，您将文档的内容作为 MIME（如果您忘记了，请跟我说：互联网上没有 RichText，这是圣诞节过去的幽灵。只有 MIME）。然后你检查你有什么：HTML 或纯文本。如果它是纯文本，那么您只需执行与上面类似的字符串连接，但使用 MIMEPart 而不是 itemValueString。当它是 HTML 时（正如您的问题所暗示的那样），使用解析器读取它（例如 HTMLCleaner 可以很好地读取 HTML），然后在遇到 body 标记后插入您的新内容。然后阅读其余部分并将 MIME 写回。会做一个很好的豆子。

# apache - Win XP 上的 Mercurial 错误

> ID：11394353
> 
> 赞同：0
> 
> 时间：2012-07-09T11:43:10.773
> 
> 标签：apache, mercurial, windows-xp

所以在 Windows XP 和 Mercurial 上有一个 Apache 服务器。当我尝试连接到 mercuraial throw 浏览器时，出现以下错误：

```
[Mon Jul 09 15:15:42 2012] [error] [client 141.206.207.61] Premature end of script headers: hgweb.cgi
[Mon Jul 09 15:15:42 2012] [error] [client 141.206.207.61] Traceback (most recent call last):\r
[Mon Jul 09 15:15:42 2012] [error] [client 141.206.207.61]   File "C:/Program Files/Apache Software Foundation/Apache2.2/htdocs/hgweb.cgi", line 16, in <module>\r
[Mon Jul 09 15:15:42 2012] [error] [client 141.206.207.61]     from mercurial import demandimport; demandimport.enable()\r
[Mon Jul 09 15:15:42 2012] [error] [client 141.206.207.61] ImportError: No module named mercurial\r
[Mon Jul 09 15:15:42 2012] [error] [client 141.206.207.61] File does not exist: C:/Program Files/Apache Software Foundation/Apache2.2/htdocs/favicon.ico 
```

由于我是这方面的新手，我不知道我应该做什么或阅读。所以你能帮帮我吗？

* * *

[更新 07\11\12]

我添加了 Mercurial\Lib 的链接。现在它显示另一个错误：

```
[Wed Jul 11 11:15:54 2012] [error] [client 141.206.207.61] Premature end of script headers: hgweb.cgi
[Wed Jul 11 11:15:54 2012] [error] [client 141.206.207.61] Traceback (most recent call last):\r
[Wed Jul 11 11:15:54 2012] [error] [client 141.206.207.61]   File "C:/Program Files/Apache Software Foundation/Apache2.2/htdocs/hgweb.cgi", line 23, in <module>\r
[Wed Jul 11 11:15:54 2012] [error] [client 141.206.207.61]     wsgicgi.launch(application)\r
[Wed Jul 11 11:15:54 2012] [error] [client 141.206.207.61]   File "mercurial\\hgweb\\wsgicgi.pyc", line 76, in launch\r
[Wed Jul 11 11:15:54 2012] [error] [client 141.206.207.61]   File "mercurial\\hgweb\\hgwebdir_mod.pyc", line 147, in __call__\r
[Wed Jul 11 11:15:54 2012] [error] [client 141.206.207.61]   File "mercurial\\hgweb\\hgwebdir_mod.pyc", line 177, in run_wsgi\r
[Wed Jul 11 11:15:54 2012] [error] [client 141.206.207.61]   File "mercurial\\hgweb\\hgwebdir_mod.pyc", line 371, in templater\r
[Wed Jul 11 11:15:54 2012] [error] [client 141.206.207.61]   File "mercurial\\templater.pyc", line 392, in stylemap\r
[Wed Jul 11 11:15:54 2012] [error] [client 141.206.207.61] RuntimeError: No hgweb templates found in []\r
[Wed Jul 11 11:15:54 2012] [error] [client 141.206.207.61] File does not exist: C:/Program Files/Apache Software Foundation/Apache2.2/htdocs/favicon.ico
    enter code here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:38:22.503

那是在告诉你 Mercurial 没有安装——至少它不在`PYTHONPATH`你的 python 实例正在使用的那个中。您似乎没有按照此处的说明将 Mercurial 库文件正确添加到您的 python 路径中：

[https://www.mercurial-scm.org/wiki/HgWebDirStepByStep/#Mercurial_Lib_Files](https://www.mercurial-scm.org/wiki/HgWebDirStepByStep/#Mercurial_Lib_Files)

# java - 使用导入的 JAVA 中的 xml 文件运行 selenium 测试

> ID：11394357
> 
> 赞同：0
> 
> 时间：2012-07-09T11:43:34.137
> 
> 标签：java, selenium, selenium-ide

我想通过使用 Firefox Selenium IDE 在 JAVA 中生成的 xml 文件来运行 selenium 测试。假设我们从 Selenium IDE 生成 xml 文件。在这一代之后，需要在 JAVA 中以 xml 格式运行这个记录的测试。有没有办法在不解析的情况下导入这个 xml 文件并作为 JAVA 代码运行？其实我想把JAVA理解为selenium测试并运行。

感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:09:46.227

*   在 Firefox 中安装 Selenium IDE 附加组件。
*   在 Selenium IDE 中打开该 xml 文件。
*   现在在 Selenium IDE 中，选择“File >> Export Test Case As >> JUnit 4 (Remote Control)/JUnit 3 (Remote Control)”选项。
*   将该脚本另存为 .java 文件
*   然后您可以在 Eclipse 中运行该 .java 脚本文件。

# java - 文档格式转换为文本

> ID：11394360
> 
> 赞同：0
> 
> 时间：2012-07-09T11:43:46.263
> 
> 标签：java

我正在寻找的是一个可以转换word文件格式的文本转换库，pdfs

但是在文本转换后保留它们的格式结构表格结构丢失并且文档变得扭曲

例如

姓名 emailid 电话号码在表格中并在表格中形成一行

转换后，这些在单独的行中，例如
name
emailid
phonenumber

我希望这些以姓名 emailid 电话号码的形式出现

目前我正在使用 apache tikka 它使用 apache poi 我该如何实现这一点

如果可以，我可以逐个元素解析 msword 文档吗？请分享一个例子

问候

拉贾特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:50:49.973

您可以使用[APACHE POI](http://poi.apache.org/index.html) 和 pdf [PDF READ 阅读.doc .dox 的内容](http://www.gnostice.com/nl_article.asp?id=101&)

然后您可以将该内容写入文本文件

# servlets - 显示图像 JSF

> ID：11394361
> 
> 赞同：1
> 
> 时间：2012-07-09T11:43:52.410
> 
> 标签：servlets, jsf-2

我试图显示存储在本地磁盘上的图像但没有成功。

在我的 index.xhtml 中，我有：

```
<h:graphicImage id="image" value="#{tableData.imageTitle}" /> 
```

我按照[教程创建了一个新的 servlet](http://balusc.blogspot.fr/2007/04/imageservlet.html)

我的 web.xml：

```
<!-- JSF mapping -->
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>

    <!-- Image Mapping -->
    <servlet>
        <servlet-name>imageServlet</servlet-name>
        <servlet-class>package.ImageServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>imageServlet</servlet-name>
        <url-pattern>*.png</url-pattern>
    </servlet-mapping>

    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param> 
```

正如我所说，找不到图像（我的图像存储在“C:\Documents and Settings\user\images”）。

非常感谢任何反馈。谢谢！

**更新：**

我正在使用嵌入式 Jetty 和 JSF 2.0。

我的 ImageServlet 看起来像这样（我从教程中修改了一点 ImageServlet）：

```
/*
 * The Image servlet for serving from absolute path.
 */
public class ImageServlet extends HttpServlet {

    // Constants
    // ----------------------------------------------------------------------------------

    private static final int DEFAULT_BUFFER_SIZE = 10240; // 10KB.

    // Properties
    // ---------------------------------------------------------------------------------

    private String imagePath;

    // Actions
    // ------------------------------------------------------------------------------------

    public void init() throws ServletException {

        // Define base path somehow. You can define it as init-param of the
        // servlet.
        this.imagePath = "C:\\Documents and Settings\\user\\images";
        //this.imagePath = PlatformConfig.getProperty("LocalOperation.Images.Path", null);
        System.out.println("imagePath = " + imagePath);

        // In a Windows environment with the Applicationserver running on the
        // c: volume, the above path is exactly the same as "c:\images".
        // In UNIX, it is just straightforward "/images".
        // If you have stored files in the WebContent of a WAR, for example in
        // the
        // "/WEB-INF/images" folder, then you can retrieve the absolute path by:
        // this.imagePath = getServletContext().getRealPath("/WEB-INF/images");
    }

    protected void doGet(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {
        // Get requested image by path info.
        String requestedImage = request.getPathInfo();
        System.out.println("requestedImage = " + requestedImage);

        // Check if file name is actually supplied to the request URI.
        if (requestedImage == null) {
            // Do your thing if the image is not supplied to the request URI.
            // Throw an exception, or send 404, or show default/warning image,
            // or just ignore it.
            response.sendError(HttpServletResponse.SC_NOT_FOUND); // 404.
            return;
        }

        // Decode the file name (might contain spaces and on) and prepare file
        // object.
        System.out.println(imagePath);
        File image = new File(imagePath, URLDecoder.decode(requestedImage,
                "UTF-8"));

        // Check if file actually exists in filesystem.
        if (!image.exists()) {
            // Do your thing if the file appears to be non-existing.
            // Throw an exception, or send 404, or show default/warning image,
            // or just ignore it.
            response.sendError(HttpServletResponse.SC_NOT_FOUND); // 404.
            return;
        }

        // Get content type by filename.
        String contentType = getServletContext().getMimeType(image.getName());

        // Check if file is actually an image (avoid download of other files by
        // hackers!).
        // For all content types, see:
        // http://www.w3schools.com/media/media_mimeref.asp
        if (contentType == null || !contentType.startsWith("image")) {
            // Do your thing if the file appears not being a real image.
            // Throw an exception, or send 404, or show default/warning image,
            // or just ignore it.
            response.sendError(HttpServletResponse.SC_NOT_FOUND); // 404.
            return;
        }

        // Init servlet response.
        response.reset();
        response.setBufferSize(DEFAULT_BUFFER_SIZE);
        response.setContentType(contentType);
        response.setHeader("Content-Length", String.valueOf(image.length()));
        response.setHeader("Content-Disposition",
                "inline; filename=\"" + image.getName() + "\"");

        response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1.
        response.setHeader("Pragma", "no-cache"); // HTTP 1.0.
        response.setDateHeader("Expires", 0); // Proxies.

        // Prepare streams.
        BufferedInputStream input = null;
        BufferedOutputStream output = null;

        try {
            // Open streams.
            input = new BufferedInputStream(new FileInputStream(image),
                    DEFAULT_BUFFER_SIZE);
            output = new BufferedOutputStream(response.getOutputStream(),
                    DEFAULT_BUFFER_SIZE);

            // Write file contents to response.
            byte[] buffer = new byte[DEFAULT_BUFFER_SIZE];
            int length;
            while ((length = input.read(buffer)) > 0) {
                output.write(buffer, 0, length);
            }
        } finally {
            // Gently close streams.
            close(output);
            close(input);
        }
    }

    // Helpers (can be refactored to public utility class)
    // ----------------------------------------

    private static void close(Closeable resource) {
        if (resource != null) {
            try {
                resource.close();
            } catch (IOException e) {
                // Do your thing with the exception. Print it, log it or mail
                // it.
                e.printStackTrace();
            }
        }
    }
} 
```

我的豆子看起来像这样：

```
@ManagedBean
@SessionScoped
public class TableData {

    private String imageTitle = "Image_ON.png";

        public String getImageTitle(){
        return imageTitle;
    }
} 
```

我不明白为什么找不到图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T15:16:42.390

您已将 servlet 映射到后缀模式，而不是像您自己发现的教程中`*.png`那样的前缀模式。`/image/*`这样一来，[`request.getPathInfo()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getPathInfo%28%29)总会回来的`null`。你需要[`request.getServletPath()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getServletPath%28%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:34:05.537

我认为您应该尝试使用[Virtual directory](http://www.marceble.com/2009/07/virtual-directories-in-glassfish/)。它非常简单，无需创建任何类型的 servlet 等。

# visual-c++ - 我需要 msvcr100 符号（内部网络）

> ID：11394362
> 
> 赞同：0
> 
> 时间：2012-07-09T11:43:58.163
> 
> 标签：visual-c++

需要 msvcr100 符号来帮助调试崩溃。

在内部网络上工作 - 无法访问 Internet 符号服务器

win7(32)、VS2010

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:51:19.410

[下载 Windows 符号包](http://msdn.microsoft.com/en-us/windows/hardware/gg463028.aspx)。

# java - 如何从 Java 中的 BufferedImage 中获取 PlannerImage？

> ID：11394370
> 
> 赞同：0
> 
> 时间：2012-07-09T11:44:43.737
> 
> 标签：java, netbeans, platform

我在 java swing 的 netbeans 平台上为牙医制作桌面应用程序。现在我刚刚完成了我的应用程序的 GUI，我正在做图像处理。在这个过程中，我想要来自 BufferedImage 的 PlannerImage 对象。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:21:25.393

该`Java Adavanced Imaging`库有一个方法`javax.media.jai.PlanarImage.getGraphics()`，您可以使用它来将您的图像写入`.drawImage(.....)`：

[贾伊](http://docs.oracle.com/cd/E17802_01/products/products/java-media/jai/forDevelopers/jai-apidocs/javax/media/jai/PlanarImage.html#getGraphics%28%29)

# c# - 如何在 C# 中获取有关委托函数实例（如名称或包含类）的信息？

> ID：11394371
> 
> 赞同：3
> 
> 时间：2012-07-09T11:44:46.437
> 
> 标签：c#, delegates

我有一个委托功能

```
class FuncActivator {
  public delegate void DelFunc(string arg, string val);
} 
```

我保留该函数的实例，以便稍后在程序中同时启动（也在`FuncActivator`：

```
List<DelFunc> funcList = new List<DelFunc>();

public void KeepFunc(DelFunc delFunc) {
  funcList.Add(delFunc);
} 
```

现在我想获取有关实际委托名称的信息，或者至少是哪个类在此处传递了它。例如，在不同的班级

```
public class FunnyClass {
  public void FunnyFunc(string arg, string val) {
    //..Do stuff
  }

  public FunnyClass () {
    FuncActivatorInstance.KeepFunc(FunnyFunc);
  }
} 
```

我想从一个方法中`FuncActivator`列出我列表中所有代表的姓名或调用者（如“FunnyFunc”或至少“FunnyClass”）。那可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T12:10:41.700

这段代码：

```
public void PrintFuncs()
{
    foreach (var func in funcList)
    {
        Console.WriteLine(func.Method.Name);
        Console.WriteLine(func.Method.DeclaringType.Name);
    }
} 
```

印刷：

```
FunnyFunc
FunnyClass 
```

`FunnyClass`将自身添加到列表中的实例位于 at `func.Target`，如果您也想使用它。

Lambdas that are attached, since they are anonymous, will have an auto-generated method name. If a class was generated for it as well, it will have an auto-generated name as well. So just FYI, you won't always be able to have very readable strings from this.

# box2d - AndEngine 物理 Box2D 扩展

> ID：11394385
> 
> 赞同：2
> 
> 时间：2012-07-09T11:45:35.250
> 
> 标签：box2d, physics, andengine

我将 AndEngine 用于我的 android 游戏，我从 github 下载了 Master AndEngine，但没有 Master 的 Physics Box2D Extension。我不知道在哪里下载它或我可以使用它的哪个版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T12:01:21.273

如果您使用的是 nicolas 的 AndEngine 副本，请查看他在 GitHub 上的帐户。所有扩展都列在他的存储库下：[https ://github.com/nicolasgramlich](https://github.com/nicolasgramlich)

Box2DExtension 在这里：[https ://github.com/nicolasgramlich/AndEnginePhysicsBox2DExtension](https://github.com/nicolasgramlich/AndEnginePhysicsBox2DExtension)

如果您像我一样使用 RealMayo 的 AndEngine 分支，但是您还必须使用他的 PhysicsBox2DExtension 副本，该副本位于此处：[https ://github.com/RealMayo/AndEnginePhysicsBox2DExtension](https://github.com/RealMayo/AndEnginePhysicsBox2DExtension)

# python - 如何清理 Python 的环境

> ID：11394386
> 
> 赞同：0
> 
> 时间：2012-07-09T11:45:35.250
> 
> 标签：python

我有一个创建 Python 代码并运行它的应用程序。在此过程中，我想清除两个方法分配，因为它们在第二次运行中会产生错误：

```
push = Writer.Push  
...  
def appPush(self):
    push(self)
    dumpRow(self)
...  
Writer.Push=appPush 
```

这是我必须修复的遗留代码。如果你多次运行它，Python 会宣布存在递归。
我一直在寻找一种清除环境的方法，但 'os.system('CLS')' 没有帮助。我怎样才能清理这些作业？
谢谢。

编辑：
它是遗留代码。我还不是很熟悉。我的应用程序创建的 Python 代码包含一般内容（如我在上面发布的部分）以及将用户工作流程转换为 Python 的过程。如果用户创建的流程最终调用了“appPush”，则应用程序必须在运行 1 次后重新启动。
我可以在上面的代码之后添加东西。我正在寻找一种从这些任务中清除解释器环境的方法。可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:18:19.580

OK, I see what your problem is.

This code:

```
push = Writer.Push  
def appPush(self):
    push(self)
    dumpRow(self)
Writer.Push=appPush 
```

Would cause infinite recursion if `push` were ever changed to `appPush`. What you basically want there is a decorator, so if you could change that to:

```
def appPushCreator(func):
    def appPush(self):
        func(self)
        dumpRow(self)
    return appPush

Writer.Push = appPushCreator(Writer.Push) 
```

This would keep the implied semantics of doing another `dumpRow` every time you used that bit of code.

I don't think you can fix your error by only adding code *after* the broken bit. You can't 'clear the environment' and get your original `Writer.Push` back.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T12:15:02.137

像这样的东西应该工作：

```
real_push = None
if real_push is None:
    real_push = push
Writer.Push = real_push 
```

在损坏的代码之前放入代码可能会更好：

```
real_push = None
if real_push is None:
    real_push = Writer.Push
Writer.Push = real_push 
```

本质上，您正在尝试使代码具有*幂等*性，即多次运行它与运行一次具有相同的效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T12:56:27.273

您不能只`Writer.Push is appPush`在 Python 2.x 中进行测试，因为`Writer.Push`它被包装在一个未绑定的方法中，但是您可以访问属性`Writer.Push`并且它们会传递给原始函数。此外，如果您使用一个属性，这意味着如果您没有原始的补丁函数来测试也没关系。这意味着这应该有效：

```
def appPush(self):
    push(self)
    dumpRow(self)
appPush.is_patch = True
...

if not hasattr(Writer.Push, 'is_patch'):
    push = Writer.Push
    Writer.Push=appPush 
```

请注意，您希望将分配移动到`push`内部`if`以避免在代码第二次运行时覆盖它。

# android - Android 错误感知

> ID：11394389
> 
> 赞同：0
> 
> 时间：2012-07-09T11:45:50.927
> 
> 标签：android, bugsense

我在我的项目中集成了 bugsense-1.9.jar 并尝试将异常记录到 bugsense。这是我的代码：

```
try {
           // your code
           int a = 1/0; // this will raise an exception
        } catch (Exception e) {
           BugSenseHandler.log("Divide by zero exception", e);
           //throw new RuntimeException("exception requested by user");
           Log.i("errrr logg:",""+e);
           BugSenseHandler.readLogs(); 
        } 
```

它向我显示 {"data": [], "error": null} 而不是下面显示的错误日志

```
Looking for exceptions in: /data/data/com.Narolainfotech.MyShortSaleScore/files
07-09 16:59:04.561: D/BugSenseHandler(15399): Found 0 stacktrace(s)
07-09 16:59:04.561: D/BugSenseHandler(15399): Transmitting log data
07-09 16:59:04.571: D/BugSenseHandler(15399): Transmitting stack trace:java.lang.ArithmeticException: divide by zero
07-09 16:59:04.571: D/BugSenseHandler(15399):   at          android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2685)

07-09 16:59:22.781: D/BUGSENSE(15399): {"data": [], "error": null} 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:18:10.687

ReadLogs 仅适用于企业计划。你有吗？

请务必添加到您的清单：

```
<uses-permission android:name="android.permission.READ_LOGS" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T10:34:36.283

请记住，`READ_LOGS`自 Jelly bean 以来，权限仅限于有根设备。

# python - PyGame wormy - 带有坏苹果的线程

> ID：11394390
> 
> 赞同：1
> 
> 时间：2012-07-09T11:46:03.637
> 
> 标签：python, multithreading, pygame

我正在用 PyGame 开发一个小型蠕虫程序。我有一条虫子吃苹果，每次它吃一个苹果就长。当它遇到自己的尾巴或窗户边缘时，它“游戏结束”。我想随机添加有毒的坏苹果。这些苹果出现在屏幕上的任何地方，在某个尚未被苹果占据的地方。相反，好苹果一次出现一个。当wormy吃掉一个苹果时，它会长一个，屏幕上会出现另一个苹果。所以，我想我应该在一个单独的线程中生产坏苹果。但是，我想在主线程中访问坏苹果的位置等，以便虫子在遇到坏苹果时死亡。

你知道怎么写吗？

我想在 main() 中有这个

```
# Start bad apples thread
threading.Thread(target=badApples).start() 
```

所以 main() 最终看起来像这样：

```
def runGame():
# Set a random start point.
startx = random.randint(5, CELLWIDTH-5)
starty = random.randint(5, CELLHEIGHT-5)
wormCoords = [{'x': startx,     'y': starty},
              {'x': startx - 1, 'y': starty},
              {'x': startx - 2, 'y': starty}]
direction = RIGHT

# Start the apple in a random place.
apple = getRandomLocation()

# Start bad apples thread
threading.Thread(target=badApples).start()

while True: # main game loop
    for event in pygame.event.get(): # event handling loop
        if event.type == QUIT:
            terminate()
        elif event.type == KEYDOWN:
            if (event.key == K_LEFT or event.key == K_a) and direction != RIGHT:
                direction = LEFT
            elif (event.key == K_RIGHT or event.key == K_d) and direction != LEFT:
                direction = RIGHT
            elif (event.key == K_UP or event.key == K_w) and direction != DOWN:
                direction = UP
            elif (event.key == K_DOWN or event.key == K_s) and direction != UP:
                direction = DOWN
            elif event.key == K_ESCAPE:
                terminate()

    # check if the worm has hit itself or the edge
    if wormCoords[HEAD]['x'] == -1 or wormCoords[HEAD]['x'] == CELLWIDTH or wormCoords[HEAD]['y'] == -1 or wormCoords[HEAD]['y'] == CELLHEIGHT:
        return # game over
    for wormBody in wormCoords[1:]:
        if wormBody['x'] == wormCoords[HEAD]['x'] and wormBody['y'] == wormCoords[HEAD]['y']:
            return # game over

    # etc... 
```

（主要来自[http://inventwithpython.com/](http://inventwithpython.com/)的代码）

和一个以 badApples 开头的目标方法

```
def badApples():
    time.sleep(random.randint(200,500))
    badApple = getRandomLocation() 
```

但是如何在主线程中恢复坏苹果的位置，以删除蠕虫？

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T12:02:56.233

您绝对不必为此使用线程。由于您可以控制游戏循环，因此您可以*安排*创建一个坏苹果（使用某种倒计时）。

创建一个变量，该变量将存储一个值，该值指示新的坏苹果何时出现，以及已创建的坏苹果列表。

```
def get_bad_apple_time():
    # create a bad apple every 5 to 15 seconds
    # assuming your FPS is 60 
    return random.randrange(5, 16) * 60 

#  all bad apple coordinates go here
bad_apples = []  

# timeout until the next bad apple shows up
next_bad_apple = get_bad_apple_time() 
```

在您的主循环中，减小 next_bad_apple 的值。如果达到`0`，则创建一个坏苹果并重新开始。

```
while True:
    ...
    next_bad_apple -= 1
    if not next_bad_apple:
        pos = getRandomLocation()

        # if there's already a bad apple on this position
        # create a new position
        while pos in bad_apples:
            pos = getRandomLocation()

        bad_apples.append(pos)
        next_bad_apple = get_bad_apple_time() 
```

# spring - 春季交易的检查点支持

> ID：11394391
> 
> 赞同：1
> 
> 时间：2012-07-09T11:46:08.990
> 
> 标签：spring, transactions

有没有办法在 Spring 管理的事务中设置检查点，如果出现问题，回滚应该只发生到最后一个检查点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:51:51.123

IMO 如果我们说 transaction 它必须是*all 或 none*。
回滚到检查点意味着我们正在执行部分事务。
不过，如果您想回滚到某个特定点，那么将任务转换为事务数将是一个不错的选择。（如果可以转换成多笔交易）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:33:01.130

您可以在 spring 中使用 SavePointManager 管理检查点。要首先使用它，您必须使用 TransactionTemplate 并进行程序化交易管理，以便您可以控制交易状态

[程序化交易](http://static.springsource.org/spring/docs/3.0.x/reference/transaction.html#transaction-programmatic)

然后使用 SavePointManager 方法创建检查点。

[保存点管理器](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/transaction/SavepointManager.html)

如果您想通过方面进行管理，那么使用客户注释和方面而不是 spring bean 将非常容易编写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T13:08:48.917

我赞同Ajinkya的回答。Spring 有一个独立于技术的事务抽象，并具有许多不同技术（Hibernate、JPA、JDBC 等）的实现，其中只有一些具有您似乎需要的特性。

Spring Transactions 保持简单，因此可以将持久层切换到新技术，而无需更改服务层中的任何内容。这种灵活性是以功耗为代价的，因为在所有支持的平台上只有最常见的事务隐喻可用。学会接受限制并将您的任务转换为几个子任务。

# java - 如何在后台从 Java 代码运行命令行？

> ID：11394394
> 
> 赞同：8
> 
> 时间：2012-07-09T11:46:13.470
> 
> 标签：java, command, runtime.exec

我有以下行来运行批处理文件，

```
Process process = Runtime.getRuntime().exec("cmd /c start rake.bat"); 
```

但我希望它在后台运行，而不是向用户显示命令行。我怎样才能改变它来做到这一点？

问题是命令窗口打开并插入程序 GUI。我只是希望命令窗口在执行批处理文件时不可见。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-09T11:56:39.033

完全删除“开始”会做你想做的事（因为这是创建窗口的原因）：

```
Process process = Runtime.getRuntime().exec("cmd /c rake.bat"); 
```

我已经对此进行了测试并且它有效，当然，如果您想与命令提示符进行通信，则必须具有输入和输出流，也不要忘记您的错误流如评论中所述，尽管删除 XP 上的“开始”无济于事（因为它不起作用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T11:52:09.970

我不太清楚你所说的“在后台”是什么意思

如果您只是说窗口不可见，那么[这个 SO 答案](https://stackoverflow.com/questions/289498/running-batch-file-in-background-when-windows-boots-up)可能有用。

如果（但是）你的意思是你希望你的 Java 程序在它执行时继续运行，那么你应该在一个[单独的线程](http://docs.oracle.com/javase/tutorial/essential/concurrency/)中生成它。

无论上述情况如何，请[小心捕获批处理文件的 sdtout/stderr](https://stackoverflow.com/a/882795/12960)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T11:49:49.463

```
Process process = Runtime.getRuntime().exec("cmd /c start rake.bat"); 
```

如果您从 java 进程中调用上述行来执行批处理文件。这将默认在后台运行。

# jquery - 从 jquery mobile transition fx 中排除 div

> ID：11394396
> 
> 赞同：1
> 
> 时间：2012-07-09T11:46:24.203
> 
> 标签：jquery, mobile

是否可以从 jquery mobile transition fx 中排除元素？例如，我有一个固定的工具栏，并且希望页面可以翻转，但工具栏除外。这可能吗？我在 jqTouch 中看到过类似的效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:52:34.737

你能展示一些代码，以便我们可以根据它制作一些小提琴吗？你可能会使用类似的东西

```
 $('.item').not('.exclude') 
```

# django - 用户资源 django tastepie 中的嵌套 UserProfile

> ID：11394398
> 
> 赞同：1
> 
> 时间：2012-07-09T11:46:31.330
> 
> 标签：django, api, tastypie

我正在使用 django tastepie 并且我正在尝试在我的用户资源中添加一个嵌套的 userprofile 资源：

我的代码：

模型（在 APP_FOLDER/models.py 中）：

```
class UserProfile(models.Model):
    user = models.OneToOneField(User, related_name='userprofile') 
```

资源定义（在 API/resources.py 中）：

```
class UserResource(ModelResource):
    userprofile = fields.ToManyField('api.resources.UserProfileResource', 'userprofile', full=True)

    class Meta:
        queryset = User.objects.all()
        resource_name = 'user'

class UserProfileResource(ModelResource):
    user = fields.ToOneField(UserResource,'user')

    class Meta:
        queryset = UserProfile.objects.all()
        resource_name = 'userprofile' 
```

当我尝试访问用户时，我得到：error_message：“'UserProfile' 对象没有属性'all'”。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:03:53.043

我想通了：我需要在 UserResource 中将 fields.ToManyField 更改为 fields.ToOneField，因为模型中的关系是一对一的。

# jsp - ext Js 中的 Window.open()

> ID：11394402
> 
> 赞同：0
> 
> 时间：2012-07-09T11:46:42.690
> 
> 标签：jsp, extjs, onclicklistener

我必须在 ext js 中按钮的单击事件中加载一个新的 jsp 页面。我把代码这样

```
 listeners: {
       'click': function(){
          alert("hai");
          window.open('<%=request.getContextPath()%>/jsp/dashboard/helpwindow.jsp','_blank','toolbar=0,location=0,directories=0,status=0,menubar=0,scrollbars=1,resizable=0,width=700,height=600');
       }
   } 
```

但这并没有给我结果。'<%=request.getContextPath()%>' 有问题。

现在打开带有 url 的新窗口

```
http://localhost:8080/hiring/%3C%=request.getContextPath%28%29%%3E/jsp/dashboard/helpwindow.jsp 
```

但我需要网址

```
http://localhost:8080/hiring/jsp/dashboard/helpwindow.jsp 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T03:35:37.400

```
listeners: {

  'click': function() {                 
       var serverPath = window.location.href;
       var serverPathIndex = serverPath.lastIndexOf("/");
       window.open(serverPath.substring(0, serverPathIndex) + '/jsp/dashboard/helpwindow.jsp','_blank','toolbar=0,location=0,directories=0,status=0,menubar=0,scrollbars=1,resizable=0,width=700,height=600');
   }
} 
```

# vb.net - Excel .Find，函数 VB 2010 的结果

> ID：11394404
> 
> 赞同：-1
> 
> 时间：2012-07-09T11:46:46.290
> 
> 标签：vb.net, excel

我正在尝试`.Find`在 VB 2010 中使用以查找函数的结果。

这是我的代码：

```
firstFind = xlWorkSheet.Range("E10", "CM10").Find(searchDate, ,     Excel.XlFindLookIn.xlValues, Excel.XlLookAt.xlPart, Excel.XlSearchOrder.xlByRows, Excel.XlSearchDirection.xlNext, False) 
```

我都试过了`xlValues`和`xlFormulas`。

excel函数非常简单，如下所示：

```
=G9+7 
```

结果是一个日期，7 月 19 日，这就是我想要搜索的内容。

BR塞巴斯蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:16:33.113

先说第一件事。Excel 将日期视为整数，因此 19-Jul 实际上是一个数字（将 =G9+7 的单元格设置为通用）例如日期 2012 年 7 月 19 日 = 41109。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:34:58.850

你不能循环遍历列而不是使用 find 函数吗？像这样的东西可能会更有效或更容易定制：

```
Sub Test()

    Dim iColumnSearch As Long
    Dim dtSearchDate As Date
    Dim rngFoundInCell As Range

    dtSearchDate = "7/16/2012"

    '- loop through columns E to CM (Column #'s 5 to 91)
    For iColumnSearch = 5 To 91
        If Cells(10, iColumnSearch).Value = dtSearchDate Then

            Set rngFoundInCell = Cells(10, iColumnSearch)
            Exit For
        End If
    Next iColumnSearch

    If Not rngFoundInCell Is Nothing Then '-if was found
        MsgBox "Found in cell: " & rngFoundInCell.Parent.Name & "!" & rngFoundInCell.Address(External:=False)
    End If

    Set rngFoundInCell = Nothing

End Sub 
```

更新：

请注意，上面的代码正在搜索日期“2012 年 7 月 16 日”，因为我没有看到您的搜索字符串所在的位置。您可以将该行替换为：

```
dtSearchDate = Range("G9").value + 7 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T11:04:31.667

这是我在不使用的情况下解决问题的方法`.find`

```
Const FOUND As Integer = 1, NOT_FOUND = 0
Dim worksheetNr As Integer = 0, columnNr As Integer, dateFound As Integer = NOT_FOUND

While worksheetNr < xlWorkBook.Worksheets.Count And dateFound = NOT_FOUND

    Try
        xlWorkSheet = xlWorkBook.Worksheets(worksheetNr)
        xlWorkSheet.Activate()
        columnNr = 7
        While dateFound = NOT_FOUND And (columnNr < 100)
            If (xlWorkSheet.Cells(10, columnNr).Value.Equals(searchDate)) Then
                dateFound = FOUND
            Else
                columnNr += 1
            End If

        End While

    Catch ex As Exception
        Console.Write("")
    End Try

End While 
```

# c++ - 如何发送 C++ winsock 获取请求？

> ID：11394405
> 
> 赞同：0
> 
> 时间：2012-07-09T11:47:01.583
> 
> 标签：c++, http-headers, winsock, bittorrent

我正在尝试编写一个 bittorrent 客户端，我需要弄清楚如何使用一些特定参数向跟踪器发送 HTTP GET 请求，这些参数可以在此处找到：http: [//jonas.nitro.dk/bittorrent/bittorrent-rfc .html#anchor18](http://jonas.nitro.dk/bittorrent/bittorrent-rfc.html#anchor18)

我想我只是了解如何打开套接字，但是如何在 Windows 上用 C++ 发送 GET 请求？

任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:14:27.693

当您的 TCP 套接字打开时，您需要发出 HTTP GET 请求。这实际上非常简单：您只需要通过套接字发送一系列文本行，如下所述：

[http://www.jmarshall.com/easy/http/#sample](http://www.jmarshall.com/easy/http/#sample)

您以空行结束您的请求。

然后你等待服务器回复，然后你交叉手指......

在您的情况下，所有参数都将在 GET 行中，URL 后面带有参数：

获取 url?param1=value1¶m2=value2¶m3=value3

# vb6 - 我可以在不使用 regasm 注册的情况下在 VB6 中使用 .NET dll 吗？

> ID：11394411
> 
> 赞同：1
> 
> 时间：2012-07-09T11:47:21.863
> 
> 标签：vb6

我有一个要在 vb6 项目中使用的 .net dll，我已经使用 regasm 注册了 dll，并在我的开发机器上的 vb6 项目中添加了对 dll 的引用。但是我想在不同的机器上运行该应用程序有没有办法在不使用 regasm 注册的情况下运行该项目？

请就此向我提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:13:34.570

使用免费注册 COM 和其他类似方法可以避免注册，但它们比仅注册文件要复杂得多。您对文件注册的反感是什么？无论如何，您都需要注册 VB6 运行时...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T11:59:13.880

我一直在你所在的地方。

我假设您将 .Net 类标记为 [ComVisible] 这意味着您需要在每台机器上使用 regasm！

从好的方面来说，我们发现我们能够使用 Powershell 和 PsTools 使用`-c`参数来复制 DLL，然后远程运行 regasm 工具来简化`\\*`此操作。您可以使用它来枚举域中的计算机。

一些有用的链接如下：

[我可以使用 *.tlb 文件而不使用 Regasm 在计算机上注册它吗](https://stackoverflow.com/questions/10774685/can-i-use-a-tlb-file-without-using-regasm-to-register-it-on-the-computer)

[PsTools](http://technet.microsoft.com/en-us/sysinternals/bb896649.aspx)

[PsExec 说明](http://technet.microsoft.com/en-us/sysinternals/bb897553)

[PSExec 所需的端口](http://jamesrayanderson.blogspot.co.uk/2010/04/psexec-and-ports.html)

# java - 使用 Jython 编译应用程序

> ID：11394412
> 
> 赞同：1
> 
> 时间：2012-07-09T11:47:22.497
> 
> 标签：java, python, compilation, jython

我在 Python 中编写了一些使用 Java 库的代码，并使用 Jython 对其进行了解释，但它有点慢。我可以在每次启动脚本时以某种方式编译此代码而不是解释它吗？（我读过关于 jythonc 但在新版本的 Jython 中已弃用）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T12:46:47.330

# Jython、javac 和 jythonc

Jython 总是在启动时编译您的应用程序——即，如果您启动您的应用程序，那么 Python 代码将被编译为 Java VM 字节码；VM 然后执行这个字节码。Jython 和 javac 之间的区别在于 javac 创建包含字节码的 .class 文件，而 Jython 在运行时创建字节码。

jythonc 对 Python 代码的处理与 javac 对 Java 代码的处理相同：它将代码编译为 .class 文件并将其保存到磁盘。在性能方面，这并不比 Jython 的标准行为好，但它使得在其他 JVM 语言中使用/扩展 Jython 代码成为可能。

**jythonc 不会以任何方式提高程序的性能。**

# 提高性能

使用[分析器](http://java-source.net/open-source/profilers)来检测代码的热点。探查器将向您显示您的程序花费大部分时间的信息：

![NetBeans Profiler 的示例输出显示 Anagrams 的构造函数占用了应用程序运行时间的 70% 以上。](../Images/31468a8cd50f68bdcdd33944816c007f.png)

一旦了解了应用程序的热点，您就会知道如何优化其性能。在上面的截图中，应用程序 70% 以上的时间都花在了构造函数 ( `<init>`) 中。

然后，您可以使用多种技术来提高性能：

1.  使用更好的算法。如果适用，这对性能的影响最大。

2.  交易执行时间换取空间。缓存您经常调用的函数的结果，尤其是当它们相对较慢时——例如通过数据库或网络访问检索的数据。

3.  用较少开销的语言重新实现热点。在您的情况下，您可以在 Java 中重新实现热点并从 Jython 调用它们。

# android - 如何在android中隐藏我的应用程序窗口？

> ID：11394416
> 
> 赞同：2
> 
> 时间：2012-07-09T11:47:56.263
> 
> 标签：android, window

如何以编程方式隐藏我的应用程序窗口？

可能吗？

```
setContentView( R.layout.screen1 ); 
```

此编码启动应用程序窗口。如何隐藏此窗口。可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T11:50:42.453

试试这个，

**MainActivity.java**

```
 public class MainActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        // Put you code to hide the layout
        RelativeLayout mLayout = (RelativeLayout) findViewById(R.id.mainLayout);
        mLayout.setVisibility(View.GONE);
    }
} 
```

**activity_main.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/mainLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="96dp"
        android:text="Button" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T11:52:10.997

是的，有可能。为 screen1 布局的父窗口提供一个 id，例如：

```
android:id="@+id/main_layout" 
```

当你想隐藏它时，写如下：

```
final LinearLayout mainLayout = (LinearLayout)findViewById(R.layout.main_layout); // assuming its a LinearLayout

mainLayout.setVisibility(View.GONE); 
```

# delphi - GpSysHook dll 被检测为病毒

> ID：11394419
> 
> 赞同：0
> 
> 时间：2012-07-09T11:48:35.077
> 
> 标签：delphi

我们使用[GpSysHook](http://17slon.com/gp/gp/gpsyshook.htm)在我们的软件中记录键盘和鼠标事件。不幸的是，一些反病毒程序将钩子 dll 检测为病毒，这很容易被[VirusTotal](https://www.virustotal.com/)证明。有人知道如何更改 dll 以使其不再被检测为病毒吗？我已经尝试使用 upx 打包但没有成功。

更新：根据@David 和@Shamballa 的建议，我联系了 McAfee。到目前为止，唯一的回复是一封自动回复邮件，告诉我 GpSysHookDll.dll 确实是恶意软件，并且他们的签名数据库中有它。显然没有人真正看过我的邮件。所以我必须自己做点什么，事实上，经过一些小的改动，McAfee 不再怀疑 GpSysHookDll 是恶意软件。我从来没有想过欺骗病毒扫描程序是多么容易。我不想在这里回答我所做的事情的原因是因为它最终可能会帮助坏人开发令人讨厌的软件（尽管我认为他们现在已经有了那些简单的技巧）。我宁愿与原作者联系我的更改，以便他可以更新他原本出色的钩子组件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-04T03:41:51.563

Virusscanners 使用签名工作。
通常使用（全部或部分）程序或 dll 的哈希。然后将哈希值与病毒软件中的哈希表进行比较。

**简单的更改将更改哈希并禁用警告。**
Virusscan 技术多年来一直停滞不前，尽管 AntiVirus 生产商在市场上宣称。

没有启发式扫描之类的东西......

如果你翻转一些东西，让 Delphi 产生不同的代码，你的哈希就会改变，匹配就会消失。

# jquery - jQuery Greyscale 插件与 jQuery Cycle 冲突

> ID：11394430
> 
> 赞同：0
> 
> 时间：2012-07-09T11:49:35.857
> 
> 标签：jquery, cycle

看看这个可爱的页面 - [http://subzerostudio.com/Clients/montecarlo/gallery2.php](http://subzerostudio.com/Clients/montecarlo/gallery2.php) -

我使用了这个插件 - [http://www.pryde-design.co.uk/2011/08/greyscale-jquery-plugin/](http://www.pryde-design.co.uk/2011/08/greyscale-jquery-plugin/) - （由 Andrew Pryde 编写）对图像进行灰度化，然后在悬停时将它们淡化为颜色。

这实际上很容易集成，并且是一个非常好的插件，但是当我尝试复制包含图像时，为了激活它们所在的 jquery 循环插件 - 灰度插件实际上崩溃了。演示可以在这里看到.. **http://subzerostudio.com/Clients/montecarlo/gallery2.php**

我查看了相关的 jquery 文件，但看不到任何提示为什么会发生这种情况，尽管我确信这是循环插件的结果。

关于如何让这种行为正常的任何想法？

# vbscript - 创建保持在顶部并阻止其他窗口的 vbscript 消息框

> ID：11394432
> 
> 赞同：5
> 
> 时间：2012-07-09T11:49:40.873
> 
> 标签：vbscript, messagebox

请帮助我创建一个始终位于顶部的消息框，并且用户不能使用其他窗口功能，例如调用开始菜单或与其他窗口交互，直到他按下消息框上的确定按钮。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T14:13:54.950

该`MsgBox`函数的第二个参数允许您指定对话框的选项。

```
MsgBox "Hello, World!", vbSystemModal 
```

有关更多信息，请参阅我的文章[掌握消息框](http://www.aspfree.com/c/a/VB.NET/Mastering-the-Message-Box/)。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2015-08-18T15:24:57.027

MsgBox "Hello, World!", +vbSystemModal

确保在 vbSystemModal 之前添加“+”

# php - 在 PHP 中只接收上传文件的块？

> ID：11394435
> 
> 赞同：0
> 
> 时间：2012-07-09T11:49:51.220
> 
> 标签：php

我正在制作一个简单的 PHP 脚本，让用户上传图片。这些图像非常大，所以我想显示一个进度条，以便用户知道上传的进度。

在这种情况下，重要的是我不要使用第三方脚本，只使用纯 PHP、HTML 和 Javascript（也没有 CGI，也没有客户端技术，如 Silverlight 或 Flash）。

我在 PHP 中找到了一些关于文件上传的文档，但仅在上传后如何处理最终上传的文件，而不是在收到文件时增量保存文件，这在我的特定场景中是必需的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:52:06.807

PHP v5.4 及更高版本具有对上传进度指示的内置支持...查看： http: [//php.net/manual/en/session.upload-progress.php](http://php.net/manual/en/session.upload-progress.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T12:34:57.033

您可以使用 PECL 扩展[uploadprogress](http://pecl.php.net/package/uploadprogress) (PHP >= 5.2.0)，以防您没有安装 PHP 5.4，如 kgb 的回答中所建议的那样。PHP.net 上的[这条评论简要解释了它的一般设置。](http://nl3.php.net/manual/en/features.file-upload.php#71564)您可以通过扩展的 PECL 页面找到示例。

# asp.net-mvc - 防止 ASP.NET Web API 返回 EntityKey

> ID：11394438
> 
> 赞同：1
> 
> 时间：2012-07-09T11:50:05.713
> 
> 标签：asp.net-mvc, entity-framework, controller

在我的 Web API 控制器中，我将结果返回给方法调用，如下所示：

```
// GET api/profile/5
public VCompleteProjectProfile GetBasicProjectProfile(int id)
{
    return _dbss.GetBasicProfile(id);
} 
```

这是实际结果：

```
{
    "$id":"1",
    "Id":1,
    "ProjectName":"Caribbean Challenge",
    "IsMrRcSelected":true,
    "IsMrdProject":true,
    "RegionName":"North America",
    "EntityKey":{
        "$id":"2",
        "EntitySetName":"VCompleteProjectProfile",
        "EntityContainerName":"MrdViewEntities",
        "EntityKeyValues":[
            {"Key":"Id","Type":"System.Int32","Value":"1"},
            {"Key":"ProjectName","Type":"System.String","Value":"Caribbean Challenge"},
            {"Key":"IsMrRcSelected","Type":"System.Boolean","Value":"True"}
        ]
    }
} 
```

有可能压制`EntityKey`吗？如果是这样，怎么做？这是MVC4。

谢谢埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:20:13.857

为您的结果创建 DTO/POCO，而不是返回实际的实体对象，例如

```
var entity = _dbss.GetBasicProfile(id);
return new ProfileDto()
{
    Id = entity.Id,
    ProjectName = entity.ProjectName,
    ....
}; 
```

您甚至可以扩展您的实体类型以包含一个名为的函数，该函数`ToDto`将为您执行此操作，例如

```
public partial class ProfileEntity
{
    public ProfileDto ToDto()
    {
        return new ProfileDto()
        {
            Id = this.Id,
            ProjectName = this.ProjectName,
            ....
        };
    }
}

....

var entity = _dbss.GetBasicProfile(id);
return entity.ToDto(); 
```

一般的经验法则是只返回*需要*的数据，不要因为方便而偷工减料。

此外，如果您发现自己不得不到处执行此操作，请查看[AutoMapper](http://automapper.codeplex.com/)之类的东西，这将使您的生活更轻松。

# java - 比较两个文件中的值

> ID：11394439
> 
> 赞同：2
> 
> 时间：2012-07-09T11:50:13.527
> 
> 标签：java, bufferedreader

我有两个文件，它们应该在子字符串 0 和 10 之间包含相同的值，但不是按顺序排列的。我已经设法输出每个文件中的值，但我需要知道如何报告说值在第一个文件中和第二个文件中的值，反之亦然。这些文件采用这些格式。

```
6436346346....Other details
9348734873....Other details
9349839829....Other details 
```

第二个文件

```
8484545487....Other details
9348734873....Other details
9349839829....Other details 
```

第一个文件中的第一条记录不会出现在第二个文件中，第二个文件中的第一条记录不会出现在第一个文件中。我需要能够以这种格式报告这种不匹配：

```
Record 6436346346 is in the firstfile and not in the secondfile.
Record 8484545487 is in the secondfile and not in the firstfile. 
```

这是我目前拥有的代码，它为我提供了两个文件所需的输出以进行比较。

```
package compare.numbers;

import java.io.*;

/**
 *
 * @author implvcb
 */
 public class CompareNumbers {

/**
 * @param args the command line arguments
 */
 public static void main(String[] args) {
    // TODO code application logic here
    File f = new File("C:/Analysis/");
    String line;
    String line1;
    try {
        String firstfile = "C:/Analysis/RL001.TXT";
        FileInputStream fs = new FileInputStream(firstfile);
        BufferedReader br = new BufferedReader(new InputStreamReader(fs));
        while ((line = br.readLine()) != null) {
            String account = line.substring(0, 10);
             System.out.println(account);

        }
        String secondfile = "C:/Analysis/RL003.TXT";
        FileInputStream fs1 = new FileInputStream(secondfile);
        BufferedReader br1 = new BufferedReader(new InputStreamReader(fs1));
        while ((line1 = br1.readLine()) != null) {
            String account1 = line1.substring(0, 10);
            System.out.println(account1);
        }

    } catch (Exception e) {
        e.fillInStackTrace();
    }

}
} 
```

请帮助我如何有效地实现这一目标。我想我需要说这是 java 的新手，可能不会轻易抓住这些想法，但我正在尝试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:56:43.630

这是执行此操作的示例代码：

```
 public static void eliminateCommon(String file1, String file2) throws IOException
{
    List<String> lines1 = readLines(file1);
    List<String> lines2 = readLines(file2);

    Iterator<String> linesItr = lines1.iterator();
    while (linesItr.hasNext()) {
        String checkLine = linesItr.next();
        if (lines2.contains(checkLine)) {
            linesItr.remove();
            lines2.remove(checkLine);
        }
    }

    //now lines1 will contain string that are not present in lines2
    //now lines2 will contain string that are not present in lines1
    System.out.println(lines1);
    System.out.println(lines2);

}

public static List<String> readLines(String fileName) throws IOException
{
    List<String> lines = new ArrayList<String>();
    FileInputStream fs = new FileInputStream(fileName);
    BufferedReader br = new BufferedReader(new InputStreamReader(fs));
    String line = null;
    while ((line = br.readLine()) != null) {
        String account = line.substring(0, 10);
        lines.add(account);
    }
    return lines;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T12:03:15.413

也许你正在寻找这样的东西

```
Set<String> set1 = new HashSet<>(FileUtils.readLines(new File("C:/Analysis/RL001.TXT")));
Set<String> set2 = new HashSet<>(FileUtils.readLines(new File("C:/Analysis/RL003.TXT")));

Set<String> onlyInSet1 = new HashSet<>(set1);
onlyInSet1.removeAll(set2);

Set<String> onlyInSet2 = new HashSet<>(set2);
onlyInSet2.removeAll(set1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T11:54:36.257

如果您保证文件的格式始终相同，并且每个 readLine() 函数将返回不同的数字，那么为什么不使用字符串数组而不是单个字符串。然后，您可以更轻松地比较结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T11:57:04.073

*   将每个文件中的值相应地放入两个单独`HashSet`的 s 中。
*   遍历其中一个`HashSet`s 并检查每个值是否存在于另一个 s 中`HashSet`。如果没有，请报告。
*   迭代其他`HashSet`并为此做同样的事情。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-09T11:58:06.423

打开两个扫描仪，然后：

```
 final TreeSet<Integer> ts1 = new TreeSet<Integer>();    
    final TreeSet<Integer> ts2 = new TreeSet<Integer>();
    while (scan1.hasNextLine() && scan2.hasNexLine) {
            ts1.add(Integer.valueOf(scan1.nextLigne().subString(0,10));
            ts1.add(Integer.valueOf(scan1.nextLigne().subString(0,10));
        }
You can now compare ordered results of the two trees 
```

**EDIT** 用 TreeSet 修改

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-09T12:01:52.323

好的，首先我会将两组字符串保存到集合中

```
Set<String> s1 = new HashSet<String>(), s2 = new HashSet<String>();
//...
while ((line = br.readLine()) != null) {
  //...
  s1.add(line);
} 
```

然后您可以比较这些集合并找到两个集合中都没有出现的元素。[您可以在此处](https://stackoverflow.com/questions/3341202/fastest-way-to-compare-two-set-in-java)找到有关如何执行此操作的一些想法。

如果您还需要知道行号，您可以创建一个字符串包装器：

```
class Element {
  public String str;
  public int lineNr;

  public boolean equals(Element compElement) {
    return compElement.str.equals(str);
  }
} 
```

然后你可以`Set<Element>`改用。

# php - php 会话 - 这对服务器来说太多了吗？

> ID：11394442
> 
> 赞同：2
> 
> 时间：2012-07-09T11:50:19.983
> 
> 标签：php, apache

我计划为每个登录的用户将用户 ID、用户名和位置存储在会话变量中。每个用户有 3 个变量。如果有 1000 个用户登录，这对于服务器来说是否太多了。这会导致服务器出现问题并让我被踢出去吗？我将为此使用godaddy的托管。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T12:05:10.150

您所说的会话数量可能不是什么大问题，但最重要的问题是这些会话（用户）登录时在做什么，每个会话造成了多少负载？

有时，考虑到他在会话中通过的进程，一个登录用户等于 10 个其他用户，他在服务器上造成的负载量。

如果您（并且您看起来如此）在共享托管服务器上运行，那么考虑您的脚本发出和生成的负载量（处理、quires..等）可能会很好。

明智地使用它，将您的请求降到最低，询问您的主机是否启用了 memcached 并考虑使用它，从逻辑和技术上特别注意您的代码。

另一方面，如果您需要一些特定的服务器资源专用，您可以使用 VPS 托管。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T11:51:40.173

不，我认为不是:) 为什么会这样？

1000 是一个相当低的数字，因此您不必担心。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T11:55:15.463

如今，大多数服务器都是相当高端的机器，可以计算大量数据。您的 3 个变量使用非常少量的内存。因此，即使您的所有 1000 个用户同时登录并执行活动，我怀疑它是否会对服务器造成太大影响。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T11:54:14.527

也许您可以使用[memcache](http://php.net/manual/en/book.memcache.php)更高效。它可以配置您的 apache，他将会话自动存储[在 memcache 中](https://blogs.oracle.com/oswald/entry/store_php_sessions_in_memcached)。

1000个会话不是那么多。

# iphone - Iphone，从 Uiimageview 获取图像数据

> ID：11394445
> 
> 赞同：0
> 
> 时间：2012-07-09T11:50:24.433
> 
> 标签：iphone, xcode, cocos2d-iphone

我在数组中有 5 个图像，它们在 UIimageview 中显示并一张一张显示。我想在单击的特定图像上获取图像数据，并使用触摸事件在 webview 中显示一些数据。我没有得到图像数据。我的代码在这里

imgarr->包括 5 个不同的图像

```
obj=[touches anyObject];
CGPoint point=[obj locationInView:self.view];
touchLocation=point;
if(CGRectContainsPoint([imgview frame],point))
{
//cloud.center=touchLocation;
    NSData *imgData = UIImageJPEGRepresentation(imgview.image, 9.0);
    UIImage *img = [UIImage imageWithData:imgData];
    NSLog(@"selimg=%@",img);
    for(int i=0;i<[imgarr count];i++)
    {
        UIImage *arr=[imgarr objectAtIndex:i];
        NSData *arrdata=UIImageJPEGRepresentation(arr,9.0); 
        if(arrdata==imgData)
            NSLog(@"True");
    }
} 
```

帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:58:38.130

如果您将对象与`==`您进行比较，那么您将比较指针而不是对象值。

[`NSData`](https://developer.apple.com/library/iOS/#documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html)有一个[`isEqualToData:`](https://developer.apple.com/library/iOS/#documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html#//apple_ref/doc/uid/20000172-CIADCECD)方法来检查一个对象是否等于它自己：

```
if ([arrdata isEqualToData:imgData]){
   NSLog(@"True");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T12:01:29.127

试试这个

```
UIImage *img = [UIImage imageNamed:@"some.png"];

NSData *dataObj = UIImageJPEGRepresentation(img, 1.0); 
```

# email - 通过 GmailApp() 发送邮件，返回路径 ...@maestro.bounces.google.com

> ID：11394448
> 
> 赞同：1
> 
> 时间：2012-07-09T11:50:33.950
> 
> 标签：email, gmail, google-apps-script

我正在尝试设置一个脚本，该脚本从电子邮件地址 A 接收电子邮件。从 Gmail 收件箱 B 中，该脚本打开一封新邮件，并发送与从 A 收到的完全相同的邮件，除了新邮件正在发送从 B 发送到另一个用户 C。因此，电子邮件不是从 A 发送到 C，而是显示为从 A 发送到 B，然后从 B 发送到 C。我的脚本运行良好，除了有一个问题。我使用 GmailApp() 从脚本发送的电子邮件地址的返回路径如下：

```
Return-Path: 3Ej_rTwsOAMElvk_1z-0lz03lsjohss5u.jvt@maestro.bounces.google.com 
```

具有此返回路径的结果是导致所需收件人无法接收正在发送的电子邮件，因为它被发送到他们的垃圾邮件箱而不是他们的收件箱。

我的问题是：Google Apps 脚本中的电子邮件发送功能是否从第三方电子邮件提供商发送电子邮件，而不是从运行脚本的用户的 Gmail 帐户中发送电子邮件？这应该是 GmailApp() 和 MailApp() 的功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:25:54.563

是的，你是对的。目前 GmailApp 和 MailApp 服务不通过用户的帐户发送。问题跟踪器上有一个提交的、开放的增强请求来查看：[http ://code.google.com/p/google-apps-script-issues/issues/detail?id=674](http://code.google.com/p/google-apps-script-issues/issues/detail?id=674)

# android - 在android列表视图中一次只滑动一行？

> ID：11394456
> 
> 赞同：1
> 
> 时间：2012-07-09T11:50:55.743
> 
> 标签：android, list, scroll, swipe

你会认为这很容易。使用此代码，我可以在列表视图中滑动多行，但我想要一次只滑动一行。如果用户选择不同的行，那么我希望旧行简单地自动重置。不知道该怎么做。这是我的代码：

在此先感谢各位..请帮助....

获取查看代码...

```
public View getView(int position, View convertView, ViewGroup parent) {
    View view = null;
    if(position > allModelItemsArray.size())
        return null;
    Model m = allModelItemsArray.get(position);
    final ViewHolder viewHolder = new ViewHolder();
    ViewHolder Holder = null;
    if (convertView == null) {

        view = inflator.inflate(R.layout.singlerow, null);

        view.setTag(viewHolder);

        viewHolder.text = (TextView) view.findViewById(R.id.label);
        viewHolder.text1 = (TextView) view.findViewById(R.id.label1);
        viewHolder.checkbox = (CheckBox) view.findViewById(R.id.check);
        viewHolder.icon = (ImageView) view.findViewById(R.id.icon);
        viewHolder.checkbox.setTag(m);
        viewHolder.text.setTag(m);
        viewHolder.text1.setTag(m);
        viewHolder.icon.setTag(m);
        viewHolder.position = position;

        Holder = viewHolder;
    } else {
        view = convertView;
        Holder = ((ViewHolder) view.getTag());
    }

    if(this.listener != null)
        view.setOnTouchListener(this.listener);

    Holder.model = m;
    Holder.position = position;
    Holder.text.setText(m.getName());
    Holder.text1.setText(m.getLName());

    return view;
} 
```

# php - 多个条件和身份检查

> ID：11394460
> 
> 赞同：0
> 
> 时间：2012-07-09T11:51:21.750
> 
> 标签：php, mysql, where, conditional-statements

嗨，我有一个要检查多个条件的 mysql 查询，所以我使用 () 来分隔每个条件，例如：

```
WHERE (a='string' AND b='string') OR (a='otherstring' AND b='otherstring) 
```

我遇到的问题是我必须添加一个用户检查，我不知道我是否必须再次使用（），例如，这是否正确？

```
WHERE ((a='string' AND b='string') OR (a='otherstring' AND b='otherstring)) AND (id='1') 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:54:12.413

```
WHERE 
    (
        (a='string' AND b='string') 
        OR (a='otherstring' AND b='otherstring')
    ) 
    AND id='1' 
```

这将查找 id 为 1 且 a.string=b.string 或 a.string=otherstring 的所有记录。

编辑：只是为了额外说明：

基本上，括号内的任何内容都等同于在一起，例如：

```
// Condition 1
(
    this=somethingelse
    and this2=somethingelse2
)
// Condition 2
and
(
    someCondition=anotherConidition
    and
    // Condition 3
    (
        thirdCondition=anotherCondition3
        or thirdCondition2=anotherCondition4
    )
) 
```

在这个例子中。必须满足条件 1 中的两个子句。条件 2 也必须满足并在该条件之内，`someCondition HAS to equal anotherCondition`以及条件 3 中的任一语句之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:53:58.053

这可能与您在最后一个条件下没有关闭字符串的代码有关，试试这个

`WHERE ( (a='string' AND b='string') OR (a='otherstring' AND b='otherstring') ) AND (id='1')`

# mysql - 数据库的差异

> ID：11394464
> 
> 赞同：0
> 
> 时间：2012-07-09T11:51:43.387
> 
> 标签：mysql, mysqldump

如何查询 information_schema.tables 以获取一个数据库中存在但另一个数据库中不存在的可用表的列表，类似于 diff 但更合适。我只需要sql查询。

所以我有像 A、B、C、D 这样的 Db，所有这些 DB 都应该有相同的表，我该如何检查它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:59:53.430

尝试

```
select *
from INFORMATION_SCHEMA.tables
group by table_name
having count(table_schema) < 4 
```

如果你有 4 个数据库。如果更多你必须调整`having`条款。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T10:10:00.580

此查询为您提供所有数据库中的所有唯一表。

```
 SELECT *,count(TABLE_NAME) 
    FROM 
   `TABLES` group by table_name 
    having count(TABLE_NAME)=1 
```

如果你想要重复的表名，那么使用这个

```
 SELECT *,count(TABLE_NAME) 
    FROM 
   `TABLES` group by table_name 
    having count(TABLE_NAME)>1 
```

# c# - 选择 DBF 文件的 Openfiledialog 错误

> ID：11394465
> 
> 赞同：0
> 
> 时间：2012-07-09T11:51:44.107
> 
> 标签：c#, ado.net

帮助。在这条线上失败：adapter.Fill(ds); // ERROR 检查名称是否无效，它不包含无效字符或标点符号，并且不能太长。

```
 openFileDialog1.Title = "Выбрать файл";
        openFileDialog1.InitialDirectory ="C:\\";        
        openFileDialog1.Filter = "dbf файлы (*.dbf)|*.dbf";            
        openFileDialog1.FilterIndex = 2;           
        openFileD`ial`og1.RestoreDirectory = true;
        openFileDialog1.FileName = "";

         if (openFileDialog1.ShowDialog() == DialogResult.OK)
        {
string fullPathname = openFileDialog1.FileName;
                    FileInfo fi = new FileInfo(fullPathname);
                    string open_b = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + fi.Directory + ";Extended Properties=dBase 5.0;Mode=Read|Write|Share Deny None;Persist Security Info=True";
                    OleDbConnection con = new OleDbConnection();
                    con.ConnectionString = open_b;
                    con.Open();

                 string vibor_t = "Select * From '" + fi.Name + "'";
                //string vibor_t = "Select * From '" + Path.GetFileNameWithoutExtension(fi.Name) + "'";

                OleDbDataAdapter adapter = new OleDbDataAdapter(vibor_t, con);
                DataSet ds = new DataSet();
                adapter.Fill(ds);  // ERROR
                con.Close();
                this.dataGridView1.DataSource = ds.Tables[0]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:01:50.057

您必须从 fi.Name 中删除扩展名，并删除单个引号，如下所示：

```
string vibor_t = "Select * From " + Path.GetFilenameWithoutExtension(fi.Name); 
```

# java - LeadBolt 广告集成到 AndEngine

> ID：11394466
> 
> 赞同：0
> 
> 时间：2012-07-09T11:51:44.887
> 
> 标签：java, android, andengine, leadbolt

我正在尝试将leadbolt“应用程序广告”和“应用程序通知”集成到我用AndEngine制作的游戏中。

当我开始我的游戏时，我收到以下错误：

```
07-09 11:42:16.566: D/LBAdController(1262): org.json.JSONException: No value for notificationtype
07-09 11:42:16.566: D/LBAdController(1262):     at org.json.JSONObject.get(JSONObject.java:354)
07-09 11:42:16.566: D/LBAdController(1262):     at org.json.JSONObject.getString(JSONObject.java:510)
07-09 11:42:16.566: D/LBAdController(1262):     at com.Leadbolt.AdController.setNotification(AdController.java:653)
07-09 11:42:16.566: D/LBAdController(1262):     at com.Leadbolt.AdController.initialize(AdController.java:593)
07-09 11:42:16.566: D/LBAdController(1262):     at com.Leadbolt.AdController.loadAd(AdController.java:1103)
07-09 11:42:16.566: D/LBAdController(1262):     at ShogunArts.Tengu.TenguMain.onLoadEngine(TenguMain.java:152)
07-09 11:42:16.566: D/LBAdController(1262):     at org.anddev.andengine.ui.activity.BaseGameActivity.onCreate(BaseGameActivity.java:61)
07-09 11:42:16.566: D/LBAdController(1262):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-09 11:42:16.566: D/LBAdController(1262):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
07-09 11:42:16.566: D/LBAdController(1262):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
07-09 11:42:16.566: D/LBAdController(1262):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
07-09 11:42:16.566: D/LBAdController(1262):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
07-09 11:42:16.566: D/LBAdController(1262):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-09 11:42:16.566: D/LBAdController(1262):     at android.os.Looper.loop(Looper.java:123)
07-09 11:42:16.566: D/LBAdController(1262):     at android.app.ActivityThread.main(ActivityThread.java:4627)
07-09 11:42:16.566: D/LBAdController(1262):     at java.lang.reflect.Method.invokeNative(Native Method)
07-09 11:42:16.566: D/LBAdController(1262):     at java.lang.reflect.Method.invoke(Method.java:521)
07-09 11:42:16.566: D/LBAdController(1262):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-09 11:42:16.566: D/LBAdController(1262):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-09 11:42:16.566: D/LBAdController(1262):     at dalvik.system.NativeStart.main(Native Method) 
```

和

```
07-09 11:42:20.715: D/LBAdController(1262): java.lang.NullPointerException
07-09 11:42:20.715: D/LBAdController(1262):     at android.view.ViewConfiguration.get(ViewConfiguration.java:211)
07-09 11:42:20.715: D/LBAdController(1262):     at android.view.View.<init>(View.java:1814)
07-09 11:42:20.715: D/LBAdController(1262):     at com.Leadbolt.AdController.displayAd(AdController.java:1393)
07-09 11:42:20.715: D/LBAdController(1262):     at com.Leadbolt.AdController.access$2(AdController.java:1260)
07-09 11:42:20.715: D/LBAdController(1262):     at com.Leadbolt.AdController$PollRequest.onPostExecute(AdController.java:2456)
07-09 11:42:20.715: D/LBAdController(1262):     at com.Leadbolt.AdController$PollRequest.onPostExecute(AdController.java:1)
07-09 11:42:20.715: D/LBAdController(1262):     at android.os.AsyncTask.finish(AsyncTask.java:417)
07-09 11:42:20.715: D/LBAdController(1262):     at android.os.AsyncTask.access$300(AsyncTask.java:127)
07-09 11:42:20.715: D/LBAdController(1262):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
07-09 11:42:20.715: D/LBAdController(1262):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-09 11:42:20.715: D/LBAdController(1262):     at android.os.Looper.loop(Looper.java:123)
07-09 11:42:20.715: D/LBAdController(1262):     at android.app.ActivityThread.main(ActivityThread.java:4627)
07-09 11:42:20.715: D/LBAdController(1262):     at java.lang.reflect.Method.invokeNative(Native Method)
07-09 11:42:20.715: D/LBAdController(1262):     at java.lang.reflect.Method.invoke(Method.java:521)
07-09 11:42:20.715: D/LBAdController(1262):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-09 11:42:20.715: D/LBAdController(1262):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-09 11:42:20.715: D/LBAdController(1262):     at dalvik.system.NativeStart.main(Native Method)
07-09 11:42:20.715: D/AdController(1262): Exception - null 
```

我在 onLoadEngine 方法的主类中添加了以下代码，并在 onLoadComplete 方法中对其进行了测试。

```
public Engine onLoadEngine() { / public void onLoadComplete() {
    myController1 = new AdController(getApplicationContext(), "277481637");
    myController1.setAsynchTask(true);
    myController1.loadNotification();
    myController2 = new AdController(getApplicationContext(), "497251530");
    myController2.loadAd();
    //MORE CODE
    return engine;
} 
```

我创建了一个 BootReceiver 类（我使用了正确的包名）：

```
package <PackageName>;

import com.Leadbolt.AdController;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
public class BootReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context arg0, Intent arg1) {
        //register the notification on reboot
        AdController mycontroller = new AdController(arg0, "277481637");
        mycontroller.loadNotification();
    }

} 
```

并将其添加到我的清单中：

```
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS"/>
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
<receiver android:name=".BootReceiver">
    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED" />
    </intent-filter>
</receiver> 
```

也许有人可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T02:55:57.213

经过审查，我可以看到您的代码中的这一行是错误的：

```
myController2 = new AdController(getApplicationContext(), "497251530");
myController2.loadAd(); 
```

无法为 Ads 传入应用程序上下文，您需要传入 Activity。

同样在您的清单文件中，包括以下行：

```
<receiver android:name="com.Leadbolt.AdNotification" /> 
```

此行需要出现在您的清单文件中的标记之前。

希望这会有所帮助，如果您仍然遇到问题，可以随时通过 support@leadbolt.com 与我们联系

# emacs - Emacs - 如何使用颜色在视觉上突出光标所在的功能？

> ID：11394472
> 
> 赞同：7
> 
> 时间：2012-07-09T11:52:08.323
> 
> 标签：emacs, text-editor

受 ia Writer 的焦点模式启发，我有兴趣在 emacs 中使用字体 + 背景颜色来突出光标所在的功能，并在视觉上提示其余代码作为背景（我使用 C++，但如果这样就好了无论使用哪种编程语言都可以工作）。

理想情况下，函数外代码的字体颜色会变暗（这就是焦点模式的工作方式）。一个更简单的解决方案可能是稍微更改光标当前所在功能的背景颜色。如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T21:46:53.963

AFAIK 不存在这样的东西。如果你想让它自己写，这里有一个草图：

1.  编写一个确定当前函数边界的例程。最简单的方法是使用`(bounds-of-thing-at-point 'defun)`.

2.  编写一个例程，当给定区域的边界时，[获取该区域的背景面属性，将](http://www.gnu.org/software/emacs/manual/html_node/elisp/Examining-Properties.html)其变暗，并将新面应用于该区域。

3.  使用调用此变量原始值的例程覆盖`font-lock-fontify-region-function`（参见[此处](http://www.gnu.org/software/emacs/manual/html_node/elisp/Other-Font-Lock-Variables.html#Other-Font-Lock-Variables)），将给定的区域与当前 defun 的区域（使用 #1）进行区分，然后将例程 #2 应用于剩余区域。

我更喜欢覆盖字体锁定，例如使用，`jit-lock-register`因为您需要控制字体化的顺序。

！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T22:13:18.277

which-function 模式用于突出显示当前功能。试试看它是否对你有帮助，看看这篇文章是否对你有帮助：

[Emacs 设置哪个功能模式](https://stackoverflow.com/questions/1730903/emacs-setting-which-function-mode)

# java - Eclipse RCP - 定义依赖关系的所有可能性？

> ID：11394475
> 
> 赞同：6
> 
> 时间：2012-07-09T11:52:16.453
> 
> 标签：java, dependencies, eclipse-rcp, tycho, summary

在 Eclipse RCP 项目中定义依赖项的所有可能性列表是否存在？也许被资源过滤？

可能的依赖：

*   来自其他 Eclipse RCP 插件
*   按包，没有明确定义插件
*   jar 库
*   ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:27:14.547

`MANIFEST.MF`如您所说，您可以在定义依赖项中使用以下指令

*   `Require-Bundle`（取决于指定的捆绑包）
*   `Import-Package`（取决于从其他捆绑包中导出的可用包）
*   `Bundle-Classpath`（对于嵌入式路径（！）和 JAR）

另外，当你创建一个 时`Fragment`，它`Fragment-Host`当然必须定义它的 ，这在某种意义上也是一个依赖

在 RCP 项目中，您可以设置**Features**，并且您可以在这些功能中为您的 RCP 应用程序指定捆绑包的依赖项

# sql - 使用注释的休眠调用错误

> ID：11394481
> 
> 赞同：0
> 
> 时间：2012-07-09T11:52:48.223
> 
> 标签：sql, hibernate, annotations

我收到此错误

```
menu_categories is not mapped [from menu_categories] 
```

我的休眠电话是

```
 public List loadMenuCategories(SessionFactory sessionFactory){
    List types = new ArrayList<MenuCategories>();
    Session session = sessionFactory.getCurrentSession();
    session.beginTransaction();

    Query query = session.createQuery("from menu_categories");
    List result = query.list(); 
    Iterator it = result.iterator();
    while(it.hasNext()){
        MenuCategories menuCategories = (MenuCategories)it.next();
        types.add(menuCategories);
    }
    sessionFactory.close();
    return types;
} 
```

我的豆子是

```
@Entity
@Table(appliesTo = "menu_categories")
public class MenuCategories extends BaseModel{

/**
 * 
 */
private static final long serialVersionUID = -4875305890823765933L;

}

package com.rizstien.myhotel.framework.model;

import java.io.Serializable;

import javax.persistence.Column;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;

import org.apache.commons.lang.StringUtils;

public class BaseModel implements Serializable {

private static final long serialVersionUID = 1L;

@Id
@GeneratedValue(strategy = GenerationType.AUTO) 
@Column(name = "id", nullable=false)
private Integer id;

@Column(name = "name")
private String name;

@Column(name = "description")
private String desc;

@Column(name = "is_active")
private boolean active;

@Column(name = "no_of_items")
private Integer noOfItems;

public Integer getId() {
    return id;
}
public void setId(Integer id) {
    this.id = id;
}
public String getName() {
    return name;
}
public void setName(String name) {
    if (!StringUtils.isEmpty(name)) {
        this.name = name;
    }
}
public String getDesc() {
    return desc;
}
public void setDesc(String desc) {
    if (!StringUtils.isEmpty(desc)) {
        this.desc = desc;
    }
}
public boolean isActive() {
    return active;
}
public void setActive(boolean active) {
        this.active = active;
}
public Integer getNoOfItems() {
    return noOfItems;
}
public void setNoOfItems(Integer noOfItems) {
    this.noOfItems = noOfItems;
}

} 
```

**编辑** 这是我的休眠配置文件

```
<hibernate-configuration>
<session-factory>
    <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="hibernate.connection.url">jdbc:mysql://localhost:3311/myhotel</property>
    <property name="hibernate.connection.username">root</property>
    <property name="connection.password">root</property>
    <property name="connection.pool_size">5</property>
    <property name="dialect">org.hibernate.dialect.MySQLDialect</property>
    <property name="current_session_context_class">thread</property>
    <property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property>
    <property name="show_sql">true</property>
    <property name="hbm2ddl.auto">update</property>

    <mapping class="com.rizstien.myhotel.menucategories.model.MenuCategories"/>
</session-factory> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:10:15.990

您正在执行的查询不是 SQL。这是HQL。HQL 查询实体，而不是表。应该是这样`from MenuCategories`。顺便说一句，这个实体应该命名为`MenuCategory`，因为它的一个实例代表一个类别，而不是几个类别。

阅读[文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:51:43.333

我在注释中提到了数据库名称，它解决了问题

```
 @Entity
 @Table(name = "menu_categories", catalog="db_name")
 public class MenuCategories extends BaseModel{

 private static final long serialVersionUID = -4875305890823765933L;

} 
```

# codeigniter - 选择 Codeigniter 输出 - 从缓存或渲染视图

> ID：11394482
> 
> 赞同：0
> 
> 时间：2012-07-09T11:52:49.650
> 
> 标签：codeigniter, caching, codeigniter-2

据我了解，Codigniter 缓存适用于匹配 URI。因此，如果在包含表单的方法中设置缓存，它将一直显示空表单。

有没有办法设置是显示缓存文件还是渲染视图？

伪代码：

```
if form validation = FALSE
    serve cache file
else
    render view
endif 
```

还有一种方法可以检查表单是否因为它是第一次加载而被显示，或者它是否因为有错误而被显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:17:58.167

使用 Codeigniter 缓存方式，无法有条件地从缓存中显示。因为 Codeigniter 决定在调用控制器本身之前从缓存中显示。

您可以做的是使用您的自定义缓存库。Codeigniter 有几个缓存库。你可以试试[https://github.com/philsturgeon/codeigniter-cache](https://github.com/philsturgeon/codeigniter-cache)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:23:23.827

您可以根据输出提供的任何内容有条件地设置缓存。虽然它不会从缓存中呈现您的“视图”，但如果您对表单进行任何繁重的处理，它将显着提高您的性能。

例如，您可以在*控制器*中执行此操作：

```
$this->load->driver('cache');

if (!$this->form_validation->run())
{
    if (!$cache = $this->cache->get('some unique variable'))
    {
        $cache = $this->some_model->some_function();
        // Do your rendering here.
    }
}

$this->load->view('some_view', array('data' => $cache)); 
```

这样你就可以使用文件缓存、memcached 或 apc 之类的东西来缓存你的变量。

# asp.net-mvc - Asp.Net Mvc Form 不贴子？

> ID：11394485
> 
> 赞同：0
> 
> 时间：2012-07-09T11:53:02.657
> 
> 标签：asp.net-mvc, validation, drop-down-menu

看法

```
@model Osos12Mvc3.Models.TblSayaclar
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<div id="div_dialog_container" class="dialog_container">
@using (Html.BeginForm((string)ViewBag.FormAction, "Sayac"))
{
    <div id="div_iu_form_container" class="ui_form_container">
        <div>@Html.ValidationSummary(true, "Sayaç Kaydı Başarısız! Lütfen Bilgileri Kontrol Ediniz.")
        </div>
        <table>
            <thead>
                <tr>
                    <th colspan="2">
                        Genel Bilgiler
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>@Html.LabelFor(x => x.TblMusteriler.musteri_adi):
                    </td>
                    <td>@Html.DropDownList("sno", (SelectList)ViewBag.musteri_id, "--Müşteri Seçiniz--")
                    </td>
                     </tr>
            </tbody>
            <tfoot>
            </tfoot>
        </table>
        <table class="table_ui_buttons">
            <thead>
                <tr>
                    <th colspan="2">
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        <input type="submit" value="Kaydet" />
                    </td>
                    <td>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    }
 </div> 
```

控制器

```
public ActionResult SayacEkle()
{
    var musteriler = entity.TblMusteriler.Select(x => new { x.sno, x.musteri_adi });
    ViewBag.musteri_id = new SelectList(musteriler.AsEnumerable(), "sno", "musteri_adi");

    return ContextDependentView(new TblSayaclar());
} 
```

在我看来，我正在使用验证摘要。当我单击提交下拉列表颜色更改为红色。（如必填字段）。我不明白那种状态。我调试了发布事件，它没有发布。发布操作未触发。

这是 Html 源代码：

```
<select data-val="true" data-val-number="The field sno must be a number." data-val-required="The sno field is required." id="sno" name="sno" class="input-validation-error"><option value="">--Müşteri Seçiniz--</option> 
```

AliRıza Adıyahşi

有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:58:34.790

> 当我单击提交下拉列表颜色更改为红色。(

如果您的视图模型属性被标记为 Required 属性，那么它得到验证是正常的：

```
[Required]
public string Sno { get; set; } 
```

有 2 个级别的验证按此顺序运行：

1.  客户端验证（默认不启用，使用 jquery ubnobtrusive => 防止表单被提交）
2.  服务器端验证

如果您使用客户端验证（不显眼的 javascript）并且您有模型错误，那么表单甚至不会发布到服务器。用户需要先修复他的错误，然后才能提交表单。

# ios - 是否可以更改 UISearchBar 占位符的对齐方式？

> ID：11394489
> 
> 赞同：5
> 
> 时间：2012-07-09T11:53:35.870
> 
> 标签：ios, uisearchbar

由于输入语言不同，我将需要以不同的对齐方式显示 UISearchBar。
我看到了[这个答案](https://stackoverflow.com/questions/9251592/how-to-change-the-alignment-of-a-uisearchbar-according-to-the-input-language)，但我找不到你实际将文本与`UISearchBar`.

有任何想法吗？
谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T14:56:59.143

这就是我所做的：

```
for (UIView *subView in self.subviews){
        if ([subView isKindOfClass:[UITextField class]]) {
            UITextField *text = (UITextField*)subView;
            text.textAlignment = UITextAlignmentRight;
            text.rightViewMode = UITextFieldViewModeAlways;
        }
    } 
```

如果您还想移动放大镜图标，可以这样做：

```
text.leftView = nil;
text.rightView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"search_icon.png"]]; 
```

但是您必须提供 search_icon.png 图像。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-25T11:02:22.777

这是解决方案

```
UITextField *searchTextField = [searchBar valueForKey:@"_searchField"];
UILabel *placeholderLabel = [searchTextField valueForKey:@"_placeholderLabel"];
[placeholderLabel setTextAlignment:NSTextAlignmentLeft]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-30T08:38:29.137

要设置属性占位符文本以实现左对齐占位符，请尝试此代码...

```
//Step1 : Make blank attributed string
NSMutableAttributedString * attributedString = [[NSMutableAttributedString alloc] initWithString:@""];

//Step2 : Append placeholder to blank attributed string
NSString *strSearchHere = @"Search here...";
NSDictionary * attributes = [NSDictionary dictionaryWithObject:[UIColor blackColor] forKey:NSForegroundColorAttributeName];
NSAttributedString * subString = [[NSAttributedString alloc] initWithString:strSearchHere attributes:attributes];
[attributedString appendAttributedString:subString];

//Step3 : Append dummy text to blank attributed string
NSString *strLongText = @"LongTextLongTextLongTextLongTextLongTextLongTextLongTextLongTextLongTextLongTextLongTextLongTextLongTextLongTextLongTextLongTextLongTextLongTextLongTextLongTextLongTextLongTextLongTextLongTextLongTextLongTextLongTextLongTextLongTextLongTextLongTextLongTextLongTextLongTextLongTextLongTextLongTextLongTextLongTextLongText";
NSDictionary * attributesLong = [NSDictionary dictionaryWithObject:[UIColor clearColor] forKey:NSForegroundColorAttributeName];
NSAttributedString * subStringLong = [[NSAttributedString alloc] initWithString:strLongText attributes:attributesLong];
[attributedString appendAttributedString:subStringLong];

//Step4 : Set attributed placeholder string to searchBar textfield
UITextField *searchTextField = [searchBarr valueForKey:@"_searchField"];
searchTextField.attributedPlaceholder = attributedString;
searchTextField.leftView = nil; //To Remove Search icon
searchTextField.textAlignment = NSTextAlignmentLeft; 
```

# algorithm - 带分区的选择算法

> ID：11394503
> 
> 赞同：1
> 
> 时间：2012-07-09T11:54:40.440
> 
> 标签：algorithm, sorting

我们必须将整数一个接一个地输入到一个数组中。在输入过程进行时，我们可能会被要求从数字的顶部（最大）1/3 中找到最小的数字，任意次数。

例如：

```
input 1

input 7 

input 9

tell the number

input 21

input 8

input 5

tell the number

input 11

tell the number 
```

输出应该是：

```
9

9

11 
```

解释：

*   直到第一次查询，数组的数字是 1 7 9，所以前 1/3 的数字是 9。因为它们只有一个数字，所以它也是最小的。
*   当第二个查询进行数组看起来像`1 7 9 21 8 5`，所以排序数组将是：
    `21 9 8 7 5 1`，前 1/3 的数字将是 21 和 9。其中最小的将是 9
*   在最终的查询数组中`1 7 9 21 8 5 11`，排序`21 11 9 8 7 5 1`前 1/3 的数字将是 21 和 11。其中最小的是 11。

数组中的整数总数可以是 250000

**我的方法**是应用带有分区的选择算法，但是已经超过了时间限制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T12:13:08.053

**为什么选择算法失败：**
请注意，在#elements 中使用选择算法是线性的。假设 #requests 在 #elements 中是线性的 - 这将导致二次解，这就是您超出时间限制的原因。

**另一种方法：** 维护两个堆：一个最大堆`H1`和一个最小堆`H2`

最大堆 ​​( `H1`) 将保存 2/3 的最低数字，而最小堆将保留 1/3 的最高数字。

现在，对于您读取的每个元素`x`，检查是否需要增加顶部 1/3 堆 ( `H2`)，如果需要：您需要添加`max{x,H1.max()}`. 如果您添加了`H1.max()`- 您需要将其从堆中删除，然后插入`x`。如果不需要添加，则检查是否`x`大于 then `H2.min()`，如果是，则删除 min 形式`H2`，将其插入`H1`，然后添加`x`到`H1`。

注意：您在此解决方案中查找的数字可以随时找到`O(1)`，它是最小堆 ( `H2`) 的最小值。

如果此解决方案的总复杂度是`O(nlogn + k)`-`n`数字的数量在哪里，并且`k`是“告诉数字”请求的总数。

**注意**：一个更简单的解决方案（虽然可能更慢）是保持列表排序（例如在[BST](http://en.wikipedia.org/wiki/Binary_search_tree)或[跳过](http://en.wikipedia.org/wiki/Skip_list)列表中），并使用二进制搜索来查找相关元素。

**例子：**

```
init:
H1 = {}
H2 = {}

input1:
H1 = {1}
H2 = {}

input7:
H1={1,7}
H2 = {}

input 9: //need to add a max, in this case: x > H2.max() -> add x to H2.
H1 = {1,7}
H2 = {9}

tell the number
H2.min() = 9

input 21: // 21>9 -> remove H2.min() add it to H1, add x to H2
H1 = {1,7,9}
H2 = {21}

input 8:
H1 = {1,7,8,9}
H2 = {21}

input 5: //remove max from H1, add max to H2, add x to H1
H1 = {1,7,5,8}
H2 = {9,21}

tell the number
H2.min() = 9

input 11: //remove min from H2, add it to H1, add x to H2.
H1 = {1,7,5,8,9}
H2 = {11,21}
tell the number
H2.min() = 11 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T18:15:11.320

怎么样：

1.  保持数组有序，插入成本 = log(n)
2.  从 1/3 = O(1) 中获取最小值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T11:59:13.043

（我认为这个问题是某种家庭作业（“我们必须”），因此我没有直接给出答案。）

重新制定你的任务：你被要求使用在线算法找到第 66 个百分位。[中位数已经有一个 SO 问题](https://stackoverflow.com/questions/1387497/find-median-value-from-a-growing-set)，即第 50 个百分位数，因此您应该能够从那里适应。如果该算法不好，请对在线中值算法进行一些研究，其中大部分也应该适用于您的问题。

# php - PHP min() 但不为空

> ID：11394507
> 
> 赞同：3
> 
> 时间：2012-07-09T11:55:12.733
> 
> 标签：php, function, min

你会如何最好地编写一个函数来`min()`在 PHP 中选择，但忽略空值？

```
function minvar($var1,$var2) {
    $min=min($var1,$var2);
    return $min;
} 
```

我知道你可以用`if`etc 做到这一点，但我认为会有更优雅的方式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T11:57:33.100

```
function($var1,$var2) {
  return min($var1 ?: PHP_INT_MAX, $var2 ?: PHP_INT_MAX);
} 
```

请注意，它也会被`0`视为“未定义”。

更新：当所有值都为空时`PHP_INT_MAX`返回。在此实现中，这是有意的，因为 OP 明确要求忽略空值。因此，当忽略*所有*值时，最小值实际上是总体最大值（不知何故）。我的主要目的是保持返回值严格：当方法说忽略空值时，这是出乎意料的，在*某些*情况下它仍然返回`null`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-09T11:58:45.817

我想你可以这样做`array_filter`：

```
function($var1,$var2) {
    $min=min(array_filter(array($var1,$var2)));
    return $min;
} 
```

`array_filter`从数组中删除所有评估为 boolean 的项目`false`。`min`然后从数组中获取最低的项目。请注意，`0`将被删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-31T21:45:10.057

King Crunch 的方法不适用于像 DateTime 对象这样的非整数类型。下面的代码可以：

```
function minnotnull($var1, $var2) {
    if($var1 === null) { return $var2; } 
    if($var2 === null) { return $var1; } 
    return min($var1, $var2); 
}    

function maxnotnull($var1, $var2) {
    if($var1 === null) { return $var2; } 
    if($var2 === null) { return $var1; } 
    return max($var1, $var2); 
} 
```

（小心使用三等式===）

# c - 是否有类似 C 的 IDLE (python) 之类的东西？

> ID：11394510
> 
> 赞同：2
> 
> 时间：2012-07-09T11:55:24.083
> 
> 标签：c

> **可能重复：**
> [是否有 C 的解释器？](https://stackoverflow.com/questions/584714/is-there-an-interpreter-for-c)

我想稍微练习一下 C，并且我想要一些可以快速编写和测试 C 代码的东西。我想要一个带有 UI 的解释器，我可以在其中编写代码并执行它。

有什么好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:01:34.710

与您正在寻找的最接近的解决方案似乎是[C shell (CSH)](http://en.wikipedia.org/wiki/C_shell)或[C Scripting Language (CSL)](http://csl.sourceforge.net/)。

或者，打开一个编辑器，您将在其中编写 C 示例，然后打开控制台窗口，您将在其中执行您最喜欢的 C 编译器。这个想法是有这样的简单工作流程：

```
$ gvim test.c
$ gcc test.c
$ ./a.out 
```

不要忘记，C 不是脚本语言。但是，您可能会发现[适用于 C、C++ 等的 JIT 编译器的](https://softwareengineering.stackexchange.com/q/29344)讨论很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T12:12:57.410

尽管“解释器”本身不存在（或实际上不存在），但我建议使用现代 IDE。Eclipse + CDT 允许您进行“即时编译”，就像在 java 中一样。您的项目随时可以运行，并且由于编译而减少了延迟（如果您有一台不错的计算机）。

对于其他答案，我建议不要直接使用`gcc test.c`. 在编译期间使用 makefile 或至少使用`gcc -Wall -g -o myapp test.c`top 有附加信息（很有用，因为 C 比 python 有更多的陷阱）。另请注意，这`test`是一个标准程序，`.`可能不在您的 PATH 中：`myapp`比`test`;-)更好的名称

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T11:59:46.283

有[紧贴](http://root.cern.ch/drupal/content/cling)。从来没有用过，所以我不能告诉你更多，但它看起来像你正在寻找的东西。

您可能还会在这个问题中找到其他线索：[是否有 C 的解释器？](https://stackoverflow.com/questions/584714/is-there-an-interpreter-for-c)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T12:00:36.547

你可以看看：[http ://codepad.org/](http://codepad.org/)

或者简单的方法是创建一个 sh 脚本，如：

`vim $1 ; gcc $1 ; ./a.out`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T12:01:21.777

据我所知，您无法解释 C++ 代码...

您可以做的（以及当我很快需要编写一些简单的东西时我会做的）是设置一个简单的 make 文件并使用一些简单的文本编辑器（例如具有控制台插件的 Kate）打开一个新文件。然后您可以编写一些代码并键入“make”以在 konsole/您使用的任何 shell 中查看代码的结果

# django - 使用此代码在 Django 中不断命中 Deepcopy - 如何避免？

> ID：11394511
> 
> 赞同：0
> 
> 时间：2012-07-09T11:55:31.827
> 
> 标签：django

我期待 postgres 需要一些时间，但没想到它不会成为这里的瓶颈，我该如何解决这个问题？

```
2772856 function calls (2578490 primitive calls) in 32.361 seconds

Ordered by: internal time

ncalls  tottime  percall  cumtime  percall filename:lineno(function)
127921/19340    3.670    0.000   11.486    0.001 /usr/lib/python2.7/copy.py:145(deepcopy)
 2240    3.031    0.001    3.244    0.001 {method 'execute' of 'psycopg2._psycopg.cursor' objects}
114402    1.541    0.000    2.348    0.000 /usr/lib/python2.7/copy.py:267(_keep_alive) 
```

# -------------------------------------------------- --------------------------------

```
 suppliers = models.Supplier.objects.all().order_by('company')
    for supplier in suppliers :
        sup = {}
        sup['company'] = supplier.company
        sup['supplies'] = get_supplies(1, supplier.uuid)
        sup['category'] = 'Supplier'
        if isocode == None :
            addresses = models.Address.objects.filter(company = supplier.company)
        else :
            addresses = models.Address.objects.filter(company = supplier.company, country_iso = isocode)
        sup['contacts'] = models.Contact.objects.filter(address__in=addresses)
        company_list.append(sup) 
```

# -------------------------------------------------- --------------------------------

```
def get_supplies (bought_in_controlpanel_id, supplier_uuid) :

    supplier    = None
    activenode  = None

    if supplier_uuid is not None :
        supplier = models.Supplier.objects.get(uuid = supplier_uuid)

    try :
        activenode = boughtin.BoughtInControlPanel.objects.get (pk = 1)
    except :
        pass

    supplies = boughtin.BoughtInControlPanel.objects.filter (parent = activenode)
    for supply in supplies :
        supply.checked  = 0
        supply.disabled = ""
        supply.open     = 0

        if supplier_uuid is not None :
            try    :
                models.Supplies.objects.get(supplier = supplier, bought_in_control_panel = supply)
                supply.checked = 1
            except :
                supply.open    = 1

    return supplies 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T12:10:36.787

当您在循环中查询数据库时，性能通常很差。尽量避免这种情况。

为什么不继续使用关系和`__in`查询？=)

我认为这应该适用于第一个示例的 SQL 查询较少：

```
company_list = models.Supplier.objects.values_list('company', flat=True)

filter_kwargs = dict(address__company__in=company_list)

if isocode is not None:
    filter_kwargs.update(dict(address__company__isocode=isocode))

sup['contacts'] = models.Contact.objects.filter(**filter_kwargs) 
```

关于`get_supplies()`，我也会避免`Supplies.objects.get()`循环，除非你确定它只会被击中几次。最好在循环之前用一个更大的查询收集一个供应列表，然后简单地检查该列表中是否存在所需的项目。尽管您应该分析这两种变体并选择更快的一种。

# php - ssh2_connect 导致错误 324 (net::ERR_EMPTY_RESPONSE)：

> ID：11394513
> 
> 赞同：3
> 
> 时间：2012-07-09T11:55:37.407
> 
> 标签：php, linux, ssh, lampp

尝试使用 php 列出远程 sftp 位置中存在的文件时，出现此错误：

> 错误 324 (net::ERR_EMPTY_RESPONSE)：

服务器关闭连接而不发送任何数据。在我的另一台灯服务器上，相同的代码可以正常工作。如果您能提供帮助，请指出我遗漏的地方。提前致谢。

```
function listBuildFiles() {

global $sftp_host, $sftp_username, $sftp_password, $sftp_path;
$connection = ssh2_connect($sftp_host);
// Authenticate
if (!ssh2_auth_password($connection, $sftp_username, $sftp_password)) {
    throw new Exception('Unable to connect.');
}

// Create our SFTP resource
if (!$sftp = ssh2_sftp($connection)) {
    throw new Exception('Unable to create SFTP connection.');
}

/**
 * Now that we have our SFTP resource, we can open a directory resource
 * to get us a list of files. Here we will use the $sftp resource in
 * our address string as I previously mentioned since our ssh2://
 * protocol allows it.
 */
$files = array();
$dirHandle = opendir("ssh2.sftp://$sftp$sftp_path");
    $i=0;
// Properly scan through the directory for files, ignoring directory indexes (. & ..)
while (false !== ($file = readdir($dirHandle))) {
    if ($file != '.' && $file != '..') {
        $files[$i] = $file;
        $i++;
    }
}

echo '<select name="buildName">';
echo '<option>Please Select a build</option>';
foreach ($files as $filename) {
      echo "<option value=\"$filename\">$filename</option>";
    }
echo '</select>';
ssh2_exec($connection, "exit"); 
```

谢谢， 乌杰瓦尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:33:54.207

只是为了确保服务器端没有问题，您可以打开控制台并以详细模式尝试原始 ssh 连接：

```
ssh -v youruser@yourhost.com 
```

这会跟踪服务器和客户端之间的所有交互，可能会从服务器端为您提供一些线索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T21:44:47.757

使用[phpseclib，一个纯 PHP SFTP 实现](http://phpseclib.sourceforge.net/)，您可以看到正在发生的事情的完整日志。例子：

```
<?php
include('Net/SFTP.php');

define('NET_SSH2_LOGGING', NET_SSH2_LOG_COMPLEX);

$sftp = new Net_SFTP('www.domain.tld');
if (!$sftp->login('username', 'password')) {
    exit('Login Failed');
}

// puts a three-byte file named filename.remote on the SFTP server
$sftp->put('filename.remote', 'xxx');

echo $ssh->getLog();
print_r($ssh->getErrors());
?> 
```

phpseclib 的开发人员也非常主动地提供支持，所以如果您无法从日志或错误消息中找出它，他可能可以。

# php - 如何从另一个具有相同ID的多条记录的表中获取记录？

> ID：11394514
> 
> 赞同：0
> 
> 时间：2012-07-09T11:55:53.200
> 
> 标签：php, mysql, join

我的表结构如下

```
table-1
-------
id
name

table-2
--------
imageId
id ( reference of table1.id)
image 
```

并且 table1 有以下记录

```
id     name 
1      A
2      B
3      C 
```

表2有

```
imageId      id          image
1             1         image1.jpg
2             1         image2.jpg
3             2         image3.jpg 
```

即table1.id在table2中有很多图像，现在我需要选择记录及其对应的图像（同一个id的多个图像），比如

```
id   name       image
1     A         image1.jpg,image2.jpg
2     B         image3.jpg 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:06:41.530

您可以使用该`GROUP_CONCAT`函数将多行的值获取到单个逗号分隔的字符串中（例如您在示例中的期望结果）：

```
SELECT a.id, a.name, GROUP_CONCAT(b.image) AS images
FROM table1 a
INNER JOIN table2 b ON a.id = b.id
GROUP BY a.id, a.name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T12:00:09.950

```
select
    b.imageId,
    a.id,
    b.imageName
from
    table-1 a
    right outer join table-2
        on a.id=b.id 
```

这将为您提供以下输出：

```
id   name       image

1     A         image1.jpg
1     A         image2.jpg
2     B         image3.jpg 
```

# xml - 如何将变量放入 XSLT 中的元素名称？

> ID：11394517
> 
> 赞同：1
> 
> 时间：2012-07-09T11:56:16.383
> 
> 标签：xml, xslt

抱歉，我无法理解这个：

有没有办法扭转这个...

```
<xsl:value-of select="concat('name-', $language)" /> 
```

...进入这个：

```
<xsl:value-of select="name-en" /> 
```

?

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:57:52.337

```
<xsl:value-of select='*[name() = concat("name-", $language)]' /> 
```

**[现场演示](http://www.xmlplayground.com/0Q4L2x)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:59:00.487

尝试这个

```
 <xsl:variable name="name-en" select="concat('name-', $language)">
 </xsl:variable> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T12:44:55.953

我假设您实际上打算达到...的等价物

```
<xsl:value-of select="'name-en'" /> 
```

（请注意“name-en”周围的引号。）如果这不是您的意图，请告诉我。

**只需将 $language 变量的值设置为 'en'**，就像这样......

```
<xsl:variable name="language" select="'en'" /> 
```

顺便说一句，如果您使用的是 XSLT 2.0 而不是 1.0，您可以缩写...

```
<xsl:value-of select="concat('name-', $language)" /> 
```

... 进入 ....

```
<xsl:value-of select="'name-', $language" /> 
```

好东西！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T13:17:16.000

**单从标题来看**：

> 如何将变量放入 XSLT 中的元素名称？

**答案是**：

```
<xsl:element name="{$theVariable}"/> 
```

这会生成一个元素，其名称是`$theVariable`变量的值。

**在您的特定情况下使用**：

```
<xsl:element name="name-{$language}"/> 
```

**说明**：

正确使用**[`<xsl:element>`](http://www.w3.org/TR/1999/REC-xslt-19991116#section-Creating-Elements-with-xsl%3aelement)**和**[AVT](http://www.w3.org/TR/1999/REC-xslt-19991116#attribute-value-templates)**（属性值模板）。

# java - Java 错误运行 .jar，但在 Eclipse 中没有

> ID：11394521
> 
> 赞同：1
> 
> 时间：2012-07-09T11:56:20.717
> 
> 标签：java, eclipse, image, runtime-error

当我尝试从我的桌面以 .jar 文件的形式运行我新完成的程序时，它在“请稍候...”屏幕上运行时卡住了，我必须表明我的程序仍在加载。同时，从 Eclipse IDE 运行它可以正常工作！跑步

```
java -jar C:\path\to\my\jar\file.jar 
```

结果`Error`如下：

```
Exception in thread "AWT-EventQueue-0" java.lang.ExceptionInInitializerError
    at ...
Caused by java.lang.NullPointerException
    at javax.swing.ImageIcon.<init>(ImageIcon.java:205)... 
```

*是*的，我知道[`java.lang.ExceptionInInitializerError`](http://www.ibm.com/developerworks/java/library/j-dclp2/index.html)这意味着`Exception`在一个类中加载了一些静态变量。错误是`NullPointerException`in an `ImageIcon`，这意味着我的（许多） static`ImageIcon`中的一个被赋予了要加载的空 URL。如果什么也没找到，我使用`getClass().getResource("someFile")`which 返回 null 。**是的，我已正确拼写所有图像名称**。这是我的代码：

```
public static final ImageIcon cloud = new ImageIcon(SomeClass.class.getResource("cloud.png"));
public static final ImageIcon whiteFlower = new ImageIcon(SomeClass.class.getResource("white_flower.png"));
public static final ImageIcon pinkFlower = new ImageIcon(SomeClass.class.getResource("pink_flower.png"));
public static final ImageIcon redFlower = new ImageIcon(SomeClass.class.getResource("red_flower.png"));
public static final ImageIcon blueFlower = new ImageIcon(SomeClass.class.getResource("blue_flower.png"));
public static final ImageIcon bird1 = new ImageIcon(SomeClass.class.getResource("bird_animation\\bird1.png"));
public static final ImageIcon bird2 = new ImageIcon(SomeClass.class.getResource("bird_animation\\bird2.png"));
public static final ImageIcon bird3 = new ImageIcon(SomeClass.class.getResource("bird_animation\\bird3.png"));
public static final ImageIcon bird4 = new ImageIcon(SomeClass.class.getResource("bird_animation\\bird4.png"));
public static final ImageIcon bird5 = bird4;
public static final ImageIcon bird6 = bird3;
public static final ImageIcon bird7 = bird2;
public static final ImageIcon bird8 = bird1;
public static final ImageIcon moon = new ImageIcon(SomeClass.class.getResource("moon.png"));
public static final ScaledImageIcon star = new ScaledImageIcon(SomeClass.class.getResource("star.png"), 0.225/*average of 0.15 and 0.3*/);
public static final PixelResizeImageIcon squirrel = new PixelResizeImageIcon(SomeClass.class.getResource("squirrel.gif"/*"bunny.gif"*/), 1.5);
public static final ScaledImageIcon whiteBird1 = new ScaledImageIcon(SomeClass.class.getResource("bird_animation\\white1.png"), 1);
public static final ScaledImageIcon whiteBird2 = new ScaledImageIcon(SomeClass.class.getResource("bird_animation\\white2.png"), 1);
public static final ScaledImageIcon whiteBird3 = new ScaledImageIcon(SomeClass.class.getResource("bird_animation\\white3.png"), 1);
public static final ScaledImageIcon whiteBird4 = new ScaledImageIcon(SomeClass.class.getResource("bird_animation\\white4.png"), 1);
public static final ScaledImageIcon whiteBird5 = new ScaledImageIcon(SomeClass.class.getResource("bird_animation\\white5.png"), 1);
public static final ScaledImageIcon whiteBird6 = whiteBird4;
public static final ScaledImageIcon whiteBird7 = whiteBird3;
public static final ScaledImageIcon whiteBird8 = whiteBird2;
public static final ScaledImageIcon whiteBird9 = whiteBird1; 
```

这是我的项目：

![生日贺卡项目形象](../Images/fb1564ab4b1aa2b92549e8609b8a2056.png)

在 Eclipse 中一切都运行*良好*，但是当我将它导出到 .jar 文件并使用它运行时，`java -jar`它给了我一个错误！有人可以帮忙***吗***？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:14:20.953

检查所有图像是否都在 jar 中，并使用正斜杠而不是反斜杠作为资源路径：

```
SomeClass.class.getResource("bird_animation/white1.png") 
```

# java - 将外部文件相对放置在eclipse中

> ID：11394522
> 
> 赞同：0
> 
> 时间：2012-07-09T11:56:22.257
> 
> 标签：java, eclipse

我有 src 文件夹，里面有很多包，其中之一是 hibernate.util。

早些时候我将 hibernate.cfg.xml 放在 src 文件夹中并给出了它的绝对路径，现在因为我必须部署这个应用程序，所以绝对路径给我带来了问题。

我尝试添加一个新的资源文件夹作为源文件夹，将其包含在源文件夹中，将其添加到类路径中，但每次找不到它的文件

我正在使用 Eclipse IDE

```
SEVERE: Allocate exception for servlet sandbox
java.io.FileNotFoundException: .\resources\hibernate.cfg.xml (The system cannot find the path specified)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(Unknown Source)
    at org.hibernate.cfg.Configuration.configure(Configuration.java:2216)
    at dal.utils.HibernateUtils.buildSessionFactory(HibernateUtils.java:25)
    at dal.utils.HibernateUtils.<clinit>(HibernateUtils.java:19)
    at dal.service.CalcDataMapper.load(CalcDataMapper.java:17)
    at com.renturduniya.www.sandbox.init(sandbox.java:41)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1206)
    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:827)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:129)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:21:39.457

你不应该给它传递一个文件。File 表示文件系统上的路径。您的配置文件应与应用程序的类一起捆绑在 jar/war 中，并使用类加载器加载。

您应该使用将[URL 作为参数的方法](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/cfg/Configuration.html#configure%28java.net.URL%29)，并将返回的 URL 传递给它

```
SomeClassOfYourWebApp.class.getResource(
    "/the/package/where/the/file/is/hibernate.cfg.xml"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:22:18.300

尝试使用正斜杠`/resources/hibernate.cfg.xml`，以防您在 hibernateUtil 类中对值进行了硬编码。如果不尝试做这样的事情

```
 URL url = hibernateUtil.class.getClassLoader().getResource(
                    "hibernate.cfg.xml");
   // Now try to get the get path of the file using 
    url.getPath(); 
```

我认为这对你有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T12:24:17.680

外部文件始终是绝对路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T12:31:27.830

处理这个问题的最好方法是使用类加载器。

```
Whatever.class.getClassLoader().getResource("name"); 
```

因为这实际上会考虑到类路径。

否则，相对路径名将与您的*工作目录*相关，而不是与您的*源代码树*相关。

请注意，在*Eclipse*的*Run Configurations*中，您在*Arguments*选项卡中有一个名为**Working directory**的设置，默认为您的项目文件夹。对于多个运行配置，您可以使用不同的工作文件夹（这样，您的应用程序可以使用不同的配置）。

常见的目录布局可能是：

```
bin/     compiled classes, in classpath
src/     source files, not used at runtime
site1/   configuration for running site 1
site2/   configuration for running site 2 
```

然后将文件放入：

```
site1/resources/hibernate.cfg.xml
site2/resources/hibernate.cfg.xml 
```

并将**工作文件夹**设置为`site1`or `site2`。

# php - 在 MySQL PDO 查询中限制 FOREACH

> ID：11394527
> 
> 赞同：0
> 
> 时间：2012-07-09T11:56:41.810
> 
> 标签：php, mysql, pdo

我正在使用下面的代码来尝试回显 MySQL 表上的最新 5 个条目，但我无法，但似乎能够弄清楚如何限制结果的数量，任何人都可以通过允许我限制结果的数量来帮助我到 5 行？

```
<table>
<?php
require_once($_SERVER['DOCUMENT_ROOT'] . "/resources/pdo.php"); 
$q = "SELECT * FROM `content` ORDER BY `id`";
$query = $pdo->query($q);
$data = array_reverse($query->fetchAll());
foreach ($data as $row) {
echo "<tr><td>{$row['title']}</td><td>{$row['id']}</td></tr>";
}
?>
</table> 
```

谢谢！

请注意，我是 PHP 新手，需要帮助，所以如果这个问题没有用，请帮助我，因为我才刚刚开始。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T11:59:36.313

`LIMIT`在 SQL 查询中使用子句：

```
SELECT * FROM `content` ORDER BY `id` DESC LIMIT 5 
```

从[手册](http://dev.mysql.com/doc/refman/5.0/en/select.html)：

> LIMIT 子句可用于限制 SELECT 语句返回的行数。LIMIT 接受一个或两个数字参数，它们都必须是非负整数常量（使用准备好的语句时除外）。
> 
> 有两个参数，第一个参数指定要返回的第一行的偏移量，第二个参数指定要返回的最大行数。初始行的偏移量为 0（不是 1）：

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T11:59:19.777

使用限制字：

```
 SELECT * FROM `content` ORDER BY `id` DESC LIMIT 5 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T12:00:39.357

`order by id desc`摆脱 array_reverse 并`limit 5`限制返回结果的数量。

```
$q = "SELECT * FROM `content` ORDER BY `id` DESC LIMIT 5";
...
$data = $query->fetchAll(); 
```

作为一个全局准则：在编写查询时，请尝试以使结果集尽可能接近您需要的方式来制定查询，即之后没有额外的排序或过滤操作。

1.  让 dbserver 发送您不会使用的数据是一种浪费
2.  必须在网络服务器上重新过滤/重新过滤数据会降低网络服务器的性能，并且在大型结果集的情况下，它也会消耗大量内存

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T12:00:47.360

从数据库中提取数据时，您通常`LIMIT`通过 MySQL 查询设置 a，而不是在读取返回的数据时计算循环迭代次数。

```
$q = "SELECT * FROM `content` ORDER BY `id` LIMIT 5"; 
```

# javascript - initEvent+dispatchEvent 和 jquery 的 trigger('click') 有什么区别吗

> ID：11394529
> 
> 赞同：4
> 
> 时间：2012-07-09T11:56:43.833
> 
> 标签：javascript, jquery

[使用 initEvent 创建事件和稍后在 JavaScript 中使用 dispatchEvent 调度事件和使用 jquery 的 trigger('click')触发器](http://api.jquery.com/trigger/)有什么区别

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T15:56:33.940

jQuery的`trigger`功能不一样`dispatch`，见下表来自[bugs.jquery.com/ticket/11047](http://bugs.jquery.com/ticket/11047)

```
"The trigger function should also dispatch custom events such that code using addEventListener can catch the custom event. However, that is not happening. In fact, that is the only of the 8 combinations listed below that does not work. We should fix this to allow better interoperability between jQuery event functions and W3C DOM event functions."

PASS: If you trigger a DOM event you can catch it using the bind function
PASS: If you trigger a DOM event you can catch it using the addEventListener function
PASS: If you trigger a custom event you can catch it using the bind function
FAIL: If you trigger a custom event you can NOT catch it using the addEventListener function
PASS: If you dispatch a DOM event you can catch it using the bind function
PASS: If you dispatch a DOM event you can catch it using the addEventListener function
PASS: If you dispatch a custom event you can catch it using the bind function
PASS: If you dispatch a custom event you can catch it using the addEventListener function 
```

# html - jQuery无法选择嵌套在表格中的表单输入

> ID：11394537
> 
> 赞同：1
> 
> 时间：2012-07-09T11:57:10.543
> 
> 标签：html, forms, html-table, jquery-selectors

我有一个带有输入元素的 html 表单。每次我将该表单放入 table tag `<table><form></form></table>`时，jQuery 选择器都无法选择表单内的输入。

这是代码：

```
<script type="text/javascript">
  $(document).ready(function(){
    $("#myForm #textinput1").val("hahaha");
  });   
</script>
<table>
<form name="myForm" id="myForm">
<input type="text" name="textinput1" id="textinput1" />
</form>
</table> 
```

但以下工作：

```
<form name="myForm" id="myForm">
<table><input type="text" name="textinput1" id="textinput1" /></table>
</form> 
```

以下也适用：

```
<script type="text/javascript">
    $(document).ready(function(){
        $("#textinput1").val("hahaha");
    }); 
</script>
<table>
    <form name="myForm" id="myForm">
    <input type="text" name="textinput1" id="textinput1" />
    </form>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T12:13:07.993

首先，A`table`不能`form`直接包含 a。

您可以将表格嵌套在表单中。

```
<form>
  <table>
    <tr> <td> My Content </td> </tr>
  <table>
</form> 
```

或者

```
<table>
    <tr> 
       <td> 
          <form>My Content </form>
       </td> 
    </tr>
 <table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:05:35.303

试试这个

```
 document.getElementById("textinput1").value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-10T06:54:47.590

```
<script type="text/javascript">
$(document).ready(function(){
    $("#textinput1").val("hahaha");
}); 
```

```
<table>
<form name="myForm" id="myForm">
<input type="text" name="textinput1" id="textinput1" />
</form> 
```

在上面的代码中，您直接使用其 id 选择输入元素。如果您尝试选择喜欢

```
$("form#myform #textinput1").val("hahaha"); 
```

你不能。直到您的表格中有表格。

# jquery - 从 JQuery 代码调用 perl 脚本

> ID：11394539
> 
> 赞同：0
> 
> 时间：2012-07-09T11:57:15.237
> 
> 标签：jquery, perl

我正在尝试`getNewFollowing.pl`从 jquery 运行脚本，这是代码：

```
$(document).ready(function(){
    $("#cross").livequery("click", function(e){
        e.preventDefault();
        $.post("getNewFollowing.pl, 
        function(data){
         $('#follow_name1').text(data.userName);
           $('#follow_email1').text(data.userEmail);                    
     });

  });
}); 
```

当我单击带有 的链接时`ID="cross"`，它应该调用一个返回 userName 和 userEmail 的 perl 文件。

此代码不调用 perl 脚本。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:03:53.990

脚本无法运行的原因可能有很多，这取决于您使用的 Web 服务器及其配置。

最好的学习/做的是：

1.  如果您使用的是 chrome，请使用 JavaScript 调试器，例如 Chrome 开发人员工具；如果您使用的是 Firefox，请使用 firebug。
2.  在行（工具的脚本部分）上设置断点，然后查看发生了什么。从长远来看，这将对您有所帮助。

[http://getfirebug.com/javascript/](http://getfirebug.com/javascript/)

[https://developers.google.com/chrome-developer-tools/docs/overview](https://developers.google.com/chrome-developer-tools/docs/overview)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T12:05:23.470

您在“getNewFollowing.pl”之后缺少引号 (")。

```
$(function(){
    $("#cross").livequery("click", function(e){
       e.preventDefault();
       $.post("getNewFollowing.pl", {}, function(data){
           $('#follow_name1').text(data.userName);
           $('#follow_email1').text(data.userEmail);                    
       });
    });
}); 
```

请注意，有很多有用的工具（适用于所有主要浏览器）可以帮助您更快地缩小此类问题的范围。当您提出问题时，来自这些工具的信息也会在 StackOverflow 上得到重视。

# java - java - 如何在java中输出一个字符串，这样单词就不会被拆分？

> ID：11394548
> 
> 赞同：1
> 
> 时间：2012-07-09T11:57:52.967
> 
> 标签：java, formatting, space

我开始学习java，基本上是想做一些编码练习。我的搜索把我带到了 javaranch，我完成了他们的第一个任务，这并不难。对我来说最困难的部分是第二部分。第一部分是您只需编写一个程序，该程序将从命令行读取一个名称并将其写出 100 次。现在第二部分希望我以不会在屏幕边缘分裂的方式显示单词。一旦单词不适合右侧，它就希望我将整个单词移到下一行。这是我的代码。

```
 public class Hundred
{
    public static void main( String [] args)
    {
        System.out.println();
        for (int i = 0; i <=100; i++)
        {
            if  (args.length == 0)
            {
                System.out.println("I've got nothing to show you");
            }
            else
            {
                System.out.print( args[0] + " ");
            }           
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:02:03.527

将视图与模型分开：在打印之前创建要打印的东西。

像这样：

```
import java.io.StringWriter;

public class Hundred {
    public static void main(String[] args) {
        StringWriter sw = new StringWriter(1024);
        for (int i = 0; i < args.length; ++i) {
            sw.append(args[i]).append(' ');
        }
        System.out.println(sw.toString());
    }
} 
```

在循环内添加逻辑以检查当前 StringWriter 的长度，如果超出您的要求，则打印和刷新。

# blackberry - 如何使用网站上的 IP 地址检测 RIM / Blackberry 的用户位置？

> ID：11394549
> 
> 赞同：1
> 
> 时间：2012-07-09T11:57:54.713
> 
> 标签：blackberry, http-headers, location

我经营一个网站，该网站在国家一级根据用户的位置定制内容，以便来自不同国家的用户看到不同的内容。为了确定用户的位置，我们针对 MaxMind.com 的 GeoIP 数据库运行客户端在 REMOTE_ADDR 标头中提供的 IP 地址。对于桌面流量，这通常会为我们返回足够准确的数据。

但是，对于从移动设备浏览的用户来说，情况就不同了。例如，同一用户从桌面上的南非 IP 地址和他的黑莓上的英国地址访问。我们知道他身在南非。经调查，他的英国IP地址属于Research In Motion Limited，这显然是英国的黑莓服务。他在黑莓手机上的网络请求必须通过英国的 RIM 进行路由。

我们查看了请求标头，以查看实际的源 IP 地址是否显示在 REMOTE_ADDR 以外的标头中，但没有找到任何东西。

有什么建议么？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:11:05.087

使用 BIS 或 BES 时，流量通过代理服务器路由，在 BIS 的情况下由 RIM 运行，或者由托管 BES 服务器的公司运行。您可以尝试使用 HTML5 定位功能。

# javascript - 是否可以通过 WebView.addJavascriptInterface 从 JS 端接收对象？

> ID：11394554
> 
> 赞同：1
> 
> 时间：2012-07-09T11:58:08.783
> 
> 标签：javascript, android, cordova, android-webview

我可以`Object`通过`WebView.addJavascriptInterface`接口接收吗？就像是：

```
public class JavaScriptInterface {
    public void method(WhatEverKindOfType param) {
        Log.i(tag, param.toString());
    }
} 
```

（与`theView.addJavascriptInterface(new JavaScriptInterface(), "obj");`：）

在 中`JS`，例如：`obj.method(myEvent);`

我显然尝试过，使用`Object param`and `String param`，但它们都以`null`. 我知道我可以`JSON.stringify`，但这带来了圆形对象问题（我知道这是可以解决的，但我不想开始搞砸它）

甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:37:14.123

首先，如果您使用的是 PhoneGap，则不应使用 addJavascriptInterface。拜托，请写一个[PhoneGap插件](http://wiki.phonegap.com/w/page/36752779/PhoneGap%20Plugins)。您想要使用我们的插件接口的原因是我们已经解决了 addJavascriptInterface 的一些问题。

当您使用插件接口时，您将 JSONArray 传递给 Java 端。它支持所有基本类型，如 int、String、boolean，当然还有 JSONObject。您可以存储更多结构化数据的是 JSONObject。

# iphone - 如何通过蓝牙将 iOS 视频流式传输到另一台设备？

> ID：11394555
> 
> 赞同：0
> 
> 时间：2012-07-09T11:58:11.477
> 
> 标签：iphone, ios, video, bluetooth, video-streaming

对于基于视频的游戏，我想将一台设备的视频流式传输到另一台设备。有没有办法用蓝牙做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:19:30.317

您可以通过蓝牙传输您喜欢的任何数据。但是，您可能会受到蓝牙连接上可用带宽的限制。

# java - 使用正则表达式从java中的字符串中提取序列

> ID：11394557
> 
> 赞同：1
> 
> 时间：2012-07-09T11:58:15.493
> 
> 标签：java, regex

我有一个带有模式的日志。问题是最后它与普通的有点不同。

```
a>  nc,71802265,0,"Tuesday, June 26, 2012 09:06:49 UTC",38.8335,-122.8072,1.6,0.00,21,"Northern California"
b>  ci,11127314,0,"Tuesday, June 26, 2012 08:37:52 UTC",34.2870,-118.3360,2.2,10.20,100,"Greater Los Angeles area, California"
c>  us,b000aqpn,6,"Tuesday, June 26, 2012 08:29:55 UTC",53.4819,-165.2794,4.4,25.60,96,"Fox Islands, Aleutian Islands, Alaska"

String regex = "^\\"[a-z,A-Z]\\s*\\(,)*[a-z,A-Z]\\"";
Pattern p = Pattern.compile(regex, Pattern.MULTILINE); 
```

从 a 我需要 --- “北加州” 从 b 我需要 --- “大洛杉矶地区，加利福尼亚”等等

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:03:38.673

您可以使用[`String#lastIndexOf`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#lastIndexOf%28java.lang.String,%20int%29), 从倒数第二个字符开始找到第一个`"`：

```
 String s = "a>  nc,71802265,0,\"Tuesday, June 26, 2012 09:06:49 UTC\",38.8335,-122.8072,1.6,0.00,21,\"Northern California\"";
    int start = s.lastIndexOf("\"", s.length() - 2) + 1;
    String location = s.substring(start, s.length() - 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:04:19.897

为什么不使用[String.split(regex, limit)](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29)并指定您需要拆分的逗号数。

这样你就可以*用逗号完整地*得到最后一个字段，然后简单地去掉双引号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T12:04:52.790

使用`$`锚来告诉你的匹配应该在行尾：

```
String lines = "a>  nc,71802265,0,\"Tuesday, June 26, 2012 09:06:49 UTC\",38.8335,-122.8072,1.6,0.00,21,\"Northern California\"\nb>  ci,11127314,0,\"Tuesday, June 26, 2012 08:37:52 UTC\",34.2870,-118.3360,2.2,10.20,100,\"Greater Los Angeles area, California\"\nc>  us,b000aqpn,6,\"Tuesday, June 26, 2012 08:29:55 UTC\",53.4819,-165.2794,4.4,25.60,96,\"Fox Islands, Aleutian Islands, Alaska\"";
    String regex = "\"[^\"]*\"$";
    Matcher m = Pattern.compile(regex, Pattern.MULTILINE).matcher(lines);
    while (m.find()) {
        System.out.println(m.group());
    } 
```

输出：

```
"Northern California"
"Greater Los Angeles area, California"
"Fox Islands, Aleutian Islands, Alaska" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T12:33:18.260

```
for(String s: log.split("\n")){
    System.out.println(s.replaceAll(".+(\".+\")$","$1"));
 } 
```

# javascript - 将一个 div 覆盖在另一个上，但不知道 div 的大小

> ID：11394568
> 
> 赞同：4
> 
> 时间：2012-07-09T11:59:03.913
> 
> 标签：javascript, html, css

我正在尝试将一个 div 放在另一个上。如果您知道 div 的尺寸，这真的很简单。

此处已解决： [如何将一个 div 覆盖在另一个 div 上](https://stackoverflow.com/questions/2941189/how-to-overlay-one-div-over-another-div)

所以，这是我的 HTML：

```
<div class="container">
  <div class="overlay"></div>
  <div class="content"></div>
</div> 
```

就我而言，我不知道“内容”或“容器”div 的确切尺寸。这是因为我无法控制 div 中的任何内容（我们正在使我们的应用程序可扩展以供 3rd 方开发人员使用）。

[请参阅我在 jsFiddle 上](http://jsfiddle.net/andyuk/YWfTM/10/) 的示例 叠加层应完全覆盖内容。宽度 100% 和高度 100%。但是，这不起作用，因为在我的示例中，我绝对定位了叠加层。

一种解决方案是使用 JavaScript 获取内容 div 的大小，然后设置叠加层的大小。我不太喜欢这种解决方案，因为如果未指定图像大小，则需要等到图像加载完毕并重新计算 div 的大小。

有没有办法在 CSS 中解决这个问题？ 

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:08:48.537

您可以将位置设置为绝对，然后将所有 4 个定位值设置为`0px`使框展开。在此处查看演示：http: [//jsfiddle.net/6g6dy/](http://jsfiddle.net/6g6dy/)

这样，如果您想在覆盖层或容器上填充（就像您使用实际值`height`和`width`值一样），您不必担心重新计算事物，因为它总是会调整到框的外部尺寸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T22:12:44.310

这是不可能的，因为：

1.  覆盖不包含任何限制其大小的东西（因为没有应用到容器的高度/宽度）。
2.  内容 div 的大小可以随着内容加载而改变（因为它没有固定的宽度/高度）。

我通过使用 JavaScript* 解决了这个问题。例如。

```
function resizeOverlay() {
  $('.overlay').css({
    width: $('.content').width()
    height: $('.content').height()
  });
}
$('.content').find('img').on('load', resizeOverlay); 
```

*代码未经测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T12:06:48.343

看到这个演示：http: [//jsfiddle.net/rathoreahsan/kEsbx/](http://jsfiddle.net/rathoreahsan/kEsbx/)

您是否尝试按照上述演示中的说明进行操作？

**CSS：**

```
#container {
    position: relative;
}

.overlay,
.content{
    display:block;
    position: absolute;
    top: 0;
    left: 0;
}

.overlay{
    z-index: 10;
    background: #ccc;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T12:11:05.970

嘿，你看起来像这样吗： http: [//tinkerbin.com/Vc4RkGgQ](http://tinkerbin.com/Vc4RkGgQ)

**CSS**

```
.container {
position:relative;
background:blue;
  color:white;
}

.content {
position:absolute;
top:0;
left:15px;
background:red;
color:yellow;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T12:11:52.077

我不知道您到底想做什么，但这可能有效：

`container`必须是`relative`：来自静态的任何东西

`overlay`并且`content`是`absolute`：在第一个非静态父级中移动顶部/左侧；无流量。
给相同`top/left`的顶部和更高`z-index`的上部元素。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-30T09:12:01.460

你确实可以在没有 JavaScript 的情况下做到这一点。您的问题是`#container`元素相对于整个页面具有 100% 的宽度。要解决此问题，您可以：

a) 绝对定位，

```
#container {
   position: absolute;
} 
```

b) 使其浮动或

```
#container {
   float: left;
} 
```

c) 使其显示为表格单元格

```
#container {
   display: table-cell;
} 
```

以上一项就够了，不需要全部申请。此外，您不应该`.content`绝对定位，因为这会阻止`#container`具有相同的宽度/高度。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-05T17:16:32.140

如果您担心在设置高度后加载图像，您可以继续在包含的 div 中设置图像的尺寸并使用[padding-bottom hack](http://andyshora.com/css-image-container-padding-hack.html)。这样，当浏览器在页面上绘制时，它就知道图像在加载之前会有多大。

# php - PHP：is_int 返回错误结果

> ID：11394582
> 
> 赞同：1
> 
> 时间：2012-07-09T11:59:59.067
> 
> 标签：php

我通过表单和 php 文件使用发布数值，`var_dump(is_int($my_var));`但它返回`bool(false)`虽然我发布**1**，如果我使用`var_dump(is_int(1));`它很好并返回`bool(true)` 什么是错误的......？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T12:07:18.627

POST 请求传输的变量是字符串，因此您调用`is_int()`的字符串返回 false。

您可以使用[`is_numeric()`](http://php.net/manual/en/function.is-numeric.php)or[`filter_var()`](http://php.net/manual/en/function.filter-var.php)代替或简单地将变量转换为整数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T12:10:46.907

```
// First check if it's a numeric value as either a string or number
    if(is_numeric($int) === TRUE){

        // It's a number, but it has to be an integer
        if((int)$int == $int){

            return TRUE;

        // It's a number, but not an integer, so we fail
        }else{

            return FALSE;
        }

    // Not a number
    }else{

        return FALSE;
    } 
```

此外，而不是将变量作为

```
$my_var = $_POST["value"]; 
```

试试这个，看看这个值是否真的被传递了。

```
$my_var = $_REQUEST["value"]; 
```

# javascript - 如何使幻灯片在幻灯片上自动更改

> ID：11394586
> 
> 赞同：0
> 
> 时间：2012-07-09T12:00:14.823
> 
> 标签：javascript, jquery, css, slider

我在我的网站上添加了一个 Jquery 滑块（称为 SudoSlider），带有“上一张”和“下一张”按钮，允许用户前进到下一张幻灯片，或返回一张。但是，我想使幻灯片自动更改。

我遇到了与此类似的问题，但我的 Javascript 相当有限，因此我无法使用提供给其他用户的代码。

如果有人可以帮助我实现这一目标，我将不胜感激。

请在此处查看此[JSFiddle](http://jsfiddle.net/DanCUK89/VN7F8/)以了解使用的代码。

此外，如果 JSFiddle 没有用，滑块可以在[此处看到。](http://tinyurl.com/cafzwoz)

首先十分感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:03:30.710

这是工作小提琴：http: [//jsfiddle.net/surendraVsingh/VN7F8/1/](http://jsfiddle.net/surendraVsingh/VN7F8/1/)

我只是更改了加载 javascript 的顺序。以下是包含 javascript 的完整 HTML 并包含您拥有的外部 css。

HTML 更改：

```
<html>
  <head>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"/></script>
<script type="text/javascript" src="http://www.pinknoise-systems.co.uk/userfiles/jquery/slider/js/jquery.sudoSlider.min.js"/></script>
<script type="text/javascript">
    $(document).ready(function(){    
            var sudoSlider = $("#slider").sudoSlider();
     });    
</script>
</head>
<body>
<div id="container">
    <div style="position:relative;">
        <div id="slider">
            <ul>                
                <li>
                    <div style="margin:0 auto;text-align:center;height:300px;">
                        <img src="http://www.pinknoise-systems.co.uk/userfiles/images/final_slide_6.png" />
                    </div>
                </li>
                <li>
                    <div style="margin:0 auto;width:620px;height:300px;background:url('http://www.pinknoise-systems.co.uk/userfiles/images/final_slide_5.png');">

                    <div class="product_row_1">
                        <div class="one">
                        <a href="http://www.pinknoise-systems.co.uk/Sennheiser_SKP_300_G3--product--1091.html" class="slide_product_name">Sennheiser SKP 300 G3</a>
                        <div class="p-image"><a href="http://www.pinknoise-systems.co.uk/Sennheiser_SKP_300_G3--product--1091.html"><img src="http://www.pinknoise-systems.co.uk/userfiles/images/monthly/skp300.jpg" /></a></div>
                        <div class="p-content">
                            <img src="http://www.pinknoise-systems.co.uk/userfiles/images/monthly/4_stars.png" />
                            <p class="slide_product_price">£296.00</p>
                             <p class="slide_product_price2">EX VAT @20%</p>
                        </div>
                        </div>

                        <div class="two margin-3">
                         <a href="http://www.pinknoise-systems.co.uk/Fostex_PM841_Professional_Studio_Monitor--product--1110.html" class="slide_product_name">Fostex PM8.4.1</a>
                        <div class="p-image"><a href="href="http://www.pinknoise-systems.co.uk/Fostex_PM841_Professional_Studio_Monitor--product--1110.html""><img src="http://www.pinknoise-systems.co.uk/userfiles/images/monthly/pm841.jpg" /></a></div>
                        <div class="p-content">
                            <img src="http://www.pinknoise-systems.co.uk/userfiles/images/monthly/4_stars.png" />
                            <p class="slide_product_price">£412.50</p>
                           <p class="slide_product_price2">EX VAT @20%</p>
                        </div>
                        </div>

                        <div class="three margin-3">
                         <a href="http://www.pinknoise-systems.co.uk/Delkin_Wingman_HD_3oz_Waterproof_Action_Camera--product--850.html" class="slide_product_name">Delkin Wingman</a>
                        <div class="p-image"><a href="http://www.pinknoise-systems.co.uk/Delkin_Wingman_HD_3oz_Waterproof_Action_Camera--product--850.html"><img src="http://www.pinknoise-systems.co.uk/userfiles/images/monthly/wingman.jpg" /></a></div>
                        <div class="p-content">
                            <div class="4stars"><img src="http://www.pinknoise-systems.co.uk/userfiles/images/monthly/4_stars.png" /></div>
                            <p class="slide_product_price">£179.19</p>
                            <p class="slide_product_price2">EX VAT @20%</p>
                        </div>
                        </div>

                    </div>

                    <div class="product_row_2">
                        <div class="one">
                        <a href="http://www.pinknoise-systems.co.uk/DFocus_Street_Runner_Bundle--product--1104.html" class="slide_product_name">D|Focus Street Runner Kit</a>
                        <div class="p-image"><a href="http://www.pinknoise-systems.co.uk/DFocus_Street_Runner_Bundle--product--1104.html"><img src="http://www.pinknoise-systems.co.uk/userfiles/images/monthly/streetrunnerbundle.jpg" /></a></div>
                        <div class="p-content">
                            <div class="4stars"><img src="http://www.pinknoise-systems.co.uk/userfiles/images/monthly/4_stars.png" /></div>
                            <p class="slide_product_price">£332.50</p>
                            <p class="slide_product_price2">EX VAT @20%</p>
                        </div>
                        </div>

                        <div class="two margin-3">
                         <a href="http://www.pinknoise-systems.co.uk/DFocus_Field_Runner_Bundle--product--1105.html" class="slide_product_name">D|Focus Field Runner Kit</a>
                        <div class="p-image"><a href="http://www.pinknoise-systems.co.uk/DFocus_Field_Runner_Bundle--product--1105.html"><img src="http://www.pinknoise-systems.co.uk/userfiles/images/monthly/fieldrunnerkit.jpg" /></a></div>
                        <div class="p-content">
                            <div class="4stars"><img src="http://www.pinknoise-systems.co.uk/userfiles/images/monthly/4_stars.png" /></div>
                            <p class="slide_product_price">£382.50</p>
                             <p class="slide_product_price2">EX VAT @20%</p>
                        </div>
                        </div>

                        <div class="three margin-3">
                         <a href="http://www.pinknoise-systems.co.uk/DFocus_Austin_Rig_Bundle--product--1106.html" class="slide_product_name">D|Focus Austin Rig Bundle</a>
                        <div class="p-image"><a href="http://www.pinknoise-systems.co.uk/DFocus_Austin_Rig_Bundle--product--1106.html"><img src="http://www.pinknoise-systems.co.uk/userfiles/images/monthly/austinrigbundle.jpg" /></a></div>
                        <div class="p-content">
                            <img src="http://www.pinknoise-systems.co.uk/userfiles/images/monthly/4_stars.png" />
                            <p class="slide_product_price">£499.17</p>
                            <p class="slide_product_price2">EX VAT @20%</p>
                        </div>
                        </div>

                    </div>

                    </div>
                </li>    
            <li>
                    <div style="margin:0 auto;text-align:center;">
                        <img src="http://www.pinknoise-systems.co.uk/userfiles/images/final_slide_3.jpg" />
                    </div>
                </li>

                <li>
                    <div style="margin:0 auto;text-align:center;">
                        <img src="http://www.pinknoise-systems.co.uk/userfiles/images/final_slide_4.jpg" />
                    </div>
                </li>
            </ul>
        </div>
    </div>
    </div>
</body>
</html> 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:07:41.107

试试这个，它将滑块设置为自动更改。

```
 $(document).ready(function(){    
        var sudoSlider = $("#slider").sudoSlider({fade: true,auto:true});
    }); 
```

这是[工作链接](http://jsfiddle.net/VN7F8/2/)

# c# - ShouldSerialize 模式和 DataContractSerializer

> ID：11394587
> 
> 赞同：4
> 
> 时间：2012-07-09T12:00:19.417
> 
> 标签：c#, datacontractserializer

有没有办法让这个`ShouldSerialize*`模式工作`DataContractSerializer`？

这是一个小例子：

我有一个简单的类`Person`，如下所示：

```
[DataContract]
public class Person
{
  [DataMember]
  public string FirstName { get; set; }
  public bool ShouldSerializeFirstName()
  {
    return !string.IsNullOrEmpty(FirstName);
  }

  [DataMember]
  public string LastName { get; set; }
  public bool ShouldSerializeLastName()
  {
    return !string.IsNullOrEmpty(LastName);
  }

  public Person(string firstName, string lastName)
  {
    FirstName = firstName;
    LastName = lastName;
  }
  public Person(string firstName)
  {
    FirstName = firstName;
  }
  public Person()
  {
  }
} 
```

`FirstName`或者`LastName`仅当它们不为 null 或为空时才应序列化。这适用于`XmlSerializer`但`DataContractSerializer`似乎忽略了`ShouldSerialize`模式。该`*Specified`模式也不起作用。

我正在创建两个不同的 Xml 文件。一个带有 DataContractSerializer，一个带有 XmlSerializer：

```
List<Person> persons = new List<Person>();
persons.Add (new Person("John", "Doe"));
persons.Add (new Person("Carl"));

DataContractSerializer serializer = new DataContractSerializer (typeof (List<Person>));
using (XmlWriter writer = XmlWriter.Create(@"c:\test1.xml", settings))
{
  serializer.WriteObject (writer, persons);
}

XmlSerializer xmlSerializer = new XmlSerializer (typeof (List<Person>));
XmlWriter xmlWriter = XmlWriter.Create (@"c:\text2.xml", settings);
xmlSerializer.Serialize (xmlWriter, persons);
xmlWriter.Close(); 
```

文件`test1.xml`(DataContractSerializer) 的输出如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<ArrayOfPerson xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/XmlSerialization">
  <Person>
    <FirstName>John</FirstName>
    <LastName>Doe</LastName>
  </Person>
  <Person>
    <FirstName>Carl</FirstName>
    <LastName i:nil="true" />
  </Person>
</ArrayOfPerson> 
```

文件`test2.xml`(XmlSerializer) 的输出如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<ArrayOfPerson xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Person>
    <FirstName>John</FirstName>
    <LastName>Doe</LastName>
  </Person>
  <Person>
    <FirstName>Carl</FirstName>
  </Person>
</ArrayOfPerson> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-28T08:32:13.637

AFAIK，ShouldSerialize* 不适用于数据合同序列化程序。凯文的回答是没用的。你可以删除它。不幸的是，给出的代码仅在您处理空值时才有效。

这是一个更通用的解决方案：它根据给定条件返回空值。

```
 [DataContract]
    public class Person
    {
      private string firstName;
      [DataMember(IsRequired = false, EmitDefaultValue = false)]
      public string FirstName
      {
        get
        {
            //Put here any condition for serializing
            return string.IsNullOrWhiteSpace(firstName) ? null : firstName;
        }
        set
        {
            firstName = value;
        }
      }
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T12:02:54.820

您应该在 DataMember 上设置 IsRequired 属性：

```
[DataContract]
public class Person
{
  [DataMember(IsRequired = False, EmitDefaultValue = False)]
  public string FirstName { get; set; }
  ...
} 
```

# javascript - 使用 window.location =“mailto”将 HTML 格式发送到 Outlook

> ID：11394592
> 
> 赞同：0
> 
> 时间：2012-07-09T12:00:46.487
> 
> 标签：javascript, html, outlook-2010

我正在尝试将 HTML 数据发送到 Outlook，但它带有纯文本。

```
window.location ="mailto:"+emails+" bcc=client@xlgateway.com&subject="+subject+"&body="+body; 
```

`body`是 HTML 表格。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:11:43.590

无法使用 mailto 将 HTML 代码作为正文发送。

# c++ - 将鼠标光标隐藏在 Windows 中的特定客户区上

> ID：11394594
> 
> 赞同：1
> 
> 时间：2012-07-09T12:00:52.043
> 
> 标签：c++, windows, cursor, directx, hide

我将directx 嵌入到我的应用程序的子窗口中，并且希望仅在窗口光标位于该客户区域上方时才隐藏它。我通常知道如何隐藏光标，并且确实设法找到了一个临时示例，如果仅在光标不在任何客户区域上方时显示光标，但这对此没有帮助。如何仅在光标位于特定客户区（/子窗口）上方时隐藏光标？

编辑：这和我得到的一样接近，但是光标在 dx 区域上时会不可预测地闪烁（随着鼠标移动）

```
case WM_SETCURSOR:
{
    static bool bCursorVisible = TRUE;

    if( hWnd!=hwD3DArea && !bCursorVisible )
    {
        ShowCursor((bCursorVisible=TRUE));
    }
    else if( hWnd==hwD3DArea && bCursorVisible )
    {
        ShowCursor((bCursorVisible=FALSE));
        return TRUE;
    }
}
break; 
```

编辑2：啊哈！您必须在此消息中使用 wParam 而不是 hWnd 这是工作代码：

```
case WM_SETCURSOR:
{
    static bool bCursorVisible = TRUE;

    if( ((HWND)wParam)!=hwD3DArea && !bCursorVisible )
    {
        ShowCursor((bCursorVisible=TRUE));
    }
    else if( ((HWND)wParam)==hwD3DArea && bCursorVisible )
    {
        ShowCursor((bCursorVisible=FALSE));
        return TRUE;
    }
}
break; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-05T15:32:17.717

```
case WM_SETCURSOR:
{
    if (LOWORD(lParam) == HTCLIENT)
    {
        SetCursor(NULL);
        return TRUE;
    }

    return DefWindowProc(hWnd, msg, wParam, lParam);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T12:18:37.837

修复：

```
case WM_SETCURSOR:
        {
            static bool bCursorVisible = TRUE;
            if( ((HWND)wParam)!=hwD3DArea && !bCursorVisible )
            {
                ShowCursor((bCursorVisible=TRUE));
            }
            else if( ((HWND)wParam)==hwD3DArea && bCursorVisible )
            {
                ShowCursor((bCursorVisible=FALSE));
                return TRUE;
            }
        }
        break; 
```

我在正确的轨道上但是当我应该使用 wParam 时使用 hWnd （它保存光标所在窗口的 REAL 句柄）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T12:11:16.497

我认为如果您只是将特定客户端窗口的光标设置为空光标，它会更简单。

# python - 如何在 Python 中为用户输入命令编写一个简单的词法分析器/解析器？

> ID：11394598
> 
> 赞同：2
> 
> 时间：2012-07-09T12:01:14.943
> 
> 标签：python, parsing, lexer

对于个人项目，我需要编写一个简单的词法分析器来处理用户输入命令。它们可以包含四种模式和括号：

*   运算符 : `.`, `+`,`-`或`%`
*   名称 ([a-zA-Z0-9]) ：例如`foobar`，`fooZ`或`bar2`
*   过滤器 ([az]{1}"[some text]") ：例如`a"hello world"`，`p"escaped \"string\""`
*   其他过滤器（[az]{1}~"[some text]"）：例如`a~"hello world"`，`p~"escaped \"string\""`

我想拆分命令以获得一个分层列表（基于括号），其中包含每个运算符的条目、每个名称的条目（单个字符串）和每个过滤器的条目（字典，用于实例`{'a': 'hello world'}`或`{'p~': 'escaped "string"'}`）。

因此，这是我想通过此输入获得的示例（运算符周围的空格是可选的）：

`foo . bar - (a"hello \"world\"" % (b~"foo" + bar) . (fooZ.(bar2+(c"foo bar".d"bar foo"))))`

```
[
  'foo',
  '.',
  'bar',
  '-',
  [
    {'a': 'hello "world"'},
    '%',
    [
      {'b~': 'foo'},
      '+',
      'bar'
    ]
    '.',
    [
      'fooZ',
      '.',
      [
        'bar2',
        '+',
        [
          {'c': 'foo bar'},
          '.',
          {'d': 'bar foo'}
        ]
      ]
    ]
  ]
] 
```

我查看了 pyparsing、PLY、pyPEG、Yapps 等，但它们似乎都很难使用，我不知道我是否需要这种工具，因为我需要的语法不是很复杂。提前感谢您的建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T13:30:09.373

看看这个 pyparsing 解决方案如何解决您所说的语法：

```
from pyparsing import *
ParserElement.enablePackrat()
import string

name = Word(alphanums)

filter = (Combine(oneOf(list(string.ascii_lowercase)) + Optional('~')) +
          dblQuotedString.setParseAction(removeQuotes))
# convert parsed filter to dict
filter.setParseAction(lambda t:{t[0]:t[1]})

expr = operatorPrecedence(filter | name, 
            [
            (oneOf('. % -'), 2, opAssoc.LEFT),
            ('+', 2, opAssoc.LEFT),
            ])

test = r'foo . bar - (a"hello \"world\"" % (b~"foo" + bar) . (fooZ.(bar2+(c"foo bar".d"bar foo"))))'

print expr.parseString(test, parseAll=True).asList() 
```

印刷：

```
[['foo',
  '.',
  'bar',
  '-',
  [{'a': 'hello \\"world\\"'},
   '%',
   [{'b~': 'foo'}, '+', 'bar'],
   '.',
   ['fooZ', '.', ['bar2', '+', [{'c': 'foo bar'}, '.', {'d': 'bar foo'}]]]]]] 
```

# android - 如何从 Android 中的 onItemClick ListView 获取值

> ID：11394606
> 
> 赞同：-2
> 
> 时间：2012-07-09T12:01:39.673
> 
> 标签：android, listview, onitemclicklistener

我有一个`myval`字符串类型的全局变量。

```
String[] Category={"----SELECT----","BEVERAGES","BREAKFAST","LUNCH","DINNER","DESSERTS","APPETIZERS & SIDES"};
String[] Beverage={"PEPSI","COKE","LASSI","FALOODA","BUTTER MILK","GREEN TEA","BADAM MILK","MASALA CHAI" };
String[] Breakfast={"SIRLOIN & EGG","CFS STEAK & EGG","T-BONE & EGG","TWO EGGS BREAKFAST","2EGG W/MEAT","BEL WAFFLE","BEL WAFFLE W/MEAT","BLUEBERRY CAKE","CAKES","FABULOUS FRENCH TST","MOONS","FRENCH TST"};
String[] Lunch={" CRAB CAKE SANDWICH","TUSCAN GRILLED CHICKEN PANINI","SOUTHWEST TURKEY CLUB"," LOBSTER ROLL","TUNA MELT"," FRENCH DIP","YOUR OWN SANDWICH"};
String[] Dinner={"DUBLIN BAY PRAWN","CRAB FROM BRITTANY","WHITE ASPARAGUS","BLEWIT MUSHROOM","JOHN DORY FISH","MONKFISH","VEAL SWEET BREAD","LAMB","PIGEON FRY"};
String[] Desserts={"ECHOURGNAC CHEESE","HAZELNUT","GARIGUETTE STRAWBERRY","MOUSSE & ZEST","APRICOT","CHOCOLATE"};
String[] Appetizers={"Greek Artichoke Spinach","Seafood Appetizers","Tapenade Flatbread","Cranberry Blue Cheese","Fig and Blue Cheese","Sun-Dried Tomato","Tropical Crab Rangoon"};

class GlobalClass extends Application {
     public static String[] myval;

}   

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.home);
    spinner = (Spinner) findViewById(R.id.spinnerCategory);
    l1=(ListView) findViewById (R.id.list);
    b1=(Button)findViewById(R.id.button3);
    b2=(Button)findViewById(R.id.button2);
    b3=(Button)findViewById(R.id.button1);
    e1=(EditText)findViewById(R.id.editText1);
    e2=(EditText)findViewById(R.id.editText2);
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item, Category);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(adapter);
    final ArrayAdapter<String> bever = new ArrayAdapter<String>(this,        android.R.layout.simple_list_item_1, Beverage);

    // Assign adapter to ListView
    final ArrayAdapter<String> Breakf = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, Breakfast);
    final ArrayAdapter<String> lunc= new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, Lunch);     
    final ArrayAdapter<String> Dinn= new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, Dinner);     
    final ArrayAdapter<String> Dessert = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, Desserts);     
    final ArrayAdapter<String> Appet= new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, Appetizers);     

    spinner.setOnItemSelectedListener(new OnItemSelectedListener(){
         public void onItemSelected(AdapterView<?> parent, View arg1, int pos,long id){           
             String Text = parent.getSelectedItem().toString();
             if(Text.equals("----SELECT----")) {                
             }      
             else if(Text.equals("BEVERAGES")){

            l1.setAdapter(bever);              
            return;
             }    
             else if(Text.equals("BREAKFAST")){

            l1.setAdapter(Breakf);
            return;
             }
             else if(Text.equals("LUNCH")){

            l1.setAdapter(lunc);
            return;
             }
             else if(Text.equals("DINNER")){
            l1.setAdapter(Dinn);
            return;            
             }
             else if(Text.equals("DESSERTS")){
            l1.setAdapter(Dessert);
            return;            
             }
             else if(Text.equals("APPETIZERS & SIDES")){
            l1.setAdapter(Appet);
            return;            
             }
         }
         public void onNothingSelected(AdapterView<?> arg0){
         }             
     });
     l1.setOnItemClickListener(new OnItemClickListener() {

         public void onItemClick(AdapterView<?> parent, View view,int position, long id) {                      
              // When clicked, show a toast with the TextView text
              Toast.makeText(getApplicationContext(), "SELECTED :: " +((TextView) view).getText(),
              Toast.LENGTH_SHORT).show();
              long ii=(long) l1.getItemIdAtPosition((int) id);
              //Get the value from listView click item                   
              String[] S5=new String[]{a5};
              //String[] S1=new String[]{s2};
              GlobalClass.myval=S5;
        });            
        b1.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

                 String tno = e1.getText().toString();
                 int tn = Integer.parseInt(tno);

                 Intent i=new Intent(getApplicationContext(),TicketActivity.class);
                 Bundle b=new Bundle();
                 b.putInt("Table No:", tn);
                 i.putExtras(b);
                 String et= e2.getText().toString();
                 int et1 = Integer.parseInt(et);
                 Bundle be=new Bundle();
                 be.putInt("Guest:", et1);
                 i.putExtras(be); 

                 startActivity(i);                    
            }
        });            
        b3.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                Intent intent=new Intent(HomeActivity.this,PaynowActivity.class);
                startActivity(intent);
            }
        });             
        b2.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                Intent m=new Intent(HomeActivity.this,OrderinfoActivity.class);
                startActivity(m);
            }
        });
    }        
} 
```

如何从`onItemClick`ListView 中获取值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:24:20.440

```
 ArrayAdapter<String> adapter=new ArrayAdapter<String>(HotelActivity.this, android.R.layout.simple_list_item_1,Category);
        listView.setAdapter(adapter);

        listView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View v, int position,
                    long id) {
                if(position>0){
                    Intent intent=new Intent(HotelActivity.this,NewList.class);
                    intent.putExtra("position", position);
                    startActivity(intent);
                }
            }
        }); 
```

创建新 Activity 并在其 xml 文件中声明 listview

新列表活动：

```
public class NewList extends Activity{
    ListView listView;
    int pos=0;
    ArrayAdapter<String> adapter;
    String[] Beverage={"PEPSI","COKE","LASSI","FALOODA","BUTTER MILK","GREEN TEA","BADAM MILK","MASALA CHAI" };
    String[] Breakfast={"SIRLOIN & EGG","CFS STEAK & EGG","T-BONE & EGG","TWO EGGS BREAKFAST","2EGG W/MEAT","BEL WAFFLE","BEL WAFFLE W/MEAT","BLUEBERRY CAKE","CAKES","FABULOUS FRENCH TST","MOONS","FRENCH TST"};
    String[] Lunch={" CRAB CAKE SANDWICH","TUSCAN GRILLED CHICKEN PANINI","SOUTHWEST TURKEY CLUB"," LOBSTER ROLL","TUNA MELT"," FRENCH DIP","YOUR OWN SANDWICH"};
    String[] Dinner={"DUBLIN BAY PRAWN","CRAB FROM BRITTANY","WHITE ASPARAGUS","BLEWIT MUSHROOM","JOHN DORY FISH","MONKFISH","VEAL SWEET BREAD","LAMB","PIGEON FRY"};
    String[] Desserts={"ECHOURGNAC CHEESE","HAZELNUT","GARIGUETTE STRAWBERRY","MOUSSE & ZEST","APRICOT","CHOCOLATE"};
    String[] Appetizers={"Greek Artichoke Spinach","Seafood Appetizers","Tapenade Flatbread","Cranberry Blue Cheese","Fig and Blue Cheese","Sun-Dried Tomato","Tropical Crab Rangoon"};
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mylist);

        listView=(ListView) findViewById(R.id.newlist);
        Bundle bundle=getIntent().getExtras();
        if(bundle!=null){
            pos=bundle.getInt("position");
        }

        if(pos==1){
            adapter=new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_list_item_1,Beverage);
            listView.setAdapter(adapter);
        }
        else if(pos==2){
            adapter=new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_list_item_1,Breakfast);
            listView.setAdapter(adapter);
        }
        else if(pos==3){
            adapter=new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_list_item_1,Lunch);
            listView.setAdapter(adapter);
        }
        else if(pos==4){
            adapter=new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_list_item_1,Dinner);
            listView.setAdapter(adapter);
        }
        else if(pos==5){
            adapter=new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_list_item_1,Desserts);
            listView.setAdapter(adapter);
        }
        else if(pos==6){
            adapter=new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_list_item_1,Appetizers);
            listView.setAdapter(adapter);
        }
    }

} 
```

希望这会帮助你。

# iphone - Iphone 默认键盘“开始”按钮操作不适用于 PhoneGap

> ID：11394607
> 
> 赞同：2
> 
> 时间：2012-07-09T12:01:43.430
> 
> 标签：iphone, objective-c, button, cordova, keyboard

我正在使用**PhoneGap 1.8.1**在 Iphone 中构建应用程序。

我有一个登录窗口（下面附上屏幕截图）。

有两个 html 文本框（一个用于输入用户名，另一个用于输入密码）和一个用于登录的登录按钮。

我可以使用下面的代码通过我的登录按钮成功登录。

```
<input type="button" value="Login" id="btnSubmit" class="blueButton" data-role="none"/>

$("#btnLogin").click(function(){  

    var username = $("#txtUsername").val(); 
    var password = $("#txtPassword").val();
           //do login actions ….
}); 
```

当用户点击 iPhone 键盘“开始”按钮时，我必须触发相同的登录功能。但是，当用户点击 iOS 默认键盘“开始”按钮时，我无法触发登录按钮操作。

我可以知道如何在 PhoneGap 中注册/触发键盘“Go”按钮事件。

我在[重载 iPhone 的“GO”按钮中找到了相关的帖子](https://stackoverflow.com/questions/4667247/overloading-the-iphone-go-button-to-perform-an-action)

但是我没有找到任何好的答案。

对此问题的任何帮助表示赞赏。

谢谢。

![登录画面](../Images/e389b52081d245ca2437f8c3ebb77878.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T13:28:30.453

尝试制作你的按钮类型`submit`

```
<input type="submit" value="Login" id="btnSubmit" class="blueButton" data-role="none"/> 
```

或在表单提交上绑定事件

```
$("#loginForm").form(function(){  
    // do event prevention if required

    var username = $("#txtUsername").val(); 
    var password = $("#txtPassword").val();
           //do login actions ….
}); 
```

虽然这个问题似乎与 Phonegap (Cordova) 无关，因为它在浏览器中也应该同样工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:28:19.303

我有一个类似的问题，但无法将我的按钮更改为提交 - 我在点击 img 时使用了触发器。

但是我发现即使没有提交按钮，您仍然可以注册用户单击“GO”按钮触发的表单提交，然后执行您需要执行的操作。

```
$(document).on('submit', ".search-form", function(){
     runSearch(inputs);                                
}); 
```

我不确定如果您在一个页面上有多个表单会发生什么，但这适用于单个表单。

# javascript - TinyMCE：如何在一行中显示所有工具栏？

> ID：11394608
> 
> 赞同：6
> 
> 时间：2012-07-09T12:01:45.253
> 
> 标签：javascript, css, editor, tinymce

这个问题基本上与[如果编辑器的宽度太小，是否有办法将工具栏按钮包装到 TinyMCE 中的下一行？](https://stackoverflow.com/questions/10889735/is-there-a-way-to-wrap-the-toolbar-buttons-to-the-next-row-in-tinymce-if-the-wid)

我有一个 TinyMCE 编辑器，其中有通过 theme_advanced_buttons1、theme_advanced_buttons2 和 theme_advanced_buttons3 指定的按钮。每个工具栏行都设计得很短，以确保布局不会水平溢出。

**如果它们都适合，有没有办法让工具栏重新定位在一行上？**（例如，访问者具有宽屏显示并且浏览器窗口最大化。）

我认为可以通过 CSS 通过设置`display:block`和`float:left`工具栏行（`tr`元素）来实现。也许添加`clear: left`到一些（哪个？）以下元素以防止溢出到编辑器区域。然而，这似乎是一个丑陋的黑客。我希望你能想出更好的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T12:35:40.247

每行按钮都包裹在一个表中，因此`theme_advanced_buttons1`在一个表内，`theme_advanced_buttons2`在另一个表内，在另一个表`theme_advanced_buttons3`内，因此要使它们内联，您可以使用

```
.wp_themeSkin table.mceToolbar {
  margin: 0 6px 2px; // this is by default
  display: inline-table; // this is extra I've added to keep them in single line
} 
```

下面是`display: inline-table;`编辑器全屏模式的截图，三行按钮都在一行，并排

![在此处输入图像描述](../Images/0e7973406b974a279b599fcfd77ae125.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-29T15:45:42.750

根据启用的按钮数量，将 table.mceToolbar 设置为**显示 inline-table**可以将编辑器的宽度推得太宽。

而是将每个表向左浮动，以便在达到最大允许宽度时中断。

```
 table.mceToolbar {margin-left:3px; float:left} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T12:38:01.100

这仅使用 css 不起作用，因为不同的行有自己的 table 元素。您可以做的是在tinymce 初始化之前检查用户屏幕的宽度。根据此值，您可以设置`theme_advanced_buttons1`等`theme_advanced_buttons2`...

例子：

```
var width = screen.width;

tinyMCE.init({
mode: 'exact',
    ....

    theme_advanced_buttons1 : width < 1024 ? "save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter" : "save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect,fontselect,fontsizeselect",
    theme_advanced_buttons2 : width < 1024 ? "justifyright,justifyfull,|,styleselect,formatselect,fontselect,fontsizeselect" : "",
    ...
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-27T21:20:22.337

在您的 javascript 代码中添加此 Jquery 行：

```
$('[id^=tinyelement_toolbar]').css('display','inline-table') 
```

# soap - SoapFault 异常：[HTTP] Bad Request In eway

> ID：11394612
> 
> 赞同：3
> 
> 时间：2012-07-09T12:01:52.467
> 
> 标签：soap

我将集成 eway 代币支付集成，我正面临这个问题。

```
SoapFault exception: [HTTP] Bad Request 
```

wsdl 文件在这里

```
https://www.eway.com.au/gateway/ManagedPaymentService/managedCreditCardPayment.asmx?wsdl 
```

xml格式在这里

```
https://www.eway.com.au/gateway/ManagedPaymentService/test/managedcreditcardpayment.asmx?op=CreateCustomer 
```

我用 $client->__getLastRequest(); 得到 xml 文件 脚本是

```
<?xml version="1.0" encoding="UTF-8"?>
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:ns1="https://www.eway.com.au/gateway/managedpayment" xmlns:ns2="eWAYHeader">
<env:Header>
<ns2:http://www.eway.com.au/gateway/managedPayment>
<item>
<key>eWAYCustomerID</key><value>87654321</value>
</item>
<item><key>Username</key><value>test@eway.com.au</value>
</item>
<item><key>Password</key><value>test123</value>
</item>
</ns2:http://www.eway.com.au/gateway/managedPayment>
</env:Header><env:Body>
<ns1:CreateCustomer>
<ns1:Title>Mr.</ns1:Title>
<ns1:FirstName>Joe</ns1:FirstName>
<ns1:LastName>Bloggs</ns1:LastName>
<ns1:Address>Bloggs Enterprise</ns1:Address>
<ns1:Suburb>Capital City</ns1:Suburb>
<ns1:State>ACT</ns1:State>
<ns1:Company>Bloggs</ns1:Company>
<ns1:PostCode>2111</ns1:PostCode>
<ns1:Country>au</ns1:Country>
<ns1:Email>test@eway.com.au</ns1:Email>
<ns1:Fax>0298989898</ns1:Fax>
<ns1:Phone>0297979797</ns1:Phone>
<ns1:Mobile>9841381980</ns1:Mobile>
<ns1:CustomerRef>Ref123</ns1:CustomerRef>
<ns1:JobDesc>Web developer</ns1:JobDesc>
<ns1:Comments>Please Ship ASASP</ns1:Comments>
<ns1:URL>http://www.test.com.au</ns1:URL>
<ns1:CCNumber>4444333322221111</ns1:CCNumber>
<ns1:CCNameOnCard>Test Account </ns1:CCNameOnCard>
<ns1:CCExpiryMonth>1</ns1:CCExpiryMonth>
<ns1:CCExpiryYear>13</ns1:CCExpiryYear>
</ns1:CreateCustomer>
</env:Body>
</env:Envelope> 
```

肥皂是否有两种xml结构效果：

还是这类似于肥皂标题的问题？

我已经设置了这样的标题

```
$data = array('eWAYCustomerID'=>'87654321',
                'Username' => "test@eway.com.au", 
                'Password' => "test123"

                );

$header = new SoapHeader('eWAYHeader',$url,$data);

$client->__setSoapHeaders($header); 
```

我正进入（状态：

```
SoapFault exception: [HTTP] Bad Request in D:\wamp\www\eway\newfile.php:196
Stack trace:
#0 [internal function]: SoapClient->__doRequest('__call('CreateCustomer', Array)
#2 D:\wamp\www\eway\newfile.php(196): SoapClient->CreateCustomer(Array)
#3 {main} 
```

这个错误总是在我调用这个函数时

```
$customerinfo = 
        array(
        'Title'=>'Mr.',
        'FirstName' => 'Joe',
        'LastName'=>'Bloggs',
        'Address'=>'Bloggs Enterprise',
        'Suburb'=>'Capital City',
        'State'=>'ACT',
        'Company'=>'Bloggs',
        'PostCode'=>'2111',
        'Country'=>'au',
        'Email'=>'test@eway.com.au',
        'Fax'=>'0298989898',
        'Phone'=>'0297979797',
        'Mobile'=>'9841381980',
        'CustomerRef'=>'Ref123',
        'JobDesc'=>'Web developer',
        'Comments'=>'Please Ship ASASP',
        'URL'=>'http://www.test.com.au',
        'CCNumber'=>'4444333322221111',
        'CCNameOnCard'=>'Test Account ',
        'CCExpiryMonth'=>'01',
        'CCExpiryYear'=>'13'

);

$client->CreateCustomer($customerinfo); 
```

任何帮助都会更有价值。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T14:35:52.080

尝试改用以下代码：

```
<?php
$apiUrl         = 'https://www.eway.com.au/gateway/ManagedPaymentService/test/managedcreditcardpayment.asmx?WSDL';
$options        = array( 'trace' => 1, 'exceptions' => 1);
try{
    $client     = new SoapClient($apiUrl, $options);
    $data       = array(
        'eWAYCustomerID'    => '87654321',
        'Username'          => "test@eway.com.au",
        'Password'          => "test123"
    );

    $header = new SoapHeader('https://www.eway.com.au/gateway/managedpayment', 'eWAYHeader', $data, false);
    $client->__setSoapHeaders($header);

    $customerinfo =  array(
            'Title'=>'Mr.',
            'FirstName' => 'Joe',
            'LastName'=>'Bloggs',
            'Address'=>'Bloggs Enterprise',
            'Suburb'=>'Capital City',
            'State'=>'ACT',
            'Company'=>'Bloggs',
            'PostCode'=>'2111',
            'Country'=>'au',
            'Email'=>'test@eway.com.au',
            'Fax'=>'0298989898',
            'Phone'=>'0297979797',
            'Mobile'=>'9841381980',
            'CustomerRef'=>'Ref123',
            'JobDesc'=>'Web developer',
            'Comments'=>'Please Ship ASASP',
            'URL'=>'http://www.test.com.au',
            'CCNumber'=>'4444333322221111',
            'CCNameOnCard'=>'Test Account ',
            'CCExpiryMonth'=>'01',
            'CCExpiryYear'=>'13'

    );

    $result = $client->CreateCustomer($customerinfo);
    var_dump($result);

}catch(Exception $e){
    echo $e->getMessage();
} 
```

这对我有用。

**注意：**
1\. 始终尝试将代码包装在 try{} catch{} 块
中 2\. 确保检查 php_openssl 扩展是否启用
3\. 禁用 wsdl 缓存并启用异常
4\. 注意`SoapHeader`构造函数。

希望这对您有所帮助。
问候

# iphone - 如何使用coredata获取表的列名

> ID：11394613
> 
> 赞同：3
> 
> 时间：2012-07-09T12:01:54.723
> 
> 标签：iphone, core-data

在我的 iPhone 应用程序中，我使用了 coredata。

我想要使​​用 coredata 的表的列名（字段名）。

我一直在寻找它，但没有找到获得它的方法。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:49:36.450

`NSManagedObjectModel`有一个名为的方法`entities`，它给出了一堆`NSEntityDescription`（表），在那个类中你可以找到`attributesByName`并`relationshipsByName`给你列。

您可以通过调用获取模型`[[<yourManagedObjectContext> persistentStoreCoordinator] managedObjectModel]`。

# android - java.io.ioexception：打开失败：将图像保存到外部存储时的 einval（无效参数）

> ID：11394616
> 
> 赞同：19
> 
> 时间：2012-07-09T12:02:07.747
> 
> 标签：android, file-io, ioexception

这是我的代码：

```
private boolean writeToSD(Bitmap bm, String url) {
    if (canIWriteOnSD()) {
        File sd = Environment.getExternalStorageDirectory();
        File dest = new File(sd, "MoveInBlue/");
        try {
            url = urlCleaner(url);
            if (!dest.exists()) {
                dest.mkdir();
            }
            File file = new File(dest, url + ".png");
            if (!file.exists()) {
                file.createNewFile();
            }
            FileOutputStream out = new FileOutputStream(file);
            bm.compress(Bitmap.CompressFormat.PNG, 90, out);
            out.flush();
            out.close();
            return true;
        } catch (Exception e) {
            e.printStackTrace();
            // Do nothing
        }
    }
    return false;
} 
```

问题解决了：

urlCleaner 现在返回 url.substring(url.lastIndexOf('?')+1)，一切都按预期工作。

实际上抛出了异常`file.createNewFile();`，我真的不知道为什么。

非常感谢。

（urlCleaner 只是从 url 中删除 http://... 并留下 php 标签）

这是 LogCat：

```
07-09 13:57:13.479: W/System.err(5715): java.io.IOException: open failed: EINVAL (Invalid argument)
07-09 13:57:13.479: W/System.err(5715):     at java.io.File.createNewFile(File.java:940)
07-09 13:57:13.479: W/System.err(5715):     at com.moveinblue.planner.asynctask.ImageDownloader.writeToSD(ImageDownloader.java:459)
07-09 13:57:13.479: W/System.err(5715):     at com.moveinblue.planner.asynctask.ImageDownloader.access$2(ImageDownloader.java:448)
07-09 13:57:13.479: W/System.err(5715):     at com.moveinblue.planner.asynctask.ImageDownloader$BitmapDownloaderTask.onPostExecute(ImageDownloader.java:270)
07-09 13:57:13.479: W/System.err(5715):     at com.moveinblue.planner.asynctask.ImageDownloader$BitmapDownloaderTask.onPostExecute(ImageDownloader.java:1)
07-09 13:57:13.479: W/System.err(5715):     at android.os.AsyncTask.finish(AsyncTask.java:602)
07-09 13:57:13.479: W/System.err(5715):     at android.os.AsyncTask.access$600(AsyncTask.java:156)
07-09 13:57:13.479: W/System.err(5715):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
07-09 13:57:13.479: W/System.err(5715):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-09 13:57:13.479: W/System.err(5715):     at android.os.Looper.loop(Looper.java:137)
07-09 13:57:13.479: W/System.err(5715):     at android.app.ActivityThread.main(ActivityThread.java:4575)
07-09 13:57:13.489: W/System.err(5715):     at java.lang.reflect.Method.invokeNative(Native Method)
07-09 13:57:13.489: W/System.err(5715):     at java.lang.reflect.Method.invoke(Method.java:511)
07-09 13:57:13.489: W/System.err(5715):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
07-09 13:57:13.489: W/System.err(5715):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
07-09 13:57:13.489: W/System.err(5715):     at dalvik.system.NativeStart.main(Native Method)
07-09 13:57:13.489: W/System.err(5715): Caused by: libcore.io.ErrnoException: open failed: EINVAL (Invalid argument)
07-09 13:57:13.489: W/System.err(5715):     at libcore.io.Posix.open(Native Method)
07-09 13:57:13.489: W/System.err(5715):     at libcore.io.BlockGuardOs.open(BlockGuardOs.java:110)
07-09 13:57:13.489: W/System.err(5715):     at java.io.File.createNewFile(File.java:933)
07-09 13:57:13.489: W/System.err(5715):     ... 15 more 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-09T12:05:49.493

该字符串`url`包含文件名的非法字符。您需要通过删除非法字符来清理文件名。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-02-04T16:05:13.563

真正棘手的错误，因为 Android 28 在尝试使用 ? 写入文件名时工作得很好？或 : 在名称中，但例如 Android 22 会爆炸。只需在文件名中运行几个替换，例如：

```
File(filename.replace(":", "").replace("?", "") [...]) 
```

然后你就可以跑了

```
file.createNewFile() 
```

# java - 自动选择文件 I/O 的缓冲区大小

> ID：11394618
> 
> 赞同：8
> 
> 时间：2012-07-09T12:02:11.620
> 
> 标签：java, c++, c, file-io, buffer

我有一个非常基本的疑问。通常，我必须编写使用缓冲文件 I/O 的应用程序，每次我面临选择缓冲区大小的困境时，我最终都会经常反复试验，结果非常糟糕。我想知道是否有任何方法或算法可以像 Teracopy 在 Windows 中处理文件时那样根据底层平台自动确定作业的最佳缓冲区大小。我主要将 Qt 用于 GUI。

如果可能的话，非常感谢 C/C++/C#/Java 中的一个小例子！

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-09T12:05:37.300

在 Java 中，最佳值通常是 L1 缓存大小，通常为 32 KB。在 Java 中，至少选择 1024 字节或 1 MB 并没有太大区别（<20%）

如果您按顺序读取数据，通常您的操作系统足够智能，可以检测到这一点并为您预取数据。

你可以做的是以下。该测试似乎显示使用的块大小存在显着差异。

```
public static void main(String... args) throws IOException {
    for (int i = 512; i <= 2 * 1024 * 1024; i *= 2)
        readWrite(i);
}

private static void readWrite(int blockSize) throws IOException {
    ByteBuffer bb = ByteBuffer.allocateDirect(blockSize);
    long start = System.nanoTime();
    FileChannel out = new FileOutputStream("deleteme.dat").getChannel();
    for (int i = 0; i < (1024 << 20); i += blockSize) {
        bb.clear();
        while (bb.remaining() > 0)
            if (out.write(bb) < 1) throw new AssertionError();
    }
    out.close();
    long mid = System.nanoTime();
    FileChannel in = new FileInputStream("deleteme.dat").getChannel();
    for (int i = 0; i < (1024 << 20); i += blockSize) {
        bb.clear();
        while (bb.remaining() > 0)
            if (in.read(bb) < 1) throw new AssertionError();
    }
    in.close();
    long end = System.nanoTime();
    System.out.printf("With %.1f KB block size write speed %.1f MB/s, read speed %.1f MB/s%n",
            blockSize / 1024.0, 1024 * 1e9 / (mid - start), 1024 * 1e9 / (end - mid));
} 
```

印刷

```
With 0.5 KB block size write speed 96.6 MB/s, read speed 169.7 MB/s
With 1.0 KB block size write speed 154.2 MB/s, read speed 312.2 MB/s
With 2.0 KB block size write speed 201.5 MB/s, read speed 438.7 MB/s
With 4.0 KB block size write speed 288.0 MB/s, read speed 733.9 MB/s
With 8.0 KB block size write speed 318.4 MB/s, read speed 711.8 MB/s
With 16.0 KB block size write speed 540.6 MB/s, read speed 1263.7 MB/s
With 32.0 KB block size write speed 726.0 MB/s, read speed 1370.9 MB/s
With 64.0 KB block size write speed 801.8 MB/s, read speed 1536.5 MB/s
With 128.0 KB block size write speed 857.5 MB/s, read speed 1539.6 MB/s
With 256.0 KB block size write speed 794.0 MB/s, read speed 1781.0 MB/s
With 512.0 KB block size write speed 676.2 MB/s, read speed 1221.4 MB/s
With 1024.0 KB block size write speed 886.3 MB/s, read speed 1501.5 MB/s
With 2048.0 KB block size write speed 784.7 MB/s, read speed 1544.9 MB/s 
```

该测试没有显示的是硬盘仅支持 60 MB/s 读取和 40 MB/s 写入。您正在测试的只是进出缓存的速度。如果这是您唯一的优先事项，您将使用内存映射文件。

```
int blockSize = 32 * 1024;
ByteBuffer bb = ByteBuffer.allocateDirect(blockSize);
FileChannel out = new FileOutputStream("deleteme.dat").getChannel();
for (int i = 0; i < (1024 << 20); i += blockSize) {
    bb.clear();
    while (bb.remaining() > 0)
        if (out.write(bb) < 1) throw new AssertionError();
}
out.close();

long start = System.nanoTime();
FileChannel in = new FileInputStream("deleteme.dat").getChannel();
MappedByteBuffer map = in.map(FileChannel.MapMode.READ_ONLY, 0, in.size());
in.close();
long end = System.nanoTime();
System.out.printf("Mapped file at a rate of %.1f MB/s%n",
        1024 * 1e9 / (end - start)); 
```

印刷

```
Mapped file at a rate of 589885.5 MB/s 
```

这非常快，因为它只是将 OS 磁盘缓存中的数据直接映射到应用程序的内存中（因此不需要复制）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T23:04:53.843

我在 C 中看到了这段代码：

```
#include <sys/types.h>
#include <sys/stat.h>
#include <unistd.h>
#include <stdio.h>

int main()
{
  struct stat fi;
  stat("/", &fi);
  printf("%d\n", fi.st_blksize);
  return 0;
} 
```

它返回最佳块大小。你需要用它来做到这一点。我使用 16*block 大小的流源到目标来获得最佳性能。因为这个测试将揭示最好的情况，电脑处于空闲状态，有一些硬件/操作系统。但不是真实案例。

# java - 反编译 Java：使用 JD 我得到一个空的枚举类

> ID：11394623
> 
> 赞同：1
> 
> 时间：2012-07-09T12:02:38.237
> 
> 标签：java, enums, decompiling

我已经使用 JD 反编译了一组类。

在其中一个类中，有对类中公共字段的引用。我用提到的字段打开课程。想象一下当我遇到这个时我的惊讶：

```
public enum agw
{
} 
```

我得出的结论是反编译器没有成功反编译某种类类型，可能是枚举。我遇到过其中一些。

另一个例子：

```
public enum acf
{
  private final Class d;
  private final int e;
  private final acn f;
  private final boolean g;

  private acf(Class paramacn, int paramBoolean, acn arg5, boolean arg6)
  {
    d = paramacn;
    e = paramBoolean;
    Object localObject;
    f = localObject;
    boolean bool;
    g = bool;
  }

  public Class a() {
    return d;
  }

  public int b() {
    return e;
  }

  public acn c() {
    return f;
  }

  public boolean d() {
    return g;
  }
} 
```

有谁知道这些课程应该是什么？他们可以以原始形式代表什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:15:05.187

我认为你试图反编译的类是[混淆](http://en.wikipedia.org/wiki/Obfuscation_%28software%29)的。从下面的代码中可以清楚地看到：

```
private final Class d;
  private final int e;
  private final acn f;
  private final boolean g;

  private acf(Class paramacn, int paramBoolean, acn arg5, boolean arg6)
  {
    d = paramacn;
    e = paramBoolean;
    Object localObject;
    f = localObject;
    boolean bool;
    g = bool;
  } 
```

*   程序员可能故意混淆代码以隐藏其目的（通过晦涩的安全性）或其逻辑以防止篡改，阻止逆向工程，或者作为阅读源代码的人的难题或娱乐挑战。

如果您确实想要访问代码，请联系所有者。否则，很难理解混淆后的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T12:22:00.547

好吧，我相信这实际上是预期的行为，因为 jad 仅支持（正确）最高 1.4 的 Java 版本。Java 1.5 中引入了枚举。这可以解释事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T12:18:48.097

反编译时，您应该使用多个反编译器。反编译器 A 可能会成功地做某事，而反编译器 B 可能会成功地做另一件事。因此，将它们一起使用将帮助您更轻松地完成整个画面。

# c# - 在 Visual Studio 2010 中将一个 xml 文件注入另一个（合并两个 xml 文件）

> ID：11394624
> 
> 赞同：2
> 
> 时间：2012-07-09T12:02:43.087
> 
> 标签：c#, xml, visual-studio-2010, visual-studio, xml-parsing

我正在做一个项目，我必须将翻译放在 XML 中。现在 xml 翻译文件是自动生成的，但不适用于我的项目部分。我和他们必须共享生成的 XML。

因此，当我在他们的“主要”XML 中输入我的一段 XML 时，它会在文件重新生成时被覆盖。当前的解决方案是为我的翻译保留一个单独的文件，并每次将其复制粘贴到“主”XML 文件中。

有没有办法自动做到这一点？我尝试了 xml`Include`选项，但 Visual Studio 无法识别或使用它。

我考虑过在“主”XML 中生成某种占位符，并且 Visual Studio 会“以某种方式”用我单独文件中的 XML 替换占位符。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T22:41:02.323

有一种方法可以将 xml 文件包含[在此处](http://xml.silmaril.ie/includes.html)描述的 ENTITY 部分中。如果 .Net XmlReader 没有自动执行此操作，您需要自己实现一个 XmlResolver 并将其设置到 XmlReaderSettings 中，然后再读取您的根文件。覆盖 ResolveUri 就足够了。

例如，假设您的 xmls 如下所示：

根.xml：

```
<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE root [
  <!ENTITY generatedXML SYSTEM "generated.xml">
  <!ENTITY generatedXML2 SYSTEM "pack://application:,,,/generated2.xml">
]>
<root>
  &generatedXML;
  &generatedXML2;
  <extraContent>
    <extraValue Name="xa" Value="1"/>
    <extraValue Name="xb" Value="1"/>
    <extraValue Name="xc" Value="1"/>
    <extraValue Name="xd" Value="1"/>
  </extraContent>
</root> 
```

生成的.xml 和生成的2.xml：

```
<?xml version="1.0" encoding="utf-8" ?>
<generatedContent>
  <generatedValue Name="a" Value="1"/>
  <generatedValue Name="b" Value="2"/>
  <generatedValue Name="c" Value="3"/>
  <generatedValue Name="d" Value="4"/>
</generatedContent> 
```

其中“generated.xml”位于根 xml 旁边，“generated2.xml”位于应用程序程序集中的其他位置，并标有“BuildAction = Resource”。然后我们可以像这样写一个 XmlResolver：

```
using System;
using System.IO;
using System.IO.Packaging;
using System.Net;
using System.Xml;

namespace XmlResolution
{
    class XmlResourceResolver : XmlResolver
    {
        private static readonly string FileScheme = "file";
        private static readonly string PackScheme = PackUriHelper.UriSchemePack;
        private ICredentials credentials;

        public override ICredentials Credentials
        {
            set { this.credentials = value; }
        }

        public override object GetEntity(Uri absoluteUri, string role, Type ofObjectToReturn)
        {
            if (absoluteUri.Scheme == FileScheme)
            {
                return File.OpenRead(absoluteUri.LocalPath);
            }
            else if (absoluteUri.Scheme == PackScheme)
            {
                return System.Windows.Application.GetResourceStream(absoluteUri).Stream;
            }

            return null;
        }
    }
} 
```

最后我们可以像这样读取我们的xml：

```
 static void Main(string[] args)
    {
        var settings = new XmlReaderSettings
        {
            DtdProcessing = DtdProcessing.Parse,
            XmlResolver = new XmlResourceResolver()
        };

        using (var reader = XmlReader.Create("root.xml", settings))
        {
            var element = XElement.Load(reader);

            var nameValuePairs = from content in element.Elements()
                                 from value in content.Elements()
                                 select new
                                 {
                                     Name = value.Attribute("Name"),
                                     Value = int.Parse(value.Attribute("Value").Value)
                                 };

            foreach (var pair in nameValuePairs)
            {
                Console.WriteLine(pair.Name + " " + pair.Value);
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T15:53:46.427

您可以执行以下操作（我不确定您是如何阅读它的，所以我假设您可以使用 XmlDocument，如果不是，您可能可以将 XmlDocument 转换为您需要的 w/e）：

```
ArrayList xmlNodes;
XmlNode newNode;

XmlDocument xmlDoc = new XmlDocument();
XmlDocument toInclude = new XmlDocument();

xmlDoc.Load("myFile.xml");
toInclude.Load("toInclude.xml");

xmlNodes = new ArrayList();

foreach (XmlElement ele in xmlDoc.GetElementsByTagName("toReplace"))
{
    xmlNodes.Add(ele);
}

foreach (XmlElement ele in xmlNodes)
{
    ele.ParentNode.ReplaceChild(xmlDoc.ImportNode(toInclude.DocumentElement, true), ele);
} 
```

这将用 toInclude.xml 文件的根节点替换任何标记。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T15:30:35.083

阅读我认为的 OP：能够关联到 Visual Studio 项目中的任何 xml 文件不是很好吗 - 一个用于转换此文件的 XSL 文件。此转换的结果将显示为原始 xml 文件下的子项，例如 *.xaml.cs 出现在 *.xaml 下。我们将能够通过 Properties 将任何 Build Action 分配给这个新的 xml 文件。

现在这是不可能的，但存在另一种更通用的预处理技术 - [T4](http://www.olegsych.com/2007/12/text-template-transformation-toolkit/)。以下是如何使用它将“我们的”xml 片段插入“他们的”生成的 xml 文件的描述。

1) 假设“他们”生成的 xml 文件包含在我们的项目中，名称为 aaa.xml。

例如**aaa.xml**：

```
<?xml version="1.0" encoding="utf-8"?>
<abc>
  <data a="1"/>
  <data a="2"/>
  <placeholderForTranslations/>
  <data>ccc</data>
</abc> 
```

其中 placeholderForTranslations 元素需要替换为“我们的”片段。

2) 让我们将 aaa.xslt 文件添加到我们的项目中，该文件通过将 placeholderForTranslations 替换为“我们的”片段来转换 aaa.xml。

**aaa.xslt**：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="placeholderForTranslations">
    <translations>
      <trans orig="aaa" translated="AAA"/>
    </translations>
  </xsl:template>

</xsl:stylesheet> 
```

这里的第一个 xsl:template 表示默认情况下，转换引擎会遍历输入文件的节点，它只是将它们原样复制到输出中。第二个模板表示，如果遇到 placeholderForTranslations 元素，嵌入到模板中的 xml 片段将用于替换 placeholderForTranslations 元素。事实上，如果您愿意，可以修改 *.tt 文件（见下文），以便也可以从单独的文件中读取此片段。

3) 让我们将 aaa1.tt - t4 代码预处理器文件添加到我们的项目中。

**aaa1.tt**：

```
<#@ template debug="false" hostspecific="true" language="C#" #>
<#@ output extension=".xml" #>
<#@ assembly name="System.Xml" #>
<#@ import namespace="System.Text" #>
<#@ import namespace="System.Xml" #>
<#@ import namespace="System.IO" #>
<#@ import namespace="System.Xml.Xsl" #>
<#
    string origXmlPath = Host.ResolvePath("aaa.xml");
    string transformPath = Host.ResolvePath("aaa.xslt");

    XslCompiledTransform transform = new XslCompiledTransform();
    transform.Load(transformPath);
    MemoryStream stream = new MemoryStream();
    transform.Transform(origXmlPath, null, stream);
    byte[] generated = stream.ToArray();
    string generatedString = Encoding.UTF8.GetString(generated);
#>
<#= generatedString #> 
```

在 <# 和 #> 之间，您可以看到一段 C# 代码，它找到 aaa.xml 和 aaa.xslt 的完整路径，然后将 aaa.xslt 转换应用于 aaa.xml 文件并将结果放入 generatedString 变量中。然后在 <#= generatedString #> 的帮助下，将 generatedString 的内容插入到输出文件中。

如果执行这些步骤，在 Visual Studio 中首次保存 aaa1.tt 时，文件 aaa1.xml 将创建为 aaa1.tt 的子项。您可以通过其属性为该文件分配构建操作，例如“嵌入式资源”。您也可以随时通过右键单击 aaa.tt 并选择“运行自定义工具”来强制重新生成 aaa1.xml。当您构建解决方案时，它也总是会重新生成。

我认为这种方法的优点是您的合并文件是在编译时生成的 - 而不是在应用程序运行时生成的。因此可以在开发过程中目视检查文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T22:00:18.260

您也可以使用 DataSet 对象。

```
 XmlTextReader readerOne = new XmlTextReader("C:\\generated.xml");
    XmlTextReader readerTwo = new XmlTextReader("C:\\your-file.xml");

    DataSet dsOne = new DataSet();
    dsOne.ReadXml(readerOne);

    DataSet dsTwo = new DataSet();
    dsTwo.ReadXml(readerTwo);

    dsOne.Merge(dsTwo);
    dsOne.WriteXml("C:\\CompleteResource.xml");
    Console.WriteLine("Merge completed"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T06:21:59.010

还有另一种方法，假设您有以下 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<root>
  <xsd:schema id="root" xmlns="" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
    <xsd:import namespace="http://www.w3.org/XML/1998/namespace" />
    <xsd:element name="root" msdata:IsDataSet="true">
      <xsd:complexType>
        <xsd:choice maxOccurs="unbounded">
          <xsd:element name="data">
            <xsd:complexType>
              <xsd:sequence>
                <xsd:element name="value" type="xsd:string" minOccurs="0" msdata:Ordinal="1" />
                <xsd:element name="comment" type="xsd:string" minOccurs="0" msdata:Ordinal="2" />
              </xsd:sequence>
              <xsd:attribute name="name" type="xsd:string" use="required" msdata:Ordinal="1" />
              <xsd:attribute name="type" type="xsd:string" msdata:Ordinal="3" />
              <xsd:attribute name="mimetype" type="xsd:string" msdata:Ordinal="4" />
              <xsd:attribute ref="xml:space" />
            </xsd:complexType>
          </xsd:element>
          <xsd:element name="resheader">
            <xsd:complexType>
              <xsd:sequence>
                <xsd:element name="value" type="xsd:string" minOccurs="0" msdata:Ordinal="1" />
              </xsd:sequence>
              <xsd:attribute name="name" type="xsd:string" use="required" />
            </xsd:complexType>
          </xsd:element>
        </xsd:choice>
      </xsd:complexType>
    </xsd:element>
  </xsd:schema>
  <resheader name="resmimetype">
    <value>text/microsoft-resx</value>
  </resheader>
  <resheader name="version">
    <value>2.0</value>
  </resheader>
  <resheader name="reader">
    <value>System.Resources.ResXResourceReader, System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</value>
  </resheader>
  <resheader name="writer">
    <value>System.Resources.ResXResourceWriter, System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</value>
  </resheader>
  <data name="ApplicationMainWindow_Button_RunWizard" xml:space="preserve">
    <value>Ordenar Café</value>
  </data>
  <data name="ApplicationMainWindow_OrderCancelled" xml:space="preserve">
    <value>Orden Cancelada</value>
  </data>
  <data name="ApplicationMainWindow_OrderComplete_Formatted" xml:space="preserve">
    <value>El costo de la tasa de café es de {0}, gracias.</value>
  </data>
</root> 
```

并且您想与以下内容合并：

```
<?xml version="1.0" encoding="utf-8" ?>
<root>
  <data name="ApplicationMainWindow_Title" xml:space="preserve">
    <value>Café de casa</value>
  </data>
  <data name="BeanType_Breakfast" xml:space="preserve">
    <value>Grand Aroma</value>
  </data>
</root> 
```

然后你可以编写类似的代码：

```
public class XmlManager
{
    private XDocument _document1;
    private XDocument _document2;
    private string _autogenerated;
    private string _manual;
    private string _target;
    public XmlManager()
    {
        Initialize();
    }

    private void Initialize()
    {
        _autogenerated = @"c:\AutogeneratedResource.xml";
        _manual = @"c:\ManualResource.xml";

        XmlDocument doc = new XmlDocument();
        doc.Load(_autogenerated);
        _document1 = XDocument.Parse(doc.InnerXml);

        doc.Load(_manual);
        _document2 = XDocument.Parse(doc.InnerXml);

        _target = @"c:\Target.xml";
    }

    public void Save()
    {
        if (_document2.Root != null)
        {
            IEnumerable<XElement> elements = _document2.Root.Elements("data");
            if (_document1.Root != null)
                _document1.Root.Add(elements);

            _document1.Save(new StreamWriter(_target));
        }
    }
} 
```

# callback - PowerRegisterSuspendResumeNotification - 提供的回调函数不能按预期工作

> ID：11394625
> 
> 赞同：3
> 
> 时间：2012-07-09T12:02:43.183
> 
> 标签：callback, windows-8, handle, power-management, power-state

我注册我的应用程序以在系统暂停或恢复时接收通知。 [MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/hh769080%28v=vs.85%29.aspx)

我希望在应用程序收到通知后执行的功能（我尝试了 void 和 void CALLBACK 并且两者的工作方式相同）：

```
void isConnectedStandby()
{
    printf( "ConnectedStandby Request");
} 
```

第一种情况 - 我提供指向 isConnectedStandby 函数的指针，但系统将其视为指向该函数的双指针 - 它调用此回调指针下的地址。

```
HPOWERNOTIFY RegistrationHandle;

PowerRegisterSuspendResumeNotification(
      DEVICE_NOTIFY_CALLBACK,
      &isConnectedStandby,
      &RegistrationHandle
); 
```

第二种情况-在这里我提供如下（这样我的功能代码就被执行了）：

```
typedef void (*StatusFunction_t)(); 
StatusFunction_t StatusFunction = isConnectedStandby;
HPOWERNOTIFY RegistrationHandle;

    PowerRegisterSuspendResumeNotification(
      DEVICE_NOTIFY_CALLBACK,
      &isConnectedStandby,
      &RegistrationHandle
); 
```

系统调用不仅是我的函数，而且是第一个函数之后的所有地址（如果我提供一个函数数组，它会在没有可用的有效代码时一个接一个地执行崩溃）

使用此功能的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:19:38.663

函数声明（必须是具有 3 个参数的静态 ULONG，如下所示）：

```
static ULONG isConnectedStandby(PVOID Context, ULONG Type, PVOID Setting);

ULONG isConnectedStandby(PVOID Context, ULONG Type, PVOID Setting)
{
    printf( "ConnectedStandby Request");
    return 0;
} 
```

除了直接向 PowerRegisterSuspendResumeNotification 提供回调函数，我们必须提供 struct _DEVICE_NOTIFY_SUBSCRIBE_PARAMETERS 填充我们的函数地址：

```
static _DEVICE_NOTIFY_SUBSCRIBE_PARAMETERS testCallback = {
    isConnectedStandby,
    nullptr
    };
HPOWERNOTIFY RegistrationHandle;

PowerRegisterSuspendResumeNotification(
  DEVICE_NOTIFY_CALLBACK,
  &testCallback,
  &RegistrationHandle
); 
```

MSDN 文档没有提到任何这些信息。

# ruby-on-rails - Rails 有很多通过控制器

> ID：11394631
> 
> 赞同：0
> 
> 时间：2012-07-09T12:03:05.633
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, nested-attributes

目前我有三个模型

```
A Song has many setlists through Allocations
Allocations belong to Songs and belong to setlists
A setlist has many Songs through Allocations. 
```

创建列表后，数据将显示在带有以下链接的表中：

```
<td><%= link_to setlist.date, '#' %></td> 
```

我基本上希望拥有它，以便当您单击此链接时，它会将用户引导到一个页面，您可以在该页面中从数据库中选择现有歌曲并将它们添加到表演列表中。我不完全确定从哪里开始，因为我没有太多使用的经验有很多通过关系，所以任何指向正确方向的指针都会有所帮助。我应该用什么替换'#'？会是一个新的分配路径吗？或者有什么方法可以使用嵌套形式，以便我可以在创建歌曲时将歌曲添加到设置列表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:24:39.210

这里没有单一的“最佳”答案......

这种关系将与您如何将这些歌曲附加到设置列表中发挥作用。尽量避免过多地考虑“通过”......并专注于设置列表和歌曲对象。

...但是您可能希望在设置列表的“显示”页面上（使用一个小表格可以在其中添加歌曲 - 有点像我现在用来添加答案的表格问题）。

```
link_to setlist.date, setlist 
```

或者...

设置列表的“编辑”页面......作为某种嵌套形式

```
link_to setlist.date, [:edit, setlist] 
```

注意。这些的长形式就像

```
link_to setlist.date, edit_setlist_path(setlist) 
```

# ruby - RubyGems 的问题

> ID：11394632
> 
> 赞同：0
> 
> 时间：2012-07-09T12:03:14.930
> 
> 标签：ruby, macos, gem

我在使用红宝石时遇到了一些问题。我正在尝试安装 gem，`hitimes`尽管在尝试安装它之后（即使使用 sudo）我得到了这个错误：[http](http://cl.ly/Hvlf) ://cl.ly/Hvlf 。

可能是我已经安装了它，因为我现在已经尝试了几次。有没有办法卸载gem？

可以在 RubyGems.org 上找到 gem [，](http://rubygems.org/gems/hitimes)我什至尝试下载 .gem 文件并以这种方式安装，但没有运气。

# .net - 哪个是首选：嵌套 If 或 Exit Sub / Function？

> ID：11394634
> 
> 赞同：8
> 
> 时间：2012-07-09T12:03:19.530
> 
> 标签：.net, vb.net

最近我一直在处理遗留的 vb.net 代码，在代码同行评审期间，建议不要使用 Exit Sub / Function，而是将所有功能嵌套在 IF 语句中。

当我最初开始开发时，我本能地这样做（嵌套 IF），不仅看起来更合乎逻辑，而且看起来不那么令人困惑。

然而，在某些时候，我与一个将嵌套 IF 视为“邪恶”的团队合作，因此我被告知的 Exit subs / functions 是首选。我很确定他们制作了一些 MS 最佳实践材料来支持这一点。

所以这个问题是针对有经验的开发人员的，哪种方式才是真正的首选？如果您给出答案，您还可以说明您的来源，或者只是提及这是您的团队/公司/个人的偏好并给出原因。

提前致谢。

按要求编辑：代码示例

退出子：

```
Private Sub DoSomeWork()
 if not conditionMetFromAnotherFunction() then
      exit Sub 
 end if

 'Method work starts here
End Sub 
```

嵌套 IF：

```
Private Sub DoSomeWork()
 if conditionMetFromAnotherFunction() then
     'Method work starts here
 end if
End Sub 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-09T12:16:58.420

If you don't exit your functions early, you will reach a point where your code looks like this:

![stumble on code](../Images/e68c128dddf48ebfc5a2e0f6738a3a5c.png)

No one can tell me this is a better style than returning early from a function.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-09T12:13:32.070

> 在代码同行评审期间，建议不要使用 Exit Sub / Function，而是将所有功能嵌套在 IF 语句中。

这是一个可怕的建议。就这么简单。忽略它。事实上，通常情况正好相反，特别是在需要嵌套缩进的情况下，或者您检查参数的有效性并可能提前退出的情况下：您问题中的代码就是一个很好的例子。*请*在此处使用提前退出。

没有“官方”来源（什么是官方的？），但优秀的程序员之间几乎达成共识，只有极少数人反对。有关这方面的更多讨论，请参阅[关于 Programmers 的讨论](https://softwareengineering.stackexchange.com/q/118703/2366)。

但是，我建议使用`Return`而不是`Exit {Sub|Function}`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-09T12:17:48.513

As David pointed out in his comment, nested if statements can add to the complexity of your code.

Imagine the following (simplified) code :

```
Private Sub DoSomeWork()
    if conditionMetFromAnotherFunction() then
        if conditionDependantUponPreviousCondition then
            ' Do the work
        end if
    end if
End Sub 
```

Or the following

```
Private Sub DoSomeWork()
    if not conditionMetFromAnotherFunction()
        return
    else if not conditionDependantUponPreviousCondition 
        return
    end if

    ' If we're here, everything's all good
    ' Do the work...
End Sub 
```

If your conditions get more complex, returning makes it much more easy to understand that under some conditions, your code is not doing anything, and makes your code more readable.

Otherwise, you have to read all the function and mentally parse the nested if's to see that nothing's done.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-09T12:17:21.000

As with anything, "it depends." Either one can be distasteful if used in the wrong context.

For example, what is `conditionMetFromAnotherFunction()` checking? If it's checking some kind of required pre-condition for `DoSomeWork()` then I'd even go so far as to through an exception instead of just quietly exiting the function. `ArgumentException` would be useful if it was checking the validity of an argument passed to the function, for example. Quietly exiting doesn't seem right if something in the system was actually wrong.

For the nested conditionals, that's **definitely** messy. Keep in mind the rule of thumb that **a function should "do one thing."** Checking that condition is one thing. So in that case the `'Method work starts here` should be nothing more than a call to another method which actually does the work. It should *not* be many lines of code all wrapped in one big conditional. *And* the function names should accurately reflect what it is they're doing. So this one would be `DoWorkIfConditional` (in the contrived example) and the other method would be `DoWork`.

It's OK for the functions to check pre-conditions before doing work. If pre-conditions aren't met, I'd consider throwing an exception. But that depends on the actual logic of the application which isn't really conveyed in this example.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-09T12:16:31.777

I suggest reading the answers [here](https://softwareengineering.stackexchange.com/questions/118703/where-did-the-notion-of-one-return-only-come-from) for a good roundup on this topic.

To summarize: *Single Entry / Single Exit* developed in languages where you can have multiple entry points to a function and you can also return **to** different positions in the code. It has been misinterpreted as allowing only one point in the code where you can return **from**.

The "best practice" to use only one return / exit statement in a subprogram comes from languages with explicit heap management, where the resources of a subprogram are freed at the end of the subprogram, so the control flow is required to pass through there. This is not applicable in languages that are based on .NET or JVM.

Overall, code is usually more readable when you are allowed to use multiple returns.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-09T12:18:27.310

IMO nested if's are a very quick rout to horrid spaghetti code. Generally speaking if your deeply nesting you code then your trying to do to much work in your method and most likely will benefit from refactoring into smaller parts.

Having said that sometimes it cannot be avoided so there is no one answer fits all.

# jquery - 如何找出已在 wordpress 后端添加的脚本？

> ID：11394635
> 
> 赞同：0
> 
> 时间：2012-07-09T12:03:21.630
> 
> 标签：jquery, css, wordpress

我正在开发 wordpress 的管理面板，我需要将我的样式和脚本添加到管理面板中。例如

```
function framework_js () {
    wp_register_script('jq_js', get_template_directory_uri() .  '/js/jquery.jqtransform.js', array('jquery'), true);
    wp_register_script('fk_script', get_template_directory_uri() . '/js/fk-script.js');

    wp_enqueue_script('jq_js');
    wp_enqueue_script('fk_script');

}
add_action('wp_enqueue_script', 'framework_js'); 
```

* * *

```
function framework_css() {
    wp_register_style('jq_css', get_template_directory_uri() . '/js/jqtransform.css');

    wp_enqueue_style('jq_css');
}
add_action('wp_enqueue_script', 'framework_css');` 
```

我想知道的问题是：
如何检查这些脚本是否已添加，是否可以使用 FireBug，如果可以？如何？？还是有其他方法？？？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:10:27.457

在 webkit 中，您可以检查开发人员工具的 Network 或 Resources 选项卡。网络选项卡如下所示。

![在此处输入图像描述](../Images/527b2b5afbfb459e2eb1e271ea400560.png)

Firebug 也有类似的功能。

![在此处输入图像描述](../Images/6af9a9138b46dfa5503c08c032c53c85.png)

您也可以只检查页面源代码中的`<script>`和`<link>`标签`<head>`。

# rest - URL 末尾 ID 的优缺点

> ID：11394640
> 
> 赞同：0
> 
> 时间：2012-07-09T12:03:39.180
> 
> 标签：rest, url, seo

一些像 Foursquare ( [https://foursquare.com/v/restaurante-baobab/ **4bed589a75feef3b8d0197e6**](https://foursquare.com/v/restaurante-baobab/4bed589a75feef3b8d0197e6) ) 等带有静态 URL 的 Web 应用程序将 ID 放在 URL 的末尾，其他的像 StackOverflow ( [https://stackoverflow.com/questions/ **11394640** / ids-at-the-end-of-the-url 的优点和缺点](https://stackoverflow.com/questions/11394640/pros-and-cons-of-ids-at-the-end-of-the-url)）将它们放在中间，就在标题 slug 之前。

在您看来，希望一个最适合信息管理和性能？对SEO有什么影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:50:30.033

许多网站使用资源 ID 作为 URL 中的真实资源标识符。它对应于正在显示的某些数据库记录的数量。但是随后一些站点在 URL 的末尾添加了一个人类可读的字符串。

这对 SEO 和用户都有好处。

1.  对于用户来说，这是一件好事，因为它可以指示 URL 指向的资源是什么。

这对 SEO 有好处，因为：

1.  在 URL 末尾添加人类可读的文本会增加点击率（更多的人会点击不以数字结尾的 URL）。
2.  搜索引擎会为 URL 末尾的文本中的单词赋予一些关键字值。

当您这样做有利于 SEO 时，您需要确保每个资源只有一个 URL。因此，当您访问具有给定资源 ID 号的任何 URL 时，它应该 301 重定向到最后包含资源 ID 和文本 slug 的 URL。因此，如果以下两个 URL 有效：

```
http://stackoverflow.com/questions/11394640/pros-and-cons-of-ids-at-the-end-of-the-url
http://stackoverflow.com/questions/11394640 
```

第二个 URL 应该 301 重定向到第一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:34:41.103

这都是关于资源的。资源 id 属于资源之后。

> SO.com/questions/11394640 **_**

在这种情况下，`11394640`如果`question`资源是 id。如果是特定的评论，它可能是`SO.com/question/11394640/comment/43`

对于 stackoverflow 链接，id 实际上在末尾，它只是重定向到标记的版本。`stackoverflow.com/questions/11394640`.

堆栈溢出定义了更人性化的 url。我不能很好地与 SEO 交谈，但我怀疑这些关键字会很有价值。[马特·卡茨](http://searchengineland.com/googles-matt-cutts-on-keywords-in-the-url-16976)似乎认为他们“有点”帮助

# asp.net-mvc - 尝试从.NET 网页调用的批处理文件中调用 svn.exe - 奇怪的结果

> ID：11394647
> 
> 赞同：0
> 
> 时间：2012-07-09T12:04:27.503
> 
> 标签：asp.net-mvc, svn, batch-file, windows-server-2008

**情况：**我有一个 mvc.net 网页，当被调用时，它使用 System.Diagnostics.Process.Start 和 cmd.exe 在我的服务器上运行一个批处理文件。批处理文件包含运行“svn.exe update myfilepath”的行，因此应该更新服务器上的文件。

**发生了什么？** - 批处理文件正在运行，但对 svn.exe 的调用不执行任何操作，也不会产生任何错误消息。- 如果我通过双击运行批处理文件，svn 命令确实运行成功。

我想这是一个安全问题，但我不是这方面的专家，我无法取得任何进展。

该站点托管在 Windows Server 2008 R2 上，应用程序池使用 ApplicationPoolIdentity 系统。我尝试将应用程序池作为网络服务运行，并将网络服务添加为可以读取/执行到 svn.exe 的用户。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:07:03.353

这可能与代理有关。您可能通过代理访问 Internet，但应用程序池身份的用户配置文件未像这样配置。您可能需要使用可以登录的域帐户才能创建合适的用户配置文件。您还需要通过勾选适当的选项来确保 IIS 正在加载配置文件。

（另一种可能性是您正在启动的进程的工作目录未正确设置为您的 Subversion 工作副本的根目录。我们已经确定这不是您的问题。）

# php - php数组处理慢

> ID：11394656
> 
> 赞同：1
> 
> 时间：2012-07-09T12:05:12.270
> 
> 标签：php, arrays

我的问题可能有点模糊，因为我不太清楚。

我有一段 PHP 尝试将 mysql 查询结果转换为数组“树”。即取决于定义的组的数组数组。

该代码假定列名将以双下划线 __ 开头以指示分组，并且结果已按分组排序。

该代码有效，但在某些情况下，它会减慢到无法使用的速度。我希望它很快的案例。每个分支中只有一个只有几个唯一值和许多项目的分组有时需要长达 30 秒。其他有很多层分支和很多不同值的情况，只需要1秒。（结果集通常约为 20 000 行）

所以，我想我的问题很简单，我的代码有什么问题？哪里搞砸了，以至于会严重影响性能。

PS我是一个相对的php新手，所以要温柔:)

抱歉，没有代码注释 O_o

```
$encodable = array();
$rownum = 0;
$branch = null;
$row = null;
$first = true;
$NULL = null;
$result = mysql_query($value,$mysql);
error_log (date("F j, Y, g:i a")."\r\n",3,"debug.log");
if (gettype($result) == "resource")
{

    while($obj = mysql_fetch_object($result))
    {
        $newrow = true;
        $branch = &$encodable;
        $row = &$NULL;
        if (count($branch) > 0)
        {
            $row = &$branch[count($branch)-1];
        }

        foreach ($obj as $column => $value)
        {
            if ($column[0] == '_' && $column[1] == '_')
            {

                $gname = substr($column,2);
                if (isset($row[$gname]) && $row[$gname] == $value)
                {

                    $branch = &$row["b"];
                    $row = &$NULL;
                    if (count($branch) > 0)
                    {
                        $row = &$branch[count($branch)-1];
                    }
                }
                else
                {
                    $branch[] = array();
                    $row = &$branch[count($branch)-1];

                    $row[$gname] = $value;
                    $row["b"] = array();
                    $branch = &$row["b"];
                    $row = &$NULL;
                    if (count($branch) > 0)
                    {
                        $row = &$branch[count($branch)-1];
                    }
                }
            }
            else
            {

                if ($newrow)
                {
                    $branch[] = array();
                    $row = &$branch[count($branch)-1];
                    $newrow = false;
                }
                $row[$column] = $value;
            }
        }

        $rownum++;
    }
}
$encoded = json_encode($encodable); 
```

**编辑：** 示例输出 - 结果数组转换为 json。这个小集合按“av”分组，b 由每个分支的代码创建，然后包含每个 AV 的 [hid, utd] 记录列表。

[{"av":"eset nod","b":[{"hid":"3","utd":"1"}]},{"av":"None","b":[ {"hid":"2","utd":"0"},{"hid":"4","utd":"0"},{"hid":"5","utd":" 0"},{"hid":"1","utd":"0"}]}]

产生这个结果的实际 sql 结果是：

```
 +----------+-----+-----+
 | __av     | hid | utd |
 +----------+-----+-----+
 | eset nod |   3 |   1 |
 | None     |   2 |   0 |
 | None     |   4 |   0 |
 | None     |   5 |   0 |
 | None     |   1 |   0 |
 +----------+-----+-----+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:11:48.573

结果是所有对 count($branch) 的调用。显然调用一个函数，它不期望像 count 这样的引用变量，使用引用变量，会导致函数复制要操作的变量。

在我的例子中，数组包含数千个元素。这也解释了为什么它的结果很少（但分支很大）是受害最大的。

请参阅此线程： [为什么在引用值上调用函数（例如 strlen、count 等）这么慢？](https://stackoverflow.com/questions/3117604/why-is-calling-a-function-such-as-strlen-count-etc-on-a-referenced-value-so-s)

# c++ - makefile 中 CXX 的值从何而来？

> ID：11394659
> 
> 赞同：52
> 
> 时间：2012-07-09T12:05:16.683
> 
> 标签：c++, c, makefile

代码片段：

```
target_test : test.cc 
    $(CXX) $(CPPFLAGS) $(CFLAGS) test.cc 
```

我知道这`CXX`是一个变量（包含要调用的编译器命令），但我想知道这个变量是从哪里来的。该变量未在 makefile 中定义，也不是环境变量。谁能解释 的价值`CXX`来自哪里？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-07-09T12:13:14.463

Make 有几个[预定义的变量](http://www.gnu.org/software/make/manual/make.html#Implicit-Variables "GNU 制作手册")，其中是`CC`. 最初，它被设置为`cc`指向已安装 C 编译器的符号链接：

```
$ readlink -f `which cc`
/usr/bin/gcc-4.6 
```

还：

```
$ readlink -f `which c++`
/usr/bin/g++-4.6 
```

如果你愿意，你可以改变它。

您可以使用`make -p -f /dev/null`来获取所有隐式规则和变量的列表。我现在无法显示输出，因为我有一个非标准安装并且输出不是英文的。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-09T12:08:02.890

CXX 是 GNU make 中的一个隐式变量。[还有其他人](http://www.gnu.org/software/make/manual/html_node/Implicit-Variables.html)。

不仅如此，这些隐式变量还被用于[隐式规则](http://www.gnu.org/software/make/manual/html_node/Catalogue-of-Rules.html#Catalogue-of-Rules)。

这是与隐式规则如何使用 CXX 相关的摘录：

> 编译 C++ 程序
> `n.o`是由`n.cc`、`n.cpp`或`n.C`使用形式的配方自动生成的
> `$(CXX) $(CPPFLAGS) $(CXXFLAGS) -c`。
> 我们鼓励您对 C++ 源文件使用后缀“.cc”而不是“.C”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T12:08:13.770

> 谁能解释 的价值`CXX`来自哪里？

像其他“魔法”变量（`LD`, `RM`, `MAKE`）一样，它是由 make 内部预定义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T12:08:16.810

这是一个用户可以覆盖的变量，它具有默认值`g++`（至少在 GNU Make 版本中）。它没有更多的东西（它没有在某些文件或类似的东西中定义）。

来源：[GNU Make 手册](http://www.gnu.org/software/make/manual/make.html#Implicit-Variables)

# sql-server - 如何知道活动结果集是否完全获取？

> ID：11394672
> 
> 赞同：0
> 
> 时间：2012-07-09T12:06:04.843
> 
> 标签：sql-server, delphi, fetchall

我在 odbce 中使用 bde 别名和系统数据源从 delphi 7 连接 ms sql server 2008，有时会出现“连接正忙于另一个 hstmt”错误，

有没有办法找到哪个结果集没有获取所有记录？

delphi 如何创建与 mssql 服务器的连接，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:10:44.277

每次遇到该错误时，都表明代码中存在错误。您不需要检查连接忙时的状态，因为如果您正确编写代码，连接**永远不会处于忙碌状态。**在允许代码继续之前，请确保在使用它的地方关闭每个语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:21:35.383

最好的解决方案是将 BDE 替换为另一个 DB 访问库，例如 ADO 或 DBX。

或者，您可以通过在每个 Query.Open 之后调用 Query.FetchAll 来避免此错误；

或者编写一个自动调用 FetchAll auto 的后代类，例如通过添加 OpenFetch 方法。

# awk - 使用 awk 读取更多文件，如何？

> ID：11394673
> 
> 赞同：1
> 
> 时间：2012-07-09T12:06:19.313
> 
> 标签：awk

我想用 awk 阅读更多的输入文件。在我文件夹中以 ftp_dst_ 开头的每个文件中，我都想运行这个小 awk 脚本。

```
for i in ftp_dst_*; 
    do

gawk -v a="$a" -v b="$b" -v fa="$fa" -v fb="$fb" -v max="$max" '
BEGIN{
        FS=" ";
        OFS="\t";
    }
    {
        if ($8 == "nrecvdatabytes_")
        {
                b=a;
                a=$1;           

                if (b!=0)
                {               
                fa=a-b; 
                    if (fa>max && fa!=0)
                    {
                        max=fa;
                    }   
                }           
        }   
    }
    END{
        print "lol";
        #print flowid, max;
    }
'./ftp_dst_*
done 
```

所以现在 ftp_dst_5、ftp_dst_6、ftp_dst_7 在文件夹中，所以我应该在命令行中得到 3 行带有 lol 的行。当然这个“打印大声笑”只是一个尝试，我想从 3 个文件中获取 3 个值。那么如何使用 awk 从所有这些文件中读取呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:00:59.923

通过在参数中使用 glob，所有文件都被放在一起，就好像它们是一个文件一样。如果没有 shell`for`循环，您将获得一次输出。既然你有`for`循环，你应该得到三倍的输出。`"$i"`您的部分问题可能是在单引号结束后需要一个空格，或者如果您希望单独考虑每个文件，您可能需要将参数更改为 Karl Nordström 建议的那样。

# java - 适用于 Android 的 XSD 验证

> ID：11394675
> 
> 赞同：3
> 
> 时间：2012-07-09T12:06:22.597
> 
> 标签：java, android, xml, xsd, simple-framework

我需要在 Android 上针对我的 XSD 验证传入的 XML。我首先尝试了 JAXB，但发现我遇到了 Darvik 问题。现在我打算使用 SimpleXML。Simple 可以处理验证吗？如果有怎么办？

此外，XSD 将使用 XML 而不是作为 URL 驻留在设备上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:54:02.360

您可以在 adnroid 中使用 xerces 和本机模式验证（在 java 中） - 您必须下载 xerces 源并（经过一些简单的操作）将其包含到您自己的代码中 - 您将能够使用 DocumentBuilderFactory.setShema 方法。

[https://stackoverflow.com/questions/13142567/xml-schema-validation-xmlsignature-with-xerces-in-android](https://stackoverflow.com/questions/13142567/xml-schema-validation-xmlsignature-with-xerces-in-android)

# extjs - 标记取消标记网格记录脏

> ID：11394677
> 
> 赞同：0
> 
> 时间：2012-07-09T12:06:39.067
> 
> 标签：extjs, grid, store, extjs4.1

我们为用户提供了更改网格记录的顺序/位置的能力。为此，我们使用拖放。但是拖放后记录不会显得脏。

因此，是否有任何功能可用于强制将网格记录标记为脏记录以及取消标记为脏记录？也就是说，强制它显示/隐藏角落的红色标记。

我找到了一个函数——`setDirty()`记录在案。但这并没有达到目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T21:10:47.977

我之前做过一个排序的拖放网格。我在数据库中有一个序列列，因此只需将其包含在我的模型定义中。

然后在*gridview 的* 事件处理程序中，每当执行删除时`drop`，我都会调用所有受影响的记录。`record.set('sequence', newSequence)`（我说“所有受影响的记录”，因为每当您更改一个记录的顺序时，它不仅会影响该记录的顺序，例如：如果您将记录从网格的最底部移动到*所有*记录的最顶部删除记录后的序列号会加一，它们都是脏的，需要在数据库上更新）。

然后使用`record.set`将显示记录的序列列是脏的，带有一个标志。

您说服务器端更新正常，所以我假设您正在服务器端执行此重新排序逻辑，您必须将其移回 JS，我不知道您是否要这样做。

# android - MapView 即使使用正确的键也不会加载图块

> ID：11394687
> 
> 赞同：1
> 
> 时间：2012-07-09T12:07:18.790
> 
> 标签：android, android-mapview

所以我通过在终端中使用这个命令从我的调试存储中获取我的 MD5 证书指纹来生成我的 API 密钥......

```
keytool -list -alias androiddebugkey -keystore <my_debug.keystore_location> -storepass android -keypass android 
```

这生成得很好，然后我上网将它输入到文本框中，点击生成并获取我的 api 密钥，然后我将其输入到我的 xml 布局中，如下所示..

```
<com.google.android.maps.MapView
    android:id="@+id/map_view"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:state_enabled="true"
    android:clickable="true"
android:apiKey="my_api_key/> 
```

然后在我的 AndroidManifest.xml 中，我在 Application 标记之前添加了 Internet 权限，并在 applicate 标记内添加了库引用。

```
<uses-permission android:name="android.permissions.INTERNET"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:hardwareAccelerated="true" >

    <uses-library android:name="com.google.android.maps"/>

    <activity
        android:name=".MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

我的 AVD 是正确的 api 目标以及我的项目。MapView 正在显示，但仅显示灰色图块。当我使用浏览器检查时，我在模拟器中也有互联网。

任何帮助将非常感激。

**编辑**

好的，看着我的`LogCat`它说

> 无法获取连接工厂客户端

所以我猜这就是问题所在？在此之前出现在`LogCat`它还说

> 处理网络变更通知：CONNECTED

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:44:05.207

最后我发现了问题。我应该发现的另一个可笑的简单解决方案。如果您查看下面的代码，该代码取自我的原始问题，您可能会发现错误。

```
<uses-permission android:name="android.permissions.INTERNET"/> 
```

知道了？`android.permissions.INTERNET`应该是`android.permission.INTERNET`。没错……单数。

在这之后，它仍然没有工作。但是，从我的 .android 文件夹中删除我的 debug.keystore 和 debug.keyset 然后重新启动 eclipse 并重新安装以重新生成它们之后，我得到了一个新的 API 密钥，嘿，它工作了。

我希望这对其他人有所帮助，并且可以避免这些**愚蠢的错误。**

我还写了一篇关于如何让 Google Maps API 工作的[演练，应该可以帮助你。](http://discocode.wordpress.com/2012/07/24/android-the-goole-maps-api-9/)

# java - 在java中拆分字符串

> ID：11394688
> 
> 赞同：0
> 
> 时间：2012-07-09T12:07:27.847
> 
> 标签：java, regex, string

我有一个这样的字符串：

```
06%2F27%2F2012%2C07%2F05%2F2012%2C06%2F29%2F2012%2C07%2F05%2F2012%2C07%2F06%2F2012%2C07%2F19%2F2012%2C07%2F06%2F2012%2C07%2F19%2F2012%2C07%2F05%2F2012%2C07%2F05%2F2012%2C07%2F20%2F2012%2C07%2F20%2F2012%2C07%2F27%2F2012%2C08%2F02%2F2012%2C07%2F20%2F2012%2C07%2F26%2F2012%2C08%2F03%2F2012%2C08%2F06%2F2012%2C08%2F06%2F2012%2C08%2F17%2F2012 
```

我希望它像这样拆分它的值：

```
%2F should be /

%2C marks the starting of new string 
```

所以价值观就像：

06/27/2012 , 07/052012 等

我尝试为此创建某种正则表达式，但没有成功。

我试过的例子：

```
String phrase = "06%2F27%2F2012%2C07%2F05%2F2012%2C06%2F29%2F2012%2C07%2F05%2F2012%2C07%2F06%2F2012%2C07%2F19%2F2012%2C07%2F06%2F2012%2C07%2F19%2F2012%2C07%2F05%2F2012%2C07%2F05%2F2012%2C07%2F20%2F2012%2C07%2F20%2F2012%2C07%2F27%2F2012%2C08%2F02%2F2012%2C07%2F20%2F2012%2C07%2F26%2F2012%2C08%2F03%2F2012%2C08%2F06%2F2012%2C08%2F06%2F2012%2C08%2F17%2F2012";
String delims = "REGEX_GOES_HERE";
String[] tokens = phrase.split(delims); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T12:12:07.097

如果我理解正确，您正在尝试使用一项操作进行拆分和替换。不。

如果您接受这一点，那么您只需要一个[`URLDecoder`](http://docs.oracle.com/javase/6/docs/api/java/net/URLDecoder.html#decode%28java.lang.String,%20java.lang.String%29)调用，它将用`%..`适当的字符替换序列，然后是一个`split()`带有字符串分隔符的简单字符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T12:16:24.487

这应该这样做：

```
String string = "06%2F27%2F2012%2C07%2F05%2F2012%2C06%2F29%2F2012"; // etc...
    String decoded = null;
    try {
        decoded = URLDecoder.decode(string, "UTF-8");
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    }
    String[] splitString = decoded.split(",");
    for (String i : splitString) {
        System.out.println(i);
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T12:10:55.010

您的麻烦在于字符集，您必须对其进行解码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-09T12:14:50.657

```
String[] tokens = phrase.replaceAll("%2F","/").split("%2C"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T12:12:09.350

一种懒惰的方法是用您需要的值替换所有 String ：

```
String toModify = "06%2F27%2F2012%2C07%2F05%2F2012%2C06%2F29%2F2012%2C07%2F05%2F2012%2C07%2F06%2F2012%2C07%2F19%2F2012%2C07%2F06%2F2012%2C07%2F19%2F2012%2C07%2F05%2F2012%2C07%2F05%2F2012%2C07%2F20%2F2012%2C07%2F20%2F2012%2C07%2F27%2F2012%2C08%2F02%2F2012%2C07%2F20%2F2012%2C07%2F26%2F2012%2C08%2F03%2F2012%2C08%2F06%2F2012%2C08%2F06%2F2012%2C08%2F17%2F2012"
String my result = toModify.replaceAll("%2F","/").replaceAll("%2C"," ").replaceAll.... ; 
```

# c# - 如何将 Texture2D 存储在 C# 中的 listDictionary 中？

> ID：11394690
> 
> 赞同：0
> 
> 时间：2012-07-09T12:07:30.927
> 
> 标签：c#, storage, texture2d

我在从 listDictionary 中检索 texture2D 时遇到问题。

这是我的 LoadGraphics 类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Collections.Specialized;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.Media;

namespace Space_Game
{
    public static class LoadGraphics
    {
        //global variable
        public static ListDictionary _blue_turret_hull;

        public static void LoadContent(ContentManager contentManager)
        {
            //loads all the graphics/sprites
            _blue_turret_hull = new ListDictionary();
            _blue_turret_hull.Add("graphic", contentManager.Load<Texture2D>("Graphics/Team Blue/Turret hull spritesheet"));
            _blue_turret_hull.Add("rows", 1);
            _blue_turret_hull.Add("columns", 11);
        }
    }
} 
```

这是应该检索 Texture2D 的 Turret 类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Xna.Framework;

namespace Space_Game
{
    class Turret_hull:GameObject
    {
        public Turret_hull(Game game, String team)
            : base(game)
        {
            if(team == "blue") { _texture = LoadGraphics._blue_turret_hull["graphic"];      }
        }
    }
} 
```

只有在这里它给出了以下错误：

**无法将类型“对象”隐式转换为“Microsoft.Xna.Framework.Graphics.Texture2D”。存在显式转换（您是否缺少演员表？）**

我知道我将它存储在 listDictionary 中这一事实存在问题。我这样做了，因为这样我可以一次检索所有必要的信息。我还应该怎么做？

提前致谢，

马克·迪克玛

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T12:11:32.557

ListDictionary 不是通用的，因此项目存储为对象。您必须将它们转换回您想要的类型：

```
if(team == "blue") { _texture = (Texture2D)LoadGraphics._blue_turret_hull["graphic"];      } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T12:27:42.923

实现您想要的更好的方法可能是定义一个具有 3 个属性的新类，并使用它来检索您需要传递的信息：

```
public class TurretHullInfo
{
    Texture2D Graphic { get; set; }
    int Rows { get; set; }
    int Columns { get; set; }
}

public static class LoadGraphics
{
    //global variable
    public static TurretHullInfo _blue_turret_hull;

    public static void LoadContent(ContentManager contentManager)
    {
        //loads all the graphics/sprites
        _blue_turret_hull = new TurretHull();
        _blue_turret_hull.Graphic = contentManager.Load<Texture2D>("Graphics/Team Blue/Turret hull spritesheet");
        _blue_turret_hull.Rows = 1;
        _blue_turret_hull.Columns = 11;
    }
}

class Turret_hull : GameObject
{
    public Turret_hull(Game game, String team)
        : base(game)
    {
        if(team == "blue")
            _texture = LoadGraphics._blue_turret_hull.Graphic;     
    }
} 
```

# iphone - 如何使用加速度计移动 CCSprite

> ID：11394693
> 
> 赞同：1
> 
> 时间：2012-07-09T12:07:40.517
> 
> 标签：iphone, xcode, cocos2d-iphone

嗨，我正在开发一个 cocos2d 游戏。我想`CCSprite`随着加速度计值的变化而移动。我已经为加速度计实现了这个代码。但在横向位置倾斜 iphone sprite 上下移动。但我想前后移动精灵。

```
[[UIAccelerometer sharedAccelerometer] setUpdateInterval:1/60];

[[UIAccelerometer sharedAccelerometer] setDelegate:self];

[self scheduleUpdate];

- (void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration
    { 
        float deceleration = 0.4f;
        float sinsitivity = 6.0f;
        //float maxVelocity = 100;

        // because we are in landscape mode where x is always +90 or -90
        // float acely = acceleration.x;
        float acelx = acceleration.y; 
        movement = movement * deceleration + acelx * sinsitivity;

        float angleRadians = atanf((float)acceleration.y / (float)acceleration.x);
        float angleDegrees = CC_RADIANS_TO_DEGREES(angleRadians);
        // float cocosAngle = angleDegrees;

        if(angleDegrees<85 && angleDegrees >-85 )
        {
            _player.rotation =  angleDegrees;
        }

        //NSLog(@" angle = %f",angleDegrees);

        if([ShieldCover visible]==TRUE)
        {
             ShieldCover.rotation= angleDegrees;
        }

        //  CGPoint converted = ccp( (float)acceleration.y, (float)acceleration.x);

        // update the rotation based on the z-rotation
        // the sprite will always be 'standing up'
        //_player.rotation = (float) CC_RADIANS_TO_DEGREES( atan2f( converted.x, converted.y) + M_PI );

        //  ShieldCover.rotation =(float) CC_RADIANS_TO_DEGREES( atan2f( converted.x, converted.y) + M_PI );

    }

    - (void)update:(ccTime)delta {

        //assuming that you have a sprite called _fireman with 100 px width

        if ( _player.position.y > 0 && _player.position.y < 320) {
            //_fireman is at neither edge of the screen so move the paddle!
            _player.position = ccp(_player.position.x, _player.position.y + movement);
        }

        if ( _player.position.y < 0 ) {
            //_fireman hit the left edge of the screen, set the left bound position with no movement.
            _player.position = ccp( _player.position.x, 319);
        }

        if ( _player.position.y > 320 ) {
            //_fireman hit the right edge of the screen, set the right bound position with no movement.
            _player.position = ccp(_player.position.x, 1 );
        }

        if ( _player.position.y < 1 && movement > 1 ) {
            //_fireman is at the left edge of the screen and the device is tiled right. Move the _fireman!
            _player.position = ccp(_player.position.x , _player.position.y+ movement);
        }

        if ( _player.position.y > 319 && movement < 0) {
            //_fireman is at the right edge of the screen and the device is tiled left. Move the _fireman!
            _player.position = ccp(_player.position.x , _player.position.y+ movement);
        }

        barracuda.position = ccp(barracuda.position.x,_player.position.y);
        particles.position = ccp(_player.position.x-30, _player.position.y-10);
        parteMagnet.position = ccp(_player.position.x, _player.position.y);

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T12:16:49.573

```
// Try this

-(id) init
{
   if (self == [super init])
   {
     [[UIAccelerometer sharedAccelerometer] setUpdateInterval:1/60];
     [[UIAccelerometer sharedAccelerometer] setDelegate:self];
     [self scheduleUpdate];
   }
   return self;
}

- (void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration
{ 
    float deceleration = 0.4f;
    float sinsitivity = 6.0f;
    float acelx = acceleration.y; 
    movement = movement * deceleration + acelx * sinsitivity;

    float angleRadians = atanf((float)acceleration.y / (float)acceleration.x);
    float angleDegrees = CC_RADIANS_TO_DEGREES(angleRadians);
    if(angleDegrees<85 && angleDegrees >-85 )
    {
        _player.rotation =  angleDegrees;
    }
    if([ShieldCover visible]==TRUE)
    {
         ShieldCover.rotation= angleDegrees;
    }
}

- (void)update:(ccTime)delta
{
    if ( _player.position.y > 0 && _player.position.y < 320)
    {
        _player.position = ccp(_player.position.x, _player.position.y + movement);
    }
    if ( _player.position.y < 0 )
    {
        _player.position = ccp( _player.position.x, 319);
    }
    if ( _player.position.y > 320 )
    {
        _player.position = ccp(_player.position.x, 1 );
    }
    if ( _player.position.y < 1 && movement > 1 )
    {
        _player.position = ccp(_player.position.x , _player.position.y+ movement);
    }
    if ( _player.position.y > 319 && movement < 0)
    {
        _player.position = ccp(_player.position.x , _player.position.y+ movement);
    }
    barracuda.position = ccp(barracuda.position.x,_player.position.y);
    particles.position = ccp(_player.position.x-30, _player.position.y-10);
    parteMagnet.position = ccp(_player.position.x, _player.position.y);
} 
```

# james - Apache James，添加域

> ID：11394694
> 
> 赞同：2
> 
> 时间：2012-07-09T12:07:40.733
> 
> 标签：james

我只尝试添加域但连接被拒绝异常：我尝试过的命令行，以及以下异常：

```
sudo ./james-cli.sh -h localhost -p 9999 adddomain mydomain.tld 
```

输出：

```
 java.io.IOException: Failed to retrieve RMIServer stub: javax.naming.ServiceUnavailableException [Root exception is java.rmi.ConnectException: Connection refused to host: localhost; nested exception is: 
        java.net.ConnectException: Connection refused]
        at javax.management.remote.rmi.RMIConnector.connect(RMIConnector.java:357)
        at javax.management.remote.JMXConnectorFactory.connect(JMXConnectorFactory.java:267)
        at org.apache.james.cli.probe.impl.JmxServerProbe.connect(JmxServerProbe.java:93)
        at org.apache.james.cli.probe.impl.JmxServerProbe.<init>(JmxServerProbe.java:68)
        at org.apache.james.cli.ServerCmd.main(ServerCmd.java:104)
    Caused by: javax.naming.ServiceUnavailableException [Root exception is java.rmi.ConnectException: Connection refused to host: localhost; nested exception is: 
        java.net.ConnectException: Connection refused]
        at com.sun.jndi.rmi.registry.RegistryContext.lookup(RegistryContext.java:118)
        at com.sun.jndi.toolkit.url.GenericURLContext.lookup(GenericURLContext.java:203)
        at javax.naming.InitialContext.lookup(InitialContext.java:411)
        at javax.management.remote.rmi.RMIConnector.findRMIServerJNDI(RMIConnector.java:1924)
        at javax.management.remote.rmi.RMIConnector.findRMIServer(RMIConnector.java:1891)
        at javax.management.remote.rmi.RMIConnector.connect(RMIConnector.java:274)
        ... 4 more
    Caused by: java.rmi.ConnectException: Connection refused to host: localhost; nested exception is: 
        java.net.ConnectException: Connection refused
        at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:619)
        at sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:216)
        at sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:202)
        at sun.rmi.server.UnicastRef.newCall(UnicastRef.java:340)
        at sun.rmi.registry.RegistryImpl_Stub.lookup(Unknown Source)
        at com.sun.jndi.rmi.registry.RegistryContext.lookup(RegistryContext.java:114)
        ... 9 more
    Caused by: java.net.ConnectException: Connection refused
        at java.net.PlainSocketImpl.socketConnect(Native Method)
        at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
        at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
        at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
        at java.net.Socket.connect(Socket.java:579)
        at java.net.Socket.connect(Socket.java:528)
        at java.net.Socket.<init>(Socket.java:425)
        at java.net.Socket.<init>(Socket.java:208)
        at sun.rmi.transport.proxy.RMIDirectSocketFactory.createSocket(RMIDirectSocketFactory.java:40)
        at sun.rmi.transport.proxy.RMIMasterSocketFactory.createSocket(RMIMasterSocketFactory.java:146)
        at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:613)
        ... 14 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T03:02:34.493

在我实际在 root 中发出命令之前，我遇到了同样的问题。在命令行上输入 su 更改为 root，它会要求输入密码。然后您应该能够更改 james 设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-22T09:50:48.487

那里正在发生一些奇怪的事情。我也时不时遇到这个问题，我不确定它是如何解决的。

上次我启动没有启动的詹姆斯服务器后它消失了。在此之前，我使用 sudo 解决了它，但使用了 james-cli.sh 的绝对路径

我有一种奇怪的感觉，即 james 的 RMI 中有些东西不能正常工作。

# math - math.atan2 的倒数？

> ID：11394706
> 
> 赞同：19
> 
> 时间：2012-07-09T12:08:25.193
> 
> 标签：math, lua, trigonometry

什么是反函数

```
math.atan2 
```

我在 Lua 中使用它，我可以得到`math.atan`by的倒数`math.tan`。
但我在这里迷路了。

**编辑**

好的，让我给你更多的细节。

我需要计算 2 个点 (x1,y1) 和 (x2,y2) 之间的角度，我做到了，

```
local dy = y1-y2 
local dx = x1-x2
local angle = atan2(dy,dx)* 180 / pi 
```

现在，如果我有角度，是否有可能取回 dy 和 dx？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-09T12:29:39.163

仅给定角度，您只能导出指向 的单位向量`(dx, dy)`。要获得原件`(dx, dy)`，您还需要知道向量的长度`(dx, dy)`，我称之为`len`。您还必须将从度数导出的角度转换回弧度，然后使用本文其他地方提到的三角方程。那就是你有：

```
local dy = y1-y2
local dx = x1-x2
local angle = atan2(dy,dx) * 180 / pi
local len = sqrt(dx*dx + dy*dy) 
```

给定`angle`（以度为单位）和向量长度`len`，您可以推导出`dx`和`dy`：

```
local theta = angle * pi / 180
local dx = len * cos(theta)
local dy = len * sin(theta) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-09T12:11:03.837

显然，这样的事情会有所帮助：

```
x = cos(theta)
y = sin(theta) 
```

简单的谷歌搜索抛出了这个问题，问这个问题的人说它解决了这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-31T03:56:05.660

如果您使用以下方法，您可能会得到错误的数字：

```
local dy = y1-y2 
local dx = x1-x2
local angle = atan2(dy,dx) * 180 / pi 
```

如果您使用的坐标系 y 在屏幕下方变大，x 在右侧变大，那么您应该使用：

```
local dy = y1 - y2
local dx = x2 - x1
local angle = math.deg(math.atan2(dy, dx))
if (angle < 0) then
  angle = 360 + angle
end 
```

你想使用它的原因是因为 lua 中的 atan2 会给你一个介于 -180 和 180 之间的数字。在你达到 180 之前它是正确的，然后因为它应该超过 180（即 187）它会将它反转为负数当你接近 360 时，从 -180 下降到 0。为了纠正这个问题，我们检查角度是否小于 0，如果是，我们添加 360 来给我们正确的角度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T12:12:13.950

根据[这个参考](http://pgl.yoyo.org/luai/i/math.atan2)：

> 返回 y/x 的反正切（以弧度为单位），但使用两个参数的符号来查找结果的象限。（它还可以正确处理 x 为零的情况。）

所以我想你也可以用`math.tan`它来反转它。

# android - 无法使用 Timepicker 访问 gui 元素

> ID：11394709
> 
> 赞同：1
> 
> 时间：2012-07-09T12:08:38.787
> 
> 标签：android, timepicker

我遵循了谷歌的指导方针：[TimePicker](http://developer.android.com/guide/topics/ui/controls/pickers.html#TimePicker)

我创建了一个新类`TimePickerFragment`，但在我的`onTimeSet`方法中我无法访问 gui 元素来更新选择的时间。

有任何想法吗？

# php - iPad 上 Safari 中的用户超时

> ID：11394710
> 
> 赞同：2
> 
> 时间：2012-07-09T12:08:39.233
> 
> 标签：php, javascript, ipad, timeout, logout

我正在创建一个要在 iPad 上使用的网络应用程序。一个重要功能是用户一次只能登录一次，并且一次只能在一台设备上登录。如果用户登录，我已经通过将数据库中的字段从 0 更新为 1 来实现这一点。

但是，如果用户忘记注销，则具有超时功能也很重要。我尝试在 PHP 中执行此操作，但它不合适，因为在脚本运行以注销用户之前必须刷新页面。

因此，我尝试使用 JavaScript 在客户端进行操作（30 分钟后进行简单的页面重定向），但我刚刚了解到，如果您在 iPad 上最小化 Safari，所有正在运行的脚本都会停止，因此用户可以轻松单击主屏幕而无需注销并且超时不起作用。

Sooo...我没有想法...有没有办法让 iPad 上的 Safari 中的人超时？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T12:12:54.973

使用您的服务器 CRONJOB 功能[http://en.wikipedia.org/wiki/Cron](http://en.wikipedia.org/wiki/Cron)并为 DB 范围的注销检查编写脚本。这样您就可以完全排除用户客户端的问题，您所要做的就是使用时间戳监控用户的操作，稍后您将使用您的脚本进行检查。

例如，如果您的用户表中有字段，则`last_action_time`每次重新加载站点或完成任何其他操作时都会更新该字段。只需存储`time()`到该字段中。对于 cronjob 脚本，只需检查所有具有`last_action_time`< time()-(60*30) 的用户，如果是这种情况，将其字段从 1 更新为 0。

# linux - libv4l2：打开流时出错：设备上没有剩余空间

> ID：11394712
> 
> 赞同：10
> 
> 时间：2012-07-09T12:08:48.393
> 
> 标签：linux, usb, webcam

我尝试为 opencv 获取立体声对。我将 Logitech B910 和 Logitech C910 网络摄像头连接到 USB。但是有这个错误。我玩过 quirks 参数并`outfmt=mjpeg`在 mplayer 中设置，但再次出现此错误。

我在哪里可以找到 uvcvideo 或 USB 驱动程序中的错误？我应该使用哪些监控或调试工具？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-27T23:38:24.397

这是一个措辞不当的错误信息；原因是控制器上没有足够的 USB 带宽。

如您所料，如果您可以让您的相机使用 MJEPG，您的问题将得到解决。

OpenCV 可能正在使用 FFMPEG 进行获取，（linux 构建通常具有 FFMPEG 支持）并且 OpenCV 文档承认如果使用 FFMPEG，您将无法更改获取格式。

我在研究中发现的只是您需要更改 FFMPEG 配置。

如果可以，请尝试将相机移至不同的 USB 控制器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-23T07:45:59.127

这对我很有魅力

```
sudo rmmod uvcvideo

sudo modprobe uvcvideo quirks=128 
```

这将在每次重新启动时重置。如果可行，请创建以下文件：`sudo vi /etc/modprobe.d/uvcvideo.conf`包含以下行：`options uvcvideo quirks=128`

检查此链接[http://renoirsrants.blogspot.in/2011/07/multiple-webcams-on-zoneminder.html](http://renoirsrants.blogspot.in/2011/07/multiple-webcams-on-zoneminder.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-18T19:33:18.597

This is a problem with the USB controller running out of space.

This can usually be fixed by plugging the device into a different USB port. For example I have eSATA ports on my board and USB 2 ports and USB 3 ports. If you were previously using USB2 ports try the USB3 ports.

You can see the video card allotment via the command line on Ubuntu via

```
cat /sys/kernel/debug/usb/devices | grep "B: " 
```

You might have to use sudo depending on distro. If you are windows, or osx sorry I don't know solutions for those systems.

my results look like this.

```
B:  Alloc=  0/800 us ( 0%), #Int=  0, #Iso=  0
B:  Alloc=  0/800 us ( 0%), #Int=  0, #Iso=  0
B:  Alloc=  0/800 us ( 0%), #Int=  0, #Iso=  0
B:  Alloc=  0/800 us ( 0%), #Int=  0, #Iso=  0
B:  Alloc=140/900 us (16%), #Int=  4, #Iso=  0
B:  Alloc=  0/900 us ( 0%), #Int=  0, #Iso=  0
B:  Alloc= 17/900 us ( 2%), #Int=  1, #Iso=  0
B:  Alloc=  0/900 us ( 0%), #Int=  0, #Iso=  0
B:  Alloc=  0/800 us ( 0%), #Int=  0, #Iso=  0
B:  Alloc=  0/800 us ( 0%), #Int=  1, #Iso=  0
B:  Alloc=  0/800 us ( 0%), #Int=  0, #Iso=  0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-05T09:09:59.303

我刚刚遇到了这个问题，事实证明我必须将我的网络摄像头（Logitech QuickCam Zoom）连接到 USB 2.0 端口，而不是首先插入的 USB 3.0 端口。

# android - 如何检查 OpenGL ES 实现是否支持非 POT 纹理？

> ID：11394727
> 
> 赞同：2
> 
> 时间：2012-07-09T12:09:17.127
> 
> 标签：android, opengl-es

如何以编程方式检查给定的 OpenGL ES 实现是否支持非 POT 纹理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T12:28:28.037

最后，在 Android 上对我有用的是：

```
static public boolean isNPOTSupported(GL10 gl) {

    String extensions = gl.glGetString(GL10.GL_EXTENSIONS);
    return extensions.indexOf("GL_OES_texture_npot") != -1;
} 
```

# windows - 我们如何从 Windows 还原中排除注册表中的设置？

> ID：11394728
> 
> 赞同：2
> 
> 时间：2012-07-09T12:09:22.773
> 
> 标签：windows, registry, system-restore

我们在 Windows 注册表中保留了一些设置（最好在 HKLM 下），如果用户将系统重置为以前的状态，这些设置不应被删除或覆盖。我没有找到解决这个问题的方法。我们必须支持 Windows XP 和更新版本。有什么提示吗？

# android - 在android中使用Jexcel从Web导入数据

> ID：11394734
> 
> 赞同：1
> 
> 时间：2012-07-09T12:10:11.920
> 
> 标签：android

我想将数据从 excel 导入到我在 android 中的应用程序中，我成功地在我的环境中进行了本地操作：

```
InputStream in = getResources().openRawResource(R.raw.shidur);
workBook = Workbook.getWorkbook(in);
Sheet sheet = workBook.getSheet(0); 
```

如果它在 Raw 文件夹中，那就可以了。

但问题是 *xls 文件在 web 中，我想从 http://...

有可能这样做吗？

谢谢，

乌迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:26:40.637

好的，我终于想通了。它支持以下内容：

URL u = 新 URL("http://www.domain.com/myexcelfile.xls"); InputStream in = u.openStream();

# c# - 找不到文件或程序集名称 ImageHandler 或其依赖项之一

> ID：11394744
> 
> 赞同：0
> 
> 时间：2012-07-09T12:10:45.560
> 
> 标签：c#, asp.net, visual-studio, visual-studio-2003, asp.net-1.1

**工具：** Visual Studio 2003 Enterprise Architect，ASP.net WebForms 1.1
**语言：** C#

**大家好，**
我第一次尝试实现 IHttpHandler ，我以为我会没事的，但事实并非如此。我的 gridview 没有显示 Image ，我使用了 Img 标记并使用了 ImageHandler 的 URL

```
<ItemTemplate>
 <img src="ImageHandler.ashx?autoid=<%# DataBinder.Eval(Container.DataItem,"Blob_Id") %>" width="150" height="100" />
 </ItemTemplate> 
```

**注意：** ImageHandler.ashx（实际上有 .cs 扩展名，它必须是 .ashx 吗？）

我的 GridView 显示这样的空图像， ![在此处输入图像描述](../Images/d99fadec928e97e75543c1e859a7b0a4.png)

当我右键单击图像并选择属性并找到链接时。 `http://localhost/MySite/Presentation/ImageHandler.ashx?autoid=j01` 我将该链接粘贴到另一个选项卡上并出现此错误，因为 ImageHandler 需要 ImageId 并发送图像作为回报，它应该有发送图像。

## 错误信息：

`Exception Details: System.IO.FileNotFoundException: File or assembly name ImageHandler, or one of its dependencies, was not found.`

**PS：**

*   ImageHandler（实现IHttpHandler）实际上是目录中的一个`.cs`文件`ace`。

*   我关注了这篇[文章](http://www.arnebrachhold.de/2005/05/25/custom-http-handlers-in-aspnet/)

## 更新：

似乎 ImageHandler 未正确注册为 HttpHandler，因为我已将 ImageHandler 名称更改为假 Handler，例如 FakeName.ashx，因此当我请求该链接时，它会给出与上述相同的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:12:01.987

真的不需要注册 HTTP 处理程序。您只需拖放一个 .ashx 文件并点击它，只要 .ashx 文件在网站上并且代码也在 .ashx 文件内，它就可以工作。

你能告诉我处理程序的代码吗？

# javascript - 如何使用 jQuery 的 .post() 函数发送对象？

> ID：11394746
> 
> 赞同：0
> 
> 时间：2012-07-09T12:10:47.040
> 
> 标签：javascript, jquery, ajax, object, post

```
var itemsObj = new Object();
itemsObj.data = "Something";
$.post("somewhere.php", itemsObj, function(data) {}, "html"); 
```

通常，如 API 中所述，我会使用`{ data: "something" }`where `itemsObj`is，但由于我的对象是动态的并且需要 for 循环，我不想在`data: ...`部件中使用 for 循环变得太“脏”......

无论如何，我上面写的代码不起作用。我想也许我应该在上面应用这个`JSON.stringify()`功能，如果我错了，对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T12:41:09.760

像这样向 itemsObj 添加数据...

```
var itemsObj = {};

itemsObj['Firstdata'] = "Something";
itemsObj['Seconddata'] = "Something else"; 
```

等等......你可以使用循环来做到这一点......

然后发布使用`$.post("somewhere.php", itemsObj, function(data) {}, "html");`它应该可以工作......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T12:13:41.880

您可以使用 JSON：

```
$.post("somewhere.php", "param="+JSON.stringify(itemsObj), function(data) {}, "html"); 
```

然后在服务器端：

```
$obj = json_decode($_POST["param"]); 
```

# search - 在 Grails 应用程序中按查询和位置搜索

> ID：11394755
> 
> 赞同：1
> 
> 时间：2012-07-09T12:11:08.783
> 
> 标签：search, grails, grails-searchable

我在我的 grails 应用程序中使用可搜索插件通过以下方式搜索“Offering”实例。

在提供类中使用以下映射进行搜索设置

```
class Offering {

    static searchable = {
        only: ['title', 'description']
    }

    String title
    String description

    Category category
    Location location

    BigDecimal price
    PricePeriod pricePeriod

    static belongsTo = [user: SecUser]

    static constraints = {
        title(blank: false, maxSize: 100)
        description(blank: false, maxSize: 10240)
        category(nullable: false)
        location(nullable: false)
        price(nullable: true, scale: 2)
        pricePeriod(nullable: true)
    }

    public String toString() {
        return title
    }

} 
```

调用可搜索服务

```
 def search = {
    must(queryString(params.query))
 }

 def searchResult = searchableService.search(search, params) 
```

正如预期的那样，这会从产品实例的映射属性中返回适当的命中。供品集合

我现在想做的不仅是通过搜索查询，而且还通过位置的产品子元素进行搜索。特别是子 Location 实例中的“locationName”字段。

因此，如果我通过查询“晚餐”和位置“布里斯班”进行搜索，我希望获得与“晚餐”匹配的产品集合，其中包含与“位置名称”属性匹配“布里斯班”的子位置实例

关于使用可搜索插件从哪里开始实现这样的东西的任何想法？

位置类

```
class Location {

    String locationName
    Location locationParent
    String postcode

    static hasMany = [locations: Location]

    static constraints = {
        locationName(blank: false, unique: true)
        locationParent(nullable: true)
        postcode(nullable: true)
    }

    public String toString() {
        return locationName
    }
} 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T23:34:16.483

我认为你想要做的事情是这样的：

```
class Offering {

   ...

   static searchable = {
       only: ['title', 'description']
       location component: true
   }

   ...
} 
```

和

```
class Location {

    ...

    static searchable = {
       only: ['locationName']
       location component: true
    }

    ...
} 
```

# windows-phone-7 - 图片文件不显示

> ID：11394760
> 
> 赞同：3
> 
> 时间：2012-07-09T12:11:24.867
> 
> 标签：windows-phone-7, xaml

在我的 XAML 代码中，我写了这个：

```
<Image Source="/Images/male32.png" Visibility="Visible" /> 
```

我的项目文件结构如下所示：

![在此处输入图像描述](../Images/8a7200b292023f7fd45b06e2c6dc01f1.png)

但是我的图像没有加载？如您所见，我正在尝试添加我在项目的 Images 文件夹中拥有的 male32.png 图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T12:16:48.347

Check the build action of the Image.

Example: When you use "Build Action" of type "Content" then you access your image in this way:

```
<Image Stretch="None" Source="/images/appbar.cancel.rest.png"/> 
```

When you use "Build Action" of type "Resource" then you access your image in this way:

```
<Image Source="/WP7SampleProject3;component/images/appbar.feature.email.rest.png"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:37:10.507

好吧，我想通了，原来它与 BuildAction 属性没有任何关系，我所要做的就是在图像路径中添加“..”，例如“../Images/male32.png”。

愚蠢的问题甚至不应该是一个问题。

尽管如此，我已经读到 BuildAction 也可能是图像未显示的潜在原因。因此，如果您遇到图像不显示的问题，值得一试。

# jquery - 获取外部元素的ID

> ID：11394762
> 
> 赞同：0
> 
> 时间：2012-07-09T12:11:27.287
> 
> 标签：jquery, jquery-ui, jquery-selectors, jquery-ui-tabs, jquery-tabs

如果我动态生成与此类似的 HTML？

```
<li class="ui-state-default ui-corner-top" id="tab_pg_4">
    <a href="#ui-tabs-8"><span>Group5</span></a>
</li>

<li class="ui-state-default ui-corner-top" id="tab_pg_5">
    <a href="#ui-tabs-10"><span>Group4</span></a>
</li>

<li class="ui-state-default ui-corner-top" id="tab_pg_6">
    <a href="#ui-tabs-19"><span>Group8</span></a>
</li> 
```

我有一个包含字符串的 javascript 变量`Group4`

我如何 console.log 或 alert `tab_pg_5`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:19:51.097

使用 jquery 函数[`.closest()`](http://api.jquery.com/closest/)查找最接近的匹配祖先。

```
var myVar = 'Group4';
console.log($('a[href^="#ui-tabs-"] span:contains("' + myVar + '")').closest('li').attr('id')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:16:30.423

像这样的东西就足够了。使用`<ul>`它，您可以使选择器更具体。

```
var myId = 'Group4';
var elementId = $('li:contains(' + myId + ')').attr('id'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T12:34:02.027

你只需要添加一个点击事件并使用最接近的

```
$('a').click(function(){
   var lid = $(this).closest('li').attr('id');
    alert(lid);
}); 
```

[工作演示](http://jsfiddle.net/yYDeq/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-09T12:14:11.107

哦，是的，我完全误解了这个问题，所以：

```
$('a span').each(function({ 
    if ((this).html() == 'Group 4'))
        var = $(this).parent().parent();
}); 
```

# android - 应用程序崩溃。RuntimeException：无法启动活动

> ID：11394768
> 
> 赞同：-8
> 
> 时间：2012-07-09T12:11:46.600
> 
> 标签：android, eclipse, nullpointerexception, logcat

我的应用程序 android 崩溃了。
日志错误：

```
07-09 12:00:46.486: D/dalvikvm(249): GC freed 613 objects / 50984 bytes in 89ms
07-09 12:00:49.944: D/dalvikvm(249): GC freed 2700 objects / 118760 bytes in 76ms
07-09 12:00:50.406: D/AndroidRuntime(249): Shutting down VM
07-09 12:00:50.406: W/dalvikvm(249): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
07-09 12:00:50.417: E/AndroidRuntime(249): Uncaught handler: thread main exiting due to uncaught exception
07-09 12:00:50.444: E/AndroidRuntime(249): java.lang.RuntimeException: Unable to start activity ComponentInfo{allo.nascubetest/allo.nascubetest.MainActivity2}: java.lang.NullPointerException
07-09 12:00:50.444: E/AndroidRuntime(249):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
07-09 12:00:50.444: E/AndroidRuntime(249):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
07-09 12:00:50.444: E/AndroidRuntime(249):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
07-09 12:00:50.444: E/AndroidRuntime(249):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
07-09 12:00:50.444: E/AndroidRuntime(249):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-09 12:00:50.444: E/AndroidRuntime(249):  at android.os.Looper.loop(Looper.java:123)
07-09 12:00:50.444: E/AndroidRuntime(249):  at android.app.ActivityThread.main(ActivityThread.java:4363)
07-09 12:00:50.444: E/AndroidRuntime(249):  at java.lang.reflect.Method.invokeNative(Native Method)
07-09 12:00:50.444: E/AndroidRuntime(249):  at java.lang.reflect.Method.invoke(Method.java:521)
07-09 12:00:50.444: E/AndroidRuntime(249):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
07-09 12:00:50.444: E/AndroidRuntime(249):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
07-09 12:00:50.444: E/AndroidRuntime(249):  at dalvik.system.NativeStart.main(Native Method)
07-09 12:00:50.444: E/AndroidRuntime(249): Caused by: java.lang.NullPointerException
07-09 12:00:50.444: E/AndroidRuntime(249):  at allo.nascubetest.MainActivity2.onCreate(MainActivity2.java:111)
07-09 12:00:50.444: E/AndroidRuntime(249):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-09 12:00:50.444: E/AndroidRuntime(249):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
07-09 12:00:50.444: E/AndroidRuntime(249):  ... 11 more
07-09 12:00:50.454: I/dalvikvm(249): threadid=7: reacting to signal 3
07-09 12:00:50.554: I/dalvikvm(249): Wrote stack trace to '/data/anr/traces.txt'
07-09 12:00:52.084: I/Process(249): Sending signal. PID: 249 SIG: 9 
```

在我的 OnCreate 中：

```
 Intent thisIntent = getIntent();
    date = thisIntent.getExtras().getString("date"); 
```

和我的第 111 行：

```
 labelDate.setText(date); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T12:14:07.633

您正在访问文件 MainActivity2.java 的第 111 行中的空变量。

检查你在那里写的。

从您的代码看来，labelDate 为 null 或 date 为 null。

验证您在其中有值，您也可以调试。

一般来说，最好从 developer.android.com 做一些教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:28:31.327

您的日期对象在第 111 行为空，因为您的意图可能没有名为日期的键，否则该值将为空。

为防止出现此异常：

1.  确保 labelDate 不为空
2.  在分配给 setText() 之前确保日期对象不为空；

前任：

```
if (date != null)
     labelDate.setText(date); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T12:33:20.840

看看这段代码：

```
Bundle bundle=getIntent().getExtras();
if(bundle!=null){
String date=bundle.getString("date");
labelDate.setText(date);
} 
```

希望这会帮助你。

# javascript - jQuery：支持几乎所有格式的音频播放器

> ID：11394773
> 
> 赞同：0
> 
> 时间：2012-07-09T12:11:55.897
> 
> 标签：javascript, audio, jquery-plugins

我需要在我的站点中嵌入 jQuery 音频播放器。src 来自 DB。问题是没有一种固定格式。它可以是 3gp、mov.ogg.mp3 等

我搜索了它并找到了许多 jQuery 插件，但它们都仅限于 2 或 3 种格式。我想知道是否有任何支持所有格式的 jQuery 插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:52:59.583

正如constantinius 所说，jquery 不会播放声音——浏览器会。现在假设大多数用户将拥有支持 HTML5 的浏览器还为时过早。同时，播放音频文件的最便携（跨浏览器）方式是使用 embed 标签。

如果您需要支持多种不同的文件类型，请使用（例如）ffmpeg 在服务器端转换它们。

尝试使用 java applet 或 flash 来实现对不同文件类型的支持是可能的（但我怀疑 altter 将需要比前者更多的工作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:09:01.303

The quicktime player will play all of those formats, the only downside is that your users will have to install the quicktime plugin if they don't already have it.

Unfortunately Flash does not support all of these formats so you won't be able to use a flash player, which is already installed more often than not.

# nhibernate - 如何存储可序列化列表 在 FluentNhibernate 中

> ID：11394776
> 
> 赞同：1
> 
> 时间：2012-07-09T12:12:02.803
> 
> 标签：nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

如果我有以下（为简洁起见）

```
public class TempCartMap : ClassMap<TempCart>
{
   Id(x => x.Id).GeneratedBy.Identity();
   Map(x => x.Products); // < This one
}

[Serializable]
public class TempCart {

  public TempCart(){
    Products = new List<int>();
  }

  public virtual IList<int> Products { get; set; }

} 
```

我看过（[http://www.philliphaydon.com/2012/06/using-nhibernate-with-servicestack/](http://www.philliphaydon.com/2012/06/using-nhibernate-with-servicestack/)）和（[http://www.philliphaydon.com/2012/03/ormlite-blobbing-done -with-nhibernate-and-serialized-json/](http://www.philliphaydon.com/2012/03/ormlite-blobbing-done-with-nhibernate-and-serialized-json/)），但是是否有一种更短、更简单、更快的方法让 NHibernate 像上面那样对列进行序列化和反序列化。创建一个新的 IUserType 类等似乎有点矫枉过正。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:56:22.237

您还可以将 Products-list 存储为单独的表：

```
public class TempCartMap : ClassMap<TempCart>
{
    Id(x => x.Id).GeneratedBy.Identity();

    HasMany(x => x.Products)
        .Element("product_number")
        .KeyColumn("temp_cart_id")
        .Table("temp_cart_products")
    ;
} 
```

只是为了澄清这个问题：是否有理由不这样做？

# mediawiki - 维基媒体登录不返回令牌

> ID：11394782
> 
> 赞同：1
> 
> 时间：2012-07-09T12:12:27.347
> 
> 标签：mediawiki, wikipedia, wikipedia-api, mediawiki-api

我开始尝试使用 Wikimedia，但不知何故无法使用 HTTP 客户端（RESTClient Firefox 和其他客户端）获取登录请求。这应该相当简单，但它似乎失败了，或者我忽略了一些明显的东西。

我正在使用[本网站](http://www.mediawiki.org/wiki/API:Login#Structure_of_login_request)的说明。

这是我在 RESTClient 中插入的内容：

![在此处输入图像描述](../Images/44fef339453cf7d950d47c8678fc449e.png)

我没有返回 MediaWiki API 结果，而是返回帮助页面（见下文）。我在这里做错了什么？感谢您的任何意见。

```
Status Code: 200 OK
Cache-Control: private
Connection: keep-alive
Content-Encoding: gzip
Content-Length: 38052
Content-Type: text/html; charset=utf-8
Date: Mon, 09 Jul 2012 11:50:51 GMT
MediaWiki-API-Error: help
Server: Apache
Vary: Accept-Encoding
X-Cache: MISS from sq33.wikimedia.org, MISS from amssq35.esams.wikimedia.org, MISS from amssq39.esams.wikimedia.org
X-Cache-Lookup: MISS from sq33.wikimedia.org:3128, MISS from amssq35.esams.wikimedia.org:3128, MISS from amssq39.esams.wikimedia.org:80
X-Content-Type-Options: nosniff

<!DOCTYPE HTML>
<html>
<head>
    <title>MediaWiki API</title>
</head>
<body>
<pre>
<span style="color:blue;">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span style="color:blue;">&lt;api servedby=&quot;mw67&quot;&gt;</span>
<span style="color:blue;">&lt;error code=&quot;help&quot; info=&quot;&quot;
xml:space=&quot;preserve&quot;&gt;</span> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:16:51.897

您的请求有两个问题：

1.  您使用了错误的网址。正确的域是 en.wikipedia.org，而不是 www.wikipedia.org。
2.  RESTClient 似乎`text/plain`默认使用 Content-Type ，但 API 需要`application/x-www-form-urlencoded`.

如果您纠正了这两个问题，您将得到正确的响应。

`format=xml`您可能还希望通过向请求中添加或来指示您希望以何种格式响应`format=json`。默认为 HTML 格式的 XML，这对于在浏览器中显示很有用，但不适用于您的应用程序使用。

# c# - 逆向工程 C# 解决方案构建以获取源代码

> ID：11394785
> 
> 赞同：0
> 
> 时间：2012-07-09T12:12:34.587
> 
> 标签：c#, asp.net, visual-studio-2010, visual-studio-2008

首先，当我四处寻找答案时，我发现了这些：

[逆向工程 C# 解决方案](https://stackoverflow.com/questions/4668349/reverse-engineering-a-c-sharp-solution)

[C#逆向工程有好的工具吗？](https://stackoverflow.com/questions/1714438/are-there-good-tools-for-c-sharp-reverse-engineering)

上面的网址似乎可能是重复的。我没有在网上找到任何与我的问题相关的答案，所以我在这里问。我想问的是，我可以把Visual Studio 2008 Professional 版本生成的C# 解决方案生成并生成**源代码**吗？

我不关心这些 url 中发布的上述问题的 UML 图，我想获取源代码。

我的应用程序在 ASP.NET 中，但我只为它构建了一个解决方案，而且我需要我没有的源代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T12:23:51.410

www.reflector.net 非常适合这个。

例如，这里有一些 C# 代码：

```
using System;

namespace HW
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("Foo Bar");
        }
    }
} 
```

编译后，Visual Studio 会生成以下文件：

![VS](../Images/c1e3a07a75f948612e00c632ea4efd17.png)

Reflector 像这样反编译代码：

![反射器](../Images/a8f877f514094f8b791784c91bdd6442.png)

就像 TomTom 所说，它不是相同的代码，但这对于发现程序如何工作仍然很有用。

希望这可以帮助

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-09T12:16:38.100

> 我可以拿 Visual Studio 2008 专业版生成的 C# 解决方案生成并生成源代码吗？

不。你可以得到一个 .NET dll（没人关心它是如何生成的），如果它没有被加密，你可以让一个反编译器生成一些代码，但它不会是源代码。

内部变量命名之类的东西可能会有所不同。评论将丢失。编译器优化出来的东西可能会有所不同

例如 bytes / 1024 / 1024 将是 byte / 1048576，因为常量表达式不会使其进入 DLL。

# struts2 - 在哪里可以找到在 Struts2 中集成 Tiles 所需的 .tld 文件？

> ID：11394786
> 
> 赞同：1
> 
> 时间：2012-07-09T12:12:35.070
> 
> 标签：struts2, tiles, tld

我花了几个小时在谷歌无用，寻找下载以下 .tld 的链接，这是在 Struts 项目中集成 Tiles 所必需的：struts-bean.tld struts-html.tld struts-logic.tld struts-tiles.tld 谢谢很多，提前:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:18:32.683

The tag libs you mention are for Struts 1, but you have tagged this question as being for Struts 2\. For Struts 2, you can just add the [struts2-tiles-plugin](http://struts.apache.org/2.x/docs/tiles-plugin.html) to your web app.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:28:19.270

[Struts2 瓦片布局 下载](http://www.dzone.com/tutorials/java/struts-2/struts-2-example/struts-2-tiles-example-1.html)

这是一个示例，您可以下载 zip 文件并进行相应的自定义。struts2 的 .tld 文件（即标记库描述符）保存在以下 jar 文件中。

> struts2-core-2.1.8.1.jar

使用上面的链接，您也可以下载 jar。

# wcf - wcf unknownmessagereceived with iis host

> ID：11394788
> 
> 赞同：0
> 
> 时间：2012-07-09T12:12:36.517
> 
> 标签：wcf

如果我有一个托管在 IIS 上的 WCF 应用程序，我该如何处理 [`UnknownMessageReceived`](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicehostbase.unknownmessagereceived.aspx)事件？

当我构建控制台主机时，我知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:55:00.097

您可以使用服务主机工厂来访问在 IIS 下使用的服务主机实例。[您可以在http://blogs.msdn.com/b/carlosfigueira/archive/2011/06/14/wcf-extensibility-servicehostfactory.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2011/06/14/wcf-extensibility-servicehostfactory.aspx)找到有关服务主机工厂的更多信息，下面的代码显示了工厂的示例它监听`UnknownMessageReceived`事件。

```
public class MyFactory : ServiceHostFactory
{
    protected override ServiceHost CreateServiceHost(Type serviceType, Uri[] baseAddresses)
    {
        ServiceHost host = base.CreateServiceHost(serviceType, baseAddresses);
        host.UnknownMessageReceived += new EventHandler<UnknownMessageReceivedEventArgs>(host_UnknownMessageReceived);
        return host;
    }

    void host_UnknownMessageReceived(object sender, UnknownMessageReceivedEventArgs e)
    {
        // do something with the message
    }
} 
```

# performance - scala 隐式性能

> ID：11394797
> 
> 赞同：3
> 
> 时间：2012-07-09T12:13:12.247
> 
> 标签：performance, scala

这经常出现。使用泛型编码的函数在 scala 中速度明显较慢。请参见下面的示例。类型特定版本的执行速度比通用版本快 1/3。考虑到通用组件在昂贵的循环之外，这是双重令人惊讶的。对此有已知的解释吗？

```
 def xxxx_flttn[T](v: Array[Array[T]])(implicit m: Manifest[T]): Array[T] = {
    val I = v.length
    if (I <= 0) Array.ofDim[T](0)
    else {
      val J = v(0).length
      for (i <- 1 until I) if (v(i).length != J) throw new utl_err("2D matrix not symetric. cannot be flattened. first row has " + J + " elements. row " + i + " has " + v(i).length)
      val flt = Array.ofDim[T](I * J)
      for (i <- 0 until I; j <- 0 until J) flt(i * J + j) = v(i)(j)
      flt
    }
  }
  def flttn(v: Array[Array[Double]]): Array[Double] = {
    val I = v.length
    if (I <= 0) Array.ofDim[Double](0)
    else {
      val J = v(0).length
      for (i <- 1 until I) if (v(i).length != J) throw new utl_err("2D matrix not symetric. cannot be flattened. first row has " + J + " elements. row " + i + " has " + v(i).length)
      val flt = Array.ofDim[Double](I * J)
      for (i <- 0 until I; j <- 0 until J) flt(i * J + j) = v(i)(j)
      flt
    }
  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T15:53:29.997

您无法真正说出您在这里测量的内容 - 无论如何都不是很好 - 因为`for`循环不如纯`while`循环快，并且内部操作非常便宜。如果我们用 while 循环重写代码——关键的双重迭代是

```
 var i = 0
  while (i<I) {
    var j = 0
    while (j<J) {
      flt(i * J + j) = v(i)(j)
      j += 1
    }
    i += 1
  }
  flt 
```

然后我们看到通用情况的字节码实际上是截然不同的。非通用：

```
133:    checkcast   #174; //class "[D"
136:    astore  6
138:    iconst_0
139:    istore  5
141:    iload   5
143:    iload_2
144:    if_icmpge   191
147:    iconst_0
148:    istore  4
150:    iload   4
152:    iload_3
153:    if_icmpge   182
// The stuff above implements the loop; now we do the real work
156:    aload   6
158:    iload   5
160:    iload_3
161:    imul
162:    iload   4
164:    iadd
165:    aload_1
166:    iload   5
168:    aaload             // v(i)
169:    iload   4
171:    daload             // v(i)(j)
172:    dastore            // flt(.) = _
173:    iload   4
175:    iconst_1
176:    iadd
177:    istore  4
// Okay, done with the inner work, time to jump around
179:    goto    150
182:    iload   5
184:    iconst_1
185:    iadd
186:    istore  5
188:    goto    141 
```

这只是一堆跳转和低级操作（daload 和 dastore 是从数组加载和存储双精度的关键操作）。如果我们查看通用字节码的关键内部部分，它看起来像

```
160:    getstatic   #30; //Field scala/runtime/ScalaRunTime$.MODULE$:Lscala/runtime/ScalaRunTime$;
163:    aload   7
165:    iload   6
167:    iload   4
169:    imul
170:    iload   5
172:    iadd
173:    getstatic   #30; //Field scala/runtime/ScalaRunTime$.MODULE$:Lscala/runtime/ScalaRunTime$;
176:    aload_1
177:    iload   6
179:    aaload
180:    iload   5
182:    invokevirtual   #107; //Method scala/runtime/ScalaRunTime$.array_apply:(Ljava/lang/Object;I)Ljava/lang/Object;
185:    invokevirtual   #111; //Method scala/runtime/ScalaRunTime$.array_update:(Ljava/lang/Object;ILjava/lang/Object;)V
188:    iload   5
190:    iconst_1
191:    iadd
192:    istore  5 
```

如您所见，它必须调用方法来应用和更新数组。字节码是一堆乱七八糟的东西，比如

```
2:   aload_3 
3:   instanceof      #98; //class "[Ljava/lang/Object;"
6:   ifeq    18
9:   aload_3   
10:  checkcast       #98; //class "[Ljava/lang/Object;"
13:  iload_2
14:  aaload 
15:  goto    183
18:  aload_3
19:  instanceof      #100; //class "[I"
22:  ifeq    37
25:  aload_3   
26:  checkcast       #100; //class "[I"
29:  iload_2
30:  iaload 
31:  invokestatic    #106; //Method scala/runtime/BoxesRunTime.boxToInteger:
34:  goto    183
37:  aload_3
38:  instanceof      #108; //class "[D"
41:  ifeq    56
44:  aload_3   
45:  checkcast       #108; //class "[D"
48:  iload_2
49:  daload 
50:  invokestatic    #112; //Method scala/runtime/BoxesRunTime.boxToDouble:(
53:  goto    183 
```

基本上必须测试每种类型的数组，如果它是您要查找的类型，则将其装箱。Double 非常接近前面（10 个中的第 3 个），但它仍然是一个相当大的开销，即使 JVM 可以识别出代码最终是装箱/拆箱，因此实际上不需要分配内存。（我不确定它可以做到这一点，但即使它可以解决问题。）

那么该怎么办？您可以尝试 [@specialized T]，它将为您扩展十倍的代码，就像您自己编写每个原始数组操作一样。不过，专业化在 2.9 中存在缺陷（在 2.10 中应该更少），因此它可能无法按您希望的方式工作。如果速度至关重要——那么，首先，编写 while 循环而不是 for 循环（或者至少使用 -optimise 进行编译，这有助于将 for 循环提高两倍左右！），然后考虑专门化或编写为您需要的类型手动编码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-09T14:43:08.527

这是由于装箱，当您将泛型应用于原始类型并使用包含数组（或在方法签名中显示为普通类型或作为成员的类型）时。

## 例子

在以下 trait 中，编译后，该`process`方法将采用已擦除的`Array[Any]`.

```
trait Foo[A]{
  def process(as: Array[A]): Int
} 
```

如果您选择`A`成为值/原始类型，`Double`则必须将其装箱。当以非通用方式（例如 with `A=Double`）编写 trait 时，`process`编译为采用`Array[Double]`JVM 上的不同数组类型。这更有效，因为为了将 a 存储`Double`在 中`Array[Any]`，必须将 a`Double`包装（装箱）到一个对象中，对该对象的引用存储在数组中。特殊`Array[Double]`可以将其`Double`作为 64 位值直接存储在内存中。

## -`@specialized`注解

如果你觉得冒险，你可以试试这个`@specialized`关键字（它有很多错误并且经常使编译器崩溃）。这使得`scalac`为​​所有或选定的原始类型编译一个类的特殊版本。`get(a: A)`仅当类型参数在类型签名（但不是`get(as: Seq[A])`）中显示为普通类型或作为 的类型参数时，这才有意义`Array`。如果专业化毫无意义，我认为您会收到警告。

# clojure - 如何在中间件或预路由中添加身份验证？

> ID：11394801
> 
> 赞同：2
> 
> 时间：2012-07-09T12:13:16.253
> 
> 标签：clojure, middleware, noir

如何对发送的每个请求执行身份验证过程。我目前面临的问题是我无法访问作为请求参数发送的用户数据。这是我尝试过的

```
(pre-route[:any "/mainpage/*"] {:keys[data]}
 (when (not(contains? data "userid"))
   //false response
  )
) 
```

和中间件

```
(defn for-auth [handler]

  (fn [req]
    (if (contains? (:body (:params req)))
      (handler req)
      (handler (assoc req :body {})
    )
   )
) 
```

我也添加了中间件。但它们都不起作用..访问用户参数的任何想法..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:17:15.813

沙

你在使用包装参数吗？

.. (:use [ring.middleware params])

(def app (-> (handler/site main-routes) (wrap-base-url) (wrap-params)))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:27:44.367

好的，这就是我所做的，它解决了我的问题..

```
(pre-route [:any "/mainroute/*"] {{:keys [jsondata]}:params}
  (let [data (httputil/parse-json-data jsondata)]

  (cond
    (not (true? valid_req)) "false"
    (not (true? version_check)) "false"
    (not (true? user_valid)) "false"
    )
   )
  ) 
```

在这里，我已经在中间件中解析了我的 json 数据，并将其添加到带有键名的“params”中：jsondata .. 它工作得很好..

# php - 是否可以使用 TCPDF 在 HTML 表格中创建单元格？

> ID：11394803
> 
> 赞同：0
> 
> 时间：2012-07-09T12:13:27.333
> 
> 标签：php, tcpdf

我实际上正在编写一个模板工具，该工具能够读取格式正确的文本文件中编写的测试/测验，然后将其呈现在纸上（通过生成 PDF 文件）和网络上（通过创建 HTML + CSS + JS）。为了生成 PDF 文件，我选择了 TCPDF，但实际上我遇到了一个问题：有时我想创建表格并在其中放置复选框和文本框，就像您在这个*模型图像*中看到的那样：

![这是我的问题的代表](../Images/cc5345329624fab0851ae7a6d4e68eb1.png)

如果我要在 HTML 中执行此操作，我只需创建一些或标记并使用相关的 CSS 属性在它们上应用边框，例如通过编写如下内容：

```
<style>
    .dashed {
        border: 2px dashed gray;
        padding-left: 1em;
        padding-right: 1em;
        font-family: monospace;
    }
    .solid {
        border: 2px solid gray;
        padding-left: .75em;
        padding-right: .75em;
        margin-left: 1em;
        margin-right: .5em;
        font-family: monospace;
    }
    .solid:first-child {
        margin-left: 0;
    }
</style>

<table border="2" cellpadding="12" cellspacing="0">
    <tr>
        <td>What does 1 + 1 ?</td>
        <td><span class="dashed">&nbsp;&nbsp;&nbsp;&nbsp;</span>
    </tr>
    <tr>
        <td>What does 2 + 2 ?</td>
        <td>
            <span class="solid">A</span>
            One
            <span class="solid">B</span>
            Two
            <span class="solid">C</span>
            Three
            <span class="solid">D</span>
            Four
        </td>
    </tr>
</table> 
```

（我实际上使用内联 CSS 进行解释，我通常不会以这种方式应用 CSS 样式）

**不幸的是，如果我没记错的话，TCPDF 不支持 CSS 边框**——所以我有点失落。你能给我一些提示和你对我可以做些什么来达到同样的结果的看法吗？

提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:26:42.917

您是否尝试过使用 HTML 边框标签？例如：`border="2"` `bordercolor="yellow"` `bgcolor="red"`

# regex - 是否有可能获得一个正则表达式来用 'str1/str2,str1->str2' 替换 'str1/str2'

> ID：11394808
> 
> 赞同：1
> 
> 时间：2012-07-09T12:13:43.043
> 
> 标签：regex, aptana

**问题**

我有很多这种形式的字符串：-

```
str1/str2
str3/str4/str5 
```

可以有任意数量的段。我想做一个正则表达式搜索和替换以获得输出： -

```
str1/str2 , str1->str2
str3/str4/str5 , str3->str4->str5 
```

我的字符串实际上是形式`[a-z|_]+`

**我的尝试**

匹配：-

```
((?:(?:[a-z|_])\/?)+) 
```

用。。。来代替：-

```
$1 , $1 
```

这几乎是正确的，但我需要进行第二次搜索和替换才能将`/`'s 更改为`->`'s。

我可以用一个正则表达式来实现吗？还是取决于我使用的引擎及其反向引用功能？（我正在使用 aptana 中的搜索和替换功能）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:23:49.610

Aptana 支持全局修饰符而不是重复组？这适用于 JavaScript：

```
"str3/str4/str5/str6/str7".replace(/([a-z0-9_|]+)\//g, '$1->');
//output: str_3->str_4->str_5->str_6->str_7 
```

另外，我猜你的意思是你的模式也应该允许数字。

# javascript - 如何通过类名删除没有内容的html元素？

> ID：11394809
> 
> 赞同：0
> 
> 时间：2012-07-09T12:13:47.300
> 
> 标签：javascript, jquery, dom

如何通过 jQuery 或 Javascript 获取此输出：

HTML：

`This is a <span class="getClass" >test</span> for javascript and jquery Then suppose <span class="getClass" >it</span>. how can i change it in multiple line <span class="getClass" >look</span> like this`

输出：

`This is a test for javascript and jquery`

我尝试了一些代码，但它不起作用，例如：

```
<Script>
        $('.getClass').unwrap();
</script> 
```

但它删除了父元素而不是元素本身。

我只有类选择器访问元素并想删除整个元素。我无法阅读元素内的文本。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:16:36.147

试试这个，

**[现场演示](http://jsfiddle.net/agrKZ/1/)**

```
$('.getClass').replaceWith($('.getClass').text()); 
```

如果您不想更改 DOM，但只需要获取没有 span 标签的文本，那么您可以使用

```
$('.getClass').text(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T12:16:49.517

您应该能够将其设置为文本内容（请参阅[`text()`](http://api.jquery.com/text)）

```
$(containerSelector).text(function (_, text) {
    return text;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T12:16:36.320

基本上，您只需要文本。使用`.text`get 返回所有标签自动剥离的文本。通过使用`.text`设置文本，您可以有效地删除它们：http: [//jsfiddle.net/s4DJP/](http://jsfiddle.net/s4DJP/)。

```
$("...").text(function(i, text) {
  return text;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T12:45:34.253

更通用，使用正则表达式：

```
$().ready(function(){
var htmlstr = 'This is a <span class="getClass" >test</span> for javascript and jquery';
var regex = /(<([^>]+)>)/ig;
    var plainstr = htmlstr.replace(new RegExp(regex ), "");
    alert(plainstr );
});​ 
```

[http://jsfiddle.net/Qjvxf/4/](http://jsfiddle.net/Qjvxf/4/)

# vba - 在 VBA (Excel 2003) 上计算 SHA512

> ID：11394811
> 
> 赞同：4
> 
> 时间：2012-07-09T12:13:53.943
> 
> 标签：vba, hash, excel, sha512

我正在尝试在 VBA (Excel 2003) 上计算字符串的哈希值，但是当我调用 时`ComputeHash`，它会抛出一个`Invalid argument/procedure call`错误。

DLL 参考：mscorlib v4.0、System v4.0

MSDN 参考：http: [//msdn.microsoft.com/en-us/library/system.security.cryptography.sha512managed.aspx](http://msdn.microsoft.com/en-us/library/system.security.cryptography.sha512managed.aspx)

```
 Sub Main()
        Dim instance As New SHA512Managed
        Dim data() As Byte
        data = StringToByte("mymsg")
        Dim result() As Byte
        instance.ComputeHash(data) 'Throws runtime error'
        MsgBox (ByteToString(result))
    End Sub

    Function StringToByte(ByVal s)
        Dim b() As Byte           
        b = s  'Assign Unicode string to bytes.'
        StringToByte = b
    End Function

    Function ByteToString(ByVal dBytes)
        Dim strText As String
        strText = dBytes
        ByteToString = strText
    End Function 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T09:36:35.630

你不能完全那样使用​​它，但你快到了。由于 .ComputeHash 是一个可重载函数，而 VBA 无法处理此问题，因此您需要明确要调用哪个函数。因此，请考虑以下使用 UTF-8 字符串编码为 base64 的代码：

```
Sub test()
Dim text As Object
Dim SHA512 As Object

Set text = CreateObject("System.Text.UTF8Encoding")
Set SHA512 = CreateObject("System.Security.Cryptography.SHA512Managed")

Debug.Print ToBase64String(SHA512.ComputeHash_2((text.GetBytes_4("Hello World"))))

End Sub

Function ToBase64String(rabyt)

  'Ref: http://stackoverflow.com/questions/1118947/converting-binary-file-to-base64-string
  With CreateObject("MSXML2.DOMDocument")
    .LoadXML "<root />"
    .DocumentElement.DataType = "bin.base64"
    .DocumentElement.nodeTypedValue = rabyt
    ToBase64String = Replace(.DocumentElement.text, vbLf, "")
  End With
End Function 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T14:11:43.810

我无法让图书馆链接，所以我无法自己测试......

你的意思是也分配这样的结果吗？

```
result = instance.ComputeHash(data) 
```

深入研究您提供的链接，我发现了这个例子：

```
Dim data(DATA_SIZE) As Byte
Dim result() As Byte

Dim shaM As New SHA512Managed()
result = shaM.ComputeHash(data) 
```

这在我的脑海中似乎不正确，但同样，我无法确定测试，但他们已在声明`()`末尾添加。`New`你试过吗？

# java - Java 小程序在带有 CUPS 的 CentOS 6 上找不到打印机（已授予权限）

> ID：11394819
> 
> 赞同：0
> 
> 时间：2012-07-09T12:14:30.773
> 
> 标签：java

PrintServiceLookup.lookupDefaultPrintService() 在小程序中返回 null，但在小型应用程序中调用时返回默认打印机。

我尝试了权限 java.lang.RuntimePermission "queuePrintJob" 并单击确定以授予小程序访问打印机的权限。该小程序还具有端口 631 的权限。我认为这可能是 CUPS 问题，但应用程序可以正常工作。

PrintServiceLookup.lookupPrintServices(null, null) 返回一个空列表。

这是用于信息亭的，因此我可以设置所需的任何权限。

我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T04:10:58.660

我遇到了同样的问题，并通过在 java.policy 文件的 GRANT 部分添加以下行来解决它：

```
permission java.security.AllPermission; 
```

尽管不建议授予所有权限，但无法提交任何其他解决方案。如果有人得到确切的解决方案，请发布。

谢谢。

# python - 用特殊字符检查 unicode

> ID：11394820
> 
> 赞同：1
> 
> 时间：2012-07-09T12:14:35.290
> 
> 标签：python, regex, unicode-string

我有像

`u'0d7a6b6b37682bab6d8eda97cda4bad7'`

和

`u'Brauers, A.'`

我想区分这两种。我尝试使用`regex`with`\p{Alphabet}`但它不适用于第二个示例，因为第二个示例包含`,`and `.`。谁能帮我这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T12:23:11.840

只检查十六进制数字？

```
>>> re.match(r'^[0-9a-f]*$', u'0d7a6b6b37682bab6d8eda97cda4bad7') != None
True
>>> re.match(r'^[0-9a-f]*$', u'Brauers, A.') != None
False 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T12:25:23.463

最简单的事情可能是检查非十六进制数字：

```
if re.match(r'[^0-9a-f]', my_string):
    # This is a u'Brauers, A.' kind of string
else:
    # This is a u'0d7a6b6b37682bab6d8eda97cda4bad7' kind of string 
```

# ssas - 在 SSAS 中重命名时间维度中的属性值

> ID：11394821
> 
> 赞同：3
> 
> 时间：2012-07-09T12:14:49.113
> 
> 标签：ssas

我正在开发 SQL 分析服务以在我的应用程序中提供临时报告。我创建了一个时间维度以在我的多维数据集中使用。它有一些预定义的属性。例如一年中的月份。它具有诸如第 1 个月、第 2 个月等值，而我希望第 1 个月为 1 月，第 2 个月为 2 月等...

任何人都可以建议我解决它吗？

由于我是 SSAS 的新手，抱歉，如果我遗漏了一些非常愚蠢的东西......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T18:46:41.440

在 SSAS 中使用属性时，有两个属性会影响该属性的成员。第一个属性（在您创建属性时默认设置）是 KeyColumn。您在此处使用的列确定属性中有多少成员，因为处理会基于此列生成 SELECT DISTINCT 语句。如果您在此处使用整数值以获得更好的性能，这是一个好主意。

听起来您的属性可能有一个月份数，这很好。除了您要显示月份名称。在这种情况下，您将 NameColumn 属性设置为数据源视图中包含月份名称的列。这将生成您在浏览维度时看到的标签。

也就是说，仅使用月份编号或月份名称通常不是一个好主意，因为您可能希望创建一个逐年汇总月份的层次结构，而仅使用月份名称将无法做到这一点。我写了一篇博客文章，描述了如何设置可能对您有所帮助的日期维度：[http ://blog.datainspirations.com/2011/05/11/sqlu-ssas-week-dimension-design-101-2/](http://blog.datainspirations.com/2011/05/11/sqlu-ssas-week-dimension-design-101-2/)

# android - 冰淇淋三明治的位置管理器问题

> ID：11394825
> 
> 赞同：10
> 
> 时间：2012-07-09T12:15:00.873
> 
> 标签：android, gps

谁能解释一下这个错误是什么？我只为 android 4 + 而不是以下：

`E/AndroidRuntime(891): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.getaddress/com.example.getaddress.MainActivity}: java.lang.IllegalArgumentException: requested provider network doesn't exisit`

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-13T00:57:16.270

**在没有 Google API**的 Android 4+ 模拟器中似乎无法访问 NETWORK_PROVIDER 位置提供程序（*实际上我还没有对它们进行测试，见下文*）。我测试过的真实设备都可以使用它（但它们都有谷歌服务，用定制的、干净的 Android 版本进行测试会很有趣，也许用 Kindles？）。

这不是在设备设置中启用/禁用提供程序的问题，它根本不存在于模拟器中。

## 症状

基本上这段代码：

```
locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER,0,0,mLocListener); 
```

将导致以下异常：

```
java.lang.IllegalArgumentException: provider doesn't exisit: null 
```

在所有 Android 4+ 裸模拟器上（与谷歌绑定的模拟器相反）

*注意：“exisit”中的错字在实际的日志行中。*

## 诊断

使用以下内容获取目标设备上所有位置提供程序的列表：

```
List<String> providers = locationManager.getAllProviders(); 
```

我可以看到网络提供商在

*   物理设备
*   android 2.3.3 模拟器（无 Google API）
*   android 级别 17 (4.2) 模拟器（使用 Google API）

但不上

*   带有 Google API 的 android 级别 15 (4.0.3) 模拟器
*   android 4.2 模拟器（无 Google API）

我的猜测是，出于非技术原因，Google 不允许在 AOSP 中使用*网络*定位服务，并将其使用限制在 4.2（？）之后的 Google 绑定版本的操作系统中。

我不知道在非谷歌设备（如 Kindle）上是否有替代网络位置服务。

## 可能对您的应用产生影响

我不认为这会对大多数智能手机和平板电脑产生任何影响。不过可以

*   有点损害你的测试能力
*   对于使用自定义/非 Google 版本的 Android 的用户来说是一个兼容性问题（又是 Kindle？）

## 如何检测

一个简单的测试，例如：

```
locationManager.getAllProviders().contains(LocationManager.NETWORK_PROVIDER) 
```

可以轻松地告诉您设备上是否存在网络提供商。请注意，如果它存在，但用户尚未激活它，您的 LocationListener 将在位置请求之后收到*onProviderDisabled*回调。

# ios - 核心数据：子对象没有继承父关系

> ID：11394828
> 
> 赞同：0
> 
> 时间：2012-07-09T12:15:19.420
> 
> 标签：ios, macos, core-data, nsmanagedobject

我有一个`SomeObject`具有三个关系的类的父实体：

*   `Parent`
*   `Children`
*   `SomeRelationShipWithAnotherObjectOfADifferentClass`

`Parent`关系是多对一的，而是`Children`一对多的。它们都指向同一类的对象 ( `SomeObject`)。

当我产生一个孩子时，我将关系添加到他的父母，这按预期工作；但我也期望其他关系 ( `SomeRelationShipWithAnotherObjectOfADifferentClass`) 被继承，但它失败了。

有小费吗？

谢谢你

*编辑#1*

这是我的`NSManagedObjectModel`；我试图让[实体`SomeEntity`]的孩子继承[某些]他们父母的关系。

![在此处输入图像描述](../Images/bff19031db24924b22e1cbca58c06a50.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T16:01:30.150

我认为您混淆了父子关系，它们基本上定义了一个树结构，具有（面向对象的）继承。

如果您对 parent 的关系感兴趣，您可以随时通过 Parent 关系访问它们：

```
self.Parent.SomeRelationShipWithAnotherObjectOfADifferentClass 
```

如果您定义了自定义类，或者：

```
[obj valueForKeyPath: @"Parent.SomeRelationShipWithAnotherObjectOfADifferentClass"] 
```

如果不。

# c++ - 如何定义模板类的模板成员函数

> ID：11394832
> 
> 赞同：50
> 
> 时间：2012-07-09T12:15:39.890
> 
> 标签：c++, templates

> **可能重复：**
> [如何在类定义之外的模板类中定义模板函数？](https://stackoverflow.com/questions/5108359/how-do-i-define-a-template-function-within-a-template-class-outside-of-the-class)

在模板类中有模板成员函数的情况下，我正在努力解决语法问题：

```
template <typename T> class Foo
{
    void Bar(const T * t);
    template <typename T2> void Bar(const T2 * t);
};

template <typename T> void Foo<T>::Bar(const T * t)
{
    // ... no problem ...
}

template <typename T> void Foo<T>::Bar<typename T2>(const T2 * t)
{
    // ... this is where I'm tearing my hair out ...
} 
```

第一个成员函数很好，但是处理模板类的基类型以外的类型的模板成员函数是我遇到问题的地方。对于上述情况，我收到以下错误：

```
template_problem.cpp:12: error: parse error in template argument list
template_problem.cpp:12: error: expected ‘,’ or ‘...’ before ‘*’ token
template_problem.cpp:12: error: ISO C++ forbids declaration of ‘T2’ with no type
template_problem.cpp:12: error: template-id ‘Bar<<expression error> >’ in declaration of primary template
template_problem.cpp:12: error: prototype for ‘void Foo<T>::Bar(int)’ does not match any in class ‘Foo<T>’
template_problem.cpp:4: error: candidates are: template<class T> template<class T2> void Foo::Bar(const T2*)
template_problem.cpp:7: error:                 void Foo<T>::Bar(const T*)
template_problem.cpp:12: error: template definition of non-template ‘void Foo<T>::Bar(int)’ 
```

并且我还尝试了所有其他我能想到的模板版本的语法变体`Bar`。

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-07-09T12:20:38.290

```
template<typename T>
template<typename T2>
void Foo<T>::Bar(const T2* t) 
{
     // stop tearing your hair out
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-09T12:23:31.860

```
template <typename T>
template <typename T2> 
void Foo<T>::Bar(const T2 * t) {
    // ... this is where I'm tearing my hair out ...
} 
```

丑是不是。

# java - JDOM - SaxBuilder - Content is not allowed in prolog

> ID：11394834
> 
> 赞同：1
> 
> 时间：2012-07-09T12:15:48.557
> 
> 标签：java, jdom

I am having trouble parsing an XML file into a JDOM Document instance using the SAXBuilder.

It throws the following exception:

```
[Fatal Error] :1:1: Content is not allowed in prolog. 
```

I have found and read all those threads on Stack Exchange and on other places in the Internet and tried various things to debug the error.

I have end up with the following code snippet, which throws as well.

```
String template = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<server></server>";
InputStream in = new StringBufferInputStream(template);
return saxBuilder.build(in); 
```

What's wrong with it?

* * *

**I am ashamed to admit that but it turned out that the error wasn't produced by the snippet I have shown here but rather at a later point where I was comparing the parsed XML against another one using the XMLUnit library.**

The think that made me believe that the error was in the presented lines was the content of the error message.

I believe it would be appropriate to close (and delete, if that's possible) this question as it does not mean any value.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:20:02.847

此错误通常意味着您的 xml 声明之前有文本。

在您的代码段中，xml 似乎很好。但问题可能不在您的文档中。如果您有架构或其他引用的 xml 文件，则错误实际上可能涉及其中之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T12:26:38.283

我怀疑问题出在其他地方。以下代码（使用[dom4j](http://dom4j.sourceforge.net/)）适用于我：

```
public static void main(String[] args) throws DocumentException {
    String template = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<server></server>";
    SAXReader saxReader = new SAXReader();
    InputStream is = new StringBufferInputStream(template);
    Document document = saxReader.read(is);
    System.out.println(document.asXML());
} 
```

另请注意，`StringBufferInputStream`已弃用。另一种选择是

```
 StringReader sr = new StringReader(template);
        Document document = saxReader.read(sr); 
```

所以，问题不在于您的 XML 片段，而可能在于`saxBuilder.build(...)`

# ios - undo redo issues with CGLayer

> ID：11394839
> 
> 赞同：1
> 
> 时间：2012-07-09T12:16:04.203
> 
> 标签：ios, cocoa-touch, quartz-graphics, quartz-2d, cglayer

I am working with unod redo operations on CgLayer, I have tried some code, but not able to get it working, dont know , where I am getting wrong, below is my code, which i have written

this is my drawRect function

```
- (void)drawRect:(CGRect)rect
{    
    m_backgroundImage = [UIImage imageNamed:@"bridge.jpg"];

    CGPoint drawingTargetPoint = CGPointMake(0,0);
    [m_backgroundImage drawAtPoint:drawingTargetPoint];

    switch(drawStep)
    {
          case DRAW:
          {
              CGContextRef context = UIGraphicsGetCurrentContext();

              if(myLayerRef == nil)
              {

                  myLayerRef = CGLayerCreateWithContext(context, self.bounds.size, NULL);
              }   

              CGContextDrawLayerAtPoint(context, CGPointZero, myLayerRef); 
              break;
          }           

         case UNDO:
         {            
              [curImage drawInRect:self.bounds];              
              break;
         }

        default:
            break;
    }      
} 
```

On touches ended , I am converting the layer into NSValue and storing as keyValue pair into NSDictionary and then adding the dictionary object to array.

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{        
    NSValue *layerCopy = [NSValue valueWithPointer:myLayerRef];

    NSDictionary *lineInfo = [NSDictionary dictionaryWithObjectsAndKeys:layerCopy, @"IMAGE",
                              nil];

    [m_pathArray addObject:lineInfo];    
    NSLog(@"%i",[m_pathArray count]);

} 
```

below is my Undo functionality

```
- (void)undoButtonClicked
{   
    if([m_pathArray count]>0)
    {
        NSMutableArray *_line=[m_pathArray lastObject];
        [m_bufferArray addObject:[_line copy]];
        [m_pathArray removeLastObject];
        drawStep = UNDO;
        [self redrawLine];
    } 
}

//Redraw functions

- (void)redrawLine
{
    NSDictionary *lineInfo = [m_pathArray lastObject];

    NSValue *val = [lineInfo valueForKey:@"IMAGE"];

    CGLayerRef  layerToShow = (CGLayerRef) [val pointerValue];

    CGContextRef context1 = CGLayerGetContext(layerToShow);
    CGContextDrawLayerAtPoint(context1, CGPointMake(00, 00),layerToShow);
    [self setNeedsDisplayInRect:self.bounds];
} 
```

I think its here where I am goin wrong. So friends please help me out.

From the comments below, I have added the function, where its draws into Cglayer(this function I am calling into touchesMovedEvent.

```
- (void) drawingOperations
{    
    CGContextRef context1 = CGLayerGetContext(myLayerRef);    

    CGPoint mid1 = midPoint(m_previousPoint1, m_previousPoint2); 
    CGPoint mid2 = midPoint(m_currentPoint, m_previousPoint1);     

    CGContextMoveToPoint(context1, mid1.x, mid1.y);
    CGContextAddQuadCurveToPoint(context1, m_previousPoint1.x, m_previousPoint1.y, mid2.x, mid2.y); 
    CGContextSetLineCap(context1, kCGLineCapRound);
    CGContextSetLineWidth(context1, self.lineWidth);
    CGContextSetStrokeColorWithColor(context1, self.lineColor.CGColor);           
    CGContextSetAllowsAntialiasing(context1, YES);
    CGContextSetInterpolationQuality(context1, kCGInterpolationHigh); 
    CGContextSetAlpha(context1, self.lineAlpha);
    CGContextStrokePath(context1);    
} 
```

Regards Ranjit

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:35:49.057

实现 Undo 和 Redo 的最佳方法是将其实现`NSUndoManager`为简要描述，您不必保存要撤消或重做的 Object 的每个状态，NSUndoManager 本身会为您完成...

实现这一目标的步骤是：

1- 初始化 NSUndoManager。

2- 使用指定的函数调用在 NSUndoManager 对象中注册对象状态，稍后将为您讨论这个问题。

3-使用 NSUndoManager 对象中的撤消或重做或清除操作功能。

来自我的工作解决方案

-在 .h 文件中

```
@property (nonatomic,retain) NSUndoManager *undoManager; 
```

*   在 .m 文件中

    @synthesize undoManager；

*   在“viewDidLoad”方法中——初始化你的 NSUndoManager

    undoManager = [[NSUndoManager alloc] init];

假设您的类中有一个使用捏合放大/缩小的函数，因此在“viewDidLoad”中您将拥有

```
UIPinchGestureRecognizer *pinchGesture =
    [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(pinch:)];
    pinchGesture.delegate = (id)self;
    [self.view addGestureRecognizer:pinchGesture]; 
```

所以捏会放大/缩小这样注意“MyImageView”是我们想要放大/缩小的图像

```
- (void)pinch:(UIPinchGestureRecognizer*)recognizer{

    if (recognizer.state == UIGestureRecognizerStateEnded || recognizer.state == UIGestureRecognizerStateChanged) {
        NSLog(@"gesture.scale = %f", recognizer.scale);

        CGFloat currentScale = self.MyImageView.frame.size.width / self.MyImageView.bounds.size.width;
        CGFloat newScale = currentScale * recognizer.scale;
        //Here is the line that register image to NSUndoManager before making and adjustments to the image "save current image before changing the transformation"
        //Add image function is function that fired when you Make undo action using NSUndoManager "and so we maintain only image transformation that changed when you zoom in/out"
         [[undoManager prepareWithInvocationTarget:self] AddImage:self.MyImageView.transform];

        if (newScale < 0.5) {
            newScale = 0.5;
        }
        if (newScale > 5) {
            newScale = 5;
        }

        CGAffineTransform transform = CGAffineTransformMakeScale(newScale, newScale);
        self.MyImageView.transform = transform;
        recognizer.scale = 1;
    }
} 
```

-AddImage 函数将当前图像转换状态保存在 NSUndoManager 中。

```
-(void)AddImage:(CGAffineTransform)sender{
    CGAffineTransform transform = sender;
    self.MyImageView.transform = transform;
} 
```

因此，如果您有执行撤消操作的按钮

```
-(IBAction)OptionsBtn:(id)sender{
  if ([undoManager canUndo]) {
      [undoManager undo];
  }
} 
```

因此，如果您想取消所有操作，则有两种方法

```
while ([undoManager canUndo]) {
   [undoManager undo];
} 
```

或者

```
[undoManager removeAllActions]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T05:57:33.520

```
- (void)redrawLine
{
    NSDictionary *lineInfo = [m_pathArray lastObject];
    NSValue *val = [lineInfo valueForKey:@"IMAGE"];
    CGContextRef context1 = (CGContextRef) [val pointerValue];
    CGContextDrawLayerAtPoint(context1, CGPointMake(00, 00),layerToShow);
    [self setNeedsDisplayInRect:self.bounds];
} 
```

只需使用您的代码更新此方法

# ios - Facebook iOS sdk xcode 4.3/storyboards

> ID：11394841
> 
> 赞同：2
> 
> 时间：2012-07-09T12:16:11.750
> 
> 标签：ios, xcode, facebook, sdk, storyboard

i have been looking at tutorials for weeks now, not been able to find ANY storyboard examples implementing FB in iOS.

i got my app to open the FBloginscreen, request user auth for app, and then return to app... like some other users , fbdidlogin and handleopenurl method are not called. i am sure i am doing something wrong but just don't know what. i am using the default view controller in my storyboard (i did not create a vc programatically ) so i might need to do something with that.

from what i understand that handleopenurl method needs to be in my app delegate.m file and not in my view controller.m file, but i am not sure how it should be written and how to connect a UIViewController object i create to the VC in my storyboard (the one with the buttons and labels that i am using).

```
ViewController.h (relevant to FB)

#import "FBConnect.h"

@interface ViewController : UIViewController
<UIImagePickerControllerDelegate, 
UINavigationControllerDelegate, FBSessionDelegate, FBDialogDelegate>
{
Facebook *facebook; 
}

@property (nonatomic,retain) Facebook *facebook;' 
```

* * *

```
ViewController.m (relevant to FB)

#import "ViewController.h"

@implementation ViewController;
@synthesize facebook;   

-(void)LogintoFB
{
    facebook = [[Facebook alloc] initWithAppId:@"345872345487883" andDelegate:self];
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if ([defaults objectForKey:@"FBAccessTokenKey"] 
        && [defaults objectForKey:@"FBExpirationDateKey"]) {
        facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
        facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
    }
    if (![facebook isSessionValid]) {
        [facebook authorize:nil];
        NSLog(@"did log in");
    }

}
// Pre iOS 4.2 support
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
    NSLog(@"-4.2 got calleld");
    return [facebook handleOpenURL:url]; 
}
// For iOS 4.2+ support
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
    NSLog(@"4.2+ got called");
    return [facebook handleOpenURL:url]; 
}
}
- (void)fbDidLogin {
    NSLog(@"fbDidLogin");
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:[facebook accessToken] forKey:@"FBAccessTokenKey"];
    [defaults setObject:[facebook expirationDate] forKey:@"FBExpirationDateKey"];
    [defaults synchronize];

    [facebook dialog:@"feed" andDelegate:self];

}' 
```

* * *

also if you can direct me to a tutorial that used storyboard when implementing Facebook in iOS that would be great.

thank you!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T03:18:02.227

`-(BOOL)application:openURL:sourceApplication:annotation:`应该在应用程序委托中实现。

向 appDelegate 添加一个属性：

```
@property (nonatomic, strong) Facebook *facebook; 
```

合成它！

在您的 logintoFB 方法中，在创建 Facebook 对象后添加它（AppDelegate 应该是您的 appDelegate 类名称）

```
AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
appDelegate.facebook = facebook; 
```

# android - 如何禁用 Android 4.0 主页按钮？

> ID：11394843
> 
> 赞同：0
> 
> 时间：2012-07-09T12:16:17.913
> 
> 标签：android, android-4.0-ice-cream-sandwich

我可以禁用 Android 2.2、3.0 等的主页按钮。但相同的代码不适用于 4.0。有什么办法可以禁用home键吗？

```
@Override 
public void onAttachedToWindow() 
{ 
    super.onAttachedToWindow(); 
    this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD); 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T12:27:20.737

**禁用 Home Button**，许多开发人员询问这样的功能！但我只能说：您绝对不应该在 Android 应用程序中禁用主页按钮。这是一个主要的**反模式**，并且都会使您的应用程序被标记为**垃圾邮件**和**恶意软件**。用户讨厌你禁用他们的主页按钮，你应该不惜一切代价避免它。这样做并不违法，但您的用户会生气，您的应用在 Google Play 上的评分会很低。此外，出于明显的**安全**原因，该技术在**Android 4.0中****不再**适用！！

 ***** * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T10:22:53.753

您可以简单地将以下代码添加到您的 android 清单中：

```
 <action android:name="android.intent.action.MAIN" />              
   <category android:name="android.intent.category.HOME" />                 
   <category android:name="android.intent.category.DEFAULT" />               
    <category android:name="android.intent.category.MONKEY"/> 
```****

# asp.net - ListView find dropdownlist in table

> ID：11394845
> 
> 赞同：0
> 
> 时间：2012-07-09T12:16:23.870
> 
> 标签：asp.net, listview, findcontrol

I have a list view with table inside and i need to get all dropdown lists and file upload controls, but find returns nothing. This is my code:

```
<asp:ListView runat="server" ID="MyListView" OnItemDataBound="FillDropDownList">
    <LayoutTemplate>
        <table border="0" cellpadding="2" cellspacing="0">
        <tr>
        <th>Wholesaler</th>
        <th>Import</th>
        <th>Period</th>
        <th>Upload Date</th>
        <th>Upload</th>
        </tr>
            <asp:PlaceHolder ID="itemPlaceholder" runat="server" />
    </table>
    </LayoutTemplate>
    <ItemTemplate>
    <tr class="row1">
        <td><%# DataBinder.Eval(Container.DataItem, "Wholesaler") %></td>
            <td><%# DataBinder.Eval(Container.DataItem, "Import")%></td>
        <td><%# DataBinder.Eval(Container.DataItem, "Period")%></td>
        <td><asp:DropDownList runat="server" ID="DaysDropDownList"></asp:DropDownList></td>
       <td><asp:FileUpload ID="FileUpload" runat="server" /></td>
    </tr>
    </ItemTemplate>
</asp:ListView>

DropDownList dr = (DropDownList)MyListView.Controls[0].FindControl("DaysDropDownList");
FileUpload fl = (FileUpload)MyListView.Controls[0].FindControl("FileUpload"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:23:55.293

想...你得到了那个错误，因为列表视图还没有绑定，所以我认为最好的方法是在 ItemDataBound 事件上完成所有这些。您会发现下拉列表如下：

```
protected void FillDropdownlist(object sender, ListViewItemEventArgs e)
    {

     if (e.Item.ItemType == ListViewItemType.DataItem)
        {
            DropDownList dr = (DropDownList)e.Item.FindControl("DaysDropDownList");
            FileUpload fl = (FileUpload)e.Item.FindControl("FileUpload");

            if (dr!= null)
            {
                //code here
            }
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:19:08.863

那是因为`MyListView.Controls[0]`指向不包含这两个的内部控件。

尝试调试并准确找到您的容器控件，然后直接访问它而无需硬编码索引。可以通过行绑定调用的事件参数访问它。

我还可以建议您使用`as`运算符，因为它不会引发异常：

> as 运算符类似于强制转换，只是它在转换失败时产生 null 而不是引发异常

IE

```
DropDownList dr = e.Item.FindControl("DaysDropDownList") as DropDownList;
FileUpload fl = e.Item.FindControl("FileUpload") as FileUpload; 
```

或绑定后

```
//Loop i for the items of your listview
DropDownList dr = MyListView.Items[i].FindControl("DaysDropDownList") as DropDownList;
FileUpload fl = MyListView.Items[i].FindControl("FileUpload") as FileUpload; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T12:25:00.490

您需要遍历`Items`列表视图的集合，然后`FindControl`在每个项目上使用。这样的事情应该让你走上正确的轨道：

```
foreach (var lvItem in MyListView.Items)
{
    if (lvItem.ItemType == ListViewItemType.DataItem)
     {
        DropDownList dr = (DropDownList)lvItem.FindControl("DaysDropDownList");
        FileUpload fl = (FileUpload)lvItem.FindControl("FileUpload");
    }
} 
```

# objective-c - glGrab for screen capture on Mac OS 10.7.3 with XCode 4.3.2

> ID：11394849
> 
> 赞同：1
> 
> 时间：2012-07-09T12:16:33.643
> 
> 标签：objective-c, macos, opengl, screen-capture

I am trying to integrate the glGrab code for screen capture on Mac OS under mentioned config and I am currently stuck at an all blue screen being rendered inside my window. I believe that there is some issue with how the image texture has been created, but can't tell what. I am just a couple of weeks old in OpenGL so please go easy on me if I missed something obvious.

I am using the glGrab code as it is except CGLSetFullScreen method (and not even CGLSetFullScreenOnDisplay) because these methods are now deprecated. So this one line of code has been commented out for the time being.

I have been doing some research on this topic since some time now and found another thread on stackoverflow which possibly could have been the complete answer, but it helped much nonetheless. [Convert UIImage to CVImageBufferRef](https://stackoverflow.com/questions/8138018/convert-uiimage-to-cvimagebufferref)

A direct reference to the glGrab code is [http://code.google.com/p/captureme/source/browse/trunk/glGrab.c](http://code.google.com/p/captureme/source/browse/trunk/glGrab.c)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T12:34:57.723

我的上述问题的答案如下。所以没有更多的opengl或glGrab。使用最适合 Mac OSX 的软件。这也不包括捕获鼠标指针的代码，但我相信如果你已经登陆这个页面，你会足够聪明，可以自己弄清楚。或者，如果阅读本文的人知道解决方案，那么这是您帮助兄弟会的机会 :) 此代码还返回一个 CVPixelBufferRef。您可以选择按原样发回 CGImageRef 甚至字节流，只需根据自己的喜好进行调整即可。：

```
void swizzleBitmap(void *data, int rowBytes, int height) {
    int top, bottom;
    void * buffer;
    void * topP;
    void * bottomP;
    void * base;

    top = 0;
    bottom = height - 1;
    base = data;
    buffer = malloc(rowBytes);

    while (top < bottom) {
        topP = (void *)((top * rowBytes) + (intptr_t)base);
        bottomP = (void *)((bottom * rowBytes) + (intptr_t)base);

        bcopy( topP, buffer, rowBytes );
        bcopy( bottomP, topP, rowBytes );
        bcopy( buffer, bottomP, rowBytes );

        ++top;
        --bottom;
    }   
    free(buffer);
}   

CVImageBufferRef grabViaOpenGL() {
    int bytewidth;

    CGImageRef image = CGDisplayCreateImage(kCGDirectMainDisplay);    // Main screenshot capture call

    CGSize frameSize = CGSizeMake(CGImageGetWidth(image), CGImageGetHeight(image));    // Get screenshot bounds

    NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                            [NSNumber numberWithBool:NO], kCVPixelBufferCGImageCompatibilityKey,
                            [NSNumber numberWithBool:NO], kCVPixelBufferCGBitmapContextCompatibilityKey,
                            nil];

    CVPixelBufferRef pxbuffer = NULL;
    CVReturn status = CVPixelBufferCreate(kCFAllocatorDefault, frameSize.width,
                                          frameSize.height,  kCVPixelFormatType_32ARGB, (CFDictionaryRef) options,
                                          &pxbuffer);

    CVPixelBufferLockBaseAddress(pxbuffer, 0);
    void *pxdata = CVPixelBufferGetBaseAddress(pxbuffer);

    CGColorSpaceRef rgbColorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef context = CGBitmapContextCreate(pxdata, frameSize.width,
                                                 frameSize.height, 8, 4*frameSize.width, rgbColorSpace,
                                                 kCGImageAlphaNoneSkipLast);

    CGContextDrawImage(context, CGRectMake(0, 0, CGImageGetWidth(image),
                                           CGImageGetHeight(image)), image);

    bytewidth = frameSize.width * 4; // Assume 4 bytes/pixel for now
    bytewidth = (bytewidth + 3) & ~3; // Align to 4 bytes
    swizzleBitmap(pxdata, bytewidth, frameSize.height);     // Solution for ARGB madness

    CGColorSpaceRelease(rgbColorSpace);
    CGImageRelease(image);
    CGContextRelease(context);

    CVPixelBufferUnlockBaseAddress(pxbuffer, 0);

    return pxbuffer;
} 
```

# c# - 使用 Roslyn-CTP 的单个右大括号的奇怪解析行为

> ID：11394859
> 
> 赞同：3
> 
> 时间：2012-07-09T12:16:50.983
> 
> 标签：c#, .net, curly-braces, roslyn

我们正在用 roslyn 编写代码生成器。除其他事项外，用户应该能够指定方法主体的单个语句或属性的 getter/setter 主体。因此，他将字符串列表传递给翻译方法。当将单个花括号作为语句传递时，右括号会以某种方式被吞掉。

方法：

```
internal static SyntaxList<StatementSyntax> GetSyntaxListOfStatementSyntaxs(IEnumerable<string> statements)
{
    if (statements.Any())
    {
        var statementSyntaxs = statements.Select(s => Syntax.ParseStatement(s));
        return Syntax.List(statementSyntaxs);
    }
    return Syntax.List<StatementSyntax>();
} 
```

输入：

```
var list = new List<string>
{
    "if (this.field != null)",
    "{",
    "this.field = new MyType();",
    "}",
    "return this.field;"
}; 
```

SyntaxList 将用于新方法声明（最后一个参数）：

```
 var methodDeclarationSyntax = Syntax.MethodDeclaration(
                Syntax.List<AttributeDeclarationSyntax>(),
                Syntax.TokenList(),
                Syntax.IdentifierName("MyType"),
                null,
                Syntax.Identifier("MethodIdentifier"),
                null,
                Syntax.ParameterList(),
                Syntax.List<TypeParameterConstraintClauseSyntax>(),
                Syntax.Block(statementSyntaxList)); 
```

我还尝试单独处理单个右大括号，但我没有设法创建一个只有一个右大括号的语句。

奇怪的是，单个左大括号被解析为语法块（正确与否），但手动创建该语法块似乎是不可能的。既不用于开口，也不用于闭合支架。

我不想添加对这些语句的自定义解析，因为我们决定让 Roslyn 摆脱解析任务。有人知道如何处理这些特殊声明吗？或者也许有人可以用另一种方法来处理这个问题。任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T13:33:53.513

问题是左大括号和右大括号都不是语句，因此您不能这样解析它们。

Roslyn 甚至会尝试解析无效代码，这就是为什么您在`BlockSyntax`parse 时得到 a 的原因`{`。但它是一个不完整的块，缺少右大括号。

我认为您应该立即解析整个方法体。您可以通过将这些线连接成一个字符串并添加一个左大括号和一个右大括号来做到这一点。

因此，您实际解析为语句的字符串如下所示：

```
{
if (this.field != null)
{
this.field = new MyType();
}
return this.field;
} 
```

# php - search with multiple category and criteria

> ID：11394862
> 
> 赞同：0
> 
> 时间：2012-07-09T12:17:16.007
> 
> 标签：php, mysql

My table has 4 columns. "isbn, author, title, price". I want to search one of them combining all 4 fields. Like: if author "kayle" write 4 books with same price ($50) but with different title, for that in search page, if i select author:kayle and hit search, then it shows all books with all different or may be same prices and titles. Now i want to select author:kayle and price:$50 at the same time, and hit enter. For that it will show only $50 prices books wrote by kayle and it will appear in the table with 4 rows.

I try to combine it but stuck with the second step searching query. Here is my code if any one understand what i want to do, please share it. Here is my code:

```
<form method="post" action="search_form.php">
<input type="hidden" name="submitted" value="true"/>
<table border="1">
<tr>
    <td style="padding:3px 10px; font-weight:bold;">ISBN</td>
    <td style="padding:3px;">
    <input type="hidden" name="category_isbn" id="category_isbn" value="isbn"/>
    : <select name='criteria_isbn' id="criteria_isbn" onchange="ajaxFunction()">
        <option selected="selected">- Select -</option>
    <?php
        $order = "SELECT isbn FROM books" or die (mysql_error());
        $result = mysql_query($order);  
        while($data = mysql_fetch_array($result))
        {
         echo ("<option> $data[isbn] </option>");
        }
    ?>
    </select>
    </td>
    <td style="padding:3px 10px; font-weight:bold;">Author</td>
    <td style="padding:3px;">
    <input type="hidden" name="category_author" id="category_author" value="author"/>
    : <select name='criteria_author' id="criteria_author" onchange="ajaxFunction()">
        <option selected="selected">- Select -</option>
    <?php
        $order = "SELECT author FROM books" or die (mysql_error());
        $result = mysql_query($order);  
        while($data = mysql_fetch_array($result))
        {
         echo ("<option> $data[author] </option>");
        }
    ?>
    </select>
    </td>
    <td style="padding:3px 10px; font-weight:bold;">Title</td>
    <td style="padding:3px;">
    <input type="hidden" name="category_title" id="category_title" value="title"/>
    : <select name='criteria_title' id="criteria_title" onchange="ajaxFunction()">
        <option selected="selected">- Select -</option>
    <?php
        $order = "SELECT title FROM books" or die (mysql_error());
        $result = mysql_query($order);  
        while($data = mysql_fetch_array($result))
        {
         echo ("<option> $data[title] </option>");
        }
    ?>
    </select>
    </td>
    <td><input type="submit" /></td>
</tr>
</table>
</form>
<?php
if(isset($_POST['submitted']))
{
    $category_isbn = $_POST['category_isbn'];
    $criteria_isbn = $_POST['criteria_isbn'];
    $query = "SELECT * FROM books WHERE $category_isbn LIKE '%".$criteria_isbn."%'";
    $result = mysql_query($query) or die(mysql_error());
    $num_rows = mysql_num_rows($result);

    if(isset($_POST['criteria_isbn']))
    {
        $category_author = $_POST['category_author'];
        $criteria_author = $_POST['criteria_author'];
        $query = "SELECT * FROM books WHERE $category_author LIKE '%".$criteria_author."%'";
        $result = mysql_query($query) or die(mysql_error());
        $num_rows = mysql_num_rows($result);

        if(isset($_POST['criteria_author']))
        {
            $category_title = $_POST['category_title'];
            $criteria_title = $_POST['criteria_title'];
            $query = "SELECT * FROM books WHERE $category_title LIKE '%".$criteria_title."%'";
            $result = mysql_query($query) or die(mysql_error());
            $num_rows = mysql_num_rows($result);

            echo "$num_rows results found";
            echo "<table border= 1>";
            echo "<tr> <th>ISBN</th> <th>AUTHOR</th> <th>TITLE</th> <th>PRICE</th> </tr>";
                while($row = mysql_fetch_array($result))
                {
                    echo "<tr><td>";
                    echo $row['isbn'];
                    echo "</td><td>";
                    echo $row['author'];
                    echo "</td><td>";
                    echo $row['title'];
                    echo "</td><td>";
                    echo $row['price'];
                    echo "</td></tr>";
                }
            echo "</table>";
        }
    }
}
?> 
```

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:21:43.917

尝试这个

首次搜索

```
 select* from table where author="kayle"; 
```

第二次搜索

```
 select * from table where author="kayle" and price="50"; 
```

# eclipse - build.xml throws annotation error

> ID：11394865
> 
> 赞同：0
> 
> 时间：2012-07-09T12:17:32.263
> 
> 标签：eclipse, ant, junit, build.xml

I am new to ANT and JUnit. As per the requirement i created 'JUnitTestCase' in Eclipse and call the requested test classes as per proper annotation. While running the 'build.xml' file through 'Ant Build', it throws error as:

```
D:\ecllipse\eclipse\JunitTestProject>ant compile  
Buildfile: D:\ecllipse\eclipse\JunitTestProject\build.xml  
setClassPath:  
init:  
clean:  
compile:
[echo] making directory...  
[echo] classpath------:  
[echo] compiling...  
[javac] Compiling 4 source files to D:\ecllipse\eclipse\JunitTestProject\build  
[javac] D:\ecllipse\eclipse\JunitTestProject\src\jnuittestPckg\HelloWorldTest.java:3: package org.junit does not exist  
[javac]     import org.junit.After;  
[javac]                     ^  
[javac] D:\ecllipse\eclipse\JunitTestProject\src\jnuittestPckg\HelloWorldTes
t.java:4: package org.junit does not exist  
[javac]     import org.junit.Before;  
[javac]                     ^ 
```

While looking back to JUnitTEstCase, i have imported the annotations like (import org.junit.After;import org.junit.Before and import org.junit.Test;). I, also, set build path for 'junit.jar'. I tried lot but couldn't figure it out. i am also attaching JUnitTest project as:

```
package jnuittestPckg;

import org.junit.After;
import org.junit.Before;
import org.junit.Test; 
```

public class HelloWorldTest {
private HelloWorld hlwrd;

```
@Before
public void setUp() throws Exception {
hlwrd = new HelloWorld();
System.out.println("I am in Before");
}

@After
public void tearDown() throws Exception {
System.out.println("I am in After");
}

@Test
public void testClass1() {
    hlwrd.Class1(null);
}

@Test
public void testClass2() {
    hlwrd.Class2(null);
} 
```

}

Please help me out.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T05:25:20.623

You test.classpath property does not include the junit.jar. Add it to the classpath and this issue will be resolved.

# php - Outlook Calendar attachment not working

> ID：11394875
> 
> 赞同：1
> 
> 时间：2012-07-09T12:18:28.793
> 
> 标签：php, outlook, attachment, icalendar

When the outlook calendar attachment is sent with the email, it does not appear on the outlook calendar. Even after opening the attachment it does not put itself on the calendar. it's working fine in Gmail but attachment problem occurs in Microsoft outlook.

here i have given code below:

```
 $msg_email.="BEGIN:VCALENDAR\n";
    $msg_email.="VERSION:2.0\n";
    $msg_email.="PRODID:-//$id//NONSGML $id//EN\n";
    $msg_email.="METHOD:REQUEST\n"; // requied by Outlook
    $msg_email.="BEGIN:VTIMEZONE\n";
    $msg_email.="TZID:$timezone\n";
    $msg_email.="X-LIC-LOCATION:$timezone\n";
    $msg_email.="BEGIN:DAYLIGHT\n";
    $msg_email.="TZOFFSETFROM:+1000\n";
    $msg_email.="TZOFFSETTO:+1100\n";
    $msg_email.="TZNAME:EST\n";
    $msg_email.="DTSTART:19701025T020000\n";
    $msg_email.="RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU\n";
    $msg_email.="END:DAYLIGHT\n";
    $msg_email.="BEGIN:STANDARD\n";
    $msg_email.="TZOFFSETFROM:+1000\n";
    $msg_email.="TZOFFSETTO:+1000\n";
    $msg_email.="TZNAME:EST\n";
    $msg_email.="DTSTART:19700329T020000\n";
    $msg_email.="RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU\n";
    $msg_email.="END:STANDARD\n";
    $msg_email.="END:VTIMEZONE\n";      

    $msg_email.="BEGIN:VEVENT\n";
    $msg_email.="UID:".date('Ymd').'T'.date('His')."-".rand()."-".$b_id."\n"; 
    $msg_email.="DTSTAMP:".date('Ymd').'T'.date('His')."\n"; // required by Outlook
    //$msg_email.="DTSTART:".date('Ymd', $starttime).'T'.date('His', $starttime)."\n";
    $msg_email.="DTSTART1:".date("Ymd", $starttime)."T".date("His", $starttime)."\n";
    $msg_email.="DTEND1:".date('Ymd', $endtime).'T'.date('His', $endtime)."\n";
    $msg_email.="SUMMARY:".$mrbs_company." Booking\n";
    $msg_email.="END:VEVENT\n";
    $msg_email.="END:VCALENDAR\n";

    $msg_email = str_replace("DTSTART1","DTSTART;TZID=\"$timezone\"",$msg_email);
    $msg_email = str_replace("DTEND1","DTEND;TZID=\"$timezone\"",$msg_email);
            $ics_msg="--MIME_BOUNDRY\n";
    $ics_msg.="Content-Type: text/Calendar; name=".$myFile."\n";
    $ics_msg.="Content-disposition: attachment; filename=".$myFile."\n";
    $ics_msg.="Content-Transfer-Encoding: base64\n";
    $ics_msg.="\n";

    $ics_msg.=$msg_email."\n\n"; 
```

# microsoft-metro - 分组模式下的垂直方向 Metro WinJS ListView

> ID：11394878
> 
> 赞同：2
> 
> 时间：2012-07-09T12:18:36.483
> 
> 标签：microsoft-metro, winjs

我正试图用分组项目实现 ListView，这些项目呈现如下所示的 WP7 LongListSelector。我尝试使用 data-win-control="WinJS.UI.ListView" 向元素添加一个 win-vertical 类，但因为 win-vertical 似乎只适用于不起作用的视口。任何帮助将不胜感激。

![在此处输入图像描述](../Images/271bcff83aea44855210266f813ee413.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T15:31:28.163

您使用的是哪种 ListView 布局？使用`ListLayout`而不是`GridLayout`将滚动方向从水平更改为垂直。但我没有看到为`ListLayout`列表视图添加组标题的简单方法。对于`GridLayout`，有一个`groupHeaderPosition`属性，但`ListLayout`对象没有这个属性。（实际上有人抱怨同样的事情.. 在[本页](http://msdn.microsoft.com/en-us/library/windows/apps/br211837.aspx)末尾）因此，您可能需要通过在数据源中添加一个虚拟的“组名”项并对其进行正确排序来破解组名。

参考：

[http://msdn.microsoft.com/en-us/library/windows/apps/br211837.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br211837.aspx)

[http://msdn.microsoft.com/en-us/library/windows/apps/br211792.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br211792.aspx)

# database - 是否可以用数据库变量替换子浏览器 url？

> ID：11394882
> 
> 赞同：1
> 
> 时间：2012-07-09T12:18:52.920
> 
> 标签：database, xcode, cordova, childbrowser

是否可以用数据库变量替换子浏览器中的 url？数据库变量是数据库中的 url。例如，在下面的代码中 res[i].showlink 是一个数据库变量，它是一个 url。如果我用[http://www.google.com](http://www.google.com)替换数据库变量，子浏览器可以完美运行。我也知道我的数据库调用使用“res [i] .showlink”正确地提取了url。但是，当我输入数据库变量时，子浏览器显示一个空白屏幕并读取为正在加载。我正在使用 Xcode 中的 phonegap。

```
function openGoogle(){ 
var root = this; 
cb = window.plugins.childBrowser;  
cb.showWebPage("res[i].showlink"); 
} 
```

如果我删除 res[i].showlink 周围的引号，那么当我单击链接时不会发生任何事情。如果我重新加上引号，子浏览器就会加载，就好像它可以工作一样，但浏览器保持空白。子浏览器似乎确实能够确定来自数据库的 url 链接是不同的。如果链接是谷歌，则子浏览器将显示一个空白屏幕，加载栏将输出“about:blank”。如果 url 链接指向 pdf 文件，则子浏览器也将为空白，但加载栏实际上会输出“正在加载”。诡异的。

这是当我单击 res[i].showlink 上带有引号的链接时 Xcode 输出控制台显示的内容。

2012-07-09 08:01:25.549 MyAppTest[13067:13403] 视图加载

2012-07-09 08:01:25.551 MyAppTest[13067:13403] 打开网址：res[​​i].showlink

如果引号不在 res[i].showlink 周围，则输出控制台不显示任何内容

任何帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:30:45.330

您需要删除引号。利用：

```
cb.showWebPage(res[i].showlink); 
```

# qt - 如何在 Qt 中使用 QtCopyDialog？

> ID：11394884
> 
> 赞同：1
> 
> 时间：2012-07-09T12:18:57.203
> 
> 标签：qt, dll, dialog, include, copy

> **可能重复：**
> [如何使用 QtCopyDialog？](https://stackoverflow.com/questions/11330371/how-to-use-qtcopydialog)

如何复制库[QtCopyDialog](ftp://ftp.qt.nokia.com/qt/solutions/lgpl/qtcopydialog-2.2_1-opensource.zip)并在我的 qt 项目中使用？我想`#include <QtCopyDialog>`。我已经编译了 dll 并复制到“bin”目录中，`#include <QtCopyDialog>`然后我看到错误消息：QtCopyDialog：没有这样的文件或目录。请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:04:24.900

您不仅需要 .dll 文件，还需要设置 QtCopyDialog 库的 .h 文件的路径。

例如，您可以在项目中创建一个名为“include”的文件夹，将 .h 文件复制到那里并执行

```
INCLUDEPATH += include 
```

在您的 .pro 文件中

# css - margin-left:auto 不能为负数，但 margin-right:auto 可以

> ID：11394887
> 
> 赞同：0
> 
> 时间：2012-07-09T12:19:12.820
> 
> 标签：css, margin

以下情况： http:
[//files.dqxtech.net/leftmargin/](http://files.dqxtech.net/leftmargin/)
[http://jsfiddle.net/xeFN3/](http://jsfiddle.net/xeFN3/)

```
<div class="container">
  <div class="element-left">
  </div>
  <div class="element-right">
  </div>
</div> 
```

和

```
.container {
  width:120px;
}
.element-left {
  width:120px;
  margin-left:12%:
  margin-right:auto;
}
.element-right {
  width:120px;
  margin-right:12%:
  margin-left:auto;
} 
```

问题：
.element-left 应该与 .element-right 对称放置，但事实并非如此。对于 .element-left，“自动”边距的计算结果为负数，而“12%”边距的计算结果正好为 12%。对于 .element-right，“auto”边距计算为零，“12%”边距计算为负值。

知道为什么会发生这种情况，以及如何解决吗？text-align 确实有任何区别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T12:54:01.137

-value`margin`始终`auto`计算为零或正像素数。

> 对于 .element-left，“自动”边距的计算结果为负数

不，`margin-right`评估为零；元素只是溢出它的父元素，这可以由`overflow`属性控制。默认情况下，元素会溢出到右侧和底部。`ltr`可以通过将文本方向设置为从to `rtl`（从右到左）来反转此行为。

我想，你最好使用两个内部`DIV`的相对位置。另一种可能的解决方案是[使用固定的负值而不是`auto`(eg `-12%`)](http://jsfiddle.net/xeFN3/2/)。

# javascript - 对键类型 javascript 求和一个数字

> ID：11394889
> 
> 赞同：0
> 
> 时间：2012-07-09T12:19:24.447
> 
> 标签：javascript, sum

我有一个自动更新总和表格，可以完美运行 3 个输入。但我需要再计算一个输入。我尝试添加一个字段并尝试模仿脚本但没有运气。请帮忙。

```
function formatDollar(num) {
    var p = num.toFixed(2).split(".");
    return "" + p[0].split("").reverse().reduce(function(acc, num, i, orig) {
        return  num + (i && !(i % 3) ? "," : "") + acc;
    }, "");
}
    //auto sum
function calculateDiscount()
{
    var cost = document.getElementById('insr_total1').value.replace(/[^0-9]+/i,"");
        cost = cost.replace(/[^0-9]+/i,"");         
    var discount = document.getElementById('insr_discount').value;
    //do the math
    var net = cost-discount;
    //update
    document.getElementById('insr_discount2').innerHTML = formatDollar(cost*(discount/100));
    document.getElementById('insr_total3').value = formatDollar(cost-cost*(discount/100));
} 
```

这是我使用的html：

```
<table>
<tr>
<td align="left" valign="top">Cost1</td>
<td align="left" valign="top"><input type="text" name="insr_total1" id="insr_total1" size="17" maxlength="15" onKeyup="calculateDiscount(); return false;" /> USD</td>
</tr>
<tr>
<td align="left" valign="top">Discount</td>
<td align="left" valign="top"><input type="text" name="insr_discount" id="insr_discount" size="4" maxlength="3"  onkeyup="calculateDiscount(); return false;" /> % (<span id="insr_discount2" style="color:green; font-size: 13px;"></span> USD)</td>
</tr>
<tr>
<td align="left" valign="top">Cost 2</td>
<td align="left" valign="top"><input type="text" name="insr_total2" id="insr_total2" size="17" maxlength="15"  /> USD</td>
</tr>
<tr>
<td align="left" valign="top">Overall</td>
<td align="left" valign="top"><input type="text" name="insr_total3" id="insr_total3" size="17" readonly maxlength="15"  /> USD</td>
</tr>
</table> 
```

好吧，我需要从 insr_total3 中减去“insr_total2”。无论我尝试过，它总是会出错。感谢所有回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:25:28.070

首先使用[parseFloat将字符串转换为数字，并使用](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseFloat)[isNaN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/isNaN)检查它们是否不是 NaN 。

```
var number1 = parseFloat(value1) * 100
  , number2 = parseFloat(value2) * 100
  , result = (number1 - number2) / 100; 
```

并且要小心 JavaScript 中的小数和计算。最好先将数字乘以 100 或 1000（取决于您需要的精度）。否则你会得到舍入错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:26:24.090

您拥有的值是字符串，您正试图从另一个中减去一个。您需要转换为浮点数：

var discount = parseFloat(document.getElementById('insr_discount').value);

ETC...

# mysql - MySQL 嵌套集合非子关系

> ID：11394891
> 
> 赞同：0
> 
> 时间：2012-07-09T12:19:34.807
> 
> 标签：mysql, sql, nested-sets

我有一组嵌套的组织，看起来像这样（节点是组织 ID）：

![嵌套的集合组织结构图](../Images/830013fdf48f5b53e1827861d1e7921e.png)

1234 是 4499 和 3322 的父级，但 9905 是 1234 的“附属”，而不是真正的父级或子级。

我相信leftedge，rightedge设置应该看起来像：

```
orgID | leftedge | rightedge
1234  |   1      |    6
4499  |   2      |    3
3322  |   4      |    5
9905  |   7      |    8 
```

由于 9905 并不是真正的 1234 的子代，我不确定如何获得 1234 和 9905 之间的关系。我用来获取子代关系的 SQL 是：

```
SELECT ost.orgid, ost.leftedge, ost.rightedge
  FROM tbl_organisationsettree ost 
  JOIN tbl_organisationsettree AS child_ost ON child_ost.leftedge BETWEEN ost.leftedge AND ost.rightedge 
   AND child_ost.supersetid = ost.supersetid 
 WHERE 1 
   AND ost.leftedge > 1 
   AND ost.rightedge <6 
GROUP BY child_ost.ID 
HAVING COUNT(child_ost.ID) = 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:15:50.850

查找不是 node 的后代或祖先的任何节点`1234`：

```
SELECT ost.*     --- whatever from `org` table
FROM tbl_organisationsettree AS ost 
   JOIN tbl_organisationsettree AS param
      ON  param.leftedge NOT BETWEEN ost.leftedge 
                                 AND ost.rightedge
      AND ost.leftedge NOT BETWEEN param.leftedge 
                               AND param.rightedge
WHERE param.orgID = 1234 

--- if you only root nodes:
---
--- AND NOT EXISTS 
---     ( SELECT *
---       FROM tbl_organisationsettree AS parent
---       WHERE ost.leftedge > parent.leftedge 
---         AND ost.leftedge < parent.rightedge
---     )
; 
```

# jquery - 使用 jQuery 验证电话号码

> ID：11394894
> 
> 赞同：1
> 
> 时间：2012-07-09T12:19:43.213
> 
> 标签：jquery, forms, validation

我已经使用 jQuery 为 HTML 表单设置了验证，我正在寻找有关电话号码验证的一些帮助，我一直在网上搜索，这就是我想出的，但它仍然无法正常工作！我有电子邮件和姓名输入验证，但无法弄清楚如何正确实施电话号码验证，因为它在我提交时仍然接受信件？我需要输入最多只能接受 15 个数字，并且在必要时还接受 + 号？

我使用的正则表达式是： /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+.[a-zA-Z]{2,4}$/ 和我知道这是不正确的，但我什至不能让它工作？

非常感谢任何有关如何解决此问题的意见！

```
$('#submit_second').click(function(){
    //remove classes
    $('#second_step input').removeClass('error').removeClass('valid');

    var emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;
var phonePattern = /^[0-9]{3}\-[0-9]{7}$/ ;  
    var fields = $('#second_step input[type=text]');
    var error = 0;
    fields.each(function(){
        var value = $(this).val();
        if( value.length<1 || value==field_values[$(this).attr('id')] || ( $(this).attr('id')=='email' && !emailPattern.test(value) )  ) {
            $(this).addClass('error');
            $(this).effect("shake", { times:3 }, 50);

            error++;
        } else {
            $(this).addClass('valid');
        }
    if( value.length<1 || value==field_values[$(this).attr('id')] || ( $(this).attr('id')=='phone' && !phonePattern.test(value) )  ) {
            $(this).addClass('error');
            $(this).effect("shake", { times:3 }, 50);

            error++;
        } else {
            $(this).addClass('valid');
        }

 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:23:33.230

这应该这样做：

```
/^\+?[0-9]{0,15}$/ 
```

这最多匹配 15 个数字，可选前缀`+`

# html - HTML/CSS 基本布局问题

> ID：11394898
> 
> 赞同：0
> 
> 时间：2012-07-09T12:19:56.193
> 
> 标签：html, css, layout

我正在设计一个完全适合浏览器窗口的网页，因此隐藏了滚动。

我在页面顶部有一个标题栏，宽度为 100%，高度为 40px。在标题栏下方，我在页面左侧有一个宽度为 15% 的导航栏，在页面右侧有一个宽度为 85% 的内容区域 DIV。

我无法让导航栏和内容区域的高度动态延伸到页面底部，不再进一步。使导航栏和内容区域在所有屏幕尺寸下都延伸到页面底部的最佳方法是什么？

作为参考，我的**HTML**代码如下所示：

```
<div id="headerBar">Header Bar</div>
<div id="navigationBar">Navigation Bar</div>
<div id="contentArea">Content Area</div> 
```

我的**CSS**代码如下所示：

```
#headerBar{
    width:100%;
    height:40px;
    background:rgb(35,35,35);
}

#navigationBar {
    width:15%;
    height:100%; /* Note that this doesn't work */
    background:red;
}

#contentArea {
    width:85%; /* if I use any padding or margin this box exceeds the browser width */
    background:blue;
    height:100%;  /* as with #navigationBar, this doesn't work */
    float:right;
} 
```

+1 任何解决方案！提前致谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:25:35.363

这是小提琴：http: [//jsfiddle.net/surendraVsingh/cFkaU/](http://jsfiddle.net/surendraVsingh/cFkaU/)

**CSS**

```
html, body { height:100%; }
#headerBar{
    width:100%;
    height:40px;
    background:rgb(35,35,35);
}

#navigationBar {
    width:15%;
    height:100%; /* Note that this doesn't work */
    background:red;
    float:left;
}

#contentArea {
    width:85%; /* if I use any padding or margin this box exceeds the browser width */
    background:blue;
    height:100%;  /* as with #navigationBar, this doesn't work */
    float:right;
}​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T12:33:27.300

如果你真的，真的想要这样的布局，你可以这样做`position:fixed;`：

```
#headerBar {
    background:rgb(35,35,35);
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: 40px;
}
#navigationBar {
    background:red;
    position: fixed;
    top: 40px;
    left: 0;
    bottom: 0;
    width: 15%;
}
#contentArea {
    background: blue;
    position: fixed;
    top: 40px;
    right: 0;
    bottom: 0;
    width: 85%;
} 
```

但是，我不推荐它。它会导致小屏幕等严重问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T12:27:15.637

试试这个：

```
#contentArea {
    height:auto !important; 
    height:85%; 
    min-height:85%;
} 
```

# ruby - 在`method_missing'：未知属性或方法：`document'（NoMethodError）

> ID：11394905
> 
> 赞同：1
> 
> 时间：2012-07-09T12:20:18.460
> 
> 标签：ruby, watir

有人可以解释以下错误的含义吗？

```
E:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.0.0/lib/watir-classic/ie-class.rb:488:in `method_missing': unknown property or method: `document' (NoMethodError)
HRESULT error code:0x80010108
  The object invoked has disconnected from its clients.
from E:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.0.0/lib/watir-classic/ie-class.rb:488:in `document'
from E:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.0.0/lib/watir-classic/page-container.rb:31:in `page'
from E:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.0.0/lib/watir-classic/page-container.rb:55:in `html'
from E:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.0.0/lib/watir-classic/xpath_locator.rb:7:in `xmlparser_document_object'
from E:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.0.0/lib/watir-classic/xpath_locator.rb:30:in `elements_by_xpath'
from E:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.0.0/lib/watir-classic/locator.rb:111:in `locate_elements_by_xpath_css_ole'
from E:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.0.0/lib/watir-classic/locator.rb:209:in `locate'
from E:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.0.0/lib/watir-classic/input_elements.rb:5:in `locate'
from E:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.0.0/lib/watir-classic/element.rb:63:in `assert_exists'
from E:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.0.0/lib/watir-classic/element.rb:414:in `perform_action'
from E:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.0.0/lib/watir-classic/element.rb:269:in `click!'
from E:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.0.0/lib/watir-classic/element.rb:211:in `click' 
```

我使用一些代码，我需要在其中进行以下检查 - 如果找到需要的标题 - 将它们附加到窗口，如果没有 - 通过其 url 附加窗口。

```
class Title
  def initialize(title)
    @@a = title
    $ie=Watir::IE.attach(:title, @@a) 
    rescue Watir::Exception::NoMatchingWindowFoundException
    puts ("could not find browser")
    r.addtoReport(testReport, "check page element", "FAILED", "Page title not found")
  end
end

if Title.new("Company")
else 
  $ie=Watir::IE.attach(:title,"http://")
end 
```

另一个变体是：

```
class Title
  def initialize(title,title1)
    @@a = title
    @@b=title1
    $ie=Watir::IE.attach(:title, @@a)  
    rescue Watir::Exception::NoMatchingWindowFoundException
    puts ("could not find browser")
    r.addtoReport(testReport, "check page element", "FAILED", "Page title not found")
    else
    $ie=Watir::IE.attach(:url, @@b)  
  end
end

Title.new("Company","http://") 
```

附加窗口之前：

```
$ie.button(:xpath, "//input[contains(@onclick, \"path\")]").click 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:04:09.410

很抱歉恢复旧帖子，但此信息必须在某个地方。RE：这意味着 watir 没有创建 URL 内容。如果您指向 localhost，请尝试以管理员身份运行测试。

# iphone - 通过代理连接/隧道，所以您似乎是从另一个国家（iOS）连接？

> ID：11394914
> 
> 赞同：0
> 
> 时间：2012-07-09T12:21:03.567
> 
> 标签：iphone, objective-c, ios, xcode

我有兴趣尝试从我的应用程序内部连接到英国某处的代理，以便我可以收听那里被英国屏蔽的广播流。

在技​​术上实现这一点需要什么？这甚至可以通过 iOS 中可用的 API 实现吗？

非常感谢，-代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:27:28.003

我认为你需要为这种事情使用VPN。我自己（当然）从来没有这样做过，但理论上你可以使用 OpenVPN。我不知道这有多有用[，](http://wiki.hidemyass.com/OpenVPN_setup_on_iPad_iPhone_iTouch)[这里](http://www.softwaretochangeipaddress.com/software-to-change-ip-address-on-iphone-and-ipad/)有一篇文章来解释我为什么这么说。你需要越狱你的手机。

# java - jtable 自定义模型

> ID：11394916
> 
> 赞同：3
> 
> 时间：2012-07-09T12:21:07.410
> 
> 标签：java, swing, jtable, tablemodel

我正在与 jTable 的实现作斗争。我创建了自己的 TableModel 类。还有问题。不知何故，我的 tableData 数组（Obejct [] 的 ArrayList）没有被正确写入。最后，我得到一个表，其中所有行都有值。

有谁知道为什么 ArrayList 没有正确写入？

```
class MyTableModel extends AbstractTableModel {
    private String[] columnNames = {"Auftragsnummer",
                                    "Kunde",
                                    "Kunden Nr.",
                                    "Erfasst",
                                    "Kommt",
                                    "Geht",
                                    "Kommentar"};

    String[] temp_delete = new String[10];
    int index_delete = 0;

    private ArrayList<Object[]> tableData = new ArrayList<Object[]>();

    public int getColumnCount() {
        return columnNames.length;
    }

    public int getRowCount() {
        return tableData.size();
    }

    public String getColumnName(int col) {
        return columnNames[col];
    }

    public Object getValueAt(int row, int col) {
        Object [] temp = tableData.get(row);

        return temp[col];
    }

    public void removeAllEntry(){
        for (int i = 0; i < tableData.size(); i++) {
            tableData.remove(i);
        }
        model.fireTableDataChanged();
    }

     public Class getColumnClass(int c) {
        return getValueAt(0, c).getClass();
    }

    public boolean isCellEditable(int row, int col) {

        switch (col){
            case 4:
                return true;
            default: return false;
        }
    }

     public void addText(Object[] object) {
        tableData.add(object);

       fireTableDataChanged();
      } 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T17:08:32.943

的父实现`setValueAt()`什么也不做。您需要实施`setValueAt()`以更新您的内部数据结构，`tableData`并触发适当的`TableModelEvent`，这将更新您的视图。

```
 @Override
    public void setValueAt(Object aValue, int row, int col) {
        ... // update tableData
        this.fireTableCellUpdated(row, col); // notify the view
    } 
```

顺便说一句，考虑`List<List<Object>>`代替`ArrayList<Object[]>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T13:13:45.573

感谢trashgod，我想通了（见他的帖子）。这里的工作代码：

```
class MyTableModel extends AbstractTableModel {
    private String[] columnNames = {"Auftragsnummer",
                                    "Kunde",
                                    "Kunden Nr.",
                                    "Erfasst",
                                    "Kommt",
                                    "Geht",
                                    "Kommentar",
                                    "Abteilung"};

    String[] temp_delete = new String[10];
    int index_delete = 0;

   private ArrayList<ArrayList<Object>> tableData = new ArrayList<ArrayList<Object>>();

    public int getColumnCount() {
        return columnNames.length;
    }

    public int getRowCount() {
        return tableData.size();

    }

    public String getColumnName(int col) {
        return columnNames[col];
    }

    public Object getValueAt(int row, int col) {

        if(tableData.size()> 0){
            return tableData.get(row).get(col);
        }

         return null;
    }

    public void removeAllEntry(){

            tableData.clear();
        model.fireTableDataChanged();
    }

    /*
     * JTable uses this method to determine the default renderer/
     * editor for each cell.  If we didn't implement this method,
     * then the last column would contain text ("true"/"false"),
     * rather than a check box.
     */
    public Class getColumnClass(int c) {
        if(tableData.size()> 0){
            return getValueAt(0, c).getClass();
        }

        return String.class;
    }

    /*
     * Don't need to implement this method unless your table's
     * editable.
     */
    public boolean isCellEditable(int row, int col) {
        //Note that the data/cell address is constant,
        //no matter where the cell appears onscreen.

        switch (col){
            case 4:
                return true;
            default: return false;
        }
    }

    /*
     * Don't need to implement this method unless your table's
     * data can change.
     */
    public void setValueAt(Object value, int row, int col) {

        if(tableData.size() <= row){

            ArrayList<Object> arrayList = new ArrayList<Object>();

            for(int i = 0; i < columnNames.length;i++){
                arrayList.add("");
            }

            tableData.add(arrayList);
        }

        ArrayList<Object> object = tableData.get(row);

        object.add(col, value);

        tableData.set(row, object);

        fireTableDataChanged();

    } 
```

}

# c++ - 动态对象的统一初始化

> ID：11394924
> 
> 赞同：3
> 
> 时间：2012-07-09T12:21:52.900
> 
> 标签：c++, c++11, initialization, unique-ptr, uniform-initialization

```
#include <memory>

struct foo
{
    std::unique_ptr<int> p;
};

int main()
{
    foo bar { std::unique_ptr<int>(new int(42)) };
    // okay

    new foo { std::unique_ptr<int>(new int(42)) };
    // error: no matching function for call to
    // 'foo::foo(<brace-enclosed initializer list>)'
} 
```

统一初始化是否不适用于动态对象，或者这是 g++ 4.6.1 的缺点？

* * *

它适用于 g++ 4.7.1，但如果从另一个类继承，则**这两行都**`main`无法编译：`foo`

```
struct baz
{
    // no data members, just some member functions
};

struct foo : baz
{
    std::unique_ptr<int> p;
}; 
```

再次，我的编译器的缺点？或者统一初始化不能很好地与继承一起使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T12:23:44.103

它使用 g++-4.7 构建良好。所以大概是后者。我会看看是否可以通过文档找到更有力的证据。

**并响应继承附录：**

这个更简单的情况也无法编译：

```
struct baz
{
};

struct foo : baz
{
    int b;
};

int main()
{
    foo bar { 12 };
} 
```

和：

```
testoo.cpp:14:18: error: no matching function for call to ‘foo::foo(<brace-enclosed initializer list>)’
testoo.cpp:14:18: note: candidates are:
testoo.cpp:7:8: note: foo::foo()
testoo.cpp:7:8: note:   candidate expects 0 arguments, 1 provided
testoo.cpp:7:8: note: constexpr foo::foo(const foo&)
testoo.cpp:7:8: note:   no known conversion for argument 1 from ‘int’ to ‘const foo&’
testoo.cpp:7:8: note: constexpr foo::foo(foo&&)
testoo.cpp:7:8: note:   no known conversion for argument 1 from ‘int’ to ‘foo&&’ 
```

根据我对标准的阅读，您`aggregate initialization`在第一个示例中得到了：

> 聚合是一个数组或类（第 9 条），没有用户提供的构造函数（12.1），没有用于非静态数据成员的大括号或等号初始化程序（9.2），没有私有或受保护的非静态数据成员（第 11 条），没有基类（第 10 条），也没有虚函数（10.3）。
> 
> 当聚合由初始化列表初始化时，如 8.5.4 中所指定，初始化列表的元素被视为聚合成员的初始化，按递增的下标或成员顺序。

请注意，这明确禁止基类。总而言之 - 在存在基类的情况下不允许聚合初始化。因此，第二个示例都不会编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T13:30:53.363

> **如果从另一个类继承，则**两行都**`main`无法编译`foo`**

 **啊，统一初始化对于聚合和非聚合的工作方式不同：

> 类型 T 的对象或引用的列表初始化定义如下：
> 
> *   如果 T 是聚合，则执行聚合初始化
> *   [...]
> *   否则，如果 T 是类类型，则考虑构造函数
> 
> 聚合是 [..] 一个没有基类 [...] 也没有虚函数的类 [...]。

所以我仍然需要编写自定义构造函数，因为我需要这里的子类型多态性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T13:10:41.100

我目前没有最终版本，但草案 N3242`§ 8.5.4 List-initialization`明确指出列表初始化可以用作新表达式中的初始化程序。它还提供了以下示例：

```
new std::vector<std::string>{"once", "upon", "a", "time"}; // 4 string elements 
```**

# sql - 如何在 sql 查询中转换/转换列

> ID：11394929
> 
> 赞同：1
> 
> 时间：2012-07-09T12:22:15.467
> 
> 标签：sql, sql-server, tsql

有人可以帮忙吗？我遇到了这个 sql 查询的问题。我需要将 price1_split 转换为 int。但它似乎也得到了我在它旁边所做的连接。

```
SELECT product_number,product_name,description,
price1+ ' ' + CONVERT(INT, price1_split) + '% |' + 
price2+ ' ' + CONVERT(INT, price2_split) + '% |' + 
price3+ ' ' + CONVERT(INT, price3_split) + '%'  as price_split
from tbl_products 
```

错误消息说：转换 varchar 值 '% |' 时转换失败 为数据类型 int。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T12:26:57.253

由于您最终需要一个由 分隔的字符串值`% |`，因此您根本不应该将它们转换为整数。如果要将值加在一起，则需要将它们强制转换为 INT，但不是添加它们，而是将它们连接到字符串上。假设它们已经是字符串 ( `CHAR, VARCHAR`) 值，只需将它们连接到其他字符元素上。

```
SELECT product_number,product_name,description,
  price1+ ' ' + price1_split + '% |' + 
  price2+ ' ' + price2_split + '% |' + 
  price3+ ' ' + price3_split + '%'  as price_split
from tbl_products 
```

但是，如果它们是您尝试截断为整数的浮点值，则可以将`CONVERT()`它们截断为`INT`然后将`CONVERT()`它们返回到字符串以进行连接。`FLOOR()`在这种情况下，使用截断 可能会更好，如`CONVERT(VARCHAR(n), FLOOR(price1_split))`

```
-- Using CONVERT(INT) for truncation
SELECT product_number,product_name,description,
  price1+ ' ' + CONVERT(VARCHAR(32), CONVERT(INT, price1_split)) + '% |' + 
  price2+ ' ' + CONVERT(VARCHAR(32), CONVERT(INT, price2_split)) + '% |' + 
  price3+ ' ' + CONVERT(VARCHAR(32), CONVERT(INT, price3_split)) + '%'  as price_split
from tbl_products 
```

# iphone - 我正在尝试将 xml 数据发布到服务器端 php 文件

> ID：11394933
> 
> 赞同：0
> 
> 时间：2012-07-09T12:22:40.337
> 
> 标签：iphone, objective-c, ipad

我已经尝试了很多方法，但我仍然在服务器端得到一个空数组。

这是我的代码：

```
NSString *urlString = [[NSString alloc] initWithFormat:@"%@/test.php", APP_WEBSITE_URL];    
NSURL *requestURL = [NSURL URLWithString:urlString]; 
NSMutableURLRequest *requestObj = [NSMutableURLRequest requestWithURL:requestURL cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];

[requestObj setHTTPMethod:@"POST"];             
[requestObj setValue:@"application/xml" forHTTPHeaderField:@"Content-Type"];

NSInteger tmpCount = [strawPollDetailItem.selectionsArray count];

NSMutableData *postBody = [NSMutableData data];

[postBody appendData:[[NSString stringWithFormat:@"<SUBMITTED>"] dataUsingEncoding:NSUTF8StringEncoding]];
for (int i=0; i<tmpCount; i++) {

    NSInteger selectedID = [strawPollDetailItem.selectionsArray objectAtIndex:i];

    [postBody appendData:[[NSString stringWithFormat:@"<OPTIONID>%@</OPTIONID>", selectedID] dataUsingEncoding:NSUTF8StringEncoding]];
}

[postBody appendData:[[NSString stringWithFormat:@"</SUBMITTED>"] dataUsingEncoding:NSUTF8StringEncoding]];
[requestObj setHTTPBody:postBody];
[[NSURLConnection alloc] initWithRequest:requestObj delegate:self]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:41:57.637

```
 NSURL * serviceUrl = [NSURL URLWithString:@"weblink"];
    NSMutableURLRequest * serviceRequest = [NSMutableURLRequest requestWithURL:serviceUrl];
    [serviceRequest setValue:@"text/xml" forHTTPHeaderField:@"Content-type"];
    //[serviceRequest setValue:txtTitle.text forHTTPHeaderField:@"title"];
    [serviceRequest setHTTPMethod:@"POST"];
    [serviceRequest setHTTPBody:[xmlString dataUsingEncoding:NSASCIIStringEncoding]];
    [serviceRequest setValue:[NSString stringWithFormat:@"%d",[xmlString length]] forHTTPHeaderField:@"Content-Length"];
    NSURLResponse * serviceResponse;
    NSError * serviceError;

    NSData *responseData = [NSURLConnection sendSynchronousRequest:serviceRequest returningResponse:&serviceResponse error:&serviceError];
    NSString *responseString = [[[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding] autorelease]; 
```

# objective-c - UIView 在横向时有纵向尺寸吗？

> ID：11394934
> 
> 赞同：5
> 
> 时间：2012-07-09T12:22:42.703
> 
> 标签：objective-c, ios, cocoa, ipad

我有一个 1 的故事板，其中 1`UIViewController`包含`UIView`许多嵌套`UIView`的 s。我将视图控制器子类化以实现此方法：

```
- (BOOL)shouldAutorotateToInterfaceOrientation: UIInterfaceOrientation)interfaceOrientation {
    return (interfaceOrientation == UIInterfaceOrientationLandscapeRight || interfaceOrientation == UIInterfaceOrientationLandscapeLeft);
} 
```

我还添加了

```
<key>UISupportedInterfaceOrientations</key>
    <array>
     <string>UIInterfaceOrientationLandscapeLeft</string>
     <string>UIInterfaceOrientationLandscapeRight</string>
    </array>
<key>UIInterfaceOrientation</key>
<string>UIInterfaceOrientationLandscapeLeft</string> 
```

到`Info.plist`.

在主 UIView 的 viewDidLoad 中，我正在这样做：

```
PASectionView* sectionView = [[PASectionView alloc] initWithFrame:CGRectMake(0, 0, self.frame.size.width, 180)];
[self addSubview:sectionView]; 
```

问题是控件只有 756px 宽，而不是预期的 1024。有关详细信息，请参阅下面的屏幕截图。![在此处输入图像描述](../Images/041d22d72c65f8281941b0ac7c79a7c2.png)我一直在网上搜索，但在任何地方都找不到解决这个令人沮丧的问题的方法。我正在使用 Xcode 4.5 并将 iOS5.1 设置为基本 SDK。

**编辑** 它通过用边界替换框架来工作。但是我不明白发生了什么，所以它不适用于帧大小。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-09T12:37:30.337

> 框架矩形，描述视图**在其父视图坐标系中**的位置和大小。
> 
> @property(nonatomic) CGRect 框架

和

> 边界矩形，描述视图**在其自己的坐标系中**的位置和大小。
> 
> @property(nonatomic) CGRect 边界

使用边界，而不是框架。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T12:36:45.303

将 设置为`autoresizingMask`您想要在旋转时自动调整大小的任何视图。像这样：

```
[myView setAutoresizingMask:UIViewAutoresizingMaskFlexibleWidth | UIViewAutoresizingMaskFlexibleRightMargin]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T12:37:00.340

问题是因为在加载到横向模式之前，您的代码行正在调用方法加载，`[PASectionView alloc] initWithFrame:CGRectMake(0, 0, self.frame.size.width, 180)]; [self addSubview:sectionView];`如果它是视图控制器类，那么您应该在哪个方法中调用它，那么它应该是`[PASectionView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, 180)]; [self addSubview:sectionView];`，如果它是子类，`UIView`那么您从哪里获得该`ViewDidLoad`方法。现在在`.h`课堂上解决你的问题：写这个 PASectionView* sectionView; 在`.m`类中实现此方法

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration{
    if (toInterfaceOrientation == UIInterfaceOrientationPortrait)
{

}
else  // OrientationLandscape
{
sectionView.frame = CGRect(sectionView.frame.origin.x,sectionView.frame.origin.y,self.view.frame.size.width,180);    
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T12:39:31.037

您必须为您的子视图设置自动调整大小掩码，

如果你的 subView 是通过代码添加的，那么在添加 subView 到 superview 之前添加这行代码。yourSubView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;

否则，如果您的 subView 添加到 nib 文件中，请在 nib 文件的 subView 的属性中选择边框磁铁和调整掩码大小。

# ruby-on-rails - 当前页面和子页面的导航指示器

> ID：11394936
> 
> 赞同：0
> 
> 时间：2012-07-09T12:22:51.690
> 
> 标签：ruby-on-rails, ruby-on-rails-3, navigation

我已经看到回答了类似的问题，但我无法准确找到我的问题，我无法弄清楚如何改变其他问题以使其适合。

我正在编写一个简单的 rails 3 应用程序，它有 2 个主要部分。一个叫Students，一个叫iConnects，每个都有多个页面。我有一个简单的导航栏，允许通过单击时导航到这些部分中的任何一个的第一条记录来导航。此单击还设置了一个在 CSS 中设置了颜色的类，以指示您所在的部分。但是，这仅在您单击该链接一次时才有效。如果您导航到任何子页面，例如students/2，则该类显然不存在，并且没有视觉指示。

我的问题是如何将持久类添加到导航中以指示用户是在学生还是 iConnects 上？

我的共享中有一个单独的部分，我正在使用此代码提取..

```
<div id="section_navigation">
    <%= link_to 'iConnect', @iconnects.first, :class => current_page?(@iconnects.first) ? "current" : "" %>
    <%= link_to 'Students', @pages.first, :class => current_page?(@pages.first) ? "current" : "" %>
</div> 
```

来自我的学生 show.html.erb

```
<%= render :partial => 'shared/navigation' %> 
```

我对 Rails 还很陌生，所以我自己想不出怎么做，我抵制用 Javascript 方式做这件事的冲动，因为我知道后端输出是正确的方法。

任何提示或提示都非常受欢迎。感谢您的时间...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:15:42.990

[使用简单导航之](https://github.com/andi/simple-navigation)类的东西

# mysql - 在 MySQL 中作为特定用户进行身份验证

> ID：11394940
> 
> 赞同：3
> 
> 时间：2012-07-09T12:23:11.280
> 
> 标签：mysql, database

我是 MySQL DB 的全新用户，已经安装了 WAMPSERVER，我正在通过 MySQL 控制台使用 MySQL。

Query_1：每次我登录时，它都直接要求我输入root密码。但是，我想以其他用户身份登录。

Query_2：如果我确实以 root 身份登录，我想在不关闭控制台的情况下切换用户。

我怎样才能做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T12:26:32.657

您可以像这样指定您的用户名和密码：

```
shell> mysql --user=user_name --password=your_password db_name 
```

据我所知，如果不重新启动客户端，就无法在登录后更改用户。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T12:27:00.427

我认为在控制台本身中切换用户是不可能的。您必须使用不同的用户登录。

使用此命令登录

```
mysql -u username -p 
```

然后它会提示输入密码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-12T23:43:23.757

无法使用 WAMP 在 MySQL 控制台中切换用户。您必须通过 windows 命令行使用 SQL 来切换用户。

步骤（赢8）：

1) 开始

2）类型：'命令提示符'

3）类型：'cd /'

4）导航到WAMP bin所在的位置，我的位置是： C:\wamp\bin\mysql\mysql5.6.17\bin 键入：'CD wamp\bin\mysql\mysql5.6.17\bin'

5) 在新用户下输入'mysql -u (你要使用的用户名) -p (你要连接的数据库)' 在新用户下运行SQL

您现在将以新用户身份登录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T12:30:42.003

如果您尝试在没有指定用户名的情况下登录，MySQL 将假定为“root”。在大多数情况下，您不会切换用户，而是为单个用户提供所有必需的权限；例如访问多个数据库。如果您无法做到这一点，您可以同时使用两个 MySQL 连接与两个不同的用户。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-26T10:01:58.020

wampserver 管理面板中提供的 MySQL 控制台，一旦设置了密码，将提示您输入 root 用户的密码，然后您才能执行任何操作。为了以其他用户身份登录，您需要从命令行登录。但是，为了做到这一点，您需要将安装 MySQL 的 bin 文件夹的文件路径添加到您的用户环境路径，以便您的系统能够从命令行访问 MySQL。要在 Windows 打开文件资源管理器中执行此操作，请单击 C 盘，打开 wamp 文件夹，打开 bin 文件夹，打开 MySQL 文件夹，使用您的安装版本打开 MySQL 文件夹，打开您在那里找到的 bin 文件夹。在文件资源管理器的文件路径栏中单击左侧的文件夹图标生成此bin文件夹的路径，复制路径。接下来打开控制面板，在搜索栏中键入字符串环境变量，选择编辑用户环境...你不想弄乱系统环境，在出现的屏幕上选择 PATH 变量 - 如果它不存在然后添加它。最后将文件路径粘贴到 MySQL 的 bin 文件夹中。打开命令提示符并键入 mysql -u uswername -p hit return，然后系统会提示您输入该用户的密码。当然，假设您已经创建了另一个用户。将提示输入该用户的密码。当然，假设您已经创建了另一个用户。将提示输入该用户的密码。当然，假设您已经创建了另一个用户。

据我所知，一旦以 root 或任何其他用户身份登录，切换的唯一方法是退出 mysql，然后以其他用户身份再次进入。

# javascript - 如何在three.js中旋转粒子

> ID：11394941
> 
> 赞同：4
> 
> 时间：2012-07-09T12:23:11.293
> 
> 标签：javascript, three.js

我有一个粒子，它是一个图像。当我旋转粒子时，它会在后面留下一个圆圈。我如何摆脱这个奇怪的圈子？

小提琴在这里：http: [//jsfiddle.net/zUvsp/137/](http://jsfiddle.net/zUvsp/137/)

代码：

```
var camera, scene, renderer, material, img, texture, particle;
init();
animate();

function init() {
  scene = new THREE.Scene();
  camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 1, 10000);
  camera.position.z = 1000;
  scene.add(camera);

  img = new Image();
  texture = new THREE.Texture(img);

  img.onload = function() {
    texture.needsUpdate = true;
    makeParticle();
  };
  img.src = "http://www.atalasoft.com/cs/blogs/davidcilley/files/PNG_Mask.png";

  renderer = new THREE.CanvasRenderer();
  renderer.setSize(window.innerWidth, window.innerHeight);
  document.body.appendChild(renderer.domElement);
}

function makeParticle() {
  material = new THREE.ParticleBasicMaterial({
    map: texture,
    blending: THREE.AdditiveBlending,
  });
  // make the particle
  particle = new THREE.Particle(material);
  particle.scale.x = particle.scale.y = 1;
  particle.position.x = 10;
  scene.add(particle);
}

function animate() {
  requestAnimationFrame(animate);
  renderer.render(scene, camera);
  particle.rotation.z += 0.01
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T22:11:02.903

-编辑我测试了我的理论，这不是问题，不要浪费你的时间

只是一个猜测，但我认为这可能与您从不同的域加载纹理 .png 有关。尝试使用从运行代码的同一域加载的图像，看看是否能解决问题。

我认为这个问题可能与由于 Cross-origin 问题而导致three.js 无法访问纹理上的像素数据有关。

# ruby-on-rails - 从应用程序助手渲染 link_to

> ID：11394944
> 
> 赞同：0
> 
> 时间：2012-07-09T12:23:30.067
> 
> 标签：ruby-on-rails, actionview, actionviewhelper

我试图使用应用程序助手呈现动态导航菜单，但得到的只是一个哈希

当我加载页面时，这就是它显示的全部内容

```
[#<Project id: 15, title: "downer", created_at: "2012-07-03 08:36:16", updated_at: "2012-07-03 08:36:16", company_id: 2>] 
```

这是应用程序助手中使用的代码

```
def project_list(user)
    company ||= user.profile.company
    projects ||= company.projects 
    projects.each do |project|
      link_to project.title, company_project_path(company, project)
      project.scopes.each do |scope|
        link_to scope.name, company_project_scope_path(scope.company, scope.project, scope)
      end
    end
  end 
```

和

_nav.erb.html

```
<%= project_list(current_user) %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:55:10.000

在 ruby​​ 中，方法默认返回最后一个计算的表达式。此外，`each`返回被迭代的数组/哈希。因此，您`project_list`实际上正在返回`projects`视图。您应该更改方法以返回要插入的 html：

```
def project_list(user)
  html = ''
  company ||= user.profile.company
  projects ||= company.projects 
  projects.each do |project|
    html += link_to project.title, company_project_path(company, project)
    project.scopes.each do |scope|
      html+= link_to(scope.name, company_project_scope_path(scope.company, scope.project, scope))
    end
  end
  return html.html_safe
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:50:00.183

您的可枚举#each 正在返回集合中的最后一个对象，该对象成为项目列表方法的返回值。

您需要建立一个标签列表，然后返回该对象。

如果您使用的是 1.9.2，则可以将 each_with_object 与作为 on 对象的字符串或可以在返回之前加入的数组一起使用。

# xcode - 通过phonegap列出

> ID：11394948
> 
> 赞同：0
> 
> 时间：2012-07-09T12:23:45.990
> 
> 标签：xcode, cordova

我正在制作一个应用程序，其中将显示一个列表，其中包含所有联系人，但我想在电话间隙中进行。关于这个的任何想法..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:38:14.507

这是你要找的吗？它在 phonegap 的文档页面上，介绍了如何读取手机联系人数据库。

[Phonegap 联系人](http://docs.phonegap.com/en/1.0.0/phonegap_contacts_contacts.md.html)

希望这可以帮助 ！！

# sql - 使用 Yii STAT 进行分组聚合？

> ID：11394954
> 
> 赞同：3
> 
> 时间：2012-07-09T12:24:06.643
> 
> 标签：sql, activerecord, yii, aggregate-functions

我有一个定义为提供分组结果的[Yii STAT Relation ，](http://www.yiiframework.com/doc/guide/1.1/en/database.arr#statistical-query)*但是当我在 View 中访问关系时*，**唯一的值是最新的单个值而不是每个值**。`SUM`

 ***例如，这是我的关系：

```
'total_salaries_by_job' => array(
    self::STAT, 
    'Employee', 
    'department_id', 
    'select' => 'job_type_id, SUM(salary)', 
    'group'=>"job_type_id"
) 
```

这会生成以下 SQL：

```
SELECT
  department_id AS c
, job_type_id
, SUM(salary) AS s 
FROM Employee AS t
WHERE t.department_id = 1 
GROUP BY 
  department_id
, job_type_id 
```

手动运行，结果集是：

```
c     | job_type_id    | s
------+----------------+---------
1     | 1              | 233000
------+----------------+---------
1     | 2              | 25000
------+----------------+---------
1     | 3              | 179000 
```

但是，在我看来，如果我执行以下操作：

```
<pre>
<?php print_r($department->total_salaries_by_job); ?>
</pre> 
```

结果很简单：`179000`，而我期望它是一个包含 3 个元素的数组。

以 STAT 关系的工作方式仅返回 1 个值，还是我需要做其他事情？
有可能做我正在尝试的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T02:01:12.337

你可以做你想做的事，但你不能使用 STAT 关系来做。相反，使用 Normal HAS_MANY 关系并使用相同的 select 语句。***

# asp.net-mvc - mvc 远程验证

> ID：11394960
> 
> 赞同：2
> 
> 时间：2012-07-09T12:24:34.013
> 
> 标签：asp.net-mvc, entity-framework, validation

如果我尝试使用整数 AdditionalField，我不确定为什么我的验证不起作用。

这是我的代码（省略了部分代码）：

模型

```
 public class PersonViewModelBase
    {
    public int PersonID { get; set; }

    [Required]
    [StringLength(15, MinimumLength = 3)]
    [Remote("Checkusername", "Utilities", AdditionalFields = "PersonID")]
    [RegularExpression(@"(\S)+", ErrorMessage = "White space is not allowed.")]
    public string UserName { get; set; }

    public string Password { get; set; }
    public string LastName { get; set; } 
```

控制器（远程）

```
public JsonResult Checkusername(string username, int PersonID)
    {
        //var user = studentRepository.GetStudents()
        //    .Where(a => a.UserName == username.Trim())
        //    .Where(b => b.PersonID != personID);            
        var user = studentRepository.GetStudents().Where(a => a.UserName == username.Trim());
        if (user.Count() > 0)
        {
            return Json(string.Format("{0} is not available.", username),
                JsonRequestBehavior.AllowGet);
        }
        else
        {
            return Json(true, JsonRequestBehavior.AllowGet);
        }
    } 
```

未调用此远程验证。但是，如果我尝试将附加字段更改为字符串，应用程序将调用远程验证，尽管它会变为“未定义”，因为 PersonID 是一个整数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:17:21.553

AdditionalFields 选项仅向您的操作发送字符串，因此您需要将其作为字符串接受，然后手动将其转换为整数。

```
public JsonResult Checkusername(string username, string PersonID)
{
    int personID = Convert.ToInt32(PersonID);

    var user = studentRepository.GetStudents()
        .Where(a => a.UserName == username.Trim())
        .Where(b => b.PersonID != personID); 

    //var user = studentRepository.GetStudents().Where(a => a.UserName == username.Trim());
    if (user.Count() > 0)
    {
       return Json(string.Format("{0} is not available.", username),
            JsonRequestBehavior.AllowGet);
    }
    else
    {
        return Json(true, JsonRequestBehavior.AllowGet);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T17:35:26.877

不，这不是这样的，我们不能采用模型中的附加字段。解决方案是采用任何其他字段，例如 hidden 而不是在您的情况下分配 value = PersonID 的属性，并在您的控制器中接收此值，例如

看法

```
<input type = "hidden" value = "PersonID " id = hiddenID> 
```

模型

```
 [Remote("Checkusername", "Utilities", AdditionalFields = "hiddenID ")] 
```

控制器

```
public JsonResult Checkusername(string username, string hiddenID )
{
  //your code
} 
```

# css - 浮动跨度增加了 IE 中 div 的宽度

> ID：11394963
> 
> 赞同：0
> 
> 时间：2012-07-09T12:24:46.680
> 
> 标签：css, internet-explorer, html, css-float

希腊，

我在 IE8 中遇到了样式问题。**目标是在不设置宽度**的情况下在一行中有两个 div （div 应该用文本扩展）。它适用于除 IE 之外的所有浏览器。在这里，我在 div 中浮动的 span 元素将每个 div 拉伸到最大宽度，迫使另一个 div 从下一行开始。这是 jsfiddle 演示：

[http://jsfiddle.net/TFnsV/](http://jsfiddle.net/TFnsV/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:17:33.703

我无法让它在 IE7 中使用这个 html 结构，（在 IE8 中它适用于我）。但是您可以像这样更改 HTML：

```
<div>
    <h2><span class="left">Test one two three</span>
        <span class="right">USD</span>
    </h2>
    <p>Test test test</p>
</div> 
```

和CSS：

```
.right{
  width: 20px; 
```

}

。剩下{

```
float:left; 
```

}

看看这个：http: [//jsfiddle.net/Zn8cU/](http://jsfiddle.net/Zn8cU/)

**编辑：**你可以添加这个：

```
h2{
    text-align:right;
} 
```

更新示例：http: [//jsfiddle.net/5bgH2/](http://jsfiddle.net/5bgH2/)

# mono - Mono 上的 ImageResizer

> ID：11394971
> 
> 赞同：1
> 
> 时间：2012-07-09T12:25:36.677
> 
> 标签：mono, imageresizer

在 Linux 的 Mono 上使用 ImageResizer 模块时出现以下错误：

```
Server Error in '/' Application

Argument is out of range. Parameter name: date

Description: HTTP 500\. Error processing request.

Stack Trace:

System.ArgumentOutOfRangeException: Argument is out of range.
Parameter name: date
  at System.Web.HttpCachePolicy.SetLastModified (DateTime date) [0x00046] in /build/src/mono-2.10.8/mcs/class/System.Web/System.Web/HttpCachePolicy.cs:225 
  at ImageResizer.Caching.ResponseHeaders.DefaultApplyToResponseMethod (IResponseHeaders headers, System.Web.HttpContext context) [0x00000] in <filename unknown>:0 
  at ImageResizer.Plugins.Basic.NoCacheHandler.ProcessRequest (System.Web.HttpContext context) [0x00000] in <filename unknown>:0 
  at System.Web.HttpApplication+<Pipeline>c__Iterator6.MoveNext () [0x00dad] in /build/src/mono-2.10.8/mcs/class/System.Web/System.Web/HttpApplication.cs:1368 
  at System.Web.HttpApplication.Tick () [0x00000] in /build/src/mono-2.10.8/mcs/class/System.Web/System.Web/HttpApplication.cs:932 

Version information: Mono Runtime Version: 2.10.8 (tarball Sat Dec 31 02:07:23 UTC 2011); ASP.NET Version: 4.0.30319.1 
```

这是调试表：

```
Image resizer diagnostic sheet      07/09/2012 14:15:41

3 Issues detected:

(Warning):  To potentially see additional errors here, perform an image resize request.

(Warning):  UrlAuthorizationModule.CheckUrlAccessForPrincipal is not supported on this runtime (are you running Mono?)
            It may be possible for users to bypass UrlAuthorization rules you have defined for your website, and access images that would otherwise be protected. If you do not use UrlAuthorization rules, this should not be a concern. You may also re-implement your security rules by handling the Config.Current.Pipeline.AuthorizeImage event.

(Warning):  NoCache is only for development usage, and cannot scale to production use.
            Add DiskCache or CloudFront for production use

You are not using any paid bundles.

Registered plugins:

ImageResizer.Plugins.Basic.DefaultEncoder
ImageResizer.Plugins.Basic.NoCache
ImageResizer.Plugins.Basic.ClientCache
ImageResizer.Plugins.Basic.Diagnostic
ImageResizer.Plugins.Basic.SizeLimiting
ImageResizer.Plugins.MvcRoutingShim.MvcRoutingShimPlugin

Configuration:

<resizer>
<pipeline fakeExtensions=".ashx" />
<plugins>
<add name="MvcRoutingShim" />
</plugins>
</resizer>

Accepted querystring keys:

quality, format, thumbnail, maxwidth, maxheight, width, height, w, h, scale, stretch, crop, cropxunits, cropyunits, page, bgcolor, rotate, flip, sourceFlip, sFlip, sRotate, borderWidth, borderColor, paddingWidth, paddingColor, ignoreicc, frame, useresizingpipeline, cache, process, margin, anchor, dpi, mode, zoom, 

Accepted file extensions:

bmp, gif, exif, png, tif, tiff, tff, jpg, jpeg, jpe, jif, jfif, jfi, 

Environment information:

Running Apache on Unix 2.6.39.2 and CLR 4.0.30319.1
Trust level: Unrestricted
OS bitness: 
Executing assembly: /usr/bin/mono
IntegratedPipeline: False

Loaded assemblies:

System.Runtime.Caching                   Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.Messaging                         Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.Transactions                      Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
Mono.Data.Tds                            Assembly: 4.0.0.0        
Mono.Security                            Assembly: 4.0.0.0        
System.Security                          Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
Mono.CSharp                              Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
App_global.asax_199cffe9                 Assembly: 0.0.0.0        
Microsoft.Web.Infrastructure             Assembly: 1.0.0.0         File: 1.0.20105.407  
dotless.Core                             Assembly: 1.3.0.3         File: 1.3.0.3         Info: 1.3.0.3
System.Web.WebPages.Razor                Assembly: 1.0.0.0         File: 1.0.20105.407  
System.Web.WebPages.Deployment           Assembly: 1.0.0.0         File: 1.0.20105.407  
System.Web.Razor                         Assembly: 1.0.0.0         File: 1.0.20105.407  
ImageResizer                             Assembly: 3.2.3.302       File: 3.2.3.302       Info: 3-2-beta-3  Commit: 245e873
ImageResizer.Mvc                         Assembly: 3.2.3.302       File: 3.2.3.302       Info: 3-2-beta-3  Commit: 245e873
System.Web.WebPages                      Assembly: 1.0.0.0         File: 1.0.20105.407  
System.Web.Mvc                           Assembly: 3.0.0.0         File: 3.0.20105.0    
System.Web.Routing                       Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.Web.Helpers                       Assembly: 1.0.0.0         File: 1.0.20105.407  
System.Web.Abstractions                  Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.Web.ApplicationServices           Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.Data.Linq                         Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.Web.DynamicData                   Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.ComponentModel.DataAnnotations    Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.Xml.Linq                          Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.Data.DataSetExtensions            Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.Web.Extensions                    Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.Core                              Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.ServiceModel.Web                  Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 3.5.594.0
System.ServiceModel                      Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.Xaml                              Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.Runtime.Serialization             Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.IdentityModel                     Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.EnterpriseServices                Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.Drawing                           Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.Web.Services                      Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.Data                              Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
Microsoft.CSharp                         Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
Mono.Posix                               Assembly: 4.0.0.0        
Mono.WebServer2                          Assembly: 0.4.0.0        
mod-mono-server4                         Assembly: 2.10.2.0       
Mono.Web                                 Assembly: 4.0.0.0         Info: 0.0.0.1
System.Xml                               Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System                                   Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.Configuration                     Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.Web                               Assembly: 4.0.0.0         File: 4.0.0.0         Info: 0.0.0.1
mscorlib                                 Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1 
```

知道这里可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T16:00:03.537

这在技术上是 Mono 中的一个错误 - .NET 2.0 和 .NET 4.0 在执行转换之前都将日期转换为通用时间，而 mono 将其与本地服务器时间进行比较，甚至无法规范化这两个变量以确保它们具有匹配时间区。

### 单声道[查看代码](https://github.com/mono/mono/blob/master/mcs/class/System.Web/System.Web/HttpCachePolicy.cs)

```
 public void SetLastModified (DateTime date)
        {

            if (date > DateTime.Now)
                throw new ArgumentOutOfRangeException ("date");

            if (have_last_modified && date < last_modified)
                return;

            have_last_modified = true;
            last_modified = date;
        } 
```

### .NET（V2 和 V4）（使用 ILSpy，在加载了 System.Web 的情况下搜索 HttpCachePolicy）

或者，单击[此链接](https://gist.github.com/3080465)以查看反汇编。

SetLastModified（DateTime 日期）的伪代码：

1.  将日期转换为世界时间。
2.  将日期时间向下舍入到最接近的 10,000,000 个刻度的倍数
3.  验证该值是否小于 DateTime.UtcNow，如果不是，则抛出异常。
4.  如果该值的本地副本之前已设置并且比该值“新”，则不要理会它。
5.  否则，将值的本地副本设置为参数的通用时间版本。

### 调用代码（ImageResizer），/Core/Caching/ResponseHeaders.cs

```
 //Sets the Last-Modifed: header
        //The check against the current time is because  files served from another server may have a modified date in the future, if the clocks are not synchronized.
        //ASP.NET incorrectly blocks an future modified date from being sent, with an ArgumentOutOfRangeException
        DateTime utc = headers.LastModified.ToUniversalTime();

        if (utc != DateTime.MinValue && utc < DateTime.UtcNow) {
            context.Response.Cache.SetLastModified(utc);
        } 
```

找到一个不会破坏某些东西的解决方法并不是很简单。MS SQL 在未指定的时区提供 LastModified 值，而文件系统提供 UTC，但如果它们来自远程服务器，则可以在未来提供。

由于传入的 DateTime 值通常不包含时区标志，因此标准化非常重要。

转换为 UTC、测试、转换回本地、测试、然后分配可能是一种有效的解决方法。

我建议编辑 /Core/Caching/ResponseHeaders.cs，方法 DefaultApplyToResponseMethod 使用以下语句

```
 if (utc != DateTime.MinValue && utc < DateTime.UtcNow && utc.ToLocalTime() < DateTime.Now) {
        context.Response.Cache.SetLastModified(utc.ToLocalTime());
    } 
```

请让我看看您是否注意到逻辑上的缺陷；如果我对你有用并通过了 beta 测试，它可能会集成到未来的版本中。

# sql - 加入日期范围，按 SUM 聚合

> ID：11394975
> 
> 赞同：0
> 
> 时间：2012-07-09T12:26:07.163
> 
> 标签：sql, sqlite, group-by

我需要收集某个类别项目的销售额总和，按选定日期范围（可能是从一周到 12 周）按天分组，并在没有发生交易的天返回 0 而不是 NULL。

我最初的想法是使用一个名为“日历”的预填充表（如下所示），它有大约 10 年的日期，我可以将其加入我的“产品”表，以获得没有销售发生的天数为 0 SUM。

结果太大而无法处理，因此我尝试首先将选定的日期范围复制到一个名为“datetable”的空表中，该表与“日历”具有相同的列名。所以我有3张桌子：

“**日历**”表。它有 10 年的日期，并带有以下列名称：

```
IsoDate       DayNameOfWeek

2012-01-01       Sun
2012-01-02       Mon
2012-01-03       Tue
2012-01-04       Wed
2012-01-05       Thu
2012-01-06       Fri
2012-01-07       Sat
2012-01-08       Sun
2012-01-09       Mon
2012-01-10       Tue
etc for 10yrs 
```

“ **datetable** ” 表（这是创建为空的，有两列从“日历”表中预填充，因此 LEFT JOIN 的日期范围数据更紧​​凑）：

```
IsoDate        DayNameOfWeek 
```

“**产品**”表。这是我为每个 ProductCat 存储销售额的地方：

```
ExpDate     ProductCat  Amount

2012-01-03    28          232
2012-01-04    29          100
2012-01-04    29          1002
2012-01-06    12          12
2012-01-06    29          9
2012-01-07    10          100
2012-01-07    29          122
2012-01-07    29          17 
```

我正在寻找基于单个“ProductCat”编号的输出，在本例中为 29：

```
IsoDate     DayNameOfWeek   AmountSummed

2012-01-01     Sun      0
2012-01-02     Mon      0
2012-01-03     Tue      0
2012-01-04     Wed      1102
2012-01-05     Thu      0
2012-01-06     Fri      9
2012-01-07     Sat      139
2012-01-08     Sun      0
2012-01-09     Mon      0
2012-01-10     Tue      0 
```

我的代码如下。初始插入工作正常，但我不确定使第二部分与 JOIN 和 SUM 一起工作的语法：

```
INSERT INTO datetable (IsoDate, DayNameOfWeek)
SELECT IsoDate, DayNameOfWeek
FROM calendar
WHERE IsoDate 
BETWEEN '2012-07-01' AND '2012-07-10'

SELECT ExpDate, SUM(IFNULL(Amount, 0))
AS AmountSummed
FROM products
WHERE ProductCat = 29
AND ExpDate BETWEEN '2012-07-01' AND '2012-07-10'
LEFT JOIN products 
ON datetable.IsoDate=products.ExpDate
    GROUP BY datetable.IsoDate 
```

**编辑**

这是现在有效的代码：

```
SELECT C.IsoDate,IFNULL(SUM(P.Amount),0) AS AmountSummed
FROM calendar C LEFT OUTER JOIN products P ON C.IsoDate=P.ExpDate
AND P.ProductCat = 29
WHERE C.IsoDate BETWEEN '2012-07-01' AND '2012-07-10'
GROUP BY C.IsoDate, C.DayNameOfWeek
ORDER BY C.IsoDate 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T00:58:50.047

你几乎得到了你需要的东西。但是，您不需要**datetable**。

您的查询应如下所示：

```
SELECT C.IsoDate, C.DayNameOfWeek, IFNULL(SUM(P.Amount),0) AS AmountSummed
FROM calendar C LEFT JOIN products P ON C.IsoDate=P.ExpDate
WHERE C.IsoDate BETWEEN '2012-07-01' AND '2012-07-10'
  AND P.ProductCat = 29
GROUP BY C.IsoDate, C.DayNameOfWeek
ORDER BY C.IsoDate 
```

如果你真的想使用你的`datetable`，只需将它替换为`calendar`并删除`C.IsoDate BETWEEN '2012-07-01' AND '2012-07-10'`（假设`datetable`你开始之前是空的），因为`datetime`已经有了你正在寻找的所有日期。

# symfony - Symfony2 文件夹路由（包含多个正斜杠）

> ID：11394979
> 
> 赞同：0
> 
> 时间：2012-07-09T12:26:18.460
> 
> 标签：symfony

我希望在 Symfony2 中设置一些路由，但我正在努力为文件夹设置动态路由。

我正在尝试设置接受以下内容的路线：/department/sub-department/sub-sub-department/product-url.html

从那条路线上，我只需要产品网址，其余的更多用于搜索引擎优化。我遇到的问题是一个路由在 URL 中可能有很多部门级别，所以我需要忽略 product-url 之前的所有内容。

似乎“/”是这里的问题，所以有没有办法逃避斜线。

如果我不使用路由中的任何部门，我可以使用这个：

```
product:
    pattern:  /{url}.html
    defaults: { _controller: CompanyBundle:System:pageRequest } 
```

所以，我基本上需要这样的东西：

```
product:
    pattern:  /{department}/{url}.html
    defaults: { _controller: CompanyBundle:System:pageRequest } 
```

其中 {department} 可以是一个或多个带有正斜杠的部门。

这有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:30:38.093

[食谱](http://symfony.com/doc/current/cookbook/routing/slash_in_parameter.html)中有一篇很好的文章：

> 您必须通过指定更宽松的正则表达式模式来明确允许 / 成为参数的一部分。

在您的情况下，路线定义必须是

```
product:
    pattern: /{department}/{url}.html
    defaults: { _controller: CompanyBundle:System:pageRequest }
    requirements:
        department: ".+" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T12:42:56.947

```
product:
    pattern: /{url}.html
    defaults: { _controller: CompanyBundle:System:pageRequest, department: ~ }

product_department:
    pattern: /{department}/{url}.html
    defaults: { _controller: CompanyBundle:System:pageRequest }
    requirements:
        department: '[\w\d\/\-]+' 
```

# c++ - 链表程序面临分段错误

> ID：11394985
> 
> 赞同：0
> 
> 时间：2012-07-09T12:26:44.413
> 
> 标签：c++

我正在编写一个 C++ 程序来实现一个链表。在编译时它没有给出任何错误但在输出窗口中它变成空白并且程序以

> list1.exe 遇到问题需要关闭。

调试器响应：程序收到信号 SIGSEGV，分段错误。

也许是因为内存泄漏，但我无法找出确切的错误以及我们如何修复它。请问程序有什么问题，应该修复什么？

下面是代码

```
 //Program to implement linked list

  #include <iostream>
  #include <cstdlib>

  using namespace std;

  class Node
  {
      int data;
      Node * next;

   public:
      Node (){}
      int getdata(){return data ;}
      void setdata(int a){data=a;}
      void setnext(Node* c){next=c;}
      Node* getnext(){return next;}
  };

  class linkedlist
  {
      Node* head;

  public:
      linkedlist(){head=NULL;}
      void print ();
      void push_back(int data);
  };

  void linkedlist::push_back(int data)
  {
      Node* newnode= new Node();
      if(newnode!=NULL)
      {
          newnode->setdata(data);
          newnode->setnext(NULL);
      }
      Node* ptr= head;

      if(ptr==NULL) 
          {head=newnode;}
      while ((ptr->getnext())!=NULL)
      {
          ptr=ptr->getnext();
      }
      ptr->setnext(newnode);
  }

  void linkedlist::print()
  {
      Node* ptr=head;
      if(ptr==NULL)
          {cout<<"null"; return;}

      while(ptr!=NULL)
      {
          cout<<(ptr->getdata())<<" ";
          ptr=ptr->getnext();
      }
  }

  int main()
  {
     linkedlist list;
      list.push_back(30);
      list.push_back(35);
      list.print();
      return 0;
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T12:37:21.887

主要问题在这里：

```
if(ptr==NULL) {head=newnode;}
while ((ptr->getnext())!=NULL)
{
    ptr=ptr->getnext();
}
ptr->setnext(newnode); 
```

`return;`这部分可能意味着有一个`if (ptr == NULL)`；就目前而言，它设置了`head = newnode`，但随后继续尝试访问`ptr->getnext()`，这导致了段错误。

一些答案建议设置`ptr = head = newnode`，但请注意底线是`ptr->setnext(newnode)`- 这会导致`head->getnext() == head`. 无限名单！

为了您的兴趣，这是您的代码：

*   格式不错；
*   清理后不使用`using namespace std;`（参见[C++ 常见问题解答](http://www.parashift.com/c++-faq-lite/using-namespace-std.html)）；
*   利用[const-correctness](http://www.parashift.com/c++-faq-lite/overview-const.html) ;
*   等等

享受！

```
#include <iostream>
#include <stdexcept>

class Node {
    int data;
    Node *next;

public:
    Node(): next(NULL) {}

    int getdata() const {
        return data;
    }

    void setdata(int a) {
        data = a;
    }

    Node *getnext() const {
        return next;
    }

    void setnext(Node *c) {
        next = c;
    }
};

class linkedlist {
    Node* head;

public:
    linkedlist(): head(NULL) {} 

    void print() const {
        Node *ptr = head;

        if (ptr == NULL) {
            std::cout << "null";
            return;
        }

        while (ptr != NULL) {
            std::cout << ptr->getdata() << " ";
            ptr = ptr->getnext();
        }
    }

    void push_back(int data) {
        Node *newnode = new Node();

        if (newnode == NULL) {
            throw std::runtime_error("out of memory!");
        }

        newnode->setdata(data);

        Node *ptr = head;

        if (ptr == NULL) {
            head = newnode;
            return;
        }

        while ((ptr->getnext()) != NULL) {
            ptr = ptr->getnext();
        }

        ptr->setnext(newnode);
    }
};

int main() {
    linkedlist list;
    list.push_back(30);
    list.push_back(35);
    list.print();
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:30:38.110

在以下行中：`while ((ptr->getnext())!=NULL)`ptr 为 NULL

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T12:33:43.697

代码不正确，我已经看到您的`push_back`代码的其他一些可以改进的部分：

```
#include <iostream>
#include<cstdlib>

using namespace std;

class Node
{
      int data;
      Node * next;

   public:
      Node(int d = 0) : data(d), next(NULL) {}

      int getdata() { return data; }
      void setdata(int a) { data = a; }

      void setnext(Node* c) { next = c; }
      Node* getnext() { return next; }
};

class linkedlist
{
      Node* head;

   public:
      linkedlist() : head(NULL) {}
      void print ();
      void push_back(int data);
};

void linkedlist::push_back(int data)
{
   Node* newnode = new Node(data);

   if(head == NULL)
   {
      head = newnode;
   }
   else
   {
      Node* last = head;
      while(last->getnext() != NULL)
         last = last->getnext();
      last->setnext(newnode);
   }
}

void linkedlist::print()
{
   Node* ptr = head;
   if(!ptr)
   {
      cout << "null";
      return;
   }

   while(ptr != NULL)
   {
      cout << ptr->getdata() << " ";
      ptr=ptr->getnext();
   }
}

int main()
{
   linkedlist list;
   list.push_back(30);
   list.push_back(35);
   list.print();
   return 0;
} 
```

还有一些地方需要改进...

# php - 正则表达式：解析行

> ID：11394986
> 
> 赞同：0
> 
> 时间：2012-07-09T12:26:47.360
> 
> 标签：php, regex, parsing, lines

我正在编写一个系统，它可以根据我们在麦当劳收到的日程安排邮件来制定每日日程安排。这是我老板的要求。我在 PHP 中这样做。

我们收到的邮件如下：

> 贝斯特隐藏，
> 
> Hier is je rooster voor de week van 16-7-2012:
> 
> maandag 2012 年 7 月 16 日 17:00 - 23:00，KEU dinsdag 2012 年 7 月 17 日 11:30 - 19:15，COU woensdag 2012 年 7 月 18 日 16:30 - 23:00，KEU
> 
> 总共 ben je 20,25 uur ingeroosterd，3 班次和 0 sluitdiensten。
> 
> vrijvraagverzoeken kun je me bereiken 的 Voor vragen 来自：rooster.1197@nl.mcd.com。
> 
> Ben je verkeerd ingeroosterd en heb je wel goed vrijgevraagd, wil je meer werken? 邮件丹 naar rooster.1197@nl.mcd.com！Ik ga dan kijken wat ik voor je kan doen。
> 
> 让操作！Komende weken moeten er een anantal mensen naar de drive toe！Achter je dienst staat dan DRI。Het is de bedoeling dat iedereen daar af en toe een dienst gaat werken zodat iedereen genoeg uren kan krijgen。Dit betekend dus dat iedereen maximaal 每周 1x 在 de drive wordt geroosterd 中。Jullie dienen op eigen vervoer te gaan。Dit geldt ook voor de nachtdiensten in de drive。Er worden altijd groepjes gestuurd dus spreek 遇到了 elkaar af。
> 
> 格罗滕，
> 
> 隐藏

我想解析出以下几行：

```
maandag 16 juli 2012 17:00 - 23:00, KEU
dinsdag 17 juli 2012 11:30 - 19:15, COU
woensdag 18 juli 2012 16:30 - 23:00, KEU 
```

所以我可以通过它们循环..

我将如何做到这一点，我想通过使用正则表达式，但我不知道如何..

斯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:41:42.883

您可能首先使用更简单的正则表达式提取所有类似的标记：

```
 $day  = "maandag|dinsdag|woensdag|othertag|andtag|sotag|ontag";
    $reg  = "#($day) (\d+) (\w+) (\d+) (\d+):(\d+) - (\d+):(\d+), (\w+)#smi";
    $days = preg_match_all($reg, $text, $items, PREG_SET_ORDER);

    print_r($items); 
```

每个 $item[] 将采用以下形式：

```
 (
        [0] => maandag 16 juli 2012 17:00 - 23:00, KEU
        [1] => maandag
        [2] => 16
        [3] => juli
        [4] => 2012
        [5] => 17
        [6] => 00
        [7] => 23
        [8] => 00
        [9] => KEU
    ) 
```

因此，您将能够根据需要使用各种元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T12:42:24.997

```
<?php 
$str = 'Beste HIDE,

Hier is je rooster voor de week van 16-7-2012:

maandag 16 juli 2012 17:00 - 23:00, KEU
dinsdag 17 juli 2012 11:30 - 19:15, COU
 woensdag 18 juli 2012 16:30 - 23:00, KEU

In totaal ben je 20,25 uur ingeroosterd, 3 shifts and 0 sluitdiensten.

Voor vragen of vrijvraagverzoeken kun je me bereiken via: rooster.1197@nl.mcd.com.

  ....';

$data = explode("\n", $str);
echo $data[4].'<br/>'.$data[5].'<br/>'.$data[6];

?> 
```

试试这个...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T12:44:45.250

尝试`[a-z]*\s[0-9]{1,2}[a-z]*\s[a-z]*\s[0-9]{4}\s[0-9]{2}:[0-9]{2}\s-\s[0-9]{2}:[0-9]{2},\s[a-z]*`

测试：[http](http://regexr.com?31fqr) ://regexr.com? 31fqr :)

# sql - MVC3 模型、EF 和 SQL 关系

> ID：11394996
> 
> 赞同：0
> 
> 时间：2012-07-09T12:27:25.590
> 
> 标签：sql, asp.net-mvc-3, entity-framework, many-to-many

我的`MoveItems`表中有一个名为`MoveItemSubCat`. 到目前为止，我一直在想我会提供一个预先填充`dropdownlist`的`MoveItemSubCat`，用户只需选择它就会进入数据库。

因此，如果用户在 SQL DB 中已经有一个带有 a 的项目`MoveItemSubCat`，我将如何在视图中使其成为选定的值？这是可能的还是我需要`MoveItemSubCats`用我的所有东西制作另一张桌子`SubCategories`？这似乎正在`many-to-many`与 . 的连接表建立关系`MoveItemSubCats_MoveItems`。

这是`many-to-many`正确的方法吗？或者我可以将一个`dropdownlistfor`带有值的值放入 1 个名为的表列中`MoveItemSubCat`吗？

![在此处输入图像描述](../Images/a68780fe2338eacfac6f151ab876bb4e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:47:30.737

如果您打算保持数据库标准化，那么您将需要使用查找表，例如：

```
MoveItemSubCat
-------------------------------
Id     int
Code   nvarchar(100) 
```

如果在原始表中更改`MoveItemSubCat`为`MoveItemSubCatId int,`a 并将其设为 a `FK to the Id column in MoveItemSubCat`，则 EF 将获取实体模型和对象中的关系。

# web-applications - 云托管是简单 Web 应用程序或博客托管的更好选择吗

> ID：11394999
> 
> 赞同：1
> 
> 时间：2012-07-09T12:27:31.360
> 
> 标签：web-applications, cloud, web-hosting

有许多廉价的网络托管服务可用，但许多服务经常出现故障或无法处理巨大的请求。我已经读到云服务总是可用的，你只需为你使用的东西付费，但是云服务对于托管简单的应用程序或博客来说是否昂贵？

或者我会这样提出我的问题......

如果网络开发人员想在线托管他的应用程序，哪种服务最适合普通网络托管；云托管，如 Windows Azure 或 Amazon Web Services？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T12:37:26.690

**博客：**

如果您想托管博客，请查看 blogger.com 或 wordpress.com。两者都是免费的，您不必关心系统管理、扩展和成本。您可以在 blogger.com 中免费使用自定义域名。

**应用程序：**

如果您想在云上运行应用程序，有几个选项：

PaaS（平台即服务）：

1.  谷歌应用引擎
2.  Heroku
3.  发动机场

IaaS（基础设施即服务）：

1.  亚马逊网络服务（EC2、S3、RDS 等）

每个都提供不同的操作系统、语言、定价。您需要根据自己的需要进行选择。如果您不期望太多流量，他们中的大多数都有免费套餐。做决定前先试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:49:21.500

如果您正在寻找选择哪个服务提供商，那么您是正确的，有许多可用选项。

最近，我参加了与 Scott Guthrie 的谈话，他展示了 Azure 的优势。我碰巧有一个朋友坐在我旁边，他正在使用亚马逊的 App Harbor 服务开发他的网站。他认为，根据 Scott Guthrie 的介绍，Azure 产品太好了，不容忽视。显然 Azure 的定价结构（根据 Scott Guthrie 的说法）试图与 App Harbours 相匹配，但可用的功能足以让我的朋友认为 Azure 产品太好了，不能利用。

正如你所知，我的朋友正在开发一个带有文档数据库（我忘了是哪个）和标准 JQuery UI 等的 MVC 网站。

如果您正在计划进行类似的冒险，那么我相信这两种服务都足够了，但是在权衡了所提供的服务之后，显然您拥有的 Azure 功能比 App Harbour 更多。

有关更好的描述，请参阅：[Windows Azure or Amazon EC2 for ASP.NET MVC Development?](https://stackoverflow.com/questions/4284830/windows-azure-or-amazon-ec2-for-asp-net-mvc-development)

需要注意的一点是，Azure 很快就会更新，根据我的经验，这将带来更好的用户体验。