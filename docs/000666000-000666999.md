# StackOverflow 问答 000666000-000666999

# django - 为什么我在 django 1.0 管理页面中没有文档链接？

> ID：666003
> 
> 赞同：1
> 
> 时间：2009-03-20T12:51:11.840
> 
> 标签：django, django-admin

在我的 django 0.96 管理页面上，有一个“文档”链接，它提供了各种不错的内省功能。安装 django 1.02 后，我不再有这个链接。我怎样才能找回它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-20T13:17:52.790

您必须在 urls.py 和 settings.py 中更改一些内容：

来自 urls.py：

```
# Uncomment the admin/doc line below and add 'django.contrib.admindocs' 
# to INSTALLED_APPS to enable admin documentation:
# (r'^admin/doc/', include('django.contrib.admindocs.urls')),

# Uncomment the next line to enable the admin:
(r'^admin/', include(admin.site.urls)), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T13:58:55.063

解决方案在这里揭示： [http ://groups.google.com/group/django-users/browse_thread/thread/b4670a85dfa6322/7b72917ce7ef99e?hl=en&ie=UTF-8&q=django+admin+interface+documentation+link&pli=1](http://groups.google.com/group/django-users/browse_thread/thread/b4670a85dfa6322/7b72917ce7ef99e?hl=en&ie=UTF-8&q=django+admin+interface+documentation+link&pli=1)

# java - 为什么ant认为我有旧版本的Java？

> ID：666006
> 
> 赞同：1
> 
> 时间：2009-03-20T12:51:55.300
> 
> 标签：java, ant, groovy

我正在尝试使用 ant 从源代码（在 RH Linux 上）构建 Groovy，但由于某种原因，它认为我的 Java 版本是 1.4，而不是 1.6，因此它不会编译。有问题的线似乎是

```
<condition property="groovy.build.vm5">
    <not>
        <contains string="${ant.java.version}" substring="1.4"/>
    </not>
</condition> 
```

在 build.xml 中。

当我在命令行上键入 javac -version 时，它显示“javac 1.6.0_11”。有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-20T12:53:54.453

检查环境变量 JDK_HOME 和 JAVA_HOME 的值。

编辑：当你从命令行运行 java 时，“which java”会告诉你你得到的是哪个 Java。例如，如果这告诉您，您正在获取“/usr/lib/jvm/java-6-sun/bin/java”，您可以将“JAVA_HOME”设置为“/usr/lib/jvm/java-6 -太阳”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-20T12:56:33.497

Jon Bright 的回答暗示了一个好的方向：您安装的 ant 可能使用了另一个 java 版本，而不是您通过“java -version”访问的那个。这受环境变量 JDK_HOME 和 JAVA_HOME 的影响。

**编辑：**如果这些变量不存在，那么 ant 应该从名为 ant 的安装中找到 Java。但是如果你设置了这些变量，ant 会选择这些。所以设置这个变量来安装JDK1.6应该值得一试。在 Linux 上，您的 Java 可能位于 /usr/lib/jvm 的子目录中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-20T12:56:22.497

我会检查 PATH 环境变量。

当你在一个干净的 shell（最近开始）上执行时，你会得到什么：

$ java -版本

Ant 可能认为您正在尝试使用 OpenJDK 的 JVM 和编译器（我认为它与 RH 一起安装）。尝试卸载它。

# c# - 是否有用于 C# 的 XML 文字插件可以将 XML 文字转换为 C# 对象？

> ID：666009
> 
> 赞同：2
> 
> 时间：2009-03-20T12:52:38.263
> 
> 标签：c#

是否有用于 C# 的 XML 文字插件可以将 XML 文字转换为 C# 对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-20T12:56:39.517

是的，它刚刚作为[WCF Rest Starter Kit Preview 2](http://aspnet.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=24644)的一部分发布。它称为将[XML 粘贴为类型](http://www.pluralsight.com/community/blogs/aaron/archive/2009/03/16/wcf-rest-starter-kit-paste-xml-as-types.aspx)。

# silverlight - 如果我在 layoutRoot Grid 中使用 MinWidth / minHeight，则预览网格线将停止工作

> ID：666012
> 
> 赞同：0
> 
> 时间：2009-03-20T12:53:29.213
> 
> 标签：silverlight, silverlight-3.0

我在做什么错，或者这是**混合 3/Silverlight 3 预览中的错误**

```
 <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
        <RowDefinition Height="10*"/>
    </Grid.RowDefinitions>

    <Grid x:Name="SideBar" HorizontalAlignment="Left" MinHeight="768" MinWidth="100" Grid.Column="0" Grid.RowSpan="2">
        <Grid.Projection>
            <PlaneProjection RotationX="0" RotationY="0" CenterOfRotationX="0"/>
        </Grid.Projection>
        <Border BorderBrush="#FF000000" BorderThickness="1,1,1,1">
            <Border.Background>
                <LinearGradientBrush EndPoint="3.129,0.55" StartPoint="-1.356,0.198">
                    <GradientStop Color="#C80900FF" Offset="0"/>
                    <GradientStop Color="#00FFFFFF" Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>
        </Border>

    </Grid>

</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-08-01T08:26:50.113

为什么不在 RowDefinition 中设置 MinHeight ......就像......

```
<RowDefinition MinHeight="768"  Height="*"/> 
```

# java - Java 的 OpenMicroBlogging 库？

> ID：666014
> 
> 赞同：2
> 
> 时间：2009-03-20T12:54:34.373
> 
> 标签：java, cofundos

任何人都可以向我推荐一个通过[OpenMicroBlogging](http://openmicroblogging.org/)进行交流的库吗？它应该是 Java 和开源的。

**更新：**由于似乎没有 Java 的 OMB 库，我在[cofundos](http://cofundos.org/project.php?id=169)上创建了一个请求。因此，如果您能够创建这样的图书馆，那就去抓钱吧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-25T04:29:15.390

你也可以试试 Laconica [http://laconi.ca/trac/](http://laconi.ca/trac/)我听说设置需要一些努力，虽然我自己没有尝试过

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-31T08:08:43.160

例如，Jaiku 能够通过 REST 进行交谈。也许这是另一种选择，因为您可以使用简单的 REST 库与之通信。

[http://www.jaiku.com/api/docs](http://www.jaiku.com/api/docs)

# visual-studio - 大型解决方案和服务工厂的问题

> ID：666015
> 
> 赞同：2
> 
> 时间：2009-03-20T12:54:40.303
> 
> 标签：visual-studio, wcf, projects-and-solutions, service-factory

我的团队正在使用 Service Factory Modeling Edition 在 Visual Studio 2008 SP1 中开发 WCF 服务。问题是我们有太多的服务要开发，而且我们把所有的东西都放在同一个解决方案中。

250 个项目之后，解决方案几乎没有加载，添加它几乎是不可能的。我们认为将每个服务拆分为自己的解决方案会很好，但服务工厂的东西有效地阻止了我们这样做。

我们正在将模型项目中的代码生成到我们的其他项目中，但是如果我们尝试使用多个解决方案，我们将无法引用模型项目，因为它无法维护生成到正确位置所需的项目映射。而且我们在模型项目中使用了几个共享数据合约，因此拆分模型项目似乎也没有意义。

我们现在有这么多的项目，我们不能真正回头不使用服务工厂的方法来做所有的事情。

我们应该做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-20T13:08:32.000

此时，您应该将 250 个项目分成组，并为每个项目创建一个解决方案。我的建议是每个解决方案使用约 25 个项目。使用这些迷你解决方案进行日常编辑。

仍然可以通过 msbuild 和命令行对整体解决方案进行完整构建。但是 VS 并不是要同时处理这么多项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-21T13:17:45.090

听到你这么说，我很惊讶。我在上一份工作中使用了服务工厂，我们为每套服务创建了一个单独的解决方案。在每个解决方案中，我们在模型项目中创建了一个或多个模型。

我建议您通过创建几个新的 SF 解决方案、添加几个模型和生成代码来进行试验。看看这是否会导致任何问题。

您是否讨论过这个问题或在[CodePlex](http://www.codeplex.com/servicefactory)上创建了一个问题？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T22:23:06.847

我同意约翰桑德斯的观点。保持小。此外，保持持续集成环境运行以跟踪开发过程中的混乱情况。

# html - (x)html 页面标题中的哪些元标记应该足以让 SEO 超载它？

> ID：666016
> 
> 赞同：1
> 
> 时间：2009-03-20T12:54:40.367
> 
> 标签：html, xhtml, seo, header

(x)html 页面标题中的哪些元标记应该足以让 SEO 超载它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-14T16:38:52.663

几年前，元标签对搜索引擎优化很重要。然而，它们被滥用并且几乎被所有搜索引擎（包括谷歌、雅虎和实时搜索）忽略。

您可以在 (X)HTML 中包含的最重要的 SEO 标签是`<title>`and`<meta name="description"...>`标签。

*   `<title>`通常应该是您希望搜索引擎在其列表中命名您的页面的名称。
*   `<meta name="description"...>`有时可以让搜索引擎了解如何在索引页面时描述您的页面。

但是，使用这两个标签不一定会增加您的网站在搜索引擎列表中的可见度。有关这方面的更多信息，谷歌在他们的网站上有一个很好[的 SEO 部分。](http://www.google.com/support/webmasters/bin/answer.py?hl=en&answer=35291)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-20T13:14:11.317

<meta name="description"> 可用于在搜索引擎结果中显示网站的简短摘要，尽管这并不是严格意义上的“SEO”。

不需要其他人；特别是 <meta name="keywords"> 是一种不再相关的浪费你的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-06-22T14:03:39.577

描述标签虽然对更高的排名并不重要，但对于真正的搜索引擎优化来说绝对重要。目标不仅是为了获得高排名，而且是为了获得您网站的流量和转化。因为它显示在结果中，所以描述对于该目的是绝对关键的。标题和描述是关键元素。页面内容是最关键的。

# c# - 捕获中的 MessageBox.Show 问题

> ID：666017
> 
> 赞同：1
> 
> 时间：2009-03-20T12:54:59.787
> 
> 标签：c#, try-catch, unhandled-exception

当我尝试运行以下代码时，它会导致未处理的异常。经过对代码的大量修改后，如果注释掉 MessageBox.Show 行，我发现问题就消失了！不同寻常的是，我在代码的其他部分的其他 catch{ } 段中使用了 MessageBox.Show 语句，没有任何问题。我的问题是有谁知道它为什么会导致异常？

（Ps Reports_Group_Chooser 是一个 ComboBox）

编码：

```
string GroupName= (string)Reports_Group_Chooser.SelectedItem;
byte[] ConfigBytes= new byte[]{};
try{
    ConfigBytes= File.ReadAllBytes("Reports/"+ GroupName.ToLower() +".grp");
}catch{
    MessageBox.Show("The file for this group is missing. Cannot continue.","File Error",MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
    Reports_Group_Chooser.Items.RemoveAt(NewGroup);
    Reports_Group_Chooser.SelectedIndex= 0;
} 
```

错误（大部分）：

> 未处理的异常：System.NullReferenceException：对象引用未设置为 System.Windows.Forms.ComboBox.DropDownListBoxFinished () [0x00000] at (wrapper remoting-invoke-with-check) System.Windows.Forms.ComboBox 处的对象实例:DropDownListBoxFinished () 在 System.Windows.Forms.ComboBox+ComboListBox.HideWindow () [0x00000] 在 System.Windows.Forms.ComboBox+ComboListBox.OnMouseUp (System.Windows.Forms.MouseEventArgs e) [0x00000] 在 System.Windows .Forms.Control.WmLButtonUp (System.Windows.Forms.Message& m) [0x00000] 在 System.Windows.Forms.Control.WndProc (System.Windows.Forms.Message& m) [0x00000] 在 System.Windows.Forms.ComboBox +ComboListBox.WndProc (System.Windows.Forms.Message& m) [0x00000] 在 System.Windows.Forms.Control+ControlWindowTarget。OnMessage (System.Windows.Forms.Message& m) [0x00000] 在 System.Windows.Forms.Control+ControlNativeWindow.WndProc (System.Windows.Forms.Message& m) [0x00000] 在 System.Windows.Forms.NativeWindow.WndProc ( IntPtr hWnd, Msg msg, IntPtr wParam, IntPtr lParam) [0x00000] 在 System.Windows.Forms.XplatUIX11.DispatchMessage (System.Windows.Forms.MSG & msg) [0x00000] 在 System.Windows.Forms.XplatUI.DispatchMessage (System .Windows.Forms.MSG& msg) [0x00000] 在 System.Windows.Forms.Application.RunLoop（布尔模式，System.Windows.Forms.ApplicationContext 上下文）[0x00000]WndProc (IntPtr hWnd, Msg msg, IntPtr wParam, IntPtr lParam) [0x00000] 在 System.Windows.Forms.XplatUIX11.DispatchMessage (System.Windows.Forms.MSG & msg) [0x00000] 在 System.Windows.Forms.XplatUI.DispatchMessage （System.Windows.Forms.MSG& msg）[0x00000] 在 System.Windows.Forms.Application.RunLoop （布尔模式，System.Windows.Forms.ApplicationContext 上下文）[0x00000]WndProc (IntPtr hWnd, Msg msg, IntPtr wParam, IntPtr lParam) [0x00000] 在 System.Windows.Forms.XplatUIX11.DispatchMessage (System.Windows.Forms.MSG & msg) [0x00000] 在 System.Windows.Forms.XplatUI.DispatchMessage （System.Windows.Forms.MSG& msg）[0x00000] 在 System.Windows.Forms.Application.RunLoop （布尔模式，System.Windows.Forms.ApplicationContext 上下文）[0x00000]

任何帮助感谢迈克尔

更新这是我的代码中一个工作 MessageBox.Show 的示例，它不会导致错误：

```
GlobalConfig= new Dictionary<string, string>();
byte[] ConfigBytes= new byte[]{};
try{
    ConfigBytes= System.IO.File.ReadAllBytes("Config.cfg");
}catch{
    MessageBox.Show("Global ettings file does not exist. Cannot continue.","File Error",MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
    GlobalConfig.Add("StoreNumber","");
    GlobalConfig.Add("Error","Y");
} 
```

更新更新：

似乎问题只是在组合框事件中有 MessageBox.Show：以下代码仍然显示相同的错误：

```
private void Reports_GroupChanged(object sender,EventArgs e){
    MessageBox.Show("The file for this group is missing. Cannot continue.","File Error",MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-20T13:06:00.150

当您显示 MessageBox 时，它不会暂停您的应用程序。相反，应用程序继续从操作系统中抽取消息。实际上，这允许您的 UI 继续处理。

这里可能发生的是，当 MessageBox 显示时，ComboBox 仍在处理鼠标按钮向上消息和空引用。尝试拨打以下电话。

```
System.Diagnostics.Debugger.Break(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-20T13:53:17.680

先修复错误。

```
Reports_Group_Chooser.SelectedIndex= 0;
Reports_Group_Chooser.Items.RemoveAt(NewGroup);    
MessageBox.Show("The file for this group is missing. Cannot continue.","File Error",MessageBoxButtons.OK, MessageBoxIcon.Exclamation); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-11T13:30:40.103

在显示消息之前，您应该解决导致失败的问题。

下面是我的例子。

失败是由将 null 对象转换为字符串引起的：

```
string str = dgv[e.ColumnIndex, e.RowIndex].Value.ToString(); 
```

然后在 catch 语句中，我尝试显示消息并将先前的值分配给单元格：

```
MessageBox.Show(String.Format("Value must be between {0} and {1}.", minVal, maxVal));
dgv[e.ColumnIndex, e.RowIndex].Value = previousValue; 
```

在调用 MessageBox 期间出现空引用异常。

所以有必要在调用 MessageBox 之前修复单元格值（交换行），它就像一个魅力。

# c - 使用 TCP 时发送 1 个大块还是发送许多小块更好？

> ID：666018
> 
> 赞同：15
> 
> 时间：2009-03-20T12:55:03.250
> 
> 标签：c, sockets, tcp

在我`accept()`建立连接，然后`write()`到客户端套接字之后，最好将您打算一次发送的所有数据写入还是分块发送？

例如：

> 接受，写入 1MB，断开连接

……或者……</p>

> 接受，写入 256 字节，写入 256 字节，... n，断开连接

我的直觉告诉我，底层协议会自动执行此操作，并进行纠错等。这是正确的，还是我应该分块我的数据？

在你问之前，不，我不确定我从哪里得到了对数据进行分块的想法——我认为这是我从编程 C# Web 服务中获得的一种直觉（我认为是为了绕过接收缓冲区限制等）。坏习惯？

*注意*：我正在使用 C

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-03-20T12:56:26.320

客户端和服务器将按照他们认为合适的方式分解您的数据，因此您可以在一个块中发送尽可能多的数据。查看Von Welch 撰写的[TCP Windows 用户指南一](http://www.vonwelch.com/report/tcp_windows/)文。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-03-20T12:58:31.463

多年前，我有一个发送二进制数据的应用程序 - 它使用以下缓冲区的大小发送一次，然后使用缓冲区（几百字节）发送另一次。在分析之后，我们发现我们可以通过将它们放入一个缓冲区并只发送一次来获得显着的加速。我们很惊讶——尽管每个数据包都有一些网络开销，但我们认为这不会是一个明显的因素。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-03-20T12:57:03.510

从 TCP 级别来看，是的，当它太大时，您的大缓冲区将被拆分，当它太小时它将被合并。

从应用程序级别，不要让您的应用程序处理**无限的缓冲区大小**。在某种程度上，您需要将它们分开。

如果您通过套接字发送文件，并且可能处理该文件的某些数据，例如压缩它。然后你需要把它分成块。否则，当您最终遇到一个大文件时，您将使用过多的 RAM，并且您的程序将用完 RAM。

RAM 不是唯一的问题。如果您的缓冲区变得太大，您可能会花费太多时间读取数据或处理数据，并且您将不会使用坐在那里等待数据的套接字。出于这个原因，最好有一个缓冲区大小的参数，这样您就可以确定一个既不太小也不太大的值。

我的主张并不是 TCP 套接字不能处理大量数据，它可以而且我建议在发送时使用更大的缓冲区以获得更好的效率。我的主张是不要在您的应用程序中处理无限的缓冲区大小。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-03-20T13:17:54.850

[Nagle 算法](http://en.wikipedia.org/wiki/Nagle%27s_algorithm)通常在 TCP 套接字上默认启用，它可能会将这四个 256 字节写入合并到同一个数据包中。因此，无论您将其作为一个写入还是多个发送都无关紧要，无论如何它都应该以一个数据包的形式结束。如果你有一大块开始，将它作为一个块发送更有意义。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-20T13:02:06.337

如果您正在计算这些写入之间的数据，最好在它们可用时对其进行流式传输。此外，一次全部写入可能会导致缓冲区溢出（尽管这种情况可能很少见，但确实会发生），这意味着您的应用程序需要暂停并重新尝试写入（不是全部，只是从您遇到溢出的点开始） .)

我通常不会特意对写入进行分块，尤其是小于 256 字节的块。（由于在 TCP/IP 开销之后大约 1500 字节可以放入以太网数据包中，因此我会使用至少那么大的块。）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-20T12:58:52.913

我会将所有内容作为[osi modell](http://en.wikipedia.org/wiki/OSI_model)中的底层发送一大块。因此，您不必担心要发送的块有多大，因为这些层会将它们拆分为 necisarry。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-20T13:09:35.227

唯一绝对的答案是配置应用程序以防万一。有这么多因素，不可能给出在所有情况下都是正确的准确答案。

# apache-flex - 是否可以在另一个窗口具有焦点的情况下保持全屏模式？

> ID：666019
> 
> 赞同：0
> 
> 时间：2009-03-20T12:55:29.660
> 
> 标签：apache-flex, flash, actionscript

我有一个 Flash 全景图，其中包含指向包含有关对象的更多信息的弹出窗口的热点链接。现在，如果您处于全屏模式并单击热点，您将自动退出全屏模式，然后会打开弹出窗口。是否可以在全景图仍处于全屏模式的背景下打开弹出窗口并获得焦点？如果是这样，任何关于如何实现这一目标的提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-20T14:54:26.020

答案是**否定**的，不知何故它是有道理的，否则如果你可以将它与弹出窗口重叠，为什么它会是全屏的？全屏只关注一个窗口。如果您想获得更多信息，为什么不在您的 SWF 中进行呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T15:00:58.877

不，但您可以做的是使表单的大小与您的分辨率相同并隐藏任务栏和框架。

# .net - 将 RTF 文档转换为图像或在服务器上打印 RTF

> ID：666021
> 
> 赞同：1
> 
> 时间：2009-03-20T12:55:42.423
> 
> 标签：.net, rtf, page-layout

我有一种情况，我想**将 RTF**文档转换**为图像**以进行存档和打印。我正在使用.NET。
有没有可以帮助我进行这种转换的库？

我需要

*   将 RTF 转换为服务器上的图像
*   设置创建图像时需要遵守的纸张尺寸

商业图书馆是一种选择，但我更喜欢操作系统。如果有客户端方法可以做到这一点，那也是一个有效的答案，但服务器端会非常好。

编辑：

感谢所有伟大的答案。由于所有这些都涉及打印 RTF 文档，因此我有一个后续问题：

*   在服务器上打印 RTF 文档的最佳方法是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-20T13:04:05.210

我的建议是拥有一个转储到图像的打印驱动程序 - 这样您就可以使用标准打印功能（例如包括纸张大小），然后获取文件并将其用于实际打印或存档。

免费和开源版本是：[虚拟图像打印机驱动程序](http://sourceforge.net/projects/imageprinter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-20T13:06:12.647

我最近不得不处理这个问题。我们的应用程序将允许用户在标准控件（Visual Studio 附带）中编辑一些 RTF，然后将其转换为图像，以便我们可以将其发送到另一个不理解 RTF 的应用程序。

我在网上看起来很努力，似乎唯一的可能性就是截取控件的屏幕截图并将其转换为图像。这意味着在可视区域之外的任何文本（即您必须滚动）都不会出现。真的让我感到惊讶，它必须被这样破解。

我知道你问过商业图书馆，但我想我会让你知道我对内置控件的体验。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-20T13:55:01.670

扩展罗伯特的答案，如有必要，您可以通过选择操作系统附带的“标准”打印机并打印到文件来避免下载标准打印驱动程序。许多司机都在使用标准版本的后记。如果需要，将 postscript 文件转换为 pdf 文件以供查看通常非常容易。打印它们通常也很容易。

此解决方案比仅使用输出图像的专用驱动程序稍微多一些工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T06:29:50.317

通过以下代码片段，我能够捕获富文本框的图片。我想它也可能对你有用。

```
private void ShowBitmap_btn_Click(object sender, RoutedEventArgs e)
    {
        if (MyTextBox_txt == null)
            return;

        Rect _descendentBounds = VisualTreeHelper.GetDescendantBounds(MyTextBox_txt);
        //RenderTargetBitmap _targetBitmap = new RenderTargetBitmap((Int32)_descendentBounds.Width, 
        //                                                          (Int32)_descendentBounds.Height, 
        //                                                          96, 96, PixelFormats.Pbgra32);

        Rect _tempRect = new Rect(System.Windows.Forms.Screen.PrimaryScreen.Bounds.X,
                                    System.Windows.Forms.Screen.PrimaryScreen.Bounds.Y,
                                    System.Windows.Forms.Screen.PrimaryScreen.Bounds.Width,
                                    System.Windows.Forms.Screen.PrimaryScreen.Bounds.Height);
        RenderTargetBitmap _targetBitmap = new RenderTargetBitmap((Int32)_tempRect.Width,
                                                                            (Int32)_tempRect.Height,
                                                                                96, 96, PixelFormats.Pbgra32);

        DrawingVisual _drawingVisual = new DrawingVisual();

        using (DrawingContext _drwaingContext = _drawingVisual.RenderOpen())
        {
            VisualBrush _visualBrush = new VisualBrush(MyTextBox_txt);
            _drwaingContext.DrawRectangle(_visualBrush, null, new Rect(new Point(), _tempRect.Size));
        }

        _targetBitmap.Render(_drawingVisual);

        PngBitmapEncoder _png = new PngBitmapEncoder();

        _png.Frames.Add(BitmapFrame.Create(_targetBitmap));
        Stream _fileStream;
        _fileStream = File.Create(@"E:\sample1.png");

        _png.Save(_fileStream);

        System.Drawing.Bitmap _tempBitmap = new System.Drawing.Bitmap(_fileStream);
        _tempBitmap.Save(@"E:\sample1.bmp");

        _fileStream.Close();
        _fileStream.Dispose();

    } 
```

# python - 我需要使用 urllib2.Request / urlopen 处理哪些错误/异常？

> ID：666022
> 
> 赞同：62
> 
> 时间：2009-03-20T12:56:21.907
> 
> 标签：python

我有以下代码可以回发到远程 URL：

```
request = urllib2.Request('http://www.example.com', postBackData, { 'User-Agent' : 'My User Agent' })

try: 
    response = urllib2.urlopen(request)
except urllib2.HTTPError, e:
    checksLogger.error('HTTPError = ' + str(e.code))
except urllib2.URLError, e:
    checksLogger.error('URLError = ' + str(e.reason))
except httplib.HTTPException, e:
    checksLogger.error('HTTPException') 
```

postBackData 是使用使用 urllib.urlencode 编码的字典创建的。checksLogger 是一个使用[logging](http://docs.python.org/library/logging.html)的记录器。

我遇到了一个问题，当远程服务器关闭并且代码退出时此代码运行（这是在客户服务器上，所以我不知道此时退出堆栈转储/错误是什么）。我假设这是因为存在未处理的异常和/或错误。那么是否还有其他我没有在上面处理的可能触发的异常？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2009-03-20T13:12:45.533

添加通用异常处理程序：

```
request = urllib2.Request('http://www.example.com', postBackData, { 'User-Agent' : 'My User Agent' })

try: 
    response = urllib2.urlopen(request)
except urllib2.HTTPError, e:
    checksLogger.error('HTTPError = ' + str(e.code))
except urllib2.URLError, e:
    checksLogger.error('URLError = ' + str(e.reason))
except httplib.HTTPException, e:
    checksLogger.error('HTTPException')
except Exception:
    import traceback
    checksLogger.error('generic exception: ' + traceback.format_exc()) 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2009-03-20T13:06:01.803

从[文档页面](https://docs.python.org/2/library/urllib2.html#urllib2.urlopen) `urlopen`条目看来，您只需要捕获[URLError](https://docs.python.org/2/library/urllib2.html#urllib2.URLError)。如果您真的想对冲 urllib 代码中的问题，您也可以将`Exception`其作为后备。不要**只是**，`except:`因为那会抓住`SystemExit`和`KeyboardInterrupt`也。

编辑：我的意思是，你正在捕捉它应该抛出的错误。如果它抛出其他东西，可能是由于 urllib 代码没有捕获它应该捕获并包装在`URLError`. 即使是标准库也往往会遗漏简单的东西，比如`AttributeError`. 捕获`Exception`作为后备（并记录捕获的内容）将帮助您了解正在发生的事情，而不会陷入`SystemExit`和`KeyboardInterrupt`.

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-03-20T13:11:27.470

```
$ grep "raise" /usr/lib64/python/urllib2.py
IOError); for HTTP errors, raises an HTTPError, which can also be
        raise AttributeError, attr
                raise ValueError, "unknown url type: %s" % self.__original
        # XXX raise an exception if no one else should try to handle
        raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
        perform the redirect.  Otherwise, raise HTTPError if no-one
            raise HTTPError(req.get_full_url(), code, msg, headers, fp)
                raise HTTPError(req.get_full_url(), code,
            raise HTTPError(req.get_full_url(), 401, "digest auth failed",
                raise ValueError("AbstractDigestAuthHandler doesn't know "
            raise URLError('no host given')
            raise URLError('no host given')
            raise URLError(err)
        raise URLError('unknown url type: %s' % type)
        raise URLError('file not on local host')
            raise IOError, ('ftp error', 'no host given')
            raise URLError(msg)
            raise IOError, ('ftp error', msg), sys.exc_info()[2]
            raise GopherError('no host given') 
```

在 urllib2 依赖项中也有可能出现异常，或者由真正的错误引起的异常。

您最好通过自定义[sys.excepthook](http://docs.python.org/library/sys.html#sys.excepthook)在文件中记录所有未捕获的异常。*这里的关键经验法则是**永远不要捕获您不打算更正的异常**，并且**日志记录不是更正**。*所以不要仅仅为了记录它们而抓住它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-20T13:00:38.977

您可以捕获所有异常并记录捕获的内容：

```
 import sys
 import traceback
 def formatExceptionInfo(maxTBlevel=5):
     cla, exc, trbk = sys.exc_info()
     excName = cla.__name__
     try:
         excArgs = exc.__dict__["args"]
     except KeyError:
         excArgs = "<no args>"
     excTb = traceback.format_tb(trbk, maxTBlevel)
     return (excName, excArgs, excTb)
 try:
     x = x + 1
 except:
     print formatExceptionInfo() 
```

（代码来自[http://www.linuxjournal.com/article/5821](http://www.linuxjournal.com/article/5821)）

另请阅读[有关 sys.exc_info 的文档](http://docs.python.org/library/sys.html#sys.exc_info)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-20T14:30:09.760

我抓住：

```
httplib.HTTPException
urllib2.HTTPError
urllib2.URLError 
```

我相信这涵盖了包括套接字错误在内的所有内容。

# asp.net - 如何在 ASP.NET 页面中处理来自 MSOutlook 的 IMAP 请求？

> ID：666042
> 
> 赞同：0
> 
> 时间：2009-03-20T13:03:32.620
> 
> 标签：asp.net, web-services, imap

**简介**：我正在修补一个个人项目，它将为 MSOutlook 提供任务对象。我想在 MSOutlook 中创建一个指向我网站的 *.aspx 页面的新 HTTP 帐户。此页面将提供一个任务项列表，这些任务项实际上并不驻留在邮件服务器上，而是存储在 XML 文件或其他简单结构中。

**问题**：在 ASP.NET 中处理 IMAP 请求是否有任何指南？我找到了大量关于开发 Web 客户端的信息，但我想要一些更类似于服务器/服务的东西，尽管没有那么强大。

**背景**：我女儿在读高中。她精通计算机，但厌恶复杂性和所有书呆子气。她对 MSOutlook 很满意，所以我想在我家运行一个小网站，将家庭作业任务发送给她。如果我可以设置一个 HTTP 帐户，任务将交付给她，而她不会遇到任何麻烦。不要让我开始在屏幕上抓取我正在做的从她老师的“网站”检索作业（我不认为这个术语可以在不完全脱落的情况下更宽松地应用）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-20T13:15:20.767

我认为您最好使用/自定义开源 IMAP 服务器，这里有几个。但我不确定邮件服务器的想法是否好。你会为这项工作带来很多包袱。

你为什么不给你的女儿发一封电子邮件，而不是把作业放在网页上然后试图把它从那里拿下来？

如果你必须有拉模型（而不是推模型），为什么不建立一个带有“向我发送作业”按钮的 asp 页面。她可以去那里，点击它，就会收到电子邮件中的内容。

# php - 使用 CodeIgniter 从 Bookmarklet 调用异步页面

> ID：666046
> 
> 赞同：0
> 
> 时间：2009-03-20T13:05:19.090
> 
> 标签：php, javascript, codeigniter, asynchronous

我正在尝试制作一个书签，它将获取您当前所在页面的 URL，并将其发送到使用 CodeIgniter 编写的应用程序。

我一直遇到的问题是我不能进行标准的 AJAX 调用，因为它是跨域的。这是不允许的，我无法找到使用 JSONP via`$_GET`方法的方法，因为 CodeIgniter 会吹走`$_GET`参数。

在这一点上，我将就如何做到这一点提出任何建议。请注意，我需要发送一个 URL，如果它要通过 URL 本身传递，它显然需要编码或其他东西。这我还没有弄清楚该怎么做，所以任何关于这方面的指针也将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-20T13:17:12.107

可以[在 Codeigniter 中启用查询字符串](http://codeigniter.com/user_guide/general/urls.html)，但请注意注意事项 - 例如，您不能使用 URL 帮助程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-20T13:51:01.807

Codeigniter 取消设置 $_GET 但您可以从查询字符串中获取数据。这有点低效，因为 PHP 可能会结束对查询字符串的两次解析，但它应该可以工作：

```
parse_str($_SERVER['QUERY_STRING'], $get);
print_r($get); 
```

所有 GET 变量都应该可以在变量 $get 中访问。有关更多信息，请参阅[`parse_str()`文档。](http://uk3.php.net/parse_str)

* * *

作为替代方案，您可以对当前 URL 进行 url 编码并将其附加到您请求的内容中，例如

```
var url = 'http://example.com/bookmarklet/' 
               +  encodeURIComponent(window.location); 
```

然后在 Codeigniter 中执行以下操作：

```
//you might have to call urldecode() on this value 
$url = $this->uri->segment(0); 
```

但你可能会发现你有[这个问题](https://stackoverflow.com/questions/311801/url-encoded-forward-slashes-breaking-my-codeigniter-app)

# javascript - 在 Mozilla 画布中拖放

> ID：666047
> 
> 赞同：9
> 
> 时间：2009-03-20T13:05:23.867
> 
> 标签：javascript, jquery, html, user-interface, canvas

我想在 mozilla 画布中实现一个绘图窗格（与 visio 为流程图提供的类似但更小的版本）。

对此有任何支持吗？

到目前为止，我一直使用 jQuery 创建矩形并移动它们。虽然这在这里很容易......创建线（对象之间的连接）是一个真正的痛苦。我正在使用一些粗略的方法在javascript中逐像素着色，它既不好看也不可扩展，而且我需要构建很多函数来使连接坚持一组对象等。

有谁知道画布和那里可用的功能是否会让我的生活更轻松。

在这种情况下，任何指向什么是更好的解决方案的指针。（我希望它不是小程序）

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-05T18:16:24.640

是的，您可以为此使用画布。绘制简单的形状并缩放它们非常简单。

但是，如果您需要在绘制形状后对其进行编辑，您将不得不投入更多的工作。Canvas 以所谓的“立即模式”进行绘制，这意味着它不知道您在绘制后立即绘制了什么。它不跟踪绘制的形状。如果您需要，您将不得不自己实施。

我已经使用`isPointInPath()`可用于测试用户是否单击特定点的功能来完成此操作。我使用 MVC 模式（模型-视图-控制器）跟踪我绘制的对象，以便找出单击了哪个形状。

另一种选择可能是 fabric.js，它应该非常接近您的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-05T14:57:39.143

请点击此链接： [https ://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial](https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial)

LMK 如果有帮助！

以下步骤可能会有所帮助：
1\. 创建画布并将其添加到 DOM：
`var myCanvas = document.createElement('canvas'); document.body.appendChild(myCanvas);`
2\. 设置画布的宽度-高度：
`myCanvas.width=200; myCanvas.height=200;`
3\. 获取画布的上下文并开始在其
`var gc = myCanvas.getContext('2d');`
上绘制：4\. 绘制矩形的代码：
`gc.strokeRect(50,50,50,50);`
5\. 之后这个，在画布上添加 mousehandlers(mousedown,mousemove,mouseup)/touchhandlers(touchdown,touchmove,touchup) 并相应地处理移动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-21T19:42:15.767

这些**jQuery 插件**中的任何一个都非常适合绘制窗格：

[jCanvas](http://projects.calebevans.me/jcanvas/)用于绘制任何简单甚至复杂的形状

[sketch.js](http://intridea.github.io/sketch.js/)用于一般绘图。

它们既响应又兼容。

# c# - c#继承泛型集合和序列化

> ID：666054
> 
> 赞同：6
> 
> 时间：2009-03-20T13:06:59.727
> 
> 标签：c#, inheritance, xml-serialization, collections, generics

设置：

```
class Item
{
    private int _value;

    public Item()
    {
        _value = 0;
    }

    public int Value { get { return _value; } set { _value = value; } }
}

class ItemCollection : Collection<Item>
{
    private string _name;

    public ItemCollection()
    {
        _name = string.Empty;
    }

    public string Name { get {return _name;} set {_name = value;} }
} 
```

现在，尝试使用以下代码片段进行序列化：

```
ItemCollection items = new ItemCollection();

...

XmlSerializer serializer = new XmlSerializer(typeof(ItemCollection));
using (FileStream f = File.Create(fileName))
    serializer.Serialize(f, items); 
```

在查看生成的 XML 时，我发现 ItemCollection.Name 值不存在！

我认为可能发生的事情是序列化程序将 ItemCollection 类型视为一个简单的集合，因此忽略了任何其他添加的属性......

有没有人遇到过这样的问题并找到了解决方案？

问候，

斯泰西

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-03-20T13:19:03.193

此行为是设计使然”。从集合类派生时，Xml Seralizier 将仅序列化集合元素。要解决这个问题，您应该创建一个封装集合和名称的类，并将其序列化。

```
class Wrapper
{
    private Collection<Item> _items;
    private string _name;

    public Collection<Item> Items { get {return _items; } set { _items = value; } }
    public string Name { get { return _name; } set { _name = value; } }
} 
```

此处提供了详细讨论：http: [//blogs.vertigo.com/personal/chris/Blog/archive/2008/02/01/xml-serializing-a-derived-collection.aspx](http://blogs.vertigo.com/personal/Chris/Blog/Lists/Posts/Post.aspx?ID=18)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-20T13:16:29.033

XmlSerializer 是邪恶的。也就是说，任何实现 IEnumerable 的对象都将被序列化为一个简单的集合，而忽略您自己添加的任何额外属性。

您将需要创建一个新类，该类同时包含您的属性和返回集合的属性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-04-29T09:02:34.870

我不确定我是否遗漏了什么，但您是否希望生成的 xml

```
<ItemCollection>
   <Name>name val</Name>
   <Item>
      <Value>1</alue>
   </Item
   <Item>
      <Value>2</alue>
   </Item
</ItemCollection> 
```

如果是这样，只需将 XmlRoot 属性应用于 itemcollection 类并设置元素名称...

```
[XmlRoot(ElementName="ItemCollection")]
public class ItemCollection : Collection<Item>
{
   [XmlElement(ElementName="Name")]
   public string Name {get;set;}
} 
```

这将指示序列化程序为您的收集容器输出所需的名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-20T13:27:23.033

您还可以尝试使用 IXmlSerializable 接口实现自己的序列化

```
 public class ItemCollection : Collection<Item>,IXmlSerializable
    {
        private string _name;

        public ItemCollection()
        {
            _name = string.Empty;
        }

        public string Name
        {
            get { return _name; }
            set { _name = value; }
        }

 #region IXmlSerializable Members

         public System.Xml.Schema.XmlSchema GetSchema()
         {
              return null;
         }

         public void ReadXml(System.Xml.XmlReader reader)
         {

         }

         public void WriteXml(System.Xml.XmlWriter writer)
         {
              writer.WriteElementString("name", _name);
              List<Item> coll = new List<Item>(this.Items);
              XmlSerializer serializer = new XmlSerializer(coll.GetType());
              serializer.Serialize(writer, coll);

         }

#endregion
   } 
```

上面的代码将生成序列化的 xml 作为

```
<?xml version="1.0"?>
<ItemCollection>
  <name />
  <ArrayOfItem xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <Item>
      <Value>1</Value>
    </Item>
    <Item>
      <Value>2</Value>
    </Item>
  </ArrayOfItem>
</ItemCollection> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-05T16:20:47.820

```
public class Animals : List<Animal>, IXmlSerializable
{
    private static Type[] _animalTypes;//for IXmlSerializable
    public Animals()
    {
        _animalTypes = GetAnimalTypes().ToArray();//for IXmlSerializable
    }

    // this static make you access to the same Animals instance in any other class.
    private static Animals _animals = new Animals();
    public static Animals animals
    {
        get {return _animals; }
        set { _animals = value; }
    }

    #region IXmlSerializable Members

    public System.Xml.Schema.XmlSchema GetSchema()
    {
        return null;
    }

    public void ReadXml(System.Xml.XmlReader reader)
    {
        bool wasEmpty = reader.IsEmptyElement;
        reader.Read();
        if (wasEmpty)
            return;

        reader.MoveToContent();
        reader.ReadStartElement("Animals");
        // you MUST deserialize with 'List<Animal>', if Animals class has no 'List<Animal>' fields but has been derived from 'List<Animal>'.
        List<Animal> coll = GenericSerializer.Deserialize<List<Animal>>(reader, _animalTypes);
        // And then, You can set 'Animals' to 'List<Animal>'.
        _animals.AddRange(coll);
        reader.ReadEndElement();

        //Read Closing Element
        reader.ReadEndElement();
    }

    public void WriteXml(System.Xml.XmlWriter writer)
    {
        writer.WriteStartElement("Animals");
        // You change 'List<Animal>' to 'Animals' at first.
        List<Animal> coll = new List<Animal>(_animals);
        // And then, You can serialize 'Animals' with 'List<Animal>'.
        GenericSerializer.Serialize<List<Animal>>(coll, writer, _animalTypes);
        writer.WriteEndElement();
    }

    #endregion

    public static List<Type> GetAnimalTypes()
    {
        List<Type> types = new List<Type>();
        Assembly asm = typeof(Animals).Assembly;
        Type tAnimal = typeof(Animal);

        //Query our types. We could also load any other assemblies and
        //query them for any types that inherit from Animal
        foreach (Type currType in asm.GetTypes())
        {
            if (!currType.IsAbstract
                && !currType.IsInterface
                && tAnimal.IsAssignableFrom(currType))
                types.Add(currType);
        }

        return types;
    }
} 
```

# nhibernate - 如何在nhibernate中查询最常用的多对一

> ID：666055
> 
> 赞同：1
> 
> 时间：2009-03-20T13:07:18.977
> 
> 标签：nhibernate, icriteria

我正在从事的项目中有以下问题。系统中的每个事务都分配给给定的用户。所以交易和用户之间存在多对一的关系，如下所示：

```
public class User 
{
    public int ID { get; private set; } 
    public string FirstName { get; set; }
    ....
}

public class Transaction 
{
    public int ID { get; private set; }
    public User CreatedBy { get; private set; } 
    ...
} 
```

我已经用 NHibernate 映射了这些实体，以便在 Transaction 和 User 类之间存在多对一的映射。User 对象没有交易列表，但 Transaction 具有对创建它的用户的引用。

现在我想查询以检索创建最多事务的用户列表，但我不知道如何使用 NHibernate 获得前 10 个引用最多的用户。

有任何想法吗？我希望能够使用 ICriteria 而不是 HQL 来完成此任务，但如果需要，HQL 也可以。

**更新**

我尝试了 sirrocco 的建议，查询为...

```
DetachedCriteria topReferencedUsers = DetatchedCriteria.For(typeof(Transaction)) 
    .SetProjection(Projections.GroupProperty("CreatedBy.Id"))
    .SetProjection(Projections.Count("CreatedBy.Id").As("pcount" ))
    .AddOrder(Order.Desc("pcount"))
    .SetMaxResults(10); 
```

并将其构建为子查询...

```
GetSession().CreateCriteria(typeof (User))
    .Add(Subqueries.PropertyIn("Id", topReferencedUsers))
    .List<User>(); 
```

但是此子查询不分组，而是返回事务总数，然后将其用作用户查询的 IN 子句。如果我用两个投影添加 ProjectionList()，我会得到我想要的子查询的输出，但它会失败，因为它试图将两列输出运行到 User 查询的 IN 子句中。如何让 NHibernate 同时投影 ID 和计数，但只加入 ID？

**更新 (2)**

我尝试了 Sirrocco 的 SqlGroupProjection 建议（谢谢 Sirrocco），但结果是空的。首先它给了我一个错误，说它找不到属性 pcount，这意味着我需要删除订单，这意味着它是按某个时间戳排序的，这是行不通的。但即便如此，它仍然只输出用户被引用的次数，而不是加入用户表的用户 ID。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-28T12:37:11.757

您可以自己尝试一下，看看是否获得了所需的输出。

```
var userIds = this.Session
    .CreateQuery(@"
select a.User.Id 
from Transaction as a 
group by a.User 
order by count(a.User) desc")
    .SetMaxResults(10)
    .List<int>().ToArray();

var users = this.Session.CreateCriteria(typeof(User))
    .Add(Restrictions.InG("Id", userIds))
    .List<Artist>();

return users; 
```

我从第一个查询中获得的用户 ID 是 (90,22,50,55)，但是当传递给第二个查询时，我的用户顺序为 22,50,55,90。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-23T11:52:49.693

您可以将操作分为两个步骤。

1) 执行 topReferencedUsers，然后将 CreatedBy.Id 投影提取到内存中的 int 数组中（因为您只处理 10 个）。

2）然后执行：

```
GetSession().CreateCriteria(typeof(User))
    .Add(Expression.InG<int>("Id", topTenIdArray))
    .List<User>(); 
```

# c# - C# 代码分析 - VS 2005

> ID：666056
> 
> 赞同：3
> 
> 时间：2009-03-20T13:07:45.123
> 
> 标签：c#, .net, .net-2.0

我有一个 C# 用户控制项目，它会导致间歇性 .NET 运行时错误、一般性错误，并且想知道是否有任何代码分析工具可以指向我的 .sln 文件，它会告诉我可能导致我的错误的原因

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-20T13:10:00.827

**有没有工具可以告诉你你做错了什么？**

不，这是编程乐趣的一部分。计算机程序不可能查看一段代码并明确确定所有错误是什么。

**有没有工具可以告诉我我的程序做错了什么？**

是的，这些被称为静态分析工具。FxCop 是 Microsoft 提供的免费工具，可对您的代码库进行大量静态分析。

我不能 100% 确定独立版本是否可以指向 .sln 文件。但它可以很容易地指向解决方案的构建输出。

[http://msdn.microsoft.com/en-us/library/bb429476.aspx](http://msdn.microsoft.com/en-us/library/bb429476.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T13:18:48.373

您需要的是静态代码分析工具 - 除了 JaredPar 提到的 FXCop 之外，还有[其他](http://en.wikipedia.org/wiki/List_of_tools_for_static_code_analysis#.NET)工具。

我最近发现的另一个选项是[PEX](http://research.microsoft.com/en-us/projects/Pex/)，它提供了一种发现此类问题的有用方法，它进行白盒单元测试。因此，当您运行 PEX 探索时，它会尝试通过其自动生成的单元测试在您的方法中发送大量值，这可能有助于发现由奇怪/意外数据引起的奇怪问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-05-19T11:03:27.773

[NDepend](http://ndepend.com)完全集成在 VS2005、VS2008 和 VS2010 中。因此，您可以简单地将 NDepend 指向您希望分析的 sln，NDepend 将为您构建完整的报告。

只需单击几下，您就可以可视化哪些类型取决于哪些类型等。这显然不会神奇地解决您的所有问题，但这可能会让您走上正轨。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-20T15:08:48.017

就工具而言，[FX Cop](http://blogs.msdn.com/fxcop/)非常适合进行代码分析，而且它是免费的，但其他值得一看的是[http://www.jetbrains.com/resharper/](http://www.jetbrains.com/resharper/)用于进行动态代码分析，它促进了良好的开发实践。

但是这些可能是错误的工作工具，可能无法解决您遇到的问题，代码可能在语法上是正确的，但存在导致您的问题的逻辑错误，就像拼写检查器一样，所有单词都拼写正确“Evert Bird是圆锥形的”意味着与“每个单词都是正确的”完全不同的东西。

您可能需要花一些时间在调试器中或使用某种形式的跟踪工具（例如[dotTrace Profiler ），在](http://www.jetbrains.com/profiler/)[Visual Studio Gallery](http://www.visualstudiogallery.com/Default.aspx)上还有更多内容，例如[http://www.debuginspector.com/](http://www.debuginspector.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-20T13:32:51.367

但我不会将静态分析工具与调试器混淆，我相信您需要的是调试。换句话说，FxCop 可能会告诉您一切都很好，但您仍然可以获得运行时异常。

仅通过查看代码（例如，具有多个线程的竞争条件）可能很难发现运行时中的一些错误。所以没有“代码分析工具”可以仅仅通过分析代码就可以产生运行时异常。

检查此链接以获取有关调试的一些示例：http: [//msdn.microsoft.com/en-us/library/ms954594.aspx](http://msdn.microsoft.com/en-us/library/ms954594.aspx)。您可能必须使用调试器对代码进行一些单步调试，也许将一些数据跟踪到日志文件，然后尝试准确找出出错的地方。

# wpf - WPF 与 Silverlight 3.0

> ID：666058
> 
> 赞同：21
> 
> 时间：2009-03-20T13:08:19.537
> 
> 标签：wpf, silverlight, cross-platform

Silverlight 3.0 beta 刚刚在拉斯维加斯的 Microsofts Mix Conference 上发布。

新测试版的两个功能是 3D 图形和在浏览器之外运行应用程序的能力，在我看来，这似乎是 WPF（Windows Presentation Foundation）之前通过 silverlight 提供的两个主要功能。

我目前正在评估 WPF 和 Silverlight 是否可能在我们公司未来的开发活动中使用，而这个公告让我对这两种 UI 技术的预期方向以及为什么我会选择其中一种感到困惑。

最近有没有人使用 WPF 实现了一个新的应用程序，如果有，是什么促使你做出这个决定？鉴于已宣布对 silverlight 的更改，如果您现在做出决定，您的决定会改变吗？如果没有，为什么？

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-03-20T13:34:35.073

我发现最大的不同是您必须在 Silverlight 应用程序中采用的异步模型。这看起来确实是一个优势（而且它可以是），但它有时确实让生活变得非常困难。

还有一些限制可能是一个真正的挑战，比如缺乏打印支持。

在以下情况下，我会推荐 Silverlight 而不是 WPF：

- 不需要最佳性能（包括图形）

- 可以解决没有打印支持的问题（它会到来，我们只是不知道什么时候）

- 不需要相机/麦克风支持

- 可以容忍异步应用程序/开发模型

- 可以容忍 WCF 的限制（此时不支持 WS-Security）

- 无需在客户端存储大量数据。

- 无需直接与 Office 等客户端应用程序集成。

- 有一个服务器来托管您的应用程序

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-03-20T13:14:01.410

我想说的主要区别是 WPF 要求客户端具有 .Net 3.0+ 框架。Silverlight 只需要运行时。话虽如此，WPF 更适合受控环境，例如 Intranet。Silverlight 适用于公共网络。另一个区别是 Silverlight 是跨平台的（未来的 Windows、Mac、Linux 和跨浏览器）。WPF 仅适用于 Windows。

.Net 框架对于某些用户来说可能是一个巨大的下载。Silverlight 只有 4-5MB。这对于在 Web 上运行您的应用程序有很大的不同，但如果它是您公司的内部应用程序，则不是什么大问题。

Silverlight 是用于 Web 使用的沙盒。因此，如果您的应用需要更多权限，您将需要 WPF。

Silverlight 代码和 WPF 之间也存在一些差异。但据我所知，最终目标是让 Silverlight 在 WPF 内部运行，而代码更改最少。但他们还不在那里。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-03-20T13:21:00.597

我刚刚参与了一个 WPF 项目，事后看来我们可能会选择 SilverLight。了解差异并选择最适合您正在做的事情可能更重要。

这是我关于一些重要差异的十个首发 - 可用控件最初存在一些差异，但现在已基本消除。

银光

*   完全在客户端上运行，通过 AJAX 调用服务器获取数据
*   可以在任何服务器上运行，包括 Windows 和 Linux / Apache
*   使用 COMPACT .NET 框架

WPF

*   在客户端运行...通常调用服务获取数据
*   运行在带有 .NET 3.5 的 Windows XP / Vista 上
*   利用整个 .NET 框架

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-03-20T13:16:42.247

Silverlight 基本上是 WPF 的精简版，以使运行时库下载尽可能小。

因此，WPF 中提供了更多可用功能，而在 WPF 中简单的任务在 Silverlight 中通常变得不那么简单。

如果作为 Web 应用程序运行不是必需的，那么这个决定是不费吹灰之力的 - WPF 一路走来。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-20T13:14:17.680

*   *最近有没有人使用 WPF 实现了一个新的应用程序，如果是这样，是什么促使你做出这个决定*：好吧，因为 WPF 只是桌面（或使用 XBAPS 的基于浏览器 - 但这更像是一个部署系统而不是真正的系统），这是一个很好的理由。
*   “如果你现在做出决定，你的决定会改变吗？如果没有，为什么？” - 没有 Silverlight，即使在 v3 的桌面上，仍然是高度沙盒化的，因此由于沙盒，某些功能将很难/不可能完成。此外，在 WPF 中使用 DirectX 部件的能力仍将提供 Silverlight 和它的 3d 无法使用的另一个优化区域。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-03-20T15:41:42.773

值得注意的是，Silverlight 的 3D 并不是 WPF 的完整 3D 支持，而只是将 2D 投影到 3D 中——即采用 2D 平面并允许在 X、Y 和 Z 方向上旋转。WPF 具有完整的 3D 建模，包括材质、视口、照明和相机位置支持等。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-03-20T15:00:46.957

我正在开发我们的第一个 WPF 应用程序以供发布。Silverlight 3 看起来很棒，但对于这个应用程序，我仍然会选择 WPF。该应用程序围绕呈现和处理托管在我们客户网络上的中央服务器上的大量图像集。此外，软件更新/更改率将最低。从本地驱动器大量导入新图像、没有 Internet 连接要求、性能问题等，使这个项目非常适合 WPF。

然而，我们即将开展的项目之一将需要许多远程用户访问我们网络上的单个数据存储。他们处理的数据需要大量验证和错误处理，因此在本地运行该代码是理想的。他们需要能够在线和离线工作并保持同步（可能与 SQL 数据服务）。SLOOB（Silverlight Out Of the Browser）很可能是我们的选择，因此他们可以拥有 Silverlight 的所有优势，但即使没有 Internet 连接，也可以像定期安装的应用程序一样使用它。

两种格式都有自己的位置：诀窍是避免在任何事情上都使用 Silverlight——我们有更多的工具，而不仅仅是 1 把锤子。:-)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-03-20T18:22:10.390

另一个区别是，使用 SL，您只有一个“窗口”，不能有对话框（可以模拟它们，但它们的大小仅限于主窗口），并且不能添加多显示器支持。

如果您必须与现有的业务应用程序交互（例如，在存档查看器中打开文档），您需要使用 WPF。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-20T13:13:13.270

我最近使用 wpf 构建了几个内部工具，我选择它只是因为它对我来说更容易来自 win32 工作。我真的不认为差异很大，而且真的……我所看到/听到的一切都表明 wpf 和 silverlight 之间的移植非常容易。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-03-22T12:03:22.250

**存储**：浏览器外只有 25MB 的独立存储。如果我从一些 mix09 视频中没记错的话，如果你的应用在浏览器中，这个限制会更低。

[http://bliny.net/blog/post/Out-of-Browser-with-Silverlight-3.aspx](http://bliny.net/blog/post/Out-of-Browser-with-Silverlight-3.aspx)

**没有 FlowDocument**：所以那里也有限制。

# java - 在 Eclipse RCP 编辑器中，处理缺少的必填字段的最佳方法是什么？

> ID：666070
> 
> 赞同：2
> 
> 时间：2009-03-20T13:11:25.787
> 
> 标签：java, eclipse-rcp

在 Eclipse RCP 应用程序上，我正在构建一个编辑器，其中一些字段是必需的。

如果用户在未填写这些字段的情况下保存编辑器，处理此问题的最佳方法/实践是什么？

（我的第一个猜测是如果 doSave() 方法中的这些字段为空，则显示错误对话框，但我不确定这是处理此类问题的“eclipse”方式）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-20T13:16:23.510

如果您考虑一些对话框，例如“创建新的 Java 项目”，

*   在填写一个必填字段（“项目名称”）之前，您根本无法执行任何操作（例如“下一步”或“完成”）
    因此它与检查`doSave()`事件不同。

*   如果该字段无效（例如项目名称已存在），则会在顶部区域中显示警告。

*   如果该字段填写正确，*则*可以保存。

（注意：我知道这不是编辑器，但它可以让你了解 eclipse 中的必填字段管理）

[替代文字 http://ds.informatik.uni-marburg.de/MAGE/gdt/images/tutorial/NewJavaProject.png](http://ds.informatik.uni-marburg.de/MAGE/gdt/images/tutorial/NewJavaProject.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T13:19:18.387

我同意 VonC 并会禁用“保存”按钮，只要用户已提交所有重要字段。显示用户必须填写哪些字段的警告会有很大帮助。

编辑：

创建一个将自己添加为更改侦听器的组件。当有人更改组件时，您可以检查输入是否正确。创建一个包含所有自检组件的窗口，并将该窗口作为侦听器添加到所有组件。

当有人更改组件时，您可以直接检查输入是否有效，用户可以跳到下一页或保存页面。

在 RCP（例如 FieldEditorPreferencePage）中，很多组件都有 doSave() 和 isValid() 方法。在 isValid() 中，您可以检查在窗口中可以找到的所有组件，在 doSave() 中，您可以检查 isValid() 状态，当它没有自动完成时，并执行一些额外的保存操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-29T09:45:37.720

您可以使用 FieldDecorations 标记必填字段并在字段内容不正确时提供视觉反馈。

# c++ - 我需要什么组件来监控我的 PC 上的互联网流量？

> ID：666078
> 
> 赞同：0
> 
> 时间：2009-03-20T13:13:22.770
> 
> 标签：c++, network-programming

我希望能够使用 Windows XP 在我自己的 PC 上查看和监控我的互联网数据 (http/emule/email)。我正在考虑类似 WireShark 的东西，但我想以编程方式控制它。

我会使用 C 或 C++。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-20T13:27:35.777

WireShark 使用 winpcap[来做](http://www.winpcap.org/)这件事。

Winpcap 带有一个[C 接口](http://www.winpcap.org/devel.htm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T16:05:54.460

winpcap 可能是最知名的选择，但您也可以编写分层服务提供程序。没有很多文档，但一个好的起点是 msdn 上的文章：http: [//www.microsoft.com/msj/0599/LayeredService/LayeredService.aspx](http://www.microsoft.com/msj/0599/LayeredService/LayeredService.aspx)

这与第 2 层数据包解析相比有一些优点，但也有一些缺点。您需要评估您想要在堆栈中的哪个位置。

编辑：显然，当我说 pcap 时——我的意思是任何类似的方法。显然，winpcap 并不是第一个提供此类信息的驱动程序/库组合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-20T19:00:23.077

查看工具[trafficWatcher](http://tools.tortoisesvn.net/trafficWatcher)的代码。它使用 WinPCap 来区分 LAN 和 Internet 流量。

源代码可[在此处](http://code.google.com/p/trafficwatcher/source/checkout)获得。

# ios - 圆形 UIButton

> ID：666080
> 
> 赞同：4
> 
> 时间：2009-03-20T13:13:55.623
> 
> 标签：ios, uibutton

我想知道是否可以绘制圆形 UIButton（不是圆形矩形）。

当我在自定义类型的 UIButton 中添加圆形图像时，它看起来像一个圆形按钮。但是在单击按钮的那一刻，按钮的边界变得可见，因此它看起来像一个方形按钮，然后在单击结束时再次看起来像一个圆形按钮。
即使在点击发生的那一刻，我也希望按钮看起来像一个圆形按钮。这可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2011-08-05T09:18:58.393

**测试代码：**

。H

```
 -(void)vijayWithApple; 
```

.m

```
 -(void)vijayWithApple{

            NSLog(@"vijayWithApple Called");
   }

UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];

[button setImage:[UIImage imageNamed:@"Micky.png"] forState:UIControlStateNormal];

[button addTarget:self action:@selector(vijayWithApple) forControlEvents:UIControlEventTouchUpInside];

[button setTitle:@"Show View" forState:UIControlStateNormal];

button.frame = CGRectMake(135.0, 180.0, 40.0, 40.0);//width and height should be same value

button.clipsToBounds = YES;

button.layer.cornerRadius = 20;//half of the width

button.layer.borderColor=[UIColor redColor].CGColor;

button.layer.borderWidth=2.0f;

[self.view addSubview:button]; 
```

**结果**

![在此处输入图像描述](https://i.stack.imgur.com/OOWJm.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-20T22:09:06.570

只需创建两个圆形按钮图像，一个用于按下状态，一个用于未按下状态。

在 IB 中，创建一个自定义类型的 UIButton。转到设置背景图像的部分，然后将带有“全部”的下拉菜单设置为正常 - 现在将图像设置为未按下的图像。

然后将下拉菜单更改为“已选择”，然后放入您按下的图像。

现在将填充类型更改为宽高比，并使按钮为方形。在任何地方用作普通的 UIButton。当然，您也可以通过类似的步骤（为 UIControlStateNormal 和 UIControlStateSelected 设置图像）以编程方式轻松完成所有这些操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-20T13:51:00.743

您可能必须为此创建一个自定义控件，但您真的需要一个圆形按钮吗？

每个平台都有其 UI 约定，iPhone 也不例外。用户希望按钮是圆角矩形。

**更新以回应评论：**

如果我做对了，那么您不是在寻找圆形按钮，而是在寻找可点击（可触摸）的图像。

您可以使用 an`UIImageView`及其`touchesBegan`方法。

**更新 2：**

等一下。我们在谈论什么样的单选按钮？出于某种原因，我以为你是在模仿真正的收音机。如果您在谈论[单选按钮](http://en.wikipedia.org/wiki/Radio_button)组，请使用 a`UISegmentedControl`或 a `UIPicker`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-07-19T04:01:55.540

```
UIButton *but=[UIButton buttonWithType:UIButtonTypeCustom];

but.layer.cornerRadius=50; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-20T14:27:28.287

根据我对 SDK 的了解（诚然，除了书籍/截屏教程中的教程之外，我几乎没有经验），您必须创建自己的控件才能拥有单选按钮。[关于如何在这个问题](https://stackoverflow.com/questions/662646/radio-button-in-iphone-app)中实现它有一些建议。

也就是说，从用户的角度来看，我觉得坚持使用本机控件会更好。iPhone 用户习惯于使用特定控件（即 UITableViews 或 UIPickerViews）进行此类交互。偏离实际通用的 UI 惯例往往会使用户体验更加不和谐。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-22T12:25:37.450

借助本网站在 iPhone 上创建圆形按钮。您可以获得许多自定义控件:)

[http://www.cocoacontrols.com/controls](http://www.cocoacontrols.com/controls)

[http://www.cocoacontrols.com/platforms/ios/controls/uiglossybutton](http://www.cocoacontrols.com/platforms/ios/controls/uiglossybutton)

H@PPY 编码！

谢谢和问候， Gautam Tiwari

# mysql - 在 Ubuntu 8.04 上重新启动 mysql 的更好脚本

> ID：666088
> 
> 赞同：2
> 
> 时间：2009-03-20T13:15:50.830
> 
> 标签：mysql, linux, ubuntu, daemon, init.d

当我`sudo /etc/init.d/mysql restart`在 Ubuntu 8.04.2 上说时，有时会有一个`mysql_safe`进程占用 99% 的 cpu。使机器几乎无法使用。

有没有更好的重启mysql的方法？我想写一个脚本：

```
sudo /etc/init.d/mysql stop
sleep 10
sudo killall mysql_safe
sudo /etc/init.d/mysql start 
```

但这将是一个邪恶的解决方法。（脚本只是一个快速的镜头）

我用谷歌搜索，发现这`mysql_safe`是一个启动的包装脚本`mysqld`，并确保如果它应该死，它会重新启动。所以应该有更好的方法来重启这个东西。

我用谷歌搜索，这是这个 ubuntu 版本中的一个常见问题。Debian / Ubuntu 在这一点上做错了吗？该`/etc/init.d`脚本看起来很复杂，它`mysql_safe`也可以处理，但我的技能不足以完全理解它。但这将是改进的最佳场所。这是我机器上版本的粘贴（未修改）：

```
#!/bin/bash
#
### BEGIN INIT INFO
# Provides:          mysql
# Required-Start:    $remote_fs $syslog mysql-ndb
# Required-Stop:     $remote_fs $syslog mysql-ndb
# Should-Start:      $network $named $time
# Should-Stop:       $network $named $time
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description: Start and stop the mysql database server daemon
# Description:       Controls the main MySQL database server daemon "mysqld"
#                    and its wrapper script "mysqld_safe".
### END INIT INFO
#
set -e
set -u
${DEBIAN_SCRIPT_DEBUG:+ set -v -x}

test -x /usr/sbin/mysqld || exit 0

. /lib/lsb/init-functions

SELF=$(cd $(dirname $0); pwd -P)/$(basename $0)
CONF=/etc/mysql/my.cnf
MYADMIN="/usr/bin/mysqladmin --defaults-file=/etc/mysql/debian.cnf"

# priority can be overriden and "-s" adds output to stderr
ERR_LOGGER="logger -p daemon.err -t /etc/init.d/mysql -i"

# Safeguard (relative paths, core dumps..)
cd /
umask 077

# mysqladmin likes to read /root/.my.cnf. This is usually not what I want
# as many admins e.g. only store a password without a username there and
# so break my scripts.
export HOME=/etc/mysql/

## Fetch a particular option from mysql's invocation.
#
# Usage: void mysqld_get_param option
mysqld_get_param() {
        /usr/sbin/mysqld --print-defaults \
                | tr " " "\n" \
                | grep -- "--$1" \
                | tail -n 1 \
                | cut -d= -f2
}

## Do some sanity checks before even trying to start mysqld.
sanity_checks() {
  # check for config file
  if [ ! -r /etc/mysql/my.cnf ]; then
    log_warning_msg "$0: WARNING: /etc/mysql/my.cnf cannot be read. See README.Debian.gz"
    echo                "WARNING: /etc/mysql/my.cnf cannot be read. See README.Debian.gz" | $ERR_LOGGER
  fi

  # check for diskspace shortage
  datadir=`mysqld_get_param datadir`
  if LC_ALL=C BLOCKSIZE= df --portability $datadir/. | tail -n 1 | awk '{ exit ($4>4096) }'; then
    log_failure_msg "$0: ERROR: The partition with $datadir is too full!"
    echo                "ERROR: The partition with $datadir is too full!" | $ERR_LOGGER
    exit 1
  fi
}

## Checks if there is a server running and if so if it is accessible.
#
# check_alive insists on a pingable server
# check_dead also fails if there is a lost mysqld in the process list
#
# Usage: boolean mysqld_status [check_alive|check_dead] [warn|nowarn]
mysqld_status () {
    ping_output=`$MYADMIN ping 2>&1`; ping_alive=$(( ! $? ))

    ps_alive=0
    pidfile=`mysqld_get_param pid-file`
    if [ -f "$pidfile" ] && ps `cat $pidfile` >/dev/null 2>&1; then ps_alive=1; fi

    if [ "$1" = "check_alive"  -a  $ping_alive = 1 ] ||
       [ "$1" = "check_dead"   -a  $ping_alive = 0  -a  $ps_alive = 0 ]; then
        return 0 # EXIT_SUCCESS
    else
        if [ "$2" = "warn" ]; then
            echo -e "$ps_alive processes alive and '$MYADMIN ping' resulted in\n$ping_output\n" | $ERR_LOGGER -p daemon.debug
        fi
        return 1 # EXIT_FAILURE
    fi
}

#
# main()
#

case "${1:-''}" in
  'start')
        sanity_checks;
        # Start daemon
        log_daemon_msg "Starting MySQL database server" "mysqld"
        if mysqld_status check_alive nowarn; then
           log_progress_msg "already running"
           log_end_msg 0
        else
            /usr/bin/mysqld_safe > /dev/null 2>&1 &
            # 6s was reported in #352070 to be too few when using ndbcluster
            for i in 1 2 3 4 5 6 7 8 9 10 11 12 13 14; do
                sleep 1
                if mysqld_status check_alive nowarn ; then break; fi
                log_progress_msg "."
            done
            if mysqld_status check_alive warn; then
                log_end_msg 0
                # Now start mysqlcheck or whatever the admin wants.
                output=$(/etc/mysql/debian-start)
                [ -n "$output" ] && log_action_msg "$output"
            else
                log_end_msg 1
                log_failure_msg "Please take a look at the syslog"
            fi
        fi

        # Some warnings
        if $MYADMIN variables | egrep -q have_bdb.*YES; then
            echo "BerkeleyDB is obsolete, see /usr/share/doc/mysql-server-5.0/README.Debian.gz" | $ERR_LOGGER -p daemon.info
        fi
        if [ -f /etc/mysql/debian-log-rotate.conf ]; then
            echo "/etc/mysql/debian-log-rotate.conf is obsolete, see /usr/share/doc/mysql-server-5.0/NEWS.Debian.gz" | $ERR_L
        fi
        ;;

  'stop')
        # * As a passwordless mysqladmin (e.g. via ~/.my.cnf) must be possible
        # at least for cron, we can rely on it here, too. (although we have
        # to specify it explicit as e.g. sudo environments points to the normal
        # users home and not /root)
        log_daemon_msg "Stopping MySQL database server" "mysqld"
        if ! mysqld_status check_dead nowarn; then
          set +e
          shutdown_out=`$MYADMIN shutdown 2>&1`; r=$?
          set -e
          if [ "$r" -ne 0 ]; then
            log_end_msg 1
            [ "$VERBOSE" != "no" ] && log_failure_msg "Error: $shutdown_out"
            log_daemon_msg "Killing MySQL database server by signal" "mysqld"
            killall -15 mysqld
            server_down=
            for i in 1 2 3 4 5 6 7 8 9 10; do
              sleep 1
              if mysqld_status check_dead nowarn; then server_down=1; break; fi
            done
          if test -z "$server_down"; then killall -9 mysqld; fi
          fi
        fi

        if ! mysqld_status check_dead warn; then
          log_end_msg 1
          log_failure_msg "Please stop MySQL manually and read /usr/share/doc/mysql-server-5.0/README.Debian.gz!"
          exit -1
        else
          log_end_msg 0
        fi
        ;;

  'restart')
        set +e; $SELF stop; set -e
        $SELF start
        ;;

  'reload'|'force-reload')
        log_daemon_msg "Reloading MySQL database server" "mysqld"
        $MYADMIN reload
        log_end_msg 0
        ;;

  'status')
        if mysqld_status check_alive nowarn; then
          log_action_msg "$($MYADMIN version)"
        else
          log_action_msg "MySQL is stopped."
          exit 3
        fi
        ;;

  *)
        echo "Usage: $SELF start|stop|restart|reload|force-reload|status"
        exit 1
        ;;
esac 
```

我发现了很多提示，但我希望这可以解决生产服务器的一定程度的可靠性。

**编辑**：这似乎正是[这个未解决的错误](https://bugs.launchpad.net/ubuntu/+source/mysql-dfsg-5.0/+bug/105457)。

也许是[来自 MySQL 站点的这个错误](http://bugs.mysql.com/bug.php?id=36550)。

[这](http://forum.slicehost.com/comments.php?DiscussionID=1000)似乎相关或相同。

有些人谈论具有 2 个实例的竞争条件`mysql_safe`。其他人建议注释掉启动脚本中的健全性检查。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-20T13:26:08.620

我会尝试找出导致 CPU 问题的原因，而不是研究如何重新编写启动脚本。启动脚本是相当标准的，应该在生产环境中运行良好。

# innovation - 贵公司对（技术）“创新”的立场是什么？

> ID：666090
> 
> 赞同：9
> 
> 时间：2009-03-20T13:16:07.083
> 
> 标签：innovation

.NET 3.5、.NET 4.0、WPF、Silverlight、ASP.NET MVC - 这些天真的有很多新的微软技术发布/即将试用。（我给出的例子都是微软的技术，但这可以适用于任何语言或平台）。我很好奇你工作的公司是如何处理这个问题的。几个例子：

*   您是否有决定公司使用什么技术的 CTO？
*   开发团队可以自由选择他们使用的技术吗？例如：框架版本，经典的 ASP.NET vs ASP.NET MVC，ADO.NET Entity Framework vs Linq2Sql 还是 NHibernate？还是这些的混合？
*   您所在的公司尝试了哪些新技术，*为什么*？
*   您的公司是否有专门的资源（时间）来尝试 WPF 或任何技术，只是为了研究，或者您是否在业余时间尝试并尝试将它们介绍给您的公司？

这些只是让我的问题更清楚的例子。总而言之，我想知道这个过程是什么样的，谁负责，谁做决定。贵公司是跟风，还是不愿意尝试新技术？您对这种情况感到满意吗？

在我工作的公司，我们仍然使用 .NET 2.0（尽管我们现在正在慢慢切换到 .NET 3.5），还没有认真研究过 ASP.NET MVC，根本没有尝试过 WPF，等等。而且，有些人发现很难说服人们这样做。否则是否公平？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-20T13:20:02.800

在我的公司，我们有一个架构小组来确定使用哪些技术。欢迎人们阅读替代技术并提出建议，但归根结底，是架构小组做出决定。

虽然这看起来有限制，但它确实确保所有开发组都使用相同或相似的技术，并且从一个组转移到下一个组相当容易。同样，通过让一个小组完成所有研究，您可以确保您不会因为让多个小组重复研究工作而浪费时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-20T13:18:50.603

由于我在这么小的公司工作，而且我通常要么是唯一的开发人员，要么是一个非常小的团队中的首席开发人员，我通常可以说服我的老板使用我认为最适合给定项目/情况的任何东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-20T13:35:34.247

对于公司内部的主要和关键项目，我们坚持我们所知道的。

对于出现的任何新的“迷你”项目，我们都会在学习曲线上尝试并尽可能使用最新技术构建它们。

这使我们能够快速了解​​这些事情，然后在我们认为合适的情况下在我们的主要项目中舒适安全地使用这些技术。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-20T13:23:19.720

[我工作](http://www.bbd.co.za)的地方有一个架构师团队，他们从高层次研究技术，并向各个实际团队提出建议。架构师团队的一个子集实际上将技术和实验用于它们并从产品中取出

*   内部 1 小时概述会议
*   为期一周的新兵训练营
*   白皮书/海报

技术越重要，产生的清单就越多。所有这些只是提供给团队，结合客户对技术的要求，实际上决定了该团队应该使用什么。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-20T14:13:18.087

我对这个问题有一个混合的答案。在我工作的地方，较低级别的技术经理通常是选择某种技术的人，有时甚至开发人员也有尝试新事物的自由。例如，当我在一个网站上工作时，我真的很想了解 JavaScript 的 Prototype。我向我的老板提出了这个案子，他首先不情愿，因为没有其他人知道它或以前没有使用过它，但还是让我继续。能够学习 Prototype 并利用它的许多内置功能对我来说很棒。其他更大的项目来自更高的管理层，我们真的没有太多选择。现在，我的公司正在采用 SAP，所以一切都在朝着这个方向发展。我不一定想成为 SAP 专家，但如果我想留在这里，我

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-17T04:34:07.533

每家公司都有自己的创新步伐，这首先取决于管理者的舒适度，其次取决于是否有人真正致力于研究和提出使用新事物的工作。当经理们开始感到不舒服时，创新就会放慢或停止，直到他们再次感到舒适为止。一些他们永远不会适应的创新。

牢记这一点，我不确定如何回答您的问题，即期待更多创新是否公平。当然，你想要更多是合理的；同样，一旦你达到了组织的创新速度限制，它就不太可能改变，如果改变，可能需要很长很长的时间。

过去，不同的经理给了我很大的自由来改变事情，我利用了它。我也经常遇到极限，最后通过创办自己的公司来解决我的挫败感。（这可能被认为是一种有点激进的措施；当然，这样做会减少您研究和开发您创办公司时所需要的时间。）

这些天来，我在 Haskell 中开发了相当重要的应用程序，我很高兴作为一拳。一年后，我开始掌握它的窍门，而且我肯定还有几年的时间来学习我可以用我现在拥有的工具做什么。

我想我的回答总结是：如果你想比周围的人创新更多，你需要改变你的同行群体。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-20T13:31:13.897

我认为任何为了新技术而尝试新技术的公司，因为它的前沿和“创新”是疯狂的。有一个正式的“让我们玩新技术来试用它的部门”简直是疯了……除非他们从事为其他企业提供技术咨询的业务。

对于其他所有人来说，技术可以帮助企业完成工作。不要帮助开发人员在他们的简历上加上听起来很酷的 TLA。

我现在工作的公司很大，有一个选择“战略平台”的 CTO。但我不得不说，如果你能选择一种技术，他们可能正在使用它。他们太大了，无法用公司的大棒击败所有人，但他们尝试了。如果该技术将在项目中发挥作用并按时引入，那么它就会被使用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-20T13:56:39.827

我们的产品需要可靠且经过验证的平台。而且，我们不需要任何花哨的东西。因此，我们可能会在 5 到 10 年左右之后选择 .NET，希望到那时它已经准备好。另一方面，Java 已经足够成熟，所以我们将它与 C++ 和一些 Jython 脚本一起使用。这些决定几乎是自主的（我们是一家小商店）。

我并不是要嘲笑最前沿的开发人员，但您是否需要可靠或最新功能显然取决于您正在从事的工作。许多科学家仍然乐于使用 Fortran 77。

# language-agnostic - 是否可以在不实际开发的情况下出售软件创意？

> ID：666095
> 
> 赞同：13
> 
> 时间：2009-03-20T13:16:55.100
> 
> 标签：language-agnostic

和其他许多人一样，我也有自己的灵感时刻——其中大部分都很糟糕，有几颗钻石未加工。是否有可能与利益相关者或企业家一起将这些钻石货币化，而无需实际负责开发和技术？您可以推荐的任何途径将不胜感激。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-03-20T15:15:34.490

是的，这是可能的，但您也应该考虑这一点：

[从变得真实](http://gettingreal.37signals.com/ch06_Done.php)

> *   糟糕的想法 = -1
> *   弱点子 = 1
> *   马马虎虎的想法 = 5
> *   好主意 = 10
> *   好主意 = 15
> *   好主意 = 20
>     
>     
> *   不执行 = $1
>     
>     
> *   弱执行 = 1000 美元
> *   马马虎虎的执行 = 10,000 美元
> *   良好的执行 = 100,000 美元
> *   出色的执行力 = 1,000,000 美元
> *   出色的执行力 = 10,000,000 美元
> 
> 要开展业务，您需要将两者相乘。
> 
> 最出色的想法，没有执行，价值 20 美元。最出色的想法需要出色的执行才能价值 20,000,000 美元。
> 
> 这就是为什么我不想听到人们的想法。在我看到他们的执行之前我不感兴趣。

不过，我认为可以起草一份草案并炫耀它以达成交易。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2009-03-20T13:21:08.023

这是可能的，但请考虑一下：一个未开发的想法到底有多少价值？您不是唯一一个拥有无法实施的好想法的人。

话虽如此，如果您真的认为它是新的和原创的，您不妨利用损坏的系统来发挥自己的优势，并考虑申请专利。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2009-03-20T13:53:59.350

**想法是一毛钱。**

让他们走出大门才是真正的工作所在。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-03-20T13:27:06.513

新产品不仅仅是一个想法和软件开发。坦率地说，这是最简单的两个部分。营销您的产品并让人们真正购买它 - 这是最难的部分！

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-03-20T13:21:09.537

取决于想法的性质，但如果你只有一个想法，但没有工作，你就不太可能找到愿意付给你一笔可观金额的买家。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-03-20T14:05:24.003

不。

每个人都有想法。他们是一角钱。不到一毛钱一打。

没有实施的想法是无用的。没有人做任何工作，你既不能得到，也不值得得到任何钱。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-03-20T13:23:43.773

创业，获得商业贷款以尽早为您的业务提供资金。付钱让人们为你开发所说的想法。一旦你有了早期的原型，你就可以开始寻找外部资金并尝试从你的初始投资中获得回报。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-03-20T13:47:31.797

可以出售未开发的想法，但几乎不可能保护它。考虑到这一点，无论您做什么，竞争对手都在寻找快速解决方案。

在市场中保护利基市场的唯一真正方法是做到最好，以保证复制您的产品将是浪费金钱，因为相比之下，由于您在开发产品方面处于领先地位，因此它会相形见绌.

简而言之，如果你不能在你的想法上做到最好，它就会被复制，你就会被击败。

所以，

当且仅当您有足够的说服力（或疯狂）找到能够有竞争力地产生您的想法的人时，您才能将想法货币化。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-03-20T13:36:37.270

一般来说，我会说不。投资者至少会希望看到原型。

如果您的想法是可行的并且您愿意做一些工作，那么您可能可以接受您的想法并将其作为咨询服务出售给公司。您可以构建协议以保留对您的软件的权利。我以前做过这样的项目。

当然，你总是可以建造一台时间机器，然后回到 1995 年，在那里你可以在没有建造任何东西的情况下出售想法。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-03-20T14:32:53.547

你说你有潜在的赚钱想法，在灵感的时刻，而且大多数都是坏的。我怀疑我们大多数人都是这样的。

你如何分辨哪些想法是坏的，哪些是好的？如果不尝试它们，通常是不可能做到的。如果你愿意出去做一个，你至少表明你对那个有信心。如果你不愿意，我凭什么对你的想法有信心？给我一些理由相信某人（也许是你）认为这是个好主意。（或者，你可以尝试申请专利，我上次听说在美国花了大约一万美元或更多，但这也可能让我反对这个想法。）

您如何处理我可能有相同想法但出于某种原因没有追求它的情况？如果我实施我独立提出的想法，我对给你钱不感兴趣。如果你告诉我这个想法，我总是可以（诚实地或以其他方式）声称我也有它。除非我得到一些东西，否则我对签署任何限制我未来行动的东西（比如从企业中获利而不削减你的能力）不感兴趣。如果我创业并且您认为这是出于您的想法，我也不会对将自己置于诉讼的十字路口感兴趣。我没有商业理由听你的想法，除非我已经有信心它会对我有利可图，请参阅上面的段落。

每个人都有想法。我有想法。你有想法。当我可以选择我自己的想法时，我为什么要选择一个可以让你分得一杯羹的想法？当然，我可能高估了我自己想法的价值，但你也可能如此。

你会看到人们没有特别好的理由赚了很多钱，一个作家清理了一本不太好的书，一个金融分析师在他的公司破产的同时获得了数百万美元，诸如此类。你看不到的是，那些人投入了大量时间和工作来进入那个位置，在那里他们可以不公平地获利。如果你愿意付出这种努力，也许你也可以获得不应有的利润。

所以，如果你有一个可能价值数百万的想法，那就开始吧。不要试图在没有东西展示的情况下从中获利，最好是展示优势而不泄露整个想法的东西。这表明至少有一个人对这个想法有一定的信心。它使您处于领先地位，即使只是轻微的，也表明您可能是坚持这个想法的合乎逻辑的人。它使您可以讨论利用它的可能方法，而不会泄露全部内容。它可以让我挽回面子；与其承认你有比我更好的想法，它允许我在有形的东西的基础上资助你。（永远不要指望有人仅仅因为比他们聪明而付钱给你。如果你是，他们不会愿意承认的。如果不是，那么，他们为什么要付钱给你？）

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2009-03-20T15:09:52.163

我经营着一家小型软件商店，在过去的 20 年里，有几十个人向我提出想法。大多数用户很高兴看到他们的想法实现了。有些人确信，正如你所表现的那样，他们拥有“下一件大事”，只需要一个程序员来让它工作。一个人实际上给我发了一份“保密”协议，从本质上讲，在签署 NDA 后，他将永远拥有我在我们领域开发的*所有东西。*他的“逻辑”是，他的想法*太棒*了，我听到后想到的任何东西都会被他的光彩染上颜色！显然，我把它扔掉了，他就变得默默无闻了。

我的看法是，想法是免费的。如果你没有足够的资金或主动性将你的想法变成一个真正的产品，甚至只是一个原型，那么你根本就没有任何人需要荣誉。如果这听起来很苛刻，我深表歉意，但我只是在这太久了，无法接受这样的主张，即从事实际工作的人应该对那些只是自由结社的人负任何责任。

如果您*确实*努力使这个想法成为现实，*那么*您应该在适用的范围内获得版权和专利法的全面保护。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-03-20T13:46:52.173

第一：你应该和你认识的在那个技术领域很擅长的人讨论你的想法。他们会告诉你 1\. 产品是否值得 2\. 市场上已经没有类似的产品了。

然后，您可以尝试风险投资家进行市场分析。在那里，您可能必须证明为什么您不想开发产品但想要预付资金。

有些人会购买这个想法，但如果至少没有原型，机会就很小。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-03-20T14:43:59.090

天才是 99% 的汗水和 1% 的灵感。 - 托马斯·爱迪生

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-03-20T14:50:29.930

如果你没有时间发展你的想法，你可能不得不满足于将它提供给他人并看着它蓬勃发展。或者，成立一家公司，聘请 CTO 和 CEO，然后卸载实施工作。然后，您可能只需要对公司的一小部分感到满意​​。

教授们无时无刻不在向“学生创业者”发表自己的想法，试图让他们积极开展实施工作。教授们共同创立公司，然后为公司提供咨询。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2009-03-20T15:25:51.813

是的，可以出售想法。但在此之前，如果您的想法已经实施或已被其他人窃取，请在 Google 上搜索。这是一个有着共同思想的巨大世界。每次谷歌通过展示我（所谓的独特）想法的结果数量让我失望。但继续努力，你可能是天才。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-03-20T13:40:35.667

让自己成为一个销售“蒸汽软件”没有问题的销售人员。

然后，当他卖掉它的一个版本时，就疯狂地编写代码来完成它。

可能是不道德的，但如果你能成功，它会启动并快速运行。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-03-20T15:00:10.047

你怎么知道这是个好主意？评估您的想法，评估它将在其中发挥作用的市场，确定可以实施该想法的专家或人才，制定粗略的营销计划或启动计划，进行一些蓝天收入猜测，并找出实现该想法的下一个最小步骤（即种植你的第一个里程碑）。

现在在朋友和商界人士要求评估的情况下反弹所有这些。把它带到您当地的小型企业开发中心，看看他们是否有可以见到的顾问（大多数都有某种类型的退休高管网络）。

如果（如果）你有能力实现这个想法，那么你可能会获得天使轮融资、商业贷款或一群愿意为股权出汗的兴奋志愿者。对于一些投资者来说，第一个里程碑是关键——“资助我到现在，然后我们会坐下来看看我们有什么并重新评估，并希望决定继续资助。”

想法很便宜。实施需要金钱、时间，尤其是努力。努力才是有价值的。

如果您只想记下您的想法并出售它们，只需写一本想法书。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2009-10-30T05:29:49.497

***如果你的想法很棒的话，***我可能会买下它。
对我来说***缺乏想法是问题，我会支持它的执行（当然是在评估之后）。

在这里没有达成交易，但初创公司将无法为这个想法买单，相反，当他们开始实施你的想法时，他们可以让你成为联合创始人、利益相关者或类似的人。

# loadrunner - LoadRunner 9.1 是否支持 WPF？

> ID：666098
> 
> 赞同：0
> 
> 时间：2009-03-20T13:17:45.113
> 
> 标签：loadrunner, mscorlib

我有 POC 测试来明确 LoadRunner 是否支持 WPF？现在它可以运行 POC 思想业务，但它与位于 mscorlib.dll 中的某些类型有错误。

我想知道如何将 mscorlib.dll 的引用添加到 LoadRunner？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-03-15T12:20:46.367

lr_load_dll() 用于加载您的 DLL。确保它在客户端级别是线程安全的以供多次使用。

第二个问题，WPF。查看 VUGEN 用户指南的高级部分，特别是关于在 Visual Studio 中使用 C/C++ 或 VB 构建虚拟用户的部分。即使您的特定通信变体不受支持，您通常也可以在 DLL 风格的虚拟用户中利用您的源代码来完成工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-19T03:16:36.710

在使用 HP 进行 POC 之后，LoadRunner 9.1 不支持 WPF 和 .NET 3.5 功能的某些方面。

# crystal-reports - 水晶报表上的行和列标题

> ID：666106
> 
> 赞同：0
> 
> 时间：2009-03-20T13:19:19.433
> 
> 标签：crystal-reports

我用的是水晶报表2008版。

在向下滚动数据时，我需要列标题保持在顶部。列标题出现在页眉部分。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-20T14:05:07.263

我不相信这在 CR 中是可能的。您可能需要做的是将报告导出到 Excel，以便您可以在那里冻结标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-20T20:09:03.910

为什么不添加一个组，一些无害的东西，并在“更改组”对话框中标记“在每页上重复页眉”。

# html - 在 Firefox 中看起来不错但在 IE 中看起来不错的表格

> ID：666107
> 
> 赞同：0
> 
> 时间：2009-03-20T13:19:26.623
> 
> 标签：html, css, cross-browser, html-table

第一次在这里提问。

我有一个围绕桌子建立的网站，我知道不好，但它已经完成了。它在 Firefox 中看起来不错，但在 IE 中到处都是文本。

链接是[http://www.mothershipinc.com](http://www.mothershipinc.com) **警告：**包含音乐

这是索引页面的代码：

```
<?php
include "db.php";

function imageResize($width, $height, $target) {

    //takes the larger size of the width and height and applies the formula accordingly...this is so this script will work dynamically with any size image
    if ($width > $height) {
    $percentage = ($target / $width);
    } else {
    $percentage = ($target / $height);
    }

    //gets the new value and applies the percentage, then rounds the value
    $width = round($width * $percentage);
    $height = round($height * $percentage);

    //returns the new sizes in html image tag format...this is so you can plug this function inside an image tag and just get the
    return "width=\"$width\" height=\"50\"";
}

function imageResize150($width, $height, $target) {

    //takes the larger size of the width and height and applies the formula accordingly...this is so this script will work dynamically with any size image
    if ($width > $height) {
    $percentage = ($target / $width);
    } else {
    $percentage = ($target / $height);
    }

    //gets the new value and applies the percentage, then rounds the value
    $width = round($width * $percentage);
    $height = round($height * $percentage);

    //returns the new sizes in html image tag format...this is so you can plug this function inside an image tag and just get the
    return "width=\"150\" height=\"$height\"";
}

$playerSQL = "SELECT * FROM main";
$playerResult = mysql_query($playerSQL) or die(mysql_error());
$playerRS = mysql_fetch_array($playerResult);

?>

<html>
<head>
<link rel="stylesheet" href="css/template.css" type="text/css" />
<?php include "fadeinscript2.php"; ?>
<?php include "fadeinscript.php"; ?>
</head>
<body id="page_bg">
<div align="center">
   <table width="800" height="100%" border="0">
     <tr>
    <td colspan="7" valign="bottom" align="right" height="80" background="images/header.gif" style="background-repeat:no-repeat;padding-bottom:5px;padding-right:20px;">
         <font style="font-size:12px;" color="#ffffff"><a href="index.php" style="text-decoration:none;font-size:12px;color:#ffffff;">Home</a> | <a href="artist.php?artistid=0" style="text-decoration:none;font-size:12px;color:#ffffff;">Artists</a></font>
       </td>
     </tr>
     <tr>
       <td colspan="7">
       </td>
     </tr>
     <tr>
       <td colspan="7">
       </td>
     </tr>
     <tr>
<!--BEGIN CURRENT RELEASES BLOCK-->
       <td valign="top" width="189" height="280" background="images/small_home_box.gif" style="background-repeat:no-repeat;padding-top:8px;">
      <table width="100%">
        <tr>
        <td align="left" colspan="2">
          <font style="font-size: 18px" color="#ffffff">Current Releases</h1><br />
        </td>
        </tr>
       <?php
        $crQuery = "SELECT * FROM albums WHERE currentrelease='y' ORDER BY orderfield LIMIT 4";
        $crResult = mysql_query($crQuery) or die(mysql_error());
        while ($crRS = mysql_fetch_array($crResult))
        {
          // Get Artist Name
          $artistQuery = "SELECT * FROM artists WHERE id=" . $crRS['artistid'];
          $artistResult = mysql_query($artistQuery) or die(mysql_error());
          $artistRS = mysql_fetch_array($artistResult);
          $image_location = $crRS['image_location'];
          echo "<tr>";
          echo "<td width='55' valign='top' style='padding-top:3px;'>";
              //Display profile image
              //$myimage = getimagesize("albums/" . $image_location);
              //$newsize = imageResize($myimage[0], $myimage[1], 50);
              echo "<a href='artist.php?artistid=" . $artistRS['id'] . "' target='_self'><img src='albums/" . $image_location . "' height='50' width='50' border='0'></a>";     
          echo "</td>";
          echo "<td align='left' valign='top'>";
          echo "<font style='color:#ffffff;font-size:.7em;'>";
          echo "<b><a href='artist.php?artistid=" . $artistRS['id'] . "' target='_self' style='text-decoration:none;color:#ffffff;'>" . stripslashes($artistRS['artist_name']) . "</a></b><br />";
          echo "<a href='artist.php?artistid=" . $artistRS['id'] . "' target='_self' style='text-decoration:none;color:#ffffff;'>" . stripslashes($crRS['album_name']) . "</a>";
          echo "</td>";
          echo "</tr>";
        }
       ?>
        <tr>
          <td colspan="2" align="right" style="font-size:.7em; color:#ffffff;padding-right:12px;">
            more current releases
          </td>
        </tr>
         </table>   
       </td>
<!--END CURRENT RELEASES BLOCK-->
       <td width="25" valign="top">
         &nbsp;
       </td>
<!--BEGIN FLASH BLOCK-->
       <td colspan="3" width="374" height="280" align="center" valign="middle" background="images/big_home_box.gif" style="background-repeat:no-repeat;padding-right:8px;">
             <script type="text/javascript">
            //new fadeshow(IMAGES_ARRAY_NAME, slideshow_width, slideshow_height, borderwidth, delay, pause (0=no, 1=yes), optionalRandomOrder)
            new fadeshow(fadeimages, 350, 250, 0, 3000, 1, "R")
          </script>
       </td>
<!--END FLASH BLOCK-->
    <td width="10" valign="top">
         &nbsp;
       </td>
<!--BEGIN APPEARANCES BOX-->
    <td valign="top" width="189" height="280" background="images/small_home_box.gif" style="background-repeat:no-repeat;padding-top:8px;">
      <table width="100%">
        <tr>
        <td align="left" colspan="2">
          <font style="font-size: 18px" color="#ffffff">Shows</h1><br />
        </td>
        </tr>
        <?php
        $crQuery = "SELECT * FROM appearances";
        $crResult = mysql_query($crQuery) or die(mysql_error());
        $crRS = mysql_fetch_array($crResult);
          echo "<tr>";
          echo "<td width='55' valign='top' style='padding-top:3px;'>";
          echo "<font style='color:#ffffff;font-size:.7em;'>";
          echo ereg_replace("(\r\n\r\n|\n\n|\r\r)", "<br /><br />", substr($crRS['shows'],0,300));
          echo "</font>\n";
          echo "</td>";
          echo "</tr>"; 
       ?>
        <tr>
          <td colspan="2" align="right" style="font-size:.7em; color:#ffffff;padding-right:12px;">
            &nbsp;
          </td>
        </tr>
         </table>   
       </td>
<!--END APPEARANCES BOX-->
    </tr>
         <tr>
<!--BEGIN UPCOMING RELEASES BLOCK-->
       <td valign="top" width="189" height="367" background="images/tall_home_box.gif" style="background-repeat:no-repeat;padding-top:8px;">
      <table width="100%">
        <tr>
        <td align="left" colspan="2">
          <font style="font-size: 18px" color="#ffffff">Upcoming Releases</h1><br />
        </td>
        </tr>
        <?php
        $crQuery = "SELECT * FROM albums WHERE newrelease='y' ORDER BY orderfield LIMIT 4";
        $crResult = mysql_query($crQuery) or die(mysql_error());
        while ($crRS = mysql_fetch_array($crResult))
        {
          // Get Artist Name
          $artistQuery = "SELECT * FROM artists WHERE id=" . $crRS['artistid'];
          $artistResult = mysql_query($artistQuery) or die(mysql_error());
          $artistRS = mysql_fetch_array($artistResult);
          echo "<tr>";
          echo "<td width='55' valign='top' style='padding-top:3px;'>";
              //Display profile image
              //$myimage = getimagesize("albums/" . $crRS['image_location']);
              //$newsize = imageResize($myimage[0], $myimage[1], 50);
              echo "<a href='artist.php?artistid=" . $artistRS['id'] . "' target='_blank'><img src='albums/" . $crRS['image_location'] . "' height='50' width='50' border='0'></a>";     
          echo "</td>";
          echo "<td align='left' valign='top'>";
          echo "<font style='color:#ffffff;font-size:.7em;'>";
          echo "<b><a href='artist.php?artistid=" . $artistRS['id'] . "' target='_blank' style='text-decoration:none;color:#ffffff;'>" . $artistRS['artist_name'] . "</a></b><br />";
          echo "<a href='artist.php?artistid=" . $artistRS['id'] . "' target='_blank' style='text-decoration:none;color:#ffffff;'>" . $crRS['album_name'] . "</a><br />";
          echo "<a href='artist.php?artistid=" . $artistRS['id'] . "' target='_blank' style='text-decoration:none;color:#ffffff;'>" . $crRS['release_date'] . "</a>";
          echo "</td>";
          echo "</tr>";
        }
       ?>
        <tr>
          <td colspan="2" align="right" style="font-size:.7em; color:#ffffff;padding-right:12px;">
            &nbsp;
          </td>
        </tr>
         </table>   
       </td>
<!--END UPCOMING RELEASES BLOCK-->
<!--BEGIN PLAYER BLOCK-->
     <td colspan="5" valign="top" width="418" height="367">
      <table width="100%">
        <tr>
          <td align="center">
            <?php
            echo stripslashes($playerRS['playercode']);
        ?>  
          </td> 
        </tr>
         </table>       
    </td>
<!--END PLAYER BLOCK-->
<!--BEGIN NEWS BOX-->
    <td valign="top" width="189" height="367" background="images/tall_home_box.gif" style="background-repeat:no-repeat;padding-top:8px;">
      <table width="100%">
        <tr>
        <td align="left" colspan="2">
          <font style="font-size: 18px" color="#ffffff">News</h1><br />
        </td>
        </tr>
        <?php
        $crQuery = "SELECT * FROM news";
        $crResult = mysql_query($crQuery) or die(mysql_error());
        $crRS = mysql_fetch_array($crResult);
          echo "<tr>";
          echo "<td width='55' valign='top' style='padding-top:3px;'>";
          echo "<font style='color:#ffffff;font-size:.7em;'>";
          echo ereg_replace("(\r\n\r\n|\n\n|\r\r)", "<br /><br />", substr($crRS['news'],0,500));
          echo "</font>\n";
          echo "</td>";
          echo "</tr>"; 
       ?>
        <tr>
          <td colspan="2" align="right" style="font-size:.7em; color:#ffffff;padding-right:12px;">
            more news
          </td>
        </tr>
         </table>   
       </td>
<!--END APPEARANCES BOX-->
    </tr>
    <tr>
<!--BEGIN ARTISTS BOX-->
    <td colspan="7" width="800" height="300" align="center" valign="top" background="images/artists.gif" style="background-repeat:no-repeat;padding-top:8px; padding-right:4px; padding-left:4px;">
      <table width="100%">
        <tr>
        <td align="left" colspan="2">
          <font style="font-size: 18px" color="#ffffff">Artists</font><br />
        </td>
        </tr>
        <tr>
        <?php
        $crQuery = "SELECT * FROM artists ORDER BY orderfield LIMIT 36";
        $crResult = mysql_query($crQuery) or die(mysql_error());
        $artists = 0;
        $totalartists = mysql_num_rows($crResult);
        while ($crRS = mysql_fetch_array($crResult))
        {
          $artists = $artists + 1;
          echo "<td width='100' align='center' valign='top' style='padding-top:3px;'>\n";
              //Display profile image
              echo "<a href='artist.php?artistid=" . $crRS['id'] . "' target='_self'><img src='artists/" . $crRS['image_location'] . "' height='75' width='75' border='0'></a><br />\n"; 
              echo "<a href='artist.php?artistid=" . $crRS['id'] . "' target='_self' style='text-decoration:none;color:#ffffff;font-size:.7em;'>" . $crRS['artist_name'] . "</a>\n";
          echo "</td>\n";
          if($artists == 8 || $artists == 16 || $artists == 24)
          {
            echo "</tr>\n";
            echo "<tr>\n";
          }
        }
       ?>
        </tr>
        <tr>
          <td colspan="6" align="right" style="font-size:.7em; color:#ffffff;padding-right:12px;">
            <a href="artist.php?artistid=0" style='text-decoration:none;color:#ffffff;font-size:.7em;'>more artists</a>
          </td>
        </tr>
         </table>       
     </td>
<!--END ARTISTS BOX-->
    </tr>       
    <tr>
        <td colspan="4" align="left" style="padding-left:15px;color:#ffffff;font-size:.75em;">
            Copyright &copy;2009 Mothership Inc.
        </td>
        <td colspan="3" align="right" style="padding-right:15px;">
            <a href="mailto:kevin@mothershipinc.com" style="color:#ffffff;text-decoration:none;font-size:.75em;">Contact Us</a>
        </td>
    </tr>   
   </table>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-20T13:30:24.570

考虑以下代码块：

```
<td valign="top" width="189" height="280" background="images/small_home_box.gif" style="background-repeat:no-repeat;padding-top:8px;">
      <table width="100%">
        <tr>
        <td align="left" colspan="2">
          <font style="font-size: 18px" color="#ffffff">Shows</h1><br />
        </td>
        </tr>
        <tr><td width='55' valign='top' style='padding-top:3px;'><font style='color:#ffffff;font-size:.7em;'>PASADENA<br /><br />Mar 17 2009 8:00P 
 Nabbs Creek Cafe Pasadena, Maryland <br /><br />Mar 19 2009 8:00P 
 thew barn with 86 the effort Carney, Maryland <br /><br />Mar 20 2009 8:00P 
 whiskey bar w/ b&b Hoboken, New Jersey <br /><br />Mar 21 2009 9:00P 
 Red House Tavern w/ Bond & bentley,Tsunami Rising! Baltimore, Maryland </font>
</td></tr> 
```

您有宽度为 189 的父 td，但内容的子 td 仅大 55。这就是您的文本消失的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T13:43:59.840

使用分区而不是表格创建该布局确实不会令人难以置信的痛苦。

不过，您仍然需要牢记以下几点。

旧版本的 IE 不支持 min-width，Firefox 中的宽度不包括边框和填充，在 IE6 中，边框和填充在宽度内。示例 - 具有 10 像素填充的 100 像素框在 FF 中为 120 像素宽，在 IE6 中为 100 像素宽。

```
<div style="width: 800px; height: 80px; margin: 5px auto; background-color: Aqua;">
    <h2>Mothership Records Banner</h2>
</div>
<div style="width: 800px; margin: 10px auto; clear: both;">
    <div style="width: 178px; margin-right: 35px; float: left; background-color: Aqua;">Current Releases</div>
    <div style="width: 374px; margin-right: 35px; float: left; background-color: Aqua;">Image Banner Thing</div>
    <div style="width: 178px; float: left; background-color: Aqua;">Shows</div>
</div>
<div style="width: 800px; margin: 10px auto; clear: both;">
    <div style="width: 178px; margin-right: 35px; float: left; background-color: Aqua;">Upcoming Releases</div>
    <div style="width: 374px; margin-right: 35px; float: left; background-color: Aqua;">Player</div>
    <div style="width: 178px; float: left; background-color: Aqua;">News</div>
</div>
<div style="width: 800px; margin: 10px auto; clear: both; background-color: Aqua;">
    Artists
</div>
<div style="width: 800px; margin: 10px auto; clear: both;">
    Copyright
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-20T14:49:37.063

您可以通过在输出任何 HTML 之前声明 doctype strict 来强制大多数浏览器呈现（几乎）相同：

`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">`

doctype 告诉浏览器在呈现页面样式时要遵循哪些规则，而严格模式的 doctype 在我的经验中跨浏览器的相似度最高。

[Quirksmode对](http://www.quirksmode.org/css/contents.html)[doctypes](http://www.quirksmode.org/css/quirksmode.html)有很好的概述，它们的[比较图表](http://www.quirksmode.org/compatibility.html)是一流的。

我怀疑这与它有什么关系，但你也破坏了 html。框中的所有标题（当前版本、节目、新闻）都包含在`<font>Header</h1>`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-20T13:34:11.080

这与 IE6（我看它的）不支持 min-width 标记有关，我注意到你已经使用过，IE6 也将边距和填充计为宽度，可以这么说。

# wpf - WPF中的stackpanel和virtualizingstackpanel有什么区别？

> ID：666108
> 
> 赞同：22
> 
> 时间：2009-03-20T13:19:32.787
> 
> 标签：wpf, stackpanel, virtualizingstackpanel

WPF中的stackpanel和virtualizingstackpanel有什么区别？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-03-20T13:23:20.763

当处理非常大的集合时，VirtualizingStackPanel**可以提供性能优势。**它通过仅渲染和处理对用户可见的数据子集而不是处理整个数据列表来实现。通过只为可见项创建 UI 元素，这可以大大减少它必须做的工作量。

这真的很方便，但如果

1.  您是数据绑定非 UI 元素或必须在特定面板中为其创建 UI 的元素
2.  您正在数据绑定大量数据

另一方面，StackPanel 将预先为 StackPanel 中包含的所有元素创建控件。

VirtualizingStackPanel MSDN 页面有一个不错的讨论：http: [//msdn.microsoft.com/en-us/library/system.windows.controls.virtualizingstackpanel.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.virtualizingstackpanel.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T13:26:30.913

这与视觉树有关。virtualizingstackpanel 与列表框等内容一起使用，通过仅显示可见项来减小可视树的大小 - 这在发生数据绑定的情况下很有用。

# erlang - 如何优雅地检查 Erlang 中的许多条件？

> ID：666111
> 
> 赞同：13
> 
> 时间：2009-03-20T13:20:29.350
> 
> 标签：erlang

因此，当用户发送注册帐户的请求时，他们会发送用户名、密码、电子邮件和其他信息。注册功能必须验证他们的所有数据。一个例子是：

*   验证未使用的电子邮件
*   验证用户名未使用
*   验证用户名是字母数字
*   验证所有字段的长度都超过 X 个字符
*   验证所有字段的长度小于 Y 个字符

现在我不想有一个 5 级深的 if 或 case 语句，但我还有什么其他选择？将其拆分为单独的函数听起来是个好主意，但是我只需要在某种条件下检查函数的返回值，它就会回到最初的问题。

我可以将它们分成函数，然后调用一个带有所有条件 OR 的 if 语句，但这不会给我想要的东西，因为如果有一个错误，我需要能够告诉用户特定的错误。

在 erlang 中如何处理这种情况？是否有等效的 return 语句，或者它必须是函数中的最后一个可执行行才能成为返回值？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2009-03-21T10:10:40.470

Joe Armstrong 的建议之一：将程序成功案例代码与错误处理分开。你可以这样做

```
create_user(Email, UserName, Password) ->
  try
    ok = new_email(Email),
    ok = valid_user_name(UserName),
    ok = new_user(UserName),
    ok = strong_password(Password),
    ...
    _create_user(Email, UserName, Password)
  catch
    error:{badmatch, email_in_use} -> do_something();
    error:{badmatch, invalid_user_name} -> do_something();
    error:{badmatch, user_exists} -> do_something();
    error:{badmatch, weak_password} -> do_something();
    ...
  end. 
```

请注意，您可以从更好的 create_user 函数中捕获所有错误。

```
create_user(Email, UserName, Password) ->
    ok = new_email(Email),
    ok = valid_user_name(UserName),
    ok = new_user(UserName),
    ok = strong_password(Password),
    ...
    _create_user(Email, UserName, Password).

main() ->
  try
    ...
    some_function_where_create_user_is_called(),
    ...
  catch
    ...
    error:{badmatch, email_in_use} -> do_something();
    error:{badmatch, invalid_user_name} -> do_something();
    error:{badmatch, user_exists} -> do_something();
    error:{badmatch, weak_password} -> do_something();
    ...
  end. 
```

模式匹配是 Erlang 中最酷的事情之一。请注意，您可以将您的标签包含在错误匹配错误中

```
{my_tag, ok} = {my_tag, my_call(X)} 
```

和自定义数据

```
{my_tag, ok, X} = {my_tag, my_call(X), X} 
```

如果异常对您来说足够快取决于您的期望。在我的 2.2GHz Core2 Duo Intel 上的速度：一秒钟内大约 200 万次异常（0.47us）与 600 万次成功（外部）函数调用（0.146us）相比——可以猜测异常处理大约需要 0.32us。在本机代码中，它是每秒 6.8 对 4700 万，处理可能需要大约 0.125us。try-catch 构造可能会有一些额外的成本，在本机和字节码中成功调用函数的成本约为 5-10%。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-20T14:03:26.533

```
User = get_user(),

Check_email=fun(User) -> not is_valid_email(User#user.email) end,
Check_username=fun(User) -> is_invalid_username(User#user.name) end,

case lists:any(fun(Checking_function) -> Checking_function(User) end, 
[Check_email, Check_username, ... ]) of
 true -> % we have problem in some field
   do_panic();
 false -> % every check was fine
   do_action()
 end 
```

所以它不再是5级深了。对于真正的程序，我猜你应该使用 lists:foldl 从每个检查函数中累积错误消息。因为现在它简单地说“一切都好”或“有些问题”。

请注意，通过这种方式添加或删除检查条件并不是什么大问题

对于“是否有等效的 return 语句......” - 查看 try catch throw 语句，在这种情况下 throw 的行为类似于 return 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-13T04:59:59.390

以@JLarky 的回答为基础，这是我想出的。它还从 Haskell 的 monads 中汲取了一些灵感。

```
-record(user,
    {name :: binary(), 
     email :: binary(), 
     password :: binary()}
).
-type user() :: #user{}.
-type bind_res() :: {ok, term()} | {error, term()} | term().
-type bind_fun() :: fun((term()) -> bind_res()).

-spec validate(term(), [bind_fun()]) -> bind_res().
validate(Init, Functions) ->
    lists:foldl(fun '|>'/2, Init, Functions).

-spec '|>'(bind_fun(), bind_res())-> bind_res().
'|>'(F, {ok, Result}) -> F(Result);
'|>'(F, {error, What} = Error) -> Error;
'|>'(F, Result) -> F(Result).

-spec validate_email(user()) -> {ok, user()} | {error, term()}. 
validate_email(#user{email = Email}) ->
...
-spec validate_username(user()) -> {ok, user()} | {error, term()}.
validate_username(#user{name = Name}) ->
...
-spec validate_password(user()) -> {ok, user()} | {error, term()}.    
validate_password(#user{password = Password}) ->
...

validate(#user{...}, [
    fun validate_email/1,
    fun validate_username/1,
    fun validate_password/1
]). 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-05-05T07:47:59.110

也许你需要使用

```
receive
    message1 -> code1;
    message2 -> code2;
    ...
end. 
```

但是，当然会有 spawn() 方法。

# sharepoint - 工作流 - 条件分支

> ID：666120
> 
> 赞同：0
> 
> 时间：2009-03-20T13:23:47.503
> 
> 标签：sharepoint, workflow, branch

我正在为表单创建工作流程。

表单是需要4个审批人或被拒绝的审批表。

我可以得到批准，但不能得到拒绝。

我正在使用设计师 2007。

我的工作流程如下所示：

第 1 步：条件：如果 Created 等于 created Action:Email 通知所有批准者。

第 2 步：
条件：Else 如果 TomR 等于 yes 如果 TomA 等于 yes 操作：向创建者发送电子邮件，然后向...发送电子邮件

从这里开始，我使用与上述相同的步骤为其他 3 个批准者创建了条件分支。

我不相信我明白我在做什么显然。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-20T13:30:04.710

开箱即用的审批工作流程应该满足这一点吗？有没有它没有的原因，你需要建立自己的？

# functional-programming - 延续单子？

> ID：666121
> 
> 赞同：17
> 
> 时间：2009-03-20T13:24:44.957
> 
> 标签：functional-programming, monads, continuations

延续可以说是单子吗？它们是 monad 的子集还是仅仅是实现 monad 的一种方式？

*编辑：*或者也许我弄错了，*单子*是一个比*延续*更抽象的概念？（所以我真的在这里比较苹果和橘子）

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-03-20T22:58:50.803

不仅是延续单子，而且它们是一种通用单子，从某种意义上说，如果你有延续和状态，你可以模拟任何功能单子。这一令人印象深刻但技术含量高的成果来自于[Andrzej Filinski](http://www.diku.dk/hjemmesider/ansatte/andrzej/)令人印象深刻且技术含量高的思想，他在 1994 年左右写道：

> 我们表明，任何单元和扩展操作可表示为纯函数术语的 monad 都可以嵌入到具有“可组合延续”的按值调用语言中。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-03-20T13:29:19.643

简而言之，由于 monad 的“绑定”将有效的延续（“其余计算”的 lambda）作为参数，因此 monad 在这个意义上是延续。另一方面，可以使用单子语法糖在非 CPS 语言中有效地实现延续传递样式，如下面的一些杂项链接所建议的那样。

来自 Haskell 的“所有关于 monads”的教程：

[https://www.haskell.org/haskellwiki/All_About_Monads#The_Continuation_monad](https://www.haskell.org/haskellwiki/All_About_Monads#The_Continuation_monad)

一个 F# continuation monad，用于实现 for 样式循环的“break”和“continue”

[http://cs.hubfs.net/forums/thread/9311.aspx](http://cs.hubfs.net/forums/thread/9311.aspx)

以及将延续单子应用于 F# 中的问题的示例：

[http://lorgonblog.spaces.live.com/blog/cns!701679AD17B6D310!256.entry](http://lorgonblog.spaces.live.com/blog/cns!701679AD17B6D310!256.entry)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-03-20T13:28:42.063

他们可以是，虽然他们不需要。我会稍微扭转你的问题，而是说单子是一种实现延续的方式。但是您可以通过多种方式实现延续——例如，您可以在 C# 中对 CPS 进行适度但受限的复制，而无需太多努力[**。**](http://pluralsight.com/blogs/dbox/archive/2005/04/27/7780.aspx)查看Haskell 网站上[**的 The Continuation Monad**](https://www.haskell.org/haskellwiki/All_About_Monads#The_Continuation_monad)进行非常彻底的处理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-08-05T08:17:56.167

延续是程序中的特定功能。Monad 是类型构造函数。

`Cont<T>`用于延续类型的类型构造函数`T`不会是 monad。

然而，`Cont<Cont<T>>`是一个单子，这就是通常所说的“延续单子”。

（在一种语言中使用 callcc 就相当于能够从 转换`Cont<Cont<T>>`为`T`。）

# php - 具有大写和小写类名的自动加载器

> ID：666136
> 
> 赞同：2
> 
> 时间：2009-03-20T13:28:09.597
> 
> 标签：php, autoload

我在 php 中使用这个类进行自动加载。 [http://pastebin.com/m75f95c3b](http://pastebin.com/m75f95c3b)

但是当我在某个地方

```
class Bar extends Foo 
```

我有一个名为 foo.class.php 的文件，它找不到该类。但是当我将文件名更改为 Foo.class.php 时，它会找到该类。

我正在尝试向我的类添加一些功能，以便无论文件名是否以大写字母开头，都可以始终找到文件。但到目前为止我还没有成功。

任何人？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-20T13:31:00.917

如果您的所有文件都有小写名称，请应用`strtolower`到`$className`类的每个方法中的变量值：

```
$className = strtolower($className); 
```

但我建议您起草一些每个开发人员都必须遵守的编码指南。否则，您将不得不测试使用大写和小写字母编写文件名的 2 个^(*<文件名长度>*)可能性中的每一个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-20T14:06:21.783

Gumbo 的解决方案是最好的，几乎每个人都在使用。我不明白你为什么不喜欢。当然你可以先检查类名大写的文件是否存在，如果不存在则检查小写版本是否存在。这绝对不比 Gumbo 的解决方案更好。毕竟“你的”程序员必须遵循一些约定/规则。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-20T14:04:09.730

我或多或少会这样做

```
function __autoload($class_name) {
    $upperName = strtoupper(substr($class_name,0,1)) . substr($class_name, 1);
    $lowerName = strtolower(substr($class_name,0,1)) . substr($class_name, 1);

    //Check to see if the class file exists as-is
    if(file_exists($class_name . '.php')) {
        require_once($class_name . '.php');
    }elseif(file_exists($upperName . '.php')) {
        require_once($upperName . '.php');
    }elseif(file_exists($lowerName . '.php')) {
        require_once($lowerName . '.php');
    }else {
        throw new Exception("The class $class_name could not be found.");
    }
} 
```

随着不同命名约定的出现，添加其他条件很容易。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-20T13:50:36.237

我使用了一个 __autoload() 函数，该函数考虑了几种不同的文件命名约定，以提供与以前开发人员的向后兼容性。

它对每个约定执行一个简单的循环并检查该文件是否存在。如果文件存在，则加载它。

对于我的函数，我对不同的文件扩展名执行此操作，例如 .inc、.class 或 .inc.php 。你也可以这样做，但要搜索大写和小写的第一个字符。

我会将它放在 searchForClassFile() 方法中，在 else 部分带有注释“找到一个文件”。

编辑（更多信息）：

我不是递归地进入类目录寻找正确的文件，而是将类名映射到特定位置。这是一种常见的做法。例如，`foo_bar`映射到`[CLASS_DIRECTORY]/foo/bar.[EXTENSION]`. 在我们的例子中，我们检查了几个不同的扩展。

在您的情况下，您必须就如何搜索类文件做出设计决定，但要修改您的代码：

```
} else {
  // Found a file
  if ($f == $className . self::$classFileSuffix ||
        $f == strtolower($className) . self::classFileSuffix) {
    return $subPath;
  }
} 
```

您可以编写一个仅降低第一个字符的函数，而不是 strtolower()，或者如果使用 PHP > 5.3.0（未正式发布），请使用 lcfirst() 函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-20T14:12:17.667

您可以使用自动加载器扫描目录中的 .php 文件，并使用正则表达式实际查看每个文件的内容以查找诸如“类 Foo”之类的模式。当然，您需要缓存它，最好使用类 => 目录形式的数组。您还需要确保正确地使缓存无效，例如当文件夹中有新的 .php 文件时。

我为我的网站做这个，效果很好。

# .net - 扫描一堆 Word 文档以查找给定的短语

> ID：666145
> 
> 赞同：1
> 
> 时间：2009-03-20T13:29:45.197
> 
> 标签：.net, ms-word

如何扫描一堆 Microsoft Word (2003) 文档？我正在文档中搜索某个短语，并希望返回包含该短语的文件名。

代码示例将*特别*有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-20T14:31:10.243

你可以用 COM 做到这一点。但是，如果您正在扫描大量文件，这可能会非常缓慢，因为您将通过 Word 本身与文本进行交互。

这是一些使用的python代码（对不起，我不太了解.Net，但COM函数会类似）

我猜你可能需要稍微修剪一下空格才能获得好的匹配。

```
import os, win32com.client

def doc_has_phrase(filename, phrase):
    found = False
    app = win32com.client.Dispatch('Word.Application')
    doc = app.Documents.Open(filename, False, False, False)
    if phrase in doc.Content.Text.lower():
        found = True
    app.Quit()
    return found

phrase = 'key phrase in lowercase'
valid_types = ['doc']
path = "C:\\Path\\To\\Files\\"

docs = dict ([(f, None) for f in os.listdir (path) if f[-3:] in valid_types])
for doc in docs:
    print doc_has_phrase(path+doc, phrase), path+doc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-20T14:45:07.057

allclaws 方法的 VB.NET 版本：

```
Function ContainsText(ByVal fileName As String, ByVal text As String) As Boolean

    Dim app As New Microsoft.Office.Interop.Word.Application
    Dim doc As Microsoft.Office.Interop.Word.Document
    doc = app.Documents.Open(DirectCast(fileName, Object))

    Try
        Return doc.Content.Text.IndexOf(text, StringComparison.CurrentCultureIgnoreCase) <> -1
    Finally
        app.Quit()
    End Try

End Function 
```

**编辑：**

要完成这项工作，您需要添加对 Microsoft Word 11.0 对象库的引用，该引用可在“添加引用”对话框的 COM 选项卡上找到

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-20T13:35:27.663

对于 2007 文档，使用[Open XML SDK 2.0 框架](http://www.microsoft.com/downloads/details.aspx?FamilyId=C6E744E5-36E9-45F5-8D8C-331DF206E0D0&displaylang=en)相当容易。这些文件基本上是一个 zip 文件，并且 zip 文件内部包含一堆包含文档内容的 xml 文件。您所要做的就是扫描 xml 以使用此框架找到您需要的内容。

事实上，如果您有一个名为 testDoc.docx 的 word 2007 文档，您只需将 .zip 添加到它的末尾，您就可以查看里面的内容。所以它看起来像 testDoc.docx.zip

主 xml 文件是一个名为 document.xml 的文件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-20T13:37:10.590

在 Word 2003 中，您可以搜索二进制文件，其中大部分文本都是完整的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-20T13:37:52.447

如果您可以访问 antiword 和 grep，它应该像

```
for file in `antiword *.doc | grep -vf word_to_find`
do
    echo "$file"
done 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-20T13:40:50.347

您可以使用[Word 对象模型](http://msdn.microsoft.com/en-us/library/kw65a0we.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-20T13:58:25.173

手头没有代码示例。但是您是否查看过 Windows 索引服务和安装 Office 插件？

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2009-03-20T13:47:29.990

Word Interop 服务是否适合您？如果服务器上安装了 Word，您可以简单地打开 Word 文档并使用 Word 本身的查找功能来定位您的文本。当然，这是一种资源密集型的方法，在使用 Interop 服务时需要注意很多事情，但它可以完成工作。

您最大的问题可能是需要在服务器上安装适当版本的 Word。

# python - PyObjC + Python 3.0 问题

> ID：666148
> 
> 赞同：10
> 
> 时间：2009-03-20T13:30:08.580
> 
> 标签：python, cocoa, xcode, pyobjc

默认情况下，Cocoa-Python 应用程序使用默认的 Python 运行时版本 2.5。如何配置我的 Xcode 项目以使其使用更新的 Python 3.0 运行时？我尝试用较新的版本替换项目中包含的 Python.framework，但它不起作用。

还有一件事，PyObjc 模块是否与新版本的 Python 兼容？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-20T19:20:56.723

PyObjC 尚不适用于 Python 3.0。根据（？）PyObjC 开发人员 Ronald Oussoren 的说法，Python 3.0 支持是可能的，但尚未实现：

> 对 Python 3.x 的支持在我的待办事项列表中，但实现起来并非易事。PyObjC 包含大量非常低级的 C 代码，要了解 3.0 中的更改的详细信息并不容易。我研究了一个 Python 3.x 端口，这应该很容易，但仍然需要几天的工作。我不打算在 PyObjC 的下一个版本之前进行这项工作，因为它已经过期太久了。

我敢肯定补丁会受到欢迎。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-12-16T18:23:49.830

PyObjC 2.3 添加了对 Python 3.1 的初始支持：

> 此版本需要 Python 2.6 或更高版本，同时也支持 Python 3.1 或更高版本。

但是也

> 注意：此时 Python 3 支持是 pre-alpha：代码可以编译但尚未通过测试。还需要检查代码以检查 python3<->objc 集成（dict.keys 现在返回一个视图，NSDictionary.keys 仍然返回一个基本迭代器，...）

[http://svn.red-bean.com/pyobjc/tags/pyobjc-2.3/pyobjc-core/NEWS.txt](http://svn.red-bean.com/pyobjc/tags/pyobjc-2.3/pyobjc-core/NEWS.txt)

# c# - 替换字符串

> ID：666159
> 
> 赞同：0
> 
> 时间：2009-03-20T13:32:15.937
> 
> 标签：c#, asp.net, localization

在这里我需要替换内容“说...”：

```
<asp:DataList ID="dlProductReviews" runat="server" RepeatDirection="Vertical" RepeatColumns="1">
  <ItemTemplate>
    <div>

      <span class="content">says... </span>

    </div>
  </ItemTemplate>
</asp:DataList> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-20T13:41:50.500

您可以在此处使用数据绑定标签：

```
<asp:DataList ID="dlProductReviews" runat="server" RepeatDirection="Vertical" RepeatColumns="1">
  <ItemTemplate>
    <div>

      <span class="content"><%# GetContent() %></span>

    </div>
  </ItemTemplate>
</asp:DataList> 
```

然后在后面的代码中创建一个名为 GetContent() 的受保护方法（或者您可以使用属性），在后面的代码中返回一个字符串，在您的情况下是来自资源的字符串。您也可以将代码直接放在 <%#...%> 标记中。

# .net - WebForm_InitCallback 未定义

> ID：666172
> 
> 赞同：1
> 
> 时间：2009-03-20T13:36:05.837
> 
> 标签：.net, ajax, webforms

奇怪的问题正在发生。.NET 2.0 站点使用 System.Web.Extensions 版本 1.0.61025.0 来处理一些小的 AJAX 内容。我们有一个带有 2 台负载平衡服务器的网络农场。该网站已经运行了大约 2 年，没有任何问题。目前托管公司将框架升级到 3.5，现在使用简单 asp:Panel 的页面无法正常工作。

像往常一样，它在开发和登台上运行良好，但在生产上却不行。该页面没有做任何疯狂的事情。页面上甚至没有 AJAX 调用。

您可以在此处查看页面 -> [http://www.goplaylabels.com/CommunityInvolvement/FindaSchool.aspx](http://www.goplaylabels.com/CommunityInvolvement/FindaSchool.aspx)

任何反馈或方向都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-03-08T19:56:52.650

我今天遇到了这个问题。但原因很奇怪。我的系统日期错误，指的是 2002 年 1 月。一旦我更新了系统日期，网络表单错误就得到了解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T05:18:53.180

我发现大多数解决方案都是系统数据问题。但我的约会是对的。我通过重新安装 .net 框架解决了这个问题。

# c# - 如何实现每小时运行但也可以从 .aspx 页面触发的作业？

> ID：666178
> 
> 赞同：2
> 
> 时间：2009-03-20T13:37:25.567
> 
> 标签：c#, asp.net, singleton, timer, global-asax

我需要一种经常运行的方法来进行一些数据库处理。但是，我可能需要它可以由站点上的管理员触发。但我不希望此方法同时运行多次，因为这可能会导致它访问数据库的方式出现问题。

例如，我可以...

创建一个在计时器上运行该方法的单例类，并在 global.asax 文件中对其进行实例化。然后，由于它是一个单例，我可以从我的普通 .aspx 页面调用它，并在需要时调用该方法。我可能需要使用 C# 的“锁定”功能来检查该方法是否已经在运行。

我最近听到有人说单身人士是“邪恶的”，但这似乎是完美的契合。你怎么看？提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-20T13:40:55.700

计时器和锁（旨在同步对数据库的访问）在 Web 上是个坏主意；您可能在不同的服务器上有零个、一个或多个应用程序池。它们可以随时回收，并且在需要时不会旋转。基本上，这不会阻止您从多个来源敲击数据库。

就个人而言，我很想写一个服务来完成这项工作（db-polling，或通过 WCF 等），或者使用 db（一个 SP 或类似的） - 在表行中设置一个标志说“进行中”，在数据库中进行工作，并清除标志（重复尝试在进行中立即退出）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T13:45:28.607

我会这样做

1.  构建一个正常的 ASP.NET 页面来进行处理
2.  ~~窃取~~借用[LFSR Consultings](https://stackoverflow.com/users/33226/lfsr-consulting)的想法，在数据库中设置一个标志，用于检查进程当前是否正在运行
3.  使用普通的 cronjob 或 windows 任务调度程序定期调用网页。

[单身人士并不邪恶](http://codebetter.com/blogs/jeremy.miller/archive/2005/08/04/130302.aspx)，他们只是很容​​易被虐待。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-20T14:00:43.343

Joel Spolsky 在 SO Podcast 中提到的另一个选项，我相信它是 #20 的东西。就是在应用程序开始时设置一个空的Cache对象，并在某个过期日期，并在[CacheItemRemovedCallback](http://msdn.microsoft.com/en-us/library/7kxdx246(VS.71).aspx)中调用页面或做一些工作，然后重置空的缓存对象。

我可能非常错误地引用了他的话，所以我建议您自己[听](https://blog.stackoverflow.com/category/podcasts/)或查看成绩单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-20T13:40:01.147

仅仅在数据库中设置一个标志并检查它以确定作业是否正在运行呢？似乎更简单的国际海事组织。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-20T13:48:30.313

编写单例的规范方法最终不是线程安全的。尤其是在 webby 环境中，线程甚至不需要在同一台机器上！

如果您*真的*想做一个“单例”，请将其视为您只部署到一台机器的服务。然后使用 Marc Gravell 建议的数据库的事务语义来同步锁。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-20T13:48:55.553

我们通过使用 Web 服务进行后端处理，然后编写一个桌面应用程序来按照我们需要的任何时间表调用它来完成类似的事情。然后我们可以在服务器上运行该应用程序，或者管理员可以直接从他们的 PC 运行它来触发作业。

编辑：在我看到您不希望它们同时运行的修订后，我们通常只是使用数据库标志来控制它，就像其他一些人所说的那样，没什么特别的，但它完成了工作

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-20T14:42:01.653

设置一个应用程序范围的变量来表示该进程正在运行。这应该比将变量存储在数据库中要容易一些，对吧？

# svn - SVN 差异导出

> ID：666185
> 
> 赞同：3
> 
> 时间：2009-03-20T13:39:32.160
> 
> 标签：svn

在工作中，我们有一个非常大的代码库，我们通常会为 Web 应用程序导出这些代码库，以确保一切都是最新的。如果我们开发测试代码，它总是在一个分支中完成，以确保它不会与可能意外导致错误发布的主干冲突。

我的问题是是否可以进行 SVN 导出，但仅用于差异，否则必须再次导出整个存储库，这需要相当长的时间。例如，我们有一个“最后导出”标志，然后我们将最后更新日期与文件进行比较，只导出那些晚于最后导出日期的文件。

对于完成完整导出以保持我们的实时/存储库同步的内部/内部网系统来说，这将非常方便。有任何想法吗？

**编辑**- 查看补丁，我看不到您如何为存储库中已存在的文件创建补丁。我们已经提交了文件。所以我想创建一个从 x 版本到头部的补丁，并将其应用于我的项目的根目录，以便应用每一个差异。但是，我不确定这是否有可能。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-20T13:45:17.450

在使用 svn diff 创建补丁文件，然后使用普通的旧 'patch' 命令应用该补丁文件时，我们已经做了几乎类似的事情（尽管不是在生产系统中）。svn diff 接受修订号，因此您可以生成一个补丁文件，该文件将包含从某个集合开始的所有内容。

当然，如果您的许多文件都是二进制文件，这可能效果不佳:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-01-27T01:25:14.640

我们也需要这样的东西。所以我写了一个小的java工具。

希望它对某人有用：[github svn-diff-export](http://github.com/philipgloyne/svn-diff-export)

# php - 购物车有时会以 0 美元的价格进行销售...如何排除故障？

> ID：666187
> 
> 赞同：1
> 
> 时间：2009-03-20T13:40:01.770
> 
> 标签：php, shopping-cart

我没有使用预制的购物车，我自己编程。它在 99% 的时间里都能正常工作，但大约每隔几个月就有一次订单以 0 美元的价格成交。我不知道为什么。我使用相同的产品和所有相同的信息进行了测试购买，但我无法将其设为 0 美元。我不知道如何解决这个问题，我确实有一个免责声明说我​​们不尊重错误的价格。客户希望这种情况停止发生。我正在使用 PHP 来完成所有这些工作。由于我自己似乎无法复制这种情况，因此我发现很难深入了解问题的根源。任何人都可以就如何解决这个问题提供一些建议吗？

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-20T13:44:01.230

最终，您会想弄清楚为什么会发生这种情况。如果没有看到您的代码，我真的无法为您提供太多帮助。不过，在短期内，为什么不在结账过程结束时添加健全性检查呢？

```
if ( $final_price < 1 ) {
    do_epic_fail(); // Show an error, whatever.
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-20T13:47:22.047

我将从使用一些广泛的订单记录开始。每一次点击，每一次输入，每一次 sql 查询。然后，当它再次发生时，请查看该订单的日志以查看发生了什么。

有几种可能性浮现在脑海中。一，您在查询中出现暂时错误以提取项目总数。也许当查询失败时，您只需默认为 0.00。例如，当他们为数量输入 -1 或输入诸如“ABC”之类的文本时会发生什么

或者，您可能有一个 sql 注入问题，如果用户在其中一个字段中输入错误，它会加载一个零值的价格。

无论是什么，都将在正确的伐木中暴露出来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-20T13:43:32.417

你有网站的网址吗？

否则我只能猜测您允许用户传入的数据以确定用户可以覆盖的价格（例如隐藏字段或参数）。

确保您将产品的 ID 传递给您的服务器端代码，并将服务器上的价格乘以订单数量。（例如从不相信用户输入）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-20T13:51:22.443

您的代码是否依赖于 $_SESSION 数据？如果用户要等待很长时间，一些必要的数据可能会过期，但结帐可能仍会继续。

正如其他人所说，没有源代码很难进一步评论。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-20T13:46:59.023

您是否从客户端（隐藏的表单字段）将金额详细信息发布到支付网关？如果是这样，那么可以通过使用 Web 开发人员等浏览器工具栏轻松覆盖它。

始终从服务器端发布付款详细信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-20T13:57:11.823

如果最终价格为 0，则可能再次检查订单以查看它是否实际包含任何商品。如果您有任何免费物品或特别促销活动，我可能会看到零订单，所以也许这就是要走的路。

如果没有看到您的消息来源，这是一个很难回答的问题。

# xml - XmlSchema 空白崩溃：多个空白会发生什么？

> ID：666192
> 
> 赞同：6
> 
> 时间：2009-03-20T13:42:26.240
> 
> 标签：xml, schema, whitespace

我使用以下 XmlSchema：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
  targetNamespace="http://www.test.com/XmlValidation"
  elementFormDefault="qualified"
  attributeFormDefault="unqualified"
  xmlns:m="http://www.test.com/XmlValidation">

  <xs:element name="test">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="testElement" type="m:requiredStringType"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>

  <xs:simpleType name="requiredStringType">
    <xs:restriction base="xs:string">
      <xs:minLength value="1"/>
      <xs:whiteSpace value="collapse"/>
    </xs:restriction>
  </xs:simpleType>
</xs:schema> 
```

它定义了一个必须至少有一个字符长的 requiredStringType 并且还定义了空格折叠。

当我验证以下 Xml 文档时，验证成功：

```
<?xml version="1.0" encoding="UTF-8"?>
<test xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.text.com/XmlValidation">
    <testElement>     </testElement>
</test> 
```

w3.org 定义了空格折叠：

“在替换隐含的处理之后，#x20 的连续序列被折叠为单个 #x20，并且前导和尾随 #x20 被删除。”

这是否意味着 3 个空格被折叠为 1 个或 0 个空格？在 XmlSpy 中验证失败，在 .Net 中验证成功。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-20T14:20:41.547

由于它表示删除了前导和尾随空格，这意味着仅包含空格的字符串将被折叠为空字符串。XmlSpy 在验证中是准确的，而 .NET 是慷慨的（或正在出错）。

这是根据[XML Schema Part 1: Structures Second Edition](http://www.w3.org/TR/xmlschema-1/)的验证期间的[空白规范化](http://www.w3.org/TR/xmlschema-1/#d0e1654)。

> **保留**
> 没有进行规范化，该值是·规范化的值·
> **replace**
> 所有出现的#x9（制表符）、#xA（换行）和#xD（回车）都被替换为#x20（空格）。
> **折叠**
> 在上面在替换下指定的替换之后，#x20s 的连续序列被折叠为单个 #x20，并且初始和/或最终 #x20s 被删除。

因此，首先所有空格都被空白字符替换，第二个连续序列被单个空白字符替换，第三个和最后一个，初始和最后一个空格被删除。按照此顺序，在验证期间必须将仅包含空格的字符串规范化为空字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-17T16:46:07.807

这似乎适用于.Net（注意模式方面），撒克逊人不需要模式。

```
<xs:element name="StoreCode" minOccurs="1">
<xs:simpleType>                         
    <xs:restriction base="xs:string">
            <xs:whiteSpace value="collapse"/>
        <xs:pattern value=""/>
        <xs:minLength value="1"/>
        <xs:maxLength value="15"/>
    </xs:restriction>
</xs:simpleType>
</xs:element> 
```

# c# - WPF：在 ListBox 上聚合属性

> ID：666204
> 
> 赞同：2
> 
> 时间：2009-03-20T13:44:43.210
> 
> 标签：c#, wpf, binding, listbox, itemscontrol

我有两个 ListBox，都使用 Extended SelectionMode。第一个的 ItemsSource 是一个 List，并使用数据模板。我正在尝试使用第一个属性的聚合作为第二个的 itemssource。例如：

```
public class MultiAppPropertyAggregator : IValueConverter {
        public object Convert(object value, Type targetType, object parameter, CultureInfo culture) {
    IList<SomeObject> selectedItems = value as IList<SomeObject>;
    Dictionary<string, string> bundles = new Dictionary<string,string>();
    foreach(SomeObject myobj in selectedItems) {
        foreach(KeyValuePair<string,string> name in myobj.Names) {
           selectedItems.Add(name.Key, name.Value);
....

<ListBox x:Name="lstApplication" ItemsSource="{Binding}" SelectionChanged="lstApplication_SelectionChanged" SelectionMode="Extended" />
<ListBox x:Name="lstBundles" ItemsSource="{Binding ElementName=lstApplication,Path=SelectedItems,Mode=OneWay,Converter={StaticResource MultiAppPropertyAggregator}}" ItemTemplate="{StaticResource DictionaryList}" SelectedValuePath="Key" SelectionMode="Extended" /> 
```

因此，第一个列表中的对象包含 Dictionary 类型的属性。我想将第一个列表中所有选定项目的字典中的所有项目添加到第二个列表中。

转换器似乎在初始加载时被调用，然后不再调用，我最终得到一个空的第二个列表框。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-20T14:11:30.477

我猜你的转换器只被调用一次，因为列表框上的 SelectedItems 不是 DependencyProperty，因此不会通知绑定它已更新。

您最好在代码隐藏/视图模型中进行此转换（取决于您遵循的方法）并为要绑定的第二个列表框公开属性。

您可以通过我能想到的两种方式之一来做到这一点。首先，您可以在第一个列表上监听*SelectionChanged*并更新第二个列表绑定的属性。或者，您可以将*IsSelected*属性放在第一个列表绑定到的项目上，并在任何给定项目发生更改时更新您的第二个列表。您可以为 ListBoxItem 添加此样式以在数据项和视图之间同步*IsSelected属性：*

```
<Style TargetType="{x:Type ListBoxItem}">
   <Setter Property="IsSelected" Value="{Binding Path=IsSelected, Mode=TwoWay}"/>
</Style> 
```

我的猜测是第一个实施起来会不太困难，尽管它可能与您所遵循的任何 UI 方法都不完全吻合。

# c++ - 静态成员和提升序列化

> ID：666205
> 
> 赞同：7
> 
> 时间：2009-03-20T13:45:14.893
> 
> 标签：c++, serialization, boost, static

我正在使用[Boost.Serialization](http://www.boost.org/doc/libs/1_38_0/libs/serialization/doc/index.html)来归档类的内容。成员变量之一是静态 std::vector。

存档和恢复很好，但我有点希望库只保存一次静态成员，从文件大小来看，静态成员似乎为每个存档实例完全保存。

这很容易通过对静态向量使用 set/getter 并在类外序列化静态向量一次来规避。

但我宁愿有一个自给自足的课程。有没有一种简洁的方法来实现只归档一次类的静态内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-20T14:20:01.893

在序列化所有类的实例之前序列化静态向量。

如果你像这样序列化向量：

```
template<class Archive>
void serialize(Archive & ar, const unsigned int version)
{
    ar & this->someVar;
    ar & this->AnotherVar;
    ar & staticVector;  
} 
```

那么可以肯定的是，静态向量确实会随每个实例进行序列化。

如果您需要任何进一步的说明，请发布您的`serialize`函数和调用它的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T17:46:29.633

我对 Boost.Serialization 的经验非常有限，因此请考虑以下内容：

IIRC，您希望对静态成员的处理是用指针完成的。所以也许序列化指向静态成员的指针会起作用。

自我批评：不过，我不确定在反序列化时如何应用它。

# apache-flex - 在树中单击节点执行功能，然后在文本框中显示结果

> ID：666212
> 
> 赞同：1
> 
> 时间：2009-03-20T13:47:29.257
> 
> 标签：apache-flex

我有一个绑定到 XML 列表的树对象。XML 列表包含我编写的代码类型的名称（例如 IM 客户端）以及我有一些代码的文件的路径。

当用户在树中选择一个节点的子节点时，我想从所选节点的子节点的路径加载文件，然后在文本框中显示文本。

我该怎么办？没有服务器端语言有可能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-20T19:01:21.793

Flash 确实限制从用户计算机获取文件。为了解决这个问题，我在用户的计算机上运行了一个应用程序，它充当我的 Flex 应用程序和计算机上的文件之间的中间人。

编辑：如果你想加载你在服务器上的文件，那么你需要在服务器端有一些东西来将该信息传递回你的 flex 应用程序。Flash 在客户端的浏览器中运行，因此它实际上并不知道它实际位于何处。

不过，既然您有这些文件路径，您是否可以将服务器根目录的相对路径放在域名末尾以查找文件？

[http://domain.com/path/file.jpg](http://domain.com/path/file.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-21T10:15:22.860

> 所有相关文件都位于服务器上（例如代码示例）。我不需要从用户的 PC 中获取任何东西。

您需要使用`HTTPService`或类似的对象来调用您的服务器，加载完成后您可以显示它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T21:15:02.880

在不了解 XML 数据结构的情况下很难给出解决方案。然而，一个好的开始是监听树的变化事件。然后，您可以从树中获取 selectedItem，这应该是被单击的 XML 节点。

您说此时您应该有文件的路径，因此只需使用 URLLoader 类通过请求加载文件即可。

# python - Python 中的装饰器类

> ID：666216
> 
> 赞同：39
> 
> 时间：2009-03-20T13:48:00.330
> 
> 标签：python, decorator

我想构建用作装饰器的类，并保持以下原则：

1.  应该可以在 1 个函数的顶部堆叠多个此类装饰器。
2.  生成的函数名称指针应该与没有装饰器的同一个函数无法区分，可能只是针对它的类型/类。
3.  除非装饰器实际要求，否则订购装饰器不应该是相关的。IE。可以按任何顺序应用独立的装饰器。

这是针对 Django 项目的，我现在正在处理的具体情况是该方法需要 2 个装饰器，并显示为普通的 python 函数：

```
@AccessCheck
@AutoTemplate
def view(request, item_id) {} 
```

@AutoTemplate 更改了函数，因此它不返回 HttpResponse，而是返回一个字典以在上下文中使用。使用了 RequestContext，模板名是从方法名和模块中推断出来的。

@AccessCheck 根据 item_id 添加对用户的额外检查。

我猜这只是为了让构造函数正确并复制适当的属性，但是这些是哪些属性？

下面的装饰器不会像我描述的那样工作：

```
class NullDecl (object):
    def __init__ (self, func):
        self.func = func
    def __call__ (self, * args):
        return self.func (*args) 
```

如以下代码所示：

```
@NullDecl
@NullDecl
def decorated():
    pass

def pure():
    pass

# results in set(['func_closure', 'func_dict', '__get__', 'func_name',
# 'func_defaults', '__name__', 'func_code', 'func_doc', 'func_globals'])
print set(dir(pure)) - set(dir(decorated)); 
```

此外，尝试在 NullDecl 构造函数中添加“print **func.name** ”，它将适用于第一个装饰器，但不适用于第二个 - 因为 name 将丢失。

完善**eduffy**的答案，它似乎工作得很好：

```
class NullDecl (object):
    def __init__ (self, func):
        self.func = func
        for n in set(dir(func)) - set(dir(self)):
            setattr(self, n, getattr(func, n))

    def __call__ (self, * args):
        return self.func (*args)
    def __repr__(self):
        return self.func 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-03-20T13:52:14.703

一个无所事事的装饰器类看起来像这样：

```
class NullDecl (object):
   def __init__ (self, func):
      self.func = func
      for name in set(dir(func)) - set(dir(self)):
        setattr(self, name, getattr(func, name))

   def __call__ (self, *args):
      return self.func (*args) 
```

然后就可以正常应用了：

```
@NullDecl
def myFunc (x,y,z):
   return (x+y)/z 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-03-20T13:59:10.507

[装饰器模块](http://pypi.python.org/pypi/decorator)可帮助您编写保留签名的装饰器。

PythonDecoratorLibrary可能会为装饰[器](http://wiki.python.org/moin/PythonDecoratorLibrary)提供有用的示例。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-03-20T14:10:41.027

要创建一个装饰器来包装函数，使其与原始函数无法区分，请使用`functools.wraps`.

例子：

```
 def mydecorator(func):
    @functools.wraps(func):
    def _mydecorator(*args, **kwargs):
        do_something()
        try:
            return func(*args, **kwargs)
        finally:
            clean_up()
    return _mydecorator

# ... and with parameters
def mydecorator(param1, param2):
    def _mydecorator(func):
        @functools.wraps(func)
        def __mydecorator(*args, **kwargs):
            do_something(param1, param2)
            try:
                return func(*args, **kwargs)
            finally:
                clean_up()
        return __mydecorator
    return _mydecorator 
```

（我个人的偏好是使用函数而不是类来创建装饰器）

装饰器的顺序如下：

```
 @d1
@d2
def func():
    pass

# is equivalent to
def func():
    pass

func = d1(d2(func)) 
```

# wpf - WPF 我应该使用什么容器

> ID：666217
> 
> 赞同：0
> 
> 时间：2009-03-20T13:48:11.673
> 
> 标签：wpf, layout

那么我想要的是这可以说我有一个宽度为 100 和高度为 100 的“面板”

现在我想放置大小为 20 的 X 对象，所以当我添加更多 5 个项目时，它应该将所有项目放在一行

|项目1|项目2|项目3|项目4|项目5|

现在，如果我要再添加一个，那么我希望将其拆分为 2 行，每行 3 个项目

|项目1|项目2|项目3|

|项目4|项目5|项目6|

好吧，我想你明白了，我尝试了堆栈面板，但我无法让它按照我想要的方式工作..

编辑：
好吧，如果每行都有相同数量的项目，那么 mutch 没关系.. 所以 wrapPanel 应该完成下一个问题的工作 - >[在这里](https://stackoverflow.com/questions/666637/wpf-warppanel-stackpanel-with-datatemplate)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-20T13:56:40.683

没有标准的 WPF 面板可以为您执行此操作。WrapPanel 接近，但它不能确保您的行是偶数。你最好的办法是实现你自己的面板。 [这是关于codeproject的一个很好的例子](http://www.codeproject.com/KB/WPF/Panels.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T13:53:56.633

WrapPanel[应](http://msdn.microsoft.com/en-us/library/system.windows.controls.wrappanel.aspx)满足您的需求：

> 控件根据方向属性定位在堆栈或行中。除了堆叠之外，WrapPanel 还为包含的控件提供包装支持。因此，如果添加到 WrapPanel 的控件超出 WrapPanel 的宽度所能显示的数量，它们将被环绕以形成额外的堆栈或行。

老实说，我自己还没有尝试过这个特定的要求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-20T13:54:36.117

我想你可以使用 WrapPanel ......但你会得到 2 行，（5 项和 1 项）..

如果你有，比如说.. 7 件物品，会发生什么？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-03-20T13:53:00.053

我认为您无法获得自动执行此操作的容器控件。您可以有一个有两行的 Grid，每行有一个 StackPanel。添加项目时，您需要以编程方式选择将每个项目放入哪个 StackPanel。

# c# - 从 SqlServer 通知应用程序

> ID：666222
> 
> 赞同：2
> 
> 时间：2009-03-20T13:49:05.600
> 
> 标签：c#, sql, sql-server, triggers, replication

给定一个部署在两个远程站点的典型 3 层应用程序。两个安装背后的数据库包含完全相同的结构和相同的数据。两个后端数据库之间需要有一个复制机制来保持它们同步。SqlServer 的本机复制功能可以完成这项工作。但是，应用程序的业务层会缓存大量数据。如果我使用数据库级复制，业务层中的缓存会不同步。

**有没有办法创建通知业务层有关更改的 SQL 触发器？**

DB：SqlServer2005或2008，业务层：C#

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-20T13:57:38.030

复杂选项 A：如果您有静态 IP，您可以在应用程序中使用 WCF（TCP/IP 或 SOAP）并使用[SQL CLR](http://en.wikipedia.org/wiki/SQLCLR)调用它，否则您可以使用[WCF Peer-to-Peer，](http://msdn.microsoft.com/en-us/library/cc297274.aspx)尽管它可能会受到 SQL 的限制CLR。更进一步，您可以让 SQL CLR 与本地程序对话，然后告诉其他程序进行更新。

更简单的选项 B：站点 A 清除其一侧的缓存并在数据库中设置一个标志，SQL 复制抓取它，通知站点 B 清除它的缓存和标志。每当发现差异时，任一站点都会清除缓存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T14:44:38.527

看看查询通知，这里有几篇关于这个主题的文章：

[SQL Server 2005 查询通知在关键数据更改时通知 .NET 2.0 应用程序](http://www.code-magazine.com/article.aspx?quickid=0605061&page=1) [使用 .NET 2.0 中的查询通知来处理临时数据刷新](http://www.codeproject.com/KB/database/QueryNotifications.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-23T01:28:35.230

我已经为此功能使用了消息队列。该解决方案还应对应用程序之间的停机时间。只需确保将队列创建为事务队列，以确保在电源故障时保存消息。

有关如何在 SQL Server 2005 上使用它的示例，请参见[http://www.codeproject.com/KB/database/SqlMSMQ.aspx 。](http://www.codeproject.com/KB/database/SqlMSMQ.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-20T14:51:11.910

[Sql Cache Invalidation](http://www.dotnetspider.com/resources/2238-SQL-Cache-Invalidation-ASP-NET.aspx)可能会有所帮助。

# web-services - 如何将调试器附加到 Web 服务？

> ID：666226
> 
> 赞同：1
> 
> 时间：2009-03-20T13:50:58.170
> 
> 标签：web-services, debugging

我正在使用 Web 服务。谁能告诉我如何调试它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-20T13:54:29.083

附加到正在执行应用程序池的 w3wp.exe 实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T13:52:21.520

此解决方案用于调试 asmx 或 wcf-webservices：
附加到服务 (w3wp) 的进程，而不是客户端！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-20T13:52:51.113

这一切都取决于，您是否拥有 Web 服务，或者您是否尝试通过连接到 Web 服务的应用程序来调试 Web 服务？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-20T13:55:25.243

如果您可以控制 Web 服务，只需将其添加到您的解决方案中，从 localhost（或您拥有适当凭据的服务器）运行它，然后通过 IDE 单步执行即可。

如果您无法控制它，那么您就不走运了，并且任由提供它的人摆布。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-15T14:32:17.770

调试器.Launch();

当您将其添加到您的代码（位于服务器的背面）时，您可以调试

# reporting-services - SSRS 2008 是否应该与数据库位于不同的计算机上？

> ID：666237
> 
> 赞同：2
> 
> 时间：2009-03-20T13:53:20.567
> 
> 标签：reporting-services, ssrs-2008

我已经看到安装 SSRS 2005 的建议，它指出您应该将其与托管报告数据源的数据库引擎分开，您不应该将它们安装在同一台服务器上。

SSRS *2008*是否有提供安装指南/最佳实践的等效文档？我假设 SSRS 2008 的情况与 SSRS 2005 的情况相同，但无法找到任何相关文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2011-09-05T09:43:42.013

SQL Server 客户咨询团队的这一系列网页为 SSRS 2008 提供了建议

*   [Reporting Services 横向扩展架构](http://sqlcat.com/sqlcat/b/technicalnotes/archive/2008/06/05/reporting-services-scale-out-architecture.aspx)
*   [报表服务器目录最佳实践](http://sqlcat.com/sqlcat/b/technicalnotes/archive/2008/06/26/report-server-catalog-best-practices.aspx)
*   [Reporting Services 横向扩展部署最佳实践](http://sqlcat.com/sqlcat/b/technicalnotes/archive/2008/10/21/reporting-services-scale-out-deployment-best-practices.aspx)
*   [Reporting Services 性能优化](http://sqlcat.com/sqlcat/b/technicalnotes/archive/2009/01/14/reporting-services-performance-optimizations.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-21T13:53:14.817

我无法向您指出任何具体的文件。但是，在过去 5 年中，我曾多次访问位于北卡罗来纳州夏洛特的 Microsoft 测试实验室，以测试基于 SQL Server 00/05/08 SSRS 的应用程序，并得到了 MS SQL 专家的明智建议。

他们建议不要在数据库服务器上运行除 SQL 引擎之外的其他应用程序。这包括 SSRS。这在 SQL 2000 产品中根本不容易实现，但使用 SQL 2008 中的横向扩展选项变得更容易理解。

它确实取决于您的应用程序的负载配置文件。您需要测试和量化引擎负载与报告负载。

一个考虑因素是 SSRS '08 的内存和 CPU 消耗明显低于 '05，因为 Microsoft 和我们的测试证实了报告引擎的重新设计。

我的建议是加载/压力测试您的应用程序并相应地调整您的硬件和部署策略。在此环境中使用 Microsoft 测试实验室是一个很好的环境，因为他们拥有大量硬件来测试多个规模方案以确定目标部署方案的选项。

我希望这能提供一些见解。

# visual-studio - VS2008中构建配置管理器的作用是什么？

> ID：666240
> 
> 赞同：0
> 
> 时间：2009-03-20T13:54:21.657
> 
> 标签：visual-studio, visual-studio-2008

我正在为 Visual Studio 2008 中构建配置管理器的目的而苦苦挣扎。具体来说，我有兴趣了解它在开发控制台应用程序和 Web 应用程序（Web 应用程序项目）时的作用。当您在 VS2008 的上下文中开发和运行应用程序时，将其设置为 Debug 或 Release 模式有什么不同吗？当您想要构建解决方案时，它有什么作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-20T15:05:57.600

构建配置管理器允许您为解决方案设置不同的项目构建选项组合。例如，假设您有一个包含 4 个项目、log4net、一个 DAL、一个业务层和网站的解决方案。大多数时候，您希望在调试模式下运行网站和业务层，但在发布模式下运行 DAL 和 log4net。有时您也希望在调试中运行 DAL，但只有在极少数情况下您才会希望在调试中运行所有内容。配置管理器允许您定义这样的配置。

此外，您可以根据需要定义一个 x64 构建，其中一些项目以 x64 为目标，而另一些则以 AnyCPU 为目标。甚至是排除特定项目并根据需要包含其他项目的构建目标。

简而言之，配置管理器让您可以控制进程间构建关系，其级别超出了简单的调试全部或全部发布。

我也猜想，99% 的时间你都不需要弄乱配置管理器。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-20T15:26:07.240

我发现这个工具在以下情况下非常有用：

1-您的解决方案中有很多项目，并且您只想构建您当前正在处理的项目（这需要 10 秒而不是 2 百万）

2- 您必须定期生成不同类型的构建（调试与发布、x64 与 x86 等）

要回答您关于调试和发布模式之间差异的问题，它肯定会有所作为。通常，VS 在调试模式下编译时会“按原样”编译您的代码，而在发布模式下会优化（即内联等）内容。

例如，如果您构建此代码：

```
 public bool Foo(){
    return true; // put a breakpoint here, and move the execution position to the next line
    console.WriteLine("Foo"); 
    return true;
   } 
```

在调试模式下，您将能够做到这一点，而不是在发布模式下（因为编译器检测到代码无法访问，并且根本没有构建它。

# c# - 如何让正则表达式匹配只添加一次到匹配集合中？

> ID：666241
> 
> 赞同：17
> 
> 时间：2009-03-20T13:54:26.557
> 
> 标签：c#, regex

我有一个字符串，其中有几个 html 注释。我需要计算一个表达式的唯一匹配。

例如，字符串可能是：

```
var teststring = "<!--X1-->Hi<!--X1-->there<!--X2-->"; 
```

我目前使用它来获取匹配项：

```
var regex = new Regex("<!--X.-->");
var matches = regex.Matches(teststring); 
```

结果是3场比赛。但是，我希望这只有 2 场比赛，因为只有两个独特的比赛。

我知道我可能可以遍历生成的 MatchCollection 并删除额外的匹配，但我希望有一个更优雅的解决方案。

*澄清*：示例字符串与实际使用的字符串相比已大大简化。很容易有一个 X8 或 X9，并且每个字符串中可能有几十个。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-03-20T14:09:37.987

我会像这样使用[Enumerable.Distinct 方法：](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.distinct.aspx)

```
string subjectString = "<!--X1-->Hi<!--X1-->there<!--X2--><!--X1-->Hi<!--X1-->there<!--X2-->";
var regex = new Regex(@"<!--X\d-->");
var matches = regex.Matches(subjectString);
var uniqueMatches = matches
    .OfType<Match>()
    .Select(m => m.Value)
    .Distinct();

uniqueMatches.ToList().ForEach(Console.WriteLine); 
```

输出这个：

```
<!--X1-->  
<!--X2--> 
```

* * *

对于正则表达式，您可以使用这个吗？

```
(<!--X\d-->)(?!.*\1.*) 
```

似乎至少可以在 RegexBuddy 中处理您的测试字符串 =)

```
// (<!--X\d-->)(?!.*\1.*)
// 
// Options: dot matches newline
// 
// Match the regular expression below and capture its match into backreference number 1 «(<!--X\d-->)»
//    Match the characters “&lt;!--X” literally «<!--X»
//    Match a single digit 0..9 «\d»
//    Match the characters “-->” literally «-->»
// Assert that it is impossible to match the regex below starting at this position (negative lookahead) «(?!.*\1.*)»
//    Match any single character «.*»
//       Between zero and unlimited times, as many times as possible, giving back as needed (greedy) «*»
//    Match the same text as most recently matched by capturing group number 1 «\1»
//    Match any single character «.*»
//       Between zero and unlimited times, as many times as possible, giving back as needed (greedy) «*» 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-20T14:28:08.050

看来您正在做两件事：

1.  匹配注释，如 /<-- X.-->/
2.  找到一组独特的评论

因此，将这些作为两个不同的步骤处理是相当合乎逻辑的：

```
var regex = new Regex("<!--X.-->");
var matches = regex.Matches(teststring);

var uniqueMatches = matches.Cast<Match>().Distinct(new MatchComparer());

class MatchComparer : IEqualityComparer<Match>
{
    public bool Equals(Match a, Match b)
    {
        return a.Value == b.Value;
    }

    public int GetHashCode(Match match)
    {
        return match.Value.GetHashCode();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-20T13:57:23.740

提取评论并将它们存储在一个数组中。然后您可以过滤掉唯一值。

但我不知道如何在 C# 中实现这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-20T14:21:19.563

将评论的内部部分捕获为一个组。然后将这些字符串放入哈希表（字典）中。然后向字典询问它的计数，因为它会自我清除重复。

```
var teststring = "<!--X1-->Hi<!--X1-->there<!--X2-->";
var tokens = new Dicationary<string, string>();
Regex.Replace(teststring, @"<!--(.*)-->",   
     match => {  
     tokens[match.Groups[1].Value] = match.Groups[1].Valuel;  
     return ""; 
     });
var uniques = tokens.Keys.Count; 
```

通过使用 Regex.Replace 构造，您可以在每次匹配时调用一个 lambda。由于您对替换不感兴趣，因此不要将其设置为等于任何值。

您必须使用 Group[1] 因为 group[0] 是整个匹配。我只是在两边重复同样的事情，这样更容易放入只存储唯一键的字典中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-20T14:23:04.817

根据您拥有的 Xn 数量，您可以使用：

```
(\<!--X1--\>){1}.*(\<!--X2--\>){1} 
```

只要它们按顺序排列，那只会匹配 X1、X2 等的每次出现。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-10T12:42:25.207

如果您想从 MatchCollection 中获得不同的匹配列表而不转换为字符串，则可以使用以下内容：

```
 var distinctMatches = matchList.OfType<Match>().GroupBy(x => x.Value).Select(x =>x.First()).ToList(); 
```

我知道已经有 12 年了，但有时我们需要这种解决方案，所以我想分享一下。C# 进化了，.NET 进化了，所以现在更容易了。

# html - HTML 表格行

> ID：666246
> 
> 赞同：0
> 
> 时间：2009-03-20T13:56:14.477
> 
> 标签：html, asp.net, html-table

关闭行的可见性并消除间隙的最佳方法是什么。反之亦然，如果打开可见性确保可见行再次显示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-20T13:58:40.150

如果您希望在客户端上执行此操作（即通过 javascript），请尝试将 style.display 设置为“none”（并设置“block”以重新打开它）。

如果您希望在服务器上处理它，请将行的可见性设置为 false，这将阻止该行呈现。

编辑 - 举例：

```
函数 ShowHideRow（行，显示）
{
    document.getElementById(row).style.display = (show ? 'block' : 'none');
}

```

请注意，您可能希望遵循 Mufasa 的建议并使用 table-row 而不是 block。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-20T14:38:26.310

如果您按照目前的建议使用显示属性来执行此操作，则必须担心块与表格行。table-row 是正确的，但 IE 不支持，所以你必须浏览器嗅探才能选择。

可能更容易避免直接设置样式，而是使用 CSS 类规则：

```
tr.hidden { display: none; }

row.className= 'hidden'; // sets display to none
row.className= ''; // resets display to its default value 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-20T14:00:20.847

您需要将行 (the) 的“显示”属性设置为“无”。通过 Chris 所说的 JavaScript 或 CSS。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-20T14:00:59.207

Chris 是对的，只是将值设置回正确的表格显示类型会在再次显示时更正确一些。对于 a `<TR>`，您将使用`display: table-row`. 请参阅[CSS 显示属性](http://www.w3schools.com/css/pr_class_display.asp)。

更新：bobince 的响应是关于如何使用（而不是使用）显示属性的更实际的响应。

# c# - 如何通过 Web 服务进行调试

> ID：666267
> 
> 赞同：0
> 
> 时间：2009-03-20T14:02:22.120
> 
> 标签：c#, web-services

使用 VS 2005 SP1 我有一个包含 windows 项目和 web 服务项目的解决方案。Windows 应用程序调用 Web 服务。我在 Web 服务方法的第一行有一个断点。当我在调试模式下运行 Windows 应用程序时，对 Web 服务的调用会被执行并返回，但不会触发 Web 服务中的断点。

是否有特殊设置可以让调试器单独进入 Web 服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-20T14:04:16.390

我认为您需要在调试时告诉 Visual Studio 启动这两个项目。尝试在解决方案资源管理器中右键单击解决方案，然后选择“多个启动项目”。将要调试的每个项目的操作更改为“开始”。

# c# - C#、Lokad.Shared：如何编写自定义规则以与 Enforce 一起使用

> ID：666268
> 
> 赞同：2
> 
> 时间：2009-03-20T14:02:22.807
> 
> 标签：c#

我正在试用[Lokad 共享库](http://abdullin.com/shared-libraries/)，它看起来非常有趣和有用。我可以使用例如：

```
Enforce.Arguments(() => arg1, () => arg2); 
```

如果 arg1 或 arg2 为空，则抛出异常。但我想检查一个 IEnumerable 是否至少有一项。我可以使用：

```
Enforce.That(someSequence.Count() > 0); 
```

但这不会产生非常有用的错误消息。我试图查看示例代码等，以了解如何编写和使用自定义规则。但我似乎无法弄清楚！

我已经走了这么远（或更准确地说是……）：

*   我应该创建一个类来收集我的规则。
*   我想我需要以某种方式创建一个`Lokad.Rules.Rule<T>`代表？
*   这可能需要用 IScope 做一些事情，不管那是什么......
*   然后以某种方式将该规则与其中一种 Enforce 方法一起使用，尽管我不太确定如何...

总而言之，这就是我想要的结果：

```
public static void DoStuff<T>(this IEnumerable<T> subjects)
{
    Enforce.Argument(() => subjects);
    // Somehow in an equally smooth way check that 
    // subjects contains at least one element

    // Do stuff
} 
```

有谁能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-27T09:58:11.580

[在Rinat Abdullin](http://abdullin.com/)[的博客文章](http://abdullin.com/journal/2008/12/22/better-c-design-contracts-in-lokad-shared-libraries.html?lastPage=true#comment3420518)中提出了同样的问题。得到了这个答案：

> 这是最简单的用法实现：
> 
> ```
>  public static class EnumerableIs
>     {
>         public static void NotEmpty<T>(IEnumerable<T> collection, IScope scope)
>         {
>             if (!collection.Any())
>             {
>                 scope.Error("Enumerable can't be empty.");
>             }
>             scope.ValidateInScope(collection);
>         }
>     }
> 
>     [Test, ExpectedException(typeof(ArgumentException))]
>     public void Test()
>     {
>         IEnumerable<object> t = null;
>         Enforce.Argument(() => t, EnumerableIs.NotEmpty);
>     }
> 
>     [Test, ExpectedException(typeof(ArgumentException))]
>     public void Test2()
>     {
>         var t = new int[0];
>         Enforce.Argument(() => t, EnumerableIs.NotEmpty);
>     }
> 
>     [Test, ExpectedException(typeof(ArgumentException))]
>     public void Test3()
>     {
>         var t = new[] { new object(), null };
>         Enforce.Argument(() => t, EnumerableIs.NotEmpty);
>     } 
> ```

这实际上确实有效。测试方法通过以下消息引发异常：

> Test1：“IEnumerable`1”类型的对象不应为空。参数名称：t
> 
> Test2：Enumerable 不能为空。参数名称：t
> 
> Test3：“对象”类型的对象不应为空。参数名称：t。[1](http://abdullin.com/journal/2008/12/22/better-c-design-contracts-in-lokad-shared-libraries.html?lastPage=true#comment3420518)

不太确定 Test1 和 Test3 是从哪里得到消息的……就像它在`NotEmpty<T>`方法中检查的地方……所以我问过这个问题……

# wpf - 在 WPF 中设置嵌套元素的样式

> ID：666269
> 
> 赞同：67
> 
> 时间：2009-03-20T14:03:00.123
> 
> 标签：wpf, nested, styles, children

假设您有一个嵌套的元素结构，例如带有 MenuItems 的 ContextMenu：

```
<ContextMenu Style="{StaticResource FooMenuStyle}">
    <MenuItem Style="{StaticResource FooMenuItemStyle}"/>
    ...
</ContextMenu> 
```

您可以轻松地将样式或模板应用于 ContextMenu 或 MenuItem 元素。但是，如果 MenuItem 样式属于 Menu 样式，则将其添加到每个 MenuItem 元素是非常麻烦和多余的。

有什么方法可以将它们自动应用于子元素？这样你就可以简单地写这个：

```
<ContextMenu Style="{StaticResource FooMenuStyle}">
    <MenuItem/>
    ...
</ContextMenu> 
```

如果 FooMenuStyle 可以设置包含 MenuItem 元素的样式，那就太好了，但这似乎是不可能的。

编辑： Menu 示例可能具有误导性，因为我不知道 ItemContainerStyle 并且意图是通用解决方案。基于这两个答案，我想出了两个解决方案：一个是通用变体，一个是 ItemContainerStyle 等：

```
<Style x:Key="FooMenuItem" TargetType="{x:Type MenuItem}">
    ...
</Style>

<Style x:Key="FooMenu" TargetType="{x:Type ContextMenu}">
    <!-- Variant for specific style attribute -->
    <Setter Property="ItemContainerStyle"
            Value="{StaticResource FooMenuItem}"/>

    <!-- General variant -->
    <Style.Resources>
        <Style TargetType="{x:Type MenuItem}"
               BasedOn="{StaticResource FooMenuItem}"/>
    </Style.Resources>
</Style>

<ContextMenu Style="{StaticResource FooMenu}">
    <MenuItem/>
</ContextMenu> 
```

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2010-11-02T13:45:14.657

只是为了完成原始答案，我认为在父级内部添加嵌套样式会更清楚：

```
<Style x:Key="WindowHeader" TargetType="DockPanel" >
    <Setter Property="Background" Value="AntiqueWhite"></Setter>
    <Style.Resources>
        <Style TargetType="Image">
            <Setter Property="Margin" Value="6"></Setter>
            <Setter Property="Width" Value="36"></Setter>
            <Setter Property="Height" Value="36"></Setter>
        </Style>
        <Style TargetType="TextBlock">
            <Setter Property="TextWrapping" Value="Wrap"></Setter>
        </Style>
    </Style.Resources>
</Style> 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2009-03-20T14:07:14.573

```
<ContextMenu>
   <ContextMenu.Resources>
      <Style TargetType="{x:Type MenuItem}">
         <!--Setters-->
      </Style>
   </ContextMenu.Resources>
   <MenuItem/>
   <!--Other MenuItems-->
</ContextMenu> 
```

该样式将应用于 ContextMenu 中的所有 MenuItem 对象。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-20T14:27:18.893

```
<ContextMenu ItemContainerStyle="{StaticResource FooMenuItemStyle}">
    <MenuItem/>
</ContextMenu> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-13T15:11:29.453

*我完成此操作的方法是在*全局资源字典中创建一个*键控* ，然后仅将其应用于父元素。`ResourceDictionary`

 *在 app.xaml 中：

```
<Application.Resources>
  <ResourceDictionary>
    ...

    <ResourceDictionary x:Key="menuChildrenStyles">
      <Style TargetType="MenuItem">
        <!--Setters-->
      </Style>
    </ResourceDictionary>

    ...
  </ResourceDictionary>
</Application.Resources> 
```

然后在您的其他 xaml 视图中：

```
<ContextMenu Resources="{StaticResource menuChildrenStyles}">
  <MenuItem />
  <MenuItem />
  <MenuItem />
  <MenuItem />
</ContextMenu> 
```

这会将`MenuItem`样式应用于`MenuItem`父元素内的所有元素。

您还可以将其他样式添加到“menuChildrenStyles”字典中，例如 for`TextBlock`等。

# php - 匹配正则表达式中的固定格式数字

> ID：666272
> 
> 赞同：1
> 
> 时间：2009-03-20T14:03:28.517
> 
> 标签：php, regex

快速正则表达式问题（因为我对此很害怕）

我有一个只能包含以下任一字段的字段：

`XXXXXXXXXX`或者`XXXXXX-XXXX`X 是一个实数。

如果 regex 与 PHP 的 regex 函数很好地配合使用，则奖励。

**答案：**

对于那些感兴趣的人，这是来自**RoBorg答案的代码。**

```
if(!preg_match("/^\d{6}-?\d{4}$/", $var))
{
    // The entry didn't match
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-20T14:05:43.127

```
/^\d{6}-?\d{4}$/ 
```

那是

```
^     Start of string
\d{6} a digit, repeated exactly 6 times
-?    an optional "-"
\d{4} a digit, repeated exactly 4 times
$     end of string 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T14:06:14.687

很快，它会是这样的： `\d{6}-?\d{4}`

您可能必须在 PHP 中转义连字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-20T14:05:40.460

如果您想要一个特定的数字（问题措辞最初有些模棱两可），请搜索（例如）：

```
^123456-?7890$ 
```

如果搜索具有该格式的*任何*10 位数字，请搜索：

```
^\d{6}-?\d{4}$ 
```

破折号后的`?`限定词表示“前一个实体出现 0 次或 1 次”

# database-design - 数据库设计问题

> ID：666279
> 
> 赞同：0
> 
> 时间：2009-03-20T14:05:28.947
> 
> 标签：database-design

如果数据库设计为：

```
Table A
a (type x)
a is (PK)

Table B
a (type x)
a is (PK)

Table C
a (type x)
a is (FK) references A(a)
a is (FK) references B(a) 
```

这是正确的设计吗？如果不是，这种情况下最好的设计是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-20T14:21:23.650

因此，您希望仅当表 B 和 A 中存在相应行时才能在表 C 中插入一行。这些行必须具有相同的 id 值。为什么不合并表 A 和 B。拆分过多列的原因？要么这样做，要么删除表 C 中表 B 上的 fk 并在表 B 中添加对表 A 的引用。虽然我不完全确定你想通过这种设计实现什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T15:19:57.473

我相信您所指的情况是C可能是A或B的孩子。

例如

如果 A 是页面

B是图片

C是评论

C 可以是图片的评论或页面的评论。

在这种情况下，我会将 C 调整为双键，如下所示

```
Table C:
a (type x)
b (type CHAR) //<- defines which table a is the key of
INDEX(b,a)

SQL = SELECT * from C where b = TABLE_A_name and C.a = A.a 
or
SQL = SELECT * from C where b = TABLE_B_name AND C.a = B.a 
```

然后，您必须从应用程序端实现数据完整性。

因此在外键实现和数据完整性方面是模糊设计。问题是应用程序功能是否值得混乱，以及它是否会处于管理良好的环境中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-03-20T14:18:40.303

这就是所谓的[星型模式设计](https://stackoverflow.com/questions/110032/star-schema-design)，它是针对一组问题的正确设计。除非您定义您的问题，否则无法告诉您它是否是一个好的设计。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-03-20T14:24:09.137

看起来你有一个三元关系。如果不知道 A、B 和 C 是什么，就无法判断您是否拥有“正确”的设计。

# c++ - 取消引用运算符和函数的问题

> ID：666280
> 
> 赞同：3
> 
> 时间：2009-03-20T14:05:33.347
> 
> 标签：c++, pointers

我有一个函数 A()，它返回一个指向对象的指针。在函数 B() 中，我尝试通过以下方式更改该对象的成员：

```
void B()
{
    ObjType o = *getObj();
    o.set("abc");
} 
```

对象o存储在一个数组中，当我打印成员的值时，似乎什么也没发生，成员仍然具有旧值；

解决方案非常简单：

```
void B()
{
    ObjType * o = getObj();
    o->set("abc");
} 
```

这确实有效。但对我来说，这和第一个样本完全一样。谁能解释一下？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-20T14:08:39.237

以下行很可能是在复制对象：

```
ObjType o = *getObj(); 
```

这就是为什么什么都没有发生。如果您不想使用第二个片段中显示的指针，则可以使用如下引用：

```
ObjType& o = *getObj();
o.set("abc"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-20T14:08:14.870

第一个创建对象的副本。第二个创建一个指向它的指针。在第一种情况下，您正在修改副本。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-20T14:09:11.420

当然不一样。第一个将返回的指针指向的对象复制到堆栈上的本地对象中，然后修改副本。

第二个保留一个指向返回对象的指针，并通过指针修改它，从而改变原来的。

第三种解决方案是使用引用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-20T14:10:46.890

两者完全不同：

```
 ObjType o = *getObj(); 
```

创建一个名为 o 的对象的新副本

```
 ObjType * o = getObj(); 
```

创建一个名为 o 的指针，该指针指向现有副本 - 没有创建新对象

# html - 我的客户将图片添加到网站的最佳方式是什么

> ID：666288
> 
> 赞同：2
> 
> 时间：2009-03-20T14:06:49.630
> 
> 标签：html, content-management-system

我正在与一位艺术家合作制作她的个人网站。她想从网站上出售她的作品。问题是，她希望自己能够添加、删除艺术品并为其定价。她还想使用贝宝作为付款方式。

显然设计和编码对我来说很容易，这都是静态的。但是，我不确定最好的方法是为她自己添加艺术品设置方法。

我知道有一些开源电子商务网站（magento、zencart 等），但我从未使用过这些网站，我觉得它们对于一个简单的艺术网站来说可能有点矫枉过正。我应该使用其他一些非常简单的东西吗？

非常感谢任何一般的想法或建议。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-20T14:19:44.513

使用电子商务网站，如果她想卖东西，这是显而易见的选择。

Zencart 并没有你想象的那么矫枉过正——它允许你使用它的管理 gui 从站点中删除所有你不想要的部分；所以你只保留类别和购物车部分。

它还具有提供付费和下载链接的选项（IIRC，但我可能正在考虑不同的选项，例如 CRELoaded）。

当然，重用电子商务代码比编写自己的代码要容易得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T14:42:32.477

始终使用现有的商业网站框架。犯一个愚蠢的错误太容易了，这让黑客可以接管服务器的控制权。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-20T14:12:19.180

为什么不创建一个简单的管理面板，她/他可以在其中添加、删除和定价艺术品？你知道任何编程语言吗？php？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-20T14:14:19.987

我最近发现了一种使用 php 和 javascript 上传、调整缩略图大小和显示文件夹中所有上传内容的非常酷（且免费）的方法。

从免费教程中获取此代码并将其与自定义 javascript 库配对看起来非常漂亮（用于我自己的摄影网站以及一些喜欢它的客户）。

很快我将把它与一个历史悠久的高尔夫球场建筑师的网站结合起来......一位绅士来找我，他想在网上存储数百张照片，但他希望能够随时上传自己。诀窍是：如果您的客户艺术家想自己定价，画廊使用将要求她能够导航基本的 html 框架，以便在她添加/更改图片时更改显示在所有图片下方的描述。

如果您想自己开始，请查看此处的一些教程：http: [//net.tutsplus.com/category/videos/screencasts/page/3/](http://net.tutsplus.com/category/videos/screencasts/page/3/)

以及找到一个你们都喜欢的画廊，以一种有吸引力的方式展示照片......如果你想从我这里得到任何其他东西，请告诉我:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-20T14:18:30.867

[Virtuemart](http://virtuemart.net/)基于 Joomla CMS ，非常易于设置，是一个开源电子商务解决方案。你可能会发现很多[Joomla 的免费扩展，](http://extensions.joomla.org/)用于照片库和其他东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-20T15:16:18.823

[Gallery2](http://gallery.menalto.com/)是一款出色的网络图库软件，适用于展示图像、视频和音频。

它有一个“使用 PayPal 结帐”插件。

Gallery2 需要一些时间来配置，您不太可能在安装后“按原样”使用它。

Gallery2 易于嵌入 - 提供最少的 PHP 技能和良好的 HTML/CSS 技能，可以使其适合任何设计（也许除了网格状缩略图布局，我猜这是可能的，但比一般情况更难）。

# javascript - 获取页面源

> ID：666290
> 
> 赞同：0
> 
> 时间：2009-03-20T14:07:58.223
> 
> 标签：javascript, html

我的页面中有以下代码

```
<html>
<head> 
    <title>testpage</title>
    <script language = 'javascript'>function fchange(){alert(document.getElementById("ifrm").value);</script>
</head>
<body>
    <iframe id = 'ifrm' src = 'http://www.google.com' width = '700' height='500'></iframe><input type='button' onclick = 'fchange()' value = 'clickhere'>
</body>
</html> 
```

从这里我单击按钮并显示一个警报框`undefined`。但我需要页面的内容或来源（' [http://www.google.com](http://www.google.com) '）。请帮助我做到这一点。

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-20T14:13:36.230

如果您想要 iframe 的来源，则需要访问 iframe 的文档对象。

```
function fchange() 
{
    alert(document.getElementById("ifrm").contentWindow.document.body.innerHTML);
} 
```

正如其他人所提到的，您无法获取指向域外页面的 iframe 的来源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-20T14:16:29.140

你不能这样做，因为它违反了[同源策略](http://code.google.com/p/browsersec/wiki/Part2#Same-origin_policy)。

如果两个页面都在同一个域上，那么您可以按照@Joel 的建议进行操作，或者使用更老式的方法：

```
window.frames['ifrm'].document.body.innerHTML; 
```

你需要`<iframe name="ifrm" ...>`这个工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-20T14:16:45.863

您需要为此提供后端脚本。我认为这是唯一的方法。出于安全原因，AJAX 不允许向其他域发出请求。

# c# - AppDomain.CreateInstance

> ID：666301
> 
> 赞同：1
> 
> 时间：2009-03-20T14:10:39.513
> 
> 标签：c#, appdomain

当我们使用 AppDomain.CreateInstance("Assembly name", Type name) 并且我的类继承自 MarshalByRefObject 时，内部会发生什么？它是创建一个 TransparetnProxy 吗？

代码：

```
class Greet : MarshalByRefObejct
{
  ...
}

class test
{
 public static void Main(string[] args)
 {
   AppDomain ad = AppDomain.CreateDomain("Second");
   ObjectHandle hObj = ad.CreateInstance("Test", args[0]);
  ....
 }
} 
```

传入 args[0] = Greet

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-20T14:16:49.670

是的，它创建了一个透明代理，您可以通过展开对象句柄来获得它。

我发现[文档和示例的`ObjectHandle.Unwrap`](http://msdn.microsoft.com/en-us/library/system.runtime.remoting.objecthandle.unwrap.aspx)信息量很大，一般[`MarshalByRefObject`文档](http://msdn.microsoft.com/en-us/library/system.marshalbyrefobject.aspx)也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T14:17:56.407

是的。

您可能还想看看[CreateInstanceAndUnwrap](http://msdn.microsoft.com/en-us/library/system.appdomain.createinstanceandunwrap.aspx)。如果您在 Main 和 Greet 类中的代码共享一个公共接口，您可以将 hObj 强制转换到您的接口中并使用 TransparentProxy 调用它的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T13:46:56.597

`AppDomain.CoCreateInstance()`接受两个参数，即哪个程序集及其类型名称。

并且它返回一个`ObjectHandle`用于在程序集中创建指定类型的实例，并且还提供了`wrap(serialized)`当它被实例化时以及当它需要时它`unwrap(deserialized)`返回到真实的句柄`Proxy`。

# c# - 使用实体框架将实体映射到数据库

> ID：666306
> 
> 赞同：3
> 
> 时间：2009-03-20T14:11:03.740
> 
> 标签：c#, .net, entity-framework, mapping

我用实体框架制作了一个相当大的域模型。我想知道是否可以映射它，以便我在数据库中自动创建所需的表？

我查找了 edmgen.exe，但仍然找不到正确的命令。

谢谢你的帮助！

Edit1：我知道 Mindscape 的 LightSpeed 工具提供了这个功能，这就是为什么我认为实体框架也是如此。

Edit2：没有人喜欢我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-20T16:05:50.250

目前此功能不可用，但我认为此功能将随 vs2010 一起提供

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-27T16:19:02.360

根据此[博客条目](http://blog.nakedobjects.net/?p=58)，目前 (v1) 无法从实体模型创建数据库。

在“2\. 工艺和工具问题”标题下大约一半，您会发现：

> *   目前无法从实体模型自动创建数据库模式。这简直是​​非凡的——因为它似乎很容易做到！

让我们期待 EF v2（在 .NET 4.0 / VS2010 中）。

马克

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-20T16:02:16.593

我的猜测是答案是否定的。实体框架不一定要将 1-1 映射到数据库，它实际上应该是您希望如何使用存储在数据库中的数据的业务对象表示。因此，编写从您的实体模型创建数据库的东西将非常非常困难，因为您不能期望事物会在 1-1 级别上映射回数据库。

# vim - 在 vim 中编辑多个缓冲区：状态行中的“((1) of 3)”

> ID：666309
> 
> 赞同：3
> 
> 时间：2009-03-20T14:11:55.030
> 
> 标签：vim, buffer

当我在 vim 中使用 ":bn" 和 ":bp" 在缓冲区之间切换时，我的状态行会显示以下方便的信息：

```
"foo.txt" 43 lines --88%-- ((1) of 3)                      38,1          All 
```

（我认为是“设置显示模式”实现了这一点。）但是“（1）”总是字面上的“（1）”——它不会随着我改变缓冲区而改变。（“1”周围的括号也很奇怪。）

有谁知道如何解决这个问题？

补充：这可能与我的 .vimrc 中的一些疯狂的东西有关，这里是：http: [//yootles.com/outbox/.vimrc](http://yootles.com/outbox/.vimrc)

* * *

相关地，这里有一个方便的技巧可以让切换缓冲区变得非常轻松（.vimrc 中的条目）：

```
"left/right arrows to switch buffers in normal mode
map <right> :bn<cr>
map <left> :bp<cr> 
```

* * *

提高可搜索性的关键字：vim、多个缓冲区、在缓冲区之间切换、奇怪的状态行。[如果您正在寻找此问题的答案并且在第一次尝试时没有找到此问题，请在此处添加其他人！]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-27T15:25:21.727

vim 显示 ((1) of 3) 的原因是因为参数列表。当您启动 vim 时，您可能包含 3 个文件名作为参数。因为你使用 :bn/:bp 来切换缓冲区而不是 :n/:N 来移动参数列表，所以你仍然在参数 1 上。阅读 :h arglist-position。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T14:21:10.330

您可以自定义状态栏的外观；例如，这是我的：

```
set laststatus=2    " all windows have statuslines
set statusline=%mb%n:%f%R%Y\ %l/%L,%c:%v 
```

* * *

第一次编辑：

尝试在帮助中查找

```
:help arglist-position
:help shortmess 
```

我从来没有使用过这些选项，所以我不能给你一个详细的解释，但是通过一些阅读你应该能明白这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-20T14:47:00.220

在我的情况下，状态行是好的，但 gvim 的标题看起来像你说的。

您可以考虑将**statusline**和**titlestring**更改为相同的值，因为它们使用相同的模式选项。

为了方便地选择缓冲区，您可以使用
minibufexpl.vim ：优雅的缓冲区资源管理器 - 占用很少的屏幕空间
[http://www.vim.org/scripts/script.php?script_id=159](http://www.vim.org/scripts/script.php?script_id=159)

或
0scan ：基于标签的搜索，搜索您可能想要查找的任何内容（ctags、缓冲区、...）。
[http://www.vim.org/scripts/script.php?script_id=2507](http://www.vim.org/scripts/script.php?script_id=2507)

# apache-flex - 禁用 FLEX 中的“是”按钮

> ID：666317
> 
> 赞同：0
> 
> 时间：2009-03-20T14:14:50.750
> 
> 标签：apache-flex, alert

我想禁用警报框中的“是”按钮。这可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-20T15:08:31.620

你的意思是禁用还是隐藏？

我不认为您可以启用/禁用警报框中的按钮，但您可以选择将显示哪些按钮，例如：

```
Alert.show('Text Copied!', 'Alert Box', Alert.YES | Alert.NO); 
```

有效按钮：

```
mx.controls.Alert.OK
mx.controls.Alert.YES
mx.controls.Alert.NO
mx.controls.Alert.CANCEL 
```

此处的完整文档：[警报控制](http://livedocs.adobe.com/flex/3/html/help.html?content=controls_19.html)

如果您真的打算启用/禁用按钮，您可以基于`TitleWindow`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-01-03T00:46:31.570

尝试这个：

```
import mx.core.mx_internal;
use namespace mx_internal;

private var theAlert:Alert;

public function showAlert():void
{
  theAlert = Alert.show("Saving Changes...", "", Alert.YES + Alert.NO);
  theAlert.mx_internal::alertForm.mx_internal::buttons[0].enabled = false;
}

public function hideAlert():void
{
  PopUpManager.removePopUp(theAlert);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-20T14:59:54.387

看看这个[flex 示例](http://blog.flexexamples.com/2008/10/17/disabling-an-alert-control-in-flex/#more-834)页面上的示例是否对您有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-21T15:56:17.783

我会用您自己的自定义类扩展 Alert 类。添加一个位掩码来控制启用或禁用哪些按钮。然后覆盖 createChildren() 并在创建按钮时禁用它们。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-07-17T12:13:37.863

我会建议您创建自己的自定义警报，请参阅[此处的示例](http://webinky.com/flex/custom-alert-in-flex)

# c++ - 使用 C 从 C++ 访问公共类内存

> ID：666320
> 
> 赞同：1
> 
> 时间：2009-03-20T14:16:02.587
> 
> 标签：c++, c, memory, class

大家好。

我目前正在 UNIX 上用 C、C++ 和 fortran 编写多语言程序，不幸的是，当我在编译后尝试执行时遇到了“分段错误”。

我已将问题缩小到程序的 C++ 和 C 部分之间的接口。第一部分由 main.ccp 和 SA.cpp 组成，第二部分由 CFE.c 组成。

SA.cpp 中存在一个名为“SimAnneal”的类，具有公共向量 DensityArray 和 ElementArray。程序顺序如下：

1.  创建 SimAnneal 对象 'Obj1' 并调用函数 ObjFunction()

2.  该函数初始化向量大小

3.  使用指向两个向量及其长度的指针调用 CFE(...)。

4.  CFE.c 通过使用指针直接编辑向量的数据元素

5.  ObjFunction() 使用 EnergyArray（和可能的 DensityArray）数据。

所有来源的相关脚本如下：

主文件

```
#include "SA.h" 

int main() 
{   
    SimAnneal Obj1;

    Obj1.ObjFunction();

    return 0;
} 
```

SA.h

```
class SimAnneal 
{
    void Initialize ();
    ...
  public
    std::vector<float> DensityArray; 
    std::vector<float> EnergyArray;
    double ObjFunction ();
    ...
} 
```

SA.cpp

```
#include "CFE.h"

void SimAnneal::Initialize ()
{
    int length = 15;
    EnergyArray.resize(length);
DensityArray.resize(length);
}

double SimAnneal::ObjFunction () 
{
    Initialize ();

    CFE(&DensityArray[0], &EnergyArray[0], DensityArray.size()); 

      // sends pointers of both arrays to CFE.c, which will then 
      // directly modify the array

    double SumStrainEnergy = 0;

    for (int i = 0; i < EnergyArray.size(); i++)
    {
        SumStrainEnergy += EnergyArray[i];  //Effectively sum of array 
                                            //engy[] from CFE.c
    }

    return SumStrainEnergy;
} 
```

CFE.h

```
#ifdef __cplusplus
extern "C" {
#endif 

void CFE(float density[], float energy[], int NumElem);

#ifdef __cplusplus
 }
#endif 
```

CFE.c

```
void CFE(float density[], float energy[], int NumElem)
{
    ...

    float * dens;
    dens = density;  //pass pointer of array density[0] in SA.cpp to CFE.c

    for(n=0; n<NumElem; n++)
    { ... modify dens (e.g. DensityArray from SA.cpp) ... }

    float * engy;
    engy = energy; //pass pointer of array energy[0] in SA.cpp to CFE.c

    for(n=0; n<NumElem; n++)
    { ... modify engy (e.g. EnergyArray from SA.cpp) ... }   
} 
```

我是否通过尝试从程序的 C 部分访问向量元素而导致非法内存访问？有什么确定的方法可以允许这样做吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-03-20T14:23:10.807

如果您保持在向量的范围内，您正在做的事情似乎没问题。

**您可以通过执行您正在执行的操作将 std::vector 完全视为 C 数组 - 获取第一个元素的地址。C++ 标准已更改为专门允许这种用法。**

目前找不到 C++ The Technical Corrigendum 2003 的副本，但显然相关部分的参考是 23.2.4，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T14:58:55.793

您发布的代码似乎没问题 - 如果您想调试问题，您需要提供更多详细信息。实际上，如果您在调试器中运行程序，它应该能够准确地告诉您是哪一行代码导致了异常（您可能需要查看调用堆栈），或者只是单步执行程序直到它崩溃。

至于向量是否可以被视为C数组的混淆，它肯定可以通过获取第一个元素的地址（即，`&vect[0]`） - 如果向量包含元素。

C++03 标准`vector<>`在 23.2.4 中这样说：

> 向量的元素是连续存储的，这意味着如果`v`是 a`vector<T, Allocator>`其中`T`是 以外的某种类型`bool`，则它服从`&v[n] == &v[0] + n`所有的恒等式`0 <= n < v.size()`

请注意，这在 C++98 标准中没有明确说明（但仍然是意图）。

另见 Herb Sutter 的文章：

*   [http://herbsutter.wordpress.com/2008/04/07/cringe-not-vectors-are-guaranteed-to-be-contiguous/](http://herbsutter.wordpress.com/2008/04/07/cringe-not-vectors-are-guaranteed-to-be-contiguous/)

请注意，`vector<bool>`不能将其视为 C 数组 - 这是一种特殊情况，因为其中的元素`vector<bool>`不存储为`bool`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-20T14:19:34.640

你不能那样做。向量类与类 C 数组不同。

在将其传递给 CFE 函数之前，您必须将其转换为常规 C 数组。

编辑：显然我的答案是错误的。检查尼尔的帖子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-20T14:48:51.307

您发布的代码是正确的。如果对其中的数组元素的每次访问`CFE()`都在范围内，那么您不应该遇到分段错误。尝试在[valgrind](http://valgrind.org/)下运行你的程序，看看它是否报告了任何异常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-20T15:40:12.853

CFE() 的内容是什么？

为什么不将 CFE() 定义为；void CFE(float *density, float *energy, int NumElem);

所以你不必在演员表上胡闹，就去做；density[i] = ... 在你的循环中？

# c# - 有什么理由用 Java/C#/C++ 编写简洁的代码吗？

> ID：666340
> 
> 赞同：6
> 
> 时间：2009-03-20T14:20:58.660
> 
> 标签：c#, java, coding-style

你有没有发现自己用 Java、C# 或 C++ 编写了简洁的代码？

如果是这样，为什么？考虑到使用这些语言的情况，您认为在哪些情况下这是可以接受的？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-03-20T14:25:41.973

这取决于您对“简洁”的定义。

如果您的意思是“简明扼要”，那么它与我对*优秀*代码的愿景非常吻合。

如果您的意思是“神秘”，那么就有问题了。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-03-20T15:38:20.330

代码应该尽可能简洁，仅此而已。:)

除了轻率的评论之外，还有几个因素会影响它的简洁程度（或其他方面）：

*   寿命。

    *   通常比你想象的要长:)
*   错误的概率。

    *   可能性有多大取决于很多事情，但原始编码员在这方面发挥了重要作用。
*   计算机读取（解析）它。

    *   不只是编译器，想想智能感知之类的。
*   人类阅读它

    *   有时是原始的，有时是在差异工具等程序的帮助下。
    *   有时不是写它的同一个人。
*   所需的性能特征。

所有这些东西结合起来产生了一组有时可能需要或多或少冗长的相互竞争的力量。

平衡这些是有效发展的关键。哪个更重要完全取决于您的软件试图解决的问题。

首先，让我们来看看简单的部分：

### 电脑。

当他们阅读您的代码时，他们完全有能力这样做，而不管其冗长程度如何。它们可能会慢一些，但这通常是难以衡量的（你不太可能超过最小理论可能性的 1 或 2 个数量级）。值得注意的例外是您（ab）通过预处理器使用元编程之类的东西来为您进行大量扩展。这在编译时可能需要很*长时间。*在这里，您必须决定这种折衷是否值得。

### 人类。

通常，他们将是与您具有相似背景的人，并且他们将在与您编写源代码时相似的情况下阅读源代码。这意味着如果函数位于名为 Foo 的文件/类/模块中，则无需将 Foo 放在事物前面，它的 Foo 方面应该从上下文中非常清楚。这使得将来更容易改变这个方面。

熟悉您正在使用的编程语言/风格的惯用语的程序员将非常有能力理解几个非常简洁的结构。例如，称为“i”的循环索引变量尽可能简洁，但在循环变大之前通常不是问题。
在这里，您会看到一个有趣的二分法。简洁的价值通常与它所在的代码块的复杂性成正比。随着这个块变得更加简洁，其中的变量从缩小中受益更多。通过在责任有限的函数/类中编写代码，使事情保持简洁变得更容易和更有帮助，因为人类的混淆范围更小。矛盾的是，这可能导致需要更明确的上下文，因此需要更长的方法和类名。

### 寿命

错误的寿命和概率会影响您阅读代码或调试代码的频率。许多调试器支持一行上的多个点的断点（正确地发现有两个语句的位置），但有些不支持。因此，如果您打算在其中进行大量断点，则应小心，以确保您可以以最小的努力放置和控制它们。

如果代码的错误概率低但生命周期长，那么您会遇到另一种有趣的情况。当您需要更改代码时，代码被理解的可能性要低得多（您的记忆力会更差，甚至可能不再存在）。因此，此代码将受益于比正常代码略少一些。

### 表现

有时，您可能不得不牺牲紧凑但清晰的表示来满足性能目标，例如，也许您必须进行位打包，这在代码中读起来从来都不是一件好事，但如果您必须容纳一定数量的内存，这是不可避免的。希望这样的情况很少见。

### 一般概念

一些语言结构可以鼓励简洁的代码（自动属性、匿名内部类、lambdas 等等）。在这些概念有意义的地方，请明智地使用它们。这个想法是他们减少样板并暴露*意图*。

如果您重复做同样的事情并且有一定数量的代码重复，请考虑共享函数/类/模块，但请记住，如果您必须使共享代码不那么清晰（比如在一个代码路径中添加一个额外的 if 语句或未使用的变量) 那么你可能没有净赢。

类型推断很强大，但请记住，编译器有时比人类更擅长。如果你说`flibble x = new flibble()`then`var x = new flibble()`根本没有延伸（并且随着 flibble 变大而变得更好）。与 比较`var flibble = SomeMethodWhoseReturnTypeIsNotClear()`。常识在这里有帮助，如果你永远不必使用智能感知来解决它，你当然应该考虑使用它。

其他一些有用（且简洁）的经验法则：

*   一条线上的多个动作常常使人类感到困惑。
*   副作用常常使人类感到困惑（++x 或 x++ 在概念上根本不重要，除非是更广泛的表达的一部分）
*   缩进比括号更能帮助大多数人推断结构
*   优先规则通常被人类“内化”，而不是作为一组规则被记住。这意味着（对编译器而言）不必要的括号可能对可读性有害，其中惯用语很常见，但在用法不常见的情况下很有用。
*   逻辑非通常是单个字符。在 if 语句中使用它时，请考虑是否可以将其重组为不需要它。这可能是不可能的（如果对变量/方法名称或代码顺序造成的扭曲超过了删除保留它）

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-03-20T14:26:06.120

这取决于您所说的“简洁”到底是什么意思。我当然喜欢编写*简洁*的代码，以最简单的方式准确表达我想要实现的目标。例如，我喜欢 LINQ 让我表达数据管道的方式，而不是编写循环来转换或过滤集合或查找最大值等的“旧”方式。这只是重复的代码，*应该*在某个地方的模板方法中。

另一方面，较短的代码并不*总是*比较长的代码更具可读性。条件运算符是这方面争论的主题。是：

```
Foo x = null;
if (condition)
{
    x = y;
}
else
{
    x = z;
} 
```

或多或少的可读性：

```
Foo x = condition ? y : z; 
```

好吧，如果“条件”、“y”和“z”都相当简单，则条件运算符获胜。如果您必须通过箍来制作“y”和“z”单个表达式，其中执行多个语句会更具可读性，那么 if/else 形式可能更具可读性。

简而言之，我编写了我能写的最易读的代码。这通常是，但并不总是，简洁的代码。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-03-20T15:26:36.850

在编写实际的源代码时，尽可能保持健壮（不牺牲性能）。IE：

```
var result = GetResultFromFoo(GetOtherResult()).DoSomeCalculation(CallAnotherMethod()); 
```

写起来可能很有趣，但祝你好运调试那个傻瓜。没有任何好处，就分解成这个；

```
var result = GetOthereEsult();
var fooResult = GetResultFromFoo(result);
var anotherMethodResult = CallAnotherMethod();
var finalResult = fooResult.DoSomeCalculation(anotherMethodResult); 
```

更容易调试。

我唯一能看到编写尽可能简洁代码的理由是，源代码的大小是否重要（例如在每秒提供数百次的 JavaScript 文件中）或者故意尝试混淆代码时通常有软件可以为您做到这一点。所以底线，IMO，不，真的没有太多的理由。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-03-20T14:25:08.057

尝试始终编写清晰的代码。有时清晰的代码很简洁，但通常不是。

为什么？因为在 6 个月的时间里，你需要了解你想要达到的目标。你能做到的越快越好。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-03-20T14:24:39.963

排除所有其他问题，更短的代码会更好，因为您可以一次看到更多内容。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-03-20T14:35:29.920

请记住，阅读代码的频率高于编写代码的频率，并在编写时牢记您的读者（读者甚至可能是您）。不要像假设读者是愚蠢的那样编写代码，也不要编写假设它越少越好的代码。

像 Joel Coehoorn 建议的那样写“简短而中肯”。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-03-20T19:13:43.370

我发现人类的可读性是长期运行中代码最重要的特性。

可读性包括简洁、准确和思路清晰。如果你把东西混在一起，你会混淆你的读者。如果您的代码清晰易读，则不需要太多注释。如果你将复杂的事物分解为局部的、命名良好的变量，你会极大地帮助读者，同时隐含地记录你所做的事情。

编写良好的代码会让你幸存下来。力求完美：）

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-03-20T14:50:40.647

@j_random_hacker（还不能在评论中添加评论）

我碰巧在 6 个月后发现很难破译我写的一段代码。所以确实，这部分也很重要

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-03-20T15:57:01.597

我是我可以阅读的代码的忠实粉丝。我见过一些“简洁”的代码，如下所示：

```
int af = yb; 
while(af<ex){af++;af*=4;} 
```

很容易看出以编程方式正在做什么，但实际上正在做什么就意义而言是模糊的。我宁愿拥有稍后可以阅读的变量名称，也不愿尝试保存几个字符的代码并使用简洁的名称。好的代码并不总是意味着最短。好的代码是关于好的算法、好的文档、好的可维护性。我不在乎代码有多长，如果它具有所有这些属性，那么它就是好代码。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-03-20T14:26:46.883

假设您使用的术语“简洁”具有“神秘”的含义：

除非这是一场混淆编码竞赛，否则我认为用编译语言编写简洁的代码是没有意义的。我可能只在我自己的私人项目中编写过简洁的 C++ 代码。永远不要在别人会看到的代码中。

否则，简洁（在“直接”的意义上）代码比冗长的代码更好。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-03-20T15:48:43.363

java 中冗长的代码和命名存在一个机械缺点：某些 JVM 下的内存占用。这可能只是关于进程虚拟大小和内存映射 jar 文件的感知问题，但它确实存在。大 jar 文件 == 大（感知）内存使用。

您可能必须采取极端措施才能在简洁性方面进行衡量，但这是一个有趣的“真实”效果。

在实际建议方面，就像其他人所说的那样，先写好代码，然后再担心优化。

# .net - SQL Server 是否缓存 LINQ to SQL 查询？

> ID：666344
> 
> 赞同：3
> 
> 时间：2009-03-20T14:21:32.730
> 
> 标签：.net, sql-server, performance, linq-to-sql

据我所知，在 MS SQL Server 2000+ 中，存储过程被编译，并且比普通的非编译查询运行得更快。我想知道 MS SQL Server 是否也出于性能目的编译 LINQ to SQL 查询并缓存该编译。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-20T14:28:44.773

当谈到 SQL Server 中的执行计划时，存储过程与普通非编译查询在速度上没有重大差异。有关速度的其他因素的更多信息，[请参阅此内容。](https://stackoverflow.com/questions/59880/are-stored-procedures-more-efficient-in-general-than-inline-statements-on-moder)

LINQ-to-SQL 生成正常的参数化查询（SQL Server 对 LINQ 一无所知，应用程序生成正常的 SQL），因此平衡是相同的。也就是说，如果您不使用调用存储过程的 LINQ-to-SQL 函数（假设您的意思是查询内容）。

您可能还想阅读[这个](https://stackoverflow.com/questions/14530/linq-to-sql-vs-stored-procedures)，这是一个类似的问题，但侧重于 LINQ 与 StoredProcs 更重要的好处

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-20T14:25:55.840

SQL Server 不知道 LINQ。

据我所知，LINQ 就像一个库一样运行，它使用查询生成 SQL 查询，然后将这些查询作为 SQL 文本命令发送到服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-20T14:28:21.387

据我所知，它表现为对 SQL Server 的普通查询。如果您的特定情况存在好处，您始终可以使用 LINQ to SQL 调用存储过程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-20T14:29:29.780

MS SQL Server 缓存针对它运行的任何 TSQL 的查询计划。一旦计划被缓存，查询将运行得更快一些。我知道这个缓存有一个过期时间，但我还没有问过dba。

据我所知，MS SQL Server 2000 是最后一个编译存储过程的。那不再做了。这就是为什么很多内联查询都一样快（使用 SQL Server 2000+）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-02-08T08:25:09.570

LinQ 的 CompiledQueries 被 SQL Server 缓存，这就是为什么它们要快得多。普通 LinQ 查询不会被 SQL Server 缓存。

供测试用。

创建一个普通的 LinQ 查询 创建相同的编译 LinQ 查询。

编译好的查询运行几次后，清理 SQL 缓存，您会注意到它的执行时间与第一次正常的 LinQ 查询几乎相同。

PS。您可以使用以下查询清理 SQL Server 缓存：DBCC DROPCLEANBUFFERS

因此，回答您有关 LinQ 查询和缓存的问题。

普通的 LinQ 查询不会被缓存，当您只需要运行一次时应该使用它。编译的 LinQ 查询确实会被 SQL Server 缓存，并且如果您多次运行它，性能会有所提高。

我刚刚发现了它，我认为知道它很方便。

# asp.net - 缺少 MOSS 2007 功能？

> ID：666347
> 
> 赞同：1
> 
> 时间：2009-03-20T14:22:41.590
> 
> 标签：asp.net, javascript, sharepoint, moss

我已经多次安装 MOSS 2007，但我总是遇到同样的问题。安装顺利，但 MOSS 似乎缺少功能。

在“管理”页面中，单击“创建或扩展 Web 应用程序”中的“确定”按钮绝对不会执行任何操作。此外，单击某些链接也不会引起任何响应。我认为我的设置有问题。所有不起作用的链接都会在浏览器的左下角显示 javascript。我不确定这是否与它有关。

我在 Windows Server 2003 上运行 MOSS 2007。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-20T14:54:22.683

您是否尝试过将 SharePoint 管理中心网站添加到 IE 中的受信任网站？

# windows - 如何允许 MDI 应用程序中的窗口离开它的父容器 w/Win32？

> ID：666355
> 
> 赞同：3
> 
> 时间：2009-03-20T14:23:41.120
> 
> 标签：windows, winapi, mfc, wtl

我有一个 MDI 应用程序。我想在子窗口的非客户端标题栏中添加一个图标，允许窗口与父 MDI 容器分开浮动，允许用户获取子窗口并在 MDI 之外将它们任意放置在桌面周围窗户。

我已经看到它完成了，所以我知道这是可能的，但我很难弄清楚如何完成它。

我正在使用 WTL（Windows 模板库），但是我使用 MFC 和 Win32 来标记它，因为我相信基本原理是相同的，而且人们可能会了解各种 Windows API。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-20T14:34:45.477

我这样做已经有一段时间了，但我认为调用**SetParent (your_hwnd, 0)**让窗口从它的父窗口逃脱就足够了。

消息传递会发生一些变化，因此您可能必须将一些消息从主窗口重定向到以前的子窗口。如果您希望 MDI 应用程序的主菜单与前孩子一起使用，这很可能是必需的。

如果您遇到绘图问题，您可能必须使用**SetWindowLong**更改窗口样式。

顺便说一句，使用 WTL 的好选择——在我看来，这是一个非常好的 API 抽象，没有任何花里胡哨。

# php - 无法显示“+”号

> ID：666356
> 
> 赞同：2
> 
> 时间：2009-03-20T14:23:43.677
> 
> 标签：php, special-characters

我在 mysql 数据库中有这个值：“A+”它是杂志的名称。我可以看到它位于数据库中，但是我无法通过 php 显示它。当我获取 sql 数据时，它输出

“一种 ”

我试过 utfencode() utfdecode() htmlentities() ... 无济于事。我无法诊断问题。万一这很重要，我通过ajax（jquery load（）函数）获取这些数据

更新：

事实证明，在通过正则表达式解析数据时，+ 号被删除了。似乎也找不到解决办法。preg_quote() 没有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-20T14:28:53.010

jquery 可能将其解释为 url 编码的“+”符号，可以将其解释为空格。发布一些代码，我相信有人可以给你一个完整的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T14:56:27.937

当数据声明为 时，该`+`字符被解释为空格[`application/x-www-form-urlencoded`](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.1)：

> 这是默认的内容类型。使用此内容类型提交的表单必须编码如下：
> 
> 1.  控件名称和值被转义。**空格字符被替换为 ' `+`'**，然后保留字符被转义，如 [RFC1738] 第 2.2 节所述：非字母数字字符被替换为 ' `%HH`'、一个百分号和两个表示字符 ASCII 码的十六进制数字。换行符表示为“CR LF”对（即，' `%0D%0A`'）。
> 2.  控件名称/值按照它们在文档中出现的顺序列出。名称与值之间用 ' `=`' 分隔，名称/值对之间用 ' `&`' 分隔。

所以你必须正确编码。在 JavaScript 中，`encodeURIComponent`如果要`+`在 URI 中使用字符，请使用该函数：

```
"http://www.example.com/?q=" + encodeURIComponent("A+") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-20T15:21:46.487

您是否将其作为 javascript 参数传递而没有[urlencode()](http://www.php.net/manual/en/function.urlencode.php)？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-20T16:11:30.610

好吧，因为让它工作的唯一方法就是做

```

echo urlencode("这是 A+ 文本");

```

它有效并且似乎不会损坏文本的其余部分，但我不明白这背后的理由。无论如何，感谢所有试图提供帮助的人。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-03-20T14:46:32.937

您可以在 \ 之前添加一个转义字符，看看它是如何工作的。[如果不使用htmlentities](http://ca.php.net/htmlentities "htmlentities")转换字段数据

# sql - 行成列和分组

> ID：666363
> 
> 赞同：7
> 
> 时间：2009-03-20T14:24:28.760
> 
> 标签：sql, sql-server

我有一个看起来像这样的查询：

```
SELECT OrganizationName, OrganizationID, ReceivableStatus, InvoiceFee
FROM v_InvoicesFreelanceOutstanding
ORDER BY OrganizationID 
```

从中得到的数据可能如下所示：

```
OrganizationName OrganizationID ReceivableStatus InvoiceFee
-------------------------------------------------- --------------------------
A 公司 139 60-90 天 672.00
A公司 139 60-90 天 1800.00
A 公司 139 超过 90 天 1440.00
B公司 264 当前 3559.38
B 公司 264 60-90 天 3785.50
C 公司 271 60-90 天 446.25
C 公司 271 超过 90 天 637.50
C 公司 271 超过 90 天 1126.25

```

我最终想要显示的是这样的（对于上面的数据）：

```
公司 当前 30-60 天 60-90 天 90 天以上 合计   
-------------------------------------------------- --------------------------
A公司 0 0 2472.00 0 2472.00
B公司 3559.38 0 3785.50 0 7344.88
C公司 0 0 446.25 1763.75 2210.00

```

我的 SQL-fu 不足以让我通过这个：

```
SELECT
    MAX(OrganizationName) as OrganizationName,
    OrganizationID,
    ReceivableStatus,
    SUM(InvoiceFee) as TotalDue
FROM v_InvoicesFreelanceOutstanding
GROUP BY OrganizationID, ReceivableStatus 
```

这显示了这样的内容（再次，来自上面的数据）：

```
组织名称 OrganizationID ReceivableStatus TotalDue
-------------------------------------------------- --------------------------
A 公司 139 60-90 天 2472.00
A 公司 139 超过 90 天 1440.00
B公司 264 当前 3559.38
B 公司 264 60-90 天 3785.50
C 公司 271 60-90 天 446.25
C 公司 271 超过 90 天 1763.75

```

然后怎样呢？任何帮助，将不胜感激。

请注意，第二张表（`Current`, `30-60 days`, `60-90 days`, `over 90 days`）中显示的状态是我唯一希望出现的状态`ReceivableStatus`。

**编辑**：很抱歉没有包括这个。我知道，`PIVOT`但我无法让它做我想做的事。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-20T14:44:15.140

枢轴很烂。它的语法很糟糕，并且不是数据透视表意义上的 PIVOT，即您必须提前确切知道将产生多少列。

做交叉表报告可能更容易。

```
SELECT 
OrganizationName,
OrganizationID,
SUM(CASE WHEN ReceivableStatus       = '30-60 days' THEN InvoiceFee ELSE 0 END) AS [30 - 60 Days],
SUM(CASE WHEN ReceivableStatus       = '60-90 days' THEN InvoiceFee ELSE 0 END) AS [60 - 90 Days],
SUM(CASE WHEN ReceivableStatus       = '90-120 days' THEN InvoiceFee ELSE 0 END) AS [90 - 120 Days]

FROM
v_InvoicesFreelanceOutstanding
GROUP BY OrganizationID 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-20T14:30:38.153

[`pivot`](http://msdn.microsoft.com/en-us/library/ms177410.aspx)如果您使用的是 SQL Server 2005 或更高版本，这看起来像是一项工作。

编辑：

由于您已经了解`pivot`，因此您知道它几乎可以满足您的需求。

您已经有以下查询：

```
SELECT
    MAX(OrganizationName) as OrganizationName,
    OrganizationID,
    ReceivableStatus,
    SUM(InvoiceFee) as TotalDue
FROM v_InvoicesFreelanceOutstanding
GROUP BY OrganizationID, ReceivableStatus 
```

它为您提供当前所需的 30-60、60-90 和 90+ 零件。如果你转动它，你会得到你需要的一切，除了你的总数。所以只需投入总数：

```
(SELECT
    MAX(OrganizationName) as OrganizationName,
    OrganizationID,
    ReceivableStatus,
    SUM(InvoiceFee) as TotalDue
FROM v_InvoicesFreelanceOutstanding
GROUP BY OrganizationID, ReceivableStatus)
UNION
(SELECT
    MAX(OrganizationName) as OrganizationName,
    OrganizationID,
    'Total' AS ReceivableStatus,
    SUM(InvoiceFee) as TotalDue
FROM v_InvoicesFreelanceOutstanding
GROUP BY OrganizationID) 
```

以此结果为中心，你应该得到你想要的输出：

```
SELECT *
FROM 
    [the query above]
PIVOT (
    SUM(TotalDue)
    FOR ReceivableStatus IN ([Current],[30-60 days],[60-90 days],[over 90 days],[Total]) 
) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-20T14:50:23.550

我以前没有使用过 pivot ，所以这可能是你的答案，但我过去曾在这样的问题上使用过蛮力，对你来说它看起来像：

```
SELECT OrganizationName, SUM(Current) AS Current, SUM(3060Days) AS 3060Days, SUM(6090Days) AS 6090Days, SUM(Over90Days) As Over90Days, SUM(Total) AS Total
FROM 
(
SELECT 
    OrganizationName,
    CASE WHEN ReceivableStatus = 'Current' THEN
        SUM(InvoiceFee)
    ELSE
        0
    END AS Current,
    CASE WHEN ReceivableStatus = '30-60 days' THEN
        SUM(InvoiceFee)
    ELSE
        0
    END AS 3060Days,
    CASE WHEN ReceivableStatus = '60-90 days' THEN
        SUM(InvoiceFee)
    ELSE
        0
    END AS 6090Days,
    CASE WHEN ReceivableStatus = 'over 90 days' THEN
        SUM(InvoiceFee)
    ELSE
        0
    END AS Over90Days,
    SUM(InvoiceFee) AS Total
FROM v_InvoicesFreelanceOutstanding
GROUP BY OrganizationName, ReceivableStatus) temp
GROUP BY OrganizationName 
```

基本上，内部查询为您提供每个组织的结果和每个单独类别的总数，外部查询将所有这些汇总到每个组织的单行中。同样，这可能不是最优雅或最有效的方式，但它是一种方式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-20T15:07:06.740

好吧，这是另一个支点:)

```
设置无计数

声明 @table 表
( 组织名称 VARCHAR(20),
    组织 ID INT，
    ReceivableStatus VARCHAR(20),
    InvoiceFee FLOAT
)

插入@table
SELECT '公司 A',139,'60-90 天',672.00 UNION
SELECT '公司 A',139,'60-90 天',1800.00 UNION
SELECT '公司 A',139,'超过 90 天',1440.00 UNION
选择“B公司”、264、“当前”、3559.38 UNION
SELECT '公司 B',264,'60-90 天',3785.50 UNION
SELECT 'C 公司',271,'60-90 天',446.25 UNION
SELECT 'Company C',271,'超过 90 天',637.50 UNION
SELECT '公司 C',271,'超过 90 天',1126.25

--指定只需要返回的字段
;with COMPANYINFO(OrganizationName,OrganizationID,ReceivableStatus,InvoiceFee) AS
    (
    选择组织名称，
        组织ID，
        应收状态，
        发票费
    来自@Table AS b
    )
    选择 *
    来自公司信息
    枢
        (
        SUM(发票费)
        FOR ReceivableStatus
        IN（[当前]，[60-90 天]，[超过 90 天]）
        )
    磷
    按组织名称排序

```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-20T14:31:02.397

我认为您正在寻找枢轴和非枢轴功能。看看这个：http: [//msdn.microsoft.com/en-us/library/ms177410.aspx](http://msdn.microsoft.com/en-us/library/ms177410.aspx)

# asp.net - 导入 Spring 对象定义

> ID：666367
> 
> 赞同：0
> 
> 时间：2009-03-20T14:25:15.577
> 
> 标签：asp.net, spring.net

我正在尝试在 Web 应用程序、单元测试和可能的控制台应用程序之间共享 Spring 对象定义。我想在一个地方定义对象定义并导入它们。

我的第一遍是将“entities.xml”放在与 web.config 相同的文件夹中，但相对路径不是我所期望的：

```
<context>
  <resource uri="config://spring/objects"/>
  <resource uri="file://entities.xml"/>
</context> 
```

和

```
<objects xmlns="http://www.springframework.net">
  ...
  <import resource="file://entities.xml" /> 
```

产生相同的错误：

```
Could not find file 'c:\windows\system32\inetsrv\entities.xml' 
```

“当前目录”不是网络应用程序，它特定于 inetsrv。

我宁愿不对这个文件的完整路径进行硬编码，因为它在测试服务器和生产服务器上可能会有所不同。有没有更好的方法来分享这个配置信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-27T16:00:43.830

要引用当前应用程序域的根文件夹，您可以使用 '~' 字符：

```
<resource uri="~/entities.xml"/> 
```

会做你正在寻找的。

-埃里希

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T14:59:34.620

我假设 spring.net 还允许 classpath:entities.xml 语法，您将 xml 文件放在类路径上。（嵌入到模块中）

# wpf - xbap 与独立应用程序中的 Listview 导航行为

> ID：666368
> 
> 赞同：0
> 
> 时间：2009-03-20T14:25:38.447
> 
> 标签：wpf, listview, keyboard, navigation, xbap

我有一个包含列表视图的 wpf 应用程序。当应用程序作为独立运行时，我可以使用键盘上的向上箭头和向下箭头键浏览列表。当应用程序部署为 XBAP 并在浏览器窗口中运行时，我也可以这样做，但是当我到达顶部元素并再按一次向上箭头键时，焦点会跳转到浏览器中的 url 栏。

有谁知道是否有一种简单的方法可以防止这种情况发生？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-20T14:51:40.130

您可能能够在选项卡排序中插入一个不可见的虚拟控件，当它获得焦点时将焦点设置回列表视图。

这只是一个猜测。和一个黑客，显然。

XBAP 和常规应用程序之间肯定存在一些奇怪的差异。我很好奇是否有适当的解决方案。

# .net - 免费的 Team Explorer 客户端是否可以在没有 Visual Studio 的情况下工作

> ID：666371
> 
> 赞同：3
> 
> 时间：2009-03-20T14:26:04.420
> 
> 标签：.net, tfs, cruisecontrol.net, nant

我们即将使用 NAnt 和 TFS 设置 Cruise control.net，我是否需要安装了团队资源管理器的 Visual Studio 2005/2008，或者我可以使用[免费的团队资源管理器客户端来完成这项工作](http://www.microsoft.com/download/en/details.aspx?id=329)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-20T15:51:24.387

Team Explorer 将安装 VS shell，它提供了足够的 VS 运行。

所以严格来说答案是“是的，Team Explorer 需要 VS”，但由于 VS 包含在 Team Explorer 安装中，严格的答案有点无益:-)。

安装 Team Explorer 后，您可以访问 TF.EXE 命令行工具，但也值得查看用于 tftp.exe 命令行工具的 TFS Power Toys 和 PowerShell 管理单元以了解更多命令行操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-21T16:31:09.853

要使 CruiseControl.NET 集成与 TFS 一起使用，您只需安装您指向的 Team Explorer 下载。这会将必要的 API 安装到 GAC 中，以使插件正常工作。

请务必安装[TFS 2008 Team Explorer](http://www.microsoft.com/DOWNLOADS/details.aspx?FamilyID=0ed12659-3d41-4420-bbb0-a46e51bfca86&displaylang=en)，因为它包含我编译最新版本的 CC.NET 插件所针对的客户端程序集的最新版本。

并不是要消除许可漏洞，只是想指出 Team Explorer 软件本身并不是“免费”的，而是可以免费下载的。您需要确保将代码签入 TFS（因此可能会触发自动构建）的所有开发人员都拥有 TFS CAL（客户端访问许可证）。TFS Cal 包含在包含 Visual Studio 团队版的 MSDN 订阅中，或者可以单独购买。

祝你好运！

马丁。

# mysql - 高效的 MySQL 模式，对大型数据集进行分区（7.300.000.000 行和大约 80 GB 的数据）

> ID：666374
> 
> 赞同：3
> 
> 时间：2009-03-20T14:26:35.090
> 
> 标签：mysql, optimization, partitioning, large-data-volumes

这是对我的问题“有效存储 7.300.000.000 行”（[有效存储 7.300.000.000 行](https://stackoverflow.com/questions/665614/efficiently-storing-7-300-000-000-rows)）的跟进。

我决定将 MySQL 与分区一起使用，初步架构如下所示：

```
CREATE TABLE entity_values (
  entity_id MEDIUMINT UNSIGNED DEFAULT 0 NOT NULL, # 3 bytes = [0 .. 16.777.215]
  date_id SMALLINT UNSIGNED DEFAULT 0 NOT NULL, # 2 bytes = [0 .. 65.535]
  value_1 MEDIUMINT UNSIGNED DEFAULT 0 NOT NULL, # 3 bytes = [0 .. 16.777.215]
  value_2 MEDIUMINT UNSIGNED DEFAULT 0 NOT NULL, # 3 bytes = [0 .. 16.777.215]
  UNIQUE KEY (entity_id, date_id)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 PARTITION BY HASH(entity_id) PARTITIONS 25; 
```

这给出了：

*   行 = 7.300.000.000 行（根据上一篇文章中所述的要求）
*   大小/行 = 11 字节 (3+2+3+3)
*   总大小 = 7.300.000.000 行 * 11 字节 = 80.300.000.000 字节 = 80.3 GB
*   Partitions = 25（3.2 GB/分区，分区大小有些随意）

请注意，我已经从原始设计中删除了主键，因为不会使用“id”列。

现在问我的问题 - 鉴于我之前的帖子中概述的要求和上面的架构，您对可以进行的进一步优化/调整有什么建议吗？或者考虑到我决定使用 MySQL，上述模式是否“最佳”？

**更新：**我尝试将当前数据集加载到上面的模式中，8.570.532 行占用了 212.000.000 字节的磁盘空间，每行大约 24.7 字节。

**更新：**请注意，覆盖 entity_id+date_id 的索引也将用于仅针对 entity_id 的查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-23T14:43:44.167

我不太明白的一件事是您计划如何修剪数据。您每天有 200 万行，但您没有指定计划保留多少数据。在某些时候，您会希望按年龄（很可能）使数据过期。

此时，您将希望通过删除分区来做到这一点，而不是通过执行将每个分区锁定很长时间的删除（因为它必须进行全表扫描才能找到要删除的行），然后让你的桌子不小，因为分区上到处都是洞。

通过 entity_id 的散列进行分区对于搜索来说似乎是明智的，但按时间分区可以缓解您修剪旧数据时的争用，这绝对是一件好事。

MyISAM 有一个称为“并发插入”的功能，您几乎肯定需要一直使用它来实现并发和性能；这要求“禁止删除”规则，这意味着您只能通过删除分区来进行删除。

但是删除分区也很好，因为您可以取回磁盘空间。

说了这么多，80G 并没有那么大，我可能很想把它全部存储在一个表中，并使用 InnoDB 来启用并发访问。

哦，是的，如果你确实使用了 InnoDB，你可以有一个 entity_id 的主键 date_id，这意味着它将聚集具有相同 entity_id 的行。您可能需要 date_id 上的二级索引来启用有效的修剪。

请使用您的生产数据大小对此进行测试，并让我们知道您发现了什么！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-21T14:05:15.413

如果您通常检索一个实体 ID 的所有（或大部分）数据，则应考虑将索引设为实体 ID 而不是 (entity_id,date_id) ——除非您需要数据库进行唯一检查。

效果是使索引更小，以便您在内存中获得更多。您的目标应该是让索引在内存中。即使您需要执行 SELECT..ORDER BY DATE，您会发现 MySQL 可以在几分之一秒内即时订购 3650 个值（没有索引）。这个问题是从磁盘读取行的时间。

但是，您的主要性能问题是插入导致一个实体的数据分布在磁盘上，需要对每个（实体，日期）进行磁盘访问，这将使您的查询以每秒几百行的速度运行。您的分区不会对此有所帮助，因为每个实体都在一个分区中，并且行分布在其磁盘上。（磁盘上的 RAID0 会有所帮助）。

为了获得有效的检索，您需要让实体的数据在磁盘上是连续的，这意味着从 INSERT 顺序重新排序数据。您可以使用 MySQL ALTER TABLE.. ORDER BY ... 执行此操作，但这需要很长时间。我有一个 182M 的行表在执行 ALTER TABLE.. ORDER BY 运行了过去 2 周，但它还没有完成。

这就是我编写自定义存储引擎的原因！

顺便说一句，我不确定你是否通过分区获得任何好处，除非你在多个服务器上进行分区——或者至少是多个磁盘。MySQL 必须做的艰苦工作并没有通过分区变得更容易。这都是关于磁盘访问时间的。

将每个分区放在不同的磁盘上可能会有所帮助。我的分区数不会超过物理磁盘的两倍。2 次，而不是 1 次，会带来一些排队的好处，但我怀疑这会产生多大的影响。我怀疑您是否比使用 RAID0 在尽可能多的磁盘上的单个非分区表好得多。

此应用程序的性能取决于磁盘寻道次数，因此如果您每秒可以进行更多寻道，则会有所帮助。

您通过分区获得了一些处理并行性（假设您有多个处理器），但您的系统将受 I/O 限制，而不是处理器限制。如果您的处理器利用率高达 2%，那么您可能正在做一些您不需要做的事情（或者不是您的应用程序）。

九年来，我一直在使用 MySQL 编写、优化和操作这种应用程序……而且我的经历中你可能会想到的所有伤疤。一旦你的数据远远大于你的内存大小（这是我对“巨大”的定义），整个性能问题就是**磁盘 I/O**，这意味着**磁盘搜索**的数量。祝你好运！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-20T14:57:27.013

您在上一个问题中指出您将检索`entity_id`;的所有行 但是，如果您计划检索特定实体的日期范围，则可以使用[子分区（也称为复合分区）](http://dev.mysql.com/doc/refman/5.1/en/partitioning-subpartitions.html)。根据您的使用情况，您可以将主分区设置为 entity_id，将子分区设置为年份或其他日期范围。如果它在您的系统中有意义，您也可以反转它。

# drawing - 对于接受浏览器内用户绘图，您有什么建议？

> ID：666381
> 
> 赞同：7
> 
> 时间：2009-03-20T14:27:56.537
> 
> 标签：drawing

我需要编写一个应用程序来接受用户非常简单的涂鸦，就像在100 万美元和[thesheepmarket中](http://www.tenthousandcents.com/)[一样](http://www.thesheepmarket.com/)。

例如，我可能希望用户使用鼠标写下他们的名字。

有什么建议么？

我什至不需要自己主持。如果在某个地方提供了我可以使用的服务，那很好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-07T08:11:00.377

仅使用 html 组合一个基本的涂鸦应用程序并不难。我会让你制定出准备生产的细节。

我在这里使用[extjs](http://extjs.com/)作为跨浏览器事件框架，但你可以使用任何你喜欢的东西（jquery）。我也在使用[Raphael](http://raphaeljs.com/)来获得跨浏览器绘图功能。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <title>TestPage</title>
    <script language="javascript" src="raphael-src.js"></script>
    <script type="text/javascript" src="extjs/adapter/ext/ext-base.js"></script>
    <script type="text/javascript" src="extjs/ext-all-debug.js"></script>
    <script language="javascript">

    scribbler = function (container, width, height) {
      this.canvas = Raphael(container, width, height);

      this.currentdraw = null;

      Ext.get(container).on('mousedown', function(e) {
            var el = Ext.get(container);
            this.currentdraw = this.canvas.path({ stroke: "black", fill: "none", "stroke-width":4 });
            this.currentdraw.moveTo(e.getPageX() - el.getLeft(), e.getPageY() - el.getTop());
      }, this);      

      Ext.get(container).on('mousemove', function(e) {
            var el = Ext.get(container);
            if (this.currentdraw != null)
            {
                this.currentdraw.lineTo(e.getPageX() - el.getLeft(), e.getPageY() - el.getTop());
            }
      }, this);      

      Ext.get(container).on('mouseup', function(e) {
            this.currentdraw = null;
      }, this);      

    }

    var scribble;
    Ext.onReady( function() 
        {
            scribble = new scribbler("container", 800,600);
        }
    );

    </script>

  </head>

  <body>
    <div id="container" style="position:relative;border:1px solid black;width:640px;height:400px">
    </div>
  </body>
</html> 
```

您必须将各种涂鸦线记录并存储在表单中以供提交。并确保鼠标指针始终正确（在IE下是文本栏）。

总之，享受吧。

PS。我已经上传了一个工作示例，包括 raphael 和完整的 extjs2 库到[drop.io](http://drop.io/eynk9sm) (3Mb, [7zip](http://www.7-zip.org/) )。

聚苯乙烯。我上传了一个工作示例，它是一个基本（但几乎是完整的）控件。见[好奇乌龟](http://inquisitiveturtle.co.uk/scribbler/)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-01T18:55:30.230

正如其他答案所述，Flash 将是最简单的方法。

但不排除帆布。通过一些漂亮的 javascript 和一些专有的 MS guff (VML)，您可以[模拟 IE 中的画布行为](http://me.eae.net/archive/2005/12/29/canvas-in-ie/)。

如果 flash 不是你的东西（它肯定不是我的），那么这可能是一个非常好的选择。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-02T06:30:32.507

如果您不想使用 Flash，我认为画布可能是您最好的选择，正如其他人所提到的。有一些项目在 IE 中模拟对它的支持，但最完整的一个（据我所知）是[excanvas](http://code.google.com/p/explorercanvas/)。Mozilla 有一个使用它的[教程，](https://developer.mozilla.org/En/Canvas_tutorial) [Bill Mill](http://billmill.org/static/canvastutorial/)也有。[这个](http://redsquirrel.com/dave/work/ajaxtrains/)（较早的）教程讨论了将画布与 AJAX 结合使用。

但是，如果您不想构建自己的并且只想要该功能，则可能需要查看在线白板，例如[Dabbleboard](http://www.dabbleboard.com/)（具有 API）或[skrbl](http://www.skrbl.com/)（具有可嵌入的小部件）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-02T15:00:13.657

到目前为止，我发现的最好和最简单的解决方案是使用这样的东西：http: [//www.flashnifties.com/flash_guestbook.php](http://www.flashnifties.com/flash_guestbook.php)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-02T15:07:04.747

我建议使用`<canvas>`标签；它可以在 Safari、Chrome、Firefox 和 Opera 中本地使用，并且可以通过在 IE 中使用[ExplorerCanvas](http://code.google.com/p/explorercanvas/wiki/Instructions)来使用，它是一个简单的包装器，使 IE 的 VML 语言可以从与画布兼容的界面访问。有关如何使用该元素制作绘图应用程序的教程，请参阅[本文。](http://dev.opera.com/articles/view/html5-canvas-painting/)[您可以通过搜索 Google](http://www.google.com/search?q=canvas+element)`<canvas>`找到很多文档和教程。

有一个开源基础绘图应用程序，您可以[在这里](http://caimansys.com/painter/)`<canvas>`玩和下载。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-01T19:00:41.730

另一种 Flash 替代品，我恰好喜欢 SVG。

[Amaltas SVG 网络应用程序](http://www.amaltas.org/svgapp/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-01T18:30:41.787

嗯，一万是一个 Adob​​e Flash 应用程序。如果您真的想制作类似的东西，最好的起点是开始学习 Flash。如果您不了解任何框架，那么即使是简单的涂鸦也很难接受。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-01T18:32:27.460

一种选择是将`<canvas>`Firefox、Safari 和 Opera 支持的 HTML5 标记与 javascript 一起使用，然后以表单数据的形式上传图像。

但是，这阻止了每个使用 IE 的人。

Adobe Flash 可能是您的最佳选择。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-03T17:58:08.003

您可以看看他们如何[在 Google Docs 中绘图](http://googlesystem.blogspot.com/2009/03/drawing-in-google-docs.html)：

> Google 在 Firefox、Opera、Chrome 和其他支持它的浏览器中使用 SVG，在 Internet Explorer 中使用 VML，因此您不需要第三方插件。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-07T08:32:21.170

您可以像许多[oekaki](http://en.wikipedia.org/wiki/Oekaki)实现一样使用像[Shi-painter](http://hp.vector.co.jp/authors/VA016309/spainter/index_en.html)这样的 java 小程序，例如[iiichan.net 上的那个](http://iiichan.net/boards/oekaki/paint.pl?oek_painter=shi_norm&oek_x=300&oek_y=300)。

免责声明：我了解这些天与 java applet 相关的污名，但我想为了完整起见我会包括这个。;)

# c# - 如何将扩展 ascii 转换为 System.String？

> ID：666385
> 
> 赞同：23
> 
> 时间：2009-03-20T14:28:19.360
> 
> 标签：c#, .net, extended-ascii

例如：“½”或 ASCII DEC 189。当我从文本文件中读取字节时，byte[] 包含有效值，在本例中为 189。

转换为 Unicode 会导致 Unicode 替换字符 65533。

> UnicodeEncoding.Unicode.GetString(b);

转换为 ASCII 结果为 63 或“？”

> ASCIIEncoding.ASCII.GetString(b);

如果这是不可能的，那么处理这些数据的最佳方法是什么？我希望能够执行像 Replace() 这样的字符串函数。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-03-20T14:50:07.250

字节 189 代表 iso-8859-1（又名“Latin-1”）中的“½”，因此以下内容可能是您想要的：

```
var e = Encoding.GetEncoding("iso-8859-1");
var s = e.GetString(new byte[] { 189 }); 
```

.NET 中的所有字符串和字符都是 UTF-16 编码的，因此您需要使用编码器/解码器来转换任何其他内容，有时这是默认设置（例如 FileStream 实例的 UTF-8），但最好始终指定。

您将需要某种形式的隐式或（更好的）显式元数据来为您提供有关哪种编码的信息。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-02-28T22:59:39.687

旧的 PC-8 或扩展 ASCII 字符集在 IBM 和 Microsoft 将 Code Pages 的概念引入 PC 世界之前就已经存在。这是 1982 年的扩展 ASCII。事实上，它是当时 PC 上唯一可用的字符集，直到 EGA 卡允许您将其他字体加载到 VRAM 中。

这也是 ANSI 终端的默认标准，在 80 年代和 90 年代初，我拨打的几乎每个 BBS 都使用此字符集来显示菜单和框。

这是将 8 位扩展 ASCII 转换为 Unicode 文本的代码。注意代码的关键位：GetEncoding("437")。它使用 Code Page 437 将 8 位 ASCII 文本转换为 Unicode 等价物。

```
 string ASCII8ToString(byte[] ASCIIData)
    {
        var e = Encoding.GetEncoding("437");
        return e.GetString(ASCIIData);
    } 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2009-03-20T14:32:19.617

这取决于编码是什么。

没有“ASCII 189”之类的东西 - ASCII 只能达到 127。有许多编码，其中 8 位编码使用 ASCII 作为前 128 个值。

您*可能*想要`Encoding.Default`（这是您特定系统的默认编码），但很难确定。你的数据是从哪里来的？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-18T14:41:40.040

`System.String[]`如果您尝试处理任何扩展的 ASCII 字符，则无法存储字符，`ASCII > 127` 例如`œ ¢ ½ ¾`[这里](https://stackoverflow.com/a/24827425/2374691)是将其转换为二进制和十进制等价物的方法

# java - 任何人都可以帮助解决 Java 问题吗？

> ID：666387
> 
> 赞同：-8
> 
> 时间：2009-03-20T14:28:23.090
> 
> 标签：java, java-me

我有这段代码，但由于某种原因我无法让它工作？

任何人都可以看到问题吗？

我需要这些数据才能返回包含在 mNameSearchDelete 文本框中输入的相同名称的所有记录。但是没有返回应该存在的记录。

谢谢你

```
protected void searchForNameToDelete() {
    carryOutNameSearch(mNameSearchDelete, mListFormDelete);
}
private void carryOutNameSearch(TextBox theInputScreen, Form theOutputForm) {
   listOfIDs = new Vector();  // save IDs of records in case we want to delete
   theOutputForm.deleteAll(); // clear the form
    try {
        RecordStore rs = RecordStore.openRecordStore("EventsDatabase", true);

        // Use the inner class so that the enumeration only gives
        // us those records with a matching name.
        RecordEnumeration re = rs.enumerateRecords(new NameMatcher(theInputScreen.getString()), null, false);
        while (re.hasNextElement()) {
            int id = re.nextRecordId();
            listOfIDs.addElement(new Integer(id));
            byte [] recordBuffer = rs.getRecord(id);
            String record = new String(recordBuffer);

            // extract the name and the age from the record

            int endOfnameEvent = record.indexOf(";");
            int endOfdescEvent = record.indexOf(";", endOfnameEvent + 1);

            String name = record.substring(0, endOfnameEvent);
            String desc = record.substring(endOfnameEvent + 1, endOfdescEvent);
            theOutputForm.append(name + " description: " + desc + "\n");
        }
        rs.closeRecordStore();
    }
    catch(Exception e){
       // mAlertConfirmDetailsSaved.setString("Couldn't read details");
        System.err.println("Error accessing database");
    }
    Display.setCurrent(theOutputForm);

}

  /* An inner class to allow us to select only
*  those records with a matching name.
*/
static class NameMatcher  implements RecordFilter {
    String nameToMatch;
    public NameMatcher(String nameEvent) {
        nameToMatch = nameEvent;
    }
    public boolean matches(byte[] record) {
        if (record.length < nameToMatch.length()) {
            return false;
        }
        String strRecord = new String(record);
        if (strRecord.startsWith(nameToMatch)) {
            return true;
        }
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-20T14:37:43.347

我可以看到一件事是错误的：

```
if (record.length < nameToMatch.length()) {
    return false;
} 
```

您正在将多个字节与多个字符进行比较。

# ant - 从源代码编译 Groovy 的问题

> ID：666388
> 
> 赞同：1
> 
> 时间：2009-03-20T14:28:26.613
> 
> 标签：ant, groovy, build-process

我正在尝试使用 ant 1.7.1 从源代码编译最新的 Groovy 发行版。该过程顺利进行，直到“-createEmbeddableJar：”，在此之下它失败了

> 构建失败 myHomeDir/groovy-src-1.6.0/groovy-1.6.0/build.xml:582：<unwar> 类型不支持嵌套的“globmapper”元素。

从第 582 行构建 xml 如下所示：

```
 <unzip dest="${stagingDirectory}">
        <patternset>
            <!-- no need for the manifest file, we have our own -->
            <exclude name="META-INF/MANIFEST.MF"/>
        </patternset>
        <globmapper from="META-INF/LICENSE.txt" to="META-INF/CLI-LICENSE.txt"/>
        <fileset dir="${runtimeLibDirectory}">
            <include name="commons-cli-*.jar"/>
        </fileset>
    </unzip> 
```

关于这里有什么问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-24T11:54:10.587

看起来“解压缩”任务无法识别“globmapper”。文档确实说它在这里支持嵌套的“映射器”：http: [//ant.apache.org/manual/Tasks/unzip.html](http://ant.apache.org/manual/Tasks/unzip.html)

该任务可能专门寻找具有该名称的映射器元素。您可以尝试这样做，但使用映射器父元素。

```
<mapper>
  <globmapper from="META-INF/LICENSE.txt" to="META-INF/CLI-LICENSE.txt"/>
</mapper> 
```

关于映射器的更多信息可以在这里找到：http: [//ant.apache.org/manual/Types/mapper.html](http://ant.apache.org/manual/Types/mapper.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-27T10:20:40.553

事实证明，问题出在 ant 上，由于某种原因，它发现了一个旧版本，它试图用它来编译。将 CLASSPATH 设置为 . 解决了这个问题。

# iphone - 如何使用 Objective-C 有效地从文件中保存/加载链表？

> ID：666398
> 
> 赞同：0
> 
> 时间：2009-03-20T14:31:16.390
> 
> 标签：iphone, objective-c, memory-management, linked-list

在为 iPhone 学习了 4 周的 Objective-C 之后，我的第一个有用的应用程序几乎完成了。但是，每当当前视图更改时，我仍然需要保存几个实例变量，并在重新打开视图时重新加载它们。

我可以毫无困难地加载具有基本 C 类型（如*int*和*BOOL* ）的变量，但在使用由 Objective-C 对象组成的链表时遇到了困难。

链表由三个指针访问的内存组成：*startPointer*、*currPointer*和*endPointer*。每个元素由一个*last*指针、一个*next*指针、一个指向嵌套链表 ( *nestedPtr* ) 的指针和一些变量组成。

我的第一次尝试是在加载代码中执行以下操作：

```
//dataStorageObj will contain the values to be loaded
dataStorageObj = [[DataSaver alloc] init];
NSData *data =[[NSMutableData alloc] initWithContentsOfFile:[documentsDirectory stringByAppendingPathComponent:@"Archive"]];
NSKeyedUnarchiver *unarchiver = [[NSKeyedUnarchiver alloc] initForReadingWithData:data];
dataStorageObj = [unarchiver decodeObjectForKey:@"KeyForViewA"];
[unarchiver finishDecoding];
//****************************
//Simple variables loaded here
//****************************
//DataSaver is a class with methods to retrieve its instance variables
//The methods are named after the values they retrieve
startPointer = [dataStorageObj startPointer];
currPointer = [dataStorageObj currPointer];
endPointer = [dataStorageObj endPointer];
[unarchiver release];
[data release]; 
```

我在最后放置了一个调试点，所有变量都有正确的值。实际上访问代码中的值（在控制台中这样做）会导致*EXC_BAD_ACCESS*消息。

* * *

接下来，我将链表加载行更改为以下内容：

```
startPointer = [[PointerClass alloc] initPointerFromList:[dataStorageObj startPointer]];
currPointer = [[PointerClass alloc] initPointerFromList:[dataStorageObj currPointer]];
endPointer = [[PointerClass alloc] initPointerFromList:[dataStorageObj endPointer]]; 
```

initPointerFromList*方法*：

```
-(PointerClass *)initPointerFromList:(PointerClass *)theList
{
    last = theList.last;
    nestedPointer = [[NestedPointerClass alloc] initNestedPointerFromList:theList.nestedPointer];
    //****************************************
    //Other variables loaded from theList here
    //****************************************
    if (theList.next != nil)
    {
        next = [[PointerClass alloc] initPointerFromList:theList.next];
    }

    return self;
} 
```

现在的问题是指针都指向单独的链表，所以我编写了方法来检索 currPointer 引用的链表的开始和结束位置：

```
currPointer = [[PointerClass alloc] initPointerFromList:[dataStorageObj currPointer]];
endPointer = [currPointer lastElement];
startPointer = [currPointer firstElement]; 
```

* * *

我的问题有三个：

1.  是否需要使用*initPointerFromList*等方法为已加载的链表分配内存？
2.  有没有比使用*lastElement*和*firstElement*方法搜索列表更有效的方法来维护*currPointer*、*endPointer*和*startPointer*之间的关系？
***   我提供的加载代码背后的技术有问题吗？没有它，我没有问题；有了它，我仍然收到*BAD_ACCESS*消息。我想知道这些消息是否与加载代码有关，或者是否与我在整个应用程序的其余部分中处理对象分配的方式有关。**

 **提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-20T15:39:10.190

正如您所发现的，指针往往是档案的痛点。您是否可以使用 NSMutableArray 来满足您的存储需求，因为这可能会为您简化问题。

[http://developer.apple.com/DOCUMENTATION/Cocoa/Conceptual/Archiving/Archiving.html#//apple_ref/doc/uid/10000047](http://developer.apple.com/DOCUMENTATION/Cocoa/Conceptual/Archiving/Archiving.html#//apple_ref/doc/uid/10000047)

如果您不打算使用 NSMutableArray，您可能希望创建一个响应 encodeWithCoder 消息的容器类，并以这种方式对列表进行编码。您不会存储指针，而是使用它们来遍历您的容器，并以某种确定的顺序对其进行归档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T22:52:19.867

您想通过使用链表获得什么？

你正试图将另一种语言的东西硬塞到 Objective-C 中，结果是你想做的很多工作。

要么使用 NSArray/NSMutableArray，要么使用 NSDictionary/NSMutableDictionary，其中包含您尝试存储的特定元素的键。

# vb.net - 看不到“必须实施”错误

> ID：666399
> 
> 赞同：2
> 
> 时间：2009-03-20T14:31:22.613
> 
> 标签：vb.net

我需要另一（十多）双眼睛来解决这个问题。以下代码：

```
Interface iRuleEntity
    Function GetRuleViolations() As List(Of RuleViolation)
End Interface

Partial Public Class Feedback
    Implements iRuleEntity

    Public Function GetRuleViolations() As List(Of RuleViolation)
        Return Nothing
    End Function

End Class 
```

给我这个错误：

```
'Feedback' must implement 'Function GetRuleViolations() As System.Collections.Generic.List(Of RuleViolation)' for interface 'iRuleEntity'. 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-20T14:37:25.220

你还没有说`GetRuleViolations`implements `iRuleEntity.GetRuleViolations`。它不像在 C# 中那样是隐式的。

从[文档中`Implements`](http://msdn.microsoft.com/en-us/library/bcb9373h.aspx)：

> 您使用Implements 语句来指定一个类或结构实现一个或多个接口，然后为每个成员使用Implements 关键字来指定它实现哪个接口和哪个成员。

所以：

```
Partial Public Class Feedback
    Implements iRuleEntity

    Public Function GetRuleViolations() As List(Of RuleViolation) _
    Implements iRuleEntity.GetRuleViolations
        Return Nothing
    End Function

End Class 
```

（注意函数第一行的续行。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-20T14:41:04.790

```
Partial Public Class Feedback
    Implements iRuleEntity

    Public Function GetRuleViolations() As List(Of RuleViolation)
        Implements iRuleEntity.GetRuleViolations

        Return Nothing
    End Function

End Class 
```

# c# - asp.net c#水晶打印问题

> ID：666402
> 
> 赞同：1
> 
> 时间：2009-03-20T14:31:59.257
> 
> 标签：c#, asp.net, crystal-reports

**你好朋友我正在使用 Asp.Net C# & CrystalreportViewer。我在水晶 8.5 中开发报告并通过水晶报告查看器调用。一切运行良好，但是当我单击顶部水晶栏上的打印按钮时，它会弹出一个窗口，即以 pdf 格式导出然后从那里打印。因此，当我单击确定时，它会创建 pdf 文件，然后我就可以打印该文档。

是否有其他方法可以打开打印机选择对话框，然后直接进行打印。

谢谢卡蒂克**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-30T01:53:47.960

You can do this in more recent versions of Crystal Reports. I can't remember if you can do it in 8.5, I think not.

Can you just use a newer version of Crystal? 8.5 is about 10 years old.

# windows - 多宿主系统上的 UDP 广播

> ID：666405
> 
> 赞同：2
> 
> 时间：2009-03-20T14:32:47.400
> 
> 标签：windows, networking, windows-vista, udp, broadcast

我正在开发一个使用 UDP 广播发现/配置远程设备的项目。这些设备可能尚未配置 IP 地址，至少与它们连接的网络不匹配。目前我们使用一个`sendto`目标地址为`255.255.255.255`. 这在大多数情况下都可以正常工作，但在具有多个 NIC 的 Vista 机器上，广播似乎只从其中一个接口发送出去。如何让 Vista 将广播发送到所有接口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-20T14:53:24.200

我个人从未见过任何系统为每个接口生成一个数据包以响应单个`sendto`调用。

更好的选择是枚举网络接口，确定正确的链路本地广播并通过每个接口单独发送单独的数据包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T15:09:59.837

枚举接口，然后在每个接口上发送一次数据包。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-03T13:14:50.570

我们有完全相同的问题，只是我们不能使用子网广播，因为我们要配置它们。如果设备的 IP 错误（超出我们的范围），向其发送子网广播将永远不会被其 IP 堆栈接受。讨厌的问题，除非我们允许 DHCP...

# javascript - 对点击做出反应的带圆角的 CSS 按钮

> ID：666408
> 
> 赞同：1
> 
> 时间：2009-03-20T14:33:06.820
> 
> 标签：javascript, css, button

我正在尝试创建此处描述的特定 CSS 按钮：

[http://www.2shared.com/file/5131551/412bd8a8/Sans_titre-1_copie.html](http://www.2shared.com/file/5131551/412bd8a8/Sans_titre-1_copie.html)

基本上，它是一个满足以下条件的按钮：

*   内部文本是 HTML 内容（它将包含文本 + 图像）
*   它有圆角
*   当鼠标悬停时它会改变颜色
*   灵活的宽度和高度
*   它是一个单选按钮，可以在单击按钮上的任意位置时激活。

有什么想法或参考可以帮助我创建它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-20T14:42:16.237

[http://css-tricks.com/video-screencasts/17-sliding-doors-button/](http://css-tricks.com/video-screencasts/17-sliding-doors-button/)

这是为按钮设置动态/灵活大小的一种很酷的方式，并且在其中放置您想要的任何 html 都不会太难......您必须更多地使用 css 来着色，但我认为你应该对一些有创意的 css/html 没问题。

从构建此按钮开始，并让我们了解您获得的任何 CSS 结果！

添加：

现在没有时间尝试它，但是在 html 中使用 span 做一个单选按钮、文本和图像，使用该链接进行灵活的尺寸标注，然后在 css 中悬停颜色更改...再次让我们发布！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-24T00:24:42.537

我只想说这很混乱。这是未经测试的，但使用了尽可能少的元素。这是一扇四向推拉门。

HTML：

```
<a href="your-url-here" class="button">
  <div class="inner-1">
    <div class="inner-2">
      <div class="inner-3">
        Your stuff
      </div>
    </div>
  </div>
</a> 
```

CSS：

```
a.button {
  background: url('topleft-image-url') no-repeat top left;
  display: block;
  float: left;
}

  a.button .inner-1 { url('topright-image-url') no-repeat top right; }
  a.button .inner-2 { url('bottomright-image-url') no-repeat bottom right; }
  a.button .inner-3 {
    url('bottomleft-image-url') no-repeat bottom left;
    padding: 0.5em;
  }

  // You still need to re-speicify the extra attributes of background for browser compatibility
  a.button:hover { background: url('topleft-image-url-over') no-repeat top left; }

    a.button:hover .inner-1 { url('topright-image-url-over') no-repeat top right; }
    a.button:hover .inner-2 { url('bottomright-image-url-over') no-repeat bottom right; }
    a.button:hover .inner-3 { url('bottomleft-image-url-over') no-repeat bottom left; } 
```

如果您摆脱了其中一个尺寸限制（例如宽度或高度），您可以放下两个`div`s（即制作双向滑动门）。

使用任何一种技术，您都可以通过创建一个 gif 或 png 来优化您的图像，该 gif 或 png 在段之间具有足够的透明度，以超过您的按钮将体验到的最大宽度和高度范围。每个州一个，这将允许您只需要两个图像而不是八个。

稍加思考，您可能会想出如何使用基于百分比或像素的背景定位将两种状态合并为单个图像。这也将允许您简化 CSS。

# wpf - winform/WPF 应用程序的工作示例

> ID：666409
> 
> 赞同：2
> 
> 时间：2009-03-20T14:33:23.590
> 
> 标签：wpf, winforms, user-interface

我是一名用户界面设计师。我正在处理的项目是一个仪表板，它将有几个交互式和可定制的小部件（想想 Netvibes 等）。开发组将使用 WinForm 或 WPF 来构建仪表板和小部件。我需要更好地了解每种技术的功能，并查看一些实际工作的应用程序来帮助实现这一目标。我无法下载和构建示例...需要网络上某处的实时示例。你能指出我现有的应用程序吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-20T14:52:43.327

我真的很喜欢看一个名为[Kevin's Bag-o-tricks](http://j832.com/bagotricks/)的示例程序，它很好地突出了 wpf 的一些最佳功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-20T14:42:50.793

看看微软关于 Windows 窗体和 WPF 的站点：http: [//windowsclient.net/](http://windowsclient.net/) WPF 展示库： http: [//windowsclient.net/community/showcase.aspx](http://windowsclient.net/community/showcase.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-20T14:45:51.207

这让您了解 WPF 的一些功能：http: [//xamples.infragistics.com/2008.2/xamShowcase.xbap](http://xamples.infragistics.com/2008.2/xamShowcase.xbap)

尽管它在浏览器中加载，但所有这些示例都可以作为独立应用程序运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-20T15:07:16.520

查看来自thhirteen23.com 的应用程序[Blu](http://www.thirteen23.com) 是一个不错的WPF Twitter 客户端。我不关心应用程序本身，但它很好地展示了 WPF 的功能。将其与您的标准“开发人员艺术”WinForms 应用程序进行比较，您应该对差异有一个很好的了解。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-11-08T21:56:01.163

Bunkspeed ( [http://www.bunkspeed.com/index.html](http://www.bunkspeed.com/index.html) ) 的 Hypershot 和 Hyperdrive 是 WPF 应用程序。

# python - 无法在 Python 2.4 中解码 unicode 字符串

> ID：666417
> 
> 赞同：4
> 
> 时间：2009-03-20T14:36:31.820
> 
> 标签：python, unicode, decode

这是在 python 2.4 中。这是我的情况。我从数据库中提取了一个字符串，它包含一个变音符号 'o' (\xf6)。此时如果我运行 type(value) 它会返回 str。然后我尝试运行 .decode('utf-8')，我得到一个错误（'utf8' 编解码器无法解码位置 1-4 中的字节）。

真的，我的目标只是成功地使 type(value) 返回 unicode。我发现了一个[较早的问题](https://stackoverflow.com/questions/447107/whats-the-difference-between-encode-decode-python-2-x) ，其中包含一些有用的信息，但所选答案中的示例似乎不适用于我。我在这里做错了什么吗？

这是一些要重现的代码：

```
Name = 'w\xc3\xb6rner'.decode('utf-8')
file.write('Name: %s - %s\n' %(Name, type(Name))) 
```

我从来没有真正接触过 write 语句，因为它在第一个语句上失败了。

感谢您的帮助。

**编辑：**

我验证了数据库的字符集是 utf8。所以在我的重现代码中，我将 '\xf6' 更改为 '\xc3\xb6'，但仍然发生故障。“utf-8”和“utf8”有区别吗？

使用编解码器写入文件的技巧很方便（我肯定会使用它），但在这种情况下，我只是出于调试目的写入日志文件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-20T14:43:51.977

您的字符串**不是**UTF8 编码。如果要将字符串“解码”为 unicode，则字符串必须采用参数指定的编码。我试过了，效果很好：

```
print 'w\xf6rner'.decode('cp1250') 
```

**编辑**

要将 unicode 字符串写入文件，您可以使用 codecs 模块：

```
import codecs
f = codecs.open("yourfile.txt", "w", "utf8")
f.write( ... ) 
```

指定输入/输出的编码并在整个代码中使用“unicode”字符串很方便，而无需担心不同的编码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-20T14:55:11.027

这显然是 1 字节编码。UTF-8 中的 'ö' 是 '\xc3\xb6'。

编码可能是：

*   ISO-8859-1
*   ISO-8859-2
*   ISO-8859-13
*   ISO-8859-15
*   赢1250
*   赢1252

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-20T14:41:06.757

您需要使用“ISO-8859-1”：

```
Name = 'w\xf6rner'.decode('iso-8859-1')
file.write('Name: %s - %s\n' %(Name, type(Name))) 
```

utf-8 使用 2 个字节来转义 ascii 之外的任何内容，但这里只有 1 个字节，所以 iso-8859-1 可能是正确的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-20T16:01:34.050

> 所以在我的重现代码中，我将 '\xf6' 更改为 '\xc3\xb6'，但仍然出现故障

不在第一行，它没有：

```
>>> 'w\xc3\xb6rner'.decode('utf-8')
u'w\xf6rner' 
```

第二行会出错：

```
>>> file.write('Name: %s - %s\n' %(Name, type(Name)))
UnicodeEncodeError: 'ascii' codec can't encode character u'\xf6' in position 7: ordinal not in range(128) 
```

这完全是您所期望的，尝试将非 ASCII Unicode 字符写入字节流。如果您使用 Jiri 的编解码器包装流的建议，您可以直接编写 Unicode，否则您将不得不手动将 Unicode 字符串重新编码为字节。

更好的是，出于日志记录的目的，只需吐出变量的 repr() 即可。然后你不必担心那里有 Unicode 字符，或者换行符或其他不需要的字符：

```
name= 'w\xc3\xb6rner'.decode('utf-8')
file.write('Name: %r\n' % name)

Name: u'w\xf6rner' 
```

# javascript - 计算实际（网页）页面加载时间的可靠方法是什么

> ID：666422
> 
> 赞同：13
> 
> 时间：2009-03-20T14:38:11.693
> 
> 标签：javascript, performance, pageload

我有兴趣了解我的 web 应用程序的实际平均页面加载时间。

简单地说，我的普通访问者在开始使用我网站上的页面之前是如何等待的。从他们单击指向我的站点的链接开始，直到站点完成渲染并准备好接受输入。

标准解决方案似乎是使用 Javascript 来比较从 window.onload() 事件中的脚本到脚本的时间。

（见：[http](http://www.dreamincode.net/code/snippet1908.htm) ://www.dreamincode.net/code/snippet1908.htm ）

这对我来说似乎不是一个非常准确的措施，因为它忽略了解析我的域并接收足够的 HTML 内容以开始 Javascript parsig 所花费的时间。

看起来 Safari 在页面实际完成加载之前会触发 window.onload ( [http://www.howtocreate.co.uk/safaribenchmarks.html](http://www.howtocreate.co.uk/safaribenchmarks.html) )。

有任何想法吗？

是否可以通过 Javascript 获取当前请求的时间？
在所有浏览器上一切就绪后会触发什么事件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T13:51:58.100

[http://www.webpagetest.org/](http://www.webpagetest.org/)是测量加载时间的绝佳资源

google chorme 开发工具也有一个时间线面板，您可以在其中记录事件，这是一个 2.5 分钟的视频，向您展示 google chrome 中的时间线如何工作[http://www.youtube.com/watch?v=RhaWYQ44WEc](http://www.youtube.com/watch?v=RhaWYQ44WEc)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-20T14:58:06.013

[FireBug](https://addons.mozilla.org/de/firefox/addon/1843)有一个“网络计时模式”，您可以在其中查看下载构成您网页的每个资源所需的时间。

另外，您应该测量服务器准备请求所需的时间。由于您无法影响浏览器和网络，因此您的服务器上的渲染时间应尽可能短。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-20T15:05:56.197

Firebug 是一个很好的资源，它可以加载有关页面加载的其他信息。此外，带有 YSlow 的 Firebug 更进一步。YSlow 有大量检查它是否针对您的页面运行并根据某些规则对其性能进行评分（您是否使用 CDN，您的 CSS 和 JS 是否压缩等）。我发现对我的网站进行一些重大改进（JS 压缩是一项很棒的改进）是非常宝贵的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-10-21T10:44:35.613

试试雅虎的 YSLOW，它会回答你的问题，但它只适用于 FireFox（实际上它是一个 firebug 插件）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-20T14:43:48.090

计算加载时间最准确的方法是在服务器端：一旦页面构建完成，在用户浏览器上显示需要多少时间取决于：

*   当前网络流量；
*   用户的计算机规格；
*   他正在使用哪个浏览器。

所以，使用 JavaScript 并不是一个很好的衡量标准，因为有很多因素你无法改变。

您可以做的最好的事情是测量在您的服务器上生成每个页面所需的时间 -*您*可以改进。

不用说，这将取决于您使用哪种语言进行编码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-20T14:50:45.017

可以做的一件事是使用 Javascript 来获取客户端事件发生时触发回发到服务器的当前时间。将此值传递回您的服务器端将允许您将其作为您可以比较的初始“触发”时间呈现回客户端。

而不是使用 onLoad，我相信您可以将脚本内联放在文档的末尾，以便在浏览器呈现脚本的该部分时它立即运行。这将允许您将内联脚本运行的当前时间与用户发起调用时捕获的触发时间进行比较。

但是，正如 Seb 所提到的，由于您只能可靠地控制服务器端的加载时间，因此最好在您的指标中包含服务器页面生成时间。如果您有这两个指标，您至少可以看到页面生成花费了多少总时间，以及多少取决于客户端可能发生的各种延迟。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-20T14:55:29.967

我一直发现[**Pingdom Tools 整页测试**](http://tools.pingdom.com/)非常有用。它不是代码内解决方案，但它确实让您对页面加载的速度（或不加载）有一个很好的了解。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-20T21:33:34.207

伪代码。

```
 server marks start of processing the request.
server sends the output.
    script tag, marks start time.
    rest of html markup.
    client script , with server processing time in ms
    client script with window.load event + server-side time
    client script which sends the total back via an ajax call. 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-10-21T11:16:07.560

我使用的方法是创建一个会话变量（包装在 if 中以检查它是否尚未设置）作为我的 index.php 文件（每个脚本都运行）中的第一件事。然后，我在 javascript 中有一个 pageLoad 事件，该事件回发到服务器上的另一个脚本，该脚本获取会话可变时间并从当前时间中减去它。这为您提供了请求到达您的服务器、处理、响应和呈现所需的时间。

只需确保您在回发的脚本中取消设置会话变量，以便下次加载页面时设置一个新的会话变量（因为我们取消设置它不存在）并重新开始。您可能想要做的唯一一件事就是找出 ajax 请求服务器所花费的时间并减去它，但它应该是毫秒。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-09-01T16:29:10.363

• 计算出您正在传输多少位。（这个转换器有帮助： http: [//www.matisse.net/bitcalc/](http://www.matisse.net/bitcalc/)）

•估计或确定下载速度（你可以使用这个东西：[http](http://speedtest.net) ://speedtest.net ）

• 划分

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-01-29T21:50:31.037

# tl;博士

使用无头浏览器来测量加载时间。这样做的一个例子是[网站加载时间](https://github.com/rinogo/website-loading-time)。

# 长版

我遇到了您遇到的相同挑战，因此我创建了一个辅助项目来测量实际加载时间。它使用 Node 和 Nightmare 来操作无头（“不可见”）网络浏览器。加载所有资源后，它会报告完全加载页面所需的毫秒数。

对您有用的一项不错的功能是它会重复加载网页。因此，您可以多次加载页面，然后将这些值平均为一个漂亮的圆形值。此外，由于此脚本在命令行上运行，因此安装在不同的机器上并从不同位置获取实际加载时间是微不足道的。（加载时间不仅取决于服务器，还取决于客户端和中介）

示例用法：

```
website-loading-time rinogo$ node website-loading-time.js https://google.com
1657
967
1179
1005
1084
1076
... 
```

[https://github.com/rinogo/website-loading-time](https://github.com/rinogo/website-loading-time)

披露：我是这个项目的作者。

# hibernate - 集合中的 HQL 排序依据

> ID：666423
> 
> 赞同：9
> 
> 时间：2009-03-20T14:38:18.573
> 
> 标签：hibernate, jpa, jakarta-ee, hql

我有 2 个实体：汽车和车轮（oneToMany），我想取回我的汽车，所有的车轮和（这是棘手的部分）由 wheel.location 排序。下面的代码引发异常，并显示消息“非法尝试取消引用集合”。

```
Select c
  from Car
       LEFT JOIN FETCH c.wheels
order by c.wheels.location 
```

任何想法如何做到这一点，如果这在 HQL 中是可能的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-20T14:55:33.537

```
SELECT DISTINCT c
  FROM Car
       LEFT JOIN FETCH c.wheels AS wheels
ORDER BY wheels.location 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T14:56:12.833

唔。认为您可能需要使用别名？

```
Select c from Car
       LEFT JOIN FETCH c.wheels wheel
order by wheel.location 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T10:45:31.780

我认为您必须在 from 请求中设置 Car 别名：

```
SELECT DISTINCT c
  FROM Car c
       LEFT JOIN FETCH c.wheels AS wheels
ORDER BY wheels.location 
```

[以下是有关hql 订购](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-ordering)的 Hibernate 文档的摘录：

```
select cat from Cat cat
       join cat.kittens kitten
group by cat.id, cat.name, cat.other, cat.properties
having avg(kitten.weight) > 100
order by count(kitten) asc, sum(kitten.weight) desc 
```

# vb.net - 如何以 word 形式显示金额？

> ID：666432
> 
> 赞同：1
> 
> 时间：2009-03-20T14:42:11.650
> 
> 标签：vb.net

有人可以帮我在 VB.NET 中制作货币面额程序。问题是当您输入一个数字时，程序应将其转换为 word 格式。

如果你输入

```
'98534671.23' 
```

该程序应将其转换为

```
"ninety eight million five hundred thirty four thousand six hundred 
seventy one and twenty three cents". 
```

**另见**：

[如何将整数转换为其口头表示？](https://stackoverflow.com/questions/554314/how-can-i-convert-an-integer-into-its-verbal-representation)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-20T14:46:20.423

[将整数转换为书面数字](https://stackoverflow.com/questions/3213/c-convert-integers-into-written-numbers)

您应该能够使用此主题来帮助您。您所要做的就是将代码从 C# 转换为 VB.NET

# compilation - 在后台运行：从 gVim 制作

> ID：666453
> 
> 赞同：35
> 
> 时间：2009-03-20T14:47:27.193
> 
> 标签：compilation, vim

我在 Windows 中使用 gVim 来编辑我的代码（主要是 C++）。我在 gVim 中使用 :make 来编译项目，但这是一个阻塞操作，这会阻止我在编译完成之前使用 gVim。我怎样才能做到 :make 异步并且仍然可以将错误读回 Vim 并跳转到源代码中的错误？如果我能实时看到制作过程，可以获得奖励积分。现在 :make 将输出重定向到一个文件中，因此我看不到 make 的进度。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-03-20T14:51:53.483

我所做的是

```
:!gvim -c 'MyMake' 
```

（其中 MyMake 是自定义命令，可以切换到适当的 dir、make 和 copen 20。）

我正在做我的工作，而构建进入另一个窗口。

**其他选项：**
您可以从 shell 或 vim (:!make&) 将进度重定向到某个文件。然后通过使用

```
:cfile make_result_file

:cw
 or
:copen 20 
```

获得与使用 :make 相同的结果

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-02T14:55:45.540

看看@tpope 的 dispatch.vim

[https://github.com/tpope/vim-dispatch#readme](https://github.com/tpope/vim-dispatch#readme)

视频预告片：http: [//vimeo.com/63116209](http://vimeo.com/63116209)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2011-02-23T18:36:54.377

看看我的[AsyncCommand](http://www.vim.org/scripts/script.php?script_id=3431)插件。它只是包装了执行某些东西所需的 vim 语法并用 --remote 加载它。我上传了包含`AsyncMake`命令的 AsyncCommand 2.0。

将脚本添加到您的，您可以使用或`.vim/plugin`构建。一旦 make 完成，错误将在您的 quickfix 中打开。`:AsyncMake``:AsyncMake target`

* * *

回复评论以获得更易读的代码：

要在 Windows 上查看构建结果，如果您的路径中有[cygwin](http://cygwin.org) / [unxutils](http://unxutils.sourceforge.net/) /something with [tail](http://en.wikipedia.org/wiki/Tail_(Unix))，那么在 asynccommand.vim 中，更改

```
call <SID>Async_Impl(tool_cmd, vim_cmd) 
```

到

```
call <SID>Async_Impl(tool_cmd, vim_cmd)
call <SID>Async_Impl("tail -f ". temp_file, "") 
```

这应该会更改所有 Async 命令以打开带有输出的第二个命令窗口。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-03-20T15:14:05.287

尝试使用

```
:!start make 
```

（关于 ":help !start" 的更多信息）——这样 vim 就不必等待进程开始完成——你可以继续编辑）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-20T15:11:26.387

我会使用您操作系统的内置方法来运行后台任务。

在 Windows 上，尝试输入

```
:!start make 
```

在 linux / mac os x 上，尝试

```
:!make > /dev/null 2>&1 & 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-20T15:14:58.233

除非您安装了最新版本的 Vim（v7.4 和许多补丁，或者只是 Vim 8），否则您将无法看到 make（在 Vim 中）的进度。现在有一些插件已经利用了它。我的[BuildToolsWrapper](https://github.com/LucHermitte/vim-build-tools-wrapper)就是其中之一。我已经在 linux 和 windows 上成功地测试了它。

在此之前，我们需要其他技巧。我记得 Marc Weber 的插件，它能够在 Windows 上模拟后台编译。还有其他几个。我让其他人列出来。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2011-09-17T18:02:38.300

看到[这个脚本](http://vim.sourceforge.net/scripts/script.php?script_id=3479)

# javascript - 检测“文件下载”弹出窗口何时关闭

> ID：666468
> 
> 赞同：23
> 
> 时间：2009-03-20T14:51:45.497
> 
> 标签：javascript, internet-explorer, download

我有一个网页（用 JSF 制作），其中一些链接允许用户获取 PDF 文件。

当用户点击这样的链接时，会显示一个等待弹出窗口（它是一个模态面板）（因为 PDF 的生成可能会很长），并且一旦创建了文件，IE 就会显示建议的“文件下载”弹出窗口“打开”、“保存”和“取消”选项。

当此弹出窗口关闭时，即用户已保存（或打开）PDF 文件时，Javascript 是否有办法从我的网页中知道？

更准确地说，在显示 PDF 文件链接的网页中，会显示一个模式弹出窗口（“等待弹出窗口”），以使用户等待“文件下载”弹出窗口。问题是当用户保存（或打开）PDF 文件时，“文件下载”弹出窗口关闭，但用户随后“返回”到原始网页，仍然显示等待弹出窗口。

请注意，我的应用程序仅在 IE6 中运行，因此我不反对仅 IE(6) 的解决方案...

我对需要 jQuery 的解决方案也没有任何问题；）

**编辑：** 如果存在一个解决方案来捕捉在“文件下载”弹出窗口显示给用户时（即在用户选择保存、打开或取消之前）触发的任何事件，那么对我来说也很好！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-13T15:28:36.053

我必须在另一个项目上解决这类问题。我终于找到了一个聪明的解决方案，正如另一个[Stackoverflow 问题](https://stackoverflow.com/questions/1106377/detect-when-browser-receives-file-download)中所解释的那样。

解释在以下帖子中给出：http: [//gruffcode.com/2010/10/28/detecting-the-file-download-dialog-in-the-browser](http://gruffcode.com/2010/10/28/detecting-the-file-download-dialog-in-the-browser)

这个想法是“简单地”使用 cookie 来定义何时下载文件。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-03-20T18:01:36.353

不存在这样的事件。你需要采取不同的方法来解决这个问题。

1.  将下载链接定位到具有名称 ( `target="myhiddeniframe"`)的隐藏 iframe
2.  单击下载链接，显示您的加载微调器
3.  将 iframe 的`onload`属性设置为隐藏微调器的回调

净效果：您在生成 pdf 时“旋转”，并在“文件下载”对话框出现时“取消旋转”（与“文件下载”对话框*关闭*时相反）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-05-09T21:22:47.800

*   打开您的等待弹出窗口
*   执行**AJAX 查询以生成文件**，该文件返回该文件的 URL
*   在 AJAX 查询回调中，关闭等待的弹出窗口，**然后**重定向到文件 URL

例子：

```
$('.generate_file_asynchronously').click(function(){
    var url = $(this).attr('href');

    show_loading_message();

    $.get(url, function(file_url) {
        hide_loading_message();
        window.location.href = file_url;
    });

    return false;
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-20T14:59:13.263

我很确定答案是否定的，除非您想考虑在浏览器中添加某种 ActiveX 插件（在这种情况下，答案可能仍然是否定的......）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-29T12:18:12.613

我在此处以及在 stackoverflow 和其他地方的相关问题中阅读的所有答案仅解决了问题的第一部分，即服务器准备文件所需的时间。问题的第二部分，即文件在客户端实际完成下载所需的时间，并不是那么微不足道。

在我们的应用程序中，我们遵循以下方法。我们已经有了基于 Cometd 的通知推送机制（你可以在这里阅读更多关于 Cometd 的信息：[什么是 Cometd？为什么使用它以及如何使用它](https://stackoverflow.com/questions/27317774/what-is-cometd-why-it-is-used-and-how-to-work-on-that)），但我想你也可以使用 WebSockets 或类似的东西。我们在后端使用 Java，但它可以是任何东西。所以：

1.  客户端启动下载，发送一个标志/令牌，其中包含用户 ID 和其他一些特定于应用程序和下载的唯一值。它隐藏了下载按钮。
2.  服务器接收请求，准备文件以供下载并启动响应，设置适当的标头，如其他解决方案中所述（例如使用 cookie）。
3.  客户端收到响应，**但没有显示按钮**，它只知道服务器已成功创建文件并开始下载。
4.  服务器知道下载何时真正完成（因为它在循环中将文件流式传输到输出，如此处所述：[https](https://stackoverflow.com/a/2343483/134120) ://stackoverflow.com/a/2343483/134120 ）。当服务器知道文件已完成下载时，它会使用 cometd 使用步骤 1 中的令牌向客户端推送通知。
5.  客户端收到下载完成的通知并再次显示该按钮。

# silverlight-2.0 - 如何调整 Silverlight 2 控件的大小以适合页面（默认提供滚动条）

> ID：666473
> 
> 赞同：0
> 
> 时间：2009-03-20T14:53:02.483
> 
> 标签：silverlight-2.0

我有一个希望填充浏览器的 Silverlight 2 控件。我没有为外部网格设置高度和宽度，因此它会调整大小。我已将网页设置为具有 100% 的高度和宽度样式，并且 html 和 body 标签没有填充或边距。Silverlight 对象设置为 100% 的高度和宽度。

当我查看页面时，IE 会添加一个滚动条，让我向下滚动大约四五个像素，所有这些都是白色的。

我该如何阻止这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-20T14:59:47.757

这段 CSS 能解决问题吗？

```
body{
 overflow: hidden;
} 
```

# iphone - 我需要一个图形编辑器来创建具有 alphatransparency 的 PNG 文件

> ID：666475
> 
> 赞同：2
> 
> 时间：2009-03-20T14:53:25.103
> 
> 标签：iphone, graphics, png, photoshop, alphablending

不幸的是，Photoshop 目前是我可以用来创建具有 alphatransparency 的 PNG 文件的唯一图形编辑器。

我真的很讨厌它。但我需要它。但是买不起。

Pixelmator 看起来很好，但它一次又一次地崩溃。在我全新的 MacBook Pro 上。真的，这不是一个选择。

Gimp：它在启动后立即崩溃。而且我真的不喜欢这个 X11 的东西。不适用于我的 mac。

Gimpshop：同样的问题。

除了 Opera 浏览器、XCode 和 iWork，我没有安装任何东西。

那么：还有什么可以帮助我的呢？

我通常有 JPEG 图像，我需要在该图像中剪切一个对象并保存为具有 alphatransparency 的 PNG。我需要在 alpha chanel 中进行一些漂亮的蒙版编辑，使其在背景中看起来很平滑。

你为你的 iPhone 应用程序使用什么工具来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-20T18:32:55.403

I like [Acorn](http://flyingmeat.com/acorn/), by Flying Meat.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-20T14:59:52.060

[Paintbrush](http://paintbrush.en.softonic.com/mac)非常简单，但它是免费的，并且可以在 Mac OS 上本地运行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-20T15:54:18.873

[您可以随时在Aviary](http://a.viary.com)上创建一个免费帐户。他们有一个相当出色的图像编辑器，称为 Phoenix，或者您可以使用他们的矢量编辑器 Raven。我不能推荐他们！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-20T15:03:17.247

我喜欢用[Skitch](http://www.skitch.com/)做一些事情。它免费且简单，适用于 OS X，对某些事情（调整大小、屏幕截图、格式更改和其他简单任务）很有用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-20T15:47:59.560

Photoshop 元素是

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-03-20T15:09:29.403

我建议使用 Adob​​e FireWorks

希望这可以帮助...

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-20T21:59:16.127

我要寻找的实际上是一个图标编辑器 - 类似于此处列出的那些：

[http://interfacelift.com/icons-mac/software.php](http://interfacelift.com/icons-mac/software.php)

几乎我们在 iPhone 上所做的所有图形工作都比当今大多数图像编辑器更面向像素，这就是专门为处理良好像素级操作而构建的程序的用武之地。

请注意，我还没有尝试过其中任何一个，尽管我一直想在 Photoshop 上试一试（这对于这种工作来说太过分了，而且不是最好的）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-10-23T00:27:41.090

[Inkscape](http://inkscape.org)值得一看。

它可能不是 Mac OS 原生的，但它是免费的，而且做得很好。您当然可以使用它来掩盖照片并导出为 alpha PNG，但它的真正威力是制作出很棒的矢量图像。

我还推荐[Pixelmator](http://www.pixelmator.com/)（我知道您说您遇到了问题，但我认为绝对值得找出它**为什么**一直崩溃并修复它）。Pixelmator 确实是 Photoshop 的强大替代品。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-03-21T19:12:25.130

我使用 Pixelmator，它通常非常可靠。您确定您的配置没有破坏它的稳定性吗？例如，可能是行为不端的输入管理器或 haxie？

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2010-10-12T00:11:01.990

在 Windows 7 下，[Paint.Net](http://www.getpaint.net)很适合我。

在图层方面做得很好，并且很好地支持 PNG 图像。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-10-23T09:35:06.707

Acorn（如前所述）是一款很棒的、精心制作的独立 Mac 软件。我也将[Seashore](http://seashore.sourceforge.net/)用于导航栏或工具栏按钮之类的东西，我不得不将 alpha 通道当作自己的东西来处理，因为我觉得它做得更好。（不过，这不是我的全职工具。）

# testng - 可以将参数传递给 TestNG DataProvider？

> ID：666477
> 
> 赞同：26
> 
> 时间：2009-03-20T14:53:28.893
> 
> 标签：testng, data-driven-tests

我们想针对一组数据值运行我们的一些测试，验证每个测试的相同条件是否成立。数据当前存储在平面文件或简单的 Excel 电子表格中。

我的第一个想法是创建一个 TestNG DataProvider，它将从文件中加载数据，并用于为每个数据值调用一次测试方法。我的问题是不同的测试需要从不同的文件加载数据，并且似乎没有任何方法可以将参数发送到 DataProvider。 **有谁知道这是否可能？**

理想情况下，我希望我的代码如下所示（简化示例）：

```
public class OddTest {
    @DataProvider(name = "excelLoader")
    public Iterator<Object[]> loadExcelData(String fileName) {
        ...
    }

    @Test(dataProvider = "excelLoader" dataProviderParameters = { "data.xls" })
    public void checkIsOddWorks(int num)
        assertTrue(isOdd(num));
    }
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-08-12T20:48:14.743

取自[TestNG 文档](http://testng.org/doc/documentation-main.html#parameters-dataproviders)：

如果您将@DataProvider 声明`java.lang.reflect.Method`为第一个参数，TestNG 将传递此第一个参数的当前测试方法。当多个测试方法使用相同的 @DataProvider 并且您希望它根据它提供数据的测试方法返回不同的值时，这特别有用。

例如，以下代码在其@DataProvider 中打印测试方法的名称：

```
@DataProvider(name = "dp")
public Object[][] createData(Method m) {
  System.out.println(m.getName());  // print test method name
  return new Object[][] { new Object[] { "Cedric" }};
}

@Test(dataProvider = "dp")
  public void test1(String s) {
}

@Test(dataProvider = "dp")
  public void test2(String s) {
} 
```

因此将显示：

```
test1
test2 
```

这也可以结合 desolat 提供的解决方案，从上下文中确定数据和相应的方法：

```
 @DataProvider(name = "dp")
    public Object[][] foodp(ITestContext ctx, Method method) {
        // ...
    } 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2011-01-17T15:56:38.850

您可以使用[TestNG 的依赖注入功能](http://testng.org/doc/documentation-main.html#dependency-injection)访问 DataProvider 中所有已定义的参数。这是一些需要“test_param”参数的示例 DataProvider：

```
@DataProvider(name = "usesParameter")
public Object[][] provideTestParam(ITestContext context) {
    String testParam = context.getCurrentXmlTest().getParameter("test_param");
    return new Object[][] {{ testParam }};
} 
```

这需要在您中定义“test_param” `suite.xml`：

```
<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd" >
<suite name="suite">
    <parameter name="test_param" value="foo" />
    <test name="tests">
        <classes>
            ...
        </classes>
    </test>
</suite> 
```

有关 ITestContext 类的详细信息，请参阅[TestNG JavaDoc](http://testng.org/javadocs/org/testng/ITestContext.html)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-01-30T00:31:53.443

一种更通用的方法是使用`groups`注释来构建自定义值列表：

```
@DataProvider(name = "excelLoader")
public Object[][] createData(Method m) {
    ArrayList<Object[]> excelFiles = new ArrayList<Object[]>;
    // iterate over all the groups listed in the annotation
    for (String excelFile : ((Test) m.getAnnotation(Test.class)).groups()) {
        // add each to the list
        excelFiles.add(new Object[] { excelFile });
    }
    // convert the list to an array
    return excelFiles.toArray(new Object[excelFiles.size()]);
}

@Test(dataProvider = "excelLoader", groups = { "data1", "data2" })
public void test1(String excelFile) {
    // we will test "data1.xls" and "data2.xls" in this test
    String testExcelFile = excelFile + ".xls";
}

@Test(dataProvider = "excelLoader", groups = { "data2", "data3" })
public void test2(String excelFile) {
    // we will test "data2.xls" and "data3.xls" in this test
    String testExcelFile = excelFile + ".xls";
} 
```

或者，您也可以创建自己的注释类，该类接受自定义元素，以便您可以做更多类似的事情：

```
@Retention(java.lang.annotation.RetentionPolicy.RUNTIME)
@Target({METHOD, TYPE, CONSTRUCTOR})
public @interface FilesToTest {
    public String[] value() default {};
}

@DataProvider(name = "excelLoader")
public Object[][] createData(Method m) {
    ArrayList<Object[]> excelFiles = new ArrayList<Object[]>;
    // iterate over all the groups listed in the annotation
    for (String excelFile : ((FilesToTest) m.getAnnotation(FilesToTest.class)).value()) {
        // add each to the list
        excelFiles.add(new Object[] { excelFile });
    }
    // convert the list to an array
    return excelFiles.toArray(new Object[excelFiles.size()]);
}

@Test(dataProvider = "excelLoader")
@FilesToTest({ "data1.xls", "data2.xls" })
public void myTest(String excelFile) {
    // we will test "data1.xls" and "data2.xls" in this test
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-03-02T17:11:21.200

yshua 的回答有点局限，因为您仍然必须对数据提供程序中的文件路径进行硬编码。这意味着您必须更改源代码，然后重新编译才能重新运行测试。这违背了使用 XML 文件来配置测试运行的目的。

一个更好的，绝对更hacky的解决方案是创建一个在套件之前运行的虚拟@test方法，将您的文件路径作为参数并将此信息保存在包含这些测试方法的类中。

这个解决方案并不完美，但在 TestNG 允许更好的参数传递（也许这已经改变）之前，这可能对您的需求是可行的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T17:43:53.577

要添加到我上面的答案，以下是如何使用 EasyTest 框架完成此操作的完整代码：

```
@RunWith(DataDrivenTestRunner.class)
public class MyTestClass {

@Test
@DataLoader(filePaths={myTestFile.xls}, loaderType=LoaderType.EXCEL)
public void testFirstMethod(@Param()
Map<String, Object> inputData) {
    System.out.print("Executing testFirstMethod:");
    System.out.println("library Id : " + inputData.get("LibraryId"));

}

@Test
@DataLoader(filePaths={mySecondTestFile.xls}, loaderType=LoaderType.EXCEL)
public void testSecondMethod(@Param(name="input")
MyClassObject inputData) {
    System.out.print("Executing testSecondMethod:");
    System.out.println("library Id : " + inputData.get("LibraryId"));

} 
```

等等。如果您想了解更多关于 @DataLoader 注释在 EasyTest 中的工作原理，请查看以下内容：[https ://github.com/EaseTech/easytest/wiki/EasyTest-:-Loading-Data-using-Excel](https://github.com/EaseTech/easytest/wiki/EasyTest-:-Loading-Data-using-Excel)

请注意，您可以使用 XML、Excel、CSV 或您自己的自定义加载器来加载数据，并且所有这些都可以一次在同一个测试类中使用，如本示例所示：[https ://github.com/EaseTech/easytest/blob /master/src/test/java/org/easetech/easytest/example/TestCombinedLoadingAndWriting.java](https://github.com/EaseTech/easytest/blob/master/src/test/java/org/easetech/easytest/example/TestCombinedLoadingAndWriting.java)

我希望它有用。

# iphone - iPhone 测试版操作系统限制

> ID：666479
> 
> 赞同：5
> 
> 时间：2009-03-20T14:53:44.727
> 
> 标签：iphone, beta

我正在考虑在我的 iPhone 上安装 iPhone 3.0 beta OS，但它是我的个人手机。

测试版操作系统中是否有任何限制会影响手机的正常使用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-20T15:13:36.817

我的建议 - 不要这样做。甚至只考虑在可砖开发设备上安装 3.0 Beta。这里有几个原因：

它是传统意义上的 Beta（不是 Google 意义上的），所以还没有完成。当然，它是可测试的，但并非所有新功能都是完整的或功能正常，而且都可能发生变化。

官方称这是一种单向升级。你不能回去。现在聪明的黑客已经找到了降级的困难方法，你也许可以解决它。或不。

并非 App Store 中的所有软件都可以在 3.0 上运行。至少 MediaPlayer 中似乎存在一些错误。换句话说，它还没有完全向后兼容。因此有报道称，Pandora、TED、Facebook 和其他流行的应用程序正在崩溃。

最后，还会有更多的 beta 版本——开发不足。因此，请准备好花时间进行更多升级、错误报告和潜在的死机。在 2.0 Beta 周期中，有一段时间 Beta 已过期，并且没有可用的新版本暂时关闭设备。

所以，是的，除非你喜欢在新操作系统的薄冰上溜走，否则不要将你唯一的设备升级到 3.0。

综上所述，我在开发程序中并且在 Touch 上有 3.0，它很流畅。它将使许多快乐的开发人员和越来越快乐的客户。而且我只触及了新 SDK 的皮毛。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-20T15:02:05.987

没有“限制”，您可以继续使用它来拨打电话，但如果它是您唯一的手机，您应该仔细考虑。这是一个测试版，它是一个风险，你需要意识到可能会出现问题。

我已经安装了几天。电子邮件、电话、短信都可以正常工作。有时它有点慢，但就是这样。但是它可能会在以后出现，我的经验可能与您的不同。这就是它处于 Beta 版的原因。

与所有 Beta 版软件一样，安装风险自负。

另外，您是注册的 iPhone 开发人员吗？否则您无法访问测试版...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-21T08:05:42.843

OS 3.0 足够可用，但需要注意以下几点： - 电池寿命很差 - 在某些情况下，ROM 很慢

假设最终您将升级到真正的 3.0（甚至是后续的 beta 版），单向升级必然是一个问题。

升级后的 Xcode 也有问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-31T21:41:27.123

可以**用**吗？是的。

是愉快的吗？不。

如上所述，电池寿命很差，语音邮件至少可以说是粗略的，并且用户界面的响应能力总体上很慢。

降级（基带除外）是可能的，但耗时且不必要的困难，并且需要 Windows 机器或安装过时的 OS X。

我不会这样做。如果您的应用程序需要 3.0 功能，请立即开始开发，使用模拟器，并等待更完善的操作系统版本在实际硬件上进行测试。

# ruby - 构建网站 - 使用 Ruby 的最佳实践和架构

> ID：666493
> 
> 赞同：1
> 
> 时间：2009-03-20T14:55:56.190
> 
> 标签：ruby

关于网络架构的最佳实践的任何指示。我刚刚学习了一点 Ruby，并希望用它来构建网站。我不着急，我想学习最好的方法而不是快速的方法，因为这是一种爱好。

如何从我的 mySql 数据库获取数据到我的前端？我知道一点 xhtml / css 但我现在如何将它们结合在一起？

非常感谢您的帮助...

跳过

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-20T15:07:25.240

我建议您看一下[Ruby on Rails](http://rubyonrails.org)框架，原因如下：

*   Rails 很容易上手和运行
*   Rails 结合了许多最佳实践和已建立的模式，例如[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)、[REST](http://en.wikipedia.org/wiki/Representational_State_Transfer)和[ActiveRecord](http://en.wikipedia.org/wiki/Active_record_pattern)
*   过去并非如此，但 Rails 现在拥有大量[高质量](http://guides.rubyonrails.org/)且免费的[文档](http://guides.rubyonrails.org/)和支持资源来帮助您学习
*   已经使用 Rails 构建了许多[网站和应用程序](http://rubyonrails.org/applications)
*   Rails 正在积极开发中，该框架的未来看起来[非常光明](http://weblog.rubyonrails.org/2008/12/23/merb-gets-merged-into-rails-3)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-20T14:58:38.057

最简单的方法是使用现有的框架，[Ruby on Rails](http://rubyonrails.org/)是镇上的大狗。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-20T14:59:46.773

[开始使用 Ruby on Rails](http://www.alistapart.com/articles/gettingstartedwithrubyonrails)

# php - 显示任意电子邮件的简单 PHP 工具

> ID：666501
> 
> 赞同：0
> 
> 时间：2009-03-20T14:57:04.813
> 
> 标签：php, email

有谁知道为电子邮件呈现 HTML 显示的现有工具？

我可以以文本形式访问邮件源，并且需要某种函数/类/miniframework/...才能将类似 Outlook 的显示作为 HTML 页面。

我研究了 Horde 和 roundcube，我真的很想避免从那些大项目中提取功能。因此，非常感谢任何想法或建议！

编辑：这里的问题主要在于嵌套的多部分邮件，我想内联显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-20T20:33:42.743

也许您正在寻找[MIME 电子邮件解析器](http://www.phpclasses.org/browse/package/3169.html "MIME 电子邮件解析器")类和[Ext JS Javascript 库的组合。](http://extjs.com "Ext JS Javascript 库")

具体看一下 Ext JS[提要查看器示例](http://extjs.com/deploy/dev/examples/feed-viewer/view.html)。

# c# - 如何在现有的 xml 文件中添加新属性？

> ID：666505
> 
> 赞同：1
> 
> 时间：2009-03-20T14:58:12.813
> 
> 标签：c#, xml, linq, linq-to-xml

我正在开发一个解析 .csproj 文件的应用程序。`<NoWarn>`如果存在，它需要向属性添加附加值 。如果该属性不存在，我希望应用程序将此属性及其值添加到指定的父节点。我怎样才能做到这一点？我正在使用 LINQ-to-XML 来解析项目文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-20T15:17:27.760

未经测试，但是否类似于：

```
XNamespace ns = @"http://schemas.microsoft.com/developer/msbuild/2003";
XDocument doc = XDocument.Load(path);
var noWarn = (from grp in doc.Descendants(ns + "PropertyGroup")
        from el in grp.Descendants(ns + "NoWarn")
        select el).FirstOrDefault();
if(noWarn==null) {
    var grp = doc.Descendants(ns+"PropertyGroup").First();
    grp.Add(new XElement(ns+"NoWarn", "1234"));
} else {
    noWarn.Value += "; 1234";
}
doc.Save(path); 
```

# dns - 在 Windows XP 上，NSLOOKUP 和 PING 在什么情况下返回不同的 IP 地址？

> ID：666510
> 
> 赞同：17
> 
> 时间：2009-03-20T14:59:15.853
> 
> 标签：dns

在我们工作的防火墙内，我的机器经常为我们的某些域解析到错误的 IP。我们有一个 DNS 服务器，它是我们的主要 DNS，用于将外部域解析为内部 IP 地址（192.XXX 而不是公共 IP）。

有时我会解析到无法通过我们的防火墙正确路由的公共 IP。发生这种情况时，我运行：

```
ipconfig /flushdns
nslookup code.mydomain.com  - I get the right DNS server and the right internal IP
ping code.mydomain.com - I get the wrong external IP address. 
```

发生这种情况时，Firefox 也会解析到错误的 IP。这将在一天中间歇性地发生。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-03-20T15:00:53.400

nslookup 仅使用 DNS，而 ping 将首先在[`hosts`](http://en.wikipedia.org/wiki/Hosts_file)文件中查找。

例子：

```
nslookup localhost
Server:         208.67.220.220
Address:        208.67.220.220#53

Non-authoritative answer:
Name:   localhost.local.lan
Address: 67.215.65.132 
```

67.215.65.132 表示不存在的域 OpenDNS (hit-nxdomain.opendns.com)

```
ping localhost
PING localhost (127.0.0.1) 56(84) bytes of data.
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-20T15:03:40.243

在您的计算机上运行副本[`wireshark`](http://www.wireshark.org/)并跟踪离开系统的 DNS 查询，看看它们之间有什么不同。

请记住，`nslookup`根据定义，只查询 DNS。其他应用程序将使用替代查找机制（例如`hosts`文件）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-03-22T21:16:20.313

下载 wireshark 很有帮助，但如果这对某人有帮助，我在 Windows 网络上遇到了这种性质的问题。Nslookup 总是会返回我想要的 IP，但 ping 不会。我的问题是 DNS 设置为将未知域转发到外部 DNS 服务器。

如果我在没有转发的情况下使用 DNS 服务器 ping mysite.dev，第一次 DNS 查找会失败，然后使用 mysite.dev.mydomain.com 再次尝试并成功。

如果我使用带转发的 DNS 服务器 ping mysite.dev，它会转发 URL（因为它是“未知域”）并从转发的 DNS 服务器中取回一些垃圾 IP。它返回的 IP 将您放在一些 ask.com 搜索页面上作为 404 替代。我认为 ISP 以某种方式从中赚钱。这阻止了 DNS 客户端在添加我们的域 DNS 后缀的情况下重试。

请注意，还有另一个类似于 mysite.dev 的内部 url 问题。在 Windows Vista（可能还有 Windows 7）上，听起来您可能需要显式配置 DNS 客户端以尝试将 DNS 后缀应用于诸如 mysite.dev 之类的 url：

[http://blogs.technet.com/b/networking/archive/2009/04/16/dns-client-name-resolution-behavior-in-windows-vista-vs-windows-xp.aspx](http://blogs.technet.com/b/networking/archive/2009/04/16/dns-client-name-resolution-behavior-in-windows-vista-vs-windows-xp.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-24T08:16:23.933

从您的 ipconfig 示例中，我假设您使用的是 Windows。

nslookup 只是 DNS。

主机将在您的系统上使用正常的解析过程。这可能包括（但不限于：主机、Windows 命名和 DNS）。

您如何获得 Firefox 使用的 IP 地址？如果它出现在 URL 中，你应该忽略它，很多事情都可能发生在那个级别。

# c# - 如何在 asp.net 的同一页面上定义多个 OnInit 事件？

> ID：666511
> 
> 赞同：1
> 
> 时间：2009-03-20T14:59:34.510
> 
> 标签：c#, asp.net

我有一个页面，我在其中通过 OnInit 创建动态控件。在页面上，我还有一个自定义用户控件，我想在其中通过 OnInit（使用覆盖定义）创建其他动态控件。用户控件中的事件会覆盖页面上的事件：如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-20T15:25:47.850

您是否在覆盖中调用 base.OnInit() ？

# c# - RegisterStartupScript 和 RegisterClientScriptBlock 之间的区别？

> ID：666519
> 
> 赞同：145
> 
> 时间：2009-03-20T15:00:24.027
> 
> 标签：c#, javascript, asp.net, .net

`RegisterStartupScript`和之间的唯一区别`RegisterClientScriptBlock`是RegisterStartupScript将javascript放在`</form>`页面的结束标记之前，而RegisterClientScriptBlock将它放在页面的起始`<form>`标记之后？

另外，你什么时候会选择一个而不是另一个？我写了一个快速示例页面，在那里我遇到了问题，但我不确定它发生的确切原因。

### 这是 aspx 标记：

```
<html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">
        <title></title>
    </head>
    <body>
        <form id="form1" runat="server">
            <div>
                <asp:Label ID="lblDisplayDate" runat="server"
                           Text="Label" /><br />
                <asp:Button ID="btnPostback" runat="server" 
                            Text="Register Startup Script"
                            onclick="btnPostback_Click" /><br />
                <asp:Button ID="btnPostBack2" runat="server" 
                            Text="Register"
                            onclick="btnPostBack2_Click" />
            </div>
        </form>
    </body>
</html> 
```

### 这是背后的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    lblDisplayDate.Text = DateTime.Now.ToString("T");
}

protected void btnPostback_Click(object sender, EventArgs e)
{
    System.Text.StringBuilder sb = new System.Text.StringBuilder();
    sb.Append(@"<script language='javascript'>");
    sb.Append(@"var lbl = document.getElementById('lblDisplayDate');");
    sb.Append(@"lbl.style.color='red';");
    sb.Append(@"</script>");

    if(!ClientScript.IsStartupScriptRegistered("JSScript"))
    {
        ClientScript.RegisterStartupScript(this.GetType(),"JSScript",
        sb.ToString());
    }
}

protected void btnPostBack2_Click(object sender, EventArgs e)
{
    System.Text.StringBuilder sb = new System.Text.StringBuilder();
    sb.Append(@"<script language='javascript'>");
    sb.Append(@"var lbl = document.getElementById('lblDisplayDate');");
    sb.Append(@"lbl.style.color='red';");
    sb.Append(@"</script>");

    if (!ClientScript.IsClientScriptBlockRegistered("JSScriptBlock"))
    {
        ClientScript.RegisterClientScriptBlock(this.GetType(), "JSScriptBlock",  
        sb.ToString());
    } 
 } 
```

问题是当我单击`btnPostBack`按钮时，它会执行回发并将标签更改为红色，但是当我单击 时`btnPostBack2`，它会执行回发，但标签颜色不会变为红色。为什么是这样？是不是因为标签没有初始化？

我还读到，如果您使用的是`UpdatePanel`，则需要使用`ScriptManager.RegisterStartupScript`，但如果我有`MasterPage`，我会使用`ScriptManagerProxy`吗？

* * *

## 回答 #1

> 赞同：168
> 
> 时间：2009-03-20T15:09:31.883

[这是一个旧的讨论线程](http://groups.google.com/group/DotNetDevelopment/browse_thread/thread/402d2c0be6c904c5/)，我在其中列出了主要区别以及您应该使用这些方法的条件。我认为您可能会发现进行讨论很有用。

要解释与您发布的示例相关的差异：

一种。当您使用`RegisterStartupScript`时，它将在页面中的所有元素*之后呈现您的脚本（就在表单的结束标记之前）。*这使脚本能够调用或引用页面元素，而不会在页面的 DOM 中找不到它们。

这是调用该`RegisterStartupScript`方法时页面的呈现源：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1"><title></title></head>
<body>
    <form name="form1" method="post" action="StartupScript.aspx" id="form1">
        <div>
            <input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="someViewstategibberish" />
        </div>
        <div> <span id="lblDisplayDate">Label</span>
            <br />
            <input type="submit" name="btnPostback" value="Register Startup Script" id="btnPostback" />
            <br />
            <input type="submit" name="btnPostBack2" value="Register" id="btnPostBack2" />
        </div>
        <div>
            <input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="someViewstategibberish" />
        </div>
        <!-- Note this part -->
        <script language='javascript'>
            var lbl = document.getElementById('lblDisplayDate');
            lbl.style.color = 'red';
        </script>
    </form>
    <!-- Note this part -->
</body>
</html> 
```

湾。使用`RegisterClientScriptBlock`时，脚本会在 Viewstate 标记之后呈现，但在任何页面元素之前。由于这是一个直接脚本（不是可以*调用*的函数，它会立即被浏览器执行。但是浏览器在这个阶段没有在页面的 DOM 中找到标签，因此您应该收到“找不到对象”错误。

这是调用该`RegisterClientScriptBlock`方法时页面的呈现源：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1"><title></title></head>
<body>
    <form name="form1" method="post" action="StartupScript.aspx" id="form1">
        <div>
            <input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="someViewstategibberish" />
        </div>
        <script language='javascript'>
            var lbl = document.getElementById('lblDisplayDate');
            // Error is thrown in the next line because lbl is null.
            lbl.style.color = 'green'; 
```

因此，总而言之，如果您打算呈现函数定义，则应该调用后一种方法。然后，您可以使用前一种方法（或添加客户端属性）呈现*对该函数的调用。*

评论后编辑：

* * *

例如，以下函数将起作用：

```
protected void btnPostBack2_Click(object sender, EventArgs e) 
{ 
  System.Text.StringBuilder sb = new System.Text.StringBuilder(); 
  sb.Append("<script language='javascript'>function ChangeColor() {"); 
  sb.Append("var lbl = document.getElementById('lblDisplayDate');"); 
  sb.Append("lbl.style.color='green';"); 
  sb.Append("}</script>"); 

  //Render the function definition. 
  if (!ClientScript.IsClientScriptBlockRegistered("JSScriptBlock")) 
  {
    ClientScript.RegisterClientScriptBlock(this.GetType(), "JSScriptBlock", sb.ToString()); 
  }

  //Render the function invocation. 
  string funcCall = "<script language='javascript'>ChangeColor();</script>"; 

  if (!ClientScript.IsStartupScriptRegistered("JSScript"))
  { 
    ClientScript.RegisterStartupScript(this.GetType(), "JSScript", funcCall); 
  } 
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-04-24T06:41:58.503

这是一个来自 ASP.NET 社区的[最简单](http://www.codeproject.com/Articles/667538/The-Difference-Between-Page-ClientScript-RegisterS)的例子，这让我对这个概念有了一个清晰的理解......

这有什么区别？

例如，当页面加载到浏览器中时，这里有一种将焦点放在页面上的文本框的方法——使用 Visual Basic 使用该`RegisterStartupScript`方法：

```
Page.ClientScript.RegisterStartupScript(Me.GetType(), "Testing", _ 
"document.forms[0]['TextBox1'].focus();", True) 
```

这很有效，因为页面上的文本框是在浏览器到达页面底部并到达这一点 JavaScript 时生成并放置在页面上的。

但是，如果改为这样写（使用`RegisterClientScriptBlock`方法）：

```
Page.ClientScript.RegisterClientScriptBlock(Me.GetType(), "Testing", _
"document.forms[0]['TextBox1'].focus();", True) 
```

焦点不会到达文本框控件，页面上会生成 JavaScript 错误

这样做的原因是浏览器会在文本框出现在页面上之前遇到 JavaScript。因此，JavaScript 将无法找到 TextBox1。

# sql - 按第一个字符分组

> ID：666525
> 
> 赞同：40
> 
> 时间：2009-03-20T15:01:29.483
> 
> 标签：sql, group-by, aggregate-functions

我对 Oracle SQL 中的查询有疑问。

我在表`first_name`中有一个列`employees`。我想根据 中的第一个字符对我的记录进行分组`first_name`。

例如，我有 26 条记录，一条带有`name = 'Alice'`，一条带有`name = 'Bob'`，依此类推，每个名称的第一个字符按字母顺序排列。查询后，应该有 26 个组，每个组有 1 名员工。

我尝试了以下方法，但它不起作用：

```
SELECT employee_id, (SUBSTR(first_name,1,1)) AS alpha FROM employees
GROUP BY alpha;

name_which_starts_from       employees  
A                            10  
B                            2  
C                            4  
D                            9  
E                            3  
G                            3  
H                            3  
I                            2  
J                            16  
K                            7  
L                            6  
M                            6  
N                            4  
O                            1  
P                            6  
R                            3  
S                            13  
T                            4  
V                            2  
W                            3 
```

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2009-03-20T15:03:28.840

您的查询是错误的，因为如果您希望 EMPLOYEE_ID 起作用，则需要对 EMPLOYEE_ID 执行一些聚合函数。

喜欢：

```
select substr(first_name,1,1) as alpha, count(employee_id)
  from employees
 group by substr(first_name,1,1) 
```

你到底想要完成什么？

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-03-20T15:05:37.477

您需要按不是聚合函数的所有内容进行分组，因此您不能在 SELECT 投影中包含 employee_id。您还需要仅按 first_name 的第一个字符进行分组。像这样的东西应该工作：

```
SELECT  SUBSTR(first_name, 1, 1) AS alpha, COUNT(*) AS employee_count
FROM    employees
GROUP   BY SUBSTR(first_name, 1, 1); 
```

这将按名字的第一个字母分组，并显示属于该组的员工数量。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-01-28T06:43:04.630

我有类似的问题，并通过声明解决了这个问题：

`select SUBSTR(word, 1, 1) as S, count(word) FROM table_words group by S order by S ASC`

![输出](https://i.stack.imgur.com/FXK5N.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-20T15:12:17.057

听起来您几乎想要返回 26 条记录，其中 A、B、C 作为第一列，然后是第二列，其中包含分隔列表中的所有员工 ID。如果是这样，请参阅问题 468990 和/或[此 Ask Tom 链接](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:2196162600402#18313422264397)。类似的东西（未经测试）

```
SELECT SUBSTR(first_name,1,1), TO_STRING( CAST( COLLECT( employee_id ) AS ntt_varchar2 ) ) AS empIDs
FROM   employees
GROUP  BY
SUBSTR(first_name,1,1); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-20T15:08:47.860

分组时，选择列表中出现的所有未聚合的列也必须出现在“group by”子句中（employee_id 没有）。

你能澄清一下你想要做什么吗？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-07-20T11:34:52.100

在 Rails/postgres 中可能看起来像这样

```
group_clause = 'UPPER(LEFT(name, 1))'
Division.group(group_clause).order(group_clause).pluck(group_clause, 'COUNT(id)') 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-20T15:11:23.907

我想我知道你想做什么...

您应该创建一个包含“字母”列的小型参考表（字母，排序顺序）

你应该你的查询为

select l.letter, count(e.id) as employees from letter l left outer join employee e on l.letter = substr(e.first_name, 1,1)

当没有员工姓名中包含特定字母时，发布的另一个答案会给您带来意想不到的结果...

# algorithm - 从数组中提取前 N 个唯一整数

> ID：666528
> 
> 赞同：3
> 
> 时间：2009-03-20T15:02:12.993
> 
> 标签：algorithm, sorting, search

我有一个很大的整数列表（数千个），我想从中提取前 N 个（按 10-20 的顺序）唯一元素。列表中的每个整数大约出现 3 次。

编写一个算法来做到这一点是微不足道的，但我想知道什么是速度和内存效率最高的方法。

在我的案例中还有一些额外的限制和信息：

*   在我的用例中，我在数组上多次提取我的唯一性，每次都从头开始跳过一些元素。我跳过的元素数量在唯一提取期间是未知的。我什至没有上限。因此排序效率不高（我必须保留数组的顺序）。

*   整数到处都是，因此作为查找解决方案的位数组是不可行的。

*   我想不惜一切代价避免在搜索期间进行临时分配。

我目前的解决方案大致如下：

```
 int num_uniques = 0;
  int uniques[16];
  int startpos = 0;

  while ((num_uniques != N) && (start_pos < array_length))
  {
    // a temporary used later.
    int insert_position;

    // Get next element.
    int element = array[startpos++];

    // check if the element exist. If the element is not found
    // return the position where it could be inserted while keeping
    // the array sorted.

    if (!binary_search (uniques, element, num_uniques, &insert_position))
    {

      // insert the new unique element while preserving 
      // the order of the array.

      insert_into_array (uniques, element, insert_position);

      uniques++;
    }
  } 
```

binary_search / insert into array 算法完成了工作，但性能不是很好。insert_into_array 调用会移动很多元素，这会减慢一切。

有任何想法吗？

* * *

**编辑**

伟大的答案，伙计们！每个人都应该得到一个公认的答案，但我只能给出一个。我将实现你的一些想法，并使用一些典型数据进行性能测试。具有导致最快实施的想法的人得到了公认的答案。

我将在现代 PC 和嵌入式 CortexA8-CPU 上运行代码，并以某种方式对结果进行加权。也会公布结果。

* * *

**编辑：枪战结果**

Core-Duo 上的计时，160kb 测试数据集上的 100 次迭代。

```
Bruteforce (Pete):            203 ticks
Hash and Bruteforce (Antti):  219 ticks
Inplace Binary Tree (Steven): 390 ticks
Binary-Search (Nils):         438 ticks 
```

[http://torus.untergrund.net/code/unique_search_shootout.zip（C](http://torus.untergrund.net/code/unique_search_shootout.zip)源和测试数据）

补充说明：

*   就地二叉树绝对适合真正的随机分布（我的测试数据有上升的趋势）。

*   Binary-Search 在我的测试数据上运行良好，超过 32 个唯一值。它几乎是线性的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-03-20T15:04:28.977

为什么不直接将数组元素插入 std::set 并在集合有 N 个元素时停止？保证集合没有重复。它们也保证被排序，所以如果你遍历一个从 begin() 到 end() 的集合，你将按照 operator< 的排序顺序进行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-20T15:10:40.303

我会尝试在不平衡的二叉树中对唯一性进行排序。这将为您节省重新排列唯一性列表的成本，并且如果源列表足够随机，则插入到树中的内容不会严重失衡。（并且您可以使用二叉树一次完成搜索并插入如果不存在。）如果它确实变得不平衡，那么最坏的情况将与迭代 16 元素列表而不是进行二分查找。

您知道二叉树的最大大小，因此您可以提前预分配所有必要的内存，这应该不是问题。您甚至可以使用“我的节点内存不足”条件让您知道何时完成。

（编辑：显然人们认为我在这里提倡使用异常。我不是。我可能提倡实际常见的 lisp 样式条件，但不是大多数语言中发现的转义继续样式异常。此外，看起来他想要为此做C。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-20T15:12:06.917

对于一个很小的数组（如果你想要前 20 个元素，平均你有 10 个要检查相等性），线性扫描通常会执行二进制搜索，即使你不必插入元素。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-03-20T15:18:35.450

在您施加的限制下，您将实现的最快时间复杂度是`O(n)`使用带有`O(1)`查找功能的字典而不是二叉树来获取唯一整数。当您可以在恒定时间内查找它们时，为什么还要费心寻找它们呢？

由于您只处理“数千条记录”，因此其他任何事情都是微不足道的。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-20T15:07:35.087

不要将唯一的整数存储到数组中，而是使用实际的二叉树。它将使您免于重复移动数组元素。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-03-20T15:18:25.760

使用二叉树的数组表示。数组的大小可以是 3N。基本上

arr[i] = 值

arr[i+1] = 左子数组索引

arr[i+2] = 右子数组索引

遍历 k 的每个插入“树”，如果未找到 k，则更新其父级的 [i+1] 或 [i+2] 并将其添加到下一个空索引。当阵列中的空间用完时，您就有了答案。

例如

找到 42243123 的前 3 个唯一值：数组大小 = 3 * 3 = 9。

在下表中，“v”是值，“l”是左子索引，“r”是右子索引。

```
 v  l  r  v  l  r  v  l  r
 _________________________
-1 -1 -1 -1 -1 -1 -1 -1 -1
 4 -1 -1 -1 -1 -1 -1 -1 -1
 4  3 -1  2 -1 -1 -1 -1 -1
 4  3 -1  2 -1 -1 -1 -1 -1
 4  3 -1  2 -1 -1 -1 -1 -1
 4  3 -1  2 -1  6  3 -1 -1 
```

而你空间不足。

数组索引 0 mod 3 是您的答案。

您可以使用 4 组来保持顺序：

数组[i] = 值

array[i+1] = 原始数组中的位置

数组[i+2] = 左子索引

数组[i+3] = 右子索引

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-03-20T16:24:12.810

如果您有数千个整数并且每个整数大约出现 3 次，那么您的算法应该很快找到 N 个唯一整数的集合，对于小 e 大约在 N(1+e) 步内（假设整数的顺序相对随机）。

这意味着您的算法会将 N 次随机整数插入到 uniques 数组中。插入数字 K 将平均移动数组中的 K/2 个元素，产生 (N^2)/4 个移动操作。您的二分搜索大约需要 N * (log(N)-1) 步。这会为您的算法产生 (N^2)/4 + N(log(N)-1) + N(1+e) 的总复杂度。

我认为您可以通过以下方式做得更好：

```
int num_uniques = 0, startpos = 0, k, element;
int uniques[16];

/* Allocate and clear a bit table of 32 * 32 = 1024 bits. */
uint32 bit_table[32], hash;
memzero((void *)(&bit_table), sizeof(bit_table));

while (num_uniques < N && startpos < array_length) {
  element = array[startpos++];

  /* Hash the element quickly to a number from 0..1023 */
  hash = element ^ (element >> 16);
  hash *= 0x19191919;
  hash >>= 22;
  hash &= 1023;

  /* Map the hash value to a bit in the bit table.
     Use the low 5 bits of 'hash' to index bit_table
     and the other 5 bits to get the actual bit. */
  uint32 slot=hash & 31;
  uint32 bit=(1u << (hash >> 5));

  /* If the bit is NOT set, this is element is guaranteed unique. */
  if (!(bit_table[slot] & bit)) {
    bit_table[slot] |= bit;
    uniques[num_uniques++] = element;
  } else { /* Otherwise it can be still unique with probability
              num_uniques / 1024\. */
    for (k=0; k<num_uniques; k++) { if (uniques[k] == element) break }
    if (k==num_uniques) uniques[num_uniques++] = element;
  }
} 
```

该算法将在 N + N^2 / 128 的预期时间内运行，因为运行内部循环（索引变量 k）的概率很低。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-20T18:36:18.670

给定一个名为 L 的大小为 N 的整数列表

迭代 L 一次以找到数组中的最大值和最小值。

分配（1 个分配）一个名为 A 的大小为（小 .. 大）的整数数组。将此数组初始化为零

迭代 L，使用 L(i) 下标 A，增加在那里找到的整数。

然后做你的处理。在 L 中选择您的起点，然后在列表中向前走，查看 A(i)。选择你想要的任何 A(i) > 2 的集合。

完成后，丢弃 A。

如果您真的空间不足，请使用 2 位而不是整数，并具有以下解释

```
00 count = 0
01 count = 1
10 count = 2
11 count > 2 
```

# objective-c - 如何检测应用程序是否基于文档？

> ID：666529
> 
> 赞同：2
> 
> 时间：2009-03-20T15:02:24.787
> 
> 标签：objective-c, cocoa, macos

我正在开发一个 Cocoa/Objective C 应用程序，它使用 AppScript 从任何应用程序中读取活动文档。我已经成功地完成了这部分，但是能够确定应用程序是否基于文档会非常好。

显而易见的方法是查看应用程序中活动窗口的 AXDocument 属性，如果它包含路径，我们就知道应用程序是基于文档的。但是，如果文档未保存，这将不起作用。它也很笨拙。相当烦人的是，AXDocument 属性可能出现在非文档应用程序中，因此它的存在或不存在不能用于提供我寻求的信息。

我尝试查看通过应用程序进程和单个窗口的 AppleScript 公开的其他属性和属性。这些项目似乎都不能确定该应用程序是否基于文档。

我也尝试过查看一些 Info.plist 文件，但看不到任何可靠地表明这一点的东西。我只是不够努力吗？或者在Objective C或AppleScript中有没有这样做的好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-24T22:57:13.003

根据基于[文档的应用程序架构](http://developer.apple.com/documentation/Cocoa/Conceptual/Documents/Concepts/OverviewDocArchitecture.html#//apple_ref/doc/uid/20000023)指南构建的基于文档的应用程序应该满足几个条件。我不确定是否/如何可以访问 Mac OS 上的不同应用程序，但是通过反射（在 Objective-C 中），您可以测试是否存在 NSDocument 子类。另一个想法是只看菜单条目......是否有文件 - >新建，文件 - >打开菜单条目？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-24T23:09:06.937

您可能希望在应用程序包的 Info.plist 中查找 CFBundleDocumentTypes 键。这通常存在于基于文档的应用程序中，因此文档类型可以与扩展和加载它的类相关联。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-05T19:26:17.260

另一个想法是在标题栏中寻找代表代理图标的 AXImage；无标题文档可以简单地通过检查窗口标题是否为“无标题”或其本地化等效项来匹配。

（有些应用程序确实包含一个代理图标，即使是无标题文档，但很多都没有。）

# iphone - 界面生成器“模拟界面”不起作用

> ID：666530
> 
> 赞同：2
> 
> 时间：2009-03-20T15:02:27.297
> 
> 标签：iphone, cocoa-touch, interface-builder

我正在使用 Interface Builder 来尝试一些想法。我从来没有注意到有一个“模拟界面”功能显然会在 iPhone 模拟器中呈现笔尖。所以，我创建了一个视图，将一个组件放在那里（一个分段控件），保存它，选择“模拟界面”，模拟器启动但是......模拟器中没有呈现任何内容。只是黑屏。

我想也许我的笔尖不够完整，所以我用我所有的旧笔尖都试过了，但我都遇到了同样的问题。它们都没有在模拟器中渲染。有什么我错过的技巧吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-20T16:48:46.637

我认为这与从 xcode 进行“构建并运行”基本相同，您的界面需要连接到工作应用程序才能“模拟”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-14T04:14:07.690

UIView 必须包含在 UIWindow 中才能在模拟界面模式下可见。

按钮将显示突出显示和选择行为，活动指示器甚至会动画。

UITextField 甚至可以让您输入文本，但键盘只能通过 Return 键关闭，而不是通过触摸文本区域外。

选择器视图、日期视图和文本视图内部会有虚拟值，但您可以滚动它们。

UIImageViews / UIImages 不会出现，即使在按钮或其他控件内部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-11-04T14:53:34.747

自从3.0更新后我就再也没有看到这个了

# apache-flex - 你会用什么来在 Flex/AS3 中将数字填零？

> ID：666531
> 
> 赞同：10
> 
> 时间：2009-03-20T15:02:28.403
> 
> 标签：apache-flex, actionscript-3, padding, zero

**[这个](https://stackoverflow.com/questions/611873/ruby-like-question-make-this-function-shorter-actionscript-3/611961#611961)的副本。**

在 Flex/AS3 中，您将使用什么来在数字左侧填充零？

是否有等效`printf`或`NumberFormat`这样做的？

我正在寻找最好的实现或类似的东西：

```
public function zeroPad(number:int, width:int):String {
    // number = 46, width = 4 would return "0046"
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-03-21T13:33:59.780

```
public function zeroPad(number:int, width:int):String {
   var ret:String = ""+number;
   while( ret.length < width )
       ret="0" + ret;
   return ret;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T12:42:07.090

性能方面，我更喜欢使用 String 常量和 substr，如下所示：

```
package {
    public class Helper {
        private static const _ZEROS:String = "0000000000000000000000000000000000000000"; // 40 zeros, shorten/expand as you wish

        /*
         * f: positive integer value
         * z: maximum number of leading zeros of the numeric part (sign takes one extra digit)
         */
        public static function uint_Zeropadded(f:uint, z:int = 0):String {
            var result:String = f.toString();
            while (result.length < z)
                result = _ZEROS.substr(0, z - result.length) + result;
            return result;
        }
    }
} 
```

与将字符串逐个数多次扩展的性能缺点相比，字符串常量的足迹非常小。在大多数情况下（本例中最多 40 个零），所有调用的指令数都是相同的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-06-16T19:17:50.670

[Phil 的](https://stackoverflow.com/questions/666531/what-would-you-use-to-zero-pad-a-number-in-flex-as3/669310#669310)变体是一种优雅的[递归](http://en.wikipedia.org/wiki/Recursion_%28computer_science%29#Recursion_versus_iteration)：

```
public function zeroPad (number:String, width:int):String {
    if (number.length < width)
        return "0" + zeroPad(number, width-1);
    return number;
} 
```

我不知道它在 AS3 上的表现，但它确实看起来更酷！:-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T14:22:40.443

```
public static function getFormatedValue(num:Number, roundDecimalPlace:Number=2, showLastZerosInDecimalPlaces:Boolean = false, decimalSeparator:String=".", thousandsSeparator:String=",", currency:String="$"):String
{
  //assigns true boolean value to neg in number less than 0
  var neg:Boolean = (num < 0);

  //make the number positive for easy conversion
  num = Math.abs(num)

  var roundedAmount:String = String(num.toFixed(roundDecimalPlace));

  //split string into array for dollars and cents
  var amountArray:Array = roundedAmount.split(".");
  var dollars:String = amountArray[0]
  var cents:String = amountArray[1]

  //create dollar amount
  var dollarFinal:String = ""
  var i:int = 0
  for (i; i < dollars.length; i++)
  {
    if (i > 0 && (i % 3 == 0 ))
    {
      dollarFinal = thousandsSeparator + dollarFinal;
    }

    dollarFinal = dollars.substr( -i -1, 1) + dollarFinal;
  }       

  //create Cents amount and zeros if necessary
  var centsFinal:String;

  if(showLastZerosInDecimalPlaces)
  {
    centsFinal = String(cents);

    var missingZeros:int = roundDecimalPlace - centsFinal.length;

    if (centsFinal.length < roundDecimalPlace)
    {
      for (var j:int = 0; j < missingZeros; j++) 
      {
        centsFinal += "0";
      }
    }
  }
  else
  {
    if(Number(cents) != 0)
    {
      centsFinal = String(String(Number("0."+cents)).split(".")[1]);
    }
    else
    {
      roundDecimalPlace = 0;
    }
  }

  var finalString:String = ""

  if (neg)
  {
    finalString = "-"+currency + dollarFinal
  } else
  {
    finalString = currency + dollarFinal
  }

  if(roundDecimalPlace > 0)
  {
    finalString += decimalSeparator + centsFinal;
  } 

  return finalString;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-22T14:13:18.317

零填充例程（AS2）的非常简短的示例......

```
 Convert = function(Minutes) {
       return ('00'+String(int(Minutes/60)%24)).substr(-2,2);
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-22T21:43:41.613

我确实在 AS3 中维护了一个 printf：不幸的是堆栈溢出不会让我发布链接，但是如果谷歌代码的项目名称是 printf-as3

随时欢迎反馈。

--

[http://code.google.com/p/printf-as3/](http://code.google.com/p/printf-as3/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-22T23:17:13.390

```
/** 
 * originally by Chris Agiasotis @ http://agitatedobserver.com/as3-currency-formatter/
 * improved by Joseph Balderson @ http://www.joeflash.ca
 */
package
{
    public class CurrencyFormat
    {
        public function CurrencyFormat(){ }

        public function getCurrency(num:Number,
                    decimalSeparator:String=".",
                    decimalPlace:Number=2,
                    currency:String="$",
                    thousandsSeparator:String=","
                ):String
        {
            //assigns true boolean value to neg in number less than 0
            var neg:Boolean = (num < 0);

            //make the number positive for easy conversion
            num = Math.abs(num)

            var roundedAmount:String = String(num.toFixed(decimalPlace));

            //split string into array for dollars and cents
            var amountArray:Array = roundedAmount.split(".");
            var dollars:String = amountArray[0]
            var cents:String = amountArray[1]

            //create dollar amount
            var dollarFinal:String = ""
            var i:int = 0
            for (i; i < dollars.length; i++)
            {
                if (i > 0 && (i % 3 == 0 ))
                {
                    dollarFinal = thousandsSeparator + dollarFinal;
                }

                dollarFinal = dollars.substr( -i -1, 1) + dollarFinal;
            }   

            //create Cents amount and zeros if necessary
            var centsFinal:String = String(cents);

            var missingZeros:int = decimalPlace - centsFinal.length;

            if (centsFinal.length < decimalPlace)
            {
                for (var j:int = 0; j < missingZeros; j++) 
                {
                    centsFinal += "0";
                }
            }

            var finalString:String = ""

            if (neg)
            {
                finalString = "-"+currency + dollarFinal
            } else
            {
                finalString = currency + dollarFinal
            }

            if(decimalPlace > 0)
            {
                finalString += decimalSeparator + centsFinal;
            } 

            return finalString;
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-09T05:13:42.493

一个非常紧凑的解决方案：

```
public function zeroPad(s:String,pad:int):String {
    for(;s.length<pad;s='0'+s);
    return s;
} 
```

# php - 从 iPhone 应用程序调用远程 php 函数

> ID：666534
> 
> 赞同：6
> 
> 时间：2009-03-20T15:03:05.657
> 
> 标签：php, iphone, mysql, function

有人对如何设置调用 php 函数的 php 和可可方面有任何建议吗？作为我想要做什么的快速想法，我希望能够用数据填充两个表并从数据库中添加/删除数据。所以我想在 php 中设置一些函数，我可以从我的 iPhone 代码中调用这些函数，这些函数将从我的查询中返回值。我应该注意我的数据库是 MySQL。

大多数情况下，我对语法感兴趣，所以如果你有任何我可以玩的代码示例，那将非常有帮助。

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-20T15:11:49.053

好吧，要在 iPhone 中通过 HTTP 协议获取一些数据，您可以使用：

```
NSString *urlstr = [[NSString alloc] initWithFormat:@"http://www.yourserver.com/yourphp.php?param=%d", paramVal];
NSURL *url = [[NSURL alloc] initWithString:urlstr];
NSString *ans = [NSString stringWithContentsOfURL:url];
// here in ans you'll have what the PHP side returned. Do whatever you want
[urlstr release];
[url release]; 
```

现在，在 PHP 上，您可以按照您想要的方式返回数据。IE 和 XML，然后您将在 iPhone 端解析它们。

# windows - 如何避免 Windows (Vista) 执行“双重”webdav 请求

> ID：666553
> 
> 赞同：3
> 
> 时间：2009-03-20T15:07:35.710
> 
> 标签：windows, webdav

我们对 WebDAV 访问使用 DIGEST 身份验证。我们观察到 Windows 客户端将每个请求发送两次。第一个请求没有`Authorization`标头（并得到 401 响应），第二个请求有`Authorization`标头（通常得到正确的响应）。

虽然用户可能看不到这一点，但它会使整个 Webdav 访问速度变慢。

是否有可能以某种方式避免这种行为？也许一些特殊的反应会说服 Windows 不要这样做？当我们使用 BASIC 而不是 DIGEST 时，它可以正常工作（仅执行单个请求并`Authorization`始终包含标头）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-23T15:11:35.923

我相信您描述的方法，称为“挑战/响应”方法，是 WebDAV 的*预期*行为。至少它是根据[规格](http://www.webdav.org/specs/rfc2617.html#rfc.section.3)。没有身份验证标头的第一个请求是必要的；来自 WebDAV 的响应包含一个用于验证下一个请求的[随机数](http://en.wikipedia.org/wiki/Cryptographic_nonce)，有助于抵御例如重放攻击。

所以，底线：你不能也不*应该*试图避免这种行为。

至于您正在执行此操作的非 Windows 客户端......在初始质询/响应调用之后，它们可能会以某种方式缓存和重用 nonce。这在规范中当然是允许的——即使 nonce 应该是一次性项目，规范允许 WebDAV 服务器在多个请求中使 nonce 短暂。您的非 Windows 客户端可能能够识别您的 WebDAV 服务器并采取相应措施，但 Windows 客户端则不能。

在这种情况下，除了要求用户找到一个缓存 nonce 的客户端之外，我不知道有什么解决方法。不幸的是，我无法帮助您找到这样的客户。我的 Google-fu 在这方面失败了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-24T15:11:50.703

您还可以研究称为“预身份验证”的东西。Preauthentication 发送带有身份验证标头的第一个请求，而不是发送初始匿名请求。

虽然应用程序和 Web 服务非常适合这种情况，因为您通常事先知道是否需要身份验证，但您通常不知道网站是否需要事先进行身份验证。

WebFolders/WebDAV 是一个特例，但同样，您不确定。

预身份验证的问题是您可能会将信息发送到您不一定信任的站点。基本身份验证会泄露王国的密钥（纯文本中的用户/密码），但协商、NTLM 和摘要也不是那么糟糕。

您可以在[此处](http://weblogs.asp.net/avnerk/archive/2006/02/13/438093.aspx)查看在 .Net 中为 Web 服务进行预身份验证，我已使用该服务成功消除了最初的 401。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-26T07:42:03.530

如果您正在为 Windows WebFolder 客户端苦苦挣扎，您可能希望查看托管在[greenbytes WebDav 站点上的](http://www.greenbytes.de/tech/webdav/)[这个问题列表](http://www.greenbytes.de/tech/webdav/webfolder-client-list.html)。如果您发现列表中未包含任何 Vista 特定细节，请向编辑发送说明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T17:59:46.730

如果您不介意允许不太安全的设置，一种解决方法是允许匿名目录层次结构列出 PROPFIND 请求并验证其他所有内容；请参阅[http://blog.klinsight.com/2013/02/windows-webdav-double-authentication.html](http://blog.klinsight.com/2013/02/windows-webdav-double-authentication.html) - （我为我的工作写了那篇文章）。节省的时间很重要。

# oracle - Oracle物化视图调优

> ID：666554
> 
> 赞同：1
> 
> 时间：2009-03-20T15:07:40.420
> 
> 标签：oracle, performance, oracle-sqldeveloper, materialized-views

我正在尝试在我的应用程序中执行物化视图的调整。我开始执行：

```
 dbms_advisor.tune_mview() 
```

程序，并将以下代码写入 Oracle SQL Developer 的 SQL_Worksheet：

```
variable mvtask varchar2(100); 
variable mvddl varchar2(4000);

execute :mvtask := 'MV_FOO_BAR';
execute select query into :mvddl from user_mviews where view_name = 'MV_FOO_BAR';

execute dbms_advisor.tune_mview(:mvtask, :mvddl);

select * from user_tune_mview; 
```

显然，已经创建了物化视图（使用`refresh fast on commmit`，但是运行速度慢得令人无法接受）。顾问报告以下错误：

```
错误报告：
ORA-13600: 在 Advisor 中遇到错误
QSM-03112：无效的 CREATE MATERIALIZED VIEW 语句
ORA-06512: 在“SYS.DBMS_SYS_ERROR”，第 86 行
ORA-06512：在“SYS.PRVT_ACCESS_ADVISOR”，第 202 行
ORA-06512：在“SYS.PRVT_TUNE_MVIEW”，第 1026 行
ORA-06512：在“SYS.DBMS_ADVISOR”，第 754 行
ORA-06512: 在第 1 行
13600\. 00000 - “顾问遇到错误\n%s”
*原因：顾问中发生错误。
           此消息之后将有第二条消息给出
           有关错误性质的更多详细信息。
*行动：请参阅顾问文档
           有关第二条错误消息的说明。

```

但是，没有更多的报告，没有第二条错误消息的痕迹。有谁知道这里有什么问题？我更加惊讶，因为 MV 已经存在并且在数据库中工作，尽管速度很慢。

在相关说明中，有谁知道如何在 SQL Developer 中输入多行字符串。当我尝试类似的事情时：

```
execute :mvddl :='create materialized view MV_FOO_BAR
build immediate
refresh fast on commit
...
'; 
```

SQL Developer 在第一行窒息。字符串连接闪过我的脑海，但我有几个 100-150 行的 MV，我讨厌为每一个手动做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-20T15:32:39.457

(1) 当错误 13600 的文本引用“第二条错误消息”时，它表示堆栈中的下一个错误——在本例中为 QSM-03112。

(2) 我相信，错误的原因是调用 TUNE_MVIEW 中的第二个参数是 CREATE MATERIALIZED VIEW 语句的全文，但您传递的只是查询文本。

(3) 对于多行问题，如果您使用显式 PL/SQL 匿名块而不是“执行”，我希望它会起作用，例如：

```
BEGIN
  :mvddl := 'create materialized view MV_FOO_BAR
             build immediate
             refresh fast on commit
             ...
            ';
END;
/ 
```

# regex - PL/SQL 中的正则表达式

> ID：666555
> 
> 赞同：2
> 
> 时间：2009-03-20T15:08:18.390
> 
> 标签：regex, plsql

我正在使用正则表达式来确定用户输入的值是否是字母数字，允许一些特殊字符。

我正在使用以下代码，它工作正常：

```
CREATE OR REPLACE PROCEDURE Validate_Inputstring (input_String IN VARCHAR2) AS
BEGIN

  IF REGEXP_LIKE(input_String,'^[A-Z0-9a-z,+-?@]*$') THEN 
      DBMS_OUTPUT.PUT_LINE('U have entered alphanumeric chars--->'|| input_String);
    ELSE
      DBMS_OUTPUT.PUT_LINE('U NOT have entered alphanumeric chars---->'|| input_String);
  END IF;
END; 
```

上述程序运行良好。
现在我的问题是这些特殊符号是动态的，并且这些值因应用程序而异。

换句话说，这些存储在数据库中，并且对于每个应用程序都是不同的。

例如，对于应用程序 A，这些可能是`, + - ? @`，对于 B，这些可能是`{ ^ & '`。

是否可以编写一个正则表达式，以便一次检查字母数字字符和这些动态特殊符号？

我尝试过类似的东西

```
CREATE OR REPLACE PROCEDURE Validate_Inputstring (input_String IN VARCHAR2) AS
    special_symbols     VARCHAR2(300);

BEGIN
    special_symbols :=',+-?';
    IF  REGEXP_LIKE(input_String,'^[A-Z0-9a-zspecial_symbols]*$') THEN 
        DBMS_OUTPUT.PUT_LINE('U have entered alphanumeric chars--->'|| input_String);
      ELSE
        DBMS_OUTPUT.PUT_LINE('U NOT have entered alphanumeric chars---->'||    input_String);
    END IF;
END; 
```

但它不起作用。有人对此有解决方案吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T01:44:06.230

bobince 在正确的轨道上，但语法不太正确 - Oracle 中的连接运算符是 ||，并且在 replace() 调用中缺少表达式...

```
REGEXP_LIKE(input_String,'^[A-Z0-9a-zspecial_symbols]*$') 
```

你必须打破字符串来插入你的符号：

```
REGEXP_LIKE(input_String,'^[A-Z0-9a-z' || special_symbols || ']*$') 
```

但是，有一点问题是您的特殊符号对于正则表达式也可能是特殊的。[] 字符类中的“-”表示执行范围而不是字面匹配“-”；']' 会过早地结束字符类。您必须使用字符串替换对这些字符以及反斜杠本身进行反斜杠转义。

```
special_symbols:= ',+-?';
special_group:= replace(replace(replace(special_symbols, '\', '\\'), '-', '\-'), ']', '\]');
IF REGEXP_LIKE(input_String,'^[A-Z0-9a-z' || special_group || ']*$') ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-25T20:24:42.677

感谢您的答复

我有如下代码 FUNCTION Validate_Inputstring_Func(input_String IN VARCHAR2) RETURN BOOLEAN IS

special_symbols VARCHAR2(300); 开始

special_symbols :='+?@'; DBMS_OUTPUT.PUT_LINE('Enetered 值为 NULL'); ELSE DBMS_OUTPUT.PUT_LINE('Enetered value is Not NULL'|| input_String);

IF REGEXP_LIKE(input_String,'^[A-Z0-9a-z'+special_symbols+']*$') THEN DBMS_OUTPUT.PUT_LINE('U have input alphanumeric chars--->'|| input_String); 返回错误；

ELSE DBMS_OUTPUT.PUT_LINE('你没有输入字母数字字符---->'|| input_String); 返回真；万一; 万一;

结尾;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-20T16:27:56.670

> REGEXP_LIKE(input_String,'^[A-Z0-9a-zspecial_symbols]*$')

你必须打破字符串来插入你的符号：

```
REGEXP_LIKE(input_String,'^[A-Z0-9a-z'+special_symbols+']*$') 
```

但是，有一点问题是您的特殊符号对于正则表达式也可能是特殊的。[] 字符类中的“-”表示执行范围而不是字面匹配“-”；']' 会过早地结束字符类。您必须使用字符串替换对这些字符以及反斜杠本身进行反斜杠转义。

```
special_symbols:= ',+-?';
special_group:= replace(replace(replace('\', '\\'), '-', '\-'), ']', '\]');
IF REGEXP_LIKE(input_String,'^[A-Z0-9a-z'+special_group+']*$') ... 
```

# asp.net-mvc - 基于局部视图中操作的 ASP.NET MVC 只读字段

> ID：666562
> 
> 赞同：0
> 
> 时间：2009-03-20T15:09:59.463
> 
> 标签：asp.net-mvc

在 ASP.NET MVC 中使用局部视图来封装创建/编辑标记时，更改基于操作呈现的控件的最佳方法是什么？

例如，我只想允许在创建帐户时（通过文本框）输入电子邮件地址，然后在查看帐户时可以查看（通过纯 HTML）。

在伪代码中，我期待这样的事情：

```
<% if(Action == Create) {
  Html.TextBox("EmailAddress")
} else { 
  Html.Encode(Model.Person.EmailAddress)
} %> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-20T17:16:39.627

您可以使用自己的 HTML Helper 类来封装逻辑：

```
public static string DualModeTextBox(this HtmlHelper helper, ViewMode viewMode, string textBoxName, string textBoxValue)
{
  if (viewMode == ViewMode.Edit) {
    return System.Web.Mvc.Html.InputExtensions.TextBox(helper, textBoxName);
  } 
  //else
  return helper.Encode(textBoxValue);
} 
```

对于更复杂的任务，您还可以考虑[MVC 控件](http://weblogs.asp.net/leftslipper/archive/2009/03/03/asp-net-mvc-release-candidate-2-i-declare-myself-to-be-declarative.aspx)。

# css - 更改 GWT tabBar 项的 CSS

> ID：666564
> 
> 赞同：2
> 
> 时间：2009-03-20T15:10:37.217
> 
> 标签：css, gwt

**更新：** *我得到了第一部分的工作，但角落没有。见下文第 2 部分。*

如何将样式应用于 tabBar（在 GWT 中），以便一次可以使用单个 tabBar？我有几个不同的 tabPanel 需要有不同的样式，但我不知道如何正确地将样式应用于栏，然后如何将该样式添加到我的 CSS。

当我做类似的事情时：

```
tabBar.addstyle("thisisastyle"); 
```

它为整个栏添加了样式，我想将其应用于一组项目，特别是更改各个选项卡的背景颜色。我正在使用 DecoratedTabPanel，并且我有自己的一组用于圆角的图像，并且我想使用这些图像。此外，一旦正确应用样式，我如何在 CSS 中调用它？我目前的尝试是这样的：

```
.topTabs .gwt-DecoratedTabBar .tabMiddleCenter { 
```

**第2部分**

在为标签栏设置样式名称并按如下方式对其进行寻址后，可以轻松应用所有其他 CSS 样式：

```
.customizedStyleName .tabTopCenter {
    background-image: url('images/centerTopImage.gif');
} 
```

但这似乎不适用于两个角落，基本 GWT 会覆盖我的 CSS。右上角的 CSS 如下所示：

```
html > body .gwt-DecoratedTabBar .tabTopRight { 
```

在 Firebug（是的 Firefox）中检查它时。谁能告诉我如何覆盖它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-22T23:14:32.293

您应该在加载标准 GWT CSS 或其他库支持 CSS*后*加载自己的 CSS 样式。

然后，您可以自由地重新定义任何“基础”CSS……最后的 CSS 获胜。在 Firebug 中，您将看到带有“删除线”字体的覆盖 CSS 样式。

我这样做是为了覆盖 std. GWT、GWT-Ext 和 Ext-GWT CSS。

如果您试图重载“内置”的 CSS 类并且您没有样式详细信息，请使用 Firebug 对其进行检查……再次查看 Javadoc 后。

“GWT 孵化器”有关于类似于 ImageBundle... ResourceBundle 的新 CSS 机制的信息。以及动态定义样式规则的新方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-06-16T16:16:25.190

一般问题是standard.css 作为最后一个样式表动态链接到您的页面。这样，您的一些设置（即使是非常基本的设置，例如对于正文）可能会被standard.css 部分否决。从 .gwt.xml 文件中取消注释并没有帮助，因为您会丢失一堆想要的样式以及用于渲染装饰面板等的标准图形。

我在博客中描述了我的处理方式：http: [//IlIlIlIlIlIlII.blog.de/2010/05/12/gwt-s-standard-css-killed-my-page-layout-8574576/](http://IlIlIIlIlIlIlII.blog.de/2010/05/12/gwt-s-standard-css-killed-my-page-layout-8574576/)

如果您对如何更轻松地处理此问题有任何其他建议，如果您发表评论，我将不胜感激。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-31T06:06:53.517

您可以更改样式主名称并为整体编写自己的样式。

我认为您的问题在 Mozilla 中无法重现。它应该只能在 IE 中重现。所以你可以做的是，你可以从standard.css文件中复制整个样式，然后用customizedStyleName替换基本的gwt-DecoratedTabBar。然后在您的 .java 文件中，将样式主名称设置为customizedStyleName。然后通过删除不需要的图像等来编辑不同的样式。希望这会有所帮助。如果您想了解更多信息，请告诉。我将发布所需的源代码和 css 文件。

# windows - 如何从Windows的日志文件中删除密码？

> ID：666573
> 
> 赞同：1
> 
> 时间：2009-03-20T15:13:32.043
> 
> 标签：windows, logging, scripting, echo, sanitization

我有一个部署脚本（.bat），其中一部分需要调用其他程序并在命令行上发送密码。我将部署脚本的输出记录到文件中。问题是密码也被记录了。我需要一种清理此日志文件的方法。

一种方法是不回显包含密码的行，但我更愿意用另一个字符串替换密码。

这是在服务器（Windows 2008）上完成的，所以我不能只安装 cygwin 等。我认为 Windows 的“查找”命令可能会有所帮助，但它所能做的最好的事情是用“/v”选项省略整行。

**UPD：**做了一些研究，我认为 PowerShell 是要走的路。密码在环境变量中，所以需要弄清楚如何读取它并替换它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-25T16:39:41.327

如果您可以使用 JavaScript，则应该执行以下操作：

```
var rePassword = /password=\S+/g;
while (!WScript.StdIn.AtEndOfStream)
{
  WScript.StdOut.WriteLine(WScript.StdIn.ReadLine().replace(rePassword, 'password=sanitized'));
} 
```

这将读取其标准输入，用字符串“password=sanitized”替换任何出现的字符串“password=”，后跟任意数量的非空白字符，并将结果写入标准输出。您可以调整 rePassword 正则表达式和替换字符串以满足您的要求。假设您将该脚本保存为“sanitize.js”，您可以从批处理脚本中运行它，如下所示：

```
cscript sanitize.js < logfile.log > logfile.sanitized 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T14:51:47.820

我仔细阅读了 PowerShell 选项，在解决了编码、引号和其他一些问题之后，这是我的最终解决方案：

```
powershell "& {(Get-Content $env:LOG_FILENAME)|Foreach-Object {$_ -replace [regex]::escape($env:PASSWORD), '######'} | Set-Content ($env:LOG_FILENAME+\".clean.\"+(get-date).toString('yyyyMMddhhmmss')+\".log\")}" 
```

此行从批处理文件中调用，作为部署脚本的最后一步。在脚本的前面部分，设置了 LOG_FILENAME 和 PASSWORD 的值。

分解它：

从批处理文件执行 PowerShell：

```
powershell "& {...}" 
```

读取日志文件：

```
(Get-Content $env:LOG_FILENAME) 
```

对于每一行，将 [regex]::escape($env:PASSWORD) 替换为 '######'：

```
Foreach-Object {$_ -replace [regex]::escape($env:PASSWORD), '######'} 
```

转义 PASSWORD 环境变量中可能被解释为正则表达式保留字符的任何字符：

```
[regex]::escape($env:PASSWORD) 
```

将输出保存到新的日志文件中，并在原始名称后附加 .clean.[timestamp].log：

```
Set-Content ($env:LOG_FILENAME+\".clean.\"+(get-date).toString('yyyyMMddhhmmss')+\".log\") 
```

# internet-explorer-8 - 重新加载时 IE8 渲染不一致

> ID：666575
> 
> 赞同：4
> 
> 时间：2009-03-20T15:13:37.490
> 
> 标签：internet-explorer-8, refresh

我正在修复一个在新版本的 IE8 中不起作用的网站。过了一会儿，我发现您可以使用以下元标记强制 IE8 呈现为 IE7：

```
<!--
  Meta tag for IE8 so that it always displays the site in IE7 Compatibility mode
 -->
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" /> 
```

我发现虽然在您指定此元标记时页面加载正常；但是，当您在页面初始加载后单击或按下刷新按钮时，页面呈现完全错误（见下文）：

[![](https://i9.photobucket.com/albums/a58/Maskkkk/refresh.jpg)](https://i9.photobucket.com/albums/a58/Maskkkk/refresh.jpg)

这对我来说真的像是一个 IE8 错误，因为我从未见过任何其他浏览器在页面刷新时无常呈现。

正如其他人注意到的那样？

# 更新！

这是因为在 IE8 中安装了[CompanionJS 。](http://www.google.com/url?sa=t&source=web&ct=res&cd=1&url=http%3A%2F%2Fwww.my-debugbar.com%2Fwiki%2FCompanionJS%2FHomePage&ei=xNzcScq0HI22NIzX4dgN&usg=AFQjCNFKsEuzmMNZbkMe9UMl2OOgTVj25g)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-08T15:02:34.560

不是答案，但因为我还不能发表评论......

我可以在我维护的内部站点上使用 IE8 确认此行为。该网站一直是针对 Firefox 的，但现在他们要求我修复一些更明显的 IE 问题。起初我添加了 IE7 兼容元键，但是当我刷新页面时总是看到奇怪的渲染。认为它可能是元键所以我把它拿出来，我仍然得到这个问题。

当页面重新加载（在地址栏中输入）时，一切看起来都很棒。点击刷新，就会出现几个问题，包括盒子模型大小和浮动/清除排序问题。

我刚刚在我的另一个网站上证实了这一点 - 在第一次加载时呈现完美 - 点击刷新，一切都变得糟糕透顶。

我找不到其他提及此行为的事实让我有些担心我做错了什么 - 但我的网站都可以在 windows 和 mac 上的 Firefox/Chrome/Safari 中运行，并且以前在 IE7 中运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-20T15:23:28.213

极有可能是bug。你举报了吗？

我猜不可能只更改网页以使其在两种浏览器中都可以使用？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-20T16:09:56.777

有点奇怪，刷新它搞砸了。我不知道那个问题是什么或如何解决它。我想知道它对我的网站有什么作用。o_o 第一次在IE8 Beta上测试时没有发现任何问题。

似乎 div 相互重叠（无论出于何种原因，即使数学是正确的，如果 div 相互并肩，IE 有时也会对你大喊大叫）。您可以尝试将标头容器 div（以及所有容器 div，就此而言）设置为溢出：隐藏；这通常可以解决这个问题。您还可以尝试通过设置宽度或将其显示设置为内联来编辑导航列表（ul，而不是 li-s）。我怀疑这会改变什么，容器 div 可能是问题所在，但如果所有其他方法都失败了，它值得一试。

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-08T15:06:20.043

fwiw，我*看到*FF 渲染不一致，通常在严格的 xhtml 文档上 - 检查您的文档类型，并查看降级到过渡是否消除了不一致（即使它带来其他问题，它也会给您一个指针）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-04T15:38:06.633

我几乎遇到了相反的问题 - 在 IE8 和 IE6 中，在其他所有内容中呈现良好的页面......有时。一旦它们正常，它们就会保持正常，因此这似乎也是一个缓存问题，例如：浏览器在加载某些项目之前猜测它们的大小，但是一旦项目在缓存中，就会使用实际大小。

就我而言，它在缓存之前猜测错误，然后再正确。对于您的问题，它可能会在缓存之前猜测正确（您希望它如何），但是在重新加载时使用缓存文件时会出现问题。

只是一个想法。我可能用这个来找错树了，但我想我会在看到你的帖子时提到它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-11-24T20:03:37.220

这不仅仅是 CompanionJS。我从来没有为 IE8 安装过那个插件。但是我仍然遇到这些问题，最突出的是由于脚本未加载而导致的随机损坏的 Javascript 错误。

我有一些 NuSphere PHPEd 工具栏插件，但删除了它。问题依然存在。只有其他附加组件包括 Adob​​e PDF Reader Link Helper、Google Toolbar Notifier BHO、Java(tm) Plug-In 2 SSV Helper、JQSIEStartDetectorImpl 类。

# svn - 多个 scrums 代码集成

> ID：666577
> 
> 赞同：0
> 
> 时间：2009-03-20T15:14:56.423
> 
> 标签：svn, language-agnostic, version-control, merge, scrum

我工作的公司一直在一个项目上试用 Scrum，现在正在寻求将 scum 推广到三四个不同的项目团队。我们设想这些团队将在不同的功能分支中工作（我们使用的是 SVN）。

我们不确定不同团队的 sprint 是否应该同时结束，或者我们是否应该错开 sprint 以便 sprint 结束和发布是分开的。该产品是一个网站，因此部署不是问题。

我们关心代码集成，如果三个团队同时集成他们的代码，这是否容易导致冲突。但是如果发布是错开的，那么这个负载可能只会转移到处于冲刺中期的团队。

有没有人尝试过这两种方法，他们发现什么有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-21T17:22:03.910

我们也有几个团队，我们的 sprint 是一致的，并且我们不断整合：当一个故事完成时。这有时很烦人，但这样我们就可以避免长时间的集成，这可能是痛苦的。每个故事都在一个单独的分支中开发，然后集成到主分支中。当两个团队需要共享未集成的东西时，他们会在同一个分支中工作。

我们正在构建一个打包产品，因此部署对我们来说不是问题。

这两个问题联系在一起：如果你只在冲刺结束时进行整合，我不建议这样做，那么你最好错开冲刺。

Henrik Kniberg（Scrum 和 XP 的作者来自战壕）写了一篇关于[多个敏捷团队的版本控制](http://www.infoq.com/articles/agile-version-control;jsessionid=F05848C34E7D1E09C1794C3039225DF1)的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-20T15:35:21.507

我们有两个同步冲刺的团队，它似乎工作得很好。我们的策略是保持故事小。完成故事并在冲刺期间经常将它们发布到主干。是的，我们确实遇到了合并冲突，但它们是可控的。

哦，并确保团队之间相互沟通良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-21T17:31:02.690

看看这篇文章，简洁地解释了这些问题。[http://www.infoq.com/news/2008/04/kniberg-agile-version-control](http://www.infoq.com/news/2008/04/kniberg-agile-version-control)

持续集成。始终集成，每次签到时，不要等到一天结束或迭代结束时才集成。在每次签入时运行单元测试和自动化验收测试，以确保没有人破坏代码。

计划较小的功能，处理较小的工作。当事情破裂时，较小的块更容易修复。是否所有团队都在同一产品/代码行上工作？您可以尝试规划功能，以便这些功能不会影响其他团队正在开发的功能。尝试参加其他团队的站立会议，以便更早地解决集成冲突。如果功能冲突，请分享工作。

# reportingservices-2005 - Reporting Services 2005 - 如何嵌入水印？

> ID：666583
> 
> 赞同：5
> 
> 时间：2009-03-20T15:16:37.730
> 
> 标签：reportingservices-2005, watermark

在我们使用 Reporting Services 2005 的系统之一中，客户要求报告带有水印，以确保客户打印并发送的报告（例如：系统生成但必须签署的合同文件）并邮寄）是真实的。

我还没有找到一个明确的方法来做到这一点。如果有人对如何在报告上进行简单的图像水印有任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-25T16:44:24.493

我最终通过创建我想要的照片的非常淡化的版本来解决这个问题，使其尺寸与整张纸的尺寸相同，然后将其设置为我的报告中的背景图像。不理想，但很好。

# xml - 如何使用 XSLT/XPath 生成逗号分隔的列表？

> ID：666584
> 
> 赞同：35
> 
> 时间：2009-03-20T15:16:53.767
> 
> 标签：xml, xslt, xpath

鉴于此 XML 数据：

```
<根>
  <item>苹果</item>
  <item>橙色</item>
  <item>香蕉</item>
</root>

```

我可以使用这个 XSLT 标记：

```
...
<xsl:for-each select="root/item">
  <xsl:value-of select="."/>,
</xsl:for-each>
...

```

得到这个结果：

> 苹果、橙子、香蕉、

但是如何生成最后一个逗号不存在的列表？我认为可以按照以下方式进行操作：

```
...
<xsl:for-each select="root/item">
  <xsl:value-of select="."/>
  <xsl:if test="...">,</xsl:if>
</xsl:for-each>
...

```

但是测试表达式应该是什么？

我需要一些方法来确定列表有多长以及我当前在列表中的位置，或者，如果我当前正在处理列表中的最后一个元素（这意味着我不在乎它有多长或什么当前位置是）。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2009-03-21T06:14:13.113

这是一个很常见的模式：

```
<xsl:for-each select="*">
   <xsl:value-of select="."/>
   <xsl:if test="position() != last()">
      <xsl:text>,</xsl:text>
   </xsl:if>
</xsl:for-each> 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2009-03-20T15:21:39.623

看一下`position()`,`count()`和`last()`函数；例如， `test="position() &lt; last()"`。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-07-10T15:45:21.310

对于 XSLT 2.0 选项，您可以`separator`使用`xsl:value-of`.

这`xsl:value-of`：

```
<xsl:value-of select="/root/item" separator=", "/> 
```

会产生这个输出：

```
apple, orange, banana 
```

您还可以不只是使用逗号作为分隔符。例如，这个：

```
<xsl:text>'</xsl:text>
<xsl:value-of select="/root/item" separator="', '"/>
<xsl:text>'</xsl:text> 
```

将产生以下输出：

```
'apple', 'orange', 'banana' 
```

另一个 XSLT 2.0 选项是`string-join()`...

```
<xsl:value-of select="string-join(/*/item,', ')"/> 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2009-03-20T15:21:17.080

```
<xsl:if test="following-sibling::*">,</xsl:if> 
```

或（也许更有效，但你必须测试）：

```
<xsl:for-each select="*[1]">
   <xsl:value-of select="."/>
   <xsl:for-each select="following-sibling::*">
       <xsl:value-of select="concat(',',.)"/>
   </xsl:for-each>
</xsl:for-each> 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-03-20T16:25:38.970

**一个简单的 XPath 1.0 单行**：

     **`concat(., substring(',', 2 - (position() != last())))`**

把它放到这个转换中：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

    <xsl:template match="/*">
      <xsl:for-each select="*">
        <xsl:value-of select=
         "concat(., substring(',', 2 - (position() != last())))"
         />
      </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

**并将其应用于 XML 文档**：

```
<root>
    <item>apple</item>
    <item>orange</item>
    <item>banana</item>
</root> 
```

**得到想要的结果：**

`apple,orange,banana`

**编辑：**

这是罗伯特罗斯尼对此答案的评论：

> 对于人类来说，这是非常不透明的代码。它要求您了解关于 XSLT 的两个不明显的事情：1) 如果子字符串函数的索引超出范围，它会做什么；2) 逻辑值可以隐式转换为数字值。

**这是我的答案**：

*伙计们，从不羞于学习新事物。事实上，这就是 Stack Overflow 的全部内容，不是吗？:)*

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2009-03-22T17:26:55.810

罗伯特给出了班级的`not(position() = last())`答案。这需要您处理整个当前节点列表以获取上下文大小，并且在大型输入文档中这可能会使转换消耗更多内存。因此，我通常将测试反转为第一件事

```
<xsl:for-each select="*">
  <xsl:if test="not(position() = 1)>, </xsl:if>
  <xsl:value-of select="."/>   
</xsl:for-each> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-07-11T17:32:33.130

这就是我让它为我工作的方式。我根据您的列表对此进行了测试：

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="text" />

<xsl:template match="root">
    <xsl:call-template name="comma-join"><xsl:with-param name="list" select="item"/></xsl:call-template>
</xsl:template>

<xsl:template name="comma-join">
    <xsl:param name="list" />
    <xsl:for-each select="$list">
        <xsl:value-of select="." />
        <xsl:if test="position() != last()">
            <xsl:text>, </xsl:text>
        </xsl:if>
    </xsl:for-each>
</xsl:template> 
</xsl:stylesheet> 
```

# c - 嵌套函数是 C 标准的一部分吗？

> ID：666586
> 
> 赞同：5
> 
> 时间：2009-03-20T15:17:42.067
> 
> 标签：c

今天我遇到了我从未听说过的嵌套函数。它只是 GNU C 的一部分吗？

这是嵌套函数的维基百科示例。

```
float E(float x)
{
    float F(float y)
    {
        return x + y;
    }
    return F(3);
} 
```

从代码来看，嵌套函数似乎是一种 C++ 内联函数。那么，是否可以取出嵌套函数的地址呢？

编辑：

Adam 给出的 gcc 链接说嵌套函数的代码是在堆栈上动态创建的。但是如何从堆栈运行代码？它不应该在代码段中。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-03-20T15:19:30.907

不，它们不是 C 或 C++ 标准的一部分。它们是 GCC 编译器中的 GNU 扩展。有关详细信息，请参阅[GCC 手册](http://gcc.gnu.org/onlinedocs/gcc/Nested-Functions.html)。实际上可以获取嵌套函数的地址，这是使用称为[*trampolines*](http://en.wikipedia.org/wiki/Trampoline_(computers))的技术完成的，但请注意手册中列出的警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T15:21:16.457

嵌套函数是[GCC 扩展](http://gcc.gnu.org/onlinedocs/gcc-4.1.2/gcc/Nested-Functions.html)，而不是标准 C

# asp.net - 从 ASP.Net 2.0 Web 服务迁移到 WCF

> ID：666588
> 
> 赞同：1
> 
> 时间：2009-03-20T15:18:23.233
> 
> 标签：asp.net, wcf, web-services

我目前有一套在 ASP.Net 2.0 中开发的 .Net Web 服务。它们不使用任何 WS-E 扩展，而是在应用程序级别实现安全性。它们是相当简单的数据检索/更新功能。我有兴趣随着时间的推移逐渐将这些 Web 服务重构为 WCF 服务，主要是为了让它们在未来防止旧框架版本被弃用。我主要关心的是需要在客户端应用程序中完成的重新编码量以重新连接这些服务。

1.  有人已经走这条路了吗？
2.  它值得吗？
3.  你能推荐一些我可以用来继续我在这个领域的研究的阅读材料吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-20T16:02:11.070

你的担忧是有道理的。我一直在采取“如果它没有损坏，就不要修复它”的方法，并让现有的“遗留”Web 服务单独处理，直到它们需要工作为止。对于新的开发，我们一直在采用 WCF 来解决大大小小的通信问题。如果您有一个很好的干净对象模型，那么最明显的好处是易于集成。最明显的负面影响是（相对而言）有更多的配置问题，尤其是当您开始尝试保护事物时。

我发现您提到 WS-* 规范很有趣，因为这是我们在将 WCF 与 Java 系统集成时遇到的最大问题。安全功能现在完全缺失，我们最终使用 Microsoft.Web.Services3 (WSE3) 来处理 .NET 方面的一部分。

我强烈建议您[通读这些文章](http://wcfsecurity.codeplex.com/)，即使您现在不使用 WCF 进行安全保护，您也可能不得不在某个时候这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-21T13:12:56.273

您的客户很可能根本不需要改变。

在服务器端，我最近看到一个 ASMX 服务变成了 WCF 服务，只需将 [ServiceContract] 放在 [WebService] 类上，将 [OperationContract] 放在 [WebMethod] 方法上，然后将非它返回到 [DataContract] 和 [DataMember] 的原始类型。

# .net - 使 Excel 2002 使用 .NET v2.0.50727 运行时

> ID：666592
> 
> 赞同：1
> 
> 时间：2009-03-20T15:19:14.543
> 
> 标签：.net, excel, excel-2002

早上好，

我有一个 .Net 2.0 运行时 DLL，我试图从 Excel 加载（它是正确的 regasm'd）。我已经使用 Fusion Log Viewer 验证它正在尝试使用 1.1 运行时而不是 2.0 加载，这解释了它失败的原因。

一种解决方案是将 EXCEL.EXE.config 文件放在 excel 旁边，如下所示：

```
<?xml version="1.0"?>
   <configuration>
    <startup>
     <requiredRuntime version="v2.0.50727" />
    </startup>
</configuration> 
```

但是，我在这台机器上没有管理权限。使 Excel 2002 使用 2.0 运行时而不是 1.1 的替代方法是什么？

问候，艾伦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-20T15:23:21.193

您遇到的行为是 Office XP 和 2003 中的错误。要修复，您基本上必须安装 Microsoft 的[**KB908002**](http://support.microsoft.com/kb/908002)更新。

请参阅我对以下问题的回答：

*   [.NET Word 2003 加载项可以安装在 GAC 之外吗？](https://stackoverflow.com/questions/553794/can-a-net-word-2003-add-in-be-installed-outside-of-the-gac/553839)
*   [.NET app.config 问题](https://stackoverflow.com/questions/436958/-net-app-config-question)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-20T18:07:28.303

另一种解决方案是重命名/删除此注册表项：（[参考](http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/2ca664bc-c280-492c-b240-ae06f776803d/)）

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NETFramework\policy\AppPatch\v2.0.50727.00000\excel.exe 
```

# sql - SELECT 所有不在另一个表中的

> ID：666595
> 
> 赞同：2
> 
> 时间：2009-03-20T15:20:05.897
> 
> 标签：sql, sql-server

我继承了一个不太理想的表结构，并且我正在尝试尽可能多地改进它而不拆除和重建。目前至少有两个级别的数据，即遗留数据和营销覆盖数据。我正在尝试查找遗留数据中尚未进行营销覆盖的所有记录。

到目前为止，这就是我所拥有的：

```
SELECT DISTINCT 
  old.STYLE_NBR, old.COLOR_NBR 
FROM 
  LEGACY_PRODUCT_TABLE old
INNER JOIN 
  MARKETING_PRODUCT_TABLE new
ON old.STYLE_NBR <> new.style_number AND old.COLOR_NBR <> new.colour_number 
```

这似乎有效，但需要几分钟才能运行。如果可能的话，我想要一种更有效的方法。

其他信息：

*   遗留表中大约有 60,000 条记录
*   营销表中大约有 7,000 个
*   两者`STYLE_NBR`和`COLOR_NBR`都是 char(5)，并且当组合时，产生一个唯一的 ID。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-20T15:27:11.543

您应该使用 LEFT OUTER JOIN 并更改您的查找

```
SELECT DISTINCT 
  old.STYLE_NBR, old.COLOR_NBR 
FROM 
  LEGACY_PRODUCT_TABLE old
  LEFT OUTER JOIN MARKETING_PRODUCT_TABLE new
    ON (old.STYLE_NBR + old.COLOR_NBR) = (new.style_number + new.Colour_number)
WHERE (new.style_number + new.Colour_number) IS NULL 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-20T15:31:44.573

您当前拥有的内容不正确，因为它将为*不*匹配的每一行返回一行，因此如果存在营销覆盖，则旧表中每行的结果可能有 6999 行，如果没有，则可能有 7000 行。然后 distinct 将丢弃重复项，但结果将是错误的，因为即使存在营销匹配行，不匹配的行也会确保结果集中包含没有行的行。

试试这个：

```
select distinct style_nbr, color_nbr
 from legacy_product_table L
where not exists
(
   select * from marketing_product_table m
   where m.style_nbr = L.style_nbr and m.color_nbr = L.color_nbr
) 
```

确保产品表在 (style_nbr,color_nbr) 上有一个索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-20T15:24:55.653

连接字段是否被索引？这应该会大大加快速度。确保 old.STYLE_NBR、old.COLOR_NBR、new.style_number 和 new.color_number 已编入索引。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-20T15:26:02.950

我不知道这是否会更快，但可能值得一试。

```
SELECT DISTINCT 
  old.STYLE_NBR, old.COLOR_NBR 
FROM 
  LEGACY_PRODUCT_TABLE old
WHERE old.STYLE_NBR, old.COLOR_NBR 
NOT IN 
(
    SELECT old.STYLE_NBR, old.COLOR_NBR 
    FROM LEGACY_PRODUCT_TABLE old
    INNER JOIN 
        MARKETING_PRODUCT_TABLE new
        ON 
            old.STYLE_NBR == new.style_number AND old.COLOR_NBR == new.colour_number
) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-20T15:28:22.367

```
SELECT 
    old.* 
FROM 
    LEGACY_PRODUCT_TABLE old 
LEFT JOIN
    MARKETING_PRODUCT_TABLE new 
ON 
    new.style_number=old.STYLE_NBR AND 
    new.colour_number=old.COLOR_NBR 
WHERE 
    new.style_number IS NULL; 
```

更有可能使用您可能在相关四列上拥有的索引。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-20T15:31:43.013

可以尝试的一些选项是：

```
SELECT
    old.STYLE_NBR,
    old.COLOR_NBR
FROM  
    LEGACY_PRODUCT_TABLE old
LEFT OUTER JOIN
    MARKETING_PRODUCT_TABLE new
ON
    old.STYLE_NBR = new.style_number
AND
    old.COLOR_NBR = new.colour_number
WHERE
    new.style_number IS NULL

SELECT
    old.STYLE_NBR,
    old.COLOR_NBR
FROM  
    LEGACY_PRODUCT_TABLE old
WHERE
    NOT EXISTS
(
    SELECT
        *
    FROM
        MARKETING_PRODUCT_TABLE new
    WHERE
        old.STYLE_NBR = new.style_number
    AND
        old.COLOR_NBR = new.colour_number
) 
```

编辑：这两者的关键是您使用 = 而不是 <> 加入。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-20T15:29:11.413

不存在呢？

```
SELECT DISTINCT old.STYLE_NBR, old.COLOR_NBR 
FROM LEGACY_PRODUCT_TABLE old
WHERE NOT EXISTS
    (SELECT 1 FROM MARKETING_PRODUCT_TABLE new 
    WHERE old.STYLE_NBR = new.style_number 
      AND old.COLOR_NBR = new.colour_number) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-21T02:15:55.930

——除了呢？（如果这是 SQL Server 2005 或 2008）选择 old.Style_NBR、Old.Color_NBR 除了选择 new.Style_NBR、new.Color_NBR

-- 在 mssql 2008 中尝试下面的代码

声明@Old 表（Color_Nbr tinyint，Style_Nbr tinyint）

声明 @New 表 ( Color_Nbr tinyint, Style_Nbr tinyint )

插入@Old 值 (1,1), (2,2), (3,3), (4,4)

插入@New 值 (1,1), (2,2), (3,3), (5,5)

选择 o.Color_Nbr, o.Style_Nbr from @Old o

除了

从@New n 中选择 n.Color_Nbr、n.Style_Nbr

# c++ - 在 C/C++ 中从 TCP 套接字读取的正确方法是什么？

> ID：666601
> 
> 赞同：39
> 
> 时间：2009-03-20T15:21:31.480
> 
> 标签：c++, c, tcp

这是我的代码：

```
// Not all headers are relevant to the code snippet.
#include <stdio.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <netdb.h>
#include <cstdlib>
#include <cstring>
#include <unistd.h>

char *buffer;
stringstream readStream;
bool readData = true;

while (readData)
{
    cout << "Receiving chunk... ";

    // Read a bit at a time, eventually "end" string will be received.
    bzero(buffer, BUFFER_SIZE);
    int readResult = read(socketFileDescriptor, buffer, BUFFER_SIZE);
    if (readResult < 0)
    {
        THROW_VIMRID_EX("Could not read from socket.");
    }

    // Concatenate the received data to the existing data.
    readStream << buffer;

    // Continue reading while end is not found.
    readData = readStream.str().find("end;") == string::npos;

    cout << "Done (length: " << readStream.str().length() << ")" << endl;
} 
```

如您所知，这有点像 C 和 C++。BUFFER_SIZE 是 256 - 我应该增加大小吗？如果是这样，该怎么办？有关系吗？

我知道如果由于某种原因没有收到“结束”，这将是一个无限循环，这很糟糕 - 所以如果你能提出更好的方法，也请这样做。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2009-03-20T16:01:26.283

在不了解您的完整应用程序的情况下，很难说解决问题的最佳方法是什么，但一种常见的技术是使用以固定长度字段开头的标头，该字段表示消息其余部分的长度。

假设您的标头仅包含一个 4 字节整数，表示消息其余部分的长度。然后只需执行以下操作。

```
// This assumes buffer is at least x bytes long,
// and that the socket is blocking.
void ReadXBytes(int socket, unsigned int x, void* buffer)
{
    int bytesRead = 0;
    int result;
    while (bytesRead < x)
    {
        result = read(socket, buffer + bytesRead, x - bytesRead);
        if (result < 1 )
        {
            // Throw your error.
        }

        bytesRead += result;
    }
} 
```

然后在后面的代码中

```
unsigned int length = 0;
char* buffer = 0;
// we assume that sizeof(length) will return 4 here.
ReadXBytes(socketFileDescriptor, sizeof(length), (void*)(&length));
buffer = new char[length];
ReadXBytes(socketFileDescriptor, length, (void*)buffer);

// Then process the data as needed.

delete [] buffer; 
```

这做了一些假设：

*   整数在发送方和接收方上的大小相同。
*   发送方和接收方的字节序相同。
*   您可以控制双方的协议
*   当您发送消息时，您可以预先计算长度。

由于通常希望明确知道您通过网络发送的整数的大小，因此在头文件中定义它们并明确使用它们，例如：

```
// These typedefs will vary across different platforms
// such as linux, win32, OS/X etc, but the idea
// is that a Int8 is always 8 bits, and a UInt32 is always
// 32 bits regardless of the platform you are on.
// These vary from compiler to compiler, so you have to 
// look them up in the compiler documentation.
typedef char Int8;
typedef short int Int16;
typedef int Int32;

typedef unsigned char UInt8;
typedef unsigned short int UInt16;
typedef unsigned int UInt32; 
```

这会将上述内容更改为：

```
UInt32 length = 0;
char* buffer = 0;

ReadXBytes(socketFileDescriptor, sizeof(length), (void*)(&length));
buffer = new char[length];
ReadXBytes(socketFileDescriptor, length, (void*)buffer);

// process

delete [] buffer; 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-03-20T15:29:02.833

几个指针：

您需要处理返回值 0，它告诉您远程主机关闭了套接字。

对于非阻塞套接字，您还需要检查错误返回值 (-1) 并确保 errno 不是 EINPROGRESS，这是预期的。

您肯定需要更好的错误处理 - 您可能会泄漏“缓冲区”指向的缓冲区。我注意到，您没有在此代码段中分配任何位置。

如果您的 read() 填充了整个缓冲区，那么其他人就您的缓冲区如何不是以空结尾的 C 字符串提出了一个很好的观点。这确实是一个问题，而且是一个严重的问题。

您的缓冲区大小有点小，但只要您不尝试读取超过 256 个字节或您为其分配的任何内容，它就应该可以工作。

如果您担心在远程主机向您发送格式错误的消息（潜在的拒绝服务攻击）时进入无限循环，那么您应该使用 select() 并在套接字上设置超时以检查可读性，并且仅在以下情况下读取数据可用，如果 select() 超时则退出。

这样的事情可能对你有用：

```
fd_set read_set;
struct timeval timeout;

timeout.tv_sec = 60; // Time out after a minute
timeout.tv_usec = 0;

FD_ZERO(&read_set);
FD_SET(socketFileDescriptor, &read_set);

int r=select(socketFileDescriptor+1, &read_set, NULL, NULL, &timeout);

if( r<0 ) {
    // Handle the error
}

if( r==0 ) {
    // Timeout - handle that. You could try waiting again, close the socket...
}

if( r>0 ) {
    // The socket is ready for reading - call read() on it.
} 
```

根据您期望接收的数据量，您重复扫描整条消息以寻找“结尾”的方式；令牌非常低效。最好使用状态机（状态为 'e'->'n'->'d'->';'）来完成，这样您只需查看每个传入字符一次。

说真的，你应该考虑找一个图书馆来为你做这一切。做到正确并不容易。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-20T16:04:12.953

如果您实际按照 dirks 的建议创建缓冲区，则：

```
 int readResult = read(socketFileDescriptor, buffer, BUFFER_SIZE); 
```

可能会完全填满缓冲区，可能会覆盖您在提取到字符串流时所依赖的终止零字符。你需要：

```
 int readResult = read(socketFileDescriptor, buffer, BUFFER_SIZE - 1 ); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-21T03:38:51.253

1）其他人（尤其是急切地）注意到缓冲区需要分配一些内存空间。对于较小的 N 值（例如，N <= 4096），您也可以在堆栈上分配它：

```
#define BUFFER_SIZE 4096
char buffer[BUFFER_SIZE] 
```

`delete[]`这使您不必担心在抛出异常时确保缓冲区。

但请记住，堆栈的大小*是*有限的（堆也是有限的，但堆栈是有限的），所以你不想在那里放太多。

2）在 -1 返回代码上，您不应该简单地立即返回（立即抛出异常更加粗略。）如果您的代码不仅仅是简短的家庭作业，您需要处理某些正常情况. 例如，如果非阻塞套接字上当前没有可用数据，则 EAGAIN 可能会在 errno 中返回。查看 read(2) 的手册页。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-20T15:27:54.473

你在哪里为你的分配内存`buffer`？您调用的行`bzero`调用未定义的行为，因为缓冲区不指向任何有效的内存区域。

```
char *buffer = new char[ BUFFER_SIZE ];
// do processing

// don't forget to release
delete[] buffer; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-20T16:17:19.193

这是我在使用套接字时总是参考的一篇文章。

[SELECT() 的世界](http://www.lowtek.com/sockets/select.html)

它将向您展示如何可靠地使用“select()”，并在底部包含一些其他有用的链接，以获取有关套接字的更多信息。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-11T16:23:23.800

只是从上面的几个帖子中添加内容：

read() - 至少在我的系统上 - 返回 ssize_t。这类似于 size_t，但已签名。在我的系统上，它是一个长整数，而不是整数。如果您使用 int，您可能会收到编译器警告，具体取决于您的系统、编译器以及您打开了哪些警告。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-03-02T12:55:54.540

对于任何重要的应用程序（IE 应用程序必须接收和处理不同长度的不同类型的消息），您特定问题的解决方案不一定只是一个编程解决方案——它是一种约定，IE 是一种协议。

为了确定应传递给`read`调用的字节数，应建立应用程序接收的公共前缀或标头。这样，当套接字第一次读取可用时，您可以决定预期的内容。

二进制示例可能如下所示：

```
#include <stdint.h>
#include <stdlib.h>
#include <stdio.h>
#include <unistd.h>
#include <arpa/inet.h>

enum MessageType {
    MESSAGE_FOO,
    MESSAGE_BAR,
};

struct MessageHeader {
    uint32_t type;
    uint32_t length;
};

/**
 * Attempts to continue reading a `socket` until `bytes` number
 * of bytes are read. Returns truthy on success, falsy on failure.
 *
 * Similar to @grieve's ReadXBytes.
 */
int readExpected(int socket, void *destination, size_t bytes)
{
    /*
    * Can't increment a void pointer, as incrementing
    * is done by the width of the pointed-to type -
    * and void doesn't have a width
    *
    * You can in GCC but it's not very portable
    */
    char *destinationBytes = destination;
    while (bytes) {
        ssize_t readBytes = read(socket, destinationBytes, bytes);
        if (readBytes < 1)
            return 0;
        destinationBytes += readBytes;
        bytes -= readBytes;
    }
    return 1;
}

int main(int argc, char **argv)
{
    int selectedFd;

    // use `select` or `poll` to wait on sockets
    // received a message on `selectedFd`, start reading

    char *fooMessage;
    struct {
        uint32_t a;
        uint32_t b;
    } barMessage;

    struct MessageHeader received;
    if (!readExpected (selectedFd, &received, sizeof(received))) {
        // handle error
    }
    // handle network/host byte order differences maybe
    received.type = ntohl(received.type);
    received.length = ntohl(received.length);

    switch (received.type) {
        case MESSAGE_FOO:
            // "foo" sends an ASCII string or something
            fooMessage = calloc(received.length + 1, 1);
            if (readExpected (selectedFd, fooMessage, received.length))
                puts(fooMessage);
            free(fooMessage);
            break;
        case MESSAGE_BAR:
            // "bar" sends a message of a fixed size
            if (readExpected (selectedFd, &barMessage, sizeof(barMessage))) {
                barMessage.a = ntohl(barMessage.a);
                barMessage.b = ntohl(barMessage.b);
                printf("a + b = %d\n", barMessage.a + barMessage.b);
            }
            break;
        default:
            puts("Malformed type received");
            // kick the client out probably
    }
} 
```

您可能已经看到使用二进制格式的一个缺点 - 对于每个大于`char`您读取的 a 的属性，您必须使用`ntohl`or`ntohs`函数确保其字节顺序正确。

另一种方法是使用字节编码的消息，例如简单的 ASCII 或 UTF-8 字符串，这完全避免了字节顺序问题，但需要额外的努力来解析和验证。

C 中的网络数据有两个最终考虑因素。

首先是一些 C 类型没有固定宽度。例如，humble`int`定义为处理器的字长，所以 32 位处理器会产生 32 位`int`，而 64 位处理器会产生 64 位`int`。好的、可移植的代码应该让网络数据使用固定宽度的类型，就像`stdint.h`.

第二个是结构填充。具有不同宽度成员的结构将在一些成员之间添加数据以保持内存对齐，从而使结构在程序中使用起来更快，但有时会产生令人困惑的结果。

```
#include <stdio.h>
#include <stdint.h>

int main()
{
    struct A {
        char a;
        uint32_t b;
    } A;

    printf("sizeof(A): %ld\n", sizeof(A));
} 
```

在这个例子中，它的实际宽度不是 1 `char`+ 4 `uint32_t`= 5 字节，而是 8：

```
mharrison@mharrison-KATANA:~$ gcc -o padding padding.c
mharrison@mharrison-KATANA:~$ ./padding 
sizeof(A): 8 
```

这是因为之后添加了 3 个字节`char a`以确保`uint32_t b`内存对齐。

因此，如果您`write`a `struct A`，然后尝试在另一侧读取 a`char`和 a `uint32_t`，您将得到`char a`, 和 uint32_t ，其中前三个字节是垃圾，最后一个字节是您写入的实际整数的*第一个*字节。

要么将您的数据格式显式记录为 C 结构类型，要么更好地记录它们可能包含的任何填充字节。

# ruby - Ruby 网络服务

> ID：666610
> 
> 赞同：1
> 
> 时间：2009-03-20T15:24:06.713
> 
> 标签：ruby, web-services, soap

我正在考虑使用 Ruby on Rails/MySQL 堆栈创建一个 Web 应用程序，我想知道围绕 Web 服务和 SOAP 有哪些可用的功能。框架内是否有功能，或者是否需要扩展，如果需要怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-20T15:34:19.827

Rails 选择了[REST 而不是 SOAP](http://weblog.rubyonrails.org/2007/12/7/rails-2-0-it-s-done)：

> Rails 在 SOAP 与 REST 的辩论中选择了一方，这可能不足为奇。除非您绝对必须将 SOAP 用于集成目的，否则我们强烈建议您不要这样做。作为它的自然扩展，我们从默认包中提取了 ActionWebService。它只是一个 gem install actionwebservice ，但它仍然发送了一条重要消息。

尽管如此，如果您必须使用 SOAP，总是有[soap4r](http://dev.ctor.org/soap4r)，但它只支持 SOAP 1.1。更好的选择可能是[WSF/Ruby](https://wso2.org/project/wsf/ruby/1.0.0/docs/index.html)。Mark Thomas 有一个[示例控制器](http://markthomas.org/2008/01/14/industrial-strength-web-services-for-ruby/)来帮助您启动和运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-20T15:37:45.933

Rails 中的旧方法是使用[Action Web Service](http://aws.rubyonrails.org/)框架。现在首选的方法是使用 RESTful Web 服务的[ActiveResource](http://railscasts.com/episodes/94-activeresource-basics)框架。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-20T16:37:09.817

Rails 在默认框架中选择了 REST over SOAP。不过，如果您愿意，走 SOAP 路线并不难。

我不推荐soap4r——在几个月前，无论如何，这不是生产质量。[ActionWebService](http://www.datanoise.com/articles/2008/7/2/actionwebservice-is-back)的更新版本对我来说效果更好。

# command-line - 通过命令行远程管理 Windows XP

> ID：666611
> 
> 赞同：5
> 
> 时间：2009-03-20T15:24:13.360
> 
> 标签：command-line, windows-xp, ssh, administration

有谁知道仅使用命令行对 Windows XP 机器进行远程管理的好方法？

目前它唯一需要做的就是能够安装应用程序/补丁，并在机器之间传输文件，安装注册表补丁也很好。

目前，我们使用了一个可怕的黑客解决方案，它使用了 NetMeeting，过去我已经使用 SSH for windows（当时是 windows 2000）拼凑了一个概念证明，但它并没有让我满意，而且有很多错误。这可能是我运行的 SSH 守护程序的结果。

我对任何事情都持开放态度，但是使用 SSH 的解决方案将是理想的，因为它已获准在我的组织中安装，而且它是免费的。我在加拿大政府工作，所以任何免费的都是最好的，我们已经批准安装的任何东西都更好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-20T15:37:02.860

[psexec](http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx)将允许您远程运行命令。其他一些 PsTools 可以帮助您终止应用程序、获取进程列表等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T16:44:29.207

[软件测试自动化框架 (STAF)](http://staf.sourceforge.net/)专为远程访问、安装软件、传输文件而设计。等等。它是开源的，如果没有可以满足您需求的服务，您可以编写自己的服务。它还有一个 GUI 组件，用于跨机器池编写、调度、排队和监视作业。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-20T16:58:30.590

为什么一定要

> 仅使用命令行远程管理 Windows XP 机器？

我认为您通过坚持命令行非常限制自己。在 Windows 环境中，您可以轻松地使用组策略来分发大多数软件和/或补丁，而对于那些您不能使用的，您通常可以通过任何流行的脚本语言（如 JScript、VBScript、Kixtart、AutoIt、 Powershell 等。使用这些脚本语言，您可以轻松地利用 WMI 来执行和监控远程系统上的进程、复制文件、更新注册表……基本上所有您想要完成的事情……而且不会花费您除了学习这些技术的成本，还有许多在线资源以及如何使用它们的文档。这是 Microsoft 脚本中心的链接，这是一个很好的开始：[http://www.microsoft.com/technet/scriptcenter/default.mspx](http://www.microsoft.com/technet/scriptcenter/default.mspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-20T17:04:40.170

我前段时间写了这个，并用它来维护我的 Windows XP 桌面一段时间： [Windows 上的 ssh 和 telnet](http://roqet.org/ssh_and_telnet_on_windows.html)

我使用了 SSH 选项（不是 telnet）。它适用于我的目的（终止远程任务、复制文件等）。它使用 Cygwin，但您可以运行常规的 windows 命令以及 cygwin 附带的 bash 命令。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-04T15:56:16.863

> 目前它唯一需要做的就是能够安装应用程序/补丁，并在机器之间传输文件，安装注册表补丁也很好。

尝试下载并安装 eurysco 以按顺序使用：

1.  从 eurysco 文件浏览器传输具有多重上传功能的文件、应用程序和补丁
2.  从 eurysco 命令行功能以静默模式安装应用程序和补丁
3.  从 eurysco 系统注册表功能编辑注册表

[http://www.eurysco.com/features](http://www.eurysco.com/features)

# c# - 可用于 C# 的最好且易于使用的图形库是什么？

> ID：666617
> 
> 赞同：0
> 
> 时间：2009-03-20T15:25:45.137
> 
> 标签：c#, graphics

我需要一个基于开源的图形库来从数据库生成 jpg 图形，例如来自 MS SQL 服务器的数据。我猜数据来自哪里并不重要。图形将类似于曲线、条形、饼图的趋势......

我发现了几个可用的库，例如 NPLOT 和 ZedGraph，在我对这些库发表意见之前，我只想了解大师对这个问题的看法。还有比这两个更好的库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-20T16:11:12.467

[Microsoft .NET Framework 3.5](http://code.msdn.microsoft.com/mschart)的Microsoft 图表控件是免费的，但不是开源的。数据绑定支持似乎[很全面](http://blogs.msdn.com/alexgor/archive/2009/02/21/data-binding-ms-chart-control.aspx)，图表也很漂亮。

我对 ZedGraph 的唯一经验是几年前。它在我们部分信任的 ASP.NET 环境中表现不佳，因此如果您被它吸引，也许需要考虑这一点。

凯夫

# c# - Visual Studio 调试器不会进入未使用的变量声明

> ID：666624
> 
> 赞同：3
> 
> 时间：2009-03-20T15:26:59.547
> 
> 标签：c#, debugging

调试器不想单步执行未使用的变量。如果我声明`(var x = "hola")`它无法识别`x`并说它在当前上下文中不存在。当我做一些工作时，`x`它会识别它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-20T15:32:26.493

那行代码可能已被编译器优化掉......如果您关闭优化，您可能可以进入它。

# iphone - SQLite - 删除和添加新对象的智能方法

> ID：666625
> 
> 赞同：0
> 
> 时间：2009-03-20T15:27:01.450
> 
> 标签：iphone, objective-c, sqlite

我的数据库中有一个表，我希望表中的每一行都有一个唯一的 id 并按顺序命名这些行。

例如：我有 10 行，每行都有一个 id - 从 0 开始，到 9 结束。当我从表中删除一行时，比如说 - 第 5 行，就会出现一个“洞”。之后我添加了更多数据，但“洞”仍然存在。

对我来说，知道确切的行数并在每一行都有数据以便任意访问我的表是很重要的。

sqlite有办法做到吗？还是我必须手动管理数据的删除和添加？

提前谢谢你，伊利亚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-22T07:58:47.050

您是否真的想这样做可能值得考虑。主键通常不应该在行的生命周期内改变，你总是可以通过运行找到总行数：

```
SELECT COUNT(*) FROM table_name; 
```

**也就是说**，每当删除创建一个漏洞时，以下触发器应该“向下滚动”每个 ID 号：

```
CREATE TRIGGER sequentialize_ids AFTER DELETE ON table_name FOR EACH ROW
BEGIN
UPDATE table_name SET id=id-1 WHERE id > OLD.id;
END; 
```

我在一个示例数据库上对此进行了测试，它似乎像宣传的那样工作。如果你有下表：

```
id name
1  First
2  Second
3  Third
4  Fourth 
```

并删除 id=2 的地方，之后表格将是：

```
id name
1  First
2  Third
3  Fourth 
```

此触发器可能需要很长时间并且具有非常差的缩放属性（删除的每一行和表中剩余的每一行都需要更长的时间）。在我的电脑上，删除 1000 行表开头的 15 行需要 0.26 秒，但在 iPhone 上肯定会更长。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-22T12:30:16.960

我强烈建议您重新考虑您的设计。在我看来，您问自己将来会遇到麻烦（例如，如果您创建另一个表并希望在表之间建立一些关系）。

如果您想知道行数，请使用：

```
SELECT count(*) FROM table_name; 
```

如果要按 id 顺序访问行，只需使用 PRIMARY KEY 约束定义此字段：

```
CREATE TABLE test (
id INTEGER PRIMARY KEY,
...
); 
```

并使用带有 ASC 或 DESC 的 ORDER BY 子句获取行：

```
SELECT * FROM table_name ORDER BY id ASC; 
```

Sqlite 为主键字段创建索引，所以这个查询速度很快。我认为您会对阅读 LIMIT 和 OFFSET 子句感兴趣。最好的信息来源是[SQLite 文档](http://www.sqlite.org/lang_select.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-22T11:33:10.560

如果您不想采用 Stephen Jennings 非常聪明但会破坏性能的方法，只需稍作不同的查询即可。代替：

```
SELECT * FROM mytable WHERE id = ? 
```

做：

```
SELECT * FROM mytable ORDER BY id LIMIT 1 OFFSET ? 
```

请注意，它`OFFSET`是从零开始的，因此您可能需要从索引的变量中减去 1。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-20T16:28:51.550

如果您想回收已删除的行 ID，则 VACUUM 命令或 pragma 可能是您所寻求的，

[http://www.sqlite.org/faq.html#q12](http://www.sqlite.org/faq.html#q12)

[http://www.sqlite.org/lang_vacuum.html](http://www.sqlite.org/lang_vacuum.html)

[http://www.sqlite.org/pragma.html#pragma_auto_vacuum](http://www.sqlite.org/pragma.html#pragma_auto_vacuum)

# c# - 返回 this 的名为 @this 的私有属性

> ID：666627
> 
> 赞同：1
> 
> 时间：2009-03-20T15:27:25.520
> 
> 标签：c#, coding-style

我知道为 C# 字符串文字添加前缀将其`@`标记为逐字字符串文字，但是如果将其作为私有属性名称的前缀，这将起到什么作用？

这出现在我正在维护的一些代码中......

```
public class JourneyBuilder
{
    // ...

    private JourneyBuilder @this
    {
        get { return this; }
    }

    // ...
} 
```

任何人都可以提出一个理由吗？

## 编辑

我想这实际上是两个问题（其中一个已经回答了）。第二个是：为什么有一个只返回的私有财产`this`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-20T15:29:46.530

这是一种“转义”保留关键字的方式，因此您可以将其用作标识符。在大多数情况下，最好简单地提出一个不同的名称，而不是使用这种方法，但 C# 编译器确实允许这样做。

在旁注中，我看到它使用的唯一一个有意义的地方是当您命名扩展方法的实例参数时，如下所示：

```
public static void Foo(this Object @this)
{
    // ...
} 
```

但即使在这种情况下，命名参数`source`或其他名称也同样可以表明其性质。

至于为什么你需要一个可以返回的*私有*财产`this`：*没有理由这样做*。您只是为该类型提供了一个私有方法来访问已经可用的引用。幸运的是，由于该成员是私有的，您可以轻松地将其删除。

# c++ - 从 dll 导入显式实例化的模板类

> ID：666628
> 
> 赞同：7
> 
> 时间：2009-03-20T15:27:29.453
> 
> 标签：c++, dll, templates

作为一个 dll 新手，我不得不向全能的 SO 询问一些事情。

假设我像这样显式实例化一个模板类：

```
template class __declspec(dllexport) B<int>; 
```

如何再次使用导入这个模板类？

我已经尝试在我想要使用 B 的 .cpp 文件中添加下面的代码

```
template class __declspec(dllimport) B<int>; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-20T15:41:53.410

当你完全实例化一个模板时——你就有了一个完整的类型。它与任何其他类型没有什么不同。您需要包含文件的标头`B`和编译时链接，`lib`或者动态加载 dll 以链接到定义。

您是否阅读过这篇文章： http: [//support.microsoft.com/kb/168958](http://support.microsoft.com/kb/168958)？

这是我测试的内容的简要摘要（并且有效）：

* * *

**创建一个虚拟 DLL 项目**

*   使用 Win32 控制台应用程序向导生成 dll 头文件/源文件，称为：`template_export_test`
*   添加了以下内容：

文件：`template_export_test.h`

* * *

```
#ifndef EXP_STL
#define EXP_STL
#endif 

#ifdef EXP_STL
#    define DECLSPECIFIER __declspec(dllexport)
#    define EXPIMP_TEMPLATE
#else
#    define DECLSPECIFIER __declspec(dllimport)
#    define EXPIMP_TEMPLATE extern
#endif

EXPIMP_TEMPLATE template class DECLSPECIFIER CdllTest<int>; 
```

* * *

文件：`template_export_test.cpp`

* * *

```
template<class T>
CdllTest<T>::CdllTest(T t)
: _t(t)
{
    std::cout << _t << ": init\n";
} 
```

* * *

**创建测试应用程序**

*   使用向导创建一个 Win32 控制台应用程序，名为：`driver`
*   编辑此项目的链接器项目设置：
    *   添加到链接器 > 常规 > 附加库目录：路径`template_export_test.lib`
    *   添加到链接器 > 输入 > 附加依赖项：`template_export_test.lib`
*   `template_export_test.h`在主 cpp 文件中包含

* * *

```
#include "c:\Documents and Settings\...\template_export_test.h"
using namespace std;

int main(int argc, char** argv) {
    CdllTest<int> c(12);
} 
```

* * *

*   编译并开始！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-10-16T13:49:13.953

看起来，即使模板的显式实例化，也可能出现导致运行时错误的问题。看看[这篇关于 C4251 的有趣文章](http://www.unknownroad.com/rtfm/VisualStudio/warningC4251.html)（尤其是“结论”）。

# java - 添加 JMS 信息会破坏 EhCache

> ID：666630
> 
> 赞同：5
> 
> 时间：2009-03-20T15:28:12.273
> 
> 标签：java, spring, ehcache

我想通过 JMS 主题分发我的 EhCache。这记录[在 EhCache 的网站上](http://ehcache.sourceforge.net/documentation/distributed_caching_with_jms.html)

我正在使用：

*   ehcache-1.6.0-beta3
*   ehcache-jmsreplication-0.3
*   弹簧-2.5
*   弹簧模块-0.9

我的 Spring 配置如下所示：

> ```
> <bean id="cacheManager"
>       class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean">
> </bean>  
> <bean id="cacheProvider"
>       class="org.springmodules.cache.provider.ehcache.EhCacheFacade">
>   <property name="cacheManager" ref="cacheManager" />
> </bean>    
> <ehcache:proxy id="pocDaoCache" refId="pocDao">
>     <ehcache:caching methodName="fetch" cacheName="pocCache" />
> </ehcache:proxy> 
> ```

而且，在 JMS 之前的配置中，我的 ehcache.xml 如下所示：

> ```
>  <diskStore path="c:/projects/cache/demo" />
> 
>   <defaultCache maxElementsInMemory="50" eternal="false"
>   timeToIdleSeconds="120" timeToLiveSeconds="120" overflowToDisk="true" />
> 
>  <cache name="pocCache"
>         maxElementsInMemory="10000"
>         maxElementsOnDisk="1000"
>         eternal="false"
>         overflowToDisk="true"
>         diskSpoolBufferSizeMB="20"
>         timeToIdleSeconds="300"
>         timeToLiveSeconds="600"
>         memoryStoreEvictionPolicy="LFU"
>         / > 
> ```

这很好用。所以我添加了我的主题信息：

> ```
>  <cacheManagerPeerProviderFactory
>              class="net.sf.ehcache.distribution.jms.JMSCacheManagerPeerProviderFactory"
>              properties="initialContextFactoryName=JmsInitialContextFactory,
>       userName=myuser,password=mypass,
>                  providerURL=tcp://jmsdev1-jndi,tcp://jmsdev2-jndi
>                  topicConnectionFactoryBindingName=TCF-00,
>                  topicBindingName=MyTopiceName"
>              propertySeparator=","
>              /> 
> ```

当我得到一个应用程序上下文时，我得到一个 NullPointer。这是堆栈跟踪：

> ```
>  org.springframework.beans.factory.BeanCreationException:  
> org.springframework.beans.factory.BeanCreationException: Error creating bean 
> with name 'cacheManager' defined in class path resource [cache-context.xml]: 
> Invocation of init method failed; nested exception is java.lang.NullPointerException
>          at org.springframework.beans.factory.support.AbstractAutowireCapableBean
>  Factory.initializeBean(AbstractAutowireCapableBeanFactory.java:1336)
>          at org.springframework.beans.factory.support.AbstractAutowireCapableBean
>  Factory.doCreateBean(AbstractAutowireCapableBeanFactory.java:471)
>          at org.springframework.beans.factory.support.AbstractAutowireCapableBean
>  Factory$1.run(AbstractAutowireCapableBeanFactory.java:409)
>          at java.security.AccessController.doPrivileged(Native Method)
>          at org.springframework.beans.factory.support.AbstractAutowireCapableBean
>  Factory.createBean(AbstractAutowireCapableBeanFactory.java:380)
>          at org.springframework.beans.factory.support.AbstractBeanFactory$1.getOb
>  ject(AbstractBeanFactory.java:264)
>          at org.springframework.beans.factory.support.DefaultSingletonBeanRegistr
>  y.getSingleton(DefaultSingletonBeanRegistry.java:217)
>   [snip] 
> ```

任何人的任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-24T20:48:32.143

真正的问题是 Ehcache 的文档与它的实际实现方式不正确——甚至不接近。通过记录和查看 jmsreplication 模块中的代码，我能够让它工作。

```
 <cacheManagerPeerProviderFactory
        class="net.sf.ehcache.distribution.jms.JMSCacheManagerPeerProviderFactory"
        properties="initialContextFactoryName=com.InitialContextFactory;

    userName=uname;password=passwd;
            replicationTopicConnectionFactoryBindingName=TCF;
            replicationTopicBindingName=CACHE;
    providerURL=tcp://server1:7222,tcp://server2:7222;
    getQueueConnectionFactoryBindingName=QCF;
    getQueueBindingName=CACHE_LOAD
    "
    propertySeparator=";"
    /> 
```

让我感到困惑的另一件事很简单，一旦我意识到这一点——您必须实现自己的密钥生成器，以确保 Ehcache 在每个 JVM 上使用相同的密钥保存对象。当您考虑时，这完全有道理。

是的，您必须将加载器队列信息放入 cacheManagerPeerProviderFactory。这是因为，如果您在一个进程运行后启动一个进程，新进程可以从现有进程中预加载缓存。

您使用完全相同的设置配置加载器请求者 (cacheLoaderFactory)：

```
 <cacheLoaderFactory
        class="net.sf.ehcache.distribution.jms.JMSCacheLoaderFactory"
   properties="initialContextFactoryName=com.InitialContextFactory;

    userName=uname;password=passwd;
            replicationTopicConnectionFactoryBindingName=TCF;
            replicationTopicBindingName=CACHE;
    providerURL=tcp://server1:7222,tcp://server2:7222;
    getQueueConnectionFactoryBindingName=QCF;
    getQueueBindingName=CACHE_LOAD
    "
    propertySeparator=";"
    /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-08-07T15:39:54.290

关于密钥生成问题，它实际上是一个已知问题 - [MOD-255](http://jira.springframework.org/browse/MOD-255)。我们将很快将其修补到[Spring Modules Fork](http://github.com/astubbs/spring-modules/)中。

# wpf - 带有 DataTemplate 的 WPF WrapPanel/StackPanel？

> ID：666637
> 
> 赞同：7
> 
> 时间：2009-03-20T15:30:05.733
> 
> 标签：wpf, datatemplate

我必须怎么做才能在 WrapPanel 或 StackPanel 中使用 DataTemplate？

在 ListBox 上它很容易，但我找不到在面板上做它的方法......

编辑：我想要的是一个列表框，它可以像 WrapPanel 一样放置项目。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-03-20T15:35:02.570

如果我理解正确，您可以使用容器的 ItemsPanel 属性。我使用了类似的东西来使用水平 StackPanel 制作我的 ItemsControl 布局：

```
<ItemsControl.ItemsPanel>
    <ItemsPanelTemplate>
        <StackPanel Orientation="Horizontal" />
    </ItemsPanelTemplate>
</ItemsControl.ItemsPanel> 
```

因此，更具体地说，对于您的情况：

```
<ListBox.ItemsPanel>
    <ItemsPanelTemplate>
        <WrapPanel />
    </ItemsPanelTemplate>
</ListBox.ItemsPanel> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-03-20T15:34:00.683

这些面板没有 DataTemplate 属性..

但是，您可以为这些面板使用 ControlTemplate，并在这些面板的 Template 属性中设置它们...

高温高压

# visual-studio - 我是否应该安装 ReSharper 4.5 beta，并且一般使用 Beta VS 插件

> ID：666639
> 
> 赞同：1
> 
> 时间：2009-03-20T15:30:19.163
> 
> 标签：visual-studio, plugins, resharper

我正在运行 ReSharper 4.1，想知道是否有人在使用 4.5 beta？它有多稳定等等。

还有人们对在工作系统上使用 beta VS 插件的感觉如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-20T15:55:38.590

两天前我切换到了 4.5 测试版，至少对我来说，他们声称更少的内存使用是有效的。实际上，我不得不请求一台新计算机，因为事情进展缓慢，而且看起来是 ReSharper 造成的。2GB RAM 已完全使用并不断换出到页面文件。

当然，我们的解决方案里面有 92 个项目，所以这不完全是他们的错，但关键是，beta 对我来说似乎很稳定，但是 YMMV。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T15:34:47.157

几天前我安装了它，我已经让 Visual Studio 冻结并在我身上崩溃了 3 次，每次唯一会出现的是来自 ReSharper 的消息“解析源文件”。我不确定问题是解决方案还是插件，但除此之外它非常稳定，并且比 4.1 快得多。

实际上，我更喜欢在我的开发系统上使用测试版，因为与我的家用计算机不同，我实际上会注意保护我的工作并对其进行备份。运行 beta 插件并没有太大的危害，但我无法立即撤消。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-23T05:53:49.290

我切换到测试版，它的性能比以前更好。你应该试试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-06T23:40:40.230

我们在这里一直使用 ReSharper 4.5 测试版，没有任何问题。加载时间与 4.5 有明显差异，要快得多。我强烈建议更新。

# c - 如何在返回 C 之前调用函数？

> ID：666640
> 
> 赞同：1
> 
> 时间：2009-03-20T15:30:19.353
> 
> 标签：c, gcc

我试图在函数返回给调用者之前在函数末尾执行一些东西。为此，我想在特定上下文中覆盖 return。行为应该与 __cyg_profile_func_exit 相同，但我只想为某些功能激活它。

我不知道是否可以使用 gcc 内置函数或这种东西。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-20T16:04:10.970

GCC 有一个属性，当自动变量超出范围时调用一个函数，并将该变量的地址传递给它

```
void cleanup_fn(int *p) {
    puts("cleanup called...");
}

void f(void) {
    int p __attribute__((cleanup(cleanup_fn)));
    puts("in f...");
}

int main(void) {
    puts("calling f...");
    f();
    puts("out of it...");
    return 0;
} 
```

输出：

```
calling f...
in f...
cleanup called...
out of it... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-20T15:49:00.977

不，不是 C 本身。

您*可以*做的是编写一个`#define`宏 RETURN：

```
#define RETURN(func) if(_DEBUG_) func; return ;
#define RETURNV(func, val) if(_DEBUG_) func; return val ; 
```

（警告，你可能比我想更多地考虑保护特殊情况。）

否则，您将需要编写一些在幕后破坏代码的东西，这就是分析器所做的。

# iphone - 谁能提供适用于 iPhone 的 AudioFileStreamSeek 的工作示例？

> ID：666641
> 
> 赞同：1
> 
> 时间：2009-03-20T15:30:35.623
> 
> 标签：iphone, cocoa, audio, streaming

我发现 Apple 在 AudioFileStreamSeek 上的文档非常有限，而且我在任何地方都找不到任何实际使用的示例。我有一个工作流音频播放器，但我似乎无法让 AudioFileStreamSeek 像宣传的那样工作......

任何帮助提示或一个小例子将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-08-05T02:58:41.647

我被告知这有效：

```
AudioQueueStop(audioQueue, true);
UInt32 flags = 0;
err = AudioFileStreamParseBytes(audioFileStream, length, bytes,
                                kAudioFileStreamParseFlag_Discontinuity);

OSStatus status = AudioFileStreamSeek(audioFileStream, framePacket.mPacket, 
                                      &currentOffset, &flags);
NSLog(@"Setting next byte offset to: %qi, flags: %d", (long long)currentOffset, flags);

// then read data from the new offset set by AudioFileStreamSeek
[fileHandle seekToFileOffset:currentOffset];
NSData* data = "" readDataOfLength:4096];

flags = kAudioFileStreamParseFlag_Discontinuity;
status = AudioFileStreamParseBytes( stream, [data length], [data bytes], flags);
if (status != noErr)
{
    NSLog(@"Error parsing bytes: %d", status);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-20T16:51:02.933

~~除非我弄错了，否则这仅在 3.0 SDK 中可用，因此在 NDA 下可用。也许你应该把它带到[Apple Beta 论坛](https://devforums.apple.com/)？~~

我站得更正了。如果您在在线 2.2.1 文档中进行搜索，AudioFileStreamSeek 不会出现。您必须手动挖掘文档才能找到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-01-13T10:19:43.030

Matt Gallagher`AudioFileStreamSeek`在他的示例[“流式传输和播放 MP3 流”](http://cocoawithlove.com/2008/09/streaming-and-playing-live-mp3-stream.html)中使用。

看看马特的代码`AudioStreamer.m`：

```
SInt64 seekPacket = floor(newSeekTime / packetDuration);
err = AudioFileStreamSeek(audioFileStream, seekPacket, &packetAlignedByteOffset, &ioFlags); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-03-29T17:18:18.343

不要忘记将数据偏移量 (kAudioFileStreamProperty_DataOffset) 添加到 AudioFileStreamSeek 返回的字节偏移量。返回值是音频数据的偏移量，忽略数据偏移量。

在搜索之前/之后停止然后重新启动 AudioQueue 也是一个好主意。

# xml - 我应该为 XML 模式使用什么命名空间？

> ID：666643
> 
> 赞同：2
> 
> 时间：2009-03-20T15:31:08.693
> 
> 标签：xml, xsd, tags, uri

我正在开发一个自定义 XML 模式，用于在应用程序组件之间传递数据。SO 人员认为为命名空间选择 URI的良好（或理想情况下，*最佳）实践是什么？*为什么？

一些基本的考虑：

我们的产品有很多组件，如果命名空间指示哪个组件将使用它，这可能是一个好主意。除此之外，还有特定类型的数据。我应该去多大的资格？

我们的业务部门已经改变了几次所有权，并且很可能会再次这样做。当发生这种情况时，将公司名称保留在 URI 中有点奇怪，但这并不是不可能的。离开这是一个好主意吗？

HTTP url 很好，但是我们从来没有一个 web 服务器来获取这些模式，所以离婚是很有意义的。尽管如此，这似乎是一个约定。值得关注吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-20T16:01:12.257

是的，这主要是口味问题。有些要求不容易兼容（例如可解析性和长期稳定性），因此请尝试找出对您最重要的要求。尽管如此，还是有几点意见：

1.  我发现将名称空间 URI 解析为实际网页（用于文档等）会更好，因此值得使用“好”（稳定、美观）的域名。

2.  如果您想要长期稳定性，在存在名称更改等情况下，不需要另一个注册表的最轻量级解决方案是标签 URI，在[RFC 4151](http://www.ietf.org/rfc/rfc4151.txt)中标准化。请记住，它们是不可解决的。

# c# - 你会不会捕获异常，或者抛出一个不会被捕获的异常？

> ID：666645
> 
> 赞同：3
> 
> 时间：2009-03-20T15:31:20.020
> 
> 标签：c#, exception, exception-handling, try-catch, unhandled-exception

我已经处理了我会抛出/重新抛出异常的情况，因为我知道围绕它的代码会捕获特定的异常。但是有没有任何时候你想抛出一个异常，知道它不会被捕获？

或者至少，不捕获异常？

除非处理正确，否则异常会立即停止应用程序？所以我想我是在问你是否想故意让你的应用程序死掉？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-03-20T15:42:09.120

如果您的应用程序主要由其他客户端使用并且不是独立的，那么如果出现您不知道如何（或不想）处理的情况，抛出异常通常是有意义的，并且没有明智的让你从中恢复的方法。客户应该能够决定他们希望如何处理您可能抛出的任何异常。

另一方面，如果您的应用程序*是*端点，则抛出异常本质上会成为一种通知机制，以提醒人们发生了严重错误。在这种情况下，您需要考虑以下几点：

*   **应用程序的持续运行有多重要？这个错误真的无法恢复吗？**抛出异常并终止你的程序并不是你想在航天飞机上做的事情。

*   **您是否使用异常作为真实日志记录的代理？**几乎没有理由这样做。考虑一个真正的日志记录机制。捕获异常并让记录器弄清楚发生了什么。

*   **你想通过自己抛出异常来传达什么？**问问自己抛出一个新异常的价值是什么，并仔细考虑是否没有更好的方法来做你想做的事。

*   **不捕获异常可能会使资源处于不良状态。**如果你不优雅地退出，事情通常不会为你清理干净。如果你需要这样做，请确保你明白你在做什么——如果你不想抓住它，至少考虑一个`try-finally`块，这样你就可以做一些整理。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-03-20T16:15:01.087

不久前我遇到了一个非常好的规则：

**当一个方法不能按照它的名字做的事情时抛出一个异常。**

这个想法是异常表明出现了问题。当你实现一个方法时，知道它是否会被正确使用不是你的责任。使用您的方法的代码是否捕获异常不是您的责任，而是使用您的方法的人的责任。

另一个要遵循的规则是：

**除非你知道你想用它做什么，否则不要捕获异常。**

显然，你应该在 try...finally 块中包含清理代码，但你不应该仅仅为了捕捉它而捕捉异常。而且你永远不应该默默地吞下异常。虽然有时您可能想要捕获所有异常（例如，通过在 C# 中执行 catch (Exception ex)），但这些异常并不常见，并且通常具有非常具体的技术原因。例如，当您在 .NET 2.0 或更高版本中使用线程时，如果异常从您的线程中逃脱，它将导致整个应用程序域卸载。但是，在这些情况下，您至少应该将异常详细信息记录为错误并在注释中提供解释。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-20T15:55:48.247

当然。例如，如果您尝试将一些字节加载到 Java 中的字符串中：

```
try {
  String myString = new String(byteArray, "UTF-8");
} catch (UnsupportedEncodingException e) {
  // Platform doesn't support UTF-8?  What is this, 1991?
  throw new RuntimeExceptione(e);
} 
```

在这种情况下，没有优雅的降级，平台根本无法支持所需的操作。你可以在初始化时检查这个条件，但是 String 的构造函数仍然抛出这个异常，你必须处理它。要么，要么使用 Charset.forName() :)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-03-20T16:09:07.370

通常，当然在您的应用程序的早期迭代中，**不要**捕获异常。通常情况下，从异常中恢复需要某种业务规则，而且通常情况下，这些业务规则不是为您定义的。如果您“处理”异常而不是让应用程序死掉，那么您很可能会为您的客户发明业务规则。不好。

仅仅为了捕捉它而捕捉每个异常的一般模式让我感到头疼，我数不清。通常有人会在整个应用程序中放置某种通用异常处理代码，这不可避免地会隐藏错误或创建一些不需要的行为。（顺便说一句，抓住然后不重新抛出更糟糕。）

因此，我建议您改为问：**“我应该什么时候捕获异常？”**

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-20T16:26:26.613

事情是这样的……它是关于“层”、“封装”或“低耦合”的。在代码库的某个地方，您正在编写一种方法来做某事。说它是一种公共方法。因此，它不应该对调用者进行太多或任何假设......相反，它应该只做它应该做的工作，而不管是谁在调用它以及调用者在什么上下文中。

如果由于某种原因，它不能完成它的工作，那么它需要告诉调用者“对不起，我不能这样做，这就是原因”。异常是一种很好的机制，可以让它告诉调用者（不是唯一的机制，而是我在大多数情况下见过的最好的机制）。

所以，当你抛出异常时，你不知道它是否会被捕获......因为你公开了一个公共方法，你不知道谁可能会选择调用它以及为什么。

捕获异常是“上下文”的工作。例如，假设您正在编写一个包含可能引发异常的公共方法的库。然后，假设您正在使用 Windows 窗体应用程序中的该库。Windows 窗体应用程序可能会捕获异常并向用户显示消息框。

但稍后，您可能会使用来自 Windows 服务的相同库。服务更有可能捕获异常，记录它，向原始调用者返回错误，但继续运行以便它可以处理进一步的请求。

所以例外就像调用者和提供者之间的合同协议。提供者说：“我要么做这项工作，要么告诉你为什么我不能。你从那里做什么是你自己的事。” 来电者说：“好吧，如果你不能完成这项工作，请告诉我原因，我会决定在这种情况下该怎么做。”

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-20T15:37:00.490

> 但是有没有任何时候你想抛出一个异常，知道它不会被捕获？

我想说的是，如果您手动抛出异常，大多数时候您不知道它是否会被捕获。如果您知道它会被捕获，您可以自己处理它，而不是首先抛出异常。

公平地说，我认为这部分取决于您正在执行的编程类型，有时同一个程序员最终会同时构建库和使用该库的代码。

> 你永远不会捕捉到异常吗？

如果您没想到/不知道可能会引发异常。但抛开这一点并假设您知道异常，有时您在一层就知道它，但知道下一层是处理它的更合适的地方。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-20T15:39:34.180

这取决于应用程序的类型。即使异常已经冒泡到执行上下文，Web 应用程序也可以继续运行。

如果您在无法处理的级别捕获异常，则“抛出/重新抛出”异常是常见的做法。但是，您几乎总是会为问题添加上下文，至少在更高级别添加一些日志记录以说明它已被捕获并重新抛出。

例如

A调用B调用C（抛出异常）

B 接球/再掷

一个抓住。

在这种情况下，您可能希望 B 添加一些日志记录，以便您可以区分 B 生成和引发错误，以及 C 生成和引发错误。这将使您有更大的能力在以后调试和修复问题。

一般来说，你几乎永远不会想要一个异常来杀死你的程序。最佳实践是捕获异常并优雅地退出。这使您可以保存任何当前打开的信息并释放正在使用的资源，以免它们被损坏。如果您打算退出，您可以创建自己的“核心转储”信息报告，其中包括您在捕获致命异常时所做的事情。

如果您让异常杀死您的进程，您将失去获得自定义崩溃信息的机会，并且您还将跳过向用户提供友好错误消息然后退出的部分。

因此，我建议始终捕获异常，并且永远不要自愿让它们在您的程序中运行异常。

**编辑**

如果你正在编写一个库，你必须提前选择你的函数是抛出异常还是异常安全。在这些情况下，有时您会抛出异常并且不知道调用方是否会捕获它。但在这种情况下，捕捉它不是你的责任，只要 api 声明该函数可以抛出异常。（我正在寻找一个意思是“可能抛出异常”的词......有人知道它是什么吗？它会让我整天烦恼。）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-03-20T15:57:34.153

首先，在某些情况下最好不要捕获异常。

有时，异常有时会告诉您您的程序处于未知状态。考虑到异常类型，有许多异常本质上是正确的。A`NullReferenceException`基本上告诉你“有一个错误”。通过捕获这样的异常，您可能会隐藏错误，这在短期内听起来不错，但从长远来看，您会更乐意修复它。该产品可能不会崩溃，但它肯定不会有预期的行为。

但对于我们为自己发明的异常类型也是如此。有时，抛出异常 A 的事实应该是“不可能的”——但它已经发生了，所以有一个错误。

此外，当您捕获异常时会发生一些非常重要的事情：`finally`try 块内的整个调用堆栈的块（以及它调用的任何东西）都将被执行。那些 finally 块有什么作用？嗯，什么都行。如果程序处于未知状态，我真的是*什么*意思。他们可以从磁盘中删除有价值的客户数据。他们可以抛出更多异常。它们可能会破坏内存中的数据，使错误无法诊断。

因此，当异常指示未知状态时，您不想再运行任何代码，所以无论您做什么，*都不要捕获异常*。让它飞过去，您的程序将无害地终止，Windows 错误报告将能够捕获程序的状态，就像最初检测到问题时一样。如果你捕捉到异常，你将导致更多的代码执行，这将进一步搞砸程序的状态。

其次，您是否应该在知道不会被捕获的情况下抛出异常？我认为这个问题误解了可重用方法的性质。方法的整体思想是它遵循一个“契约”：它接受某些参数并返回某个值，此外它还在某些条件下抛出某些异常。这就是合同——这取决于调用者如何处理它。对于某些调用者，异常 A 可能表示可恢复的情况。对于其他调用者，它可能表明存在错误。而且从我上面所说的，应该清楚的是，如果一个异常表明一个错误，*它一定不能被捕获*。

如果您想知道这对[Microsoft 企业库的异常处理块](http://msdn.microsoft.com/en-us/library/dd203116.aspx)意味着什么：是的，它非常糟糕。他们告诉您`catch (Exception x)`，然后根据您的政策决定是否重新投掷；太晚了 -`finally`块已经执行到那个时候。不要那样做。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-20T15:41:33.273

您可能不希望在最终用户可以看到的任何地方出现未捕获的异常，但让您的 API 的客户端（其他程序员）决定如何处理异常通常是可以接受的。

例如，假设您正在设计一个 Java 类库。您公开了一个接受字符串的公共方法。在您的应用程序中，空输入值会导致错误。与其自己处理错误，不如检查空值，然后抛出 IllegalArgumentException。

当然，您必须记录您的方法在这种情况下会引发此异常。这种行为成为你的方法契约的一部分。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-03-20T15:43:51.207

这取决于您所说的“被抓住”是什么意思。某处某处最终捕获了异常，无论是底层操作系统还是其他东西。

我们有一个工作流系统，可以执行由单个作业组成的作业计划。每个作业运行一个代码单元。对于某些异常，我们不想在代码中处理它们，而是将其抛出堆栈，以便外部工作流系统捕获它（这完全发生在抛出者进程之外）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-03-20T15:48:44.050

如果您正在编写整个应用程序，那么您的理由是您自己的。我可以想到一些您*可能*想要抛出异常并让应用程序死掉的情况，但其中大多数都不是很好的理由。

最好的原因通常是在调试时。我经常在调试时禁用异常，以让我更好地知道哪里出了问题。如果您在带有调试器的机器上运行它，您也可以在调试器中打开抛出的异常中断。

另一个可能的原因是在抛出异常后继续没有意义或可能导致不可恢复的数据损坏或更糟（想想带有激光束的机器人，但你应该确定你的应用程序处理这些情况 IMO，崩溃程序只是懒惰的方式）。

如果您正在编写自己不会使用的 API 代码或框架代码，那么您不知道是否有人会捕获您的异常。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-03-20T15:57:03.767

是的，这是我唯一的机会来打击使用服务/对象的开发人员，告诉他们“你做错了！！！！”。

那并摆脱您不想允许或看似“不可能”的可能性。捕获所有异常并继续运行的应用程序只是一个被混乱包围的围墙花园。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-03-20T17:31:09.903

如果我需要一个中等大小的系统，它以某种我认为一致的方式处理数据。

**和**

在某个地方，我检测到应用程序的状态变得不一致。

**和**

系统（尚）不知道如何修复不一致并优雅地恢复

然后，是的，我会抛出一个尽可能详细的异常并导致应用程序尽快终止，以避免对数据造成任何进一步的损害。如果它可以恢复，重要的是不要因为试图掩盖混乱而加剧问题。

稍后，一旦更好地理解了导致不一致的事件链，更高的设施可以捕获该异常，修复状态，并以最小的中断继续。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2011-01-02T23:35:00.680

如果出现应用程序代码不应该出现的情况，库通常会基于防御性编程检查抛出异常。应用程序代码通常会编写成大多数无效条件永远不会出现，因此永远不会抛出异常，因此捕获它们是没有意义的。

取决于语言（我主要考虑 C++ 而不是 C#，并不清楚它们的区别是什么）实际抛出的未捕获异常的效果可能与异常前几天所做的相同被发明了。例如，在 C 库中防御性编程的一个常见策略是立即终止程序并显示错误消息。

不同之处在于，如果异常抛出确实是可能的（希望这将通过单元测试发现），通常相对容易添加一个异常处理程序，该处理程序可以以更具建设性的方式从问题中恢复。您不必重写库，或在应用程序代码中添加复杂的检查，以确保在抛出异常调用之前不会出现条件。

我有很多从未被捕获的异常抛出。它们都是出于防御目的，虽然不被捕获对于确实发生的异常是不好的，但这只会在开发和测试期间发生，因为到目前为止我未能在应用程序代码中考虑错误情况。并且当它发生时，修复的尴尬是不寻常的——不需要大规模重构，不需要通过错误条件检查使应用程序代码变得非常复杂，只需一个具有相对简单恢复的 catch 子句或“对不起，戴夫，我恐怕做不到。” 没有失败整个应用程序。

# algorithm - 查询数是否为2的幂

> ID：666647
> 
> 赞同：2
> 
> 时间：2009-03-20T15:31:43.030
> 
> 标签：algorithm

使用经典代码片段：

如果 (x & (x-1)) == 0

如果答案是 1，那么它是错误的，而不是 2 的幂。但是，对 5（不是 2 的幂）和 4 进行处理会导致：

0001 1111 0001 1111 0000 1111

那是4个1s。

在 8 和 7 上工作：

1111 1111 0111 1111

0111 1111

0 是第一个，但我们有 4。

在这两种情况下的链接（[http://www.exploringbinary.com/ten-ways-to-check-if-an-integer-is-a-power-of-two-in-c/](http://www.exploringbinary.com/ten-ways-to-check-if-an-integer-is-a-power-of-two-in-c/)）中，答案开始了有 0 并且有可变数量的 0s/1s。这如何回答数字是否是 2 的幂？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-20T15:34:31.167

您需要重新了解二进制文件的工作原理。5 不表示为 0001 1111（5 位），它表示为 0000 0101（2^2 + 2^0），4 同样不是 0000 1111（4 位），而是 0000 0100（2^2）。你写的数字实际上是*一元*的。

[像往常一样，维基百科有一个非常全面的概述。](http://en.wikipedia.org/wiki/Binary_numeral_system)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-20T15:41:42.320

任何两个数的幂都可以用一个 1 和多个 0 表示为二进制。

```
eg. 
10000(16) 
1000(8) 
100(4) 
```

如果你从任何两个数的幂中减去 1，你将得到所有 1 到原始数字的右侧。

```
10000(16) - 1 = 01111(15) 
```

将这两个数字与运算每次都会给你 0。

在两个数字的非幂的情况下，减一将在数字中的某处保留至少一个“1”不变，例如：

```
10010(18) - 1 = 10001(17) 
```

与这两个将导致

```
10000(16) != 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-20T15:44:23.123

请记住，如果 x 是 2 的幂，则*恰好设置了 1 位*。减去 1，您会知道两件事：结果值不是 2 的幂，并且已设置的位不再设置。因此，当您执行*按位*and`&`时，设置的每个位`x`都不会取消设置，并且设置的所有位`(x-1)`都必须与未设置的位匹配`x`。所以每一位的和总是0。

换句话说，对于任何位模式，您都可以保证它`(x&(x-1))`为零。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T08:41:04.650

((n & (n-1)) == 0)

它检查“n”的值是否是 2 的幂。

例子：

```
 if n = 8, the bit representation is 1000
 n & (n-1) = (1000) & ( 0111) = (0000)
 So it return zero only if its value is in power of 2.
 The only exception to this is ‘0’.
 0 & (0-1) = 0 but ‘0’ is not the power of two. 
```

为什么这有意义？

想象一下当你从一串位中减去 1 时会发生什么。您从左到右阅读，将每个 0 变为 1，直到您击中 1，此时该位被翻转：

1000100100 ->（减 1）-> 1000100011

因此，从第一个 1 开始的每一位都被翻转。如果数字中恰好有一个 1，那么每一位（除了前导零）都将被翻转。因此，如果恰好有一个 1，则 n & (n-1) == 0。如果恰好有一个 1，那么它一定是 2 的幂。

# mysql - 使用 MySQL 函数找出表中的最大记录

> ID：666651
> 
> 赞同：0
> 
> 时间：2009-03-20T15:32:14.807
> 
> 标签：mysql

我正在使用 MySQL 函数来找出下表中的最大记录。

### SQL 数据：

```
id_  index  Value1  Value2  Value 3  Max_idVal
1    'abc'    5       10     5        5
1    'abc'    0       12     4        5
1    'abc'    0       13     3        5
2    'abc'    4       9      10       8
2    'abc'    8       10     8        8 
```

`Max_idVal`是 MySQL 函数返回的结果。这个想法是遍历每一行并将最大值放入该`Max_idVal`行的字段中。

这里对于`ID_`1，`Value1`是 '5' 处的最大值。这被分配给`Max_idVal'. This works the same way for`ID_` 2 和其余的行。

### SQL函数：

```
 DELIMITER $$
    CREATE FUNCTION `fn_get_max` (
        _id INT,
        _index VARCHAR( 30 )
    ) RETURNS INT( 11 ) READS SQL DATA BEGIN DECLARE r INT;

   SELECT Max(value1 )
      INTO r
       FROM Table_name
       WHERE id = _id
       AND index = _index;

   RETURN r;

   END $$ 
```

### SQL查询：

```
 UPDATE table_name SET max_idval = fn_get_max('1','abc') WHERE id = '1' 
```

我的问题是`NULL`即使 ID 与记录匹配，它也会返回行。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-20T16:58:27.737

我可以看到几个问题：

首先，单词 index 是保留的，所以在你的函数中你应该使用`index`.

其次，在提供的更新语句中，您的 WHERE 子句应该是`id_ = 1`，而不是`id = 1`。我使用以下代码重新创建了您的表和函数：

```
 DELIMITER $$
    DROP FUNCTION IF EXISTS `test`.`fn_get_max`$$

    CREATE DEFINER=`root`@`localhost` FUNCTION `fn_get_max2`(  _id INT,
    _index VARCHAR( 30 )) RETURNS INT(11)
    BEGIN
       DECLARE r INT;

       SELECT MAX(value1 ) 
       INTO r
       FROM test_table
       WHERE id_ = _id
       AND `INDEX` = _index;
       RETURN r;

    END$$

    DELIMITER ; 
```

然后使用以下更新语句正确更新 max_idval。

```
UPDATE test_table SET max_idval = fn_get_max2('1','abc') WHERE id_ = '1' 
```

如果这只是一次性更新，您可以使用临时表更有效地执行此操作（因为 MySQL 不允许表在更新查询中加入自身）：

```
CREATE TEMPORARY TABLE tmp (id_ INT, maxvalue1 INT);

INSERT INTO tmp (id_, maxvalue1)
SELECT id_, MAX(Value1) AS max_value1
FROM test_table
GROUP BY id_;

UPDATE test_table, tmp  SET test_table.Max_idVal = tmp.maxvalue1
WHERE test_table.id_ = tmp.id_ 
```

那应该正确更新所有行。

# perl - 即使我使用的是 Archive::Tar:Streamed，为什么 %MEM 会逐渐增加？

> ID：666655
> 
> 赞同：3
> 
> 时间：2009-03-20T15:33:03.713
> 
> 标签：perl, tar

我正在使用 Archive::Tar::Streamed 归档一个 4GB 的目录，其中包含非常小的源代码文件和一些 jar。我正在使用具有 4GB RAM 并使用 Archive::Tar::Streamed 的系统，因为我不希望我的整个目录都在内存上，因为它会导致内存不足。我使用 File::Find 以 DFS 方式从目录中一一读取文件，并使用 Archive::Tar::Streamed 中的 add 方法将其写入 tar 文件。在任何给定的时间点，只有一个文件驻留在内存中，即使这样，我的 perl 进程的 %MEM 也在逐渐增加。它达到了20％。我的目录中没有 800MB 的文件。我在这里有两个问题 1) 为什么 %MEM 会逐渐增加？2) 为什么它上升到 20%。是因为 Archive::Tar 在将内容写入 tar 文件后没有释放内存吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-20T18:43:45.800

当您以面向流的方式处理数据时，VSZ 内存信封增长是不正常的，对于通常应该在您的应用程序中稳定的 RES (%MEM) 来说更是如此。

因此，我强烈怀疑对数据的交叉引用被保留（例如在散列中），或者（不太可能）生成了循环引用。

请参阅这篇文章，[“是否有任何工具可以在我的 perl 程序中查找内存泄漏”](https://stackoverflow.com/questions/295385/are-there-any-tools-for-finding-memory-leaks-in-my-perl-program#295461)，以获取有关追踪哪些变量（无论是在您的代码中还是在您正在使用的模块中）增加内存包络或保持交叉引用的提示。

# vb.net - 如何在 VB.NET 中将日期转换为 yyww，反之亦然？

> ID：666657
> 
> 赞同：0
> 
> 时间：2009-03-20T15:33:07.083
> 
> 标签：vb.net

有谁知道如何在 VB.NET 中将任何日期先转换为星期六，然后再转换为 yyww（周年）？反之亦然，即 yyww 进入星期六？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-20T18:56:00.060

假设你的星期从星期日开始，你可能会做这样的事情来获得本周的星期六：

```
Dim daysToAdd As Integer = DayOfWeek.Saturday - yourDate.DayOfWeek
Dim dateSaturday as Date = yourDate.AddDays(daysToAdd) 
```

虽然我没有测试它。然后，您可以通过执行以下操作来获得 weekyear：

```
Dim weekYear As Integer = CInt(Math.Ceiling(dateSaturday.DayOfYear / 7)) 
```

使用相反的逻辑，您可以找到对应于 weekyear 的星期六。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-21T12:38:21.287

```
 Dim d As DateTime = #1/20/2009#
    d = d.AddDays(DayOfWeek.Saturday - d.DayOfWeek)
    Dim myCal As New System.Globalization.GregorianCalendar
    Dim wkOFyr As Integer = myCal.GetWeekOfYear(d, _
                                                Globalization.CalendarWeekRule.FirstDay, _
                                                DayOfWeek.Sunday)
    Dim s As String
    s = d.ToString("yy") & wkOFyr.ToString.PadLeft(2, "0"c) 
```

# database - 如何告诉数据库只返回离散部分的数据？

> ID：666658
> 
> 赞同：2
> 
> 时间：2009-03-20T15:33:22.947
> 
> 标签：database, select, paging

我找不到有关此主题的适当讨论线程，因此我将继续在这里提问。

问题：我有一个返回大小为 100,000+ 的结果的选择查询。用户想要查看所有这些数据，但显然我不能一次将其全部提供给他。我也不想在客户端的内存中存储这么多数据。我希望用户能够“翻阅”结果，能够查看 500 条记录页面中的数据。

那么，我怎样才能要求数据库一次只发回 500 条记录呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-20T15:37:47.150

您可以使用[rownumber](http://msdn.microsoft.com/en-us/library/ms186734.aspx)和[top](http://msdn.microsoft.com/en-us/library/ms189463.aspx)的组合（至少在 SQL server 中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T15:39:05.930

这取决于您使用的数据库，但在 MySql 中，您可以尝试以下操作：

```
SELECT * FROM MyTable LIMIT <start>, 500 
```

并替换`<start>`为您想要开始的索引（例如，第一页为 0，第二页为 501）。

# computer-science - 如何减少逻辑语句？

> ID：666669
> 
> 赞同：7
> 
> 时间：2009-03-20T15:35:43.833
> 
> 标签：computer-science, logic, equivalence

我很确定我记得在我的一门大学课程中做过这样的事情，并且有某种公式，但除此之外，我的想法让我失望。

给定语句： ( a OR b OR d ) AND ( a OR c )

我很确定这可以简化为：（ a OR b OR d OR c ）

但我不记得我将如何证明这一点。

也许是一系列逻辑表？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-20T15:46:46.753

您不能将“（a OR b OR d）AND（a OR c）”减少为“（a OR b OR d OR c）”，因为前者对“c=true, a,b,d=false”不满意，而后者是。所以你也不能证明减少是正确的:)

一般来说，有很多方法可以减少布尔公式的大小，这也是您要优化什么的问题（总大小？条件评估的平均次数？）。卡诺图仅适用于少数变量。将大的布尔公式简化为更小的布尔公式是一个高级主题，它是自动逻辑电路设计等的关键。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-03-20T15:38:13.467

[卡诺图](http://en.wikipedia.org/wiki/Karnaugh_map)？逻辑表达式减少？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-20T15:39:56.583

卡诺图是你的朋友：

[http://en.wikipedia.org/wiki/Karnaugh_map](http://en.wikipedia.org/wiki/Karnaugh_map)

您将不得不从上述等式反向构建它，但它是一个很好的工具，可以告诉您是否可以进一步减少它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-20T15:39:47.770

卡诺图，关键是“绘制”所有可能的输入并指示它们的输出。然后您可以开始过滤掉对输出没有影响的输入，从而减少映射。一旦它被优化，你就可以从中产生你的逻辑。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-20T15:53:17.690

(a 或 b 或 d) 与 (a 或 c)

这意味着当 a 为真时，一切都是真的！

=> a OR { (b OR d) AND (c) }

=> a OR ( b AND C) OR ( d and C )

我认为结果（ a OR b OR d OR c ）是错误的，但是当它错误时请帮帮我。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-20T17:45:46.797

a 或 {(b OR d) AND c}

推理：如果“a”，则该陈述为真。否则，您需要 b 或 d （以满足语句的第一部分）和 c （满足 !a 的情况下的后半部分）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-20T18:17:57.640

使用[卡诺图](http://en.wikipedia.org/wiki/Karnaugh_map)：

这是 a OR b OR d：

```
\ab
光盘\ 00 01 11 10
---+-----------+
00 | | X| X| X|
01 | X| X| X| X|
11 | X| X| X| X|
10 | | X| X| X|
   +-----------+

```

这是一个 OR c：

```
\ab
光盘\ 00 01 11 10
---+-----------+
00 | | | X| X|
01 | | | X| X|
11 | X| X| X| X|
10 | X| X| X| X|
   +-----------+

```

将它们相交，我们得到：

```
\ab
光盘\ 00 01 11 10
---+-----------+
00 | | | X| X|
01 | | | X| X|
11 | X| X| X| X|
10 | | X| X| X|
   +-----------+

```

显然，这是一个 OR (something)，其中 (something) 是：

```
    00 01
11 | X| X|
10 | | X|
```

由于 (something) 不是一个矩形，它需要两个表达式，可以是 AND'ed 或 OR'ed 一起，这取决于我们想要如何处理它。在这个例子中我们将使用 OR，因为它给出了一个更简单的表达式。

在这种情况下，我们可以将两个相邻的 X 组合在一起，再加两个以填充整个 cd 行，因此 cd 可以是表达式之一。我们也可以将两者组合在一起，将两者放在右侧，形成一个正方形。这个正方形代表表达式 bc，因为 a 和 d 在正方形内都不同。

所以最终的表达式是**OR ((c AND d) OR (b AND d))**或**a + cd + bd**。好多了，不是吗？

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-07T12:58:28.667

SOP 最小形式：

```
y = a | b&c | c&d; 
```

POS 具有相同的成本（实现逻辑图的门数）：

```
y = (a|c)&(a|b|d); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-20T17:04:26.130

是的，你可以证明这一点。您不能将其简化为（ a OR b OR d OR c ）

看下面的第 3 行。您的减少将无法产生正确的答案。

只需运行它：

ABCD
0 0 0 0 = 0
0 0 0 1 = 0
0 0 1 0 = 0
。
.
.
1 0 0 0 = 1
1 0 0 1 = 1

到目前为止，我有 (A OR (???)) :(

# c# - 如何检查 RedirectToRouteResult 将创建的 URL？

> ID：666671
> 
> 赞同：8
> 
> 时间：2009-03-20T15:36:12.397
> 
> 标签：c#, .net, asp.net-mvc, routing

在我的 asp.net-mvc 项目中，我执行从发布请求到获取请求的重定向。
在我的重定向和我期望它到达的方法到达之间，我的一个参数神奇地变成了 null，我不知道为什么。
可能与我的 global.asax （路由防御）有关。

我能想出的唯一调试方法是使用[路由调试器库](http://haacked.com/archive/2008/03/13/url-routing-debugger.aspx)。但我不知道如何将它与 RedirectToRoute 一起使用。
有什么建议么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-19T11:50:55.883

聚会有点晚了，但这是谷歌第一次遇到问题，我想分享我的经验。

我想将 a 解析`RedirectToRouteResult`为一个 URL，以便以后可以重定向到它，但是这个类没有方法可以做到这一点。但是，您可以使用`UrlHelper.RouteUrl()`，例如：

```
Url.RouteUrl(redirectResult.RouteName, redirectResult.RouteValues); 
```

`Url`类的属性在哪里`Controller`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T19:26:27.287

重定向是发送到浏览器的结果，然后浏览器通过对新 URL 执行 GET 来接受重定向。因此，查看浏览器以查看 URL 是什么。当浏览器接收到重定向时，它将对新 URL 执行 GET，您可以使用 Firebug、Fiddler 或您选择的工具查看该 URL。

在新操作中，当它被调用时，您还可以检查 Request.Url。

# c++ - 强制我的 MFC 应用程序在 Vista 上以管理员身份运行

> ID：666672
> 
> 赞同：3
> 
> 时间：2009-03-20T15:36:47.027
> 
> 标签：c++, mfc, windows-vista

我有一个使用 Visual Studio 2008 构建的 MFC 应用程序，它需要在 W2K、XP、2003 和 Vista 上运行。该应用程序在注册表中写入 HKLM，并且只有在以管理员身份运行时才能在 Vista 上运行。

我的问题是：我可以强制应用程序自动以管理员身份运行吗？它是否涉及创建清单文件？目前我在 stdafx.h 中有以下内容，我猜它会动态创建一个清单文件：

```
#pragma comment(linker,"/manifestdependency:\"type='win32' name='Microsoft.Windows.Common-Controls' version='6.0.0.0' processorArchitecture='x86' publicKeyToken='6595b64144ccf1df' language='*'\"") 
```

我可以修改这条线来强制提升还是我需要对 VC 项目清单设置做一些事情？

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-23T08:15:52.163

我发现了如何使用一些高级 C++ 链接器选项来做到这一点：

1.  打开项目的属性页对话框。

2.  展开配置属性节点。

3.  展开链接器节点。

4.  选择清单文件属性页。

5.  修改启用用户帐户控制 (UAC)、UAC 执行级别和 UAC 绕过 UI 保护属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T15:47:09.623

您可以使用清单来执行此操作。可能是这样的，但我记不清了：

```
<requestedExecutionLevel level="requireAdministrator"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-20T16:42:03.393

你可以做任何一个。您可以使用#pragma 添加类似的行来添加requireAdministrator 指令，或者您可以在VS2008 的属性表中设置它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-24T11:03:38.123

1.  选择有问题的项目，进入菜单项目 > 属性。

2.  导航到配置属性 > 链接器 > 清单文件。

3.  在 UAC 执行级别条目中，选择选项

> requireAdministrator (/level='requireAdministrator')

[![在此处输入图像描述](https://i.stack.imgur.com/4mpw1.png)](https://i.stack.imgur.com/4mpw1.png)

# php - 在 PHP 5.x 中，如何在运行时检测一个类是否是抽象的？

> ID：666673
> 
> 赞同：22
> 
> 时间：2009-03-20T15:36:56.263
> 
> 标签：php, oop, reflection

我正在遍历 PHP 中的一组类名，通过 get_declared_classes() 获取。

如何检查每个类名以检测该特定类是否为抽象类？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2009-03-20T15:41:26.407

使用反射。[`ReflectionClass`](http://php.net/ReflectionClass)`->isAbstract()`

像这样使用它：

```
$class = new ReflectionClass('NameOfTheClass');
$abstract = $class->isAbstract(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-20T15:42:18.027

您可以在课堂上使用[反射。](http://us3.php.net/manual/en/language.oop5.reflection.php#language.oop5.reflection.reflectionclass)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-20T15:53:55.007

```
<?php 

abstract class Picasso
{
    public function __construct()
    {

    }
} 

$class = new ReflectionClass('Picasso');

if($class->isAbstract())
{
    echo "Im abstract";
}
else
{
    echo "Im not abstract";
}

?> 
```

请参阅手册：www.php.net/oop5.reflection

# asp.net - 如何从 html 表中检索数据？

> ID：666676
> 
> 赞同：0
> 
> 时间：2009-03-20T15:37:03.097
> 
> 标签：asp.net, asp.net-mvc

我将使用一些文本框和下拉列表动态生成 html 表格，用户将在其中输入他们的输入。如何在控制器中读取这些数据？（MVC）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-20T15:49:00.930

使用 Microsoft .NET Framework Data Provider for OLE DB，有一种相对快速和简单的方法可以从格式良好的 HTML 表中获取数据。本质上，这允许您指定一个连接字符串，该字符串指向带有您的 HTML 表的页面。

这是一个示例连接字符串：

*Provider=Microsoft.Jet.OLEDB.4.0;Data Source= **[http://www.your_web_address.com/yourHTMLTablePage.htm](http://www.your_web_address.com/yourHTMLTablePage.htm)** ;Extended Properties="HTML Import;HDR=YES;IMEX=1"*

您可以使用 OleDbConnection 和 OleDbCommand 对象来获取表中包含的数据。您可以在命名空间中找到这些：**System.Data.OleDb**

我希望这有帮助？

/理查德。

# vb.net - 在 VB 中实现“部分无效”

> ID：666678
> 
> 赞同：2
> 
> 时间：2009-03-20T15:37:20.957
> 
> 标签：vb.net

我正在关注一篇出色的 Scott Guthrie 文章（[MVC 表单发布场景](http://weblogs.asp.net/scottgu/archive/2008/09/02/asp-net-mvc-preview-5-and-form-posting-scenarios.aspx)），并尝试将其转换为 VB。除了一件，我什么都可以工作。在文章的某一时刻，他将自己的业务规则添加到 LINQ to SQL 实体中，如下所示：

```
public partial class Product
{
    partial void OnValidate(ChangeAction action)
    {
       ...
    }
} 
```

在将其转换为 VB 时，我不确定如何翻译 OnValidate 的“部分”部分。如果我这样做：

```
Partial Public Class Product

    Private Sub OnValidate(ByVal action As ChangeAction)
       ...
    End Sub

End Class 
```

然后我放入 OnValidate 的业务规则起作用，但它不会为错误数据（即十进制字段中的字符）抛出任何异常，这是有道理的，因为我基本上覆盖了 Product 的验证。

除了我的版本之外，确保基础类的 OnValidate 执行的语法是什么？

**编辑：**请注意，使 OnValidate "Partial Private Sub" 产生以下错误：

*   部分方法必须有空的方法体。
*   不能将方法“OnValidate”声明为“Partial”，因为只有一种方法“OnValidate”可以标记为“Partial”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-20T15:42:14.783

```
Partial Private Sub OnValidate(ByVal action As ChangeAction)
   ...
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-20T16:12:58.580

通常情况下，问题出在代码的其他地方。在此过程中，我已经从“UpdateModel”切换到“TryUpdateModel”，这意味着不再抛出简单的分配错误。回到“UpdateModel”并使用上面的“Private Sub OnValidate”现在可以正常工作。

OnValidate 已经在数据上下文中被标记为“部分”，因为它意味着被覆盖——毕竟我并没有破坏底层代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-20T16:14:45.110

将其标记为私有执行

```
'designer' 
Partial Class Product

    ' Definition of the partial method signature.'
    Partial Private Sub OnValidate(ByVal action As ChangeAction)
    End Sub

End Class

'your implmentation'
Partial Class Product

    ' Definition of the partial method signature.'
    Private Sub OnValidate(ByVal action As ChangeAction)
      'do things'
    End Sub

End Class 
```

看到这个[http://msdn.microsoft.com/en-us/library/bb531431.aspx](http://msdn.microsoft.com/en-us/library/bb531431.aspx)

# javascript - 您最喜欢在 Web 上创建工具提示的 JavaScript 库/脚本是什么？

> ID：666687
> 
> 赞同：0
> 
> 时间：2009-03-20T15:38:51.907
> 
> 标签：javascript, jquery, html, client, tooltip

我过去使用过 jTip（jQuery 插件）和 overLIB。还有其他我应该研究的……任何公认的“最好”的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-22T20:30:09.880

请记住，有时，一个简单`<acronym title="long description">text</acronym>`的方法是处理该问题的好方法。

（好）浏览器显示带有下划线的首字母缩写词，并在鼠标悬停时在工具提示中显示标题属性。

您需要一些小的 CSS 额外规则才能使其在 IE 上运行（至少在 IE 6 上）。

但是，根据该标签名称和[W3](http://www.w3.org/TR/html401/struct/text.html#h-9.2.1)，`<acronym>` *应该*只用于首字母缩略词（显然！）。

注意：您还拥有`<abbr>`具有相同行为的标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T15:41:18.123

看到这篇文章[关于 jQuery 工具提示的建议](https://stackoverflow.com/questions/543277/recommendations-for-jquery-tooltips)

# c# - .Net、cobol、字帖

> ID：666690
> 
> 赞同：1
> 
> 时间：2009-03-20T15:39:18.690
> 
> 标签：c#, .net, cobol

我有一个项目需要大量使用数据源，该数据源仅作为副本存在。例如，

```
 01  CMT-COMM-MSTR-EXTRACT-RECORD.

       05 CMT-FIXED-AREA-1.

           10 CMT-COMMUNITY-RECORD-KEY.
               15 CMT-ALTERNATE-KEY.
                   20 CMT-ALTERNATE-KEY-STATE
                                       PIC  X(02).
                   20 CMT-ALTERNATE-KEY-COMM
                                       PIC  X(08).
               15 CMT-COMMUN-NBR. 
```

问题是我是否必须为这些东西编写一个粗略的解析器，或者是否有人知道一些工具可以很好地为我处理这个问题。我基本上对使用 .Net 将其填充到 sql、oracle 甚至 xml 中感兴趣。看到我对这些东西一无所知，我只是担心我会错误地处理一些事情。任何输入都会很棒。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-20T15:45:13.950

为此目的有很多工具：

[COBOL 抄写本到 XML](http://sourceforge.net/projects/cb2xml/)

[另一个带有一些 .NET 特定注释的 XML 的 COBOL 副本：](http://www.dnzone.com/go?1068)

# java - 您是否在 Spring 和 Hibernate Web 应用程序方面取得了成功

> ID：666696
> 
> 赞同：4
> 
> 时间：2009-03-20T15:40:08.953
> 
> 标签：java, hibernate, spring

我正在开发中型 Web 应用程序 4-5 个选项卡，大约 10 万用户的用户登录。我们正在从头开始重新设计应用程序，并使用连接到 MySQL 的 spring 和 hibernate。

您是否遇到过重大问题以及 Spring 对您的应用程序有什么好处？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-20T16:07:07.937

没有大问题。春天特别有利于：

*   使所有配置管道一致且简单
*   依赖注入以支持更好的代码分解
*   Hibernate 的声明性“在视图中打开会话”功能
*   声明式事务划分
*   Acegi（现为 Spring Security）项目使集成自定义安全模型变得容易
*   Spring 数据访问支持消除了对任何 JDBC 访问的大量样板文件的需求——也许对 Hibernate 的使用没有这么大的推动作用，但我们两者兼而有之。它还允许您相当无缝地一起使用 JDBC 和 Hibernate

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-20T16:26:13.150

除了到目前为止所说的之外，我将重点关注 Spring（例如@Controller）和 Hibernate（例如@Entity）的更新样式注释。它将进一步减少您的代码库，使您需要维护的代码更少。不利的一面是，学习曲线相当显着，但最终我一次又一次地学到的教训是 Spring + Hibernate 的好处远远超过（学习曲线）成本。您只需编写更少的代码，让您专注于业务。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-20T18:29:31.120

+1 春天+冬眠……

10 万用户不是中等规模……那是巨大的。

使用 spring，您可以强制编码器对接口进行编码，这增加了可测试性。这是我没有听到人们谈论很多的好处。

看看 memcached 到缓存数据[memcached](http://www.danga.com/memcached/) .....

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-22T14:55:08.937

从技术上讲，我已经使用 spring、hibernate 和两者部署了数以千计到数十万的商业应用程序。

从管理的角度来看，在一个案例中，我有一个团队是优秀的技术人员，所以他们设法用 spring 和 hibernate 重写了一个应用程序，但是......他们对接口发疯了（模型的每个新对象都需要 16 个接口），滥用 AOP，因此几乎不可能跟踪事务和日志记录，堆栈跟踪毫无意义，使用工具映射休眠文件而不完全了解正在执行的操作（在某些情况下，将 4 个表加入可能是一个简单的实体，并且各种问题使得生成的应用程序更难增强、调试、修复，甚至设置开发人员的环境......）

我的2c

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-20T18:37:16.813

正如 Julien Chastang 所说，如果这是您的第一个项目，您需要在估计中考虑学习曲线。我们在第一次尝试时未能做到这一点，最终不得不调整我们的很多计划，因为 Hibernate 的几个方面“很难”（例如，需要一些时间）才能弄清楚。

根据我们遇到的一个问题，我可以给出的一个具体建议是：如果您需要编写复杂的 SQL，并且您不想花时间弄清楚如何让此类查询在 HQL 或 Hibernate 中的其他产品中工作，首先让它在普通 SQL 中工作，然后再返回并将其修补回 Hibernate。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-20T15:57:01.083

显然，有上百万种方法可以构建这样的应用程序，无论是在 java 框架世界中还是在 Rails 或 Django 之类的东西中。

对我来说，一个很大的卖点是 spring 和 hibernate 都已成为 Java 世界的事实标准，因此它们绝对有资格成为“你应该知道的事情”（每次工作面试都会问我）。Spring 比 Hibernate 更重要。

获得 spring 的价值需要一些支持 spring 的应用程序才对我有意义。它强制执行独立的代码模块和某种有助于测试的组件设计风格。我建议您直接使用它并从使用中了解它的价值。

我对 Hibernate 的感觉很复杂，尽管使用某种 db 层很重要，所以你也可以。

另请参阅[此问题。](https://stackoverflow.com/questions/100243/java-frameworks-war-spring-and-hibernate/142029#142029)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-22T03:29:06.043

在 Hibernate 的某些情况下，创建特定对象到关系映射或编写特定 HQL 查询非常困难。但是，您将在 10 次中遇到 1 次这样的事情，并且您的数据库越规范化，您的情况就会越好。这很值得。

任何新的 Java Web 项目都应该使用 Spring MVC（2.5+ 和 Annotations）和 Hibernate。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-03-22T05:00:21.643

hibernate 和 spring 的理解开销很大。如果您有足够的时间或有经验的 java/spring/hibernate 开发人员可以联系，我只会建议您这样做。有了 spring 项目，一旦你开始了它，你基本上可以忽略它的 spring 部分并专注于页面和逻辑设计。休眠并不难。HQL 是一个更难的问题。我的大部分时间都花在了 bean 和 JSF 级别。将我的项目的这一层与一些在 JSP 中搞乱的伙伴进行比较，我很高兴能够轻松使用 JSF。我很容易从 MySQL 中的初始实现切换到 Oracle，这证明 Hibernate 很好地处理了抽象。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-25T20:56:10.133

除了到目前为止所说的之外，我强烈推荐这本书：[Spring Recipes - Problem Solution Approach (Amazon)](https://rads.stackoverflow.com/amzn/click/com/1590599799)，结合非常好的在线文档，您应该准备好征服世界；-)

# java - 用 Java 显示 CMD 窗口

> ID：666699
> 
> 赞同：2
> 
> 时间：2009-03-20T15:40:52.213
> 
> 标签：java, netbeans, cmd

我正在使用此代码启动 .cmd 文件：

```
try {
            String line;
            Process p = Runtime.getRuntime().exec(myPath + "\\punchRender.cmd");
            BufferedReader input =
                    new BufferedReader(new InputStreamReader(p.getInputStream()));
            while ((line = input.readLine()) != null) {
                System.out.println(line);
            }
            input.close();
        } catch (Exception err) {
            err.printStackTrace();
        } 
```

它工作正常，但我想真正看到 cmd.exe 窗口正在运行。我怎样才能让它显示出来？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-20T15:44:25.760

不要运行你的路径，而是尝试实际运行，`cmd.exe`但使用 build in`start`命令启动一个新的命令窗口。您可以通过在命令提示符处输入以下内容来查看完整的命令行参数集：

```
cmd/?
start/? 
```

在你的情况下，你可能想要执行类似命令的东西：

```
cmd /c start c:\path\to\punchRender.cmd 
```

# python - qt设计问题

> ID：666712
> 
> 赞同：2
> 
> 时间：2009-03-20T15:43:31.270
> 
> 标签：python, user-interface, qt

我正在尝试设计这样的界面 [http://www.softpedia.com/screenshots/FlashFXP_2.png](http://www.softpedia.com/screenshots/FlashFXP_2.png)

我在左侧很好地使用 QT 设计和 python 编程，它是一个 treeWidget，但右侧是什么？每次我更改树上的光标时，所有小部件都会替换...

谢谢：p

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-20T15:48:42.723

使用[QStackedWidget](http://doc.trolltech.com/4.5/qstackedwidget.html)。您插入几个与**页面**相对应的小部件。更改树中的活动项目应切换堆叠小部件内的活动小部件/页面。

# c++ - C & C++ 之间的输出冲突

> ID：666713
> 
> 赞同：0
> 
> 时间：2009-03-20T15:43:35.920
> 
> 标签：c++, c

大家好

我目前正在尝试编写多语言程序（C、C++ 和 fortran），但遇到了分段错误。我已经排除了向量等：[Accessing public class memory from C++ using C](https://stackoverflow.com/questions/666320/accessing-public-class-memory-from-c-using-c)

我现在缩小了在我的 C++ 段中使用 'cout' experssions 和在 C 段中使用 printf(...) 的原因。根据我运行这些的顺序，使用第二种类型时总是会出现分段错误，如下所示：

1.  cout 首先，然后 printf(...) 将在第一个 C 输出函数时崩溃
2.  printf(...)，然后 cout 将在第一个 C++ 输出函数处崩溃

我`#include <iostream>`在我的 C++ 源代码和`#include <stdio.h>`&`#include <stdlib.h>`在我的 C 源代码中。

是否存在我不知道的库冲突？

要求的代码：

主文件

```
#include <iostream>
#include <vector>
#include "CFE.h"    

ios::sync_with_stdio(true);

using namespace std; 

    vector<float> DensityArray;
    vector<float> EnergyArray;

int main() 
{   
    int X = ReturnX ();
    int Y = ReturnY ();

    cout << "X " << X << endl;               
    cout << "Y " << Y << endl;               

    EnergyArray.resize(Y*X);
    DensityArray.resize(Y*X);

    CFE(&DensityArray[0], &EnergyArray[0]);

    cout << "X " << X << endl;               //causes Segmentation break
    cout << "Y " << Y << endl;               //causes Segmentation break

    system ("PAUSE");

    return 0;
} 
```

CFE.h

```
#ifdef __cplusplus
extern "C" {
#endif 

int ReturnX ();
int ReturnY ();
void CFE(float density[], float energy[]);

#ifdef __cplusplus
 }
#endif 
```

CFE.cpp

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>
#include "BCs.h"
#include "EMatrix.h"
#include "Numbering.h"
#include "KMatrix.h"
#include "fg_types.h"
#include "Solve.h"

int ReturnX ()
{
    FILE *infile;
    infile = fopen("test05", "r");

    int elemX,elemY;
    fscanf(infile, "%i %i", &elemX, &elemY);

fclose(infile);

    return elemX;
}
int ReturnY ()
{
    FILE *infile;
    infile = fopen("test05", "r");

    int elemX,elemY;
    fscanf(infile, "%i %i", &elemX, &elemY);

fclose(infile);

    return elemY;
}
void CFE(float density[], float energy[])
{

    FILE *infile;
    infile = fopen("test05", "r");

    int elemY, elemX;
    fscanf(infile, "%i %i", &elemX, &elemY);  //Will cause Segmentation break

    int n;

    float * dens;
    dens = density;

    float * engy;
    engy = energy;

        int Length = 10;

    for ( n = 0; n < Length; n++)
    {
        engy[n] = n;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-20T16:11:53.293

You need to check that the files are opened correctly - i.e. the the pointer returned by fopen() is not NULL. Also,

```
int ReturnY ()
{
    FILE *infile;
    infile = fopen("test05", "r");

    int elemX,elemY;
    fscanf(infile, "%i %i", &elemX, &elemY);
    return elemX;
} 
```

I take it **return elemx** should be **return elemy**?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-20T15:47:26.207

为什么您不只是在 C++ 代码中使用 printf 的任何特殊原因？当然，这并不像所有酷孩子所做的那样，但它应该仍然有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-20T15:50:42.983

这是在什么平台上的？如果您的平台上有 ios::sync_with_stdio(bool) 可用，请使用

```
ios::sync_with_stdio(true) 
```

在程序的开头（从 C++ 调用它）。这有帮助吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-20T16:29:45.060

When I mix cout and printf in an application, I find it useful to have all my C++ code do the equivalent of:

```
fflush(stdout);
cout << ...whatever... << flush; 
```

This way stdout and cout never both have unflushed buffers at any point in time.

Extra care should be taken for apps where multiple threads access stdout and/or cout.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-20T16:04:20.330

这里的快速回答是否定的，它绝对 100% 不应该仅仅因为你混合 printf 和 cout 而崩溃。将两者混合的唯一困难是默认情况下不会同步各自的输出缓冲区，因此输出的顺序可能会有点混淆。但它绝对不应该崩溃。

At a quick guess, perhaps you have a formatting problem with printf -- you're passing a double when it expects a short int, or something like that. That will lead to unpredictable problems, which might well shift depending on the order of function calls in your code.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-20T16:11:09.987

ReturnY() is returning X instead of Y

(ps. close your files)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-20T16:46:24.550

I don't see a printf(), so I can't comment on it. You should show what printf()s you're using, providing a complete sample program that fails as you describe.

As far as the comment about a crash on fscanf(), as Neil Butterworth says, you need to check the return value of fopen(). If, for some reason, the fopen() fails (which it doesn't look like it should), fscanf() might crash. (If it can't read integers, it should deal with it.) You're not checking anything in I/O. (Alternatively, the I/O system might be messed up from something previous.)

I'd suspect corruption somewhere in the I/O memory, but I don't see enough to conclude anything.

# java - 如何让 Eclipse 工具与 JSP 很好地协同工作？

> ID：666714
> 
> 赞同：4
> 
> 时间：2009-03-20T15:43:40.660
> 
> 标签：java, eclipse, jsp, ide, intellij-idea

如何让 Eclipse 像处理 Java 文件一样正确处理 JSP 文件？

具体来说：

*   Eclipse“查找引用”（右键单击方法、引用、工作区）在 JSP 文件中找不到引用。
*   Eclipse 重构（右键单击方法、重构、重命名）不会重命名 JSP 文件中的引用。

我们使用的是 Eclipse 3.2.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-20T17:12:06.953

Eclipse 3.2 (Callisto) 已于[2006 年发布](http://en.wikipedia.org/wiki/Eclipse_(software)#Releases)......看起来当时[不支持在](http://dev.eclipse.org/newslists/news.eclipse.webtools/msg09344.html)JSP 文件中进行重构。

可能需要升级（如果您的工作环境/政策确实支持升级此软件）。

但是，即使使用 3.4，也没有（很好）支持，如此[SO question](https://stackoverflow.com/questions/538239/does-the-eclipse-web-tools-project-handle-refactoring-inside-jsps)所示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-04-06T13:07:49.077

最后，我们切换到了 IntelliJ，它开箱即用地做到了这一点。

# .net - 使用小数分隔符进行本地化

> ID：666717
> 
> 赞同：1
> 
> 时间：2009-03-20T15:44:11.503
> 
> 标签：.net, localization, decimal, separator

.NET 是否有可能在服务器 A 上使用“，”作为小数分隔符并在另一台服务器 B 上使用“。”？+ 你怎么能检测到这个？

将字符串转换为双精度时，在服务器 A 上一切正常，但在服务器 B 上出现问题。

例子：

服务器 A：20,4 --> 20.4 服务器 B：20,4 --> 204

我们需要检测到这一点，以便在两台服务器上都可以继续工作。

谢谢，列文卡登

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-20T15:50:56.837

听起来像是在一台服务器上正确设置了区域设置，但在另一台服务器上却没有。

有几种方法可以做到这一点，但您可能希望使用 Thread.CurrentThread.CurrentCulture 和 Thread.CurrentThread.CurrentUICulture 为 App/ASP.NET 页面中的当前线程设置语言环境。

要为整个应用程序设置此项，您可以在 web.config 中执行此操作：

```
<configuration>
  <system.web>
    <globalization culture="en-US" uiCulture="en-US" />
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T16:15:26.437

我用

```
String.Format(System.Globalization.CultureInfo.InvariantCulture, ....) 
```

在那些你不想有文化特定输出的情况下。（例如，当您为其他应用程序编写序列化数据时等）这样无论当前设置什么文化，输出都将始终相同。

# ant - 需要根据属性的值在 ant 脚本中设置路径（cp）

> ID：666718
> 
> 赞同：4
> 
> 时间：2009-03-20T15:44:16.103
> 
> 标签：ant

我想根据属性的值将路径变量 cp 设置为两个值之一。

例如，以下是我想要实现的目标，但我不确定如何让它正常工作......

```
<if>
    <contains string="${jboss.home}" substring="jboss-4.2.3.GA"></contains>
    <then>
        <echo message="Using JBoss 4.2.3 classpath"/>
        <path id="cp"> 
        ...
        </path>
    </then>
    <else>
        <echo message="Using JBoss 4.0.5 classpath"/>
        <path id="cp">
        ...
        </path>
    </else>
</if> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-20T16:02:56.450

```
<condition property="usejboss423">
    <contains string="${jboss.home}" substring="jboss-4.2.3.GA"/>
</condition>

<target name="build.jboss.cp" depends="build.jboss.cp.423,build.jboss.cp.405"/>

<target name="build.jboss.cp.423" if="usejboss423">
    <path id="cp">
    ... JBoss 4.2.3 classpath
    </path>
</target>

<target name="build.jboss.cp.405" unless="usejboss423">
    <path id="cp">
    ... JBoss 4.0.5 classpath
    </path>
</target> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-21T02:39:19.180

如果您经常需要做这种事情，请安装[AntXtras](http://antxtras.sourceforge.net/AntXtras/overview.html)。您只需将一个 JAR 文件添加到 Ant 的类路径中，您就可以这样做：

```
<condition property="usejboss423">
  <contains string="${jboss.home}" substring="jboss-4.2.3.GA"/>
</condition>

<do if="usejboss423">
  ...
</do>

<do unless="usejboss423">
  ...
</do> 
```

它还有很多其他有用的功能。

# python - 如何在 xml.minidom 中获取元素的整个文本？

> ID：666724
> 
> 赞同：0
> 
> 时间：2009-03-20T15:44:37.307
> 
> 标签：python, minidom

我想获取一个元素的整个文本来解析一些 xhtml：

```
<div id='asd'>
  <pre>skdsk</pre>
</div> 
```

在上面的例子中开始 E = div 元素，我想得到

```
<pre>skdsk</pre> 
```

如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-20T15:54:51.773

严格来讲：

```
from xml.dom.minidom import parse, parseString
tree = parseString("<div id='asd'><pre>skdsk</pre></div>")
root = tree.firstChild
node = root.childNodes[0]
print node.toxml() 
```

不过，在实践中，我建议您查看[http://www.crummy.com/software/BeautifulSoup/](http://www.crummy.com/software/BeautifulSoup/)库。在 xhtml 文档中找到正确的 childNode 并跳过“空白节点”是一种痛苦。BeautifulSoup 是一个强大的 html/xhtml 解析器，具有出色的树搜索功能。

编辑：上面的示例将 HTML 压缩为一个字符串。如果您在问题中使用 HTML，则换行符等将生成“空白”节点，因此您想要的节点不会位于 childNodes[0]。

# .net - 我的团队成员添加了对第三方 DLL 的引用并进行了签入...现在我无法构建

> ID：666733
> 
> 赞同：3
> 
> 时间：2009-03-20T15:47:19.747
> 
> 标签：.net, version-control, dll

我的团队成员引用了他本地驱动器上的一个 DLL（例如`C:\mystuff\thirdparty.dll`），并使用该引用签入了项目。我刷新了项目的本地副本，现在我有一个损坏的参考：`<The system cannot find the reference specified>`. 我的本地计算机上有thirdparty.dll，但它不在我的团队成员拥有的同一目录中。

我们是否应该使用相对路径将thirdparty.dll 本身检入到我们解决方案下的子目录中的源代码控制中？**当另一个开发者拿到这个项目时，即使**开发者没有事先“安装” DLL ，它会拉下 DLL 并自动工作吗？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-20T15:49:48.727

如果您在解决方案下或至少在源代码管理项目中创建“lib”或“程序集”目录，并添加所有 3d 方程序集并在其中引用它们，它应该可以消除许多像您这样的问题。

通常，您不必使用 3d 派对安装程序，但这取决于产品。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-20T15:50:13.237

请参阅我刚刚对这个问题给出的答案：

[https://stackoverflow.com/questions/666597/tfs-c-vs2008-how-to-deal-with-external-assemblies/666623#666623](https://stackoverflow.com/questions/666597/tfs-c-vs2008-how-to-deal-with-external-assemblies/666623#666623)

基本上，您需要将 DLL 添加到源代码管理中，并使用文件引用来引用它，这样 dll 的相对文件路径对于您团队中的所有开发人员来说都是相同的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-20T15:53:26.393

根据我的经验，最好的方法是在公共目录中设置一些到引用 DLL 的相对路径。例如，给定以下结构：

> *   大项目
>     *   项目一
>     *   项目 2
>     *   ...
>     *   项目 N
>     *   斌

我将所有项目都编译到 bin 文件夹中，并且所有项目都从 bin 文件夹中引用它们的依赖项。任何人都可以将项目下载到**任何**位置并第一次编译。

# c# - 必填字段验证器，在初始页面加载时显示

> ID：666745
> 
> 赞同：2
> 
> 时间：2009-03-20T15:49:27.200
> 
> 标签：c#, asp.net, validation

我有一个简单的文本框，其中附有必填字段验证控件，然后显示在页面底部的验证摘要中。一切都很好，但验证似乎在页面的初始加载时触发，这显然引发了所需的验证并显示错误消息。

如何将此控件设置为仅在提交表单后验证？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-20T15:59:04.523

听起来您的页面加载中有这样的代码：

```
if (!Page.IsValid) { } 
```

你真正想要的是：

```
if (Page.IsPostBack && !Page.IsValid) { } 
```

# jquery - xajax 和选择

> ID：666750
> 
> 赞同：2
> 
> 时间：2009-03-20T15:50:26.307
> 
> 标签：jquery, ajax, xajax

我用 XAJAX 创建了一些简单的东西，它用 php 脚本创建的一些选项替换了选择控件的内部 HTML。

这在 Firefox 中很好用，但在 IE7 中不起作用。

在 XAJAX 论坛上，我发现[它](http://community.xajaxproject.org/post/27727/#p27727)基本上说“在 IE 中不起作用，使用 div 并用完整的 select 语句替换它的内部 HTML”

这样做了，这很好，除了我有一个 jQuery 选择器在选择控件上工作，现在它不再工作了。

任何人都有任何想法，或者任何人都可以指出一个很好的 jQuery 示例，说明如何使用 jQuery 进行 ajax 位，所以我可以完全放弃 XAJAX？

* * *

### 编辑：

```
<div id=imgselect>
  <select id="images">
   <option value="">Then select an image</option>
  </select>
</div>

Picture Preview:<br><br>

 <div class="img-preview" id='preview'></div>
 <script type='text/javascript'>
   $('#images').change(function() 
   {
     var image = $(this).val();
     var img = $('<img/>').attr('src', image);
    $('#preview').html(img);

    document.getElementById('picsmall').value = image;
    });
</script> 
```

当 的内容`imgselect` `div`被 AJAX 调用替换时，问题就来了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-25T12:29:34.533

现在使用

```
$objResponse->script 
```

命令

为了完整起见，如果有人想在未来看到，我将原始页面设置为如上：

```
<div id=imgselect>
  <select id="images">
    <option value="">Then select an image</option>
  </select>
</div> 
```

然后在我的 xajax php 文件中我有

```
function getphotos()
{
    $objResponse = new xajaxResponse();
        //this include assigns all the options to the select controll into the $output var
    include "photos.photosselect.php";
    $objResponse->assign("imgselect", "innerHTML", "$output");
    $objResponse->script("$('#images').change(function() {var image = $(this).val(); var img = $('<img/>').attr('src', image); $('#preview').html(img); document.getElementById('picsmall').value = image;});");
    return $objResponse;
} 
```

# vim - 如何在 vim 命令中扩展变量？

> ID：666757
> 
> 赞同：13
> 
> 时间：2009-03-20T15:51:57.850
> 
> 标签：vim, variables, variable-expansion

我正在尝试在命令调用中扩展变量。这是我的`.vimrc`：

```
command! -nargs=1 -complete=dir TlAddPm call s:TlAddPm(<f-args>)
function! s:TlAddPm(dir)
    let flist = system("find " . shellescape(a:dir) . " -type f -name '*.pm' | sort")
    TlistAddFiles `=flist`
endfun 
```

在`:`提示符下，``=flist``语法似乎有效（或者，至少它对`w:`变量有效），但在`.vimrc`文件中它不起作用 - TlistAddFiles 只是传递了 string ``=flist``。

* * *

感谢 Andrew Barnett 和 Mykola Golubyev 的回答，我现在有了这个，这似乎有效。没有更好的办法吗？

```
command! -nargs=1 -complete=dir TlAddPm call s:TlAddPm(<f-args>)
function! s:TlAddPm(dir)
    let findres = system("find " . shellescape(a:dir) . " -type f -name '*.pm' | sort")
    let flist = []
    for w in split(findres, '\n')
        let flist += [ fnameescape(w) ]
    endfor
    exe "TlistAddFiles " . join(flist)
endfun 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-20T16:02:16.530

试一试

```
let joined = join(split(flist))
exec 'TlistAddFiles '.joined 
```

对您的编辑：

```
 let flist = split(findres, '\n')
 call map(flist, 'fnameescape(v:val)') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-20T16:03:22.987

就像是

```
exe "TlistAddFiles `=".flist 
```

可能会奏效。

# sql - 如何找到连续缺席n天的人？

> ID：666763
> 
> 赞同：5
> 
> 时间：2009-03-20T15:54:31.447
> 
> 标签：sql, sql-server, sql-server-2005

数据库：MS SQL 2005

桌子：

> 员工编号 | 入职日期 | 地位

样本数据：

200 | 2009 年 3 月 1 日 | 200
| 2009 年 3 月 2 日 | 200
| 2009 年 3 月 3 日 | 201
| 2009 年 3 月 1 日 | 201
| 2009 年 3 月 2 日 | 磷

在存在 P 的情况下，不存在 A。我已经尝试了 row_number 而不是分区。但它不会产生我期望的序列。

对于上述数据，我期望的序列是 1 1 2 1 1

```
SELECT EmployeeNumber, EntryDate,Status
    ROW_NUMBER() OVER (
    PARTITION BY EmployeeNumber, Status
    ORDER BY EmployeeNumber,EntryDate    ) AS 'RowNumber'
    FROM [Attendance] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-20T16:23:46.400

我不确定我是否遵循您想要的 1 1 2 1 1 序列，但只需在原始查询中添加 order by 即可产生该序列...

```
SELECT  EmployeeNumber, 
        EntryDate,
        Status,
        ROW_NUMBER() OVER (PARTITION BY EmployeeNumber, Status ORDER BY EmployeeNumber, EntryDate) AS 'RowNumber'    
FROM    Attendance
ORDER BY EmployeeNumber, EntryDate

/*
EmployeeNumber EntryDate               Status RowNumber
-------------- ----------------------- ------ --------------------
200            2009-03-01 00:00:00     P      1
200            2009-03-02 00:00:00     A      1
200            2009-03-03 00:00:00     A      2
201            2009-03-01 00:00:00     A      1
201            2009-03-02 00:00:00     P      1

(5 row(s) affected)
*/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T16:17:53.620

这对你有帮助吗？
它不会产生您要求的序列（不知道如何做到这一点），但它确实为您提供了某人连续缺席的天数。

```
DECLARE @Attendance TABLE (EmployeeNumber INTEGER, EntryDate DATETIME, Status VARCHAR(1))

INSERT INTO @Attendance VALUES (200, '03/01/2009', 'P')
INSERT INTO @Attendance VALUES (200, '03/02/2009', 'A')
INSERT INTO @Attendance VALUES (200, '03/03/2009', 'A')
INSERT INTO @Attendance VALUES (200, '03/04/2009', 'A')
INSERT INTO @Attendance VALUES (200, '04/04/2009', 'A')
INSERT INTO @Attendance VALUES (200, '04/05/2009', 'A')
INSERT INTO @Attendance VALUES (201, '03/01/2009', 'A')
INSERT INTO @Attendance VALUES (201, '03/02/2009', 'A')
INSERT INTO @Attendance VALUES (201, '03/03/2009', 'P')

SELECT a1.EmployeeNumber, [Absent] = COUNT(*) + 1
FROM @Attendance a1
     INNER JOIN @Attendance a2 ON a1.EntryDate = a2.EntryDate - 1 
                                  AND a1.EmployeeNumber = a2.EmployeeNumber
                                  AND a1.Status = a2.Status
GROUP BY a1.EmployeeNumber 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-20T16:49:00.240

您应该能够使用 SQL 2005 中的 CTE 执行此操作。窃取 Lievens 数据：

```
DECLARE @Attendance TABLE (EmployeeNumber INTEGER, EntryDate DATETIME, Status VARCHAR(1))

插入@出勤值（200，'03/01/2009'，'P'）
插入@出勤值（200，'03/02/2009'，'A'）
插入@出勤值（200，'03/03/2009'，'A'）
插入@出勤值（200，'03/04/2009'，'A'）
插入@出勤值（200，'04/04/2009'，'A'）
插入@出勤值（200，'04/05/2009'，'A'）
插入@出勤值（201，'03/01/2009'，'A'）
插入@出勤值（201，'03/02/2009'，'A'）
插入@出勤值（201，'03/03/2009'，'P'）；

```

然后使用此 CTE 提取序列：

```
 有日期
    (
        入境日期，
        员工编号，
        地位，
        天
    )
    作为
    (
        选择
            a.进入日期，
            a.员工编号，
            a.状态，
            1
        从
            @出席一个

        在哪里
            a.EntryDate = (SELECT MIN(EntryDate) FROM @Attendance)

        -- 递归的    
        联合所有

        选择
            a.进入日期，
            a.员工编号，
            a.状态，
            CASE WHEN (a.Status = Parent.Status) THEN Parent.Days + 1 ELSE 1 END
        从
            @出席一个
        内部联接
            日期父母
        在
            datediff(day, a.EntryDate, DateAdd(day, 1, parent.EntryDate)) = 0
        和
            a.EmployeeNumber = parent.EmployeeNumber
    )

    SELECT * FROM Dates order by EmployeeNumber, EntryDate

```

尽管作为最后一点，序列对我来说确实很奇怪，但根据您的要求，可能有更好的方法来聚合数据？无论如何，这将产生您需要的序列

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-20T16:20:26.157

您可以使用递归，类似于我在[这里](http://cdonner.com/combining-contiguous-date-ranges-in-a-sql-query-using-cte-recursion.htm)所做的。似乎您的问题稍微简单一些，并且由于 SQL Server 将递归限制为 99，这可能不适用于经常缺席的人。让我考虑几分钟。

如果您每天都有排，请加入 Lieven 的加入。

# c# - 选择一个好的字典键

> ID：666770
> 
> 赞同：2
> 
> 时间：2009-03-20T15:56:44.390
> 
> 标签：c#, .net, dictionary, indexing, key

我有一个对象，我想用它来查找其他对象。我将使用`Dictionary<TKey, TValue>()`.

关键对象有两个唯一标识它的字符串，比如`KeyObj.Str1`和`KeyObj.Str2`。

你建议我用什么作为字典的键？

1：字符串的连接。

```
Dictionary<String, TValue>();
Key = KeyObj.Str1:KeyObj.Str2; ("somestring:anotherstring") 
```

2：每个对象用一个唯一的整数来标识吗？

```
Dictionary<int, TValue>();
KeyObj.ID = _nextID++;
Key = KeyObj.ID; 
```

3：对对象的引用。

```
Dictionary<KeyObj, TValue>();
Key = KeyObj; 
```

选项 3 将是最简单的，但似乎基于参考值索引字典效率低下。

如果 key 对象包含一个唯一的字符串，那么明显的选择是使用它，但是只有两个唯一的字符串组合起来会变得更加困难。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-20T16:02:45.263

串联的字符串应该效果最好。

如果您知道它们的组合是唯一的，那么这就是您应该选择的——记住哈希码**通常是**唯一的，但并非总是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-20T16:11:36.490

如果您可以适当地覆盖 GetHashCode() 和 Equals() ，则可以使用选项 3，例如：

```
 public override int GetHashCode()
    {
        return str1.GetHashCode() ^ str2.GetHashCode();
    }

    public override bool Equals(object obj)
    {
        if (!obj is KeyObj)
        {
            return false;
        }

        KeyObj key = (KeyObj)obj;
        return this.str1.Equals(key.str1) && this.str2.Equals(key.str2);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-20T16:01:55.437

连接它们可能是最好的主意。您可以在执行连接的对象中公开一个属性，`KeyObj`这样您就不必在每次访问字典值时都执行它。

**编辑：**

我显然误读了这个问题。我认为您真正想要做的是 1 和 3 的混合，您可以覆盖`Equals()`并`GetHashCode()`使用`string`唯一标识对象的 s（只要确保它们是不可变的！）

```
public override Equals(object obj) 
{
   if (obj == null || !(obj is KeyObj))
      return false;
   KeyObj other = (KeyObj)obj;
   if (this.Key1 == other.Key1 && this.Key2 == other.Key2)
     return true;
   return false;
}

public override GetHashCode()
{
    return (this.Key1 + this.Key2).GetHashCode();
} 
```

然后你可以使用你建议的第三个选项：

```
Dictionary<KeyObj, ValueObj>... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-20T16:02:07.810

使用 KeyObj.GetHashCode() 怎么样？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-20T16:02:28.120

它们中的任何一个都是有效的，但我假设您希望能够根据两个字符串之一快速找到这些对象，因此使用 int 作为键意味着您仍然必须扫描值以找到你想要的对象。

字符串都是唯一的，还是仅在组合时才唯一？如果它们都是独一无二的，并且您愿意交换一些空间，您可以这样做：

```
dict.Add(KeyObj.Str1, KeyObj);
dict.Add(KeyObj.Str2, KeyObj); 
```

并且有两个对字典中对象的引用，使用每个唯一的字符串作为键。或者，如果它们只是唯一的字符串，您总是可以将它们组合在一起，并且它将在内部使用哈希码来查找它们。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-20T15:58:54.383

您不需要使用新类作为字典键。改用新的结构，因为它会更轻量级......并且显然它由这两个字符串值组成。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-20T16:00:09.623

如果性能是主要考虑因素，您可以考虑使用两个字符串的哈希值。但是，您的“值”字段必须同时包含键和值。

我有另一个 SO question 的参考，我只需要找到它。

[通过哈希码在数据库中搜索大字符串是否更快？](https://stackoverflow.com/questions/658065/is-it-faster-to-search-for-a-large-string-in-a-db-by-its-hashcode/658187)

但是这个问题更面向数据库。并且性能被考虑了数千次迭代。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-20T16:03:04.983

请记住，字典是一个美化的哈希表，因此键（不是双关语）是使用一个键，该键将导致与另一个键的冲突极少（如果有的话）。我倾向于#3，但这是假设 KeyObj 类型具有良好的哈希值生成器。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-01-09T02:27:47.870

字符串作为键是最好的，请参阅我的测试代码：

var tupleKeyDict = 新字典，字符串>();

```
 for (int i = 0; i < 1000000; i++)
        {
            tupleKeyDict.Add(new Tuple<int, int>(i,0),i.ToString() );
        }

        System.Diagnostics.Stopwatch stopWatch = new Stopwatch();
        stopWatch.Start();
        string e1 = tupleKeyDict[new Tuple<int, int>(0, 0)];
        string e2 = tupleKeyDict[new Tuple<int, int>(500000, 0)];
        string e3 = tupleKeyDict[new Tuple<int, int>(999999, 0)];
        stopWatch.Stop();
        Console.WriteLine("Tuplekey cost(tick): " + stopWatch.ElapsedTicks.ToString());
        Console.WriteLine("Tuplekey cost(ms): " + stopWatch.ElapsedMilliseconds.ToString());

        var strKeyDict = new Dictionary<string, string>();

        for (int i = 0; i < 1000000; i++)
        {
            strKeyDict.Add(i.ToString() + ":0", i.ToString());
        }

        System.Diagnostics.Stopwatch stopWatch2 = new Stopwatch();
        stopWatch2.Start();
        string se1 = strKeyDict["0:0"];
        string se2 = strKeyDict["500000:0"];
        string se3 = strKeyDict["999999:0"];
        stopWatch2.Stop();
        Console.WriteLine("strkey cost(tick): " + stopWatch2.ElapsedTicks.ToString());
        Console.WriteLine("strkey cost(ms): " + stopWatch2.ElapsedMilliseconds.ToString());

        var intKeyDict = new Dictionary<int, string>();

        for (int i = 0; i < 1000000; i++)
        {
            intKeyDict.Add(i, i.ToString());
        }

        System.Diagnostics.Stopwatch stopWatch3 = new Stopwatch();
        stopWatch3.Start();
        string ie1 = intKeyDict[0];
        string ie2 = intKeyDict[500000];
        string ie3 = intKeyDict[999999];
        stopWatch3.Stop();
        Console.WriteLine("intkey cost(tick): " + stopWatch3.ElapsedTicks.ToString());
        Console.WriteLine("intkey cost(ms): " + stopWatch3.ElapsedMilliseconds.ToString()); 
```

输出： Tuplekey cost(tick): 104 Tuplekey cost(ms): 0 strkey cost(tick): 12 strkey cost(ms): 0 intkey cost(tick): 66 intkey cost(ms): 0

# sql-server - SQL Server 2005：检测分层数据中的循环

> ID：666781
> 
> 赞同：1
> 
> 时间：2009-03-20T16:00:06.503
> 
> 标签：sql-server, sql-server-2005, hierarchical-data

我有一个典型的 id、parentId 形式的分层数据表。

```
CREATE TABLE Hierarchy (Id int, ParentId int NULL, Name varchar(128));
INSERT INTO Hierarchy VALUES (1, NULL, '1');
INSERT INTO Hierarchy VALUES (2, NULL, '2');
INSERT INTO Hierarchy VALUES (3, NULL, '3');
INSERT INTO Hierarchy VALUES (4, 1, '1.1');
INSERT INTO Hierarchy VALUES (5, 1, '1.2');
INSERT INTO Hierarchy VALUES (6, 4, '1.1.1'); 
```

我需要在现有数据中检测如下循环。

```
Id  ParentId  Name
27  8         'foo'
8   19        'bar'
19  27        'busted' 
```

Id 来自另一个表，因此我不能将 Id 的排序用作解决方案的一部分。大约有 1/2 百万行。数据是大量高度为1-5的独立树。目的是清理数据以消除循环，然后向表中添加触发器以防止将来出现循环。

我知道循环检测[的](https://stackoverflow.com/questions/621229/detect-cycles-in-a-binary-tree-during-a-depth-first-search) [算法](https://stackoverflow.com/questions/261573/best-algorithm-for-detecting-cycles-in-a-directed-graph)。在我看来，这应该是一个普遍的问题。所以，我想知道在 SQL Server 的“盒子”中是否有一种方便的方法可以用最少的代码完成这个任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-20T16:38:33.400

如果您有 Sql Server 2005，则可以使用 With 子句对您的表执行递归查询。这将允许您折叠逻辑，因为这似乎是您的主要目标。

[http://blogs.msdn.com/craigfr/archive/2007/10/25/recursive-ctes.aspx](http://blogs.msdn.com/craigfr/archive/2007/10/25/recursive-ctes.aspx)

# linux - 如何找出哪个进程正在消耗“等待 CPU”（即 I/O 阻塞）

> ID：666783
> 
> 赞同：39
> 
> 时间：2009-03-20T16:01:00.277
> 
> 标签：linux, command-line

很容易找出每个作业使用`top`多少 CPU。但是，我想寻找一个导致高等待 CPU 的工作。有没有办法找出哪些作业在 I/O 上被阻止？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2009-03-20T16:15:49.883

`D`在 IO 上阻塞的进程是在状态列（`S`顶部的列）中标记的进程。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-08-26T00:07:41.203

更准确地说，使用这个命令可以很容易地找出哪些进程正在“吃掉”你的 CPU 周期：

`while true; do date; ps auxf | awk '{if($8=="D") print $0;}'; sleep 1; done`

这个网址可能会有所帮助：[Linux 等待 IO 问题](http://www.chile-offshore.com/en/interesting-articles/126-linux-wait-io-problem)

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2009-03-20T16:12:32.480

[iotop](http://guichaz.free.fr/iotop/)和[latencytop](http://www.latencytop.org/)可能会有所帮助。两者都没有给出确切的“由进程引起的 CPU 等待时间”——我不确定它是否有意义，因为 CPU 可以并且确实在等待 IO 时为其他进程提供服务——但这两个工具概述了（分别）系统 I/O 流量和调度延迟。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-10T20:06:05.927

执行 top，然后 shift F ，然后选择 m 或 n，将按 CPU 使用时间对进程列表进行排序。

# wpf - WPF - 在页面/窗口级别响应 ViewModel 更改的最佳方式

> ID：666784
> 
> 赞同：2
> 
> 时间：2009-03-20T16:01:09.730
> 
> 标签：wpf, mvvm, triggers, viewmodel

我正在开发一个 XBAP，我有一个简单的要求。

整个`DataContext`主页的 设置为 my 的一个实例`UserViewModel`。`UserViewModel`有一个`DependencyProperty`被调用的`AuthenticationState`对象，它是一个枚举值，例如 ' `Authenticated`'、' `NotAutheticated`' 和 ' `AuthenticationFailed`'。

现在，我需要通过隐藏/显示页面上的各种元素来响应此值的任何变化。

最好的方法是什么（以及在哪里）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-20T16:33:19.467

正如您所提到的，您不能直接在控件上使用 DataTrigger。一种解决方法是在每个需要隐藏的控件上使用一种样式。

```
<Grid>
    <Rectangle Fill="Red" />
    <Grid.Style>
        <Style TargetType="Grid">
            <Style.Triggers>
                <DataTrigger Binding="{Binding Test}" Value="true">
                    <Setter Property="Visibility" Value="Collapsed" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Grid.Style>
</Grid> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-20T16:36:02.563

一种更可取的方法是使用名为“AuthenticationStateToVisibilityConverter”的转换器，该转换器用于将控件的 Visibility 属性绑定到数据上下文的 AuthenticationState 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-20T16:19:16.020

最好的方法是使用 DataTrigger。所以是这样的：

```
<Window.Triggers>
    <DataTrigger Binding="{Binding AuthenticationState}" Value="NotAuthenticated">
        <Setter TargetName="nameOfControl" Property="Visibility" Value="Collapsed" />
    </DataTrigger>
    ...
    <TextBox x:Name="nameOfControl" />
</Window.Triggers> 
```

只要您的 UserViewModel 对象位于 Window 的 DataContext 中，那么这应该可以工作！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-20T16:54:37.667

实际上，最好的方法是从视图模型中公开适当的属性。这使您的逻辑更加集中并且更容易测试。此外，它的性能优于转换器。毕竟，它是一个视图模型。因此，它应该对视图进行建模。如果视图需要一个属性来告诉它何时隐藏/显示面板，请将这样的属性添加到您的视图模型中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-20T17:15:28.180

设法使用样式对其进行排序。这很痛苦，但它有效！

完整来源如下。

```
<Grid x:Name="contentGrid" Grid.Row="1">
        <!--login-->
        <controls:LoginControl>
            <controls:LoginControl.Style>
                <Style>
                    <Setter Property="Control.Opacity" Value="0"/>
                    <Setter Property="Control.IsHitTestVisible" Value="False"/>
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding Source={StaticResource UserViewModel},Path=UserAuthenticationState}"
                                     Value="{x:Static model:AuthenticationState.NotAuthenticated}">
                            <Setter Property="Control.IsHitTestVisible" Value="True"/>
                            <DataTrigger.EnterActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation To="1" Duration="0:0:2"
                                                         Storyboard.TargetProperty="Opacity"></DoubleAnimation>
                                    </Storyboard>
                                </BeginStoryboard>
                            </DataTrigger.EnterActions>
                            <DataTrigger.ExitActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation To="0" Duration="0:0:2"
                                                         Storyboard.TargetProperty="Opacity"></DoubleAnimation>
                                    </Storyboard>
                                </BeginStoryboard>
                            </DataTrigger.ExitActions>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </controls:LoginControl.Style>
        </controls:LoginControl>    

        <!--slider-->
        <slider:PageSlider>
            <Button>1</Button>
            <Button>2</Button>
            <Button>3</Button>
            <slider:PageSlider.Style>
                <Style>
                    <Setter Property="Control.Opacity" Value="0"/>
                    <Setter Property="Control.IsHitTestVisible" Value="False"/>
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding Source={StaticResource UserViewModel},Path=UserAuthenticationState}"
                                     Value="{x:Static model:AuthenticationState.Authenticated}">
                            <Setter Property="Control.IsHitTestVisible" Value="True"/>
                            <DataTrigger.EnterActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation To="1" Duration="0:0:2"
                                                         Storyboard.TargetProperty="Opacity"></DoubleAnimation>
                                    </Storyboard>
                                </BeginStoryboard>
                            </DataTrigger.EnterActions>
                            <DataTrigger.ExitActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation To="0" Duration="0:0:2"
                                                         Storyboard.TargetProperty="Opacity"></DoubleAnimation>
                                    </Storyboard>
                                </BeginStoryboard>
                            </DataTrigger.ExitActions>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </slider:PageSlider.Style>
        </slider:PageSlider>
    </Grid> 
```

# java - 网络图表，服务器端还是客户端？

> ID：666791
> 
> 赞同：6
> 
> 时间：2009-03-20T16:01:40.260
> 
> 标签：java, jsp, charts

我正在尝试确定我们是否最好在服务器端渲染图表并将它们作为图像推送到浏览器，或者使用 javascript 图表库在客户端绘制图表。

我正在查看 JFreeChart 和 Dojo Charting 库，我的目标是在 JBoss 中运行的现有 JSP 站点。

有没有人有这方面的经验，可以指出每个人的优点/缺点。

目前，除非数据集很大，否则我认为客户端渲染效率要高得多。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-20T17:13:30.790

我想推荐一个我写的库：[charts4j](http://charts4j.googlecode.com)，它是一个服务器端图表解决方案。以下是一些功能：

*   支持[Google Chart API的几乎所有功能](http://code.google.com/apis/chart/)
*   隐藏创建与 Google Chart API 通信所需的 URL 参数的丑陋细节
*   可以并入任何支持 Internet 的 Swing 或 Web 应用程序环境（JSP/Servlet、GWT、Spring MVC 等）
*   100% 纯核心 Java 解决方案。不需要特殊的图形库等。
*   超级可扩展和轻量级。只需要一个 160Kb jar 和 Internet 连接
*   有据可查
*   最重要的是，它是免费的！

这里有一些[推荐](http://code.google.com/p/charts4j/wiki/Testimonials)。另请查看[常见问题解答](http://code.google.com/p/charts4j/wiki/FAQ)。

[我的博客](http://radioeiffel.blogspot.com/2008/12/incorporating-google-charts-into-spring.html)上有一个将这项技术整合到 Spring MVC（使用 JSP）应用程序中的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-10T23:53:45.047

我建议确定您的性能/配置需求并从那里做出决定。如果您期望有大量客户端，每个客户端都需要大量图表，并且可能需要定期更新，那么将处理卸载到客户端可能是更好的解决方案。正如 jesper 所提到的，您还可以直接与客户端上的图表进行更多交互，而不需要回调到服务器以获得更复杂的功能。

如果您的图表的一般使用模型很简单（例如，静态图表由服务器即时生成，无需更新），并且客户端数量较少，您可能可以使用硬件来更好地提高性能. 在这种情况下，服务器端可能就足够了。

可扩展性和性能在以后可能很难实现。如果您有可能从一开始就缓解这种情况，那么您应该这样做，因为当前的使用模型经常会随着未来用户决定他们需要更快/更好的功能而改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-26T01:23:48.680

JFreeChart 非常成熟，并且已经存在很多年了。我在以前的项目中使用过它并且效果很好。它可以从富客户端应用程序或 Web 应用程序中使用。它具有两种场景的示例应用程序。如果您正在分发您的应用程序，它也是 GPL 许可的。

在服务器端执行此操作的优点是您可以将生成的图表呈现为图像，而不必担心跨浏览器的兼容性。我已经通过从 Servlet 和 Struts 渲染来合并 JFreeChart，效果很好。

我不能代表 Dojo 图表，因为它是相当新的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-26T01:29:31.710

第一个决定因素应该是您是否需要在禁用 JavaScript 的情况下访问图表。如果你这样做或认为你可能这样做，它完全排除了 JavaScript。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-10T23:18:07.100

我在任何一方都看到了很多有效点，但我喜欢做图表客户端的一件事是能够与图表进行一些交互。使用 Dojo 图表库，您可以使用多种图表交互方法，例如`dojox.charting.action2d.Highlight`和`dojox.charting.action2d.Tooltip`。您还可以让图表动态更新而无需刷新，我可以看到一些有用的情况。

当然，这完全取决于你，但我喜欢与从服务器渲染的图像相比，我可以更好地与之交互的图表，而且我认为很多人都同意我的观点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-11T00:44:25.727

如果您使用 javascript，您可能还需要一个服务器端解决方案，以防 javascript 被关闭。

如果您使用不显眼的 javascript，那么如果打开了 javascript，它可以更改服务器端解决方案的链接以使用 javascript 图表工具。

我发现最好在服务器端使用 php，因为 gdlib 很好，而且我的 tomcat 服务器有时会抛出错误，因为即使它在无头模式下运行也无法连接到 x11 服务器。

有很多可能的解决方案，或者你可以自己做。绘图并不难，这取决于您需要什么。例如，如果您可以使用 svg，那么这将允许动画图表，但需要一个适用于许多浏览器的插件。

# c# - 将非托管 dll 嵌入托管 C# dll

> ID：666799
> 
> 赞同：88
> 
> 时间：2009-03-20T16:02:39.773
> 
> 标签：c#, unmanaged, dllimport, managed

我有一个使用 DLLImport 使用非托管 C++ dll 的托管 C# dll。一切都很好。但是，我想将该非托管 DLL 嵌入到我的托管 DLL 中，正如 Microsoft 在那里解释的那样：

[http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.dllimportattribute.dllimportattribute.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.dllimportattribute.dllimportattribute.aspx)

所以我将非托管 dll 文件添加到我的托管 dll 项目中，将属性设置为“嵌入式资源”并将 DLLImport 修改为：

```
[DllImport("Unmanaged Driver.dll, Wrapper Engine, Version=1.0.0.0,
Culture=neutral, PublicKeyToken=null",
CallingConvention = CallingConvention.Winapi)] 
```

其中“Wrapper Engine”是我的托管 DLL 的程序集名称“Unmanaged Driver.dll”是非托管 DLL

当我跑步时，我得到：

> 访问被拒绝。（来自 HRESULT 的异常：0x80070005 (E_ACCESSDENIED)）

我从 MSDN 和[http://blogs.msdn.com/suzcook/](http://blogs.msdn.com/suzcook/)看到这应该是可能的......

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2009-04-20T14:12:43.957

如果您在初始化期间自己将非托管 DLL 解压缩到临时目录，则可以将非托管 DLL 作为资源嵌入，并在使用 P/Invoke 之前使用 LoadLibrary 显式加载它。我已经使用过这种技术并且效果很好。正如 Michael 所指出的，您可能更愿意将它作为单独的文件链接到程序集，但是将它们全部放在一个文件中具有其优势。这是我使用的方法：

```
// Get a temporary directory in which we can store the unmanaged DLL, with
// this assembly's version number in the path in order to avoid version
// conflicts in case two applications are running at once with different versions
string dirName = Path.Combine(Path.GetTempPath(), "MyAssembly." +
  Assembly.GetExecutingAssembly().GetName().Version.ToString());
if (!Directory.Exists(dirName))
  Directory.CreateDirectory(dirName);
string dllPath = Path.Combine(dirName, "MyAssembly.Unmanaged.dll");

// Get the embedded resource stream that holds the Internal DLL in this assembly.
// The name looks funny because it must be the default namespace of this project
// (MyAssembly.) plus the name of the Properties subdirectory where the
// embedded resource resides (Properties.) plus the name of the file.
using (Stream stm = Assembly.GetExecutingAssembly().GetManifestResourceStream(
  "MyAssembly.Properties.MyAssembly.Unmanaged.dll"))
{
  // Copy the assembly to the temporary file
  try
  {
    using (Stream outFile = File.Create(dllPath))
    {
      const int sz = 4096;
      byte[] buf = new byte[sz];
      while (true)
      {
        int nRead = stm.Read(buf, 0, sz);
        if (nRead < 1)
          break;
        outFile.Write(buf, 0, nRead);
      }
    }
  }
  catch
  {
    // This may happen if another process has already created and loaded the file.
    // Since the directory includes the version number of this assembly we can
    // assume that it's the same bits, so we just ignore the excecption here and
    // load the DLL.
  }
}

// We must explicitly load the DLL here because the temporary directory 
// is not in the PATH.
// Once it is loaded, the DllImport directives that use the DLL will use
// the one that is already loaded into the process.
IntPtr h = LoadLibrary(dllPath);
Debug.Assert(h != IntPtr.Zero, "Unable to load library " + dllPath); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-14T17:34:32.930

这是我的解决方案，它是 JayMcClellan 答案的修改版本。将下面的文件保存到 class.cs 文件中。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;
using System.IO;
using System.Reflection;
using System.Diagnostics;
using System.ComponentModel;

namespace Qromodyn
{
    /// <summary>
    /// A class used by managed classes to managed unmanaged DLLs.
    /// This will extract and load DLLs from embedded binary resources.
    /// 
    /// This can be used with pinvoke, as well as manually loading DLLs your own way. If you use pinvoke, you don't need to load the DLLs, just
    /// extract them. When the DLLs are extracted, the %PATH% environment variable is updated to point to the temporary folder.
    ///
    /// To Use
    /// <list type="">
    /// <item>Add all of the DLLs as binary file resources to the project Propeties. Double click Properties/Resources.resx,
    /// Add Resource, Add Existing File. The resource name will be similar but not exactly the same as the DLL file name.</item>
    /// <item>In a static constructor of your application, call EmbeddedDllClass.ExtractEmbeddedDlls() for each DLL that is needed</item>
    /// <example>
    ///               EmbeddedDllClass.ExtractEmbeddedDlls("libFrontPanel-pinv.dll", Properties.Resources.libFrontPanel_pinv);
    /// </example>
    /// <item>Optional: In a static constructor of your application, call EmbeddedDllClass.LoadDll() to load the DLLs you have extracted. This is not necessary for pinvoke</item>
    /// <example>
    ///               EmbeddedDllClass.LoadDll("myscrewball.dll");
    /// </example>
    /// <item>Continue using standard Pinvoke methods for the desired functions in the DLL</item>
    /// </list>
    /// </summary>
    public class EmbeddedDllClass
    {
        private static string tempFolder = "";

        /// <summary>
        /// Extract DLLs from resources to temporary folder
        /// </summary>
        /// <param name="dllName">name of DLL file to create (including dll suffix)</param>
        /// <param name="resourceBytes">The resource name (fully qualified)</param>
        public static void ExtractEmbeddedDlls(string dllName, byte[] resourceBytes)
        {
            Assembly assem = Assembly.GetExecutingAssembly();
            string[] names = assem.GetManifestResourceNames();
            AssemblyName an = assem.GetName();

            // The temporary folder holds one or more of the temporary DLLs
            // It is made "unique" to avoid different versions of the DLL or architectures.
            tempFolder = String.Format("{0}.{1}.{2}", an.Name, an.ProcessorArchitecture, an.Version);

            string dirName = Path.Combine(Path.GetTempPath(), tempFolder);
            if (!Directory.Exists(dirName))
            {
                Directory.CreateDirectory(dirName);
            }

            // Add the temporary dirName to the PATH environment variable (at the head!)
            string path = Environment.GetEnvironmentVariable("PATH");
            string[] pathPieces = path.Split(';');
            bool found = false;
            foreach (string pathPiece in pathPieces)
            {
                if (pathPiece == dirName)
                {
                    found = true;
                    break;
                }
            }
            if (!found)
            {
                Environment.SetEnvironmentVariable("PATH", dirName + ";" + path);
            }

            // See if the file exists, avoid rewriting it if not necessary
            string dllPath = Path.Combine(dirName, dllName);
            bool rewrite = true;
            if (File.Exists(dllPath)) {
                byte[] existing = File.ReadAllBytes(dllPath);
                if (resourceBytes.SequenceEqual(existing))
                {
                    rewrite = false;
                }
            }
            if (rewrite)
            {
                File.WriteAllBytes(dllPath, resourceBytes);
            }
        }

        [DllImport("kernel32", SetLastError = true, CharSet = CharSet.Unicode)]
        static extern IntPtr LoadLibrary(string lpFileName);

        /// <summary>
        /// managed wrapper around LoadLibrary
        /// </summary>
        /// <param name="dllName"></param>
        static public void LoadDll(string dllName)
        {
            if (tempFolder == "")
            {
                throw new Exception("Please call ExtractEmbeddedDlls before LoadDll");
            }
            IntPtr h = LoadLibrary(dllName);
            if (h == IntPtr.Zero)
            {
                Exception e = new Win32Exception();
                throw new DllNotFoundException("Unable to load library: " + dllName + " from " + tempFolder, e);
            }
        }

    }
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-11-30T22:06:45.220

你可以试试[Costura.Fody](https://github.com/Fody/Costura)。文档说，它能够处理非托管文件。我只将它用于托管文件，它就像一个魅力:)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2009-03-20T16:10:35.557

我不知道这是可能的——我猜 CLR 需要在某处提取嵌入式本机 DLL（Windows 需要有一个文件供 DLL 加载它——它无法从原始内存加载图像），以及任何地方它试图做到这一点，该过程没有权限。

如果pronblem是创建DLL文件失败，SysInternals的[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)之类的东西可能会给你一个线索......

更新：

* * *

啊...现在我已经能够阅读 Suzanne Cook 的文章（该页面之前没有出现在我面前），请注意她不是在谈论将本机 DLL 作为资源嵌入到托管 DLL 中，而是作为*链接资源*- 本机 DLL 仍然需要是文件系统中自己的文件。

请参阅[http://msdn.microsoft.com/en-us/library/xawyf94k.aspx](http://msdn.microsoft.com/en-us/library/xawyf94k.aspx)，其中说：

> 资源文件不会添加到输出文件中。这与在输出文件中嵌入资源文件的 /resource 选项不同。

这似乎是向程序集添加元数据，使本机 DLL 在逻辑上成为程序集的一部分（即使它在物理上是一个单独的文件）。因此，将托管程序集放入 GAC 之类的事情将自动包含本机 DLL 等。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-09-07T20:32:12.587

也可以将 DLL 复制到任何文件夹，然后调用[SetDllDirectory](https://msdn.microsoft.com/en-us/library/windows/desktop/ms686203(v=vs.85).aspx)到该文件夹​​。那时不需要调用 LoadLibrary。

```
[DllImport("kernel32.dll", CharSet = CharSet.Unicode, SetLastError = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    static extern bool SetDllDirectory(string lpPathName); 
```

# .net - 在 .NET 中使用 System.IO.Ports.SerialPort 驱动 DTR

> ID：666805
> 
> 赞同：3
> 
> 时间：2009-03-20T16:03:37.277
> 
> 标签：.net, hardware, serial-port, components

我有一个传感器，它通过 USB 使用 RS232 从 PC 接收命令并将数据发送到 PC。

在向传感器发送命令之前，需要重置传感器（使用 DTR 线）。

我尝试使用内置的 .net 串行端口，但它似乎没有按预期驱动 DTR 线。我开始怀疑 DTREnable 属性是否真的驱动 DTR 引脚，或者它是否仅在握手期间启用它。

我可以在 Web 上找到的其他 SerialPort 实现也使用 Win32 API，但我发现使用这些实现关闭端口非常困难。如果我单步执行代码，我可以看到它卡在 WaitOne 命令上。

任何人都知道如何使用 System.IO.Ports.SerialPort 驱动 DTR？或者知道那里有一个好的组件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-23T14:50:13.197

我写这个是为了测试 DTR。它使用我的 USB 串口适配器按预期工作。我通过将电缆连接到我的 DataTracker（RS232 接线盒，带 LED）来检查它。DTR 确实发生了变化。

```
Private Sub Form1_FormClosing(ByVal sender As Object, ByVal e As System.Windows.Forms.FormClosingEventArgs) Handles Me.FormClosing
    SerialPort1.Close()
End Sub
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    SerialPort1.PortName = "COM5"
    SerialPort1.Open()
End Sub
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    SerialPort1.RtsEnable = True

    Debug.WriteLine("DTR +")
    System.Threading.Thread.Sleep(1000)

    SerialPort1.DtrEnable = True 'DTR -
    Debug.WriteLine("DTR -")
    System.Threading.Thread.Sleep(1000)

    SerialPort1.DtrEnable = False 'DTR +
    Debug.WriteLine("DTR +")
    System.Threading.Thread.Sleep(1000)

    SerialPort1.RtsEnable = False
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-24T12:26:11.413

检查电缆的引脚排列。它可能会导致问题。

[电缆引出线](http://www.lammertbies.nl/comm/cable/RS-232.html)

# php - 如何解决“致命错误：找不到类 'MySQLi'”？

> ID：666811
> 
> 赞同：113
> 
> 时间：2009-03-20T16:04:27.243
> 
> 标签：php, mysqli

我正在做一个教程，并收到此错误：

> 致命错误：第 8 行未找到“MySQLi”类（长 URL）

第 8 行的代码是：

```
$mysqli = new MySQLi($db_server, $db_user, $db_pass, $db_name); 
```

我在网上看到有人说要查看它是否在我的 phpinfo() 中打开，但是“mysqli”下没有列出任何内容。

另外，我正在运行 PHP 版本 5.2.5

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2009-03-20T16:07:34.473

听起来你只需要[安装 MySQLi](https://php.net/manual/en/mysqli.installation.php)。

如果您认为您已经这样做了但仍然有问题，请发布您的操作系统和任何其他可能有助于进一步诊断它的内容。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2009-03-21T21:12:28.850

您可以通过执行以下代码来检查 mysqli 库是否存在：

```
if (!function_exists('mysqli_init') && !extension_loaded('mysqli')) {
    echo 'We don\'t have mysqli!!!';
} else {
    echo 'Phew we have it!';
} 
```

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2014-03-20T06:35:15.720

如果您在[Ubuntu](http://en.wikipedia.org/wiki/Ubuntu_%28operating_system%29)上，请运行：

```
 sudo apt-get install php-mysqlnd 
```

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2015-03-09T02:06:14.573

如果您从命名空间的类中调用“new mysqli(..)”，您可能会看到类似的错误`Fatal error: Class 'foo\bar\mysqli' not found in`。解决这个问题的方法是使用前面的反斜杠将其显式设置为根命名空间，如下所示：

```
<?php 
$mysqli = new \MySQLi($db_server, $db_user, $db_pass, $db_name); 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2010-10-22T19:16:53.437

除了取消注释 php.ini 中的*php_mysqli.dll 扩展名外，还要取消注释 php.ini**中*的extension_dir*指令**并*指定您的位置：

 ***```
extension_dir = "C:\software\php\dist\ext" 
```

这使它对我有用。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-07-15T02:23:01.857

我的[操作系统](http://en.wikipedia.org/wiki/Operating_system)是[Ubuntu](http://en.wikipedia.org/wiki/Ubuntu_%28operating_system%29)。我通过使用解决了这个问题：

```
sudo apt-get install php5-mysql 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-04-24T13:22:27.930

如果你在 Docker 上...

在 php-container 内部运行：

```
#docker-php-ext-install mysqli

#apachectl restart 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-06-11T10:59:03.253

如何在 php.ini 中启用 mysqli

1.  通过删除 ';'（冒号）来编辑/取消注释 php.ini 中的以下配置： **1st**（取消注释并添加配置）：

    ```
    include_path = "C:\php\includes" 
    ```

    **第二**（取消注释）：

    ```
    extension_dir = "ext" 
    ```

    **第三**（取消注释并编辑配置）：

    ```
    extension=C:/PHP/ext/php_mysql.dll
    extension=C:/PHP/ext/php_mysqli.dll 
    ```

2.  重新启动 IIS 服务器
3.  确保系统上正在运行 mysql。

如何加载 php.ini 文件

1.  将文件 php.ini-production/php.ini-development 中的任何一个从 C:\PHP 重命名为 php.ini（注意现在扩展名为 ini，即“php.ini”）。
2.  重命名为 php.ini 文件后重启服务器
3.  查看 http://localhost/phpinfo.php 中的变化

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-03-20T16:08:48.433

好像你的安装有问题。

*   你安装了 MySQLi 吗？
*   你在php.ini中激活了吗？
*   重新启动 Apache 和/或 PHP-FPM？

[http://www.php.net/manual/en/mysqli.installation.php](http://www.php.net/manual/en/mysqli.installation.php)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-10-25T15:51:51.337

我想我可以帮助任何使用 Namesco 服务器遇到同样问题的人。在将数据库从家用电脑上的本地服务器移动到 namesco 后，我一直在尝试解决这个问题。他们不会提供帮助，他们说这是一个编码问题。

*   但是，从他们的 CPANEl LINUX 主机界面修复起来很简单。
*   点击php。
*   然后单击 php 模块，然后从其预装模块列表中单击 mysqli 框。
*   然后点击保存。（如果它在另一台服务器上工作，则无需更改代码。）

不幸的是，他们的支持文章是浪费时间。读完这篇文章后，我带着新的决心进入了管理界面。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-03-23T00:52:57.960

在全新安装 PHP 时，在 php.ini 中删除`;`之前。`extension_dir`

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-04-17T19:09:31.107

对于使用 docker 的任何人，我都遇到了这个问题，并通过使用我自己的 Dockerfile 而不是 php:fpm 图像来解决它：

```
FROM php:fpm

RUN docker-php-ext-install mysqli 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-11-16T01:55:50.517

一些发行版（例如[Gentoo](http://en.wikipedia.org/wiki/Gentoo_Linux)）支持 PHP 的多个安装，你必须确保你使用的是一个安装并启用了 mysqli 的发行版。

在 Gentoo 上，我安装了一个新的 PHP（启用了 mysqli USE 标志），但我需要激活新版本的 PHP（因为旧版本肯定缺少 mysqli）：

```
# eselect php list apache2
  [1]   php5.3 *
  [2]   php5.5
# eselect php set apache2 2
You have to run `/etc/init.d/apache2 restart' for the changes to take effect
# /etc/init.d/apache2 restart 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-07-18T08:03:54.210

我检查了以上所有内容，但对我不起作用，

我找到了一些步骤。

我在**Ubuntu 14.04上使用****PHP 版本 5.5.9-1ubuntu4.17**

 **首先检查文件夹

```
#ls /etc/php5/mods-available/
json.ini  mcrypt.ini  mysqli.ini  mysql.ini  mysqlnd.ini  opcache.ini  pdo.ini  pdo_mysql.ini  readline.ini  xcache.ini 
```

如果它不包含**mysqli.ini**，请阅读其他答案以安装它，

打开`php.ini`查找**extension_dir**

就我而言，我必须设置`extension_dir = /usr/lib/php5/20121212`

并重新启动 apache2 ：`/ect/init.d/apache2 restart`

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-03-12T02:26:59.597

PHP zip 包含 \ext 目录下的大多数常用扩展名（Windows 上的 *.dll，例如 php_mysqli.dll），但默认情况下不启用它们。尝试使用 MySQLi 时，您可能会遇到此致命错误：

```
( ! ) Fatal error: Uncaught Error: Class 'mysqli' not found in C:\myProject\ class.Database.php on line 24 
```

要启用扩展，请打开 php.ini（您可能需要先将 php.ini-development 复制为 php.ini），然后取消注释（或添加）这两行：

```
extension_dir = "ext" 
```

以及您遇到致命错误的任何特定扩展，即 mysqli：

```
extension=mysqli 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-07-25T17:40:04.177

在 ubuntu 上：

```
sudo apt-get install php-mysql
sudo service apache2 restart 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-11-01T19:58:27.707

经过长时间的分析过程，我找到了解决此问题的方法。在使用命令行功能正确测试我的 php 安装后，我发现 php 运行良好并且可以与 mysql 数据库一起使用。顺便提一句。您可以使用命令 php -f filename.php 使用 php 代码运行代码文件
所以我意识到，Apache 一定有问题。
我制作了一个文件，里面只有 phpinfo() 函数。
在这里，我看到，在
**Loaded Configuration File**
行中 我的配置文件没有加载，而是提到了（没有）。

最后我在 Apache 配置中找到了条目

```
<IfModule php5_module>
    PHPINIDir "C:/xampp/php"
</IfModule> 
```

但是我已经安装了 PHP 7，因此 Apache 无法加载 php.ini 文件，因为没有相应的条目。我添加了

```
<IfModule php7_module>
    PHPINIDir "C:/xampp/php"
</IfModule> 
```

重新启动 Apache 后一切正常。

我在我的 httpd-xampp.conf 文件中找到了上面的这些代码块。可能它在您配置的其他地方。
在同一个文件中，我在将 php 7 的设置替换为 php 5 版本之前进行了更改。

```
#
# PHP-Module setup
#
#LoadFile "C:/xampp/php/php5ts.dll"
#LoadModule php5_module "C:/xampp/php/php5apache2_4.dll"
LoadFile "C:/xampp/php/php7ts.dll"
LoadModule php7_module "C:/xampp/php/php7apache2_4.dll" 
```

正如你所看到的，我已经安装了 xampp 包，但这个问题只是在 Apache 方面。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-01-02T20:44:15.630

在**Debian 10上**

```
apt install php-mysql

/etc/init.d/apache2 restart 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-07-20T19:23:50.773

通过 PHP 安装 phpXX 扩展。以我的 FreeBSD 为例：

```
pkg install php74-extensions 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-09-12T02:27:56.287

我正在使用 xampp，我的问题在我重命名后得到解决：

```
extension_dir = "ext" 
```

到

```
extension_dir = "C:\xampp\php\ext" 
```

PS：进行此更改后不要忘记重新启动apache！

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2020-09-22T15:19:30.417

在 php.ini 中：

```
extension_dir ="c:/wamp64/bin/php/php7.4.9/ext/" 
```

确保 PHP 版本正确。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-11-11T12:12:23.593

1.  打开您的 PHP 文件夹。
2.  找到 php.ini-development 并打开它。
3.  寻找`;extension=mysqli`
4.  删除`;`符号
5.  保存文件并将文件扩展名从 php.ini-development 更改为 php.ini
6.  重启服务器并测试代码：

```
 if (!function_exists('mysqli_init') && !extension_loaded('mysqli')) {  
            echo 'We don\'t have mysqli!!!';  
     } else {  
         echo 'mysqli is installed';
     } 
```

7.  如果它不起作用，请将 php.ini 中的 extension_dir 从 "ext" 更改为 "c:\php\ext" 并将 extension=mysqli 更改为 extension=php_mysqli.dll 然后再次测试 **请记住每次测试时重置服务器**

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-04-14T08:58:45.613

您所要做的就是转到`php.ini`文件并在第 926 行（取决于版本）删除 #. 它应该如下所示：

```
;extension=ldap
;extension=mbstring
;extension=exif
extension=mysqli
;extension=oci8_12c
;extension=odbc 
```

保存文件并以管理员身份打开控制台 (cmd)。转到路径`Apache24 / bin`并输入`httpd -k restart`。此命令将重新启动您的服务器。之后，刷新页面，一切正常。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2021-07-09T03:35:15.983

当我尝试我的 PHP Web 应用程序时，它给了我同样的错误。

通过谷歌搜索，我发现我的安装缺少 PHP 服务器的 MySQL 插件。我使用的是 Ubuntu，所以当我尝试 PHP 的 MySQL 插件时，我发现有 2 个，

`php-mysql`和`php<version>-mysql`

我发出命令 -`php --version`在我的终端中，我有 php7.4，

我再次发出`apt install php7.4-mysql`

有效。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2021-09-02T10:01:06.677

此问题也可能是由 .htaccess 文件配置错误引起的。

* * *

## 回答 #26

> 赞同：-2
> 
> 时间：2014-10-20T11:08:52.547

```
<?php  /* If the error is due to calling mysqli in a class */

    class dbconnect extends mysqli{

        private $host = 'localhost';
        private $user = 'root';
        private $pass = '';
        private $db = 'test';

        public function __construct() {
            parent::__construct($this->host, $this->user, $this->pass, $this->db);

            if (mysqli_connect_error()) {
                die('Connect Error (' . mysqli_connect_errno() . ') ' .
                    mysqli_connect_error());
            }
        }
    }
?> 
```

# asp.net - ASP.NET 和一对多对多场景

> ID：666812
> 
> 赞同：0
> 
> 时间：2009-03-20T16:04:54.090
> 
> 标签：asp.net, sql-server, one-to-many

我是 ASP.NET 新手，但不是编程新手。我正在将我们当前的站点从 PHP/MySQL 迁移到 ASP.NET(3.5)/SqlServer。自从该网站启动以来，我一直潜伏在这里，所以我相信你们中的一个（或多个）可以帮助我。这是场景：

这是一个培训部门网站和部门。有一个课程目录存储在表中`course`。每门课程可能有许多先修课程，例如，A 和 B 是 C 的先修课程。我通常会将其作为逗号分隔的列存储在单独的表中或`course`单独的表中`course_prereq`，或者`course_course`作为递归关系存储。这部分我可以做。

但是，业务规则要求每门课程可以有多组先决条件。例如，`N`需要和`A`，或需要和。这就是我卡住的地方。`B``C``N``X``Y`

以前，我将此信息存储在 row `N`as的列中`A,B,C|X,Y`，将 id 解析为 PHP 2D 数组，为 id 在该数组中的所有行提交第二个查询，然后使用 PHP 将这些行分成各自的组。完成所有这些处理后，先决条件组将在网页上显示为单独的表格，如下所示：

> `| A | A's information goes here |
> | B | B's information goes here |
> | C | C's information goes here |
> - - - - - - - OR - - - - - - - -
> | X | X's information goes here |
> | Y | Y's information goes here |`

我将如何使用 ASP.NET 完成此任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-20T16:10:51.937

添加要保存的表格`Prerequisite Sets`。该表为该组中的每门课程保存一个组 ID 和返回课程表的键。对于给定的集合 ID，该表可能有几行，因此您的主键将是集合 ID*加上*课程 ID。然后在您的`course_prereq`表格中将课程与不同的先决条件集相关联。`OR`可以在那里假设一个关系，因为任何`AND`s 都在集合 thesevles 中强制执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T16:13:49.793

有一个名为 PrerequisiteSet 的表，它对每个 prereq 进行 FK。然后有一个 Course_PrerequisiteSet 多对多表，该表对 Course 和 PrerequisiteSet 进行了 FK。大多数情况下 Course_PrerequistieSet 中只会有一个条目，但如果有多个条目，那么它将是 OR 关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-24T14:52:04.403

上面的两个答案都非常有帮助。我最终只使用了一个数据库表，而不是建议的两个。该表包含一个`course_id`、`prereq_id`和`set_id`，它们共同构成主键。

在 ASP.NET 页面中，我使用转发器循环返回课程的先决条件集的 sqldatasource 存储过程，并使用该转发器内的 gridview 从第二个 sqldatasource 存储过程读取各个先决条件信息。像这样：

> `RepeaterSqlDataSource`（返回设置 ID）
> `Repeater`
> 。. . `GridViewSqlDataSource`（返回 set 中每个 prereq_id 的课程信息
> ......`GridView`

希望这对其他看到类似情况的人有所帮助。

# c# - 从 c# 调用的 Selenium Java 进程无法在 CCNET 构建服务器上正确启动

> ID：666813
> 
> 赞同：0
> 
> 时间：2009-03-20T16:05:08.380
> 
> 标签：c#, java, shell, selenium, cruisecontrol.net

我正在设置 CCNET 服务器来运行 Selenium 测试。在我的测试代码中，如果 Selenium RC 服务器未运行，我将使用以下代码启动它：

```
var proc = new Process();
proc.StartInfo.WorkingDirectory = Path.Combine(Directory.GetParent(Assembly.GetExecutingAssembly().Location).FullName, @"..\..\..\..\..\lib\SeleniumRC\selenium-server-1.0-beta-2");
proc.StartInfo.FileName = "java"; //have also tried with "java.exe"
proc.StartInfo.Arguments = @"-jar selenium-server.jar -multiWindow -trustAllSSLCertificates -firefoxProfileTemplate ""..\Firefox Profiles\Relaxed Security""";
proc.StartInfo.UseShellExecute = true;
proc.Start(); 
```

这在我的开发机器上效果很好。但是，当我从 CCNET.exe（在用户上下文中）运行它时，我可以看到不是执行 java.exe 进程，而是为“c:\windows\java”弹出一个资源管理器窗口。我认为我的路径设置搞砸了，但我不确定如何。你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-20T16:19:29.577

您是否尝试过在运行它的用户上下文下的命令提示符下进入该工作目录并尝试命令行？

如果路径设置混乱，您可以通过右键单击我的电脑、属性、高级、环境变量...来调整它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-02-16T13:49:26.640

我这样做是为了在后台启动服务器：

```
// Start the java server
Process seleniumServer;
String javaFileLocation = @"C:\Program Files\Java\jre6\bin\java.exe";
String jarFileLocation = @"C:\SeleniumRC\selenium-remote-control-1.0.1\selenium-server-1.0.1\selenium-server.jar";
seleniumServer = new Process();
seleniumServer.StartInfo.FileName = javaFileLocation;
seleniumServer.StartInfo.Arguments = "-jar " + jarFileLocation;
seleniumServer.StartInfo.WorkingDirectory = jarFileLocation.Substring(0, jarFileLocation.LastIndexOf("\\"));
seleniumServer.StartInfo.UseShellExecute = true;
seleniumServer.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
seleniumServer.Start(); 
```

然后就做了

```
seleniumServer.Kill() 
```

一切顺利后停止它。

不确定这将有助于 CCNET 的情况，但可能会帮助人们在未来寻找这个？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-02T13:36:17.613

我用这个

公共类 Navegador : DefaultSelenium { 私有静态 int contadorPorta = 4444;

```
 private int porta;

    private delegate string OperacaoSelenium();

    // Variável para a URL Base
    private string urlBase;
    public string UrlBase
    {
        get { return urlBase; }
    }

    public Navegador(string urlBase)
        : base("localhost", contadorPorta, "*firefox", urlBase) // ou *firefox ou *chrome *safari, *opera , *iexplore etc.
    {
        this.urlBase = urlBase;

        porta = Navegador.contadorPorta;
        // Deve sempre abrir o Selenium RC-Server antes (instância única - Singleton)
        this.IniciarSeleniumRCServer();
        Navegador.contadorPorta++;

        this.Start();
        this.Open("/");
    }

    /// <summary>
    /// Inicia o Selenium RC-Server, que é o arquivo JAR que vem no pacote do Selenium RC
    /// </summary>
    private void IniciarSeleniumRCServer()
    {
        string seleniumParameters = "..\\..\\..\\ExternalLibraries\\selenium-remote-control-1.0-beta-1\\selenium-server-1.0-beta-1\\selenium-server.jar -Dhttp.proxyHost=10.100.100.24 -port " + porta + "";
        procSeleniumServer = System.Diagnostics.Process.Start("java.exe", " -jar " + seleniumParameters);
        System.Threading.Thread.Sleep(1000);
    } 
```

效果很好..但不在代理下-.-'

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-03-05T13:19:54.810

**SeleniumProcess 类**

```
public class SeleniumProcess
    {
        private static Process _seleniumServer;

        public static void Start()
        {
            _seleniumServer = new Process
                                  {
                                      StartInfo =
                                          {
                                              FileName = "java",
                                              Arguments =
                                                  "-jar ../../../References/" +
                                                  "selenium-remote-control-1.0.3/" +
                                                  "selenium-server-1.0.3/" + "selenium-server.jar -port 4444"
                                          }
                                  };
            _seleniumServer.Start();
        }

        public static void Stop()
        {
            _seleniumServer.Kill();
        }
    } 
```

# 区域设置/拆卸

```
 [SetUp]
    public void SetupTest()
    {
        SeleniumProcess.Start();
    }

    [TearDown]
    public void TeardownTest()
    {
        try
        {
            _selenium.Stop();
        }
        catch (Exception)
        {
            // Ignore errors if unable to close the browser
        }
        SeleniumProcess.Stop();
        Assert.AreEqual("", _verificationErrors.ToString());
    }

    #endregion 
```

# windows - 在 win XP 命令行中同时将输出重定向到多个文件和标准输出

> ID：666815
> 
> 赞同：4
> 
> 时间：2009-03-20T16:05:49.343
> 
> 标签：windows, command-line, redirect, stream, cmd

我想将命令的输出重定向到文件和标准输出。我正在使用 Windows XP 命令行。

我意识到 linux 中有一个名为 tee 的命令可以执行此操作，但我希望在 windows 中使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-20T16:16:15.247

[谷歌搜索windows tee](http://www.google.com/search?q=windows+tee)时的第一次点击为 Windows提供了[UNIX 风格的 tee 实用程序](http://www.chipstips.com/?p=129)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-20T16:14:27.407

简单的 DOS shell 无法同时执行此操作。
尝试使用：

[Windows PowerShell](http://www.microsoft.com/windowsserver2003/technologies/management/powershell/default.mspx)

或者

[赛格温](http://www.cygwin.com/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-20T16:14:51.693

[为窗户](http://www.google.com/search?q=tee+for+windows)使用三通。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-20T20:11:36.727

如果使用`tee`（各种 Windows 变体之一）不是一个选项，并且该命令不是长时间运行的，或者您不需要实时进一步处理输出，那么

```
command > file && type file 
```

会为你做的。但仅在上述情况下。您可能最好使用`tee`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-20T16:22:52.750

如果您使用的是体面的外壳，PowerShell 有`tee-object`（标准别名）。`tee`

# debugging - 这个算法有什么问题？

> ID：666820
> 
> 赞同：-1
> 
> 时间：2009-03-20T16:07:06.893
> 
> 标签：debugging, language-agnostic

这是错误的抽象形式，它引导我进入构成[我之前问题](https://stackoverflow.com/questions/659117/whats-a-good-way-to-structure-variable-nested-loops)基础的代码。一旦你看到它就很明显，但是几个熟悉原始问题和原始语言的专业程序员在我们发现它之前查看了代码并忽略了这个错误（诚然，在它的原生环境中它接近三页长）。

**请[混淆您的回答](http://www.rot13.com/index.php)，以便迟到者也能获得一些乐趣。**

```
most_bang_for_buck_score = 0.0
most_bang_for_buck_order = []
for appetizer in appetizers
    total_cost     = appetizer.cost
    total_calories = appetizer.calories
    for salad in salads
        total_cost     = total_cost     + salad.cost
        total_calories = total_calories + salad.calories
        for entree in entrees
            total_cost     = total_cost     + entree.cost
            total_calories = total_calories + entree.calories
            for desert in deserts
                total_cost     = total_cost      + desert.cost
                total_calories = total_calories + desert.calories
                if total_calories/total_cost > most_bang_for_buck_score
                    most_bang_for_buck_score = total_calories/total_cost
                    most_bang_for_buck_order = [appetizer,salad,entree,desert]
 print "You'll get the most food energy for your money ordering ",most_bang_for_buck_order,"\n" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-20T16:10:25.637

[**ROT13（或悬停在此链接上以将非混淆答案作为工具提示查看）**](http://www.rot13.com/index.php "我认为您不会在每次通过时都重置 total_cost/total_calories。 您应该只在最内层循环中对所有内容进行一次总结。 顺便说一句，您将订单保存为每个项目之一，我假设您只应该拥有每个食品类别中的一个。")

V qba'g guvax lbh'er erfrggvat gbgny_pbfg/gbgny_pnybevrf ba rnpu cnff。Lbh bhtug gb whfg 或 fhzzvat rirelguvat hc bapr va gur vaarezbfg ybbc。

Ol gur jnl lbh fnir gur beqre nf bar bs rnpu vgrz、V'z nffhzvat lbh'er bayl fhccbfrq gb 或 univat bar bs rnpu sbbq pngrtbel。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-20T16:18:59.080

Sbe rnpu vgrz (nccrgvmre, fnynq, ragerr, qrffreg) lbh'er nqqvat gur pbfg bs gur arj vgrz, ohg lbh'er abg fhogenpgvat bhg gur pbfg bs gur cerivbhf vgrz sebz gur fnzr pngrtbel。Guvf jvyy pnhfr lbh gb fhz gur gbgny pbfg bs nyy vgrzf va nyy pngrtbevrf, vafgrnq bs nyy pbzovangvbaf。

[ROT13](http://www.rot13.com/index.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-20T17:09:06.867

Vf vg ernyyl guvf rnfl？Lbh'er abg erfrggvat gbgny_pbfg 是 gbgny_pnybevrf var rnpu ybbc vgrengvba。

V pna frr ubj gur oht jbhyq 或 uneq gb fcbg ol ybbxvat ng gur bhgchg, gubhtu。Gur engvb bs gur gjb inyhrf zvtug abg punatr zhpu rira nf gurve inyhrf terj ovttre。

[ROT13，悬停以查看未混淆为工具提示](http://www.rot13.com/index.php "真的这么容易吗？ 您不会在每次循环迭代中重置 total_cost 或 total_calories。 不过，我可以通过查看输出来了解该错误是如何难以发现的。 即使它们的值变大，这两个值的比率也可能不会有太大变化。")

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-26T23:50:47.050

因此，从其他帖子中可以清楚地看到答案。我将使用这个空间在函数式语言（Haskell）中做到这一点，这种错误不会发生。

假设（成本，卡路里）元组列表，只需获得最高分数很容易：

```
let bang (cost, cal) = cal / cost
 in maximum [bang c1 + bang c2 + bang c3 + bang c4 | 
                                 c1 <- appetizers,
                                 c2 <- salads,
                                 c3 <- entrees,
                                 c4 <- deserts] 
```

如果您将数据表示为 (name, (cost, calorie)) 的元组，那就更烦人了。最好的方法是定义一个使用“关键”参数的最大函数，就像在 Python 中一样（可能已经有一个，但我不知道）。然后，您只需执行以下操作：

```
maximumkey snd [([n1, n2, n3, n4], bang c1 + bang c2 + bang c3 + bang c4) | 
                      (n1, c1) <- appetizers,
                      (n2, c2) <- salads,
                      (n3, c3) <- entrees
                      (n4, c4) <- deserts] 
```

* * *

完成解决方案。这是（大致）如何`maximum`定义的：

```
maximum xs = foldl1 max xs 
```

也是这样`maximumkey`：

```
maximumkey f xs = foldl1 (\(a,b) -> if (f a) > (f b) then a else b) xs 
```

注意：这有点低效，因为它对每个元素多次调用“f”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-20T17:00:10.353

V thrff nyy gur cebqhpgf fubhyq 或 grfgrq gbtrgure ：

nccrgvmref *ragerrf* fnynqf*qrfregf = gbgny pbzcnevfbaf

jurernf urer vg frrzf yvxr gurer'f nyjnlf gur fnzr cebqhpg bs gur svefg vgrzf pbzcnerq gb rnpu bs gur qrfregf (vr 7 pbzcnevfbaf sbe 7 qrfregf)。vfa'g vg ?

...znlor V whfg qba'g trg gur nofgenpgvba :)

ogj，guvf ebg13 fvgr vf terng :)

[http://www.rot13.com/index.php](http://www.rot13.com/index.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-28T03:00:32.443

> 不知道如何计算沙漠中的卡路里数量，但我想与成本相比，它会微不足道，尤其是在当今的经济环境下，假设整个沙漠都在出售。
> 
> 假设`total_calories`和`total_cost`是某种整数数据类型，每个`most_bang_for_buck_score`都将为零。
> 
> 我猜算法总是打印每门课程的第一个元素。

# c# - 在窗口化应用程序中写入命令行

> ID：666823
> 
> 赞同：2
> 
> 时间：2009-03-20T16:08:35.407
> 
> 标签：c#, .net, user-interface, console

我试图让我的基于 WinForm 的 C# 也与命令行合作，但我很难让它发挥得很好。例如，我有这个代码：

```
 [STAThread]
    static void Main(string[] args) {
        foreach (string s in args) {
            System.Windows.Forms.MessageBox.Show(s);
            Console.WriteLine("String: " + s);
        }

        Mutex appSingleton = new System.Threading.Mutex(false, "WinSyncSingalInstanceMutx");
        if (appSingleton.WaitOne(0, false)) {
            try {
                Application.EnableVisualStyles();
                Application.SetCompatibleTextRenderingDefault(false);

                //start logger
                Logger.singleton.makeOpen(true);
                Application.Run(new MainForm(false));
            } catch (Exception) {
            } finally {
                appSingleton.Close();
                Logger.singleton.makeOpen(false); 
            }
        } else {
            System.Windows.Forms.MessageBox.Show("Sorry, only one instance of WinSync can be ran at once.");
        }
    }
} 
```

它应该使用 Console.WriteLine 写入控制台，但我什么也没看到，只有 MessageBox 出现。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-21T05:16:01.457

尝试 AttachConsole(-1) 重定向 Console.Out，为我工作：

```
using System;
using System.Collections.Generic;
using System.Windows.Forms;
using System.Runtime.InteropServices;

namespace PEFixer
{
    static class Program
    {
        [DllImport("kernel32.dll")]
        private static extern bool AttachConsole(int dwProcessId);

        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static int Main(string[] args)
        {
            if (args.Length > 0)
            {
                AttachConsole(-1);
                return Form1.doTransformCmdLine(args);
            }
            else
            {
                Application.EnableVisualStyles();
                Application.SetCompatibleTextRenderingDefault(false);
                Application.Run(new Form1());
            }
            return 0;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-20T16:11:14.200

Windows 应用程序模型让它有点痛苦。您需要将应用程序类型更改为控制台（在属性中），它应该会神奇地开始工作。无论如何，您的表单都会出现，因为它是由自动生成的代码显式创建的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-20T16:44:52.607

我的建议是创建一个 Windows 应用程序，然后 P/Invoke 以获得一个控制台。IE：

```
public Form1()
{
   [DllImport("kernel32.dll")]
   public static extern bool AllocConsole();

   [DllImport("kernel32.dll")]
   public static extern bool FreeConsole();

   public Form1()
   {
      AllocConsole();
      Console.WriteLine("Whatever.");
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-25T22:18:34.710

在玩了这个之后，看到了 AllocConsole 和 AttachConsole 的注意事项，我认为最好的办法是拥有两个 .NET exe 文件，比如 foo.exe 和 fooconsole.exe。当您需要控制台输出时，请使用 fooconsole.exe。

除 main 函数之外的所有代码都可以放入生成 DLL（类库）的 .NET 项目中。这包括所有获胜表格，包括您的主窗口。exe 项目中唯一剩下的是一个小的 main 函数，它反过来调用 DLL 中的静态函数。所有这些都可以在不借助 P-Invoke 的情况下完成。

在您的 DLL 类库中：

```
using System;
using System.Windows.Forms;

namespace MyNamespace
{
    public class MainEntry
    {
        private static bool mIsConsole = false;

        private MainEntry() { }

        public static bool IsConsoleApp
        {
            get { return mIsConsole; }
        }

        public static int DoMain(string[] args, bool isConsole)
        {
            mIsConsole = isConsole;
            try
            {
                // do whatever - main program execution
                return 0; // "Good" DOS return code
            }
            catch (Exception ex)
            {
                if (MainEntry.IsConsoleApp)
                {
                    Console.Error.WriteLine(ex.Message);
                }
                else
                {
                    MessageBox.Show(ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
                }
                return 1; // "Bad" DOS return code indicating failure
            }
        }
    }
} 
```

在您发出 Windows EXE (foo.exe) 的项目中，这是唯一的代码：

```
using System;

namespace MyNamespace
{
    static class Program
    {
        [STAThread]
        static int Main(string[] args)
        {
            return MainEntry.DoMain(args, false);
        }
    }
} 
```

在您发出控制台 EXE (fooconsole.exe) 的项目中，这是唯一的代码：

```
using System;

namespace MyNamespace
{
    static class Program
    {
        [STAThread]
        static int Main(string[] args)
        {
            return MainEntry.DoMain(args, true);
        }
    }
} 
```

当然，在这两个 EXE 项目中，您都需要在同一个解决方案中引用 DLL 项目。在项目属性的应用程序选项卡上，您可以更改项目类型 - Windows 应用程序 (EXE)、控制台应用程序 (EXE) 或类库 (DLL)。

请注意，可以以编程方式确定 EXE 文件是否使用 windows 或控制台子系统，但这可能不值得 - 大量的 P-Invoke 并且您必须查看 EXE 文件的 PE 标头的字节。

此外，AllocConsole/AttachConsole 方法很有趣，因为如果您从命令行或批处理文件运行程序，并尝试将输出（stdout 和/或 stderr）重定向到文件，它将不起作用 - 它不会转到文件。见[http://www.nabble.com/WIN32:-Spawning-a-command-line-process-td21681465.html](http://www.nabble.com/WIN32:-Spawning-a-command-line-process-td21681465.html)

同样，可以解决，但它需要更多的 P-Invoke 并且可能不值得。

作为最佳实践，我从来没有在 EXE 项目中添加过简单的 Main 函数，该函数又调用 DLL 中的静态函数。有很多原因，但一个很好的原因是单元测试工具与 DLL 相比与 EXE 更有效。

还要注意 Main 函数的形式，它接受一个 args 的字符串数组，并返回一个 int。这是最好的使用形式，因为您可以在批处理文件中使用 ERRORLEVEL 来处理您的 EXE 返回的任何数字 - 传统上 0 表示成功，大于 0 表示失败。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-20T16:11:04.963

您是从 Visual Studio 以调试模式 (F5) 运行它，还是从命令行运行它？在 VS 中，您会在“输出”选项卡 (Ctrl+Alt+O) 中看到控制台输出。否则，没有可写入的控制台。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-20T16:13:45.830

你需要用它做什么？

如果它用于调试（因为用户永远不会看到控制台），那么我建议使用 Debug.WriteLine()。然后应该毫无问题地进入控制台......

# sql-server - 在 SQL Server 2005 中创建一个新的 db 用户

> ID：666828
> 
> 赞同：8
> 
> 时间：2009-03-20T16:09:49.430
> 
> 标签：sql-server, sql-server-2005, tsql, sql

如何在 sql server 2005 中创建具有密码的新数据库用户？

我将需要此用户/密码才能在连接字符串中使用，例如：

```
uid=*user*;pwd=*password*; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-03-20T16:18:04.713

```
CREATE LOGIN [user] WITH PASSWORD='password', 
       DEFAULT_DATABASE=[your_db], CHECK_POLICY=OFF
GO

CREATE USER [user] FOR LOGIN [user]
EXEC sp_addrolemember N'db_datareader', N'your_db'
EXEC sp_addrolemember N'db_datawriter', N'your_db'
GO 
```

在哪里`CHECK_POLICY=OFF`关闭密码复杂性检查等

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-20T16:15:40.740

从 SQL Server 2005 开始，您基本上应该分两步创建用户：

*   为整个 SQL Server 创建一个“登录”
*   在所需的每个数据库中为此登录创建用户

你会这样做：

```
CREATE LOGIN MyNewUser WITH PASSWORD = 'top$secret'; 
```

并“使用”您的数据库并为该登录创建一个用户：

```
USE AdventureWorks;
CREATE USER MyNewUser FOR LOGIN MyNewUser 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-21T17:19:52.293

如上所述，使用 CREATE LOGIN 创建以该帐户连接到 SQL Server 的能力。然后在数据库中使用 CREATE USER 使该登录能够访问相关数据库。

但是，基于其中一些评论的一些安全点：

*   如果可能的话，您希望使用 Windows 身份验证，而不是基于 SQL Server 的登录（当您以这种方式使用 user/pwd 时，您正在执行此操作）。如果您从与 SQL Server 位于同一域的计算机上运行，​​则可以使用作为 Windows 用户帐户的服务帐户。这确保了域是安全的单一来源。
*   你没有说用户需要什么权限。尽可能避免使用 db_datareader 和 db_datawriter 角色。他们提供对表和视图的**隐式**访问，如果有人正在对数据库执行快速权限检查，他们可能不会考虑检查这些角色的成员资格。这意味着您的安全报告正在使用。最佳实践是创建自己的数据库角色，为其分配权限，并使用户成为该角色的成员。
*   尽可能使用强密码。一个示例关闭了密码策略。SQL Server 将使用来自本地服务器的密码策略（通常在域级别设置）。如果可能，您希望维护该强密码策略。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-20T16:26:33.633

您必须首先以用户身份创建它，然后为用户设置正确的权限。

1.  您必须确保您的数据库配置了用户身份验证和 SQL 身份验证如果使用 Management Studio：右键单击服务器，选择“安全”确保服务器身份验证为“SQL Server 和 Windows 身份验证模式”

2.  在Security-logins中，右键选择“New Login”，选择SQL Authentication，使用你喜欢的用户名和密码。

    ```
    USE [master]
    GO
    CREATE LOGIN [ test] WITH PASSWORD=N'test', DEFAULT_DATABASE=[MY_DATABASE], CHECK_EXPIRATION=OFF, CHECK_POLICY=OFF
    GO 
    ```

3.  在您想要的数据库上，在安全性、用户中，选择新用户。选择一个用户名，并附上您刚刚创建的登录名，然后选择您要应用到该用户的角色（即`db_datareader`, `db_datawriter`）：

    ```
    USE [MY_DATABASE]
    GO
    CREATE USER [myDefaultUser] FOR LOGIN [ test]
    GO
    USE [MY_DATABASE]
    GO
    EXEC sp_addrolemember N'db_datareader', N'myDefaultUser'
    GO
    USE [MY_DATABASE]
    GO
    EXEC sp_addrolemember N'db_datawriter', N'myDefaultUser'
    GO 
    ```

这就对了。现在您可以使用此密码创建连接字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-05-07T11:52:42.413

```
CREATE LOGIN MyNewUser WITH PASSWORD = 'top$secret'

USE AdventureWorks 
CREATE USER MyNewUser FOR LOGIN MyNewUser 
GO 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-03-20T16:14:29.403

```
USE [MASTER]

EXEC master.dbo.sp_addlogin @loginame = N'USERNAME', @passwd = 'THEPASS' @defdb = N'master', @deflanguage = N'us_english'

USE [YOUR_DB]
    EXEC dbo.sp_grantdbaccess @loginame = N'USERNAME', @name_in_db = N'USERNAME' 
```

# asp.net - NHibernate 分页和绑定到 Gridview

> ID：666830
> 
> 赞同：2
> 
> 时间：2009-03-20T16:09:57.713
> 
> 标签：asp.net, nhibernate, gridview

我有一个绑定到 IList 的 Gridview。我想要分页“更安全的方式”（只获取我需要的项目），所以我在我的存储库上创建了一个方法，如下所示

```
public Ilist<Item> GetItems(int from, int number){ ... } 
```

问题是当我绑定它时，它只显示 n 项，而不显示分页控件。我试图找到告诉gridview我的结果集中有多少元素的方法

```
public int CountItems{ get{ ... } } 
```

但是我没有找到告诉GV这个值的地方。

这里的策略是什么？有必要有一个ObjectDS吗？我拒绝这样相信！

我可以做些什么来进行分页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-06-21T20:20:49.880

NHibernate 有一个将 IQueryable 转换为 DataTable 的本地类。您需要创建一个 ObjectDataSource 并从 Nhybernate 中的 DAO 提供它。ObjectDataSource 需要一个 DataTable 来进行分页、过滤、编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-20T16:59:50.807

不幸的是，您确实需要一个对象数据源或实现一个自定义数据源。这是提到它的 msdn 文档的链接[http://msdn.microsoft.com/en-us/library/5aw1xfh3.aspx](http://msdn.microsoft.com/en-us/library/5aw1xfh3.aspx)。Datagrid 确实支持做你想做的事，但 ms 并没有为 GridView 做同样的事情。

我想一个选择是创建某种虚拟的自定义数据源，这将公开您仍然需要控制它之外的过程的方法/事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-04-06T07:05:34.820

[在使用 NHibernate 在 ASP.NET gridview 中实现分页](http://lexicalclosures.blogspot.com/2009/01/paging-in-aspnet-using-nhiberate.html)时，我也遇到了同样的问题。 如果您实现自己的分页功能，这是 GridView 令人沮丧的限制。

当时，我看到的仅有的三个选项是：

1.  创建实现与 GridView 控件交互的自定义​​导航功能的单独用户控件
2.  创建一个继承自 GridView 控件的派生类并添加自定义导航功能
3.  使用 ObjectDataSource

我选择了#1 的基本实现，因为它比#2 更简单，并且比使用#3 更可取，因为它与我们在项目中使用的模型-视图-演示者模式（以及使单元测试更加困难）。

# c# - 在实体框架中保存多对多关系对象

> ID：666833
> 
> 赞同：1
> 
> 时间：2009-03-20T16:10:19.863
> 
> 标签：c#, entity-framework, many-to-many

我正在尝试在实体框架中保存构成多对多关系一部分的实体，但出现错误：无法更新 EntitySet 'zRM_OP_defaultloccvgsMapping'，因为它有一个 DefiningQuery 并且元素中不存在元素支持当前的操作。

我的 google-fu 在这方面很弱，但我知道我可能必须编辑设计器代码并连接一个存储过程才能手动插入。

我的表结构如下所示：

地点：LOCID，等等。

覆盖范围：CVGID，等等。

loccvgs：LOCID、CVGID（无键）

帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-02-28T01:27:28.780

我有这个确切的问题，但我想出了一个解决方案。不过我会警告你，这真的很糟糕。在我的情况下，我有 3 张桌子：

视频 - VideoId , int , PK - blah

Comment - CommentId, int, PK - UserId, int (发表评论的用户) - CommentText, string

VideoComments - VideoId, int, PK - CommentId, int, PK

首先，为了让实体框架正确设置关系，关联表上的两列（在我的例子中是 VideoComments）必须是主键。

也就是说，这就是我添加新评论的方式。

```
 public VideoDTO AddCommentToVideo(VideoDTO pVideo, CommentDTO pComment)
        {
            Video video = context.Videos.Where(v => v.VideoId == 
        pVideo.VideoId).FirstOrDefault();
            User user = context.Users.Where(u => u.UserId == 
        pComment.User.UserId).FirstOrDefault();
            Comment comment = new Comment();
            comment.CommentText = pComment.CommentText;
            comment.User = user;
            comment.Videos.Add(video);
            context.AddToComments(comment);
            context.SaveChanges();

            return pVideo;
        } 
```

这很糟糕……就像过河一样糟糕。我做了 2 次查询以获取 Entity Framework 要求的完整对象，以便创建新评论。我想要一种更好的方法来做到这一点，但我不知道。也许这会有所帮助。

# java - 为什么带有 jdk1.5 的 JAXB 2.0 无法识别以数字开头的字符串枚举？

> ID：666845
> 
> 赞同：2
> 
> 时间：2009-03-20T16:11:45.383
> 
> 标签：java, jaxb, jdk1.5

以下是我用来尝试生成 JAXB 类的示例模式。我注意到的是，当我有一个带有枚举的字符串类型时，例如，在我的例子中是 stepType，其值以数字开头，JAXB 不会生成一个单独的枚举类，比如 StepType 类。当我只使用字母作为值时，它工作正常。有人可以告诉这是否是一个已知的错误吗？

```
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema xmlns:xsd = "http://www.w3.org/2001/XMLSchema">

<xsd:element name="WorkoutSchedule" >
  <xsd:complexType>
    <xsd:sequence>
      <xsd:element name="WorkoutSchedule" minOccurs = "0" maxOccurs="unbounded">
      <xsd:complexType>
        <xsd:sequence>
          <xsd:element name="ScheduleItem" minOccurs="1" maxOccurs="1">
          <xsd:complexType>
          <xsd:sequence>
            <xsd:element name="Step" minOccurs="1" maxOccurs="1" type="stepType"/>
          </xsd:sequence>
          </xsd:complexType>
          </xsd:element>
        </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
    </xsd:sequence>
  </xsd:complexType>
</xsd:element>

<xsd:simpleType name="stepType">
  <xsd:restriction base="xsd:string">
    <xsd:enumeration value="1stStep"></xsd:enumeration>
    <xsd:enumeration value="2ndStep"></xsd:enumeration>
    <xsd:enumeration value="3rdStep"></xsd:enumeration>
  </xsd:restriction>
</xsd:simpleType>

</xsd:schema> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-22T01:33:30.220

JAXB 必须创建有效的 Java 代码，因此它必须遵守 Java 特定的命名规则。

Java 的枚举必须具有特定于 Java 的命名，这对于类、方法、字段等都是相同的……名称不允许以数字开头。

您可以使用 JAXB 将现有 Java 枚举编组为具有自定义名称的 XML 模式，方法是使用覆盖它们

```
/* some JAXB annotations go here */
enum MyEnum{
    @XmlEnumValue(name="1")
    ONE,
    @XmlEnumValue(name="2")
    TWO
} 
```

相反的过程是通过一些“解决方法”完成的：

```
<xsd:simpleType>
    <xsd:annotation>
        <xsd:appinfo>
        <jxb:typesafeEnumClass name="MyEnum">
            <jxb:typesafeEnumMember name="ONE" value="1"/>
            <jxb:typesafeEnumMember name="TWO" value="2"/>
        </jxb:typesafeEnumClass>
        </xsd:appinfo>
    </xsd:annotation>
    <xsd:restriction base="xsd:int">
        <xsd:enumeration value="1"/>
        <xsd:enumeration value="2"/>
    </xsd:restriction>
</xsd:simpleType> 
```

# iis - IIS SMTP 邮件检查

> ID：666853
> 
> 赞同：3
> 
> 时间：2009-03-20T16:13:43.943
> 
> 标签：iis, smtp

有没有办法在消息到达 IIS 上的 SMTP 之前查看或查看消息。这不是 Exchange Server，它只是运行 SMTP。我正在尝试查看是否可以查看邮件然后将其传递给 SMTP？

谢谢

编辑〜而不是添加另一个侦听器，我想知道是否有一种方法可以绑定到默认的 SMTP 侦听器并拦截消息然后传递它。

第二次编辑~好的，这是我的问题。我的交换箱前面有一个垃圾邮件过滤器，不幸的是（由于软件设计）过滤器在“目录收集查找”方面受到限制。这是检查电子邮件地址是否存在于 AD 中的过程，如果不存在则丢弃邮件。如果 AD 中不存在其中一个地址，那么我当前的过滤器会丢弃邮件，这是不好的。我和供应商谈过了，他们目前无能为力。我正在寻找在此过滤器前面放置一个应用程序，该应用程序将拦截（打开、读取、解析）邮件、验证地址，然后将电子邮件传递给过滤器以进行额外扫描。然后，我将在他们的软件中关闭此功能。别误会，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-20T16:22:15.077

您可以编写自己的代理 SMTP 服务，连接到该服务以发送消息。您可以将所有消息直接转发到您的实际 SMTP 服务并将所有响应传回。然后您可以窃听所有这些消息并相应地处理它们。

对于您所追求的东西可能有点矫枉过正，但编码相当简单，因为您不需要了解协议的任何内容，因为您只是一个代理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T16:45:55.397

如果您使用的是 .NET 2.0，则可以将 SMTP 会话记录到文件中：

[如何创建 SMTP 会话的日志文件？(System.Net.Mail)](http://www.systemnetmail.com/faq/4.10.aspx)

**更新：**

看看这个问题：

[使用 .net 测试 SMTP（堆栈溢出）](https://stackoverflow.com/questions/550887/testing-smtp-with-net)

从您的编辑：

*“我想知道是否有办法绑定到默认的 SMTP 侦听器并拦截消息然后传递它？”*

...以及您在下面的评论：

*“我希望在 SMTP 收到之前检查实际消息。”*

我不确定您是否完全了解 SMTP 协议。SMTP 消息不仅仅是单一的即发即弃的实体。SMTP是基于会话的，客户端和服务器之间存在会话，其中消息只是其中的一部分。跟踪方法（链接到上面）将记录客户端和服务器之间的整个交换，并在传递之前拦截整个消息。替代方案（代理或模拟服务器）仍需要您的应用程序参与 SMTP 客户端/服务器交换。最接近您要求的解决方案是使用上面答案中链接到的[Papercut之类的东西。](http://invalidlogic.com/papercut/)

凯夫

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-26T14:46:00.080

似乎像 Ethereal 这样的东西可以让您完成请求的嗅探部分。我不清楚您所说的“拦截”和“传递”是什么意思。您是想过滤一些流量还是只是延迟足够长的时间让您在传递之前检查流量，还是两者兼而有之？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-22T21:11:00.593

IIRC，您仍然可以为 IIS SMTP 服务编写事件接收器（即使它不是完整的交换）。自从我这样做以来已经有很多年了，但是您可能想在谷歌上搜索“交换事件接收器”以查看是否有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-20T16:18:46.927

在 .Net 中，您可以告诉 SmtpClient 将电子邮件发送到与 SMTP 服务监控不同的文件夹。这样您就可以检查每条消息，然后将其移至真正的拾取文件夹。（参见[SmtpClient.PickupDirectory](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.pickupdirectorylocation.aspx)）

# c# - 访问 XAML 中的代码隐藏变量

> ID：666856
> 
> 赞同：51
> 
> 时间：2009-03-20T16:13:59.480
> 
> 标签：c#, wpf, xaml, silverlight

如何访问*Sample.xaml.cs*文件（如 asp.net ）中的公共变量`<%=VariableName%>`？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2009-03-20T16:30:41.687

有几种方法可以做到这一点。

*   将您的变量添加为代码隐藏中的资源：

    ```
    myWindow.Resources.Add("myResourceKey", myVariable); 
    ```

    然后您可以从 XAML 访问它：

    ```
    <TextBlock Text="{StaticResource myResourceKey}"/> 
    ```

    如果必须在解析 XAML 后添加它，可以使用 a `DynamicResource`above 而不是`StaticResource`.

*   使变量成为 XAML 中某些内容的属性。通常这可以通过`DataContext`：

    ```
    myWindow.DataContext = myVariable; 
    ```

    或者

    ```
    myWindow.MyProperty = myVariable; 
    ```

    在此之后，您的 XAML 中的任何内容都可以通过以下方式访问它`Binding`：

    ```
    <TextBlock Text="{Binding Path=PropertyOfMyVariable}"/> 
    ```

    或者

    ```
    <TextBlock Text="{Binding ElementName=myWindow, Path=MyProperty}"/> 
    ```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2009-11-23T10:11:01.047

对于绑定，如果`DataContext`不使用，可以简单的将这个添加到后面代码的构造函数中：

```
this.DataContext = this; 
```

使用它，代码中的每个属性都可以被绑定访问：

```
<TextBlock Text="{Binding PropertyName}"/> 
```

另一种方法是只为 XAML 的根元素命名：

```
x:Name="root" 
```

由于 XAML 被编译为代码隐藏的部分类，我们可以按名称访问每个属性：

```
<TextBlock Text="{Binding ElementName="root" Path=PropertyName}"/> 
```

注意：访问仅适用于属性；不去田野。`set;`和`get;`或`{Binding Mode = OneWay}`是必要的。如果使用 OneWay 绑定，则底层数据应实现*INotifyPropertyChanged*。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-03-21T21:36:48.230

对于 WPF 中的又快又脏的 Windows，我更喜欢将 Window 的 DataContext 绑定到窗口本身；这都可以在 XAML 中完成。

**Window1.xaml**

```
<Window x:Class="WpfApplication1.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    DataContext="{Binding RelativeSource={RelativeSource self}}"
    Title="Window1" Height="300" Width="300">
    <StackPanel>
        <TextBlock Text="{Binding Path=MyProperty1}" />
        <TextBlock Text="{Binding Path=MyProperty2}" />
        <Button Content="Set Property Values" Click="Button_Click" />
    </StackPanel>
</Window> 
```

**Window1.xaml.cs**

```
public partial class Window1 : Window
{
    public static readonly DependencyProperty MyProperty2Property =
        DependencyProperty.Register("MyProperty2", typeof(string), typeof(Window1), new UIPropertyMetadata(string.Empty));

    public static readonly DependencyProperty MyProperty1Property =
        DependencyProperty.Register("MyProperty1", typeof(string), typeof(Window1), new UIPropertyMetadata(string.Empty));

    public Window1()
    {
        InitializeComponent();
    }

    public string MyProperty1
    {
        get { return (string)GetValue(MyProperty1Property); }
        set { SetValue(MyProperty1Property, value); }
    }

    public string MyProperty2
    {
        get { return (string)GetValue(MyProperty2Property); }
        set { SetValue(MyProperty2Property, value); }
    }

    private void Button_Click(object sender, RoutedEventArgs e)
    {
        // Set MyProperty1 and 2
        this.MyProperty1 = "Hello";
        this.MyProperty2 = "World";
    }
} 
```

在上面的示例中，请注意`DataContext`Window 上的属性中使用的绑定，这表示“将您的数据上下文设置为您自己”。两个文本块绑定到`MyProperty1`和`MyProperty2`，按钮的事件处理程序将设置这些值，这些值将自动传播到两个文本块的`Text`属性，因为属性是依赖属性。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2010-08-25T15:44:40.690

还值得注意的是，“绑定”只能在 DependencyObject 的 DependencyProperty 上设置。如果您想在 XAML 中的对象上设置非 DependencyProperty（例如普通属性），那么您将不得不使用 Robert 在后面的代码中使用资源的第一种方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-04-09T12:15:38.933

`myWindow.xaml`

```
<Window
    ...
    <TextBlock Text="{ Binding Path=testString }" />
</Window> 
```

`myWindow.xaml.cs`

```
public partial class myWindow: Window
{
    public string testString { get; set; } = "This is a test string";

    public myWindow()
    {
        DataContext = this;
        InitializeComponent();
    }
} 
```

**重要的**

*   放`Datacontext`
*   `testString` **必须**是`public`
*   `testString` **必须**是`property`（有一个`get`和`set`）

# c# - C# 代码简化查询：顺序 Foreach 循环

> ID：666857
> 
> 赞同：6
> 
> 时间：2009-03-20T16:14:12.023
> 
> 标签：c#

假设我有一些看起来像这样的代码：

```
foreach(type x in list y)
{
   //dostuff1(x)
}

foreach(type x in list y)
{
   //dostuff2(x)
}

foreach(type x in list y)
{
   //dostuff3(x)
}

foreach(type x in list y)
{
   //dostuff4(x)
}

foreach(type x in list y)
{
   //dostuff5(x)
} 
```

我不能像这样将事物组合成一个大的 for 循环：

```
foreach (type x in list y)
{
    //dostuff1(x)
    //dostuff2(x)
    //dostuff3(x)
    //dostuff4(x)
    //dostuff5(x)
} 
```

这样做会改变顺序。关于使 C# 中的代码更简单的最佳方法的任何评论？

我想我可以通过创建这样的函数来解决这个问题，尽管我宁愿保持原样，也不愿强迫我的代码的未来读者理解`yield`：

```
void func(type x)
{
    dostuff1(x)
    yield 0;
    dostuff2(x)
    yield 0;
    dostuff3(x)
    yield 0;
    dostuff4(x)
    yield 0;
    dostuff5(x)
    yield break;
}

for (int i = 0; i<5; ++i)
{
   foreach (type x in list y)
   {
       //Call func(x) using yield semantics, which I'm not going to look up right now
   }
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-03-20T16:19:09.173

另一种选择：

```
List<Action<Foo>> actions = new List<Action<Foo>> { 
    doStuff1, doStuff2, doStuff3, doStuff4, doStuff5
};

foreach (Action<Foo> action in actions)
{
    foreach (Foo x in list)
    {
        action(x);
    }
} 
```

刚刚检查过，这行得通。例如：

```
using System;
using System.Collections.Generic;

public class Test
{
    static void Main(string[] args)
    {
        var actions = new List<Action<string>> {
            First, Second
        };

        foreach (var action in actions)
        {
            foreach (string arg in args)
            {
                action(arg);
            }
        }
    }

    static void First(string x)
    {
        Console.WriteLine("First: " + x);
    }

    static void Second(string x)
    {
        Console.WriteLine("Second: " + x);
    }
} 
```

运行结果`Test.exe a b c`

```
First: a
First: b
First: c
Second: a
Second: b
Second: c 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-20T16:28:45.217

如果您有一个相当恒定的操作列表，您可以避免 foreach 循环，但仍显式执行操作（尚未测试代码）：

```
list.ForEach(action1);
list.ForEach(action2);
list.ForEach(action3);
list.ForEach(action4); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-20T16:56:26.727

Jon Skeet 的回答非常好（我刚刚投了赞成票）。这是一个更进一步的想法：

如果您经常这样做，您可以创建一个名为“DoActionsInOrder”的扩展方法（或者您可以想出一个更好的名称）来执行此操作。这是想法：

```
public static void DoActionsInOrder<T>(this IEnumerable<T> stream, params Action<T> actionList)
{
     foreach(var action in actionList)
     {
          foreach(var item in stream)
          {
               action(item);
          }
     }
} 
```

然后，你可以这样称呼它：

```
myList.DoActionsInOrder(doStuff1, doStuff2, doStuff3, doStuff4, doStuff5); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-20T16:19:09.313

怎么样：

```
interface IDoStuff
{
     void DoStuff(x);
}

List<IDoStuff> listOfActions = ...
foreach (IDoStuff iDoStuff in listOfActions)
{
    foreach (type x in list y)
    {
         iDoStuff(x);
    }
} 
```

**[编辑]**是的，您应该像 J.Skeet 所说的那样选择通用解决方案（尽管您也可以使用通用接口而不是委托）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-20T16:26:49.653

如果您必须保留顺序性质，那么您无能为力。你可以做一些扩展方法的快捷方式，但恕我直言，这会导致代码的可读性降低。此外，根据您的方法签名，您可能会遇到问题。

您可以重构以将迭代移动到单独的函数。

```
// Method 1
DoStuff1ToList(y);
DoStuff2ToList(y);
DoStuff3ToList(y);
DoStuff4ToList(y);
DoStuff5ToList(y);

// Do Stuff 1
foreach (var x in y)
{ 
    // do actual stuff
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-20T16:31:26.803

我认为这与 testing.ForEach(action) 相同，所以如果你沿着这种路线走，就使用它。

```
private static void DoDifferentStuffToThings()
    {
        List<string> testing = new List<string>() { "hello", "world" };

        Action<string> action1 = (a) =>
        {
            Console.WriteLine("Action 1 {0}", a);
        };

        Action<string> action2 = (a) =>
        {
            Console.WriteLine("Action 2 {0}", a);
        };

        DoStuffToThings<string>(testing, action1);
        DoStuffToThings<string>(testing, action2);
    }

    private static void DoStuffToThings<T>(IEnumerable<T> list, Action<T> dothing)
        where T : class
    {
        foreach (var item in list)
        {
            dothing(item);
        }
    } 
```

# sql-server - 在服务器上部署 SSAS 2005 多维数据集时出错

> ID：666858
> 
> 赞同：0
> 
> 时间：2009-03-20T16:14:15.097
> 
> 标签：sql-server, sql-server-2005, ssis, ssas

我在这里遇到了一些非常讨厌的事情。我有一个 SSAS Cube，直到前天都可以正常工作。服务器上出现了一些性能问题，并在 Service Pack2 之上获得了累积补丁 938077。从那以后我一直无法部署多维数据集 - 出现一个奇怪的错误 -

**文件系统错误：文件操作期间发生以下错误：访问被拒绝。**

我是机器上的管理员，可能已经检查了整个文件系统的权限。已删除现有多维数据集，停止服务，服务器，尝试重新部署 - 没有任何效果。不幸的是，我忘记拍摄补丁前映像的快照，因此无法恢复。如果我无法解决这个问题，我目前剩下的唯一选择是重建服务器。

奇怪，但我在任何论坛上都找不到关于此的任何内容。

是的，与此相关的另一件奇怪的事情 - 我有 SSIS 包，用于加载 DW（上述多维数据集的数据源），奇怪的是我丢失了所有数据流任务。确实发生了一些奇怪的事情，我无法追踪它。

任何建议或帮助都会很棒。我现在什么都想不出来。

干杯！！维内

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-30T11:41:45.887

弄清楚了，它更多的是服务器上的权限问题，而不是多维数据集本身。在本地系统帐户下运行 SQL 服务（在我们不知情的情况下应用了新的安全补丁之后），它运行良好。

# browser - 开始浏览时发送的第一个数据包

> ID：666864
> 
> 赞同：2
> 
> 时间：2009-03-20T16:14:45.877
> 
> 标签：browser, network-programming, network-protocols, packet, arp

想象一个用户坐在连接以太网的 PC 前。他打开了一个浏览器。他在地址栏中输入“www.google.com”并按回车键。

现在告诉我以太网上出现的第一个数据包是什么。

我在这里找到了这个问题：[关于套接字编程和多线程的面试问题](https://stackoverflow.com/questions/177197/interview-questions-on-socket-programming-and-multi-threading)

因为我不是网络专家，所以我想听听答案（我假设它是“取决于”；））。

使用像 Wireshark 这样的工具，我显然可以检查我自己的计算机行为。我想知道我看到的数据包（例如 ARP、DNS、VRRP）在每个以太网配置中是否相同（它是否依赖于操作系统？驱动程序？甚至是浏览器:)？）以及哪些条件他们出现。在数据链路层上，它是否甚至可能依赖于物理网络（连接到集线器/交换机/路由器）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-24T16:18:07.020

关于使用 ARP 查找 DNS 服务器的答案通常是错误的。

特别是，网外 IP 地址的 IP 地址解析*永远不会*使用 ARP 完成，并且路由器不负责回答此类 ARP 查询。

离网路由是由*客户端*机器完成的，它知道哪些 IP 地址在它所连接的本地子网上。如果请求的 IP 地址不是本地的，那么客户端机器会参考它的路由表来找出将数据包发送到哪个网关。

因此，在大多数情况下，发出的*第一个*数据包将是一个 ARP 请求，以查找默认网关的 MAC 地址，如果它尚未在 ARP 缓存中。

只有这样它才能通过网关发送 DNS 查询。在这种情况下，数据包在 IP 目标字段中使用 DNS 服务器的 IP 地址发送，但在以太网数据包上使用网关的 MAC 地址。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-20T16:18:42.090

您可以随时下载[wireshark](http://www.wireshark.org/)并查看。

* * *

虽然破坏了乐趣。

假设主机的 IP 地址没有被缓存，DNS 服务器的 MAC 地址也没有被缓存，那么首先发送的将是一个广播[ARP](http://en.wikipedia.org/wiki/Address_Resolution_Protocol)消息，试图找出 DNS 服务器的 MAC 地址（即路由器将使用*自己的*地址进行响应）。

接下来，将使用 DNS 解析主机名。然后返回的 IP 地址将使用 ARP 解析（再次路由器将用自己的地址响应），最后，HTTP 消息将实际发送。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-28T07:35:47.077

实际上，这取决于您未指定的各种初始条件。

1.  假设 PC 运行的操作系统包含本地 DNS 缓存解析器（我的有），在发送任何数据包之前发生的第一件事就是在缓存中搜索 IP 地址。这很复杂，因为“www.google.com”不是一个完全限定的域名，即它缺少尾随点，因此 DNS 解析器将首先接受其缓存中与它的搜索域列表匹配的任何记录。例如，如果您的搜索域列表是“example.com”。其次是“yoyodyne.com”。然后缓存与名称“www.google.com.example.com”匹配的资源。“www.google.com.yoyodyne.com。” 最后是“www.google.com”。如果可用，将被使用。另请注意：如果网络浏览器是最受欢迎的浏览器之一，并且 PC 正在运行一个合理的当前操作系统，并且主机具有至少一个分配了全球范围 IPv6 地址的网络接口（并且主机位于 www.google.com 在其 DNS 范围内具有 AAAA 记录的网络上），那么服务器的远程地址可能是 IPv6 而不是 IPv4。这在以后很重要。

2.  如果 Google Web 服务器的远程地址在 DNS 中本地缓存，并且 ARP/ND6 缓存包含默认路由器的 IPv4/IPv6 地址条目（分别），则第一个传输的数据包将是 TCP SYN 数据包来源来自连接到路由器的接口地址并以缓存的远程 IPv4/IPv6 地址为目的地。或者，默认路由器可以通过某种第 2 层或第 3 层隧道到达，在这种情况下，SYN 数据包将被适当地封装。

3.  如果 Google 网络服务器的远程地址*不是*本地缓存，则主机首先需要在 DNS 域搜索列表中依次查询 A 和/或 AAAA 记录，直到得到肯定响应。如果解析器配置中的第一个 DNS 解析服务器地址在本地 IPv4 子网范围之一中，或者在路由器通告中设置了 L=1 位的本地附加 IPv6 前缀中，并且 ARP/ND6 缓存已经包含一个条目对于有问题的地址，那么主机将发送的第一个数据包是对匹配域搜索列表中第一个完全限定域名的 A 记录或 AAAA 记录的直接 DNS 查询。或者，如果第一个DNS服务器在链路上不可寻址，并且默认路由器已经有一个ARP/ND6缓存条目，那么DNS查询包将被发送到默认路由器转发给DNS服务器。

4.  如果本地在线 DNS 服务器或默认路由器（分别，如上述情况）在 ARP/ND6 缓存中没有条目，则主机将发送的第一个数据包是 ARP 请求或 ICMP6邻居请求相应的地址。

哦，但是等等……它更可怕。有一些奇怪的边缘情况，主机发送的第一个数据包可能是 LLMNR 查询、IKE 启动，或者......或者......或者......你真的关心这一切，buckaroo？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-20T16:21:36.670

> 这取决于

没看错。例如，本地 DNS 缓存是否包含地址？如果不是，那么 DNS 查找可能是第一件事。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-20T16:22:08.777

好吧，无论您尝试做什么，首先发生的是一些与以太网协议相关的数据。值得注意的是，以太网适配器必须决定以太网总线是否可用（因此这里会发生一些冲突检测）

很难回答您的问题，因为它在很大程度上取决于您使用的以太网网络的类型。有关以太网传输的更多信息，请参见[此处](http://en.wikipedia.org/wiki/Ethernet)和[此处](http://en.wikipedia.org/wiki/Autonegotiation)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-20T16:32:00.763

如果主机名不在 DNS 缓存中，也不在 hosts 文件中，第一个数据包将转到 DNS。

否则，第一个数据包将是 HTTP GET。

# iphone - 如何动态创建多个按钮并处理它们各自的事件？+ iPhone SDK

> ID：666873
> 
> 赞同：2
> 
> 时间：2009-03-20T16:16:33.140
> 
> 标签：iphone, objective-c, uikit

现在我正在创建一个 iPhone 应用程序。我需要动态创建多个按钮并分别处理它们对应的事件。每个按钮事件是否可以单独运行，或者我可以将变量或对象发送到方法并根据该值区分按钮行为。谁能指出我该怎么做？

请帮忙，

赛姆

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-20T17:16:03.497

您应该查看 iPhone SDK 中的 UI 目录示例。它具有以编程方式创建所有 UI 元素的示例。

我不相信您可以将参数传递给触发按钮时调用的函数，因此每个按钮都需要一个单独的函数。然而，这些可能是轻量级函数，它们使用参数调用另一个函数。

要手动创建按钮并设置其操作，您可以执行以下操作：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
button.frame = CGRectMake(80.0, 170, 150.0, 30.0);
[button setTitle:@"My Button" forState:UIControlStateNormal];
[button addTarget:self action:@selector(myAction:) forControlEvents:UIControlEventTouchUpInside];
[self.view addSubview:button]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-20T21:55:54.340

当一个按钮调用 IBAction（这将是您传入的选择器）时，它还会传递一个指针，指向您通常拥有的 :(id)sender 参数中的按钮：

```
- (IBAction) doSoemthing:(id)sender 
```

所以你可以根据传入的按钮找出你想要做什么。通过基于所有按钮地址创建地图，或者通过让您使用的所有 UIButtons 成为 UIButton 的子类，您可以在其中插入某种自定义 ID 并在 doSomething: 被击中时查找它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T17:35:36.933

您可以通过编程方式使用 UIButton 的 tag 属性并访问该标记。这比子类化更容易。

下面是一个例子： [Detecting which UIButton was pressed in a UITableView](https://stackoverflow.com/questions/1802707/detecting-which-uibutton-was-pressed-in-a-uitableview)

# vba - 如何获取 Excel 工作簿中定义的宏

> ID：666890
> 
> 赞同：3
> 
> 时间：2009-03-20T16:20:53.270
> 
> 标签：vba, excel, vsto

有没有办法在 VBA 或 C# 代码中获取工作簿中定义的现有宏的列表？

理想情况下，这个列表应该有一个方法定义签名，但是仅仅得到一个可用宏的列表就很好了。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-20T17:24:46.160

我很久没有为 Excel 做 vba，但如果我记得清楚的话，代码的对象模型是无法通过脚本访问的。

当您尝试访问它时，您会收到以下错误。

> ```
> Run-time error '1004':
> Programmatic access to Visual Basic Project is not trusted 
> ```

尝试：

> ```
> Tools | Macro | Security |Trusted Publisher Tab
> [x] Trust access to Visual Basic Project 
> ```

现在您可以访问 VB IDE，您可能可以导出模块并在其中进行文本搜索，使用 vba / c#，使用正则表达式查找子和函数声明，然后删除导出的模块。

我不确定是否有其他方法可以做到这一点，但这应该可以。

您可以查看以下链接，开始导出模块。 [http://www.developersdex.com/vb/message.asp?p=2677&ID=%3C4FCD0AE9-5DCB-4A96-8B3C-F19C63CD3635%40microsoft.com%3E](http://www.developersdex.com/vb/message.asp?p=2677&ID=%3C4FCD0AE9-5DCB-4A96-8B3C-F19C63CD3635%40microsoft.com%3E)

在这里，我获得了有关提供对 VB IDE 的推力访问的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-23T19:18:45.813

基于 Martin 的回答，在您信任对 VBP 的访问之后，您可以使用这组代码来获取 Excel 工作簿的 VB 项目中所有公共子例程的数组。您可以将其修改为仅包含 subs，或仅包含 func，或仅包含私有或仅包含公共...

```
Private Sub TryGetArrayOfDecs()
    Dim Decs() As String
    DumpProcedureDecsToArray Decs
End Sub

Public Function DumpProcedureDecsToArray(ByRef Result() As String, Optional InDoc As Excel.Workbook) As Boolean
    Dim VBProj As Object
    Dim VBComp As Object
    Dim VBMod As Object

    If InDoc Is Nothing Then Set InDoc = ThisWorkbook

    ReDim Result(1 To 1500, 1 To 4)
   DumpProcedureDecsToArray = True
    On Error GoTo PROC_ERR

    Set VBProj = InDoc.VBProject
    Dim FuncNum As Long
    Dim FuncDec As String
    For Each VBComp In VBProj.vbcomponents
        Set VBMod = VBComp.CodeModule
        For i = 1 To VBMod.countoflines
            If IsSubroutineDeclaration(VBMod.Lines(i, 1)) Then
                FuncDec = RemoveBlanksAndDecsFromSubDec(RemoveAsVariant(VBMod.Lines(i, 1)))
                If LCase(Left(VBMod.Lines(i, 1), Len("private"))) <> "private" Then
                    FuncNum = FuncNum + 1
                    Result(FuncNum, 1) = FindToLeftOfString(InDoc.Name, ".")    '
                    Result(FuncNum, 2) = VBMod.Name
                    Result(FuncNum, 3) = GetSubName(FuncDec)
                    Result(FuncNum, 4) = VBProj.Name
                End If
            End If
        Next i
    Next VBComp
 PROC_END:
    Exit Function
 PROC_ERR:
    GoTo PROC_END
End Function

Private Function RemoveCharFromLeftOfString(TheString As String, RemoveChar As String) As String
    Dim Result As String
    Result = TheString
    While LCase(Left(Result, Len(RemoveChar))) = LCase(RemoveChar)
        Result = Right(Result, Len(Result) - Len(RemoveChar))
    Wend
    RemoveCharFromLeftOfString = Result
End Function

Private Function RemoveBlanksAndDecsFromSubDec(TheLine As String) As String
    Dim Result As String
    Result = TheLine
    Result = RemoveCharFromLeftOfString(Result, " ")
    Result = RemoveCharFromLeftOfString(Result, "   ")
    Result = RemoveCharFromLeftOfString(Result, "Public ")
    Result = RemoveCharFromLeftOfString(Result, "Private ")
    Result = RemoveCharFromLeftOfString(Result, " ")
    RemoveBlanksAndDecsFromSubDec = Result
End Function

Private Function RemoveAsVariant(TheLine As String) As String
    Dim Result As String
    Result = TheLine
    Result = Replace(Result, "As Variant", "")
    Result = Replace(Result, "As String", "")
    Result = Replace(Result, "Function", "")
    If InStr(1, Result, "( ") = 0 Then
        Result = Replace(Result, "(", "( ")
    End If
    RemoveAsVariant = Result
End Function

Private Function IsSubroutineDeclaration(TheLine As String) As Boolean
    If LCase(Left(RemoveBlanksAndDecsFromSubDec(TheLine), Len("Function "))) = "function " Or LCase(Left(RemoveBlanksAndDecsFromSubDec(TheLine), Len("sub "))) = "sub " Then
        IsSubroutineDeclaration = True
    End If
End Function

Private Function GetSubName(DecLine As String) As String
    GetSubName = FindToRightOfString(FindToLeftOfString(DecLine, "("), " ")
End Function

Function FindToLeftOfString(FullString As String, ToFind As String) As String
    If FullString = "" Then Exit Function
    Dim Result As String, ToFindPos As Integer
    ToFindPos = InStr(1, FullString, ToFind, vbTextCompare)
    If ToFindPos > 0 Then
        Result = Left(FullString, ToFindPos - 1)
    Else
        Result = FullString
    End If
    FindToLeftOfString = Result
End Function

Function FindToRightOfString(FullString As String, ToFind As String) As String
    If FullString = "" Then Exit Function
    Dim Result As String, ToFindPos As Integer
    ToFindPos = InStr(1, FullString, ToFind, vbTextCompare)
    Result = Right(FullString, Len(FullString) - ToFindPos + 1 - Len(ToFind))
    If ToFindPos > 0 Then
        FindToRightOfString = Result
    Else
        FindToRightOfString = FullString
    End If
End Function 
```

# java - Java 中的多个问题（验证 URL、将应用程序添加到启动等）

> ID：666895
> 
> 赞同：0
> 
> 时间：2009-03-20T16:22:52.597
> 
> 标签：java

我有一个用 Java 构建的应用程序，我有一些问题要提出。

有没有办法知道网页的一个 URL 是否真实？用户输入 URL，我必须测试它是否真实。

我如何知道一个网页自某一天以来是否发生了变化，或者最后一次更新的日期是什么时候？

在 java 中，如何让应用程序在 pc 启动时运行，因为用户打开计算机，应用程序必须运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-20T16:26:17.797

我不确定您要构建什么样的应用程序。我假设它是一个桌面应用程序。为了检查 URL 是否存在，您应该发出**HTTP HEAD Request**并解析结果。HEAD 可用于检查页面是否已被修改。为了在 PC 启动时启动应用程序，您必须在 Windows 下添加一个注册表项；这个过程[在这里解释](http://ask-leo.com/auto_start_how_do_i_run_a_program_automatically_when_windows_starts.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T16:26:04.193

要检查 url 是否有效，您可以尝试使用正则表达式（[regex for urls](http://regexlib.com/Search.aspx?k=URL)）。

要知道网页是否已更改，您可以查看 http 标头（[阅读 java](http://www.apl.jhu.edu/~hall/java/Servlet-Tutorial/Servlet-Tutorial-Request-Headers.html)中的 http 标头）。

您不能让程序在启动时自动启动，用户必须这样做。但是，您可以编写代码来帮助用户将程序设置为启动应用程序；然而，这取决于操作系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-20T16:36:38.147

我不确定你所说的“真实”是什么意思。如果您的意思是“有效”，那么您可以从 String 构造一个 java.net.URL 并捕获生成的 MalformedURLException（如果它无效）。如果您的意思是那里确实有东西，您可以像 Geo 所说的那样发出 HTTP HEAD 请求，或者您可以只检索内容。 [HTTPUnit](http://httpunit.sourceforge.net/)对于检索 Web 内容特别方便。

正如上面 nan 所建议的，HTTP 标头可能会指示内容何时更改。如果您不想指望这一点，您可以检索页面并存储它，或者更好的是，存储页面内容的哈希值。请参阅[DigestOutputStream](http://java.sun.com/javase/6/docs/api/java/security/DigestOutputStream.html)以生成哈希。在随后检查更改时，您只需将新哈希与您上次存储的哈希进行比较。

Nan关于开机启动是正确的。你的目标是什么操作系统？

# asp.net-mvc - ASP.NET MVC - 缺少“转换为 Web 应用程序”选项

> ID：666899
> 
> 赞同：0
> 
> 时间：2009-03-20T16:23:55.417
> 
> 标签：asp.net-mvc, visual-studio-2008, webforms

我创建了一个新的 MVC 项目并向其中添加了一些 Web 表单页面，以便开始使用 MVC 将新页面添加到我的应用程序中，并最终将旧页面也移植过来。一切都在正常构建和工作，但我确实注意到右键单击 aspx 文件时没有“转换为 Web 应用程序”选项。而且我认为当我更改页面上的控件时，它不会重新生成我的设计器文件。

我的猜测是 ProjectTypeGuid 错误或顺序错误。有人可以确认吗？

旧（Webforms）项目文件

```
<ProjectGuid>{4F95C3D9-228E-4BD5-9840-46224BA3EBA7}</ProjectGuid>
<ProjectTypeGuids>{349c5851-65df-11da-9384-00065b846f21};{fae04ec0-301f-11d3-bf4b-00c04f79efbc}</ProjectTypeGuids> 
```

新建 (MVC) 项目文件

```
<ProjectGuid>{A4690D3F-695B-4BF4-93B7-EA5B17793051}</ProjectGuid>
<ProjectTypeGuids>{603c0e0b-db56-11dc-be95-000d561079b0};{349c5851-65df-11da-9384-00065b846f21};{fae04ec0-301f-11d3-bf4b-00c04f79efbc}</ProjectTypeGuids> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-22T00:06:25.750

这在很多层面上都是错误的，但无论如何我都会回答你，希望我可能会有所提升或其他什么。你有两条路线。我一直使用的第一条路线是将您的 mvc 应用程序放在他们自己的项目中。当您部署站点时，首先删除 webforms 应用程序，然后在该 webforms 应用程序中创建一个文件夹并将您的 mvc 应用程序放入该文件夹中。这对你来说应该是一种魅力。如果你坚持在同一个项目中拥有 webforms 和 MVC Framework，那么不要将你的 webforms 放到 view 文件夹中。创建它自己的文件夹，因为如果不修改 web.config，您将无法直接从 views 文件夹访问您的 aspx 页面。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-22T00:14:42.530

MVC 仅作为 Web 项目提供。不支持 VS2005 风格的网站。

# java - GWT 文本框编码和 RPC

> ID：666900
> 
> 赞同：0
> 
> 时间：2009-03-20T16:23:58.317
> 
> 标签：java, gwt, encoding

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-23T01:07:55.437

2个问题：

1.  RPC 中内置的数据“序列化”或“编组”处理二进制转换，例如机器字节顺序差异。
2.  如果您打算将 Java 字符串作为“二进制字符”写入，那么您所指的“xml 文档”应该使用[“UTF-16”编码。](http://www.w3schools.com/XML/xml_encoding.asp)
3.  另一种方法是使用 8 位编码并将所有 16 位字符转换为非中断空格中的标记"

> `&nbsp;`

"

# .net - ASP.NET 单击事件句柄 - 如何在 VB.NET 中传递参数？

> ID：666902
> 
> 赞同：0
> 
> 时间：2009-03-20T16:24:45.757
> 
> 标签：.net, asp.net, events

我正在使用手风琴 Ajax 控件。对于每个 Accordion 窗格，我都有动态创建的文本和按钮。当用户触发单击事件时，我想知道触发了哪个窗格中的哪个按钮。因此，我想以一种可以将 ID（可能通过事件参数）发送到事件处理程序的方式来处理按钮的单击事件，以便处理程序根据按下的按钮知道要做什么。

我知道我必须做这样的事情：

```
AddHandler bGetSessionMembers.Click, AddressOf bGetSessionMembers_click 
```

但我想做这样的事情：

```
AddHandler bGetSessionMembers.Click, AddressOf bGetSessionMembers_click(Me, "My ID") 
```

我认为你可以在 C# 中做到这一点

```
bGetSessionMembers.Click += bGetSessionMembers_click(Me, "My ID") 
```

甚至在 C# 中，但使用匿名代表。

有人有线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-20T16:51:16.223

这是一个更好的方法来做到这一点。首先，像往常一样连接你的按钮：

```
AddHandler Button1.Click, AddressOf Click
AddHandler Button2.Click, AddressOf Click 
```

然后创建一个`Click`这样的方法：

```
Sub click(ByVal o As Object, ByVal e As EventArgs)
    Dim button As Button = TryCast(o, Button)    
    If button IsNot Nothing Then

    End If
End Sub 
```

在 if 语句中，您现在有一个`Button`- 您可以获取它`ID`或您想要的任何其他内容。

**编辑以回应评论：**

我认为您可能误解了 .NET 中事件的连接方式。当你这样做时：

```
AddHandler Button2.Click, AddressOf Click 
```

您没有调用方法`Click`，而是将委托传递给编译器生成的方法，用于`Button.Click`将您的委托添加到委托调用列表的事件。当`Button`引发其`Click`事件时，您的委托被`Button`.

由于您不是通过委托调用该方法的人，因此您无法更改传入的内容。最好的选择是使用`Object`传递给您的方法并将其转换为`Button`我上面所做的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T17:00:22.053

安德鲁的回答非常棒，这正是我会做的。我只想添加到他编写的代码片段中，因为该空白行看起来需要一个片段来显示如何使用 System.Web.UI.Button 的 CommandArgument 和 CommandName 属性：

```
Sub click(ByVal o As Object, ByVal e As EventArgs)
    Dim button As Button = TryCast(o, Button)    
    If button IsNot Nothing Then
        Select Case button.CommandName
          Case "Command1"
            'Your cool feature here :)
          Case "Command2"
            'You could check button.CommandArgument to get additional data
          Case Else
            'Runs if button.CommandName isn't handled by your code
        End Select
    End If
End Sub 
```

安迪-希望你不介意我在这里扔更多东西:)

高温下，

理查德。

# eclipse - Eclipse Ganymede 在 64 位 vista 上启动真的很慢

> ID：666916
> 
> 赞同：1
> 
> 时间：2009-03-20T16:28:11.803
> 
> 标签：eclipse, vista64

我刚刚在工作中更换了电脑，现在有了一个非常强大的 64 位 Vista 操作系统。目前，我仍在努力解决一堆怪癖（比如没有用于 ms 访问的 64 位驱动程序），并且我注意到我的 eclipse 启动时间比 32 位 Vista 上长了很多。我的工作区中几乎没有任何内容，因此可以解决大部分更改/重建工作区问题。我已经使用了几次 -clean 选项，但似乎没有任何改变。

我没有运行 64 位版本的 eclipse，只是因为现在我的所有其他问题让机器恢复到稳定状态似乎太麻烦了。看起来 64 位 eclipse 的边缘仍然很粗糙，因为它似乎还没有真正发布。

关于我可以尝试加快速度的任何线索？一旦它运行，它似乎工作正常。

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-20T16:36:29.240

尝试调整 JVM 的内存设置。例如，如果您有 512 MB 内存，请将“-vmargs -Xms40m -Xmx256m”传递给 eclipse.exe。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-20T17:21:46.120

您可以试一试 eclipse 64bits（即使您在问题中说不使用它）。

使用最新的 JDK (6u12) 和最新的 3.5M5 eclipse，它确实工作得很好。
使用[我的设置](https://stackoverflow.com/questions/142357/what-are-the-best-eclipse-34-jvm-settings#144349)，即;)

# c# - 为什么使用 RegisterClientScriptBlock 标签不改变颜色？

> ID：666917
> 
> 赞同：0
> 
> 时间：2009-03-20T16:28:20.493
> 
> 标签：c#, asp.net, javascript

我有一个 aspx 页面定义如下：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>

   <script type="text/javascript" language='javascript'>
       function changecolor() {
           var lbl = document.getElementById('lblDisplayDate');
           lbl.style.color = 'red';
       };
  </script>

</head>
<body>
<form id="form1" runat="server">
<div>
    <asp:Label ID="lblDisplayDate" runat="server" 
               Text="Label"></asp:Label><br />

    <asp:Button ID="btnPostBack2" runat="server" 
                Text="Register Client Block Script" 
                onclick="btnPostBack2_Click" />

</div>
</form> 
```

这是 btnPostBack2 点击事件：

```
protected void btnPostBack2_Click(object sender, EventArgs e)
{
    if (!ClientScript.IsClientScriptBlockRegistered("JSScriptBlock"))
    {
        ClientScript.RegisterClientScriptBlock(this.GetType(), 
        "JSScriptBlock", 
        "changecolor();",
        true);
    } 
} 
```

即使我把脚本放在一个函数中来改变颜色，它仍然没有这样做，如果函数已经包含在脚本标签中，为什么我需要将脚本标签添加为 true？

lblDisplayDate 在页面加载中，它在每次页面重新加载时设置为当前时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-20T16:29:37.713

更改此行：

```
var lbl = document.getElementById('lblDisplayDate'); 
```

到：

```
var lbl = document.getElementById('<%= lblDisplayDate.ClientID %>'); 
```

此外，这可能并没有做你想做的事情。尝试添加：

```
OnClientClick="changecolor()" 
```

到你的`<asp:Button />`标签。

**编辑**在这一点上，我对你到底想要完成什么感到很困惑......

如果您只想更改标签的颜色而不发回，请使用 onclick 处理程序将您的颜色更改`<asp:Button />`为正常`<input type="button" />`并调用您的脚本，如下所示：

```
<input type="button" ... onclick="changeColor();" /> 
```

如果您想在回发时更改标签的颜色*，*则只需在代码隐藏中更改标签的背景，如下所示：

```
protected void btnPostBack2_Click(object sender, EventArgs e)
{
    /* ... other stuff goes here ... */
    lblDisplayDate.BackColor = Color.Red;
    /* ... other stuff goes here ... */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-15T21:27:27.777

就像 Sean 已经说过的那样：在这种情况下最好使用 OnClientClick。OnClientClick 将防止回发发生 - 它是使用 javascript 动态完成的。您需要做的就是将其优先于 javascript 函数。

我不明白你想在颜色变化上做一个“RegisterStartupScript 和 RegisterClientScriptBlock”。当你想从后面的代码中添加 javascript 时，应该使用这些，但是看到你已经在 aspx 页面中写出了它，它的使用是没有意义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-04-20T05:40:49.360

看一下这个。我已经修改了您的代码，并且现在可以正常工作而无需回发。

```
<html xmlns="http://www.w3.org/1999/xhtml">  
<head runat="server">  
    <title>Untitled Page</title>
    <script type="text/javascript" language='javascript'>
       function changecolor() {
           var lbl = document.getElementById('lblDisplayDate');
           lbl.style.color = 'red';
       };
</script>
</head>
<body>
    <form id="form1" runat="server">
<div>
<asp:Label ID="lblDisplayDate" runat="server" 
           Text="Label"></asp:Label><br />

<asp:Button ID="btnPostBack2" runat="server" 
            Text="Register Client Block Script" 
            OnClientClick="changecolor(); return false" />

    </div>
    </form>
  </body>
</html> 
```

希望这可以帮助

# asp.net - 使用默认命名空间的 HttpHandler

> ID：666927
> 
> 赞同：4
> 
> 时间：2009-03-20T16:29:44.357
> 
> 标签：asp.net, namespaces, httphandler

我有一个名为 Handler 的 HttpHandler，我将它编译成一个 DLL 并放入我的 ASP.NET 应用程序的 /bin 文件夹中。然后我有一个 .ashx 文件：

```
<% @ webhandler language="C#" class="Handler" %> 
```

但我得到一个*无法创建类型“处理程序”的*错误。

但是，如果我将 Handler 包装在一个免费的命名空间中，比如**foo**，并将 .ashx 更改为

```
<% @ webhandler language="C#" class="foo.Handler" %> 
```

它工作正常。为什么我不能不使用命名空间，呃，默认命名空间？Microsoft 在 msdn 网站上的许多 HttpHandler 示例中省略了命名空间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-14T12:37:36.110

这是因为 .Net 程序集的性质。任何引用类型或值类型都必须包装在命名空间周围。命名空间用于逻辑分组。在您的情况下，您的类“处理程序”是用户定义的引用类型。任何程序集都可以在根处有一个或多个根命名空间，但它不能在根处有引用类型或值类型。事实上，当您在项目属性的应用程序选项卡中创建一个新的类库项目时，它有一个选项可以为您的类库项目指定默认命名空间。因此，每当您在项目中创建一个新类时，它都会将其包装在 ProjectProperties.Application.DefaultNameSpace 中指定的默认名称空间中。

如果您希望看到这一点，请尝试使用 .Net SDK 附带的 IL Disassemblar 打开您的 .Net 程序集。

# icalendar - 在 iCal 文件中编码换行符

> ID：666929
> 
> 赞同：57
> 
> 时间：2009-03-20T16:30:05.450
> 
> 标签：icalendar

我试图弄清楚如何在 iCal 文件的说明部分中对换行符进行编码，以便它们可以正确导入 Outlook、Google 日历和 Apple 日历。

我继承的原始代码使用“=0D=0A”和带引号的可打印编码，在 Outlook 中效果很好，但在 Google 日历中效果不佳。

规范似乎说您应该使用 "\n" 来表示换行符。这在 Google 日历中效果很好，但 Outlook 只是将文字“\n”字符放在那里。

有没有一种方法可以在日历系统中始终如一地工作？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2009-03-20T17:59:28.573

好的，看起来我正在回答我自己的问题。

正确的做法是使用“\n”作为换行符。Outlook 无法识别这一点，因为我在描述中有“ENCODING=quoted-printable”。一旦我删除它，Outlook 就会正确显示新行。

此外，要让文件在 Apple iCal 中正确打开，您需要使用“VERSION:2.0”作为文件版本。如果您使用“VERSION:1.0”，它会告诉您它无法读取文件（即使它符合 1.0 规范）。

注意：正如其他人所提到的，该文件实际上必须包含文字 string `\n`。由于大多数语言将其视为表示换行符的转义序列，因此您可能需要`\\n`在代码中使用该字符串。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-09-03T13:39:37.783

原始帖子中来自 Matthew Bucket 的 RFC 链接的评论帮助了我。从那里引用：

> “TEXT”属性值中的 BACKSLASH 字符必须用另一个 BACKSLASH 字符转义

所以，我做了一个

```
$description = str_replace("\r\n", "\\n", $description); 
```

它奏效了

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2011-08-08T20:34:25.613

可能值得一提的是，您需要文字 \n，而不是换行符，字面上是反斜杠，然后是 ical 中的 n。也不要忘记做 75 个字符的“折叠”。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-08-20T06:39:20.613

您的输出文件应如下所示---

```
BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//2013//#Ur Site Name#//EN
BEGIN:VEVENT
UID:[event]2012
DTSTART:20130101T100000
DTEND:20130101T120000
LOCATION:
SUMMARY:#Meeting Title here#
DESCRIPTION:What is realistic for financial services companies to achieve via Social Media channels?    \n\nJoin us on 11th September 2013 at 4pm (BST) where we 
-----bla bla bla ----
END:VEVENT
END:VCALENDAR 
```

在这里你必须照顾版本，它应该是2.0和Escape char ... \n（换行符），分号（;）和逗号（，）。如果您在 .net 中编写，那么它应该像 ... "\\n", "\\;" 和 ”\\，”。

您也可以在此站点上检查您的输出文件... [https://icalendar.org/validator.html](https://icalendar.org/validator.html)

谢谢，巴斯卡

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-02-16T12:14:12.373

根据[这个 RFC](https://www.rfc-editor.org/rfc/rfc5545.html#section-3.1)：

> 内容行由换行符分隔，换行符是一个 CRLF 序列（CR 字符后跟 LF 字符）。

所以你应该使用`\r\n`. 我在字符串中使用了它，没有额外的反斜杠转义。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-10-03T19:04:04.877

这是我的答案`DESCRIPTION`

```
$filev = str_replace("\r\n", '\\n', $p);
$filev = str_replace("<br>",'\\n',$filev);
$filev = (str_replace(";","\;",str_replace(",",'\,',$filev))); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-03-22T19:51:07.677

我必须转义字符串中的输出以在输出文件中设置文字“\n”。像这样。发挥了魅力。

```
$events .= "DESCRIPTION:" . str_replace("\n","\\n",str_replace(";","\;",str_replace(",",'\,',get_event_contents()))) . "\n"; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-03-03T21:29:12.097

`=0D=0A`适用于 Outlook，但您需要更改`DESCRIPTION`密钥，以便可以解释换行符。

```
DESCRIPTION;ENCODING=QUOTED-PRINTABLE: 
```

在冒号后输入文本，`=0D=0A`用于换行。Outlook 将正确读取换行符。`\\n`仅当您`DESCRIPTION`不使用`ENCODING:QUOTED-PRINTABLE`.

我正在使用`VERSION:2.0`

# sql - 以 SQL 存储过程（或 LINQ）为中心

> ID：666934
> 
> 赞同：0
> 
> 时间：2009-03-20T16:30:45.137
> 
> 标签：sql, linq, pivot

我正在尝试创建一个以分组 ID 为中心的存储过程（或查询表达式）。在查看此处和其他地方的示例后，我未能让我的数据透视语句在存储过程中工作，我正在寻求帮助。

此外，如果这可以用 LIST 上的 LINQ 完成，那对我来说也是一个解决方案。

```
theID     theGroup   theValue
1          2          Red
2          2          Blue
3          2          Green
1          3          10
2          3          24
3          3          30
1          4          1
2          4          2
3          4          3 
```

第 2 组表示 CHOICE，第 3 组表示 COUNT，第 4 组表示 SORT，所以我想命名这些列（我意识到这是 PIVOT 的一个缺点，但没关系）。

```
ID        CHOICE     COUNT      SORT
1         Red        10     1
2         Blue       24     2
3         Green      30     3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-20T16:47:44.110

这对我有用，应该在 SP 中工作：

```
SELECT  theID AS ID
       ,[2] AS CHOICE
       ,[3] AS COUNT
       ,[4] AS SORT
FROM    so_666934 PIVOT ( MAX(theValue) FOR theGroup IN ([2], [3], [4]) ) AS pvt 
```

您可以使用动态 SQL 执行一些技巧来处理随时间变化的组，您还可以通过有效地将 theGroup 替换为 PIVOT 之前的名称来对名称进行透视。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T19:00:16.757

以下是使用 LINQ 在内存中执行此操作的几种方法。

```
List<SomeClass> source = new List<SomeClass>()
{
  new SomeClass(){ theID = 1, theGroup = 2, theValue="Red"},
  new SomeClass(){ theID = 2, theGroup = 2, theValue="Blue"},
  new SomeClass(){ theID = 3, theGroup = 2, theValue="Green"},
  new SomeClass(){ theID = 1, theGroup = 3, theValue=10},
  new SomeClass(){ theID = 2, theGroup = 3, theValue=24},
  new SomeClass(){ theID = 3, theGroup = 3, theValue=30},
  new SomeClass(){ theID = 1, theGroup = 4, theValue=1},
  new SomeClass(){ theID = 2, theGroup = 4, theValue=2},
  new SomeClass(){ theID = 3, theGroup = 4, theValue=3}
};

//hierarchical structure
var result1 = source.GroupBy(item => item.theID)
  .Select(g => new {
    theID = g.Key,
    theValues = g
      .OrderBy(item => item.theGroup)
      .Select(item => item.theValue)
      .ToList()
  }).ToList();

//holds some names for the next step.
Dictionary<int, string> attributeNames = new Dictionary<int,string>();
attributeNames.Add(2, "CHOICE");
attributeNames.Add(3, "COUNT");
attributeNames.Add(4, "SORT");
//xml structure
var result2 = source
  .GroupBy(item => item.theID)
  .Select(g => new XElement("Row",
    new XAttribute("ID", g.Key),
    g.Select(item => new XAttribute(attributeNames[item.theGroup], item.theValue))
  )); 
```

# javascript - JavaScript 中的 void 运算符有什么意义？

> ID：666936
> 
> 赞同：76
> 
> 时间：2009-03-20T16:31:32.917
> 
> 标签：javascript, void

我见过一些人`void`在他们的代码中使用运算符。我也在`href`属性中看到了这一点：`javascript:void(0)`这似乎并不比`javascript:;`

那么，使用`void`运算符的理由是什么？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2009-03-20T16:43:48.193

[其在链接中的使用说明](https://stackoverflow.com/questions/430349/what-does-the-browser-do-when-the-source-of-iframe-is-javascript/430359#430359)：

> 这就是小书签经常将代码包装在 void() 或不返回任何内容的匿名函数中以阻止浏览器尝试显示小书签的执行结果的原因。例如：
> 
> ```
> javascript:void(window.open("dom_spy.html")) 
> ```
> 
> 如果您直接使用返回某些内容的代码（在这种情况下为新窗口实例），浏览器将最终显示：
> 
> ```
> javascript:window.open("dom_spy.html"); 
> ```
> 
> 在 Firefox 中，上面将显示：
> 
> ```
> [object Window] 
> ```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2017-07-07T09:31:03.093

**`undefined`在 ES1.3 之前，该值不能在 JavaScript 中直接访问。**

**因此，包含一个操作员`void <expression>`以允许访问该值。**

有时它很有用，特别是在使用 Web API（例如事件处理程序）时，可以确保表达式的结果是一致的`undefined`。

当`undefined`属性被添加到 ES1.3 中的全局对象时， 的效用`void`变得不明显。

因此你的问题。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2019-09-19T20:48:40.527

在 JavaScript 中，`void`运算符用于显式返回 undefined。它是一元运算符，这意味着它只能使用一个操作数。您可以如下所示使用它——独立或带括号。

```
void expression;
void(expression); 
```

让我们看一些例子

```
void 0; //returns undefined
void(1); //returns undefined

void 'hello'; //undefined
void {}; //undefined
void []; //undefined

void myFunction(); 
void(myFunction()); 
```

如果你问为什么你需要一个特殊的关键字来返回 undefined 而不是 return `undefined`：原因是在 ES5 之前你实际上可以命名一个全局变量`undefined`，像这样：`var undefined = "hello"`or `var undefined = 23`，大多数浏览器都会接受它；该标识符`undefined`并未被承诺实际上是未定义的¹。因此，要返回*实际*的未定义值，使用了`void`运算符 is/was。虽然它不是一个非常受欢迎的运算符，但很少使用。

让我们看一个带有 void 的函数示例，

```
//just a normal function
function test() {
  console.log('hello');
  return 2;
}

//lets call it
console.log(test()); //output is hello followed by 2

//now lets try with void
console.log(void test()); //output is hello followed by undefined 
```

`void`丢弃函数的返回值并显式返回 undefined。

您可以从我的教程帖子中阅读更多内容：[https ://josephkhan.me/the-javascript-void-operator/](https://josephkhan.me/the-javascript-void-operator/)

¹ 在 ECMAScript 5 及更高版本中，全局变量`undefined`保证为未定义（[ECMA-262 第 5 版](https://www.ecma-international.org/publications/files/ECMA-ST-ARCH/ECMA-262%205th%20edition%20December%202009.pdf)，第 15.1.1.3 节），尽管仍然可以在内部范围内命名变量`undefined`。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2009-03-20T16:54:37.933

考虑以下：

```
<a href="javascript:void(fish=document.getElementById('foo').value);void(document.getElementById('bar').value=fish);">With Void</a>

<a href="javascript:fish=document.getElementById('foo').value;document.getElementById('bar').value=fish;">Without Void</a>

<input type="text" id="foo" value="one fish" />
<input type="text" id="bar" value="no fish" /> 
```

第一个链接将交换文本字段的值。第二个链接将打开一个带有文本“一条鱼”的新页面。如果您使用 a `javascript: link`，则在表达式返回`null`or以外的内容的那一刻`undefined`，浏览器会将其解释为链接应该执行的操作。通过将所有表达式/语句包装在一个`void()`函数中，您可以确保您的整个代码片段将运行。如今，这主要在 Bookmarklets 中使用，因为使用`onclick`属性或在单独的 Javascript 块/文件中设置事件处理程序是“规范”。

至于`javascript:`vs. `javascript:void()`，第一个说法是模棱两可的。你说，“嘿，我想运行一些 javascript”，但是你没有提供任何代码。不一定清楚浏览器应该在这里做什么。对于第二个语句，您说“嘿，运行一些 javascript”，您的代码最终返回未定义，浏览器知道这意味着“什么也不做”。

既然我在这里，我还要指出，大多数关心标记的人都不再喜欢使用`javascript:`or 。`javascript:void();`更好的做法是让您的 onclick 处理程序返回 false，并让链接指向一个页面/资源，这对于关闭 javascript 或使用 javascript 拦截器（如 NoScript）的人来说是有意义的。

# html - 在其他 HTML 页面中嵌入 HTML 文件

> ID：666939
> 
> 赞同：3
> 
> 时间：2009-03-20T16:33:15.223
> 
> 标签：html

我是 HTML 新手。我有一个名为“ `main.html`”的 html 页面，我想在其中包含另一个名为“ `menu.html`”的 html 页面。我的`main.html`页面不包含框架，它是使用`div`标签设计的。我的网站托管在基于 linux 的服务器上 我必须重新设计的网站是[Java 问题](http://www.java-questions.com)。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-20T16:38:37.160

您想查看服务器端包含 (SSI)。如果该站点在 Apache 上运行，则Apache 的本[教程应该可以帮助您启动并运行。](http://httpd.apache.org/docs/1.3/howto/ssi.html)

有很多服务器端方法可以做到这一点，但除了 SSI 之外的所有方法都需要使用 HTML 以外的语言。

如果您使用的是 IIS，您可以查看[Microsoft 在 Server Side Includes 上的文章](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/eced0b89-e052-42ff-baa8-751dd191c3b5.mspx?mfr=true)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T16:35:08.633

检查服务器端包括。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-20T16:49:52.047

您应该使用服务器端包含。即在 jsp 中你可以使用: `<c:import url="/include/navigation.jsp" />`, 在 php 中`<?php include("/sidebar.php");?>`等等。这是满足您需要的好方法：包括导航菜单或所有页面共有的其他部分，而无需在每个页面中重写。您也可以通过其他方式（使用一些 javascript 即）执行相同操作，但我怀疑您是否想要构建一个名为*Java Questions*的站点而无需任何服务器端语言。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-20T21:04:03.933

我认为 PHP 是最简单的方法。大多数情况下，您只需将 main.html 文件更改为 main.php，然后将此 php 代码添加到您想要菜单栏的位置：

```
<?php include('menu.html'); ?> 
```

就是这样！您必须确保在您的服务器上安装了 php。这也只能在服务器上工作。因此，如果您在计算机上进行测试并使用诸如dreamweaver（甚至是浏览器）之类的东西，那么在它上线之前您将看不到任何东西。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-03-20T17:17:13.730

如果您想避免使用服务器，可以在 javascript 中进行 ajax 调用。

在 JQuery 中，你会这样做：

```
<div id="putStuffHere">

</div>
<script>
$('#putStuffHere').load('myStuff.html');
</script> 
```

# asp.net-mvc - 如何将 NUnit 作为 ASP.NET MVC 的测试框架选项添加到 Visual Web Developer 2008 Express？

> ID：666941
> 
> 赞同：19
> 
> 时间：2009-03-20T16:33:39.700
> 
> 标签：asp.net-mvc, nunit, vwdexpress

根据*[Professional ASP.NET MVC 1.0](http://weblogs.asp.net/scottgu/archive/2009/03/10/free-asp-net-mvc-ebook-tutorial.aspx)*第 8 页，“如果您使用 VS 2008 Standard Edition 或 Visual Web Developer 2008 Express，您将需要下载并安装 ASP.NET MVC 的 NUnit、MBUnit 或 XUnit 扩展，以便 [将显示创建单元测试项目]对话框。”

NUnit 2.4.8 是否有这样的扩展可供下载？如果是这样我可以从哪里下载它？

如果没有，我该如何设置？我查看了[ASP.Net MVC 和 nUnit](https://stackoverflow.com/questions/21137/asp-net-mvc-and-nunit)问题以及文章[How to: Add a Custom MVC Test Framework in Visual Studio](http://msdn.microsoft.com/en-us/library/dd381614.aspx)和[ASP.NET MVC Test Framework Integration Walkthrough](http://blogs.msdn.com/webdevtools/archive/2008/03/06/asp-net-mvc-test-framework-integration-demo.aspx)。但它们都指的是运行`devenv /setup`，这似乎不适用于 Visual Web Developer 2008 Express。有没有人使用 NUnit 和 VWD Express 获得创建单元测试项目对话框？怎么会这样？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2011-04-17T20:49:30.213

现在在 2011 年最简单的方法是从 Visual Studio 库安装这个[ASP.NET MVC NUnit 扩展。](http://visualstudiogallery.msdn.microsoft.com/7f3bdc82-f418-41aa-ad15-f1d6f89df47a)好的部分是这个扩展可以随着时间的推移而更新，所以你将拥有最新的 nunit mvc 模板。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-30T03:50:12.283

我刚刚找到了[更新的 ASP.Net MVC 1.0 RTM 的 NUnit 模板，](http://blogs.msdn.com/webdevtools/archive/2009/04/28/updated-nunit-templates-for-asp-net-mvc-1-0-rtm.aspx)其中包含一个 cmd 文件，用于设置 VWD Express 的 NUnit 测试框架模板。

是的，没有更多的手动步骤（除非你真的想要）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-26T15:14:48.263

**编辑：**[下面](https://stackoverflow.com/questions/666941/how-do-i-add-nunit-as-a-test-framework-option-for-asp-net-mvc-to-visual-web-devel/805276#805276)有一个更简单的解决方案。

我得到了使用 NUnit 和 Visual Web Developer Express 的 Create Unit Test Project 对话框。我必须将 NUnit[测试模板](http://blogs.msdn.com/webdevtools/archive/2008/03/06/asp-net-mvc-test-framework-integration-demo.aspx)添加到以下位置：（`%ProgramFiles%\Microsoft Visual Studio 9.0\Common7\IDE\VWDExpress\ProjectTemplates\CSharp\Test\1033`我必须创建`Test\1033`子文件夹）。

然后我`VWDExpress /setup`按照 Craig Stuntz 的建议（来自`%ProgramFiles%\Microsoft Visual Studio 9.0\Common7\IDE`）运行。

它奏效了！

注意：我之前从[这里](http://blogs.msdn.com/webdevtools/archive/2008/03/06/asp-net-mvc-test-framework-integration-demo.aspx)添加了注册表设置，但将它们应用于`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\VWDExpress\9.0\MVC\TestProjectTemplates`.

为方便起见，以下是与[ASP.NET MVC 测试框架集成演练](http://blogs.msdn.com/webdevtools/archive/2008/03/06/asp-net-mvc-test-framework-integration-demo.aspx)文章的区别：

步骤 1\. 将模板 zip 文件复制到`%ProgramFiles%\Microsoft Visual Studio 9.0\Common7\IDE\VWDExpress\ProjectTemplates\CSharp\Test\1033`（注意 VWDExpress 文件夹）

步骤 2\. 在合并注册表文件之前，编辑它们以指向以下适当位置：（`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\VWDExpress\9.0\MVC\TestProjectTemplates`注意 VWDExpress 键）

步骤 4\. 运行`VWDExpress /setup`而不是`devenv /setup`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2010-02-17T03:51:18.577

谢谢这一切太好了！我有一些皱纹，因为我只有 MVC2 和 VWD express 2010。所以在早期的文章和指针中假设的各种事情并不完全有效。

我为对我有帮助的东西做了一个大纲，从“[为 ASP.Net MVC 1.0 RTM 更新的 NUnit 模板](http://blogs.msdn.com/webdevtools/archive/2009/04/28/updated-nunit-templates-for-asp-net-mvc-1-0-rtm.aspx)”一文中的模板和 .CMD 文件的基础开始。

1.  备份您的注册表
2.  [从1](http://blogs.msdn.com/webdevtools/archive/2009/04/28/updated-nunit-templates-for-asp-net-mvc-1-0-rtm.aspx)解压缩 nunitRTM.zip 文件。
3.  您可以运行命令文件，它不会查找 VWDexpress 2010；因此请仔细查看您需要修复或手动执行多少操作（请参阅以下步骤）
4.  将模板 (.ZIP) 文件复制到 C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE\VWDExpress\ProjectTemplates ... Csharp\test 和 VisualBasic\test
5.  我制作了两个注册表更新文件：Csharp\NUnitExpress2010.reg 和 VisualBasic\NUnitExpress2010.reg；来自 Csharp\NUnitExpress.reg 和 VisualBasic\NUnitExpress.reg 文件（分别）。
6.  主要区别在于使用注册表项：HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft**VWDExpress****10.0****MVC2**\TestProjectTemplates
    注册表项含义涵盖在：“ [ASP.NET MVC 测试框架集成](http://blogs.msdn.com/webdevtools/archive/2008/02/18/asp-net-mvc-test-framework-integration.aspx)”
7.  更新reistry：regedit.exe /s "Visual Basic\NUnitExpress2010.reg" (eg)
8.  为 Visual Web Designer 运行设置：C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE\VWDExpress.exe" /setup
9.  启动 VWD express 并打开一个新项目——有 nUnit 模板。

我发现它很乏味，仍然坚持它是值得的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-20T19:22:17.000

在 VWD Express 中，使用

```
VWDExpress /setup 
```

替代

```
devenv /setup 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-24T07:59:54.673

要进行快速测试，请尝试[xUnit](http://www.codeplex.com/xunit)（[此处](http://stephenwalther.com/blog/archive/2008/06/30/an-introduction-to-the-xunit-net-testing-framework-for-asp-net-mvc-developers.aspx)有更多详细信息）。如果它有效，那么进一步挖掘 NUnit 集成。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-23T16:16:49.520

我刚刚发现一篇博客文章也解决了这个问题：[NUnit VWD Express MVC setup « A Coders Life](http://acoderslife.wordpress.com/2009/03/25/nunit-vwd-express-mvc-setup/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-24T23:26:58.360

您是否安装了完整的 .net 2.0 NUnit：[http ://www.nunit.org/index.php?p=download](http://www.nunit.org/index.php?p=download)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-15T12:43:45.073

我也一直在为同样的事情而苦苦挣扎。我最后所做的是我接受了 ASP.NET MVC 团队创建的单元测试（在安装程序中找到），将它与您提到的页面提供的模板混合在一起，瞧！它工作得很好：D

[你可以在这里](http://padcom13.blogspot.com/2009/04/nunit-template-for-aspnet-mvc.html)下载整个包

最好的问候，马蒂亚斯。

# windows-7 - 枚举所有 Vista/7 音频“会 话”，如音量混合器中所示

> ID：666943
> 
> 赞同：1
> 
> 时间：2009-03-20T16:35:32.143
> 
> 标签：windows-7, windows-vista

在 Windows Vista 和 7* 中，您将如何枚举当前正在播放音频的程序（或尝试在主音量静音的情况下）？本质上，我需要在通知区域中找到的音量混合器中显示的数据。

主音量非常简单：ISimpleAudioVolume::GetMasterVolume() [http://msdn.microsoft.com/en-us/library/ms679156(VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms679156(VS.85).aspx)

但是没有任何关于特定程序的内容即将发布。

*显然目标是 Vista，但我认为没有理由解决方案在 7 中也不起作用。

语言无关紧要，尽管 C# 会受到赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-04T20:26:35.470

幸运的是，您的答案不正确。查看[IAudioSessionManager2](http://msdn.microsoft.com/en-us/library/dd370950(VS.85).aspx)接口 - RegisterSessionNotification API 是您的朋友。

# c# - 避免 .NET 代码中的 ABA 问题

> ID：666954
> 
> 赞同：9
> 
> 时间：2009-03-20T16:39:32.010
> 
> 标签：c#, .net, concurrency

请注意，我已经知道并理解[ABA 问题](http://en.wikipedia.org/wiki/ABA_problem)。这个问题是关于 .NET 内存模型关于 ABA 的行为。

Joe Duffy在他对无[锁 LIFO 堆栈](http://msdn.microsoft.com/en-us/magazine/cc163427.aspx#S7)的讨论（2007 年 5 月 MSDN 杂志的 CLR Inside Out 专栏）中说：

“我们为每个 Push 分配一个对象，让我们不必担心所谓的 ABA 问题。”

然后，他继续非常简要地描述了 ABA 问题，并提到这可能发生在本机 C/C++ 中，因为内存分配器可以在释放地址后立即重用它。

一切都很好。但是，是什么让 .NET 程序不受 ABA 问题的影响呢？他是否暗示因为节点不能立即重用（即节点超出范围和GC收集它之间存在一些延迟）所以不可能发生ABA问题？如果是这样，这是一个安全的断言吗？

我将是第一个承认我不了解 .NET 内存分配器或垃圾收集器的所有复杂性的人，但我有限的理解使我相信*可以*重用引用。如果存在可以重用引用的可能性，那么这是否会使 ABA 问题成为可能，如果确实极不可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-20T16:54:54.687

如果线程 1 在内存地址 X 有对象引用，那么根据定义，线程 2 所做的任何事情都不会导致另一个对象使用相同的地址。该对象仍然是活动的，并且它的地址不会被重用，直到没有对它的引用。这保证了——当联锁交换操作返回我们期望的值时——ABA 问题没有发生。

# iphone - 在 iPhone 上调试 applicationDidReceiveMemoryWarning 的最佳方法？

> ID：666965
> 
> 赞同：9
> 
> 时间：2009-03-20T16:42:45.170
> 
> 标签：iphone, objective-c, cocoa-touch, memory-leaks

需要有关如何调试的建议。我是新手，环境有限，以前没有嵌入式或智能手机编程经验，所以我可以使用一些线索。已经知道：仪器、Clanger 静态分析、手动代码审查等。仪器在一般情况下似乎很有帮助，但非常耗时，而且很多时候都卡住了！Clanger 也帮助了我很多。总的来说，我似乎只是消耗了太多的内存，我想知道什么是好的策略。我会释放一些顶级对象吗？有“首选策略”吗？

只是想知道是否有人成功解决了这个问题，以及他们是否有其他建议？谢谢大家。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-21T08:35:45.050

有很多关于 iPhone 应用程序内存管理的好文章。这里有一些有用的链接。

*   [http://iosdevelopertips.com/objective-c/memory-management.html](http://iosdevelopertips.com/objective-c/memory-management.html)
*   [http://kosmaczewski.net/2009/01/28/10-iphone-memory-management-tips/](http://kosmaczewski.net/2009/01/28/10-iphone-memory-management-tips/)
*   [https://cocoa-touch.blogspot.com/2008/09/memory-management-on-iphone.html](https://cocoa-touch.blogspot.com/2008/09/memory-management-on-iphone.html)

您通常应该注意的事情

1.  释放您不需要的任何变量
2.  始终处理`didReceiveMemoryWarning`和释放任何未使用的变量
3.  停止任何占用大量内存的进程，`applicationDidReceiveMemoryWarning`如音频/视频播放、UIImagePickerController 等

**编辑** 这不再适用。`imageNamed:`在 3.x 操作系统版本之前存在缓存问题。该问题不再存在，您应该使用 imageNamed: (使实现视网膜显示更容易)

4.  不要`imageNamed:`用于创建 UIImage 对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-20T17:04:44.600

基本上，您收到此警告是因为（不出所料）iPhone 的内存非常低。这通常可能是由于以下两个原因之一；

1.  你有内存泄漏。
2.  您分配了太多的对象，需要重新审视您的设计。

对于第一个，您应该运行仪器并检查您的内存分配。这确实会减慢您的应用程序的速度（并且需要额外的内存），因此请尝试一次测试一个应用程序的区域。例如，如果您有多个视图在它们之间切换几次。

对于第二个，您将不得不检查您正在执行的可能导致大量内存分配的事情。例如，如果您正在编写 Flickr 浏览器，您可能需要随时减少已加载的图像数量，或者在收到此警告时释放一些未使用的图像。

这些是我可以在不了解您的应用程序的情况下建议的唯一一般规则。

不幸的是，没有真正的方法（据我所知）从 iPhone OS 获取当前内存分配的数据。这使得隔离应用程序中无意中占用大量内存的区域变得非常困难。

# build-process - 构建服务器硬件配置

> ID：666967
> 
> 赞同：4
> 
> 时间：2009-03-20T16:42:57.117
> 
> 标签：build-process, continuous-integration

所以我看到[了这个问题](https://stackoverflow.com/questions/184940/recommended-spec-for-a-build-server)，但我正在寻找一些更一般的建议：**你如何指定构建服务器？**具体来说，我应该采取哪些步骤来确切地确定用于新构建服务器的处理器、HD、RAM 等。我应该考虑哪些因素来决定是否使用虚拟化？

我正在寻找我需要采取的一般步骤来决定购买什么硬件。导致我得出具体结论的步骤 - 认为“我需要 4 gigs 的 ram”而不是“尽可能多的 RAM”

PS我故意不提供细节，因为我正在寻找教人钓鱼的答案，而不是只适用于我的情况的答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-20T16:48:42.347

答案是机器需要什么要求才能“构建”您的代码。这完全取决于您正在谈论的代码。

如果它有几千行代码，那么只需将那个旧桌面从壁橱中拉出来。如果它有几十亿行代码，那么请与银行经理谈谈，为您提供刀片机箱贷款！

我认为从构建服务器开始最好的地方是给自己买一台新的开发机器，然后重建你的旧机器作为你的构建服务器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-20T17:14:06.387

我将首先在您当前用于构建的任何系统上收集构建的一些性能指标。我会专门查看 CPU 和内存利用率、从磁盘读取和写入的数据量以及生成的网络流量（如果有的话）。在 Windows 上，您可以使用 perfmon 来获取所有这些数据；在 Linux 上，您可以使用 vmstat、iostat 和 top 等工具。找出瓶颈在哪里——你的构建 CPU 受限吗？磁盘绑定？渴望内存？这些问题的答案将指导您的购买决定——如果您的构建对 CPU 造成了冲击，但生成的数据相对较少，那么放入一个尖叫的基于 SCSI 的 RAID 磁盘就是浪费金钱。

在收集这些指标时，您可能还想尝试以不同级别的并行度运行构建。如果您使用的是 gnumake，请使用 和 运行您`-j 2`的`-j 4`构建`-j 8`。这将帮助您查看构建是否受 CPU 或磁盘限制。

还要考虑一下，满足您需求的正确构建服务器实际上可能是一组廉价系统而不是一个庞大的盒子——那里有很多分布式构建系统（gmake/distcc、pvmgmake、ElectricAccelerator 等）可以帮助您比使用单个大型系统更好地利用一系列廉价计算机。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-20T17:10:37.333

需要考虑的事项：预计将同时构建多少个项目？一个项目等待另一个项目完成是否可以接受？

您打算进行 CI 还是计划构建？

您的构建通常需要多长时间？

你用的是什么构建软件？

大多数 Web 项目都足够小（构建时间不到 5 分钟），购买大型服务器没有任何意义。

例如，我们有大约 20 名开发人员积极参与 6 个不同的项目。我们为所有项目使用运行 CI 的单个 TFS 构建服务器。他们将建立在每次签到的基础上。

我们所有的项目都在 3 分钟内完成。

构建服务器是具有 4GB 内存的单四核。我们使用它的主要原因是为 QA​​ 执行开发和暂存构建。构建完成后，该应用程序将自动部署到适当的服务器。它还负责针对这些项目运行单元测试和 Web 测试。

您使用的构建软件类型非常重要。TFS 可以利用每个内核在解决方案中并行构建项目。如果您的构建软件无法做到这一点，那么您可能会根据需要研究拥有多个构建服务器。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-11T21:04:02.250

我们的商店支持 16 种产品，从几千行代码到几十万行（此时可能超过一百万）。我们使用 3 台 HP 服务器（大约 5 年历史），双四核和 10GB RAM。这些磁盘是 7200 RPM SCSI 驱动器。全部通过命令行上的 msbuild 编译并启用并行编译。

使用这种设置，到目前为止，我们最大的瓶颈是磁盘 I/O。我们将彻底擦除我们的源代码并在每次构建时重新签出，删除和签出时间真的很慢。编译和发布时间也很慢。CPU 和 RAM 没有远程征税。

I am in the process of refreshing these servers, so I am going the route of workstation class machines, go with 4 instead of 3, and replacing the SCSI drives with the best/fastest SSDs I can afford. If you have a setup similar to this, then disk I/O should be a consideration.

# windows-server-2003 - Perfmon 将不再运行

> ID：666968
> 
> 赞同：1
> 
> 时间：2009-03-20T16:43:02.673
> 
> 标签：windows-server-2003, perfmon

今天我打破了性能...... :(

我可以启动应用程序，三个默认计数器（cpu、mem、disk）都在那里，但图形不会移动。

数据源设置为“当前活动”，未按下“冻结显示”按钮。我刚刚重新启动，启动了 perfmon，并且没有移动图形。

我尝试使用恢复计数器

```
C:\WINDOWS\system32>lodctr.exe /R 
```

但这并没有帮助。

使用 Windows Server 2003 R2，32 位。一位同事在类似的环境中也遇到了这个问题，但我们还无法确定原因。

（对于downvoter（s）：我知道它与编程没有直接关系，但是在没有任何测量的情况下编写一个性能应用程序有点困难（但这可能只是我）

* * *

为了让这更有趣：

以下代码也不检索值：

```
System.Diagnostics.PerformanceCounter ctr =
        new System.Diagnostics.PerformanceCounter();
ctr.CategoryName = "Processor";
ctr.CounterName = "% Processor Time";
ctr.InstanceName = "_Total";
ctr.MachineName = ".";

float val = ctr.NextValue().ToString();
// val equals 0 
```

要求的图像：

[替代文字 http://www.brokenwire.net/bw/file_download/23/perfmon.PNG](http://www.brokenwire.net/bw/file_download/23/perfmon.PNG)

（所以，图表没有填满屏幕，没有值出现）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-25T20:19:46.290

[一个可能相关的 SO 问题](https://stackoverflow.com/questions/242626/how-to-reset-performance-objects-in-perfmon)的公认答案是调用：

`lodctr.exe /s:PerfStringBackup.INI`

在

> ... perfmon 正常工作的 PC

然后将文件复制到受影响的机器上，然后在调用之前：

`lodctr.exe /R:tPerfStringBackup.INI`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-23T09:12:57.220

尝试以下微软解决方案：

[http://support.microsoft.com/default.aspx?scid=kb;en-us;300956](http://support.microsoft.com/default.aspx?scid=kb;en-us;300956)

它最后使用 C:\WINDOWS\system32>lodctr.exe /R 但您正在编辑注册表，它可能会成功。

我希望它有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-24T07:23:07.977

您是否尝试过修复 Windows 安装？使用 Windows 安装光盘？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-26T12:11:54.800

右键单击图表。您说数据源设置为当前活动。那是在源选项卡上。转到“常规”选项卡，一直到底部。确保选中“每隔：自动采样”，并确保采样时间合理（1 是默认值——1 秒）。如果已选中，请取消选中，然后再次选中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-30T00:35:11.747

听起来你一直在努力工作。你检查过[http://www.tomshardware.com/forum/117911-45-perfmon](http://www.tomshardware.com/forum/117911-45-perfmon)吗？然后你可以仔细检查你的注册表以确保它是正确的。此外，如果您有 Windows cd，则可以复制 perfmon 文件的新副本。

# c# - 如何在 Web 应用程序中使用单点登录

> ID：666969
> 
> 赞同：1
> 
> 时间：2009-03-20T16:43:09.910
> 
> 标签：c#, asp.net, web-config, forms-authentication, single-sign-on

我有一个 ASP.NET 2.0 Web 应用程序（C#），我想在其中启用单点登录。我只希望某些用户可以访问所有页面，而其他用户只能看到几个页面。我需要对我的 Web.config 文件进行哪些更改，以及我的页面代码隐藏中需要哪些代码？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-20T17:17:04.353

幸运的是，构建 ASP.NET 时正是考虑到了这种场景。

这里的一个简单示例是以下项目结构：

*   登录页面.aspx
*   默认.aspx
*   网络配置
*   /受保护
    *   MembersOnlyPage.aspx
    *   网络配置

如果我对您的理解正确，您可以简单地将“web.config”文件放入上面显示的“受保护”文件夹中。该 web.config 文件应如下所示：

```
<system.web>
<authorization>
 <allow users ="Bob, Jane, Mary" />
</authorization>
</system.web> 
```

阅读**`<allow>`**和的**`<deny>`**元素**`<authorization>`**，因为您还可以使用“角色”属性而不是“用户”来指定应该有权访问或被拒绝访问的用户组。

然后，您需要修改根 web.config 文件以“打开”表单身份验证。添加类似：

```
<authentication mode="Forms" >
 <forms loginUrl="LoginPage.aspx" name=".ASPNETAUTH" protection="All" path="~/" timeout="20">
</forms>
</authentication> 
```

...到你的`<system.web>`元素。

现在，您所要做的就是连接您的 LoginPage.aspx 以使用户登录。您可以使用标准的 ASP.NET 登录控件来实现此目的，如果您想使用自己的数据库进行身份验证/授权，您可以拦截登录控件的事件以执行您需要的任何操作。

要获得最快、最基本的解决方案，请查看以下视频：

[http://www.asp.net/learn/videos/video-45.aspx](http://www.asp.net/learn/videos/video-45.aspx)

希望这可以帮助

/理查德

# bash - bash 屏幕的脚本

> ID：666977
> 
> 赞同：0
> 
> 时间：2009-03-20T16:45:17.567
> 
> 标签：bash, unix, gnu-screen, backgrounding

我有以屏幕为背景的进程。我正在尝试编写一个附加到终端的脚本，执行几个命令，然后分离。问题是当我连接到终端时，屏幕会将控制权交给用户。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-20T16:52:35.957

Screen 有一个选项 -X，您可以使用它从脚本中远程控制屏幕会话。例如，请参见[此处](http://www.jerri.de/blog/archives/2006/05/02/scripting_screen_for_fun_and_profit/)。

# documentation - 我的系统文档如何更具交互性？

> ID：666979
> 
> 赞同：2
> 
> 时间：2009-03-20T16:45:40.980
> 
> 标签：documentation

也许如果我把我的文档做得更好，我可以花更少的时间来支持开发人员，而花更多的时间来开发自己：

我开发了一个关键平台，供 10 名其他开发人员和 50 名最终用户使用。开发人员具有混合能力，从领域专家到相对初学者。由于我是了解核心平台如何工作的人之一，因此来自其他开发人员的支持请求通常通过我进行。

我们的文档是任何成熟项目都会拥有的通常类型的描述性内容：我们有一个大型 wiki，其中包含所有常用操作程序的详细信息以及广泛的 API 文档。

不幸的是，它不能很好地解决“我该如何解决”类型的问题：

是否有可能制作一些交互式故障诊断文档，让用户通过标准化的故障查找程序。文档会询问用户一系列问题，并根据用户的输入告诉他们该做什么……这将是一个非常简单的专家系统，或者可能是一个文档状态机。

这个想法是帮助新手更有条理地思考诊断这个复杂系统中的故障。

我的问题：

*   是否有任何旨在实现这种用户体验的免费工具？我宁愿不用手卷这个。必须有某种用于交互式帮助和文档的框架。

*   以前有人实施过这种系统吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-23T06:07:45.483

如果您只是想要一个流程图/统计机器的东西，其中用户通过回答问题从起点移动到一组可能的解决方案，那么您可以将其实现为一组 wiki 页面，其中可能对问题的响应在一页上是指向其他页面的链接。

该解决方案依赖于能够将问题的答案表示为链接，如果信息更像表单，这将不起作用。例如，假设一个问题是“你有什么品牌的显卡？” 答案是 300 种可能的选项之一。在这种情况下，创建链接会很烦人:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-23T07:01:40.720

如果开发人员问的问题太多，那么我建议让他们自己研究问题并提出答案，然后再与您核对，而不是鼓励他们每次都问您。问别人比自己找到答案要容易得多，但如果他们不自己寻找答案，他们就永远学不会。

如果用户问了很多问题，那么您可能需要一些用户界面改进。尝试将提示放在屏幕顶部或底部的应用程序本身。

对于这两组用户，wiki 都可以提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-23T08:04:02.583

*   您的 wiki 中的常见问题解答
*   如果错误发生得太频繁，请尝试阻止它或输出更有用的错误消息（例如“如果发生这种情况，可能的原因是……）

# c# - 文件名、目录名或卷标语法不正确，c#

> ID：666983
> 
> 赞同：2
> 
> 时间：2009-03-20T16:46:29.607
> 
> 标签：c#, .net, batch-file

我编写了一个运行批处理脚本的控制台应用程序 deploy.exe。

```
Process p1 = new Process();
p1.StartInfo.FileName = AppDomain.CurrentDomain.BaseDirectory + "installer.bat";
p1.StartInfo.WindowStyle = ProcessWindowStyle.Normal;
p1.Start();
p1.WaitForExit();
p1.Close(); 
```

installer.bat 包含以下命令。\shared1\lists\list1.cmd

如果我自己运行可执行文件，它会成功运行。

但是我需要它在 Windows 安装程序项目中运行。所以我做了一个设置和部署项目，并在安装时成功添加了 deploy.exe 作为自定义操作。

它运行良好，但是当它开始执行命令时出现此错误“文件名、目录名或卷标语法不正确”。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-24T10:27:56.177

错误似乎在正在执行的脚本中。它包含环境变量 %kind%，由于某种原因，安装程序不能接受。所以它在安装程序之外正常工作，而在安装程序调用它时却不能正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-20T17:11:10.483

尝试打印出的值`AppDomain.CurrentDomain.BaseDirectory`是什么。它可能不在`installer.bat`您安装它的位置。

此外，您尝试将 bat 文件添加到自定义操作（如果可能的话）？

而且，是否可以将 bat 中的内容移动到 exe 中？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-20T17:19:22.413

你的批处理文件有问题吗？

检查这个：

`\\shared1\\lists\\list1.cmd`

应该是

`\\shared1\lists\list1.cmd`

请注意原始命令中的额外 \ 字符。这将导致批处理文件给出该错误。

# php - 如何在php页面上显示日文字符？

> ID：666987
> 
> 赞同：4
> 
> 时间：2009-03-20T16:47:45.983
> 
> 标签：php, unicode, character-encoding

我正在尝试在 PHP 页面上显示日文字符。没有从数据库加载，只是存储在语言文件中并回显。

我遇到了一个奇怪的场景。我使用 UTF-8 正确设置了页面，并在我的本地 WAMP 服务器上测试了一个示例页面，它可以正常工作。

在我测试我们的开发和生产服务器的那一刻，角色无法正确显示。

这让我相信这是 php.ini 中的设置。但是我没有找到太多关于此的信息，所以我不确定这是否是问题所在。

我缺少一些基本的东西吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-20T16:52:45.987

[您必须在HTTP 标头字段`Content-Type`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.17)中提供具有正确编码声明的文档。

在 PHP 中，您可以在第一个数据发送到客户端之前通过[`header`函数](http://docs.php.net/header)执行此操作，因此最好作为第一个语句之一：

```
<?php
    header('Content-Type: text/html;charset=utf-8');

    // the rest 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-20T17:05:39.123

由于您已经声明它在您的开发环境中而不是在您的生活中工作，因此您可能需要检查 Apache 的[AddDefaultCharset](http://httpd.apache.org/docs/2.0/mod/core.html#AddDefaultCharset)并将其设置为 UTF-8（如果还没有的话）。

我倾向于确保检查以下步骤

1.  PHP Header 以 UTF-8 格式发送
2.  元标记设置为 UTF-8（内容类型）
3.  存储设置为 UTF-8
4.  服务器输出设置为 UTF-8

这似乎对我有用。希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-20T16:52:12.947

首先，我假设两个测试使用相同的客户端机器。

因此，使用 Firebug 或您选择的工具来检查本地服务器上的 HTTP 响应标头，并将它们与其他服务器生成的标头进行比较。毫无疑问，您会发现不同之处。

通常，您的服务器应该在响应中包含这样的标头：

```
Content-Type: text/html; charset=UTF-8 
```

如果两个系统上的标头看起来几乎相同，请获取两个响应的正文并将其加载到十六进制编辑器中并查找编码差异。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-27T05:32:19.507

**尝试以下（为我工作，CentOS 6.8，PHP 5.6）**

**#1**
Apache 配置

> /etc/httpd/conf/httpd.conf
> AddDefaultCharset UTF-8

**#2**
PHP 配置

> /etc/php.ini:
> default_charset = "utf-8" >> default_charset = "Shift_JIS"

**注意：设置 error_reporting = E_ALL & ~E_DEPRECATED & ~E_STRICT**

**#3**
html 头部元数据

> http-equiv="content-type" content="text/html; charset=Shift_JIS"

# java - 如何让 MigLayout 与我的项目一起使用？

> ID：666992
> 
> 赞同：1
> 
> 时间：2009-03-20T16:49:29.443
> 
> 标签：java, classpath, miglayout

我正在尝试制作一个小型 GUI 应用程序，我想将 MigLayout 与它一起使用。作为 Java 新手，我不知道如何让 MigLayout 与我的代码一起工作，而且我的想法已经不多了。

我的项目源代码在 ~/git/project/src/qdb/

qdb 是我的 java 包名。我下载了 miglayout-3.7-swing.jar 和 miglayout-3.7.jar 并将它们放在我的项目源中并尝试编译代码，但我收到指向“ `new MigLayout()`”的错误，说明“找不到符号”。

我在 src 目录中并使用“ `javac qdb/*.java`”来编译（`*`被扩展）。我还尝试将类路径指向我的来源，例如：“ `javac -classpath /home/user/git/project/src/qdb/ qdb/*.java`”但我仍然收到错误。

然后我还尝试将 jar 文件放入 ~/jars/ 并将其用作类路径，但仍然出现相同的错误。

那么，如何让 MigLayout 工作呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-20T16:55:04.373

只需添加`miglayout-3.7-swing.jar`到您的类路径：

```
javac -classpath /your/path/to/miglayout-3.7-swing.jar qdb/*.java 
```

（如本线程[安装 Mig Layout](http://www.migcalendar.com/forums/viewtopic.php?f=8&t=2307&sid=762dc6bd988a69f6b13c0b91331d3781)中所示）

* * *

如果您可以编译它们（使用上面的行），
但不能*执行*`java`生成的程序，您还需要将库添加到类路径中

```
java -classpath /your/path/to/miglayout-3.7-swing.jar:/your/project/compiledClass/dir qdb.yourMainClass 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-20T17:01:46.200

如果要将其放入 .jar 文件中，则需要在清单文件中指定 Class-Path：

`Class-Path: /your/path/to/miglayout.jar`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-20T17:50:40.420

VonC 的回答是对的。我只想补充一点（因为您是 Java 新手）您应该考虑使用 IDE 进行开发。它们将为您节省数小时的*手动编译*时间，并帮助您更轻松地将代码与库（例如 MigLayout）集成。

有两个我非常喜欢的免费 IDE：

IBM 的[Eclipse](http://www.eclipse.org/) .

SUN（即将成为 IBM）的[Netbeans](http://www.netbeans.org/)。

还要考虑[这个](https://stackoverflow.com/questions/149209/best-books-for-learning-java-6)SO 线程。还有[这个](https://stackoverflow.com/questions/77839/what-are-the-best-resources-for-learning-java-books-websites-etc)。

祝你好运。

# java - EJB 2.x“检测到可重入方法调用”异常的原因是什么？如何解决它们？

> ID：666995
> 
> 赞同：2
> 
> 时间：2009-03-20T16:49:58.990
> 
> 标签：java, exception, jboss, ejb

我正在维护一个 EJB 2 CMP 遗留应用程序，该应用程序在 JBoss 4.0.4 GA 应用程序服务器上运行，并部署了实体/无状态会话 bean。所有 EJB 样板代码都是通过 XDoclet 从 EntityEJB/EntityEJBManager 注释生成的。

我注意到，当我的 GUI 客户端调用外观`create`方法时，我的服务器日志中有很多 EJBException 案例以及“检测到可重入方法调用”消息，这会回滚事务。

这个异常是什么意思？我怎样才能避免出现这样的错误（不幸的是，我还不能重现）

* * *

更新：[找到这个解释什么是 reentrancy 的链接](http://www.coderanch.com/t/160657/java-EJB-SCBCD/certification/reentrant)，但是，在我看来，它说我的应用程序不能同时访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-05T07:53:33.867

I've seen this before where EJB1 calls EJB2 which calls back to EJB1 within the container as part of the same transaction.

You can tell the container to allow this by marking EJB1 as reentrant which will allow it to be accessed multiple times in the same transaction.

This is done in the deployment descriptor with the following tag:

```
<reentrant>True</reentrant> 
```

There should be a corresponding EntityEJB annotation that XDoclet can use to generate this for you.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-11-09T12:57:18.860

我们刚刚遇到了同样的问题，我们的解决方案是双重的。首先，我们确保在我们的 ejb-jar.xml 中没有一个 ejb 具有 NotSupported 的事务属性。然后我们使用“每个事务的实例”作为我们的乐观锁定策略。这有点像腰带和大括号的方法，但它有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-20T17:00:25.330

这确实意味着不能同时访问有问题的实体 bean，这是有道理的，因为它可能会破坏数据。

# perl - 如何将块用作“或”子句而不是简单的骰子？

> ID：666996
> 
> 赞同：14
> 
> 时间：2009-03-20T16:50:12.077
> 
> 标签：perl, syntax, codeblocks

我想检查 Net::FTP Perl 模块中的操作结果，而不是死掉。

通常你会这样做：

```
$ftp->put($my_file)
  or die "Couldn't upload file"; 
```

但我想做其他事情，而不是仅仅死在这个脚本中，所以我尝试了：

```
$ftp->put($my_file)
  or {
      log("Couldn't upload $my_file");
      return(-1);
  }

log("$my_file uploaded"); 
```

但是 Perl 抱怨编译错误说：

```
syntax error at toto.pl line nnn, near "log" 
```

这是我的代码片段中的第二个日志。

任何建议都非常感谢。

干杯，

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-03-20T16:53:14.003

[*`do`*](http://search.cpan.org/perldoc?perlfunc#do)是你要找的：

```
$ftp->put($my_file)
  or do {
      log("Couldn't upload $my_file");
      return(-1);
  };

log("$my_file uploaded"); 
```

但这*可能*是更好的风格：

```
unless( $ftp->put( $my_file )) { # OR if ( !$ftp->put...
      log("Couldn't upload $my_file");
      return(-1);
} 
```

如果你只是想返回一个错误条件，那么你可以在调用函数中[`die`](http://search.cpan.org/perldoc?perlfunc#die)使用。[`eval`](http://search.cpan.org/perldoc?perlfunc#eval)

```
use English qw<$EVAL_ERROR>; # Thus, $@ <-> $EVAL_ERROR

eval { 
    put_a_file( $ftp, $file_name );
    handle_file_put();
};

if ( $EVAL_ERROR ) { 
    log( $EVAL_ERROR );
    handle_file_not_put();
} 
```

然后打电话

```
sub put_a_file { 
    my ( $ftp, $my_file ) = @_;
    $ftp->put( $my_file ) or die "Couldn't upload $my_file!";
    log( "$my_file uploaded" ); 
```

}

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-20T17:05:13.990

或做{}；总是让我头疼。是否有充分的理由使用“或”语法（我承认在一个衬里使用了很多）与“if”（我更喜欢在多衬里使用）？

那么，是否有理由使用或不使用其中一种方法而不是另一种？

```
foo()
  or do {
    log($error);
    return($error);
  };
log($success);

if (!foo()) {
  log($error);
  return($error);
}
log($success); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-20T16:52:07.860

使用**做**。

这是小代码片段：

```
 sub test {
    my $val = shift;
    if($val != 2) {
        return undef;
    }
    return 1;
}

test(3) || do {
            print "another value was sent";
}; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-03-20T19:28:37.423

我很难理解为什么这需要包含在一个 do 中。有理由说这还不够吗？

```
my $ftp_ok = $ftp->put( $my_file )
  or log("Couldn't upload $my_file" ) and return -1;

log("$my_file uploaded") if $ftp_ok; 
```

这假设 put 函数并不总是在成功时返回 undef。

# sql - mysql和sql server的区别？性能，功能，...？

> ID：666997
> 
> 赞同：2
> 
> 时间：2009-03-20T16:50:31.140
> 
> 标签：sql, mysql, sql-server

MySQL和Sql server有什么区别？两者之间选择的参数是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-20T16:56:53.030

这里有几个问题与各种风格的数据库比较有关：

[数据库之间的主要区别是什么？](https://stackoverflow.com/questions/481879/what-are-the-major-differences-between-databases)

[https://stackoverflow.com/questions/404776/why-isnt-postgresql-as-widespread-as-mysql](https://stackoverflow.com/questions/404776/why-isnt-postgresql-as-widespread-as-mysql)

[选择数据库时在哪里可以找到好的参考？](https://stackoverflow.com/questions/195353/where-to-find-a-good-reference-when-choosing-a-database)

[postgresSQL mysql oracle 的区别](https://stackoverflow.com/questions/216601/postgressql-mysql-oracle-diferences)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-20T16:57:26.367

在两者之间进行选择的参数是价格标签。您“期望”为您的数据库支付多少费用。如果它为零，那么 MySQL 可能对你来说已经足够好了，如果它是 10k，那么 SQL Server 可能对你来说已经足够好了。

至于实际的差异，实在是太多了，就不一一列举了。

# c# - LINQ 数据库

> ID：666998
> 
> 赞同：2
> 
> 时间：2009-03-20T16:50:49.847
> 
> 标签：c#, linq, linq-to-sql

我有一个支持多种产品的系统。每个产品都有自己的数据库，具有相同的确切架构。

当我将连接字符串作为参数传递给我的数据上下文构造函数时，它始终使用连接字符串中列出的默认数据库，或者如果我未在连接字符串中提供初始目录，则使用连接用户的默认数据库。

我希望能够让系统利用数据库而无需更改连接字符串并将数据库名称作为参数传递。

这是我正在使用的代码示例：

```
class Program
    {
        static void Main(string[] args)
        {
            var d = new Data("Data Source=(LOCAL);Initial Catalog=Database1;Integrated Security=true;");

            var d1 = new Data("Data Source=(LOCAL);Initial Catalog=Database2;Integrated Security=true;");

            Console.ReadLine();
        }
    }

    internal class Data
    {
        public Data(string connection)
        {

            using (var ctx = new DataClassDataContext(connection))
            {
                var query = from c in ctx.MyTable select c;
                try
                {
                    Console.WriteLine(query.Count());
                }
                catch (Exception ex)
                {
                    Console.WriteLine(ex.Message);
                }

            }
        }
    } 
```

如果执行此代码，则第一个结果将从 Database1 中提取，第二个结果将从 Database2 中提取。我希望它能够从连接字符串中未提供的数据库中提取。这样做的原因是因为数据库可能会根据特定场景发生变化，但连接字符串将保持不变。

这是我用来“伪造”它的一个例子，但我并不认为这是最好的解决方案：

```
class oConnection
    {
        public string Server { get; set; }
        public string Database { get; set; }
        public bool IntegratedSecurity { get; set; }
        public string UserName { get; set; }
        public string Password { get; set; }
    }

    class Program
    {
        static void Main(string[] args)
        {
            var d = new Data(new oConnection
                                 {
                                     Database = "Database1",
                                     Server = "(Local)",
                                     IntegratedSecurity = true
                                 });

            var d1 = new Data(new oConnection
                                  {
                                      Database = "Database2",
                                      Server = "(Local)",
                                      IntegratedSecurity = true
                                  });
            Console.ReadLine();
        }
    }

    internal class Data
    {
        private static string BuildConnection(oConnection connection)
        {
            var sb = new StringBuilder();
            sb.Append("Data Source=" + connection.Server + ";Initial Catalog=" + connection.Database + ";");
            if(connection.IntegratedSecurity)
            {
                sb.Append("Integrated Security=true;");
            }
            else
            {
                sb.Append("user id=" + connection.UserName + ";password=" + connection.Password);
            }
            return sb.ToString();
        }

        public Data(oConnection connection)
        {

            using (var ctx = new DataClassDataContext(BuildConnection(connection)))
            {
                var query = from c in ctx.MyTable select c;
                try
                {
                    Console.WriteLine(query.Count());
                }
                catch (Exception ex)
                {
                    Console.WriteLine(ex.Message);
                }
            }
        }
    } 
```

另一个注意事项：这样做的目标实际上是在运行跨越多个数据库的查询时能够支持不具有多个不同的连接字符串。例如：如果我想从数据库中查询帐户记录，然后从另一个数据库中查询某种查找数据，我将不得不为上下文创建一个新的连接字符串。

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-20T17:05:04.337

使用接收 System.Data.IDbConnection 连接的构造函数。您可以使用相同的连接字符串，并在将其传递给构造函数之前调用 connection.ChangeDatabase("mydb")。或者，您可以在部分类上添加一个新的构造函数，因此调用调用不必处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-20T17:03:34.230

您可以使用 SqlConnectionStringBuilder 类********