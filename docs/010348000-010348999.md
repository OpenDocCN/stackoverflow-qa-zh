# StackOverflow 问答 10348000-10348999

# jquery - JQuery - 在表单上调用 validate() 并将 css 样式类添加到现有元素

> ID：10348001
> 
> 赞同：0
> 
> 时间：2012-04-27T09:17:30.183
> 
> 标签：jquery

我正在使用 JQuery-Validation-Plugin (http://docs.jquery.com/Plugins/Validation/)。现在，我只想在实际调用 validate() 之后才向现有的 HTML 元素添加一个 CSS 样式的类。如何处理？提前致谢。

```
// take first form, validate and add css-style class to existing elements ...
var allForms = jQuery('form');
var mainForm = allForms.eq(0);
var $mainForm = jQuery(mainForm);
$mainForm.validate({
            submitHandler : function(form) {
                form.submit();
            },
            rules : {
                "user-name" : {
                    required : true
                },
                "password" : {
                    required : true,
                    minlength : 3
                }
            },
            messages : {
                "user-name" : {
                    required : "Nutzernamen-Eingabe ist erforderlich."
                },
                "password" : {
                    required : "Passwort-Eingabe erforderlich.",
                    minlength : "Mindestlänge noch nicht erreicht."
                }
            }
        });
// CSS-Klasse fuer 
jQuery('.label').addClass('repositionLabelAfterErrorMessage'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T09:50:37.390

我不确定你是否正在寻找这个，你可以使用`errorClass`财产。检查此链接[http://docs.jquery.com/Plugins/Validation/validate#toptions](http://docs.jquery.com/Plugins/Validation/validate#toptions)

```
$(".selector").validate({
   errorClass: "invalid"
}) 
```

这会将 css 类添加到错误报告标签中。

# lua - 如何从另一个lua文件返回lua文件？

> ID：10348004
> 
> 赞同：0
> 
> 时间：2012-04-27T09:17:39.470
> 
> 标签：lua, coronasdk

我有一个`menu`lua，当我选择 1 个类别（“songselect”lua）并返回到`menu`lua 时，我收到了这个错误：

```
Runtime error
        ...ocuments\corona projects\singingbeemenu\director.lua:151: attempt to
call field 'unloadMe' (a nil value)
stack traceback:
        [C]: in function 'unloadMe'
        ...ocuments\corona projects\singingbeemenu\director.lua:151: in function
 '_listener 
```

' 这是我的类别中的 1 个`songselect.lua`

```
module(..., package.seeall)
display.setStatusBar( display.HiddenStatusBar ) 
function new()
    local localGroup = display.newGroup()
    local tableView = require("tableView")
    local ui = require("ui")

    --------------------------------------------------------------------------
    local screenOffsetW, screenOffsetH = display.contentWidth -  display.viewableContentWidth, display.contentHeight - display.viewableContentHeight

    local songList
    local backBtn
    local detailScreenText

    local background = display.newRect(0, 0, display.contentWidth, display.contentHeight)
    background:setFillColor(0, 0, 0)

    local data = {}
    --iPad: setup a color fill for selected items
    local selected = display.newRect(0, 0, 50, 50)  --add acolor fill to show the selected item
    selected:setFillColor(67,141,241,180)  --set the color fill to light blue
    selected.isVisible = false  --hide color fill until neede

    -----------------------------------------------
    data[1] = {}
    data[1].title = "Crazy Song"
    data[1].subtitle = "by Bruno Earth"
    data[1].image = "note.png"

    data[2] = {}
    data[2].title = "Enter Sunman"
    data[2].subtitle = "by Mentalica"
    data[2].image = "note.png"

    local topBoundary = display.screenOriginY + 40
    local bottomBoundary = display.screenOriginY + 0

    songList = tableView.newList{
        data=data,
        default="listItemBg.png",
        over="listItemBg_over.png",
        top=topBoundary,
        bottom=bottomBoundary,
        callback = function( row )
            local g = display.newGroup()

            local img = display.newImage(row.image)
            g:insert(img)
            img.x = math.floor(img.width*0.5 + 6)
            img.y = math.floor(img.height*0.5)

            local title =  display.newText( row.title, 0, 0, native.systemFontBold, 16 )
            title:setTextColor(0,0,0)
            g:insert(title)
            title.x = title.width*0.5 + img.width + 6
            title.y = 30

            local subtitle =  display.newText( row.subtitle, 0, 0, native.systemFont, 14 )
            subtitle:setTextColor(80,80,90)
            g:insert(subtitle)
            subtitle.x = subtitle.width*0.5 + img.width + 6
            subtitle.y = title.y + title.height + 6

            return g
        end
     }

    local function scrollToTop()
        songList:scrollTo(topBoundary-1)
    end

    local navBar = display.newImage("navBar.png")

    navBar.x = display.contentWidth*.5
    navBar.y = math.floor(display.screenOriginY + navBar.height*0.5)

    local navHeader = display.newText("Song Lists", 0, 0, native.systemFontBold, 16)
    navHeader:setTextColor(255, 255, 255)
    navHeader.x = display.contentWidth*.5
    navHeader.y = navBar.y

    --Setup the back button
    local backToMenu = function(event)
        print (event.phase)

        if event.phase == 'ended' then
            print ("ok")
            director:changeScene(event.target.scene, "fade")
            print ("back!")

        end
    end

    backBtn = display.newImage("backButton.png")
    backBtn.x = math.floor(backBtn.width/2) + backBtn.width + screenOffsetW
    backBtn.y = navBar.y 
    backBtn.scene = "menu"
    backBtn:addEventListener("touch", backToMenu)
    --backBtn.alpha = 0

    local listBackground = display.newRect( 0, 0, songList.width, songList.height )
    listBackground:setFillColor(255,255,255)
    songList:insert(1,listBackground)

    return localGroup
end 
```

`go back`lua中的方法不可能吗？

谁能帮助我并告诉我为什么我得到错误？

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:56:22.693

收到了，换`director.lua`最新版了。。。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:57:57.943

试试[这个 Lua 文件](https://github.com/joshtynjala/director.lua)来解决你的问题。

# android - 如何在android中使用soundpoll阻止不同的音乐文件重叠

> ID：10348007
> 
> 赞同：0
> 
> 时间：2012-04-27T09:17:45.263
> 
> 标签：android, android-emulator

嗨，我在这里做一个游戏，我需要在画廊中显示 100 张图像，同时在这个图像中，我需要播放与图像相关的声音，我使用 sounpool 进行音乐播放。我正确地播放了声音但是我的问题是在画廊滚动时间，当我将 1 张图像移动到 2 张图像时，这两个声音都是 1 张图像，2 张与图像相关的声音正在播放。如何解决这个问题，请任何人建议我..

```
 Gallerynew .class:
  public class Gallerynew extends Activity implements OnItemSelectedListener{
public boolean Visibility=true;

/** Called when the activity is first created. */
   @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    SoundManager.getInstance();
    SoundManager.initSounds(this);

    SoundManager.playSound(1, 1);
    Gallery g=(Gallery)findViewById(R.id.gallery);
      g.setAdapter(new ImageAdapter(this));
      g.setSpacing(10);

      g.setOnItemSelectedListener(this);
 } 
  public class ImageAdapter extends BaseAdapter {
    private Context myContext;
    private int[] myImageIds = {
            R.drawable.bokstavslottet01,
            R.drawable.bokstavslottet02,
            R.drawable.bokstavslottet03,
            R.drawable.bokstavslottet04,
            R.drawable.bokstavslottet05,
            R.drawable.bokstavslottet06,
            R.drawable.bokstavslottet07,
            R.drawable.bokstavslottet08,
            R.drawable.bokstavslottet09,
            R.drawable.bokstavslottet10,
            R.drawable.bokstavslottet11,
            R.drawable.bokstavslottet12,
            R.drawable.bokstavslottet13
};

     public ImageAdapter(Context c) { this.myContext = c; }
    public int getCount() {
        // TODO Auto-generated method stub
        return this.myImageIds.length;
    }

    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
         ImageView i = new ImageView(this.myContext);

             i.setImageResource(this.myImageIds[position]);
           /* Image should be scaled as width/height are set. */
         i.setScaleType(ImageView.ScaleType.FIT_XY);
         /* Set the Width/Height of the ImageView. */
         i.setLayoutParams(new Gallery.LayoutParams(700, 400));
         Integer e = myImageIds.length;
         Log.i("","length-------"+e);

         return i;
     }

     /** Returns the size (0.0f to 1.0f) of the views
      * depending on the 'offset' to the center. */
     public float getScale(boolean focused, int offset) {
             /* Formula: 1 / (2 ^ offset) */
         return Math.max(0, 1.0f / (float)Math.pow(2, Math.abs(offset)));
     }
    }

public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
        long arg3) {
    // TODO Auto-generated method stub
    if(arg2==0){

         SoundManager.playSound(1, 1);                

    }
    if(arg2==1)
    {
         SoundManager.playSound(2, 1);                
    }
    if(arg2==2)
    {    
        SoundManager.playSound(3, 1);     
    }
    if(arg2==3)
    {    
        SoundManager.playSound(4, 1);     
    }
    if(arg2==4)
    {    
        SoundManager.playSound(5, 1);     
    }
    if(arg2==5)
    {  

        SoundManager.playSound(6, 1);     
   }
    if(arg2==6)
    {  

        SoundManager.playSound(7, 1);     
   }
    if(arg2==7)
    {  

        SoundManager.playSound(8, 1);     
   }
    if(arg2==8)
    {  

        SoundManager.playSound(9, 1);     
   }
    if(arg2==9)
    {  

        SoundManager.playSound(10, 1);     
   }
    if(arg2==10)
    {  

        SoundManager.playSound(11, 1);     
   }
    if(arg2==11)
    {  

        SoundManager.playSound(12, 1);     
   }
    if(arg2==12)
    {  

        SoundManager.playSound(13, 1);     
   }

}
 @Override
    public void onDestroy()
    {

        super.onDestroy();
        SoundManager.cleanup();

   }
public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub

}
 }
SoundManager .class:
  public class SoundManager {
   static private SoundManager _instance;
private static SoundPool mSoundPool; 
private static HashMap<Integer, Integer> mSoundPoolMap; 
private static AudioManager  mAudioManager;
private static Context mContext;
private SoundManager()
{   
}

/**
 * Requests the instance of the Sound Manager and creates it
 * if it does not exist.
 * 
 * @return Returns the single instance of the SoundManager
 */
static synchronized public SoundManager getInstance() 
{
    if (_instance == null) 
      _instance = new SoundManager();
    return _instance;
 }

/**
 * Initialises the storage for the sounds
 * 
 * @param theContext The Application context
 */
public static  void initSounds(Context theContext) 
{ 
     mContext = theContext;
     mSoundPool = new SoundPool(4, AudioManager.STREAM_MUSIC, 0);
     mSoundPoolMap = new HashMap<Integer, Integer>(); 
     mAudioManager = (AudioManager)mContext.getSystemService(Context.AUDIO_SERVICE);        
} 

/**
 * Add a new Sound to the SoundPool
 * 
 * @param Index - The Sound Index for Retrieval
 * @param SoundID - The Android ID for the Sound asset.
 */
public static void addSound(int Index,int SoundID)
{
    mSoundPoolMap.put(Index, mSoundPool.load(mContext, SoundID, 1));
}

/**
 * Loads the various sound assets
 * Currently hardcoded but could easily be changed to be flexible.
 */
public static void loadSounds()
{
    mSoundPoolMap.put(1, mSoundPool.load(mContext, R.raw.starwars, 1));
    mSoundPoolMap.put(2, mSoundPool.load(mContext, R.raw.terminator, 1));   
    mSoundPoolMap.put(3, mSoundPool.load(mContext, R.raw.bokstavslottet_3, 1)); 
    mSoundPoolMap.put(4, mSoundPool.load(mContext, R.raw.bokstavslottet_4, 1)); 
    mSoundPoolMap.put(5, mSoundPool.load(mContext, R.raw.bokstavslottet_5, 1)); 
    mSoundPoolMap.put(6, mSoundPool.load(mContext, R.raw.bokstavslottet_6, 1)); 
    mSoundPoolMap.put(7, mSoundPool.load(mContext, R.raw.bokstavslottet_7, 1)); 
    mSoundPoolMap.put(8, mSoundPool.load(mContext, R.raw.bokstavslottet_8, 1)); 
    mSoundPoolMap.put(9, mSoundPool.load(mContext, R.raw.bokstavslottet_9, 1)); 
    mSoundPoolMap.put(10, mSoundPool.load(mContext, R.raw.bokstavslottet_10, 1));   
    mSoundPoolMap.put(11, mSoundPool.load(mContext, R.raw.bokstavslottet_11, 1));   
    mSoundPoolMap.put(12, mSoundPool.load(mContext, R.raw.bokstavslottet_12, 1));   
    mSoundPoolMap.put(13, mSoundPool.load(mContext, R.raw.babycooing05, 1));    

}

/**
 * Plays a Sound
 * 
 * @param index - The Index of the Sound to be played
 * @param speed - The Speed to play not, not currently used but included for compatibility
 */
public static void playSound(int index,float speed) 
{       
         float streamVolume = mAudioManager.getStreamVolume(AudioManager.STREAM_MUSIC); 
         streamVolume = streamVolume / mAudioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
         mSoundPool.play(mSoundPoolMap.get(index), streamVolume, streamVolume, 1, 0, speed); 
}

/**
 * Stop a Sound
 * @param index - index of the sound to be stopped
 */
public static void stopSound(int index)
{
    mSoundPool.stop(mSoundPoolMap.get(index));
}

public static void cleanup()
{
    mSoundPool.release();
    mSoundPool = null;
    mSoundPoolMap.clear();
    mAudioManager.unloadSoundEffects();
    _instance = null;

}
}
i tried using mediaplyer  its working good.but here each sound i need to set one mediaplyer object.in my app i need play some 100'of sounds.so is there any alternative solutoin please suggest me.. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:37:06.633

如果您使用的是媒体播放器，则可以使用 mp.isplaying() 轻松停止它，然后执行一些操作。

但即使我有同样的问题，我也可以建议你一件事：

在那里添加一个标志，然后你可以检查它 flag=true 做其他事情做某事

```
Ex: sound1 = mSoundPool.load(this, R.raw.abc, 1);
    mSoundPool.play(sound1, 1, 1, 1, time - 1, 1);
    loaded = true; 
```

现在对于旗帜你可以这样做

```
if(loaded == true)
{
    mSoundPool.stop(sound1);            
} 
```

你可以试试这个。

# apache - 如何在 symfony 1.0.6 中克服这个内存问题？

> ID：10348009
> 
> 赞同：1
> 
> 时间：2012-04-27T09:17:55.297
> 
> 标签：apache, memory-management, symfony1, error-logging, php

我正在使用 symfony 1.0.6 并在 /var/log/phpError.log 中出现这种错误

```
[27-Apr-2012 10:09:22] PHP Warning:  Unknown: Unable to allocate memory for pool. in    Unknown on line 0 
```

有时我也得到

```
[27-Apr-2012 10:09:21] PHP Warning:  include() [<a      href='function.include'>function.include</a>]: Unable to allocate memory for pool. in /home/project/e4s-v1/lib/symfony/symfony.php on line 95 
```

和

还`[27-Apr-2012 10:09:21] PHP Warning: require() [<a href='function.require'>function.require</a>]: Unable to allocate memory for pool. in /home/project/e4s-v1/lib/symfony/util/sfCore.class.php on line 163`

如何解决这个...？

请建议。

谢谢

# javascript - 在 extJs 中向 HTML 编辑器添加按钮

> ID：10348011
> 
> 赞同：0
> 
> 时间：2012-04-27T09:17:58.277
> 
> 标签：javascript, extjs

我在 extJs 中使用了 htmleditor，但没有选项可以编辑框内的文本。所以我自己创建了按钮并放在文本编辑器中，但看起来不太好。

有什么方法可以将按钮（同一行中的 2 个按钮）添加到 html 文本编辑器。简而言之，我想在 html 编辑器下方添加“保存”和“取消”按钮。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:12:25.633

您可以使用[ExtJS.ux.HtmlEditor.Plugins](https://github.com/VinylFox/ExtJS.ux.HtmlEditor.Plugins) -（扩展 ExtJS HtmlEditor 功能的插件集）来创建自己的按钮。您应该做的一件事是在插件中扩展*Ext.ux.form.HtmlEditor.MidasCommand* ......然后将其添加到您的 js 文件中：

```
Ext.ux.form.HtmlEditor.Save= Ext.extend(Ext.ux.form.HtmlEditor.MidasCommand, {
    midasBtns: ['|',{
        cmd: 'save',
        title: 'Save'
    }]
}); 
```

对于按钮图标，您可以使用以下样式：

```
.x-save {background: url(../images/save.png) 0 0 no-repeat !important;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T07:45:08.293

您可以使用 ExtJS.ux.HtmlEditor.Plugins

![在此处输入图像描述](../Images/cd4300cfa1a8f0eb605b0c2bb43a2b58.png)

[https://github.com/VinylFox/ExtJS.ux.HtmlEditor.Plugins](https://github.com/VinylFox/ExtJS.ux.HtmlEditor.Plugins)

# iphone - 初始化中的 startUpdatingLocation

> ID：10348014
> 
> 赞同：1
> 
> 时间：2012-04-27T09:18:12.560
> 
> 标签：iphone, objective-c, ios, geolocation, core-location

我的问题很简单：这些可以吗：

```
manager.delegate = self;
[manager startUpdatingLocation];
return self; 
```

作为 -init 方法的最后几行？

到那时应该构造对象，但是我对此有一种不好的感觉。

也相关 - 如果这样做不合适，我应该推迟执行`-startUpdatingLocation`以及延迟多长时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T09:27:44.933

这绝对没问题。Init 是执行此操作的有效方法。

唯一需要延迟的时间是当您需要使用在代码执行过程中进一步初始化的东西时。例如，要更改视图，您应该在 init 方法中正确设置视图，`viewWillAppear:`否则`viewDidLoad`视图将无法正确设置。

但是，在此示例中，您没有使用稍后在对象中设置的任何内容，因此可以使用 init 方法。

始终记得先运行`[super init]`，以便正确设置对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T09:27:20.050

没关系。

和正常情况一样，你也这样做。IE

*   你初始化它
*   设置委托
*   然后开始更新位置。

你在这里做同样的事情。

# nhibernate - 使用 ISqlQuery 传递 DateTime2 参数值

> ID：10348016
> 
> 赞同：2
> 
> 时间：2012-04-27T09:18:26.667
> 
> 标签：nhibernate, nhibernate-mapping, sqldatetime, isqlquery

我正在使用`ISqlQuery`Nhibernate 的接口在数据库上触发 SQL 查询。以下是场景。我的领域模型有一个属性：

```
public virtual Datetime StartTime { get; set; } 
```

数据库有一个`StartTime`类型为 的列`DateTime2`。

我已经添加`UserTypeConvention`了将代码的 Datetime 映射到 DB 的 DateTime2 并且它工作正常。

但是当我尝试使用 ISqlQuery 进行查询时，我无法使用 DateTime2 类型为该查询设置参数。如果我使用 ISqlQuery.SetDateTime 则默认情况下它映射到 DB 的 Datetime 类型并给出异常“SqlDateTime 溢出必须介于 1 1 1753 12 00 00 AM 和 12/31/9999 11:59:59 PM 之间”。

我尝试使用`ISqlQuery.SetParameter("propname",datetimevalue,Nhibernate.IType)`，但找不到`NHibernate.IType`DateTime2 的实现。

对此有什么支持吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T13:43:14.457

采用`NHibernateUtil.DateTime2`

# git - 从远程服务器复制没有修订（没有 .git 和 .gitingore）的 git 存储库

> ID：10348019
> 
> 赞同：9
> 
> 时间：2012-04-27T09:18:40.287
> 
> 标签：git

如何在没有 .git 目录和 .gitignore 文件的情况下直接从远程服务器复制 git 存储库？提前从标签名称或分支。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-27T09:28:18.410

你可以使用命令

```
git archive branchname 
```

从命名树存档文件。即您可以将输出传递给以`tar`打包文件或过滤文件，例如`.gitignore`（`.git`不会被导出）：

```
git archive branchname | tar -x -C c:\git-my-branch 
```

结帐了解`git help archive`更多详情。

相当于`svn export . otherpath`现有仓库中的内容是

```
git archive branchname | (cd otherpath; tar x) 
```

相当于`svn export url otherpath`是

```
git archive --remote=url branchname | (cd otherpath; tar x) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-24T16:06:42.767

我不知道它是否有帮助，但我的方式是递归使用 scp，忽略隐藏文件：

```
scp -r {git_directory}/* {target_directory} 
```

例如：

```
scp -r /local/yourProjectGit/* user@machine:/home/user/dist

scp -r /local/yourProjectGit/* /local/youtProyect/dist 
```

# sharepoint-designer - 无法在 SharePoint Designer 中打开网站

> ID：10348020
> 
> 赞同：0
> 
> 时间：2012-04-27T09:18:42.600
> 
> 标签：sharepoint-designer

我试图在 SPD 中打开一个共享点站点，但没有成功。SPD 正在处理，但没有任何反应，它一直在处理，就好像找不到站点一样。

你知道它是从哪里来的吗？

有关信息，我正在为此使用站点管理，并且 Web 应用程序的 SPDSettings 都设置为 true。

编辑：等待 10 分钟后，我遇到了这个错误：服务不可用服务不可用 HTTP 错误 503。服务不可用。

编辑2：我认为这个错误来自我在同一个Web应用程序中部署另一个解决方案，但在另一个网站集中......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:50:06.437

不幸的是，您的问题过于笼统，无法提供具体答案。SharePoint 设计器通过一系列 Web 服务与您的 SharePoint 网站进行通信以获取信息。在这些请求期间可能会出现问题。您是否尝试以系统帐户身份登录 SharePoint Designer 以消除网站内容的任何安全问题？

要诊断这些问题的根源，请查看在尝试访问设计器期间创建的 ULS 日志。这些可以在以下位置查看：

```
\\<Server Name>\c$\Program Files\Common Files\Microsoft Shared\Web Server Extensions\14\LOGS 
```

使用[ULS 日志查看器](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCYQFjAA&url=http://archive.msdn.microsoft.com/ULSViewer&ei=vGuaT8eXHsiG4gSX6uSlDw&usg=AFQjCNEOHo87LLj0Gc_rOwp6O5Tg4tZzfQ&sig2=x1D0ArflXaBeJ1gIXATocA)提供 SharePoint 在您使用期间创建的所有日志条目的实时视图。

# xpath - 仅在包含属性时才获取节点文本？

> ID：10348022
> 
> 赞同：0
> 
> 时间：2012-04-27T09:18:47.653
> 
> 标签：xpath

XPath 问题。

我有这些节点：

```
[...]
<videos>
  <video timestamp="201204271112">myVideo.avi</video>
  <video>myVideo.avi</video>
  <video timestamp="201204271113">myVideo.avi</video>
  <video>myVideo.avi</video>
  <video>myVideo.avi</video>
</videos>
<photos>
  <photo timestamp="201204271112">myphoto.avi</video>
  <photo>myphoto.avi</video>
  <photo timestamp="201204271113">aphoto.avi</video>
  <photo>myphoto.avi</video>
  <photo>myphoto.avi</video>
</photos>    
[...] 
```

如何仅获取`text`包含`timestamp`属性的节点？

我试过了

```
//@timestamp 
```

它仅返回所有时间戳属性。和文字？

如何进行包含所有两个条件的查询？`AND`健康）状况。

像这样的东西：

```
//@text and //@timestamps 
```

只得到
201204271112 - myVideo.avi
201204271113 - myVideo.avi
201204271113 - aphoto.avi
不包括其他？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T09:20:45.820

> 如何仅获取`text`包含`timestamp`属性的节点？

你的意思是`//*[@timestamp]/text()`？这将选择其父级具有该`timestamp`属性的所有文本节点。

条件也在 XPaths 中（即`//video[@timestamp and text()]`选择`video`同时具有这两个`timestamp`节点和一些文本节点的所有节点）。

您可能的意思是与 symbol 一起使用的节点集联合`|`。要同时获取时间戳和文本节点，您需要将两个查询联合在一起：`//@timestamp | //*[@timestamp]/text()`获取所有时间戳及其所有文本节点。但是，我认为您不能很好地对齐（首先是所有时间戳，然后是所有文本节点）。

您可以尝试使用某种循环逐个迭代`for`并通过 获取时间戳和文本节点`position`，或者您可以只获取所有具有时间戳的节点并稍后从中挖掘出它们的文本（这是一种首选方式） .

[该规范](http://www.w3.org/TR/xpath/)是一个令人惊讶的好读物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T09:23:25.397

您可以匹配属性：

```
//video[@timestamp]/text() 
```

//video = 匹配树中任意位置名为 video 的节点

[@timestamp] 是谓词，意味着节点必须具有此属性

text() 选择当前节点的所有文本节点子节点

# php - 如何从 SQL 服务器日期时间列中检索日期并存储在 php 变量中？

> ID：10348024
> 
> 赞同：0
> 
> 时间：2012-04-27T09:18:55.153
> 
> 标签：php, sql-server-2008

我试图只从我的表中检索日期并将其存储在一个 php 变量中，以便我可以在我想要的时间和地点回显它。这是我尝试执行此操作的方法：

```
$query3 = "select o.orderID,
o.orderDate

from orders o
join order_items i on o.orderID = i.orderID
where o.customerID = '" . $customerID . "'";

    $result3 = sqlsrv_query( $conn, $query3, array(), array( "Scrollable" => SQLSRV_CURSOR_KEYSET ));

if( $result3 === false)
{
    echo "Error in query preparation/execution.\n";
    die( print_r( sqlsrv_errors(), true));
}

     while( $row = sqlsrv_fetch_array ( $result3, SQLSRV_FETCH_ASSOC))
    {
        $data1 = $row['orderDate']; 
    }

echo $data1; 
```

我已经尝试过 date() 方法，我可以在屏幕上获得一个日期，但不能从数据库中选择一个特定的日期。我需要在回显之前转换它吗？

我得到的错误是：

可捕获的致命错误：DateTime 类的对象无法转换为字符串

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:21:22.713

你的代码

```
 while( $row = sqlsrv_fetch_array ( $result3, SQLSRV_FETCH_ASSOC)) 
    { 
        $data1 = $row['orderDate'];  
    } 

echo $data1; 
```

遍历结果的每一行，但仅在与最后一行相关时才显示。这可能是你的问题吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T09:46:20.103

正如错误消息所示，您已经有一个[DateTime](http://es2.php.net/manual/en/class.datetime.php)对象：

```
Catchable fatal error: Object of class DateTime could not be converted to string
                       ^^^^^^^^^^^^^^^^^^^^^^^^ 
```

这是一个带有日期的原生 PHP 变量。司机帮你搞定！

# python - 使用 wxpython DrawText 函数在位图中添加文本

> ID：10348026
> 
> 赞同：0
> 
> 时间：2012-04-27T09:19:02.340
> 
> 标签：python, bitmap, wxpython, draw, drawtext

我正在尝试用漂亮的颜色渐变和文字制作一个小图形

颜色渐变现在可以正常工作（仅测试所以代码仍然很乱）但文本没有显示

有人可以告诉我我的代码有什么问题吗？

```
#!/usr/bin/python
# -*- coding: utf-8 -*-
"""
Created on Tue Apr 24 13:31:18 2012

@author: ksr
"""
import os
import scipy
import pickle
import shutil
import matplotlib.pyplot as plt
from os.path import join as opj
from os import getcwd as cwd
from os import listdir as ld
import wx

def dec2hex(n):
"""return the hexadecimal string representation of integer n"""
return "%X" % n

def hex2dec(s):
    """return the integer value of a hexadecimal string s"""
    return int(s, 16)

def main(text):

    app         = wx.PySimpleApp()

    # Bitmap und DC (Device Context) erstellen
    bitmap      = wx.EmptyBitmap(width = 500, height = 500)
    dc          = wx.MemoryDC(bitmap) # Dieser DC zeichnet nur im Speicher

    # Hintergrund gelb ausmalen
    dc.SetBackground(wx.Brush('#FFFFFF', wx.SOLID))
    dc.Clear()

    # GraphicsContext erstellen (damit sehen die Bilder besser aus)
    gc = wx.GraphicsContext_Create(dc)

    x = 0
    y = 0
    far = 0
    z = 0
    for i in range(0,2001):

        if z%5 == 0 and i < 1000:
            far += 1
            z = 0
        elif z%5 == 0 and i > 1000:
            far -= 1
            z = 0
        farbe = dec2hex(far)

        # Grünen Stift zuweisen
        pen = wx.Pen("#%s0000"%(str(farbe.rjust(2,'0'))), 2, wx.SOLID)#,str(farbe.rjust(2,'0'))
        gc.SetPen(pen)

        # Zwei horizontale Linien zeichnen
        gc.DrawLines(((x, y), (256, 256)))

        print x,y,farbe.rjust(2,'0'),i

        if x < 500 and y == 0:
            x+=1

        elif x == 500 and y < 500: 
            y+=1

        elif y == 500 and x > 0:
            x-=1

        elif x == 0 and y > 0:
            y-=1
        z+=1    

    gc.DrawText('Hello',100,100)    

    # Bitmap vom DC abtrennen und als PNG speichern
    dc.SelectObject(wx.NullBitmap)
    bitmap.SaveFile("new_image.png", wx.BITMAP_TYPE_PNG)

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:45:58.590

当我运行你的代码时，我收到一个错误，因为没有定义字体，我不知道你是否遇到同样的问题，但是通过添加任何`SetFont`语句，就像你的代码工作正常`gc.SetFont(wx.Font(22, wx.SWISS, wx.NORMAL, wx.BOLD))`之前一样。`DrawText`

顺便说一句，我把`300, 300`你的“你好”文本作为坐标来绘制，因为`100, 100`它是黑底黑字，不可读。

# tfs-sdk - TFS 获取项目名称

> ID：10348027
> 
> 赞同：1
> 
> 时间：2012-04-27T09:19:09.873
> 
> 标签：tfs-sdk

我有一个名为“MyTestTeamProject”的团队项目，在该项目下我有一个解决方案文件夹。解决方案文件夹包含许多类库项目和一个 windows 应用程序。在 Web 应用程序下，我有一个名为“Database”的文件夹，其中包含 sql 脚本文件。我需要下载脚本文件并在远程机器上执行它。

我从 tfs 文件夹中获取所有文件的代码片段如下：

```
 TfsTeamProjectCollection tfsTeamProjectCollection = new TfsTeamProjectCollection(new Uri(_serveruri), creds);
                tfsTeamProjectCollection.Authenticate();
                var versionControl = tfsTeamProjectCollection.GetService<VersionControlServer>
var workspace = versionControl.CreateWorkspace(AppDomain.CurrentDomain.FriendlyName + "-installer", versionControl.AuthorizedUser);
WorkingFolder folder = new WorkingFolder(@"$"+_projectpath+@"\WebApplication1\Database", "c:\\temp");
 workspace.CreateMapping(folder);
                workspace.Get(); 
```

这里 WebApplication1 是我的 Web 应用程序，其中存在数据库文件夹，“_projectPath”是团队项目。如何获取该 web proj/windows 项目名称 (WebApplication1) 或*数据库*文件夹所在的项目名称？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:59:05.170

不要为此创建工作区，而是使用[VersionControlServer.DownloadFile](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.versioncontrol.client.versioncontrolserver.downloadfile%28v=vs.100%29.aspx)方法。

要找到您要查找的项目，请使用[GetItems](http://msdn.microsoft.com/en-us/library/bb143084.aspx)方法之一。

# java - 代码中的最佳“识别标记”有助于快速导航到代码中的某个位置？

> ID：10348033
> 
> 赞同：1
> 
> 时间：2012-04-27T09:19:30.673
> 
> 标签：java, android, intellij-idea

在一个有 750 多行的类中，滚动代码以搜索特定方法非常耗时。如果您不是代码的作者，那么浪费的时间就会成倍增加。

当您需要快速跳转到特定方法时，您会使用哪些技术？请记住，这不是您的代码，您无法记住方法名称。您也不能跳到特定的行，因为很难记住行号。

我使用了两种方法，这是我想出的最好的方法。

1.  *我在某个方法上设置了一个断点*。优点：视觉上吸引人，缺点：调试时烦人并与“真实”断点混合
2.  *我在某个方法上设置了 //TODO 标记*。Pro：通过待办事项列表轻松导航。缺点：与“真实”待办任务混合，增加监督某些任务的可能性

请指教...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T14:48:57.920

这是 IJ 最擅长的事情之一。

ctrl-click/ctrl-b：从它的用法跳转到定义（你应该经常使用它）

结构视图 (Alt-7) 与显示“从源滚动”的结构视图按钮相结合

ctrl-shift-left/right：在先前的光标位置之间移动编辑位置

ctrl-alt-shift-N：按名称查找任何符号。即使你不知道这么多的名字。您可以使用通配符和驼峰式大小写，或者将其全部保留为小写并执行不区分大小写的搜索。

Alt-F6 : 在插入符号处查找元素的用法。（告诉我这个 API 的使用位置）

书签，它们就像您的断点和待办事项一样工作，除了它们的预期用途符合您的需求 - 都在视觉上不同并且支持快速键盘导航。

# iphone - 通过图形 api 在 fb 墙上发布图像的问题？

> ID：10348036
> 
> 赞同：0
> 
> 时间：2012-04-27T09:19:50.630
> 
> 标签：iphone, facebook, image, facebook-graph-api

AI 正在使用以下代码在 facebook 上的用户墙上发布图像

```
NSData *imageData =UIImagePNGRepresentation(newPageView.image);
     UIImage *picture = [UIImage imageWithData:imageData];
    NSLog(@"picture is %@",picture);
    NSMutableDictionary   *variables = [NSMutableDictionary dictionaryWithCapacity:2];

        FbGraphFile *graph_file = [[FbGraphFile alloc] initWithImage:picture];

    [variables setObject:graph_file forKey:@"file"];

    [variables setObject:@"this is a test message: postPictureButtonPressed" forKey:@"message"];

    FbGraphResponse *fb_graph_response = [fbGraph doGraphPost:@"/me/photos" withPostVars:variables]; 
```

以上代码在相册中发布图像。如何将其更改为在墙上发布图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:28:19.343

试试这个代码

```
 NSURL *url = [NSURL URLWithString:@"YOur Image url"];
    NSData *data = [NSData dataWithContentsOfURL:url];
    UIImage *img  = [[UIImage alloc] initWithData:data];

   [variables setObject:img forKey:@"picture"];

   FbGraphResponse *fb_graph_response = [fbGraph doGraphPost:@"/me/photos" withPostVars:variables]; 
```

# asp.net - ASP.NET - FileUplaod 文件名显示不同的路径

> ID：10348037
> 
> 赞同：1
> 
> 时间：2012-04-27T09:19:52.083
> 
> 标签：asp.net, file-upload, attachment, mailmessage

我已经将 FileUpload 控件放到我的表单上。当客户浏览一个文件并选择一个文件时，我想将该文件用作邮件的附件。为此，我写：

```
 Attachment attachment = new Attachment(fileUpload1.FileName);
 mail.Attachments.Add(attachment); 
```

我收到一条错误消息：“找不到文件 'C:\Windows\SysWOW64\inetsrv\Water lilies.jpg'。” 问题是文件的路径与客户端中的路径不同。如何将客户端计算机上的文件附加到邮件消息中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:25:30.953

Server.MapPath 应该可以解决您的问题。

```
 Attachment attachment = new Attachment(Server.MapPath(fileUpload1.FileName)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T09:30:51.300

FileName 属性为您提供了 - 文件的名称，不包括路径。您在路径中看到 inetsrv 因为那是 IIS 的工作目录。您可能想要使用 PostedFile 属性，它将为您处理保存：

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.postedfile.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.postedfile.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T10:32:11.760

看看这个[http://imar.spaanjaars.com/412/sending-attachments-directly-from-a-fileupload-control](http://imar.spaanjaars.com/412/sending-attachments-directly-from-a-fileupload-control)

# python - python脚本不适用于incron

> ID：10348038
> 
> 赞同：0
> 
> 时间：2012-04-27T09:19:52.277
> 
> 标签：python

```
incrontab -e
/home/owen/file_to_be IN_ALL_EVENTS /home/owen/abc.py 

owen@desktop:~$ cat abc.py 
#!/usr/bin/env python
# -*- coding: utf-8 -*-
p = open('file_to_test', 'a+')
p.write("test")
p.close()

owen@desktop:~$ ll file_to_test file_to_be 
-rw-r--r-- 1 owen owen 32 2012-04-27 17:07 file_to_be
-rw-r--r-- 1 owen owen 60 2012-04-27 17:07 file_to_test

owen@desktop:~$ echo "a" >> file_to_be 
owen@desktop:~$ ll file_to_test file_to_be 
-rw-r--r-- 1 owen owen 34 2012-04-27 17:15 file_to_be
-rw-r--r-- 1 owen owen 60 2012-04-27 17:07 file_to_test

owen@desktop:~$ tail -n 3 /var/log/syslog
Apr 27 17:15:01 owen1 CRON[12003]: (root) CMD (command -v debian-sa1 > /dev/null && debian-sa1 1 1)
Apr 27 17:15:10 owen1 incrond[11574]: table for user owen changed, reloading
Apr 27 17:15:18 owen1 incrond[11574]: (owen) CMD (/home/owen/abc.py) 
```

似乎已触发了 incron

但是 python 脚本没有按预期工作。

有谁知道为什么？

如果我执行 abc.py，它会将“test”附加到正确的文件中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T09:44:52.507

也许脚本正在运行，但不是您预期的那样......将完整路径放入脚本生成的文件中，即：

```
 #!/usr/bin/env python
 # -*- coding: utf-8 -*-
 p = open('/tmp/file_to_test', 'a+')
 p.write("test")
 p.close() 
```

然后检查是否生成了文件'/tmp/file_to_test'，问题可能是使用incron运行脚本的环境。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T09:24:06.990

您的脚本似乎不可执行，您需要使用 chmod 使其可执行（chmod +x abc.py）。

# java - 在我“处理”相同表单的文本字段后文件不上传

> ID：10348040
> 
> 赞同：-1
> 
> 时间：2012-04-27T09:19:54.267
> 
> 标签：java, html, servlets, file-upload, multipartform-data

以下 servlet 处理上传照片和该照片的标题。servlet 工作正常*（将照片上传到请求的目录）*，直到添加了处理相同 from 的文本字段的逻辑。现在它既不上传照片也不向数据库提交标题。该表单的编码类型为*`multipart/form-data`*.

**HTML**

```
 <form method="post" action="UploadHandler" enctype="multipart/form-data">
        <table>

            <tr>
                <td> <strong> Browse photo to submit </strong> </td>
                <td> <input type="file" name="ImageToUpload" value="Upload Photo"/> </td>
            </tr>

            <tr>
                <td> <strong> Give a Caption to this photo </strong>  </td>
                <td> <input type="text" name="CaptionBox" size="40" /></td>
            </tr>

            <tr>
                <td> <strong> Tags &nbsp;<a href="#"> <i> Browse tags </i> </a> </strong> </td>
                <td> <input type="text" size="20" value="Tags" id="tagfield" style="color: #A0A0A4; font-size:16px;" onfocus="emptyTheDefaultValue()"> </td>
            </tr>
            <tr colspan="2">
                <td> <input type="submit" value="submit photo"/> </td>
            </tr>

        </table>
 </form> 
```

**处理上传的 Servlet**

```
package projectcodes;

import javax.servlet.*;
import javax.servlet.http.*;
import java.io.IOException;
import java.io.PrintWriter;
import java.io.File;
import java.util.List;
import java.util.Iterator;
import org.apache.commons.fileupload.*;
import org.apache.commons.fileupload.disk.DiskFileItemFactory;
import org.apache.commons.fileupload.servlet.ServletFileUpload;
import org.apache.commons.io.FilenameUtils;
import NonServletFiles.HandleCaption;
import NonServletFiles.ChangePartToString;

public class UploadHandler extends HttpServlet {
@Override
public void doPost(HttpServletRequest request,HttpServletResponse response) throws IOException,ServletException {
    response.setContentType("text/plain");
    String path = request.getParameter("ImageToUpload"); 
    // Now handle the caption
    // Note : They have a multipart/form-data request
    // Using the servlet API 3.0
    ChangePartToString cpts = new ChangePartToString(request.getPart("CaptionBox")); // get the CaptionBox part 
    String caption = null;

        try {
            caption = cpts.getValue();
            System.out.println(caption); // <<-------- I get this value fine
        }catch(Exception exc) {
            exc.printStackTrace();
            System.out.println(exc);
        }

    PrintWriter writer = response.getWriter();
    try {
        Boolean isMultipart = ServletFileUpload.isMultipartContent(request);
        if(!isMultipart) {
            Boolean AttemptToUploadFile = true;
            RequestDispatcher rd = request.getRequestDispatcher("portfolio_one.jsp");
            request.setAttribute("UploadAttempt", AttemptToUploadFile);
            rd.forward(request, response);
        } else {
            DiskFileItemFactory diskFileItem = new DiskFileItemFactory();
            ServletFileUpload fileUpload = new ServletFileUpload(diskFileItem);
            List list = null;

            try {
                list = fileUpload.parseRequest(request);
            }catch(Exception exc) {
            //                    Boolean AttemptToUploadFile = true;
            //                    RequestDispatcher rd = request.getRequestDispatcher("portfolio_one.jsp");
            //                    request.setAttribute("UploadAttempt", AttemptToUploadFile);
            //                    rd.forward(request, response);
                exc.printStackTrace();
                System.out.println(exc);
            }

            Iterator iterator = list.iterator();
            while(iterator.hasNext()) {
                String emailOfTheUser = null;
                FileItem fileItem = (FileItem)iterator.next();
                if(!fileItem.isFormField()) {
                    String fieldName = fileItem.getFieldName();
                    String fileName = FilenameUtils.getName(fileItem.getName());
                    HttpSession session = request.getSession();
                    if(!session.isNew()) {
                        emailOfTheUser = (String)session.getAttribute("Email");
                    }
                    File file = new File("/home/non-admin/project uploads/project users/" + emailOfTheUser ,fileName);
                    fileItem.write(file);
                    // now since the file has been uploaded , upload the caption to the photo  
                    System.out.println("THE CAPTION :" + caption);
                    HandleCaption hc = new HandleCaption(caption,emailOfTheUser,fileName);
                    hc.SubmitCaptionToTheDatabase(); // This calls invokes a method that submits a caption to the database
                    RequestDispatcher rd = request.getRequestDispatcher("portfolio_one.jsp");
                    String message = "File Uploaded successfully !";
                    request.setAttribute("SuccessMessage", message);
                    rd.forward(request, response);
                }
            }
        }
    }catch(Exception exc) {
        exc.printStackTrace();
        System.out.println(exc);
    }
} 
```

}

字幕字符串返回正常。文件未上传的原因可能是什么。我没有在服务器日志中看到任何异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:53:00.367

您正在将 Servlet 3.0 内置多部分解析器与 Apache Commons FileUpload 混合。你不应该那样做。一旦请求正文被一个 API 解析，就不能再被另一个 API 解析。客户端不会多次重新发送相同的请求正文，因为服务器需要解析它。

删除 Apache Commons FileUpload。当您已经在使用 Servlet 3.0 内置的多部分解析器时，您就不需要它了。您只需向`@MultipartConfig`servlet 类添加注释，以使多部分解析器对普通表单字段和文件字段都正常工作。你也不应该使用`getParameterXxx()`方法。另请参阅[如何使用 JSP/Servlet 将文件上传到服务器？](https://stackoverflow.com/questions/2422468/how-to-upload-files-in-jsp-servlet/2424824#2424824)

这是您的代码的必要重写，以便您获得这两个值：

```
@WebServlet("/UploadHandler")
@MultipartConfig
public class UploadHandler extends HttpServlet {

    @Override
    public void doPost(HttpServletRequest request,HttpServletResponse response) throws IOException,ServletException {
        Part imageToUpload = request.getPart("ImageToUpload");
        String imageFilename = getFilename(imageToUpload);
        InputStream imageContent = imageToUpload.getInputStream();
        String captionBox = getValue(request.getPart("CaptionBox"));

        // ...
    }

    private static String getFilename(Part part) {
        for (String cd : part.getHeader("content-disposition").split(";")) {
            if (cd.trim().startsWith("filename")) {
                String filename = cd.substring(cd.indexOf('=') + 1).trim().replace("\"", "");
                return filename.substring(filename.lastIndexOf('/') + 1).substring(filename.lastIndexOf('\\') + 1); // MSIE fix.
            }
        }
        return null;
    }

    private static String getValue(Part part) throws IOException {
        BufferedReader reader = new BufferedReader(new InputStreamReader(part.getInputStream(), "UTF-8"));
        StringBuilder value = new StringBuilder();
        char[] buffer = new char[1024];
        for (int length = 0; (length = reader.read(buffer)) > 0;) {
            value.append(buffer, 0, length);
        }
        return value.toString();
    }

} 
```

# android - 在移动浏览器设置菜单的选项列表中显示 Android 移动应用程序

> ID：10348041
> 
> 赞同：-1
> 
> 时间：2012-04-27T09:20:08.373
> 
> 标签：android

我有以下要求：

i> 用户在设备的移动浏览器中打开网页。

ii> 网页包含一个下载按钮（用于文件下载）

iii> 用户点击设备的菜单按钮。后退、添加书签、更多等选项。单击更多提供主页、页面信息、共享页面等选项。

iv>点击分享页面，显示应用列表。例如：蓝牙、Gmail、邮件

首先，我希望我的 Android 应用程序显示在应用程序列表中。

接下来，当用户单击我的 Android 应用程序时，我需要将用户带到特定屏幕，用户可以从该屏幕将文件上传到网页上当前可供下载的不同文件服务器位置。

i> 如何将我的 Android 应用程序添加到选项列表中？

ii> 如何将用户导航到应用程序的特定屏幕？

iii> 如何获取文件下载链接，以便文件首先下载到 SDCard 上的临时文件夹？

请提供您的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:21:42.253

> 首先，我希望我的 Android 应用程序显示在应用程序列表中。

使用以下内容实施活动`<intent-filter>`：

```
 <intent-filter android:label="@string/app_name">
    <action android:name="android.intent.action.SEND" />
    <data android:mimeType="text/plain" />
    <category android:name="android.intent.category.DEFAULT" />
  </intent-filter> 
```

> 如何将我的 Android 应用程序添加到选项列表中？

你已经问过了。

> 如何将用户导航到应用程序的特定屏幕？

您已经问过这个问题，因为 Android 中的“屏幕”==“活动”（至少在您的场景中）。

> 如何获取文件下载链接，以便首先将文件下载到 SDCard 上的临时文件夹？

您无法“获取文件下载链接”，因为用户没有点击“文件下载链接”。

# html - 使用枚举的 switch 语句

> ID：10348042
> 
> 赞同：0
> 
> 时间：2012-04-27T09:20:11.170
> 
> 标签：html, jsp, enums, switch-statement

我想在我的菜单中使用 switch 语句。我在我的 jsp 页面中做了什么：

```
String menu1=request.getParameter("aero");
String menu2=reqStringuest.getParameter("auto");

String smenu1=request.getParameter("int");
String smenu2=request.getParameter("dem");

Enum str {menu1,menu2,smenu1,smenu2} 
```

我想知道我是否正确声明了枚举。如何将它们与 switch 一起使用，因为 iam 是 jsp 的新手，这是 iam 第一次在我的程序中使用 switch 语句。我在两天前发布了一个与switch相关的问题。链接：[使用带有switch语句的html列表元素并将列表与数据库绑定](https://stackoverflow.com/questions/10313430/using-html-list-elements-with-switch-stament-and-binding-the-list-with-database)

这是我的html代码：

```
<div>
    <ul>
        <li id="aero" ><a href="sample2.jsp">aerospace</a></li>
        <li id="auto"><a href="sample2.jsp">automotive</a></li>
    </ul>
</div>
<div>
    <ul>
        <li id="int"><a href="sample2.jsp">internal</a></li>
        <li id="dem"><a href="sample2.jsp">demo</a></li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:26:02.763

我建议你不要在 JSP 中编写任何 java 代码。

请考虑将其移至单独的类（枚举 stc 不会有问题）。这使得在单元测试中测试你的代码成为可能，增加了代码的可维护性和可读性。

此外，您可以使用一些 MVC 框架（Struts、Spring MVC 等）

# mysql - 使用链接服务器 MySQL 插入错误

> ID：10348049
> 
> 赞同：0
> 
> 时间：2012-04-27T09:20:38.220
> 
> 标签：mysql, sql-server-2008, oledb, linked-server, openquery

我使用带有以下提供程序字符串的 ODBC 驱动程序创建了一个链接服务器

```
DRIVER={MySQL ODBC 5.1 Driver};SERVER=HOST;USER=uid;PASSWORD=pw;OPTION=3 
```

我的链接服务器名为 MYSQL。如果我以这种方式选择和更新它可以正常工作

```
SELECT * FROM OPENQUERY(MYSQL,'SELECT * FROM DatabaseName.Table')
UPDATE OPENQUERY(MYSQL, 'SELECT * FROM DatabaseName.Table where test=0') SET test=1 
```

当我尝试使用以下语法执行插入时

```
INSERT OPENQUERY(MYSQL,'SELECT Column1, Column2, Column3 from DatabaseName.Table WHERE 1=0') VALUES (10,20,30) 
```

我有以下错误

```
The OLE DB provider "MSDASQL" for linked server "MYSQL" could not INSERT INTO table "[MSDASQL]". Commands out of sync; you can't run this command now. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:35:48.687

我认为您在另一个论坛上遇到了与[此主题相同的问题。](http://social.msdn.microsoft.com/Forums/en-SG/sqlgetstarted/thread/d87e2663-7ee6-4087-8c12-6b9226b85a7c)从似乎已经解决了那里的人的问题的答案来看，您似乎缺少提供程序字符串中的数据库名称。尝试添加`DATABASE=mydb;`到您的提供者字符串。

这是原始答案：

> 显然，如果您尝试使用工作室和各种菜单创建链接服务器，连接字符串中没有保存一个小细节，即数据库！
> 
> ```
> EXEC master.dbo.sp_addlinkedserver @server='MYSQL', @srvproduct='MySQL',
> @provider='MSDASQL', @provstr='DRIVER={MySQL ODBC 5.1
> Driver};SERVER=HOST;Port=3306;USER=uid;PASSWORD=pw;OPTION=3;DATABASE=mydb; 
> ```
> 
> odbc 驱动程序中的错误似乎只影响插入语句，并且自 2008 年以来一直存在......我希望 mysql 现在修复它......
> 
> 使用上述过程创建链接服务器后，插入和其他所有操作一样有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:12:13.453

我刚刚遇到了同样的问题，并设法通过停用`Force use of forward-only cursor`和`Don't cache results for forward-only cursor`我的 ODBC 连接来解决它。

我不确定是否需要禁用这两个选项。我从[这里得到了提示](http://connect.microsoft.com/SQLServer/feedback/details/724201/impossible-to-write-data-to-a-mysql-odbc-linked-server)

我通过 MySQL ODBC/Connector v5.1.11，64 位将 SQL Server 2012 链接到 MySQL v5.1。我的链接数据源配置为使用已指定 MySQL 数据库的系统 ODBC DSN（这与之前的答案有关），但在停用这些游标选项之前我仍然收到错误（默认情况下，它们未启用新的数据源，我是在某个时候启用它们的人）。

# android - +++LOG：条目损坏或被截断

> ID：10348052
> 
> 赞同：0
> 
> 时间：2012-04-27T09:20:47.987
> 
> 标签：android, android-layout, android-intent, android-emulator, android-fragments

我经常从 logcat 收到以下消息：

```
+++ LOG: entry corrupt or truncated 
```

我在片段类中的代码：

```
...
private String myVar;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

   myVar = getResponse();

   okButton.setOnClickListener(new OnClickListener() {

      @Override
      public void onClick(View v) {

      myLogMsg(); //log messages on logcat
       }
    });
}

private void myLogMsg(){
    Log.v("My Log", myVar);
} 
```

为什么我收到消息“ **+++LOG：条目损坏或截断**”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T09:32:25.817

测试代码

```
Log.v("My Log", "test test log"); 
```

因为它可能`myVar`包含大量数据。所以`Log.v(`）可能并不意味着打印那么多文本。

# cocoa - 编辑 NSTableView 中的单元格自动选项卡

> ID：10348054
> 
> 赞同：0
> 
> 时间：2012-04-27T09:20:52.170
> 
> 标签：cocoa, nstableview

我有一个有 2 列的 NSTableView。两者都是可编辑的。当我点击第一列来编辑值时，它会自动跳到下一列，因此不允许编辑。任何指针，为什么？

# url - SEO：详细页面的 URL，是否包含类别？

> ID：10348057
> 
> 赞同：1
> 
> 时间：2012-04-27T09:21:11.973
> 
> 标签：url, url-rewriting, seo, url-routing

我正在开发一个新的广告网站，并希望实施一些好的 SEO URL。

我得到了如下类别的 URL：

```
/category
/category/sub-category 
```

这似乎没问题。详情页呢？

选项1：

```
/announcements-and-notices/announcements-various/15880/suscipit-dis-molestie-malesuada-vestibulum-ut.html 
```

选项 2：

```
/adverts/15880/suscipit-dis-molestie-malesuada-vestibulum-ut.html 
```

实际上，由于您可以在多个区域购物，因此我的网站的 URL 很长。所以它会变成：

```
/en/area-name/announcements-and-notices/announcements-various/15880/suscipit-dis-molestie-malesuada-vestibulum-ut.html

/en/area-name/adverts/15880/suscipit-dis-molestie-malesuada-vestibulum-ut.html 
```

哪个详细信息页面会是更好的 URL？如果产品没有长/好标题，第一个选项似乎更好。第二个似乎更好，因为它是最相关且最短的，尤其是对于长类别名称。

我想听听你的想法！

编辑：

我找到了这两个谷歌文档：

[http://www.google.nl/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CDYQFjAA&url=http%3A%2F%2Fwww.google.com%2Fwebmasters%2Fdocs%2Fsearch-engine-optimization-入门指南.pdf&ei=lXyaT6T_L8zR4QSM4c2qDw&usg=AFQjCNEMj8KHxhxQz9cMLoMxMDiLdrAbJw](http://www.google.nl/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CDYQFjAA&url=http%3A%2F%2Fwww.google.com%2Fwebmasters%2Fdocs%2Fsearch-engine-optimization-starter-guide.pdf&ei=lXyaT6T_L8zR4QSM4c2qDw&usg=AFQjCNEMj8KHxhxQz9cMLoMxMDiLdrAbJw)

[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=76329](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=76329)

我想我会选择/广告。有人不同意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:49:09.890

我已经看到许多 SEO 分析师错过了一些关于优化他们的网页的东西，那就是你的页面将只针对某些关键字而不是所有关键字进行优化。您的 URL 有多长并不重要。您应该首先分析您网页中的内容是否足够丰富，是否有带有这些关键字的URL。如果每个关键字的答案都是肯定的，那么长度越长，您的排名就越高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:35:24.547

我认为您甚至可以将页面设置为仅使用 slug 并跳过 id，例如：

```
/adverts/suscipit-dis-molestie-malesuada-vestibulum-ut 
```

甚至只是：

```
/suscipit-dis-molestie-malesuada-vestibulum-ut 
```

像这样，直接参考*广告*控制器和广告本身，它分配了这个 slug（id 为 15880 的那个）。

这样，您将拥有漂亮而干净的 URL。只需为每个广告分配并保留一个**唯一的**slug 并使用 .htaccess 进行处理，或者在系统允许的情况下在您的网站代码中动态处理。

干杯。

# sql - SQL将文本字段转换为其他文本

> ID：10348069
> 
> 赞同：2
> 
> 时间：2012-04-27T09:22:04.007
> 
> 标签：sql, sql-server-2008

我在由触发器填充的表中有一个文本字段。然后处理此信息并将其发布到程序中，但是该文本对程序无效，需要转换为有效的文本值。

示例：输入字段的值可以是“Sterling”或“EUROS”，但需要转换为“GBP”（如果值为“Sterling”）或“EUR”（如果值为“EUROS”）在它尝试发布到程序之前。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:48:18.793

请检查以下内容

```
Select case <fieldname> when  'Sterling'  then 'GBP' when 'EUROS' then 'EUR' end
from <tableName> 
```

# javascript - 在文本区域中突出显示简单的 Javascript？

> ID：10348070
> 
> 赞同：8
> 
> 时间：2012-04-27T09:22:07.263
> 
> 标签：javascript, html

我有两个简单的文本区域，我想在其中突出显示正在编写的 javascript 代码。一旦用户在文本区域键入功能，关键字等必须以不同的颜色显示。

我试图破解这个[脚本](http://new.davglass.com/files/yui/codeeditor/)。但无法得到我想要的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-30T05:56:20.940

您可以查看[Ace](http://ace.ajax.org/) ( [demo](http://ace.ajax.org/build/kitchen-sink.html) ) 和[CodeMirror](http://marijn.haverbeke.nl/codemirror/) ( [demo](http://codemirror.net/demo/preview.html) )。

我想[Textarea 可以即时进行语法高亮显示？](https://stackoverflow.com/questions/1619167/textarea-that-can-do-syntax-highlighting-on-the-fly)和[在线代码编辑器](https://softwareengineering.stackexchange.com/questions/136736/online-code-editor/136741)问题也会对您有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T09:45:37.080

我认为您可以使用具有内容可编辑属性的 div 或 section 标签。在此 div 或部分中，您可以为高亮函数、变量等使用附加标记。但此属性仅适用于支持 html5 属性内容可编辑的新浏览器。这是一个[演示](http://html5demos.com/contenteditable)

如果您需要一个简单的 js highligter，可能这个[https://github.com/cloudhead/hijs](https://github.com/cloudhead/hijs)对您的任务有用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T20:50:50.603

我一直对具有`textarea`附加功能（例如代码突出显示）的元素感兴趣，同时仍然保留为简单的可编辑文本区域。我在这里做了一些实验：[http ://www.dcc.uchile.cl/~jmunoz/](http://www.dcc.uchile.cl/~jmunoz/)

它远非最佳且有很多错误，但仍然......它允许使用任意规则突出显示文本。我曾经有一个允许更改文本颜色（而不仅仅是背景）的工作版本，但它有一些问题。

基本上我所做的是添加`div`与文本区域完全相同的内容和字体样式但具有透明字体的叠加层。里面的文本有`span`包裹某些单词和短语的元素，这些单词和短语可能有特殊的背景、边框等。

为了允许不同的字体颜色，我尝试`textarea`在显示覆盖`div`文本时使文本透明。主要问题是光标也变得透明了。

我会说使用`div`带有可编辑内容的 a 似乎是一个更好的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T10:57:06.507

因为文本区域不能包含标记，所以您本身不能如此突出显示。我用于内联拼写检查器的方法是为拼写错误的单词覆盖 div。这是可能的，因为可以获得文本中单词的 x 和 y 位置。

但是，最好使用内容可编辑的 div 覆盖 textarea，这将允许您将内容包装在跨度等中，然后应用样式。

# android - 在android上创建一个简单的布局

> ID：10348072
> 
> 赞同：0
> 
> 时间：2012-04-27T09:22:18.400
> 
> 标签：android, button, android-edittext, emulation

我对android开发很陌生。我正在尝试开发一个应用程序，我决定尝试下面的代码，但是当我尝试在模拟器上打开它时，我不断收到错误消息。请问谁能告诉我我做错了什么？

```
package hajara.android.MyRecipes;

import android.app.Activity;
import android.os.Bundle;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class MyRecipesActivity extends Activity {
  Button btn;
  TextView t1, t2;
  EditText e;
  @Override
  public void onCreate(Bundle icicle) {
     super.onCreate(icicle);
     setContentView(R.layout.main);

     t1 = (TextView)findViewById(R.id.text1);
     t2 = (TextView)findViewById(R.id.text2);
      e = (EditText)findViewById(R.id.edit1);
     btn=(Button)findViewById(R.id.button1);

   btn.setOnClickListener((OnClickListener) this);
 }

} 
```

我的 main.xml 文件是

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
<TextView
    android:id="@+id/text1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Enter a string:"
/>

<EditText android:id="@+id/edit1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:cursorVisible="true"
    android:editable="true"
    android:singleLine="true"
/>
<Button android:id="@+id/button1"
    android:text="OK"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
/>

<TextView
    android:id="@+id/text2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text=""
/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:25:36.813

我认为您没有正确声明按钮。

```
 btn.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            // Your Code Goes here
        }
    }); 
```

并希望您已在清单文件中声明您的活动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T09:26:07.667

您的 onClick 侦听器未正确完成。我发现简单地创建一个方法更容易，例如：

```
public void buttonOnClick(View v) {
    // Do something
} 
```

并在您的 XML 布局文件（即 main.xml）中调用 onClick 属性：

```
<Button
    ...
    android:onClick="buttonOnClick"
    ...
/> 
```

# compiler-construction - TI 微控制器上的 Opencv

> ID：10348075
> 
> 赞同：1
> 
> 时间：2012-04-27T09:22:38.967
> 
> 标签：compiler-construction, opencv, microcontroller

是否有任何可用于 MICROCONTROLLER 的 OpenCV 交叉编译器？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T12:56:27.550

OpenCV 交叉编译器？Errr...我不确定是否存在这样的事情！我们不要将**交叉编译器**（如**gcc**）与 OpenCV 混合使用，OpenCV 是计算机视觉的**跨平台库**。

但是，如果您指的是*为微控制器编译的 OpenCV*，您可能会找到一些针对您正在使用的平台的预构建二进制文件，但这些都不是 OpenCV 开发人员的官方版本。

[该线程](http://www.societyofrobots.com/robotforum/index.php?topic=2278.0)讨论了在微控制器上使用 OpenCV 时所涉及的一些挑战：

> 您将遇到的主要问题是 OpenCV 使用浮点数学，并且大多数微控制器只有定点乘法器，因此您必须转换一些 OpenCV 代码或在这些特定处理器上运行浮点仿真，这可能非常慢。

一些帖子提出了其他资源消耗较少的替代方案，例如[CImg](http://cimg.sourceforge.net/)和[CVIPtools](http://cviptools.ece.siue.edu/)。

如果您决定坚持使用 OpenCV，您可能会对本教程感兴趣：[如何在 linux 环境中使用 Cmake 为 ARM Cortex-A8 平台构建 OpenCV](https://web.archive.org/web/20200615004347/http://processors.wiki.ti.com/index.php/Building_OpenCV_for_ARM_Cortex-A8)。

# jquery - 使用 jQuery 和 PHP 自动保存表单详细信息

> ID：10348076
> 
> 赞同：0
> 
> 时间：2012-04-27T09:22:39.320
> 
> 标签：jquery, forms, autosave

我有一个 .php 页面，我在其中使用 jQuery 创建动态行。我也使用这个库“sisyphus.js”和“sisyphus.min.js”和“jquery-1.7.min.js”。我无法在我的表单中保留我的动态行。

在这里，我以这种形式添加动态行....我将计时器设置为 5 秒。如果我刷新页面 10 秒或更长时间后……它会丢失我添加的所有动态行。

像这样：

```
<script type="text/javascript" src="jquery-1.7.min.js"></script>
<script src="sisyphus.js" language="javascript"></script>

<script language="javascript" >
    jQuery('#form1').sisyphus();
    jQuery('form').sisyphus({timeout: 5});
</script>

<script type="text/javascript">
    $(document).ready(function(){       

        $('.del').live('click',function(){
            $(this).parent().parent().remove();
        });

        $('.add').live('click',function(){
            $(this).val('Delete');
            $(this).attr('class','del');
            var appendTxt = "<tr><td><select  name='ptype[]' ><option value='1' >ONE</option><option value='2' >TWO</option></select></td><td><select name='product[]' ><option value='3' >ONE333</option><option value='4' >TWO444</option></select></td><td><input type='text' name='dsc[]' /></td><td><input type='text' name='qty[]' /></td></td><td><input type='button' class='add' value='Add More' /></td></tr>";
            $("tr:last").after(appendTxt);          
        });        
    });
</script>

<form name='form1' id='form1' action='' >
<table id='options-table'>
  <tr>
    <td>Type</td>
    <td>Product</td>
    <td>Desc</td>
    <td>Qty</td>                        
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><select  name='ptype[]' >
        <option value='1' >ONE</option>
        <option value='2' >TWO</option>
      </select></td>
    <td><select name='product[]' >
        <option value='3' >ONE333</option>
        <option value='4' >TWO444</option>
      </select></td>
    <td><input type='text'   name='dsc[]' /></td>
    <td><input type='text'   name='qty[]' /></td>          
    <td><input type='button' class='add' value='Add More' /></td>
  </tr>  
  </tr>
</table>
</form> 
```

# c++ - NSOperationQueue 与 pthread 优先级

> ID：10348083
> 
> 赞同：1
> 
> 时间：2012-04-27T09:23:03.290
> 
> 标签：c++, objective-c, pthreads, nsoperationqueue, thread-priority

我有这个问题：

*   我有一个使用一些线程的 C++ 代码。这些线程是 pthread 类型的。
*   在我的 iPhone 应用程序中，我使用`NSOperationQueue`了一些 C++ 代码。

问题是这样的：C++ pthread 的优先级总是低于`NsOperationQueue`.

我怎样才能解决这个问题？我也试图给予低优先级，`NSOpertionQueue`但这个修复不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:43:00.690

如果您不得不求助于调整优先级（特别是向上），这通常表明并发模型中存在设计缺陷。这应该保留用于非常特殊的情况，例如实时线程（例如音频播放）。

首先评估你的线程和任务是如何运作的，并确保你别无选择。通常，您可以做一些简单的事情，例如减少操作队列的最大操作数、减少总线程数，或者按任务所需的资源对任务进行分组。

您使用什么方法来确定线程的优先级？

另请注意，设置操作的优先级会影响排队操作的顺序（而不是线程本身）。

我一直能够通过调整分布来解决这个问题。你现在应该停止阅读:)

* * *

**可用，但不推荐：**

要降低操作的优先级，您可以在操作中处理它`main`：

```
- (void)main
{
  @autorelease {
    const double priority = [NSThread threadPriority];
    const bool isMainThread = [NSThread isMainThread];
    if (!isMainThread) {
      [NSThread setThreadPriority:priority * 0.5];
    }

    do_your_work_here

    if (!isMainThread) {
      [NSThread setThreadPriority:priority];
    }
  }
} 
```

如果你真的需要在这之后推送内核，那么你可以设置 pthread 的优先级：

[具有实时优先级的 pthread](https://stackoverflow.com/questions/3206814/pthreads-with-real-time-priority)

[如何提高 pthreads 中的线程优先级？](https://stackoverflow.com/questions/3649281/how-to-increase-thread-priority-in-pthreads)

# android - 如何在android中用不透明度填充矩形

> ID：10348084
> 
> 赞同：16
> 
> 时间：2012-04-27T09:23:08.630
> 
> 标签：android, android-canvas

我可以用画布绘制矩形填充矩形：

```
Rect rt = new Rect(0, 0, getWidth(), getHeight());
myPaint.setColor(myColor);
myPaint.setStyle(Style.FILL);
canvas.drawRect(rt, myPaint); 
```

但我需要用不透明度填充矩形的方法（以百分比表示，0% 是透明的）。
我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-27T09:29:26.330

您可以使用[Paint 类](http://developer.android.com/reference/android/graphics/Paint.html)`Alpha`的属性。

`myPaint.setAlpha(10);`会帮助你。

# jquery - jQuery - 如何从父级读取参数

> ID：10348085
> 
> 赞同：0
> 
> 时间：2012-04-27T09:23:09.490
> 
> 标签：jquery, mobile

我正在尝试使用 jQuery mobile 构建移动应用程序。目前我的问题如下：在我的html中是一个列表（动态加载的，我不知道包含多少列表项，所以我们以3为例。tupelID的值也是未知的）：

```
<ul id="bibliothek" data-role="listview" data-divider-theme="b" data-inset="true">
<li data-theme='c'><a class='bibentry' href='#page1' data-transition='slide' tupelID='1'> Item 1</a></li>
<li data-theme='c'><a class='bibentry' href='#page1' data-transition='slide' tupelID='2'> Item 2</a></li>
<li data-theme='c'><a class='bibentry' href='#page1' data-transition='slide' tupelID='3'> Item 3</a></li>
</ul> 
```

如果用户单击其中一个列表项，则会加载一个新页面（#page1）。在此页面上，我想根据 a-tag 中的参数 (tupelID) 注入一些数据。我认为最简单的方法是 grep 列表中的所有链接 (jQuery('a.binetry')) 并为每个链接添加一个事件监听器：

```
jQuery('a.bibentry').addEventListener("click",function(this)
{
    alert "TupelID =" + this.tupelID
    // first test with a simple alert:
    // If users clicks on Item 1 the alert should be "1" (value of tupelID),
    // if users clicks on Item 2 the alert should be "2" (value of tupelID) and so on..
}); 
```

不幸的是，这不起作用，我无法在网络上找到我的问题的解决方案。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:27:43.810

试试这个-->

```
jQuery('a.bibentry').on("click",function()
    {
        alert("TupelID =" + $(this).attr('tupelID'));
        // first test with a simple alert:
        // If users clicks on Item 1 the alert should be "1" (value of tupelID),
        // if users clicks on Item 2 the alert should be "2" (value of tupelID) and so on..
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T09:30:14.963

```
$('#bibliothek').on('a.bibentry', 'click', function(){
  alert("TupelID =" + $(this).attr('tupelID'));
}); 
```

# ios - Cordova 1.6.1 - 未找到插件，或者不是 CDVPlugin

> ID：10348086
> 
> 赞同：1
> 
> 时间：2012-04-27T09:23:09.740
> 
> 标签：ios, static-libraries, phonegap-plugins, cordova

对不起，我的英语不是很好。我正在使用科尔多瓦 1.6.1。我创建了一个新的基于cordova的项目，并对其进行了扩展以添加一个插件。我使用我创建的插件构建了一个静态库，并尝试运行包含该库的项目（该库可以在xcode的构建设置中找到），没有插件文件夹中的源

运行我的应用程序时出现以下错误：

[INFO] ClientChannel(1) 正在初始化... CDVPlugin 类 MNClientChannelPlugin (pluginName: MNClientChannelPlugin) 不存在。错误：未找到插件“MNClientChannelPlugin”，或者不是 CDVPlugin。检查 Cordova.plist 中的插件映射。

对这些错误的一些评论： 1) 第一行是我编写的 JavaScript 代码中的日志，这表明“初始化”功能已启动。该函数调用名为 MNClientChannelPlugin 的插件的 init 函数。2) & 3) 这些日志来自原生 iOS cordova s​​dk（从 CDVViewController.mm 的 getCommandInstance (2) 和 execute (3) 函数调用）

在 Codova.plist 中，我将 MNClientChannelPlugin 作为键和值。使用此配置，当我将 MNClientChannelPlugin 源 (.mm 和 .h) 放在 Plugins 文件夹中时，它可以工作，但当我使用 MNClientChannelPlugin.mm 创建静态库时，它就不行了。（我在我的项目中包含了这个库，并将 .h 标头放在 Plugins 文件夹中）。Cordova 似乎在库中找不到源...

Cordova 插件在 Cordova.Framework 中，而不是在带有 .m 和 .h 文件的 Plugins 文件夹中，因此似乎可以创建插件，将它们打包在库中并在基于 cordova 的项目中使用它们，但我没有为我工作......我查看了档案和提交，但没有找到任何解决方案。有谁知道可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:14:27.517

是的，我已经找到了解决方案。

这是问题所在：

*   您的 MNClientChannelPlugin 保存在静态库中
*   您的主项目引用了静态库
*   链接器足够聪明，只链接主项目实际使用的类。
*   据链接器所知，您的项目不使用 MNClientChannelPlugin，因为它没有在任何地方引用。
*   它没有在任何地方引用，因为仅当您的 phonegap 应用程序碰巧请求 MNClientChannelPlugin 实例时才会加载该类。
*   因此，该类未链接到您的最终二进制文件中，您会收到上述错误。

解决方案是强制链接器包含 MNClientChannelPlugin 对象。

简单的方法是将 -all_load 添加到主项目的“其他链接器标志”中。这将产生链接项目中每个静态库中的每个类的连锁反应。不过它确实有效。

更好的是使用 -force_load 和静态库的名称。这是一篇对此有帮助的帖子，尽管我自己没有尝试过：

[xcode-project-target-settings-syntax-for-linker-flag-force-load-on-iphone](https://stackoverflow.com/questions/3354864/xcode-project-target-settings-syntax-for-linker-flag-force-load-on-iphone)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:12:13.650

如果您使用的是 Pushwoosh（我假设您是），说明清楚地说明您应该复制并粘贴此代码：

```
<key>PushNotification</key>
<string>PushNotification</string> 
```

到“ ***Cordova.plist*** . 因此，如果您遇到我曾经遇到的上述错误，则表示您没有将其复制并粘贴到插件中。将键和字符串值移动到正确的位置应该可以消除错误。

快乐黑客！

# model-view-controller - 异常处理和 MVC 应用程序

> ID：10348089
> 
> 赞同：2
> 
> 时间：2012-04-27T09:23:30.163
> 
> 标签：model-view-controller, design-patterns, exception-handling

我正处于编程的早期阶段，并且有一些 Java 和 C# 应用程序。我正在使用带有桌面应用程序的基本 mvc 逻辑作为视图、控制器和连接到数据库的模型。

我已经花了很多脑细胞来研究如何以一种好看的方式处理异常，到目前为止，我的解决方案有点异味。有一段时间，我将所有异常都扔到了视图中，但这似乎很糟糕。现在我在控制器中有捕获块，但不知道如何处理它们。

如果控制器曾经有 void 方法，它们现在会返回一个带有某种错误消息的字符串。如果方法必须返回一些东西，它们现在返回 null 并且视图会在执行任何操作之前检查响应是否为 null。

我正在寻找的是一个更好看的解决方案！有没有最佳实践方法来做到这一点？我在谷歌搜索期间没有找到任何东西。

我意识到这是一个普遍的问题，但我希望得到一些提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:05:25.880

也许这个其他问题和相关答案可能会有所帮助：

[https://stackoverflow.com/a/10293950/1158895](https://stackoverflow.com/a/10293950/1158895)

# ruby-on-rails - Ruby 运算符从块中重载方法

> ID：10348093
> 
> 赞同：-1
> 
> 时间：2012-04-27T09:23:41.610
> 
> 标签：ruby-on-rails, ruby, metaprogramming, dsl

我正在使用 Ruby 1.9.2。例如我有课：

```
class Test
  def ==(param)
    # some process
  end

  def bar(param)
    puts "foo bar #{param}"
  end
end 
```

我可以使用以下方法调用**bar**方法：

```
Test.new.instance_eval{ bar 'celona' } 
```

但我不能像块一样执行**==方法**

```
Test.new.instance_eval{ == "foo" } 
```

我有**语法错误，意外的 tEQ**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:26:55.810

以下对我有用：

```
class Test
  def ==(param)
    p "You put #{param}"
  end
end

Test.new.instance_eval{|a|  a == "foo" }
=> "You put foo" 
```

解决方案实际上取决于您的用例。

**编辑**实例化类时也是如此。

```
b = Test.new
b == "foo"
=> "You put foo" 
```

你也可以使用`self`

```
Test.new.instance_eval{self == "foo" } 
```

我不完全确定原因，但我猜该`==`方法需要一个明确的被调用者并且它无法推断`self`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T09:27:12.260

你可以试试 ：

```
Test.new.send("==", "foo") 
```

# qt - 将 Qt GUI 嵌入到现有的 OpenGL 程序中

> ID：10348098
> 
> 赞同：4
> 
> 时间：2012-04-27T09:24:00.427
> 
> 标签：qt, opengl

我目前正在尝试让 Qt 与我现有的程序一起工作。

我正在使用 SFML 创建我的 OpenGL 渲染上下文并创建窗口。到目前为止，我尝试过的东西总是由 Qt 创建一个单独的窗口，而不是仅仅渲染到现有的上下文中。

有什么方法可以强制 Qt 渲染到已经存在的 OpenGL 上下文？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-04-16T07:08:00.903

我没有研究细节，但这[已经为 openage 做了](https://github.com/SFTtech/openage/pull/422)。

我认为查看[QQuickRenderControl 的文档](http://doc.qt.io/qt-5/qquickrendercontrol.html)可能是一个不错的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T13:03:15.840

Qt 想要完全控制窗口和事件循环，所以这是行不通的（除非你付出了很多努力）。您最好的选择是使用 QGLWidget 并用它来模拟 SFML 的事件管理，以便您的应用程序有效地在 Qt 上运行。很有可能将 Qt 小部件渲染到 OpenGL 窗口中（Qt 有一个 OpenGL 小部件后端），但这仍然必须由 Qt 本身管理。

# c - 解决 valgrind 检查的内存问题

> ID：10348101
> 
> 赞同：3
> 
> 时间：2012-04-27T09:24:05.920
> 
> 标签：c, linux, valgrind

我有一个问题，valgrind；我不知道为什么当我用 valgrind 检查我用 C 开发的程序时，它无法在发现问题的地方显示函数名称（它显示“???”），但这个问题并不适用于它检测到的所有错误

```
==9803== ERROR SUMMARY: 24 errors from 6 contexts (suppressed: 0 from 0)
==9803== 
==9803== 1 errors in context 1 of 6:
==9803== Conditional jump or move depends on uninitialised value(s)
==9803==    at 0x40F7EC6: ???
==9803== 
==9803== 1 errors in context 2 of 6:
==9803== Conditional jump or move depends on uninitialised value(s)
==9803==    at 0x40F86F8: ???
==9803== 
==9803== 1 errors in context 3 of 6:
==9803== Conditional jump or move depends on uninitialised value(s)
==9803==    at 0x40F8166: ???
==9803== 
==9803== 1 errors in context 4 of 6:
==9803== Conditional jump or move depends on uninitialised value(s)
==9803==    at 0x40F805E: ???
==9803== 
```

您有使用 valgrind 显示函数名称的解决方案吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:54:19.433

大概这些错误发生在您没有调试符号的库中。很容易确认：只需`pidof my-binary`在应用程序运行时查看 /proc/ /maps。

```
08048000-08052000 r-xp 00000000 fe:00 42546         /bin/cat
08052000-08053000 rw-p 0000a000 fe:00 42546         /bin/cat
097fb000-0981c000 rw-p 00000000 00:00 0             [heap]
f73bc000-f75ac000 r--p 00000000 fe:02 281727        /usr/lib/locale/locale-archive
f75ac000-f75ad000 rw-p 00000000 00:00 0 
f75ad000-f76ed000 r-xp 00000000 fe:00 18416         /lib/i686/cmov/libc-2.11.2.so
f76ed000-f76ef000 r--p 0013f000 fe:00 18416         /lib/i686/cmov/libc-2.11.2.so
f76ef000-f76f0000 rw-p 00141000 fe:00 18416         /lib/i686/cmov/libc-2.11.2.so
f76f0000-f76f3000 rw-p 00000000 00:00 0 
f7705000-f7707000 rw-p 00000000 00:00 0 
f7707000-f7708000 r-xp 00000000 00:00 0             [vdso]
f7708000-f7723000 r-xp 00000000 fe:00 19087         /lib/ld-2.11.2.so
f7723000-f7724000 r--p 0001a000 fe:00 19087         /lib/ld-2.11.2.so
f7724000-f7725000 rw-p 0001b000 fe:00 19087         /lib/ld-2.11.2.so
ffb6e000-ffb83000 rw-p 00000000 00:00 0 
```

这清楚地显示了每个共享库的代码段（标记为 r-xp）的地址。只需找到与您看到的地址匹配的范围，您至少会知道哪个库负责。

# c# - 如何在 Tridion 中为 C# TBB 添加第三方 dll？

> ID：10348103
> 
> 赞同：5
> 
> 时间：2012-04-27T09:24:13.560
> 
> 标签：c#, xml, html-parsing, tridion

我正在创建一个 C# TBB。我有如下所示的 XML 代码。

```
<content>
  <ah>123</ah>
  <ph>456</ph>
  <body>
    <sc>hi</sc>
    <value>aa</value>
    <value>bb</value>
    <value>cc</value>
    <value>dd</value>
    <value>dd</value>
  </body>
  <body>
    <sc>hello</sc>
    <value>ee</value>
    <value>ddff</value>
  </body>
</content> 
```

C# 待定代码：

```
using (MemoryStream ms = new MemoryStream())
{
XmlTextWriter securboxXmlWriter = new XmlTextWriter(ms, new System.Text.UTF8Encoding(false));
securboxXmlWriter.Indentation = 4;
securboxXmlWriter.Formatting = Formatting.Indented;
securboxXmlWriter.WriteStartDocument();

securboxXmlWriter.WriteStartElement("component");

securboxXmlWriter.WriteAttributeString("xmlns:xsi", "http://www.w3.org/2001/XMLSchema-instance");
securboxXmlWriter.WriteAttributeString("xmlns", "http://www.w3.org/1999/xhtml");

securboxXmlWriter.WriteStartElement("content");
securboxXmlWriter.WriteStartElement("wire:wire");
securboxXmlWriter.WriteStartElement("wire:si");

securboxXmlWriter.WriteStartElement("wg:ah");
securboxXmlWriter.WriteElementString("text", package.GetValue("Component.ah"));
securboxXmlWriter.WriteEndElement();

securboxXmlWriter.WriteStartElement("wg:ph");
securboxXmlWriter.WriteElementString("nlt", package.GetValue("Component.ph"));
securboxXmlWriter.WriteEndElement();

securboxXmlWriter.WriteEndElement();
securboxXmlWriter.WriteEndElement();
securboxXmlWriter.WriteEndElement();
securboxXmlWriter.WriteEndElement();
securboxXmlWriter.WriteEndDocument();
securboxXmlWriter.Flush();
securboxXmlWriter.Close();

Item output = package.GetByName("Output");

if (output != null)
{
package.Remove(output);
}

package.PushItem("Output", package.CreateStringItem(ContentType.Xml, Encoding.UTF8.GetString(ms.ToArray())));
} 
```

在 XML 代码中，“body”标签出现了多次。我需要提取每个“body”标签内容。为此，我正在使用 HTML 敏捷包。为了使其在 C# TBB 中工作，如何将 HTML 敏捷包 DLL 添加到 Tridion 系统？并且还请在 html 敏捷中提供一个示例代码片段以循环遍历 body 标记。

如果 HTML Agility 不能与 C# TBB 一起使用，那么请给我建议一种如何获取“body”标签内容的方法？

提前致谢。感谢您尽早回复。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T11:21:02.203

您需要将第三方 DLL 放在全局程序集缓存 (GAC) 中。对于示例敏捷包代码，我建议您使用更具体的标题提出一个单独的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T20:07:24.083

使用 ILMerge 可以省去在 GAC 中安装外部 DLL 的麻烦。只需确保您不会通过将您的代码与其他人的代码合并来违反任何（版权）法律。从技术上讲，这很简单：在构建模板 DLL 之后，构建后操作会将其与您可能需要的外部 DLL 合并，并创建一个新的 DLL。然后您可以将该合并的 DLL 上传到 Tridion。

示例：假设您的模板项目名为“MyTemplates”，它依赖于 ExternalLibraryOne.dll 和 ExternalLibraryTwo.dll。这是你要做的：

*   [从http://www.microsoft.com/en-us/download/details.aspx?id=17630](http://www.microsoft.com/en-us/download/details.aspx?id=17630)下载 ILMerge （免费）
*   在您的模板解决方案中，创建一个名为 Solution Items 的文件夹并在其中复制 ilmerge.exe。
*   打开模板项目的属性并添加以下构建后事件：

    "$(SolutionDir)Solution Items\ilmerge"
    /lib:"C:\Windows\Microsoft.NET\Framework\v4.0.30319" /t:dll /targetplatform:v4,C:\Windows\Microsoft.NET\Framework\v4 .0.30319 /out:"$(TargetDir)$(ProjectName).merged.dll" "$(TargetDir)ExternalLibraryOne.dll" "$(TargetDir)ExternalLibraryTwo.dll" "$(TargetPath)"

*   构建您的模板项目。输出文件夹（bin/Debug 或 bin/Release）现在将包含一个名为 MyTemplates.merged.dll 的文件。您可以使用 TcmUploadAssembly 将其上传到 Tridion。

这当然是假设您使用的是 .NET 4。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-29T16:04:52.853

认为您还可以使用[ILMerge](http://www.codeproject.com/Articles/9364/Merging-NET-assemblies-using-ILMerge)将您的第三方 DLL 和您的 TBB 程序集合并为一个，然后您可以将其上传到 Tridion。

# iphone - 如何处理与游戏相关的分辨率更改 320x480 => 640x960

> ID：10348104
> 
> 赞同：0
> 
> 时间：2012-04-27T09:24:18.167
> 
> 标签：iphone, ios, ios4, unity3d

我决定为我的 iPod 游戏设置 2 组图像。一个用于 320x480，另一个用于视网膜。我可以在它们之间愉快地切换，但这迫使我添加额外的代码来处理分辨率的变化。

我的游戏是在网格上的屏幕空间中进行的，因此，如果我有 32 个像素图块，我将不得不在低分辨率中使用 32 个偏移，在视网膜中使用 64 个偏移（因为分辨率加倍）。对于一个简单的游戏，这可能没有问题，但其他更复杂的游戏呢？根据目标分辨率，如何在不硬编码的情况下处理这个问题。

当然，绕过这一点的简单方法是发布 320x480 版本并让硬件升级，但这不是我想要的，因为图像模糊。我在这里有点迷路了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T09:29:33.097

这是自动的。您只需为视网膜分辨率添加后缀为“@2x”的图像文件。关于像素，从您的程序中，您可以处理由系统转换为像素的点。iphone 视网膜和非视网膜的屏幕尺寸为 320x480 点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T09:30:21.263

`contentScaleFactor`如果必须，您可以通过将像素/点位置与视图的 相乘或相除来轻松地进行从点到像素的转换（反之亦然） 。但是，如果您只是使用点而不是像素，通常这是由您自动完成的。

# iphone - 我应该在哪里创建和呈现整个 iPhone 应用程序中使用的模态 ViewController

> ID：10348105
> 
> 赞同：1
> 
> 时间：2012-04-27T09:24:19.053
> 
> 标签：iphone, ios, uitabbarcontroller, modalviewcontroller

我有一个使用 UITabBarController 作为其主界面的 iPhone 应用程序。该应用程序还大量使用从各种选项卡呈现的模态 UINavigationController。

我需要以模态方式呈现一个 ViewController，它可以从应用程序中的各种位置触发。在触发它的所有视图控制器之间复制创建和呈现它的代码似乎是一个糟糕的主意。我想把这段代码放在一个地方，并从任何 viewController 想要呈现它的地方触发它。

这个集中的位置应该在哪里？我的根 ViewController 是一个 UITabBarController 所以在那里不好，我讨厌将视图功能集中到 AppDelegate 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:14:37.607

我会创建一个新的类文件，它具有呈现您想要的视图的功能。这样你只需要编写一次代码来呈现模态视图，每个需要使用它的视图都可以用一行代码调用助手类上的函数。

```
@interface ApplicationHelper : NSObject {
}

+(void)showMyModalView:(UIViewController *)parentViewController;

@end 
```

执行：

```
#import "ApplicationHelper.h"
#import "ViewController.h"

@implementation ApplicationHelper

+(void)showMyModalView:(UIViewController *)parentViewController
{
      ViewController *vc = [[ViewController alloc] init];

      [parentViewController presentModalViewController:vc animated:YES];
}
@end 
```

然后在每个视图控制器中导入 ApplicationHelper 并调用 showMyModalView 方法

```
[ApplicationHelper showMyModalView:me]; 
```

这允许您将所有视图处理代码保存在一个单独的文件中，以供您的应用程序委托使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T09:53:04.077

您可以创建一个 UIViewController 并为其实现一些委托方法。然后你可以像这样展示视图控制器：

```
[currentViewController presentViewController:yourViewController animated:YES]; 
```

当您的视图控制器中触发事件时，它将委托给调用者。

在这种情况下，您只需为“YourViewController”编写一次代码，然后在您想要的任何地方重复使用它。你也可以使用 pushviewcontroller：

```
[self.navigationController pushviewcontroller:yourViewController animated:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T12:10:55.323

不要尝试传递参考。

只是`alloc] init];`一个新的实例——无论你需要在哪里使用它。

例如。

```
MyModalViewController *controller = [[MyModalViewController alloc] init];
[self presentModalViewController:controller animated:YES]; 
```

# c# - 带有 HTTPStatusCodeResult 和 jQuery 的自定义错误消息

> ID：10348111
> 
> 赞同：7
> 
> 时间：2012-04-27T09:24:47.907
> 
> 标签：c#, jquery, .net, asp.net-mvc-3, http

我有一个控制器操作，可以将一些 JSON 结果返回到 jQuery Full Calendar 插件。如果出现错误，我会返回`HTTPStatusCodeResult`带有自定义错误消息的 a，但我无法显示自定义错误消息。警告框中显示的只是默认的 Http 状态（即：“禁止”或“内部服务器错误”）

返回错误消息的控制器代码

```
else if(id != CurrentUser.UserId)
{
    return new HttpStatusCodeResult(403, "You are not authorised to view this.");
}
else
{
    return new HttpStatusCodeResult(500, "There was an error on the server.");
} 
```

jQuery代码

```
$(document).ready(function () {
             $('#calendar').fullCalendar({
                 header: {
                     left: 'prev,next today',
                     center: 'title',
                     right: 'month,agendaWeek,agendaDay'
                 },
                 height: 600,
                 eventSources: [{
                     url: events,
                     type: 'Get',
                     error: function(response, status, error) {
                         alert(response.statusText);
                     }
                 }],
                 allDayDefault: false,
                 selectable: true,
                 eventClick: function (event) {
                     if (event.url) {
                         $('#details').load(event.url);
                     }
                 }, 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-27T13:56:20.210

实际上，代码中根本没有任何问题。问题出在 Visual Studio 中的 ASP.NET 开发 Web 服务器上。我切换到使用 IIS express，它工作正常。

# php - 禁用重定向脚本

> ID：10348112
> 
> 赞同：1
> 
> 时间：2012-04-27T09:24:48.293
> 
> 标签：php, javascript, jquery

我们的网站上有一个重定向脚本，它检测移动设备并将用户重定向到一个子域，该子域进入移动站点文件夹。但是现在我们需要一种机制，在页面上为访问者提供一个按钮，然后重新加载页面并绕过此检查。目标是，如果智能手机用户想要查看完整的网站，我们需要给他们一个按钮来实现。所以，问题是：当用户点击那个按钮时，是否可以禁用这个脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:07:19.383

我相信 cookie 是一个更好的解决方案，因为它们不会在页面更改时消失。

当用户单击按钮并将他发送到主站点时，只需制作一个 cookie。

如何制作饼干：_

```
setcookie("fullsite", "SomeRandomThing", time()+60*60*24*30); // It will expire after a month 
```

如果未设置 cookie，则使其重定向。

```
if (!isset($_COOKIE['fullsite'])
{
  // redirect
} 
```

类似地，为用户创建一个按钮以切换回并让该按钮删除 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T09:33:57.667

是的你可以。根据按钮按下加载脚本。

```
if((!isset($_POST['button']) && mobiledevice==true))
{
         //put your redirection script here
} 
```

使用类似上面的东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T09:47:38.910

我过去所做的是在所有移动特定页面上设置一个 cookie，然后将用户重定向回非移动页面，读取该 cookie，如果设置添加“返回移动”横幅并跳过移动重定向代码。

还做了一个一次性使用的版本，它不显示“返回移动”横幅并自动清除 cookie，以便用户访问的下一页他们返回移动

# javascript - 悬停文本时，使用 jquery 更改其他 div 的背景

> ID：10348113
> 
> 赞同：0
> 
> 时间：2012-04-27T09:24:50.837
> 
> 标签：javascript, jquery

当悬停链接时，我试图更改前一个 div 的背景，但在这里它不起作用是代码[Jsfiddle](http://jsfiddle.net/sureshpattu/FEdk9/) 这是我的脚本

```
$('div a.link').hover(function(){

var icon = $(this).prevAll('div.icon').first();          
          icon.css({'background':'url(http://www.rangde.org/images/icons/circle_grey_hover.jpg) no-repeat', 'color':'#fff','cursor':'pointer'});

 }); 
```

我的 html

```
<div class="icon">1</div>
<div><a href="#" class="link">First article</a></div>
<div class="clearfloat"></div>
<div class="icon">2</div>
<div><a href="#" class="link">Second article</a></div>
<div class="clearfloat"></div>
<div class="icon">3</div>
<div><a href="#" class="link">Third article</a></div> 
```

我的 CSS

```
.icon{background: url(http://www.rangde.org/images/icons/circle_grey.jpg) no-repeat;
width: 92px;
height: 97px;
padding: 35px 0px 0px 45px;
font-size: 14pt;
color: black;
font-weight: 600;
width: 32%;float:left;}
.link{width:60%;float:left;color:#048ccc;font-weight:600;padding-top:30px;}
.clearfloat{clear:both;}
​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T09:29:17.843

```
 $('div a.link').hover(function(){
     var icon = $(this).parent().prev();          
     icon.css({'background':'url(http://www.rangde.org/images/icons/circle_grey_hover.jpg) no-repeat', 'color':'#fff','cursor':'pointer'});
 }, function() {
     var icon = $(this).parent().prev().css({'background':'none'});
 });           

​ 
```

[http://jsfiddle.net/FEdk9/9/](http://jsfiddle.net/FEdk9/9/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T09:52:01.753

当你可以只用 css 做到这一点时，为什么还要使用 jQuery？ [http://jsfiddle.net/czW5d/](http://jsfiddle.net/czW5d/)

# excel - 这是 Excel 处理 Office Open XML 元数据中的错误吗？

> ID：10348114
> 
> 赞同：2
> 
> 时间：2012-04-27T09:24:51.143
> 
> 标签：excel, metadata, openxml

Excel 对可以与单元格关联的元数据的处理似乎已损坏，但我很想知道是否有其他人尝试（成功或其他方式）使用此功能。

由于似乎没有办法报告针对 Excel 的错误，我已经发布了代码问题的完整描述以在此处重现它：http: [//social.technet.microsoft.com/Forums/en-US /excel/thread/c7f9747a-1d03-4415-97d4-d9aa58b4d240](http://social.technet.microsoft.com/Forums/en-US/excel/thread/c7f9747a-1d03-4415-97d4-d9aa58b4d240)但我会重复重要的细节。

简而言之，Excel 似乎正在删除并错误地重新索引我以编程方式与单元格关联的元数据。

## 一、对规范相关部分的总结：

从 OOXML 18.9 开始：有两种类型的元数据：“单元元数据”和“值元数据”。

单元元数据跟随单元移动。价值元数据通过公式等遵循价值。

从 OOXML 18.3.1.4 开始：c（单元格）元素具有 cm 和 vm 属性，它们都记录为“元数据部分中 [cell|value] 元数据的从零开始的索引...”

从 OOXML 18.9.17 开始：valueMetadata 是“块元素的集合，每个元素都定义了特定单元格的值元数据”。“工作簿中的单元格索引到此集合中”。

valueMetadata 包含 bk 元素，而 bk 元素又包含 rc（元数据记录）元素

从 OOXML 18.9.15 开始：rc 元素具有 t（类型索引）和 v（值索引）属性。t 是 metadataTypes 从 1 开始的索引，v 是 futureMetadata 元素中从 0 开始的索引，它与元数据类型的名称匹配。

## 这是一个可能看起来像的示例：

```
...
<c vm="0">  <!-- vm points to the first bk inside valueMetadata below -->
...
<x:valueMetadata>
  <x:bk>
    <x:rc t="1" v="0" />  <!-- t points to the first metadataType below. v points to the first bk in the futureMetadata below (whose name matches the metadataType to which t points) -->
  </x:bk>
</x:valueMetadata>
...
<x:metadataTypes>
  <x:metadataType name="MyMetaType" ... />  <!-- name dictates which futureMetadata valueMetadata's v attribute indexes into -->
</x:metadataTypes>
...
<x:futureMetadata name="MyMetaType" ...>
  <x:bk>
    <x:extLst>
      <x:ext xmlns:x="http://schemas.openxmlformats.org/spreadsheetml/2006/main" uri="http://example.com/extension" p5:value="test value" xmlns:p5="http://example.com/extension" />
    </x:extLst>
  </x:bk>
</x:futureMetadata>
... 
```

## 问题

据我所知，对于 n > 2 的值，如果您将 n 个单元格与元数据相关联，Excel 将删除最后一段元数据，以及索引为 1 的元数据，它会默默地这样做。然后索引为 0..n-3，除了第一个（0 索引）之外的所有关联都是错误的。这使得未来的元数据完全无用。

对于 n == 1，Excel 仅删除最后一段元数据（索引 1）。如果我们为 c 元素的 vm 属性尝试从 1 开始的索引，我们会得到不同的行为。这可能不相关，因为它与规范相反，但稍微好一点的行为可能表示一个错误：

```
n    Deleted Indices (0-based)     Deleted Indices (0-based) 
     when using 0-based indices    when using 1-based indices
1    0                             None
2    1                             1
3    1,2                           1
4    1,3                           1
5    1,4                           1
6    1,5                           1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-06T11:02:21.247

一个合适的解决方法从[这里](https://social.technet.microsoft.com/Forums/office/en-US/c7f9747a-1d03-4415-97d4-d9aa58b4d240/bug-in-excels-handling-of-metadata-or-at-least-a-deviation-from-the-open-office-xml-specification?forum=excel#dbcdee5d-6677-46b0-8ea5-53434ec4cdb9)。

> 参加聚会有点晚了，但最近才开始使用 OpenXML。最简单的解决方法是避免使用元数据而只使用扩展列表。它们可以在单元级别进行定制和应用。

因此，您不必摆弄元数据部分，您可以编写它来避免问题，您提到：

```
<c>
  <extLst>
    <ext uri="http://example.com/extension" p5:value="test value" xmlns:p5="http://example.com/extension">
      <p5:anotherValue>127</p:anotherValue>
    </ext>
  </extLst>
</c> 
```

# design-patterns - 表存档器的此项目的设计模式建议

> ID：10348115
> 
> 赞同：2
> 
> 时间：2012-04-27T09:24:53.280
> 
> 标签：design-patterns, architecture

所以我有以下项目要完成。我还没有决定如何设计它。会喜欢一些建议。

它基本上是一个表格存档器。给定特定条件，您需要将这些行导出到另一个地方。这个地方可以是另一个数据库或（s）ftp 服务器。如果您选择一个数据库，您需要在每次达到特定限制时创建一个表（例如每个表不超过 50k 行），如果您选择一个 (s)ftp 服务器，那么您需要编写一个 CSV 或 XML 并将文件在那里。

所以我们有这些组合：

1.  sql2CustomerSql
2.  sql2Oursql（为此，我们已经根据系统配置进行了连接和获取一些信息的类）
3.  csv2ftp
4.  csv2sftp
5.  xml2ftp
6.  xml2sftp

现在，我到处都看到 AbstractFactory 模式，但基于什么？我的想法是我应该有 SQLWriter、XMLWriter、CSVWriter，它们都继承自一个抽象 Writer 类，该类实现一些常见的策略，如计数行、获取常见的配置参数等......我应该对 Connection 类/接口做同样的事情吗（因为sql 和 (s)ftp 真的不一样吗？

如果您需要更多信息，请询问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T11:10:13.113

听起来你在正确的道路上。

您应该避免创建由 Writer 和 Connection 组合而成的类，而是创建某种包含（作为属性）Writer 接口和 Connection 接口的 Manager 类。然后创建每个适当的实现并将它们传递给 Manager。

这是策略设计模式的经典用法。

**编辑**：添加代码示例。您应该添加适当的错误检查。

```
class Writer
{
public:
    virtual void output(cons std::string &data) = 0;
};

class Format
{
public:
    virtual std::string serialize() = 0;
};

// Create concrete Writer and Format classes here

class OutputManager
{
public:
    // Notice there should be no Writer, Format creation logic here,
    // This class should focus on orchestrating the output
    OutputManager() : writer_(NULL), format_(NULL) {}
    OutputManager(Writer *w, Format *f) : writer_(w), format_(f) {}

    void setWriter(Writer *w) { writer_ = w; }
    Writer *getWriter()       { return writer_; }

    void setFormat(Format *f) { format_ = f; }
    Format *getFormat()       { return format_; }

    // Maybe this should have a different return type
    void doOutput()
    {
        // Not sure what else you would need here,
        // but this is an example usage
        writer_->output(format_->serialize());
    }

private:
    Writer *writer_;
    Format *format_;
};

//
// And now the factories
//
class OutputAbstractFactory
{
public:
    OutputAbstractFactory(Config *c) config_(c) {}
    void createFactories()
    {
        writerFactory_ = WriterAbstractFactory::getWriterFactory(config_);
        formatFactory_ = FormatAbstractFactory::getFormatFactory(config_);
    }

    Writer *getWriter() { return writerFactory_->getWriter(); }
    Format *getFormat() { return formatFactory_->getFormat(); }

private:
    WriterAbstractFactory *writerFactory_;
    FormatAbstractFactory *formatFactory_;
    Config *config_;
}

class WriterAbstractFactory
{
public:
    // Config is a class you will have to make with 
    // the info detailing the Writer and Format stuff
    static WriterAbstractFactory *getWriterFactory(Config *c);
    virtual Writer *getWriter() = 0;
};

class FormatAbstractFactory
{
public:
    // Config is a class you will have to make with
    // the info detailing the Writer and Format stuff
    static FormatAbstractFactory *getFormatFactory(Config *c);
    virtual Format *getFormat() = 0;
};

// Create concrete factories here

//
// And this ties it all together
//
int main(int argc, char **argv)
{
    Config c;
    // populate Config accordingly

    OutputAbstractFactory *factory(&c);
    factory.createFactories();

    Writer *w = factory->getWriter();
    Format *f = factory->getFormat();
    // Do whatever else you need to with the Writer/Format here

    OutputManager om(w, f);
    // Do whatever else you need with the OutputManager here
    om.doOutput();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:37:54.657

您可能想要获取一份[Modern C++ Design](https://rads.stackoverflow.com/amzn/click/com/0201704315)的副本，以获取有关如何制作基于策略的通用转换工具的想法。下面是一个非常粗略的框架，它在两个策略上进行了参数化：格式和连接。

```
template
<
    typename FormatPolicy,    // SQL, XML, CSV, provides row, config functionality
    typename ConnectionPolicy // SQL, FTP, provides open/close/read/write functionality
>
class ConversionTool
: 
    public FormatPolicy,
    public ConnectionPolicy
{
public:
    // your conversion interface here
    void operator()( /* your input */, /* your output */);
};

class SQLFormat { // SQL specific stuff } ;
class SQLConnection { // SQL specific stuff };

typedef ConversionTool<SQLFormat, SQLConnection> SQL2OurCustomerSQL;
SQL2OurCustomerSQL()(in_file, out_file); // for elsewhere declared in_file / out_file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T13:14:32.380

您正在处理两个问题。一个是格式，另一个是持久化的目的地。对于格式，您需要序列化程序，对于目标，您需要适配器。SqlSerializer、XMLserializer。SQLDestination、FTPDestination 等。

伪代码如下所示：

*   Destination.persist(new Serializer(SourceData));
*   Destination.persist(Serializer.transform(SourceData));
*   新目的地（新序列化程序（源数据））.persist（）；

    ```
    interface DataSerializer{
        String serialize();
    }

    class SqlSerializer implements DataSerializer {
        final Object rawData;

        SqlSerializer(Object rawData) {
            this.rawData = rawData;
        }

        String serialize() {
            // SQL Serialization Logic
        }
    }

    class XmlSerializer implements DataSerializer {
        final Object rawData;

        XmlSerializer(Object rawData) {
           this.rawData = rawData;
        }

        String serialize() {
            // XML Serialization Logic
        }
    }

    interface Destination {
        void persist(DataSerializer dataSerializer);
    }

    class SqlDestination implements Destination {
        final String username;
        ...
        ...

        SqlDestination(String username, String password, String url) {
            this.username = username;
            ...
            ...
        }

        void persist(DataSerializer dataSerializer) {
            // open SQL connection
            String = dataSerialize.serialize();
            // do sqlPersistanceLogic
        }
    }

    class FtpDestination implements Destination {
        final String username;
        ...
        ...

        FtpDestination(String username, String password, String url) {
            this.username = username;
            ...
            ...
        }

        void persist(DataSerializer dataSerializer) {
            // open FTP session connection
            String = dataSerialize.serialize();
            // send to ftpDestination
        }
    }

    Call:

    Destination dest = getApropriateDestination();
    dest.persist(new XmlSerializer(rawData)); 
    ```

您还可以实现逻辑来验证特定目标支持的序列化程序，或者如果目标和序列化程序之间存在 1:1 关系，您可以使用模板。但我不知道它在 C++ 中是怎样的；

根据您使用的工具和框架，您可以实施三种建议的方式之一。原则仍然存在

# asp.net-mvc-3 - MVC授权问题/重复登录请求

> ID：10348117
> 
> 赞同：0
> 
> 时间：2012-04-27T09:25:06.430
> 
> 标签：asp.net-mvc-3, authorization, subdomain, multi-tenant

我已经设置了一个授权模式来处理对子域站点的访问，并确保用户只能访问与站点相关的数据。

我使用“标准”codefirst 表单授权，其中我已将属性 SiteId 添加到所有方法以及所有表中。（示例如下所示 - 抱歉它的长度）

这样，登录不同子域站点的用户可以在其子域中使用相同的用户名。

我还在所有其他表中使用 siteID 以确保授权用户使用，例如，客户数据正在使用仅与其子域相关的客户数据。

在本地，在开发机器上，它可以正常工作。

但是，一旦我将应用程序放到网络主机上，我每隔几分钟就会被重定向到登录屏幕。一旦它发生在其中一个站点上，我就会从我登录的所有其他站点重定向。（site1.myapp.com，site2.maypp.com，....）所有站点都指向同一个应用程序（ site1.myapp.com)

所以问题是：

```
1) if anyone has an idea/experience in what may be the cause/solution for this and

2) perhaps suggestion on different (better) implementation method 
```

是否有一些缓存导致系统如此频繁地要求登录授权？

以下是我当前设置的示例：

```
public class User
{

    //Membership required
    [Key()]
    public virtual Guid UserId { get; set; }
    public int SiteID { get; set; }
    [Required()]
    [MaxLength(20)]
    public virtual string Username { get; set; }
    [Required()]
    [MaxLength(250)]
    [DataType(DataType.EmailAddress)]
    public virtual string Email { get; set; }
    ... 
```

会员提供者也在使用 siteID：

```
public class CodeFirstMembershipProvider : CodeFirstExtendedProvider
        {

            private string _ApplicationName;
            private int siteID = Convert.ToInt16(new AppSettings()["SiteID"]);
            ...
            ...

            public override string ExtendedValidateUser(string userNameOrEmail, string password)
            {
            ...
            ...                    
                using (DbContext context = new DbContext())
                {
                    User user = null;
                    user = context.Users.FirstOrDefault(Usr =>( Usr.Username == userNameOrEmail ) && (Usr.SiteID == siteID));
                    if (user == null)
                    {
                        user = context.Users.FirstOrDefault(Usr => (Usr.Email == userNameOrEmail ) && (Usr.SiteID == siteID));
                    } 
                    ... 
                    ... 
```

在每个控制器中，我都有：

```
[Authorize]
public class CustomerController : Controller
{
    int siteID = Convert.ToInt16(new AppSettings()["SiteID"]);
...

    public ViewResult Index()
    {
        var data = (from k in context.Customers
                    from ks in context.CustomerSites
                    where ((k.CustomerID == ks.CustomerID) && (ks.SiteID == siteID) && (ks.CompleteAccess == true))
                    select (k)).ToList();  
         ...           
         ... 
```

正在使用 AppSettings 类缓存 SiteID::

```
/// <summary>
/// This class is used to manage the Cached AppSettings
/// from the Database
/// </summary>
public class AppSettings
{

  /// This indexer is used to retrieve AppSettings from Memory (only siteID for now)

  public string this[string Name]
  {
   get
   {
     //See if we have an AppSettings Cache Item
     if (HttpContext.Current.Cache["AppSettings"] == null)
     {
         int? SiteID = 0;
        //Look up the URL and get the Tenant/Site Info
        using (DbContext dc =
           new DbContext())
        {
           Site result =
                  dc.Sites
                  .Where(a => a.Host ==
                     HttpContext.Current.Request.Url.
                        Host.ToLower())
                  .FirstOrDefault();

           if (result != null)
           {
              SiteID = result.SiteID;               }
        }
        AppSettings.LoadAppSettings(SiteID, FirmaID);
     }

     Hashtable ht =
       (Hashtable)HttpContext.Current.Cache["AppSettings"];
     if (ht.ContainsKey(Name))
     {
        return ht[Name].ToString();
     }
     else
     {
        return string.Empty;
     }
  } 
```

}

```
/// <summary>
/// This Method is used to load the app settings from the
/// database into memory
/// </summary>
public static void LoadAppSettings(int? SiteID)
{
  Hashtable ht = new Hashtable();

  //Now Load the AppSettings
  using (DbContext dc =
     new DbContext())
  {
      ht.Add("SiteID", SiteID);
  }

  //Add it into Cache (Have the Cache Expire after 3 Hour)
  HttpContext.Current.Cache.Add("AppSettings",
     ht, null,
     System.Web.Caching.Cache.NoAbsoluteExpiration,
     new TimeSpan(3, 0, 0),
     System.Web.Caching.CacheItemPriority.NotRemovable, null);
     }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:17:04.400

啊……
经过我尝试了很多事情，结果证明它通常是非常简单的问题/解决方案：

由于此应用程序托管在**共享 Web 主机**上，因此我需要在 web.config中添加**机器密钥。**（这就是为什么我无法在我的开发机器上重现此错误的原因。）

生成链接在这里：[机器密钥生成器](http://aspnetresources.com/tools/machineKey)

# c# - 继承的属性

> ID：10348119
> 
> 赞同：6
> 
> 时间：2012-04-27T09:25:11.917
> 
> 标签：c#, .net, inheritance, attributes

**属性代码**

```
[AttributeUsage(AttributeTargets.Property, Inherited = true)]
class IgnoreAttribute : Attribute
{
} 
```

**基类**

```
abstract class ManagementUnit
{
    [Ignore]
    public abstract byte UnitType { get; }
} 
```

**主班**

```
class Region : ManagementUnit
{
    public override byte UnitType
    {
        get { return 0; }
    }

    private static void Main()
    {
        Type t = typeof(Region);
        foreach (PropertyInfo p in t.GetProperties())
        {
            if (p.GetCustomAttributes(typeof(IgnoreAttribute), true).Length != 0)
                Console.WriteLine("have attr");
            else
                Console.WriteLine("don't have attr");
        }
    }
} 
```

**输出：** `don't have attr`

解释为什么会这样？毕竟，它必须继承。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T09:34:28.320

> 继承标志指示属性是否可以被继承。此值的默认值为 false。但是，如果继承标志设置为 true，则其含义取决于 AllowMultiple 标志的值。如果继承的标志设置为 true 并且 AllowMultiple 标志为 false，则该属性将覆盖继承的属性。但是，如果继承标志设置为 true 并且 AllowMultiple 标志也设置为 true，则该属性会在成员上累积。

来自[http://aclacl.brinkster.net/InsideC/32ch09f.htm](http://aclacl.brinkster.net/InsideC/32ch09f.htm) 检查指定继承属性规则一章

编辑：检查[抽象属性上自定义属性的继承](https://stackoverflow.com/questions/2520035/inheritance-of-custom-attributes-on-abstract-properties) 第一个答案：

> GetCustomAttributes() 方法不查看父声明。它只查看应用于指定成员的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-24T09:34:35.487

PropertyInfo.GetCustomAttributes 中的**继承标志对于属性和事件都被忽略，**如下所述：[https](https://msdn.microsoft.com/en-us/library/dwc6ew1d.aspx) ://msdn.microsoft.com/en-us/library/dwc6ew1d.aspx 。但是您可以使用 Attribute.GetCustomAttributes 重载之一来启用属性（或事件）的继承。

此问题在以下位置进行了更详细的讨论：http: [//blog.seancarpenter.net/2012/12/15/getcustomattributes-and-overridden-properties/](http://blog.seancarpenter.net/2012/12/15/getcustomattributes-and-overridden-properties/)

# php - 我应该返回什么错误、异常等

> ID：10348122
> 
> 赞同：2
> 
> 时间：2012-04-27T09:25:39.403
> 
> 标签：php

我有一个创建用户类对象的方法，但是如果找不到用户，我需要返回一些东西，但我不确定是什么：

```
function getUserById($id)
{
    $sth = $this->db->prepare("SELECT id, username, password, salt, email, created, last_active FROM users WHERE id = ?");
    $sth->execute(array($id));

    $sth->setFetchMode(PDO::FETCH_OBJ);

    if ($sth->rowCount() == 0) {
        //return what?
    }

    $row = $sth->fetch();
    $user = new User($row);

    return $user;
} 
```

该方法应该像这样使用：

```
$user = $user_mapper->getUserById($id); 
```

问题是如果找不到用户我应该如何处理？我应该使用 try catch 块然后在 rowCount == 0 if 语句中抛出异常，还是在将 $user 变量设置为对象时只返回 false 并使用 if 语句？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T09:28:40.037

这完全取决于您和您的错误处理理念。

我会根据以下因素做出决定：*这是一个**特殊**的事件吗？这永远不会发生吗？*
如果答案是*肯定*的，则抛出异常。如果答案是*这可能会发生，我只需要处理这种情况*，`return false`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T09:35:03.407

我会返回空值。这个函数有一个单一的职责：尝试根据它的 id 找到一个用户。如果它没有找到，那么它没有找到，而“null”正是如此。在那之后，应该是调用这个函数的代码来处理这个问题。

现在，由于您是通过 id 而不是登录名/密码来查找用户，因此您还应该抛出一个异常：因为您的应用程序中的某个地方可能有问题：如果您有一个 id，它应该链接到数据库中的某些东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T09:28:47.617

我建议添加一个自定义异常处理程序，因为您可以使用一致的日志记录方法或反馈给用户的方法，这些方法可以通过一个函数进行管理。有关一些指导，请参阅[http://php.net/manual/en/function.set-error-handler.php](http://php.net/manual/en/function.set-error-handler.php)。

因此，在抛出异常时，请尝试描述性。您还可以使用它`debug_backtrace`来找出触发异常时的执行状态。请参阅[http://www.php.net/manual/en/function.debug-backtrace.php](http://www.php.net/manual/en/function.debug-backtrace.php)。

# android-intent - 是否可以从 Application 类中的静态方法启动 Activity 或引发 Intent？

> ID：10348125
> 
> 赞同：0
> 
> 时间：2012-04-27T09:25:51.283
> 
> 标签：android-intent, android-activity, android

我有自定义应用程序类

```
public class MyApp extends Application {

    public static Context application_context;

 @Override
    public void onCreate() {
        super.onCreate();
application_context=getApplicationContext();
    }

    public static void startShareIntent() {
        Intent shareIntent = new Intent(Intent.ACTION_SEND);
        shareIntent.setType("text/plain");
        shareIntent.putExtra(Intent.EXTRA_TEXT, "some text");

        shareIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

        shareIntent.putExtra(Intent.EXTRA_SUBJECT, "subject");
        application_context.startActivity(Intent.createChooser(shareIntent, 
                                                                  "Share with"));
    }
} 
```

当我调用此方法时，我收到此错误消息

> “从 Activity 上下文之外调用 startActivity() 需要 FLAG_ACTIVITY_NEW_TASK 标志。这真的是你想要的吗？”

是的，这就是我真正想要的，但为什么我做不到呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T10:40:30.367

当您调用 Intent.createChooser() 时，这将返回一个新的 ACTION_CHOOSER Intent，它没有设置 FLAG_ACTIVITY_NEW_TASK。这就是您收到此错误的原因。也许你想要这样的东西：

```
public static void startShareIntent() {
    Intent shareIntent = new Intent(Intent.ACTION_SEND);
    shareIntent.setType("text/plain");
    shareIntent.putExtra(Intent.EXTRA_TEXT, "some text");

    shareIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

    shareIntent.putExtra(Intent.EXTRA_SUBJECT, "subject");
    Intent chooserIntent = Intent.createChooser(shareIntent, "Share with");
    chooserIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    application_context.startActivity(ChooserIntent);
} 
```

# pygtk - 启动画面不显示它的内容

> ID：10348129
> 
> 赞同：1
> 
> 时间：2012-04-27T09:26:10.937
> 
> 标签：pygtk, splash-screen

在我的 Python-gtk 应用程序中进行一些繁重的工作时，我在显示启动画面时遇到了一些麻烦。我一直在谷歌上搜索并找到这个链接：[http](http://code.activestate.com/recipes/577919-splash-screen-gtk/) ://code.activestate.com/recipes/577919-splash-screen-gtk/ 。由于这个例子很清楚，我下载了程序并在我的电脑上运行它。但是，启动画面没有显示其内容。会不会是Gtk的一些配置参数设置错了？怎么加代码：

```
while gtk.events_pending():
    gtk.main_iteration() 
```

在我的情况下显示启动画面后立即不起作用？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:22:29.780

我尝试添加：

```
 while gtk.events_pending():
            gtk.main_iteration() 
```

就在`self.window.show_all()`in之后`splashScreen`，并且有效。在此之前，它没有显示文本，“这不应该花太长时间...... :)”。

这是有效的，因为它确保了启动画面立即呈现，而不是让它碰运气，我想这必须随机为某些人（编写此代码的人和在此处回复的其他人）而不是其他人（你和我）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:23:06.343

我测试了您提供的链接中的代码，它确实显示了启动画面的组件。但它可能似乎没有为您显示它们，也许是因为启动画面窗口没有指定大小？我补充说：

`self.window.set_size_request(300,300)`

到示例代码，果然标签确实出现了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-22T08:47:50.863

我知道这是一个非常古老的问题，但我对 Gtk+3 也有同样的问题，并且使用 Gtk.events_pending() 没有效果，所以我采取了不同的路线。

Basically, I just put a button to manually clear the splash screen, which I've seen plenty of commercial apps do. Then I call window.present() on the splash screen after creating the main window to keep the splash screen in front. This seems to be just the pause Gtk+3 needs to actually show the splash screen content *before* showing the main window opening behind it.

```
class splashScreen():

    def __init__(self):

        #I happen to be using Glade
        self.gladefile = "VideoDatabase.glade"
        self.builder = Gtk.Builder()
        self.builder.add_from_file(self.gladefile)
        self.builder.connect_signals(self)
        self.window = self.builder.get_object("splashscreen")

        #I give my splashscreen an "OK" button
        #This is not an uncommon UI approach
        self.button = self.builder.get_object("button")

        #Button cannot be clicked at first
        self.button.set_sensitive(False)

        #Clicking the button will destroy the window
        self.button.connect("clicked", self.clear)
        self.window.show_all()

        #Also tried putting this here to no avail
        while Gtk.events_pending():
            Gtk.main_iteration()

    def clear(self, widget):
        self.window.destroy()

class mainWindow():

    def __init__(self, splash):
        self.splash = splash

        #Tons of slow initialization steps
        #That take several seconds

        #Finally, make the splashscreen OK button clickable
        #You could probably call splash.window.destroy() here too
        self.splash.button.set_sensitive(True)

if __name__ == "__main__":  

    splScr = splashScreen()

    #Leaving this here, has no noticeable effect
    while Gtk.events_pending():
        Gtk.main_iteration()

    #I pass the splashscreen as an argument to my main window
    main = mainWindow(splScr)

    #And make the splashscreen present to make sure it is in front
    #otherwise it gets hidden
    splScr.window.present()

    Gtk.main() 
```

# ios - IOS报告崩溃

> ID：10348131
> 
> 赞同：1
> 
> 时间：2012-04-27T09:26:18.757
> 
> 标签：ios, crittercism

我正在使用 crittercism 从我的 ipad 应用程序中获取崩溃报告。我需要检查应用程序是否在启动时上次加载时崩溃。

我在我的应用程序的 appDelegate 上使用包含 crittercismDidCrashOnLastLoad 的 CrittercismDelegate，但它似乎不起作用！

对此有任何示例/建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:33:46.673

这是 Rob，Crittercism 的联合创始人之一。这是一个已知错误，我们将在下周初发布修复程序！

我们将很快在我们的支持页面上添加更多信息：

[https://www.crittercism.com/developers/feedback](https://www.crittercism.com/developers/feedback)

# powershell - PowerShell 按名称和日期比较子文件夹（lastwritetime）

> ID：10348132
> 
> 赞同：0
> 
> 时间：2012-04-27T09:26:21.687
> 
> 标签：powershell, compare, copy-item

这是我的第一个 PowerShell 脚本，英语不是我的母语，所以请保持温和。

我有两个带有数千（20K+）子文件夹的网络 NAS。

NAS“A”是生产环境。NAS“B”用作备份和故障转移环境。

1.  要从“A”复制到“B”的根文件夹（包含无数子文件夹）每天会增长数百个文件夹。

2.  旧的子文件夹被修改，但很少（每月修改大约 3/5%）。

我已经完成了一个比较两个文件夹并将新文件夹（递归）从“A”复制到“B”的脚本。这工作正常，查找新文件夹不超过 1-3 分钟。

问题是不时修改的子文件夹比例很小。显然 Copy-Item 不尊重原始创建日期。所以我不能仅仅根据日期/时间来比较它们。

我需要通过不同的方法比较所有子文件夹，以检测那些内容（图像文件）在“A”处确实发生变化的子文件夹，并将它们复制到“B”，丢弃日期。

有任何想法吗？。

# css - Firefox 12 及更高版本中不会显示水平条

> ID：10348135
> 
> 赞同：1
> 
> 时间：2012-04-27T09:26:38.183
> 
> 标签：css, firefox, horizontal-scrolling

我刚刚注意到，当页面 x 溢出时，Firefox 12 和 13 不会显示水平条。我试图做出CSS声明：

```
html {
overflow-x: scroll !important;
} 
```

但这无济于事。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T13:21:29.103

jquery-ui 样式表中导致这种情况的行是：

```
.ui-helper-hidden-accessible { .position: absolute; left: -99999999px; } 
```

如果将其更改为以下内容，您应该会再次看到滚动条：

```
.ui-helper-hidden-accessible { /*.position: absolute; */ left: -99999999px; } 
```

尽管我不知道这种变化可能会产生什么其他影响。我不知道那个元素是做什么用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T09:47:25.397

确保您没有在其他地方犯错，首先在另一个浏览器中尝试以确保然后剥离所有 CSS 并替换它`html { overflow-x: scroll !important; }`并查看它是否有效，如果您对更改页面宽度做了任何事情，它会改变页面上的效果。

我假设，实际上有一些溢出显示？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T17:23:42.100

同样的问题。页面在 chrome、IE 和 FF11 中看起来不错。我可以通过禁用[http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.3/themes/base/jquery-ui.css](http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.3/themes/base/jquery-ui.css)（通过 WebDeveloper 工具栏）让它消失。虽然还没有找到根本原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T12:50:58.843

我认为您不想这样做... .ui-helper-hidden-accessible { /*.position: absolute; */ 左：-99999999px；这将导致这些元素显示在屏幕上，而它们应该位于左侧。由于这些元素可能并不总是存在，因此您稍后会在“银行”中添加一个“错误”，有一天您会在您的网站上显示大量应该不可见的元素。这将很难调试！

这个问题看起来可能与这个[https://bugzilla.mozilla.org/show_bug.cgi?id=749935](https://bugzilla.mozilla.org/show_bug.cgi?id=749935)大数字问题有关，您可以尝试减小数字的大小（-99999999）？

# linux - 安装相机驱动程序的问题 - linux

> ID：10348136
> 
> 赞同：0
> 
> 时间：2012-04-27T09:26:39.543
> 
> 标签：linux, camera, usb, driver

我想在我的 linux 计算机上安装摄像机的驱动程序。我写了命令： modprobe usbserial vendor=... product=...

我期望得到的是 /dev 目录中的 ttyUSB0 （或类似的东西）。

相反，安装的是 sg3（不管是什么），当我运行一个应该发送命令开始录制的程序时，我没有得到任何结果（但也没有错误）。（我将之前的内容更改为： fd = open(/dev/ttyUSB0,...) 到 /dev/sg3 但我猜这不是能够发送此类数据的配置。

可能是什么问题？（对不起，如果这是一个基本问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:44:06.807

相机和 linux 可能很棘手。首先插入相机并运行

```
lsusb 
```

谷歌的 id 看看是否有人有一步一步的教程，或者至少可以告诉你需要哪些模块。

大多数常见的驱动程序似乎已迁移到内核，因此重新构建内核以确保构建模块。一些更晦涩的 USB 模块必须手工构建。

# security - Symfony2 中的安全性

> ID：10348137
> 
> 赞同：1
> 
> 时间：2012-04-27T09:26:48.123
> 
> 标签：security, symfony

我创建了一个名为“用户”的捆绑包。在一般路由中，我将 /user 添加到每个 UserBundle url。因此，例如，当我在 UserBundle 中定义路由 /list 时，真正的路径是[http://myapp.loc/user/list](http://myapp.loc/user/list)。

我正在尝试强制用户登录以使用该网站，我正在这样做：

```
security:
       firewalls:
          login_firewall:
              pattern:    ^/user/login
              anonymous:  ~
          secured_area:
              pattern:    ^/
              form_login:
                   login_path: user_login
                   check_path: user_login_check
                   default_target_path: /
              logout:
                   path: /user_logout
                   target: user_login
              remember_me:
                    key:      atipics-soft2012
                    lifetime: 3600           
       access_control:
           - { path: ^/, roles: ROLE_USER }
       providers:
           users:
               entity: { class: MyApp\UserBundle\Entity\User, property:email }
       encoders:
           MyApp\UserBundle\Entity\User: { algorithm:  sha512, iterations: 10 } 
```

我收到这样的错误：

> InvalidConfigurationException：路径“security.firewalls.secured_area”的配置无效：登录方法“form_login”的check_path“user_login_check”与防火墙模式“^/”不匹配。

可能是什么问题呢？

当然，我已经在路线文件中添加了这条路线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:25:57.400

我不知道这是一个错误还是有意这样，但`check_path`不接受路由名称。您必须将其设置为路径。

# debugging - 如何在 QtCreator 调试器中浏览我自己的源代码

> ID：10348138
> 
> 赞同：0
> 
> 时间：2012-04-27T09:26:55.497
> 
> 标签：debugging, qt, qt-creator

在使用 QtCreator 进行调试期间，我无法浏览自己的源代码。我使用调试选项构建 qt 源代码，您可以看到 qt 源代码本身的文件名是可见的，我可以毫无问题地浏览它们。但不知何故，这`CONFIG+=debug`对我的构建没有影响。

**构建输出：**

```
Running build steps for project tcpconnector...
Starting: "/usr/local/Trolltech/Qt-4.7.4-DEBUG/bin/qmake" /home/user1/server/src-server/server.pro -r -spec linux-g++-64 CONFIG+=debug
The process "/usr/local/Trolltech/Qt-4.7.4-DEBUG/bin/qmake" exited normally.
Starting: "/usr/bin/make" 
... 
```

在 QtCreator 调试器的屏幕截图中，您可以看到我自己的代码 Server::deleteDuplicateConnection 显示为灰色。

![带有灰色源文件的调试器屏幕截图](../Images/78e4ea680df2649b8479e0ad889bf6e3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:38:01.350

就像评论里写的一样。这似乎只是一个*随机*现象。

# oracle - 减去oracle中的时间戳返回奇怪的数据

> ID：10348140
> 
> 赞同：4
> 
> 时间：2012-04-27T09:26:57.180
> 
> 标签：oracle, timestamp, subtraction

我正在尝试减去两个日期并期望返回一些浮动值。但我得到的回报如下：

```
+000000000 00:00:07.225000 
```

将该值乘以 86400（我想以秒为单位）得到更奇怪的返回值：

```
+000000007 05:24:00.000000000 
```

任何的想法？我怀疑这与类型转换有关。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T09:51:50.147

我猜你的列被定义为`timestamp`而不是`date`.

减去时间戳的结果是一个`interval`，而减去`date`列的结果是一个数字，表示两个日期之间的天数。

这记录在手册中： http:
[//docs.oracle.com/cd/E11882_01/server.112/e41084/sql_elements001.htm#i48042](http://docs.oracle.com/cd/E11882_01/server.112/e41084/sql_elements001.htm#i48042)

因此，当您将时间戳列转换为日期时，您应该得到您期望的结果：

```
with dates as (
   select timestamp '2012-04-27 09:00:00' as col1,
          timestamp '2012-04-26 17:35:00' as col2
   from dual
)
select col1 - col2 as ts_difference,
       cast(col1 as date) - cast(col2 as date) as dt_difference
from dates; 
```

**编辑**：

如果您想转换间隔，例如秒数（作为数字），您可以执行以下操作：

```
with dates as (
   select timestamp '2012-04-27 09:00:00.1234' as col1,
          timestamp '2012-04-26 17:35:00.5432' as col2
   from dual
)
select col1 - col2 as ts_difference,
       extract(hour from (col1 - col2)) * 3600 +  
       extract(minute from (col1 - col2)) * 60 + 
       (extract(second from (col1 - col2)) * 1000) / 1000 as seconds
from dates; 
```

上面的结果是`55499.5802`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T09:29:25.410

阅读这篇文章： [http ://asktom.oracle.com/pls/asktom/ASKTOM.download_file?p_file=6551242712657900129](http://asktom.oracle.com/pls/asktom/ASKTOM.download_file?p_file=6551242712657900129)

例子：

```
create table yourtable(
date1 date, 
date2 date
)
SQL> select datediff( 'ss', date1, date2 ) seconds from yourtable

   SECONDS 
---------- 
   6269539 
```

# javascript - 如何向 JS 音频对象添加淡入/淡出方法

> ID：10348151
> 
> 赞同：0
> 
> 时间：2012-04-27T09:27:35.853
> 
> 标签：javascript, html, audio

所以我正在修补新的 Audio 对象，我想向对象添加一个 .fadeIn() 和 .fadeOut() 方法，所以我很容易调用类似的东西：

music_bgm.fadeOut();

...当用户将音频静音时，而不是让它突然停止。

我不完全是 JS 的鉴赏家，所以如果我在这里离题，请多多包涵：

1.  创建函数`function fadeOut()`
2.  添加一个 for 循环或假设当前音量为 100 的东西，并使用逐渐将其减少到 0`setTimeout()`

我一头雾水，从理论上阅读有关创建新对象和向现有对象添加方法的信息并没有帮助......

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T07:50:58.730

请检查这个 js 库：[Buzz](http://buzz.jaysalvat.com/documentation/sound/) - 它允许做你需要的事情。就用它吧。

# jsf - 将 actionListener 方法传递给组件内的 commandButton

> ID：10348155
> 
> 赞同：0
> 
> 时间：2012-04-27T09:27:46.353
> 
> 标签：jsf, jsf-2, composite-component

首先，请原谅我的无知和无能，所以请使用搜索引擎（我发誓我已经搜索了很长时间并且经常搜索但没有找到任何令人满意的答案）。

我有一个实现动作侦听器兼容方法的bean：

```
@ManagedBean(name = "myBean")
@ViewScoped
class Bean{
    public String myAction(ActionEvent event){
        ... = event.getComponent().getAttributes().get("something");
    }
} 
```

然后，我有一个这样的 jsf 组件：

```
<composite:interface>
    <composite:attribute name="actionBean" required="true"/>
    <composite:attribute name="actionMethod" method-signature="void myAction(javax.faces.event.ActionEvent)" />
</composite:interface>
<composite:implementation>
        <h:form>
            <p:commandButton actionListener="#{cc.attrs.actionBean[cc.attrs.actionMethod]}">
                <f:attribute name="something" value="somevalue" />
            </p:commandButton>
        </h:form>
</composite:implementation> 
```

它被称为这样的东西：

```
<namespace:myComponent actionBean="#{myBean}" actionMethod="myAction" /> 
```

我知道这个电话不起作用，我想知道如何正确地做！

我的主要意图是我想要一个相对通用的 jsf 组件（以后可以重用它会很好），它包含一个按钮。单击此按钮时，我想传递一个对象（不是简单的字符串！如果是字符串，我将只使用`action="..."`并通过它传递`f:param`）。使用该`actionListener`方法，我通过`event.getComponent().getAttributes().get("something")`.

我认为签名`void myAction(javax.faces.event.ActionEvent)`是破坏将相关方法传递给组件的问题，不是吗？通常是否可以将带有任何参数的方法传递给 jsf 组件（如果可以，如何）？

所以，我希望有一个可能的解决方案来解决改变上述策略的一般问题，或者可能使用一些好的和不同的东西（一般来说，我不喜欢使用任何黑客或变通方法，而是喜欢使用框架的意图） .

谢谢，如果有人能找到时间给我指路！如果这个问题已经存在，最好能找到相关的帖子并将其删除。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T10:57:50.680

尝试以下操作：

```
<namespace:myComponent myAction="#{myBean.myAction}"/> 
```

和复合组件：

```
<composite:interface>
    <composite:attribute name="myAction" 
                         required="true" 
                         method-signature="void myAction(javax.faces.event.ActionEvent)"
                         targetAttributeName="actionListener"/>
</composite:interface>
<composite:implementation>
    <h:form>
        <p:commandButton id="myAction">
            <f:attribute name="something" value="somevalue" />
        </p:commandButton>
    </h:form>
</composite:implementation> 
```

检查[复合：属性](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/composite/attribute.html)文档。它有几个选项可以将侦听器传递给复合组件。我用`targetAttributeName`这个。

# python - 多处理 - 池分配

> ID：10348156
> 
> 赞同：1
> 
> 时间：2012-04-27T09:27:52.500
> 
> 标签：python, multiprocessing, pool

我在 python 中注意到池分配的这种行为。即使我在池中有 20 个进程，当我为 8 个进程执行 map_async 时，我并没有将所有进程都扔掉，而是只执行了 4 个。当这 4 个完成时，它再发送两个，然后当这两个完成时发送一个。

当我向它扔超过 20 个时，它会运行所有 20 个，直到它开始在队列中获得少于 20 个，当上述行为重复时。

我认为这是故意这样做的，但看起来很奇怪。我的目标是在请求进入后立即处理它们，显然这种行为不适合。

使用 python 2.6 和[台球](https://github.com/ask/billiard)来支持 maxtasksperchild

有什么想法可以改进吗？

代码：

```
mypool = pool.Pool(processes=settings['num-processes'], initializer=StartChild, maxtasksperchild=10)

while True:
    lines = DbData.GetAll()
    if len(lines) > 0:
        print 'Starting to process: ', len(lines), ' urls'
        Res = mypool.map_async(RunChild, lines)
        Returns = Res.get(None)
        print 'Pool returns: ', idx, Returns
    else:
        time.sleep(0.5) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T16:43:12.610

我在 Python 中处理多处理的一种方法如下：

我有要使用函数的数据`function()`。
首先我创建一个多处理子类：

```
import multiprocessing

class ProcessThread(multiprocessing.Process):
    def __init__(self, id_t, inputqueue, idqueue, function, resultqueue):
        self.id_t = id_t
        self.inputlist = inputqueue
        self.idqueue = idqueue
        self.function = function
        self.resultqueue = resultqueue

        multiprocessing.Process.__init__(self)

    def run(self):
        s = "process number: " + str(self.id_t) + " starting"
        print s
        result = []

        while self.inputqueue.qsize() > 0
            try:
                inp = self.inputqueue.get()
            except Exception:
                pass
            result = self.function(inp)
            while 1:
               try:
                   self.resultqueue.put([self.id,])
               except Exception:
                   pass
               else:
                   break
            self.idqueue.put(id)
            return 
```

和主要功能：

```
inputqueue = multiprocessing.Queue()
resultqueue = multiprocessing.Queue()
idqueue = multiprocessing.Queue()

def function(data):
    print data # or what you want

for datum in data:
    inputqueue.put(datum)

for i in xrange(nbprocess):
    ProcessThread(i, inputqueue, idqueue, function, resultqueue).start() 
```

最后得到结果：

```
results = []
while idqueue.qsize() < nbprocess:
    pass
while resultqueue.qsize() > 0:
    results.append(resultqueue.get()) 
```

通过这种方式，您可以完美地控制流程和其他内容的附加内容。仅当每个数据的计算速度非常慢（< 1,2 秒）时，使用多处理`inputqueue`才是一种有效的技术，因为不同进程同时访问队列（这就是我使用异常的原因）。如果您的函数计算速度非常快，请考虑在开始时仅将数据拆分一次，并在开始时为每个进程放置数据集块。

# php - joomla 2.5中的超级用户和注册用户的区别

> ID：10348157
> 
> 赞同：0
> 
> 时间：2012-04-27T09:28:01.703
> 
> 标签：php, joomla, root

我们如何区分 joomla 2.5 中的超级用户和注册用户？在 joomla 1.5 中有用户类型选项，但在 2.5 中没有选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T09:55:40.117

我相信你最好这样做：

1.  首先找出用户所属的组
2.  然后针对根资产检查这些组的“core.admin”权限（根资产在#__assets 中为 id=1）

例如

```
$groups = JAccess::getGroupsByUser($UserId)
if(JAccess::getAssetRules(1)->allow('core.admin', $groups))
{
    // we have root
} 
```

# ruby-on-rails - Open Graph 使用 koala 发布自定义 Action 类型

> ID：10348162
> 
> 赞同：1
> 
> 时间：2012-04-27T09:28:29.847
> 
> 标签：ruby-on-rails, facebook, facebook-opengraph, koala

目前，我目前正在使用考拉 1.4.0 做开放图。

我确实创建了一个动作类型：查看对象类型：

我目前希望归档的是：当单击页面上的查看按钮时，在 facebook 代码上，它将显示，用户正在查看广告。

我得到的错误：

```
 HTTP 500: Response body: {"error":{"type":"Exception","message":"The action you're trying to publish is invalid because it does not specify any reference objects. At least one of the following properties must be specified: advertisement."}} 
```

我如何尝试这样做：

```
graph = Koala::Facebook::API.new(@user.token)
graph.put_connections("#{@user.uid}", "namespace:View" , :object=>"#{url_for(@advertisement)}" 
```

它在我的显示控制器中。在我的 show.html.erb 中，我确实包含了所有元数据。我也使用 koala 对 Facebook 功能进行了分享，它运行良好，并成功地从我的页面获取元数据并将其发布到 Facebook。

使用导轨 3.0.9。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:20:22.030

我对 Koala 不熟悉，但您似乎应该在 graph.put_connections 调用中使用 ':advertisement' 代替 ':object' 。例子：

```
graph.put_connections("#{@user.uid}", "namespace:View" , :advertisement=>"#{url_for(@advertisement)}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T18:12:10.300

这对我有用：

`@graph.put_connections("me", "namespace:action", :object => object_url)`

# jsf-2 - 从 jsf 页面或托管 bean 页面导航到上一页

> ID：10348163
> 
> 赞同：0
> 
> 时间：2012-04-27T09:28:31.657
> 
> 标签：jsf-2, navigation

我正在使用 JSF2.0。当用户单击相应的按钮时，我想实现将用户发送回上一页。另外我不想使用javascript和jquery。请以任何方式建议我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:57:44.833

如果您使用的是 JSF 1.1-1.2：
您可以像这样设置“config.xml”文件：

```
<navigation-case> 
    <from-outcome>previous</from-outcome>
    <to-view-id>/jsp/previous.xhtml</to-view-id>
</navigation-case> 
```

在你的bean中你可以调用'returnPrevious'函数：

```
public String returnPrevious() {
    return "previous"; 
} 
```

由于 JSF 2.0 你可以更容易地做到这一点，看看这个链接：
[http ://www.mkyong.com/jsf2/implicit-navigation-in-jsf-2-0/](http://www.mkyong.com/jsf2/implicit-navigation-in-jsf-2-0/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T09:53:25.170

您可以尝试在托管 bean 中使用此方法：

```
 public void back()
    {
            FacesContext.getCurrentInstance().getExternalContext().redirect("login.xhtml");
    } 
```

# javascript - Javascript 数组声明（可能误用了长度属性？）

> ID：10348177
> 
> 赞同：0
> 
> 时间：2012-04-27T09:29:26.140
> 
> 标签：javascript, arrays, undefined, getelementsbytagname

我正在尝试获取红色字体标签的 innerHTML ......

```
var fontTags = document.getElementsByTagName('font');
var reds = [];
var j = 0;
var i = 0; // ETA this line
for (i;i<=fontTags.length;i++) { // ETA the 'i<='
  if (fontTags[i].getAttribute('color') == 'RED') {
    reds[j] = fontTags[i].innerHTML;
    j++;
  }
} 
```

javascript 控制台通知我“fontTags[i]”未定义。我试过没有声明，用'new Array（）'声明......同样的事情。帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T09:31:24.603

您的`for`循环缺少正确的循环条件。

```
for (i=0;i<fontTags.length;i++) {
    if (fontTags[i].getAttribute('color') == 'RED') {
        reds[j] = fontTags[i].innerHTML;
        j++;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T09:33:28.570

`for (i=0;i<fontTags.length;i++) {`

检查 for 循环条件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T09:34:01.570

采用

```
 for(i=0;i<fontTags.length;i++) 
```

代替 (i=0;fontTags.length;i++)

# spring - Spring Security 3.0 : Basic Auth Prompt disappear

> ID：10348179
> 
> 赞同：0
> 
> 时间：2012-04-27T09:29:29.247
> 
> 标签：spring, spring-security, basic-authentication

I am using spring basic authentication with the following settings in my security xml:

```
<http use-expressions="true" create-session="never" >
        <intercept-url pattern="/**" method="GET" access="isAuthenticated()" />
        <intercept-url pattern="/**" method="POST" access="isAuthenticated()" />
        <intercept-url pattern="/**" method="PUT" access="isAuthenticated()" />
        <intercept-url pattern="/**" method="DELETE" access="isAuthenticated()" />
        <http-basic />
    </http> 
```

If authentication fails, the browser pop ups a prompt window to renter the user name and password. Is there any way to make that prompt not pop up at all ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:55:39.340

最有可能用于身份验证失败的页面也受到保护。您可以尝试手动将失败页面设置为不受保护的页面，例如

```
 <access-denied-handler error-page="/login.jsp"/> 
```

和...一起

```
 <intercept-url pattern="/*login*" access="hasRole('ROLE_ANONYMOUS')"/> 
```

或者

```
<intercept-url pattern='/*login*' filters='none'/> 
```

或者您可以使用 `auto-config='true'`http 元素的属性来为您解决此问题。[在此处查看更多信息](http://static.springsource.org/spring-security/site/docs/2.0.x/reference/ns-config.html#ns-auto-config)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-26T15:42:43.953

对于浏览器中的 REST API 抛出登录对话框，我也遇到了同样的问题。如您所说，当浏览器将响应标头视为

> WWW-Authenticate: Basic realm="Spring Security Application

它将提示一个基本的身份验证对话框。对于基于 REST API 的登录，这并不理想。这是我的做法。定义一个自定义身份验证入口点，并在**开始时** 将标题设置为“FormBased”

> response.setHeader("WWW-Authenticate", "FormBased");

application-context.xml 配置如下

```
<security:http create-session="never" entry-point-ref="authenticationEntryPoint" authentication-manager-ref="authenticationManager">
    <security:custom-filter ref="customRestFilter" position="BASIC_AUTH_FILTER" />
    <security:intercept-url pattern="/api/**" access="ROLE_USER" />
</security:http>

<bean id="authenticationEntryPoint" class="com.tito.demo.workflow.security.RestAuthenticationEntryPoint">
</bean> 
```

下面的自定义入口点类。

```
@Component
public class RestAuthenticationEntryPoint implements AuthenticationEntryPoint {

    private static Logger logger = Logger.getLogger(RestAuthenticationEntryPoint.class);

    public void commence( HttpServletRequest request, HttpServletResponse response,
                          AuthenticationException authException ) throws IOException {
        logger.debug("<--- Inside authentication entry point --->");
        // this is very important for a REST based API login. 
        // WWW-Authenticate header should be set as FormBased , else browser will show login dialog with realm
        response.setHeader("WWW-Authenticate", "FormBased");
        response.setStatus( HttpServletResponse.SC_UNAUTHORIZED );
    }

} 
```

注意：我用的是spring 3.2.5.Release

现在，当从像 POSTMAN 这样的 restclient 访问 rest API 时，服务器将返回 401 Unauthorized。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-21T21:10:56.807

我遇到了同样的问题，我所做的是`RequestMatcher`在我的资源服务器中创建一个自定义。这可以防止*Outh2*发送`WWW-Authenticate header`.

例子：

```
 @Override

    public void configure(HttpSecurity http) throws Exception {
         http.requestMatcher(new OAuthRequestedMatcher())
                .authorizeRequests()
                 .antMatchers(HttpMethod.OPTIONS).permitAll()
                    .anyRequest().authenticated();
    }

    private static class OAuthRequestedMatcher implements RequestMatcher {
        public boolean matches(HttpServletRequest request) {
            String auth = request.getHeader("Authorization");
            boolean haveOauth2Token = (auth != null) && auth.startsWith("Bearer");
            boolean haveAccessToken = request.getParameter("access_token")!=null;
   return haveOauth2Token || haveAccessToken;
        }
    } 
```

# vb.net - List all processes that currently running on windows by VB.NET 2.0

> ID：10348180
> 
> 赞同：4
> 
> 时间：2012-04-27T09:29:30.157
> 
> 标签：vb.net

In my program, i need to List up all processes that currently running on windows by VB.NET framework 2.0.

Can i get this list with VB.NET coding?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T12:00:58.013

你可以使用`Process.GetProcesses`函数

试试这个代码。

```
 For Each OneProcess As Process In Process.GetProcesses
        ListBox1.Items.Add(OneProcess.ProcessName)
    Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T09:38:11.383

不是 VB 人，但试试

```
Dim localAll As Process() = Process.GetProcesses() 
```

和一些可能的进口：

```
Imports System
Imports System.Diagnostics
Imports System.ComponentModel 
```

来自[http://msdn.microsoft.com/en-us/library/1f3ys1f9.aspx的信息](http://msdn.microsoft.com/en-us/library/1f3ys1f9.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T09:34:05.153

```
Imports System.Diagnostics.
Dim p As Process
For Each p In Process.GetProcesses
 Console.WriteLine(p.ProcessName)
Next 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T09:34:19.653

您可以使用：

```
Process.GetProcesses() 
```

在`System.Diagnostics`

参考[这里](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.getprocesses%28v=vs.80%29.aspx)

# iphone - Iphone 应用程序在运行时崩溃

> ID：10348191
> 
> 赞同：1
> 
> 时间：2012-04-27T09:30:20.900
> 
> 标签：iphone, ios5, xcode4.2, ios-simulator

我在 XCode 4.2 和 Sqllite 上做了一个简单的应用程序。它在模拟器上顺利运行。我在装有 iOS 5 的 Iphone 4S 上构建并运行它。它运行和崩溃没有任何错误。指导我发现问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:38:08.217

尝试在您的应用程序委托中的设备上进行调试，或者如果需要在您的 main.m 文件中进行调试。

还要检查 Mac 上的控制台应用程序。

它包含您可以用来了解更多信息的设备日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T09:39:11.043

确保你的版本。并且您是否安装了配置文件和证书以将套件推送到设备中？如果您没有与 iphone 关联的任何配置文件，它不会让您在设备上推送或运行该套件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T11:33:54.373

该应用程序是否曾经在 iPhone 上运行过？

如果是这样，您可能已经更改了数据模型，这将导致应用程序停止工作。

您必须从手机中删除该应用程序，然后重新运行它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T13:07:07.630

将您的设备连接到 Mac，打开 Xcode，在 xcode 中打开 Organizer。比查看设备部分，您可能会得到您的设备名称..比查看设备日志。现在您只在设备中运行您的应用程序，而不是从 xcode 到设备.. 您将获得相同的控制台输出，请参见 Organizer Device Log

# c++ - Process aborts with SIGABRT when a thread runs after exception is caught in another thread

> ID：10348193
> 
> 赞同：4
> 
> 时间：2012-04-27T09:30:23.017
> 
> 标签：c++, multithreading, exception-handling, abort

I have a exit handler thread waiting on a condition for the worker thread to do its work. The signalling is done from the worker thread's destructor.

Below is the code of the exit handler thread.

```
void Class::TaskExitHandler::run() throw()
{

while( ! isInterrupted() ) {

    _book->_eot_cond.wait(); // Waiting on this condition
    {
        CLASS_NAMESPACE::Guard<CLASS_NAMESPACE::FastLock> eguard(_book->_exitlist_lock);

        list<TaskGroupExecutor*>::const_iterator itr = _book->_exited_tasks.begin();

        for( ; itr != _book->_exited_tasks.end(); itr++ ) {
            (*itr)->join();
            TRACER(TRC_DEBUG)<< "Deleting exited task:" << (*itr)->getLoc() << ":"
                     << (*itr)->getTestID() << ":" << (*itr)->getReportName() << endl;
            delete (*itr);
        }
        _book->_exited_tasks.clear();
    }
    _book->executeAny();
}
}
} 
```

Now, what has been observed is that when the worker thread catches any exception(raised from a lower layer), this thread is continued, and immediately cores with exit code 134, which is SIGABRT.

The stacktrace is as follows-

```
#0  0x0000005555f49b4c in raise () from /lib64/libc.so.6
#1  0x0000005555f4b568 in abort () from /lib64/libc.so.6
#2  0x0000005555d848b4 in __gnu_cxx::__verbose_terminate_handler () from /usr/lib64/libstdc++.so.6
#3  0x0000005555d82210 in ?? () from /usr/lib64/libstdc++.so.6
#4  0x0000005555d82258 in std::terminate () from /usr/lib64/libstdc++.so.6
#5  0x0000005555d82278 in ?? () from /usr/lib64/libstdc++.so.6
#6  0x0000005555d81b18 in __cxa_call_unexpected () from /usr/lib64/libstdc++.so.6
#7  0x0000000120047898 in Class::TaskExitHandler::run ()
#8  0x000000012001cd38 in commutil::ThreadBase::thread_proxy ()
#9  0x0000005555c6e438 in start_thread () from /lib64/libpthread.so.0
#10 0x0000005555feed6c in __thread_start () from /lib64/libc.so.6
Backtrace stopped: frame did not save the PC 
```

So it seems that this run() function which specifies that it will not throw any exceptions using "throw()" spec, raises an exception(from Frame 4). As per various references about __cxa_call_unexpected(), the stacktrace depicts the typical behaviour of compiler to abort when exception is raised in a function with "throw()" spec. Am I right with the analysis of the problem?

To test, I added a try catch in this method, and printed the exception message. Now the process didn't core. The exception message was same as the one caught by worker thread. My question is, how does this thread get access to the exception caught by the other? Do they share some datastructure related to exception handling?

Please throw some light on this. It is quite puzzling..

Note:- As per stacktrace, the call_unexpected is raised immediately after run() is called. That strengthens my doubt that somehow exception stack or data is shared. But didn't find any references to this behaviour.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:03:35.870

我将回答我自己的问题。在这种情况下发生的事情是在 TaskExitHandler 线程中调用了一个析构函数。这个析构函数正在执行导致主线程异常的相同操作。

由于 TaskExitHandler 线程被设计为不抛出（或者更确切地说是预期的），因此没有 try-catch 块，因此在引发异常时进程中止。

由于析构函数的调用是隐式的，因此它从未显示在堆栈跟踪中，因此很难找到。必须跟踪每个对象以找到此异常泄漏。

感谢大家的积极参与：）这是我第一个得到积极回应的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T18:06:26.450

我会试一试——希望这会给你足够的时间来继续你的研究。

我怀疑运行 TaskExitHandler 的线程是所有工作线程的父线程。否则，TEH 将很难与孩子们一起度过。

子/工作线程不处理向它们抛出的异常。但是，必须在**某处**处理异常，否则整个过程将被关闭。父线程（又名 TEH）是进程堆栈/链中用于处理异常的最后一站。您的示例代码表明 TEH 的异常处理是简单地抛出/不处理异常。所以它核心了。

共享的不一定是数据结构，而是进程/线程 ID 和内存空间。子线程确实与父线程和彼此共享全局内存/堆空间，因此需要信号量和/或互斥锁来实现锁定目的。

良好的封装要求工作线程应该足够聪明以处理他们可能看到的任何/所有异常。这样，可以杀死单个工作线程，而不是关闭父线程和进程树的其余部分。OTW，您可以继续在 TEH 中捕获异常，但线程不太可能（或应该）知道如何处理异常。

如果上述内容不清楚，请添加评论，我很乐意进一步解释。

我做了一些研究并确认异常是针对堆内存而不是堆栈内存生成的。您进程的所有线程共享同一个堆*，因此（至少对我而言）为什么父线程会在子线程没有捕获异常时看到异常更有意义。*FWIW，如果你 fork 你的进程而不是启动一个新线程，你也会得到一个新的堆。但是，fork 对内存来说是一项昂贵的操作，因为您还将所有堆内容复制到新进程中。

这个 SO 线程讨论了设置一个线程来捕获所有异常，这可能会很有趣： [从另一个线程捕获异常](https://stackoverflow.com/questions/188977/catching-exceptions-from-another-thread)

# php - 制作一个临时表并从中选择

> ID：10348196
> 
> 赞同：9
> 
> 时间：2012-04-27T09:30:40.343
> 
> 标签：php, mysql

运行此程序时出现错误“未声明的变量：临时”...

```
<?php 

$maketemp = "CREATE TEMPORARY TABLE temp(`itineraryId` int NOT NULL, `live` varchar(1), `shipCode` varchar(10), `description` text, `duration` varchar(10), PRIMARY KEY(itineraryId))"; 

mysql_query( $maketemp, $connection ) or die ( "Sql error : " . mysql_error ( ) );

$inserttemp = "SELECT live, id AS itineraryId, ship AS shipCode, description AS description, duration AS length FROM cruises WHERE live ='Y' INTO temp";

mysql_query( $inserttemp, $connection ) or die ( "Sql error : " . mysql_error ( ) );

$select = "SELECT intineraryId, shipCode, description, duration FROM temp";

$export = mysql_query ( $select, $connection ) or die ( "Sql error : " . mysql_error( ) ); 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-27T09:54:51.663

[**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

* * *

此代码应该可以工作：

```
<?php

  $maketemp = "
    CREATE TEMPORARY TABLE temp_table_1 (
      `itineraryId` int NOT NULL,
      `live` varchar(1),
      `shipCode` varchar(10),
      `description` text,
      `duration` varchar(10),
      PRIMARY KEY(itineraryId)
    )
  "; 

  mysql_query($maketemp, $connection) or die ("Sql error : ".mysql_error());

  $inserttemp = "
    INSERT INTO temp_table_1
      (`itineraryId`, `live`, `shipCode`, `description`, `duration`)
    SELECT `id`, `live`, `ship`, `description`, `duration`
    FROM `cruises`
    WHERE `live` = 'Y'
  ";

  mysql_query($inserttemp, $connection) or die ("Sql error : ".mysql_error());

  $select = "
    SELECT `itineraryId`, `shipCode`, `description`, `duration`
    FROM temp_table_1
  ";
  $export = mysql_query($select, $connection) or die ("Sql error : ".mysql_error()); 
```

我猜你会用临时表做更多的事情，或者只是在玩它，但如果不知道整个代码可以总结为：

```
<?php

  $query = "
    SELECT `id` AS 'itineraryId', `ship`, `description`, `duration`
    FROM `cruises`
    WHERE `live` = 'Y'
  ";
  $export = mysql_query($query, $connection) or die ("Sql error : ".mysql_error()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T10:10:00.970

我喜欢使用 heredoc 来帮助我构建嵌入式 sql 查询（只是为了帮助使任何细微的错误更加明显）；所以你的第一个查询看起来像这样：

```
$maketemp =<<<s
CREATE TEMPORARY TABLE temp(
`itineraryId` int NOT NULL,
`live` varchar(1), 
`shipCode` varchar(10),
`description` text,
`duration` varchar(10),
PRIMARY KEY(itineraryId));
s; 
```

然后，如果您想更正第二个查询而不列出要插入记录的表的字段**，则必须以相同的顺序**列出字段。

这次只是查询：

```
INSERT INTO temp
SELECT id, live, ship, description, duration
FROM cruises
WHERE live = 'y'; 
```

关于临时变量的最后一件事是：查看有关其可见性的部分。创建表时可以使用 TEMPORARY 关键字。TEMPORARY 表仅对当前连接可见，并在连接关闭时自动删除。 **http://dev.mysql.com/doc/refman/5.5/en/create-table.html**

这意味着：当您直接连接到 MySQL 时，例如通过这样的命令行界面：

```
mysql> #our query here line-by-line 
```

然后，只要您的会话处于活动状态，您就基本上通过所有多个查询处于同一连接上。

*但是*在外部脚本（例如 PHP）中，仅仅因为它在同一个脚本文件上并不一定意味着它是同一个连接，因此当您执行插入查询时，您的临时表对该连接不可见会议。

尝试连接所有查询，在单个命令/查询执行中全部发送。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T09:37:53.157

第二个查询不正确。

从参考 -

> MySQL 服务器不支持 SELECT ... INTO TABLE Sybase SQL 扩展。相反，MySQL 服务器支持[INSERT INTO ... SELECT](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)。标准的 SQL 语法，基本上是一样的。

试试这个——

```
INSERT INTO temp
SELECT live
     , id AS itineraryId
     , ship AS shipCode
     , description AS description
     , duration AS length
FROM
  cruises
WHERE
  live = 'Y' 
```

# objective-c - Should I use the same detail ViewController to work both modally and when pushed?

> ID：10348203
> 
> 赞同：5
> 
> 时间：2012-04-27T09:31:17.833
> 
> 标签：objective-c, ios, uinavigationcontroller, modalviewcontroller

This seems to be the patten used throughout Apples applications; Creation of a new record is done through a modal View which needs to be saved or canceled to continue, and editing a record is done through a view pushed onto the navigation stack.

It doesn't seem right to be basically duplicating my ViewController for 'add' and 'edit' but there are several differences in how pushed and modal ViewControllers work which complicate things.

How should I be doing this so it can cover both bases?

-

Differences include.

When pushed onto the stack the navBar appears at the top of the View and can be configured to contain the cancel/save buttons. When presented modally this is not the case so to duplicate the interface a toolbar needs to be created separately and close/save buttons added to this instead.

When dismissing a pushed view we send a message to the navigation controller `[self.navigationController popViewControllerAnimated:YES];`, when dismissing a modal view we send a message to self `[self dismissModalViewControllerAnimated:YES];`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:32:23.567

您可以在 InterfaceBuilder 中添加 UIToolbar，然后当 self.navigationController 不为零时将其隐藏在 viewDidLoad 中。

至于解雇，你可以有类似的东西：

```
- (void)didCancel {
    [self.navigationController popViewControllerAnimated:YES] || [self dismissModalViewControllerAnimated:YES];
} 
```

如果您的视图控制器是导航控件的一部分，这将短路，否则使用dismissModalViewControllerAnimated。

这应该适用于您的取消按钮。对于您的保存按钮，调用某种委托方法很有用，例如：

```
- (void)didSave {
    // do your saving juju here
    if([self.delegate respondsToSelector:@selector(viewController:didSave:]) {
        [self.delegate viewController:self didSave:whatJustGotSaved];
    }
    [self.navigationController popViewControllerAnimated:YES]; // noop if currently modal
} 
```

然后，在委托的实现中，您可以放置​​：

```
- (void)viewController:(UIViewController*)viewController didSave:(NSObject*)whatJustGotSaved {
    // do stuff with parameters
    [self.modalViewController dismissModalViewControllerAnimated:YES]; // noop if not modal
} 
```

# javascript - What is the best practice for grouping many jquery functions?

> ID：10348206
> 
> 赞同：4
> 
> 时间：2012-04-27T09:31:27.553
> 
> 标签：javascript, jquery

I have a js file containing my all jquery code all, I followed 2 practices but I don't know which one is better:

First:

```
jQuery(document).ready(function(){
    var $ = jQuery;

    //some code here

    //another code not related to the first one

    //also another independent code

    //... and so on
}); 
```

Second:

```
jQuery(document).ready(function(){
    //call the functions here
    my_func_1();
    my_func_2();
    my_func_3();
    my_func_4();
});

//list of functions
function my_func_1() {
   //function code
}

function my_func_2() {
   //function code
}

function my_func_3() {
   //function code
}

function my_func_4() {
   //function code
} 
```

the second method seems better and more organized, but sometime let's say that my_func_2() didn't find what it's looking for on the page for example $('#my-id'), the functions that follow my_func_2() never run.

I also tried another method, define all my jquery functions in one js file, and then adding the function using script tags in the html where they should be:

```
<script>my_func_2();</script> 
```

so what is the best way to group jquery code ?

and should we use :

```
jQuery(document).ready(function(){
}); 
```

for each bunch of code ?

and thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T09:43:57.267

如果您在 func_2() 中的代码可能会导致错误，那么您确实应该将函数的内容包装在 try / catch 块中，以确保下一个函数运行时没有问题。

此外，以下也是多个启动功能的选项，同时保持它们的错误范围分开：

```
$(document).ready(function(e) { ... My function code 1 .... });
$(document).ready(function(e) { ... My function code 2 .... });
$(document).ready(function(e) { ... My function code 3 .... });
$(document).ready(function(e) { ... My function code 4 .... }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T10:01:09.630

```
var myFunc1 = function() {};
var myFunc2 = function() {};
var myFunc3 = function() {};
var myFunc4 = function() {}; 
```

首先声明你的函数。看看这个缩短器`jQuery.ready`

```
jQuery(function($) {
    // in here $ === jQuery.
    myFunc1();
    myFunc2();
    myFunc3();
    myFunc4();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T09:36:19.450

一般来说，保持函数简短和简洁是一种很好的做法。此外，请考虑将代码拆分为小单元有助于您在其他地方重用它。

此外，您应该牢记测试代码的方面。测试小的独立代码单元比测试大块代码要容易得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T10:18:59.477

将函数定义放在里面的意义`$.ready()`在于，这些函数被封闭在该上下文中，并且无法从外部访问。这可能是一个优势（访问封闭的变量或防止函数滥用），但会使调试变得更加困难。

根据我的经验，开始在外部声明你的函数（这样你就可以轻松地测试你的代码），而不是将这些函数移动到`$.ready()`.

# google-plus - How do I list my activities in Google+ with the API?

> ID：10348208
> 
> 赞同：1
> 
> 时间：2012-04-27T09:31:43.763
> 
> 标签：google-plus

How do I see a list of my Google+ activities through the API? I couldn't find a method in the [API Explorer](http://code.google.com/apis/explorer).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:42:19.717

这是[API Explorer 的链接，其中](http://code.google.com/apis/explorer/#_s=plus&_v=v1&_m=activities.list&userId=me&collection=public&alt=json)配置了活动列表以显示您的所有活动。

由于`me`userId 是您的私人数据，您需要点击屏幕右上角的 OAuth 2.0 开关并授权 API Explorer 知道您在 Google+ 上的身份，然后再提交查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T15:16:33.810

如果您使用的是 PHP，以及[Google 提供的 php 客户端库](http://code.google.com/p/google-api-php-client/)，它看起来像这样：

```
$collection = 'public';
$client = new apiClient();
$client->setDeveloperKey($api_key);
$plus = new apiPlusService($client);
//$person = $plus->people->get($plus_id);
$results = $plus->activities->listActivities($plus_id, $collection); 
```

# android - 带有自动滚动视图的android布局

> ID：10348209
> 
> 赞同：1
> 
> 时间：2012-04-27T09:31:44.310
> 
> 标签：android

我在我的 android main.xml 文件中如下所示.. 当我运行它时显示一些异常，但在图形视图中的 main.xml 中它没有显示任何错误..
下面是我在 Linearlayout 中的代码

```
 <ScrollView android:id="@+id/ScrollView01" 
        android:layout_width="fill_parent" 
        android:layout_height="match_parent">

          <LinearLayout
            android:orientation="vertical"
            android:layout_width="fill_parent"
            android:layout_gravity="top"
            android:layout_height="match_parent">       

              <TextView android:layout_width="fill_parent"
                       android:layout_height="wrap_content"
                       android:layout_gravity="center"
                       android:text="UserName"/>

               <EditText android:id="@+id/username"
                       android:layout_width="fill_parent"
                       android:layout_height="wrap_content"
                       android:text=""/>                              
           <Button
               android:id="@+id/login_button"
               android:layout_width="60dp"
               android:layout_height="30dp"
               android:text="login"/>
        </LinearLayout>

         <LinearLayout
            android:orientation="vertical"
            android:layout_width="fill_parent"
            android:layout_gravity="top"
            android:layout_height="match_parent">       

              <TextView android:layout_width="fill_parent"
                       android:layout_height="wrap_content"
                       android:layout_gravity="center"
                       android:text=""/>

               <EditText android:layout_width="fill_parent"
                       android:layout_height="wrap_content"
                       android:text=""/>                              
           <Button
               android:layout_width="60dp"
               android:layout_height="30dp"
               android:text="@string/login_btn"/>
        </LinearLayout>
    </ScrollView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T09:34:26.963

`ScrollView`应该**只有一个**孩子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T09:34:21.340

ScrollViews 只能包含一个子视图。将两个 LinearLayout 包装在另一个 LinearLayout 中。

您还将两个线性布局的高度都设置为`match_parent`. 这在滚动视图中不起作用。它们都应该设置为`wrap_content`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T09:36:05.003

试试这个xml来解决你的问题

```
<LinearLayout
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical">
   <ScrollView android:id="@+id/ScrollView01" 
        android:layout_width="fill_parent" 
        android:layout_height="match_parent">

          <LinearLayout
            android:orientation="vertical"
            android:layout_width="fill_parent"
            android:layout_gravity="top"
            android:layout_height="match_parent">       

              <TextView android:layout_width="fill_parent"
                       android:layout_height="wrap_content"
                       android:layout_gravity="center"
                       android:text="UserName"/>

               <EditText android:id="@+id/username"
                       android:layout_width="fill_parent"
                       android:layout_height="wrap_content"
                       android:text=""/>                              
           <Button
               android:id="@+id/login_button"
               android:layout_width="60dp"
               android:layout_height="30dp"
               android:text="login"/>
        </LinearLayout>

         <LinearLayout
            android:orientation="vertical"
            android:layout_width="fill_parent"
            android:layout_gravity="top"
            android:layout_height="match_parent">       

              <TextView android:layout_width="fill_parent"
                       android:layout_height="wrap_content"
                       android:layout_gravity="center"
                       android:text=""/>

               <EditText android:layout_width="fill_parent"
                       android:layout_height="wrap_content"
                       android:text=""/>                              
           <Button
               android:layout_width="60dp"
               android:layout_height="30dp"
               android:text="@string/login_btn"/>
        </LinearLayout>
    </ScrollView>
 </LinearLayout> 
```

感谢您提供更多详细信息，请单击此链接[我们可以在 LinearLayout 中使用 ScrollView 吗？](https://stackoverflow.com/questions/5938303/cant-we-use-scroll-view-inside-linearlayout)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T09:37:42.177

**滚动视图只能有一个直接子级..**

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView
android:id="@+id/ScrollView01"
android:layout_width="fill_parent"
android:layout_height="match_parent" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:layout_gravity="top"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_gravity="top"
        android:orientation="vertical" >

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="UserName" />

        <EditText
            android:id="@+id/username"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="" />

        <Button
            android:id="@+id/login_button"
            android:layout_width="60dp"
            android:layout_height="30dp"
            android:text="login" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_gravity="top"
        android:orientation="vertical" >

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="" />

        <EditText
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="" />

        <Button
            android:layout_width="60dp"
            android:layout_height="30dp"
            android:text="@string/login_btn" />
    </LinearLayout>
</LinearLayout>  </ScrollView> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-27T10:05:44.443

ScrollView 应该只有一个孩子。在您的示例中，您在滚动视图中放置了 2 个线性布局，这会导致错误。将 2 个线性布局放置在 1 个线性布局中，并将整个东西放在滚动视图中。它会工作..

```
 <ScrollView android:id="@+id/ScrollView01" 
        android:layout_width="fill_parent" 
        android:layout_height="match_parent">
             <LinearLayout
            android:orientation="vertical"
            android:layout_width="fill_parent"
            android:layout_gravity="top"
            android:layout_height="match_parent">  
                      <LinearLayout
                        android:orientation="vertical"
                        android:layout_width="fill_parent"
                        android:layout_gravity="top"
                        android:layout_height="match_parent">       

                          <TextView android:layout_width="fill_parent"
                                   android:layout_height="wrap_content"
                                   android:layout_gravity="center"
                                   android:text="@string/UserNameText"/>

                           <EditText
                                   android:id="@+id/username"
                                   android:layout_width="fill_parent"
                                   android:layout_height="wrap_content"
                                   android:text="@string/UserNameText"/>                              
                       <Button
                           android:id="@+id/login_button"
                           android:layout_width="60dp"
                           android:layout_height="30dp"
                           android:text="@string/login_btn"/>
                    </LinearLayout>

                     <LinearLayout
                        android:orientation="vertical"
                        android:layout_width="fill_parent"
                        android:layout_gravity="top"
                        android:layout_height="match_parent">       

                          <TextView android:layout_width="fill_parent"
                                   android:layout_height="wrap_content"
                                   android:layout_gravity="center"
                                   android:text="@string/UserNameText"/>

                           <EditText
                                   android:id="@+id/username"
                                   android:layout_width="fill_parent"
                                   android:layout_height="wrap_content"
                                   android:text="@string/UserNameText"/>                              
                       <Button
                           android:id="@+id/login_button"
                           android:layout_width="60dp"
                           android:layout_height="30dp"
                           android:text="@string/login_btn"/>
                    </LinearLayout>
        </LinearLayout>
    </ScrollView> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-05T14:46:46.523

ScrollView 应该只有一个孩子。

# c# - Why breakpoint aren't hit when webservice is called from Jquery (Ajax) and how to resolve?

> ID：10348212
> 
> 赞同：0
> 
> 时间：2012-04-27T09:31:55.897
> 
> 标签：c#, jquery, debugging, asmx

I'm writing a website using jQuery ajax calls to an asmx (existing) web service. When debugging breakpoints aren't hit when jQuery calls it. When invoking the web service using the test invoke breakpoints are hit.

How do I debug web services using jQuery while the service is running within the Cassini web server?

# javascript - Jquery - how to explode arrays value

> ID：10348213
> 
> 赞同：9
> 
> 时间：2012-04-27T09:31:59.053
> 
> 标签：javascript, jquery

Is it possible to explode datas in array according to a charachter?

```
.each(myArr, function(key, value) { 

}); 
```

i take array like that

value is the values of array . Can explode value with "-" ?

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-27T09:33:47.677

Use [`split()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split):

```
var items = value.split('-'); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-27T09:34:48.070

您可以使用`split`

```
 var arr = str.split('-'); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-27T09:34:09.993

是的，你使用[`value.split('-');`](http://www.w3schools.com/jsref/jsref_split.asp)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-01T15:22:15.653

你可以这样写

```
function add_nik(id)
{
    $('#modal_form').modal('hide'); // show bootstrap modal
    var hasil=id.split(',');
    $('#nik').val(hasil[0]);
    $('#nama').val(hasil[1]);
} 
```

在你的 html 代码中

```
<input type="text" name="nama" id="nama" >
<input type="text" name="nik" id="nik> 
```

# grails - 在 groovy 中进行代码分析的最佳插件是什么？

> ID：10348214
> 
> 赞同：2
> 
> 时间：2012-04-27T09:32:00.390
> 
> 标签：grails, plugins, groovy

我使用 Grails 2.0.3 作为平台，使用 Netbeans 7.1 作为 IDE。在 groovy 中，哪些可用的代码分析插件效果最好？Codenarc 和 GMetrics 在我的名单上。

有谁试过这些吗？哪一个更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T17:22:12.100

CodeNarc 和 GMetrics 都分析不同的事物。CodeNarc 检查代码的风格、最佳实践和其他不一致之处。GMetrics 分析您的代码的复杂性，并会告诉您圈复杂度和行数等等。

如果我只打算使用其中一个插件，我会使用 CodeNarc，因为它有助于训练您在代码中遵循最佳实践并提高代码质量。但是，没有理由不应该或不能同时使用两者。

# java - 在没有外部库的情况下用 Java 解析 XLSX 文件？

> ID：10348215
> 
> 赞同：0
> 
> 时间：2012-04-27T09:32:02.890
> 
> 标签：java, parsing, apache-poi, saxparser

快速提问 我被要求为 XLSX 文件格式创建几个解析器。我读过的几乎所有地方都说要获取 POI 库，但是我正在开发的系统对引入外部 API 非常敏感，所以我宁愿自己做一些额外的工作，然后沿着这条路走下去。

那么是否有可能（无需花费数天的编码）通过 SAXParser 来解析 XLSX 文件，或者如果我不使用 POI 库，我是不是一个杯子？

干杯

*** 更新 ***

由于提取了 XLSX 文件并更好地查看了存档，我相信我现在可以解析这些文件而无需花费数天的编码，我可能会在几个小时内提取信息。然而，我只想提取物理单元数据，而不是这些值的任何参考数据，即单元参考。我还希望提取 XLSX 元数据。完成后，我将快速回答我是如何做到这一点的，以供将来参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:51:15.090

标准的 xlsx 文件不是 xml，所以不，它不可能。

更正：Walter Laan 是正确的，xlsx 格式确实是一个充满 xml 的 zip 文件，并且应该相对容易解析

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:20:46.150

不花几天的编码……这是不可能的……你必须至少写两三天的代码……这只是一个 zip 文件，但是一堆 XML 文件和清单 xml

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T09:46:14.747

实际上我这样做了，但显然定制了我的 java 以读取特定的 xlsx XML 结构。

要在 java 中打开 xlsx，请使用 ZipEntry API 并枚举该条目，以确保您深入了解所有各种文件夹结构。然后按照以下指南阅读 XML：

[http://www.mkyong.com/java/how-to-read-xml-file-in-java-sax-parser/](http://www.mkyong.com/java/how-to-read-xml-file-in-java-sax-parser/)

干杯

# r - 按条件对数据进行子集化

> ID：10348225
> 
> 赞同：2
> 
> 时间：2012-04-27T09:33:03.890
> 
> 标签：r, split, subset, plyr

我正在尝试重塑/减少我的数据。到目前为止，我使用了一个`for`循环（非常慢），但据我所知，这应该很快`Plyr`。

我有很多组（公司，作为数据集中的一个因素），我想完全删除所有`value`在该公司的任何单元格中显示为 0 条目的公司。因此，我创建了一个新的但在某些时候`data.frame`忽略了所有显示 0 的组。`value`

`for`循环：

```
Data Creation:

set.seed(1) 
mydf <- data.frame(firmname = sample(LETTERS[1:5], 40, replace = TRUE), 
        value = rpois(40, 2))

-----------------------------
splitby = mydf$firmname

new.data <- data.frame()

for (i in 1:(length(unique(splitby)))) {
temp <- subset(mydf, splitby == as.character(paste(unique(splitby)[i]))) 
    if (all(temp$value > 0) == "TRUE") {     
    new.data <- rbind(new.data, temp) 
} 
} 

Delete all empty firm factors 
new.data$splitby <- factor(new.data$splitby) 
```

有没有办法用这个包来实现`plyr`？该`subset`功能可以在那种情况下使用吗？

**编辑**：*为了重现问题，添加了 BenBarnes 建议的数据创建。本，非常感谢。此外，我的代码已更改，以符合下面提供的答案。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T12:02:53.643

`.fun`您可以为以下参数提供匿名函数`ddply()`：

```
set.seed(1)

mydf <- data.frame(firmname = sample(LETTERS[1:5], 40, replace = TRUE),
  value = rpois(40, 2))

library(plyr)

ddply(mydf,.(firmname), function(x) if(any(x$value==0)) NULL else x ) 
```

或使用`[`，如 Andrie 建议的那样：

```
firms0 <- unique(mydf$firmname[which(mydf$value == 0)])

mydf[-which(mydf$firmname %in% firms0), ] 
```

请注意，结果`ddply`是根据排序的`firmname`

**编辑**

对于您评论中的示例，这种方法再次比使用`ddply()`子集更快，只选择具有三个以上条目的公司：

```
firmTable <- table(mydf$firmname)

firmsGT3 <- names(firmTable)[firmTable > 3]

mydf[mydf$firmname %in% firmsGT3, ] 
```

# objective-c - NSDate 和 NSDateFormatter 返回无效的 CFStrinfRef

> ID：10348226
> 
> 赞同：2
> 
> 时间：2012-04-27T09:33:09.453
> 
> 标签：objective-c, ios, nsdate, nsdateformatter

我对 NSDate 和 NSDateFormatter 有一个问题。

从这个 NSString

```
NSString *startDate = @"Thu, 19 Apr 2012 13:09:56 +0000"; 
```

我会获得一个使用当前语言环境本地化的日期，例如“Thu, 19 Apr 2012 13:09”。我已经详细说明了这段代码，但“endDate”字符串返回 nil（在调试器中获取“无效 CFStringRef”）。

```
[NSDateFormatter setDefaultFormatterBehavior:NSDateFormatterBehavior10_4];
NSDateFormatter *dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
[dateFormatter setDateFormat:@"EEE, dd MMM yyyy HH:mm:ss ZZZ"];
NSDate *dateFromString = [dateFormatter dateFromString:startDate];

[dateFormatter setDateFormat:@"EEE dd MMM yyyy HH:mm"];
[dateFormatter setLocale:[NSLocale currentLocale]];

NSString *endDate = [dateFormatter stringFromDate:dateFromString]; 
```

错误在哪里？

亚历克斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:25:11.063

似乎代码在非美国语言环境中执行。我使用非美国语言环境。我也有同样的`nil`输出。

看来我们需要`setLocale:`之前`setDateFormat:`。

下面的代码工作正常：

```
NSDateFormatter *dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
NSLocale *usLocale = [[[NSLocale alloc] initWithLocaleIdentifier:@"en_US"] autorelease];
[dateFormatter setLocale:usLocale];
[dateFormatter setDateFormat:@"EEE, dd MMM yyyy HH:mm:ss ZZZ"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T11:05:38.913

雅它工作正常..尝试`autorelease`从你的删除`dateFormatter`，然后再试一次。

我希望这个链接和你的一样

[无效的 CFStringRef 问题](https://stackoverflow.com/questions/9432307/invalid-cfstringref-issue)

试试这个答案，用`"ZZ"`and not改变你的格式选项`"ZZZ"`。

# css - Chrome和Firefox中margin-left的不同行为？

> ID：10348228
> 
> 赞同：0
> 
> 时间：2012-04-27T09:33:15.527
> 
> 标签：css, cross-browser

我有两个不同的浏览器的问题。我附上了问题的快照：当我使用以下 css 时，我得到 image1：

```
.support-data-text img, .support-data-text select {
float:left
}
/* this is for dropdown list */
form#saveSupport select {
    height: 29px;
    width: 234px;
    position: absolute;
}

form#saveSupport input{float: left; width: 243px;}

/* this is for the img we are using for dropdown list */
form#saveSupport .select_game { background: url(../images/select-status.png) no-repeat;
   width: 223px; position: absolute; height: 29px; line-height:29px;
   padding: 0 0 0 10px; color: #333; font-size:12px; overflow: hidden; 
} 
```

![在此处输入图像描述](../Images/43acea2d52d0ec7fbb78ec28a0075f89.png)

当我添加`margin-left: 18%`到`form#saveSupport .select_game`Chrome 时，显示下拉列表图像的正确对齐，而不是实际的下拉列表，而 Firefox 将下拉列表移到右侧。（图2）![在此处输入图像描述](../Images/1a01ec5c79218ee7fb6cc867a3deff16.png)

请帮助我解决问题。我会很感激的！

谢谢，维克拉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:39:32.580

嗨，我认为您设置`position:relative`为父元素和子元素集`position:relative`

我认为您的 Parent Div 是这样的

```
.support-data-text{
position:relative;
} 
```

现在设置为子 div 绝对位置并根据您的设计设置为**左上角底部。**

# mysql - 2张表的主键

> ID：10348232
> 
> 赞同：3
> 
> 时间：2012-04-27T09:33:30.003
> 
> 标签：mysql, sql, triggers, primary-key, unique-key

我有两张桌子，一张“主”表和一张“子”表。每个表都有一个名为“ProductNo”的字段，该字段定义为 PRIMARY KEY 和 UNIQUE。是否可以将表'child'中的字段'ProductNo'和表'master'中的相同字段定义为PRIMARY + UNIQUE？

```
master:
ID | ProductNo

child:
ID | MasterID (FK on master.ID) | ProductNo

Relation >> 1 (master) : n (child) 

example data:
master: 
1 | 1234
2 | 4567

child:
100 | 1 | 3333
101 | 1 | 4444
102 | 2 | 5555
103 | 1 | 1234 <----- NOT ALLOWED! PRODUCT NO ALREADY EXISTING IN TABLE `MASTER`
104 | 2 | 1234 <----- NOT ALLOWED! PRODUCT NO ALREADY EXISTING IN TABLE `MASTER` 
```

如果表“master”中已经存在“ProductNo”，则需要检查插入/更新表“child”。

我该如何定义它？还是我需要为此创建触发器？

TIA 马特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T09:39:32.317

不，表之间没有复合 PK 之类的东西。

只是为了数据的一致性，如果 Id 相同，则应从 child 向 master 添加一个 FK。

要解决您的问题，请使用带有如下检查的触发器：

```
if exists (select 1 from master where prodcutId=new_productId) 
```

会是个好主意

编辑：

实际上最好的想法是只有一个名为 product 的表，它有一个 ID 和一个与自身相关的 masterID 字段。你今天的方式我很确定你有很多重复的数据，并且你在层次结构上被困在 2 个级别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T09:35:40.663

（原始答案）您可以声明从主到子的外键，即使该外键指向子的主键。这将是一对零或一的关系，并且并不少见。如果没有在 master 中插入匹配的行，则无法在 child 中存在行，但在 master 中可以存在没有匹配子行的行。因此，您的插入需要按照主然后子的顺序进行。

（根据问题编辑进行编辑）但是，在您的情况下，您所指的列看起来实际上不应该是**任**一表的主键，而是您有一个单独的主键/外键，以及有问题的列需要在两个表中是唯一的，现在您已经将一些示例数据编辑到您的问题中，这一点变得很清楚。在这种情况下，您最好在两个表上都使用触发器，以检查另一个表中是否存在，如果 ProductNo 已经存在，则阻止插入/更新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T10:04:20.110

正如@DavidM 所说，可以做到，但您似乎遇到了一些建模问题。首先，如果你有一个自然的主键`ProductNo`，你为什么要定义一个代理`ID`？您可能会考虑的另一件事是将这两个表组合成一个表（这对于大多数一对一的情况可能是有意义的）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T11:26:26.577

你确定你需要这两张桌子吗？只保留一个，具有 productID 和 parentID。然后 productID 可以是主键并自动递增，而具有除 null 以外的 parentID 的所有内容（f.keyed 到同一个表）都将是子项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T09:36:20.230

您可以在子表中添加名为 ProductNo 的列，并向父表添加外键引用。

# assembly - 固定端口寻址

> ID：10348233
> 
> 赞同：0
> 
> 时间：2012-04-27T09:33:37.543
> 
> 标签：assembly, x86

我正在学习固定端口寻址。讲座说它用于8位传输。里面有两个例子，

*   在铝，6CH
*   OUT 6AH, 斧头

现在第二个从寄存器 AX 获取数据，这是一个 16 位寄存器。它是持有 8 位地址还是会从 16 位地址转移到 8 位地址？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T09:51:43.430

`out 6ah, ax`将两个字节写入`ax`0x6a 处的 16 位 I/O 端口。一个 16 位端口由两个连续的 8 位端口组成。

也就是说，它将写入`al`0x6a 和`ah`0x6b。

请参阅[英特尔® 64 位和 IA-32 架构软件开发人员手册第 1 卷：基本架构](http://download.intel.com/products/processor/manual/253665.pdf)第 14 章。

# c# - 如何在 windows phone 7 上获取以毫秒为单位的时间？

> ID：10348236
> 
> 赞同：0
> 
> 时间：2012-04-27T09:34:00.123
> 
> 标签：c#, windows-phone-7, xaml

我想以自 1970 年以来的当前时间（以毫秒为单位）命名我的文件。

目前我只有一个计数器，并在每个新文件后递增它。但是当应用程序重新启动时，计数器会回到零，当我再次开始保存文件时，我会覆盖这些文件。

所以我在想，如果我只使用秒或毫秒的时间，那么我不会有这个问题。

所以我的问题是如何在 windows mobile 上获得以毫秒为单位的时间。

这就是我目前正在做的生成我的文件名的方法。

```
string fileName = savedCounter + ".jpg"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T09:50:41.910

您可以使用[刻度](http://msdn.microsoft.com/en-us/library/system.datetime.ticks.aspx)

> 一个滴答表示一百纳秒或百万分之一秒。一毫秒内有 10,000 个滴答声。

```
DateTime unixEpoch = new DateTime(1970, 1, 1);
DateTime currentDate = DateTime.Now;
long totalMiliSecond = (currentDate.Ticks - unixEpoch.Ticks) /10000;
Console.WriteLine(totalMiliSecond);
string fileName = string.Concat(totalMiliSecond,".jpg");
Console.WriteLine(fileName); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T09:38:22.767

`DateTime.UtcNow`为您提供当前的 Utc 时间

`new DateTime(1970,1,1,0,0,0,DateTimeKind.Utc)`给你1970

所以你可以使用：

```
var savedCounter = Math.Round((DateTime.UtcNow - new DateTime(1970,1,1,0,0,0,DateTimeKind.Utc)).TotalSeconds); 
```

* * *

一些替代命名策略包括：

*   鉴于您的应用程序在 1970 年左右的副本并不多，您可能可以使用基准日期，例如`new DateTime(2012,1,1,0,0,0)`
*   您还可以使用 DateTime.ToString 格式`yyyyMMddhhmmss`来实现基于日期的字符串 - 这对于人类来说可能更容易阅读（例如，使用调试器或隔离存储资源管理器）

* * *

除了 - 出于性能原因，请注意您不应该在一个目录中创建太多文件 - [http://appangles.com/blogs/mickn/wp7/how-many-files-are-too-many-files-for- windows-phone-7-isolated-storage-performance/](http://appangles.com/blogs/mickn/wp7/how-many-files-are-too-many-files-for-windows-phone-7-isolated-storage-performance/) - 在某些时候使用单个文件（例如数据库）是有意义的

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T09:48:38.543

您是否只是使用毫秒来生成唯一的文件名？如果是这样，使用 Guid.NewGuid().ToString() 可能会更好

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T09:40:22.023

即使您使用时间戳来生成文件名，如果您的应用程序的多个实例可以同时运行，那么仍然有可能发生冲突。无论您是否使用时间戳，您都可能需要执行以下操作：

1.  将计数器初始化为 0
2.  为文件生成一个名称，将计数器合并到其名称中。
3.  尝试创建文件，打开它以进行独占 R/W 访问，并要求该文件不存在。
4.  如果文件创建由于某种原因失败，请增加计数器并重复步骤 2-4。

事实上，这很可能是例程喜欢[`System.IO.Path.GetTempFileName()`](http://msdn.microsoft.com/en-us/library/system.io.path.gettempfilename.aspx)做的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T10:05:03.843

使用 Time 甚至更好地使用您当前的架构，将当前计数器保存到 IsolatedStorageSettings。它易于使用： http: [//msdn.microsoft.com/en-us/library/cc221360 (v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/cc221360(v=vs.95).aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-06T06:10:43.133

最好使用 Guid 而不是 DateTime。

```
string fileName = System.Guid.NewGuid() + ".jpg"; 
```

# c - 将十进制转换为 36 个不同基数的 ac 程序，但有一个简单的错误

> ID：10348239
> 
> 赞同：0
> 
> 时间：2012-04-27T09:34:08.700
> 
> 标签：c, decimal

```
#include <stdio.h>
#include <math.h>

long int input;
long int base, exponent;

void convert(long int x,long int y)
{
    input = x;
    base = y;

    while (input > 0){
        exponent = floor(log(input)/log(base));
        input = input - pow(base, exponent);
    }
}

int main(void){
    scanf("%d", &input);
    scanf("%d", &base);
    convert(input, base);
} 
```

我试图编译上面的代码以查看是否可以将十进制转换为不同的基数，但出现以下错误：

```
assignment2.c(14): error C2143: syntax error : missing ';' before 'type' 
```

我已经挣扎了几个小时，但我不知道这是指什么。我怎样才能解决这个问题？

编辑：这是整个信息

```
1>------ Build started: Project: assignment2, Configuration: Debug Win32 ------
1>Build started 2012-04-27 오후 5:45:10.
1>InitializeBuildStatus:
1>  Touching "Debug\assignment2.unsuccessfulbuild".
1>ClCompile:
1>  assignment2.c
1>c:\users\조화수\documents\visual studio 2010\projects\assignment2\assignment2\assignment2.c(14): error C2143: syntax error : missing ';' before 'type'
1>  assign2.c
1>c:\users\조화수\documents\visual studio 2010\projects\assignment2\assignment2\assign2.c(13): warning C4244: '=' : conversion from 'double' to 'long', possible loss of data
1>c:\users\조화수\documents\visual studio 2010\projects\assignment2\assignment2\assign2.c(14): warning C4244: '=' : conversion from 'double' to 'long', possible loss of data
1>c:\users\조화수\documents\visual studio 2010\projects\assignment2\assignment2\assign2.c(19): warning C4996: 'scanf': This function or variable may be unsafe. Consider using scanf_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details.
1>          c:\program files\microsoft visual studio 10.0\vc\include\stdio.h(304) : see declaration of 'scanf'
1>c:\users\조화수\documents\visual studio 2010\projects\assignment2\assignment2\assign2.c(20): warning C4996: 'scanf': This function or variable may be unsafe. Consider using scanf_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details.
1>          c:\program files\microsoft visual studio 10.0\vc\include\stdio.h(304) : see declaration of 'scanf'
1>  Generating Code...
1>
1>Build FAILED.
1>
1>Time Elapsed 00:00:02.98
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T09:44:31.610

`pow`并`log`期望双倍或浮动。有了演员表，它对我有用：

```
exponent = floor(log((double)input)/log((double)base));
input = input - pow((double)base, (double)exponent); 
```

最初我收到一个错误，指出编译器无法解决各种超载之间的歧义（在 VS 2008 上）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-09T01:57:39.093

包括前面代码中的小数部分

```
#include<stdio.h>
main()
{
      int rem,m=0,i,n;
      int a[100],base;
      float num,t,j;
      scanf("%f%d",&num,&base);
      n=(int)num;
      t=num-n;
      j=1.0/base;
      while(n){
               rem=n%base;
               if(rem<10)
               a[m++]=rem+'0';
               else
               a[m++]='A'+rem-10;
               n/=base;
      }
      while(m--)
      printf("%c",a[m]);
      printf(".");
      m=0;
      while(t>0.00001){
                       rem=0;
                        if(t>j)
                        {for(i=1;(j*i)<t;i++);
                        rem=i-1;}
                        if(rem==0)
                        a[m++]=0;
                        else if(rem<10)
                        a[m++]=rem+'0';
                        else
                        a[m++]='A'+rem-10;                        
                        t-=(j*rem);
                        j/=base;
      }
      for(i=0;i<m;i++)
      printf("%c",a[i]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-02T19:58:49.933

我的朋友怎么样 :)？

```
#include <stdio.h>
#include <math.h>

int CB, DB;
 void base(void)
 {
   int adad2[100], i=-1,j;
   char adad1[100], ch;
   long int num1=0, num2=0;

   printf("Enter your num: ");
   scanf("%c", &ch);

   do
     {
       i++;
       scanf("%c", &adad1[i]);
     } while(adad1[i]!='\n');

   j=i-1;
   for(i=j;i>=0;i--)
     { //converts the base to 10\.                                                                                                                                 
       if(adad1[i]<='9'&& adad1[i]>='0')
     {
       num1+=((long int)pow((float)CB,(j-i)))*(((int)adad1[i])-48);  //converting ascii code to num                                         
     }
       else if(adad1[i]<='Z'&&adad1[i]>='A')
     {
       num1+=((long int)pow((float)CB,(j-i)))*(((int)adad1[i])-55);
     }
       else if(adad1[i]<='z'&&adad1[i]>='a')
     {
       num1+=((long int)pow((float)CB,(j-i)))*(((int)adad1[i])-87);
     }
     }

   i=0;
   while(num1>=DB)
     { //converts the base to b. (START)                                                                                                                             
       adad2[i]=num1%DB;
       i++;
       num1/=DB;
     }

   adad2[i]=num1; //converts the base to b. (END)                                                                                                                                
   printf("\nResult: \n");

   for(;i>=0;i--)
     { //prints the result.                                                                                                                                          
       if(adad2[i]<=9&&adad2[i]>=0){
     printf("%d",adad2[i]);
       }

       else if(adad2[i]>=10&&adad2[i]<=35){
     printf("%c",(char)(adad2[i]+55));
       }
     }
 }

 void main(void)
 {
   printf("Guide: You must enter \"Current Base & Desired Base\" between 2 adn 32...");
   printf("\nEnter current base: ");
   scanf("%d", &CB);

   printf("\nEnter desired base: ");
   scanf("%d", &DB);

   base();
   getchar();
   printf("\n");

 } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-05-08T08:54:41.303

**如果你想从十进制转换为任何高达 36 的基数，试试这个**

```
#include<stdio.h>
main()
{
      int n,rem,m=0,i;
      int a[100],base;
      scanf("%d%d",&n,&base);
      while(n){
               rem=n%base;
               if(rem<10)
               a[m++]=rem+'0';
               else
               a[m++]='A'+rem-10;
               n/=base;
      }
      while(m--)
      printf("%c",a[m]);
} 
```

# ruby - Ruby Sinatra：显示可点击的文件列表

> ID：10348243
> 
> 赞同：0
> 
> 时间：2012-04-27T09:34:14.030
> 
> 标签：ruby, sinatra

我有这个简单的脚本来显示文件夹中的所有文件，它在控制台中工作，但在 Sinatra 中给出不同的结果（带有路径和扩展名）。为什么会这样，我怎样才能最好地将这些基本名称（没有路径和扩展名）显示在 ul 列表中，作为使用 Sinatra 在浏览器中打开此文件的链接？目标是在没有给出文件名的情况下显示一个可点击的页面列表以打开。我已经有了显示文件的例程。

安慰：

```
require 'find'

def get_files path
 dir_array = Array.new
 Find.find(path) do |f|
    dir_array << f if !File.directory?(f) # add only non-directories  
 end
 return dir_array
end  

for filename in get_files 'c:/sinatra_wiki/views'
  basename = File.basename(filename, ".*")
  puts basename
end

=> index
   index2 
```

西纳特拉：

```
require 'find'

def get_files path
 dir_array = Array.new
 Find.find(path) do |f|
    dir_array << f if !File.directory?(f) # add only non-directories  
 end
 return dir_array
end  

get '/' do
  for filename in get_files 'c:/sinatra_wiki/views'
    basename = File.basename(filename, ".*")
    puts basename
  end
end
=> c:/sinatra_wiki/views/index.htmlc:/sinatra_wiki/views/index2.erb 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T10:18:27.907

在您的 sinatra 实现中，您在浏览器中看到的结果不是块中`puts basename`语句的结果`get`。它是方法的返回值`get_files`。尝试在块中添加`puts "<p>#{base name}</p>"`而不是添加并亲自查看。`puts basename``get`

一些变化：

`get_files`方法：不发送整个文件路径，只发送文件名

```
dir_array << File.basename(f, ".*") 
```

如果您需要清晰，请添加视图：

```
get '/' do
   @arr = get_files(the_path)
   erb :index
end 
```

在其他地方，在 app/views 文件夹中，在 index.erb 文件中：

```
<h2>Page list</h2>

<ul> 
  <% @arr.each do |page| %>
    <li><a href="/<%=page%>"><%=page> %></a></li>
  <% end %>
</ul> 
```

这是以与控制台输出类似的方式列出文件名。

TL;DR：将循环部分放在视图中！

# javascript - 对使用实际关闭的怀疑

> ID：10348255
> 
> 赞同：2
> 
> 时间：2012-04-27T09:35:09.990
> 
> 标签：javascript, closures

我试图在 Javascript 中找到更多关于闭包的信息，并且正在经历这个：[https ://developer.mozilla.org/en/JavaScript/Guide/Closures#Practical_closures](https://developer.mozilla.org/en/JavaScript/Guide/Closures#Practical_closures)

根据这篇文章，通过使用这样的功能：

```
function makeSizer(size) {  
    return function() {  
        document.body.style.fontSize = size + 'px';  
    };  
}  

var size12 = makeSizer(12);  
var size14 = makeSizer(14);  
var size16 = makeSizer(16); 
```

然后我们可以使用这些语句来增加/减少页面上文本的字体大小：

```
document.getElementById('size-12').onclick = size12;  
document.getElementById('size-14').onclick = size14; 
document.getElementById('size-16').onclick = size16; 
```

虽然我理解这里的概念——即 size12、size14 和 size16 成为允许访问内部函数的闭包，但我不禁觉得这是不必要的。是不是更容易拥有：

```
function makeSizer(size) {  
    document.body.style.fontSize = size + 'px';  
} 
```

，然后用这些调用它？

```
document.getElementById('size-12').onclick = makeSizer(12);  
document.getElementById('size-14').onclick = makeSizer(14); 
document.getElementById('size-16').onclick = makeSizer(16); 
```

谁能告诉我我的想法是否正确 - 或者我只是 Javascript 的新手并且不了解在这种情况下使用闭包的优势，在这种情况下，如果你能解释一下我会很高兴这样做。

提前谢谢各位。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T09:41:41.773

不，你不能那样做。

就好像你写过：

```
document.getElementById('size-12').onclick = (function(size) {  
    document.body.style.fontSize = size + 'px';  
})(12); 
```

函数*立即被调用*，样式将立即应用，并且没有`.onclick`处理程序被注册，因为函数的返回值为`undefined`.

该示例的真正意义在于表明您可以从另一个函数*返回一个函数*，然后您可以将该结果分配给事件处理程序。

* * *

如果您没有`makeSizer()`修改，那么您可以按照建议分配处理程序而无需中间变量，即：

```
document.getElementById('size-12').onclick = makeSizer(12); 
```

但如果你改变你描述的方式，那**将不起作用。**`makeSizer()`

如果您多次使用相同的sizer，它也比将“sizer”存储在变量中效率低。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T09:45:06.907

是的，这些变量 ( `sizeN`) 是不必要的。您可以直接将结果分配`makeSizer()`为处理程序，看起来要好得多。

但是，这些变量的使用并不是闭包的概念。这个例子中的闭包是 function `makeSizer`，它返回一个*函数*（即使没有参数），它仍然可以访问`size`变量。

不过，您需要看到两者之间的区别

```
function makeSizer(size) {  
    return function resize() {  
        document.body.style.fontSize = size + 'px';  
    };  
} 
```

和

```
function resize(size) {  
    document.body.style.fontSize = size + 'px';  
} 
```

执行`makeSizer(5)`不做任何事情，它返回一个函数，在调用时将大小设置为预定义的大小。相反，执行`resize(5)`会直接设置大小。您不能将后一个函数的结果用作事件处理程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T09:59:04.760

对于您提供的示例，当然不需要关闭，但我想这只是为了简化概念的呈现。在某些情况下，虽然闭包是最好的解决方案：考虑如何在 javascript 中实现“私有”属性，或者何时需要[curryng](http://pt.wikipedia.org/wiki/Currying)来封装参数（即，用于回调函数）。

我希望以下示例对您有所帮助：

```
var makeSequencer = function() {
    var _count = 0; // not accessible outside this function
    var sequencer = function () {
        return _count++;
    }
    return sequencer;
}

var fnext = makeSequencer();
var v0 = fnext();     // v0 = 0;
var v1 = fnext();     // v1 = 1;
var vz = fnext._count // vz = undefined 
```

# java - 休眠：无法删除实体

> ID：10348261
> 
> 赞同：2
> 
> 时间：2012-04-27T09:35:53.223
> 
> 标签：java, hibernate, jpa

我正在尝试删除 JPA/Hibernate 配置中的实体。该数据库是一个嵌入式 HSQL 文件。

这是执行删除的代码：

```
 EntityManager em = PersistenceUtility.getInstance().createEntityManager();
        EntityTransaction t = em.getTransaction();
        t.begin();

        List<ServiceTicket> tickets = em.createQuery("from ServiceTicket").getResultList();

        for (ServiceTicket ticket : tickets) {
            Report report = ticket.getReport();
            em.merge(report);
            em.merge(ticket);
            em.remove(report);
            em.remove(ticket);
        }

        em.flush();
        t.commit(); 
```

`ServiceTicket`引用`Report`实体。这就是为什么我必须先删除`Report`。

在这种情况下，我没有收到错误。但更改不会写入数据库。

下面是持久化单元的配置：

```
<persistence-unit name="local_hsql" transaction-type="RESOURCE_LOCAL">
<provider>org.hibernate.ejb.HibernatePersistence</provider>
<class>Report</class>
<class>ServiceTicket</class>
<properties>
  <property name="hibernate.connection.driver_class" value="org.hsqldb.jdbcDriver"/>
  <property name="hibernate.connection.url" value="jdbc:hsqldb:file:etc/database/db1"/>
  <property name="hibernate.dialect" value="org.hibernate.dialect.HSQLDialect"/>
  <property name="hibernate.cache.provider_class" value="org.hibernate.cache.NoCacheProvider"/>
  <property name="hibernate.show_sql" value="false"/>
  <property name="hibernate.connection.SetBigStringTryClob" value="true"/>
  <property name="hibernate.hbm2ddl.auto" value="update"/>
</properties> 
```

我究竟做错了什么？

在此先感谢和来自德国的问候

马可

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:48:17.550

您可以使用

```
@OneToOne(cascade = CascadeType.REMOVE) 
```

当您删除 ServiceTicket 时，它将删除报告。

第二：如果要删除等于 x 的所有 ServiceTicket，可以使用 HQL：

```
Query query = session.createQuery("delete ServiceTicket where something = :x");
query.setParameter("x", "myvalue");
int result = query.executeUpdate(); 
```

# java - 安卓。CPU 使用率过高

> ID：10348264
> 
> 赞同：1
> 
> 时间：2012-04-27T09:36:10.753
> 
> 标签：java, android, cpu, cpu-usage

我刚刚为 Android 开发了一个应用程序，它是一个游戏，但我没有使用 3D 图形。这是一个棋盘游戏，我在屏幕上移动 ImageViews。从现在开始我还没有在移动设备上测试过它，只是在模拟器上。问题是，当我在三星 Galaxy S2 手机上运行我的应用程序时（双矿石:(），CPU 使用率上升到 85% 并且该死的手机升温:D 当我终止进程时（完全关闭应用程序，所以它不在后台运行）它下降到 0 :)

我什至不知道从哪里开始解决问题。你们能给我一个想法吗？

我只能想到两个可能发生这种情况的原因，但它们可能是愚蠢的原因：

*   除了 UI 线程，我还有 2 个线程，每个线程都有一个无限循环，该循环无限循环并查看每个线程的消息队列中是否有任何消息。会是这样吗？我应该在这些循环中延迟几毫秒，这样它们就不会运行得那么快吗？
*   我还在屏幕上使用了大约 20-25 个图像视图，我通过触摸来移动它们。这些可能与此有关吗？

有没有办法从模拟器检查内存泄漏或某些东西......？

如果有人可以就我应该如何处理这个问题提供一些建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T09:43:41.923

> “我还有 2 个线程，每个线程都有一个无限循环，该循环无限循环并查看每个线程的消息队列中是否有任何消息”

上面的事情对我来说听起来很可疑。与其在自己的线程中使用无限循环，不如真正使用专为此目的设计的[Handler 。](http://developer.android.com/reference/android/os/Handler.html)

*来自开发者的网站：*

> Handler 允许您发送和处理与线程的 MessageQueue 关联的 Message 和 Runnable 对象。每个 Handler 实例都与单个线程和该线程的消息队列相关联。
> 
> Handler有两个主要用途：
> 
> 1.  安排消息和可运行文件作为未来某个时间点执行
> 2.  将要在与您自己的线程不同的线程上执行的操作排入队列

此外， Eclipse 中的**DDMS**选项卡将为您提供调查 CPU 过度使用所需的所有工具。

# jquery - jQuery Masonry 在 IE8 中调整大小时没有动画

> ID：10348266
> 
> 赞同：1
> 
> 时间：2012-04-27T09:36:18.413
> 
> 标签：jquery, responsive-design, jquery-masonry

我正在建立一个带有响应式设计网站的[网站](http://www.trackmyeps.com/responsive/)。但是应该重新排列块的砌体动画在 IE8 中无法正常工作。似乎它仅在完成另一个调整大小后才运行。

因此，它应该在开始使用较小屏幕的媒体查询 CSS 之后进行动画处理。

但在使用此 CSS 并再次调整屏幕大小后，它会生成动画。

我该如何解决？

# jquery - 显示/隐藏标题悬停 fancybox2

> ID：10348268
> 
> 赞同：0
> 
> 时间：2012-04-27T09:36:19.403
> 
> 标签：jquery, fancybox

我想使用悬停事件在fancybox2 中隐藏和显示标题，但它不起作用。请帮忙。

我的代码是：

```
 $("#fancybox-wrap").hover(function() {
        $("#fancybox-title").show();
    }, function() {
        $("#fancybox-title").hide();
    })}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:40:02.050

你有一个额外的括号：

```
$("#fancybox-wrap").hover(function() {
    $("#fancybox-title").show();
}, function() {
    $("#fancybox-title").hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:20:43.290

你必须使用类名；我建议使用'live'（所以你不需要为此使用回调） -

```
$(".fancybox-wrap").live({
    mouseenter: function() {
        $(".fancybox-title").show();
    },
    mouseleave: function() {
        $(".fancybox-title").hide();
   }
}); 
```

# java - Mochahost GWT rpc 和 Servlet 不工作

> ID：10348272
> 
> 赞同：0
> 
> 时间：2012-04-27T09:36:46.673
> 
> 标签：java, gwt, gwt-rpc

在将我的应用程序部署到 mochahost 时，我遇到了`servlet`和`GWT-RPC`通信之间的问题。错误显示：

```
HTTP Status 404 - /403.shtml
type Status report
message /403.shtml
description The requested resource (/403.shtml) is not available. 
```

`.war`文件在我的工作站上完美运行，但不适用于`mochahost`.

有什么想法可以解决吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T17:32:12.147

1.  确保更新实时站点 URL。例如，通常，在本地系统上，您访问 Web 应用程序，`http://localhost:8080/myapp`但在服务器上它更改为 http://[www.]myapp.com。同样，这只是一个例子。关键是，实时站点必须反映来自代码（servlet/JSP/action/etc...）和配置属性（如果有）的正确 URL。
2.  如果您没有任何索引文件，请在 .htaccess 文件中注释“DirectoryIndex”属性。
3.  如果您没有任何重写要求，请在 .htaccess 文件中注释“RewriteCond”属性。
4.  当然，原因之一是 - 如果客户端不接受 cookie 并且 servlet 不编码 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T12:02:12.500

Mochahost 有很好的支持，尝试与他们的技术部门进行实时聊天，您可能会解决问题。

我就是做这个的。

# jsf-2 - JSF Web 应用程序无法在 IE9 中运行。但它在 IE8 中运行良好

> ID：10348274
> 
> 赞同：2
> 
> 时间：2012-04-27T09:36:58.340
> 
> 标签：jsf-2, browser, internet-explorer-9

我已经使用 JSF 2.0 开发了 Web 应用程序。它在 IE 8 和其他浏览器（firefox 和 google chrome）中运行良好。但它在 IE9 中不起作用。您能否解释一下 JSF 的 IE9 兼容性以及如何做到这一点，以便我可以让我的应用程序在 IE9 中运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:55:44.050

我们在 IE9 上也遇到了一些问题，我们的解决方法是使用一个过滤器来告诉 IE9 在兼容模式下工作。

*请注意，这应该是最后的手段。在使用过滤器之前，您应该首先尝试解决您的具体问题（在您的问题中没有明确解释）。*

兼容模式会导致 IE9 松散圆角。

```
@WebFilter("*.xhtml")
public class CompatibilityFilter implements Filter {

    public CompatibilityFilter() { }

    public void doFilter(ServletRequest request, ServletResponse res,
            FilterChain chain) throws IOException, ServletException {
        HttpServletResponse resp = (HttpServletResponse) res;
        resp.addHeader("X-UA-Compatible", "IE=EmulateIE8");
        resp.addHeader("Cache-Control", "no-cache, must-revalidate");
        chain.doFilter(request, resp);
    }

    public void destroy() { }

    public void init(FilterConfig fConfig) throws ServletException {
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-06T18:37:47.287

我知道这是一个较老的问题，但您可能正在经历/经历与我们相同的缺陷：

```
> <f:ajax/> not working at all in IE9 (normal mode) 
> Created: 18/May/11
> Component/s:  ajax 
> Affects Version/s: 2.1.1    
> Fix Version/s:    2.1.7, 2.2.0-m01 
```

请参阅 JIRA： [https ://java.net/jira/browse/JAVASERVERFACES-2063](https://java.net/jira/browse/JAVASERVERFACES-2063)

如果您得到以下信息，则表明这是问题所在：

> “malformedXML：无法获取属性‘removeChild’的值：对象为空或未定义”。

在您的浏览器控制台中。

解决方案是迁移到 2.1.7 或更高版本。

# php - 将字符串转换为相同的格式

> ID：10348276
> 
> 赞同：0
> 
> 时间：2012-04-27T09:36:59.960
> 
> 标签：php, string, time, format

我有以下五个字符串（它们应该像时间一样）：11-20 9:30-20:00 8-20 7-16,30 9.30-9.50

我想知道是否有任何方法可以将它们全部转换为 HH.HH-MM-MM 格式。例如 11-20 应转换为 11.00-20.00。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T09:45:54.853

这个怎么样：

```
$str = '11-20 9:30-20:00 8-20 7-16,30 9.30-9.50';
$result = preg_replace_callback('~([\d:,.]+)~', function($i) {
    $i[1] = str_replace(array(',', '.'), ':', $i[1]);
    if (strpos($i[1], ':') === false) {
        $i[1] .= ':00';
    }

    return $i[1];
}, $str);
var_dump($result); 
```

[http://codepad.viper-7.com/2esU4N](http://codepad.viper-7.com/2esU4N)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T10:29:56.953

建立在什么zerkms我想出了这个

```
<?php
class timeString {

public function timeString($string) {
        $exp = explode('-', $string);
        $timeString = array();
        foreach ($exp as $value) {
           $timeString[]= $this->normTime($value);
        }
        $time = implode('-', $timeString);
        return $time;
    }
 public function normTime($string) {
        $result = preg_replace_callback('~([\d:,.]+)~', function($i) {
                    $i[1] = str_replace(array(',', ':'), '.', $i[1]);
                    if (strpos($i[1], '.') === false) {
                        $i[1] .= '.00';
                    }

                    return $i[1];
                }, $string);
        return $result;
    }
} 
```

这将完全返回您要求的内容`11.00-20.00`。

祝你好运。

# prototypejs - 使用带有原型和noConflict的jslider时发生jQuery冲突

> ID：10348282
> 
> 赞同：-1
> 
> 时间：2012-04-27T09:37:22.893
> 
> 标签：prototypejs, jquery, jslider

试图解决prototype.js 和jQuery.js 之间的$ 冲突，因为我需要使用需要jQuery 库的jSlider。

我在 jquery.js 文件的末尾添加 jQuery.noConflict()，然后在 jslider.js 文件中我将 $._roundNumber 更改为 jQuery._roundNumber。然而我仍然得到一个错误，说 jQuery._roundNumber 不是一个函数。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:33:43.007

Fixed. Just realised that the reason jQuery.noConflict() was not working was because jQuery was already being used in the template page that I was including in my current page so the problem was two fold:

1.  '$()' which is the default jQuery selector was clashing with prototype.js which Tapestry includes by default

2.  when I added jQuery.noConflict() at the end of my jquery.new.js file then tried using 'jQuery()' as the selector it did not work either because a different version of jquery (let's call this jquery.old.js) was already included in the template page (which I was including in my current page). To get the jquery.old.js to work with prototype.js, the previous developer already used jQuery.noConflict() so the 'jQuery()' selector was already taken as well.

**Fix:** I added $j2 = jQuery.noConflict() at the end of jquery.new.js file then I used '$j2()' selector in my new library that uses the jSlider and I also modified the selector in the jSlider.js file. It all works well now.

I am leaving both jquery.new.js and jquery.old.js file in the project (rather than using just one) because the template page which uses the older jquery version is used all over the site (I don't want to test the entire site after changing this) while the new component I'm adding needs the new version of jquery (jquery.new.js) file. And yes I know it's better to add the no conflict commands at the top of my html page rather than at the end of the js library files - will change that after this update on stack overflow :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T09:42:30.700

这是集成原型和jquery的示例...可以检查您是否做对了。？

```
<script src="prototype.js"></script>
<script src="effects.js"></script>
<script src="jquery.js"></script>

jQuery.noConflict();
     jQuery(document).ready(function($){
         jQuery("a").click(function(){
            Effect.Shake('shake_demo');
        });
    });

    <div id="shake_demo" style="width:150px; height:40px; background:#ccc; text-align:center;">
        <a href="#"  style="line-height:40px;">Click me to shake!</a>
    </div> 
```

现在，您可以使用以下代码四舍五入：

```
var txt=jQuery('#txtBox').val());
var amt = parseFloat(txt);
   alert(amt.toFixed(2); 
```

[https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Number/toFixed](https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Number/toFixed)

# php - yaml/symfony2：覆盖配置

> ID：10348285
> 
> 赞同：6
> 
> 时间：2012-04-27T09:37:41.130
> 
> 标签：php, symfony, yaml, monolog

我想在我的 config_test.yml 中覆盖来自 config_dev.yml 的一些配置。因此，想象一下 config_dev.yml 中的以下部分：

```
monolog:
    handlers:
        main:
            type: stream
            path: %kernel.logs_dir%/%kernel.environment%.log
            level: debug
        firephp:
            type: firephp
            level: info 
```

在我的测试环境中，我根本不需要记录器。所以我尝试了

```
monolog: ~ 
```

没有效果。我也试过：

```
monolog:
    handlers:
        main: ~
        firephp: ~ 
```

再次没有任何影响。然后我测试了

```
monolog:
    handlers:
        main:
            type: ~
            path: ~
            level: ~
        firephp:
            type: ~
            level: ~ 
```

我得到一个 ErrorException `Couldn't find constant Monolog\Logger::`。如果有人能指出一种覆盖独白设置的方法，我将非常感激。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T09:18:42.603

最好将处理程序定义为空数组：

```
monolog:
    handlers: [] 
```

**UPD1：**有特殊类型的记录器：test 和 null，您可以使用它们：

```
monolog:
    handlers:
        test:
            type:  test
            level: debug 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T16:50:19.743

## 如果您使用的是 Symfony2 标准版

`config_dev.yml`对于开箱即用的独白，您看起来像这样：

```
# config_dev.yml
monolog:
  handlers:
    main:
      type: fingers_crossed
      action_level: error
      handler: nested
    nested:
      type: stream
      path: %kernel.logs_dir%/%kernel.environment%.log
      level: debug 
```

正如您所看到的，它定义了处理程序`main`，并且仅使用`nested`where因为它被.`nested``main`

`config_dev.yml`是从中导入的，`config_test.yml`因此如果要覆盖测试环境的配置，则需要覆盖以下`main`处理程序`config_test.yml`：

```
# config_text.yml
monolog:
    handlers:
      main:
        type: test 
```

这将阻止 monolog 创建日志文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T09:43:36.080

你有没有尝试过：

```
monolog:
    handlers: ~ 
```

它应该工作（我认为）。 [看这里](https://github.com/symfony/MonologBundle/blob/master/DependencyInjection/MonologExtension.php) 没有处理程序，独白是不加载的。

# java - JSON、JAXB、格式问题

> ID：10348287
> 
> 赞同：0
> 
> 时间：2012-04-27T09:37:52.713
> 
> 标签：java, javascript, rest, jakarta-ee, jaxb

我遇到了数据格式问题。我有一个简单的 JaxB 类

```
@XmlRootElement(name="")
public class MyProgressResponse {
    private int weight;
    private long date;
    /**
     * Weight is treated as a Y Axis.
     * @return
     */
    @XmlElement(name="y")
    public int getWeight() {
        return weight;
    }
    public void setWeight(int weight) {
        this.weight = weight;
    }
    /**
     * This is a UTC format of a time.
     * value is a number of milliseconds between a specified date and midnight January 1 1970
     * This is also treated as a X-Axis
     * @return 
     */
    @XmlElement(name="x")
    public long getDate() {
        return date;
    }
    public void setDate(long date) {
        this.date = date;
    }
} 
```

我想要填充返回数据的 REST 服务。像这样

```
@GET
@Path("/my")
@Produces(MediaType.APPLICATION_JSON)
public MyProgressResponse[] getProgressResponse(){
    // Get the data from DB
    // Here the getDate will give me List<MyProgressResponse>
    return getData().toArray(new MyProgressResponse[0]);
} 
```

现在我收到的 JSON 就像

```
[
 {
   {
     "x": 1335499200000,
     "y": 85
   }
 },
 {
   {
     "x": 1334894400000,
     "y": 84
   }
 },
 ....
] 
```

但我的要求是获得没有额外块的那个`{ }`。

```
[
   {
     "x": 1335499200000,
     "y": 85
   },
   {
     "x": 1334894400000,
     "y": 84
   },
   ....
] 
```

我想在 HighChart 中使用它。收到数据后，我可以在 JS 中格式化数据，但它会花费额外的时间，我不希望这样。

谁能帮我格式化数据

谢谢，

塔尔哈·艾哈迈德·汗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T10:10:57.153

将方法的返回类型更改为 ArrayList ：

```
@GET @Path("/my") 
@Produces(MediaType.APPLICATION_JSON) 
public ArrayList<MyProgressResponse> getProgressResponse(){     
// Get the data from DB     
// Here the getDate will give me List<MyProgressResponse>

ArrayList<MyProgressResponse> response=(ArrayList<MyProgressResponse>) getData();

return response; 
} 
```

还要让你的 bean 类实现 Serializable。

# c++ - QString::split() 和 "\r"、"\n" 和 "\r\n" 约定

> ID：10348292
> 
> 赞同：26
> 
> 时间：2012-04-27T09:38:06.027
> 
> 标签：c++, qt

我知道`QString::split`应该用来`QStringList`从 multiline中获取 a `QString`。但是，如果我有一个文件并且我不知道它是来自 Mac、Windows 还是 Unix，我不确定`QString.split("\n")`在所有情况下是否都能正常工作。处理这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-27T09:48:03.877

如果可以删除空行，您可以尝试：

```
QString.split(QRegExp("[\r\n]"),QString::SkipEmptyParts); 
```

只要找到任何换行符（换行符或回车符），就会拆分字符串。任何连续的换行符（例如`\r\n\r\n`或`\n\n`）都将被视为多个分隔符，它们之间有空白部分，将被跳过。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2014-02-22T22:50:14.910

[Emanuele Bezzi 的回答遗漏](https://stackoverflow.com/a/10348438/827263)了几点。

在大多数情况下，从文本文件读取的字符串将使用文本流读取，该文本流会自动将操作系统的行尾表示转换为单个`'\n'`字符。因此，如果您正在处理本机文本文件，`'\n'`则应该是您需要担心的唯一分隔符。例如，如果您的程序在 Windows 系统上运行，以文本模式读取输入，则行尾将*在内存*中用单个`\n`字符标记；您永远不会看到`"\r\n"`文件中存在的对。

但有时您确实需要处理“外来”文本文件。

理想情况下，您应该在阅读任何此类文件之前将其翻译为本地格式，这样可以避免该问题。只有翻译实用程序需要知道变体行尾；其他一切都只处理文本。

但这并不总是可能的。有时您可能希望程序在 POSIX 系统（Linux、UNIX 等）上运行时处理 Windows 文本文件，反之亦然。

POSIX 系统上的 Windows 格式的文本文件似乎`'\r'`在每行的末尾有一个额外的字符。

Windows 系统上的 POSIX 格式的文本文件似乎由一行很长的嵌入`'\n'`字符组成。

最通用的方法是以二进制模式读取文件并显式处理行尾。

我不熟悉`QString.split`，但我怀疑这是：

```
QString.split(QRegExp("[\r\n]"),QString::SkipEmptyParts); 
```

将忽略空行，这些空行将显示为`"\n\n"`或`"\r\n\r\n"`，具体取决于格式。空行是完全有效的文本数据；你不应该忽略它们，除非你确定这样做是有意义的。

如果您需要处理由 、 或 分隔的文本输入`"\n"`，`"\r\n"`那么`"\r"`我认为是这样的：

```
QString.split(QRegExp("\n|\r\n|\r")); 
```

会做的工作。（感谢 parsley72 对正则表达式语法的帮助。）

另一点：您可能不会遇到仅`'\r'`用于分隔行的文本文件。这是直到版本 9 的 MacOS 使用的格式。MaxOS X 基于 UNIX，它使用标准的 UNIX 风格的`'\n'`行尾（尽管它也可能允许`'\r'`行尾）。

# c++ - 文件传输 C++

> ID：10348295
> 
> 赞同：2
> 
> 时间：2012-04-27T09:38:10.500
> 
> 标签：c++, file-transfer, winsock2

当我的客户端向服务器发送文件时，我应该在发送下一个块之前休眠（100）左右以确保服务器有足够的时间下载+写入数据吗？

这似乎完全没有必要吗？

另外，我在发送块时遇到了会阻塞错误（＃10035），所以我只是循环发送直到它成功，如果发送 == SOCKET_ERROR goto SendAgain; ， 那样行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:26:18.853

在我看来，使用 sleepfunction 等待某事完成在 99% 的情况下都是错误的。您现在永远不会有您需要或您期望执行一个进程的时间（可能会被例如尖峰、i/o 中的其他问题或其他问题中断）

如果您想确保完全执行重要的事情，您应该阅读信号量或类似的东西，您可以在开始/结束时锁定/释放进程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T09:54:47.483

如果您通过 TCP 发送文件，那么它是确保已收到所有内容的协议，我不会在每个块之间放置睡眠。

willblock 错误是您为输出缓冲区发送了太多数据，或者您尝试发送太快，并且远程缓冲区已满。再次发送它似乎没问题，因为接收者收到了它，但没有足够的空间来存储它并且只是丢弃它。

这是一篇关于您的错误的小文章：[Winsock 错误 10035](http://geekswithblogs.net/Lance/archive/2005/07/20/WinsockError10035.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T10:54:47.563

取自[手册页](http://www.kernel.org/doc/man-pages/online/pages/man2/send.2.html)：

> 当消息不适合套接字的发送缓冲区时，send() 通常会阻塞，除非套接字已被置于非阻塞 I/O 模式。在非阻塞模式下，它会因错误 EAGAIN 或 EWOULDBLOCK 而失败。[select(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/select.2.html)调用可用于确定何时可以发送更多数据。

# c# - 获取数组中的每个第 n 个字节/值

> ID：10348297
> 
> 赞同：0
> 
> 时间：2012-04-27T09:38:11.560
> 
> 标签：c#, bytearray

我正在寻找一种平滑/快速的方法来检索字节数组中的每 n 个短并将其复制到一个新数组中。

l = 低字节 u = 高字节

我的数据格式如下： byte[] bytes= {a0l, a0u, b0l, b0u, c0l, ..., n0l, n0l, a1l, a1u, b1l, ..., nXl, nXu}

我需要的是获得长度为 X 的 n 字节数组（例如，a[0..X]、b[0..X]、... 或 M[a..n][0..X]）

我正在考虑以下两个步骤：

1.  使用类似于

    ```
     short[] shorts= new short[(int)(Math.Ceiling(bytes.Length / 2.0)];
        Buffer.BlockCopy(bytes, 0, shorts, 0, bytes.Length); 
    ```

2.  从短裤中检索每一秒的值

    ```
     I'm looking for some fast code here... something like blockcopy with skip
       I am completely aware that I could use a loop - but maybe there's a better
       solution to it as I need to do this task for 80MB/s... 
    ```

3.  将其转换回字节数组（相同 - 使用块复制）

    ```
     byte[] arrayX = new byte[shorts.Length * 2];
        Buffer.BlockCopy(shorts, 0, arrayX , 0, arrayX .Length); 
    ```

太感谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:59:46.713

我认为您不妨将字节直接复制到新的字节数组中，计算出每个短的正确偏移量。

将其全部转换为单独的短数组并返回字节数组是浪费时间 IMO。

# javascript - JS 一元加运算符的行为应用于表示负十六进制的字符串

> ID：10348301
> 
> 赞同：6
> 
> 时间：2012-04-27T09:38:22.673
> 
> 标签：javascript, numbers, hex

[根据 MDN](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Arithmetic_Operators)，使用一元加号运算符时：

> 支持十进制和十六进制（“0x”前缀）格式的整数。支持负数（**虽然不支持十六进制**）。如果它无法解析特定值，它将评估为 NaN。

但是当我运行这个 Jasmine 测试时（`toBe()`匹配器应用一个`===`运算符）：

```
 it("should return NaN when trying to convert a string representing a NEGATIVE HEX to the corresponding number", function() {
    var a = '-0xFF';        
    expect(typeof +a).toBe('number');
    expect(isNaN(+a)).toBeTruthy(); //Fails on Chrome and Opera...
  }); 
```

**它在 Chrome 和 Opera 上失败**（并在 IE、Safari 和 Firefox 中通过）。

这是 Chrome 和 Opera 引擎的缺陷还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T09:58:17.077

它可能 - 或可能不会被视为缺陷，这取决于一个人如何附加到规范。)

我发现了一个关于这种行为的[有趣讨论。](https://bugs.webkit.org/show_bug.cgi?id=24156)看起来 Firefox 曾经一度处于“优于规范”的阵营，但随后根据规范对其进行了修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T10:04:08.880

根据[EcmaScript 规范](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)，一元运算`+`符将[[String-]to-Number-conversion](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf#p44)应用于值（此处为字符串），它接受十六进制数字 - 但不接受负十六进制数字。

# android - android canvas 以最简单的形式滚动

> ID：10348304
> 
> 赞同：1
> 
> 时间：2012-04-27T09:38:40.397
> 
> 标签：android, canvas, scroll

我是 android 新手，找不到任何合适的方法来使画布可滚动。我进行了很多搜索，但没有人对实际要做的事情给出完整的概述。只是模糊的想法和不完整的代码示例。任何帮助，将不胜感激。我已经扩展了滚动视图，并在画布上绘制了一个大于屏幕尺寸的 png 图像。滚动条确实出现了，但随后消失并且没有滚动。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T10:27:05.607

如果您的意思是您有一个带有要绘制的 Canvas 的自定义视图，那么您必须自己实现滚动。但不要害怕！已经为您制作了一个名为[GestureDetector](http://developer.android.com/reference/android/view/GestureDetector.html)和[Scroller](http://developer.android.com/reference/android/widget/Scroller.html)的好东西，以使其变得简单。

你只需要听它的滚动/投掷事件并更新你要在画布上绘制的 xOffset 值。

基本上在你的 draw(Canvas) 方法中你不只是调用

```
drawSomething(x, y) 
```

但

```
drawSomething(x - offset, y) 
```

如果我正在描述您遇到的问题并且仍然不清楚 - 请告诉我，我可以进一步扩展。

# android - Android NDK - 找不到库无法链接可执行文件 - 如何设置 LD_LIBRARY_PATH？

> ID：10348305
> 
> 赞同：7
> 
> 时间：2012-04-27T09:38:44.397
> 
> 标签：android

我有一个 Android 活动，我正在执行 NDK 编译代码（命令行程序）：

```
Runtime.getRuntime().exec(myCommand); 
```

并加载所需的共享库：

```
static {
    System.loadLibrary(myLib);
} 
```

但是在运行我的项目并从错误流打印输出时，我收到以下错误：

```
link_image[1963]:  7520 could not load needed library 'libmyLib.so' for './myCommand'
(load_library[1105]: Library 'libmyLib.so' not found)CANNOT LINK EXECUTABLE 
```

我保证`libmyLib.so`确实存在于我的项目`libs/armeabi/`目录下，并将其复制到我的 Android 设备`/data/data/myProject.path.package/lib/`目录下。可执行文件和库的所有者和组`system:system`以及权限也可以。

在开始时从 adb shell 执行命令时，我得到了同样的错误，但是我可以设置`LD_LIBRARY_PATH`它并且运行正常：

```
./adb shell
export LD_LIBRARY_PATH=/data/data/myProject.path.package/lib:$LD_LIBRARY_PATH
/data/data/myProject.path.package/myCommand 
```

所以问题是，如何从 java Android 项目中做到这一点？

注意：我在 GT-P1010 上使用 Linux、Eclipse + Sequoyah、NDK-r5b、Android 2.3.6 (API 10)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T09:54:40.863

已解决：您可以使用`exec(String prog, String[] envp)`. 就我而言，这是：

```
String[] envp = {"LD_LIBRARY_PATH=/data/data/cse.ecg.dcmtk/lib:$LD_LIBRARY_PATH"};
Runtime.getRuntime().exec(myCommand, envp); 
```

现在的问题是`exec()`执行的进程无法解析主机名（它来自 adb shell；已设置 Internet 权限）。有什么暗示吗？

# c++ - 返回返回 char* 类型数组的数据结构的错误

> ID：10348306
> 
> 赞同：2
> 
> 时间：2012-04-27T09:38:57.760
> 
> 标签：c++, c, data-structures

我试图从一个名为的函数返回一个数据结构，`urlTokener`其中一个成员是类型数组，另一个成员`char*`是 int。当我在函数中打印数组的值时，`urltokener`我得到了正确的类型，但是我看到在使用返回的数据结构的主函数中，数组不包含正确的值，因为输出不正确（不是与函数中的相同）。似乎该函数没有正确返回数据结构。您能否检查并说出我在以下代码中做错了什么？

```
#include <string.h>
#include <stdio.h>

struct tokenDetail
{
    char* theArray[256];

    int sizeOfArray;
};

tokenDetail urlTokener(const char *,char* );

void main()
{
    // String to be splitted.
    const char* url="/v1/AUTH_abb52a71-fc76-489b-b56b-732b66bf50b1/images?limit=1000&delimiter=/&format=xml"  ;

    tokenDetail newdetails;
    newdetails=urlTokener(url,"?");
    for (int i=0;i<newdetails.sizeOfArray;i++)
    {
        printf("This is in main where size is %d  and the value %s\n",newdetails.sizeOfArray,newdetails.theArray[i]);
    }
}

tokenDetail urlTokener(const char* urlLine,char* delimiter)
{
    char urlArray[256];
    strncpy(urlArray, urlLine, sizeof(urlArray));
    tokenDetail details;
    unsigned int index = 0;
    details.theArray[index] = strtok(urlArray, delimiter);

    while(details.theArray[index] != 0)
    {
        printf("This is in function %s\n",details.theArray[index]);
        ++index;
        details.theArray[index] = strtok(0, delimiter);
    }
    for (int i=0;i<index;i++)
    {
        printf("This is in function 2nd time %s\n",details.theArray[i]);
    }
    details.sizeOfArray=index;
    return details;
} 
```

请注意：我是为 c++ 做的，但我不允许（给我这个任务的人）使用命名空间 std 和库字符串。这就是代码类似于 C 的原因。由于这个限制，我很困惑是标记它 C 还是 C++。所以我在 c 和 c++ 中都标记了它。也许你可以自己决定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T10:09:29.237

您正在使用从返回的指针填充数组`strtok`，而这些指针又是指向您`urlArray`的局部变量的指针，一旦您从函数返回，该局部变量就不再存在。

这是 C 还是 C++？你已经设置了两个标签，解决方案是不同的。在 C++ 中，显而易见的解决方案是将`char*`in `tokenDetail`替换为`std::string`. 在 C 中，它有点复杂。您已在结构中动态分配字符串（使用非标准但广泛可用`strdup`的），并要求客户端释放它们。这里通常的解决方案是返回一个指向动态分配的指针`TokenDetail`，以及一个`freeTokenDetail`客户端需要在返回的指针上调用的函数。这使您可以完全自由地进行分配和释放。（实际上，通常的解决方案是只向 `TokenDetail`客户提供前向声明，并提供他们必须调用以访问其元素的函数。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T10:09:03.947

这里的问题不在于它`tokenDetail`不需要任何手写的复制构造函数、析构函数或赋值运算符。`urlArray`问题是当你离开时局部变量被破坏`urlTokener()`，所以元素指向的位置`details.theArray`变得无效。而且，当然，返回的`tokenDetail`也是如此，它是它的副本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T09:40:57.993

您没有实现复制构造函数、析构函数或赋值运算符。

因为您按值返回，所以调用了复制构造函数`return details;`，但默认构造函数只进行浅拷贝，因此`char* theArray[256];`无法正确复制该字段。

# php - 在 Codeigniter 中为每个控制器启用查询字符串

> ID：10348307
> 
> 赞同：1
> 
> 时间：2012-04-27T09:39:05.390
> 
> 标签：php, codeigniter, frameworks

有没有办法在一个控制器或一个函数中启用查询字符串。例如，我想在搜索功能中使用查询字符串，并在每个其他中使用分段。

有没有办法做到这一点？

我可以做这样的事情：

```
$this->config->set_item('uri_protocol', 'PATH_INFO');
$this->config->set_item('enable_query_strings', TRUE); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T10:55:52.823

实现此目的的一种简单方法是像这样解析服务器查询字符串。

```
$get_data = array();

parse_str($_SERVER['QUERY_STRING'], $get_data); 
```

这会给你留下一个非常不安全的充满数据的数组，所以你应该使用 CI 的安全类来使其更安全；太喜欢了；

```
$get_data = $this->security->xss_clean($get_data); 
```

这并不意味着路由通过 GET 工作，只允许您安全地获取 GET 变量。

# java - 重构以编写“漂亮”的 JUnit 测试

> ID：10348313
> 
> 赞同：3
> 
> 时间：2012-04-27T09:39:13.813
> 
> 标签：java, refactoring, mocking, tdd, mockito

我想澄清 TDD 范围内的重构。

前：

```
class Somclass{
      public void sendMessage(){    
       WebServiceStub stub = new WebServiceStub();     
      ...
      stub.sendMsg();        
      }
    } 
```

后：

```
class Somclass{
private WebServiceStub stub;

  public void sendMessage(){
    ...
  if(stub == null){
   stub = new WebServiceStub();
  }
  ...
  stub.sendMsg();        
  }
} 
```

所以我想验证 sendMsg() 方法并用结果做一些断言。为了有可能模拟这个存根，我将这个存根局部变量移动到实例变量。这样我就可以将模拟存根设置为类并在测试类中进行验证和断言。例如：

```
@Test
public void testSMth(){
  wsProvider.setStub(stubMock);
  verify(stubMock).sendMsg();
  ...asserts
} 
```

这种方法不是线程安全的，我应该做一些并发修改。这种修改可能会导致错误。所以在局部变量approce中有线程安全。

我也可以创建将返回 WebServiceStub 实例的工厂。但是这种方法会产生新的类，因为这种情况很常见。

有一个问题：如何测试这种情况，goot测试成本修改可能会导致错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T09:53:32.487

您的班级应该将`WebService`对象（我拒绝称其为“存根”）作为字段。

```
class Someclass{

  @Resource
  private WebService ws;

  public void sendMessage(){

  ws.sendMsg();        
  }
} 
```

它应该注入您选择的 DI 框架。在您的测试中，您可以将其设置为模拟。正如您指出的那样，这不是线程安全的，因此不需要惰性吸气剂。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T10:32:37.803

使用[构造函数注入](http://misko.hevery.com/2009/02/19/constructor-injection-vs-setter-injection/)来避免未设置依赖项的可能性。这将使您可以轻松地在测试中使用模拟。

如果`WebServiceStub`该类实际上不是线程安全的（但如果`WebServiceStub`由 JAX-WS 生成，那么您应该知道 Metro/jax-ws 存根通常是线程安全的），那么是的，您将不得不使用工厂。这没什么大不了的，也不应该让你慢那么多。如果需要，您可以使用静态内部类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T09:54:49.360

它看起来几乎是正确的，但从不实例化存根，如果存根 == Null。相反，使用 ArgumentNullException。Null 永远不应该被接受为一个有效的论点（除非你有一个非常、非常、非常好的理由）。

# sencha-touch - 煎茶隐藏显示按钮

> ID：10348314
> 
> 赞同：2
> 
> 时间：2012-04-27T09:39:15.043
> 
> 标签：sencha-touch, extjs, sencha-touch-2, sencha-architect

嗨，我是 sencha 的新手，我试图了解 sencha 建筑师/sencha touch 中的一些事情是如何工作的。

我找到了一个项目[http://miamicoder.com/2012/how-to-create-a-sencha-touch-2-app-part-1/](http://miamicoder.com/2012/how-to-create-a-sencha-touch-2-app-part-1/) 我尝试在建筑师中做到这一点。

在这一点上，我尝试在我的应用程序顶部制作工具栏。我有一些按钮可以在我的卡之间切换。

我希望进入我的第一个屏幕的按钮开始隐藏，所以当我在我的第二个屏幕时看起来像回来了。我为我的按钮设置了事件

```
this.setActiveItem(0); 
```

我试过了

```
Ext.select("#mybutton1").hidden = true;
mybutton1.setVisible(false); 
```

但他们不工作......有什么想法吗？

另外，如果有人有任何关于所有内容的教程/示例，请咨询...thanx

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T09:44:49.660

`hidden`财产或`setVisible(false)`不会在这里做。

使用`hide()`功能。

像这样，

```
Ext.getCmp('buttonId').hide() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T09:44:02.053

你试过这个吗？

```
Ext.getCmp('mybutton1').hide() 
```

# objective-c - 获取 USB 硬盘的序列号 (Mac OS)

> ID：10348318
> 
> 赞同：4
> 
> 时间：2012-04-27T09:39:21.100
> 
> 标签：objective-c, xcode, macos, usb

我已经搜索了 stackoverflow.com 和谷歌的答案，但找不到任何东西。

我有属于外部 USB 硬盘 (disk1) 的分区 (disk1s1) 的 bsdName。

我需要找出那个外置硬盘的序列号。我已经尝试了以下方法（查找具有 bsd 名称的服务）：

```
io_service_t io_service = IOServiceGetMatchingService(kIOMasterPortDefault,IOBSDNameMatching(kIOMasterPortDefault, 0, [@"disk1" cStringUsingEncoding:NSUTF8StringEncoding])); 
```

问题在于：返回的服务类型`IOMedia`没有字段`USB Serial Number`。如果我使用`DiskArbitration`框架（这是 的抽象`IOMedia`） ，我最终会遇到同样的问题

所以我尝试了另一种方法：让所有`IOUSBDevice`服务对其进行迭代，然后在上面查找 bsdName 或分区`IOUSBDevice`。不幸的是，没有存储任何关于任何分区或 bsd 名称的信息`IOUSBDevice`。

有人可以帮我解决这个问题吗？

更多信息：

*   XCode 4.3.2
*   Mac OS X 狮子 (10.7.3)

**编辑：** 如果我遍历所有 IOUSBDevice 或 AppleUSBEHCI io_services ，这是输出中有趣的部分：

```
Child props: {
"Bus Power Available" = 250;
"Device Speed" = 2;
IOCFPlugInTypes =     {
    "9dc7b780-9ec0-11d4-a54f-000a27052861" = "IOUSBFamily.kext/Contents/PlugIns/IOUSBLib.bundle";
};
IOGeneralInterest = "IOCommand is not serializable";
IOUserClientClass = IOUSBDeviceUserClientV2;
"Low Power Displayed" = 0;
PortNum = 3;
"Requested Power" = 250;
"USB Address" = 6;
"USB Product Name" = "Mass Storage Device";
"USB Serial Number" = 09021000000000003740385375;
"USB Vendor Name" = JetFlash;
bDeviceClass = 0;
bDeviceProtocol = 0;
bDeviceSubClass = 0;
bMaxPacketSize0 = 64;
bNumConfigurations = 1;
bcdDevice = 2560;
iManufacturer = 1;
iProduct = 2;
iSerialNumber = 3;
idProduct = 4096;
idVendor = 34148;
kHasMSCInterface = 1;
locationID = "-99418112";
sessionID = 209792844564562;
uid = "USB:85641000003740385375"; 
```

}

如您所见，我得到了序列号，但我无法知道该设备具有哪个 bsd 名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:41:26.633

我有一个关于如何在 C++ 中执行此操作的教程。给定一个 io_service_t，也就是下面代码片段中的 usbDevice，你会得到这样的 bsdName：

```
 bsdName = ( CFStringRef ) IORegistryEntrySearchCFProperty( 
        usbDevice,
        kIOServicePlane,
        CFSTR( kIOBSDNameKey ),
        kCFAllocatorDefault,
        kIORegistryIterateRecursively ) 
```

这是在 C++ 中获取 USB 闪存盘序列号的代码，但它可能适合您的目的：

[http://oroboro.com/usb-serial-number-osx/](http://oroboro.com/usb-serial-number-osx/)

# java - 在java中使用正则表达式查找句子中的重复模式

> ID：10348322
> 
> 赞同：3
> 
> 时间：2012-04-27T09:39:34.600
> 
> 标签：java, regex

我想在java中使用正则表达式在以下句子中找到重复模式：

`username|s:5:"derick256";privilege|s:5:"derick542";premium|s:5:"derik542";`

我需要提取以下内容，甚至可能更多，所以我需要一个易于扩展的解决方案......

1.  用户名`derick256`
2.  特权`derick 542`
3.  优质的`derik542`

这是我的代码...

```
String re1="((?:[a-z][a-z0-9_]*))"; // Variable Name 1
String re2=".*?";   // Non-greedy match on filler
String re3="(?:[a-z][a-z0-9_]*)";   // Uninteresting: var
String re4=".*?";   // Non-greedy match on filler
String re5="((?:[a-z][a-z0-9_]*))"; // Variable Name 2

Pattern p = Pattern.compile(re1+re2+re3+re4+re5,Pattern.CASE_INSENSITIVE | Pattern.DOTALL);
Matcher m = p.matcher(strLine);
if (m.find()){
    String word1=m.group(1);
    String word2=m.group(2);
    System.out.print("("+word1.toString()+")"+"("+word2.toString()+")"+"\n");
} 
```

但我只得到了`username derick256`. 谁能帮助我理解错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T09:42:00.610

更改`if(m.find())`为`while(m.find())`。

# extjs4 - ExtJs 4 中的 Json 解析

> ID：10348333
> 
> 赞同：1
> 
> 时间：2012-04-27T09:40:30.693
> 
> 标签：extjs4

我是 ExtJs 4 的新手。我正在使用 Json 填充组合框，如下所示，

**JSON：**

```
{
   "Patient": [
      {
         "id": 1,
         "emergencyPhone": "1234567890",
         "primaryInsuranceId": {
            "id": 1
         },
         "secondaryInsuranceId": {
            "id": 2
         },
         "personalInfo": {
            "id": 2,
            "firstName": "James",
            "lastName": "Anderson",
            "address": {
               "state": {
                  "id": "2",
                  "stateName": "Alaska",
                  "code": "AK"
               },
               "zipcode": 12345,
               "country": "USA",
               "telephone": "1234567890",
               "alternatePhone": "1234567890",
               "faxNumber": "1234567890",
               "email": "james@gmail.com"
            },
            "gender": "Male",
            "dob": "2012-04-02",
            "ssn": 123456789,
            "race": "race"
         },
         "clearinghouseId": {
            "id": 2,
            "name": "ALPHA Clearing House"
         },
         "provider": []
      }
   ]
} 
```

**代码：**

```
Ext.define('patientList', {
    extend: 'Ext.data.Model',
    fields: ['id', 'personalInfo']
});

var patient = Ext.create('Ext.data.Store', {
    model: 'patientList',
    autoLoad: true,
    proxy: {
        type: 'ajax',
        url: url + '/lochweb/loch/patient/getAll',
        reader: {
            type: 'json',
            root: 'Patient'
        }
    }
}); 
```

**组合框**

```
{
    xtype: 'combo',
    fieldLabel: 'Patient',
    name: "patientId",
    id: "patientId",
    queryMode: 'local',
    store: patient,
    displayField: 'personalInfo.firstName',
    valueField: 'id',
    emptyText: "Select",
    editable: false,
    allowBlank: false
} 
```

当我单击组合框时，它显示名字，但选择后，它没有显示在下拉列表中。任何帮助

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T18:17:26.187

像这样更改您的**模型**：

```
Ext.define('patientList', {
    extend: 'Ext.data.Model',
    fields: [
        { name: 'myId', mapping: 'personalInfo.id' },
        { name: 'myFirstName', mapping: 'personalInfo.firstName' }
    ]
}); 
```

然后像这样改变你的**组合**：

```
{
    xtype: 'combo',
    fieldLabel: 'Patient',
    name: "patientId",
    id: "patientId",
    queryMode: 'local',
    store: patient,
    displayField: 'myFirstName',  // Change This
    valueField: 'myId',           // Change This
    emptyText: "Select",
    editable: false,
    allowBlank: false
} 
```

阅读有关[映射](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.Field-cfg-mapping)和[转换](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.Field-cfg-convert)配置的更多信息。

# android - 如何计算表中的行数？

> ID：10348337
> 
> 赞同：0
> 
> 时间：2012-04-27T09:41:18.767
> 
> 标签：android, sqlite

我试过这个来获取行数。但是程序挂了。

```
private int countbaglist()
{
    int count = 0;
    SQLiteDatabase db = datasource.getWritableDatabase();
    Cursor cursor = db.rawQuery(
        "select count(*) from shoplist where itemname=?",
        new String[] { String.valueOf("itemname") });

    while(cursor.moveToFirst())
    {
        count = cursor.getCount();
    }
    return count;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T09:44:56.947

试试这个链接你的答案

[如何使用 SQLite 在 Android 中获取查询的行数？](https://stackoverflow.com/questions/6351606/how-to-get-the-row-count-of-a-query-in-android-using-sqlite)

删除以下代码中的 while 条件：

```
 while(cursor.moveToFirst()){
    count = cursor.getCount();
  } 
```

替换以下代码：

```
count = cursor.getInt(0) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T09:47:32.457

它挂了，因为你的`while`循环永远不会退出。用`while`一次性`if`检查代替。另外，请注意，您需要读取从查询返回**的整数值**`COUNT`，而不是游标的行数，游标的行数始终为 1。

```
if (cursor.moveToFirst())
    count = cursor.getInt(0); 
```

# jetty - Jetty 8.1.2 启动延迟

> ID：10348338
> 
> 赞同：4
> 
> 时间：2012-04-27T09:41:23.370
> 
> 标签：jetty

类似于问题 [Jetty startup delay](https://stackoverflow.com/questions/2398268/jetty-startup-delay) the startup time for a Jetty 8.1.2 raises 随着 WEB-INF/lib 目录中依赖项数量的增加。（20mb ~60 到 90 秒）

启用 DEBUG 后（-Dorg.eclipse.jetty.LEVEL=DEBUG，另请参阅此 Answer [Enable Jetty DEBUG](https://stackoverflow.com/a/2398488/1180279)），输出中大量出现以下行：

```
2012-04-27 11:13:38.095:DBUG:oeju.Scanner:scanned [/home/.../workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmpX/webapps]: {} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T07:19:36.757

这是自 Servlet-API 2.5 以来的正常过程，它正在所有类和罐子中寻找与 Servlet 相关的注释。通常可以使用 web.xml 中的“元数据完成”选项来避免这种情况：

```
<web-app metadata-complete="true" ...> 
```

在 Jetty 8.1.2 中，这被 AnntionConfiguration 类识别为由于启动，但扫描过程无论如何都会发生。这是一个已知的 ISSUE [Jetty 8.1.2 扫描类路径上的所有类，如果类路径上有 >= 1xServletContainerInitializer 和 HandlesTypes，则不管](https://jira.codehaus.org/browse/JETTY-1503)Jetty 8.1.2 的 metadata-complete="true"。

一种解决方法是使用一种模式来限制将包含在扫描过程中的 JAR 文件。例如，在 Eclipse 中，您可以将以下代码段附加到“/home/.../workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmpX/contexts/appname”中的“jetty-context.xml” .xml”文件：

```
<Call name="setAttribute">
    <Arg>org.eclipse.jetty.server.webapp.WebInfIncludeJarPattern</Arg>
    <Arg>.*/.*myPrefixedJarToScan1-[^/]\.jar$|.*/.*myPrefixedJarToScan2-[^/]\.jar$</Arg>
</Call> 
```

# php - 带有 cURL 的 vBulletin 插件

> ID：10348340
> 
> 赞同：0
> 
> 时间：2012-04-27T09:41:42.160
> 
> 标签：php, curl, vbulletin

我已经尝试了以下指南，以使用[本手册](https://www.vbulletin.com/docs/html/templates_externalfiles)将外部文件包含在模板中。

我用下面的代码创建了一个插件，并使用`$includedphp`变量将其包含在模板中：

```
ob_start();
include('http://foo.bar.com/external.php');
$includedphp = ob_get_contents();
ob_end_clean(); 
```

后来我发现`include()`在服务器配置中被禁用了。我的另一个选择是使用`cURL`启用的：

```
$curl = curl_init( "http://foo.bar.com/external.php" );
curl_setopt( $curl, CURLOPT_RETURNTRANSFER, TRUE );
$includedphp = curl_exec( $curl );
curl_close( $curl ); 
```

它不工作。它只是在我的模板中打印空白。使用的挂钩：`"global_start"`. vBulletin 版本：3.8。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:05:11.413

您不能使用 curl 作为包含的替代品。怎么可能包含被禁用？我看到您在包含代码上使用 http://，如果您使用非 http 怎么办？

```
include(DIR.'/external.php'); 
```

注意：DIR 常量包含 vb4 上的 vbulletin 论坛安装根目录，所以我不确定 vb3。

# c++ - 如果矩形中没有足够的高度，则尝试终止 drawText(Win32) 绘制的文本

> ID：10348344
> 
> 赞同：0
> 
> 时间：2012-04-27T09:41:56.720
> 
> 标签：c++, windows, win32gui, drawtext

我正在尝试使用 drawText 绘制多行文本。我可以通过传递 DT_WORD_ELLIPSIS | 来保持宽度不变。DT_WORDBREAK 标志，但如果字符串很长，则文本将在最后一行垂直剪切。

如果它不能适合整个高度，如何确保 drawText 不会绘制最后一行？

目前我将这些标志传递给 drawText - DT_NOPREFIX | DT_WORD_ELLIPSIS | DT_LEFT | DT_WORDBREAK | DT_EXTERNALEADING

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T01:21:49.150

指定`DT_EDITCONTROL`标志。根据[MSDN](http://msdn.microsoft.com/en-us/library/dd162498.aspx)文档：

> **DT_EDITCONTROL**
> 
> 复制多行编辑控件的文本显示特征。具体来说，平均字符宽度的计算方式与编辑控件相同，**并且该函数不显示部分可见的最后一行**。

# zend-framework - 如何将 zend 框架与 cakephp 2.0 集成以进行搜索优化？

> ID：10348350
> 
> 赞同：0
> 
> 时间：2012-04-27T09:42:02.463
> 
> 标签：zend-framework, cakephp, search

是否可以将 zend 框架与 cakephp 2.0 集成？我想在使用 zend 框架的 cakephp 2.0 web 应用程序中具有搜索功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:44:24.857

定义您对搜索的要求。这个问题很笼统。

顺便说一下 CakePHP 的搜索插件：[CakeDC Search](https://github.com/cakedc/search)

[创建搜索索引的插件](https://github.com/neilcrookes/searchable)。

也许它会做你想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T14:57:34.973

实际搜索的最佳解决方案是使用 Apache Solr。它是一个搜索引擎，可以通过其 Web 服务接口与任何框架一起使用。

[http://lucene.apache.org/solr/](http://lucene.apache.org/solr/)

它基于 Zend Framework Search 使用的名为“Lucence”的相同库，期望 Apache Solr 将“Lucence”功能公开为 Web 服务。非常好，易于使用。

# jquery-ui - 使用 jquery-ui 编辑可排序的可选 li

> ID：10348351
> 
> 赞同：1
> 
> 时间：2012-04-27T09:42:06.477
> 
> 标签：jquery-ui, jquery-ui-sortable, jquery-ui-selectable

我想允许编辑可选/可排序列表中的列表项。

这是一个列表示例： [http](http://jsbin.com/aweyo5) : //jsbin.com/aweyo5 credits to rdworth

所以我会允许用户编辑项目吗？我知道如何更新/更改他们的文本，但我如何让用户直接将文本输入到列表项中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:11:11.083

这是一个有效的答案：

```
<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.8.19.custom.min.js"></script>
<script type="text/javascript" src="jeditable.js"></script>
<script type="text/javascript">
    $(document).ready(function()
    {
        function makeEditable()
        {
            $('.editable').editable(function(value, settings)
            { 
                /* Debug

                 console.log(this);
                 console.log(value);
                 console.log(settings);
                */
                return(value);
            });
        }
        function makeDeletable()
        {
            $('a.delete').click(function(e) 
            {
                e.preventDefault();
                $(this).parent().remove();
            });
        }
        function addTopic(topicName)
        {
            $("ul.#topics").append('<li><span class="editable">' + topicName +'</span><a class="delete" href="">delete</a></li>');
            makeEditable();
            makeDeletable();
        }
        makeEditable();
        makeDeletable();

        $( "#topics" ).sortable();
        $("form").submit(function() {
            addTopic($('input[name=topic]').val());
            return false;
        });
        $('a#add').click(function(e)
        {
            e.preventDefault();
            addTopic($('input[name=topic]').val());
        });
    });
</script>

<ul id="topics">
    <li><span class="editable">topic 1</span><a class="delete" href="">delete</a></li>
    <li><span class="editable">topic 2</span><a class="delete" href="">delete</a></li>
    <li><span class="editable">topic 3</span><a class="delete" href="">delete</a></li>
</ul>
<form>
New topic: <input type="text" name="topic" /><br />
</form> 
<a id="add" href="">add</a> 
```

希望它有帮助:) 你可以在这里得到 jeditable：http: [//www.appelsiini.net/projects/jeditable](http://www.appelsiini.net/projects/jeditable)

# android - 在字符串Android ndk中获取符号

> ID：10348355
> 
> 赞同：0
> 
> 时间：2012-04-27T09:42:24.023
> 
> 标签：android, android-ndk, java-native-interface

在ndk中，我想将一些ascii值转换为字符串。我得到了结果，但是字符串后面有一些符号

这是我得到的答案

sint#j8na8̀

我的代码是

```
 jstring Java_com_magsonwink_utils_security_En_invokeNativeFunction(
    JNIEnv* env, jobject javaThis) {

int i = 0;

int a[3]= {
        115,
        105,
        110,
};
char b[3];
for (i = 0; i < 3; i++) {
        b[i] = (char) a[i];

    }
 jstring result = (*env)->NewStringUTF(env, b);

return result; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:51:52.380

您不必对字符串进行空终止吗？尝试

```
jstring Java_com_magsonwink_utils_security_En_invokeNativeFunction(
    JNIEnv* env, jobject javaThis) {

   int i = 0;

   int a[3]= {
        115,
        105,
        110,
   };
   char b[4];
   for (i = 0; i < 3; i++) {
        b[i] = (char) a[i];

    }
   b[3] = 0;
   jstring result = (*env)->NewStringUTF(env, b);

   return result;
} 
```

# asp.net-mvc - ASP.NET MVC 自定义授权：AuthorizeAttribute

> ID：10348356
> 
> 赞同：0
> 
> 时间：2012-04-27T09:42:27.540
> 
> 标签：asp.net-mvc, authorization, roles

我正在关注这个教程[链接](http://schotime.net/blog/index.php/2009/02/17/custom-authorization-with-aspnet-mvc/)

我有一个表**users** { *iduser, user, pass, role* }

我正在使用这个用户：`string[] users = db.users.Select(t => t.user).ToArray();`

而不是：`string[] users = Users.Split(',');`可以吗？

我的问题是角色：`SiteRoles role = (SiteRoles)httpContext.Session["role"];`

问：我在哪里为我的用户存储角色？

我的简化帐户控制器：

```
 [HttpPost]
    public ActionResult Login(LoginModel model)
    {
        HeliosEntities db = new HeliosEntities();       
        if (ModelState.IsValid)
        {
            bool userok = db.users.Any(t => t.user == model.UserName && t.pass == model.Password);
            if (userok == true) 
            {
                FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
                return RedirectToAction("Index", "Home");
            }
            {
                ModelState.AddModelError("", "Incorect password or user!");
            }
        }

        return View();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:54:03.087

快速查看上面的链接表明它正在从会话中获取用户的角色：

```
(SiteRoles)httpContext.Session["role"]; 
```

所以需要在用户登录时设置会话值，例如：

```
var userRole = Roles.Admin | Roles.User;
httpContext.Session["role"] = role; 
```

我不知道您将有关用户角色的信息存储在哪里。

# excel - 如何根据单元格的值与 Excel 中相邻单元格的值相比为单元格着色？

> ID：10348357
> 
> 赞同：0
> 
> 时间：2012-04-27T09:42:28.990
> 
> 标签：excel

想象一下我有一张这样的桌子：

```
 | A | B | C 
 --------------
 1 | 3 | 6 | 5 
 2 | 5 | 5 | 7
 3 | 2 | 3 | 3 
```

我想要：

1.  将单元格的值与其上方单元格的值进行比较
2.  根据此比较为单元格的背景着色

所以：

*   如果我将 A2 的值与 A1 进行比较，5 > 3，A2 的背景应该是红色
*   如果我将 A3 的值与 A2 进行比较，2 < 5，A3 的背景应该是绿色
*   如果我将 B2 的值与 B1 进行比较，5 < 6，B2 的背景应该是绿色
*   如果我将 B3 的值与 B2 进行比较，3 < 5，B3 的背景应该是绿色
*   如果我将 C2 的值与 C1 进行比较，7 > 5，C2 的背景应该是红色
*   如果我将 C3 的值与 C2 进行比较，3 < 7，C3 的背景应该是绿色

关于如何做这样的事情的任何想法？

在此先感谢并致以最诚挚的问候，

迈布拉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T10:34:54.330

要为单元格着色，请选择范围 A2:C3 并从功能区的主页选项卡中进行选择：

*条件格式|突出显示单元格规则|大于...*

使用显示的设置，然后重复*小于...*使用绿色文本。

![在此处输入图像描述](../Images/dc5ccf451159952354d87bbcae3c7518.png)

![在此处输入图像描述](../Images/034be3be5431f7d79ea8e46a0d792ca7.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T06:38:34.103

除了 Lori 的回答，我还想补充一件事。

而不是使用 2 个条件格式规则（红色 + 绿色），只需将背景颜色设置为您的默认值（例如绿色）并使用 1 个条件格式规则将单元格变为红色。

# javascript - javascript中的跨浏览器水平和垂直滚动事件

> ID：10348358
> 
> 赞同：2
> 
> 时间：2012-04-27T09:42:30.693
> 
> 标签：javascript, jquery

我想在javascript中捕捉鼠标滚轮、触摸板（以及mac）的事件——水平和垂直——最好是给出一个deltaX和deltaY。有没有办法做到这一点？我找到了一个页面 - [http://www.thehorizo](http://www.thehorizontalway.com/) ​​ntalway.com/ 似乎可以在触摸板上水平工作。我要求在浏览器中不显示滚动条的情况下触发事件。

到目前为止，我还没有找到一种方法来实现这种横向和纵向的跨浏览器。有什么提示吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T11:00:11.387

[http://www.adomas.org/javascript-mouse-wheel/](http://www.adomas.org/javascript-mouse-wheel/) 给出了最好的解决方案。它已被用于许多地方，包括 jquery mousewheel 插件。

# haskell - 哈斯克尔。哪里有两个定义

> ID：10348360
> 
> 赞同：3
> 
> 时间：2012-04-27T09:42:32.320
> 
> 标签：haskell

有什么方法两个使用两个或多个块的'where'？像这样的东西：

```
plus:: Int -> Int -> Int
plus a b = x + y
         where x = f1 a
         where y = f2 b 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-27T09:44:17.227

除第一个之外的所有内容`where`：

```
plus:: Int -> Int -> Int
plus a b = x + y
         where x = f1 a
               y = f2 b 
```

注意

*   定义必须相互一致
*   您应该只使用空格而不是制表符来缩进定义（一些文本编辑器不使用制表符的标准制表符宽度，导致 ghc 认为最后一行缩进比实际缩进更多或更少；任何一种方式都会导致错误）

# android - Android：R.java 丢失

> ID：10348361
> 
> 赞同：1
> 
> 时间：2012-04-27T09:42:36.590
> 
> 标签：android

> **可能重复：**
> [我的项目中没有生成 R.java 文件](https://stackoverflow.com/questions/4085959/no-generated-r-java-file-in-my-project)

长话短说：我正在尝试记事本示例代码，但没有生成我的 R.java 类。我尝试了以下帖子的建议：

*   清理项目（[在 Eclipse 中为 Android 开发：R.java 未生成](https://stackoverflow.com/questions/2757107/developing-for-android-in-eclipse-r-java-not-generating)，[我的项目中没有生成 R.java 文件](https://stackoverflow.com/questions/4085959/no-generated-r-java-file-in-my-project)）
*   寻找对 android.R.* 的引用；（[R 无法解决 - Android 错误](https://stackoverflow.com/questions/885009/r-cannot-be-resolved-android-error)）
*   检查我的 xml 文件是否有错误

但我仍然没有 R.java 类。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:07:22.167

重新启动 Eclipse 并再次重新导入项目并构建。Eclipse 有时会与 R 生成的类发生冲突。

# c# - 如何通过反射将字符串分配给整数字段

> ID：10348363
> 
> 赞同：5
> 
> 时间：2012-04-27T09:42:48.010
> 
> 标签：c#

所以这是让我伤心的代码：

```
private static void AssignId(object entity, string id)
        {
            var idFieldInfo = entity.GetType().GetProperties().SingleOrDefault(it => it.GetCustomAttributes(typeof(KeyAttribute), false).Any());
            if (idFieldInfo != null)
            {
                var type = idFieldInfo.PropertyType;

                if (type == typeof(byte))
                {
                    idFieldInfo.SetValue(entity, Convert.ToByte(id), null);
                }
                else if (type == typeof(short))
                {
                    idFieldInfo.SetValue(entity, Convert.ToInt16(id), null);
                }
                else if (type == typeof(int))
                {
                    idFieldInfo.SetValue(entity, Convert.ToInt32(id), null);
                }
                else if (type == typeof(long))
                {
                    idFieldInfo.SetValue(entity, Convert.ToInt64(id), null);
                }
                else if (type == typeof(sbyte))
                {
                    idFieldInfo.SetValue(entity, Convert.ToSByte(id), null);
                }
                else if (type == typeof(ushort))
                {
                    idFieldInfo.SetValue(entity, Convert.ToUInt16(id), null);
                }
                else if (type == typeof(uint))
                {
                    idFieldInfo.SetValue(entity, Convert.ToUInt32(id), null);
                }
                else if (type == typeof(ulong))
                {
                    idFieldInfo.SetValue(entity, Convert.ToUInt64(id), null);
                }
            }
        } 
```

有没有更聪明的方法来分配一个字符串值对应的整数

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-27T09:45:33.927

您可以使用`Convert.ChangeType`

```
if (idFieldInfo != null)
{
     var type = idFieldInfo.PropertyType;
     idFieldInfo.SetValue(entity, Convert.ChangeType(id, type), null);
} 
```

# sql-server - 查询在跟踪中显示的持续时间值大于查询本身运行时的值

> ID：10348368
> 
> 赞同：5
> 
> 时间：2012-04-27T09:43:10.310
> 
> 标签：sql-server, database, performance, trace

sql server profiler 跟踪中的持续时间值显示的查询值比我运行相同查询并查看查询的执行持续时间时更大。为什么会这样，或者我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:48:29.597

多大？您知道在探查器中，持续时间以微秒为单位存储，对吗？所以 1000000 意味着 1 秒。

除此之外，您还需要考虑其他事项，例如执行计划的重用，甚至 SSMS 是一个 UI 工具，并且在将查询发送到数据库之前可能会对您的查询执行其他操作，并且分析器直接从在数据库上执行，这可以解释几秒钟的执行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T10:28:50.530

版本是动态生成的 SP 的分析部分吗？

例如

```
..
@sql = 'select * from ' + @tablename
exec (@sql) 
```

大多数 SP 在第一次执行后就进行了预编译，但带有非静态代码（如上面的代码片段）的 SP 永远不会被预编译。但是如果在查询窗口中你正在运行

```
select * from the_table_name 
```

这可能会显示您所看到的差异。有点猜测，虽然我很害怕。也许你可以告诉我们更多关于查询是如何运行的，如果它是 SP 的一部分等等。

# java - 如何优雅地检测 SSL

> ID：10348370
> 
> 赞同：4
> 
> 时间：2012-04-27T09:43:16.027
> 
> 标签：java, http, ssl

我有一个可以绑定到 ssl 或纯 http 的 Web 服务。配置为知道服务器主机和端口的 java 客户端。[当客户端连接时，我构建了像http://host:port/service](http://host:port/service)这样的服务器端点。客户端不知道服务器是否使用 ssl - 服务器始终绑定到单个端口，因此它是否安全。现在，问题是如何让客户端在不引入其他参数的情况下发现这一点？我可以挑战普通的 http 请求，然后在某个例外情况下回退到 ssl（反之亦然）吗？或者我必须明确地为客户端引入新的连接参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T10:00:56.147

在服务器端，您可以使用像[Grizzly 的端口统一](http://jfarcand.wordpress.com/2006/11/07/one-tcp-port-to-rule-them-all/)实现这样的机制。这可用于在同一端口上提供 HTTP 和 HTTPS。这依赖于这样一个事实，即在这两种情况下，客户端首先交谈，然后发送 HTTP 请求或 SSL/TLS 客户端 Hello 消息。这在服务器端非常方便（尽管我不确定我是否建议在同一个端口上运行两个协议）。

从客户的角度来看（这就是您要问的），其后果是：

*   客户先说话的事实意味着它总是必须先尝试。如果您尝试将 SSL/TLS 与纯 HTTP 服务通信，反之亦然，预计会出现某种异常。
*   如果服务器使用端口统一，那么您将无法可靠地找出答案。

除了端口统一（毕竟这是一种罕见的情况），您可以尝试缓存过去尝试的结果。

**更根本的是，从安全的角度来看，不知道应该使用哪种协议会引入一个漏洞：您的系统将对降级攻击开放**（与[盲目依赖自动重定向](https://webmasters.stackexchange.com/a/28443/11628)类似）。如果您的用户代理支持[HSTS](http://en.wikipedia.org/wiki/HTTP_Strict_Transport_Security)，那么值得研究一下（尽管它需要用户代理记住哪些站点将与 HTTPS 一起使用）。

无论哪种方式，如果您担心安全性，您**必须**配置客户端以了解何时使用`https://`.

# emacs - emacs 无法识别子目录中的 info 文件

> ID：10348382
> 
> 赞同：4
> 
> 时间：2012-04-27T09:44:01.997
> 
> 标签：emacs, info

我使用安装了一个附加信息文件

```
install-info /usr/share/info/asymptote/asymptote.info.gz /usr/share/info/dir 
```

`info`从命令行通过命令完全可见，即`info asymptote`正确返回 asymptote/asymptote.info.gz 的内容。当我使用命令时，顶部节点中的 emacs 也可以看到它`M-x info`，但是当我尝试转到`asymptote`节点时，它会抱怨“信息查找文件：信息文件渐近线不存在”。该问题看起来类似于[信息索引（在 emacs 内部和不带 emacs 中）](https://stackoverflow.com/questions/8122214/info-indexing-within-and-without-emacs)，尽管它并不完全相同。似乎 emacs 中的 info 命令无法识别子目录，而原始`info`命令可以。是否可以强制 emacs 以相同的方式运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T08:15:25.443

我的理解是，主目录列表是根据在变量目录下找到的文件`M-x info`构建的，并且在搜索命名信息文件时使用相同的变量；所以这有点奇怪。`dir``Info-directory-list`

您应该验证其中`Info-suffix-list`包含 的条目`.info.gz`，但这应该是非常标准的，所以我最好的猜测是`dir`添加的条目`install-info`并不完全正确（或不支持，无论如何）。

你能告诉我们 asymptote 的条目是什么样的`/usr/share/info/dir`吗？

# jakarta-ee - 使用 @Scope("conversation.access") 替代 a4j:mediaOutput

> ID：10348386
> 
> 赞同：1
> 
> 时间：2012-04-27T09:44:24.583
> 
> 标签：jakarta-ee, myfaces, ajax4jsf

我在我的视图中使用 a4j:mediaOutput 和带有 @Scope("conversation.access") 的 bean

我从 mediaOutput 调用的绘制函数得到 NullpointerException。看来这两个（mediaOutput 和 conversation.access）不能一起工作.. 至少我没有找到解决方案。有谁知道如何让它工作？

我已经尝试添加

s:conversationId value="#{conversation.id}"/> 到 mediaOutput，但它对我不起作用。

提前致谢

# networking - 手动解码 IP 数据报转储

> ID：10348390
> 
> 赞同：-1
> 
> 时间：2012-04-27T09:44:36.713
> 
> 标签：networking, ip, ipv4, datagram

我正在为这个主题练习问题，我遇到了这个问题：

查看下面包含 TCP 段的 IP 数据包的 40 字节转储（十六进制）。

```
45 20 03 c5 78 06 00 00 34 06 ca 1f d1 55 ad 71 c0 a8 01 7e
00 50 9a 03 3e 64 e5 58 df d0 08 b3 80 18 00 de 00 02 00 00 
```

识别 IP 和 TCP 标头的所有字段。

[资料来源： http](http://www.eng.utah.edu/~cs5480/homeworks/hw3_soln.pdf) ://www.eng.utah.edu/~cs5480/homeworks/hw3_soln.pdf 的第一季度

现在我面前确实有 IPv4 的数据报格式布局。我不明白的是，在解决方案中它说标头长度为 20 字节，但根据格式，位 4-7 对应于标头长度，即 0x03c5 = 965 字节。然而，在解决方案中，965bytes 是总数据报长度。

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:18:34.323

看看这个转储你的标题

[https://metacpan.org/pod/distribution/Data-HexDump-Range/scripts/hdr_examples.pod#IPV4-header](https://metacpan.org/pod/distribution/Data-HexDump-Range/scripts/hdr_examples.pod#IPV4-header)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T09:57:16.793

数字！= 位。

假设从零开始计数，0x03c5 是数据中的十六进制数字 4-7。

位 4-7 将是较早出现的十六进制 5。此标头值表示标头中 32 位字的数量，因此您必须乘以 4 才能得到 20 作为字节数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T09:55:27.453

根据链接的PDF文档：

```
IP header: IP version 4, Header Length: 20 bytes, ToS = 20, Total Length = 0x03c5 =
965 bytes, ... 
```

对我来说似乎很清楚 - 20 字节的标头长度，965 字节的总长度（与[Wikipedia 上的 IPv4 标头](http://en.wikipedia.org/wiki/IPv4_header#Header)非常匹配）。

# optimization - 测试两个东西的性能，我应该使用哪些标志（使用 gcc）？-O0、-O2 还是 -g？

> ID：10348397
> 
> 赞同：-1
> 
> 时间：2012-04-27T09:44:56.843
> 
> 标签：optimization, gcc

当我编写一个例程来测试两个东西的性能时，我应该使用哪些优化标志？-O0、-O2 或 -g ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T06:04:01.490

您应该使用每个设置来测试代码的性能。理想情况下，数字 -O0、-O1、-O2、-O3 越大，意味着更好的性能，因为有更多/更好的优化，但情况并非总是如此。

同样，取决于您的代码是如何编写的，其中一些可能会以您不期望从语言或编译器或两者兼而有之的方式删除。因此，您不仅需要测试代码的性能，还需要实际测试从代码生成的程序，看看它是否按照您的想法执行。

绝对没有一种优化设置可以为可由该编译器编译的任何代码提供最佳性能。您必须在特定系统上测试设置和编译器，以验证该系统的代码确实运行得更快。您如何测试该性能充满了许多陷阱和其他产生错误的问题，您很容易误解结果。所以你必须小心你如何测试你的表现。

对于 gcc，人们通常说 -O3 使用起来有风险，而 -O2 是最好的性能/安全性。在大多数情况下，-O2 的使用足以清除许多错误。-O2 并不总是产生最快的代码，但它通常产生比 -O0 和 -O1 更快的代码。使用调试器可能会破坏优化或将其全部删除，因此切勿使用基于调试器的构建或使用调试器来测试性能。像用户使用系统一样在系统上进行测试，如果用户在运行您的程序时使用调试器，则以这种方式进行测试，否则不要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T09:51:55.823

在 GCC`-O0`中完全禁用编译器代码优化。`-g`将调试信息添加到可执行文件，以便您可以使用调试器。

如果要启用速度优化，请使用标志`-O1`或`-O2`. 有关`man gcc(1)`更多信息，请参阅。

如果您想测量代码的性能，请使用[分析器](http://en.wikipedia.org/wiki/Profiling_%28computer_programming%29)，例如 valgrind 或 gprof。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T10:04:51.227

实际上，如果您关心性能，则绝​​对应该使用**`-O3`**. 为什么要放弃潜在的优化？

`-O2`是的，和之间存在微小但可测量的差异`-O3`。

`-g`不是优化标志，但它可以阻止优化，因此必须为代表性基准禁用它。

# c# - 根据网格宽度缩放 ItemsControl 矩形

> ID：10348398
> 
> 赞同：0
> 
> 时间：2012-04-27T09:45:03.760
> 
> 标签：c#, .net, wpf

**编辑：** 我将十六进制值（字符串）转换为画笔，因此它没有采用我的颜色，如下所示：

```
(Color)ColorConverter.ConvertFromString(colorArray[0]) 
```

剩下的唯一问题是缩放（带有颜色）。

我的彩条似乎是透明的（再次），但现在每个条都附加了正确的颜色。同样在我的程序启动时，所有 6 个条都显示（但它们不应该显示，因为它还没有任何价值）。

**代码：**

```
<Border Height="30" Margin="15" Grid.RowSpan="6" >
                <Border.Background>
                    <LinearGradientBrush StartPoint="0.0,0" EndPoint="1.0,0">
                        <GradientStopCollection>
                            <GradientStop Offset="0.0" Color="{Binding FillBar, UpdateSourceTrigger=PropertyChanged}" />

                            <GradientStop Offset="{Binding Value, UpdateSourceTrigger=PropertyChanged}" />

                        </GradientStopCollection>
                    </LinearGradientBrush>
                </Border.Background>
            </Border> 
```

![在此处输入图像描述](../Images/99d4402d77e1647aad212e5e677c7258.png)

我究竟如何摆脱酒吧中间/末端的透明褪色？

当我尝试向第二个偏移添加相同的颜色时，我得到全长条（100％）并且缩放再次无效。

* * *

突然间，控件也有一个空的部分。当控件没有转动 180 度时，这种行为根本不会发生！

我有一个`ItemsControl`使用 a`DataTemplate`所以项目显示为矩形。itemsControl 也被翻转，因此矩形显示在正确的方向。

```
<DataTemplate x:Key="GrafiekItemTemplate">
            <Border Width="Auto" Height="Auto">
                <Grid>
                    <Rectangle StrokeThickness="0" Height="30"  
                               Margin="15" 
                               HorizontalAlignment="Right" 
                               VerticalAlignment="Bottom"
                               Width="{Binding Value, UpdateSourceTrigger=PropertyChanged}" 
                               Fill="{Binding Fill, UpdateSourceTrigger=PropertyChanged}">
                        <Rectangle.LayoutTransform>
                            <ScaleTransform ScaleX="20" />
                        </Rectangle.LayoutTransform>
                    </Rectangle>
                </Grid>
            </Border>
        </DataTemplate>

      <ItemsControl x:Name="icGrafiek"  
            Margin="-484,3,0,0" 
            ItemsSource="{Binding Source={StaticResource Grafiek}}"
            ItemTemplate="{DynamicResource GrafiekItemTemplate}" 
            RenderTransformOrigin="1,0.5" Grid.RowSpan="6">
            <ItemsControl.RenderTransform>
                <TransformGroup>
                    <ScaleTransform ScaleY="-1" ScaleX="1"/>
                    <SkewTransform AngleY="0" AngleX="0"/>
                    <RotateTransform Angle="180"/>
                    <TranslateTransform/>
                </TransformGroup>
            </ItemsControl.RenderTransform>
        </ItemsControl> 
```

绑定`Fill`给出了这些条（矩形）的大小。

itemsControl 本身放置在具有 2 列和 6 行的 Grid 内。我已将控件的行跨度设置为 6，列跨度设置为 1。

**我想要达到的目标：**

itemsControl 的最大值应该占据网格第二列的整个长度。目前我正在做一些计算（这会返回一个带有值的列表）以传递给`Fill`绑定，并将这个结果乘以例如 100 或 1000。但这是我想避免的硬编码。

我如何确保这些长度是动态的，而不是用我乘以 2000 来填充我的屏幕的值填充它们。例如网格中第二列的大小。

我也可以`Blend`使用这个布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:23:39.230

1）不要用矩形，一个Border就够了（Borders有填充），Borders有内容。
2）在绑定中使用标准化值 NValue = Value/MaxValue（介于 0.0 和 1.0 之间）
3）您可以通过两种方式实现您想要的：
1）在 DataTemplate 中使用带有两列的网格。
第一个列宽绑定到 NormalizedValue（单位是星号 (*)），另一个绑定到 (1-NormalizedValue)（单位也是星号 (*)）。
让您的 ViewModel 将您的 SWNVALue = NValue 作为星宽 (new GridLength(NValue,GridUnitType.Star)) 返回给您，或者编写一个转换器来获得双倍的星宽。

2) 用 Border 填充所有空间，以及在归一化 Value 处停止的 gradientBrush ：

```
 <Border.Background>
         <LinearGradientBrush StartPoint="0,0" EndPoint="1.0,0">
          <GradientStopCollection>
                 <GradientStop Offset="0.0" Color="#fff" />
                 <GradientStop Offset="{Binding NormalizedValue}" Color="#fff" />
                 <GradientStop Offset="{Binding NormalizedValue}" Color="#000" />
                 <GradientStop Offset="1" Color="#000" />
          </GradientStopCollection>
         </LinearGradientBrush>
    </Border.Background> 
```

（示例在黑色背景上制作白色矩形。）
4）您不需要旋转/翻转。使用 (1-NValue) 代替 NValue，或左对齐，或...
但您不需要 :=)

编辑：如果您需要将“矩形”全部对齐在右侧，并从不同的 X 开始，例如使用 GradientStopCollection 方式，只需使用 (1-NormalizedValue) 并交换颜色：

```
 <Border.Background>
         <LinearGradientBrush StartPoint="0,0" EndPoint="1.0,0">
          <GradientStopCollection>
                 <GradientStop Offset="0.0" Color="#000" />
                 <GradientStop Offset="{Binding OneMinusNormalizedValue}" Color="#000" />
                 <GradientStop Offset="{Binding OneMinusNormalizedValue}" Color="#fff" />
                 <GradientStop Offset="1" Color="#fff" />
          </GradientStopCollection>
         </LinearGradientBrush>
    </Border.Background> 
```

事实上，网格解决方案也是如此。

# php - 使用 php 的带有摘录的搜索结果（如 Google）

> ID：10348408
> 
> 赞同：0
> 
> 时间：2012-04-27T09:46:00.353
> 
> 标签：php, search

我正在开发一个包含新闻提要、功能和博客的网站，现在我想实现搜索，但我希望它显示的结果与 Google 显示其搜索结果的结果相同，突出显示的摘录是您搜索的关键字，我使用 php搜索。您可以建议任何教程或链接吗？

# .net - 我可以将其中的单个应用程序或 ActiveX 控件静音吗？

> ID：10348419
> 
> 赞同：0
> 
> 时间：2012-04-27T09:46:48.293
> 
> 标签：.net, winapi, activex, flash

我的 .NET 应用程序中有一个 Flash Player ActiveX 控件。我想将其静音（如果可能，仅对 Flash 控件本身进行静音，但将整个应用程序静音是一个很好的折衷方案）。使整个系统静音是不可行的。

# iphone - 无法在应用程序退出 iOS 时重置亮度

> ID：10348421
> 
> 赞同：4
> 
> 时间：2012-04-27T09:47:07.937
> 
> 标签：iphone, ios, uiapplicationdelegate

为什么我不能在 applicationDidEnterBackground 或 applicationWillResignActive 中设置屏幕亮度？

这是我的代码：

```
-(void)applicationDidEnterBackground:(UIApplication *)application { 
    [[UIScreen mainScreen] setBrightness:1.0];
} 
```

看不懂……！？它适用于`applicationDidEnterForeground`等，只是在我使用主页按钮关闭应用程序时不起作用。

这个问题还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-27T11:08:27.727

**2016 年 8 月更新：**

> 无论应用程序是否关闭，应用程序所做的亮度更改都会一直有效，直到设备被锁定。系统亮度（用户可以在“设置”或“控制中心”中设置）在下次打开显示器时恢复。

[https://developer.apple.com/reference/uikit/uiscreen/1617830-brightness](https://developer.apple.com/reference/uikit/uiscreen/1617830-brightness)

**2012 年 7 月的原始帖子：**

您不能在退出前设置亮度。这在任何地方都没有记录，但开发论坛上的以下帖子很有帮助：

[https://devforums.apple.com/thread/139813?start=0&tstart=0](https://devforums.apple.com/thread/139813?start=0&tstart=0)

应该*发生*的是当应用程序在后台时恢复系统范围的亮度。有一个已知错误，直到下次关闭和打开背光时才会真正发生这种情况。

您可以通过将亮度设置为 0 并按 Home 键轻松重现这一点。主屏幕仍然会很暗。锁定然后解锁您的设备并恢复系统亮度。

请提交一个关于此的错误！在同一篇文章中，一位苹果员工发布了重复的错误报告是有帮助的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:00:48.893

我从未尝试在 applicationDidEnterBackground 设置屏幕亮度。

我认为您可以通过在所有内容之上使用带有黑色背景颜色的 UIView 来更改应用程序的亮度。然后设置这个 UIView 的 alpha。然后结果看起来就像真正的屏幕亮度。

我使用这种替代方法是因为这种方法仅适用于 iOS5。

[[UIScreen mainScreen] setBrightness:1.0];

我也想支持iOS3,4。

# iphone - UITableView 单元格中的按钮操作

> ID：10348422
> 
> 赞同：0
> 
> 时间：2012-04-27T09:47:07.997
> 
> 标签：iphone, ios

在我的应用程序中，有一个 UITableView。在表格单元格中放置两个标签和一个按钮。按钮高度等于 (label1+ label2) 高度。这些是为了显示内容。按钮用于操作。这里我的问题是无法在所有部分执行按钮操作。点击时只有部分工作。

这是用于放置标签和按钮的代码

```
artistButton = [[UIButton alloc] initWithFrame:CGRectMake(11.0, 6.0, 170.0, 50.0)];
artistButton.backgroundColor = [UIColor redColor];
[self.contentView bringSubviewToFront:artistButton];
[self.contentView addSubview:artistButton];

artistLabel1 = [[UILabel alloc] initWithFrame:CGRectMake(11.0, 6.0, 170.0, 27.0)];
artistLabel1.textAlignment = UITextAlignmentLeft;
artistLabel1.textColor = [UIColor colorWithRed:0.14 green:0.29 blue:0.42 alpha:1]; 
artistLabel1.font =  [UIFont boldSystemFontOfSize:15.0];
artistLabel1.backgroundColor = [UIColor blueColor];
[self.contentView addSubview:artistLabel1];

artistLabel2 = [[UILabel alloc] initWithFrame:CGRectMake(11.0,20.0, 170.0, 27.0)];
artistLabel2.textAlignment = UITextAlignmentLeft;
artistLabel2.textColor = [UIColor grayColor];
artistLabel2.font =  [UIFont boldSystemFontOfSize:12.0];
artistLabel2.backgroundColor = [UIColor grayColor];
[self.contentView addSubview:artistLabel2]; 
```

任何人都可以提供帮助或建议。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T10:15:26.113

我找到了我的问题的答案。由于按钮和标签的大小，它不起作用。现在调整按钮的宽度和长度并标记其工作正常。谢谢你们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T10:12:35.157

只需用于您的细胞`tableView:didSelectRowAtIndex:`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T10:03:30.583

在 UIButton 声明之前添加一行..

```
artistButton = [UIButton buttonWithType:UIButtonTypeRoundedRect]; 
```

之后，您可以初始化您的 UIButton 代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T10:32:52.047

我想你确实意识到你设置的框架是重叠的。您确实调用`[self.contentView bringSubviewToFront:artistButton];`了，但是之后将按钮添加为子视图，因此它将无效。您还可以在添加按钮后添加其他子视图，这些子视图将放置在您的按钮上方。

因此，只需先添加两个标签，然后添加按钮，您应该能够正确单击按钮，尽管您的标签将位于按钮下方，并且不确定其中有多少可见。检查为要添加的对象设置的框架。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T09:53:06.407

向此按钮添加目标操作

```
artistButton = [[UIButton alloc] initWithFrame:CGRectMake(11.0, 6.0, 170.0, 50.0)];
artistButton.backgroundColor = [UIColor redColor];

[artistButton addTarget:self 
           action:@selector(ArtistAction)
 forControlEvents:UIControlEventTouchUpInSide];

[self.contentView bringSubviewToFront:artistButton];
[self.contentView addSubview:artistButton];

-(void)ArtistAction
{
  NSLog("Test Artist Action");
} 
```

# android - 安卓应用中的区域通知器

> ID：10348424
> 
> 赞同：0
> 
> 时间：2012-04-27T09:47:12.103
> 
> 标签：android, geolocation

![在此处输入图像描述](../Images/890e59035f337b070d2c135b7e4a95cc.png)

如果用户输入'a_zone'，是否可以创建一个显示`Toast`消息的程序（android），也就是说手机将使用当前位置和经纬度？

```
Toast.maketext(this,"hello ",1000).show(); 
```

因此，如果用户进入一个区域，例如超市，应用程序应该显示一条消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:17:40.933

你需要的是所谓的接近警报，这里是如何实现它的教程： [http ://www.javacodegeeks.com/2011/01/android-proximity-alerts-tutorial.html](http://www.javacodegeeks.com/2011/01/android-proximity-alerts-tutorial.html)

# c# - 如何在 Masterpage 中获取 HiddenField 控件并设置它的值？

> ID：10348427
> 
> 赞同：0
> 
> 时间：2012-04-27T09:47:28.873
> 
> 标签：c#, asp.net

我有一个`MasterPage`包含隐藏字段控件。我想获取隐藏字段的当前值并从使用`MasterPage`.

到目前为止，我有以下代码：（在其中一页中）

```
 //Get the textbox and set it's value
   TextBox txt1 = new TextBox();
                txt1 = (TextBox)this.Master.FindControl("txtHiddenField");
                txt1 .Text = "true"; 
```

上面的代码似乎不起作用。我需要什么代码来获取隐藏字段控件并设置它的值？（并获得它的价值）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T09:54:11.073

我建议在您的 中提供一个公共属性/方法`MasterPage`，您可以使用它来设置/获取 HiddenField 的值。

在你的主人（假设它的类型被称为`SiteMaster`）：

```
public String HiddenValue { 
    get{return txtHiddenField.Value;}
    set{txtHiddenField.Value = value;}
} 
```

在您的页面中：

```
SiteMaster master = (SiteMaster)Page.Master;
master.HiddenValue = "true"; 
```

这种方法直截了当，不易出错且易于阅读。您甚至可以更改母版中的控件而无需更改页面（如果您想用文本框替换隐藏字段）。

假设您的`"true"`值表明您实际上想要存储一个布尔值，我建议使用`bool`作为属性的数据类型和一个不言自明的名称。然后您可以将其存储在隐藏字段中，但客户端（页面）不需要知道。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T09:53:48.820

HiddenField 将其文本设置为 VALUE，而 TextBox 具有 TEXT 属性。当然，将一个转换为另一个并设置 text 属性将无济于事。

改为这样做：

```
HiddenField hiddenField = (HiddenField)Master.FindControl("txtHiddenField");
hiddenField.Value = "true"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T09:52:54.877

假设您添加了这样的隐藏字段控件->>

```
<input type="hidden" ID="hiddenFieldID" runat="server" /> 
```

你可以像-->>一样访问它

```
HtmlInputHidden hiddenfield = (HtmlInputHidden)this.Master.FindControl( 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T09:54:48.063

可能是你失踪了`ContentPlaceHolder`

尝试这样的事情

```
 ContentPlaceHolder mpContentPlaceHolder;
    TextBox mpTextBox;
    mpContentPlaceHolder = 
      (ContentPlaceHolder)Master.FindControl("ContentPlaceHolder1");
    if(mpContentPlaceHolder != null)
    {
        mpTextBox = 
            (TextBox) mpContentPlaceHolder.FindControl("TextBox1");
        if(mpTextBox != null)
        {
            mpTextBox.Text = "TextBox found!";
        }
    } 
```

阅读有关[参考 ASP.NET 母版页内容的更多信息](http://msdn.microsoft.com/en-us/library/xxwa0ff0.aspx)

# android - Android：ShareActionProvider 的自定义 XML

> ID：10348428
> 
> 赞同：4
> 
> 时间：2012-04-27T09:47:31.087
> 
> 标签：android, android-intent, actionbarsherlock, shareactionprovider

我需要`ShareActionProvider`为我的 Android 应用程序创建一个自定义菜单，因为当我指定默认菜单时，我只得到“消息”、“蓝牙”和“Gmail”，而我只想要“Facebook”、“Twitter”和“电子邮件” .

我怎样才能做到这一点？我需要为它指定自己的布局吗？

提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:20:07.297

一切都可以在这里找到：

[https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/demos/src/com/actionbarsherlock/sample/demos/SubMenus.java](https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/demos/src/com/actionbarsherlock/sample/demos/SubMenus.java)

# android - android 内容提供者权限

> ID：10348430
> 
> 赞同：1
> 
> 时间：2012-04-27T09:47:36.623
> 
> 标签：android, android-contentprovider

对于使用内容提供程序的应用程序，它需要在清单文件中提及权限。假设它在其清单文件中具有 read_sms 权限。现在它想阅读短信。内容解析器/或哪个函数/类如何检查它是否有权读取短信。Packagemangerservice 中的 checkpermission 方法检查权限是否正确，内容解析器或查询函数如何将其引导到该函数以检查应用程序是否具有权限？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-27T10:02:50.623

为什么这与你有关？我说只是尝试做任何你想做的事情。\如果你的应用程序有权限，它会成功，如果没有，它会抛出一个“拒绝访问异常”。一定要抓住它并相应地进行。

顺便说一句，您怎么会不知道您的应用程序在清单文件中具有哪些权限……我不明白。

# resteasy - Resteasy 将 ClientResponse 映射到业务对象（pojo）

> ID：10348433
> 
> 赞同：1
> 
> 时间：2012-04-27T09:47:44.347
> 
> 标签：resteasy, rest-client

我是 Resteasy 的新手，我正在调用服务并成功获得响应。我也可以打印响应（这是预期的响应）。
`ClientResponse<String> response= clientRequest.post(String.class); System.out.println("response"+response.getEntity());`

控制台输出为：`response{"id":8,"displayName":"xyz_abc","roles":null, .....`

但现在我想解析/映射从服务获得的响应到客户端应用程序中的业务对象（如 User.java pojo）。我尝试浏览文档，但无法理解太多。我尝试使用谷歌搜索，再次没有太多帮助。请帮助我实现这一目标。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:28:11.833

终于找到答案了，

`ClientResponse<String> response= clientRequest.post(String.class);`
`Gson gson = new Gson();`
`User user = gson.fromJson(response.getEntity(), User.class);`

这解决了我的问题。

# python - Python，unicodedata 名称和代码点值，我缺少什么？

> ID：10348434
> 
> 赞同：5
> 
> 时间：2012-04-27T09:47:47.047
> 
> 标签：python, unicode

我正在处理 unicode 数据字符，我想知道为什么有些在 unicodedata 中没有任何名称？这是一个示例代码，您可以在其中检查`< unknown >`

我以为 unicode 数据库中的每个字符都被命名了，顺便说一句，它们都是相同的类别，即`[Cc] Other, Control`.

另一个问题：如何获得 unicode 码位值？是这样`ord(unicodechar)`吗？

我也把文件放在[这里](http://www.sendspace.com/file/n5568e)（因为编码是一件很奇怪的事情），因为我认为我剪切的带有“不可见”字符的粘贴可能是有损的。

```
#!/bin/env python
# -*- coding: utf-8 -*-

#extracted and licensing from here:
"""
:author: Laurent Pointal <laurent.pointal@limsi.fr> <laurent.pointal@laposte.net>
:organization: CNRS - LIMSI
:copyright: CNRS - 2004-2009
:license: GNU-GPL Version 3 or greater
:version: $Id$
"""

# Chars alonemarks:
#         !?¿;,*¤@°:%|¦/()[]{}<>«»´`¨&~=#±£¥$©®"
# must have spaces around them to make them tokens.
# Notes: they may be in pchar or fchar too, to identify punctuation after
#        a fchar.
#        \202 is a special ,
#        \226 \227 are special -
alonemarks = u"!?¿;,\202*¤@°:%|¦/()[\]{}<>«»´`¨&~=#±\226"+\
     u"\227£¥$©®\""
import unicodedata
for x in alonemarks:
    unicodename = unicodedata.name(x, '<unknown>')
    print "\t".join(map(unicode, (x, len(x), ord(x), unicodename, unicodedata.category(x))))

    # unichr(int('fd9b', 16)).encode('utf-8')
    # http://stackoverflow.com/questions/867866/convert-unicode-codepoint-to-utf8-hex-in-python 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T10:09:55.063

> 我以为unicode数据库中的每个字符都被命名了

不，控制字符没有名称，请参阅[UnicodeData](http://www.unicode.org/Public/UNIDATA/UnicodeData.txt)文件

> 另一个问题：如何获得 unicode 码位值？是 ord(unicodechar) 可以解决问题吗？

是的！

```
print '%x' % ord(unicodedata.lookup('LATIN LETTER SMALL CAPITAL Z'))
## 1d22 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T10:24:41.270

根据`unicodedata`图书馆[文档](http://docs.python.org/library/unicodedata.html)，

> 该模块使用 UnicodeData 文件格式 5.2.0 定义的相同名称和符号（参见[此处](http://www.unicode.org/reports/tr44/tr44-4.html)）

您的两个字符显示以下输出：

```
1   150 <unknown>   Cc
1   151 <unknown>   Cc 
```

它们对应于控制点字符 0x96 和 0x97 上面的 unicode 文档在[代码点段落](http://www.unicode.org/reports/tr44/tr44-4.html#Code_Point_Labels)中规定：

> 代理代码点、专用字符、控制代码、非字符和未分配的代码点没有名称。

我不知道如何通过`unicodedata`模块获取与 unicode 注释相对应的标签注释，但我认为你的两个控制字符没有任何名称，因为它是由 Unicode 规范定义的。

# spring - maven：为不同的配置运行相同的测试

> ID：10348435
> 
> 赞同：5
> 
> 时间：2012-04-27T09:47:49.237
> 
> 标签：spring, testing, maven, surefire

在我的 spring + maven 应用程序中，我为数据访问层创建了一些测试，现在我想针对多个数据源运行这些测试。我有类似的东西：

```
@ContextConfiguration(locations={"file:src/test/resources/testAppConfigMysql.xml"})
public class TestFooDao extends AbstractTransactionalJUnit38SpringContextTests {
  public void testFoo(){
     ...
  }
} 
```

它当前具有硬编码的配置位置，因此它只能用于一个数据源。两次调用测试并通过两个不同的配置（比如 testAppConfigMysql.xml 和 testMyConfigHsqlDb.xml）的最佳方法是什么？

我已经看到通过系统属性执行此操作的建议。如何告诉 maven 使用不同的系统属性值调用测试两次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:56:49.293

我不知道是否有一些性感和花哨的解决方案，也很简单，为此。我将使用所有测试内容实现基类，然后将其继承到具有不同基于注释的配置的 2 个类中，如下所示：

```
@ContextConfiguration(locations={"firstDs.xml"})
public class TestFooDaoUsingFirstDs extends TestFooDao {
}

@ContextConfiguration(locations={"secondDs.xml"})
public class TestFooDaoUsingSecondDs extends TestFooDao {
} 
```

除非您必须以这种方式处理大量不同的数据源，否则这对我来说没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:16:34.180

而不是`file:...`，您可以使用`classpath:...`（删除`src/test/resources`，如果您使用，它是隐含的`classpath`）。然后你可以有一个单一的主上下文与该行：

`<import resource="dao-${datasource}.xml" />`

如果您使用 option 运行 Maven 构建`-Ddatasource=foo`，它将用`${datasource}`您指定的任何内容替换主上下文中的 。因此，您可以针对不同的配置拥有`datasource-foo.xml`等`datasource-bar.xml`。

（您需要在 POM 中启用 Maven 资源过滤才能使其工作）。

或者，查看 Spring 3.1 中的新内容：[http ://www.baeldung.com/2012/03/12/project-configuration-with-spring/](http://www.baeldung.com/2012/03/12/project-configuration-with-spring/)

编辑：第三种选择是让所有测试类扩展一些超类，并使用 Junit's `@Parameterised`，其中参数是不同的 Spring 上下文。在那种情况下你不能使用`@ContextConfiguration`，但你总是可以手动创建 Spring 上下文，然后使用自动装配测试类`org.springframework.beans.factory.config.AutowireCapableBeanFactory.autowireBean()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T11:50:00.030

检查[maven 调用程序插件](http://maven.apache.org/plugins/maven-invoker-plugin/usage.html)。它也支持配置文件。

# silverlight - 将照片流从相机上传到 WP7 中的 azure blob

> ID：10348439
> 
> 赞同：0
> 
> 时间：2012-04-27T09:48:09.603
> 
> 标签：silverlight, windows-phone-7, azure, azure-storage, azure-blob-storage

我有以下简单的应用程序页面，它使用手机摄像头将拍摄的照片上传到 azure blob：

```
public partial class AddReport : PhoneApplicationPage
{
    // blobs stuff
    string storageAccount = "MYACCOUNT";
    string storageKey = "MYKEY";
    string blobServiceUri = "http://MYACCOUNT.blob.core.windows.net";
    CloudBlobClient blobClient;

    private Report newReport;
    public AddReport()
    {
        InitializeComponent();   
    }

    protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
        //base.OnNavigatedTo(e);

        newReport = new Report();
        var credentials = new StorageCredentialsAccountAndKey(storageAccount, storageKey);
        blobClient = new CloudBlobClient(blobServiceUri, credentials);
    }

    private void TakePhotoClick(object sender, EventArgs eventArgs)
    {
        //The camera chooser used to capture a picture.
        CameraCaptureTask ctask;

        //Create new instance of CameraCaptureClass
        ctask = new CameraCaptureTask();

        //Create new event handler for capturing a photo
        ctask.Completed += new EventHandler<PhotoResult>(ctask_Completed);

        //Show the camera.
        ctask.Show();

    }

    void ctask_Completed(object sender, PhotoResult e)
    {

        if (e.TaskResult == TaskResult.OK && e.ChosenPhoto != null)
        {

            WriteableBitmap CapturedImage = PictureDecoder.DecodeJpeg(e.ChosenPhoto);
            UploadToBlobContainer(e.ChosenPhoto);
        }
        else
        {
            //user decided not to take a picture
        }
    }
    private void UploadToBlobContainer(System.IO.Stream stream)
    {
        string containerName = "reportsPhotos";
        var container = blobClient.GetContainerReference(containerName);

        container.CreateIfNotExist(true, r =>
            Dispatcher.BeginInvoke(() =>
            {
                var blobName = "report" + newReport.ReportId.ToString();
                var blob = container.GetBlobReference(blobName);
                blob.Metadata["ReportId"] = newReport.ReportId.ToString();
                blob.UploadFromStream(stream, r2 =>
                    Dispatcher.BeginInvoke(() =>
                    {
                         newReport.Photo = container.Uri + "/" + blobName;
                    }));
            }));

    }
} 
```

这是一个简单的案例，我没有使用 SAS 进行身份验证，而是将密钥保存在应用程序本身中（这仅用于测试目的），而且我的 blob 也是公开可用的。

当我在调试模式下运行时，似乎一切正常，但照片没有上传到 blob。另外，我不知道如何调试它以查看 blob 服务是否有任何错误。

谁能告诉我可能出了什么问题？

EDIT1：似乎也没有创建容器。我已经使用[azure blob explorer确认了这一点](http://blobexplorer.codeplex.com/)

EDIT2：我得到一个`System.Net.WebException : "The remote server returned an error: NotFound."`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T00:09:16.050

经过很长时间，我终于发现问题出在这条线上：

```
string containerName = "reportsPhotos"; 
```

根据[此处](http://msdn.microsoft.com/en-us/library/windowsazure/dd135715.aspx)，容器名称中的所有字母都必须**小写**。更改它以`reportsphotos`解决问题

那是值得的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:00:03.363

您可以尝试这样做吗：

```
// Retrieve storage account from connection-string
CloudStorageAccount storageAccount = CloudStorageAccount.Parse(
    RoleEnvironment.GetConfigurationSettingValue("StorageConnectionString"));

// Create the blob client
CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient();

// Retrieve reference to a previously created container
CloudBlobContainer container = blobClient.GetContainerReference("mycontainer");

// Retrieve reference to a blob named "myblob"
CloudBlob blob = container.GetBlobReference("myblob");

// Create or overwrite the "myblob" blob with contents from a local file
using (var fileStream = System.IO.File.OpenRead(@"path\myfile"))
{
    blob.UploadFromStream(fileStream);
} 
```

这是来自：

[http://www.windowsazure.com/en-us/develop/net/how-to-guides/blob-storage/#upload-blob](http://www.windowsazure.com/en-us/develop/net/how-to-guides/blob-storage/#upload-blob)

# silverlight - 多选组合框

> ID：10348444
> 
> 赞同：0
> 
> 时间：2012-04-27T09:48:21.497
> 
> 标签：silverlight, mvvm

我有一个场景，其中有一个带有复选框的组合框，因此可以进行多项选择。选择组合框项目后，我需要执行更新查询。我知道要为单个项目编写查询，但是如何从组合框中进行多项选择的查询。

问候， 拉古

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T13:02:04.857

组合框根据视图模型列表显示项目，让我们在视图模型中将它们命名为 CheckableViewModel，这是视图的数据上下文：

```
class ViewModel
{
    //...
    List<CheckableItemViewModel> Items;
    //...
}

<ComboBox ItemsSource="{Binding Items}" 
          <!-- more properties --> /> 
```

至于查询数据是在数据逻辑中完成的任务，该任务也必须在那里触发。这意味着您的 CheckableItemViewModel 必须发出其检查状态更改的信号，例如通过事件（至少 PropertyChanged 属性已检查）。包含 CheckableItemViewModels 列表的视图模型（UI 绑定到的视图模型）必须侦听此事件。并且此视图模型必须包含调用包含适当数据的适当查询的逻辑。

# javascript - 动态更新 Google Geochart 的颜色

> ID：10348450
> 
> 赞同：1
> 
> 时间：2012-04-27T09:48:41.843
> 
> 标签：javascript, google-visualization

我正在使用[Google Geochart](https://developers.google.com/chart/interactive/docs/gallery/geochart)，我想动态更改所选区域的颜色，而不必再次重绘整个图表（这会导致图表闪烁）。有没有办法做到这一点，如果有，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-04T09:24:27.243

可以在此 VectorWorkz GeoChart 中动态更改 GeoChart 的区域[颜色](http://vectorworkz.com/products/geochart/features)。它使您能够在其有界数据值更改时动态更改区域的颜色，这是通过使用 KO 完成的，看看这个[示例](http://vectorworkz.com/demo/Samples/LiveEuropeStockMarketUsingKO.html)，这里是[在线演示](http://vectorworkz.com/demo/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:05:47.293

据我了解，动态更改 Geochart 中区域的颜色是不可能的。但是，我建议您尝试[jVectorMap](http://jvectormap.com)库，它具有动态更新数据的`setColors`和`setValues`方法。

# c# - 在datagridview的单元格中调整位图图像的大小

> ID：10348452
> 
> 赞同：1
> 
> 时间：2012-04-27T09:49:01.953
> 
> 标签：c#, image, image-resizing

仍然有调整我的图像大小的问题。

使用 c sharp.net 4.0 winforms 和 MS Visual Studio 2010。

这是我目前拥有的代码：

```
private void ShowArrow()
    {
        foreach (DataGridViewRow paretoRow in ParetoGrid.Rows)
        {
            if ((paretoRow.Cells["Pareto6"].Value != null) && (Convert.ToInt32(paretoRow.Cells["CurrentPareto"].Value) < (Convert.ToInt32(paretoRow.Cells["NewPareto"].Value))))
            {
                downArrow.Width = 2; 
                downArrow.Height = 2;
                paretoRow.Cells["p1"].Value = downArrow; 
            }
            else if ((paretoRow.Cells["Pareto6"].Value != null) && (Convert.ToInt32(paretoRow.Cells["CurrentPareto"].Value) > (Convert.ToInt32(paretoRow.Cells["NewPareto"].Value))))
            {
                //ParetoGrid.Rows[paretoRow.Index].DefaultCellStyle.BackColor = Color.LightGreen;
                paretoRow.Cells["p1"].Value = upArrow;
            }
        }
    } 
```

但是当我尝试编辑图像大小时，它说图像是只读的？这是调整图像大小的好方法吗？或者，还有更好的方法？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:04:56.347

您可以检查图像对象的“只读”属性并继续操作。假设您的变量是 BitmapImage myImage。

```
bool isReadOnly = myImage.IsSealed; 
```

还有另一种方法称为 SetValue。希望这可以帮助。

[http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapimage.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapimage.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:07:30.477

如果你有一个 Image 对象，你可以试试这个：

[http://msdn.microsoft.com/en-us/library/system.drawing.image.getthumbnailimage.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.image.getthumbnailimage.aspx)

实际上不是一个单一的解决方案，但它接近它。您可能希望事先生成调整大小的图像并稍后使用。

# java - Web 服务 (JBoss) 上的自定义 401 错误

> ID：10348453
> 
> 赞同：1
> 
> 时间：2012-04-27T09:49:21.163
> 
> 标签：java, web-services, authentication, jboss, http-status-code-401

我有一个这样的 jboss 网络服务：

```
@Stateless
@SecurityDomain("SecurityDomain")
@RolesAllowed("RolesAllowed")
@WebContext(urlPattern = "/*", authMethod = "BASIC", secureWSDLAccess = true)
@EndpointConfig(configName = "Standard WSSecurity Endpoint")
@WebService(name = "WebServiceName", targetNamespace = "http://webserviceName") 
```

当我使用错误的凭据调用此 Web 服务时，我收到以下错误：

```
<html>
<head>
<title>JBoss Web/2.1.3.GA - Error report</title>
<style>
<!--H1 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-    size:22px;} H2 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:16px;} H3 
{font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-   size:14px;} BODY {font-family:Tahoma,Arial,sans-serif;color:black;background-color:white;} 
B {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;} P {font-  family:Tahoma,Arial,sans-serif;background:white;color:black;font-size:12px;}
A {color : black;}A.name {color : black;}HR {color : #525D76;}--></style> </head>
<body><h1>HTTP Status 401 - </h1><HR size="1" noshade="noshade">
<p><b>type</b> Status report</p>
<p><b>message</b> <u></u></p>
<p><b>description</b> <u>This request requires HTTP authentication ().</u></p>
<HR size="1" noshade="noshade"><h3>JBoss Web/2.1.3.GA</h3>
</body>
</html> 
```

我想知道是否有办法自定义这个 401 响应？

请注意，我的 web 服务工作正常（我的问题仅在此自定义中）。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:43:29.330

Web 服务使用 JBoss Web 组件来验证用户名和密码（使用基本验证）。（请注意，我使用的是 JBoss-ESB）

为此，我们需要在 \jboss-esb\server\\deploy\jbossweb.sar 中更改这个 jar (jbossweb.jar)。

我们必须编辑文件“ServerInfo.properties”（在 org\apache\catalina\util 中）并将属性“server.info=2.1.3.GA”更改为“server.info=XPTO”。

或者，也可以重新构建这个 jar 并将标签 @VERSION@ 替换为 XPTO（我相信在任务 Ant 中）。

在此分析期间，还确定了我们的 BasicAuthenticator 的可能实现。因此可以配置错误消息 (401) 以使其更具可配置性（最终我们可以返回其他错误）。

为此，您必须更改配置

```
<property name="authenticators"> 
<..>
<key>BASIC</key>
<value> MyClass </value> 
```

在 war-deployers-jboss-beans.xml 文件中（在 \jboss-esb\server\\deployers\jbossweb.deployer\META-INF 中）。

# sql - Log Parser 2.2 - 可以循环吗？

> ID：10348455
> 
> 赞同：0
> 
> 时间：2012-04-27T09:49:30.923
> 
> 标签：sql, xml, logparser

我正在尝试使用 Microsoft 的 Log Parser 2.2。我将我的日志解析器指向一个 XML 文件。我想从 XML 文件中获取某些信息，然后在查询中重用这些信息。我在下面创建了一些伪代码：

```
GET UNIQUE *WINDOW_NAMES* 
FOR EACH *WINDOW_NAME*
{
 GET WINDOW_ATTRIBUTE_ONE;
 GET WINDOW_ATTRIBUTE_TWO;
} 
```

使用 Log Parser 2.2 可以做到这一点吗？

XML 文档的摘录：

```
<windows>
    <window>
        <name>
            Window One
        </name>
        <visible>
            Visible
        </visible>
        <stayontop>
            True
        </stayontop>
    </window>   
    <window>
        <name>
            Window Two
        </name>
        <visible>
            Visible
        </visible>
        <stayontop>
            False
        </stayontop>
    </window>   
    <window>
        <name>
            Window Three
        </name>
        <visible>
            Invisible
        </visible>
        <stayontop>
            True
        </stayontop>
    </window>
</windows> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:53:34.913

您可以使用 TPL 输出格式根据第一个查询的结果生成（一组）查询，然后在输出文件上运行 logparser。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:52:40.863

任何形式的 SQL，尤其是 LogParser 种类，都不适合循环。但是，如果您要做的只是获取数据元素，那么此查询可能会完成这项工作：

`LogParser -i:XML "file.xml#/windows/window"`

这将输出一个表格，其中包含字段`name`、`visible`和`stayontop`，以及每个“窗口”的一行。然后，您可以使用 LogParser 输出选项之一保存/输出此数据（`LogParser -h`有关详细信息，请参阅 LogParser Windows 帮助文件）。

# php - PHP mysql_real_escape_string 或 PDO 的替代方案

> ID：10348457
> 
> 赞同：-1
> 
> 时间：2012-04-27T09:49:47.703
> 
> 标签：php, mysql, database, pdo, mysql-real-escape-string

我正在尝试以**最小的努力**`mysql_query`将许多旧的 PHP mysql prodecural 函数等迁移`mysql_real_escape_string`到 PDO 中。我不想重写每一个旧的数据库函数。原因是它是一个相当旧的应用程序，我正在开发一个新模块并希望在那里使用 PDO。

 **所以现在我将这些旧函数移植到 PDO 方法中 - 我附加到我的旧函数，`_port`所以我使用`mysql_query_port`,和.`mysql_fetch_array_port``mysql_num_rows_port``mysql_real_escape_string_port`

前三个效果很好：

```
function mysql_query_port($query) {
    $db = Database::instance();
    $statement = $db->prepare($query);

    if (!$statement->execute())
        return false;
    return $statement;
}

function mysql_fetch_array_port(PDOStatement $statement) {
    return $statement->fetch();
}

function mysql_num_rows_port(PDOStatement $statement) {
    return $statement->rowCount();
} 
```

问题在于`mysql_real_escape_string`- 当我没有 mysql 连接时，我无法使用它。所以请帮我决定要做什么（或在我的代码中找到一个错误）：

1.  在脚本的开头初始化`mysql_pconnect()`，以便我仍然可以使用`mysql_real_escape_string`（我不会通过该连接进行任何查询）。
2.  写一些替代品。[手册](http://cz2.php.net/manual/en/function.mysql-real-escape-string.php)说这个函数“在以下字符前加上反斜杠：\x00、\n、\r、\、'、”和\x1a。”，所以我想出了这个：

.

```
function mysql_real_escape_string_port($string) {
    return addcslashes ($string, "\x00\n\r\\'\"\x1a");
} 
```

你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T10:03:49.470

`mysql_real_escape_string`需要连接，因为它的输出取决于连接字符集。

如果您能够手动同步字符集（或者如果您从不更改它），您可以编写自己的实现。**

# javascript - javascript中原型赋值的顺序

> ID：10348458
> 
> 赞同：2
> 
> 时间：2012-04-27T09:49:53.103
> 
> 标签：javascript, prototype

从我对原型的阅读中，我的印象是对构造函数原型的更改将反映在使用该构造函数创建的所有对象中。

考虑这段代码：

```
var Class1 = function(){
    this.prop1 = 'value1';
};
Class1.prototype.prop2 = 'value2';

var Class2 = function(){
    this.prop3 = 'value3';
};

//Class2.prototype = new Class1(); //1*
var obj1 = new Class2();
Class2.prototype = new Class1(); //2*

console.log('1 ' + obj1.prop1); // undefined
console.log('2 ' + obj1.prop2); // undefined
console.log('3 ' + obj1.prop3); // value3 
```

如您所见，因为我在构造 obj1 后将 Class1 原型分配给 Class2，所以 prop1 和 prop2 的值返回“未定义”。
如果取消注释 1* 并注释掉 2*，则结果与预期一致。

在过去的几天里，我读了很多关于原型的文章，没有人提到顺序很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:57:07.737

好吧，当然顺序很重要，因为`new`键盘强制 ECMAscript 返回一个新创建`Object`的，它`prototype`绑定到任何父对象。因此，当您创建“Class”对象的实例时（术语 Class 在 ECMAscript 中根本没有位置），引擎必须知道原型链。

# javascript - JS，对象跟随一个圆圈

> ID：10348463
> 
> 赞同：5
> 
> 时间：2012-04-27T09:50:10.017
> 
> 标签：javascript, math, animation, canvas, geometry

我试图让一个物体绕着另一个物体转。不太难，我想。但事实证明圆圈是一个螺旋......我可能使用了错误的公式，但我不确定我应该改用哪个......

```
var dx = this.x - this.parent.x,
    dy = this.y - this.parent.y,
    r = Math.atan2(dy, dx);

this.x = Math.sin(r) * this.speed + this.x;
this.y = (Math.cos(r) * this.speed * -1) + this.y; 
```

当您执行此代码时，它似乎可以工作。对象在其父对象周围以弧线移动的每一帧。

然而，弧线越来越大，距离也越来越大。

我犯了什么错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T11:15:06.977

您的浮点值根本没有无限的精度，也没有无限小的角度步长。所以这个迭代计算不可能是精确的。

没有精确的迭代解决方案：如果您尝试使用初始方法提高精度，您仍然会得到分歧。

解决方案是完全从角计算每一步，这对于圆来说很容易：

```
// init part, set your own values
var a = 0; // in radian
var r = 100; // radius, in pixels for example
var da = 1; // in radian. Compute this (once!) using r if you like to use an absolute speed and not a radial one

// each modification
a += da
x = r*Math.sin(a);
y = r*Math.cos(a); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T14:36:39.520

@dystroy 的解决方案是完全合法的，但有一种方法可以限制您的迭代方法，使其不会失控。

引入一个新变量 R，它是您希望对象环绕其父对象的固定半径。

```
var hypot = function(x, y) { return Math.sqrt(x*x + y*y); };
//Run this code only once!
var R = hypot(this.x - this.parent.x, this.y - this.parent.y); 
```

然后可以添加圆的半径固定的约束：

```
//your original code
var dx = this.x - this.parent.x,
    dy = this.y - this.parent.y,
    r = Math.atan2(dy, dx);

//apply constraint:
//calculate what dx and dy should be for the correct radius:
dx = -R * Math.cos(r);
dy = -R * Math.sin(r);

//force this.x, this.y to match that radius.
this.x = this.parent.x + dx;
this.y = this.parent.y + dy;

//the radius will still be off after your update, but
//the amount by which it is off should remain bounded.
this.x = Math.sin(r) * this.speed + this.x;
this.y = (Math.cos(r) * this.speed * -1) + this.y; 
```

您也可以在更新位置后应用约束。

# php - url重写htaccess和php

> ID：10348472
> 
> 赞同：1
> 
> 时间：2012-04-27T09:51:12.070
> 
> 标签：php, .htaccess, url, url-rewriting, rewrite

我想重写 URL，为此我有以下代码。

```
 Options +FollowSymLinks
    RewriteEngine On
    RewriteRule ^([a-zA-Z0-9_-]+)$ index.php?uname=$1
    RewriteRule ^([a-zA-Z0-9_-]+)/$ index.php?uname=$1 
```

**现在，当我写像www.mywebsite.com/username**这样的网址时，它可以正常工作并且没有给出任何错误。

现在，即使我在 hit go 中写**www.mywebsite.com/index.php?uname=username ，我如何才能获得这个 URL。**

当我在 URL 中写入 www.mywebsite.com/index.php?uname=username 时，**我**想将**www.mywebsite.com/index.php?uname=username**更改为**www.mywebsite.com/username 。**

 ****作为 WWW 前缀的重写工作，即使用户**写 www.mywebsite.com/index.php?uname=username ，我也希望以相同的方式将我的 URL 更改为****www.mywebsite.com/username**。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T10:19:07.390

以下应该有效：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/\.]+)/?$ index.php?uname=$1 
```

它将检查文件或目录是否不存在，如果不存在，它将假定它是用户名并重写 URL。

如果您想从 to 重定向`index.php?uname=username`，`/username`则可以将其添加到您的顶部`index.php`：

```
if (strpos($_SERVER['REQUEST_URI'], "uname") !== false)
{
    header("Location: /" . $_GET['uname']);
} 
```******

# emacs - Emacs：鼠标滚轮滚动保留缓冲区位置

> ID：10348473
> 
> 赞同：1
> 
> 时间：2012-04-27T09:51:14.147
> 
> 标签：emacs

如何在使用鼠标滚轮滚动时强制保留缓冲区位置？

目前，如果我滚动缓冲区光标位置应该超出屏幕的数量，那么位置就会改变。我不希望这样，因为它不会发生在 Qt Creator、IntelliJ IDEA 等其他编辑器中。

我想要一些`mouse-wheel-scroll-preserve-buffer-position`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:12:46.297

你不能。Emacs 显示引擎不允许这样做。看到[这个问题](https://stackoverflow.com/a/9620883/903943)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T01:29:43.520

顺便说一句，虽然点的位置必须在屏幕上，但这并不能阻止 Elisp 包在您停止滚动并再次敲击键盘时将点恢复到鼠标滚轮滚动之前的位置。所以，Emacs 现在不支持它，但如果你真的想要让它工作应该不难。欢迎补丁添加这样的可选行为。

# jquery - 为同一个事件侦听器在插件之前/之后运行我的 jQuery 函数？

> ID：10348474
> 
> 赞同：1
> 
> 时间：2012-04-27T09:51:14.503
> 
> 标签：jquery

我使用了一个 jQuery 插件，并单独编写了我自己的 jQuery，它在 dom 就绪时进行了初始化。如果插件和我的代码都对事件做了一些事情（比如点击了一个 div），我怎么知道哪个代码首先运行？

另外，有没有办法指定我想先运行哪个代码？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:59:29.170

API 说`Event handlers bound to an element are called in the same order that they were bound.` [http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T20:27:17.947

**是的，您可以通过在事件处理程序数组上使用诸如****pop**、**unshift**、**"push"**和**"shift"**之类的一些方法来覆盖事件处理程序的顺序......

例如，根据@roasted answer >> 将最后一个事件处理程序移至列表顶部：

```
var myH = $._data( $(".myclass")[0], "events" ).click.pop();
$._data( $(".myclass")[0], "events" ).click.unshift(myH);

console.log($._data( $(".myclass")[0], "events" ).click); 
```

我建议您访问**[这个问题，它就是答案](https://stackoverflow.com/questions/16376305/forcing-to-run-a-custom-function-befor-run-the-assigned-event-handlers-of-an-ele)。**

# javascript - 在画布上随机显示图像

> ID：10348480
> 
> 赞同：0
> 
> 时间：2012-04-27T09:51:44.720
> 
> 标签：javascript, image, canvas

我需要帮助来使用 Javascript 和 HTML5 进行编码。请指教！

```
<HTML>
<HEAD>
<SCRIPT language="javascript">
    function Add() {
        if (document.getElementById('amount').value < 100){
            document.getElementById('amount').value++;
            newIMG = document.createElement("IMG");
            newIMG.src = 'jef-frog.gif';
            newIMG.width = 50;
            newIMG.height = 50;
            document.getElementById("imagedest").appendChild(newIMG);
        }
    }

    function Remove() {
        if(document.getElementById('amount').value > 0)
            document.getElementById('amount').value--;
        imagedest.removeChild(imagedest.lastChild);
    }

    function numeralsOnly(evt) {
        evt = (evt) ? evt : event;
        var charCode = (evt.charCode) ? evt.charCode : ((evt.keyCode) ? evt.keyCode : 
            ((evt.which) ? evt.which : 0));
        if (charCode > 31 && (charCode < 48 || charCode > 57)) {
            return false;
        }
        return true;
    }
</SCRIPT>
</HEAD>

<BODY>
    <H2>TESTING</H2>
    PREY
    <BR/>
    <img src="jef-frog.gif" alt="frogsonice.com" width="100" height="100"/>

<BR/>
<FORM>
    <INPUT type="button" value="+" onClick="Add()"> 
    <input type="text" id="amount" value=0  maxlength="3" size="1" onkeypress="return numeralsOnly(event)">
    <INPUT type="button" value="-" onClick="Remove()">

    <div id='imagedest'>
    </div>

</FORM>
</BODY>
</HTML> 
```

我已经测试了代码，它将显示在`<div>`标签中，但我想让它出现在上面创建的画布中。我不知道如何在画布中捕捉东西。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T10:33:16.140

您需要使用 canvas api 在其上绘制一些东西

*   获取画布（var canvas = document.getElementById("canvas"); ）
*   获取 2D 上下文（var ctx = canvas.getContext("2d");)
*   绘制图像（[https://developer.mozilla.org/en/Canvas_tutorial/Using_images](https://developer.mozilla.org/en/Canvas_tutorial/Using_images)）

**形状示例**

```
<html>  
 <head>  
  <script type="application/javascript">  
    function draw() {  
      var canvas = document.getElementById("canvas");  
      if (canvas.getContext) {  
        var ctx = canvas.getContext("2d");  

        ctx.fillStyle = "rgb(200,0,0)";  
        ctx.fillRect (10, 10, 55, 50);  

        ctx.fillStyle = "rgba(0, 0, 200, 0.5)";  
        ctx.fillRect (30, 30, 55, 50);  
      }  
    }  
  </script>  
 </head>  
 <body onload="draw();">  
   <canvas id="canvas" width="150" height="150"></canvas>  
 </body>  
</html> 
```

# iphone - 在 CLLocation Cordinate 中的 ReverseGeocoder 之后，我应该向 Google Map Web Service 提供什么以获得确切位置？

> ID：10348482
> 
> 赞同：0
> 
> 时间：2012-04-27T09:51:49.713
> 
> 标签：iphone, ios, mkmapview, nsurlrequest, mkreversegeocoder

我正在尝试在两个位置之间绘制路线。为此，我有两个`CLLocation` `(startPoint ,endPoint)`。在`MKReverseGeocoder`这两个位置之后，我像这样出去了。

```
- (void)findAddress{       
    geoCoder1 = [[MKReverseGeocoder alloc] initWithCoordinate:startPoint.coordinate];  
    geoCoder1.delegate = self;   
    [geoCoder1 start];         
    geoCoder2 = [[MKReverseGeocoder alloc] initWithCoordinate:endPoint.coordinate];      
    geoCoder2.delegate = self;
    [geoCoder2 start];    
}   
- (void)reverseGeocoder:(MKReverseGeocoder *)geocoder didFindPlacemark:(MKPlacemark *)placemark
{
    if(geocoder==geoCoder1){
           NSMutableDictionary *cplace1=[[[NSMutableDictionary alloc]initWithDictionary:[placemark addressDictionary]] autorelease];
          NSLog(@"The MKReverseGeocoder Start Point Address %@", cplace1 );

       }else{
            NSMutableDictionary *cplace2=[[[NSMutableDictionary alloc]initWithDictionary:[placemark addressDictionary]] autorelease];             
           NSLog(@"The MKReverseGeocoder End Point Address %@", cplace2 );
       } 
} 
```

**输出：-**

```
The MKReverseGeocoder Start Point Address {
    City = Bangalore;
    Country = India;
    CountryCode = IN;
    FormattedAddressLines =     (
        "Grant Rd, Sampangi Rama Nagar",
        "Bangalore, Karnataka",
        India
    );
    State = Karnataka;
    Street = "Grant Rd";
    SubAdministrativeArea = "Bengaluru Rural";
    SubLocality = "Sampangi Rama Nagar";
    Thoroughfare = "Grant Rd";
}

The MKReverseGeocoder End Point Address {
    Country = India;
    CountryCode = IN;
    FormattedAddressLines =     (
        "NH47 Bi - Rd",
        "Ernakulam, Kerala",
        India
    );
    State = Kerala;
    Street = "NH47 Bi - Rd";
    SubAdministrativeArea = Ernakulam;
    Thoroughfare = "NH47 Bi - Rd";
} 
```

现在我想检索这两个位置之间的路线点，为此我`NSURLRequest`是这样发送的。

```
 - (void)updateRoute {
         NSURLRequest *request=[NSURLRequest requestWithURL:[NSURL URLWithString:[NSString stringWithFormat:
@"http://maps.googleapis.com/maps/api/directions/json?origin=%@&destination=%@&mode=%@&sensor=false", startLocation,endLocation,routeMode] ]];

        [[NSURLConnection alloc] initWithRequest:request delegate:self];    
      } 
```

问题是我想通过`startLocation`和`endLocation`去`NSURLRequest`。那么我应该分配哪些值`startLocation`，以及`endLocation`从`MKReverseGeocoder`委托返回（cplace1 和 cplace2）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T10:11:46.317

看起来您已经将开始和结束位置作为`CLLocation`对象，因此请使用其中的值`coordinate`（即 a `CLLocationCoordinate2D`）传递给 Google。

startPoint 和 endPoint`CLLocationCoordinate2D`都包含类型中的 a`latitude`和。确实是双精度，因此您可以将其放入格式化的字符串中`longitude``CLLocationDegrees``CLLocationDegrees``%f`

```
NSString *googleURL = [NSString stringWithFormat:@"http://maps.googleapis.com/maps/api/directions/json?origin=%f,%f&destination=%f,%f&mode=%@&sensor=false", 
    startPoint.coordinate.latitude,startPoint.coordinate.longitude,
    endPoint.coordinate.latitude,endPoint.coordinate.longitude,
    routeMode];

NSURLRequest *request=[NSURLRequest requestWithURL:[NSURL URLWithString:googleURL]]; 
```

# python - 如何正确安装包含在 .zip 文件（包括一堆不同的文件格式）中的 python 包（PyXLL）？

> ID：10348486
> 
> 赞同：0
> 
> 时间：2012-04-27T09:52:00.107
> 
> 标签：python, ubuntu, zip, installation, pyxll

我下载了一个 .zip 文件来安装 python [PyXLL](http://www.pyxll.com/download.html)包，使用`sudo apt-get install PyXLL`或`sudo pip install PyXLL`不起作用。通常，当您双击包含要在 ubuntu 中安装的内容的下载 .zip 时，它会自动安装。但现在它只是打开包含一堆不同文件格式的 zip 文件。如何正确安装 PyXLL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:05:33.953

PyXXL 在 ubuntu 存储库中不提供 setup.py 或 .deb。您可以做的最好的事情是在您的[PYTHONPATH](http://docs.python.org/using/cmdline.html#envvar-PYTHONPATH)中添加 .py以便可以通过导入找到它。如果您希望每个人都能够使用代码，那么添加它的好路径是在 /usr/local/lib/python2.7/dist-packages 但首先查看[文件系统层次结构标准](http://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard)以确定放置它的位置.

# jquery - jQuery 棋盘式的可排序 div

> ID：10348488
> 
> 赞同：0
> 
> 时间：2012-04-27T09:52:06.283
> 
> 标签：jquery, jquery-ui-sortable

我在 jquery 中使用 sortable() 函数以便在 div 中构建类似“棋盘”的东西。我想要实现的事情是有一个带有可排序项目的 div，例如这个[可排序的示例](http://jqueryui.com/demos/sortable/#display-grid)，您可以将它们拖放到预定义的位置（如国际象棋）。除了可排序的示例之外，我还想做这样的事情[（](https://lh3.googleusercontent.com/-R5QdBaLScQ8/T5pqwYYHrxI/AAAAAAAAAJk/vvl712vdxnY/s675/divchess.jpg)假设这是一个 div）。

到目前为止，这是我的代码

```
 <style>
#sortable { list-style-type: none; margin: 0; padding: 0; }
#sortable li { margin: 3px 3px 3px 0; padding: 1px; float: left; width: 100px; height: 90px; font-size: 4em; text-align: center; }
    .class { width: 350px; height: 350px; }
</style>
<script>
$(function() {
    $( "#sortable" ).sortable();
    $( "#sortable" ).disableSelection();
});
</script>

<div class="demo">

<ul id="sortable">
<li class="ui-state-default">1</li>
<li class="ui-state-default">2</li>
<li class="ui-state-default">3</li>
<li class="ui-state-default">4</li>
<li class="ui-state-default">5</li>
</ul>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:20:40.277

我想你想使用**draggable**
这是你想要实现的吗？[http://jsfiddle.net/GbQH2/3/](http://jsfiddle.net/GbQH2/3/)

```
var original;
$( "#sortable li" ).draggable({
    grid: [100,100],
    containment:'#demo',
    start:function(event, ui){

        original = $(ui.helper).position();
    }
});
$('#sortable li').each(function(){
    $(this).css({top:$(this).position().top,left:$(this).position().left});
});
$('#sortable li').css({position:'absolute'});

$( "#sortable li" ).bind( "dragstop", function(event, ui) {
    $( "#sortable li" ).each(function(){
        if ($(this).hasClass('ui-draggable-dragging')) return;
        if(compareOffset($(this).offset(),ui.offset)){
            console.log(original);
            $(this).css({left:original.left,top:original.top});
            console.log($(this).position());
            return;
        }         
    });
});

function compareOffset(offset1, offset2){
    return offset1.top==offset2.top && offset1.left==offset2.left;
} 
```

# android - 如何在 XML 中获取（参考）当前主题默认文本颜色

> ID：10348489
> 
> 赞同：5
> 
> 时间：2012-04-27T09:52:15.220
> 
> 标签：android, resources, themes

我有一个形状（*rect_shape.xml ），它在列表视图（* *listview_style.xml*）的每个项目中绘制一个笔触轮廓。此轮廓应具有与当前主题的默认文本颜色相同的颜色。

有没有办法**在 XML**中将笔画的 android:color 值设置为当前文本颜色？

我在这里看到了一些类似的问题（例如[How to get my own defined attribute value in my style](https://stackoverflow.com/questions/8271329/how-to-get-my-own-defined-attribute-value-in-my-style)），它们试图设置自己的属性，但我认为这不是我想要的。无论如何我试过了，但我无法将 android:color 值设置为我自己定义的属性（`android:color="?custom_stroke_color"`抛出 InflateException）。

因为用户能够在主题之间动态切换，所以*rect_shape.xml*`@color/white`中的一种预定义颜色（或对颜色资源的引用，例如）不是一个选项。

 *感谢任何帮助...

**rect_shape.xml**

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle" >

<stroke android:width="3dp"
<!-- should be the current default text color -->
    android:color="#FFF" />

<solid/> 
...
</shape> 
```

**listview_style.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:background="@drawable/rect_shape" >
...
</LinearLayout> 
```

**主题.xml**

```
<resources>
<style name="DarkTheme" parent="@style/Theme.Sherlock">
<!-- default text color is white -->
...
</style>
<style name="LightTheme" parent="@style/Theme.Sherlock.Light">
<!-- default text color is black-->
...
</style>
</resources> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-27T18:52:50.127

访问可绘制 XML 文件中的主题属性仅在 android 5.0 及更高版本中可用。

看到[这个问题](https://code.google.com/p/android/issues/detail?id=26251)*

# design-patterns - Builder pattern code generation in IntelliJ

> ID：10348491
> 
> 赞同：84
> 
> 时间：2012-04-27T09:52:24.913
> 
> 标签：design-patterns, intellij-idea, code-generation, builder-pattern

Is there any way to automate writing Builder patterns in IntelliJ?

For example, given this simple class:

```
class Film {
   private String title;
   private int length;

   public void setTitle(String title) {
       this.title = title;
   }

   public String getTitle() {
       return this.title;
   }

   public void setLength(int length) {
       this.length = length;
   }

   public int getLength() {
       return this.length;
   }
} 
```

is there a way that I could get the IDE to generate this, or similar:

```
public class FilmBuilder {

    Film film;

    public FilmBuilder() {
        film = new Film();
    }

    public FilmBuilder withTitle(String title) {
        film.setTitle(title);
        return this;
    }

    public FilmBuilder withLength(int length) {
        film.setLength(length);
        return this;
    }

    public Film build() {
        return film;
    }
} 
```

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-04-27T10:23:52.107

Use the [Replace Constructor with Builder](http://www.jetbrains.com/idea/webhelp/replace-constructor-with-builder.html) refactoring.

To use this function, click on the constructor's signature in your code, then right click and select the "Refactor" menu, then click "Replace Constructor with Builder..." to bring up the dialog box to generate the code.

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-07-15T20:30:17.707

I found the built-in builder pattern generation in IntelliJ to be a bit clunky for a few reasons:

1.  It needs to use an existing constructor as reference.
2.  It's not quickly accessible via the "Generate" menu (`command+N` on OS X).
3.  It only generates external Builder classes. As others have mentioned, it's very common to use static inner classes when implementing the builder pattern.

The [InnerBuilder plugin](https://plugins.jetbrains.com/plugin/7354) addresses all of these shortcomings, and requires no setup or configuration. Here's a sample Builder generated by the plugin:

```
public class Person {
    private String firstName;
    private String lastName;
    private int age;

    private Person(Builder builder) {
        firstName = builder.firstName;
        lastName = builder.lastName;
        age = builder.age;
    }

    public static final class Builder {
        private String firstName;
        private String lastName;
        private int age;

        public Builder() {
        }

        public Builder firstName(String firstName) {
            this.firstName = firstName;
            return this;
        }

        public Builder lastName(String lastName) {
            this.lastName = lastName;
            return this;
        }

        public Builder age(int age) {
            this.age = age;
            return this;
        }

        public Person build() {
            return new Person(this);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-02-02T02:57:24.803

Here's how to overcome the [shortcomings](https://stackoverflow.com/a/31440444/875485) mentioned by **Mansoor Siddiqui**:

> 1) It needs to use an existing constructor as reference.

Which is very easy to generate. Just hit `Alt` + `Ins` on Windows to invoke Generate menu and choose `Constructor`.

> 2) It's not quickly accessible via the "Generate" menu (command+N on OS X)

Just go to `Settings -> Keymap`, search for `Builder` and assign it a shortcut of your choice (if you use this functionality very often, which is rarely the case). You can assign `Alt` + `B` for example.

Another alternative is `Ctrl` + `Shift` + `A` (Find Action). Start typing `Builder` and you'll immediately get access to the command:

[![Find Action dialog](../Images/7245e5e1f9e00b22c85ce60c170d6c91.png)](https://i.stack.imgur.com/sjEoY.png)

You could use this shortcut for quickly getting access to any IntelliJ IDEA feature (this helps a lot when you don't remember exactly what the command is called and where to find it).

> 3) It only generates external Builder classes. As others have mentioned, it's very common to use **static inner classes** when implementing the builder pattern.

I also prefer my builders as static inner classes. Unfortunately, there is no straightforward way to do it, but it's still feasible. You just have to define the nested inner class yourself (leave it empty), and when you invoke `Replace Constructor with Builder` dialog, choose `Use existing` option and select your inner class. Works like a charm! Although, it would've been easier to make this option configurable.

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-11-17T12:09:20.367

If you are wondering if this can be used to create a class with an inner builder class as [described by Joshua Block](http://www.informit.com/articles/article.aspx?p=1216151&seqNum=2) - you just have to define an empty inner class first, then check "Use existing" and search for your newly created (inner class) and hit "Refactor".

PS! Cursor must reside inside constructor (pre-written) in order to use the "Replace Constructor with Builder" refactoring function.

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-09-14T19:09:58.627

The IntelliJ way to to this is, IMHO, is convoluted. There are out there two plugins (I prefer this one: [https://plugins.jetbrains.com/plugin/7354](https://plugins.jetbrains.com/plugin/7354)) that serve the purpose much much better.

For example, I prefer having the Builder class as an inner class of the PoJo. To achieve that with IntelliJ you need few extra strokes.

Another plus for the plugin is the location of the functionality (in the `Generate...` context menu).

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-01-07T18:04:08.167

Lombok is the easiest way to do it! (It has a Intellij plugin for syntax support [https://plugins.jetbrains.com/plugin/6317-lombok-plugin](https://plugins.jetbrains.com/plugin/6317-lombok-plugin))

Just add a `@Builder` annotation, and behind the walls it will add a builder implementation inside the object.

With Lombok:

```
import lombok.Builder;
import lombok.Singular;
import java.util.Set;

@Builder
public class BuilderExample {
  @Builder.Default private long created = System.currentTimeMillis();
  private String name;
  private int age;
  @Singular private Set<String> occupations;
} 
```

Without Lombok:

```
import java.util.Set;

public class BuilderExample {
  private long created;
  private String name;
  private int age;
  private Set<String> occupations;

  BuilderExample(String name, int age, Set<String> occupations) {
    this.name = name;
    this.age = age;
    this.occupations = occupations;
  }

  private static long $default$created() {
    return System.currentTimeMillis();
  }

  public static BuilderExampleBuilder builder() {
    return new BuilderExampleBuilder();
  }

  public static class BuilderExampleBuilder {
    private long created;
    private boolean created$set;
    private String name;
    private int age;
    private java.util.ArrayList<String> occupations;

    BuilderExampleBuilder() {
    }

    public BuilderExampleBuilder created(long created) {
      this.created = created;
      this.created$set = true;
      return this;
    }

    public BuilderExampleBuilder name(String name) {
      this.name = name;
      return this;
    }

    public BuilderExampleBuilder age(int age) {
      this.age = age;
      return this;
    }

    public BuilderExampleBuilder occupation(String occupation) {
      if (this.occupations == null) {
        this.occupations = new java.util.ArrayList<String>();
      }

      this.occupations.add(occupation);
      return this;
    }

    public BuilderExampleBuilder occupations(Collection<? extends String> occupations) {
      if (this.occupations == null) {
        this.occupations = new java.util.ArrayList<String>();
      }

      this.occupations.addAll(occupations);
      return this;
    }

    public BuilderExampleBuilder clearOccupations() {
      if (this.occupations != null) {
        this.occupations.clear();
      }

      return this;
    }

    public BuilderExample build() {
      // complicated switch statement to produce a compact properly sized immutable set omitted.
      Set<String> occupations = ...;
      return new BuilderExample(created$set ? created : BuilderExample.$default$created(), name, age, occupations);
    }

    @java.lang.Override
    public String toString() {
      return "BuilderExample.BuilderExampleBuilder(created = " + this.created + ", name = " + this.name + ", age = " + this.age + ", occupations = " + this.occupations + ")";
    }
  }
} 
```

Source: [https://projectlombok.org/features/Builder](https://projectlombok.org/features/Builder)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-03-03T03:31:30.157

In my opinion, the simplest way to get the inner static class instead of a separate are:

1.  If you don't have a constructor yet, generate one using [Generate a constructor dialog](https://www.jetbrains.com/help/idea/generating-constructors.html)
2.  Then, use [Replace Constructor with Builder](https://www.jetbrains.com/help/idea/replace-constructor-with-builder.html)
3.  Move the newly created class back to the initial one using [Move refactoring](https://www.jetbrains.com/help/idea/move-refactorings.html) (Hotkey: F6)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-09T17:01:05.793

As a complement to @CrazyCoder's answer, I think it's very useful to know that in the upper-right side of [Replace Constructor with Builder](https://www.jetbrains.com/idea/help/replace-constructor-with-builder.html) dialog there is a configuration button that you can use to rename setters' prefix.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-09-09T17:30:25.647

For those wanting to replace "too many parameters" with a builder pattern, do "extract parameter object" and then the convert constructor to builder mentioned in other answers here.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-04-05T10:55:36.577

Generate constructor of the class by right clicking on class Generate>Constructor. Then, on Windows, press is Ctrl+Shift+A to find action and type "builder", select "Replace constructor with builder.."

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-09-04T01:44:20.887

I have found the [Effective Inner Builder](https://plugins.jetbrains.com/plugin/13665-effective-inner-builder) to be the best option as it adds null checks and can start with just the members defined.

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-12-20T08:35:36.643

In addition to CrazyCoder's answer and Chris B's comment . There's a huge advantage using the refactor of Intellij compared to the usage of InnerBuilder plugin mentioned by Mansoor Siddiqui, that if the constructor is already used in code it will be refactored to the new created builder which is not the case with InnerBuilder.

# c - 尝试将节点添加到链表中

> ID：10348493
> 
> 赞同：2
> 
> 时间：2012-04-27T09:52:26.700
> 
> 标签：c

我一直在尝试将新节点添加到配置文件的链接列表中（例如 facebook 配置文件），并且在启动时出现运行时错误。这就是我得到的：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <stdlib.h>

typedef struct friend {
    char *name;
    int age;
    char gender;
    struct friend* next;
} friend;

void node_add(friend* new);

int main(int argc, char *argv[]) {
    friend amit;
    friend *new;

    amit.name = "amit";
    amit.age = 16;
    amit.gender = 'm';

    node_add(new);
    new->name = "amit";

    printf ("name: %s\n", new->name);
    system("PAUSE");    

    return 0;
}

void node_add(friend* new) {
    new = (friend* )malloc(sizeof(friend));
    friend* head = new;
    new -> next = head;
} 
```

我现在正在尝试创建一个删除节点功能。我试图找到用户想要删除哪个节点，然后通过执行删除它

```
delete -> next = delete -> next -> next 
```

问题是，我需要获取列表中的第一个节点。这是我写的：

```
void node_delete(friend* delete) {
    friend *temp;
    char name[256];
    int i = 0, j = 0;

    printf ("Please enter the friend's name you want to delete: \n");
    fgets (name, 256, stdin);
    fgets (name, 256, stdin);

    while (0 == (strcmp(temp -> next -> name, delete -> next -> name))) {
        temp = friend -> next;
    }
    temp -> next = temp -> next -> next;
    free (delete);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:55:56.063

**编辑：**

看来我的测试太快了，因为实际上这段代码存在一个非常严重的问题，但它很微妙：

在`main()`你从来没有真正指向任何新事物。它只是指向内存空间的乱码指针，有时可能会起作用，而且大多数时候，这很糟糕。

```
friend *new; // here's your problem; change this to:
friend *new = malloc(sizeof(friend)); 
```

此外，永远不要投射`malloc`.

**重新编辑：**

一个非常简单的链表实现可能看起来如何：

```
typedef struct _node node;
struct _node {
  void *payload;
  node *next;
};

node *create_node () {
  node *retval = malloc(sizeof(node));

  retval->payload = NULL;
  retval->next = NULL;

  return retval;
}

node *add_node (node *target) {
  if (target->next)
    return;

  node *next = create_node();
  node->next = next;
}

node *node_search (node *haystack, void *needle) {
  while (haystack) {
    if (!compare(needle, haystack->payload)) {
      return haystack;
    } else {
      haystack = haystack->next;
    }
  }

  return NULL;
} 
```

删除和插入的实现留给读者作为练习。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T10:03:33.873

当然，您分配内存并将其分配给局部变量。如果要更改指针，请再传递一个星号。而且，顺便说一句，不要命名任何像朋友或新的东西。它在 C++ 中的关键字，它会产生不需要的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T10:20:24.997

你应该有`friend *head`全局的。

而在

```
void node_add(friend* new) 
{
    new = (friend* )malloc(sizeof(friend));
    new->next = head;
    head = new; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T10:03:54.713

您应该使用双指针。

```
void node_add(friend **new) {
    *new = malloc(sizeof(friend));
    /* etc */
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-27T10:07:05.213

问题出在以下行： amit.name = "amit";

你应该是一个 malloc 并做一个 strcpy()

# c - 从 x86 汇编文件反编译

> ID：10348494
> 
> 赞同：4
> 
> 时间：2012-04-27T09:52:31.837
> 
> 标签：c, assembly, x86-64, decompiling, decompiler

我有一个 x86 汇编程序，我想将其反编译为更高级别的语言。我为此检查了[回旋镖](http://boomerang.sourceforge.net/)，但它似乎只接受二进制文件作为输入。我在这里有什么选择？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T18:00:24.410

有一种产品可以从名为[Relogix](http://www.microapl.co.uk/asm2c/sample86.html)的汇编程序中运行，但我希望他们的定价适合拥有大量代码库的企业客户，而不是单文件私人用户。在免费解决方案中，[Boomerang](http://boomerang.sourceforge.net/)（有点死）和[REC Studio](http://www.backerstreet.com/rec/rec.htm)（似乎处于活动状态）需要某种编译的二进制文件。[Hex-Rays](http://www.hex-rays.com/products/decompiler/index.shtml)也需要二进制输入（通过 IDA）。

# xml - JSTL：访问第二个 xml dom 变量

> ID：10348496
> 
> 赞同：0
> 
> 时间：2012-04-27T09:52:37.770
> 
> 标签：xml, xpath, jstl

我正在尝试循环访问第二个 xmldom。

```
<c:import var="some1xml" url="/xml/some1.xml"/>
<c:import var="some2xml" url="/xml/some2.xml"/>
<x:parse xml="${some1xml}" var="some1"/>
<x:parse xml="${some2xml}" var="some2"/>

<x:forEach select="$some1xml/config/seats/seat[@id > $Start and @id < $End]" var="seats">
    <x:out select="$some2xml/root/name[@id='$seats/@id']"/>
</x:forEach> 
```

但它不会给我任何回报。即使我删除了 xpath 条件。当我将它放在 forEach 上方时，它确实返回了数据，因此解析成功。

JSTL 中可能有什么问题或这种正常行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:46:12.933

问题是第二个 xml 文档。该文档有一个名为 root 的 documentRoot。这混淆了标签库。删除 xPath 中的根就可以了。

# php - PHP_OS - 它是否包含它构建或运行的操作系统？

> ID：10348499
> 
> 赞同：3
> 
> 时间：2012-04-27T09:52:51.050
> 
> 标签：php

我现在搜索了很长一段时间，但我找不到明确的答案来回答常量 PHP_OS 是否包含操作系统 php 是在其上构建或运行的。

php_uname 的 php 文档 ( [http://php.net/manual/de/function.php-uname.php](http://php.net/manual/de/function.php-uname.php) ) 指出：“对于操作系统的名称，请考虑使用 PHP_OS 常量，但请记住这个常量将包含***构建***PHP 的操作系统。”

然而，在同一页面上，有一条 2006 年的评论指出：“与最后一条注释相反，PHP_OS 确实显示了 PHP 当前运行的操作系统，[...] 这与构建 PHP 的系统无关。 "

关于这个问题，我在网上的任何地方都找不到任何明确的答案（关于 php_uname 和 PHP_OS 的话题大多只涵盖操作系统检测和类似主题）。现在是什么 - 文档或评论？

pear-core 包使用 PHP_OS 来确定它是在类 Unix 系统上还是在 Windows 上***运行，因此可以安全地假设文档确实是错误的吗？***

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T10:08:03.807

我看了一下源代码。配置脚本执行此操作：

```
PHP_OS=`uname | xargs`
AC_DEFINE_UNQUOTED(PHP_OS,"$PHP_OS",[uname output]) 
```

然后`main.c`这样做：

```
char *php_os;
php_os=PHP_OS;
REGISTER_MAIN_STRINGL_CONSTANT("PHP_OS", php_os, strlen(php_os), CONST_PERSISTENT | CONST_CS); 
```

这意味着`PHP_OS`在PHP中是`php_os`C代码中的内容，即配置脚本构造的头文件中的#defined，由`uname`配置时运行确定。

所以，这是您构建的系统，而不是您运行的系统。

有一些适用于 Windows 的特殊代码：`main.c`设置`php_os`为`"WINNT"`if`WIN32`已定义。但是，同样，这是在构建时，而不是在运行时，即使您设法在 Unix 上编译并在 Windows 上运行，反之亦然。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T09:57:33.560

`PHP_OS`（PHP 常量）是PHP 模块启动时[定义的常量。](http://lxr.php.net/opengrok/xref/PHP_5_4/main/main.c#2087)它的值[来自](http://lxr.php.net/opengrok/xref/PHP_5_4/main/main.c#1960)the`PHP_WIN32`或`PHP_OS`C 常量（跟随线索最终导致[this](http://lxr.php.net/opengrok/xref/PHP_5_4/configure.in#1272)，但这不是回答问题所必需的）。

所以它描述的是构建 PHP 的*系统*。

# mysql - MySQL投票计算

> ID：10348501
> 
> 赞同：0
> 
> 时间：2012-04-27T09:52:55.953
> 
> 标签：mysql

我有一个应用程序允许用户投票并有两张桌子

视频

```
|id|uri_code|文件名|created_on|已删除|

```

投票

```
|id|video_id|ip|created_on|

```

我希望能够选择所有视频信息并获得每个视频的总票数，这可以通过 sql 语句实现，还是最好使用服务器端代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T09:56:41.210

使用 SQL 肯定是可能的——这种事情正是 SQL 擅长的！您想通过视频对所有选票进行“分组”，因此该`GROUP BY`条款正是您所追求的：

```
SELECT Video.*, COUNT(*)
FROM Video JOIN Votes ON Votes.video_id = Video.id
GROUP BY Video.id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T09:56:34.567

```
select vi.*, count(vo.id) as votes
from video vi
inner join votes vo on vi.id = vo.video_id
group by vi.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T09:56:35.470

也许是这样的：

```
SELECT
    Video.id,
    Video.uri_code,
    Video.filename,
    Video.created_on,
    Video.deleted,
    (
        SELECT
            COUNT(*)
        FROM
            Votes
        WHERE
            Votes.video_id=Video.id
    ) AS Total
FROM
    Video 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T10:17:19.263

嗨，您可以在这里使用 mysql 查询

1.如果您只需要获得视频的总票数而没有任何其他条件，那么

```
SELECT count( Votes.id ) AS total_vote, Video. *
FROM Video
LEFT JOIN Votes ON Video.id = Votes.video_id
WHERE Video.deleted = '1'
GROUP BY Video.id 
```

2.如果您必须获得具有某些条件的视频的总票数，例如已删除有 0 和 1 值，未删除视频为 0，枚举类型的已删除值为 1，您必须获得未删除视频投票详细信息

```
SELECT count( Votes.id ) AS total_vote, Video. *
FROM Video
LEFT JOIN Votes ON Video.id = Votes.video_id
WHERE Video.deleted = '0'
GROUP BY video.id 
```

# c# - Windows Phone 7 导航到 URL

> ID：10348505
> 
> 赞同：-1
> 
> 时间：2012-04-27T09:53:06.360
> 
> 标签：c#, windows-phone-7, navigatetourl

我有一个名为的文件夹`Views`，其中有我想要导航到的页面。此文件夹中有一个名为“Y.XAML”的页面，因此我尝试使用：

```
NavigationService.Navigate(new Uri("Viev//Y.xaml", UriKind.Relative)); 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T09:56:40.673

试试这个。

```
NavigationService.Navigate(new Uri("/Views/YourPage.xaml", UriKind.Relative)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T09:57:38.857

1.  您导航到“Viev”而不是“视图”。
2.  它的 Views/Y.xaml 不是 Views//Y.xaml

除此之外，它应该可以工作。如果没有，请提供更多信息

# performance - 是否值得在 CouchDB 中为不同类型的数据创建单独的数据库？

> ID：10348507
> 
> 赞同：0
> 
> 时间：2012-04-27T09:53:09.387
> 
> 标签：performance, couchdb

如果我在 CouchDB 中有两个不同的数据集，

1.  一个是不经常更新的（主要是对现有文档的更新），
2.  另一个非常频繁地写入（仅附加）

在性能方面将它们分离到单独的数据库中是否有任何优势？假设数据库定期压缩。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T04:37:09.797

根据我的经验，性能提升在很大程度上取决于查询数据时的视图。我看不到通过将数据库与频繁写入分开会如何显着提高写入性能，但由于这会影响数据库的大小，我建议将它们分开保存。这将允许在不同的时间和整体上运行压缩，如果您确实遇到数据库问题，它将允许您隔离它并比单个数据库中的所有问题更快地解决它。

# java - Apache Camel 是否支持自带的 JMS 连接池？

> ID：10348509
> 
> 赞同：1
> 
> 时间：2012-04-27T09:53:20.107
> 
> 标签：java, jms, connection-pooling, apache-camel

我有一个关于 Camel 中的 JMS 的问题。

所以我正在使用一些公司提供的JMS。但是这个 JMS 实现不提供池化连接工厂。

那么骆驼有默认的池连接实现吗？

或者它做一些微不足道的事情，比如：

1) 打开连接

2) 公开课

3) 读/写消息

4) 关闭会话

5) 关闭连接

因为如果相信我的日志骆驼就像我在第二种情况下提到的那样工作。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:00:21.477

Camel 几乎使用 JmsTemplate（来自 Spring Framework）来发送消息。 [ActiveMQs对JmsTemplate的思考](http://activemq.apache.org/jmstemplate-gotchas.html)

本质上，您确实适用于“生产”场景，除非底层 Jms 提供程序具有池连接工厂。如果您在 App Server 中运行 Spring 或 Camel，通常会出现这种情况。

如果您设置类似

```
from("jms:queue:QUEUE.IN").to("somewhere:over/the/rainbow"); 
```

然后一个或多个正在进行的消费者将处于活动状态，不会破坏每条消息的会话（只有在设置事务时才提交消息）。还可以为 JMS 请求/响应汇集响应侦听器。有关信息，请参阅[camel.apache.org/jms](http://camel.apache.org/jms)。

但你是对的，如果你有一个远程（非池化）JMS 提供程序并且经常触发来自 Camel 的传出消息，这可能是一个性能问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T08:08:47.567

使用spring CachingConnectionFactory。顺便提一句。您使用哪个 JMS 提供程序？

[http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/jms/connection/CachingConnectionFactory.html](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/jms/connection/CachingConnectionFactory.html)

# android - 带有项目列表的Android滚动视图

> ID：10348512
> 
> 赞同：0
> 
> 时间：2012-04-27T09:53:28.073
> 
> 标签：android, listview, scrollview

我想要一个具有以下垂直布局的视图

1.  图像（IamgeView）

2.  图片的描述（TextView）

3.  评论列表

约束是我希望整个页面滚动，而不仅仅是评论列表。评论的数量可能会有所不同。如果我将 ListView 用于评论，则整个屏幕不会滚动。

请提出一种方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T09:58:45.123

您可以将标题视图添加到您的 ListView。无论您在标题视图中放置什么，都将像列表一样滚动。

# objective-c - 如何使用块作为参数

> ID：10348514
> 
> 赞同：0
> 
> 时间：2012-04-27T09:53:31.320
> 
> 标签：objective-c, ios, objective-c-blocks

> **可能重复：**
> [Obj-C：__block 变量](https://stackoverflow.com/questions/8878358/obj-c-block-variables)

在块编程中如何使用块作为参数

```
 NSArray *(^blockreturnarray) (NSArray *);
     blockreturnarray= ^(NSArray * a)
      {
          NSLog(@"%@",a); 
          return a;
      };

     blockreturnarray(array1); 
```

简单我的问题我有一个块创建和另一个块创建那么如何在一个块中传递参数块。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T10:40:33.747

这可能会很麻烦，所以我会使用 typedef，它可能看起来像这样

```
typedef void (^basicBlock)(void);
typedef void (^blockAcceptingBlock)(basicBlock); 
```

然后

```
basicBlock block = ^ {
    NSLog(@"Called from block passed as param");
}; 

blockAcceptingBlock parentBlock = ^(basicBlock childBlock) {
    childBlock();
};

parentBlock(block); 
```

* * *

如果没有 typedef，它在所有圆括号的定义中会有点嘈杂（请记住，这些是简单的块，因此显示的 defs 仍然相当可读）

```
void (^block)(void) = ^ {
     NSLog(@"Called from block passed as param");
};

void (^parentBlock)(void (^childBlock)(void)) = ^(void (^childBlock)(void)) {
    childBlock();
};

parentBlock(block); 
```

两个输出

```
#=> 2012-04-27 11:39:12.798 Untitled[19725:707] Called from block passed as param 
```

# jquery - 如何在第二个结果页面上保留搜索词

> ID：10348515
> 
> 赞同：1
> 
> 时间：2012-04-27T09:53:32.433
> 
> 标签：jquery, python, django, search, pagination

我正在使用 Django 开发一个应用程序，我在一个非常大的数据库和一个分页器中进行了简单的搜索以获取结果。问题是当我尝试转到第二个结果页面时，我从链接中丢失了搜索词。

我试图用 JQuery 重写输入字段中的搜索词，但没有成功。我试图将值从服务器端重新发送到输入字段，也没有工作。

我怎样才能设法将它保留在结果的第二页？还有其他提示吗？

这是我的代码，至少相关部分：

**结果.html：**

```
...
<form method="POST" id="searchForm"  action="{% url ps.views.search page=1 searchTerm='__search_term__' %}">
    {% csrf_token %}
    <input type="text" id="billSearched">
    <input type="submit" value="{% trans "Look for" %}">
</form>
 ...
<div class="pagination">
    {% if current_page.has_previous %}
        <a href="{% url ps.views.search page=current_page.previous_page_number searchTerm='__search_term__' %}">previous</a>
    {% endif %}

    <span class="current">
        Page {{ current_page.number }} of {{ current_page.paginator.num_pages }}
    </span>

    {% if current_page.has_next %}
        <a href="{% url ps.views.search page=current_page.next_page_number searchTerm='__search_term__' %}">next</a>
    {% endif %}
</div> 
```

**搜索.py：**

```
def search(request,page,searchTerm):
    found_bills = Bill.objects.filter(name__icontains=searchTerm)
    searchedWord = str(searchTerm)
    paginator = Paginator(found_bills,25)
    try:
        current_page = paginator.page(page)
    except (EmptyPage, InvalidPage):
        current_page = paginator.page(paginator.num_pages)
    bills_list = list(current_page.object_list)
    return render_to_response('results.html',{"bills_list":bills_list,"current_page":current_page,"searchTerm":searchTerm,"searchedWord":searchedWord},context_instance=RequestContext(request)) 
```

还有**urls.py**虽然我不确定它是否有用:)

```
urlpatterns = patterns('',
    url(r'^$','ps.views.bills',name="bills"),
    url(r'^i18n/', include('django.conf.urls.i18n')),
    url(r'^search/(?P<page>\d+)/(?P<searchTerm>\w*)','ps.views.search',name="search"),) 
```

**`I should mention that in the address bar the searched term when I go to page 2 is "__search_term__".`**

IE`http://127.0.0.1:8000/search/2/__search_term__`

先感谢您！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:02:29.323

将表单方法更改为 GET 而不是 POST，然后使用搜索词构建链接作为 URL 查询字符串的一部分，如下所示...

```
<a href="?page={{ contacts.previous_page_number }}">previous</a> 
```

[https://docs.djangoproject.com/en/dev/topics/pagination/](https://docs.djangoproject.com/en/dev/topics/pagination/)

# asp.net-mvc - 从 LINQ 选择语句返回自定义 json

> ID：10348521
> 
> 赞同：1
> 
> 时间：2012-04-27T09:53:59.263
> 
> 标签：asp.net-mvc, json, linq

一个非常新的 MVC、JSON 和 LINQ 程序员 - 我创建了一个返回 JSONResult 的 ActionResult：

```
var formhistory = from p in _formsRepository.ReturnedForms
                          where p.DateAdded >= DateTime.Now.Date.AddDays(-15) && p.DateAdded <= DateTime.Now.Date
                          group p by new {p.Centre, p.Form, p.DateAdded}
                          into g
                          select new {
                                         g.Key.Centre,
                                         g.Key.Form,
                                         g.Key.DateAdded,
                                         Total = g.Sum(p => p.Quantity)
                                     };
return Json(formhistory, JsonRequestBehavior.AllowGet); 
```

这给了我一个很好的 JSON 结果集，如下所示：

```
[
  {"Centre":"Centre1","Form":"Advice","DateAdded":"\/Date(1331856000000)\/","Total":1067},
  {"Centre":"Centre1","Form":"Advice","DateAdded":"\/Date(1332460800000)\/","Total":808},
  {"Centre":"Centre1","Form":"Advice","DateAdded":"\/Date(1333062000000)\/","Total":559},
  {"Centre":"Centre1","Form":"Advice","DateAdded":"\/Date(1333666800000)\/","Total":1448}
] 
```

我的问题是：我正在尝试操作这个 JSON 字符串，以便“Form”和“Total”的 2 个键/值对只有 1 个，即“Form”：“Total”。

我意识到这可能是一个非常基本的问题，但是谁能指出我正确的方向？（除了门！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:00:55.823

```
select new {
   g.Key.Centre,
   //g.Key.Form,
   g.Key.DateAdded,
   Form = g.Sum(p => p.Quantity)
} 
```

会给你一个关键的“表格”，它的价值是以前的“总计”。那是你要的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:08:45.693

修改 linq 查询中的选择部分

```
 select new {  
      g.Key.Centre, 
      g.Key.DateAdded,  
      NewField =  String.Format("{0} - {1}",g.Key.Form,g.Sum(p => p.Quantity).ToString())                                     
     }; 
```

我认为这将解决您的目的。

# javascript - 如何在网站上使用 aloha 编辑器

> ID：10348526
> 
> 赞同：4
> 
> 时间：2012-04-27T09:54:12.540
> 
> 标签：javascript, jquery

我想在我的网站上使用 aloha 编辑器，我从 [ [http://aloha-editor.org/](http://aloha-editor.org/].Now) ] 下载了它。现在我完全糊涂了，因为下载的包包含很多文件。

我拿起 aloha.js 和 aloha.css 并添加了以下脚本

```
$(document).ready(function () {
      Aloha.ready(function () {
          var $ = Aloha.jQuery;
          $('.editable').aloha();
      })
}); 
```

但它不起作用。然后我尝试了

```
<script src="http://cdn.aloha-editor.org/current/lib/aloha.js"
      data-aloha-plugins="common/format,
      common/list,
      common/link,
      common/highlighteditables">
</script>

<!-- load the Aloha Editor CSS styles -->
<link href="http://cdn.aloha-editor.org/current/css/aloha.css" type="text/css" />

<!-- make all elements with class="editable" editable with Aloha Editor -->
<script type="text/javascript">
     Aloha.ready( function() {
            var $ = Aloha.jQuery;
            $('.editable').aloha();
     });
</script> 
```

它工作正常。但是我想使用我下载的捆绑包，谁能告诉我如何管理所有文件和文件夹（例如，我必须放置图像文件夹和其他文件夹..）以便它开始工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-25T17:02:02.953

将所有文件复制到包含插件、lib、img、css 的根目录中，并参考上述指南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-02T22:12:32.430

请参阅[http://www.alohaeditor.org/guides/using_aloha.html](http://www.alohaeditor.org/guides/using_aloha.html)。将文件保存在`/javascripts`Web 服务器的根目录中，例如运行 localhost 的位置。

# c# - 按不同列表的列对列表进行排序

> ID：10348528
> 
> 赞同：0
> 
> 时间：2012-04-27T09:54:39.997
> 
> 标签：c#, linq, sorting

在下面的选择和排序查询中......我如何能够在全局的 TagId 顺序上执行 tmp 的 orderby？

两个列表......都有不同数量的项目，但都有一个名为 TagId 的字段。我想返回费用列表，但按 TagId 的顺序从费用Summary_MemberTmp 排序。

```
var expensesSummary_Member = from global in expensesSummary_Global.Select(x => x.TagId).ToList()
                             join tmp in expensesSummary_MemberTmp
                             on global equals tmp.TagId
                             orderby tmp.TagId
                             select tmp; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:01:36.057

如果要保留第一个序列的顺序，则根本不应该对结果进行排序：

```
var expensesSummary_Member =
    from global in expensesSummary_Global.Select(x => x.TagId).ToList()
    join tmp in expensesSummary_MemberTmp
    on global equals tmp.TagId
    select tmp; 
```

# php - 根据其值在php中重构多维数组

> ID：10348534
> 
> 赞同：2
> 
> 时间：2012-04-27T09:54:53.723
> 
> 标签：php, arrays

我有一个像这样的多维 php 数组：

其中“b”列有 2 个可能的值（x，y），“v”列有 2 个可能的值（t,f）

```
Array
(
[0] => Array
    (
        [a] => 6
        [b] => x
        [c] => t
    )

[1] => Array
    (
        [a] => 4
        [b] => x
        [c] => t
    )
[2] => Array
    (
        [a] => 6
        [b] => y
        [c] => f
    ) 
```

我想通过以下方式重新排列列，以便它们由 values 构成。

我的问题是，有没有一种聪明的方法可以使用一些本机 php 函数来做到这一点，而无需遍历所有内容

```
Array(
    [value of b=x] => Array(
        [value of c=t] => Array( all ids in the array)
        [value of c=f] => Array( all ids in the array)
     )
    [value of b=y] => Array(
        [value of c=t] => Array( all ids in the array)
        [value of c=f] => Array( all ids in the array)
     )

  ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:10:25.260

我假设`all ids in the array`您的意思是“`a`数组中的所有列值”。在这种情况下，这就是您想要的：

```
$result = array();

array_walk($array, function($val, $key) use (&$result) {
  $result[$val['b']][$val['c']][] = $val['a'];
});

print_r($result); 
```

如果`ids`你的意思是外部数组索引，只需在上面的代码中更改`$val['a']`为。`$key`

# java - java：在我的情况下跟踪错误行

> ID：10348536
> 
> 赞同：1
> 
> 时间：2012-04-27T09:55:07.153
> 
> 标签：java

我正在开发一个现有的基于 Java EE 的应用程序。不知何故，他们编写的功能不起作用。

当我发现 Linux 服务器中的日志时，我在那里发现了这个异常

```
Caused by: java.lang.ArrayIndexOutOfBoundsException: 1
at com.cyber.EasyOptions.view(EasyOptions.java:2054) 
```

这到底是什么意思？？

1.  我猜有一个名为 EasyOptions 的类，其中有一个方法视图，里面有这个异常发生？？

这个特殊的 EasyOptions 类存在于我们代码中的一个 jar 文件中。

我正在使用 JD-GUI 反编译器，当导航到这个特定的 jar 并看到这个类 EasyOptions 时，在视图方法内部没有这样的行（2054）所以不知道我们可以用这种方式匹配行号吗？？

我想我们不能以这种方式匹配行号，我的问题是如何找出确切的错误行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T10:01:41.180

> 猜想有一个名为 EasyOptions 的类，其中有一个方法视图，里面有这个异常发生？？

这是正确的。

> 我正在使用 JD-GUI 反编译器，当导航到这个特定的 jar 并看到这个类 EasyOptions 时，在视图方法内部没有这样的行（2054）

行号仅在原始源代码的上下文中才有意义。反编译的代码与原始代码不同，并且会有不同的行号。

> 我们怎样才能找出准确的错误线

如果没有原始源代码，这将很棘手。缩小可能性的一种方法是查看 的反编译代码`EasyOptions.view()`，寻找正在访问数组的位置。

# java - Android - 仅修复 1 页的屏幕方向（phonegap）

> ID：10348538
> 
> 赞同：11
> 
> 时间：2012-04-27T09:55:19.043
> 
> 标签：java, javascript, android, cordova, orientation

我在修复我的 index.html 页面的屏幕方向时遇到了问题。我想让应用程序在主页上以外的地方旋转。我了解将以下内容添加到您的活动中 - android:screenOrientation="portrait" 会阻止屏幕旋转。

但是，我需要设置它，使其特定于页面。我正在使用 phonegap，因此需要停止我的网页查看页面。

我尝试在我的清单中调用以下活动 - com.phonegap.droidgap.index.html，但这不起作用。

有人可以建议我如何仅定义 1 页的固定方向吗？

提前致谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-27T10:29:53.313

您可以使用此 Android 版 PhoneGap 插件：

[https://github.com/champierre/pg-plugin-screen-orientation](https://github.com/champierre/pg-plugin-screen-orientation)

并添加到您的 index.html 页面 onload：

```
navigator.screenOrientation.set('portrait'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:21:14.573

您可以通过代码设置屏幕方向，例如`setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);`参见[http://developer.android.com/reference/android/app/Activity.html#setRequestedOrientation%28int%29](http://developer.android.com/reference/android/app/Activity.html#setRequestedOrientation%28int%29)。在 AndroidManifest.xml 中，您只能将其设置为全局选项。

# xpath - 使用 xPath 选择元素

> ID：10348541
> 
> 赞同：0
> 
> 时间：2012-04-27T09:55:28.583
> 
> 标签：xpath, selenium, traversal

我正在尝试编写测试自动化代码，并且很难在以下结构中使用 Xpath 找到元素。

```
<div id="270590-bar" class="chart-row clearfix" style="display: block;">
    <div class="bar-col float">
        <div class="bar-wrapper">
           <div class="topic-name-wrapper" style="background-color: transparent;">Business</div>
           <div class="bar" style="width:170px"></div>
        </div>
    <div style="float:left;position:relative; ">
        <div class="level-dd-fake">Intermediate</div>
        <select id="270590-level" class="level-dropdown level-select">
    </div>
    <div id="270590-un" class="topic unsubscribe" style="float:left; margin: 0px 0px 0px 1px !important;"></div>
</div> 
```

有几个数据行将使用与上述相同的行集来处理每一行。当我给出里面的值时，`class="topic-name-wrapper"`例如：-业务

我想选择`DropDown`元素`class="level-dropdown level-select"`

希望问题很清楚，对此的任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:24:32.947

据我了解，您需要这样的东西：

```
//div[*[.='Business']]/following-sibling::div/select 
```

# winapi - Win32：消息发送到线程？

> ID：10348547
> 
> 赞同：0
> 
> 时间：2012-04-27T09:55:40.963
> 
> 标签：winapi

我知道发送消息时，它具有 hwnd 值，以便系统知道哪个窗口负责处理该消息。当 hwnd 为 NULL 时，这意味着这是一个线程消息。那么被调用来处理该消息的过程函数是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T10:03:39.303

请注意，仅在[PostMessage](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644944%28v=vs.85%29.aspx)（而不是[SendMessage](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644950%28v=vs.85%29.aspx)）下记录了使用`HWND`as发送`NULL`将导致函数**“表现得像 PostThreadMessage 一样，以 dwThreadId 作为当前线程”**。

请参阅[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644928%28v=vs.85%29.aspx)了解线程如何实现消息队列。

在回答你原来的问题：

> 那么被调用来处理该消息的过程函数是什么？

[PostThreadMessage](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644946%28v=vs.85%29.aspx)发布到线程的消息队列。

PostThreadMessage 的注释：**“如果指定的线程没有消息队列，该函数将失败。当线程第一次调用用户或 GDI 函数之一时，系统会创建一个线程的消息队列。”**

# java - 如何在 Eclispe jdt 3.6 中将方法参数作为 IJavaElements 获取？

> ID：10348552
> 
> 赞同：1
> 
> 时间：2012-04-27T09:55:58.033
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-jdt

出于兼容性原因，我必须将我的 Eclipse 插件从 JDT 3.7 调整到 3.6。不幸的是，旧版本似乎还没有方便的 .getParameters() 方法。

我需要向用户显示一个 ElementTreeSelectionDialog，允许他浏览类的方法并选择方法的参数。为此，我用这个简单的 getChildren 方法编写了一个 ITreeContentProvider：

```
public Object[] getChildren(Object paramObject) {       
        if(paramObject instanceof ICompilationUnit){
            ICompilationUnit icu = (ICompilationUnit) paramObject;
            try {
                return icu.getAllTypes()[0].getMethods();
            } catch (JavaModelException e) {
                e.printStackTrace();
            }
        }
        if(paramObject instanceof IType){
            IType type = (IType) paramObject;
            try {
                return type.getMethods();
            } catch (JavaModelException e) {
                e.printStackTrace();
            }
        }
        if(paramObject instanceof IMethod){
            IMethod method = (IMethod) paramObject;
            try {
                return method.getParameters();
            } catch (JavaModelException e) {
                e.printStackTrace();
            }
        }
        return null;
    } 
```

我想坚持使用能够使用 JavaUILabelProvider 的接口，它使用适当的图标、签名等显示所有内容。

所以棘手的部分是从参数或其他一些有效的 IJavaElement 实现创建有效的 LocalVariable 对象，这些实现将由 JavaUILabelProvider 正确显示。

我已经尝试创建一个LocalVariable []数组，但这并没有真正奏效，因为我找不到任何方法来获取元素的必要位置标记和注释对象......

# asp.net - 大文件上传使用 HttpHandler 还是 HttpModule？

> ID：10348554
> 
> 赞同：0
> 
> 时间：2012-04-27T09:56:12.020
> 
> 标签：asp.net, file-upload, request, httphandler, httpmodule

我有一个网络表单应用程序。它需要能够上传大文件（100MB）。我打算使用 httpHandler 和 httpModule 将文件拆分为**chunk**。

我还看了[http://forums.asp.net/t/55127.aspx](http://forums.asp.net/t/55127.aspx)

但这是一篇非常古老的帖子，我在互联网上看到了一些使用 httpHandler 的示例。

例如[http://silverlightfileupld.codeplex.com/](http://silverlightfileupld.codeplex.com/)

我不确定 httpModule 是否比 httpHandler 更好。

由于 httpModule 适用于整个应用程序的请求，我只希望它适用于指定页面。

任何人都可以清楚地解释**httpHandler用于大文件上传的缺点**（如果有的话）吗？如果你知道一个没有 flash/silverlight 的好例子，你能把链接贴在这里吗？谢谢

编辑：想看一些**源代码**示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:00:48.017

为什么不试试[plupload](http://www.plupload.com/)，它有很多功能和很多后备，这里是如何完成的。

这是 http 处理程序代码：

```
Imports System
Imports System.IO
Imports System.Web

Public Class upload : Implements IHttpHandler

    Public Sub ProcessRequest(ByVal context As HttpContext) Implements IHttpHandler.ProcessRequest
        Dim chunk As Integer = If(context.Request("chunk") IsNot Nothing, Integer.Parse(context.Request("chunk")), 0)
        Dim fileName As String = If(context.Request("name") IsNot Nothing, context.Request("name"), String.Empty)

        Dim fileUpload As HttpPostedFile = context.Request.Files(0)

        Dim uploadPath = context.Server.MapPath("~/uploads")
        Using fs = New FileStream(Path.Combine(uploadPath, fileName), If(chunk = 0, FileMode.Create, FileMode.Append))
            Dim buffer = New Byte(fileUpload.InputStream.Length - 1) {}
            fileUpload.InputStream.Read(buffer, 0, buffer.Length)

            fs.Write(buffer, 0, buffer.Length)
        End Using

        context.Response.ContentType = "text/plain"
        context.Response.Write("Success")
    End Sub

    Public ReadOnly Property IsReusable() As Boolean Implements IHttpHandler.IsReusable
        Get
            Return False
        End Get
    End Property

End Class 
```

# java - 使用空字符串提交正则表达式

> ID：10348555
> 
> 赞同：1
> 
> 时间：2012-04-27T09:56:21.943
> 
> 标签：java, regex

我有以下正则表达式，我通过 xml 文件为 java 提供服务。

```
[a-zA-Z -\(\) \-]+ 
```

此正则表达式用于验证服务器端和客户端（通过 javascript），并且在仅允许字母内容和一些其他字符时效果很好......

我的问题是它还允许零长度字符串/空通过。

有没有人对此有一个简单而优雅的解决方案？

我已经试过了...

```
[a-zA-Z -\(\) \-]{1,}+ 
```

但这似乎不起作用。

干杯!

> **调查后更新**

看来我提供的代码确实有效......

```
String inputStr = " ";
    String pattern = "[a-zA-Z -\\(\\) \\-]+";
    boolean patternMatched = java.util.regex.Pattern.matches(pattern, inputStr);
    if ( patternMatched ){
        out.println("Pattern MATCHED");
    }else{
        out.println("NOT MATCHED"); 
    } 
```

在仔细研究之后，我认为问题很可能在我的一些 java bean 编码的逻辑中......似乎正则表达式在应该进行字符串解析的地方被删除，从而允许空字符串提交...还有任何其他字符串... EEJIT 我是...

为帮助同行评审我最初的愚蠢而欢呼......！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:00:11.277

你有没有试过这个：

```
[a-zA-Z -\(\) \-]+ 
```

# android - 图像视图的位置

> ID：10348560
> 
> 赞同：0
> 
> 时间：2012-04-27T09:56:36.760
> 
> 标签：android, layout

我想在 android 设备上将图像放在屏幕宽度减去 20 dp 的右侧。

其伪代码可能是：

1.  从 res/drawable 文件夹中获取图像。
2.  设置图像位置 - 这必须是屏幕宽度减去 20 dp，它应该计算屏幕宽度然后设置位置（这可能在 xml 中吗？）
3.  渲染图像。

第 1 部分和第 3 部分很清楚，但我想第二部分很难，我需要一些帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:01:44.527

您可以使用 a`RelativeLayout`作为容器。在此布局内设置`android:layout_alignParentRight="true"`和`android:layout_marginRight="20dp"`上。`ImageView`

[您可以在此处](http://developer.android.com/guide/topics/ui/layout-objects.html#relativelayout)获得更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:02:34.513

我的理解是，您需要在获取窗口尺寸的 Java 类中执行此操作，进行计算，然后在`onCreate()`方法中设置图像的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T10:05:49.237

是的，您也可以使用 xml 获取它：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"    
    android:gravity="right"
    android:layout_marginRight="20dp"
    android:orientation="vertical" >

   <ImageView
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:src="@drawable/icon" />

</LinearLayout> 
```

请注意，`android:layout_marginRight="20dp"`从右侧设置填充

# php - 处理测验脚本，需要通过 php 计算结果，搜索 $_POST 时遇到问题

> ID：10348564
> 
> 赞同：0
> 
> 时间：2012-04-27T09:56:58.960
> 
> 标签：php

在这个系统上，用户可以创建任意数量的问题的测验，该信息保存到数据库中。我正在使用以下内容将测验输出给用户。这输出很好，您只能选择每个答案之一。每个问题都有 3 个具有相同帖子名称的输入，q1 有 ans1 ans1 ans1，q2 有 ans2ans2 ans2 等等......这就是“.$x”的位置。进来。

```
 $x = 1;
    while($row = mysql_fetch_row($quiz)) {
        echo "Question ".$x.": ";
        echo "<a><b> $row['question'] </b></a>";
        echo "<input type='radio' name='ans".$x." /> ".$row['ans1']."<br />";
        echo "<input type='radio' name='ans".$x." /> ".$row['ans2']."<br />";
        echo "<input type='radio' name='ans".$x." /> ".$row['ans3']."<br />";
        $x = $x + 1;
    } 
```

问题出在下一个 php 页面中。我正在尝试遍历所有帖子，并且帖子与正确的ans匹配，然后结果=结果+ 1。我需要一个执行以下操作的循环：

```
$x = 1;
while($row = mysql_fetch_row($quiz)) {
    if ($_POST[ans[$x]]=='$row['correct']' { $result = $result + 1; 
    }
    $x = $x + 1;
    } 
```

有没有办法我可以在 $_POST 值中使用一个变量来为每个循环说 ans1 ans2 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T10:10:25.523

```
$x = 1;
while($row = mysql_fetch_row($quiz)) {
    if ($_POST['ans'.$x] == $row['correct']) { $result = $result + 1; }
    $x = $x + 1;
} 
```

希望这能解决你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:14:07.540

尝试这样的事情

```
$x = 1;
while($row = mysql_fetch_row($quiz)) {
    echo "Question ".$x.": ";
    echo "<a><b> $row['question'] </b></a>";
    echo "<input type='radio' name='ans[".$row['ansId']."][".$x."] ' /> ".$row['ans1']."<br />";
    echo "<input type='radio' name='ans[".$row['ansId']."][".$x."] ' /> ".$row['ans2']."<br />";
    echo "<input type='radio' name='ans[".$row['ansId']."][".$x."] ' /> ".$row['ans3']."<br />";
    $x = $x + 1;
} 
```

你的前台脚本：

```
$x = 1;
while($row = mysql_fetch_row($quiz)) {
if ($_POST['ans'][$row['ansId']][$x]=='$row['correct']' { 
    $result = $result + 1; 
}
$x = $x + 1;
} 
```

# php - 计时器脚本在托管服务器上不起作用

> ID：10348565
> 
> 赞同：-1
> 
> 时间：2012-04-27T09:56:59.480
> 
> 标签：php

计时器 java 脚本在本地服务器上运行良好。但是当我在托管服务器上运行它时，它不会启动计时器。

```
<script type="text/javascript" >
<?php
    $elapsed=time()-strtotime($_SESSION['starttime']);
    if(((int)$elapsed/60)<(int)$_SESSION['duration'])
    {
        $result=executeQuery("SELECT " .
        " TIME_FORMAT(TIMEDIFF(endtime,CURRENT_TIMESTAMP),'%H') as hour, ".
        " TIME_FORMAT(TIMEDIFF(endtime,CURRENT_TIMESTAMP),'%i') as  min, ".
        " TIME_FORMAT(TIMEDIFF(endtime,CURRENT_TIMESTAMP),'%s') as sec ".
        " FROM studenttest ".
        " WHERE stdid=".$_SESSION['stdid'].
        " AND testid=".$_SESSION['testid'].";");
        if($rslt=mysql_fetch_array($result))
        {
            echo "var hour=".$rslt['hour'].";";
            echo "var min=".$rslt['min'].";";
            echo "var sec=".$rslt['sec'].";";
        } else {
            $_GLOBALS['message']="Try Again";
        }
        closedb();
    } else {
        echo "var sec=01;var min=00;var hour=00;";
    }
?>
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:34:50.630

代替

```
<?php 
```

和

```
<?php
session_start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T19:02:51.353

进一步清理代码后，堆栈溢出的代码高亮显示您的 php 输出被注释标记包围：

```
<!-- --> 
```

所以javascript永远不会看到PHP回显的变量。这可能是你的问题吗？

# regex - 价格输入模式html5

> ID：10348567
> 
> 赞同：3
> 
> 时间：2012-04-27T09:57:01.410
> 
> 标签：regex, html, grails

我有输入字段，我想检查价格输入字段的值是否存在点。该值将如下所示`12.00`。这是我的代码

```
<g:textField class="span3" id="price" name="price" required="" pattern="\d+(\.\d{2})?"/> 
```

我写了这样的东西`\d+(\.\d{2})?`，但收到错误。有什么建议么 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T11:48:30.660

试试这个

```
[0-9]+(\\.[0-9][0-9]?)? 
```

* * *

```
<form>
  <input type='number' pattern='[0-9]+(\\.[0-9][0-9]?)?' />
  <button type='submit'>Check</button>
</form>
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-19T16:29:07.827

正确答案是：[0-9]+(\.[0-9][0-9]?)？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-08T09:02:16.827

使用这种模式。

```
pattern="[0-9]*[.]?[0-9]+" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-09T08:11:12.723

**@Shree，**

模式如下。1\. [0-9] = 允许 0 到 9 范围内的任何数字/数字 2\. *[.]?[0 -9] = 如果包含句点，则只允许 0 到 9 范围内的数字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-05T12:36:30.567

点作为小数分隔符的模式：

```
pattern="^[0-9]+\.?[0-9]{0,2}$" 
```

逗号作为小数分隔符的模式：

```
pattern="^[0-9]+,?[0-9]{0,2}$" 
```

这将接受最多两位小数的任何数字。

# talend - 将文件拆分为 talend 中的更多文件

> ID：10348570
> 
> 赞同：3
> 
> 时间：2012-04-27T09:57:10.373
> 
> 标签：talend

我正在寻找一种如何根据实际文件行在 talend studio 中拆分作业执行的方法 - 我想在一个作业分支中处理以“DEBUG”开头的文件行，在另一个作业分支中处理另一行。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T18:31:49.887

为此，请使用 tMap 组件。您的工作将如下所示

```
 t*Input--row-->tMap--out1--->tFileOutput*

                      --out2--->tFileOutput* 
```

在 tMap 组件中，左侧有输入，右侧有输出。在您的输出表中，选择“激活表达式过滤器”并使用文本框来定义您的过滤器——只有与该过滤器匹配的行才会从该连接中输出。您可以根据需要拥有任意数量的输出表和过滤器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-17T08:07:57.197

使用 tMap 很酷，但是如果没有定义和固定输出流的数量，则 tMap 不是一个好的选择。

在这种情况下，使用 iterate link 或 tjavaflex 可以帮助您：

查看本教程“[如何将一个文件拆分为多个关于每条记录上的键的文件](http://makina-corpus.com/blog/metier/2014/tutorial-talend-decomposer-le-contenu-dun-fichier-flux-vers-plusieurs-fichiers)”，它解释了如何解决此类任务。它实际上只有法语版本。本教程展示了 3 种不同的技术来完成此任务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T13:33:43.627

最后我使用了 tExctractRegeFields 组件——简单地定义了匹配行的正则表达式。最重要的（我以前不知道）是您可以使用不同类型的连接来连接组件。如问题所述，我确实右键单击已使用的组件 a`Row > Reject`为工作中的新分支选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-26T10:54:33.113

我们可以使用`tfileoutputdelimited`and来做到这一点`tfileinputdelimited`。我们`tfileoutputdelimited`在高级设置中有一个选项，并检查选项将文件拆分为多个文件。

![在此处输入图像描述](../Images/56f99850785b0ac889ef9211ad658f81.png)

# xcode - nstextview 改变颜色一些文本

> ID：10348573
> 
> 赞同：0
> 
> 时间：2012-04-27T09:57:21.240
> 
> 标签：xcode, nstextview

嗨，我有一个 NS TexView：

```
 [risultato setString:[NSString stringWithFormat:@"%@\n<Ricetta>\n\t<numero>%@</numero>\n\t<fbimage>http://www.aletrnativeindustries.it/piccole_ricette/%@.png</fbimg>\n\t<foto>%@.png</foto>\n\t<nome>%@</nome>\n\t<dose>X%@</dose>\n\t<tempo>%@</tempo>\n\t<ricetta>%@</ricetta>\n</Ricetta>\n", prec, number, photo, photo, title, dos, time, ric]];

    risultato.textColor = [NSColor redColor]; 
```

使用最后一条指令，我将所有颜色更改为红色，但如果我希望某些文本保持黑色？我需要那个 prec，数字，照片，照片，标题，dos，时间，摆脱保持黑色。prec, number.... 是 NSString。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T10:00:42.067

您需要创建一个[NSAttributedString](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsattributedstring_Class/Reference/Reference.html)。

# sql-server - 查询等价评估

> ID：10348574
> 
> 赞同：1
> 
> 时间：2012-04-27T09:57:23.153
> 
> 标签：sql-server, tsql

我的问题根植于T-SQL、SQL Server 环境，但其范围并不局限于此技术。我正在研究一个具有相当复杂业务逻辑的数据库，其中包含现有视图、存储过程和要设计的新视图。通过对不同查询或其中一部分的比较，我有一种强烈的感觉，即有些部分以不同的安排执行相同的工作，但当然要重构整个混乱，我需要的不仅仅是感觉；所以我试图确定一种方法来*证明*两个语句是等价的。

一个明显但微弱的响应可能是确定两个查询 A 和 B 产生相同的记录集：如果 A 是 B 的子集，B 是 A 的子集，那么它们是相同的记录集；但我不确定这是一个好主意，因为当然，记录集不是查询，结果可能取决于数据和特定的参数值。我的问题是：有一种方法可以证明两个不同查询的等价性吗？我会说是的，因为数据库执行的优化应该适用于此。有人可以为我提供一些指向文档或书籍的指针吗？如果没有通用方法来证明等价性，那么有一些基于回归测试的智能方法，根据一些有效的启发式方法来完成这项工作？

稍后编辑：如果通过关系代数对查询进行逆向工程（手动？），可能是评估查询等效性而不是使用其他查询和/或计算机的更好方法？有自动化工具可以帮助执行这种“逆向工程”，以防万一？

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:04:47.270

您可能无法证明这一点，因为问题似乎是 NP 完全的；检查这个[关于查询等价的 SO 问题](https://stackoverflow.com/questions/56895/proving-sql-query-equivalency)（那个是关于 Oracle 的，但有几个答案/链接应该与您相关）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:03:21.237

您可以检查两个查询的执行计划。如果它们是相同的，你有你的答案！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T10:09:01.467

只有通过执行计划才能检查它。除此之外，我认为没有任何方法可以证明这件事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T10:13:54.673

您需要为此实现一些“规范查询计划”生成器（由 DBMS 生成的“最佳查询计划”可能是不确定的）。在大多数情况下，使用术语和表格的字母顺序作为决胜局将让你到达那里。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T10:17:08.890

我怀疑你是否能够正式证明或反驳这一点，但我对此的看法是

*   识别所有用例
*   识别所有边界值
*   识别所有参数

并**从中得出一个测试计划**。它会要求你

*   为每个案例创建测试数据
*   针对该数据运行两个查询
*   比较结果

如果您在测试后没有发现任何差异，那么您可以**有理由**确信这两个语句是等价的。

# mysql - 多个左连接导致错误的总和

> ID：10348576
> 
> 赞同：1
> 
> 时间：2012-04-27T09:57:37.877
> 
> 标签：mysql, join, sum, left-join

我有一个 MySQL 数据库，用于存储船舶员工和他们的工作经验。我有一张桌子用来存储员工，一张桌子用来存储他们以前在运输部门的工作（工作类型，年份），另一张桌子用来存储他们以前的其他工作（滚刀类型，年份）。所有这些都使用员工的 ID 连接。当我获取一名员工时，我想获得他的运输和一般经验的总和，但选择查询返回的一般经验总和是错误的。我知道这是由多个连接引起的，并且因为表没有正确连接，但我不确定如何解决这个问题。请你帮助我好吗？

PS 我想用一个查询来做到这一点。

我使用的查询示例

```
SELECT id , name , SUM( s_exp.years ) , SUM ( g_exp.years ) 
FROM employees
LEFT JOIN s_exp ON employees.id = s_exp.id ,
LEFT JOIN g_exp ON employees.id = g_exp.id
GROUP BY employees.id 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T10:02:39.770

也许是这样的：

```
SELECT id , name , 
(
    SELECT
        SUM(s_exp.years)
    FROM
        s_exp
    WHERE
        employees.id = s_exp.id
) AS s_total_years,
(
    SELECT
        SUM(g_exp.years)
    FROM
        g_exp
    WHERE
        employees.id = g_exp.id
) AS g_total_years,
FROM employees 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:23:26.527

```
Select id, sum(g_exp.years) GE, sum(s_exp.years) SE 
From s_exp Natural Join g_exp 
Where id = (Select id From employee Where name = ?)
group by id 
```

# java - Java解析HTTP文本文件格式

> ID：10348579
> 
> 赞同：1
> 
> 时间：2012-04-27T09:57:58.493
> 
> 标签：java, http, parsing, text

我是java新手，这周刚学，我的老师要我解析一个以文本文件格式保存的HTTP请求。基本上他想让我只提取
这行“GET /fenway/ HTTP/1.0\r\n”和这个“主机：www.redsox.com\r\n”并将其保存为文本格式。我的程序还不能很好地运行，因为它包含错误。我所做的是逐行读取文本文件，然后将其输入到一个函数中，该函数尝试读取缓冲区并标记每个单词并将其保存到 copyGetWord，然后运行一个 while 循环来检测单词“GET”是否是发现它将getWord存储到一个arraylist。

另一件事是我只允许在没有 perl 或 python 的情况下使用 java。我也尝试过 jnetpcap 库，但安装它们时遇到问题，所以我被文本文件卡住了。

希望任何人都可以提供帮助。

## 这是一个示例文本文件：

传输控制协议，Src 端口：bridgecontrol (1073)，Dst 端口：http (80)，Seq：1，Ack：1，Len：270 超文本传输​​协议 GET /azur/ HTTP/1.0\r\n 连接：Keep-Alive \r\n 用户代理：Mozilla/4.08 [en] (WinNT; I)\r\n 主机：www.google.com\r\n

```
public static void main(String[] args) {

    System.out.println("Tries to read the samplepcap1.txt, \n");
    ReadingFile1 handle = new ReadingFile1();
    ArrayList <String> StoreLine = new ArrayList<String>();

    try{

        FileReader ReadPcap = new FileReader("samplePcapSmall.txt");
        BufferedReader bufferPcap = new BufferedReader(ReadPcap);

        String readBufLine = bufferPcap.readLine();
        StoreLine.add(readBufLine);

        while (readBufLine!=null){
            readBufLine = bufferPcap.readLine();

            handle.LookForWord(readBufLine);
        }

           bufferPcap.close();
    }
    catch (FileNotFoundException e){
        System.out.println("\nFile not found");
    }
    catch (IOException e){
        System.out.println("Problem reading the file.\n");
    }
}

public String LookForWord(String getWord){
    ArrayList <String>MatchingWord = new ArrayList<String>();
    StringTokenizer copyGetWord = new StringTokenizer(getWord," ");

    while (copyGetWord.hasMoreElements()){
        if(copyGetWord.nextToken().matches("GET")){
            MatchingWord.add(getWord);
        }    
    }
    System.out.println("\nMatch: "+MatchingWord);

    return getWord;
} 
```

尝试读取 samplepcap1.txt，存储在 ArrayList 中并显示 ArrayList

```
Match: []

Match: [    GET /fenway/ HTTP/1.0\r\n]

Match: []

Match: []

Match: []
Exception in thread "main" java.lang.NullPointerException
at java.util.StringTokenizer.<init>(StringTokenizer.java:182)
at java.util.StringTokenizer.<init>(StringTokenizer.java:204)
at readingfile1.ReadingFile1.LookForWord(ReadingFile1.java:84)
at readingfile1.ReadingFile1.main(ReadingFile1.java:62)
Java Result: 1
BUILD SUCCESSFUL (total time: 1 second) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:10:20.643

您的 while 循环是问题所在。试试这个：

```
String readBufLine = bufferPcap.readLine();

while (readBufLine!=null){
    StoreLine.add(readBufLine);
    handle.LookForWord(readBufLine);
    readBufLine = bufferPcap.readLine();
}

bufferPcap.close(); 
```

这将从缓冲区中读取行并在读取行不为空时循环 - 新行始终作为循环体的最后一个动作读取，以便循环的下一次迭代将检查读取行是否为空在尝试对其进行标记之前。

# extjs4 - 在列标题下拉菜单中添加自定义按钮 {EXTJS 4}

> ID：10348581
> 
> 赞同：9
> 
> 时间：2012-04-27T09:58:13.423
> 
> 标签：extjs4

我想要 extjs4 中网格的列标题下拉菜单中的按钮。这样我就可以添加或删除在数据库中链接的列。 ![红色区域的按钮是我要找的那个...](../Images/b2f3151a922bc057a9f4b23385d2a734.png)

任何帮助将不胜感激......谢谢...... :)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-28T10:27:07.957

几个月前，我遇到了同样的问题。我已经设法通过扩展[Ext.grid.header.Container](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.grid.header.Container)来解决它（我已经覆盖[了 getMenuItems](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.grid.header.Container-method-getMenuItems)方法）。但是，最近，我发现了另一种需要较少编码的解决方案：只需在创建网格小部件后手动添加菜单项。

我将在这里发布第二个解决方案：

```
Ext.create('Ext.grid.Panel', {
    // ...
    listeners: {
        afterrender: function() {
            var menu = this.headerCt.getMenu();
            menu.add([{
                text: 'Custom Item',
                handler: function() {
                    var columnDataIndex = menu.activeHeader.dataIndex;
                    alert('custom item for column "'+columnDataIndex+'" was pressed');
                }
            }]);           
        }
    }
}); 
```

这是[演示](http://jsfiddle.net/molecule/hDpuT/)。​</p>

### 更新

这是ExtJs4.1 的[演示](http://jsfiddle.net/hDpuT/4/)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-25T22:54:28.707

从我所看到的情况来看，您应该避免 afterrender 事件。

语境：

我正在构建的应用程序使用具有动态模型的商店。我希望我的网格有一个从服务器获取的可定制模型（所以我可以为我的可定制网格拥有可定制的列）。

由于无法修改标题（因为商店被重新加载并破坏了我修改的现有菜单 - 使用上面的示例）。可以这样执行具有相同效果的替代解决方案：

```
Ext.create('Ext.grid.Panel', {
    // ...

    initComponent: function () {
        // renders the header and header menu
        this.callParent(arguments);

        // now you have access to the header - set an event on the header itself
        this.headerCt.on('menucreate', function (cmp, menu, eOpts) {
            this.createHeaderMenu(menu);
        }, this);
    },

    createHeaderMenu: function (menu) {
        menu.removeAll();

        menu.add([
            // { custom item here }
            // { custom item here }
            // { custom item here }
            // { custom item here }
        ]);
    }
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-30T19:38:54.040

对于那些不想只有一个“标准”列菜单但像我这样有一个单独的列菜单的人，可以使用以下

```
initComponent: function ()
{
    // renders the header and header menu
    this.callParent(arguments);

    // now you have access to the header - set an event on the header itself
    this.headerCt.on('menucreate', function (cmp, menu, eOpts) {
        menu.on('beforeshow', this.showHeaderMenu);
    }, this);
},

showHeaderMenu: function (menu, eOpts)
{
    //define array to store added compoents in
    if(this.myAddedComponents === undefined)
    {
        this.myAddedComponents = new Array();
    }

    var columnDataIndex = menu.activeHeader.dataIndex,
        customMenuComponents = this.myAddedComponents.length;

    //remove components if any added
    if(customMenuComponents > 0)
    {
        for(var i = 0; i < customMenuComponents; i++)
        {
            menu.remove(this.myAddedComponents[i][0].getItemId());
        }

        this.myAddedComponents.splice(0, customMenuComponents);
    }

    //add components by column index
    switch(columnDataIndex)
    {
        case 'xyz': this.myAddedComponents.push(menu.add([{
                            text: 'Custom Item'}]));

                break;
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-26T13:28:53.810

我接受了@nobbler 的回答并为此创建了一个插件：

```
Ext.define('Ext.grid.CustomGridColumnMenu', {
    extend: 'Ext.AbstractPlugin',
    init: function (component) {
        var me = this;

        me.customMenuItemsCache = [];

        component.headerCt.on('menucreate', function (cmp, menu) {
            menu.on('beforeshow', me.showHeaderMenu, me);
        }, me);
    },

    showHeaderMenu: function (menu) {
        var me = this;

        me.removeCustomMenuItems(menu);
        me.addCustomMenuitems(menu);
    },

    removeCustomMenuItems: function (menu) {
        var me = this,
            menuItem;

        while (menuItem = me.customMenuItemsCache.pop()) {
            menu.remove(menuItem.getItemId(), false);
        }
    },

    addCustomMenuitems: function (menu) {
        var me = this,
            renderedItems;

        var menuItems = menu.activeHeader.customMenu || [];

        if (menuItems.length > 0) {
            if (menu.activeHeader.renderedCustomMenuItems === undefined) {
                renderedItems = menu.add(menuItems);
                menu.activeHeader.renderedCustomMenuItems = renderedItems;
            } else {
                renderedItems = menu.activeHeader.renderedCustomMenuItems;
                menu.add(renderedItems);
            }
            Ext.each(renderedItems, function (renderedMenuItem) {
                me.customMenuItemsCache.push(renderedMenuItem);
            });
        }
    }
}); 
```

这是您使用它的方式（列配置中的 customMenu 可让您定义菜单）：

```
Ext.define('MyGrid', {
    extend: 'Ext.grid.Panel',
    plugins: ['Ext.grid.CustomGridColumnMenu'],
    columns: [
        {
            dataIndex: 'name',
            customMenu: [
                {
                    text: 'My menu item',
                    menu: [
                        {
                            text: 'My submenu item'
                        }
                    ]
                }
            ]
        }
    ]
}); 
```

这个插件的工作方式也解决了其他实现遇到的问题。由于自定义菜单项只为每一列创建一次（缓存已呈现的版本），因此不会忘记之前是否检查过它。

# c# - 调整图像大小使其“粘”

> ID：10348583
> 
> 赞同：1
> 
> 时间：2012-04-27T09:58:20.620
> 
> 标签：c#, wpf, crop, rect

我目前的目标是调整图像大小并在图像容器中使用它。所以我目前正在做的事情与此类似（从内存编码..可能在下面有错误，但想法大致相同）：

```
BitmapImage test = new BitmapImage;
test.begininit();
test.source = new Uri("myimage.png");
test.decodepixelwidth = 300;
test.decodepixelheight = 220;
test.endinit();
MyPictureContainer1.Source = test; 
```

这会将图像加载到我的容器中。现在我有另一个容器，我从第一个容器中加载图像，如下所示：

```
double x,y,w,h;
x = 10;
y = 10;
w = 60;
h = 150;
BitmapImage test2 = new BitmapImage;
test2.begininit();
test2.source = MyPictureContainer1.Source;
test2.sourcerect = new Int32Rect( x, y ,w , h)
test2.endinit();
MyPictureContainer2.Source = test2; 
```

然而，尽管从 MyPictureContainer1 拍摄了调整大小的图片，并在其上绘制了一个矩形蒙版（或我将其视为矩形蒙版），但 MyPictureContainer2 中的图像是存储在磁盘上的图像的实际分辨率，而不是包含的调整大小的版本在 MyPictureContainer1 中。

我希望这是有道理的，有人可以就为什么我在磁盘上获得图像的裁剪版本而不是来自 MyPictureContainer1 的图像的裁剪版本提供建议？

非常感谢！

# android - dalvikvm 未显示 JIT 选项的 LOGD 消息

> ID：10348584
> 
> 赞同：0
> 
> 时间：2012-04-27T09:58:29.940
> 
> 标签：android, jit

我对 /dalvik/vm/interp/Jit.cpp 做了一些小改动（写了一些 LOGD 消息）并使用 $make dalvikvm 构建了 dalvikvm，构建成功并在 /out/target/product/generic/system 中获得了可执行文件/bin/dalvikvm。现在我启动了一个模拟器并将 dalvikvm 推入 /data 并使用 $/data/dalvikvm -Xbootclasspath:/system/framework/core.jar -classpath /data/CmdLine.jar TestAppActivity 执行了一个示例 java 程序（大约 30 个循环）（按照[http://davanum.wordpress.com/2007/12/04/command-line-java-on-dalvikvm/](http://davanum.wordpress.com/2007/12/04/command-line-java-on-dalvikvm/)中给出的说明从示例程序创建 CmdLine.jar ) 现在，当我检查 logcat 时，没有显示我使用 LOGD 编写的消息。我们是否需要在 dalvikvm 命令行中添加任何选项来启用 JIT？这里可能是什么问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:36:22.367

`dalvikvm`只是入门二进制文件。重要的东西存在，`libdvm.so`所以你必须构建和替换它而不是`dalvikvm`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:00:29.283

尝试在运行 dalvikvm 之前导出日志 export ANDROID_LOG_TAGS="ActivityManager:I MyApp:D *:S" 变量 D -Debug S: 最低级别 V - 详细，这是您需要记录应用程序的日志级别.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T22:22:45.460

如果您使用的是 2.2 以上的 android 版本，我想默认情况下会启用 Jit。您的问题是必须在 dvm 中启用 JIT 分析。这可以通过查看 dalvikvm --help ... 来完成。我认为 dalvikvm -Xjitprofile -Xjitverbose 应该在此之前导出您的环境变量以记录消息。

# hash - 使用 Redis 哈希存储问题/答案对

> ID：10348585
> 
> 赞同：2
> 
> 时间：2012-04-27T09:58:34.327
> 
> 标签：hash, redis

应用程序有一个 MySQL 数据库，其中包含一个用户表。每个用户都有自己的 Redis Hash。每个用户拥有的 Redis 哈希都包含问题/答案字符串的键/值对。例如（在 Ruby 中）：

```
user = User.find(1)
question = "What colour is the sky?"
answer = "Blue"
user_hash = Redis::HashKey.new(user.id)
user_hash[question] = answer
user_hash[question] # returns answer 
```

现在用户需要能够为每个问题存储多个答案，例如：

```
question = "What colour is the sky?"
answers = ["Blue", "Grey", "Red"] 
```

此外，该应用程序将对通过每个用户哈希限定的问题/答案组执行方法，例如搜索包含某些单词的用户问题字符串。

1）此时 Redis Hash 是否适合应用程序的数据类型，如果是，2）处理具有多个答案的问题/答案对的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:34:48.817

您应该将这些视为 3 个对象 - 用户、问题和答案。那么，它们之间的关系就变得简单了。用户有问题，问题有答案。

现在，很容易在 Redis 中对此进行建模。

*   对象用户、问题和答案存储在散列中
*   问题将包含 id、text、userid、date_asked、date_modified 等字段
*   答案将包含 id、text、userid、questionid 等字段

然后，您需要存储问题的答案。使用 key 创建一个 Redis 列表`question:$id:answers`。这将是一个答案 ID 列表。

要根据关键字进行搜索，您应该为每个关键字创建一个 Redis 集。在这个集合中，存储包含这个词的问题的 id。

例如，`sadd tag:java 123 232 4231`表示问题 123、232 和 4231 中包含 java。同样，为每个关键字添加这样一个集合。

然后，要过滤包含 java 和 redis 的问题，只需在`tag:java`和上做一个集合交集`tag:redis`。

# jquery - jQuery fadIn 在 IE8 页面底部显示 div

> ID：10348588
> 
> 赞同：0
> 
> 时间：2012-04-27T09:58:52.420
> 
> 标签：jquery, internet-explorer-8, lightbox, fadein

我有一些代码要调试，它正在手动创建灯箱：

```
$('.contact').click(function () {

            $('html').css('overflow-y', 'hidden');

            $('<div class="overlay"></div>')
                .css('top', $(document).scrollTop())
                .css('opacity', '0')
                .animate({ 'opacity': '0.5' }, 0)
                .appendTo('body');

            $('<div class="lightbox"></div>')
                .hide()
                .appendTo('body');

$('.lightbox').load(function () {
            showRecaptcha('recaptcha_div');
        });
        var top = ($(window).height() - $('.lightbox').height()) / 2;
        var left = ($(window).width() - $('.lightbox').width()) / 2;
        $('.lightbox').css({
            'top': top + $(document).scrollTop(),
            'left': left,
            'zIndex':'2000'
        }).fadeIn(0);

        return false;
    }); 
```

灯箱当前出现在屏幕外，如果您缩小页面，您可以看到它位于左下角。

如果我更改`fadeIn(0)`为，`show()`则灯箱会出现在正确的位置。

有没有其他人有类似的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:15:39.103

尝试使用 jQuery 偏移函数设置顶部和左侧位置时，我在 IE 中遇到了类似的问题。我通过首先运行它来修复它，以确保它从左上角开始：

```
$(".lightbox").offset({top: 0, left: 0}); 
```

还要确保它是`position: absolute;`or`position: fixed;`并且您的代码段中有错字`fadeIn(0)`。

# c - 如何在 C 中列出进程的所有文件描述符，而不调用 lsof 或解析 /proc/$PID

> ID：10348591
> 
> 赞同：4
> 
> 时间：2012-04-27T09:59:00.253
> 
> 标签：c, linux, operating-system

在 Jailed Linux 环境中，我想在 C 中获取当前用户态进程的文件描述符列表。

是否有系统调用来获取 fdt？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:06:46.350

我不知道有什么方法可以计算文件描述符的数量，但你可以作弊。

打开一个新的文件描述符并关闭它，记住你得到的 fd 编号。

从 0 开始到您可以打开的最大 fd（您可以使用 getdtablesize() 获取此数字） dup2 每个文件描述符到该保存的 fd 中。那些不返回错误的是打开的，其余的是关闭的。

作为一个简化的例子，只计算它们：

```
int
count_fds(void)
{
    int maxfd = getdtablesize();
    int openfds;
    int fd;
    int i;

    openfds = 0;

    if ((fd = socket(AF_UNIX, SOCK_STREAM, 0)) == -1)
            return maxfd;
    close(fd);

    for (i = 0; i < maxfd; i++) {
            if (dup2(i, fd) != -1) {
                    openfds++;
                    close(fd);
            }
    }

    return openfds;
} 
```

我不知道如果你复制它们会产生副作用的任何文件描述符，但是那里总是有奇怪的野兽，所以使用风险自负。

# javascript - Javascript 风格 - 专业的代码

> ID：10348592
> 
> 赞同：0
> 
> 时间：2012-04-27T09:59:00.710
> 
> 标签：javascript

我一直在阅读包含以下内容的 JS 书籍：

```
function onSuccess(entries) {
    document.getElementById("loading").innerHTML="";
    var ul = document.getElementById("file-listing");
    for(var index=0;index<entries.length;index++) {
        var li = document.createElement('li');
        li.innerHTML = entries[index].name;
        ul.appendChild(li);
    }
} 
```

但是，我在多个站点上读到，在 html = "" 中创建整个列表，添加 ul 和 li 元素，然后添加块，在一次调用中全部追加...所以我想知道是否我应该遵循我在许多 js 书籍中找到的风格，或者我在性能博客上看到的风格？我最担心的是，如果我使用之前的代码块，阅读我的代码的人会觉得它很业余。我也遇到过一些人，哇，你使用的只是 jQuery ......而不是使用 DOM 调用`document.getElementById()`，等等......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:06:12.103

> 但是，我在多个网站上读到，在 html = ""... 中创建整个列表更快、更清晰。

如果您的意思是，`someElement.innerHTML = "HTML tags here";`那么是的，在大多数情况下它会更快，因为从根本上解析和渲染 HTML 是*浏览器所做*的，因此它们的速度非常快，而如果您使用 DOM 调用构建东西，则有很多跨各种旅行层（JavaScript、DOM、浏览器内部）。

***但是***：在大多数情况下，这也没关系。如果您要渲染一个包含很多列的 2,000 行表，这可能很重要；但是，如果您不这样做，那几乎没关系。您可以在发现问题时进行优化。

> 所以我想知道我是否应该遵循我在许多 js 书籍中找到的风格或我在性能博客上阅读的风格？

你应该做任何对你来说看起来最干净、最清晰、最容易的事情。

> 我最担心的是，如果我使用之前的代码块，阅读我的代码的人会觉得它很业余。

那是他们的问题。:-)

> 另外我遇到了一些人，哇，你使用的只是 jQuery ......而不是使用像 document.getElementById() 等 DOM 调用......

将 jQuery 用于所有或几乎所有 DOM 操作没有任何问题；它真的很擅长，并且为您节省了很多时间和麻烦。您应该*熟悉*DOM，以便在适当的时候使用它（jQuery 不能做所有事情；特别是它不擅长处理文本节点），但这并不意味着您不应该在何时何地使用 jQuery合适的。

为此，一些阅读：

*   [DOM2 核心](http://www.w3.org/TR/DOM-Level-2-Core/)
*   [DOM2 HTML](http://www.w3.org/TR/DOM-Level-2-HTML/)
*   [DOM3 核心](http://www.w3.org/TR/DOM-Level-3-Core/)
*   [HTML5 Web 应用程序 API](http://www.w3.org/TR/html5/webappapis.html#webappapis)

...但同样，这并不意味着您应该仅仅因为有人看不起使用 jQuery 就应该使用它。适当使用工具。重要的是了解您正在使用的工具（包括 jQuery，以及 DOM 本身），这样您就可以了解何时何地应用它们。

# windows - 通过 django WinXP/7 使用 sqlite3 数据库部署应用程序

> ID：10348600
> 
> 赞同：0
> 
> 时间：2012-04-27T09:59:39.040
> 
> 标签：windows, django, heroku

当前系统：Windows XP / Windows 7（两者都出现问题）

遵循以下部署指南后：

[https://devcenter.heroku.com/articles/python](https://devcenter.heroku.com/articles/python)

通过使用简单的投票应用程序进行测试，我成功地通过 heorku 推送应用程序，除了在检查日志后出现以下错误：

```
2012-04-27T08:14:42+00:00 app[web.1]: django.core.exceptions.ImproperlyConfigure
d: Error loading either pysqlite2 or sqlite3 modules (tried in that order): No m
odule named _sqlite3 
```

尝试同步数据库时也会发生这种情况。

这是settings.py文件中数据库的当前配置：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'database.sqlite', # Or path to database file if using sqlite3.
        'USER': '', # Not used with sqlite3.
        'PASSWORD': '', # Not used with sqlite3.
        'HOST': '', # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '', # Set to empty string for default. Not used with sqlite3.
    }
} 
```

我知道它是一个 sqlite3 数据库，并且我被告知它仍然应该允许 heroku 部署应用程序而不会出现任何错误。我已经使用了以下与此问题相关的潜在解决方案：

[没有名为 _sqlite3 的模块](https://stackoverflow.com/questions/1210664/no-module-named-sqlite3) [如何使用 Django 项目设置 SQLite？](https://stackoverflow.com/questions/8114946/how-do-i-set-up-sqlite-with-a-django-project) [http://groups.google.com/group/django-users/browse_thread/thread/185f981f432346f1](http://groups.google.com/group/django-users/browse_thread/thread/185f981f432346f1)

任何帮助将不胜感激！如果需要其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:08:24.520

Heroku 不支持 sqlite，因为它只提供[只读文件系统](https://devcenter.heroku.com/articles/read-only-filesystem)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T13:09:04.807

我对设置文件有同样的错误。查看 Heroku 日志，结果发现我的 settings.py 文件由于各种原因而失败。一旦我解决了这些问题，Django 就不再抱怨缺少数据库设置了。

导致此问题的原因之一是我用来[允许子选择作为 QuerySet 中的表`extra()`](http://djangosnippets.org/comments/cr/15/236/#c3754)的猴子补丁。此补丁位于我的设置文件的末尾。

```
# Override default behaviour of compiler to quote table names when table name is a sub-query
from django.db.models.sql.compiler import SQLCompiler
_quote_name_unless_alias = SQLCompiler.quote_name_unless_alias
SQLCompiler.quote_name_unless_alias = lambda self,name: name if name.startswith('(') else _quote_name_unless_alias(self,name) 
```

这个补丁显然要求在那个时候已经正确指定了 DATABASES。由于 Heroku 将[魔术 DATABASES 配置](https://devcenter.heroku.com/articles/django#postgres_database_config)附加到设置文件的末尾（即在猴子补丁之后），我不得不手动将它们的配置插入到我的猴子补丁之上。

# c# - Windows Phone 绘制椭圆

> ID：10348601
> 
> 赞同：0
> 
> 时间：2012-04-27T09:59:45.363
> 
> 标签：c#, .net, windows-phone-7, drawing, ellipse

你好

我想在一个大椭圆上画 40 个椭圆。真奇怪。

```
for (int i = 0; i < 40; i++)
        {
            {
                {
                    Random r = new Random();
                    int distance = r.Next(0, 10000);
                    var rv = r.Next(0, 359);
                    var x = Math.Sin(rv * Math.PI / 180) * 225;
                    rv = r.Next(0, 359);
                    var y = Math.Cos(rv * Math.PI / 180) * 225;
                    Ellipse e = new Ellipse();
                    e.Fill = new SolidColorBrush(Color.FromArgb(255, (byte)(counter * 5), (byte)(counter * 3), (byte)(counter * 1)));
                    e.Margin = new Thickness(y, -150 + x, 0, 0);
                    e.Width = 25;
                    e.Height = 25;
                    counter++;
                    PointsGrid.Children.Add(e);
                }
            }
        } 
```

此代码仅绘制 7,8 或有时 9 个椭圆。但是，如果我在代码中添加额外的行：

```
for (int i = 0; i < 40; i++)
        {
            {
                {
                    Random r = new Random();
                    int distance = r.Next(0, 10000);
                    var rv = r.Next(0, 359);
                    var x = Math.Sin(rv * Math.PI / 180) * 225;
                    rv = r.Next(0, 359);
                    var y = Math.Cos(rv * Math.PI / 180) * 225;
                    Ellipse e = new Ellipse();
                    e.Fill = new SolidColorBrush(Color.FromArgb(255, (byte)(counter * 5), (byte)(counter * 3), (byte)(counter * 1)));
                    e.Margin = new Thickness(y, -150 + x, 0, 0);
                    e.Width = 25;
                    e.Height = 25;
                    counter++;
                    PointsGrid.Children.Add(e);
                    MessageBox.Show(""); // Additional line
                }
            }
        } 
```

如果我添加显示消息框，在所有消息框上按确定，我将看到所有 40 个省略号...

问题是它怎么可能，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T10:06:28.783

问题是您使用随机。如果您每次都创建一个新的 Random() - 它将使用当前时间作为种子。由于当前时间是相同的（因为代码执行得如此之快，所以伪随机数总是相同的。）

```
Random r = new Random();

for (int i = 0; i < 40; i++)
        {
            {
                {
                    int distance = r.Next(0, 10000);
                    var rv = r.Next(0, 359);
                    var x = Math.Sin(rv * Math.PI / 180) * 225;
                    rv = r.Next(0, 359);
                    var y = Math.Cos(rv * Math.PI / 180) * 225;
                    Ellipse e = new Ellipse();
                    e.Fill = new SolidColorBrush(Color.FromArgb(255, (byte)(counter * 5), (byte)(counter * 3), (byte)(counter * 1)));
                    e.Margin = new Thickness(y, -150 + x, 0, 0);
                    e.Width = 25;
                    e.Height = 25;
                    counter++;
                    PointsGrid.Children.Add(e);
                    //MessageBox.Show(""); // Additional line
                }
            }
        } 
```

消息框只是“减慢”了执行速度——这意味着你所有的圈子都没有被画在彼此的顶部。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T10:06:16.867

那可能是时间问题。您应该在循环之外声明 Random，因为种子是基于当前时间的。

```
 Random r = new Random();

    for (int i = 0; i < 40; i++)
    {
        int distance = r.Next(0, 10000);
        var rv = r.Next(0, 359);
        var x = Math.Sin(rv * Math.PI / 180) * 225;
        rv = r.Next(0, 359);
        var y = Math.Cos(rv * Math.PI / 180) * 225;
        Ellipse e = new Ellipse();
        e.Fill = new SolidColorBrush(Color.FromArgb(255, (byte)(counter * 5), (byte)(counter * 3), (byte)(counter * 1)));
        e.Margin = new Thickness(y, -150 + x, 0, 0);
        e.Width = 25;
        e.Height = 25;
        counter++;
        PointsGrid.Children.Add(e);
    } 
```

如果这真的是你的问题，那就意味着你真的画了 40 个椭圆，但其中大部分是重叠的。

# jquery - 在 ascx 文件中使用 jquery

> ID：10348603
> 
> 赞同：3
> 
> 时间：2012-04-27T09:59:47.063
> 
> 标签：jquery, controls, web, ascx, nivo-slider

我需要在 Visual Studio 中创建一个 Web 用户控件，该控件将嵌入到 CMS 中的 .NET 页面中。该控件将是一个使用 jquery 和流行的 Nivo 滑块脚本的幻灯片。我已将所有相关脚本导入到我的 VS 项目中。

我的问题是：是否可以使用 jquery 创建 Web 用户控件，以及我将我的链接到 jquery 和我的幻灯片代码放在哪里。有没有人可以给我一个如何实现这一目标的基本大纲

谢谢

R

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T10:11:09.720

如果您希望控件的行为独立于其使用者，您应该将幻灯片脚本放在用户控件中，并且由于您的控件将放在 CMS 中，因此我建议在 UserControl 本身中使用幻灯片脚本。

要注册外部 javascript/jquery.js 引用，您可以在控件的 `ClientScript.RegisterStartupScript()`page_load 事件中使用控件的方法，并且不要将其放入 if(!ispostback) 块中，它应该不在其中。

您还可以`ClientScript.RegisterStartupScript()`通过将幻灯片脚本放入一个函数中来重新注册幻灯片脚本，例如 SlideshowFunction(); 那么你可以这样做

```
 protected void Page_Load(object sender, EventArgs e)
    {
      ClientScript.RegisterStartUpScript(this,this.Gettype(),"scriptid","slideshowfunction();",true);
    } 
```

# google-maps - Google Maps Java API V3 中的语言代码

> ID：10348604
> 
> 赞同：6
> 
> 时间：2012-04-27T09:59:53.337
> 
> 标签：google-maps, google-maps-api-3

我想在我们的网站上用德语显示 Googlemaps。所有国家、大陆和海洋名称都应以德语显示。我将此用作脚本的来源：“https://maps.googleapis.com/maps/api/js?sensor=false&language=de”。当我将语言设置为 en 或 ja 时，所有名称都以英语或日语显示，但 de 表示德语或 fr 表示法语不起作用。

非常感谢任何解决此问题的提示。

最好的祝福。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T16:44:57.187

我在我的地图上尝试过同样的事情，起初，我以为我看到了同样的结果。然而，语言的变化有时可能是微妙的，特别是如果你只看一张高级的世界地图，因为许多国家名称是相同的。当然，很容易看出日语的区别，因为该语言使用不同的字符集。

我发现快速检查语言更改的最简单方法是注意您在地图上显示的任何地图控件。我在地图的右上角显示卫星、地形等选项。有了这些，您可以很快看到语言发生了变化。

我已经确认：

*   阿拉伯语 (ar) - 这也有不同的字符集，但国家名称不会改变
*   日语（日语）
*   法语 (fr)
*   德语（de）

它对我有用，只需要稍微挖掘一下就能注意到变化。谷歌维护了一个[支持语言](https://spreadsheets.google.com/pub?key=p9pdwsai2hDMsLkXsoM05KQ&gid=1)的列表，对于那些不改变地图标签的语言，这里引用了谷歌文档：

> 路线面板中的地图控件和路线已翻译为支持的语言电子表格中列出的语言子集。当翻译可用时，地图上的标签会以首选语言显示。

**有关此特定点的更多详细信息，特别是有关地图标签的信息，已包含在此答案的底部。**

以下是设置后的地图标签示例`language=de`：

![语言设置为：德语的谷歌地图](../Images/7188aa22f856f51b95fd1ce70aec87dc.png)

请注意以下标签的差异：Deutschland、Ceska rebublika 和 Polska。

这是一个没有语言设置的标签示例（由于*我的*浏览器设置，默认为英语）：

![在此处输入图像描述](../Images/98f740cb86ee90745267fc5e21229b22.png)

请注意以下标签中的差异：德国、捷克共和国和波兰。

这是一个使用 `language=de' 显示中国和日本的镜头：

![在此处输入图像描述](../Images/7ecbeda5b541507b6f4c133937f8f58c.png)

许多地图标签在任何一种语言中看起来都是一样的，但也有很多不同之处。直接来自 Google 支持的明确解释中解释了差异的原因：

> 通过设置语言参数，您将覆盖客户端浏览器的首选语言设置。使用 API，这意味着 API 和客户端浏览器（对话框等）之间的任何交互都将以指定的语言呈现 - 只要该语言受支持。
> 
> 对于实际地名（地图标签），我们与 maps.google.com 共享相同的数据。在这里，将澳大利亚的地名翻译成（比如）德语的意义不大，而提供日文和中文字符的翻译更有意义，否则拉丁语的名字将难以辨认。话虽如此，希腊语和阿拉伯语（可能还有其他语言）尚未收到全球翻译——大概是由于受众较少。
> 
> 所以，总结一下：
> 
> 1.  Maps API 的翻译主要是指 API 与客户端浏览器的交互。
> 2.  谷歌已经做出更多努力来为非拉丁语言提供全球覆盖。
> 3.  并非所有非拉丁语语言都享有全球支持。

# c++ - 为什么物体的大小为零

> ID：10348606
> 
> 赞同：4
> 
> 时间：2012-04-27T09:59:54.110
> 
> 标签：c++, compiler-construction, size

我将对象的 sizeof 设为零，这是不应该的。请解释一下为什么编译器给出这个答案的概念？

```
 #include<iostream>
  using namespace std;

  class xxx{
      public: int a[];  // Why this line is not giving error.
  }; 

  int main(int argc, char *argv[])
  {
      xxx x1;
      cout<<sizeof(x1); //Q=Why this code is not giving error.
      return 0;
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T10:08:40.647

正如其他人所说，C++ 中的对象永远不会有大小 0。

但是，由于代码首先不是有效的 C++（数组不能为空），因此这无关紧要。编译器只是做它想做的事。

GCC`-pedantic`拒绝此代码。MSVC 至少发出警告。我的`clang++`带有`-pedantic`ICE 的版本，但在此之前确实发出了警告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T10:01:20.410

您没有使用符合标准的编译器。一个对象的大小不能是`0`，甚至是一个空的`class`或`struct`有大小`1`。此外，必须指定数组维度。

编辑：很奇怪，ideone 也打印出 0。在 MSVS 中我收到警告，但至少大小为 1。

### 5.3.3\. 大小

> 1.  [...] 当应用于一个类时，结果是该类的对象中的字节数 [...] 最派生类的大小应大于零。[...] 将 sizeof 应用于基类子对象的结果是基类类型的大小。[...]

编辑2：

我在 MSVS 中尝试了以下操作：

```
xxx a[100]; 
```

它无法编译。奇怪的是它没有事先发现错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T10:34:16.193

`a`您类中的该元素`xxx`称为灵活数组成员。

Flexible array members are not in the C++ standard. They are a part of C99\. However, many compiler vendors provide flexible array members as a C++ extension.

Your code as-is is not legal C code. It uses C++ specific constructs. Your code is easy to change to C. Change the `class` to `struct`, get rid of the `public`, and change the use of C++ I/O to C's `printf`. With those changes, your converted code is still illegal C99 code. Flexible array members are only allowed as the last element of a structure that is otherwise non-empty.

Apparently your vendor took the flexible array member concept over to C++, but not the constraint that the structure be otherwise non-empty.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T10:07:52.027

对象的大小不能为零。即使类是空的，它的大小也永远不会为零。

查看链接以了解更多[Bjarne Stroustrup 的 C++ 样式和技术常见问题解答](http://www2.research.att.com/~bs/bs_faq2.html)。

# jquery - jquery选项卡的下一个按钮不起作用

> ID：10348607
> 
> 赞同：1
> 
> 时间：2012-04-27T09:59:56.513
> 
> 标签：jquery

我正在使用 jQuery 选项卡，在下一个按钮上我希望它移动到下一个选项卡

```
 $(".next-tab").click(function () {
       var selected = $("#tab-div").Tabs("option", "selected");
       alert(selected);
    $("#tab-div").Tabs("option", "selected", selected + 1);
    });

    <div id="tab-div">
    <ul class="nav">
    <li><a href="#tab1" class="current">New Group</a></li>
    <li><a href="#tab2">For Companies</a></li>
    </ul>
    <div class="list-wrap">
    <div id="tab1" class="">
    <table width="70%" border="0" cellspacing="0" cellpadding="5" class="alltbls creatgrp">
    <tr>
    <td width="239" class="td-left req">Group Name</td>
    <td> <asp:TextBox ID="txtGroupName" class="text" runat="server" TabIndex="1" onchange="ontextchange()"></asp:TextBox>  </td>
    </tr>
</table>

    </div>
    <div id="tab2" class="">
        <table width="70%" border="0" cellspacing="0" cellpadding="5" class="alltbls creatgrp">
        <tr>
            <td width="239" class="td-left req">Group Name</td>
            <td> <asp:TextBox ID="txtGroupName" class="text" runat="server" TabIndex="1" onchange="ontextchange()"></asp:TextBox>  </td>
            </tr>
        </table>
    </div> 
```

警告我正在获取对象对象而不是选项卡索引。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:08:56.460

这是您需要做的：**[演示](http://jsfiddle.net/RaaDV/273/)**

```
$("#tabs").tabs();
$(".nexttab").click(function() {
    var selected = $("#tabs").tabs("option", "selected");
    $("#tabs").tabs("option", "selected", selected + 1);
});
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T10:13:07.363

您必须小写您的“Tabs”。不要忘记使用“$(your_div).tabs();” 在您的代码开始处；

```
$("#tabs").tabs();
$(".nexttab").click(function() {
    var selected = $("#tabs").tabs("option", "selected");
    $("#tabs").tabs("option", "selected", selected + 1);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T10:05:29.957

`Tabs`应该是小写的 - `tabs`。

```
$(".next-tab").click(function () {
    var selected = $("#tab-div").tabs("option", "selected");
    alert(selected);
    $("#tab-div").tabs("option", "selected", selected + 1);
}); 
```

# objective-c - 如何使用 Xcode 4.3.2 建立一个 github 项目

> ID：10348609
> 
> 赞同：0
> 
> 时间：2012-04-27T10:00:35.960
> 
> 标签：objective-c, ios

我正在开发一个 iOS 应用程序，并且是第一次使用 github，github 中有一个项目，我想将它导入到我的计算机中，请问这样做的步骤是什么？

感谢您的回答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:12:06.253

您可以从屏幕截图下方的 github 下载项目...！

![在此处输入图像描述](../Images/751ba5595a8f1a41a72ac540f87248e6.png)

解压缩 zip 并打开 xcode 项目文件后...！

# ruby-on-rails - 如何让 rails.vim-command :Rview 与 .js.erb-views 一起工作？

> ID：10348611
> 
> 赞同：0
> 
> 时间：2012-04-27T10:00:45.903
> 
> 标签：ruby-on-rails, vim, command, rails.vim

我也希望 Rview 跳转到 .js.erb-views。

它总是说“找不到文件”app/views/examples/foo”。

帮助说：

> *rails-template-types* :Rview 之类的命令在搜索文件时使用硬连线的扩展名列表（erb、rjs 等）。为了便于使用非标准模板类型，此列表中提供了几个流行的扩展，包括 haml、liquid 和 mab (markaby)。一旦将相关的配置选项添加到 rails.vim，这些扩展就会消失。

由于视图以 .erb 结尾，我建议它应该可以工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:18:31.550

这很奇怪，我刚刚检查了我的 vim，它工作正常。我使用[Janus](https://github.com/carlhuda/janus)，但我认为标准的 vim + rails.vim 应该可以正常工作。也许你需要更新 rails.vim？并且您可以告诉您操作的顺序：当前文件、键入的命令等。

# blackberry - 在黑莓的 EditField/BasicEditField/RichTextField 中更改选定的字体颜色？

> ID：10348612
> 
> 赞同：3
> 
> 时间：2012-04-27T10:00:47.963
> 
> 标签：blackberry, blackberry-editfield

我正在准备一个新应用程序，只想创建一个`TextField`.

我必须提供选择部分文本并更改其颜色的功能。例如：你好，我是***黑莓开发者***。现在我想在运行时更改黑莓开发者的字体颜色。

是否有可能在`EditField`或`BasicEditField`任何`RichTextField`一个？提前谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:11:27.210

```
LabelField labelField2 = new LabelField("hello, I am blackberry developer",Field.FOCUSABLE){

        boolean _inFocus = false;
        public void onFocus(int direction) {
            _inFocus = true;
            this.invalidate();
        }
        public void onUnfocus() {
            _inFocus = false;
            this.invalidate();
        }
        protected void paint(Graphics graphics) {
             if(_inFocus){
                 graphics.setColor(Color.BLUE);
             }else{
                 graphics.setColor(Color.RED);
         }
          super.paint(graphics);
       }
       protected void drawFocus(Graphics g, boolean on) {
      }
    }; 
```

享受...

# regex - 如何将用户输入用作正则表达式？

> ID：10348618
> 
> 赞同：0
> 
> 时间：2012-04-27T10:01:00.853
> 
> 标签：regex, perl, input

我有一个简单的程序，用户可以在其中输入字符串。在此之后，用户可以输入正则表达式。我需要将字符串与此正则表达式进行比较。

以下代码不起作用 - 正则表达式总是失败。

而且我知道这可能是因为我将字符串与字符串进行比较，而不是字符串与正则表达式进行比较。

但是你会怎么做呢？

```
while(1){
    print "Enter a string: ";
    $input = <>;
    print "\nEnter a regex and see if it matches the string: ";
    $regex = <>;

    if($input =~ $regex){
        print "\nThe regex $regex matched the string $input\n\n";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:15:16.843

1.  使用[词法变量](http://p3rl.org/my)而不是全局变量。

2.  您应该记住，读取的字符串[`<>`](http://p3rl.org/readline)通常包含换行符，因此可能需要使用 删除换行符[`chomp`](http://p3rl.org/chomp)，如下所示：

    ```
    chomp(my $input = <STDIN>);
    chomp(my $regex = <STDIN>); 
    ```

3.  例如，您可能希望从字面上解释取自用户的正则表达式特殊字符，以便`^`匹配文字抑扬符，而不是字符串的开头。如果是这样，请使用[`\Q`](http://p3rl.org/quotemeta)转义序列：

    ```
    if ($input =~ /\Q$regex\E/) { ... } 
    ```

4.  在您使用 Perl 的过程中，不要忘记阅读[Perl 常见问题解答](http://faq.perl.org)。在您开始指定问题之前，它可能已经有了所有答案：[如何匹配变量中的正则表达式？](http://learn.perl.org/faq/perlfaq6.html#How-do-I-match-a-regular-expression-thats-in-a-variable-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T10:06:13.807

您需要使用`//`、`m//`或`s///`— 但您可以指定一个变量作为模式。

```
if ($input =~ /$regex/) {
  print "match found\n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T10:09:41.730

我认为你需要 chomp 输入和正则表达式变量。并更正表达式以匹配正则表达式

```
chomp( $input );
chomp( $regex );
if($input =~ /$regex/){
    print "\nThe regex $regex matched the string $input\n\n";
} 
```

# objective-c - Objective-C类初始化方法中的内存泄漏

> ID：10348619
> 
> 赞同：1
> 
> 时间：2012-04-27T10:01:04.217
> 
> 标签：objective-c, class, memory-management, initialization, memory-leaks

`init`我在创建的类的方法中遇到了泄漏问题。为了简单起见，我有以下（简化的）问题：

*   ViewController 初始化一个实例
*   ClipData 类初始化一个实例
*   初始化字符串的 AnimationData 类

视图控制器：

```
myClipData = [[ClipData alloc] init]; 
```

剪辑数据：

```
- (id)init
{
    self = [super init];
    if (self) {
        animData = [[AnimationData alloc] init];  //LEAK HERE
    }

    return self;
} 
```

动画数据：

```
- (id)init
{
    self = [super init];
    if (self) {
        name = [NSString string];
    }

    return self;
} 
```

类中的所有对象都声明为`(nonatomic, retain)`. 我知道这样做会增加保留计数，但是如何在`AnimationData`不泄漏的情况下初始化`animData`???

可能是一个非常愚蠢的问题，所以非常感谢任何帮助。

谢谢，
邓克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:05:11.453

您永远不会释放 animData。您需要添加`dealloc`到您的课程：

```
- (void)dealloc {
  [animData release];

  [super dealloc];
} 
```

同样，您需要添加一个`dealloc`类似于`AnimationData`.

在相关说明中，您需要保留并稍后释放在 中创建的字符串`-[AnimationData init]`，您现在所做的基本上是一个 noop，除了它留下了一个乱码的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:06:10.177

当你有一个分配时，你也必须有一个释放。

您还应该通过 self 引用属性，以便访问属性而不是基础成员。

所以你真的应该这样做：

```
ClipData *clip = [[ClipData alloc] init];
self.myClipData = clip;
[clip release]; 
```

和

```
 if (self) {
        AnimationData *data = [[AnimationData alloc] init]; 
        self.animData = data;  
        [data release];
    } 
```

确保您还通过将它们设置为 nil 来释放类的 dealloc 中的属性。

```
self.myClipData = nil;
self.animData = nil; 
```

# matlab - matlabcontrol api和jboss如何使用

> ID：10348622
> 
> 赞同：0
> 
> 时间：2012-04-27T10:01:10.227
> 
> 标签：matlab, jboss, classpath, classloader

提前感谢您的关注。这是我第一次在这个网站上写作（相当新手:)）我以前读过一个用户询问我同样问题的问题。虽然我读了很多，但我找不到解决方案。

问题：我正在尝试使用 MatlabControl jar ( [http://code.google.com/p/matlabcontrol/](http://code.google.com/p/matlabcontrol/) ) 在我的 java 代码中“调用”matlab。当我在普通的 java 应用程序中尝试这个 api 来尝试它（包括 buildpath 中的 matlabcontrol.jar）时，一切正常。

我的问题是让它在 jboss 5 AS 的 ejb 模块上工作：我可以部署 ejb 模块，我可以看到 matlabcontrol.jar 的类（我放在 server/default/lib 文件夹中），但它不工作并返回我以下异常：

```
Caused by: java.lang.NullPointerException
at java.io.File.<init>(File.java:251)
at matlabcontrol.Configuration.getSupportCodeLocation(Configuration.java:227)
at matlabcontrol.RemoteMatlabProxyFactory.createProcess(RemoteMatlabProxyFactory.java:278)
at matlabcontrol.RemoteMatlabProxyFactory.requestProxy(RemoteMatlabProxyFactory.java:116)
at matlabcontrol.RemoteMatlabProxyFactory.getProxy(RemoteMatlabProxyFactory.java:134)
at matlabcontrol.MatlabProxyFactory.getProxy(MatlabProxyFactory.java:81) 
```

这使我想到以下几行：

```
URL url = Configuration.class.getProtectionDomain().getCodeSource().getLocation();
        File file = new File(url.toURI().getPath()).getCanonicalFile(); 
```

非常奇怪的是，非常非常罕见，重启jboss并重新部署ejb模块后，系统工作正常！。

真不知道是要修改这最后2行的源码（好像是没有正确获取jar代码位置的问题）还是要设置jBoss的一些配置文件来不同地设置classpath .

再次提前感谢。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:05:23.770

错误在于代码中在运行时查找 jar 的位置。我打印了以“！”结尾的路径 和双斜线，所以我删除了这些字符，我终于能够使这个 API 工作。

# extjs - ExtJS：存储-代理-编写器：同步时如何始终向记录添加/设置值？

> ID：10348623
> 
> 赞同：2
> 
> 时间：2012-04-27T10:01:15.957
> 
> 标签：extjs, extjs4

经过两天的努力，我制作了自己的`Ext.data.Store`课程（见下面的代码）。

请注意，即使考虑了代理及其编写器的所有配置，配置`writeAllFields: true`也会被忽略，只发送更改的值（这对我来说是个大问题）。

所以，现在，为了规避这个（巨大的）问题，我想**总是**为发送的记录添加一个预定义的值（它总是一个值，比如`id_partner: 3`）。出于安全原因，我需要这个。

```
Ext.define('Ext.data.StoreHandleErrors', {
    extend: 'Ext.data.Store',
    alias: 'data.storehandleerrors',

    constructor: function(config) {
        config.autoLoad= true;
        config.autoSync= true;
        config.proxy.type= 'ajax';
        config.proxy.reader= {
            type: 'json',
            successProperty: 'success',
            root: 'data',
            messageProperty: 'message'
        };
        config.proxy.writer= {
            type: 'json',
            writeAllFields: true,
            root: 'data'
        };
        config.proxy.listeners= {

            exception: function(proxy, response, operation) {
                /* Code to handle exception */
            }
        };
        this.callParent([config]);
        this.on(
            'write',
            function(store, operation) {
                /* Code to show how the write op. went */
            },
            this
        );
        this.on(
            'beforesync',
            function(objects_to_sync, opts) {
                /* Code to add a pre-defined value to be sent: "id_partner: 3" */
            },
            this
        );
    }
}); 
```

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T17:02:41.600

这是我的有效代码。这是一个 hack，但它适用于 ExtJS 4.0.7 和 ExtJS 4.1 beta。

```
Ext.define('Ext.data.StoreHandleErrors', {
    extend: 'Ext.data.Store',
    alias: 'data.storehandleerrors',

    constructor: function(config) {
        /* (!!) proxy properties overwrite */
        config.autoLoad= true;
        config.autoSync= true;
        config.proxy.type= 'ajax';
        config.proxy.reader= {
            type: 'json',
            successProperty: 'success',
            root: 'data',
            messageProperty: 'message'
        };
        config.proxy.writer= {
            type: 'json',
            writeAllFields: true,
            root: 'data'
        };
        config.proxy.listeners= {

            exception: function(proxy, response, operation) {
                /* generic exception handling here */
            }
        };
        this.callParent([config]);
        this.on(
            'add',
            function(store, records, index, eOpts) {
                /* 27/04/2012 (!!) Hack: force property on all records */
                for (var i = 0; i <records.length; i++) {
                    records[i].data.id_partenaire=this.idPartenaire;
                };
            },
            this
        );
        this.on(
            'beforesync',
            /* 27/04/2012 (!!) Hack: force property on all records to false
             * and then ExtJs sees it's not the same so update
             * the value accordingly
             */
            function(sync, opts) {
                if (typeof sync.create!='undefined') {
                    for (var i = 0; i <sync.create.length; i++) {
                        sync.create[i].modified.id_partenaire=false;
                    };
                }
                if (typeof sync.update!='undefined') {
                    for (var i = 0; i <sync.update.length; i++) {
                        sync.update[i].modified.id_partenaire=false;
                    };
                }
            },
            this
        );
        /* (!!) remember the property (it's not copied
         * when calling this.callParent([config]); )
         */
        this.idPartenaire=config.idPartenaire;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-05T13:12:31.603

我在 ExtJs "5.1" 中发现，当模型中未指定字段类型时，即使您已将 "writeAllFields" 设置为 true，该字段也不会发送到服务器。例如，使用以下代码：

```
"fields:[
        {name:'commission_id', type:'int'},
        {name:'name'},
        {name:'surname', type:'auto'},
    ]" 
```

即使没有更改，commission_id 也会被发送。姓名和姓氏如果不更改将不会发送。

# android - 如何在谷歌地图视图中显示混合视图

> ID：10348630
> 
> 赞同：4
> 
> 时间：2012-04-27T10:01:30.870
> 
> 标签：android, android-maps, android-mapview

当我在 Android 中处理地图视图时，我能够显示卫星视图但无法显示混合视图，

请建议如何在地图中显示混合视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:04:10.837

[更改街景<->卫星谷歌地图 Android](https://stackoverflow.com/questions/6471357/changing-streetview-satellite-google-maps-android)

请通过上面的链接。它非常有帮助。

# bash - 将某些行移到前一行

> ID：10348633
> 
> 赞同：0
> 
> 时间：2012-04-27T10:01:37.577
> 
> 标签：bash, formatting

我有一个看起来像这样的列表：

```
sharename:shareX
comment:commentX
sharename:shareY
comment:commentY
sharename:shareZ
comment:commentZ 
```

等等...

这就是我希望列表的样子：

```
shareX;commentX
shareY;commentY
shareZ;commentZ 
```

我怎样才能在 bash 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T11:32:53.463

纯重击：

```
IFS=':'
while read a b; read c d; do   # read 2 lines
  echo -e "$b:$d"
done < "$infile" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T10:10:40.700

一个班轮：

```
odd=0; for i in `cat list | cut -d":" -f2`; do if [ $odd -eq 0 ]; then echo -ne $i; odd=1; else echo $i; odd=0; fi; done 
```

格式化：

```
odd=0; 
for i in `cat list | cut -d":" -f2`; 
do 
    if [ $odd -eq 0 ]; 
    then 
        echo -ne $i";"; 
        odd=1; 
    else 
        echo $i; 
        odd=0; 
    fi; 
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T12:01:58.177

未经测试，sed 部分可能是错误的

```
paste -d ';' - - < filename | sed -r 's/(^|;)[^:]:/\1/g' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T14:56:56.330

这可能对您有用：

```
sed '$!N;s/[^:]*:\([^\n]*\)\n[^:]*:/\1;/' file
shareX;commentX
shareY;commentY
shareZ;commentZ 
```

# c# - xslt 分组 - 从一种 xml 格式转换为另一种

> ID：10348640
> 
> 赞同：0
> 
> 时间：2012-04-27T10:01:51.877
> 
> 标签：c#, datacontractserializer, xml-deserialization

我有一个 xslt，用于从一种 xml 格式转换为另一种格式。

我的源文件有多个“生产订单”和一个“销售订单”我的目的地只有一个“销售订单”，其中包含所有生产订单。

这是我的源xml格式

```
 <GenomicOrder>
  <SalesOrder>
    ....
  </SalesOrder>
  <ProductionOrder>
    ....
  </ProductionOrder>
  <ProductionOrder>
    ....
  </ProductionOrder>
  <ProductionOrder>
    ....
  </ProductionOrder>
</GenomicOrder> 
```

我的目标 xml 格式如下

```
<GenomicOrder>
  <SalesOrder>
    ....
  <ProductionOrder>
    ....
  </ProductionOrder>
  <ProductionOrder>
    ....
  </ProductionOrder>
  <ProductionOrder>
    ....
  </ProductionOrder>
  </SalesOrder>
</GenomicOrder> 
```

我的反序列化代码如下

```
DataContractSerializer ser = new DataContractSerializer(typeof(SalesOrder));
            FileStream fs =
                new FileStream(
                    @"C:\realsample.xml",
                    FileMode.Open);
            XmlDictionaryReader reader1 = XmlDictionaryReader.CreateTextReader(fs, new XmlDictionaryReaderQuotas());

            //Deserialize the data and read it from the instance.
            SalesOrder parent = (SalesOrder)ser.ReadObject(reader1, true);

            reader1.Close(); 
```

我成功的销售订单 xslt 转换如下

```
<xsl:template match="/">
    <SalesOrder>
      <xsl:apply-templates select="GenomicOrder/SalesOrder"/>
      <ProductionOrders>
        <xsl:apply-templates select="GenomicOrder/ProductionOrder"/>
      </ProductionOrders>
    </SalesOrder>
  </xsl:template> 
```

SalesOrder.OrderId=1234; SalesOrder.ProductionOrder =null;

我成功的生产订单xslt改造如下

```
<xsl:template match="/">
        <SalesOrder>
          <ProductionOrders>
            <xsl:apply-templates select="GenomicOrder/ProductionOrder"/>
          </ProductionOrders>
          <xsl:apply-templates select="GenomicOrder/SalesOrder"/>
        </SalesOrder>
</xsl:template> 
```

SalesOrder.OrderId=null; SalesOrder.ProductionOrder.OrderRef = 12345;

是否有任何更改可以一次反序列化所有对象。我为“GenomicOrder/ProductionOrder”和“GenomicOrder/SalesOrder”编写了转换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:20:52.920

我不确定我是否理解问题，假设您想将所有元素包装在一个`SalesOrder`元素之后，您可以使用类似的方法

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="2.0">

  <xsl:strip-space elements="*"/>
  <xsl:output indent="yes"/>

  <xsl:template match="GenomicOrder">
    <xsl:copy>
      <xsl:for-each-group select="*" group-starting-with="SalesOrder">
        <SalesOrder>
          <xsl:copy-of select="node(), current-group() except ."/>
        </SalesOrder>
      </xsl:for-each-group>
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

XSLT 2.0 样式表，当在输入上使用 Saxon 9.4 运行时

```
 <GenomicOrder>
  <SalesOrder>
    ....
  </SalesOrder>
  <ProductionOrder>
    ....
  </ProductionOrder>
  <ProductionOrder>
    ....
  </ProductionOrder>
  <ProductionOrder>
    ....
  </ProductionOrder>
</GenomicOrder> 
```

输出

```
<GenomicOrder>
   <SalesOrder>
    ....
  <ProductionOrder>
    ....
  </ProductionOrder>
      <ProductionOrder>
    ....
  </ProductionOrder>
      <ProductionOrder>
    ....
  </ProductionOrder>
   </SalesOrder>
</GenomicOrder> 
```

如果我的建议没有帮助，您可能需要发布有关 XML 输入结构的更多详细信息。

# c# - mongodb中的授权

> ID：10348644
> 
> 赞同：3
> 
> 时间：2012-04-27T10:02:16.220
> 
> 标签：c#, mongodb

只读用户只有读取权限。因此，具有 readonly true 的用户无权添加新用户或任何写入能力。

我正在构建一个管理 MongoDB 中数据的实用程序。当我以只读用户身份登录时，它不应该允许我添加新用户。当我实现它时，它实际上并没有添加用户，但它没有抛出任何异常。

这是我添加只读用户的命令

```
var credentials = new MongoCredentials(username, password,false);
var addUser = new MongoUser(credentials, readOnly);
var database = server.GetDatabase(databaseName);
database.AddUser(addUser); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T18:58:58.023

您是否使用 --auth 命令行参数启动 mongod？

你`safe=true`在你的连接字符串上使用了吗？

此外，您需要使用管理员凭据将用户添加到数据库：

```
var adminCredentials = new MongoCredentials("adminuser", "adminpassword", true);
var userCredentials = new MongoCredentials("username", "password");
var user = new MongoUser(userCredentials, true);
var fooDatabase = server.GetDatabase("foo", adminCredentials);
fooDatabase.AddUser(user); 
```

请注意，有两组凭据：一组用于正在添加的用户，另一组用于您的代码以添加用户的管理员凭据。

# jakarta-ee - JBoss6部署错误下的CXF web服务

> ID：10348646
> 
> 赞同：0
> 
> 时间：2012-04-27T10:02:28.160
> 
> 标签：jakarta-ee, cxf, jboss6.x

我正在使用 CXF 编写 Web 服务并在 JBoss 6.0.0.Final 下运行。现在，我有一个带有一种方法的简单 Web 服务类，仅用于测试。我的战争没有得到部署。部署战争时出现以下异常。

```
13:55:27,354 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[localhost].[/cxfws]] **Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener: java.lang.NoClassDefFoundError: org/springframework/core/io/AbstractFileResolvingResource**
        at java.lang.ClassLoader.defineClass1(Native Method) [:1.7.0]
        at java.lang.ClassLoader.defineClass(Unknown Source) [:1.7.0]
        at org.jboss.classloader.spi.base.BaseClassLoader.access$200(BaseClassLoader.java:52) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.base.BaseClassLoader$2.run(BaseClassLoader.java:650) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.base.BaseClassLoader$2.run(BaseClassLoader.java:609) [jboss-classloader.jar:2.2.0.GA]
        at java.security.AccessController.doPrivileged(Native Method) [:1.7.0]
        at org.jboss.classloader.spi.base.BaseClassLoader.loadClassLocally(BaseClassLoader.java:608) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.base.BaseClassLoader.loadClassLocally(BaseClassLoader.java:585) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.base.BaseDelegateLoader.loadClass(BaseDelegateLoader.java:156) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.filter.FilteredDelegateLoader.doLoadClass(FilteredDelegateLoader.java:141) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.filter.FilteredDelegateLoader.loadClass(FilteredDelegateLoader.java:132) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.base.ClassLoadingTask$ThreadTask.run(ClassLoadingTask.java:461) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.base.ClassLoaderManager.nextTask(ClassLoaderManager.java:262) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.base.ClassLoaderManager.process(ClassLoaderManager.java:161) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.base.BaseClassLoaderDomain.loadClass(BaseClassLoaderDomain.java:260) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.base.BaseClassLoaderDomain.loadClass(BaseClassLoaderDomain.java:1152) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.base.BaseClassLoader.loadClassFromDomain(BaseClassLoader.java:886) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.base.BaseClassLoader.doLoadClass(BaseClassLoader.java:505) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.base.BaseClassLoader.loadClass(BaseClassLoader.java:450) [jboss-classloader.jar:2.2.0.GA]
        at java.lang.ClassLoader.loadClass(Unknown Source) [:1.7.0]
        at org.springframework.web.context.support.AbstractRefreshableWebApplicationContext.getResourceByPath(AbstractRefreshableWebApplicationContext.java:153) [:3.0.5.RELEASE]
        at org.springframework.core.io.DefaultResourceLoader.getResource(DefaultResourceLoader.java:102) [:2.5.5]
        at org.springframework.core.io.support.PathMatchingResourcePatternResolver.getResources(PathMatchingResourcePatternResolver.java:280) [:2.5.5]
        at org.springframework.context.support.AbstractApplicationContext.getResources(AbstractApplicationContext.java:1227) [:3.0.5.RELEASE]
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:177) [:3.0.5.RELEASE]
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149) [:3.0.5.RELEASE]
        at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:124) [:3.0.5.RELEASE]
        at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:93) [:3.0.5.RELEASE]
        at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130) [:3.0.5.RELEASE]
        at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:467) [:3.0.5.RELEASE]
..... 
```

该项目是一个 maven 项目，我有 spring jar 依赖项，因为我稍后将编写 bean 类。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T07:21:12.633

这很有趣，但我在 pom.xml 中做了一些排除（jaxb-api、jaxb-impl、jetty、geronimo-stax-api_1.0_spec、stax-api）并且它起作用了。我的同事建议了一些排除项（geronimo、jetty）。但我不知道这与错误有什么关系。有人吗？

# ruby-on-rails - Rspec 不执行 AJAX 调用

> ID：10348650
> 
> 赞同：2
> 
> 时间：2012-04-27T10:02:44.263
> 
> 标签：ruby-on-rails, ajax, selenium, rspec, capybara

我正在尝试使用 ajax 测试调用控制器操作的链接。本质上，当用户点击“关注”时，他将与公司相关联，并且将使用 JS 执行渲染部分。问题是当我在开发中尝试它时它可以正常工作，但它在测试中没有响应。我一直在尝试很多方法，看起来调用永远不会到达控制器。

在这里你可以看到测试：

```
#spec/integration/following_spec.rb

it "should add the company to the ones followed by the user", :js => true do
  find("#current_company").click_link "Follow"
  sleep 2
  @user.companies_followed.include?(@company).should be_true
end 
```

风景：

```
#app/views/companies/_follow_button.html.slim

= link_to change_follow_state_company_path(@company), :method => :put, :remote => true, :id => "follow", :class => "btn_block light" do
' Follow 
```

以及测试配置：

```
#spec/integration_helper.rb

require 'spec_helper'
require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'
require 'capybara/rspec'
require 'capybara/rails'

Dir[Rails.root.join("spec/integration/support/**/*.rb")].each {|f| require f}

RSpec.configure do |config|
  config.use_transactional_fixtures = true

  config.before do
    clear_email_queue
  end
end

Rails.cache.clear 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T10:22:37.163

您必须考虑到尝试进行 AJAX 调用的不是 RSpec，而是 capybara。

此外，Rails 正在做什么`method: :put`并且`remote: true`正在使用 UJS，而 capybara`rack/test`不能很好地处理开箱即用（因为它暗示了 javascript）。如果您甚至不使用`remote: true`但仅使用`method: :put`.

我敢打赌，如果您使用 capybara-webkit，那将不会发生：

```
# Gemfile
gem 'capybara-webkit'

# spec/integration_helper.rb
Capybara.default_driver = :webkit 
```

如果这行得通，`rack/test`那就是给你带来问题的原因。那是因为在处理 javascript 时它不是那么好。在黄瓜中有一种叫做的东西，`capybara_javascript_emulation`但我在做测试时不会依赖它。

我的方法：在需要 javascript 的测试上切换驱动程序，并在更简单的测试上依赖天真`rack-test`:)

另外，看`spinach`在上帝的份上，使用 , ！（或者`turnip`，至少）：D

# asp.net-mvc-3 - 如何通过我的 ASP.NET MVC 应用程序访问 NAS？

> ID：10348652
> 
> 赞同：0
> 
> 时间：2012-04-27T10:02:57.493
> 
> 标签：asp.net-mvc-3, iis-7, fileserver

我想通过我的 ASP.NET MVC 应用程序访问文件服务器 (NAS)，但找不到正确的方法。

到目前为止我所做的是：

*   在我的 NAS 上的目录上创建具有读/写权限的用户
*   在我的 IIS 服务器上创建了一个虚拟目录，该目录使用先前定义的用户凭据连接到 nas 目录

现在，如果我导航到我的虚拟目录 (AppliCationIPAdress/NAS)，我会自动重定向到 \NASIPAdress\My\Directory。在 NAS loginnotifications 我得到信息，有人使用给定的凭据连接到我的目录 => 应该是这样

但是，如果我通过我的 MVC 应用程序访问 NAS 目录（无论我使用 UNC 还是虚拟目录重定向），我都会收到拒绝访问错误消息，并且在 NAS loginnotifications 中没有列出我准备好的用户帐户，而是我的网络服务器作为尝试过的用户登录。

```
 var dirName = Server.MapPath("~/NAS/Dir/");
        ViewBag.Message = System.IO.Directory.GetFiles(dirName ); 
```

有人可以解释为什么会发生这种情况以及如果我想通过我的 mvc 应用程序访问文件服务上的文件我必须做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:10:31.720

您必须授予服务帐户访问文件区域的权限，或者使用具有权限的用户运行应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-13T22:05:04.347

有用的是：

1.  在 NAS 和 IIS 服务器中具有相同的用户帐户和密码。
2.  为您的 Web 应用程序创建一个应用程序池或使用默认应用程序池并将用户帐户更改为前面提到的相同。脚步：
    *   转到**IIS 管理器**
    *   单击**应用程序池**
    *   右键单击分配给您的 Web 应用程序的应用程序池，然后选择**高级设置...**
    *   在**Process Model部分中，将****Identity**字段更改为上述用户帐户。
    *   单击位于字段右侧的**3 个点按钮**
    *   选择**自定义帐户**并单击**设置...**按钮
    *   设置**用户名**、**密码**和**密码确认**（与上述相同的用户帐户。

希望能帮助到你！

弗朗西斯科G

# python - 无法安装 python 模块

> ID：10348653
> 
> 赞同：3
> 
> 时间：2012-04-27T10:02:57.407
> 
> 标签：python

我对以下命令有疑问：

> setup.py 安装。

我知道它应该可以工作，我已经在笔记本电脑上尝试过，但目前我无法访问它。我需要完成作业，所以我在我的电脑上尝试了同样的操作。当我在 cmd 中键入相同的命令时，它只会运行 pyscripter，就好像我会右键单击 setup.py 并单击使用 pyscripter 编辑一样。它什么也不做。我确定我在 cmd 的正确文件夹中。

我的 python 版本是 2.7，我的 pyscripter 版本是 v2.5.3。我的操作系统是win7。我尝试安装其他模块，但得到相同的响应。

有没有人遇到过同样的问题？我已经搜索了互联网，但我没有找到这个问题的任何答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T10:19:52.233

假设您在默认文件夹 ie 中安装了 Python 2.7 `c:\python27`，那么您可以键入：

```
c:\python27\python setup.py install 
```

无论您在何处安装它，都应该将该路径附加到 PATH 变量中（您需要以管理员身份登录才能执行此操作）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T10:13:36.593

`python setup.py install`改为这样做。

Windows 可能未设置为将`.py`文件识别为可执行文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T10:32:40.230

最近我们学校的班级使用了上述所有程序。大约有少数学生在安装时遇到了您所描述的问题。幸运的是我没有这个问题，但我可以建议你使用管理权限。

> 确保下载正确的版本。
> 
> 转到您的下载文件夹并查看您下载的文件（通过我的计算机而不是通过您的网络浏览器执行此操作）
> 
> 右键单击该文件，然后单击以管理员身份运行

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T12:58:18.093

这是一个很棒的 Windows 二进制文件站点：[http ://www.lfd.uci.edu/~gohlke/pythonlibs/](http://www.lfd.uci.edu/~gohlke/pythonlibs/)

如果您需要的库在那里，只需像任何其他 Windows 程序一样下载并安装...

# php - 为什么wordpress主题中的single.php，每个页面都显示相同的内容？

> ID：10348658
> 
> 赞同：0
> 
> 时间：2012-04-27T10:03:26.267
> 
> 标签：php, wordpress

```
<div class="content" style="min-height:1022px;"> 
<?php if (have_posts()) : while (have_posts()) : the_post(); ?>
<div class="singlepost">
<h1 class="page-title"><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a>    </h1>
<div class="post_info">
<p><?php the_time('Y年n月j日') ?>
<span>/ </span>
<?php comments_popup_link('0 comment', '1 comment', '% comments', '', 'closed'); ?>
<span>/ </span>
<?php the_category(', ') ?>
</p> 
</div>
<div class="post1">
<div class="post1text">
<!-- Post Content -->
<?php the_content(); ?>
</div>
</div>   
<p class="clearfix" style="margin-left:20px;"><?php previous_posts_link('&lt;&lt; TheNewer', 0); ?> <span class="float right"><?php next_posts_link('ThePast &gt;&gt;', 0); ?></span></p>
</div>
<?php endwhile; else : ?>
<?php endif; ?>
<div class="cleared"></div>      
</div> 
```

上面的代码是我的single.php，它显示了内容，但它显示每个页面都显示相同的内容，那么，它有什么问题呢？是循环吗？非常感谢~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:32:28.970

一旦您了解了基本的模板选择层次结构，这将非常容易，这应该可以帮助您入门。 [http://codex.wordpress.org/Template_Hierarchy](http://codex.wordpress.org/Template_Hierarchy)

您还可以创建页面模板，它真的非常简单和有用。 [http://codex.wordpress.org/Pages#Creating_your_own_Page_Templates](http://codex.wordpress.org/Pages#Creating_your_own_Page_Templates)

最后，一旦你完成了所有这些工作，你就可以开始使用条件标签做一些非常聪明的事情了。 [http://codex.wordpress.org/Conditional_Tags](http://codex.wordpress.org/Conditional_Tags)

在 single.php 中尝试这个简单的代码，而不是你的代码

```
 <div class="content" style="min-height:1022px;">
            <?php while ( have_posts() ) : the_post(); ?>

                <nav id="nav-single">
                    <h3 class="assistive-text"><?php _e( 'Post navigation', 'twentyeleven' ); ?></h3>
                    <span class="nav-previous"><?php previous_post_link( '%link', __( '<span class="meta-nav">&larr;</span> Previous', 'twentyeleven' ) ); ?></span>
                    <span class="nav-next"><?php next_post_link( '%link', __( 'Next <span class="meta-nav">&rarr;</span>', 'twentyeleven' ) ); ?></span>
                </nav><!-- #nav-single -->

                <?php get_template_part( 'content', 'single' ); ?>

                <?php comments_template( '', true ); ?>

            <?php endwhile; // end of the loop. ?>
        </div> 
```

# silverlight - 在 DataTemplateSelector 中使用图钉

> ID：10348664
> 
> 赞同：1
> 
> 时间：2012-04-27T10:03:38.333
> 
> 标签：silverlight, windows-phone-7, binding, datatemplate

我已经构建了一个 DataTemplateSelector，用于在地图上显示不同的图钉。我现在有以下 DataTemplate 可以按我想要的方式工作，除了它不是图钉而是显示在地图上的文本块。

```
<DataTemplate x:Key="pushpinSelector">
    <my:Pushpin Location="{Binding Location}" Tap="Pushpin_Tap">
        <my:Pushpin.Template>
            <ControlTemplate>
                <local:PushpinTemplateSelector Content="{Binding}">
                    <local:PushpinTemplateSelector.ClusterTemplate>
                        <DataTemplate>
                            <TextBlock Text="Cluster" Width="100" Foreground="YellowGreen"></TextBlock>
                        </DataTemplate>
                    </local:PushpinTemplateSelector.ClusterTemplate>
                    <local:PushpinTemplateSelector.PushpinTemplate>
                        <DataTemplate>
                            <TextBlock Text="Pushpin" Width="100" Foreground="Blue"></TextBlock>
                        </DataTemplate>
                    </local:PushpinTemplateSelector.PushpinTemplate>
                </local:PushpinTemplateSelector>
            </ControlTemplate>
        </my:Pushpin.Template>
    </my:Pushpin>
</DataTemplate> 
```

我希望它也能以以下格式工作：

```
<DataTemplate x:Key="pushpinSelector">
    <local:PushpinTemplateSelector Content="{Binding}">
        <local:PushpinTemplateSelector.ClusterTemplate>
            <DataTemplate>
                <my:Pushpin Location="{Binding Location}" Content="{Binding Count}" Foreground="YellowGreen"></my:Pushpin>
            </DataTemplate>
        </local:PushpinTemplateSelector.ClusterTemplate>
        <local:PushpinTemplateSelector.PushpinTemplate>
            <DataTemplate>
                <my:Pushpin Location="{Binding Location}" Foreground="Blue"></my:Pushpin>
            </DataTemplate>
        </local:PushpinTemplateSelector.PushpinTemplate>
    </local:PushpinTemplateSelector>
</DataTemplate> 
```

但是使用这个模板，它只在地图上显示 1 个黑色图钉。我对绑定做错了吗？我不明白为什么这不能以预期的方式工作。

根据@localjoost 的要求，datatemplateselector 的代码：

抽象类：

```
public abstract class DataTemplateSelector : ContentControl
{
    public virtual DataTemplate SelectTemplate(
        object item, DependencyObject container)
    {
        return null;
    }

    protected override void OnContentChanged(object oldContent, object newContent)
    {
        base.OnContentChanged(oldContent, newContent);

        ContentTemplate = SelectTemplate(newContent, this);
    }
} 
```

以及抽象类的实现：

```
 public class PushpinTemplateSelector : DataTemplateSelector
{
    public DataTemplate ClusterTemplate
    {
        get;
        set;
    }

    public DataTemplate PushpinTemplate
    {
        get;
        set;
    }

    public override DataTemplate SelectTemplate(object item, DependencyObject container)
    {
        PushpinModel model = item as PushpinModel;

        if (model.CurrentObject == null)
        {
            return ClusterTemplate;
        }
        else
        {
            return PushpinTemplate;
        }
    }
} 
```

以及我如何在地图控件中使用 Datatemplate（在我的应用程序资源部分中定义）：

```
<my:Map Height="624" HorizontalAlignment="Left" Name="map1" VerticalAlignment="Top" Width="468" CredentialsProvider="XXXXX" 
        ZoomLevel="13">
    <my:MapItemsControl Name="pushPinModelsLayer" ItemsSource="{Binding PushpinModels}" ItemTemplate="{StaticResource pushpinSelector}" />
    <my:Pushpin Name="myLocation" Template="{StaticResource MyLocationTemplate}"></my:Pushpin>
</my:Map> 
```

据我所知，图钉选择器模板中没有火箭科学。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:26:16.003

我通常使用多层来做到这一点。这是一段来自实际工作程序的代码。也许添加图层可以帮助您？

```
<Microsoft_Phone_Controls_Maps:Map x:Name="map"
                   CredentialsProvider="blah">
  <Microsoft_Phone_Controls_Maps:MapLayer x:Name="MapLayer_GasStations">
    <Microsoft_Phone_Controls_Maps:MapItemsControl 
      ItemsSource="{Binding GasStations}" 
      ItemTemplate="{StaticResource GasStationViewModelTemplate}" />
  </Microsoft_Phone_Controls_Maps:MapLayer>
  <Microsoft_Phone_Controls_Maps:MapLayer x:Name="MapLayer_RoadBlocks">
    <Microsoft_Phone_Controls_Maps:MapItemsControl 
      ItemsSource="{Binding RoadBlocks}" 
      ItemTemplate="{StaticResource RoadBlockViewModelTemplate}" />
  </Microsoft_Phone_Controls_Maps:MapLayer>
</Microsoft_Phone_Controls_Maps:Map> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T08:27:22.787

没有找到与问题中描述的第一种方法不同的方法。现在我将以这种方式使用它。

# dynamics-crm - 通过 CRM 2011 SDK 访问共享实体

> ID：10348667
> 
> 赞同：2
> 
> 时间：2012-04-27T10:03:48.680
> 
> 标签：dynamics-crm, dynamics-crm-2011

我试图在代码中返回与团队**共享的特定实体的列表。**特别是正在共享的共享视图（用户查询实体）对象？

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:35:05.027

这就是我最终使用的：

```
RetrievePrincipalAccessRequest shareAccessRequest = new RetrievePrincipalAccessRequest
            {
                Principal = new EntityReference("team", myTeam.Id),
                Target = new EntityReference("userquery", uvEntity.Id)
            };

var shareAccess = (RetrievePrincipalAccessResponse)this.crmConnection.OrgServiceProxy.Execute(shareAccessRequest); 
```

然而，尽管与团队共享视图，但返回的访问权限始终为**无。**我不确定为什么？

# shell - 如何使用命令替换创建 unix 别名？

> ID：10348681
> 
> 赞同：0
> 
> 时间：2012-04-27T10:04:36.337
> 
> 标签：shell, unix

我想为以下内容创建一个别名。你能告诉我如何设置吗？

```
mate  \`find . -name <filename>\` 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T11:57:02.620

改用函数：`mymate() { mate $(find . -name "$1"); }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:11:46.057

这是一个间接的解决方案。将命令放在一个文件中（没有 .sh 说 cmdfile），`~/bin`然后将别名指定为`alias myalias=cmdfile`

# css - CSS 宽度和最小宽度

> ID：10348689
> 
> 赞同：0
> 
> 时间：2012-04-27T10:05:06.410
> 
> 标签：css

我将以下样式应用于表格

```
width: auto;
min-width: 98.5%; 
```

当我在 chrome 浏览器中查看时，div 内的表格似乎只有包含 div 的大约 50% 的宽度。在 IE9 中，表格占据了整个宽度。在 Chrome 中，当我看到使用 F12 应用的样式时，两种样式都被应用而不是交叉。

```
.containing > table {
position: relative;
left: 0;
margin-right: 0;
top: 0;
border: 1px solid #DDD;
width: auto;
min-width: 98.5%;
margin-bottom: 1em;
-webkit-border-bottom-right-radius: 8px;
-webkit-border-bottom-left-radius: 8px;
-moz-border-radius-bottomright: 8px;
-moz-border-radius-bottomleft: 8px;
border-bottom-right-radius: 8px;
border-bottom-left-radius: 8px;
} 
```

html:

```
<div class="containing">
<table>

</table>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:21:14.620

嘿我你应该定义边界半径如果你想要边界不要在你的表中定义

我认为您在 div 中定义边界和边界半径，如下所示

检查住前。[http://jsfiddle.net/RfWWh/](http://jsfiddle.net/RfWWh/)

并根据您的设计进行调整..

# plupload - Plupload -FileUploaded 事件未触发

> ID：10348691
> 
> 赞同：0
> 
> 时间：2012-04-27T10:05:11.783
> 
> 标签：plupload

```
 uploader= new plupload.Uploader({
        runtimes: 'gears,html5,flash,silverlight,browserplus,html4',
        browse_button: 'pickFile',
        container: 'FileContainer',
        max_file_size: '2048mb',
        url: '<%=Url.Action("testaction", "testcontroller", 
         new { area = "testArea" }) %>',
        flash_swf_url: flashVideomm,
        silverlight_xap_url: silverLightmm,
        multipart: true,
        multipart_params: { "form": ''
        },
        filters: [
                { title: "Excel file", extensions: "xlsx" }
            ]
    });
     uploader.bind('FileUploaded', function (up, file, info) {
        // Redirect after successful upload
        alert(info);
    }); 
```

在上面的示例中，根本没有触发“FileUploaded”事件。不确定是什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:01:50.900

你试过这种方法吗？

```
uploader= new plupload.Uploader({
        runtimes: 'gears,html5,flash,silverlight,browserplus,html4',
        browse_button: 'pickFile',
        container: 'FileContainer',
        max_file_size: '2048mb',
        url: 'CHECK THIS AREA', 
        new { area = "testArea" }) %>',
        flash_swf_url: flashVideomm,
        silverlight_xap_url: silverLightmm,
        multipart: true,
        multipart_params: { "form": ''},
        filters: [
                { title: "Excel file", extensions: "xlsx" }
            ],
        init:
           {
             FilesAdded: function (up, files, info?) { alert(files.length);  }
            }

    }); 
```

PS这是副本和过去还是这里的错字？这将导致 JavaScript 问题，并且很可能导致绑定和/或整个 JavaScript 引擎停止工作。

```
'<%=Url.Action("testaction", "testcontroller", 
```

# c# - 抑制 .NET webbrowser 控件中的“您确定要离开此页面”弹出窗口

> ID：10348692
> 
> 赞同：0
> 
> 时间：2012-04-27T10:05:26.057
> 
> 标签：c#, winforms, webbrowser-control

我有一个用 WinForms C# 编写的 Web 浏览器自动化项目。在导航过程中，浏览器会执行“您确定要离开此页面吗？”。弹出。我们需要这个弹出窗口，所以我不能从网站代码中删除它，这意味着我必须在我的自动化应用程序中覆盖它。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T17:20:25.823

这是顺利的解决方案..

添加对 mshtml 的引用并使用 mshtml 添加；

```
Browser.Navigated += 
    new WebBrowserNavigatedEventHandler( 
        (object sender, WebBrowserNavigatedEventArgs args) => { 
            Action<HtmlDocument> blockAlerts = (HtmlDocument d) => { 
                HtmlElement h = d.GetElementsByTagName("head")[0]; 
                HtmlElement s = d.CreateElement("script"); 
                IHTMLScriptElement e = (IHTMLScriptElement)s.DomElement; 
                e.text = "window.alert=function(){};"; 
                h.AppendChild(s); 
            }; 
            WebBrowser b = sender as WebBrowser; 
            blockAlerts(b.Document); 
            for (int i = 0; i < b.Document.Window.Frames.Count; i++) 
                try { blockAlerts(b.Document.Window.Frames[i].Document); } 
                catch (Exception) { }; 
        } 
    ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:09:58.257

您可以对网站代码进行*任何*更改吗？

如果是这样，您可能会考虑通过 暴露对象[`ObjectForScripting`](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.objectforscripting.aspx)，然后在决定显示弹出窗口之前检查网站代码`window.external`（并可能询问您的对象） - 因此，如果它找不到您的对象，则假定它正在正常使用并且显示它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-11T06:14:55.193

不再需要添加。试试看。像魅力一样工作。^_^

```
private void webNavigated(object sender, WebBrowserNavigatedEventArgs e)
    {
        HtmlDocument doc = webBrowser.Document;
        HtmlElement head = doc.GetElementsByTagName("head")[0];
        HtmlElement s = doc.CreateElement("script");
        s.SetAttribute("text", "function cancelOut() { window.onbeforeunload = null; window.alert = function () { }; window.confirm=function () { }}");
        head.AppendChild(s);
        webBrowser.Document.InvokeScript("cancelOut");
    } 
```

# struts2 - Struts2 和 Tomcat

> ID：10348696
> 
> 赞同：0
> 
> 时间：2012-04-27T10:05:37.740
> 
> 标签：struts2, tomcat7

我正在尝试在 Tomcat 7 上使用 Struts2 框架创建一个新应用程序。我在 eclipse 中正确创建了我的项目。我从eclipse本身运行tomcat。我的应用程序启动，但我在控制台中看到一个很长的异常跟踪（如下所示）。奇怪的是，这些显示为警告。最初，我以为我错过了一些库，所以我下载了 jaxb-xjc，但这并没有解决问题。接下来我尝试将示例war 文件（struts2-showcase.war）放入webapps 文件夹并启动tomcat。日志仍然显示这些错误。任何输入都会很棒。

```
WARNING: Unable to load class [com.sun.tools.xjc.runtime.NamespaceContext2] to check against the @HandlesTypes annotation of one or more ServletContentInitializers. 
java.lang.ClassNotFoundException: com.sun.tools.xjc.runtime.NamespaceContext2
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1678)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1523)
    at org.apache.catalina.startup.ContextConfig.checkHandlesTypes(ContextConfig.java:2006)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:1969)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsJar(ContextConfig.java:1858)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsUrl(ContextConfig.java:1826)
    at org.apache.catalina.startup.ContextConfig.processAnnotations(ContextConfig.java:1812)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1306)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:896)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:322)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5103)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:774)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:291)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:727)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:621)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
Apr 27, 2012 5:00:05 AM org.apache.catalina.startup.ContextConfig checkHandlesTypes
WARNING: Unable to load class [com.sun.tools.xjc.runtime.NamespaceContextImpl] to check against the @HandlesTypes annotation of one or more ServletContentInitializers. 
java.lang.ClassNotFoundException: com.sun.tools.xjc.runtime.NamespaceContextImpl
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1678)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1523)
    at org.apache.catalina.startup.ContextConfig.checkHandlesTypes(ContextConfig.java:2006)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:1969)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsJar(ContextConfig.java:1858)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsUrl(ContextConfig.java:1826)
    at org.apache.catalina.startup.ContextConfig.processAnnotations(ContextConfig.java:1812)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1306)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:896)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:322)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5103)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:774)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:291)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:727)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:621)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
Apr 27, 2012 5:00:05 AM org.apache.catalina.startup.ContextConfig checkHandlesTypes
WARNING: Unable to load class [com.sun.tools.xjc.runtime.PrefixCallback] to check against the @HandlesTypes annotation of one or more ServletContentInitializers. 
java.lang.ClassNotFoundException: com.sun.tools.xjc.runtime.PrefixCallback
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1678)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1523)
    at org.apache.catalina.startup.ContextConfig.checkHandlesTypes(ContextConfig.java:2006)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:1969)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsJar(ContextConfig.java:1858)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsUrl(ContextConfig.java:1826)
    at org.apache.catalina.startup.ContextConfig.processAnnotations(ContextConfig.java:1812)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1306)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:896)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:322)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5103)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:774)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:291)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:727)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:621)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
Apr 27, 2012 5:00:05 AM org.apache.catalina.startup.ContextConfig checkHandlesTypes
WARNING: Unable to load class [com.sun.tools.xjc.runtime.SAXMarshaller$1] to check against the @HandlesTypes annotation of one or more ServletContentInitializers. 
java.lang.ClassNotFoundException: com.sun.tools.xjc.runtime.SAXMarshaller$1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T10:11:19.670

您需要升级到最新的 Tomcat 7.0.x 版本，这些警告就会消失。

Tomcat 正在扫描注释并查找对不可用类的引用。没事儿。但是，较旧的 Tomcat 7 版本并没有忽略它并继续运行，而是记录了一个错误。

# android - 错误：无法实例化类

> ID：10348699
> 
> 赞同：0
> 
> 时间：2012-04-27T10:05:51.270
> 
> 标签：android, android-layout

我从另一个项目中复制了一些 java 和 XML 文件（因为我的朋友做了布局，但我做核心编码，我们在不同的项目中做）

不知何故，当我为我的代码实现布局时，它给出了错误（无法实例化类），我修复了所有包路径，刷新它，清理它，确保构造函数是公共的（显然），但 XML 仍然给出我的错误。

该项目在我重新启动eclipse后运行良好，它运行没有任何失败并且在logcat中没有错误，但是当我检查我的eclipse文件中的friend_schedule.xml文件时它一直给我错误，但它仍然让我好奇它是否稍后会给出任何效果，有什么想法吗？

这是无法实例化的java文件：

```
package cal.endar;
public class FriendSchedule extends LinearLayout 
{
public FriendSchedule(Context con)
{
    super(con);
    initComponent(con);
}

public FriendSchedule(Context con, AttributeSet att)
{
    super(con, att);
    initComponent(con);
}

public void initComponent(Context con)
{
    LayoutInflater inf=LayoutInflater.from(con);
    View v=inf.inflate(R.layout.main, null,false);

    //View v=inf.inflate(R.layout.daily_layout, null,false);
    //View v=inf.inflate(R.layout.weekly_layout, null,false);
    addView(v);
    v.getLayoutParams().height=LayoutParams.MATCH_PARENT;
    LinearLayout.LayoutParams lp=(LinearLayout.LayoutParams) v.getLayoutParams();
    lp.weight=1;
}

public void onClick(View v)
{
    v.setBackgroundResource(R.drawable.app_list_selected);
}
} 
```

这是我的friend_schedule.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/LinearLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:padding="5dp">

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="45dp"
        android:layout_height="45dp"
        android:src="@drawable/ic_launcher" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_marginLeft="5dp"
        android:layout_weight="0.13"
        android:gravity="left|center"
        android:text="My Name"
        android:textAppearance="?android:attr/textAppearanceLarge" />
 </LinearLayout>

<cal.endar.FriendSchedule
    android:layout_width="match_parent"
    android:layout_height="match_parent" android:layout_weight="1"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T03:55:19.273

我再次重新启动了我的 Eclipse，并且该项目成功运行，没有任何错误（我不知道为什么会发生这种情况，我对此没有任何好的指定答案）

但无论如何，谢谢你的回复......

# process - 检测创建过程

> ID：10348702
> 
> 赞同：0
> 
> 时间：2012-04-27T10:06:10.547
> 
> 标签：process, driver, detect, antivirus

我正在编写一个小程序可以保护计算机免受恶意软件的侵害。所以，我想在加载之前挂钩创建进程的函数（在加载之前，我想检查 md5 总和）。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T22:17:41.827

在 Windows Vista SP1 或更高版本中，您可以使用 ObRegisterCallback 例程 ( [http://msdn.microsoft.com/en-us/library/windows/hardware/ff557745(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff557745(v=vs.85).aspx) )。它仅在内核模式下可用，但我想您可以接受，因为您使用了标签“驱动程序”。

# php - Codeigniter，PHP：找不到对象错误

> ID：10348707
> 
> 赞同：1
> 
> 时间：2012-04-27T10:06:20.617
> 
> 标签：php, codeigniter

提交表单时出现错误

```
Object not found!
The requested URL was not found on this server. 
The link on the referring page seems to be wrong or outdated. 
Please inform the author of that page about the error. 
If you think this is a server error, please contact the webmaster 
Error 404 localhost
04/27/12 15:30:23
Apache/2.2.21 (Win32) mod_ssl/2.2.21 OpenSSL/1.0.0e PHP/5.3.8 mod_perl/2.0.4 Perl/v5.10.1 
```

网址显示为`http://localhost/frame/localhost/frame/index.php/verifylogin`。

Url 附加了`localhost/frame/`两次。我不知道出了什么问题。

中的代码`config.php`是：

```
$config['base_url'] = 'localhost/frame/';
$config['index_page'] = 'index.php';
$config['url_suffix'] = ''; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:16:38.640

尝试：

```
$config['base_url'] = 'http://localhost/frame/'; 
```

或者如果它失败了，

```
$config['base_url'] = '/'; 
```

# java - Weblogic 中的 Document-literal-bare webservice

> ID：10348709
> 
> 赞同：1
> 
> 时间：2012-04-27T10:06:51.593
> 
> 标签：java, xml, web-services, weblogic

我需要创建一个 web 服务，它接受请求 soap:Body 元素中的*任何xml，并使用响应 soap:Body 中的**任何*xml 进行回复。合适的 WS 操作风格（在我看来）是“document-literal-bare”。我希望生成的 WSDL 消息看起来像这样：

```
<s0:message name="process">
    <s0:part type="xs:any"/>
</s0:message> 
```

我该怎么做？

**详情**：

在 Weblogic 10.3 中，我写过：

```
@WebService(.....)
@SOAPBinding(style=SOAPBinding.Style.DOCUMENT, use=SOAPBinding.Use.LITERAL, parameterStyle=ParameterStyle.BARE)
public class BackEndSimulatorWS {

    @WebMethod
    public XmlObject process(XmlObject request) {
        .....
    }
} 
```

然而，日食抗议

```
(The "process" method) must be doc/literal/wrapped when binding wildcards to any. 
```

我知道 WS 必须能够确定要执行的方法，所以我尝试用注释方法

```
@Webmethod(action="simulation") 
```

但这没有帮助。当我用 org.w3c.dom.Document 替换 org.apache.xmlbeans.XmlObject 参数和响应类型时，错误消失了，但生成的 WSDL 消息不一般，它们属于 {java:org.w3c.dom} :文档类型。

任何帮助将不胜感激。

# google-app-engine - 应用引擎数据存储，按 fk 属性排序的查询

> ID：10348710
> 
> 赞同：1
> 
> 时间：2012-04-27T10:06:56.193
> 
> 标签：google-app-engine, google-cloud-datastore

我正在研究谷歌应用引擎的数据存储，我正在开发一个用于管理事件的应用程序。我有 2 个实体：

```
- user
- event
    - attribute eventDate 
```

用户可以关注一个或多个事件，因此我创建了链接表

```
- UserEvent
    -User key
    -Event key 
```

**我的问题是我想要一个用户遵循的事件列表，按 eventDate 排序。**

我能怎么做？

我找到了 3 个解决方案，但我不喜欢任何人......

1.  查询所有订购的事件，然后迭代并仅选择在 UserEvent 上发生一次*的事件（我不喜欢，因为我可能会有数千个事件，但用户只关注少数..）*
2.  查询所有用户事件（由 userKey 过滤）并将结果放入有序列表中*（我不喜欢，因为我必须一次加载所有事件，没有分页）*
3.  在表 UserEvent 中添加属性 eventDate *（我不喜欢，因为如果一个事件有 3000 个关注者，我必须进行 3000 次更新......）*

谢谢亚历山德罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:08:38.663

如果您真的不喜欢这种非规范化，请考虑使用 CloudSQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:10:53.763

如果您总是查询给定用户的事件，您可以考虑在 User 实体中存储一个 ListProperty of Events。

```
- user
    - attribute eventList []key 
```

您将受到实体的最大大小（当前为 1MB）的限制，如果该列表被编入索引，则限制为 5000 个条目。

# java - 日历中的事件列表

> ID：10348717
> 
> 赞同：0
> 
> 时间：2012-04-27T10:07:30.747
> 
> 标签：java, blackberry, java-me, calendar, recurring

我正在开发一个日历应用程序，我在其中创建了一个经常性事件 n 本机 BB 日历，该日历从 1 月 1 日开始，到 1 月 3 日结束。所以当我使用下面的 api 时

```
private EventList getEventList() {
        EventList eventList = null;
        try {
            eventList = (EventList) PIM.getInstance().openPIMList(
                    PIM.EVENT_LIST, PIM.READ_ONLY);
            Enumeration events = eventList.items();
            while (events.hasMoreElements()) {

                Event event = (Event) events.nextElement();
                int eve = eventList.OCCURRING;
                System.out.println("eve" + eve);
                long start = event.getDate(Event.START, 0);
                SimpleDateFormat sdf = new SimpleDateFormat("MMM dd,yyyy HH:mm");
                String date = sdf.formatLocal(start);
                System.out.println("List of dates:" + date);

                System.out.println("event is:" + event);
            }
        } 
```

这只给了我 1 月 1 日的日期，它不会重新计算 1 月 2 日和 3 日的日期。这个问题只与重复出现的 evetns 相关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T04:44:23.400

您需要调用 event.getRepeat() 来获取与事件关联的 RepeatRule 对象。请注意，如果事件不重复，它可以为 null。

然后查看[日期函数](http://www.blackberry.com/developers/docs/7.0.0api/javax/microedition/pim/RepeatRule.html#dates%28long,%20long,%20long%29)，它可以为您提供它在某个范围内出现的日期列表。

# android - 如何发送支持的意图列表？

> ID：10348718
> 
> 赞同：0
> 
> 时间：2012-04-27T10:07:33.103
> 
> 标签：android, android-intent

我正在创建一个可以由服务控制的简单应用程序。为了控制这个应用程序，服务必须知道可以发送给它的命令，所以我认为应该是应用程序提供这些命令的列表，如下：

1.  应用程序可能有一个响应意图的辅助活动（所以我应该在*“AndroidManifest.xml”*文件`MY_ACTION_GET_COMMANDS`中定义一个意图过滤器）。
**   服务知道他可以使用该`startActivityForResult`方法发送这种类型的意图。*   当应用程序接收到这种类型的意图时，适当的活动通过发送支持的命令列表（即意图列表）来响应发送者。*

 *如何发送支持的意图列表？

**更新：**请注意，应用程序和服务位于不同的包中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:20:01.570

我不确定我理解为什么你需要显示这些意图的活动。这是真实用户会看到的吗？

如果您真的想获取特定应用程序正在侦听的所有意图的列表，您可以使用 PackageManager。使用[PackageManager](http://developer.android.com/reference/android/content/pm/PackageManager.html#getPackageInfo%28java.lang.String,%20int%29)检索[PackageInfo](http://developer.android.com/reference/android/content/pm/PackageInfo.html)。然后，您将能够扫描该应用程序中所有定义的接收器。

如果您进一步解释，我可能会提供更多帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T10:27:14.617

您可以将支持的意图作为列表从子活动传递回父活动。

```
 Intent intent = this.getIntent();
        ArrayList<String> a = new ArrayList<String>();
        a.add("com.customintent.INTENT_ONE");
        a.add("com.customintent.INTENT_TWO");
        intent.putStringArrayListExtra("list",a);

        this.setResult(RESULT_OK, intent); 
```*

# java - 大型语料库中使用 Lucene/Lingpipe 的 Java 术语文档频率

> ID：10348722
> 
> 赞同：0
> 
> 时间：2012-04-27T10:07:49.243
> 
> 标签：java, lucene, text-analysis

我正在尝试分析大量文档，这些文档位于一个巨大的文件（3.5GB，300K 行，300K 文档）中，每行一个文档。在这个过程中，我使用 Lucene 进行索引，使用 Lingpipe 进行预处理。

问题是我想去掉文档中非常罕见的单词。例如，如果一个词在语料库（大文件）中出现的次数少于 MinDF 次，我想删除它。

我可以尝试使用 Lucene：计算所有不同术语的文档频率，按升序对它们进行排序，获取 DF 低于 MinDF 的术语，再次检查大文件，并逐行删除这些术语。

这个过程将非常缓慢。有谁知道使用 Java 更快的方法来做到这一点？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T10:25:56.397

首先创建一个临时索引，然后使用其中的信息生成最终索引。使用`IndexReader.terms()`，对其进行迭代，并且`TermEnum.docFreq`每个术语都有。累积所有低频项，然后将该信息输入到分析器中，该分析器`StopWordAnalyzerBase`在您创建最终索引时进行扩展。

# c# - 如何从（c＃）windows应用程序填写html文本框

> ID：10348724
> 
> 赞同：1
> 
> 时间：2012-04-27T10:07:55.117
> 
> 标签：c#, javascript, windows

我想从 Windows 应用程序执行以下操作：

1.  打开浏览器并导航到 URL。
2.  当我在浏览器窗口中的正确 URL 处时，我想从我的 Windows 应用程序在该页面上的 html 文本框中填写数据。
3.  完成后，我想按下一个按钮。

注意：Google Chrome 和 Mozilla Firefox 目前在我的浏览器窗口中使用。浏览器窗口中不使用 Internet Explorer(IE)。

1.URL（https://www.exple.com/login.html）已经在本地系统的任何网络浏览器（如Mozilla Firefox和Google Chrome）上打开。它由两个文本框组成，例如 Username 和 Password 。

2.我想在Google Chrome/Mozilla Firefox 网页浏览器的用户名和密码文本框中填写数据。

3.当在 Windows 应用程序中按下提交按钮时，输入数据从 C# Windows 应用程序获取到 URL。

提前致谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:17:08.553

这就是[WatiN](http://watin.org/)的用途。它主要是为 Web 应用程序测试而创建的，但您的问题也可以使用 WatiN 来解决。

来自首页的示例：

```
[Test] 
public void SearchForWatiNOnGoogle()
{
    using (var browser = new IE("http://www.google.com"))
    {
        browser.TextField(Find.ByName("q")).TypeText("WatiN");
        browser.Button(Find.ByName("btnG")).Click();

        Assert.IsTrue(browser.ContainsText("WatiN"));
    }
} 
```

此示例使用 IE，但也支持 Firefox。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T10:19:35.700

你可以做到，但这真的很难，但如果你在[testcomplete](http://smartbear.com/products/qa-tools/automated-testing-tools)中制作自动脚本然后从中获取代码，代码会很丑，但可以工作

# r - R：为矩阵中的某些单元格着色

> ID：10348726
> 
> 赞同：0
> 
> 时间：2012-04-27T10:07:57.440
> 
> 标签：r, lattice

我想知道我是否只能使用 R 矩阵中的某些单元格着色

```
image 
```

命令。目前，我正在这样做：

```
library(Matrix)

args <- commandArgs(trailingOnly=TRUE)

csv_name <- args[1]
pdf_name <- args[2]

pdf(pdf_name)
data <- scan(csv_name, sep=",")
len <- length(data)
num <- sqrt(len)
matrix <- Matrix(data, nrow=num, ncol=num)
image(matrix)
dev.off() 
```

CSV 文件包含介于 0 和 1 之间的值。
执行上述代码会得到以下图像：

![矩阵可视化](../Images/1c60d03c6672944d40bc98009891708f.png)

现在，我想将每行中的六个最小值涂成红色。有谁知道如何实现这一目标？

在此先感谢，
斯文

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T10:24:12.710

矩阵似乎使用格子（水平图）。您可以在顶部添加一个图层，

```
m = Matrix(1:9, 3)
library(latticeExtra)
image(m) + layer(panel.levelplot(1:2,1:2,1:2,1:2, col.regions="red")) 
```

编辑：实际上，首先给出颜色更有意义，

```
levelplot(as.matrix(m), col.regions=c(rep("red", 6), "blue", "green", "yellow"), at=1:9) 
```

但我没有成功的形象：

```
image(m, col.regions = c(rep("red", 6), "blue", "green", "yellow"), at=1:9) 
```

我可能错过了文档中的一个要点......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:48:22.130

您也可以简单地创建另一个矩阵，其中所有值都是 NaN，然后​​将值 1 添加到要突出显示的那些：

```
set.seed(1)
z <- matrix(rnorm(100), 10,10)
image(z)

z2 <- z*NaN
z2[order(z)[1:5]] <- 1
image(z2, add=TRUE, col=4) 
```

# c++ - 从文本文件中读取单词

> ID：10348727
> 
> 赞同：0
> 
> 时间：2012-04-27T10:08:02.907
> 
> 标签：c++

这是我必须遵循的要求：

> 将有一个 C 风格或 C++ 风格的字符串来保存这个词。一个 int 来保存每个单词的计数。包含这两者的结构或类。这个结构/类将被插入到一个 STL 列表中。您还需要一个 C 样式或 C++ 样式字符串来保存从文件中读取的文本行。您将根据分配规范中的单词定义将此行解析为单词。

第一部分看起来不错，但在第二部分中，我仍然不明白阅读一行然后将其解析成一个单词的意义。它比使用直接从文本文件中读取一个单词更有效吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:15:34.757

效率取决于单词的定义（来自assignment spec。）：如果您需要多次检查linem以确定单词的开始/结束位置（即属于单词的位置），则更多有效地将行保留在内存中，然后从磁盘执行多次读取（尽管 I/O 缓存可以减少对性能的影响）。

即使没有性能提升，这是一项家庭作业，我认为您被要求这样做是为了学习 1）如何从文件中读取字符串（行）；2）如何解析内存中的字符串。要同时实现这两个目标，你有这个要求

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:54:47.407

根据您的用例，逐行读取文件可能很有用。

首先读取内存中的整个文件，然后再解析它不会最小化内存使用量。程序运行所需的内存至少是文件的大小。如果输入文件与程序可用的内存相比很大，您将无法分配足够的内存来存储整个文件（尝试分配 20GB 的字符串以查看会发生什么）。

另一方面，如果您逐行读取，则一次只需要在内存中一行的大小：您可以立即释放为前几行分配的内存。

因此，在以下情况下，逐行解析很有用：

*   输入文件太大而无法完全放入内存
*   每行的大小足够小（如果文件由一大行组成，则逐行读取无济于事）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T10:16:33.660

使用从文件中读取每行`fstream`，然后通过检查空间并将其解析为单词，直到`loop`.

# css - 无法使字体在 IE,7,8 上工作

> ID：10348730
> 
> 赞同：1
> 
> 时间：2012-04-27T10:08:13.160
> 
> 标签：css, internet-explorer-8, cross-browser, internet-explorer-7

我无法`font-face`在`IE7`和上工作`IE8`。

我使用的代码是：

```
@font-face {
    font-family: 'DroidSans';
    src: url('fonts/DroidSans.eot');
    src: url('fonts/DroidSans.eot?iefix') format('eot'),
         url('fonts/DroidSans.woff') format('woff'),
         url('fonts/DroidSans.ttf') format('truetype'),
         url('fonts/DroidSans.svg#webfont1BSMunJa') format('svg');
    font-weight: normal;
    font-style: normal;
}
@font-face {
    font-family: 'DroidSans';
    src: url('fonts/DroidSans-Bold.eot');
    src: url('fonts/DroidSans-Bold.eot?iefix') format('eot'),
         url('fonts/DroidSans-Bold.woff') format('woff'),
         url('fonts/DroidSans-Bold.ttf') format('truetype'),
         url('fonts/DroidSans-Bold.svg#webfont1BSMunJa') format('svg');
    font-weight: bold;
}
@font-face {
    font-family: 'Lobster';
    src: url('fonts/Lobster.eot');
    src: url('fonts/Lobster.eot?iefix') format('eot'),
         url('fonts/Lobster.woff') format('woff'),
         url('fonts/Lobster.ttf') format('truetype'),
         url('fonts/Lobster.svg#webfont1BSMunJa') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

我读过这些文章：

*   [http://paulirish.com/2009/bulletproof-font-face-implementation-syntax/](http://paulirish.com/2009/bulletproof-font-face-implementation-syntax/)
*   [http://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax](http://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax)
*   [http://www.fontspring.com/blog/further-hardening-of-the-bulletproof-syntax](http://www.fontspring.com/blog/further-hardening-of-the-bulletproof-syntax)

他们都说这个解决方案应该是跨浏览器兼容的：

**浏览器兼容性：Safari、IE 6-9、IE 9 兼容模式、Firefox、Chrome、iOS、Android、Opera**

我究竟做错了什么？有没有人在这些方面有经验？

我在这里测试这个：dev.holiday.ge/xhtml/

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T14:54:30.270

我使用此网站生成的 .eot 文件：http://fontface.codeandmore.com/[有](http://fontface.codeandmore.com/)问题，即 7-8 没有收到它们。我使用[http://www.fontsquirrel.com/](http://www.fontsquirrel.com/)并且字体现在可以正常加载，使用我的原始代码！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T11:38:24.263

我以前也遇到过你的问题。我用简单的解决方案解决了它。我正在使用 **2 个 CSS 文件**。一个用于 IE，一个用于其他。所以我`<head>`是这样的：

```
<link href="styles/css.css" rel="stylesheet" type="text/css" />
<!--[if IE]>
  <link href="styles/css.ie.css" rel="stylesheet" type="text/css" />
<![endif]--> 
```

这些是我的 CSS 文件：

```
/* css.css */
@font-face {
    font-family: 'font';
    src: local("☺"),
    url("fonts/f1.woff") format("woff"),
    url("fonts/f1.ttf") format("truetype");
} 
```

仅 IE CSS：（**eot**）

```
/* css.ie.css */
@font-face {
    font-family: 'font';
    src: url('fonts/f1.eot');
} 
```

这对我有用，我以前用过很多次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T10:15:54.897

## 因为 Internet Explorer 8 和更早的版本，不支持 @font-face 规则。

见[http://www.w3schools.com/cssref/css3_pr_font-face_rule.asp](http://www.w3schools.com/cssref/css3_pr_font-face_rule.asp)

@font-face 属于 CSS3 [http://www.w3.org/TR/css3-fonts/](http://www.w3.org/TR/css3-fonts/)

另一个问答[IE 浏览器（IE6、7、8）是否支持@font-face？](https://stackoverflow.com/q/5127409/1338846)

未经官方/完全支持的功能（请参阅：css3 规范）可能仍然可以通过一些 hack 工作（视觉上接近）。

如您所见，写文章的人已经知道这一点

> ### 什么？我不明白。
> 
> 使这项工作的（*hack ）技巧是“？”* 在 EOT 文件名之后。严重地。

你认为这个 url 符合某些标准吗，请记住，这里它仅供浏览器使用：`fonts/DroidSans-Bold.eot?iefix`
一篇文章指出，实际上绕过 IE 错误是 hack。如果现在修复了这些错误怎么办？它仍然有效吗？

这里的参考是三叉戟版本[http://msdn.microsoft.com/en-us/library/ms530303(VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms530303%28VS.85%29.aspx)这里是最标准的东西[http://www.w3.org/TR/ css3-fonts/#font-resources](http://www.w3.org/TR/css3-fonts/#font-resources)另见[http://en.wikipedia.org/wiki/Trident_(layout_engine)](http://en.wikipedia.org/wiki/Trident_%28layout_engine%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T10:38:01.457

[不使用Google Web Fonts](http://www.google.com/webfonts)有什么特别的原因吗？这两种字体都已经存在，并且以一些带宽为代价更容易。我一直在使用它们，在 IE 7-8-9 中我没有遇到过任何问题。

**编辑：**就问题而言，我不确定，但我记得读过一些关于 IE 不接受两个 src 属性的内容。或 src 属性中的多个值。如果您决定坚持使用自己的 css，您可能想研究一下。

# php - URI 路由不起作用（多语言）

> ID：10348732
> 
> 赞同：2
> 
> 时间：2012-04-27T10:08:23.493
> 
> 标签：php, .htaccess, codeigniter, routing, httpd.conf

你好吗？

**摘要：**我正在尝试将我的网站从 localhost 移动到 amazon-ec2 并且***几乎***所有路由都会带来“在此服务器上找不到请求的 URL example.com/xxx/yyy/。

**语境：**

*   在 public_html、应用程序和系统中使用 codeigniter 结构。
*   URI 中的 Web 语言。示例：localhost/public_html/es/main。
*   对于测试，一页（注册）它的路由方式不同：localhost/public_html/admin/register。
*   该页面从本地主机工作。

**问题：** 我将页面上传到我的 EC2，当我尝试访问时，几乎每个页面都显示 404 错误。只需**注册**页面即可，但前提是我通过*example.com/index.php/admin/register*调用它（*example.com/admin/register 带有相同的 404 错误*）。

非常欢迎任何建议或想法来探索！谢谢！！

**PS：**如果有帮助，我将分享我当前的 routes.php 代码。

```
$route['default_controller'] = "main";
$route['404_override'] = '';
$route['^(en|es)/(.+)$'] = "$2";
$route['^(en|es)$'] = $route['default_controller']; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T09:02:45.453

问题出在 httpd.conf 中，其中 public_html（我有 .htacces 文件）的“AllowOverride”设置为“None”。

我只需要将其更改为全部。

感谢 AchrafSoltani 和 Grigorash 的尝试，非常感谢！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T10:47:42.790

> 问题：我将页面上传到我的 EC2，当我尝试访问时，几乎每个页面都显示 404 错误。只需注册页面即可，但前提是我通过 example.com/index.php/admin/register 调用它（example.com/admin/register 带有相同的 404 错误）。

这意味着 .htaccess 缺少未正确设置。默认情况下，代码点火器依赖 index.php 来处理所有请求，但由于它在 URL 上看起来很难看，您应该添加一个带有正确参数的 .htaccess 以将其从 url 中删除，然后从 system/application 打开 config.php /config 目录并替换：

```
$config['index_page'] = “index.php” 
```

至

```
$config['index_page'] = “” 
```

# mysql - 使用 PhpMyAdmin 将多个表添加到 Mysql 数据库

> ID：10348741
> 
> 赞同：0
> 
> 时间：2012-04-27T10:09:18.207
> 
> 标签：mysql, sql, phpmyadmin, create-table

我创建了一个表单，并从表单字段中创建了一个 sql 文件，我将使用该文件为我的 mysql 数据库中的表单创建所有数据库字段。我正在使用以下代码来创建条目：

```
 ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `room_name_tab1` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `curtains_tab1` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `blinds_tab1` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `trackspoles_tab1` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `heading_tab1` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `shutters_yesno_tab1` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `voiles_tab1` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricsupplier_tab1` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricdesign_tab1` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabriccolour_tab1` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromansupplier_tab1` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromandesign_tab1` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromancolour_tab1` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rolltype_tab1` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalsupplier_tab1` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalcolour_tab1` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticaltype_tab1` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiansupplier_tab1` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiansdesign_tab1` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiancolour_tab1` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetian_slatwidth_tab1` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `notes_tab1` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `room_name` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `curtains_tab2` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `blinds_tab2` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `trackspoles_tab2` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `heading_tab2` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `shutters_yesno_tab2` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `voiles_tab2` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricsupplier_tab2` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricdesign_tab2` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabriccolour_tab2` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromansupplier_tab2` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromandesign_tab2` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromancolour_tab2` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rolltype_tab2` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalsupplier_tab2` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticaldesign_tab2` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalcolour_tab2` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticaltype_tab2` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiansupplier_tab2` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiansdesign_tab2` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiancolour_tab2` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetian_slatwidth_tab2` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `notes_tab2` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `room_name_tab3` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `curtains_tab3` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `blinds_tab3` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `trackspoles_tab3` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `heading_tab3` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `shutters_yesno_tab3` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `voiles_tab3` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricsupplier_tab3` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricdesign_tab3` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabriccolour_tab3` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromansupplier_tab3` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromandesign_tab3` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromancolour_tab3` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rolltype_tab3` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalsupplier_tab3` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticaldesign_tab3` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalcolour_tab3` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticaltype_tab3` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiansupplier_tab3` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiansdesign_tab3` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiancolour_tab3` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetian_slatwidth_tab3` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `notes_tab3` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `room_name_tab4` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `curtains_tab4` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `blinds_tab4` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `trackspoles_tab4` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `heading_tab4` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `shutters_yesno_tab4` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `voiles_tab4` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricsupplier_tab4` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricdesign_tab4` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabriccolour_tab4` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromansupplier_tab4` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromandesign_tab4` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromancolour_tab4` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rolltype_tab4` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalsupplier_tab4` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticaldesign_tab4` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalcolour_tab4` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticaltype_tab4` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiansupplier_tab4` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiansdesign_tab4` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiancolour_tab4` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetian_slatwidth_tab4` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `notes_tab4` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `room_name_tab5` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `curtains_tab5` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `blinds_tab5` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `trackspoles_tab5` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `heading_tab5` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `shutters_yesno_tab5` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `voiles_tab5` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricsupplier_tab5` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricdesign_tab5` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabriccolour_tab5` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromansupplier_tab5` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromandesign_tab5` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromancolour_tab5` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rolltype_tab5` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalsupplier_tab5` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticaldesign_tab5` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalcolour_tab5` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticaltype_tab5` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiansupplier_tab5` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiansdesign_tab5` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiancolour_tab5` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetian_slatwidth_tab5` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `notes_tab5` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `room_name_tab6` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `curtains_tab6` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `blinds_tab6` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `trackspoles_tab6` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `heading_tab6` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `shutters_yesno_tab6` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `voiles_tab6` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricsupplier_tab6` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricdesign_tab6` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabriccolour_tab6` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromansupplier_tab6` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromandesign_tab6` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromancolour_tab6` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rolltype_tab6` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalsupplier_tab6` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticaldesign_tab6` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalcolour_tab6` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticaltype_tab6` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiansupplier_tab6` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiansdesign_tab6` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiancolour_tab6` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetian_slatwidth_tab6` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `notes_tab6` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `room_name_tab7` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `curtains_tab7` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `blinds_tab7` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `trackspoles_tab7` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `heading_tab7` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `shutters_yesno_tab7` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `voiles_tab7` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricsupplier_tab7` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricdesign_tab7` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabriccolour_tab7` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromansupplier_tab7` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromandesign_tab7` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromancolour_tab7` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rolltype_tab7` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalsupplier_tab7` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticaldesign_tab7` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalcolour_tab7` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticaltype_tab7` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiansdesign_tab7` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiancolour_tab7` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetian_slatwidth_tab7` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `notes_tab7` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `room_name_tab8` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `curtains_tab8` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `blinds_tab8` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `heading_tab8` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `shutters_yesno_tab8` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `voiles_tab8` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricsupplier_tab8` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricdesign_tab8` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabriccolour_tab8` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromansupplier_tab8` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromandesign_tab8` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromancolour_tab8` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rolltype_tab8` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalsupplier_tab8` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticaldesign_tab8` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalcolour_tab8` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticaltype_tab8` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiansupplier_tab8` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiansdesign_tab8` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiancolour_tab8` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetian_slatwidth_tab8` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `notes_tab8` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `room_name_tab9` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `curtains_tab9` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `blinds_tab9` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `trackspoles_tab9` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `heading_tab9` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `shutters_yesno_tab9` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `voiles_tab9` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricsupplier_tab9` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricdesign_tab9` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabriccolour_tab9` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromansupplier_tab9` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromandesign_tab9` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromancolour_tab9` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rolltype_tab9` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalsupplier_tab9` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticaldesign_tab9` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalcolour_tab9` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticaltype_tab9` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiansupplier_tab9` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiansdesign_tab9` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiancolour_tab9` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetian_slatwidth_tab9` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `notes_tab9` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `room_name_tab10` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `curtains_tab10` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `blinds_tab10` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `trackspoles_tab10` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `heading_tab10` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `shutters_yesno_tab10` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `voiles_tab10` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricsupplier_tab10` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricdesign_tab10` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabriccolour_tab10` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromandesign_tab10` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromancolour_tab10` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rolltype_tab10` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticaldesign_tab10` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalcolour_tab10` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiansupplier_tab10` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiancolour_tab10` VARCHAR( 255 ) NOT NULL 
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `notes_tab10` VARCHAR( 255 ) NOT NULL 
```

在 PhpMyAdmin 中使用此代码时会引发错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `curtains_tab1` VARCHAR( 2' at line 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:19:29.127

我认为你必须用**; 来结束你的陈述。** 示例：ALTER TABLE `rok5g_chronoforms_data_editcustomer`ADD `fabricdesign_tab9`VARCHAR(255) NOT NULL **；**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:17:04.760

您在每行末尾缺少一个半列 (;)：

```
ALTER TABLE `rok5g_chronoforms_data_editcustomer`
    ADD `room_name_tab1` VARCHAR( 255 ) NOT NULL ; -- here
-- And so on 
```

您还可以将所有查询重写为一个更具可读性的单个查询，并以逗号结尾每个列声明并在末尾添加一个半列，如下所示：

```
ALTER TABLE `rok5g_chronoforms_data_editcustomer`
    ADD `room_name_tab1` VARCHAR( 255 ) NOT NULL ,
    ADD `curtains_tab1` VARCHAR( 255 ) NOT NULL ,
    ADD `blinds_tab1` VARCHAR( 255 ) NOT NULL ,
    ADD `trackspoles_tab1` VARCHAR( 255 ) NOT NULL ,
    ADD `heading_tab1` VARCHAR( 255 ) NOT NULL ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T10:17:35.120

是

> rok5g_chronoforms_data_editcustomer

创建表？如果是，那么它应该可以工作。

# mysql - 如果列大于“int”，则出现多次

> ID：10348742
> 
> 赞同：1
> 
> 时间：2012-04-27T10:09:22.013
> 
> 标签：mysql

我有一个包含周数和 ID 的表

```
| id | week |
| 1  |  1   |
| 2  |  2   |
| 3  |  6   |
| 4  |  8   | 
```

我需要做的是根据周的值进行检索。但如果该行大于某个数字，我还需要多次返回该行。

例如（伪），

```
if week > 2
and week > 6

| id | week |
| 2  |  2   |
| 3  |  6   |
| 3  |  6   |
| 4  |  8   |
| 4  |  8   | 
```

ID 3 和 ID 4 出现两次，因为它们都大于 2 和 6。ID 2 只会出现一次，因为它只大于 2。

不幸的是，循环查询是*不可能*的，因为这个查询将返回 2k+ 行。

任何帮助将不胜感激，即使解决方案是基于 PHP 的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T10:15:24.527

![在此处输入图像描述](../Images/fe5fdf0f64d7e04d5738b30415d5bbcc.png)将查询拆分为多个查询，然后使用 . 合并结果`UNION`。

下面应该给你你想要的结果。

```
(SELECT * FROM yourTable WHERE week > 2)
UNION ALL
(SELECT * FROM yourTable WHERE week > 6) 
```

**编辑**包括 Lily 的提示-谢谢。

# php - 如何通过 PHP 中的 Imagick 将 PNG32 转换为 PNG8

> ID：10348743
> 
> 赞同：4
> 
> 时间：2012-04-27T10:09:24.383
> 
> 标签：php, png, imagick

我想通过 php Object Imagick 将 PNG32 转换为 PNG8。但我使用 setImageDepth 和 setImageFormat 将参数设置为 8bit，它没有生效。像这样的代码：

```
$im = new Imagick($image);
$im->cropImage($cutWidth,$cutHeight,$x,$y);
$im->thumbnailImage($maxWidth, $maxHeight); 
$im->setImageDepth(8);
$im->setImageFormat('PNG8');
$im->writeImage($filename); 
```

输入文件是PNG32，但上面的输出仍然是PNG8，还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-07T05:34:08.810

这似乎是一个已知问题，所以我做了一些研究。基本上， setImageDepth 是不够的。您需要量化图像。这是一个对我有用的测试脚本......

```
$im = new imagick('stupid.png'); //an image of mine
$im->setImageFormat('PNG8');
$colors = min(255, $im->getImageColors());
$im->quantizeImage($colors, Imagick::COLORSPACE_RGB, 0, false, false );
$im->setImageDepth(8 /* bits */);
$im->writeImage('stupid8.png'); 
```

出来很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-17T22:32:27.797

我知道这是一个已经回答的老问题，但是我发现了另一种更短的方法来做到这一点。`png8:outputfile.png`您可以通过在文件名前加上格式（例如）来强制写入格式。问题示例可以这样完成：

```
$im = new Imagick($image);
$im->cropImage($cutWidth,$cutHeight,$x,$y);
$im->thumbnailImage($maxWidth, $maxHeight); 
$im->writeImage("png8:$filename"); 
```

# c# - 如何使用套接字在 .NET 4.5 和 .NET 4.0 之间发送数据？

> ID：10348745
> 
> 赞同：2
> 
> 时间：2012-04-27T10:09:31.700
> 
> 标签：c#, .net, sockets, client-server, windows-runtime

问题是我的服务器是用旧框架编写的，所以我不能在那里使用 SocketStream，我使用 System.Net.Sockets.TcpClient 代替。客户端是在新框架中编写的，不支持 TcpClient 和整个 System.Net.Sockets。在新框架中，我们有 Windows.Networking.Sockets。确切的问题是：如何将数据从客户端发送到服务器？

以下是用户单击发送按钮时发生的情况：

```
var writer = new DataWriter(socket.OutputStream);
writer.WriteString(message);
var ret = await writer.StoreAsync();
writer.DetachStream();
LogMessage(string.Format("Sent (to {0}) {1}", socket.Information.RemoteHostName.DisplayName, message)); 
```

在服务器端：

```
srReceiver = new System.IO.StreamReader(tcpClient.GetStream());
strResponse = srReceiver.ReadLine(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:27:45.357

套接字只允许双向八位字节流。这与 API 无关：Win32 API 可以非常愉快地与 POSIX 套接字进行互操作（考虑在 Windows 上浏览由 Linux 上运行的 Apache 提供的内容）。

更多内容取决于客户端和服务器是否同意（消息编码等）。

IE。建立连接（使用不同的API），然后以通用格式发送数据，它将被接收。

# salesforce - 如何在 visualforce 中执行复杂的 IF 语句？

> ID：10348746
> 
> 赞同：1
> 
> 时间：2012-04-27T10:09:40.250
> 
> 标签：salesforce, visualforce

我对此完全陌生，这项任务已被视为重要的任务，而我以前从未做过这样的事情。我得到了一个大致包含以下内容的模板：

```
 <apex:column headervalue="Amount"><c2g:CODAFormatterController number="{!IF([some condition],[something],[something else])}"/></apex:column> 
```

我已经用条件/东西/其他东西替换了这些语句

有没有办法像在javascript中那样使用函数，所以像

number="getNumber(x);"

还是我必须以某种方式将一些 IF 语句链接在一起？有 IF...ELSE 吗？

我不知道 CODAFormatterController 是什么，因为它在 google 上返回了 0 个结果。

任何建议都会有所帮助，恐怕我已经陷入了困境！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T11:45:42.653

VForce 内联是功能性的，它们最终必须返回一个值，无论是简单的值还是一段服务器端代码的调用点。它们不支持命令式编码，并且正在服务器端解决（早在 JS 发挥作用之前）。在这方面，`IF(condition,valuetrue,valuefalse)`等效于 IF..THEN..ELSE..ENDIF

如果没有类型不匹配，您当然可以自由链接任意数量的函数，这意味着您的 valuetrue 本身可能是一个函数，包括作为一个 IF 函数本身。

通常，当人们遇到这类问题时，总会有一种解决方法，方法是使用稍微不同的方法。这完全取决于您在这里尝试做什么...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-22T12:22:10.903

我自己在visualforce页面上做一些工作时偶然发现了这个问题。无论如何，如果其他人看到这个问题，他们应该知道没有必要使用复杂的嵌套`IF`语句，现在`CASE`Salesforce 中有一个可用的功能。

文档 - [https://developer.salesforce.com/docs/atlas.en-us.198.0.pages.meta/pages/pages_variables_functions.htm](https://developer.salesforce.com/docs/atlas.en-us.198.0.pages.meta/pages/pages_variables_functions.htm)

```
{!CASE(Opportunity.StageName,
            "Prospecting", "1",
            "Needs Analysis", "2",
            "Proposal/Price Quote", "3",
            "default val")} <!-- the last one returns if none of the previous results matched --> 
```

# neural-network - PyBrain 如何解释 net.activate 的结果？

> ID：10348749
> 
> 赞同：4
> 
> 时间：2012-04-27T10:09:49.707
> 
> 标签：neural-network, pybrain, feed-forward

我已经在 PyBrain 上训练了一个用于分类的网络，并准备好使用特定的输入来启动。但是，当我这样做时

```
 classes = ['apple', 'orange', 'peach', 'banana']

data = ClassificationDataSet(len(input), 1, nb_classes=len(classes), class_labels=classes)

data._convertToOneOfMany( )                 # recommended by PyBrain

fnn = buildNetwork( data.indim, 5, data.outdim, outclass=SoftmaxLayer ) 

trainer = BackpropTrainer( fnn, dataset=data, momentum=m, verbose=True, weightdecay=wd)

trainer.trainUntilConvergence(maxEpochs=80)

# stop training and start using my trained network here

output = fnn.activate(input) 

```

正如预期的那样，我得到了“输出”的数值，但是有没有办法直接确定预测的类标签？即使没有，我如何将“输出”的值映射到我的类标签？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T23:35:22.483

当您说获得“输出”的数值时，您的意思是标量（即，不是数组）吗？根据我对它的理解，你应该得到一个包含四个值的数组（即尽可能多的输出类）。该数组中的最大值对应于类的索引。我不知道 PyBrain 是否提供了一个实用函数来提取它，但你可以这样做：

```
class_index = max(xrange(len(output)), key=output.__getitem__)
class_name = classes[class_index] 
```

顺便说一句，您省略了在数据集中实际填充数据的步骤。

# c - 强制学生在函数的空白区域内填充代码

> ID：10348751
> 
> 赞同：2
> 
> 时间：2012-04-27T10:09:55.500
> 
> 标签：c

我正在使用基于 Web 的应用程序对学生提交的 C 程序进行评分。对于一些问题，我希望学生在函数中填写代码。以下是学生将看到的示例屏幕。

```
go() {
---------------------------------
|                               |
|                               |
|                               |
---------------------------------
}

main() {
  go() 
} 
```

学生应该在一个盒子里填写一些代码。但是，我不希望学生创建这样的新函数：

```
go() {
---------------------------------
|  go_help();                   |
| }                             |
| go_help() { printf("hi"); }   |
---------------------------------
}

main() {
  go() 
} 
```

如何防止学生创建新功能？代码模板连同学生填写的代码一起发送到等待服务器编译运行的队列中。我无法更改或检查该队列中的代码。我唯一能做的就是更改代码模板。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T11:00:07.743

你能在你的模板中放入不会在网页中显示的代码吗？

如果用户看到这个：

```
void go() {
---------------------------------
|                               |
|                               |
|                               |
---------------------------------
}

int main() {
  go(); 
} 
```

但是他们的代码实际上被替换为：

```
void go() {
    int some_name_the_user_will_never_guess_123axpk = 1;
---------------------------------
|                               |
|                               |
|                               |
---------------------------------
    (void) some_name_the_user_will_never_guess_123axpk;
}

int main() {
  go();
} 
```

`go`然后在用户关闭函数并打开另一个函数的情况下它不会编译。不过，请确保它没有使用嵌套函数的 GNU 扩展进行编译，或者用户可以定义其中之一。

您还必须向用户隐藏编译器错误消息，因为它将包含秘密名称。

[编辑：总而言之，如果您使用除`g`模板开头之外的每个可能的 1 字符名称定义函数，然后调用用户编写的函数`g`而不是`go`，您可以静态断言`sizeof(__func__) == 2`. 这意味着您不能使用不同的函数，因为用户无法通过 1 个字符的名称调用它。]

[另一个编辑：老鼠，这不起作用，因为用户可以用`#define sizeof(X) (X, 2)`, 或`#define __func__ "g"`或类似的东西结束他们的代码。这不是合法的 C，但实际上它允许用户在几乎任何编译器上作弊。预处理器往往不会检查您使用的标记是否是未保留的名称。也许如果你做静态断言，并且做一堆检查你在那个断言中使用的标记都没有被定义为宏。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T10:21:18.327

当学生创建一个新函数时，您将在填充区域内有不平衡的花括号：（至少）一个额外的关闭一个（关闭当前函数体）和（至少）一个额外的打开一个（启动新功能体）。要确定是否是这种情况，您需要检查花括号是否在填充区域内平衡，您只能通过解析提交的文本来做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T12:00:38.583

我认为在编译时捕捉到这一点将非常困难（如果不是不可能的话）。但是，我愿意解决运行时错误，以下可能有效（在 GCC 上测试）：

```
void go() {
---------------------------------
|                               |
|                               |
|                               |
---------------------------------
    //make sure nobody redefines __func__ ...
    #undef __func__
    //... and __builtin_strcmp
    #undef __builtin_strcmp
    //check if we're still inside go()
    assert(__builtin_strcmp(__func__, "go") == 0);
}

int main() {
    go(); 
} 
```

# css - 具有固定顶部位置的浮动 div

> ID：10348752
> 
> 赞同：2
> 
> 时间：2012-04-27T10:09:56.120
> 
> 标签：css, css-float

我有一个 HTML“工具栏”，其中包含许多水平排列的小部件。`div`每个项目在源文档中由 a 表示：

```
<div id="widget1" />
<div id="widget2" />
<div id="widget3" /> 
```

我使用`float: left`. 问题是我还希望将它们固定在工具栏的顶部，以便在用户减小窗口宽度时它们不会环绕。相反，我只希望它们水平溢出（隐藏溢出），以便其行为类似于真正的工具栏。

换句话说，我想要类似`position: fixed`但仅适用于垂直坐标的东西。在水平方向上，它们应该一个接一个地连续放置。有没有办法用 CSS 做到这一点？

**更新**这是我正在使用的真实 HTML。`divs`带有的s`class="row"`应该在工具栏中显示为小部件，水平排列在单行中。

```
<div class="row" id="titleRow">
  <span class="item"> <img src="../images/logo.png" height="26" /> </span>
  <span class="item" id="title">Title</span>
  <span class="item" id="close" onclick="window.close();"> close </span>
</div>

<div class="row" id="menuRow">
  <span class="item"> <ul id="menu"></ul> </span>
</div>

<div class="row" id="searchRow">
</div>

<div class="row" id="pageRow">
  <span class="item" id="page-related-data"> Page-related data: </span>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:40:47.173

而不是`float: left;`尝试`display: inline-block; vertical-align: top;`。然后在父元素上设置`white-space: nowrap;`和。有关示例，`overflow: hidden;`请参见[http://jsfiddle.net/rt9sS/1/ 。](http://jsfiddle.net/rt9sS/1/)

注意`inline-block`有一些问题。它可以识别空白（因此 HTML 中元素周围的空白将在文档中可见）。它在 IE6/7 中的支持也有限，尽管您可以通过提供元素布局来解决这个问题，例如`.oldie .widget { display:inline; zoom:1; }`. 有关更多信息，请参见[http://www.quirksmode.org/css/display.html#inlineblock](http://www.quirksmode.org/css/display.html#inlineblock)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-10T19:30:44.073

我知道这是一个老问题，想为遇到它的人添加一个简单的 jquery 答案。

```
$(window).scroll(function(){
$("#keep-in-place").css("top",$(document).scrollTop()+"px");
}); 
```

要在页面上设置更高或更低，只需添加到 $(document).scrollTop()

为我工作

# ruby-on-rails - Ruby on Rails - N 到 N 关系，奇怪的值

> ID：10348755
> 
> 赞同：1
> 
> 时间：2012-04-27T10:10:11.680
> 
> 标签：ruby-on-rails, relationship, has-and-belongs-to-many

我正在使用 rails 3.2.3 并在我的应用程序中获取奇怪的值。

我有 2 个模型，一个用户和角色，它们是 has_and_belongs_to_many 关系。中间表是使用 role_id 和 user_id 列以及正确的名称 (roles_users) 创建的。

问题是，当我将用户分配给一个角色（通过复选框创建时）然后查看所有具有与其相关联的角色的用户时，我得到无效的角色 ID（如 75216410，当它应该只是 1 或 2 时）和角色名称只是“角色”而不是管理员。

我想使用 Devise 和 CanCan，我已经设置了 Devise，但是这件事让我无法继续。

我的角色和用户控制器具有传统的 restfull 操作，与我们在脚手架时获得的完全相同。而且由于数据库值是正确的，我相信这不是问题。

我的模型是：

用户.rb

```
class User < ActiveRecord::Base
  # Devise modules
  # :token_authenticatable, :encryptable, :confirmable, :lockable, :timeoutable and :omniauthable, :registerable
  devise :database_authenticatable, :recoverable, :rememberable, :trackable, :validatable

  #relationships
  has_and_belongs_to_many :roles

  #nested attr
  accepts_nested_attributes_for :roles

  # Accessible (or protected) attr
  attr_accessible :username, :email, :password, :password_confirmation, :remember_me, :role_ids

  # attr_accessible :title, :body

  #validations
  validates :username, :presence => true
  validates :username, :email, :uniqueness => true

end 
```

角色.rb

```
class Role < ActiveRecord::Base
  has_and_belongs_to_many :users
  attr_accessible :name, :user_attributes, :role_id

end 
```

我的用户和角色视图与您通过脚手架获得的视图相同。我的用户索引：

```
 <% @users.each do |user| %>
    <tr>
      <td><%= user.username %></td>
      <td><%= user.email %></td>
      <td><%= user.roles.id %></td>    #should display "1"
      <td><%= user.roles.name %></td>  #should display "admin"
      <td><%= link_to 'Show', user %></td>
      <td><%= link_to 'Edit', edit_user_path(user) %></td>
      <td><%= link_to 'Destroy', user, :confirm => 'Are you sure?', :method => :delete %></td>
    </tr>
  <% end %> 
```

问题是，这会显示一些随机数，例如 69067380，而不是角色 id (1)。如果我刷新，这个数字会变成另一个随机数。至于角色名称，它总是说“角色”而不是“管理员”。这让我想起了一个指针内存地址，但我怀疑是这样。

注意：当我使用 MySQL 工作台检查表时，一切都很好，表中的所有值都是正确的。

任何帮助表示赞赏，在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:15:40.907

你的用户有很多角色，所以当你触发`user.roles`它时，它会给出一个**数组**而不是单条记录`user.roles.first`，或者`user.roles.first.try(:name)`它显示第一个角色。你可以迭代角色并根据你的要求显示它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T10:18:57.867

`user.roles.id`是关系本身的 id 。`user.roles.fist.id`您应该通过使用或其他方式选择其中一个角色。一个用户可以有多个角色，您可能希望将它们全部打印出来，并带有一个循环。

# android - 如何在android中使用webview显示的html文件中拖动图像？

> ID：10348757
> 
> 赞同：1
> 
> 时间：2012-04-27T10:10:15.930
> 
> 标签：android, html, image, drag-and-drop, android-webview

我有一个加载了 html 文件（实际上存储在 sdcard 下的某个文件夹中）的 Android WebView，该文件有一个/两个/三个图像。是否可以拖放这些图像中的任何一张？如果可能的话，以下是我的疑问

1.  当我从 (x1,y1) 位置拖动图像并将其放到另一个 (x2,y2) 位置时，如何在图像位置更改时更改原始源文件代码？
2.  当我下次打开相同的 html 文件时（使用默认的 html 查看器或我的应用程序），我应该在 (x2, y2) 位置看到图像。不可能吗？
3.  我在 WebView 中尝试了这个[拖动 ImageView](https://stackoverflow.com/questions/5620893/drag-imageview-inside-a-webview)。但它只是在 webview 中添加一个 imageview。（因此，当我下次运行相同的应用程序时，我在第一次运行时将其放置的位置看不到图像。）但是我需要拖动源 html 文件中显示的图像。所以每次拖放后，我是否需要渲染 webview 内容并创建一个新的 html 文件才能在放置位置查看图像？
4.  是否可以阅读 android-webview 内容？（就像我们在java中阅读网页内容一样）。

如果我想/想错了，任何人都可以清除我的疑虑并建议我更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:33:36.797

我认为不可能（不使用一些不重要的技巧）按照您的意愿实现拖放。对于你提出的另一点 - 如果文件在你的 sd 上 - 为什么不只解析 html 文件并获取图片位置和源链接并使用它来实现自己的拖放？毕竟 - html 文件是一个 xml 文件，其中包含定义位置/链接/图像/文本的属性

# python - 在 Windows 上安装 python + mechanize + lxml

> ID：10348770
> 
> 赞同：3
> 
> 时间：2012-04-27T10:10:59.937
> 
> 标签：python, mechanize, lxml

在 Windows 上安装 python 2 plus lxml plus mechanize 的最简单方法是什么？我正在寻找一种易于遵循的解决方案，并且将来也可以轻松安装其他库（eggs？）。

**编辑** 我希望能够安装需要编译器的库。Ruby for windows 有一个开发工具包，可让您轻松安装需要编译器的 gem。我正在为 Python 寻找类似的设置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T02:23:28.590

对于这些组件的最简单安装，我建议在整个过程中使用 32 位安装程序，因此此处的所有链接都指向 32 位版本。首先，下载并安装[Python 2.7.3](http://www.python.org/ftp/python/2.7.3/python-2.7.3.msi)。

然后您将要安装[setuptools](http://pypi.python.org/packages/2.7/s/setuptools/setuptools-0.6c11.win32-py2.7.exe#md5=57e1e64f6b7c7f1d2eddfc9746bbaf20) Setuptools 将使其安装，因此您可以在命令提示符下键入“easy_install”并添加其他软件包。它将为机械化派上用场。

现在您可以下载并安装[适用于 Python 2.7 的 lxml](http://pypi.python.org/packages/2.7/l/lxml/lxml-2.2.8.win32-py2.7.exe#md5=deb95d53dbd3734ecfb4f69850758427)。

到目前为止，它们都是 MSI 安装程序，但要获得机械化，我们必须转到命令提示符。为此，请打开开始菜单，键入 cmd，然后在命令提示符中输入`easy_install mechanize`. 如果键入 easy_install 不起作用，请确保设置您的 PATH（请参阅[此处](https://stackoverflow.com/questions/6318156/adding-python-path-on-windows-7)的答案）

就是这样！对于任何未来的库，easy_install nameoflibraryhere 都可以解决问题。

所以 tldr 版本：

下载并安装 Python 2.7.3： http: [//www.python.org/ftp/python/2.7.3/python-2.7.3.msi](http://www.python.org/ftp/python/2.7.3/python-2.7.3.msi)

下载并安装 setuptools：[http ://pypi.python.org/packages/2.7/s/setuptools/setuptools-0.6c11.win32-py2.7.exe#md5=57e1e64f6b7c7f1d2eddfc9746bbaf20](http://pypi.python.org/packages/2.7/s/setuptools/setuptools-0.6c11.win32-py2.7.exe#md5=57e1e64f6b7c7f1d2eddfc9746bbaf20)

Download and install lxml for Python 2.7: [http://pypi.python.org/packages/2.7/l/lxml/lxml-2.2.8.win32-py2.7.exe#md5=deb95d53dbd3734ecfb4f69850758427](http://pypi.python.org/packages/2.7/l/lxml/lxml-2.2.8.win32-py2.7.exe#md5=deb95d53dbd3734ecfb4f69850758427)

In command prompt, type `easy_install mechanize`

I hope that helps you make the process of installing those on Windows smooth.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T10:40:11.583

我会说，首先获取[PIP](http://pypi.python.org/pypi/pip/1.1) ，然后使用`pip install lxml`lxml 安装。通常你现在会`mechanize`像这样安装：`pip install mechanize`，但问题是，没有 Python 3 的机械化端口，所以如果你需要/想要`mechanize`你必须使用 Python 2。但也许这些`lxml.html`功能对你来说已经足够了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T09:51:51.350

访问[http://www.lfd.uci.edu/~gohlke/pythonlibs/](http://www.lfd.uci.edu/~gohlke/pythonlibs/)在那里你可以找到所有可用的 python 包的 Windows 二进制文件 (.exe) :)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T12:06:03.753

您可以尝试安装 ActiveState Python（下载 32 位版本），然后使用 pypm 命令行工具安装 lxml 并使用以下命令进行机械化：

```
pypm install lxml
pypm install mechanize 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T22:41:56.363

Python 不提供任何包含我知道的编译器的包，但是，如果您安装 Visual Studio 之类的东西，easy_install 或 pip 都会识别它。我建议使用 Visual Studio 2008 express c++ 版本（我相信它是免费的）。

一旦你做了一个`easy_install --always-unzip [package]`（我会建议通过点子）。Easy_install 然后会自动下载适当的库并尝试编译您的代码。

问题是 lxml 取决于（至少）libxml2 和 libxslt，您必须在运行 easy_install 之前构建它们。要构建它们，您可以尝试以下方法：[https](https://mail.gnome.org/archives/xml/2010-February/msg00026.html) ://mail.gnome.org/archives/xml/2010-February/msg00026.html 。

我记得 mechanize 由于一些奇怪的依赖关系，编译起来很痛苦，但总的来说，如果你遵循 easy_install [foo]，查看错误，修复错误方法，你会到达那里。

祝你好运！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-07T01:29:07.193

我对提供的任何解决方案都不满意。希望有人会带来更好的解决方案，但现在可以肯定地说，在 Windows 上安装 python + mechanize + lxml + 任意其他库没有简单的解决方案。

# jquery - 将一些数字添加到变量并打印

> ID：10348773
> 
> 赞同：0
> 
> 时间：2012-04-27T10:11:12.553
> 
> 标签：jquery

你能帮我吗，我已经到处搜索了，我似乎找不到一个简单的方法来做到这一点。

例如，此代码每次执行时都会添加“+1”：

```
$('#LoadProgressMessage').html('<h6>'+ ++PercentLoaded + '% Loaded</h6>'); 
```

但是如果我想添加额外的 2、3 或 4 怎么办？

谢谢！:))

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T10:13:03.307

我建议：

```
var num = 2; // used a var in case it's used in more than one place.
$('#LoadProgressMessage').html('<h6>'+ (num + PercentLoaded) + '% Loaded</h6>'); 
```

# sql - 在sql中创建一个伪链表

> ID：10348778
> 
> 赞同：3
> 
> 时间：2012-04-27T10:11:28.993
> 
> 标签：sql, postgresql, aggregate-functions

我有一个包含以下列的表

```
table: route
columns: id, location, order_id 
```

它具有诸如

```
id, location, order_id
1, London, 12
2, Amsterdam, 102
3, Berlin, 90
5, Paris, 19 
```

是否可以在 postgres 中执行一个 sql select 语句，该语句将返回每一行以及具有下一个最高 order_id 的 id？所以我想要类似...

```
id, location, order_id, next_id
1, London, 12, 5
2, Amsterdam, 102, NULL
3, Berlin, 90, 2
5, Paris, 19, 3 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T10:31:52.023

```
select 
  id, 
  location, 
  order_id,
  lag(id) over (order by order_id desc) as next_id
from your_table 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T10:32:32.813

首先创建测试平台：

```
CREATE TABLE route (id int4, location varchar(20), order_id int4);
INSERT INTO route VALUES
    (1,'London',12),(2,'Amsterdam',102),
    (3,'Berlin',90),(5,'Paris',19); 
```

查询：

```
WITH ranked AS (
    SELECT id,location,order_id,rank() OVER (ORDER BY order_id)
      FROM route)
SELECT b.id, b.location, b.order_id, n.id
  FROM ranked b
  LEFT JOIN ranked n ON b.rank+1=n.rank
  ORDER BY b.id; 
```

[您可以在文档](http://www.postgresql.org/docs/current/interactive/tutorial-window.html)中阅读有关窗口函数的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T10:34:47.593

是的：

```
select * ,
(select top 1 id from routes_table where order_id > main.order_id order by 1 desc)
from routes_table main 
```

# javascript - jQuery Cycle 应用于 div 以循环滚动其内容

> ID：10348780
> 
> 赞同：1
> 
> 时间：2012-04-27T10:11:45.413
> 
> 标签：javascript, jquery, html, scroll

我有这样的元素

```
<div id="screen">
  <div class="post">Post1......etc</div>
  <div class="post">Post2......etc</div>
  <div class="post">Post3......etc</div>
  <div class="post">Post4......etc</div>
  <div class="post">Post5......etc</div>
  <div class="post">Post6......etc</div>
  <div class="post">Post7......etc</div>
  <div class="post">Post8......etc</div>
  <div class="post">Post9......etc</div>
  <div class="post">Post10.....etc</div>
</div> 
```

但在屏幕框中，大小仅限于显示 5 个元素。所以首先会显示 Post1 到 Post5。休息被溢出隐藏。每隔 2 秒，下一个元素应通过向上滚动显示。即 2 秒后，此内容`screen`将向上滚动 1 个项目。现在它将显示 Post2 到 Post6。这会像循环一样每 2 秒持续一次。在 Post10 之后，应该出现 Post1，然后是 Post2，依此类推。

我不知道该怎么做。我阅读了 jQuery 循环的文档：http: [//jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/)

但我不知道如何做到这一点。这种效果就像一个新闻滚动条。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:27:39.057

Cycle 是错误的插件，因为它一次只显示一张图像，它不做你想要的滑动效果。试试 jCarousel，它非常流行且易于使用（许多示例和良好的文档）

[http://sorgalla.com/projects/jcarousel/](http://sorgalla.com/projects/jcarousel/)

一般来说，如果没有与您想要实现的目标相近的演示，则该插件很可能无法按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:48:13.133

jCarousel 是一个用于显示代码的漂亮插件！但是您需要进行一些蒙皮才能根据您的要求显示它。

要使用 jCarousel 让您的滚动条运行，您必须对当前的 HTML 结构进行一些修改。

我已将 DIV 类型结构替换为无序列表。

```
<ul id="mycarousel" class="jcarousel jcarousel-skin-tango">
    <li>Post1......etc</li>
    <li>Post2......etc</li>
    <li>Post3......etc</li>
    <li>Post4......etc</li>
    <li>Post5......etc</li>
    <li>Post6......etc</li>
    <li>Post7......etc</li>
    <li>Post8......etc</li>
    <li>Post9......etc</li>
</ul> 
```

要以最基本的方式运行此插件，您需要将 jCarousel 脚本和 CSS 主题添加到您的页面（我使用了 jCarousel 的*Tango*主题）。

以下是使用插件的方法：

```
$(document).ready(function(){
    $('#mycarousel').jcarousel({
        vertical: true,    //Display a vertical carousel
        auto: 2,    //Scroll up automatically after every 2 seconds
        scroll: 1,    //No. of items to scroll up
        visible: 5,    //No. of visible items
        wrap: 'last'    //Go back to the 1st items after you've scrolled down to the last item
    });
}); 
```

您将需要修改插件的 CSS 以根据您的需要显示它。

这是我使用 jCarousel 创建的小提琴：http: [//jsfiddle.net/kayen/VFdL8/](http://jsfiddle.net/kayen/VFdL8/)

# google-chrome - 如何让 Chrome 根据输入文本中的模式自动选择搜索引擎？

> ID：10348785
> 
> 赞同：0
> 
> 时间：2012-04-27T10:12:02.737
> 
> 标签：google-chrome, google-chrome-extension

用例：用户键入如下内容：

*   `AA1234↵</kbd> - i want the browser to directly go to [http://example.com/search/%s](http://example.com/search/%s)`
*   `ZZ666↵</kbd> - i want the browser to directly go to [http://acme.com/search/%s](http://acme.com/search/%s)`
*   回退不正常搜索不匹配的模式

我确信这不能只是配置，因此可能需要编写扩展名（如果可能）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T22:04:00.960

您能做的最好的事情就是使用[Omnibox API](https://code.google.com/chrome/extensions/omnibox.html)。您必须定义一个关键字 ( ) `xyz`，当用户输入`xyz`++时，您的扩展程序将获得并可以决定打开哪个页面。`tab``search query``search query`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T16:07:18.950

来自这个例子：[omnibox-multipe-keyword](https://stackoverflow.com/questions/5354426/omnibox-multipe-keyword)

清单.json：

```
{
  "background": {
    "scripts": ["background.js"]
  },
  "description": "Parse XXX-000 pattern from entered url for google search and redirect to Jira",
  "name": "Jira Search",
  "permissions": [ "tabs" ],
  "version": "1",
  "minimum_chrome_version": "9",

  "manifest_version": 2
} 
```

背景.js：

```
function navigate(url) {
  chrome.tabs.getSelected(null, function(tab) {
    chrome.tabs.update(tab.id, {url: url});
  });
}

chrome.tabs.onUpdated.addListener(function(tabId, changeInfo, tab) {
    if(changeInfo.status == "loading") {
        if(/google\.com.+search\?q.\w+\-\d+/.test(tab.url)) {
            var ticket =  /\w+\-\d+/.exec(tab.url)
            navigate("http://jira..../QuickSearch.jspa?searchString="
                + ticket[0]);
        }
    }
}); 
```

这个简单的检查 \w+-\d+/ 谷歌搜索中的正则表达式，如果找到 - 重定向到 jira 搜索......

# c# - 在 WPF 中将 XML 文档转换为表

> ID：10348787
> 
> 赞同：1
> 
> 时间：2012-04-27T10:12:08.983
> 
> 标签：c#, wpf, xml

是否可以将 XML 文档转换为表格以动态显示。由于我的程序在执行期间生成 XML，我需要以表格的形式显示 xml 文档的内容。到目前为止，我正在使用 xmlreader 解析文档并将它们静态放入数据网格中。有没有更好的方法来做到这一点。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:07:44.390

数据集对象有一个“ReadXml(string filename)”方法。

示例 XML products.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<Products>
  <Product id="1">
    <Name>Product Name</Name>
  </Product>
  <Prodcut id="2">
    <Name>Another Product</Name>
  </Product>
</Products> 
```

C# 片段：

```
DataSet myXmlDataSet = new DataSet();
myXmlDataSet.ReadXml("products.xml");
DataTable productTable = myXmlDataSet("Product"); 
```

虽然这可行，但我通常更喜欢将我的 xml 放入 POCO 并使用业务对象的集合填充 UI 网格。如果数据源发生变化（您将其移至 SQL 或其他数据源），您只需替换该数据访问组件即可。System.Xml.Linq 中的 XDocument 非常方便地执行此操作。

```
var xmlDoc = XDocument.Load("products.xml");
var productNodes = xmlDoc.Root.Elements("Product");
var prodList = productNodes.Select(prod => new Product()
    {
      id = int.Parse(prod.Attribute("id").Value),
      Name = drug.Element("Name")
     })
   .ToList(); 
```

# map - 如何从 GeoJSON 文件中获取边界框值？

> ID：10348798
> 
> 赞同：1
> 
> 时间：2012-04-27T10:13:48.910
> 
> 标签：map, openlayers, geo, openstreetmap, geojson

我有 GeoJSON 文件。但问题是，我不知道这个文件的投影。现在，我想覆盖在我的底图（OSM）上。我该怎么做？此 GeoJSON 文件包含斯德哥尔摩地区周围的特征。如何为此设置边界框？我尝试了几个来自托管站点的 openlayers 示例。但是，那些对我不起作用。我从（http://dev.openlayers.org/releases/OpenLayers-2.11/examples/all-overlays.html）得到了一个与我想要的非常相似的例子。我检查了他使用边界框的源代码。但问题是，如果我删除边界框，这个例子就不起作用（我与给定的数据绑定了这个）。我不知道，我的 json 文件有什么问题吗？贝娄，我给出了一些样本数据。格式正常吗？正如我所说，我尝试了不同的方式。有时我从脚本中读取 json 文件就好了。但，它无法显示特色叠加地图。贝娄，我给出了示例代码，显示了我是如何尝试的。

```
{
"type": "FeatureCollection",
"features": [
{ "type": "Feature", "properties": { "FNODE_": 387603, "TNODE_": 387603, "LPOLY_": 0, "RPOLY_": 0, "LENGTH": 89.206900, "ROADS_SWER": 519006, "ROADS_SW_1": 519006, "REF": "", "TYPE": "residential", "ONEWAY": 8224, "BRIDGE": 8224, "MAXSPEED": 0, "LENGTH_M": 89.500000, "ID": 0, "dist_fnode": 13655.200000, "dist_tnode": 13655.200000 }, "geometry": { "type": "LineString", "coordinates": [ [ 676868.875000, 6569872.000000 ], [ 676882.437500, 6569861.000000 ], [ 676894.062500, 6569851.500000 ], [ 676894.500000, 6569844.500000 ], [ 676891.812500, 6569840.500000 ], [ 676887.312500, 6569841.000000 ], [ 676882.187500, 6569843.000000 ], [ 676875.250000, 6569850.000000 ], [ 676868.125000, 6569858.500000 ], [ 676866.500000, 6569867.000000 ], [ 676868.875000, 6569872.000000 ] ] } }
,

{ "type": "Feature", "properties": { "FNODE_": 387723, "TNODE_": 387724, "LPOLY_": 0, "RPOLY_": 0, "LENGTH": 9.581310, "ROADS_SWER": 519163, "ROADS_SW_1": 519163, "REF": "", "TYPE": "service", "ONEWAY": 8224, "BRIDGE": 8224, "MAXSPEED": 0, "LENGTH_M": 9.500000, "ID": 1, "dist_fnode": 13705.100000, "dist_tnode": 13695.600000 }, "geometry": { "type": "LineString", "coordinates": [ [ 677125.375000, 6569906.500000 ], [ 677133.437500, 6569911.500000 ] ] } }
, 
..
..
]
} 
```

代码示例----

```
//OSM Layer-----------------------------------------------
var layer = new OpenLayers.Layer.OSM( "Simple OSM Map");

//GeoJSON Layer-------------------------------------------
var vector_format = new OpenLayers.Format.GeoJSON({}); 
var vector_protocol = new OpenLayers.Protocol.HTTP({
    url: 'ml/roads.json',
    format: vector_format
});
var vector_strategies = [new OpenLayers.Strategy.Fixed()];
var vector_layer = new OpenLayers.Layer.Vector('More Advanced Vector Layer',{
    protocol: vector_protocol,
    strategies: vector_strategies,
    isBaseLayer: false
});

var options = {
    layers: [layer, vector_layer]
};
var map = new OpenLayers.Map("map", options);
//Projection-----------------------------------------------
map.setCenter(
    new OpenLayers.LonLat(18.068611, 59.329444).transform(
        new OpenLayers.Projection("EPSG:4326"),
            map.getProjectionObject()
    ), 10
); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:54:18.300

```
vector_layer.events.on({
    loadend: function() {
        map.zoomToExtent(vector_layer.getDataExtent());
    }
}); 
```

我仍然认为您应该在地图构造函数中设置投影...</p>

# qt - 使用绝对文件路径中的分层结构填充 QTreeWidget

> ID：10348801
> 
> 赞同：5
> 
> 时间：2012-04-27T10:13:55.767
> 
> 标签：qt, recursion, qtreewidget

我有一个文件，其中列出了绝对文件路径，每行 1 个。列出的文件是按顺序排列的，因此例如`/Documents/`目录中的所有文件将在文件中依次列出。

我想做的是把所有这些文件放在`QTreeWidget`一个很好的层次结构中，就像一个普通的文件系统一样。我将如何从我拥有的绝对路径文件中做到这一点？

这是我在这方面的编码所取得的进展：

```
QFile file(FILENAME_ENCRYPTED);
QString line;
QDir dir;

QTreeWidgetItem *item;
if (file.open(QIODevice::ReadOnly)) {
    QTextStream stream( &file );
    do {
        line = stream.readLine();
        if (!line.isNull()) {
            dir = QDir(line);
            item = new QTreeWidgetItem();
            item->setText(0, dir.dirName());
            this->ui->treeWidget->addTopLevelItem(item);
        }
    } while (!line.isNull());
}
file.close(); 
```

这工作正常，但它只列出彼此之后的所有文件名。我想我必须做一些递归函数，但递归不是我最好的朋友，我更喜欢迭代！有人可以推动我朝着正确的方向前进吗？:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-27T14:03:27.767

不需要递归。您可以使用`QString::split()`基于分隔符（即“/”）将文件路径拆分为 QStringList 中的单独 QString，然后遍历每个 QString 以确定文件结构。

编辑：这是一个例子：

```
#include <QtGui>

const QString s1 = "Docs/Testing/textFile1.txt";
const QString s2 = "Docs/Testing/textFile2.txt";
const QString s3 = "Docs/Testing/textFile3.txt";
const QString s4 = "Docs/Testing/AnotherFolder/textFile4.txt";
const QString s5 = "ThisIsGonnaBeCrazy/WholeNewFolder/AndAnother/file.pdf";
const QString s6 = "ThisIsGonnaBeCrazy/file.doc";

class MainWindow : public QMainWindow
{
public:
    MainWindow()
    {
        QTreeWidget *treeWidget = new QTreeWidget;

        QStringList fileNames;
        fileNames << s1 << s2 << s3 << s4 << s5 << s6;

        QTreeWidgetItem *topLevelItem = NULL;
        foreach (const QString &fileName, fileNames)
        {
            QStringList splitFileName = fileName.split("/");

            // add root folder as top level item if treeWidget doesn't already have it
            if (treeWidget->findItems(splitFileName[0], Qt::MatchFixedString).isEmpty())
            {
                topLevelItem = new QTreeWidgetItem;
                topLevelItem->setText(0, splitFileName[0]);
                treeWidget->addTopLevelItem(topLevelItem);
            }

            QTreeWidgetItem *parentItem = topLevelItem;

            // iterate through non-root directories (file name comes after)
            for (int i = 1; i < splitFileName.size() - 1; ++i)
            {
                // iterate through children of parentItem to see if this directory exists
                bool thisDirectoryExists = false;
                for (int j = 0; j < parentItem->childCount(); ++j)
                {
                    if (splitFileName[i] == parentItem->child(j)->text(0))
                    {
                        thisDirectoryExists = true;
                        parentItem = parentItem->child(j);
                        break;
                    }
                }

                if (!thisDirectoryExists)
                {
                    parentItem = new QTreeWidgetItem(parentItem);
                    parentItem->setText(0, splitFileName[i]);
                }
            }

            QTreeWidgetItem *childItem = new QTreeWidgetItem(parentItem);
            childItem->setText(0, splitFileName.last());
        }

        setCentralWidget(treeWidget);
    }
};

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    MainWindow w;
    w.show();
    return a.exec();
} 
```

请注意，您可以根据`QTreeWidgetItem::setData()`需要为每个文件设置文件名。不过，我的示例并没有这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-06T04:40:12.187

这对我有用：

```
QStringList tokens = path.split ( '/' );

QTreeWidgetItem* treeWidgetItem = NULL;

for ( int32_t j = 0 ; j < packageTreeWidget->topLevelItemCount(); ++j )
{
    if ( packageTreeWidget->topLevelItem ( j )->text ( 0 ) == tokens.at ( 0 ) )
    {
        treeWidgetItem = packageTreeWidget->topLevelItem ( j );
        break;
    }
}

if ( treeWidgetItem == NULL )
{
    treeWidgetItem = new QTreeWidgetItem;
    treeWidgetItem->setText ( 0, tokens.at ( 0 ) );
    packageTreeWidget->addTopLevelItem ( treeWidgetItem );
}

for ( int32_t j = 1; j < tokens.size(); ++j )
{
    int32_t k;
    for ( k = 0 ; k < treeWidgetItem->childCount(); ++k )
    {
        if ( treeWidgetItem->child ( k )->text ( 0 ) == tokens.at ( j ) )
        {
            treeWidgetItem = treeWidgetItem->child ( k );
            break;
        }
    }
    if ( k == treeWidgetItem->childCount() )
    {
        QTreeWidgetItem* newTreeWidgetItem = new QTreeWidgetItem;
        newTreeWidgetItem->setText ( 0, tokens.at ( j ) );
        treeWidgetItem->addChild ( newTreeWidgetItem );
        treeWidgetItem = newTreeWidgetItem;
    }
} 
```

循环中缺少索引“i”，因为它是我用来迭代文件路径的索引，将“packageTreeWidget”替换为 Tree Widget 的名称，我正在使用它来显示类似 zip 的包文件的内容。

# css - Firefox 错误地显示背景图像，其中 div 的高度设置为较大的数字

> ID：10348805
> 
> 赞同：0
> 
> 时间：2012-04-27T10:14:08.237
> 
> 标签：css, firefox, background

我发现在高度设置为很大并且设置了背景图像的 div 上，Firefox 无法正确显示它。它只显示部分背景，而不是 100%。我在 Windows 7 上使用 Firefox 12.0。

你可以在这里看到：http: [//jsbin.com/firefox-bg-bug](http://jsbin.com/firefox-bg-bug)

```
<!DOCTYPE html>
<html>
<head>
<title>Firefox Background Bug</title>
<style>
  body{
    background-color: #ccc; 
    padding: 10px;
  }
  div{
    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAABCAIAAACnuZzqAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAZSURBVHjaYmQQ+v//HSPDKCAEGIX+AwQYAH23BBPJF5FHAAAAAElFTkSuQmCC);
    height: 53200px;
  }
</style>
</head>
<body>
  <div></div>
</body> 
```

滚动到页面底部以查看错误。**仅限火狐**

我想知道这是否真的是一个浏览器错误，如果是，是否应该在 Bugzilla 上报告？

**更新：** [![截屏](../Images/006367112d9bd16d0c41742410f8020c.png)](https://i.stack.imgur.com/A2MAw.png)

# java - 如何禁用 OnClickListeners

> ID：10348808
> 
> 赞同：3
> 
> 时间：2012-04-27T10:14:21.087
> 
> 标签：java, android, onclicklistener

我正在开发一个应用程序，用户必须正确匹配图像和相应的名称。

我的问题是当用户首先选择图像并选择错误的名称时，它将显示错误的答案，如果他选择了答案，它将显示正确的答案。

用户不必再次重新选择图像

我已将 onClickListerner 设为空，但它不起作用我的一些代码如下，

```
 txt_tag[0] = (TextView) findViewById(R.id.txt_tag1);
    txt_tag[0].setOnClickListener(this);
    txt_tag[0].setTypeface(tf);

    txt_tag[1] = (TextView) findViewById(R.id.txt_tag2);
    txt_tag[1].setOnClickListener(this);
    txt_tag[1].setTypeface(tf);

    txt_tag[2] = (TextView) findViewById(R.id.txt_tag3);
    txt_tag[2].setOnClickListener(this);
    txt_tag[2].setTypeface(tf);

    txt_tag[3] = (TextView) findViewById(R.id.txt_tag4);
    txt_tag[3].setOnClickListener(this);
    txt_tag[3].setTypeface(tf);

    img[0] = (ImageButton) findViewById(R.id.img1);
    img[0].setOnClickListener(this);

    img[1] = (ImageButton) findViewById(R.id.img2);
    img[1].setOnClickListener(this);

    img[2] = (ImageButton) findViewById(R.id.img3);
    img[2].setOnClickListener(this);

    img[3] = (ImageButton) findViewById(R.id.img4);
    img[3].setOnClickListener(this);

    btn_nxt = (Button) findViewById(R.id.btn_next);
    btn_nxt.setOnClickListener(this); 
```

我在该方法中调用了一个方法，在该方法中我将所有 onClickListerner 设为 null

```
txt_tag[0].setOnClickListener(null);
txt_tag[1].setOnClickListener(null);
txt_tag[2].setOnClickListener(null);
txt_tag[3].setOnClickListener(null);
img[0].setOnClickListener(null);
img[1].setOnClickListener(null);
img[2].setOnClickListener(null);
img[3].setOnClickListener(null); 
```

谁能告诉我哪里出了问题或我可以对其进行的任何修改。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T10:28:43.140

尝试使用

```
 txt_tag[0].setClickable(false);
       txt_tag[1].setClickable(false);
       ..
       img[0].setClickable(false);
       img[1].setClickable(false);
       .. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T10:17:19.063

你的问题不是很清楚.. 但是如果你想让你的图像和文本标签不可点击..`android:clickable="false"`用 xml 或`setClickable(false);`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T10:30:24.047

如果我是你，我会在侦听器中检查该逻辑。因此，如果问题（如果是测验）处于“已回答”状态，请不要对事件做出反应。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T10:40:55.687

这是我的建议，如果你想编写特定的行为，你可以使用 onClickListener 回调来实现你想要的。

在监听器中，检查图像的状态；如果它已经被选中并且您想忽略该事件，那么您只需退出回调。

我认为将 onClickListener 设置为 null 是错误的做法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-27T10:49:15.043

您的问题不清楚，但我的理解如下：

*   你有一堆`ImageViews`一堆`TextViews`和它们之间的映射。
*   您希望能够先选择一个`ImageView`，然后选择一个`TextView`。如果他们匹配，“正确答案”将显示在某处，如果不匹配，“错误答案”将显示
*   如果在选择 ImageView 之前单击 TextView，则不会发生任何事情
*   如果您单击一个 Textview 并且已经选择了另一个 TextView，则不会发生任何事情

如果这是正确的，你可以这样做：你保留两个变量

```
int selectedImage = -1;
int selectedText  = -1; 
```

在你的`OnClickListener`你更新他们的价值观是这样的：

```
if (source instanceof ImageViews) {
  selectedImage = getArrayIndex(source); // I guess you already have a method to retrieve the index
  selectedText = -1; // reset textSelection
} else {
  if (selectedText < 0) {
    selectedText = getArrayIndex(source);
  }
}
updateAnswerTextView(); // here you check if the two selections (selectedText and selectedImage) match and display the corresponding string. 
```

相反，您可以遍历`TextView`数组并调用

```
setClickable(false); 
```

在每个元素上单击一个。如果选择了新图像，则必须再次将它们设置为可点击。

编辑：我同意 Rob 的观点，你不应该删除你的`Listeners`来实现这种行为。

# google-chrome - Chrome：无法使用 Tab 键

> ID：10348810
> 
> 赞同：0
> 
> 时间：2012-04-27T10:14:42.833
> 
> 标签：google-chrome, google-chrome-devtools

我在需要编写函数的 chrome 控制台中测试几个 javascript 示例。问题是我无法使用 TAB 键在函数内将行向右移动 2 个空格，例如

```
function abc(){
  //Need to use tab to properly format
}; 
```

任何人请。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:48:52.217

参考[官方文档](https://developers.google.com/chrome-developer-tools/docs/shortcuts)是不可能的。

您将不得不使用空格，在其他编辑器中编写代码然后复制它，或者使用 Firefox ...

为了好玩：[Spaces VS Tabs](http://www.codinghorror.com/blog/2009/04/death-to-the-space-infidels.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-27T10:18:53.860

这是正确的行为，JavaScript 在没有制表符和回车的情况下同样有效。

# javascript - JavaScript：如何在动态生成的 jQuery .click() 函数中发送函数参数？

> ID：10348814
> 
> 赞同：1
> 
> 时间：2012-04-27T10:15:16.133
> 
> 标签：javascript, jquery

我有一个 ajax 请求，它返回我`JSON`的数据（对象数组）。迭代这个数组，我生成了一个链接列表。我想设置一个`onClick`事件并使用来自 ajax 响应的参数调用一个函数。

听起来可能不太清楚，所以这里有一个例子：

```
function test(param1) {
    // ...
}

$.ajax({
    url: 'getSomeData.php',
    type: 'post',
    data: data,
    success: function(result){
        var result = JSON.parse(result);
        $div = $('<div />');

        for (i in result.someObject) {
            $div.append('<a href="#" id="linkID' + i + '">ajax link ' + i + '</a>');
            $('#linkID' + i).click(function(){
                test(result.someObject[i]); // <--- My question is here
                return false;
            });
        }
        $(document.body).append($div);
    }
}); 
```

在我的函数`test`中，我总是得到迭代数组的最后一个对象。我知道为什么会发生这种情况，但我不知道如何解决它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T10:18:00.027

这是 i 范围的问题，如果您使用闭包将其范围限制为单击事件处理程序，如下所示应该没问题。

```
(function(i) {
  $('#linkID' + i).click(function(){
    test(result.someObject[i]); // <--- My question is here
    return false;
  });
})(i); 
```

这保证 i 处于创建处理程序时的值，而不是它设置的最后一个值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T10:19:12.347

您的问题是范围之一-您的变量`i`未绑定在范围内，因此在调用事件处理程序时，它始终具有分配的最后一个值。

解决此问题的最简单方法（当您使用 jQuery 时）是使用`eventData`参数[`.click()`](http://api.jquery.com/click/)：

```
('#linkID' + i).click({ param1: result.someObject[i] }, test); 
```

然后`test`改为读取事件数据：

```
function test(ev) {
    var param1 = ev.data.param1;
    // ...
} 
```

jQuery 将绑定任何提供的 eventData 并自动将其添加到传递给事件处理程序的事件对象中。

这避免了必须创建任何额外的闭包来修复提供的参数的范围。

[请参阅http://api.jquery.com/bind/](http://api.jquery.com/bind/)上标题为“传递事件数据”的部分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T10:17:27.130

您可以通过使用传递上下文（以及变量）[`jQuery.proxy()`](http://api.jquery.com/jQuery.proxy/)

简单的例子：

```
MyObject = function() {
  this.element = $('#element');
  this.some_var = 'It works!';

  this.element.click($.proxy(this.handleClick, this));
};

MyObject.prototype.handleClick = function() {
  console.log(this.some_var);
};

var m = new MyObject(); 
```

来自 jQuery 文档的示例：

```
<script>
var me = {
  type: "zombie",
  test: function(event) {
    // Without proxy, `this` would refer to the event target
    // use event.target to reference that element.
    var element = event.target;
    $(element).css("background-color", "red");

    // With proxy, `this` refers to the me object encapsulating
    // this function.
    $("#log").append( "Hello " + this.type + "<br>" );
    $("#test").unbind("click", this.test);
  }
};

var you = {
  type: "person",
  test: function(event) {
    $("#log").append( this.type + " " );
  }
};

// execute you.test() in the context of the `you` object
// no matter where it is called
// i.e. the `this` keyword will refer to `you`
var youClick = $.proxy( you.test, you );

// attach click handlers to #test
$("#test")
  // this === "zombie"; handler unbound after first click
  .click( $.proxy( me.test, me ) )
  // this === "person"
  .click( youClick )
  // this === "zombie"
  .click( $.proxy( you.test, me ) )
  // this === "<button> element"
  .click( you.test );
</script> 
```

# file - 将输入标记的路径绑定到我的 bean 类中的实例变量

> ID：10348824
> 
> 赞同：0
> 
> 时间：2012-04-27T10:16:28.270
> 
> 标签：file, jsp, jsf, binding

我需要从用户那里获取文件。

我的 JSP 页面有`<input type="file">`标签。

问题是当我尝试将标签绑定到实例变量时。

```
<input type="file" value= "#{bean.inputPath}"> 
```

bean 是我注册的托管 bean 并且`InputPath`是我的实例变量，它在运行时会出错。

我只需要变量中文件的路径，而不是上传文件。我怎样才能做到这一点？

* * *

谢谢你的快速回复

那么要求是：

我需要开发一个用于加密/解密文本文件的 Web 应用程序

用户需要告诉应用程序文件的路径。

此外，加密算法现在需要文件的完整路径进行加密。

我在我的jsp页面中尝试了另一件事

脚本 ：

var filepath = document.getElementById('fileName').value ;

document.getElementById('fileHidden').value = filePath ;

但这行不通。这应该有效。帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T13:19:30.663

那是不可能的。`<input type="file">`浏览器无论如何都不会发送完整路径。它只会发送文件名。只有 Microsoft Internet Explorer 存在安全漏洞，即它发送完整的文件路径而不是仅发送文件名。但是您不应该让您的 Web 应用程序依赖于仅被世界 20% 使用的特定 Web 浏览器的错误。

但是所有这一切都是没有意义的。您认为它是正确解决方案的功能需求到底是什么？服务器拥有客户端磁盘文件系统的完整文件路径而没有完整的文件内容有什么用？如果您更详细地阐述具体的功能需求，我们或许能够为此提出正确的解决方案。

# android - 如何使用库模块中的变量？

> ID：10348826
> 
> 赞同：0
> 
> 时间：2012-04-27T10:16:33.277
> 
> 标签：android, intellij-idea

我在 IntellliJ IDEA 11 中使用库模块中的变量时遇到问题。

我的步骤是：

1.  创建了一个新的Android项目
2.  添加了新模块（文件->新模块）并确保将其添加为库
3.  模块被正确识别为库模块并成为主项目树的一部分
4.  我在库项目中创建了一个新类并添加了一个测试变量
5.  我试图从主项目中引用这个变量，但它没有看到它。

我已经发布了显示项目树结构、带有公共变量的库类和主项目中的错误的图像。IntelliJ 无法识别我的库类，也没有提供任何导入。库项目的手动导入也不起作用。

![](../Images/5f46cd437a42ba04c36d668bcc32de48.png)

![](../Images/b353bbd45ff25252a29a86bfd61f3f1c.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:27:46.007

确保[将库模块作为依赖项添加](http://www.jetbrains.com/idea/webhelp/configuring-module-dependencies-and-libraries.html)到主模块。

# jersey - 气氛和 REST 调用

> ID：10348829
> 
> 赞同：0
> 
> 时间：2012-04-27T10:16:37.877
> 
> 标签：jersey, cxf, atmosphere

我正在使用 Atmosphere 框架开发通知服务。我想知道是否有办法用 Apache CXF 框架替换 Jersey 组件。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:21:48.263

CXF 没有本机模块，但在 CFX 中使用 Atmosphere API 应该很容易。让我们在大气框架@googlegroups.com 上进行讨论（详情）。

# iphone - xcode 4.2音板线程1

> ID：10348840
> 
> 赞同：0
> 
> 时间：2012-04-27T10:17:22.910
> 
> 标签：iphone, xcode, ios5

嗨，我已经创建了一个 Xcode 音板，但是当我在我的 iPhone 上运行它时，我得到了这个错误，不知道如何解决它，你能帮忙吗？

```
//
//  main.m
//  sound
//
//  Created by Paul masters on 27/04/2012.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//

#import <UIKit/UIKit.h>

#import "AppDelegate.h"

int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
} 
```

错误是

```
return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); 
```

线程 1：信号 SIGABRT

谢谢

这是视图控制器.h

```
#import <UIKit/UIKit.h>
#import <AudioToolbox/AudioToolbox.h>

@interface ViewController : UIViewController
- (IBAction)yooo:(id)sender;

- (IBAction)boom:(id)sender;

@end 
```

这是视图控制器.m

```
- (IBAction)yooo:(id)sender {

    CFBundleRef mainbundle = CFBundleGetMainBundle();
    CFURLRef soundFileUrlRef;
    soundFileUrlRef = CFBundleCopyResourceURL(mainbundle, (CFStringRef) @"tb1", CFSTR ("wav"), NULL); 
    UInt32 soundID;
    AudioServicesCreateSystemSoundID(soundFileUrlRef, &soundID);
    AudioServicesPlaySystemSound(soundID);}

- (IBAction)boom:(id)sender {

    CFBundleRef mainbundle = CFBundleGetMainBundle();
    CFURLRef soundFileUrlRef;
    soundFileUrlRef = CFBundleCopyResourceURL(mainbundle, (CFStringRef) @"ta1", CFSTR ("wav"), NULL); 
    UInt32 soundID;
    AudioServicesCreateSystemSoundID(soundFileUrlRef, &soundID);
    AudioServicesPlaySystemSound(soundID);
}

@end 
```

这是我的代码与那个线程 1 错误！ ![这是我的代码失败的图像](../Images/1d5885e26902463e45efa4eee2a411ce.png)

![在此处输入图像描述](../Images/3749f8306086636e02f7e4f377c3b22d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:51:25.553

您需要做的是找到构建阶段，然后单击 + 并添加`audio.framework` ，然后尝试`run and build`，一切都应该很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T11:25:02.680

您需要设置一个异常断点。请参阅[Xcode 4 中的“运行 > 在 Objective-C 异常上停止”？](https://stackoverflow.com/questions/4961770/run-stop-on-objective-c-exception-in-xcode-4). 如果你没有异常断点并且发生了异常，那么你将看到的只是一个没有堆栈的 SIGABRT，所以你无法找出到底发生了什么。

# sencha-touch - 如何在sencha2.0中单击登录表单的提交按钮调用另一个表单？

> ID：10348842
> 
> 赞同：1
> 
> 时间：2012-04-27T10:17:31.810
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我正在开发 sencha2.0。我有一个登录表单，我想通过单击登录表单中的提交按钮来调用另一个表单。

```
Ext.define('senchaApp.view.test', {
    extend : 'Ext.form.Panel',
    xtype : 'test',
    requires: "Ext.form.FieldSet",
    id : 'login',
    layout:'vbox', 
    constructor : function(config) {
        var formContainer = Ext.create('Ext.Panel',{
            width:'100%',
            height:'100%',
            id:'formPanel',
            flex:1,
            items:[{
                xtype:'textfield',
                name:'user',
                id:'user',
                label:'Username',
                clearIcon:false,
                cls:'fields'
                },
                {xtype:'passwordfield',
                style:'margin-top:10px;',
                name:'pass',
                id:'pass',
                label:'Password',
                clearIcon:false,
                cls:'fields'
                },
                {xtype:'button',
                cls:'submitBtn',
                id:'submit',
                ui:'action-small',
                action:'submitLogin',
                style:'background-image: url("app/resources/images/img_btnStrip.png");width:186px;margin: 0 auto;height:66px;margin-top:20px;background-color:none;'
                }]
        });

        var formContentHolder = Ext.create('Ext.Panel',{
            cls:'middleContainer',
            items:[formContainer]
        });
        config.items = [formContentHolder];
        this.callParent(arguments);
    },
    initialize : function() {
        this.callParent(arguments);
    }
}); 
```

在控制器下有 Main.js，一个疑问是 ref 和 refs 的选择器下应该有什么：

```
Ext.define('senchaApp.controller.Main',{
    extend:'Ext.app.Controller',
    refs:[{
        ref:'',
        selector:''
    }],

    init: function(){
    Ext.create('senchaApp.view.Viewport');
    this.control({
        '#submit':{
            tap: this.showanotherform
    }
    });
},
    showanotherform: function(){
    //How I will call another form on click of submit button here   
}

}); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-27T10:28:36.783

在 Sencha Touch 控制器文件的`refs`部分内，

*   `ref`: ref 用于名称或 getter 方法（第一个字符自动大写）。脱颖而出，以供将来用于此组件的参考。

*   `selector`：选择器与 ComponentQuery 一起使用以获取该选择器的引用并缓存它。它突出了用于识别我们所引用的组件并在未来通过值尝试使用它的那个`id (#myButton)`或那个。`xtype(button)``ref`

# php - 匹配第一次出现的正则表达式问题

> ID：10348845
> 
> 赞同：0
> 
> 时间：2012-04-27T10:17:56.180
> 
> 标签：php, regex

谁能告诉我这个正则表达式有什么问题：

它旨在返回第一次出现的颜色，但一直返回最后一次出现。

```
$string = "Red is a sexy colour. Yellow too. Pink too. Blue too. Green too. Hehe.";

preg_match('/^.*\b(red|green|blue|yellow)\b.*$/i', $string, $colour );

echo $colour[1]; // Should say Red, but returns Green... o.O 
```

$colour 上的 print_r 显示：

```
Array ( [0] => Red is a sexy colour. Yellow too. Pink too. Blue too. Green too. Hehe.
        [1] => Green ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T10:26:20.227

除了使图案之前的填充物变得不贪婪之外，您还可以在图案和锚点之前和之后移除填充物：

```
preg_match('/\b(red|green|blue|yellow)\b/i', $string, $colour); 
```

将返回第一场比赛。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T10:25:46.850

不，不应该。关键是正则表达式引擎首先尝试匹配源字符串中尽可能多的字母给定的模式。默认情况下它非常贪婪。)

换句话说，您指定的模式将尝试从字符串*末尾查找四个颜色的单词。*您可以使其不贪婪（通过首先替换`.*`为`.*?`） - 或尝试完全改革您的模式。

我看到 ^ 和 $ 标记，后跟 .* 有一点用处，例如，如果您只是在寻找这些词，为什么不使用像...这样简单的东西

```
/\b(red|green|blue|yellow)\b/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T10:20:52.627

你的`.*`部分是贪婪的，即。它在颜色名称出现之前尽可能匹配。将其更改为非贪婪使用`.*?`

```
preg_match('/^.*?\b(red|green|blue|yellow)\b.*$/i', $string, $colour ); 
```

# android - 从安卓模拟器访问互联网缓慢或不稳定

> ID：10348850
> 
> 赞同：5
> 
> 时间：2012-04-27T10:18:11.370
> 
> 标签：android, android-emulator

我已启用互联网访问权限，无需处理任何代理。我发现虽然大多数时候我可以从模拟器中的浏览器或我的应用程序访问网络，但尽管我有高速宽带连接，但访问速度非常慢。

我的问题是 - 模拟器中是否有一个设置旨在模拟互联网连接的速度并默认设置为较低的值？如果是的话，我该如何改变它。如果不是，为什么模拟器中的连接速度很慢。

另一个问题是这种连接经常中断，我的应用程序和模拟器中的浏览器都出现了找不到页面的异常。一旦我重新启动他的模拟器，这就可以了。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T10:29:41.683

模拟器上有[延迟和限制](http://developer.android.com/guide/developing/tools/emulator.html#netspeed)网络 I/O 的设置，但默认为全速。

问题可能出在其他地方，因为 AFAIK 没有 GUI / 键盘快捷键来触发该延迟，您需要从命令行启动模拟器并指定这些选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T06:37:19.553

我最终尝试了这个并且似乎有所作为，或者这可能是我的想象，因为文档说默认是全速并且没有延迟。但这确实允许人们更改速度以及各种其他设置，而无需重新启动模拟器。

1.  启动模拟器并等待它完全加载
2.  从命令行 telnet 到 AVD ex 的适当端口上的模拟器。`telnet localhost 5554`
3.  这会将您带到 AVD 控制台。这里使用命令`network speed full`。

更多信息 - [http://developer.android.com/guide/developing/devices/emulator.html](http://developer.android.com/guide/developing/devices/emulator.html)

这可以通过模拟器的命令行启动来完成，但是如果您从 avd 管理器启动模拟器并希望在模拟器运行时更​​改一些设置，这可能会很有用

# c# - 如何将多个操作数应用于单个运算符？

> ID：10348855
> 
> 赞同：5
> 
> 时间：2012-04-27T10:18:48.880
> 
> 标签：c#, operators

如何将多个操作数应用于单个运算符？

一个例子：

代替

```
if (foo == "dog" || foo == "cat" || foo == "human") 
```

我可以有以下或类似的：

```
if (foo == ("dog" || "cat" || "human")); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T10:21:06.887

您的第一个版本已经在一个表达式中包含多个运算符。听起来您想将多个*操作数*（“dog”、“cat”、“human”）应用于单个*运算符*（`==`在本例中）。

对于*该特定示例*，您可以使用：

```
// Note: could extract this array (or make it a set etc) and reuse the same
// collection each time we evaluate this.
if (new[] { "dog", "cat", "human" }.Contains(foo)) 
```

但是对于所有运营商来说，没有通用的万能版本。

编辑：如评论中所述，上述内容的性能不如硬编码版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T10:22:04.323

可以做这样的事情：

```
List<string> values = new List<string> {"dog", "cat", "human"}; 
values.Any(s=>s.Equals(foo )); 
```

但在我看来，您编写的代码已经比任何其他解决方案更具可读性。如果我们不是在这里谈论可能的几十种选择，自然而然。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T11:23:51.597

使用开关盒

```
switch(foo)
{
   case "dog":
   case "cat":
   case "human":
   //Your Code
   break;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T10:25:35.263

您可以随时尝试，编译并亲自查看:)

```
("dog" || "cat" || "human") 
```

对 C# 来说不是一个有意义的表达式

也许您可以将它们放在一个数组中并循环它们。

或者更好的是，将它们放在一个数组中，然后提出一个很酷的 lambda 表达式。

# c# - 如何在最后允许部分页面加载？

> ID：10348862
> 
> 赞同：0
> 
> 时间：2012-04-27T10:19:15.620
> 
> 标签：c#, asp.net, page-lifecycle

我在使用`ASP.NET`in从事应用程序开发工作`C#.`

我有一个`Grid View`我希望它在页面加载的最后加载。

该页面应首先加载母版页，其中加载了所有图像和其他功能，然后仅加载`GridView`.

这可以在 c# 后端代码上实现吗？比如页面生命周期事件。

请指教，先谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:35:22.657

您无法分辨使用 C# 是先加载还是最后加载，因为它是关于 HTTP 请求和响应的，基本上是 TCP/IP。但是，您可以使用 AJAX 先加载一些内容，然后再加载一些其他内容，最后处理 Javascript 事件，例如`onload`.

**编辑**

我将在这种情况下的加载理解为在客户端加载页面。如果您正在谈论在服务器端加载页面，是的，您可以这样做。您需要使用页面生命周期事件加载内容。

# sql-server-2005 - SQL Server - 外键引用错误

> ID：10348865
> 
> 赞同：0
> 
> 时间：2012-04-27T10:19:23.483
> 
> 标签：sql-server-2005, foreign-keys, primary-key, composite-primary-key

我有两个表，`Table_1`有 4 列（3 个主键）和`Table_2`2 列。当我尝试在 中创建外键约束时`Table_2`，出现此错误：

![在此处输入图像描述](../Images/22edbe55a44c89f10f971c17a79b4564.png)

这是我的表的定义：

**表格1**

```
CREATE TABLE [dbo].[Table_1]
(
    [Field_1] [tinyint] NOT NULL,
    [Field_2] [tinyint] NOT NULL,
    [Field_3] [tinyint] NOT NULL,
    [Field_4] [varchar](50) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
 CONSTRAINT [PK_Table_1] PRIMARY KEY CLUSTERED 
(
    [Field_1] ASC,
    [Field_2] ASC,
    [Field_3] ASC
) 
```

**表_2**

```
CREATE TABLE [dbo].[Table_2]
(
    [Field_1] [tinyint] NOT NULL,
    [Field_2] [tinyint] NOT NULL
) ON [PRIMARY] 
```

您对如何解决这个问题有任何想法吗？谢谢 -

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:41:13.110

的主键`Table_1`是,和的*所有三个* 。为了引用另一个表中的键，您必须引用该键中的*所有*列 - 因此您需要添加和to ，并在尝试创建外键约束时包含所有三列。`Field_1``Field_2``Field_3`*`Field_2``Field_3``Table_2`*

 *或者，如果`Field_1`本身是 的键`Table_1`，则通过重新定义主键或仅在 to`UNIQUE`上添加约束来声明它。然后，您将能够创建您尝试创建的外键。`Field_1``Table_1`*

# string - 是否有任何算法可以从字符串集合中找到与字符串最接近的匹配项？

> ID：10348867
> 
> 赞同：3
> 
> 时间：2012-04-27T10:19:28.653
> 
> 标签：string, algorithm, match

是否有任何算法可以从字符串集合中找到与字符串最接近的匹配项？例如：

```
string_to_match = 'What color is the sky?'

strings = [
  'What colour is the sea?', 
  'What colour is the sky?', 
  'What colour is grass?', 
  'What colour is earth?'
]

answer = method_using_string_matching_algorithm(string_to_match, strings)
answer # returns strings[1] 'What colour is the sky?' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T13:22:20.533

您要查找的搜索词是“字符串距离算法”和“近似字符串匹配”。快速查看 Google 会发现一些有趣的选项，例如：

*   Sift3 距离
*   莱文斯坦距离
*   最佳字符串对齐距离
*   Damerau-Levenshtein 距离
*   Qwerty 键盘距离

一些有用的链接包括：

*   [https://github.com/Kicksend/mailcheck/wiki/String-Distance-Algorithms](https://github.com/Kicksend/mailcheck/wiki/String-Distance-Algorithms)
*   [http://en.wikipedia.org/wiki/Approximate_string_matching](http://en.wikipedia.org/wiki/Approximate_string_matching)

在撰写本文时，基于 Debian 的 Linux 发行版还在其存储库中包含 agrep 和[TRE-agrep](http://laurikari.net/tre/about/)。

# iphone - 在“关闭”状态下更改 UISwitch 的颜色

> ID：10348869
> 
> 赞同：119
> 
> 时间：2012-04-27T10:19:29.630
> 
> 标签：iphone, ios, uiswitch

我了解到我们可以在“on”状态下更改 UISwitch 按钮的外观，但是否也可以在“off”状态下更改 UISwitch 的颜色？

* * *

## 回答 #1

> 赞同：172
> 
> 时间：2015-10-07T08:58:58.493

我使用#swift2 的解决方案：

```
let onColor  = _your_on_state_color
let offColor = _your_off_state_color

let mSwitch = UISwitch(frame: CGRect.zero)
mSwitch.on = true

/*For on state*/
mSwitch.onTintColor = onColor

/*For off state*/
mSwitch.tintColor = offColor
mSwitch.layer.cornerRadius = mSwitch.frame.height / 2.0
mSwitch.backgroundColor = offColor
mSwitch.clipsToBounds = true 
```

结果：

[![在此处输入图像描述](../Images/907ff00739ddd88765942d6ec430e8f9.png)](https://i.stack.imgur.com/xsq1C.png)

* * *

## 回答 #2

> 赞同：140
> 
> 时间：2014-04-03T06:56:10.983

尝试使用这个

```
yourSwitch.backgroundColor = [UIColor whiteColor];
youSwitch.layer.cornerRadius = 16.0; 
```

感谢@Barry Wyckoff。

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2013-10-01T18:11:24.310

您可以使用`tintColor`交换机上的属性。

```
switch.tintColor = [UIColor redColor]; // the "off" color
switch.onTintColor = [UIColor greenColor]; // the "on" color 
```

请注意，这需要 iOS 5+

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2016-08-03T07:18:06.883

Swift IBDesignable

```
import UIKit
@IBDesignable

class UISwitchCustom: UISwitch {
    @IBInspectable var OffTint: UIColor? {
        didSet {
            self.tintColor = OffTint
            self.layer.cornerRadius = 16
            self.backgroundColor = OffTint
        }
    }
} 
```

在身份检查器中设置类

[![在此处输入图像描述](../Images/57fb4405ee9387ff3cf982b624f5e355.png)](https://i.stack.imgur.com/D8K82.png)

从属性检查器更改颜色

[![在此处输入图像描述](../Images/d6694aa9613223f8fc82069504268d8f.png)](https://i.stack.imgur.com/r7RRN.png)

输出

[![在此处输入图像描述](../Images/66b5022c8607ba0ed99732b7988a0ef8.png)](https://i.stack.imgur.com/55QAY.png)

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2019-09-28T01:38:27.407

这是一个非常好的技巧：您可以直接进入 UISwitch 的子视图，该子视图绘制其“关闭”背景，并更改其背景颜色。这在 iOS 13 中比在 iOS 12 中效果更好：

```
if #available(iOS 13.0, *) {
    self.sw.subviews.first?.subviews.first?.backgroundColor = .green
} else if #available(iOS 12.0, *) {
    self.sw.subviews.first?.subviews.first?.subviews.first?.backgroundColor = .green
} 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2017-05-10T09:34:35.183

> 管理 UISwitch 背景颜色和大小的最佳方法

现在是 Swift 2.3 代码

```
import Foundation
import UIKit

@IBDesignable
class UICustomSwitch : UISwitch {

    @IBInspectable var OnColor : UIColor! = UIColor.blueColor()
    @IBInspectable var OffColor : UIColor! = UIColor.grayColor()
    @IBInspectable var Scale : CGFloat! = 1.0

    override init(frame: CGRect) {
        super.init(frame: frame)
        self.setUpCustomUserInterface()
    }

    required init?(coder aDecoder: NSCoder) {
        super.init(coder: aDecoder)
        self.setUpCustomUserInterface()
    }

    func setUpCustomUserInterface() {

        //clip the background color
        self.layer.cornerRadius = 16
        self.layer.masksToBounds = true

        //Scale down to make it smaller in look
        self.transform = CGAffineTransformMakeScale(self.Scale, self.Scale);

        //add target to get user interation to update user-interface accordingly
        self.addTarget(self, action: #selector(UICustomSwitch.updateUI), forControlEvents: UIControlEvents.ValueChanged)

        //set onTintColor : is necessary to make it colored
        self.onTintColor = self.OnColor

        //setup to initial state
        self.updateUI()
    }

    //to track programatic update
    override func setOn(on: Bool, animated: Bool) {
        super.setOn(on, animated: true)
        updateUI()
    }

    //Update user-interface according to on/off state
    func updateUI() {
        if self.on == true {
            self.backgroundColor = self.OnColor
        }
        else {
            self.backgroundColor = self.OffColor
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2020-06-26T07:26:42.583

[![在此处输入图像描述](../Images/22754e566b34f7f4dfea0bdba32d6d39.png)](https://i.stack.imgur.com/9GTby.png)
[![在此处输入图像描述](../Images/c5616489c8a8f0675b7c5a4abbcbf72b.png)](https://i.stack.imgur.com/Wy2aG.png)
工作 100% IOS 13.0 和 Swift 5.0 切换两个状态颜色设置相同#ios13 #swift #swift5

```
@IBOutlet weak var switchProfile: UISwitch!{
    didSet{
        switchProfile.onTintColor = .red
        switchProfile.tintColor = .red
        switchProfile.subviews[0].subviews[0].backgroundColor = .red
    }
} 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2019-03-28T11:27:55.817

斯威夫特 5：

```
import UIKit

extension UISwitch {    

    func set(offTint color: UIColor ) {
        let minSide = min(bounds.size.height, bounds.size.width)
        layer.cornerRadius = minSide / 2
        backgroundColor = color
        tintColor = color
    }
} 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2019-07-15T02:56:49.190

如果您需要围绕您的应用程序进行其他切换，那么在自定义类中实现@LongPham 的代码也是一个好主意。正如其他人指出的那样，对于“关闭”状态，您还需要更改背景颜色，因为默认设置是透明的。

```
class MySwitch: UISwitch {

  required init?(coder aDecoder: NSCoder) {
    super.init(coder: aDecoder)

    // Setting "on" state colour
    self.onTintColor        = UIColor.green

    // Setting "off" state colour
    self.tintColor          = UIColor.red
    self.layer.cornerRadius = self.frame.height / 2
    self.backgroundColor    = UIColor.red
  }
} 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2018-09-24T11:40:19.317

在 Swift 4+ 中：

`off`状态：

```
switch.tintColor = UIColor.blue 
```

`on`状态：

```
switch.onTintColor = UIColor.red 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2018-02-23T12:30:55.633

**Swift 4**最简单快捷的方式，只需 3 步即可：

```
// background color is the color of the background of the switch
switchControl.backgroundColor = UIColor.white.withAlphaComponent(0.9)

// tint color is the color of the border when the switch is off, use
// clear if you want it the same as the background, or different otherwise
switchControl.tintColor = UIColor.clear

// and make sure that the background color will stay in border of the switch
switchControl.layer.cornerRadius = switchControl.bounds.height / 2 
```

如果您手动更改开关的大小（例如，通过使用自动布局），您也必须更新开关`switch.layer.cornerRadius`，例如，通过覆盖`layoutSubviews`并在调用 super 更新角半径之后：

```
override func layoutSubviews() {
    super.layoutSubviews()
    switchControl.layer.cornerRadius = switchControl.bounds.height / 2
} 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2018-07-29T13:16:52.697

UISwitch`offTintColor`是透明的，因此开关后面的任何内容都会显示出来。*因此，与其掩盖背景颜色，不如在开关后面*绘制一个开关形状的图像就足够了（这个实现假设开关是通过自动布局定位的）：

```
func putColor(_ color: UIColor, behindSwitch sw: UISwitch) {
    guard sw.superview != nil else {return}
    let onswitch = UISwitch()
    onswitch.isOn = true
    let r = UIGraphicsImageRenderer(bounds:sw.bounds)
    let im = r.image { ctx in
        onswitch.layer.render(in: ctx.cgContext)
        }.withRenderingMode(.alwaysTemplate)
    let iv = UIImageView(image:im)
    iv.tintColor = color
    sw.superview!.insertSubview(iv, belowSubview: sw)
    iv.translatesAutoresizingMaskIntoConstraints = false
    NSLayoutConstraint.activate([
        iv.topAnchor.constraint(equalTo: sw.topAnchor),
        iv.bottomAnchor.constraint(equalTo: sw.bottomAnchor),
        iv.leadingAnchor.constraint(equalTo: sw.leadingAnchor),
        iv.trailingAnchor.constraint(equalTo: sw.trailingAnchor),
    ])
} 
```

[但现在看看我的[另一个答案](https://stackoverflow.com/a/58142728/341994)。]

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2020-02-09T23:28:52.687

**2020 从 Xcode 11.3.1 和 Swift 5 开始**

这是我发现的用*一行代码*设置 UISwitch 关闭状态颜色的最简单方法。在这里写这个，因为这个页面是我在寻找时首先出现的，而其他答案没有帮助。

这是如果我想将关闭状态设置为红色，并且可以添加到 viewDidLoad() 函数中：

```
yourSwitchName.subviews[0].subviews[0].backgroundColor = UIColor.red 
```

注意 - 这实际上是在设置开关的背景颜色。**这也可能会影响开启状态下开关的颜色**（尽管对我来说这不是问题，因为我希望开启和关闭状态是相同的颜色）。

**解决方案：**

只需将颜色与 IBAction 中的“if else”语句联系起来即可。如果开关关闭，则将背景涂成红色。如果开关打开，请保持背景*清晰*，以便您选择的“打开”颜色正确显示。

这进入开关 IBAction**内部。**

```
 if yourSwitch.isOn == false {
           yourSwitch.subviews[0].subviews[0].backgroundColor = UIColor.red
    } else {
        yourSwitch.subviews[0].subviews[0].backgroundColor = UIColor.clear
    } 
```

我发现了一些行为，当应用程序从后台恢复时，切换背景会恢复为清除状态。为了解决这个问题，我简单地添加了以下代码来设置应用程序每次进入前台时的颜色：

```
 override func viewDidAppear(_ animated: Bool) {
    super.viewDidAppear(animated)

    NotificationCenter.default.addObserver(
      self,
      selector: #selector(applicationWillEnterForeground(_:)),
      name: UIApplication.willEnterForegroundNotification,
      object: nil)
}

@objc func applicationWillEnterForeground(_ notification: NSNotification) {
   yourSwitch.subviews[0].subviews[0].backgroundColor = UIColor.red
   yourSwitch.subviews[0].subviews[0].backgroundColor = UIColor.red
} 
```

似乎比其他答案更简单。希望有帮助！

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2021-05-01T12:29:44.313

我在 IOS 14 上进行了测试，将背景设置为关闭颜色并将 onTintColor 设置为打开并且可以正常工作：

```
uiSwitch.onTintColor = UIColor.blue
uiSwitch.backgroundColor = UIColor.red 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-04-06T13:02:25.547

**XCode 11，斯威夫特 5**

我不喜欢使用子视图，因为你永远不知道苹果什么时候会改变层次结构。

所以我改用遮罩视图。

它适用于 iOS 12、iOS 13

```
 private lazy var settingSwitch: UISwitch = {
        let swt: UISwitch = UISwitch()
        // set border color when isOn is false
        swt.tintColor = .cloudyBlueTwo
        // set border color when isOn is true
        swt.onTintColor = .greenishTeal

        // set background color when isOn is false
        swt.backgroundColor = .cloudyBlueTwo

        // create a mask view to clip background over the size you expected.
        let maskView = UIView(frame: swt.frame)
        maskView.backgroundColor = .red
        maskView.layer.cornerRadius = swt.frame.height / 2
        maskView.clipsToBounds = true
        swt.mask = maskView

        // set the scale to your expectation, here is around height: 34, width: 21.
        let scale: CGFloat = 2 / 3
        swt.transform = CGAffineTransform(scaleX: scale, y: scale)
        swt.addTarget(self, action: #selector(switchOnChange(_:)), for: .valueChanged)
        return swt
    }()

    @objc
    func switchOnChange(_ sender: UISwitch) {
        if sender.isOn {
            // set background color when isOn is true
            sender.backgroundColor = .greenishTeal
        } else {
            // set background color when isOn is false
            sender.backgroundColor = .cloudyBlueTwo
        }
    } 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2017-12-27T10:30:14.627

**Swift 3**中更安全的方法，没有神奇的 16pt 值：

```
class ColoredBackgroundSwitch: UISwitch {

  var offTintColor: UIColor {
    get {
      return backgroundColor ?? UIColor.clear
    }
    set {
      backgroundColor = newValue
    }
  }

  override func layoutSubviews() {
    super.layoutSubviews()
    let minSide = min(frame.size.height, frame.size.width)
    layer.cornerRadius = ceil(minSide / 2)
  }

} 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2016-10-12T13:47:26.037

使用代码或故事板在项目中的任何 UISwitch 上使用的目标 c 类别：

```
#import <UIKit/UIKit.h>

@interface UISwitch (SAHelper)
@property (nonatomic) IBInspectable UIColor *offTint;
@end 
```

执行

```
#import "UISwitch+SAHelper.h"

@implementation UISwitch (SAHelper)
@dynamic offTint;
- (void)setOffTint:(UIColor *)offTint {
    self.tintColor = offTint;   //comment this line to hide border in off state
    self.layer.cornerRadius = 16;
    self.backgroundColor = offTint;
}
@end 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-04-23T12:56:56.483

我最终也使用了 transform 和 layer.cornerRadius 。但我已将翻译添加到它的中心。

```
 private func setSwitchSize() {
    let iosSwitchSize = switchBlockAction.bounds.size
    let requiredSwitchSize = ...
    let transform = CGAffineTransform(a: requiredSwitchSize.width / iosSwitchSize.width, b: 0,
                                      c: 0, d:  requiredSwitchSize.height / iosSwitchSize.height,
                                      tx: (requiredSwitchSize.width - iosSwitchSize.width) / 2.0,
                                      ty: (requiredSwitchSize.height - iosSwitchSize.height) / 2.0)

    switchBlockAction.layer.cornerRadius = iosSwitchSize.height / 2.0
    switchBlockAction.transform = transform
} 
```

我确实在设计器中使用了 backgroundColor 和 tintColor。希望能帮助到你。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-01-31T20:54:27.103

**XCode 11，斯威夫特 4.2**

从[Matt 的解决方案](https://stackoverflow.com/a/51580695/1531971)开始，我将它添加到自定义的 IBDesignable 控件中。在需要处理`didMoveToSuperview()`的设置之前调用存在时间问题。`offTintColor`

```
@IBDesignable public class UISwitchCustom: UISwitch {

    var switchMask: UIImageView?
    private var observers = [NSKeyValueObservation]()

    @IBInspectable dynamic var offTintColor : UIColor! = UIColor.gray {
        didSet {
             switchMask?.tintColor = offTintColor
        }
    }

    override init(frame: CGRect) {
        super.init(frame: frame)
        initializeObservers()
    }

    required init?(coder aDecoder: NSCoder) {
        super.init(coder: aDecoder)
        initializeObservers()
    }

    private func initializeObservers() {
        observers.append(observe(\.isHidden, options: [.initial]) {(model, change) in
            self.switchMask?.isHidden = self.isHidden
        })
    }

    override public func didMoveToSuperview() {
        addOffColorMask(offTintColor)
        super.didMoveToSuperview()
    }

   private func addOffColorMask(_ color: UIColor) {
        guard self.superview != nil else {return}
        let onswitch = UISwitch()
        onswitch.isOn = true
        let r = UIGraphicsImageRenderer(bounds:self.bounds)
        let im = r.image { ctx in
            onswitch.layer.render(in: ctx.cgContext)
            }.withRenderingMode(.alwaysTemplate)
        let iv = UIImageView(image:im)
        iv.tintColor = color
        self.superview!.insertSubview(iv, belowSubview: self)
        iv.translatesAutoresizingMaskIntoConstraints = false
        NSLayoutConstraint.activate([
            iv.topAnchor.constraint(equalTo: self.topAnchor),
            iv.bottomAnchor.constraint(equalTo: self.bottomAnchor),
            iv.leadingAnchor.constraint(equalTo: self.leadingAnchor),
            iv.trailingAnchor.constraint(equalTo: self.trailingAnchor),
            ])
        switchMask = iv
        switchMask?.isHidden = self.isHidden
    }

} 
```

# python - 具有以列表中指定的前缀开头的属性的对象的 MongoEngine 查询列表

> ID：10348874
> 
> 赞同：6
> 
> 时间：2012-04-27T10:19:46.993
> 
> 标签：python, mongodb, mongoengine, nosql

我需要在 Mongo 数据库中查询具有以列表中任何前缀开头的特定属性的元素。现在我有一段这样的代码：

```
query = mymodel(terms__term__in=query_terms) 
```

并且这匹配在列表“terms”上有一个项目的对象，该列表具有明确出现在列表“query_terms”上的 StringField“term”。我想要实现的是让对象在列表“terms”上有一个项目，该列表具有 StringField“term”，以列表“query_terms”上出现的任何前缀开头。是否可以在一个查询中执行此操作，而无需在数据库中存储“术语”的所有可能前缀？编辑：下面的解决方案效果很好，但现在我必须找到以列表中每个前缀开头的术语的对象。我变了

```
query = reduce(lambda q1, q2: q1.__or__(q2), 
           map(lambda prefix: Q(terms__term__startswith=prefix))) 
```

到

```
query = reduce(lambda q1, q2: q1.__and__(q2), 
           map(lambda prefix: Q(terms__term__startswith=prefix))) 
```

但这不起作用。我最终收到以下错误：

```
InvalidQueryError: Duplicate query conditions: terms__term__startswith 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T10:51:44.200

如果您查询一个术语的值，您可以过滤以前缀开头的值，如下所示：

```
MyModel.objects.filter(terms__term__startswith='foo') 
```

如果您需要过滤多个前缀，则必须为此创建 Q 对象：

```
MyModel.objects.filter(Q(terms__term__startswith='foo') | Q(terms__term__startswith='bar')) 
```

如果您需要动态创建查询：

```
prefixes = ['foo', 'bar', 'baz']
query = reduce(lambda q1, q2: q1.__or__(q2), 
               map(lambda prefix: Q(terms__term__startswith=prefix), prefixes))
MyModel.objects.filter(query) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T10:30:11.823

您可以使用正则表达式，例如`^(prefix1 | prefix2 etc)`：

```
prefixes = [....]
regex = '^(%s)' % '|'.join(map(re.escape, prefixes))
docs = your_collection.find({'term': {'$regex': regex}}) 
```

更新：没有注意到这个问题是关于 mongoengine 的。以上是纯pymongo，不知道ME是否允许。

# javascript - 使用 Javascript 在另一个下拉列表的选定值上启用下拉列表

> ID：10348876
> 
> 赞同：0
> 
> 时间：2012-04-27T10:19:54.760
> 
> 标签：javascript, asp.net

我的网页上有两个 ASP.NET 下拉列表。默认情况下，第二个是禁用的。你们中的任何人都可以指导我使用javascript代码，当第一个中的选定索引为“4”时，该代码将启用第二个下拉列表，这是一个客户端触发器，但我似乎无法弄清楚。

我尝试了以下方法：

`function ddlstClick() { if (document.getElementById("<%=ddlst_ParameterType.ClientID %>").selectedindex = "4") { ddlst_pulldownParameters.Enabled = true; }`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:31:38.590

试试这个。

```
var e = document.getElementById("<%=ddlst_ParameterType.ClientID %>");
    var strUser = e.options[e.selectedIndex].value;

   if (strUser == "4")
    {
     var x=document.getElementById("<%=seconddropdown.ClientID %>");
        x.disabled=false;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:26:37.673

如果你喜欢使用，我认为你可以做类似的事情`JQuery`

```
var value = $("#ddlst_ParameterTypeoption:selected").text();
 if (value == "4")
   $("#ddlst_pulldownParameters").attr('disabled', false); 
```

# javascript - 匹配数组中的子数组。方案中的方案

> ID：10348877
> 
> 赞同：5
> 
> 时间：2012-04-27T10:19:58.827
> 
> 标签：javascript, arrays, sub-array

好的，考虑一下：

我有一个包含`arrays`,`-1`和`a`的大数组`b`。

表示该`-1`字段为空：

```
var board = [
    [-1,-1, a],
    [-1,-1, b],
    [ b,-1, a]
] 
```

现在我想再次检查较小的数组：

```
var solutions = [
    [
        [1, 1, 1]
    ],
    [
        [1],
        [1],
        [1]
    ],
    [
        [1],
        [0,1],
        [0,0,1]
    ],
    [
        [0,0,1],
        [0,1],
        [1]
    ]
] 
```

查看一个现有值是否`board`与`solutions`.

* * *

是否`a`匹配任何模式？
是否`b`匹配任何模式？

* * *

你们中的任何人都可以看到比制作疯狂的嵌套循环更好的方法吗：

```
var q,w,e,r,t,y;

q=w=e=r=t=y=0;

for( ; q < 3; q++ ) {
    for( ; w < 3; w++ ) {
        for( ; e < SOLUTIONS.length; e++ ) {
            .... and so on...
        }
    }
} 
```

* * *

在这个例子中，我使用了井字游戏。

但我可以是任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T19:40:01.030

您可以做的是编译模式以提高速度。与相同语言相同的方式允许编译正则表达式以提高速度。

```
function compile(pattern) {
    var code = "matcher = function(a) { return "
    var first = null
    for (var n = 0; n < pattern.length; n++) {
        for (var m = 0; m < pattern[n].length; m++) {
            if (pattern[n][m] == 0) continue
            var nm = "["+n+"]["+m+"]"
            if (first == null) {
                code += "a" + nm + " != -1";
                first = " && a" + nm + " == "
            }
            code += first + "a" + nm
      }
    }
    code += "; }";
    eval(code);
    return matcher
} 
```

那么这是在做什么呢？

例如

```
 compile([[1],[0,1],[0,0,1]]).toString() 
```

将创建以下函数

```
 "function (a) { return a[0][0] != -1 && a[0][0] == a[0][0] && a[0][0] == a[1][1] && a[0][0] == a[2][2]; }" 
```

那么你如何使用它呢？

要匹配您板上的位置，请按以下方式使用它

```
var patterns = solutions.collect(function(each) { return compile(each); })
var matches = patterns.any(function(each) { return each(board); }) 
```

注意，*上面的最后一个片段假设您正在使用许多流行的高阶编程库之一，例如[lodash](http://lodash.com)，如果不使用普通的旧 for 循环来提供数组原型上`collect`的函数。`any`*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:56:29.750

非常有趣的问题。+1 :) 这是我对此的看法。

检查我的小提琴[http://jsfiddle.net/BuddhiP/J9bLC/](http://jsfiddle.net/BuddhiP/J9bLC/)以获得完整的解决方案。我将尝试解释这里的要点。

我从这样的板子开始。我使用 0 而不是 -1 因为它更容易。

```
 var a = 'a', b = 'b';
    var board = [
       [a, 0, a],
       [b, b, b],
       [a, 0, a]
       ]; 
```

我的策略很简单。

1.  检查任何行是否有相同的玩家（a 或 b），如果是，我们就有赢家。
2.  否则，检查任何列是否具有相同的玩家
3.  否则，检查对角线是否有玩家

这是三个获胜的案例。

首先，我创建了一个可以获取一组行的函数（例如：[a,0,b]），并检查整行是否包含相同的值，以及该值是否不为零（或在您的情况下为 -1）。

```
checkForWinner = function () {
    lines = Array.prototype.slice.call(arguments);
    // Find compact all rows to unique values.
    var x = _.map(lines, function (l) {
        return _.uniq(l);
    });
    // Find the rows where all threee fields contained the same value.
    var y = _.filter(x, function (cl) {
        return (cl.length == 1 && cl[0] !== 0);
    });
    var w = (y.length > 0) ? y[0] : null;
    return w;
}; 
```

在这里我连续取唯一值，如果我只能找到一个不为零的唯一值，他就是赢家。

如果行中没有获胜者，我会检查列。为了重用我的代码，我使用 _.zip() 方法将列转换为行，然后使用上面相同的函数来检查我们是否有赢家。

```
var board2 = _.zip.apply(this, board);
winner = checkForWinner.apply(this, board2); 
```

如果我仍然没有找到赢家，是时候检查对角线了。我编写了这个函数来从棋盘中提取两条对角线作为两行，并使用相同的 checkForWinner 函数来查看对角线是否被任何玩家控制。

```
extractDiagonals = function (b) {
    var d1 = _.map(b, function (line, index) {
        return line[index];
    });
    var d2 = _.map(b, function (line, index) {
        return line[line.length - index - 1];
    });
    return [d1, d2];
}; 
```

最后，这是我实际检查董事会是否有获胜者的地方：

```
// Check rows
winner = checkForWinner.apply(this, board);
if (!winner) {
    var board2 = _.zip.apply(this, board);

    // Check columns, now in rows
    winner = checkForWinner.apply(this, board2);
    if (!winner) {
        var diags = extractDiagonals(board);
        // Check for the diagonals now in two rows.
        winner = checkForWinner.apply(this, diags);
    }
} 
```

如果有人想知道为什么我使用 apply() 方法而不是直接调用函数，原因是 apply() 允许您将数组元素作为参数列表传递给函数。

我相信这也适用于 4x4 或更高的矩阵，尽管我没有测试它们。

我没有多少时间来测试解决方案，所以如果您发现任何错误，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T23:07:52.393

你总是需要循环来完成这一切。你可以让它更容易阅读和更灵活。下面的代码适用于任何数量大于 1 的行/列，并且通过简单的调整也适用于超过 2 个玩家。

```
var board1 = [
[-1,-1, 'a'],
[-1,-1, 'b'],
['b',-1, 'a']
];
var board2 = [
['a','a', 'a'],
[-1,-1, 'b'],
['b',-1, 'a']
];
var board3 = [
[-1,'b', 'a'],
[-1,'b', 'b'],
['b','b', 'a']
];
var board4 = [
['a',-1, 'a'],
[-1,'a', 'b'],
['b',-1, 'a']
];

var solutions = [
[
    [1, 1, 1]
],
[
    [1],
    [1],
    [1]
],
[
    [1],
    [0,1],
    [0,0,1]
],
[
    [0,0,1],
    [0,1],
    [1]
]
];

function checkForWinner(playfield) {
    var sl = solutions.length; //solutions
    var bl = playfield.length; //board length
    var bw = playfield[0].length; //board width
    while(sl--) {
        //foreach solution
        var l = solutions[sl].length;

        if (l==1) {
            //horizontal
            //loop trough board length to find a match
            var tl = bl;
            while(tl--) {
                var pat = playfield[tl].join('')
                var r = checkRow(pat)
                if (r!==false)
                    return r;
            }
        } else {
            //vertical or diagonal
            var l1 = solutions[sl][0].length;
            var l2 = solutions[sl][1].length;

            if (l1==l2) {
                //vertical                  
                var tw = bw;
                while (tw--) {
                    //loop for each column  
                    var pat = "";   
                    var tl = l;
                    while(tl--) {
                        //loop for vertical
                        pat += playfield[tl][tw];
                    }

                    var r = checkRow(pat)
                    if (r!==false)
                        return r;
                }

            } else {
                //diagonal
                var pat = "";
                while(l--) {
                    //loop for vertical
                    var tw = solutions[sl][l].length;
                    while (tw--) {
                        //loop for horizontal                       
                        if (solutions[sl][l][tw]!=0)
                            pat += playfield[l][tw];
                    }
                }

                var r = checkRow(pat)
                if (r!==false)
                    return r;
            }
        }
    }
    return 'no winner';
}

function checkRow(pat) {
    if (!(pat.indexOf('a')>=0 || pat.indexOf('-1')>=0)) {
        //only b on row. player B won
        return 'B';
    }

    if (!(pat.indexOf('b')>=0 || pat.indexOf('-1')>=0)) {
        //only a on row. player A won
        return 'A';
    }

    return false;
}

console.log(checkForWinner(board1));
console.log(checkForWinner(board2));
console.log(checkForWinner(board3));
console.log(checkForWinner(board4)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T22:30:24.487

你可以让你的板子成为一个字符串：

```
 var board = 
   "-1,-1,a,
    -1,-1,b,
     b,-1,a" 
```

你的解决方案可以是一个字符串数组（类似于板）

```
var solutions = [ 
   "1,1,1,
    0,0,0,
    0,0,0"
    ,
   "1,0,0,
    0,1,0,
    0,0,1" 
```

]

然后进行比较，将 -1 和 b 替换为 0，将 a 替换为 1，然后简单地比较字符串

这比在另一个循环中有 10 个不同的循环要快得多

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T12:23:15.320

不，你只需要三个嵌套循环：一个循环你的模式，两个循环你的二维运动场：

```
function checkPatterns(patterns, player, field) {
    pattern: for (var p=0; p<patterns.length; p++) {
        for (var i=0; i<patterns[p].length; i++)
            for (var j=0; j<patterns[p][i].length; j++)
                if (patterns[p][i][j] && player !== field[i][j])
                    continue pattern;
        // else we've matched all
        return p;
    }
    // else none was found
    return -1;
}
function getSolution(player)
    return SOLUTIONS[checkPatterns(SOLUTIONS, player, currentBOARD)] || null;
} 
```

好的，您可能需要为玩家 ( `players.any(getSolution)`) 进行第四个循环，但这并没有让它变得更疯狂，并且可能也只为两个玩家内联。

但是，为模式本身构造算法可能比制定“模式数组”更容易：

```
function hasWon(player, field) {
    vert: for (var i=0; i<field.length; i++) {
        for (var j=0; j<field[i].length; j++)
            if (field[i][j] !== player)
                continue vert;
        return "vertical";
    }
    hor: for (var j=0; j<field[0].length; j++) {
        for (var i=0; i<field.length; i++)
            if (field[i][j] !== player)
                continue hor;
        return "horizontal";
    }
    for (var i=0, l=true, r=true, l=field.length; i<l; i++) {
        l == l && field[i][i] === player;
        r == r && field[l-i-1][l-i-1] === player;
    }
    if (l || r)
        return "diagonal";
    return null;
} 
```

# yii - 显示上传的图片 yii

> ID：10348887
> 
> 赞同：0
> 
> 时间：2012-04-27T10:20:50.487
> 
> 标签：yii

我是 php 和 yii 的新手。我的表单中有一个文件字段来上传图像。我使用以下代码使用文件字段上传图像。

查看代码：

```
<?php echo $form->fileField($model,'logo', array('class'=>'input-file')); ?>
    <img src="<?php 
        echo Yii::app()->request->baseUrl.'/protected/uploads/sitelogo/'.$savedvalues['varLogo']; 
    ?>" width="50" height="50" />
    <?php echo $form->hiddenField($model,'hiddenfile',
            array('value'=>$savedvalues['varLogo'])); ?> 
```

控制器中的代码：

```
$randnum = rand(0,100);
$home->varLogo = $randnum.$model->logo;
$file= Yii::app()->getBasePath().'/uploads/sitelogo/'.$randnum.$model->logo;
$model->logo->saveAs($file); 
```

图片现在上传正常。我已将上传的图像保存在`protected\uploads\`文件夹中。我正在尝试在编辑图像部分显示上传的图像。但是图像不显示。它显示`failed to load the given url`在萤火虫中。

我该如何纠正这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T11:25:08.243

`protected`文件夹由于某种原因受到保护 - 没有人可以访问它

如果您想访问您的图片，请将它们移动到`public`文件夹（或`public/uploaded`）

这是`.htaccess`内容`protected`

```
deny from all 
```

`EDIT:`

当然，如果您想为您的用户提供一些 ACL，您可以将文件放入受保护的文件夹（或使`uploaded`文件夹也无法访问），然后通过您的脚本（类）检查访问、读取和输出文件

鉴于：

```
<img src="<?php 
    echo Yii::app()->request->baseUrl.'/image.php?url=protected/uploads/sitelogo/'.$savedvalues['varLogo']; 
?>" width="50" height="50" /> 
```

在您的控制器或类中：

```
if (Yii::app()->session['user_can_access_files']) {
    header('Content-Type: image/jpeg');
    readfile($_GET['url']);
} else {
    Yii::app()->user->loginRequired();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T08:47:56.287

```
<b><?php echo CHtml::encode($data->getAttributeLabel('binaryfile')); ?>:</b>

<?php  echo CHtml::image(Yii::app()->request->baseUrl.'/upload/'.$data->fileName); ?>
<br /> 
```

文件名是您存储在根目录的上传文件夹中的文件的名称。

```
(Yii::app()->request->baseUrl.'/upload/' point to your upload folder which is in your root directory 
```

希望它有效....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T13:39:39.377

警告：我是一个完全的 yii 菜鸟，所以拿这个带一点盐 :) 我采取了类似的方法，但有用户特定的文件夹并添加了 MIME 类型检查。我以类似的方式上传文件，然后在视图中查看它们：

```
echo '<embed src="/tim_0.5/index.php/files/Getdatafile/' . $modelid . '" width=100% height=400>'; 
```

从我的控制器我有：

```
public function actionGetdatafile($id)
    {
        $model=$this->loadModel($id);
        $imgpath = $model->user_id . '/' . $model->filename;
        $file=Yii::app()->getBasePath().'/datafiles/'.$imgpath;

        if (file_exists($file))
        {
            $img=getimagesize($file);
            header('Content-Type: '.$img['mime']);
            readfile($file);
            exit;
        } else {
        echo 'File not found!';
        }
    } 
```

# android - 如何显示包含动态更新的父和子的可扩展 ListView？

> ID：10348890
> 
> 赞同：2
> 
> 时间：2012-04-27T10:21:01.657
> 
> 标签：android, listview, expandablelistview, expandablelistadapter

我想显示包含父母和孩子甚至子孩子的可扩展列表视图。这些数据将从服务器访问。数据可以作为 JSON 数据返回。

我想访问与该父级关联的父级和子级。孩子也可能有子孩子。

```
 Ex:
  Name       Parent        Level       categoryId
  Audio       0               1           101
  Video       0               1           102
  songs      101              2           201
  data       101              2           202
  myhost     201              3           301
  HD         102              2           401
  TV         401              3           500 
```

上面的示例显示了现在可用的数据。

附上我的代码

```
try {
    res1= httpclient1.execute(httppost1);
    responseBodys1 =EntityUtils.toString(res1.getEntity());

    JSONObject jsObject = new JSONObject(responseBodys1);
    JSONArray demo= jsObject.getJSONArray("categories");

    System.out.println("demo=="+demo.length());
    ArrayList<String> map = new ArrayList<String>();
    childs.add(new ArrayList<ArrayList<String>>());
    ArrayList<Integer> map1 = new ArrayList<Integer>();
    ArrayList<Integer> map3 = new ArrayList<Integer>();

    for(int i=0;i<demo.length();i++)

    {
        JSONObject movie = demo.getJSONObject(i);
           ctName = movie.getString("ctName");
           ctParent= movie.getInt("ctParent");
           int ctLevel = movie.getInt("ctLevel");
           ctCategoryId=movie.getInt("ctCategoryId");
           map.add(ctName);
          map1.add(ctParent);
          // map1.add(ctLevel);
           map3.add(ctCategoryId);

          System.out.println("Map1-===>"+map);
           System.out.println("Map3-===>"+map3);

          if(ctParent==0)
          {
           groups.add(ctName);
          }

           if(ctParent!=0)
           {
             int ctP= movie.getInt("ctParent");
             System.out.println("ctp-->"+ctP);
             for(int j=0;j<demo.length();j++)
             {

             if(ctP==ctCategoryId)
             {
                 System.out.println("matched--"+ctP+"=="+ctCategoryId);
                childs.add(new ArrayList<ArrayList<String>>());
                childs.get(i).add(new ArrayList<String>());
                 childs.get(i).get(j).add(ctName);

             }

           }
           } 
```

我想将孩子放在相应的父母身上。在上面的代码中，它将只返回父母。孩子不会被展示，也不会在各自的父母之下。

我想将类别 ID 与父级进行比较，并将所有数据相互放置。最后它返回到 Expandable List 类。

所以任何人都可以帮助我。如何执行此操作。??????????

# html - 定位文本输入？

> ID：10348892
> 
> 赞同：0
> 
> 时间：2012-04-27T10:21:05.863
> 
> 标签：html, css, forms

我没有经常使用表格，所以我不确定这里发生了什么。我试图将文本输入与按钮内联，但它似乎不起作用。你可以在这里看到我在做什么：http: [//jsfiddle.net/gagalug/BEBAH/](http://jsfiddle.net/gagalug/BEBAH/)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:26:56.247

添加

```
input { vertical-align: middle; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T10:27:50.920

将此行添加到您的样式中：

```
img, input[type=image] {vertical-align: bottom;} 
```

这将防止图像和图像输入的基线问题。即刻解决您的问题。

你知道，更多的人真的应该知道这件事。即使是编写像 QuirksMode 这样大的网站的人也不知道这个事实。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T10:28:26.293

有多种方式。

1.  相对于父 div 的定位和相对于子级的绝对定位。

2.  垂直对齐：中间；对于两个输入

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T10:25:10.173

嘿，我想你想要这个

选项您只需定义您的 **垂直对齐：顶部；**

```
#text{
    height: 40px;
    vertical-align: top;

} 
```

现场演示[http://jsfiddle.net/BEBAH/4/](http://jsfiddle.net/BEBAH/4/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T10:45:34.207

如下修改您的 CSS。

```
div{
        border: 1px solid black;
        width: 500px;
        height: 50px;
        float:left;
    }
    #text{
        height: 40px;
        top: 0px;
        float:left;
    } 
```

# iphone - 如何使用 ios5 从 Twitter 退出？

> ID：10348898
> 
> 赞同：0
> 
> 时间：2012-04-27T10:21:19.020
> 
> 标签：iphone, twitter, logout, ios5

我已经使用 Twitter 框架从 iphone 应用程序登录和推文。现在我想在一个开关关闭时注销，那么我该怎么做呢？任何人都可以帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:43:53.537

这`Twitter.framework`是 Twitter 的系统范围实现，您无法注销用户，因为用户仅使用您的应用程序登录 Twitter，但有漏洞系统。

# jquery-mobile - 在jquery mobile中对div应用过渡效果

> ID：10348902
> 
> 赞同：0
> 
> 时间：2012-04-27T10:21:51.803
> 
> 标签：jquery-mobile

在jquery mobile中使用导航栏显示/隐藏div时如何在div上应用过渡效果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:47:04.300

像这样？

```
<a href="#div2" data-transition="fade"> 
```

# java - 在JAVA中合并两个URL

> ID：10348903
> 
> 赞同：2
> 
> 时间：2012-04-27T10:22:02.170
> 
> 标签：java, url, browser, rfc

我将两个 url 与以下代码合并。

```
String strUrl1 = "http://www.domainname.com/path1/2012/04/25/file.php";
   String arg = "?page=2";
   URL url1;
    try {
        url1 = new URL(strUrl1);
        URL reconUrl1 = new URL(url1,arg);
        System.out.println(" url : " + reconUrl1.toString());
    } catch (MalformedURLException ex) {
        ex.printStackTrace();
    } 
```

我对结果感到惊讶： http: [//www.domainname.com/path1/2012/04/25/?page=2](http://www.domainname.com/path1/2012/04/25/?page=2)

我希望它是（浏览器做什么）：[http ://www.domainname.com/path1/2012/04/25/file.php?page=2](http://www.domainname.com/path1/2012/04/25/file.php?page=2)

关于构造函数 URL（URL 上下文，字符串规范）的 javadoc 解释它应该尊重 RFC。

我做错了什么？

谢谢

更新 ：

```
This is the only problem I encountered with the fonction.
The code already works in all others cases, like browser do
  "domain.com/folder/sub" + "/test" -> "domain.com/test"
  "domain.com/folder/sub/" + "test" -> "domain.com/folder/sub/test"
  "domain.com/folder/sub/" + "../test" -> "domain.com/folder/test"
  ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:24:45.403

您始终可以先合并字符串，然后根据合并的字符串创建 URL。

```
 StringBuffer buf = new StringBuffer();
  buf.append(strURL1);
  buf.append(arg);
  URL url1 = new URL(buf.toString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T10:25:22.903

尝试

```
String k = url1+arg;
URL url1;
    try {
        url1 = new URL(k);
        //URL reconUrl1 = new URL(url1,arg);
        System.out.println(" url : " + url1.toString());
    } catch (MalformedURLException ex) {
        ex.printStackTrace();
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T10:29:18.617

我没有通读[RFC](http://www.w3.org/2002/11/dbooth-names/rfc2396-numbered_clean.htm)，但*上下文（如 Java Doc for* [URL](http://docs.oracle.com/javase/6/docs/api/java/net/URL.html#URL%28java.net.URL,%20java.lang.String%29)中提到的）可能是 URL 的目录，这意味着上下文

```
"http://www.domainname.com/path1/2012/04/25/file.php" 
```

是

```
"http://www.domainname.com/path1/2012/04/25/" 
```

这就是为什么

```
new URL(url1,arg); 
```

产量

```
"http://www.domainname.com/path1/2012/04/25/?page=2" 
```

“解决方法”显然是自己连接部分，使用`+`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T10:30:17.030

你在这里使用 URL 的构造函数，它的参数为`URL(URL context, String spec)`. 因此，您不要使用 URL 而是使用字符串传递 php 页面。context 需要是目录。正确的方法是

```
 String strUrl1 = "http://www.domainname.com/path1/2012/04/25";
  String arg = "/file.php?page=2";
  URL url1;
  try {
    url1 = new URL(strUrl1);
    URL reconUrl1 = new URL(url1,arg);
    System.out.println(" url : " + reconUrl1.toString());
 } catch (MalformedURLException ex) {
    ex.printStackTrace();
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T10:31:50.863

尝试这个

```
String strUrl1 = "http://www.domainname.com/path1/2012/04/25/";
       String arg = "file.php?page=2";
       URL url1;
        try {
            url1 = new URL(strUrl1);
            URL reconUrl1 = new URL(url1,arg);
            System.out.println(" url : " + reconUrl1.toString());
        } catch (MalformedURLException ex) {
            ex.printStackTrace();
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T10:38:28.720

当您阅读 java 文档时，它提到了指定 URL 的上下文，
即域和路径：

```
"http://www.domainname.com"  +  "/path1/2012/04/25/" 
```

Where`"file.php"`被认为是属于上述上下文的文本。
这个双参数重载构造函数使用 URL 的上下文作为基础，并添加第二个参数来创建一个完整的 URL，这不是您需要的。

因此最好将这两个部分添加到 String 中，然后从中创建 URL：

```
 String contextURL = "http://www.domainname.com/path1/2012/04/25/";
   String textURL = "file.php?page=2";
   URL url;
    try {
        url = new URL(contextURL);
        URL reconUrl = new URL(url, textURL);
        System.out.println(" url : " + reconUrl.toString());
    } catch (MalformedURLException murle) {
        murle.printStackTrace();
    } 
```

# node.js - 如何知道 node.js 中的请求是 http 还是 https

> ID：10348906
> 
> 赞同：66
> 
> 时间：2012-04-27T10:22:06.260
> 
> 标签：node.js, express

我正在使用 nodejs 和 expressjs。我想知道`request.headers.protocol`clientRequest 对象中是否有类似的东西。我想为 Web 链接构建 baseUrl。因此，如果请求是通过 https 完成的，我想在所有链接中保留 https。

```
 var baseUrl = request.headers.protocol + request.headers.host; 
```

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-04-27T15:15:20.907

**编辑：**对于 Express，它更安全，建议使用[`req.secure`](http://expressjs.com/en/api.html#req.secure)（正如@Andy 在下面推荐的那样）。虽然它使用类似的实现，但它对将来的使用是安全的，并且它还可以选择支持`X-Forwarded-Proto`标头。

话虽如此，对于您的用例，使用 Express 的属性会更快[`req.protocol`](http://expressjs.com/en/api.html#req.protocol)，即`http`or `https`。但是请注意，对于传出链接，您只需参考`//example.com/path`，浏览器将使用当前协议。（另请参阅[我可以将所有 http:// 链接更改为 //？](https://stackoverflow.com/questions/4831741/can-i-change-all-my-http-links-to-just)）

`Request`对于没有 Express的节点对象：

~~它在`req.connection.secure`（布尔值）中。~~

**编辑：** 对于**Node 0.6.15+** ，API 已更改：

HTTPS 连接具有`req.connection.encrypted`（包含有关 SSL 连接信息的对象）。HTTP 连接没有`req.connection.encrypted`.

另外（来自[文档](http://nodejs.org/api/http.html#http_request_connection)）：

> 使用 HTTPS 支持，使用 request.connection.verifyPeer() 和 request.connection.getPeerCertificate() 获取客户端的身份验证详细信息。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2013-05-06T19:16:51.877

`req.secure`是`req.protocol === 'https'`应该是你要找的东西的简写。

如果您在代理后面运行您的应用程序，请启用“信任代理”以`req.protocol`反映用于在客户端和代理之间进行通信的协议。

`app.enable('trust proxy');`

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-27T10:36:42.137

您无需在 URL 中指定协议，因此您无需为这个问题烦恼。

如果您使用`<img src="//mysite.comm/images/image.jpg" />`浏览器，如果页面以 HTTP 提供，则浏览器将使用 HTTP；如果页面以 HTTPS 提供，则将使用 HTTPS。请参阅另一个线程中[的@Jukka K. Korpela 解释](https://stackoverflow.com/questions/8951423/html-links-without-http-protocol)。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-02-21T04:09:10.183

对于纯 NodeJS（这在本地工作并部署，例如在 Nginx 后面）：

```
function getProtocol (req) {
    var proto = req.connection.encrypted ? 'https' : 'http';
    // only do this if you trust the proxy
    proto = req.headers['x-forwarded-proto'] || proto;
    return proto.split(/\s*,\s*/)[0];
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-10-10T17:27:19.677

如果您想知道请求是 http 还是 https，请在您的代码中使用：

```
req.headers.referer.split(':')[0]; 
```

这将返回 req 是 http 还是 https。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-12-17T18:25:52.317

这对我有用：

```
req.headers['x-forwarded-proto'] 
```

希望这有帮助，

乙

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-05-23T21:29:02.017

这对我有用：

```
getAPIHostAndPort = function(req, appendEndSlash) {
    return (req.connection && req.connection.encrypted ? 'https' : 'http') + '://' + req.headers.host + (appendEndSlash ? '/' : '');
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-02-11T01:04:24.847

如果您正在使用请求模块并且例如想知道某些 www 使用什么协议，您可以使用：**response.request.uri.protocol**

```
request(YOUR_TARGET, function(error, response, body){
    if (error){
        console.log(error);
    }
    else {
        console.log(response.request.uri.protocol); // will show HTTP or HTTPS
    }
}); 
```

如果您需要用户协议，请使用**request.headers.referer.split(':')[0];** 就像*@Harsh*给你的一样。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-07-28T03:54:57.193

如果您使用的是 Nginx 等代理服务器，您应该`proxy_set_header X-Forwarded-Proto https;`在其配置文件中进行设置，因此如果您使用的是`TSL`express，则可以识别`https`为`req.headers['x-forwarded-proto']`value 或`true`for`req.secure`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-11-05T11:11:43.803

如果要查找请求协议字符串：http 或（对于 TLS 请求）https 只需使用

```
 req.protocol 
```

快递文档：[https ://expressjs.com/en/4x/api.html#req.protocol](https://expressjs.com/en/4x/api.html#req.protocol)

# android - 如何按 ListActivity 上的对象属性对 JSON 数组进行排序？

> ID：10348907
> 
> 赞同：1
> 
> 时间：2012-04-27T10:22:23.950
> 
> 标签：android, android-listview

我实现了一个 JSONArray 来填充 ListView。现在我想按其名称（即其对象属性）的字母顺序对 ListActivity 上的项目进行排序。我怎样才能解决它？

下面是我用来实现 ListView 的 Object 类：

```
public class VideoLocation {

    public String deleted_at = null;
    public int documentary_video_length = -1;
    public int id = -1;
    public double latitude = 0d;
    public double longitude = 0d;
    public int position = -1;
    public String updated_at = null;
    public String name = null;
    public String text = null;
    public String documentary_video_url = null;
    public String documentary_thumbnail_url = null;
    public String audio_text_url = null;
    public Footage[] footages = null;

    public VideoLocation(){

    } 
```

这是 ListActivity 类：

```
 public class ProjectsList extends ListActivity implements OnItemClickListener, VideoLocationReceiver{
        /** Called when the activity is first created. */

        private VideoLocation[] videoLocations = null;
        private VideoLocationAdapter videoLocationAdapter = null;

        @Override
        public void onCreate(Bundle savedInstanceState) {

            super.onCreate(savedInstanceState);
            setContentView(R.layout.projects_list);

            doSync();
            //storeSharedPrefs();
            ListView lv = getListView();
            lv.setOnItemClickListener(this);

            videoLocationAdapter = new VideoLocationAdapter(ProjectsList.this, 
                    R.layout.listitems, 
                    new VideoLocation[0]);
            lv.setAdapter(videoLocationAdapter);

            //CREATE VideoLocation[] from Database!

            JsonDB dbhelper = new JsonDB(ProjectsList.this);
            SQLiteDatabase db = dbhelper.getWritableDatabase();

            db.beginTransaction();
            videoLocations = dbhelper.getVideoLocations(db);
            db.setTransactionSuccessful();//end transaction
            db.endTransaction();
            db.close();
        }

        @Override
        public void onResume(){
            super.onResume();
            DBSync.setVideoLocationReceiver(ProjectsList.this);
        }

        @Override
        public void onPause(){
            super.onResume();
            DBSync.setVideoLocationReceiver(null);
        }

        @Override
        public void onItemClick(AdapterView<?> l, View v, int position, long id) {
            Intent listIntent = new Intent(this, ProjectDetailsActivity.class);

            VideoLocation vidLocation = videoLocations[position];
        listIntent.putExtra("documentary_video_url",vidLocation.documentary_video_url);
            startActivity(listIntent);

        }
protected void storeSharedPrefs() {
        final SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
        if (prefs.getBoolean("first-time", true)) {
            doSync();
            prefs.edit().putBoolean("first-time", false).commit(); // record the fact that the app has been started at least once
        }
    } 

    void doSync() {
        Intent serviceIntent = new Intent(this, DBSync.class);
        startService(serviceIntent);
    }

    public class VideoLocationAdapter extends ArrayAdapter<VideoLocation> {
        public ImageLoader imageLoader; 
        ImageLoader loader = null;

        public VideoLocationAdapter(Context context, int resource, VideoLocation[] vidLocs) {
            super(context, resource, vidLocs);
            ProjectsList.this.videoLocations = vidLocs;       
            loader = new ImageLoader(context);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {

            if(convertView == null){
                convertView = ProjectsList.this.getLayoutInflater().inflate(R.layout.listitems, null, true);
            }

            VideoLocation vidLocation = videoLocations[position];
            ImageView v = (ImageView)convertView.findViewById(R.id.image);
            String url = vidLocation.documentary_thumbnail_url;
            v.setTag(url);
            loader.DisplayImage(url, ProjectsList.this, v);
            TextView titleView = (TextView)convertView.findViewById(R.id.txt_title);
            titleView.setText(vidLocation.name);
            return convertView;
        }

        @Override
        public int getCount(){
            return videoLocations==null?0:videoLocations.length;
        }

        @Override
        public VideoLocation getItem(int position){
            return videoLocations[position];
        }

        @Override
        public boolean hasStableIds(){
            return true;
        }

        @Override
        public boolean isEnabled(int position){
            return true;
        }

        @Override
        public long getItemId(int position){
            return videoLocations[position].id;
        }

        public void setVideoLocationData(VideoLocation[] newData){
            ProjectsList.this.videoLocations = newData;
            VideoLocationAdapter.this.notifyDataSetChanged();
        }
    }

    @Override
    public void receivedVideoLocationData(VideoLocation[] vidLocs) {
        final VideoLocation[] locs = vidLocs;

        if (vidLocs==null) {
            runOnUiThread(new Runnable() {

                @Override
                public void run() {

                    //show popup and inform about missing network
                }
            });
        }else{
            runOnUiThread(new Runnable() {

                @Override
                public void run() {

                    videoLocationAdapter.setVideoLocationData(locs);
                    Log.d("ProjectsList", "updating video locations...");
                }
            });
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T10:24:50.483

使用[Collections.sort](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)。解析你的 json 并用 VideoLocation 的实例填充一个向量或一个 ArrayList（我认为）。然后调用 Collections.sort。

编辑：

```
Collections.sort(youarrayList, new Comparator<VideoLocation>() {

            @Override
            public int compare(VideoLocation lhs, VideoLocation rhs) {
                return lhs.name.compareTo(rhs.name);
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:32:07.437

在`getVideoLocations(db)`中，您可以告诉您的查询返回使用**ORDER BY [Column]排序的结果**

# c++ - Windows 7 中的命名管道

> ID：10348909
> 
> 赞同：0
> 
> 时间：2012-04-27T10:22:31.677
> 
> 标签：c++, visual-c++, windows-7, named-pipes

我正在尝试创建一个命名管道。服务器将创建管道并将数据写入其中，客户端连接到该管道并读取数据。当我将管道名称作为默认名称时，它对我有用

```
\\\\.\\pipe\\mynamedpipe 
```

但是当我试图给我的机器它不工作..

```
\\\\MyMachine01\\pipe\\mynamedpipe 
```

这是允许的吗？现在我的客户端和服务器程序都在本地机器上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T10:25:58.447

根据[管道名称](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365783(v=vs.85).aspx)文档：

> 管道服务器无法在另一台计算机上创建管道，因此 CreateNamedPipe 必须使用句点作为服务器名称，如下例所示。
> 
> ```
> \\.\pipe\PipeName 
> ```

不过，您应该能够为“客户”使用限定名称。

# list - 将对象添加到播放框架中的列表

> ID：10348917
> 
> 赞同：0
> 
> 时间：2012-04-27T10:23:18.973
> 
> 标签：list, jpa, playframework

我是新手，每当我使用 list.add(Object) 到列表并打印列表的大小时，它仍然是 0 ！！！

我的方法是点赞一个教程，它会检查登录的用户之前是否喜欢过这个教程，如果是的话，它会将教程的likeCount 加一，并将教程添加到用户的点赞列表中。如果不是，则说明他已经喜欢了。由于教程没有保存在列表中，我无法检查它是否已经被喜欢！

楷模：

```
 @Entity
    public class RegisteredUser extends Model {
public String name;
    @ManyToMany 
public List<Tutorial> contributedTutorials;

     public RegisteredUser(String name) {
     this.name = name;
     this.likeList = newArrayList<Tutorial>();
     this.save();
     }
     }

    @Entity
    public class Tutorial extends Model {
public  String Title;
    public int likeCount;
    public Tutorial(String title) {
    this.title = title;
    this.likeCount = 0;
    } 
```

* * *

控制器：公共教程扩展控制器 { public static void likeTutorial() {

```
 if (session.get("RegisteredUserId") != null && session.get("tutID") != null ) {
    {   
        long uId = Long.parseLong(session.get("RegisteredUserId"));
        RegisteredUser user = RegisteredUser.findById(uId);
        long tId = Long.parseLong(session.get("tutID"));
        Tutorial tut = Tutorial.findById(tId);
        int x = tut.likeCount;
        x++;
        if (!(user.likeList.contains(tut))) 
            // to check that this user didn't like this tut before
        { 
            Tutorial.em().createQuery("update Tutorial set likeCount ="+ x +" where id=" +tId).executeUpdate();
            tut.refresh();
            user.updateLikeList(tut); // THIS IS NOT WORKING!!!
            renderText("You have successfully liked this Tutorial " + user.likeList.size());
        } 
        }
        renderText("Opps Something went Wrong!!");
    }
}
} 
```

风景 ：

```
 <a href="@{Tutorials.likeTutorial()}">Like </a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T17:49:33.827

我做了你上面提到的所有调整

以及 RegisteredUser 模型中的映射

```
@ManyToMany
public List<Tutorial> likeList; 
```

我已将映射添加到教程模型

```
 @ManyToMany  
    public List<RegisteredUser> likersList; 
```

并调整控制器中的方法如下

```
if (! user.likeList.contains(tut)) {

tut.likeCount++; 
//tut.likersList.add(user); // however this raised an error too! at the next line
tut.save();
//as for the likeCount update, it has worked perfectly, Thank You

// Since it's a ManyToMany relationship, you only need to add it to one list and the other will reflect properly if mappedBy properly 
//I have modified Model Tutorial as shown above and it didn't work too !
user.likeList.add(tut); 
user.save(); // this raised an error!! 

renderText("You have successfully liked this Tutorial " + user.likeList.size()); 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T00:00:19.607

+您不需要在构造函数中调用`this.save()`and `this.likeList = newArrayList<Tutorial>();`。实际上后者在语法上是错误的。

+将教程 ID 作为会话变量传递是非常错误的。您需要将其作为 GET 参数传递给操作。

+将您的支票替换为：

```
// to check that this user didn't like this tut before
if (! user.likeList.contains(tut)) {
    // Tutorial.em().createQuery("update Tutorial set likeCount ="+ x +" where id=" +tId).executeUpdate();
    // tut.refresh();
    // user.updateLikeList(tut); // THIS IS NOT WORKING!!!
    tut.likeCount++;
    tut.save();

    // Since it's a ManyToMany relationship, you only need to add it to one list and the other will reflect properly if mappedBy properly
    user.likeList.add(tut); // note that the example you showed uses contributedTutorials not likeList
    user.save();

    renderText("You have successfully liked this Tutorial " + user.likeList.size());
} 
```

# xml - 属性的 XSLT 排序输出

> ID：10348921
> 
> 赞同：1
> 
> 时间：2012-04-27T10:23:29.257
> 
> 标签：xml, xslt

我有以下示例 XML：

```
<Table>
  <Row Position="0" Name="FName" />
  <Row Position="1" Name="LName" />
  <Row Position="2" Name="Email" />
  <Row Position="3" Name="Phone" />
  <Row Position="4" Name="Address" />
</Table> 
```

我希望能够将其读入以下输出：

```
Row: FName
Row: LName
Row: Email
Row: Phone
Row: Address 
```

但是，此列表的排序应基于`Position`行的属性，以便可以通过简单地更改数字排序来更改输出顺序。

我想这将需要一个或两个变量来完成，但不能完全确定执行。

干杯

例子：

输入

```
<Table>
  <Row Position="0" Name="FName" />
  <Row Position="1" Name="LName" />
  <Row Position="4" Name="Email" />
  <Row Position="2" Name="Phone" />
  <Row Position="3" Name="Address" />
</Table> 
```

输出

```
Row: FName
Row: LName
Row: Phone
Row: Address
Row: Email 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:36:30.680

```
<xsl:template match="Table">
  <xsl:apply-templates select="Row">
    <xsl:sort select="@Position" data-type="number"/>
  </xsl:apply-templates>
</xsl:template>

<xsl:template match="Row">
  <xsl:text>Row: </xsl:text>
  <xsl:value-of select="@Name"/>
  <xsl:text>&#10;</xsl:text>
</xsl:template> 
```

# ruby-on-rails - Rails + Faye 是一个好的 RIA 平台吗？还是我需要原始 node.js？

> ID：10348922
> 
> 赞同：2
> 
> 时间：2012-04-27T10:23:30.533
> 
> 标签：ruby-on-rails, node.js, faye

Faye 是“简单”的消息发布/接收系统，还是您可以使用 Rails/Faye 组合构建完整的丰富应用程序？

我网站的一部分是幻想联盟选秀室。

房间本身需要被编程以在特定的时间间隔做某些事情；例如，让每个队长有 15 秒的时间从列表中为他的球队挑选一名球员，然后再转到下一名球员。

房间还需要保护通道；只有联盟中的那些球队才能进入房间，而且只能在特定的日期/时间。

我可以在 Faye 设置中对所有这些操作进行编程吗？还是我最好将它内置在 Node.js 中作为与我的 Rails 应用程序通信的实时应用程序？

需要朝着正确的方向轻推...

# android - 单一形状中的两个纹理重叠

> ID：10348926
> 
> 赞同：0
> 
> 时间：2012-04-27T10:23:53.760
> 
> 标签：android, opengl-es, texture-mapping

我有一个带纹理的矩形。这个形状是一张扑克牌。

就像一张扑克牌一样，我想在正面使用纹理，而在背面使用不同的纹理。

我尝试过使用纹理组合器（glTexEnvf），但这不是我的任务所需要的。旋转形状时，两种纹理相互混合，不会相互重叠。

有没有办法在一个形状（正方形或矩形）中重叠两个不同的纹理（正面和背面）？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:50:18.830

您可以使用着色器轻松轻松地做到这一点。在着色器中，使用转换为相机坐标的法线，并根据法线是指向还是远离，从 2 个纹理之一中进行选择。

# streaming - 数据流中的近重复检测

> ID：10348929
> 
> 赞同：6
> 
> 时间：2012-04-27T10:24:10.943
> 
> 标签：streaming, duplicates, filtering, bloom-filter

我目前正在研究生成大量文本内容的流式 API。正如预期的那样，API 给出了很多重复数据，我们也有过滤接近重复数据的业务需求。

我对数据流中的重复检测进行了一些研究，并阅读了有关[Stable Bloom Filters](http://www.google.com/url?sa=t&source=web&cd=2&ved=0CDQQFjAB&url=http://webdocs.cs.ualberta.ca/~drafiei/papers/DupDet06Sigmod.pdf&ei=d3CaT8HwGcm3rAfi7qyfDg&usg=AFQjCNFhc0-xxW1NNn4tVDyQmavxLEr6pw)的信息。稳定布隆过滤器是用于在数据流中进行重复检测的数据结构，具有误报率的上限。

但是，我想识别近似重复，我还查看了用于最近邻问题和近似重复检测的散列算法，如 LSH 和 MinHash。

我有点卡住并寻找有关如何进行的指示以及我可以查看的文件/实施？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T15:43:59.523

1.  首先，将文本规范化为所有小写（或大写）字符，用空格替换所有非字母，将所有多个空格压缩为一个，删除前导和尾随空格；为了速度，我会在一次文本中执行所有这些操作。接下来获取`MD5`结果字符串的哈希（或更快的东西）。对表中的哈希（作为两个 64 位整数）进行数据库查找`MD5`，如果存在，则*完全*重复，如果不存在，则将其添加到表中并继续下一步。您将希望根据时间或内存使用情况来老化旧哈希。

2.  要查找接近重复的规范化字符串，需要将其转换为潜在的签名（子字符串的哈希），请参阅 Greg Linden 的`SpotSigs`论文和[博客文章](http://glinden.blogspot.com/2008/08/clever-method-of-near-duplicate.html)。假设例程`Sigs()`对给定字符串执行此操作，即给定标准化字符串`x`，`Sigs(x)`返回一个小的 (1-5) 64 位整数集。您可以使用`SpotSigs`算法之类的方法来选择文本中的子字符串作为签名，但是如果您对数据有所了解，则使用自己的选择方法可能会更好。您可能还想查看 simhash 算法（代码在[此处](http://code.google.com/p/simhash/)）。

3.  鉴于`Sigs()`有效地找到附近重复的问题通常称为[集合相似性连接](http://bit.ly/JPTZ2I)问题。该论文概述了一些启发式方法，以减少需要与该方法`SpotSigs`进行比较的新集合的数量。`simhash`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-18T05:25:34.517

[http://micvog.com/2013/09/08/storm-first-story-detection/](http://micvog.com/2013/09/08/storm-first-story-detection/)有一些不错的实现说明

# wcf - 如何配置我的应用程序以使用由 Visual Studio 发布到 IIS 的 WCF 服务？

> ID：10348935
> 
> 赞同：0
> 
> 时间：2012-04-27T10:24:47.720
> 
> 标签：wcf, iis

我有一个 Visual Studio 解决方案，其中有 2 个项目。一个是 WCF 库，另一个使用它。客户端的配置文件如下所示：

```
<endpoint address="http://localhost:8732/MyService/" binding="wsHttpBinding" 
            bindingConfiguration="WSHttpBinding_IMyService" 
            contract="MyServiceReference.IMyService" name="WSHttpBinding_IMyService">
</endpoint> 
```

这在开发阶段工作正常，当我总是可以在 Visual Studio 中启动服务时。但最后我必须部署服务，我使用 Visual Studio 的“发布”来做到这一点。发布后，我可以访问默认的 WCF 服务页面，通过`http://localhost/MyServiceImpl.svc`该页面指示服务已成功托管，正如[本教程](http://msdn.microsoft.com/en-us/library/aa751792.aspx)所建议的那样。

现在的问题是，如何修改客户端的配置文件以适应新的服务地址？

谢谢！

# svn - 提交后的空日志

> ID：10348937
> 
> 赞同：4
> 
> 时间：2012-04-27T10:24:53.203
> 
> 标签：svn

创建一个新的 svn-depot 并提交一个文件后，我得到一个空日志。我做了以下事情：

```
$ mkdir tmp
$ cd tmp
$ svnadmin create depot
$ # copy empty depot to the work repo
$ svn co file:///home/antoras/dev/java/tmp/depot/ work
$ cd work
$ touch test
$ svn add test
$ svn commit -m "fist commit"
$ svn log 
```

在此之后，我得到的唯一输出是带有`-`-signs 的单行。但我想要提交信息。我做错了什么以及如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T07:44:46.570

尝试`svn log -r HEAD:1`或`svn up && svn log`代替。如果没有修订参数，`svn log`则显示工作目录（或指定路径）的修订版本的日志。之后`svn commit`，已提交文件的本地修订版被更新 - 但工作目录仍然具有先前的修订版。您可以使用 来检查此行为`svn info`。在提交操作后尝试以下命令：

```
svn info . test 
```

# jquery - JVectorMap 的地图？

> ID：10348938
> 
> 赞同：5
> 
> 时间：2012-04-27T10:24:57.247
> 
> 标签：jquery, asp.net, map, svg, jvectormap

我正在尝试创建一个全球地图，我可以点击一个国家并重定向到另一个地图，这是我点击的那个国家的地图。我知道如何做到这一点，但我不知道在哪里可以获得所有国家的地图或如何创建这些地图。我只有美国和德国的地图。提前致谢。！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:43:15.633

here you can find several maps: [http://jvectormap.com/maps/world/europe/](http://jvectormap.com/maps/world/europe/)

**World** Europe Whole World

**Countries** Argentina Australia Austria Belgium Canada China Colombia Denmark France Germany India Italy Netherlands New Zealand Norway Philippines Poland Portugal South Africa Spain Sweden Switzerland Thailand Regions Thailand United Kingdom USA Venezuela

**Cities** Chicago New York City

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T06:55:57.677

更多地图可从新的 jVectorMap 站点[jvectormap.com 获得](http://jvectormap.com)。

# php - CSV 文件上传问题

> ID：10348939
> 
> 赞同：0
> 
> 时间：2012-04-27T10:24:58.693
> 
> 标签：php

我正在尝试使用 php 中的文件上传器控件上传 CSV 文件，如果文件大小超过 10 MB，它不会被上传，它只会挂起页面执行。我已经设定

> ini_set("upload_max_filesize", "50M"); ini_set("post_max_size", "50M");

在页面上，我仍然没有运气。如果我上传的文件最大为 8 MB，它的工作正常。我对为什么问题仍然存在感到困惑，我在同一页面上做了与文件大小上传相关的设置。请帮我。

提前致谢，

以下是我的 PHP 代码

```
<?php

  set_time_limit(0); ini_set('display_errors', 1); ini_set( "upload_max_filesize", "100M" );   ini_set( "post_max_size", "100M" );

ini_set( "session.save_handler", "files" ); session_start(); header ('Last-Modified: '.gmdate("D, d M Y H:i ").' GMT');   header ('Expires: '.gmdate("D, d M Y H:i ").' GMT');   header ('Cache-Control: no-cache, must-revalidate');   header ('Pragma: no-cache');

if ($_FILES['import']['error'] == UPLOAD_ERR_OK )           {
            $tmpName = $_FILES['import']['tmp_name'];
            $csvName = $_FILES['import']['name'];
            $mime = $_FILES['import']['type'];
            $validMimes = array('text/csv');

            if(!strpos($csvName, '.csv'))
            {
                $errMsg = ' [' . $csvName . '] is INVALID csv file (<i>csv only</i>)';
            }

            if ( is_uploaded_file($tmpName) && !isset($errMsg) ) // upload photo file then save author if uploaded file is VALID
            {
                // upload photo to server
                $filename = 'uploads/products/';

                $pathParts = pathinfo($csvName);

                $photoFile = _generateUniquePhoto($pathParts['extension']);

                //move_uploaded_file($tmpName, $filename . $photoFile);

                //chmod($filename . $photoFile, 0777);

                // save to database
                $fullfilename = $filename.$photoFile;
                //$this->data['University']['add_logo'] = $photoFile;

                $ftp_server = "XXXXX";
                $ftp_user_name = "XXXX";
                $ftp_user_pass = "XXXXX";

                // set up basic connection
                $conn_id = ftp_connect($ftp_server); 

                // login with username and password
                $login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass); 

                // check connection
                if ((!$conn_id) || (!$login_result)) 
                { 
                       echo "FTP connection has failed!";
                       echo "Attempted to connect to $ftp_server for user $ftp_user_name"; 
                       exit; 
                } else 
                {
                       //echo "Connected to $ftp_server, for user $ftp_user_name";
                }

                // upload the file
                $destination_file1 = "httpdocs/volhub/client/$fullfilename";
                $sourcefile1 = "$tmpName";
                $upload = ftp_put($conn_id, $destination_file1, $sourcefile1, FTP_BINARY);  // line 30

                // check upload status

                ftp_close($conn_id); } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:29:58.153

您不能修改这些设置，`ini_set()`因为它们是[`PHP_INI_PERDIR`](http://www.php.net/manual/en/configuration.changes.modes.php).

您必须在 php.ini 本身或使用（假设为 Apache）`.htaccess`文件中更改它们。当您的脚本开始执行并被`ini_set()`调用时，PHP 已经决定接受或拒绝该请求。

有关使用 更改设置的更多信息，[请参见此处](http://www.php.net/manual/en/configuration.changes.php)`.htaccess`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:27:53.853

我也有这个，但找不到解决方案，过了一段时间我决定使用具有“分块”功能的 javascript 上传器。[您可以在plupload.com](http://www.plupload.com)上找到我正在使用的那个。在我看来，这很容易使用。

# c - C中的套接字和线程

> ID：10348942
> 
> 赞同：0
> 
> 时间：2012-04-27T10:25:14.710
> 
> 标签：c, sockets

我有以下代码：

该文件是`principal.c`它具有函数 main 和其他方法。

在 main() 中：

```
connectAll(&NUM_THREADS);
printf("TOTAL clients that to connect %d\n",NUM_THREADS);

pthread_t thread[NUM_THREADS];
pthread_attr_t attr;

/* Initialize and set thread detached attribute */
pthread_attr_init(&attr);
pthread_attr_setdetachstate(&attr, PTHREAD_CREATE_JOINABLE);
paramThread params[NUM_THREADS];

  for(t=0;t<NUM_THREADS;t++)
  {

    printf("What's IP [%s] to connected now? %d\n",regIPConnected[t].ip,regIPConnected[t].idSocket);

    params[t].idSocket=regIPConnected[t].idSocket;
    params[t].idThread=t;

    rc = pthread_create(&(thread[t]), &attr,conectaThread, &(params[t]));
    if (rc) 
    {
      printf("ERROR; return code from pthread_create() is %d\n", rc);
    } 
  }//END FOR

  /* Free attribute and wait for the other threads */
  pthread_attr_destroy(&attr);

  for(t=0; t<NUM_THREADS; t++) 
  {
    rc = pthread_join(thread[t], &status);
    if (rc<0) {
      printf("ERROR; return code from pthread_join() is %d\n", rc);
    }
    printf("Main: completed join with thread %ld having a status of %ld\n",t,(long)status);
  }//END FOR

  printf("Main: program completed. Exiting.\n");
  pthread_exit(NULL);
}

void *conectaThread (void *arg){

  paramThread* params = (paramThread*) &arg; 

  int idSocket=params->idSocket;
  long tid=params->idThread;

  printf("Thread %ld starting...\n",tid);
  printf ("ID SOCKET THREAD %d\n",idSocket);
  while (1) /* Run forever */
  {

    int state=readSocket(idSocket,"status\n");

...
} 
```

paramThread 的结构是：

```
typedef struct
{
  int idSocket;
  long idThread;
  void (*pf)(int, long);
} paramThread; 
```

还有另一个文件，叫做 socket.c

```
int openSocketInet (char *servIP,unsigned short servPort)
{
  int optval,statusSocket=0;
  socklen_t optlen = sizeof(optval);

  /* Create the socket, using TCP */

  socketClient = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP);
  printf("OK/NOK socket %d",socketClient);
  if (socketClient<0)
  {
    switch (errno) 
    {

      /*differents cases of errno*/
      default:  
    perror("socket()");
    statusSocket= -1;
    }//END SWITCH
  }//END IF

    /* Check the status for the keepalive option */
  if(getsockopt(socketClient, SOL_SOCKET, SO_KEEPALIVE, &optval, &optlen) < 0 && statusSocket==0) {
    statusSocket=checkGET_SETSockOpt(socketClient,1);
    printf("Error getsockopt() is %d\n",statusSocket);
  }//END IF

  printf("SO_KEEPALIVE is %s\n", (optval ? "ON" : "OFF"));

  int fl = fcntl(socketClient, F_GETFL);
  fcntl(socketClient, F_SETFL, fl | O_NONBLOCK);

  /* Set the option active */
  optval = 1; //-->TRUE
  optlen = sizeof(optval);

  if(setsockopt(socketClient, SOL_SOCKET, SO_KEEPALIVE, &optval, optlen) < 0 && statusSocket==0) {
    statusSocket=checkGET_SETSockOpt(socketClient,0);
    printf("Error setsockopt() is %d\n",statusSocket);
  }//END IF

  printf("SO_KEEPALIVE set on socket\n");

  /* Check the status again */
  if(getsockopt(socketClient, SOL_SOCKET, SO_KEEPALIVE, &optval, &optlen) < 0 && statusSocket==0) {
    statusSocket=checkGET_SETSockOpt(socketClient,1);
    printf("Error getsockopt() is %d\n",statusSocket);
  }//END IF

  printf("SO_KEEPALIVE is %s\n", (optval ? "ON" : "OFF"));

  if (connect(socketClient, (struct sockaddr *)&addressServer, sizeof(addressServer)) < 0 && statusSocket==0)
  {
    switch (errno) 
    {
      /*diffents cases of errno to connect()*/
      default:  
    perror("connect()");
    statusSocket= -1;
    }//END SWITCH
   }//END IF

  /* Construct the server address structure */
  bzero(&addressServer, sizeof(addressServer)); /* Hay que poner todo a ceros */

  addressServer.sin_family = AF_INET;           /* Internet address family */
  addressServer.sin_port = htons(servPort); /* puerto en formato de red */

  /* dirección IP en formato de red */
  int errInetAton=inet_aton(servIP, &addressServer.sin_addr);
  if (errInetAton<0 && statusSocket==0) 
  { 
    printf("Fail the conversion of IP\n",servIP);
    perror("inet_aton() Motive");
    statusSocket= -1;
  }//END IF

  printf("The IP %s to connect with sock %d\n",servIP,socketClient);

  //To return identify a socket or  fail
  if (statusSocket<0)
    return statusSocket;
  else
    return socketClient;

} 
```

当我运行结果是：

```
socket(): Success --> to sock 3
SO_KEEPALIVE 关闭
SO_KEEPALIVE 在套接字上设置
SO_KEEPALIVE 开启
连接 sock 3 的 IP xxxx
socket(): Illegal seek --> to sock 4
SO_KEEPALIVE 关闭
SO_KEEPALIVE 在套接字上设置
SO_KEEPALIVE 开启
与 sock 4 连接的 IP yyyy

```

我希望我可以连接到具有相同套接字的不同 ip

* * *

谢谢，问题是另一个：

```
What's IP [x.x.x.x] to connected now? 3
What's IP [y.y.y.y] to connected now? 4
What's IP [z.z.z.z] to connected now? 5

Out for
Thread 5 starting...
ID SOCKET THREAD 5
Method READ! Send to socket id [5] and data is '[status]'
STATUS THREAD 0
Thread 5 starting...
ID SOCKET THREAD 5
Method READ! Send to socket id [5] and data is '[status]'
Thread 5 starting...
ID SOCKET THREAD 5
Method READ! Send to socket id [5] and data is '[status]'
STATUS THREAD 0
Info: (-3.35 dB)
Method WRITE! Send to socket id [5] and data is '[outlevel 0:50
]'
El conector estÃ¡ marcado como no bloqueante y la operaciÃ³n solicitada lo bloquearÃ­a.
Method WRITE! Error send() is 0
Level modify of Vol 50%
Info: (-24.13 dB)
Level modify of Vol 50%
Info: (-52.60 dB)
Method WRITE! Send to socket id [5] and data is '[outlevel 0:50
]'
El conector estÃ¡ marcado como no bloqueante y la operaciÃ³n solicitada lo bloquearÃ­a.
Method WRITE! Error send() is 0
Level modify of Vol 50%
Method READ! Send to socket id [5] and data is '[status]'
hi0!
send(): No route to host
Method READ! Error send() is -1
STATUS THREAD -1
Method READ! Send to socket id [5] and data is '[status]'
# 
```

但是socket号不正确应该是3或者4，下一个代码：

在主（）

```
...
for(t=0;t<NUM_THREADS;t++)
  {

    printf("What's IP [%s] to connected now? %d\n",regIPConnected[t].ip,regIPConnected[t].idSocket); 
```

idSocket=regIPConnected[t].idSocket;

```
 rc = pthread_create(&(thread[t]), &attr,conectaThread,&idSocket);
    if (rc) 
    {
      printf("ERROR; return code from pthread_create() is %d\n", rc);
    } 
  }//END FOR

  printf("Out for\n\n!");

  /* Free attribute and wait for the other threads */
  pthread_attr_destroy(&attr);

  for(t=0; t<NUM_THREADS; t++) 
  {
    rc = pthread_join(thread[t], &status);
    if (rc<0) {
      printf("ERROR; return code from pthread_join() is %d\n", rc);
    }
    printf("Main: completed join with thread %ld having a status of %ld\n",t,(long)status);
  }//END FOR

  printf("Main: program completed. Exiting.\n");
  pthread_exit(NULL); 
```

}

其他代码相同。为什么不获取第一个套接字“3”并获取完成套接字 5？为什么要完成线程？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:32:26.513

尝试注释掉这一行

```
printf("OK/NOK socket %d",socketClient); 
```

看看你能不能走得更远。

有关详细信息，请参阅我对 OP 的评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T20:45:43.503

我没有看到您在套接字初始化函数的任何地方声明 socketClient 。如果它是全局的，它应该由互斥锁或其他一些序列化访问它的机制来保护。

一般来说，

```
socket(PF_INET, SOCK_STREAM, IPPROTO_TCP); 
```

在正常情况下不应该失败。您已经超出了系统 fd/socket 配额，或者更有可能是缺少对套接字的正确访问同步。

此外，如前所述，代码太多，上下文太少。

# c# - 如何将 C# 中的 DateTime.now 转换为 yyyy-mm-dd hh:mm:ss.sssssss？

> ID：10348952
> 
> 赞同：8
> 
> 时间：2012-04-27T10:25:53.203
> 
> 标签：c#, datetime

我正在使用存储过程将日期时间戳存储在我的数据库中，该日期时间戳使用一个调用的函数`sysdatetime()`以及一种`varchar(max)`以这种格式存储在数据库中的类型`yyyy-mm-dd hh:mm:ss.sssssss`。当我创建一个新帖子时它很好，但是当我尝试更新记录时，我必须使用当前的`datetime`. 我试过这个

```
DateTime.Now.ToString(yyyy-mm-dd hh:mm:ss.sssssss) 
```

但我遇到了一个错误。我必须做什么？

Ps：请看下图及错误信息

![在此处输入图像描述](../Images/1578788f2ee486026a146aee0ff452cf.png)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-27T10:31:53.590

我怀疑如果你真的需要字符串表示，你*实际上*想要：

```
string text = DateTime.UtcNow.ToString("yyyy-MM-dd HH:mm:ss.fffffff", 
                                       CultureInfo.InvariantCulture) 
```

注意：

*   除非您*真的*想要当地时间，否则请使用`UtcNow`而不是`Now`. 对于时间戳，您几乎总是需要 UTC。
*   我怀疑你想使用当前文化的时间分隔符，因此规范`CultureInfo.InvariantCulture`
*   “MM”表示月份，“mm”表示分钟
*   “HH”表示 24 小时制，“hh”表示 12 小时制
*   "ff..." 用于几分之一秒

有关自定义日期和时间格式的更多详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)。

但是，我**强烈**建议您尽可能避免字符串转换。为什么您的存储过程不能只使用相关`DateTime`类型而不是字符串表示？然后，您可以将值*作为*a `DateTime`（通过命令参数）传递给存储过程，并且您可以摆脱容易出错的字符串转换混乱。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-27T10:28:30.480

使用此代码：

```
DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss.fffffff") 
```

请参阅此参考：http: [//msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T10:35:22.747

这里有一个小样本：

```
DateTime date3 = new DateTime(2008, 1, 1, 0, 30, 45, 125);
Console.WriteLine("Date with milliseconds: {0:MM/dd/yyy hh:mm:ss.fff}", 
                  date3);
// Displays the following output to the console:
//       Date with milliseconds: 01/01/2008 12:30:45.125 
```

只需将适当数量的“f”放入您的命令中即可完成

# c++ - 切断字符的结尾 *

> ID：10348960
> 
> 赞同：1
> 
> 时间：2012-04-27T10:26:27.200
> 
> 标签：c++, string

所以我有一个字符 *. 我想在最后剪掉一些。所以

```
char *sentence = "My name is Ted"; 
```

我如何切断泰德。我可以将其设为字符串，然后使用子字符串（来自 Java，这就是我的 go to 方法），但 id 而不是那样做。但我不确定如何使用 char *.

编辑：进一步的问题。问题出在一个接受进程的函数中，该函数旨在返回该进程启动时的位置。那很好，我可以得到。但是参数 char *procLocation 是通过引用传递的，因此位置将被发送回那里。

我只能获取包含进程名称的位置。我想切断进程的名称并返回位置。我尝试将位置设为字符串并执行子字符串（字符串 - 进程名称的长度）。没关系。但

```
procLocation = location.c_str(); // where location.substr is the location - the process name 
```

返回错误：错误 C2440: '=' : cannot convert from 'const char *' to 'char *'

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-27T10:28:33.243

由于这是一个字符串文字，因此您无法修改它。

如果你这样做了：

```
char sentence[] = "My name is Ted"; 
```

您可以简单地将之前的字符设置`Ted`为`\0`。

不过，您可能会更好`std::string`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T10:35:43.020

`std::string`您可以使用复制的字符少于您的可用字符的构造函数，而不是切断您的文字`char*`：

```
const char *data = "Hello, Ted!";
string s(data, data+8);
cout << s << endl; 
```

这打印`Hello, T`

这种方法比制作 a`std::string`和获取子字符串更浪费。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T10:58:56.347

对于您最初的问题，当您来自 Java 时，您应该（应该，在[RFC2119](http://www.ietf.org/rfc/rfc2119.txt)的意义上）绝对使用`std::string`：

```
#include <string>
#include <iostream>
using namespace std;

int main(int argc, const char** argv) {
    // copy c-string to std::string
    string arg0 = argv[0];
    cout << arg0 << endl;
    // find last occurrence of path separator
    size_t found = arg0.find_last_of("/\\");
    // split off filename part of string
    cout << arg0.substr(0,found) << endl;
    return 0;
} 
```

此外，您不应该（在 RFC2119 的意义上不应该）将`char`数组声明为`char`指针，而是声明为`char`数组：

```
char[] s0 = "Hello World!"; // <-- is better
char * s1 = "Hello World!"; // <-- avoid this 
```

请参阅[这篇文章](https://stackoverflow.com/a/10268716/1025391)了解为什么这更好的实际原因。它还给出了为什么不修改此类右值字符串的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T11:53:24.713

您已经标记了问题 'c++' 和 'string' 但您说您不想使用`string`and来执行此操作`substr`？不知道为什么会这样。您*应该尽可能*喜欢这些而不是`char*`C 风格的字符串操作函数。

要做到这一点 C++ 方式：

```
string sentence = "My name is Ted";

cout << "\"" << sentence.substr(0, sentence.rfind(' ') ) << "\"" << endl; 
```

尽管您可以（稍微修改您的代码以使您有一个可变字符串）在 C 中执行此操作：

```
char sentence[] = "My name is Ted";
*strrchr(sentence, ' ') = '\0';

printf("\"%s\"\n", sentence); 
```

# ajax - 蛋糕php ajax刷新单独div中的两个元素

> ID：10348967
> 
> 赞同：0
> 
> 时间：2012-04-27T10:27:04.310
> 
> 标签：ajax, cakephp

我有使用 3 个元素的视图书籍/浏览（这些元素不使用任何 requestAction，它们仅依赖于书籍/浏览控制器中设置的变量。每个元素都包含在具有此元素 id 的单独 div 中。现在我想要一个将使用 ajax 2 of 3 个元素刷新的链接。现在我有这样的东西（这是在书籍/浏览视图中）：

```
echo $this->Js->link('Page 2', array('page' => 2), array('update' => '#element_id')); 
```

在书籍/浏览控制器中我有：

```
 ...
            $this->set('books', $books);    
            $this->set('author_keywords',$author_keywords);
            $this->set('title_keywords',$title_keywords);
            $this->set('languages',$languages);
            $this->set('language_id',$language_id);
            $this->set('limit',$limit); 
            $this->set('category_id',$category_id);

            if ($this->RequestHandler->isAjax()) 
            {
                 $this->autoRender = false;
                 $this->layout = 'ajax';
                 $this->render('/elements/element1');
            }
            return; 
```

这很好用， div 'element_id' 中的元素用 elements/element1 的适当内容刷新

现在我想在单个请求中更新单独 div 中的 2 个元素。所以也许有选项可以传递给应该更新的链接 2 个 div - 但是如何使用控制器来渲染这 2 个 div 中的两个元素？

- 编辑

这样做的目的是省略刷新页面上的一个元素，因为它的数据库查询和呈现很慢，而且它不会改变......

- 编辑

好的，我有一个关于如何做到这一点的想法 - 在控制器中，我必须渲染两个元素并将这些元素返回的 html 保存在两个变量中，然后返回 ajax 数据，比如一些包含这些元素 html 的 2 个变量的数组。然后我必须使用JS来更新两个div......但是如何在控制器中做到这一点？

# visual-studio-2010 - 在 VC++ 中使用 createEx 创建窗口时出现警告

> ID：10348974
> 
> 赞同：1
> 
> 时间：2012-04-27T10:27:35.630
> 
> 标签：visual-studio-2010, visual-c++

使用以下代码时，我收到 **警告“警告：窗口创建失败：GetLastError 返回 0x00000579”**

```
CWnd* m_pWndStatic = new CWnd;
m_pWndStatic->CreateEx(0, _T("STATIC"),
                      _T("Hi"), WS_CHILD | WS_VISIBLE | WS_POPUP,
                      CRect(0, 0, 20, 20), this, 1234); 
```

如果我在没有 PopUp 即 WS_POPUP 的情况下调用它，它工作正常。我正在使用VS2010。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T12:56:08.003

```
//
// MessageId: ERROR_INVALID_MENU_HANDLE
//
// MessageText:
//
// Invalid menu handle.
//
#define ERROR_INVALID_MENU_HANDLE        1401L 
```

这会让你走上错误的轨道，真正的问题是你不能创建一个*子窗口*，它也是一个弹出窗口。只有顶层窗口可以是弹出窗口。生成诊断是因为对于弹出窗口，它将您传递的“1234”参数解释为菜单句柄而不是子窗口 ID。

删除 WS_POPUP 样式标志。

# django - Django 表单：为继承模型组织创建/更新表单的最 DRY 方式

> ID：10348987
> 
> 赞同：5
> 
> 时间：2012-04-27T10:28:22.510
> 
> 标签：django, django-forms, django-class-based-views

我有 2 个多表继承模型，如下所示：

```
class Post(models.Model):
    title = models.CharField(max_length=100, blank=True, null=True)
    text = models.TextField(blank=True, null=True)
    location = models.PointField()
    ...

class BlogPost(Post):
    blog = models.ForeignKey(Blog) 
```

同样，BlogPost 的表单类也继承自 PostForm 类：

```
class PostForm(MapModelForm):
    ...
    class Meta:
        model = Post

    def clean(self):
        ...

class BlogPostForm(PostForm):
    class Meta:
        model = BlogPost 
```

我曾经在 2 个非基于类的视图中处理两个模型的创建/更新。为了让事情变得干燥，我决定尝试一下 Django 的基于类的通用视图。但是由于相关文档缺乏示例和用户不友好以及各种方法，我感到困惑。

这个想法是为`Post`模型提供基于类的表单视图并为`BlogPost`. 我应该如何定制视图类？

我应该有单独的 PostCreate 和 PostUpdate 视图吗？然后这两个类几乎相同，根本不是 DRY。

我应该有一个`FormView`用于更新/创建帖子的单曲吗？它适用于创建，但我无法弄清楚如何进行更新。

我应该使用提供的 mixin 类而不是直接从视图继承来构建自定义视图（或用于创建/更新的两个视图）吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T12:12:18.147

你说得对，基于类的视图文档相当原始。毫无疑问，它会有所改进，但目前您需要准备好进行实验并[阅读源代码](https://code.djangoproject.com/browser/django/trunk/django/views/generic/edit.py)。

您正在尝试做两件事：

1.  找到一种使用类来组织视图的好方法。
2.  重构代码以避免重复。

一次解决这些问题很重要。首先找出正确的类层次结构，然后才*弄清楚*如何排除重复。

让我们试一试。您的类层次结构将如下所示：

```
from django.views import generic

class PostCreateView(generic.CreateView):
    form_class = PostForm
    model = Post

class PostUpdateView(generic.UpdateView):
    form_class = PostForm
    model = Post

class BlogPostCreateView(generic.CreateView):
    form_class = BlogPostForm
    model = BlogPost

class BlogPostUpdateView(generic.UpdateView):
    form_class = BlogPostForm
    model = BlogPost 
```

这涉及大量重复，但现在很清楚如何分解其中的一些：

```
from django.views import generic

class PostView(generic.FormView):
    form_class = PostForm
    model = Post

class PostCreateView(PostView, generic.CreateView): pass
class PostUpdateView(PostView, generic.UpdateView): pass

class BlogPostView(PostView):
    form_class = BlogPostForm
    model = BlogPost

class BlogPostCreateView(BlogPostView, generic.CreateView): pass
class BlogPostUpdateView(BlogPostView, generic.UpdateView): pass 
```

如果您仍然对这里的重复量不满意，您可以进一步自动化这些类的构建（[`type`](http://docs.python.org/library/functions.html#type)用于在运行时创建类）。不过，在您完全习惯使用基于类的视图之前，这可能有点过头了。

# javascript - JavaScript 中的所有对象都符合规范，但在 DOM 中，一个非原始对象不是。哪一个？

> ID：10348995
> 
> 赞同：10
> 
> 时间：2012-04-27T10:28:48.133
> 
> 标签：javascript, dom, object

[Twitter上](http://twitter.com/mathias/status/195818066016354305)有这条推文：

> 在 JavaScript 中，所有对象都是真实的（根据规范）。在 DOM 中，这条规则有一个例外。它是什么？#jsquiz #fronttrends

有人知道答案吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T07:15:26.153

**免责声明：** [我是发推文的人 :)](http://twitter.com/mathias/status/195818066016354305)这是我会在我的[前沿趋势](http://2012.front-trends.com/)演讲中提出和回答的问题。我在上台前 5 分钟写了那条推文。

* * *

由于 Twitter 上有 140 个字符的限制，这个问题有点含糊。我问的真正问题如下。

ECMAScript 规范[定义`ToBoolean()`如下](http://es5.github.com/x9.html#x9.2)：

![ToBoolean(condition)，幻灯片来自我的 Front-Trends 2012 演讲](../Images/0d96dc6326d466c148de2d80fd6d8e3e.png)

如您所见，所有非原始对象（即所有不是布尔值、数字、字符串、`undefined`或`null`的对象）按照规范都是真实的。然而，在 DOM 中，有一个例外——一个虚假的 DOM 对象。你知道那是哪一个吗？答案是`document.all`。[HTML 规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/obsolete.html#dom-document-all)说：

> 该`all`属性必须返回一个`HTMLAllCollection`根节点`Document`，其过滤器匹配所有元素。
> 
> 为 all 返回的对象有几个异常行为：
> 
> 用户代理必须像`ToBoolean()`JavaScript 中的运算符将返回的对象转换为`all`值`false`一样。
> 
> 对于JavaScript中的`==`and运算符，用户代理必须表现得好像返回的对象等于该 值。`!=``all``undefined`
> 
> 用户代理必须采取行动，以便 JavaScript 中的运算符在应用于返回的对象时 `typeof`返回字符串。`'undefined'``all`
> 
> 这些要求故意违反了撰写本文时的 JavaScript 规范（ECMAScript 第 5 版）。JavaScript 规范要求`ToBoolean()`运算符将所有对象转换为`true`值，并且没有规定对象的行为就好像它们是`undefined`为了某些运算符的目的一样。这种违规的动机是希望与两类遗留内容兼容：一种使用存在`document.all`作为检测遗留用户代理的一种方式，一种只支持那些遗留用户代理并使用 `document.all`对象而不首先测试其存在.

所以，`document.all`是这个 ECMAScript 规则的唯一官方例外。（在 Opera`document.attachEvent`等中也是虚假的，但在任何地方都没有指定。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T10:36:28.460

它是**`document.all`。**

它是非标准的，所以你最好使用`document.getElementsByTagName("*")`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T13:27:17.327

好的，使用此代码

```
for (var name in document) {
    if (!!document[name] === false && typeof document[name] === 'object' && document.hasOwnProperty(name)) {
        $('#foo').append('document.' + name + '<br />');        
    };
};​ 
```

我在 chrome 中得到了这个结果（结果可能会有所不同）

```
document.ownerDocument
document.attributes
document.namespaceURI
document.nextSibling
document.webkitCurrentFullScreenElement
document.nodeValue
document.preferredStylesheetSet
document.textContent
document.previousSibling
document.parentNode
document.xmlVersion
document.parentElement
document.localName
document.selectedStylesheetSet
document.prefix
document.xmlEncoding 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T10:56:49.760

只需遍历文档并测试所有内容..

[http://jsfiddle.net/UTNkW/3/](http://jsfiddle.net/UTNkW/3/)

编辑：错误的测试方法，谢天谢地有人指出，我可以纠正它。