# StackOverflow 问答 11594000-11594999

# jquery - 用于背景图像交叉淡入淡出幻灯片的 jquery 插件

> ID：11594002
> 
> 赞同：1
> 
> 时间：2012-07-21T16:40:42.240
> 
> 标签：jquery, jquery-plugins

我没有成功通过 Google 搜索找到一个简洁的 JQuery 插件，它可以让我设置一个漂亮的背景图像幻灯片。诸如[Supersized](http://buildinternet.com/2011/07/supersized-3-2-fullscreen-jquery-slideshow/)或[Vegas](http://vegas.jaysalvat.com/)插件之类的东西......这两个很棒，但我希望它可以处理单个元素（标题、div ......）而不是填充整个浏览器区域。感谢您的提示！

问题更新：

让我更新我的问题，因为也许不清楚我需要什么。

我不需要标准的轮播或图像幻灯片库。有很多，但它们都适用于固定的容器/图像宽度。我需要的是在浏览器窗口的全宽和固定高度上有一个图像。我需要这个图像在这个容器的两侧居中和溢出。就像你用`background: url(image.jpg) center top scroll no-repeat;`. 如果浏览器调整大小，我希望这个图像保持居中，只是更多的可见。然后我想要 4-5 张图像来形成一个交叉淡入淡出的幻灯片。

您可以查看我的示例页面以查看我的 bg 图像设置：http: [//v3krasne.si.bitcloud.nine.ch/](http://v3krasne.si.bitcloud.nine.ch/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T13:51:20.570

我已经设法通过[JQuery Cycle](http://malsup.com/jquery/cycle/)插件获得了理想的结果。

# wpf - 通过相对源绑定上下文

> ID：11594006
> 
> 赞同：0
> 
> 时间：2012-07-21T16:41:16.567
> 
> 标签：wpf, binding, relativesource

我想通过相对源将我的 DataTemplate (ClosableTabItemTemplate) 绑定到 HeaderedContentControl 的 Workspaces DataContext。不幸的是它不起作用？有任何想法吗？

顺便说一句：我收到以下命令行错误：System.Windows.Data 错误：40：BindingExpression 路径错误：在“对象”“AllUserView”（名称=“”）上找不到“DisplayName”属性。BindingExpression:Path=DataContext.DisplayName; DataItem='TabItem' (名称=''); 目标元素是'ContentPresenter'（名称=''）；目标属性是“内容”（类型“对象”）

赛亚迈克尔

```
<HeaderedContentControl 
      Content="{Binding Path=Workspaces}"
      ContentTemplate="{StaticResource WorkspacesTemplate}"
      Header=""
      Style="{StaticResource MainHCCStyle}" DataContext="{Binding}" 
                />
<DataTemplate x:Key="ClosableTabItemTemplate">
    <DockPanel Width="120"  >
        <Button 
    Command="{Binding Path=DataContext.CloseCommand, RelativeSource={RelativeSource AncestorType={x:Type HeaderedContentControl}}}"
    Content="X"
    Cursor="Hand"
    DockPanel.Dock="Right"
    Focusable="False"
    FontFamily="Courier" 
    FontSize="9"
    FontWeight="Bold"  
    Margin="0,1,0,0"
    Padding="0"
    VerticalContentAlignment="Bottom"
    Width="16" Height="16" 
    />
    <ContentPresenter 
    Content="{Binding Path=DataContext.DisplayName, RelativeSource={RelativeSource AncestorType={x:Type HeaderedContentControl}}}" 
    VerticalAlignment="Center" 
    />
    </DockPanel>
</DataTemplate>

<DataTemplate x:Key="WorkspacesTemplate">
    <TabControl 
  IsSynchronizedWithCurrentItem="True" 
  ItemsSource="{Binding}"      
  ItemTemplate="{StaticResource ClosableTabItemTemplate}"
  Margin="4"
  />
</DataTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T16:52:24.127

我认为您必须使用[RelativeSource.AncestorLevel Property](http://msdn.microsoft.com/en-us/library/system.windows.data.relativesource.ancestorlevel)。默认级别是 1，您的 WorkspacesTemplate`TabControl`也是`HeaderedContentControl`。尝试

```
Content="{Binding Path=DataContext.DisplayName,
                  RelativeSource={RelativeSource AncestorType={x:Type HeaderedContentControl},
                                                 AncestorLevel=2}}" 
```

找到你的真实`HeaderedContentControl`。

# css - css悬停交互问题

> ID：11594008
> 
> 赞同：1
> 
> 时间：2012-07-21T16:41:33.153
> 
> 标签：css, hover

我有这个 html 代码：

```
<div id="main">
    <section id="content"> 
          <div id="catalogue">    
          <div class="coffee"><a href="coffees.html"><img src="img/kafesmenu.jpg"alt="coffees" width="250" height="300"></a></div>          
          <div class="drink"> <a href="drink.html"><img src="img/potomenu.jpg" alt="drinks" width="250" height="300"></a> </div>
         <div class="food"> <a href="food.html"><img src="img/faimenu.jpg" width="250" height="300" alt="food"></a> </div>       
        </div>
    </section>
  </div> 
```

我想悬停`coffee`并更改`drinks/food`不透明度。这应该通过使用 css 规则来完成`.coffee :hover + .drink{...}`。这是我的CSS：

```
#catalogue .coffee{
    position: absolute;
    width: 250px;
    height:300px;
    background-color: #1C0903;  
}

#catalogue .drink {
    position: absolute;
    width: 250px;
    left: 260px;
    background-color: #1C0903;
}   
#catalogue .food {
    position: absolute;
    width: 250px;
    left: 520px;     
    background-color: #1C0903;
}
#catalogue .coffee:hover {
    -webkit-transition: -webkit-transform 1s linear;
    -webkit-transform: translateY(-10%);
}
#catalogue .coffee:hover + .drink{
    opacity:0.5;
}
#catalogue .coffee:hover + .food {
    opacity:0.5;
} 
```

`drink`我的问题是，当我将鼠标悬停在上面时，只有's 的不透明度会改变，`coffee`我不知道为什么`food`不改变。

（我对所有班级都做了同样的事情，这就是发生的事情：
`Coffee:hover`- 喝新的不透明度；食物 NADA
`Drink:hover`- 咖啡 NADA；食物新的不透明度
`Food:hover`- 喝 NADA；咖啡 NADA）

这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T17:15:33.957

不要使用相邻的兄弟选择器。使用[一般的兄弟姐妹之一](http://www.w3.org/TR/css3-selectors/#general-sibling-combinators)。那`~`不是`+`.

`+`仅针对紧跟 X 的兄弟元素。`~`针对 X 之前的任何兄弟元素。

看看小提琴 - [http://jsfiddle.net/joplomacedo/333v5/](http://jsfiddle.net/joplomacedo/333v5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T16:43:54.720

相邻选择器 ( `+`) 仅选择与下一个选择器匹配的下一个相邻兄弟。请参阅[http://www.w3.org/TR/CSS2/selector.html#adjacent-selectors](http://www.w3.org/TR/CSS2/selector.html#adjacent-selectors)。

由于 .drink 将 .coffee 和 .food 分开，因此悬停规则不适用于 .food。

**修复**-[请参阅此小提琴以获取工作示例](http://jsfiddle.net/333v5/3/)

```
/* Make all the children translucent first ... */
#catalogue:hover div {
    opacity:0.5;
}

/* ... then make the currently-hovered div opaque and transform it */
#catalogue div:hover {
    -webkit-transition: -webkit-transform 1s linear;
    -webkit-transform: translateY(-10%);
    opacity: 1;
}​​​​ 
```

# django - 带有部分句子匹配的 Django 文本搜索

> ID：11594010
> 
> 赞同：7
> 
> 时间：2012-07-21T16:42:09.490
> 
> 标签：django, full-text-search

我正在构建一个站点，我想在其中实现对某些对象的标题和描述的文本搜索。由于我的对象数量很少（约 500 个文档），我不考虑 Haystack 之类的。

我只需要 2 个功能：

*   能够将标题上的匹配优先于描述（具有某种权重）。
*   允许句子的部分匹配。例如，如果我搜索“冰淇淋”，​​也会得到“冰”和“奶油”的结果。

我研究了[django-watson](http://github.com/etianen/django-watson/wiki)和[django-full-text-search](http://github.com/patrickomatic/django-full-text-search)但我不确定它们是否允许部分匹配。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T10:05:52.623

作为 django-watson 的创建者，我可以确认，对于某些数据库后端，它允许部分匹配。具体来说，在 MySQL 和 PostgreSQL 上，它允许前缀匹配，即从单词的开头部分匹配。

在 wiki 上查看这个数据库比较页面：

[https://github.com/etianen/django-watson/wiki/Database-support](https://github.com/etianen/django-watson/wiki/Database-support)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T19:32:59.167

您的网站有多少次点击？每个文档，有多少个数据存储？

如果我们谈论的是 500 个文档并且每分钟点击数很少，那么 django api 就足够了：

```
q = None
for word in search_string.split():
   q_aux = Q( title__icontains = word ) | Q( description__icontains = word )
   q = ( q_aux & q ) if bool( q ) else q_aux

result = Document.objects.filter( q ) 
```

你有没有考虑过这个选项？

当心：

*   这种方法不会优先于描述的标题
*   结果中仅显示“所有单词”匹配项。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-04-19T03:51:13.783

使用新[的全文搜索`django.contrib.postgres`](https://docs.djangoproject.com/en/1.11/ref/contrib/postgres/search/)作为起点，可以扩展[`SearchQuery`](https://docs.djangoproject.com/en/1.11/ref/contrib/postgres/search/#searchquery)以创建一个版本来处理最终单词的部分部分的搜索：

```
from psycopg2.extensions import adapt
from django.contrib.postgres.search import SearchQuery

class PrefixedPhraseQuery(SearchQuery):
    """
    Alter the tsquery executed by SearchQuery
    """

    def as_sql(self, compiler, connection):
        # Or <-> available in Postgres 9.6
        value = adapt('%s:*' % ' & '.join(self.value.split()))

        if self.config:
            config_sql, config_params = compiler.compile(self.config)
            template = 'to_tsquery({}::regconfig, {})'\
                .format(config_sql, value)
            params = config_params

        else:
            template = 'to_tsquery({})'\
                .format(value)
            params = []

        if self.invert:
            template = '!!({})'.format(template)

        return template, params 
```

[`ts_query`有关语法，请参阅 Postgres 文档](https://www.postgresql.org/docs/9.5/static/textsearch-controls.html)。

然后，您可以在这样的查询中使用它：

```
vector = SearchVector(  
    'first_name',
    'last_name',
    'email',
    config='simple')
query = PrefixedPhraseQuery(query, config='simple')
queryset = queryset\
    .annotate(vector=vector)\
    .filter(vector=query) 
```

你也可以写一个`startswith`查找，参考[`SearchVectorExact`](https://docs.djangoproject.com/en/1.11/_modules/django/contrib/postgres/search/#SearchVectorExact).

## Django 3+ 答案

在更新的 Django 版本中，这变得更加简单。`SearchQuery`现在有一种`raw`模式可以用来请求前缀查询。

```
query = SearchQuery("search & term & prefix:*", search_type="raw")
results = Model.objects\
    .filter(_search_vector=query)\
    .annotate(
        rank=SearchRank(
            F("_search_vector"),
            query,
            cover_density=True,
        )
    )
    .order_by("-rank") 
```

哪里`_search_vector`是`SearchVectorField`， 或 可以在模型上注释。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-21T18:21:30.837

看看[这篇](http://blog.stunf.com/building-a-scalable-real-time-search-architecture-with-sphinx/)文章。它包含有关您要执行的操作的信息。

看看[干草堆](http://haystacksearch.org/)。嗖嗖声似乎是个不错的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-22T14:40:25.543

我在我的项目中使用了[Apache Solr](http://lucene.apache.org/solr/)，它非常好并且有很多文档。并检查[sunburnt](https://github.com/tow/sunburnt/)、[pysolr](http://code.google.com/p/pysolr/)和[solrpy](http://code.google.com/p/solrpy/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-28T17:44:16.150

Django 现在支持全文搜索：[Django Full Text Search](https://docs.djangoproject.com/en/1.11/ref/contrib/postgres/search/)。

> 重要提示：似乎这仅适用于 postgres db 后端。

```
# Example based on Django Docs.
Entry.objects.annotate(
   search=SearchVector('title', 'description'),
).filter(search='some_text') 
```

您还可以使用**搜索查找**

```
Entry.objects.filter(title__search='Cheese') 
```

# iphone - 从 iPhone 中的 html 页面获取标签值

> ID：11594014
> 
> 赞同：0
> 
> 时间：2012-07-21T16:42:29.830
> 
> 标签：iphone, ipad, delegates, nsmutablearray, nsxmlparser

我是 iPhone 新手，

我想`<text>`从我的本地页面获取标签的所有值，`.html`并且我想将它存储在我的数组中。

例如：`toc.html`是我的 html 文件，我想从这个文件中获取`<text>`标签的所有值。

这是我的html文件，

```
<navMap>
    <navPoint class="chapter" id="navpoint-1" playOrder="1">
        <navLabel>
           <text>Cover</text>
        </navLabel>
      <content src="Morning Insight 26 April - K S 2/Morning Insight 26 April - K S 2/Morning Insight 26 April - K S/Morning Insight 26 April - K S/Morning Insight/OEBPS/first.html"/>
   </navPoint>

     <navPoint class="chapter" id="navpoint-2" playOrder="2">
        <navLabel>
          <text>News</text>
        </navLabel>
      <content src="Morning Insight 26 April - K S 2/Morning Insight 26 April - K S 2/Morning Insight 26 April - K S/Morning Insight 26 April - K S/Morning Insight/OEBPS/1.html"/>
   </navPoint>

    <navPoint class="chapter" id="navpoint-3" playOrder="3">
       <navLabel>
          <text>Report</text>
       </navLabel>
      <content src="Morning Insight 26 April - K S 2/Morning Insight 26 April - K S 2/Morning Insight 26 April - K S/Morning Insight 26 April - K S/Morning Insight/OEBPS/2.html"/>
    </navPoint>

    <navPoint class="chapter" id="navpoint-4" playOrder="4">
       <navLabel>
          <text>Economy Update</text>
       </navLabel>
      <content src="Morning Insight 26 April - K S 2/Morning Insight 26 April - K S 2/Morning Insight 26 April - K S/Morning Insight 26 April - K S/Morning Insight/OEBPS/3.html"/>
    </navPoint>

<navMap> 
```

最后我的数组应该包含：

```
array at 0: Cover
array at 1: News
array at 2: Report
array at 3: Economy Update 
```

**任何帮助都会得到帮助。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:50:09.920

尝试，

```
- (NSString *)dataFilePath:(BOOL)forSave {
        //TOC is a path of your `html` file
        return TOC;
    } 
```

**存储`<text>`insides 数组的内容**

```
-(void)viewDidAppear:(BOOL)animated{

    [super viewDidLoad];
    TOCArray=[[NSMutableArray alloc]init];

    NSString *filePath = [self dataFilePath:FALSE];
    NSData *response = [[NSMutableData alloc] initWithContentsOfFile:filePath];
    GDataXMLDocument *doc = [[GDataXMLDocument alloc] initWithData:response options:0 error:nil];

    NSArray *navPoints = [[[doc.rootElement elementsForName:@"navMap"] lastObject] elementsForName:@"navPoint"];

    for (GDataXMLElement *m in navPoints)
    {
        NSArray *navLabel = [m elementsForName:@"navLabel"];
        for (GDataXMLElement *e in navLabel)
        {
            NSArray *text = [e elementsForName:@"text"];
            [TOCArray addObject:[text objectAtIndex:0]];
        }
    }

} 
```

# java - 将参数传递给 Java.util.Concurrent 中的 Call 方法

> ID：11594016
> 
> 赞同：0
> 
> 时间：2012-07-21T16:42:39.667
> 
> 标签：java, multithreading, concurrency, java.util.concurrent

我是高级 Java.util.Concurrent 包的新手，我想做的是使用线程池同时读取多个文本文件。我需要一种将文件名作为参数传递给我的调用方法实现的方法。

像这样的东西：

```
public String call (String param) 
```

如果有其他方法可以实现这一点，我将感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T16:50:16.683

实现`Runnable`接口时，将参数添加为类的成员。并在构造函数中添加该成员的初始化。比从 run 方法使用它。

例如：

```
class ConcurrentFileReader implements Runnable{
   String fileName;

   public ConcurrentFileReader(String fileName){ 
       this.fileName = fileName; 
   }

   public void run(){
       File f = new File(fileName);
      // whatever
   }
} 
```

这种模式被称为“方法对象”

# android - Gridview 底部的按钮 (Android)

> ID：11594020
> 
> 赞同：1
> 
> 时间：2012-07-21T16:43:14.817
> 
> 标签：android, layout, button, gridview

有很多类似的问题，但大多数都是用不清楚的英语写的或者有不完整的解决方案，所以让我试着准确地描述我想要的行为：

用户看到一个 GridView。如果 GridView 中的项目足够大，用户必须滚动才能看到更多的 gridview，那么用户最初应该看不到任何按钮。当用户滚动并到达 gridview 的底部时，他应该会看到一个可以单击的按钮。

我怎样才能在 XML 中得到这个？到目前为止，我尝试过的解决方案是：

1）在视口底部的gridview顶部覆盖按钮。该按钮始终可见。

2) 创建一个显示按钮的“页脚栏”。该按钮始终可见。

这些都不是我想要的，因为在用户滚动到 gridview 的底部之前，按钮不应该是可见的。

（您几乎可以认为 gridview 在按钮所在的底部有一个额外的行）

# 7/23 更新：

这是当前的迭代。mButton.getMeasuredHeight() 在 onMeasure 中调用时为 0。尝试在 init() 中使用 setWidth() / setHeight() 设置宽度或高度不会改变这一点。我需要在哪里设置按钮的宽度/高度？

另请注意，该应用程序随后在网格加载后不久崩溃。不知道为什么。

```
public class MyGridView extends GridView {

  private Button mButton;

  public MyGridView(Context context) {
    super(context);
    init(context);
  }

  public MyGridView(Context context, AttributeSet attrs) {
    super(context, attrs);
    init(context);
  }

  public MyGridView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    init(context);
  }

  private void init(Context context) {
    mButton = new Button(context);
    mButton.setText("test test test");
  }

  @Override
  protected void onLayout(boolean changed, int left, int top, int right, int bottom) {
    super.onLayout(changed, left, top, right, bottom);

    int buttonLeft = left;
    int buttonTop = top + this.getMeasuredHeight();
    int buttonRight = left + mButton.getMeasuredWidth();
    int buttonBottom = bottom + getMeasuredHeight() + mButton.getMeasuredHeight();

    mButton.layout(buttonLeft, buttonTop, buttonRight, buttonBottom);
  }

  @Override
  protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);

    int parentWidth = MeasureSpec.getSize(widthMeasureSpec);
    int parentHeight = MeasureSpec.getSize(heightMeasureSpec);
    this.setMeasuredDimension(parentWidth, parentHeight + mButton.getMeasuredHeight());
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T17:32:48.787

一种解决方案是扩展`GridView`and 覆盖`layout`and`measure`方法。

```
void layout(int l, int t, int r, int b) {
  super.layout(...);
  /* layout your button here.. */
} 
```

如果这可行，则无需重写该`onMeasure`方法，否则您必须将按钮高度添加到`heightMeasureSpec`in `onMeasure`。

## 更新：

首先调用 super.onMeasure，然后设置测量尺寸.. 这应该可以工作..

```
@Override protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec)
{ 
    super.onMeasure(widthMeasureSpec, heightMeasureSpec); 

     int parentWidth = MeasureSpec.getSize(widthMeasureSpec) ; 
     int parentHeight = MeasureSpec.getSize(heightMeasureSpec ); 
     this.setMeasuredDimension(parentWidth , 
                               parentHeight + mbutton.getmeasuredheight());

 } 
```

## 更新 2：

对 init 进行更改：

```
 private void init(Context context) {
    mButton = new Button(context);
    mButton.setLayoutParams(
                  new ViewGroup.LayoutParams(LayoutParams.WRAP_CONTENT, 50));
    mButton.setText("test test test");
  } 
```

和

```
int buttonBottom = bottom  + mButton.getMeasuredHeight(); 
```

将以下方法添加到您的 Gridview 类。

```
public void addButton() {
    addView(mButton);
} 
```

`addButton`在将适配器设置为网格视图后立即调用。

# activerecord - 如何使用活动记录指定此关系？

> ID：11594023
> 
> 赞同：1
> 
> 时间：2012-07-21T16:43:46.627
> 
> 标签：activerecord, yii, relationship

我对这种关系感到非常困惑`through`。这是我的桌子

批次（ID，名称）

主题（id，batch_id，名称）

老师（身份证，姓名）

subject_teacher(subject_id,teacher_id)

关系是

批处理 HAS_MANY 主题

科目 BELONGS_TO 批次

主题 MANY_MANY 教师通过 subject_teacher

教师 MANY_MANY 科目来自 subject_teacher

不，我如何指定获取的关系

1.  一批教师
2.  分配给教师的批次

我尝试使用[through](http://www.yiiframework.com/doc/api/1.1/CHasManyRelation#through-detail)选项，但它似乎不适用于 MANY_MANY 关系。除了遍历每个主题之外，还有什么更好的方法吗？

编辑：我知道我可以通过教师模型中的功能获得教师的科目

```
public function getBatches()
{
    $batches=array();
    foreach($this->subjects as $subject)
        $batches[]=$subject->batch;
    return $batches;
} 
```

现在我可以通过参考获得一批老师`$teacher->batches`。但是我需要一个更清晰的关系，比如解决方案，以便在代码中的某些地方我可以做出如下声明`Teacher::model()->with('batches')->findAll()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T16:56:26.753

我认为这是遍历主题的唯一方法。除非你不通过活动记录来做。

```
 //pseudo code....
  Teacher=new Teacher::model()->with('subject.batch')->find();
  subjects=Teacher->subjects;
  for(subjects as subject){
      batch=subejct->batch;
  } 
```

直通关系只能应用于一对多或一对一的情况，而不是多对多。

# .net - 哪些类型/命名空间不应该重命名？

> ID：11594025
> 
> 赞同：1
> 
> 时间：2012-07-21T16:44:17.700
> 
> 标签：.net, reflection, clr, mono.cecil

我是 Cecil 的新手，我创建了一个简单的测试。它将所有命名空间/类型重命名为随机字符串。

```
var assembly = AssemblyDefinition.ReadAssembly(@"C:\somexe.exe");
foreach (var t in assembly.MainModule.Types) {
    t.Namespace = Guid.NewGuid().ToString();
    t.Name = Guid.NewGuid().ToString();               
} 
```

启动可执行文件后运行，但形式为空（它是 winforms）。

我以为 CLR 不关心名字？我不应该重命名什么？还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T16:49:41.317

很多事情，特别是在winforms中，都依赖于反射。反射非常关心名称。这也可能与资源和资源文件不匹配有关。此外，许多属性可能包括类型信息作为字符串，这可能会影响事物。序列化也可以（尤其是 BinaryFormatter）。

但是，如果没有更多上下文（主要是：代码），我们只能猜测。

# c++ - Qt 中在两个小部件之间发送 OpenGL 图像的最佳方式

> ID：11594027
> 
> 赞同：2
> 
> 时间：2012-07-21T16:44:29.650
> 
> 标签：c++, multithreading, qt

我想使用模拟器窗口内的 GLWidget，并想使用帧缓冲区对象将数据发送到主窗口的 glwidget。

我已经使用信号/插槽来实现这一点，但是我在多线程问题和异常方面遇到了很多问题。

实现这种情况的最佳方法是什么。![附上我想做的场景图片][1]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T20:50:42.010

如果要共享帧缓冲区对象，则应使用 GL 上下文资源共享，而不是 Signal/Slot。后者在主存中运行，而上下文共享发生在 GPU 上。因此不涉及数据副本（通过总线传输并返回！）。

在 QGLWidget 文档中，解释了两个小部件如何共享上下文：

> 如果 shareWidget 是一个有效的 QGLWidget，这个小部件将与 shareWidget 共享 OpenGL 显示列表和纹理对象。但是如果 shareWidget 和这个小部件的格式不同，则可能无法共享。您可以通过调用 isSharing() 来检查共享是否生效。

[http://doc.qt.nokia.com/4.7-snapshot/qglwidget.html#QGLWidget](http://doc.qt.nokia.com/4.7-snapshot/qglwidget.html#QGLWidget)

# javascript - 在javascript中循环遍历json

> ID：11594038
> 
> 赞同：1
> 
> 时间：2012-07-21T16:46:20.460
> 
> 标签：javascript, xml, json, oop

```
"obj" : {

"a" : [
      { "name" : "value" },
      { "name" : "value" },
      { "name" : "value }
     ],
"b" : [
      { "name" : "value" },
      { "name" : "value" },
      { "name" : "value" }
      ]
}; 
```

我的 json 结构与此类似，因为“a”和“b”是包含数组的对象，数组也包含对象。我对迭代/循环不是很好。我主要想获得“名称”的值。有什么帮助吗？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T16:48:37.120

```
var foo = JSON.parse(json);

for(var i in foo){
    for(var y = 0; y < foo[i].length; y++)
        alert(foo[i][y].name);
} 
```

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/parse](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/parse)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T16:58:17.240

您可以使用`forEach`：

```
Object.keys( json.obj ).forEach(function ( key ) {
    json.obj[ key ].forEach(function ( obj ) {
        // retrieve obj.name here
    });
}); 
```

**现场演示：http:** [//jsfiddle.net/4Mrkp/](http://jsfiddle.net/4Mrkp/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T17:01:00.937

使用 underscore.js ->

```
var obj = {

"a" : [
      { "name" : "value" },
      { "name" : "value" },
      { "name" : "value" }
     ],
"b" : [
      { "name" : "value" },
      { "name" : "value" },
      { "name" : "value" }
      ]
};

var names = _.chain(obj).values().flatten().pluck('name').value(); 
```

# php - 在服务器上运行一个脚本，创建一个可以稍后访问的数组（通过 php）

> ID：11594042
> 
> 赞同：0
> 
> 时间：2012-07-21T16:47:17.090
> 
> 标签：php, arrays, server-side

我有一个无法完全访问的 Icecast 服务器（流式网络广播），我无法更改它的任何直接设置。所有 Icecast 服务器都有一个自行生成的 xml，用于显示有关流的当前信息（听众、持续时间、流名称，最重要的是，当前播放的歌曲标题），但是它无法显示最后 5 或 10 首曲目。

*[顺便说一句：有一些方法可以获取这些信息，但要么处理不当，要么信息与其他信息混杂在一起，不易获取。请不要关注这部分，因为我的问题是关于其他的；我只是想给你这个问题的背景]*

我已经有一个 PHP 脚本，它采用这个 xml 文件，并提取当前歌曲的标题。我想创建另一个 PHP 脚本来获取这首歌的标题并将其添加到一个数组中。它将每 30 秒运行一次此脚本，并将当前歌曲标题添加到数组中。如果当前歌曲标题和数组中的第一首（最新歌曲添加到数组的“顶部”）匹配，则不添加任何项目（以避免由于歌曲超过 30 秒而导致重复标题）。如果项目数达到 11，则删除最后一个项目，以保持数组为 10。

有了这个数组，我就可以随时调用它，并获得最后 10 首曲目的可靠来源。

我的问题是：如何通过 PHP 创建一个每 30 秒运行一次的数组，并且可以通过另一个 PHP 脚本轻松访问？或者有比 PHP 脚本更好的方法吗？如果有，请详细说明。

我知道 MySQL 是一种选择，但我宁愿避免这种情况，因为这样的事情似乎有点矫枉过正。我对使用 MySQL 也不是很熟悉。

我已经看到一些关于在服务器上运行关于调度脚本的 cron 作业的讨论。我不知道这是否是最好的解决方案，但如果是，你能更详细和具体吗？我对cron一无所知。

**编辑：**我希望这个数组对所有用户都是通用的，而不是相对的。该数组不能存在于单个用户的浏览器中，但必须位于服务器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T17:15:47.170

如果您不想使用数据库，只需将其保存到文件中？

[http://php.net/manual/en/function.file-put-contents.php](http://php.net/manual/en/function.file-put-contents.php)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-21T17:00:29.500

Cron 作业设置为在服务器上以编程方式工作，它与任何客户端都不相关。所以这不是你要找的。

如果我是你，我会创建一个 cookie 并将当前曲目数据分配给它。这可以通过 Javascript 轻松处理。您需要做的就是设置一个`setInterval`函数来检查它是否是最后一个轨道，如果不是，则处理cookie中的数组。

# meteor - Meteor.js 中的操作转换？

> ID：11594043
> 
> 赞同：10
> 
> 时间：2012-07-21T16:47:22.837
> 
> 标签：meteor, operational-transform

# **Meteor.js 是否支持操作转换？**

我正在做一个与 Etherpad 相关的项目，我想使用 Meteor.js（我认为它非常适合这种项目）。如果我想让它可扩展，那么运营转型对我的项目来说非常重要。我目前的知识表明，meteor 不支持开箱即用的操作转换（如果我在这里错了，请纠正我）。所以基本上我的问题是**如何在meteor.js中实现操作转换？**

我尝试使用[Neil Fraser的这个库](http://code.google.com/u/100863994824297167995/)[google-diff-match-patch](http://code.google.com/p/google-diff-match-patch/)，但是在应用补丁时遇到了问题（尽管它很容易在meteor.js 之外工作）。

那么有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-20T14:32:26.870

在看到几个 Meteor 项目使用 OT（即[http://cocodojo.meteor.com/](http://cocodojo.meteor.com/)）后，我决定进行适当的集成。

我创建了一个智能包来将 ShareJS 集成到流星中。请来看看并添加您的拉取请求：[https ://github.com/mizzao/meteor-sharejs](https://github.com/mizzao/meteor-sharejs)

演示应用程序：[http ://documents.meteor.com](http://documents.meteor.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T01:47:44.070

浏览器内协同文本编辑器有两个主要组成部分：文本区域本身，它必须能够很好地协调用户的输入与从服务器接收到的其他编辑；以及用于发送、接收和组合这些编辑的数据模型。

今天的 Meteor 并没有为这些事情提供特别的帮助，但它确实提供了实时数据传输，以及一种在客户端和服务器之间自动移动数据的方法。

如果我要在 Meteor 上实现 EtherPad，我一直认为我会使用一个集合作为“操作日志”。用户更改将被发送到服务器，在那里它们将被附加到正式的操作日志（基本上是差异）中，该日志将自动流式传输到所有客户端。客户端将负责应用传入的差异并将它们与尚未被服务器确认的类型进行协调。

这是一个艰巨的实施挑战。祝你好运！

# python - 如何在 wxpython 中选择 wxlistbox 的下一项？

> ID：11594044
> 
> 赞同：0
> 
> 时间：2012-07-21T16:47:26.823
> 
> 标签：python, wxpython

我正在用 python/wxpython 制作音乐播放器。我有一个包含所有歌曲的列表框，音乐播放器播放选定的歌曲。我现在正在尝试制作一个“下一个按钮”来选择列表框中的下一个项目并播放它。我该怎么做呢？是否有类似 GetNextString() 或类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:40:30.403

据我所知不是。只需跟踪当前选定项目在列表中的位置，并通过递增或递减来更新它。

# android - 用户位置每 30 分钟更新一次

> ID：11594046
> 
> 赞同：1
> 
> 时间：2012-07-21T16:47:51.380
> 
> 标签：android, android-location

如何在每 30 分钟后找到用户更新的位置，但不需要绘制地图......要求只是找到位置并在每 30 分钟后将其发送到任何服务器。？？？

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:19:59.203

根据我的说法，最可靠的方法是每分钟`AlarmManager`唤醒一次并将位置更新发送到服务器。`Service``n`

不要依赖`LocationListener`.

这是来自个人经验（我有一个使用这种方法的应用程序，它完全不可靠）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T16:59:09.277

在后台服务中执行此操作，当您实现 LocationListener 接口时，您可以在 onLocationChanged(Location location) 方法中将位置发送到您的服务器，例如

```
@Override
public void onLocationChanged(Location location)
{           
    // Send location to server...

    locationManager.removeUpdates(this);            
    detachLocationListeners();
} 
```

# java - 如何从 .jnlp 文件中获取 .jar 文件？

> ID：11594047
> 
> 赞同：4
> 
> 时间：2012-07-21T16:47:51.337
> 
> 标签：java, jar, jnlp

为了玩围棋，我去了[http://www.gokgs.com/download.jsp](http://www.gokgs.com/download.jsp)用 Ja​​va Web Start 启动客户端。本质上，它是一个可以自动更新客户端的.jnlp 文件。

很酷。不过，我想知道如何从这个 .jnlp 文件中获取底层的 .jar 文件。我检查了我的本地 java 6.0 缓存目录，并没有找到任何 .jar 文件。

有人知道如何获得这个 cgoban 客户端的独立版本吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-21T16:58:21.260

JNLP 只是一个 XML 文件。您可以打开 .jnlp 文件，它会告诉您 .jar 文件的位置。 [http://files.gokgs.com/javaBin/cgoban.jar](http://files.gokgs.com/javaBin/cgoban.jar)

```
<jnlp codebase="http://files.gokgs.com" href="javaBin/cgoban.jnlp">
    ...
    <jar href="javaBin/cgoban.jar" main="true"/> 
```

相关属性是`jnlp[codebase]`和`jar[href]`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T16:58:26.303

如果您在文本编辑器中打开 jnlp 文件，则会有一个指向 jar 文件的链接。你的情况是： http: [//files.gokgs.com/javaBin/cgoban.jar](http://files.gokgs.com/javaBin/cgoban.jar)

# finite-automata - 对于给定的正确输入字符串，如何纠正稍微不正确的 DFA？

> ID：11594048
> 
> 赞同：0
> 
> 时间：2012-07-21T16:48:04.787
> 
> 标签：finite-automata, fsm, dfa, automata

我写了一个可以生成 DFA 的程序。但是 DFA 有点不正确。也就是说，有时他们不能接受正确的字符串。

我的问题是：是否有任何算法可以纠正 DFA，以便它们可以接受给定的正确字符串？

更正式地说，

假设 DFA **D**不接受字符串**str**。

需要一个算法**A** , st **D' = A( D, str)**并且**D'**接受**str**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:57:15.347

您可以将要接受的附加字符串表示为链自动机，然后简单地将这些链与 DFA D 合并。之后，您可能还需要确定联合机器。

# continuous-integration - 子模块 cobertura jenkins 报告

> ID：11594050
> 
> 赞同：0
> 
> 时间：2012-07-21T16:48:15.873
> 
> 标签：continuous-integration, jenkins, cobertura

我们有以下布局的项目

1.  父母
    *   应用程序
    *   核
    *   仪器仪表

核心模块中有 cobertura 插件。我能够从命令行毫无问题地生成报告（XML 和 HTML）我什至能够在 Jenkins 的工作区中看到它们。但是我无法将这些报告与 Jenkins Cobertura 插件相关联。根据 Jenkins 文档的默认设置是

```
**/target/site/cobertura/coverage.xml 
```

由于子模块中生成的报告，这不起作用。我试过以下

```
core/target/site/cobertura/coverage.xml
/core/target/site/cobertura/coverage.xml
**/core/target/site/cobertura/coverage.xml 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:07:20.297

好的，问题是我使用 cobertura 插件作为

```
<build>
    <pluginManagement>
      <plugins>
        <plugin>
          <groupId>org.codehaus.mojo</groupId>
          <artifactId>cobertura-maven-plugin</artifactId>
          <version>2.5.1</version>
          <configuration>
            <formats>
              <format>xml</format>
              <format>html</format>
            </formats>
          </configuration>
        </plugin>
      </plugins>
    </pluginManagement> 
```

相反，它应该是

```
<build>
    <plugins>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>cobertura-maven-plugin</artifactId>
        <version>2.5.1</version>
        <configuration>
          <formats>
            <format>xml</format>
            <format>html</format>
          </formats>
          <check/>
        </configuration>
        <executions>
          <execution>
            <phase>clean</phase>
            <goals>
              <goal>cobertura</goal>
            </goals>
          </execution>
        </executions>
      </plugin> 
  </build>

  <reporting>
    <plugins>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>cobertura-maven-plugin</artifactId>
        <version>2.5.1</version>
      </plugin>
    </plugins> 
  </reporting> 
```

在此之后，我将 Jenkins Cobertura 插件指向*core/target/site/cobertura/coverage.xml*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-05T09:08:51.993

将以下行添加到您的应用程序目标：（在 jenkins 中配置应用程序部分）

```
cobertura:cobertura -Dcobertura.report.format=xml 
```

Cobertura xml 报告模式：
*/target/site/cobertura/.xml

pom.xml 更改：

```
<reporting>
<plugins>
    <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>cobertura-maven-plugin</artifactId>
        <version>2.6</version>
        <configuration>
            <formats>
                <format>html</format>
                <format>xml</format>
            </formats>
        </configuration>
    </plugin>
</plugins> 
```

# php - 如何使用 jquery 向 php 会话中添加值

> ID：11594052
> 
> 赞同：0
> 
> 时间：2012-07-21T16:48:20.230
> 
> 标签：php, jquery, ajax, session

我有一个音频播放器，我想在访问另一个链接时发送时间，所以当它加载时，它可以从我在会话中传递的确切时间继续，有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T17:00:32.290

为什么需要为此使用 PHP 会话？

我会使用 cookie，或者如果旧浏览器不是问题，则使用本地存储，或者可能是在旧浏览器上使用 cookie 并在新浏览器上使用本地存储的脚本。

有一个方便的 jQuery [cookie 插件](https://github.com/carhartl/jquery-cookie/)。

本地存储也非常简单：

```
localStorage.setItem('timeIleft', time_variable); 
```

并检索：

```
var user_left = localStorage.getItem('timeIleft'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T16:52:23.717

您需要调用[AJAX requets](http://api.jquery.com/jQuery.ajax/)来执行此操作。

该 URL 将是一个 php 页面，并将使用 $_POST['param-name'] 检索您的数据。

或者，检查这种方式调用php页面[http://www.xajaxproject.org/](http://www.xajaxproject.org/)

# ruby-on-rails-3 - 在 ActiveAdmin 中重新排序

> ID：11594054
> 
> 赞同：2
> 
> 时间：2012-07-21T16:48:26.730
> 
> 标签：ruby-on-rails-3, activeadmin, acts-as-list

有时我们需要重新排序资源，[acts_as_list](http://swanandp.github.com/acts_as_list/)对这项任务非常有用。我的问题是：在[ActiveAdmin](http://activeadmin.info/)框架中实现某些资源重新排序的最佳方法是什么。

*我知道没有“最好的方法”，但我想欢迎所有回复，这样人们就可以找到这类问题的各种答案。*

* * *

我自己写下了一种可能的解决方案，它使用带有拖放功能的 jquery，但不适用于过滤器、范围和排序。也许有理由专门为拖放重新排序使用单独的视图，或者可能有人使用复选框、按钮等制作了不同的 UI……</p>

请分享！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T16:48:26.730

[使用acts_as_list 和ActiveAdmin 的可排序列表](http://mossity.com/2011/07/08/sortable-lists-with-actsaslist-and-activeadmin/)中描述了其中一种解决方案。解决方案非常好，我自己可以添加的只是一些不同的序列化函数和一些更美观的东西：

首先，我认为将所需资源移动到指定位置而不是移动它之后的所有资源会更有效。这是我更新的`update`功能：

```
$("#shows tbody").sortable({
  update: function(event, ui){
    var request
    if (ui.item.next().length == 0)
      request = {method: 'move_to_bottom', target: ui.item.find("span.show").data("id")}
    else
      request = {method: 'put_at_index', data: ui.item.next().find("span.show").data("id"), target: ui.item.find("span.show").data("id")}
    $.ajax({
      url: "/admin/shows/sort",
      type: 'post',
      headers: {
            'X-Transaction': 'sort shows',
            'X-CSRF-Token': $('meta[name="csrf-token"]').attr('content')
          },
      data: request,
      complete: function(){
        $(".paginated_collection").effect("highlight");
        repaintTable();
      }
    });
  }
}); 
```

如您所见，我要么发送一个`put_at_index`方法，其中包含要放置的数据和项目的索引（实际上是我们拖动的项目下方的项目），如果它被拖到列表的底部，并且下面没有任何内容（之后）然后我只是发送一个`move_to_bottom`方法，其中包含要移动到底部的数据。

动作也被`sort`改变了，现在像这样工作：

```
collection_action :sort, :method => :post do
  case params[:method]
    when 'move_to_bottom'
      Show.find(params[:target]).move_to_bottom
    when 'put_at_index'
      Show.find(params[:target]).insert_at(Show.find(params[:data]).position)
  end
  head 200
end 
```

所以它只是使用acts_as_list`insert_at`的`move_to_bottom`方法。

我还添加了一个`repaintTable`，所以奇数行和偶数行在切换后仍然有不同的颜色，我在 ajax 请求完成后调用它。

```
function repaintTable()
{
  $("#shows tr").removeClass('even odd');
  $("#shows tr").filter(":odd").addClass('odd');
  $("#shows tr").filter(":even").addClass('even');
} 
```

缺点是它不适用于范围、过滤器和按某些列排序。

# python - 如何翻译 datetime 模块抛出的异常文本？

> ID：11594056
> 
> 赞同：3
> 
> 时间：2012-07-21T16:48:31.197
> 
> 标签：python, internationalization, flask, strftime, wtforms

哪种是从 strftime 中翻译消息的最佳/最简单的方法，例如`"time data '2012' does not match format '%d.%m.%Y'"`or `"day is out of range for month"`？

我问是因为我已经用 Flask、Flask-WTForms 和 DateField 类型的字段编写了一个应用程序。对于其他消息，我使用了 Flask-Babel/gettext，但此错误消息似乎直接来自不使用 gettext 的 strftime。

谢谢！

2012-07-24：添加一些示例代码（请尝试使用类似“2012-2-30”的日期）：

```
from flask import Flask, render_template
from flask.ext.wtf import Form, DateField

class DateForm(Form):
    date = DateField(u"Date")

DEBUG = True
SECRET_KEY = 'secret'

app = Flask(__name__)
app.config.from_object(__name__)

@app.route("/", methods=("GET", "POST",))
def index():
    form = DateForm()
    if form.validate_on_submit():
        pass

    return render_template("simple.html", form=form)

if __name__ == "__main__":
    app.run() 
```

模板“simple.html”：

```
<!DOCTYPE html>
<html>
    <body>
        <form method="POST" enctype="multipart/form-data">
            {% if form.date.errors %}
            {{ form.errors }}
            {% endif %}
            {{ form.hidden_tag() }}
            {{ form.date.label }}
            {{ form.date|safe }}
            <input type="submit" value="Submit">
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T22:49:08.757

简短的版本：**你不应该：例外是要被处理*的*，而不是*被翻译*的。**

在为用户准备的消息和为开发人员准备的消息之间存在概念上的差异（如运行时异常）。

翻译异常与翻译结构一样有意义`if ... then ... else`：开发人员应该知道编程*语言*，而不需要翻译它。

虽然在大多数情况下异常是由错误引起的（因此不应出现在已部署的代码中），但在某些情况下，它们可能表示程序的生理状况。如果这种情况需要用户采取行动，代码应该捕获有问题的异常并向用户显示对她/他有意义的消息。一个例子：

知道：

```
>>> int('text')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: invalid literal for int() with base 10: 'text' 
```

您可以编写这样的程序（当然，使用您最喜欢的人类语言为用户发送消息）：

```
>>> while True:
...     n = raw_input('What do you want to multiply 10 for?  ')
...     try:
...         print 'The result is: %d' % (10 * int(n))
...     except ValueError:
...         print 'You should provide an integer number...' 
```

请注意，我们只捕获`ValueError`，因为这是我们软件的唯一“生理”情况。任何其他异常都会使程序崩溃，因为它代表了开发人员没有考虑的情况。

不过关于**验证**的一句话：如果您的场景是用户必须以特定格式插入日期，那么在尝试处理它之前*验证其输入可能会更好。*上面的例子应该变成：

```
>>> while True:
...     n = raw_input('What do you want to multiply 10 for?  ')
...     if not all((c in '0123456789' for c in n)):
...         print 'You should provide an integer number...'
...         continue
...     print 'The result is: %d' % (10 * int(n)) 
```

虽然在 python 中，捕获异常还是验证输入*主要是*一种风格问题（在其他语言中可能不是这种情况，因为有时异常处理比检查条件慢得多），在 Web 开发中是习惯上**也**（即另外检查输入服务器端，您应该始终这样做）使用javascript验证输入客户端，因为这可以节省用户的时间和提供者的CPU，消除请求/响应周期。

！

# android - 我的电脑项目中使用的调试密钥在另一台电脑上不起作用

> ID：11594061
> 
> 赞同：0
> 
> 时间：2012-07-21T16:48:54.943
> 
> 标签：android, debugging, key

我已经从我的开发 windows pc 中的 debugkeystore 生成了 api 密钥，并且地图在这里工作正常。但是在另一个人用我的谷歌地图文件和密钥更新他的颠覆项目后，地图在他的机器上不起作用。急需答复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T17:25:34.923

当您注册 Google Maps API 时，您使用了调试密钥库的签名，并且该 API 密钥永远与您的调试密钥库相关联。

您的朋友需要使用他的调试密钥库签名完成 Google Map API 注册过程，并使用他的 Google Map API 密钥相应地修改地图 XML。但是，您可能会将调试密钥库提供给您的朋友，这样你们两个都使用相同的密钥库，因此能够使用相同的 Google Map API 密钥。

因此，在更改地图 XML 布局以覆盖彼此的 Google Map API 密钥时，你们双方都必须小心。

您还需要另一个用于发布密钥库的 Google Map API 密钥，用于签署发布应用程序的 APK 以发布到 Google Play。此键应始终位于地图 XML 布局中，以便您的最终发布应用程序可以与 Google 地图一起正常工作。

# regex - Apache2：将 url 重写到本地主机上的不同端口

> ID：11594062
> 
> 赞同：0
> 
> 时间：2012-07-21T16:49:05.873
> 
> 标签：regex, .htaccess, mod-rewrite, apache2, rewrite

我的本地计算机上有一项服务可用`127.0.0.1:8080`，但我更喜欢使用它`127.0.0.1/qwerty/`

我试图添加*/etc/apache2/sites-available/default*：

```
RewriteEngine on
RewriteRule (qwerty/.*)$ http://127.0.0.1:8080/$1 
```

在此之前，我将 rewrite.load 符号链接到 mods-enabled 并重新启动 apache2 服务器。

不幸的是，它不起作用。

* * *

**编辑：** 更具体地说-此服务是 calibre-server ，其输出在 port 上`8080`，而在 port 上`80`工作 apache2。然后我想对我的烧瓶（python 微框架）项目做同样的事情（它适用于 port `5000`）。

* * *

**编辑2：我使用了来自**[链接](http://manual.calibre-ebook.com/server.html)的 反向代理技巧，`calibre-server --url-prefix /calibre`在命令行中输入并且它可以工作（~~没有代理~~我需要在 */etc/apache2/sites-available/default*中设置代理的任何内容）。

不起作用的是这个烧瓶的东西。

我会写下我所做的一切，因为我不确定我是否理解正确。@Ωmega：我确实通过输入`python demo.py`演示目录来启动烧瓶项目。我`.htaccess`在此目录中创建了文件并将您建议的行放在那里但它不起作用，所以我将所有文件内容更改为：

```
Options FollowSymLinks
RewriteEngine On
RewriteRule ^$ http://127.0.0.1/flask/ [R=301,L] 
```

但它仍然不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T18:38:26.790

在服务目录的***设置***`http://127.0.0.1:8080`中执行以下重定向：

```
RewriteRule ^$ http://127.0.0.1/qwerty/ [R=301,L] 
```

# android - 在哪里插入应用程序启动的代码？

> ID：11594063
> 
> 赞同：19
> 
> 时间：2012-07-21T16:49:09.303
> 
> 标签：android

Android newbee 在这里，我有一些我想在我的 android 应用程序第一次启动时运行的代码。它检查本地数据库的版本，如果当前版本过时，则下载新版本。我一直坚持在我的第一个活动的 oncreate 中，很确定必须有一个更好的地方来放置它。有什么推荐的地方我可以把它放在启动时会被调用一次的地方吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-21T17:13:16.417

You can write a custom Application class (extend from android.app.Application). Override `onCreate` to specify what happens when the application is started:

```
public class MyApplication extends Application {
    @Override
    public void onCreate() {
        super.onCreate();

        // Do something here.
    }
} 
```

You'll then need to register your custom class in the manifest file:

```
<application ... android:name="fully.qualified.MyApplication"> 
```

**Edit:**

In response to David Cesarino, I disagree with the purpose of the `Application` class. If you rely on the `Activity`'s `onCreate`, then what's to stop it from becoming the same huge class of miscellaneous purposes... if you need something to happen when the application starts, you have to write that code somewhere; and the `Activity` would probably become more cluttered because you have to perform `Activity` specific logic in it as well. If you're worried about clutter, then separate the logic into other classes and call them from the `Application`. Using the `SharedPreferences` to determine whether or not the logic should execute seems like more of a work-around to a problem that's already been solved.

Dianne Hackborn seems to be referring to data, not logic, in which I totally agree. Static variables are much better than Application level variables... better scoping and type safety make maintainability/readability much easier.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-21T17:07:44.863

首先，看一下[Activity 生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)。

回答您的问题，您可以将代码放入任何这些“启动”方法中，具体取决于您想要做什么，最重要的是，*当*您想要触发它时。对于你所问的，`onCreate`是合理的地方。

> 我一直坚持在我的第一个活动的 oncreate 中，很确定必须有一个更好的地方来放置它。

那为什么呢？任何代码都有一个*入口*点，对吧？在 Android 活动中它恰好是`onCreate`（再次，请参阅上面的链接以获取完整的详细信息）。除了事件处理（即对主调用序列之外发生的事件的响应）之外，您还可以在`onCreate`.

如果您担心该方法变得庞大，那么这是另一个问题。我说，更好地抽象你的代码。为了检查初步的东西，人们通常在启动应用程序的主要活动之前提供一个“加载”活动。

***编辑：***

这是对drumboog 提议的后续行动，因为我的评论开始变得复杂到“只是评论”。

就个人而言，我会避免扩展`Application`类的唯一原因是早期执行代码，更重要的是优先级不那么明智的代码（版本控制数据库）。该类`Application`主要用作在'ies之间**保持状态**`Activity`的简单方法，而不是“做所有事情”的方法。简而言之，我觉得这`Application`门课经常被滥用。

对于您想要的，您可以在`Activity` `onCreate`. 这**降低了复杂性**，因为我看到人们一直在填充`Application`，直到它变成一大类杂项代码。这是维护的禁忌，本身就有逻辑问题。

Besides, if you truly want another solution, completely disassociated with the UI, you should think about implementing a `Service` instead (but I don't think it's necessary for just that).

Both of [those concerns were previously addressed by Dianne Hackborn](https://groups.google.com/d/msg/android-developers/D3IXihxSqlE/sgxXw-KPclwJ) (or what I got from her message).

# objective-c - 核心数据中的批量错误子关系

> ID：11594065
> 
> 赞同：2
> 
> 时间：2012-07-21T16:49:19.023
> 
> 标签：objective-c, ios, core-data

我有一个非常简单的小架构，如下所示：

轨迹 --> 段 --> 坐标

所有适当的关系都已到位，可以完成这项工作，他们当然让我做这样的事情：

```
NSArray *trails = <query all trails>

for (Trail *trail in trails) {
    for (Segment *segment in trail.segments) {
        for (Coordinate *coordinate in segment.coordinates) {
            //do something with coords
        }
    }
} 
```

来自 Django 背景，我对此感到很高兴，并假设将针对 sqlite3 运行尽可能少的查询。错误的！对这些循环中的每个对象都有一个查询。

我现在已经阅读了有关故障的核心数据文档，我了解发生了什么，尽管我真的很想知道处理这种情况的最佳实践是什么。我需要内存中的每一个对象（坐标模型有大约 100,000 个对象），因为它们都同时用于在地图上绘制轨迹。

我应该如何处理这种超延迟加载？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T17:03:19.793

你可以使用这个`setRelationshipKeyPathsForPrefetching:`方法`NSFetchRequest`。从文档中：

> 预取允许 Core Data 在一次提取（每个实体）中获取相关对象，而不是在触发错误时为每个单独的记录引发对存储的后续访问。

因此，在您可以添加的跟踪的初始获取请求中

```
[request setRelationshipKeyPathsForPrefetching:
    [NSArray arrayWithObjects:@"segments", @"segments.coordinates", nil]] 
```

（我从来没有尝试过 2 个级别的深度，只有一个级别。）

# c# - 读取文件中的特定行

> ID：11594067
> 
> 赞同：2
> 
> 时间：2012-07-21T16:49:35.903
> 
> 标签：c#, winforms, text-files, readline, readfile

我知道这已经回答了好几次了。但我问的是 C#。而java有一些。C# 还有一个，但它让我无处可去。所以请不要评价不好，因为我有这个原因。谢谢你。

我的最终目标是在我的应用程序中具有设置功能。我希望所有这些设置都保存到一个文本文件中。当应用程序打开时，它会自动读取该文件并调整我表单上的控件。

我不确定从哪里开始，但我想知道是否有类似的东西

```
String readLine(File file, int lineNumber) 
```

先感谢您。

我已经保存了一个文件，并且正在打开一个文件。但我在那里只保存了一个设置。这是第一行。但是，如果我想添加更多要保存的控件，而不是为每个选项创建一个新文件，我想在该文件中放置几行，并且每一行都有自己的控件，它会改变。

那么，如何读取文本文件的特定行？

再次感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T16:53:09.570

原则上，必须读取文本文件的每一行以定位特定行（如果需要，可以在该行停止），因为每个文本行的长度可能不同，因此您不能只计算文件中的偏移量然后到那里。

如果这真的是一个配置文件（可能不是很大，你可以使用

```
string[] lines = File.ReadAllLines(myPath); 
```

[http://msdn.microsoft.com/en-us/library/s2tte0y1.aspx](http://msdn.microsoft.com/en-us/library/s2tte0y1.aspx)

这样，文件的所有行都被读入`lines`，您可以访问单个行，例如

```
string line = lines[2]; 
```

如果您真的只想读取特定的行（请记住，如果您在应用程序中随着时间的推移读取多行，这将非常低效，因为您会从文件的开头重新读取），您将不得不编写自己的辅助程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T16:52:03.593

如果您想要设置功能，请[使用默认值](http://msdn.microsoft.com/en-us/library/aa730869%28v=vs.80%29.aspx)，不要自己滚动。您只会在解析和升级以及找到保存它的位置时遇到更多问题，以便当用户在 UAC 或非管理员帐户下运行时可以对其进行修改

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-21T16:52:21.377

除非所有行的长度完全相同，否则您不能只跳到文件中的某个行号。如果您需要大多数选项，只需使用以下命令将文件作为行数组读取[`System.IO.File.ReadAllLines`](http://msdn.microsoft.com/en-us/library/s2tte0y1.aspx)：

```
string[] lines = File.ReadAllLines("myfile.txt"); 
```

然后你可以像往常一样访问每一行，比如`lines[1]`第二行。

此外，如果您不需要使用其他任何内容修改这些设置，只需使用内置设置即可。他们为您处理一切。

# javascript - 如何从其他网页获取图像并显示在我的网站上

> ID：11594068
> 
> 赞同：1
> 
> 时间：2012-07-21T16:49:35.887
> 
> 标签：javascript, jquery, url, image-processing

我只想知道如何从其他网页获取图像并显示在我的网站上。

案例流程为：

1.  在文本框中输入一些页面 URL 并提交

2.  收集该网页中的所有图像（而不是整个站点）并在我的网页中显示它们

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T17:23:10.430

因此，您需要从页面中获取图像，并且输入数据是该页面的地址。好吧，你有两个解决方案：

I. 如果这是其他人会使用的您网站的功能，那么纯 JavaScript 是不够的，因为浏览器的隐私政策会阻止从其他页面获取此类数据。在这种情况下，您需要将 URL 发送到服务器上的脚本，该脚本将下载该页面，将其解析为 s 并返回图像 src 列表。

究竟如何做到这一点是一个相当复杂的问题，因为它取决于您网站的服务器端编程语言。无论如何，这样的功能将包括使用 AJAX 技术的客户端 javascript 和服务器站点脚本（例如 php）。客户端脚本非常简单。

在客户端，您的 js 必须：

```
1\. Get desired URLs
2\. Send them to server
3\. Wait for server's response (which contains srcs of images on desired page)
4\. Create img tags with srcs which you got from server script 
```

谷歌的关键词是，例如，AJAX、XmlHttpRequest 和 JSONP（对不起，如果你已经知道 :)

在服务器端，您的 (php|ruby|python|perl|brainfuck) 必须：

```
1\. Get page URL from javascript code at step 2
2\. Download a page by that url
3\. Parse it looking for img tags and their srcs
4\. Send list of srcs (in XML, JSONP or any other form) back to client 
```

二、如果您需要从其他页面获取图像仅供您个人使用，您可以为您的浏览器编写扩展程序。这种方式不需要任何服务器端脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T17:00:17.630

如果你想用 javascript 抓取其他网站，你应该创建一个可以充当代理的服务器端脚本，或者你可以使用 YQL。

这是我使用 YQL 进行跨域 ajax 调用的答案，

[使用带有 xml 响应的 jquery 的跨域 Post 方法 ajax 调用](https://stackoverflow.com/questions/11239584/cross-domain-post-method-ajax-call-using-jquery-with-xml-response/11240217#11240217)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T16:58:42.163

首先检查版权。仅当所有者提供免费使用的图像时才复制。还要阅读并理解使用许可。

如果图像可以按照所有者的许可免费使用，则下载图像然后使用它。另外，请不要忘记保留许可证的副本和下载图像的网站网址。

建议下载然后使用，这样如果明天其他网站关闭，那么您的网站不受影响。

最后但并非最不重要的一点是，尝试设计/拍摄自己的图像。即使他们不如其他人，至少他们是真实的。

# ios - 如何在 Phonegap 中添加垂直滚动

> ID：11594080
> 
> 赞同：0
> 
> 时间：2012-07-21T16:51:29.117
> 
> 标签：ios, cordova

我想在 Phonegap 应用程序中添加垂直滚动。该应用程序能够左右移动..但不能上下移动..需要一些有关如何操作的指导..谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T13:34:15.670

根据您的应用程序的设置方式，有几个选项可供选择。

1）如果您不需要固定的标头（非常罕见但确实发生），您可以使用普通的 css 方法，phonegap 只是一个包装为本机应用程序的 webview，所以浏览器中的大多数东西都可以在这里工作。

2）如果你需要一个固定的页眉和页脚，我建议[iScroll](http://cubiq.org/iscroll-4)。

iOS 5 给了我们`-webkit-overflow-scrolling: touch`，它可以在移动 safari 中运行，但是因为 webview 是移动 safari 的小兄弟，所以你并没有获得常规 safari 所具有的所有令人敬畏的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T11:39:42.543

所有高于 100% 视口 con 的容器都带有 CSS:overflow:auto 或 overflow:scroll。

重要的是，容器（我认为是 div）设置为高度：100%。

这是一个用 CSS 解决的想法。

# windows-8 - 在 Windows 8 的后台无缝循环 wav 文件

> ID：11594081
> 
> 赞同：0
> 
> 时间：2012-07-21T16:51:41.833
> 
> 标签：windows-8, wav, sharpdx

我已经设法使用 SharpDX 库无缝循环 wav 文件。但是，当应用程序被最小化（在后台）时，这似乎不起作用。

使用 Metro 播放器时，我无法获得无缝循环，这就是我在 SharpDX 库中使用 XAudio2 的原因。

希望有人可以帮助解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T10:26:58.840

当您的应用程序处于后台时，它不再有权访问 CPU，因此您的音频将停止播放。

解决此问题的唯一方法是使用运行音频组件的后台代理。这里的问题是，如果您只是在播放循环音频，那么认证过程对您来说会很困难。在后台播放音频适用于音频播放器应用程序（如内置的“音乐”应用程序）。

如果我是您的应用程序的用户，我可能会不高兴它在不在前台时阻塞音频系统（例如，如果我去接听 Lync 呼叫）。如果停止应用程序播放音频的唯一方法是手动将其关闭或退出应用程序，那么我认为用户体验不是很好。

当然，您可能有不同的意见，或者您的应用程序可能正在做一些我没有考虑过的事情。

# delphi - 在菜单最后一项的右侧移动

> ID：11594084
> 
> 赞同：2
> 
> 时间：2012-07-21T16:52:11.620
> 
> 标签：delphi, delphi-xe2, vcl-styles

德尔福 Xe2U4。主菜单项：文件、选项、帮助（名称：HelpMenuItem）。2 个按钮。使用 StyleManager Xe2（在项目选项中启用 xe2 主题，默认设置为“Metro Blue”）。

```
Procedure TForm1.RightMenu; // Shift in the right of last item of the menu
var mii: TMenuItemInfo;MainMenu: hMenu; Buffer: array[0..79] of Char;
begin
  MainMenu := Self.Menu.Handle;
  mii.cbSize := SizeOf(mii) ;
  mii.fMask := MIIM_TYPE;
  mii.dwTypeData := Buffer;
  mii.cch := SizeOf(Buffer) ;
  GetMenuItemInfo(MainMenu, HelpMenuItem.Command, false, mii) ;
  mii.fType := mii.fType or MFT_RIGHTJUSTIFY;
  SetMenuItemInfo(MainMenu, HelpMenuItem.Command, false, mii) ;
end;

procedure TForm1.Metro1Click(Sender: TObject); // Not Work
begin
TStyleManager.TrySetStyle('Metro Blue'); // or any other
RightMenu;
end;

procedure TForm1.Windows1Click(Sender: TObject); // Work
begin
TStyleManager.TrySetStyle('Windows'); // standart theme
RightMenu;
end; 
```

为什么在使用主题时不起作用？是否有正常的方法来向右移动菜单的最后一个点，是否应用了依赖方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T18:25:05.743

不幸的是，vcl 风格的钩子[`TMainMenu`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Menus.TMainMenu)没有实现代码来绘制一个向右对齐的特定菜单项。而且这个vcl风格的钩子（TMainMenuBarStyleHook）作为一个严格的私有成员嵌入在TFormStyleHook（表单的vcl风格的钩子）中，所以这里没有太多修改的空间。修复此问题需要您为 TForms 和 TMainMenus 重写新的 vcl 样式挂钩。所以如果你想这样做，你必须将 TFormStyleHook 类从 Vcl.Forms 单元复制到一个新单元，然后修复`TFormStyleHook.TMainMenuBarStyleHook.DrawItem`和`TFormStyleHook.TMainMenuBarStyleHook.Paint`方法的实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-17T12:08:35.507

```
Procedure TForm1.RightMenu; // Shift in the right of last item of the menu
var mii: TMenuItemInfo;MainMenu: hMenu; Buffer: array[0..79] of Char;
begin
  MainMenu := Self.Menu.Handle;
  mii.cbSize := SizeOf(mii) ;
  mii.fMask := MIIM_TYPE;
  mii.dwTypeData := Buffer;
  mii.cch := SizeOf(Buffer) ;
  GetMenuItemInfo(MainMenu, HelpMenuItem.Command, false, mii) ;
  mii.fType := mii.fType or MFT_RIGHTJUSTIFY;
  if SetMenuItemInfo(MainMenu, HelpMenuItem.Command, false, mii) then DrawMenuBar(self.Menu.WindowHandle);

end; 
```

# python - python：变异`globals`以动态地将事物放在范围内

> ID：11594090
> 
> 赞同：3
> 
> 时间：2012-07-21T16:53:06.077
> 
> 标签：python, monads

这是多么可怕的想法？类`monad`实现了`with`将事物放入和超出范围的接口，因此我可以编写一个通用函数库，例如 m_chain 引用函数`unit`并且`bind`可以在运行时放入实现。（所有这些代码的作用或它是否是一个好主意都无关紧要。）

我尝试过的其他想法都围绕着传递一个包含 unit/bind 作为参数或 kwarg 的结构，或者将 m_chain 放在一个类中，根据 self.unit 和 self.bind 实现它，并让派生类提供它们。但它增加了代码和语法的复杂性，并将单元/绑定绑定到 monad 在 python 中的表达方式。为此使用范围感觉好多了。

```
class monad:
    """Effectively, put the monad definition in lexical scope.
    Can't modify the execution environment `globals()` directly, because
    after globals().clear() you can't do anything.
    """
    def __init__(self, monad):
        self.monad = monad
        self.oldglobals = {}

    def __enter__(self):
        for k in self.monad:
            if k in globals(): self.oldglobals[k]=globals()[k]
            globals()[k]=self.monad[k]

    def __exit__(self, type, value, traceback):
        """careful to distinguish between None and undefined.
        remove the values we added, then restore the old value only
        if it ever existed"""
        for k in self.monad: del globals()[k]
        for k in self.oldglobals: globals()[k]=self.oldglobals[k]

def m_chain(*fns):
    """returns a function of one argument which performs the monadic
    composition of fns"""
    def m_chain_link(chain_expr, step):
        return lambda v: bind(chain_expr(v), step)
    return reduce(m_chain_link, fns, unit)

identity_m = {
    'bind':lambda v,f:f(v),
    'unit':lambda v:v
}

with monad(identity_m):
    assert m_chain(lambda x:2*x, lambda x:2*x)(2) == 8

maybe_m = {
    'bind':lambda v,f:f(v) if v else None,
    'unit':lambda v:v
}

with monad(maybe_m):
    assert m_chain(lambda x:2*x, lambda x:2*x)(2) == 8
    assert m_chain(lambda x:None, lambda x:2*x)(2) == None 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T18:39:47.630

我认为不断打鸭式全局变量绝对是一个糟糕的主意。依赖全局变量似乎与您在此处模仿的功能样式相反。

为什么不将 m_chain 定义为：

```
def m_chain(bind, *fns):
    """returns a function of one argument which performs the monadic
    composition of fns"""
    def m_chain_link(chain_expr, step):
        return lambda v: bind(chain_expr(v), step)
    return reduce(m_chain_link, fns, unit) 
```

然后：

```
identity_m = {
    'bind':lambda v,f:f(v),
    'unit':lambda v:v
}

with monad(identity_m):
    assert m_chain(lambda x:2*x, lambda x:2*x)(2) == 8 
```

变得简单：

```
assert m_chain(lambda v,f:f(v), lambda x:2*x, lambda x:2*x)(2) == 8 
```

实际上，显式传递函数似乎更符合 Python 风格，并且似乎不会导致您失去任何灵活性。

# java - 凝视使用 Spring 构建 java 应用程序

> ID：11594096
> 
> 赞同：0
> 
> 时间：2012-07-21T16:54:13.517
> 
> 标签：java, spring

我会构建一个 Java 应用程序，同时学习 Spring 框架。这个应用程序并不太复杂。它只是从用户那里接收数据并将它们保存到数据库中，以便将来从用户那里检索。现在我会使用 Spring，但我不知道这是否是个好主意。你有什么建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T16:59:40.650

好吧，对于这个小应用程序，没有人会推荐你使用 Spring，因为这意味着用剑砍柠檬，但是学习一个新的平台/框架总是一个好主意，因为你想学习 Spring，所以总是更好地学习一些东西示例或应用程序开发，所以我建议您继续您的任务。

Spring本身就是一片汪洋大海，你首先需要确定你要学习的所有部分，作为一个起点，我建议你先学习Spring的依赖注入原理，然后你可以开始探索Spring的其他方面。

# python - 如何进一步缩短将一个文件的内容复制到另一个文件的 Python 脚本？

> ID：11594100
> 
> 赞同：0
> 
> 时间：2012-07-21T16:55:31.203
> 
> 标签：python

我正在阅读 Zed Shaw 的“Learn Python The Hard Way”。我要练习 17 ( [http://learnpythonthehardway.org/book/ex17.html](http://learnpythonthehardway.org/book/ex17.html) ) 并在额外的积分 # 的 2 和 3 上碰壁。Zed 希望我通过消除任何不是的东西来缩短脚本必要的（他声称他可以只用脚本中的一行来运行它）。

这是原始脚本...

```
from sys import argv
from os.path import exists

script, from_file, to_file = argv

print "Copying from %s to %s" % (from_file, to_file)

# we could do these two on one line too, how?
input = open(from_file)
indata = input.read()

print "The input file is %d bytes long" % len(indata)

print "Does the output file exist? %r" % exists(to_file)
print "Ready, hit RETURN to continue, CTRL-C to abort."
raw_input()

output = open(to_file, 'w')
output.write(indata)

print "Alright, all done."

output.close()
input.close() 
```

这就是我能够将脚本缩短并仍然让它正常运行的内容（正确地我的意思是脚本成功地将预期的文本复制到预期的文件）......

```
from sys import argv
from os.path import exists

script, from_file, to_file = argv

input = open (from_file)
indata = input.read ()

output = open (to_file, 'w')
output.write (indata) 
```

我摆脱了打印命令和两个关闭命令（如果我错误地使用“命令”，请原谅......我对编码很陌生，还没有掌握术语）。

我尝试进一步缩短脚本的任何其他内容都会产生错误。例如，我尝试将“input”和“indata”命令组合成一行，就像这样......

```
input = open (from_file, 'r') 
```

然后我将脚本中的任何“indata”引用更改为“input”......

```
from sys import argv
from os.path import exists

script, from_file, to_file = argv

input = open (from_file, 'r')

output = open (to_file, 'w')
output.write (input) 
```

但我得到以下类型错误...

```
new-host:python Eddie$ python ex17.py text.txt copied.txt
Traceback (most recent call last):
  File "ex17.py", line 10, in <module>
    output.write (input)
TypeError: expected a character buffer object 
```

您将如何进一步缩短脚本......或将其缩短为仅一行，正如 Zed 建议的那样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T17:21:08.843

您可以只使用该`shutil`库并让操作系统承担副本的负担（而不是在 Python 中读取/写入数据）。

```
import shutil
shutil.copy('from_file', 'to_file_or_directory_name') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T17:00:28.157

您得到的当前错误是由于以下原因：

```
input = open (from_file, 'r')

output.write (input) 
```

[write()](http://docs.python.org/library/stdtypes.html?highlight=write#file.write)想要一个字符串作为参数，你给它一个文件对象。

此外，由于您试图消除多余的东西/缩短您的代码，小项目，打开文件的默认模式[是](http://docs.python.org/library/functions.html#open)ead `'r'`，打开文件进行读取时不必指定。

还可以考虑使用该`with`构造来打开和管理您的文件。优点是当你完成或遇到异常时，文件会自动为你关闭，所以不需要显式`close()`。例如，

```
with open('data.txt') as input:
   ## all of your file ops here 
```

PEP08 [**——Python 风格指南**](http://www.python.org/dev/peps/pep-0008/)（Python 程序员的“必读”）建议不要在函数和开头之间留空格`(`。

我不确定单行的目标是否总是会产生更好或更易读的解决方案，因此应牢记这一点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-21T17:05:43.803

```
from sys import argv
open(argv[2], 'w').write(open(argv[1]).read()) 
```

是尽可能短的。您可以使用分号将它们连接成一行，但这只是用其他字符替换行尾字符，并没有真正有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-24T11:27:39.200

不确定这是否是作者正在寻找的，但这是我经过多次试验和错误运行后提出的解决方案。我自己是初学者，所以请记住这一点。这是脚本：

```
 from sys import argv; script, from_file, to_file = argv
               in_file = open(from_file).read(); out_file = open(to_file, 'w').write(in_file) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-09T12:19:05.683

我从字面上理解了“in one line”指令，并完全省略了导入行。我也觉得它更友好：

```
open(raw_input("To file? "), "w").write(open(raw_input("From file? ")).read()) 
```

仍然没有关闭“到文件”，但是，嘿，一行！

--EDIT-- 我刚刚注意到，当脚本完成时，Python*确实*关闭了“To file”。所以，是的，一条线！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-30T08:12:59.177

下面的呢？以为这样就行了。

```
open(input(),'w').write(open(input()).read()) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-15T18:54:08.537

这就是我想出的（也是初学者）：

```
 from sys import argv

    script, from_file, to_file = argv

    open(to_file, 'w').write(from_file) 
```

它有效，但我不确定我是否打开了任何文件。我想我可能仍然需要 close() 命令。

# spring - Spring Security - 在应用程序上下文中找不到可见的 WebSecurityExpressionHandler 实例

> ID：11594104
> 
> 赞同：22
> 
> 时间：2012-07-21T16:56:44.840
> 
> 标签：spring, spring-security

仅当用户通过身份验证时，我无法在 JSP 页面中显示注销链接。这是我在 JSP 页面的这一行遇到的异常：

```
<sec:authorize access="isAuthenticated()"> 
```

例外：

```
Stacktrace:
....

root cause

javax.servlet.jsp.JspException: No visible WebSecurityExpressionHandler instance could be found in the application context. There must be at least one in order to support expressions in JSP 'authorize' tags.
    org.springframework.security.taglibs.authz.AuthorizeTag.getExpressionHandler(AuthorizeTag.java:100)
    org.springframework.security.taglibs.authz.AuthorizeTag.authorizeUsingAccessExpression(AuthorizeTag.java:58) 
```

这是我的应用程序上下文Security.xml：

```
<http auto-config='true' >
    <intercept-url pattern="/user/**" access="ROLE_User" />
    <logout logout-success-url="/hello.htm" />
</http>

<beans:bean id="daoAuthenticationProvider"
    class="org.springframework.security.authentication.dao.DaoAuthenticationProvider">
    <beans:property name="userDetailsService" ref="userDetailsService" />
</beans:bean>

<beans:bean id="authenticationManager"
    class="org.springframework.security.authentication.ProviderManager">
    <beans:property name="providers">
        <beans:list>
            <beans:ref local="daoAuthenticationProvider" />
        </beans:list>
    </beans:property>
</beans:bean>

<authentication-manager>
    <authentication-provider user-service-ref="userDetailsService">
        <password-encoder hash="plaintext" />
    </authentication-provider>
</authentication-manager> 
```

我知道我可以在 http 标记中使用 use-expression="true" ，但这意味着我必须在拦截 url 标记和 java 代码中使用表达式。有解决方法吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-21T18:53:43.800

您只需将一个添加到您的应用程序上下文中

```
<bean id="webexpressionHandler" class="org.springframework.security.web.access.expression.DefaultWebSecurityExpressionHandler" /> 
```

但最简单的方法是在您的`<http>`配置中启用表达式，然后会为您添加一个。这仅意味着您必须在该块中使用表达式，而不是在 Java 代码中，例如方法`@Secured`注释。

# yii - 如何设置 Yii 配置文件 - CProfileLogRoute 和 CWebLogRoute 问题

> ID：11594108
> 
> 赞同：0
> 
> 时间：2012-07-21T16:57:20.270
> 
> 标签：yii

我在这里关注信息： [http ://www.yiiframework.com/doc/guide/1.1/en/topics.logging](http://www.yiiframework.com/doc/guide/1.1/en/topics.logging)

请查看我的开发机器配置文件中的日志组件：

```
 'log'=>array(
    'class'=>'CLogRouter',
    'routes'=>array(
                    array(
                        'class'=>'CProfileLogRoute',
                        'levels'=>'error, warning, trace, info, profile',
                    ),
                    array(
                        'class'=>'CWebLogRoute',
                        'levels'=>'error, warning, trace, info, profile',
                        'showInFireBug'=>true,
                    ),
        ), 
```

使用 CProfileLogRoute 是有任何用途的，只要我们在应用程序代码中放置这样的东西：

```
Yii::beginProfile('blockID');
...code block being profiled...
Yii::endProfile('blockID'); 
```

1)

如果唯一的目的是测量速度，那么这些**级别是什么**

> '错误、警告、跟踪、信息、私人'

在这种情况下真的意味着什么？

非常感谢，MEM

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T04:24:37.110

看起来那些是代码中未使用的 CLogRoute（父类）的残余： [http ://code.google.com/p/yii/source/browse/tags/1.1.10/framework/logging/CProfileLogRoute.php](http://code.google.com/p/yii/source/browse/tags/1.1.10/framework/logging/CProfileLogRoute.php)

我倾向于设置 CProfileLogRoute 的唯一变量是“报告”： [http ://www.yiiframework.com/doc/api/1.1/CProfileLogRoute#setReport-detail](http://www.yiiframework.com/doc/api/1.1/CProfileLogRoute#setReport-detail)

# c++ - 将 std::string 的一部分复制到另一个未初始化的字符串

> ID：11594109
> 
> 赞同：1
> 
> 时间：2012-07-21T16:57:58.457
> 
> 标签：c++, string

我正在尝试编写一个将`std::string`包含 URL 的 C++ 函数拆分为其组件。我需要将组件复制到这个结构中：

```
typedef struct urlstruct {
    string protocol;
    string address;
    string port;
    string page;
} urlstruct; 
```

这是到目前为止的功能：

```
int parseAnnounce2(string announce, urlstruct *urlinfo){
    int i;

    if(announce.find("://") != string::npos){
        // "://" found in string, store protocol
        for(i = 0; i < announce.find("://"); i++){

        }
    } else {
        // No "://" found in string
    }

    return 0;
} 
```

我需要将 '://' 序列之前的字符复制到 urlinfo->protocol 字符串中。这样做的好方法是什么？

我知道我无法使用以下代码行分配它，因为协议字符串尚未初始化为包含该内存。

```
urlinfo->protocol[i] = announce[i]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T17:03:14.087

使用`std::string::assign`. 这应该有效：

```
if (announce.find ("://") != std::string::npos)
    urlinfo->protocol.assign (announce, 0, announce.find ("://"));
else
    //not found, handle 
```

或者，如果您想将结果存储`find`在变量中而不计算/键入两次，您也可以这样做：

```
std::string::size_type foundPos = announce.find ("://");
if (foundPos != std::string::npos)
    urlinfo->protocol.assign (announce, 0, foundPos);
else
    //not found, handle 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T17:03:30.547

`std::string::insert`应该在这里完成工作：

```
size_t pos = announce.find("://");
if(pos != std::string::npos)
{
    protocol.insert(0, announce, 0, pos);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T20:59:50.723

另一种选择是使用[std::string::substr()](http://en.cppreference.com/w/cpp/string/basic_string/substr)。您已经拥有此功能所需的所有信息。

# php - PHP：未设置在 foreach 中不起作用

> ID：11594116
> 
> 赞同：1
> 
> 时间：2012-07-21T16:59:02.350
> 
> 标签：php, foreach, unset

我正在尝试循环使用`unset`，`foreach`但它不起作用。

我的代码：

```
$aggr = $_GET;
foreach($aggr as $key => $value)
{
        $pos_key = preg_replace('/dst_addr/', '', $key);
        // why this not works:
        unset($aggr[$key]);
        unset($aggr[$key.'_h'.$pos_key]);
} 
```

在第二次迭代中，我的键是 eq `$key.'_h'.$pos_key`，但是应该删除这个键而不是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T17:06:00.060

PHP 制作数组的副本以对其进行迭代。由于您最终得到一个空数组，因此请使用堆栈：

```
$s = array_keys($_GET);

while($c = array_pop($s)) {
    $pos_key = str_replace('dst_addr', '', $key);

    $i = array_search($key . '_h' . $pos_key, $s);

    if($i !== false) {
        array_splice($s, $i, 1);
    }
} 
```

# c# - 使用“使用”时的意外行为

> ID：11594120
> 
> 赞同：3
> 
> 时间：2012-07-21T16:59:30.440
> 
> 标签：c#, asp.net, .net

我可以使用用户定义的类型，比如使用 block 里面的类吗？当我使用：

1.  它说，我需要继承 IDisposable 并实现 Dispose 方法。我继承并尝试定义 Dispose 方法，但我做不到。它向我展示了它不是公开的或其他东西:(请用一段关于如何实现它的小代码帮助我理解这一点。

2.  如果我在“using”括号内创建一个类的实例，尽管该变量的范围仅在该 using 块内，但为什么我不能在 using 之外创建具有相同变量的同一类的另一个实例？我认为没有充分的理由:(我的推理是否正确？但我可以使用相同的变量在 using 之外实例化另一个类（可以这样做吗？因为我没有看到编译错误），尽管我很清楚我们应该练习编码指南（但从概念上讲，我正在寻求逻辑）......

请帮忙，我是 C# 新手

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-21T17:02:39.057

该`using`语句的重点是调用接口`Dispose`中指定的方法。`IDisposable`

是的，在实现接口时，方法需要是公共的，或者您需要使用显式接口实现：

```
// Via a public method
public class Foo : IDisposable
{
    public void Dispose()
    {
        // Stuff
    }
}

// Via explicit interface implementation
public class Bar : IDisposable
{
    void IDisposable.Dispose()
    {
        // Stuff
    }
} 
```

这里没有什么特别的`IDisposable`——它只是普通的接口实现。

但是，您不应该`IDisposable`仅仅为了它而实施-想法是它应该为您清理-如果您没有要执行的清理，则也不需要该`using`语句。

至于第二点：您根本不允许声明与仍在范围内的另一个局部变量同名的局部变量。阅读起来会非常混乱，因此被禁止。从 C# 规范的第 8.5.1 节：

> 在 local-variable-declaration 中声明的局部变量的范围是发生声明的块。在局部变量的局部变量声明符之前的文本位置引用局部变量是错误的。在局部变量的范围内，声明另一个同名的局部变量或常量是编译时错误。

请注意，您仍然*可以*在一种方法中使用相同的局部变量名称两次，前提是它们不能同时在范围内：

```
void M()
{
    using (Stream x = ...)
    {
    }

    using (Stream x = ...)
    {
    }

    for (int x = 0; x < 10; x++)
    {
    }

    // Block introduced just for scoping...
    {
        string x = "";
        ...
    }
} 
```

# php - Twig nl2br 过滤器不适用于实体

> ID：11594121
> 
> 赞同：3
> 
> 时间：2012-07-21T16:59:38.567
> 
> 标签：php, symfony, twig, template-engine, nl2br

我有一个带有 __toString() 方法的地址实体，如下所示：

```
public function __toString() {
    $result = $this->getStreet();

    if ($this->getStreet2())
        $result .= '\n' . $this->getStreet2();

    $result .= '\n' . $this->getZipCode().' '.$this->getCity();
    return $result;
} 
```

在我的模板中，我在实体上应用了[Twig nl2br 过滤器](http://twig.sensiolabs.org/doc/filters/nl2br.html)：

```
{{ user.address|nl2br }} 
```

但我仍然得到逃脱的 \n ：

**1107 西亚当斯大道\n90007 洛杉矶, CA**

我尝试使用此字符串而不是实体：

```
{{ "1107 West Adams Boulevard\n90007 Los Angeles, CA"|nl2br }} 
```

我得到了预期的结果：

**1107 西亚当斯大道**

**加利福尼亚州洛杉矶 90007**

我也试过

```
{{ user.address|raw|nl2br }} 
```

这是不安全的，但仍然不起作用......我已经尝试过使用 Twig 1.8.0 和 1.9.0。

任何的想法 ？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-21T17:14:38.450

而不是：

```
$result .= '\n' . $this->getZipCode().' '.$this->getCity(); 
```

试试这个：

```
$result .= "\n" . $this->getZipCode()." ".$this->getCity(); 
```

PHP 将解释双引号字符串中的转义字符。

[这个 PHP 手册页](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.single)可能会有所帮助。

# ruby-on-rails - 在 MVC 中，数据库是模型的一部分吗？

> ID：11594123
> 
> 赞同：2
> 
> 时间：2012-07-21T17:00:01.983
> 
> 标签：ruby-on-rails, database, model-view-controller, model

在模型中定义关系的 RoR 中，这是否意味着数据库本身是模型的一部分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T17:07:56.097

数据库（或任何数据存储，在标准使用 Ruby On Rails 框架之外的更一般意义上）是模型保存在存储中的持久性。

将模型视为与命令交互和响应并表现出与业务逻辑一致的行为的“活动”事物。如果需要使模型“不活动”（以节省内存，或者因为它在逻辑上不再在发生的事情的范围内等），则表示模型属性的数据将持久保存到数据存储中。

注意区别。模型（或实体）*本身*不会持久化到数据存储中。 *表示（或描述）模型的**属性*被持久化到数据存储中。关于模型的足够信息，可以在以后将其重建为当前状态。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T17:01:05.720

不，模型是代表数据的对象，即实体。 [MVC 中的 M](http://odetocode.com/Blogs/scott/archive/2009/03/31/putting-the-m-in-mvc-part-i.aspx)*

# objective-c - 从我的 Cocoa 代码中终止应用程序

> ID：11594124
> 
> 赞同：0
> 
> 时间：2012-07-21T17:00:12.413
> 
> 标签：objective-c, cocoa, osx-leopard

我必须从我的 Cocoa 代码中以编程方式终止（而不是强制）应用程序。

实际上，这就是它的样子：

```
-(BOOL) terminateAppWithBundle:(NSString*)bundle {
    NSArray* array = [NSRunningApplication runningApplicationsWithBundleIdentifier:bundle];
    if ([array count] > 0){        
        NSRunningApplication* app = (NSRunningApplication*)[array objectAtIndex:0];
        [array makeObjectsPerformSelector:@selector(terminate)];
        float time = 0;
        while (!app.isTerminated){
            [NSThread sleepForTimeInterval:0.2];
            time += 0.2;
            if (time >= 15){
                return NO;
            }
        }
    }
    return YES;
} 
```

它工作得很好......但仅限于雪豹和狮子。
在 Leopard（我想支持）上，应用程序在启动时崩溃并显示以下错误消息：

```
Exception Type:  EXC_BREAKPOINT (SIGTRAP)
Exception Codes: 0x0000000000000002, 0x0000000000000000
Crashed Thread:  0

Dyld Error Message:
  Symbol not found: _OBJC_CLASS_$_NSRunningApplication 
```

我想这是因为 NSRunningApplication 不是 10.5 SDK 的一部分......如果不使用该类，我怎么能做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T17:48:37.167

自己用 AppleScript 解决：

```
-(BOOL) terminateiTunes {
    NSAppleScript *closeiTunes = [[NSAppleScript alloc] initWithSource:@"tell application \"iTunes\" to quit"];
    [closeXcode executeAndReturnError:nil];
    return YES;
} 
```

# ruby-on-rails - Rails：使用带有按钮的ajax时出现路由错误

> ID：11594136
> 
> 赞同：0
> 
> 时间：2012-07-21T17:01:25.593
> 
> 标签：ruby-on-rails, ajax

我是 Rails 新手，并已按照这个[问题](https://stackoverflow.com/questions/6899037/rails-ajax-fav-button-for-user-posts)的答案。

这就是我的项目中的情况：

控制器：

```
def create
  def create
      current_user.likes.create(:post_id => params[:post_id])
      render :layout => false
   end
end 
```

.js 文件：

```
$ ->
    $(".like").click ->
        post_id = $(this).attr('id')
        $.ajax
            type: 'POST'
            url: 'likes/' + post_id
            success: ->
                alert "succsess!" 
```

路由.rb

```
Sample::Application.routes.draw do
  resources :likes

  resources :users
  resources :sessions, only: [:new, :create, :destroy]
  resources :posts, only: [:create, :destroy]

  root              to: 'pages#home'
  match '/about',   to: 'pages#about'
  match '/contact', to: 'pages#contact'
  match '/help',    to: 'pages#help'
  match '/signup',  to: 'users#new'
  match '/signin',  to: 'sessions#new'
  match '/signout', to: 'sessions#destroy'
  post  '/likes/4', to: 'likes#create', :as => :like
end 
```

（我使用 '/likes/4' 来测试提议（将来会是 'post_id'））。

当我单击视图中的 Like 按钮时，like 存储在数据库中，但我收到此错误（当我在 Chrome 中使用检查器查看控制台时）...

```
POST http://0.0.0.0:3000/likes/4 500 (Internal Server Error) 
```

...而且我从来没有从 ajax 收到成功警报。

当我运行时`wget --post-data='' http://localhost:3000/likes/4`，我得到：

```
--2012-07-22 19:35:01--  http://localhost:3000/likes/4
Resolving localhost... ::1, 127.0.0.1, fe80::1
Connecting to localhost|::1|:3000... failed: Connection refused.
Connecting to localhost|127.0.0.1|:3000... connected.
HTTP request sent, awaiting response... 500 Internal Server Error
2012-07-22 19:35:02 ERROR 500: Internal Server Error. 
```

有谁知道是什么导致了这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T17:19:26.357

我认为这是因为你做了一个帖子，你的路线是一个获取。您可以在录制命令时显示它`rake routes`。尝试将您的 ajax 请求类型更改为 GET 或更改您的路线。替换`match`为`post`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:59:11.260

好的，我发现了问题！

首先，感谢斗鬼提出了一些帮助我前进的好观点！

解决方案：

我不得不改变唯一性验证：

```
validates :tag, :uniqueness => {:scope => :post} 
```

到：

```
validates :tag_id, :uniqueness => {:scope => :post_id} 
```

你可能想知道为什么？这里解释：http: [//thetenelements.blogspot.no/2011/08/undefined-method-text-for-nilnilclass.html](http://thetenelements.blogspot.no/2011/08/undefined-method-text-for-nilnilclass.html)

所以这是我在工作时的文件：

**喜欢.rb**

```
 validates :user_id, :uniqueness => {:scope => :post_id}
  belongs_to :user
  belongs_to :post 
```

**likes_controller.rb**

```
def userLikePost
   current_user.likes.create(:post_id => params[:post_id])
end 
```

**路线.rb**

```
match '/likes/:post_id', to: 'likes#userLikePost' 
```

**pages.js.coffee**

```
$ ->
    $(".like.btn.btn-mini").click (e) ->
        if $(this).attr("class") == "like btn btn-mini"
            post_id = $(this).attr('id')
            $.post '/likes/' + post_id
        e.stopImmediatePropagation();
        $(this).addClass("active") 
```

**html按钮**

```
<button class="like btn btn-mini" id="<%= feed_item.id %>"><i class="icon-heart"></i></button> 
```

在用户和帖子模型中，我有`has_many: likes`

希望这可以帮助其他人:)

# jdbc - 如何在 Java JDBC 中显示结果集中的 arrayList 内容？

> ID：11594137
> 
> 赞同：-1
> 
> 时间：2012-07-21T17:01:32.950
> 
> 标签：jdbc

所以我正在制作一个简单的 java 项目来在 glassfish 中使用 JDBC 并看看它是如何工作的。该程序仅向您显示调查列表和您选择的调查的问题列表。但是，我似乎无法显示我选择的调查的问题列表。我不断收到空值。这些是我创建的方法：

**将结果集转换为对象模型数据值**

```
public JHAKSurvey findSurvey(long id) {
    System.out.println("JDBC: FIND SURVEY");
    Connection connection = null;
    PreparedStatement ps = null;
    ResultSet rs = null;
    JHAKSurvey survey = null;
    try {
        connection = openConnection();
        String query = "SELECT * FROM APP.SURVEY WHERE ID=?";
        ps = connection.prepareStatement(query);
        ps.setLong(1, id);
        rs = ps.executeQuery();
        while (rs.next()) {
            survey = createSurveyFromResultSet(rs);             
        }
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        closeConnection(connection);
    }
    return survey;
} 
```

**从 QUESTION 表中查询问题列表以获取调查 ID 的私有方法**

```
private void findQuestionsBySurvey(JHAKSurvey survey){
    System.out.println("JDBC: FIND QUESTIONS BY SURVEY");
    Connection connection = null;
    PreparedStatement ps = null;

    try {
        connection = openConnection();
        String query = "SELECT * FROM APP.QUESTION WHERE SURVEYID=?";
        ps = connection.prepareStatement(query);
        ps.setLong(1, survey.getId());
        ps.executeQuery(query);
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        closeConnection(connection);
    }

} 
```

**将查找结果集列表转换为问题对象并将其添加到调查对象的私有方法**

```
private void createQuestionFromResultSet(ResultSet rs, JHAKSurvey survey){
    ArrayList<JHAKQuestion> qList = new ArrayList<JHAKQuestion>();      
    JHAKQuestion question = new JHAKQuestion();
    JHAKSurvey ss = new JHAKSurvey();
    //qList.add(survey.getQuestions());

    try {
        while (rs.next()) {
            //question.setDescription(qList.toString());
            question.setId(rs.getLong("ID"));
            question.setDescription(rs.getString("DESCRIPTION"));
            qList.add(question);
            survey.setQuestions(qList);
        }               
        System.out.println("createQuestionFromResultSet : JDBC : successful");
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        System.out.println("createQuestionFromResultSet : JDBC : fail");
        e.printStackTrace();
    }
} 
```

**将结果集转换为调查对象的私有方法。**

```
 private JHAKSurvey createSurveyFromResultSet(ResultSet rs){
    JHAKSurvey survey = new JHAKSurvey();
    Boolean active = false;
    String yes;
    try {
        yes = rs.getString("ACTIVE");
        survey.setId(rs.getLong("ID"));
        survey.setTitle(rs.getString("TITLE"));
        if (yes.equals(Character.toString('Y'))) {
            survey.setActive(true);
        } else {
            survey.setActive(false);
        }   
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return survey;
} 
```

我错过了什么？我似乎也收到错误：

```
cannot convert from void to JHAKQuestion 
```

当我尝试该方法时： createQuestionFromResultSet();

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T17:12:35.850

看你的方法：

```
private void findQuestionsBySurvey(JHAKSurvey survey){ 
```

您想获得调查的问题，但该方法返回无效。让它返回一个`List<Question>`. 在方法体中，遍历结果集，将每一行转换为一个问题，将问题添加到 a`List<Question>`中，然后返回这个列表。

或者，如果该方法的目标是将问题添加到作为参数传递的调查中，则将该方法重命名为

```
private void addQuestionsToSurvey(JHAKSurvey survey) { 
```

并且，在方法体内，调用方法`createQuestionFromResultSet`（应该命名为`createQuestionsFromResultSetAndAddThemToSurvey`），并以结果集和调查作为参数：

```
private void findQuestionsBySurvey(JHAKSurvey survey){
    System.out.println("JDBC: FIND QUESTIONS BY SURVEY");
    Connection connection = null;
    PreparedStatement ps = null;

    try {
        connection = openConnection();
        String query = "SELECT * FROM APP.QUESTION WHERE SURVEYID=?";
        ps = connection.prepareStatement(query);
        ps.setLong(1, survey.getId());
        ResultSet rs = ps.executeQuery(query);
        createQuestionFromResultSet(survey); 
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        closeConnection(connection);
    }

} 
```

# java - 在下载期间使用 swingworker 更新 JProgressBar

> ID：11594139
> 
> 赞同：2
> 
> 时间：2012-07-21T17:01:50.353
> 
> 标签：java, multithreading, swing, swingworker, jprogressbar

问题解决了！！！！！！非常感谢垃圾神和 HoverCraftFullOfEels！我终于通过使用下面的示例并稍微改变它来了解这个概念。更改允许缩放进度条（默认为 100 个单位）。再次感谢您的耐心和愿意解决这个问题。意味着很多人，~Kyte

ps - +1 全方位 :)

```
/** @see http://stackoverflow.com/questions/4637215 */
public class Threading_01 extends JFrame {

private static final String s = "0.00";
private JProgressBar progressBar = new JProgressBar(0, 100);
private JLabel label = new JLabel(s, JLabel.CENTER);

public Threading_01() {
    this.setLayout(new GridLayout(0, 1));
    this.setTitle("√2");
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    this.add(progressBar);
    this.add(label);
    this.setSize(161, 100);
    this.setLocationRelativeTo(null);
    this.setVisible(true);
}

public void runCalc() {
//    progressBar.setIndeterminate(true);
    TwoWorker task = new TwoWorker();
    task.addPropertyChangeListener(new PropertyChangeListener() {

        @Override
        public void propertyChange(PropertyChangeEvent e) {
            if ("progress".equals(e.getPropertyName())) {
                progressBar.setIndeterminate(false);
                progressBar.setValue((Integer) e.getNewValue());
                System.out.println("**: " + e.getNewValue());
            }
        }
    });
    task.execute();
}

private class TwoWorker extends SwingWorker<Double, Double> {

    private static final int N = 734;
    private final DecimalFormat df = new DecimalFormat(s);

    @Override
    protected Double doInBackground() throws Exception {
        int cntr = 1; //
        double d1;
        double d2;
        double d3;
        for (int i = 0; i <=N; i++) {   
            d1 = N;
            d2 = i;
            d3 = d2/d1;
            d3 = d3 * 100;
            System.out.println(i + "++ " + d3);
            if(d3 >= cntr){
                System.out.println(i + "UPDATE");
                cntr++;
                setProgress(cntr);
                publish(Double.valueOf(cntr));
                Thread.sleep(250); // simulate latency
            }
        }
        return Double.valueOf(0);
    }

    @Override
    protected void process(List<Double> chunks) {
        for (double d : chunks) {
            label.setText(df.format(d));
            System.out.println(": " + d);
        }
    }
}

public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {

        @Override
        public void run() {
            Threading_01 t = new Threading_01();
            t.runCalc();
        }
    });
} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T17:09:22.273

更新进度条通常在 a 中处理，如此[处](https://stackoverflow.com/a/4637725/230513)`PropertyChangeListener`所示。另请参阅此相关[示例](https://stackoverflow.com/a/4530659/230513)。如果您的工作人员以后可以提供更明确的进展，那么调用是一个合理的初始设置。`setIndeterminate(true)`

# c# - 静态类的静态方法如何知道调用者？

> ID：11594140
> 
> 赞同：3
> 
> 时间：2012-07-21T17:01:51.543
> 
> 标签：c#, .net, c#-4.0, static, static-methods

想象一下，我有一个静态类和一个静态方法。它必须由 10 个不同的类访问。但是静态类如何知道谁调用了它:(

这是一个面试问题....请正确改写并回答我，我是新人:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T17:17:48.957

由于 C# 没有适当的元对象系统，我知道的唯一方法是通过反射。下面的想法应该给出这个想法：

```
public static string GetCaller()
{
    var trace = new StackTrace(2);
    var frame = trace.GetFrame(0);
    var caller = frame.GetMethod();
    var callingClass = caller.DeclaringType.Name;
    var callingMethod = caller.Name;
    return String.Format("Called by {0}.{1}", callingClass, callingMethod);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T17:12:00.450

我会尝试以下方法：

```
public class ParentClass
{
}

public class ChildClass :  ParentClass
{
}

public static class StaticClass
{
    public static void SomeMethod(ParentClass d)
    {
        var t = d.GetType();
    }
}

public class StaticChildren
{
    public void Children()
    {
        var p = new ChildClass();

        StaticClass.SomeMethod(p);

    }
} 
```

只传递一个实例是您可以在这里做的最简单的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T17:06:15.543

您可以使用 stracktace 找出谁调用了静态方法！

```
class Foo
{
  public void static staticMethod()
  {
    // here i want to know who called me!
    StackTrace st = new StackTrace();
    ...
  }
}

class Bar
{
  public void Bar()
  {
    Foo.staticMethod();
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T17:07:26.557

在这些情况下，您可以使用反射。

在这些链接下找到更多关于反射的信息： [http ://www.csharp-examples.net/reflection-calling-method-name/](http://www.csharp-examples.net/reflection-calling-method-name/)

[http://msdn.microsoft.com/en-us/library/ms173183(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms173183(v=vs.80).aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-21T18:14:59.357

如果方法的功能取决于调用它的人，那么设计可能不是很好。我会引入新参数。

出于调试目的，堆栈跟踪？

# c# - 使用 MongoDB 更新内部列表

> ID：11594142
> 
> 赞同：2
> 
> 时间：2012-07-21T17:02:11.840
> 
> 标签：c#, asp.net-mvc

我有一个对象

```
public class Object1{
public List<Object2> {get;set;}
}

public class Object2{
public Name{get;set;}
public Address{get;set;}
} 
```

我有一项功能，用户可以只更新 Object2 的一个实例。所以我保存 Object2 的代码看起来像

```
[HttpPost]
public ActionResult SaveObject2(Object2 obj2)
{
  if (obj2.Id == null){
       //Add Logic
       obj1.Obj2List.Add(obj2)  
    }
   else{
      // Update logic
   }
} 
```

但是 obj2.Id 永远不会为 null。Id 是 ObjectId 类型。我如何检查逻辑以查看是否需要插入或更新？我正在使用官方 C# 驱动程序使用 asp.net MVC 3 和 Mongo DB。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T17:53:41.307

该`ObjectId`类型是一个结构，而不是一个类 - 所以它永远不会是`null`. 而是检查`ObjectId.Empty`。

不过请注意：我想您将 id 存储`Object2`在请求之间的某个隐藏字段中。如果是这种情况，请注意恶意用户可以通过使用 HTTP 代理（例如 Fiddler）轻松更改 ID，从而诱使您相信`Object2`正在更新而不是添加。

根据您尝试执行的操作的上下文，我建议您执行一些额外的检查，以更可靠地确定您是否应该插入或更新您的对象。

# android - 引用 Mono.Android.GoogleMaps 时出现应用程序未安装错误

> ID：11594143
> 
> 赞同：1
> 
> 时间：2012-07-21T17:02:13.200
> 
> 标签：android, google-maps, xamarin.android, kindle-fire, xamarin

我正在对我的应用程序进行新的更新，并添加了谷歌地图支持。我添加了对 Mono.Android.GoogleMaps 程序集的引用。一切都很好，在我的 Droid X 设备上测试良好，所以我将 .apk 发送给了 beta 测试人员。然后我尝试在我的 Kindle Fire 上安装（允许未知来源），但安装失败。我还收到了来自 beta 测试人员的报告，他们在摩托罗拉 Photon 上收到了相同的信息。

后来我了解到 Kindle Fire 和 NOOK 没有 Google Maps 集成。我已经建立了“位置”权限，但不确定是否需要。

我刚刚根据亚马逊信息为 Kindle Fire 启动了 AVD，并尝试部署调试版本。我收到此错误消息：

![将错误部署到 Kindle Fire 模拟器 AVD](../Images/e09bcd6796757529119515e861c41c58.png)

你建议我如何进行？如果这个问题是被引用的谷歌地图，你如何处理这个问题，以便我的应用程序可以在没有这个共享库的设备上运行？我在代码中测试什么时候允许这样的功能？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T13:54:28.593

我研究了这个问题并将这一行添加到我的 AssemblyInfo.cs 中，现在它安装到了 Kindle Fire。

```
[assembly: UsesLibrary(Name="com.google.android.maps", Required=false)] 
```

# objective-c - 检测 iPhone 的垂直度

> ID：11594144
> 
> 赞同：0
> 
> 时间：2012-07-21T17:02:17.280
> 
> 标签：objective-c, ios, gyroscope, core-motion

> **可能重复：**
> [在 iOS 上获取相对于地理北方的俯仰、滚动和偏航？](https://stackoverflow.com/questions/9313474/get-pitch-roll-and-yaw-relative-to-geographic-north-on-ios)

有没有办法检测 iPhone 是垂直的？

陀螺仪为我们提供了相对于位置的绝对角度。

但是我怎么知道这个相对位置是否对应于垂直位置呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T17:12:39.390

```
if (UIInterfaceOrientationIsPortrait([[UIDevice currentDevice] orientation])) {
    // device is currently in portrait (vertical) orientation
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T17:13:09.807

如果您不是在寻找精确的角度信息，只是宏观方向，检查`[[UIDevice currentDevice] orientation]`。

请务必阅读类文档以了解一些重要的实现细节。

# joomla - Joomla 指南、教程和更多信息

> ID：11594154
> 
> 赞同：1
> 
> 时间：2012-07-21T17:03:50.717
> 
> 标签：joomla, virtuemart, zen-cart

请问是否有任何教程、指南网站或视频可以指导我从头开始为 Virtuemart 2.0.8 构建模板/主题？

您还建议使用 Joomla 和 Virtuemart 或 Zen Cart 来制作电子商务网站，我的意思是使用 HTML、CSS 和 Jquery 从头开始​​制作模板和主题。

此外，我计划每 8 小时从 ftp 服务器自动将一个文本文件添加到我的数据库中，以便自动更新网站的产品价格。我知道 Virtuemart 我可以用 CSVI 做到这一点，但 Zen Cart 有类似的吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T18:55:33.470

如果您对 HTML、CSS 和 JQuery 没有经验，那么制作自己的模板将非常困难。您最好使用免费的或根据自己的需要对其进行调整。

至于您对使用 Zen Cart 或 VirtueMart 的疑问。我建议使用 VirtueMart 作为其完全集成的工具，但是 JVitals 为那些喜欢使用 Zen Cart 的人搭建了一座桥梁，可以在[这里找到](http://extensions.joomla.org/extensions/access-a-security/site-access/authentication-bridges/6701)

# java - MySQL 异常 - com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException

> ID：11594157
> 
> 赞同：1
> 
> 时间：2012-07-21T17:04:51.433
> 
> 标签：java, mysql, exception, jdbc

我得到错误：

> '字段列表'中的未知列'customerno''。

但是，该列存在于我的客户表中。那为什么我会得到这个异常？

代码：

```
import java.sql.*;  

public class Classy {  

    static String myQuery =   
            "SELECT customerno, name" +  
            "FROM customers;";  

    public static void main(String[]args)  
    {  
        String username = "cowboy";  
        String password = "1234567";  
        try  
        {  
            Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/Business", username, password);  
            Statement stmt = con.createStatement();  
            ResultSet rs = stmt.executeQuery(myQuery);  

            while(rs.next())  
            {  
                System.out.print(rs.getString("customerno"));  
            }

        } catch(SQLException ex){System.out.println(ex);}  

    }  

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T17:12:17.210

看看你的查询到底是什么。这个：

```
static String myQuery =   
        "SELECT customerno, name" +  
        "FROM customers;"; 
```

相当于：

```
static String myQuery = "SELECT customerno, nameFROM customers;"; 
```

现在你能看出什么问题了吗？我很惊讶它抱怨`customerno`而不是缺少`FROM`一部分......

请注意，我怀疑您也不想要`;`。我会把它写成一行，只是为了可读性，如果可以的话，以及限制可访问性并使其成为最终版本：

```
private static final String QUERY = "SELECT customerno, name FROM customers"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T17:21:10.913

你的语法的问题是你在**和****之间没有空格`name``FROM`**

```
String myQuery =   
        "SELECT customerno, name" +  // problem is here
        "FROM customers;"; 
```

而是在之后添加一个空格`name`

```
 String myQuery =   
        "SELECT customerno, name " +  // add space here
        "FROM customers"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T17:10:09.337

```
import java.sql.*;  

public class Classy {  

static String myQuery =   
        "SELECT customerno, name" +  
        "FROM customers;";  

public static void main(String[]args)  
{  
    String username = "cowboy";  
    String password = "1234567";  
    try  
    {  
        Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/Business", username, password);  
        Statement stmt = con.createStatement();  
        ResultSet rs = stmt.executeQuery(myQuery);  

        while(rs.next())  
        { 
```

//尝试使用数据库中存在的数值来更改它，例如，如果它是第 2 列，则执行类似 rs.getString(1) 的操作；

```
 System.out.print(rs.getString("customerno"));  
        }  

    }catch(SQLException ex){System.out.println(ex);}  

}  

} 
```

# php - 从 PHP 获取 JSON 数据到 iOS

> ID：11594158
> 
> 赞同：1
> 
> 时间：2012-07-21T17:04:52.710
> 
> 标签：php, ios, json

我正在开发一个 iPhone 应用程序来显示来自 php 的数据。数据从 Mysql 数据库中获取，然后在 php 文件中编码为 JSON 格式：

```
include_once 'connectionIncl.php';

if(function_exists($_GET['method'])){
    $_GET['method']();

}
function getSQLIntoJSONFormat()
{
    $arr;
    $sql = mysql_query("SELECT * FROM pecivo");
    while($pecivo = mysql_fetch_assoc($sql)){
        $arr[] = $pecivo['typ'];
    }
    $arr= json_encode($arr);
    echo $_GET['jsoncallback'].'('.$arr.')';
}

// --- http://127.0.0.1:8887/TeplyRohlik/pecivo.php?method=getSQLIntoJSONFormat&jsoncallback=? 
```

当我从浏览器运行它时，它返回正确的数据：

```
(["sejra","knir","baba","vousy","sporitelna25"]) 
```

此外，在 iOS 上有此代码：

```
NSString * urlString = [NSString stringWithFormat:@"http://192.168.0.10:8887/TeplyRohlik/pecivo.php?method=getSQLIntoJSONFormat&jsoncallback=?"];
NSURL * url = [NSURL URLWithString:urlString];
NSData * data = [NSData dataWithContentsOfURL:url];
NSError * error;
NSMutableDictionary *json = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
NSLog(@"%@",json); 
```

结果是.... ( `null`)。我不知道如何让这个工作......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T17:20:12.167

看起来您的 PHP 方法正在吐出[JSONP](http://en.wikipedia.org/wiki/JSONP)。您可能想要做的是将其更改为：

```
function getSQLIntoJSONFormat()
{
    $arr;
    $sql = mysql_query("SELECT * FROM pecivo");
    while($pecivo = mysql_fetch_assoc($sql)){
        $arr[] = $pecivo['typ'];
    }
    $arr= json_encode($arr);
    echo $arr;
} 
```

您看到输出被括在括号中，因为它期望在调用的请求中有一个 GET 参数，`jsoncallback`这将使输出看起来像这样：

```
javascriptFunction(["a","b","b"]) 
```

这不是您想要的 iOS 设备。您只需要数组的原始 JSON 字符串，而不需要包装在回调函数调用中。

# delphi - Delphi：WebBrowser 的 OnDownloadComplete 一次发生多次

> ID：11594160
> 
> 赞同：2
> 
> 时间：2012-07-21T17:04:56.983
> 
> 标签：delphi, events, browser

例如在这段代码中：

```
procedure TForm1.WebBrowser1DownloadComplete(Sender: TObject);
begin
        ShowMessage('Download Completed');
end;

procedure TForm1.FormCreate(Sender: TObject);
begin
        WebBrowser1.Navigate('http://www.google.com/');
end; 
```

“WebBrowser1DownloadComplete”消息在 1 Navigate 上多次出现。
这很烦人，使这个事件几乎毫无用处。

为什么会这样？如何避免这种情况？
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T17:12:02.290

也许 OnNavigationComplete2 事件处理程序更适合您的应用程序。

> 在 Web 浏览器成功导航到新位置后立即发生。
> 
> 编写 OnNavigateComplete2 事件处理程序以在 Web 浏览器成功导航到新资源时执行特定操作。该事件可以在文档完全下载之前发生，但是当它发生时，必须至少接收部分文档并创建文档的查看器。

# php - Yii gridview 在值中使用外部变量

> ID：11594164
> 
> 赞同：18
> 
> 时间：2012-07-21T17:05:32.647
> 
> 标签：php, gridview, yii

我的教师模型中有一个函数，它返回类别数组。

```
getCaterogies() {
   return array('1' => 'short tempered', '2' => 'funny', '3' => 'visionary', ...);
} 
```

我将索引存储在数据库中，并使用与该数组对应的数组的值在任何地方显示值。

```
$categories = $teacher->categories;
$category = $categories[$teacher->category]; 
```

我这样做是因为曾经有人建议我不要在数据库中存储作为状态的字符串，而是存储整数值，并将转换存储在数据库中或在 ht 模型中定义它。字符串的问题在于它们在比较中更容易出现人为错误。也许是因为区分大小写。

现在我面临的问题是，在 gridview 中显示值时，我需要在值字段中写入 2 行，但它是一个表达式，并且不需要外部变量。

我怎样才能让它为gridview工作？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-07-21T17:21:11.600

您可以使用匿名函数作为值，该值可以采用`$row`, `$data`params 其中`$row`保存行号（从零开始）并`$data`包含该行的数据模型。

这样你就可以只在内部定义它。

```
$this->widget('zii.widgets.grid.CGridView', array(
    'dataProvider'=>$dataProvider,
    'columns'=>array(
        array(
            'name'=>'..',
            'value'=>function($data,$row){
                $categories = $teacher->categories;
                return $categories[$data->category];
            },
        ),
    ),
)); 
```

如果你想从外部使用它，你可以依赖 PHP 的`use`：

```
$categories = $teacher->categories;
$this->widget('zii.widgets.grid.CGridView', array(
    'dataProvider'=>$dataProvider,
    'columns'=>array(
        array(
            'name'=>'..',
            'value'=>function($data,$row) use ($categories){
                return $categories[$data->category];
            },
        ),
    ),
)); 
```

我个人会推荐第二个，因为这样数组的计算将只有一次，并且将在所有情况下使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T17:18:40.303

你可以写

```
$categories = $teacher->categories;
$category = $categories[$teacher->category]; 
```

在一行中：

```
$category = $teacher->categories[$teacher->category]; 
```

另外，我建议您使用另一种解决方案：

```
class ModelClass
{
    const STATUS_SHORT_TEMPERED = 1;
    const STATUS_FUNNY = 2;
    const STATUS_VISIONARY = 3;
} 
```

这允许您使用更语义化的

```
ModelClass::STATUS_FUNNY; 
```

而不是更少的语义

```
2; 
```

此外，您可以通过以下方式组成数组：

```
getCaterogies() {
    return array(
        ModelClass::STATUS_FUNNY => 'status funny',
        ...
    );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-28T11:49:11.630

'urlCreator' => 函数 ($action, $model, $key, $index) 使用($under_category) {

# visual-studio-2010 - 在哪里可以找到 Visual Studio 项目的“Visual Studio 包”模板？

> ID：11594167
> 
> 赞同：3
> 
> 时间：2012-07-21T17:05:37.657
> 
> 标签：visual-studio-2010, templates, plugins

我正在尝试为 Visual Studio 2010 创建一个插件（工具窗口），并遵循 inn MSDN 的指令 - [http://msdn.microsoft.com/en-us/library/bb165051(v=vs.110](http://msdn.microsoft.com/en-us/library/bb165051(v=vs.110) )

在第 3 步中： 3\. 在*Templates*窗格中单击*Visual Studio Package*。

但是，在我的 Visual Studio 中，我看不到该模板（我只看到*Visual Studio Add In*）为什么它不见了？我在哪里可以找到它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T15:20:39.053

我相信你的[VS 2010 SDK](http://www.microsoft.com/en-us/download/details.aspx?id=2680)没有安装（或者它坏了，需要重新安装）。

安装 SDK 后，模板将出现`[ProgramFiles]\Microsoft Visual Studio 10.0\Common7\IDE\ProjectTemplates\`并可供使用。

有关详细信息，请参阅[此页面。](http://msdn.microsoft.com/en-US/library/dd885119.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T20:07:19.480

您是否尝试过使用以下开关运行 Visual Studio 2010？

```
- devenv /resetskippkgs
- devenv /setup
- devenv /resetttings
- devenv /installvstemplates 
```

# php - PHP & MySQL - 显示数据库中最后十个条目的最有效方式？

> ID：11594168
> 
> 赞同：0
> 
> 时间：2012-07-21T17:05:38.640
> 
> 标签：php, mysql, database

所以我有一个数据库，我想显示最后十个条目。

到目前为止，我已经尝试了几种方法，但遇到了几个问题。我已经尝试使用从数据库的行数开始的 for 循环并将其链接到 ID，但是我当然应该删除一个条目，迭代将丢失数据。例如，如果我删除了很多条目并且第一个条目从 id 20 开始，那么如果只有 10 行，它将看起来显示 10 到 1，但不存在。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T17:07:37.077

您可以尝试，具体取决于您的实施，

```
SELECT * FROM `table_name` WHERE conditions ORDER BY `id` DESC LIMIT 10; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T17:20:49.420

尝试这个 ：

```
mysql_connect("localhost","usernm","pwd");
mysql_select_db("database");
$rs=mysql_query("SELECT id,col1,col2,coln FROM table_name WHERE condt ORDER BY id DESC LIMIT 10") or die(mysql_error());
while($row=  mysql_fetch_row($rs))
{
    print_r($row);
} 
```

# objective-c - 如何在 iOS Objective-C 应用程序和 Ruby on Rails 之间对加密数据进行编码？

> ID：11594174
> 
> 赞同：3
> 
> 时间：2012-07-21T17:06:06.423
> 
> 标签：objective-c, ios, ruby, encryption, aes

我正在开发一个 iOS 和 Ruby on Rails 应用程序，需要将数据从 iOS 应用程序加密传输到 Ruby on Rails 应用程序。我的挑战是如何以我可以在 Rails 端解码的方式对 Objective-C 中的数据进行编码。我使用[这个 SO question 中的示例](https://stackoverflow.com/questions/1400246/aes-encryption-for-an-nsstring-on-the-iphone)作为加密数据的方法，示例代码显示了加密数据的样子：

```
printf("%s\n", [[plain description] UTF8String]); 
```

这会创建如下所示的输出：

> <3fe47b63 bd9a84ab 30dfb1a4 e409b60f>

我面临的挑战是，我需要找到一种方法将其通过网络传输到 Rails 应用程序，以便我可以解码以与 OpenSSL 代码一起使用，例如：

```
def decrypt(data)
  cipher = OpenSSL::Cipher::Cipher.new('aes-256-cbc')
  cipher.decrypt
  cipher.key = cipher_key
  cipher.iv = cipher_iv
  decrypted_data = cipher.update(data)
  decrypted_data << cipher.final
end 
```

我认为 Base64 编码可能是最好的方法，因为这些数据最终会出现在 JSON 请求的 HTTP 标头中。似乎我可以使用 Base64.decode64 来解码 Ruby 端的数据并将其作为要解密的数据传递，但我希望有人可以指导我这是否真的是最好的方法，并且不管编码，如何将指针转换为 NSData 对象，如下所示：

```
NSData *cipher = [plain AES256EncryptWithKey:key]; 
```

进入该编码值以将其发送到 Rails 应用程序。谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-01T01:53:21.167

您可以使用标准的 AES 加密。以下是您可以在两个平台上快速使用的带有 AES-256-CBC 密码和 Base64 编码的库：

# 红宝石

### [https://github.com/Gurpartap/aescrypt](https://github.com/Gurpartap/aescrypt)

## 以下是使用 AESCrypt Ruby gem 的方法：

```
message = "top secret message"
password = "p4ssw0rd"

# Encrypting
encrypted_data = AESCrypt.encrypt(message, password)

# Decrypting
message = AESCrypt.decrypt(encrypted_data, password) 
```

* * *

# Objective-C

### [https://github.com/Gurpartap/AESCrypt-ObjC](https://github.com/Gurpartap/AESCrypt-ObjC)

## 以下是使用 AESCrypt Objective-C 类的方法：

```
NSString *message = @"top secret message";
NSString *password = @"p4ssw0rd";

// Encrypting
NSString *encryptedData = [AESCrypt encrypt:message password:password];

// Decrypting
NSString *message = [AESCrypt decrypt:encryptedData password:password]; 
```

祝你好运！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-22T02:05:38.040

我最终选择了 Base64 路线。我[在另一个 SO 答案中使用了 NSStringAdditions base64FromData 方法](https://stackoverflow.com/questions/392464/any-base64-library-on-iphone-sdk)：

```
+(NSString *)encryptToBase64String:(NSString *)data {
    NSString *key = <key here>;
    NSData *plain = [data dataUsingEncoding:NSUTF8StringEncoding];
    NSData *cipher = [plain AES256EncryptWithKey:key];
    NSString *str = [NSString base64StringFromData:cipher length:[cipher length]];
    return str;
} 
```

然后将 base 64 编码的字符串添加到 RestKit HTTP 标头：

```
[[RKClient sharedClient] setValue:encryptedTimestamp forHTTPHeaderField:@"<encrypted_header_value>"]; 
```

# javascript - 无需ajax即可实时更改网页内容

> ID：11594176
> 
> 赞同：4
> 
> 时间：2012-07-21T17:06:47.623
> 
> 标签：javascript, jquery, html, ajax

我在 stackoverflow.com 的萤火虫的帮助下意识到，当有人接受你的答案时，你的分数突然增加了，而没有任何方法收到任何 Ajax 命中。太神奇了，怎么可能？

请提出建议，以便我可以尝试将这种技术应用到我即将进行的项目中。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T17:11:20.837

它使用[WebSockets](https://developer.mozilla.org/en/WebSockets/)而不是~~AJAX~~现代浏览器中的 XMLHttpRequest。[您可以在meta.stackoverflow.com](https://meta.stackexchange.com/questions/125677/new-feature-real-time-updates-to-questions-answers-and-inbox)上找到有关 Stack Overflow 实施的更多详细信息。

WebSockets 的主要优点是**服务器可以在您收到 upvote 的那一刻向浏览器发送更新**。其他方法，例如 XHR 和隐藏 iframe，需要浏览器定期轮询服务器以获取更新的投票计数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T17:29:26.540

确保您已经查看了 net 选项。有两种方法我可以告诉。

1.  网络套接字
2.  iFrame

请查看[http://www.html5rocks.com/en/features/connectivity](http://www.html5rocks.com/en/features/connectivity)和[http://html5demos.com/web-socket](http://html5demos.com/web-socket)

但适用于有限的浏览器

将 iFrame 与简单的 get 请求一起使用，不会进行 ajax 调用，但您将能够看到它的萤火虫网。这就是 Facebook 使用的和所有浏览器兼容的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T17:12:42.423

您可以使用图像提交按钮并提交到显示数字的小型 iframe。

否则你仍然会在隐藏的 iframe 中搞乱，并在隐藏的 iframe 中提交或获取帖子。

如果您真的想要一个少 javascript 的解决方案，那么表单提交隐藏/小型 iframe 是可行的方法。

# android - 将 Tabbar 放在屏幕底部

> ID：11594180
> 
> 赞同：-1
> 
> 时间：2012-07-21T17:07:16.470
> 
> 标签：android, android-layout, tabs

我想将标签栏小部件放在屏幕的按钮上，但我失败了。这是我的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <RelativeLayout
        android:layout_height="fill_parent"
        android:layout_width="fill_parent">
        <TabWidget
            android:id="@android:id/tabs"
            android:layout_alignParentBottom="true"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:padding="5dp" />
    </RelativeLayout>
</TabHost> 
```

我正在使用安卓 2.3.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T05:49:55.043

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@android:id/tabhost"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
    <RelativeLayout
       android:orientation="vertical"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent"
       android:padding="3dp">
       <FrameLayout
           android:id="@android:id/tabcontent"
           android:layout_width="fill_parent"
           android:layout_height="fill_parent"
           android:layout_weight="1" />
       <TabWidget
           android:id="@android:id/tabs"
           android:layout_width="fill_parent"
           android:layout_height="wrap_content"
           android:layout_alignBottom = "@android:id/tabcontent"
           />
    </RelativeLayout>
</TabHost> 
```

# c++ - 获取 QT 中的窗口 WId 列表

> ID：11594184
> 
> 赞同：3
> 
> 时间：2012-07-21T17:07:24.737
> 
> 标签：c++, qt, screenshot

我正在用 QT 编写一个库，它将截取任意外部窗口的屏幕截图。我知道如何使用 截取屏幕截图`QScreen::grabWindow()`，但这需要作为参数 a `WId`，我想知道是否有办法获取`WId`屏幕和/或桌面上所有窗口的 s 列表（或类似的东西，例如通过 QT获取`WId`使用标题名称的特定窗口）。我知道我可以以依赖于平台的方式执行此操作，例如`EnumWindows`在 Windows 中，但我希望尽可能在 QT 中保持跨平台。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T17:47:34.360

这在 Qt 中是不可能的。如果您希望您的库独立于平台，您需要为每个要支持的平台编写代码。

要使该平台独立，您必须编写一个（公共）函数，在其中使用预处理器测试平台`#if`：

```
#ifdef __unix__
    // call unix specific code
#elseif ...
    // other platforms
#else
#error Platform not supported!
#endif 
```

对于 unix 特定的代码，您需要使用 xlib，它以树的形式管理窗口。从下面的代码中，您将获得所有窗口，并且在 X11 中有很多不可见的窗口和您认为它们不是单独的窗口的窗口。所以你肯定要过滤结果，但这取决于你想要的窗口类型。

以这段代码作为开始：

```
#include <X11/Xlib.h>

// Window is a type in Xlib.h
QList<Window> listXWindowsRecursive(Display *disp, Window w)
{
    Window root;
    Window parent;
    Window *children;
    unsigned int childrenCount;

    QList<Window> windows;
    if(XQueryTree(disp, w, &root, &parent, &children, &childrenCount))
    {
        for(unsigned int i = 0; i < childrenCount; ++i)
        {
            windows << children[i];
            windows << listXWindowsRecursive(disp, children[i]);
        }
        XFree(children);
    }
    return windows;
}

Display *disp = XOpenDisplay(":0.0");
Window rootWin = XDefaultRootWindow(disp);
QList<Window> windows = listXWindowsRecursive(disp, rootWin);

foreach(Window win, windows)
{
    // Enumerate through all windows
} 
```

# magento - Magento：备份选项

> ID：11594189
> 
> 赞同：11
> 
> 时间：2012-07-21T17:07:46.830
> 
> 标签：magento, backup, database-backups, backup-strategies

我对以下找到的 Magento 选项有疑问：

管理面板 -> 系统 -> 工具 -> 备份

“系统备份”、“数据库和媒体备份”和“数据库备份”有什么区别。

我想我可以弄清楚2和3之间的区别，2是上传的图像和类似的上传内容中没有存储在数据库中的文件也被备份了，但是1和2之间的区别是什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-21T17:54:38.093

1.  **系统备份**将创建整个源代码和数据库的 .tgz
2.  **数据库和媒体备份**将创建一个包含数据库备份和媒体目录内容的 .tgz
3.  **数据库备份**将仅备份数据库

# clojure - 无法在类路径上找到 clojure/contrib/string__init.class 或 clojure/contrib/string.clj

> ID：11594193
> 
> 赞同：0
> 
> 时间：2012-07-21T17:08:15.020
> 
> 标签：clojure, leiningen

我正在使用 contrib.string 库中的方法，但 lein 无法找到该库。

在我的 project.clj 我有`:dependencies [[org.clojure/clojure "1.4.0"]]`里面`defproject`然后`(use '[clojure.string :only (join)]) (use '[clojure.contrib.string :only (as-str)])`里面`src/file.clj`

我是否需要添加另一个依赖项来包含 contrib？我找到了 1.2 的示例，但似乎发生了变化，并且缺少文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T17:26:33.920

Monolithic contrib 早已不复存在，当 clojure 1.3.0 发布时，它已被拆分为几个模块。现在`clojure.string`属于标准的clojure库。该命名空间中没有`as-str`函数，但鉴于它的名称，我假设您需要`str`函数。

UPD：我搜索了`as-str`函数，发现它的工作方式与`str`do 相同，但只接受关键字和符号的名称，忽略命名空间和 ':' 关键字前缀。我认为现在您只能通过自己编写相同的功能来做到这一点（我在最近的代码中也必须这样做）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T17:21:13.250

contrib.string 被合并到 clojure-1.4.0 中的 clojure.string 中。

# vb.net - 在 Windows 服务中获取键盘 keyPress (vb)

> ID：11594196
> 
> 赞同：0
> 
> 时间：2012-07-21T17:08:27.533
> 
> 标签：vb.net, windows-services, keyboard, barcode, keypress

我正在开发一个需要获取条形码阅读器字符并将值保存在数据库中的 Windows 服务应用程序，我尝试了一些类似这样的方法：

[http://www.codeproject.com/Articles/7294/Processing-Global-Mouse-and-Keyboard-Hooks-in-C](http://www.codeproject.com/Articles/7294/Processing-Global-Mouse-and-Keyboard-Hooks-in-C)

但他们不在 Windows 服务应用程序中工作，有谁知道我怎样才能在 Windows 服务中获取键盘/条形码阅读器字符？

提前感谢帮助，

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T11:06:34.103

如前所述，您无法从 Vista 开始的 Windows 平台中的 Windows 服务访问键盘和屏幕（不再支持与桌面交互设置）

因此，您最好只编写一个在用户登录工作站时启动的标准应用程序。

由于大多数条形码阅读器的功能类似于键盘，因此您的另一个问题将是确定何时输入条形码，而不是正常的键盘活动。使用某种注意序列（例如单击托盘图标）或计时字符速度（条形码字符似乎很快被“键入”）

您的全局键盘挂钩也可以在用户模式应用程序中正常工作:-)

快乐编码

# php - PHP 邮件表单不携带变量值

> ID：11594197
> 
> 赞同：0
> 
> 时间：2012-07-21T17:08:32.567
> 
> 标签：php

我有一个 PHP 代码可以从我的 html 表单中捕获变量并向我发送电子邮件。由于某种原因，这不起作用。

```
<?php

$nome = $_POST["nome"];
$subject = "My subject";
$email = $_POST["email"];
$headers = "From:" . $email;
$mensagem = $_POST["mensagem"];

mail('myemail@mydomain.com', $subject, $message, $headers);
?> 
```

它发送一封电子邮件，但它不携带任何变量。IE：它显示一个空的 FROM）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T17:17:15.813

你能解释一下吗`variable ? :<br> $mensagem<br>` 并且`$message`没有定义，也许它在这里有点错误。

并在 from 之后使用空间并再次检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T17:09:31.993

您的变量可能为空。

用于[`isset()`](http://php.net/manual/en/function.isset.php)检查它们是否已设置。

* * *

**编辑**：哦，我没有仔细阅读你的代码。您的`$message`变量未定义...在函数中
替换为（如果该变量带有消息正文）。`$message``mail()``$mensagem`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T17:10:10.823

如果标头的格式不正确，则会被拒绝。

最可靠的格式是：`From: Person Name <email@example.com>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T17:21:46.483

重新编写这部分代码。你可能会找到一些东西

```
if(Isset($_POST["mensagem"]) && $_POST["mensagem"] != "")
$mensagem = $_POST["mensagem"];
else
$mensagem ="Message body is empty"; 
```

# jquery - .width() 没有给出一致的结果

> ID：11594228
> 
> 赞同：2
> 
> 时间：2012-07-21T17:12:44.753
> 
> 标签：jquery

我得到了两个不同的值，`selector.width()`我试图弄清楚如何/为什么。

伪代码：

```
<div id="wrapper">
<ul>
<li>...</li>
</ul>
</div> 
```

`$('#wrapper').width()`我有一个链接可以在和之间切换列表项的宽度`$(window).width()`。或多或少定期查看全屏和返回。如果`#wrapper`是固定宽度（例如`width=500px`），一切都很好。

但是，如果包装器是（例如），`width:50%`那么我会得到意想不到的结果。当`.width`我第一次显示页面时很好（阅读：正确）。也就是说，上一个/下一个控件等正确排列。如果我切换到全屏，然后再次返回到常规视图，则该`.width`值会少几个/几个像素。我已经尝试了`width=X%`不同的值，`X`并且差异发生了变化。也就是说，它不是固定的。

填充和边距设置为零，所以我不认为就是这样。

另外，我有一个`$(window).resize(function()`，如果我稍微轻推窗口，那么宽度读数就会自行纠正。即使我在底部打开 Firebug 也会自行修复。

我知道伪代码是模糊的。我只是希望对我如何能够确定问题出在哪里有一些想法和方向，以便我可以解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:38:23.477

jQuery 的 .width() 拉取 CSS 宽度，而不是*计算的 width*，它考虑了填充、边框等。要获得元素的真实宽度，您应该使用

```
document.getElementById('myElement').offsetWidth 
```

示例，显示结果的差异：~~[http://jsfiddle.net/xixao/DNbqu/](http://jsfiddle.net/xixao/DNbqu/)~~

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:24:16.890

首先，我鼓励您解决这个问题，向包装元素添加/删除一个类，将列表扩大到 100% 而不是窗口宽度。

```
.fullscreen {
  width: 100%;
}

// on X event
$('#wrapper').addClass('fullscreen');
// on -X event
$('#wrapper').removeClass('fullscreen'); 
```

如果您不遵循以前的解决方案...还有其他方法。问题可能与[box-sizing](http://css-tricks.com/box-sizing/)有关。这意味着 jQuery 可以认为宽度是一回事，而浏览器可以认为是另一回事。在这种情况下，我认为您应该使用[$('X').outerWidth()](http://api.jquery.com/outerWidth/)而不是 $('X').width()。

同样，第一个解决方案应该没问题。

干杯!

# python - 如何对导入的数据进行分类和计数

> ID：11594231
> 
> 赞同：1
> 
> 时间：2012-07-21T17:13:14.670
> 
> 标签：python, numpy

假设有一个传感器记录每次激活时的日期和时间。我将此数据作为列表存储在 .json 文件中，格式为（例如）“2000-01-01T00:30:15+00:00”。

现在，我要做的是在 python 中导入这个文件并使用 NumPy/Mathplotlib 来绘制这个传感器每天被激活的次数。

我的问题是，使用这些数据，我不知道如何编写一个算法来计算每天激活传感器的次数。（这应该很简单，但由于 Python 知识有限，我被卡住了）。假设有一种方法可以将此列表拆分为 T，按日期（例如“2000-01-01”）对每个记录进行分类，然后计算该日期的记录。

您将如何计算传感器被激活的次数？（然后制作一个显示每天激活次数的图？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T18:03:25.323

首先，您需要加载 JSON 文件：

```
import json
with open("logfile.json", "r") as logfile:
    records = json.load(logfile) 
```

记录将是包含您的记录的列表或字典。

假设您的日志文件如下所示：

```
[u"2000-01-01T00:30:15+00:00",
 u"2000-01-01T00:30:16+00:00",
 ...
 ] 
```

记录将是一个字符串列表。所以解析日期只是：

```
import datetime
for record in records:
    datepart, _ = record.split("T")
    date = datetime.datetime.strptime(datepart, "%Y-%m-%d") 
```

希望这足够清楚。使用 "string".split 和 datetime.strptime 应该可以解决问题，尽管您不必将其解析为日期对象来装箱，但这可能会使以后的事情变得更容易。

最后，使用列表字典进行分箱应该非常简单。从我们上面得到的开始，让我们添加分箱：

```
import collections
import datetime
date_bins = collections.defaultdict(list)
for record in records:
    datepart, _ = record.split("T")
    date = datetime.datetime.strptime(datepart, "%Y-%m-%d")
    date_bins[date].append(record) 
```

这应该为您提供一个字典，其中每个键都是日期，每个值是当天记录的记录列表。

您可能希望按日期对其进行排序（尽管如果数据已经有序，您可能可以使用 collections.OrderedDict）。

每天计算激活可能类似于：

```
for date in date_bins:
    print "activations on %s: %s"%(date, len(date_bins[date])) 
```

当然，获取这些信息并将其处理成 matplotlib 需要的格式需要做更多的工作，但从这里开始应该不会太糟糕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T17:58:41.533

如果您的 json 文件加载如下列表：

```
j_list = [('2000-01-01T00:30:15+00:00', 'xx'),
          ('2000-01-01T00:30:15+00:00', 'yyy'),
          ('2000-01-02T00:30:15+00:00', 'zzz')] 
```

**注意**：这假设 json 文件返回以时间戳作为第一个元素的列表列表。相应调整。

dateutil 和 datetime 中有解析器来解析时间戳。如果计数真的是你所做的一切，那么即使这样也可能是矫枉过正的。你可以：

```
>>> from itertools import groupby
>>> [(k,len(list(l))) for k,l in groupby(j_list,lambda x: x[0][:10])]
[('2000-01-01', 2), ('2000-01-02', 1)] 
```

# android - android/openGL：用正方形填充 2d 视口

> ID：11594234
> 
> 赞同：2
> 
> 时间：2012-07-21T17:13:38.467
> 
> 标签：android, opengl-es, orthogonal

到目前为止，我设法完成的是：

*   初始化 GLSurfaceView/Renderer
*   在屏幕上画一个三角形
*   在屏幕上渲染一个正方形/矩形
*   向屏幕添加位图纹理
*   确保渲染时尊重 PNG 透明度
*   自动缩放三角形，以便它们在所有屏幕尺寸下正确显示

但是，在修复缩放的三角形后，背景矩形（带有纹理）不再填满屏幕。

![背景不再填满屏幕](../Images/fd0cdda06d31ad40c1912d6b08567644.png)

我已经被困了一段时间了，完全困惑到我认输的地步。

我不确定的主要部分是 glFrustumf() 和 gluLookAt() 的使用。

```
@Override
public void onSurfaceChanged(GL10 gl, int width, int height) {
    gl.glViewport(0, 0, width, height);

    ratio = (float) width / height;
    gl.glMatrixMode(GL10.GL_PROJECTION);        // set matrix to projection mode
    gl.glLoadIdentity();                        // reset the matrix to its default state
    gl.glFrustumf(-ratio, ratio, -1, 1, 3, 7);  // apply the projection matrix
}

@Override
public void onDrawFrame(GL10 gl) {
    // Clear the screen
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT);

    // Set GL_MODELVIEW transformation mode
    gl.glMatrixMode(GL10.GL_MODELVIEW);
    gl.glLoadIdentity(); // reset the matrix to its default state

    // When using GL_MODELVIEW, you must set the camera view
    GLU.gluLookAt(gl, 0, 0, -5f, 0f, 0f, 0f, 0.0f, 1.0f, 0.0f);

    bg.draw(gl);
    // ...
} 
```

如果有人有时间查看问题，我已将文件上传到[https://bitbucket.org/koonkii/test_opengl/src](https://bitbucket.org/koonkii/test_opengl/src)，因此您不必通过复制粘贴重新创建代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T17:35:01.700

```
GLU.gluLookAt(gl, 0, 0, -5f, 0f, 0f, 0f, 0.0f, 1.0f, 0.0f); 
```

尝试将 -5f 更改为 0，您在这里所说的是将相机向后移动 5 个单位，因此，除非您正在进行正交投影（我认为您不是，请尝试检查一下[）](http://www.opengl.org/sdk/docs/man/xhtml/glOrtho.xml) OpenGL 正在做什么是根据您的透视图缩放背景多边形，您将其视为“更小”。

如果您进行正交投影，无论您在 z 轴上移动多少相机，您将始终看到相同的大小。这对于基于 OpenGL 的 2D 游戏很有用，因此请查看上面的链接。

编辑：gluPerspective 和 glOrtho

```
gluPerspective(GLdouble fovy, GLdouble aspect, GLdouble zNear, GLdouble zFar); 
```

gluPerspective 有一个名为“fovy”的参数，它基本上是“Y 轴上的视野”。视野表示相机可以看到的空间量，基本上是“扩展”或“收缩”任何碰巧在它之前的顶点。典型的人眼具有 45º FOV。

zNear 和 zFar 表示近和远视锥体限制，视锥体是一个不可见的“盒子”，它决定了哪些顶点在可视区域之外。

纵横比决定了相机的宽度和高度之间的比率。

glOrtho 是 gluPerspective 的一个特例，因为 FOV 始终为 0。

```
gl.glOrthof(0.0f, (float) width, (float) height, 0.0f, 1.0f, -1.0f); 
```

前四个参数指定剪切平面的大小（通常是屏幕的大小），其他两个值指定近和远的截锥体（除非您想通过将对象放置“远”来隐藏对象，否则不需要它们） .

我希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T05:19:02.793

好吧，在睡了个好觉并应用了 RedOrav 关于正交投影的建议后，我做了更多的浏览并让它工作了！

RedOrav 给出的代码片段确实有效，但是在切换到正交投影后，我仍在绘制宽度为 0.15f 的正方形和三角形。几乎看不到，因为它小于 1 像素宽！

将背景/正方形/三角形代码更改为更合理的代码（30.0f）后，它们出现了！

更多地使用代码并让定位正常工作。对于那些想要查看项目工作副本的人，我已将代码提交给[bitbucket 。](https://bitbucket.org/koonkii/test_opengl/src)

我需要 G.getYPos() 的原因是底部坐标 = 0，顶部是屏幕高度。在不倒置所有纹理的情况下，想不出更好的方法来反转它。

重要的初始化部分是：

**全局助手**

```
public class G {
    public static float ratio;
    public static int width, height;

    /** The texture pointer */
    public static int[] textures = new int[3];

    final static int TEXTURE_DEFAULT = 0;
    final static int TEXTURE_BG = 1;
    final static int TEXTURE_ANDROID = 2;
    final static int TEXTURE_TURTLE = 3;

    /**
     * Since (bottom = 0, top = height), we need to invert the values so they make sense logically.
     */
    public static int getYPos(int top) {
        return G.height - top;
    }
} 
```

**渲染器类**

```
@Override
public void onSurfaceCreated(GL10 gl, EGLConfig config) {
    this.loadGLTextures(gl);

    gl.glClearColor(1.0f, 0.0f, 0.0f, 1.0f);    //Red Background
}

@Override
public void onSurfaceChanged(GL10 gl, int width, int height) {
    gl.glViewport(0, 0, width, height);

    // Save these for global use.
    G.width = width;
    G.height = height;
    G.ratio = (float) width / height;

    // Set up orthogonal viewport and make adjustments for screen ratio
    gl.glViewport(0, 0, width, height);
    gl.glMatrixMode(GL10.GL_PROJECTION);
    gl.glLoadIdentity();
    GLU.gluOrtho2D(gl, 0, width, 0, height); // The parameters are weird but bottom = 0 so we need an inverter function G.

    gl.glMatrixMode(GL10.GL_MODELVIEW);
    gl.glLoadIdentity();

    // Start setting up the constructs we need
    bg = new Background();

    squares = new ArrayList<Square>();
    squares.add(new Square(width / 2, G.getYPos(0))); // middle/top of the screen
    squares.add(new Square(width / 2, G.height /2)); // center of the screen

    triangles = new ArrayList<Triangle>();
    triangles.add(new Triangle(0, G.getYPos(0))); // top left
    triangles.add(new Triangle(width, G.getYPos(height))); // bottom right
    triangles.add(new Triangle(width /2, height /2)); // middle
}

@Override
public void onDrawFrame(GL10 gl) {
    // Clear the screen
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT);

    bg.draw(gl);

    for (Square s : squares) {
        s.draw(gl);
    }

    // Draw correctly scaled triangles
    for (Triangle t : triangles) {
        t.draw(gl);
    }

    try {
        Thread.sleep(400);
    }
    catch (InterruptedException e) {
    }
}

/**
 * Loads the textures up.
 */
public void loadGLTextures(GL10 gl) {
    int[] texture_map = new int[] { R.drawable.bg_game, R.drawable.ic_launcher };
    Bitmap bitmap;

    // generate one texture pointer, keep 0 as blank/default
    gl.glGenTextures(texture_map.length, G.textures, 0);

    for (int i = 0; i < texture_map.length; i++) {
        // loading texture
        bitmap = BitmapFactory.decodeResource(context.getResources(), texture_map[i]);

        // ...and bind it to our array
        gl.glBindTexture(GL10.GL_TEXTURE_2D, G.textures[i +1]);

        // create nearest filtered texture
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_NEAREST);
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);

        // Use Android GLUtils to specify a two-dimensional texture image from our bitmap
        GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, bitmap, 0);

        // Clean up
        bitmap.recycle();
    }
} 
```

**背景类** p

```
ublic class Background {
    private FloatBuffer vertexBuffer;   // buffer holding the vertices
    private float vertices[] = {
            -1.0f, -1.0f,  0.0f,        // V1 - bottom left
            -1.0f,  1.0f,  0.0f,        // V2 - top left
            1.0f, -1.0f,  0.0f,        // V3 - bottom right
            1.0f,  1.0f,  0.0f         // V4 - top right
    };

    private FloatBuffer textureBuffer;  // buffer holding the texture coordinates
    private float texture[] = {
            // Mapping coordinates for the vertices
            0.0f, 1.0f,     // top left     (V2)
            0.0f, 0.0f,     // bottom left  (V1)
            1.0f, 1.0f,     // top right    (V4)
            1.0f, 0.0f      // bottom right (V3)
    };

    public Background() {
        // Recalculate the vertices so they fit the screen
        vertices[0] = 0;        // v1 left
        vertices[1] = G.height; // v1 bottom

        vertices[3] = 0;        // v2 left
        vertices[4] = 0;        // v2 top

        vertices[6] = G.width;  // v3 right
        vertices[7] = G.height; // v3 bottom

        vertices[9] = G.width;  // v4 right
        vertices[10] = 0;       // v4 top

        // a float has 4 bytes so we allocate for each coordinate 4 bytes
        ByteBuffer byteBuffer = ByteBuffer.allocateDirect(vertices.length * 4);
        byteBuffer.order(ByteOrder.nativeOrder());

        // allocates the memory from the byte buffer
        vertexBuffer = byteBuffer.asFloatBuffer();

        // fill the vertexBuffer with the vertices
        vertexBuffer.put(vertices);

        // set the cursor position to the beginning of the buffer
        vertexBuffer.position(0);

        byteBuffer = ByteBuffer.allocateDirect(texture.length * 4);
        byteBuffer.order(ByteOrder.nativeOrder());
        textureBuffer = byteBuffer.asFloatBuffer();
        textureBuffer.put(texture);
        textureBuffer.position(0);
    }

    public void draw(GL10 gl) {
        gl.glEnable(GL10.GL_TEXTURE_2D); // Twig;

        // Bind the previously generated texture
        gl.glBindTexture(GL10.GL_TEXTURE_2D, G.textures[G.TEXTURE_BG]);

        // Point to our buffers
        gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
        gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);

        // Point to our vertex buffer
        gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertexBuffer);
        gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, textureBuffer);

        // Draw the vertices as triangle strip
        gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, vertices.length / 3);

        //Disable the client state before leaving
        gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
        gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY);

        gl.glDisable(GL10.GL_TEXTURE_2D); // twig;
    }
} 
```

**Square 类** 与背景非常相似，除了它有一个位置并应用 alpha 透明度。

```
public class Square {
    private FloatBuffer vertexBuffer;   // buffer holding the vertices
    private float vertices[] = {
            -1.0f, -1.0f,  0.0f,        // V1 - bottom left
            -1.0f,  1.0f,  0.0f,        // V2 - top left
            1.0f, -1.0f,  0.0f,        // V3 - bottom right
            1.0f,  1.0f,  0.0f         // V4 - top right
    };

    private FloatBuffer textureBuffer;  // buffer holding the texture coordinates
    private float texture[] = {
            // Mapping coordinates for the vertices
            0.0f, 1.0f,     // top left     (V2)
            0.0f, 0.0f,     // bottom left  (V1)
            1.0f, 1.0f,     // top right    (V4)
            1.0f, 0.0f      // bottom right (V3)
    };

    public Square(float posX, float posY) {
        float w = 30f;
        float h = w;

        vertices[0] = posX - w; // left
        vertices[3] = posX - w;
        vertices[6] = posX + w; // right
        vertices[9] = posX + w;

        vertices[1] = posY - h; // top
        vertices[4] = posY + h;
        vertices[7] = posY - h; // bottom
        vertices[10] = posY + h;

        // a float has 4 bytes so we allocate for each coordinate 4 bytes
        ByteBuffer byteBuffer = ByteBuffer.allocateDirect(vertices.length * 4);
        byteBuffer.order(ByteOrder.nativeOrder());

        // allocates the memory from the byte buffer
        vertexBuffer = byteBuffer.asFloatBuffer();

        // fill the vertexBuffer with the vertices
        vertexBuffer.put(vertices);

        // set the cursor position to the beginning of the buffer
        vertexBuffer.position(0);

        byteBuffer = ByteBuffer.allocateDirect(texture.length * 4);
        byteBuffer.order(ByteOrder.nativeOrder());
        textureBuffer = byteBuffer.asFloatBuffer();
        textureBuffer.put(texture);
        textureBuffer.position(0);
    }

    /** The draw method for the square with the GL context */
    public void draw(GL10 gl) {
        // Enable alpha transparency
        gl.glEnable(GL10.GL_BLEND);
        gl.glBlendFunc(GL10.GL_ONE, GL10.GL_ONE_MINUS_SRC_ALPHA);

        // bind the previously generated texture
        gl.glEnable(GL10.GL_TEXTURE_2D); // Twig;

        gl.glBindTexture(GL10.GL_TEXTURE_2D, G.textures[G.TEXTURE_ANDROID]);

        // Point to our buffers
        gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
        gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);

        // reset the colour for the square
        gl.glColor4f(1.0f, 1.0f, 1.0f, 1.0f);

        // Point to our vertex buffer
        gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertexBuffer);
        gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, textureBuffer);

        // Draw the vertices as triangle strip
        gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, vertices.length / 3);

        //Disable the client state before leaving
        gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
        gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY);

        // Disable alpha transparency
        gl.glDisable(GL10.GL_BLEND);
        gl.glBlendFunc(GL10.GL_ONE, GL10.GL_ZERO);

        gl.glDisable(GL10.GL_TEXTURE_2D); // twig;
    }
} 
```

**三角班**

```
public class Triangle {
    private FloatBuffer vertexBuffer;   // buffer holding the vertices

    private float vertices[] = {
            -0.5f, -0.5f,  0.0f,        // V1 - first vertex (x,y,z)
             0.5f, -0.5f,  0.0f,        // V2 - second vertex
             0.0f,  0.5f,  0.0f         // V3 - third vertex
    };

    public Triangle(float posX, float posY) {
        int w = 30;
        int h = w;

        vertices[0] = posX - (w/2); // left
        vertices[3] = posX + (w/2); // right
        vertices[6] = posX;         // middle

        vertices[1] = posY - (h/2); // bottom
        vertices[4] = posY - (h/2); // bottom
        vertices[7] = posY + (h/2); // top

        // a float has 4 bytes so we allocate for each coordinate 4 bytes
        ByteBuffer vertexByteBuffer = ByteBuffer.allocateDirect(vertices.length * 4);
        vertexByteBuffer.order(ByteOrder.nativeOrder());

        // allocates the memory from the byte buffer
        vertexBuffer = vertexByteBuffer.asFloatBuffer();

        // fill the vertexBuffer with the vertices
        vertexBuffer.put(vertices);

        // set the cursor position to the beginning of the buffer
        vertexBuffer.position(0);
    }

    public void draw(GL10 gl) {
        gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);

        // set the colour for the triangle
        gl.glColor4f(0.0f, 0.0f, 1.0f, 1.0f);

        // Point to our vertex buffer
        gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertexBuffer);

        // Draw the vertices as triangle strip
        gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, vertices.length / 3);

        // Reset the colour
        gl.glColor4f(1.0f, 1.0f, 1.0f, 0.0f);

        //Disable the client state before leaving
        gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
    }
} 
```

希望这可以帮助其他在启动 OpenGL 时遇到类似问题的人。

# mysql - MySQL 数据库优化

> ID：11594237
> 
> 赞同：2
> 
> 时间：2012-07-21T17:13:47.640
> 
> 标签：mysql, optimization, count

我有一个经常更新的表（插入/删除）。我还有一个脚本可以定期计算表中存储了多少条记录。如何优化性能？

1.  **什么都不做：**只使用 COUNT 函数。
2.  **创建另一个字段来存储记录数：**每当添加新记录时，我们都会增加该字段，反之亦然。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T17:17:26.280

如果您的数据库的主要功能是存储（经常插入/更新），请将存储引擎切换到`InnoDB`，使用`INSERT`和`UPDATE`查询速度更快，但读取速度较慢。

[在此处](http://www.kavoir.com/2009/09/mysql-engines-innodb-vs-myisam-a-comparison-of-pros-and-cons.html)、[此处](http://mikebernat.com/blog/MySQL_-_InnoDB_vs_MyISAM)或[此处](https://stackoverflow.com/questions/20148/myisam-versus-innodb)阅读更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T17:19:35.420

方法 #2 几乎是执行此操作的标准方法（如果您的表非常大并且`COUNT`给您带来性能问题）。您还可以将`COUNT`值存储在一个[`MEMORY`](http://dev.mysql.com/doc/refman/5.0/en/memory-storage-engine.html)表中，这将使检索速度非常快。

增加/减少你认为合适的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T17:46:47.357

如果您需要准确的数字，我会将其构建到应用程序中以更新数据库或使用触发器来保持计数最新。正如其他人所提到的，如果您想要性能和持久性，可以将计数保存在 MEMORY 表或 Redis 实例中。INFORMATION_SCHEMA.TABLES 表中有计数，但它们对于 InnoDB 并不精确（+-20% 或更多）。

# php - 数据库库的 CodeIgniter 问题

> ID：11594239
> 
> 赞同：0
> 
> 时间：2012-07-21T17:13:54.087
> 
> 标签：php, database, codeigniter

我正在尝试构建购物车的自定义库。我在将数据库库加载到 Cart 类时遇到了一些问题，但我使用以下方法解决了这个问题：

```
$CI =$ get_instance();
$CI->load->database(); 
```

但是现在每当我想使用数据库时，它都会给我一个错误：“尝试获取非对象的属性”在这一行：

```
$this->CI->db->insert("carts", $data); 
```

我应该提到我在类的顶部声明了 $CI 变量，如下所示：

```
var $CI; 
```

任何帮助，将不胜感激！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T17:16:13.793

如果`$CI`是一个类变量，就像你说的那样，那么你需要使用

```
$this->CI =& get_instance();
$this->CI->load->database(); 
```

代替

```
$CI =& get_instance();
$CI->load->database(); 
```

在构造函数中初始化`$this->CI`以在每个方法中可用。

# c# - C# - 仅使用线程运行立即函数？

> ID：11594241
> 
> 赞同：2
> 
> 时间：2012-07-21T17:13:55.020
> 
> 标签：c#, multithreading

这就是我所拥有的。当我的应用程序启动时，它会创建一个线程并运行我的`startListening()`函数。但它似乎做的是运行`startListening`在同一线程下调用的任何其他函数。有没有办法让我只`startListening`使用该线程运行内部的东西，而不是从其中调用的函数？

当引用不在该线程中的控件和事物时，它只会让我更轻松，因此我不必每次都调用。

编辑：也许这不是正确的问题。我知道我必须`Invoke`设置文本框，但现在我需要启用计时器。当我尝试启用它时，它不会抛出任何异常，而只是不“滴答作响”。这是我的代码：

```
 private void beginListenerThread()
    {
        Thread thread1 = new Thread(startListening);
        thread1.Start();
    }

    private void startListening()
    {
        timer1.enabled = true;
    } 
```

但它不打勾。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T17:18:13.160

不，这是不可能自动完成的。如果您能够修改应该在另一个线程上调用的方法，请更改对其他方法的调用，以便它们在原始线程上运行。例如，如果您使用的是 Windows 窗体，请使用`this.Invoke`或`this.BeginInvoke`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T17:59:45.993

是的，当您在线程上使用非线程安全的类时，您会遇到这种麻烦。Winforms Timer 类从一个隐藏的小帮助窗口生成 Tick 事件，该窗口接收由 Windows SetTimer() api 函数生成的 WM_TIMER 消息并将它们转换为 Tick 事件调用。该窗口是在您启用计时器时创建的。

这里的问题是这个窗口是在错误的线程上创建的。它需要一个消息泵来分派 WM_TIMER 通知，该线程没有。它可以通过调用 Application.Run() 得到一个，但你不想去那里。

遵循 MSDN 库文章的备注部分中给出的建议：

> Windows 窗体计时器组件是单线程的，精度限制为 55 毫秒。如果您需要更准确的多线程计时器，请使用 System.Timers 命名空间中的 Timer 类。

或者 System.Threading.Timer 类，一个不那么古怪的计时器类。

# c++ - openGL：带着色器的线条

> ID：11594247
> 
> 赞同：17
> 
> 时间：2012-07-21T17:15:16.510
> 
> 标签：c++, opengl, graphics, glsl, shader

如何使用着色器创建一条线（可能是彩色的）？我正在使用可编程管道，并且我是 openGL 的初学者。我找不到有关如何使用着色器绘制线条的示例。我想我必须将 VAO（顶点数组对象）加载到着色器中，但是然后呢？我应该使用哪些功能以及如何使用？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-21T18:15:45.727

首先，设置使用shaderprogram。然后使用模式=GL_LINES 或其他线条绘制模式之一的[glDrawArrays （或元素，如果您的数据被索引）绘制线条。](http://www.opengl.org/sdk/docs/man4/xhtml/glDrawArrays.xml)

这是每端具有不同颜色的二维线的代码示例。如果着色模式设置为平滑，OpenGL 将沿线插入颜色。

```
struct LineSegment_t
{
  float x1, y1;
  float r1,g1,b1,a1;
  float x2, y2;
  float r2,g2,b2,a2;
};

int num_verts = lines.size()*2;
glBindVertexArray( line_vao ); // setup for the layout of LineSegment_t
glBindBuffer(GL_ARRAY_BUFFER, LineBufferObject);
glBufferData(GL_ARRAY_BUFFER, sizeof(LineSegment_t)/2 * num_verts, &lines[0], GL_DYNAMIC_DRAW);
glDrawArrays(GL_LINES, 0, num_verts ); 
```

如果您需要更大的灵活性，您可以通过从线条端点创建一个矩形（4 个点）来使用三角形绘制线条。在 2D 中，您可以通过使用所需线的法线/垂直线 (-y,x) 平移端点来创建 4 个点。在 3D 中，您需要确保三角形与广告牌中的相机对齐。

# android - android中的实时音频流

> ID：11594257
> 
> 赞同：1
> 
> 时间：2012-07-21T17:16:31.820
> 
> 标签：android

我在使用 MediaPlayer 以及原生 Android 音频播放器播放音频 url 时遇到问题。这是我的网址 [http://live.politiafm.com:8500/politiafm.mp3](http://live.politiafm.com:8500/politiafm.mp3)

这是我的代码使用本机音频播放器 Intent intent = new Intent(android.content.Intent.ACTION_VIEW); intent.setDataAndType(Uri.parse(STREAM_URL), "audio/*"); 开始活动（意图）；使用媒体播放器 MediaPlayer mp = new MediaPlayer(); mp.setAudioStreamType(AudioManager.STREAM_MUSIC); mp.create(Landing.this, Uri.parse(STREAM_URL));

```
 mp.prepareAsync();
    mp.start(); 
```

在这两种情况下，音频都没有播放。一些身体可以帮助我摆脱这个麻烦。

感谢和问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T02:33:24.120

我想这是迟到的答复，但如果你仍然面临同样的问题，

您需要根据服务器的类型为您的服务器启用 MIME 类型。MIME 类型是您可以从这里了解如何为 Tomcat 服务器、IIS 服务器或 Apache 启用它们的东西，无论您的 mp3 文件托管在：[http ://www.developershome.com/wap/wapServerSetup/tutorial.asp?page =settingUpMIME](http://www.developershome.com/wap/wapServerSetup/tutorial.asp?page=settingUpMIME)

谢谢

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-21T23:29:08.933

尝试改变

```
mp.prepare(); 
```

不是

```
mp.prepareAsyunc(); 
```

# c# - 如何将变量从 ASP 网站传递到桌面应用程序？

> ID：11594259
> 
> 赞同：1
> 
> 时间：2012-07-21T17:16:40.573
> 
> 标签：c#, asp.net, variables, serialization

我正在尝试将一个变量从一个 asp 项目（用 c# 编写）传递给一个桌面 c# 应用程序。我知道使用 Javascript 你可以使用 a [`JavaScriptSerializer`](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CGUQFjAA&url=http%3A%2F%2Fmsdn.microsoft.com%2Fen-us%2Flibrary%2Fsystem.web.script.serialization.javascriptserializer.aspx&ei=l-MKUNadA5OwqQHbnonACg&usg=AFQjCNGMTMT3jhFYETV1ayJ_ym7Xqz5gBw&sig2=uFKXU8j4sYCa9NshrCdigg)，但是 asp 有没有等价物？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T17:52:43.223

> 但是有没有等价的asp？

如果您的意思是 ASP.NET WebForms（值得具体说明）：您的选择包括：

*   使用 MVC4 并使用 ApiController 创建一个 RESTful API 端点。
*   使用 MVC 并创建一个根据接受标头返回 HTML/XML/JSON 的控制器）
*   添加映射到特定文件扩展名的 IHTTPHandler 以返回数据。（这可以使用接受头来返回不同的格式）。
*   添加 WCF 终结点。

我倾向于选择第一个（允许我通过一个简单的示例来学习 ApiController），但第二个和第三个都很容易。

最后一个选项为您提供了最大的灵活性，尤其是当您需要 SOAP/WS-* 样式时），但学习曲线也最长。

对于前三个，客户端是[`WebClient`](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)（或可能[`HttpWebRequest`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)）具有已知（或动态确定的）URL。在后一种情况下，WCF。

注意。单个 Web 应用程序（在 IIS 术语中）可以包含 WebForms 和 MVC 的混合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T21:26:06.770

取决于您想要发回应用程序的内容或服务器已经发回的内容。即，假设网页请求的结果是您所说的“参数”（在 http 和 Web 通信的上下文中，您不是很清楚）。ASP 页面可以将数据传回给请求数据的应用程序，如下所示：

```
WebClient webClient = new WebClient();
var text = webClient.DownloadString("http://www.example.com/page.aspx"); 
```

... keep in mind, that's the code in the app. I assume that's what you're asking; because there's really only one way to data from an asp application.

If that's not what you're really asking, please be more detailed.

# .net - VB.NET - MessageBox，这是一个函数吗？

> ID：11594262
> 
> 赞同：0
> 
> 时间：2012-07-21T17:17:17.147
> 
> 标签：.net, vb.net, winapi, messagebox

我一直在研究这个，但我希望社区提供一些关于`class`VB.NET 中提供的 MessageBox 的意见。

从我的观点和目前的理解来看，我认为`MessageBox`是一个`Class`，主要是因为在 VS2010 中将它显示为一个类。我看到我们在这个类和属性中有方法。为什么很多网站、教程、书籍都将其称为函数？甚至 MSDN 也称它为`MessageBox`函数。仅仅是因为这是 WINAPI 的一部分吗？

现在出现的另一个问题是我更仔细地查看了 VB.NET 中的 MessageBox 类，为什么我们不必在使用之前创建 Messagebox 类型的对象。看来我们可以只调用 Messagebox 类并调出“Show”方法......

我仍处于完全理解 OOP 概念的初级阶段，我不介意关于这个特定主题的技术解释。

我正在阅读 MessageBox 函数的 MSDN 页面，这是最初触发我提出这个问题的原因。

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms645505(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645505(v=vs.85).aspx)

**最后，我的问题** *是：为什么当 VS2010 智能感知将“MessageBox”显示为一个类时，它在 VB.NET 中被视为一个函数？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T17:20:50.663

您正在查看不同的上下文。在“普通”.NET 中，它是一个类 - [`System.Windows.Forms.MessageBox`](http://msdn.microsoft.com/en-us/library/system.windows.forms.messagebox.aspx).

提到的文档是关于`MessageBox`在 User32.dll 中定义的本机函数。它是完全分开的。

当然，也可以*在*某些`MessageBox`.NET 类型或其他类型中声明方法。基本上，相同的（不合格的）名称在不同的上下文中表示不同的事物是完全合法的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T18:21:51.537

在这个词的传统意义上，它不是一个类。它根本不存储任何状态，它没有任何属性。只是方法，它们都是共享的。

这通常在 VB.NET 中使用模块来处理。但这是一个高度特定的 VB.NET 功能，这个类是框架的一部分，并且可以被任何语言使用。所以它只是一个类，因为 CLR 要求方法是类的一部分。

您仍然可以使用 MsgBox() 函数。继承自 VB6，与 MessageBox 做同样的事情，并且在全局命名空间中可用。就像模块中的函数一样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-21T17:23:53.173

您引用的页面没有引用.NET框架的MessageBox类，它引用了windows api的MessageBox函数。这是两个不同的事物，即使它们具有相同的名称并处理相同的事物。事实上，如果 .NET 的 MessageBox 类的静态方法 Show 在内部编组对 windows api 的 MessageBox 函数的调用，我不会感到惊讶。

至于第二位，您可以调用 MessageBox.Show 因为 show 方法是静态的，这意味着您不需要类的实例来调用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-21T17:21:01.567

首先[MessageBox .net](http://msdn.microsoft.com/en-us/library/system.windows.forms.messagebox.aspx)类不同于[MessageBox Win32 API](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645505%28v=vs.85%29.aspx)函数。

.net 中的 MessageBox 类仅具有允许您向用户显示消息的有意义的静态方法。并且要调用类的静态方法，您不需要创建实例。

也没有人将 MessageBox .NET 视为一个函数，他们只将 MessageBox.Show 方法视为一个函数。[您是否将它与 Visual Basic 中的MsgBox](http://msdn.microsoft.com/en-us/library/139z2azd%28v=vs.80%29.aspx)混淆了，这确实是一个函数

# java - 在 TabbedPane 中使用 TextArea

> ID：11594263
> 
> 赞同：0
> 
> 时间：2012-07-21T17:17:21.540
> 
> 标签：java, swing, jtabbedpane, jtextcomponent

我在每个选项卡中添加了一个带有 JPanel 的 JTabbedPane。以及每个 JPanel 内的 JText 区域。选项卡可以在同一模板中动态创建。

还有一个带有菜单的菜单栏。它具有替换字符串出现的选项（例如，将“<”替换为“<”）当我只使用 JPanel 和 textArea 时它工作得很好。

现在我已经添加了 tabbedPane，...我不知道如何单独替换活动选项卡的内容，..

我已经尝试获取选定的组件（getSelectedComponent() 方法和 getComponentAt() 方法）并替换文本，.. 我没有工作

有人能帮我吗

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-21T17:27:25.493

`getSelectedIndex()`并且`getSelectedComponent()`应该工作。查看[如何使用选项卡式窗格](http://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html)教程，它有很好的例子。

`getSelectedComponent`编辑：和的演示`AbstractAction`

```
import javax.swing.AbstractAction;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JOptionPane;
import javax.swing.JScrollPane;
import javax.swing.JTabbedPane;
import javax.swing.JPanel;
import javax.swing.JFrame;
import javax.swing.JTextArea;
import javax.swing.SwingUtilities;
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;

public class TabbedPaneDemo {

    static class TextDemoPanel extends JPanel{
        private JTextArea textArea;

        public TextDemoPanel(String text){
            textArea = new JTextArea(5, 20);
            textArea.setText(text);
            JScrollPane scrollPane = new JScrollPane(textArea);

            add(scrollPane);
        }

        public JTextArea getTextArea() {
            return textArea;
        }
    }

    static class SetTextAction extends AbstractAction {
        private JTabbedPane tabbedPane;

        public SetTextAction(JTabbedPane tabbedPane){
            super("Set text");
            this.tabbedPane = tabbedPane;
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            String value = JOptionPane.showInputDialog(tabbedPane, "Text", "New text");
            if (value != null){
                TextDemoPanel panel = (TextDemoPanel)tabbedPane.getSelectedComponent();
                if (panel != null)
                    panel.getTextArea().setText(value);
            }
        }
    }

    private static void createAndShowGUI() {
        JFrame frame = new JFrame("TabbedPaneDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JTabbedPane tabbedPane = new JTabbedPane();

        tabbedPane.addTab("Tab 1", new TextDemoPanel("Tab 1 text"));
        tabbedPane.addTab("Tab 2", new TextDemoPanel("Tab 2 text"));
        tabbedPane.addTab("Tab 3", new TextDemoPanel("Tab 3 text"));

        frame.add(tabbedPane, BorderLayout.CENTER);

        JMenuBar menuBar = new JMenuBar();
        JMenu menu = new JMenu("Menu");
        menuBar.add(menu);
        JMenuItem item = new JMenuItem(new SetTextAction(tabbedPane));

        menu.add(item);

        frame.setJMenuBar(menuBar);

        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

# linux - 进程的平均工作集大小

> ID：11594266
> 
> 赞同：0
> 
> 时间：2012-07-21T17:17:44.063
> 
> 标签：linux, memory, process, linux-kernel

我在 linux (c++ 代码) 中运行一个可执行文件。我想计算这个可执行文件的“平均”工作集大小？我不知道如何进行。有人可以帮我吗？

linux中是否有任何命令可以这样做？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T17:32:57.363

凯撒的灵感：

```
pid=`ps axo 'pid,ucomm' | grep procname | awk '{print $1;}'`
while sleep 15; do grep VmRSS /proc/$pid/status || break; done > /tmp/size
awk '{ sum += $2; count++; } END { print sum/count; }' /tmp/size 
```

# jquery - 为表创建构建嵌套循环

> ID：11594269
> 
> 赞同：0
> 
> 时间：2012-07-21T17:18:16.810
> 
> 标签：jquery, json, loops, traversal, nested-loops

我已经将表格行的循环功能降低了很多，但是当我想创建标题`<th>`行时，我不知所措。

例如，我可以向下遍历以获取“汽车品牌”并在第一个成员的一个普通表行中创建一个包含品牌名称和细节的表，但是让嵌套循环继续为所有“兄弟”数组运行我疯了。我不能走简单的路线而只使用数组名称，因为它不是“人类友好的”

想象一下：

```
a-r: [{
    country: "Italy",
    id: "194",
    type: "sports",
    style: {
        doors: "2",
        layout: "rwd"
    },
    model: {
        name: "Alfa Romeo",
        marque: "Spider",
        slug: "alfa-romeo-spider",
        id: "59"
    },
    url: "http://www.alfaromeo.it"
}, {
    country: "Italy",
    id: "195",
    type: "sports",
    style: {
        doors: "2",
        layout: "rwd"
    },
    model: {
        name: "Alfa Romeo",
        marque: "Graduate",
        slug: "alfa-romeo-graduate",
        id: "60"
    },
    url: "http://www.alfaromeo.it"
}],
packard: [{
    country: "USA",
    id: "200",
    type: "sedan",
    style: {
        doors: "4",
        layout: "rwd"
    },
    model: {
        name: "Packard",
        marque: "Phantom",
        slug: "packard-phantom",
        id: "80"
    },
    url: "http://www.packard.com"
}, {
    country: "USA",
    id: "220",
    type: "coupe",
    style: {
        doors: "2",
        layout: "rwd"
    },
    model: {
        name: "Packard",
        marque: "626",
        slug: "packard-626",
        id: "305"
    },
    url: "http://www.packard.it"
}],[...] 
```

所以，我需要基本上遍历到第一个“model.name”实例，获取该值并将其放入表头或标题中......无论如何。

然后我需要运行另一个循环来获取 country[value]、type[value]、model.marque[value] 并将它们放入数组中每个成员的行中并关闭表格......令人作呕。

我的最终结果将如下所示：

```
<table>
 <thead>
  <tr>
    <th colspan=3>Obj.model.name</th>
  </tr>
 </thead>
 <tbody>
   <tr>
    <td>Obj.model.marque</td><td>Obj.country</td><td>Obj.type</td>
   </tr>
   <tr>
    <td>{...}</td><td>{...}</td><td>{...}</td>
   </tr>
   <tr>
    <td>{...}</td><td>{...}</td><td>{...}</td>
   </tr>
 </tbody>
</table> 
```

我试图以某种方式，在循环中，抓住最初的model.name [value]，持有它，然后循环所有兄弟姐妹并将行放在一起......我只是想如果我这样做，我声明（并构造）显然不需要的每一行的标题/标题。

我感谢穿越大师和情妇，感谢您提供的任何见解。我变老了，最近我的大脑已经被热浪融化了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T20:34:11.443

您通常只需要记住`name`循环外部的当前值，并在每次更改时创建一个新表（带有新标题）：

```
var name = null;
var table = null;

$.each(a, function(k, v) {
    $(v).each(function() {

        if (this.model.name !== name) {
            name = this.model.name;
            table = $('<table>').appendTo(document.body);
            var thead = $('<thead>').appendTo(table);
            $('<th>', {
                colspan: 3,
                text: name
            }).appendTo(thead);
        }

        $('<tr>').appendTo(table).append(
            $('<td>', { text: this.model.marque }),
            $('<td>', { text: this.country }),
            $('<td>', { text: this.type })
        );
    });
}); 
```

演示[http://jsfiddle.net/alnitak/2jvSS/](http://jsfiddle.net/alnitak/2jvSS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T18:38:54.807

我在[JSFIDDLE](http://jsfiddle.net/SQWTz/1/)中有这个设置。下面也是循环代码。请让我知道这可不可以帮你。谢谢我已经更新了答案，小提琴请检查并确认。

```
$(function() { 
$.each( a, function(k, v) {

    var table = document.createElement('table');
    var thead = document.createElement('thead');
    var tbody = document.createElement('tbody');

       $(v).each(function() {

       var theadRow = document.createElement('tr');
       var tbodyRow = document.createElement('tr');

       var nametd = document.createElement('th');  

       var name = $(theadRow).html($(nametd).attr('colspan', 3).html(this.model.name));
       $(thead).html(name); 

       var marquetd = document.createElement('td');  
       $( marquetd).html(this.model.marque).appendTo(tbodyRow);

       var countrytd = document.createElement('td');
       $(countrytd).html( this.country ).appendTo(tbodyRow);

       var typetd = document.createElement('td');
       $(typetd).html( this.type ).appendTo(tbodyRow);

       $(tbody).append(tbodyRow);

       $(table).append($(tbody).append(tbodyRow));

   });
    $(table).append(thead)
    $('.output').append(table)
}); 
```

});​</p>

# java - 如何编写一个 oracle 查询作为联合的通用替代方式

> ID：11594270
> 
> 赞同：0
> 
> 时间：2012-07-21T17:18:35.767
> 
> 标签：java, performance, oracle, oracle10g

我有一个`attach`包含大量数据集的表，它是一个临时表，由 sql 创建：

```
 id   number   name
    1      X1     name1
    2      X2     name2
    3      X3     name3
    4      X4     name4 
```

桌子`attachment_map`

```
 id    item    attach_id  file_id  versionid
    1      X1       1          100         0
    2      X2       0           0          1 
```

桌子`version`

```
 id    attach_id   
    1      2 
```

我想查询以获得：

```
 id   number   name    item
    1      X1     name1    X1
    2      X2     name2    X2
    3      X3     name3
    4      X4     name4 
```

如您所见，返回行添加了实际从 table 获得的新列`attachment_map`，有三个不可能：

1）。`attach`没有项目。

2).有项目，通过连接到`attach_id`列`attachment_map`。

2).有项目，通过连接到`attach_id`列`version`。

我写了一个查询，但性能很差，执行速度很慢，似乎是因为联合。每个人都可以告诉另一种方式或我如何改进它吗？谢谢

```
 WITH tb AS
(SELECT t.*,
 i.item
 FROM attach t,
  attachment_map am,
  version v
 WHERE (am.attach_id = t.attachid
OR (am.file_id      = 0
AND am.version_id   = v.id))
)
SELECT * FROM tb
UNION
SELECT tb.*, NULL FROM tb, attach WHERE tp.id NOT IN (attach.id); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T17:33:39.677

使用两个`LEFT OUTER JOIN`s 链接三个表，然后`CASE`按`item`优先级顺序排列字段（先检查 attach，然后是 attachment_map，然后是 version）。

```
SELECT t.*
, case when t.attach_id is null then
    case when am.attach_id is null then
        v.item
    else
        am_attach.item
    end
else
    t.item
end as chosen_item

FROM attach t
left outer join attachment_map am on am.attach_id = t.attachid
left outer join version v on am.version_id   = v.id 
```

# c - 继续接受命令行工具中的输入（如 say 命令）

> ID：11594272
> 
> 赞同：0
> 
> 时间：2012-07-21T17:18:44.160
> 
> 标签：c, macos, command-line

在 OS X 的终端中，如果您键入“say”并按回车，则命令不会退出，并且系统会说出任何后续键入的内容（后跟回车）。怎样才能达到这样的效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T17:26:05.840

如果您键入`cat`并按回车，该命令不会退出，并且任何后续键入的内容，然后是回车，都将打印在屏幕上（而不是通过扬声器转换为语音，如`say`）。因此，简单的一点是读取行直到 EOF；你可以`fgets()`很容易地使用它，或者`getline()`.

```
int main(void)
{
    char buffer[4096];
    while (fgets(buffer, sizeof(buffer), stdin) != 0)
    {
        fputs(buffer, stdout);
        // Or invoke appropriate text-to-speech function(s)
    }
    return(0);
} 
```

文本到语音的转换将通过 Apple 提供的电话来完成。您可能需要使用 Objective C 来明智地访问接口，在这种情况下，您可能还需要使用其他一些输入函数或将字符串转换为适当的 Objective C 构造。

该`/usr/bin/say`命令使用库：

```
/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 633.0.0)
/System/Library/Frameworks/ApplicationServices.framework/Versions/A/ApplicationServices (compatibility version 1.0.0, current version 41.0.0)
/System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox (compatibility version 1.0.0, current version 1.0.0)
/System/Library/Frameworks/AudioUnit.framework/Versions/A/AudioUnit (compatibility version 1.0.0, current version 1.0.0)
/System/Library/Frameworks/CoreAudio.framework/Versions/A/CoreAudio (compatibility version 1.0.0, current version 1.0.0)
/usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 52.0.0)
/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 159.0.0) 
```

AudioToolBox、AudioUnit 和 CoreAudio 的组合将提供文本到语音的服务。

# c# - Null 合并在 LINQ 查询中不起作用

> ID：11594275
> 
> 赞同：4
> 
> 时间：2012-07-21T17:18:58.513
> 
> 标签：c#, .net, linq, linq-to-entities, entity-framework-4.3

拿着这个：

```
int? item1 = null;
int? item2 = null;

someObjectList.Where(x => x.SomeItem1 == (item1 ?? x.SomeItem1)
                       && x.SomeItem2 == (item2 ?? x.SomeItem2) 
                    ); 
```

where`someObjectList`不为空，`SomeItem1`并且在列表`SomeItem2`中`null`的所有对象中。

为什么什么都不返回？

**编辑：**

我的代码：

```
public void GetPlacementsByMaterial(long clientMaterialID)
{
    ClientMaterial clientMaterial = ((ApplicationEntityModel)NavigationItem.ObjectContext).ClientMaterial.FirstOrDefault(x => x.ClientMaterialID == clientMaterialID);

    var list = GetPlacementList(supplier, mediaSpace);

    PlacementsList = list.Where(x => x.MediaCategoryFormatID == (clientMaterial.MediaCategoryFormatID ?? x.MediaCategoryFormatID)
                                                && x.MediaCategorySizeID == (clientMaterial.MediaCategorySizeID ?? x.MediaCategorySizeID) 
                             );
} 
```

所有的 ID 都是`Nullable<long>`.

**编辑：**

SQL 探查器：

```
SELECT *
  FROM [dbo].[CampaignSchedulePlacements] AS [Extent5]
WHERE ([Extent5].[MediaCategoryFormatID] = [Extent5].[MediaCategoryFormatID]) AND ([Extent5].[MediaCategorySizeID] = [Extent5].[MediaCategorySizeID]) 
```

注意：清理了`SQL.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T17:51:54.733

在 SQL 中，NULL 不等于 NULL。

您可以将 NULL 解释为：“有价值，但我不知道它是什么”。因此，如果您要比较两个 NULL 值，您实际上是在问“第一个未知值是否等于第二个未知值？” 当然，没有理由假设它们是，所以 SQL 会说“不”。

我假设这是导致您的问题的原因。您可以通过查看生成的实际 SQL 来验证这一点。如果它使用 SQL = 运算符，这确实是问题所在。如果您使用的是 SQL Server，您可以通过在数据库工具（例如 SQL Management Studio）中运行 SQL 来验证这一点。

更新：

条件

```
([Extent5].[MediaCategoryFormatID] = [Extent5].[MediaCategoryFormatID]) 
```

当 [Extent5].[MediaCategoryFormatID] 为 NULL 时，确实会返回 false。

这回答了“为什么它什么都不返回？”这个问题。

然而，另一个问题浮现在脑海中：为什么实体框架会从这个 linq 查询中生成那个 SQL？

恐怕 linq to entity 并不完全以其 SQL 生成的质量而闻名，而这个案例似乎证实了这一点。您可能会考虑使用 Linq to SQL。即使从长远来看，这似乎是一条死胡同，但当前的实现如果比 linq to entity 好得多。

无论哪种情况，您是否尝试过类似

```
someObjectList.Where(x => 
    !item1.hasValue || 
    x.SomeItem1.HasValue && x.SomeItem1.Value == item1.Value) 
```

确保也验证在分析器下，linq to entity 也可能会搞砸。

# javascript - 集合作为 EmberJS 中的属性？（一对多关系）

> ID：11594280
> 
> 赞同：0
> 
> 时间：2012-07-21T17:20:05.953
> 
> 标签：javascript, ember.js

在 EmberJS 中，我想创建一个模型，它的字段是其他模型的集合。我认为这将是一件容易的事情，但我无法让它发挥作用。

正如下面的 JSFiddle 所示，我当前的方法是创建两个模型（在本例中为`Foo`and ）和一个用于s ( )`Bar`的集合模型。然后我将a作为属性，然后尝试将s 添加到集合中。它不起作用。不会抛出任何错误，并且集合存在，但从未向其中添加任何元素。`Bar``BarCollection``Foo``BarCollection``Bar`

[http://jsfiddle.net/tbxhQ/1/](http://jsfiddle.net/tbxhQ/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T17:34:32.967

那是因为您还没有`App.BarCollection`使用属性初始化您的具体实例`content`。这是需要的，因为它是阵列`Ember.ArrayProxy`的代理`content`。如果您不指定一个，则代理不会使用哪个数组...

另一个问题是命名实例`lowerCase`和类是一种约定`UpperCase`。所以它是`App.foo`。此外，您应该始终通过`get`和访问属性`set`。这保证了绑定被正确解析。

结果如下所示，请参阅[http://jsfiddle.net/pangratz666/fpqTv/](http://jsfiddle.net/pangratz666/fpqTv/)：

**车把**：

```
<script type="text/x-handlebars">
    All the bars from {{App.foo.name}}:
    <ul>
        {{#each App.foo.bars }}
            <li>{{this.name}}</li>
        {{/each}}
    </ul>
</script> 
```

**​JavaScript** :

```
App = Ember.Application.create();
App.Bar = Ember.Object.extend();

App.BarCollection = Ember.ArrayProxy.extend();

App.foo = Ember.Object.create({
    name: 'Fred',
    bars: App.BarCollection.create({
        content: []
    })
});

App.getPath('foo.bars').pushObject(App.Bar.create({
    name: 'bob'
}));​ 
```

* * *

注意：在您的情况下，不需要`ArrayProxy`为您的`bars`财产使用 an 。一个简单的 JavaScript 数组也可以完成这项工作。所以这将是我对您发布的示例的最终建议，请参阅[http://jsfiddle.net/pangratz666/CHHXb/](http://jsfiddle.net/pangratz666/CHHXb/)：

**JavaScript**：

```
App = Ember.Application.create();
App.Bar = Ember.Object.extend();

App.foo = Ember.Object.create({
    name: 'Fred',
    bars: [],
    addToBars: function(name) {
        this.get('bars').pushObject(App.Bar.create({
            name: name
        }));
    }
});

App.get('foo').addToBars('bob');​ 
```

# clojure - 当我应该从惰性序列中创建序列时

> ID：11594282
> 
> 赞同：2
> 
> 时间：2012-07-21T17:20:13.510
> 
> 标签：clojure

我现在正在阅读[Programming Clojure](http://pragprog.com/book/shcloj2/programming-clojure)并找到下一个示例

```
(defn by-pairs [coll]
  (let
    [take-pair (fn [c] (when (next c) (take 2 c)))]
    (lazy-seq
      (when-let [pair (seq (take-pair coll))] ;seq calls here
        (cons pair (by-pairs (rest coll))))))) 
```

它将列表分成对，例如

```
(println (by-pairs  [1 2 1]))     ((1 2) (2 1))
(println (by-pairs  [1 2 1 3]))   ((1 2) (2 1) (1 3))
(println (by-pairs  []))          ()
(println (by-pairs  [1]))         () 
```

我不明白的是为什么我们应该在配对结果上调用 seq？那么为什么我们不能只写

```
(defn by-pairs [coll]
  (let
    [take-pair (fn [c] (when (next c) (take 2 c)))]
    (lazy-seq
      (when-let [pair (take-pair coll)]
        (cons pair (by-pairs (rest coll))))))) 
```

在女巫情况下会有不同的结果还是有任何性能原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T17:46:31.600

两个代码都是相同的，不会有任何区别，因为`next`函数`take`中应用于 coll 的`take-pair`函数，`seq`对传递的参数进行调用，即`next c`首先调用`seq`c 或尝试检查它是否是一个实现`ISeq`且相同的对象按`take`功能做。所以基本上在这种情况下，如果你不给`seq`自己打电话，`next`and`take`会打电话`seq`给它。

# android - Keytool 不询问密码（使用带有 android 的 Facebook lib）

> ID：11594283
> 
> 赞同：7
> 
> 时间：2012-07-21T17:20:13.720
> 
> 标签：android, facebook, keytool

我像 Facebook 说的那样运行下面的脚本。没有编译问题。问题是它在处理完成后从来没有给我一个密码问题，根据 facebook 文档，这意味着我的密钥库路径不正确。但是 debug.keystore 文件在正确的路径中！C:\用户\KSM45.android

请让我知道我在哪里犯错？我只想用facebook登录！

（来自文档页面：还要确保您使用的是正确的密码 - 对于调试密钥库，使用“android”生成密钥哈希。一般规则：如果该工具不要求输入密码，则您的密钥库路径不正确。）

```
keytool -exportcert -alias androiddebugkey -keystore ~/.android/debug.keystore | openssl sha1 -binary | openssl base64 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:58:26.747

尝试删除您的密钥库，`~/.android/debug.keystore`然后在 Eclipse 中清理您的项目并运行您的应用程序，以便 Eclipse 插件重新创建您的密钥库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-11T19:51:40.270

今天上班的时候在WinXP上试了一下，还是不行。经过几次尝试，我意识到了这一点

这是我运行但失败的线路：

keytool -exportcert -alias androiddebugkey -keystore C:\Documents and Settings\Administrator.android\debug.keystore | openssl sha1 -二进制 | openssl base64

问题是，你应该在你的 debug.keystore 路径周围加上**“引号”**

像这样：

keytool -exportcert -alias androiddebugkey -keystore **"C:\Documents and Settings\Administrator.android\debug.keystore"** | openssl sha1 -二进制 | openssl base64

# iphone - 通过蓝牙在结构对象内发送 NSData

> ID：11594285
> 
> 赞同：1
> 
> 时间：2012-07-21T17:20:20.837
> 
> 标签：iphone, ios, cocoa

结构：

```
typedef struct 
{
    NSData *levelData;
    int levelID;
} GameLevelInfo; 
```

我如何发送数据：

```
 static GameLevelInfo gameLevelInfo;
    gameLevelInfo.levelData = [[LevelManager sharedManager] levelDataFromName:@"XXXXXX"]];
    gameLevelInfo.levelID = 1;
    [sendPacket:NETWORK_SENDING_LEVEL
    objectIndex:0 
           data:&gameLevelInfo 
         length:sizeof(gameLevelInfo) 
       reliable:YES]; 
```

“levelDataFromName”：

```
-(NSData *) levelDataFromName:(NSString *)levelName
{
    NSString *documentPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *filePath = [documentPath stringByAppendingFormat:@"/%@", levelName];
    return [[NSFileManager defaultManager] contentsAtPath:filePath];
} 
```

和“sendPacket”：

```
- (void)sendPacket:(int)packetID objectIndex:(int)objectIndex data:(void *)data length:(int)length reliable:(bool)howtosend {

    // the packet we'll send is resued
    static unsigned char networkPacket[MAX_PACKET_SIZE];
    const unsigned int packetHeaderSize = 3 * sizeof(int); // we have two "ints" for our header 

    if(length < (MAX_PACKET_SIZE - packetHeaderSize)) { // our networkPacket buffer size minus the size of the header info
        int *pIntData = (int *)&networkPacket[0];
        // header info
        pIntData[0] = packetNumber++;
        pIntData[1] = packetID;
        pIntData[2] = objectIndex;

        // copy data in after the header
        memcpy( &networkPacket[packetHeaderSize], data, length ); 

        NSData *packet = [NSData dataWithBytes: networkPacket length: (length+packetHeaderSize)];
        if(howtosend == YES) { 
            [session sendDataToAllPeers:packet withDataMode:GKSendDataReliable error:nil];          
        } else {
            [session sendDataToAllPeers:packet withDataMode:GKSendDataUnreliable error:nil];
        }
    }
} 
```

数据已成功发送，但在“接收方”：

```
GameLevelInfo *gameLevelInfo = (GameLevelInfo*)data;
NSData *content = gameLevelInfo->levelData; 
```

“内容”是无效对象。

任何帮助将不胜感激，谢谢:)

# mysql - Windows7 x86 中的 Mysql 和 Ruby on Rails 配置

> ID：11594286
> 
> 赞同：1
> 
> 时间：2012-07-21T17:20:25.627
> 
> 标签：mysql, ruby-on-rails

我安装了从这个站点[http://railsinstaller.org/](http://railsinstaller.org/)下载的 RailsInstaller，还安装了从这个站点[http://dev.mysql.com/downloads/](http://dev.mysql.com/downloads/)下载的 mysqlInstaller 。我都安装在 c:\ 驱动器中。我还从 ruby​​ 命令 gem install mysql 安装了 mysql 驱动程序。现在我还不知道如何在 Ruby on Rails 中配置 mysql。我已经看到了这个答案[MySQL driver for Rails in Windows 7 x64](https://stackoverflow.com/questions/1557267/mysql-driver-for-rails-in-windows-7-x64/1584366#1584366)他们告诉替换 libmySQL.dll 但在哪里替换我没有找到这样的文件。有人对我的问题有任何想法或解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T17:54:12.597

我有同样的问题。以下解决方案对我有用

解决方案：libmysql.dll 文件位于你的mysql 安装的bin 目录下。该文件需要是它在 Ruby\bin 目录中的副本。

# wpf - 调度员的疯狂，我怎么还在后台线程中，还是 Visual Studio 错了？

> ID：11594287
> 
> 赞同：0
> 
> 时间：2012-07-21T17:20:30.093
> 
> 标签：wpf, silverlight, mvvm, dispatcher

我通过使用后台工作人员在后台线程中从我的视图模型调用服务模块调用，一切都很好而且花花公子。

服务模块方法有一个操作参数，当服务返回时调用该参数。现在我需要回到 UI 线程来调用操作（我也尝试在我的 viewmodel 方法中返回 UI 线程，该方法是从服务模块调用的。）

所以对于我尝试过的问题的症结所在

```
Application.Current.RootVisual.Dispatcher.BeginInvoke(() => code stuff here); 
```

这会产生无效的跨线程访问（我明白我在这里无法访问 rootvisual）

然后我尝试以不同的方式让 Dispatcher 如下所示

```
Deployment.Current.Dispatcher.BeginInvoke() => code here); 
```

我还尝试了一个静态类，它具有我在应用程序启动方法中设置的 Dispatcher 属性，然后尝试使用它进行调用。

虽然使用部署调度程序和我的静态类的调度程序不会产生无效的跨线程访问，但让我如此困惑的关键是，如果我在这些调度程序调用的代码中设置断点，那么我会得到这个**System.Threading.Thread。 CurrentThread.ThreadState 是背景**

但是，我可以在我的视图模型中更新我的属性，并且视图确实可以毫无问题地更新，但我想知道这里是否还有问题，这将是未来的一个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T17:29:53.950

要访问 UI 调度程序，您可以使用此代码 -

```
Application.Current.Dispatcher.BeginInvoke() => code here); 
```

对于您的评论 -

*我应该补充一下，最令人困惑的部分是我读过的内容，使用调度程序是为了保证您回到 UI 线程！*

您误解了在 UI 调度程序上调用委托会将您带到 UI 线程，上面的代码调用只会将委托在 UI 调度程序上排队，并将在 UI 线程上执行。但是，执行点将在您调用此操作的后台线程上。

这些链接可能对您有用 -[了解调度](http://www.codeproject.com/Articles/101423/WPF-Inside-Out-Dispatcher "了解调度程序")程序和调度程序[概述](http://www.sanjaysingh.net/2010/10/understanding-dispatcher-in-wpf.html "调度员概述")

# .net - .NET4.0 不完全支持 EF 5 是否存在技术原因？

> ID：11594289
> 
> 赞同：10
> 
> 时间：2012-07-21T17:20:33.787
> 
> 标签：.net, .net-4.5, entity-framework-5

我想将我的应用程序升级到 EF 5，以利用支持枚举空间等功能。但是，除非我迁移到 .Net 4.5，否则我无法升级。

我想知道 .Net 4.5 的哪些功能 EF 5 使用了它在 .Net 4.0 中无法完成的功能？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-21T17:38:35.500

我的理解是 EF >= 4.1（包括 EF 5）包括

*   EF“核心库”，如 ( `System.Data.Entity.dll`)，是 .NET Framework 的一部分
*   您可以通过 Nuget 下载的附加包/程序集，其中包含`DbContext`API 和代码优先开发

[2011 年夏天（实体框架 2011 年 6 月 CTP](http://blogs.msdn.com/b/adonet/archive/2011/06/30/announcing-the-microsoft-entity-framework-june-2011-ctp.aspx)）计划并尝试发布`enum`.NET 4.5 之前的核心库更新，空间支持和其他新功能（代码优先迁移除外）。但是 EF 团队已经决定 NuGet 包可以进行这种带外更新（这就是为什么 EF 4.3 已经具有不需要接触核心库的迁移功能），但对于核心库，它们也是困难且在 .NET 4.5 发布之前无法完成：

> Entity Framework 有两个逻辑部分，一个是 .NET Framework 和 Visual Studio 中的核心组件，另一个是我们可以更频繁地更新的“带外”组件。我们目前正在研究如何以更频繁的节奏更新核心组件。“EF 2011 年 6 月 CTP”是我们首次尝试更频繁地运送核心组件，很明显我们在技术上还没有准备好这样做。
> 
> 核心组件包括：
> 
> *   核心 EF 运行时（System.Data.Entity.dll 和 System.Web.Entity.dll）
> *   EF 设计器
> 
> 带外组件包括：（我们将来可能会运送更多带外组件）
> 
> *   DbContext API 和代码优先 (EntityFramework.dll)
> *   用于将 DbContext API 与 Model First 和 Database First 一起使用的 T4 模板
> *   英孚电动工具
> *   代码优先迁移

[（从这里](http://blogs.msdn.com/b/adonet/archive/2011/08/09/ef-releases-amp-versioning-call-for-feedback.aspx)引用。）

这意味着`enum`对 EF 的支持将成为 .NET 4.5 核心库的一部分，而不是可下载的 EF 5 NuGet 包的一部分。因此，新的 EF 功能（如`enum`空间支持）不与 .NET 4.0 一起提供。

有关将“EF Core 库”与“EF NuGet 包”分开的历史和原因的更多信息，请参见：http: [//blogs.msdn.com/b/adonet/archive/2011/10/18/how-we-talk- about-ef-and-its-future-versions.aspx](http://blogs.msdn.com/b/adonet/archive/2011/10/18/how-we-talk-about-ef-and-its-future-versions.aspx)

# node.js - Nodejs 异步混淆

> ID：11594303
> 
> 赞同：4
> 
> 时间：2012-07-21T17:22:08.493
> 
> 标签：node.js, asynchronous

我似乎无法掌握如何使用 NodeJs 维护异步控制流。在我看来，所有的嵌套使得代码很难阅读。我是新手，所以我可能错过了大局。

简单地编写这样的代码有什么问题......

```
function first() {
    var object = {
        aProperty: 'stuff',
        anArray: ['html', 'html'];
    };
    second(object);
}

function second(object) {
    for (var i = 0; i < object.anArray.length; i++) {
        third(object.anArray[i]);
    };
}

function third(html) {
    // Parse html
}
first(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T17:26:12.377

“大局”是任何 I/O 都是非阻塞的，并且在您的 JavaScript 中异步执行；因此，如果您进行任何数据库查找、从套接字读取数据（例如在 HTTP 服务器中）、将文件读取或写入磁盘等，您*必须*使用异步代码。这是必要的，因为事件循环是单线程，如果 I/O 不是非阻塞的，您的程序将在执行时暂停。

您*可以*构建代码以减少嵌套；例如：

```
var fs = require('fs');
var mysql = require('some_mysql_library');

fs.readFile('/my/file.txt', 'utf8', processFile);

function processFile(err, data) {
  mysql.query("INSERT INTO tbl SET txt = '" + data + "'", doneWithSql);
}

function doneWithSql(err, results) {
  if(err) {
    console.log("There was a problem with your query");
  } else {
    console.log("The query was successful.");
  }
} 
```

还有像[async](https://github.com/caolan/async/)（我个人的选择）这样的流控制库来帮助避免大量嵌套回调。

您可能对[我创建的有关该主题的截屏视频](http://nodecasts.net/episodes/5-thinking-asynchronously)感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T17:32:28.050

正如@BrandonTilley 所说，I/O 是异步的，因此您*需要*Node.js 中的回调来处理它们。这就是为什么 Node.js 可以只用一个线程做这么多事情的原因（它实际上并没有在一个线程中做更多的事情，而是让线程等待数据，它只是开始处理下一个任务，当 I/ O 回来，然后它会用你给它的回调函数跳回到那个任务）。

但是，嵌套回调可以通过一个好的库来处理，比如古老的[async](https://github.com/caolan/async)或我的新小库：[queue-flow](https://github.com/dfellis/queue-flow)。它们处理回调问题，让您的代码保持非嵌套，看起来非常类似于阻塞、同步代码。:)

# python - 如何将 Python 内存字典作为 Python 源代码保存到文件中？

> ID：11594304
> 
> 赞同：1
> 
> 时间：2012-07-21T17:22:21.160
> 
> 标签：python, serialization, configuration, dictionary, code-generation

如何获取内存中 Python 字典的 Python**源代码表示？**

在阅读了 Thomas Kluyver对 Rob Galanakis 的博客文章的[评论](http://www.robg3d.com/?p=1000#comment-31367)后，我决定问这个问题，标题为[为什么要打扰 python 和配置文件？](http://www.robg3d.com/?p=1000)托马斯在他的评论中说

> 但是，如果您想通过任何方式更改应用程序内部的设置（如首选项对话框），则没有自动编写正确 Python 文件的好方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T17:30:39.043

假设它只使用“基本” Python 类型，您可以写出`repr()`结构的 ，然后使用`ast.literal_eval()`将其读回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T17:39:46.540

正如文章所说，你最好使用 JSON/YAML 或其他格式，但如果你真的想使用 Python 字典并且只使用基本的 Python 类型......

**写出（尝试使用 pformat 尝试使其更易于阅读）：**

```
from pprint import pformat # instead of using repr()

d = dict(enumerate('abcdefghijklmnopqrstuvwxyz'))
open('somefile.py').write(pformat(d)) 
```

**回读**：

```
from ast import literal_eval
d = literal_eval(open('somefile.py').read()) 
```

# jquery - IF 有效，SWITCH 无效

> ID：11594306
> 
> 赞同：0
> 
> 时间：2012-07-21T17:23:01.317
> 
> 标签：jquery

```
 <input type="text" name="importo_estratto" />
    <input type="text" name="numeri_giocati" />
    <input type="submit" id="submit" name="submit" /> 
```

```
$(document).ready(function() {
    $('input[name=submit]').click(function() {
        var importo_estratto = $('input[name=importo_estratto]').val();
        var numeri_giocati = $('input[name=numeri_giocati]').val();

        // ESTRATTO
        if (importo_estratto != '') {
            switch(numeri_giocati) {
                case 1: paga = 11.23; break;
                case 2: paga = 5.62; break;
                case 3: paga = 3.74; break;
                case 4: paga = 2.81; break;
                case 5: paga = 2.25; break;
                case 6: paga = 1.87; break;
                case 7: paga = 1.60; break;
                case 8: paga = 1.40; break;
                case 9: paga = 1.25; break;
                case 10: paga = 1.12; break;
            }

            /*if (numeri_giocati == 1) {
                var paga = 11.23;
            } else if (numeri_giocati == 2) {
                var paga = 5.62;
            } else if (numeri_giocati == 3) {
                var paga = 3.74;
            } else if (numeri_giocati == 4) {
                var paga = 2.81;
            } else if (numeri_giocati == 5) {
                var paga = 2.25;
            } else if (numeri_giocati == 6) {
                var paga = 1.87;
            } else if (numeri_giocati == 7) {
                var paga = 1.60;
            } else if (numeri_giocati == 8) {
                var paga = 1.40;
            } else if (numeri_giocati == 9) {
                var paga = 1.25;
            } else if (numeri_giocati == 10) {
                var paga = 1.12;
            }*/

            alert(paga);
        } else {
            var tot_estratto = 0;
        }
        return false;
    });
}); 
```

我需要你的帮助。我不知道为什么，但是 IF 有效，而 SWITCH 无效。警报输出“未定义”而不是值“paga”，但对我来说一切似乎都很好。

有人能帮助我吗？非常感谢你

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T17:27:44.690

将 numeri_giocati 设为数字，将其视为字符串，并且 switch 无法与数字匹配。您可以通过一元 + 运算符使其编号。您也可以使用`parseFloat()`or`parseInt()`代替使用一元加号。

**[现场演示](http://jsfiddle.net/rajaadil/LgMFR/)**

```
switch(+numeri_giocati) {
                case 1: paga = 11.23; break;
                case 2: paga = 5.62; break;
                case 3: paga = 3.74; break;
                case 4: paga = 2.81; break;
                case 5: paga = 2.25; break;
                case 6: paga = 1.87; break;
                case 7: paga = 1.60; break;
                case 8: paga = 1.40; break;
                case 9: paga = 1.25; break;
                case 10: paga = 1.12; break;
            } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T17:26:43.060

`switch`JavaScript 中的语句不执行类型转换。

```
switch(numeri_giocati) {
    case '1': paga = 11.23; break;
    case '2': paga = 5.62; break;
    case '3': paga = 3.74; break;
    case '4': paga = 2.81; break;
    case '5': paga = 2.25; break;
    case '6': paga = 1.87; break;
    case '7': paga = 1.60; break;
    case '8': paga = 1.40; break;
    case '9': paga = 1.25; break;
    case '10': paga = 1.12; break;
} 
```

或者，

```
var foo = parseInt(numeri_giocati);
switch(foo) {
    case 1: paga = 11.23; break;
    case 2: paga = 5.62; break;
    case 3: paga = 3.74; break;
    case 4: paga = 2.81; break;
    case 5: paga = 2.25; break;
    case 6: paga = 1.87; break;
    case 7: paga = 1.60; break;
    case 8: paga = 1.40; break;
    case 9: paga = 1.25; break;
    case 10: paga = 1.12; break;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-21T21:54:07.243

## 算法解决方案

没有人注意到，对于 的规定值`paga`，算法解决方案是可用的。

对于 numeri_giocati > 0， 的值`paga`由以下公式给出：

*   paga = 11.23 / numeri_giocati

[这是我](http://jsfiddle.net/85Xg8/5/)对算法给出正确值的验证（到 numeri_giocati = 1 到 10 范围内的小数点后 2 位）。

该算法可以使用 javascript 函数来实现`genPaga(seme, n)`，其中 seme 是种子（或标量）值 11.23，n 是正整数。

因此，问题中的代码变为：

```
$(document).ready(function() {
    function genPaga(seme, n) {
        return (seme / n).toFixed(2);
    }

    $('input[name=submit]').click(function() {
        var importo_estratto = $('input[name=importo_estratto]').val();
        var numeri_giocati = parseInt($('input[name=numeri_giocati]').val(), 10);
        var paga, tot_estratto;//??
        if (importo_estratto != '' && !isNaN(numeri_giocati) && numeri_giocati >= 1) {
            paga = genPaga(11.23, numeri_giocati);
        } else {
            tot_estratto = 0;
        }
        return false;
    });
}); 
```

这种方法的优点是您不限于在 switch/case 语句中硬编码的值范围。假设有一天您希望满足 numeri_giocati = 11、12、13 等。算法将自动处理。如果需要，该函数`genPaga()`也可以在代码的其他地方调用。

限制是您受算法的约束。如果算法不可用（或无法推断），则开关/案例可能是唯一的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T17:26:25.420

你必须`var paga`在开关之前定义并制作`numeri_giocati`数字

像这样：

```
$(document).ready(function() {
    $('input[name=submit]').click(function() {
        var importo_estratto = $('input[name=importo_estratto]').val();
        var numeri_giocati = $('input[name=numeri_giocati]').val();

        // ESTRATTO
        var paga = 0;
        if (importo_estratto != '') {
            switch(+numeri_giocati) {
                case 1: paga = 11.23; break;
                case 2: paga = 5.62; break;
                case 3: paga = 3.74; break;
                case 4: paga = 2.81; break;
                case 5: paga = 2.25; break;
                case 6: paga = 1.87; break;
                case 7: paga = 1.60; break;
                case 8: paga = 1.40; break;
                case 9: paga = 1.25; break;
                case 10: paga = 1.12; break;
            }

            /*if (numeri_giocati == 1) {
                var paga = 11.23;
            } else if (numeri_giocati == 2) {
                var paga = 5.62;
            } else if (numeri_giocati == 3) {
                var paga = 3.74;
            } else if (numeri_giocati == 4) {
                var paga = 2.81;
            } else if (numeri_giocati == 5) {
                var paga = 2.25;
            } else if (numeri_giocati == 6) {
                var paga = 1.87;
            } else if (numeri_giocati == 7) {
                var paga = 1.60;
            } else if (numeri_giocati == 8) {
                var paga = 1.40;
            } else if (numeri_giocati == 9) {
                var paga = 1.25;
            } else if (numeri_giocati == 10) {
                var paga = 1.12;
            }*/

            alert(paga);
        } else {
            var tot_estratto = 0;
        }
        return false;
    });
}); 
```

# c# - 使用 C# 和 WinRT 在 Sqlite3 数据库中存储对象

> ID：11594312
> 
> 赞同：3
> 
> 时间：2012-07-21T17:23:44.797
> 
> 标签：c#, sqlite, windows-8, microsoft-metro, windows-runtime

[在此处](http://wp.qmatteoq.com/using-sqlite-in-your-windows-8-metro-style-applications/)遵循本指南，我定义了一个自定义类（我们称之为 MyClass），并使用用于 WinRT 的 sqlite 版本（windows 8/metro 应用程序）和从 Visual Studio 2012 中的 NuGet 包管理器获得的 sqlite-net API能够创建一个用于存储 MyClass 实例的数据库文件

```
SQLiteAsyncConnection conn = new SQLiteAsyncConnection("MyClassDB");
await conn.CreateTableAsync<MyClass>(); 
```

但是 MyClass 包含数组（其他自定义类和字符串数组）和其他“更复杂”的类型，而不仅仅是文本和数字，即使它们在 MyClass 定义中明确定义，它们也没有被创建为数据库文件中的接受字段（我使用 sqlite 数据库浏览器检查，并在记事本中打开文件，只找到 MyClass 的字符串和数字字段）

我如何让数据库存储 MyClass 中存在的这些其他类型/类的实例，或者，假设不支持那种东西，我可以使用什么替代解决方案？MyClass 的一些属性将用于程序中的查询等。

我将不胜感激任何帮助

# java - 关闭固定大小的线程池

> ID：11594314
> 
> 赞同：1
> 
> 时间：2012-07-21T17:23:55.827
> 
> 标签：java, concurrency

我`Executors.newFixedThreadPool`用来生成一个线程池，并希望在作业队列为空且没有线程在工作时将其关闭。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T17:31:32.250

您首先需要关闭池，同时让所有已提交的任务完成但不允许新的任务。然后你可以阻塞直到队列为空并且所有任务都完成：

```
pool.shutdown();
pool.awaitTermination(1, TimeUnit.HOUR); 
```

[`ExecutorService.shutdown()`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#shutdown%28%29)：

> 执行之前提交的任务，但不会接受新的任务

[`ExecutorService.awaitTermination()`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#awaitTermination%28long,%20java.util.concurrent.TimeUnit%29)：

> 在关闭请求后阻塞，直到所有任务都完成执行

# ruby - Ruby 浏览器中的 SSH 终端

> ID：11594320
> 
> 赞同：0
> 
> 时间：2012-07-21T17:24:11.523
> 
> 标签：ruby, ssh

我看过 Net-SSH gem，但它似乎不支持浏览器方面。在我开始将该 gem 与 javascript 和完整的用户界面集成之前，我只是想问问社区是否有任何库已经为我完成了这项工作。随意推荐 ruby​​ 之外的库。欢迎任何和所有建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T21:40:26.727

There is already a product: [GateOne](http://liftoffsoftware.com/Products/GateOne). But sorry it is Python.

# jquery - 使用 Jquery UI 拖动和更新列表并提取行项目 ID 以进行更新

> ID：11594321
> 
> 赞同：2
> 
> 时间：2012-07-21T17:24:14.463
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我正在尝试构建一个团队选择器应用程序，该应用程序允许您将未加入团队的玩家拖入团队。

我正在使用可通过“connectWith”进行排序的 JQUERY UI。到目前为止，我可以将球员从球员列表拖到不同的球队中，但是我希望能够在每个球员在球队之间移动时为他们触发更新。

我创建了一个jsfiddle：

[http://jsfiddle.net/dXmpG/](http://jsfiddle.net/dXmpG/)

当“玩家”从玩家列表拖到团队列表时，脚本会提醒两个列表的名称，但是我希望能够获得的是已移动的行项目的 ID，以便我可以发送类似于以下内容的更新：

myupdatescript.php?Player=[li item id]&FirstList=Players&SecondList=Team1

无论如何提取要移动的订单项的 id 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T17:58:05.600

试试这个作为你的更新功能：

```
update: function (event, ui) { 
    alert($(ui.item).attr("id"));
} 
```

请注意，您将收到两次警报，因为您有两个“.connectedSortable”实例，一个用于 Team1，另一个用于 Team2。所以 Team1 的 sortupdate 事件会触发，然后 Team2 的 sortupdate 事件会触发。

更新了 jsfiddle：http: [//jsfiddle.net/pjFgw/1/](http://jsfiddle.net/pjFgw/1/)

jQuery UI 参考：http: [//jqueryui.com/demos/sortable/#event-update](http://jqueryui.com/demos/sortable/#event-update)

# optimization - 如何优化 CSS 代码？

> ID：11594334
> 
> 赞同：0
> 
> 时间：2012-07-21T17:25:32.770
> 
> 标签：optimization, css

我应该如何优化 CSS 代码？有各种 CSS3 行，例如 -moz- 和 -webkit-、border-top-left-radius 等。我相信更大的 CSS 文件会显着增加页面加载时间。

还有一个问题：我写了很多代码，但是其中一些没有被使用。我有超过 2000 行 CSS 代码，我敢打赌大约可以删除 200-300 行，甚至更多。是否值得修改所有代码？这将需要相当长的时间...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T17:31:12.980

在将文件上传到服务器之前[对文件进行 GZip](http://www.wangarific.com/how-to-gzip-css-files/)

它将显着减小文件大小

**编辑：GZipping 的效果 -**

通过在 Bargaineering 上对 .css 文件进行 gzip 压缩，其大小从 28.2K 降至 7.3K，节省了 74.1%。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T17:33:41.780

*   总是删除最后一个分号：

    `body { background: black; color: white; }`
    至
    `body { background: black; color: white }`

*   结合多个属性：

    `.class { margin-top: 10px; margin-right : 20px; margin-bottom: 30px; margin-left: 40px; }`
    至
    `.class { margin: 10px 20px 30px 40px; }`

*   使用简单的颜色（而不是``#FFFFFF, #AABBCC, #FF0000`put `#FFF, #ABC, #F00`）

*   最重要的是：在上传到服务器之前[**缩小你的代码。**](http://minifycss.com/)它将删除空格和注释，并显着减少您的代码和文件大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T17:32:38.783

文件越小，下载速度越快，用户渲染样式的速度就越快。有各种缩小脚本，我会查看 YUI 压缩器：[http ://refresh-sf.com/yui/](http://refresh-sf.com/yui/)

# objective-c - 未知类型名称

> ID：11594336
> 
> 赞同：2
> 
> 时间：2012-07-21T17:25:35.433
> 
> 标签：objective-c, ios, xcode, cocos2d-iphone

我的 .h 文件：

```
#import <Foundation/Foundation.h>
#import "cocos2d.h"
#import "GameData.h"
#import "PROBattleScene.h"

@interface PROBattleAI : NSObject {
    BattleType type;
    PROBattleScene *scene;
}

-(id)initWithType:(BattleType)_type andBattleInformation:(NSMutableDictionary*)_information andScene:(PROBattleScene*)_scene;
-(void)dealloc;
@end 
```

但是在线上`PROBattleScene *scene;`我从 Xcode 中得到了未知的类型名称错误。

我在这里尝试了答案：[xcode unknown type name](https://stackoverflow.com/questions/7897268/xcode-unknown-type-name)但我已经这样做了（并且不起作用）。

为什么会这样？我已经在导入我的`PROBattleScene.h`文件，为什么它没有被识别？

**编辑**：以及`PROBattleScene.h`所要求的内容：

```
#import <Foundation/Foundation.h>
#import "cocos2d.h"
#import "GameData.h"
#import "SimpleAudioEngine.h"

#import "PROBattleBackground.h"
#import "PROBattleAI.h"

@interface PROBattleScene : CCLayer {
    NSMutableDictionary *battleInformation;
    NSMutableArray *localPlayerPartyData;

    PROBattleBackground *background;

    CCNode *base;

    PROBattleAI *enemyAI;
}
+(CCScene*)scene;
-(id)init;
-(void)loadBattleInformation;
-(void)loadBGM;
-(void)loadBackground;
-(void)loadBase;
-(void)loadEnemyAI;
-(void)beginBattle;

@end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T17:45:58.557

你有一个循环依赖。PROBattleAI 进口 PROBattleScene 进口 PROBattleAI 进口 PROBattleScene~~<zomg无限循环>~~

`@class PROBattleWhatever`尽可能在标题中使用。仅导入协议定义或超类的标头。

**编辑**好的，上面的措辞完全不好……而且具有误导性。这是（我相信）发生的详细情况。您的 PROBattleAI 导入 PROBattleScene，然后导入 PROBattleAI，然后再导入 PROBattleScene（在它到达任一文件中的任何代码之前）。这次导入将忽略 PROBattleScene，因为它已经被导入，并且由于文件被跳过，您将收到未定义的类型错误。

# html - 如何让 stroke-dasharray 在路径上看起来与在线上相同

> ID：11594338
> 
> 赞同：0
> 
> 时间：2012-07-21T17:25:53.407
> 
> 标签：html, css, svg

我正在尝试创建一个具有 16px 路径和 14px 间隙的虚线图案。我试过使用：

```
stroke-dasharray: 16px 14px; 
```

它适用于我的`<line>`元素，但似乎对我的元素没有任何作用`<path>`。

这是一个可以玩的小提琴：http: [//jsfiddle.net/Wexcode/avTY6/](http://jsfiddle.net/Wexcode/avTY6/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T19:17:03.163

你有两条弧线在彼此的顶部略微偏移。此外，路径默认填充为黑色（线条不使用填充）。[这](http://jsfiddle.net/longsonr/avTY6/3/)似乎是关于你想要什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T17:44:05.123

我不是专家，但似乎你不能为这条路径设置任何值组合（可能是因为这些值的组合在圆圈周围重叠，所以看起来它是单线）。
如果您尝试使用**12px 10px**，它可以工作，但同样，如果您尝试使用**14px 10px**（两个整数值） - 它不起作用。

# objective-c - 使用运行时将弱 ivar 添加到 Objective-C 类

> ID：11594339
> 
> 赞同：2
> 
> 时间：2012-07-21T17:26:01.273
> 
> 标签：objective-c, automatic-ref-counting, weak-references, objective-c-runtime

是否可以向使用运行时创建的类添加归零弱引用（在 ARC 意义上，而不是 GC）实例变量？如果有怎么办？

有一个`class_setWeakIvarLayout()`似乎与此相关的函数被调用，但不幸的是，文档（对于这个函数和非弱对应）*非常*薄。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T02:37:34.310

You can achieve a **zeroing** weak reference using associative references with a container class. Basically:

1.  Your container class contains a single ivar, which is declared `__weak id`
2.  The associative reference 'setter' creates a conatiner, sets the `__weak id` ivar to point to your object, and then stores the container using `objc_setAssociatedObjects(self,&key,container,OBJC_ASSOCIATION_RETAIN)`
3.  Your getter retrieves the container using `objc_getAssociatedObject(self, &key)` and returns the `__weak id` ivar. If your object has been `dealloc`'ed, the `__weak id ivar` of the container will be zero.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T18:07:38.830

`class_setWeakIvarLayout()`在GC下使用。我不确定它是否在 ARC 下使用。在任何情况下，您都不能在运行时更改类的布局，包括添加任意实例变量（尽管由于现代运行时，您可以将 ivars 添加到类并重新编译而无需重新编译子类）。

请参阅关联对象。它们提供了您想要的大部分，也许是全部（我不确定是否直接支持 zeroing-weak - 不，您需要找到替代解决方案）。

[http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocAssociativeReferences.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocAssociativeReferences.html)

* * *

啊——好的。感谢您的澄清。我不确定您是否可以通过 API 动态设置弱调零 ARC 行为。不过，运行时和编译器的源代码是可用的。

请注意，您可以很容易地在非 ARC 环境下伪造归零弱，方法是设置一个实现 -dealloc 的类来执行您需要的任何清理，将实例与需要在释放时触发所述清理的对象相关联，并确保没有其他东西保留该对象具有自定义 -dealloc 通知挂钩。它有点脆弱，但它有效。

# google-app-engine - 如何生成具有动态内容的打印就绪格式？

> ID：11594343
> 
> 赞同：0
> 
> 时间：2012-07-21T17:26:14.483
> 
> 标签：google-app-engine, gwt

您好，我们在 Google App Engine for Java 中构建了一个非盈利应用程序。此应用程序允许人们在我们的系统上注册为献血者。

因此，我们希望通过电子邮件向他们发送可打印的 e-BloodDonor 卡。

创建这样的卡片的方法是什么，我们可以定义卡片的设计并根据注册数据动态填充内容？

请指教

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T14:49:57.853

您可以在 HTML 中创建布局，就像在您的应用程序中的普通视图一样，然后将指向该页面的链接通过电子邮件发送给他们以将其打印出来。您还可以采用更复杂的方式为每个用户生成 PDF 或图像。[Apache 的PDFBox](http://pdfbox.apache.org/)非常适合 PDF 生成。

不过，如果它适合您，我真的会推荐 HTML 路线。以我的经验，做 HTML 布局比用 Java 编写 PDF 布局要容易得多。

# asp.net-mvc-3 - .net mvc3 iTextSharp如何将图像添加到内存流中的pdf并返回浏览器

> ID：11594344
> 
> 赞同：0
> 
> 时间：2012-07-21T17:26:14.763
> 
> 标签：asp.net-mvc-3, image, itextsharp, memorystream

我的数据库中存储了一个 .pdf 文件，并且我的数据库中存储了一个签名文件 (.png)。我正在尝试使用 iTextSharp 将签名图像添加到 .pdf 文件，并将结果显示到浏览器。

这是我的代码：

```
 byte[] file = Repo.GetDocumentBytes(applicantApplication.ApplicationID, documentID);
        byte[] signatureBytes = Repo.GetSignatureBytes((Guid)applicantApplicationID, signatureID);

        iTextSharp.text.Image signatureImage = iTextSharp.text.Image.GetInstance(signatureBytes);                      
        iTextSharp.text.Document document = new iTextSharp.text.Document(); 

        using (System.IO.MemoryStream ms = new System.IO.MemoryStream(file, 0, file.Length, true, true))
        {
            PdfWriter writer = PdfWriter.GetInstance(document, ms);
            document.Open();

            signatureImage.SetAbsolutePosition(200, 200);
            signatureImage.ScaleAbsolute(200, 50);
            document.Add(signatureImage);

            document.Close();

            return File(ms.GetBuffer(), "application/pdf");
        } 
```

页面加载，并且有一个带有签名的 .pdf，但找不到原始文档。看起来我正在创建一个新的 .pdf 文件并将图像放入其中，而不是编辑旧的 .pdf 文件。

我已验证原始 .pdf 文档正在加载到“文件”变量中。我还验证了 MemoryStream "ms" 的长度与 byte[] "file" 的长度相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:36:08.073

我最终在我的存储库中做了这样的事情：

```
 using (Stream inputPdfStream = new MemoryStream(file, 0, file.Length, true, true))
        using (Stream inputImageStream = new MemoryStream(signatureBytes, 0, signatureBytes.Length, true, true))
        using (MemoryStream outputPdfStream = new MemoryStream())
        {
            var reader = new PdfReader(inputPdfStream);
            var stamper = new PdfStamper(reader, outputPdfStream);
            var cb = stamper.GetOverContent(1);

            iTextSharp.text.Image image = iTextSharp.text.Image.GetInstance(inputImageStream);
            image.SetAbsolutePosition(400, 100);
            image.ScaleAbsolute(200, 50);
            cb.AddImage(image);

            stamper.Close();

            return outputPdfStream.GetBuffer();
       } 
```

我从 StackOverflow 上的其他一些答案中改编了它

# php - 在 PDO 查询中两个参数相邻？

> ID：11594353
> 
> 赞同：3
> 
> 时间：2012-07-21T17:28:20.363
> 
> 标签：php, mysql, pdo

我遇到了一个问题。当我使用 PDO::prepare() 构建某个查询，然后传递参数执行时，查询将正确执行，但其中一个参数似乎没有插入到数据库中。准备语句如下所示：

```
... SET col = :par1-:par2 ... 
```

所以我要做的是将值“[par1]-[par2]”放入数据库的列中。问题是第一个参数没有存储在数据库中，但破折号和第二个参数是。因此，上述查询存储在数据库中的结果值为“-[par2]”。

为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T17:43:40.200

你在那里写的是一个整数减法。`par1`因此，您将减号的结果`par2`写入`col`.

相反，您应该在 PDO 之外创建字符串`$par1 . '-' . $par2`，然后通过其他一些命名参数将其传递：

```
$stmt = $pdo->prepare('... SET col = :col');
$stmt->execute(['col' => $par1 . '-' . $par2]); 
```

# android - 如何仅在按下按钮时设置倒数计时器？

> ID：11594354
> 
> 赞同：0
> 
> 时间：2012-07-21T17:28:51.580
> 
> 标签：android

我正在实现一个倒数计时器，并遵循 StackoverFlow 中的一个示例。在我的版本中，我将按下开始按钮开始计数，按下停止按钮停止。但问题是我进入活动后立即开始计数。知道如何按照我想要的方式制作吗？

```
public class StartActivity extends Activity
{
    Button beginRecordingButton;
    TextView timer;
    long startTime;
    long countup;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {super.onCreate(savedInstanceState);
        setContentView(R.layout.startactivity);
        beginRecordingButton = (Button) findViewById(R.id.BeginRecording);
        timer = (TextView) findViewById(R.id.timer);
        final Chronometer stopwatch = (Chronometer) findViewById(R.id.chrono);
        startTime = SystemClock.elapsedRealtime();
        stopwatch.setOnChronometerTickListener(listener);

        beginRecordingButton.setOnClickListener(new OnClickListener()
        {
            int counter = 0;

            public void onClick(View v)
            {

                if (counter % 2 == 0)
                {

                    stopwatch.start();
                    beginRecordingButton.setText("Stop");
                }
                if (counter % 2 == 1)
                {

                    stopwatch.stop();
                    beginRecordingButton.setText("Begin");
                }
                counter++;  //counter is used for knowing it is stop or begin

            }
        });
    }

    private OnChronometerTickListener listener = new OnChronometerTickListener()
    {

        public void onChronometerTick(Chronometer chronometer)
        {
            String text;
            countup = (SystemClock.elapsedRealtime() - chronometer.getBase())/1000;
            if(countup%60<10)
            {
                 text = (countup/60) + ":0" + (countup%60);
            }
            else
            {
                 text = (countup/60) + ":" + (countup%60);
            }

            timer.setText(text);
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T17:54:47.423

我通过执行以下操作找到了解决方案：

```
long test;

test = (SystemClock.elapsedRealtime() - stopwatch.getBase())/1000;
Log.i(TAG, = (SystemClock.elapsedRealtime() - chronometer.getBase()) / 1000 - test;

basically String.valueOf(test));
stopwatch.start(); 
```

计数的想法是，如果我按下开始按钮，则减去经过的时间，使其从 0 开始

# c# - linq-to-sql SingleOrDefault 在 null 时返回

> ID：11594355
> 
> 赞同：0
> 
> 时间：2012-07-21T17:28:57.273
> 
> 标签：c#, linq-to-sql

我正在编写一个 linq-to-sql 查询，我正在从一个表中加载一个 ID（`bigint`数据库中的一个和我的代码中的一个），如下所示：`long`

```
var SomeQuery = (from x in ...
                 select x.ID).SingleOrDefault(); 
```

当我得到结果时，我会`SingleOrDefault`在返回为空的情况下使用。这是否意味着如果结果为空，则`SomeQuery`变量将为 0 或 null？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T17:31:34.807

如果您查看[SingleOrDefault 的文档](http://msdn.microsoft.com/en-us/library/bb342451.aspx)

> 返回序列的唯一元素，如果序列为空，则返回默认值；如果序列中有多个元素，此方法将引发异常。

它明确指出，如果序列为空，它将返回long 和 bigint 为**0的**[默认值](http://msdn.microsoft.com/en-us/library/xwth0h0d.aspx)。 **为什么下面解释**

 ****[默认关键字状态](http://msdn.microsoft.com/en-us/library/xwth0h0d.aspx)的文档

> 在泛型类和方法中，出现的一个问题是，当您事先不知道以下内容时，如何为参数化类型 T 分配默认值：
> 
> T 是引用类型还是值类型。
> 
> 如果 T 是值类型，无论是数值还是结构。
> 
> 给定参数化类型 T 的变量 t，语句 t = null 仅在 T 是引用类型且 t = 0 仅适用于数值类型而不适用于结构时才有效。解决方案是使用 default 关键字，它将为引用类型返回 null，而 为数值类型返回**零。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T17:36:11.623

如果没有找到元素，则返回默认值。（int的默认值为0）

如果找到，则返回值。

如果找到多个，则抛出异常。****

# php - 警告：mysqli::prepare() [mysqli.prepare]：

> ID：11594356
> 
> 赞同：-2
> 
> 时间：2012-07-21T17:29:07.290
> 
> 标签：php, sql

我有这个问题

> 警告：mysqli::prepare() [mysqli.prepare]: (42000/1064): 你的 SQL 语法有错误；在 D:\xampp\htdocs\Optimizer\login\submit 的第 1 行查看与您的 MySQL 服务器版本相对应的手册以获取正确的语法，以便在 'desc，keyword) VALUES (?,?,?,?)' 附近使用。第 125 行的 php

使用此代码制作链接目录时遇到此问题：

```
if ($stmt = $mysqli->prepare("INSERT url (url, title, desc, keyword) VALUES (?,?,?,?)"))**==>>Line 125**
        {
            $stmt->bind_param("ssss", $input['url'], $input['title'],$input['desc'],$input['keyword']);
            $stmt->execute();
            $stmt->close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T17:33:24.440

至少`desc`是一个保留关键字，可能还有一些您的字段名称。在保留关键字的字段名称周围加上反引号。

# python - 第一个使用gevent完成后如何生成不同的功能？

> ID：11594358
> 
> 赞同：3
> 
> 时间：2012-07-21T17:29:30.250
> 
> 标签：python, asynchronous, gevent

基本思路如下：

一个请求来了`views1`，它首先返回用户名。`do_something_else`在views1完成后，有一些繁重的工作需要单独完成。您可以将其视为创建一个新用户，但必须对后台进行一些繁重的检查。

```
def views1(..):
   username = get_uername(...)
   return username

from lib import do_something_else
def do_something_else(...):
   // do heavy stuff here

gevent.joinall([
   gevent.spawn(views1, parmeter1, parmeter2, ...),
   gevent.spawn(do_something_else, parmeter1, parmeter2, ...)
]) 
```

问题是我不认为`do_something_else`根据我的日志记录被调用过。我读了教程，我不知道该放在哪里`gevent.sleep(0)`。我不想阻塞。我希望用户立即看到用户名，并`do_something_else`在后台运行。

任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T10:16:11.477

重要的是要了解您需要将“重负载”处理分离到线程池 [1]。

在 gevent 线程中发生的每个处理（每个本地线程可以有一个 gevent HUB）必须只专注于处理网络请求和发送响应。

```
from gevent import spawn, run
from gevent.threadpool import ThreadPool
from time import sleep as heavy_load, time as now

class Globals:
    jobs = 4
    index = 0
    greenlets = []
    pool = ThreadPool(3) # change size of the pool appropriately

start = now()

def get_uername():
    heavy_load(0.1)
    Globals.index += 1
    return "Alex {0}".format(Globals.index)

def do_something_else(username):
    heavy_load(2.0)
    print "Heavy job done for", username, now() - start

def views1():
    "a request comes to views1 and it first returns the username"
    username = get_uername()
    ## There is some heavy job separate done by do_something_else right after views1 is done
    Globals.greenlets.append( 
        Globals.pool.spawn(do_something_else, username) 
        )
    # return username
    print "Returned requested username", username, now() - start

if __name__ == '__main__':
    ## simulate clients 
    for job_index in xrange(Globals.jobs):
        Globals.greenlets.append( spawn(views1) )

    ## wait for all tasks to complete
    # for greenlet in Globals.greenlets:
        # try:
            # greenlet.join()
        # except AttributeError, e:
            # greenlet.get()
    run()
    print "Test done", now() - start 
```

这是测试的输出：

```
python threadpool_test.py
Returned requested username Alex 1 0.101000070572
Returned requested username Alex 2 0.201999902725
Returned requested username Alex 3 0.302999973297
Returned requested username Alex 4 0.40299987793
Heavy job done for Alex 1 2.10100007057
Heavy job done for Alex 2 2.2009999752
Heavy job done for Alex 3 2.3029999733
Heavy job done for Alex 4 4.10299992561
Test done 4.10500001907 
```

注意所有请求是如何首先完成的，并行`do_something_else`任务是如何分批完成的，大小为 3。

当不使用 ThreadPool 时，每个请求都会花费由 gevent 引入的额外时间，`do_something_else`而这并不是`asynchronous programming`gevent 必须提供的。在这种情况下，输出将如下所示：

```
Heavy job done for Alex 1 2.10100007057
Returned requested username Alex 1 2.10100007057
Heavy job done for Alex 2 4.2009999752
Returned requested username Alex 2 4.20199990273
Heavy job done for Alex 3 6.30200004578
Returned requested username Alex 3 6.3029999733
Heavy job done for Alex 4 8.40299987793
Returned requested username Alex 4 8.40400004387
Test done 8.40400004387 
```

注意第四个请求是如何在 8.4 秒后完成的，而不是在异步处理时 0.4 秒。

[1] [http://code.google.com/p/gevent/source/browse/examples/threadpool.py](http://code.google.com/p/gevent/source/browse/examples/threadpool.py)

# .htaccess - Codeigniter URL 重写 --- 奇怪的事

> ID：11594359
> 
> 赞同：0
> 
> 时间：2012-07-21T17:29:46.107
> 
> 标签：.htaccess, codeigniter, mod-rewrite, url-rewriting

我刚刚使用 htaccess 重新编写（我刚刚删除了 index.php 部分）

我刚得到一个这样的网址

```
http://localhost/mvc/movies/movie/3237-Movie-name-here 
```

其中 mvc - 此根文件夹电影 - 控制器电影 - 视图 3237- 用于从数据库获取的查询字符串 (pk) 电影名称 - 用于 SEO URL

有了这个我可以用 pk 3237 得到电影的细节

现在我只需要将这个 url 重写为（使用 htaccess）

```
http://localhost/mvc/movie/3237-Movie-name-here 
```

请帮忙谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T17:57:28.820

您可以使用 CODEIGNITER 路由。在这里描述[http://codeigniter.com/user_guide/general/routing.html](http://codeigniter.com/user_guide/general/routing.html)

在你的情况下`$route['mvc/movies/([:num)/(:any)'] = "mvc/movie/$1-$2";`

# android - 在为 Android 编译 TouchDB 时，如何避免出现内存不足错误？

> ID：11594363
> 
> 赞同：1
> 
> 时间：2012-07-21T17:30:06.413
> 
> 标签：android, couchdb, touchdb

我正在尝试使用[TouchDB for Android](https://github.com/couchbaselabs/TouchDB-Android)，但是当我尝试编译示例项目或自己制作一个示例项目时，它说它无法编译 dex，因为它内存不足或超出了堆大小。然后 Eclipse 崩溃，yada yada yada 每次我尝试更改某些内容以解决问题时，我都会等待 10 分钟。

我有一个相当大的堆大小集，而 TouchDB 并不是一个巨大的项目。所以我认为我一定错过了这个难题的一些关键部分。

有没有其他人遇到过这个问题并找到了解决方案？我在 Mac 上使用 Eclipse（版本 Juno）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:31:18.850

使用参数 -vmargs -Xmx1024M 启动 Eclipse

# javascript - 当 url 包含“#”时，jquery 文档准备失败

> ID：11594366
> 
> 赞同：-2
> 
> 时间：2012-07-21T17:30:37.240
> 
> 标签：javascript, url, hash, onload

```
jQuery(document).ready(function() {
}); 
```

或者

```
window.onload = function () {
} 
```

当 URL 内容以“#”字符结尾时不会触发。有什么办法通过吗？

示例：[http ://beta.something.com/user.php#](http://beta.something.com/user.php#)

javascript onload 永远不会在上面的 url 上触发。我怎样才能触发它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T17:39:21.060

没有更多信息很难确定，但我怀疑您*已经*在同一页面上，因此转到“散列”网址实际上不会重新加载页面，并且 onload 函数不会触发。

换句话说，如果在 user.php 页面上有这样的链接：`<a href="user.php#">foo</a>`，单击它不会重新加载页面，只会将您移动到文档的顶部，并且不会触发 onload 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T17:40:31.367

ready 和 load 事件仅在页面首次加载时触发。当您转到带有添加到 URL 的书签的同一页面时，该页面不会重新加载，浏览器只会滚动到页面中的书签。

仅以哈希字符结尾的 URL 有一个空书签，因此浏览器会滚动到页面顶部。

# php - 选定的表单选项

> ID：11594369
> 
> 赞同：1
> 
> 时间：2012-07-21T17:30:58.863
> 
> 标签：php, forms

我目前有一个表格，我可以在其中从数据库中选择一个选项列表。我试图让它显示用户选择的选项。它似乎不起作用。

```
<form action="include/validate.info.php" method="POST" target="ifr2">
Gender - <select name="gender">
<?php $sql = "SELECT * FROM settings_options WHERE option_type='gender'";
$query=mysql_query($sql);
while($option=mysql_fetch_array($query)){
if($option['option_value']==$user['gender']){
echo "<option value='".$option['option_value']."' selected='selected'>".$option['option_value']."</option>";                
}else{
echo "<option value='".$option['option_value']."'>".$option['option_value']."</option>";}} ?>  </select>
<input type="submit" value="save" class="settings_submit">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T17:49:53.160

我忘了把它添加到我的页面。失败 $user = mysite_user_core::getuser($id);

# css - CSS - 图像上的透明度渐变

> ID：11594370
> 
> 赞同：9
> 
> 时间：2012-07-21T17:30:58.817
> 
> 标签：css, transparency, background-image

我希望我的背景图像从 100% 不透明度变为 0% 不透明度。我可以选择使用另一个图像资源，我使用图像编辑器使图像淡化不透明度，但是我想使用尽可能少的资源。这可以用 CSS 完成吗？我知道我可以制作几个 div 来更改每个 div 的不透明度，但是这需要很多 div 才能让它看起来不错。

这是我的代码当前与我不想使用的解决方案的样子：

```
<div class="contentFadeAway" id="cfa1"></div>
<div class="contentFadeAway" id="cfa2"></div>
<div class="contentFadeAway" id="cfa3"></div>
<div class="contentFadeAway" id="cfa4"></div>
<div class="contentFadeAway" id="cfa5"></div>
<div class="contentFadeAway" id="cfa6"></div>
<div class="contentFadeAway" id="cfa7"></div>
<div class="contentFadeAway" id="cfa8"></div>
<div class="contentFadeAway" id="cfa9"></div>
<div class="contentFadeAway" id="cfa10"></div> 
```

和CSS：

```
.contentFadeAway {
    display: block;
    position: fixed;
    top: 160px;

    padding: 0px;
    width: 100%;

    height: 5px;
    background: url('/assets/shapeimage_3_int.png') fixed;
    background-size:cover;
    z-index: +1;
}

#cfa1 { top: 160px; opacity: 1; }
#cfa2 { top: 165px; opacity: .9; }
#cfa3 { top: 170px; opacity: .8; }
#cfa4 { top: 175px; opacity: .7; }
#cfa5 { top: 180px; opacity: .6; }
#cfa6 { top: 185px; opacity: .5; }
#cfa7 { top: 190px; opacity: .4; }
#cfa8 { top: 195px; opacity: .3; }
#cfa9 { top: 200px; opacity: .2; }
#cfa10 { top: 205px; opacity: .1; } 
```

对于那些不明白该代码在做什么的人，请点击此处：http: [//jsfiddle.net/FVNY7/2/](http://jsfiddle.net/FVNY7/2/) 我有一个背景图片，我希望内容在向上滚动时消失，所以我会具有相同的图像，不透明度从 1 到 0 以产生这种效果。如果背景是纯色，我可以只使用 rgba 渐变，但它是图像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T18:40:35.657

为了获得最多的跨浏览器支持，请在 div 中设置背景图像。然后用半透明渐变背景覆盖另一个 div。

HTML：

```
<div class="content"></div>
<div class="FadeAway"></div> 
```

CSS：

```
.content{ position:absolute; top:0px; left:0px; width:100%; height:100%; background:url('http://upload.wikimedia.org/wikipedia/commons/thumb/0/0c/GoldenGateBridge-001.jpg/400px-GoldenGateBridge-001.jpg') no-repeat; }

.FadeAway{
    position: absolute; top:0px; left:0px; width:100%; height:100%;
        background:transparent;
        background: linear-gradient(top, rgba( 255, 255, 255, 255 ) 0%, rgba( 255, 255, 255, 1 ) 100% );
        background: -moz-linear-gradient(top, rgba( 255, 255, 255, 0) 0%, rgba( 255, 255, 255, 1 ) 100% );
        background: -ms-linear-gradient(top, rgba( 255, 255, 255, 0 ) 0%, rgba( 255, 255, 255, 1 ) 100% );
        background: -o-linear-gradient( top, rgba( 255, 255, 255, 0 ) 0%, rgba( 255, 255, 255, 1 ) 100% );
        background: -webkit-linear-gradient( top, rgba( 255, 255, 255, 0 ) 0%, rgba( 255, 255, 255, 1 ) 100% );
        -ms-filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#550000FF, endColorstr=#550000FF);
        filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#00ffffff, endColorstr=#ffffffff);
} 
```

这是上面示例的小提琴：http: [//jsfiddle.net/FVNY7/](http://jsfiddle.net/FVNY7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T06:56:18.280

尽管它可能不是最好的实现，并且可能有更好的方法，但我发现的最好方法是我在问题中提到的肮脏的实现。使用 PHP 代码可以更精致、更好看。这是代码：

```
<style>
.contentFadeAway {
    display: block;
    position: fixed;
    top: 160px;

    padding: 0px;
    width: 100%;

    height: 1px;
    background: url('/assets/shapeimage_3_int.png') fixed;
    background-size:cover;
    z-index: +1;
}
</style>

<?php 
    for ($int = "1"; $int <= "50"; $int++) {
        echo "<div class=\"contentFadeAway\" style=\"top: " . (160 + 1 * $int) . "px; opacity: " . (1 - .02 * $int) . ";\"></div>\";
        ";
    }   
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T22:11:37.230

我对我的问题的解决方案是简单地说这在当前技术下是不可能的。另一种选择是使用简单的透明度渐变。在更好的解决方案出现之前，这就是我最终要做的。

```
background: linear-gradient(to bottom, rgba(0,0,0,1) 0%,rgba(0,0,0,0) 100%); 
```

# jquery - 选择具有多个属性的多个元素（语言切换器）

> ID：11594373
> 
> 赞同：2
> 
> 时间：2012-07-21T17:31:14.280
> 
> 标签：jquery, attributes, click

为什么`$('*[lang|="de"][lang|="sv"]').hide();`不使用 lang="de" 和 lang="se" 属性选择然后隐藏我所有的 h1s、h2s 和 ps？例如与

```
<p lang="de">Lorem Ipsum ist ein einfacher Blindtext für die Druckindustrie.</p>
<p lang="en">Lorem Ipsum is simply dummy text of the printing industry.</p>
<p lang="sv">Lorem Ipsum är en utfyllnadstext från tryckindustrin.</p> 
```

我正在使用一个非常简单的三重语言选择器（默认情况下可见英语），例如

```
<script type="text/javascript">
$('*[lang|="de"][lang|="sv"]').hide();

$("#lang_de").click(function (event) {
event.preventDefault();
$('*[lang|="en"][lang|="sv"]').hide();
$('*[lang|="de"]').show();
});

$("#lang_sv").click(function (event) {
event.preventDefault();
$('*[lang|="de"][lang|="en"]').hide();
$('*[lang|="sv"]').show();
});
</script> 
```

属性选择器不能这样组合吗？

**编辑**：这对我来说现在很好

```
(function () {
$('*[lang|="de"], *[lang|="sv"]').hide();

$("#lang_de").click(function (event) {
    event.preventDefault();
    $('*[lang|="en"], *[lang|="sv"]').hide();
    $('*[lang|="de"]').show();
});

$("#lang_sv").click(function (event) {
    event.preventDefault();
    $('*[lang|="de"], *[lang|="en"]').hide();
    $('*[lang|="sv"]').show();
});
})(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T17:33:28.347

查看[jsfiddle](http://jsfiddle.net/nXEn4/2/)

在 jQuery 中有[多个选择器](http://api.jquery.com/multiple-selector/)时，您需要添加逗号。它应该看起来像

```
$('*[lang|="de"], *[lang|="sv"]').hide(); 
```

我还修复了您的点击事件。它也不起作用。它也需要通过`*[lang|="de"]`调用来选择。您可以在 jsfiddle 中看到一个工作示例。

这是[多选择器的 jQuery 文档](http://api.jquery.com/multiple-selector/)

不完全是您对语言切换器的实现。但是，如果您正在寻找为整个网站做这件事，而不是用每种语言多次写出您的网站，请查看[多语言](http://framework.zend.com/manual/en/zend.form.i18n.html)网站的这篇文章

** 更新 **

看到这个[jsfiddle](http://jsfiddle.net/nXEn4/3/)不使用`*`作为选择器的一部分

# .htaccess - 如何将所有子目录重定向到单个目录 - 超过 240,000 个目录要重新指向

> ID：11594377
> 
> 赞同：0
> 
> 时间：2012-07-21T17:31:32.717
> 
> 标签：.htaccess, redirect

所以这可能很简单，很抱歉，如果它很明显，我已经在寻找答案，但没有真正的答案出来。

我刚刚接管了一个新网站，它上面有一个用 Flash 4.1 制作的游戏，所以现在它被取消了。但是每个用户的结果都有一个 URL，因此他们可以共享它，即

/games/thegame/users/ *#useridnumber#* /

现在谷歌发现了大量的 404 错误，因为所有这些用户结果都已经消失了——我的意思是很大，就像那里有超过 240,000 个目录。

这么简单，如何将“/games/thegame/”的所有子目录重定向到“/games/newversion/”的一个文件夹

我试过这个，但没有任何结果：

```
RedirectMatch 301 /games/thegame/*(.*) /games/newversion//$1 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T17:44:39.243

尝试这个`RewriteRule ^games/thegame(/*) /games/newversion/ [L,R=301]`

# c# - 在 Asp.Net 中创建自定义 URL

> ID：11594379
> 
> 赞同：0
> 
> 时间：2012-07-21T17:31:35.087
> 
> 标签：c#, asp.net, asp.net-4.0

我正在编写一个博客软件，作为学习练习。一切都很顺利，除了我不确定如何创建用户字段、SEO 友好的 URL。

例如：

```
http://myblogsite.com/blogs/default.aspx?ID=12 
```

应该是更用户友好的东西：

```
http://myblogsite.com/blogs/how-to-create-custom-urls-in-asp-net 
```

我确实环顾四周，但找不到任何有用的东西。我想创建一个永久网址，人们可以在 otehr 网站上分享和链接。我相信在现有的博客应用程序中，它被称为“slug”。但是，我不确定它在 Asp.Net 中是如何工作的。

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T17:36:31.013

在 ASP.Net 4 中使用[URL 路由](http://msdn.microsoft.com/en-us/library/cc668201.aspx)。对于 .Net 3.5 及更低版本，解决方案有限且更复杂，尤其是 IIS 6，因为它处理无扩展请求的方式。

```
routes.MapPageRoute("",
        "blogs/{blogName}",
        "~/blogs/default.aspx"); 
```

但是您必须将 ID 更改为 name 并使其与众不同。还要小心`/`滑进去。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T17:40:46.560

查看[IIS7 URLRewrite 模块](http://www.iis.net/download/urlrewrite)。

# c# - C# 鼠标 PreMove 事件？

> ID：11594381
> 
> 赞同：0
> 
> 时间：2012-07-21T17:31:39.737
> 
> 标签：c#, winforms, winforms-interop

谁能告诉我是否存在带有 eventargs 的事件 MousePreMove 来通知我光标的移动方向？

我找到了一个 Win API 来阻止任何用户输入，但这不是我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T18:23:48.383

不，没有`MousePreMove`事件，但你可以自己写一些东西来获取光标的方向。例如：

```
public partial class Form1 : Form {

    Point cursorPosition;
    Direction cursorDirection, previousCursorPosition;

    public event EventHandler<MouseDirectionEventArgs> DirectionChanged;

    public Form1( ) {
        InitializeComponent( );
        cursorPosition = PointToClient( Cursor.Position );

        DirectionChanged += new EventHandler<MouseDirectionEventArgs>( Form1_DirectionChanged );
    }

    void Form1_DirectionChanged( object sender, MouseDirectionEventArgs e ) {
        MessageBox.Show( e.MouseDirection.ToString( ) );
    }

    protected override void OnMouseMove( MouseEventArgs e ) {

        if ( e.X > cursorPosition.X && e.Y > cursorPosition.Y )
            cursorDirection = Direction.RightDown;
        else if ( e.X > cursorPosition.X && e.Y < cursorPosition.Y )
            cursorDirection = Direction.RightUp;
        else if ( e.X < cursorPosition.X && e.Y > cursorPosition.Y )
            cursorDirection = Direction.LeftDown;
        else if ( e.X < cursorPosition.X && e.Y < cursorPosition.Y )
            cursorDirection = Direction.LeftUp;

        OnDirectionChanged(new MouseDirectionEventArgs( cursorDirection ) );

        previousCursorPosition = new Point(cursorPosition.X, cursorPosition.Y);
        cursorPosition = e.Location;

        base.OnMouseMove( e );
    }

    protected virtual void OnDirectionChanged(MouseDirectionEventArgs e){
        if ( DirectionChanged != null )
            DirectionChanged( this, e );
    }
}

enum Direction {
    LeftUp,
    LeftDown,
    RightUp,
    RightDown
}

class MouseDirectionEventArgs : EventArgs {
    public readonly Direction MouseDirection {
        get;
        set;
    }

    public MouseDirectionEventArgs( Direction direction ) {
        MouseDirection = direction;
    }
} 
```

这是一个简单的程序，显示与之前鼠标位置相比的鼠标方向。

**编辑：**

如果你想阻止鼠标向一个方向移动，你应该这样做：

```
void Form1_DirectionChanged( object sender, MouseDirectionEventArgs e ) {
     if(e.MouseDirtection == Direction.LeftUp) //example
        Cursor.Position = PointToScreen( previousCursorPosition );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T19:01:54.967

我真的不明白你为什么要阻止鼠标移动。这将产生的一个重要问题是您的用户将无法移动鼠标（显然）。因此，当您在用户使用您的程序时实现这一点时，他们将无法单击“开始”菜单。

但是，由于这是您的目标，因此将您的想法从“停止鼠标移动”更改为“如果鼠标不在我想要的位置，则将其放在我想要的位置”会更好地为您服务。

所以，按照 Fuex 的代码使用 OnMouseMove 事件，以及类似的东西（这只是伪代码）

cursorPosition = e.Location;

if(cursorPosition != alowedArea) { cursorPosition =preciousCursorPostion; }

珍贵的光标位置 = 光标位置；

e.Location = cursorPosition;

# django - Django：如何从视图中获取当前的 URLConf 规则？

> ID：11594388
> 
> 赞同：0
> 
> 时间：2012-07-21T17:32:38.130
> 
> 标签：django

在 Django 视图中，有没有办法获取触发激活视图的 URLConf 规则的名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T17:48:39.117

[解析](https://docs.djangoproject.com/en/dev/topics/http/urls/#resolve)中给出的路径`request.path`。

# php - 如何按值对 SQL 行进行排序？

> ID：11594389
> 
> 赞同：2
> 
> 时间：2012-07-21T17:32:40.873
> 
> 标签：php, mysql, sql

如何**按 B** meta_key**选择**user_ids并按**评级**meta_value 排序？

 ****```
    用户 ID | 元密钥 | 元值
-------------------------------------------------- ---
       1 一个 1
       1 乙 1
       1 C 1
       1 评分 9
       8 一个 1
       8 C 1
       8 评分 99999
       7 一个 1
       7乙1
       7 C 1
       7 评分 999

```

我需要获取具有**B** meta_key 的用户的 ID，然后按用户**评分**值对 ID 进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T17:37:46.243

试试这个：

```
SELECT T1.user_id
    FROM yourtable T1 
    JOIN yourtable T2
        ON T1.user_id = T2.user_id
        AND T2.meta_key = 'rating'
    WHERE T1.meta_key = 'B'
    ORDER BY CAST(T2.meta_value AS SIGNED) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T17:38:11.030

为此，您需要一个自我加入：

```
select t.*
from t left outer join
     (select t.user_id, max(meta_value) as rating
      from t
      where t.meta_key = 'rating'
      group by t.user_id
     ) r
     on t.user_id = r.user_id
where meta_key = 'B'
order by r.rating 
```****

# objective-c - 为什么@implementation 上面有@interface？

> ID：11594391
> 
> 赞同：38
> 
> 时间：2012-07-21T17:32:53.743
> 
> 标签：objective-c, ios, xcode, ios5, xcode4.4

我想知道为什么有两次`@interface`。一进一`class.h`进`class.m`。例如：

`TestTableViewController.h`：

```
#import <UIKit/UIKit.h>

@interface TestTableViewController : UITableViewController

@end 
```

并且（自动生成）`class.m`我发现：

```
#import "TestTableViewController.h"

@interface TestTableViewController ()

@end

@implementation TestTableViewController

... methods delegated from UITable delegates

@end 
```

所以我的问题是，文件中的内容是关于什么`@interface TestTableViewController ()`的`.m`。为什么它在那里？我需要吗？

提前致谢

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-07-21T17:45:33.187

第二个`@interface`指令在实现文件 (.m) 中——你可以从中推断出它是用来声明类的创建者不想暴露给类的用户的东西。这通常意味着私有和/或内部方法和属性。另请注意，这样做有两种类型。一个（您在此处看到）称为“类扩展”，它由一对空括号表示：

```
@interface MyClass () 
```

这一点特别重要，因为您可以使用它向您的类添加额外的实例变量。

第二个，称为“类别”，由一对非空括号表示，包含类别的名称，如下所示：

```
@interface MyClass (CategoryName) 
```

它也用于扩展类。您不能使用类别将实例变量添加到一个类中，但您可以为同一个类有多个类别，这就是它主要用于扩展您没有源代码的系统/框架类的原因——所以从这个意义上说，类别与类扩展完全相反。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T17:39:57.923

第二个“接口”定义了“TestTableViewController”类的扩展，对于只导入 h 文件的人是不可见的。这是在目标 C 中创建私有方法的事实上的方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-21T17:35:11.400

在那里你可以声明你只想在你的类中使用的私有方法和属性，而不是暴露给其他类。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-21T17:41:43.967

文件中的接口`TestTableViewController.h`是类扩展的声明。有 2 个圆括号显示了这一点。语法与为类编写类别相同。但在这种情况下，它用于声明作者不想在头文件中公开的某种私有方法

一个普通的分类界面是这样的：

```
@interface TestTableViewController (Your_Category_Name)
- (void)doSomething;
@end 
```

以及相应的实现：

```
@implementation TestTableViewController (Your_Category_Name)
-(void)doSomething {
// Does something...
}
@end 
```

在您的示例中，没有指定类别名称，因此它只是扩展了类，您可以在正常实现中实现该方法。

通常这种技术用于“隐藏”方法。它们没有在头文件中声明，如果您只导入 .h 文件，它们是不可见的。

# twitter - 如何找出链接首次发布的时间

> ID：11594396
> 
> 赞同：1
> 
> 时间：2012-07-21T17:33:38.740
> 
> 标签：twitter

[http://isitold.com/](http://isitold.com/)以某种方式确定了第一次发布链接/网址的时间。我似乎无法弄清楚如何使用 twitter api 做到这一点，有人知道吗？

我想在我的应用程序的时间衰减功能中首次发布链接时使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T20:59:16.833

[您可以使用Twitter 搜索 API](https://dev.twitter.com/docs/api/1/get/search)通过此链接搜索推文，以检索最旧的推文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T18:26:28.067

好像 twitter 不提供历史推文（搜索 api 不起作用）。

您可以使用 Topsy [http://www.topsy.com](http://www.topsy.com) http://code.google.com/p/otterapi/（topsy 上的 api）之类的服务访问历史推文信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-22T14:26:29.513

我使用 YQL 和 JS 编写了[Who Tweeted It First](http://ctrlq.org/first/)来查找任何主题的最旧推文。它本质上是从 Twitter 搜索页面中抓取数据，因为官方 API 不会返回以前的推文。

# java - Java，使用接口作为回调

> ID：11594397
> 
> 赞同：0
> 
> 时间：2012-07-21T17:33:39.347
> 
> 标签：java, android, interface, callback, touch

我一直在为 Android 开发一个简单的触摸处理程序，它可以触发诸如 onUpdate（触摸屏幕时）之类的回调，而无需设置线程。我的问题是我对 Java 的了解相当有限，我做不到，因为我对如何使用接口知之甚少。我很确定我的问题可能是一个简单的错字之类的，但是当我从触摸处理程序（处理触摸信息）执行方法时，我得到了 NullPointerException，这样我就可以在主活动类中做我需要的事情.

这是主要的类代码（从不相关的东西中删除）：

```
//package and imports

public class Test extends Activity implements TouchHelper {

    StringBuilder builder = new StringBuilder();
    TextView textView;
    TouchReader touchReader;
    List<TouchTable> touchTablesArray;
    TouchTable touchTable;
    public static final String Tag = "TouchTest";

        @Override
        public void onCreate(Bundle savedInstanceState) 
        {
            super.onCreate(savedInstanceState);
            textView = new TextView(this);
            Log.d(Tag, "TextView initialized " + textView);
            textView.setText("Touch and drag (multiple fingers supported)!");
            touchReader = new TouchReader(textView);
            Log.d(Tag, "touchReader initialized");
            touchTablesArray = touchReader.getTouchTables();
            setContentView(textView);
        }

        @Override
        public void onTouchUpdate(int pointerId)
        {
            Log.d(Tag, "onTouchUpdate called");
            touchTable = touchTablesArray.get(pointerId);
            Log.d(Tag, "touchTable get successful");
            //writing on stringbuilder
        }
    } 
```

这是处理程序本身的代码：

```
//package and imports

public class TouchReader implements OnTouchListener
{
    public final static String Tag = "TouchReader";
    List<TouchTable> touchTables;
    TouchHelper helper;
    TouchTable touchTable = new TouchTable();

    public TouchReader(View view)
    {
        view.setOnTouchListener(this);
        touchTables = new ArrayList<TouchTable>(10);
        Log.d(Tag, "TouchReader initialized");
    }

    public boolean onTouch(View v, MotionEvent event)
    {
        synchronized(this)
        {
            //all the common code handling the actual handling, with switches and such
            touchTables.add(pointerId, touchTable); //obviously the pointerId is defined earlier
            Log.d(Tag, "Values updated");
            helper.onTouchUpdate(pointerId); //the exception is here
            Log.d(Tag, "Update called");
        }
        return true;
    }
    public List<TouchTable> getTouchTables()
    {
        synchronized(this)
        {
            return touchTables;
        }
    }
} 
```

如您所见，该错误很可能是由于我无法正确使用界面，但所有官方文档都让我更加困惑。

最后是界面的小代码：

```
//package

public interface TouchHelper 
{
    public void onTouchUpdate(int pointerId);
} 
```

我希望这个问题不会太无聊，不能在这里发布:)

编辑：感谢大家的帮助，最后我遵循了 Bughi 的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T17:46:14.870

你`TouchHelper helper;`是空的，它需要一个接口实例才能调用它的方法 - 在你的情况下，实现你的接口的主要活动类 -

为监听器做一个 set 方法

```
public void setOnTouchListener(TouchHelper helper)
{
    this.helper = helper;
} 
```

然后从创建时调用它：

```
public class Test extends Activity implements TouchHelper {
    ...
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        ...
        touchReader = new TouchReader(textView);
        touchReader.setOnTouchListener(this);
        ...
    }
} 
```

还要为您的 on touch 方法添加一个空检查：

```
public boolean onTouch(View v, MotionEvent event)
{
    synchronized(this)
    {
        //all the common code handling the actual handling, with switches and such
        touchTables.add(pointerId, touchTable); //obviously the pointerId is defined earlier
        Log.d(Tag, "Values updated");
        if (helper != null)
            helper.onTouchUpdate(pointerId); //the exception is here
        Log.d(Tag, "Update called");
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T17:35:39.113

如果 NullPointerException 在这里：

```
helper.onTouchUpdate(pointerId); 
```

那么简单`helper`就是null，在哪里初始化呢？

我看到你定义它：

```
TouchHelper helper; 
```

但你有过吗？

```
helper = ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-17T09:51:44.927

我知道这是旧的，但我自己被困在这个问题上。上面山姆的帖子帮助我想到了这一点。
我最后添加了一个 onAttach 方法，该方法检查接口是否已初始化以及是否已实现到与其接口的主要活动。我在主要活动中添加了一个 Log.i 进行测试。

```
@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);
    try {
        mainActivityCallback = (OnSomethingSelectedListener) activity;
    } catch (ClassCastException e) {
        throw new ClassCastException(activity.toString()
                + " must implement OnSomethingSelectedListener");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T17:37:40.750

在`TouchReader`您定义一个`TouchHelper`但没有在代码中创建对象或将现有对象分配给该属性的代码中。所以当你尝试使用它时它仍然是空的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-21T17:39:16.857

`helper`在您的输入中为空`TouchReader`

要解决此问题，`TouchReader`请执行以下操作`TouchHelper`：

```
public TouchReader(View view, TouchHelper helper) {
    ...
    this.helper = helper;   
    ...
} 
```

然后在您的活动中：

```
touchReader = new TouchReader(textView, this); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-21T17:39:42.260

尝试在你的构造函数中初始化它；所有未初始化的引用都设置为 null。

```
// I see no reason why this should be a member variable; make it local
StringBuilder builder = new StringBuilder();
TextView textView;
TouchReader touchReader;
List<TouchTable> touchTablesArray;
TouchTable touchTable;
public TouchReader(View view)
{
    // textView is null
    // touchReader is null
    view.setOnTouchListener(this);
    // why "10"?  why a List of touchTables and a touchTable member variable?  why both?
    touchTables = new ArrayList<TouchTable>(10);
    Log.d(Tag, "TouchReader initialized");
    // touchTable is null;
} 
```

# javascript - 根据单词查找href

> ID：11594399
> 
> 赞同：0
> 
> 时间：2012-07-21T17:33:47.723
> 
> 标签：javascript

我有一组我想在页面上找到的链接，但只有当 href 包含单词“PlaySounds”时，我尝试了以下代码，但我没有定义。

```
 http://www.website.com/uno/PlaySounds.aspx?Id=546444456
    http://www.website.com/uno/PlaySounds.aspx?Id=347457458
    http://www.website.com/uno/PlaySounds.aspx?Id=275656573
    http://www.website.com/uno/PlaySounds.aspx?Id=976645654

    hrefs = Array.prototype.filter.call(document.getElementsByTagName("a"), function(node) { 
            return node.href.indexOf("PlaySounds") === 0;
        }).map(function(node) {
            return node.href;
        });

randomHref = hrefs[Math.floor(Math.random() * hrefs.length)];

    console.log(randomHref ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T17:43:18.857

Array.indexOf 返回您正在搜索的子字符串的起始位置，如果未找到，则返回 -1。

尝试改变

```
node.href.indexOf("PlaySounds") === 0; 
```

和

```
node.href.indexOf("PlaySounds") >= 0; 
```

编辑：使用此功能对其进行测试

```
function randomHref() {
    hrefs = Array.prototype.filter.call(document.getElementsByTagName("a"), function(node) { 
        return node.href.indexOf("PlaySounds") >= 0;
    }).map(function(node) {
        return node.href;
    });
    return hrefs[Math.floor(Math.random() * hrefs.length)];
} 
```

在这些链接上：

```
<a href="http://www.website.com/uno/PlaySounds.aspx?Id=2">asd</a>
<a href="http://www.website.com/uno/PlaySounds.aspx?Id=4">asd</a>
<a href="http://www.website.com/uno/PlaySounds.aspx?Id=1">asd</a>
<a href="http://www.website.com/uno/PlaySounds.aspx?Id=3">asd</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T17:49:35.917

为什么 === 0

```
hrefs = Array.prototype.filter.call(document.getElementsByTagName("a"), function(node) { 
        return node.href.indexOf("PlaySounds") !== -1;
    }).map(function(node) {
        return node.href;
    });

randomHref = hrefs[Math.floor(Math.random() * hrefs.length)];

console.log(randomHref ); 
```

# wcf - 我有一个 WCF 应用程序在除家庭版之外的所有 Windows 7 版本中都能正常工作。调用 WCF 是否与它有关？

> ID：11594404
> 
> 赞同：0
> 
> 时间：2012-07-21T17:34:35.640
> 
> 标签：wcf, windows-7

我有一个 WCF 在除家庭版之外的所有 Windows 7 版本中都可以正常工作。调用 WCF 是否与 Windows 7 家庭版有关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T18:00:52.453

来自[不支持的 WCF 场景](http://msdn.microsoft.com/en-us/library/aa738624.aspx)

> 由于各种原因，Windows Communication Foundation (WCF) 不支持某些特定的安全方案。例如，Windows XP Home Edition 不实现 SSPI 或 Kerberos 身份验证协议，因此 WCF 不支持在该平台上运行具有 Windows 身份验证的服务

# java - 为什么 StockWatcher.java 在 onModuleLoad 中使用类变量而不是局部变量？

> ID：11594408
> 
> 赞同：0
> 
> 时间：2012-07-21T17:35:03.200
> 
> 标签：java, spring, gwt

是的。那。我一步一步地完成教程，所以如果稍后出现答案，请原谅我。[这是本节](https://developers.google.com/web-toolkit/doc/latest/tutorial/buildui#implement)中的第 1 步。

我理解使用它来访问 EntryPoint 类中的其他方法很容易，但是来自 Spring MVC 世界，这种东西可能被认为是一个控制器并且是一个单例（bean）。在 GWT 世界里这样想有错吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T17:49:50.333

使用 GWT，您可以将其编码为桌面 AWT 程序。所以，你没有 CDI 或类似的东西。

因此，如果您将所有信息放在一个 bean 中，您仍然必须：

*   在类中保留一个 bean 属性
*   在方法调用中将其作为参数传递

获取对它的引用（而不是在需要时从 CDI 检索它）

虽然您仍然可以在需要时使用 bean，但这些属性与主类密切相关（实际上它们是要显示的其他图形组件）。一般来说，只有当你有一堆属性在它们之间紧密耦合但不与任何其他类紧密耦合时，我才会使用 bean。

# c# - ASP.NET 覆盖 web 方法

> ID：11594412
> 
> 赞同：2
> 
> 时间：2012-07-21T17:35:20.570
> 
> 标签：c#, asp.net, webmethod

我在 C# ASP.NET Web 应用程序中有几个 WebMethods。我想改变他们所有人的行为来验证每个请求。想象一下下面的代码：

```
[WebMethod]
public static void DoSomething() 
{
    if (ValidateRequest())
    {
        HttpContext.Current.Response.StatusCode = 400;
        // do some other stuff
        return;
    }
    // rest of method
} 
```

我当然注意到 ValidateRequest() 方法调用在我的大部分 WebMethods 中很常见。无论如何我可以将它连接起来，以便所有 WebMethods 自动具有相同的行为吗？我可以在方法中添加第二个属性来完成这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T20:05:41.850

在 Global.asax 文件的 Begin Request 中添加验证请求。

现在，您需要某种代码来检查是否应该验证请求。

我不确定如何在网络表单中执行此操作......但是，我要做的是：

使用 RequestPath 属性（如果它们与您的服务 URL 匹配，则获取方法和类名）

```
HttpContext.Current.Request.Path; 
```

然后我会创建一个方法属性，也许会使用反射来查看是否应该验证请求。（见下面的链接）

[http://msdn.microsoft.com/en-us/library/z919e8tw.aspx](http://msdn.microsoft.com/en-us/library/z919e8tw.aspx)

这样，从现在开始，您只需要使用“[Validate]”属性标记您的方法，这一切都应该正常工作。

```
 public class Global : HttpApplication
    {
        protected void Application_BeginRequest(object sender, EventArgs e)
        {
          if(ShouldValidate() && !IsValidRequest()){
              //add your custom error status here perhaps
              Response.StatusCode = 400
              Response.StatusDescription = "Something Bad happened"
              HttpContext.Current.Response.End()
          }
        } 
```

# objective-c - 从 JSON 加载属性，获取“发送到已释放实例的消息”

> ID：11594413
> 
> 赞同：1
> 
> 时间：2012-07-21T17:35:29.560
> 
> 标签：objective-c, ios, automatic-ref-counting

因此，我从 Web 服务加载了我的自定义对象，并尝试将属性存储为 NSStrings，但一直遇到此错误：

```
-[CFString _cfTypeID]: message sent to deallocated instance 0x100d3d40
-[CFString retain]: message sent to deallocated instance 0x100d3d40 
```

我启用了僵尸，但这并没有真正向我展示解决方案。

我的属性定义为：

```
@property (strong, nonatomic) NSString *title;
@property (assign, nonatomic) NSString *ID;
@property (strong, nonatomic) NSString *redLabel;
@property (strong, nonatomic) NSString *greenLabel; 
```

然后我创建我的对象的一个​​实例并调用 web 服务

```
QuickList *list = [[QuickList alloc] init];
[list loadLatestQuickList]; 
```

最后，在里面`loadLatestQuickList`...

```
NSURLRequest *request = // create a GET request...
[NSURLConnection sendAsynchronousRequest:request queue:notMainQueue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error){
    NSError *parsingError;
    NSDictionary *json = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&parsingError];
    if (!parsingError && [json isKindOfClass:[NSDictionary class]]) {
        NSDictionary *dataDictionary = [json objectForKey:@"data"];
        NSDictionary *quickListDictionary = [dataDictionary objectForKey:@"QuickList"];

        NSString *ID = [quickListDictionary objectForKey:@"id"];
        NSString *title = [quickListDictionary objectForKey:@"name"];
        NSString *redLabel = [quickListDictionary objectForKey:@"red_label"];
        NSString *greenLabel = [quickListDictionary objectForKey:@"green_label"];

        self.ID = ID;
        self.title = title;
        self.redLabel = redLabel;
        self.greenLabel = greenLabel;

        // tell a channel that everything is loaded
    }
    else {
        NSLog(@"%@",parsingError);
    }
}]; 
```

现在，每当我尝试访问`list.ID`或其他一些属性时，我都会收到“deallocated instance”错误。关于我为什么会收到此错误的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T17:36:49.127

你的`ID`财产也应该如此`strong`。

# javascript - 包定位在 Dojo 中是如何工作的？

> ID：11594418
> 
> 赞同：1
> 
> 时间：2012-07-21T17:36:06.927
> 
> 标签：javascript, dojo

我正在研究[http://dojotoolkit.org/documentation/tutorials/1.7/hello_dojo/demo/module.html](http://dojotoolkit.org/documentation/tutorials/1.7/hello_dojo/demo/module.html)上的示例，并创建了一个目录结构，如下所示

```
w:/djt2/index.html
w:/djt2/js/mymodule.js  (exact copy of http://dojotoolkit.org/documentation/tutorials/1.7/hello_dojo/demo/myModule.js) 
```

然后我将 Tinyweb 网络服务器设置为从 w:/djt2 为 localhost 提供服务

我做`index.html`了一点改动，以调整放入`mymodule.js`子目录`js`（我在下面也删除了评论）：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Tutorial: Hello Dojo!</title>

    <script>
        var dojoConfig = {
            async: true,
            packages: [{
                name: "djt2",
                location: '/js'     /* Location #1 */
            }]
        };
    </script>
    <script src="//ajax.googleapis.com/ajax/libs/dojo/1.7.2/dojo/dojo.js"></script>
</head>
<body>
<h1 id="greeting">Hello</h1>
<script>
    require(["djt2/mymodule"], function(myModule){   /* Location #2 */
        myModule.setText("greeting", "Hello Dojo!");
        setTimeout(function(){
            myModule.restoreText("greeting");
        }, 3000);
    });
</script>
</body>
</html> 
```

这行得通，但我不完全确定我理解为什么......特别是在位置 #1，原来的有`location.pathname.replace(/\/[^/]+$/, '')`它评估为空字符串并使加载程序在 CDN 位置查找 mymodule.js（我也试过将位置设置为`"/"`，但这使它在`http://mymodule.js/`) 处搜索。

在位置 #2，前缀应该是`djt2/`……有点神秘。

如果有人可以解释它，或者将我引导到文档（我对学习新框架有点不知所措:-)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T11:39:40.387

在你的结构中添加一个额外的`djt2`目录

```
w:/djt2/js/djt2/mymodule.js 
```

在配置中设置 baseUrl。

```
var dojoConfig = {
    async: true,
    baseUrl: '/js'
    packages: [{
         name: "djt2",
         location: 'djt2'
    }]
}; 
```

设置 baseUrl 将告诉 dojo 在哪里寻找自定义模块。作为包一部分的位置是相对于 baseUrl 的。

* * *

我一直认为模块/包是命名空间。要使用附加包扩展您的示例，它将如下所示：

```
w:/djt2/js/another/anotherModule.js

var dojoConfig = {
    async: true,
    baseUrl: '/js'
    packages: [{
         name: "djt2",
         location: 'djt2'
    }, {
         name: "another",
         location: 'another'
    }]
}; 
```

# java - 您如何设置捆绑包并取回数据

> ID：11594420
> 
> 赞同：0
> 
> 时间：2012-07-21T17:36:11.530
> 
> 标签：java, android, sdk

我想知道如何将变量保存在包中，然后使用该`onResume()`方法取回数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T17:40:24.033

您需要覆盖 onSaveInstanceState：

```
@Override
public void onSaveInstanceState(Bundle savedInstanceState) {
    super.onSaveInstanceState(savedInstanceState);
    savedInstanceState.putString("key", "Hello World");
} 
```

要恢复数据，请覆盖 onRestoreInstanceState（您的 onCreate 也会收到此 Bundle）：

```
@Override
public void onRestoreInstanceState(Bundle savedInstanceState) {
    super.onRestoreInstanceState(savedInstanceState);
    String myString = savedInstanceState.getString("key");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T17:42:23.973

查看[onSaveInstanceState()](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29)和[onRestoreInstanceState()](http://developer.android.com/reference/android/app/Activity.html#onRestoreInstanceState%28android.os.Bundle%29)的文档。这些是您的活动类的生命周期方法。

# iphone - MKStoreKit 中的编译错误

> ID：11594421
> 
> 赞同：3
> 
> 时间：2012-07-21T17:36:27.477
> 
> 标签：iphone, objective-c, ios, xcode, mkstorekit

我收到一个错误：

> 不兼容的块指针类型将“void (^ )(NSString *_strong *)”发送到“void (^)(NSString ** _strong, NSData *__strong)”类型的参数

当我`MKStoreKit 4.3`在我的应用程序中实现 onComplete 行时：

```
-(IBAction)purchaseFull {
    [[MKStoreManager sharedManager] buyFeature:@"productID"
                                onComplete:^(NSString* purchasedFeature)
    {
         NSLog(@"Purchased: %@", purchasedFeature);
         //purchaseBtn.hidden = YES;
    }
    onCancelled:^
    {
        NSLog(@"User Cancelled Transaction");
    }];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T23:57:42.797

[您尝试使用](https://github.com/MugunthKumar/MKStoreKit/blob/master/MKStoreManager.h)的API具有如下方法：

```
// use this method to invoke a purchase
- (void) buyFeature: (NSString*) featureId         
         onComplete: (void (^)(NSString* purchasedFeature, 
                               NSData* purchasedReceipt)) completionBlock
        onCancelled: (void (^)(void)) cancelBlock; 
```

但是，对于`completionBlock`参数，您正在传递

```
^(NSString* purchasedFeature) {
      NSLog(@"Purchased: %@", purchasedFeature);             
      //purchaseBtn.hidden = YES;        
} 
```

这意味着您缺少第二个 ( `NSData*`) 参数。

将您的代码更改为以下内容：

```
^(NSString* purchasedFeature, NSData* purchasedReceipt) {
      NSLog(@"Purchased: %@", purchasedFeature);             
      //purchaseBtn.hidden = YES;        
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T09:17:22.483

新[API](https://github.com/MugunthKumar/MKStoreKit/blob/master/MKStoreManager.h)的答案：

```
 [[MKStoreManager sharedManager]
 buyFeature:kFeatureAId
 onComplete:^(NSString* purchasedFeature, NSData*purchasedReceipt, NSArray* availableDownloads)
 {
       NSLog(@"Purchased: %@", purchasedFeature);
 }
 onCancelled:^
 {
     NSLog(@"User Cancelled Transaction");
 }
 ]; 
```

# powershell - 可以通过 .Key 而不是 ["Key"] 以某种方式访问 Powershell 哈希表吗？

> ID：11594423
> 
> 赞同：1
> 
> 时间：2012-07-21T17:36:34.957
> 
> 标签：powershell, syntax, hashtable

我是一个懒惰的程序员，所有这些 hash["Key"] 标点符号都让我很紧张。是否有语法糖（可能是不同的对象类型）允许您创建使用成员方法语法（hash.Key）访问的哈希表？在 Ruby 中有很多简单的技巧可以做到这一点。在 Powershell 中是否有这样做的技巧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T17:39:33.337

是的：

```
$hash = @{"a" = 1; "b" = 2 }
$val = $hash.a 
```

注意：它也适用于任何 IDictionary，而不仅仅是 Hashtable。

# c# - 与 Windows 应用程序的客户端通信

> ID：11594424
> 
> 赞同：2
> 
> 时间：2012-07-21T17:36:37.163
> 
> 标签：c#, asp.net, browser, polling

我有一个用于交付订单的基于 Web 的拣货/包装解决方案 (asp.net/c#)。订单在浏览器中被标记为已打包，然后标签信息立即添加到我们的数据库中，为下一部分做好准备……

标签打印是通过 Windows 应用程序（用 C# 编写）完成的，这样做是因为我找不到让浏览器自动打印标签的方法（即用户无需单击打印/确定等）。 )

**问题：**

Windows 应用程序每 10 秒轮询一次（可能会发生变化），以查看该拾取器/打包器是否有任何新标签。现在，如果我可以让浏览器与标签应用程序通信，那么轮询将是不必要的，因为拾取器/包装器只需单击“准备发货”并且将创建标签数据。

轮询过程提取的数据并不庞大，但我担心随着我们添加更多的picker/packer站，轮询过程可能会对Web服务器/数据库产生连锁反应（因为所有站都是轮询）。此外，拣货员/包装员不想等待标签，因此无法延长轮询时间（如果有什么我想尽快）

**解决方案？**

所以，理想情况下，我想要一种在浏览器和应用程序之间进行通信的方式（如果可能的话）。或任何无需轮询的方法。也许类似于 Comet，它允许服务器在添加新标签时向应用程序发送消息。

理想情况下，不需要特定浏览器的解决方案。但这可能要求太多了。

一个长期的解决方案是将基于网络的拣货-包装解决方案转移到标签应用程序中，但这将是**很多**工作！

我希望这很清楚，不要太罗嗦。让我知道我是否可以在此处添加任何其他详细信息。提前致谢。

**编辑**

我正在研究 websockets 作为一个想法。任何建议都将受到欢迎！

**更新**

感谢所有评论。我现在对如何解决这个问题有了一些想法：

1.  网络套接字。可能与防火墙问题有关，因为我无法轻松访问系统（地理距离）
2.  从应用程序中读取浏览器 cookie。可能的解决方案[http://www.codeproject.com/Articles/330142/Cookie-Quest-A-Quest-to-Read-Cookies-from-Four-Pop](http://www.codeproject.com/Articles/330142/Cookie-Quest-A-Quest-to-Read-Cookies-from-Four-Pop)。这涵盖了仓库中正在使用的所有浏览器。我可以轮询本地 cookie 值并查看是否已创建任何新标签，然后下载它们。因此在数据库服务器上没有轮询。
3.  ActiveX 控件。仅限于 IE，在每台 PC 上安装它可能会出现一些安全/设置问题。
4.  保持代码不变。衡量数据库服务器上的负载是否过多或正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T02:57:51.017

实现 Web 应用程序和桌面应用程序之间通信的适当方法是通过两个应用程序与之通信的服务器。

您可以获得任何网络服务器（例如`node.js` `nodejs.org`，这将让您使用与服务器上的网络应用程序相同的 javascript）并与之交互。您如何从桌面应用程序与服务器对话取决于其技术。然而，所有语言都有某种方式来进行 http 通信，例如`SOAP`.

或者您可以尝试制作：
两个应用程序都使用`socket.io`. 您可以从以下[项目](http://automata.cc/osc-web)中借用代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T17:52:22.100

您可以在 C# 应用程序中创建本地 WebSocket 服务器，然后让浏览器连接到它并发送您需要打印的数据。

不过，我不确定这是否是您所需要的。正如我所看到的，您需要将图形数据传递给您的应用程序，仅使用 javascript 可能会非常棘手。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T18:49:49.253

我不确定，但您的应用程序似乎正在轮询文件系统以打印这些新标签？您是否考虑过在您的应用程序中使用[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)？您可以将其设置为观看目录并收到任何新内容的通知。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T18:06:14.577

创建一个 MSMQ（或您选择的队列实现）并在轮询 MSMQ 的 Windows 应用程序中托管 WCF 服务。

让您的 ASP.NET 应用程序将任何相关信息写入此队列，以便提取此信息的 Windows 应用程序中的 WCF 服务将知道如何使用它并打印您的标签。

我提到队列的原因是为了可靠性，如果您的 Windows 应用程序因任何原因出现故障，队列至少会被保留并等待您恢复 Windows 应用程序。

尽管涉及一些轮询，但它非常快速且几乎可以忽略不计。使用 NetMsmqBinding 实现它是自动的，这一切都得到了照顾。您需要做的就是配置它。

如果你去一个非MSMQ队列，那么我不知道你是否仍然可以使用NetMsmqBinding，你可能需要创建你自己的。

# xcode - UIScrollView 内存分配与释放

> ID：11594432
> 
> 赞同：2
> 
> 时间：2012-07-21T17:37:53.660
> 
> 标签：xcode, memory-management, uiscrollview

我正在开发一个非常简单直接的应用程序，它使用几个带有滚动视图的页面。我在 ViewDidLoad 中有一个图像数组，然后是一个可变数组，显示当前页面加减 1。有一个清除页面方法应该从超级视图中删除额外的图像。在具有大量图像的实际设备上运行此程序时，滚动浏览 50 左右图像后会出现内存警告，然后应用程序崩溃。我通过仪器运行了这个，发现每次滑动都会显着增加内存。在创建数组时，我使用了 imageNamed 和 imageWithContentsOfFile ，无论哪种方式都接近相同的结果。我意识到这里有多个滚动视图问题，但不知何故我似乎无法解决这个问题。至少可以说令人沮丧。我希望有人能以全新的眼光看待这个问题，并对我的问题有所了解。首先十分感谢。

编辑：忘了提及 ARC 的使用。是的，我使用 ARC。

代码：.h 文件

```
#import <UIKit/UIKit.h>

@interface FirstViewController : UIViewController <UIScrollViewDelegate>

@property (nonatomic, strong) IBOutlet UIScrollView *scrollView;
@property (nonatomic, strong) IBOutlet UIPageControl *pageControl;

@end 
```

和 .m 文件

```
#import "FirstViewController.h"

@interface FirstViewController ()

@property (nonatomic, strong) NSArray *pageImages;
@property (nonatomic, strong) NSMutableArray *pageViews;

- (void)loadVisiblePages;
- (void)loadPage:(NSInteger)page;
- (void)purgePage:(NSInteger)page;
@end

@implementation FirstViewController

@synthesize scrollView = _scrollView;
@synthesize pageControl = _pageControl;

@synthesize pageImages = _pageImages;
@synthesize pageViews = _pageViews;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

- (void)loadVisiblePages {
    // First, determine which page is currently visible
    CGFloat pageWidth = self.scrollView.frame.size.width;
    NSInteger page = (NSInteger)floor((self.scrollView.contentOffset.x * 2.0f + pageWidth)     / (pageWidth * 2.0f));

// Update the page control
self.pageControl.currentPage = page;

// Work out which pages you want to load
NSInteger firstPage = page - 1;
NSInteger lastPage = page + 1;

// Purge anything before the first page
for (NSInteger i=0; i<firstPage; i++) {
    [self purgePage:i];
}

// Load pages in our range
for (NSInteger i=firstPage; i<=lastPage; i++) {
    [self loadPage:i];
}

// Purge anything after the last page
for (NSInteger i=lastPage+1; i<self.pageImages.count; i++) {
    [self purgePage:i];
}

}

- (void)purgePage:(NSInteger)page {
    if (page < 0 || page >= self.pageImages.count) {
    // If it's outside the range of what you have to display, then do nothing
    return;
    }

    // Remove a page from the scroll view and reset the container array
    UIView *pageView = [self.pageViews objectAtIndex:page];
    if ((NSNull*)pageView != [NSNull null]) {
        [pageView removeFromSuperview];
        [self.pageViews replaceObjectAtIndex:page withObject:[NSNull null]];

    }

}

- (void)loadPage:(NSInteger)page {
    if (page < 0 || page >= self.pageImages.count) {
        // If it's outside the range of what you have to display, then do nothing
        return;
    }

    // 1
    UIView *pageView = [self.pageViews objectAtIndex:page];
    if ((NSNull*)pageView == [NSNull null]) {
        // 2
        CGRect frame = self.scrollView.bounds;
        frame.origin.x = frame.size.width * page;
        frame.origin.y = 0.0f;

        // 3
        UIImageView *newPageView = [[UIImageView alloc] initWithImage:[self.pageImages objectAtIndex:page]];
        newPageView.contentMode = UIViewContentModeScaleAspectFit;
        newPageView.frame = frame;
        [self.scrollView addSubview:newPageView];
        // 4
       [self.pageViews replaceObjectAtIndex:page withObject:newPageView];

    }
}

- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    // Load the pages that are now on screen
    [self loadVisiblePages];
}

- (void)viewDidLoad {
    [super viewDidLoad];

    // 1
    self.pageImages = [NSArray arrayWithObjects:
                       [UIImage imageNamed:@"BBD1.jpg"],
                       [UIImage imageNamed:@"BBD2.jpg"],
                       [UIImage imageNamed:@"BBD3.jpg"],
                       [UIImage imageNamed:@"BBD4.jpg"],
                       [UIImage imageNamed:@"BBD5.jpg"],
                       [UIImage imageNamed:@"BBD6.jpg"],
                       [UIImage imageNamed:@"BBD7.jpg"],
                  .....
                       [UIImage imageNamed:@"BBD292.jpg"],
                       [UIImage imageNamed:@"BBD293.jpg"],
                       [UIImage imageNamed:@"BBD294.jpg"],
                       [UIImage imageNamed:@"BBD295.jpg"],
                       [UIImage imageNamed:@"BBD296.jpg"],
                       [UIImage imageNamed:@"BBD297.jpg"],
                       [UIImage imageNamed:@"BBD298.jpg"],
                       [UIImage imageNamed:@"BBD299.jpg"],
                       [UIImage imageNamed:@"BBD300.jpg"],                       

                       nil];

    NSInteger pageCount = self.pageImages.count;

    // 2
    self.pageControl.currentPage = 0;
    self.pageControl.numberOfPages = pageCount;

    // 3
    self.pageViews = [[NSMutableArray alloc] init];
    for (NSInteger i = 0; i < pageCount; ++i) {
        [self.pageViews addObject:[NSNull null]];
    } 
}

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    // 4
    CGSize pagesScrollViewSize = self.scrollView.frame.size;
    self.scrollView.contentSize = CGSizeMake(pagesScrollViewSize.width *     self.pageImages.count, pagesScrollViewSize.height);

    // 5
    [self loadVisiblePages];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:    (UIInterfaceOrientation)interfaceOrientation
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    } else {
        return YES;
    }
}

@end 
```

我真的很感谢你花时间来看看这个，并希望有人可以为我指明正确的方向。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T21:00:45.147

将实际图像加载到数组中会比仅将名称存储在数组中并像加载图像那样加载更大的开销

```
UIImage *image = [[UIImage alloc] initWithContentsOfFile:[self.pageImages objectAtIndex:page]];
UIImageView *newPageView = [[UIImageView alloc] initWithImage:image];
[image release]; 
```

此时，只有 newPageView 会持有对内存中图像的引用，当 newPageView 从其父视图中删除时，内存中的图像将被释放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T18:04:27.433

你没有说你是否使用了 ARC，但是没有 ARC，内存管理就会出现明显的问题。在`loadPage:`注释“// 3”中，您创建`newPageView`的保留计数为 1，然后将其作为 和 的子视图添加`self.scrollView`到数组`self.pageViews`中。因此，它的总体保留计数为 +3。在`purgePage:`您从中删除它`self.scrollView`，`self.pageViews`但仍然保留 +1 的总体保留计数。因此，`UIImageView`for each page 被遗忘但没有被释放。

您可以通过在项目中使用 ARC 或修改您创建的行来解决此问题`newPageView`：

```
UIImageView *newPageView = [[[UIImageView alloc] initWithImage:[self.pageImages objectAtIndex:page]] autorelease]; 
```

# android - 关于 Android SDK r20

> ID：11594433
> 
> 赞同：1
> 
> 时间：2012-07-21T17:38:06.380
> 
> 标签：android, sdk

基本上是 Android 编程的初学者，并试图在网上提供的教程的帮助下探索它。我的问题是对于像我这样的初学者，如果我开始使用 SDK r20 是否足够好，因为我发现的所有教程都有以前版本的 SDK，而且我们有必要继续开发基于最新 SDK 的应用程序，可从安卓？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T18:01:35.580

在这里您可以查看新 ADT(v 20) 的变更日志。： [http](http://tools.android.com/download/adt-20-preview) ://tools.android.com/download/adt-20-preview 正如您所看到的，只有改进，并使用它来学习旧教程不应该不同。所以是的，你可以使用它:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T18:03:57.137

雅只是保持更新就是全部！对新程序员没有太大影响

# ios - 返回按钮上的调用方法

> ID：11594434
> 
> 赞同：0
> 
> 时间：2012-07-21T17:38:06.767
> 
> 标签：ios, cocoa-touch

我有一个导航控制器，它在第一个视图上有一个隐藏的导航栏，然后出现在所有子视图中。问题是，如果您返回第一个视图，我似乎无法再次隐藏它。

我在第一个视图的初始化中创建了一个后退按钮（所以我可以重命名它）：

```
self.navigationItem.backBarButtonItem = [[UIBarButtonItem alloc] 
  initWithTitle:@"Logout" style:nil target:self 
  action:@selector(hideNavigationBar:)]; 
```

但是该方法永远不会被调用。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T17:45:37.873

在你的第一个控制器中`-(void)viewWillAppear`，说：

```
 [self.navigationController setNavigationBarHidden:YES animated:NO]; 
```

# iphone - Qualcomm AR 相机叠加视图

> ID：11594439
> 
> 赞同：1
> 
> 时间：2012-07-21T17:38:33.447
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我正在使用 NinevehGL 框架和 Qualcomm AR 来吸引 3D 对象，但我遇到了一个问题，即我无法在相机上覆盖任何视图、按钮、文本！！！或者更好的说法是向子视图添加任何视图！

例如 [self.view addSubView:myImage];

但是当相机启动时，什么都没有！

如果你能告诉我该怎么做，我将不胜感激..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:02:59.797

您需要确保视图的位置正确（中心、边界和变换）。这有点棘手，因为如果您使用默认方向，AR 相机总是以横向右方向显示。

您可以纵向显示它，但是您需要在配置视频背景时修改这些值。我建议使用默认的横向向右方向。

# javascript - IE8 中的 FB 分享按钮 Javascript 错误

> ID：11594442
> 
> 赞同：2
> 
> 时间：2012-07-21T17:38:59.467
> 
> 标签：javascript, facebook, internet-explorer-8, share

我只在 IE8 中收到 FB Share 按钮的 javascript 错误。这是在旧的分享按钮被禁用并随后重新启用之后开始的（请参阅[Facebook 分享按钮：它正式死了吗？](https://stackoverflow.com/questions/11537996/facebook-share-button-is-it-officially-dead)）

我得到的错误是：

```
Message: Object doesn't support this property or method
FB.Share                                                    Line: 128
Code: 0                                                     Char: 188
URI: http://static.ak.fbcdn.net/connect.php/js/FB.Share 
```

有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:04:27.417

这样做怎么样？

```
http://www.facebook.com/sharer.php?s=100&p[title]=SHARE%20ME&p[summary]=SOME%20CONTENT&p[url]=http://www.google.com&p[images][0]=http://fakeurl.com/shareImage.gif 
```

分解：

`http://www.facebook.com/sharer.php?s=100`-**主要网址**
`&p[title]=SHARE%20ME`-**分享标题**
`&p[summary]=SOME%20CONTENT`-**分享段落**
`&p[url]=http://www.google.com`-分享**网址**
`&p[images][0]=http://fakeurl.com/shareImage.gif`-**分享图片缩略图**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:32:12.470

我遇到了类似的问题，经过数小时的在线搜索后，**删除**以下行对我有用。

```
<meta http-equiv="X-UA-Compatible" content="IE=7"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T20:00:11.960

我在最初给出的链接中使用了稍微修改过的答案版本：

```
<html xmlns:fb="http://ogp.me/ns/fb#" lang="en">
  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">
  </head>
  <body>
    <div id="fb-root"></div>
    <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=YOUR_APP_ID"; // appId must be valid
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>
    <fb:share-button type="button" href="http://www.foobar.com"></fb:share-button>
  </body> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T17:49:07.540

我发现如果您可以通过选择 Internet 选项 -> 安全 -> 受信任的站点 -> 启用保护模式将 IE8 设置为保护模式，则该页面工作正常。

# vb.net - 如何使用 VB 以最大窗口大小打开 IE？

> ID：11594448
> 
> 赞同：0
> 
> 时间：2012-07-21T17:39:31.833
> 
> 标签：vb.net

我需要打开并且还需要能够关闭 IE 窗口，所以我使用

```
Proc = Process.Start("C:\Program Files\Internet Explorer\IEXPLORE.EXE", WebLink) 
```

和

```
Proc.Kill() 
```

但是，我还需要将 IE 大小设置为最大。我怎么能这样做？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T17:51:08.987

我建议使用`[Process.Start()](http://msdn.microsoft.com/en-us/library/0w4h05yb)`接受 a`[ProcessStartInfo](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo)`作为参数的重载。使用它启动您的进程将允许您设置`[ProcessStartInfo.WindowStyle](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.windowstyle)`属性以控制要启动该进程的窗口样式。

如果上述方法不起作用，您可以尝试通过使用标志来最大化`[ShowWindow()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633548%28v=vs.85%29.aspx)`窗口`[SW_MAXIMIZE](http://www.pinvoke.net/default.aspx/Enums/SHOWWINDOW_FLAGS.html)`。为了在您的托管可执行文件中使用本机方法，您需要使用[P/Invoke](http://www.pinvoke.net/default.aspx/user32.showwindow)。要获取窗口句柄，您可以尝试使用该`[Process.MainWindowHandle](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.mainwindowhandle.aspx)`属性。如果这仍然不起作用，您可以尝试使用`[EnumWindows()](http://www.pinvoke.net/default.aspx/user32.enumwindows)`遍历所有打开的窗口，通过将进程 ID ( `[Process.Id](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.id)`) 与窗口的父进程 ID ( `[GetWindowThreadProcessId()](http://www.pinvoke.net/default.aspx/user32.getwindowthreadprocessid)`) 进行比较来检查它们是否属于您创建的进程。

# iphone - 阻止 iCloud 在 Core Data 中同步属性

> ID：11594450
> 
> 赞同：1
> 
> 时间：2012-07-21T17:39:35.767
> 
> 标签：iphone, objective-c, ios, core-data, uiimage

在我的核心数据数据库中，我有一个 UIImage，它是完整的图像。我也有一系列相同图像的缩略图版本。我不需要同步这些，因为如果它们不存在，那么应用程序会创建它们。这样做比上传和下载它们要快。它还会占用更少的 iCloud 存储空间。

我可以阻止这些属性同步吗？

# android - 从相应的 res/drawable 文件夹 Android 加载图像

> ID：11594451
> 
> 赞同：-1
> 
> 时间：2012-07-21T17:39:40.590
> 
> 标签：android, image, load, drawable

我有一个自定义类`ButtonImage`。

```
public ButtonImage(Activity activity) {

        face1 = activity.getResources().getIdentifier("face1", "drawable" , activity.getPackageName());
        face1i.setImageResource(face1);
... 
```

我有`res/drawable`, 和其他人 ( `drawable-ldpi`, `drawable-mdpi`, `drawable-hdpi`, `drawable-xhdpi`)，然后我想加载人脸 (我有 4 个)，然后当我创建`ButtonImage`这些人`NullPointerException`( `face1 = activity...`)

如何根据 (ldpi,hdpi, mdpi) 文件夹从可绘制文件夹中加载图像，每个文件夹上有 4 个图像。

对不起我的英语，我希望你能理解我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T17:45:19.527

哇对不起。

我忘了创建 Imageviews 对象；

```
face1 = new ImageView(activity); 
```

# php - 在线输出与我的本地主机不同（添加反斜杠）

> ID：11594458
> 
> 赞同：0
> 
> 时间：2012-07-21T17:40:17.890
> 
> 标签：php, ajax, localhost, backslash

我编写了一个简单的新闻脚本，实现了 AJAX，让您可以在此新闻的不同内容之间切换。“子页面”的这些内容位于单独的 HTML 文件中。

现在在我的本地主机上它工作得很好，但是在线它在代码中添加了反斜杠，所以例如 img 标签不起作用！

这是代码在线执行的屏幕截图：

[http://img6.imagebanana.com/img/3e6u5lmx/Bildschirmfoto20120721um19.33.21.png](http://img6.imagebanana.com/img/3e6u5lmx/Bildschirmfoto20120721um19.33.21.png)

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T17:42:26.330

`magic_quotes_gpc`在您的`php.ini`配置文件中禁用。

# google-app-engine - 在 NDB 中按计数查询重复的属性

> ID：11594462
> 
> 赞同：10
> 
> 时间：2012-07-21T17:40:29.680
> 
> 标签：google-app-engine, app-engine-ndb

是否有一种有效的机制来查询 NDB 中重复属性中的项目数？

我想做类似的事情：

```
Class.query(class.repeated_property.count == 2) 
```

但这当然行不通。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-22T19:38:38.853

具体来说，您可以使用[ComputedProperty](https://developers.google.com/appengine/docs/python/ndb/properties#computed)自动存储计数，例如

```
class X(ndb.Model):
  prop = ndb.StringProperty(repeated=True)
  prop_count = ndb.ComputedProperty(lambda e: len(e.prop))

X.query(X.prop_count == 2) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T19:42:04.397

GQL 中没有 len 查询语义，您需要有一个单独的属性来表示列表的长度并对其进行查询。

# c++ - 为什么 std::runtime_error::what() 返回 const char* 而不是 std::string const&

> ID：11594465
> 
> 赞同：2
> 
> 时间：2012-07-21T17:40:44.990
> 
> 标签：c++, string, exception

为什么`std::runtime_error::what()`返回`const char*`而不是`std::string const&`？在许多情况下，直接返回对嵌入字符串的引用会很方便，并且可以避免一些开销。那么首先不返回例如对内部字符串的 const 引用并且不提供重载函数的理由是什么？我想它与能够抛出异常的字符串 ctor 一起使用，但我看不到返回字符串引用的风险。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T17:55:09.587

`std::runtime_error`继承自`std::exception`which 定义`virtual const char* what() const throw();`，因此最简单的响应是它是函数的重载，并且您可以确定任何标准异常都以这种方式定义它。它可能（取决于实现）可以返回`std::string`，但它与标准库的其余部分不一致。

`what()`我认为返回的原因`const char*`是您可以避免任何可能失败的操作（尤其是可能引发异常的操作）。考虑下面的代码，它不应该失败

```
virtual const char* what() const throw() {
    return "An error has occured";
} 
```

但是在下面的代码中，分配`std::string`可能会失败，抛出异常：

```
std::string what() const throw() {
    return std::string("An error has occured");
} 
```

如果字符串的构造函数扔在这里，应用程序很可能无论如何都会崩溃，因为函数指定`throw()`.

在异常内部使用`std::string`会引入分配内存的需要，这可能是不可能的（请注意，也`std::bad_alloc`继承自`std::exception`）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-21T17:44:23.407

不一定有嵌入式`std::string`. 成员函数是虚拟的`what`，即它被设计为被覆盖。覆盖它的主要原因是以其他方式提供字符串，而不是通过使用的机制`std::runtime_error`（无论该机制是什么，很可能是一个 stored `std::string`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T17:49:26.913

虽然 runtime_error 确实将 std::string 作为参数，因此它可以保留它并按照您的建议返回它，但 what() 方法是从 std::exception 继承的，因此更通用。

抛出异常的开销可能已经很高了，堆栈展开，所以你不应该担心这一点额外的开销。

# c# - ASP.NET“GDI+ 中发生一般错误”仅适用于 Vista 机器上的 PNG 图像

> ID：11594468
> 
> 赞同：0
> 
> 时间：2012-07-21T17:40:58.773
> 
> 标签：c#, asp.net, gdi+

我一直在寻找解决这个令人烦恼的问题的方法，并找到了很多答案，不幸的是，这些答案似乎对我不起作用。

我有以下 ASP.NET 代码，应该将图像作为 JPEG 或 PNG 输出到 Web 浏览器：

```
public partial class MyImg : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{
    using(Bitmap bmp = new Bitmap(880, 520))
    {
        using (System.Drawing.Graphics gfx = System.Drawing.Graphics.FromImage(bmp))
        {
            try
            {
                gfx.Clear(Color.Aqua);
            //  finalizeOutput(bmp, gfx, MyImageType.SCGIT_JPEG);   //Works
                finalizeOutput(bmp, gfx, MyImageType.SCGIT_PNG);    //DOES NOT Work
            }
            catch (Exception ex)
            {
            }
        }
    }

}
    protected void finalizeOutput(System.Drawing.Graphics gfx, Bitmap bmp, MyImageType imageType)
    {
        //Get image type
        ImageFormat imgFmt;
        string strContentType;
        switch (imageType)
        {
            case MyImageType.SCGIT_GIF:
                strContentType = "image/gif";
                imgFmt = ImageFormat.Gif;
                break;
            case MyImageType.SCGIT_PNG:
                strContentType = "image/png";
                imgFmt = ImageFormat.Png;
                break;
            default:
                strContentType = "image/jpeg";
                imgFmt = ImageFormat.Jpeg;
                break;
        }

        //Finalizing and Cleaning Up 
        Response.ContentType = strContentType;
        bmp.Save(Response.OutputStream, imgFmt);    //THROWS EXCEPTION for png type: "A generic error occurred in GDI+."
//      bmp.Dispose();
//      gfx.Dispose();
        Response.End();
    }

} 
```

发生的情况是，上述方法在我安装在 Windows 7 上的 VS2010 开发 IIS 上完美运行，但是当我在 Vista 上尝试完全相同的代码时，它会抛出“GDI+ 中发生一般错误”异常，但仅适用于图像类型 PNG ，它适用于 JPEG。

知道如何解决这个问题吗？

# algorithm - 使用给定的 n 个字符串输入生成 Bulls 和 Cows 密码

> ID：11594472
> 
> 赞同：3
> 
> 时间：2012-07-21T17:41:29.397
> 
> 标签：algorithm, logic

我在这个问题上卡了很长时间，它基本上是逆向工程牛牛游戏。在此处阅读更多信息：[http](http://rosettacode.org/wiki/Bulls_and_cows) ://rosettacode.org/wiki/Bulls_and_cows 我无法为下面给出的问题开发逻辑，如果您能想到解决方法，请发表相同评论。

问题陈述：

给定很少的线索词（形式为 ABCD/DBCA 等）以及每个词的奶牛和公牛的数量，程序应该能够通过评估给定的线索词来计算出实际的词并生成输出的秘密词。

测试用例：

输入：4
DBCC 0 2
CDAB 2 1
CAAD 1 2
CDDA 2 0

输出：BDAA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T17:49:01.817

这个想法是减少可能解决方案的空间。在开始之前，所有 4^4 组合都是可能的。阅读第一条线索 [DBCC 0 2 ] 后，您可以消除许多可能的解决方案，在这个特定示例中，您可以消除所有首先具有 D 的状态，所有具有 B 在第二位的状态等等在。只需消除所有不“适合”当前线索的可能解决方案。

对每条线索都这样做，直到只剩下一个解决方案。另一个有趣的问题当然是如何生成好的线索模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-03T04:54:48.753

我这样做的方法是： 1\. 生成所有可能的单词，将它们放在一个列表（数组）中 2\. 随机选择其中一个（第一个问题）并询问线索 3\. 取答案（假设是 2,1 ) 4\. 开始将该问题与第一个，第二个，...，与列表中的最后一个单词进行比较 5\. 如果它们给出相同的线索：计算它们，plac

# php - 在你的 Mysql PHP - 服务器上重新创建 Openstreetmap

> ID：11594474
> 
> 赞同：-1
> 
> 时间：2012-07-21T17:41:43.113
> 
> 标签：php, mysql, openstreetmap

我想重新创建这样的东西；

```
<iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://www.openstreetmap.org/export/embed.html?bbox=-71.31,42.251,-70.883,42.482&amp;layer=mapnik&amp;marker=42.36652,-71.09620" style="border: 1px solid black"></iframe><br /><small><a href="http://www.openstreetmap.org/?lat=42.3665&amp;lon=-71.0965&amp;zoom=11&amp;layers=M&amp;mlat=42.36652&amp;mlon=-71.09620">Gr&amp;#246;&amp;#223;ere Karte anzeigen</a></small> 
```

所以我有一个带有unix、php和mysql的系统。您可以下载带有地图的 osm 文件。但是，您如何拥有一个“小程序”，您可以在其中移动和滚动内容，而所有数据都在我的服务器上，速度如此之快，没有速率限制，更重要的是：服务器可用时的可用性。

我使用 perl 和 PostgreSQL 找到了答案，但我没有 PostgreSQL，而且 perl 脚本需要更多我无法安装的文件，因为它是共享服务器。

当所有数据都来自我的“自​​己的”服务器时，如何使用我的系统来拥有漂亮的“小程序”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T06:02:06.857

您可能想要设置自己的[磁贴服务器](http://switch2osm.org/serving-tiles/)。首先，确保您的系统满足该页面上描述的要求。然后选择三种可能性之一。第一个描述如何[从包构建切片服务器](http://switch2osm.org/serving-tiles/building-a-tile-server-from-packages/)可能是最简单的一个。

关于您的评论：POI 将自动出现在这些图块上。如果您希望它们在一个额外的层上，您必须修改[Mapnik](http://wiki.openstreetmap.org/wiki/Mapnik)的[样式表](http://wiki.openstreetmap.org/wiki/Mapnik#Stylesheet)并从中删除所有 POI，然后使用[OpenLayers](http://switch2osm.org/using-tiles/getting-started-with-openlayers/)或[Leaflet](http://switch2osm.org/using-tiles/getting-started-with-leaflet/)创建一个单独的 POI 层。

# performance - 分析 Haskell 程序

> ID：11594481
> 
> 赞同：24
> 
> 时间：2012-07-21T17:42:48.180
> 
> 标签：performance, haskell, strictness

我有一段代码使用`sequence`. 从道德上讲，它做了这样的事情：

```
sampleMean :: MonadRandom m => Int -> m Float -> m Float
sampleMean n dist = do
  xs <- sequence (replicate n dist)
  return (sum xs) 
```

除了它有点复杂。我感兴趣的实际代码是`likelihoodWeighting`这个[Github repo](https://github.com/chris-taylor/aima-haskell/blob/master/src/AI/Probability/Bayes.hs)中的函数。

我注意到运行时间与`n`. 特别是一旦`n`超过某个值，就会达到内存限制，运行时间就会爆炸。我不确定，但我认为这是因为`sequence`正在建立一个长长的 thunk 列表，直到调用`sum`.

一旦我超过了大约 100,000 个样本，程序就会慢下来。我想对此进行优化（我的感觉是 1000 万个样本不应该成为问题）所以我决定对其进行分析 - 但我在理解分析器的输出时遇到了一些麻烦。

* * *

**剖析**

我在一个文件中创建了一个简短的可执行文件，该文件`main.hs`使用 100,000 个样本运行我的函数。这是做的输出

```
$ ghc -O2 -rtsopts main.hs
$ ./main +RTS -s 
```

我注意到的第一件事 - 它分配了近 1.5 GB 的堆，并将 60% 的时间用于垃圾收集。这通常表明过于懒惰吗？

```
 1,377,538,232 bytes allocated in the heap
 1,195,050,032 bytes copied during GC
   169,411,368 bytes maximum residency (12 sample(s))
     7,360,232 bytes maximum slop
           423 MB total memory in use (0 MB lost due to fragmentation)

Generation 0:  2574 collections,     0 parallel,  2.40s,  2.43s elapsed
Generation 1:    12 collections,     0 parallel,  1.07s,  1.28s elapsed

INIT  time    0.00s  (  0.00s elapsed)
MUT   time    1.92s  (  1.94s elapsed)
GC    time    3.47s  (  3.70s elapsed)
RP    time    0.00s  (  0.00s elapsed)
PROF  time    0.23s  (  0.23s elapsed)
EXIT  time    0.00s  (  0.00s elapsed)
Total time    5.63s  (  5.87s elapsed)

%GC time      61.8%  (63.1% elapsed)

Alloc rate    716,368,278 bytes per MUT second

Productivity  34.2% of total user, 32.7% of total elapsed 
```

以下是来自的结果

```
$ ./main +RTS -p 
```

第一次运行时，发现有一个函数被重复调用，结果我可以记住它，这使速度提高了 2 倍。然而，它并没有解决空间泄漏问题。

```
COST CENTRE           MODULE                no. entries  %time %alloc   %time %alloc

MAIN                  MAIN                    1        0   0.0    0.0   100.0  100.0
 main                 Main                  434        4   0.0    0.0   100.0  100.0
  likelihoodWeighting AI.Probability.Bayes  445        1   0.0    0.3   100.0  100.0
   distributionLW     AI.Probability.Bayes  448        1   0.0    2.6     0.0    2.6
   getSampleLW        AI.Probability.Bayes  446   100000  20.0   50.4   100.0   97.1
    bnProb            AI.Probability.Bayes  458   400000   0.0    0.0     0.0    0.0
    bnCond            AI.Probability.Bayes  457   400000   6.7    0.8     6.7    0.8
    bnVals            AI.Probability.Bayes  455   400000  20.0    6.3    26.7    7.1
     bnParents        AI.Probability.Bayes  456   400000   6.7    0.8     6.7    0.8
    bnSubRef          AI.Probability.Bayes  454   800000  13.3   13.5    13.3   13.5
    weightedSample    AI.Probability.Bayes  447   100000  26.7   23.9    33.3   25.3
     bnProb           AI.Probability.Bayes  453   100000   0.0    0.0     0.0    0.0
     bnCond           AI.Probability.Bayes  452   100000   0.0    0.2     0.0    0.2
     bnVals           AI.Probability.Bayes  450   100000   0.0    0.3     6.7    0.5
      bnParents       AI.Probability.Bayes  451   100000   6.7    0.2     6.7    0.2
     bnSubRef         AI.Probability.Bayes  449   200000   0.0    0.7     0.0    0.7 
```

这是一个堆配置文件。我不知道为什么它声称运行时间是 1.8 秒——这次运行大约需要 6 秒。

![在此处输入图像描述](../Images/9c669651b2d26108bf442639aba5cc4d.png)

谁能帮我解释分析器的输出 - 即确定瓶颈在哪里，并就如何加快速度提供建议？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-22T15:08:27.880

[通过结合JohnL 的](https://stackoverflow.com/a/11597364/1011995)使用`foldM`in的建议，已经实现了巨大的改进`likelihoodWeighting`。这将这里的内存使用量减少了大约十倍，并将 GC 时间显着降低到几乎或实际上可以忽略不计。

使用当前源运行分析会产生

```
probabilityIO              AI.Util.Util          26.1   42.4    413 290400000
weightedSample.go          AI.Probability.Bayes  16.1   19.1    255 131200080
bnParents                  AI.Probability.Bayes  10.8    1.2    171   8000384
bnVals                     AI.Probability.Bayes  10.4    7.8    164  53603072
bnCond                     AI.Probability.Bayes   7.9    1.2    125   8000384
ndSubRef                   AI.Util.Array          4.8    9.2     76  63204112
bnSubRef                   AI.Probability.Bayes   4.7    8.1     75  55203072
likelihoodWeighting.func   AI.Probability.Bayes   3.3    2.8     53  19195128
%!                         AI.Util.Util           3.3    0.5     53   3200000
bnProb                     AI.Probability.Bayes   2.5    0.0     40        16
bnProb.p                   AI.Probability.Bayes   2.5    3.5     40  24001152
likelihoodWeighting        AI.Probability.Bayes   2.5    2.9     39  20000264
likelihoodWeighting.func.x AI.Probability.Bayes   2.3    0.2     37   1600000 
```

和报告的 13MB 内存使用量`-s`，~5MB 最大驻留。这已经不算太糟糕了。

尽管如此，我们仍有一些可以改进的地方。首先，在大计划中，一件相对较小的事情`AI.UTIl.Array.ndSubRef`：

```
ndSubRef :: [Int] -> Int
ndSubRef ns = sum $ zipWith (*) (reverse ns) (map (2^) [0..]) 
```

反转列表并映射`(2^)`到另一个列表效率低下，更好的是

```
ndSubRef = L.foldl' (\a d -> 2*a + d) 0 
```

它不需要将整个列表保留在内存中（可能不是什么大问题，因为列表会很短），因为它可以反转它，并且不需要分配第二个列表。分配的减少是显着的，大约 10%，而且这部分运行得更快，

```
ndSubRef                   AI.Util.Array          1.7    1.3     24   8000384 
```

在修改运行的profile中，但由于只占用了整体时间的一小部分，所以整体影响很小。有潜在的更大的鱼可以`weightedSample`煎炸`likelihoodWeighting`。

让我们添加一些严格性，`weightedSample`看看它是如何改变事物的：

```
weightedSample :: Ord e => BayesNet e -> [(e,Bool)] -> IO (Map e Bool, Prob)
weightedSample bn fixed =
    go 1.0 (M.fromList fixed) (bnVars bn)
    where
        go w assignment []     = return (assignment, w)
        go w assignment (v:vs) = if v `elem` vars
            then
                let w' = w * bnProb bn assignment (v, fixed %! v)
                in go w' assignment vs
            else do
                let p = bnProb bn assignment (v,True)
                x <- probabilityIO p
                go w (M.insert v x assignment) vs

        vars = map fst fixed 
```

的 weight 参数`go`从不强制，assignment 参数也不是，因此它们可以建立 thunk。让我们启用`{-# LANGUAGE BangPatterns #-}`并强制更新立即生效，并`p`在将其传递给之前进行评估`probabilityIO`：

```
go w assignment (v:vs) = if v `elem` vars
    then
        let !w' = w * bnProb bn assignment (v, fixed %! v)
        in go w' assignment vs
    else do
        let !p = bnProb bn assignment (v,True)
        x <- probabilityIO p
        let !assignment' = M.insert v x assignment
        go w assignment' vs 
```

这带来了分配的进一步减少 (~9%) 和小幅加速 (~%13%)，但总内存使用量和最大驻留没有太大变化。

我没有看到其他明显的变化，所以让我们看看`likelihoodWeighting`：

```
func m _ = do
    (a, w) <- weightedSample bn fixed
    let x = a ! e
    return $! x `seq` w `seq` M.adjust (+w) x m 
```

在最后一行中，first，`w`现在已经被评估了`weightedSample`，所以我们在这里不需要`seq`它，key`x`是评估更新后的地图所必需的，所以`seq`这也不是必需的。那条线上的坏事是`M.adjust`。`adjust`无法强制更新函数的结果，因此会在地图的值中构建 thunk。您可以通过查找修改后的值并强制执行对 thunk 的评估，但`Data.Map`这里提供了一种更方便的方法，因为保证存在更新地图的键，`insertWith'`：

```
func !m _ = do
    (a, w) <- weightedSample bn fixed
    let x = a ! e
    return (M.insertWith' (+) x w m) 
```

`m`（注意：GHC 使用 bang-pattern比使用`return $! ...`这里优化得更好）。这略微减少了总分配并且不会显着改变运行时间，但对使用的总内存和最大驻留有很大影响：

```
 934,566,488 bytes allocated in the heap
   1,441,744 bytes copied during GC
      68,112 bytes maximum residency (1 sample(s))
      23,272 bytes maximum slop
           1 MB total memory in use (0 MB lost due to fragmentation) 
```

运行时间的最大改进是避免`randomIO`使用`StdGen`非常慢。

我很惊讶这些功能需要多少时间`bn*`，但没有看到任何明显的低效率。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-22T18:42:11.097

我很难消化这些配置文件，但我之前被踢过屁股，因为`MonadRandom`on Hackage 是*严格*的。创建一个懒惰的版本`MonadRandom`让我的记忆问题消失了。

我的同事还没有获得发布代码的许可，但我已经[`Control.Monad.LazyRandom`](http://pastebin.com/7Hb9kw4n)在[pastebin](http://pastebin.com/7Hb9kw4n)上发布了。或者，如果您想查看一些解释完全惰性随机搜索的摘录，包括无限的随机计算列表，请查看[*体验报告：计算生物学中的 Haskell*](http://www.cs.tufts.edu/~nr/pubs/mrfy-abstract.html)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-22T00:12:19.683

我整理了一个非常基本的示例，发布在此处：[http](http://hpaste.org/71919) ://hpaste.org/71919 。我不确定它是否像您的示例一样......只是一个似乎有效的非常小的东西。

编译`-prof`和`-fprof-auto`运行 100000 次迭代会产生以下分析输出的头部（请原谅我的行号）：

```
 8 COST CENTRE                   MODULE               %time %alloc
  9 
 10 sample                        AI.Util.ProbDist      31.5   36.6
 11 bnParents                     AI.Probability.Bayes  23.2    0.0
 12 bnRank                        AI.Probability.Bayes  10.7   23.7
 13 weightedSample.go             AI.Probability.Bayes   9.6   13.4
 14 bnVars                        AI.Probability.Bayes   8.6   16.2
 15 likelihoodWeighting           AI.Probability.Bayes   3.8    4.2
 16 likelihoodWeighting.getSample AI.Probability.Bayes   2.1    0.7
 17 sample.cumulative             AI.Util.ProbDist       1.7    2.1
 18 bnCond                        AI.Probability.Bayes   1.6    0.0
 19 bnRank.ps                     AI.Probability.Bayes   1.1    0.0 
```

以下是汇总统计数据：

```
1,433,944,752 bytes allocated in the heap
 1,016,435,800 bytes copied during GC
   176,719,648 bytes maximum residency (11 sample(s))
     1,900,232 bytes maximum slop
           400 MB total memory in use (0 MB lost due to fragmentation)

INIT    time    0.00s  (  0.00s elapsed)
MUT     time    1.40s  (  1.41s elapsed)
GC      time    1.08s  (  1.24s elapsed)
Total   time    2.47s  (  2.65s elapsed)

%GC     time      43.6%  (46.8% elapsed)

Alloc rate    1,026,674,336 bytes per MUT second

Productivity  56.4% of total user, 52.6% of total elapsed 
```

请注意，分析器将手指指向`sample`。我通过使用强制输入`return`该函数`$!`，然后是一些汇总统计信息：

```
1,776,908,816 bytes allocated in the heap
  165,232,656 bytes copied during GC
   34,963,136 bytes maximum residency (7 sample(s))
      483,192 bytes maximum slop
           68 MB total memory in use (0 MB lost due to fragmentation)

INIT    time    0.00s  (  0.00s elapsed)
MUT     time    2.42s  (  2.44s elapsed)
GC      time    0.21s  (  0.23s elapsed)
Total   time    2.63s  (  2.68s elapsed)

%GC     time       7.9%  (8.8% elapsed)

Alloc rate    733,248,745 bytes per MUT second

Productivity  92.1% of total user, 90.4% of total elapsed 
```

在 GC 方面效率更高，但当时并没有太大变化。您也许可以继续以这种配置文件/调整方式进行迭代，以针对您的瓶颈并获得更好的性能。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-22T02:23:40.273

我认为您的初步诊断是正确的，而且我从未见过在记忆效应开始后有用的分析报告。

问题是您要遍历列表两次，一次`sequence`又一次 for `sum`。在 Haskell 中，大型列表的多个列表遍历对性能非常非常不利。解决方案通常是使用某种类型的折叠，例如`foldM`. 你的`sampleMean`函数可以写成

```
{-# LANGUAGE BangPatterns #-}

sampleMean2 :: MonadRandom m => Int -> m Float -> m Float
sampleMean2 n dist = foldM (\(!a) mb -> liftM (+a) mb) 0 $ replicate n dist 
```

例如，只遍历列表一次。

你也可以做同样的事情`likelihoodWeighting`。为了防止重击，确保折叠函数中的累加器具有适当的严格性很重要。

# cordova - Phonegap Geolocation：如果应用程序关闭，则跟踪位置

> ID：11594483
> 
> 赞同：2
> 
> 时间：2012-07-21T17:43:10.870
> 
> 标签：cordova, geolocation, tracking

我已经按照[mobile.tutsplus上的教程进行操作](http://mobile.tutsplus.com/tutorials/mobile-web-apps/build-an-exercise-tracking-app-persistence-graphing/)

全部运行。

**但是：**如果我关闭应用程序或打开设备锁定，跟踪就会停止。我想让我的个人慢跑跟踪器具有一些附加功能，所以我希望跟踪继续进行。

恐怕只有在 Objective-C 中使用纯原生 App 才有可能。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T01:25:12.327

不确定在后台运行它......但我运行了相同的教程并且不得不关闭睡眠模式才能让它工作。我仍然无法运行该教程。第一个轨道运行完美，但任何后续轨道都不会运行。系统冻结。我找到了删除函数`var`中的建议。`startTracking_stop`还是不行。然后我添加了一个警报，发现该对象没有被传递......我收到`null`消息。

你是如何让这个程序超越第一条轨道的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T17:13:07.303

```
<!DOCTYPE html>
<html>
  <head>
  <title></title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
      <meta charset="utf-8">

    <link rel="stylesheet" href="css/themes/default/jquery.mobile-1.1.0.min.css" />
    <link rel="stylesheet" href="css/author.css" />
    <script type="text/javascript" charset="utf-8" src="cordova-1.9.0.js"></script>

    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=<your CODEhere>&sensor=false"></script>

    <script type="text/javascript" src="js/libs/json2.js"></script>
    <script type="text/javascript" src="js/libs/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="js/libs/jquery.mobile-1.1.0.min.js"></script>
    <script type="text/javascript" src="js/plugins/countdown.js"></script>

    <script type="text/javascript" src="js/exercisetracker.js"></script>
  </head>
  <body onload="onBodyLoad()">

  <!-- BEGIN home -->
    <div data-role="page" id="home">
      <div data-role="header">
        <h1>Home</h1>
        <div data-role="navbar">
          <ul>
            <li><a href="#home" data-transition="none" data-icon="home">Home</a></li>
            <li><a href="#startTracking" data-transition="none" data-icon="plus">Track Workout</a></li>
            <li><a href="#history" data-transition="none" data-icon="star">History</a></li>
          </ul>
        </div>
      </div>

      <div data-role="content">
        <div data-role="controlgroup">
          <button id="home_network_button" data-icon="check">Internet Access Enabled</button>
          <button id="home_clearstorage_button">Clear local storage</button>
          <button id="home_seedgps_button">Load Seed GPS Data</button>
        </div>
      </div>
    </div>
  <!-- EOF home -->

  <!-- BEGIN startTracking -->
    <div data-role="page" id="startTracking">
      <div data-role="header">
        <h1>Track Workout</h1>

        <div data-role="navbar">
          <ul>
            <li><a href="#home" data-transition="none" data-icon="home">Home</a></li>
            <li><a href="#startTracking" data-transition="none" data-icon="plus">Track Workout</a></li>
            <li><a href="#history" data-transition="none" data-icon="star">History</a></li>
          </ul>
        </div>
      </div>

      <div data-role="content">
        <p id="startTracking_status"></p>
        <div data-role="fieldcontain" class="ui-hide-label">
          <label for="track_id">Track ID/Name:</label>
          <input type="text" name="track_id" id="track_id" placeholder="Workout ID/Name"/>
        </div>

        <button data-role="button" id="startTracking_start">Start Tracking</button>
        <button data-role="button" id="startTracking_stop">Stop Tracking</button>

        <p id="startTracking_debug"></p>

      </div>
    </div>
  <!-- EOF startTracking -->

  <!-- BEGIN history -->
  <div data-role="page" id="history">
    <div data-role="header">
      <h1>History</h1>

      <div data-role="navbar">
        <ul>
          <li><a href="#home" data-transition="none" data-icon="home">Home</a></li>
          <li><a href="#startTracking" data-transition="none" data-icon="plus">Track Workout</a></li>
          <li><a href="#history" data-transition="none" data-icon="star">History</a></li>
        </ul>
      </div>
    </div>

    <div data-role="content">
      <p id="tracks_recorded"></p>
      <ul data-role="listview" id="history_tracklist">

      </ul>
    </div>
  </div>
  <!-- EOF history -->

  <!-- BEGIN track_info -->
  <div data-role="page" id="track_info">

    <div data-role="header">
      <h1>Viewing Single Workout</h1>

      <div data-role="navbar">
        <ul>
          <li><a href="#home" data-transition="none" data-icon="home">Home</a></li>
          <li><a href="#startTracking" data-transition="none" data-icon="plus">Track Workout</a></li>
          <li><a href="#history" data-transition="none" data-icon="star">History</a></li>
        </ul>
      </div>
    </div>

    <div data-role="content">
      <p id="track_info_info"></p>

      <div id="map_canvas" style="position:absolute;bottom:0;left:0;width:100%;height:300px;"></div>

    </div>
  </div>
  <!-- EOF track_info -->
  </body>
</html> 
```

现在是 JS 文件

```
function gps_distance(lat1, lon1, lat2, lon2)
{
  // http://www.movable-type.co.uk/scripts/latlong.html
  var R = 6371; // km
  var dLat = (lat2-lat1) * (Math.PI / 180);
  var dLon = (lon2-lon1) * (Math.PI / 180);
  var lat01 = lat1 * (Math.PI / 180);
  var lat02 = lat2 * (Math.PI / 180);

  var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
      Math.sin(dLon/2) * Math.sin(dLon/2) * Math.cos(lat01) * Math.cos(lat02);
  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
  var d = R * c;

  return d;
}

function onBodyLoad() {
  document.addEventListener("deviceready", onDeviceReady, false);

  var track_id = ''; // Name/ID of the exercise
  var watch_id;    // ID of the geolocation
  var tracking_data = []; // Array containing GPS position objects

  $("#startTracking_start").live('click', function(){

    // Start tracking the User
    watch_id = navigator.geolocation.watchPosition(

        // Success
        function(position){
          tracking_data.push(position);
          console.log(tracking_data);
        },

        // Error
        function(error){
          console.log(error);
        },

        // Settings
        { frequency: 3000, enableHighAccuracy: true });

    // Tidy up the UI
    track_id = $("#track_id").val();

    $("#track_id").hide();
    $("#startTracking_status").html("Tracking workout: <strong>" + track_id + "</strong>");

    return;
  });

  $("#startTracking_stop").live('click', function(){

    // Stop tracking the user
    navigator.geolocation.clearWatch(watch_id);

    // Save the tracking data
    window.localStorage.setItem(track_id, JSON.stringify(tracking_data));

    // Reset watch_id and tracking_data
    watch_id = null;
    tracking_data = null;

    // Tidy up the UI
    $("#track_id").val("").show();
    $("#startTracking_status").html("Stopped tracking workout: <strong>" + track_id + "</strong>");
  });

  $("#home_clearstorage_button").live('click', function(){
    window.localStorage.clear();
    console.log('LocalStorage cleared');
  });

  $("#home_seedgps_button").live('click', function(){
    window.localStorage.setItem('Sample block', '[{"timestamp":1335700802000,"coords":{"heading":null,"altitude":null,"longitude":170.33488333333335,"accuracy":0,"latitude":-45.87475166666666,"speed":null,"altitudeAccuracy":null}},{"timestamp":1335700803000,"coords":{"heading":null,"altitude":null,"longitude":170.33481666666665,"accuracy":0,"latitude":-45.87465,"speed":null,"altitudeAccuracy":null}},{"timestamp":1335700804000,"coords":{"heading":null,"altitude":null,"longitude":170.33426999999998,"accuracy":0,"latitude":-45.873708333333326,"speed":null,"altitudeAccuracy":null}},{"timestamp":1335700805000,"coords":{"heading":null,"altitude":null,"longitude":170.33318333333335,"accuracy":0,"latitude":-45.87178333333333,"speed":null,"altitudeAccuracy":null}},{"timestamp":1335700806000,"coords":{"heading":null,"altitude":null,"longitude":170.33416166666666,"accuracy":0,"latitude":-45.871478333333336,"speed":null,"altitudeAccuracy":null}},{"timestamp":1335700807000,"coords":{"heading":null,"altitude":null,"longitude":170.33526833333332,"accuracy":0,"latitude":-45.873394999999995,"speed":null,"altitudeAccuracy":null}},{"timestamp":1335700808000,"coords":{"heading":null,"altitude":null,"longitude":170.33427333333336,"accuracy":0,"latitude":-45.873711666666665,"speed":null,"altitudeAccuracy":null}},{"timestamp":1335700809000,"coords":{"heading":null,"altitude":null,"longitude":170.33488333333335,"accuracy":0,"latitude":-45.87475166666666,"speed":null,"altitudeAccuracy":null}}]');

  });

  // When the user views the history page
  $('#history').live('pageshow', function () {

    // Count the number of entries in localStorage and display this information to the user
    tracks_recorded = window.localStorage.length;
    $("#tracks_recorded").html("<strong>" + tracks_recorded + "</strong> workout(s) recorded");

    // Empty the list of recorded tracks
    $("#history_tracklist").empty();

    // Iterate over all of the recorded tracks, populating the list
    for(i=0; i<tracks_recorded; i++){
        $("#history_tracklist").append("<li><a href='#track_info' data-ajax='false'>" + window.localStorage.key(i) + "</a></li>");
    }

    // Tell jQueryMobile to refresh the list
    $("#history_tracklist").listview('refresh');

  });

  $("#history_tracklist li a").live('click', function(){

    $("#track_info").attr("track_id", $(this).text());

  });

// When the user views the Track Info page
  $('#track_info').live('pageshow', function(){

    // Find the track_id of the workout they are viewing
    var key = $(this).attr("track_id");

    // Update the Track Info page header to the track_id
    $("#track_info div[data-role=header] h1").text(key);

    // Get all the GPS data for the specific workout
    var data = window.localStorage.getItem(key);

    console.log('Saved Storage: ' + data);

    // Turn the stringified GPS data back into a JS object
    data = JSON.parse(data);

    // Calculate the total time taken for the track
    start_time = new Date(data[0].timestamp).getTime();
    end_time = new Date(data[data.length-1].timestamp).getTime();

    total_time_ms = end_time - start_time;
    total_time_s = total_time_ms / 1000;

    final_time_m = Math.floor(total_time_s / 1000);
    final_time_s = total_time_s - (final_time_m * 60);

    // Calculate the total distance travelled
    total_km = 0;

    for(i = 0; i < data.length; i++){

      if(i == (data.length - 1)){
        break;
      }

      total_km += gps_distance(data[i].coords.latitude, data[i].coords.longitude, data[i+1].coords.latitude, data[i+1].coords.longitude);
    }

    total_km_rounded = total_km.toFixed(2);

    // Display total distance and time
    $("#track_info_info").html('Travelled <strong>' + total_km_rounded + '</strong> km in <strong>' + final_time_m + 'm</strong> and <strong>' + final_time_s + 's</strong>');

    console.log('Write Info')

    // Set the initial Lat and Long of the Google Map
    var myLatLng = new google.maps.LatLng(data[0].coords.latitude, data[0].coords.longitude);

    // Google Map options
    var myOptions = {
      zoom: 15,
      center: myLatLng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    // Create the Google Map, set options
    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    var trackCoords = [];

    // Add each GPS entry to an array
    for(i=0; i<data.length; i++){
      trackCoords.push(new google.maps.LatLng(data[i].coords.latitude, data[i].coords.longitude));
    }

    // Plot the GPS entries as a line on the Google Map
    var trackPath = new google.maps.Polyline({
      path: trackCoords,
      strokeColor: "#FF0000",
      strokeOpacity: 1.0,
      strokeWeight: 2
    });

    // Apply the line to the map
    trackPath.setMap(map);

  });
}

function onDeviceReady() {

  if ( navigator.network.connection.type == Connection.NONE ) {
    $('#home_network_button').text('No Internet Access')
        .attr('data-icon', 'delete')
        .button('refresh');
  }
} 
```

# python - Scrapy：无法覆盖 __init__function

> ID：11594485
> 
> 赞同：5
> 
> 时间：2012-07-21T17:43:29.537
> 
> 标签：python, scrapy

我创建了一个从 CrawlSpider 继承的蜘蛛。

我需要使用该`__init__`功能，但总是收到此错误：

代码：

```
class mySpider(CrawlSpider):

 def __init__(self):
   super(mySpider, self).__init__()
     ..... 
```

这是我得到的错误： KeyError Spider not found: mySpider.

没有这个`__init__`功能一切正常

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-21T18:00:22.363

你需要这样写：

```
def __init__(self, *a, **kw):
    super(MySpider, self).__init__(*a, **kw)
    # your code here 
```

工作示例：

```
class MySpider(CrawlSpider):
    name = "company"
    allowed_domains = ["site.com"]
    start_urls = ["http://www.site.com"]

    def __init__(self, *a, **kw):
        super(MySpider, self).__init__(*a, **kw)
        dispatcher.connect(self.spider_closed, signals.spider_closed) 
```

这里 init 用于在蜘蛛中注册scrapy信号，在这个例子中我需要它在蜘蛛中而不是通常在管道中

# javascript - 在 Chrome 中进行标头重定向后，Onreadystatechange 不起作用

> ID：11594493
> 
> 赞同：0
> 
> 时间：2012-07-21T17:44:41.883
> 
> 标签：javascript, google-chrome, userscripts, onreadystatechange

我为一个调整图像大小的论坛制作了一个用户脚本。它工作得很好，除了在发布或编辑它重定向的地方之后，`onreadystatechange`在谷歌浏览器中不会触发的地方。

查看线程时，例如*SomeSite/forums.php?action=viewtopic&topicid=205362*，用户脚本有效。

编辑/发布后，EG *SomeSite/forums.php?action=viewtopic&topicid=205362&page=p4976670#4976670*，用户脚本不起作用。

问题在于这段代码：

```
document.onreadystatechange = function () {
if (document.readyState == "complete") {
    //Call function
}}; 
```

我等待加载所有资源，因为在具有许多图像的页面上调整大小不一致。

该脚本在带有 Greasemonkey 的 Firefox 中完美运行。

知道为什么`onreadystatechange`重定向后不会在 Chrome 上触发吗？有没有更好的方法来等待资源被加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T00:54:17.540

您没有说明是否使用该`@run-at`参数，但[***默认情况下***，Chrome 用户脚本在触发时有些不稳定](http://code.google.com/chrome/extensions/content_scripts.html#run_at)。
这意味着有时用户脚本会在`onload`事件之前触发，有时会在事件之后触发（默认情况下）。如果是在`onload`事件之后，则`onreadystatechange`不会触发。

要适应此行为，请添加`// @run-at document-end`到[元数据块](http://wiki.greasespot.net/Metadata_Block)，或将该代码片段替换为：

```
window.addEventListener ("load", YourMainFunction, false);
if (document.readyState == "complete") {
    YourMainFunction ();
}

function YourMainFunction {
    // DO ALL YOUR STUFF HERE...
} 
```

在后一种情况下，`YourMainFunction()`将等待加载事件（与 相同`readyState == "complete"`），或者如果事件已经过去，则立即触发。 `YourMainFunction()`在任何一种情况下都只会运行一次。

# ruby-on-rails - 参数元编程

> ID：11594496
> 
> 赞同：2
> 
> 时间：2012-07-21T17:45:14.487
> 
> 标签：ruby-on-rails, params

如何以不那么冗长的方式更新这些非常相似的文本字段？下面的文本字段被命名为给定 - 我没有为这个问题编辑它们。

```
 def update
    company = Company.find(current_user.client_id)
    company.text11 = params[:content][:text11][:value]
    company.text12 = params[:content][:text12][:value]
    company.text13 = params[:content][:text13][:value]
# etc
    company.save!
    render text: ""
  end 
```

我试过使用`send`，`to_sym`但到目前为止没有运气......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T17:56:08.153

```
[:text11, :text12, :text13].each do |s|
    company.send("#{s}=".to_sym, params[:content][s][:value])
end 
```

如果它们都是增量数字，那么：

```
11.upto(13).map{|n| "text#{n}".to_sym}.each do |s|
    company.send("#{s}=".to_sym, params[:content][s][:value])
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T17:59:19.163

我会考虑首先清理参数，然后再进行动态分配属性。围绕您的参数的包装类将允许您更轻松地对该代码进行单元测试。也许这有助于您入门。

```
require 'ostruct'

class CompanyParamsWrapper

  attr_accessor :text11, :text12, :text13

  def initialize(params)
    @content = params[:content]
    content_struct = OpenStruct.new(@content)
    self.text11 = content_struct.text11[:value]
    self.text12 = content_struct.text12[:value]
    self.text13 = content_struct.text13[:value]
  end
end

# Company model
wrapper = CompanyParamsWrapper.new(params)
company.text11 = wrapper.text11

# now easier to use Object#send or other dynamic looping 
```

# c++ - 为什么 C++ 中的虚函数称为“虚函数”？

> ID：11594499
> 
> 赞同：10
> 
> 时间：2012-07-21T17:45:35.247
> 
> 标签：c++, virtual

所以我对 C++ 中的虚函数概念很陌生，像[这样](https://stackoverflow.com/questions/8824359/why-use-virtual-functions)的线程很好地推销了这个概念。好的，我确信。

但是为什么虚函数被称为“虚函数”呢？我的意思是这样的功能和通常的功能/方法一样“具体”，不是吗？如果有人可以解释选择“虚拟”这个词来命名这个概念，那就太好了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-21T17:57:42.053

“虚拟函数”是指成员函数，其中特定实现将取决于运行时调用它的对象的类型。该语言的编译器和运行时支持努力实现这一点。

C++ 中的关键字“virtual”取自 Simula，这给 Bjarne Stroustrup 留下了深刻印象。这里有更多背景：[纯虚拟或抽象，名称是什么？](https://softwareengineering.stackexchange.com/questions/46004/pure-virtual-or-abstract-whats-in-a-name)

> .. SIMULA 67 Common Base Language (1970) .. 似乎是第一个将 OO 关键字作为*class*、*object*和**virtual**作为正式概念引入的语言。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-21T17:49:21.223

> 虚拟性，具有某物的属性而不共享其（真实或想象的）物理形式的质量

^ [http://en.wikipedia.org/wiki/Virtual](http://en.wikipedia.org/wiki/Virtual)

C++ 虚函数看起来是一个普通函数（“具有的属性”），但将被调用的实现不会通过声明或内联实现共享出去。

# windows-8 - 如何使用 C++ 为 Windows Metro 应用程序从资源图像创建 WritebleBitmap？

> ID：11594506
> 
> 赞同：2
> 
> 时间：2012-07-21T17:46:38.857
> 
> 标签：windows-8, windows-runtime, winrt-xaml, c++-cx, imaging

我可以使用以下代码轻松地从资源 JPG 图像文件创建 BitmapImage ...

```
Windows::Foundation::Uri^ uri = ref new Windows::Foundation::Uri(L"ms-appx:///Hippo.JPG");
Imaging::BitmapImage^ image = ref new Imaging::BitmapImage(uri); 
```

但是 WritableBitmap 不采用 Uri。我看到了一个 SetSource 方法，但它需要一个 IRandomaccessStream 而不是 Uri。而且我不知道如何从 JPG 文件创建一个。我一遍又一遍地在网上搜索，但找不到一个直截了当的答案。任何帮助将不胜感激。

我想要这样的东西...

```
Windows::UI::Xaml::Media::Imaging::WriteableBitmap image = ref new Windows::UI::Xaml::Media::Imaging::WriteableBitmap();
image->SetSource(somehowGetRandomAccessStreamFromUri); 
```

但是，如何从 uri 中获取 IRandomaccessStream 实例？我今天才开始开发 C++ Metro 应用程序，所以可能是错误的，但我发现它过于复杂，因为洋葱皮太多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T21:03:00.773

在 C# 中，你会做类似的事情

```
var storageFile = await Package.Current.InstalledLocation.GetFileAsync(relativePath.Replace('/', '\\'));
var stream = await storageFile.OpenReadAsync();
var wb = new WriteableBitmap(1, 1);
wb.SetSource(stream); 
```

我认为在 C++/CX 中你会做这样的事情：

```
#include <ppl.h>
#include <ppltasks.h>

...

Concurrency::task<Windows::Storage::StorageFile^> getFileTask
    (Package::Current->InstalledLocation->GetFileAsync(L"Assets\\MyImage.jpg"));

auto getStreamTask = getFileTask.then(
    [] (Windows::Storage::StorageFile ^storageFile)
    {
        return storageFile->OpenReadAsync();
    });

getStreamTask.then(
    [] (Windows::Storage::Streams::IRandomAccessStreamWithContentType^ stream)
    {
        auto wb = ref new Windows::UI::Xaml::Media::Imaging::WriteableBitmap(1, 1);
        wb->SetSource(stream);
    }); 
```

# grails - GRAILS 2.0 异常：- java.lang.VerifyError：（类：xls/Recruitment，方法：initErrors 签名：（）V）无法从空堆栈中弹出操作数

> ID：11594507
> 
> 赞同：1
> 
> 时间：2012-07-21T17:46:40.127
> 
> 标签：grails, grails-2.0

我正在尝试运行 grails 应用程序，但出现以下异常

严重：向 org.codehaus.groovy.grails.web.context.GrailsContextLoaderListener 类的侦听器实例发送上下文初始化事件的异常

```
**org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'grailsApplication' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; nested exception is java.lang.VerifyError: (class: xls/Recruitment, method: initErrors signature: ()V) Unable to pop operand off an empty stack**

    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)

**Caused by: java.lang.VerifyError: (class: xls/Recruitment, method: initErrors signature: ()V) Unable to pop operand off an empty stack**

    at java.lang.Class.forName(Class.java:247)
    ... 5 more 
```

我正在使用 grails 2.0，例外中提到的招聘类是域类。

```
package xls

class Recruitment implements Serializable {

    String id
    String position
    String candidateName
    String noticePeriod
    String hrAgencyName
    String cellPhone
    String profileSourcingData
    String totalWorkExperience
    String emailAddress
    String currentCTC
    String expectedCTC
    String currentPosition
    String currentOrganisationName
    String communication
    String bankingOrFinancialDomainKnowledge
    String clientManagementExperience
    String reasonForChange
    String firstInterviewBy
    String secondInterviewBy
    String interviewStatus
    String offerDate
    String expectedDateOfJoining
    String joiningTeamName

    static constraints = {
         position(blank:true, nullable:true)
         candidateName(blank:true, nullable:true)
         noticePeriod(blank:true, nullable:true)
         hrAgencyName(blank:true, nullable:true)
         cellPhone(blank:true, nullable:true)
         profileSourcingData(blank:true, nullable:true)
         emailAddress(blank:true, nullable:true)
         totalWorkExperience(blank:true, nullable:true)
         currentCTC(blank:true, nullable:true)
         expectedCTC(blank:true, nullable:true)
         currentPosition(blank:true, nullable:true)
         currentOrganisationName(blank:true, nullable:true)
         communication(blank:true, nullable:true)
         bankingOrFinancialDomainKnowledge(blank:true, nullable:true)
         clientManagementExperience(blank:true, nullable:true)
         reasonForChange(blank:true, nullable:true)
         firstInterviewBy(blank:true, nullable:true)
         secondInterviewBy(blank:true, nullable:true)
         interviewStatus(blank:true, nullable:true)
         offerDate(blank:true, nullable:true)
         expectedDateOfJoining(blank:true, nullable:true)
         joiningTeamName(blank:true, nullable:true)
    }

    static mapping = {
            id generator:'assigned'

     }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-04T06:51:03.377

我在 Grails 2.2.0 应用程序中遇到了 java.lang.VerifyError，原因是 GSP 文件中注释掉的 Groovy 表达式显然使 Grails 缓存机制中断。删除注释掉的表达式解决了这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T05:53:58.803

请检查编译和部署 jar 之间的版本冲突，特别是`groovy-all.jar`

# java - java - 如何在不使用Java初始化的情况下将数组插入哈希表？

> ID：11594510
> 
> 赞同：3
> 
> 时间：2012-07-21T17:46:48.420
> 
> 标签：java, arrays, hash, initialization, hashmap

我有一个哈希图初始化如下：

```
Hashmap<String[][], Boolean> tests = new Hashmap<String [][], Boolean>(); 
```

我想插入测试而不必初始化密钥：

```
tests.put({{"a"}, {"a"}}, true); 
```

但是，Java 似乎不允许我这样做。如果我这样做，它会起作用：

```
String[][] hi = {{"a"}, {"a"}};
tests.put(hi, true); 
```

有没有办法避免后者并让前者工作？

有人也可以解释这个错误背后的原因吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T17:48:54.423

是的，你可以这样写：

```
tests.put(new String[][] {{"a"}, {"a"}}, true); 
```

这通常被称为*匿名数组*或*即时*数组。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-21T17:49:48.490

在您的情况下，您将不得不使用

```
tests.put(new String[][]{{"a"}, {"a"}}, true); 
```

因为正如你所注意到的`{{"a"}, {"a"}}`

```
String[][] hi = {{"a"}, {"a"}}; 
```

只能在创建对数组的引用时使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T19:35:41.637

这几乎绝对*不是*你想要的。

Java 中的数组从它们的引用标识中获取它们的相等性和哈希码`Object`——也就是说，基于它们的引用标识。所以：

```
String[] a = { "hello" }; // create one array
String[] b = { "hello" }; // create a different array with the same contents
assert a != b; // the two references are to different objects
assert ! a.equals(b); // they're not equal
assert a.hashCode() != b.hashCode(); // neither are their hashes (probably) 
```

`a`并且`b`不会相等，并且它们的哈希码几乎肯定不会相等，因为它们是不同的对象。这意味着，如果您使用数组作为哈希映射的键，您将无法使用键检索值，而是使用您创建它的确切键：任何其他数组都将具有不同的哈希码并且将不相等，因此不会被视为等效键。

解决方案是将 替换`String[][]`为`List<List<String>>`. 列表根据其内容定义相等和哈希码，因此包含 的列表`[ "hello" ]`等于包含 的任何其他列表`[ "hello" ]`：

```
List<String> x = Arrays.asList("hello");
List<String> y = Arrays.asList("hello");
assert x != y; // the two lists are different objects
assert x.equals(y); // but they're equal
assert x.hashCode() == y.hashCode(); // and so are their hash codes 
```

现在您可以将列表用作键。请记住，一旦列表成为地图的键，就不允许更改值。这样做可能会破坏哈希映射，因为列表的哈希码会发生变化，但映射不会知道它，因此映射会在错误的哈希桶中查找它。

这里最简单的选择是：

1.  确保没有其他人引用同一个 List 对象并且可能会更改它
2.  在将其放入地图之前创建 List 的深层副本（即复制“内部”列表以及“外部”列表）

对于第二个选项，它会是这样的：

```
// copy the outer list
List<List<String>> outerCopy = new ArrayList<List<String>>( originalList );
ListIterator<List<String>> listIterator = outerCopy.listIterator();
while (listIterator.hasNext()) {
    // make a copy of the inner list
    List<String> innerCopy = new ArrayList<String>( listIterator.next() );
    listIterator.set(innerCopy);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-21T17:48:42.957

您可以使用

```
tests.put(new String[][]{{"hello", "goodbye"},{"hi", "bye"}}, true); 
```

# php - 在 PHP 中生成随机值

> ID：11594512
> 
> 赞同：0
> 
> 时间：2012-07-21T17:47:03.823
> 
> 标签：php, arrays, encryption

在 php 方面我是一个新手，我想尝试一些东西，但我完全不知道我应该怎么做。老实说，我不确定是否可以很清楚地向你解释这个。让我们开始吧..

我有几个字母，例如 a、b、c、d 和 e..

对于它们中的每一个，我都有几个像这样的两个字符的值：

a -> fg, dz, gc, bg

b -> zt、hg、oq、vg、gb

c -> lt、pr、cs、sh、pr

d -> kt, nt, as, pr

e -> zd、ke、cg、sq、mo、ld

问题来了：

我想为每次获取一个随机值，例如：dcbae，为此，最终输出应该是这样的：ntshztdzld 或 asltvggcmo ..（在生成具有上述字符的随机字符串后（在 ae 之间），我应该生成另一个包含与每个字符相关的随机值的字符串。这不是作业或类似的东西。

提前感谢您的理解..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T17:53:05.937

好吧，您将首先创建一个地图：

```
$map = Array(
    "a" => Array("fg","dz","gc","bg"),
    "b" => Array("zt","hg","oq","vg","gb"),
    "c" => Array("lt","pr","cs","sh","pr"),
    "d" => Array("kt","nt","as","pr"),
    "e" => Array("zd","ke","cg","sq","mo","ld")
); 
```

我注意到您多次使用同一对“pr” - 如果您希望此编码是可逆的，请避免重复。

无论如何，一旦你有了它，就很容易遍历输入字符串并获得随机输出：

```
$input = "dcbae";
$len = strlen($input);
$output = "";
for( $i=0; $i<$len; $i++) {
    $entry = &$map[$input[$i]];
    if( isset($entry)) $output .= $entry[mt_rand(0,count($entry)-1)];
    else $output .= "??";
} 
```

`$output`是结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T17:54:24.703

```
<?php

// Setup matching values
$encpairs[ 'a' ] = array( 'fg', 'dz', 'gc', 'bg' );
$encpairs[ 'b' ] = array( 'zt', 'hg', 'oq', 'vg', 'gb' );
$encpairs[ 'c' ] = array( 'lt', 'pr', 'cs', 'sh', 'pr' );
// etc. etc.

// Define input string
$my_string = 'abc';

// To randomly build input string
$my_string = '';
$last_key = '';
$key = '';
$keys = array_keys( $encpairs );
$ttl_keys = count( $keys ) -1;

// Generate the input string at random; change "5" to length you desire
for ( $j=0; $j < 5; $j++ ){
    // Randomly select a key from $encpairs array (giving you one letter at random)
    // The while loop ensures no two letters are used consecutively
    while ( $key == $last_key ) {
        $key =$keys[ rand(0, $ttl_keys ) ];
    }
    $last_key = $key;
    $my_string .= $key;
}

// Determine input string length
$length = strlen( $my_string );

// Loop through each letter
$output = '';
for( $i=0; $i < $length; $i++ ){
    shuffle( $encpairs[ $my_string[$i] ] );
    $output.= $encpairs[ $my_string[$i] ][0]; // Added [0]
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T17:57:40.760

首先在循环外初始化第二个字符串。将原始字符串（要加密）转换为数组，然后遍历整个数组并附加到第二个字符串。所以你得到

```
$splitstr=str_split($original);
$final_string="";
$map=Array(/**/);
foreach($splitstr as $char)
{
  $final_string.=$map[$char][rand(0,count($map[$char])-1)];
}
return $final_string; 
```

# scala - 初始化 Scala ArrayBuffer 的惯用方法？

> ID：11594513
> 
> 赞同：9
> 
> 时间：2012-07-21T17:47:05.573
> 
> 标签：scala

我想`ArrayBuffer`在索引 0 到 99 中初始化一个值为 -1 的值。有没有一种简单、惯用的方法呢？

这行得通，但有点笨拙：

```
val a = new ArrayBuffer&#91;Int&#93;()<br>
a.appendAll(Nil.padTo(100, -1)) 
```

我希望看到更像这样的东西：

```
val a = ArrayBuffer(List(-1) * 100) 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-21T18:07:54.063

```
collection.mutable.ArrayBuffer.fill(100)(-1) 
```

# shell - 如何在ubuntu中管道命令

> ID：11594514
> 
> 赞同：1
> 
> 时间：2012-07-21T17:47:05.767
> 
> 标签：shell, ubuntu

在终端中编写命令时，如何在 Ubuntu 中通过管道传输命令及其结果。我会按顺序编写以下命令 -

```
$ ls | grep ab
abc.pdf
cde.pdf
$ cp abc.pdf cde.pdf files/ 
```

我想将第一个命令的结果通过管道传输到第二个命令中，并将它们全部写在同一行中。我怎么做 ？

就像是

```
$ cp "ls | grep ab" files/ 
```

（上面是一个人为的例子，可以写成`cp *.pdf files/`）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T17:48:36.740

使用以下内容：

```
cp `ls | grep ab` files/ 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-21T18:14:09.463

好吧，既然 xargs 人放弃了，我将提供我的 xargs 解决方案：

```
ls | grep ab | xargs echo | while read f; do cp $f files/; done 
```

当然，这种解决方案有一个明显的缺陷：文件中带有空格会导致混乱。

没有这个缺陷的 xargs 解决方案？唔...

```
ls | grep ab | xargs '-d\n' bash -c 'docp() { cp "$@" files/; }; docp "$@"' 
```

看起来有点笨拙，但它确实有效。我的意思是，除非您有包含退货的文件。然而，任何这样做的人都应该得到他们所得到的。即使这是可以解决的：

```
find . -mindepth 1 -maxdepth 1 -name '*ab*' -print0 | xargs -0 bash -c 'docp() { cp "$@" files/; }; docp "$@"' 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-21T20:31:53.703

要使用 xargs，您需要确保文件名参数是传递给 cp 命令的最后一个参数。`-t`您可以使用cp 选项来指定目标目录来完成此操作：

```
ls | grep ab | xargs cp -t files/ 
```

当然，即使这是一个人为的示例，您[也不应该解析 ls 的输出](http://mywiki.wooledge.org/ParsingLs)。

# python - 从列表到其他列表的 Python 项目：奇怪的结果

> ID：11594520
> 
> 赞同：0
> 
> 时间：2012-07-21T17:48:04.613
> 
> 标签：python, list, append

我正在尝试将项目从一个列表转移到另一个列表（如下所示），但结果确实令人费解。有谁知道这里发生了什么？

```
l1=range(1,11)
l2=[]
for i in l1:
    if i>=6:
        l2.append(i)
        l1.remove(i)
print l1
print l2

l1 = [1-5, 7, 9] # and
l2 = [6, 8, 10]  # !! 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T17:50:37.480

问题是由于您正在修改您正在迭代的列表。

如果你在 SO 上搜索，你会发现很多关于这个的帖子。例如，[在迭代时修改列表](https://stackoverflow.com/questions/1637807/modifying-list-while-iterating)，[Python：在迭代列表时删除列表元素](https://stackoverflow.com/questions/6022764/python-removing-list-element-while-iterating-over-list)等

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T17:51:15.443

你不应该修改你正在迭代的列表，否则你会得到奇怪的结果。这就像砍掉你坐的树枝。如何基于创建两个列表`l1`？

```
big = [x for x in l1 if x >= 6]
small = [x for x in l1 if x < 6] 
```

更好的是，如果您关心性能：

```
big = []
small = []

for item in l1:
    if item >= 6:
        big.append(item)
    else:
        small.append(item) 
```

# mysql - Mysql 在可变时间范围内的最大行数

> ID：11594522
> 
> 赞同：1
> 
> 时间：2012-07-21T17:48:33.533
> 
> 标签：mysql, date, count, timestamp

我正在制作一个健身日志，室内划船者可以在那里记录结果。为了让它变得有趣和激励，我正在实施一个成就系统。我喜欢有一个成就，如果有人在 24 周内划船超过 90 次，他们就会获得该成就。

是否有人对我如何在 MYSQL 中实现这一点有一些提示。日志的 mysql 表非常简单：id、用户 ID、日期（时间戳）等（省略其余部分，因为它并不重要）

要点是第一个行日期和最后一个行日期不能超过 24 周。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T17:58:52.797

我从您的申请中假设您想要最近的 24 周。

在 mysql 中，您可以这样做：

```
select lb.userid
from logbook lb
where datediff(now(), lb.date) >= 7*24
group by userid
having count(*) >= 90 
```

如果您在任意 24 周内需要它，您可以修改问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T17:57:53.420

只需执行 sql 查询来计算用户从现在到 24 周前的行数。这是一个非常直接的查询。

看看在 mysql 中使用一些东西`datediff`来获得现在和 24 周前之间的差异。

在你设置了一个脚本来执行此操作后，设置一个 cron 作业以每天或每周运行并对此进行一些自动化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T18:03:29.627

我认为您应该创建一个表格成就者，并在其中填充每天的成就者。您可以设置一个经常性（每天，在午夜之前）事件，您可以在其中运行如下查询：

```
 delete from achievers;

 insert into achievers (
 select userid
 from logbook
 where  date < currenttimestamp and date > currenttimestamp - 24weeks
 group by userid 
 having count(*) >= 90
 ) 
```

对于 mysql 中的事件：http: [//dev.mysql.com/doc/refman/5.1/en/events-overview.html](http://dev.mysql.com/doc/refman/5.1/en/events-overview.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T18:04:59.093

此查询将为您提供 24 周内的用户总活动列表

```
 select * from table groupby userid where  `date` BETWEEN DATE_SUB( CURDATE( ) ,INTERVAL 168 DAY ) AND CURDATE( ) having count(id) >= 90 
```

# algorithm - 算法 - 将图像扭曲到另一张图像并计算相似度度量

> ID：11594523
> 
> 赞同：3
> 
> 时间：2012-07-21T17:48:34.890
> 
> 标签：algorithm, opencv

我有一个关于通过基于强度的配准计算一张图像与另一张图像的最佳匹配点的查询。我想对我的算法发表一些评论：

1.  在此迭代中计算扭曲矩阵

2.  对于图像 A 的每个点，

    2a. 我们将特定图像 A 的像素坐标与变形矩阵变形为图像 B

    2b。如果扭曲点坐标在图像 B 中，则进行插值得到对应的强度形式图像 B。

    2c。计算扭曲像素 A 强度和扭曲图像 B 强度之间的相似性度量值

3.  循环遍历图像 A 中的每个像素

4.  循环遍历所有可能的旋转和平移

这样可以吗？有没有我们可以参考的相关opencv代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T21:22:25.150

# 算法评论

您的算法看起来不错，但您必须小心：

1.  边缘效应：您需要确保算法不支持大多数图像 A 不与图像 B 重叠的匹配。例如，您可能希望计算平均相似性度量并约束转换以确保至少 50% 的像素重叠。

2.  计算复杂度。可能有很多可能的平移和旋转需要考虑，而且这个算法在实践中可能太慢了。

3.  经线类型。根据您的应用程序，您可能还需要考虑透视/照明更改以及平移和旋转。

# 加速

视频编码器中通常使用类似的算法，尽管大多数会忽略旋转/透视变化而只搜索平移。

一种非常常用的方法是对最佳匹配进行梯度搜索。换句话说，尝试以几种不同的方式调整平移/旋转（例如左/右/上/下 16 个像素）并选择最佳匹配作为新的起点。然后重复这个过程几次。一旦您无法改进匹配，请减小调整的大小并重试。

# 替代算法

根据您的应用程序，您可能需要考虑一些替代方法：

1.  立体声匹配。如果您的 2 张图像来自立体相机，那么您只需要在一个方向上搜索（OpenCV 提供了有用的[方法](http://opencv.willowgarage.com/documentation/camera_calibration_and_3d_reconstruction.html#findstereocorrespondencegc)来做到这一点）

2.  已知模式。如果您能够在两个图像中放置一个已知模式（例如棋盘），那么注册它们会变得容易得多（并且 OpenCV 提供了查找和注册某些类型的模式的[方法）](http://opencv.willowgarage.com/documentation/camera_calibration_and_3d_reconstruction.html#findchessboardcorners)

3.  特征点匹配。图像配准的常用方法是搜索特征点（例如角的类型或更一般的兴趣点），然后尝试在两幅图像中找到匹配的特征点。例如，OpenCV 包含检测[SURF](http://opencv.willowgarage.com/documentation/feature_detection.html#extractsurf)特征的函数。谷歌发表了[一篇](http://research.google.com/pubs/pub37744.html)关于使用这种方法来消除滚动快门噪音的精彩论文，我推荐阅读。

# google-apps-script - 如何格式化可以使用电子表格中的数据复制/粘贴到任何地方的文本

> ID：11594535
> 
> 赞同：0
> 
> 时间：2012-07-21T17:49:39.073
> 
> 标签：google-apps-script

我在电子表格上有一个数据库程序，其中的数据按行和列经典排序，我正在处理的是一个 UI，它允许用户搜索数据库并显示如下所示的结果。“表格”显示了结果和可滚动表格中的 15 个下一个项目，其中包含最重要的数据和底部的文本区域，该文本区域应包含**所选项目**的格式，我可以在保持布局的同时复制和粘贴到任何文档中（新行，间距...）。注意：脚本还应该检测表格中的哪一行具有焦点。此文本区域应提供 2（目前）所谓的“格式”，一个用于屏幕截图中显示的字母，第二个用于几行上的所有字段（逗号或制表符分隔）（我称之为“原始数据” '

我设法执行搜索、表格填充和 UI 设计，但是（*这里终于是实际问题*）我不确定如何在 textarea 中获取格式化文本...我应该使用 HTML 吗？

下面是我现在使用的屏幕截图和 UI 代码，我想这张图片让事情更清楚了，至少我希望 ;-) ![在此处输入图像描述](../Images/dd23e9075a9ab8e403accbdbaad3ef25.png)

```
function buildUi() {
   var app = UiApp.createApplication().setTitle("BrowseList Test")
       .setHeight(340).setWidth(800).setStyleAttribute("background-color","beige").setStyleAttribute('padding','20');
    var scroll = app.createScrollPanel().setPixelSize(750,150)
    var vpanel = app.createVerticalPanel();
    var cell = new Array();
    var cellWidth = [45,135,150,250,50,100]
    var row = new Array();
    for(vv=0;vv<15;++vv){
      row[vv]=app.createHorizontalPanel();
      vpanel.add(row[vv]);
       for(hh=0;hh<cellWidth.length;++hh){
        cell[hh+(vv)*cellWidth.length]=app.createTextBox().setWidth(cellWidth[hh]+"");
        row[vv].add(cell[hh+(vv)*cellWidth.length])
        }
      }
app.add(scroll.add(vpanel))
// Initial populate
var data = ss.getDataRange().getValues();
    for(vv=0;vv<15;++vv){
       for(hh=0;hh<cellWidth.length;++hh){
         var rowpos=vv+1+offset
         var cellpos = hh+(vv)*cellWidth.length
        cell[cellpos].setValue(data[rowpos][hh])
        }
      }
  var grid = app.createGrid(2,9).setWidth('700')
  grid.setWidget(1, 0, app.createLabel('search'));
  grid.setWidget(1, 1, app.createTextBox().setName('search').setId('search'));
  grid.setWidget(1, 2, app.createRadioButton('mode','strict'));
  grid.setWidget(1, 3, app.createRadioButton('mode','global').setValue(true));
  grid.setWidget(1, 5, app.createLabel(' ').setWidth('100'));
  grid.setWidget(1, 6, app.createLabel('show mode'));
  grid.setWidget(1, 7, app.createRadioButton('show','letter').setValue(true));
  grid.setWidget(1, 8, app.createRadioButton('show','raw data'));
  app.add(grid);

  var result = app.createTextArea().setPixelSize(700,100)
  app.add(result)

ss.show(app);
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T06:52:40.390

您是否考虑过[富文本区域](https://developers.google.com/apps-script/class_richtextarea)？并使用 setHTML 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T19:39:35.440

为什么不创建一个弹性表来保存您的搜索结果。将其更改为所需的格式（使用逗号）并通过 ScriptProperties 存储，您可以复制/粘贴。

# php - PHP 中的 Javascript 警报框。弹出警报弹出时删除灰色/白色背景

> ID：11594539
> 
> 赞同：0
> 
> 时间：2012-07-21T17:49:53.800
> 
> 标签：php, javascript

现在我得到的是脚本，在填写 index.php 的表单后，在正确的登录信息后提示“您已成功登录”...

在我的 check_login.php 这些是脚本......到目前为止

```
if($count['user_type']== "agent"){

session_register("myusername");
session_register("mypassword");

echo '<script type="text/javascript">window.onload = function() {
alert("You have logged in successfully!\n");}</script>';
echo "<meta http-equiv=\"refresh\" content=\"0;URL=pages/agent.php\">";
exit();
//header("location:pages/agent.php");
}
if ($count['user_type']== "moderator"){

session_register("myusername");
session_register("mypassword");
header("location:pages/moderator.php"); 
}
else {
echo "<script type='text/javascript'>alert('Invalid Login! Please Try Again!');</script>";
echo "<meta http-equiv=\"refresh\" content=\"0;URL=index.php\">";
} 
```

警报框完全可以工作，但是..我希望它在背景仍然可见时弹出（index.php），然后单击“确定”...它将重定向到我的代码中的页面->到“代理” .php"

我用了

```
echo "<meta http-equiv=\"refresh\" content=\"0;URL=pages/agent.php\">"; 
```

重定向成功登录的用户..

但在重定向过程之前......我希望用户看到一个警报框。

我的观点是，如何在背景仍然可见的情况下让警报框自行弹出。我注意到在 Firefox 中它是灰色 bg 而在 Chrome 中等等...... bg 是白色的......

请帮忙。提前致谢：|

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T18:30:52.893

我认为没有办法改变默认警报框的外观和感觉，但谁说你不能自己制作。

随意根据需要修改它。它基本上是一个自定义警报函数，它接受两个参数，即消息和一个回调函数，当警报被“确定”按钮解除时执行。

```
function customAlert(m,func){
  var d=document, 
      c=d.createElement('div'),
      e=d.createElement('div'), 
      f=d.createElement('div'),
      a=d.createElement('button');
      c.style.cssText = 'background:#fff;width:200px;height:100px;border:1px solid #bbb;border-radius:6px;position:absolute;z-index:999;top:25%;left:25%;font:13px arial;box-shadow:0 0 10px #ccc;';
      e.style.cssText = 'background:#ccc;padding:5px;border-bottom:1px solid #aaa;';
      f.style.cssText = 'text-align:center;padding:10px;';
      a.style.cssText = 'display:block;margin:0 auto;padding:2px 8px;';
      a.innerText = 'Ok';
      a.onclick = function(){
        d.body.removeChild(c);
        func();
      }
      e.innerHTML = '<b>Alert</b>';
      f.innerHTML = m;
      c.appendChild(e);
      c.appendChild(f);
      c.appendChild(a);
      d.body.appendChild(c);
      return false;
}

customAlert('some message',function(){
  /*code to do when they click OK*/
 location.href='pages/agent.php';
});​ 
```

请参阅此处的示例：http: [//jsfiddle.net/E6h8C/](http://jsfiddle.net/E6h8C/)

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T18:32:20.687

警报弹出窗口通常会延迟页面加载。使用原始的 alert() 函数没有任何解决方案。

# java - 坚持使用带有返回 id 的存储过程

> ID：11594550
> 
> 赞同：0
> 
> 时间：2012-07-21T17:51:30.913
> 
> 标签：java, hibernate, postgresql, jpa

PostgreSQL 9.1，休眠 4.1。

如何使用存储过程持久保存 PropertyTypeEntity（返回 id.GenerationType.IDENTITY 中的问题）
不可能？

```
@Table(name = "property_types", schema = "public", catalog = "")
@Entity
public class PropertyTypeEntity implements IEntity<Long> {

  @Id
  @GeneratedValue(strategy = GenerationType.IDENTITY)
  private Long id;

  ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T18:08:06.107

至少有以下两种方式：

1.  使用[SQLInsert](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/annotations/SQLInsert.html)，虽然我不知道 JPA 注释是否存在互操作性问题
2.  创建自定义生成器，可以从[这篇](http://danu-javastuff.blogspot.de/2009/01/custom-id-generator-class-for-hibernate.html)博文中找到一些示例。

# javascript - 这个关键字在 Safari 与 Chrome、Firefox、IE 中具有选择框 onchange 属性

> ID：11594554
> 
> 赞同：0
> 
> 时间：2012-07-21T17:52:06.567
> 
> 标签：javascript, safari, this, drop-down-menu, selectedindex

在 Chrome 20、FF 13、IE 9、Safari 5.1.7 中测试。

谁能告诉我为什么以下代码在 Chrome、Firefox 和 IE 中有效，但在 Safari 中无效？

```
<select id="mySelectBox" onChange="window.open(options[selectedIndex].value);">
<option value="" selected="selected" >Choose a search engine.</option>
<option value="http://www.google.com" >Google</option>
<option value="http://www.bing.com" >Bing</option>
<option value="http://www.yahoo.com" >Yahoo</option>
</select> 
```

我的感觉是 Safari 正在做正确的事情。如果不使用 this 关键字或更详细的 document.getElementById('mySelectBox')，我应该无法引用 options 属性和 selectedIndex 属性。

这是怎么回事？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T18:09:17.720

如果您选中了 Safari 的“阻止弹出窗口”设置，这将阻止它工作。

# objective-c - alloc方法的Objective C逻辑？

> ID：11594557
> 
> 赞同：0
> 
> 时间：2012-07-21T17:52:30.743
> 
> 标签：objective-c

所以我是这个网站的新手，不太确定如何提出问题的约定是什么，但我只是从 Objective-C 开始，并且有一个与对象实例化有关的问题。

好的，所以我知道根类 NSObject 有类方法 alloc 和 init，这些方法被传递给任何继承 NSObject 的类，这几乎是每个类。我知道实例化对象的典型格式是这样的：

`MyObject *m = [[MyObject alloc]init];`

但是考虑到 MyObject 具有从 NSObject 继承的 alloc 和 init 方法，这在理论上也可以工作，考虑到 MyObject 和 NSObject 具有相同的 alloc 和 init 方法（假设该类没有覆盖它们）：

`MyObject *m = [[NSObject alloc] init];`

它仅适用于实例化，但是当我尝试调用 MyObject 类中的任何方法时，会引发 NSException。当我将 NSObject alloc 切换回 MyObject alloc 时，它可以工作。我只是不明白为什么！这可能是一个基本问题，但有什么解释吗？

提前致谢！

杰克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T17:56:52.880

逻辑是一样的，但是传递给消息实现的类对象`alloc`不一样。在第一种情况下，编译器将您的代码转换为：

```
objc_msgSend([MyObject class], @selector(alloc)]; 
```

因此 alloc 的实现创建了一个类的实例`MyObject`。但是，如果你写`[NSObject alloc];`它会变成

```
objc_msgSend([NSObject class], @selector(alloc)]; 
```

所以创建了一个普通的 NSObject 实例，它显然不会响应你的类的消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T17:55:46.683

```
[[NSObject alloc] init] 
```

创建一个 NSObject，不管你是否将它分配给另一个类型的变量，所以这样做没有多大意义`MyObject *m = [[NSObject alloc] init];`，而做类似的事情可能有意义`MyClass *obj = [[MySubClass alloc ] init];`，因为 MySubClass 也是 MyClass。

# iphone - 对于 iOS 应用程序，如何使用 Instruments 的内存监视器来绘制应用程序的内存使用情况？

> ID：11594558
> 
> 赞同：2
> 
> 时间：2012-07-21T17:52:33.683
> 
> 标签：iphone, ios, ipad, instruments

似乎我们应该更多地依赖 Instruments 的“内存监视器”（通过查看应用程序的“实际内存”编号），而不是“分配”来告诉应用程序的实际内存使用情况，正如[在这个问题中](https://stackoverflow.com/questions/5518918/instruments-with-ios-why-does-memory-monitor-disagree-with-allocations)所讨论的那样。

但是对于Allocations，我们可以暂停Instruments，然后点击时间刻度条得到一个倒三角形，拖动它可以看到“Live bytes”的最高数量来告诉峰值分配大小——如何关于内存监视器，有没有办法绘制我们正在查看的应用程序，并能够判断内存使用量的峰值是多少？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-24T19:13:10.363

在 Instruments 中，尝试使用**"Activity Monitor"**，这将显示您的应用正在使用多少内存。

# jquery - 不管我做什么，锚链接一直在跳

> ID：11594560
> 
> 赞同：2
> 
> 时间：2012-07-21T17:52:50.617
> 
> 标签：jquery, html, anchor, page-jump

好吧，这快把我逼疯了！

我正在使用“类似标签”的子菜单来显示 3 个不同的表格。此子菜单中的每个链接隐藏当前内容并显示另一个内容。

**注意：**现在我将留下一个指向[我正在处理](http://wp.publishyours.com.br/publishyours/planos-custos)的页面的直接链接，以便您可以自己检查问题。

为了避免`<a>`（锚）跳跃，我已经在尝试`<a onclick="return false;">`（这在我拥有的另一个站点中运行良好）。在我的 jQuery 代码中，我还使用了“e.preventDefault();” 这有助于避免跳转到页面顶部，但即使使用它，页面也总是会跳转到子链接上方的页面的某些部分。

我真的不知道我还能做些什么来避免这种跳跃。

现在这就是我在我的 html 中的内容：

```
<nav id="submenu" class="menu">
<ul>
    <li class="current-menu-item"><a onclick="return false;" href="#" rel="statics">Sites Estáticos</a></li>
    <li><a onclick="return false;" href="#" rel="dynamics">Sites Dinâmicos</a></li>
    <li><a onclick="return false;" href="#" rel="extras">Serviços Extras</a></li>
</ul> 
```

这是我的 jQuery：

```
function subSections(){
$('nav.menu li a').click(function(e){
    e.preventDefault(); //this helps, but don't solve the problem
    var active = $(this).parent();
    var currSection = $(this).attr('rel');
    if(active.hasClass('current-menu-item')!=true){
        // Add and remove 'current-menu-item' class
        $('nav.menu .current-menu-item').removeClass('current-menu-item');
        active.addClass('current-menu-item');
        // Hide currentSection and Show the clicked one
        $('.showing').fadeOut('slow', function(){
            $('#'+currSection).fadeIn('slow').addClass('showing');
        }).removeClass('showing');
    }
}); 
```

}

此外，也许有更好的方法来做这种“显示和隐藏”的东西，但这似乎工作正常。好吧，如果有人能阐明这个问题并帮助我，我会很高兴！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T18:38:34.177

使用[`.show()`](http://api.jquery.com/show/)and[`.hide()`](http://api.jquery.com/hide/)代替`.fadeIn()`and `.fadeOut()`。

如果你想保留动画，你可以尝试`.show('slow')`，`.hide('slow')`但这也可能引发跳跃问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-09T13:09:00.537

此外，只是为了稍微重构代码并节省一些输入（并使脚本更加动态），您不需要`onclick="return false;"`在每个 html 链接上编写。只需将 return false 放在 jQuery 中 .click 函数的末尾即可。

```
function subSections(){
$('nav.menu li a').click(function(e){
    e.preventDefault(); //this helps, but don't solve the problem
    var active = $(this).parent();
    var currSection = $(this).attr('rel');
    if(active.hasClass('current-menu-item')!=true){
        // Add and remove 'current-menu-item' class
        $('nav.menu .current-menu-item').removeClass('current-menu-item');
        active.addClass('current-menu-item');
        // Hide currentSection and Show the clicked one
        $('.showing').fadeOut('slow', function(){
            $('#'+currSection).fadeIn('slow').addClass('showing');
        }).removeClass('showing');

    // Return false for all links in the nav onclick
    return false;

    }
}); 
```

# objective-c - UIButton图像动画

> ID：11594564
> 
> 赞同：1
> 
> 时间：2012-07-21T17:53:45.170
> 
> 标签：objective-c, animation, uibutton

你好，

我正在尝试在两个不同图像之间为 UIButton 的图像设置动画。

假设我有两个正方形图像，红色，黑色。

当我触摸我的按钮时，我希望 uibutton 的图像以流畅的动画从两个图像中循环。

循环动画必须在用户按下按钮时开始，并在他触摸向上或拖动退出时取消。

这是我现在要做的：

```
-(void)startAnimation:(UIButton *)obj {
    [UIView animateWithDuration:1 delay:0 options:(UIViewAnimationOptionAutoreverse | UIViewAnimationOptionRepeat) animations:^{
        [obj setAlpha:0];
        [obj setImage:[UIImage imageNamed:@"animated_on"] forState:UIControlStateNormal];
        [obj setImage:[UIImage imageNamed:@"animated_on"] forState:UIControlStateHighlighted];
        [obj setImage:[UIImage imageNamed:@"animated_on"] forState:UIControlStateDisabled];
        [obj setImage:[UIImage imageNamed:@"animated_on"] forState:UIControlStateSelected];
    } completion:^(BOOL finished) {
        [obj setAlpha:1];
        [obj setImage:nil forState:UIControlStateNormal];
        [obj setImage:nil forState:UIControlStateHighlighted];
        [obj setImage:nil forState:UIControlStateDisabled];
        [obj setImage:nil forState:UIControlStateSelected];        

    }];   
}

-(void)stopAnimation:(UIButton *)obj {
   [obj.layer removeAllAnimations]; 
}

- (void)touchDownAnimation:(id)obj {    
    [self startAnimation:obj];
}

- (void)dragEnterAnimation:(id)obj {
    [self startAnimation:obj];
}
- (void)dragExitAnimation:(id)obj {
    [self stopAnimation:obj];
}

- (void)touchUpInsideAnimation:(id)obj {
    [self stopAnimation:obj];
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    CGRect frame = CGRectMake(110, 180, 100, 100);

    UIImageView *animatedButtonBackground = [[UIImageView alloc] initWithFrame:frame];
    [animatedButtonBackground setImage:[UIImage imageNamed:@"animated_off"]];

    [self.view addSubview:animatedButtonBackground];

    UIButton *animatedButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [animatedButton setFrame:frame];

    [animatedButton addTarget:self action:@selector(touchDownAnimation:) forControlEvents:UIControlEventTouchDown];
    [animatedButton addTarget:self action:@selector(dragEnterAnimation:) forControlEvents:UIControlEventTouchDragEnter];
    [animatedButton addTarget:self action:@selector(dragExitAnimation:) forControlEvents:UIControlEventTouchDragExit];    
    [animatedButton addTarget:self action:@selector(touchUpInsideAnimation:) forControlEvents:UIControlEventTouchUpInside];

    [self.view addSubview:animatedButton];

} 
```

它有点工作，但在这个过程中涉及一个 UIImageView 看起来像一个坏技巧来做我想做的事......

我正在寻找更清洁的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:37:32.227

想知道你是否可以使用更简单的东西：

```
button.imageView.animationImages = [NSArray arrayWithObjects:
                                    [UIImage imageNamed:@"image1"],
                                    [UIImage imageNamed:@"image2"],
                                    nil];
button.imageView.animationDuration = 1;
[button.imageView startAnimating]; 
```

# php - 在表格中插入特殊字符

> ID：11594565
> 
> 赞同：-1
> 
> 时间：2012-07-21T17:53:55.593
> 
> 标签：php, joomla

任何人都可以帮助我，

我有一个表格，当我在数据库中插入记录时，如果我的字符串中有一些特殊字符，那么我的字符串会在数据库字段中中断。喜欢。

INSERT INTO pbdata (id,title,title1) VALUES ('111','statt Josephshöfer kabinett feinherb 2008','Weis');

如果我像这样插入，那么在数据库字段上它唯一的插入记录

111 statt约瑟夫什韦斯

缺少字符 = öfer kabinett feinherb 2008

请帮我

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T18:21:32.490

这不是一个完整的答案，但您应该尝试启用 unicode 支持或 UTF-8 并以这种格式发送请求。这可能是一个烦人的问题，需要根据您想要执行的操作来配置数据库。

您遇到此类问题的问题是：您以什么格式显示数据（rtf8，unicode？），您在 PHP 中使用什么格式，以及要支持的数据库集。

如果你用谷歌搜索 UTF8、mysql、PHP、Joomla，你应该找到更具体的例子，比如： http: [//ostraining.com/howtojoomla/how-tos/development/utf-8-in-joomla](http://ostraining.com/howtojoomla/how-tos/development/utf-8-in-joomla)

# ios - 您如何表示 Core Data 中的缺失值？

> ID：11594566
> 
> 赞同：0
> 
> 时间：2012-07-21T17:54:00.120
> 
> 标签：ios, core-data, nsnumber

你用什么来存储 Core Data 中的缺失值状态？以前我使用 NSString 并将数字存储为字符串，即@“10.25”。而且我总是在进行任何数值计算之前对其进行转换。缺失值只是用@"" 设置的。但是我继续前进，并想选择一个原始的 Numeric 类型来存储，我无法指出该值丢失。你有什么主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T10:07:20.750

我在条目中添加了一个“空”属性，它的类型是 BOOL，我只是修改了代码中的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T20:49:24.073

您可以将属性设置为可选，然后您不必给它一个特定的值。这是默认行为，因此您应该已经能够做到这一点。

# javascript - 如何使用 Eclipse 和 Jquery 使用 Aptana

> ID：11594569
> 
> 赞同：3
> 
> 时间：2012-07-21T17:54:15.047
> 
> 标签：javascript, eclipse, aptana

嗨，我有 Eclipse Indigo Java EE，我最近知道 Aptana 可用于 JavaScript 开发，并且还有 Jquery 和 Eclipse。在 Eclipse 中安装 Aptana 后，有人可以帮我如何使用 Aptana（帮助->安装新软件）。我需要一些我应该遵循的步骤才能让它工作吗？

以及如何让 Eclipse 和 Aptana 使用 Jquery。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T18:16:43.800

Aptana 只是向 Eclipse 添加了新的编辑器，默认情况下应该根据您正在打开的文件的文件扩展名使用它。如果您想明确控制使用哪个编辑器，请右键单击文件并选择“打开方式”（然后选择您要使用的编辑器）。

如果您想更改给定文件扩展名默认使用的编辑器，请转到 General => Editors => File Associations 的首选项（您还可能希望查看 General => Content Types，因为它相关）。

# visual-c++ - 如何为 MFC 中的多个按钮编写一个消息处理程序？

> ID：11594570
> 
> 赞同：3
> 
> 时间：2012-07-21T17:54:20.897
> 
> 标签：visual-c++, mfc

我有一些按钮，我想为所有按钮编写一个消息处理程序。有什么方法可以找出点击了哪个按钮？在 C# 中，有一个参数（发送者），MFC 有类似的东西吗？还是我必须为所有按钮单独编写相同的消息处理程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T20:10:52.047

最好的选择可能是给所有按钮连续的 ID 号，然后使用 ON_COMMAND_RANGE(FIRST_BUTTON_ID, LAST_BUTTON_ID, HandlerFunction)。然后 HandlerFunction 将采用 UINT nID ，这将是调用处理程序的按钮的 ID 号。更多信息[在这里](http://msdn.microsoft.com/en-us/library/9ab3z9tb%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T21:24:26.493

对于典型的 WM_COMMAND 消息，消息的 lParam 成员应该保存发送者的 HWND——如果发送者是一个窗口。正如@Redeye 回答的那样，您可以将所有按钮放在一个范围内，并在消息表中写入一个 ON_COMMAND_RANGE() 条目和一个 OnCommand(UINT nCmd) （或您命名的任何名称）作为窗口、对话框、视图的成员函数、框架或文档类。按钮不一定要在一个范围内。您可以为每个按钮 ID 放置一个条目作为`ON_COMMAND_RANGE(IDC_BUTTON1, IDC_BUTTON1)`-- 或任何标识符。对于该宏来说，并没有规定开始和停止范围必须不同。

您可以编写自己的消息破解宏，它基本上完成了 ON_COMMAND_RANGE() 的工作，但只需要一个条目。

您还可以在处理程序中调用 CWnd::GetCurrentMessage() 并在处理程序中对其进行破解以检索命令。消息的 wParam 成员的 LOWORD 保存控制标识符。消息的 lParam 成员持有发送控件 HWND——如果它是一个窗口。对于工具栏之类的东西，工具栏按钮不是真正的按钮，而是由工具栏绘制的，因此 lParam 将始终是工具栏的 HWND。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T11:03:34.817

如果我正确理解了这个问题，这很简单：在属性编辑器中分配 OnCommand 事件时，不要再次单击（并让向导添加另一个消息处理程序，而是选择现有处理程序之一。如果你不能做到这一点工作（不知道你的VStudio版本和设置），你可以手动做：正常创建新的处理程序，保存，然后进入.cpp和.h文件，删除类头中的声明和实现.cpp 文件，转到消息映射并更改 ON_COMMAND 条目，以便它使用现有（旧/通用）处理程序。对于 ON_UPDATE_UI 处理程序也非常有用，其中可能存在多个 UI 对象（菜单项、工具栏按钮等）基于相同条件启用/禁用/检查/等（因此可以对它们进行分组并为所有处理程序提供一个处理程序，instrad 每个处理程序一个处理程序）。

编辑：也许我错了，如果问题只是关于未解决的外部问题，OnSignButton() 是作为 CTabTwo 的成员实现的吗？如果您发布的实现（代码）在类声明之外，那么它不是。将其声明为 void CTabTwo::OnSignButton(UINT ID)...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-31T15:46:53.447

刚好看到这个帖子。这是另一种方法吗？使用虚函数 OnCommand。

```
BOOL CKeyboard::OnCommand(WPARAM wParam, LPARAM lParam) 
{
// TODO: Add your specialized code here and/or call the base class
// 
if (HIWORD(wParam)==BN_CLICKED) 
{ 
switch(LOWORD(wParam)) 
{ 
case IDC_BUTTON1: 
break; 
case IDC_BUTTON2: 
break; 
case IDC_BUTTON3: 
break; 
} 
} 
return CView::OnCommand(wParam, lParam); 
} 
```

# javascript - 在 Firefox Addon 中获取当前浏览器 url

> ID：11594576
> 
> 赞同：7
> 
> 时间：2012-07-21T17:54:45.227
> 
> 标签：javascript, firefox, firefox-addon

我在一个面板中，我想获取当前的浏览器 URL。到目前为止没有任何效果。这是我测试过的：

唯一甚至返回任何东西的东西，我得到类似的东西`resource://jid0-18z0ptaugyu0arjkaoywztggyzg-at-jetpack/`，然后是我当前的面板资源。显然这是一个范围问题，但我不知道如何引用实际的浏览器。

```
window.location.href 
```

我已经在最大的 Stack Overflow 线程中尝试了所有内容：[Get current page URL from a firefox sidebar extension](https://stackoverflow.com/questions/410411/get-current-page-url-from-a-firefox-sidebar-extension)。他们都没有返回任何东西。

如果有帮助，我正在使用 Firefox Addon Builder。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2018-01-25T16:12:47.187

## 从侧边栏或弹出窗口获取 URL

要从[侧边栏或弹出窗口中检索 URL，需要选项卡权限](https://developer.mozilla.org/en-US/Add-ons/WebExtensions/API/tabs)

```
"permissions": [
    "tabs"
  ] 
```

那么你需要找到你想要的标签。如果您只想要活动选项卡，这可以正常工作，[对于更高级的内容，我会在这里查看](https://developer.mozilla.org/en-US/Add-ons/WebExtensions/API/tabs/query)。

```
function getPage(){
  browser.tabs.query({currentWindow: true, active: true})
    .then((tabs) => {
      console.log(tabs[0].url);
  })
} 
```

## 从注入的 javascript 中获取 URL

如果您想要后台任务的 URL，我建议您使用此方法，因为您不需要权限。

这将为您提供一个后台脚本，然后将脚本注入互联网上的几乎所有网页。

```
"background": {
    "scripts": ["background.js"]
},

"content_scripts": [
    {
      "matches": ["https://www.*"],
      "js": ["modify-page/URL.js"]
    }
  ], 
```

这将通过 URL js 注入到网页中，并向您的后台 js 发送消息以供使用。

```
var service= browser.runtime.connect({name:"port-from-cs"});

service.postMessage({location: document.URL}); 
```

此代码在您的后台 js 中，并将在每个新页面的 url 更改时收集它。

```
var portFromCS;

function connected(p) {
  portFromCS = p;
  portFromCS.onMessage.addListener(function(m) {
    if(m.location !== undefined){
      console.log(m.location);
    }
  });
}

browser.runtime.onConnect.addListener(connected); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-21T21:07:23.323

```
// you need to use this service first
var windowsService = Components.classes['@mozilla.org/appshell/window-mediator;1'].getService(Components.interfaces.nsIWindowMediator);

// window object representing the most recent (active) instance of Firefox
var currentWindow = windowsService.getMostRecentWindow('navigator:browser');

// most recent (active) browser object - that's the document frame inside the chrome
var browser = currentWindow.getBrowser();

// object containing all the data about an address displayed in the browser
var uri = browser.currentURI;

// textual representation of the actual full URL displayed in the browser
var url = uri.spec; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T05:57:31.827

我相信使用 SDK 中的 API`tabs`可以做到这一点：

```
// Get the active tab's title.
var tabs = require("tabs");
console.log("title of active tab is " + tabs.activeTab.title); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-21T20:49:50.030

API 显示，为了检索当前选项卡 URL

```
 var URL = require('sdk/url').URL;
   var tabs = require('sdk/tabs');
   var url = URL(tabs.activeTab.url);

   console.log('active: ' + tabs.activeTab.url); 
```

这将打印到控制台：“ active: [http://www.example.com](http://www.example.com) ”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-21T18:19:00.277

**window**为您提供当前窗口。 **top**给你最外层的框架。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-15T09:15:53.030

对于插件，您可以使用以下代码从地址栏中获取 URL

Javascript代码：

```
function Doit(){
   var link = window.top.getBrowser().selectedBrowser.contentWindow.location.href;
   alert (link); 
} 
```

HTML 代码：

```
<div onclick = "Doit()">Generate URL</div> 
```

这将生成在浏览器的当前选项卡上显示的 URL。

# c# - C#中的客户端-服务器opc ua

> ID：11594579
> 
> 赞同：1
> 
> 时间：2012-07-21T17:55:00.683
> 
> 标签：c#, client-server, opc, opc-ua

我必须使用 OPC UA API 在 C# 中编写客户端-服务器应用程序。我在哪里可以找到一个简单的例子或一个简单的指南？我见过测试应用程序，但它是如此复杂。谢谢你。

# silverlight - 为用户控件创建视图模型，如何从我的主视图模型中访问“那里的数据”

> ID：11594582
> 
> 赞同：0
> 
> 时间：2012-07-21T17:55:41.580
> 
> 标签：silverlight, windows-phone-7, mvvm, viewmodel, mvvm-light

我正在将 MVVMLight 与 WP7 应用程序一起使用。我创建了一个连接到视图模型的主视图。这个主视图有许多我创建的自定义控件。现在根据我的理解，每个用户控件都必须有自己的视图模型。

所以我的主视图数据上下文连接到它的视图模型，每个用户控件的数据上下文都指向它自己的视图模型。

问题是，我如何从主视图的视图模型中的自定义控件访问我的视图模型数据。

我有点困惑。

我可以使用信使，但这听起来太多的工作只是为了让视图模型通信。

如果有人可以伸出援助之手，那将非常有帮助，或者如果有人有任何例子。

我没有看到任何关于在 mvvmlight 中创建的用户控件的文档或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T20:47:29.970

将您的 ViewModel 注入到您的构造函数中，您应该可以访问分离的视图模型的数据。

# android - 在 textview 或 toast 中显示方法的参数

> ID：11594584
> 
> 赞同：0
> 
> 时间：2012-07-21T17:55:57.057
> 
> 标签：android, parameters, boolean, int, toast

嘿伙计们，我无法弄清楚为什么我的代码不起作用背后的逻辑，显然我不允许以这种方式打印出这些值。我无法将 v1、v2、v3 或 v4 的值显示到 toast 或文本字段中，但我可以显示字符串。我称这些值是错误的吗？如果您需要我发布更多代码，请告诉我。

```
testWheelValue(R.id.passw_1, v1);
            testWheelValue(R.id.passw_2, v2);
            testWheelValue(R.id.passw_3, v3);
            testWheelValue(R.id.passw_4, v4);
            testpins = v1 + v2 + v3 + v4;
            text.setText(testpins);
            // Toast.makeText(getBaseContext(), testpins,
            // Toast.LENGTH_SHORT).show();

private boolean testWheelValue(int id, int value) {
        return getWheel(id).getCurrentItem() == value;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T17:58:58.600

`v1`, `v2`, `v3`, 和`v4`属于 类型`int`，因此编译器将它们识别为资源 ID。试试这个：

```
text.setText(String.valueOf(testpins)); 
```

# python - 怎么做 在 python 例如 enc_price = pad 价格

> ID：11594587
> 
> 赞同：3
> 
> 时间：2012-07-21T17:56:11.133
> 
> 标签：python, xor, hmac

我是加密新手，我正在尝试解释以下代码。即，是什么`<xor>`意思？

我有一个 secret_key 密钥。我也有一个 unique_id。我使用下面的代码创建垫。

```
pad = hmac.new(secret_key, msg=unique_id, digestmod=hashlib.sha1).digest() 
```

一旦创建了垫子，我就有了一个价格，例如 1000。我正在尝试遵循这个伪代码指令：

```
enc_price = pad <xor> price 
```

在 Python 中，要实现的代码是什么`enc_price = pad <xor> price`？这样做背后的逻辑是什么？

作为说明，我想在这里做的事情的完整描述： [https ://developers.google.com/ad-exchange/rtb/response-guide/decrypt-price](https://developers.google.com/ad-exchange/rtb/response-guide/decrypt-price)

[developer.google.com/ad-exchange/rtb/response-guide/decrypt-price](https://developers.google.com/ad-exchange/rtb/response-guide/decrypt-price)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T18:02:33.953

二进制文件（我假设这是你需要的）`xor`在`^`python 中：

```
>>> 6 ^ 12
10 
```

二进制异或的工作方式如下（以二进制表示的数字）：

```
 1234

6  = 0110
12 = 1100
10 = 1010 
```

对于每一对位，如果它们的总和为`1`（在我的示例中为位 1 和位 3），则结果位为`1`. 否则就是`0`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T17:59:54.210

你的意思是“[二进制按位运算](http://docs.python.org/reference/expressions.html#binary-bitwise-operations)”？

> & 运算符产生其参数的按位与，它必须是纯整数或长整数。参数被转换为通用类型。
> 
> ^ 运算符产生其参数的按位异或（异或），该参数必须是纯整数或长整数。参数被转换为通用类型。
> 
> 该| 运算符产生其参数的按位（包括）或，它必须是纯整数或长整数。参数被转换为通用类型。

[更新]

由于您不能对字符串和数字进行异或运算，因此您应该：

*   将数字转换为填充到相同大小的字符串并对每个字节进行异或运算（可能会给您一些奇怪的“转义”问题，例如，意外生成无效的 unicode）
*   使用摘要的原始值（20 字节整数？）进行异或，并对结果数字进行十六进制摘要。

像这样的东西（未经测试）：

```
pad = hmac.new(secret_key, msg=unique_id, digestmod=hashlib.sha1).digest()
rawpad = reduce(lambda x, y: (x << 8) + y, 
            [ b for b in struct.unpack('B' * len(pad), pad)])
enc_price = "%X" % (rawpad ^ price) 
```

[更新]

OP 希望实施“ [DoubleClick Ad Exchange 实时出价协议](https://developers.google.com/ad-exchange/rtb/response-guide/decrypt-price)”。

这篇文章告诉我们有一些可用的示例 python 代码：

> **初步测试**
> 
> 您可以使用 requester.tar.gz 在内部测试您的投标应用程序。这是一个测试 python 程序，它向投标应用程序发送请求并检查响应。该计划可应您的 Ad Exchange 代表的要求提供。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T18:05:04.887

pad 和明文“price”都被解释为比特流。对于两个流中的每个对应位，您对这对位进行“异或” - 如果位相同，则发出 0，如果位不同，则发出 1。这个操作很有趣，因为它是可逆的：明文异或板 -> 密文，密文异或板 -> 明文。

但是，在 Python 中，您通常不会自己进行异或运算，因为对于新手来说这很乏味且过于复杂。您想使用流行的加密库（例如[PyCrypto](https://www.dlitz.net/software/pycrypto/)）来完成这项工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-30T13:53:19.443

我是这样做的

```
def strxor(s1,s2):
    size =  min(len(s1),len(s2))

    res = ''
    for i in range(size):
        res = res + '%c' % (ord(s1[i]) ^ ord(s2[i]))
    return res 
```

# php - 如何在 zend 框架控制器中包含文件？

> ID：11594588
> 
> 赞同：4
> 
> 时间：2012-07-21T17:56:23.780
> 
> 标签：php, zend-framework

你好我是zend框架的新手..

我想知道如何在 zend 框架控制器中包含文件

我在zend框架控制器中使用这样的动作

```
public function anyAction()
{
   require("../mailchimp/anyfile.php");
} 
```

我可以做些什么来包含这些文件，这意味着保存所有这些文件的正确位置在哪里

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T18:32:30.743

这就是该`library`目录通常的用途。您可以将自己的函数以及任何第 3 方代码放入其中。有些人甚至将 ZF 库放在那里，但我倾向于将 ZF 保留在服务器上的其他位置，并将其添加到`php.ini`.

使用文件夹中的 mailchimp 文件`library`，您可以像这样包含它们：

```
require_once APPLICATION_PATH . '/../library/mailchimp/MCAPI.class.php'; 
```

如果添加`library`到路径中，则可以将其缩短为：

```
require_once 'mailchimp/MCAPI.class.php'; 
```

您可以通过添加`includePaths.library = APPLICATION_PATH "/../library"`到`application.ini`文件来将库添加到路径中。请注意，通过向 include_path 添加其他位置可能会造成[性能损失。](http://framework.zend.com/manual/en/performance.classloading.html#performance.classloading.includepath)

编辑：

要显示存储在 中的图像，您可以在`public/images`视图/布局中使用此调用：

```
<img src="<?php echo $this->baseUrl('images/file.jpg') ?>" alt="file.jpg" /> 
```

如果您的 Zend 应用程序不在域的根目录中，这将负责确定您的基本 URL 是什么。有关详细信息，请参阅[BaseUrl 视图帮助](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.baseurl)程序。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-21T18:22:31.850

在 Zend-Framework 中，您必须遵循 MVC 模式来创建任何页面。当您想使用/调用此页面时，您可以使用模块、控制器和操作编写 url，如下所示：

> require($this->url(array('module'=>'default','controller'=>'mailchimp','action'=>'mailchimp')));

# android - 在 Android 上的 TextView 中显示 ALT-219 █ - 扩展 ASCII

> ID：11594592
> 
> 赞同：0
> 
> 时间：2012-07-21T17:57:17.813
> 
> 标签：android, textview

我想在 TextView 中显示一个块字符“ALT-219”。搜索 Google 或 stackoverflow 并不容易，因为块意味着很多其他的东西，但我试过了。我尝试将文件保存为 UTF-8，但我的整个项目以某种无法解释的方式崩溃，我进行了备份，结果以更糟糕的方式崩溃。我最终放弃了我所做的并重建，所以我回到了从头开始，但我不倾向于在不寻求帮助的情况下进行实验。

我真正想做的是创建一个伪图形仪表，这样我就可以为不同的值提供不同的字符串，比如一个燃气表，随着值的变化，ALT-219 字符的数量也不同。这给了我一个 1/4 英寸高的仪表，从一个边缘到另一个边缘，当水箱是空的时，没有 ALT-219，当满时整条线都是满的。不是真正的电量计，但我只是想解释一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T18:34:51.870

```
String ascii="\u2588"; 
quoteText.setText(ascii); 
```

我这样做了，它工作得很好，没有崩溃。

谢谢 ：）

# objective-c - 拥有应用程序范围阵列的最佳方式？

> ID：11594602
> 
> 赞同：0
> 
> 时间：2012-07-21T17:58:47.043
> 
> 标签：objective-c, ios, xcode, arrays, static

我有一个类，其中包含从我的服务器下载数据的方法。这是 JSON 的形式，但会被解析并放入一个数组中。由于这是一个“模型”文件，那么制作它以便多个“控制器”可以访问这些数据的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T18:02:01.427

将其挂在应用程序委托上，将其粘贴在全局变量中，或在适当的位置声明一个类方法以返回它。

更好的是，现在开始考虑拥有一个合适的模型层，除其他外，它可以管理这些数据。随着应用程序的发展，这将使重构在未来变得更加容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T11:13:46.570

您可以使用数组对象创建类的单例对象。并且通过使用类方法，您可以在应用程序的任何位置获取该数组。

例如

在 Cardnames.h 文件中

```
#import <Foundation/Foundation.h>

@interface CardNames : NSObject

@property (nonatomic, retain) NSMutableArray *CardNamesArray;

+(CardNames*) getCardsList;

@end 
```

在 Cardnames.m 文件中

```
#import "CardNames.h"

@implementation CardNames

@synthesize CardNamesArray;

static CardNames *cards = nil;

+(CardNames*) getCardsList
{
    @synchronized(self)
    {
        if(cards == nil)
        {
            cards = [[self alloc] init];

            cards.CardNamesArray = [[NSMutableArray alloc] init];

            /// code to fill array

        }
        return cards;
    }
}
@end 
```

在其他课程中，您可以像这样使用

```
#import "CardNames.h"
.
.
.
NSMutableArray *CardsArray = [[CardNames getCardsList] CardNamesArray]; 
```

# python - Python 仅在范围内时才排除输入

> ID：11594605
> 
> 赞同：5
> 
> 时间：2012-07-21T17:59:13.123
> 
> 标签：python, error-handling, user-input

您好我想从用户那里得到一个数字，并且只有在一定范围内的输入除外。

以下似乎可行，但我是一个菜鸟，并且认为虽然它有效，但毫无疑问是一个更优雅的例子......只是尽量不要陷入坏习惯！

我注意到的一件事是，当我运行程序时，CTL+C 不会让我跳出循环，而是引发异常。

```
while True:
  try:
    input = int(raw_input('Pick a number in range 1-10 >>> '))
    # Check if input is in range
    if input in range(1,10):
      break
    else:
      print 'Out of range. Try again'
  except:
    print ("That's not a number") 
```

非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T18:03:24.650

Ctrl+C 引发 a [`KeyboardInterruptException`](http://docs.python.org/library/exceptions.html#exceptions.KeyboardInterrupt)，您的`try … except`代码块捕捉到了这一点：

```
while True:
   try:
       input = int(raw_input('Pick a number in range 1-10 >>> '))
   except ValueError: # just catch the exceptions you know!
       print 'That\'s not a number!'
   else:
       if 1 <= input < 10: # this is faster
           break
       else:
           print 'Out of range. Try again' 
```

通常，您应该只捕获您期望发生的异常（因此不会出现副作用，例如您的 Ctrl+C 问题）。此外，您应该使`try … except`块尽可能短。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T18:02:59.117

您的代码中有几项可以改进。

(1) 最重要的是，只捕获一个通用异常并不是一个好主意，您应该捕获一个您正在寻找的*特定*`try`异常，并且通常尽可能少的-block。

(2) 还有，

```
 if input in range(1,10): 
```

最好编码为

```
 if 1 <= input < 10: 
```

由于当前函数[range()](http://docs.python.org/library/functions.html#range)重复创建从 1 到**9**的值列表，这可能不是您想要或需要的。另外，你想***包括***价值**10**吗？您的提示似乎暗示了这一点，因此您需要调整对 的调用`range(1, 11)`，因为生成的列表将*不*包括上限值。并且`if`- 语句应更改为`if 1 <= input <= 10:`

# css - CSS：为什么图像在 Chrome 中略微向下移动？

> ID：11594607
> 
> 赞同：1
> 
> 时间：2012-07-21T17:59:27.183
> 
> 标签：css, html

我在 DIV 标签和 Firefox 中有一些图像，排列整齐，但在 Chrome 中查看时却不是。我不明白为什么它们在 Chrome 中会被略微推倒。

网站位于：[http ://www.realstockphotos.com](http://www.realstockphotos.com)

火狐：http: [//i.stack.imgur.com/FRhg0.jpg](http://i.stack.imgur.com/FRhg0.jpg)

铬：http: [//i.stack.imgur.com/IP4rB.jpg](http://i.stack.imgur.com/IP4rB.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T18:09:41.903

我`float: left`在#searchPhrase 输入框上放了一个，它似乎有点帮助，但我不确定是否有更好的解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T18:11:13.633

现在你的输入类型没有价值`<input type="submit" value="">`。当您将空格作为值时，它应该可以工作：`<input type="submit" value=" ">`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T18:11:56.067

给两个输入相同的垂直对齐方式，例如：

```
#searchFormTest input{vertical-align:middle;} 
```

# iphone - 在 UIView 中存储其他相关信息

> ID：11594610
> 
> 赞同：7
> 
> 时间：2012-07-21T17:59:56.700
> 
> 标签：iphone, objective-c, ios, xcode

我在 SO 上阅读了很多关于 Gesture Recognizers 的内容 - 并设法编写了一个工作代码，当在 UIImage 上识别出长按时，会出现一个操作表：

```
{ ...
 UILongPressGestureRecognizer *longPressWall = [[[UILongPressGestureRecognizer alloc]
                                                               initWithTarget:self     action:@selector(deleteImage:)] autorelease];
                     longPressWall.minimumPressDuration = 0.4;
                     l.userInteractionEnabled=YES;
                     [l addGestureRecognizer:longPressWall];
... }

-(void)deleteImage:(UILongPressGestureRecognizer*)sender { 
    if(UIGestureRecognizerStateBegan == sender.state) {
        UIActionSheet *as = [[UIActionSheet alloc] initWithTitle:@"" delegate:self cancelButtonTitle:@"Close" destructiveButtonTitle:@"Delete Screenshot" otherButtonTitles: nil];
        [as showInView:masterView];
        [as release];
    }
} 
```

因此，在这种情况下，向 Selector 发送信息`deleteImage:`有点棘手。我想在调用 deleteImage 时向服务器发送 HTTP 请求，因此我需要视图中的一些信息。

反正有没有将信息存储到（例如）中`UIImageView`并从中检索它？`sender.view.myinfo`

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-21T18:06:32.513

通过扩展，您可以添加一个属性`UIView`来存储您的关联值，如下所示：

```
import Foundation
import ObjectiveC

extension UIImageView
{
    struct Static {
        static var key = "key"
    }
    var myInfo:AnyObject? {
        get { 
            return objc_getAssociatedObject( self, &Static.key ) as AnyObject? 
        }
        set { 
            objc_setAssociatedObject( self, &Static.key,  newValue, .OBJC_ASSOCIATION_RETAIN) 
        }
    }
} 
```

现在您可以在代码中的任何位置执行此操作

```
let anImageView = UIView()

// set your new property on any UIView:
anImageView.myInfo = <some object>

// get your proeprty from any UIView
myImage = anImageView.myInfo 
```

* * *

**以前的答案（相同的代码，但在 Objective-C 中）**`objc_setAssociatedObject()`签 出`<objc/runtime.h>`

我会将其作为一个类别来实现..（ARC 风格）

```
#import <objc/runtime.h>

@interface UIImageView (MyInfo)
@property ( nonatomic, strong ) id myInfo ;
@end

@implementation UIImageView (MyInfo)

-(void)setMyInfo:(id)info
{
    objc_setAssociatedObject( self, "_myInfo", info, OBJC_ASSOCIATION_RETAIN_NONATOMIC ) ;
}

-(id)myInfo
{
   return objc_getAssociatedObject( self, "_myInfo" ) ;
}

@end 
```

现在你可以这样做：

```
UIImage * myImage ;
myImage.myInfo = <some object> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-21T18:11:04.337

显而易见的方法是使用 tag 属性。如果您需要更多信息，您始终可以继承 UIImageView 并添加额外的属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-15T21:14:23.017

如果您希望在 UIImageView （或任何 UIView ）中存储字符串，请尝试以下操作 -

在您的视图中设置可访问性标识符，“l”

```
{
    l.accessibilityIdentifier = @"your string here";
} 
```

从手势识别器中获取 UIView，“l”：

```
-(void)deleteImage:(UILongPressGestureRecognizer*)sender { 
    if(UIGestureRecognizerStateBegan == sender.state) {

    UIView *view = sender.view;
    NSString *storedString = view.accessibilityIdentifier;

    }
} 
```

storedString 是存储在 UIView 中的字符串。希望这对将来的任何人都有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T18:06:31.983

不，您不能将信息保存到 imageView 实例中。即使找到 imageView 的可写字符串属性，这也是错误的做法。改为这样做：为 imegeview.tag 属性分配一个订单号，并为信息保留一个 NSMutableDictionary，因此，您将使用 imageView.tag 作为键，而信息将是值。

# objective-c - 表视图：以编程方式设置编辑

> ID：11594611
> 
> 赞同：0
> 
> 时间：2012-07-21T18:00:13.707
> 
> 标签：objective-c

`NSMutableArray *objects`包含一些我用来显示表格视图单元格内容的对象。如果`objects.count`为 0，我想在以下情况下启用表格视图的编辑模式`viewDidLoad`：

```
- (void)viewDidLoad {

    // If there is no content to present enable editing mode
    if (self.objects.count == 0) [self setEditing:YES animated:YES];
} 
```

这会切换`self.editButtonItem`并在我的表格视图中插入一个新行（说明“点击此处添加新元素”）：

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated {

    [super setEditing:editing animated:animated];
    [self.tableView setEditing:editing animated:animated];

    if (self.editing) {
        [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:[self.objects count] inSection:0]] 
                              withRowAnimation:UITableViewRowAnimationAutomatic];
    }

    else {
        [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:[self.objects count] inSection:0]] 
                              withRowAnimation:UITableViewRowAnimationAutomatic];
    }
} 
```

不幸的是，此设置会导致崩溃：

```
*** Assertion failure in -[UITableView _endCellAnimationsWithContext:], /SourceCache/UIKit/UIKit-1914.85/UITableView.m:833 
```

不能以编程方式切换编辑模式吗？如果用户触摸`self.editButtonItem`一切正常 - 据我所知，这个 editButton 和我在`viewDidLoad`.

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T18:09:16.683

我认为这里有两个不同的问题。

一，可以以`setEditing:animated:`编程方式执行。

但我认为这不是你真正想要在这里尝试做的。编辑模式是让用户手动编辑表格，并在左侧显示红色小按钮，如果您设置了这些设置，可能还会在右侧显示小移动指示器。

更好的做法是当你发现你的对象发生了变化时，执行 a `[self.tableView reloadData];`，并确保你`UITableViewDataSource`实现的协议方法做正确的事情。这将包括`tableView:numberOfRowsInSection:`（可能还有`numberOfSections`）和`tableView:cellForRowAtIndexPath:`. 这将导致项目作为更改出现在 tableView 中`objects`。

# ios - IOS JSON 反序列化失败 - STIG/NSJSONSerializer

> ID：11594617
> 
> 赞同：2
> 
> 时间：2012-07-21T18:00:57.693
> 
> 标签：ios, xcode, json

我想反序列化从我在 IOS 中运行的 Web 服务收到的简单 JSON。

```
@"[{\"NickName\":\"James Roeiter3\",\"TempId\":\"634783760669935686\",\"LDAP\":\"XUserName15\",\"SecToken\":null},{\"NickName\":\"James Roeiter2\",\"TempId\":\"634783760654574807\",\"LDAP\":\"XUserName16\",\"SecToken\":null}]" 
```

我以前做过很多次，我尝试使用 NSJsonSerializer 和 STIG 反序列化它：

```
NSArray* array1= (NSArray*)[jsonString JSONValue]; 

NSArray* array2 = (NSArray*)[NSJSONSerialization JSONObjectWithData:jsonString   options: NSJSONReadingMutableContainers error:&error]; 
```

现在，问题很奇怪，如果我将调试器中的 JSON 复制粘贴到硬编码字符串中并尝试解析它，它可以工作，如果我在运行时收到它，它会失败，STIG 说它 JSON 不能以 '[ ' . 我尝试遍历所有字符以查找空字符（我不太确定它是什么），但复制/粘贴和运行时字符串之间的所有字符看起来都一样。我还尝试格式化为 UTF8 并尝试使用这些格式——也失败了。

知道它会是什么或如何解决吗？我真的会在这里感谢您的帮助，因为我非常坚持这个假设是简单的问题，但在我解决这个问题之前无法取得进展......

编辑：我收到的确切错误是：

```
2012-07-21 23:59:31.376 Whisper.Client.IOS[1058:fe03] Error : Error Domain=NSCocoaErrorDomain Code=3840 "The operation couldn’t be completed. (Cocoa error 3840.)" (No string key for value in object around character 1.) UserInfo=0xc9632e0 {NSDebugDescription=No string key for value in object around character 1.} 
```

向大家问好，

詹姆士

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T00:21:04.273

好的，问题是转义字符和引号字符 \"，这就是为什么将它作为硬代码复制和粘贴时它起作用的原因，因为当硬编码时，编译器只读取引号 " 字符。如果将来有人遇到此问题，这可能会非常烦人：问题是服务器 url 对数据进行了编码（C# 服务器端），IOS url 解码以其弱点而闻名，并且 apprenlty 不会从细绳。

这是我当前的 IOS 解码代码：

```
json = [json stringByReplacingOccurrencesOfString:@"+" withString:@" "];
json = [json stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
json = [json stringByReplacingCharactersInRange:NSMakeRange(0,1) withString:@""];
int lastChar = [json length]-1;
json = [json stringByReplacingCharactersInRange:NSMakeRange(lastChar,1) withString:@""];
json = [json stringByReplacingOccurrencesOfString:@"\\" withString:@""];
return  json; 
```

如果首先从 json 的开头和结尾删除引号，那么我会删除 " 字符之前的所有 \ 字符。

这似乎工作顺利，如果你认为我做错了什么，请纠正我。

希望有一天能对某人有所帮助。

干杯，

詹姆士

# jquery - 在展台模式中隐藏 div 元素

> ID：11594620
> 
> 赞同：0
> 
> 时间：2012-07-21T18:01:07.173
> 
> 标签：jquery, twitter-bootstrap, modal-dialog

我正在尝试使用 twitter bootstrap modal 和 jquery 根据在上一个下拉问题中所做的选择来显示模态中的 div 数量。换句话说，如果选择 1 则仅显示模态中的一个 div，如果选择 3 则显示模态中的三个 div。

**过滤问题**：

```
 <select id='species1'>
    <option value="">Number of Species</option>
    <option value="01">1</option>
    <option value="02">2</option>
    <option value="03">3</option>
    <option value="04">4</option>
    <option value="05">5</option>
    </select>

    <div class='btn btn-primary'><button type="button" id="nextbttn">Next</button></div> 
```

这是**模态脚本**：

```
<div class="modal hide fade in" style = "width:950px; left:25%; display: none; ">
<div class="modal-header">
<a class="close" data-dismiss="modal">X</a>
</div>

<div class="modal-body">
<table border=1>
<div id="ftype1">
<tr>
<td colspan=3>
<h3><center>ITEM 1</center></h3>
</td>
</tr>
<tr>
<td>
    <select id='xtype1'>
    <option value="">Type 1</option>
    <option value="01">01</option>
    <option value="02">02</option>
    <option value="03">03</option>
    <option value="04">04</option>
    <option value="05">05</option>
    </select>
</td>
<td>
    Number of pounds: <input type="text" size="5">
</td>
<td>
    Cost per pound: <input type="text" size="5">
</td>
</tr>
</div> <!-- ftype1 -->

<!------------------------------------------------ -->

<div id="ftype2">
<tr>
<td colspan=3><h3><center>ITEM 2</center></h3></td>
</tr>
<tr>
<td>
    <select id='xtype2'>
    <option value="">Type 2</option>
    <option value="01">01</option>
    <option value="02">02</option>
    <option value="03">03</option>
    <option value="04">04</option>
    <option value="05">05</option>
    </select>
</td>
<td>
    Number of pounds: <input type="text" size="5">
</td>
<td>
    Cost per pound: <input type="text" size="5">
</td>
</tr>
</div> <!-- ftype2 -->

<!------------------------------------------------ -->

<div id="ftype3">
<tr>
<td colspan=3><h3><center>ITEM 3</center></h3></td>
</tr>
<tr>
<td>
    <select id='xtype3'>
    <option value="">Type 3</option>
    <option value="01">01</option>
    <option value="02">02</option>
    <option value="03">03</option>
    <option value="04">04</option>
    <option value="05">05</option>
    </select>
</td>
<td>
    Number of pounds: <input type="text" size="5">
</td>
<td>
    Cost per pound: <input type="text" size="5">
</td>
</tr>
</div> <!-- ftype3 -->

<div class="modal-footer">
<div class='btn btn-primary'><input name="commit" type="submit" value="Submit" /></div>
<div class="btn" data-dismiss="modal">Close</div>
</div>
</div> 
```

我尝试了以下**jquery 脚本**：

```
$(document).ready(function() {
    $("#nextbttn").click(function() {
        var type1 = $('#species1').val();
        if (type1 != '00') {
            if (type1 == '01') {
                $('.modal').modal({
                    backdrop: false
                });
                $('#ftype2').hide();
                $('#ftype3').hide();
            }
        }
    });
}); 
```

但是 div ftype2 和 ftype3 并没有被隐藏。

我的问题是实现这一目标的最佳方法是什么？

谢谢克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T04:18:17.687

您的选择器很好，但问题是您不能`div`直接在 a 中使用 a `table`; 只在一个`td`或`th`。如果您试图隐藏表格中的一行，请提供行 ID，然后选择它们进行隐藏。

```
<table>
  <tr id="row1"><td><!-- stuff --></td></tr>
  <tr id="row2"><td><!-- stuff --></td></tr>
  <tr id="row3"><td><!-- stuff --></td></tr>
</table> 
```

```
$('#row3').hide(); // hide row3 
```

# xml - 使用 XSLT 1.0 在 xml:base 属性和 xml 文件的其他节点值之间进行映射

> ID：11594627
> 
> 赞同：1
> 
> 时间：2012-07-21T18:02:13.127
> 
> 标签：xml, xslt, xinclude

我有一个如下所示的 xml 文档，

```
<chapter xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="chapter1">
<title>First chapter</title>
<section xml:id="section1">
                <imageobject>
                    <imagedata fileref="images/image1.jpg"/>
                </imageobject>
                <imageobject>
                    <imagedata fileref="images/image5.jpg"/>
                </imageobject>
</section>
    <chapter xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="chapter2"   xml:base="../foder1/section2.xml">        
   <section xml:id="section2">
                    <imageobject>
                        <imagedata fileref="images/image2.jpg"/>
                    </imageobject>
                    <imageobject>
                        <imagedata fileref="images/image3.jpg"/>
                    </imageobject>
    </section>
    </chapter>
    <chapter xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="chapter3" xml:base="../folder3/section3.xml">  
   <section xml:id="section3">
                    <imageobject>
                        <imagedata fileref="images/image4.jpg"/>
                    </imageobject>
    </section>
   </chapter>
 </chapter> 
```

与文件一样，每个 xincluded 文件中都有图像的相对路径。我想获取图像的绝对路径。为此，我将把每章的 xml:base 值与该章中的相对图像路径结合起来。然后我可以获得每章中图像的所有绝对路径。为此，我使用了以下 XSLT 1.o 文件。

```
<xsl:template match="/">
<imagepaths>
<xsl:for-each select="chapter/chapter">
 <basepath>
 <xsl:value-of select="@xml:base"/>
 </basepath>
</xsl:for-each>
 <xsl:apply-templates select="*" /> 
</image-paths>
</xsl:template>

  <xsl:template match="*">
  <xsl:apply-templates select="*" />
   </xsl:template>

   <xsl:template match="imagedata">
  <relativepath>
  <xsl:value-of select="@fileref" />
  </realtivepath>
  </xsl:template>
  </xsl:stylesheet> 
```

但这会分别给出所有 xml:base 值和相对路径。它不提供每章的 xml:base 值与该章中的相对路径之间的任何映射。我想在 xml:base 值和该章中的所有相对路径之间建立一个映射。我这个映射应该怎么做？我认为通过像下面这样的输出，我可以进行映射并获得图像的绝对路径。请帮助我使用我的 XSLT 获得以下输出。有了它，我可以通过“mainrelativepath”访问section1中的所有图像，通过basepath和relativepath节点访问section2、section3图像。

```
<Imagedata>
    <mainrelativepath>images/image1.jpg</mainrelativepath>
    <mainrelativepath>images/image5.jpg</mainrelativepath>
<chapter>
    <basepath>../foder1/section2.xml</basepath>
    <relativepath>images/image2.jpg</relativepath>
    <relativepath>images/image3.jpg</relativepath>
</chapter>
<chapter>
    <basepath>../foder3/section3.xml</basepath>
    <relativepath>images/image4.jpg</relativepath>
</chapter> 
```

提前致谢..！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T18:31:50.540

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/*">
  <Imagedata>
    <xsl:apply-templates select="chapter"/>
  </Imagedata>
 </xsl:template>

 <xsl:template match="*/chapter">
  <chapter>
   <basepath><xsl:value-of select="@xml:base"/></basepath>
   <xsl:apply-templates/>
  </chapter>
 </xsl:template>

 <xsl:template match="imagedata">
   <relativepath><xsl:value-of select="@fileref"/></relativepath>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<chapter xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="chapter1">
    <title>First chapter</title>
    <section xml:id="section1">
                    <imageobject>
                        <imagedata fileref="images/image1.jpg"/>
                    </imageobject>
    </section>
        <chapter xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="chapter2"   xml:base="../foder1/section2.xml">
       <section xml:id="section2">
                        <imageobject>
                            <imagedata fileref="images/image2.jpg"/>
                        </imageobject>
                        <imageobject>
                            <imagedata fileref="images/image3.jpg"/>
                        </imageobject>
        </section>
        </chapter>
        <chapter xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="chapter3" xml:base="../folder3/section3.xml">
       <section xml:id="section3">
                        <imageobject>
                            <imagedata fileref="images/image4.jpg"/>
                        </imageobject>
        </section>
       </chapter>
</chapter> 
```

**产生想要的正确结果：**

```
<Imagedata>
   <chapter>
      <basepath>../foder1/section2.xml</basepath>
      <relativepath>images/image2.jpg</relativepath>
      <relativepath>images/image3.jpg</relativepath>
   </chapter>
   <chapter>
      <basepath>../folder3/section3.xml</basepath>
      <relativepath>images/image4.jpg</relativepath>
   </chapter>
</Imagedata> 
```

# java - 有任何比 SMSLib 更简单可靠的 java API 来发送短信吗？

> ID：11594628
> 
> 赞同：0
> 
> 时间：2012-07-21T18:02:24.113
> 
> 标签：java, sms-gateway

我想使用 SMSLib 从我的 java Web 应用程序发送短信。我遵循了 [http://smslib.org/doc/installation/](http://smslib.org/doc/installation/)的安装过程。但它不起作用。如果有人通过 java API 的任何代码或信息帮助我，我真的很感激。

```
public void doIt() throws Exception
{
    OutboundNotification outboundNotification = new OutboundNotification();
    System.out.println("Example: Send message from a serial gsm modem.");
    System.out.println(Library.getLibraryDescription());
    System.out.println("Version: " + Library.getLibraryVersion());
    SerialModemGateway gateway = new SerialModemGateway("modem.com1", "COM4", 9600, "Nokia", "C2-03");
    gateway.setInbound(true);
    gateway.setOutbound(true);
    gateway.setSimPin("1234");

    // Explicit SMSC address set is required for some modems.
    // Below is for VODAFONE GREECE - be sure to set your own!
    gateway.setSmscNumber("+8801700000600");
    Service.getInstance().setOutboundMessageNotification(outboundNotification);
    Service.getInstance().addGateway(gateway);
    Service.getInstance().startService();
    System.out.println();
    System.out.println("Modem Information:");
    System.out.println("  Manufacturer: " + gateway.getManufacturer());
    System.out.println("  Model: " + gateway.getModel());
    System.out.println("  Serial No: " + gateway.getSerialNo());
    System.out.println("  SIM IMSI: " + gateway.getImsi());
    System.out.println("  Signal Level: " + gateway.getSignalLevel() + " dBm");
    System.out.println("  Battery Level: " + gateway.getBatteryLevel() + "%");
    System.out.println();
    // Send a message synchronously.
    OutboundMessage msg = new OutboundMessage("+8801719057995", "call me, sanchoy");
    Service.getInstance().sendMessage(msg);
    System.out.println(msg);

    System.out.println("Now Sleeping - Hit <enter> to terminate.");
    System.in.read();
    Service.getInstance().stopService();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:35:41.840

您可以购买一部 150 美元的廉价 Android 手机，从 Google Play 商店注册并安装 Sent.ly 应用程序，然后使用 Sent.ly [http://sent.ly提供的 API](http://sent.ly)

该 API 是基于 HTTP 的，因此从您的 Web 应用程序调用它非常简单：

```
import java.net.*;
import java.io.*;

public class URLConnectionReader {
    public static void main(String[] args) throws Exception {
        String sentlyUsername = "yourusername";
        String sentlyPassword = "yourpassword";
        String destinationNumber = "+14085616821";
        String message = "This is what I want to send";
        URL sentlyService = new URL("http://sent.ly/command/sendsms" +
           "?username=" + sentlyUsername +
           "&password=" + sentlyPassword +
           "&to=" + destinationNumber +
           "&text=" + message);
        URLConnection yc = sentlyService .openConnection();
        BufferedReader in = new BufferedReader(
                                new InputStreamReader(
                                yc.getInputStream()));
        String inputLine;

        while ((inputLine = in.readLine()) != null) 
            System.out.println(inputLine);
        in.close();
    }
} 
```

更多文档可以在这里找到： [https ://docs.google.com/document/d/1MuFXPTWq7zNIChwZdzIrqiQ2-Mb3_rPrWqNlOZXJNws/edit?pli=1](https://docs.google.com/document/d/1MuFXPTWq7zNIChwZdzIrqiQ2-Mb3_rPrWqNlOZXJNws/edit?pli=1)

# c# - 如何将方法作为参数传递给另一个方法

> ID：11594630
> 
> 赞同：0
> 
> 时间：2012-07-21T18:02:40.770
> 
> 标签：c#

我需要在“父”对象中检查是否有一个可以接受的在某个特定时刻调用“子”中的某些方法。例如，父对象（组件）包括子对象（或换句话说，组件部分）并且父对象现在正在处理，因此必须禁止所有（或特定）子活动（即启动新的服务线程，将新的客户端请求入队，.. .)。

```
public class Parent
{
    public bool IsMethodCallAcceptable(reference_to_method) {...}
}

public class Child
{
    public int SomeMethod(int intArg, string stringArg)
    {
        if(!_parent.IsMethodCallAcceptable(reference_to_SomeMethod_with_actual_args))
            throw new ...
        ...
    }

    private void AnotherMethod(string param = null) {...}
    {
        if(!_parent.IsMethodCallAcceptable(reference_to_AnotherMethod_with_actual_args))
            throw new ...
        ...
    }

    private Guid ThirdMethod()
    {
        if(!_parent.IsMethodCallAcceptable(reference_to_ThirdMethod))
            throw new ...
        ...            
    }
} 
```

有什么办法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T18:17:35.253

注意：我正在回答您的问题，而不是您的标题。其他人已经回答了这个标题。

某些对象具有 isDisposed 属性，如果您的父对象实现了该属性并且这是您唯一不想调用方法的时候，那么可以。否则没有。如果您控制父级的源，则可以添加一个执行所需操作的属性。

如果你不控制源并且你想要检查的不仅仅是 isDisposed 或者父级没有实现 isDisposed，你也许可以检查公开暴露的属性，但通常你应该假设如果一个方法是公开的，可以随时调用它。如果您通过反射调用私有方法，那么您就是在冒险。

**编辑以回应评论：** 鉴于您的描述，委托不会为您提供任何您无法通过向父级添加属性和方法来更轻松地完成的额外功能（如果您不控制源，它们将无济于事全部）。处理您所描述的场景的最佳方法（CAR.ENGINE.START 没有汽油时，是让 Start 方法抛出异常或返回一个值，指示尝试启动引擎的结果）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T18:04:51.863

使用代表？

[http://msdn.microsoft.com/en-us/library/ms173171%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms173171%28v=vs.80%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T18:37:38.533

如果这些方法是子类的本机方法，则父类无法确定它们的任何信息。 [赖斯定理](http://en.wikipedia.org/wiki/Rice%27s_theorem)会给你带来各种各样的问题，如果你能看到代码的话。如果它们是父类的本机并且在子类中被覆盖，则同样的问题（但程度较轻），因为您不能真正保证子类将执行父类的所有操作（并且仅执行这些操作）上课；事实上，你几乎可以保证它会做*一些*不同的事情。（如果没有，为什么要覆盖？）

如果它们是父类的本机并且在子类中不可覆盖，则只需检查对象是否处于执行此类操作的有效状态，如果不是则抛出异常。

至于实际的有效性检查，对于您的示例，您可以使用类似的方法`bool IsDisposing()`；对于其他情况，您可能会以其他方式跟踪状态。例如，像这样的私有方法`CanDoThisThing()`可能会有所帮助。拥有一个采用通用操作名称的方法（不是操作；我们已经确定了它的不可行性）对我来说似乎有点坏了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T18:05:47.980

使用 func`Func<T, TResult>` [链接](http://msdn.microsoft.com/en-us/library/bb549151.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-21T18:05:51.723

最简单的方法是传递 URI 而不是引用：

例如“NS.Child.ThirdMethod”。

否则，委托是最接近函数引用的。如果你愿意，你可以通过它。

但是，这种方法不符合 OOP 的概念规则：基类不应该知道它的子类。最好使用某种锁定机制来告诉孩子他们无法访问资源。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-22T09:44:26.980

再次谢谢大家，下面列出了第一种方法的结果

```
public class Component
{
    public ComponentPart SomeComponentPart1 { get; private set; }
    public ComponentPart SomeComponentPart2 { get; private set; }

    public Component()
    {
        SomeComponentPart1 = new ComponentPart(this);
        SomeComponentPart2 = new ComponentPart(this);
    }

    public bool IsMethodCallAcceptable(MethodCallExpression method, object[] parameters)
    {
        // collect needed information about caller
        var caller = (method.Object as ConstantExpression).Value;
        var methodName = method.Method.Name;
        var paramsArray = new Dictionary<string, object>();

        for (int i = 0; i < method.Arguments.Count; i++)
            paramsArray.Add((method.Arguments[i] as MemberExpression).Member.Name, parameters[i]);

        // make corresponding decisions
        if (caller == SomeComponentPart2)
            if (methodName == "SomeMethod")
                if ((int) paramsArray["intArg"] == 0 || (string) paramsArray["stringArg"] == "")
                    return false;

        return true;
    }
}

public class ComponentPart
{
    private Component Owner { get; set; }

    public ComponentPart(Component owner)
    {
        Owner = owner;
    }

    public int SomeMethod(int intArg, string stringArg)
    {
        // check if the method call with provided parameters is acceptable
        Expression<Func<int, string, int>> expr = (i, s) => SomeMethod(intArg, stringArg);
        if (!Owner.IsMethodCallAcceptable(expr.Body as MethodCallExpression, new object[] { intArg, stringArg }))
            throw new Exception();

        // do some work
        return stringArg.Length + intArg;
    }

    public void AnotherMethod(bool boolArg, Dictionary<Guid, DateTime> crazyArg, string stringArg, object objectArg)
    {
        // check if the method call with provided parameters is acceptable
        Expression<Action<bool, Dictionary<Guid, DateTime>, string, object>> expr =
            (b, times, arg3, arg4) => AnotherMethod(boolArg, crazyArg, stringArg, objectArg);
        if (!Owner.IsMethodCallAcceptable(expr.Body as MethodCallExpression, new [] { boolArg, crazyArg, stringArg, objectArg }))
            throw new Exception();

        // do some work
        var g = new Guid();
        var d = DateTime.UtcNow;
    }
} 
```

这是如何检查方法调用的变体，可以使用相同的方法来检查属性值的变化，而某些 ComponentPart 的方法和属性可以检查一些公共 Component.State 属性（通过 ComponentPart.Owner）而不是调用 Component.IsMethodCallAcceptable或 Component.IsPropertyChangeAcceptable。

# c++ - qt 小部件位置

> ID：11594634
> 
> 赞同：5
> 
> 时间：2012-07-21T18:03:13.907
> 
> 标签：c++, qt, position

我有一个带有网格布局的主窗口，并且有 2 行中有 8 个按钮。

```
 ---------------------
|                     | 
| 1     2     3     4 |
|                     | 
|                     |
| 5     6     7     8 |
|                     |
 --------------------- 
```

我正在尝试在单击的按钮旁边显示一个弹出对话框。所以，我试图获取连接到`clicked()`信号的插槽中按钮的坐标。

我试过了

```
QPoint p = btn->pos(); 
```

和

```
QPoint p = btn->geometry().topLeft(); 
```

由于某种原因，两者都是 (0, 0) 。如何获取在此插槽中单击的按钮的位置？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-21T18:21:10.260

我认为您需要映射按钮相对于父窗口的位置。

[QWidget::mapTo](http://qt-project.org/doc/qt-4.8/qwidget.html#mapFrom)

> 将小部件坐标 pos 转换为父坐标系。父级不能为 0，并且必须是调用小部件的父级。

# ruby - 如何在rails中存储和检索数据库中的链接？

> ID：11594635
> 
> 赞同：0
> 
> 时间：2012-07-21T18:03:15.213
> 
> 标签：ruby, ruby-on-rails-3, activerecord

我在 Rails 中有问答功能，答案字段作为文本区域。当用户在答案字段中输入链接时，如何在显示结果时将其显示为链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T19:27:38.343

在保存答案文本之前或之后，您可以使用附加 gem 将链接的 html 添加到任何被识别为链接的文本。一个选项是[rails_autolink](https://github.com/tenderlove/rails_autolink)，另一个是[rinku](https://github.com/bquorning/rinku)。

# android - Android 服务中的 stopSelf 不会让 onLocationChanged 在退出前触发

> ID：11594639
> 
> 赞同：0
> 
> 时间：2012-07-21T18:03:42.467
> 
> 标签：android, android-service, locationmanager

我已经设置了一个基本上每 15 分钟运行一次的服务，并在 GPS 提供商上执行 requestLocationUpdates。我在服务中设置了侦听器。

现在，当 onStartCommand 方法结束时，我会执行 stopSelf，因为我希望服务在另外 15 分钟内终止，因为我知道它将使用 AlarmManager 再次启动。

但是服务在监听事件到达位置信息之前退出。

如果我注释掉接收到位置的 stopSelf。

如何让服务等到收到位置。我想过将 stopSelf 放在 onLocationChanged 的​​事件中，但它可能并不总是触发。

我想到的另一种方法是实现线程睡眠，但这感觉就像代码异味。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T18:12:18.817

要仅获取一个位置，请使用[LocationManager.requestSingleUpdate()](http://developer.android.com/reference/android/location/LocationManager.html#requestSingleUpdate%28java.lang.String,%20android.app.PendingIntent%29)并在 onLocationChanged() 中调用 service.stopSelf()。如果您担心 GPS 会无限期地搜索修复（可能用户在山洞中），那么设置一个计时器并在超过您的特定时间段时停止服务。

# internet-explorer-9 - SCRIPT1002：语法错误 - IE 9

> ID：11594643
> 
> 赞同：-1
> 
> 时间：2012-07-21T18:04:18.150
> 
> 标签：internet-explorer-9

我在 IE9 中收到此错误

SCRIPT1002：语法错误 bluebirdjobs.net，第 1587 行字符 5

虽然它在其他所有浏览器中都可以正常工作

在 IE-9 页脚不显示和显示 JS 错误。

任何帮助

我的网站是[http://bluebirdjobs.net](http://bluebirdjobs.net)

我没有放置任何 JS 函数，因为我真的不知道是哪一个导致了问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T18:21:05.090

首先，您应该更正 HTML。您可以使用[http://validator.w3.org](http://validator.w3.org)查看错误。

很多 URL 都有一些奇怪的地方，例如[http://bluebirdjobs.net//?view=help](http://bluebirdjobs.net//?view=help)

此外，[http://bluebirdjobs.net//icons/arrow.png](http://bluebirdjobs.net//icons/arrow.png)给出了 404 状态。

# xml - android 应用程序在 main.xml 中移动对象时崩溃

> ID：11594645
> 
> 赞同：0
> 
> 时间：2012-07-21T18:04:41.327
> 
> 标签：xml, android-layout

我有一个包含单个活动和单个布局的简单应用程序。每当我试图通过图形编辑器或代码将布局中的对象移动到另一个地方时，应用程序在编译和运行时会崩溃。布局包含2个标签，一个按钮和一个文本框，没什么特别的，我不明白这是什么原因。

这是我正在使用的 xml 布局：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id= "@+id/question"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"

        android:gravity="center_horizontal"
        android:textColor="#FFFFFF"/>

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal" />

    <Button
        android:id="@+id/confirm"
        android:layout_width="126dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:text="Answer" />

    <EditText
        android:id="@+id/answer"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical">      
        <requestFocus/>
    </EditText>

</LinearLayout> 
```

当我试图在 EditText 下移动第一个 TextView 时，应用程序崩溃了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T01:07:46.563

进行干净的重建。Projects->clean 应该可以修复它。

# css - 将 min-width 设置为内容的宽度

> ID：11594647
> 
> 赞同：16
> 
> 时间：2012-07-21T18:04:56.803
> 
> 标签：css, responsive

我有一个背景包含表格的 div。我希望 div 具有 100% 的宽度，除非它比表格的长度窄。我可以做这样的事情：

```
.my-div {
  width:100%;
  min-width:900px;
} 
```

这对于 900px 宽的表格来说非常好，但如果它比那个窄，我会有不需要的滚动条，如果它比那个宽，我会有无法访问的内容。显然，这可以用 JavaScript 轻松解决，但我想知道是否有纯 CSS 的解决方案，所以我的应用程序不是那么 JS-heavy。

有关正在发生的事情的视觉效果，请参见[此处](http://jsfiddle.net/WTwdN/3/)。我想要的是绿色背景在表格中的文本溢出时溢出视口。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2018-05-17T15:30:50.693

如果我正确理解您的问题，这应该会有所帮助：

```
.my-div {
  /*width:100%;*/
  height:400px;
  background-color:#bada55;
  display: inline-block; // this is the key
} 
```

你的例子在这里修改：http: [//jsfiddle.net/nvLnodLh/](http://jsfiddle.net/nvLnodLh/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T18:49:35.660

怎么样...

```
.my-div {
    overflow: auto;    
}

table {
    float: left;
} 
```

**现场演示：http:** [//jsfiddle.net/WTwdN/4/](http://jsfiddle.net/WTwdN/4/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-05-18T19:20:12.613

> 我想要的是绿色背景在表格中的文本溢出时溢出视口。

您只需将一张桌子包装在一张桌子内，因此它们都会溢出。

```
.my-div {
  width:100%;
  height:400px;
  display: table;
  background-color:#bada55; 
}
td {
  white-space:nowrap;
}
table {
  width: 100%;
}
```

```
<div class="my-div">
  <table>
      <thead>
          <tr><td>my table</td></tr>
      </thead>    
      <tbody>
          <tr><td>my dataaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaapppppppppppppppp</td></tr>              
      </tbody>
  </table>
</div>
```

如果您不希望容器`div`变得比视口大，只需在桌子上设置背景。

```
.my-div {
  width:100%;
  height:400px;
}
table {
  height: 100%;
  width: 100%;
  background-color:#bada55; 
}
td {
  white-space:nowrap;
  vertical-align: top;
}
```

```
<div class="my-div">
  <table>
      <thead>
          <tr><td>my table</td></tr>
      </thead>    
      <tbody>
          <tr><td>my dataaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaapppppppppppppppp</td></tr>              
      </tbody>
  </table>
</div>
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-23T11:32:11.283

[CSS Intrinsic & Extrinsic Sizing Module Level 3](https://www.w3.org/TR/css-sizing-3/) 有一个草稿，其中添加`width: fit-content`了您想要的内容。但是 IE/Edge 不支持它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-05-23T08:45:33.343

试试这个解决方案

```
.my-div {
  height:400px;
  overflow: auto;
  background-color:#bada55;    
}
td {
  white-space:nowrap;   
}
table {
  width: 100%;
}
```

```
<div class="my-div">
  <table>
      <thead>
          <tr><td>my table</td>
          <td>my table</td></tr>
      </thead>    
      <tbody>
          <tr><td>my dataaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaapppppppppppppppp</td><td>my dataaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaapppppppppppppppp</td></tr>              
      </tbody>
  </table>
</div>
```

# c# - 非规范化的 TSQL 查询优化

> ID：11594650
> 
> 赞同：1
> 
> 时间：2012-07-21T18:05:10.593
> 
> 标签：c#, database

我有两张桌子： 假设在桌子`boughtItems(buyerId,ItemId)`上每个买家的物品不超过五件。所以我试图将数据从第一个表插入到第二个表中。我正在这样做，从每个买家的第一个表中选择所有行作为`denormalized(buyerId,item1,item2,item3,item4,item5)``boughtItems`

```
SELECT itemId FROM boughtItems where buyerId=1 
```

然后当读取所有行时，我为第二个表执行相应的插入命令。有什么方法可以加快这个过程吗？如果需要，我也可以发布我的程序代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T18:11:48.923

注意，你可以只用一个 CTE 来做到这一点，但我认为这很清楚。请记住，我没有在服务器上进行测试，因此可能存在错误或拼写错误。

```
WITH ranked AS
(
    SELECT buyerID, ROW_NUMBER() OVER(PARTITION BY buyerID) AS ItemRank
    FROM boughtItems
), allColumns AS
(
   SELECT buyerID, i1.ItemID as item1, i2.ItemID as item2, i3.ItemID as item3, i4.ItemID as item4, i5.ItemID as item5
   FROM ranked r
   LEFT JOIN boughtItems item1 ON r.buyerID = item1.buyerID and ItemRank = 1
   LEFT JOIN boughtItems item2 ON r.buyerID = item2.buyerID and ItemRank = 2
   LEFT JOIN boughtItems item3 ON r.buyerID = item3.buyerID and ItemRank = 3
   LEFT JOIN boughtItems item4 ON r.buyerID = item4.buyerID and ItemRank = 4
   LEFT JOIN boughtItems item5 ON r.buyerID = item5.buyerID and ItemRank = 5
)
INSERT INTO denormalized (buyerid, item1, item2, item3, item4, item5)
  SELECT buyerid, item1, item2, item3, item4, item5
  FROM allColumns 
```

# objective-c - 编译选项 -fPIC 时出现 Gcc 错误

> ID：11594651
> 
> 赞同：0
> 
> 时间：2012-07-21T18:05:12.767
> 
> 标签：objective-c, ios, gcc

我正在读一本书，但在使用此代码进行编译时出现一个错误。

```
$ rm -f injection.dylib
$ export PLATFORM=/Developer/Platforms/iPhoneOS.platform
$ $PLATFORM/Developer/usr/bin/arm-apple-darwin10-llvm-gcc-4.2 \
-c -o injection.o injection.c \
-isysroot $PLATFORM/Developer/SDKs/iPhoneOS5.0.sdk \ -fPIC
$ $PLATFORM/Developer/usr/bin/ld \ -dylib -lsystem -lobjc \
-o injection.dylib injection.o \
-syslibroot $PLATFORM/Developer/SDKs/iPhoneOS5.0.sdk/ 
```

我遇到了一些麻烦，尤其是在这一行：

```
$PLATFORM/Developer/usr/bin/arm-apple-darwin10-llvm-gcc-4.2 \
-c -o injection.o injection.c \
-isysroot $PLATFORM/Developer/SDKs/iPhoneOS5.0.sdk \ -fPIC 
```

这是错误

```
 arm-apple-darwin10-llvm-gcc-4.2:  -fPIC: No such file or directory 
```

我该如何解决...这是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T18:09:31.377

这意味着您输入错误的命令行：

```
stieber@gatekeeper:~$ gcc \ -fPIC
gcc: error:  -fPIC: No such file or directory
gcc: fatal error: no input files
compilation terminated. 
```

似乎行中间的 \ 使 gcc（可能还有 llvm-gcc）停止将参数视为选项并始终将它们视为文件名。

```
stieber@gatekeeper:~$ gcc -fPIC
gcc: fatal error: no input files
compilation terminated. 
```

给出预期的结果。

# c# - 在 Metro 应用程序的顶部放置一个标签栏？

> ID：11594652
> 
> 赞同：0
> 
> 时间：2012-07-21T18:05:13.943
> 
> 标签：c#, microsoft-metro, windows-runtime, tabcontrol, winrt-xaml

我想制作一个功能与此类似的 WinRT Metro 应用程序：

[http://learn.knockoutjs.com/WebmailExampleStandalone.html#Inbox](http://learn.knockoutjs.com/WebmailExampleStandalone.html#Inbox)

带有指向应用程序各个页面的链接的选项卡栏如何适合 Metro 风格的应用程序？你会使用 AppBar 吗？在顶部还是左侧？你会为每个页面使用一个单选按钮吗？您会使用 FlipView 来更改页面吗？这种地铁应用程序有哪些示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T01:28:07.980

如果您的目标是让您的应用程序进入 Windows 8 商店（当然是！）我建议您深入研究 Metro UX 指南。[此处](http://msdn.microsoft.com/en-us/library/windows/apps/hh761500.aspx)记录了导航指南。它记录了几种导航模式。

如果您确实选择使用 AppBar 作为导航控件，则可以使用此代码段将 AppBar 固定到 XAML/C# 应用程序的顶部。AppBar 将在显示页面时打开，因为 IsOpen 设置为 true 并使用 IsSticky继续开放。

```
<Page.TopAppBar>
    <AppBar x:Name="SampleNavBar" IsOpen="True" IsSticky="True">
       [PUT YOUR NAV CONTROLS HERE]            
    </AppBar>
</Page.TopAppBar> 
```

对于与您要查找的内容相近的示例，请使用 Windows 8 附带的天气应用程序并转到“位置”屏幕。右键单击或滑动以调出应用栏。该应用程序同时显示顶部 AppBar 和底部 AppBar。顶部的 AppBar 是一个导航栏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T20:34:45.483

在这种特殊情况下，您可以只使用较少的铬（渐变/阴影）来做同样的事情。这些按钮可能只是带有 Style="{StaticResource TextRadioButtonStyle}" 的 RadioButtons。选项卡只会更改过滤器 - 基于选定的选项卡，您的视图模型将为列表提供不同的 ItemsSource。

# visual-studio-2010 - Visual Studio 2010 中的多个输出窗口

> ID：11594653
> 
> 赞同：13
> 
> 时间：2012-07-21T18:05:21.537
> 
> 标签：visual-studio-2010, ide

有没有办法在 Visual Studio 中同时打开多个输出窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-12-19T18:01:32.643

**使用内置的 Visual Studio 设置**是不可能的。****

 **您可以在此处投票支持将来实现此功能：[提供多个调试通道输出窗口](https://visualstudio.uservoice.com/forums/121579-visual-studio-ide/suggestions/15830791-provide-multiple-debug-channel-output-windows)

唯一的解决方法是开发 VS 扩展，它可能会添加一个额外的自定义输出窗口。**

# html - 如何在上下文中正确地将按钮适合容器的高度

> ID：11594654
> 
> 赞同：1
> 
> 时间：2012-07-21T18:05:39.113
> 
> 标签：html, css, navigation

几天来，我一直在为这个问题苦苦挣扎，我尝试更改 CSS 文档中所有可能的属性，但它们似乎都不起作用。

网站：[http ://www.mohrdevelopment.com](http://www.mohrdevelopment.com)

问题出在导航栏中。

1.  问题：我要删除的每个按钮之间都有一个间距/间隙

2.  问题：当鼠标悬停在导航栏的背景上时，所有按钮（除了主页按钮）都会展开以超出导航栏的背景。导航栏的高度为 40px。

这是我对栏的 HTML 编码：

```
<div class="wrap">

        <ul class="navigation">
            <li class="current"><a href="index.html"><em class="home"/><b>Home</b></a></li>
            <li><a href="second.html"><em class="photos"/><b>Photos</b></a></li>
            <li><a href="projects.html"><em class="projects"/><b>Projects</b></a></li>
            <li><a href="about.html"><em class="about"/><b>About</b></a></li>
            <li><a href="contact.html"><em class="contact"/><b>Contact</b></a></li>
        </ul> 
```

这是我的 CSS 代码：

```
body {
        font-family:sans-serif;
        background: url(images/background3.png);
    }

    .navigation {
        background:#1841c8 url(Navigation/Navigation/nav_background.png);
        height:40px;
        margin-bottom:0px;
        display:block;
        min-width:625px;
    }

    .navigation li{
        display:inline-block;
        line-height: 40px;
            }

    .navigation li a{
        color:#FFFFFF;
        padding: 11px 5px 15px;
    }

    .navigation li a em{
        height:32px;
        display:inline-block;
        padding: 0 5px 6px 50px;
        font-weight:bold;
        vertical-align: middle;
        background-position: 0 50%;
    }

    .navigation li a:hover{
        color:#00CCFF;
        background: url(Navigation/Navigation/nav_hover.png);
        text-decoration:none;
        padding: 11px 5px 10px;
    }

    .navigation .current a {
        color:#FFFFFF;
        background:url(Navigation/Navigation/nav_hover.png);
        padding-bottom:11px;
    }

    /*Navigation bar icons*/
    .navigation li a em.home {
        background-image: url(Navigation/Icon_images/home.png);
        background-repeat: no-repeat;

    }

    .navigation li a em.photos{
        background-image: url(Navigation/Icon_images/Photo.png);
        background-repeat: no-repeat;
    }

    .navigation li a em.projects{
        background-image: url(Navigation/Icon_images/projects.png);
        background-repeat: no-repeat;
    }

    .navigation li a em.about{
        background-image: url(Navigation/Icon_images/about.png);
        background-repeat: no-repeat;
    }

    .navigation li a em.contact{
        background-image: url(Navigation/Icon_images/Contact.png);
        background-repeat: no-repeat;
    }

    .wrap {
          margin:auto;
          width:80%;
          background:yellow;
        } 
```

希望有人可以帮助我解决这个问题，我已经花了几个小时对其进行故障排除/寻找解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T18:10:43.930

`li`您的问题来自元素之间的空白。几天前我已经回答了同样的问题。看看 -> [Inline-Block 没有边距？](https://stackoverflow.com/questions/11459714/inline-block-without-margins/11461206#11461206)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T09:49:41.983

@Jonas Pedersen，您是否尝试过使用`float`属性`li`？

我刚刚检查了你的网站，并用萤火虫做了一点调整。以下是我尝试为您的导航 CSS 更改的内容：

```
.navigation {
    background:#1841c8 url(Navigation/Navigation/nav_background.png);
    height:65px; /*add more height (was 40px)*/
    margin-bottom:0px;
    display:block;
    min-width:625px;
}

.navigation li{
    display:inline-block;
    line-height:40px;
    float:left; /*add 'float' property for the navigation menu*/
}

li {
    list-style: none outside none;
    margin-bottom: 20px; /* delete this property */
} 
```

好吧，这是回顾：

1.  `height`为_`.navigation`
2.  添加`float: left`为`.navigation li`
3.  `margin-bottom`从*{style.css : line 146}*中删除`li`

 *希望它可以帮助你...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T19:34:48.283

修复菜单按钮之间的间隙

```
.navigation li a {
    color: #FFFFFF;
    display: block;
    padding: 2px 0 15px;
} 
```*

# git - 在为 bitbucket 存储库设置同步时，由于不是 git 存储库而出现错误

> ID：11594663
> 
> 赞同：1
> 
> 时间：2012-07-21T18:06:56.943
> 
> 标签：git, bitbucket

尝试在本地服务器上为 bitbucket 存储库设置同步时，我收到的错误**不是 git repo**。以下是我触发的命令：

```
$ git --git-dir=~/gitRepo/my_repo.git remote add origin git@bitbucket.org:username/my_repo.git
fatal: Not a git repository: '~/gitRepo/my_repo.git' 
```

即使我尝试初始化 repo（以前我没有这样做），但我仍然遇到同样的错误。以下是我在查看 Git 教程后遵循的步骤（因为我是 Git 新手，如果我问了非常基本的问题，我很抱歉）

```
$ git init
Initialized empty Git repository in ~/gitRepo/my_repo/.git/
$ git --git-dir=~/gitRepo/my_repo remote add origin git@bitbucket.org:username/my_repo.git
fatal: Not a git repository: '~/gitRepo/my_repo' 
```

是我想念的东西。基本上我正在尝试设置 Redmine 与 BitBucket 的同步，这是所需的步骤之一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T22:33:30.213

如果您在执行第一个命令时没有初始化 repo，那么错误消息是正常的：您需要在添加任何远程之前创建一个 repo。

至于您的第二条错误消息：如果您位于 git repo 目录本身（您在 a 之后`git init`），那么正如[Issac](https://stackoverflow.com/users/1371116/isaac)评论的那样，您不需要`--git-dir`参数。
但是，如果您仍想添加一个参数，则a 为非裸仓库`--git-dir`引用的路径必须以结尾（就像您在第一个命令中所做的那样）。`--git-dir``/.git`

即使在创建 git repo 之后`~/gitRepo/my_repo`：

*   `~/gitRepo/my_repo`不是 git repo
*   `~/gitRepo/my_repo/.git`是

# android - 通过 (B)ASH 生成颜色渐变

> ID：11594670
> 
> 赞同：0
> 
> 时间：2012-07-21T18:08:36.020
> 
> 标签：android, bash, colors, busybox, ash

我有一个 linux/bash 脚本，可以将多个 RGB 颜色渐变发送到多个灯光。每盏灯都可以有自己的颜色，但所有颜色都应该使用相同的时间来淡入/淡出。因此，它根据初始值和速度乘数发送 3 个不同目标值范围的序列。

我遇到的问题是颜色由 3 个通道红色、绿色和蓝色（0-255）定义，根据目标颜色，它可能意味着一个通道的值为 10，另一个通道的值为 230。工作顺利我需要他们从 0 开始，并在相同的时间/步数内以最大值完成。更成问题的是，我不能将值用作 0.112。它必须是 0 或 1。

目前，我已经能够通过限制我使用的颜色数量并且只为每个通道设置“半范围”值来解决这个问题。例如。R255 G128 B000。通过这种方式，我已经能够使其工作（在可接受的误差范围内）。对于每个通道我已经制作了一个单独的基础乘数，它将影响每个通道淡入/淡出的速度（所以对于 255 2x , 对于 128 1x, 对于 000, 0x)

由于我有 3 盏灯，我只想将值序列发送到我需要的灯，我还将 3 个 RGB 值相加以查看是否等于零，如果是，则不会触发分配的灯。

[Q] 谁能帮我优化这个脚本，让它可以处理所有的 RGB 值，我还可以让它在颜色之间褪色。最重要的条件是我需要能够应用全局速度乘数，并且不能是逗号后面的值。

以下是我到目前为止所做的脚本。我已经取出了其他灯的副本，因为它基本上是相同线条的复制粘贴，但名称不同。

```
maxR=000, maxG=000, maxB=255, speed=10, 
toggle=$(($maxR + $maxG + $maxB))
subR=$(echo $maxR | cut -c-1), subG=$(echo $maxG | cut -c-1), subB=$(echo $maxB | cut -c-1), 
mulR=$(($subR*$speed)), mulG=$(($subG*$speed)), mulB=$(($subB*$speed))

count=0

while [ $count -lt 3 ] ; do
    count=$(($count +1))
    while [ $varR -lt $maxR ] || [ $valG -lt $maxG ] || [ $valB -lt $maxB ] ; do
        [[ $toggle -gt 0 ]] && $valR to red && $valG to green && $valB to blue
        varR=$(($varR +$mulR))
        valG=$(($valG +$mulG))
        valB=$(($valB +$mulB))
    done

    sleep 1

    while [ $varR -gt 0 ] || [ $valG -gt 0 ] || [ $valB -gt 0 ] ; do
        [[ $toggle -gt 0 ]] && $valR to red && $valG to green && $valB to blue
        varR=$(($varR -$mulR))
        valG=$(($valG -$mulG))
        valB=$(($valB -$mulB)) 
    done

    sleep 3
done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:03:39.483

此脚本生成 RGB 值序列，这些值表示从任意任意颜色到任意其他颜色的平滑渐变。它只使用八位整数（当然，Ash 和 Bash 只能进行整数数学运算，尽管它们能够处理更大的值）。

淡入淡出可以在任何方向。例如，红色可能会从小值变大，而蓝色可能会从大变小。

在两种颜色之间采取的最小步数。可以传递一个步进值和一个睡眠值来控制衰减发生的速率。

有直接设置颜色的功能。

一些附加信息包含在评论中。

最后有一些演示代码。它输出大量文本（该`set_color()`函数`echo`用作占位符）。使用`less`或其他寻呼机，以便您可以查看输出并滚动浏览它：

```
./fader | less 
```

将 echo 替换为实际设置颜色的命令。

```
#!/usr/local/bin/ash
#
# by Dennis Williamson - 2012-07-26
# for http://stackoverflow.com/questions/11594670/generate-color-fades-via-bash
#
# fade smoothly from any arbitrary color to another
#
# no values are range checked, but this feature could be easily added
#

set_color () {
    local light=$1
    red=$2 green=$3 blue=$4 # global - see below
    # placeholder for the command that sets led color on a particular light
    echo "$light, $red, $green, $blue"
}

abs () {
    if [ $1 -lt 0 ]
    then
        echo "$(($1 * -1))"
    else
        echo "$1"
    fi
}

max () {
    local arg max=0
    for arg
    do
        if [ "$arg" -gt "$max" ]
        then
            max=$arg
        fi
    done
    echo "$max"
}

fade () {
    local light=$1 step=$2 sleep=$3
    local start_red=$4 start_green=$5 start_blue=$6
    local end_red=$7 end_green=$8 end_blue=$9
    local delta_red=$(abs $(($end_red - $start_red)) )
    local delta_green=$(abs $(($end_green - $start_green)) )
    local delta_blue=$(abs $(($end_blue - $start_blue)) )
    local i=0
    local max=$(max "$delta_red" "$delta_green" "$delta_blue")

    if [ "$delta_red" = 0 ] && [ "$delta_green" = 0 ] && [ "$delta_blue" = 0 ]
    then
        return
    fi

    if [ "$step" -lt 1 ]
    then
        step=1
    fi

    while [ "$i" -le "$max" ]
    do

        red=$(( $start_red + ($end_red - $start_red)  * $i / $max ))
        green=$(( $start_green + ($end_green - $start_green) * $i / $max ))
        blue=$(( $start_blue + ($end_blue - $start_blue) * $i / $max))
        set_color "$light" "$red" "$green" "$blue"
        sleep $sleep
        i=$(($i + $step))
    done
    # $red, $green and $blue are global variables and will be available to the
    # caller after this function exits. The values may differ from the input
    # end values if a step other than one is chosen. Because of that, these
    # values are useful for subsequent calls as new start values to continue
    # an earlier fade or to reverse fade back to a previous start value.
}

# demos (produces a lot of output)

# fade LED, step, sleep, start R G B, end R G B
fade one 3 0 100 200 15 154 144 200
fade one 3 0 "$red" "$green" "$blue" 100 200 15
fade two 1 1 30 40 50 70 20 10
fade three 1 0 0 255 0 0 0 255

i=0
while [ "$i" -lt 10 ]
do
    set_color one 255 0 0
    set_color two 0 255 0
    set_color three 0 0 255
    sleep 2
    set_color one 0 255 0
    set_color two 0 0 255
    set_color three 255 0 0
    sleep 2
    set_color one 0 0 255
    set_color two 255 0 0
    set_color three 0 255 0
    sleep 2
    i=$(($i + 1))
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-17T01:51:48.347

昨天我实现了类似于你所要求的东西，为此我分解了 RGB 颜色以独立处理过渡。

对于过渡，我使用直线的矢量方程。

```
r = p0 + tv 
```

假设我想从绿色（**00ff00**）过渡到洋红色（**ff00ff**）

所以起点是绿色，**p0** = (0, 255, 0)

那么你需要找到导向向量（**v**），因为你只需在终点和起点之间进行向量减法

```
v = pf - p0 
```

其中**pf**是洋红色 (255, 0, 255)（最后一点）

最后，**“t”**的值是一个浮点数，表示你想在一种颜色和另一种颜色之间执行的步数，这个值在0到1之间，例如如果你希望在255中发生过渡步数，然后除以 1/255

> 您必须考虑到 bash 脚本不支持浮点操作，为此，您必须使用允许您执行此类操作的工具，例如：**bc**或**python**或其他

```
t=$(echo 'print(1/255)' | python3) 
```

为了计算**r**的值，在特定坐标 (R,G,B) 中，我在 bc 命令的帮助下使用了以下函数

```
ecVec(){
    echo $(echo "scale=2;$1+$2*$3" | bc)
} 
```

最后，您必须执行转换循环（例如使用 for 循环），为每个组件（红色、绿色、蓝色）调用 de **ecVec 函数**

```
for i in $(seq -f "%03g" 1 255)
do  
        tInc=$(bc <<< "$i * $t")
        tIncRounded=$(printf "%.3f\n" $tInc)

        qRed="$(ecVec $iR $vR $tIncRounded)"
        qRedRounded=$(printf "%.0f" $qRed;)

        qGreen="$(ecVec $iG $vG $tIncRounded)"
        qGreenRounded=$(printf "%.0f" $qGreen;)

        qBlue="$(ecVec $iB $vB $tIncRounded)"
        qBlueRounded=$(printf "%.0f" $qBlue;)

        setColor $qRedRounded $qGreenRounded $qBlueRounded $LED 

done 
```

我使用**setColor 函数**来可视化（输出）颜色过渡

> 请注意，我还使用了舍入，因为 RGB 颜色模型仅支持整数

那是我的结果

[![DualShock4彩虹](../Images/0fae9637e4dd7eace5b7ef8fe09ff5b6.png)](https://i.stack.imgur.com/xkGxj.gif)

# wordpress - 链接到子类别的 Wordpress 类别

> ID：11594678
> 
> 赞同：1
> 
> 时间：2012-07-21T18:09:28.783
> 
> 标签：wordpress, categories

我正在尝试在 Wordpress 中完成三步页面层次结构。
以下是面包屑导航的示例：

> 数学 > 代数 > 变量

我有一个页面列出了我所有的顶级类别：

> `<?php wp_list_categories('depth=1'); ?>`

接下来我需要做的是，当您单击一个类别时，它会将您链接到一个*仅列出其所有子类别*的页面。默认情况下，它会将您带到包含该类别中每个帖子的页面。

所以你可以在第一页选择数学，然后是一个包含算术、代数、几何等子类别的页面，然后当你选择你的子猫时，它会将你带到帖子。

如果您对更好的方法有任何想法，我也愿意使用任何替代方法。使用内置的类别系统似乎是最合适的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T19:13:18.190

wp_list_categories 可以接受一个参数“child_of”，它将返回一个子类别列表。因此，在您的个人类别列表页面中，您可以使用相关类别的类别 ID 来检索子项，如下所示：

```
<?php $children = wp_list_categories('child_of='.$your_category->cat_ID); ?> 
```

wp_list_categories 的更多文档可以在这里找到：[http ://codex.wordpress.org/Template_Tags/wp_list_categories](http://codex.wordpress.org/Template_Tags/wp_list_categories)

# javascript - 为什么这不起作用？使用鼠标指针推动一个盒子

> ID：11594680
> 
> 赞同：0
> 
> 时间：2012-07-21T18:09:31.747
> 
> 标签：javascript, javascript-events

我是 Javascript 的初学者，并试图制作一个简单的脚本，使用鼠标指针推动一个框。但不幸的是，由于某种原因它不起作用，我希望你们能帮助我。

（这个脚本真的很原始，只是从左边推箱子到现在）。

**索引.html：**

```
<html>
<head>
    <title>Chase the box</title>
    <style>
        body {
        }

        .css-box{
            width : 100px;
            height : 100px;
            margin : auto;
            background-color : blue;
        }

    </style>
</head>

<body>
    <div id="box" class="css-box"></div>
    <script type="text/javascript" src="script.js"></script>
</body> 
```

**脚本.js：**

```
var box = document.getElementById("box");

var pushBox = function(e){
    if(e.pageX == box.offsetLeft){
        box.style.left = box.style.left + 1 + "px";
    }
};

document.addEventListener("mousemove" , pushBox); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T18:20:10.930

JQuery 版本，但完成与您尝试做的相同

[http://jsfiddle.net/3mxC3/1/](http://jsfiddle.net/3mxC3/1/)

我在您的脚本中看到的主要问题是 e.pageX == box.offsetLeft 意味着它只会在 pageX 正好是 offsetLeft 时触发。

mousemove 事件不会触发每个像素，因此这种方法不起作用。完成它的最简单方法是将 mousemove 设置到实际的盒子上（所以它只会在用户鼠标悬停在盒子上时触发）

其次，在盒子上设置 left 属性没有做任何事情，因为左/右是由边距设置的：auto。将其更改为 position: absolute 使其实际上关注 left 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T18:20:41.920

您需要设置元素`position`以外的 CSS 属性`static`，以便 CSS`left`属性可以工作。

```
.css-box{
     position: absolute;
     width : 100px;
     height : 100px;
     margin : auto;
     background-color : blue;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T18:26:18.853

`box.style.left`是一个字符串。在 JavaScript 中，如果你这样做`string + int`， int 将被强制转换为字符串，你会得到`string + string`. 例如，如果`box.style.left`你`10px`得到：

```
'10px' + 1 + 'px'
  int typecasted to string
'10px' + '1' + 'px'
  create one string
'10px1px' 
```

这将是 的值`box.style.left`。那不是你想要的...

要解决这个问题，您可以使用`parseInt()`将字符串解析为 int：

```
box.style.left = parseInt(box.style.left) + 1 + "px"; 
```

并且您的 if 仅在光标的 X 位置与`box.offsetLeft`. 这几乎是不可能的，我不知道你想用它做什么？

至少，`box.style.left`第一次没有价值。您需要先将值设置为`0`然后使用事件。

一个工作示例将是：http: [//jsfiddle.net/WouterJ/enLwh/](http://jsfiddle.net/WouterJ/enLwh/)（请注意我已添加`position: relative;`，因为我们不能`left`在当前位置使用该属性）

* * *

更多提示，因为您是 JS 新手：

*   如果你做这样的事情：

    `X = X + 12;`

    您可以将其缩短为：

    `X += 12;`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-21T18:43:31.883

最后，您最好在加载时添加内容，而不是让脚本存在于正文中

这是一个位于页面顶部的脚本，其余问题已经由其他人在这里解决

```
var pushBox = function(e){
    if(e.pageX >= box.offsetLeft){
        box.style.left = (parseInt(box.style.left,10) + 1) + "px";
    }
},box;
window.onload=function() {
  box = document.getElementById("box");
  document.addEventListener("mousemove" , pushBox);
} 
```

# java - 如何在java中计算网站的响应时间

> ID：11594684
> 
> 赞同：0
> 
> 时间：2012-07-21T18:10:50.330
> 
> 标签：java, javascript, jquery, swing, jakarta-ee

我正在尝试建立一个网站监控系统。我需要计算网站响应所需的时间或总加载时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T18:21:10.663

如果要计算 http 请求和响应之间的往返行程，可以使用[apache http components](http://hc.apache.org/)。这曾经被称为 apache http 客户端。

这是我用来发出请求的一些示例代码。您可以在请求之前和之后获取时间戳。

```
 HttpClient httpclient = new DefaultHttpClient();
    URIBuilder builder = new URIBuilder();
    URI uri = null;
    HttpEntity entity = null;
    InputStream inputStream = null;
    JSONObject jsonObject = null;
    URL url = this.getClass().getClassLoader().getResource("json" + File.separator + "newInstall.json");
    try {
        String json = FileUtil.readFile(url.getPath());
        builder.setScheme("http").setHost(host).setPort(8080).setPath(basePath + authResource)
                .setParameter("sig", "sig").setParameter("params", json);
        uri = builder.build();
        log.info("uri: {}", uri);
        HttpGet httpget = new HttpGet(uri);
        HttpResponse response = httpclient.execute(httpget);
        entity = response.getEntity();
        if (entity != null) {
            inputStream = entity.getContent();
            String jsonString = IOUtils.toString(inputStream, "UTF-8");
            jsonObject = new JSONObject(jsonString);
            log.info("auth response: {}", jsonString);
        }
    } catch (Exception e) {
        log.error("error", e);
    }finally {
        if(inputStream != null) {
            try {
                inputStream.close();
            }catch(Exception ex) {
                log.error("error closing input stream", ex);
            }
        }
    } 
```

# icloud - 删除 App 后 iOS iCloud 未恢复

> ID：11594686
> 
> 赞同：3
> 
> 时间：2012-07-21T18:10:54.960
> 
> 标签：icloud, iso

我试图让 iCloud 中的键值存储工作，但我遇到了一个奇怪的问题。

我使用以下方式存储数据：

```
[[NSUbiquitousKeyValueStore defaultStore] setObject:@"SomeValue" forKey:@"SomeKey"];
[[NSUbiquitousKeyValueStore defaultStore] synchronize]; 
```

我使用以下方法读取数据：

```
someValue = [[NSUbiquitousKeyValueStore defaultStore] objectForKey:@"SomeKey"]; 
```

当我启动和停止应用程序时，这一切都很好。值被存储，我看到正在读取的值。一切都很好。

然后我从我的设备中删除应用程序并再次加载它（通过 xcode）。现在，我没有看到任何数据从云端下来。

您可以删除应用程序然后恢复数据（在我的情况下是游戏保存状态）不是 iCloud 的要点之一吗？

为什么删除我的应用程序并重新安装它（在 xcode 中运行它）会导致所有 iCloud 数据消失？

我在设备上运行它，而不是模拟器。我已经在 iOS 5 和 iOS 6 上尝试过，结果相同。

NSUbiquitousKeyValueStore 似乎很容易使用，但我显然做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T04:43:39.817

首先，在读取数据之前尝试同步，以确保最新的更新来自 iCloud。

你有其他可以测试的设备吗？如果是这样，请在一台设备上运行写入代码，然后在另一台设备上运行读取代码。可能是即使您使用的是 NSUbiquitiousKeyValueStore，但您认为它实际上并没有同步。它可以在您的设备上运行的原因是键值存储在本地可用，但在 iCloud 中不可用。因此，当您删除应用程序时，您将删除数据的本地（也是您唯一的）副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T07:17:36.893

我发现您需要注册 NSUbiquitousKeyValueStoreDidChangeExternallyNotification 通知才能使同步工作。没有它，它不会在重新安装后保留数据。

```
- (void)iCloudKeyStateChanged:(NSNotification*)n {
}

- (BOOL)application:(UIApplication*)application didFinishLaunchingWithOptions:(NSDictionary*)launchOptions {

    ...

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(iCloudKeyStateChanged:) name:NSUbiquitousKeyValueStoreDidChangeExternallyNotification object:nil];

} 
```

# mysql - 获取大型 MySql 表中值频率分布的有效方法

> ID：11594687
> 
> 赞同：2
> 
> 时间：2012-07-21T18:10:55.340
> 
> 标签：mysql, mysql-python, frequency-distribution, large-data

我有两张桌子，即。**Total_Data**和**Distinct_S1**。

**Total_Data**有 350 万行。字段：“S1”、“S2”、“S3”、“S4”

**Distinct_S1**有 100 万行。字段：“S1”、“频率”。**Distinct_S1**的“ S1”由**Total_Data**的“S1”中出现的所有不同值组成。

**手头的任务： Distinct_S1** for S1 = 'xxyy'的“频率” （假设）应该包括在**Total_Data**中出现 'xxyy' 的次数。

我在 python 脚本（导入 MySQLdb）中使用了以下查询来完成手头的任务：

```
cur.execute("update Distinct_S1 set frequency=(select count(*) from Total_Data where S1='%s') where S1='%s'"%(S1_val, S1_val) 
```

上面的查询工作正常，但似乎需要很多时间。有没有其他更快的方法来达到同样的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T18:17:57.177

您可以将多表更新语法与连接一起使用来一次更新所有行。有关语法，请参阅[手册](http://dev.mysql.com/doc/refman/5.6/en/update.html)。

但更简单的方法是直接在表中插入所有值，而无需先用不同的值填充它。

```
INSERT INTO Distinct_S1 (S1, frequency)
SELECT S1, COUNT(*)
FROM Total_Data
GROUP BY S1 
```

# ruby-on-rails - 通过按钮使用户成为管理员用户，而无需在 Rails 中访问该属性

> ID：11594691
> 
> 赞同：0
> 
> 时间：2012-07-21T18:11:23.570
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

据我了解，如果我让我的用户模型中的管理员布尔值列在 attr_accessible 中，则会产生安全漏洞。但是，我希望在我的显示页面上有一个链接，让现有的管理员用户向其他用户授予管理员权限。我想知道如何去做这件事？我目前在我的用户显示视图中的代码包括：

```
 <% if current_user.admin? && @user.admin == false %>
    <%= link_to "Make Administrator", '#', 
    data: { confirm: "Make this user an admin?" }, class: "btn btn-large btn-primary" %>
  <% elsif current_user.admin? && @user.admin%>
    <%= link_to "Remove Administrator", '#', class: "btn btn-large btn-danger" %>
  <% end %> 
```

我不完全确定放什么而不是'#'？@user.toggle!(:admin) 似乎不起作用，因此任何指针都将不胜感激。先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T18:47:46.610

首先，因为这是一个动作，所以它应该是一个按钮，而不是一个链接。

```
<%= button_to user_path(@user), :method => :put ... %> 
```

控制器代码

```
def update
 if params[:admin] 
   user.update_attribute(:admin, true)
   redirect_to ...
 end
...
end 
```

或者如果您更愿意将逻辑保留在模型中

```
def update
 ...
 if params[:admin]
  @user.make_admin
 end
 ...
end 
```

型号代码

```
def make_admin
 self.update_column(:admin, true)
end 
```

# php - 使用 explode 将内容添加到现有数组

> ID：11594692
> 
> 赞同：1
> 
> 时间：2012-07-21T18:11:24.273
> 
> 标签：php

我在一个循环中有这个语句。

```
$chosenUrls = explode ( ',' , $connect[$i]['url'] ); 
```

有没有办法让它添加到 $chosenUrls 数组中，而不是替换其中的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T18:14:02.667

尝试：

```
$chosenUrls=array();

 for(...)
{
  array_push($chosenUrls,explode ( ',' , $connect[$i]['url'] ));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T18:40:44.307

您当前的代码告诉它`$chosenUrls`每次都替换。你需要修改它：

```
for(...){

 $chosenUrls[] = explode ( ',' , $connect[$i]['url'] );

} 
```

注意`[]`后面`$chosenUrls`。`$chosenUrls`这将在每次迭代中推入一个新元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T18:36:39.097

您可以让 $chosenUrls[] = explode ( ',' , $connect[$i]['url'] ) 在每次迭代中在数组中添加新的 url。

# c# - 键盘事件：顺序有保证吗？

> ID：11594693
> 
> 赞同：2
> 
> 时间：2012-07-21T18:11:36.957
> 
> 标签：c#, java, c++, winapi, keyboard

对于按下单个键，可以处理多个事件。

有：`KeyDown`, `KeyPressed`, `KeyUp`.

是否保证应用程序将按该顺序接收这些事件？

我的意思是：是单个按键事件的顺序，而不是一系列不同的按键。

**语境：**

在遗留 C++ 应用程序中的按键事件出现一些问题后，我使用`spy++`. 在那里我看到命令似乎有时不正确，并且`keypressed`不是每个`keydown`or都被解雇`keyup`。

但是，我确信事件应该完全按照那个顺序触发，但是在互联网上找不到任何东西。所以我在这里提出了这个问题。

请注意，这不是多语言问题，但我很感兴趣这对于 C++、Java 和 C# 是否适用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T19:47:16.953

在大多数应用程序中，它们应该在发生时按顺序发生。但是您的窗口可能不会收到输入的每个字符的每个事件。

例如，在 Windows 中，如果您按住一个键，您将看到一个`KeyDown`和/或`KeyPressed`在该键重复时重复出现，而`KeyUp`一旦松开该键，您将看到一个。

## 编辑：

不过，现在我考虑了一下……Windows 开始时只会向您的窗口发布`WM_KEYDOWN`和`WM_KEYUP`消息（并且只有当您有焦点时）。 `WM_CHAR`消息（Win32 的类似物`KeyPressed`）基于消息循环调用时的消息发布`TranslateMessage`。这意味着两件事：

*   如果窗口有消息积压，API*可能*只是将消息添加到队列的末尾 (IDK)；这对我来说更有意义（消息队列毕竟是一个*队列*`WM_KEYUP`，而不是堆栈），但这确实意味着如果队列中已经有一个 for 该键（例如，如果用户点击并释放了一个键，而另一条消息正在处理），相应的`WM_CHAR`可能会出现*在*它之后。
*   像 C 和 C++ 这样的语言在处理消息方面具有更大的灵活性（阅读：更少的内置自动化）；为了让他们获得`WM_CHAR`消息，他们必须明确调用`TranslateMessage`或自己进行翻译（除非另一个应用程序向其发布此类消息）。对于后者，不知道消息将以什么顺序发布。

此外，如评论中所述，如果在按下键时焦点切换，您可能只会看到 a`KeyUp`或`KeyDown`。（键状态在焦点切换之前就已经是这样了，Windows 可能不会告诉你。）死键（不自己生成字符的键）根本不会触发 a `KeyPressed`（尽管它们通常会触发`KeyUp`和`KeyDown`)。他们通常只是等待下一个真实角色并对其进行修改。

**所有这些的简短版本**：您可以依赖`KeyDown`事件彼此相关的出现顺序。与 相同`KeyPressed`，甚至`KeyUp`。但是，至少在 Windows 中，这三种消息类型并没有真正相互协调。所以不要假设 every`KeyUp`会匹配 a `KeyDown`（反之亦然），或者`KeyPressed`出现在`KeyUp`.

您可能还应该决定是否要处理*字符*或*键*。我认为这是混乱的一部分；这两个实际上是不同的概念，大多数时候你只真正关心一个或另一个。虽然 Win32 据称会在您处理事件时告诉您关键代码，但该`KeyPressed`事件的真正意图是告诉您输入了什么*字符*。（它被称为`WM_CHAR`而不是`WM_KEYPRESS`.:) 以及为什么 .net 的`KeyPressEventArgs`类型只有 a`KeyChar`而没有 a `KeyCode`。）另外两个将键盘基本上视为一堆按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T19:40:20.010

如果您是 Windows 用户，这里的经验法则是：通过日志记录或调试器检查事件的顺序，然后假设始终如此。

这并不完美，但这适用于 95% 的情况。我多次听到 Windows 团队总是拒绝改变任何东西的故事，因为 100% 肯定这会破坏某些东西。

这是 Windows 2.0 时代文档不佳的直接结果。

# android - 如何更改主线程外的视图？

> ID：11594694
> 
> 赞同：1
> 
> 时间：2012-07-21T18:11:36.537
> 
> 标签：android, multithreading, tcp

我想在我的手机和PC之间建立一个客户端服务器连接，

```
package com.example.tcptest;

import java.io.BufferedWriter;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.net.InetAddress;
import java.net.Socket;
import java.util.Arrays;
import java.util.Timer;
import java.util.TimerTask;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;
import android.support.v4.app.NavUtils;

public class MainActivity extends Activity {

    TCPClient tcpclient;
    Boolean isconnected = false;
    Button connectBtn;
    Button sendBtn;
    TextView ipport;
    TextView sendtext;
    TextView rcvtext;
    Timer timer;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        //Buttons
        connectBtn=(Button)findViewById(R.id.connectbtn);
        sendBtn=(Button)findViewById(R.id.sendbtn);

        ipport = (TextView)findViewById(R.id.serverip);
        sendtext = (TextView)findViewById(R.id.sendtxt);
        rcvtext = (TextView)findViewById(R.id.console);      

        connectBtn.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {   
                //String[] i_po = ((String)ipport.getText()).split(":");
                //tcpclint = new TCPClient(i_po[0], Integer.parseInt(i_po[1]));         

                Thread cThread = new Thread(new ClientThread());
                cThread.start();                
            }

        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
    public class ClientThread implements Runnable {     
        public void run() {
            tcpclient = new TCPClient("192.168.0.101", 5000);
            tcpclient.connect();
            tcpclient.send("hello server");
            rcvtext.setText(tcpclient.getdata());           
        }
    }

} 
```

在这种情况下，我无法更改 的文本，`rcvtext`因为它在线程中运行，如果连接成功，是否有可能更改 的内容，`rcvtext`而不是我想将日志写入`rcvtext`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T18:13:22.760

在你`ClientThread`的`run()`方法中，实现这个：

```
MainActivity.this.runOnUiThread(new Runnable() {
    public void run() {
        rcvtext.setText(tcpclient.getdata());
    }
}); 
```

这告诉 Android 尽可能在 UI 线程（主应用程序线程）上运行它，而不是在当前线程上运行。

# php - 在 PHP 中使用 mySQL_num_rows 的困难

> ID：11594701
> 
> 赞同：0
> 
> 时间：2012-07-21T18:12:07.257
> 
> 标签：php, mysql

```
$i_id = $_GET['iiSL'];   

require_once('../include/dbc.php');    

$sql = "SELECT invite_id FROM invite_requests WHERE invite_id = '$i_id'";
$result = mysql_query($sql);
if(mysql_num_rows($result == 1))
{
echo 'GOOD ID EXISTS';
//ECHO IS JUST TO TEST  
} 
else
{
echo 'BAD ID IS NOT IN DB';
//ECHO IS JUST TO TEST
} 
```

为什么这不起作用？它快把我逼疯了。

错误 `Warning: mysql_num_rows(): supplied argument is not a valid MySQL result resource`

所有拼写、语法、句法和大小写都是正确的。URL 正在传递`$i_id`变量。它的回声正确。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T18:13:33.213

条件有错别字..试试这个..

```
if(mysql_num_rows($result) == 1) 
```

您正在将 result 传递`$result == 1`给`mysql_num_rows`which 期望结果资源为`mysql_query()`..:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T18:29:39.300

将代码更改为

```
$query1=mysql_query("SELECT count(invite_id) as total FROM invite_requests WHERE invite_id = '$i_id';");
$row = mysql_fetch_array($query1);
if ($row["total"]>"0")
{
echo 'GOOD ID EXISTS';
//ECHO IS JUST TO TEST  
} 
else
{
echo 'BAD ID IS NOT IN DB';
//ECHO IS JUST TO TEST
}           { 
```

试试这个

# c# - 如何从谷歌静态地图 API 获取图像

> ID：11594702
> 
> 赞同：4
> 
> 时间：2012-07-21T18:12:15.083
> 
> 标签：c#, asp.net-mvc, google-maps, google-maps-api-3

我使用此代码从 Google API 生成静态图像，但我有太多请求，所以有时我会被 Google 过度使用。

```
string latlng = location.Latitude + "," + location.Longitude;
string path = "http://maps.googleapis.com/maps/api/staticmap?center=" + latlng +
   "&zoom=16&size=200x200&maptype=roadmap&markers=color:blue%7Clabel:S%7C" +
   latlng + "&sensor=false"; 
```

是否可以从 C# 调用它来生成和保存图像？我找不到获取图像对象的方法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-21T18:28:26.997

```
using (WebClient wc = new WebClient()) {
  wc.DownloadFile(url, @"c:\temp\img.png");
} 
```

# asp.net - 用于连接到许多数据库的定制连接类

> ID：11594705
> 
> 赞同：0
> 
> 时间：2012-07-21T18:13:07.397
> 
> 标签：asp.net, .net

我已阅读以下帖子中接受的答案：[ExecuteReader 需要一个开放且可用的连接。连接的当前状态是 Connecting](https://stackoverflow.com/questions/9705637/executereader-requires-an-open-and-available-connection-the-connections-curren/9707060#9707060)

我正在考虑创建一个类，该类将使用接口 (dbConnection) 连接到适当的数据库，即 SQL Server (SQLConnection) 或 Oracle (OracleConnection)。该类将具有打开、关闭、处置等方法以及查找连接字符串的方法。该类将允许应用程序使用 dbConnection 接口连接到 SQL 服务器数据库、Oracle 数据库或 Access 数据库。有问题的应用程序连接到许多数据库。

我不认为这违反了已接受答案中所述的任何规则，例如没有共享变量。但是，由于答案中所述的原因，如果这是不好的做法，我会徘徊。

如果需要，我会发布一些代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T19:03:56.493

命名空间中的类[`System.Data.Common`](http://msdn.microsoft.com/en-us/library/9tahwysy)正是您计划使用接口的目的，因此在这方面您不需要编写此类接口。

从命名空间的 MSDN 页面：

> System.Data.Common 中的类旨在为开发人员提供一种编写适用于所有 .NET Framework 数据提供程序的 ADO.NET 代码的方法。

因此，您剩下要做的就是使用这些类编写通用数据访问代码，并在其他地方编写将*实际*提供程序传递给它的代码。

# iphone - 如何在 iPhone 中实现类似蓝色背景的电子邮件地址？

> ID：11594711
> 
> 赞同：0
> 
> 时间：2012-07-21T18:13:55.067
> 
> 标签：iphone, ios, ios5, ios4

我想在几个单词周围实现一个蓝色背景，将它们组合在一起——看起来就像默认 iPhone 电子邮件客户端中的电子邮件地址。（详见附件）。

有人知道该怎么做吗？！

![在此处输入图像描述](../Images/8f82d35e9b2837bfaa7c0e0b59710e45.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T18:26:27.157

截取背景图片并制作你需要的image.png，并使用以下方法

```
 UIImage *backgroundImage = [[UIImage imageNamed:@"image.png"] stretchableImageWithLeftCapWidth:7.0 topCapHeight:0.0]; 
```

7.0 和 0.0 取决于您的 image.png 大小。

Apple 的示例代码[UICatalog.app](https://developer.apple.com/library/ios/#samplecode/UICatalog/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007710)供您参考。在该项目中搜索“stretchableImageWithLeftCapWidth”。这是按钮背景图像的示例。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T18:26:35.807

你可以试试[JSTokenField](https://github.com/jasarien/JSTokenField)它看起来很酷。

# rdf - 将三元组转换为 rdf uriref 格式

> ID：11594712
> 
> 赞同：1
> 
> 时间：2012-07-21T18:14:00.073
> 
> 标签：rdf, triples, rdfstore

我有一个 python 函数，它在主题、对象和谓词中定义三元组并遍历它们，但我需要将三元组转换为 RDF URIRef 数据格式，以便我可以将其存储在我的 RDF 存储中。我该怎么办？

我正在为我的 RDF 存储使用 RDFLib，如上所述，我试图将字典中的一组数据（具体的传感器数据）转换为 RDFLIb URIRef 格式。

例如，如果我有 self.triples[self.identifier][prov['subject']]=self.subject.identifier self.triples[self.identifier][rdf['type']]=prov['alternateOf'] 和我使用 RDFLib 将它们转换为 URIRef 格式

至于商店，我使用的是 n3 格式的 RDFStore

我的观点是：RDFLib 使用 Python 字符串作为主语、谓语和宾语，但如果它们没有正确转换为 rdflib.URIRef 数据格式，则某些操作将无法工作。只有当它们采用正确的格式时，我才能将它们存储在 RDFStore 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T18:50:11.280

关于如何将字符串转换为 uri 的问题的简短回答：

```
from rdflib import URIRef
# this cannot be a subject in a triple
uri_str = 'http://stackoverflow.com/questions/11594712'
# this can be a subject (or predicate or object) of a triple
uri_ref = URIRef(uri_str) 
```

用法与`Namespace`：

```
from rdflib import Namespace

ns_str = 'http://example.com/namespace/doc/'
ns = Namespace(ns_str)

uri_str = ns_str+'fragment'

assert URIRef(ns_str+'fragment') == ns.fragment == ns['fragment'] 
```

# cocos2d-iphone - Cocos2D+Box2D iPhone：如何识别b2body和ground body碰撞？

> ID：11594715
> 
> 赞同：0
> 
> 时间：2012-07-21T18:14:14.660
> 
> 标签：cocos2d-iphone, box2d-iphone

我使用 b2ContactListener 类来识别碰撞。所有其他车身碰撞识别成功。如何找到与地面体的其他 b2body 碰撞？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:04:10.040

碰撞发生在 box2d 中的夹具之间，而不是物体之间。这就是为什么您的联系人侦听器中可能有一些代码看起来像

```
contact.fixtureA = contact->GetFixtureA();
contact.fixtureB = contact->GetFixtureB(); 
```

如果您使用精灵作为每个身体的用户数据，您仍然可以选择将任何您想要的内容放入夹具的用户数据字段中。这样的事情很有帮助：

```
fixtureUserData *fUd = new fixtureUserData();
fUd->tag = INT_IDENTIFYING_GROUND_FIXTURE;
// ...
b2FixtureDef groundBoxDef;
groundBoxDef.userData = fUd; 
```

您在 .h 文件中定义的结构可能看起来像

```
struct fixtureUserData {
    int tag;
    // ...other properties
}; 
```

INT_IDENTIFYING_GROUND_FIXTURE 也可以是枚举类型的元素（每个碰撞类别可能有一个该类型的元素）。如果你已经这样做了，你可以通过做测试与地面的碰撞

```
fixtureUserData *fBUd = (fixtureUserData *)pdContact.fixtureB->GetUserData();
if (fBUd->tag == INT_IDENTIFYING_GROUND_FIXTURE){
    // react to collision
} 
```

# delphi - 使用 LIKE 语句进行过滤

> ID：11594724
> 
> 赞同：8
> 
> 时间：2012-07-21T18:16:00.183
> 
> 标签：delphi, delphi-7

我使用此代码过滤我的表：

```
Table.Filtered := False;
Table.Filter := '[' + Field_Search + '] LIKE ''%' + Edit_Search.Text + '%''';
Table.Filtered := True; 
```

但它引发了这个例外：

> “操作不适用。”

问题在哪里？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-21T18:34:25.043

A`TTable.Filter`不是 SQL 查询。`LIKE`不支持（也不支持`IN`）。[根据文档](http://docwiki.embarcadero.com/RADStudio/en/Setting_the_Filter_Property)，支持的运算符是`=`, `<>`, `>`, `<`, `>=`, '<= `,`AND `,`NOT `and`OR`

对于更复杂的过滤，使用[TDataSet.OnFilterRecord](http://docwiki.embarcadero.com/Libraries/en/Data.DB.TDataSet.OnFilterRecord)事件：

```
procedure TForm1.Table1FilterRecord(Dataset: TDataset; var Accept: Boolean);
begin
  // Don't remember if D7 supports DataSet[FieldName] syntax; if not,
  // use DataSet.FieldByName instead, or a persistent field.
  Accept := Pos(Edit_Search.Text, DataSet[SearchField].AsString) > 0;
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-26T04:02:44.503

```
Table.Filtered := False;
Table.Filter := Field_Search + ' LIKE ' + QuotedStr('*' + Edit_Search.Text + '*');
Table.Filtered := True; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-10T17:19:18.643

你应该使用这个：

```
 DataModule.Table.Filtered := False;
   DataModule.Table.Filter := 'Field_Name' + ' LIKE ' + QuotedStr(Edt_SearchByCode.Text +'%');
   DataModule.Table.Filtered := True; 
```

并且将像魔术一样工作，不再使用 TQuery .... 如果您想要 Matching 不考虑区分大小写。您应该改用此代码：

```
 DataModule.Table.Filtered := False;
   DataModule.Table.FilterOptions := [foCaseInsensitive];
   DataModule.Table.Filter := 'Field_Name' + ' LIKE ' + QuotedStr(Edt_SearchByCode.Text +'%');
   DataModule.Table.Filtered := True; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-11-12T12:24:08.517

我发现这个主题正在寻找其他东西。我总是使用 TDataSet.OnFilterRecord 事件，在大多数情况下我使用 TEdit.OnChange 事件，所以搜索是“活动的”；

```
var
Criteria : string;
...
...

procedure TForm1.Edit1Change(Sender: TObject);
begin
  Table.Filtered := False;
  Criteria := Edit1.text;
  Table.Filtered := True;
end; 
```

和 OnFilter 事件

```
procedure TForm1.TableFilterRecord(DataSet: TDataSet;
  var Accept: Boolean);
begin
  Accept := AnsiContainsStr(Table.Fields[xx].asString,Criteria);
end; 
```

为我工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-30T10:18:23.670

以下代码也可以正常**工作**：

```
if Edit1.Text <>'' then
begin
Query1.Filter :='FieldName ='+quotedstr('*'+ edit1.Text +'*');
Query1.Filtered:=true;
end
else
begin query1.Filtered :=false; end; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-26T08:39:31.700

我主要使用 TEdit 这里是代码

```
if (EditSerarch.Text <> '') then
begin
FDQQuery.Filtered := false;
FDQQuery.Filter:=   'Name LIKE'+ QuotedStr('%'+EditSerarch.Text+'%') +
            ' OR Company LIKE '+ QuotedStr('%'+EditSerarch.Text+'%') +
              ' OR Phone LIKE '+ QuotedStr('%'+EditSerarch.Text+'%') +
             ' OR Mobile LIKE '+ QuotedStr('%'+EditSerarch.Text+'%');
FDQQuery.Filtered:= True;
end else FDQQuery.Filtered := false; 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-11-01T16:35:19.983

我建议使用 SQL 查询来执行此操作。

例子：

```
query1.SQL.Text:='Select * FROM table_name WHERE field like '+ QuotedStr(edit1.text+'%');
query1.Active:=true; 
```

# c# - Visual Studio 的“监视”窗口中的“非公共成员”节点中有什么内容？

> ID：11594725
> 
> 赞同：4
> 
> 时间：2012-07-21T18:16:01.577
> 
> 标签：c#, debugging, visual-studio-debugging, vsx

当我在 Visual Studio 的监视窗口中查看对象时，我假设 C# 对象的所有非公共（即私有、受保护、内部和内部受保护）成员都在“*非公共成员”下。*但是后来，我注意到这段代码有一个异常：

```
 class HashDerived : System.Security.Cryptography.HashAlgorithm { ... }

   HashAlgorithm hash1 = new HashDerived();
   HashAlgorithm hash2 = new System.Security.Cryptography.SHA1Cng(); 
```

`hash1`的“非公众成员”是这样的：

![观察窗口中的 hash1](../Images/5e71d4a57bf9b9f25f04d19526a76e77.png)

而`hash2`的“非公共成员”看起来像这样：

![观察窗口中的 hash2](../Images/747aac570bbdd10391e939a2642db52e.png)

因此，对于 hash1，似乎只有`private`字段 (m_bDisposed) 出现在“ *Non-Public members* ”节点下，对于 hash2，even`protected`和`protected internal`“HashSizeValue”和“HashValue”等成员出现在其中。

为什么会这样？这种行为背后的规则是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T16:33:06.113

您在此处看到的行为是一个错误。在这种情况下，C# 调试器不应显示静态成员。我与代码库的当前所有者确认了这一点，他将为 Visual Studio 的下一个版本提交一个错误。

发生这种情况的具体情况是

*   仅我的代码已启用
*   该类型在确定为非用户程序集的内容中定义
*   引用和对象实例的类型不同（切换`hash2`到`SHA1Cnf`问题消失）

请注意，可能还会出现其他情况。这是我在我所做的调试/实验中能够缩小范围的行为。

# c# - 在主窗体右上角打开子窗体

> ID：11594727
> 
> 赞同：0
> 
> 时间：2012-07-21T18:16:28.343
> 
> 标签：c#, winforms

无论主窗体是最大化还是正常大小，我都试图在主窗体的右上角打开一个（未装饰的）子窗体。但是无论我如何尝试，我都无法将其打开到我想要的位置。

我发现一篇文章描述了如何相对于表单中的另一个控件打开表单，但这也不起作用：

[如何在相对于父窗口中的控件的位置显示模态表单（打开器）](https://stackoverflow.com/questions/3540135/how-display-a-model-form-in-a-position-relative-to-the-a-control-in-the-parent-w)

现在已经尝试在 google 上搜索几个小时以寻找解决方案，但要么没有答案（doubdfull），要么我没有在搜索紧密的单词组合（更有可能）。

任何人都可以请我指出一个类似的问题，或者帮助我如何实现我所希望的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T19:00:21.050

在我看来，您应该使用锚定在顶部和右侧的 UserControl。但是，让我们制作一个表格。您需要连接它的 Load 事件，以便在它重新调整自身后将其移动到正确的位置。然后您需要主窗体的 LocationChanged 和 Resize 事件，以便您可以将子窗体保持在正确的位置。

因此，具有样板 Form1 和 Form2 名称以及 Form1 上用于显示子项的按钮的示例程序可能如下所示：

```
public partial class Form1 : Form {
    public Form1() {
        InitializeComponent();
        this.button1.Click += button1_Click;
        this.Resize += this.Form1_Resize;
        this.LocationChanged += this.Form1_LocationChanged;

    }

    Form child;

    private void button1_Click(object sender, EventArgs e) {
        if (child != null) return;
        child = new Form2();
        child.FormClosed += child_FormClosed;
        child.Load += child_Load;
        child.Show(this);
    }

    void child_FormClosed(object sender, FormClosedEventArgs e) {
        child.FormClosed -= child_FormClosed;
        child.Load -= child_Load;
        child = null;
    }

    void child_Load(object sender, EventArgs e) {
        moveChild();
    }

    void moveChild() {
        child.Location = this.PointToScreen(new Point(this.ClientSize.Width - child.Width, 0));
    }

    private void Form1_Resize(object sender, EventArgs e) {
        if (child != null) moveChild();
    }

    private void Form1_LocationChanged(object sender, EventArgs e) {
        if (child != null) moveChild();
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T18:49:02.150

尝试这样的事情：

```
 private void button1_Click(object sender, EventArgs e)
        {
            ChildForm win = new ChildForm();
            int screenHeight = Screen.PrimaryScreen.WorkingArea.Height;
            int screenWidth = Screen.PrimaryScreen.WorkingArea.Width;

            Point parentPoint = this.Location;

            int parentHeight = this.Height;
            int parentWidth = this.Width;

            int childHeight = win.Height;
            int childWidth = win.Width;

            int resultX = 0;
            int resultY = 0;

            if ((parentPoint.X + parentWidth + childWidth) > screenWidth)
            {
                resultY = parentPoint.Y;
                resultX = parentPoint.X - childWidth;
            }
            else
            {
                resultY = parentPoint.Y;
                resultX = parentPoint.X + parentWidth;
            }

            win.StartPosition = FormStartPosition.Manual;                   
            win.Location = new Point(resultX, resultY);  
            win.Show();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T19:04:59.643

我认为你应该尝试这样的事情：

```
private void buttonOpen_Click(object sender, EventArgs e)
{
    Form2 frm2 = new Form2();
    frm2.Show();
    //"this" is the parent form
    frm2.DesktopLocation = new Point(this.DesktopLocation.X + this.Width - frm2.Width, this.DesktopLocation.Y);
} 
```

简单、容易且有效（对我而言）。

# css - 为应用程序添加自定义主题

> ID：11594729
> 
> 赞同：0
> 
> 时间：2012-07-21T18:16:37.223
> 
> 标签：css, extjs4, sass, extjs4.1

我正在尝试主题。为此，我已经下载并安装了 ruby​​。

我对如何拥有一个不同的`css`文件来为应用程序拥有自己的主题一无所知。

我想我已经对带有扩展名的文件进行了更改`.scss`。有人可以引导我完成应用程序的步骤以拥有自己的主题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T18:25:15.460

为什么不为主题定义部分内容并将与主题相关的内容放入变量中。这些部分不会创建任何 .css 文件。这是示例

制作 3 个文件 home.scss、_homePartials.scss 和 _homeTheme.scss

_homePartials.scss

```
$textColor: #333; 
```

_homeTheme.scss

```
.text { color:$textColor; } 
```

主页.scss

```
.text { width:100%; }
@import '../partials/homePartials';
@import '../partials/homeTheme'; 
```

看看[http://blog.behance.net/dev/how-we-used-sass-to-build-17-websites-in-five-days](http://blog.behance.net/dev/how-we-used-sass-to-build-17-websites-in-five-days)

# java - 来自 DAL 的 Spring 自定义用户详细信息 - 铸造

> ID：11594731
> 
> 赞同：0
> 
> 时间：2012-07-21T18:16:49.823
> 
> 标签：java, spring, casting, data-access-layer

我目前正在开发一个使用 Spring Security 的系统。我有身份验证提供程序设置，但在创建自定义用户类型时遇到问题，该用户类型将存储我需要的所有信息。

在身份验证提供程序中，我调用“用户服务”，它是系统中用户的 DAL。然后返回一个“用户”对象。这很好，一切正常。

但是我随后定义了一个 MyCompanyUserDetails 对象，其中包含我需要的所有自定义属性。这个类扩展了“用户”类。

我的问题是我无法将用户转换为 CompanyUserDetails。我在这里错过了什么吗？

自定义用户详细信息类型：

```
public class MyCompanyUserDetails extends User { 
```

在我的身份验证提供程序中：

```
// Create / Update the user.
User raw_user_details = getUser(username_str, groups_of_user);

// Create our Custom user object filled with the parameters we need for the rest of the system.
MyCompanyUserDetails details = (MyCompanyUserDetails) raw_user_details; 
```

我收到的异常：

```
java.lang.ClassCastException: User cannot be cast to MyCompanyUserDetails 
```

任何帮助/指导将不胜感激......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:39:27.430

正如 Shades88 在评论中所说，是一个简单的向下投射问题

# c# - 如何查询上下文以创建子类 POCO 实体？

> ID：11594732
> 
> 赞同：2
> 
> 时间：2012-07-21T18:17:08.840
> 
> 标签：c#, entity-framework, poco

假设我有以下生成的实体框架 POCO 类：

```
public partial class Foo
{
    #region Primitive Properties

    public virtual long Id { get; set; }

    #endregion
} 
```

我将其子类化：

```
public class SubclassedFoo : Foo
{
    public override long Id
    {
        get { return base.Id; }
        set { base.Id = value; }
    }
} 
```

ObjectContext 如何检索`SubclassedFoo`对象而不是`Foo`对象？

例如，我可以用什么来代替这个？

```
ObservableCollection<Foo> foos = context.Foos 
```

如：

```
ObservableCollection<SubclassedFoo> subclassedFoos = context.??? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T18:30:09.857

过滤`OfType<SubclassedFoo>`：

```
List<SubclassedFoo> subclassedFoos = context.Foos
    .OfType<SubclassedFoo>()
    .ToList(); 
```

或者如果你真的想要一个`ObservableCollection`：

```
ObservableCollection<SubclassedFoo> subclassedFoos =
    new ObservableCollection<SubclassedFoo>(context.Foos
        .OfType<SubclassedFoo>()
        .AsEnumerable()); 
```

# wireshark - 为什么我们在 ARP 请求中需要发送者 MAC 地址？

> ID：11594733
> 
> 赞同：4
> 
> 时间：2012-07-21T18:17:13.803
> 
> 标签：wireshark, arp, tcp-ip

[这](http://wiki.wireshark.org/AddressResolutionProtocol?action=AttachFile&do=get&target=arp.png)是 ARP 请求 PNG 图像的 Wireshark 捕获，我在 ARP 数据包中包含发送方 MAC。接收站可以从以太网帧中获得 MAC。似乎是多余的。在 ARP 请求中单独包含发送者 MAC 地址是否有任何特殊用途？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T22:09:21.857

“冗余”是设计使然 (RFC 826)，可用于针对不同层。在 RFC 3927 中有所谓的免费地址解析协议 (GARP)，在某些情况下，冗余或缺失起着重要作用，尤其是在故障排除和监控网络堆栈方面。

实际上它根本不是冗余，MAC（物理，第 2 层）和 IP（逻辑，第 3 层）地址不是一回事。它们在不同的网络层上服务于不同的目的。

在大型网络上，观察 MAC/ARP/Source/Dest 信息的变化是很常见的，有时看起来几乎是不正确的。例如，您可能会看到主机发送 ARP 请求，并将其自己的地址作为目标地址。根据具体情况，它可能会告诉我们这是一个链接打开/关闭事件，可能它正在尝试更新其他设备的 ARP 表，或者可能检测到 ip 冲突并将 ip 移动到另一个 NIC。

我可以进入集群、故障转移——这个列表还在继续，尽管我最终会写一本书试图解释这一切。希望这能让您对您所质疑的“冗余”有所了解。;-)

更多信息：

**[RFC 826](http://www.ietf.org/rfc/rfc826.txt)** / [**RFC 3927**](http://www.ietf.org/rfc/rfc3927.txt?number=3927) / **[Wireshark 免费 ARP](http://wiki.wireshark.org/Gratuitous_ARP)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T19:52:58.437

虽然经常与以太网结合使用，但 ARP 本身是一个独立的协议。想象一下其他不公开 MAC 地址的链路层协议。如果未提供发件人字段，ARP 在这种情况下将不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-07T10:14:58.897

没有规定 ARP 协议字段的发送者 MAC 地址必须与以太网源 MAC 地址相同。例如：在少数应用程序中，同一主机的多个接口在网络上，但只有一个接口为所有接口发送 arp 响应。

# c# - 在c#中检索php变量

> ID：11594738
> 
> 赞同：0
> 
> 时间：2012-07-21T18:17:49.073
> 
> 标签：c#, php, variables

我有一个 PHP 脚本，它将用户重定向到文件下载。在 Web 浏览器中查看此页面时，系统会自动提示我选择保存文件的位置，并在`SaveFileDialog`.

我希望使用用 C# 编写的应用程序下载此文件。如何检索 PHP 脚本响应中包含的文件的文件名和扩展名？

我认为必须读取 PHP 变量，但我还没有找到正确的方法来读取它。我存储文件名和扩展名的 PHP 变量分别是`$file`和`$ext`。

我在这里阅读了几个问题，但我很困惑。一些用户谈论`WebClient`，其他人谈论`HttpWebRequest`。

你能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T18:27:22.720

看看[这里](http://www.c-sharpcorner.com/uploadfile/bfarley/simplewebfiledownload11162005015304am/simplewebfiledownload.aspx)，这里描述了下载和保存文件的过程。

以下是从请求响应标头中获取文件名的方法：

```
String header = client.ResponseHeaders["content-disposition"];
String filename = new ContentDisposition(header).FileName; 
```

还有一个注意事项：这里的客户端是 WebClient 组件。这里是如何使用 WebClient 下载：[在此处输入链接描述](http://msdn.microsoft.com/en-us/library/ez801hhe.aspx)

------完整的解决方案----------------------------

事实证明，您的服务器使用身份验证。这就是为什么为了下载文件，我们必须通过身份验证。所以，**请**写下完整的细节。这是代码：

```
 private class CWebClient : WebClient
    {
        public CWebClient()
            : this(new CookieContainer())
        { }
        public CWebClient(CookieContainer c)
        {
            this.CookieContainer = c;
        }
        public CookieContainer CookieContainer { get; set; }

        protected override WebRequest GetWebRequest(Uri address)
        {
            WebRequest request = base.GetWebRequest(address);
            if (request is HttpWebRequest)
            {
                (request as HttpWebRequest).CookieContainer = this.CookieContainer;
            }
            return request;
        }
    }
    static void Main(string[] args)
    {
        var client = new CWebClient();
        client.BaseAddress = @"http://forum.tractor-italia.net/";
        var loginData = new NameValueCollection();
        loginData.Add("username", "demodemo");
        loginData.Add("password", "demodemo");
        loginData.Add("login","Login");
        loginData.Add("redirect", "download/myfile.php?id=1622");
        client.UploadValues("ucp.php?mode=login", null, loginData);

        string remoteUri = "http://forum.tractor-italia.net/download/myfile.php?id=1622";
        client.OpenRead(remoteUri);
        string fileName = String.Empty;
        string contentDisposition = client.ResponseHeaders["content-disposition"];
        if (!string.IsNullOrEmpty(contentDisposition))
    {
        string lookFor = @"=";
        int index = contentDisposition.IndexOf(lookFor, 0);
        if (index >= 0)
            fileName = contentDisposition.Substring(index + lookFor.Length+7);
    }//attachment; filename*=UTF-8''JohnDeere6800.zip

       client.DownloadFile(remoteUri, fileName);

    } 
```

在我的电脑上工作。

# jquery - 使用 jQuery .eq 更新值

> ID：11594742
> 
> 赞同：0
> 
> 时间：2012-07-21T18:18:26.110
> 
> 标签：jquery

我在购物车中有一个 div，我正在尝试更改项目数量以匹配屏幕左侧的项目数量。当您按下项目旁边的向上和向下按钮时，数字会相应增加。但是我无法访问购物车中的相应 div。现在购物车中的数字卡在 0 上。我认为代码的第 7 行是我的问题所在。

这是一个 jsfiddle：http: [//jsfiddle.net/richcoy/MHMVC/](http://jsfiddle.net/richcoy/MHMVC/)

**HTML：**

```
<!doctype html>
<html lang=en>
<head>
<meta charset=utf-8>
<title>Number Updater</title>
 <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div id="body_container">
<div id="product_container">
<div id="product_item_one" class="product_box">
    <div class="item_name">Item One</div>
    <img src="http://placehold.it/90x80">    
    <div class="product">0</div>
    <button class="up">Up</button>
    <button class="down">Down</button>
</div>

<div id="product_item_two" class="product_box">
    <div class="item_name">Item Two</div>
    <img src="http://placehold.it/90x80">    
    <div class="product">0</div>
    <button class="up">Up</button>
    <button class="down">Down</button>
</div>

<div id="product_item_three" class="product_box">
    <div class="item_name">Item Three</div>
    <img src="http://placehold.it/90x80">        
    <div class="product">0</div>
    <button class="up">Up</button>
    <button class="down">Down</button>
</div>

<div id="product_item_four" class="product_box">
    <div class="item_name">Item Four</div>
    <img src="http://placehold.it/90x80">    
    <div class="product">0</div>
    <button class="up">Up</button>
    <button class="down">Down</button>
</div>

<div id="product_item_five" class="product_box">
    <div class="item_name">Item Five</div>
    <img src="http://placehold.it/90x80">        
    <div class="product">0</div>
    <button class="up">Up</button>
    <button class="down">Down</button>
</div>
</div>

<div id="cart_container">
    <h3>Shopping Cart</h3>
    <div id="cart_item_one" class="cart_product">
            <div class="item_name">Item One</div>
            <div class="cart_product_number">0</div>
    </div>
    <div id="cart_item_two" class="cart_product">
            <div class="item_name">Item Two</div>
            <div class="cart_product_number">0</div>
    </div>
    <div id="cart_item_three" class="cart_product">
            <div class="item_name">Item Three</div>
            <div class="cart_product_number">0</div>
    </div>
    <div id="cart_item_four" class="cart_product">
            <div class="item_name">Item Four</div>
            <div class="cart_product_number">0</div>
    </div>
    <div id="cart_item_five" class="cart_product">
            <div class="item_name">Item Five</div>
            <div class="cart_product_number">0</div>
    </div>
    </div>
</div><!-- end #body_container -->
</body>
</html>​ 
```

**JavaScript：**

```
$(document).ready(function() {
    var num;
    $('.up').click(function() {
        num = parseInt($(this).siblings('.product').text());
        $(this).prevAll('.product').text(num + 1);        
        $('.cart_product').eq($(this).closest('.product_box').index()).show();
        $('.cart_product').eq($(this).closest('.cart_product_number').text(num));
    });

    $('.down').click(function() {
        num = parseInt($(this).siblings('.product').text());
        if (num > 0) {
            $(this).siblings('.product').text(num - 1);
        };

        if (parseInt($(this).siblings('.product').text()) == 0) {
            $('.cart_product').eq($(this).closest('.product_box').index()).hide();
        } else {
            $('.cart_product').eq($(this).closest('.product_box').index()).show();
        }
    });
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T18:52:53.187

这是我的解决方案：

```
$(document).ready(function() {
    var num;
    $('.up').click(function() {
        num = parseInt($(this).siblings('.product').text());
        $(this).prevAll('.product').text(num + 1);    
        var box = $('.cart_product').eq($(this).closest('.product_box').index());
        box.show();
        box.children(".cart_product_number").text(num + 1);
    }); 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T18:53:04.723

你指出我们的路线对我来说不太有意义。你有：

```
$('.cart_product').eq($(this).closest('.cart_product_number').text(num)); 
```

打破它，你正在做一个`eq()`：

```
$(this).closest('.cart_product_number').text(num) 
```

这是设置文本`.cart_product_num`然后返回该对象，然后您将其提供给`.eq()`该对象，该对象需要一个整数，而不是 jQuery 对象。所以这行代码一直都是错误的。如果你解释你想用那条线完成什么，我们可能会更具体地提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T18:57:38.970

```
$(function() {
    $('.up, .down').on('click', function() {
        var productElem = $(this).siblings('.product'),
            dir = $(this).is('.down'),
            num = parseInt(productElem.text());
        if (num==1 && dir) {
            productElem.text('0');
            $('.cart_product').eq($(this).closest('.product_box').index()).hide();
        }else{
            productElem.text(num + (dir?-1:+1));
            $('.cart_product').eq($(this).closest('.product_box').index()).show()
                              .find('.cart_product_number').text(num + (dir?-1:+1));
        }
    });
}); 
```

[小提琴](http://jsfiddle.net/MHMVC/4/)

# delphi - Delphi 中添加元素到集合的“+=”等价物是什么？

> ID：11594743
> 
> 赞同：12
> 
> 时间：2012-07-21T18:18:44.470
> 
> 标签：delphi, operators, set, delphi-7

在 C++ 等其他语言中，有一些运算符可以执行加号或等于号类型的运算来添加额外的样式/标志。德尔福有等价物吗？

现在我有一些代码，如：

```
label1.Font.Style := label1.Font.Style + [fsBold];
label2.Font.Style := label2.Font.Style + [fsBold]; 
```

但是，如果可能的话，我希望将其简化为更简洁的内容，而无需在赋值运算符的两侧复制标签名称，类似于：`label1.Font.Style += [fsBold];`或`label1.Font.Style := self + [fsBold];`

这可以做到吗？还是没有那么多？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-21T18:33:00.763

包括您正在寻找的内容。不幸的是，您遇到了 Label.Font.Style 是一个属性并且必须分配给 var 而不是由 var 传递的问题。但是，您可以这样做：

```
var
  fontStyle: TFontStyles;
begin
  fontStyle := Label1.Font.Style;
  Include(fontStyle, fsBold);
  Label1.Font.Style := fontStyle; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-21T18:28:02.153

`with`这是我可以推荐该声明的少数情况之一：

```
with label1.Font do Style := Style + [fsBold];
with label2.Font do Style := Style + [fsBold]; 
```

通常，问题`with`在于不清楚什么是成员访问，什么不是，但如果范围是使用单个属性的单个语句，那就足够清楚了。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-21T18:21:12.367

Delphi 有 Inc 功能，但它不适用于属性：

```
Inc(a);     // Increment a with 1
Inc(a, 5);  // Increment a with 5 
```

如果你需要经常给字体添加样式，你可以写一个过程：

```
procedure AddStyle(const AFont: TFont; const AStyle: TFontStyles);
begin
  AFont.Style := AFont.Style + AStyle;
end; 
```

（使用更高版本的 Delphi，您可以使用类助手）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T18:31:20.520

子类`TLabel`类型并创建这样的方法：

```
procedure TMyLabel.AddStyle(const AStyle: TFontStyles);
begin
 Self.Font.Style := Self.Font.Style + AStyle;
end; 
```

然后您可以将类放入一个`bpl`包中并将其安装到编辑器中。之后，您可以将所有标签替换为自定义标签。对于大型项目，我建议使用*Notepad++*替换`.pas`和（**文本！**）`.dfm`文件中的所有声明。这可能听起来很复杂，但它不到一个小时的工作。祝你好运！

# matlab - 带有自定义颜色的 Matlab 绘图

> ID：11594745
> 
> 赞同：7
> 
> 时间：2012-07-21T18:19:13.753
> 
> 标签：matlab

有谁知道除了预设颜色（即b，g，r，c，m，y，k）之外，用不同颜色绘制的命令或方法是什么？我宁愿使用我自己的自定义颜色而不是这些....

干杯

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-21T18:33:51.337

使用三元组的`Color`属性：`ColorSpec`

```
plot(x, y, 'Color', [0.5, 1.0, 0.0], 'LineStyle', '--') 
```

`0.0`这里的向量包含和之间的 RGB 值`1.0`。Lineseries和[ColorSpec文档条目](http://www.mathworks.se/help/techdoc/ref/colorspec.html)[对此](http://www.mathworks.se/help/techdoc/ref/lineseriesproperties.html)有更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T18:29:06.137

[来自 matlab 文档：](http://www.mathworks.com/help/techdoc/ref/axes_props.html)

> ColorOrder：RGB 值的 m×3 矩阵
> 
> 用于多线图的颜色。定义 plot 和 plot3 函数使用的颜色来为绘制的每条线着色。如果不使用 plot 和 plot3 指定线条颜色，这些函数会循环通过 ColorOrder 属性来获取每条绘制线条的颜色。要获取可能在启动期间设置的当前 ColorOrder，请获取属性值：
> 
> get(gca,'ColorOrder') 请注意，如果坐标区 NextPlot 属性为 replace（默认），则高级函数（如 plot）会在确定要使用的颜色之前重置 ColorOrder 属性。如果您希望 MATLAB 使用不同于默认值的 ColorOrder，请将 NextPlot 设置为 replacechildren。您还可以指定自己的默认颜色顺序。

总之，这意味着您需要以下命令：

```
figure();
axis();
set(gca, 'colororder', <color matrix>, 'nextplot', 'replacechildren');
plot(x,y); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-30T10:29:43.070

我对 MATLAB 提供的有限的一组预设颜色也有同样的问题。所以，我在我的网站上创建了这个页面，您可以在其中从大量非标准颜色中进行选择，并且颜色代码直接粘贴到您的剪贴板：

[http://www.shirt-ediss.me/matlab-octave-more-colours/](http://www.shirt-ediss.me/matlab-octave-more-colours/)

# unix - 递归 scp 除了当前目录

> ID：11594747
> 
> 赞同：9
> 
> 时间：2012-07-21T18:20:00.040
> 
> 标签：unix, scp

有没有办法将`scp`目录中的所有文件递归到远程机器并保留其原始文件名但不复制它所在的目录？

```
dir1/file
dir1/dir2/file2 
```

所以`dir1`只会复制的内容。`dir1`不会被创建。该`dir2`目录将在`file2`内部创建。

我已经尝试过`scp -r dir1 remote:/newfolder`，但它会`dir1`在. 我不希望它创建该目录。只需将所有文件放入.`/newfolder``remote``dir1``dir1``newfolder`

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-21T18:33:09.027

```
cd dir1
scp -r . remote:/newfolder 
```

这避免了对远程机器上`scp`的名称进行任何操作的机会。`dir1`您可能还喜欢：

```
(cd dir1; scp -r . remote:/newfolder) 
```

这会将您的 shell 留在其原始目录中，同时工作相同（因为它启动了一个执行`cd`and`scp`操作的子 shell）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-21T18:32:41.120

这意味着将 shell 扩展 dir1/* 生成的文件列表复制到远程位置 remote:/newfolder

```
scp -r dir1/* remote:/newfolder 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-07T10:37:25.287

您可以将点语法与相对路径一起使用。

```
scp -r dir1/. remote:/newfolder 
```

如果远程目录不存在，则创建它。

# php - 如果变量为空，我希望 PHP/MySQL 为变量分配不同的值

> ID：11594748
> 
> 赞同：1
> 
> 时间：2012-07-21T18:20:02.333
> 
> 标签：php, mysql, null

想象一下 MySQL 中的这个 select 语句：

```
SELECT table1.place, table2.person FROM table1, table2 
```

如果数据库中的“place”或“person”为空（NULL 或者如果它被错误地输入为长度为零的空字符串），我希望它`null`在我将它放入 PHP 数组后插入到该变量中......而不是，它显示为`string of length zero`。

第一个问题是，为什么会发生这种情况？

第二个问题是，作为修复，如果 DB 字段是长度为零或 null 的字符串，我想给它分配一个字符串 - 这样我们就获得了问题的所有权......

这里最好的解决方法是什么？

**更新**

补充一点，这里的重点是让它在 Smarty 中使用。使用 Smarty，isset() 在长度为零的字符串上评估“true”，并且即使对于这些变量中的 NULL，它似乎也评估为 true，所以这可能是一个更聪明的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T18:23:32.887

你可以使用[`NULLIF`](http://dev.mysql.com/doc/refman/5.6/en/control-flow-functions.html#function_nullif)：

```
SELECT
    NULLIF(table1.place, '') AS place,
    NULLIF(table2.person, '') AS person
FROM table1, table2 
```

# c++ - 多次调用函数导致程序退出并出现神秘错误

> ID：11594751
> 
> 赞同：0
> 
> 时间：2012-07-21T18:20:14.767
> 
> 标签：c++, winapi, console

我将问题隔离到此代码：

```
#include <windows.h>
using namespace std;

const wchar_t* readLine(int posX, int posY, int len) {
  wchar_t* wcharFromConsole = new wchar_t[len];
  COORD pos = {posX,posY};
  DWORD dwChars;
  ReadConsoleOutputCharacterW(GetStdHandle(STD_OUTPUT_HANDLE),
    wcharFromConsole,  // Buffer where store symbols
    len,     // Read len chars
    pos,    // Read from row=8, column=6
    &dwChars);  // How many symbols stored
  wcharFromConsole [dwChars] = L'\0'; // Terminate, so string functions can be used
  return wcharFromConsole;
}

int main() {
  for (int i = 0; i <= 63; i++) {
    readLine(0,0,80);
  }
  system("pause");
} 
```

问题是，如果循环运行的次数少于 63 次，如果从控制台加载的字符长度小于 80，它也可以工作......我不知道这里发生了什么。是否有任何资源我必须明确关闭......但是为什么，如果一个函数关闭它也应该关闭它的所有资源。但是这里发生了什么我不知道，编译的程序（没有任何错误）在静默`system()`运行之前退出。当我从项目中删除部分代码时，还有其他错误代码，有时是程序以不寻常的方式请求终止，有时程序挂起并停止接受键盘输入。

- 编辑：

我根据建议更新了代码：

```
#include <iostream>
#include <windows.h>

using namespace std;

const wchar_t* readLine(int posX, int posY, int len) {
  wchar_t* wcharFromConsole = new wchar_t[len];
  COORD pos = {posX,posY};
  DWORD dwChars = 0;
  if(!ReadConsoleOutputCharacterW(GetStdHandle(STD_OUTPUT_HANDLE),
    wcharFromConsole,  // Buffer where store symbols
    len,     // Read len chars
    pos,    // Read from row=8, column=6
    &dwChars))  // How many symbols stored
  {
    cout << "ReadConsoleOutputCharacterW failed, code" << GetLastError() << endl;
  }
  wcharFromConsole [dwChars] = L'\0'; // Terminate, so string functions can be used
  return wcharFromConsole;
}

int main() {
  for (int i = 0; i <= 100; i++) {
    cout << "loop count: " << i << endl;
    readLine(0,0,80);
  }
  system("pause");
} 
```

输出：

```
loop count: 0
loop count: 1
loop count: 2
loop count: 3
// [...]
loop count: 63
loop count: 64

This application has requested the Runtime to terminate it in an unusual way.
Please contact the application's support team for more information. 
```

（第一次剪断根本没有产生任何错误。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T19:32:12.353

这可能只是“一个人”。您正在为“Len”字符分配空间，您正在阅读“Len”字符，但您在末尾添加了一个额外的 \0。

改变你的新分配 Len+1，你可能会没事的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T19:33:15.753

`dwChars`应该传递给`ReadConsoleOutputCharacterW`as `dwChars -1`。您正在覆盖数组的末尾。

# php - PHP UTF8 - ISO-8859-1 编码

> ID：11594752
> 
> 赞同：2
> 
> 时间：2012-07-21T18:20:17.600
> 
> 标签：php, utf-8

我正在编写我的第一个 PHP 代码，我想显示一些电子邮件主题。

```
header('content-type: text/html; charset=utf-8');
...
$header = imap_headerinfo($imap, $i);
$raw_body = imap_body($imap, $i);
$subject = utf8_encode($header->subject);

echo $subject;
echo "<br>";
... 
```

但是对于主题“ää üü öö ß”，输出如下所示：

=?ISO-8859-1?B?5OQg/Pwg9vYg3w==?=

问候

**解决方案：**

我在网上发现了一个非常有用的功能（[http://php.net/manual/de/function.imap-mime-header-decode.php](http://php.net/manual/de/function.imap-mime-header-decode.php)），它有两个小语法错误，但经过一些返工后它工作得很好我。

最后解决方案看起来像这样：

```
//return supported encodings in lowercase.
function mb_list_lowerencodings() { $r=mb_list_encodings();
  for ($n=sizeOf($r); $n--; ) { $r[$n]=strtolower($r[$n]); } return $r;
}

//  Receive a string with a mail header and returns it
// decoded to a specified charset.
// If the charset specified into a piece of text from header
// isn't supported by "mb", the "fallbackCharset" will be
// used to try to decode it.
function decodeMimeString($mimeStr, $inputCharset='utf-8',     
$targetCharset='utf-8',$fallbackCharset='iso-8859-1') {
$encodings=mb_list_lowerencodings();
$inputCharset=strtolower($inputCharset);
$targetCharset=strtolower($targetCharset);
$fallbackCharset=strtolower($fallbackCharset);

$decodedStr='';
$mimeStrs=imap_mime_header_decode($mimeStr);
for ($n=sizeOf($mimeStrs), $i=0; $i<$n; $i++) {
  $mimeStr=$mimeStrs[$i];
  $mimeStr->charset=strtolower($mimeStr->charset);
if (($mimeStr == 'default' && $inputCharset == $targetCharset)
  || $mimeStr->charset == $targetCharset) {
  $decodedStr.=$mimStr->text;
} else {
  $decodedStr.=mb_convert_encoding(
    $mimeStr->text, $targetCharset,
    (in_array($mimeStr->charset, $encodings) ?
      $mimeStr->charset : $fallbackCharset)

  );
}
} return $decodedStr;
}

...

$header = imap_headerinfo($imap, $i);
$raw_body = imap_body($imap, $i);
$sub = decodeMimeString($header->subject);
echo $sub;
... 
```

我想指出，这两个函数是作者@http: [//php.net/manual/de/function.imap-mime-header-decode.php](http://php.net/manual/de/function.imap-mime-header-decode.php)创建的，我刚刚删除了两个语法错误。

谢谢你的回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T18:52:51.337

这是一种常见的邮件格式，称为“引用打印”。所有非 ascii 字符都被编码。（见[http://en.wikipedia.org/wiki/Quoted-printable](http://en.wikipedia.org/wiki/Quoted-printable)）

该字符串由

`=?<encoding>?Q?<string>?=`

`<encoding>`描述编码。这里：ISO8859-1

`<string>`是字符串本身

请使用 imap_mime_header_decode() 解码字符串（在使用 utf8_encode() 之前）！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T18:48:05.433

如果 Muhammad 的回答还不够，您可以使用[iconv 函数](http://www.php.net/manual/en/function.iconv.php)来更改字符串的编码

```
iconv("ISO-8859-1", "UTF-8", $your_string); 
```

# android - Android Chronometer：更改视图时停止 - 保存状态？

> ID：11594756
> 
> 赞同：0
> 
> 时间：2012-07-21T18:20:50.853
> 
> 标签：android, chronometer

我通过 ActionBarSherlock 获得了一个 ActionBar，但是当我从计时选项卡切换到另一个选项卡时。它停止并回到 0。当我最小化应用程序时它不会停止......

我需要什么来保存状态？我正在使用 4 按钮来启动、停止、恢复和重新启动...

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T18:24:37.947

您可能正在 UI 线程中运行计时器。当您移动到另一个视图时，UI 线程会停止。
尝试使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)并将作业置于后台，以便即使您离开视图本身也能运行。

# javascript - 如何使用 prev/next 功能在数组中循环图像

> ID：11594761
> 
> 赞同：1
> 
> 时间：2012-07-21T18:21:15.330
> 
> 标签：javascript, jquery, arrays, loops

我有一个 JS 数组`imgs[]`。

该数组包含如下图像路径：`["img/image1.png", "img/image2.png"]`

我有两个功能：

```
function prev() {
    $('#project-image').html("<img src='"+imgs[0]+"' alt='Projekt'/>")
}

function next() {
    $('#project-image').html("<img src='"+imgs[1]+"' alt='Projekt'/>")
} 
```

它们在 HTML 中被调用，如下所示：

```
<nav id="pagination">
  <a id="prev" href="javascript:prev();"></a>
  <a id="next" href="javascript:next();"></a>
</nav> 
```

但是，我遇到的问题是，现在它们被设置为数组中的固定键（由我硬编码），比如`imgs[1]`.

如何使用这两个函数动态循环遍历数组中的所有图像？

单击“下一个”链接时，我想加载数组中的下一个图像。单击“上一个”链接时，我想加载上一个图像。我的数组主要由两个以上的图像组成，而且它们的名称并不像上面的例子一样。因此图像的名称各不相同。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T18:45:16.680

我只是为它写[了一个方便的对象](http://jsfiddle.net/xa2kw/1/)。

## 光标对象

```
$.cursor = function(options)​ {
  var cursor = this;
  var array = options.array;
  var idx = options.position || 0;
  cursor.prev = function() {
    if(idx > 0) {
      return array[--idx];
    }
    return null;
  };
  cursor.current = function() {
    if(idx < array.length) {
      return array[idx];
    }
    return null;
  };
  cursor.next = function() {
    if(idx + 1 < array.length) {
      return array[++idx];
    }
    return null;
  };
  return cursor;
}; 
```

## 例子

```
var cursor = $.cursor({ array: [1,2,3,4,5] });

$("#prev").click(function(){
  if(cursor.prev() !== null) {
    $("#cur").html(cursor.current());
  }
});

$("#next").click(function(){
  if(cursor.next() !== null) {
    $("#cur").html(cursor.current());
  }
});

$("#cur").html(cursor.current()); 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T19:28:02.463

## *[jsBin 演示](http://jsbin.com/azebog/edit#javascript,html,live)*

```
var images = [
  "img/image1.jpg",
  "img/image2.jpg",
  "img/image3.jpg"
];

// ======================================

var tot = images.length;
var c = 0; // current image (array key index)

function loadImage(){
  $("<img/>").attr("src",images[c]).load(function() {
      $('#gallery').html( this );
  }); 
}
loadImage(); // load 1 image

$('#prev, #next').click(function(){
  id= this.id==='next' ? c++ : c-- ;
  c= c==-1 ? tot-1 : c%tot ;
  loadImage(); 
}); 
```

虽然代码很容易解释，但
`id= this.id==='next' ? c++ : c-- ;`将确定**`ID`**单击按钮的`c`值，并增加或减少获取确切数组键所需的值。

要循环数组键，请使用此*三元运算符*“技巧”：`c= c==-1 ? tot-1 : c%tot ;`where`c`是当前键索引，`tot`是数组键的总数。

这应该给你一个好的开始。为了用“正在加载图像...”信息来娱乐您的访问者，我将把它留给您！:) 快乐编码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T18:25:34.627

首先找到数组的哪个偏移量是图像链接所在的位置，然后对于*next()*转到下一个偏移量，如果达到最后一个偏移量，则显示 0（零）偏移量，依此类推。对于*prev()*转到当前图像偏移量，offset - 1 将为您提供上一个图像，如果您达到偏移量 0（零），则转到最后一个偏移量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T18:28:38.520

很简单，只需将当前图像密钥存储在 var 中。

```
current_image = 0;

function prev() {
    current_image--;
    $('#project-image').html("<img src='"+imgs[current_image]+"' alt='Projekt'/>")
}

function next() {
    current_image++;
    $('#project-image').html("<img src='"+imgs[current_image]+"' alt='Projekt'/>")
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-21T18:29:31.207

我认为您忘记创建 var 索引；在您的功能之外并动态使用它。然后，您可以使用 index++ 或 index-- 将偏移量更改为 1，而不是对值进行“硬编码”。稍后您甚至可以使用 if's 检查当前索引，并改进您的代码以在显示时执行您想要的操作，例如，数组的最后一个 img。希望能帮助到你！

# ios - 没有以前的函数原型

> ID：11594764
> 
> 赞同：0
> 
> 时间：2012-07-21T18:21:32.497
> 
> 标签：ios, function, prototype, core-audio

我正在[将此音调生成代码](http://cocoawithlove.com/2010/10/ios-tone-generator-introduction-to.html)添加到我的现有项目中，但我做错了，无法弄清楚问题所在。该代码在独立项目中运行良好。

```
OSStatus RenderTone(
    void *inRefCon, 
    AudioUnitRenderActionFlags *ioActionFlags, 
    const AudioTimeStamp *inTimeStamp, 
    UInt32 inBusNumber, 
    UInt32 inNumberFrames, 
    AudioBufferList *ioData)

{
    // Fixed amplitude is good enough for our purposes
    const double amplitude = 0.25;

    // Get the tone parameters out of the view controller
    ToneGeneratorViewController *viewController =
        (ToneGeneratorViewController *)inRefCon;
    double theta = viewController->theta;
    double theta_increment =
        2.0 * M_PI * viewController->frequency / viewController->sampleRate;

    // This is a mono tone generator so we only need the first buffer
    const int channel = 0;
    Float32 *buffer = (Float32 *)ioData->mBuffers[channel].mData;

    // Generate the samples
    for (UInt32 frame = 0; frame < inNumberFrames; frame++) 
    {
        buffer[frame] = sin(theta) * amplitude;

        theta += theta_increment;
        if (theta > 2.0 * M_PI)
        {
            theta -= 2.0 * M_PI;
        }
    }

    // Store the updated theta back in the view controller
    viewController->theta = theta;

    return noErr;
} 
```

在我添加代码的控制器中，我只有警告说`No previous prototype for function 'RenderTone'`（重复）

我也遇到了一些错误，但这些错误不在我自己编写的源文件中：

![在此处输入图像描述](../Images/56be00d87acb1c3dadceeb81904e0d74.png)

知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T18:32:51.300

将 AudioToolbox.framework 添加到您的项目中。

# ruby-on-rails - Rails - MissingTemplate 发生在控制器#action

> ID：11594772
> 
> 赞同：1
> 
> 时间：2012-07-21T18:23:04.220
> 
> 标签：ruby-on-rails, templates, googlebot

我有以下方案：

点击这个链接

```
= link_to 'Ping', {:controller => 'articles', :action => 'info_form', :to_article => @article.id} 
```

转到文章控制器

```
 def info_form
    @info = current_user unless current_user.nil?
    @to_article_id = Article.find(params[:to_article])

    respond_to do |format|
      format.html {}
      format.js 
     end
  end 
```

然后被称为`articles/info_form.js.haml`

```
$('#article_form').html("#{escape_javascript(render('info'))}");
$('#article_form_window').modal('toggle'); 
```

和`_info.html.haml`

```
here is a form 
```

这是我的应用程序中的操作流程，效果很好。但在生产中，我每天多次收到以下错误消息：

```
A ActionView::MissingTemplate occurred in articles#info_form: 

Missing template articles/info_form, application/info_form with 
```

日志中如下：

```
Request: 
* URL : http://web.com/articles/info_form?to_article=37
* HTTP_FROM : googlebot(at)googlebot.com
* HTTP_USER_AGENT : Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html) 
```

给出此错误的 URL 是由 google bot 访问的 URL。我该如何解决这个错误？因为，有问题的 URL 对于“普通”用户来说是不可点击的，当谷歌机器人访问它时，就会出现错误......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T20:55:21.480

你有那个动作的 HTML 视图吗？

`info_form.html.haml`

# windows - cpan中临时目录的路径

> ID：11594773
> 
> 赞同：1
> 
> 时间：2012-07-21T18:23:20.330
> 
> 标签：windows, perl, cpan, strawberry-perl, home-directory

我正在尝试使用 cpan 在 Windows 中为 perl 安装 Tk 模块。问题是：

```
Checking if you have Test::More 0 ... Yes (0.98)
Checking if you have Encode 0 ... Yes (2.44)
Building Tk-804.03 ... dmake.exe:  Error: -- `C:\Documents' not found, and can't
 be made
FAIL
! Installing Tk failed. See C:\Documents and Settings\Admin\.cpanm\build.log for
 details. 
```

在 build.log 中没有其他信息。

如何将“.cpanm”目录的路径更改为任何其他没有空格的目录？默认值为“~/.cpam”，我没有找到改变它的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T18:40:17.047

最简单的方法是使用

```
C:\some\dir> 设置 HOME=G:\some\directory\with\no\spaces
```

在您正在使用的 cmd.exe 窗口中。那只会更改该窗口中的设置，不会影响其他任何内容。

事实上，我的 XP 笔记本电脑上的永久环境包含一个类似的`HOME`设置：`E:\Home\username`，因为我不喜欢处理这种东西。

是的，我们的工具应该能够处理其中有空格的路径，但这就是生活的不公。

# objective-c - 当我用 webview 显示 viewcontroller 时发出 SIGKILL

> ID：11594774
> 
> 赞同：0
> 
> 时间：2012-07-21T18:23:20.367
> 
> 标签：objective-c, ios, uiwebview, sigkill

我有ios应用程序。一些视图控制器包含 webviews。**一切都很好，除了一个问题**：

当应用程序启动并且我有几分钟不使用它然后继续我的工作时，它可以正常工作，但是当我想用 webview 加载 viewcontroller 时，它会因**SIGKILL**错误而崩溃。休息一段时间后，其他视图控制器没有问题。这是我用于 webviews 的代码：

```
_webView = [[UIWebView alloc] initWithFrame:self.view.bounds)];
[self.view addSubview:_webView];
_webView.userInteractionEnabled = NO;
[_webView release];
// here is the local page, the same happens if i load internet page..
NSString *path = [[NSBundle mainBundle] pathForResource:@"localpage" ofType:@"html"];
_url = [NSURL fileURLWithPath:path];
[_webView loadRequest:[NSURLRequest requestWithURL:_url]]; 
```

所以问题是为什么应用程序崩溃只是在一些中断后尝试加载带有 webviews 的视图控制器？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T18:34:16.103

您的代码非常危险：

```
_webView = [[UIWebView alloc] initWithFrame:self.view.bounds)];
[self.view addSubview:_webView];
_webView.userInteractionEnabled = NO;
[_webView release]; 
```

我认为这`_webView`是一个伊瓦尔。首先，不要直接访问您的 ivars，除非在 init 和 dealloc 中。直接 ivar 访问是导致崩溃的第一大原因。做错事太容易了，而你在这里做错了。你在完成之前释放了你的 ivar。你赌的是为你持有它的观点，这可能会发生也可能不会发生。例如，如果视图被卸载（当你离开屏幕时可能发生），那么`_webView`它就变成了一个悬空指针。这里正确的代码是（假设`webView`是一个`retain`属性）：

```
self.webView = [[[UIWebView alloc] initWithFrame:self.view.bounds)] autorelease];
[self.view addSubview:self.webView];
self.webView.userInteractionEnabled = NO; 
```

您也保留不足`_url`，如果您`_url`在此代码之外访问，可能会导致崩溃。同样，切换到访问器将解决这个问题。

```
self.url = [NSURL fileURLWithPath:path];
[self.webView loadRequest:[NSURLRequest requestWithURL:self.url]]; 
```

请注意，如果您切换到 ARC，则此问题和许多其他问题很容易消失。除了更容易编写且崩溃更少之外，ARC 代码几乎总是比等效的正确编写的手动内存管理更快。除非您必须支持 iPhoneOS 3，否则您绝对应该切换到 ARC。

# c++ - 在其他私有类成员中使用私有类成员

> ID：11594775
> 
> 赞同：0
> 
> 时间：2012-07-21T18:23:26.540
> 
> 标签：c++, class, object, pointers, g++

我对 C++ 相当陌生，想知道是否允许我执行以下操作：

```
class oFoo{
  ...
}

class Foo{
   int x;
   oFoo* oArray[x];
 public:
   Foo(int xVal);
   Foo~(); 
} 
```

我可以使用 x 作为指向类 oFoo 的指针数组的界限吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T18:28:01.560

不，只允许编译时常量。如果您需要动态数组，请查看[std::vector](http://www.sgi.com/tech/stl/Vector.html)。

# php - 如何将所见即所得编辑器应用于 textarea 标签

> ID：11594778
> 
> 赞同：-2
> 
> 时间：2012-07-21T18:23:45.307
> 
> 标签：php, html

你们有谁知道什么脚本或如何将 html 编辑器添加到我的 textarea 标签？

对于前我有以下 `<textarea id="editor1" name="editor1">Initial value</textarea>`

为了添加这些编辑器工具，我接下来应该做什么。

顺便说一句，我见过 ckeditor 但我 cdnt 设法使用它：S。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T18:28:22.173

我建议您首先实际搜索此内容。示例教程/说明：[http](http://www.youtube.com/watch?v=SU6YWME914A) ://www.youtube.com/watch?v= SU6YWME914A 最重要的是[http://docs.cksource.com/](http://docs.cksource.com/)

应该包含您需要的每条指令。

祝你好运。

# jquery - 无法正确排序动态添加的可排序 jQuery UI 图像

> ID：11594780
> 
> 赞同：0
> 
> 时间：2012-07-21T18:23:56.840
> 
> 标签：jquery, css, jquery-ui

我对动态添加到带有 jQ​​uery UI 的容器的图像进行排序时遇到问题`sortable()`。我认为这在某种程度上是一个 CSS 问题，因为如果我将元素显示为块，即堆叠，它可以完美地工作：

[http://jsfiddle.net/z6ARX/1/](http://jsfiddle.net/z6ARX/1/)

图像是可排序的，所以我知道 JS 正在工作，我只是无法正确删除它们。我确实注意到点击会移动它们的小提琴。在我的应用程序中，单击会从可排序区域中删除该项目，所以我之前没有注意到这一点。主要问题仍然存在。

现在，如果我将图像向左浮动，则在添加它们时无法对其进行排序（我使用的是最新的 Chrome）：

[http://jsfiddle.net/QMwfk/1/](http://jsfiddle.net/QMwfk/1/)

值得注意的是，如果图像已经存在于页面加载的可排序 div 中，一切都很好：

[http://jsfiddle.net/zf9pR/](http://jsfiddle.net/zf9pR/)

我真的坚持这一点，非常感谢任何帮助！我找不到任何专门解决这个问题的问题。如果你找到了请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T20:24:16.840

这是我认为您遇到的错误- [http://bugs.jqueryui.com/ticket/6702](http://bugs.jqueryui.com/ticket/6702)。sortable 确定列表在创建时是否浮动，并且由于列表中没有项目，因此无法判断。延迟初始化可排序直到添加第一个项目应该修复它 - [http://jsfiddle.net/QMwfk/2/](http://jsfiddle.net/QMwfk/2/)。

# c# - 如何将 URL 地址连接到图像

> ID：11594784
> 
> 赞同：1
> 
> 时间：2012-07-21T18:24:16.867
> 
> 标签：c#

我又回来了，需要你的帮助！

我是 C# 新手，但我想学习它。

我的新问题是：

```
private void Form2_Load(object sender, EventArgs e)
    {
        pictureBox1.ImageLocation = "http://www.jmorganmarketing.com/wp-content/uploads/2010/11/image4.jpg";
    } 
```

上面的代码是从 URL 地址加载图像。现在我想让这个图像可点击，当它被点击时，默认浏览器应该打开并显示stackoverflow.com（例如）我想mouseclick事件应该有一些东西，但是我怎样才能在默认浏览器中打开URL？有没有一种简单的方法可以做到这一点？

非常感谢您的回复！！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T18:26:26.060

```
Process.Start("http://www.stackoverflow.com"); 
```

会做的。[从文档](http://msdn.microsoft.com/en-us/library/53ezey2s%28v=vs.90%29.aspx)

> 通过指定文件名来启动进程类似于在 Windows 开始菜单的运行对话框中键入信息。因此，文件名不需要代表可执行文件。它可以是扩展名与系统上安装的应用程序相关联的任何文件类型。例如，如果您将文本文件与记事本等编辑器关联，则文件名可以具有 .txt 扩展名，或者如果您将 .doc 文件与诸如 Microsoft Word 的文字处理工具关联，则文件名可以具有 .doc 扩展名。同样，与“运行”对话框可以接受带有或不带有 .exe 扩展名的可执行文件名相同的方式，.exe 扩展名在 fileName 参数中是可选的。例如，您可以将 fileName 参数设置为“Notepad.exe”或“Notepad”。

因此，当您使用 URI 启动该过程时，将启动默认浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T18:26:55.027

如果您将 URL 传递给 System.Diagnostics.Process.Start([parameter])，它将在默认浏览器中打开。

# android - Android 在 RemoteViews 中动态添加 View 只显示第一个视图！如何从代码中更改 layout_alignParentBottom？

> ID：11594786
> 
> 赞同：1
> 
> 时间：2012-07-21T18:24:45.570
> 
> 标签：android, layout, view, alignment, remoteview

如何使用 cicle 在相对布局中动态添加视图`for`？

这是我的代码：

```
RemoteViews remoteViews = new RemoteViews(c.getPackageName(), R.layout.layout_1);

    for(int i=0; i<10; i++){
            RemoteViews newView = new RemoteViews(c.getPackageName(), R.layout.element);
            newView.setImageViewResource(R.id.notif_toggle, R.drawable.bt_close_n);
            remoteViews.addView(R.id.layout_1, newView);

    }
            int statusIcon = R.drawable.ic_launcher;
            notification = new Notification(statusIcon, c.getResources().getString(R.string.app_name), System
                    .currentTimeMillis());
            notification.flags = notification.flags | Notification.FLAG_NO_CLEAR | Notification.FLAG_ONGOING_EVENT;

            notification.contentView = remoteViews;

            nm.notify(3,notification); 
```

我知道“正在添加的视图的子级具有属性 layout_alignParentBottom="true"，这导致它填充整个父级，阻止任何其他子级。删除该属性允许其他子级出现”。

那么我该如何设置 layout_alignParentBottom="false"？？非常感谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T22:39:08.563

不知道你想在这里做什么，但也许你是在 ListView 之后。

# php - 如何使用 mysql_field_name 或 mysqli_fetch_field 并排显示列名和值

> ID：11594790
> 
> 赞同：1
> 
> 时间：2012-07-21T18:25:28.790
> 
> 标签：php

我必须编写一个在两列中显示多列值表的应用程序（我之前发布了一个关于此的问题，但我已经做了一些研究，这提高了我的观点）。每个人在表中都有一个条目。任务是在两列表中显示这些列中的值。

这些列是个人已注册的主题。IE。

```
 MATH111,MATH112,ENG111,ENG112 
```

等等。这些列本质上是动态的，因为它们基于正在加载到数据库中的 Excel 工作表中的列标题。鉴于此，我无法在我的 html 中“硬编码”表格的名称

```
 <th>MATH111</th><th>MATH112</th>........ 
```

我需要在运行时获取列名，显示列名“**和**”其中包含的值。表中唯一的固定值是学生的 reg_no。所有其他值都是任意的（包括表中的列数）。

表的基本结构是：

```
 id int auto_increment primary key,
       reg_no varchar(25),
       arbitrary col1 int,
       arbitrary col2 int,
       arbitrary col3 int,
       arbitrary col4 int,
       arbitrary  colx.... 
```

与上述一致，如果我查询任意col1，我将得到任意col1代表的课程中获得的分数。

我需要以下列格式在网页中显示它们：

```
 echo '<table><tr><th>Course</th><th>Score</th></tr>'; 
```

我从表中获取数据的查询是

```
 $sql="select * from '.$table_name.' where reg_no='.$reg_no.';
    ...................................(blah...) 
```

好的部分是我知道表中的列数。（因为这个数字是在表创建期间保存的）。我做了一些研究，发现我可以使用“mysql_field_name”函数。或者 mysqli_fetch_field 函数。

mysql_field_name 将以这种方式使用（我认为这更容易）：

```
 $result=mysql_query($sql, $link); 
        $row=mysql_fetch_array($result); 
```

从这里开始......我需要一些提示：

我想显示“ **BOTH** ”字段名称和字段值。所以这就是我打算这样做的方式。如果我错了，请纠正我。

$numberofcolumnsintable=$numberofcolumnsintable++;

```
 while(int i=1;i<=$numberofcolumnsintable;$i++)
        (I am starting from the index 1(second column because i do not want to display the reg_no or its data)
     {   echo"<tr><td>".mysql_field_name($result,$i)."</td>"<td>".$result[$i]."</td></tr>";
      }
echo "</table>"; 
```

我做得对吗。我对 mysqli 函数更满意......但它使用 mysqli_fetch_field 函数返回一个具有列属性的对象......我还没有弄清楚如何访问。对此的任何帮助也将不胜感激。所以回到我的主要问题。我上面显示的代码是否足以并排显示列名及其值？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T18:36:46.270

使用[mysql(i)_fetch_assoc](http://se2.php.net/mysqli_fetch_assoc)而不是[mysql(i)_fetch_array](http://se2.php.net/mysqli_fetch_array)。这样，您将获得一个包含列名和值的[关联数组。](http://php.net/manual/en/language.types.array.php)然后一个简单的 foreach 将执行此操作：

```
$rows = mysqli_query('select * from tbl');
foreach($rows as $column => $value) {
    echo $column . ": " . $value . "<br />";
} 
```

`$rows`可能看起来像这样：

```
array(
    array('reg_no' => '321', 'col1' => 'foo'),
    array('reg_no' => '654', 'col1' => 'knox')
); 
```

# xaml - Windows8 ListView和项目之间的空间

> ID：11594794
> 
> 赞同：16
> 
> 时间：2012-07-21T18:26:02.737
> 
> 标签：xaml, listview, gridview, windows-8, windows-store-apps

我想更改 listView 中项目之间的间距（也许我应该使用另一个视图元素？）代码如下所示：

```
 <ListView SelectionMode="None" HorizontalContentAlignment="Left" >
        <ListView.Items>
            <TextBlock Text="Item 1" />
            <TextBlock Text="Item 2" />
            <TextBlock Text="Item 3" />
            <TextBlock Text="Item 4" />
        </ListView.Items>
        <ListView.ItemsPanel>
            <ItemsPanelTemplate>
                <WrapGrid Orientation="Horizontal" HorizontalChildrenAlignment="left"/>
            </ItemsPanelTemplate>
        </ListView.ItemsPanel>
    </ListView> 
```

我想尽可能多地模仿普通的stackpanel（可以包装元素）。目前，物品之间的空间（水平空间）太大了。我以前的问题-> [Windows 8 WrapPanel](https://stackoverflow.com/questions/11563062/windows-8-wrappanel)

提前致谢

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-22T00:43:34.310

您将需要对默认模板进行更改。如果您只想进行简单的更改，例如填充和边距，那么您可以这样做：（测试了代码并且应该可以工作）

```
 <ListView>
        <ListView.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapGrid Orientation="Horizontal" HorizontalChildrenAlignment="left"/>
                </ItemsPanelTemplate>
            </ListView.ItemsPanel>
        <ListView.ItemContainerStyle>
                <Style TargetType="ListViewItem">
                    <Setter Property="Padding" Value="0"/>
                    <Setter Property="Margin" Value="0"/>
                </Style>
            </ListView.ItemContainerStyle>
            <ListViewItem>
                <TextBlock Foreground="Wheat">hej</TextBlock>
            </ListViewItem>
            <ListViewItem>
                <TextBlock Foreground="Wheat">hej</TextBlock>
            </ListViewItem>
        </ListView> 
```

要获得更多控制权，请通过在设计器中选择 listviewitem 并右键单击来复制整个默认模板。选择编辑模板，编辑副本。这将生成默认模板，您可以在那里进行更改。您可以对 listviewcontainer 执行相同的操作。您也可以使用 Blend 来做到这一点。

[我在这里添加了描述和图像（如何编辑默认模板）](http://www.irisclasson.com/2012/07/22/example-winrtmetro-app-how-to-edit-default-template-in-visual-studio-2012-and-blend/)

让我知道它是怎么回事，如果你有更多问题！祝你好运！

编辑：

MemeDeveloper 在下面提到他仍然遇到问题并通过调整其他一些属性来解决它 - 他在这里发布了代码和答案，请务必查看。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-05-22T22:14:05.387

据我所知（windows8.1 xaml store app），将这两个设置为零后

```
<ListView.ItemContainerStyle>
                <Style TargetType="ListViewItem">
                    <Setter Property="Padding" Value="0"/>
                    <Setter Property="Margin" Value="0"/> 
```

我仍然有令人沮丧的差距，我似乎无法摆脱。

***在这里使用负边距可能对你有用，但是......它很老套，很难使用，并且并不总是会导致预期的结果***

拔掉头发后，我发现这些人解决了这个问题，即

**ContentMargin="0" 填充="0"**

在**ListViewItemPresenter**中如下：

```
 <ListView.ItemContainerStyle>
            <Style TargetType="ListViewItem">
                <Setter Property="Padding" Value="0" />
                <Setter Property="Margin" Value="0" />
                <Setter Property="BorderThickness" Value="0" />
                <Setter Property="VerticalContentAlignment" Value="Top" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="ListViewItem">
                            <ListViewItemPresenter ContentMargin="0" Padding="0" />
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </ListView.ItemContainerStyle> 
```

希望这可以避免其他人在键盘上反复砸头；）

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-11-10T06:18:12.507

我认为这里要修改的正确 ItemContainerStyle 属性是**MinHeight**，而不是 Margin 或 Padding。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-21T20:28:27.077

您需要编辑 ListBox.ItemContainerTemplate 属性。Blend 或 VS 视觉设计器帮助提取它进行修改。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-19T10:19:38.080

用于消除 Windows 8.1 商店应用程序的 GridView 项目中的边距的解决方案。受上述 ListView 解决方案的启发。

```
<GridView.ItemContainerStyle>
<Style TargetType="GridViewItem">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="GridViewItem">
                <GridViewItemPresenter ContentMargin="0" Padding="0"/>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>
</GridView.ItemContainerStyle> 
```

# java - 在Java中动态加载一个类并调用一个方法

> ID：11594797
> 
> 赞同：4
> 
> 时间：2012-07-21T18:26:19.007
> 
> 标签：java, class, reflection, methods, invoke

假设我想在java中动态加载一个类并调用它`start()`（没有参数）方法：

```
Class<?> c = Class.forName("AbuseMe");
c.getMethod("start").invoke(c.newInstance()); 
```

这是一个好的/安全的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T18:33:24.913

反射是在运行时处理 Java 类的一种非常有用的方法，它可以用来加载 Java 类、调用其方法或在运行时分析类。

试试这个例子。

这肯定会帮助你。

[如何在运行时使用反射调用 Java 方法](http://www.mkyong.com/java/how-to-use-reflection-to-call-java-method-at-runtime/)

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T18:32:52.107

对我来说看上去很好。

如果您正在编写大量与反射相关的代码，您可能会查看 Apache [Beanutils](http://commons.apache.org/beanutils/)或 Apache [OGNL](http://commons.apache.org/ognl/)或类似的东西。

# php - Cloud Carousel 动态图像未正确呈现（z-index 问题）

> ID：11594798
> 
> 赞同：2
> 
> 时间：2012-07-21T18:26:25.197
> 
> 标签：php, javascript, mysql

我在我的网页上实现了一个云轮播，但是当图像在一个圆圈中滑动时，当我通过 php 从数据库加载动态内容时，左侧的图像无法正确显示。发生的是应该在后面的图像实际上在前面渲染。看这张图片看看问题

[轮播问题 http://gzerodesign.com/images/carouselProblem.png](http://gzerodesign.com/images/carouselProblem.png)

您可以在左侧看到，继电器健康标志位置在前面。右侧工作正常。加载动态图像时可以解决这个问题吗？

这是我的代码

```
 <script>
$(document).ready(function(){

    // This initialises carousels on the container elements specified, in this case, carousel1.
    $("#carousel1").CloudCarousel(      
        {   

            xPos: 490,
            yPos:20,
            buttonLeft: $("#left-but"),
            buttonRight: $("#right-but"),
            altBox: $("#alt-text"),
            titleBox: $("#title-text"),
            mouseWheel:true,
            FPS:30,
            speed:0.2,
            mouseWheel:true,
            reflHeight:40,
            reflOpacity:.25,
            reflGap:1,
            yRadius:40,
            xRadius:330,
            minScale:.35,
            autoRotate:'left' 
        }
    );
});

</script>

    <div id="carousel">
         <h2>Success Stories</h2>
         <!-- Define elements to accept the alt and title text from the images. -->

        <!-- This is the container for the carousel. -->
        <div id = "carousel1"  style="width:840px; height:186px; z-index:1; left:-180px;background:none;overflow:scroll;">            
            <!-- All images with class of "cloudcarousel" will be turned into carousel items -->
            <!-- You can place links around these images -->

              <?php do { ?>

  <a class="thumbnail" href="admin/edit_company.php?co_id=<?php echo $row_rsCompanies['co_id']; ?>" id="trigger"><img class = "cloudcarousel" src="images/logo/<?php echo $row_rsCompanies['co_picture']; ?>"  border="0" />

  <span><img src="images/logo/<?php echo $row_rsCompanies['co_picture']; ?>" />
<?php echo $row_rsCompanies['co_short_description']; ?>
 </span>

</a>
  <?php } while ($row_rsCompanies = mysql_fetch_assoc($rsCompanies)); ?>

        <!--end id="carousel1"--></div>
    <!--end id="carousel"--></div> 
```

谢谢你的帮助！！

# c++ - openGL着色器：两个对象和一条线来连接它们

> ID：11594804
> 
> 赞同：0
> 
> 时间：2012-07-21T18:26:42.517
> 
> 标签：c++, opengl, graphics, glsl, shader

我正在使用着色器和可编程管道，我需要用一条线（可能是彩色的）连接两个网格，但我只有这两个对象的模型矩阵。这条线应该从这些对象的中心开始，所以我假设两点的对象坐标应该是：

```
start point: 0,0,0
end point: 0,0,0 
```

为了连接这两个对象，我假设我必须将着色器中的这些点乘以它们各自对象的模型矩阵。然后将所有内容乘以视图矩阵（这对两个对象来说很常见）。并最终由投影矩阵。

我一直使用带顶点数组的着色器，如何将两个不同的顶点传递给着色器？我也应该为他们穿制服吗？由于 glDrawElements 和 glDrawArrays 都需要数据数组，我应该使用什么函数来绘制线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T19:10:25.897

最直接的方法是创建一个 VBO，其中包含您希望使用 GL_LINES 绘制的所有线的世界空间点。

最简单的是使用 glDrawArrays。如果您有大量的对象对需要 (10.000s+) 之间的线，那么将所有点存储在 VBO 中可能是有意义的，然后使用 IBO（索引缓冲区）来说明 VBO 中的哪些点通过线。

线顶点仍然必须通过视图矩阵进行转换。

这是一个例子：GLuint vao, vbo;

```
// generate and bind the vao
glGenVertexArrays(1, &vao);
glBindVertexArray(vao);

// generate and bind the buffer object
glGenBuffers(1, &vbo);
glBindBuffer(GL_ARRAY_BUFFER, vbo);

struct Point{ 
    float x,y,z; 
    Point(float x,float y,float z) 
                    : x(x), y(y), z(z) 
    {} 
};

// create two points needed for a line. For more lines, just add another point-pair
std::vector<Point> vertexData;
vertexData.push_back( Point(-0.5, 0.f, 0.f) );
vertexData.push_back( Point(+0.5, 0.f, 0.f) );

// fill with data
size_t numVerts = vertexData.size();
glBufferData(GL_ARRAY_BUFFER, sizeof(Point)*numVerts, &vertexData[0], GL_STATIC_DRAW);

// set up generic attrib pointers
glEnableVertexAttribArray(0);
glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, numVerts*sizeof(Point), (char*)0 + 0*sizeof(GLfloat));

// "unbind" vao
glBindVertexArray(0);

// In your render-loop:
glBindVertexArray(vao);
glDrawArrays(GL_LINES, 0, numVerts); 
```

If you need to add more point-pairs during runtime, update the std::vector, bind the VBO and call glBufferData.

# ruby-on-rails - 使用 Capistrano 部署，未读取 JAVA_HOME

> ID：11594811
> 
> 赞同：4
> 
> 时间：2012-07-21T18:28:04.903
> 
> 标签：ruby-on-rails, ubuntu, environment-variables, capistrano, rjb

我正在使用 Capistrano 进行部署，在我进入 Rjb 部分之前，一切看起来都很好。

我可以

```
$ echo $JAVA_HOME
 /usr/lib/jvm/java-1.6.0-openjdk-amd64 
```

不仅如此，我还可以在服务器上执行 gem install rjb 并且它正在安装中......

但是，当我尝试：

```
$ cap bundle:install 
```

我明白了

```
** [out :: ec-...compute-1.amazonaws.com] extconf.rb:53:in `<main>': JAVA_HOME is not set. (RuntimeError) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T03:01:46.560

Capistrano 不会从部署机器或部署目标加载环境变量；您必须在 deploy.rb 中指定它们：

```
set :default_environment, 'JAVA_HOME' => "/usr/lib/jvm/java-6-openjdk-amd64" 
```

# javascript - 灰尘js编译源码如何使用

> ID：11594815
> 
> 赞同：1
> 
> 时间：2012-07-21T18:28:26.993
> 
> 标签：javascript, dust.js

我在 Dust js 中有一个示例模板，并使用dust-down 编译了该源代码。

当我将（使用脚本标签）模板 js 添加到我的代码中时，我可以在控制台中看到已编译的对象。但是我怎样才能使用那个对象呢？

```
Example :

Created a compile file with the name dusttest.js and included it in my HTML page.
In firebug console, i am able to view the object like dust.cache.dusttest 
```

如何将对象传递给该编译对象？以其他方式代替dust.render（“dusttest”，obj，function（）{}），我如何直接使用该编译对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T01:51:36.640

我没有使用过除尘，但我确实查看了它的最新源代码。
这些是进行实际编译的行：

```
var filename = filepath.split("/").reverse()[0].replace(".html", "").replace(".dust", "");
file_to_create = file_to_create + "\\" + filename + "_"  + version + ".js";

//compile to dust
// notice the second parameter to compile() is the BASE of the filename!
var compiled = dust.compile(data, filename); 
```

因为它使用dust.compile()，所以用法应该和文档中的一样。由于编译的结果是 javascript，你应该像普通的 js 脚本一样引用它。

```
<script type='text/javascript' src='/mycompilecode/mytemplate-1.0.js'></script> 
```

根据[docs](http://akdubya.github.com/dustjs/#guide)，当代码加载时，它将包含并执行dust.register() 方法，然后就可以使用了。

如果您在上面注意到dust-down 如何使用编译，它使用基本文件名作为键，这就是您想要传递给dust.loadSource() 的内容。

......所以，让我们把它们放在一起......

1.  从文件“intro.html”开始作为您的模板。
2.  使用dust-down编译它。我假设结果将是这样（如果您没有在命令行上指定除尘，则 0_0_1 是默认版本）：/templates/compiled/intro_0_0_1.js

以下代码是它的使用方式（假设已经加载了灰尘）：

```
<script type='text/javascript' src='/templates/compiled/intro_0_0_1.js'></script>
<script type='text/javascript'>
    var myCompiledTemplateKey = 'intro'; // notice! no version or .js extension
    dust.loadSource(myCompiledTemplateKey );
    dust.render(myCompiledTemplateKey , {name: "Fred"}, function(err, out) {
        console.log(out);
    });
</script> 
```

# numpy - 解决有关 numpy 和 sklearn 的 PyDev 未解决的导入

> ID：11594821
> 
> 赞同：5
> 
> 时间：2012-07-21T18:29:03.813
> 
> 标签：numpy, scipy, scikit-learn, pydev, kaggle

我几乎可以找到解决这些未解决导入的所有问题。这是我要导入的内容：

```
from sklearn.ensemble import RandomForestClassifier
from numpy import genfromtxt, savetxt 
```

在运行 PyDev 的 Mac OS X Lion 上的 eclipse 中，出现以下错误；

```
Description Resource    Path    Location    Type
Unresolved import: genfromtxt   makeSubmission.py   /BioResponse/src    line 1  PyDev Problem
Unresolved import: RandomForestClassifier   makeSubmission.py   /BioResponse/src    line 0  PyDev Problem
Unresolved import: savetxt  makeSubmission.py   /BioResponse/src    line 1  PyDev Problem 
```

请注意，这是用于设置[Kaggle](http://www.kaggle.com/wiki/GettingStartedWithPythonForDataScience)。

我没有得到的是，当我在终端中输入以下命令时，一切似乎都很好（我没有看到任何可见的错误）：

```
$python
Python 2.7.3 (v2.7.3:70274d53c1dd, Apr  9 2012, 20:52:43) 
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> from numpy import savetxt
>>> 
```

如果您知道可能的解决方案，请尝试详细说明。我是 Mac 和 PyDev 的新手

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T10:22:05.437

也许您的系统上安装了 2 个 python 解释器，而 PyDev 使用的那个不是安装 numpy 的那个。

键入`which python`终端以了解安装`PATH`numpy 的位置中安装的 python 的路径，然后转到 PyDev 首选项菜单以了解为 PyDev 配置的 python。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-20T18:13:57.170

另一种解决方案可能是将您的 /Library/Python/2.x/site-packages 文件夹添加到“PyDev -> Interpreter Python -> Libraries”下的 Eclipse Preferences 中的 System Libs 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-12T07:04:25.137

根据大卫的解决方案，请确保正确输入。对我来说（在 Eclipse 中）：Window -> Preferences -> PyDev -> Interpreters -> Python Interpreter ->（选择顶部的版本）-> Libraries -> 这里有一个错字：

C:\Python35\lib\site-packages

代替

C:\Python35\Lib\site-packages

# java - 为什么要列出清单 在编译和执行时吸收非类型元素？

> ID：11594823
> 
> 赞同：1
> 
> 时间：2012-07-21T18:29:16.917
> 
> 标签：java, exception, generics, types, casting

我有这个演示，我不需要具有重绘架构的特定解决方案，但只需了解为什么会这样以及我为避免它而遗漏的任何事情。我想知道为什么：

*   编译器允许将不是列表类型的元素插入到列表中
*   当我们尝试获取元素而不是推送它时抛出 ClassCast 异常

    ```
    import Test.*; //Inner classes
    import java.util.List;
    import java.util.ArrayList;

    public class Test<E extends Object> {

        private List<E> list = new ArrayList<E>();
        public Test() {}

        public static void main(String[] args) {
            Test<String> a = new Test<String>();
            a.addElement(new String());
            a.addElement(new Integer(0)); // No complain in comp/run-time, I dont understand why CastException is not thrown here
            String class1 = a.getElement(0); 
            String class2 = a.getElement(1); //No complain in comp but ClassCastException: Integer cannot be cast to String
            //Integer class3 = a.getElement(1); //Compilation error
        }

        public void addElement (Object node) { list.add((E) node); } //No complain in comp/run-time
        public E getElement(int index)       { return list.get(index); }
    } 
    ```

有什么解决办法？注意我需要传递 SuperClass 而不是类型 E 的 addElement 行。这是我的架构所需要的，这只是一个简单的模拟演示。但无论如何，类型 E 的强制转换应该按照需要运行并在运行时抛出 CastExeption，不应该吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T18:33:42.330

您的 addElement 方法未正确使用泛型以允许捕获编译时错误。它应该是：

```
public void addElement(E node) {
  list.add(node);
} 
```

一旦您使用 Object cast 并将其强制转换为 E，您将失去编译时类型检查的好处。这就是我们首先使用泛型的原因，以避免使用 Object 变量并避免强制转换。

请注意，由于泛型类型擦除，在运行时列表只是一个对象列表，因此当您将对象放入列表时，甚至不会发生第一次强制转换。但是，当您从列表中提取项目并需要将其分配给具体类型变量时，场景转换确实会发生，这会导致您的异常被抛出。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-21T18:50:18.637

问题是`(E) node`由于类型擦除而没有进行运行时类型检查。所有关于泛型类型的信息在编译后都会丢失。

Java 编译器应该警告你：

```
Type safety: Unchecked cast from Object to E 
```

[您可以使用对java.lang.Class](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html)的引用手动执行此检查：

```
private Class<E> clazz;

public Test(Class clazz) {
    this.clazz = clazz;
}

public void addElement (Object node) {
    list.add(clazz.cast(node));
}

public static void main(String[] args) {
    Test<String> test = new Test(String.class);
    test.addElement("test");
    test.addElement(Integer.intValue(10));
} 
```

# java - 在 JBoss 6 中使用反射加载 JAR 文件

> ID：11594826
> 
> 赞同：0
> 
> 时间：2012-07-21T18:29:37.860
> 
> 标签：java, reflection, jboss

我正在尝试使用反射从 JAR 文件中加载一个类。这个 JAR 文件有一个实现不同 JAR 文件中的接口的类。项目知道包含接口的 JAR 文件，因为它位于其构建路径中。这个 JAR 文件也在 JBoss 6 的两个文件夹中，分别是“client”和“common/lib”。

当我尝试使用类 java.net.URLClassLoader 的 loadClass 方法动态加载类以创建对象时，就会出现问题。对于项目和 JAR 文件共享的接口，将引发 ClassNotFoundException。我通过以下方法获取 ClassLoader：

```
public static ClassLoader getClassLoader(final String fileName) {
    final File file = new File(fileName);
    URL url;
    ClassLoader classLoader = null;
    try {
        url = file.toURL();
        final URL[] urls = new URL[]{url};
        classLoader = new URLClassLoader(urls);

    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return classLoader;
} 
```

我必须使用这个 ClassLoader 加载该类，因为该类是 File 变量，它包含对 JAR 的引用，而该 JAR 不在 JBoss 中。

我是否必须将带有接口的 JAR 包含在 JBoss 的不同文件夹中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T13:59:43.717

您只能引用 Jboss 类路径中的类。因此，如果 jboss 未加载 jar，则无法加载它。

# scala - 为什么字符串字面量符合 Scala Singleton

> ID：11594828
> 
> 赞同：8
> 
> 时间：2012-07-21T18:29:41.877
> 
> 标签：scala

明智与否，我正在编写一个我只想接受 Scala 单例的方法，即通过“对象”实现的对象，而不是类或特征的构造实例。它应该接受任何类型的 Scala 单例，因此“MySingleton.type”不会这样做。

我遇到了一个非常奇怪的构造“scala.Singleton”，它没有在 api 文档中记录，但似乎可以解决问题：

```
scala> def check( obj : Singleton ) = obj
check: (obj: Singleton)Singleton

scala> check( Predef )
res0: Singleton = scala.Predef$@4d3e9963

scala> check ( new java.lang.Object() )
<console>:9: error: type mismatch;
 found   : java.lang.Object
 required: Singleton
              check ( new java.lang.Object() )

scala> check( Map )
res3: Singleton = scala.collection.immutable.Map$@6808aa2d

scala> check( Map.empty[Any,Any] )
<console>:9: error: type mismatch;
 found   : scala.collection.immutable.Map[Any,Any]
 required: Singleton
              check( Map.empty[Any,Any] ) 
```

然而，相当莫名其妙（对我来说），字符串文字被接受为单例，而显式构造的字符串不是：

```
scala> check( "foo" )
res7: Singleton = foo

scala> check( new String("foo") )
<console>:9: error: type mismatch;
 found   : java.lang.String
 required: Singleton
              check( new String("foo") ) 
```

为什么 String 字面量符合 Singleton？我是否误解了 Singleton 类型应该指定的内容？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-22T07:01:13.023

首先，什么是单例类型？如果你认为一个类型是一组值，那么单例类型就是一个只有一个元素的集合。

最常见的是，顶级对象可以居住在这样的集合中。

```
scala> object X
defined module X

scala> X: X.type
res41: X.type = X$@131d1cb

scala> res41: Singleton
res42: Singleton = X$@131d1cb 
```

更一般地说，*稳定*值可以形成单例类型。

```
scala> object X { val y: String = "boo" }
defined module X

scala> X.y: X.y.type
res44: X.y.type = boo

scala> res44: Singleton
res45: Singleton = boo 
```

如果`y`是 a`def`或 a `var`，它不再符合条件，因为随着时间的推移值可能会不同，因此编译器不能保证单例类型对一个且只有一个值进行分类。

```
scala> object X { def y: String = "boo" }
defined module X

scala> X.y: X.y.type
<console>:12: error: stable identifier required, but X.y found.
              X.y: X.y.type
                     ^

scala> object X { var y: String = "boo" }
defined module X

scala> X.y: X.y.type
<console>:12: error: stable identifier required, but X.y found.
              X.y: X.y.type
                     ^ 
```

还有一个限制：`AnyVal`s 不能形成单例类型，因为语言规范明确将它们限制为`AnyRef`.

Paul Phillips 一直在策划一个允许您为文字表达单例类型的[分支。](https://github.com/paulp/scala/commit/824ce5e)

```
val xs: Stream[0.type](0)
val ys: Stream[0.type](0, 1) // does not compile
val x = xs.head // inferred type is 0.type, we statically know that this can only be 0! 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-21T18:45:32.527

据我所知，在这种情况下，每个不可变引用都有资格作为单例，而不仅仅是字符串。例如，您可以 ,`invoke check(5)`或`val foo = List(1,2,3); check(foo)`。`var bar = List(1,2,3); check(bar)`但是，将无法正常工作。

从这种行为来看，如果编译器可以确定它永远不会改变（或者在这种情况下是“最终的”），我会假设一个引用被认为是一个单例。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-22T17:28:01.813

I think the easiest clue is comes from chapter 3 in the Scala Reference, section 3.2.1:

> A singleton type is of the form p.type,where p is a path pointing to a value expected to conform (§6.1) to scala.AnyRef. The type denotes the set of values consisting of null and the value denoted by p.
> 
> A stable type is either a singleton type **or a type which is declared to be a subtype of trait scala.Singleton.**

The concept of stable types is important, and the trait makes it possible to declare things to be stable that would not otherwise be considered so.

# android - ViewPager 中的 ListView - 如何获取项目位置？

> ID：11594833
> 
> 赞同：0
> 
> 时间：2012-07-21T18:30:28.680
> 
> 标签：android

我想实现两个页面之间的滑动。第一页是一个 ListFragment，有几个项目。我希望能够滑动单个项目并切换到另一个 Activity 以对该 ListItem 进行一些处理。

我已经使用 ViewPager 实现了 Activity 切换——这似乎是处理这个问题的最合理的方法。但是，当切换到另一个屏幕时，我不知道如何从 ListFragment 获取刷过的项目。

我知道有 onListItemClick()，但不知道它是否允许在滑动后获取项目索引。根据我的发现 - 它没有。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T08:43:35.980

我已经设法使用以下重载的 ViewPager 类来做到这一点：

```
import android.R;
import android.content.Context;
import android.support.v4.view.ViewPager;
import android.util.AttributeSet;
import android.util.Log;
import android.view.GestureDetector;
import android.view.MotionEvent;
import android.view.View;
import android.widget.ListView;
import org.ftang.model.Program;

public class TouchingViewPager extends ViewPager {

    private GestureDetector gestureScanner;

    public TouchingViewPager(Context context) {
        super(context);
        gestureScanner = new GestureDetector(simpleOnGestureListener);
    }

    public TouchingViewPager(Context context, AttributeSet attrs) {
        super(context, attrs);
        gestureScanner = new GestureDetector(simpleOnGestureListener);
    }

    @Override
    public boolean onTouchEvent(MotionEvent ev) {
        int currentItem = getCurrentItem();
        gestureScanner.onTouchEvent(ev);
        return super.onTouchEvent(ev);
    }

    GestureDetector.SimpleOnGestureListener simpleOnGestureListener = new GestureDetector.SimpleOnGestureListener() {

        public boolean onDown(Math event) {
            return true;
        }

        public boolean onFling(MotionEvent event1, MotionEvent event2, float velocityX, float velocityY) {
            Log.d(null,"Fling");
            int MAJOR_MOVE = 120;
            if (event1 == null) event1 = MotionEvent.obtain(0, 0, 0, 0, 0, 0);
            int dx = (int) (event2.getX() - event1.getX());
            // don't accept the fling if it's too short
            // as it may conflict with a button push
            if (Math.abs(dx) > MAJOR_MOVE && Math.abs(velocityX) > Math.abs(velocityY)) {
                if (velocityX > 0) {
                    // nothing
                } else {
                    ListView liveView = (ListView) findViewById(R.id.list);
                    Program program = (Program) liveView.getAdapter()
                            .getItem(liveView.pointToPosition((int)event1.getX(), (int)event1.getY()));
                    program.getName();
                } 
                return true;
            } else {
                return false;
            }
        }

    };
} 
```

请注意，我在 onTouchEvent 中再次调用了gestureScanner。我想我可以以某种方式连接自定义 getsutureScanner 以便它处理所有触摸事件。但是，由于我不熟悉 ViewPager 事件的处理方式，因此我决定并排调用我自己的处理程序。

如果有更好的方法来做到这一点 - 请告诉我。

# php - 通过 ajax 插入，然后使用 Javascript 淡入内容

> ID：11594834
> 
> 赞同：0
> 
> 时间：2012-07-21T18:30:46.853
> 
> 标签：php, javascript, jquery, mysql, forms

所以我目前有将数据提交到我的数据库的表单。但现在我想知道如何将这些数据打印到页面中。

有人告诉我我必须使用 javascript 来执行此操作，但问题是我有一个喜欢和不喜欢按钮一个评论按钮一个删除按钮和一个 div 中的我的个人资料图像，该 div 有一个要删除的 postid，它位于我的表单下配置文件.php。我也需要实现所有这些。这是一项艰巨的任务吗？我需要做什么。

举个例子。当您在这里提出问题时，它会通过 ajax 发送数据，然后使用编辑、删除等按钮将帖子打印出来，而无需重新加载页面。我正在寻找做类似的事情。

```
$(document).ready(function(){
    $("form#myform").submit(function(event) {
        event.preventDefault();
        var toid = $("#toid").val();
        var newmsg = $("#newmsg").val();

        $.ajax({
            type: "POST",
            url: "insert.php",
            data: "toid=" + content + "&newmsg=" + newmsg,
            success: function(){alert('success');}
        });
    });
});

<form id="myform"  method="POST"  class="form_statusinput">
<input type="hidden"  name="toid" id="toid" value="<?php echo $user1_id; ?>">
<input class="input" name="newmsg" id="newmsg" placeholder="Say something" autocomplete="off">
<div id="button_block">
<input type="submit" id="button" value="Feed">
</div>
</form> 
```

评论链接

```
echo "<div class='stream_option'><a style='cursor:pointer;' id='commenttoggle_".$streamitem_data['streamitem_id']."' onclick=\"toggle_comments('comment_holder_".$streamitem_data['streamitem_id']."');clearTimeout(streamloop);swapcommentlabel(this.id);\"> Write a comment...</a></div>";
}else{
echo "<div class='stream_option'><a style='cursor:pointer;' id='commenttoggle_".$streamitem_data['streamitem_id']."' onclick=\"toggle_comments('comment_holder_".$streamitem_data['streamitem_id']."');clearTimeout(streamloop);swapcommentlabel(this.id);\"> Show Comments (".$num2.")</a></div>"; 
```

喜欢链接

```
cho "<div class='stream_option'><a id='likecontext_".$streamitem_data['streamitem_id']."' style='cursor:pointer;' onClick=\"likestatus(".$streamitem_data['streamitem_id'].",this.id);\">"; 
```

不喜欢链接

```
echo "<div class='stream_option'><a id='dislikecontext_".$streamitem_data['streamitem_id']."' style='cursor:pointer;' onClick=\"dislikestatus(".$streamitem_data['streamitem_id'].",this.id);\">"; 
```

删除链接

```
<? if($streamitem_data['streamitem_creator']==$_SESSION['id']){
echo "<div style='cursor:pointer;position:relative;top:-70px;float:right;padding-right:5px;' onclick=\"delete_('".$streamitem_data['streamitem_id']."');\">X</div>";} 
```

# eclipse - 如何从 Eclipse IDE Juno 版本中卸载 Power Designer 16 插件

> ID：11594836
> 
> 赞同：0
> 
> 时间：2012-07-21T18:31:03.017
> 
> 标签：eclipse, plugins, uninstallation, powerdesigner

我一直在尝试从我的 Eclipse IDE 中卸载 power Designer 16（sybase 产品）的插件，但找不到这样做的方法。我已经检查了 about-eclipse > 安装细节的东西，但是 power-designer 没有列在已安装的插件列表中，尽管它的所有组件都显示在已安装的软件类别中（尽管没有卸载它们的选项）。

我也在寻找一种解决方案，该解决方案将删除也添加的电源设计师视角。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T18:39:14.590

在 Eclipse 中卸载/禁用插件有点棘手。我在我的博客中描述过一次：[http ://www.asgarli.net/2011/05/uninstalling-eclipse-plugins-from.html](http://www.asgarli.net/2011/05/uninstalling-eclipse-plugins-from.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T00:07:26.307

尝试手动检查 Eclipse 的安装文件夹中的插件文件：

Eclipse > 插件或 Eclipse > 功能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T11:11:34.793

在朱诺：

Windows>首选项>安装/更新>卸载或更新。

单击要删除的插件，然后单击卸载

# cocos2d-iphone - 以正确顺序从 plist 中读取项目范围

> ID：11594837
> 
> 赞同：0
> 
> 时间：2012-07-21T18:31:04.397
> 
> 标签：cocos2d-iphone, plist

在 iPhone 的 cocos2d 中，有没有办法将以下内容变成一个 for 循环，以便可以指定一个值范围？目前，它只是遍历所有值（但顺序不正确）。

```
// plist file 
NSString * file                 = @"myproperties";
NSString * dictPath             = [[NSBundle mainBundle] pathForResource:file 
                                                         ofType:@"plist"];

// get dictionary
NSMutableDictionary * dictPlist = [[NSMutableDictionary alloc] 
                                   initWithContentsOfFile:dictPath];

NSEnumerator *enumerator = [dictPlist objectEnumerator ];
id value;
while ((value = [enumerator nextObject])) {
    CCLog("Test: @%", [value objectForKey:@"Name"]);
} 
```

我希望能够只打印一系列项目，比如 10 到 15（按照数据在列表中的顺序）。怎样才能做到这一点？

* * *

**编辑：**如果我想使用数组而不是字典（以保持顺序），我需要如何更改以下列表？

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>personTom</key>
    <dict>
        <key>Name</key>
        <string>Tom</string>
        <key>Age</key>
        <integer>30</integer>
    </dict>
    <key>personJames</key>
    <dict>
        <key>Name</key>
        <string>James</string>
        <key>Age</key>
        <integer>45</integer>
    </dict>
    <!-- (...) -->
</dict>
</plist> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T18:56:41.107

遍历 NSDictionary 元素会为您提供随机顺序的元素。字典未排序。

如果排序对您很重要，请使用 NSArray 存储您的元素并对其进行排序。或者，您可以读取所有字典的键并将它们放在临时 NSArray 中，然后对该数组进行排序，遍历数组中的键以按排序顺序获取字典的值。

# php - 使用 Zend_Soap_Client 读取数据

> ID：11594839
> 
> 赞同：0
> 
> 时间：2012-07-21T18:31:18.903
> 
> 标签：php, soap, zend-soap

我是新手`Zend_Soap_Client`。我以以下代码为例，并尝试了解其背后的内容。我是否正确理解它连接到远程服务器并读取指定的数据？最后，据我了解，应该将这些数据保存在`test.txt`.

我试图运行这段代码（我有必要的证书）。问题是没有数据保存到`test.txt`. 那么，有人可以向我解释一下这项技术，或者给我一个关于类似主题的好教程的链接吗？特别是，我对如何将必要的数据保存到本地 XML 文件或数组非常感兴趣。

PS如果我使用了一些不正确的定义，我深表歉意，因为正如我在开头提到的那样，我`Zend_Soap_Client`对相关技术是新手。

```
$wsdl = 'tttest.wsdl';

$options = array(
    'local_cert' => 'certificate.pem',
    'soap_version' => SOAP_1_1
);

$client = new Zend_Soap_Client($wsdl, $options);

$p = array(
    'endUserId' => 'demo',
    'sendTime' => array('value' => date("Y-m-d H:i:s")),
    'eaupId' => array('chainDate' => array('value' => $chaindate), 'sequenceNumber' => 1)
);
$webServices = $client->retrieveEAUPCDRs($p);

$line = $client->getLastResponse();
$line = substr($line, 110);
$line = substr($line, 0, -22);
$xml = simplexml_load_string($line);

$result = $xml->xpath('//@ns3:title | //ns2:beginPosition | //ns2:endPosition | //ns4:upperLimit | //ns4:lowerLimit | //ns8:conditionalRouteType');

$filename = 'test.txt';
if ($fh = fopen($filename, "r")) {
    while (!feof($fh)) {
        $line = fgets($fh);
        if (strlen($line) != 0) {
            $chars = explode(";", $line, 5);
            $np[$chars[0]] = "$chars[3],$chars[2]";
        }
    }
    fclose($fh);
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T02:01:22.573

这段代码不会做你认为它正在做的事情。

前三分之二（直到并包括对 的调用`xpath()`）确实连接到服务器并获取一些信息，这些信息最终被放置在`$result`变量中。但是，最后 11 行不使用前一个代码中的任何数据（`$line`在最后一位中被重新使用）。

此外，`fopen()`正在使用“r”选项调用，这意味着只读。

我建议花一些时间在[http://php.net](http://php.net)上研究此代码中使用的各种 PHP 函数和语言结构，然后访问 Zend 框架手册以获取更多信息`Zend_Soap_Client`： http: [//framework.zend.com /manual/1.12/en/manual.html](http://framework.zend.com/manual/1.12/en/manual.html)

# javascript - 任何开源标签编辑器，就像 SO 一样？

> ID：11594842
> 
> 赞同：9
> 
> 时间：2012-07-21T18:31:44.717
> 
> 标签：javascript, user-interface

寻找允许从预定义集合中选择多个项目的 UI 元素实现，就像我们在此处的标签编辑器一样，位于 StackOverflow 上的问题表单下方。

我什至不知道这种控制的正确名称是谷歌它。多选？多编辑？

自动完成（和 jQuery Autocmplete）不完全是因为它只选择一个项目，尽管标签编辑器确实有自动完成作为辅助。

jQuery 没问题，虽然我更喜欢在现代浏览器上运行的通用 JavaScript：IE9+ 和其他浏览器。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-21T18:35:28.613

jQuery UI [Autocomplete](http://jqueryui.com/demos/autocomplete/)支持多[选](http://jqueryui.com/demos/autocomplete/#multiple)。

除此之外，没有特别的顺序：

*   [选择2](http://ivaynberg.github.com/select2/index.html)
*   [jQuery 标记它！](http://aehlke.github.com/tag-it/)
*   [选择](http://harvesthq.github.com/chosen/)
*   [文本分机](http://textextjs.com/)
*   [jQuery 标签输入插件](http://xoxco.com/projects/code/tagsinput/)
*   [jQuery 塔吉特](http://webspirited.com/tagit/)
*   [标记编辑](http://tagedit.webwork-albrecht.de/)
*   [jQuery 令牌输入](http://loopj.com/jquery-tokeninput/)
*   [FCBK完成](http://www.emposha.com/javascript/fcbkcomplete.html)
*   [自动建议](http://code.drewwilson.com/entry/autosuggest-jquery-plugin)

**编辑：**刚刚发现另一个类似的 SO 问题。也看看那里：[jQuery autocomplete tagging plugin like StackOverflow's input tags?](https://stackoverflow.com/questions/519107/jquery-autocomplete-tagging-plug-in-like-stackoverflows-input-tags)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T18:46:27.940

[Chosen.js](http://harvesthq.github.com/chosen/)是一个简单干净的库；它还允许多选。

![在此处输入图像描述](../Images/2041f08aed2e4f05b24e4977014e3df3.png)

# c++ - 默认成员值最佳实践

> ID：11594846
> 
> 赞同：89
> 
> 时间：2012-07-21T18:32:02.647
> 
> 标签：c++, constructor, c++11, header-files, default-value

编写 C++11 代码以在类的头文件中为类成员设置默认值是一种好习惯吗？

还是在类的构造函数中这样做更好？

编辑：

我是说：

**foo.h**：

```
#include <string>

using std::string;

class Foo{
    private:
        string greet = "hello";
    public:
        Foo();
}; 
```

VS

**foo.cpp**（当然有必要的头文件，但没有类内初始化）：

```
Foo::Foo(){
    greet = "hello";
} 
```

哪个更好，为什么？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-07-21T18:48:55.133

如果一个类成员总是用相同的初始值初始化，那么你应该使初始化器内联，以避免重复。如果初始值依赖于构造函数，则将其放入构造函数初始化列表中。（永远不要像以前那样使用赋值。）

例子：

```
class Foo
{
    bool done = false;   // always start like this
    int qty;
    Bar * p;

public:
    Foo()                        : qty(0),              p(nullptr)    { }
    Foo(int q, Bar * bp)         : qty(q),              p(bp)         { }
    explicit Foo(char const * s) : qty(std::strlen(s)), p(new Bar(s)) { }

    // ...
}; 
```

在这个假设的示例中，成员`done`始终需要以 开头`false`，因此最好内联编写初始化程序。其他两个成员`qty`和`p`可以在三个不同的构造函数中分别进行不同的初始化，因此它们在构造函数的初始化列表中进行初始化。

[一件珍品：请注意，提供内联初始值设定项可防止您的类具有*琐碎的默认构造函数*。]

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-21T18:36:41.437

这取决于您是否需要与旧的 C++ 编译器保持兼容。当您不使用 C++11 时，您必须在构造函数中初始化大多数成员（所有成员都是非静态的）。此外，许多人主张显式初始化每个成员，即使这意味着显式调用默认 ctor。通常你应该将实现细节放在一个 cpp 文件中而不是在头文件中，因此一个例子是

```
Example:
//foo.h

class Foo{
public: 
  Foo();
private:
  std::vector<int> vect;
};

//foo.cpp

Foo::Foo():vect(){
} 
```

在 C++11 中，您有更多选择，并且在类成员初始化程序中将变得非常方便，特别是如果您有多个 cors。这是一个很好的链接以获取更多信息： http: [//www.stroustrup.com/C++11FAQ.html#member-init](http://www.stroustrup.com/C++11FAQ.html#member-init)

**编辑后：**根据您的代码，您使用的是 C++11。据我所知，关于新可能性的良好实践信息很少，但恕我直言，在类成员初始化程序中非常方便地将初始化集中在一个地方，从而降低了复杂性和打字

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-21T18:50:55.370

在标头中初始化的主要优点是使代码更加本地化且易于理解。它还节省了一些打字。

在我看来，主要缺点是需要包含更多标头才能访问构造函数。简单的前向声明是不够的，使得编译需要更长的时间。

# php - 使多个随机 div 以不同的时间淡入和淡出

> ID：11594847
> 
> 赞同：0
> 
> 时间：2012-07-21T18:32:09.927
> 
> 标签：php, javascript, jquery, dom

我在使服务器端生成的代码（`<php ?>`） div 淡入淡出时遇到问题。

我查询一个数据库并返回我放在一个 div 中的六行。由于 mysql 查询中的 while 子句，通常 div 将重复六次。这里的问题是我希望六个 div 在不同的时间淡入和淡出。只要六个动态生成的 div 在不同时间随机淡入，哪个先淡入并不重要。

我知道这将是 jquery 或 javascript，我是新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T18:42:04.580

就像是：

```
function fadeRandom($divI) { // make a function we can re-use
    window.setTimeout(function() { // do this next stuff after a short break
        $divI.fadeIn(100, function(){ // fade $divI in, then ...
            $divI.fadeOut(100, function() { // fade $divI out, then ...
                fadeRandom($divI); // start the whole cycle over
            }
        }, Math.random(100) * 100); // do that after 1-100ms
    });
}
for (var i = 0; i++; i < 6) { // go through all 6 divs and ...
    fadeRandom($('#div_' + i)); // get the fade cycle started
} 
```

应该管用。那是未经测试的代码，您可能想要调整数字，但希望它能给您一个基本的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T18:42:50.310

您很可能需要使用一些不同的 Javascript 来完成听起来像您想要的...

如果您有六个元素，那么您可以使用该`.random()`函数来获取下一个要交换的元素...示例如下[。](http://css-tricks.com/generate-a-random-number/)

jQuery 有一些内置的方法来淡入/淡出元素...

[在这里`.fadeIn()`](http://api.jquery.com/fadeIn/)

[在这里`.fadeOut()`](http://api.jquery.com/fadeOut/)

您可以使用此处`.doTimeout()`演示的计时器[。](http://benalman.com/projects/jquery-dotimeout-plugin/) 这是一个 jQuery 插件。Javascript 确实有一个内置的计时器`setInterval()`，但是使用它`.doTimeout()`可以让你保持我喜欢的相同的 javascript 外观/感觉。

# c++ - C ++：操作符<<在具有默认参数的派生类中？

> ID：11594853
> 
> 赞同：2
> 
> 时间：2012-07-21T18:32:42.183
> 
> 标签：c++, stream, operator-overloading

有一个类 A 具有虚方法 print() 和重载运算符 << 定义为友元函数。

```
#include <iostream>
class A
{
public:
    double a1, a2;
    A(): a1(10.0), a2(10.0) {}

    virtual void print ( std::ostream * o = &std::cout ) const
    {
        *o << a1<< '\t' << a2 << '\n';
        }

    friend std::ostream & operator << ( std::ostream & o, const A &aa )
    {
        o << aa.a1 << '\t' << aa.a2 << '\n';
        return o;
    }
}; 
```

并且类似地在派生类B中

```
 class B : public A
 {
public:
    double b1, b2;
    B(): A(), b1(20.0), b2(20.0) {}

    virtual void print ( std::ostream * o = &std::cout ) const
    {
        A::print ( o );
        *o << b1<< '\t' << b2;
    }

    friend std::ostream & operator << ( std::ostream & o, const B &bb )
    {
        o << (A)(bb);
        o << bb.b1 << '\t' << bb.b2 << '\n';
        return o;
    }
 }; 
```

我有以下问题：

1] 有什么方法可以使用默认参数传递指向 ostream 对象的指针，以便 operator << 正确替换 print() 方法？这种重载是错误的

```
friend std::ostream & operator << ( std::ostream * o= &std::cout, const A &aa ) 
```

2]我不确定，如果派生类B中父类A的这一行调用运算符是否正确？

```
 o << (A)(bb); 
```

3]有没有更好的方法如何在没有“朋友”声明的情况下重载运算符<<？

谢谢你的帮助....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T19:05:00.427

您可以在没有友谊的情况下这样做：

```
#include <iostream>
class A
{
    double a1, a2;

public:
    A(): a1(10.0), a2(10.0) {}

    virtual void print ( std::ostream * o = &std::cout ) const
    {
        *o << a1 << '\t' << a2;
    }
};

std::ostream & operator << ( std::ostream & o, const A &aa )
{
    o << "( )";
    aa.print(&o);
    return o << " )";
} 
```

然后`class B`不是一个单独的版本`operator<<`，这个会被找到，并`B::print`在你传递给它一个`B`实例时调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T19:07:14.293

我一直想知道如何避免冗长的朋友声明并提出以下建议：

```
template<typename T>
class OutEnabled {
  public:
    friend std::ostream& operator<<(std::ostream& out, T const& val) {
      return static_cast<OutEnabled<T> const&>(val).ioprint(out);
    }

    friend QTextStream& operator<<(QTextStream& out, T const& val) {
      return static_cast<OutEnabled<T> const&>(val).ioprint(out);
    }

    friend QDebug operator<<(QDebug dbg,T const& val) {
      std::stringstream myStream;
      myStream << val;
      dbg.maybeSpace() << myStream.str().c_str();
      return dbg;
    }

  protected:
    template<typename U>
    U& ioprint(U& out) const {
      return static_cast<T const*>(this)->print(out);
    }
};

class Foo:public OutEnabled<Foo>{
  public:
    Foo(){}

    template<typename V>
    V& print(V& out) const{return out<< "Bar";}
}; 
```

写这个我可以写：

```
std::cout << Foo();
qDebug() << Foo(); 
```

...

我经常使用这个概念，因为它允许您指定一个打印并将其用于不同的流。我必须至少使用我提到的三个，所以对我来说它值得复杂。朋友们不在你的班级里，所以打字少了，从继承中很明显你的班级是可打印的。轻微的缺点是您在每个使用 OutEnabled 的类中都有一个模板。

# jquery - 如何为 3 个 jQuery 工具可滚动项延迟或触发延迟

> ID：11594857
> 
> 赞同：0
> 
> 时间：2012-07-21T18:32:52.250
> 
> 标签：jquery, scrollable

我有 3 个 jQuery 工具可滚动设置。他们像冠军一样工作。我似乎找不到或无法理解的是如何让他们在开始滚动之前“延迟”他们的初始起点。

我不希望所有 3 人同时滚动。

我希望左边的在加载时立即滚动。然后中间开始它第一次滚动 800 毫秒后，然后右边开始它第一次滚动 1600 毫秒后。

这是我到目前为止所得到的...... fireDelay 或只是 Delay 或 InitialDelay 等......似乎根本不起作用。

我正在使用这个站点的 jQuery 插件。[http://www.jquerytools.org/demos/scrollable/plugins.html](http://www.jquerytools.org/demos/scrollable/plugins.html)它被称为“可滚动插件在行动”。我正在使用它的这个独立视图 3 次。[http://www.jquerytools.org/demos/scrollable/plugins-navigator.htm](http://www.jquerytools.org/demos/scrollable/plugins-navigator.htm)我给了每个人它自己的 ID 以允许它工作。

想法或想法赞赏！

```
 <!-- javascript coding -->
    <script type="text/javascript">
    $(document).ready(function() {

    // heeeeeeeeeeere we go.
    $("#chained1").scrollable({circular: true, mousewheel: false}).navigator().autoscroll({
    fireDelay: 800,
    interval: 3000
    });

    $("#chained2").scrollable({circular: true, mousewheel: false}).navigator().autoscroll({
    fireDelay: 1600,
    interval: 3000
    });

    $("#chained3").scrollable({circular: true, mousewheel: false}).navigator().autoscroll({
    fireDelay: 3200,
    interval: 3000
    });

    });
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T07:59:49.183

该插件中没有`fireDelay`属性，但 JavaScript可以使用您可以使用的功能`setTimeout`。`clearTimeout`

```
$.fn.timeout = function(fn, delay){
  var self = this;
  setTimeout(function(){
    self.each(function(){
      fn.call(this);
    });
  }, delay);
  return this;
}; 
```

设置`autoplay`为`false`，然后`.play()`在您想启动它时调用。

```
$("#chained1")
  .scrollable({
    circular: true,
    mousewheel: false
  })
  .navigator()
  .autoscroll({
    interval: 3000,
    autoplay: false
  })
  .timeout(function(){
    $(this).data("scrollable").play();
  }, 800);​ 
```

# vb.net - 如何初始化结构中的数组

> ID：11594860
> 
> 赞同：-1
> 
> 时间：2012-07-21T18:33:10.207
> 
> 标签：vb.net, arrays, initialization

我正在尝试初始化一个数组并分配值，但我遇到了问题

```
Public Structure test1
    <VBFixedArray(6)> Dim Id() As String
    Public Sub initialize()
        ReDim Id(6)
    End Sub
End Structure

Dim myvalues() as test1
...
ReDim myvalues(10) 
```

我正在尝试通过以下方式完成此操作

```
For i as short = 0 to 10
    myvalues(i).Id(1) = "V"
    myvalues(i).Id(2) = "H"
    ...
    myvalues(i).Id(6) = "J"
next i 
```

这不起作用，我不确定正确的实施？

编辑：

```
Imports Microsoft.VisualBasic
Module Module1
Structure test1
    <VBFixedArray(6)> Dim Id() As String
    Public Sub initialize()
        ReDim Id(6)
        For im As Integer = 0 To 6
            Id(im) = ""
        Next im
    End Sub
End Structure
Sub Main()
    Dim i As Integer
    Dim myvalues() As test1
    ReDim myvalues(10)
    For Each oTest As test1 In myvalues
        ' Initialize the structure 
        ReDim myvalues(10)
        oTest.initialize()
        ' Now loop through the array based on the bounds it was configured for
        'initialize to empty string(NOT ABLE TO ASSIGN TO> myvalues(i).Id(j))
        'I Get ERROR>>>Object reference not set to an instance of an object<<<<<
        'For i = 0 To 10
        For j As Integer = oTest.Id.GetLowerBound(0) To oTest.Id.GetUpperBound(0)
            ' Set the values in a case statement so that alterations to the size of the index won't break your code.
            Select Case j
                Case 0
                    oTest.Id(j) = "A"
                    myvalues(i).Id(j) = "A"
                Case 1
                    oTest.Id(j) = "B"
                    'myvalues(i).Id(j) = "B"
                Case 2
                    oTest.Id(j) = "C"
                    'myvalues(i).Id(j) = "C"
                Case 3
                    oTest.Id(j) = "D"
                    'myvalues(i).Id(j) = "D"
                Case 4
                    oTest.Id(j) = "E"
                    'myvalues(i).Id(j) = "E"
                Case 5
                    oTest.Id(j) = "F"
                    'myvalues(i).Id(j) = "F"
                Case 6
                    oTest.Id(j) = "G"
                    'myvalues(i).Id(j) = "G"
            End Select
        Next j
        'Next i
    Next 'oTest
        'assign<<<<<<<<<<<<<<<<<<< NOT WORKING>>>>
        '<<Id() is not set to <empty string> it is "Nothing"  I GET ERROR (91) next line and after
        'What am I doing wrong?
        For i = 0 To 10
        Console.WriteLine(myvalues(i).Id(0), myvalues(i).Id(1), myvalues(i).Id(2), myvalues(i).Id(3), myvalues(i).Id(4), myvalues(i).Id(5), myvalues(i).Id(6))
    Next i
End Sub
End Module 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T18:50:39.767

主要问题是您没有在结构上调用初始化。您应该将循环更改为：

```
 Dim myvalues() As test1
    ReDim myvalues(10)

    For nI As Integer = myvalues.GetLowerBound(0) To myvalues.GetUpperBound(0)
        With myvalues(nI)
            .initialize()
            For j As Integer = .Id.GetLowerBound(0) To .Id.GetUpperBound(0)
                ' Set the values in a case statement so that alterations to the size of the index won't break your code.
                Select Case j
                    Case 0
                        .Id(j) = "A"
                    Case 1
                        .Id(j) = "B"
                    Case 2
                        .Id(j) = "C"
                    Case 3
                        .Id(j) = "D"
                    Case 4
                        .Id(j) = "E"
                    Case 5
                        .Id(j) = "F"
                    Case 6
                        .Id(j) = "G"
                End Select
            Next
        End With
    Next

    For nI As Integer = myvalues.GetLowerBound(0) To myvalues.GetUpperBound(0)
        With myvalues(nI)
            Console.WriteLine(String.Format("{0}, {1}, {2}, {3}, {4}, {5}, {6}", .Id(0), .Id(1), .Id(2), .Id(3), .Id(4), .Id(5), .Id(6)))
        End With
    Next 
```

请注意，结构数组的边界用于在大小发生变化时控制循环。这意味着您只需在一个位置（结构）更改数组的大小。

另请注意，这些值是在 case 语句中分配的。如果数组维度发生变化，这可以防止运行时错误。如果您没有设置正确的值，您可能会出现逻辑错误，但是这些可以通过良好的单元测试来捕获。

**附加信息**

我最初的答案包含一个`For Each`迭代的声明`myvalues`。然而，显然，这不是针对结构数组的有效操作：您在`For Each`变量中获得的元素实际上并未在数组中更新。这似乎是一个不同的参考。

我从来没有在 VB.Net 中使用过结构，除非我使用它们来调用外部 DLL，所以这种行为让我感到惊讶。除非您绝对必须使用结构，否则我强烈建议您将实现更改为`Class`.

这是使用类的实现：

```
Public Class test1
    Public Id() As String

    ' Note that we can perform the initialization in the constructor instead of having to call a separate method
    Public Sub New()
        ReDim Id(6)
    End Sub
End Class

    Dim myvalues(10) As test1

    For nI As Integer = myvalues.GetLowerBound(0) To myvalues.GetUpperBound(0)
        ' Create a new instance of the class and assign it to the array element
        myvalues(nI) = New test1
        With myvalues(nI)
            For j As Integer = .Id.GetLowerBound(0) To .Id.GetUpperBound(0)
                ' Set the values in a case statement so that alterations to the size of the index won't break your code.
                Select Case j
                    Case 0
                        .Id(j) = "A"
                    Case 1
                        .Id(j) = "B"
                    Case 2
                        .Id(j) = "C"
                    Case 3
                        .Id(j) = "D"
                    Case 4
                        .Id(j) = "E"
                    Case 5
                        .Id(j) = "F"
                    Case 6
                        .Id(j) = "G"
                End Select
            Next
        End With
    Next

    ' Now we can use a for each
    For Each oTest As test1 In myvalues
        With oTest
            Console.WriteLine(String.Format("{0}, {1}, {2}, {3}, {4}, {5}, {6}", .Id(0), .Id(1), .Id(2), .Id(3), .Id(4), .Id(5), .Id(6)))
        End With
    Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-30T15:29:00.970

我认为这就是您想要的，尽管从帖子中不是很清楚：

```
Option Infer On
Module Module1

    Structure test1
        Implements ICloneable

        Dim Id As String()
        Public Sub New(ByVal list As String())
            Id = New String(list.Length - 1) {}
            For im As Integer = 0 To Id.Length - 1
                Id(im) = list(im)
            Next im
        End Sub

        Public Sub New(ByVal other As test1)
            Me.New(other.Id)
        End Sub
        Public Function Clone() As Object Implements System.ICloneable.Clone
            Return New test1(Me)
        End Function
    End Structure

    Sub Main()
        Dim i As Integer, N As Integer = 10
        Dim myvalues = New test1(N) {}

        Dim ids = New String() {"A", "B", "C", "D", "E", "F", "G"}
        Dim prototype = New test1(ids)

        For index As Integer = 0 To N
            myvalues(index) = New test1(prototype)
        Next

        For i = 0 To N
            Console.WriteLine(myvalues(i).Id(0), myvalues(i).Id(1), myvalues(i).Id(2), myvalues(i).Id(3), myvalues(i).Id(4), myvalues(i).Id(5), myvalues(i).Id(6))
        Next i
    End Sub

End Module 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-28T06:51:45.547

有一个技巧可以做到这一点

```
Public Structure Test1
    Private m_ID() As String

    Public Property ID(Index As Integer) As String
        Get
            If m_ID Is Nothing Then initArray()
            Return m_ID(Index)
        End Get
        Set(value As String)
            If m_ID Is Nothing Then initArray()
            m_ID(Index) = value
        End Set
    End Property

    Private Sub initArray()
        ReDim m_ID(6)
    End Sub
End Structure

Dim MyValues() As Test1
ReDim MyValues(10)
For i As Short = 0 To 10
    MyValues(i).ID(1) = "V"
    MyValues(i).ID(2) = "H"
    ....
    MyValues(i).ID(6) = "J"
Next i 
```

# perl - Irssi 脚本：如何获取 /whois 信息并对其进行解析

> ID：11594862
> 
> 赞同：0
> 
> 时间：2012-07-21T18:33:18.273
> 
> 标签：perl, scripting, irssi

我正在为 irssi 客户端编写一个脚本。

我需要从 /whois 获取一些信息（例如频道名称）。

像这样的东西：

```
$whois_text = $server->command("/whois nick"); 
```

它当然不起作用；）谢谢。

# mysql - Zend_Db 查询连接两个表

> ID：11594863
> 
> 赞同：1
> 
> 时间：2012-07-21T18:33:23.280
> 
> 标签：mysql, zend-framework, select, many-to-many

我有 3 张桌子：

用户[id，名称，用户名，密码，角色]

事件[id，日期，位置，名称]

参与者[id, userId, eventId]

我想选择给定用户参与的所有事件。为此，我创建了一个 sql 查询，我对其进行了测试并返回了所需的结果。

```
SELECT * FROM event
INNER JOIN participant ON participant.eventId = event.id
WHERE participant.userId = $id 
```

在此之后，我尝试将它变成一个 zend 请求，根据该站点的其他帖子应该可以工作。

```
public function getEvents($id) 
{
    $db = Zend_Db_Table::getDefaultAdapter();
    $select = $db->select();

    $select->from('event')
           ->joinInner('participant','participant.eventId = event.id')
           ->where('participant.userId = ?', $id);

    $res = $db->query($select)->fetchAll();
    return $res;
} 
```

我使用“PDO_MYSQL”作为适配器，插入表、选择整个表或只选择特定行没有任何问题。但是上面的代码似乎做了一个我想要的简单的 fatchall() 。无论我尝试对其进行更改，它总是返回事件表内容。

我的问题是：有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T19:59:25.440

您可以尝试以下方法：

```
// this is the action in your controller
public function testAction()
{
    // call getEvents, assign the result to the view
    $this->view->results = $this->_getEvents(1);

}

protected function _getEvents($id)
{
    $db     = Zend_Db_Table::getDefaultAdapter();
    $select = $db->select()
                 ->from('event')
                 ->joinInner('participant','participant.eventId = event.id')
                 ->where('participant.userId = ?', $id);

    //echo $select; // you can echo the select object to see the resulting query

    $results = $select->query(); // actually execute the query

    return $results->fetchAll(); // return all results as an array to caller
} 
```

然后，这里有一些示例代码可以放入视图脚本中：

```
<?php if (sizeof($this->results) == 0): ?>
<strong>No results found!</strong>
<?php else: ?>

Found <?php echo sizeof($this->results) ?> results.<br /><br />

<?php foreach($this->results as $result): ?>
    On <?php echo $result['date'] ?> the user participated in <em><?php echo $result['name'] ?></em> @ <?php echo $result['location'] ?><br />
<?php endforeach; ?>

<?php endif; ?> 
```

最终，当您对 ZF 更加熟悉时，您会想要创建模型和数据映射器类来获取数据。您的`getEvents`函数将驻留在数据映射器类中。

然后在 MVC 分离之后，您的控制器将向负责与数据库通信并处理结果的数据映射器请求数据。控制器获取从映射器返回的数据，然后将其分配给视图。您永远不想从视图中获取数据，只显示控制器提供给它的数据。

我发现[Zend Framework 快速入门](http://framework.zend.com/manual/en/learning.quickstart.intro.html)在第一次开始使用 ZF 时非常有用。只需阅读一遍，如果您觉得有必要，请再次阅读并实际创建示例应用程序，以便您可以感受一下。这就是我开始使用 ZF 的方式，它为我提供了一个比以前更好的控制器和数据映射器起点。

完成该指南后，阅读参考指南会容易得多，也更有意义。

# android - Activity 在 onCreate() 上崩溃

> ID：11594871
> 
> 赞同：0
> 
> 时间：2012-07-21T18:34:27.857
> 
> 标签：android, sqlite, android-activity, oncreate, android-sqlite

我使用 SQLite 构建了一个数据库，当我尝试运行填充数据库的主活动文件时，它在 onCreate 上崩溃。我无法加载活动。我的 onCreate 方法使用 getWriteableDatabase 打开一个数据库，然后我只需将值 className、锻炼名称和 id 添加到我创建的执行这些值的表中。出于某种原因，我的活动甚至不会加载。有任何想法吗？

下面是我的代码：

```
import android.app.Activity;
import android.content.ContentValues;
import android.content.Intent;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class poetry3 extends Activity {

Button next;
ClassName addName;
Preference prefs;
DBHelper1 dbHelper;
SQLiteDatabase db;

@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.poetry3);
    dbHelper = new DBHelper1(this);
    String className = "edu.njit.hss.poetry3";
    String workoutName = "Poetry 3";
    Calendar currentDate =  Calendar.getInstance();
    String date = currentDate.getTime().toString();

    int classID = 1;

    db = dbHelper.getWritableDatabase();
    ContentValues values = new ContentValues();

    //if(values.size() >  25)

    values.clear();
    values.put(DBHelper1.C_ID, classID);
    values.put(DBHelper1.C_CLASSNAME, className);
    values.put(DBHelper1.C_WORKOUT_NAME, workoutName);
    values.put(DBHelper1.C_CREATED_AT, date);
    db.insertOrThrow(DBHelper1.TABLE, null, values);

    next = (Button)findViewById(R.id.Continue);
    next.setOnClickListener(phaseHandler);

}

View.OnClickListener phaseHandler = new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        if(next.getId() == ((Button)v).getId()){
            Intent i = new Intent(poetry3.this, poetry5.class);
            startActivity(i);
        }

    }
};

    } 
```

**这是 logcat 输出：**

```
07-21 18:57:26.628: ERROR/AndroidRuntime(695): FATAL EXCEPTION: main
07-21 18:57:26.628: ERROR/AndroidRuntime(695): java.lang.RuntimeException: Unable to start activity ComponentInfo{edu.njit.hss/edu.njit.hss.poetry3}: android.database.sqlite.SQLiteException: near "at": syntax error: , while compiling: INSERT INTO history(workout_name, created at, _ID, classname) VALUES(?, ?, ?, ?);
07-21 18:57:26.628: ERROR/AndroidRuntime(695):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1622)
07-21 18:57:26.628: ERROR/AndroidRuntime(695):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1638)
07-21 18:57:26.628: ERROR/AndroidRuntime(695):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
07-21 18:57:26.628: ERROR/AndroidRuntime(695):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:928)
07-21 18:57:26.628: ERROR/AndroidRuntime(695):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-21 18:57:26.628: ERROR/AndroidRuntime(695):     at android.os.Looper.loop(Looper.java:123)
07-21 18:57:26.628: ERROR/AndroidRuntime(695):     at android.app.ActivityThread.main(ActivityThread.java:3647)
07-21 18:57:26.628: ERROR/AndroidRuntime(695):     at java.lang.reflect.Method.invokeNative(Native Method)
07-21 18:57:26.628: ERROR/AndroidRuntime(695):     at java.lang.reflect.Method.invoke(Method.java:507)
07-21 18:57:26.628: ERROR/AndroidRuntime(695):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-21 18:57:26.628: ERROR/AndroidRuntime(695):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-21 18:57:26.628: ERROR/AndroidRuntime(695):     at dalvik.system.NativeStart.main(Native Method)
07-21 18:57:26.628: ERROR/AndroidRuntime(695): Caused by: android.database.sqlite.SQLiteException: near "at": syntax error: , while compiling: INSERT INTO history(workout_name, created at, _ID, classname) VALUES(?, ?, ?, ?);
07-21 18:57:26.628: ERROR/AndroidRuntime(695):     at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
07-21 18:57:26.628: ERROR/AndroidRuntime(695):     at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92)
07-21 18:57:26.628: ERROR/AndroidRuntime(695):     at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:65)
07-21 18:57:26.628: ERROR/AndroidRuntime(695):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:83)
07-21 18:57:26.628: ERROR/AndroidRuntime(695):     at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:41)
07-21 18:57:26.628: ERROR/AndroidRuntime(695):     at android.database.sqlite.SQLiteDatabase.compileStatement(SQLiteDatabase.java:1149)
07-21 18:57:26.628: ERROR/AndroidRuntime(695):     at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1549)
07-21 18:57:26.628: ERROR/AndroidRuntime(695):     at android.database.sqlite.SQLiteDatabase.insertOrThrow(SQLiteDatabase.java:1444)
07-21 18:57:26.628: ERROR/AndroidRuntime(695):     at edu.njit.hss.poetry3.onCreate(poetry3.java:49)
07-21 18:57:26.628: ERROR/AndroidRuntime(695):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-21 18:57:26.628: ERROR/AndroidRuntime(695):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1586)
07-21 18:57:26.628: ERROR/AndroidRuntime(695):     ... 11 more
07-21 18:57:26.658: WARN/ActivityManager(39):   Force finishing activity edu.njit.hss/.poetry3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T18:49:46.830

这是错误：

```
07-21 18:39:32.788: ERROR/Database(507): Failure 1 (near ".": syntax error) on 0x1e0058 when preparing 'create table history(BaseColumns._ID int primary key, classname text workout_nametext)'. 
```

您需要一个空格和一个逗号：“类名文本，锻炼名称文本”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T18:51:43.320

错误出现在数据库的创建表语句中（在 DBHelper1.onCreate() 中）：

```
create table history(BaseColumns._ID int primary key, classname text workout_nametext) 
```

如果您尝试在 ContentProvider 中引用 id（如 ContactsContract、CalendarContract 等），请理解这`BaseColumns._ID`在 SQL 中意味着非常不同的东西；您还缺少逗号和空格。我假设你的意思是：

```
create table history(_id integer primary key, classname text, workout_name text) 
```

如果您在创建 SQLite 数据库的位置发布字符串，我可以更具体地了解语法...

```
String table_create = "create table " + table_name + " (" + BaseColumns._ID + ... 
```

**新的 LogCat**

要经常阅读 LogCat，您需要找到最低的“Caused by”，在这种情况下：

```
Caused by: android.database.sqlite.SQLiteException: near "at": syntax error: , while compiling: INSERT INTO history(workout_name, created at, _ID, classname) VALUES(?, ?, ?, ?); 
```

这发生在poetry3.onCreate() 中，特别是在第49 行。

在这里您可以看到“created at”导致错误，SQLite 将变量定义为一个单词名称，也许您的意思是`created_at`？但是您的 create 语句只有三列，所以我将其删除：

```
INSERT INTO history(_ID, classname, workout_name) VALUES(?, ?, ?, ?); 
```

# html - 使用 FireFox 的 CSS 计算额外 +4px

> ID：11594877
> 
> 赞同：0
> 
> 时间：2012-07-21T18:36:08.033
> 
> 标签：html, css, firefox

我的显示器中有很多 1px - 4px 的错误，我一直在通过手动重置 CSS 来修复（即，将默认值设置为 0 以在浏览器之间进行规范化）。

我的猜测是我在某些地方有一个未标准化的参数，或者我可能不完全理解盒子模型。

**计算**

名称框的大小（#hold_name）- 10px（顶部和底部填充）+ 10px（字体大小）= 20px。

图像大小（#hold_picture） - 20px（定义为高度参数）

菜单栏(#Aa) - 40px（定义为高度参数）

这些是我想要的尺寸，但盒子挂得太低了......

这个额外的长度是从哪里来的？

我在小提琴中手动规范化 p、div 和 body 标签，我认为这会给我一个 0 的基数来进行计算。

我在火狐工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T18:47:37.083

我在您的小提琴中更改了填充值，并将框与图像对齐。

```
#hold_name {
    background: none repeat scroll 0 0 rgba(255, 255, 255, 0.2);
    color: #FFFFFF;
    display: inline;
    float: right;
    font-size: 10px;
    **padding: 2px;**
    position: relative;
    top: 20px;
} 
```

我假设你想要盒子和图像向上移动 4 像素？你为什么使用一个

标记这个？我通常使用 div 并将它们与 CSS 对齐，或者将 div 与表格一起使用并与 CSS 对齐。

# c# - 为什么昂贵的服务器比最便宜的上网本具有更差的日期时间精度？

> ID：11594883
> 
> 赞同：-1
> 
> 时间：2012-07-21T18:36:55.097
> 
> 标签：c#, datetime

这个问题主要是针对教育的。我只是**对**为什么感兴趣。我正在使用[此处](http://blogs.msdn.com/b/ericlippert/archive/2010/04/08/precision-and-accuracy-of-datetime.aspx)的程序，但对其进行了一些修改：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            long ticks = DateTime.Now.Ticks;
            while(true)
            {
                if (ticks != DateTime.Now.Ticks)
                {
                    long newTicks = DateTime.Now.Ticks;
                    Console.WriteLine(newTicks - ticks);
                    ticks = newTicks;
                }
                else
                {
                    Console.WriteLine("same");
                }
            }
        }
    }
} 
```

结果：

600 美元联想 Edge 11、英特尔奔腾 U5400、Windows 7 家庭基础版

```
same
same
same
same
same
same
same
10000
same
same 
```

10000 美元 HP DL360p Gen8 2 * Xeon E5-2640，Windows Server 2008 R2

```
same
same
same
same
same
same
same
156001
same
same
same
same
same
same
same
same
same
same
same
same 
```

所以廉价笔记本上的 DateTime 精度为 10 ms，昂贵的服务器硬件精度为 156 ms。

为什么？我猜可能 Windows 7 比 Windows Server 2008 R2 更“精确”，但这只是我的猜测。在两台计算机上都安装了最新的 .NET 框架，所有更新和所有 Windows 更新都已安装。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T18:41:58.083

首先，你算错了：

> 最小的时间单位是滴答声，等于 100 纳秒。

所以 10000 个刻度只是 1ms，156001 个刻度是 15.6ms。

* * *

这种差异不在于硬件。默认情况下，windows 大约每 16 毫秒运行一个特定的内部计时器。这个计时器负责windows中许多与计时相关的功能，包括计时器`Environment.TickCount`、.`Thread.Sleep``DateTime.UtcNow`

[`timeBeginPeriod`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd757624%28v=vs.85%29.aspx)任何应用程序都可以使用API将其减少到选定的毫秒数（即最少 1 毫秒） 。似乎在您的笔记本上运行的应用程序要求更高的精度，但在您的服务器上运行的应用程序没有。

默认情况下它是不活动的，因为它有一些负面影响。例如，计算机空闲时功耗较高，因为它只能休眠 1ms 间隔而不是 16ms 间隔。

> 此功能会影响全局 Windows 设置。Windows 使用任何进程请求的最低值（即最高分辨率）。设置更高的分辨率可以提高等待函数中超时间隔的准确性。但是，它也会降低整体系统性能，因为线程调度程序更频繁地切换任务。高分辨率还可以防止 CPU 电源管理系统进入省电模式。设置更高的分辨率不会提高高分辨率性能计数器的准确性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T18:45:58.910

[如http://support.microsoft.com/kb/259025](http://support.microsoft.com/kb/259025)中所述，您会看到线程时间片的差异

# python - 为用户创建独特的个人资料页面

> ID：11594884
> 
> 赞同：0
> 
> 时间：2012-07-21T18:37:20.890
> 
> 标签：python, google-app-engine

我创建了一个相当强大的应用程序。我实施了个人资料页面系统。现在，在编程和应用程序引擎方面，我是一个相当大的“菜鸟”，所以在这里要温柔，（请）。所以我知道您可以将参数传递给 url 示例 /profile/。我只是不完全确定如何在我的代码或背后的思考过程中实现它。

这将是我的数据库：

```
class User(db.Model):
    name = db.StringProperty(required = True)
    pw_hash = db.StringProperty(required = True)
    email = db.StringProperty(required = True) 
```

这是我的个人资料处理程序：

```
class Profile(MainHandler):
    def get(self):
        if self.user:
            current_user = str(self.user.name)
            key='ag5kZXZ-c3VpdGVnYW1lcnINCxIHSW1hZ2VkYhglDA '
            imgs  = db.GqlQuery("select * from Imagedb WHERE name =:1", current_user)
            for img in imgs:
                key = img.key() # this is the key
            self.render('profile.html', profile_image = key ,username = self.user.name, email = self.user.email, first_name = self.user.first_name, last_name = self.user.last_name, country = self.user.country, prov_state = self.user.prov_state, city_town = self.user.city_town)
        else:
            self.redirect('/register') 
```

该配置文件目前还实施了一个显示图片系统。我在这里的目标是基本上建立你所谓的社交网络。AKA，每个配置文件上的博客，以及一个消息系统，以及其他一些系统。

我感谢任何和所有的帮助。即使它们只是您的想法/意见。我的网站可以加载到域中，因此可以向您展示，但我真的很想保密，直到完成：P。

非常感谢。

编辑：

这是我看到发布的解决方案，但是我不确定如何实施它。

```
class User(ndb.Model):
  unique_identifier = ndb.StringProperty()
  ...

class ProfilePage(webapp2.RequestHandler):
  def get(self, profile_id):
    #profile_id = key name of user
    user = User.get_by_id(profile_id)
    #profile_id = some unique field
    #user = User.query(User.unique_identifier == profile_id).get()
    if user:
       #Get all posts for that user and render....

app = webapp2.WSGIApplication([('/', MainPage),
                               ('/profile/<profile_id>', ProfilePage),]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T19:09:04.137

您希望将 profile_id 作为 URL 的一部分，并且希望将该 ID 传递给您的请求处理程序。对应用程序定义的这种更改定义了“路由”和 RequestHandler 对象之间的映射：

```
app = webapp2.WSGIApplication([('/', MainPage),
                               ('/profile/<profile_id>', ProfilePage),]) 
```

通常，这些映射是一个 URL 或 URL 正则表达式，带有一些语法/约定来识别变量。

在这种情况下`'/profile/<profile_id>'`，a`route template`使用名称`profile_id`来匹配在第二个路径段中传递的任何内容。

任何匹配项都作为位置参数传递给您的 RequestHandler 函数。这是由框架处理的，您只需为`<name[:regex]>`路由中的每个块添加参数。

发布的解决方案建议将 unique_identifier 字段添加到 User 模型的原因是存储规范的 user_id / profile_id。假设您只使用一个整数来表示唯一的用户身份。

您的路由模板可以更改为仅匹配整数，例如`'/profile/<user_id:\d+>/'`，用户的 url 将类似于`/profile/1024/`.

# sql - 使用 SQL 在访问中查找上一个和下一个值

> ID：11594885
> 
> 赞同：2
> 
> 时间：2012-07-21T18:37:25.460
> 
> 标签：sql, ms-access

我正在使用 Microsoft Access 2010 数据库从一个表中导入值并将它们附加到汇总表中。

我遇到的问题之一是从 select 语句中找到上一个和下一个值。

这看起来如下。

```
JOINT          JOINT AHEAD             JOINT BEHIND
100103           200203
200203           300303                  100103
300303                                   200203 
```

我想使用 SQL 代码创建它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T18:50:42.290

怎么样：

```
SELECT a.JOINT, 
      (SELECT TOP 1 Joint 
       FROM Joint b 
       WHERE b.JOINT>a.JOINT 
       ORDER BY Joint) AS Ahead,
      (SELECT TOP 1 Joint 
       FROM Joint b 
       WHERE b.JOINT<a.JOINT 
       ORDER BY Joint DESC) AS Behind
FROM Joint AS a; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T01:11:11.760

在考虑相关子查询时要小心。它们可能非常慢。如果您构建一个包含*两个*相关子查询的查询，您将放大问题。

如果您的源表包含少量行（例如几十行），那么速度可能不是问题。但是，如果该表包含一千行，您肯定会注意到它。如果你的`JOINT`字段没有被索引，性能可能会非常缓慢。

如果您将从 Access 会话中运行查询，则可以使用域函数 (`DMin`和`DMax`) 而不是相关子查询。域函数经常被批评为慢。但是，在这种情况下，它们可能比相关子查询快得多。

**更正**：您无需在 Access 会话中运行查询，即可使用`DMin()`and`DMax()`函数。我附上了一个 VBScript 示例，它基于我的`qryDomainFunctions`. 它可以正常工作并正确报告`RecordCount: 1000`

我创建了一个表，`joints`以长整数字段`joint`作为主键并添加了 1000 行。然后我创建了这两个查询：

**qryCorrelatedSubqueries**：

```
SELECT
    a.joint,
    (SELECT TOP 1 joint 
    FROM joints b 
    WHERE b.joint>a.joint 
    ORDER BY joint) AS Ahead,
    (SELECT TOP 1 joint 
    FROM joints b 
    WHERE b.joint<a.joint 
    ORDER BY joint DESC) AS Behind
FROM joints AS a; 
```

**qryDomainFunctions**：

```
SELECT
    j.joint,
    DMin("joint","joints","joint > " & [joint]) AS joint_ahead,
    DMax("joint","joints","joint < " & [joint]) AS joint_behind
FROM joints AS j; 
```

这是即时窗口的记录，我使用`QueryDuration`下面的函数比较了这两个查询的速度。该函数以毫秒为单位返回持续时间。

```
? QueryDuration("qryDomainFunctions")
 0 

? QueryDuration("qryCorrelatedSubqueries")
 889 
```

请注意，这两个查询都受益于`joints`字段上的索引。当我删除索引、压缩数据库并重新运行测试时，我得到了以下结果：

```
? QueryDuration("qryDomainFunctions")
 16 

? QueryDuration("qryCorrelatedSubqueries")
 4570 
```

这是带有我使用的代码的模块。`QueryDuration`绝不是绩效衡量的硬道理。但是，它足以让我们大致了解这两个查询的相对速度。

```
Option Compare Database
Option Explicit

Private Declare Function apiGetTickCount Lib "kernel32" _
 Alias "GetTickCount" () As Long

Public Function QueryDuration(ByVal pQueryName As String) As Long
    Dim db As DAO.Database
    Dim lngStart As Long
    Dim lngDone As Long
    Dim rs As DAO.Recordset

    Set db = CurrentDb()
    lngStart = apiGetTickCount() ' milliseconds '
    Set rs = db.OpenRecordset(pQueryName, dbOpenSnapshot)
    If Not rs.EOF Then
        rs.MoveLast
    End If
    lngDone = apiGetTickCount()
    rs.Close
    Set rs = Nothing
    Set db = Nothing
    QueryDuration = lngDone - lngStart
End Function 
```

**DomainFunctionsQuery.vbs**：

```
Option Explicit
Dim cn, rs
Set cn = CreateObject("ADODB.Connection")
cn.Open "Provider=Microsoft.Jet.OLEDB.4.0;" & _
    "Data Source='database1.mdb'"
Set rs = CreateObject("ADODB.Recordset")
rs.CursorLocation = 3 ' adUseClient '
rs.Open "qryDomainFunctions", cn, 3 ' adOpenStatic = 3 '
WScript.Echo "RecordCount: " & rs.RecordCount
rs.Close
Set rs = Nothing
cn.Close
Set cn = Nothing 
```

# objective-c - NSOperation & Singleton：正确的并发设计

> ID：11594888
> 
> 赞同：3
> 
> 时间：2012-07-21T18:38:05.687
> 
> 标签：objective-c, ios, multithreading, nsoperation, nsoperationqueue

我需要你们对我的应用程序设计的建议，基本上我想知道它是否会按我的预期工作？由于多线程是非常棘手的事情，我想听听你的意见。

**基本上我的任务很简单**- 我已经`SomeBigSingletonClass`- 大单例类，它有两个方法`someMethodOne`，`someMethodTwo` 这些方法应该定期调用（基于计时器）并在单独的线程中调用。但是此时每个线程应该只有一个实例，例如`someMethodOne`，任何时候都应该只有一个运行，对于`someMethodTwo`.

**我试过的**

**GCD** - 使用 GCD 实现但它缺乏非常重要的功能，它不提供检查当前是否有任何正在运行的任务的方法，即我无法检查是否只有一个正在运行的 let say`someMethodOne`方法实例。

**NSThread** - 它确实提供了很好的功能，但我很确定 NSOperation 和 GCD 等新的高级技术将使维护我的代码变得更加简单。所以我决定放弃 NSThread。

**`NSOperation`** 我计划如何实现两个线程调用的**解决方案**

```
@implementation SomeBigSingletonClass

- (id)init
{
    ...
    // queue is an iVar
    queue = [[NSOperationQueue alloc] init];

    // As I'll have maximum two running threads 
    [queue setMaxConcurrentOperationCount:2];
    ...
}

+ (SomeBigSingletonClass *)sharedInstance
{
    static SomeBigSingletonClass *sharedInstance = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        sharedInstance = [[SomeBigSingletonClass alloc] init];
    });
    return sharedInstance;
}

- (void)someMethodOne
{
    SomeMethodOneOperation *one = [[SomeMethodOneOperation alloc] init];
    [queue addOperation:one];
}

- (void)someMethodTwo
{
    SomeMethodTwoOperation *two = [[SomeMethodOneOperation alloc] init];
    [queue addOperation:two];
}
@end 
```

最后我的 NSOperation 继承类看起来像这样

```
@implementation SomeMethodOneOperation

- (id)init
{
    if (![super init]) return nil;
    return self;
}

- (void)main {
    // Check if the operation is not running
    if (![self isExecuting]) {
        [[SomeBigSingletonClass sharedInstance] doMethodOneStuff];
    }
}

@end 
```

`SomeMethodTwoOperation`操作类也是如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T18:45:50.247

如果您正在使用`NSOperation`，您可以实现您想要创建自己的内容`NSOperationQueue`并将其设置`numberOfConcurrentOperations`为 1。

您也可以将`@synchronized`您的类的范围用作锁定对象。

编辑：澄清---

我的提议：

队列 A（1 个并发操作——用于一次执行`SomeMethodOneOperation` `SomeMethodTwoOperation`一次）

队列 B（n 个并发操作——用于执行一般后台操作）

编辑 2：更新的代码说明了运行最大操作一和操作二的方法，操作一和操作二在任何给定时间执行最大操作一和操作二。

```
-(void)enqueueMethodOne
{
    static NSOperationQueue * methodOneQueue = nil ;
    static dispatch_once_t onceToken ;    
    dispatch_once(&onceToken, ^{
        queue = [ [ NSOperationQueue alloc ] init ] ;
        queue = 1 ;
    });

    [ queue addOperation:[ NSBlockOperation blockOperationWithBlock:^{
        ... do method one ...
    } ] ];
}

-(void)enqueueMethodTwo
{
    static NSOperationQueue * queue = nil ;
    static dispatch_once_t onceToken ;    
    dispatch_once(&onceToken, ^{
        queue = [ [ NSOperationQueue alloc ] init ] ;
        queue = 1 ;
    });

    [ queue addOperation:[ NSBlockOperation blockOperationWithBlock:^{
        ... do method two ...
    } ] ];
} 
```

编辑 3：

根据我们的讨论：

我指出 isExecuting 是一个成员变量，仅指正在查询的操作的状态，而不是该类的任何实例正在执行的情况

因此，例如，Deimus 的解决方案无法保持多个操作实例同时运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T20:39:35.107

对不起，我迟到了。如果您的方法基于计时器被回调，并且您希望它们彼此同时执行，但相对于它们自己同步执行，我是否建议使用 GCD 计时器。

基本上，您有两个计时器，一个执行 methodOne，另一个执行 methodTwo。由于您将块传递给 GCD 计时器，因此您甚至不必使用方法，特别是如果您想确保其他代码在不应该运行时不会调用这些方法。

如果您将计时器安排到并发队列中，则两个计时器可能同时在不同的线程上运行。然而，定时器本身只会在它被调度时运行。这是我刚刚编写的一个示例...您可以轻松地将其与单例一起使用...

首先，一个辅助函数来创建一个定时器，它接受一个在定时器触发时将被调用的块。块传递对象，因此块可以引用它而无需创建保留循环。如果我们使用 self 作为参数名称，块中的代码可以看起来像其他代码......

```
static dispatch_source_t setupTimer(Foo *fooIn, NSTimeInterval timeout, void (^block)(Foo * self)) {
    // Create a timer that uses the default concurrent queue.
    // Thus, we can create multiple timers that can run concurrently.
    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
    dispatch_source_t timer = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER, 0, 0, queue);
    uint64_t timeoutNanoSeconds = timeout * NSEC_PER_SEC;
    dispatch_source_set_timer(timer,
                              dispatch_time(DISPATCH_TIME_NOW, timeoutNanoSeconds),
                              timeoutNanoSeconds,
                              0);
    // Prevent reference cycle
    __weak Foo *weakFoo = fooIn;
    dispatch_source_set_event_handler(timer, ^{
        // It is possible that the timer is running in another thread while Foo is being
        // destroyed, so make sure it is still there.
        Foo *strongFoo = weakFoo;
        if (strongFoo) block(strongFoo);
    });
    return timer;
} 
```

现在，基本的类实现。如果您不想公开 methodOne 和 methodTwo，甚至没有理由创建它们，特别是如果它们很简单，因为您可以直接将该代码放在块中。

```
@implementation Foo {
    dispatch_source_t timer1_;
    dispatch_source_t timer2_;
}

- (void)methodOne {
    NSLog(@"methodOne");
}

- (void)methodTwo {
    NSLog(@"methodTwo");
}

- (id)initWithTimeout1:(NSTimeInterval)timeout1 timeout2:(NSTimeInterval)timeout2 {
    if (self = [super init]) {
        timer1_ = setupTimer(self, timeout1, ^(Foo *self) {
            // Do "methodOne" work in this block... or call it.
            [self methodOne];
        });
        timer2_ = setupTimer(self, timeout2, ^(Foo *self) {
            // Do "methodOne" work in this block... or call it.
            [self methodTwo];
        });
        dispatch_resume(timer1_);
        dispatch_resume(timer2_);
    }
    return self;
}

- (void)dealloc {
    dispatch_source_cancel(timer2_);
    dispatch_release(timer2_);
    dispatch_source_cancel(timer1_);
    dispatch_release(timer1_);
}
@end 
```

**编辑** 回应评论（希望能更详细地解释为什么该块不会同时执行，以及为什么错过的计时器合并为一个）。

您无需检查它是否多次运行。直接从文档中...

> 调度源不可重入。在调度源挂起或事件处理程序块当前正在执行时接收到的任何事件都会在调度源恢复或事件处理程序块返回后合并和传递。

这意味着当 GCD dispatch_source 计时器块被调度时，它不会再次被调度，直到已经运行的计时器块完成。您什么都不做，库本身将确保该块不会同时执行多次。

如果该块花费的时间比计时器间隔长，那么“下一个”计时器调用将等到正在运行的那个完成。此外，所有本应交付的事件都合并为一个事件。

你可以打电话

```
unsigned numEventsFired = dispatch_source_get_data(timer); 
```

从您的处理程序中获取自上次执行处理程序以来已触发的事件数（例如，如果您的处理程序运行了 4 次计时器触发，这将是 4 - 但您仍然会在这一事件中获得所有这些触发-- 你不会收到他们的单独事件）。

例如，假设您的间隔计时器为 1 秒，而您的计时器恰好需要 5 秒才能运行。在当前块完成之前，该计时器不会再次触发。此外，所有这些计时器将合并为一个，因此您将在您的块中收到一个调用，而不是 5 个。

现在，说了这么多，我应该提醒你我认为可能是一个错误。现在，我很少在库代码的脚下放置错误，但是这个是可重复的，并且似乎与文档背道而驰。所以，如果它不是一个错误，它就是一个未记录的特性。但是，很容易四处走动。

使用计时器时，我注意到合并的计时器肯定会被合并。这意味着，如果您的计时器处理程序正在运行，并且在它运行时触发了 5 个计时器，则该块将立即被调用，代表那些错过的 5 个事件。但是，一旦完成，该块将再次执行一次，无论之前错过了多少计时器事件。

但是，很容易识别这些，因为 dispatch_source_get_data(timer) 将返回 0，这意味着自上次调用块以来没有触发任何计时器事件。

因此，我已经习惯于将此代码添加为我的计时器处理程序的第一行......

```
if (dispatch_source_get_data(timer) == 0) return; 
```

# java - Android - 我正在使用意图在两个活动之间进行通信

> ID：11594893
> 
> 赞同：-1
> 
> 时间：2012-07-21T18:38:26.320
> 
> 标签：java, android

Android - 我正在使用意图在两个活动之间进行通信。我在调用活动中使用了 putExtra()，并且在被调用活动中使用了 getExtras。但问题是我无法使用我在意图中检索到的数字设置编辑文本。下面是我的程序`

// 调用活动

```
package com.example.androidtutorial2;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.text.InputType;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        //EDIT TEXT
        final EditText sharedata = (EditText) findViewById ( R.id.editText1 ) ;
        sharedata.setInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_FLAG_DECIMAL | InputType.TYPE_NUMBER_FLAG_SIGNED);

        //BUTTON
        Button sendbutton = (Button) findViewById (R.id.button2) ;
        sendbutton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                int edittext_data =                     Integer.valueOf(sharedata.getText().toString());

                Intent sendintent = new Intent(MainActivity.this,second_activity.class);
                sendintent.putExtra("somedata", edittext_data);
                startActivity(sendintent);

            }
        });

//        Button button_to_call_activity = (Button) findViewById(R.id.button1);
//        button_to_call_activity.setOnClickListener(new OnClickListener() {
//          
//          @Override
//          public void onClick(View v) {
//          
//              
//          }
//      });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

}

//CALLED ACTIVITY

package com.example.androidtutorial2;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.text.InputType;
import android.widget.EditText;

public class second_activity extends Activity {

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_second);

        EditText displaymessage = (EditText) findViewById ( R.id.editText1 );

        Intent intent1 = getIntent();
        Bundle bundle1 = intent1.getExtras();
        int integer1 = bundle1.getInt("somedata");

        Integer string1 = integer1;

        displaymessage.setText(integer1);               // HERE IS A RUNTIME ERROR

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T18:39:23.160

采用

```
displaymessage.setText("" +integer1); 
```

或者

```
displaymessage.setText(String.valueOf(integer1)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T21:49:24.213

**1.**首先，如果您使用的是 Java 1.5 及更高版本，请不要使用`Integer.valueOf()`，而是使用`Integer.parseInt()`.

**例如：**

`int edittext_data = Integer.parseInt(sharedata.getText().toString());`

**2\. 你的输出问题**就在这里。

**不要这样做**...`Integer string1 = integer1;`

**像这样使用它...**

`String string1 = getIntent().getExtras().getString("somedata");` `displaymessage.setText(string1);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T19:13:35.807

由于您似乎没有将变量作为整数进行任何操作，因此您也可以简单地将其保留为字符串。

```
sendintent.putExtra("somedata", sharedata.getText().toString());

String integer1 = bundle1.getString("somedata"); 
```

# java - 从此方法的参数中获取值并显示它

> ID：11594896
> 
> 赞同：-1
> 
> 时间：2012-07-21T18:38:51.857
> 
> 标签：java, android, xml, parameters, int

我想从轮子的所有 4 行中获取值，并将值显示到 textview 或 toast 中。我的 testwheelvalue(,) 方法假设从轮子表面获取值，并将该值返回给我的方法 testpin()。在 testpin() 将值存储到 v1-v4 之后，方法 updatestatus() 应该将值的总和显示到文本字段中。

公共类 PasswActivity 扩展 Activity {

```
 int testpins;
    int v1 = 0;
    int v2 = 0;
    int v3 = 0;
    int v4 = 0;
    TextView text;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.passw_layout);
        initWheelday(R.id.passw_1);
        initWheelhour(R.id.passw_2);
        initWheelmin(R.id.passw_3);
        initWheelsec(R.id.passw_4);

        updateStatus();
    }

    // Wheel scrolled flag
    private boolean wheelScrolled = false;

    // Wheel scrolled listener
    OnWheelScrollListener scrolledListener = new OnWheelScrollListener() {
        public void onScrollingStarted(WheelView wheel) {
            wheelScrolled = true;
        }

        public void onScrollingFinished(WheelView wheel) {
            wheelScrolled = false;
            updateStatus();
        }
    };

    // Wheel changed listener
    private OnWheelChangedListener changedListener = new OnWheelChangedListener() {
        public void onChanged(WheelView wheel, int oldValue, int newValue) {
            if (!wheelScrolled) {
                updateStatus();
            }
        }
    };

    /**
     * Updates entered PIN status
     */
    private void updateStatus() {
        text = (TextView) findViewById(R.id.pwd_status);
        testPin();

        text.setText(String.valueOf(testpins));
        // Toast.makeText(getBaseContext(), testpins,
        // Toast.LENGTH_SHORT).show();
    }

    /**
     * Initializes wheel
     * 
     * @param id
     *            the wheel widget Id
     */
    private void initWheelsec(int id) {
    WheelView wheel = getWheel(id);
    wheel.setViewAdapter(new NumericWheelAdapter(this, 0, 59, "%02d"));
    wheel.setCurrentItem((int) (Math.random() * 10));

    wheel.addChangingListener(changedListener);
    wheel.addScrollingListener(scrolledListener);
    wheel.setCyclic(false);
    wheel.setInterpolator(new AnticipateOvershootInterpolator());
}

private void initWheelmin(int id) {
    WheelView wheel = getWheel(id);
    wheel.setViewAdapter(new NumericWheelAdapter(this, 0, 59, "%02d"));
    wheel.setCurrentItem((int) (Math.random() * 10));

    wheel.addChangingListener(changedListener);
    wheel.addScrollingListener(scrolledListener);
    wheel.setCyclic(false);
    wheel.setInterpolator(new AnticipateOvershootInterpolator());
}

private void initWheelhour(int id) {
    WheelView wheel = getWheel(id);
    wheel.setViewAdapter(new NumericWheelAdapter(this, 0, 23, "%02d"));
    wheel.setCurrentItem((int) (Math.random() * 10));

    wheel.addChangingListener(changedListener);
    wheel.addScrollingListener(scrolledListener);
    wheel.setCyclic(false);
    wheel.setInterpolator(new AnticipateOvershootInterpolator());
}

private void initWheelday(int id) {
    WheelView wheel = getWheel(id);
    wheel.setViewAdapter(new NumericWheelAdapter(this, 0, 5, "%02d"));
    wheel.setCurrentItem((int) (Math.random() * 10));

    wheel.addChangingListener(changedListener);
    wheel.addScrollingListener(scrolledListener);
    wheel.setCyclic(false);
    wheel.setInterpolator(new AnticipateOvershootInterpolator());
}

    /**
     * Returns wheel by Id
     * 
     * @param id
     *            the wheel Id
     * @return the wheel with passed Id
     */
    private WheelView getWheel(int id) {
        return (WheelView) findViewById(id);
    }

    /**
     * Tests entered PIN
     * 
     * @param v1
     * @param v2
     * @param v3
     * @param v4
     * @return true
     */
    private void testPin() {

        v1 testWheelValue(R.id.passw_1, v1);
        v2 testWheelValue(R.id.passw_2, v2);
        v3 testWheelValue(R.id.passw_3, v3);
        v4 testWheelValue(R.id.passw_4, v4);
        testpins = v1 + v2 + v3 + v4;
    }

    /**
     * Tests wheel value
     * 
     * @param id
     *            the wheel Id
     * @param value
     *            the value to test
     * @return true if wheel value is equal to passed value
     */
    private int testWheelValue(int id, int value) {
        int wheel = getWheel(id).getCurrentItem();
        wheel = value;
        text.setText(String.valueOf(testpins));
        return wheel;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T18:44:39.513

您`testWheelValue`所做的只是比较 ID 的值和您的`v`参数之一，然后返回相等性。如果你想让你的`v`参数被某些东西覆盖，你需要告诉程序：

```
v1 = getWheelValue(R.id.passw_1); // You don't need to pass anything but the ID here
v2 = getWheelValue(R.id.passw_2);
v3 = getWheelValue(R.id.passw_3);
v4 = getWheelValue(R.id.passw_4);

testpins = v1 + v2 + v3 + v4;
updateStatus();

// This method should just use getCurrentItem from the WheelView
private int getWheelValue(int id) {
    return getWheel(id).getCurrentItem();
} 
```

这样，`v`参数的新值就会传回主代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T03:46:07.033

```
private void testPin() {

    v1 testWheelValue(R.id.passw_1, v1);
    v2 testWheelValue(R.id.passw_2, v2);
    v3 testWheelValue(R.id.passw_3, v3);
    v4 testWheelValue(R.id.passw_4, v4); 
```

`=`您在上面的四行中都缺少一个，但我认为这只是一个剪切和粘贴错误。

```
 testpins = v1 + v2 + v3 + v4; 
```

我会做`return v1 + v2 + v3 + v4;`并摆脱`testpins`班级成员。

```
}

/**
 * Tests wheel value
 * 
 * @param id
 *            the wheel Id
 * @param value
 *            the value to test
 * @return true if wheel value is equal to passed value
 */
private int testWheelValue(int id, int value) {
    int wheel = getWheel(id).getCurrentItem();
    wheel = value; 
```

删除该行，因为您正在覆盖正在读取的值。此外，`int value`不需要作为参数。

```
 text.setText(String.valueOf(testpins)); 
```

摆脱这条线，就像`updateStatus()`在正确的地方一样。`text`也是另一个不必要的类成员 - 它应该是本地的`updateStatus()`。

```
 return wheel;
} 
```

# serial-port - 使用 RS232 从睡眠中唤醒 PIC16F1825

> ID：11594899
> 
> 赞同：3
> 
> 时间：2012-07-21T18:39:05.867
> 
> 标签：serial-port, microcontroller, pic, wakeup

是否可以使用 RS232 将 Microchip PIC16F1825 从睡眠中唤醒而无需查看字符？

因为允许的 RX 引脚之一支持更改中断，我认为这可能是可能的。

有人成功实施了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T19:33:56.127

当然！

来自数据表[PIC16(L)F1825/1829](http://ww1.microchip.com/downloads/en/DeviceDoc/41440C.pdf)：

**9.1 从睡眠中唤醒**

```
The device can wake-up from Sleep through one of the following events:
1\. External Reset input on MCLR pin, if enabled
2\. BOR Reset, if enabled
3\. POR Reset
4\. Watchdog Timer, if enabled
5\. Any external interrupt
6\. Interrupts by peripherals capable of running 
   during Sleep (see individual peripheral for more information) 
```

所以你可以使用：

1) 外部中断 INTERRUPT-ON-CHANGE，如果您将 RX 引脚与配置为更改时中断的其他引脚之一连接。

2)外设中断RCIF：USART接收中断标志位。当接收缓冲区已满（接收到一个 UART 字）时，一个中断挂起，您的 CPU 应该被唤醒。

# game-physics - （无限）滚动轨迹如地形的子弹物理策略

> ID：11594904
> 
> 赞同：1
> 
> 时间：2012-07-21T18:39:33.157
> 
> 标签：game-physics, terrain, bulletphysics

我试图找到我们在 Bullet 中有哪些选项来实现像地形这样的滚动轨迹，一旦地形段（或瓷砖）滚动出视野，就会被重复使用。

在诸如 Box2D 和 Chipmunk 之类的 2D 引擎中，我会用分段形状或多边形形状布置静态碰撞体，一旦它们不在视野范围内，就会重新定位它们。这是一个描述在 Box2D 的 ActionScript 版本中完成的链接：[http ://www.emanueleferonato.com/2011/10/04/create-a-terrain-like-the-one-in-tiny-wings-with- flash-and-box2d-%E2%80%93-adding-more-bumps/](http://www.emanueleferonato.com/2011/10/04/create-a-terrain-like-the-one-in-tiny-wings-with-flash-and-box2d-%E2%80%93-adding-more-bumps/)

查看一些文档，似乎在 Bullet 中我们有多个形状选项，例如 btHeightfieldTerrainShapes 或 btStaticPlaneShapes 或 btBoxShapes。此外，我还查看了 BulletPhysics 附带的演示中的 AppConcaveDemo，我看到它使用的是 btBvhTriangleMeshShape，并且正在重新计算顶点。也许这会是更好的选择吗？

看着这些不同的选项，我想知道是否有任何想法如何最好地实现这样的目标，记住地形水平滚动，类似于游戏 TinyWings，应该像 HotWheels 赛车轨道一样狭窄。

我不是在寻找详细的技术实现，而是讨论一种技术相对于另一种技术的优点，将性能作为主要考虑因素。

注意：不确定是否值得一提，但这种地形会与刚体和软体相互作用。

谢谢，

克劳迪娅

# cmake - 如何正确地将标志的 CMake 列表（分号-sep）传递给 set_target_properties？

> ID：11594905
> 
> 赞同：45
> 
> 时间：2012-07-21T18:39:44.517
> 
> 标签：cmake

CMake 列表本质上只是用分号分隔的字符串，但如果将这样的变量传递给命令，它确实会扩展为多个参数 - 例如，

```
set(FLAGS f1 f2 f3)
# now FLAGS == 'f1;f2;f3'
add_custom_command(
  ...
  COMMAND my_cmd ${FLAGS}
  ...
) 
```

会正确调用`my_cmd f1 f2 f3`.

现在如果我这样做

```
set_target_properties(
  myTarget PROPERTIES
  LINK_FLAGS  "${LD_FLAGS}"
) 
```

扩展不会发生，我最终得到一个包含分号的 LD_FLAG - 没用，而不是将其扩展为以空格分隔的字符串。

有什么方法可以使当我将列表传递给 LINK_FLAGS 属性（或任何属性）时，它会扩展为多个参数，而不仅仅是一个？

谢谢，丹

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-21T20:02:19.070

我不认为`set_target_properties`可以自动进行扩展，但您可以使用`string (REPLACE ...)`将列表扩展为空格分隔的字符串：

```
string (REPLACE ";" " " LD_FLAGS_STR "${LD_FLAGS}")
set_target_properties(
  myTarget PROPERTIES
  LINK_FLAGS  "${LD_FLAGS_STR}"
) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-08-05T02:50:51.503

要使用 cmake List 作为列表，请使用

```
${LD_FLAG} 
```

要使用 cmake 列表作为字符串（即列表项用 ';' 分隔），请使用

```
"${LD_FLAG}" 
```

因此，在您的情况下，只需删除 "" 就足够了。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-08-05T12:54:29.963

该`set_property`命令是为此设计的

[http://www.cmake.org/cmake/help/v3.0/command/set_property.html](http://www.cmake.org/cmake/help/v3.0/command/set_property.html)

```
set_property(TARGET tgt PROPERTY LINK_FLAGS foo bar) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-11T08:42:58.847

我像字符串一样使用它

`set(FLAGS " f1 f2 f3")`

请注意前面的空格，它允许您连接其他标志集。

对于更复杂的项目，您还可以使用*双重扩展*技巧来代替 if-elses：

```
set(GCC_FLAGS " -Wl,--relax")
set(DIAB_FLAGS " -tPPCE500ES:cross")
set(MSVC_FLAGS " /RAINBOW_CRAP)
# ...
# ...LINUX_FLAGS, WINDOWS_FLAGS, etc...

set_target_properties(
  myTarget PROPERTIES
  LINK_FLAGS  "${${COMPILER}_FLAGS} ${${SYSTEM}_FLAGS}"
)

# COMPILER and SYSTEM is set somewhere else, in toolchain files for example 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-29T00:33:46.707

```
separate_arguments(LD_FLAGS_AS_LIST  NATIVE_COMMAND  LD_FLAGS)

set_target_properties(
  myTarget PROPERTIES
  LINK_FLAGS  "${LD_FLAGS_AS_LIST}"
) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-02-23T16:26:45.580

在 cmake 3.x 中有几种方法

顶级 CMakeLists.txt 文件看起来像这样：

```
# The name of the included file could be anything,
# it doesn't have to be called CMakeLists.txt
include(foo/CMakeLists.txt)
include(bar/CMakeLists.txt)

add_executable(myApp ${myApp_SOURCES}) 
```

子目录文件的结构如下：

```
list(APPEND myApp_SOURCES
    ${CMAKE_CURRENT_LIST_DIR}/foo.cpp
    ${CMAKE_CURRENT_LIST_DIR}/foo_p.cpp
) 
```

[使用 target_sources() 增强源文件处理](https://crascit.com/2016/01/31/enhanced-source-file-handling-with-target_sources/)

# c# - datagridvie 在保存更新或删除操作时刷新

> ID：11594907
> 
> 赞同：0
> 
> 时间：2012-07-21T18:39:57.847
> 
> 标签：c#, datagridview, datagridviewcolumn

我正在使用 c# 中的数据网格，我希望当我使用表单保存、更新或删除数据库时，网格将在这些操作上刷新（更新）我应该怎么做才能实现这一点请帮助谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T19:04:56.050

你可以通过

将数据源重新绑定到 DataGridView

# .net - .NET 是 MFC 之类的框架还是 API？

> ID：11594911
> 
> 赞同：0
> 
> 时间：2012-07-21T18:40:20.797
> 
> 标签：.net, visual-c++

如果它是一个框架，我可以在 C++ 中同时使用 MFC 和 .NET，还是必须选择其中一个？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T18:52:34.223

.Net 不仅仅是一个框架，您不能从普通的 C++（如 MFC 或其他 C++ 库）中使用它。有一个名为 C++/CLI 的特殊 C++ 版本可以访问 .Net 框架（和任何 .Net 库）以及任何普通的 C++ 库。但是 C++/CLI 主要用于特殊用途，例如在 C++ 库和 C# 应用程序之间进行桥接，将其用作通用语言通常不是一个好主意。

那么，可以同时使用 .Net 和 MFC 吗？如果您使用 C++/CLI，我认为是。这是个好主意吗？不。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T18:42:40.110

.net 实际上就像 JVM 一样是运行时。.net FCL 是提供的框架类库，用于简化 Windows 和 Web 编程。之前我们使用 MFC、WIN32 API 进行 windows 编程，现在 .net FCL 提供了更容易使用的类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-21T18:45:46.943

.NET 是一个框架。

你可以看看这个线程：

[http://www.daniweb.com/software-development/cpp/threads/198090/mfc-vs.-.net](http://www.daniweb.com/software-development/cpp/threads/198090/mfc-vs.-.net)

# php - 将上传的文本文件保存到 Web 服务器

> ID：11594914
> 
> 赞同：1
> 
> 时间：2012-07-21T18:40:33.557
> 
> 标签：php

我让我的用户上传一个文本文件，然后由我的应用程序处理。处理完成后，我想将此文本文件的副本保存在我的服务器上的某个位置以供将来参考。目前，上传的文本文件保留在 PHP 临时文件夹中，直到它被我的应用程序关闭。

有什么简单的方法可以做到这一点？

顺便说一句，我需要知道如何在我的网络服务器上执行此操作以及 localhost（用于测试）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T18:46:33.413

您可以使用**fwrite**函数（尽管在这个特定示例中这可能不是一个好主意。

```
$fp = fopen('data.txt', 'w');
fwrite($fp, $yourContents);
fclose($fp); 
```

但是，如果您已经拥有该文件，只需使用复制命令将其复制（如果您想将其保存在临时文件夹中，即如果不使用重命名功能移动它）。

要**复制**，请执行以下操作

```
$tempfile = 'tempfile.txt';
$newfile = 'newfile.txt';

if (copy($tempfile, $newfile)) {
    echo "success!";
} else {
    echo "misery :(";
} 
```

**重命名**移动

 **```
// Rename returns a bool, just as in the copy example
rename("/tmp/tempfile.txt", "/home/user/files/newfile.txt"); 
```

**添加了这个：**使用**move_uploaded_file移动**

*请注意，我没有在开发环境中对此进行测试。这可能无法完美执行。*

```
$uploads_dir = 'C:\\movefiles\\here\\';
foreach ($_FILES["upload-tracking-file"]["error"] as $key => $error) {
    if ($error == UPLOAD_ERR_OK) {
        $tmp_name = $_FILES["upload-tracking-file"]["tmp_name"][$key];
        $name = $_FILES["upload-tracking-file"]["name"][$key];
        move_uploaded_file($tmp_name, "$uploads_dir\\$name");
    }
} 
```

**参考**

*   复制，[http ://php.net/manual/en/function.copy.php](http://php.net/manual/en/function.copy.php)
*   移动（重命名），[http ://php.net/manual/en/function.rename.php](http://php.net/manual/en/function.rename.php)
*   move_uploaded_file，[http ://php.net/manual/en/function.move-uploaded-file.php](http://php.net/manual/en/function.move-uploaded-file.php)
*   fwrite，[http ://php.net/manual/en/function.fwrite.php](http://php.net/manual/en/function.fwrite.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T18:45:30.030

使用 php 的函数 ob_start() 和 file_put_contents() 这应该对你有所帮助。如果不发布您的回复，此链接将对您有所帮助 php.net/manual/en/function.ob-start.php, php.net/manual/en/function.file-put-contents.php**

# html - 固定标头定位问题

> ID：11594916
> 
> 赞同：0
> 
> 时间：2012-07-21T18:40:41.623
> 
> 标签：html, css

处理我的投资组合并遇到定位问题 - [http://harden6615.com/portfolio/index.html](http://harden6615.com/portfolio/index.html) - 我有一个固定的标题导航，我使用了一个 jquery 滚动并且工作正常，直到它通过工作部分我的网站。固定标题的深度低于工作图像而不是高于。弄乱它，我意识到它与位置有关：相对，但不知道如何解决它。

我尝试`z-index: -1`了我的工作图像，但这打破了我在它们上的 jquery 悬停。任何人都知道固定定位的解决方案或是否有解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T18:52:35.497

我使用谷歌开发者工具在谷歌浏览器中尝试了它，当我将它添加到`#floatingbar`：

```
position:fixed;
width:960px
z-index:10; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T18:48:04.037

为您的 DIV 设置更高的指数`#floatingbar`，而不是降低投资组合的平方。

```
#floatingbar {
    z-index: 9999 !important;
} 
```

# assembly - OllyDbg on win7 64 位

> ID：11594918
> 
> 赞同：0
> 
> 时间：2012-07-21T18:40:48.837
> 
> 标签：assembly, reverse-engineering, ollydbg

我一直在关注 lena151 的逆向工程教程，除了拆包外，一切都很顺利。我在 64 位 Windows 7 机器上运行 olly，它工作正常，除非在跳转后 EP 始终为“JMP 71B00000”，地址被移入 EAX，然后另一个地址移入 ECX。对 ECX 进行了调用，但我得到了一个无法传递给程序的异常。这只发生在我从 EP 单步执行代码时。谁能向我解释这是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T08:08:50.580

Ollydbg 无法反汇编 64 位处理器的二进制文件。我认为您最好使用运行 x86_32 系统的虚拟机。

从[OllyDbg 2.0 的页面](http://www.ollydbg.de/version2.html)：

> 再一次：不，这个版本在 Win64 下不工作！

# iphone - iphone uiimage 无法加载

> ID：11594919
> 
> 赞同：1
> 
> 时间：2012-07-21T18:41:08.707
> 
> 标签：iphone, uiimage, loading

我有一个使用一堆 PNG 文件的工作应用程序；它运行没有问题。我刚刚从 iconfinder.com 下载了另外两个图标，但无法将它们加载到我的应用程序中。

这是我的代码：

```
showKeyboardImage = [UIImage imageNamed:@"Bonjour.png"];
printf("Bonjour %p %g %g\n", showKeyboardImage, showKeyboardImage.size.width, showKeyboardImage.size.height);

// http://www.iconfinder.com/icondetails/36137/32/add_keyboard_icon
showKeyboardImage = [UIImage imageNamed:@"1342878368_keyboard_add.png"];
printf("showKeyboardImage %p %g %g\n", showKeyboardImage, showKeyboardImage.size.width, showKeyboardImage.size.height);

// http://www.iconfinder.com/icondetails/36138/32/delete_keyboard_icon
hideKeyboardImage = [UIImage imageNamed:@"1342878356_keyboard_delete.png"];
printf("hideKeyboardImage %p %g %g\n", hideKeyboardImage, hideKeyboardImage.size.width, hideKeyboardImage.size.height); 
```

这是输出：

```
Bonjour 0xbd33f70 32 32
showKeyboardImage 0x0 0 0
hideKeyboardImage 0x0 0 0 
```

是的，所有三个文件都在同一个目录中。是不是因为我从网上下载了这些图标？我需要将它们标记为可以安全使用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T18:49:09.407

我最近遇到了类似的麻烦。您需要确保已将它们添加到您的项目中。在 XCode 左侧的文件中找到您希望图像所在的文件夹，然后右键单击该文件夹并选择“将文件添加到'YOUR_PROJECT_HERE'”然后选择文件并单击“添加”。希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T18:56:43.977

如果它仅在您的应用程序在您的设备上运行但模拟器正常时发生，请检查图像名称，因为它在设备中区分大小写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T18:54:06.343

确保您已将文件添加到项目中并检查它们是否是目标的一部分。在 Xcode 中，单击图像文件，查看文件检查器 (Cmd+Alt+1) 并查看是否有“目标成员资格”的复选标记。

还要确保您在代码中使用正确的文件名称。

# c# - 从 WSDL 生成 WCF 和代码

> ID：11594920
> 
> 赞同：1
> 
> 时间：2012-07-21T18:41:11.387
> 
> 标签：c#, wcf, wsdl

我正在为 Web 服务编写一个“通用”客户端，但遇到了一个意想不到的问题。我通过检索 Web 服务 WSDL 为客户端动态生成代码，并使用以下（稍微简化）代码来生成客户端代码：

```
ServiceDescription serviceDescription = ServiceDescription.Read(xmlTextReader(WSDL));
ServiceDescriptionImporter descriptionImporter = new ServiceDescriptionImporter();
descriptionImporter.ProtocolName = "Soap";
descriptionImporter.Style = ServiceDescriptionImportStyle.Client;
CodeCompileUnit codeCompileUnit = new CodeCompileUnit();
CodeDomProvider codeDomProvider = CodeDomProvider.CreateProvider("CSharp");
codeDomProvider.GenerateCodeFromCompileUnit(codeCompileUnit, Console.Out, new CodeGeneratorOptions()); 
```

我正在使用一个简单的 WCF Web 服务对此进行测试，该服务公开了两种方法：

```
[OperationContract]
int GetInteger();

[OperationContract]
string GetString(); 
```

如果我检查客户端生成的代码，我可以看到 GetString() 返回一个字符串，但 GetInteger() 方法返回 void！我认为这与值和引用类型有关。有没有办法强制代码生成器让 GetInteger() 方法返回一个 int？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T19:57:53.223

通过 WCF 返回 int 应该不是问题。

检查生成客户端生成代码的代码。

解决该问题的方法是返回一个对象，该对象具有一个 int 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T00:28:41.913

从各种实验中，我相信我的问题是使用 ServiceDescriptionImporter 生成客户端代码的固有限制。我将尝试“升级”以使用 System.ServiceModel.Description.WsdlImporter 和 System.ServiceModel.Description.ServiceContractGenerator 框架，希望能够改进。

# icalendar - iCalendar 格式的 CREATED 和 DTSTAMP 有什么区别？

> ID：11594921
> 
> 赞同：27
> 
> 时间：2012-07-21T18:41:11.937
> 
> 标签：icalendar

在[iCalendar 规范](https://www.rfc-editor.org/rfc/rfc2445)中，我发现以下关于[DTSTAMP](https://www.rfc-editor.org/rfc/rfc2445#section-4.8.7.2)的信息：

> 此属性不同于“CREATED”和“LAST-MODIFIED”属性。这两个属性用于指定日历存储中的特定日历数据的创建时间和上次修改时间。这与创建或上次修改日历服务信息的 iCalendar 对象表示时不同。

这意味着什么？我将事件存储在数据库中并希望生成 iCal 文件。我假设在创建事件时应该将 CREATED 设置为，但是我应该将 DTSTAMP 设置为什么？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2016-05-20T13:51:54.847

## *VEVENT*与日历应用程序中的事件

*.ical 或 *.ics 文件或另一个可比较的数据流包含从一个日历应用程序发送到另一个日历应用程序的**消息。**日历应用程序将事件存储为**对象**。

您可以通过单击和键入在日历中输入事件，但另一种方法是导入带有 VEVENT 消息的 ical 文件。不要将这些 VEVENT 消息视为应用程序事件对象的副本。把它想象成你点击和打字的重复。

考虑到这个想法，很容易理解，VEVENT 不仅可以创建事件。它还可以更改现有事件，甚至可以从应用程序中删除事件。

现在让我们看一下在这种情况下很重要的一些字段：

* * *

## 已创建

这是在日历应用程序中创建事件对象的时间戳。每个事件对象都可以由唯一标识符 (UID) 标识。

* * *

## DTSTAMP

这是在 ical 或 ics 文件中创建 VEVENT 消息的时间戳。这种 VEVENT 消息有多种类型，创建一个新的事件对象只是其中之一。如果您将正确的 UID 添加到 VEVENT 消息以识别它属于哪个事件对象，您还可以更改现有事件甚至取消事件。因此，对于日历应用程序中的一个事件对象（由其 UID 标识），您可以接收许多 VEVENT 事件，每个事件都有自己的 DTSTAMP，但都指的是只有一个创建日期的事件。

* * *

## 顺序

这不是时间戳，而是数字（整数）。如果省略序列号，则将其视为`SEQUENCE:0`。如果同一事件对象（相同的 UID）有多个 VEVENT（在一个或多个文件中接收），则将通过增加序列号来处理它们。DTSTAMP 只是告诉您 VEVENT 的创建时间，但它不影响执行顺序，执行顺序由字段 SEQUENCE 定义。因此，请确保您的 callendar 应用程序中的每次更改都会为 VEVENT 设置一个新的 DTSTAMP 以及一个递增的 SEQUENCE 编号。

* * *

## 最后修改

这又是日历应用程序中对象的时间戳。当您收到一个带有 VEVENT 消息的 ical 文件，其 DTSTAMP 是今天上午 9 点，并且您在上午 10 点将其输入到您的应用程序中，那么上午 10 点是 LAST-MODIFIED 的值。

* * *

## *CREATED*和*LAST-MODIFIED*如何在 VEVENT 中有意义？

如前所示，CREATED 和 LAST-MODIFIED 是日历应用程序中对象的属性，而 VEVENT 是包含属性的消息，日历应用程序可以从中创建、修改或删除其对象。消息无法知道您何时将其导入应用程序，因此它无法知道您何时创建或修改对象。或者它能知道吗？为什么这些对象属性应该成为消息的一部分？

答案是：能够导出和导入日历应用程序的对象。您有两台设备（比如说一部手机和一台台式电脑），并且想要保持两台设备上的日历同步？然后，您需要从一台设备发送到另一台设备的消息，其中包含所有相关数据，包括 CREATED 和 LAST-MODIFIED 的时间戳。

由于 VEVENT 消息不仅用于模拟如上所述的单击和键入，而且还用于跨日历应用程序的不同实例同步事件对象，因此有时您还需要在 VEVENT 消息中创建和上次修改。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-07-24T15:52:24.087

当您从数据库中的信息创建实际的 ical 文件时，应将 DTSTAMP 设置为

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-11-15T08:53:14.140

我一直在寻找这个问题的答案，虽然这里的答案有助于我理解，但我也发现[iCalendar.org](https://icalendar.org/)网站上的信息很有帮助。

* * *

***简而言之****：创建事件时的已创建状态，DTStamp 是指定或不指定“方法”属性时修改的时间戳，LastModified 是修改事件的时间戳。看到 LastModified 与 DTStamp 相同，加上最后一个在“方法”属性集的情况下也会发生变化。*

* * *

我这里只分享原文：

**[创建](https://icalendar.org/iCalendar-RFC-5545/3-8-7-1-date-time-created.html)：**

> 此属性指定日历用户代理在日历存储中创建日历信息的日期和时间。

**[DT戳](https://icalendar.org/iCalendar-RFC-5545/3-8-7-2-date-time-stamp.html)**：

> **对于**指定“METHOD”属性的 iCalendar 对象，此属性指定创建 iCalendar 对象实例的日期和时间。**对于**未指定“METHOD”属性的 iCalendar 对象，此属性指定与日历组件关联的信息在日历存储中最后一次修改的日期和时间。

**[最后修改](https://icalendar.org/iCalendar-RFC-5545/3-8-7-3-last-modified.html)**：

> 此属性指定与日历组件关联的信息最后在日历存储中修改的日期和时间。

# objective-c - iOS – 使用 GCD 在后台下载 Facebook 数据

> ID：11594925
> 
> 赞同：0
> 
> 时间：2012-07-21T18:42:21.963
> 
> 标签：objective-c, delegates, grand-central-dispatch

我的情况是，每次我的应用程序激活时，我都需要从 Facebook 同步一些数据。此同步应在后台进行，不应锁定 GUI（因此不应在主队列上运行）。

所以在我的`- applicationDidBecomeActive:`方法中我有这个代码：

```
dispatch_async(dispatch_get_global_queue(0,0), ^{

    [[FacebookHelper sharedInstance] syncData];
}); 
```

FacebookHelper 是一个处理所有 Facebook 处理的单例类。在 FacebookHelper 类中，我实现了 Facebook 委托方法。但是由于某种原因，当我运行上述代码时，Facebook 委托方法`- request:didLoad:`（当 Facebook 数据完成下载时）从未被调用。虽然如果我运行相同的代码，`dispatch_sync`它将完成（但随后 GUI 将被阻止）。

编辑：Facebook SDK v2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T07:17:43.957

实际上，在分析代码后，我注意到它是在`- request:didLoad:`委托方法中完成的内部处理方法。所以我只是把这个内部处理方法放在一个 dispatch_async 块中，它在后台运行得很好。

谢谢你的帮助！

# perl - 如何判断网页是否存在？

> ID：11594932
> 
> 赞同：2
> 
> 时间：2012-07-21T18:43:32.963
> 
> 标签：perl, networking, ping

只是为了好玩，我正在编写一个 Perl 程序来检查给定的网站是否存在。就我的目的而言，如果我可以进入浏览器，输入网址并获得有意义的网页（意味着不是错误或“无法打开页面”消息），则存在一个网站。这样做的最佳方法是什么？最终，我希望能够为我的程序提供数百个 url 的列表。

我正在考虑对列表中的每个 url 进行 ping 操作以查看它们是否存在；但是，我对网络的了解并不多，所以这是最好的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T18:48:16.757

在 Perl (LWP) 中使用 WWW 库：

```
#!/usr/bin/perl
use LWP::Simple;
my $url = 'http://www.mytestsite.com/';
if (head($url)) {
  print "Page exists\n";
} else {
  print "Page does not exist\n";;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T18:47:20.360

不存在“ping 网页”这样的协议。您实际上必须请求资源，如果它被提供，它就存在。有几种方法可以解决，这里有几个：

1.  [使用 LWP 检索网页](http://perlmeme.org/tutorials/lwp.html)
2.  检查现有网页可能很简单：

    ```
    #!/usr/bin/env perl
    use strict;
    use warnings;
    use LWP::Simple qw(head);
    head('http://www.perlmeme.org') or die 'Unable to get page'; 
    ```

与命令行工具相同的解决方案是[`lwp-request`/`HEAD`](http://search.cpan.org/perldoc?lwp-request)。`HEAD`返回资源标题，例如内容大小，并且比获取所有页面内容更快。

# c++ - 如何摆脱堆栈溢出错误

> ID：11594934
> 
> 赞同：0
> 
> 时间：2012-07-21T18:44:26.740
> 
> 标签：c++, arrays, stack-overflow

创建 Dungeon 类的实例时出现堆栈溢出错误。我觉得这是因为我的地牢课程创建了一系列房间，而我的房间创建了一系列单元格。我唯一的问题是我以前做过这个，从来没有遇到过这个问题。所以这次我做错了什么？我的阵列是否太大？我可以将我的房间阵列设置为最大 [5][3]，但我希望它有一个 [5][5] 大小的房间。这是不可能的吗？

我知道堆栈溢出错误是当您用完堆栈上的内存时，但我怎么知道我何时退出该堆栈并可以重新开始？或者当某些东西从那个堆栈中取出时？

这是我关于如何设置这 3 个类的代码 (Dungeon.h)：

```
#ifndef DUNGEON_H
#define DUNGEON_H

#include <stdlib.h>
#include <string>
#include "TextureHandler.h"
#include "Room.h"

using namespace std;

class Dungeon
{
public:
    Dungeon();
    ~Dungeon();

private:
    static const int MAX_RM_ROWS = 5;   //Maximum amount of rows of rooms we can have
    static const int MAX_RM_COLS = 5;   //Maximum amount of columns of rooms we can have
    Room rooms[5][5];

    int currentDungeon;                 //Stores the ID of the current dungeon we are in.
    int currentRoomRow;                 //Stores the row position in the room array for what room the player is in
    int currentRoomCol;                 //Stores the column position in the room array for what room the player is in
protected:

};

#endif 
```

房间.h

```
#ifndef ROOM_H
#define ROOM_H

#include <stdlib.h>
#include "Cell.h"

using namespace std;

class Room
{

public:
    Room();
    ~Room();
    void draw();
    void setupCell(int row, int col, float x, float y, float width, float height, bool solid, vector<float> texCoords);
    int getMaxRows();
    int getMaxCols();
private:
    static const int MAX_ROWS = 30;
    static const int MAX_COLS = 50;
    Cell cells[MAX_ROWS][MAX_COLS];

protected:
};

#endif 
```

细胞.h

```
 #ifndef CELL_H
    #define CELL_H

    #include <stdlib.h>
    #include <vector>
    #include "GL\freeglut.h"

    using namespace std;

    class Cell
    {
    public:
    Cell();
    ~Cell();
    void setup(float x, float y, float width, float height, bool solid, vector<float> texCoords);
    void draw();
    float getX();
    float getY();
    float getWidth();
    float getHeight();
    bool isSolid();
    private:
    float x;
    float y;
    float height;
    float width;
    bool solid;
    vector<float> texCoords;
    protected:

    };

    #endif 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T18:50:56.480

您`Cell`大约 32 个字节（或更多，取决于 a 的大小`vector<float>`）。每个房间有 1500 个单元。每个地牢有 25 个房间。因此，每个地牢至少需要 32 x 1500 x 25 = 1.2 MB。这相当大，但如果您动态分配结构，这通常不是主要问题。如果您尝试在堆栈上创建本地实例，那么您可能很容易破坏堆栈。

所以，动态分配你的地下城，你应该没问题。不要将它们创建为局部变量。

您可能会决定隐藏复制构造函数是一个好主意，这样您就不能通过值传递 Dungeon，而只能通过引用传递。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T18:51:36.063

你的数组很大。单个的`Dungeon`权重约为 3 * sizeof(int) + 5 * 5 * 30 * 50 * sizeof(Cell)，大概在 1200000 字节左右*，即超过 1 兆字节。这可能会很多，特别是如果你放了多个。

我的建议是摆脱所有限制并使用`std::vector`s 而不是数组。它使用堆进行存储，解决您的问题*并*为您提供无限的房间**！

* * *

[*`sizeof(Cell)`大概是 32 左右：四个浮点数的 16 个字节，一个布尔值一个字节，一个向量 12-16 个字节，加上填充以对齐 4 个字节边界。]

[** 好吧，受可用内存或操作系统的限制。]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T18:49:13.833

如果您使用的是 windows 考虑

[http://msdn.microsoft.com/en-us/library/tdkhxaks(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/tdkhxaks(v=vs.100).aspx)

增加您的默认堆栈大小

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T18:53:50.727

将堆用于大量数据，将库用于容器。例如，看看 boost 和 qt。对于堆栈：一旦离开包含上下文，您的堆栈对象就会被销毁。上下文可能是：一个函数、对象生命周期、一个简单的代码块`{}`

关于堆栈大小：在 Linux 上，你通常有大约。Windows 上 8 Mb 32 Mb 但您可以更改这些值，因此它们在您的机器上可能会有所不同

# php - 使用 PHP 将 MySQL 结果转换为 JSON

> ID：11594939
> 
> 赞同：1
> 
> 时间：2012-07-21T18:45:25.710
> 
> 标签：php, json

我在这里看到了很多类似的问题，但我无法获得我想要的输出。有人可以帮我吗？如何生成以下 JSON 结构？我的查询很好，我只是不知道如何循环并得到它。谢谢

**期望的输出**

```
{
    "players": [
        {
            "id": 271,
            "fname": "Carlos",
            "lname": "Beltran",
            "position": "OF",
            "stats": [
                {
                    "year": "2010",
                    "hr": 32,
                    "rbi": 99,
                    "team": "NYM"
                },
                {
                    "year": "2011",
                    "hr": 35,
                    "rbi": 100,
                    "team": "STL"
                }, 
                {
                ............
                }
            ]
        },
        {
          ........
        }
    ]
} 
```

**电流输出**

```
{"0":{"cbs_id":"18817","fname":"Carlos","lname":"Beltran"},"stats":[{"year":"2007","hr":"33","rbi":"112"}]}

{"0":{"cbs_id":"174661","fname":"Willie","lname":"Bloomquist"},"stats":[{"year":"2007","hr":"2","rbi":"13"}]}

{"0":{"cbs_id":"1208693","fname":"Brennan","lname":"Boesch"},"stats":[{"year":"2010","hr":"14","rbi":"67"}]} 
```

生成的是：（我知道我很遥远）

```
if ($result = mysqli_query($link, $sql)) {

        $player = array();

        while ($row = $result->fetch_assoc())
        {

            $player[] = array (
            'cbs_id' => $row['cbs_id'],
            'fname' => $row['fname'],
            'lname' => $row['lname']
            );

            $player['stats'][] = array(
                'year' => $row['year'],
                'hr' => $row['hr'],
                'rbi' => $row['rbi']
            );

        }

        $json = json_encode($player);
        echo "<pre>$json</pre>";

        mysqli_free_result($result);
    }
} 
```

注意：每个玩家可以有多个“统计”记录（年、小时、打点等）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T21:06:35.767

这可能会给你想要的：

```
$players = array();

while ($row = $result->fetch_assoc())
{
  $id = (int)$row['cbs_id'];

  if ( ! isset($players[$id]))
  {
    // New player, add to $players array.
    // For the moment index players by ID so stats can be easily added
    // to an existing player. Without indexing (using $players[] = ...),
    // the same player would be added for each stats record related to
    // him.
    $players[$id] = array(
      'id'       => $id,
      'fname'    => $row['fname'],
      'lname'    => $row['lname'],
      'stats'    => array()
    );
  }

  // Add the stats
  $players[$id]['stats'][] = array(
    'year' => (int)$row['year'],
    'hr'   => (int)$row['hr'],
    'rbi'  => (int)$row['rbi']
  );
}

// Players are indexed by their ID in $players but need to be contained in
// a JSON array, so use array_values() to remove indices, e.g. convert
//
//     array(
//       271 => array('id' => 271, ...),
//       ...
//     )
//
// to
//
//     array(
//       array('id' => 271, ...),
//       ...
//     )
//
$data = array('players' => array_values($players));
$json = json_encode($data); 
```

**最终，您可能会省略整数转换，并让 PHP 使用MYSQLI_OPT_INT_AND_FLOAT_NATIVE** mysqli 连接选项自动将字符串化数字数据（这是 MySQL 查询结果的默认行为）转换回 PHP 数字，如[本页](http://php.net/manual/en/mysqli.quickstart.statements.php)示例 #5 中所述。请注意，它需要 PHP 使用 mysqlnd 库（您可以使用 进行检查`phpinfo`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T18:48:00.547

你需要一个关联数组。这样的事情应该让你*开始*：

```
$data = array(
    'players' => array(
        array(
           'id' => 271,
           'fname': 'Carlos',
           'lname': 'Beltran',
           'position': 'OF',
           'stats' => array(
               array(
                   'year' => 2010,
                   'hr': 32,
                   'rbi': 99,
                   'team': 'NYM'
               ),
               ...
           )
        ),
        ...
    )
); 
```

要将其编码为 json，请使用[json_encode](http://php.net/json_encode)：

```
$json = json_encode($data); 
```

# android - Android：共享兄弟视图按下状态

> ID：11594950
> 
> 赞同：4
> 
> 时间：2012-07-21T18:47:39.113
> 
> 标签：android, android-layout

我有一个布局，其中有两个孩子。我的目标是将整个布局功能作为一个按钮。每个孩子都有不同的颜色来显示按下状态。当我单独按下它们时，它们会很好地显示它们的按下状态。但是，当按下一个时，我希望它们*都*显示按下状态。

我的第一个想法是使用 duplicateParentState，但父级似乎从未处于按下状态，因为视图填充了布局。我的下一个想法是使用 AddStatesFromChildren，但这所做的只是让父显示被按下，而不是孩子。最后我尝试使用两者，但这导致了错误。

**如何让兄弟视图共享按下状态？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-20T23:11:12.180

我只晚了 4 年，但你很接近：

*   将它们都设置在父布局中
*   在父级上设置你的点击监听器
*   然后设置`android:duplicateParentState="true"`在每个孩子身上。

奇迹般有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T18:58:44.867

您可能会执行以下操作：

```
Button button = new Button(this);
button.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {

        Button otherButton = (Button) findViewById(R.id.other_button);
        otherButton.setPressed(true);

    }
}) 
```

但是，当然，可以根据需要调用按钮。

# ios - Objective-C 中长时间运行的任务

> ID：11594956
> 
> 赞同：1
> 
> 时间：2012-07-21T18:48:07.483
> 
> 标签：ios, multithreading

我试图弄清楚如何在Objective-C（iOS）中以一种不会挂起UI线程的方式记录正在运行的任务，有点像后台工作人员或.Net中的TPL。

我正在寻找一种以可维护的方式处理此类工作的方法，这被认为是 iOS 开发人员的最佳实践？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T18:58:44.750

有很多方法可以做到这一点，例如`NSThread`, `NSOperation`/ `NSOperationQueue`classes 或`GCD`. 示例代码（GCD）：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    //background work
}); 
```

你可以在这里阅读：[并发编程指南](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T19:08:11.997

对于 GCD，试试这个测试：（也可以参考 Adam 和 Martin R 建议的 Apple 文档。

```
- (IBAction)dispatchQPressed:(id)sender 
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        for (int i=0; i<1000; i++)
        {
            NSLog(@"Running in background thread concurrently: %i", i);
        }
    });

    for (int i = 0; i<200; i++)
    {
        NSLog(@"run in main thread:%i", i);
    }
} 
```

# iphone - NSPersistentStoreDidImportUbiquitousContentChangesNotification 未得到通知

> ID：11594960
> 
> 赞同：1
> 
> 时间：2012-07-21T18:48:41.737
> 
> 标签：iphone, objective-c, ios, core-data, icloud

如果另一个设备上的核心数据中的条目发生更改，NSLog 消息会显示它已注意到更改，但`NSPersistentStoreDidImportUbiquitousContentChangesNotification`没有被调用。直到在我的第一台设备上保存它才知道更新我的表格视图。

这是我的代码：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(iCloudUpdates:)
                                                 name:NSPersistentStoreDidImportUbiquitousContentChangesNotification
                                               object:nil]; 
```

有人知道为什么这可能不起作用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T15:29:21.297

第一种选择：如果您的问题是更新两台设备都有延迟，这是正常现象，Apple 不保证更新时间，但通常很快。

如果另一方面的问题是未调用 iCloudUpdates 方法，请确保签名正确，应该是：

```
-(void)iCloudUpdates:(NSNotification*)notification {
  // do your stuff here
} 
```

第二种选择：在撰写本文时，iOS 5 对 iCloud 和 CoreData 有很大的问题，我最近发布的应用程序没有 iCloud 支持。

如果您想知道发生了什么，请通过以下方式打开 CoreData 和 iCloud 的登录：

```
-com.apple.CoreData.SQLDebug 1
-com.apple.coredata.ubiquity.logLevel 3 
```

在您的方案管理器中，在 run->arguments 选项卡下。

如果您在“目标”设备中看到一些奇怪的错误，那就是 iCloud 无法正常工作的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-23T05:30:16.537

我认为您的代码的问题在于，在“addObserver”中，您已将对象设置为 nil。该对象应该是您的 persistentStoreCoordinator，如下所示。

```
__weak NSPersistentStoreCoordinator *psc = self.context.persistentStoreCoordinator;

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(iCloudUpdates:)
                                             name:NSPersistentStoreDidImportUbiquitousContentChangesNotification
                                           object:psc]; 
```

# backbone.js - 主干，而不是“this.el”包装

> ID：11594961
> 
> 赞同：25
> 
> 时间：2012-07-21T18:48:44.887
> 
> 标签：backbone.js

我广泛使用*模板*，我喜欢使用*完整的*模板。我的意思是我想在*模板*代码中看到所有的 DOM 元素，包括*根*元素，像这样：

```
<script type="text/template" id="template-card">
  <div class="card box" id="card-<%= id %>">
    <h2><%= title %></h2>
    <div><%= name %></div>
  </div>
</script> 
```

但是 Backbone 喜欢这样的*模板*：

```
<script type="text/template" id="template-card">
  <h2><%= title %></h2>
  <div><%= name %></div>
</script> 
```

并在 JS 代码中定义*根*元素及其属性。我认为是丑陋和令人困惑的。

那么，*有什么好方法可以避免我的 Backbone 视图用额外的 DOM 元素包装我的模板？*

我一直在检查这个问题线程：[https](https://github.com/documentcloud/backbone/issues/546) ://github.com/documentcloud/backbone/issues/546 ，我知道没有任何官方方法可以做到这一点..但也许你可以推荐我一个非官方的方法。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-22T07:41:00.377

您可以利用[`view.setElement`](http://documentcloud.github.com/backbone/#View-setElement)渲染一个完整的模板并将其用作视图元素。

> **setElement** *view.setElement(element)*
> 如果您想将 Backbone 视图应用到不同的 DOM 元素，请使用 setElement，它还将创建缓存的 $el 引用并将视图的委托事件从旧元素移动到新元素

您必须考虑两点：

1.  `setElement`调用`undelegateEvents`，处理视图事件，但要小心删除您可能自己设置的所有其他事件。
2.  `setElement`不会将元素注入 DOM，您必须自己处理。

也就是说，您的视图可能看起来像这样

```
var FullTemplateView = Backbone.View.extend({

    render: function () {
        var html, $oldel = this.$el, $newel;

        html = /**however you build your html : by a template, hardcoded, ... **/;
        $newel = $(html);

        // rebind and replace the element in the view
        this.setElement($newel);

        // reinject the element in the DOM
        $oldel.replaceWith($newel);

        return this;
    }
}); 
```

还有一个使用[http://jsfiddle.net/gNBLV/7/的工作示例](http://jsfiddle.net/gNBLV/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-20T10:11:49.597

现在您还可以将视图的**tagName**定义为一个函数并创建一个如下所示的类：

```
var MyView = Backbone.View.extend({
   template: '#my-template',
   tagName: function() {
     // inspect the template to retrieve the tag name
   },
   render: function() {
     // render the template and append its contents to the current element
   }
}); 
```

这是一个工作[示例](http://jsbin.com/doduvo/latest/edit?html,js,output)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-20T09:42:59.700

[Backbone.Decarative.Views](https://github.com/hashchange/backbone.declarative.views "Backbone.Declarative.Views")为您提供了另一种方法来执行此操作，而无需依赖`setElement`. 有关更多信息，请在此处查看[我的答案](https://stackoverflow.com/a/33232975/508355)。

# javascript - Jquery：将内部 html 添加到动态生成的 div

> ID：11594962
> 
> 赞同：-1
> 
> 时间：2012-07-21T18:48:47.410
> 
> 标签：javascript, jquery

在下面的代码中，当尝试更改动态生成的 div 的内部 html 时，内部 html 剂量发生了变化。

```
 $.ajax({
    url: 'xxx.xxx',
    beforeSend: function() {
      $('#scroll_items').append('<div class="list_item more_content" align="center"><img src="loader.gif"></div>'); 
    },
    success: function(data) {    
      $('#scroll_items div:last').html("hai to all");    
    }
}); 
```

html部分

```
 <div id="scroll_items"> 
    <div class="list_item1">
    Scroll beyond this container to automatically load more content
    </div>
    <div class="list_item">
    [ List Item 2 ]
    </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T18:56:17.210

只需删除一个额外的花括号，它可能会起作用。

```
$.ajax({
      url: 'xxx.xxx',
      beforeSend: function() {
         $('#scroll_items').append('<div class="list_item more_content" align="center"><img src="loader.gif"></div>');
      },
      success: function(data) {
        $('#scroll_items div:last').html("hai to all");
      }
    }); 
```

尝试这个。

或尝试

```
success: function(data) {
setTimeout(function(){
        $('#scroll_items div:last').html("hai to all");
      },100);
   } 
```

# css - Chrome 和 FireFox 的显示区别

> ID：11594972
> 
> 赞同：0
> 
> 时间：2012-07-21T18:49:54.317
> 
> 标签：css, firefox, google-chrome

在这个[小提琴](http://jsfiddle.net/RussAbbott/XQbjk/26/)中，Chrome 和 Firefox 显示的扩展树明显不同。这会导致 Chrome 出现问题。当一个人通过将光标向下移动到可见节点的右侧来展开树时，一个人正在移动到的节点会跳到左边。根据光标所在的位置，可能会丢失整棵树，迫使一棵树再次从顶部开始。Firefox 只是向右扩展，不会出现此问题。

知道如何让 Chrome 像 Firefox 一样显示吗？

谢谢。

PS IE 就像火狐一样。Chrome 是个奇怪的人。

# php - 根据php输入值弹出窗口

> ID：11594974
> 
> 赞同：1
> 
> 时间：2012-07-21T18:50:19.050
> 
> 标签：php, javascript

我有一个`edit_ticket_check.php`这样的页面：

```
<form name="frm" action="edit_ticket_asso.php" method="post" onSubmit="return validt(frm)">
  <table frame=box align=center bgcolor="9966FF">
    <b><h2>Enter Ticket Information</h2></b> 
  </table>
</form> 
```

然后像这样的一些盒子：

```
<tr><td><font color="BLACK">Ticket Status:</font></td>
<td>
<?php 
  echo "<select name=\"ticket_status\">";  
  echo "<option size =15 selected>Select</option>"; 
  if(mysql_num_rows($result4))  
  {  
    while($row = mysql_fetch_assoc($result4))  
    {  
      echo "<option>$row[ticket_status]</option>";  
    }  
  }  
  else { 
    echo "<option>No Status Present</option>";   
  }  
?> 
</td> 
```

输入值转到第二个`edit_ticket.php`页面，在该页面中将值输入到 MySQL 数据库中。

```
if($_POST['submit']=="Insert")
{
  $ticket_no=$_POST['ticket_no'];
  if ( @$_SESSION[username] == 'admin')
  {
    $assigned_to=$_POST['emp_name'];
  }
  else
    $assigned_to = @$_SESSION[userid][0];

  $reassigned_to_team=$_POST['reassigned_to_team'];
  $ticket_status=$_POST['ticket_status'];
  $comment=$_POST['comment'];
  if($ticket_no!=NULL&&$assigned_to!=NULL&&$comment!=NULL)
  {
    $query1=mysql_query("select count(ticket_no) as total from ticket where ticket_no='$ticket_no';");

    $row = mysql_fetch_array($query1);
    if ($row["total"]>"0")
    {
      $query2="UPDATE ticket SET ticket.assigned_to='$assigned_to', ticket.reassigned_to_team='$reassigned_to_team', ticket.ticket_status='$ticket_status', ticket.comment='$comment' WHERE  ticket.ticket_no='$ticket_no'";

      $result1=mysql_query("$query2");
    }
  }
} 
```

现在，在此之后，我希望如果票证状态 = '待定' 则将出现一个新的弹出窗口并获取时间值，然后按新输入的时间更新票证的时间值。

对于弹出窗口，我有以下代码：

```
<html>
<body>

<p>Click the button to add resolution time with pending ticket.</p>

<button onclick="myFunction()">Pending</button>

<p id="demo"></p>

<script type="text/javascript">
function myFunction()
{
  var x;

  var name=prompt("Please enter Resolution Time","2099-12-31 23:59:59");

  if (name!=null)
  {
    x="resolution_time " + name ;
    document.getElementById("demo").innerHTML=x;
  }
}
</script> 
```

现在我无法连接这两个页面，也无法将新弹出窗口中的值传递到旧窗口。

我怎样才能做到这一点？

由于 PHP 是一种服务器端语言，所以它不能像作为客户端语言的 JavaScript 那样动态，你有什么更好的想法来做这件事吗？

谢谢你..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T19:36:21.863

您的登录页面（您的表单处理器页面 edit_ticket.php 在完成后应该重定向到的页面）应该接受 url 中的参数。基于此，您可以在新页面中编写 javascript 来决定是否打开挂起窗口。

例如：在edit_ticket.php的末尾，

```
header("location: landing.php?pending=1"); 
```

然后待定：

```
<?php 
    if (isset($_GET['pending']) && $_GET['pending'] ==1){
        ?><script type='text/javascript'>
            window.open('yourpopup.html');
        <?php
      }
?> 
```

# magento - Magento：项目库存可用性配置

> ID：11594977
> 
> 赞同：0
> 
> 时间：2012-07-21T18:50:51.627
> 
> 标签：magento, inventory, inventory-management

我想知道，在 Magento 中，当配置与给定产品相关的库存时，可以转到以下位置：

> Magento 管理面板 -> 目录 -> 管理产品 -> 点击产品 -> 产品信息 -> 库存

可以设置一个名为“库存可用性”的属性。我已经读到，即使前端缺货，此属性也允许产品在后端显示为有货（在 Brett Williams 的 Mastering Magento 一书中找到此信息）。

不应该反过来吗（即使后端缺货，项目也会在前端出现库存）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T19:17:22.433

您的问题有点令人困惑-我想您是在问如何在前端显示缺货产品（如果不是，请澄清一下？）。

因此，为了让缺货产品在前端可见，首先进入管理区域，然后：`System > Configuration`

从那里，找到`Catalogue`左侧的选项卡，然后单击该`Inventory`选项。

去库存`Options > Display Out of Stock Products`

*   **是**= 在前端显示产品，无论其库存状态如何
*   **否** = 隐藏缺货产品

确认`Stock Availability`一下，您在本节中提到的设置`Catalog -> Manage Products -> Click on Product -> Product Information -> Inventory`将允许您手动将产品设置为缺货 - 无论实际库存水平如何。例如，假设您的产品有 100 件库存。如果您将库存可用性设置为“缺货”，那么这将强制该项目缺货。

# c++ - eclipse-cdt 对 c++ 中另一个项目的引用

> ID：11594980
> 
> 赞同：1
> 
> 时间：2012-07-21T18:51:18.597
> 
> 标签：c++, eclipse-cdt

我是 C++ 新手，所以请原谅我的基本问题。我有项目 A（可运行的项目。主要项目）。我尝试使用单元测试框架，但我暂时放弃了，所以我尝试通过创建测试项目进行测试。

所以我为了创建测试项目做了以下操作，但是确实可以工作（编译错误）。1.参照测试项目新建项目。2.在gcc c++编译器/included目录中添加被测项目路径 3.在gcc c++链接器/libraries中添加被测项目debug目录的debug目录。（我知道测试的项目不是库项目，只是拍摄）。

尝试使用测试项目中的类型时出现未知引用的编译错误（包括添加和识别）。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:35:02.090

我通过在测试项目中添加链接源文件夹并在此链接源文件夹上添加过滤器来过滤主类来解决它。

# haskell - Haskell 模块命名约定

> ID：11594983
> 
> 赞同：35
> 
> 时间：2012-07-21T18:51:42.677
> 
> 标签：haskell, module, functional-programming, naming-conventions, code-organization

*我应该如何为程序而不是库*命名我的 Haskell 模块，并将**它们组织成层次结构**？

我正在制作一个名为 Luminosity 的光线追踪器。首先我有这些模块：

```
Vector Colour Intersect Trace Render Parse Export 
```

每个模块本身都很好，但我觉得这缺乏组织。

首先，我将每个模块都放在 下 `Luminosity`，例如`Vector`现在`Luminosity.Vector`（我假设这是 haskell 程序的标准？）。

然后我想：Vector和Color是独立的，可以复用，所以应该分开。但是它们太小了，不能变成图书馆。

他们应该去哪里？已经有（在hackage上） a `Data.Vector`and `Data.Colour`，所以我应该把它们放在那里吗？或者这会导致混淆（即使我将它们与其他本地进口组合进口）？如果不存在，应该是`Luminosity.Data.Vector`还是`Data.Luminosity.Vector`？我很确定我已经看到两者都使用过，尽管也许我只是碰巧看到了一个使用非常规结构的项目。

我还有一个简单的 TGA 图像导出器 ( `Export`)，它可以独立于 Luminosity。看起来正确的位置应该是`Codec.Image.TGA`，但同样，应该`Luminosity`在某个地方，如果是，在哪里？

[如果Haskell 项目的结构](http://www.haskell.org/haskellwiki/Structure_of_a_Haskell_project)或其他一些 wiki 解释了这一点，那就太好了。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-21T20:35:58.520

除非你的程序*真的*很大，**否则不要按层次组织模块。** 为什么不？因为尽管计算机擅长等级制度，但人却不擅长。人们擅长有意义的名字。如果您选择好的名称，您可以轻松地在一个平面名称空间中处理 150 个模块。

> 我觉得 [a flat name space] 缺乏组织。

等级组织本身并不是目的。为了证明将模块分成层次结构的合理性，您需要一个*原因*。好的理由往往与信息隐藏或重用有关。当您引入信息隐藏时，您就完成了库设计的一半，而当您谈论重用时，您实际上是在构建库。将一个大程序变身为“小程序加库”是软件*进化*的一个好策略，但看起来你才刚刚开始，你的程序还不够大，无法以这种方式进化。

这些问题在很大程度上与您使用的编程语言无关。我推荐阅读 David Parnas 关于产品线和程序系列的一些著作，以及 Matthias Blume 的被低估的论文[*Hierarchical Modularity*](http://people.cs.uchicago.edu/~blume/papers/cm-TOPLAS.pdf)。这些作品将为您提供一些关于等级何时开始服务于目的的更具体的想法。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-22T03:02:19.850

> 首先我把每个模块都放在`Luminosity`

我认为这是一个很好的举措。它向正在阅读代码的任何人阐明这些模块是专门为该`Luminosity`项目制作的。

如果您编写模块的目的是模拟或改进现有库，或者填补您认为缺少特定通用库的空白，那么在极少数情况下，请删除前缀并通用命名。有关这方面的示例，请参阅[管道](http://hackage.haskell.org/package/pipes)包的导出方式`Control.Monad.Trans.Free`，因为无论出于何种原因，作者对 Free monad 的现有实现都不满意。

> 然后我想，Vector和Color是非常独立的，可以重复使用，所以应该分开。但是它们太小了，无法分离到一个库中（分别为 125 行和 42 行）。他们应该去哪里？

如果您不制作单独的库，则可能将它们留在`Luminosity.Vector`and `Luminosity.Colour`。如果您确实创建了单独的库，请尝试向这些库的目标受众发送电子邮件，看看其他人认为这些库应该如何命名和分类。是否将它们拆分为单独的库完全取决于您以及您认为这些单独的库可能为其他人提供多少好处。

# asp.net - ASP 在使用 MasterPage 的数据表中的配置中以编程方式在特定位置创建按钮

> ID：11594985
> 
> 赞同：0
> 
> 时间：2012-07-21T18:51:42.777
> 
> 标签：asp.net

我正在做的是一个母版页，它有以下 ContactPlaceHolder

`<asp:ContentPlaceHolder id="ContactPlaceHolder_Header" runat="server">
</asp:ContentPlaceHolder>`

在这个占位符内部，我想根据推入 DataTable 的 sqlquer 的结果动态创建按钮。

所以基本上我正在寻找

```
foreach（ButtonsDT.Rows 中的 DataRow dtRow）
    {
按钮 btnNew = new Button();    
btnNew .ID = dtRow["ID"].Tostring()};    
btnNew .Text = "保存";  

    }
```

我意识到这就是您创建按钮的方式，但是如何将其放置在特定的 ContentPlaceHolder 中？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T18:53:54.373

只需使用：

ContactPlaceHolder_Header.Controls.Add(btnNew);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T19:00:18.190

首先，您应该获得对母版页内容占位符的引用，然后您可以在其中添加动态控件。

代码背后：

```
Control masterc = Master.FindControl("ContactPlaceHolder_Header");
foreach(DataRow dtRow in ButtonsDT.Rows)
{ 
    Button btnNew = new Button();    
    btnNew.ID = dtRow["ID"].Tostring()};    
    btnNew.Text = "Save";  

     // add button in panel or placeholder
    masterc.Controls.Add(btnNew);
} 
```

# .net - 如果我在 MFC 中有遗留代码，如何将其迁移到 .NET，以便我可以利用其他人的 .net 类和 .net API？

> ID：11594992
> 
> 赞同：1
> 
> 时间：2012-07-21T18:52:36.833
> 
> 标签：.net, visual-c++

我在 Visual C++ 6.0 中有遗留代码，并且由于它与 .NET API 不兼容，因此在扩展它方面受到了限制。我不确定如何迁移它。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T18:58:42.690

[如何从本机 Visual C++ 代码调用托管 DLL](http://support.microsoft.com/kb/828736)讨论从 C++ 调用 .net 托管代码

如果您想将 WPF 支持添加到您的 MFC 应用程序，请参见[此处](http://msdn.microsoft.com/en-us/library/ms744829.aspx)

您还可以使用[公共语言运行时支持重新编译您的应用程序，并通过](http://msdn.microsoft.com/en-us/library/k8d11d4s.aspx)**[C++/CLI](http://blogs.msdn.com/b/junfeng/archive/2006/05/20/599434.aspx)**调用 .net API

# boost - 通过 CRTP 基于基类中的 boost 智能指针为派生类成员分配内存

> ID：11594995
> 
> 赞同：0
> 
> 时间：2012-07-21T18:52:55.067
> 
> 标签：boost, shared-ptr, crtp, scoped-ptr, static-polymorphism

**这部分问题提供了背景信息，可以忽略**

我正在开发一个模板库，该库严重依赖于奇怪重复的模板模式的使用。类结构背后的想法是用户可以

1）。使用带有标准方法的预定义类。这些类是基类的非常简单的叶子，仅提供构造函数/析构函数，声明变量成员并将基类声明为友元。对派生类的变量成员进行操作的所有方法都在基类中定义。

2）。使用基类创建他/她自己的扩展。这种方法还允许用户引入他们自己的方法来操作相同的变量成员。

设计仅强制执行单级继承。

我的问题主要是关于第 2 条。在当前的实现中，用户必须隐式定义所有构造函数（即描述类的动态变量成员的内存分配的完整过程等）。

**问题**

下面的示例演示了对使用 CRTP 在基类构造函数中提供派生类的堆变量的内存分配定义的可能性的调查。

基类的一部分

```
template<class TLeafType, class MyClass> class sysBaseDiscreteTrajectoryPoint {
 ...

//one of the base constructors
sysBaseDiscreteTrajectoryPoint(const MyClass& MyClassInstance) {
    std::cout << "Base additional constructor called" << std::endl;
    std::cout << asLeaf().Point << std::endl;
    asLeaf().Point=new MyClass(MyClassInstance);
    std::cout << asLeaf().Point << std::endl;
}

TLeafType& asLeaf(void) {
return static_cast<TLeafType&>(*this);
}

...
}; 
```

派生类：

```
template<class MyClass> 
class sysDiscreteTrajectoryPoint: public sysBaseDiscreteTrajectoryPoint<sysDiscreteTrajectoryPoint<MyClass>, MyClass> {
...
friend class sysBaseDiscreteTrajectoryPoint<sysDiscreteTrajectoryPoint<MyClass>, MyClass>;
private:
    MyClass* Point;
public:
    sysDiscreteTrajectoryPoint(const MyClass& MyClassInstance): sysBaseDiscreteTrajectoryPoint<sysDiscreteTrajectoryPoint<MyClass>, MyClass>(MyClassInstance){
        std::cout << "Derived additional constructor called " << std::endl; 
        std::cout << Point << std::endl;
        std::cout << *Point << std::endl;
    }
...
} 
```

主要的：

```
int a(5);
sysDiscreteTrajectoryPoint<int> A(a); 
```

该代码产生以下输出：

```
Base additional constructor called
0x847ff4
0x8737008
Derived additional constructor called 
0x8737008
5
Derived destructor called 
Base destructor called 
```

输出表明该概念可能是可行的。但是，我有两个问题。

1）。我想确保我了解代码执行期间发生的所有过程。特别是，我对流程的效率感兴趣，因为我可能需要从上面介绍的类中实例化大量对象，并且我想了解会发生什么`Point`（是否有任何隐藏的重新定义？）

2）。这个问题与使用库`boost`为派生类的成员定义智能指针有关。当我尝试用 替换原始指针时`boost::shared_ptr`，在尝试通过基类为派生类的成员分配内存时收到分段错误错误。代码的重要部分如下所示。

基类的一部分：

```
template<class TLeafType, class MyClass> class sysBaseDiscreteTrajectoryPoint {
 ...

//one of the base constructors
sysBaseDiscreteTrajectoryPoint(const MyClass& MyClassInstance) {
    std::cout << "Base additional constructor called" << std::endl;
    std::cout << asLeaf().Point << std::endl;
    asLeaf().Point.reset(new MyClass(MyClassInstance));
    std::cout << asLeaf().Point << std::endl;
}

TLeafType& asLeaf(void) {
return static_cast<TLeafType&>(*this);
}

...
}; 
```

部分派生类：

```
template<class MyClass> 
class sysDiscreteTrajectoryPoint: public sysBaseDiscreteTrajectoryPoint<sysDiscreteTrajectoryPoint<MyClass>, MyClass> {
...
friend class sysBaseDiscreteTrajectoryPoint<sysDiscreteTrajectoryPoint<MyClass>, MyClass>;
private:
    boost::shared_ptr<MyClass> Point;
public:
    sysDiscreteTrajectoryPoint(const MyClass& MyClassInstance): sysBaseDiscreteTrajectoryPoint<sysDiscreteTrajectoryPoint<MyClass>, MyClass>(MyClassInstance){
        std::cout << "Derived additional constructor called " << std::endl; 
        std::cout << Point << std::endl;
        std::cout << *Point << std::endl;
    }
...
} 
```

主要的：

```
int a(5);
sysDiscreteTrajectoryPoint<int> A(a); 
```

该代码产生以下输出：

```
Base additional constructor called
0x28d324
Segmentation fault 
```

我也试过了`scoped_ptr`。但是，它在运行时失败，但出现了不同的错误：

```
Base additional constructor called
*** glibc detected *** ./TestSystem: free(): invalid pointer: 0x00d3fff4 ***
======= Backtrace: =========
/lib/i386-linux-gnu/libc.so.6(+0x6b961)[0xc4e961]
... 
```

我假设它与boost智能指针的操作细节有关。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:30:32.040

由于上述答案中给出的原因，在编译时的**地址**是已知的，但它本身仍未初始化，因为尚未调用派生类构造函数，因此没有机会隐式调用其实例成员'构造函数，包括. 因此，当您调用assign 时，它首先尝试在其包含的任何虚假地址处释放（并可能删除）该对象（以避免泄漏现有的引用），然后再分配和引用新对象。我相信，第一步就是导致段错误的原因。`shared_ptr``shared_ptr``shared_ptr``reset()``shared_ptr`

如果`shared_ptr`构造函数首先运行，它将使其包含的原始指针为空，从而防止后续`reset()`调用尝试释放虚假地址处的对象。

使用`asLeaf()`从基类构造函数访问派生类对于非 POD 类型本质上是不安全的，因为构造不完整（派生类的成员尚未构造）。顺便说一下，这就是为什么从基构造函数调用虚方法永远不会从更多派生类调用覆盖的原因——该语言明确防止在整个对象的构造完成之前调用覆盖，因为在大多数情况下，整个对象的状态是尚未定义。

可能有更好的解决方案适合您，但一种可行的方法是从基类的构造函数中删除该初始化代码，并将其放入`init()`派生类的每个实例化时显式调用的函数中。`init()`仍然可以存在于基类中，但它更安全，因为在它运行时所有内容都已初始化。

旁注：避免`shared_ptr`无故放入小物件。在这种情况下，您可能有合理的需求，但总的来说，我更喜欢将成员直接聚合到单所有者指针和单所有者指针到共享指针，因为开销会增加。单所有者指针涉及堆分配，共享指针还增加了计数/跟踪所有者的成本，以便在无法访问时删除对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T19:47:03.530

您怎么可能`Point`从基构造函数访问属于派生类的成员？调用基构造函数时，派生类部分不存在。也许它只是“偶然”起作用。

但它肯定会失败`shared_ptr`，因为您尝试在它有机会初始化之前分配它。

# ruby-on-rails - 如何在导轨中的控制器中精确获取数字

> ID：11594997
> 
> 赞同：2
> 
> 时间：2012-07-21T18:53:12.470
> 
> 标签：ruby-on-rails, controller, actionview

看到这个[问题](https://stackoverflow.com/questions/4426315/using-number-with-precision-on-controller-in-rails3)。答案指出您可以包含 ActionView::Helpers::NumberHelper 以使 number_with_precision 方法在您的控制器中工作。这也被描述为一种不好的做法。我正在将数据导出到 excel，这就是为什么我需要它作为我的控制器（或一些非视图文件）。有没有办法在控制器中生成的数字上获取逗号分隔符和小数位，而不必包含 actionview numberhelper？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T16:18:35.987

从 Rails 3 开始，您可以使用`view_context.number_with_precision`控制器中的视图助手。

在这里找到它：[http ://wowkhmer.com/2011/09/09/use-view-helper-methods-in-rails-3-controller/](http://wowkhmer.com/2011/09/09/use-view-helper-methods-in-rails-3-controller/)