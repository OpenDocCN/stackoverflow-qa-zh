# StackOverflow 问答 11229000-11229999

# php - PHP preg_match 一对数字或字母

> ID：11229001
> 
> 赞同：0
> 
> 时间：2012-06-27T14:51:15.773
> 
> 标签：php, preg-match

不久前，我制作了一个 preg_match 代码来检查车牌。

```
return preg_match("/^([0-9A-Za-z])"."([0-9A-Za-z])"."(\-([0-9A-Za-z])"."([0-9A-Za-z]))"."(\-([0-9A-Za-z])"."([0-9A-Za-z]))$/", $kenteken ); 
```

它像这样检查盘子：`u0-99-e5`数字或字母，a `-`，然后再次相同。
现在，根据我的老师的说法，这不是解决方案。它必须检查数字或字母的对。举个`99-oo-ii`例子。

如何更改代码以便检查这些代码？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:54:40.460

要匹配您已经捕获的内容，请使用反向引用。反向引用是`\1`,`\2`等等`\3`，其中数字是您引用的捕获子模式的位置。

例如，`/^([0-9A-Za-z])\1/`将匹配任何数字或字母，后跟相同的数字或字母。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:00:46.600

你不需要连接你的字符串，

```
return preg_match("/([0-9A-Za-z])\1-([0-9A-Za-z])\2-([0-9A-Za-z])\3/", $kenteken); 
```

# jquery - 背后一键

> ID：11229005
> 
> 赞同：0
> 
> 时间：2012-06-27T14:51:26.163
> 
> 标签：jquery, jquery-ui, jquery-selectors

我有以下代码应该从选定的 jQuery 选项卡中的跨度中获取文本，但它似乎总是落后于单击。即，如果我单击tab1，它不会显示任何内容，如果我单击tab2，它会显示来自tab1 内span 的文本。tab3 将显示 tab2 的跨度等。

不知道我做错了什么，但这是我目前拥有的代码：

jQuery：

```
$('[id^="tab"]').live('click', function() {
    alert($("li.ui-tabs-selected span").text())
}); 
```

HTML：

```
<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active" id="tab_group_44">
    <a href="#ui-tabs-2">
        <span>span content 1</span>
    </a>
</li>

<li class="ui-state-default ui-corner-top" id="tab_group_48">
    <a href="#ui-tabs-4">
        <span>span content 2</span>
    </a>
</li>

<li class="ui-state-default ui-corner-top" id="tab_pg_1">
    <a href="#ui-tabs-6">
        <span>span content 3</span>
    </a>
</li> 
```

选项卡代码：

```
$("#tabs").tabs({
    cache: true,
    ajaxOptions: {
        success: function(){
            $(".column").sortable({
                connectWith: '.column',
                start: function(e, ui){
                    ui.placeholder.height(ui.item.height());
                },
                revert: true,
                opacity: 0.7,
                forcePlaceholderSize: false,
                tolerance: 'pointer',
                handle: '.btnWidgetDarkMove, .btnWidgetLightMove, .btnWidgetBrightMove, .btnWidgetGrayMove, .btnWidgetOtherMove',
                update: function(event, ui) {
                    var that = this;
                    var column = $(this).closest("div").attr("class").split(" ");

                    if( $(that).closest("div").attr("id") !== "column_4" ) {

                        $.ajax({
                            url: '/ajax/save_homepage_widget_order.aspx',
                            type: 'POST',
                            data: { strTab:$("li.ui-tabs-selected").attr("id"), strColumn:column[1], strItems:$(that).sortable('serialize', {key: 'item', attribute: 'class', expression: /(\d+)/}) },
                            error: function(xhr, status, error) {
                                //console.log(xhr.responseText);
                            },
                            success: function() {
                                //should use a return value here to make sure move has been saved
                            }
                        });

                    }

                }
            });

        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:54:46.067

选项卡选择可能发生在您的点击事件之后，从而导致您体验到的行为。根据您设置选项卡的方式，您可能需要使用[选项卡选择事件](http://jqueryui.com/demos/tabs/#events)：

```
$( '[id^="tab"]' ).bind( "tabsselect", function(event, ui) {
  alert($("li.ui-tabs-selected span").text());
}); 
```

您还可以尝试在创建选项卡时初始化选择功能：

```
...
cache: true,
select: function(event, ui) { 
    alert($("li.ui-tabs-selected span").text());
} 
```

更新：您遇到的问题可能源于 jquery 类设置不正确。而是尝试直接访问选定的选项卡：

```
var selected = $( "#tabs" ).tabs( "option", "selected" ).children('span');
alert(selected.text()); 
```

# asp.net - Orchard CMS - 创建一个新的小部件

> ID：11229008
> 
> 赞同：0
> 
> 时间：2012-06-27T14:51:31.890
> 
> 标签：asp.net, orchardcms

我正在尝试编写 Orchard Widget，但页面（[Writing a Widget](http://docs.orchardproject.net/Documentation/Writing-a-widget)）似乎已过时。

具体来说，这段代码无法编译，因为 AlterTypeDefinition 在 1.4 上不存在：

```
ContentDefinitionManager.AlterTypeDefinition("MapWidget", cfg => cfg
.WithPart("MapPart")
.WithPart("WidgetPart")
.WithPart("CommonPart")
.WithSetting("Stereotype", "Widget")); 
```

关于取代它的任何指示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:11:34.010

对于遇到此问题的其他任何人-这是因为 AlterTypeDefinition 是一种扩展方法。

添加以下使用：

```
using Orchard.ContentManagement.MetaData; 
```

# c# - 从现有类实现中提取服务接口的模式

> ID：11229009
> 
> 赞同：1
> 
> 时间：2012-06-27T14:51:32.850
> 
> 标签：c#, wcf, oop, design-patterns, soa

我有一个现有的 Web 应用程序，其中 asp.net 客户端通过使用业务项目的 dll 来使用业务。商业项目的代码如下。

现在，我们需要将其设为 WCF Web 服务。我需要从现有的 BankAccountService 类创建一个服务接口（合同）。但是该类有一个重载的构造函数。此构造函数不能在服务接口中定义（因为 Web 服务不是面向对象的）。我可以在这里使用什么使其作为 Web 服务运行的最佳解决方案是什么？

我们是否需要创建任何外观而不是将 BankAccountService 作为服务实现？

注意：我了解在实现服务后提取接口不是一个好习惯。但是对于这种特殊情况，我们需要这样做。

注意：这是一个非常简单的应用程序，这是应用程序中唯一需要的功能。该网站将是唯一使用该服务的客户。

参考：

1 [定义构造函数签名的接口？](https://stackoverflow.com/questions/619856/interface-defining-a-constructor-signature)

代码

```
namespace ApplicationServiceForBank
{

public class BankAccountService
{

RepositoryLayer.IRepository<RepositoryLayer.BankAccount> accountRepository;
ApplicationServiceForBank.IBankAccountFactory bankFactory;

public BankAccountService(RepositoryLayer.IRepository<RepositoryLayer.BankAccount> repo, IBankAccountFactory bankFact)
{
    accountRepository = repo;
    bankFactory = bankFact;
}

public void FreezeAllAccountsForUser(int userId)
{
    IEnumerable<RepositoryLayer.BankAccount> accountsForUser = accountRepository.FindAll(p => p.BankUser.UserID == userId);
    foreach (RepositoryLayer.BankAccount repositroyAccount in accountsForUser)
    {
        DomainObjectsForBank.IBankAccount acc = null;
        acc = bankFactory.CreateAccount(repositroyAccount);
        if (acc != null)
        {
            acc.BankAccountID = repositroyAccount.BankAccountID;
            acc.accountRepository = this.accountRepository;
            acc.FreezeAccount();
        }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:48:11.183

如果要将类公开为 WCF 服务，则服务本身需要在构造函数中构建必要的对象，`RepositoryLayer.IRepository<RepositoryLayer.BankAccount>`即 `ApplicationServiceForBank.IBankAccountFactory`. 这些是用于检索服务消费者应该不可知的数据的对象。

在这种情况下，您可以通过 WCF 公开`BankAccountService`并创建各种方法来定义检索数据所需的存储库/工厂类型：

```
[ServiceContract]
public interface IBankAccountService
{
    [OperationContract]
    void FreezeAllAccountsForUserByAccountTypeFoo(int userId);

    [OperationContract]
    void FreezeAllAccountsForUserByAccountTypeBar(int userId);

    [OperationContract]
    void FreezeAllAccountsForUserByAccountTypeEtc(int userId);
} 
```

由于听起来您正在控制服务的双方，因此另一种选择是将枚举传递给定义所需存储库/工厂类型的方法：

```
public enum RepoFactory
{
    Foo, Bar, Etc,
}

[ServiceContract]
public interface IBankAccountService
{
    [OperationContract]
    void FreezeAllAccountsForUser(int userId, RepoFactory repoFactory);
} 
```

# java - 如何在junit和eclipse中使用toString

> ID：11229015
> 
> 赞同：-6
> 
> 时间：2012-06-27T14:51:45.987
> 
> 标签：java, eclipse, junit, tostring

我是 Java 新手，在实现 toString 时遇到问题。有人能帮我吗？toString 返回包名和调用类名而不是结果意图。我正在使用 Eclipse 3.7.2。在我使用 toString 的代码中的不同位置，它返回正确的结果

我的文件是 MyLibraryTest.java

```
 public void testToString(){
    setup();
    addItems();
    //assertEquals("Test: 2 books; 2 people.", ml.toString());
    String results = ml.toString();
    assertEquals("Test: 2 books; 2 people.", results);

}

    results = org.totalBeginner.tutorial.MyLibraryTest.testToString 
```

我想知道我做错了什么？

这是 setup() 的代码

```
 public void setup(){
    b1 = new Book("Book1");
    b2 = new Book("Book2");

    p1 = new Person();
    p2 = new Person();

    p1.setName("Fred");
    p2.setName("Sue");

    ml = new MyLibrary("test");

    } 
```

这是 addItems() 的代码

```
private void addItems() {
        ml.addBook(b1);
        ml.addBook(b2);
        ml.addPerson(p1);
        ml.addPerson(p2);
         } 
```

这里我如何实现 toString()

public String toSrting(){ //return this.getName() + ": " + this.getBooks().size() + " books; " + this.getPeople().size() + " people."; return "测试：2 本书；2 人。";
}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:56:37.477

由于拼写错误，您实际上并没有覆盖[toString](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#toString%28%29)方法。相反，您定义了 toSrting 方法。如您所见，字符*t*和*r*的顺序是交换的。这就是直接从`Object.toString`.

# tomcat - Tomcat 在不同机器上的行为不同

> ID：11229024
> 
> 赞同：2
> 
> 时间：2012-06-27T14:52:10.670
> 
> 标签：tomcat, web, vaadin

我正在使用 Vaadin 框架，我的 web.xml 如下所示：

```
<servlet>
    <servlet-name>myservletname</servlet-name>
    <servlet-class>com.vaadin.terminal.gwt.server.ApplicationServlet</servlet-class>
    <init-param>
        <description>
        Vaadin application class to start</description>
        <param-name>application</param-name>
        <param-value>MyApplication</param-value>
    </init-param>
    <init-param>
        <description>
        Application widgetset</description>
        <param-name>widgetset</param-name>
        <param-value>MyWidgetset</param-value>
    </init-param>
</servlet>
<servlet-mapping>
    <servlet-name>myservletname</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>/static/*</url-pattern>
</servlet-mapping> 
```

此外，我的应用程序目录如下所示：

```
 .
    ├── (various xml config files)
    ├── META-INF
    │   └── ...
    ├── static
    │   ├── styles.css
    │   ├── welcome_de.html
    │   └── welcome_fr.html
    ├── trustStore.jks
    ├── VAADIN
    │   └──   ...
    └── WEB-INF
        ├── lib
        │   └── (various libraries)
        └── web.xml 
```

`welcome_de.html`我的目标是`welcome_fr.html`静态访问。到现在为止还挺好。在我直接从 Eclipse（tomcat 版本 6.0.32）运行 Tomcat 实例的测试机器上，一切正常。我可以使用 URL 访问该文件：

`http://localhost:8080/MyApplication/static/`

如果我将 WAR 文件导出并部署到生产性 Tomcat 服务器，它的行为会有所不同。

在我的生产服务器（tomcat 版本 6.0.18）上访问相同的文件时，我收到错误 404。出于调试目的，我为servlet启用了该`listing`属性。`default`我发现我只能`welcome_de.html`使用

`http://productive:8080/MyApplication/static/static/welcome_de.html`. 如果我使用与此处测试相同的链接，我将获得我的 web 应用程序的内容。

不知何故，该文件夹`static`似乎嵌套了一层。

任何的想法 ？为什么两台机器的行为不同 - 而没有主要版本差异？

不幸的是，将生产服务器升级到版本 6.0.32 不是一种选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T23:09:41.710

这真的**只是一个猜测**，所以请不要怪我。

当我尝试使用 eclipse 和 Tomcat 加载不同类型的文件时，我遇到了类似的情况。在本地 eclipse Tomcat 上它运行得非常好，而在真正的应用程序服务器上却没有。

最后的原因，至少对我来说，是我如何在内部加载文件。

我发现当我使用 getResourceAsStream("path from project in working space") 方法时，我的问题不再发生，例如（我的应用程序中的代码片段，我也使用 OpenNLP）

```
 try (InputStream modelIn = getClass().getResourceAsStream(
            "/documentProcessor/algorithms/pos-maxent.bin")) {
        ...
    } 
```

“documentProcessor”、“algorithms”等只是我希望包含在我的 Web 应用程序中的工作区中项目的外部文件的文件路径。

我不知道您如何将 *.html 文件包含到您的 vaadin 应用程序中，但如果您以某种方式加载它们，可能值得一试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T06:32:21.820

好吧 - 我以不同的方式解决了它。我只是让 Vaadin 提供文件，然后使用 Filepath 读取它。它似乎有效，尽管可能有更好的解决方案。

# c# - 如何从服务端终止会话？

> ID：11229030
> 
> 赞同：2
> 
> 时间：2012-06-27T14:52:35.453
> 
> 标签：c#, .net, wcf

假设您已经创建了一个双工服务——例如使用 NetTcpBinding——并且它被配置为作为[发布-订阅模式](http://msdn.microsoft.com/en-us/library/ms752254.aspx)为新客户端的每个新订阅创建一个新会话：每次新客户端连接时，都会创建一个新服务实例. 如果客户端想要断开连接，它调用的`Unsubscribe()`方法足以结束其会话。

还假设服务有一个方法来验证客户端是否处于活动状态——也就是说，客户端必须定期调用此方法：如果服务检测到客户端不再处于活动状态，则服务决定与客户端断开连接是有意义的。客户。类似地，如果用户决定关闭托管它的应用程序，服务可能会决定终止所有会话。

*   如何从服务端终止会话？
*   客户端（即自动生成的代理）如何检测到服务想要断开连接或正在断开连接？它会抛出异常吗？

**更新**

我阅读了有关`ICommunicationObject`接口、`CommunicationObject`类、`IDisposable`接口等的信息，所以我尝试使用`ICommunicationObject`与回调相关的一个：

```
ICommunicationObject obj = (ICommunicationObject)callback;
obj.Close(); 
```

这样，会话实例被干净地销毁（`Dispose()`调用该方法后调用析构函数`Close()`），如果客户端尝试发送请求，则`ProtocolException`在其上启动：

> 此通道不能再用于发送消息，因为输出会话由于服务器启动的关闭而自动关闭。通过将 DispatchRuntime.AutomaticInputSessionShutdown 设置为 false 来禁用自动关闭，或者考虑使用远程服务器修改关闭协议。

同样，使用上面的代码但调用`Abort()`方法，服务实例被销毁，并且`CommunicationObjectFaultedException`在客户端抛出异常：

> 通信对象 System.ServiceModel.Channels.ServiceChannel 不能用于通信，因为它处于故障状态。

我得到的行为几乎是我想要的，但我不确定这是否是正确的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:11:22.590

如果您想因不活动而关闭会话，您最好利用可靠的会话不活动超时[http://msdn.microsoft.com/en-us/library/system.servicemodel.reliablesession.inactivitytimeout.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.reliablesession.inactivitytimeout.aspx)，这里的基础设施将自动关闭为你开会。否则，对于手动方法，您可以尝试 OperationContext.Current.InstanceContext.Close() 或 OperationContext.Current.InstanceContext.Abort()

# php - Symfony 2.0：如何正确地将用户身份验证委托给单独的服务？

> ID：11229032
> 
> 赞同：0
> 
> 时间：2012-06-27T14:52:39.423
> 
> 标签：php, security, authentication, symfony

在我正在帮助开发的 Symfony 2.0 Web 应用程序中，我们使用自定义编写的服务进行用户身份验证，该服务与应用程序本身分开使用。我需要使用此服务为应用程序实施身份验证\授权。

我已经阅读了 Symfony 2 书中的“安全”一章，以及有关创建自定义用户和身份验证提供程序的食谱条目。不幸的是，我似乎不能只创建自定义用户提供程序，因为我无法使用该服务通过登录来检索用户数据。我只能提交用户的登录名/密码，看看服务是否对他进行了身份验证。

这就是为什么我想编写一个自定义身份验证提供程序的原因。问题是，在阅读了说明书条目之后，我不完全确定如果我编写一个根本不使用用户提供程序的身份验证提供程序，那么使用身份验证提供程序的框架代码将不会尝试创建 - 并制作使用 - 用户提供者（我想如果可以的话，它只会实例化并使用一些默认的？）。

有人对这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:45:05.633

听起来你在正确的轨道上。您将创建[自定义 Authentication Provider](http://symfony.com/doc/master/cookbook/security/custom_authentication_provider.html)并创建[自定义 User Provider](http://symfony.com/doc/current/cookbook/security/custom_provider.html)。由于您的用户提供者似乎实际上不需要访问任何数据源，因此它将是相当空的。可能只是返回一个带有给定用户名的新用户对象。

```
public function loadUserByUsername($username)
{
    return new User($username);
} 
```

# javascript - 几个可配置的下拉列表

> ID：11229034
> 
> 赞同：0
> 
> 时间：2012-06-27T14:52:42.960
> 
> 标签：javascript, list, drop-down-menu

我正在寻找一个下拉列表脚本，该脚本会自动更新从初始下拉列表选择中所做的选择派生的几个子下拉列表中下拉列表下方的内容。

[我在http://www.javascriptsource.com/forms/dynamic-drop-down-list.html](http://www.javascriptsource.com/forms/dynamic-drop-down-list.html)上试用了该脚本，并花了 6 个小时试图使它对我有利，但我得出的结论是，我是肯定做错了什么，需要帮助。

我想从一个下拉列表开始，其中包含可以构建的计算机的“类”。例如; 终极，高，中，低。当用户选择其中一个选项时，下拉下拉解锁，给出新的选项，以及选择该选项时，以下更新等，等等，直到表单末尾的最后一项。

这是一个允许用户为自己构建 PC 的项目，但由于主板具有某些限制，例如 RAM 数量或 CPU 容量，容纳 RAM/CPU 的下拉菜单必须适应所选主板， ETC。

我想到的基本布局是；

**请选择一个班级**

[下拉1“类”]

*   最终的
*   高的
*   中等的
*   低的

【下拉2“主板”】

*   内容

[下拉3“内存”]

*   内容

[下拉4“CPU”]

*   内容

[下拉5“光驱”]

*   内容

[下拉6“硬盘”]

*   内容

【下拉7“机箱”】

*   内容

【下拉8“电源”】

*   内容

等等。因此，假设您的主板仅支持 8GB RAM，那么 RAM 子下拉菜单将显示 2GB、4GB 和 8GB 选项，但不会显示 16GB 或 32GB 等附加选项。下拉菜单不应该被锁定为只有 1 个下拉菜单，而是在整个过程中保持灵活，以防主板/cpu/ram 不兼容，因此需要锁定某些项目。

也许列出可以在“终极”类别下制作的物品清单，然后降到“低”？

如果有人能在这方面帮助我，我将不胜感激，甚至指出我已经完成上述类似项目的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:55:54.900

我相信这就是您正在寻找的：

[链式选择菜单](http://www.dynamicdrive.com/dynamicindex1/chainedmenu/index.htm)

# silverlight-4.0 - Silverlight 4 在打开项目时出错

> ID：11229039
> 
> 赞同：0
> 
> 时间：2012-06-27T14:52:53.727
> 
> 标签：silverlight-4.0

我在 VS 2010 中安装了 Silverlight4，它运行得很好，但是现在当我打开它时，我得到了这个错误：

```
System.NullReferenceException
Object reference not set to an instance of an object.
   at Microsoft.Windows.Design.Platform.SilverlightMetadataContext.SilverlightXamlExtensionImplementations.<GetXmlNamespaceCompatibilityMappings>d__8.MoveNext()
   at MS.Internal.Design.Metadata.ReflectionProjectNode.BuildSubsumption()
   at MS.Internal.Design.Metadata.ReflectionProjectNode.SubsumingNamespace(Identifier identifier)
   at MS.Internal.Design.Markup.XmlElement.BuildScope(PrefixScope parentScope, IParseContext context)
   at MS.Internal.Design.Markup.XmlElement.ConvertToXaml(XamlElement parent, PrefixScope parentScope, IParseContext context, IMarkupSourceProvider provider)
   at MS.Internal.Design.DocumentModel.DocumentTrees.Markup.XamlSourceDocument.FullParse(Boolean convertToXamlWithErrors)
   at MS.Internal.Design.DocumentModel.DocumentTrees.Markup.XamlSourceDocument.get_RootItem()
   at Microsoft.Windows.Design.DocumentModel.Trees.ModifiableDocumentTree.get_ModifiableRootItem()
   at Microsoft.Windows.Design.DocumentModel.MarkupDocumentManagerBase.get_LoadState()
   at MS.Internal.Host.PersistenceSubsystem.Load()
   at MS.Internal.Host.Designer.Load()
   at MS.Internal.Designer.VSDesigner.Load()
   at MS.Internal.Designer.VSIsolatedDesigner.VSIsolatedView.Load()
   at MS.Internal.Designer.VSIsolatedDesigner.VSIsolatedDesignerFactory.Load(IsolatedView view)
   at MS.Internal.Host.Isolation.IsolatedDesigner.BootstrapProxy.LoadDesigner(IsolatedDesignerFactory factory, IsolatedView view)
   at MS.Internal.Host.Isolation.IsolatedDesigner.BootstrapProxy.LoadDesigner(IsolatedDesignerFactory factory, IsolatedView view)
   at MS.Internal.Host.Isolation.IsolatedDesigner.Load()
   at MS.Internal.Designer.DesignerPane.LoadDesignerView() 
```

我有运行时版本。有什么建议么？:-)

# javascript - 如何获得用css旋转转换的元素的位置

> ID：11229040
> 
> 赞同：24
> 
> 时间：2012-06-27T14:52:59.557
> 
> 标签：javascript, css, rotation, css-transforms

`rotate`在应用过滤器后，我在获取 div 的位置时遇到问题。我有一端的位置、它的高度和旋转的角度，但是在检查了这个过滤器在 MDN 上的实际作用之后 ("[cos(angle) sin(angle) -sin(angle) cos(angle) 0 0]") 我还是不知道怎么破解。

例子 ：

![在此处输入图像描述](../Images/242a78d0569bc690b362187d476fb08a.png)

我感兴趣的 div 是虚线。它当时的造型是：

`left: 80px; top: 12px; height: 69.5122px; width: 2px; -moz-transform: rotate(-1.21366rad);`

（`top`/`left`描述它开始的位置。）我试图得到`top`/`left`结束的位置。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-01T23:42:53.440

根据您当前的问题和您要求的确认：

```
var x = termin.top + Math.cos(angle) * div.height;
var y = div.left + Math.sin(angle) * div.height; 
```

该解决方案可以在另一个[**SO Answer**](https://stackoverflow.com/a/7566192/1195891) for a *different question*中找到，在此处进行了增强：

```
// return an object with full width/height (including borders), top/bottom coordinates
var getPositionData = function(el) {
    return $.extend({
        width: el.outerWidth(false),
        height: el.outerHeight(false)
    }, el.offset());
};

// get rotated dimensions   
var transformedDimensions = function(el, angle) {
    var dimensions = getPositionData(el);
    return {
        width: dimensions.width + Math.ceil(dimensions.width * Math.cos(angle)),
        height: dimensions.height + Math.ceil(dimensions.height * Math.cos(angle))
    };
}; 
```

这是一个提供**实时更新**功能的**交互式**jsFiddle 。您将能够在您控制的**CSS3 旋转**过程结束时看到和值。**`getPositionData();`
`top``left`**

 ******参考：**   [**jsFiddle**](http://jsfiddle.net/Y8d6k/)

**状态更新：**上面的 jsFiddle 适用于**0-90deg**并且可以被批准用于所有角度和不同的单位，例如[**rad、grad 和 turn**](http://www.impressivewebs.com/alternative-units-css3-rotate-transforms/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T21:13:50.307

尝试使用`element.getBoundingClientRect()`

根据[MDN](https://developer.mozilla.org/en/DOM/element.getBoundingClientRect)：

> 从 Gecko 12.0 (Firefox 12.0 / Thunderbird 12.0) 开始，在计算元素的边界矩形时会考虑 CSS 变换的效果。****

# google-plus - 谷歌加号按钮“>9999”+1

> ID：11229044
> 
> 赞同：0
> 
> 时间：2012-06-27T14:53:11.157
> 
> 标签：google-plus, google-plus-one

我们的网站上有 +1 按钮，提供不同语言版本。问题在于，在每种语言中，按钮都显示“> 9999”+1（或类似的东西），而不是像英语那样的实际+1数量。英文按钮显示 31k，这也是我想要的其他语言。

为什么英文的显示实际数量而其他语言没有？有没有办法显示 +1 的实际数量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:58:28.157

我想它与后缀有关`k`。它代表`kilo`并大致意思是“千”，我想并非所有语言都将其用作后缀。所以 31k 对他们来说没有任何意义，而 >9999 至少意味着什么。

# sql - 如何过滤连接两个表的 SQL 查询，其中一个项目与它所连接的太多项目相关联？

> ID：11229046
> 
> 赞同：3
> 
> 时间：2012-06-27T14:53:30.837
> 
> 标签：sql

有两个表：A，行（row_id，column1，...）和 B，行（column2，...）。

```
Select * from A
   join B on A.column1 = B.column2 
```

表 B 中可以有 1 条或多条记录，其中 column2 = A.column1。B 中的每条记录在 A 中都有匹配的记录，但并非 A 中的每条记录都有 B 中的记录。

什么是获取`row_id`表 A 中的有效查询，表 B 中有超过 100 条记录与之关联？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T14:55:46.500

这将为您提供表 A 中的所有列：

```
select A.*
from A
inner join (
    select column2
    from B
    group by column2
    having count(*) > 100
) BC on A.column1 = BC.column2 
```

如果您只需要 ID，则可以执行以下操作：

```
select column2
from B
group by column2
having count(*) > 100 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T14:56:03.147

```
SELECT `row_id`
FROM `A`
JOIN `B` ON (`B`.`column2` = `A`.`column1`)
GROUP BY `A`.`row_id`
HAVING COUNT(*) > 100 
```

# javascript - 为什么成功：function() 不起作用

> ID：11229058
> 
> 赞同：1
> 
> 时间：2012-06-27T14:53:58.590
> 
> 标签：javascript, jquery, asp.net, ajax

我对 J-QUERY 和 JavaScript 还很陌生。我有几个表单，它们使用一些 JavaScript 来收集数据并提交到一个 asp 页面来处理调用 T-SQL 过程的请求（编辑用户数据、添加信息、删除等）。该过程运行良好，但我需要添加一些检查和警报消息，但我没有成功。这是一个示例

```
$("#add-user-form").dialog({
    autoOpen: false,
    height: 300,
    width: 420,
    modal: true,
    buttons: {
        'Add User': function () {
            var bValid = true;
            allFields.removeClass('ui-state-error');`enter code here`
            bValid = bValid && checkLength(loginname, "Login Name", 3, 10);
            if (bValid) {
                var statusdataString = '?section=adduser&loginname=' + loginname.val() + '&fullname=' + fullname.val() + '&type=' + type.val();
                $(this).dialog('close');
                $.ajax({
                    type: "GET",
                    url: "admin.asp" + statusdataString
                });
            }
            window.location.reload();
        },
        Cancel: function () {
            $(this).dialog('close');
        }
    },
    close: function () {
        allFields.val('').removeClass('ui-state-error');
    }
}); 
```

这是调用的 asp 部分

```
if (section = "adduser") then
   edituser_sql =  "Exec add_user "  & "'" & request("loginname") & "','" &       
   request("fullname") & "'," & request("type") 
   Conn.execute edituser_sql
   Conn.close
   set Conn = nothing 
   set dsn = nothing 

end if 
```

现在这是我的问题：

1.  一旦所有这些都完成后，我需要发出警报说“用户添加”或“重复用户”等。我尝试在成功后添加它：像这样

    $.ajax({ type: "GET", url: "admin.asp"+statusdataString, success: function(){alert("something")}

    });

但它不起作用。我还尝试保存过程返回的结果，它告诉我是否添加了用户，然后在 asp 代码中执行此操作

```
if results= -1 then 
%>
<Script type="text/JavaScript">
alert("something");
</script>
<% 
```

但这也行不通。我想我理解这个过程，但我不确定所有这些代码是如何工作的，只是点点滴滴。您的帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:00:05.923

成功处理程序不工作的最可能原因是 Web 服务调用不成功。

尝试向`error:`您的 ajax 调用添加一个参数，类似于我的示例。我正在使用 POST 到 asmx 服务，但您可以将该`error:`部分复制到您的函数中。

```
 $.ajax({
        type: "POST",
        async: true,
        url: "../webserviceurl",
        data: parameters,
        contentType: "  application/json; charset=utf-8",
        dataType: "json",
        success: function (response) {
            // Show any returned message alerts
            return;
        },
        error: function (ex) {
            alert("error" + ex.toString());
        }
    }); 
```

然后就可以调试web请求失败的原因了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:02:45.447

我会让您的 ASP 脚本返回一些 XML 或 JSON 来描述您希望页面执行的操作，而不是让您的 ASP 页面输出一些 javacsript。

编辑：我已经使 ASP 代码更加具体，并且我还更改了 javascript 以更好地反映如果您使用，例如，knockoutjs 来修改页面，您可能会做什么来操作页面。

在您的 ajax 函数中，您可以这样做：

```
'Add User': function () {
    //....stuff you did...
    $.ajax({
        url: "YourUrl....",
        dataType: "json",
        success: function(response) {
            if (response.status) {
                alert("User added!");
                //do some stuff with response.user
                //if using knockoutjs, just add it to an observable which you would have
                //previously put in the class myViewModel (users is an observable array)
                //this would magically make it appear in your user list
                myViewModel.users.push(new UserModel(response.user));
            }
            else {
                alert("User not created");
            }
        }
        error: function (error) {
            alert(error);
        }
    });
///the rest of your function 
```

此外，您将不得不摆脱页面重新加载部分。

您的 ASP 将返回一些格式如下的 JSON，以与我刚刚编写的内容兼容：

```
%>
{
    status : <% response.write(response > -1) %>
    user : { <% response.write(aStringInWhichYouHavePutSomeInfoAboutTheUser) %> }
}
%> 
```

另外，我不太了解 ASP，所以我根据我所知道的猜测上面的语法：p

# java - Jetty/Tomcat 需要用 Java 构建网页吗？

> ID：11229062
> 
> 赞同：1
> 
> 时间：2012-06-27T14:54:07.737
> 
> 标签：java, http, servlets, jetty

我正在尝试使用 Java 学习 Web 编程，并且遇到了一堆支持 servlet 来创建网页的框架，例如 Jetty 和 Apache Tomcat。

如果我想创建一个只有一个按钮（不是文本）的网页，是否需要 Jetty/Tomcat？根据我的阅读，似乎所有教程都使用 Jetty/Tomcat 和 servlet 来创建一个简单的基于文本的网页。

如果我希望我的服务器做的只是接受传入连接并在网页上显示一个按钮（例如，用户只需键入 hhtp://1.1.1.1:8080 并显示一个带有按钮的网页），是 Jetty还是需要Tomcat？没有他们我能做到吗？

如果是这样，有没有例子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T15:07:46.107

正如 iNan 所指出的，Apache HTTP 对于纯 HTML 来说已经足够了。

但是，我认为您是以最简单的形式引用 Java 网站。如果是这样，请尝试编写 Java Servlet。servlet 只是 HTTP 响应和请求的入口点。Servlet 最简单的形式如下所示：

（复制自[http://www.mkyong.com/servlet/a-simple-servlet-example-write-deploy-run/](http://www.mkyong.com/servlet/a-simple-servlet-example-write-deploy-run/)）

```
package com.mkyong;

import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class ServletDemo1 extends HttpServlet{

public void doGet(HttpServletRequest request, HttpServletResponse response)
throws IOException{
    PrintWriter out = response.getWriter();
    out.println("<html>");
    out.println("<body>");
    out.println("<h1>Hello Servlet Get</h1>");
    out.println("</body>");
    out.println("</html>"); 
     }
 } 
```

显然，在此过程中还需要设置其他一些东西（请参阅上面的链接），但这是最简单的一个。如果你想制作一个更复杂的基于Java的网站，你可以使用JSP（Java Server Page）。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T15:09:12.310

如果您想提供网页服务，那么您将始终需要某种形式的 Web 服务器应用程序或库来侦听端口 80 或 8080 并处理传入的 http 请求。

Jetty 或 Tomcat 只是使您能够执行此操作的两个（流行、成熟、经过充分测试）选项。还有很多其他选项 - 参见例如[http://java-source.net/open-source/web-servers](http://java-source.net/open-source/web-servers)

如果你真的想要，你可以使用[Java NIO](http://docs.oracle.com/javase/1.4.2/docs/guide/nio/)自己编写一个 Web 服务器组件。但这将是很多工作，绝对不推荐给初学者......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T15:16:26.670

Java servlet 以及 ASP 或 PHP 用于实现服务器端交互性，这意味着您不希望只为客户端（浏览器）提供纯 HTML，而是通过生成一个*ad-hoc*网页，例如通过在其中插入数据库中的数据。

因此，如果您查看 servlet 的代码，它就是这样做的：生成 HTML（或其他格式，但这不是这里的重点）。

servlet 本身只包含让您生成此 HTML 的逻辑，但所有无聊的东西，如网络连接、HTTP 请求和响应管理、cookie 处理等显然不是由您的 servlet 管理的。因为其他一些软件已经在管理它，并为您的应用程序提供这些服务。这就是像 Tomcat 或 Jetty 这样的服务器所做的。因此，该过程的入口点是服务器，它调用您的 servlet 以动态生成您想要传输给客户端的 HTML，获取结果并自行管理所有其余部分，而无需您关心它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T15:01:29.830

要提供静态 HTML 内容并响应 HTTP 请求，HTTP 服务器就足够了。您不需要像 Tomcat 这样的网络服务器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-05T08:54:48.770

从某种意义上说，Tomcat 或 Jetty 不是我们使用的框架。这些是严格意义上的“servlet 容器”或流行的“服务器”。

Java 世界有很多框架做 web 应用程序。简单的工作您可以在没有 fw 的情况下制作，但更大的项目是其他历史。

两个术语“框架”（程序员开发他的工作的环境）都有 JSP 或纯 Java 编码。旧的也需要很多 XML，servlet 3 标准可以使用更多的注解。

# mysql - SQL查询连接一列并有一堆其他列？

> ID：11229068
> 
> 赞同：3
> 
> 时间：2012-06-27T14:54:14.617
> 
> 标签：mysql, sql

> **可能重复：**
> [连接行值 T-SQL](https://stackoverflow.com/questions/1874966/concatenate-row-values-t-sql)

我有一张这样的桌子：

```
ref_num   name      type       route
----------------------------------------
1         A         W          401
2         B         X          401
3         C         E          401
3         C         E          411
4         D         Z          401
5         K         W          701
5         K         W          991
5         K         W          556
5         K         W          401
6         L         X          401
7         D         Y          401
7         D         Y          411
7         D         Y          680
8         E         Z          401 
```

我想要这样的结果：

```
ref_num   name      type       routes
----------------------------------------
1         A         W          401
2         B         X          401
3         C         E          401,411
4         D         Z          401
5         K         W          701,991,556,401
6         L         X          401
7         D         Y          401,411,680
8         E         Z          401 
```

如果有人可以给我一个查询示例以获得所需的结果，将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T14:56:51.140

```
select ref_num, name, type, group_concat(routes)
from your_table
group by ref_num 
```

在 MySQL 中，您不必 `group by`选择所有值。其他值可能会随机选择。但是，如果一组中的其他值相同，那么您不必担心。OP的问题就是这种情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T14:59:59.987

您可以将它们与[`GROUP_CONCAT`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)with连接起来`GROUP BY`，例如：

```
SELECT ref_num, name, type, GROUP_CONCAT(routes SEPARATOR ', ')   
FROM TableNAme 
GROUP BY ref_num, name, type 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:03:40.770

我认为 WM_CONCAT 会这样做：

```
SELECT REF_NUM, NAME, TYPE, WM_CONCAT(ROUTE) 
FROM ROUTES
GROUP BY REF_NUM, NAME, TYPE; 
```

# c++ - 重载运算符 == 抱怨“必须只采用一个参数”

> ID：11229074
> 
> 赞同：11
> 
> 时间：2012-06-27T14:54:23.810
> 
> 标签：c++

我试图重载`operator==`，但编译器抛出以下错误：

```
‘bool Rationalnumber::operator==(Rationalnumber, Rationalnumber)’ must take exactly one argument 
```

我的一小段代码如下：

```
bool Rationalnumber::operator==(Rationalnumber l, Rationalnumber r) {
  return l.numerator() * r.denominator() == l.denominator() * r.numerator();
} 
```

宣言：

```
bool operator==( Rationalnumber l, Rationalnumber r ); 
```

有谁知道为什么会抛出错误？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-27T14:58:34.693

如果`operator==`是非静态数据成员，则应该只接受一个参数，因为比较将是隐式`this`参数：

```
class Foo {
  bool operator==(const Foo& rhs) const { return true;}
}; 
```

如果要使用自由运算符（即不是类的成员），则可以指定两个参数：

```
class Bar { };
bool operator==(const Bar& lhs, const Bar& rhs) { return true;} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T15:00:04.683

作为***成员***运算符重载，它应该只接受一个参数，另一个是`this`.

```
class Foo
{
    int a;

public:
    bool operator==(const Foo & foo);
};

//...

bool Foo::operator==(const Foo & foo)
{
    return a == foo.a;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T14:58:01.900

您应该将您的 operator== 从 RationalNumber 删除到其他地方。因为它是在一个类中声明的，所以它被认为是第一个参数。从语义上可以看出，您向编译器提供了 3 个参数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-29T20:33:05.997

```
friend bool operator==( Rationalnumber l, Rationalnumber r ); 
```

当您将其声明为非成员函数时，它可以接受两个参数。当你将它声明为成员函数时，它只能接受一个参数。

# c# - 在 C# 中按特定顺序搜索具有序列号的文件

> ID：11229077
> 
> 赞同：0
> 
> 时间：2012-06-27T14:54:35.270
> 
> 标签：c#, itextsharp

我有一个包含超过 200K 图像的文件夹。一些图像将遵循以下文件名模式：

```
5093_1.jpg
5093_2.jpg
5093_3.jpg
5093_4.jpg
5093_5.jpg
5094_1.jpg
5094_2.jpg
5094_3.jpg 
```

我的计划是使用 iTextSharp 将每组图像合并到 PDF 中。当我说一组图像时，下面的那些

```
5093_1.jpg
    5093_2.jpg
    5093_3.jpg
    5093_4.jpg
    5093_5.jpg 
```

将变为 5093.pdf 和剩余的 5094.pdf。

像下面的东西

```
iTextSharp.text.Document Doc = new iTextSharp.text.Document(PageSize.LETTER);
                    //Store the document on the desktop 
                    string PDFOutput = Path.Combine(PDFFolder, "PDFs", tmp[0] + "_" + tmp[1].Replace(".jpg", "") + ".pdf");
                    PdfWriter writer = PdfWriter.GetInstance(Doc, new FileStream(PDFOutput, FileMode.Create, FileAccess.Write, FileShare.Read));

                    //Open the PDF for writing 
                    Doc.Open();
                    Doc.NewPage();
                    //Doc.Add(new iTextSharp.text.Jpeg(new Uri(fi.FullName)));

                    Image jpg = Image.GetInstance(new Uri(fi.FullName));
                    jpg.ScaleToFit(700f, 700f);
                    Doc.Add(jpg);

                    Doc.Close(); 
```

我对你们的问题是，我是否按顺序找到所有带有 5093 或任何数字的文件，以便我可以循环浏览并将它们拼接为 PDF。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:02:25.027

```
var path = //your path
var files = Directory.GetFiles(path, "*_*.jpg");
//group only by the bit of the filename before the '_'
var groupedBySamePre_Value = files.GroupBy(p => Path.GetFileNameWithoutExtension(p).Split('_')[0]);
foreach (var group in groupedBySamePre_Value)
{
  //this is a new file group pdf
  foreach (var file in group.OrderBy(p => p))
  {
    //add the file to the pdf
  }
  //end of file group pdf
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:00:30.953

也许你可以做这样的事情：

```
Regex regex= new Regex(@"[0-9]+_[0-9].jpg");
var files = Directory.GetFiles(yourPath, "*.jpg").
                  Where(path => regex.IsMatch(path)).ToList(); 
```

在`regex`我*假设*以下格式

```
{at least one number}_{one number}.jpg 
```

*应该*为你工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:02:23.313

使用 Array.Sort 的另一个建议：

```
DirectoryInfo dirInfo=new DirectoryInfo(imageDirPath);
FileInfo fileInfos = dirInfo.GetFiles(*_*.jpg);
Array.Sort(fileInfos, delegate(FileInfo f1, FileInfo f2) {
    return f1.Name.CompareTo(f2.Name);
}); 
```

# java - SimpleDateFormat 抛出异常

> ID：11229078
> 
> 赞同：1
> 
> 时间：2012-06-27T14:54:36.823
> 
> 标签：java

我想以这种格式显示日期字符串：`Jun 27, 2012`. 我这样做了：

```
SimpleDateFormat sdf = new SimpleDateFormat("MMM dd, yyy");
String date = sdf.format(Calendar.getInstance()); 
```

但它给了我这个：

> `java.lang.IllegalArgumentException: Cannot format given Object as a Date`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T14:56:41.637

```
sdf.format() 
```

接受一个`Date`，而不是一个`Calendar`对象。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-27T14:57:51.713

您不能使用`Calendar.getInstance()`，因为相同的参数是日期而不是日历实例。只需将参数更改为`getTime()`

```
SimpleDateFormat sdf = new SimpleDateFormat("MMM dd, yyyy");
String date = sdf.format(Calendar.getInstance().getTime()); 
```

# regex - 用于匹配音乐和弦的正则表达式

> ID：11229080
> 
> 赞同：9
> 
> 时间：2012-06-27T14:54:43.507
> 
> 标签：regex, music-notation

我正在尝试编写一个函数来解析音乐和弦的字符串表示。

示例：C 大调和弦 -> **Cmaj**（这是我要解析的）

为了清楚起见，和弦由三个不同的部分组成：

*   音符（C、D、E、F、G、A）
*   该音符的临时记号（#、##、b、bb）
*   和弦名称

对于那些精通音乐的人，我不考虑斜线和弦（故意）。

以下功能几乎可以正常工作。但是它仍然不适用于以下情况：

*   "C#maj" # 匹配并且应该
*   "C#maj7" # 匹配并且应该
*   "C#maj2" #**数学运算，不应该**

我想如果我可以让`chords`正则表达式部分被强制放在正则表达式的末尾，那就成功了。我试过`$`在这个字符串之前和之后都使用它，但它没有用。

任何的想法？谢谢。

```
public static void regex(String chord) {                
    String notes = "^[CDEFGAB]";
    String accidentals = "[#|##|b|bb]";
    String chords = "[maj7|maj|min7|min|sus2]";
    String regex = notes + accidentals + chords; 
    Pattern pattern = Pattern.compile(regex);
    Matcher matcher = pattern.matcher(chord);
    System.out.println("regex is " + regex);
    if (matcher.find()) {
        int i = matcher.start();
        int j = matcher.end();
        System.out.println("i:" + i + " j:" + j);           
    }
    else {
        System.out.println("no match!");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:59:38.457

在以下几行中更改`[`和`]`到`(`和：`)`

```
String accidentals = "(#|##|b|bb)";
String chords = "(maj7|maj|min7|min|sus2)"; 
```

否则，您只是在制作字符类，因此`[maj7|maj|min7|min|sus2]`只需在 letter 上进行匹配`m`。

我猜你也想添加一个结束锚`$`？我看到您之前遇到过问题，但这可能是由于上述问题。

* * *

另外，您是否希望`(#|##|b|bb)`成为可选的（即，使用`?`: `(#|##|b|bb)?`）？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T15:07:21.780

原谅 JavaScript，但就纯粹的 REGEX 而言，这种模式似乎有效。您没有规定在哪个和弦名称之后允许哪些数字，但我假设 2 仅在“sus”之后允许，7 仅在“min”和“maj”之后允许。

```
var chords = "C#maj7 C##maj Bbmaj7 Abmin2 Cbmin Dsus";
var valid_chords = chords.match(/\b[CDEFGAB](?:#{1,2}|b{1,2})?(?:maj7?|min7?|sus2?)\b/g); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-02T08:57:16.887

基于 Wiseguy 的回答，我改进了您的正则表达式匹配。由于抛出匹配，我不得不`#`在变量之外添加。`accidentals``\b``#`

**奖励**：它甚至可以匹配 Dsus9、D7 等和弦。

原谅 JavaScript，但这是我最终使用的代码：

```
var notes = "[CDEFGAB]",
  accidentals = "(b|bb)?",
  chords = "(m|maj7|maj|min7|min|sus)?",
  suspends = "(1|2|3|4|5|6|7|8|9)?",
  sharp = "(#)?",
  regex = new RegExp("\\b" + notes + accidentals + chords + suspends + "\\b" + sharp, "g");

var matched_chords = "A# is a chord, Bb is a chord. But H isn't".match(regex);

console.log(matched_chords);
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-06T19:03:39.027

我没有足够的声誉来评论 Amit 的帖子。

这就是我用来做这个的。重要的是在“m”之前检查“maj”和“min”，否则像 C#m 这样的和弦会出现错误匹配。从技术上讲，这将允许像 C#9000 这样的和弦，但我猜这在你的情况下不会有太大问题。

```
[A-G](b|#)?(maj|min|m|M|\+|-|dim|aug)?[0-9]*(sus)?[0-9]*(\/[A-G](b|#)?)? 
```

# php - 将数据从 html 页面插入到 php 表单中，就像自动填充值一样

> ID：11229082
> 
> 赞同：0
> 
> 时间：2012-06-27T14:54:45.267
> 
> 标签：php, html, forms, autofill

所以这是我有一个包含 8 个这些 html 框的页面的问题。我的公司希望#stk ###### 在选择“报价”时自动填写“股票”表单字段。我确实让它工作了，但代码非常杰里操纵，代码在图像下方。我只是在寻找一种更简单且没有 Jerry 操纵的方法来做到这一点。

* * *

```
`<p>3\.  <label for="stockNum">* Stock Item Number</label><br>
    <input name="stockNum" type="text" value="<?php
$stock1 =$_POST['stockNum1'];
$stock2 = $_POST['stockNum2'];
print "$stock1";
print "$stock2";
?>
">
` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:09:30.353

如果这是在一个公共网站上，那么您在使用这种方法时遇到了很多问题，您需要先过滤`$_POST['stockNum1']`变量，这样没有人会通过插入来尝试一些阴暗的东西`javascript:`变量，这样没有人会通过在您的网站中插入或其他顽皮的东西

关于您的具体问题，自动填写表格通常是使用硬编码的 Javascript 或[jQuery](http://jquery.com)之类的 Javascript 库完成的，这样您就可以填写表格而无需先发布数据。

# iphone - 以随机时间间隔执行方法

> ID：11229084
> 
> 赞同：0
> 
> 时间：2012-06-27T14:54:47.057
> 
> 标签：iphone, objective-c, ios, cocoa-touch, sdk

以随机时间间隔重复执行方法的最佳方法是什么，例如方法中的代码以 1s、3s、7s、10s、11s、13s、19s、22s 等运行。无限长的时间？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T15:00:43.950

我会设置一个计时器，每次都通过检查随机数，如果该随机数命中，则调用该函数：

```
[NSTimer scheduledTimerWithInterval: 1.0 target:self selector:@selector(targetMethod:) userInfo:nil repeats: YES]; 
```

并在目标方法中

```
if(arc4random() % 10 == 1)
{
   //call your function
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T14:59:41.687

```
int randomInt = (arc4random() % 100) + 1;
NSTimer *yourTimer = [NSTimer scheduledTimerWithTimeInterval:randomInt target:self selector:@selector(timedMethod:) userInfo:nil repeats:YES]; 
```

上面的代码将在 1s 到 100s 内以随机时间间隔触发

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T15:00:32.420

您可以根据需要或根据需要定义时间，计算并使用 -

```
[NSTimer scheduledTimerWithTimeInterval:yourTime target:self selector:@selector(mainloop) userInfo:nil repeats:YES]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T16:00:35.830

试试这个：

```
-(void) executeMethod
{
    NSLog(@"Method being executed");
}

-(void) callingRandomTimedMethod
{
    for (int i = 1; i > 0; i=i+2) {
        [self executeMethod];
        sleep(i);
    }
} 
```

这给出了类似的输出（检查时间间隔）：

```
> 2012-06-27 11:59:31.757 FirstApp[804:fb03] Method being executed
> 2012-06-27 11:59:32.760 FirstApp[804:fb03] Method being executed
> 2012-06-27 11:59:35.762 FirstApp[804:fb03] Method being executed
> 2012-06-27 11:59:40.765 FirstApp[804:fb03] Method being executed
> 2012-06-27 11:59:47.767 FirstApp[804:fb03] Method being executed
> 2012-06-27 11:59:56.769 FirstApp[804:fb03] Method being executed 
```

# ruby - 自定义类以引发某些 irb 行为

> ID：11229088
> 
> 赞同：0
> 
> 时间：2012-06-27T14:55:01.370
> 
> 标签：ruby

我创建了一个名为 SpecialArray 的类，我想自定义 irb 显示的输出类型。当我创建一个实例变量 test_array 并使用 SpecialArray 生成一个数组，并在 irb 中键入“test_array”时，我得到了这个：

```
1.9.3p194 :051 > test_array
=> [1, 2, 0, 6, 11] 
```

当我使用“puts”时，irb 只返回对象，如下所示：

```
1.9.3p194 :054 > puts test_array
#<SpecialArray:0x007ff05d0b4960> 
```

但我想让 irb 的行为更像第一个示例，我只输入“test_array:”（即我想在一行中返回数组）。我尝试用我自己的方法覆盖默认 puts 方法，但是没有太大的成功。关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:54:47.210

Test_array 是一个对象，当直接在对象上调用 puts 时，通常会返回实例。

您应该在 puts 方法中使用以下内容：

```
puts test_array.to_s 
```

# objective-c - 在 C 和 Objective C 中，我们几乎不应该只使用 (int) 将浮点或双精度值转换为整数吗？

> ID：11229089
> 
> 赞同：5
> 
> 时间：2012-06-27T14:55:05.457
> 
> 标签：objective-c, c, floating-accuracy

我刚刚在 Objective-C 中遇到了一种情况：

```
NSLog(@"%i", (int) (0.2 * 10));         // prints 2
NSLog(@"%i", (int) ((1.2 - 1) * 10));   // prints 1 
```

所以我想知道，如果值是浮点数或双精度数，并且我们想要一个整数，我们不应该只使用`(int)`来进行转换，而是使用`(int) round(someValue)`? 或者，换个角度来说，我们什么时候应该使用`(int)`，但在那些情况下，不能`(int) round(someValue)`也可以完成这项工作，所以我们几乎应该总是使用`(int) round(someValue)`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T15:34:36.500

这里的问题不是将浮点值转换为整数，而是浮点数出现的舍入错误。当你使用浮点时，你应该很好地理解它。

float 和 double 的常见实现使用 IEEE 754 二进制浮点值。这些值表示为有效数字乘以 2 的幂乘以符号（+1 或 -1）。对于浮点数，有效数字是 24 位二进制数字，在“小数点”（或“二进制点”，如果您愿意）之前有一位。例如，数字 1.25 的有效数字为 1.010000000000000000000000。对于双精度数，有效数字是 53 位二进制数字，点前有一位。

因此，十进制数字 .1 和 1.1 的值无法准确表示。它们必须是近似的。当您在源代码中写入“.1”或“1.1”时，编译器会将其转换为非常接近实际值的双精度值。有时该结果会略大于实际值。有时它会略低于实际值。

当您将 float 转换为 int 时，结果（根据定义）仅为值的整数部分（该值被截断为零）。因此，如果您的值略大于正整数，您将获得整数。如果你的值略小于一个正整数，你会得到下一个较小的整数。

如果您期望精确的数学会给您一个整数结果，并且您正在执行的浮点运算如此之少且如此简单以至于错误没有累积太多，那么您可以将浮点值四舍五入为整数，使用轮函数。在简单的情况下，您还可以通过在截断前添加 0.5 进行舍入，例如写“(int) (f + .5)”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T14:59:26.460

这取决于你想要什么。显然，直接转换 to`int`比调用 to 更快`round`，而 round 会给出更准确的值。

除非您正在编写依赖于速度才能有效的代码（在这种情况下，浮点值可能也不是最好的使用），否则我会说调用`round`. 即使它仅将您在屏幕上显示的内容改变一个像素，在处理某些事物（角度测量、颜色等）时，您可以获得的精度越高越好。

编辑：简单的测试来支持我关于铸造比四舍五入更快的说法：

在 Macbook Pro 上测试：

*   2.8 GHz 英特尔酷睿 2 双核
*   Mac OS 10.7.4
*   苹果 LLVM 3.1 编译器
*   -O0（无优化）

代码：

```
int value;
void test_cast()
{
    clock_t start = clock();
    value = 0;
    for (int i = 0; i < 1000 * 1000; i++)
    {
        value += (int) (((i / 1000.0) - 1.0) * 10.0);
    }

    printf("test_cast: %lu\n", clock() - start);
}

void test_round()
{
    clock_t start = clock();
    value = 0;
    for (int i = 0; i < 1000 * 1000; i++)
    {
        value += round(((i / 1000.0) - 1.0) * 10.0);
    }

    printf("test_round: %lu\n", clock() - start);
}

int main()
{
    test_cast();
    test_round();
} 
```

结果：

```
测试演员：11895
测试轮：14353

```

注意：我知道这`clock()`不是最好的分析功能，但它确实表明`round()`至少使用了更多的 CPU 周期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-28T23:30:25.827

转换为 int 会将 float 或 double 值舍入为零。

1.1 -> 1, 1.99999999999 -> 1, 2.0 -> 2

-1.1 -> -1, -1.999999999 -> -1, -2 -> -2

那是你要的吗？如果是，那就是你应该做的。如果没有，你想要什么？

浮点运算总是会产生舍入误差。因此，例如 0.2 * 10 将给出一个接近 2 的数字。可能会少一点，或者多一点，或者纯粹是偶然，它可能正好是 2。因此 (int) (0.2 * 10) 可能是1 或 2，因为“略小于 2”将转换为 1。

round (x) 将四舍五入到最接近的整数。同样，如果你计算取整 (1.4 + 0.1)，1.4 和 0.1 的总和是一个非常接近 1.5 的数字，可能会少一点，也可能会多一点，所以你不知道它是四舍五入到 1.0 还是 2.0 .

您是否希望将 1.5 到 2.5 的所有数字四舍五入为 2？使用 (int) 圆 (x)。如果 x 为 1.5 或 2.5，您可能会得到稍微不同的结果。也许您希望将最大为 1.9999 的数字向下舍入，但将 1.99999999 四舍五入为 2。使用双精度数，而不是浮点数，并计算 (int) (x + 0.000001)。

# asp.net - 如何在 ASP.net 中进行 Post-Redirect-Get 后保持表单状态？

> ID：11229096
> 
> 赞同：0
> 
> 时间：2012-06-27T14:55:24.293
> 
> 标签：asp.net, post-redirect-get

想象一个带有表单输入的页面：

> 搜索条件：`crackers                  `
> 
> * * *
> 
> 从：`ian@stackoverflow.com          `
> 至：`list@stackoverflow.com      `
> 主题：`How to maintain form state with PRG?`
> 消息：`Imagine a page with form input:` 
> 
> **发送**

用户单击**发送**后，服务器将指示客户端发送`Redirect`，作为[Post-Redirect-Get 模式的](https://stackoverflow.com/questions/5381162/post-redirect-get-with-asp-net)一部分。

```
POST /mail/u/compose

HTTP/1.1 303 See Other
Location: https://stackoverflow.com/mail/u/compose 
```

并且客户端会发出一个`GET`新的页面。问题是现有表单的一些元素丢失了：

> 搜索条件：

当有一些下拉菜单和复选框时，情况会变得更糟。

鉴于`viewstate`当时不存在，我如何在 ASP.net 中使用 Post-Redirect-Get 来维护表单状态。

* * *

## 奖金阅读

*   [ASP.NET：如何重定向、预填充表单数据？](https://stackoverflow.com/questions/1051305/asp-net-how-to-redirect-prefilling-form-data)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:05:46.367

我要么将必要的数据存储在 Session 中（我只会将它用于大量数据 - 并注意过时的数据错误），或者在重定向中传递查询字符串上的值（这不太容易出现错误并且会可能对少量数据更有效）。

它不符合您的模式，但[Server.Transfer](http://arplis.com/difference-between-server-transfer-and-response-redirect/)也可能有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:12:47.040

如果搜索条件值应该在系统中的许多不同页面中持续存在（换句话说，在整个用户的会话中），那么听起来像是要存储在 Session 中的候选者。或者，如果它应该在多个会话中持续存在（即，下次用户登录时，它会记住他上次使用的搜索条件），它需要在更永久的地方持续存在。

我不知道 ASP.NET 中的任何行为类似于 MVC 的“临时”空间，在第一次读取时会自动清除该值。当然，包装 Session 的辅助类（或便利函数）可以执行那种“只读”功能。

最后，您可以在重定向时将搜索条件作为 URL 参数传递。但是，这有点麻烦（特别是如果您有多个字段），并且您需要清理传入的数据。

# c# - 使用 AForge 进行图像处理：空数组？

> ID：11229097
> 
> 赞同：0
> 
> 时间：2012-06-27T14:55:34.287
> 
> 标签：c#, image, image-processing, indexoutofboundsexception, aforge

我对图像处理相当陌生，最近发现了 AForge 库。我一直在尝试在 2 张图像之间进行基本比较，我希望它返回它们之间的相似度百分比。但是，由于有一个空数组，我经常收到一个 Index Out of Bounds 异常，但我不确定为什么`ex.ProcessImage`返回一个空数组。我几乎复制了文档中提供的示例代码，但我仍然遇到错误。这是我的代码：

```
static class Run
{
    public static void go()
    {
        string filename1 = null;
        string filename2 = null;

        filename1 = "a.a.jpg";
        filename2 = "b.b.jpg";

        Bitmap image1 = new Bitmap(filename1);
        Bitmap image2 = new Bitmap(filename2);

        ExhaustiveTemplateMatching ex = new ExhaustiveTemplateMatching( 0 );
        TemplateMatch[] match  = ex.ProcessImage (image1, image2);

        float similarity = match[0].Similarity; //where the error occurs

        Console.WriteLine("They are" + similarity + "% similar.");
    }
} 
```

我唯一能想象的就是我如何制作位图。但是，我确实相信我做对了。我也尝试过其他初始化位图的方法，但我仍然收到同样的错误。

这可能是我没有意识到的一些愚蠢的错误，但任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:57:25.437

如果你得到一个`IndexOutOfRangeException`，这表明它`ex.ProcessImage`返回了一个空数组。接下来要做的是找出原因。大概没有模板匹配...

顺便说一句，这段代码毫无意义地冗长：

```
string filename1 = null;
string filename2 = null;

filename1 = "a.a.jpg";
filename2 = "b.b.jpg"; 
```

它会更短更清晰：

```
string filename1 = "a.a.jpg";
string filename2 = "b.b.jpg"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-28T19:47:34.767

将图像另存为 .bmp 并重试。

```
 string filename1 = "a.a.bmp";
 string filename2 = "b.b.bmp"; 
```

# jquery - jQuery wrapAll 没有按预期运行

> ID：11229100
> 
> 赞同：6
> 
> 时间：2012-06-27T14:55:39.783
> 
> 标签：jquery

我正在尝试用另一个元素包装一系列动态创建的元素，例如：

```
var innerHtmlAsText = "<li>test1</li><li>test2</li>";
var wrapper = "<ul />";

$("div#target").append($(innerHtmlAsText).wrapAll(wrapper)); 
```

我的预期结果是

```
<ul>
    <li>test1</li>
    <li>test2</li>
</ul> 
```

但实际结果是：

```
<li>test1</li>
<li>test2</li> 
```

`li`元素未包装。在我的实例中，innerHtml 是从用户生成的模板动态生成的，并且包装器是单独提供的。如何包装内部值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T14:58:40.893

`wrapAll`返回原始的 jQuery 对象，而不是新的。所以，`wrapAll`返回`<li>`s，因为那是`wrapAll`被调用的对象。

尝试这个：

```
$("div#target").append($(innerHtmlAsText).wrapAll(wrapper).parent()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T14:59:06.237

发生这种情况是因为`wrapAll`不返回包装器，而是应用它的原始对象（*与大多数 jquery 函数一样*）。

使用`.parent()`来获取`ul`元素..

```
$("div#target").append( $(innerHtmlAsText).wrapAll(wrapper).parent() ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T15:18:08.060

也可以仅使用`.append()`.

```
var innerHtmlAsText = "<li>test1</li><li>test2</li>";
var wrapper = "<ul/>";

$("div#target").append($(wrapper).append(innerHtmlAsText)); 
```

**[演示](http://jsfiddle.net/QStkd/511/)**

# wpf - 集合到布尔转换器

> ID：11229108
> 
> 赞同：1
> 
> 时间：2012-06-27T14:55:57.237
> 
> 标签：wpf, binding, checkbox, datatemplate

在我的 wpf 应用程序中，我有一个如下的数据网格

```
 <Custom:DataGrid x:Name="dg_nba" IsEnabled="{Binding Iseditmode}" SelectionMode="Single" ItemsSource="{Binding Products}" Style="{DynamicResource myDataGridStyle}" IsReadOnly="True" AutoGenerateColumns="False" CanUserAddRows="False" ColumnWidth="*">
                        <Custom:DataGrid.Columns>
                            <Custom:DataGridTextColumn x:Name="dgt_nba_id" Header="Id" Binding="{Binding ID}" MaxWidth="40"/>
                            <Custom:DataGridTextColumn x:Name="dgt_nba_name" Binding="{Binding Name}" Header="Name"/>
                            <Custom:DataGridTemplateColumn x:Name="dgtc_nba_incl" Header="Include" MaxWidth="50">
                                <Custom:DataGridTemplateColumn.CellTemplate >
                                    <DataTemplate>
                                            <CheckBox HorizontalAlignment="Center" Style="{DynamicResource myCheckBoxStyle}"/>
                                    </DataTemplate>
                                </Custom:DataGridTemplateColumn.CellTemplate>
                            </Custom:DataGridTemplateColumn>
                        </Custom:DataGrid.Columns>
                    </Custom:DataGrid> 
```

我已将 datagrid id 、 name 列与产品的默认集合绑定。我有另一个产品列表集合，其中仅包含产品，现在我需要检查列表是否包含产品的复选框。

有人可以帮我收集到布尔转换器。我尽了最大的努力，但无法做到正确。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:01:24.797

如果你想使用价值转换器，我建议你尝试一下`IMultiValueConverter`。您可以尝试将另一个集合作为值传递，并将您要查找的*ID*作为两个不同的值传递给转换器。为了使其工作，您应该：

*   使您可以在 XAML 中访问代码隐藏变量。您可以在此处找到有关执行此操作的一些方法的更多信息：[Access codebehind variable in XAML](https://stackoverflow.com/questions/666856/access-codebehind-variable-in-xaml)
*   实施`IMultiValueConverter`。它可能取决于您的应用程序的一些细节（例如您正在使用的集合的类型），但它可能或多或少像这样：

    ```
    class ICollectionToBoolConverter : IMultiValueConverter
    {
        public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            try
            {
                //verify if appropriate number of values is bound
                if (values != null && values.Length == 2)
                {
                    List<Product> productsList = (values[0] as List<Product>);

                    //if converter is used with appropriate collection type
                    if (productsList != null)
                    {
                        //if there is object ID specified to be found in the collection
                        if (values[1] != null)
                        {
                            int objectToFindId = (int)values[1];

                            //return information if the collection contains an item with ID specified in parameter
                            return productsList.Any(p => p.ID == objectToFindId);
                        }
                    }
                }

                //return false if object is not found or converter is used inappropriately
                return false;
            }
            catch
            {
                return false;
            }
        }

        public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    } 
    ```

*   将您新创建的转换器放入`Resources`（`Window`或`UserControl`）所在的`DataGrid`位置

    ```
    <c:ICollectionToBoolConverter x:Key="collectionToBoolConverter" /> 
    ```

*   使用转换器绑定`CheckBox`，它可以取决于您用来公开其他集合的特定方式（如本答案的第一步所述）。但是，它可能看起来类似于：

    ```
    ...
    <Custom:DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <CheckBox HorizontalAlignment="Center" Style="{DynamicResource myCheckBoxStyle}">
                <CheckBox.IsChecked>
                    <MultiBinding Converter="{StaticResource collectionToBoolConverter}">
                        <Binding  ElementName="layoutRoot" Path="Parent.MyCollectionName" />
                        <Binding Path="ID" />
                    </MultiBinding>
                </CheckBox.IsChecked>
            </CheckBox>
        </DataTemplate>
    </Custom:DataGridTemplateColumn.CellTemplate>
    ... 
    ```

我还没有对此进行测试，所以如果您对这些任务有任何问题，请告诉我，我会尽力帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T17:12:02.600

在这种情况下，您最好在 ViewModel（您要绑定的对象）中计算 IsChecked 值。如果您从 VM 公开描述性属性（只读：HasDesiredProduct），则可以在从集合中添加/删除项目时调整该属性，并让复选框以只读方式反映内部逻辑。

# c++ - 法线在openGL中表现得很奇怪

> ID：11229110
> 
> 赞同：4
> 
> 时间：2012-06-27T14:56:00.557
> 
> 标签：c++, objective-c, opengl, normals

我一直在为 openGl 编写一个 .obj 加载器。几何加载很好，但法线总是搞砸了。我尝试在 2 个不同的程序中导出模型，但似乎没有任何效果。据我所知，这就是您将法线放入 GL_TRIANGLES 的方式

```
 glNormal3fv(norm1);   
     glVertex3fv(vert1);
     glNormal3fv(norm2);
     glVertex3fv(vert2);
     glNormal3fv(norm3);
     glVertex3fv(vert3); 
```

（法线在其余代码中引用 GLfloats。）

编辑：这是一张法线断裂的等面体的图片![在此处输入图像描述](../Images/888b9b4467843d8a8cf2e1dbcfb4f49c.png)

这是完整的 obj 加载器代码和文件：

```
 void loadOBJFromFile(NSString *path,float movex,float movey)
{
    NSString *contentns = [[NSString alloc]initWithContentsOfFile:path encoding:NSASCIIStringEncoding error:NULL];
    NSArray *pieces = [contentns componentsSeparatedByString:@"#"];
    //creating the arrays to read the vertecies and normals from.
    NSArray *normals = [[pieces objectAtIndex:3]componentsSeparatedByString:@"\n"];
    NSArray *vertecies = [[pieces objectAtIndex:2]componentsSeparatedByString:@"\n"];
    //The +1 is to make sure we ignore the texture/ material definition that vomes before the faces.
    int normalCount = [[normals objectAtIndex:0]intValue]+2;
    int faceCount = [[normals objectAtIndex:normalCount]intValue];
    //glTranslatef(movex, 0, movey);

glBegin(GL_TRIANGLES);
{
for (int i = 0; i < faceCount;i++)
{
    //aquires all the numbers in thye current face.
    NSArray *currentFace = [[normals objectAtIndex:normalCount+i+1]componentsSeparatedByString:@" "];
    NSArray *v1 = [[currentFace objectAtIndex:1]componentsSeparatedByString:@"//"];
    NSArray *v2 = [[currentFace objectAtIndex:2]componentsSeparatedByString:@"//"];
    NSArray *v3 = [[currentFace objectAtIndex:3]componentsSeparatedByString:@"//"];

    //crewatres the arrays to contain the vertecies
    NSArray *vertex1 = [[vertecies objectAtIndex:[[v1 objectAtIndex:1]intValue]]componentsSeparatedByString:@" "];
    NSArray *vertex2 = [[vertecies objectAtIndex:[[v2 objectAtIndex:1]intValue]]componentsSeparatedByString:@" "];
    NSArray *vertex3 = [[vertecies objectAtIndex:[[v3 objectAtIndex:1]intValue]]componentsSeparatedByString:@" "];
    //creates all the arrays for the normals
    NSArray *normal1 = [[normals objectAtIndex:[[v1 objectAtIndex:1]intValue]]componentsSeparatedByString:@" "];
    NSArray *normal2 = [[normals objectAtIndex:[[v2 objectAtIndex:1]intValue]]componentsSeparatedByString:@" "];
    NSArray *normal3 = [[normals objectAtIndex:[[v3 objectAtIndex:1]intValue]]componentsSeparatedByString:@" "];

    //creates the vertecies coordinates
    GLfloat vert1[] = {[[vertex1 objectAtIndex:1]floatValue],[[vertex1 objectAtIndex:2]floatValue],[[vertex1 objectAtIndex:3]floatValue]};
    GLfloat vert2[] = {[[vertex2 objectAtIndex:1]floatValue],[[vertex2 objectAtIndex:2]floatValue],[[vertex2 objectAtIndex:3]floatValue]};
    GLfloat vert3[] = {[[vertex3 objectAtIndex:1]floatValue],[[vertex3 objectAtIndex:2]floatValue],[[vertex3 objectAtIndex:3]floatValue]};
    //creates the normals coordinates

    GLfloat norm1[] = {[[normal1 objectAtIndex:1]floatValue],[[normal1 objectAtIndex:2]floatValue],[[normal1 objectAtIndex:3]floatValue]};
    GLfloat norm2[] = {[[normal2 objectAtIndex:1]floatValue],[[normal2 objectAtIndex:2]floatValue],[[normal2 objectAtIndex:3]floatValue]};
    GLfloat norm3[] = {[[normal3 objectAtIndex:1]floatValue],[[normal3 objectAtIndex:2]floatValue],[[normal3 objectAtIndex:3]floatValue]};

     glNormal3fv(norm1);   
     glVertex3fv(vert1);
     glNormal3fv(norm2);
     glVertex3fv(vert2);
     glNormal3fv(norm3);
     glVertex3fv(vert3);
}}
glEnd(); 
```

}

.obj 文件：

```
#Wavefront OBJ file created by Hexagon 2 
mtllib object.mtl
g Form0
usemtl def_surf_mat
# 12 
v -12.533 4.78719 0 
v -12.533 20.2788 0 
v -7.74583 12.533 -12.533 
v -7.74583 12.533 12.533 
v 0 0 -7.74583 
v 0 0 7.74583 
v 0 25.066 -7.74583 
v 0 25.066 7.74583 
v 7.74583 12.533 -12.533 
v 7.74583 12.533 12.533 
v 12.533 4.78719 0 
v 12.533 20.2788 0 
# 12 
vn -0.850651 -0.525731 0 
vn -0.850651 0.525731 1.50014e-08 
vn -0.525731 -1.50014e-08 -0.850651 
vn -0.525731 0 0.850651 
vn 1.50014e-08 -0.850651 -0.525731 
vn -1.50014e-08 -0.850651 0.525731 
vn -1.50014e-08 0.850651 -0.525731 
vn 1.50014e-08 0.850651 0.525731 
vn 0.525731 0 -0.850651 
vn 0.525731 7.5007e-09 0.850651 
vn 0.850651 -0.525731 1.50014e-08 
vn 0.850651 0.525731 -1.50014e-08 
usemtl def_surf_mat
20
f 7//7 8//8 12//12 
f 7//7 2//2 8//8 
f 8//8 4//4 10//10 
f 6//6 10//10 4//4 
f 7//7 9//9 3//3 
f 5//5 3//3 9//9 
f 6//6 5//5 11//11 
f 6//6 1//1 5//5 
f 1//1 4//4 2//2 
f 1//1 2//2 3//3 
f 12//12 11//11 9//9 
f 12//12 10//10 11//11 
f 2//2 4//4 8//8 
f 10//10 12//12 8//8 
f 12//12 9//9 7//7 
f 3//3 2//2 7//7 
f 3//3 5//5 1//1 
f 4//4 1//1 6//6 
f 9//9 11//11 5//5 
f 11//11 10//10 6//6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:21:11.837

随着您添加到问题中的额外信息，我已经没有想法了。我也无法真正阅读Objective-C，但我建议仔细检查所有数组索引和行计数代码（也许打印所有内容以查看它们是否真的是您所期望的），因为解析基于信任确切的布局和注释单个出口商创建看起来很毛茸茸。

*原答案：*

在没有看到您的加载程序代码或 .obj 文件的情况下，这里有一些事情需要检查：

*   乱到什么程度？完全错误，或者只是例如平面阴影而不是平滑阴影？
*   那些 norm1、norm2 等是三个 GLfloat 的数组吗？
*   普通数组是否包含合理的值（因此从文件中读取它们有效）？
*   您的法线是否标准化为长度 1？
*   法线索引是否正确，即您是否有正确顶点的正确法线？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T16:24:03.680

tl;博士但是---检查你的法线符号是否正确。在计算中很容易使法线指向与您预期相反的方向。例如，它们沿着正确的路线，但指向内部而不是外部。您的图像与那种或错误一致。

据我所知，在计算法线时，您必须采用两条边的向量叉积。您进行计算的顺序决定了法线是指向还是指向。因此，请确保以正确的顺序进行计算。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T05:23:32.033

在我看来，OBJ 文件是有效的，并且您的 OBJ 解析器可以正确读取顶点位置和法线。所以，我相信渲染问题来自不同的原因。

图像中的视觉伪影看起来像是不正确的深度测试。（只画了一半的三角形）我猜你在 IB（Interface Builder）中使用了 NSOpenGLView 的一个子类。确保在 IB*属性检查器*中启用NSOpenGLView 的 **深度缓冲区**（默认为无）。深度缓冲区的常见值是 24 位，加上模板缓冲区的 8 位。

 ** * *

而且，这里有一些改进程序的建议；

*   绘图和解析必须在单独的函数中执行。因为您只需要加载一次文件，但您可能会多次绘制模型。

*   对顶点、法线和面使用 NSMutableArray。

*   您的 OBJ 加载器不是解析 OBJ 文件的最佳方式，因为它依赖于注释行（以 # 开头）。我会做：

    1.  逐行读取并将它们存储到行数组中。
    2.  循环遍历每一行并测试以下内容：
    3.  如果它以 # 开头，则跳过解析该行。
    4.  如果它以“v”开头，则将以下 3 个数字在同一行添加到顶点数组。
    5.  如果它以“vn”开头，则将该行的下 3 个数字添加到普通数组中。
    6.  如果它以“f”开头，则将 3 个面索引添加到面数组中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T12:32:29.610

答案很简单。对象正在从对象文件中正确加载。加载器代码可以进行更多优化。打电话后，

glEnable(GL_CULL_FACE | GL_CULL_FACE_MODE);

**编辑** 我不敢相信我当时犯了这样的新手错误。剔除的脸有帮助，但只是一点点。真正的问题是我忘记清除深度缓冲区。

```
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); 
```

如果其他人也遇到同样的事情，那应该可以解决问题。

一些问题已解决，我实际上需要清除另一个缓冲区或弹出矩阵或其他东西。现在，照明几何图形完全按照它在编辑器和建模程序中的显示方式加载。感谢大家的帮助。*

# ios - ios xml NSString 到经度

> ID：11229115
> 
> 赞同：1
> 
> 时间：2012-06-27T14:56:09.583
> 
> 标签：ios, xml, nsstring, coordinates

我已经尝试了所有我能想到的方法，但就是没有得到它。

我有一个 XML 文件，其中包含这样的条目......

```
<lat>53.358242</lat>
<lon>-6.227800</lon> 
```

该文件使用 NSXMLParser 解析并取出其他内容，但无法将这些内容输入注释以删除引脚。在 .h 文件中，我有以下内容；

```
@interface LocationList : NSObject
@property (nonatomic, strong) NSString *loc_name;
@property (nonatomic, strong) NSString *lat;
@property (nonatomic, strong) NSString *lon; 
```

然后我尝试将 NSString 转换为坐标。

```
CLLocationCoordinate2D pinCoordinate;
pinCoordinate.latitude = [theLocationList.lat doubleValue]; 
pinCoordinate.longitude = [theLocationList.lon doubleValue]; 
```

但我最终得到0。

我试过这个，但它无法处理负值。

```
NSString *digits = [theLocationList.lon stringByTrimmingCharactersInSet:[[NSCharacterSet decimalDigitCharacterSet] invertedSet]];
NSLog(@"Attempts: %f", [digits floatValue]); 
```

有谁能帮我解惑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:01:12.457

对您的解决方案稍作改动应该可以解决问题 - 替换`decimalDigitCharacterSet`为`characterSetWithCharactersInString:@"+-0123456789."`，如下所示：

```
NSString *digits = [theLocationList.lon stringByTrimmingCharactersInSet:[[NSCharacterSet characterSetWithCharactersInString:@"+-0123456789."] invertedSet]];
NSLog(@"Attempts: %f", [digits floatValue]); 
```

# php - 在内存中存储敏感数据

> ID：11229119
> 
> 赞同：2
> 
> 时间：2012-06-27T14:56:28.880
> 
> 标签：php, security

我的应用程序需要访问一些敏感数据（在这种情况下是加密密钥）。此时我将它们存储在文件中，以便在处理脚本时可以读取它们。

但是，根据我必须遵循的安全标准，它还不够安全，因为如果服务器 root 帐户被盗用，有人可能很容易读取并复制它们。

典型的解决方案是挂载包含密钥的外部内存，启动应用程序，卸载内存并让缓存在内存中的数据运行。当然，因为它是 PHP，所以这是不可能的。

还有其他解决方案吗？在这一点上，我唯一的想法是带有密钥的小型应用程序，但是我不确定它应该如何工作才能安全。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T01:18:51.663

正如您已经知道的那样，无论您做什么，如果该密钥对应用程序可用，那么在服务器上获得 root 访问权限的恶意代码肯定可以使用该密钥，并且最有可能获得对 UID 下的 UID 访问权限的代码该应用程序也运行。这只是一个简单的问题。

购买，因为您的应用程序不是长期运行的，听起来您将不得不接受超出此范围的风险。

您的想法是使用某种守护程序，将密钥保存在 RAM 中并且可以由应用程序查询。这行得通，但您可能已经意识到，如果您的应用程序可以查询它，那么恶意代码也可以查询它。如果您仍然选择该选项，请考虑使用[memcached](http://memcached.org/)（为什么要重新发明轮子？）。

我能想到的唯一其他选择是编写一个 Apache 模块（用 C 语言），它在系统启动时加载密钥（之后卸载密钥的持久副本）和一个 PHP 扩展（用 C 语言）来获取来自位于同一进程中的 Apache 模块的秘密。假设您使用 PHP 作为 Apache 模块，而不是作为外部进程。但对我来说，这听起来有点矫枉过正，因为它非常复杂，实际上并没有消除风险。

您是否考虑过如何处理交换空间？您可以使用`mlock`或类似（在 C 中）来防止将秘密写入交换，但是一旦将其移交给 PHP 解释器，就很难以这种方式保护它。所以你最好在没有交换的情况下运行系统。

考虑一项设计更改，它将密钥限制在长时间运行的守护程序（可能不是用 PHP 编写）中的单个位置，并让 PHP 应用程序将需要访问密钥的加密函数委托给该守护程序。

# apache - Apache 默认代理

> ID：11229121
> 
> 赞同：1
> 
> 时间：2012-06-27T14:56:33.243
> 
> 标签：apache, proxy, reverse-proxy, mod-proxy

我有一个管理多个域的内部 Web 服务器 (192.168.1.2)。现在我需要在 DMZ 中再添加一台服务器，充当反向代理（它是一个 Apache 2.2.3，IP 为 192.168.1.3 和一个静态互联网 IP 的接口）

我需要这个 Apache 服务器应该代理来自互联网的任何域到我的内部 Web 服务器，除了一个域 (this.example.com)

一种模式：

```
INTERNET->Apache Proxy->Internal Web server (default for any domain)
INTERNET->Apache Proxy->Differente Web Server (this.example.com) 
```

我必须在这个 Apache 代理上设置什么样的配置？我阅读了有关 Proxypass 和类似字符串的信息，但我不明白如何将“默认”代理到我的内部 Web 服务器......

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:43:08.367

这适用于“默认值”，但域 this.example.com 不起作用......

```
NameVirtualHost *:80
<VirtualHost *:80>
    RewriteEngine     On
    RewriteRule       ^(.*)$        http://192.168.1.2$1  [P]
</VirtualHost>

<VirtualHost *:80>
    LogLevel warn
        ServerName this.example.com
    DocumentRoot /var/www/html
    <Directory />
        Options FollowSymLinks
        AllowOverride None
    </Directory>
    <Directory /var/www/html/>
        Options Indexes FollowSymLinks MultiViews
        #AllowOverride None
        AllowOverride All
        Order allow,deny
        allow from all
    </Directory>
</VirtualHost> 
```

# silverlight-4.0 - 在 Silverlight 中，如何将焦点设置在页面加载控件上？

> ID：11229122
> 
> 赞同：1
> 
> 时间：2012-06-27T14:56:33.617
> 
> 标签：silverlight-4.0, silverlight-3.0

当我的 Silverlight 页面加载时，我想将焦点设置在控件上。一个不那么明显的解决方案的简单问题。

我尝试了以下没有运气。页面加载，但我的控件没有焦点。

```
public MainPage()
{
    InitializeComponent();

    if( !DesignerProperties.IsInDesignTool )
    {
        // some init code goes here...

        this.Loaded += ( s, e ) =>
            {
                this.InitFocus();
            };
    }
}

private void InitFocus()
{
    this.PropNumTextBox.Focus();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:56:34.600

解决方案是使用`System.Windows.Browser.HtmlPage.Plugin.Focus()`. 当我在对我的初始控件调用 Focus 之前调用它时，它按预期工作。正确的代码如下所示：

```
public MainPage()
{
    InitializeComponent();

    if( !DesignerProperties.IsInDesignTool )
    {
        // init code here...

        this.Loaded += ( s, e ) =>
            {
                this.InitFocus();
            };
    }
}

private void InitFocus()
{
    // this call is necessary to initialize focus on page load
    System.Windows.Browser.HtmlPage.Plugin.Focus();
    this.PropNumTextBox.Focus();
} 
```

# c# - 将项目添加到 ListBox 后 DragDrop 中的 NullReferenceException

> ID：11229126
> 
> 赞同：0
> 
> 时间：2012-06-27T14:56:45.537
> 
> 标签：c#, wpf, drag-and-drop, listbox, nullreferenceexception

我正在尝试实现一个包含我的程序的“打开文件”的动态列表框。这些文件可以从 ListBox 拖到四个画布之一。只要在启动程序之前将项目添加到 XAML 中，就可以正常工作，但是，一旦我通过 fileList.Items.Add("myitemname"); 将项目添加到 ListBox; 如果我尝试将它们拖放（拖动）到 Canvas 中，我会得到一个 NullReferenceException

```
DragDrop.DoDragDrop(listBox, dragData, DragDropEffects.Move); 
```

这是我的代码的相关部分：

```
public partial class MainWindow : Window
{
    InitialDataObject _initData = new InitialDataObject();

    public MainWindow()
    {
        InitializeComponent();
    }

    #region DragImage

    private void DragImageStart(object sender, MouseButtonEventArgs e)
    {
        _initData._mousePoint = e.GetPosition(null);
    }

    private void DragImageMove(object sender, MouseEventArgs e)
    {
        Point mousePos = e.GetPosition(null);
        Vector diff = _initData._mousePoint - mousePos;

        if (e.LeftButton == MouseButtonState.Pressed && (
        Math.Abs(diff.X) > SystemParameters.MinimumHorizontalDragDistance ||
        Math.Abs(diff.Y) > SystemParameters.MinimumVerticalDragDistance) && ((sender as ListBox).SelectedItem != null))
        {
            var listBox = sender as ListBox;
            var listBoxItem = listBox.SelectedItem;
            DataObject dragData = new DataObject(_initData._dropIdentifier, listBoxItem);
            DragDrop.DoDragDrop(listBox, dragData, DragDropEffects.Move); 
        }

    }

    private void CanvasDrop(object sender, DragEventArgs e)
    {
        if (e.Data.GetDataPresent(_initData._dropIdentifier))
        {
            var item = e.Data.GetData(_initData._dropIdentifier) as ListBoxItem;
            (sender as Canvas).Background = new SolidColorBrush(Color.FromArgb(255, 255, 255, 255));
            DropImage(sender as Canvas, item);
            fileList.UnselectAll();
        }
    }

    private void CanvasDragEnter(object sender, DragEventArgs e)
    {
        if (!e.Data.GetDataPresent(_initData._dropIdentifier) || sender == e.Source)
        {
            (sender as Canvas).Background = new SolidColorBrush(Color.FromArgb(255, 240, 240, 240));
            e.Effects = DragDropEffects.None;
        } 
    }

    private void DropImage(Canvas targetCanvas, ListBoxItem item)
    {
        //just to check if I got the right item in this method
        MessageBox.Show(item.Content.ToString());
    }

    private void CanvasDragLeave(object sender, DragEventArgs e)
    {
        if (!e.Data.GetDataPresent(_initData._dropIdentifier) || sender == e.Source)
        {
            (sender as Canvas).Background = new SolidColorBrush(Color.FromArgb(255, 255, 255, 255));
        }
    }

    #endregion

    private void sdfsdf(object sender, RoutedEventArgs e)
    {
        fileList.Items.Add("test");
    }
}

class InitialDataObject
{
    public Point _mousePoint = new Point();
    public readonly string _dropIdentifier = "dropIdentifier";
} 
```

XAML：

```
<Grid Height="Auto" HorizontalAlignment="Stretch" Margin="0,23,0,0" Name="gridSubmain" VerticalAlignment="Stretch" Width="Auto" Panel.ZIndex="2">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="250" MaxWidth="250" MinWidth="250" />
        <ColumnDefinition />
    </Grid.ColumnDefinitions>
    <ListBox Height="Auto" Name="fileList" Width="Auto" Background="#FFE6E6E6" BorderBrush="{x:Null}" Panel.ZIndex="1" PreviewMouseLeftButtonDown="DragImageStart" PreviewMouseMove="DragImageMove" FontSize="16" ItemsSource="{Binding}" Margin="0" Grid.Row="2">
        <ListBoxItem Content="dfgdfg" />
        <ListBoxItem Content="sfsdf" />
        <ListBoxItem Content="ghjgh" />
        <ListBoxItem Content="cvbcvb" />
    </ListBox>
    <Button Content="Button" Height="23" HorizontalAlignment="Left" Margin="112,196,0,0" Name="button1" VerticalAlignment="Top" Width="75" Click="sdfsdf" />
</Grid>
<Grid Grid.Column="1" Height="Auto" HorizontalAlignment="Stretch" Margin="0" Name="gridImage" VerticalAlignment="Stretch" Width="Auto">
    <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition />
    </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>
    <Canvas Height="Auto" HorizontalAlignment="Stretch" Margin="0" Name="canvasImage1" VerticalAlignment="Stretch" Width="Auto" AllowDrop="True" Drop="CanvasDrop" DragEnter="CanvasDragEnter" Background="White" DragLeave="CanvasDragLeave" />
    <Canvas Height="Auto" HorizontalAlignment="Stretch" Margin="0" Name="canvasImage2" VerticalAlignment="Stretch" Width="Auto" Drop="CanvasDrop" DragEnter="CanvasDragEnter" Grid.Column="1" AllowDrop="True" Background="White" DragLeave="CanvasDragLeave"/>
    <Canvas Height="Auto" HorizontalAlignment="Stretch" Margin="0" Name="canvasImage3" VerticalAlignment="Stretch" Width="Auto" Drop="CanvasDrop" DragEnter="CanvasDragEnter" Grid.Row="1" AllowDrop="True" Background="White" DragLeave="CanvasDragLeave"/>
    <Canvas Height="Auto" HorizontalAlignment="Stretch" Margin="0" Name="canvasImage4" VerticalAlignment="Stretch" Width="Auto" Drop="CanvasDrop" DragEnter="CanvasDragEnter" Grid.Column="1" Grid.Row="1" AllowDrop="True" Background="White" DragLeave="CanvasDragLeave"/>
</Grid> 
```

任何想法为什么它使用现有项目而不是通过 fileList.Items.Add(".."); 添加的项目？此外，对于现有项目 fileList.UnselectAll(); 工作正常，但额外添加的项目保持选中状态，我无法摆脱选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:38:49.593

你的`CanvasDrop`方法有问题。您期望 ListBoxItem 在那里，但获取字符串，因为`SelectedItem`列表框的属性对于您在 xaml 中创建的项目和您动态添加的项目具有不同的值。

# jquery - 根据文本框的输入动态显示/隐藏 div

> ID：11229133
> 
> 赞同：7
> 
> 时间：2012-06-27T14:57:12.383
> 
> 标签：jquery, html

我在一个网站上工作，我有一个页面包含这样构建的人员列表：

```
<div class="personsMenu">
    <div class="person">
        <div class="name">John</div>
        <div class="age">18</div>
    </div>
    <div class="person">
        <div class="name">Kate</div>
        <div class="age">24</div>
    </div>
    <div class="person">
        <div class="name">Tom</div>
        <div class="age">17</div>
    </div>
</div> 
```

我也有一个文本框`<input type="Text" id="filterTextBox"/>`

使用 jquery 我需要执行以下操作：

当用户开始在文本框中输入时，“名称”不包含字符的 div 会消失（某种动态过滤器，您只会看到名称中包含书写字符的人）

所以逻辑应该是这样的：

当用户在文本框中键入一个字符（或删除一个字符）时，我们循环遍历所有“person” div，如果该“person”中的“name”div 包含我们显示的字符，否则我们隐藏它（.show( ) 和 jquery 中的 .hide())

当然，如果文本框为空，我们会显示所有内容。

这可以做到吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T15:04:32.240

在每次击键时，您可以`.toggle()`each`.person`传递一个变量，指示它是否与当前值匹配，因此应该显示。

```
$('.my-textbox').keyup(function() {
    var value = $(this).val();
    var exp = new RegExp('^' + value, 'i');

    $('.personsMenu .person').each(function() {
        var isMatch = exp.test($('.name', this).text());
        $(this).toggle(isMatch);
    });
});​ 
```

根据需要修改表达式。在这个版本中，它检查名称是否以输入的值*开头*，并忽略大小写。

[演示](http://jsfiddle.net/tV9RK/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:03:09.833

这里有一些东西可以帮助您入门。我敢肯定它远非完美，但您还没有展示您已经尝试过的内容以及您的问题出了什么问题。

```
$("#filterTextBox").on("keyup", function () {
    var search = this.value;
    $(".person").show().filter(function () {
        return $(".name", this).text().indexOf(search) < 0;
    }).hide();        
});​​​​​​​​​​​​​ 
```

这是一个[工作示例](http://jsfiddle.net/Da4mX/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:00:07.030

既然你用**jQuery**标记了这个，我强烈推荐他们的[**Autocomplete** UI Control](http://jqueryui.com/demos/autocomplete/)。我已经在几个项目中使用了它，您可以更新搜索功能以使用这样的本地数据存储。作为旁注，您可能需要考虑使用`<ul>`'s 和`<li>`'s ...

**代码示例**

```
//Search-As-You-Type
$(id).find('input').autocomplete({
    minLength: 2,
    focus: function( event, ui ) {},
    select: function( event, ui ) {},
    source: function(request, response){
        //here is where you want to call your custom function
        findSite(request.term);             
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T15:03:34.633

```
$('input').keyup(function(){
  var value = this.value
  $('.person')
    .hide()
    .children('.name')
    .filter(function(){
      var re = new RegExp(value)
      return re.test($(this).text())
    })
    .parent()
    .show()
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-16T20:12:01.420

最近我需要这种类型的工作，我找到了一个很好的解决方案。[在我选择的元素旁边](https://stackoverflow.com/questions/1746330/jquery-popout-div-next-to-element-of-my-choice)查看这个jQuery popout div

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-20T09:03:09.557

此代码搜索整个字符串

```
$( '#input-text' ).keyup( function () {
    var value = $( this ).val();
   $( '#filter-parant > .filter-div' ).each( function () {
        $('.filter-div:contains("' + value + '")').show();
        $('.filter-div:not(:contains("' + value + '"))').hide();

    } );
} ); 
```

**我希望这能帮到您**

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-06-27T15:02:34.567

这是您应该考虑使用和创建的脚本。您还应该使用`<ul>`and `<li>`。

```
(function($){
    $.tzFilter = function(jq, phrase, type, column, ifHidden){
        var new_hidden = false;
        if(this.last_phrase === phrase){
            return false;
        }

        if(!type){
            type = 'ul';
        }

        var phrase_length = phrase.length;
        var words = phrase.toLowerCase().split(' ');

        var matches = function(elem){
            elem.show()
        }
        var noMatch = function(elem){
            elem.hide();
            new_hidden = true
        }
        var getText = function(elem){
            return elem.text()
        }

        if(column){
            var index = null;
            if(type == 'table'){
                jq.find('thead > tr:last > th').each( function(i){
                    if( $.trim($(this).text()) == column ){
                        index = i; return false;
                    }
                });
            } else if (type == 'ul'){
                jq.find("li").each(function(i){
                    if(!$(this).attr('display', 'none')){
                        if( $.trim($(this).text()) == column ){
                        index = i; return false;
                        }
                    }
                });
            }

            if(index == null){
                throw('Index non trouvée: ' + column + '')
            }

            if(type == 'table'){
                getText = function(elem){
                    return jQuery(elem.find(('td:eq(' + index + ')')  )).text();
                }
            } else if (type == 'ul') {
                getText = function(elem){
                    return jQuery(elem.find(('"li:eq(' + index + ')')  )).text();
                }
            }
        }

        // On a simplement ajouté une lettre, on va regarder pour le nouveau mot, sans devoir tout regarder à nouveau
        if((words.size > 1) && (phrase.substr(0, phrase_length - 1) === this.last_phrase)){
            if(phrase[-1] === ' '){
                this.last_phrase = phrase;
                return false;
            }

            // On va chercher uniquement pour le nouveau mot
            var words = words[-1];

            // On cache uniquement les tables visibles
            matches = function(elem) {;}

            if(type == 'table'){
                var elems = jq.find('tbody > tr:visible');
            } else if (type == 'ul'){
                var elems = jq.find('li:visible');
            }
        } else {
            new_hidden = true;

            if(type == 'table'){
                var elems = jq.find('tbody > tr')
            } else if (type == 'ul') {
                var elems = jq.find('li')
            }
        }

        elems.each(function(){
            var elem = $(this);
            $.tzFilter.has_words(getText(elem), words, false) ? matches(elem) : noMatch(elem);
        });

        last_phrase = phrase;

        if(ifHidden && new_hidden){
            ifHidden();
        }
        return jq;
    };

    // On cache pour accélérer le tout
    $.tzFilter.last_phrase = ""

    $.tzFilter.has_words = function(str, words, caseSensitive){
        var text = caseSensitive ? str : str.toLowerCase();
        for (var i=0; i < words.length; i++){
            if(text.indexOf(words[i]) === -1){
                return false;
            }
        }
        return true;
    }
})(jQuery); 
```

# c++ - 从 operator== 隐式调用构造函数

> ID：11229135
> 
> 赞同：3
> 
> 时间：2012-06-27T14:57:16.000
> 
> 标签：c++, operators, implicit-conversion, implicit

我有以下代码：

```
class Employee {
friend string FindAddr( list<Employee> lst,string name );
public:
Employee(const string& s){ cout << "Employee CTOR" << endl;}
bool operator==( Employee& e) {
    return e.name == name;
}
private:
string name;
string addr;
};

string FindAddr( list<Employee> lst, string name ) { 
string result = "";
for( list<Employee>::iterator itr = lst.begin(); itr != lst.end(); itr++ ) { 
    if ( *itr == name ) { // Problematic code
        return (*itr).addr;
    }
}
return result;
} 
```

据我了解，有问题的行`if ( *itr == name )`应遵循以下步骤：

1.  认识它是`operator==`在课堂上`Employee`。
2.  试图弄清楚是否存在从`string name`to的转换，`Employee`以便操作员可以工作。
3.  隐式调用 `Employee(const string& s)`object 上的构造函数`string name`。
4.  继续`operator==`。

但是，这一行在编译时给我带来了麻烦：

```
Invalid operands to binary expression ('Employee' and 'string' (aka 'basic_string<char>')) 
```

即使我显式调用构造函数：

`if ( *itr == Employee::Employee(name) )`

我犯了同样的错误。

这令人困惑。我很难理解隐式构造函数调用何时起作用（以及为什么即使我显式调用构造函数代码也不起作用）。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T15:06:16.413

规则是：
**临时对象只能绑定到`const`引用。**

正如您提到的那样`==`，该类型
的对象需要转换为 type ，您的类中的转换运算符应该可以实现这一点。然而，创建的对象是一个临时对象。即一个没有名字的对象，它的寿命不够长，不需要一个名字。这样一个无名的临时对象不能绑定到一个非常量引用。^([参考 1]) 所以你需要的是一个 const 参考：`name``std::string``Employee``Employee``Employee`

```
bool operator==(const Employee& e)
                ^^^^^^ 
```

* * *

^([参考 1])
**规则的**
动机：这个特定规则的动机由 Bajrne 在*C++ 的设计和演变的第 3.7 节中概述。*

> 但是，我犯了一个严重的错误，即允许非常量引用由非左值初始化。例如：

```
void incr(int &rr) {r++;}    

void g()
{
    double ss = 1;
    incr(ss);    //note: double passed int expected
} 
```

> 由于类型的不同，`int&`无法引用`double`传递的内容，因此生成了一个临时文件来保存由`ss`的值初始化的 int。因此`incr()`修改了临时的，结果没有反映回函数。

因此很多时候临时对象是在函数调用中在不知不觉中生成的，在这些函数调用中它们是最不期望的，并且可能（错误地）假设它们的函数在传递的原始对象上工作，而函数在临时对象上运行。因此很容易编写一个假设一件事并做另一件事的代码。因此，为了避免这种容易误导的情况，制定了规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:02:37.380

`*itr`给你一个`Employee`，所以你正在比较`Employee`一个字符串，`name`。

你需要的是`if ( *itr.name == name )`

这样，您就可以将`Employee`列表名称中的 与您正在搜索的名称进行比较。

# ios - ios - 带有 pdf 的 UIWebView 书签错误

> ID：11229137
> 
> 赞同：1
> 
> 时间：2012-06-27T14:57:17.577
> 
> 标签：ios, pdf, uiwebview, pdf-generation

我有一些代码可以从文本文件生成 pdf，并使用 和 将书签添加到所述 pdf 中的各个`UIGraphicsAddPDFContextDestinationAtPoint`位置`UIGraphicsSetPDFContextDestinationForRect`。`UIWebView`似乎存在错误，单击某些书签会暂时呈现其他书签以将视图发送到文档顶部。我说“暂时”是因为单击未受影响的书签似乎会重置所有书签，以便它们指向它们应该指向的位置。

这似乎不是编码问题，因为它只发生在`UIWebView`. 当我在 iBooks 中打开 pdf 时，链接总是可以正常工作。但是，我更愿意在应用程序中查看 pdf，而我知道的唯一其他方法（`UIImageView`& `UISliderView`）可能会完全消除书签。所以我希望有办法解决这个问题，`UIWebView`这样这个问题就不会再发生了。

有什么建议么？

# php - 通过返回的行数获取用户拥有的帖子数？

> ID：11229141
> 
> 赞同：0
> 
> 时间：2012-06-27T14:57:29.133
> 
> 标签：php, mysql

所以我有一个问题。我有正在开发的聊天/IM 网站，并且正在制作用户个人资料页面。我想显示该用户有多少帖子。

我之前遇到的另一个问题是，当我调用某个值时，它会返回一个“资源 #1”类型的字符串。但我通过使用得到了这个工作

```
$totalposts=mysql_query("SELECT * FROM `posts` WHERE Username='" . $username . "'");
$totalposts = mysql_fetch_row($totalposts);
$totalposts = $totalposts[0]; 
```

但这只是返回最新帖子的最后一个 postID。我认为 mysql_num_rows 会起作用。但是此代码返回错误（带有数字的示例）：

```
29: $totalposts=mysql_query("SELECT * FROM `posts` WHERE Username='" . $username . "'");
30: $totalposts = mysql_num_rows($totalposts);
31: $totalposts =mysql_fetch_row($totalposts);
32: $totalposts = $totalposts[0]; 
```

这将返回此错误：

```
Warning: mysql_fetch_row(): supplied argument is not a valid MySQL result resource in       /home/a9091503/public_html/im/user.php on line 31 
```

多谢你们。:) 我希望你能解决这个问题。:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:03:33.577

```
$res = mysql_query("SELECT COUNT(*) AS `count` FROM `posts` WHERE Username='$username'");
$row = mysql_fetch_assoc($res);
$totalposts = $row['count']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:02:43.877

```
$posts=mysql_query("SELECT * FROM `posts` WHERE Username='" . $username . "'");
$totalposts = mysql_num_rows($posts);
print "total posts by user = ".$totalposts 
```

如果您想显示评论或根据评论数量采取其他行动，您可以使用此查询。（这将减少多个查询，例如行数之一和内容之一）

如果您只对评论数量感兴趣 - 请按照上述答案之一中的建议使用以下查询。

```
SELECT count(*) FROM `posts` WHERE Username='$username' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:12:22.400

尝试这个;

```
$totalposts=mysql_query("SELECT COUNT(postID) FROM `posts` WHERE Username='" . $username . "'"); 
```

或者

```
$totalposts=mysql_query("SELECT COUNT(*) FROM `posts` WHERE Username='" . $username . "'"); 
$result= mysql_query($totalpost);
$totalposts = mysql_result($result, 0, 0) // return first row and first col
echo $totalpost; 
```

# iphone - EventKit 同步问题

> ID：11229142
> 
> 赞同：1
> 
> 时间：2012-06-27T14:57:32.743
> 
> 标签：iphone, ios, ios5, synchronization, eventkit

在我的应用程序中，我使用`EventKit`API 访问设备上的日历，并将它们显示在我的视图中。但是，在使用网络日历时，我怀疑它`EKEventStore`只会在查询时返回某种缓存/本地事件列表，而不是重新加载日历并返回实际/最新内容。
当启动本机日历应用程序时，应用程序将刷新/重新加载所有日历，同步任何网络共享日历。现在回到我的应用程序也将显示新同步的事件。

除此之外，我发现通过我的应用程序修改任何事件（删除/更新）并且`EventKit / EventKitUI`不会同步回例如我的 Mac 的日历。

长话短说：有没有办法强制与`EventKit`/iOS SDK 中的网络共享日历同步？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-26T13:02:54.180

1.  You can use the [- (void)refreshSourcesIfNecessary](http://developer.apple.com/library/ios/documentation/EventKit/Reference/EKEventStoreClassRef/Reference/Reference.html#//apple_ref/occ/instm/EKEventStore/refreshSourcesIfNecessary) method of an `EKEventStore` instance to:

    > ... pull new data from remote sources if the local data is out of date.

    This would force an update of the local calendar store by fetching the latest remote data. I have a feeling this is the method the native iOS Calendar app is using to prompt an update.

2.  As for the issue with deleted and updated calendar events not syncing to your Mac, are you sure you are calling [- (void)commit:](http://developer.apple.com/library/ios/documentation/EventKit/Reference/EKEventStoreClassRef/Reference/Reference.html#//apple_ref/occ/instm/EKEventStore/commit%3a) on your `EKEventStore` instance after you have made your modifications?

    Alternatively, there is a selection of methods within `EKEventStore` for saving and remove calendars and events that also offer a commit parameter which can immediately commit your changes. I would post the links but as a new user I can only use two hyperlinks.

    > `- (void)saveEvent:span:commit:error:`
    > `- (void)removeEvent:span:commit:error:`

    Assuming these events are being added to a cloud based calendar, this should have the effect of synchronising your changes to your Mac.

# php - 基于先前选择填充单个输入 - MYSQL PHP JS？

> ID：11229145
> 
> 赞同：0
> 
> 时间：2012-06-27T14:57:40.903
> 
> 标签：php, javascript, mysql

我想从 MYSQL 数据库中获取我的客户电话号码，并根据用户在之前的下拉框中选择客户将其自动填充到输入框中。

我过去在填写大量数据时设法做到了这一点，但我之前使用的似乎有很多代码来自动填充单个输入框。

我知道如何根据从前一页传递的数据填写客户电话（尽管我在这里删除了该位），但我希望这些数据在用户使用下拉菜单时动态更改。

必须有一种简单的方法来做到这一点，但我是 js 的完全新手（并且只精通 PHP 和 MYSQL）。谁能帮我一把？

我的 PHP/HTML：

```
$result = mysql_query("SELECT cust_id, name, phone FROM customers ORDER BY name ASC");
$customers = mysql_fetch_array($result);

<label for="customer">Customer:</label>
<select name="customer">
    <option value="0">Add New Customer</option>
        <? foreach ($customers as $customer): ?>
            <option value="<?=$customer['cust_id']?>" <?=($customer['cust_id'] == $parts['cust']) ? "selected" : ""?>><?=$customer['name']?></option>
        <? endforeach; ?>
</select>

<label for="custphone">Customer Phone:</label>
<input type="text" name="custphone" value=""> 
```

如果您需要我的其他任何东西，请告诉我，并提前感谢您在这方面的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:20:31.920

对于这个答案，我将使用 jQuery 语法，jQuery 是一个免费的 javascript 库，您将来肯定会使用它，[阅读更多](http://jquery.com/)。
要恢复，我们将使用由您的元素触发的事件`select`，当他的值更改时，我们将处理带有一些参数的 AJAX 请求到 PHP 页面 (ajax.php)，该页面返回先前选择的客户的电话号码。

首先，您需要在 HTML 网页中包含带有`<script>`标记的 jQuery 脚本。

```
<script src="path/to/jquery.js"></script> 
```

第二次，我们将创建一个新的 javascript 脚本（假设您在 HTML 元素中添加了一些 id）：

```
<script type="text/javascript">
    $(document).ready(function(){ // When the document is ready
         $("select#customers").on("change",function(){ // We attach the event onchange to the select element
             var customer_id = this.value; // We retirve the customer's id
             $.ajax({
                 url : "path/to/ajax.php", // path to you php file which returns the phone number
                 method : "post", // We want a POST request 
                 data : "customer_id="+customer_id, // You'll retrieve this data in your $_POST variable in ajax.php : $_POST['customer_id']
                 success: function(response) { // The function to execute if the request is a -success-, response will be the customer phone number
                     $("input#custphone").value(response); // Fill the phone number input 
                 }
             });
         });
    });
</script> 
```

现在，您已经准备好继续，您应该阅读有关[jQuery](http://jquery.com)和[AJAX](http://en.wikipedia.org/wiki/AJAX)的信息。您只需创建“ajax.php”，使用`$_POST`变量检索您的客户 ID，处理 SQL 查询以检索电话号码，然后使用`echo`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:14:26.377

听起来您想研究[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)。[`jQuery.ajax()`](http://api.jquery.com/jQuery.ajax/)让它很容易。

基本上，您在服务器上有一个页面，它查询数据库并返回一个[JSON 编码](http://php.net/manual/en/function.json-encode.php)的字符串，javascript 可以将其转换（使用[`jQuery.parseJSON`](http://api.jquery.com/jQuery.parseJSON/)）回一个数组并填充列表！

用于[`.change()`](http://api.jquery.com/change/)将事件绑定到下拉列表的更改事件。This will fire whenever the selection changes. 在内部，您想要获取值（参见该页面上的演示）并向服务器发送 AJAX 请求。

服务器上的 PHP 脚本将查询数据库并返回一个 JSON 字符串。在`success`jQuery AJAX 块的功能中，您可以使用解码的信息填充新列表。有关如何将项目添加到选择的教程，请参阅[此页面。](http://www.electrictoolbox.com/jquery-add-option-select-jquery/)

# ruby-on-rails - 是否可以将参数从模型中的 before_create 传递？

> ID：11229150
> 
> 赞同：3
> 
> 时间：2012-06-27T14:57:56.970
> 
> 标签：ruby-on-rails

我有一个模型，例如：

```
class Account < ActiveRecord::Base

  before_create :build_dependencies

  def build_dependencies
    # use nifty params to build this related object
    build_nifty_object(params)
  end 
```

初始参数通过 Account#new 表单上的隐藏表单标签发送。

但是没有理由/不需要将这些参数保存到帐户模型中。我只需要在 NiftyObject 模型中使用它们。

有没有巧妙的方法将这些参数传递给 before_create 方法？或者任何其他可能完成相同任务的替代方案？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:05:05.833

您可以使用实例变量来解决此问题，并从控制器执行 +1 步骤：

```
class Account < ActiveRecord::Base

  before_create :build_dependencies

  def assign_params_from_controller(params)
    @params = params
  end

  def build_dependencies
    # use nifty params to build this related object
    build_nifty_object(@params)
  end 
```

在控制器中：

```
 def Create
    account = new Account(params)
    account.assign_params_from_controller( ... )
    account.save   # this will trigger before_create
  end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T16:22:53.663

我很感谢大家的回答。但我最终还是`attr_accessor`选择了一个。这样，它不会在任何地方保存任何内容，但仍然可以从模型中的`before_create`方法中访问。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T15:12:53.133

我相信活动记录回调循环在大多数情况下都会伤害到你，包括这一点。我建议您使用协调 Account 和 nifty-object 的创建的服务对象，而不是使用 before_create。

我假设您希望 nifty-object 了解该帐户，因此我将其传递给它的 create 方法。

```
class CreatesAccount
  def self.create(params)
    account = Account.new(params)
    return account unless account.valid?
    ActiveRecord::Base.transaction do
      account.save!
      NifyObject.create(params, account: account)
      return account
    end
  end
end 
```

# knockout.js - 更新模型内部的可观察对象，但不触发剔除模型的相关事件

> ID：11229156
> 
> 赞同：1
> 
> 时间：2012-06-27T14:58:05.347
> 
> 标签：knockout.js, knockout-2.0

嗨，我有一个由变量持有的淘汰赛模型：

```
var knockoutObject = knockoutObservable; 
```

如果我这样做：

```
knockoutObject(newValue); 
```

它触发了敲除（？）的绑定事件并刷新了用户界面我如何在不影响整个屏幕的情况下更新敲除Observable的值？换句话说：更新模型上的值但不更新 UI

我知道这有点奇怪，因为这是与 MVVM 的交易，但我需要它用于特定场景......

编辑：我想要做什么：我在屏幕上有一些 jsTrees。它们受限于模型。当我更新模型中的某个 observable 时，所有的树都被重新渲染并关闭到默认状态。它给了我一个糟糕的用户体验
，所以因为当我在树中更改一个值时 UI 已经更新为正确的值（这就是我构建它的方式）我不需要淘汰赛来重新渲染树。只是模型上的值。

我有一个用于树的自定义绑定处理程序：

```
ko.bindingHandlers.Tree 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:02:32.133

您可以使用[油门](http://knockoutjs.com/documentation/throttle-extender.html)来延迟执行 - 但您可能希望以不同的方式处理整个问题。通过对您要解决的问题有更多的了解，我们可能会提出更好的替代方案。

更新（来自评论）：

**理想情况下，绑定不应该重新创建 jsTree 插件，而只是修改它的内部结构。这是这样做的首选方式。**

如果你不能这样做，看看你是否可以缓存绑定中的状态并使用以前的状态重新创建 jsTree

# php - PHP - 以没有 eval() 的多维数组元素为目标

> ID：11229167
> 
> 赞同：0
> 
> 时间：2012-06-27T14:58:37.367
> 
> 标签：php, multidimensional-array, eval

目标是通过 custom_format() 传递特定的数组元素。

**示例：**如果 $hierarchy = '4:0:2'，则 $data[4][0][2] = custom_format($data[4][0][2])。

有谁知道如何在**不依赖 eval()**的情况下复制以下代码？

当前代码：

```
$hierarchy = '4:0:2';
$hierarchy = str_replace(':', '][', $hierarchy);
eval("\$data[$hierarchy] = custom_format(\$data[$hierarchy]);"); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:34:46.980

一个过于冗长但优雅的选项如下：

```
class MyArray implements ArrayAccess {
    public function offsetExists($offset) {
        if(!is_array($offset))
            $offset = explode(':', $value);
        $key = array_shift($offset);
        if($key !== NULL) {
            if($this->$key InstanceOf MyArray) {
                return(isset($this->$key[$offset]));
            }
        }
    }
    public function offsetGet($offset) {
        if(!is_array($offset))
            $offset = explode(':', $value);
        $key = array_shift($offset);
        if($key !== NULL) {
            if($this->$key InstanceOf MyArray) {
                return($this->$key[$offset]);
            }
        }
    }
    public function offsetSet($offset, $value) {
        if(!is_array($offset))
            $offset = explode(':', $value);
        $key = array_shift($offset);
        if($key !== NULL) {
            if(!($this->$key InstanceOf MyArray)) {
                $this->$key = new MyArray;
            }
            $this->$key[$offset] = $value;
        }
    }
    public function offsetUnset($offset) {
        if(!is_array($offset))
            $offset = explode(':', $value);
        $key = array_shift($offset);
        if($key !== NULL) {
            if($this->$key InstanceOf MyArray) {
                return(unset($this->$key[$offset]));
            }
            if(count($offset) == 0) {
                return(unset($this->$key));
            }
        }
    }
} 
```

这确实意味着`MyArray`在您需要这种数组行为的任何地方使用，并且可能创建一个静态方法，该方法递归地转换数组并将子数组转换为 MyArray 对象，以便它们一致地响应此行为。

一个具体的例子是需要改变`offsetGet`方法，检查 $value 是否是 an`array`然后使用转换函数将其转换为 a`MyArray`如果你想访问它的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:00:47.110

像这样的东西怎么样：

```
<?php
$hierarchy = '4:0:2';
list($a,$b,$c) = explode(':',$hierarchy);
echo $data[$a][$b][$c];
?> 
```

# encryption - 我应该从散列生成密钥进行加密吗？

> ID：11229169
> 
> 赞同：2
> 
> 时间：2012-06-27T14:58:41.197
> 
> 标签：encryption, rijndael

我目前在 CBC 模式下使用 Rijndael 256 位加密一些需要发送到其他地方的数据。为了增强安全性，我采用随机生成的 SHA-256 散列并使用公式将其截断不同部分以使用加密密钥和初始化向量（当然，散列与数据一起发送）。生成密钥和 IV 的公式相当基本，因为代码是用 PHP 编写的，所以它被编码到用户可访问的页面中。我想知道的是：这是否比拥有一个恒定密钥和/或 IV 更安全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:10:46.530

这可能不是您想要的方式。从本质上讲，一个好的黑客很快就会找出你的数学公式来操纵 HASH 来生成你的密钥和 IV。因此，您本质上是将钥匙与王国本身一起发送到王国。

通常这种类型的操作完成的方式是生成一个会话密钥（可能和你现在做的一样），但是使用公钥加密方法来加密那个会话密钥。然后您使用公钥加密方法将会话密钥发送到您的数据要发送的位置。接收者拥有公钥并且可以加密通信。通道会话密钥。

现在双方都有通讯了。通道会话密钥和您的真实数据可以使用此密钥加密，因为会话密钥尚未明文发送。

Rijindael 是对称加密算法的一个示例，其中公钥加密算法是非对称的。公钥加密算法的示例有 RSA、ECDSA（加密）等......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T22:06:19.917

关于生成短期使用密钥。有一个长期密钥。与接收方商定日期格式。每天将您的长期密钥与当天的日期连接起来，并使用 SHA-256 对其进行散列以生成仅在该日期使用的日期密钥：

```
dayKey <- SHA256("my very secret long term key" + "2012-06-27") 
```

接收者将拥有生成完全相同的密钥所需的所有信息。任何攻击者都会知道日期，但不会知道长期密钥。

您需要同意午夜前后的协议和其他一些细节。

根据您传递的加密数据量，每两个月更改一次长期密钥。您传递的数据越多，您需要更改长期密钥的频率就越高。

# javascript - 实现滚动条，但光标根本不动？另外，如果你能告诉我如何在其中嵌入鼠标滚动？

> ID：11229170
> 
> 赞同：-1
> 
> 时间：2012-06-27T14:58:42.977
> 
> 标签：javascript, html, css, web, scrollbar

**我的 css 代码：**这是用于滚动条视图和条的移动

```
#updateHolder {      /*this describes the outer structure of the scroll bar  */
    width: 300px;  /* <= For Width: change the width value */
    color: #333;   /***/
    margin-top: 10px;    /***/
    overflow: hidden;    /***/
    border:0px solid #CCCCCC;    /***/
}

#updateContainer {                      /***/
    background-color: white;           /***/
    position: relative;                 /***/
    cursor: pointer;                   /***/    

}

#updateContent {
    background: #fff;
    position: absolute;
    padding-right: 12px;
}

#updateScollBar {                           /***/
    background: #F2F2F2;                       /***/
    border-left: 1px solid #DADADA;              /***/
    position: absolute;
    width: 10px;                             /***/
    right: 0;                              /***/
    bottom: 0;                          /***/
    cursor: default;
    zoom: 1;
    filter: alpha(opacity=25); /* For IE8 and earlier */
    opacity: 0.25;
}

#updateScollScrubber {
    background-color: 909090;
    width: 9px;
    height: 100px;
    position: absolute;
    border-left:1px solid #676767;
    border-top:1px solid #676767;

}

#updateScollBar, #updateContainer, #updateHolder {
    height: 300px; /* <= For Height: change the height value */ } 
```

**Javascript代码：**虽然我提到它的方式不同，但我已经将它嵌入到我粘贴在它下面的html代码中

```
$(document).ready(function(){     //This code doesnt enable mouse-scrolling

    var _offsetY = 0,
    _startY = 0,
    scrollStep = 10,
    isScrollBarClick = false,
    contentDiv,
    scrubber,
    scrollHeight,
    contentHeight,
    scrollFaceHeight,
    initPosition,
    initContentPos,
    moveVal,
    scrubberY = 0;

    element = document.getElementById("updateHolder");
    if (element.addEventListener)
        /** DOMMouseScroll is for mozilla. */
        element.addEventListener('DOMMouseScroll', wheel, false);
    /** IE/Opera. */
    element.onmousewheel = document.onmousewheel = wheel;

    // To resize the height of the scroll scrubber when scroll height increases.
    setScrubberHeight();

    contentDiv = document.getElementById('updateContainer');

    scrubber = $('#updateScollScrubber');

    scrollHeight = $('#updateScollBar').outerHeight();

    contentHeight = $('#updateContent').outerHeight();

    scrollFaceHeight = scrubber.outerHeight();

    initPosition = 0;            /***/

    initContentPos = $('#updateHolder').offset().top;             /***/

    // Calculate the movement ration with content height and scrollbar height
    moveVal = (contentHeight - scrollHeight)/(scrollHeight - scrollFaceHeight);

    $('#updateHolder').bind('mousewheel', wheel);

    $("#updateScollScrubber").mouseover(function() {
        // Enable Scrollbar only when the content height is greater then the view port area.
        isScrollBarClick = false;
        if(contentHeight > scrollHeight) {
            // Show scrollbar on mouse over
            $(this).animate({opacity: 1});
            scrubber.bind("mousedown", onMouseDown);
        }
    }).mouseout(function() {
        isScrollBarClick = false;
        if(contentHeight > scrollHeight) {
            // Hide Scrollbar on mouse out.
            $(this).animate({opacity: 0.25});
            $('#updateHolder').unbind("mousemove", onMouseMove);
            scrubber.unbind("mousedown", onMouseDown);
        }
    });

    $("#updateScollBar").mousedown(function(){              /***/
        isScrollBarClick = true;                           /***/
    }).mouseout(function(){
        isScrollBarClick = false;                            /***/
    }).mouseup(function(event) {
        if( isScrollBarClick == false )
             return;
        if ((event.pageY - initContentPos) > (scrollHeight - scrubber.outerHeight())) {
            scrubber.css({top: (scrollHeight - scrubber.outerHeight())});
        }else{
            scrubber.css({top: (event.pageY - initContentPos) - 5});
        }
        $('#updateContent').css({top: ((initContentPos - scrubber.offset().top) * moveVal)});
    });

    function onMouseDown(event) {
        $('#updateHolder').bind("mousemove", onMouseMove);
        $('#updateHolder').bind("mouseup", onMouseUp);
        _offsetY = scrubber.offset().top;
        _startY = event.pageY + initContentPos;
        // Disable the text selection inside the update area. Otherwise the text will be selected while dragging on the scrollbar.
        contentDiv.onselectstart = function () { return false; } // ie
        contentDiv.onmousedown = function () { return false; } // mozilla
    }

    function onMouseMove(event) {

        isScrollBarClick = false;
        // Checking the upper and bottom limit of the scroll area
        if((scrubber.offset().top >= initContentPos) && (scrubber.offset().top  (initContentPos + scrollHeight - scrollFaceHeight)) {
                scrubber.css({top: (scrollHeight-scrollFaceHeight-2)});
                $('#updateContent').css({top: (scrollHeight - contentHeight + initPosition)});
            }
            $('#updateHolder').trigger('mouseup');
        }
    }

    function onMouseUp(event) {
        $('#updateHolder').unbind("mousemove", onMouseMove);
        contentDiv.onselectstart = function () { return true; } // ie
        contentDiv.onmousedown = function () { return true; } // mozilla
    }

    function setScrubberHeight() {                         /***/
        cH = $('#updateContent').outerHeight();
        sH = $('#updateScollBar').outerHeight();
        if(cH > sH) {
            // Set the min height of the scroll scrubber to 20
            if(sH / ( cH / sH ) < 20) {              $('#updateScollScrubber').css({height: 20 });           }else{              $('#updateScollScrubber').css({height: sH / ( cH / sH ) });             }       }   }   function onMouseWheel(dir) {         scrubberY = scrubber.offset().top + (scrollStep * dir) - initContentPos;         if ((scrubberY) > (scrollHeight - scrubber.outerHeight())) {
            scrubber.css({top: (scrollHeight - scrubber.outerHeight())});
        }else {
            if(scrubberY < 0) scrubberY = 0;
            scrubber.css({top: scrubberY});
        }
        $('#updateContent').css({top: ((initContentPos - scrubber.offset().top) * moveVal)});
    }

    /** This is high-level function.
     * It must react to delta being more/less than zero.
     */
    function handle(delta) {
            if (delta < 0) {
                onMouseWheel(1);
            }
            else {
                onMouseWheel(-1);
            }
    }

    /** Event handler for mouse wheel event. /***/
     */
    function wheel(event){   /***/
            var delta = 0;    /***/
            if (!event) /* For IE. */    /***/
                    event = window.event;  /***/
            if (event.wheelDelta) { /* IE/Opera. */
                    delta = event.wheelDelta/120;
            } else if (event.detail) { /** Mozilla case. */
                    /** In Mozilla, sign of delta is different than in IE.
                     * Also, delta is multiple of 3.
                     */
                    delta = -event.detail/3;
            }
            /** If delta is nonzero, handle it.
             * Basically, delta is now positive if wheel was scrolled up,
             * and negative, if wheel was scrolled down.
             */ /***/ /***/ /***/ /***/ /***/ /***/ /***/ /***/
            if (delta)
                    handle(delta);
            /** Prevent default actions caused by mouse wheel.
             * That might be ugly, but we handle scrolls somehow
             * anyway, so don't bother here..
             */
            if (event.preventDefault)
                    event.preventDefault();
            event.returnValue = false;
    } }); 
```

**HTML代码在这里**我不确定，但我认为我在这里犯了一些错误

```
 <link rel="stylesheet" type="text/css" href="Css_file.css" media="screen" />

<div id="updateHolder">
    <div id="updateContainer">
    <div id="updateContent">

//Placing my content here

     Dummy Text <img src="http://articles.tutorboy.com/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley">
    msg
orem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. orem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. 
    </div>

    <div id="updateScollBar">
        <div id="updateScollScrubber">
        </div>
    </div>

    </div>
</div>

</body>

</html> 
```

对于糟糕的 html 表示非常抱歉，因为我无法正确表示标签。任何帮助将非常感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:15:55.917

很难准确地说出你在问什么，但如果你只是想添加一个滚动条，你可以像这样把它放到你的 div 标签中；

```
<div id="updateHolder" style="width: 300px; height: 100px; overflow: auto"> 
```

[这](http://jsfiddle.net/gonzy/4S7kL/) 是一个运行中的jsfiddle

# javascript - 主干.js - 拥有同一个视图的多个实例

> ID：11229176
> 
> 赞同：1
> 
> 时间：2012-06-27T14:59:01.843
> 
> 标签：javascript, backbone.js

我在不同 div 元素中的同一视图中有多个实例时遇到问题。当我尝试初始化它们时，无论我将它们放入什么顺序，都只会出现两个元素中的第二个。

这是我的观点的代码。

```
 var BodyShapeView = Backbone.View.extend({
    thingiview: null,
    scene: null,
    renderer: null,
    model: null,
    mouseX: 0,
    mouseY: 0,

events:{
  'click button#front' : 'front',
  'click button#diag' : 'diag',
  'click button#in' : 'zoomIn',
  'click button#out' : 'zoomOut',
  'click button#on' : 'rotateOn',
  'click button#off' : 'rotateOff',
  'click button#wireframeOn' : 'wireOn',
  'click button#wireframeOff' : 'wireOff',
  'click button#distance' : 'dijkstra'
},

initialize: function(name){
  _.bindAll(this, 'render', 'animate');

     scene = new THREE.Scene();
     camera = new THREE.PerspectiveCamera( 15, 400 / 700, 1, 4000 );
     camera.position.z = 3;
     scene.add( camera );
     camera.position.y = -5;

     var ambient = new THREE.AmbientLight(  0x202020 );
     scene.add( ambient );

     var directionalLight = new THREE.DirectionalLight( 0xffffff, 0.75 );
     directionalLight.position.set( 0, 0, 1 );
     scene.add( directionalLight );

     var pointLight = new THREE.PointLight( 0xffffff, 5, 29 );
     pointLight.position.set( 0, -25, 10 );
             scene.add( pointLight );

     var loader = new THREE.OBJLoader();
     loader.load( "img/originalMeanModel.obj", function ( object ) {

        object.children[0].geometry.computeFaceNormals();
        var  geometry = object.children[0].geometry;
                console.log(geometry);
        THREE.GeometryUtils.center(geometry);
        geometry.dynamic = true;
        var material = new THREE.MeshLambertMaterial({color: 0xffffff, shading: THREE.FlatShading, vertexColors: THREE.VertexColors });
        mesh = new THREE.Mesh(geometry, material);
        model = mesh;
        // model = object;
        scene.add( model );
     } );

     // RENDERER
     renderer = new THREE.WebGLRenderer();
     renderer.setSize( 400, 700 );
     $(this.el).find('.obj').append( renderer.domElement );

    this.animate();

}, 
```

这是我创建实例的方式

```
var morphableBody = new BodyShapeView({ el: $("#morphable-body") });

  var bodyShapeView = new BodyShapeView({ el: $("#mean-body") }); 
```

任何帮助将非常感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:14:11.437

该`el`属性只需要一个 jQuery 样式选择器字符串。尝试：

```
var morphableBody = new BodyShapeView({ el: "#morphable-body" });
var bodyShapeView = new BodyShapeView({ el: "#mean-body" }); 
```

**更新**

此外，您的问题可能是您在定义、和.`this`时没有使用关键字。结果可能是第二个视图覆盖了第一个视图。尝试：`scene``camera``renderer`

```
this.scene = new THREE.Scene();
this.camera = new THREE.PerspectiveCamera( 15, 400 / 700, 1, 4000 );

...

// RENDERER
this.renderer = new THREE.WebGLRenderer();
this.renderer.setSize( 400, 700 );
$(this.el).find('.obj').append( this.renderer.domElement ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:29:23.970

在您的`initialize`方法中，您访问全局变量而不是实例变量：`scene = new THREE.Scene();`实际上将引用`window.scene`.

检查这个例子

```
var BodyShapeView = Backbone.View.extend({
    scene:null,
    initialize:function(opts) {
        scene=opts.scene;
    }
});

var s1=new BodyShapeView({scene:'s1'});
var s2=new BodyShapeView({scene:'s2'});

console.log(window.scene);  //outputs s2
console.log(s1.scene); //outputs null 
```

[http://jsfiddle.net/K8tjJ/1/](http://jsfiddle.net/K8tjJ/1/)

将这些引用更改为`this.scene`,`this.camera`等。

```
var BodyShapeView = Backbone.View.extend({
    scene:null,
    initialize:function(opts) {
        this.scene=opts.scene;
    }
});

var s1=new BodyShapeView({scene:'s1'});
var s2=new BodyShapeView({scene:'s2'});

console.log(window.scene); //outputs undefined
console.log(s1.scene); //outputs s1 
```

[http://jsfiddle.net/K8tjJ/2/](http://jsfiddle.net/K8tjJ/2/)

此外，`loader.load`使用回调来处理其结果，您将（可能）丢失`this`函数中的引用。尝试

```
var _this=this;
loader.load( "img/originalMeanModel.obj", function ( object ) {
...
_this.scene.add( _this.mesh ); // or _this.model if you prefer, but beware

}); 
```

请注意，这`this.model`是 Backbone.View 中的一个特殊变量，如果您想将模型传递给您的视图，应小心处理。

# windows - 以下关于 UNREFERENCED_PARAMETER 的目的是什么？

> ID：11229180
> 
> 赞同：6
> 
> 时间：2012-06-27T14:59:11.343
> 
> 标签：windows, winapi

```
int APIENTRY _tWinMain(HINSTANCE hInstance,
                     HINSTANCE hPrevInstance,
                     LPTSTR    lpCmdLine,
                     int       nCmdShow)

UNREFERENCED_PARAMETER(hPrevInstance);
UNREFERENCED_PARAMETER(lpCmdLine); 
```

这里 UNREFERENCED_PARAMETER 的目的是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T15:03:06.160

它只是抑制关于函数中未使用的两个参数的编译器警告。

宏本身可能只是定义为

```
#define UNREFERENCED_PARAMETER(x) (x) 
```

所以它引用了它的论点，但什么也不做。

# iphone - NSURLConnection 有可靠的替代方案吗？

> ID：11229183
> 
> 赞同：3
> 
> 时间：2012-06-27T14:59:23.353
> 
> 标签：iphone, ios, web-services, ipad, nsurlconnection

我的应用程序正在调用 Web 服务来检索一些数据，我希望尽可能地提供最佳体验。我发现使用`NSURLConnection`它很难及时提供良好的反馈。

有时我的 iPhone 会尝试加载数据一两分钟，但我看不出有什么方法需要这么长时间，或者为什么下载如此麻烦。然后几分钟后，我有时会得到一个错误代码。

我想准确地显示正在发生的事情。像这样的消息：

1.  “建立互联网连接”
2.  “尝试连接服务器”
3.  “连接的...”
4.  “正在下载数据……”
5.  “下载完毕！”

当出现服务器无法访问或 DNS 无法解析等问题时，最好再试几次，而不是简单地退出并抛出错误。

是否有替代品可以`NSURLConnection`更优雅地处理这些事情并就正在发生的事情提供更好的及时反馈？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T15:11:07.690

我一直是[AFNetworking](https://github.com/AFNetworking/AFNetworking/)库的忠实粉丝。非常易于使用，并将所有网络调用包装在非常易于使用的块中。

它也保持最新状态，因此随着项目的进展和老化，您应该可以安全地获取所需的所有更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:09:45.507

我认为你应该误用 NSURLConnection 和 NSURLConnectionDelegate，因为你可以用它们来做大部分你需要的事情。

但是，[MKNetworkKit](http://blog.mugunthkumar.com/products/ios-framework-introducing-mknetworkkit/)呢？我一直在使用它，它确实使这些问题更容易处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:08:14.947

可以帮助你实现你想要的东西[。](https://github.com/MugunthKumar/MKNetworkKit)由于`ASIHTTPRequest`不再支持 MKNetworkKit 将是您的最佳选择。要检查连接性，您始终可以使用[Reachability](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)。

# javascript - 为什么在 IIS7 中托管我的 MVC3 项目时，我的 AJAX 加载第一次失败？

> ID：11229196
> 
> 赞同：2
> 
> 时间：2012-06-27T15:00:02.633
> 
> 标签：javascript, ajax, asp.net-mvc, asp.net-mvc-3, iis-7

我正在编写一个带有几个选项卡的 mvc 应用程序。我注意到当托管在 IIS 7 上时，主页有一个链接触发 JavaScript 函数以通过 AJAX 加载内容。

它在第一页加载时不起作用，但是当我访问其他一些选项卡并返回主页并单击链接时，它可以完美运行。有人能告诉我这是什么原因或如何避免吗？

### 加载代码

```
function GetLabels(project) {
    var xmlHttp;
    if (window.XMLHttpRequest) {
        xmlHttp = new XMLHttpRequest();
    }
    else {
        xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlHttp.onreadystatechange = function () {
        if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {
            document.getElementById("light").innerHTML = xmlHttp.responseText;
        }
    }
    xmlHttp.open("GET", "/Home/GetLabels?project="+project, true);
    xmlHttp.send();
    document.getElementById('light').style.display = 'block';
    document.getElementById('fade').style.display = 'block';
    document.getElementById("light").innerHTML = 
       "<img src='Content/load.gif' alt='Please wait' />";
} 
```

### 触发它的链接

```
Click <a href="javascript:void(0)" onclick="GetLabels('A')">here</a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T15:31:57.217

您不应该像这样对网址进行硬编码：

```
xmlHttp.open("GET", "/Home/GetLabels?project="+project, true); 
```

您应该始终使用 url 助手来生成它们：

```
xmlHttp.open("GET", "@Url.Action("GetLabels", "Home")?project=" + encodeURIComponent(project), true); 
```

现在，无论您是托管在 Visual Studio 的内置服务器还是 IIS 中，您的 AJAX 请求都可以正常工作。您的代码在 IIS 中不起作用的原因是，在 IIS 中，您的应用程序托管在一个虚拟目录中，您必须将其包含在您的 url 中。所以正确的 url 不是`/home/getlabels`，而是`/appname/home/getlabels`url helper 考虑的。

此外，由于您使用的是 GET 请求，因此 Web 浏览器可能会缓存结果并且永远不会再次向服务器发送请求。为避免这种情况，您应该将随机查询字符串参数附加到 url 或使用 POST 动词。

# php - 当用户登录 Facebook 应用程序时，从 URL 中删除 ?state=

> ID：11229200
> 
> 赞同：-1
> 
> 时间：2012-06-27T15:00:07.257
> 
> 标签：php, facebook, url

> **可能重复：**
> [为什么我的网址显示 domain.com/?state=5a02... 而不仅仅是 domain.com？](https://stackoverflow.com/questions/11223716/why-does-my-url-show-domain-com-state-5a02-instead-of-just-domain-com)

我以前问过这个问题，但我太模糊了。当用户登录我的 Facebook Web 应用程序时，URL 以`?state=`和结尾`&code=`。例如，

```
http://example.com/?state=asfsfs05sfd&code=afsafaf98790saf 
```

我怎样才能删除它只给`http://example.com`？

我已阅读本教程：[php - remove "code" param in facebook app URL](https://stackoverflow.com/questions/7012801/php-remove-code-param-in-facebook-app-url)

我的身份验证过程是否不完整？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:02:42.920

不要让它重定向到`domain.com`，而是重定向到`domain.com/finishfacebookauth.php?state=...`.

在`finish`页面上，您可以使用状态和代码执行您需要执行的操作（例如将它们存储在会话或数据库中，不知道是否以及何时再次需要它们），然后重定向到`domain.com`.

# javascript - diji.Tree + JsonRestStore - 使用 tree.set("path" 以编程方式选择节点

> ID：11229201
> 
> 赞同：2
> 
> 时间：2012-06-27T15:00:08.313
> 
> 标签：javascript, ajax, tree, dojo

我有这个问题。我使用 dijit.Tree 和 dojox.data.JsonRestStore 作为数据源。所有节点都是延迟加载的。当我尝试使用 tree.set("path", [1,2]) 以编程方式选择一个节点时，我收到一条错误消息“无法在未定义处展开路径”

动态加载树结构时是否可以使用 tree.set("path"...) ？

我的代码包含 2 个文件。source.php 是数据源的实现

1.  tree.php 可在此处获得 [http://jsfiddle.net/hd2MZ/2/](http://jsfiddle.net/hd2MZ/2/)

2.  source.php 可在此处获得 [http://jsfiddle.net/6zu3d/](http://jsfiddle.net/6zu3d/)

请帮忙 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:06:25.503

我看到了几个潜在的问题......

1.  您需要从根节点开始指定所需节点的路径。
2.  您使用的是**ForestStoreModel**，它在后台创建了一个根节点，因为您在初始化模型时没有指定根节点的 id，因此**ForestStoreModel**默认将使用*'$root$'*作为根节点的 id。
3.  我相信数据存储中项目的 id 是字符串......而不是整数。

...您尝试设置路径的地方我会尝试以下操作：

```
tree.set("path", ['$root$', '1', '2']); 
```

# bash - 使用切换和无切换语法时如何解析 Bash 中的参数？

> ID：11229202
> 
> 赞同：0
> 
> 时间：2012-06-27T15:00:13.803
> 
> 标签：bash, arguments, command-line-arguments, optional-parameters

我有一个 bash 脚本，它可以接受各种不同格式的参数：

格式1：（`myscript.sh value1 value2 [value3 value4] -p -g`在有参数的选项上没有开关/标志，对于没有参数的选项有开关，哪些字符串对应于哪些值，部分由给出的值的顺序决定，部分由字符串内容的正则表达式匹配决定)

格式 2：（`myscript.sh -s value1 -t value2 [-v value3 -w value4] -p -g`标准选项带和不带参数格式，易于处理`getopts`）

格式 3：`myscript.sh --longopt value1....`等（标准的带和不带 args 的长选项格式）。

这是愚蠢的部分：语法可以组合：`myscript.sh -p value1 value3 --longopt value4 -t value2 -g`应该是有效的，`value1`并且`value3`被正则表达式或相对于其他参数的位置检测到。

数十个团队以不同的方式使用此脚本，其中大多数是自动化的，每个人都希望保留与他们的使用方法的遗留兼容性。我有一个庞大的、丑陋的、完全手动的选项解析器来处理所有三种不同的语法。每次我需要添加一个选项并保持兼容性时，我都觉得我需要先喝一杯伏特加。

我的问题：

Bash/Unix 中是否有任何实用程序可以简单、清晰、健壮地解析像这样的选项语法？在这一点上，我的替代方案是继续使用手动解析器，或者只是在脚本中嵌入一堆 Python/optparse 代码并使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:10:53.573

你试过**getopts**吗？

```
while getopts "s:t" OPTION
do
     case $OPTION in
         s)
             VALUE1=$OPTARG
             ;;
                 t)
             VALUE2=$OPTARG
             ;;
             exit
             ;;
         ?)
                #Other stuff
     esac
done 
```

# web-services - Get 和 post 方法与 HTTP 和 REST 的区别

> ID：11229206
> 
> 赞同：8
> 
> 时间：2012-06-27T15:00:23.247
> 
> 标签：web-services, http, rest, httpwebrequest, client-server

我是 REST 新手。我想知道何时使用 get 方法以及何时使用 post 方法。在我的文献调查过程中，我遇到了这些知识。

实际上，当我搜索 HTTP get 和 post 方法时，我读到 get 不编码 URL 并且 post 编码 URL

当我搜索 rest get 和 post 方法时，我读到 get 方法用于从服务器检索数据，而 post 方法是向服务器添加一些数据。

但我也读到，rest 只不过是使用 HTTP 的约定。

所以我觉得这里有些事情是矛盾的。HTTP的方法有什么不同吗？

请说清楚。也欢迎任何关于何时使用 get 和 post 方法的建议

我从中获得此信息的资源：

[https://www.ibm.com/developerworks/webservices/library/ws-ful/](https://www.ibm.com/developerworks/webservices/library/ws-ful/)

[http://www.cs.tut.fi/~jkorpela/forms/methods.html](http://www.cs.tut.fi/~jkorpela/forms/methods.html)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-27T15:18:16.350

GET 应该用于检索资源。这个操作应该是幂等的，这意味着它不应该改变服务器上的任何状态。

应该使用 POST 向服务器添加新信息。这通常在代表资源“容器”的 URL 上执行。POST 将向该容器添加新资源。

PUT 应该用于更新现有资源。

DELETE 应该是显而易见的。

您可能会喜欢阅读以下内容：http: [//tomayko.com/writings/rest-to-my-wife](http://tomayko.com/writings/rest-to-my-wife)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:08:00.013

您的问题中尚未引起任何注意的部分可能会引起您的一些困惑，那就是：“REST 只不过是使用 HTTP 的约定。” 这是一种不准确的方式来描述 REST 是什么/做什么，它使用 HTTP 来操纵应用程序的状态。这被正式称为 HATEOAS - [http://en.wikipedia.org/wiki/HATEOAS](http://en.wikipedia.org/wiki/HATEOAS)并且几乎是 RESTful Web 服务概念的核心。

# android - 无法在自定义颜色选择器中使用标准 android 颜色属性

> ID：11229207
> 
> 赞同：3
> 
> 时间：2012-06-27T15:00:29.200
> 
> 标签：android, android-theme

因此，android 在中定义了以下内容`themes.xml`：

```
<style name="Theme">
    ...
    <item name="colorPressedHighlight">@color/legacy_pressed_highlight</item>
</style> 
```

和：

```
<style name="Theme.Holo">
    ...
    <item name="colorPressedHighlight">@color/holo_blue_light</item>
</style> 
```

我想在按下它时将它`colorPressedHighlight`用作我的自定义的背景颜色。`Button`所以我在中定义了以下内容`res/color/app_button_background.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:state_pressed="true"
        android:drawable="?android:colorPressedHighlight"/>
    <item android:drawable="@android:color/transparent" />
</selector> 
```

最后，我定义了我的自定义`ImageButton`样式：

```
<style name="App_ImageButtonStyle" parent="@android:style/Widget.ImageButton">
    <item name="android:gravity">center</item>
    <item name="android:background">@color/app_button_background</item>
</style> 
```

我使用以下调用堆栈在应用程序启动时崩溃：

```
06-27 20:24:41.954: E/AndroidRuntime(532): Caused by: org.xmlpull.v1.XmlPullParserException: Binary XML file line #6: <item> tag requires a 'drawable' attribute or child tag defining a drawable
06-27 20:24:41.954: E/AndroidRuntime(532):  at android.graphics.drawable.StateListDrawable.inflate(StateListDrawable.java:178)
06-27 20:24:41.954: E/AndroidRuntime(532):  at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:867)
06-27 20:24:41.954: E/AndroidRuntime(532):  at android.graphics.drawable.Drawable.createFromXml(Drawable.java:804)
06-27 20:24:41.954: E/AndroidRuntime(532):  at android.content.res.Resources.loadDrawable(Resources.java:1920) 
```

我知道直接访问`@color/legacy_pressed_highlight`或`@color/holo_blue_light`不是通过`colorPressedHighlight`修复程序访问它们会导致崩溃，但这并不能解决问题。主题可能会有所不同，因此我需要通过`colorPressedHighlight`属性访问它。

PS：我有一个类似的[问题](https://stackoverflow.com/questions/11189401/styled-background-used-in-layout-of-transparent-popupwindow-not-working)，我还没有找到答案。有人可以帮忙吗！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-13T22:26:00.147

也许您还需要在文件 res/values/attrs.xml 中声明属性引用：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <attr name="colorPressedHighlight" format="reference" />
</resources> 
```

并将其`?colorPressedHighlight`称为`?android:colorPressedHighlight`.

# jquery - 如何使用 NestedSoting 插件获取拖动元素的 ID

> ID：11229210
> 
> 赞同：0
> 
> 时间：2012-06-27T15:00:36.370
> 
> 标签：jquery, jquery-ui

我正在使用 JQuery 嵌套排序插件我可以拖放多个元素，如何获取被拖动元素的 id？

```
<script>
 $(document).ready(function(){

$('.sortable').nestedSortable({
    handle: 'div',
    items: 'li',
    toleranceElement: '> div'
});

});
</script> 
```

**编辑**

我像这样编辑了jquery函数

```
 $(document).ready(function(){
    var movedItemId = '';
    $('.sortable').nestedSortable({
        handle: 'div',
        items: 'li',
        toleranceElement: 'div',
    }).on("sort", function(a, item){
        movedItemId = '';
        $('div', item.item).each(function(){
            movedItemId += ' ' + $(this).attr('id') + ',';
        });
        var id = movedItemId.substr(0, movedItemId.length - 1);
        var data = {pid:id};
        $.ajax({
            type: "POST",
            data: data,
            url:"{{ path('v2_pm_patents_trashpatents') }}",
            cache: false,
        });
    });
});
</script> 
```

我面临的问题

1.  它调用了我想用 Ajax 执行的方法，但它调用了很多次，我只想执行一次该方法。

2.  当我拖动包含子项目的项目时，我只想要父项目的 id 而不是子项目的 id，

我该如何解决这些问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:11:59.723

[nestedSortable](http://mjsarfatti.com/sandbox/nestedSortable/)插件有一些限制。

它的主要方法是`.serialize`,`.toArray`或`.toHierarchy`获取整体价值。

该插件使用 jQuery 可排序 UI。我查看了它的事件回调。我试过了，`on("change", [...])`但这似乎不起作用。`on("sort", [...])`确实有效，但每次移动鼠标时都会调用它。查看“事件”选项卡下的不同事件：http: [//jqueryui.com/demos/sortable/](http://jqueryui.com/demos/sortable/)

这是绑定到`sort`回调的工作版本：http: [//jsfiddle.net/QL8Yj/4/](http://jsfiddle.net/QL8Yj/4/)

# django - 从 Django 中的一系列 id 中检索匹配对象的列表

> ID：11229212
> 
> 赞同：2
> 
> 时间：2012-06-27T15:00:40.867
> 
> 标签：django, django-models

我想实现一些相对简单的事情：我想从我的模型中检索给定一系列 id 的所有对象（例如，从一本书的章节中检索第 5 到 10 行）。

现在在我的views.py中，我已经：

```
def line_range(request, book_id, chapter_id, line_start, line_end):
   book_name = get_object_or_404(Book, id = book_id)
   chapter_lines = []
   for i in range (int(line_start), int(line_end)+1):
      chapter_lines .append(Line.objects.get(book = book_id, chapter = chapter_id, line = i))
return render_to_response('app/book.html', {'bookTitle': book_name, 'lines': chapter_lines }) 
```

现在，这显然不是最优化的处理方式，因为它会执行 n 次数据库查询，而它只能在一次中完成。有没有办法做类似的事情：

```
def line_range(request, book_id, chapter_id, line_start, line_end):
   book_name = get_object_or_404(Book, id = book_id)
   lines_range = range (int(line_start), int(line_end)+1)
   chapter_lines = get_list_or_404(Line, book = book_id, chapter = chapter_id, line = lines_range)
return render_to_response('app/book.html', {'bookTitle': book_name, 'lines': chapter_lines }) 
```

这在理论上会产生一个更好的数据库查询（1 而不是 n），并且在性能方面应该更好。当然，这种语法不起作用（期望一个整数，而不是一个列表）。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T15:05:47.023

我想你想要[`__range`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#range)：

> 范围测试（包括）。
> 
> 例子：
> 
> `start_date = datetime.date(2005, 1, 1)`
> `end_date = datetime.date(2005, 3, 31)`
> `Entry.objects.filter(pub_date__range=(start_date, end_date))`
> 
> SQL 等价物：
> 
> `SELECT ... WHERE pub_date BETWEEN '2005-01-01' and '2005-03-31';`
> 
> 您可以在任何可以在 SQL 中使用 BETWEEN 的地方使用 range —— 用于日期、数字甚至字符。

所以你会是，我认为：

```
chapter_lines = get_list_or_404(..., line__range=(int(line_start), int(line_end)+1)) 
```

同样，您可以使用[`__lt`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#lt), [`__gt`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#gt), [`__lte`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#lte),[`__gte`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#gte)进行片面比较。

我鼓励您始终保持打开 Django 文档的窗口。如果你只是看的话，那里有很多很棒的信息。

# java - 用于 IDEA 的 CheckStyle 插件 - 警告呈现和自动修复的 java 方式？

> ID：11229217
> 
> 赞同：5
> 
> 时间：2012-06-27T15:00:51.040
> 
> 标签：java, intellij-idea, checkstyle

1.  是否可以使其呈现 java/spellchecker 样式的警告列表，而不是带有行号的老式错误列表？
2.  它可以自动修复'='附近的缺失空间等问题吗？

也许我需要一个不同的插件，然后是哪个？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T19:53:23.207

试试**QAPlug** - Checkstyle 插件。然后去分析 - 分析代码（不是标准的分析！）然后点击“...”附近的运行选择配置文件选择一个具体的配置文件并按下导入按钮。

![在此处输入图像描述](../Images/929c4aec97716e7b2a86aabfb92a607d.png)

在下一个对话框中选择 checkstyle 规则文件，然后单击 OK 按钮。而已。只是等待结果。我得到了这样的东西。

![在此处输入图像描述](../Images/1e04df37ed47bec1b3d3f8dae333b797.png)

但是，该插件有其局限性。例如，我没有设法使用带有抑制功能的文件。

您还可以使用插件**CheckStyle-IDEA**，它也具有良好的配置，允许您使用*抑制*、*自定义检查*并立即在编辑器中显示检查警告，但要应用，您需要设置项目设置-检查-检查样式-真实- IDE 设置中的时间扫描。

![在此处输入图像描述](../Images/4fe01f8e89870184c798d31cf30d65a6.png)

![在此处输入图像描述](../Images/e1edd3eb7b9b9f3073ff8f097761f3b0.png)

回答第二个问题，我在这些插件中没有发现任何自动重新格式化功能，只是检查。

# android - Android手机与支持蓝牙的硬件设备之间的蓝牙通信

> ID：11229218
> 
> 赞同：0
> 
> 时间：2012-06-27T15:00:51.843
> 
> 标签：android, bluetooth

我正在尝试制作一个从其他**未**运行 android 的设备接收一些二进制数据的应用程序。Android 手机不应将任何数据传输到此设备。那么我的问题：

1.  电话是否应该充当建立 RCOMM 通道的服务器？
2.  只要我知道设备的MAC地址，是否可以在不配对的情况下连接手机和该设备？如果是这样，怎么做？

是的，我已经阅读了[http://developer.android.com/guide/topics/connectivity/bluetooth.html](http://developer.android.com/guide/topics/connectivity/bluetooth.html)所以不需要只回答那个链接。:)

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T15:31:21.730

1）电话应充当**接收器**。

我发现棘手的部分是使用*正确的 UUID*。

如果您连接两部手机，您应该生成它们并且一切正常，但在您的硬件上，您无法轻松更改 UUID。看看这些[保留的 UUID](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2.1_r1/android/bluetooth/BluetoothUuid.java#BluetoothUuid.0RESERVED_UUIDS)。

对于串行端口配置文件 (SPP) 的通信，请使用 UUID `00001101-0000-1000-8000-00805F9B34FB`。

2）如果您已经知道MAC地址，您**可以**连接到设备而无需配对，您甚至不需要使用蓝牙发现。

使用 MAC 地址调用获取设备[`getRemoteDevice(String)`](http://developer.android.com/reference/android/bluetooth/BluetoothAdapter.html#getRemoteDevice%28java.lang.String%29) ，然后[`createRfcommSocketToServiceRecord(UUID)`](http://developer.android.com/reference/android/bluetooth/BluetoothDevice.html#createRfcommSocketToServiceRecord%28java.util.UUID%29)获取`BlueToothSocket`.

另请查看[`checkBluetoothAddress(String)`](http://developer.android.com/reference/android/bluetooth/BluetoothAdapter.html#checkBluetoothAddress%28java.lang.String%29)验证 MAC 地址。

# android - Android - 如何获取应用程序名称？（不是包名）

> ID：11229219
> 
> 赞同：127
> 
> 时间：2012-06-27T15:00:57.433
> 
> 标签：android

在我的清单中，我有：

```
 <application
    android:name=".MyApp"
    android:icon="@drawable/ic_launcher_icon"
    android:label="@string/app_name"
    android:debuggable="true"> 
```

如何获取标签元素？

**注意：我的代码在别人的内部运行，所以我无权访问@string/app_name**

* * *

## 回答 #1

> 赞同：189
> 
> 时间：2013-02-27T14:23:02.513

有一种比其他答案更简单的方法，不需要您明确命名资源或担心包名称的异常。如果您直接使用字符串而不是资源，它也可以工作。

做就是了：

```
public static String getApplicationName(Context context) {
    ApplicationInfo applicationInfo = context.getApplicationInfo();
    int stringId = applicationInfo.labelRes;
    return stringId == 0 ? applicationInfo.nonLocalizedLabel.toString() : context.getString(stringId);
} 
```

希望这可以帮助。

**编辑**

根据 Snicolas 的评论，我已经修改了上面的内容，以便它不会尝试解析 0 的 id。而是使用，`nonLocalizedLabel`作为退避。无需包装在 try/catch 中。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2013-05-08T15:09:17.547

**如果在 AndroidManifest.xml 中的 strings.xml/hardcoded 中未提及，无论出于何种原因，例如 android:label="MyApp"**

```
public String getAppLable(Context context) {
    PackageManager packageManager = context.getPackageManager();
    ApplicationInfo applicationInfo = null;
    try {
        applicationInfo = packageManager.getApplicationInfo(context.getApplicationInfo().packageName, 0);
    } catch (final NameNotFoundException e) {
    }
    return (String) (applicationInfo != null ? packageManager.getApplicationLabel(applicationInfo) : "Unknown");
} 
```

或者，如果您知道字符串资源 ID，那么您可以直接通过

```
getString(R.string.appNameID); 
```

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2013-05-10T16:17:51.043

# 爪哇

```
public static String getApplicationName(Context context) {
    return context.getApplicationInfo().loadLabel(context.getPackageManager()).toString();
} 
```

# Kotlin（作为扩展）

```
fun Context.getAppName(): String = applicationInfo.loadLabel(packageManager).toString() 
```

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2014-09-11T07:10:54.927

从任何上下文使用：

```
getApplicationInfo().loadLabel(getPackageManager()).toString(); 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2012-06-27T15:03:47.760

如果您知道包名称，请使用以下代码段

```
ApplicationInfo ai;
try {
    ai = pm.getApplicationInfo(packageName, 0);
} catch (final NameNotFoundException e) {
    ai = null;
}
final String applicationName = (String) (ai != null ? pm.getApplicationLabel(ai) : "(unknown)"); 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2020-04-12T09:20:35.013

在 Kotlin 中很简单：

```
val appLabel = context.applicationInfo.nonLocalizedLabel.toString() 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2019-04-27T07:42:20.373

在**Kotlin**中，使用以下代码获取应用程序名称：

```
 // Get App Name
        var appName: String = ""
        val applicationInfo = this.getApplicationInfo()
        val stringId = applicationInfo.labelRes
        if (stringId == 0) {
            appName = applicationInfo.nonLocalizedLabel.toString()
        }
        else {
            appName = this.getString(stringId)
        } 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2014-07-15T09:19:11.820

如果您只需要应用程序名称，而不需要包名称，那么只需编写此代码。

```
 String app_name = packageInfo.applicationInfo.loadLabel(getPackageManager()).toString(); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-06-27T15:09:17.070

使用 RunningAppProcessInfo 获取应用程序名称：

```
ActivityManager am = (ActivityManager)this.getSystemService(ACTIVITY_SERVICE);
List l = am.getRunningAppProcesses();
Iterator i = l.iterator();
PackageManager pm = this.getPackageManager();
while(i.hasNext()) {
  ActivityManager.RunningAppProcessInfo info = (ActivityManager.RunningAppProcessInfo)(i.next());
  try {
    CharSequence c = pm.getApplicationLabel(pm.getApplicationInfo(info.processName, PackageManager.GET_META_DATA));
    Log.w("LABEL", c.toString());
  }catch(Exception e) {
    //Name Not FOund Exception
  }
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-10-10T20:56:12.180

添加到的源评论`NonLocalizedLabel`现在指示我们：

```
return context.getPackageManager().getApplicationLabelFormatted(context.getApplicationInfo()); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-01-24T22:08:25.680

好吧，伙计们，另一个时尚的选择是

`Application.Context.ApplicationInfo.NonLocalizedLabel`

验证了应用程序元素上的硬编码 android 标签。

`<application android:label="Big App"></application>`

参考：http: [//developer.android.com/reference/android/content/pm/PackageItemInfo.html#nonLocalizedLabel](http://developer.android.com/reference/android/content/pm/PackageItemInfo.html#nonLocalizedLabel)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-03-04T18:49:45.100

默认情况下，您有一个由 AndroidStudio 生成的名为“app_name”的字符串资源。为什么不简单地使用它？或为此目的创建的任何其他字符串资源。比调用几个内部方法来得出一个你必须首先给自己设置的值要容易得多。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-06-27T15:04:21.123

您是否尝试过使用该`PackageManager#getActivityInfo()`方法？将有一个字段应包含应用程序的名称。

[在这里](https://stackoverflow.com/questions/1457803/how-do-i-access-androidlabel-for-an-activity)查看一个非常相似的问题的答案。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-12-14T01:51:14.123

你可以用这个

> JAVA

```
ApplicationInfo appInfo = getApplicationContext().getApplicationInfo();
String applicationLabel = getApplicationContext().getPackageManager().getApplicationLabel(appInfo).toString(); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2022-02-25T20:10:29.977

**科特林**

> 在kotlin中获取应用程序名称的简单函数

```
fun getApplicationName() : String{
    var applicationName = ""
    try {
        val applicationInfo = application.applicationInfo
        val stringId = applicationInfo.labelRes
        if (stringId == 0) {
            applicationName = applicationInfo.nonLocalizedLabel.toString()
        }
        else {
            applicationName = application.getString(stringId)
        }
    } catch (e: Exception) {
        e.printStackTrace()
    }
    return applicationName
} 
```

# objective-c - 在本地 url 中转义空格

> ID：11229222
> 
> 赞同：1
> 
> 时间：2012-06-27T15:01:07.440
> 
> 标签：objective-c

我有以下代码尝试在可可应用程序中加载本地 html 页面...

```
NSString *basePath = @"file//Users/david/Documents/My Project/index.html";
NSString *escapedPath = [basePath stringByTrimmingCharactersInSet:
[NSCharacterSet whitespaceAndNewlineCharacterSet]];

NSURL*url=[NSURL URLWithString:escapedPath];
NSURLRequest*request=[NSURLRequest requestWithURL:url];
NSLog(@"current file is %@", url); 
```

不幸的是，该 url 始终为空，如果我查看 escapedPath 的值，我会看到 '%20' 转义了空间。但是，这在本地不起作用。是否有一个 stringBy 函数可以为本地路径正确转义？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:04:31.657

对于您需要使用的本地路径`fileURLWithPath:`

请参阅此处的文档：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html)

# c - 在 Unix 上使用套接字在 C 中发送和接收文件（服务器/客户端）

> ID：11229230
> 
> 赞同：6
> 
> 时间：2012-06-27T15:01:32.643
> 
> 标签：c, linux, file, sockets, send

首先，感谢大家阅读本文并提供帮助，我非常感谢。
其次我很抱歉，但我还是这个网站的新手，英语不是我的母语，所以我可能会做一些格式和语言错误。我提前道歉。
另外，我的C知识不是很好，但我愿意学习和提高。
现在，手头的事情：

我需要做的是创建一个客户端和一个服务器，并让服务器监听传入的连接。
然后我让客户端向服务器发送一个很大的文本文件（我知道它只会是一个文件）。
然后服务器将对文件执行一些操作（它将在发送的文件上运行一个脚本，在输出中生成另一个名为“output.txt”的文件）。然后服务器需要将 output.txt 文件发送回客户端。

现在，我有点了解如何制作客户端和服务器（我阅读了 beej 指南和这个网站上的其他一些东西），即使我可能犯了一些错误。我需要一些帮助服务器接收文件，然后调用脚本并将另一个文件发送回客户端。现在我所做的是服务器和客户端......我真的不知道如何继续。
在旁注中，我使用我在这个网站和互联网上找到的文件制作了这些文件，我希望它们不会太乱，因为我不是一个好的程序员。

这是client.c

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <netdb.h> 
#include <pthread.h>

#define SOCKET_PORT "50000"
#define SOCKET_ADR "localhost"
#define filename "/home/aryan/Desktop/input.txt"

void error(const char *msg)
{
    perror(msg);
    exit(0);
}

int main()
{
/* Making the client */
int sockfd, portno, n;
struct sockaddr_in serv_addr;
struct hostent *server;

char buffer[256];

portno = atoi(SOCKET_PORT);

sockfd = socket(AF_INET, SOCK_STREAM, 0);
if (sockfd < 0) 
    error("ERROR opening socket");

server = gethostbyname(SOCKET_ADR);

if (server == NULL) 
{
    fprintf(stderr,"ERROR, no such host\n");
    exit(0);
}

bzero((char *) &serv_addr, sizeof(serv_addr));
serv_addr.sin_family = AF_INET;
bcopy((char *)server->h_addr, 
     (char *)&serv_addr.sin_addr.s_addr,
     server->h_length);
serv_addr.sin_port = htons(portno);
if (connect(sockfd,(struct sockaddr *) &serv_addr,sizeof(serv_addr)) < 0) 
    error("ERROR connecting");

/* Time to send the file */
FILE *pf;
unsigned long fsize;

pf = fopen(filename, "rb");
if (pf == NULL) 
{
    printf("File not found!\n");
    return 1;
}
else 
{
    printf("Found file %s\n", filename);

    fseek(pf, 0, SEEK_END);
    fsize = ftell(pf);
    rewind(pf);

    printf("File contains %ld bytes!\n", fsize);
    printf("Sending the file now");
}

while (1) 
{
    // Read data into buffer.  We may not have enough to fill up buffer, so we
    // store how many bytes were actually read in bytes_read.
    int bytes_read = fread(buffer, sizeof(char),sizeof(buffer), pf);
    if (bytes_read == 0) // We're done reading from the file
        break;

    if (bytes_read < 0) 
    {
        error("ERROR reading from file"); 
    }

    // You need a loop for the write, because not all of the data may be written
    // in one call; write will return how many bytes were written. p keeps
    // track of where in the buffer we are, while we decrement bytes_read
    // to keep track of how many bytes are left to write.
    void *p = buffer;
    while (bytes_read > 0) 
    {
        int bytes_written = write(sockfd, buffer, bytes_read);
        if (bytes_written <= 0) 
        {
            error("ERROR writing to socket\n");
        }
        bytes_read -= bytes_written;
        p += bytes_written;
    }
}       

printf("Done Sending the File!\n");
printf("Now Closing Connection.\n");

fclose(pf);
close(sockfd);
return 0;
} 
```

这是 server.c：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <sys/types.h> 
#include <sys/socket.h>
#include <netinet/in.h>
#include <signal.h>
#include <pthread.h>

#define SOCKET_PORT 50000
#define filename "/home/aryan/Desktop/output.txt"

void error(const char *msg)
{
    perror(msg);
    exit(1);
}

void* client_thread_proc(void* arg)
{
char buffer[256];
struct sockaddr_in serv_addr, cli_addr;
int n;
FILE *fp;

int thisfd = (int)arg;
printf("Server %d: accepted = %d\n", getpid(), thisfd);

if (thisfd < 0) 
{ 
    printf("Accept error on server\n");
    error("ERROR on accept"); 
    return NULL;
}

printf("Connection %d accepted\n", thisfd);

fp = fopen(filename, "a+b");
if (fp == NULL) 
{
    printf("File not found!\n");
    return NULL;
}
else 
{
    printf("Found file %s\n", filename);
}

/* Time to Receive the File */
while (1)
{
    bzero(buffer,256);
    n = read(thisfd,buffer,255);
    if (n < 0) error("ERROR reading from socket");

    n = fwrite(buffer, sizeof(char), sizeof(buffer), fp);
    if (n < 0) error("ERROR writing in file");

    n = write(thisfd,"I am getting your file...",25);
    if (n < 0) error("ERROR writing to socket");
} /* end child while loop */

fclose(fp);

return NULL;
}

void serve_it(int Client)
{
    void* arg = (void*)Client;
    pthread_t new_thread;
    pthread_create( &new_thread, NULL, &client_thread_proc, arg);
}

/* Making Server */
int main()
{
int sockfd, newsockfd, portno;
socklen_t clilen;
char buffer[256];
struct sockaddr_in serv_addr, cli_addr;
int n;
FILE *fp;

signal (SIGCHLD, SIG_IGN);

sockfd = socket(AF_INET, SOCK_STREAM, 0);
if (sockfd < 0) 
    error("ERROR opening socket");

bzero((char *) &serv_addr, sizeof(serv_addr));

serv_addr.sin_family = AF_INET;
serv_addr.sin_addr.s_addr = INADDR_ANY;
serv_addr.sin_port = htons(SOCKET_PORT);

if (bind(sockfd, (struct sockaddr *) &serv_addr, sizeof(serv_addr)) < 0) 
      error("ERROR on binding");

listen(sockfd,5);

clilen = sizeof(cli_addr);

while (1)
{
    printf("Server %d accepting connections\n", getpid());

    newsockfd = accept(sockfd, (struct sockaddr *) &cli_addr, &clilen);

    serve_it(newsockfd);
}  // serving loop

close(sockfd);   
return 0; 
} 
```

我想要一些关于如何继续的指示...
如何使脚本继续执行从客户端到服务器的文件？
如何将新文件发送回同一客户端？
如果您能帮助我解决代码中的错误，我将不胜感激。

谢谢大家，很抱歉读了很久。祝你今天过得愉快！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T15:04:03.933

第一个错误：

```
#define filename = "Home\\Desktop\\input.txt" 
```

应该

```
#define filename "Home\\Desktop\\input.txt" 
```

否则预处理器插入

```
= "Home\Desktop\input.txt" 
```

不是

```
"Home\\Desktop\\input.txt" 
```

你所期望的。

第二个错误：

```
int bytes_read = read(filename /* THAT IS WRONG, FILE HANDLE MUST BE HERE */, buffer, strlen(buffer) /* also WRONG, must be MAX_BYTES_IN_BUFFER or something */ ); 
```

在这里，您必须从“pf”中读取（您已使用 fopen() 调用打开它）并且最后一个参数必须是您要读取的字节数。因此，如果您执行 strlen(buffer) 并且缓冲区在程序运行时开始时包含一些垃圾，您将遇到崩溃。strlen() 只能为有效的以零结尾的字符串调用，它不是数组的大小！

编辑：详细说明服务器的循环：

```
while (1)
{
    printf("Server %d accepting connections\n", getpid());

    newsockfd = accept(sockfd, (struct sockaddr *) &cli_addr, &clilen);

    serve_it(newsockfd);
}  // serving loop 
```

serve_it()：

```
void serve_int(int Client)
{
    void* arg = (void*)Client;
    pthread_t new_thread;
    pthread_create( new_thread, NULL, &client_thread_proc, arg);
}

void* client_thread(void* arg)
{
    int thisfd = (int)arg;
    printf("Server %d: accepted = %d\n", getpid(), thisfd);

    if (thisfd < 0) 
    { 
        printf("Accept error on server\n");
        error("ERROR on accept"); 
        return NULL;
    }

    printf("Connection %d accepted\n", thisfd);

    fp = fopen(filename, "a+b");
    if (fp == NULL) 
    {
        printf("File not found!\n");
        return NULL;
    }
    else 
    {
        printf("Found file %s\n", filename);
    }

    /* Time to Receive the File */
    while (1)
    {
        bzero(buffer,256);
        n = read(thisfd,buffer,255);
        if (n < 0) error("ERROR reading from socket");

        n = fwrite(buffer, sizeof(buffer), 1, fp);
        if (n < 0) error("ERROR writing in file");

        n = write(thisfd,"I am getting your file...",25);
        if (n < 0) error("ERROR writing to socket");
    } /* end child while loop */

    return NULL;
} 
```

# sql - 在 Oracle 中使用 MAX 时，如何确保将 null 分配给变量？

> ID：11229236
> 
> 赞同：0
> 
> 时间：2012-06-27T15:01:46.137
> 
> 标签：sql, oracle, variables, null

我有另一个关于 Oracle 中 Nulls 的问题。

我有一个用作会话表的小表。每行都是一个特定的会话。如果会话成功完成，则最后一列指示版本号，如果会话被删除，则为 null。

此列可以为空，我想在 sessionNumber 变量中选择最大版本号或空。这是我设置的原始文件

```
SELECT MAX (VerNumber) INTO sessionNumber
FROM Table_A
WHERE sessionDate = -- some date
AND VerNumber IS NOT NULL; 
```

当 col 为空时，这将返回一行

我试过像这样使用NVL

```
SELECT NVL(MAX (VerNumber),NULL) INTO sessionNumber
FROM Table_A
WHERE sessionDate = -- some date
AND VerNumber IS NOT NULL; 
```

希望消除混淆，NOT NULL 条件的存在是为了防止同一用户在同一日期进行额外会话。TBH 在这种情况下，即使删除了 NOT NULL 条件，我仍然会返回一个（空）行。我认为 Null 和聚合函数缺少一些东西。

但它不起作用。我还看到了可以在哪里使用异常，但这似乎是一个复杂的修复。

非常感谢任何指导。

谢谢。

根据要求进一步澄清。

我的表有四列 user、date、state 和 verNumber

用户和日期是标识符列（不是正式的 PK，但您可以这样查看）。

state 指示会话是否已完成 verNumber 指示该日期的会话完成的次数，如果该日期的会话没有完成，则可以为空。

我有一个变量 sessionNumber，我想分配该日期可用的 MAX(VerNumber) 或当日期不可用或 VerNumber 中的值为 null 时为 null。

Table_A 中的示例行

```
USER    | DATE       | STATE | VERNUMBER
'AName' | 2012-06-25 | 'YES' | 1
'CName' | 2012-06-25 | 'YES' | 2
'BName' | 2012-06-26 | 'NO'  | --NULL 
```

所以对于日期 06-25，我希望 2 是值，对于 06-26，我希望为空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:41:28.790

这接近你想要的吗？

[http://sqlfiddle.com/#!4/ca465/1](http://sqlfiddle.com/#!4/ca465/1)

吠错树？

编辑：忘记最后一个

……这对你来说合适吗！！？

[http://sqlfiddle.com/#!4/44e50/21](http://sqlfiddle.com/#!4/44e50/21)

我在想也许您希望每个日期都有一个条目，尽管最后的会话（无论用户如何） - 无论哪种方式，这都会给您一些提示

编辑：这是那个查询：

[http://sqlfiddle.com/#!4/4163d/1](http://sqlfiddle.com/#!4/4163d/1)

我认为这反映了您的输出！

为了每个人的利益（以防 SQL 小提琴爆炸！），我做的最后一个查询是：

```
SELECT Table_A.* FROM 
(
    SELECT
        SessionDate, 
        MAX(CASE WHEN VerNumber IS NULL THEN 'A' ELSE VerNumber END) as Ver
    FROM Table_A
    GROUP BY SessionDate
) TD
INNER JOIN Table_A 
ON NVL(Table_A.VerNumber, 'A') = TD.Ver 
AND Table_A.SessionDate = TD.SessionDate 
```

所以基本上只是使用 CASE 来获取 VerNumber 列上表达式的 MAX，但使用字母字符来确保 MAX 选择了该列中的 NULL。外部查询使用 NVL() 连接到表达式的内部，这允许将 NULL 连接到内部查询中的“A”。不确定排序规则是否会在这里引起问题（排序规则是否会改变字母与数字的排序顺序？？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:43:45.293

如果您在选择中单独使用聚合函数，您将始终得到一行。如果您不希望返回任何行，则需要添加另一列并使用 GROUP BY 并对该另一列进行过滤，类似于：

```
SELECT VerNumber, MAX (VerNumber) 
  INTO sessionNumber 
  FROM Table_A 
 WHERE sessionDate = -- some date 
   AND VerNumber IS NOT NULL
 GROUP BY VerNumber; 
```

我不知道您的数据是如何构造的，所以这可能不是确切的解决方案。我也有点困惑，就像其他评论过的人一样，你到底想要做什么。

但是请记住，如果你这样做，你将需要一个异常处理程序，因为你会得到一个 NO DATA FOUND 异常。

# mongodb-java - 在java中创建一个mongodb上限集合

> ID：11229237
> 
> 赞同：4
> 
> 时间：2012-06-27T15:01:48.783
> 
> 标签：mongodb-java

我想从 Java 代码创建一个上限集合。我找到了通过 JavaScript 创建它的语法，但找不到 Java 的示例。

```
Mongo mongo = new Mongo("127.0.0.1");
DB db = mongo.getDB("mydbid");

DBCollection collection;
if (db.collectionExists("mycollection")) {
        collection = db.getCollection("mycollection");
    } else {
        collection = /* ????? Create the collection ?????? */
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-27T15:01:49.363

使用 DB.createCollection 操作，然后指定一个已**封顶**的 DBObject作为参数。然后，您可以指定**size**和**max**以控制字节大小和最大文档数。MongoDB 站点有一个关于上限集合的[教程](http://www.mongodb.org/display/DOCS/Capped+Collections)，它解释了所有选项，但缺少每个驱动程序的示例。

```
Mongo mongo = new Mongo("127.0.0.1");
DB db = mongo.getDB("mydbid");

DBCollection collection;
if (db.collectionExists("mycollection")) {
        collection = db.getCollection("mycollection");
    } else {
        DBObject options = BasicDBObjectBuilder.start().add("capped", true).add("size", 2000000000l).get();
        collection = db.createCollection("mycollection", options);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-06T08:22:19.660

使用更新的 java mongo 驱动程序（即 3.4），创建应该略有变化：

```
CreateCollectionOptions opts = new CreateCollectionOptions().capped(true).sizeInBytes(1024*1024);
database.createCollection("test", opts); 
```

请注意，`createCollection`没有返回任何值。

# c# - 播放视频时，MediaElement 似乎禁用了锁定屏幕

> ID：11229239
> 
> 赞同：3
> 
> 时间：2012-06-27T15:01:53.333
> 
> 标签：c#, windows-phone-7, xaml, mediaelement, lockscreen

我正在开发一个使用 MediaElement 组件播放视频的应用程序。现在，我希望如果用户处于空闲状态，则会出现锁定屏幕，正如用户在设备的设置中配置的那样。

如果我不播放视频，确实会出现锁定屏幕。但是，当播放视频时，不会出现锁定屏幕。我找不到这方面的任何信息。

目前我这样设置空闲检测模式：

```
PhoneApplicationService.Current.ApplicationIdleDetectionMode = IdleDetectionMode.Enabled;
PhoneApplicationService.Current.UserIdleDetectionMode = IdleDetectionMode.Enabled; 
```

我现在有点失落。我能想到的唯一解决方案是自己运行一个计时器并在一段时间后停止视频播放。（但似乎没有 API 调用来接收配置的锁定超时。）

欢迎任何建议，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:49:57.863

一种解决方法是启用在锁屏下运行。然后在模糊不清的情况下，您甚至可以停止媒体播放器。不理想，但它可能符合您的目的。

# objective-c - ios如何对ui元素进行分组

> ID：11229247
> 
> 赞同：7
> 
> 时间：2012-06-27T15:02:27.847
> 
> 标签：objective-c, ios, xcode

我正在寻找一种将一些 ui 元素组合在一起的方法，就像 twitter 应用程序一样，但我找不到任何适合我需要的东西。

相当于 java 中的 jpanel 或 .net 中的 groupbox

这就是我所说的：http: [//i46.tinypic.com/169etxi.jpg](http://i46.tinypic.com/169etxi.jpg)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T15:05:53.463

在界面生成器上，您可以将 ui 元素嵌入到视图或滚动视图中。只需选择要分组的所有元素，然后单击编辑器 -> 嵌入 -> 视图/滚动视图

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-27T15:06:26.727

在 UIKit 中对 UI 元素进行分组就像将子视图放入父视图一样简单`UIView`。只需使用`addSubview:`方法。

从文档：

> 视图可以嵌入其他视图并创建复杂的视觉层次结构。这在嵌入的视图（称为子视图）和执行嵌入的父视图（称为父视图）之间创建了父子关系。

以下是文档：

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIView_Class/UIView/UIView.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIView_Class/UIView/UIView.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T10:30:11.023

一个不太简洁的解决方案是创建一个图像并将其用作背景并将 ui 元素放在它上面。这是我使用的图像（视网膜）。 [http://tinypic.com/r/6i9m3b/6](http://tinypic.com/r/6i9m3b/6)

# mysql - 在临时表创建中定义键

> ID：11229248
> 
> 赞同：2
> 
> 时间：2012-06-27T15:02:28.297
> 
> 标签：mysql, temp-tables

如何为从 SELECT 语句创建的临时表定义键？

我有：

```
CREATE temporary TABLE _temp_unique_parts_trading 
engine=memory AS 
  (SELECT parts_trading.enquiryref, 
          sellingcurrency, 
          jobs.id AS jobID 
   FROM   parts_trading, 
          jobs 
   WHERE  jobs.enquiryref = parts_trading.enquiryref 
   GROUP  BY parts_trading.enquiryref) 
```

但是我在哪里定义键？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T15:12:32.730

你可以这样做

```
创建临时表 _temp_unique_parts_trading
(
  enquiryref varchar(255),
  卖出货币 varchar(255),
  工作ID int(10),
  键（作业 ID）
)
引擎=内存 AS
  （选择parts_trading.enquiryref，
          卖出货币，
          作业 ID 作为作业 ID
   从parts_trading，
          工作
   WHERE jobs.enquiryref = parts_trading.enquiryref
   按parts_trading.enquiryref 分组）

```

基本上在 TABLE_NAME 之后附加表模式（索引、列数据类型）

# php - PHP mySQL RLIKE 类似扩展 + 或 - 5

> ID：11229250
> 
> 赞同：0
> 
> 时间：2012-06-27T15:02:32.880
> 
> 标签：php, mysql, where

使用 RLIKE，我可以找到姓氏或电话号码相似的人。

```
mysql_query("SELECT * FROM electors WHERE (surname RLIKE '$surname' OR telephone RLIKE '$telephone') LIMIT 9"); 
```

1 - 问题是我需要优先考虑姓氏，然后再查找电话号码，最多不超过 9 条记录。

2 - 还想连接第一行地址`address1`和`postcode`查找相似记录

这样，如果门牌号是 14 和邮政编码 ZZ18MP，那么它会找到附近的房子。例如。12 ZZ18MP。大多数家庭不在系统中，因此它不能增加 1，它需要是最接近的匹配。

我们如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:07:46.053

您可以使用[全文搜索功能](http://dev.mysql.com/doc/refman//5.5/en/fulltext-search.html)并获得 suranmes 和电话号码的排名。根据该排名，过滤我们的数据。

这是一个启动
[http://devzone.zend.com/26/using-mysql-full-text-searching/的教程](http://devzone.zend.com/26/using-mysql-full-text-searching/)

**注意**：全文搜索仅支持 MyISAM 表

# sql - 创建索引并使用 dbms_stats 计算后查询执行速度较慢

> ID：11229258
> 
> 赞同：11
> 
> 时间：2012-06-27T15:02:45.373
> 
> 标签：sql, oracle, indexing, sql-execution-plan

我有一张有 150 万行的表。我运行一个查询来获取列中具有非重复值的记录。我观察到创建索引后查询性能下降的行为。我还使用具有 100% 估计百分比（计算模式）的 dbms_stats 来收集统计信息，以便 oracle 11g CBO 对查询计划做出更明智的决定，但它并没有提高查询执行时间。

```
 SQL> desc tab3;
 Name                 Null?    Type
 ----------------------------------------------
 COL1                          NUMBER(38)
 COL2                          VARCHAR2(100)
 COL3                          VARCHAR2(36)
 COL4                          VARCHAR2(36)
 COL5                          VARCHAR2(4000)
 COL6                          VARCHAR2(4000)
 MEASURE_0                     VARCHAR2(4000)
 MEASURE_1                     VARCHAR2(4000)
 MEASURE_2                     VARCHAR2(4000)
 MEASURE_3                     VARCHAR2(4000)
 MEASURE_4                     VARCHAR2(4000)
 MEASURE_5                     VARCHAR2(4000)
 MEASURE_6                     VARCHAR2(4000)
 MEASURE_7                     VARCHAR2(4000)
 MEASURE_8                     VARCHAR2(4000)
 MEASURE_9                     VARCHAR2(4000) 
```

该列`measure_0`有 40 万个唯一值。

```
SQL> select count(*) from (select measure_0 from tab3 group by measure_0 having count(*) = 1) abc;

  COUNT(*)
----------
    403664 
```

以下是带有执行计划的查询，请注意表上没有索引。

```
SQL> set autotrace traceonly;

SQL> SELECT * FROM (
  2     SELECT
  3             (ROWNUM -1) AS COL1,
  4             ft.COL1         AS OLD_COL1,
  5             ft.COL2,
  6             ft.COL3,
  7             ft.COL4,
  8             ft.COL5,
  9             ft.COL6,
 10             ft.MEASURE_0,
 11             ft.MEASURE_1,
 12             ft.MEASURE_2,
 13             ft.MEASURE_3,
 14             ft.MEASURE_4,
 15             ft.MEASURE_5,
 16             ft.MEASURE_6,
 17             ft.MEASURE_7,
 18             ft.MEASURE_8,
 19             ft.MEASURE_9
 20     FROM tab3 ft
 21     WHERE MEASURE_0 IN
 22      (
 23             SELECT MEASURE_0
 24             FROM tab3
 25             GROUP BY MEASURE_0
 26             HAVING COUNT(*) = 1
 27      )
 28  ) ABC WHERE COL1 >= 0 AND COL1 <=449;

450 rows selected.

Elapsed: 00:00:01.90

Execution Plan
----------------------------------------------------------
Plan hash value: 3115757351

------------------------------------------------------------------------------------
| Id  | Operation               | Name     | Rows  | Bytes | Cost (%CPU)| Time     |
------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT        |          |  1243 |    28M|   717K  (1)| 02:23:29 |
|*  1 |  VIEW                   |          |  1243 |    28M|   717K  (1)| 02:23:29 |
|   2 |   COUNT                 |          |       |       |            |          |
|*  3 |    HASH JOIN            |          |  1243 |    30M|   717K  (1)| 02:23:29 |
|   4 |     VIEW                | VW_NSO_1 |  1686K|  3219M|  6274   (2)| 00:01:16 |
|*  5 |      FILTER             |          |       |       |            |          |
|   6 |       HASH GROUP BY     |          |     1 |  3219M|  6274   (2)| 00:01:16 |
|   7 |        TABLE ACCESS FULL| TAB3     |  1686K|  3219M|  6196   (1)| 00:01:15 |
|   8 |     TABLE ACCESS FULL   | TAB3     |  1686K|    37G|  6211   (1)| 00:01:15 |
------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   1 - filter("COL1">=0 AND "COL1"<=449)
   3 - access("MEASURE_0"="MEASURE_0")
   5 - filter(COUNT(*)=1)

Note
-----
   - dynamic sampling used for this statement (level=2)

Statistics
----------------------------------------------------------
        354  recursive calls
          0  db block gets
      46518  consistent gets
      45122  physical reads
          0  redo size
      43972  bytes sent via SQL*Net to client
        715  bytes received via SQL*Net from client
         31  SQL*Net roundtrips to/from client
          0  sorts (memory)
          0  sorts (disk)
        450  rows processed 
```

查询占用**1.90**秒。如果我再次运行查询，则需要**1.66**秒。为什么第一次运行需要更多时间？

为了加快速度，我在查询中使用的两列上创建了索引。

```
SQL> create index ind_tab3_orgid on tab3(COL1);

Index created.

Elapsed: 00:00:01.68
SQL> create index ind_tab3_msr_0 on tab3(measure_0);

Index created.

Elapsed: 00:00:01.83 
```

当我在此之后第一次触发查询时，花了**21**秒才回来。而随后的运行将其提高到**2.9**秒。为什么甲骨文在第一次运行时要花这么多时间，是在预热还是什么......让我感到困惑！

这是需要2.9秒时的计划-

```
450 rows selected.

Elapsed: 00:00:02.92

Execution Plan
----------------------------------------------------------
Plan hash value: 240271480

-------------------------------------------------------------------------------------------------
| Id  | Operation                      | Name           | Rows  | Bytes | Cost (%CPU)| Time     |
-------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT               |                |  1243 |    28M|   711K  (1)| 02:22:15 |
|*  1 |  VIEW                          |                |  1243 |    28M|   711K  (1)| 02:22:15 |
|   2 |   COUNT                        |                |       |       |            |          |
|   3 |    NESTED LOOPS                |                |       |       |            |          |
|   4 |     NESTED LOOPS               |                |  1243 |    30M|   711K  (1)| 02:22:15 |
|   5 |      VIEW                      | VW_NSO_1       |  1686K|  3219M|  6274   (2)| 00:01:16 |
|*  6 |       FILTER                   |                |       |       |            |          |
|   7 |        HASH GROUP BY           |                |     1 |  3219M|  6274   (2)| 00:01:16 |
|   8 |         TABLE ACCESS FULL      | TAB3           |  1686K|  3219M|  6196   (1)| 00:01:15 |
|*  9 |      INDEX RANGE SCAN          | IND_TAB3_MSR_0 |  1243 |       |     2   (0)| 00:00:01 |
|  10 |     TABLE ACCESS BY INDEX ROWID| TAB3           |  1243 |    28M|    44   (0)| 00:00:01 |
-------------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   1 - filter("COL1">=0 AND "COL1"<=449)
   6 - filter(COUNT(*)=1)
   9 - access("MEASURE_0"="MEASURE_0")

Note
-----
   - dynamic sampling used for this statement (level=2)

Statistics
----------------------------------------------------------
          0  recursive calls
          0  db block gets
     660054  consistent gets
      22561  physical reads
          0  redo size
      44358  bytes sent via SQL*Net to client
        715  bytes received via SQL*Net from client
         31  SQL*Net roundtrips to/from client
          0  sorts (memory)
          0  sorts (disk)
        450  rows processed 
```

我预计时间会低于表未编入索引时的时间。为什么表的索引版本比非索引版本需要更多时间来获取结果？如果我没记错的话，就是 TABLE ACCESS BY INDEX ROWID 占用了时间。我可以强制 oracle 使用 TABLE ACCESS FULL 吗？

然后我收集了表格上的统计数据，以便 CBO 使用计算选项改进计划。所以现在统计数据是准确的。

```
SQL> EXECUTE dbms_stats.gather_table_stats (ownname=>'EQUBE67DP', tabname=>'TAB3',estimate_percent=>null,cascade=>true);

PL/SQL procedure successfully completed.

Elapsed: 00:01:02.47
SQL> set autotrace off;
SQL> select COLUMN_NAME,NUM_DISTINCT,SAMPLE_SIZE,HISTOGRAM,LAST_ANALYZED from dba_tab_cols where table_name = 'TAB3' ;

COLUMN_NAME                    NUM_DISTINCT SAMPLE_SIZE HISTOGRAM       LAST_ANALYZED
------------------------------ ------------ ----------- --------------- ---------
COL1                                1502257     1502257 NONE            27-JUN-12
COL2                                      0             NONE            27-JUN-12
COL3                                      1     1502257 NONE            27-JUN-12
COL4                                      0             NONE            27-JUN-12
COL5                                1502257     1502257 NONE            27-JUN-12
COL6                                1502257     1502257 NONE            27-JUN-12
MEASURE_0                            405609     1502257 HEIGHT BALANCED 27-JUN-12
MEASURE_1                            128570     1502257 NONE            27-JUN-12
MEASURE_2                           1502257     1502257 NONE            27-JUN-12
MEASURE_3                            185657     1502257 NONE            27-JUN-12
MEASURE_4                               901     1502257 NONE            27-JUN-12
MEASURE_5                                17     1502257 NONE            27-JUN-12
MEASURE_6                              2202     1502257 NONE            27-JUN-12
MEASURE_7                              2193     1502257 NONE            27-JUN-12
MEASURE_8                                21     1502257 NONE            27-JUN-12
MEASURE_9                             27263     1502257 NONE            27-JUN-12 
```

我再次运行查询

```
450 rows selected.

Elapsed: 00:00:02.95

Execution Plan
----------------------------------------------------------
Plan hash value: 240271480

-------------------------------------------------------------------------------------------------
| Id  | Operation                      | Name           | Rows  | Bytes | Cost (%CPU)| Time     |
-------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT               |                |    31M|   718G|  8046   (2)| 00:01:37 |
|*  1 |  VIEW                          |                |    31M|   718G|  8046   (2)| 00:01:37 |
|   2 |   COUNT                        |                |       |       |            |          |
|   3 |    NESTED LOOPS                |                |       |       |            |          |
|   4 |     NESTED LOOPS               |                |    31M|    62G|  8046   (2)| 00:01:37 |
|   5 |      VIEW                      | VW_NSO_1       |  4057 |  7931K|  6263   (2)| 00:01:16 |
|*  6 |       FILTER                   |                |       |       |            |          |
|   7 |        HASH GROUP BY           |                |     1 | 20285 |  6263   (2)| 00:01:16 |
|   8 |         TABLE ACCESS FULL      | TAB3           |  1502K|  7335K|  6193   (1)| 00:01:15 |
|*  9 |      INDEX RANGE SCAN          | IND_TAB3_MSR_0 |     4 |       |     2   (0)| 00:00:01 |
|  10 |     TABLE ACCESS BY INDEX ROWID| TAB3           |   779K|    75M|     3   (0)| 00:00:01 |
-------------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   1 - filter("COL1">=0 AND "COL1"<=449)
   6 - filter(COUNT(*)=1)
   9 - access("MEASURE_0"="MEASURE_0")

Statistics
----------------------------------------------------------
          0  recursive calls
          0  db block gets
     660054  consistent gets
      22561  physical reads
          0  redo size
      44358  bytes sent via SQL*Net to client
        715  bytes received via SQL*Net from client
         31  SQL*Net roundtrips to/from client
          0  sorts (memory)
          0  sorts (disk)
        450  rows processed 
```

这次查询在**2.9**秒内返回（有时也需要**3.9**秒）。

我的目标是尽可能减少查询执行时间。但是在添加索引或计算统计信息之后，查询时间一直在增加。为什么会发生这种情况？即使保留索引，我该如何改进？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-27T15:55:42.853

首先，让我引用[Tom Kyte](http://asktom.oracle.com/pls/apex/f?p=100:11:0%3a%3a%3a%3ap11_question_id:9422487749968)的话：

> 一遍又一遍地对自己说
> 
> “全扫描不坏，索引不好”
> “全扫描不坏，索引不好”
> “全扫描不坏，索引不好”
> “全扫描不坏，索引不好”
> “全扫描不是邪恶的，索引是不好的”
> “完全扫描不是邪恶的，索引是不好的”

索引**并不总能**提高性能，它们不是神奇的银弹（好像曾经存在过这样的东西：）

现在您要问**为什么**索引需要更长的时间。答案很简单：

*   使用全表扫描： **46518** 一致获取
*   与您的索引：**660054** 一致

换句话说：Oracle 对索引执行比全表扫描更多的读取操作。发生这种情况是因为：

1.  FULL TABLE SCAN 读取是批量操作（一次很多块），因此是读取大量数据的有效方式
2.  有时，当您从索引中读取时，您最终会多次读取完全相同的数据块。

至于为什么优化器选择使用这个明显效率不高的索引，这是因为即使有`esimate_percent=100`完整的直方图（你已经收集在`MEASURE_0`列上），通过优化器的简单分析仍然不能可靠地表达一些数据分布。特别是，分析器无法很好地理解跨列和跨表的依赖关系。这会导致错误的估计，从而导致糟糕的计划选择。

**编辑：** CBO 的工作假设似乎根本不适用于这种自联接（您的最后一个查询预计有 3100 万行，而只选择了 450 行！）。这很令人费解，因为该表只有 150 万行。您使用的是什么版本的 Oracle？

我想您会发现您可以删除自联接，从而通过分析提高查询性能：

```
SELECT * FROM (
   SELECT (ROWNUM -1) AS COL1, ABC.*
     FROM (
      SELECT
              ft.COL1 AS OLD_COL1,
              [...],
              COUNT(*) OVER (PARTITION BY MEASURE_O) nb_0
      FROM tab3 ft
      ) ABC 
    WHERE nb_0 = 1
      AND ROWNUM - 1 <= 449
   ) v
 WHERE COL1 >= 0; 
```

您还问为什么第一次运行查询通常需要更多时间。这是因为有缓存在工作。在数据库级别有 SGA，所有块首先从磁盘复制，然后可以多次读取（第一次查询块总是物理读取）。然后一些系统还有一个独立的系统缓存，如果最近读取过数据，它会更快地返回数据。

进一步阅读：

*   解释[可能导致错误估计的数据差异](http://asktom.oracle.com/pls/apex/f?p=100:11:0%3a%3aNO%3a%3aP11_QUESTION_ID:61313086268493)以及涉及 SQL 配置文件的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T19:46:18.530

这段代码如何执行？

```
SELECT ROWNUM - 1      AS col1
,      ft.col1         AS old_col1
,      ft.col2
,      ft.col3
,      ft.col4
,      ft.col5
,      ft.col6
,      ft.measure_0
,      ft.measure_1
,      ft.measure_2
,      ft.measure_3
,      ft.measure_4
,      ft.measure_5
,      ft.measure_6
,      ft.measure_7
,      ft.measure_8
,      ft.measure_9
FROM   tab3 ft
WHERE  NOT EXISTS (SELECT NULL
                   FROM   tab3   ft_prime
                   WHERE  ft_prime.measure_0 = ft.measure_0
                   AND    ft_prime.ROWID <> ft.ROWID)
AND    ROWNUM <= 450; 
```

# ruby-on-rails-3 - Ruby on Rails 查找购物车中的商品数量

> ID：11229261
> 
> 赞同：0
> 
> 时间：2012-06-27T15:02:54.950
> 
> 标签：ruby-on-rails-3

我在一个在线商店中有我的 Rails 模型，我使用带有订单项的购物车进行设置。每次点击产品时，都会生成一个具有唯一购物车 ID 的行项目，匹配我为用户会话制作的购物车（此示例来自《Agile Web Development with rails》一书。）

我想计算用户购物车中的商品数量，最好的方法是什么。

这是一个例子

```
li.each do |line|
     puts li.to_yaml
end 
```

输出……

```
- !ruby/object:LineItem
  attributes:
    id: 14
    product_id: 81
    cart_id: 11
    created_at: 2012-06-27 14:10:09.060706000Z
    updated_at: 2012-06-27 14:10:09.060706000Z
    quantity: 1
---
- !ruby/object:LineItem
  attributes:
    id: 1
    product_id: 2
    cart_id: 6
    created_at: 2012-06-25 18:29:20.726280000Z
    updated_at: 2012-06-25 18:56:08.690670000Z
    quantity: 2
- !ruby/object:LineItem
  attributes:
    id: 2
    product_id: 4
    cart_id: 6
    created_at: 2012-06-25 18:56:10.014333000Z
    updated_at: 2012-06-25 18:56:10.014333000Z
    quantity: 1 
```

所以，我希望 cart_id 为 6 的用户知道他们有 3 件商品。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:19:47.157

我用控制台想通了

选择购物车后`@cart.id = 6`（`current_cart = Cart.find(6)`因为控制台没有使用浏览器会话设置购物车）

```
@count = 0

LineItem.all.each do |item|
     if (item.cart_id == @cart.id)
       @count += item.quantity
     end
end 
```

不过，一定有更好、更有条理的方式……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:22:41.180

```
current_cart.line_items.size 
```

前提是您在 cart.rb 中有以下内容

```
 has_many :line_items 
```

-编辑-

操作，对不起，你想要数量的总和。

```
current_cart.line_items.sum('quantity') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:25:06.973

是的，有更好的方法。你的模型是如何设置的？基本上，您希望用户拥有一个购物车和一个购物车 belongs_to 用户。此外，由于 line_item 具有 cart_id，因此您可以拥有 line_item belongs_to cart 和 cart has_many line_items。

通过这些关联，您可以轻松获得所需的内容，例如：

```
cart.line_items.count

user.cart

user.cart.line_items 
```

等等

您可以在此处阅读有关 Rails 关联的信息：

[http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)

# scala - 何时使用 isInstanceOf 以及何时使用 match-case-statement（在 Scala 中）？

> ID：11229265
> 
> 赞同：17
> 
> 时间：2012-06-27T15:03:05.797
> 
> 标签：scala, match

```
sealed class A
class B1 extends A    
class B2 extends A 
```

假设我们有一个类对象列表`A`： val l: List[A] = List(new B1, new B2, new B1, new B1)

我们要过滤掉 B1 类型的元素。然后我们需要一个谓词，并且可以使用以下两种选择：

```
l.filter(_.isInstanceOf[B1]) 
```

或者

```
l.filter(_ match {case b: B1 => true; case _ => false}) 
```

就个人而言，我更喜欢第一种方法，但我经常阅读，应该`match-case`更频繁地使用该语句（原因我不知道）。

因此，问题是：使用`isInstanceOf`而不是`match-case`语句有缺点吗？什么时候应该使用哪种方法（以及这里应该使用哪种方法以及为什么）？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-27T15:13:29.297

你可以这样过滤：

```
l.collect{ case x: B1 => x } 
```

IMO，这更具可读性。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-27T15:37:55.843

使用没有问题`isInstanceOf`，只要你不使用`asInstanceOf`。

使用这两者的代码很脆弱，因为检查和强制转换是单独的操作，而使用匹配则需要一个操作来完成这两个操作。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-06-27T15:13:43.790

没有区别

猫 t.scala：

```
class A {
  def x(o: AnyRef) = o.isInstanceOf[A]
  def y(o: AnyRef) = o match {
    case s: A => true
    case _ => false
  }
} 
```

$ scalac -print t.scala

```
[[syntax trees at end of cleanup]]// Scala source: t.scala
package <empty> {
  class A extends java.lang.Object with ScalaObject {
    def x(o: java.lang.Object): Boolean = o.$isInstanceOf[A]();
    def y(o: java.lang.Object): Boolean = {
      <synthetic> val temp1: java.lang.Object = o;
      temp1.$isInstanceOf[A]()
    };
    def this(): A = {
      A.super.this();
      ()
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-06-27T15:34:18.133

的优点`match-case`是您不必强制转换对象，以防您想要对其执行取决于其较窄类型的操作。

在以下代码段中，使用`isInstanceOf`似乎很好，因为您不执行这样的操作：

```
if (obj.isInstanceOf[A]) println(obj) 
```

但是，如果您执行以下操作：

```
if (obj.isInstanceOf[A]) {
  val a = obj.asInstanceOf[A]
  println(a.someField) // someField is declared by A
} 
```

那么我会赞成使用`match-case`：

```
obj match {
  case a: A => println(a.someField)
  case _ =>
} 
```

您必须包含“否则”的情况有点烦人，但使用`collect`（如 om-nom-nom 暗示的那样）可能会有所帮助，至少如果您使用从 Seq 继承的集合：

```
collectionOfObj.collect{ case a: A => a}.foreach(println(_.someField)) 
```

# ruby-on-rails - 使用 select_tag 提交表单后没有路由匹配显示操作错误

> ID：11229267
> 
> 赞同：0
> 
> 时间：2012-06-27T15:03:06.387
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms

我的`select_tag`Rails 3 应用程序中有一个表单。当我选择一个假期并提交表单时，我想被路由到`show`我的`vacations_controller`. 这是我的表单的代码：

```
<%= form_tag url_for(:controller => "vacations", :action => "show"), :method => 'get', :id => "song_selector" do %>
  <%= select_tag "vacation_id", options_for_select([["Choose your vacation", ""]]+ Vacation.active.collect {|vacation| [ vacation.title, vacation.id ] } ) %>
<% end %> 
```

但是，当我尝试这样做时，出现错误：

```
No route matches {:controller=>"vacations", :action=>"show"} 
```

我肯定有这样的路线：

```
resources :vacations, :only => [:index, :show] 
```

以及 rake 路由的输出：

```
vacation       GET       /vacations/:id(.:format)       vacations#show 
```

我从以前的答案中知道，我只是没有按预期在 URL 中传递 ID。如果我提出参数，我的 ID 看起来像这样作为字符串传递：`"vacations" => "2"。

所以我想知道：如何构造我的 select_tag 以便修复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:27:41.240

您在该操作中缺少 id 。

尝试：

```
<%= select_tag "id", options_for_select([["Choose your vacation", ""]]+ Vacation.active.collect {|vacation| [ vacation.title, vacation.id ] } ) %> 
```

但这也不理想，因为 url 可能类似于“/vacations/?id=X”。

另一种方法是使用 javascript 并基于 select 选项构建 url，这样您就可以按照自己喜欢的方式构建 url。

# hadoop - Hadoop MR：压缩输入文件还是原始文件更好？

> ID：11229272
> 
> 赞同：4
> 
> 时间：2012-06-27T15:03:20.130
> 
> 标签：hadoop, mapreduce, compression

正如可以从问题中得出的那样，我想知道何时以压缩格式（如gzip）输入文件有意义，何时以未压缩格式输入文件有意义。

压缩文件的开销是多少？读取文件时会慢很多吗？是否对大输入文件进行了任何基准测试？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T15:24:56.650

除非您正在进行开发并且需要经常将数据从 HDFS 读取到本地文件系统以进行处理，否则将输入文件以压缩格式保存是最有意义的。

压缩格式提供了显着的优势。除非您以其他方式设置，否则数据已经在 Hadoop 集群中复制。复制的数据具有良好的冗余性，但会占用更多空间。如果您的所有数据都以 3 倍复制，您将消耗 3 倍于存储它所需的容量。

对日志数据等文本数据进行压缩非常有效，因为它产生了高压缩率。这也是您通常在 Hadoop 集群中更常见的数据类型。

我没有基准，但我没有看到对我们拥有的相当大的集群和数据有任何重大损失。

但是，暂时选择 LZO 而不是 gzip。

请参阅：[LZO 压缩及其对 gzip 的意义](http://www.cloudera.com/blog/2009/06/parallel-lzo-splittable-compression-for-hadoop/)

Gzip 比 LZO 压缩得更好。LZO 在压缩和解压缩方面更快。可以拆分 Lzo 文件，可拆分的 Gzip 不可用，但我已经看到了相同的 Jira 任务。（也适用于 bzip2）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T18:13:24.970

让我们把压缩的理由和不压缩的理由放在一起。

**为了：**

a) 数据大部分是存储的，而不是经常处理的。这是通常的 DWH 方案。在这种情况下，节省空间可能比处理开销更重要
b) 压缩因子非常高，因此我们节省了大量 IO。
c) 解压速度非常快（如 Snappy），因此我们以很小的代价获得了一些收益
d) 数据已经压缩到达

**反对：**

a) 压缩数据不可拆分。必须注意的是，许多现代格式都是使用块级压缩构建的，以启用文件的拆分和其他部分处理。b) 数据在集群中创建，压缩需要大量时间。必须注意的是，压缩通常比解压缩更占用 CPU 资源。
c) 数据几乎没有冗余，压缩几乎没有收益。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-03T17:14:46.883

1) 压缩输入文件 如果输入文件被压缩，那么从HDFS读入的字节数会减少，这意味着读取数据的时间更短。这种时间节约有利于作业执行的性能。

如果输入文件被压缩，它们将在被 MapReduce 读取时自动解压缩，使用文件扩展名来确定要使用的编解码器。例如，以 .gz 结尾的文件可以被识别为 gzip 压缩文件，因此可以使用 GzipCodec 读取。

2) 压缩输出文件 通常我们需要将输出存储为历史文件。如果每天的输出量很大，并且我们经常需要存储历史结果以备将来使用，那么这些累积的结果将占用大量的 HDFS 空间。但是这些历史文件可能使用的不是很频繁，造成HDFS空间的浪费。因此，有必要在存储到 HDFS 之前对输出进行压缩。

3) 压缩映射输出 即使您的 MapReduce 应用程序读取和写入未压缩的数据，它也可能受益于压缩映射阶段的中间输出。由于 map 输出被写入磁盘并通过网络传输到 reducer 节点，因此通过使用 LZO 或 Snappy 等快速压缩器，您可以获得性能提升，因为要传输的数据量减少了。2.常用输入格式

gzip：gzip 是 Hadoop 自然支持的。gzip 基于 DEFLATE 算法，是 LZ77 和 Huffman Coding 的结合。

bzip2：bzip2 是一款免费、无专利（见下文）的高质量数据压缩器。它通常将文件压缩到最佳可用技术（PPM 系列统计压缩器）的 10% 到 15% 以内，同时压缩速度快两倍，解压缩速度快六倍。

LZO：LZO 压缩格式由许多较小的 (~256K) 压缩数据块组成，允许沿块边界拆分作业。此外，它的设计考虑了速度：它的解压缩速度大约是 gzip 的两倍，这意味着它的速度足以跟上硬盘读取速度。它的压缩效果不如 gzip — 期望文件比 gzip 压缩版本大 50%。但这仍然是完全没有任何压缩的文件大小的 20-50%，这意味着 IO-bound 作业完成映射阶段的速度大约快四倍。

Snappy：Snappy 是一个压缩/解压库。它的目标不是最大压缩或与任何其他压缩库的兼容性；相反，它的目标是非常高的速度和合理的压缩。例如，与 zlib 的最快模式相比，Snappy 对于大多数输入来说要快一个数量级，但生成的压缩文件要大 20% 到 100%。在 64 位模式的 Core i7 处理器的单个内核上，Snappy 以大约 250 MB/秒或更高的速度压缩，并以大约 500 MB/秒或更高的速度解压缩。Snappy 在 Google 内部被广泛使用，从 BigTable 和 MapReduce 到我们内部的 RPC 系统。

一些折衷：所有压缩算法都表现出空间/时间折衷：更快的压缩和解压缩速度通常以节省的空间较小为代价。上表中列出的工具通常通过提供九种不同的选项在压缩时对这种权衡进行一些控制：-1 表示优化速度，-9 表示优化空间。

不同的工具具有非常不同的压缩特性。Gzip 是一种通用压缩器，位于空间/时间权衡的中间。Bzip2 比 gzip 更有效地压缩，但速度较慢。Bzip2 的解压速度比它的压缩速度快，但还是比其他格式慢。另一方面，LZO 和 Snappy 都针对速度进行了优化，并且比 gzip 快了大约一个数量级，但压缩效率较低。Snappy 的解压速度也明显快于 LZO。3\. 关于压缩和输入拆分的问题 在考虑如何压缩将由 MapReduce 处理的数据时，了解压缩格式是否支持拆分很重要。考虑一个存储在 HDFS 中的未压缩文件，其大小为 1 GB。HDFS 块大小为 64 MB，

现在想象一下，该文件是一个 gzip 压缩文件，其压缩大小为 1 GB。和以前一样，HDFS 将文件存储为 16 个块。但是，为每个块创建一个拆分将不起作用，因为不可能从 gzip 流中的任意点开始读取，因此地图任务不可能独立于其他任务读取其拆分。gzip 格式使用 DEFLATE 来存储压缩数据，而 DEFLATE 将数据存储为一系列压缩块。问题在于，每个块的开头没有以任何方式区分，这将允许位于流中任意点的读取器前进到下一个块的开头，从而使其自身与流同步。因此，gzip 不支持拆分。

在这种情况下，MapReduce 会做正确的事情而不尝试拆分 gzip 压缩的文件，因为它知道输入是 gzip 压缩的（通过查看文件扩展名）并且 gzip 不支持拆分。这会起作用，但会牺牲局部性：单个地图将处理 16 个 HDFS 块，其中大部分不会是地图的本地块。此外，地图越少，作业的粒度就越小，因此可能需要更长的时间来运行。

如果我们假设的示例中的文件是 LZO 文件，我们将遇到同样的问题，因为底层压缩格式没有为读取器提供一种将自身与流同步的方法。但是，可以使用 Hadoop LZO 库附带的索引器工具来预处理 LZO 文件。该工具构建分割点的索引，在使用适当的 MapReduce 输入格式时有效地使它们可分割。

另一方面，bzip2 文件确实提供了块之间的同步标记（pi 的 48 位近似值），因此它确实支持拆分。4\. IO 密集型和 CPU 密集型 在 HDFS 中存储压缩数据可以让您的硬件分配更进一步，因为压缩数据通常是原始数据大小的 25%。此外，由于 MapReduce 作业几乎总是受 IO 限制，存储压缩数据意味着要做的整体 IO 更少，这意味着作业运行得更快。然而，对此有两个警告：一些压缩格式不能被拆分以进行并行处理，而另一些压缩格式在解压缩时足够慢，以至于作业变得受 CPU 限制，从而消除了您在 IO 上的收益。

gzip 压缩格式说明了第一个警告。假设您有一个 1.1 GB 的 gzip 文件，而您的集群有一个 128 MB 的块大小。该文件将被分成 9 个大小约为 128 MB 的块。为了在 MapReduce 作业中并行处理这些，不同的映射器将负责每个块。但这意味着第二个映射器将从文件中大约 128MB 的任意字节开始。此时 gzip 用于解压缩输入的上下文字典将为空，这意味着 gzip 解压缩器将无法正确解释字节。结果是 Hadoop 中的大型 gzip 文件需要由单个映射器处理，这违背了并行性的目的。

Bzip2 压缩格式说明了作业受 CPU 限制的第二个警告。Bzip2 文件压缩得很好，甚至可以拆分，但解压算法很慢，无法跟上 Hadoop 作业中常见的流式磁盘读取。虽然 Bzip2 压缩有一些好处，因为它节省了存储空间，但现在正在运行的作业会花费时间等待 CPU 完成数据解压缩，这会减慢它们的速度并抵消其他好处。5\. 压缩的总结原因： a) 数据大部分是存储的，而不是经常处理的。这是通常的 DWH 方案。在这种情况下，节省空间可能比处理开销更重要 b) 压缩因子非常高，因此我们节省了大量 IO。

不压缩的原因 a) 压缩数据不可拆分。必须注意的是，许多现代格式都是使用块级压缩构建的，以启用文件的拆分和其他部分处理。b) 数据在集群中创建，压缩需要大量时间。必须注意的是，压缩通常比解压缩更占用 CPU 资源。c) 数据几乎没有冗余，压缩几乎没有收益。

# c# - 将布尔值绑定到控件的可见性时如何防止闪烁

> ID：11229278
> 
> 赞同：6
> 
> 时间：2012-06-27T15:03:42.317
> 
> 标签：c#, windows-phone-7, xaml, data-binding, windows-phone

我的 ViewModel 中有一个布尔属性，命名为让我们说`IsNotSupported`如果不支持传感器则用于显示一些警告信息。因此，我使用`BooleanToVisibilityConverter`添加到资源中的 ,：

```
<phone:PhoneApplicationPage.Resources>
    <local:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
</phone:PhoneApplicationPage.Resources> 
```

并将其绑定到包含警告的堆栈面板：

```
<StackPanel x:Name="NotSupportedWarning" Visibility="{Binding IsNotSupported,
                    Converter={StaticResource BooleanToVisibilityConverter}}"> 
```

这一切都很好，但是在加载页面并且支持传感器时，警告仅出现几分之一秒然后消失。我知道这种闪烁是由尚未发生的绑定引起的，因此默认为可见。

那闪烁真是烦人......它应该默认为折叠并且只有在清楚应该显示警告后才可见。此外，这将避免绑定后的第二次布局传递，因此可能会对性能产生积极影响。

* * *

^([我一遍又一遍地遇到这个问题，直到我发现这个](https://stackoverflow.com/questions/4808262/how-can-i-prevent-flicker-in-silverlight-views/)密切相关的 SO 问题之前，在互联网上一无所获，但如果搜索 windows phone 而不是 silverlight，则找不到。问题和解决方案都可能看起来很简单，但我确实困扰了我很长时间，所以我认为写一个[问答式的](https://blog.stackoverflow.com/2011/07/its-ok-to-ask-and-answer-your-own-questions/)问题来帮助面临同样问题的其他人可能是个好主意。)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T15:03:42.973

看完后解决方法很简单。您可以使用 控制绑定的默认值（如果绑定尚未发生）`FallbackValue`。您的堆栈面板 XAML 如下所示：

```
<StackPanel x:Name="NotSupportedWarning" Visibility="{Binding IsNotSupported,
                    FallbackValue=Collapsed, 
                    Converter={StaticResource BooleanToVisibilityConverter}}"> 
```

通过这种方式，您可以消除闪烁，并且如果警告仍然隐藏，则不必在绑定后重新布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T09:33:42.403

您可以直接绑定到 Visibility 类型的属性而不是布尔值，并默认将该属性保持为折叠状态，此外您还可以实现 INotifyPropertyChanged

# java - Eclipse 在编译时说“文件名太长”（这是错误的）

> ID：11229282
> 
> 赞同：2
> 
> 时间：2012-06-27T15:03:51.497
> 
> 标签：java, eclipse, compilation, eclipse-indigo

> **可能重复：**
> [CreateProcess 错误=206，运行 main() 方法时文件名或扩展名太长](https://stackoverflow.com/questions/10519558/createprocess-error-206-the-filename-or-extension-is-too-long-when-running-main)

使用 Eclipse（Indigo for Java EE），当我清理所有项目（再次编译它们）时，我收到以下错误：

> 'DataNucleus Enhancer' 遇到问题无法运行程序“C:\jdk7\bin\javaw.exe”（在目录“C:\0-MS”中）：CreateProcess error=206, Nom de fichier ou extension trop long (= => 英文：文件名或扩展名太长）

如您所见，我尝试使用最短路径，但 Eclipse 仍然说同样的话。据报道，一个类似的问题是关于配置 ORM（使用 Google App Engine），但我认为这是一个不同的问题。

有谁知道为什么会这样？

这是日志：

```
!ENTRY com.google.appengine.eclipse.core 4 0 2012-06-26 08:17:23.137
!MESSAGE Cannot run program "C:\jdk7\bin\javaw.exe" (in directory "C:\0-MS"): CreateProcess error=206, Nom de fichier ou extension trop long
!STACK 0
java.io.IOException: Cannot run program "C:\jdk7\bin\javaw.exe" (in directory "C:\0-MS"): CreateProcess error=206, Nom de fichier ou extension trop long
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:1029)
    at com.google.gdt.eclipse.core.ProcessUtilities.launchProcessAndActivateOnError(ProcessUtilities.java:213)
    at com.google.appengine.eclipse.core.orm.enhancement.EnhancerJob.runInWorkspace(EnhancerJob.java:106)
    at org.eclipse.core.internal.resources.InternalWorkspaceJob.run(InternalWorkspaceJob.java:38)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
Caused by: java.io.IOException: CreateProcess error=206, Nom de fichier ou extension trop long
    at java.lang.ProcessImpl.create(Native Method)
    at java.lang.ProcessImpl.<init>(ProcessImpl.java:188)
    at java.lang.ProcessImpl.start(ProcessImpl.java:132)
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:1021)
    ... 4 more 
```

这是项目命令行

> -startupUrl MananaSeguro.html -war C:\0-MS\war -remoteUI "${gwt_remote_ui_server_port}:${unique_id}" -logLevel INFO -codeServerPort 9997 -port 8888 -server com.google.appengine.tools.development.gwt .AppEngine

虚拟机参数

> -Xmx512m -javaagent:C:\shortGAE-1.6.4\lib\agent\appengine-agent.jar -XX:-UseSplitVerifier

ORM 属性（App Engine）只有一个文件夹：

> 源/

# android - 用另一个 ListFragment 替换 ListFragment

> ID：11229284
> 
> 赞同：0
> 
> 时间：2012-06-27T15:03:57.187
> 
> 标签：android, android-fragments

我有两个几乎相同的 ListFragment **A** & **B**，除了它们从各自的 Asynctasker 中提取数据。

onListItemClick 在**A**将导致 Fragment **A**被**B**替换。但是，我的应用程序总是卡在**B**中的 CustomAdapter 的构造函数中。

```
private class CustomAdapter_B extends ArrayAdapter<MatchType> {
            // Stuck Here
            CustomAdapter_B() {
                super(getActivity(), R.layout.color_match_type_s2, matches_type_s2);
            } 
```

**片段 A**

```
 public class Fragment A extends ListFragment implements AsyncTaskCompleteListener<ArrayList<MatchType>>{

        ArrayList<MatchType> matches_type = new ArrayList<MatchType>();
        private ProgressDialog dialog;
        private static FirstPageFragmentListener main_caller;

        @Override
        public void onListItemClick(ListView l, View v, int position, long id) {
                    //Interface, triggering Fragment Replace in my Fragment Adapter
            main_caller.onMySignalWithNum(1, (matches_type.get(position).getLink()));
        }

        @Override
        public void onAttach(Activity activity) {
            super.onAttach(activity);
            this.dialog.show();
        }

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
// AsyncTasker to draw data for ArrayAdapter
LoadMatchType lmt = new LoadMatchType(this);
            lmt.execute();
        }

        @Override
        public void onTaskComplete(ArrayList<MatchType> result) {
            dialog.dismiss();       
            //result.remove(result.size()-1);
            matches_type = result;

            setListAdapter(new CustomAdapter());
            }
        }

        //Custom Adapter
        private class CustomAdapter extends ArrayAdapter<MatchType> {
            CustomAdapter() {
                super(getActivity(), R.layout.color_match_type, matches_type);
            }

            @Override
            public View getView(int position, View convertView, ViewGroup parent) {
                // TODO Auto-generated method stub
                View row = convertView;

                if (row == null) {
                    LayoutInflater inflater = getActivity().getLayoutInflater();
                    row = inflater.inflate(R.layout.color_match_type, parent, false);
                }

                TextView tv_type = (TextView) row.findViewById(R.id.textView_type);
                tv_type.setText(matches_type.get(position).getType());

                TextView tv_tweet = (TextView) row.findViewById(R.id.textView_tweet);
                tv_tweet.setText(matches_type.get(position).getTweet());

                TextView tv_tph = (TextView) row.findViewById(R.id.textView_tph);
                tv_tph.setText(matches_type.get(position).getTph());

                return row;
            }   
        }

        public static Fragment newInstance(
                FirstPageFragmentListener pageFragmentListener) {
            // TODO Auto-generated method stub
            footOddsFragment frag = new footOddsFragment();
            main_caller = pageFragmentListener;
            return frag;    
            }   
    }

    //INTERFACE
    interface AsyncTaskCompleteListener<T> {
           public void onTaskComplete(ArrayList<MatchType> result);
    } 
```

片段**B**大致相同。

该应用程序将卡在 Fragment B 的 CustomAdapter 构造函数中，并且屏幕将是空白的。

哦，如果我放弃 Fragment *B并在 Fragment* *A*的 onListItemClick 中调用 Asynctasker_B ，一切都会正常工作。只是我不能按返回查看以前的列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:40:51.340

忘记 Fragment B。覆盖您的后按，`if`在其中放置一个以确定列表 B 是否处于活动状态，如果是，则将其改回，否则执行正常的后退功能。

```
public void onBackPressed() {
    //  Code here to change list or go back.
    return;
} 
```

# java - 开始录像后屏幕变黑--android应用程序

> ID：11229289
> 
> 赞同：1
> 
> 时间：2012-06-27T15:04:04.490
> 
> 标签：java, android, video, video-recording

我尝试构建一个自定义视频录制应用程序并按照互联网上的教程进行操作。但是我得到的问题是按下开始按钮后屏幕变黑并且没有其他任何事情发生。按下停止按钮后，我检查了放置输出视频的目录。它在那里，但大小为 0 KB。

我使用了surfaceview，这是xml布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:orientation="vertical"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   >
<TextView 
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:text="@string/hello"
   />
<Button
 android:id="@+id/start" 
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:text="- Start Camera Preview -"
   />
<Button
 android:id="@+id/stop" 
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:text="- Stop Camera Preview -"
   />
<SurfaceView
 android:id="@+id/surfaceview" 
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   />
</LinearLayout> 
```

这是录制视频的简短代码：

```
public class CamTestActivity extends Activity implements SurfaceHolder.Callback{
    private static final String TAG = "Camera-Tutorial";

    private SurfaceView surfaceView;
    private SurfaceHolder surfaceHolder;
    private Camera camera;
    private boolean previewRunning;
    private int VIDEO_TYPE = 3;
    private int intVideoIndex = 1;

    private MediaRecorder mediaRecorder;
    private final int maxDurationInMs = 20000;
    private final int videoFramesPerSecond = 20;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.videopreview);

       // setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

        surfaceView = (SurfaceView) findViewById(R.id.surfaceview);
        surfaceHolder = surfaceView.getHolder();
        surfaceHolder.addCallback(this);      
        Button start_video = (Button) findViewById(R.id.start);
        Button stop_video = (Button) findViewById(R.id.stop);

        stop_video.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                mediaRecorder.stop();
                camera.lock();
            }
        });

        start_video.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {

                try {
                    camera.unlock();                   
                    mediaRecorder = new MediaRecorder();
                    mediaRecorder.setCamera(camera);               
                    mediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
                    mediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

                    mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
                                                mediaRecorder.setOutputFile(GetOutputMediaFileDir(VIDEO_TYPE,intVideoIndex));
                   mediaRecorder.setVideoFrameRate(1);
                   mediaRecorder.setVideoEncoder(MediaRecorder.AudioEncoder.AAC);
                   mediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);

                   mediaRecorder.prepare();
                    mediaRecorder.start();
                } catch (IllegalStateException e) {
                    Toast.makeText(getApplicationContext(), e.getMessage(), Toast.LENGTH_LONG).show();
                  //  Log.e(TAG,e.getMessage());
                 //   e.printStackTrace();

                } catch (IOException e) {
                    Log.e(TAG,e.getMessage());
                  //  e.printStackTrace();
                }
            }
        });
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        camera = Camera.open();
        if (camera != null){
            Camera.Parameters params = camera.getParameters();
            camera.setParameters(params);
        }
        else {
            Toast.makeText(getApplicationContext(), "Camera not available!", Toast.LENGTH_LONG).show();
            finish();
        }
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
        if (previewRunning){
            camera.stopPreview();
        }
        Camera.Parameters p = camera.getParameters();
        p.setPreviewSize(width, height);
        camera.setParameters(p);

        try {
            camera.setPreviewDisplay(holder);
            camera.startPreview();
            previewRunning = true;
        }
        catch (IOException e) {
            Log.e(TAG,e.getMessage());
            e.printStackTrace();
        }
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        camera.stopPreview();
        previewRunning = false;
        camera.release();
    }
 public static String GetOutputMediaFileDir(int fileType, int index){

        String fileDir=null;

          String strIndex = Integer.toString(index);
          if(fileType == 1)
          {
        File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(
                Environment.DIRECTORY_MUSIC), "Audio");

        if (! mediaStorageDir.exists()){
            if (! mediaStorageDir.mkdirs()){

                return null;
            }
        }

          fileDir = mediaStorageDir.getPath() + File.separator +
                  "AUDIO_"+ strIndex + ".mp4";
          }
          if(fileType == 2)
          {
              File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(
                        Environment.DIRECTORY_PICTURES), "Image");

                if (! mediaStorageDir.exists()){
                    if (! mediaStorageDir.mkdirs()){

                        return null;
                    }
                }

                  fileDir = mediaStorageDir.getPath() + File.separator +
                          "IMAGE_"+ strIndex + ".jpeg"; 
          }

          if(fileType == 3)
          {
              File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(
                        Environment.DIRECTORY_MOVIES), "Video");

                if (! mediaStorageDir.exists()){
                    if (! mediaStorageDir.mkdirs()){

                        return null;
                    }
                }

                  fileDir = mediaStorageDir.getPath() + File.separator +
                          "VIDEO_"+ strIndex + ".mp4"; 
          }

       return fileDir;

        }

} 
```

关于如何解决问题的任何想法？提前非常感谢。

解决问题的更改：

首先我将视频编码器设置为音频编码器，这应该改变；

其次`mediaRecorder.setPreviewDisplay(surfaceView.getHolder().getSurface());`应该在之前添加`mediaRecorder.prepare()`

然后它可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:35:29.630

我在 HTC Incredible 设备上遇到了这个问题，但它在我测试过的其他 8 台设备上运行良好。这是“解决”该问题的帖子：

[https://stackoverflow.com/a/9903357/1426565](https://stackoverflow.com/a/9903357/1426565)

我将实际修复范围缩小到特定行：

```
recorder.setVideoSize(width, height); 
```

帧率/比特率设置在修复中无关紧要，我不确定是否将默认值用于源、输出格式和编码器会改变任何东西，但如果你考虑一下，它根本不会影响它。

这些是我正在使用的其他设置（确保在任何编码器之前设置大小）：

```
 recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    recorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
    recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);

    recorder.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT);
    recorder.setVideoEncoder(MediaRecorder.VideoEncoder.H264);

    recorder.setPReviewDisplay(surfaceView.getHolder().getSurface()) 
```

另请注意，昨天在 ICS 上进行测试时，我们遇到了不支持 setFrameRate 以及不支持 setVideoSize 的问题。因此，在我将要尝试的修复中，我将用 try/catch 块包围 setVideoSize，删除 setFrameRate，并希望上帝能修复它。如果没有，我可能不得不在某些设备上排除它。

# java - Java：静态初始化块中的方法比主方法中的慢

> ID：11229291
> 
> 赞同：0
> 
> 时间：2012-06-27T15:04:05.697
> 
> 标签：java, methods

出于某种原因，我的方法“bishops”在从主方法调用时比从静态初始化块调用时运行得快得多。这是正常现象还是bug？

```
public class Magic
{
    public static void main(String[] args)
    {
        bishops();
    }

    public static void bishops()
    {
        //PrintWriter out = new PrintWriter(new BufferedWriter(new FileWriter("bishops.txt")));
        BISHOP_SHIFTS = new int[64];
        BISHOP_COMBOS = new long[64][];
        for (int square = 0; square < 64; square++) {System.out.println("bbb " + square);
            int NUMBER = bitCount(BISHOP_ATTACKS[square]);
            BISHOP_SHIFTS[square] = 64 - NUMBER;
            long x = BISHOP_ATTACKS[square];
            long[] MAPS = new long[NUMBER];
            for (int n = 0; n < NUMBER; n++) {
                int i = bitScan(x);
                MAPS[n] = (1L << i);
                x -= MAPS[n];
            }
            int C = 1 << NUMBER;
            BISHOP_COMBOS[square] = new long[C];
            for (int i = 0; i < C; i++) {
                BISHOP_COMBOS[square][i] = 0;
                int j = i;
                for (int n = 0; n < NUMBER; n++) {
                    if ((j & 1) == 1)
                        BISHOP_COMBOS[square][i] |= MAPS[n];
                    j >>>= 1;
                }
                //out.println("SQUARE " + square);
                //out.println(toBitboardString(BISHOP_COMBOS[square][i]));
                //out.println();
            }
        }
        //out.close();

        bishopMagics();
    }

    public static void bishopMagics()
    {
        BISHOP_MAGICS = new long[64];
        Random r = new Random();

        for (int square = 0; square < 64; square++) {System.out.println("asdffff " + square);
            int i;
            int LENGTH = BISHOP_COMBOS[square].length;
            long magic;
            do {
                magic = r.nextLong() & r.nextLong() & r.nextLong();
                //final int COUNT = bitCount(BISHOP_MASKS[square]);
                boolean[] used = new boolean[LENGTH];
                for (int j = 0; j < used.length; j++)
                    used[j] = false;
                for (i = 0; i < LENGTH; i++) {
                    int index = (int) ((BISHOP_COMBOS[square][i] * magic) >>> BISHOP_SHIFTS[square]);
                    if (used[index])
                        break;
                    else
                        used[index] = true;
                }
            } while (i < LENGTH);
            BISHOP_MAGICS[square] = magic;
            System.out.println(magic);
        }

        //bishopTable();
    }

    /*
     * Lots of stuff omitted
     */

    static
    {
        //bishops();
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T15:07:14.607

随着 JVM 预热（加载类 es 并编译代码），第二次运行速度将比第一次快得多。静态块总是首先被调用。

尝试从 main() 或静态块运行它两次，看看每次需要多长时间

顺便说一句：我会将任何日志记录到控制台，因为这会大大减慢代码速度。

# automapper - 使用自动映射器将模型集合映射到视图模型

> ID：11229293
> 
> 赞同：1
> 
> 时间：2012-06-27T15:04:19.223
> 
> 标签：automapper

我想使用自动映射器将模型集合映射到视图模型这是我的代码

```
public class LanguageViewModel
    {
        public string Name { get; set; }
        public IList<Word> Categories { set; get; }
        public IList<string> PictureURL { set; get; }
    } 
```

这是我的模型

```
public class Word : BaseFieldsTables
{
    public string Text { get; set; }
    public virtual Category Category { get; set; }
    public int CategoryID { get; set; }
    public virtual Language Language { get; set; }
    public int LanguageID { get; set; }

    public virtual ICollection<Picture> Pictures { get; set; }

    [InverseProperty("MainWord")]
    public virtual ICollection<RelationshipBetweenWords> MainWords { get; set; }

    [InverseProperty("RelatedWord")]
    public virtual ICollection<RelationshipBetweenWords> RelatedWords { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T00:16:00.833

在他的示例中，您从顶级域模型开始并将其映射到称为[嵌套映射](https://github.com/AutoMapper/AutoMapper/wiki/Nested-mappings)的内部集合。

```
mapper.CreateMap<Word , LanguageViewModel>()                
    .ForMember(dest => dest.Name, src => src.MapFrom(s => s.Text)); 
```

对于 Word 域模型中的内部集合，您需要为类别和图片定义单独的映射。

```
mapper.CreateMap<Picture, PictureModel>()                
   .ForMember(dest => dest.PictureURL , src => src.MapFrom(x => x.Picture.Urltext));

mapper.CreateMap<Category, CategoryModel>()                
   .ForMember(dest => dest.CategoryId, src => src.MapFrom(x => x.Category.CategoryInt)); 
```

对于所有剩余的内部集合，您需要定义映射以使其工作

# matlab - Matlab - 在彼此之上绘制两个 pcolors，具有不同的颜色图

> ID：11229298
> 
> 赞同：0
> 
> 时间：2012-06-27T15:04:35.240
> 
> 标签：matlab, colors, plot

我在彼此之上绘制两个 pcolor（使用 m_map 算法 m_pcolor）。这样做的原因是第二个 pcolor 具有透明度，因此在下面显示 pcolor。第一个情节仅由 1 和 0 组成，我希望它只是黑白的。我希望第二个使用颜色图喷射，但我不知道如何设置一个颜色图而不更改另一个颜色图。我目前的代码是：

```
h1 = m_pcolor(Lon', Lat', black_background);
hold on; 
h = m_pcolor(Lon', Lat', input_matrix); 
```

在此先感谢，亚当

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:41:28.843

对于这个有限的应用程序，最简单的方法可能是在颜色图上附加一行零，自己处理缩放（`clim`属性），以便每个绘图都利用颜色图的适当部分。

```
cm=colormap('jet'); %# Nx3
cm = [cm; 0 0 0]; %# append black row: (N+1)x3

h1 = m_pcolor(Lon',Lat',black_background);
set(h1,'clim',[length(colormap),length(colormap)])

hold on
h2 = m_pcolor(Lon', Lat', input_matrix);
set(h2,'clim',[length(colormap)-1, length(colormap)-1]) 
```

这应该让你接近，但我没有测试它，因为我不在我的 matlab 机器上。

另一个选项是文件交换中的[freezeColors](http://www.mathworks.com/matlabcentral/fileexchange/7943)（但这可能仅适用于同一图形窗口中的不同轴，我不确定同一轴对象中的不同绘图）。

# javascript - 如何删除 javascript 对象（John Resig - 简单继承）？

> ID：11229300
> 
> 赞同：0
> 
> 时间：2012-06-27T15:04:51.090
> 
> 标签：javascript, oop

我的代码：

```
myobj = new Object();
classes.testegy = Class.extend({
    init: function (token) {
        console.log("test egy");
        setInterval(function () {
            console.log('hello');
        }, 300);
    },
    testt: function () {
        console.log("luli");
    }
});
classes.testketto = Class.extend({
    init: function (token) {
        console.log("test ketto");
    }
});
classes.site = Class.extend({
    init: function (token) {
        var myobj = new Object();
        myobj.lel1 = new classes.testegy();
        myobj.lel2 = new classes.testketto();
        console.log(myobj);
        delete myobj.lel1;
        myobj.lel1.testt();
    }
});
var class = new classes.site(); 
```

如果我删除 myobj.lel1 对象，它将被删除，但 setInterval 进入 testegy 类。为什么？如何完全删除对象？谢谢

编辑：

例如，当不使用 setInterval 时，使用 click 和控制台日志。

```
classes.testegy = Class.extend({
init: function(token){
    console.log("test egy");
    $(".piii").live("click", function() {
        console.log("hello");
    });

},
foo: function() {
    console.log("pina");
}
});

classes.testketto = Class.extend({
init: function(token){
    console.log("test ketto");
}   
});

classes.site = Class.extend({
init: function(token){
    var myobj = new Object();

    myobj.lel1 = new classes.testegy();
    myobj.lel2 = new classes.testketto();

    console.log(myobj);

    delete myobj.lel1;
    myobj.lel1 = new classes.testegy();
    delete myobj.lel1;
    myobj.lel1 = new classes.testegy();
    delete myobj.lel1;
    myobj.lel1 = new classes.testegy();

}   
}); 
```

返回：1 次点击事件 -> 4 次点击 = 4 次控制台日志 :( 它创建了 4 个影子对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:08:53.123

您需要定义清洁功能。首先，保留对 的引用`setInterval`：

```
init: function(token){
    console.log("test egy");
    this.interval = setInterval(function() { console.log('hello'); }, 300);
} 
```

然后定义清洁功能（在原型中）：

```
clean: function() {
    clearInterval(this.interval);
} 
```

最后`myobj.lel1.clean()`在删除之前调用。

**编辑**

编辑代码的问题是不同的。看这个：

```
init: function(token){
    console.log("test egy");
    $(".piii").live("click", function() {
        console.log("hello");
    });
} 
```

每当您初始化新对象时，此函数都会**将**新处理程序添加到 click 事件`.piii`。您要做的是使用以下代码：

```
$(".piii").live("click", function() {
    console.log("hello");
}); 
```

在对象定义之外。或者你可以`$(".piii").unbind('click').click(/* handler */)`在里面使用`init`。

顺便提一句。`.live`方法已过时。现在使用`.on`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:09:35.307

`setInterval`返回计时器的标识符，然后可以通过`clearInterval`它来停止它。您需要`clearInterval`在销毁对象之前调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:11:22.810

> 如果我删除 myobj.lel1 对象，它将被删除，但 setInterval 进入 testegy 类。为什么？

因为`delete`操作员只是删除对对象的引用，然后在某个时刻垃圾收集器释放该对象所在的内存。虽然删除间隔的唯一方法是使用 clearInterval 方法，如下所示：

```
...
init: function(token){
    console.log("test egy");
    this.interval = setInterval(function() { console.log('hello'); }, 300);
},
...

//then before calling delete you need to call clearInterval
clearInterval(obj.interval);
obj = null; 
```

或者您可以将所有清理封装到单独的方法中：

```
cleanup: function() {
    clearInterval(this.interval);
} 
```

# puppet - 如何将节点特定信息传递给 puppet 中的类？

> ID：11229302
> 
> 赞同：1
> 
> 时间：2012-06-27T15:05:03.493
> 
> 标签：puppet

我想将节点特定信息传递给一个类，然后它可以针对特定目的对其进行评估。其实这个问题由三个部分组成。

说，我有以下节点：

```
node 'devbox' {
    $serverType = 'something'

    include someClass

    someOtherClass { 'someOtherClass': 
        par1 => 'value',     
    }

    targetClass { 'nodeInformationShouldGoHere': }
} 
```

在 targetClass 中，我想评估是否设置了 serverType、someClass 或 someOtherClass（例如使用 if-else）。我现在的问题是：

1.  设置和传递适合 puppet 的变量吗？
2.  或者我应该使用标签（因为该节点的类是自动标记的）？
3.  他们有进一步的方法吗？对上述方法有什么限制（例如，它们适用于资源类型吗？）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T04:24:08.723

你完全可以通过这种方式使用 puppet。阅读[参数化类](http://docs.puppetlabs.com/guides/parameterized_classes.html)的文档，看看是否满足您的需求。

# facebook - 使用流表的 FQL 查询不接受应用访问令牌

> ID：11229304
> 
> 赞同：2
> 
> 时间：2012-06-27T15:05:06.803
> 
> 标签：facebook, stream, cron, facebook-fql, access-token

我整天都在搜索 stackoverflow 以找到没有运气的答案，所以我们开始吧。

我正在尝试从流表中获取数据，如下所示：

```
FQL: SELECT post_id, message, created_time FROM stream WHERE source_id = 131559313586863
URL: https://graph.facebook.com/fql?q=SELECT+post_id%2C+message%2C+created_time+FROM+stream+WHERE+source_id+%3D+131559313586863&access_token=10669xxxxx74470|PF-7GSdBx0Nxxxxxkdi1KwSQG-w 
```

但我收到 400 Bad Request 作为响应，并显示错误消息：*“请求此资源需要访问令牌。”* .

我正在使用以下网址获取应用程序访问令牌：[https ://graph.facebook.com/oauth/access_token?client_id=FACEBOOK_APP_ID&client_secret=FACEBOOK_APP_SECRET&grant_type=client_credentials](https://graph.facebook.com/oauth/access_token?client_id=FACEBOOK_APP_ID&client_secret=FACEBOOK_APP_SECRET&grant_type=client_credentials)

Facebook 在[此博客文章](http://developers.facebook.com/blog/post/509/)中声明*“您需要传递有效的应用程序或用户访问令牌才能访问此功能。”* . 功能是指 /feed 和 /posts（流表）。此外[，此 wiki](http://fbdevwiki.com/wiki/FQL%3astream#Notes.2FBugs.2FGotchas)讲述了有关使用流表的相同故事，*“从 2011 年 6 月 3 日起，查询此表需要令牌。您可以使用任何应用程序或用户令牌进行查询。”* .

**有没有人看到我希望明显的缺陷？**

请注意：

*   FQL 查询中的配置文件是公开的。
*   我需要这个来通过 cronjob 运行无用户。没有用户交互是可能的。
*   [如果我用来自https://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)的我自己的用户令牌替换应用程序访问令牌，则该请求有效

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T16:08:24.910

您确定您的应用未在应用设置中设置为“桌面/本机”吗？如果是这样，则无法使用应用访问令牌

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:20:49.690

对我来说很好——一旦我输入了一个有效的访问令牌**并**使用了 HTTPS。

# winapi - 在 Windows DLL 中，如何获取当前进程已打开的文件的句柄？

> ID：11229305
> 
> 赞同：0
> 
> 时间：2012-06-27T15:05:15.213
> 
> 标签：winapi, dll, filehandle

当我的插件 DLL 加载到主机应用程序的地址空间时，我需要将一些数据写入文件。问题是，在那个时间点，这个文件已经被具有独占写访问权限的主机进程打开了，我的调用`CreateFile`失败了`ERROR_SHARING_VIOLATION`

我想知道，我能否以某种方式使用 WinAPI 调用从主机进程获取文件句柄？这看起来是个糟糕的主意，但我*真的*需要写入那个文件。有人对如何解决这个问题有什么好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:59:11.410

可以通过`NtQueryInformationProcess`和/或枚举打开的句柄`NtQuerySystemInformation`，但它不受官方支持（您可以通过 Google 轻松找到非 Microsoft 文档）并且可能无法在未来版本的 Windows 中使用。

# php - 无法登录到所需位置

> ID：11229308
> 
> 赞同：0
> 
> 时间：2012-06-27T15:05:26.430
> 
> 标签：php, mysql, database, phpmyadmin

> **可能重复：**
> [未定义的索引：C:\wamp\www\Website\storeadmin\admin_login.php..中的用户名和密码相同](https://stackoverflow.com/questions/11224291/undefined-index-username-in-c-wamp-www-website-storeadmin-admin-login-php-and)

```
//admin_login.php
<?php
session_start();
if(isset($_SESSION["member"])){
    header("location:index.php");
    exit();
}

?>
<?php
if(isset($_POST["username"]) && isset($_POST["password"])){     // <-  Check the user has clicked the button
  $manager = preg_replace('#[A-Za-z0-9]#i',"",$_POST["username"]);
  $password = preg_replace('#[A-Za-z0-9]#i',"",$_POST["password"]);

include "../storescripts/connect_to_mysql.php";
$sql = mysql_query("SELECT * FROM admin WHERE username ='$manager' AND password ='$password'LIMIT 1");
$exist_count = mysql_num_rows($sql);
if($exist_count == 1){
    while(mysql_fetch_array($sql)){
        $id = $row["id"];
        }

    $_SESSION["id"]= $id;
    $_SESSION["manager"]= $manager;
    $_SESSION["password"]= $password;
    header("location:index.php");
    exit();

    }
    else{
    echo 'This information is incorrect,try again <a href = "index.php">Click Here</a>';
    exit();
    }
}

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title> AdminLogin</title>
<link rel="stylesheet" href="../style/style.css" type="text/css" media="screen"/>
</head>

<body>
<div  id="mainWrapper" > 
    <?php include_once("../template_header.php");?>
    <div id="pageContent" > 
    <div align="left" "style="margin-left:040px;"><h1>Please login to continue</h1><br />
    </div>
    <form id="form1" name="form1" method="post" action="admin_login.php"> 
    UserName<br />
    <input type="text" name="username" id="username" size="40"/>
    Password<br />
    <input type="password" name="password" id="password" size="40"/> 
    <br />
    <br />
    <br /> 
    <input type="submit" name="button" id="button" value="LogIn"/>  
    </form>
    </div>
    <?php include_once("../template_header.php");?>
</div>
</body>
</html>
//index.php
<?php
session_start();
if(!isset($_SESSION["member"])){
    header("location:admin_login.php");
    exit();
}

$managerID = preg_replace('#[^0-9]#i',"",$_SESSION["id"]);
$manager = preg_replace('#[A-Za-z0-9]#i',"",$_SESSION["manager"]);
$password = preg_replace('#[A-Za-z0-9]#i',"",$_SESSION["password"]);

include "../storescripts/connect_to_mysql.php";
$sql = mysql_query("SELECT * FROM admin WHERE id ='managerID' AND username ='$manager' AND password ='$password'LIMIT 1");
$exist_count = mysql_num_rows($sql);
if($exist_count == 0){
    echo("Your login session data in not in the database");
    exit();
}

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<html >
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Service Admin Area</title>
<link rel="stylesheet" href="../style/style.css" type="text/css" media="screen"/>
</head>

<body>
<div  id="mainWrapper" > 
    <?php include_once("../template_header.php");?>
    <div id="pageContent" > 
    <div align="left" "style="margin-left:040px;"><h1>Hello Store Manager .What would you loke to do today</h1><br />
    <h3><a href="inventory_list.php">Manage Inventory</a></h3><br/><h3><a href="">Manage Me</a></h3><br/></div></div>
    <?php include_once("../template_header.php");?>
</div>
</body>
</html> 
```

`index.php`我面临的问题是，即使我输入了通过 phpmyadmin 设置的数据库中指定的正确用户名和密码，我也无法登录到我的页面。每次我尝试登录时，它都会`echo 'This information is incorrect,try again Click Here'`调用`admin_login.php`. 我有点沮丧。你们能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:12:59.147

尝试一些调试；

*   在 preg_replace 调用之前和之后检查 $_POST['username'] 和 $_POST['password'] 的值。
*   在对 mysql_query() 的调用中添加一个“or die mysql_error()”以查看它是否运行正常
*   回显 $sql 的值，以便您查看查询。
*   header() 命令是否不需要名称和值之间的空格？还是之后的 \r\n ？值得仔细检查。
*   通常在各个阶段提供更多输出，跟踪问题应该是微不足道的。

并且（一旦工作），请在数据库中的密码字段中添加 crypt() 或 md5() + salt。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:27:34.277

我很确定 preg_replace 正在清空你的变量

```
$manager = preg_replace('#[A-Za-z0-9]#i',"",$_POST["username"]);   $password = preg_replace('#[A-Za-z0-9]#i',"",$_POST["password"]); 
```

根据 php 文档[http://uk.php.net/manual/en/function.preg-replace.php](http://uk.php.net/manual/en/function.preg-replace.php)

你试过删除它们吗？

# c# - 访问32位内存地址c#

> ID：11229309
> 
> 赞同：3
> 
> 时间：2012-06-27T15:05:29.087
> 
> 标签：c#, memory-address, intptr

我正在尝试访问一个 32 位地址，但是当我创建 IntPtr 时，它会抛出一个 OverflowException。这是代码：

```
uint memAddr = 0xF5920824;
IntPtr bufPtr = new IntPtr(memAddr);
byte[] data = new byte[4];
Marshal.Copy(bufPtr, data, 0, 4); 
```

我怎样才能访问该地址？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T15:11:59.720

对于如此大的数字 > 2^31-1，您需要编译为 64 位。

转到配置管理器...并将平台从 x86 更改为 Any CPU 或 x64。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T15:12:13.617

通过将 a 传递`uint`给`IntPtr`，您将其转换为 a `long`，因为`IntPtr`不支持无符号整数。然后，如果您在 32 位进程中运行，则会`uint`溢出`int`.

您需要使用 64 位来读取该地址。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T15:19:53.493

您的程序**不能**访问另一个程序的内存地址（不管您要读取的地址不适合`Int32`，请参阅[这篇文章](https://stackoverflow.com/questions/1148177/just-what-is-an-intptr-exactly?rq=1)以了解它是什么），`IntPtr`因为它们在其**私有地址空间**内运行。

它必须以某种方式由第一个程序（共享内存或其他东西）共享。此外，即使在同一程序的另一个实例中，一个程序中的地址 XYZ*也可能完全不同（因为地址是虚拟的）。*

如果您确定内存地址（如何？甚至可能需要扫描进程内存），您必须 P/Invoke [`ReadProcessMemory()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680553%28v=vs.85%29.aspx)，这是一个为调试目的而设计的函数，如果您的可执行文件有足够的权限，您可以读取另一个内存过程。
例如，请参阅[SO 上的这篇文章](https://stackoverflow.com/questions/6935439/readprocessmemory-and-writeprocessmemory-gone-wrong)。

# algorithm - 对于相似图像有什么好的最近邻算法吗？

> ID：11229311
> 
> 赞同：2
> 
> 时间：2012-06-27T15:05:33.513
> 
> 标签：algorithm, hadoop, hash, surf, knn

我正在寻找一种可以在大型集合中搜索相似图像的算法。我目前在 OpenCL 中使用 SURF[实现。](http://code.google.com/p/clsurf/)

起初，我使用[KNN](http://en.wikipedia.org/wiki/K-nearest_neighbor_algorithm)搜索算法将每个图像的兴趣点与集合的其余部分进行比较，但测试表明它不能很好地扩展。我还尝试了[KNN-Join](http://www.cs.utah.edu/~lifeifei/papers/mrknnj.pdf)的 Hadoop 实现，它确实在 HDFS 中占用了大量临时空间，与输入数据量相比太多了。事实上，由于我的输入向量的维度（64），成对距离方法并不合适。

我听说过Locally Sensitive Hashing，想知道是否有任何免费的实现，或者是否值得实现它，也许还有另一种我不知道的算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T03:30:17.100

IIRC flann 算法是一个很好的折衷方案： [http ://people.cs.ubc.ca/~mariusm/index.php/FLANN/FLANN](http://people.cs.ubc.ca/~mariusm/index.php/FLANN/FLANN)

# php - getJSON 发送带有多行字符串的请求

> ID：11229313
> 
> 赞同：0
> 
> 时间：2012-06-27T15:05:43.840
> 
> 标签：php, javascript, string

我有这样的事情：

**代码.js**

```
var params = {
  option1 : encodeURIComponent("text\n text\n text\n\n\n"), 
  option2 : encodeURIComponent("\n\n\n text")
};
$.getJSON("/update_user_info", params, function(data) {}); 
```

**/update_user_info**

```
<?php
   foreach($_GET as &$data) $data=urldecode($data);
   /*CODE*/
   echo json_encode($some_result);
?> 
```

但是我`\n`的被删除或替换为`whitespaces`

**是否可以在 GET 请求中保留换行符？**

*PS：我必须制作完整的ajax网站，所以我不能使用常规“POST”方法的表单，提交按钮等。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:07:56.397

使用 nl2br 将换行符转换为 HTML 换行符

# sql - 在sql中选择第二行

> ID：11229316
> 
> 赞同：0
> 
> 时间：2012-06-27T15:05:47.150
> 
> 标签：sql, tsql

我只想从表中选择第二行。从 ClientUserName 列。

```
SELECT
    ClientUserName, DestHost, count(DestHost) counts  
FROM 
    #ProxyLog_record  
WHERE
    ClientUserName = (Select top 1 ClientUserName from #ProxyLog_count_2)  
GROUP BY 
    ClientUserName, DestHost 
ORDER BY 
    counts DESC 
```

`(Select top 1 ClientUserName from #ProxyLog_count_2)`仅显示`top 1`，但我需要从该表中获取第二个数据。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:12:42.160

据推测，您正在使用 SQL Server。“前 1”是从表中选择一个随机行，因为您没有 order by 子句。

如果要将第二行插入到表中，方法是在表中定义一个自增列。创建表语句应包括：

```
create table #ProxyLog_count_2 (
    ProxyLog_Count_2_id int not null identity(1,1),
    ...
) 
```

然后，您可以使用简单的 where 子句插入第二行：

```
where ProxyLog_Count_2_id = 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:14:03.717

最简单的方法是使用如下`ROW_NUMBER()`方法：

```
WITH c AS (
SELECT
    ClientUserName, DestHost, count(DestHost) counts, ROW_NUMBER() OVER(ORDER BY count(DestHost)) AS rowNum
FROM 
    #ProxyLog_record  
GROUP BY 
    ClientUserName, DestHost 

)
SELECT ClientUserName, DestHost, counts
FROM c
WHERE rowNum = 2 
```

`count(DestHost) counts`（非必要请勿使用，或使用其他CTE节省两次计数）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:14:32.203

根据您到目前为止所尝试的...

```
SELECT top 1
    ClientUserName, DestHost, count(DestHost) counts  
FROM 
    #ProxyLog_record  
WHERE
    ClientUserName <> (Select top 1 ClientUserName from #ProxyLog_count_2)  
GROUP BY 
    ClientUserName, DestHost 
ORDER BY 
    counts DESC 
```

你可以使用 ROW_NUMBER()...

你可以用光标...

您可以在第一行放置一个标识符以允许您将其过滤掉（然后，再次选择前 1 并获得它）。

否则，如果第二行有一些可识别的东西（它是否有最高的东西，或最低的，或最近的日期等），

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T15:14:45.510

尝试：

```
SELECT
    ClientUserName, DestHost, count(DestHost) counts  
FROM 
    #ProxyLog_record  
WHERE
    ClientUserName = (    
        ;with cte as 
        (
            select ROW_NUMBER() over (order by ClientUserName) as rn, * 
            from #ProxyLog_count_2
        ) 
        select ClientUserName from cte where rn=2    
    )
GROUP BY 
    ClientUserName, DestHost 
ORDER BY 
    counts DESC 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T16:16:20.697

Wjy 不只是选择前 2 名并从结果集中获取 aecomd 行吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-06T05:48:05.093

```
SELECT Top 1 a.ClientUserName, a.DestHost, a.counts
FROM
(
SELECT Top 2
    ClientUserName, DestHost, count(DestHost) counts  
FROM 
    #ProxyLog_record  
WHERE
    ClientUserName = (Select top 1 ClientUserName from #ProxyLog_count_2)  
GROUP BY 
    ClientUserName, DestHost 
ORDER BY 
    counts DESC
)
as a
ORDER BY a.Counts ASC 
```

# windows - Windows Server 2008 R2 32 位任务计划程序

> ID：11229320
> 
> 赞同：1
> 
> 时间：2012-06-27T15:05:57.293
> 
> 标签：windows, odbc, 32-bit, scheduler, wsh

尝试在 Windows Server 2008 R2 机器上安排任务。

我有一个 vbscript 连接到一个 oracle 数据库来提取数据，我希望它每隔一段时间运行一次。

vbs 在同一台机器上独立工作，仅在使用 32 位 csript.exe（需要 32 位 ODBC 驱动程序）运行时。我可以使用批处理文件来关闭 vbs 文件以调用 C:\Windows\SysWOW64\cscript.exe "c:\scriptLoc" 并且它工作正常。

但是当我尝试安排一项任务时，我遇到了与尝试通过双击直接运行 vbs 时相同的错误 - 它使用 cscript.exe 64 位（我想）。

我还尝试打开 32 位任务计划程序 C:\Windows\SysWOW64\taskschd.msc，并在那里添加作业，但得到相同的结果。

有什么建议么？

谢谢

编辑 - - - - - - - - - - - - - - - - - - - - - - - - - -------------------------------------------------- ----------

错误是找不到 Oracle 客户端，驱动程序是 32 位的，不适用于 64 位。当我使用默认的 cscript.exe 手动运行 vbs 时会出现此错误，但是当我使用 32 位 cscript.exe 手动运行时一切正常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:26:04.103

计划任务的解决方案是：-

启动程序

程序脚本 = C:\Windows\SysWOW64\cscript.exe（即 32 位 csscript.exe）

添加参数 = C:\Scripts\test.vbs（我要运行的 vbs 脚本）

Start in = C:\Windows\SysWOW64\（在32位目录下运行）

# javascript - 是否可以从 WPF Web 浏览器控件的 Java 脚本调用 C# 方法？

> ID：11229322
> 
> 赞同：3
> 
> 时间：2012-06-27T15:06:07.053
> 
> 标签：javascript, html, wpf, dom-events, wpf-controls

我在 WPF 中使用 Tab 控件，并且 Tab 控件在第一个选项卡中包含一个 WebBrowser 控件。我有一些用于 Webbrowser 控件的脚本和 HTML 内容，这很好用。我还可以调用编写在 HTML 内容中的脚本方法，但我需要反之亦然，因为需要从 Javascript 方法调用 C# 方法。

是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:14:58.310

您可以指定一个可直接从 JavaScript 调用的对象。查看[WebBrowser](https://msdn.microsoft.com/en-us/library/system.windows.controls.webbrowser(v=vs.110).aspx)控件上的[ObjectForScripting](https://msdn.microsoft.com/en-us/library/system.windows.controls.webbrowser.objectforscripting(v=vs.110).aspx)属性以获取更多信息。

此外，这是另一篇文章更好地概述了它：[在 WPF 应用程序中托管和与网页交互](https://stackoverflow.com/questions/470222/hosting-and-interacting-with-a-webpage-inside-a-wpf-app)

# java - 将类变量引用到局部变量

> ID：11229323
> 
> 赞同：1
> 
> 时间：2012-06-27T15:06:13.367
> 
> 标签：java

为什么有些人在方法中对字段变量进行新的引用？

```
public class Foo {
    int mFoo[] = {1, 2, 3};

    void method() {
        int foo[] = mFoo; // WHY not just use mFoo?

        print(foo[0]); // WHY not just use mFoo?
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T15:09:12.683

例如，如果在代码的另一个位置更改 mFoo 的值，这可能是一个好主意。尤其是在多线程上下文中，您会希望确保您仍在处理正确的数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T15:10:48.910

过去（Java ME AFAIK 仍然如此）将一个字段加载到一个局部变量中并多次使用它比多次访问一个字段要快。

但是，今天以这种方式使用局部变量会混淆 JIT 编译器，并且以这种方式使用局部变量可能会更慢。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T15:09:37.840

这取决于你的目标。如果要修改作为参数传入的任何对象，则不会创建所引用对象类型的新实例。

否则，您将创建一个可以自由修改的新实例，而不必担心对传入对象的修改。这通常用于多线程应用程序。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-27T19:01:56.853

已经有一个公认的答案，但在这种情况下使用更有意义：

```
private Class<?> clazz = ...;

public void foo() {
    Class<?> current = clazz;
    while (current != Object.class) {
        // do some stuff.
        current = current.superclass();
    }
} 
```

在此示例中，您不断将“当前”重新分配给新值。想象一下没有变量的副作用，如果你继续这样做：

```
clazz = clazz.superclass(); 
```

您将更改对象本身中的字段，而不是本地更改您的方法，因此对“foo”的重复调用不会表现出您所期望的行为。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-27T15:08:44.293

如果你像这样使用它只是没有意义：

```
int[] local = somethingElse;
... // changes to local will reflect on somethingElse 
```

如果一个真正的副本像这样完成，那将是有意义的：

```
int[] local = Arrays.copyOf(somethingElse,somethingElse.lenght())
... // changes to local will not reflect on somethingElse 
```

该副本可以防止更改调用其他方法或其他线程干扰的方法所需的元素。例如，如果您有一个方法可以更改在您使用它们的同时调用的这些元素。因此，您可以制作副本并使用它们，而不必担心对其应用的修改。

可以使用以下代码进行测试：

```
int[] test = new int[] {1,2,3};
int[] test2 = Arrays.copyOf(test,test.length);
test2[0] = 9;
System.out.println(Arrays.toString(test)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-27T15:13:36.433

**对于像int**这样的原始类型，您处理的是值，而不是指针，因此在调用方法“print”后，您的原始数组仍然保持不变。但它不适用于数组

# c# - 从字符串创建匿名类型

> ID：11229330
> 
> 赞同：1
> 
> 时间：2012-06-27T15:07:08.473
> 
> 标签：c#

所以我有一个匿名类型，我在上面使用了 ToString，并将其放入文件中。它看起来像这样（并且非常像 JSon ...）：

```
{ Name = Name, Description = Description, Status = Pending, Key = Template, SubmittedBy = MyName, Identity = 2fb7a40b-e07a-4f1a-a48b-2c2720567f35 } 
```

现在我想换一种方式（编辑：从文件中获取字符串并将其放入我可以放入已知对象的格式）并将其放入匿名类型（具有相同的属性，但我没有关心它们是否是可铸造的或类似的东西，我只是想要一种快速的方法来做类似的事情。

```
AnonObject = GetObjectFromFile(blah);
RealObject.Name = AnonObject.Name; 
```

我只有 RealObject 的接口，所以我不能向类添加序列化。如果你知道更好的方法，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T15:10:15.900

匿名类型在*编译*时定义，并像任何其他类型一样包含在程序集中。在执行时创建它们需要动态创建类型——它最终可能很快就会变得混乱。

如果您使用的是 .NET 4，则可以使用`ExpandoObject`and `dynamic`; 否则我可能只使用 a`Dictionary<string, object>`并更改它：

```
RealObject.Name = AnonObject.Name; 
```

到

```
RealObject["Name"] = AnonObject.Name; 
```

（反之亦然。目前还不清楚你在做什么。）

# android - 表格未填充包含布局的宽度

> ID：11229334
> 
> 赞同：1
> 
> 时间：2012-06-27T15:07:27.053
> 
> 标签：android, android-layout

我希望此表尽可能扩展以填充包含它的线性布局的剩余（空）区域

![在此处输入图像描述](../Images/9f9d44eb33ec0708cc04cc2cc2564651.png)

我使用以下方法生成表

```
public void drawTable(LinearLayout tableLayout,String tableTitle, String[][] data,String[] headerTitles, int type){

        //clearing previous views
         tableLayout.setVisibility(View.VISIBLE);
         tableLayout.setGravity(Gravity.CENTER);
         int chids = tableLayout.getChildCount();
         if (chids > 0){
             tableLayout.removeAllViews();
         }

        if((headerTitles!= null) && (headerTitles.length != data[0].length) ){
            return;
        }

        TableLayout table = new TableLayout(context);  
//      table.setStretchAllColumns(true);  
//      table.setShrinkAllColumns(true);  

        //Rendering the table title
        TextView tableTitleView = new TextView(context);
        tableTitleView.setText(tableTitle);
        tableTitleView.setTextColor(Color.WHITE);
        tableTitleView.setGravity(Gravity.CENTER);
        tableTitleView.setTextSize(18);
        tableTitleView.setTextAppearance(context, R.style.boldText);
        tableTitleView.setBackgroundColor(Color.parseColor("#008888"));
        tableTitleView.setPadding(2, 2, 2, 10);
        tableLayout.addView(tableTitleView, new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT,LinearLayout.LayoutParams.WRAP_CONTENT));

        ScrollView scroll1 = new ScrollView(context);
        HorizontalScrollView scroll2 = new HorizontalScrollView(context);

        int rows = data.length;
        int columns = data[0].length;

        if(headerTitles!=null){
            //Rendering the header
            TableRow headerRow = new TableRow(context);
            for (int i = 0; i < columns; i++) {
                TextView t = new TextView(context);
                t.setTextSize(17);
                t.setTextAppearance(context, R.style.boldText);
                t.setPadding(5, 5, 5, 5);
                t.setText(headerTitles[i]);
                t.setGravity(Gravity.CENTER);
                t.setTextColor(Color.WHITE);
                t.setBackgroundResource(R.drawable.text_border_header_1);
                headerRow.addView(t, LinearLayout.LayoutParams.WRAP_CONTENT,
                        LinearLayout.LayoutParams.WRAP_CONTENT);
            }
            table.addView(headerRow, new TableLayout.LayoutParams(
                    LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
        }

        //Rendering the Table Data
        TableRow row;
        for (int current = 0; current < rows ; current++) {
            row = new TableRow(context);
            TextView t;
            for(int i =0 ; i < columns ; i++){
                t = new TextView(context);
                t.setTextSize(15);
                t.setPadding(5,5,5,5);
                t.setText(data[current][i]);
                t.setGravity(Gravity.CENTER);

                if (type == 1) {
                    if (current % 2 == 0) {
                        t.setBackgroundResource(R.drawable.text_border_odd);
                    } else {
                        t.setBackgroundResource(R.drawable.text_border_even);
                    }
                }else if (type == 2) {
                    if (current % 2 == 0) {
                        t.setBackgroundResource(R.drawable.text_border_odd_2);
                    } else {
                        t.setBackgroundResource(R.drawable.text_border_even_2);
                    }
                }else if (type == 3) {
                    if (current % 2 == 0) {
                        t.setBackgroundResource(R.drawable.text_border_odd_3);
                    } else {
                        t.setBackgroundResource(R.drawable.text_border_even_3);
                    }
                }

                t.setTextColor(Color.BLACK);
                row.addView(t,TableLayout.LayoutParams.FILL_PARENT,TableLayout.LayoutParams.WRAP_CONTENT);
            }

            table.addView(row, new TableLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

        }
        scroll2.addView(table,LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.FILL_PARENT);
        scroll1.addView(scroll2,LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.FILL_PARENT);
        scroll1.setPadding(2, 20, 2, 20);

        tableLayout.addView(scroll1,LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.FILL_PARENT);

    } 
```

我无法弄清楚我的代码的确切问题。

**编辑 ：**

**当我将表格直接添加到线性布局而不是滚动视图时，表格适合线性布局宽度。看来我的问题在于滚动视图**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T12:01:56.003

[我在这里](https://stackoverflow.com/questions/2599837/linearlayout-not-expanding-inside-a-scrollview)找到了答案 （感谢 Felix）

只需将一行代码添加到滚动视图

```
scrollView.setFillViewPort(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:13:47.250

在你的 TableLayout 对象上试试这个。

```
TableLayout.LayoutParams params = new TableLayout.LayoutParams();
params.width = LayoutParams.FILL_PARENT;
table.setLAyoutParams(params); 
```

编辑：

```
TextView tView = new TextView(this);
LinearLayout.LayoutParams params = tView.getLayoutParams();
params.width = LayoutParams.FILL_PARENT;
params.weight = 1;
tView.setLayoutParams(params); 
```

问候， Aqif

# java - 范围配置

> ID：11229337
> 
> 赞同：0
> 
> 时间：2012-06-27T15:07:38.707
> 
> 标签：java, configuration

我目前正在寻找整合大量配置文件。目前，对于我们拥有的每个应用程序，我们为部署到的每个环境都有一组配置文件。

例如，我们有一个用于测试的属性文件，一个用于 uat，一个用于 prod。有很多重复的东西。

我想要做的是使用范围和通配符将这些替换为合并文件。

所以，例如，我可以有以下

```
*.value1=blah
uat.value1=blahblah

*.value2={value1}blah 
```

所以在产品中：

```
value1=blah, value2=blahblah 
```

在 uat 中：

```
value1=blahblah, value2=blahblahblah 
```

在测试中：

```
value1=blah, value2=blahblah 
```

现在，我*可以*自己推出这个，虽然我希望利用 commons-config，但我想知道是否有人知道那里有任何做这种事情的项目？

# cakephp - HABTM 删除约束

> ID：11229342
> 
> 赞同：1
> 
> 时间：2012-06-27T15:07:53.320
> 
> 标签：cakephp, constraints, has-and-belongs-to-many

我有两个模型类别和项目。类别可以有许多项目，项目可以在许多类别中，因此它们之间的关系是 HABTM。我的问题是即使项目在其中也可以删除一个类别。我在 RESTRICTS 删除的数据库表 categories_items 中有一个外键，但它没有帮助。如果有项目，我应该怎么做才能防止类别被删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:18:51.390

您需要在您的 CategoriesController 中覆盖实际的“删除”方法，以验证在删除之前该类别中没有项目。

就像是...

```
$c = $this->Category->findById($id);
$rels = $this->CategoriesItem->find('count', array('conditions' => array('CategoriesItem.category_id' => $id)));

if(count($rels) > 0) $this->Session->setFlash("NO WAY JOSE");
else $this->Category->delete($id); 
```

# c# - Winforms中如何支持拖放文件夹？

> ID：11229344
> 
> 赞同：0
> 
> 时间：2012-06-27T15:07:59.893
> 
> 标签：c#, winforms, drag-and-drop

我想知道如何拖放文件夹并获取其名称。我已经知道如何处理文件，但我不确定如何修改它以便也能够拖动文件夹。以下是删除文件时触发的事件代码：

```
private void checkedListBox_DragDrop(object sender, DragEventArgs e)
{
    if (e.Data.GetDataPresent(DataFormats.FileDrop))
    {
        // NB: I'm only interested in the first file, even if there were
        // multiple files dropped
        string fileName = ((string[])e.Data.GetData(DataFormats.FileDrop))[0];
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T15:23:10.277

您可以测试路径是否为文件夹，并在您的[`DragEnter`处理程序](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.dragenter.aspx)中，有条件地更改`Effect`：

```
 void Target_DragEnter(object sender, DragEventArgs e)
 {
     DragDropEffects effects = DragDropEffects.None;
     if (e.Data.GetDataPresent(DataFormats.FileDrop))
     {
         var path = ((string[])e.Data.GetData(DataFormats.FileDrop))[0];
         if (Directory.Exists(path))
             effects = DragDropEffects.Copy;
     }

     e.Effect = effects;
 } 
```

# java - Java 策略设置不适用于 FilePermission

> ID：11229345
> 
> 赞同：3
> 
> 时间：2012-06-27T15:08:02.077
> 
> 标签：java, java-5, javapolicy

我们的 Java 策略文件过去只是：

```
grant {
  permission java.security.AllPermission;
}; 
```

我正在努力使我们的应用程序更安全，而不仅仅是将一切授予所有人。我让它运行良好，除了我在授予文件权限时遇到问题。

我目前得到的错误是：

```
java.security.AccessControlException: access denied (java.io.FilePermission \\server.log write) 
```

我尝试了很多东西的组合，例如：

```
permission java.io.FilePermission "\\\\server.log", "write";
permission java.io.FilePermission "C:\\Temp\\logs\\server.log", "write";
permission java.io.FilePermission "\\server.log", "write";
permission java.io.FilePermission "${TEMP}${/}-", "write";
permission java.io.FilePermission "*", "read,write"; 
```

我唯一能让它工作的是使用：

```
grant {
  permission java.security.AllPermission;
}; 
```

使用时出现错误“java.io.FileNotFoundException: \server.log（文件名、目录名或卷标语法不正确）”（即使文件确实存在）：

```
permission java.io.FilePermission "<<ALL FILES>>", "write"; 
```

只是想知道是否有人有其他想法可以尝试。我真的不想为了获得正确的文件权限而求助于授予所有权限，显然我错过了一些东西。

**编辑：**

我刚刚意识到这可能是日志文件中的一个线索：

```
log4j:ERROR setFile(null,false) call failed. 
```

也许我特别需要一些权限？现在在谷歌周围挖掘......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-25T11:03:58.747

在 Oracle 文档中有一些示例： [https ://docs.oracle.com/javase/8/docs/technotes/guides/security/spec/security-spec.doc3.html](https://docs.oracle.com/javase/8/docs/technotes/guides/security/spec/security-spec.doc3.html)

```
permission java.io.FilePermission "myfile", "read,write";
permission java.io.FilePermission "/home/gong/", "read";
permission java.io.FilePermission "/tmp/mytmp", "read,delete";
permission java.io.FilePermission "/bin/*", "execute";
permission java.io.FilePermission "*", "read";
permission java.io.FilePermission "/-", "read,execute";
permission java.io.FilePermission "-", "read,execute";
permission java.io.FilePermission "<<ALL FILES>>", "read";

permission java.io.FilePermission "c:\\temp\\foo", "read,write,delete")
\\this one works for me 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-01T19:11:29.990

我认为问题是因为您试图在没有读取权限的情况下写入文件。

```
permission java.io.FilePermission "C:\\folder\\*", "read, write"; 
```

# javascript - windows popup 在显示 dos 之前关闭。xls

> ID：11229346
> 
> 赞同：0
> 
> 时间：2012-06-27T15:08:04.113
> 
> 标签：javascript, excel, jsp, internet-explorer-8, response

我正在尝试在 IE8 的弹出窗口中显示文档——但在显示之前，窗口会自动关闭。

这是代码：

javascript:

```
function hacerExportarExcel(){
   var url = contextPath + "/exportarCarteraCreditoExcel.do"
   window.setTimeout("window.open('"+url+"', '_blank', 'width=950,height=500,scrollbars=yes')",1000);

} 
```

行动：

```
try {

    response.setContentType("application/vnd.ms-excel");
    response.setHeader("Content-Disposition", "inline; filename=ConsultaCartera.xls");       
    consulta.setPdf(response.getOutputStream());
    administracionCreditoConsulta.exportarCarteraCreditoExcel(consulta); 

} catch (Exception e) {

    logger.logError(e);

} finally {

    response.getOutputStream().flush();
    response.getOutputStream().close();

} 
```

当询问新窗口时，它会弹出并开始加载，然后关闭并给我以下异常：

> 2012-06-27 11:01:01,951 错误 [LoggingFilter] log() 异常 (147): ClientAbortException: java.net.SocketException: Connection reset by peer: socket write error at org.apache.catalina.connector.OutputBuffer.doFlush (OutputBuffer.java:327) 在 org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:293) 在 org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:85) 在 com.wincornixdorf。 infinix.creditos.action.ExportarCarteraCreditoExcelAction.execute（ExportarCarteraCreditoExcelAction.java:82）

当我尝试在 IE 6 中执行此操作时，效果很好，会弹出窗口并显示 excel。但它不适用于 IE 8...

任何人都可以帮忙吗？

谢谢！

# operating-system - 在页面缓存中保留修改的页面是否更有意义（超过未修改的）？

> ID：11229347
> 
> 赞同：0
> 
> 时间：2012-06-27T15:08:06.053
> 
> 标签：operating-system

我正在研究页面缓存替换策略，我阅读了许多现有算法，其中大多数更喜欢将修改后的页面保留在缓存中。我真的不明白背后的原因。是因为驱逐成本还是修改后的页面有更高的再次使用机会？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:23:55.303

Out of many different policies LRU(least recently used) policy provides good result with hardware support.
`Is it due to eviction cost or modified pages have higher chance of being used again?`

Yes
So according to locality of reference the recently modified page has more chances of being referenced again. One more reason of retaining modified page in cache is that every page replacement of modified page (which has higher chances of being referenced again)requires two transfers. Firstly it is written into disk and secondly requested page comes in main memory. This very costly. But in case of non modified page (which has low chances of being referenced) only one transfer takes place i.e. requested page comes in memory.

# java - 有没有办法在每次启动任何活动时接收广播？

> ID：11229352
> 
> 赞同：2
> 
> 时间：2012-06-27T15:08:22.793
> 
> 标签：java, android

对于安卓开发者

我的目标是在启动任何活动时保存...

例如，在最后一个小时内启动了三个活动，我想将其保存到数据库中。

当然，我可以启动一项服务并每隔几秒检查一次启动了哪些活动，但它会使用手机电池！

谢谢你的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:12:32.300

也许实现一个 Application 类，类似于 Singleton 方法。然后在每次调用新 Activity 时将数据存储在应用程序中。

应用程序：http: [//developer.android.com/reference/android/app/Application.html](http://developer.android.com/reference/android/app/Application.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:40:06.700

最后我相信这是不可能的：

文件中有所有广播动作：

C:\Program Files (x86)\Android\android-sdk\platforms\android-15\data\broadcast_actions.txt

似乎没有人与任何活动启动有关。

# facebook - “user_denied”Facebook 应用页面上的 Facebook 用户区域设置

> ID：11229360
> 
> 赞同：1
> 
> 时间：2012-06-27T15:08:50.033
> 
> 标签：facebook

当用户拒绝权限时，我想在我的 Facebook 应用程序上显示正确的用户语言。我怎样才能做到这一点？我想在不使用facebook的自动翻译过程的情况下实现这一点，我需要有自己的翻译。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:27:08.580

我们在这里谈论什么，网站上的应用程序或画布/页面选项卡？

对于后者，`signed_request`contains `user.locale`，即使用户尚未授权该应用程序。

对于网站应用程序，如果用户尚未连接到应用程序 (AFAIK)，则没有可用数据。在这种情况下，您只能看到他们的客户端在 Accept-Language HTTP 请求标头中发送的内容。

# objective-c - CGContextStrokePath 在 iOS > 5 中触发 EXC_BAD_ACCESS

> ID：11229362
> 
> 赞同：5
> 
> 时间：2012-06-27T15:08:52.297
> 
> 标签：objective-c, ios5, ios4, exc-bad-access, quartz-2d

我有一个自定义 UIButton 类，它为 UIButton 添加了渐变和光泽效果，该代码在 iOS 4 和 iOS5 模拟器中完美运行，但是当我在 iOS 5 设备上运行它时，它给了我异常 EXC_BAD_ACCESS ，异常是由线 ：

```
CGContextStrokePath(context); 
```

非常感谢任何帮助，这是我的代码

```
- (void)drawRect:(CGRect)rect {
    CGContextRef context = UIGraphicsGetCurrentContext();

    CGFloat actualBrightness = _brightness;
    if (self.selected) {
        actualBrightness -= 0.10;
    }   

    CGColorRef blackColor = [UIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:1.0].CGColor;
    CGColorRef highlightStart = [UIColor colorWithRed:1.0 green:1.0 blue:1.0 alpha:0.7].CGColor;
    CGColorRef highlightStop = [UIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:0.0].CGColor;

    CGColorRef outerTop = [UIColor colorWithHue:_hue saturation:_saturation brightness:1.0*actualBrightness alpha:1.0].CGColor;
    CGColorRef outerBottom = [UIColor colorWithHue:_hue saturation:_saturation brightness:0.80*actualBrightness alpha:1.0].CGColor;

    CGFloat outerMargin = 7.5f;
    CGRect outerRect = CGRectInset(self.bounds, outerMargin, outerMargin);            
    CGMutablePathRef outerPath = createRoundedRectForRect(outerRect, 6.0);

    // Draw gradient for outer path
    CGContextSaveGState(context);
    CGContextAddPath(context, outerPath);
    CGContextClip(context);
    drawLinearGradient(context, outerRect, outerTop, outerBottom);

    CGContextRestoreGState(context);

    if (!self.selected) {

        CGRect highlightRect = CGRectInset(outerRect, 1.0f, 1.0f);
        CGMutablePathRef highlightPath = createRoundedRectForRect(highlightRect, 6.0);

        CGContextSaveGState(context);
        CGContextAddPath(context, outerPath);
        CGContextAddPath(context, highlightPath);
        CGContextEOClip(context);

        drawLinearGradient(context, CGRectMake(outerRect.origin.x, outerRect.origin.y, outerRect.size.width, outerRect.size.height/3), highlightStart, highlightStop);
        CGContextRestoreGState(context);

        drawCurvedGloss(context, outerRect, 180);
        CFRelease(highlightPath);

    }
    else {
        //reverse non-curved gradient when pressed
        CGContextSaveGState(context);
        CGContextAddPath(context, outerPath);
        CGContextClip(context);
        drawLinearGloss(context, outerRect, TRUE);      
        CGContextRestoreGState(context);

    }
    if (!_toggled) {
        //bottom highlight
        CGRect highlightRect2 = CGRectInset(self.bounds, 6.5f, 6.5f);
        CGMutablePathRef highlightPath2 = createRoundedRectForRect(highlightRect2, 6.0);

        CGContextSaveGState(context);
        CGContextSetLineWidth(context, 0.5);
        CGContextAddPath(context, highlightPath2);
        CGContextAddPath(context, outerPath);
        CGContextEOClip(context);
        drawLinearGradient(context, CGRectMake(self.bounds.origin.x, self.bounds.size.height-self.bounds.size.height/3, self.bounds.size.width, self.bounds.size.height/3), highlightStop, highlightStart);

        CGContextRestoreGState(context);
        CFRelease(highlightPath2);
    }
    else {
        //toggle marker
        CGRect toggleRect= CGRectInset(self.bounds, 5.0f, 5.0f);
        CGMutablePathRef togglePath= createRoundedRectForRect(toggleRect, 8.0);

        CGContextSaveGState(context);
        CGContextSetLineWidth(context, 3.5);
        CGContextSetStrokeColorWithColor(context, [UIColor whiteColor].CGColor);
        CGContextAddPath(context, togglePath);
        CGContextStrokePath(context);
        CGContextRestoreGState(context);
        CFRelease(togglePath);
    }
    // Stroke outer path
    CGContextSaveGState(context);
    CGContextSetLineWidth(context, 0.5);
    CGContextSetStrokeColorWithColor(context, blackColor);
    CGContextAddPath(context, outerPath);
    CGContextStrokePath(context);
    CGContextRestoreGState(context);

    CFRelease(outerPath);

} 
```

我现在真正想要的是它真的与 iOS 5 相关还是我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T13:10:30.700

发生崩溃是因为当您访问 CGColorRefs 时 UIColors 已经被释放。

避免这种情况的一种简单方法是使用

```
UIColor* blackColor = [UIColor blackColor];
CGContextSetStrokeColorWithColor(context, [blackColor CGColor]); 
```

代替

```
CGColorRef* blackColor = [[UIColor blackColor] CGColor];
CGContextSetStrokeColorWithColor(context, blackColor); 
```

所以 ARC 没有机会提前释放 UIColor 对象。

# c# - 如何在 MVC Razor 中显示时间跨度

> ID：11229365
> 
> 赞同：3
> 
> 时间：2012-06-27T15:08:54.783
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

所以我有一个以秒为单位的视频持续时间，我想在 Razor 中显示该持续时间。

目前我正在使用

```
@TimeSpan.FromSeconds(item.Duration).ToString() 
```

但是我正在使用的其余代码使用

```
@Html.DisplayFor(modelItem => item.Description) 
```

有没有办法让持续时间（当前是一个 int）将 a 显示为时间跨度？使用`@Html.DisplayFor`语法。item.duration 从实体框架模型中提取，该模型在数据库中作为 int 保存。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-27T16:50:56.977

约翰，

创建您自己的显示模板。为此，请按照下列步骤操作：

1.  在 Views/Shared 下创建一个名为 DisplayTemplates 的文件夹
2.  在该新文件夹下，创建一个名为 TimeSpan.cshtml 的局部视图
3.  现在，在您看来，每当您遇到一个时间跨度的模型属性时，它都会由 TimeSpan DisplayTemplate 自动呈现。
4.  为您的模型添加一个新的 get 属性。

模型编辑（添加以下内容）：

```
public TimeSpan MyTimeSpanProperty
{
    get
    {
        return TimeSpan.FromSeconds(Duration);
    }
} 
```

时间跨度.cshtml

```
@model TimeSpan
@string.Format("{0}:{1}:{2}", Model.Hours, Model.Minutes, Model.Seconds) 
```

在您的视图中调用为

```
@Html.DisplayFor(m => m.MyTimeSpanProperty) 
```

这将显示为`3:24:16`等。

这就是它的全部内容（它假设您将传递一个 TimeSpan 类型的属性，所以如果可能的话，看看您是否可以对您的模型进行微小的更改！！）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T15:12:34.753

您可以使用[`partial class`](http://msdn.microsoft.com/en-us/library/wa80x488%28v=vs.80%29.aspx)定义扩展您的模型类。

```
public partial class My_class_that_has_been_created_by_EF {
    public string Timespan {
        get { 
            return Timespan.FromSeconds(Duration).ToString(); 
        }
    }
} 
```

然后在您的视图中使用它

```
@Html.DisplayFor(modelItem => item.Timespan) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-15T02:51:52.150

您应该利用`DataAnnotations`命名空间和`DisplayTemplates`ASP.NET MVC

1.  首先使用 Attribute 屏蔽您的`UIHint`属性并将模板设置为`VideoDuration`Models */YourVideoModel.cs*

    ```
    [UIHint("VideoDuration")]
    public int Duration { get; set; } 
    ```

2.  *在Views/Shared/DisplayTemplates/ **VideoDuration** .cshtml*向您的项目添加显示模板（`DisplayTemplates`如果文件夹不存在，您可能需要添加文件夹）

    ```
    @model int?
    @string.Format("{0:g}", TimeSpan.FromSeconds(Model)) 
    ```

然后你可以像这样在你的视图中使用它：

```
@Html.DisplayFor(m => m.Duration) 
```

# python - 更改 django_tables2 表宽度的最简单/正确的原因是什么

> ID：11229366
> 
> 赞同：1
> 
> 时间：2012-06-27T15:08:54.843
> 
> 标签：python, css, django-tables2

我希望在整个屏幕上绘制由 django-tables2 呈现的表格。我正在使用包含的淡蓝色 css。

```
class PoolTable(tables.Table):
    class Meta:
        model = Simple 
        attrs = {'class': 'paleblue','width':'100%'} 
```

*   是否有可能在代码中相当容易地做到这一点，如果可以的话怎么做？
*   如果您不能在代码中轻松做到这一点，我必须在 css 或 html 或任何其他地方更改什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:03:07.423

这更像是一个CSS问题。以下是我如何以简单的方式做到这一点：

将宽度更改为 100% 以上

```
class PoolTable(tables.Table):
    class Meta:
        model = Simple 
        attrs = {'class': 'paleblue','width':'200%'} 
```

这只会改变表格的大小而不是分页。如果你不想改变它的大小，你必须在css中改变它。我确实发现从分页中删除边框是最简单的。

# objective-c - 对没有键的多个对象的 NSMutableArray 进行排序

> ID：11229368
> 
> 赞同：0
> 
> 时间：2012-06-27T15:08:56.850
> 
> 标签：objective-c, sorting, nsmutablearray

我有一个 NSMutableArray 对象，下面是结构：

```
//object at index i
locations {
   NSString* address;
   NSString* state;
   NSNumber* distance;
} 
```

我在 NSMutableArray 中有**10000 个**类似上述结构的对象。如何排序这个数组，以便位置按 NSNumber 距离排序？

我试过这个：

```
lowToHigh = [NSSortDescriptor sortDescriptorWithKey:@"distance" ascending:YES];
[locationArray sortUsingDescriptors:[NSArray arrayWithObject:lowToHigh]]; 
```

是用`sortDescriptorWithKey:@"distance"`错了吗？因为距离实际上不是关键，它是 NSNumber* 距离。

在我的标题中编辑，`@property (strong, nonatomic)NSNumber* _distance;`然后`@synthesize _distance = distance;`在我的方法文件中进行编辑，但这是在 locationObjects.* 对象类中。然后我在我当前的班级中导入这个我正在做这个排序。这是一个问题吗？我如何导入是`locationObjects* locObj = [[locationObjects alloc] init];`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:14:48.007

这就是我使用的：

```
NSSortDescriptor *lowToHigh = [[NSSortDescriptor alloc] initWithKey:@"distance"
                                              ascending:YES];
NSArray *mySortDescriptors = [NSArray arrayWithObject:lowToHigh];
NSArray *sortedArray = [locationArray sortedArrayUsingDescriptors:mySortDescriptors]; 
```

# iphone - 在 UINavigationController 中调整工具栏的大小

> ID：11229370
> 
> 赞同：0
> 
> 时间：2012-06-27T15:09:03.153
> 
> 标签：iphone, objective-c, ios, uinavigationbar

我正在使用以下方法向 UINavigationBar 添加一系列按钮：

```
 NSArray *items;

        items = [NSArray arrayWithObjects:
                 fixedSpace,
                 refreshStopBarButtonItem,
                 flexibleSpace,
                 self.backBarButtonItem,
                 flexibleSpace,
                 self.forwardBarButtonItem,
                 flexibleSpace,
                 self.actionBarButtonItem,
                 fixedSpace,
                 nil];

    UIToolbar *toolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0.0f, 0.0f, toolbarWidth, 44.0f)];

    toolbar.items = items;

    toolbar.tintColor = [[UIColor whiteColor] colorWithAlphaComponent:1.0];

    toolbar.autoresizingMask = UIViewAutoresizingFlexibleHeight;

    self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:toolbar]; 
```

一切运作良好。

但是，当我旋转到横向模式时，uinavigationbar 中的工具栏不会旋转。

添加此代码（在 SO 上找到）会导致工具栏调整大小，但不会调整其中的按钮，因此它们在底部被部分裁剪，不再与工具栏背景对齐

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    CGRect navigationToolbarFrame = self.navigationController.navigationBar.frame;
    CGRect customToolbarFrame = CGRectOffset(navigationToolbarFrame, 0.0, navigationToolbarFrame.size.height);
    [UIView animateWithDuration:duration animations:^{
        //self.toolbar.frame = customToolbarFrame;
        // FAILS!!!
        //self.navigationItem.rightBarButtonItem.toolbar.frame = customToolbarFrame;
        // FAILS!!!
    }];
} 
```

在 uinavigationbar 中处理工具栏的正确方法是什么？就像是...

```
self.toolbar.frame = customToolbarFrame; 
```

还是我必须为 UIBarButtonItems 指定自动调整大小掩码？...

```
self.backBarButtonItem.autoresizingMask = UIViewAutoresizingFlexibleHeight; 
```

...尝试这样做失败了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:08:09.153

1.  非常好奇，因为当我将它包含在我的代码中时，该代码可以很好地旋转工具栏。旋转工具栏没问题。

2.  我假设您的视图控制器正在响应`shouldAutorotateToInterfaceOrientation`？你能包括你所看到的屏幕快照吗？

3.  您是否正在做任何`UIToolbar`类别/子类来消除其边界？（我只是用空子类`(void)drawRect:(CGRect)rect`来摆脱边框，但我尝试了它和标准`UIToolbar`并且都旋转得很好。）无论如何，如果你正在做子类/类别`UIToolbar`，请包含该代码？

4.  此外，您也可以只使用 iOS 5`rightBarButtonItems`并完全绕过工具栏，例如`self.navigationItem.rightBarButtonItems = items;`，然后将 UIBarButtonItem 对象数组添加到导航栏。

5.  这有点远，但是您的视图控制器是如何加载的？有些人尝试绕过`presentViewControllerAnimated`和/或`pushViewController`简单地创建一个视图控制器，获取它的视图，将其添加为前一个视图控制器视图的子视图。不幸的是，这最终导致视图控制器层次结构和视图层次结构之间断开连接，并且根据[WWDC 2011 会话 102](https://developer.apple.com/videos/wwdc/2011/?id=102)上的视图控制器包含，这可能会阻止正确传输旋转事件。确保您正在使用`presentViewControllerAnimated`或者`pushViewController`这不是您的根视图控制器。

我不做任何那个`willAnimateRotationToInterfaceOrientation`或后续代码，只是简单的 UIToolbar 并且它在旋转期间工作正常，所以我想知道问题是否出在其他地方。

# bash - 使用 set -x 时重定向 bash 脚本中的所有输出

> ID：11229385
> 
> 赞同：41
> 
> 时间：2012-06-27T15:09:56.397
> 
> 标签：bash, io-redirection

我有一个 bash 脚本`set -x`。是否可以将此脚本的调试打印及其所有输出重定向到文件？理想情况下，我想做这样的事情：

```
#!/bin/bash
set -x
(some magic command here...) > /tmp/mylog
echo "test" 
```

并得到

```
+ echo test
test 
```

在 /tmp/mylog 中输出，而不是在标准输出中。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-06-27T15:15:32.673

这是我刚刚用谷歌搜索的内容，我记得我前段时间使用过这个......

使用 exec 重定向脚本中所有命令的标准输出和标准错误：

```
#!/bin/bash
logfile=$$.log
exec > $logfile 2>&1 
```

如需更多重定向魔法，请查看[Advanced Bash Scripting Guide - I/O Redirection](http://tldp.org/LDP/abs/html/io-redirection.html)。

*如果除了*日志文件之外，您还想在终端上查看输出和调试，请参阅[将 stdout 的 COPY 从 bash 脚本本身重定向到日志文件](https://stackoverflow.com/questions/3173131/redirect-copy-of-stdout-to-log-file-from-within-bash-script-itself)。

如果您想独立于正常和处理`set -x`跟踪输出的目的地，请参阅[bash storage the output of set -x to log file](https://stackoverflow.com/questions/26610862/bash-storing-the-output-of-set-x-to-log-file)。`STDOUT``STDERR`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-27T15:14:39.100

输出到`-x`stderr，所以要记录它：

```
set -x
exec 2>/tmp/mylog 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-06-20T21:42:33.153

就我而言，脚本从其他地方被多次调用，我没有看到所有内容，所以我做了一个追加，它起作用了：

```
exec 1>>FILENAME 2>&1
set -x 
```

为避免混淆，请务必在每次运行前删除 FILENAME。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-02-01T20:27:28.873

重定向**stderr**和**stdout**：

```
exec &>> $LOG_FILE_NAME 
```

如果要附加到文件。覆盖文件：

```
exec &> $LOG_FILE_NAME 
```

# php - 这个 mod_rewrite 代码如何正确解析？

> ID：11229388
> 
> 赞同：3
> 
> 时间：2012-06-27T15:10:08.597
> 
> 标签：php, apache, .htaccess

我的 .htaccess 文件如下：

```
Options -Multiviews
RewriteEngine On
RewriteCond %{HTTP_HOST} ^example.com
RewriteRule ^(.*)$ http://www.example.com/$1 [R=301,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ $1.php 
```

它有效，但我想知道它是如何工作的。例如，如果我输入`example.com/main`，我会在`www.example.com/main.php`. 如果代码告诉重写在添加到开头`.php`后停止，我如何获得扩展名？`www.``example.com`

**编辑：**或者我应该只为了登录记住的用户而创建一个唯一的 ID？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T15:12:12.667

您要询问的特定行为是因为规则

```
RewriteRule ^(.*)$ http://www.example.com/$1 [R=301,L] 
```

是 301 重定向；它指示浏览器发起一个全新的 HTTP 请求。唯一的`L`原因（只能导致）它是*为该请求*执行的最后一条规则；新请求带有正确的主机名并继续前进。

# asp.net-mvc - 如何从视图中检索传递给我的自定义 EditorFor 的对象属性的 VALUE？

> ID：11229391
> 
> 赞同：4
> 
> 时间：2012-06-27T15:10:15.197
> 
> 标签：asp.net-mvc, reflection, html-helper, editorfor

**System.Web.Mvc**有一个 HtmlHelper，其中包含一个名为**EditorFor**的方法，该方法呈现与视图中的数据类型关联的编辑控件。

我试图通过扩展 ASP.NET MVC 2 HtmlHelper 创建我自己的 EditorFor 方法。我有以下内容：

```
 public static string EditorForNew<TModel, TProperty>(this HtmlHelper<TModel> helper, Expression<Func<TModel, TProperty>> item)
    {
        string value = "";
        string name = item.ToString(); // THIS IS CORRECTED IN MY COMMENT TO THE ANSWER BELOW!
        Type type = typeof(TProperty);

        if (type == typeof(int) || type == typeof(int?) || type == typeof(double) || type == typeof(double?) || type == typeof(decimal) || type == typeof(decimal?) || type == typeof(float) || type == typeof(float?))
        {
            return helper.TextBox(name, value, new { @class = "number" }).ToString();
        }
        else
        {
            return helper.TextBox(name, value).ToString();
        }
    } 
```

谁能解释我如何检索从视图传递给它的对象属性的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:13:12.837

您需要使用 ModelMetadata：

```
ModelMetadata metadata = ModelMetadata.FromLambdaExpression(item, helper.ViewData); 
```

然后，您可以从`metadata.Model`属性中获取值。

# ruby-on-rails - Rails 如何在一个环境中执行多个命令？

> ID：11229393
> 
> 赞同：1
> 
> 时间：2012-06-27T15:10:19.397
> 
> 标签：ruby-on-rails, ruby-on-rails-3

有没有办法在一行上执行多个 Rails 3 rake 命令，只需要启动一次环境？

我知道这是可能的：

```
rake db:rollback db:migrate 
```

但如果选项通过，

```
rake db:migrate VERSION=0 db:migrate 
```

第二个 'db:migrate' 不会运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T15:22:20.730

我不认为这是可能的。

我能想到的最快的解决方案是：

```
RAILS_ENV=test rake db:migrate VERSION=0 && rake db:migrate 
```

我认为这是不可能的原因是因为`VERSION`它只是一个常量，而不是作为`db:migrate`选项传递的属性。例如，所有这些命令都有效：

`rake db:migrate VERSION=0`

`rake VERSION=0 db:migrate`

`VERSION=0 rake db:migrate`

而且由于您不能再次在同一操作中重写常量，因此您基本上调用`db:migrate VERSION=0`了两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:44:19.533

为什么不试试[宙斯](https://github.com/burke/zeus)？

它为 rails、rake、测试环境等预加载环境。

# javascript - 在较新版本的 Internet Explorer 中，iframe 高度未使用 javascript 进行调整

> ID：11229398
> 
> 赞同：0
> 
> 时间：2012-06-27T15:10:27.750
> 
> 标签：javascript, html

我有一个链接到另一个 html 页面的 iframe。iframe 包含在 div 中。我发现一些代码会根据 iframe 的内容自动调整高位。此代码在 Firefox 和旧版本的 Internet Explorer 中运行良好，但在 v7 或更高版本中无法调整高度.....

Javascript：

```
<script type="text/javascript"> 
    function changeContent(){ 
        document.getElementById('right').innerHTML = window.frames['contentFRAME'].document.getElementsByTagName('html')[0].innerHTML; 
    } 
</script> 
```

HTML：

```
<div class="fl" id="right">
    <iframe class="newsFrame" id = "contentFRAME" name = "contentFRAME" src ="news.html" onLoad = "changeContent()"></iframe>
</div> 
```

有没有人可以帮忙啊。。。。。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T11:27:23.240

尝试这个

```
function resizePanel() {
    window.console.log("ran the resize panel function");
    var frame = document.getElementsByTagName('iframe')[0];
    if(frame != null) {
        frame.style.height = frame.contentWindow.document.body.scrollHeight + "px";
    }
} 
```

# xcode - 如何为 iphone 错误编译 PJProject

> ID：11229401
> 
> 赞同：0
> 
> 时间：2012-06-27T15:10:41.240
> 
> 标签：xcode, ios5, pjsip

我正在尝试为 iPhoneSDK 5.1 编译 PJSip。我正在运行 Lion 1.7.3 和 Xcode 4.3.3。我没有找到任何有关编译它的有用信息。我什至不确定它是否支持 iphonesdk 5.1。我在项目的网站上没有得到任何关于它的信息。我不确定上一个 iPhoneSDK 版本的编译器是否发生了某些变化，但这些是我遇到的错误我按照项目网站上的步骤更改了 config_site.h 添加了这些行

```
#define PJ_CONFIG_IPHONE 1
#include <pj/config_site_sample.h> 
```

然后将标头移动到位置 pjlib/include/pj/

我的configure-iphone文件我改变了行

```
./aconfigure --host=arm-apple-darwin9 --disable-floating-point --disable-sdl $* 
```

至

```
./aconfigure --host=arm-apple-darwin10 --disable-floating-point --disable-sdl $* 
```

sow 它将为 iPhoneSDK 5.1 编译

当我运行 configure-iphone 一切时，我没有收到任何错误，但是当我运行 make sep 时，我在 samples.mak 收到此错误

> make -f Samples.mak 依赖 make[2]: `depend' 无事可做。

并在运行时

> “_pjsua_aud_subsys_start”，引用自：
> 
> ```
>  _pjsua_media_subsys_start in libpjsua-arm-apple-darwin10.a(pjsua_media.o) 
> ```
> 
> “_pjsua_vid_subsys_start”，引用自：
> 
> ```
>  _pjsua_media_subsys_start in libpjsua-arm-apple-darwin10.a(pjsua_media.o) 
> ```
> 
> ld：未找到架构 armv7 的符号
> 
> collect2: ld 返回 1 个退出状态
> 
> make[2]: *** [../bin/pjsua-arm-apple-darwin10] 错误 1
> 
> make[1]: *** [pjsua] 错误 2
> 
> 制作：*** [全部] 错误 1

有没有人解决这个问题，或者可以提供一个解决方案来为 iphonesdk5.1 whit Xcode 4.3.3 编译 Pjsip。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T08:06:54.983

`./configure-iphone`在您的 pjsip 目录中输入终端

记得通过 Xcode 安装命令行工具

配置完成后

尝试`make dep`&& `make clean`&&`make`

# java - Java 堆中对象的大小与方法有关

> ID：11229405
> 
> 赞同：2
> 
> 时间：2012-06-27T15:10:50.533
> 
> 标签：java, methods, heap-memory, classloader

我知道堆上的原语和对象，但是方法的数量如何影响对象的堆大小？

例如：

```
public class A {
    int x;
    public getX() { return x; }
}

public class B {
    int x;

    public getX() { return x; }
    public getXString() { return String.valueOf(x); }
    public doMoreInterestingStuff() { return x * 42; }
    //etc
} 
```

实例化时，两个对象都位于堆上，都为它们的原语分配了内存`x`，但是由于有更多的方法签名，B 是否分配了更多的堆空间？还是那些仅在 permGen 空间上？在这个例子中它是微不足道的，但是当在任何给定时间内存中有 100,000 多个这些对象时，我想它可以加起来。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T15:12:40.733

> 方法的数量如何影响对象的堆大小？

它没有。它对每个对象的大小没有影响，实际上也没有必要 - 它并不像该类型的每个对象都有不同的方法。

显然，额外的方法在“某处”（基本上与类相关联）占用内存，但它不是基于每个*对象*。

# c# - C# 适用于 32 位但不适用于 64 位

> ID：11229407
> 
> 赞同：1
> 
> 时间：2012-06-27T15:10:53.277
> 
> 标签：c#, 64-bit, 32-bit

下面的代码在我的 32 位机器上完美运行，但我现在已经在我的 64 位机器上测试了代码，我希望它能够在我调用 64 位版本的 cscript.exe 时工作。

相反，代码到达它运行脚本的位置，然后等待正好 30 秒，然后退出脚本并继续程序的其余部分。然而，该脚本似乎没有运行，（如果我手动运行它可以正常工作）。

```
 using (var ServerProcess = new System.Diagnostics.Process())
            {
                var fileInformation = new FileInfo(VBScriptToRun);
                string processFileName = IntPtr.Size == 8 ? @"c:\windows\sysWOW64\cscript.exe " : @"c:\windows\system32\cscript.exe ";
                string processWorkDir = IntPtr.Size == 8 ? @"c:\windows\sysWOW64\" : @"c:\windows\system32\";
                string processArguments = fileInformation.FullName;
                ServerProcess.StartInfo.FileName = processFileName;
                ServerProcess.StartInfo.WorkingDirectory = processWorkDir;
                ServerProcess.StartInfo.Arguments = processArguments;
                ServerProcess.StartInfo.CreateNoWindow = false;
                ServerProcess.StartInfo.UseShellExecute = false;
                ServerProcess.StartInfo.RedirectStandardOutput = true;
                ServerProcess.StartInfo.LoadUserProfile = true;

            EventLogger.Instance.WriteInformation("Total Integration Service Processing File:  Starting to launch the specified program");

            try
            {
                ServerProcess.Start();
                ServerProcess.WaitForExit();
            }catch(Exception e)
            {
            EventLogger.Instance.WriteInforamtion("Error running script: " + e)
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T15:29:06.847

```
// Sample for the Environment.GetFolderPath method
using System;

class Sample 
{
    public static void Main() 
    {
    Console.WriteLine();
    Console.WriteLine("GetFolderPath: {0}", 
                 Environment.GetFolderPath(Environment.SpecialFolder.System));
    }
}
/*
This example produces the following results:

GetFolderPath: C:\WINNT\System32
*/ 
```

您不应尝试访问`sysWOW64`32 位 Windows 程序集所在的文件夹。由于您指出这`cscript.exe`是一个 64 位进程，因此`cscript.exe`在 Windows 7 x64 上安装的位置将是`System`目录

来源：http: [//msdn.microsoft.com/en-us/library/system.environment.specialfolder](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder)

您还应该使用以下内容来确定操作系统是否为 64 位。

```
public static bool Is64BitOperatingSystem { get; } 
```

[http://msdn.microsoft.com/en-us/library/system.environment.is64bitoperatingsystem.aspx](http://msdn.microsoft.com/en-us/library/system.environment.is64bitoperatingsystem.aspx)

我应该指出，您当前的方法失败了，因为它试图 [基于缺少的信息，这只是一个猜测] 启动 32 位进程。 `IntPtr.Size`取决于过程而不是机器。

如果您想使用您的方法，您只能使用以下代码来执行此操作。

```
[DllImport("kernel32.dll", SetLastError=true)]
  [return:MarshalAs(UnmanagedType.Bool)]
  extern static bool IsWow64Process(IntPtr hProcess, [MarshalAs(UnmanagedType.Bool)] out bool isWow64);
  [DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError=true)]
  extern static IntPtr GetCurrentProcess();
  [DllImport("kernel32.dll", CharSet = CharSet.Auto)]
  extern static IntPtr GetModuleHandle(string moduleName);
  [DllImport("kernel32.dll", CharSet = CharSet.Ansi, SetLastError=true)]
  extern static IntPtr GetProcAddress(IntPtr hModule, string methodName); 
```

你可以使用

```
System.Environment.GetEnvironmentVariable( "PROCESSOR_ARCHITECTURE" ) 
```

除非该进程是 32 位进程，否则它将返回 x86。

您最好使用 .NET 4.0 方法。

你也可以使用这个：

```
public static bool Is64BitProcess { get; } 
```

这样你就知道`cscript.exe`要实际启动哪个。如果您的进程是 64 位，则您应该只与 64 位进程通信。如果它是 32 位，则仅启动 32 位进程。

我确实相信 Windows 7 x64 可能会在`System`和`sysWOW64`系统目录中保留多个版本。

如果该进程实际上不是 64 位进程，则它不会位于`c:\windows\system32`64 位安装中。调查一下[为什么我被迫代替你研究这个？]`Environment.SpecialFolder.SystemX86`将指向正确的位置。

# java - 编写一个 android 应用程序 - 从哪里开始

> ID：11229411
> 
> 赞同：-5
> 
> 时间：2012-06-27T15:11:01.500
> 
> 标签：java, android, android-intent, android-activity

我一直在寻找整个互联网，我找到了一些很好的 android 编程指南，但我仍然不完全理解这件事到底发生了什么

我认为这就像编写一个java程序，但它非常不同..有很多xml文件，有一个叫做“活动”的东西和一个我不明白它们是如何工作的“意图”......方式相同显示的东西..有这个 xml 文件设计了应用程序的外观但是当你使用这个代码时：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Get the message from the intent
    Intent intent = getIntent();
    String message = intent.getStringExtra(FirsttimeActivity.EXTRA_MESSAGE);

    // Create the text view
    TextView textView = new TextView(this);
    textView.setTextSize(40);
    textView.setText(message);

    setContentView(textView);
} 
```

之前的文本框消失了，而是出现了一个普通的文本……这里发生了什么？之后如何用其他内容替换文本？我如何回到正常视图？

所以我的问题如下：

“活动”是什么意思？普通java项目中的并行是什么？意图是什么，它是如何工作的？如何控制显示？当我输入该代码时它怎么变了？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T15:18:12.217

Activity 是 Android 开发的重要组成部分。它基本上是一个类，您可以使用它来表示任意数量的 UI。onCreate 方法不是构造函数，而是在 Activity 启动后立即调用，因此在其中初始化您的信息是一个好主意。该程序通过代码行知道它在您的 android 清单文件中从哪个 Activity 开始

```
<category android:name="android.intent.category.LAUNCHER" /> 
```

与“普通”java 项目没有真正的相似之处。Intent 用于将信息从 Activity 传递到 Activity。了解 Intent 的最佳方式是在此处阅读它们：http: [//developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)

您所看到的实际视觉部分由位于项目中 /res/layout/ 文件夹中的 XML 文件控制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:19:11.713

这是您在来这里之前应该了解的所有非常基本的信息。更详细的指南和教程可以在 Android 开发者[网站上](http://developer.android.com/training/index.html)找到。在查看其他任何地方或在 Stack Exchange 上提问之前，请阅读教程和指南并尽可能多地学习。我在这里提供了一些基本答案，但您可以在我之前链接的网站上找到更好的详细信息。

简单来说，an`Activity`是一个特定的屏幕，是典型 Android 应用程序的构建块。您在 Android 应用程序中看到的每个屏幕（例如设置屏幕或主应用程序屏幕）都是一个`Activity`.

XML 文件用于设计每个`Activity`需要图形界面的布局。当你使用

```
TextView textView = new TextView(this);
textView.setTextSize(40);
textView.setText(message); 
```

您创建了一个全新的`TextView`小部件。要链接到已在 XML 文件中描述的小部件，请调用该`findViewById(int id)`方法。

An`Intent`是 Android 应用程序如何在活动之间传递信息并启动新活动的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:17:32.307

如果您访问[http://developer.android.com](http://developer.android.com)，您可以找到您需要的所有信息。学习编程 Android 需要一些学习。官方开发者网站是最好的起点。

# python - 如何使用 python 镜像 reddit 版主页面

> ID：11229413
> 
> 赞同：1
> 
> 时间：2012-06-27T15:11:05.290
> 
> 标签：python, session-cookies, mirror, reddit

为了透明起见，我正在尝试在我自己的服务器上创建一个子版块的特定版主页面（即受限）的镜像。不幸的是，我的 python-fu 很弱，在使用 reddit API、[它的 python 包装器](https://github.com/mellort/reddit_api)甚至[这里的一些答案后](https://stackoverflow.com/questions/189555/how-to-use-python-to-login-to-a-webpage-and-retrieve-cookies-for-later-usage)，我离有一个可行的解决方案更近了。

所以我需要做的是使用特定用户登录reddit，访问仅限版主的页面并将其html复制到我自己服务器上的文件中供其他人访问

我遇到的问题是 API 及其包装没有很好的文档记录，所以我还没有找到登录后是否有办法检索 reddit 页面。如果我能做到，那么理论上我可以复制结果到我的服务器上的一个简单的html页面。

当试图在 python API 之外进行时，我不知道如何使用 python 的内置模块登录然后读取受限页面。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:23:16.510

我不使用 PRAW，所以我不确定，但如果我要做你想做的事情，我会做类似的事情：登录，保存 modhash，从你所在位置的 url 中获取 HTML想去：

当我保存它时，它看起来也缺少一些 CSS 或其他东西，但它的可识别性就足够了。您将需要该`requests`模块`pprint`以及`json`

```
import requests, json
from pprint import pprint as pp2

#----------------------------------------------------------------------
def login(username, password):
    """logs into reddit, saves cookie"""

    print 'begin log in'
    #username and password
    UP = {'user': username, 'passwd': password, 'api_type': 'json',}
    headers = {'user-agent': '/u/STACKOVERFLOW\'s API python bot', }

    #POST with user/pwd
    client = requests.session()
    r = client.post('http://www.reddit.com/api/login', data=UP)

    #if you want to see what you've got so far
    #print r.text
    #print r.cookies

    #gets and saves the modhash
    j = json.loads(r.text)
    client.modhash = j['json']['data']['modhash']
    print '{USER}\'s modhash is: {mh}'.format(USER=username, mh=client.modhash)

    #pp2(j)

    return client

client = login(USER, PASSWORD)

#mod mail url
url = r'http://www.reddit.com/r/mod/about/message/inbox/'
r = client.get(url)

#here's the HTML of the page
pp2(r.text) 
```

# flash - 获取旧的 youtube 播放列表视频播放器的风格

> ID：11229418
> 
> 赞同：2
> 
> 时间：2012-06-27T15:11:14.537
> 
> 标签：flash, video, youtube, playlist, video-player

我的一个客户希望这种播放器炫耀他的你的管道： [http ://www.youtube.com/cp/vjVQa1PpcFO47iV4yCXKs3uwpqfv-OzC7leA9cug63Q=](http://www.youtube.com/cp/vjVQa1PpcFO47iV4yCXKs3uwpqfv-OzC7leA9cug63Q=)

他真的想要一个视频播放器，播放列表出现在鼠标悬停上，两个箭头返回并跟随导航，

但问题是这是旧的 YouTube 播放器，新的 YouTube API 不允许这种效果（它如何在鼠标悬停时显示播放列表），播放列表只是在单击按钮播放列表时显示，箭头消失了

如果您知道如何在 Flash 中重现这种效果。以动态内容为食，在这种情况下是特定的您的管道，

如果您知道一些免费的 Flash 播放器能够做到这一点，或者知道恢复旧播放列表 YouTube 查看器（如我留下的链接）的诀窍，我将非常感激，

# javascript - 在 Ajax 成功时设置 Html

> ID：11229422
> 
> 赞同：0
> 
> 时间：2012-06-27T15:11:27.870
> 
> 标签：javascript, jquery

我有几个看起来像这样的 html

```
<div class="item">
    <p class="price">$388.00</p>
         <p class="part_number">VM2327T23A00T</p>
         <p class="real_price"></p>
      </div>
      <div class="item">
    <p class="price">$88.00</p>
         <p class="part_number">AA327T23A00T</p>
         <p class="real_price"></p>
      </div>
      <div class="item">
      <p class="price">$38.00</p>
         <p class="part_number">AA327T23A00T</p>
         <p class="real_price"></p>
      </div> 
```

ETC..

我正在尝试遍历每个项目并将其“real_price”设置为一个值，这是我的代码：

```
 jQuery('.part_number').each(function () {
                    parts.push(SearchSpring.jQuery(this).text());

                    SearchSpring.jQuery.ajax(
            {
                type: "POST",
                url: "RealTimePricing.aspx/TestInteraction",
                data: "{param1:'brit', param2: 'nick'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                async: true,
                cache: false,
                success: function (msg) {                 
                   jQuery("#real_price").html(msg.d);

                }
            }
        );
      });

                } 
```

我在成功时得到了正确的“味精”（我可以在萤火虫中看到这一点），但它从不设置 html，而且它只迭代每 1 次..

我不确定为什么这不是设置 html

```
 jQuery("#real_price").html(msg.d); 
```

为什么我的代码没有遍历 html 中的所有“.part_number”标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:13:42.237

`class="real_price"`暗示`.real_price`，但您必须确保您也更新了正确的元素（该类有几个元素）。我建议`.next`在每个元素旁边使用作为要更新的`.part_number`元素：

```
jQuery(".part_number").each(function() {
   var $elem = jQuery(this).next(".real_price"); 
```

进而：

```
$elem.html(msg.d); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:16:02.960

使用`.`符号代替`#`，它是为查询保留的`id`。此外，您应该以访问单个价格的方式执行此操作，否则它将更新所有元素，如下所述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:17:30.363

您正在尝试更新您的 html 中不存在的 #real_price。您可以使用以下内容：

`jQuery(this).parent(".item").find(".real_price").html( msg.d );`这会更新 .item 的另一个子 .real_price

# java - 如何使用 Maven 创建构建依赖项？

> ID：11229424
> 
> 赞同：3
> 
> 时间：2012-06-27T15:11:37.800
> 
> 标签：java, maven, dependency-management

我有一个依赖于第二个项目（项目 B）的 maven Java 项目（项目 A）。现在，项目 A 从存储库中下载项目 B，以便进行构建。但是，我也在研究项目 B。如何让 Maven 使用我机器上的项目 B 的版本并忽略存储库中的版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:15:03.233

如果两个项目具有相同的版本（这是一个`SNAPSHOT`版本），则在本地构建项目 B ( `mvn clean install`)，项目 A 将使用该版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T06:46:19.677

您可以`mvn install`在 B 上执行此操作，以便将其安装到本地存储库并由 A 从那里使用。您可以将这两个项目聚合为[多模块项目的模块](http://maven.apache.org/guides/mini/guide-multiple-modules.html)，以便它们可以在同一个构建反应器中构建并相互查看。如果您在同一个工作区中有两个项目，您还可以使用支持您所说的内容的 IDE 插件（如 Eclipse 的 m2e）。

最后一个选项可能是最舒服的。

# sql - 组合框列计数剔除数据？

> ID：11229430
> 
> 赞同：0
> 
> 时间：2012-06-27T15:11:52.857
> 
> 标签：sql, database, ms-access

基本上，我有一个用于选择记录的组合框。然后，该组合框会根据 ID 填充在我的表单上找到的几个文本框。看两张图：

![这里](../Images/048ccaeb9ffca281d3da2d3f7aa7547f.png)

![这里](../Images/b42cd4c62a4906ec223982c820e9f4ef.png).

我希望组合框显示查询中的前两列，其中包含 16 个字段。确切地说，缩写和名称。但是，我发现如果我隐藏了查询中的字段，或者如果我限制了组合框的列数以便它只显示两个，它实际上会剔除数据，这样文本框就不会找到它（因此是空白的）。

我的问题是，我怎样才能只显示组合框的前两列，但仍然使用它的 ID 来引用所有十六列？

* * *

询问

```
SELECT Tradeshows.tradeShowAppreviation, 
Tradeshows.tradeShowName, Tradeshows.tradeShowID, 
Tradeshows.tradeShowWebsite, Tradeshows.tradeShowLocation, 
Tradeshows.tradeShowDateStart, Tradeshows.tradeShowDateEnd, 
Tradeshows.tradeShowBoothSize, Tradeshows.tradeShowShipDate, 
Tradeshows.tradeShowAudience, Tradeshows.tradeShowFocus,
Tradeshows.tradeShowMailer, Tradeshows.tradeShowDoorDrop, 
Tradeshows.tradeShowProductFocus, Tradeshows.tradeShowAttendees, 
Tradeshows.tradeShowMembers, Tradeshows.tradeShowMemberships
FROM Tradeshows; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:25:00.947

不要改变列数，改变列宽。

```
Column width: 0cm;2cm;1cm;0cm 
```

等等。

只选择相关的列应该不难。您可以发布组合的 Row Source 属性。

在我看来，您应该将表绑定到数据源 TradeShows 并使用向导创建一个查找记录的组合框。

您可以通过选择表格 Tradeshows 并选择创建表格或表格来完成此操作。您现在将拥有一个将 RecordSource 属性设置为 TradeShows 的表单。接下来，选择向表单添加一个组合框，确保您选择了向导（魔术棒按钮被突出显示）。您将可以选择“根据我在组合框中选择的值在我的表单上查找记录”。您可以选择此选项并逐步完成向导。当您进入选择字段的步骤时，请确保先选择 TradeShowID，然后选择名称和/或缩写。如果 TradeShowID 是主键，应该是，该列将在下一步中自动隐藏，这将显示选定的字段。这些操作的结果将是一个具有以下属性的组合框：

```
Row Source    : SELECT [Tradeshows].[tradeShowID], [Tradeshows].[tradeShowName], 
                [Tradeshows].[tradeShowAppreviation] FROM [Tradeshows];
Bound Column  : 1
Column Count  : 3
Column Widths : 0cm;2.54cm;2.54cm 
```

您还将在更新后事件（2010 年和可能的 2007 年）或早期版本的 [事件过程] 中拥有 [嵌入式宏]。向导代码很差，但那是另一天的工作。

如果您仍然希望将每个控件设置为（可能会更改）列顺序的所有工作，您可以按照组合的类似布局，适当地设置计数和宽度。

# java - java - 当用户指定列时，如何在java中对二维数组进行排序？

> ID：11229432
> 
> 赞同：0
> 
> 时间：2012-06-27T15:11:55.700
> 
> 标签：java, arrays, sorting, multidimensional-array

我想按列对二维数组进行排序。该数组来自 csv 文件，有些列是字符串，有些是整数，有些是双精度。用户应该能够指定列号。

所以如果我有这个数组

第 1 行 [[“1”，“猫”，“3.25”]，第
2 行 [“10”，“狗”，“18.64”]，
第 3 行 [“2”，“aaa”，“15.21”]]

并且第一列已排序，行将按 1、3、2 排序。不是 1,2,3 作为简单的字符串排序会返回。我知道我可以使用 Arrays.sort 方法并创建自己的比较器并使用 try catch 来确定指定列中的字符串是整数还是双精度数，但这对于看起来如此简单的事情来说似乎有点多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-11T01:16:07.863

考虑一维数组的常规排序算法。他们中的大多数要么比较两个元素并确定是否交换它们，要么遍历并找到最小的元素。现在，如果你按第一列排序，你会做类似的事情。通过比较它们的第*n*个元素来比较两个数组，并确定是否交换它们。或者，遍历所有数组并找到具有最小第*n*个元素的数组。

# android - 如何为android按钮制作点击区域？像闪击区

> ID：11229434
> 
> 赞同：1
> 
> 时间：2012-06-27T15:11:59.310
> 
> 标签：android

我想知道如何为 android 按钮制作“命中区域”。

我有一个带有背景图像的按钮。这个图像是不均匀的形状。我想制作一个“命中区域”和一个“非命中区域”——有形状的区域是“命中区域”，透明区域是“非命中区域”。

背景图像由透明区域和非透明区域组成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:14:24.457

唯一的方法是在它上面放置一个透明的视图，并在这个“幽灵”视图中监听触摸。

# jquery - jQuery 对象内的 jQuery 属性选择器

> ID：11229440
> 
> 赞同：0
> 
> 时间：2012-06-27T15:12:09.803
> 
> 标签：jquery, jquery-selectors, jquery-filter

我正在尝试设置一个带有多个过滤器的流沙，以及我在下面采用的方法，我不确定它是否是最好的。

```
$filteredItems = $containerClone.find('.portfolio-item-marketing').filter(function(index){

            if ( $filterA != 'all' && $filterB != 'all' )
            {
                return jQuery(this).find('.portfolio-item-marketing[data-type~=' + $filterA + ']') || jQuery(this).find('.portfolio-item-marketing[data-type~=' + $filterB + ']');
            }

            if ( $filterA != 'all' && $filterB == 'all' )
            {
                return jQuery(this+'[data-type~='+$filterA+']')  ;
            }

            if ( $filterA == 'all' && $filterB != 'all' )
            {
                return  jQuery(this).find('.portfolio-item-marketing[data-type~=' + $filterB + ']');
            }

            if ( $filterA == 'all' && $filterB == 'all' )
            {
                return jQuery(this).find('.portfolio-item-marketing');
            }

        }); 
```

正如您在代码中看到的，我尝试了 2 种不同的方法（第一个 "if" 和第二个 "if" ）。我不确定是否可以在过滤器中使用 find 但我也不知道如何从 jQuery 对象中获取属性。

我不能使用

```
jQuery(this).attr('data-type') == $filterA 
```

因为属性可能包含各种过滤器。这就是我尝试使用 jQuery "~=" 的原因

我应该放弃并结束使用 indexOf 吗？

例如 HTML 标记：

```
<ul class="filterA filters">
    <li class="active"><a href="javascript:void(0)" class="all">All</a></li>  
    <li><a href="javascript:void(0)" class="digital-books">Digital Books</a></li>
    <li><a href="javascript:void(0)" class="pdf">Pdf</a></li>
</ul>

<ul class="filterB filters">
    <li class="active"><a href="javascript:void(0)" class="all">All</a></li>  
    <li><a href="javascript:void(0)" class="3m">3M</a></li>
    <li><a href="javascript:void(0)" class="mcdonald">Mc Donald</a></li>
    <li><a href="javascript:void(0)" class="sony">Sony</a></li>
</ul>
<div id="portfolio-wrap" class="clearfix">
    <div class="portfolio-item-marketing" data-id="1" data-type="digital-books 3m "></div>
    <div class="portfolio-item-marketing" data-id="1" data-type="pdf 3m "></div>
    <div class="portfolio-item-marketing" data-id="1" data-type="digital-books sony "></div>
    <div class="portfolio-item-marketing" data-id="1" data-type="pdf mcdonald "></div>
</div> 
```

流沙过滤器脚本：

```
jQuery(document).ready(function(){
    if(jQuery().quicksand) {

    portfolio_quicksand();

    }

});

function portfolio_quicksand() {

    // Setting up our variables
    var $filter;
    var $container;
    var $containerClone;
    var $filterLink;
    var $filteredItems

    // Set our filter
    $filterA = jQuery('.filterA li.active a').attr('class');

    $filterB = jQuery('.filterB li.active a').attr('class');

    // Set our filter link
    $filterLink = jQuery('.filters li a');

    // Set our container
    $container = jQuery('#portfolio-wrap');

    // Clone our container
    $containerClone = $container.clone();

    // Apply our Quicksand to work on a click function
    // for each of the filter li link elements
    $filterLink.click(function(e)
    {

        // Remove the active class
        jQuery(this).parent().parent().find('li').removeClass('active');

        // Apply the 'active' class to the clicked link
        jQuery(this).parent().addClass('active');

        // Set our filter
        $filterA = jQuery('.filterA li.active a').attr('class');

        $filterB = jQuery('.filterB li.active a').attr('class');

        $filteredItems = $containerClone.find('.portfolio-item-marketing').filter(function(index){

            if ( $filterA != 'all' && $filterB != 'all' )
            {
                return jQuery(this).find('.portfolio-item-marketing[data-type~=' + $filterA + ']') || jQuery(this).find('.portfolio-item-marketing[data-type~=' + $filterB + ']');
            }

            if ( $filterA != 'all' && $filterB == 'all' )
            {
                return jQuery(this+'[data-type~='+$filterA+']')  ;
            }

            if ( $filterA == 'all' && $filterB != 'all' )
            {
                return  jQuery(this).find('.portfolio-item-marketing[data-type~=' + $filterB + ']');
            }

            if ( $filterA == 'all' && $filterB == 'all' )
            {
                return jQuery(this).find('.portfolio-item-marketing');
            }

        });

        // Finally call the Quicksand function
        $container.quicksand($filteredItems,
        {
            // The duration for the animation
            duration: 750,
            // The easing effect when animating
            easing: 'easeInOutCirc',
            // Height adjustment set to dynamic
            adjustHeight: 'dynamic'
        });
    });
} 
```

# c# - Response.Redirect 的异常？

> ID：11229444
> 
> 赞同：0
> 
> 时间：2012-06-27T15:12:12.817
> 
> 标签：c#, asp.net, exception, post

> **可能重复：**
> [从 Javascript 调用 ASP.NET 函数？](https://stackoverflow.com/questions/3713/call-asp-net-function-from-javascript)
> [Response.Redirect 导致 System.Threading.ThreadAbortException](https://stackoverflow.com/questions/2777105/response-redirect-causes-system-threading-threadabortexception)

我不断收到错误消息：

mscorlib.dll 中出现“System.Threading.ThreadAbortException”类型的第一次机会异常 mscorlib.dll 中出现“System.Threading.ThreadAbortException”类型的异常，但未在用户代码中处理线程“”（0x27ee4）已退出代码为 0 (0x0)。

有人告诉我这与此有关：

```
protected void Button1_Click(object sender, EventArgs e)
    {
        Response.Redirect("Results.aspx?Keywords=" + searchString.Text);  
    } 
```

我认为包含我的完整代码可能会有所帮助。上面的代码是我第一个 asp 页面上唯一的 C# 代码。

该代码与此页面上的此代码相关。它也是我第二页上唯一的 C# 代码。我只是想将搜索表单中的关键字传递给这段代码：

```
if (Request.QueryString["Keywords"] != null){
        string keywords = Request.QueryString["Keywords"];
            string myAppID = "HIDDEN";
            var xml = XDocument.Load("http://svcs.ebay.com/services/search/FindingService/v1?OPERATION-NAME=findItemsByKeywords&SERVICE-VERSION=1.0.0&SECURITY-APPNAME=" + myAppID + "&RESPONSE-DATA-FORMAT=XML&REST-PAYLOAD&keywords=" + keywords + "&paginationInput.entriesPerPage=5");
            XNamespace ns = "http://www.ebay.com/marketplace/search/v1/services";
            var titles = from item in xml.Root.Descendants(ns + "title")
                              select new{
                                  title = xml.Descendants(ns + "title").Select (x => x.Value),
                              };
        foreach (var item in titles){
                Label1.Text += item;
            } 
        } 
```

此代码块调用关键字值并在 api 中使用它来执行搜索。xml(api) 格式的代码如下：

```
<findItemsByKeywordsResponse xmlns="http://www.ebay.com/marketplace/search/v1/services">
<searchReslut count="5">
<item>
    <title></title>
</item>
<item>
    <title></title>
</item>
<item>
    <title></title>
</item> 
```

为什么我会收到此错误，您如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:15:44.727

尝试使用：

```
Response.Redirect(url, false); 
```

# mysql - 今天在两个 (DATETIME) 列之间吗？（空或全零算作未绑定的上限/下限）

> ID：11229466
> 
> 赞同：0
> 
> 时间：2012-06-27T15:13:02.150
> 
> 标签：mysql

我有一个产品表和两个 DATETIME 列，一个用于 start_date，一个用于 end_date。

如何检查特定产品 ID 是否介于开始日期和结束日期之间？但是，如果其中一个或两个为 NULL（默认值），则接受此下限/上限为无限制，如果产品仍在另一个范围内（如果已设置）则返回产品。如果两个边界都设置为 NULL，则始终返回产品。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:21:53.913

```
select *
from your_table
where
product_id = 1 AND
(
   (CURDATE() between start_date and end_date) 
   or (CURDATE() >= start_date and end_date is null) 
   or (CURDATE() <= end_date and start_date is null)
   or (start_date is null and end_date is null)
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:18:41.857

```
select case when ('2012-06-26' between start_date and end_date) 
                or ('2012-06-26' >= start_date and end_date is null) 
                or ('2012-06-26' <= end_date and start_date is null)
            then 1
            else 0
            end as is_between_dates
from your_table
where product_id = 1 
```

# routing - 您将如何为地图上各点之间的路线提供路线？缺失的部分是什么？

> ID：11229467
> 
> 赞同：2
> 
> 时间：2012-06-27T15:13:04.017
> 
> 标签：routing, maps, directions, ios6

在 iOS 6 中，地图应用程序正在放弃谷歌地图。Google Maps SDK 的条款规定，如果您使用他们的服务绘制路线，则必须在他们的地图上显示。由于不再是这种情况，我需要探索其他选项来获取方向并在地图上显示路线。

我发现 MapQuest 和 Nokia 都提供了一个 API 来提供方向和路由服务。

1.  MapQuest - [http://open.mapquestapi.com/directions/](http://open.mapquestapi.com/directions/)
2.  诺基亚 - [http://api.maps.nokia.com/en/apireference/2.2.0/symbols/nokia.maps.routing.html](http://api.maps.nokia.com/en/apireference/2.2.0/symbols/nokia.maps.routing.html)

我还看到 OpenStreetMap 有一个在线路由服务列表，对不同位置提供不同级别的支持，其中一些处于预发布状态。

[http://wiki.openstreetmap.org/wiki/Routing/online_routers](http://wiki.openstreetmap.org/wiki/Routing/online_routers)

在我想找到涵盖基础知识的地图软件入门之前，我没有对路由做太多工作。我的一个大问题是路线中的曲线。我只知道地图的坐标。我不知道沿曲线定义路线的方法，除非这意味着使用大量坐标来绘制曲线。我很欣赏一些关于如何处理曲线的解释。已知路线（例如道路以及人行道和步行道）的选项将是理想的选择。沿着已知路线绘制方向的基本入门知识将是最有帮助的。

感谢所有帮助。我知道许多为 iOS 6 准备应用程序的开发人员将研究方向和路线的服务，我希望通过这个问题收集的信息将有助于为他们提供一个起点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T20:01:02.390

[MapQuest iOS 地图 API](http://developer.mapquest.com/web/products/featured/apple-ios-maps-api)包括路由功能。可能值得一看？

MapQuest 还提供了[JavaScript API](http://developer.mapquest.com/web/products/featured/javascript)（支持移动设备）和[Mobile Flash API](http://developer.mapquest.com/web/products/featured/as3-flex-flash-mobile)（使用 Flex SDK 创建原生 iOS 和 Android 应用程序），它们本质上是核心[MapQuest Web 服务](http://www.mapquestapi.com)的包装器，包括您已经使用的 Directions 服务提及。

希望这有帮助！

# facebook - 如果我使用 Facebook 进行身份验证，常规 HTTP 可以吗？

> ID：11229469
> 
> 赞同：0
> 
> 时间：2012-06-27T15:13:07.037
> 
> 标签：facebook, http, authentication, ssl, https

Stack Overflow 社区可以为我检查一下吗？

我正在做一个涉及两个组件的项目：一个 iOS 应用程序和一个移动网站。这是一款将与 Facebook 进行大量交互的产品。该网站托管在 Heroku 上。

在 iOS 领域，我的意图是使用 Facebook iOS SDK 进行身份验证，然后在 https://[myappname].herokuapp.com 使用用户的访问令牌访问 Web API。由于 Heroku 在使用 herokuapp.com 域时提供搭载 SSL，并且用户无论如何都不会看到此 URL，我认为这很好。这样请求就被加密了，所以访问令牌应该是安全的。

从移动网站，用户将使用 Facebook 登录，此时我的理解是访问令牌将在他们的 cookie 中，然后我的服务器可以访问它们，而无需在每个请求中来回交换它。通过这种推理，在我看来，我可以坚持使用网站的常规未加密 http:// URL（因此可以使用我的自定义域名，而无需为 Heroku 的 SSL 端点附加组件支付月费）。

这一切有意义吗？我将是第一个承认我对这些东西的理解非常需要升级的人。但现在我只是在寻找可以告诉我，“不，你完全忽视/误解了 XYZ”或“是的，这就是通常的做法”的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:39:17.643

Facebook 建议您不要依赖他们的 cookie 格式。他们表示，cookie 是“一个实施细节”，他们可以随时调整，恕不另行通知。您不应直接从 cookie 中直接访问令牌或其他用户信息。我个人在尝试直接从 cookie 中获取用户信息时遇到过一些糟糕的经历，主要是由于时间问题——它们并不总是在那里，或者在我预期的时候更新。

在客户端，您应该通过 FB.getLoginStatus 或其他返回访问令牌的方法从 Javascript SDK 获取访问令牌，然后将其发布到您的服务器。这确实应该使用 ssl 来完成，否则您很容易受到网络数据包嗅探的影响，黑帽可以获取令牌并能​​够使用用户授予您的应用程序的所有权限。

还有一个服务器端选项，它访问 Facebook 服务器上的 ssl 端点以返回访问令牌。

参考：

“Cookie 是一个实现细节”： [https](https://developers.facebook.com/blog/post/624/) ://developers.facebook.com/blog/post/624/ 身份验证文档： [https ://developers.facebook.com/docs/authentication/](https://developers.facebook.com/docs/authentication/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:17:00.610

通过 Facebook 的网站登录通过 HTTP 完全可以正常工作。

# events - 为视图的每个实例触发的主干视图事件

> ID：11229470
> 
> 赞同：1
> 
> 时间：2012-06-27T15:13:09.683
> 
> 标签：events, backbone.js, views

A 有一个父视图`OpenOrderListView`，该视图创建`OpenOrderViews`具有*事件*的实例。我试图获得的结果是，当单击`markCompleted`an 的按钮`OpenOrderView`时*，*会调用一个函数来告诉*模型*设置该*属性*。

该功能正在运行，但它正在父级 (OpenOrderListView) 内的所有 OpenOrderViews 上调用，而不仅仅是处理单击事件的视图。我怎样才能让这个事件只在被执行的视图上触发？

代码如下

```
window.OpenOrderListView = Backbone.View.extend({
    el: 'table.openOrders tbody',

    initialize: function() {
        _.bindAll(this,'render');
        this.render();
    },

    render : function() {
        var $openOrders

        var models = this.collection.open();

        for (var i = models.length - 1; i >= 0; i--) {
            console.log('model', models[i]);
            console.log("this.template", this.template);
            new OpenOrderView({'model': models[i], 'el': this.el});
        };

    }
});

window.OpenOrderView = Backbone.View.extend({
    initialize: function() {
        console.log('this', this);
        _.bindAll(this,'render',
                       'markCompleted',
                       'markInProgress');
        this.render();
    },

    events : {
        "click .markCompleted":  "markCompleted",
        "click .markInProgress": "markInProgress",
    },

    markCompleted: function(){
        console.log(this);
        this.model.markCompleted();
    },

    markInProgress: function(){
        console.log("markInProgress",this);
        this.model.markInProgress();
        console.log('markInProgress Complete');
    },

    template : 'template-openOrderView',

    render : function() {
        console.log("View Rendered");
        $(this.el).append(tmpl(this.template, this.model.toJSON()));
    }

   window.Order = Backbone.Model.extend({
    url: function(){ 
        return "/api/order/id/"+this.get("id");
    },

    isCompleted: function(){
        return this.get('status') == "completed";
    },

    isInProgress: function(){
        return this.get('status') == "inProgress";
    },

    isOpen: function(){
        return this.get('status') == "open";
    },

    markCompleted: function(){
        this.set({'status':"completed"});
        console.log('markCompleted');
        return this.save();
    },

    markInProgress: function(){
        this.set({'status':"inProgress"});
        console.log('markInProgress');
        return this.save();
    },

    markOpen: function(){
        this.set({'status':"open"});
        console.log('markOpen');
        return this.save();
    }

});

}) 
```

订单视图模板

```
<tr class="order">
<td class="preview hide_mobile">
    <a href="{%=o.api_url%}" title="{%=o.name%}" rel="gallery"><img src="{%=o.thumbnail_url%}"></a>
</td>
<td class="name">
    <a href="{%=o.api_url%}" title="{%=o.name%}">{%=o.name%}</a>
</td>
<td class="description"><span>{%=o.description%}</span></td>
<td class="hide_mobile date_added"><span>{%=o.date_added%}</span></td>
<td class="hide_mobile user"><span>{%=o.username%}</span></td>
<td class="status">
    <a class="btn modal-download" target="_blank" href="{%=o.url%}" title="{%=o.name%}" download="{%=o.name%}">
        <i class="icon-download"></i>
        <span>Download</span>
    </a>  
    <button class="markCancel btn btn-danger" data-type="{%=o.delete_type%}" data-url="{%=o.delete_url%}">
        <i class="icon-remove icon-white"></i>
        <span>Cancel</span>
    </button>   
    <button class="markInProgress btn btn-primary" data-type="" data-url="">
        <i class="icon-repeat icon-white"></i>
        <span>Mark In Progress</span>
    </button>    
    <button class="markCompleted btn btn-success" data-type="" data-url="">
        <i class="icon-ok icon-white"></i>
        <span>Mark Completed</span>
    </button>
</td> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T15:34:55.350

所有这些`SubViews`都共享同一个 DOM 元素`table.openOrders tbody`。这是在行中完成的`new OpenOrderView({'model': models[i], 'el': this.el});`。

因此，当您声明这样的事件时：

```
events : {
    "click .markCompleted":  "markCompleted"
} 
```

发生的事情是所有匹配 this 的 DOM 元素`table.openOrders tbody .markCompleted`都将与此`click`事件绑定。

您需要每个`SubView`都有自己的`this.el`DOM 元素。

在您的情况下，我认为如果您的子视图像这样在空中创建自己的 DOM 元素会更好：

```
// code simplified an not tested
window.OpenOrderView = Backbone.View.extend({
  tagName: 'tr',
  attributes: { class: "order" },

  initialize: function(){
    // don't render() here
  },

  // ... rest of your code

  render: function(){
    this.$el.html(tmpl(this.template, this.model.toJSON()));
    return this;
  }
}) 
```

看看现在`SubView`没有*呈现*自己，也没有将其 DOM 元素直接*附加*到页面，这将是一项工作`ParentView`：

```
// code simplified an not tested
window.OpenOrderListView = Backbone.View.extend({
  render : function() {
    var $openOrders

    var models = this.collection.open();

    for (var i = models.length - 1; i >= 0; i--) {
      var openOrderView = new OpenOrderView({'model': models[i]});
      this.$el.append( openOrderView.render().el );
    };
}); 
```

我认为这是一个非常普遍的模式。

*PD：您必须修改模板以删除`tr`打开/关闭。*

# javascript - 根据类名显示/隐藏 div

> ID：11229474
> 
> 赞同：0
> 
> 时间：2012-06-27T15:13:19.547
> 
> 标签：javascript

我有一个显示/隐藏 div javascript 函数

我想将它转换为使用类名而不是样式

这是我要转换的功能

```
<script>
function toggle(e, id) {
    var el = document.getElementById(id);
    el.style.display = (el.style.display == 'none' || el.style.display == '') ? 'block' : 'none';
    toggle.el = el;
    if (e.stopPropagation) e.stopPropagation();
    e.cancelBubble = true;
    return false;
}
document.onclick = function() {
    if (toggle.el) {
        toggle.el.style.display = 'none';
    }
}
</script> 
```

我想将它转换为使用类名，

例如：

```
#hidden{
display:none;
}
#shown{
display:block;
}
function toggle(e,id){
if(el.class=='hidden'){
el.setAttribute("class", "showen");
}
//etc...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T15:24:56.967

有点离题，但如果您使用的是 jquery 库，这会更容易。

```
$(".yourclass").hide();
$(".yourclass").show(); 
```

要测试是否使用 jquery 显示某些内容：

```
if ($(".yourclass").is(":visible")) 
```

显然，您可能不想使用 jquery 是有原因的，但它有一些漂亮的工具可以让这样的事情变得更容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T15:28:27.487

首先，您的 CSS 无效，类是在 CSS 中使用 . 并不是 ＃。# 定义 ID，它们对于文档中的一个元素始终是唯一的。另一方面，顾名思义，类是许多对象都可以是的一类事物。一个ID就像一只狗的名字“Fido”，你应该只有一只狗叫“Fido”，而一个类就像一个狗品种，你可以有很多个cockapoos，但每个都必须有一个唯一的名字。这个问题的其他答案无法纠正您的 CSS，如果您不纠正，它将无法正常工作。

```
 .hidden{
   display:none;
 }
 .shown{
   display:block;
 } 
```

其次，如果你使用 JavaScript 框架，比如 JQuery，它会让你的生活变得更轻松。这是使用 JQuery 编写的相同内容（Jquery 库包括省略）

```
$(document).click(function() {
    var toggleElements = $(".toggleMe");
    $.each(toggleElements, function (key, value) {
       if (value.hasClass('hidden')) {
           value.removeClass('hidden');
           value.addClass('shown');
       } else {
           if (value.hasClass('shown')) {
               value.removeClass('shown');
               value.addClass('hidden');
           }
       }
    });
}); 
```

我建议改进的另一件事是不要使用 display: block 来显示，因为 display:block 不一定意味着简单地“显示”与“隐藏”，它暗示了有关如何处理该元素的信息在显示方面，这意味着块元素被视为其完整的高度/宽度，无论需要什么，它旁边的任何 HTML 元素都将被强制到下一行，除非另有明确设计。您应该做的只是删除隐藏类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:17:46.800

检查类名的`className`存在并不像人们想象的那么简单。以下文章对此进行了很好的解释，并包含了自定义函数：[`hasClassName()`](http://www.julianwong.net/blog/2009/10/nice-way-to-check-dom-node-classname/)

```
function hasClass(el, class_to_match) {
    if (el && el.className && typeof class_to_match === "string") {
        var c = el.getAttribute("class");
        c = " " + c + " ";
        return c.indexOf(" " + class_to_match + " ") > -1;
    }
    else {
        return false;
    }
} 
```

然后你可以简单地更新你的`toggle`功能：

```
function toggle(el, id) {
  if (hasClassName(el, 'hidden')) {
    el.setAttribute("class", "showen");
  }
} 
```

**注意：**如果你经常做这样的事情，我确实提倡使用这样的 Javascript 框架/库。但是，如果切换元素的显示只是您要做的事情，那么我认为它们是矫枉过正的。

# android - 将我的 SQLite 数据库推送到 Emulator Data/Data.. 文件夹中。在 Emu 上工作正常，而不是在设备上

> ID：11229476
> 
> 赞同：1
> 
> 时间：2012-06-27T15:13:24.477
> 
> 标签：android, database, sqlite, android-emulator

我用我的 SQLiteHelperClass 创建了一个 SQlite 数据库。第一次创建后，我从 data/data/../databases 文件夹中提取它，对其进行编辑（我添加了内容）并将其再次推送到数据文件夹中。我使用 DDMS 来拉取和推送数据库。现在我的应用程序可以访问我的数据库中的所有数据。但只要用我的模拟器！当我用我的设备运行应用程序时，我无法访问数据库。应用程序似乎只是创建一个新的空数据库。所以我认为我设备上的 Data/Data/../Databases 文件夹是空的..

如果我在设备上上传应用程序，为什么我的模拟器创建的数据库会被删除？该应用程序怎么可能在我的模拟器上运行得很好，但在我的应用程序上却不行。

对不起，英语不是我的母语。我认为任何代码都没有帮助，问题的原因似乎是合乎逻辑的..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:38:44.713

您可以使用预先填充的数据库。将其保存在 Assets 文件夹中，然后将其复制到适当的位置 data\data\your packagename\database。

[预填充数据库的完整示例在这里](https://stackoverflow.com/questions/9109438/using-already-created-database-with-android/9109728#9109728)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:27:25.523

为了创建您的数据库，您可以使用 SQLiteOpenHelper 类。

[http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:28:10.290

如果您想在您的应用程序之外创建一个预加载的数据库并稍后在您的应用程序中使用它，您必须将它放在您的`assets`目录中，然后在您的应用程序`databases`第一次启动时将其复制到您的应用程序目录。

这是因为作为一项安全措施，在真实（无根）设备上，除了您自己的应用程序之外，什么都不能访问它们的`data`目录（包含`databases`目录）。

有一个很好的教程，用于在应用程序之外创建/复制您自己的数据库并将其复制到应用程序数据库[目录](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)。

# c - 所有 char 数组都自动以空值结尾吗？

> ID：11229477
> 
> 赞同：13
> 
> 时间：2012-06-27T15:13:25.177
> 
> 标签：c, arrays, string, null-terminated

可能我对谷歌搜索太垃圾了，但我一直认为 char 数组只会由字面初始化 ( `char x[]="asdf";`) 终止，当我看到情况似乎并非如此时，我有点惊讶。

```
int main()
{
    char x[2];
    printf("%d", x[2]);
    return 0;
} 
```

输出：0

声明为 size=2*char 的数组不应该实际获得 2 个字符的大小吗？还是我在这里做错了什么？我的意思是使用 char 数组作为简单的 char 数组而不是字符串的情况并不少见，或者是吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-27T15:14:54.897

您正在访问其边界之外的未初始化数组。这是双重*未定义行为*，任何事情都可能发生，甚至`0`作为输出。

回答您的真正问题：只有字符串文字才能获得*null-terminated*，这意味着它`char x[]="asdf"`是一个`5`元素数组。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T15:21:04.763

`char`数组**不会**自动以 NULL 结尾，只有字符串文字，例如`char *myArr = "string literal";`，以及从 stdlib 字符串方法返回的一些字符串 char 指针。

C 没有边界检查。因此，声明为 size 的数组为`2*char`您提供了 2 个可以使用的内存插槽，但您可以自由地在内存的任一侧遍历内存，读取和写入，从而调用未定义的行为。您可能会`0`在那里看到字节。您可能会写入`array[-1]`并崩溃您的程序。您有责任跟踪数组的大小并避免接触未分配的内存。

例如，通常将 char 数组用作简单的 char 数组，即不同于 C 字符串，以保存任意原始字节的缓冲区。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T16:03:31.773

如果`t`是 size 的数组`2`，则最后一种情况是`t[2 - 1] = t[1]`而不是 2.`t[2]`超出范围。

# dependency-injection - F# 中验收测试的模拟函数

> ID：11229480
> 
> 赞同：3
> 
> 时间：2012-06-27T15:13:36.723
> 
> 标签：dependency-injection, f#, functional-programming, mocking

我有一个生成随机数的函数。在验收测试时，我想用生成已知数字的方法替换它。

在面向对象的语言中，我会使用依赖注入并在测试设置中简单地连接这个组件。我能看到在函数式语言中执行此操作的唯一方法是通过程序从根传递依赖项，直到它到达需要它的函数（“海龟一路向下”是正确的短语吗？） .

有没有更好的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T15:32:18.047

有很多选项——你可以传递函数，你可以使用依赖注入机制（许多标准的 .NET 库可以在 F# 中工作，但你也可以找到一些特定于 F# 的轻量级工具），或者你甚至可以使用 monads隐式传递状态。

*但是，您是否需要在运行时在生产*设置和*测试*设置之间做出选择？如果不是，您可以将要以不同方式实现以进行测试的功能移动到单独的文件中，并拥有两个不同的项目版本。

这可能不是纯粹的解决方案，但它非常简单（只需使用`Random.Test.fs`代替`Random.Runtime.fs`）并且功能很好 - 您只需提供单个（或多个）功能的不同实现，其余代码将使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:24:52.373

*使用纯*函数式语言的唯一方法是将状态贯穿始终。F# 是不纯的，因此您可以按照在 OO 中执行的典型方式来执行此操作。但我不清楚你是在问语用学还是功能设计如何解决这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T18:28:24.573

大概您有以下内容：

```
let generateRandomNumber =
    let generator = new System.Random()
    fun () -> generator.Next()

let addFiveToRandomNumber() =
    let next = generateRandomNumber()
    next + 5 
```

`addFiveToRandomNumber`您要测试的功能在哪里。

解决您的问题的一个很好的方法，通常是 F# 中的良好实践，是解开您的纯函数和不纯函数：

```
let generateRandomNumber =
    let generator = new System.Random()
    fun () -> generator.Next()

let addFiveToGeneratedNumber generator =
    let next = generator()
    next + 5

let addFiveToRandomNumber() = addFiveToGeneratedNumber generateRandomNumber 
```

现在您要测试的函数是`addFiveToGeneratedNumber`，例如`addFiveToGeneratedNumber (fun () -> 1)`应该总是返回 6。我可能甚至不会打扰测试`generateRandomNumber`或`addFiveToRandomNumber`。

所以这里我们的解决方案是“传入依赖”，但它不必一直从根开始。

# html - CSS - 图像内的位置按钮

> ID：11229483
> 
> 赞同：7
> 
> 时间：2012-06-27T15:13:41.920
> 
> 标签：html, css, button, client, client-side

我有一个包含图像的 div，当我这样做时，我需要在图像内放置一个按钮到图像的右上角

```
#button_id{
position: relative;
    left: 270px;
    top: 30px;
} 
```

这样做是将按钮图像放置在其他位置，它将图像从左到右向下移动，但是现在该按钮可以从最初放置到 div 的最右侧的栏中单击。当我尝试这个

```
#button_id{
     position: relative;
     float: right; padding: 0px -40px -15px;
} 
```

它将按钮向右移动，但不会向下移动。

注意：按钮在 div 里面，没有 css 它被放置在图像顶部的中心

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T15:17:22.163

您应该提供包含图像 a 的 div`position:relative`和包含在该 div a 中的按钮`position:absolute`。这将使按钮相对于容器 div 定位。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-25T13:54:00.237

看看下面的这个例子：一张上面有上一个和下一个按钮的图像。 [![在此处输入图像描述](../Images/8bd32d3710a8685288ecdcafada0d96c.png)](https://i.stack.imgur.com/bmQIu.png)

```
 <div class="thumbnail rec thmbnail-large">
    <img class="img-thumbnail img-thumbnail-large-0 img-responsive" src="http://daniel-ethiopia.rhcloud.com/nivo/2.jpg" data-holder-rendered="true"  width="100%" style="margin-left:0px;height:auto;">
    <input type ="button" class="classic_button_next btn btn-primary btn-large" id="next_button" value="Next >>"/>
    <input type ="button" class="classic_button_prev btn btn-primary btn-large" id="prev_button" value="Previous <<"/>            
 </div> 
```

CSS============================================

```
<style type="text/css">
.classic_button_next{ position: absolute; right: 5px; top: 5px; }
.classic_button_prev { position: absolute; right: 88px; top: 5px; }
<style> 
```

JScript======================= 问我将讨论你如何处理下一个和上一个事情。尽管这是一个工作示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T15:19:49.553

如果您没有特定理由为此使用 img 标签，我将使用这样的 div 结构：

```
<div id="my_image">
<button id="button_id" />
</div> 
```

要使按钮正确定位，您需要将 div 位置设置为“相对”，将按钮位置设置为“绝对”。这意味着按钮的绝对位置将基于包装 div 的左上角。

这个 css 的一个例子是：

```
#my_image { position: relative; }
#button_id { position: absolute; right: 5px; top: 5px; } 
```

上面的 CSS 将把你的按钮放在右上角，它和 div 的角之间有 5px 的空间。

# objective-c - 名为“id”的Objective C IOS类变量

> ID：11229487
> 
> 赞同：1
> 
> 时间：2012-06-27T15:13:56.193
> 
> 标签：objective-c

我可以调用类变量“id”（例如 NSString *id）吗？一切似乎都有效，除了我无法在 dealloc 方法中进行 [id release]。我正在使用对象/键构造从 XML 解析器创建此类的实例，因此我需要将其称为 id。我已经尝试过 [self.id release] 并且一切正常，除了分析器向我显示警告说“属性返回具有 +0 保留计数的 Objective-C 对象”和“对象的引用计数不正确递减此时调用者不拥有”。所以我想知道我是否在做非法的事情。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T15:16:36.833

`id`在objective-c 中是一个预定义的类型。您可能应该将其命名为不同的名称，例如`idString`

这与尝试命名变量`int`或另一个objective-c关键字是一样的`if`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T15:16:53.933

`id`是objective-c中的关键字。它是一个弱类型变量标识符，类似于`var`javascript。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T15:18:52.420

不要这样做。

*   这是一个没有意义的名字——*什么*的ID ？
*   它与语言关键字冲突，并且一定会在某处产生一些不良影响
*   它会损害可读性，人们将不得不怀疑您在代码中的任何位置指的是什么

# google-visualization - 谷歌饼图图例显示

> ID：11229488
> 
> 赞同：9
> 
> 时间：2012-06-27T15:14:00.893
> 
> 标签：google-visualization, pie-chart

我正在尝试使用 Google 的饼图 API，并让图表和图例垂直显示，图表在顶部，图例在下方。我只希望图表宽度为 300 像素，并且已成功将图例移到图表下方。但是，由于宽度太小，图例会“切断”并添加左/右箭头和 # 以滚动图例项。

我试图让图例也在列表中垂直显示其项目。不是从左到右，而是从上到下，因此可以看到每个项目。我在他们的文档中没有看到这个特定修复的任何配置选项。

这是我的代码：

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
  google.load("visualization", "1", {packages:["corechart"]});
  google.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = google.visualization.arrayToDataTable([
      ['Task', 'Percentage'],
      ['Trust Funds - 52.6%',     52.6],
      ['Ed & Training - 13.6%',      13.6],
      ['Safety, Health & Env. - 10.5%',  10.5],
      ['Econ Dev & Infrastructure - 9.5%', 9.5],
      ['Admin - 7.2%',    7.2],
      ['Other - 2.2%', 2.2],
      ['Resettlement - 2%', 2],
      ['Matching Gifts/UW - 1.6%', 1.6],
      ['Arts/Culture - 0.8%', 0.8]
    ]);

    var options = {
      colors:['#d1ae2b','#b38849','#d8a35c','#636466','#a09f9f','#31536e','#4c7ea4','#73bfe5','#88d6f8'],
      pieSliceText:['none'],
      legend:{position: 'bottom'},
      chartArea:{left:6,top:6,width:"300px",height:"300px"}
    };

    var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  }
</script>

   <div id="chart_div" style="width: 300px; height: 300px;"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-20T11:36:42.043

[Fiddle Link](https://jsfiddle.net/wdeg0rgn/)只需删除配置图例：{position: 'bottom'}，

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
  <div id="chart_div" style="width: 300px; height: 300px;"></div>

google.load("visualization", "1", {packages:["corechart"]});
  google.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = google.visualization.arrayToDataTable([
      ['Task', 'Percentage'],
      ['Trust Funds - 52.6%',     52.6],
      ['Ed & Training - 13.6%',      13.6],
      ['Safety, Health & Env. - 10.5%',  10.5],
      ['Econ Dev & Infrastructure - 9.5%', 9.5],
      ['Admin - 7.2%',    7.2],
      ['Other - 2.2%', 2.2],
      ['Resettlement - 2%', 2],
      ['Matching Gifts/UW - 1.6%', 1.6],
      ['Arts/Culture - 0.8%', 0.8]
    ]);

    var options = {
    width:'50px',
      colors:['#d1ae2b','#b38849','#d8a35c','#636466','#a09f9f','#31536e','#4c7ea4','#73bfe5','#88d6f8'],
      pieSliceText:['none'],
      chartArea:{left:1,top:6,width:"100%",height:"100px"}
    };

    var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  } 
```

# java - Android XML 规范化

> ID：11229494
> 
> 赞同：1
> 
> 时间：2012-06-27T15:14:16.787
> 
> 标签：java, android, xml, xml-parsing, canonicalization

我正在尝试规范化我从 android 设备上的服务器收到的一些 xml。不过，Android 似乎并不喜欢`org.apache.xml.security.c14n.Canonicalizer.canonicalize(String inputText)`. 这是因为 Android 的 DOM 库不喜欢`DocumentBuilder.setValidating()`（被 Canonicalizer 使用），它会自动抛出异常。我尝试直接从 Canonicalizer 复制代码，而没有那个麻烦的行：

```
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
InputSource in = new InputSource(new ByteArrayInputStream(inputBytes));
DocumentBuilder db =  dbf.newDocumentBuilder();
Document doc = db.parse(in);
byte result[] = Canonicalizer.getInstance(canonicalizationMethod).canonicalizeSubtree(doc); 
```

但是，这无法正确规范化它，xml 标记内的属性不会重新排序为首先具有命名空间，因为它应该。

有没有其他方法可以在 android 上实际规范化 xml？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-06T17:04:48.677

我遇到了同样的问题，最终通过以下方式使用[http://www.xom.nu/apidocs/nu/xom/canonical/Canonicalizer.html ：](http://www.xom.nu/apidocs/nu/xom/canonical/Canonicalizer.html)

```
InputStream is = new ByteArrayInputStream(byteArrayOutputStream.toByteArray());
Builder parser = new Builder();
Document doc = parser.build(is);
ByteArrayOutputStream canonicalOs = new ByteArrayOutputStream();
Canonicalizer canonicalizer = new Canonicalizer(canonicalOs);
canonicalizer.write(doc);      
byte[] canonXmlBytes = canonicalOs.toByteArray(); 
```

在您的“libs”文件夹中包含[http://www.cafeconleche.org/XOM/xom-1.2.10.jar 。](http://www.cafeconleche.org/XOM/xom-1.2.10.jar)

# objective-c - 分配第一响应者时如何正确移动滚动视图？

> ID：11229495
> 
> 赞同：1
> 
> 时间：2012-06-27T15:14:20.963
> 
> 标签：objective-c, ios, xcode, uiscrollview

我在 UIView 中有一个表单，它由多个文本字段、几个文本视图和两个字段组成，它们通过覆盖在它们上面的不可见按钮进行交互。当您单击文本字段时，会弹出键盘进行文本输入，我在其上添加了一个工具栏，用于导航到上一个和下一个数据输入（无论数据输入是什么，无论是文本字段、文本视图还是两种特殊情况之一与按钮交互的）。现在，当我使用这些按钮在文本字段之间导航时，一切正常。我的滚动视图的内容沿着成为第一个响应者的元素移动（借助 stackoverflow 中的一段代码滚动视图，同时考虑到隐藏了很大一部分的键盘高度）。这是一个视觉示例。

![这是一个视觉示例](../Images/ebd98bc20156591aca1b64991a80cc1d.png)

当我想退出与隐藏按钮交互的特定数据条目（日期）时，就会出现问题。我先给出一些背景。这些数据条目在操作表中显示日期选择器（一个用于日期，另一个用于时间），并且这些操作表在工具栏中也有导航按钮，就像这样。

![像这样](../Images/1e495306603133255c9be91410b42076.png)

来自stackoverflow的重新调整视图的代码在文本字段和文本视图的didBeginEditing委托方法中执行此操作，因此当我将它们分配给第一响应者时，滚动视图会在考虑键盘的同时自行调整。

这意味着，在我切换到特殊数据条目的情况下，我手动移动滚动视图的内容，以便查看下一个元素。当我从特殊条目切换到文本字段时，我假设前面提到的来自 stackoverflow 的代码会启动并调整视图。当我从小时数据输入（在操作表中使用日期选择器）移动到下一个元素（即文本字段）时，它实际上会这样做。但是，当我在日期数据输入（直接在小时数据输入之前）并按上一个以将第一响应者分配给其上方的文本字段时，滚动视图会在文本字段之前进行，就像这样。

![漏洞](../Images/067aef1ca061a9ecedd1dce8ad1d3ed4.png)

需要注意的重要一点是，仅当文本字段不在视图中时才会出现此问题。这让我怀疑我错误地使用了重新调整视图的代码。例如，代码中有一个表示键盘高度的常量。我尝试将其从 216 更改为 260（因此它考虑到我在键盘顶部添加的工具栏），但这会导致按钮附近出现奇怪的黑色伪影，这种伪影只是偶尔出现。

我有点迷失在这个错误中，我的帖子已经很长了。我已经在一个新项目中准备了一个我的问题的例子，如果你们中的任何人都可以看看它，我会非常感激。 [这里是](http://www.gamefront.com/files/21909070/KeyboardToolbarResponders.zip)

# scala - 为什么这个 ScalaQuery 语句只删除奇数行？

> ID：11229503
> 
> 赞同：6
> 
> 时间：2012-06-27T15:14:34.277
> 
> 标签：scala, scalaquery

尝试删除一批记录时，只删除**奇数**行！

```
val byUser = Orders.createFinderBy(_.userID)
byUser(id).mutate(_.delete) 
```

如果我改为打印记录，我会得到正确的行数。

```
byUser(id).mutate{x => x.echo} 
```

我解决了这样的问题，它生成了所需的 SQL。

```
(for{o <- Orders if o.userID is id.bind } yield o).delete 
```

但是，变异版本为什么或如何只影响奇数行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-29T19:07:36.610

我已经在源代码中进行了挖掘，它似乎就像@RexKerr 所说的那样 - 一个迭代器用于处理元素，在它迭代时应用删除（这里的 mutate 方法中的 while 循环）：

[https://github.com/rjmac/scala-query/blob/master/src/main/scala/org/scalaquery/MutatingInvoker.scala](https://github.com/rjmac/scala-query/blob/master/src/main/scala/org/scalaquery/MutatingInvoker.scala)

有趣的是，有一个 previousAfterDelete 标志可用于在每次删除后强制迭代器向后移动。对于 Access 数据库（请参阅 AccessQueryInvoker 类），这似乎设置为 true，但其他数据库则没有：

[https://github.com/rjmac/scala-query/blob/master/src/main/scala/org/scalaquery/ql/extended/AccessDriver.scala](https://github.com/rjmac/scala-query/blob/master/src/main/scala/org/scalaquery/ql/extended/AccessDriver.scala)

我建议下载源代码并调试代码。也许应该为您正在使用的数据库供应商设置此标志。我还考虑提交错误报告：

[http://scalaquery.org/community.html](http://scalaquery.org/community.html)

PS。我知道这是一个老问题，但回答它以防万一其他人遇到这个问题

# single-sign-on - 使用 OpenIDM 作为 OpenAM 的数据用户源

> ID：11229506
> 
> 赞同：2
> 
> 时间：2012-06-27T15:14:41.387
> 
> 标签：single-sign-on, openam, openidm

你能告诉我我们是否可以使用 OpenIDM 作为 OpenAM 而不是 OpenDJ 的数据存储？

我在互联网上搜索，我什么也没找到。

如果有可能你有一个可以帮助我的文档页面吗？如果不是，使用 OpenIDM 和 OpenAM 管理用户身份和身份验证的最佳实践是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-20T23:27:26.507

简短的回答：没有。

长答案：清除一些东西是有益的。

**OpenDJ**是用 Java 编写的 ldap 服务器的实现。

**OpenIDM**是用 Java 编写的供应引擎实现。它使用用户和数据存储库，可以是 MySQL、MSSQL、Oracle DB 等。

阅读您的问题，我知道您想知道是否可以将 OpenIDM 的用户存储库用作您的 OpenAM 用户存储库，因此答案是否定的。

您需要做的是在 OpenIDM 数据存储和 Ldap 服务器（可能是 OpenDJ）之间建立同步，这样您就可以为 ldap 服务器提供用户和权利，并将其用作 OpenAM 的用户基础存储库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T15:10:11.710

我建议使用 OpenDJ 作为 OpenAM 和 OpenIDM 的后端。我认为没有任何简单或好的方法可以直接将 OpenIDM 与 OpenAM 一起使用（但如果有人发现，请告诉我）。此外，通过使用 OpenDJ 作为后端，OpenIDM 和 OpenAM 之间没有依赖关系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-26T12:10:13.793

使用 openidm 示例/sample2c。这个例子提供了一种 opendj 与 openidm 同步的方法。opendj 可以是 openAM 的商店。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-22T23:35:39.010

OpenIDM 存储库不能用作 OpenAM 的用户存储。

# c# - RichTextBox 中的行、列、WPF

> ID：11229507
> 
> 赞同：1
> 
> 时间：2012-06-27T15:14:43.823
> 
> 标签：c#, wpf, richtextbox

我想知道如何使用 WPF 中的 RichTextBox 自动使用行号和列号更新我的状态栏。

首先，我要关注哪个事件？我的盒子是多行的。KeyDown 不会对插入符号的上下移动做出反应。

行号可以是计算机使用：

```
int someBigNumber = int.MaxValue;
int lineMoved, currentLineNumber;
editor.CaretPosition.GetLineStartPosition(-someBigNumber, out lineMoved);
currentLineNumber = -lineMoved + 1;
status_bar.Text = "Line " + currentLineNumber.ToString(); 
```

我如何获得专栏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T13:45:21.853

我知道这个问题真的很老，但我自己遇到问题后才解决了它。

[c# 来自 RichTextBox 的 WPF 行号和列号](https://stackoverflow.com/questions/17994674/c-sharp-wpf-line-and-column-number-from-richtextbox)

# iphone - iPhone SDK - ios 5 之前的应用程序中的 TWTweetComposeViewController？

> ID：11229509
> 
> 赞同：0
> 
> 时间：2012-06-27T15:14:44.663
> 
> 标签：iphone, objective-c, ios4

我意识到这`TWTweetComposeViewController`是新的`iOS 5`（现在本身有点老了）。但是，我仍想`iOS 5`为我的应用程序支持预设备，那么我是否可以对此进行控制？

我是否需要进行操作系统版本检查并将其包装`TWTweetComposeViewController`在 if..else 语句中？还是有其他方法可以检查是否`TWTweetComposeViewController`可以访问？

有人知道吗？

干杯，布雷特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:17:22.380

尝试这样的事情：

```
if ([TWTweetComposeViewController class])
{
    // iOS 5 code
}
else
{
    // Older code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:18:57.720

在这里找到了解决方案。我没有想到这种方法。 [http://tonyngo.net/2011/10/twitter-integration-tutorial/](http://tonyngo.net/2011/10/twitter-integration-tutorial/)

# php - php和jquery动态显示和隐藏div

> ID：11229520
> 
> 赞同：0
> 
> 时间：2012-06-27T15:15:03.063
> 
> 标签：php, jquery, mysql

```
I have a list of the conditions and i fetch their name and it works fine but i want when i click the condition name it description come below.

i have done that but it shows for only one can you help me for that 
```

这是我用来显示记录描述的 html 代码，它总是显示最后一条记录。当我添加记录时，它添加意味着适用于添加它也适用于编辑也适用于删除但如果有两条记录，那么每次它显示最后一条记录的描述而不是我单击的我想显示的描述被点击的记录谢谢

```
 <div>
    <?php
     $query="select * from tbl_coditions where userId=".$_SESSION['userId'];
     $result=mysql_query($query) or die(mysql_error());
     while($row=mysql_fetch_array($result))
    {
     $VisitDate=strtotime($row['DiagnosisDate']);
     $VisitDate=date("m-d-Y",$VisitDate);
     $userId=$row['userid'];
     $conditionId=$row['conditionId'];
    ?>
     <script>
     $(document).ready(function(){
     $("a#p<?php if(isset($conditionId)) echo $conditionId; ?>").click(function(event){
     $("#HiddenDiv<?php if(isset($conditionId)) echo $conditionId; ?>").show();
     })    
     });
    </script>

<div id="AjaxDiv1">      

                              <div id="HiddenDiv<?php if(isset($conditionId)) echo $conditionId?>" style="display:none;">
                              <?php 
                              $query="select * from tbl_coditions where conditionId=$conditionId";
                              $result=mysql_query($query) or die(mysql_error());
                              $query_result=mysql_fetch_array($result); 
                              $VisitDate=strtotime($query_result['DiagnosisDate']);
                              $VisitDate=date("m-d-Y",$VisitDate);                    
                              ?>
                              <div class="detailContainer panelContent">
  <div class="panelTitle" tabindex="-1">
    <div id="ctl00_ctl00_ctl00_Content_LobbyContent_Content_EntryRepeater_ctl00_InterfaceControl_DetailAnimator_ctl03_Name_Row_RowContainer" class="detailRowContainer">
      <div class="detailRow">
        <div class="detailLeftColumn mxDetailsLabel"> Condition:
          <div id="ctl00_ctl00_ctl00_Content_LobbyContent_Content_EntryRepeater_ctl00_InterfaceControl_DetailAnimator_ctl03_Name_Row_ValidatorContainer" class="detailErrorContainer"></div>
        </div>
        <div class="detailRightColumn"> <span id="ctl00_ctl00_ctl00_Content_LobbyContent_Content_EntryRepeater_ctl00_InterfaceControl_DetailAnimator_ctl03_Name_Row_ViewControl"><?php echo $query_result['ServiceName']; ?></span> </div>
      </div>
    </div>
  </div>
  <div class="detailContent">
    <div class="narrowTopContent">
      <div id="ctl00_ctl00_ctl00_Content_LobbyContent_Content_EntryRepeater_ctl00_InterfaceControl_DetailAnimator_ctl03_DiagnosisDate_Row_RowContainer" class="detailRowContainer detailRowOdd">
        <div class="detailRow">
          <div class="detailLeftColumn mxDetailsLabel"> Diagnosis Date:
            <div id="ctl00_ctl00_ctl00_Content_LobbyContent_Content_EntryRepeater_ctl00_InterfaceControl_DetailAnimator_ctl03_DiagnosisDate_Row_ValidatorContainer" class="detailErrorContainer"></div>
          </div>
          <div class="detailRightColumn"> <span id="ctl00_ctl00_ctl00_Content_LobbyContent_Content_EntryRepeater_ctl00_InterfaceControl_DetailAnimator_ctl03_DiagnosisDate_Row_ViewControl"><?php echo $VisitDate;  ?></span> </div>
        </div>
      </div>
      <div>
        <div id="ctl00_ctl00_ctl00_Content_LobbyContent_Content_EntryRepeater_ctl00_InterfaceControl_DetailAnimator_ctl03_InnerUpdatePanel">
          <div id="ctl00_ctl00_ctl00_Content_LobbyContent_Content_EntryRepeater_ctl00_InterfaceControl_DetailAnimator_ctl03_DateOfServiceSelection_Row_RowContainer" class="detailRowContainer">
            <div class="detailRow">
              <div class="detailLeftColumn mxDetailsLabel"> Date of Service:
                <div class="detailErrorContainer"></div>
              </div>
              <div class="detailRightColumn">
                <?php 
                $VisitDate=strtotime($query_result['DateofService']);
                echo $VisitDate=date("m-d-Y",$VisitDate);                     
                 ?>

              </div>
            </div>
          </div>
          <div id="ctl00_ctl00_ctl00_Content_LobbyContent_Content_EntryRepeater_ctl00_InterfaceControl_DetailAnimator_ctl03_InformationSource_RowContainer" class="detailRowContainer detailRowOdd">
            <div class="detailRow">
              <label>
              <div class="detailLeftColumn mxDetailsLabel"> Information Source:
                <div class="detailErrorContainer"></div>
              </div>
              <div class="detailRightColumn"> <span id="ctl00_ctl00_ctl00_Content_LobbyContent_Content_EntryRepeater_ctl00_InterfaceControl_DetailAnimator_ctl03_InformationSource_SourceNameLabel">User Entered</span> </div>
              </label>
            </div>
          </div>
          <div id="ctl00_ctl00_ctl00_Content_LobbyContent_Content_EntryRepeater_ctl00_InterfaceControl_DetailAnimator_ctl03_DiagnosingProvider_Row_RowContainer" class="detailRowContainer">
            <div class="detailRow">
              <div class="detailLeftColumn mxDetailsLabel"> Provider or Facility:
                <div class="detailErrorContainer"></div>
              </div>
              <div class="detailRightColumn"> <span><?php echo $query_result['Provider']; ?></span> </div>
            </div>
          </div>
          <div class="notesSection">
            <div class="commentRow">
              <div id="ctl00_ctl00_ctl00_Content_LobbyContent_Content_EntryRepeater_ctl00_InterfaceControl_DetailAnimator_ctl03_Comment_Row_RowContainer" class="detailRowContainer">
                <div class="detailRow">
                  <div class="detailLeftColumn mxDetailsLabel"> Notes:
                    <div class="detailErrorContainer"></div>
                  </div>
                  <div class="detailRightColumn"> <span><?php echo $query_result['Notes'] ?></span> </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="YesNoSection">
      <div id="ctl00_ctl00_ctl00_Content_LobbyContent_Content_EntryRepeater_ctl00_InterfaceControl_DetailAnimator_ctl03_IsShared_YesNoRow_RowContainer">
        <div class="detailRow">
          <fieldset>
            <legend class="detailLeftColumn mxDetailsLabel"> <span>Hide this item when printing or when sharing with a health care provider?</span> </legend>
            <div style="clear:both;"></div>
            <div class="detailRightFieldsetColumn">
              <div style="display: block; margin-top: 2px;"> <span class="detailRightColumn">
                <div class="detailRightColumn">
                  <div><?php  echo $query_result['HideItem'];?></div>
                </div>
                </span> </div>
            </div>

          </fieldset>
        </div>
      </div>
      <div>
        <div class="detailRow">
          <fieldset>
            <legend class="detailLeftColumn mxDetailsLabel"> <span>Do you still have this condition?</span> </legend>
            <div style="clear:both;"></div>
            <div class="detailRightFieldsetColumn">
              <div style="display: block; margin-top: 2px;"> <span class="detailRightColumn">
                <div class="detailRightColumn">
                  <div><?php  echo $query_result['stillCondition'];?></div>
                </div>
                </span> </div>
            </div>
            <div class="detailErrorContainer"> </div>
            <span class="question_mark"></span>
          </fieldset>
        </div>
      </div>
    </div>
  </div>
  <div id="ctl00_ctl00_ctl00_Content_LobbyContent_Content_EntryRepeater_ctl00_InterfaceControl_DetailAnimator_ctl03_ctl01">
    <div id="ctl00_ctl00_ctl00_Content_LobbyContent_Content_EntryRepeater_ctl00_InterfaceControl_DetailAnimator_ctl03_EntryRightSideContainer" class="EntryRightSideContainer">
      <div class="LearnMoreDetail">
        <div class="mxRoundTable">
          <div id="ctl00_ctl00_ctl00_Content_LobbyContent_Content_EntryRepeater_ctl00_InterfaceControl_DetailAnimator_ctl03_LearnMore_Container_headerDiv" class="mxRoundTableTitle">
            <div class="mxRoundedCap"></div>
          </div>
          <div class="mxDataTableBackground">
            <div class="mxRoundedCap">
              <div class="mxRoundedMain">
                <div id="ctl00_ctl00_ctl00_Content_LobbyContent_Content_EntryRepeater_ctl00_InterfaceControl_DetailAnimator_ctl03_LearnMore_Container_titleDiv" class="mxDataTableTitle">
                  <h2>
                    <div class="LearnMoreDetailTitle">
                      <h2>Learn More About Diabetes Mellitus</h2>
                    </div>
                  </h2>
                </div>
                <div id="ctl00_ctl00_ctl00_Content_LobbyContent_Content_EntryRepeater_ctl00_InterfaceControl_DetailAnimator_ctl03_LearnMore_Container_ContentDiv" class="mxDataTableContent">
                  <div class="LearnMoreDetailText">
                    <ul>
                      <li>
                        <div id="learnMoreItem"> <img id="ctl00_ctl00_ctl00_Content_LobbyContent_Content_EntryRepeater_ctl00_InterfaceControl_DetailAnimator_ctl03_LearnMore_Container_LinkRepeater_ctl00_Icon" src="images/content.png" alt="" style="border-width: 0px;"> <a id="ctl00_ctl00_ctl00_Content_LobbyContent_Content_EntryRepeater_ctl00_InterfaceControl_DetailAnimator_ctl03_LearnMore_Container_LinkRepeater_ctl00_Link" href="javascript:PopupMultiViewer('/common/content/contentviewer.aspx%3fcui=C0011849%26topic=Diabetes+Mellitus%26etype=%26subtypes=%26contid=XIe3090mJjlQCAfxu90R%26toplink=%26topid=0%26topsrcid=0')">Articles related to Diabetes Mellitus</a>
                          <div style="clear: both;"></div>
                        </div>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="mxRoundTableFooter">
            <div class="mxRoundedCap"></div>
          </div>
        </div>
      </div>
    </div>
    <div  class="Pan" style="width: 650px; display: none; position: fixed; z-index: 100001; left: 631.5px; top: 447.5px;">
      <div class="mxModalContainer" id="ModalContainer">
        <div  class="mxHeader">
          <div>
            <div class="mxModalContentTitle">
              <h1></h1>
            </div>
          </div>
          <div class="mxModalContentTitleClose"> </div>
          <div>
            <div class="mxModalContentTitleAdditional"> </div>
          </div>
        </div>
              </div>
    </div>    
    <div class="modalBackground" style="display: none; position: fixed; left: 0px; top: 0px; z-index: 10000; width: 1263px; height: 994px;" id="ctl00_ctl00_ctl00_Content_LobbyContent_Content_EntryRepeater_ctl00_InterfaceControl_DetailAnimator_ctl03_ctl05_ModalDialogExtender_backgroundElement"></div>
  </div>
  <div id="ctl00_ctl00_ctl00_Content_LobbyContent_Content_EntryRepeater_ctl00_InterfaceControl_DetailAnimator_ctl03_CommandRow_DetailButtonRow" class="detailRow detailButtonRow"> &nbsp;
    <div id="ctl00_ctl00_ctl00_Content_LobbyContent_Content_EntryRepeater_ctl00_InterfaceControl_DetailAnimator_ctl03_CommandRow_DetailButtonContainer"><script type="text/javascript">
jQuery(document).ready(function(){  
        $("#button").click( function(){
            var optionValue = <?php echo $conditionId ?>;
            var categoryval=1;
            jQuery.ajax({
            type: "GET",
            url: "getcondition.php",
            data: "category="+optionValue+"&categoryval="+categoryval,
            success: function(response){
                    jQuery("#AjaxDiv").html(response);
                    jQuery("#AjaxDiv").show();
                    jQuery("#AjaxDiv1").hide();                 
                }
            });          
        });
    });
</script>
      <div class="mxButtonOrange"> <span>
        <button class="mxClearButtonOrange" id="button" type="button"  name="button">Edit</button>
        </span> </div>
      <div class="mxButtonOrange"> <span>

      <script type="text/javascript">
jQuery(document).ready(function(){  
        $("#button1").click( function(){
            var optionValue = <?php echo $conditionId ?>;
            var categoryval=1;
            jQuery.ajax({
            type: "GET",
            url: "deletecondition.php",
            data: "category="+optionValue+"&categoryval="+categoryval,
            success: function(response){
                    jQuery("#AjaxDiv").html(response);
                    jQuery("#AjaxDiv").show();
                    jQuery("#AjaxDiv1").hide();                 
                }
            });          
        });
    });
</script>
        <button class="mxClearButtonOrange" type="button" id="button1"  value="Delete" >Delete</button>
        </span> </div>

    </div>
  </div>
</div>

                              </div>
                        </div>`enter code here` 
```

# c# - XML 特殊字符处理

> ID：11229524
> 
> 赞同：0
> 
> 时间：2012-06-27T15:15:07.687
> 
> 标签：c#, xml, parsing, xml-parsing

VB / C# 我试图解析包含特殊字符的 XML 文件，

```
replace & with &amp
' with &apos
< with &lt
> with &gt 
```

字符串替换没有替换标签中的特殊字符“<”、“>”。我尝试捕获当同一行中有多个特殊字符时不起作用的 XML 异常，如果一行中只有一个特殊字符，它就可以工作。MS 内置方法 SecurityElement.Escape 不起作用，这必须在附加 XML 标记之前完成。

我使用这个文件来加载一个 SQL 表。

处理 XML 多个特殊字符的任何其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-15T06:39:59.237

使用 System.Security.SecurityElement.Escape 例如：string XmlFriendly = System.Security.SecurityElement.Escape("the bad 'string");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:59:30.750

如果我正确理解了这个问题，那么您不是在尝试处理 XML 文件，而是在尝试处理非 XML 文件，如果特殊字符被正确转义，则该文件将是 XML 文件。

那么问题来了，这个非 XML 文件是从哪里来的呢？因为修复它的最佳方法是修复创建它的过程。创建坏的 XML 然后修复它比一开始就创建好的 XML 要困难得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:23:20.297

你为什么不使用`XmlTextReader`？它应该处理所有的转义。

# java - 在 Java 中将 String 转换为 JMS BytesMessage

> ID：11229531
> 
> 赞同：1
> 
> 时间：2012-06-27T15:15:31.987
> 
> 标签：java

我正在尝试将字符串转换为 JMS BytesMessage。有没有好的方法来做到这一点？

我需要这样做，因为我有一个方法可以接收已解密的字符串，并且我需要将其转换为 BytesMessage 以解密消息。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:46:47.657

```
 byte[] bArray = "foo".getBytes("UTF-8");
 BytesMessage msg = session.createBytesMessage(); // throws JMSException
 msg.writeBytes(bArray); 
```

当然，就像Arcadien说的，你需要在合适的环境中执行代码才能从中获取javax.jms.Session对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-11-28T22:22:08.163

有点晚了，但迟到总比没有好。

`getBytes` @Carlo 的答案基本上是正确的，但如果与`String`参数一起使用，则必须捕获异常。

这是一个不会抛出异常的变体（getBytes 调用）：

```
final byte[] byteArray = "blammy".getBytes(StandardCharsets.UTF_8);
final BytesMessage bytesMessage = session.createBytesMessage();

bytesMessage.writeBytes(byteArray); 
```

该类`StandardCharsets`定义了保证在 Java 平台的每个实现上都可用的字符集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:20:17.190

您可以使用

```
byte[] String#getBytes() 
```

从字符串中获取字节数组并将其写入 ByteMessage

# sqlite - 运行 gem pristine --all 时出现 sqlite3 错误

> ID：11229534
> 
> 赞同：0
> 
> 时间：2012-06-27T15:15:34.677
> 
> 标签：sqlite, rubygems

我正在尝试做一个`gem pristine --all`并且目前在 sqlite3 部分出错。具体来说：

```
checking for sqlite3_uint64 in sqlite3.h... yes
creating Makefile

make
compiling backup.c
In file included from backup.c:3:
In file included from ./sqlite3_ruby.h:51:
./backup.h:7:3: error: unknown type name 'sqlite3_backup'; did you mean 'sqlite3_value'?
  sqlite3_backup *p;
  ^~~~~~~~~~~~~~
  sqlite3_value
/usr/local/include/sqlite3.h:1764:20: note: 'sqlite3_value' declared here
typedef struct Mem sqlite3_value;
                   ^
backup.c:63:3: error: unknown type name 'sqlite3_backup'; did you mean 'sqlite3_value'?
  sqlite3_backup *pBackup;
  ^~~~~~~~~~~~~~
  sqlite3_value
    /usr/local/include/sqlite3.h:1764:20: note: 'sqlite3_value' declared here
typedef struct Mem sqlite3_value;
               ^ 
```

有一大堆警告，可能与这些错误有关。底线也有对`gem_make.out`日志文件的引用。看里面基本上是上面的翻新。

当前环境详细信息...我不确定哪些有用，哪些没用... :)

```
which ruby
/Users/kriston/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
which gem
/Users/kriston/.rvm/rubies/ruby-1.9.3-p194/bin/gem
sqlite3 -version
3.7.13 2012-06-11 02:05:22 f5b5a13f7394dc143aa136f1d4faba6839eaa6dc 
```

做 a`gem environment`为我提供了这个版本的 gems: `RUBYGEMS VERSION: 1.8.24`。

有人知道为什么 sqlite3 编译失败，我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T22:31:38.410

原来我需要使用通用设置从头开始安装 sqlite3。但是，在此之前我需要更新 macports，并确保 4.3 Xcode 开发工具确实被识别。

所以首先： `$ sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer/`

进而 `sudo port selfupgrade`

然后最后 `sudo gem install sqlite3 +universal`

之后，运行 `gem pristine --all`正常！

# transactions - Sql Server 事务/隔离级别和锁定

> ID：11229537
> 
> 赞同：2
> 
> 时间：2012-06-27T15:15:35.183
> 
> 标签：transactions, sql-server-2008-r2

我有一个更新 10 个表的 SQL Server 存储过程，另一个只更新这 10 个表中的一个。我们分别称它们为 sp_updateAll 和 sp_updateSingle。说， sp_updateAll 的伪代码是：

```
Create Stored Procedure sp_updateAll
Begin
    Begin TRAN
        UPDATE TABLE1 
        SET COLUMN = ‘VALUE’

        UPDATE TABLE2 
        SET COLUMN = ‘VALUE’
        …
        UPDATE TABLE6 
        SET COLUMN = ‘VALUE’
        …
        UPDATE TABLE10 
        SET COLUMN = ‘VALUE’
  COMMIT TRAN
End 
```

sp_UpdateSingle 的伪代码是这样的：
//这会更新 Table6 例如，实际上它可以是 10 个表中的任何一个

```
Create Stored Procedure sp_updateSingle
Begin
    Begin TRAN
    IF sp_UpdateAll is in progress, return an error.
    UPDATE TABLE6 
    SET COLUMN = ‘VALUE’
    COMMIT TRAN
END 
```

我想确保一旦 sp_updateAll 开始执行， sp_updateSingle 应该返回错误。换言之，在执行 sp_UpdateAll 时，不应允许对单个表进行更新。有没有办法使用隔离级别/锁定提示来实现这一点？即使我们将 Isolation Level 设置为 Serializable，sp_UpdateSingle 也有可能与 sp_UpdateAll 一起执行。例如，如果两个事务同时运行，可能会发生以下情况：

1.  Tran1 开始执行 sp_UpdateAll。Tran2 开始执行 sp_UpdateSingle。
2.  Tran1 在到达 UPDATE TABLE6 之前被切换。所以 TABLE6 没有被 Tran1 锁定。
3.  Tran2 执行并提交。
4.  Tran1 继续执行

这可能吗？如果是这样，那么避免这种情况的好方法是什么？我们是否需要一个额外的表来维护 Tran1 已开始执行（类似于 InUse 指标）？那么这个表应该是在 sp_UpdateAll 中被更新的第一个表；我们设置指标并在 sp_UpdateAll 完成时将其清除。sp_UpdateSIngle 在执行更新之前检查此指示符。请帮助您了解在这种情况下哪种方法会更好。

感谢和问候
维卡斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-08-07T14:02:32.540

如果我理解正确，我认为事务隔离级别不是这里的答案。

“我想确保一旦 sp_updateAll 开始执行，sp_updateSingle 应该返回一个错误。换句话说，在 sp_UpdateAll 执行时不应该允许更新单个表。”

*   我认为您可以在第一个事务开始时创建一个全局临时（虚拟）表，如##sp1Executing，并在事务完成时删除此临时表。
*   在第二个事务中，您可以检查此表是否存在于一个 while 循环中，可能会有延迟，并且仅当此表不存在时才运行您的事务。

# android - 在android中处理各种框架布局

> ID：11229538
> 
> 赞同：0
> 
> 时间：2012-06-27T15:15:39.077
> 
> 标签：android, android-layout

我是游戏开发的新手，正在尝试创建一个类似安卓游戏的魂斗罗或旧的 tmnt 游戏（但很简单）。对于游戏，我决定将我的主屏幕分为三个部分 - 上用于统计，中用于游戏，下用于控制。我的 main.xml 是

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<FrameLayout
    android:id="@+id/upper_bar"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1" >
</FrameLayout>

<FrameLayout
    android:id="@+id/fl"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="0.5" >
</FrameLayout>

 <FrameLayout
    android:id="@+id/low_bar"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="0.85" >
</FrameLayout>

</LinearLayout> 
```

所以我为中间表面创建了gameview和gameloopthread类（这是非常标准的）。我的问题是我如何在上下框架布局中绘制？我应该为每个布局创建新的视图和线程类，我应该在游戏视图类本身中完成所有这些，还是有更好的方法来实现这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:20:38.577

您可以参考该布局执行此操作：

```
FrameLayout upper = (FrameLayout)findViewById(R.id.upper_bar);
upper.addView( yourCustomView );

FrameLayout lower = (FrameLayout)findViewById(R.id.low_bar);
lower.addView( yourCustomView ); 
```

# c# - 在 C#/ASP.NET 中销毁静态变量

> ID：11229540
> 
> 赞同：1
> 
> 时间：2012-06-27T15:15:48.030
> 
> 标签：c#, asp.net

由于 asp.net 执行路径，我被迫使用静态变量。我必须在母版页以及被调用的页面上有相同的变量。静态变量使得继承变量变得非常容易，因为它们保持静态。不幸的是，这些变量挂在内存中，因为应用程序实际上并没有“退出”。当我用完这些变量时，有没有办法销毁它们？我调查了

```
IDisposable 
```

但它的实现并不...干净。当页面完成渲染时，有没有办法销毁变量？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T15:24:59.063

> 由于 asp.net 执行路径，我被迫使用静态变量。我必须在母版页以及被调用的页面上有相同的变量。静态变量使得继承变量变得非常容易，因为它们保持静态。

您不会“被迫”使用静态字段来在母版页与其内容页之间共享数据。您可能也不希望：静态字段将在应用程序的所有用户的所有请求之间共享，这意味着它们需要是线程安全的，并且仅限于在所有用户之间共享的数据。

有许多技术可以在主页面和内容页面之间共享数据。例如，您可以使用`HttpContext.Items`仅在单个请求期间存在的字典。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T15:59:47.620

对于任何正在寻找“假装”静态变量的方法的人，您可以这样做：

```
public static Datatype data
{
    get
    {
        return (Datatype)HttpContext.Current.Items["DATA"];
    }
    set
    {
        HttpContext.Current.Items["DATA"] = value;
    }
} 
```

据我了解，这没有必要解决“杀死静态”值，但它应该避免由静态变量引起的任何数据冲突。我让我的整个项目引用静态变量并更改它会创建比应该看到的更混乱的代码。这样，当调用从您的静态对象中获取“DATA”时，它不会抓取指向的任何内容，而是使用上下文列表，该列表在之后被杀死并且对您的会话来说是唯一的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:17:53.460

您可以将它们设置为`null`. 如果您使用的是 ASP.Net WebForms，您可以在[`Page.Unload`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.unload.aspx)事件处理程序中执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T15:19:05.160

您应该避免在母版页中使用静态属性并使用 Session[""] 变量，当用户结束会话时它们将被销毁。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T15:30:13.423

在不了解您的设置并考虑未来的云环境的情况下，您可以有多个服务器来响应用户请求，并且您不知道同一台服务器是否会响应该用户的所有请求或负载均衡器的要求其他服务器继续，我会像现在一样，给你2个选项

在选项之前，在 Web 环境中，最好停止使用会话或静态变量（出于上述原因）

**使用 cookie**

为什么不使用 cookie 将值从一个地方传递到另一个地方，当使用时，只需将过期数据写回一年，cookie 就消失了！

**使用 MemCached**

我的应用程序和数据库之间总是有一个缓存层，它是保存值的最佳方式，不仅从数据库提供给所有用户，而且是在需要跨应用程序时保存变量的好方法。

[MemCached](http://memcached.org/)是[免费](http://www.couchbase.com/download)的，并且在 Windows 上运行良好，另外还有一些云服务在他们的服务器中提供这个

# javascript - baseHTTPserver 不能使用 javascript 库

> ID：11229543
> 
> 赞同：1
> 
> 时间：2012-06-27T15:15:54.553
> 
> 标签：javascript, python, protovis, basehttpserver

我正在构建一个基于 python 的网络服务器（~~是的，python 对于 web 服务器来说是一个糟糕的选择，但这是我唯一的选择~~对于我的目的，还有另一个不错的选择，例如 PHP，但我仅限于 python）

我使用 ProtoVis 进行一些数据可视化。（基于 JavaScript 的可视化工具）

如果我只是将它们复制并粘贴到测试文件中并重命名 .html （假设我在它旁边提取了 protovis 库），则以下代码可以工作

如果您想尝试，请在此处获取[https://github.com/mbostock/protovis/zipball/v3.3.1](https://github.com/mbostock/protovis/zipball/v3.3.1)

```
<html>
    <head>
        <title>Area Chart</title>
        <link type="text/css" rel="stylesheet" href="ex.css?3.2"/>
        <script type="text/javascript" src="protovis/protovis.js"></script>
        <style type="text/css">
        #fig {
            width: 430px;
            height: 225px;
        }
        </style>
    </head>
    <body>
    <div id="center">
    <div id="fig">
    <script type="text/javascript+protovis">

var data = pv.range(0, 10, .1).map(function(x) {
    return {x: x, y: Math.sin(x) + Math.random() * .5 + 2};
  });

/* Sizing and scales. */
var w = 400,
    h = 200,
    x = pv.Scale.linear(data, function(d) d.x).range(0, w),
    y = pv.Scale.linear(0, 4).range(0, h);

/* The root panel. */
var vis = new pv.Panel()
    .width(w)
    .height(h)
    .bottom(20)
    .left(20)
    .right(10)
    .top(5);

/* Y-axis and ticks. */
vis.add(pv.Rule)
    .data(y.ticks(5))
    .bottom(y)
    .strokeStyle(function(d) d ? "#eee" : "#000")
  .anchor("left").add(pv.Label)
    .text(y.tickFormat);

/* X-axis and ticks. */
vis.add(pv.Rule)
    .data(x.ticks())
    .visible(function(d) d)
    .left(x)
    .bottom(-5)
    .height(5)
  .anchor("bottom").add(pv.Label)
    .text(x.tickFormat);

/* The area with top line. */
vis.add(pv.Area)
    .data(data)
    .bottom(1)
    .left(function(d) x(d.x))
    .height(function(d) y(d.y))
    .fillStyle("rgb(121,173,210)")
  .anchor("top").add(pv.Line)
    .lineWidth(3);

vis.render();

    </script>
    </div>
    </div>
    </body>
</html> 
```

但是，如果我在 baseHTTPserver 中返回上述代码，它似乎不起作用。根据我的调查，“protovis/protovis.js”中的库似乎没有正确包含。

```
if url[0] == "/chart":
    self.send_response(200)
    self.send_header("Content-type","text/html")
    self.end_headers()
    self.wfile.write(chart())
    return 
```

其中 chart() 函数返回上面的行。

我正在使用 python 2.6 在 CentOS 6.2 下工作，我需要在 baseHTTPserver 中做些什么来包含我正在使用的那个 javascript 库吗？相同的代码在 Apache + PHP 上运行良好，我只是简单地回显它们。

任何的想法？

========================解决方法========================

> 与 Apache+PHP 不同，BaseHTTPServer 不会只为您放入该文件夹的任何内容提供服务。正如 Matthew 所描述的，您必须自己做，或者从不同的服务器提供 protovis.js（甚至可以是在不同端口上运行的 SimpleHTTPServer）。——瓦西里·法罗诺夫
> 
> 请参阅下面 Matthew Adams 的说明

我必须做的是在处理 JavaScript 文件的 do_GET() 中添加另一个方法来解决这个问题

```
if url[0] == "/protovis/protovis.js":
    f = open("protovis/protovis.js","rb")
    for each_line in f:
        self.wfile.write(each_line)
    return 
```

这解决了这个问题。

谢谢大家的解决方案，我真的很感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:47:58.443

确保您`protovis/protovis.js`使用 BaseHTTPServer 提供服务。基本上，浏览器`<script type="text/javascript" src="protovis/protovis.js"></script>`在读取它获得的 html 输出时会“看到”该行，*然后*请求服务器实际发送 protovis/protovis.js 文件。我没有在那个 github 下载中看到 python 代码，所以我无法在您的代码上下文中具体展示如何执行此操作，但请查看`SimpleHTTPRequestHandler`. 使用它，您可以添加到`do_GET()`方法中，让服务器`protovis/protovis.js`在请求时发送（即 when `self.path`is `protovis/protovis.js`）。

# windows - 是否有用于在控制台中选择矩形的 winapi 调用？

> ID：11229545
> 
> 赞同：0
> 
> 时间：2012-06-27T15:15:58.303
> 
> 标签：windows, winapi, console, textselection

在这里：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms683173](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683173(v=vs.85).aspx) (v=vs.85).aspx - 我只找到了`GetConsoleSelectionInfo()`，这只是名称中包含“选择”的控制台功能. 但是如何使用自定义参数以编程方式设置选择矩形呢？

# html - td 元素上的伪悬停类不适用于锚 (a) 标记

> ID：11229547
> 
> 赞同：0
> 
> 时间：2012-06-27T15:16:10.440
> 
> 标签：html, css

我有一个带有嵌套在 td 标签内的标签的表格。问题是，当我在 td 标签上应用伪悬停类时，a 标签没有相应响应。现在我也可以将伪类应用到 a 标签，但是 a 标签不会跨越 td 单元格的整个区域。悬停时我的背景和文本颜色都会发生变化，现在背景工作正常，但文本仅在悬停在 a 标签上时才会改变颜色，它不会跨越单元格的整个高度。当悬停在 td 标签的任何部分时，我希望 a 标签中的文本颜色发生变化。这是我的工作示例：http: [//jsfiddle.net/gGAW5/](http://jsfiddle.net/gGAW5/)

非常感谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T15:19:09.270

您需要做的就是为您的 CSS 添加第二个选择器`a:hover`：

```
#rightDiv a:hover,
#rightDiv td:hover a {
    text-decoration: none;
    color: #2363b0;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/gGAW5/1/)。

无论悬停在其上的是 the还是仅其本身，这都会将`a`其样式化。`:hover``td``a`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:23:11.060

这是您想要的工作小提琴：

[http://jsfiddle.net/gGAW5/9/](http://jsfiddle.net/gGAW5/9/)

```
#rightDiv td{
font-size: 18px;
color: #ffffff;
padding: 10px 5px; 
border: 1px solid #000099;    
}

#rightDiv a{
color: #ffffff;
display:block;
padding: 22px 5px; 
background: url(http://v4m.mobi/php/landing/images/rightDivBack.jpg) no-repeat;    
}

#rightDiv a:hover{
text-decoration: none;
color: #2363b0;
background-position: -300px 0px;
}   ​ 
```

**删除`#rightDiv td:hover`样式。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:20:55.333

添加`color: #2363b0;`到`td:hover`规则中。

# c# - 如何为 SAPI 中的语法赋予优先级？

> ID：11229548
> 
> 赞同：1
> 
> 时间：2012-06-27T15:16:11.120
> 
> 标签：c#, .net, speech-recognition, speech, sapi

我正在使用 SAPI 创建语音识别应用程序。我需要能够为我使用的不同语法赋予不同的优先级。（听写语法和我定义的其他语法）我需要识别器在我定义的语法中进行搜索，并且仅当语音输入与我定义的语法中的任何单词都不匹配时才查看听写语法。现在我有这样的代码：

```
Grammar myGram;
Choices myEditor = new Choices();
myEditor.Add("public");
//adding other choices
myGram = new Grammar(new GrammarBuilder(myEditor));
SpeechRecognitionEngine recognizer = new SpeechRecognitionEngine();
recognizer.LoadGrammar(myGram);
Grammar dictation = new DictationGrammar();
dictation.Name = "Dictation Grammar";
recognizer.LoadGrammar(dictation);
recognizer.SpeechRecognized += new EventHandler<SpeechRecognizedEventArgs>(
               SpeechRecognizedHandler);
recognizer.SetInputToDefaultAudioDevice();
recognizer.RecognizeAsync(RecognizeMode.Multiple); 
```

请给我任何关于如何将 myGram 优先于听写语法的想法。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:41:15.307

如果您使用符合 SRGS 的语法，您可以使用[权重](http://www.w3.org/TR/speech-grammar/#S2.4.1)来分配优先级。[Grammar](http://msdn.microsoft.com/en-us/library/system.speech.recognition.grammar.aspx)对象支持符合[W3C SRGS 规范](http://www.w3.org/TR/speech-grammar/)的xml 格式语法。

# javascript - Javascript嵌套循环问题？

> ID：11229549
> 
> 赞同：-2
> 
> 时间：2012-06-27T15:16:11.977
> 
> 标签：javascript, loops, cryptography, frequency

我正在尝试创建一小段 javascript 来计算一段文本中每个字母的数量，以供个人使用。我有一个以前的版本，每个字母都有一个单独的循环，它可以工作，但是相当长，而且创建起来很乏味。所以我试着做一个更短的，我不知道为什么它不起作用。谢谢！

```
var text = prompt("Enter Text","");
// Remove Spaces

var text = text.toUpperCase();
// Get the Text Length

var textL = text.length;
// Create the Hashtable

var hashtable = new Array(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);
// Define the Latin Alphabet

var alphabet = "abcdefghijklmnopqrstuvwxyz";
// Nested loop to find frequencies and input them into the hashtable

for (d=0; d<=25; d++) {
    for (i=0; i<=textL; i++){
        if (text.charAt(i) === alphabet.charAt(d)){
            hashtable[d] = hashtable[d] + 1;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:34:54.960

如果您愿意支持 ECMAScript 5，则可以使用新的`map`或`reduce`拥有更小的代码。

给定一个字符串，你可以`split`把它变成一个数组。您需要事先删除任何空格`.replace(/\s/g, '')`，然后`reduce`遍历每个字母并返回结果。结果可以保存在一个对象中，每个属性名称都是字母。

```
var str = "SampleText".toLowerCase().replace(/\s/g,'');
var counts = str.split('').reduce(function(acc, x) {
   acc[x] = (acc[x] || 0) + 1;
   return acc;
}, {}); 
```

输出：

```
{ a: 1,
  e: 2,
  l: 1,
  m: 1,
  p: 1,
  s: 1,
  t: 2,
  x: 1 } 
```

# delphi - XE2 中的 TDateTimePicker VCL 样式故障仅在 Windows 经典主题上发生

> ID：11229550
> 
> 赞同：9
> 
> 时间：2012-06-27T15:16:12.127
> 
> 标签：delphi, delphi-xe2, vcl-styles

我想这是 VCL 样式还没有准备好被真正使用的另一个原因。

没有 VCL 样式的 TDateTimePicker 控件看起来很好。打开任何 vcl 样式，我得到这样的外观：

![在此处输入图像描述](../Images/30074604e5ec0d947bec548c75fcc3ad.png)

我可以通过注册一个样式挂钩来关闭这个组件类型的 vcl 样式，但这看起来真的很难看。

这是在安装了更新 4 的 Delphi XE2 上。

理想情况下，我希望有一种解决方法，或者日期时间选择器的某些属性，或者我可以强制日期时间选择器正确绘制和主题的日期时间选择器的某些子类。

请注意，正常的组合框主题正确。请注意，这很容易在可以想象的最小示例项目中重现。是的。这是又一个样式错误。

**更新**它可能是特定于平台的，与不带 Aero 的 Windows Server 2008 R2 上的 Windows 通用控件版本相关（Windows 服务器组件术语中的“桌面体验”）。在其他人无法复制它之后，我才想到要在几台不同的 Windows 机器上尝试。在我这样做之后，我发现该问题仅在 Windows Server 2008 R2 上重现。我们的一些客户使用 Windows Server 2008 R2。如您所知，使用 VCL 样式的一个主要原因是，无论 Windows 主题是什么，它都能让您的应用看起来一样。但是在上述情况下，整个应用程序主题正确，除了 DateTimePicker 控件，它的主题不正确，并且仅在 Windows Server 2008 R2 上。相同的基于 XE2 的演示应用程序在 Windows 7 上运行良好。

工作系统和非工作系统在 SysWow64 文件夹中都有一个 ComCtl32.dll，版本为 5.82.7601.17514。但是，当 VCL 主题关闭时，这些控件的本机布局和外观显然是不同的，这会影响蒙皮代码，从而导致失败。

**更新 2 ：报告为错误：[QC 条目](http://qc.embarcadero.com/wc/qcmain.aspx?d=106783)**106783****

 *** * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-27T20:05:50.877

好的，我刚刚对 [Vcl.Styles.DateTimePickers](http://code.google.com/p/vcl-styles-utils/source/browse/trunk/Common/Vcl.Styles.DateTimePickers.pas)单元做了一个小改动，它是[vcl-styles-utils](http://code.google.com/p/vcl-styles-utils/)的一部分。在“Windows 经典”主题处于活动状态时解决此问题。

以这种方式使用这种风格的钩子

```
uses
  Vcl.Styles,
  Vcl.Themes,
  Vcl.Styles.DateTimePickers;

initialization
 TStyleManager.Engine.RegisterStyleHook(TDateTimePicker, TDateTimePickerStyleHookFix); 
```

这将是结果。

![在此处输入图像描述](../Images/d400033e997261ab03ed63b6a716d96b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T19:31:33.470

我可以确认，当我安装桌面体验、启用主题并启动主题服务时，这个故障就消失了。

好的，这是我现在的解决方法代码：

```
function DetectWin7Or2008R2ClassicTheme:Boolean;
begin

   if  ( Win32MajorVersion>=6 ) then
      result := (not Themes.ThemeServices.ThemesEnabled) // and IsServerOs
   else
      result := false;

end;

// main form initialization section:

initialization
 if DetectWin7Or2008R2ClassicTheme then
 TStyleManager.Engine.RegisterStyleHook(TDateTimePicker, TStyleHook); {no theme!}
end. 
```

这显然是一个疯狂的角落案例。我希望找到更多，当我发现 Windows Server 2008R2 或 Windows 7 上还有什么问题时，当主题服务未运行时，我会回来更新这个问题，当你选择“Windows 经典主题”时会发生这种情况在Win7上，也是。**

# html - 为什么这两个单选按钮会在 Selenium 中显示完全不同的目标（或页面上的位置）？

> ID：11229553
> 
> 赞同：1
> 
> 时间：2012-06-27T15:16:19.723
> 
> 标签：html, xpath, selenium

我有一个性别表格，第一个按钮如下所示

```
name=radio_43 
```

第二个按钮显示如下：

```
xpath=(//input[@name='radio_43'])[2] 
```

为什么叫公司按钮`radio_43`，然后第二个它使用xpath。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T15:23:12.500

您的两个单选按钮都有名称“radio_43”。为了区分它们，Selenium 需要通过其 xpath 调用第二个。直接选择器`name=radio_43`只会拉第一个。

# java - 是否可以为 ORMLite 和 Jackson JSON 使用一个类？

> ID：11229557
> 
> 赞同：5
> 
> 时间：2012-06-27T15:16:48.397
> 
> 标签：java, json, sqlite, jackson, ormlite

我想使用 ORMLite 从 SQLite 查询数据并将其存储在 Java 类中，然后使用 Jackson JSON 库将该类转换为 JSON 并通过 HTTP 发送。我也想做相反的事情——从服务器以 JSON 格式获取数据并将其转换为 Java 类，然后使用 ORMLite 将该类保存到 SQLite。

我可以为 ORMLite 和 Jackson 使用每个表的一个类吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-11T13:16:33.623

是的，你可以，为什么不呢？你可以将任何你想要的java对象转换为json

```
ObjectWriter ow = new ObjectMapper().writer().withDefaultPrettyPrinter();
String json = ow.writeValueAsString(object);; 
```

ORMLite 创建实体，也就是 java 对象。

```
@DatabaseTable(tableName = "accounts")
public class Account {
    @DatabaseField(id = true)
    private String name;

    @DatabaseField(canBeNull = false)
    private String password;
    ...
    Account() {
        // all persisted classes must define a no-arg constructor with at least package visibility
    }
    ...    
} 
```

是的你可以。

# c# - 扩展器控件可能不会在 PreRender 之前注册

> ID：11229561
> 
> 赞同：2
> 
> 时间：2012-06-27T15:17:01.383
> 
> 标签：c#, asp.net, ajax, ajaxcontroltoolkit

以下代码位于 Login.aspx 文件中。以前的代码运行非常流畅。但是，在添加 ajax ModalPopup 扩展程序时，会发生此错误。

当用户单击超链接“忘记密码”时，我正在尝试创建一个弹出窗口。

以前，我曾在另一个 aspx 文件中尝试过 ajax 日历和 balloonpopup，并且效果很好。只有 modalpopup 扩展器有错误。

```
Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below. 
```

堆栈跟踪：

```
[InvalidOperationException: Extender controls may not be registered before PreRender.]
   System.Web.UI.ScriptControlManager.RegisterExtenderControl(TExtenderControl extenderControl, Control targetControl) +442081 
```

这是 Login.aspx 文件中的代码：

```
<asp:ScriptManager ID="ScriptManager2" runat="server"> </asp:ScriptManager>
<asp:HyperLink ID="HyperLink2" runat="server">Forget Password</asp:HyperLink>

<asp:ModalPopupExtender ID="HyperLink2_ModalPopupExtender" runat="server" 
        Enabled="True" TargetControlID="HyperLink2" 
        PopupControlID="Panel1">
</asp:ModalPopupExtender>

<asp:Panel ID="Panel1" runat="server"> Show pop Up here! </asp:Panel> 
```

我的代码有什么问题？我已经将它与互联网上的示例代码进行了比较，它非常相似。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T13:58:50.233

可能导致这种情况的一个原因是您缺少

```
base.OnPreRender(e); 
```

如果您在页面中覆盖了它。

# c# - 在 MVVM 中捕获“切换工作区”事件

> ID：11229563
> 
> 赞同：0
> 
> 时间：2012-06-27T15:17:06.977
> 
> 标签：c#, wpf, mvvm

[我有一个使用 Josh Smith ( http://msdn.microsoft.com/en-us/magazine/dd419663.aspx](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx) )的 MVVM 模式构建的应用程序。

当我在我的应用程序中打开了多个工作区时，我想捕捉切换工作区/选项卡的事件，以便我可以首先保存当前工作区的内容。我查看了 WorkspaceViewModel 和 ViewModelBase，但我不知道如何添加那个 EventHandler。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:13:37.203

我在另一篇文章中找到了一个解决方案，我只需要稍微调整一下：[在选项卡控件中处理多个数据网格的正确方法是什么，以便在选项卡更改时单元格离开编辑模式？](https://stackoverflow.com/questions/3354916/what-is-the-proper-way-to-handle-multiple-datagrids-in-a-tab-control-so-that-cel)

基本上我已经在生成不同工作区的 TabControl 的 PreviewMouseDown 上添加了一个 EventHandler。

```
private void TabControl_PreviewMouseDown(object sender, MouseButtonEventArgs e) {
        MainWindow_VM dc = (MainWindow_VM)this.DataContext;

        if (IsUnderTabHeader(e.OriginalSource as DependencyObject))
            //Do what need to be done before switching workspace
            // in my case, switch the focus to a dummy control so the objectContext would save everything, even the currently focused textbox

    }

private bool IsUnderTabHeader(DependencyObject control) 
    {
        if (control is TabItem)
        {
            return true;
        }
        DependencyObject parent = VisualTreeHelper.GetParent(control); 
        if (parent == null)         
            return false; 

        return IsUnderTabHeader(parent); 
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:26:34.340

您应该能够将选项卡的“当前”项绑定到模型中的变量。当这种情况发生变化时，做你的工作。

# regex - 如何指定匹配正则表达式方括号内的多个字符？

> ID：11229566
> 
> 赞同：0
> 
> 时间：2012-06-27T15:17:13.933
> 
> 标签：regex, regex-group

给定用户输入字符串，我需要查找它是否以以下之一结尾 - .com、.net、.edu.、html 等。

有没有办法用正则表达式方括号做到这一点？

我试过 $[.com|.net|.html] 和 $[(.com)(.net)(.html)] 但两者都不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:20:29.170

您想使用捕获组。

```
(\.com|\.net|\.html) 
```

这将匹配任一值。您可以通过在括号内附加另一个管道并将新值放在管道之后来添加其他值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:20:54.863

你可以试试这个：

```
\.com$|\.net$|\.edu$ 
```

或者

```
(\.com|\.net|\.edu)$ 
```

# excel - 删除 EPPlus 中的图片

> ID：11229567
> 
> 赞同：0
> 
> 时间：2012-06-27T15:17:16.883
> 
> 标签：excel, epplus

使用 EPlus，如何从工作表中删除现有图片？我在图纸集合中没有看到“删除”方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T18:58:32.170

ExcelDrawings 有一个 Remove 方法：

示例： sheet.Drawings.Remove("image1");

```
 //
    // Summary:
    //     Removes a drawing.
    //
    // Parameters:
    //   Drawing:
    //     The drawing
    public void Remove(ExcelDrawing Drawing);
    //
    // Summary:
    //     Removes a drawing.
    //
    // Parameters:
    //   Index:
    //     The index of the drawing
    public void Remove(int Index);
    //
    // Summary:
    //     Removes a drawing.
    //
    // Parameters:
    //   Name:
    //     The name of the drawing
    public void Remove(string Name); 
```

# elasticsearch - 为什么两个相同的文档得分不同？

> ID：11229568
> 
> 赞同：2
> 
> 时间：2012-06-27T15:17:21.850
> 
> 标签：elasticsearch, tire

我目前正在研究轮胎宝石（我也是 elasticsearch 和 lucene 的新手）并尝试了一些事情。我需要做一些（可能不是微不足道的）得分，所以我试图抓住它。我阅读了我在网上可以找到的关于评分公式的所有内容，并试图将我找到的内容与解释的查询相匹配。

如果我正确阅读了这些数字，标题为“foo foo foo foo”的文档会有不同的分数，这肯定不是预期的。我想我在索引期间或之后错过了一个步骤，但我无法弄清楚。

下面是我的代码。我并没有完全按照轮胎 DSL 的预期方式进行，因为我想弄清楚事情——在以后的某个时间，事情可能看起来更加轮胎式。

```
require 'tire'
require 'pp'

class Model
  INDEX = 'myindex'
  TYPE = 'company'

  class << self
    def delete_index
      Tire.index(INDEX) { delete }
    end

    def create_mapping
      Tire.index INDEX do
        create mappings: {
          TYPE => {
            properties: {
              title: { type: 'string' }
            }
          }
        }
      end
    end

    def refresh_index
      Tire.index INDEX do
        refresh
      end
    end
  end

  def initialize(attributes = {})
    @attributes = attributes.merge(:_id => object_id) #use oid as id, just for testing
  end

  def _type
    TYPE
  end

  def id
    object_id.to_s #convert to string because tire compares to object_id!
  end

  def index
    item = self
    Tire.index INDEX do
      store item
    end
  end

  def to_indexed_json
    @attributes.to_json
  end

  ENTITIES = [
    new(title: "foo foo foo foo"),
    new(title: "foo"),
    new(title: "bar"),
    new(title: "foo bar"),
    new(title: "xxx"),
    new(title: "foo foo foo foo"),
    new(title: "foo foo"),
    new(title: "foo bar baz")
  ]

  QUERIES = {
    :foo => { query_string: { query: "foo" } },
    :all => { match_all: {} }
  }

  def self.custom_explained_search(q)
    Tire.search(Model::INDEX, :wrapper => Model, :explain => true) do |search|
      search.query do |query|
        query.send :instance_variable_set, :@value, q
      end
    end
  end
end

class Tire::Results::Collection
  def explained
    @response["hits"]["hits"].map do |hit|
      {
        "_id" => hit["_id"],
        "_explanation" => hit["_explanation"],
        "title" => hit["_source"]["title"]
      }
    end
  end
end

Model.delete_index
Model.create_mapping
Model::ENTITIES.each &:index
Model.refresh_index
s = Model.custom_explained_search(Model::QUERIES[:foo])
pp s.results.explained 
```

打印的结果是这样的：

```
[{"_id"=>"2169251840",
  "_explanation"=>
   {"value"=>0.54932046,
    "description"=>"fieldWeight(_all:foo in 0), product of:",
    "details"=>
     [{"value"=>1.4142135,
       "description"=>"btq, product of:",
       "details"=>
        [{"value"=>1.4142135, "description"=>"tf(phraseFreq=2.0)"},
         {"value"=>1.0, "description"=>"allPayload(...)"}]},
      {"value"=>0.7768564, "description"=>"idf(_all:  foo=4)"},
      {"value"=>0.5, "description"=>"fieldNorm(field=_all, doc=0)"}]},
  "title"=>"foo foo foo foo"},
 {"_id"=>"2169251720",
  "_explanation"=>
   {"value"=>0.54932046,
    "description"=>"fieldWeight(_all:foo in 1), product of:",
    "details"=>
     [{"value"=>0.70710677,
       "description"=>"btq, product of:",
       "details"=>
        [{"value"=>0.70710677, "description"=>"tf(phraseFreq=0.5)"},
         {"value"=>1.0, "description"=>"allPayload(...)"}]},
      {"value"=>0.7768564, "description"=>"idf(_all:  foo=4)"},
      {"value"=>1.0, "description"=>"fieldNorm(field=_all, doc=1)"}]},
  "title"=>"foo"},
 {"_id"=>"2169250520",
  "_explanation"=>
   {"value"=>0.48553526,
    "description"=>"fieldWeight(_all:foo in 2), product of:",
    "details"=>
     [{"value"=>1.0,
       "description"=>"btq, product of:",
       "details"=>
        [{"value"=>1.0, "description"=>"tf(phraseFreq=1.0)"},
         {"value"=>1.0, "description"=>"allPayload(...)"}]},
      {"value"=>0.7768564, "description"=>"idf(_all:  foo=4)"},
      {"value"=>0.625, "description"=>"fieldNorm(field=_all, doc=2)"}]},
  "title"=>"foo foo"},
 {"_id"=>"2169251320",
  "_explanation"=>
   {"value"=>0.44194174,
    "description"=>"fieldWeight(_all:foo in 1), product of:",
    "details"=>
     [{"value"=>0.70710677,
       "description"=>"btq, product of:",
       "details"=>
        [{"value"=>0.70710677, "description"=>"tf(phraseFreq=0.5)"},
         {"value"=>1.0, "description"=>"allPayload(...)"}]},
      {"value"=>1.0, "description"=>"idf(_all:  foo=1)"},
      {"value"=>0.625, "description"=>"fieldNorm(field=_all, doc=1)"}]},
  "title"=>"foo bar"},
 {"_id"=>"2169250380",
  "_explanation"=>
   {"value"=>0.27466023,
    "description"=>"fieldWeight(_all:foo in 3), product of:",
    "details"=>
     [{"value"=>0.70710677,
       "description"=>"btq, product of:",
       "details"=>
        [{"value"=>0.70710677, "description"=>"tf(phraseFreq=0.5)"},
         {"value"=>1.0, "description"=>"allPayload(...)"}]},
      {"value"=>0.7768564, "description"=>"idf(_all:  foo=4)"},
      {"value"=>0.5, "description"=>"fieldNorm(field=_all, doc=3)"}]},
  "title"=>"foo bar baz"},
 {"_id"=>"2169250660",
  "_explanation"=>
   {"value"=>0.2169777,
    "description"=>"fieldWeight(_all:foo in 0), product of:",
    "details"=>
     [{"value"=>1.4142135,
       "description"=>"btq, product of:",
       "details"=>
        [{"value"=>1.4142135, "description"=>"tf(phraseFreq=2.0)"},
         {"value"=>1.0, "description"=>"allPayload(...)"}]},
      {"value"=>0.30685282, "description"=>"idf(_all:  foo=1)"},
      {"value"=>0.5, "description"=>"fieldNorm(field=_all, doc=0)"}]},
  "title"=>"foo foo foo foo"}] 
```

我读错了数字吗？还是滥用轮胎？也许只是缺少一些“重新索引整个集合”步骤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:40:06.623

如果没有定义明确的排序字段，则排序默认为 tf * idf ( [http://en.wikipedia.org/wiki/Tf](http://en.wikipedia.org/wiki/Tf) *idf) 的（变体）。

字面意思是：词频*逆文档频率。

来自维基百科：

**术语频率（术语计数）**：给定文档中的术语计数只是给定术语在该文档中出现的次数

**逆文档频率**是衡量该术语在所有文档中是常见还是罕见的量度。它是通过将文档总数除以包含该术语的文档数，然后取该商的对数来获得的

在这种情况下，排序的“词频”组件最有可能导致“foo foo foo foo”在搜索“foo”时得分高于其他文档

此外，关于您在更改 id 时看到的效果：我不确定，但我猜它必须这样做 ES`id`在内部存储由 's 排序的文档（我不确定）......

如果是这种情况，具有相同排序分数的 2 个文档将根据 id 进行排序，作为决胜局。您当然可以定义多种排序来更改此行为（例如：sort=sorta+desc、sortb+desc。在这种情况下，sortb 被用作所有在 scoreA 上得分相同的文档的决胜局）

# jquery - JqPlot : 为不包括 y 轴标签的图形区域设置固定高度值

> ID：11229577
> 
> 赞同：8
> 
> 时间：2012-06-27T15:17:30.870
> 
> 标签：jquery, graphics, jqplot

我正在使用 JqPlot。

图形高度取决于主容器的高度或默认的 JqPlot 值。

我的问题是，如果 y 标签很长，则图形大小会减小以适合主容器。

是否可以为图形高度设置一个不取决于标签文本长度的固定值？

我的需要：我希望始终显示相同的图形高度（例如 400 像素），而不取决于 y 标签文本长度

这是描述我的问题的图像：

![在此处输入图像描述](../Images/fb2fe1310e28006f33a0732d08ec56db.png) ![在此处输入图像描述](../Images/3e33fbdf1273dab73f855f387d30a57b.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-28T09:22:59.637

我唯一想到的就是[本示例中呈现的这些内容。](http://jsfiddle.net/Boro/AqKZz/33/)
在调用绘制绘图之后，调用下面的代码来获取当前绘图的大小，并通过添加周围 div 的大小（即标题和轴）来相应地调整它。
结果，您为图表大小设置的任何内容都`CSS`将被图表的图形部分采用，就像您想要的那样。

```
var w = parseInt($(".jqplot-yaxis").width(), 10) + parseInt($("#chart").width(), 10);
var h = parseInt($(".jqplot-title").height(), 10) + parseInt($(".jqplot-xaxis").height(), 10) + parseInt($("#chart").height(), 10);
$("#chart").width(w).height(h);
plot.replot(); 
```

# javascript - EXTJS 组合框多选

> ID：11229580
> 
> 赞同：7
> 
> 时间：2012-06-27T15:17:33.460
> 
> 标签：javascript, extjs, extjs3

在 ExtJS 3.3.1 中，我尝试将 comboBox 设置为 multi select ，但它不起作用。

请帮忙。

```
 var mArray = new Array("ALL", "AAA", "BBB");
        var mCombo = new Ext.form.ComboBox({ id: 'ID', fieldLabel: 'ID',
            triggerAction: 'all',
            height: 100, width: 163,
            multiSelect: true,
            store: mArray
        });
        Ext.getCmp('mCombo').setValue("ALL"); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-27T15:21:28.567

没有像`multiSelect`in那样的配置选项`Ext.form.ComboBox`。
要获得所需的功能，您要么需要自己开发多选组合框，要么使用现有的替代品之一，如[Ext.ux.form.CheckboxCombo](http://code.google.com/p/extuxcheckboxcombo/downloads/detail?name=Ext.ux.form.CheckboxCombo.zip&can=2&q=)、[Ext.ux.form.SuperBoxSelect](http://www.sencha.com/forum/showthread.php?69307-3.x-Ext.ux.form.SuperBoxSelect)和[Ext.ux.form.LovCombo](http://lovcombo.extjs.eu/)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-08-14T11:45:48.860

```
return new Ext.form.ComboBox({
                            fieldLabel: fieldLabel,
                            hiddenName: name,
                            store: store ,
                            valueField:'value',
                            displayField:'value',
                            typeAhead: true,
                            mode: 'local',
                            triggerAction: 'all',
                            emptyText:'Select '+fieldLabel+' ...',
                            selectOnFocus:true,
                            allowBlank:allowBlank,
                            forceSelection : true,
                            disabled:disabled,
                            multiSelect:true,
                            width:200,
                            id:id,
                            listeners:{
                                change : function( frm, newValue, oldValue ) {
                                    doRenderTL();
                                }
                            },
                            renderTo: Ext.get( renderTo )
                        }); 
```

# visual-studio - Web 部署项目在 Visual Studio 2012 中是否仍然可用？

> ID：11229582
> 
> 赞同：25
> 
> 时间：2012-06-27T15:17:43.740
> 
> 标签：visual-studio, setup-project, web-deployment-project, visual-studio-2012

看起来 Visual Studio 2012 将不包括根据[MSDN](http://blogs.msdn.com/b/buckh/archive/2011/03/17/visual-studio-setup-projects-vdproj-will-not-ship-with-future-versions-of-vs.aspx)的 Visual Studio 安装和部署项目，所以我目前正在学习[WiX](http://wix.codeplex.com/)。

这种功能损失是否会扩展到 Web 部署项目？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-21T18:41:38.250

## Web 部署项目在 VS2012 中将不可用。

相反，我们将专注于为网站项目带来一流的发布支持。[您可以在http://blogs.msdn.com/b/webdev/archive/2012/08/06/plans-regarding-website-projects-and-web-deployment-projects.aspx](http://blogs.msdn.com/b/webdev/archive/2012/08/06/plans-regarding-website-projects-and-web-deployment-projects.aspx)阅读更多详细信息。简而言之，您将拥有与 WDP 相同的所有功能，但还会有更多功能。另一个好处是，我们将同时拥有 Web 应用程序项目和网站项目的经验。因此，当我们进行增强时，两个项目系统都会得到它。

如果您在 WDP 中有任何自定义，您应该能够将它们复制/粘贴到新的 Web 发布配置文件中（它们也是 MSBuild）。看看上面的博客，如果您有任何疑虑，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T09:01:39.897

我注意到来自 user1069816 的链接是否相关。

Visual Studio 2012 不确定是否包含 Web 部署项目，但您可以做一些事情。

投票支持他们的加入：http: [//visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2639368-add-web-deployment-projects-to-vs11](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2639368-add-web-deployment-projects-to-vs11)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T16:16:17.090

根据以下内容，Web 部署项目似乎仍将存在于 Visual Studio 2012 中：

[http://msdn.microsoft.com/en-us/library/dd394698(v=vs.110)](http://msdn.microsoft.com/en-us/library/dd394698%28v=vs.110%29)

和

[http://blogs.msdn.com/b/aspnetue/archive/2012/06/12/visual-studio-2012-rc-deployment-documentation-published.aspx](http://blogs.msdn.com/b/aspnetue/archive/2012/06/12/visual-studio-2012-rc-deployment-documentation-published.aspx)

# wpf - WPF：调整数据模板的大小

> ID：11229583
> 
> 赞同：0
> 
> 时间：2012-06-27T15:17:44.860
> 
> 标签：wpf, datatemplate, resize

我试图为我的数据模板控件设置宽度和高度属性，但我的控件保持其默认大小。

```
<ItemsControl Grid.Row="1" x:Name="containerUsers" ItemsSource="{Binding ValidUsers}" >
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel IsItemsHost="True"  AllowDrop="True" ClipToBounds="False" DragEnter="panelUsers_DragEnter" Drop="panelUsers_Drop" />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <my:PictureLabelControl Width="20" Height="50" />
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl> 
```

事实上，我有三个这样的面板，我希望当涉及到另一个面板时，我可以通过拖放来更改控件的大小。

```
<UserControl x:Class="VHTService.Wfm.View.PictureLabelControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" Cursor="Hand" Focusable="True" Margin="3">
<Grid>
    <Grid Name="grid1">
        <Label Content="{Binding LabelText}" Focusable="True" FontSize="12" FontWeight="Normal" HorizontalContentAlignment="Center" 
               Name="lblPicture" VerticalContentAlignment="Center" Height="26" VerticalAlignment="Bottom" />
        <Image Source="{Binding Picture}" Focusable="True" Name="imgAvatar" Stretch="Uniform" Margin="0,0,0,26" GotFocus="imgAvatar_GotFocus" 
               LostFocus="imgAvatar_LostFocus" />
    </Grid>
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:26:48.370

我制作了以下示例窗口，并且项目尊重给定的大小。你能发布 PictureLabelControl 吗？我认为错误就在那里。

```
<Window
    x:Class="Project1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:System="clr-namespace:System;assembly=mscorlib"
    Title="MainWindow"
    Height="350"
    Width="525">
    <ItemsControl>
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <WrapPanel
                    IsItemsHost="True"
                    AllowDrop="True"
                    ClipToBounds="False"/>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <TextBlock
                    Background="Gray"
                    Text="{Binding}"
                    Width="50"
                    Height="50"/>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
        <ItemsControl.Items>
            <System:String>foo1</System:String>
            <System:String>foo2</System:String>
        </ItemsControl.Items>
    </ItemsControl>
</Window> 
```

# mongodb - 服务器端 Mongodb GridFS 文件复制

> ID：11229584
> 
> 赞同：3
> 
> 时间：2012-06-27T15:17:45.880
> 
> 标签：mongodb, serverside-javascript, gridfs

根据业务需求，我需要提供在 GridFS 上复制某些文件内容的可能性。当然，它可以在特定领域的层上完成。但在这种情况下，我可以看到一些开销：

*   从 mongo-server 获取流
*   在业务层分配内存
*   读
*   放回 mongo-server

明显的解决方案是编写 mongo 端 JavaScript，它将在单个服务器的范围内执行复制。所以我的问题：

*   在 JavaScript 上管理 GridFS 的 API 的描述在哪里？
*   如果我的 GridFS 被分片，会有什么问题吗？
*   如果我的 GridFS 被复制，是否有任何问题？

先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T21:54:36.573

您永远不需要在单个服务器中复制 GridFS 文件，因为 GridFS 文件是不可变的：您可以创建、读取或删除它们，但不能修改它们。所以没有理由复制。

从一台服务器复制到另一台服务器应该通过驱动程序完成；没有内置支持直接从 MongoDB 服务器复制到另一个服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:21:02.547

“普通” js 驱动程序不支持 GridFS。

你可以在 Node.js 中做到这一点。文档在这里：

[http://mongodb.github.com/node-mongodb-native/markdown-docs/gridfs.html](http://mongodb.github.com/node-mongodb-native/markdown-docs/gridfs.html)

对于副本集，可以在此处找到 Node.js 的文档：

[http://mongodb.github.com/node-mongodb-native/markdown-docs/replicaset.html](http://mongodb.github.com/node-mongodb-native/markdown-docs/replicaset.html)

对于某些文件的简单一次性复制，您可以在命令行上使用 mongofiles（使用临时文件 :( ) ：

[http://www.mongodb.org/display/DOCS/GridFS+Tools](http://www.mongodb.org/display/DOCS/GridFS+Tools)

```
mongofiles --host HOST get currentfilename
mongofiles --host HOST put -l currentfilename newfilename
rm currentfilename 
```

然而，我不知道 mongofiles 与分片和副本的工作情况如何，但我希望它能够工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T11:26:22.063

```
gridfs_session = gridfs.GridFS(mongo.session)
out_file = gridfs_session.get(file_id)
new_copy = gridfs_session.put(out_file, content_type=out_file.content_type) 
```

# php - PHP Regex 在句点之后和空格之前提取文本

> ID：11229587
> 
> 赞同：1
> 
> 时间：2012-06-27T15:17:53.720
> 
> 标签：php, regex

我试图从不同的不同字符串中提取某个部分，并且很难获得正确的正则表达式来做到这一点。以下是我试图从中提取的一些示例：

1.  AG055.MA - MAGNUM（只想返回 MA）
2.  WI460.16 - 东西（想退货 16）
3.  AG055.QB（想退货QB）

所以基本上，我只想在句号之后，但在空格之前拉字符。之前或之后没有别的。有人可以帮我获得正确的正则表达式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T15:20:15.867

这应该有效：

```
<?php
preg_match( '/\.([^ ]+)/', $text, $matches );

print_r( $matches );
?> 
```

输出：

```
Array
(
    [0] => .MA
    [1] => MA
)

Array
(
    [0] => .16
    [1] => 16
)

Array
(
    [0] => .QB
    [1] => QB
) 
```

正则表达式是说找到一个 . 字符，然后在它之后获取任何不是空格字符的字符。+ 使它只返回点后有非空格字符的匹配项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T15:19:31.997

```
preg_match('/\w+\.(\w{2})\s/', $input, $matches);
echo $matches[1]; 
```

*   `\w+`表示 1 个或多个单词字符（az、AZ 和 0-9）。
*   `\.`表示句点/点（反斜杠是为了转义它，因为`\.`在正则表达式中用作运算符）
*   `(\w{2})`匹配 2 个单词字符
*   `\s`表示空格

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:20:45.490

```
preg_match('/^[A-Z0-9]{5}\.([A-Z0-9]{2})/', $string, $matches);
var_dump($matches); 
```

应该返回`$matches[1]`.

# linq - EF 4.3 Code First - 向后查询导航属性

> ID：11229589
> 
> 赞同：1
> 
> 时间：2012-06-27T15:18:00.620
> 
> 标签：linq, entity-framework-4, linq-to-entities, ef-code-first

我正在尝试查询一对多关系，但无法弄清楚如何做到这一点。我遇到的问题是我要过滤的字段的 ID 存在于连接表（不是主表）中......

它可能更容易说明而不是解释！

我的两门课是

```
public class DbUserClient
{
    public virtual string UserId { get; set; }
    public virtual int ClientId { get; set; }
    public virtual DateTime AssignedOn { get; set; }
    public virtual DateTime? ClearedOn { get; set; }

    // navigation properties
    public virtual DbUser User { get; set; }
    public virtual DbClient Client { get; set; }
} 
```

和

```
public class DbClient
{
    public virtual int ClientId {get;set;}
    public virtual string EntityName { get; set; }
    public virtual bool Deleted { get; set; }

    // navigation properties
    public ICollection<DbUserClient> UserClients { get; set; }
} 
```

在程序中，我有一个暴露客户端的存储库，即

```
 public ObservableCollection<DbClient> Clients
    {
        get { return context.Clients.Local; }
    } 
```

我对此绑定，这就是为什么我热衷于通过客户端查询，因为这将刷新我的“本地”集合。但是，我似乎无法找到一种方法来包含 UserClients 以及添加“where”子句。

我尝试过类似的东西

context.Clients.Include(c => c.UserClients.Where(uc => uc.UserId == "ME"));

但这会导致以下异常“*包含路径表达式必须引用在类型上定义的导航属性。使用虚线路径作为引用导航属性，使用 Select 运算符作为集合导航属性。参数名称：路径*”

这可行，但不幸的是不会更新我的“本地”收藏

```
from c in context.Clients
from uc in c.UserClients
where uc.ClientId == uc.ClientId && uc.UserId == "ME"
select new { c.ClientId, c.EntityName, uc.AssignedOn }; 
```

关于我哪里出错的任何建议？

干杯腹肌

**编辑我：**查看 SQL Profiler 上面的查询生成以下 SQL

```
SELECT 
[Extent1].[ClientId] AS [ClientId], 
[Extent1].[EntityName] AS [EntityName], 
[Extent2].[AssignedOn] AS [AssignedOn]
FROM  [dbo].[Client] AS [Extent1]
INNER JOIN [dbo].[UserClient] AS [Extent2] ON [Extent1].[ClientId] = [Extent2].  [ClientId]
WHERE ([Extent2].[ClientId] = [Extent2].[ClientId]) AND (N'ME' = [Extent2].[UserId]) 
```

这非常简单，或多或少类似于我自己编写 SQL 时会写的内容

但是，尽管下面建议的表达式有效并且正如您指出的那样填充了本地缓存

```
context.Clients
  .Where(c => c.UserClients.Any(uc => uc.UserId == userId))
  .Select(c => new { DbClient = c, DbUser = c.UserClients.Where(uc => uc.UserId == userId).FirstOrDefault() }).ToList(); 
```

它产生以下 SQL。这看起来比它需要的复杂得多，我假设这会对性能产生影响

```
exec sp_executesql N'SELECT 
[Filter2].[ClientId] AS [ClientId], 
[Filter2].[EntityName] AS [EntityName], 
[Filter2].[Deleted] AS [Deleted], 
[Limit1].[UserId] AS [UserId], 
[Limit1].[ClientId] AS [ClientId1], 
[Limit1].[AssignedOn] AS [AssignedOn], 
[Limit1].[ClearedOn] AS [ClearedOn]
FROM   (SELECT [Extent1].[ClientId] AS [ClientId], [Extent1].[EntityName] AS [EntityName], [Extent1].[Deleted] AS [Deleted] 
    FROM [dbo].[Client] AS [Extent1]
    WHERE  EXISTS (SELECT 
        1 AS [C1]
        FROM [dbo].[UserClient] AS [Extent2]
        WHERE ([Extent1].[ClientId] = [Extent2].[ClientId]) AND ([Extent2].[UserId] = @p__linq__0)
    ) ) AS [Filter2]
OUTER APPLY  (SELECT TOP (1) 
    [Extent3].[UserId] AS [UserId], 
    [Extent3].[ClientId] AS [ClientId], 
    [Extent3].[AssignedOn] AS [AssignedOn], 
    [Extent3].[ClearedOn] AS [ClearedOn]
    FROM [dbo].[UserClient] AS [Extent3]
    WHERE ([Filter2].[ClientId] = [Extent3].[ClientId]) AND ([Extent3].[UserId] = @p__linq__1) ) AS [Limit1]',N'@p__linq__0 nvarchar(4000),@p__linq__1 nvarchar(4000)',@p__linq__0=N'ME',@p__linq__1=N'ME' 
```

**编辑二：**在玩了一些之后，我找到了一个似乎满足我要求的解决方案。查看 SQL Profiler，我对生成的 SQL 感到满意。这与我的原始查询类似。

```
exec sp_executesql N'SELECT 
[Extent1].[ClientId] AS [ClientId], 
[Extent1].[EntityName] AS [EntityName], 
[Extent1].[Deleted] AS [Deleted], 
[Extent2].[UserId] AS [UserId], 
[Extent2].[ClientId] AS [ClientId1], 
[Extent2].[AssignedOn] AS [AssignedOn], 
[Extent2].[ClearedOn] AS [ClearedOn]
FROM  [dbo].[Client] AS [Extent1]
INNER JOIN [dbo].[UserClient] AS [Extent2] ON [Extent1].[ClientId] = [Extent2].[ClientId]
WHERE [Extent2].[UserId] = @p__linq__0',N'@p__linq__0 nvarchar(4000)',@p__linq__0=N'ME' 
```

我假设这里没有延迟加载。如果有人可以确认我将不胜感激

```
context.Clients.Join
  (
    context.UserClients, 
    c => c.ClientId, 
    uc => uc.ClientId, 
    (user, usrclient) => new { DbClient = user, DbUserClient = usrclient }
  ).Where(uc => uc.DbUserClient.UserId == userId).Load(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:05:56.213

`UserId`您可以使用= "ME"加载至少有一个用户的客户端：

```
var clients = context.Clients
    .Where(c => c.UserClients.Any(uc => uc.UserId == "ME"))
    .ToList(); 
```

这会加载正确的客户端，但不包括任何用户。

如果您包括用户...

```
var clients = context.Clients.Include(c => c.UserClients)
    .Where(c => c.UserClients.Any(uc => uc.UserId == "ME"))
    .ToList(); 
```

...您将获得正确过滤的客户端，但它将包括*所有*用户，而不仅仅是用户“ME”。

为了使用户也被过滤，您的最后一种方法是投影，是最好的方法：

```
var clientsWithUser = context.Clients
    .Where(c => c.UserClients.Any(uc => uc.UserId == "ME"))
    .Select(c => new
    {
        Client = c,
        User = c.UserClients.Where(uc => uc.UserId == "ME").FirstOrDefault()
    })
    .ToList(); 
```

这也应该更新`Local`集合，因为您正在匿名对象列表中加载完整的实体 (`Client`和`User`)。

**编辑**

您问题中的最后一个查询很好，尽管当您拥有导航属性时，手动编写 Join 并不是真正的 EF 方式。SQL 和查询结果很可能与以下内容相同：

```
context.UserClients.Include(uc => uc.Client)
    .Where(uc => uc.UserId == userId)
    .Load(); 
```

此`Include`查询中的 应转换为`INNER JOIN`您的手写 LINQ`Join`生成的相同。

# c# - 如何在DataGridView中格式化具有最大值和最小值的小数列？

> ID：11229590
> 
> 赞同：7
> 
> 时间：2012-06-27T15:18:02.457
> 
> 标签：c#, .net, winforms, string, datagridview

我想格式化在 DataGridView 中显示和捕获的小数位数，我有最小小数位数和最大小数位数。例如：

```
If caught, "120.0" display "120.00"
If caught "120.01" display "120.01"
If caught "120,123" display "120,123"
If caught "120.1234" display "120.1234"
If caught "120.12348" display "120.1235" (round) 
```

在 DataGridView 列中“txtcDecimal”具有属性（来自设计器）

```
txtcDecimal.DefaultCellStyle.Format = "N2";

txtcDecimal.DefaultCellStyle.Format = "0.00##";  // IS ANSWER. I do not work for an event that interfered 
```

掩码“0.00##”作为“n2”工作只得到 2 位小数，它正确舍入到小数点后两位，但只是不喜欢我需要的（如我在示例中所示）

我怎样才能以简单的方式做到这一点而不消耗很多资源？

**感谢 harlam357 和汤姆·加斯克**

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-27T15:34:20.700

要格式化 2 到 4 位小数，您可以使用自定义格式字符串。

```
txtcDecimal.DefaultCellStyle.Format = "0.00##" 
```

再进一步...

```
public partial class Form1
{
   public Form1()
   {
      InitializeComponent();

      var list = new List<Data>();
      list.Add(new Data { Prop1 = 1, Prop2 = 1.2 });
      list.Add(new Data { Prop1 = 2, Prop2 = 1.234567 });

      dataGridView1.Columns.Add("Prop1", "Prop1");
      dataGridView1.Columns["Prop1"].DataPropertyName = "Prop1";
      dataGridView1.Columns.Add("Prop2", "Prop2");
      dataGridView1.Columns["Prop2"].DataPropertyName = "Prop2";
      dataGridView1.Columns["Prop2"].DefaultCellStyle.Format = "0.00##";
      dataGridView1.DataSource = list;
   }

   class Data
   {
      public int Prop1 { get; set; }
      public double Prop2 { get; set; }
   }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T15:45:45.537

要格式化 2 到 4 位小数，您可以使用自定义格式字符串。（由 Harlam357 提供）

```
txtcDecimal.DefaultCellStyle.Format = "0.00##" 
```

我使用以下简单的控制台应用程序对其进行了验证：

```
 double myDouble = 13.1;
        double myDouble2 = 13.12345;
        Console.WriteLine(myDouble.ToString("0.00##"));
        Console.WriteLine(myDouble2.ToString("0.00##"));
        Console.Read(); 
```

输出是：

```
13.10
13.1235 
```

哈拉姆的回答显然是正确的......

**更新：**这就是我在表单中实现它的方式：

```
 public Form1()
    {
        InitializeComponent();

        DataTable dt = new DataTable();
        dt.Columns.Add("a");
        dt.Rows.Add(123.4);
        dt.Rows.Add(123.45);
        dt.Rows.Add(123.456);
        dt.Rows.Add(123.4567);
        dt.Rows.Add(123.45678);
        this.dataGridView1.DataSource = dt;
        this.dataGridView1.CellFormatting += new DataGridViewCellFormattingEventHandler(dataGridView1_CellFormatting);
    }

    void dataGridView1_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
    {
        if (e.ColumnIndex == 0 && e.RowIndex != this.dataGridView1.NewRowIndex)
        {
            double d = double.Parse(e.Value.ToString());
            e.Value = d.ToString("0.00##");
        }
    } 
```

**来源：** [http ://social.msdn.microsoft.com/forums/en-US/winformsdatacontrols/thread/95e7e7ef-2e71-412f-abe5-ffbee2c12c18/](http://social.msdn.microsoft.com/forums/en-US/winformsdatacontrols/thread/95e7e7ef-2e71-412f-abe5-ffbee2c12c18/)

**输出：**

![应用程序的示例输出](../Images/d8d3ab5a09f77ed5d06bce492a486ee2.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T15:25:47.970

创建自定义格式化程序。

```
public class MyFormatProvider : IFormatProvider, ICustomFormatter  
{  
   public object GetFormat(Type formatType)  
   {  
     if (formatType == typeof(ICustomFormatter))  
        return this;  
     else  
        return null;  
   }  

   public string Format(string format, object arg, IFormatProvider formatProvider)  
   {  
     // Check whether this is an appropriate callback               
     if (!this.Equals(formatProvider))  
        return null;  

     //if argument/ value is null we return empty string  
     if (arg == null)  
        return null;  

     string resultString = arg.ToString();  

     //transform resultString any way you want (could do operations based on given format parameter)  

     //return the resultant string  
     return resultString;  
   }  
} 
```

**资料来源：** [如何在数据绑定期间自定义 datagridview 中的数据格式](https://stackoverflow.com/questions/2117210/how-to-custom-format-data-in-datagridview-during-databinding)

# regex - 音乐和弦部分拆分正则表达式

> ID：11229597
> 
> 赞同：4
> 
> 时间：2012-06-27T15:18:21.053
> 
> 标签：regex, music-notation

这是这个问题的后续问题：[Regex for matching a music Chord](https://stackoverflow.com/questions/11229080/regex-for-matching-a-music-chord)，由我提出。

现在我有一个正则表达式可以知道`String`和弦的表示是否有效（上一个问题），我怎样才能有效地将和弦的三个不同部分（**根音**、临时**记号**和**和弦类型**）转换为单独的变量？

我可以做简单的字符串操作，但我想在前面的代码上构建并使用正则表达式会更容易，还是我错了？

以下是上述问题的更新代码：

```
public static void regex(String chord) {                
    String notes = "^[CDEFGAB]";
    String accidentals = "(#|##|b|bb)?";
    String chords = "(maj7|maj|min7|min|sus2)";
    String regex = notes + accidentals + chords; 
    Pattern pattern = Pattern.compile(regex);
    Matcher matcher = pattern.matcher(chord);
    System.out.println("regex is " + regex);
    if (matcher.find()) {
        int i = matcher.start();
        int j = matcher.end();
        System.out.println("i:" + i + " j:" + j);           
    }
    else {
        System.out.println("no match!");
    }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T15:31:08.757

用括号括起来（除了具有特殊含义的情况）会创建一个[捕获组](http://www.regular-expressions.info/brackets.html)或子模式。

您已经拥有`accidentals`并`chords`分组为这样的子模式，但您需要添加括号以`notes`将其捕获为子模式。

```
String notes = "^([CDEFGAB])";
String accidentals = "(#|##|b|bb)?";
String chords = "(maj7|maj|min7|min|sus2)"; 
```

按照惯例，与整个模式匹配的字符串是组 0，然后每个子模式被捕获为组 1、组 2，依此类推。

我不是 Java 人，但在阅读了文档之后，您似乎可以使用以下方式访问您的子模式匹配[`.group()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Matcher.html#group%28int%29)：

```
String note = matcher.group(1);
String acci = matcher.group(2);
String chor = matcher.group(3); 
```

* * *

*编辑：*

*最初，我建议`String accidentals = "((?:#|##|b|bb)?)";`，因为我担心如果不存在匹配的第二个子模式是可选的，会导致组编号问题。然而，一些测试表明，即使没有将它包装在这样的非捕获分组`(?: )`中，组 2 也始终存在，但如果没有匹配项则为空。（无论如何，第 2 组中的空字符串是想要的效果。）所以，这似乎 `... = "(#|##|b|bb)?";`就足够了。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T15:32:20.973

你已经完成了这项工作。只需再添加一个捕获组，您的最终正则表达式就变为：

```
 ^([CDEFGAB])(#|##|b|bb)?(maj7|maj|min7|min|sus2)?$ 
```

您的音符、变音记号和和弦将分别出现在第一、第二和第三次捕捉中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T07:24:50.510

我喜欢公认的答案，但作为一名吉他手，我确实会遇到添加了额外低音音符的和弦，例如 G/D、A/D 或 D/F#。当然，您可能会遇到许多其他和弦名称，例如：5 , 6, min6, 9, min9, sus4 ... 等。您可以考虑添加可能的字符串和弦的数量，然后添加一些贝斯临时记号，如果你有的话：

```
String chords =
"(maj|maj7|maj9|maj11|maj13|maj9#11|maj13#11|6|add9|maj7b5|maj7#5||min|m7|m9|m11|m13|
m6|madd9|m6add9|mmaj7|mmaj9|m7b5|m7#5|7|9|11|13|7sus4|7b5|7#5|7b9|7#9|7b5b9|7b5#9|
7#5b9|9#5|13#11|13b9|11b9|aug|dim|dim7|sus4|sus2|sus2sus4|-5|)";
String bass = "/([CDEFGAB])"; 
```

为了完成“弦乐和弦”的定义，您可能需要查阅[和弦词典](http://www.all-guitar-chords.com/)。干杯！

# c# - 按钮单击在用户控件 Umbraco 中不起作用

> ID：11229600
> 
> 赞同：1
> 
> 时间：2012-06-27T15:18:41.027
> 
> 标签：c#, asp.net, webforms, umbraco

我开始使用 Umbraco 构建网站，我注意到按钮单击事件（可能还有其他事件）不起作用。

我用一个按钮创建了最简单的用户控件，将其添加到页面中，当我调试它时调用 Page_Load（断点被击中），但不是按钮单击。

代码非常标准，但这里是：

.aspx 文件

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="TestControl.ascx.cs" Inherits="usercontrols_TestControl" %>

<asp:Button ID="Button1" runat="server" Text="Button" onclick="Button1_Click" />
<asp:Label ID="Label1" runat="server" Text="Label"></asp:Label> 
```

和后面的代码：

```
protected void Button1_Click(object sender, EventArgs e) {
    Label1.Text = "Button clicked!";
} 
```

问题可能出在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T20:26:54.683

确保你用`<form runat="server">...</form>`标签包裹你的身体，用户控件/宏应该在`form`标签内。还要确保您正确添加了用户控件。为了帮助您解决这个问题，这里有一些资源：

1.  [Niels Hartvig 的演示](http://www.youtube.com/watch?v=F9NV9a9pQ6Q)。（Niels 使用的是当前的 Umbraco 版本。）
2.  [Tim Geyssens 的截屏视频](http://www.nibble.be/?p=12)。（Tim 在截屏视频中使用的是旧版本的 Umbraco（不是 4.7.*），但没有太大区别。）
3.  [Skiltz的分步说明](http://skiltzonnet.blogspot.com/2008/01/creating-you-first-umbraco-user-control.html)。

# c++ - LONG_MAX 的 fseek 错误

> ID：11229603
> 
> 赞同：1
> 
> 时间：2012-06-27T15:18:43.260
> 
> 标签：c++, c, file-io

我正在尝试使用 fseek 来逐步浏览一个非常大（~500 GB）的文件。由于 fseek 的第二个参数，偏移量，是一个 long int，我必须考虑到我想要的偏移量何时大于 2^31 - 1。这是我的解决方案：

```
 fseek(file,offset % LONG_MAX,SEEK_SET);;
    for (int i = 0; i < offset/LONG_MAX; i++)
    {
      fseek(file,LONG_MAX,SEEK_CUR);
    } 
```

其中 LONG_MAX 在 limits.h 中定义，offset 是 64 位整数。但是，for 循环中的 fseek 调用存在错误。它返回一个非零值，并且 perror 说“无效参数”。为什么我不能使用 LONG_MAX（定义为 2147483647L）作为偏移量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:26:42.183

如果您有“普通”操作系统，请使用 fseek64() 变体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:30:29.307

您确定错误是 Long_Max 吗？如果那是您的原始代码，那么可能是两个 fseek fns 中的“file”和“file_”之间的区别？！

# wso2 - WSO2 ESB：在中介中使用 https 客户端证书

> ID：11229604
> 
> 赞同：0
> 
> 时间：2012-06-27T15:18:49.980
> 
> 标签：wso2, wso2esb, esb

我正在计划以下设置：

*   WSO2 ESB 中的代理服务，通过 JMS 与后端服务交互。
*   代理服务客户端使用带有相互身份验证的 https 连接到 WSO2 ESB。
*   在代理服务中介中，需要来自客户端证书的信息。

是否可以通过某种方式将客户端证书提供给调解员？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T01:49:57.067

首先，您必须在 WSO2 ESB 中启用相互身份验证。如果您不知道该怎么做，请参阅[Enable Mutual SSL for Proxy services in WSO2ESB](http://www.soasecurity.org/2012/08/enable-mutual-ssl-for-proxy-services-in.html)。然后参阅以下块帖子以了解[如何在类调解器中获取客户端的证书](http://chamaraanu-chamarasblog.blogspot.com/2013/01/wso2-esb-class-mediator-to-check-ssl.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:09:30.460

您不需要提供在中介级别提供的客户端证书。中介者被放在一个管道和过滤器链中，它是连接到后端的端点，它在端点级别，你必须保护它。[关于如何使用 WSO2 ESB 调用安全后端服务](http://www.soasecurity.org/2012/11/how-to-invoke-secured-backend-service.html)的博客文章展示了如何实现这一点。

# windows - （windows）原始写入文件而不涉及win32api

> ID：11229612
> 
> 赞同：0
> 
> 时间：2012-06-27T15:19:08.250
> 
> 标签：windows, winapi, assembly, file-io

我想知道是否有一个选项，如果有的话 - 在 Windows 中，如何在不使用 WIN32API 文件处理调用的情况下将原始字节写入文件。

我尝试使用 x86asm 直接文件调用的直接方法，但同时没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:13:18.077

您可以尝试使用来自 ntdll 的[本机 API](http://www.osronline.com/article.cfm?id=91)，甚至直接使用系统调用（int 2eh 或 systenter 指令），但这非常棘手——您需要使用内核样式的文件名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T20:09:30.220

在回答您的问题之前，让我提一下在 Windows 中使用 API 写入文件包括以下（简化）阶段：

1.  你打电话`WriteFile`（kernel32.dll）
2.  `WriteFile`调用`NtWriteFile`(ntdll.dll)
3.  `NtWriteFile`调用`SYSENTER`和操作进入内核模式
4.  在内核模式下`NtWriteFile`调用 Ntoskrnl.exe 的函数
5.  这发送`IRP_MJ_WRITE`到文件系统驱动程序
6.  文件系统驱动程序确定应该写入哪些扇区并传递给存储驱动程序
7.  存储驱动程序向硬盘驱动器发送命令以实际将数据写入指定扇区
8.  硬盘写入数据

与 8 相比，所有操作 1 到 7 都非常快（除非您使用 RAM 驱动器或极快的 SSD）

方法 1 - 您可以轻松跳过第 1 步（通过调用`NtWriteFile`）和第 2 步（通过调用`SYSENTER`- 不容易）。但是，您不会获得任何性能改进，所以这样做没有意义。只考虑`WriteFile`那些的包装器（我不认为你是在消除一个额外的函数调用之后）。

方法 2 - 您可以找出文件占用的扇区并直接写入它们（有效地跳过所有步骤到第 7 步）。为此，您需要打开并锁定卷，通过`FSCTL_GET_RETRIEVAL_POINTERS`调用找到目标文件占用的集群，并调用`WriteFile`卷句柄。但是这样比较是不公平的，因为文件系统驱动程序不仅会写入数据扇区，还会在调用 WriteFile 时更新文件系统元数据。

底线是 - “测试 win32 API 的效率”没有多大意义。您可以跳过操作系统所做的一些事情，但要么不会给您带来任何速度差异（方法 1），要么会有不公平的比较（方法 2）。

# c# - 如何动态地用 linq 查询的结果填充下拉列表？

> ID：11229614
> 
> 赞同：1
> 
> 时间：2012-06-27T15:19:10.310
> 
> 标签：c#, linq-to-sql, drop-down-menu, fill

我有两个下拉列表。秒数将根据第一个中的选定值而变化。

这是我正在尝试的，但不起作用。

```
protected void ddTerritory_SelectedIndexChanged (object sender, EventArgs e)
{
    NorthwindDataContext bd = new NorthwindDataContext();

    var selectedTerritory =
        (from t in bd.EmployeeTerritories
         where t.TerritoryID == this.ddTerritory.SelectedValue
         select t).ToList();

    for (int i = 0; i < selectedTerritory .Count; i++)
    {
        this.ddTerrSelc.Items.Insert(i,
            new ListItem(territorioSeleccionado[0].ToString(), i.ToString()));
    }
} 
```

我看到了一些示例，但是所有示例都使用 DataSet 作为下拉列表的数据源，正如您所看到的，我使用的是 linq to sql，所以我认为必须有一种方法可以做到这一点数据集

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:22:54.320

您不需要手动插入结果集，您可以这样做：

```
var selectedTerritory =
            (from t in bd.EmployeeTerritories
             where t.TerritoryID == this.ddTerritory.SelectedValue
             select t).ToList();

this.ddTerrSelc.DataTextField = "Name";
this.ddTerrSelc.DataValueField = "ID";
this.ddTerrSelc.ItemsSource = selectedTerritory; 
```

# javascript - 错误：this.element.uniqueId 不是函数。jQuery 用户界面。有人见过这个吗？

> ID：11229617
> 
> 赞同：2
> 
> 时间：2012-06-27T15:19:19.273
> 
> 标签：javascript, jquery, html, jquery-ui

```
<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/themes/ui-lightness/jquery-ui.css" />
<script type="text/javascript" src="../Content/Scripts/jquery.js"></script>
<script type="text/javascript" src="../Content/Scripts/jquery.ui.core.js"></script>
<script type="text/javascript" src="../Content/Scripts/jquery.ui.widget.js"></script>
<script type="text/javascript" src="../Content/Scripts/jquery.ui.position.js"></script>
<script type="text/javascript" src="../Content/Scripts/jquery.ui.menu.js"></script>
<script type="text/javascript" src="../Content/Scripts/jquery.ui.selectmenu.js"></script>
<script type="text/javascript" src="../Content/Scripts/jquery.ui.tabs.js"></script> 
```

这就是我的脚本和样式表导入的总和，但是当它尝试将其中一个`<select>`元素“转换”为 JQuery UI Selectmenu 时，我在 jquery.ui.selectmenu.js 和 jquery 的 Mozilla Web Developer 中收到此错误esque 主题不适用。

我之前看到过类似的错误，原因是脚本以错误的顺序很重要并且方法不存在，但似乎无法想到这里可能是什么原因造成的。

任何想法都会很棒，如果需要可以提供更多代码，但它只是应用到它的一个`<select>`元素。`$('#exampleSelect').selectmenu();`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T05:40:34.573

只是在黑暗中随机拍摄。根据[jQuery UI 1.9 升级指南](http://jqueryui.com/upgrade-guide/1.9/#added-uniqueid-and-removeuniqueid-methods)，该方法`.uniqueId()`仅在 jQuery UI 1.9 中引入。您的版本可能不支持上述方法，或者您可能混合了不同的版本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-28T21:12:38.740

*将 jquery.ui.selectmenu.js*中的第 33 行更改为：

```
var selectmenuId = this.element.uniqueId().attr( "id" ); 
```

至：

```
var selectmenuId = this.element.attr( 'id' ) || 'ui-selectmenu-' + Math.random().toString( 16 ).slice( 2, 10 ); 
```

这有望奏效。

# git - 在 git shell 中运行批处理文件

> ID：11229619
> 
> 赞同：7
> 
> 时间：2012-06-27T15:19:26.957
> 
> 标签：git, powershell, windows-7, batch-file

在 Windows 7 下，我有一个批处理文件，用于检查某些 repos 的状态并将返回结果输出到文件（使用标准 powershell 发出的 git 命令）。

从 git shell 启动时效果很好，我的问题是如何在不先启动 git shell 的情况下做到这一点？

所以我希望能够在标准提示符或可运行的批处理文件中输入一个命令/命令，它将在 git shell 中启动给定的批处理文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T11:15:19.020

如果您考虑做什么**[`git-cmd.bat`](https://github.com/msysgit/msysgit/blob/devel/git-cmd.bat)**，您需要做的就是`%PATH%`在脚本中的 git 命令之前设置正确的变量：

如果您不这样做，您会看到以下内容：

```
C:\Users\VonC>git --version
'git' is not recognized as an internal or external command,
operable program or batch file. 
```

我已经解压了[最新的便携版 msysgit](http://code.google.com/p/msysgit/downloads/list)。

`test.bat`将包含以下内容的脚本（因此不涉及 powershell）放在任何地方：

```
@setlocal

@set git_install_root="C:\Users\VonC\prg\PortableGit-1.7.11-preview20120620"
@set PATH=%git_install_root%\bin;%git_install_root%\mingw\bin;%git_install_root%\cmd;%PATH%

@if not exist "%HOME%" @set HOME=%HOMEDRIVE%%HOMEPATH%
@if not exist "%HOME%" @set HOME=%USERPROFILE%

@set PLINK_PROTOCOL=ssh

REM here is the specific git commands of your script

git --version
echo %HOME%
git config --global --list 
```

确保`HOME`设置正确，因为 Git 会在那里寻找你的全局 git 配置。

结果会给你：

```
C:\Users\VonC>cd prog\git

C:\Users\VonC\prog\git>s.bat

C:\Users\VonC\prog\git>git --version
git version 1.7.11.msysgit.0

C:\Users\VonC\prog\git>echo C:\Users\VonC
C:\Users\VonC

C:\Users\VonC\prog\git>git config --global --list
user.name=VonC 
```

注意：相同的脚本可以在 powershell 会话中完美运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T07:34:23.867

看起来您的 git 可执行文件无法用于命令行使用。

只需将`c:\Users\[your_login]\AppData\Local\GitHub\PortableGit_[hash]\bin`（或`c:\Users\[your_login]\AppData\Local\GitHub\PortableGit_[hash]\cmd`）添加到您的 Path 变量中。替换`[your_login]`并`[hash]`使用实际数据。

但我相信文件的位置会因版本而异，所以如果你是重度 git 用户，请考虑安装[msysGit](http://code.google.com/p/msysgit/)。它将自动将其可执行文件添加到系统路径（在安装过程中可以使用相应的选项）。

更重要的是，有一个名为[mysysGit-UTF8](http://code.google.com/p/msysgit-utf8/)的项目声称他们在 Windows 上具有完整的 UTF-8 支持。我没有注意到差异，通过。

# javascript - HTML/CSS/JS/jQuery：颜色“表格”/“网格”

> ID：11229622
> 
> 赞同：1
> 
> 时间：2012-06-27T15:19:36.007
> 
> 标签：javascript, jquery, html, css, color-picker

我正在尝试构建一个颜色表，就像 MS Office 字体颜色网格一样。最好的方法是什么？表，div 还是 ul？

我目前使用了一个 div，但我正在努力将它放在一个 ul 中，这是我的菜单。

## HTML

```
<div id="color">

<table id="colorgrid">

    <tr>

        <td class="cell" style="background-color: #FFFF00;"></td>

        <td class="cell" style="background-color: #7CFC00;"></td>

        <td class="cell" style="background-color: #40E0D0;"></td>

    </tr>

    <tr>

        <td class="cell" style="background-color: #9400D3;"></td>

        <td class="cell" style="background-color: #FF0000;"></td>

        <td class="cell" style="background-color: #FF00FF;"></td>

    </tr>

</table> <!--End of colorgrid --> 
```

## CSS

```
#colorgrid{

width: 85px;

height: 45px;

display: none;

position: absolute;

z-index: 3; 
```

}

。排{

}

。细胞{

```
float: left;

border: 1pt gray solid;

margin: 1px;

overflow: hidden;

width: 20px;

height: 20px; 
```

}

## JS/jQuery

```
$(document).ready(function(){       

$('#btn').click(function(){

    $('.backdrop').css('display', 'block');

    $('#colorgrid').css('display', 'block');

    $('.backdrop').click(function(){

        $('#colorgrid').css('display', 'none');

        $('.backdrop').css('display', 'none');

    });

    $('.cell').click(function(){

        var color = $(this).css('background-color');

        alert(color);

        $('#colorgrid').css('display', 'none');

        $('.backdrop').css('display', 'none');

    });

}); 
```

这段代码有效，我只是想要一个意见，给这只猫剥皮的最好方法是什么？:-)

PS btn 在里

![在此处输入图像描述](../Images/cae957f75cea7a55e3f3d257b04c8c94.png)

谢谢，

杰伊

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T16:22:41.127

# 更新

[HTML5](http://caniuse.com/#feat=input-color) （Chrome、Firefox 和 Opera）现在原生支持颜色选择器，并且可以使用输入类型来实现`color`。

[使用 HTML5 更新了演示](http://jsfiddle.net/ajumP/105/)

# 原来的

所以，这个问题真的让我很感兴趣，主要是因为它看起来很有趣，所以我决定使用 jQuery 创建一个小的调色板类型工具。设置非常简单，目的是通过使用包含`name`( [HTML 颜色名称](http://www.w3schools.com/html/html_colornames.asp)) 和`hex`. 除了将颜色设置为`div`具有特定类的 a 之外，实际的单击事件本身并没有做任何聪明的事情。

[jsFiddle 演示](http://jsfiddle.net/GeekyEggo/ajumP/1/)

这是设置：

## HTML

```
​&lt;ul></ul>
<div class="activeColour"></div>​​​​​​​ 
```

## CSS

```
ul
{
    width: 125px;
}
li
{
    cursor: pointer;
    display: block;
    height: 25px;
    float: left;
    margin: 0;
    padding: 0;
    width: 25px;
}
.activeColour
{
    clear: both;
    height: 25px;
    width: 125px;        
} 
```

## ​JavaScript - 第 1 部分，颜色数组

```
// define the colours
var colours = [
    { name: 'Yellow', hex: '#FFFF00' },
    { name: 'LawnGreen', hex: '#7CFC00' },
    { name: 'Aqua', hex: '#00FFFF' },
    { name: 'Fuchsia', hex: '#FF00FF' },
    { name: 'Blue', hex: '#0000FF' },
    { name: 'Red', hex: '#FF0000' },
    { name: 'DarkBlue', hex: '#00008B' },
    { name: 'DarkCyan', hex: '#008B8B' },
    { name: 'DarkGreen', hex: '#006400' },
    { name: 'DarkMagenta', hex: '#8B008B' },
    { name: 'DarkRed', hex: '#8B0000' },
    { name: 'DarkGoldenRod', hex: '#B8860B' },
    { name: 'DarkGray', hex: '#A9A9A9' },
    { name: 'LightGray', hex: '#D3D3D3' },
    { name: 'Black', hex: '#000000' }
]; 
```

## JavaScript - 第 2 部分，点击！

```
$(function()
{
    $('li').live('click', function()
    {
         $('.activeColour').css('background-color', $(this).css('background-color'));       
    });

    var $palette = $('ul');
    for (var i = 0; i < colours.length; i++)
    {
        $palette.append($('<li />').css('background-color', colours[i].hex));
    }
});
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:58:12.690

从验证的角度来看，LI 中的 DIV 元素没有任何问题。

您遇到的具体问题是什么？

使用表格作为布局是非常好的，尽管它是一种较旧的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-11T08:05:09.583

我玩了一下 Richard 的解决方案 .. ES6、工具提示和没有 JQuery

```
const colours = [
  { name:'white', hex:'#FFFFFF' },
  { name:'snow', hex:'#FFFAFA' },
  { name:'honeydew', hex:'#F0FFF0' },
  { name:'mintcream', hex:'#F5FFFA' },
  { name:'azure', hex:'#F0FFFF' },
  { name:'aliceblue', hex:'#F0F8FF' },
  { name:'ghostwhite', hex:'#F8F8FF' },
  { name:'whitesmoke', hex:'#F5F5F5' },
  { name:'seashell', hex:'#FFF5EE' },
  { name:'beige', hex:'#F5F5DC' },
  { name:'oldlace', hex:'#FDF5E6' },
  { name:'floralwhite', hex:'#FFFAF0' },
  { name:'ivory', hex:'#FFFFF0' },
  { name:'antiquewhite', hex:'#FAEBD7' },
  { name:'linen', hex:'#FAF0E6' },
  { name:'lavenderblush', hex:'#FFF0F5' },
  { name:'mistyrose', hex:'#FFE4E1' },
  { name:'gainsboro', hex:'#DCDCDC' },
  { name:'lightgray', hex:'#D3D3D3' },
  { name:'silver', hex:'#C0C0C0' },
  { name:'darkgray', hex:'#A9A9A9' },
  { name:'gray', hex:'#808080' },
  { name:'dimgray', hex:'#696969' },
  { name:'lightslategray', hex:'#778899' },
  { name:'slategray', hex:'#708090' },
  { name:'darkslategray', hex:'#2F4F4F' },
  { name:'black', hex:'#000000' },
  { name:'cornsilk', hex:'#FFF8DC' },
  { name:'blanchedalmond', hex:'#FFEBCD' },
  { name:'bisque', hex:'#FFE4C4' },
  { name:'navajowhite', hex:'#FFDEAD' },
  { name:'wheat', hex:'#F5DEB3' },
  { name:'burlywood', hex:'#DEB887' },
  { name:'tan', hex:'#D2B48C' },
  { name:'rosybrown', hex:'#BC8F8F' },
  { name:'sandybrown', hex:'#F4A460' },
  { name:'goldenrod', hex:'#DAA520' },
  { name:'peru', hex:'#CD853F' },
  { name:'chocolate', hex:'#D2691E' },
  { name:'saddlebrown', hex:'#8B4513' },
  { name:'sienna', hex:'#A0522D' },
  { name:'brown', hex:'#A52A2A' },
  { name:'maroon', hex:'#800000' },
  { name:'lightyellow', hex:'#FFFFE0' },
  { name:'lemonchiffon', hex:'#FFFACD' },
  { name:'lightgoldenrodyellow', hex:'#FAFAD2' },
  { name:'papayawhip', hex:'#FFEFD5' },
  { name:'moccasin', hex:'#FFE4B5' },
  { name:'peachpuff', hex:'#FFDAB9' },
  { name:'palegoldenrod', hex:'#EEE8AA' },
  { name:'khaki', hex:'#F0E68C' },
  { name:'darkkhaki', hex:'#BDB76B' },
  { name:'yellow', hex:'#FFFF00' },
  { name:'lightsalmon', hex:'#FFA07A' },
  { name:'salmon', hex:'#FA8072' },
  { name:'darksalmon', hex:'#E9967A' },
  { name:'lightcoral', hex:'#F08080' },
  { name:'indianred', hex:'#CD5C5C' },
  { name:'crimson', hex:'#DC143C' },
  { name:'firebrick', hex:'#B22222' },
  { name:'red', hex:'#FF0000' },
  { name:'darkred', hex:'#8B0000' },
  { name:'coral', hex:'#FF7F50' },
  { name:'tomato', hex:'#FF6347' },
  { name:'orangered', hex:'#FF4500' },
  { name:'gold', hex:'#FFD700' },
  { name:'orange', hex:'#FFA500' },
  { name:'darkorange', hex:'#FF8C00' },
  { name:'lawngreen', hex:'#7CFC00' },
  { name:'chartreuse', hex:'#7FFF00' },
  { name:'limegreen', hex:'#32CD32' },
  { name:'lime', hex:'#00FF00' },
  { name:'forestgreen', hex:'#228B22' },
  { name:'green', hex:'#008000' },
  { name:'darkgreen', hex:'#006400' },
  { name:'greenyellow', hex:'#ADFF2F' },
  { name:'yellowgreen', hex:'#9ACD32' },
  { name:'springgreen', hex:'#00FF7F' },
  { name:'mediumspringgreen', hex:'#00FA9A' },
  { name:'lightgreen', hex:'#90EE90' },
  { name:'palegreen', hex:'#98FB98' },
  { name:'darkseagreen', hex:'#8FBC8F' },
  { name:'mediumseagreen', hex:'#3CB371' },
  { name:'seagreen', hex:'#2E8B57' },
  { name:'olive', hex:'#808000' },
  { name:'darkolivegreen', hex:'#556B2F' },
  { name:'olivedrab', hex:'#6B8E23' },
  { name:'lightcyan', hex:'#E0FFFF' },
  { name:'cyan', hex:'#00FFFF' },
  { name:'aqua', hex:'#00FFFF' },
  { name:'aquamarine', hex:'#7FFFD4' },
  { name:'mediumaquamarine', hex:'#66CDAA' },
  { name:'paleturquoise', hex:'#AFEEEE' },
  { name:'turquoise', hex:'#40E0D0' },
  { name:'mediumturquoise', hex:'#48D1CC' },
  { name:'darkturquoise', hex:'#00CED1' },
  { name:'lightseagreen', hex:'#20B2AA' },
  { name:'cadetblue', hex:'#5F9EA0' },
  { name:'darkcyan', hex:'#008B8B' },
  { name:'teal', hex:'#008080' },
  { name:'powderblue', hex:'#B0E0E6' },
  { name:'lightblue', hex:'#ADD8E6' },
  { name:'lightskyblue', hex:'#87CEFA' },
  { name:'skyblue', hex:'#87CEEB' },
  { name:'deepskyblue', hex:'#00BFFF' },
  { name:'lightsteelblue', hex:'#B0C4DE' },
  { name:'dodgerblue', hex:'#1E90FF' },
  { name:'cornflowerblue', hex:'#6495ED' },
  { name:'steelblue', hex:'#4682B4' },
  { name:'royalblue', hex:'#4169E1' },
  { name:'blue', hex:'#0000FF' },
  { name:'mediumblue', hex:'#0000CD' },
  { name:'darkblue', hex:'#00008B' },
  { name:'navy', hex:'#000080' },
  { name:'midnightblue', hex:'#191970' },
  { name:'mediumslateblue', hex:'#7B68EE' },
  { name:'slateblue', hex:'#6A5ACD' },
  { name:'darkslateblue', hex:'#483D8B' },
  { name:'lavender', hex:'#E6E6FA' },
  { name:'thistle', hex:'#D8BFD8' },
  { name:'plum', hex:'#DDA0DD' },
  { name:'violet', hex:'#EE82EE' },
  { name:'orchid', hex:'#DA70D6' },
  { name:'fuchsia', hex:'#FF00FF' },
  { name:'magenta', hex:'#FF00FF' },
  { name:'mediumorchid', hex:'#BA55D3' },
  { name:'mediumpurple', hex:'#9370DB' },
  { name:'blueviolet', hex:'#8A2BE2' },
  { name:'darkviolet', hex:'#9400D3' },
  { name:'darkorchid', hex:'#9932CC' },
  { name:'darkmagenta', hex:'#8B008B' },
  { name:'purple', hex:'#800080' },
  { name:'indigo', hex:'#4B0082' },
  { name:'pink', hex:'#FFC0CB' },
  { name:'lightpink', hex:'#FFB6C1' },
  { name:'hotpink', hex:'#FF69B4' },
  { name:'deeppink', hex:'#FF1493' },
  { name:'palevioletred', hex:'#DB7093' },
  { name:'mediumvioletred', hex:'#C71585' }
];

const palette = document.getElementById('palette'), nameSpan = document.getElementById('name'), hexSpan=document.getElementById('hex');

palette.onclick = e => {
  const li = e.target;
  nameSpan.innerHTML=li.dataset.name;
  hexSpan.innerHTML=li.dataset.hex;
  if (palette.active) palette.active.className = palette.active.className.replace(' active', '');
  palette.active=li;
  li.className+=' active';
};

colours.forEach(color => {
  const li = document.createElement('li');
  li.title = color.name;
  li.style.backgroundColor = color.hex;
  li.dataset.name = color.name;
  li.dataset.hex = color.hex;
  palette.appendChild(li);
});
```

```
#palette {
  width: 500px;
  list-style-type: none;
}

#palette li {
  height: 40px;
  width: 40px;
  cursor: pointer;
  float: left;
  margin: 2px;
}

#palette li.active {
  border: solid 1px;
  margin: 1px;
}
```

```
<div height="100%" width="100%">
  Name: <span id="name"></span>&emsp;Hex: <span id="hex"></span>
  <ul id="palette"></ul>
</div>
```

# javascript - 循环中的函数调用，其参数被更新；避免浏览器崩溃

> ID：11229623
> 
> 赞同：1
> 
> 时间：2012-06-27T15:19:41.703
> 
> 标签：javascript, optimization, for-loop, crash, function-calls

下面是一个计算给定数组所有可能组合的函数：

```
function combinations(arr, k) {
   var i, subI, sub, combinationsArray = [], next;
   for (i = 0; i < arr.length; i++) {
       if (k === 1) {
           combinationsArray.push([arr[i]]);
       } else {
           sub = combinations(arr.slice(i + 1, arr.length), k - 1);
           for (subI = 0; subI < sub.length; subI++) {
               next = sub[subI];
               next.unshift(arr[i]);
               combinationsArray.push(next);
           }
       }
   }
   return combinationsArray;
}; 
```

例如：

```
 combinations([1,2,3],2); 
```

返回：

```
[[1,2],[1,3],[2,3]] 
```

我有一个嵌套的 for 循环，它修改了 12 个对象的数组的副本（拼接某些元素，取决于循环的迭代），然后将它用作组合函数的参数并存储返回的数组的某些元素。

```
var resultArray = [];
var paramArray = [obj1,obj2,obj3,obj4,obj5,obj6,obj7,obj8,obj9,obj10,obj11,obj12];
for(i=0;i<length1;i++){
  for(n=0;n<length2;n++){
    paramArray.splice(...);//modifying array
    resultArray[n] = combinations(paramArray,2)[i].slice();//storing an element, there are multiples of each element in the resultArray obviously
  }
} 
```

浏览器因上述代码类型崩溃（firefox返回消息：“此页面上的脚本可能正忙，或者可能已停止响应。您可以现在停止脚本，在调试器中打开脚本，或者让脚本继续。”）断点始终是调用组合函数的部分。

因为数组参数在每次迭代中都不同，所以我无法将组合函数调用分配给变量来优化代码。有没有更有效的方法来写这个？

# jquery - 删除与另一个 div 具有相同类的 div

> ID：11229627
> 
> 赞同：2
> 
> 时间：2012-06-27T15:19:51.510
> 
> 标签：jquery

我有两个 div：

```
<div class="dialog large"></div> 
```

和

```
<div class="dialog"></div> 
```

我必须删除带有“对话框”类的那个，但保留带有“大对话框”的那个。

如果我这样做`$('dialog').remove();`，它们都会被删除。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T15:20:55.363

```
$('div.dialog:not(.large)').remove(); 
```

**[演示](http://jsfiddle.net/QStkd/512/)**

### 稍微解释一下

`div.dialog`将选择`div`（`class=dialog`在这种情况下，两个 div 都会选择）。但

`div.dialog:not(.large)`将排除那些`div`并`class` `large`删除它们。

### 相关参考

*   **[：不是（）](http://api.jquery.com/not-selector/)**

*   **[类选择器](http://api.jquery.com/class-selector/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:22:49.577

用这个：

```
$("div.dialog").not('.large').remove(); 
```

[在这里吹](http://jsfiddle.net/v74V4/1/)...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:24:01.010

有很多方法可以做到这一点。您也可以`filter()`用作替代方案，可能适用于其他更复杂的情况。

```
$('div.dialog').filter(function(){ return !$(this).is('.large') }) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T15:27:03.067

如果要删除类恰好是“对话框”的 DIV，请尝试：

```
$('div[class="dialog"]').remove(); 
```

# java - 有没有一种干净的方法来为每个元素声明一个具有相同值的 Java 数组？

> ID：11229628
> 
> 赞同：6
> 
> 时间：2012-06-27T15:19:52.827
> 
> 标签：java, arrays

这不是非常重要，但我很好奇是否有一种方法可以编写一个 Java 单衬里，可能使用番石榴或其他东西来填充具有相同值的元素的数组。所以例如像`Arrays.getSameElementArray(new long[12], 42L);`

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-27T15:21:39.763

是的，

```
long[] arr = new long[12];
Arrays.fill(arr, 42L); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-27T15:22:19.060

你可以这样做：

```
long[] values = new long[12];
Arrays.fill(values, 42l); 
```

# php - 获取新的 MySQL 条目并动态追加到现有的 div

> ID：11229645
> 
> 赞同：0
> 
> 时间：2012-06-27T15:21:03.057
> 
> 标签：php, jquery, mysql, html, ajax

我有一个 PHP 脚本来选择数据库中的评论记录，然后将它们打印到页面上。我想要发生的是，如果一个用户在一个页面上，而另一个用户对所述页面上的一个项目发表评论，它会自动将新评论附加到底部。我遇到的问题是我不知道如何区分所有状态。

我用于生成状态评论的代码是：

```
<?php 

$rt = ("SELECT * FROM (SELECT comment as comment, byuid as byuid, comuid as comuid, likes as likes, dislikes as dislikes, UNIX_TIMESTAMP(timestamp) as timestamp FROM mingle_comments WHERE onuid = '$sid' AND type = 'status' ORDER BY timestamp DESC LIMIT 2) mingle_comments ORDER BY timestamp ASC"); //query
$result = mysql_query($rt) or die (mysql_error());
if(mysql_num_rows($result) >= 2) {
    ?>
    <div id="sa" style="background:#E0E0E0; padding:5px 5px 5px 5px;">
        <a href="#" style="font-family:Arial; font-size:12px; color:#3a3a3a; text-decoration:none;">View all comments...</a>
    </div>
    <?php
}

while($st = mysql_fetch_assoc($result)) {
$comment = nl2br($st['comment']);
$by = $st['byuid'];
$comuid = $st['comuid'];
$time = $st['timestamp'];
$l = $st['likes'];
$d = $st['dislikes'];

$bq = "SELECT * FROM users WHERE uid = '$by' LIMIT 1";
$bqq = mysql_query($bq) or die (mysql_error());

while($bqr = mysql_fetch_assoc($bqq)) {
    $dp = $bqr['dp'];
    $fbq = $bqr['fname'];
    $sbq = $bqr['sname'];
}
?>

<div id="commentbox" class="<?php echo $comuid; ?>" style="padding:5px 5px 5px 5px;">
    <div id="cbi" style=" display:inline; position:relative; ">
        <img src="<?php if ($dp == null) { echo 'img/unknown_user.jpg'; } else { echo "pf/" . $by . "/" . $dp; } ?>" width="36px" style=" display:inline; position:relative;"/>
    </div>
    <div id="cbt" style="position:relative; margin-left:32px; margin-top:-35px;">
        <a href="profile.php?uid=<?php echo $uid; ?>" style="position:relative; font-size:13px; margin-left:10px; font-family:Arial; color:#3a3a3a; text-decoration:none;"><?php echo $fbq . " " . $sbq; ?></a>
        <p class="<?php echo $comuid; ?>" style="position:relative; margin-left:5px;"><?php echo $comment; ?></p>
    </div>
    <div id="clb" style="background:#E0E0E0; padding-left:5px;">
        <a href="#">Like</a><a href="#" id="time"><?php echo time_since($time); ?></a>
    </div>
</div>
<?php
}
?> 
```

TL：博士；如何在不刷新页面的情况下自动获取新评论并将它们附加到上述脚本中生成的评论中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:45:22.060

**查询**

```
$(document).ready(function(){
    var lastcheck='';
    setInterval(function() {

        $.ajax({
            url:    'URL_TO_PHP_SCRIPT', 
            type:   'POST',
            data:   {'lastcheck':lastcheck},
            success: function(result){ 
                if (result!='nothing_new'){
                    lastcheck=result.lastcheck /*Update lastcheck*/
                    var data=result.data;

                    $.each(data, function(i,val){
                        //Foreach comment you do what you need, like append, prepend, etc.  data[i]."key" to get the value.
                    }); 

                }
            }
        });

    }, 15000 /* This will check each 15 seconds, you can change it */);

}); 
```

**PHP 端**

```
 $lastcheck=$_POST['lastcheck'];
        /*

        You should add a date field to each new created comment,then filter by "orderby date > $lastcheck" so you get comments since your last check
        You get the new comments here
        ...
        ...
        ..
        */

        if (!empty($arrayofnewcomments)){
             /*The output*/
            echo json_encode(array('lastcheck'=>date('Y-m-d H:i:s'),'data'=>$arrayofnewcomments)); 
        }else{/*No new comments*/
            echo 'nothing_new';
        } 
```

这是我想出的一些代码，它是一个通用的想法，但它有效。它将每 15 秒检查一次是否有新评论。

# android - 如何从服务获取参数到活动

> ID：11229647
> 
> 赞同：0
> 
> 时间：2012-06-27T15:21:09.033
> 
> 标签：android, design-patterns, service

我写了一些代码，活动启动服务以从 URL 获取一些文本，在服务完成后，我想将此参数返回给活动。

我的代码如下所示：

```
public class splash extends AsyncTask<String, Void, String> {

  private Context context; 
  private ProgressDialog Dialog; 
  protected config app;

  public splash(Context context){
      this.context=context;
      Dialog = new ProgressDialog(context);
  }

  protected String doInBackground(String... params) {
      //starts service number activite
      Intent serviceIntent = new Intent();
      serviceIntent.setAction("services.conServise");
      context.startService(serviceIntent); 
```

我不想使用全局参数而不是单例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:25:40.900

您需要使用[广播](http://developer.android.com/reference/android/content/BroadcastReceiver.html)接收器在活动广告服务之间进行通信。创建一个自定义广播接收器以将数据从服务发送回活动。请参阅本教程了解我们如何使用自定义广播接收器在服务和活动之间进行通信

[使用接收器自定义意图和广播](http://thinkandroid.wordpress.com/2010/02/02/custom-intents-and-broadcasting-with-receivers/)

[服务和活动之间的通信 - 第 1 部分](http://androidexperinz.wordpress.com/2012/02/14/communication-between-service-and-activity-part-1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:45:48.937

如果你想调用`Service`你的`Activity`，你想要的是一个[绑定的服务](http://developer.android.com/guide/components/bound-services.html)。它将您的服务绑定到一个变量，您将能够在`Activity`.

# http-status-code-301 - 重定向与“真实”页面点击：爬虫的观点

> ID：11229648
> 
> 赞同：0
> 
> 时间：2012-06-27T15:21:09.433
> 
> 标签：http-status-code-301, url-shortener, web-crawler

**背景 ：**

bit.ly、ow.ly instagr.am 和 gowal.la 等站点域是在其他地方转发的缩短器。由于这些网址中的大多数实际上是转发到其他第三方网站，我假设他们可以处理相当重的负载。

**问题 ：**

与爬取“真实”内容页面（即 blogger.com/）相比，从单个域（即 ow.ly）爬取 301 重定向时是否有不同的礼貌指标？

更具体地说：与流式传输真实内容的普通网站相比，我们希望每天能够访问多少次发出 301 重定向的网站。

**一些初步的想法：**

*   我最初的猜测是（10E6 = 1,000,000），鉴于我在网上看到的情况表明，考虑到像不倒翁这样的大型网站接收大约（10E7 =每天 10,000,000+) 的浏览量，像谷歌这样的网站每天的浏览量约为 10E8（十亿）。

无论如何，我希望我所做的这一非常原始的事实调查能够激发一些想法，以在我们讨论 301 重定向与“真正的”页面抓取（带宽密集型）时定义“礼貌”指标的差异.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:18:03.753

如有疑问，请检查[`robots.txt`](http://en.wikipedia.org/wiki/Robots_exclusion_standard). 有一个名为 的非标准扩展`Crawl-delay`，正如您可以想象的那样，它指定请求之间等待的秒数。

你提到了bit.ly；[他们`robots.txt`](http://bit.ly/robots.txt)没有这样的限制，并且有一条人性化的评论说“欢迎机器人”。只要您不*辱骂*，您可能不会对他们有任何问题。那里也有评论说他们有一个 API。使用该 API 可能比爬行更有用。

至于定义滥用......好吧，不幸的是，这是一件*非常主观的事情*，而且不会有任何一个正确的答案。您可能需要询问每个特定供应商他们的建议和限制是什么，如果他们不通过其网站上的文档`robots.txt`或通过实际的 API 提供此信息，该 API 本身可能具有明确定义的访问限制。

# google-maps - 在 PhoneGap 应用程序中 Retina 显示谷歌地图的图像

> ID：11229651
> 
> 赞同：1
> 
> 时间：2012-06-27T15:21:12.967
> 
> 标签：google-maps, cordova

在 PhoneGap iOS 应用程序中使用谷歌地图时，有没有办法让视网膜显示图像显示出来？如果我在 iPhone 3 上使用我的地图，标记会显示为正常/低分辨率图标。如果我在 iPhone 4 上使用地图，标记会使用相同的低分辨率图标，而不是我期望的更高分辨率图标。我尝试向我的标记添加优化：真，但这没有任何区别。

# javascript - 在 iPad 上滚动时 JavaScript 动画暂停

> ID：11229653
> 
> 赞同：1
> 
> 时间：2012-06-27T15:21:14.987
> 
> 标签：javascript, ipad, jquery-animate

所以我在页面上有一些动画，我正在使用 jQuery 来做到这一点。现在，当我在 iPad 上浏览网页并滚动页面时，所有动画都会暂停。

**什么样的动画？**嗯，就像一个*Carousel*，一个*Scrollable*区域，诸如此类的东西。

当滚动`position:fixed`大于`300px`. 为此，我使用了每**250 ms**重复一次的`setInterval`on 。`if(offset>300)`

 **所以当我滚动页面时，所有动画都会暂停，直到我离开屏幕。

我想这一定是一种常见的行为，我希望会有一个解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T19:40:59.583

@Jarry 说：“AFAIK 那是因为浏览器在您滚动时停止所有 js，所以.. 没有解决方案。但是，我不太确定这一点”**

# wcf - 基本 WCF 服务在测试设置上获得“无效的应用程序路径”

> ID：11229655
> 
> 赞同：3
> 
> 时间：2012-06-27T15:21:28.810
> 
> 标签：wcf, iis-7

**警告：** 自从我部署一些 Web 服务以来已经六年了，我对 IIS 的了解很少。

**背景：** 我试图在本地机器（Win7 64 位）上的 IIS 下托管 WCF 4.0 服务，但在尝试测试连接时不断收到“无效的应用程序路径”。所以我去了香草和

1.  创建并启动了一个新的 WCF 应用程序（通过 .NET 模板）（因此在 Cassini 下响应）；
2.  在默认网站下添加了一个新应用程序；
3.  将其分配给 DefaultAppPool；
4.  设置我的 .svc 文件所在文件夹的路径；和
5.  验证 DefaultAppPool 的目标是 4.0 框架

此外，当我测试默认网站设置传递身份验证成功但授权警告指示“无法验证对路径的访问 (C:\inetpub\wwwroot)。

**问题：** 当我拉起应用程序基本设置并单击“测试设置...”时，出现错误“执行此操作时出错。详细信息：无效的应用程序路径”

有没有人有关于如何正确检查设置的建议？

谢谢。

# gnuplot - 从脚本中获取 gnuplot 输出

> ID：11229656
> 
> 赞同：1
> 
> 时间：2012-06-27T15:21:28.873
> 
> 标签：gnuplot

我有一个打开后立即关闭的脚本。我试过暂停-1，但是我有一个空窗口。我也尝试过设置输出，但显然我不能用 multiplot

有没有办法在使用多图时设置输出？我在设置多图之前尝试设置输出，但ps文件为空白

编辑：我发现最有用的解决方案是“暂停鼠标”。我还被告知我可以使用 set output 并只执行“plot file1, file2, file3”，但我在语法上遇到了一些问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:51:57.483

我通常在进入多图模式之前设置输出（和终端）。您可能注意到的一件事是，某些终端在您之前不会在多图中绘制图`unset multiplot`（请参阅参考资料`help multiplot`）。

以下作品。

```
set term post enh color
set output "foo.ps"
set multiplot layout 2,1
plot sin(x)
plot cos(x)
unset multiplot 
```

multiplot 的一个问题是您经常希望查看绘图（例如使用 x11）并将其放入文件中（例如 postscript）。最干净的方法是使用以下`load`命令：

```
#foo.gp
set multiplot layout 2,1
plot sin(x)
plot cos(x)
unset multiplot 
```

现在你可以这样称呼：

```
set term x11 persist
load "foo.gp"
set term post enh color
set output 'foo.ps'
load 'foo.gp' 
```

# android - UI 组件的 API 版本

> ID：11229657
> 
> 赞同：1
> 
> 时间：2012-06-27T15:21:30.317
> 
> 标签：android, android-layout

我正在使用 ActionBarSherlock 组件开发应用程序。我的目标是针对 8 级 API 以来的所有设备。当我尝试对以下 xml 进行膨胀时，我在运行 android 2.2.1（8 级）的设备上遇到了异常。

我不知道哪个组件不好。你们能帮帮我吗？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <ImageView
            android:id="@+id/albumImg"
            android:layout_width="150dp"
            android:layout_height="150dp"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:src="@drawable/button" />

        <TextView
            android:id="@+id/albumStatic"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:text="Album :"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/albumTitle"
            style="@android:style/TextAppearance.Holo.Small"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/albumStatic"
            android:layout_toLeftOf="@+id/albumImg"
            android:text="(not found)" />

        <TextView
            android:id="@+id/albumStatic"
            style="@android:style/TextAppearance.Holo.Large"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:text="Album :"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/artistStatic"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/albumTitle"
            android:text="Artiste : "
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/artistName"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignRight="@+id/albumTitle"
            android:layout_below="@+id/artistStatic"
            android:text="(not found)" />

    <LinearLayout
        android:id="@+id/tagsContainer"
        android:layout_width="match_parent"
        android:layout_height="35dip"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/albumImg"
        android:gravity="center_vertical"
        android:orientation="horizontal" >

        <HorizontalScrollView
            android:id="@+id/tagsScrollView"
            android:layout_width="wrap_content"
            android:layout_height="32dip"
            android:layout_below="@+id/albumImg"
            android:layout_gravity="center"
            android:layout_weight="1"
            android:gravity="center_vertical" >

            <LinearLayout
                android:id="@+id/tagsLayout"
                android:layout_width="wrap_content"
                android:layout_height="32dip"
                android:orientation="horizontal"
                android:gravity="center_vertical"
                android:layout_gravity="center_vertical" >

                <TextView
                    android:id="@+id/tags_static"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Tags : "
                    android:textAppearance="?android:attr/textAppearanceLarge" />

                <TextView
                    android:id="@+id/tags_tv"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="(none)" />

            </LinearLayout>
        </HorizontalScrollView>
        <View
            android:id="@+id/vertical_divider"
            android:layout_width="1dip"
            android:layout_height="match_parent"
            android:paddingLeft="16dip"
            android:paddingRight="16dip"
            android:background="?android:attr/dividerVertical" />

            <ImageButton

                android:id="@+id/BT_editTags"
                android:layout_width="wrap_content"
                android:layout_height="32dip"
                android:paddingLeft="8dip"
                android:paddingRight="8dip"
                android:layout_gravity="center_vertical"
                android:background="?android:attr/selectableItemBackground"
                android:src="@android:drawable/ic_menu_edit" />

    </LinearLayout>

        <TextView
            android:id="@+id/tracks_static"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/tagsContainer"
            android:paddingBottom="10dp"
            android:paddingTop="10dp"
            android:text="Tracks"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <ListView
            android:id="@+id/tracksListView"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/tracks_static" >

            <!-- Preview: listitem=@android:layout/simple_list_item_1 -->
        </ListView>

        <TextView
            android:id="@+id/dateStatic"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/albumImg"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/artistName"
            android:text="Date : "
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/date"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@+id/dateStatic"
            android:layout_alignBottom="@+id/dateStatic"
            android:layout_alignRight="@+id/artistName"
            android:layout_toRightOf="@+id/dateStatic"
            android:text="(not found)" />

    </RelativeLayout>

</LinearLayout> 
```

错误日志正在谈论找不到滚动条。但我很确定 API 8 上存在 Horizo​​ntalScrollView 和 listView，不是吗？

这是错误：

```
06-27 17:11:20.817: E/AndroidRuntime(2064): FATAL EXCEPTION: main
06-27 17:11:20.817: E/AndroidRuntime(2064): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.micky.scanthings/com.micky.scanthings.ScanView}: android.view.InflateException: Binary XML file line #121: Error inflating class android.view.View
06-27 17:11:20.817: E/AndroidRuntime(2064):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2753)
06-27 17:11:20.817: E/AndroidRuntime(2064):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2769)
06-27 17:11:20.817: E/AndroidRuntime(2064):     at android.app.ActivityThread.access$2500(ActivityThread.java:129)
06-27 17:11:20.817: E/AndroidRuntime(2064):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2117)
06-27 17:11:20.817: E/AndroidRuntime(2064):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-27 17:11:20.817: E/AndroidRuntime(2064):     at android.os.Looper.loop(Looper.java:143)
06-27 17:11:20.817: E/AndroidRuntime(2064):     at android.app.ActivityThread.main(ActivityThread.java:4717)
06-27 17:11:20.817: E/AndroidRuntime(2064):     at java.lang.reflect.Method.invokeNative(Native Method)
06-27 17:11:20.817: E/AndroidRuntime(2064):     at java.lang.reflect.Method.invoke(Method.java:521)
06-27 17:11:20.817: E/AndroidRuntime(2064):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
06-27 17:11:20.817: E/AndroidRuntime(2064):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
06-27 17:11:20.817: E/AndroidRuntime(2064):     at dalvik.system.NativeStart.main(Native Method)
06-27 17:11:20.817: E/AndroidRuntime(2064): Caused by: android.view.InflateException: Binary XML file line #121: Error inflating class android.view.View
06-27 17:11:20.817: E/AndroidRuntime(2064):     at android.view.LayoutInflater.createView(LayoutInflater.java:513)
06-27 17:11:20.817: E/AndroidRuntime(2064):     at android.view.LayoutInflater.onCreateView(LayoutInflater.java:544)
06-27 17:11:20.817: E/AndroidRuntime(2064):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
06-27 17:11:20.817: E/AndroidRuntime(2064):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
06-27 17:11:20.817: E/AndroidRuntime(2064):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
06-27 17:11:20.817: E/AndroidRuntime(2064):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:621)
06-27 17:11:20.817: E/AndroidRuntime(2064):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:621)
06-27 17:11:20.817: E/AndroidRuntime(2064):     at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
06-27 17:11:20.817: E/AndroidRuntime(2064):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
06-27 17:11:20.817: E/AndroidRuntime(2064):     at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
06-27 17:11:20.817: E/AndroidRuntime(2064):     at com.actionbarsherlock.internal.ActionBarSherlockCompat.setContentView(ActionBarSherlockCompat.java:857)
06-27 17:11:20.817: E/AndroidRuntime(2064):     at com.actionbarsherlock.app.SherlockFragmentActivity.setContentView(SherlockFragmentActivity.java:251)
06-27 17:11:20.817: E/AndroidRuntime(2064):     at com.micky.scanthings.ScanView.onCreate(ScanView.java:58)
06-27 17:11:20.817: E/AndroidRuntime(2064):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-27 17:11:20.817: E/AndroidRuntime(2064):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2717)
06-27 17:11:20.817: E/AndroidRuntime(2064):     ... 11 more
06-27 17:11:20.817: E/AndroidRuntime(2064): Caused by: java.lang.reflect.InvocationTargetException
06-27 17:11:20.817: E/AndroidRuntime(2064):     at android.view.View.<init>(View.java:1850)
06-27 17:11:20.817: E/AndroidRuntime(2064):     at java.lang.reflect.Constructor.constructNative(Native Method)
06-27 17:11:20.817: E/AndroidRuntime(2064):     at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
06-27 17:11:20.817: E/AndroidRuntime(2064):     at android.view.LayoutInflater.createView(LayoutInflater.java:500)
06-27 17:11:20.817: E/AndroidRuntime(2064):     ... 25 more
06-27 17:11:20.817: E/AndroidRuntime(2064): Caused by: android.content.res.Resources$NotFoundException: File res/drawable-hdpi/scrollbar_handle_vertical.9.png from drawable resource ID #0x0
06-27 17:11:20.817: E/AndroidRuntime(2064):     at android.content.res.Resources.loadDrawable(Resources.java:1714)
06-27 17:11:20.817: E/AndroidRuntime(2064):     at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
06-27 17:11:20.817: E/AndroidRuntime(2064):     at android.view.View.<init>(View.java:1901)
06-27 17:11:20.817: E/AndroidRuntime(2064):     ... 29 more
06-27 17:11:20.817: E/AndroidRuntime(2064): Caused by: java.io.FileNotFoundException: res/drawable-hdpi/scrollbar_handle_vertical.9.png
06-27 17:11:20.817: E/AndroidRuntime(2064):     at android.content.res.AssetManager.openNonAssetNative(Native Method)
06-27 17:11:20.817: E/AndroidRuntime(2064):     at android.content.res.AssetManager.openNonAsset(AssetManager.java:418)
06-27 17:11:20.817: E/AndroidRuntime(2064):     at android.content.res.Resources.loadDrawable(Resources.java:1706)
06-27 17:11:20.817: E/AndroidRuntime(2064):     ... 31 more 
```

**编辑**：这是由于`?android:attr/dividerVertical`and `?android:attr/dividerVertical`（也许除其他外，如 Holo 主题）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:24:13.007

查看堆栈跟踪的最底部：

```
Caused by: java.io.FileNotFoundException: res/drawable-hdpi/scrollbar_handle_vertical.9.png 
```

看起来您在文件`drawable-hdpi`夹中缺少一个 png 文件。

# cocos2d-iphone - Cocos2D 2.0 - CCCallFuncN 不工作？

> ID：11229659
> 
> 赞同：1
> 
> 时间：2012-06-27T15:21:33.340
> 
> 标签：cocos2d-iphone

我有这个代码：

```
NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:temp/10.0f
                                 target:self
                               selector:@selector(verify)
                               userInfo:nil
                                repeats:YES];

CCMoveTo *moveTo = [CCMoveTo actionWithDuration:temp position:positionX];
id doneAction = [CCCallFuncN actionWithTarget:timer selector:@selector(invalidate)];
id sequence = [CCSequence actions: moveTo, doneAction, nil];
[self.container runAction:sequence]; 
```

问题是计时器没有失效并在动画结束后继续运行。

我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:26:25.640

改变你`CCCallFuncN`的`CCCallFunc`

```
id doneAction = [CCCallFunc actionWithTarget:timer selector:@selector(invalidate)]; 
```

CCCallFuncN 使用 查找要传递给函数的对象`withObject:`。你不需要这个。

# python - 带有 print json 的 Ffprobe 不打印任何内容

> ID：11229660
> 
> 赞同：4
> 
> 时间：2012-06-27T15:21:35.717
> 
> 标签：python, ubuntu, ffmpeg, ffprobe

我正在尝试以人类可读的方式获取有关电影的信息（分辨率、帧速率、比特率、编解码器、持续时间等）。我发现了这个命令：

```
ffprobe -v quiet -print_format json -show_format -show_streams somefile.asf 
```

在这个 Stack Overflow 问题中：[Get ffmpeg information in friendly way](https://stackoverflow.com/questions/7708373/get-ffmpeg-information-in-friendly-way)

但这对我不起作用。当我在终端中尝试时，输出为空：

```
richard@richard-desktop:~/projects/hello-python$ ffprobe -v quiet -print_format json -show_format -show_streams tests/test_1.mpg 
richard@richard-desktop:~/projects/hello-python$ 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-27T19:07:47.327

好的，Ubuntu repos 中当前版本的 ffmpeg 不是最新的。

我所做的是我添加了更多最新的存储库：

```
sudo add-apt-repository ppa:jon-severinsson/ffmpeg 
```

然后做了：

```
sudo apt-get remove ffmpeg
sudo apt-get autoremove
sudo apt-get update
sudo apt-get install ffmpeg 
```

瞧。它有效，我从 ffprobe 得到正确的 JSON 输出:)

# vba - 自动填充宏到长度

> ID：11229662
> 
> 赞同：0
> 
> 时间：2012-06-27T15:21:40.120
> 
> 标签：vba, excel

我正在尝试填写 D1 中的公式并将 D 填写到 C 的长度。我正在使用以下宏，但出现以下错误 - 编译错误：预期以

```
Sub Macro3()

Macro3 Macro

  Range("D1").Select
  ActiveCell.FormulaR1C1 = "=RC[-2]*(-1)+RC[-1]"
  Range("D1").Select

  Dim LastRow As Long

  With Sheets("Sheet2")
  LastRow = Range("C" & Rows.Count).End(xlUp).Row
  Range("D1").AutoFill Destination:=Range("D2:D" & LastRow)
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T15:42:53.560

你的问题很简单。我使用宏记录器自动填充公式范围，发现目标范围以公式范围开头，所以

```
Range("D1").AutoFill Destination:=Range("D2:D" & LastRow) 
```

应该：

```
Range("D1").AutoFill Destination:=Range("D1:D" & LastRow) 
```

这是工作代码，既固定又清理了一点:)

```
Sub Macro3()

With Sheets("Sheet1")

  Dim LastRow As Long
  LastRow = Range("C" & Rows.Count).End(xlUp).Row

  With Range("D1")
    .FormulaR1C1 = "=RC[-2]*(-1)+RC[-1]"
    .AutoFill Destination:=Range("D1:D" & LastRow)
  End With

End With

End Sub 
```

# c# - 子对象属性的 LINQ 'in' 子句

> ID：11229665
> 
> 赞同：3
> 
> 时间：2012-06-27T15:21:43.960
> 
> 标签：c#, linq

使用以下对象层次结构，我需要确认每个字符串中是否存在所有字符串值`Id`，例如`Inventories``SearchResult`

给定一个`string[] list = { "123", "234", "345" }`确认所有值在元素`list`数组中至少出现一次。`Inventory`我很好奇是否可以使用一个 LINQ 语句来清理它。

```
SearchResult
--
Inventory[] Inventories

Inventory
--
String Id 
```

现在，我正在分裂`list`例如

`list.Split(').ToDictionary(i => i.ToString(), i => false)`

并迭代字典，测试每个库存。`List<SearchResult>`然后，如果字典中没有错误值，我会创建一个新项目并添加项目。这感觉很笨拙。

## 代码

```
// instock: IEnumerable<SearchResult>
foreach (var result in instock)
{
    Dictionary<string, bool> ids = list.Split(',').ToDictionary(i => i.ToString(), i => false);
    foreach (var id in ids)
        if (result.Inventory.Any(i => i.Id == id.Key))
            ids[id.Key] = true;

    if (!ids.Any(i => i.Value == false))
        // instockFiltered: List<SearchResult>
        instockFiltered.Add(result);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T15:31:00.727

这是我写的一些代码。这里的优点是它使用哈希映射，因此理论上具有线性复杂度。

```
 public static bool ContainsAll<T>(this IEnumerable<T> superset, IEnumerable<T> subset, IEqualityComparer<T> comparer)
    {
        var set = new HashSet<T>(superset, comparer);
        return set.IsSupersetOf(subset);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:29:09.010

这部分 LINQ 将遍历整个库存，然后询问库存（如果它不为空）并找到包含列表中值之一的库存。

```
var matches = instock.Where(stock => stock.Inventory != null && stock.Inventory.All(i => list.Contains(i.Id)); 
```

# .net - 当上一个复选框被删除时，如何防止 CheckedListBox 控件中的下一个复选框被取消选中？

> ID：11229668
> 
> 赞同：0
> 
> 时间：2012-06-27T15:21:57.110
> 
> 标签：.net, winforms, checkbox, checkedlistbox

我正在开发一个 .NET Windows Forms 应用程序。我有一个 CheckedListBox 控件的事件处理程序，如果未选中，它应该从列表中删除一个复选框。我得到了那个部分的工作，但问题是下一个复选框，应该被选中，当我这样做时，它会自动变为未选中。

我已尝试“手动”从 CheckedListBox 中删除所有元素并再次添加它们，确保它们已被选中，但下一个复选框仍未选中。

这非常令人沮丧。

我的代码有问题还是这是一个错误？

```
 private void checkedListBox_ItemCheck(object sender, ItemCheckEventArgs e)
    {
        if (e.CurrentValue == CheckState.Checked)
        {
            checkedListBox.Items.RemoveAt(e.Index);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T22:32:59.000

我找到了解决问题的方法。这有点骇人听闻，但它确实有效。

我刚刚提供了一个 MouseUp 事件处理程序，并在其中循环检查了 checkedListBox 的项目，将未选中的项目设置为选中。

# mysql - 对 ENUM 类型的限制还不够？

> ID：11229670
> 
> 赞同：1
> 
> 时间：2012-06-27T15:22:05.490
> 
> 标签：mysql, enums

找不到以下问题/问题的直接答案。

我创建了一个数据库，其中一个字段是 ENUM 类型并且限制不是 NULL。

它工作正常，但是当我尝试插入具有该字段不允许的值的记录时，记录不会被拒绝，但无论如何都会在字段为空的情况下插入。也就是说，我认为它是一个空字符串（“”），因为我添加了限制 NOT NULL。

我当然希望整个记录被拒绝。我怎样才能做到这一点。

我认为示例代码不是必需的，因为它是常识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:31:41.450

如果您在 ENUM 列中插入不正确的值，或者如果您使用 IGNORE 将值强制到 ENUM 列中，则会将其设置为保留的枚举值 0，在字符串上下文中显示为空字符串。

[http://dev.mysql.com/doc/refman/5.1/en/constraint-enum.html](http://dev.mysql.com/doc/refman/5.1/en/constraint-enum.html)

尝试这个：

```
SET sql_mode = 'STRICT_ALL_TABLES'; or STRICT_TRANS_TABLES 
```

取决于您的表是事务性的还是非事务性的。这应该通过 mySQL 处理它，并在该方法甚至尝试操作之前导致它以完整性约束中止和回滚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:33:21.783

我发现你应该在 mysql 中启用严格模式。为此，您应该：

1.  编辑 /etc/mysql/my.cnf
2.  添加/编辑 sql-mode = STRICT_ALL_TABLES
3.  重启 MySQL

这是 MySQL 级别的解决方案。如果您尝试在 ENUM 字段中插入一个空值，它现在应该被拒绝。

# html - 如何动态禁用html在 JSTL 中？我尝试使用 <select id="_${sec_field}_id" name="${sec_field}" multiple="${multiple}" "${(empty="" disabled)="" ?="" 'disabled'="" :="" '="" '}"="">To动态启用/禁用</select> 选项 但是 Eclipse 给我警告： 在这一行找到多个注释： - 元素类型“select”必须后跟属性规范，“>”或“/>”。- 属性

> ID：11229675
> 
> 赞同：0
> 
> 时间：2012-06-27T15:22:20.933
> 
> 标签：html, spring, jsp, spring-mvc, jstl

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T16:47:28.803

`disabled`删除打印属性名称的 EL 表达式周围的双引号。双引号应仅放在属性**值**周围（之后的部分`=`）。

```
<select ... ${empty disabled ? 'disabled' : ''}> 
```

否则你最终会得到

```
<select ... ""> 
```

或者

```
<select ... "disabled"> 
```

这在语法上是错误的。

# c# - 避免@Html.Action 助手捕获异常

> ID：11229676
> 
> 赞同：0
> 
> 时间：2012-06-27T15:22:28.727
> 
> 标签：c#, asp.net-mvc-3, exception, html-helper

当内部操作在视图中引发异常时。`@Html.Action("BugyAction")`action 方法似乎捕获了异常并将其作为内部异常重新抛出。这对于调试内部操作非常令人沮丧。

在 VisualStudio 向您显示辅助方法抛出的异常时，有没有办法避免这种行为`Action`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:37:17.717

您可以中断 Visual Studio 中的任何异常。这是[一篇](http://msdn.microsoft.com/en-us/library/d14azbfh.aspx)解释如何设置的文章。

确保在代码中重新抛出异常（例如：控制器），以便将其捕获并且您的程序在适当的行中断并且您不会抑制异常。

```
 public ActionResult SomeAction()
    {
        int something = 0;
        try
        {
            int y = 3 / something;  //Intentional Exception
            return new ActionResult();

        }
        catch (Exception e)
        {
            throw;
        }
    } 
```

# php - 解析 HTML 代码

> ID：11229678
> 
> 赞同：0
> 
> 时间：2012-06-27T15:22:35.067
> 
> 标签：php, javascript

在输入时，我们有如下 HTML：

```
<table>
   <tr>
         <td>
            <img ...>
         </td>
         <td>
            <img ...>
         </td>
         ...
   </tr>
</table> 
```

但在最后一个 td 中：

```
<td>
    <img ...>
    <img ...>
<td> 
```

**问题：**如何删除 2nd `img`？我们可以使用 PHP、JS 和 CSS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:25:21.060

```
$dom = new DOMDocument();
$dom->loadHTML($yourhtmlstring);
$x = new DOMXPath($dom);
foreach($x->query('//td/img[2]') as $node) $node->parentNode->removeChild($node);
echo $dom->saveHTML(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:26:49.997

使用 JQuery 的删除功能

```
$("table tr:last-child > img:nth-child(2)").remove(); //i think this might work... 
```

[jQuery 删除](http://api.jquery.com/remove/)

**编辑**

在上面进行了更改以删除第二张图像而不是最后一张

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:27:41.543

如果您的 HTML 来自 HTML 页面或由 PHP 生成：
使用 jQuery 的解决方案：

```
$(document).ready(function(){
    $.each($("#your_table_id td "),function(){

        if( $(this).find("img").length > 1 ) {
            $(this).find("img:gt(0)").remove();
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-27T15:31:29.730

```
<code>
<table class="table">
   <tr>
         <td>
            <img>
         </td>
         <td>
            <img>
         </td>
        <td>
            <img >
            <img >
         </td>
   </tr>
</table>
<script>$(".table tr:last img:last").hide();</script>
</code> 
```

# c# - 如何使用两个命名空间查询 XElement

> ID：11229679
> 
> 赞同：3
> 
> 时间：2012-06-27T15:22:35.337
> 
> 标签：c#, linq, linq-to-xml, xml-namespaces

我正在尝试使用 LINQ-to-XML（一个 XElement 对象）查找元素的内部文本值。我进行了服务调用并获得了一个已成功加载到 XElement 对象中的 XML 响应。我想提取其中一个元素的内部文本 - 但是，每次我尝试这样做时，我都会得到一个空结果。

我觉得我错过了一些超级简单的东西，但我对 LINQ-to-XML 还是很陌生。任何帮助表示赞赏。

我正在尝试获取 StatusInfo/Status 元素的内部文本值。这是我返回的 XML 文档：

```
<feed xml:lang="en-us" xmlns="http://www.w3.org/2005/Atom">
  <title type="text">My Response</title>
  <id>tag:foo.com,2012:/bar/06468dfc-32f7-4650-b765-608f2b852f22</id>
  <author>
    <name>My Web Services</name>
  </author>
  <link rel="self" type="application/atom+xml" href="http://myServer/service.svc/myPath" />
  <generator uri="http://myServer" version="1">My Web Services</generator>
  <entry>
    <id>tag:foo.com,2012:/my-web-services</id>
    <title type="text" />
    <updated>2012-06-27T14:22:42Z</updated>
    <category term="tag:foo.com,2008/my/schemas#system" scheme="tag:foo.com,2008/my/schemas#type" />
    <content type="application/vnd.my.webservices+xml">
      <StatusInfo xmlns="tag:foo.com,2008:/my/data">
        <Status>Available</Status>  <!-- I want the inner text -->
      </StatusInfo>
    </content>
  </entry>
</feed> 
```

这是我用来提取值的一段代码（不起作用）：

```
 XElement root = XElement.Load(responseReader);
    XNamespace tag = "tag:foo.com,2008:/my/data";
    var status = (from s in root.Elements(tag + "Status")
                 select s).FirstOrDefault(); 
```

我的`status`变量总是`null`. 我已经尝试了几种变体，但无济于事。让我感到困惑的部分是名称空间——`tag`并且`2008`已定义。我不知道我是否正确处理了这个问题，或者是否有更好的方法来处理这个问题。

此外，我无法控制 XML 模式或 XML 的结构。我正在使用的服务不受我控制。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:53:11.770

尝试`Descendants()`代替`Elements()`：

```
XElement x = XElement.Load(responseReader);
XNamespace ns = "tag:foo.com,2008:/my/data";
var status = x.Descendants(ns + "Status").FirstOrDefault().Value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T17:08:18.930

提要中有 2 个命名空间：

1.  Atom 命名空间
2.  标签命名空间

外层 xml 需要使用 Atom 命名空间，而内层 xml 的一部分需要使用标签命名空间。IE，

```
var doc = XDocument.Load(responseReader);
XNamespace nsAtom = "http://www.w3.org/2005/Atom";
XNamespace nsTag = "tag:foo.com,2008:/my/data";

// get all entry nodes / use the atom namespace
var entry = doc.Root.Elements(nsAtom + "entry");

// get all StatusInfo elements / use the atom namespace
var statusInfo = entry.Descendants(nsTag + "StatusInfo");

// get all Status / use the tag namespace
var status = statusInfo.Elements(nsTag + "Status");

// get value of all Status
var values = status.Select(x => x.Value.ToString()).ToList(); 
```

# r - 如何跳过连续行观察？

> ID：11229681
> 
> 赞同：1
> 
> 时间：2012-06-27T15:22:37.973
> 
> 标签：r, row, skip

我有一个由 5 分钟价格观察组成的数据集（不是 xts 集），如下所示：

```
dat = read.csv("olddat.csv", as.is=TRUE);
tim = strptime(dat[,1], "%d/%m/%Y %H:%M");
dat$day = format(tim, "%Y-%m-%d");
##ddx <- row index for each day
ddx = split(seq.int(nrow(dat)), dat$day); 
```

返回：（这只是我从 R 复制的数据的一天，每天的观察通常持续到 23:55，整个集合还有很多天）

```
2423  24/11/2011 00:00 1.3356 2011-11-24
2424  24/11/2011 00:05 1.3356 2011-11-24
2425  24/11/2011 00:10 1.3356 2011-11-24
2426  24/11/2011 00:15 1.3359 2011-11-24
2427  24/11/2011 00:20 1.3363 2011-11-24
2428  24/11/2011 00:25 1.3364 2011-11-24
2429  24/11/2011 00:30 1.3364 2011-11-24
2430  24/11/2011 00:35 1.3362 2011-11-24
2431  24/11/2011 00:40 1.3362 2011-11-24
2432  24/11/2011 00:45 1.3361 2011-11-24
2433  24/11/2011 00:50 1.3357 2011-11-24
2434  24/11/2011 00:55 1.3361 2011-11-24
2435  24/11/2011 01:00 1.3365 2011-11-24
2436  24/11/2011 01:05 1.3367 2011-11-24
2437  24/11/2011 01:10 1.3368 2011-11-24
2438  24/11/2011 01:15 1.3365 2011-11-24
2439  24/11/2011 01:20 1.3364 2011-11-24
2440  24/11/2011 01:25 1.3366 2011-11-24
2441  24/11/2011 01:30 1.3369 2011-11-24
2442  24/11/2011 01:35 1.3369 2011-11-24
2443  24/11/2011 01:40 1.3369 2011-11-24
2444  24/11/2011 01:45 1.3367 2011-11-24
2445  24/11/2011 01:50 1.3368 2011-11-24
2446  24/11/2011 01:55 1.3367 2011-11-24
2447  24/11/2011 02:00 1.3367 2011-11-24
2448  24/11/2011 02:05 1.3365 2011-11-24
2449  24/11/2011 02:10 1.3365 2011-11-24
2450  24/11/2011 02:15 1.3372 2011-11-24
2451  24/11/2011 02:20 1.3373 2011-11-24
2452  24/11/2011 02:25 1.3376 2011-11-24
2453  24/11/2011 02:30 1.3376 2011-11-24
2454  24/11/2011 02:35 1.3379 2011-11-24
2455  24/11/2011 02:40 1.3379 2011-11-24
2456  24/11/2011 02:45 1.3378 2011-11-24
2457  24/11/2011 02:50 1.3378 2011-11-24
2458  24/11/2011 02:55 1.3377 2011-11-24
2459  24/11/2011 03:00 1.3377 2011-11-24
2460  24/11/2011 03:05 1.3377 2011-11-24
2461  24/11/2011 03:10 1.3379 2011-11-24
2462  24/11/2011 03:15 1.3384 2011-11-24
2463  24/11/2011 03:20 1.3383 2011-11-24
2464  24/11/2011 03:25 1.3382 2011-11-24
2465  24/11/2011 03:30 1.3382 2011-11-24
2466  24/11/2011 03:35 1.3383 2011-11-24
2467  24/11/2011 03:40 1.3383 2011-11-24
2468  24/11/2011 03:45 1.3381 2011-11-24
2469  24/11/2011 03:50 1.3380 2011-11-24
2470  24/11/2011 03:55 1.3381 2011-11-24
2471  24/11/2011 04:00 1.3383 2011-11-24
2472  24/11/2011 04:05 1.3381 2011-11-24
2473  24/11/2011 04:10 1.3382 2011-11-24
2474  24/11/2011 04:15 1.3381 2011-11-24
2475  24/11/2011 04:20 1.3379 2011-11-24
2476  24/11/2011 04:25 1.3379 2011-11-24
2477  24/11/2011 04:30 1.3379 2011-11-24
2478  24/11/2011 04:35 1.3373 2011-11-24
2479  24/11/2011 04:40 1.3373 2011-11-24
2480  24/11/2011 04:45 1.3371 2011-11-24
2481  24/11/2011 04:50 1.3368 2011-11-24
2482  24/11/2011 04:55 1.3369 2011-11-24
2483  24/11/2011 05:00 1.3373 2011-11-24
2484  24/11/2011 05:05 1.3373 2011-11-24
2485  24/11/2011 05:10 1.3372 2011-11-24
2486  24/11/2011 05:15 1.3373 2011-11-24
2487  24/11/2011 05:20 1.3376 2011-11-24
2488  24/11/2011 05:25 1.3376 2011-11-24
2489  24/11/2011 05:30 1.3375 2011-11-24
2490  24/11/2011 05:35 1.3374 2011-11-24
2491  24/11/2011 05:40 1.3371 2011-11-24
2492  24/11/2011 05:45 1.3367 2011-11-24
2493  24/11/2011 05:50 1.3364 2011-11-24
2494  24/11/2011 05:55 1.3363 2011-11-24
2495  24/11/2011 06:00 1.3361 2011-11-24
2496  24/11/2011 06:05 1.3360 2011-11-24
2497  24/11/2011 06:10 1.3362 2011-11-24
2498  24/11/2011 06:15 1.3364 2011-11-24
2499  24/11/2011 06:20 1.3362 2011-11-24
2500  24/11/2011 06:25 1.3364 2011-11-24
2501  24/11/2011 06:30 1.3366 2011-11-24
2502  24/11/2011 06:35 1.3366 2011-11-24
2503  24/11/2011 06:40 1.3366 2011-11-24
2504  24/11/2011 06:45 1.3369 2011-11-24
2505  24/11/2011 06:50 1.3377 2011-11-24
2506  24/11/2011 06:55 1.3376 2011-11-24
2507  24/11/2011 07:00 1.3388 2011-11-24
2508  24/11/2011 07:05 1.3391 2011-11-24
2509  24/11/2011 07:10 1.3394 2011-11-24
2510  24/11/2011 07:15 1.3389 2011-11-24
2511  24/11/2011 07:20 1.3390 2011-11-24
2512  24/11/2011 07:25 1.3386 2011-11-24
2513  24/11/2011 07:30 1.3387 2011-11-24
2514  24/11/2011 07:35 1.3387 2011-11-24
2515  24/11/2011 07:40 1.3392 2011-11-24
2516  24/11/2011 07:45 1.3390 2011-11-24
2517  24/11/2011 07:50 1.3392 2011-11-24
2518  24/11/2011 07:55 1.3383 2011-11-24
2519  24/11/2011 08:00 1.3378 2011-11-24
2520  24/11/2011 08:05 1.3377 2011-11-24
2521  24/11/2011 08:10 1.3377 2011-11-24
2522  24/11/2011 08:15 1.3375 2011-11-24
2523  24/11/2011 08:20 1.3373 2011-11-24
2524  24/11/2011 08:25 1.3377 2011-11-24
2525  24/11/2011 08:30 1.3380 2011-11-24
2526  24/11/2011 08:35 1.3378 2011-11-24
2527  24/11/2011 08:40 1.3378 2011-11-24
2528  24/11/2011 08:45 1.3379 2011-11-24
2529  24/11/2011 08:50 1.3378 2011-11-24
2530  24/11/2011 08:55 1.3376 2011-11-24
2531  24/11/2011 09:00 1.3394 2011-11-24
2532  24/11/2011 09:05 1.3391 2011-11-24
2533  24/11/2011 09:10 1.3402 2011-11-24
2534  24/11/2011 09:15 1.3406 2011-11-24
2535  24/11/2011 09:20 1.3399 2011-11-24
2536  24/11/2011 09:25 1.3394 2011-11-24
2537  24/11/2011 09:30 1.3397 2011-11-24
2538  24/11/2011 09:35 1.3405 2011-11-24
2539  24/11/2011 09:40 1.3412 2011-11-24
2540  24/11/2011 09:45 1.3405 2011-11-24
2541  24/11/2011 09:50 1.3403 2011-11-24
2542  24/11/2011 09:55 1.3398 2011-11-24
2543  24/11/2011 10:00 1.3402 2011-11-24
2544  24/11/2011 10:05 1.3392 2011-11-24
2545  24/11/2011 10:10 1.3384 2011-11-24
2546  24/11/2011 10:15 1.3384 2011-11-24
2547  24/11/2011 10:20 1.3375 2011-11-24
2548  24/11/2011 10:25 1.3377 2011-11-24
2549  24/11/2011 10:30 1.3377 2011-11-24
2550  24/11/2011 10:35 1.3379 2011-11-24
2551  24/11/2011 10:40 1.3378 2011-11-24
2552  24/11/2011 10:45 1.3371 2011-11-24
2553  24/11/2011 10:50 1.3373 2011-11-24
2554  24/11/2011 10:55 1.3375 2011-11-24
2555  24/11/2011 11:00 1.3372 2011-11-24
2556  24/11/2011 11:05 1.3379 2011-11-24
2557  24/11/2011 11:10 1.3383 2011-11-24
2558  24/11/2011 11:15 1.3382 2011-11-24
2559  24/11/2011 11:20 1.3382 2011-11-24
2560  24/11/2011 11:25 1.3387 2011-11-24
2561  24/11/2011 11:30 1.3387 2011-11-24
2562  24/11/2011 11:35 1.3383 2011-11-24
2563  24/11/2011 11:40 1.3383 2011-11-24
2564  24/11/2011 11:45 1.3390 2011-11-24
2565  24/11/2011 11:50 1.3391 2011-11-24
2566  24/11/2011 11:55 1.3394 2011-11-24
2567  24/11/2011 12:00 1.3409 2011-11-24
2568  24/11/2011 12:05 1.3401 2011-11-24
2569  24/11/2011 12:10 1.3401 2011-11-24
2570  24/11/2011 12:15 1.3392 2011-11-24
2571  24/11/2011 12:20 1.3388 2011-11-24
2572  24/11/2011 12:25 1.3388 2011-11-24
2573  24/11/2011 12:30 1.3383 2011-11-24
2574  24/11/2011 12:35 1.3388 2011-11-24
2575  24/11/2011 12:40 1.3393 2011-11-24
2576  24/11/2011 12:45 1.3389 2011-11-24
2577  24/11/2011 12:50 1.3382 2011-11-24
2578  24/11/2011 12:55 1.3374 2011-11-24
2579  24/11/2011 13:00 1.3374 2011-11-24
2580  24/11/2011 13:05 1.3368 2011-11-24
2581  24/11/2011 13:10 1.3373 2011-11-24
2582  24/11/2011 13:15 1.3373 2011-11-24
2583  24/11/2011 13:20 1.3378 2011-11-24
2584  24/11/2011 13:25 1.3381 2011-11-24
2585  24/11/2011 13:30 1.3386 2011-11-24
2586  24/11/2011 13:35 1.3372 2011-11-24
2587  24/11/2011 13:40 1.3361 2011-11-24
2588  24/11/2011 13:45 1.3345 2011-11-24
2589  24/11/2011 13:50 1.3338 2011-11-24
2590  24/11/2011 13:55 1.3338 2011-11-24
2591  24/11/2011 14:00 1.3346 2011-11-24
2592  24/11/2011 14:05 1.3345 2011-11-24
2593  24/11/2011 14:10 1.3343 2011-11-24
2594  24/11/2011 14:15 1.3343 2011-11-24
2595  24/11/2011 14:20 1.3342 2011-11-24
2596  24/11/2011 14:25 1.3337 2011-11-24
2597  24/11/2011 14:30 1.3329 2011-11-24
2598  24/11/2011 14:35 1.3330 2011-11-24
2599  24/11/2011 14:40 1.3329 2011-11-24
2600  24/11/2011 14:45 1.3327 2011-11-24
2601  24/11/2011 14:50 1.3333 2011-11-24
2602  24/11/2011 14:55 1.3336 2011-11-24
2603  24/11/2011 15:00 1.3334 2011-11-24
2604  24/11/2011 15:05 1.3327 2011-11-24
2605  24/11/2011 15:10 1.3330 2011-11-24
2606  24/11/2011 15:15 1.3330 2011-11-24
2607  24/11/2011 15:20 1.3331 2011-11-24
2608  24/11/2011 15:25 1.3338 2011-11-24
2609  24/11/2011 15:30 1.3338 2011-11-24
2610  24/11/2011 15:35 1.3336 2011-11-24
2611  24/11/2011 15:40 1.3330 2011-11-24
2612  24/11/2011 15:45 1.3335 2011-11-24
2613  24/11/2011 15:50 1.3335 2011-11-24
2614  24/11/2011 15:55 1.3331 2011-11-24
2615  24/11/2011 16:00 1.3329 2011-11-24
2616  24/11/2011 16:05 1.3332 2011-11-24
2617  24/11/2011 16:10 1.3330 2011-11-24
2618  24/11/2011 16:15 1.3332 2011-11-24
2619  24/11/2011 16:20 1.3335 2011-11-24
2620  24/11/2011 16:25 1.3333 2011-11-24
2621  24/11/2011 16:30 1.3330 2011-11-24
2622  24/11/2011 16:35 1.3329 2011-11-24
2623  24/11/2011 16:40 1.3333 2011-11-24
2624  24/11/2011 16:45 1.3339 2011-11-24
2625  24/11/2011 16:50 1.3337 2011-11-24
2626  24/11/2011 16:55 1.3341 2011-11-24
2627  24/11/2011 17:00 1.3344 2011-11-24
2628  24/11/2011 17:05 1.3354 2011-11-24
2629  24/11/2011 17:10 1.3353 2011-11-24
2630  24/11/2011 17:15 1.3348 2011-11-24
2631  24/11/2011 17:20 1.3345 2011-11-24
2632  24/11/2011 17:25 1.3344 2011-11-24
2633  24/11/2011 17:30 1.3345 2011-11-24
2634  24/11/2011 17:35 1.3346 2011-11-24
2635  24/11/2011 17:40 1.3345 2011-11-24
2636  24/11/2011 17:45 1.3342 2011-11-24
2637  24/11/2011 17:50 1.3338 2011-11-24
2638  24/11/2011 17:55 1.3340 2011-11-24
2639  24/11/2011 18:00 1.3341 2011-11-24
2640  24/11/2011 18:05 1.3339 2011-11-24
2641  24/11/2011 18:10 1.3339 2011-11-24
2642  24/11/2011 18:15 1.3339 2011-11-24
2643  24/11/2011 18:20 1.3342 2011-11-24
2644  24/11/2011 18:25 1.3341 2011-11-24
2645  24/11/2011 18:30 1.3341 2011-11-24
2646  24/11/2011 18:35 1.3342 2011-11-24
2647  24/11/2011 18:40 1.3342 2011-11-24
2648  24/11/2011 18:45 1.3341 2011-11-24
2649  24/11/2011 18:50 1.3343 2011-11-24
2650  24/11/2011 18:55 1.3342 2011-11-24
2651  24/11/2011 19:00 1.3342 2011-11-24
2652  24/11/2011 19:05 1.3341 2011-11-24
2653  24/11/2011 19:10 1.3340 2011-11-24
2654  24/11/2011 19:15 1.3339 2011-11-24
2655  24/11/2011 19:20 1.3338 2011-11-24
2656  24/11/2011 19:25 1.3337 2011-11-24
2657  24/11/2011 19:30 1.3336 2011-11-24
2658  24/11/2011 19:35 1.3337 2011-11-24
2659  24/11/2011 19:40 1.3337 2011-11-24
2660  24/11/2011 19:45 1.3335 2011-11-24
2661  24/11/2011 19:50 1.3338 2011-11-24
2662  24/11/2011 19:55 1.3335 2011-11-24
2663  24/11/2011 20:00 1.3334 2011-11-24
2664  24/11/2011 20:05 1.3334 2011-11-24
2665  24/11/2011 20:10 1.3339 2011-11-24
2666  24/11/2011 20:15 1.3339 2011-11-24
2667  24/11/2011 20:20 1.3346 2011-11-24
2668  24/11/2011 20:25 1.3349 2011-11-24
2669  24/11/2011 20:30 1.3342 2011-11-24
2670  24/11/2011 20:35 1.3345 2011-11-24
2671  24/11/2011 20:40 1.3347 2011-11-24
2672  24/11/2011 20:45 1.3349 2011-11-24
2673  24/11/2011 20:50 1.3349 2011-11-24
2674  24/11/2011 20:55 1.3349 2011-11-24
2675  24/11/2011 21:00 1.3349 2011-11-24
2676  24/11/2011 21:05 1.3348 2011-11-24
2677  24/11/2011 21:10 1.3349 2011-11-24
2678  24/11/2011 21:15 1.3348 2011-11-24
2679  24/11/2011 21:20 1.3348 2011-11-24
2680  24/11/2011 21:25 1.3348 2011-11-24
2681  24/11/2011 21:30 1.3348 2011-11-24
2682  24/11/2011 21:35 1.3348 2011-11-24
2683  24/11/2011 21:40 1.3346 2011-11-24
2684  24/11/2011 21:45 1.3346 2011-11-24
2685  24/11/2011 21:50 1.3347 2011-11-24
2686  24/11/2011 21:55 1.3348 2011-11-24
2687  24/11/2011 22:00 1.3354 2011-11-24
2688  24/11/2011 22:05 1.3353 2011-11-24
2689  24/11/2011 22:10 1.3349 2011-11-24
2690  24/11/2011 22:15 1.3352 2011-11-24
2691  24/11/2011 22:20 1.3348 2011-11-24
2692  24/11/2011 22:25 1.3348 2011-11-24
2693  24/11/2011 22:30 1.3349 2011-11-24
2694  24/11/2011 22:35 1.3350 2011-11-24
2695  24/11/2011 22:40 1.3348 2011-11-24
2696  24/11/2011 22:45 1.3348 2011-11-24
2697  24/11/2011 22:50 1.3347 2011-11-24
2698  24/11/2011 22:55 1.3347 2011-11-24
2699  24/11/2011 23:00 1.3345 2011-11-24
2700  24/11/2011 23:05 1.3345 2011-11-24
2701  24/11/2011 23:10 1.3345 2011-11-24
2702  24/11/2011 23:15 1.3341 2011-11-24
2703  24/11/2011 23:20 1.3339 2011-11-24
2704  24/11/2011 23:25 1.3337 2011-11-24
2705  24/11/2011 23:30 1.3338 2011-11-24
2706  24/11/2011 23:35 1.3337 2011-11-24
2707  24/11/2011 23:40 1.3341 2011-11-24
2708  24/11/2011 23:45 1.3338 2011-11-24
2709  24/11/2011 23:50 1.3335 2011-11-24
2710  24/11/2011 23:55 1.3331 2011-11-24 
```

下载数据时，5 分钟的观察已经到位。我基本上只是想知道如何修改这些数据以获得每 10 分钟、15 分钟、30 分钟和 1 小时的观察结果，即在读取数据时顺序删除行，而不必手动删除每个不需要的行时间通过MSExcel然后读入数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T15:30:28.143

```
 res <- 2 
 ## 2 for one every 10min (i. e. one every 2 rows), 
 ## 3 for one every 15min (i. e. one every 3 rows), etc.
 dat[seq(1, nrow(dat), by=res), ] 
```

**编辑以下评论：**

```
res <- 2
split(dat, dat$day, drop=TRUE) -> d1 
##Split into days
lapply(d1, FUN=function(x) {x[seq(1, nrow(x), by=res), ]->x}) -> d1 
##Select one observation every 10min for each day separately
as.data.frame(do.call(rbind, d1)) -> result
##Re-aggregate into one single dataframe (you may need to reset the row names though) 
```

# python - 孩子不能继承时如何创建基类？

> ID：11229683
> 
> 赞同：2
> 
> 时间：2012-06-27T15:22:49.357
> 
> 标签：python, django, design-patterns, database-design, model

我在 Django 中有一个相当简单的模型，比如说`Book`：

```
class Book(models.Model):
    name = models.CharField(max_length=255, default="")
    description = models.TextField(null=True, blank=True)
    creation_date = models.DateTimeField() 
```

因为结构和数据基本上来自外部 API，所以我将它包含在它自己的应用程序中，我不想修改它。

现在我想在项目中添加不同书籍的另一个来源，我不确定这里最好的解决方案是什么。

假设第二个模型是：

```
class NextBook(models.Model):
    title = models.CharField(max_length=255, default="")
    long_description = models.TextField(null=True, blank=True)
    created = models.DateTimeField() 
```

所以基本字段在那里，但有不同的名称。要将两者结合在一起，我可能可以使用另一个带有 GenericForeignKey 的模型：

```
class BaseBook(models.Model):
    book_type = models.ForeignKey(ContentType)
    book_id = models.PositiveIntegerField()
    book_object = generic.GenericForeignKey('book_type', 'book_id') 
```

但是我不能查询所有的书，因为例如`BaseBook.objects.all().order_by('created')`不起作用。当然，我可以继续在基本模型中复制一个日期时间字段，然后复制标题等等，但我认为这将是错误的方向。如果我不想触及特定模型，继承似乎也不是一种选择。

我正在寻找一些设计模式或一些让我有效地“插入”更多提供程序并查询所有对象的东西，同时又不会造成模型结构和数据库查询的巨大混乱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:46:28.907

你的问题存在根本矛盾。您是否假设，对于给定的书籍，`created`不同提供商报告的报告是相同的？

如果是的话，为什么你不能在你的`created`字段上创建一个字段`BaseBook`并按那个顺序？`creation_date`然后，您可以从您的`Book`（或者只是忽略它，如果您不想触摸它）中删除它。

如果不是，您首先要如何订购*书籍*（而不是提供者条目）`created`？

此外，对于像 MongoDB 这样的自由模式数据库，您尝试做的事情听起来像是一个很好的案例。在那里，您可以将提供者条目直接嵌入到您的图书文档中，然后按“从图书的第一个提供者条目创建的<code>”之类的内容进行排序。因此，您无需非规范化即可维护自包含的提供程序文档。但是，您仍然需要`created`对所有提供者表示相同的意思。

# multithreading - 在另一个线程 WinRT 中从 ViewModel 更新 INotifyPropertyChanged-property

> ID：11229685
> 
> 赞同：1
> 
> 时间：2012-06-27T15:22:50.780
> 
> 标签：multithreading, mvvm, windows-8

我有一个属性，`RaisePropertyChanged(PropName, oldValue, true, true)`当我不再有任何与互联网的连接时，它会抛出我在错误线程上的异常。所以我想从我的 ViewModel 更新属性，但是如何在我的 ViewModel 中获取当前线程，或者你对解决方案有什么建议？

我的 ViewModel-ctor

```
public MyViewModel()
{
   // START LISTENING TO NETWORKSTATUS
   NetworkInformation.NetworkStatusChanged += OnNetworkStatusChangedHandler;
} 
```

NetworkChanged-回调方法

```
 private async void OnNetworkStatusChangedHandler(object sender)
   {
       ConnectionProfile profile = NetworkInformation.GetInternetConnectionProfile();

       if (profile == null)
       {
          IsRefreshEnabled = false;
       }
       else
       {
          IsRefreshEnabled = true;
       }

   } 
```

我的财产

```
public const string IsRefreshEnabledPropertyName = "IsRefreshEnabled";
        private bool _isRefreshEnabled = true;
        public bool IsRefreshEnabled
        {
            get { return _isRefreshEnabled; }

            set
            {
                if (_isRefreshEnabled == value) { return; }

                var oldValue = _isRefreshEnabled;
                _isRefreshEnabled = value;
                RaisePropertyChanged(IsRefreshEnabledPropertyName, oldValue, value, true);
            }
        } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T14:04:00.280

您需要将 RaisePropertyChanged 调用替换为：

```
await Dispatcher.RunAsync(DispatcherPriority.Normal, (){RaisePropertyChanged(IsRefreshEnabledPropertyName, oldValue, value, true)}); 
```

这将导致对 RaisePropertyChanged 的​​调用在 UI 线程上运行。

我假设您的类派生自 Xaml 控件（以访问控件上的 Dispatcher 属性）。

# iphone - UINavigationController 中不显示“后退”按钮

> ID：11229688
> 
> 赞同：0
> 
> 时间：2012-06-27T15:23:04.760
> 
> 标签：iphone, objective-c, ios, uinavigationbar

我正在使用以下代码尝试为我的应用程序制作一个“后退”按钮，此代码所在的视图位于模态视图中（如果有任何影响？）：

```
navBar = [[UINavigationController alloc] initWithRootViewController:tvController];

[navBar.view setFrame:CGRectMake(0, 0, 320, 460)];
self.navigationItem.backBarButtonItem = [[UIBarButtonItem alloc] initWithTitle: @"Back"
                                                                           style: self.navigationController.navigationItem.leftBarButtonItem.style
                                                                          target: self
                                                                          action: @selector(backAction)];
navBar.navigationItem.backBarButtonItem.enabled = YES;

[self.view addSubview:navBar.view]; 
```

视图根本不显示，感谢您的任何提示！

编辑：即使我使用 leftBarButtonItem，它仍然没有出现，我认为我的代码的 self.navigationItem 位有问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T15:52:08.273

您需要确保当您呈现将其包装在 UINavigationController 中的模态视图时，您将拥有一个有效的导航栏来操作。否则，您将根据需要更改 navigationItem 但它不会显示，因为您不在 navigationController 中。

所以当你去展示视图控制器时，你可能正在做这样的事情。

```
SomeViewController *someViewController = [[[SomeViewController alloc] init] autorelease];
[self presentModalViewController:someViewController animated:YES]; 
```

你想做的就是这样呈现

```
SomeViewController *someViewController = [[[SomeViewController alloc] init] autorelease];
UINavigationController *navigationController = [[[UINavigationController alloc] initWithRootViewController:someViewController] autorelease]
[self presentModalViewController:navigationController animated:YES]; 
```

然后，当您在模态视图中时，您将拥有一个可以操作的有效导航栏。在那个时候改变 leftBarButtonItem 实际上会做一些事情并且是可见的。

如果你试图让这个显示一个后退按钮，虽然你可能“做错了”，通常如果你正在展示类似这样的模态，你会显示一个“完成”按钮。然而，通过用这样的导航控制器包装它，它确实允许模态视图然后推送和弹出视图控制器并作为普通导航堆栈运行。但它的根可能应该有一个“完成”按钮，而不是返回到其先前状态的返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:28:09.633

该`backBarButtonItem`属性需要在堆栈中的前一项上定义，即在您要返回的视图控制器上，而不是当前的。

**编辑：**

好的，我现在看到您正在添加自己的自定义导航栏。在这种情况下，您不能使用视图控制器的导航项。您必须改为将自己的导航项推送到导航栏并访问它们。例如：

```
UINavigationItem *item = [[UINavigationItem alloc] initWithTitle:@"Back"];
item.leftBarButtonItem = ...;
[navBar pushNavigationItem:item animated:NO]; 
```

# javascript - 在使用 css 转换问题之前用 jquery 定义 css 属性

> ID：11229689
> 
> 赞同：2
> 
> 时间：2012-06-27T15:23:06.067
> 
> 标签：javascript, jquery, css, css-transitions

我发现最初设置为 auto 时使用 css 转换属性似乎存在问题。为了避免这种情况，我在添加 css 转换属性之前使用 jquery 设置了初始 css 属性。

我遇到的问题是，当我在设置初始 css 属性后立即定义过渡属性时，我得到了奇怪的行为。**示例：http:** [//jsfiddle.net/3zUDc/10/](http://jsfiddle.net/3zUDc/10/)

但是，当我将过渡属性设置延迟几毫秒时，我得到了预期的行为，但代码看起来更丑陋。**示例：http:** [//jsfiddle.net/3zUDc/9/](http://jsfiddle.net/3zUDc/9/)

有没有办法在不将 css 转换和目标参数放在 setTimeout 块中的情况下完成第二个示例中的行为？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:51:04.573

**[.show()](http://api.jquery.com/show/)**是一个答案...

```
$('a:first').click(function(){
    $(this).css({'width': $(this).width() / $(this).parent().width() * 100 + '%', 'height': $(this).height()});
    $('a:first').show().css({
        '-webkit-transition': 'all 3s', 
        '-moz-transition': 'all 3s', 
        width: '100%', 
        height: '100px', 
        backgroundColor: 'black'
    });
}); 
```

这是[jsfiddle 演示](http://jsfiddle.net/3zUDc/11/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T15:59:05.137

You can add `.css('left')` to the end of your css declaration: [http://jsfiddle.net/YDt7G/](http://jsfiddle.net/YDt7G/)

The reason this works (or doesn't work) is because the browser's javascript engine optimises code that changes the DOM. So it doesn't update the DOM instantly after every line of code and is basically putting all the code into one DOM update.

Adding the `.css('left')` forces browser's javascript engine to look at the DOM and in-turn update the DOM beforehand.

# rspec - 如何测试 Mongoid 将生成的查询类型？

> ID：11229698
> 
> 赞同：6
> 
> 时间：2012-06-27T15:23:19.630
> 
> 标签：rspec, tdd, mongoid

我正在尝试使用 RSpec 断言给定的 Mongoid 查询**不会**加载记录，只需检查它的存在，因为记录很大（几 MB），并且代码只需要知道记录是否存在.

我一直在玩`.exists?`关联，但由于某种原因，这似乎不起作用，`has_one`例如：

```
class Profile
  include Mongoid::Document

  has_one :chart
end

class Chart  # this is heavy
  include Mongoid::Document

  belongs_to :profile
end

profile.chart.exists?  # fails if chart returns nil 
```

`exists?`代理方法显然不适用于`has_one`关系；尽管它记录在`has_many`. 我想自己制作，但我需要在 RSpec 中测试确实只查询而不加载记录。我正在考虑做一些事情，比如测试生成给 Mongo 驱动程序的底层查询，就像你可以用`.to_sql`. 有没有对应的Mongoid方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-17T05:15:43.713

```
profile.chart.nil? 
```

不工作？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-20T16:42:35.277

您可以在驱动程序中使用[命令监控](https://docs.mongodb.com/ruby-driver/master/tutorials/ruby-driver-monitoring/#command-monitoring)来检查发送到数据库的实际查询。这也适用于不返回结果的查询（因为无论如何都会发送查询）。

# c++ - 运算符重载+添加两个对象

> ID：11229701
> 
> 赞同：0
> 
> 时间：2012-06-27T15:23:36.567
> 
> 标签：c++, operator-overloading

我正在尝试添加它们在同一类中的两个对象。

在班级的私人部分，我有两个`int`变量

```
class One {

private:
int num1, num2;
public:

    One operator+=(const One&); // - a member operator that adds another One object - to the current object and returns a copy of the current object
    friend bool operator==(const One&, const One&); // - a friend operator that compares two One class objects for equality
};

 One operator+(const One&, const One&);// - a non-friend helper operator that adds One objects without changing their values and returns a copy of the resulting One 
```

我不确定`opeartor+`我猜有什么问题

```
One operator+(const One &a, const One &b){

One c,d,r;

c = a;
d = b;

r += b;
r += a;

return r;
} 
```

我认为上面的代码是错误的，但我尝试像 b.num1 一样使用，我得到编译错误

`error: 'int One::num1' is private error: within this context`

而且我也不能使用 b->num1 因为上面的函数不在成员函数部分。

```
error: base operand of '->' has non-pointer type 'const One' 
```

这就是它的调用方式`main`

`Result = LeftObject + RightObject;`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T15:34:27.243

如果你已经实现了这个成员函数：

```
One One::operator+=(const One&); 
```

然后你可以这样实现非成员加法运算符：

```
One operator+(const One& lhs, const One& rhs) {
  One result = lhs;
  result += rhs;
  return result;
} 
```

这可以稍微简化为以下内容：

```
One operator+(One lhs, const One& rhs) {
  return lhs += rhs;
} 
```

此模式（您可以适应所有运算符/运算符-赋值对）将运算符-赋值版本声明为成员——它可以访问私有成员。它将操作符版本声明为非朋友非成员——这允许在操作符的任一侧进行类型提升。

*旁白*：该`+=`方法应返回对 的引用`*this`，而不是副本。所以它的声明应该是：`One& operator+(const One&)`.

* * *

**编辑**：下面是一个工作示例程序。

```
#include <iostream>
class One {
private:
  int num1, num2;

public:
  One(int num1, int num2) : num1(num1), num2(num2) {}
  One& operator += (const One&);
  friend bool operator==(const One&, const One&);
  friend std::ostream& operator<<(std::ostream&, const One&);
};

std::ostream&
operator<<(std::ostream& os, const One& rhs) {
  return os << "(" << rhs.num1 << "@" << rhs.num2 << ")";
}

One& One::operator+=(const One& rhs) {
  num1 += rhs.num1;
  num2 += rhs.num2;
  return *this;
}

One operator+(One lhs, const One &rhs)
{
  return lhs+=rhs;
}

int main () {
  One x(1,2), z(3,4);
  std::cout << x << " + " << z << " => " << (x+z) << "\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:34:18.320

我不明白为什么`operator+`是错误的：

```
#include <stdio.h>

class One {
    public:
        One(int n1, int n2): num1(n1),num2(n2) {}

    private:
        int num1, num2;
    public:
        One operator+=(const One& o) {
            num1 += o.num1;
            num2 += o.num2;
            return *this;
        }
        friend bool operator==(const One&, const One&); // - a friend operator that compares two One class objects for equality
        void print() {
            printf("%d,%d\n", num1, num2);
        }
};

One operator+(const One& a, const One& b) {
    One r(0,0);
    r += b;
    r += a;
    return r;
}

int main() {
    One a(1,2),b(3,4);
    One r = a + b;
    r.print();
} 
```

# linq-to-sql - 使用嵌套列表创建复杂的 XPQuery - LINQ to SQL

> ID：11229706
> 
> 赞同：1
> 
> 时间：2012-06-27T15:23:59.333
> 
> 标签：linq-to-sql, xpo

关于以下查询有什么问题的任何提示？

```
return new ItemPricesViewModel()
            {
                Source = (from o in XpoSession.Query<PRICE>()
                          select new ItemPriceViewModel()
                          {
                              ID = o.ITEM_ID.ITEM_ID,
                              ItemCod = o.ITEM_ID.ITEM_COD,
                              ItemModifier = o.ITEM_MODIFIER_ID.ITEM_MODIFIER_COD,
                              ItemName = o.ITEM_ID.ITEM_COD,
                              ItemID = o.ITEM_ID.ITEM_ID,
                              ItemModifierID = o.ITEM_MODIFIER_ID.ITEM_MODIFIER_ID,
                              ItemPrices = (from d in o
                                                where d.ITEM_ID.ITEM_ID == o.ITEM_ID.ITEM_ID && d.ITEM_MODIFIER_ID.ITEM_MODIFIER_ID == o.ITEM_MODIFIER_ID.ITEM_MODIFIER_ID
                                                select new Price()
                                                {
                                                    ID = o.PRICE_ID,
                                                    PriceList = o.PRICELIST_ID.PRICELIST_,
                                                    Price = o.PRICE_

                                                }).ToList()
                          }).ToList()
            }; 
```

1.  o in subquery is in read，我收到消息“找不到源类型的查询模式的实现。'在哪里'找不到。”
2.  我想有不同的 ItemID，ItemModifier：我应该创建一个自定义的 IEqualityComparer 来做到这一点吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:39:10.633

它似乎`XPO`无法响应这种情况。作为参考，这是您可以使用的`DbContext`.

听起来你可能想要一个`GroupBy`. 尝试这样的事情。

```
var result = dbContext.Prices
   .GroupBy(p => new {p.ItemName, p.ItemTypeName)
   .Select(g => new Item
                 {
                     ItemName = g.Key.ItemName,
                     ItemTypeName = g.Key.ItemTypeName,
                     Prices = g.Select(p => new Price 
                                                {
                                                    Price = p.Price
                                                }
                                       ).ToList()

                 })
 .Skip(x)
 .Take(y)
 .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:00:34.123

**可能的原因**

一般来说，XPO 在大多数情况下都不支持“自由连接”。它被明确地写在他们的知识库或问答网站的某个地方。如果我再次点击那篇文章，我会附上它的链接。

在您的原始代码示例中，您试图在 INNER 查询中执行“自由联接”。'WHERE' 子句是按键连接的，可能是导航的，但它还包含一个由“修饰符”组成的额外过滤器，这可能不是关系定义的一部分。

此外，该查询尝试`IQueryable<PRICE> o`在内部查询中重用 - 实际上似乎受到 XPO 的支持 - 但如果您将任何预过滤（'where'）添加到顶级 'o'，它再次中断的可能性很高。

文档声明 XPO 仅支持导航连接，沿着由 XPObjects 中定义的属性和/或 xpcollections 形成的路径。这适用于整个 XPO，所以 XPQuery 也是如此。所有其他类型的连接都称为“自由连接”，并且：

*   XPO 通过获取相关对象、从中提取键值并将查询重写为具有一系列部分查询的多次往返，这些部分查询使用 WHERE-id-IN-(@p0,@p1,@p2, ...) - 但这只发生在一些最简单的情况下
*   或“不完全支持”，这意味着它们会抛出异常并要求您手动拆分查询或改写它

**可能的直接解决方案**

如果 ITEM_ID 是 PRICE 类中的关系和 XPCollection，那么您可以重写查询，以便它获取 PRICE**对象**，然后构建结果对象并使用 PRICE**对象**的属性初始化其字段。就像是：

```
return new ItemPricesViewModel()
{
    Source = (from o in XpoSession.Query<PRICE>().AsEnumerable()
              select new ItemPriceViewModel()
              {
                  ID = o.ITEM_ID.ITEM_ID,
                  ItemCod = o.ITEM_ID.ITEM_COD,
                  ....
                  ItemModifierID = o.ITEM_MODIFIER_ID.ITEM_MODIFIER_ID,
                  ItemPrices = (from d in o
                                where d.ITEM_ID.ITEM_ID == ....
                                select new Price()
    ....          ....          ....
}; 
```

请注意中断查询并确保首先获取 PRICE 对象而不是仅仅尝试翻译查询的“AsEnumerable”。这很可能会“正常工作”。

此外，将查询拆分为显式阶段有时有助于 XPO 对其进行分析：

```
return new ItemPricesViewModel()
{
    Source = (from o in XpoSession.Query<PRICE>()
              select new
              {
                  id = o.ITEM_ID.ITEM_ID,
                  itemcod = o.ITEM_ID.ITEM_COD,
                  ....
              }
          ).AsEnumerable()
          .Select(temp => 
              select new ItemPriceViewModel()
              {
                  ID = temp.id
                  ItemCod = temp.itemcod,
                  ....
                  ItemPrices = (from d in XpoSession.Query<PRICE>()
                                where d.ITEM_ID.ITEM_ID == ....
                                select new Price()
    ....          ....          ....
}; 
```

在这里，请注意，我首先从服务器获取项目数据，然后在“客户端”上构建项目，然后构建所需的分组。请注意，我不能再引用该变量`o`了。在这些精确的案例和示例中，不出所料，第二个（拆分的）可能会比第一个慢，因为它会获取所有 PRICE，然后通过额外的查询重新获取分组，而第一个只会获取所有 PRICE 和然后将根据已经获取的 PRICE 计算内存中的组。这不是我懒惰的副作用，但在重写 LINQ 查询时这是一个常见的陷阱，所以我将它作为警告包括在内:)

**对于您的情况，不建议使用**这两个代码示例，因为它们的性能可能很差，特别是如果您的表中有很多 PRICE，这很有可能。我将它们包括在内，**仅作为一个示例**，说明如何重写查询以简化其结构，以便 XPO 可以在不窒息的情况下吃掉它。但是，您必须非常小心并注意小细节，因为您很容易破坏性能。

**观察和真正的解决方案**

但是，值得注意的是，它们并不比您的原始查询差多少。它本身就很差，因为它试图从表中执行接近 O(N^2) 行的操作，只是为了按“ITEM_ID”对 te 行进行分组，然后将结果格式化为单独的对象。如果做得好，它将类似于 O(N lg N)+O(N)，因此无论是否支持，您使用 GroupBy 的替代尝试肯定是一个**更好的方法**，我真的很高兴您自己找到了它.

很多时候，当您像我在上面所做的那样尝试拆分/简化 XPQuery 表达式时，您会隐含地重新考虑问题并找到一种更简单、更简单的方法来表达最初不受支持或刚刚崩溃的查询。

不幸的是，您的查询实际上非常简单。对于一个不能“只是改写”的非常复杂的查询，拆分成多个阶段并使一些连接过滤器在“客户端”工作是不可避免的。但同样，在 XPCollections 或 XPViews 上使用 CritieriaOperators 也是不可能的，所以要么我们必须忍受它或使用简单的直接手工 SQL ..

**边注：**

整个 XPO 存在“自由连接”的问题，它们不仅在 XPQuery 中“不完全支持”，而且在 XPCollection、XPView、CriteriaOperators 等中也没有太多支持。但是，值得注意的是，至少在 DX11 的“我的版本”中，XPQuery 的 LINQ 支持非常**差**。

我遇到过很多正确的 LINQ 查询是：

*   抛出“NotSupportedException”，主要是在 FreeJoins 中，但也经常使用复杂的 GroupBy 或 Select-with-Projection、GroupJoin 和许多其他 - 有时甚至 Distinct(!) 似乎出现故障
*   在一些适当的类型转换中抛出“NullReferenceExceptions”（XPO 试图解释一个将 INT/NULL 作为对象的列..），我经常不得不编写一些完全奇怪和人为的表达式，`foo!=null && foo.bar!=123`而不是`foo = 123`尽管 'foo' 是一个`public int Foo {get;set;}`，这一切都是因为 DX 无法正确处理数据库中的 NULL（因为 XPO 为该属性创建了可为空的 INT 列……但这是另一回事）
*   从其他构造中抛出其他随机 ArgumentException/InvalidOperation 异常
*   甚至不正确地分析查询结构，例如这个通常是有效的：

    ```
    session.Query<ABC>()
         .Where( abc => abc.foo == "somefilter" )
         .Select( abc => new { first = abc, b = abc } )
         .ToArray(); 
    ```

    但像这样的事情通常会抛出：

    ```
    session.Query<ABC>()
         .Select( abc => new { first = abc, b = abc } )
         .Where ( temp => temp.first.foo == "somefilter" )
         .ToArray(); 
    ```

    但这一个是有效的：

    ```
    session.Query<ABC>()
         .Select( abc => new { first = abc, b = abc } )
         .ToArray()
         .Where ( temp => temp.first.foo == "somefilter" )
         .ToArray(); 
    ```

    中间代码示例通常抛出一个错误，表明 XPO 层试图在 ABC 类中查找“.first.foo”路径，这显然是错误的，因为此时元素类型`ABC`不再是匿名类，而是`a'`匿名类。

**免责声明**

我已经注意到这一点，但让我重复一遍：这些观察结果与 DX11 相关，而且很可能更早。我不知道在 DX12 及更高版本中修复了什么（如果有的话！）。

# visual-studio-2010 - 单元测试/代码覆盖警告和错误 VS2010

> ID：11229709
> 
> 赞同：2
> 
> 时间：2012-06-27T15:24:12.180
> 
> 标签：visual-studio-2010, mstest, code-coverage

我有一个示例测试项目，提供给我的项目团队的开发人员，以学习如何使用自动化测试。当我运行我拥有的一组单元测试时，它们都通过了，但我收到以下警告和错误：

> > 警告：测试运行部署期间发生冲突：测试容器“[...]\webappmvc4.tests.dll”直接或间接引用的部署项“[...]\WebAppMvc4.dll”无法部署到“WebAppMvc4.dll” ' 因为否则文件 '[...]\WebAppMvc4.dll' 将覆盖部署项 '[...]\WebAppMvc4.dll' 直接或间接引用的 '[...]\webappmvc4.tests.dll'
> > 
> > 错误：无法初始化 ASP.NET 项目“WebAppMvc4”。抛出异常：无法正确配置网站；获取 ASP.NET 进程信息失败。请求“ [http://localhost:12903/VSEnterpriseHelper.axd](http://localhost:12903/VSEnterpriseHelper.axd) ”返回错误：远程服务器返回错误：(500) 内部服务器错误。

这与此处发现的问题非常相似： [Test run errors with MSTest in VS2010](https://stackoverflow.com/questions/2761587/test-run-errors-with-mstest-in-vs2010)

但是，此问题的解决方法与关闭项目属性中的 Sign The Assembly 复选框有关。此项目未启用签名，我无法确定警告/错误的原因。

以下是来自事件查看器的警告信息：

> > 事件代码：3008 事件消息：发生配置错误。事件时间：2012 年 6 月 27 日上午 9:40:51 事件时间 (UTC)：2012 年 6 月 27 日下午 2:40:51 事件 ID：a9b4d9d93e334acbbde6184527b4cd81 事件顺序：1 事件发生：1 事件详细代码：0
> > 
> > 进程信息：进程ID：4128 进程名称：WebDev.WebServer40.EXE
> > 
> > 异常信息：异常类型：ConfigurationErrorsException 异常消息：无法加载文件或程序集“Microsoft.Practices.EnterpriseLibrary.Common，Version=5.0.505.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。无法验证强名称签名。该程序集可能已被篡改，或者它被延迟签名但未使用正确的私钥完全签名。（来自 HRESULT 的异常：0x80131045）在 System.Web.Configuration.CompilationSection.LoadAllAssembliesFromAppDomainBinDirectory() 在 System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) 在 System.Web.Configuration.CompilationSection.LoadAssembly(AssemblyInfo ai)在 System.Web.Compilation.BuildManager。
> > 
> > 无法加载文件或程序集“Microsoft.Practices.EnterpriseLibrary.Common”或其依赖项之一。无法验证强名称签名。该程序集可能已被篡改，或者它被延迟签名但未使用正确的私钥完全签名。（来自 HRESULT 的异常：0x80131045）
> > 
> > 请求信息： 请求 URL：

```
http://localhost:12903/VSEnterpriseHelper.axd 
```

这是错误的信息：

> > （QTAgent32.exe，PID 9392，线程 7）CoveragePlugIn.InitAspNet 为“WebAppMvc4”调用 WorkerProcessIdentity 或 WorkerProcessImpersonatedIdentity：
> > 
> > Microsoft.VisualStudio.Enterprise.Common.AspNetHelperException：无法正确配置网站；获取 ASP.NET 进程信息失败。
> > 
> > 请求“ [http://localhost:12903/VSEnterpriseHelper.axd](http://localhost:12903/VSEnterpriseHelper.axd) ”返回错误：远程服务器返回错误：(500) 内部服务器错误。---> System.Net.WebException：远程服务器返回错误：（500）内部服务器错误。
> > 
> > 在 System.Net.HttpWebRequest.GetResponse() 在 Microsoft.VisualStudio.Enterprise.Common.BaseHelper.GetWorkerProcessInfo() --- 内部异常堆栈跟踪结束 --- 在 Microsoft.VisualStudio.Enterprise.Common.BaseHelper.GetWorkerProcessInfo()在 Microsoft.VisualStudio.TestTools.CodeCoverage.CoveragePlugIn.InitAspNet(TestRun testRun)

# javascript - 检查地图标记是否在选定范围内

> ID：11229711
> 
> 赞同：7
> 
> 时间：2012-06-27T15:24:16.817
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

我有一张带有各种标记的地图，我需要能够在地图上绘制一个矩形并选择矩形边界内的标记。

到目前为止，我在这里找到了一些很棒的信息：[如何在鼠标拖动选择的区域内获取标记？](https://stackoverflow.com/questions/5927413/how-to-get-markers-inside-an-area-selected-by-mouse-drag)

我已经实现了 keymapzoom 插件。像这样

```
 $('#dispatcher').gmap3({action:'get'}).enableKeyDragZoom({
        boxStyle: {
          border: "dashed black",
          //backgroundColor: "red",
          opacity: 0.5
        },
        paneStyle: {
          backgroundColor: "gray",
          opacity: 0.2
        }
  });
var dz = $('#dispatcher').gmap3({action:'get'}).getDragZoomObject();
google.maps.event.addListener(dz, 'dragend', function (bnds) {
  alert(bnds);
}); 
```

这为我提供了警报（bnds）中的以下 (( **lat,long** ),( **lat,long** )) 格式；

我需要知道我现在如何检查其中是否有任何标记？

我已经有一个出于另一个原因存储标记的对象。像：

```
 markers[name] = {};
    markers[name].lat = lati;
    markers[name].lng = longi; 
```

哪个可能有用？

我不明白如何按照建议使用 GLatLngBounds 和 containsLatLng(latlng:GLatLng) 。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T15:50:10.700

您的问题被标记为 Maps API 的 v3 版本，因此我假设您使用的是该版本（您应该使用该版本，因为 v2 已被弃用）。请注意，某些类和方法的名称与您的问题不同。

边界用[`LatLngBounds`](https://developers.google.com/maps/documentation/javascript/reference#LatLngBounds)类表示。您可以`contains`对该类的实例执行该方法，以确定某个点是否在这些范围内。

如果您有一个带有所有标记的对象，您可以遍历它们并检查每个标记，例如：

```
var bounds = new google.maps.LatLngBounds(sw, ne);
for (var a in markers) {
    if (bounds.contains(new google.maps.LatLng(markers[a].lat, markers[a].lng)) {
        // marker is within bounds
    }
} 
```

附带说明一下，我会在创建标记对象时将 LatLng 对象存储在标记对象中。这样您就不必在任何需要的地方创建它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T10:42:08.530

[谷歌地图中的方框/矩形绘制选择](https://stackoverflow.com/questions/7976196/box-rectangle-draw-selection-in-google-maps)

这是我的解决方案..

```
 google.maps.event.addListener(dz, 'dragend', function(e) { //important listener          
      for(var i = 0; i < markers.length; i++){ // looping through my Markers Collection       
        if(e.contains(markers[i].position))
            console.log("Marker"+ i +" - matched");
        }         
     }); 
```

# sqlite - SQLite3：在 SQLite shell 中查看创建的表的命令？

> ID：11229715
> 
> 赞同：0
> 
> 时间：2012-06-27T15:24:28.360
> 
> 标签：sqlite

我是 SQLite3 的新手，想验证我创建的表和列是否实际创建。是否有显示表格和列的 shell 命令？我试着用谷歌搜索它，但我得到的只是关于创建视图的信息。.help 似乎没有任何可以帮助我的东西。我将不胜感激有关此事的任何信息。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:27:34.837

```
pragma table_info(YourTable); 
```

列出表格的所有列

要查看创建表语句：

```
select * from sqlite_master where type = 'table' and tbl_name = 'YourTable'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T21:17:16.023

从 SQLite 外壳：

```
.schema <TABLE_NAME> 
```

将显示 TABLE_NAME 的架构。切记**不要**放置';' 在它之后。

# php - 如何保护 PHP 脚本以使其仅在购买时可用？

> ID：11229717
> 
> 赞同：3
> 
> 时间：2012-06-27T15:24:30.997
> 
> 标签：php, security, license-key

我在 Stack Overflow 上阅读了另一个问题[的答案。](https://stackoverflow.com/a/11229182/1428773)让我先引用有罪的部分：

> 如果您的目标是让人们为此付费，那么您最好在服务器端为每个客户端注册一个密钥。然后，当他们连接更新时，他们将发送密钥，如果她在您的数据库中并且有效，您将输出您的 zip 文件。如果没有，你不会。

我问的是，从技术上讲，如何使用*注册密钥*方法保护他/她的基于 PHP 的项目？假设我们有这个：

```
$key = file_get_contents('http://auth.project.example.com/auth.php?auth_key=asd123');
if ( $key === "auth_valid" )
    define('AUTH', TRUE); 
```

之后，我们检查`AUTH`我们（从客户的角度）是否购买了该系统。显然，如果我们不这样做，`AUTH`将会`FALSE`或根本不会被定义。问题是，一个对 PHP*几乎*一无所知的客户会很容易地注释掉这些行，*hotwire* `AUTH`是 TRUE 并且他/她在那里，使用系统认为它已经被购买了，而实际上，它没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:34:12.207

我建议看看[ZendGuard](http://shop.zend.com/en/zend-guard-annual.html)或[ionCube](http://www.ioncube.com/sa_encoder.php?page=pricing)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:52:50.370

您将使用加密和评估。不过，想想看，一旦它被评估，那么你就输了，因为他们可以将 eval 更改为 echo。因此，在这种情况下，您需要通过 API 在服务器上包含业务部分。

# css - 首字下沉风格怪异

> ID：11229718
> 
> 赞同：1
> 
> 时间：2012-06-27T15:24:34.103
> 
> 标签：css

我将 .drop_cap 类应用于每个帖子的第一个字母，例如：[http ://www.mossoreviews.com/193-safe-er-grip-bath-and-shower-handle-review/](http://www.mossoreviews.com/193-safe-er-grip-bath-and-shower-handle-review/)

在 Firefox13 中一切正常。但是，在 Chrome17 和 IE9 中，不仅第一个字母是 .drop_cap 样式，而且第二个字母的样式也完全一样，好像第二个字母也被包裹在

```
<span class="drop_cap"></span> 
```

但实际上不是。知道这是怎么发生的，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:29:23.767

您的 CSS 声明将首字下沉样式应用于您的跨度和段落：

```
.drop_cap, .entry > p:first-of-type::first-letter 
```

这条线应该只是其中之一。

删除第一个字符周围的跨度并利用`:first-letter`CSS 属性，或者`.entry > p:first-of-type::first-letter`从选择器中删除 。

# node.js - Express.js 中间件 - 将项目添加到响应对象模型

> ID：11229721
> 
> 赞同：1
> 
> 时间：2012-06-27T15:24:36.223
> 
> 标签：node.js, express, middleware

我正在使用 Expressjs 并尝试将页面标题从默认模板提取到中间件，而不是每次都传递到视图的模型中。

**默认 index.jade 模板**

```
h1= title

p Welcome to the #{title} 
```

**来自模板的默认路由**

```
exports.index = function(req, res){
  res.render('index', { title: "Express" });
}; 
```

我尝试了以下操作，但是`title`当我执行此操作时，Express 说是未定义的错误。

```
module.exports = function(req, res, next){
    res.title = 'Express';
    next();
} 
```

这显然是一个微不足道的例子，但这也是我试图弄清楚的事情，因为可能会有一段时间我想在每条路线之后将东西注入响应的模型中。我只是不知道该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:35:34.763

您必须使用默认助手。阅读[文档](http://expressjs.com/guide.html#app.helpers%28%29)。这是一个简单的片段：

```
app.helpers({
    title: 'Express'
});
/* Now JADE sees your variable title
   without explicitly defining it
   in every view. */ 
```

还可以查看文档中的*动态助手*。这些可以链接到`req`变量`res`（普通助手不依赖于请求/响应）。

# php - 分隔符可选时如何将字符串解析为多维数组

> ID：11229723
> 
> 赞同：0
> 
> 时间：2012-06-27T15:24:39.863
> 
> 标签：php, string, parsing, multidimensional-array

我有一个字符串 ($c)，其中包含一个以逗号分隔的设置列表。某些设置是独立的，而其他设置需要由等号分隔的子设置。

例子：

```
$c = "title,author,tax=taxonomy_A,tax=taxonomy_B,date"; 
```

我需要将此字符串解析为一个多维数组（$columns），其输出如下：

```
$columns = array(
    [0] => array( 'title', '' ),
    [1] => array( 'author', '' ),
    [2] => array( 'tax', 'taxonomy_A' ),
    [3] => array( 'tax', 'taxonomy_B' ),
    [4] => array( 'date', '' )
) 
```

我试过这个：

```
 $c = "title,author,tax=taxonomy_A,tax=taxonomy_B,meta=custom_field_key";
    $c = explode( ',', $c );
    $columns = array( explode( '=', $c ) ); 
```

但这只是返回：

```
$columns = array(
    [0] => array( 'Array' )
) 
```

我在这里想念什么？是否应该用不同的功能替换第二次爆炸？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:36:47.013

```
foreach(explode(',', "title,author,tax=taxonomy_A,tax=taxonomy_B,date") as $item)
        $items[] = array_pad(explode('=', $item), 2, ''); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:29:55.623

您需要在第一次爆炸后循环执行第二次：

```
$c = "title,author,tax=taxonomy_A,tax=taxonomy_B,meta=custom_field_key";
$arr = explode( ',', $c );

$result = array();
foreach($arr as $a) {
    array_push($result, explode('=', $a));
}

print_r($result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:33:04.490

在您的代码中，您不会对数组的每个元素应用第二次爆炸，而是对整个数组对象应用一次。这会导致数组转换为字符串“Array”，然后运行该字符串`explode()`并生成您的输出。

相反，您可以使用`array_map()`（[PHP 文档](http://www.php.net/manual/en/function.array-map.php)）：

```
function filterArr( $value ) {
   return explode( '=', $value )
}

$c = "title,author,tax=taxonomy_A,tax=taxonomy_B,meta=custom_field_key";
$c = explode( ',', $c );
$c = array_map( "filterArr", $c ); 
```

# php - PHP中的自然语言生成

> ID：11229732
> 
> 赞同：5
> 
> 时间：2012-06-27T15:24:59.667
> 
> 标签：php, nlp

我昨晚醒来时脑子里有一个想法：PHP 可以用来生成听起来自然的随机单词吗？（就像 Lorem ipsum 的诗句）。

1.  单字母单词：'a,e,i,o,u'
2.  双字母词：元音和辅音的任意组合。
3.  我认为最大字长是六个字母。

目的是用它而不是“Lorem ipsum”来填充网站模板上的空间，或者为某些 PHP 脚本发送测试电子邮件以确保 mail() 正常工作。

但是我对它如何工作的想法是 PHP 会生成随机长度的单词，每个单词 1-6 个字母，并带有一些“不要这样做”规则，例如“没有两个单字母单词彼此相邻”或“没有连续三个元音”或“连续没有三个辅音”，并在句子的 4 到 8 个单词后自动添加标点符号和大写。

这有可能吗？如果有，我可以实现任何预先存在的类或函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:44:26.367

您可以采用上下文无关的语法方法：[http ://en.wikipedia.org/wiki/Context-free_grammar](http://en.wikipedia.org/wiki/Context-free_grammar)

```
<word> := <vowel> | <consonant><remaining word following consonant> | <vowel><remaining word following vowel>
<vowel> := a|e|i|o|u
<consonant> := b|c|d|f|g|...
<word following vowel> := <consonant><remaining word following consonant>
...and so on 
```

用任何程序语言（包括 C 和 PHP）实现该语法，然后开始根据语法生成单词。

我不知道任何通用的 PHP 解析框架，但您可以查看编写它们的[最佳实践：编写编程语言解析器的最佳实践](https://stackoverflow.com/questions/570144/best-practices-for-writing-a-parser)

# android - 禁用 AsyncTask，使用自定义 AsyncTask

> ID：11229734
> 
> 赞同：1
> 
> 时间：2012-06-27T15:25:03.410
> 
> 标签：android, android-asynctask, class-visibility

我有以下实现`AsyncTask`，允许多个`AsyncTask`s 同时运行：

```
public abstract class MyAsyncTask<Params, Progress, Result> extends AsyncTask<Params, Progress, Result> {

    public AsyncTask<Params, Progress, Result> executeCompat(Params... params) {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
            return executeOnExecutor(THREAD_POOL_EXECUTOR, params);
        } else {
            return execute(params);
        }
    }
} 
```

现在为避免混淆和意外使用 normal `AsyncTask`，我想阻止从我的代码访问：

*   类`AsyncTask`，只`MyAsyncTask`应该使用。
*   中的`execute()`函数`MyAsyncTask`。

是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T22:22:44.667

我这样做的想法会有点不同。您可以创建一个将要使用`AsyncTask`的参数作为参数的方法，而不是扩展类。`AsyncTask`这是一个例子：

```
public void executeAsyncTask(AsyncTask asyncTask) {

   if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
        asyncTask.executeOnExecutor(THREAD_POOL_EXECUTOR, params);
    } else {
        asyncTask.execute(params);
    }
} 
```

有了这个，您只需要实例化您想要使用的 AsyncTask 而不必担心您提到的问题，因为您将扩展`Android's` `AsyncTask`类并以您想要的方式覆盖该`execute`方法。因此，假设您已经定义了一个`AsyncTask`命名`customAsyncTask`，只需调用即可执行它您可以在类`executeAsyncTask(new customAsyncTask(your_params));`中定义上述方法（也可以创建该方法）以便于访问。`static``static`

希望有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:46:28.900

不要导入`AsyncTask`，只导入你的`MyAsyncTask`类。这样，您的班级是唯一可用的选择。

我想您可以覆盖主文件中的 AsyncTask 方法。但是，您的 MyAsyncTask 必须有一个新的类文件，否则它不会正确继承它。

# python - 在python的线程中显示一个对话框

> ID：11229737
> 
> 赞同：0
> 
> 时间：2012-06-27T15:25:17.467
> 
> 标签：python, multithreading, dialog, gtk, pygtk

我试图在一个线程中显示我的加载器对话框，因为当我启动文件的上传系统时，在处理完成之前我看不到窗口。

我试过这样的事情：

```
thread.start_new_thread(self.display_loader(),(self)) 
```

但它没有用。

有一种特殊的方法可以在线程中运行新窗口吗？

一切都用 Python 和 PyGtk 完成

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:48:54.357

当您说`self.display_thread()`时，它实际上会在那里*调用*该`display_thread`函数，并将其返回值作为第一个参数传递给`thread.start_new_thread`. 这可能不是你想要的。

也就是说，我认为你最好反过来做；让主线程拥有 UI，并在线程中执行加载。

请记住，GTK+ 不是非常线程安全的，最好从*单个*线程中完成与 GTK+ 的*所有*交互。

 ***更新**：实际上，上述内容可能过于简单化了，这是我所理解的“常识”（我使用 GTK+ 已经有 15 年了，但很少使用线程）。[这篇文章](http://blogs.operationaldynamics.com/andrew/software/gnome-desktop/gtk-thread-awareness)以更宽容的方式重新陈述了它，但不确定在这种情况下它是否真的让生活变得更轻松。为了完整起见，我想提一下。*

# python - Python多处理速度

> ID：11229739
> 
> 赞同：6
> 
> 时间：2012-06-27T15:25:21.073
> 
> 标签：python, multiprocessing

我写了这段代码来测试我的计算机上的 Python 的多处理：

```
from multiprocessing import Pool

var = range(5000000)
def test_func(i):
    return i+1

if __name__ == '__main__':
    p = Pool()
    var = p.map(test_func, var) 
```

我使用 Unix 的 time 命令对此进行计时，结果是：

```
real 0m2.914s
user 0m4.705s
sys  0m1.406s 
```

然后，使用相同的`var`，`test_func()`我计时：

```
var = map(test_func, var) 
```

结果是

```
real 0m1.785s
user 0m1.548s
sys  0m0.214s 
```

多处理代码不应该比普通的旧代码快得多`map`吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T15:28:14.023

为什么应该。

在 map 函数中，您只是按顺序调用该函数。

多处理池创建一组工作人员，您的任务将映射到这些工作人员。它正在协调多个工作进程来运行这些功能。

尝试在你的函数中做一些重要的工作，然后给它们计时，看看多处理是否能帮助你更快地计算。

您必须了解使用多处理会产生开销。只有当计算工作量明显大于这些开销时，您才会看到它的好处。

请参阅 Hellmann 出色介绍中的最后一个示例：http: [//www.doughellmann.com/PyMOTW/multiprocessing/communication.html](http://www.doughellmann.com/PyMOTW/multiprocessing/communication.html)

```
pool_size = multiprocessing.cpu_count() * 2
pool = multiprocessing.Pool(processes=pool_size,
                            initializer=start_process,
                            maxtasksperchild=2,
                            )
pool_outputs = pool.map(do_calculation, inputs) 
```

您可以根据拥有的核心创建池。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T15:38:29.017

使用并行化存在开销。只有当每个工作单元花费足够长的时间来补偿开销时，才会有好处。

此外，如果您的机器上只有一个 CPU（或 CPU 线程），则根本没有使用并行化的意义。如果您至少拥有一台超线程机器或至少两个 CPU 内核，您只会看到收益。

在您的情况下，简单的加法操作并不能补偿该开销。

尝试一些更昂贵的东西，例如：

```
from multiprocessing import Pool
import math

def test_func(i):
    j = 0
    for x in xrange(1000000):
        j += math.atan2(i, i)
    return j

if __name__ == '__main__':
    var = range(500)
    p = Pool()
    var = p.map(test_func, var) 
```

# php - 使用 JQUERY 从 PHP 多维数组中检索数据

> ID：11229748
> 
> 赞同：0
> 
> 时间：2012-06-27T15:25:55.830
> 
> 标签：php, multidimensional-array

我在 PHP 页面中有一个看起来像这样的数组：

```
$page["1"] = array("element1","element2","element3","element4");
$page["2"] = array("element1","element2","element3","element4");
$page["3"] = array("element1","element2","element3","element4"); 
```

我需要在 JAVASCRIPT 文件 (JQUERY) 中从该数组中检索一些数据。

如何导入例如 elements4 `$page[1][3],$page[2][3],$page[3][3]`？

我在这里看到了很多使用 JSON 的示例，但不像这个……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T04:57:04.853

可能这可以帮助你（文件名：getdata.php）：

```
<?
if($_GET['ajax']==1){
$page = array(
                   array("element1","element2","element3","element4"),
                   array("element1","element2","element3","element4"),
                   array("element1","element2","element3","element4"),
                   );

echo json_encode($page);
}else{
?>
<html>
<head>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
 <button class="getdata" >Get Data</button><div class="jsdata"></div>
</body>
  <script>
$('.getdata').click(function(){

    $.ajax({
        type:"POST",
        url:"getdata.php?ajax=1",
        success:function(data){
            var res = eval("("+data+")");
            $('.jsdata').html("$page[1][3],$page[2][3],$page[3][3] respectively:"+res[0][3]+","+res[1][3]+","+res[2][3]);
        }
    })
 });
  </script>
</html>
<? } ?> 
```

# perl - Perl：为变量/函数设置多个包名称？

> ID：11229750
> 
> 赞同：1
> 
> 时间：2012-06-27T15:26:24.553
> 
> 标签：perl, namespaces, package

首先，我想说这不是设计问题，而是合规问题。我知道当前设置存在问题。

在一个模块中，有一些以服务器命名的包，这些包具有许多与该服务器相关的相同变量/函数。看起来这是这样设置的，以便您可以执行以下操作：

*   `PRODUCTION_SERVER_NAME::printer()`或者
    `TEST_SERVER_NAME::printer()`

也许更好的设计可能是这样的：

*   `CENTRAL_PACKAGE_NAME::printer('production')`或者`CENTRAL_PACKAGE_NAME::printer('test')`

无论如何，似乎服务器名称已更改，因此我不想使用实际的服务器名称，而是将包重命名为`PRODUCTION`或`TEST`，而不更改仍然引用的其他代码`PRODUCTION_SERVER_NAME`。

就像是：

```
package PRODUCTION, PRODUCTION_SERVER_NAME;  # pseudo code 
```

我猜某种 glob/import 可能会起作用，但想知道是否已经有一些类似的东西。我也意识到饱和命名空间并不是一个好习惯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T15:42:37.273

我不会就设计或可能涉及更改客户端代码的任何内容提供任何评论。`MyTest.pm`可以使用`MyTest::`或访问函数`MyExam::`。但是，您不能使用`use MyExam`，因为物理文件不存在。你可以做一些聪明的`@INC`把戏，但是当我试图变得聪明时，我的程序总是崩溃和烧毁。

### 我的测试.pm

```
package MyTest;

sub hello { 'Hello' }
sub twoplustwo { 4 }

for my $sub (qw( hello twoplustwo)) {
    no strict 'refs';
    *{"MyExam::$sub"} = *{"MyTest::$sub"};
}

1; 
```

### 测试.pl

```
#!/usr/bin/env perl

use strict; use warnings;
use feature 'say';

use MyTest;

say MyExam::hello();
say MyExam::twoplustwo(); 
```

输出：

```
你好
4
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T15:34:49.067

你考虑过使用[`aliased`](http://search.cpan.org/perldoc/aliased)吗？听起来它可以为你工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T16:30:59.153

尝试[`Exporter::Auto`](http://metacpan.org/module/Exporter%3a%3aAuto)：

```
package Foo;

use Exporter::Auto;

sub foo {
    print('foo');
}

package Bar;

use Foo;

package main;

Foo::foo();
Bar::foo(); 
```

# java - 如何在 Java 中分别打印证书的公钥长度和模数

> ID：11229752
> 
> 赞同：0
> 
> 时间：2012-06-27T15:26:27.117
> 
> 标签：java, cryptography, public-key-encryption

`getPublicKey()`我在该类下找到了一个调用方法`java.security.cert.Certificate`，但是该方法将长度，模数全部作为`PublicKey`对象返回一个值。有没有办法单独获取这些信息？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:58:27.350

如果您正在处理基于 RSA 的公钥，您收到的 PublicKey 对象是一个[RSAPublicKey](http://docs.oracle.com/javase/6/docs/api/java/security/interfaces/RSAPublicKey.html)实例。

因此，您可以将其转换为 RSAPublicKey，然后使用它的方法`getPublicExponent()`和`getModulus()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:34:56.250

如果您在此处（[http://docs.oracle.com/javase/1.5.0/docs/api/java/security/cert/package-tree.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/security/cert/package-tree.html)）查看`java.security.cert.*`包的文档，您应该找到您正在实例化的对象。如果您点击该对象的链接，您将找到其所有可用的方法。可能有返回这些值的单独方法，但您必须检查。

# c# - 从 c# 客户端调用 ac# wcf webservice

> ID：11229753
> 
> 赞同：1
> 
> 时间：2012-06-27T15:26:35.267
> 
> 标签：c#, wcf, parallel-processing, httpwebrequest

我有 ac# wcf web 服务和 ac# 客户端，它们调用运行正常的 web 服务，并且有一个像下面这样的场景，我无法弄清楚如何去做。

情况就是这样，我在 c# 客户端中有 2 个方法，因为第一种方法会花费更多时间，而客户端不知道发生了什么，因为来自 wcf Web 服务的响应需要很长时间，所以我们实现了第二种方法，它给出了状态第一个方法调用的时间（说第一个方法总共有 10 个任务，当前正在执行 1 个或 2 个或 3 个等）。现在我不知道调用如何转到第二种方法，因为第一种方法尚未完成，并且两种方法都必须在同一个客户端中。任何人都可以帮助解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:34:08.493

解决此类问题的最佳方法是将任务拆分为多个不同的 WCF 方法，链接调用。例子：

而不是这样做（只是概念证明）：

```
serviceClient = new MyWCFClient();
serviceClient.TaskThatTakesForeverCompleted += (s,e) => { /*I'm done !*/ };
serviceClient.TaskThatTakesForeverAsync(); 
```

你最终会这样做：

```
serviceClient = new MyWCFClient();
serviceClient.FirstTaskCompleted += (s,e) => { /*first task done!*/ serviceClient.SecondTaskAsync(); };
serviceClient.SecondTaskCompleted += (s,e) => { /*and so on... */ };
...
serviceClient.FirstTaskAsync(); 
```

在服务器端，您将像这样实现它：

```
[OperationContract]
public <return type> FirstTask() { /* code */}
[OperationContract]
public <return type> SecondTask() { /* more code */ } 
```

当然，这可能不适用于您的情况，但是*可以*以这种方式拆分很长的任务。

**警告**：这种实现绝对*不是*最佳实践，因为您会发现自己有一堆必须以固定顺序调用的方法（FirstTask 必须是第一个，然后是 SecondTask，依此类推）但是在最后它将处理知道服务在做什么的问题。

这真的比理解更难解释，所需要的只是一点点摆弄它是一个非常简单的逻辑。

*注意*：如果您没有异步调用，请以这种方式启用它们：

*   右键单击服务引用
*   “配置服务参考”
*   选中“生成异步操作”，不选中“生成消息合同”，其他一切保持原样
*   现在您可以随意使用异步调用了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:33:50.897

如果我理解正确...您需要实现**异步调用**。默认情况下，WCF 中的所有调用都是同步的。

您现在拥有的是同步调用。：

1.  Method1 (Client) 调用 Method2 (Server) 来完成任务。
2.  Method1 等待很长时间，直到 Method2 完成
3.  方法 1 从方法 2 接收一个真值（或其他）
4.  方法1可以继续做事。

你需要的是：

1.  Method1（客户端）调用 Method2（服务器）
2.  方法2

    2.1 验证请求格式正确

    2.2 创建一个带工作进程的线程

    2.3 返回 true （这意味着好的，我已将您的请求排队）

    2.4 Method1 继续做它的事情。

然后你有两个选择：

> **3A。**当 Method2 完成时，它会调用 Client 中的另一个方法来报告它已经完成（在 Client 中说方法 3）
> 
> **3B。**Method1 查询服务器中的另一个方法（例如服务器中的 Method4）以每隔 x 秒查看任务的进度并将其显示在屏幕上或执行任何它想要的操作，直到完成。

您可以查看此[MSDN 链接](http://msdn.microsoft.com/en-us/library/ms731177.aspx)，了解如何在 WCF 中实现异步方法。

# r - 在 R 线性模型中，仅获取交互系数的 p 值

> ID：11229754
> 
> 赞同：10
> 
> 时间：2012-06-27T15:26:35.757
> 
> 标签：r, lm

如果我在 R 中有一个线性模型的汇总表，我怎样才能获得与交互估计或组截距等相关的 p 值，而无需计算行数？

例如，对于诸如连续和分类的模型`lm(y ~ x + group)`，`x`对象`group`的汇总表`lm`具有以下估计值：

1.  拦截
2.  x，所有组的斜率
3.  5 组内与整体截距的差异
4.  5 组内与整体斜率的差异。

我想找到一种方法将这些中的每一个作为一组 p 值，即使组数或模型公式发生变化。也许有信息汇总表以某种方式用于将行组合在一起？

以下是具有两个不同模型的示例数据集。第一个模型有四组不同的 p 值，我可能想分别获得，而第二个模型只有两组 p 值。

```
x <- 1:100
groupA <- .5*x + 10 + rnorm(length(x), 0, 1)
groupB <- .5*x + 20 + rnorm(length(x), 0, 1)
groupC <- .5*x + 30 + rnorm(length(x), 0, 1)
groupD <- .5*x + 40 + rnorm(length(x), 0, 1)
groupE <- .5*x + 50 + rnorm(length(x), 0, 1)
groupF <- .5*x + 60 + rnorm(length(x), 0, 1)

myData <- data.frame(x = x,
    y = c(groupA, groupB, groupC, groupD, groupE, groupF),
    group = rep(c("A","B","C","D","E","F"), each = length(x))
)

myMod1 <- lm(y ~ x + group + x:group, data = myData)
myMod2 <- lm(y ~ group + x:group - 1, data = myData)
summary(myMod1)
summary(myMod2) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-27T17:25:29.207

您可以通过 访问所有系数及其相关统计数据`summary()$coefficients`，如下所示：

```
> summary(myMod1)$coefficients
                 Estimate  Std. Error      t value      Pr(>|t|)
(Intercept)  9.8598180335 0.207551769  47.50534335 1.882690e-203
x            0.5013049448 0.003568152 140.49427911  0.000000e+00
groupB       9.9833257879 0.293522526  34.01212819 5.343527e-141
groupC      20.0988336744 0.293522526  68.47458673 2.308586e-282
groupD      30.0671851583 0.293522526 102.43569906  0.000000e+00
groupE      39.8366758058 0.293522526 135.71931370  0.000000e+00
groupF      50.4780382104 0.293522526 171.97330259  0.000000e+00
x:groupB    -0.0001115097 0.005046129  -0.02209807  9.823772e-01
x:groupC     0.0004144536 0.005046129   0.08213297  9.345689e-01
x:groupD     0.0022577223 0.005046129   0.44741668  6.547390e-01
x:groupE     0.0024544207 0.005046129   0.48639675  6.268671e-01
x:groupF    -0.0052089956 0.005046129  -1.03227556  3.023674e-01 
```

其中，您只需要 p 值，即第 4 列：

```
> summary(myMod1)$coefficients[,4]
  (Intercept)             x        groupB        groupC        groupD        groupE        groupF      x:groupB      x:groupC 
1.882690e-203  0.000000e+00 5.343527e-141 2.308586e-282  0.000000e+00  0.000000e+00  0.000000e+00  9.823772e-01  9.345689e-01 
     x:groupD      x:groupE      x:groupF 
 6.547390e-01  6.268671e-01  3.023674e-01 
```

最后，您只需要特定系数的 p 值，无论是截距还是交互项。一种方法是通过使用作为索引返回的逻辑向量将系数名称 ( `names(summary(myMod1)$coefficients[,4])`) 与 RegEx匹配：`grepl()``grepl`

```
> # all group dummies
> summary(myMod1)$coefficients[grepl('^group[A-F]',names(summary(myMod1)$coefficients[,4])),4]
       groupB        groupC        groupD        groupE        groupF 
5.343527e-141 2.308586e-282  0.000000e+00  0.000000e+00  0.000000e+00 
> # all interaction terms
> summary(myMod1)$coefficients[grepl('^x:group[A-F]',names(summary(myMod1)$coefficients[,4])),4]
 x:groupB  x:groupC  x:groupD  x:groupE  x:groupF 
0.9823772 0.9345689 0.6547390 0.6268671 0.3023674 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-06-01T20:28:23.153

现在有[broom](http://cran.r-project.org/web/packages/broom/broom.pdf)包来处理统计函数的输出。在这种情况下，使用它的`tidy()`功能：

```
library(broom)
tidy(myMod1)

          term      estimate  std.error   statistic       p.value
1  (Intercept) 10.0379389850 0.19497112  51.4842342 5.143448e-220
2            x  0.5009946732 0.00335187 149.4672019  0.000000e+00
3       groupB  9.8949134549 0.27573081  35.8861368 3.002513e-150
4       groupC 19.8437942091 0.27573081  71.9679981 1.021613e-293
5       groupD 29.9055587100 0.27573081 108.4592579  0.000000e+00
6       groupE 39.7258414666 0.27573081 144.0747296  0.000000e+00
7       groupF 50.1210013973 0.27573081 181.7751231  0.000000e+00
8     x:groupB -0.0005319302 0.00474026  -0.1122154  9.106909e-01
9     x:groupC -0.0010145553 0.00474026  -0.2140294  8.305983e-01
10    x:groupD -0.0025544113 0.00474026  -0.5388757  5.901766e-01
11    x:groupE  0.0045780202 0.00474026   0.9657740  3.345543e-01
12    x:groupF -0.0058636354 0.00474026  -1.2369859  2.165861e-01 
```

结果是一个 data.frame，因此您可以轻松过滤交互项（名称中有冒号）：

```
pvals <- tidy(myMod1)[, c(1,5)]
pvals[grepl(":", pvals$term), ]

       term   p.value
8  x:groupB 0.9106909
9  x:groupC 0.8305983
10 x:groupD 0.5901766
11 x:groupE 0.3345543
12 x:groupF 0.2165861 
```

`broom`与[dplyr](http://cran.rstudio.com/web/packages/dplyr/vignettes/introduction.html)包配合得很好；例如，提取非交互组系数：

```
library(dplyr)
tidy(myMod1) %>%
  select(term, p.value) %>%
  filter(! grepl(":", term), term != "(Intercept)", term != "x")

    term       p.value
1 groupB 3.002513e-150
2 groupC 1.021613e-293
3 groupD  0.000000e+00
4 groupE  0.000000e+00
5 groupF  0.000000e+00 
```

# internet-explorer - Struts2 StreamResult 在 IE8 中不起作用

> ID：11229755
> 
> 赞同：0
> 
> 时间：2012-06-27T15:26:37.457
> 
> 标签：internet-explorer, struts2

我正在尝试允许下载位于文件系统上的 PDF。我有一个扩展 ActionSupport 的动作类 DownloadFileAction，它基本上执行以下操作：

```
public String execute() {
  // lookup file
  inputStream = new FileInputStream(file);
  return SUCCESS;
}

public String getContentType() {
  return "application/pdf";
}

public String getContentDisposition() {
  return "attachment;filename=\"filename.pdf\"";
} 
```

我的动作映射定义如您所料：

```
<action name="downloadFile" class="com.foo.DownloadFileAction">
  <result name="success" type="stream">
    <param name="allowCaching">false</param>
  </result>
</action> 
```

这在 Firefox 和 IE9 中运行良好，但在 IE8 中由于未知原因无法运行。有什么想法吗？

* * *

**更新**：使用 Live HTTP Headers 插件，我在 Firefox 中下载时看到了这一点。我认为这在 IE8 中是相同的：

```
 http://fmpdmb:7001/shopping/search/printItemDetail.action?upid=41271812&OeT2rTJY=LIJ8HDLqT7igptDozBz5ocIg

 GET /shopping/search/printItemDetail.action?upid=41271812&OeT2rTJY=LIJ8HDLqT7igptDozBz5ocIg
 HTTP/1.1 
 Host: fmpdmb:7001 
 User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:13.0) Gecko/20100101 Firefox/13.0.1 
 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
 Accept-Language: en-us,en;q=0.5 
 Accept-Encoding: gzip, deflate
 Connection: keep-alive 
 Referer: http://fmpdmb:7001/shopping/search/searchResultItemDetail.action?upid=41271812
 Cookie: ADMINCONSOLESESSION=vQpcPk2N58P1QZtLrPVHyWjvS9pDmT2b60pdrpqHrBHQhjGBLmhV!-1356202776;
 EMALL-SESSION=r7FbPrmCQ1DVQt1Wkf214nznpT61L03JHhN1d7Z8TZzH5tzCXvdm!1350268378

 HTTP/1.1 200 OK
 Cache-Control: no-cache 
 Date: Wed, 27 Jun 2012 15:48:00 GMT 
 Pragma: nocache, no-cache 
 Transfer-Encoding: chunked
 Content-Type: application/pdf 
 Expires: 0 
 Content-Disposition: inline;filename="document.pdf" 
 X-Powered-By: Servlet/2.5 JSP/2.1 
```

* * *

**更新**：更多信息。我认为这可能与应用程序在 https 下运行的事实有关。这有帮助吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-27T19:50:26.300

动作应该是这样的：

```
<action name="download" class="com.project.DownloadAction">
    <result name="success" type="stream">
      <param name="contentType">application/pdf</param>
      <param name="inputName">inputStream</param>
      <param name="contentDisposition">attachment;filename="download.pdf"</param>
      <param name="bufferSize">1024</param>
    </result>
   </action> 
```

**更新**

查看这篇文章：[Internet Explorer 无法下载 https://something](http://blogs.msdn.com/b/ieinternals/archive/2009/10/02/internet-explorer-cannot-download-over-https-when-no-cache.aspx)。如果您使用 https 并阻止缓存，下载将失败。

尝试定义这样的内容将帮助您防止错误：

```
 Cache-Control: private, max-age=15 
```

# c# - C# 将要由线程池处理的依赖任务排队

> ID：11229758
> 
> 赞同：8
> 
> 时间：2012-06-27T15:26:45.127
> 
> 标签：c#, .net, c#-4.0, .net-4.0

我想在需要按顺序（在每个流中）处理的多个流中对相关任务进行排队。这些流可以并行处理。

具体来说，假设我需要两个队列，并且我希望每个队列中的任务按顺序处理。以下是用于说明所需行为的示例伪代码：

```
Queue1_WorkItem wi1a=...;

enqueue wi1a;

... time passes ...

Queue1_WorkItem wi1b=...;

enqueue wi1b; // This must be processed after processing of item wi1a is complete

... time passes ...

Queue2_WorkItem wi2a=...;

enqueue wi2a; // This can be processed concurrently with the wi1a/wi1b

... time passes ...

Queue1_WorkItem wi1c=...;

enqueue wi1c; // This must be processed after processing of item wi1b is complete 
```

这是一个带有箭头的图表，说明了工作项之间的依赖关系：

![在此处输入图像描述](../Images/f9e200085d0f82f02c5f628579f9c08a.png)

问题是如何使用 C# 4.0/.NET 4.0 做到这一点？现在我有两个工作线程，每个队列一个`BlockingCollection<>`，每个队列使用一个。我想改为利用 .NET 线程池并让工作线程同时（跨流）处理项目，但在流中串行处理。换句话说，我希望能够指出例如 wi1b 取决于 wi1a 的完成，而不必跟踪完成并记住 wi1a，当 wi1b 到达时。换句话说，我只想说，“我想为 queue1 提交一个工作项，该工作项将与我已经为 queue1 提交的其他项串行处理，但可能与提交到其他队列的工作项并行处理”。

我希望这个描述是有道理的。如果没有，请随时在评论中提问，我会相应地更新这个问题。

谢谢阅读。

**更新：**

总结到目前为止“有缺陷”的解决方案，以下是我无法使用的答案部分的解决方案以及我无法使用它们的原因：

TPL 任务需要为`ContinueWith()`. 我不想在提交新任务时保留每个队列的先前任务的知识。

TDF ActionBlocks 看起来很有希望，但似乎发布到 ActionBlock 的项目是并行处理的。我需要对特定队列的项目进行连续处理。

**更新 2：**

回复：动作块

似乎将`MaxDegreeOfParallelism`选项设置为 one 会阻止并行处理提交给单个`ActionBlock`. 因此，每个队列似乎`ActionBlock`解决了我的问题，唯一的缺点是这需要安装和部署 Microsoft 的 TDF 库，我希望有一个纯 .NET 4.0 解决方案。到目前为止，这是候选人接受的答案，除非有人能想出一种方法来使用纯 .NET 4.0 解决方案来做到这一点，该解决方案不会退化为每个队列的工作线程（我已经在使用）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T15:48:10.630

我了解您有很多队列并且不想占用线程。每个队列可以有一个[ActionBlock 。](http://msdn.microsoft.com/en-us/library/hh194684%28VS.110%29.aspx)ActionBlock 自动完成您需要的大部分工作：它按顺序处理工作项，并且仅在工作未决时启动任务。当没有工作挂起时，没有任务/线程被阻塞。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T15:32:47.187

最好的方法是使用`Task Parallel Library (TPL)`and `Continuations`。延续不仅允许您创建任务流，还可以处理您的异常。这是对 TPL的一个[很好的介绍。](http://www.codeproject.com/Articles/152765/Task-Parallel-Library-1-of-n)但是给你一些想法...

您可以使用启动 TPL 任务

```
Task task = Task.Factory.StartNew(() => 
{
    // Do some work here...
}); 
```

现在要在前面的任务完成（错误或成功）时开始第二个任务，您可以使用该`ContinueWith`方法

```
Task task1 = Task.Factory.StartNew(() => Console.WriteLine("Antecedant Task"));
Task task2 = task1.ContinueWith(antTask => Console.WriteLine("Continuation...")); 
```

因此，一旦`task1`完成、失败或被取消，就会`task2`“启动”并开始运行。请注意，如果`task1`在到达第二行代码之前已经完成，`task2`将被安排立即执行。`antTask`传递给第二个 lambda的参数是对前面任务的引用。有关更详细的示例，请参阅[此链接...](http://www.albahari.com/threading/)

您还可以传递先前任务的延续结果

```
Task.Factory.StartNew<int>(() => 1)
    .ContinueWith(antTask => antTask.Result * 4)
    .ContinueWith(antTask => antTask.Result * 4)
    .ContinueWith(antTask =>Console.WriteLine(antTask.Result * 4)); // Prints 64. 
```

笔记。请务必阅读提供的第一个链接中的异常处理，因为这可能会使新手误入 TPL。

最后一件要特别关注的事情是子任务。子任务是那些被创建为`AttachedToParent`. 在这种情况下，直到所有子任务都完成后，延续才会运行

```
TaskCreationOptions atp = TaskCreationOptions.AttachedToParent;
Task.Factory.StartNew(() =>
{
    Task.Factory.StartNew(() => { SomeMethod() }, atp);
    Task.Factory.StartNew(() => { SomeOtherMethod() }, atp); 
}).ContinueWith( cont => { Console.WriteLine("Finished!") }); 
```

我希望这有帮助。

*编辑：你有没有[`ConcurrentCollections`](http://msdn.microsoft.com/en-us/library/system.collections.concurrent.aspx)特别看过`BlockngCollection<T>`. 所以在你的情况下，你可能会使用类似的东西*

```
public class TaskQueue : IDisposable
{
    BlockingCollection<Action> taskX = new BlockingCollection<Action>();

    public TaskQueue(int taskCount)
    {
        // Create and start new Task for each consumer.
        for (int i = 0; i < taskCount; i++)
            Task.Factory.StartNew(Consumer);  
    }

    public void Dispose() { taskX.CompleteAdding(); }

    public void EnqueueTask (Action action) { taskX.Add(Action); }

    void Consumer()
    {
        // This seq. that we are enumerating will BLOCK when no elements
        // are avalible and will end when CompleteAdding is called.
        foreach (Action action in taskX.GetConsumingEnumerable())
            action(); // Perform your task.
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T03:27:49.620

基于 TPL 的 .NET 4.0 解决方案是可能的，同时隐藏了它需要将父任务存储在某处的事实。例如：

```
class QueuePool
{
    private readonly Task[] _queues;

    public QueuePool(int queueCount)
    { _queues = new Task[queueCount]; }

    public void Enqueue(int queueIndex, Action action)
    {
        lock (_queues)
        {
           var parent = _queue[queueIndex];
           if (parent == null)
               _queues[queueIndex] = Task.Factory.StartNew(action);
           else
               _queues[queueIndex] = parent.ContinueWith(_ => action());
        }
    }
} 
```

这是对所有队列使用单个锁来说明这个想法。然而，在生产代码中，我会为每个队列使用一个锁来减少争用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T15:33:56.747

看起来您已经拥有的设计很好并且有效。您的工作线程（每个队列一个）是长时间运行的，因此如果您想改用任务，`TaskCreationOptions.LongRunning`请指定以便获得一个专用的工作线程。

但是这里实际上不需要使用 ThreadPool。它没有为长期工作提供很多好处。

# c - 为什么我在尝试将 'char (*c)[6]' 传递给期望 'const char (*c)[6]' 的函数时收到警告？

> ID：11229763
> 
> 赞同：3
> 
> 时间：2012-06-27T15:26:52.683
> 
> 标签：c, arrays, pointers, parameters, constants

我知道`char **`vs`const char **`的事情（如[c faq](http://c-faq.com/ansi/constmismatch.html)中所述），但我看不到任何使用指向数组的指针这样做会导致数组本身的某些内容被实际修改的情况。

我的代码：

```
void fun(const char (*p)[6])
{
    printf("%s", p[0]);
}

int main(int argc, char *argv[])
{
    char a[6] = "hello";
    char (*c)[6];

    c = &a;

    fun(c);
} 
```

使用 gcc 编译时给出以下输出：

```
test.c:17:9: warning: passing argument 1 of 'fun' from incompatible pointer type
test.c:5:10: note: expected 'const char (*)[6]' but argument is of type 'char (*)[6]' 
```

[这里](https://stackoverflow.com/questions/1340189/passing-a-constant-matrix)的问题在某种程度上是相关的，但到目前为止还没有答案。是否只是编译器偏执，摆脱警告的唯一方法是显式强制转换？还是真的有可能出问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T16:23:10.957

标准第 6.5.16.1 (1) 节涵盖了常量转换：

> *   两个操作数都是指向兼容类型的限定或非限定版本的指针，左边指向的类型具有右边指向的类型的所有限定符；

在这种情况下，它看起来像`T`，`char [6]`其余的要求显然成立，通过修改您的示例可以看出：

```
int main(int argc, char *argv[])
{
    typedef char c6[6];
    c6 a = "hello";
    const c6 *p = &a;
} 
```

然而事实并非如此！这与 6.7.3 (8) 相交：

> 如果数组类型的规范包括任何类型限定符，则元素类型是这样限定的，而不是数组类型。

所以`const c6 *`实际上命名了类型`const char (*)[6]`；也就是说，*指向 const char 的 array[6] 的*指针，而不是*指向 char 的 const array[6] 的指针*。

那么 LHS 指向 type `const char[6]`， RHS 指向 type `char[6]`，它们是不兼容的类型，简单赋值的要求不成立。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T17:29:34.040

这只是 C 语言规范的一个怪癖。再举一个例子，从 const 正确性的角度来看， `char **`to`const char *const *`转换也是安全的，但在 C 中是禁止的。

这种 const 正确性规则的怪癖在 C++ 语言中是“固定的”，但 C 在这方面继续坚持其原始规范。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-27T16:48:46.820

实际上原因非常相似（char ** vs. 数组指针）。

对于您要执行的操作，以下内容就足够了（并且有效）：

```
void fun(const char *p)
{
    printf("%s", p);
}

int main(int argc, char *argv[])
{
    char a[6] = "hello";
    char *c;

    c = a;

    fun(c);
} 
```

使用您正在尝试做的事情，可以按如下方式修改值，从而破坏目的（仅作为示例）：

```
void morefun(const char *p[6])
{
    char d;
    char *p1 = &d;
    p[1] = p1;
    *p1 = 'X';
    printf("\nThe char is %c\n", *p[1]);
}

int main(int argc, char *argv[])
{
    const char *d[6];

    morefun(d);
} 
```

# jsf-2 - JSF 初始化映射对象

> ID：11229765
> 
> 赞同：0
> 
> 时间：2012-06-27T15:27:02.497
> 
> 标签：jsf-2, map, managed-bean

我开始了我在 JSF 中的第一步。

我已经读过这个链接

```
http://docs.oracle.com/javaee/6/tutorial/doc/bnawq.html#bnaww 
```

关于地图初始化。

问题是，我想用文件中的值填充我的地图。

我怎样才能做到这一点？

我试过不使用 faces-config.xml 并在 bean 的构造函数中调用支持方法，但我的选择列表框没有填充。

我的豆类：

```
@ManagedBean
public class ADGroupListBean {

private static final String WITH_ACCESS = "D:\\workspace\\AccessControl\\permissions.txt";
private static final String WITHOUT_ACCESS = "D:\\workspace\\AccessControl\\noPermissions.txt";
private Map<String,String> withAccess, withoutAccess;

private LDAPQueries queries;

public ADGroupListBean(){

    withAccess = new LinkedHashMap<String, String>();
    withoutAccess = new LinkedHashMap<String, String>();

    queries = new LDAPQueries();

    initList(WITH_ACCESS, withAccess);
    initList(WITHOUT_ACCESS, withoutAccess);

}   

private void initList(String filename, Map<String,String> list) {

    File f = new File(filename);

    if ( !f.exists() && f.getAbsolutePath().equals(WITHOUT_ACCESS) )
    {
        queries.queryAllGroups(WITHOUT_ACCESS);
    }

    try 
    {   

        Scanner sc = new Scanner(f);

        while (sc.hasNext())
        {
            String group = sc.nextLine();
            list.put(group, group);
        }

    }catch (IOException e) {

        e.printStackTrace();
    }

}

//  public void populateList() {
//      
//      
//  }

public Map<String,String> getWithAccess() {

    return withAccess;
}

public Map<String,String> getWithoutAccess() {

    return withoutAccess;
}

public void setWithoutAccess(Map<String,String> withoutAccess) {

    this.withoutAccess = withoutAccess;
}

public void setwithAccess(Map<String,String> withAccess) {

    this.withAccess = withAccess;
}

public void test() {

    System.out.println("workssssssssssssssssss");
}
} 
```

至于我的 JSF 文件，是这样的：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html">
<h:head><title>Your Title Here</title>
</h:head>
<h:body>
<h1>Your Heading Here</h1>

<h:form>
    <h:selectOneMenu value="teste">
         <f:selectItem itemLabel="" itemValue="" />
        <f:selectItems value="#{ADGroupListBean.withoutAccess}" />
</h:selectOneMenu>
</h:form>

</h:body>
</html> 
```

我已经在测试应用程序中测试了 bean 的功能，一切正常。

所以我的猜测是bean没有实例化？

问候，努诺。

# php - 发布到数据库的 PHP 脚本不起作用

> ID：11229774
> 
> 赞同：-2
> 
> 时间：2012-06-27T15:27:35.953
> 
> 标签：php

我敢肯定这是非常基本的，但我是 php 新手。有人能告诉我为什么这段代码不会写入表格吗？我只是想让表单更新数据库中的表。一切正常，除了表中的数据没有被覆盖。任何帮助将不胜感激！谢谢。

```
<?php
$username="username";
$password="password";
$dbname="database";
$usertable="table";
$connect = @mysql_connect($hostname, $username, $password)or die
("cannot connect to db");
mysql_select_db($dbname);

$show=$_POST['show'];
$pro=$_POST['pro'];
$twmo=$_POST['twmo'];

mysql_query("INSERT INTO $usertable VALUES
('$show','pro','$twmo')" );

mysql_close($connect);
header("Location: http://www.myhomepage.com");

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:30:28.753

第一的，

*   **您的代码容易受到 SQL 注入的攻击。**
    恶意用户可以轻松清除您的整个表。
*   **你甚至不应该使用`mysql_*`！**
    这是不推荐使用和糟糕的风格！去寻找`mysqli`或 PDO 的教程，不要转发 2008 年的文章。

**关于实际问题**，请尝试自己调试。您没有检查您的任何查询是否成功。执行查询时，`mysql_query()`返回资源或`FALSE`失败。检查是否发生这种情况，这样您就可以找出错误发生的确切位置以及它正在使用什么`mysql_error()`。

如果您的表实际上被称为`table`，那么这就是问题所在。`table`是保留关键字。您可以通过用记号 ` 封装它来修复它，但实际上您应该只更改它的名称。拥有一个名为 table 的表根本没有用。称它为它包含的内容。

# watir-webdriver - chromedriver 在 Windows 7 上崩溃

> ID：11229778
> 
> 赞同：2
> 
> 时间：2012-06-27T15:27:55.163
> 
> 标签：watir-webdriver, selenium-chromedriver

问题：当我运行测试时，我在命令提示符中收到以下消息

```
Started ChromeDriver
port=9515
version=21.0.1180.4
log=C:\Users\jhomer\Desktop\Workspace\WebAutomationTesting\Tests\chromedriver.log 
```

然后 Chrome 启动，之后我收到一条 Windows 错误消息，指出 chromedriver 已停止工作。

附加信息：我最近刚从 mac (osx) 切换到 windows 7。我使用的是相同的 IDE (Aptana 3)，并且安装了相同的 gem：

```
addressable (2.2.8)
bigdecimal (1.1.0)
builder (3.0.0)
childprocess (0.3.2)
commonwatir (3.0.0)
ffi (1.0.11)
hoe (3.0.6)
io-console (0.3)
json (1.7.3, 1.5.4)
json_pure (1.7.3)
libwebsocket (0.1.3)
minitest (3.2.0, 3.1.0, 2.5.1
multi_json (1.3.6)
nokogiri (1.5.5 x86-mingw32)
rake (0.9.2.2)
rautomation (0.7.2)
rdoc (3.12, 3.9.4)
rubygems-update (1.8.24)
rubyzip (0.9.9)
s4t-utils (1.0.4)
selenium-webdriver (2.24.0)
user-choices (1.1.6.1)
watir (3.0.0)
watir-classic (3.0.0)
watir-webdriver (0.6.1)
win32-api (1.4.8 x86-mingw32)
win32-process (0.6.5)
windows-api (0.4.1)
windows-pr (1.2.1)
xml-simple (1.1.1) 
```

我已经运行了 gem update、gem pristine --all，但都没有帮助。

** 更新 **

测试“完成”后我收到的提示错误如下：

所以在我使用你建议的版本之前，我收到了这个错误：

```
Error:
test_UserRoles(UserRolesTest):
Errno::ECONNREFUSED: No connection could be made because the target machine actively refused it. - connect(2)
C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.24.0/lib/selenium/w ebdriver/remote/http/default.rb:76:in `response_for'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.24.0/lib/selenium/w ebdriver/remote/http/default.rb:38:in 'request'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.24.0/lib/selenium/w ebdriver/remote/http/common.rb:40:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.24.0/lib/selenium/w ebdriver/remote/bridge.rb:598:in 'raw_execute'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.24.0/lib/selenium/w ebdriver/remote/bridge.rb:576:in `execute'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.24.0/lib/selenium/w ebdriver/remote/bridge.rb:189:in 'quit'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.24.0/lib/selenium/w ebdriver/chrome/bridge.rb:48:in 'quit'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.24.0/lib/selenium/w ebdriver/common/driver.rb:166:in `quit'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-webdriver-0.6.1/lib/watir-webdrive r/browser.rb:87:in 'close'
UserRolesTest.rb:48:in 'teardown' 
```

让我知道您是否需要任何其他信息。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:55:49.027

我遇到了同样的问题，不得不将 chromedriver 降级到版本 20（5 月 23 日）。它现在在 Windows 7 x64 上对我来说很好。这是下载[链接](http://code.google.com/p/chromedriver/downloads/detail?name=chromedriver_win_20.0.1133.0.zip&can=2&q=)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T15:01:55.150

当在浏览器上调用 .close 方法时，chromedriver 的 windows 版本似乎崩溃了。这就是问题所在。完成测试后是否有另一种关闭浏览器的方法？

# python - 将文本和行添加到文件的开头（Python）

> ID：11229780
> 
> 赞同：2
> 
> 时间：2012-06-27T15:27:56.847
> 
> 标签：python

关于相关问题，我想知道如何在 Python 中将文本和/或行添加到文件的开头，因为它被建议是一种更简单的文本/文件操作语言。所以，虽然我问了前面关于 C++ 的链接问题，但谁能指出我如何用 Python 做到这一点？

引用链接（相关）问题：

> 我希望能够在文件的开头添加行。
> 
> 我正在编写的这个程序将从用户那里获取信息，并准备将其写入文件。那么，该文件将是一个已经生成的差异文件，并且添加到开头的是描述符和标签，使其与 Debian 的 DEP3 补丁标记系统兼容。

有人有任何建议或代码吗？

* * *

> 相关： [将文本和行添加到文件的开头 (C++)](https://stackoverflow.com/questions/11108238/adding-text-and-lines-to-the-beginning-of-a-file-c)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T15:58:55.427

最近有很多类似的文件I/O问题..

简而言之，您需要创建一个新文件

1.  首先，将新行写入文件
2.  从旧文件中读取行并将它们写入文件

**如果**您可以保证添加到开头的每个新行都比开头相应的每个原始行长，则可以就地执行：

```
f = open('file.txt','r+')
lines = f.readlines() # read old content
f.seek(0) # go back to the beginning of the file
f.write(new_content) # write new content at the beginning
for line in lines: # write old content after new
    f.write(line)
f.close() 
```

上面的示例在寻找文件开头的位置后将所有数据全部写入，因为文件的内容被新内容覆盖。

**否则**你需要写入一个新文件

```
f = open('file.txt','r')
newf = open('newfile.txt','w')
lines = f.readlines() # read old content
newf.write(new_content) # write new content at the beginning
for line in lines: # write old content after new
    newf.write(line)
newf.close()
f.close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:37:17.987

像这样的东西应该工作：

```
with open('new.txt', 'w') as new:
    with open('prefix.txt') as prefix:
        new.write(prefix.read())
    with open('old.txt') as old:
        new.write(old.read()) 
```

如果 old.txt 或 prefix.txt 包含二进制内容，您应该为它们各自的 open 调用添加一个 'rb' 参数，并为第一个 open() 调用添加一个 'b' 到 flags 参数。

# c# - 在自定义控件的属性上添加 BindableAttribute 的目的是什么？

> ID：11229783
> 
> 赞同：4
> 
> 时间：2012-06-27T15:28:02.660
> 
> 标签：c#, asp.net, vb.net, custom-controls

我已经看到 BindableAttribute 用于装饰自定义控件中的公共属性。

[MSDN](http://msdn.microsoft.com/en-us/library/ft8ts94a%28v=vs.90%29)简要提到它提供了在设计时控制绑定方向以及是否支持绑定的能力。

```
public class MyControl : Panel
{
    [Bindable(BindableSupport.No, BindingDirection.OneWay)]
    public string MyString { get; set; }
}

var myControl = new MyControl();
var myString = myControl.MyString; 
```

问题：

1) 我设置`BindableSupport`为否，但我仍然可以在标记 (.aspx) 中执行此操作。那有什么`BindableSupport`影响呢？它是否隐藏了工具箱中的属性？

```
<cc:MyControl runat="server" MyString="something" /> 
```

2）在自定义控件和ASP.NET的上下文中，单向绑定和双向绑定是如何工作的？

将不胜感激任何投入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:08:30.483

到目前为止我的发现：

1)`BindableSupport`与 ASP.NET 提供的数据绑定功能有关。例如`Page.DataBind()`, `<%# Bind("MyProperty") %>`,`<%# Eval ("MyProperty") %>`等等。+1 @walther 的回答。

2) ASP.NET 中的双向绑定是在回发时保留对数据绑定值的修改的能力。此[SO 线程](https://stackoverflow.com/questions/1778221/understanding-asp-net-eval-and-bind)提供了更多详细信息。`Bind`是双向的，`Eval`而是单向的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:53:39.477

我相信 MSDN 对此很清楚。在你看来它可能很简短，但它已经足够了。此属性用于 BINDING。将字符串分配给您的变量不被视为绑定。

这是例如绑定：

```
myGridView.DataSource = myList;
myGridView.DataBind(); 
```

这不是：

```
myGridView.ID = "blablabla"; 
```

请参阅此链接以获取更多信息，不要在此处找到复制现有学习资源的理由...

[http://msdn.microsoft.com/en-us/library/ms752347.aspx](http://msdn.microsoft.com/en-us/library/ms752347.aspx)

更新：

对于 asp.net，此链接可能更具说明性：

[http://www.asp.net/ajaxlibrary/HOW%20TO%20Create%20an%20Editable%20View%20with%20Two-Way%20Data%20Binding.ashx](http://www.asp.net/ajaxlibrary/HOW%20TO%20Create%20an%20Editable%20View%20with%20Two-Way%20Data%20Binding.ashx)

# c# - 字符串替换的正则表达式

> ID：11229784
> 
> 赞同：1
> 
> 时间：2012-06-27T15:28:02.747
> 
> 标签：c#, regex

我有大约 100 个文件需要替换：

1.  Eval("something") 与 Eval("something").ToEncodedString()
2.  Eval("something").ToString() 与 Eval("something").ToEncodedString()

我正在编写一个可以自动执行此操作的小型 C# 应用程序。但无法形成正则表达式。有人会帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:03:52.950

您可以使用此模式：`@"\bEval\(""(?<Value>.+?)""\)(?:\.ToString\(\))?"`

分解：

*   `\bEval`: 匹配单词边界以确保我们将“Eval”作为一个完整的单词而不是另一个单词的一部分进行匹配
*   `\(""`：文字左括号和双引号（双引号出现两次，因为这是使用逐字字符串文字时它们被转义的方式，即字符串前面的@符号）
*   `(?<Value>.+?)`：命名为“Value”的捕获组，它是任何字符的非贪婪匹配（将在双引号处停止）
*   `""\)`: 右双引号和右括号
*   `(?:\.ToString\(\))?`: 该`(?:...)`位是一个非捕获组，然后我们`.ToString()`用适当的转义字面匹配，最后`?`使这个组可选

替换模式是`@"Eval(""${Value}"").ToEncodedString()"`，很容易理解。重要的部分是命名的捕获组“值”是通过使用引用的`${Value}`。

示例代码：

```
string[] inputs = 
{
    @"Eval(""something"")",
    @"Eval(""hello"").ToString()"
};

string pattern = @"\bEval\(""(?<Value>.+?)""\)(?:\.ToString\(\))?";
string replacement = @"Eval(""${Value}"").ToEncodedString()";

foreach (var input in inputs)
{
    Console.WriteLine(Regex.Replace(input, pattern, replacement));
} 
```

# android - 如何强制应用默认字体？喜欢 Gmail 应用程序吗？

> ID：11229785
> 
> 赞同：3
> 
> 时间：2012-06-27T15:28:03.790
> 
> 标签：android, android-fonts

我想将 Android 的默认字体（ICS 中的 Roboto 和旧字体中的其他字体）强制到我的 android 应用程序中的所有 TextViews。

当用户从系统首选项更改它时，它不应更改。

这甚至可能吗？

我试图在应用程序的主题中将字体设置为正常。但这没有用。但是当我尝试 monospace 时，它​​起作用了。

我不想在我的包中包含任何字体文件。我已经看到 GMail 应用程序在 ICS 中执行此操作。他们是怎么做到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:33:09.387

Yoy 可以扩展 TextView 对象，并重写构造函数来强制字体类型：

```
 Typeface type = Typeface.createFromAsset(getAssets(),"fonts/Kokila.ttf"); 
    this.setTypeface(type); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T15:46:29.827

@Stefano Ortisi 提供的解决方案是绝对错误的。在应用程序中拥有自定义字体的唯一方法是将其放置在 assets 目录中并从那里访问它：

```
Typeface tf = Typeface.createFromAsset(this.getAssets(), "fonts/CUSTOMFONT.tff");
TextView tv = (TextView) findViewById(R.id.TEXTVIEW_ID);
tv.setTypeface(tf); 
```

以下是证明我的主张的链接：

[在 Android 中使用自定义字体](https://stackoverflow.com/questions/2973270/using-a-custom-typeface-in-android)

有一个与此问题相关的类似帖子。在尝试上述帖子中给出的解决方案之前检查此链接：

[自定义字体错误](https://stackoverflow.com/questions/11224688/custom-typeface-error)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T15:33:35.060

只需在您的应用程序中使用主题。您可以从 AndroidManifest.xml 设置它

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" android:theme="@style/YourCustomTheme"> 
```

然后你必须在 style.xml 文件中创建你的自定义主题

```
<style name="YourCustomTheme" >
     <item name="android:typeface">yourcustomfont</item>
</style> 
```

# c# - 与泛型和实体框架混淆

> ID：11229787
> 
> 赞同：2
> 
> 时间：2012-06-27T15:28:07.970
> 
> 标签：c#, entity-framework, generics, .net-4.0

我是 c# 新手，现在对泛型和实体框架有点困惑。我在数据库中有两个表，我使用实体框架在我的代码中检索它们。在我的 aspx 页面上，我有一个网格，它应该根据用户选择的表填充数据。

将来会有更多的桌子。所以我想写一个工厂模式来获取数据网格的源列表。我不能让它工作，因为我很困惑。

这是我的 BaseClass 和两个子类的代码。

```
static class Factory
{
    public static ReportBase GetReport(string name)
    {
        switch (name)
        {
            case "Child1":
                return new Child1();
            case "Child2":
                return new Child1();
            default:
                return null;
        }
    }
}

//Base Class 
class ReportBase<T>
{
    public List<T> _list;
    public abstract void Load();
    public abstract List<T> Filter(DateTime statrtDate, DateTime endDate);
}

//Child 1
class Child1 : ReportBase
{
    public List<GetChild1> _list;
    public Child1(){}

    public override void Load()
    {
        //GetChild1 is the name of database table
        var info = from p in Context.GetChild1 select p;
        _list = info.ToList();
    }

    public List<GetChild1> Filter(DateTime startDate, DateTime endDate)
    {
        var filteredValues = from p in _list where p.UploadedDate <= startDate select p;
        return filteredValues.ToList();
    }
}

//Child 2
class Child2 : ReportBase
{
    public List<GetChild2> _list;
    public Child2() { }

    public override void Load()
    {
        //GetChild2 is the name of database table
        return  (from p in Context.GetChild2 select p).ToList();
    }

    public List<GetChild2> Filter(DateTime startDate, DateTime endDate)
    {
        return  (from p in _list where p.UploadedDate <= startDate select p).ToList();
    }
} 
```

有人可以相应地更正代码吗？我必须在这里使用泛型吗？我尝试在 BaseClass 中使用它，但它不能正常工作，因为我必须相应地修复我的子类，对此我一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:11:51.030

首先，使用泛型，您可以编写更易读、更短的更好的代码。我认为最好不要对存储库使用工厂类，最后你需要知道你在代码中处理的是哪种类型，例如：

```
Child1 report = new Child1();
report.SomeBehaviorInChild1(); // this is not achievable with base class. 
```

如果您想使用这个工厂，您可以执行以下操作： ReportBase report = Factory.GetReport();

其次，让您的列表公开是一个坏主意，因为您不希望那些使用您的课程的人从他们的代码中创建一个新列表，例如：report._list = new List(); 您不希望这件事发生在您班级中的对象上。因此，最好将您的列表设为私有，并且仅依赖于返回报表数据源的方法。私有列表_list；

```
public List<T> GetDataSource()
{
     return _list;
} 
```

第三，如果你实现了一个通用的报表库，你不需要编写子类，除非它们有一些特殊的基础没有实现。第四，Filter 方法的当前实现非常糟糕，因为您在这里所做的是从数据库中获取所有记录，然后在内存中过滤它们。这种实现是一种不好的做法。更好的方法是使用 IQueryable，它是一个延迟执行对象，即在您请求之前不会填充结果。

```
public List<GetChild1> FilterExample()
{
    IQueryable<GetChild1> result = _context.GetChild1;
    result = from p in result
             where p.UploadDate < startDate;
             select p;
    //until this moment the query is still not send to the database.
    result = result.OrderBy(p => p.UploadDate);

    //when you call the ToList method the query will be executed on the database and the list of filtered and sorted items will be returned. Notice the sorting and filtering is done in the database which is faster than doing it in memory
    List<GetChild1> populatedResult = result.ToList();
    return populatedResult;
} 
```

所以这是解决您的问题的更好方法。我认为阅读一本名为“More Effective C# 2008”的书对您有好处，它通常讨论可查询和 linq。现在，如果我们在您的 BaseReportClass 上应用它，我们可以获得以下信息：

```
 //Base Class 
class ReportBase<T> where T: class
{
    private DbContext _context;
    public ReportBase(DbContext context)
    {
        _context = context;
    }

    //I think GetAll is a more suitable name for your method than load :D
    public IQueryable<T> GetAll()
    {
        return _context.Set<T>();
    }

    public IQueryable<T> Filter(Func<T,bool> filterFunction)
    {   
         var result = from p in GetAll()
                      where filterFunction(p)
                      select p;
         return result;
    }
} 
```

现在来定义子类的附加行为。

```
//Child 1
class Child1 : ReportBase<GetChild1>
{
   public ReportBase(DbContext context):base(context)
   {

   }

   public List<GetChild1> FilterOnStartDate(DateTime startDate)
   {
        //I don't know if you are familiar with lambda expressions but if you are not you can research it on the internet.
        //The parameter here is converted into a method that its parameter is "p" of type GetChild1
        // and the body is "p.UploadDate < startDate".
        // Note you can remove the type of the parameter because the compiler can predict it.
        return Filter((GetChild1 p) => p.UploadDate < startDate).ToList();
   }
} 
```

这是使用您的类的代码：

```
Child1 report = new Child1(new GetChild1Entities());
report.FilterOnStartDate(DateTime.Now); 
```

希望这很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:50:39.233

定义如何显示每个实体类型（或表）的泛型是错误的方法。

相反，使用 MVVM 或 MVC 等模式，根据数据类型（模型）选择视图。

[MVVM](http://en.wikipedia.org/wiki/Model_View_ViewModel)
[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)
[MVC for ASP.NET](http://en.wikipedia.org/wiki/ASP.NET_MVC_Framework)

# ui-automation - 用于测试 IOS 的 UIAutomation API

> ID：11229790
> 
> 赞同：0
> 
> 时间：2012-06-27T15:28:11.047
> 
> 标签：ui-automation, ios-ui-automation

我在哪里可以下载用于测试 IOS（在 JavaScript 上）的 UIAutomation API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T06:44:32.473

我不认为 UIAutomation API 是可下载的。大多数你能做的就是，用 .js 编写一个脚本并通过仪器运行它。仪器相互依从以产生自动化。你到底想用下载的 API 做什么以及你想在哪里运行它？如果您只是想要一个参考，那么您可以在苹果开发者[网站](http://developer.apple.com/library/ios/#documentation/DeveloperTools/Reference/UIAutomationRef/_index.html)上获得它。

# sql - 使用计数限制基于连接表的行

> ID：11229794
> 
> 赞同：1
> 
> 时间：2012-06-27T15:28:23.323
> 
> 标签：sql, sql-server, sql-server-2000

我有一个员工表和一个假期表，其中每一行代表他们休假的一天。

我想让所有休假天数超过其最大休假天数的员工。

```
employees:
employeeId
maxVacationDays

vacations:
employeeId
date_vacation_day_taken 
```

我现在的查询：

```
SELECT e.*
FROM employees e
         INNER JOIN vacations v ON (v.employeeId = e.employeeId)
WHERE e.isActive = true AND ( ???? > e.maxVacationDays) 
```

因此，我需要从该employeeId 的假期表中获取行数。

我需要一个子查询吗？

（使用sql2000）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:40:03.260

试试这个：

```
SELECT e.employeeId, v.maxVacationDays
FROM employees e
         INNER JOIN vacations v ON (v.employeeId = e.employeeId)
WHERE e.isActive = true
GROUP BY e.employeeId, v.maxVacationDays
HAVING COUNT(v.employeeId) > v.maxVacationDays 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:32:22.423

```
SELECT e.EmployeeId
        ,COUNT(v.date_vacation_day_taken) TotalDaysTaken
        ,e.maxVacationDays MaxDaysAllowed
FROM Employees e
    INNER JOIN vacations v 
        ON v.employeeId = e.employeeId
WHERE e.isactive = true
GROUP BY e.EmployeeId, e.maxVacationDays, e.isactive
HAVING COUNT(v.date_vacation_day_taken) > e.maxVacationDays 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T15:35:21.200

试试这个：

```
SELECT * FROM 
(
    SELECT e.employeeId, e.maxVacationDays, 
           SUM(v.date_vacation_day_taken) 'dayscount'
    FROM employees e
    INNER JOIN vacations v ON (v.employeeId = e.employeeId)
    GROUP BY e.employeeId, e.maxVacationDays
    WHERE e.isactive = true
) sub
WHERE sub.dayscount > e.maxVacationDays) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T15:36:34.463

也许是这样：

```
select e.employeeId, e.maxVacationDays, count(v.*) as vacationDaysTaken
from employees e
    join vacations v on e.employeeId = v.employeeId
group by e.employeeId, e.maxVacationDays
having e.maxVacationDays < count(v.*) 
```

# java - 这份对工作问卷的 Java 回复是否有效？

> ID：11229802
> 
> 赞同：1
> 
> 时间：2012-06-27T15:28:57.190
> 
> 标签：java, arrays

招聘人员以书面形式向我提出了这个问题，前一个问题与字符串相关，前一个问题与控制反转有关：

如何找到数组中的第二大元素？

作为一名拥有自学/自学 JAVA 的项目经理，我的回答是：

如何定义大（整数？解析：字符串/对象？）数组有多大？冒泡排序，然后返回倒数第二个索引。暂时存储最大和倒数第二大的变量，对数组进行排序，替换合适的变量，然后返回第二大的变量。有很多方法，但是开发一个不昂贵的适当功能需要更多信息。如果范围很宽，做几个精益方法，测量数组长度，然后在数组上应用适当的方法。

这是对这个问题的有效回答吗？如果不是，你认为它需要改进什么？我之所以这样问，是因为在常见的招聘氛围中存在极大的差距，并且很难理解类似结构化问题的实际预期目的，并且需要您的反馈以了解什么/如何接近/回复。

**更新**我收到通知说他们通常会看到代码，但没有提供任何参数或指南，并回复如下：

> 我无法提供编码答案，至少不知道前两条信息。第一个将允许解析，因为数字是普遍排序的，而字符串、对象和其他是主观解析的。第二部分，处理数组长度，以及它是否是静态的，对于开发人员来说绝对是相关的，因为昂贵的代码（无论是面向用户的计算时间，还是客户端的硬件成本）可能是昂贵的。这个问题的措辞很差，无法提供准确的技术回复，特别是考虑到它是书面格式，没有反馈。我只是输入我的考虑作为答复，就像当面询问一样。我从前面的问题中得到的上下文是，他们正在寻找了解 IoC 实践（第 3 条）并且会在可能的事务（尝试/捕获）情况（第 4 条）中解析字符串（给定第 2 条）的人，然后找到（当前问题）。如果问卷的目的是了解我如何处理问题，那么我的回答是有效的。如果他们想进一步澄清，我很乐意提供帮助，但如果他们需要一个编纂的答案并且不愿意提供必要的上下文，那么我不愿意与他们合作，因为这会突出人们对如何与他们互动的误解外部客户，他们在提出一个“简单”问题时确实需要指导，但需要其他信息才能最好地适应，任何寻求外部专业帮助的企业背后的核心原因。我希望这个回复不要用刺耳的语气阅读，因为我大声回复时的节奏完全相反，因为需要进一步的信息，包括如果在 JAVA 中单独开发是否在这份工作的范围内，因为我精通 JS和 Python 也是如此，昨天没有讨论这个问题。希望您和您的客户能够理解，使用招聘人员方法，抽象层可以在许多领域受益，但在这种情况下，如果没有直接的沟通和反馈，它可能会阻碍和模糊认知。除了我的回答之外，请随时提供这个。包括如果单独的 JAVA 开发在这个工作的范围内，因为我也精通 JS 和 Python，这个昨天没有讨论过。希望您和您的客户能够理解，使用招聘人员方法，抽象层可以在许多领域受益，但在这种情况下，如果没有直接的沟通和反馈，它可能会阻碍和模糊认知。除了我的回答之外，请随时提供这个。包括如果单独的 JAVA 开发在这个工作的范围内，因为我也精通 JS 和 Python，这个昨天没有讨论过。希望您和您的客户能够理解，使用招聘人员方法，抽象层可以在许多领域受益，但在这种情况下，如果没有直接的沟通和反馈，它可能会阻碍和模糊认知。除了我的回答之外，请随时提供这个。

并获得好评。感谢您的帮助，因为我真的很想获得一份编程工作，但之前没有正式的经验，这个指导真的很有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T16:15:22.990

在这种情况下，我认为面试官真的想知道为了找到第二大元素，是否必须**对整个数组进行排序**（并选择第二个元素）还是有**更好的方法**？

答案是您不必为了找到前 k 个元素而对整个数组进行排序。排序将花费 O(nlgn) 时间，而查找前 k 个项目只需 O(nlogk)。

您可以使用简单的示例来解释答案。如果你必须在 100 张卡片中找到第二大卡片，数字从低到高。卡片没有排序。要找到第二张最大的牌，你所要做的就是拿着你手上迄今为止见过的前两张牌。当你挑选新牌时，看看它是否比你手上的大，如果是的话，用手上最小的替换新的最大的。在此过程结束时，您最终将持有前 2 张牌。

**编辑：**就像其他人所说，冒泡排序的运行时间最差 O(n^2)。为了好玩，请查看奥巴马总统对排序面试问题的回答。[http://www.youtube.com/watch?v=k4RRi_ntQc8](http://www.youtube.com/watch?v=k4RRi_ntQc8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T16:00:33.580

完成所需任务的最有效方法是显而易见的：在数组上迭代一次并寻找“最大”元素，同时还存储前一个“最大”元素。在数组的末尾，您之前的“最大”元素是您的方法需要返回的元素。

为了制定您的答案，我看到了 2 个选择：

*   从“假设数组包含 int 元素......”或其他接近的东西开始你的答案。
*   使用未定义的 isLargest() 或 isLarger() 方法并解释该方法的目的是检查当前元素是否是当前检查的最大元素，无论它意味着什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:31:49.123

这是相当主观的，但坦率地说，我同意你关于这个问题的问题——他们应该已经定义了你的数组包含的内容。

你可以做的是写类似“假设数组中的元素都是整数，这就是我的做法”，然后用这个假设给出你的答案。

对于您对其他信息的其他请求，我将按照相同的步骤进行 - 做出假设，*声明您的假设*，然后继续进行该假设。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T15:35:40.867

似乎有效 - 我只是担心他们想要代码。我想也许你应该假设整数并在你所说的之外写一些东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T17:58:58.850

我最初的直觉反应是“修改合并排序”，使用 ForkJoinPool 实现。它仍然是 O(n log[n])，但实际运行时间会比串行实现快。

您可能会问为什么不进行快速排序，这是因为快速排序的最坏情况是 O(n^2)，这对于非常大的数据集是不利的。改进的合并排序具有更可预测的性能和更好的最坏情况 O(n log[n])

# html - 避免 CSS 表达式

> ID：11229803
> 
> 赞同：0
> 
> 时间：2012-06-27T15:29:03.900
> 
> 标签：html, css, yslow, css-expressions

我了解 CSS 表达式是什么，YSlow 报告我的页面正在使用一个：

```
Grade B on Avoid CSS expressions

There are a total of 1 expression

    inline <style> tag #3 (1 expression) 
```

但是，我找不到这是从哪里来的？我尝试在我的所有文件中搜索“表达式”一词（试图找到 expression() 函数），结果却是空白。YSlow 是否还有其他可能考虑我缺少的 css 表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:34:41.713

YSlow 声称您具有内联样式，因此至少它不是来自 css 文件。`<style>`如果您在自己的 html 中找不到，则其他内容正在将其添加到您的代码中。

这可能是外部 JavaScript，也可能来自您添加的浏览器扩展，例如开发人员工具。

在您的浏览器调试控制台中键入`document.getElementsByTagName("style")`以列出`<style>`您生成的文档中的所有内容

# python - 使用 ctypes 在 Python 中右键单击

> ID：11229808
> 
> 赞同：9
> 
> 时间：2012-06-27T15:29:21.787
> 
> 标签：python, ctypes, right-click

我是 Python 的初学者，所以不懂行话。我想使用 python 在特定点进行简单的单击。我已经使用 ctypes 管理了左键单击：

```
>>> import ctypes
>>> ctypes.windll.user32.SetCursorPos(x,y), ctypes.windll.user32.mouse_event(2,0,0,0,0), ctypes.windll.user32.mouse_event(4,0,0,0,0) 
```

有没有办法以同样的方式进行右键单击？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T15:36:15.997

以下是您将用于的常量`mouse_event`

```
MOUSE_LEFTDOWN = 0x0002     # left button down 
MOUSE_LEFTUP = 0x0004       # left button up 
MOUSE_RIGHTDOWN = 0x0008    # right button down 
MOUSE_RIGHTUP = 0x0010      # right button up 
MOUSE_MIDDLEDOWN = 0x0020   # middle button down 
MOUSE_MIDDLEUP = 0x0040     # middle button up 
```

在您的代码中，您发送两个事件：`MOUSE_LEFTDOWN`和`MOUSE_LEFTUP`. 这模拟了“点击”。

现在右键单击，您将以`MOUSE_RIGHTDOWN`类似`MOUSE_RIGHTUP`的方式发送。

# ruby-on-rails - 嵌套控制器/命名空间的路径助手

> ID：11229813
> 
> 赞同：1
> 
> 时间：2012-06-27T15:29:25.517
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, routes, nested-routes

我有路线结构：

```
 namespace :admin do
    resources :currencies
  end 
```

耙路线输出：

```
admin_currencies     GET /admin/currencies(.:format) admin/currencies#index
                     POST /admin/currencies(.:format) admin/currencies#create
new_admin_currency   GET /admin/currencies/new(.:format) admin/currencies#new
edit_admin_currency  GET /admin/currencies/:id/edit(.:format) admin/currencies#edit
      admin_currency GET /admin/currencies/:id(.:format) admin/currencies#show
                     PUT /admin/currencies/:id(.:format) admin/currencies#update
                     DELETE /admin/currencies/:id(.:format) admin/currencies#destroy 
```

Admin 是一个命名空间。

脚手架生成的表单看起来像

```
= form_for @currency do |f|
  - if @currency.errors.any?
    #error_explanation
      %h2
        = pluralize(@currency.errors.count, "error")
        prohibited this currency from being saved:
      %ul
        - @currency.errors.full_messages.each do |msg|
          %li= msg
  .field
    = f.label :title
    %br/
    = f.text_field :title
  .field
    = f.label :iso_code
    %br/
    = f.text_field :iso_code
  .actions
    = f.submit 
```

我已更改`= form_for @currency`为，`= form_for admin_currencies_path(@currency)`但由于表单的操作是 /admin/currencies/new 而不是 /admin/currencies，它仍然失败。

我做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T15:31:37.790

试试`form_for [:admin, @currency]`。

# macos - 如何使用命令将光标定位在终端中？

> ID：11229814
> 
> 赞同：1
> 
> 时间：2012-06-27T15:29:31.030
> 
> 标签：macos, terminal, position, alias, text-cursor

我在Mac上运行狮子。我真正想要的是一条捷径`git grep -n "..."`

我目前的解决方案是可行的`alias gg='git grep -n'`（有点）。

我认为理想的是我可以输入`gg *enter*`的东西，结果是`git grep -n "*cursor here*"`. 我知道如果这对此事有任何启发，control-b 会将光标移回一个？

或者也许我可以在哪里打字`gg thing to search`，它会执行一个`git grep -n "thing to search"`

我知道我很挑剔，但我不太了解 unix 命令的工作原理，这似乎是一次很好的学习体验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:37:25.543

假设您的 shell 是`bash`（我认为长期以来一直是 OS X 上的默认值），您可以用 shell 函数替换别名：

```
gg () { git grep -n "$@" } 
```

当您键入`gg thing to search`时，该函数将运行`git grep -n`，添加您提供的所有参数来`gg`代替`"$@"`.

# php - $_SERVER['http_referer'] vs .htaccess 拒绝所有允许 1

> ID：11229823
> 
> 赞同：1
> 
> 时间：2012-06-27T15:30:05.427
> 
> 标签：php, .htaccess, http-referer

我很好奇使用全局拒绝访问`$_server['http_referer']`和使用**.htaccess**的区别`deny from all/allow from ip`

两者都可以以相同的方式绕过还是**.htaccess**是一种基于引用停止访问的安全方式？

亲切的问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:31:54.770

`$_SERVER['HTTP_REFERER']`很容易被欺骗，所以依赖于任何重要的东西都不是一个好主意。

使用 .htaccess`deny from all/allow from ip`更好更好，因为它限制了对您指定的 IP 列表的访问。但是，如果您允许整个块访问您的站点，这将开始失败。然后这可以通过使用代理轻松解决。

因此，两者都不是阻止某人进入您的网站的完美解决方案。

**更新**

根据您的评论，您应该考虑一种只有您知道的引荐网站的身份验证方法。基本上，他们应该向您传递一个散列，该散列是根据每个请求更改的秘密值创建的。这样他们就不会被欺骗，您可以确定请求是合法的。

# c# - 获取请求 Rss 提要 C# 的应用名称/网址

> ID：11229824
> 
> 赞同：0
> 
> 时间：2012-06-27T15:30:07.003
> 
> 标签：c#, asp.net, asp.net-mvc

我有一个具有 Rss 提要的站点，该提要在许多不同的站点上被使用和重新显示。

每次请求 RSS 提要时，我都想获取请求并重新显示它的网站的 URL。我尝试过使用“Request.UrlReferrer”，但这不起作用？

我希望这是有道理的，但要打破它。

**站点 A 有 RSS 提要**

**站点 B 读取 RSS 提要并对其进行处理**

我想捕获站点 B 的 URL 并将其存储在站点 A 的某个地方，这样我就可以看到哪些网站正在使用 RSS 提要。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:38:28.017

您可以使用[`Request.UserHostAddress`](http://msdn.microsoft.com/en-us/library/system.web.httprequest.userhostaddress.aspx)站点 A 上的属性来获取发送 HTTP 请求的客户端的 IP。

当然，如果您在 Web 场中运行并且您的 Web 服务器位于负载均衡器或代理之后，这将为您提供负载均衡器的 IP 地址，而不是客户端。希望您的代理服务器配置为使用[`X-FORWARDED-FOR`](http://en.wikipedia.org/wiki/X-Forwarded-For)端口原始客户端 IP 地址的 HTTP 请求标头。因此，如果这是您的情况，您可以使用`Request.Headers["X-FORWARDED-FOR"]`.

根据您的要求，另一种可能性是简单地利用站点 A 上包含所有请求及其客户端 IP 地址的 IIS 日志文件。

# jquery - 在 Jquery Mobile 1.1.1 中显示全屏背景

> ID：11229826
> 
> 赞同：0
> 
> 时间：2012-06-27T15:30:15.567
> 
> 标签：jquery, css

我有 640 w 和 960 h 背景，我正在使用以下代码。我的背景显示，但它在右侧切断并显示 15% 的灰色背景。

如果我更改为 background-size: 100% 100%，背景会拉伸。有任何想法吗。background-size:cover 也缩放背景

```
body {
                background-image: url(images/splash_bk.png);
                background-repeat:no-repeat;
                background-attachment:fixed;
                /*background-size:100% 100%;*/
                background-size:contain;
                margin:0;
                padding:0;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:47:30.250

如果您将 background-size:contain 更改为 background-size:cover

我希望这是有帮助的

# asp.net - 使用 xml 将颜色绑定到 asp.net 图表中的特定 xvalue

> ID：11229827
> 
> 赞同：1
> 
> 时间：2012-06-27T15:30:15.630
> 
> 标签：asp.net, xml, charts, dynamics-crm-2011

我已经创建了一个 ASPx 饼图，并且正在努力获得正确的颜色。需要注意的重要一点是，我根本无法控制后端代码（第 3 方），因此仅限于 XML 修改（Microsoft Dynamics CRM）。

问题是我想使用颜色来指示返回的记录的某种状态（例如，一本书在图书馆中过期的天数）。我想要这样的情况：

迟到 0-5 天（= 代码 0）----> 绿色

延迟 5-10 天（= 代码 1）----> 黄色

迟到 10-15 天（= 代码 2）----> 橙色

```
>15 days late (= code 3) ----> red 
```

我从服务器收到的数据例如：

代码（迟到的天数） 计数（书籍） 0 4 2 5 3 14

当我使用**PaletteCustomColors**属性并指定如下颜色时，此方法有效：

```
<Chart Palette="None" PaletteCustomColors="149,189,66; 255,255,0; 255,136,35; 197,56,52; 117,82,160; 55,118,193; 168,203,104; 142,116,178; 93,186,215; 255,155,83">
  <Series>
    <Series ShadowOffset="0" IsValueShownAsLabel="True" Font="{0}, 9.5px" LabelForeColor="59, 59, 59" CustomProperties="PieLabelStyle=Inside, PieDrawingStyle=Default" ChartType="pie">
      <SmartLabelStyle Enabled="True" />
    </Series>
  </Series>
  <ChartAreas>
    <ChartArea>
      <Area3DStyle Enable3D="true" />
    </ChartArea>
  </ChartAreas>
  <Legends>
    <Legend Alignment="Center" LegendStyle="Table" Docking="right" IsEquallySpacedItems="True" Font="{0}, 11px" ShadowColor="0, 0, 0, 0" ForeColor="59, 59, 59" />
  </Legends>
  <Titles>
    <Title Alignment="TopLeft" DockingOffset="-3" Font="{0}, 13px" ForeColor="0, 0, 0"></Title>
  </Titles>
</Chart> 
```

**但是，**当某个代码不存在时，这不起作用。在这种情况下，颜色将是：

代码 0 -> 绿色，代码 2 -> 黄色，代码 3 -> 有机

因此，由于没有返回代码 1 结果（因为此代码的计数为 0，因此应用程序没有返回结果），代码 2 采用第一个剩余的颜色，代码 3 采用之后的颜色，...**这不是我的想要，我希望将颜色绑定到它们的 Code 属性。**

我已经尝试为此使用 DataPoints（请参见下面的代码），但无济于事......有没有人有任何体面的解决方案？

```
 <Chart>
  <Series>
    <Series ShadowOffset="0" IsValueShownAsLabel="True" Font="{0}, 9.5px" LabelForeColor="59, 59, 59" CustomProperties="PieLabelStyle=Inside, PieDrawingStyle=Default" ChartType="pie">
      <SmartLabelStyle Enabled="True" />
      <Points>
        <DataPoint XValue="0" Color="Green" />
        <DataPoint XValue="1" Color="Yellow" />
        <DataPoint XValue="2" Color="Orange" />
        <DataPoint XValue="3" Color="Red" />
        <DataPoint XValue="4" Color="Purple" />
    </Points>
    </Series>
  </Series>
  <ChartAreas>
    <ChartArea>
      <Area3DStyle Enable3D="true" />
    </ChartArea>
  </ChartAreas>
  <Legends>
    <Legend Alignment="Center" LegendStyle="Table" Docking="right" IsEquallySpacedItems="True" Font="{0}, 11px" ShadowColor="0, 0, 0, 0" ForeColor="59, 59, 59" />
  </Legends>
  <Titles>
    <Title Alignment="TopLeft" DockingOffset="-3" Font="{0}, 13px" ForeColor="0, 0, 0"></Title>
  </Titles>
</Chart> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T23:11:06.913

可以在中间创建一个代理服务吗？

取而代之的是：代码（迟到的天数）计数（书籍）0 4 2 5 3 14

您的服务将注入零值项目：代码（迟到的天数）计数（书籍）0 4 **1 0** 2 5 3 14

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T22:23:05.507

您必须在视图中包含一些虚拟记录，然后在聚合数据时更改图表 xml 以不包含它们。您可以在此处查看该方法的完整示例[http://crmchartguy.wordpress.com/2013/02/24/specify-exact-colors-for-each-priority-in-the-microsoft-dynamics-crm-2011-案例图/](http://crmchartguy.wordpress.com/2013/02/24/specify-exact-colors-for-each-priority-in-the-microsoft-dynamics-crm-2011-case-chart/)

# c++ - 使用 boost range_iterator 数组拆分字符串

> ID：11229828
> 
> 赞同：2
> 
> 时间：2012-06-27T15:30:15.967
> 
> 标签：c++, boost, range

我想通过给定固定长度（例如15个字符）的块来处理C++中的无限长字符串。

字符串是负责处理它的类的属性（我们称类“Person”和属性“_description”），外部代码必须调用一个方法来顺序处理每个块，例如Person::processDescription()。另一种方法允许查看是否还有要处理的块，例如 Person::isThereMoreDescriptionToBeProcessed()。

为了避免处理索引和可能的副作用（+1/-1 的错误，init..），有人建议我存储一个 range_iterators 数组（boost）并遍历它们进行处理，但我不知道range_iterator 概念和 Boost 文档在这里没有太大帮助。

我想我会将 2 个项目（例如 _currentItem 和 _endItem）存储为 Person 的属性并进行类似的检查

```
_currentItem == _endItem 
```

在 isThereMoreDescriptionToBeProcessed() 中，我想我会做类似的事情

```
_currentItem++ 
```

在 processDescription() 结束时，但我不明白如何为此目的在 _description 属性的 init 处填充范围迭代器数组，以及如何获取要在 processDescription() 中处理的字符串。

感谢您对此有所了解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:42:42.320

给定两个要从中创建范围的迭代器，您只需构造 a`boost::iterator_range`并将这两个迭代器作为构造函数参数传递。

下面的代码分成`str`三个字符段，并将每个段推入`ranges`.

```
std::vector<boost::iterator_range<std::string::iterator>> ranges;
std::string str = "abcdefghijk";

auto it = str.begin();
auto lastIt = it;
while (it != str.end())
{
    lastIt = it;
    if (std::distance(it, str.end()) < 3)
        it = str.end();
    else
        std::advance(it, 3);

    ranges.push_back(
        boost::iterator_range<std::string::iterator>(lastIt, it)
    );
}

for (auto segment = ranges.begin(); segment != ranges.end(); ++segment)
    std::cout << std::string(segment->begin(), segment->end()) << std::endl; 
```

# java - 测试静态方法类必须更改为单例以进行 JUnit 测试

> ID：11229829
> 
> 赞同：1
> 
> 时间：2012-06-27T15:30:20.480
> 
> 标签：java, android, static, junit, singleton

我有一个静态方法类 Utils，它基本上用于实用方法，几乎​​每个类都使用它。它做一些事情，比如获取文件和其他基本的东西。我的测试人员将这个类更改为单例，这样每个使用 Utils 的类现在都必须调用 getInstance()。原因是除非是这种情况，否则他无法测试某些东西。在我看来，这在某些方面是错误的，这可能会导致问题。

```
public class Utils {

/**
 * Singleton method to allow for easier testing.
 * @return an instance of
 */
public synchronized static Utils getInstance() {
    if (instance == null) {
        instance = new Utils();
    }
    return instance;
}

public synchronized static void setInstance(Utils instance) {
    Utils.instance = instance;
}

/** Singleton to make testing easier **/
private static Utils instance = null;

public static boolean checkOSTen() {
    return getInstance()._checkOSTen();
}

private boolean _checkOSTen() {
    boolean autoPair = false;
    if (android.os.Build.VERSION.SDK_INT >= 10){   
        autoPair = true;
    }
    return autoPair;
}

} 
```

顺便说一句，我有一个非常复杂的内部消息传递系统，它使用至少 7 个线程来发送消息，并且想看看静态方法调用与 Singleton 静态方法调用是否有影响。

除了这个，还有其他方法可以进行测试吗？似乎一些Java反射会得到你需要的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:25:59.463

您的测试人员可能会发现此代码难以测试，因为他们无法轻松更改 的返回值`android.os.Build.VERSION.SDK_INT`，因此他们无法轻松测试根据此返回值使用的不同代码路径。通过使用实例方法，他们可以使用模拟框架来伪造该`_checkOSTen`方法以返回`true`or `false`，具体取决于他们尝试测试的内容。

进行测试的另一种方法是根本不使用诸如此类的静态方法，而是使用类（可能称为`DeviceCapabilities`），它将通过 setter 或构造函数注入到需要了解操作系统版本的所有其他类中。

然后，您的测试人员可以轻松地将实例传递`DeviceCapabilities`给需要访问此信息的任何类。

也就是说，在您构建的这个阶段，进行这样的更改可能为时已晚，因此您的测试人员所做的更改是一个合理的妥协。

# objective-c - 代表 - 如何使用？

> ID：11229830
> 
> 赞同：1
> 
> 时间：2012-06-27T15:30:20.723
> 
> 标签：objective-c, ios, delegates

我想我理解委托背后的逻辑。我有更多使用它的问题。涉及多少步骤？我必须使用现有的代表吗？或者我可以使用我的一个吗？

在我的示例中，我得到了创建许多相同类型的视图（对象/视图控制器）的 AppDelegate。每个视图都应该以某种方式调用 AppDelegate 上的方法来关闭自己。当触摸视图中的按钮时会发生这种情况。方法调用将包括视图（自身）的引用。

到目前为止，我从其他语言的响应者、事件侦听器等处了解到。它们使用起来非常简单。

有谁能够帮我。我刚刚在网上找到了包含大量代码的大量示例。在 Objective C 中调用父级并不难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:36:27.603

您可以创建自己的：

在 MyView1.h 中：

```
@class MyView1;

@protocol MyView1Delegate <NSObject>

- (void)closeMyView1:(MyView1 *)myView1;

@end

@interface MyView1 : NSObject
{
    id<MyView1Delegate> _delegate;
}

@property (assign, nonatomic, readwrite) id<MyView1Delegate> delegate;

...

@end 
```

在 MyView1.m 中：

```
@interface MyView1

@synthesize delegate = _delegate;

...

// The method that tells the delegate to close me
- (void)closeMe
{
    ....
    if ([_delegate respondsToSelector:@selector(closeMyView1:)])
    {
        [_delegate closeMyView1:self];
    }
}

@end 
```

在 AppDelegate.h 中：

```
#import "MyView1.h"

@interface AppDelegate <MyView1Delegate>
{
    MyView1 *_myView1;
}

...

@end 
```

在 AppDelegate.m 中：

```
- (void)someCreateViewMethod
{
    _myView1 = [[MyView1 alloc] initWithFrame:NSMakeRect(0, 0, 100, 200)];
    [_myView1 setDelegate:self];
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:36:02.270

获得所需内容的一种简单方法是从一个视图开始。然后，以模态方式呈现彼此的视图。当按下视图中的按钮时

`[self dismissModalViewControllerAnimated:YES];`

这是我不久前开始 iPhone 开发时所做的一些事情，它可能会帮助你处理代表

```
Delegates

//In parent .m file:
//assign the delegate
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([segue.identifier isEqualToString:@"segueName"])
    {
        childController *foo = segue.destinationViewController;
        foo.delegate = self;
    }

}

//implement protocol method(s):
- (void) methodName:(dataType*) dataName
{
    //An example of what you could do if your data was an NSDate
    buttonLabel.titleLabel.text = [[date description] substringToIndex:10];
}

//In parent .h file:
//import child header
#import "ChildName.h"

//indicate conformity with protocol
@interface ParentName : UIViewController <ChildNameDelegate>

//In child .h file
//declare protocol
@protocol ChildNameDelegate
- (void) methodName:(dataType*) dataName;
@end

//declare delegate
@property (unsafe_unretained, nonatomic) id<ChildNameDelegate> delegate;

//In child .m file
//synthesize delegate
@synthesize delegate; 

//use method
- (IBAction)actionName:(id)sender 
{
    [delegate methodName:assignedData];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T16:32:23.597

我认为你应该为此使用`NSNotificationCenter`

在你**AppDelegate.m**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
...
...
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(buttonPushed:) name:@"ButtonPushedNotification" object:nil];
}

- (void)applicationWillTerminate:(UIApplication *)application
{
...
...
[[NSNotificationCenter defaultCenter] removeObserver:self];
} 
```

这是通知发生时将调用的选择器（我们仍在**AppDelegate.m**中）

```
- (void)buttonPushed:(NSNotification *)notification {
NSLog(@"the button pushed...");
} 
```

并且在按下按钮时（在方法内部）的**ViewController.m**中，您应该发布这样的通知：

```
{
...
[[NSNotificationCenter defaultCenter] postNotificationName:@"ButtonPushedNotification" object:nil];
...
} 
```

# html - 从字符串中删除 HTML 标记的正则表达式

> ID：11229831
> 
> 赞同：110
> 
> 时间：2012-06-27T15:30:27.503
> 
> 标签：html, regex

> **可能重复：**
> [删除 HTML 标记的正则表达式](https://stackoverflow.com/questions/3790681/regular-expression-to-remove-html-tags)

是否有一个表达式可以获取两个 HTML 标签之间的值？

鉴于这种：

```
<td class="played">0</td> 
```

我正在寻找一个将返回的表达式`0`，剥离`<td>`标签。

* * *

## 回答 #1

> 赞同：190
> 
> 时间：2012-06-27T15:42:25.103

您不应尝试使用正则表达式解析 HTML。HTML 不是常规语言，因此您提出的任何正则表达式都可能在某些深奥的边缘情况下失败。有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags?noredirect=1&lq=1)的开创性答案。虽然大多被格式化为一个笑话，但它提出了一个非常好的观点。

* * *

*以下示例是 Java，但对于其他语言，正则表达式将是相似的——如果不相同的话。*

* * *

```
String target = someString.replaceAll("<[^>]*>", ""); 
```

假设您的非 html 不包含任何 < 或 > 并且您的输入字符串结构正确。

如果你知道它们是一个特定的标签——例如你知道文本只包含`<td>`标签，你可以这样做：

```
String target = someString.replaceAll("(?i)<td[^>]*>", ""); 
```

编辑：Ωmega 在另一篇文章的评论中提出了一个很好的观点，即如果有多个标签，这将导致多个结果全部被挤压在一起。

例如，如果输入字符串是`<td>Something</td><td>Another Thing</td>`，那么上面的结果将是`SomethingAnother Thing`。

在需要多个标签的情况下，我们可以执行以下操作：

```
String target = someString.replaceAll("(?i)<td[^>]*>", " ").replaceAll("\\s+", " ").trim(); 
```

这会将 HTML 替换为一个空格，然后折叠空格，然后修剪末尾的任何空格。

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2012-06-27T15:31:39.117

一个简单的方法是替换

```
<[^>]*> 
```

一无所有。但是，根据您的输入结构的不良程度，这很可能会失败。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-27T15:34:05.413

你可以用 jsoup [http://jsoup.org/](http://jsoup.org/)

```
Whitelist whitelist = Whitelist.none();
String cleanStr = Jsoup.clean(yourText, whitelist); 
```

# eclipse - 如何配置一个 git 服务器来共享项目

> ID：11229837
> 
> 赞同：2
> 
> 时间：2012-06-27T15:30:32.187
> 
> 标签：eclipse, git, egit, vmware-workstation

我目前在我的 win7 计算机上的虚拟机中安装了 Fedora 17。我想配置 VM 以使用 git 管理我的项目。我在win7上使用eclipse helios和egit插件，我的项目目前驻留在本地。Git 和所有依赖项都已安装在 VM 上。VM 的主机名是 dev.local 并且 SSH 已经安装，所以我将使用以下 URL 进行访问：ssh://john@dev.local:/php/projects/myframework.git

我的问题是，如何在我的 VM 上初始化一个新的 git 存储库，然后将我的本地项目向上推送，以便它由 VM 中的 git 管理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:33:14.653

好的，我终于想通了。我最终在我的 Git 服务器上创建了我的 git 目录：

`# mkdir /home/brett/myproject.git && cd /home/brett/myproject.git`

`# git init --bare`

在我的客户端上，在项目的文件夹 (C:\www\myproject) 中：

`# git init`

`# git add .`

`# git commit -m "Initial commit"`

`# git remote add origin ssh://brett@dev.local/myproject.git`

`# git push origin master`

我删除了项目的客户端副本，并在 Eclipse 中，文件 > 导入 > Git > 从 Git 中的项目，选择 URI。

我插入了详细信息以访问 dev.local 上的 git repo，并能够在 eclipse 中创建本地副本。

无论如何，感谢所有花时间回复此问题的人。我实际上在网上找到了一篇不错的文章，它有所帮助。

[http://www.vogella.com/articles/EGit/article.html](http://www.vogella.com/articles/EGit/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T17:39:12.843

在你的虚拟机中运行一个`git daemon`。git 协议会让你更容易。

# java - 在 Maven 程序集中包含依赖项而不包含实际的工件

> ID：11229842
> 
> 赞同：4
> 
> 时间：2012-06-27T15:30:40.297
> 
> 标签：java, maven, build

我想创建一个包含工件的传递依赖项的 Maven 程序集，而实际上不包括工件本身。我试图从程序集中排除工件，但结果不包括它的依赖项。

ArtifactA 有 DependencyA、DependencyB

程序集应包含 DependencyA、DependencyB（不含 ArtifactA）

而且我希望这样做而不必明确指定要包含在程序集中的依赖项，因为这将通过具有许多依赖项的多个项目来完成。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:10:53.027

我终于让它工作了。这将产生一个仅包含依赖项的依赖项的工件

pom.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

    <modelVersion>4.0.0</modelVersion>

    <groupId>moduletest</groupId>
    <artifactId>moduletest</artifactId>
    <version>1.0</version>
    <packaging>pom</packaging>

    <dependencies>
        <dependency>
            <groupId>dependency</groupId>
            <artifactId>dependency</artifactId>
            <version>1.0</version>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-assembly-plugin</artifactId>
                <version>2.3</version>
                <configuration>
                    <descriptors>
                        <descriptor>assembly.xml</descriptor>
                    </descriptors>
                </configuration>
            </plugin>
        </plugins>
    </build>

</project> 
```

程序集.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">

    <id>module</id>

    <includeBaseDirectory>false</includeBaseDirectory>

    <formats>
        <format>zip</format>
    </formats>

    <dependencySets>
        <dependencySet>
            <excludes>
                <exclude>dependency:dependency</exclude>
            </excludes>
            <useProjectArtifact>false</useProjectArtifact>
            <useTransitiveDependencies>true</useTransitiveDependencies>
        </dependencySet>
    </dependencySets>

</assembly> 
```

# github - Github windows：提交失败：创建新提交失败

> ID：11229843
> 
> 赞同：62
> 
> 时间：2012-06-27T15:30:41.307
> 
> 标签：github

我有： http: [//windows.github.com/](http://windows.github.com/)

我当前的项目有大约 20k 个文件，大约 150MB（不说它有多慢，我现在什么都做不了）它甚至不让我提交！我收到此错误：提交失败：无法创建新提交。

这似乎没有人拥有。

我已经删除了文件夹并再次克隆，没有逃脱。该怎么办？

如果我选择打开外壳，这一切都会崩溃！

* * *

## **编辑：**

## **由于这个问题我已经切换到[Git Extensions](http://gitextensions.github.io/)并且我没有回头！**

谢谢你的回答

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-07-04T13:20:21.180

这发生在我身上。尝试打开 PowerShell 并使用“git add [file name]”命令手动提交每个文件。要查看已添加的文件，请在命令行中输入“git status”。绿色文件已添加，红色文件尚未添加。

全部添加后，输入“git commit”。然后回到 Github for Windows 并同步它。

我不确定是什么导致了这个问题，但是一旦我按照上述步骤操作，Github 就会恢复到正常的、令人敬畏的行为。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-11-27T09:00:07.360

在意外崩溃后，我也遇到了这个问题。我无法按照建议使用“Open Shell”选项进行修复。我必须打开 Windows CLI ( `Start -> run -> cmd`) 并删除`index.lock`我的 GitHub 文件夹中的文件：

```
cd \Users\myUser\my\local\github\repo
cd .git
del index.lock 
```

然后当我回到 GitHub 应用程序时，它成功提交。

* * *

请注意，对于某些人来说，根据评论，要删除的文件没有`.lock`扩展名，因此删除命令也可以是`del index`.

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-01-19T08:29:42.820

我使用 Githug for Windows (7) 并面临同样的问题。在使用 PowerShell 时，我意识到我没有在`tools > options`. 看起来像一个初学者的错误（我就是！）。

希望能帮助到你！

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-07-31T14:05:08.570

试着从你的更新中提交一些。5例如。然后对所有其他更新进行另一次提交。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-06-09T18:35:04.177

所以伙计们，这是我为了解决问题而必须采取的全部步骤......

1）使用进程资源管理器（你可以在这里下载它[http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)）我搜索了任何引用“.git\index”的进程，然后我杀死了它。

2）然后使用 Git Shell（Windows Power Shell）我进入了给我带来如此困难的存储库，然后又进入了它的 .git 文件夹。(cd .\your_respository_name\.git)。然后我删除了该目录中的 index.lock 文件（rm -r index.lock）。

3）然后在同一个目录中，我运行了 git reset HEAD。

4）然后我使用“git add [file_name]”命令手动提交了每个文件。（如果运行 git status 时，文件为绿色，则可以检查它们是否已成功添加。

5）如果您的文件添加正确，接下来运行 git commit 。

6）最后回到 github for windows 并同步所有内容，它应该可以正常工作并解决问题。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-09-19T12:42:02.280

我正在使用 Windows 客户端并收到相同的错误。然后突然意识到我在app_data中的本地db是在SQL管理上打开的。如果它们在其他程序中打开或使用，它只是无法将某些文件提交到 github。

刚刚断开连接的管理工作室关闭了它，只是简单地提交了。
这也可能是你的情况。检查你的文件！

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-09-16T21:35:54.173

这个问题似乎是 github 客户端中的一个错误——我在只安装了 github 客户端的机器上“一直”得到它。我从来没有在 git + github PC 上看到它（我已经有几天没有使用它了）。执行“git add”。然后“git commit”在 shell 上也为我工作——但这​​是 GUI 不应该做的事情——否则我可以坚持使用 git shell 客户端。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-03-25T06:18:51.733

我在使用 git windows 桌面提交工具时遇到了这个问题。我经常遇到这种情况，我发现 Visual Studios 正在锁定文件。为了解决这个问题，我简单地关闭了视觉工作室并且提交/同步工作正常。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-11-07T18:39:16.743

我用谷歌搜索`failed to create repository`并最终来到这里。

我的问题是我的新仓库的描述太长了。描述有一个 charlimit，但 GitHub 无论如何尝试推送它并失败。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-10-12T00:26:06.900

有同样的问题，无法使用 Windows GUI 提交或同步，但我可以通过 shell 提交更改。一旦我通过 shell 添加了更改，windows GUI 就开始正常同步。希望它是一个关闭。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-12-21T22:32:51.993

我有一个有趣的问题 - 即使我打开了一个名为“Combined - ForImportv4.xlsm”的 excel 文件，Git UI 也没有问题检查它，但它在备份文件的 OP 主题中给出了错误“~$Combined - ForImportv4 .xlsm”所以我放弃了这个改变，一切都通过了。

PS：至于为什么我要检查一个 Excel 文件到 Git ......只是*没有*到达那里 :)......

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-11-05T16:11:00.753

如果您是新用户，请确保您已确认您的电子邮件。有同样的问题和确认修复它！

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-02-26T16:31:01.880

当我的项目在 IDE（在我的情况下为 Netbeans）中打开时，我遇到了这种情况，请确保您要提交的文件没有在某些程序中打开。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-03-21T00:41:12.373

只需删除 '/.git/' 目录中的 'index.lock' 即可。立即为我解决了问题。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2012-12-05T02:12:09.627

我只是遇到了同样的问题，尝试了这篇文章中的一些建议，但都没有奏效，所以我所做的是，在 GiTHub 客户端上，我去了`tools -> settings`，然后单击显示添加/创建默认忽略文件的部分。然后点击更新并尝试通过客户端再次提交。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2015-02-14T09:06:46.497

您可以手动导航到 index.lock，它位于存储库位置的隐藏 .git 文件夹中。删除 index.lock 后，您将能够像往常一样提交。

导航到该文件夹​​的最简单方法是单击 Windows 资源管理器中的文件夹面包屑并添加 \.git 并按 Enter。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2014-09-03T03:08:58.230

我检查了 C:\Users{user}\AppData\Local\GitHub\TheLog.txt 的日志文件，发现了这个错误：

```
LibGit2Sharp.LibGit2SharpException:

Could not open 'SomePath\SomeProject.opensdf':

The process cannot access the file because it is being used by another process. 
```

我关闭了 Visual Studio，然后成功创建了提交。注意我在上述错误中删除了实际文件路径。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-05-27T04:27:10.367

我遇到过这种情况，这是解决它的最简单方法：

1.  制作具有 repo 的本地文件夹的副本，并从中删除 .git 文件夹。
2.  删除包含文件的原始 repo 文件夹。
3.  使用 Windows 客户端从 GitHub 重新克隆存储库。
4.  删除除 .git 文件夹之外的所有克隆文件。
5.  将复制文件夹中的所有文件复制到新的克隆文件夹中。

添加您的提交说明，这次提交应该可以工作。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-01-28T19:53:18.717

我重新启动了我的 Windows 7 机器并再次尝试 - 它成功了！

我有“提交失败：无法创建新提交”并尝试通过 Windows 命令提示符删除索引或 index.lock 文件，但没有成功。我通过Windows资源管理器删除了它，但没有用。

我试图检查凭据，就像此列表中的另一个回复所说的那样，但无法弄清楚，凭据似乎“正常”。所以 - 我重新启动。中提琴。

我不确定这会对任何人有所帮助，我对这些东西并不是那么好，但在尝试。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-12-11T17:45:27.200

我遇到了同样的问题，我通过重命名其中一个文件来修复它，因为它的名称太长了。这解决了问题。这是来自 git shell 的错误消息：

```
fatal: unable to stat 'plugins/com.napolitano.cordova.plugin.intent/example/app/platforms/android/CordovaLib/build/intermediates/classes/debug/org/apache/cordova/NativeToJsMessageQueue$OnlineEventsBridgeMode$OnlineEventsBridgeModeDelegate.class': Filename too long 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-10-29T02:22:58.250

我删除了子目录中的“.git”，问题就解决了。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-08-08T16:10:46.303

它发生在我身上一次，我克隆的存储库中有一个空存储库。虽然这是一个愚蠢的错误，但可能会发生。

# php - PHP数字计算，奇怪的结果

> ID：11229844
> 
> 赞同：1
> 
> 时间：2012-06-27T15:30:42.823
> 
> 标签：php, numbers

对于以下

```
echo 0.02-0.01-0.06+0.05; 
```

我得到的结果是

```
6.93889390391E-18 
```

对于这个

```
echo -0.02+0.02; 
```

我得到了结果

```
0 
```

我想知道为什么我得到了不同的结果。我想得到两个`0`结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T15:32:26.003

这就是[浮点数](http://en.wikipedia.org/wiki/Floating_point)的工作原理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T18:37:51.663

当您在源代码中写入数字“0.02”时，编译器或解释器使用浮点数来表示它们。最常见的浮点格式是 IEEE 754 二进制浮点，单精度或双精度。

这种浮点格式不能准确地表示大多数十进制数字。例如，正如小数不能精确表示 1/3（大约是 0.3333，但任何有限长度的十进制数字都在某处结束，所以它与 1/3 略有不同），浮点中使用的二进制数字也不能表示 1 /10 精确（二进制，1/10 大约是 0.000110011001100110011）。

因此，当你写“0.02-0.01-0.06+0.05”时，计算机并没有完全用这些数字进行算术运算。它使用的是近似值。所以你得到的结果是一个近似值。

如果您想要一个精确的结果，您必须学习浮点运算的详细信息，以便您可以设计避免错误或可以纠正错误的操作，或者您应该只使用整数运算。例如，如果上面表示的美元金额要加减，您可以改为存储美分金额并计算“2-1-6+5”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T15:34:54.987

浮点运算与正常的数学规则并没有真正密切相关。例如，操作不是关联的或分配的。

浮点表示是精度有限的近似值。

这不是特定于 php 的东西 - 计算机根本无法像我们概念化它们那样表示数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T15:37:44.723

如果您将其四舍五入到小数点后两位或三位，这将为您解决问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-08T23:13:49.573

嗨，对于遇到这个问题的人，您可以使用 BCMath 库 [http://php.net/manual/en/ref.bc.php中的任意精度函数](http://php.net/manual/en/ref.bc.php)

```
echo 12606.69 + 3053.46 - 15660.15;
1.8189894035459E-12 
```

和

```
echo bcadd((12606.69 + 3053.46),-15660.15);
0 
```

# java - Java 清单中的换行符

> ID：11229847
> 
> 赞同：0
> 
> 时间：2012-06-27T15:30:56.340
> 
> 标签：java, jar, manifest

我想在清单的属性值中添加换行符。它适用于我们项目的一些自定义属性字段。有没有办法指定一个新行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:33:34.197

转义字符“\n”将指定换行符。

# string - 如何在 Haskell 中解析 IO 字符串？

> ID：11229854
> 
> 赞同：34
> 
> 时间：2012-06-27T15:31:23.027
> 
> 标签：string, parsing, haskell, io, monads

我遇到了 Haskell 的问题。我的文本文件如下所示：

```
5.
7\. 
[(1,2,3),(4,5,6),(7,8,9),(10,11,12)]. 
```

我不知道如何获得前 2 个数字（上面的 2 和 7）和最后一行的列表。每行的末尾都有点。

我试图构建一个解析器，但名为“readFile”的函数返回名为 IO 字符串的 Monad。我不知道如何从那种类型的字符串中获取信息。

我更喜欢处理一系列字符。也许有一个函数可以从 'IO String' 转换为 [Char]？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-06-27T15:49:03.883

我认为您对 Haskell 中的 IO 有一个基本的误解。特别是，你这样说：

> 也许有一个函数可以从 'IO String' 转换为 [Char]？

不，没有¹，而且没有这样的功能是 Haskell 最重要的事情之一。

Haskell 是一种非常有原则的语言。它试图区分“纯”函数（没有任何副作用，并且在给出相同输入时总是返回相同的结果）和“不纯”函数（具有从文件读取、打印等副作用）到屏幕，写入磁盘等）。规则是：

1.  您可以在任何地方使用纯函数（在其他纯函数中，或在不纯函数中）
2.  您只能在其他不纯函数中使用不纯函数。

代码被标记为纯或不纯的方式是使用类型系统。当您看到类似的函数签名时

```
digitToInt :: String -> Int 
```

你知道这个函数是纯粹的。如果你给它 a `String`，它会返回 an `Int`，而且如果你给它，*它总是会返回`Int`相同的`String`*。另一方面，函数签名如

```
getLine :: IO String 
```

是*不纯*的，因为 的返回类型用`String`标记`IO`。显然`getLine`（读取一行用户输入）不会总是返回相同的`String`，因为它取决于用户输入的内容。你不能在纯代码中使用这个函数，因为即使添加最少量的杂质也会污染纯代码代码。一旦你走了`IO`，你就再也回不去了。

您可以将其`IO`视为包装器。例如，当您看到特定类型时`x :: IO String`，您应该将其解释为“`x`在执行时执行一些任意 I/O 然后返回某种类型的操作`String`”（请注意，在 Haskell 中，`String`两者`[Char]`完全相同事物）。

那么你如何从一个`IO`动作中获取值呢？幸运的是，函数的类型`main`是`IO ()`（它是一个执行一些 I/O 并返回的操作`()`，这与什么都不返回相同）。所以你总是可以在`IO`里面使用你的函数`main`。当你执行一个 Haskell 程序时，你正在做的是运行`main`函数，这会导致程序定义中的所有 I/O 都被实际执行——例如，你可以从文件中读取和写入，询问用户输入，写入到标准输出等

你可以考虑像这样构建一个 Haskell 程序：

*   所有执行 I/O 的代码都会获得`IO`标签（基本上，你把它放在一个`do`块中）
*   不需要执行 I/O 的代码不需要在一个`do`块中——这些是“纯”函数。
*   您的`main`函数将您定义的 I/O 操作按顺序排列在一起，以使程序执行您希望它执行的操作（在您喜欢的任何地方穿插纯函数）。
*   当您运行时`main`，您会执行所有这些 I/O 操作。

* * *

那么，考虑到所有这些，您如何编写程序？嗯，功能

```
readFile :: FilePath -> IO String 
```

将文件读取为`String`. 所以我们可以使用它来获取文件的内容。功能

```
lines:: String -> [String] 
```

在换行符上拆分 a `String`，所以现在你有一个`String`s 列表，每个对应于文件的一行。功能

```
init :: [a] -> [a] 
```

从列表中删除最后一个元素（这将摆脱`.`每行的最后一个元素）。功能

```
read :: (Read a) => String -> a 
```

接受 a`String`并将其转换为任意 Haskell 数据类型，例如`Int`or `Bool`。合理地组合这些功能将为您提供您的程序。

请注意，您真正需要执行任何 I/O 的唯一时间是在读取文件时。因此，这是程序中唯一需要使用`IO`标签的部分。程序的其余部分可以“纯粹”编写。

听起来您需要的是文章[The IO Monad For People Who Simply Don't Care](http://blog.sigfpe.com/2007/11/io-monad-for-people-who-simply-dont.html)，它应该可以解释您的很多问题。不要被“monad”这个词吓到——你不需要理解什么是 monad 来编写 Haskell 程序（请注意，这一段是我回答中唯一使用“monad”这个词的段落，尽管我承认我已经用了四次了……）

* * *

这是（我认为）您要编写的程序

```
run :: IO (Int, Int, [(Int,Int,Int)])
run = do
  contents <- readFile "text.txt"   -- use '<-' here so that 'contents' is a String
  let [a,b,c] = lines contents      -- split on newlines
  let firstLine  = read (init a)    -- 'init' drops the trailing period
  let secondLine = read (init b)    
  let thirdLine  = read (init c)    -- this reads a list of Int-tuples
  return (firstLine, secondLine, thirdLine) 
```

要回答`npfedwards`有关应用于`lines`的输出的评论`readFile text.txt`，您需要意识到这`readFile text.txt`会给您一个`IO String`，并且只有当您将它绑定到一个变量（使用`contents <-`）时，您才能访问底层`String`，以便您可以应用`lines`它。

记住：一旦你走了`IO`，你就再也回不去了。

* * *

¹我故意忽略`unsafePerformIO`，因为正如名字所暗示的那样，它非常不安全！*除非您真的*知道自己在做什么，否则永远不要使用它。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-28T02:39:06.883

作为一个编程菜鸟，我也被`IO`s 弄糊涂了。请记住，如果你去`IO`，你永远不会出来。克里斯写了一个[很好的解释为什么](https://stackoverflow.com/questions/11229854/how-can-i-parse-the-io-string-in-haskell/11230235#11230235)。我只是认为给出一些关于如何`IO String`在 monad 中使用的例子可能会有所帮助。我将使用[getLine](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v:getLine)读取用户输入并返回一个`IO String`.

```
line <- getLine 
```

所有这一切都是将用户输入绑定`getLine`到一个名为 的值`line`。如果你在 ghci 中输入 this，然后输入`:type line`它会返回：

```
:type line
line :: String 
```

可是等等！`getLine`返回一个`IO String`

```
:type getLine
getLine :: IO String 
```

那么发生了什么`IO`事呢`getLine`？`<-`是怎么回事。`<-`是你的`IO`朋友。它允许您带出被`IO`monad 污染的值，并将其与您的正常功能一起使用。Monad 很容易识别，因为它们以 . 开头`do`。像这样：

```
main = do
    putStrLn "How much do you love Haskell?"
    amount <- getLine
    putStrln ("You love Haskell this much: " ++ amount) 
```

如果你像我一样，你很快就会发现那`liftIO`是你的下一个最好的 monad 朋友，这`$`有助于减少你需要编写的括号数量。

那么如何从 中获取信息`readFile`？好吧，如果`readFile`的输出是`IO String`这样的：

```
:type readFile
readFile :: FilePath -> IO String 
```

那么你所需要的就是你的友好`<-`：

```
 yourdata <- readFile "samplefile.txt" 
```

现在，如果在 ghci 中输入并检查类型，`yourdata`您会发现它是一个简单的`String`.

```
:type yourdata
text :: String 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-28T07:50:24.100

正如人们已经说过的那样，如果您有两个函数，一个是`readStringFromFile :: FilePath -> IO String`，另一个是`doTheRightThingWithString :: String -> Something`，那么您实际上不需要从 中转义字符串`IO`，因为您可以通过多种方式组合这两个函数：

对于`fmap`（是）`IO`：`IO``Functor`

```
fmap doTheRightThingWithString readStringFromFile 
```

对于`(<$>)`（是和）`IO`：`IO``Applicative``(<$>) == fmap`

```
import Control.Applicative

...

doTheRightThingWithString <$> readStringFromFile 
```

对于`liftM`( `IO`) `liftM == fmap`：

```
import Control.Monad

...

liftM doTheRightThingWithString readStringFromFile 
```

对于`(>>=)`(是`IO`, ) :`IO``Monad``fmap == (<$>) == liftM == \f m -> m >>= return . f`

```
readStringFromFile >>= \string -> return (doTheRightThingWithString string)
readStringFromFile >>= \string -> return $ doTheRightThingWithString string
readStringFromFile >>= return . doTheRightThingWithString
return . doTheRightThingWithString =<< readStringFromFile 
```

带`do`符号：

```
do
  ...
  string <- readStringFromFile
  -- ^ you escape String from IO but only inside this do-block
  let result = doTheRightThingWithString string
  ...
  return result 
```

每次你都会得到`IO Something`。

你为什么要那样做？好吧，有了这个，您将在您的语言中拥有*纯粹*且 *[引用透明](http://en.wikipedia.org/wiki/Referential_transparency_%28computer_science%29)*的程序（函数）。这意味着每个类型为 IO-free 的函数都是*纯*的且*引用透明*的，因此对于相同的参数，它将返回相同的值。例如，`doTheRightThingWithString`将为`Something`相同的`String`. 但是`readStringFromFile`，不是 IO-free 的每次都可以返回不同的字符串（因为文件可以更改），因此您无法从`IO`.

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-27T15:36:51.410

如果您有这种类型的解析器：

```
myParser :: String -> Foo 
```

并且您使用

```
readFile "thisfile.txt" 
```

然后您可以使用读取和解析文件

```
fmap myParser (readFile "thisfile.txt") 
```

其结果将具有 type `IO Foo`。

该`fmap`装置`myParser`在 IO 的“内部”运行。

另一种思考方式是，而`myParser :: String -> Foo`, `fmap myParser :: IO String -> IO Foo`。

# jquery - 使用 jquery 将点击的链接索引从 jsp 传递到弹出窗口

> ID：11229858
> 
> 赞同：0
> 
> 时间：2012-06-27T15:31:31.750
> 
> 标签：jquery, struts2

我有显示亚马逊“订单”列表和“订单#”作为链接的 jsp。当我单击链接时，我想在弹出窗口中显示更多详细信息。

我的问题是如何在弹出 jsp 中获取所选链接的详细信息，而无需使用父页面中的相同列表再次访问数据库。

我正在使用`<s:subset source="devOrdLst" count="1" start="">`我假设如果我得到的起始值只是索引，那么我可以显示该点击订单的详细信息#。

技术用到了jQuery、Struts2、java。请不要推荐任何插件。

父页面：

```
<s:iterator value="orderList" id="orders">
   <tr>
      <td><a href="#" id=orderid><s:property value="orderId"/></a></td>
      <td><s:property value="orderDate"/></td>
      <td><s:property value="CustomerName"/></td>
   </tr>
</s:iterator> 
```

在基于所选 orderId 的弹出窗口中，我已按索引显示**orderList中的详细信息，而无需访问****服务器。**

如何使用 jQuery 将其从父窗口传递到弹出窗口。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:35:49.367

它应该是这样的：

```
<s:iterator value="orderList" status="status">
   <tr>
      <td>
          <%-- action maybe a jsp page or java class --%>
          <s:url var="url" action="detail">
            <s:param name="index" value="#status.index"/>
            <s:param name="orderId" value="%{orderId}"/>
          <a href="%{url}">
            <s:property value="orderId"/>
          </a>
      </td>
      <td><s:property value="orderDate"/></td>
      <td><s:property value="CustomerName"/></td>
   </tr>
</s:iterator> 
```

这样您就可以传递您的 orderId 和索引...

**更新 1**

如果您真的不想再次调用服务器。你可以试试这个。我这里没有环境，所以你必须自己做。

```
<s:iterator value="orderList" status="status">
   <tr id="<s:property value="%{orderId}">">
      <td>
          <%-- action maybe a jsp page or java class --%>
          <a href="#" id="orderId">
            <s:property value="orderId"/>
          </a>
      </td>
      <td><s:property value="orderDate"/></td>
      <td><s:property value="CustomerName"/></td>
   </tr>
</s:iterator>
<div id="popup"></div>
<script>
  $("a#orderId").click(function(){
    var orderId = this.val();
    var result= "<ul>";
    $('tr[id=orderId] td').each(function(){
        result.append("<li>" + this.html() + "</li>");
    });
    result.append("</ul>");
    $('#popup').html(result);
  });
</script> 
```

# c++ - 'sqlite3_api' 未在此范围内声明

> ID：11229862
> 
> 赞同：1
> 
> 时间：2012-06-27T15:31:34.467
> 
> 标签：c++, sqlite, codeblocks, ubuntu-12.04

我第一次在 C++ 中学习 sqlite3 编程，这个错误让我和我的互联网搜索能力感到困惑。

这是我的代码，在抛出错误之前。

```
#include <iostream>
#include <sqlite3ext.h>

using namespace std;

int main()
{
    sqlite3 *database;
    int check;

    check = sqlite3_open("introdb3.db", &database); //error is here
} 
```

我很确定它与链接（或未链接）的库有关，但我不知道如何让它正常运行。

我在 Ubuntu 上使用 code::blocks。

谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T15:36:33.873

代替

```
#include <sqlite3ext.h> 
```

写

```
#include <sqlite3.h> 
```

`sqlite3ext.h`仅当您要编写 SQLite 扩展（例如，自定义函数）时才需要该文件。对于常规数据库访问，请使用`sqlite3.h`.

# wpf - 从弹出元素获取父窗口

> ID：11229863
> 
> 赞同：-2
> 
> 时间：2012-06-27T15:31:34.590
> 
> 标签：wpf, popup

我当前的应用程序上有弹出窗口。弹出控件中有一个图像。现在，当我单击该图像时，我想要主应用程序窗口的对象。

当我写这个时，它给了我null。

```
Window window = VisualTreeHelpers.FindVisualParent<Window>(Image); 
```

当我写这个时，它给了我弹出窗口的对象，而不是应用程序窗口。

```
window =  Window.GetWindow(Image); 
```

如何从 Popup Image 控件获取主应用程序窗口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T15:46:51.463

`Application.Current.MainWindow`

> MainWindow 自动设置为引用要在 AppDomain 中实例化的第一个 Window 对象。
> 
> 您可以通过设置 MainWindow 将另一个 Windows 对象分配给 MainWindow 属性来指定不同的主窗口。

MSDN 页面的链接在[这里](http://msdn.microsoft.com/en-us/library/system.windows.application.mainwindow.aspx)。

# c# - Databindings.Add 真的很慢

> ID：11229864
> 
> 赞同：0
> 
> 时间：2012-06-27T15:31:35.927
> 
> 标签：c#, .net, winforms, data-binding

我昨天问了一个问题供参考：[跟踪 40 多个控制值](https://stackoverflow.com/questions/11210974/keeping-track-of-40-control-values/11211327#comment14721436_11211327)

我将一堆控件绑定到一个属性类；但是，它确实减慢了应用程序的 GUI 部分。例如，使用以下代码：

```
 numericUpDownPhysicalAIs.DataBindings.Add("Value", configurationValues, "PhysicalAIs");
        numericUpDownInternalAIs.DataBindings.Add("Value", configurationValues, "InteralAIs");
        numericUpDownPhysicalAOs.DataBindings.Add("Value", configurationValues, "PhysicalAOs");
        numericUpDownInternalAOs.DataBindings.Add("Value", configurationValues, "InternalAOs");
        numericUpDownSetpoints.DataBindings.Add("Value", configurationValues, "Setpoints");
        numericUpDownIndexRegisters.DataBindings.Add("Value", configurationValues, "IndexRegisters");
        numericUpDownNetworkID.DataBindings.Add("Value", configurationValues, "NetworkID");
        numericUpDownQuiescentOperationStartupDelay.DataBindings.Add("Value", configurationValues, "QuiescentOperationStartupDelay");
        numericUpDownQuiescentTelemetryTable.DataBindings.Add("Value", configurationValues, "QuiescentTelemetryTableScanRate");
        numericUpDownPercentQuiescentThreshold.DataBindings.Add("Value", configurationValues, "PercentQuiescentThreshold");
        numericUpDownPercentageOfQuiescentInterval.DataBindings.Add("Value", configurationValues, "PercentQuiescentInterval");
        numericUpDownAODayWeek.DataBindings.Add("Value", configurationValues, "AODayWeek");
        numericUpDownAODayMonth.DataBindings.Add("Value", configurationValues, "AODayMonth");
        numericUpDownAOMonthYear.DataBindings.Add("Value", configurationValues, "AOMonthYear");
        numericUpDownAOYear.DataBindings.Add("Value", configurationValues, "AOYear");
        numericUpDownTimeDay.DataBindings.Add("Value", configurationValues, "TimeDay");
        numericUpDownDebugStatementNumberSetpoint.DataBindings.Add("Value", configurationValues, "DebugStatementNumberSetpoint");
        numericUpDownTelemetryControlSetpoint.DataBindings.Add("Value", configurationValues, "TelemetryControlSetpoint");
        numericUpDownCommunicationFailDI.DataBindings.Add("Value", configurationValues, "CommunicationFailDI");
        numericUpDownCommunicationFailAddressAO.DataBindings.Add("Value", configurationValues, "CommunicationFailAddressAO");
        numericUpDownAddressUnreachableAO.DataBindings.Add("Value", configurationValues, "AddressUnreachableUnitAO");
        numericUpDownPowerCountAO.DataBindings.Add("Value", configurationValues, "PowerCountAO");
        numericUpDownResetCountAO.DataBindings.Add("Value", configurationValues, "ResetCountAO");
        numericUpDownRandomNumberAO.DataBindings.Add("Value", configurationValues, "RandomNumberAO"); 
```

表单显示所有向上/向下数字框需要 30 秒到一分钟的时间。如果我将此代码注释掉，GUI 会立即弹出。这是 DataBindings.Add 方法的限制吗？

谢谢

# vb.net - 如何检查文件名是否包含 vb.net 中字符串的一部分

> ID：11229874
> 
> 赞同：1
> 
> 时间：2012-06-27T15:31:53.500
> 
> 标签：vb.net, string, filenames

我在 2008 年 vb 速成版中有一个用户表单。零件号是通过连接字符串从用户输入创建的。然后我想检查目录中现有文件名中是否存在零件号的某个部分。下面是更详细的解释。

这是我从表单上的用户输入创建零件号的代码。

```
L_PartNo.Text = String.Concat(CB_Type.Text, CB_Face.Text, "(", T_Width.Text, "x", T_Height.Text, ")", mount, T_Qty.Text, weep, serv) 
```

然后我有下面的代码告诉用户他们刚刚创建的配置（部件号）是否存在

```
L_Found.Visible = True
If File.Exists("Z:\Cut Sheets\TCS Products\BLANK OUT SIGN\" & (L_PartNo.Text) & ".pdf") Then
        L_Found.Text = "This configuration exists"
      Else
        L_Found.Text = "This configuration does NOT exist"
      End If 
```

这是我需要帮助的地方。部件号看起来像这样 BX002(30x30)A1SS 我想将 002(30x30)（只是文件名的这一部分）与一个目录中的所有文件进行比较。我想要一个存在或否的答案，而不是所有匹配文件的列表。下面的代码是我尝试过的所有内容，而不是同时尝试过的所有内容。

```
Dim b As Boolean
b = L_PartNo.Text.Contains(NewFace)

Dim NewFace As String = String.Concat(CB_Face.Text, "(", T_Width.Text, "x", T_Height.Text, ")")
Dim NewFace = L_PartNo.Text.Substring(2, 10)

If filename.Contains(NewFace) Then
        lNewFace.Visible = False
      Else
        lNewFace.Visible = True
      End If 
```

下面的代码是 C# 中答案的翻译，但它也不起作用

```
Dim contains As Boolean = Directory.EnumerateFiles(path).Any(Function(f) [String].Equals(f, "myfilethree", StringComparison.OrdinalIgnoreCase)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T16:01:23.693

这是一个示例，说明如何在没有花哨的 LINQ 和 Lambda 的情况下做到这一点，这似乎让您感到困惑：

```
Public Function FileMatches(folderPath As String, filePattern As String, phrase As String) As Boolean
    For Each fileName As String In Directory.GetFiles(folderPath, filePattern)
        If fileName.Contains(phrase) Then
            Return True
        End If
    Next
    Return False
End Function 
```

或者，如果您需要它不区分大小写：

```
Public Function FileMatches(folderPath As String, filePattern As String, phrase As String) As Boolean
    For Each fileName As String In Directory.GetFiles(folderPath, filePattern)
        If fileName.ToLower().Contains(phrase.ToLower()) Then
            Return True
        End If
    Next
    Return False
End Function 
```

您可以这样调用该方法：

```
lNewFace.Visible = FileMatches(path, "*.pdf", NewFace) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:02:46.033

试试这个：

```
 lNewFace.Visible = IO.Directory.GetFiles(path, "*.pdf").Where(Function(file) file. _
            Substring(2, 10) = NewFace).FirstOrDefault Is Nothing 
```

考虑如果 substring 函数的参数超过它正在解析的字符串的长度，它会抛出异常

# c++ - 调用void函数问题

> ID：11229875
> 
> 赞同：1
> 
> 时间：2012-06-27T15:31:54.270
> 
> 标签：c++, class, multidimensional-array

您好，我在代码中调用 void initialize() 函数时遇到问题。我应该得到一个看起来像这样的数组

```
//cccccccccccccccccccccccccc
  cxxxxxxxxxxxxxxxxxxxxxxxxc
  cxxxxxxxxxxxxxxxxxxxxxxxxc
  cxxxxxxxxxxxxxxxxxxxxxxxxc
  cxxxxxxxxxxxxxxxxxxxxxxxxc
  cxxxxhhhhhhhxxxxxxxxxxxxxc
  cxxxxhhhhhhhxxxxxxxxxxxxxc
  cxxxxhhhhhhhxxxxxxxxxxxxxc
  cxxxxhhhhhhhxxxxxxxxxxxxxc
  cxxxxxxxxxxxxxxxxxxxxxxxxc
  cccccccccccccccccccccccccc// 
```

其中数组在 Initialize() 中定义，变量来自 FIN 、 SteamPipe 和 GridPT 类。我的代码在数组之前给了我第一组答案，但是当它到达数组时，我只得到符号'？这就是它在 GridPT 类中指定的内容。我认为我调用 void 函数的方式是错误的，或者传递变量有问题？我已经尝试取出 const 但仍然相同。这是我的代码 .h 文件

```
#include<iostream>
#include<istream>
#include<cmath>
#include<cstdlib>

using namespace std;

const int maxFinHeight = 100;
const int maxFinWidth = 100;

class Steampipe
{
private:
  int height, width;
  double steamTemp;

public:
  Steampipe (int H = 0, int W = 0, double sT = 0.0)
  {
    height = H;
    width = W;
    steamTemp = sT;
  }

  // Access function definitions
  int getWidth()const{return width;};
  int getHeight()const{return height;};
  double getSteamTemp()const{return steamTemp;};
  void setWidth(int dummysteamwidth) {width = dummysteamwidth;};
  void setHeight(int dummysteamheight){height = dummysteamheight;};
  void setSteamTemp(double dummysteamtemp){steamTemp = dummysteamtemp;};

  // Access function definitions
  friend istream& operator>>(istream& , Steampipe& ); // YOU MUST DEFINE
  friend ostream& operator<<(ostream& , const Steampipe& ); // YOU MUST DEFINE
};

class GridPt
{
private:
  double temperature;
  char symbol;

public:
  GridPt(double t = 0.0, char s = '?')
  {
    temperature = t;
    symbol = s;
  }

  // Access function definitions
  double getTemperature()const {return temperature;};
  char getsymbol() const {return  symbol;};

  void setTemperature (double T=0) {T=temperature;}
  void setsymbol (char S='?'){S=symbol;}
};

class Fin
{
private:
  int width, height; //width and height of fin
  int pipeLocationX, pipeLocationY; //grid location of lower left corner of steampipe
  double boundaryTemp; //temperature of fin surroundings
  Steampipe Pipe; //steampipe object - COMPOSITION
  GridPt GridArray[maxFinHeight][maxFinWidth]; // array of GridPts - COMPOSITION

public:
  int getwidth() {return width;}
  int getheight() {return height;}
  int getpipeLocationX(){return pipeLocationX;}
  int getpipeLocationY(){return pipeLocationX;}
  double get_boundarytemp(){return boundaryTemp;}
  void setwidth (int w){w=width;}
  void setheight (int h){h=height;} 
  friend istream& operator>>(istream& , Fin& ); // YOU MUST DEFINE
  friend ostream& operator<<(ostream& , const Fin& ); // YOU MUST DEFINE

  void initialize(); // YOU MUST DEFINE
};

void Fin::initialize()
{
  int j(0) ,i(0);
  for ( i = 0; i < height; i++)
  {
    for (  j = 0; j < width; j++)
    {
      if (   j == pipeLocationX && i == pipeLocationY
          && i <  Pipe.getHeight() + pipeLocationY
          && j < Pipe.getWidth() + pipeLocationX)
      {
        GridArray [j][i].setTemperature(Pipe.getSteamTemp());
        GridArray [j][i].setsymbol('H');
      }
      else if (j == (width -1) || i == (height -1) || j == 0 || i == 0)
      {
        GridArray [j][i].setTemperature(boundaryTemp);
        GridArray [j][i].setsymbol('C');
      }
      else
      {
        GridArray [j][i].setTemperature((Pipe.getSteamTemp() + boundaryTemp)/2);
        GridArray [j][i].setsymbol('X');
      }
    }
  } 
}

istream &operator >> (istream & in, Fin& f)
{
  int   ws, hs; 
  double  ts;
  char comma;

  cout << "Enter the height of the fin (integer) >>> ";
  in >> f.height;

  cout << "Enter the width of the fin (integer) >>> " ;
  in >> f.width;

  cout << "Enter the height of the streampipe (integer) >>> ";
  in >>hs;
  f.Pipe.setHeight(hs);
  cout << "Enter the width of the steampipe (integer) >>> ";
  in >> ws;
  f.Pipe.setWidth(ws);
  cout << "Enter coordinates of lower left corner of steampipe (X,Y) >>> ";
  in >> f.pipeLocationX >> comma >> f.pipeLocationY;

  cout << "Enter the steam temperature (floating point) >>> ";
  in >> ts;
  f.Pipe.setSteamTemp(ts);
  cout << "Enter the temperature around the fin (floating point) >>> "; 
  in >> f.boundaryTemp;
  return in;
}

ostream &operator << (ostream &stream, const Fin& t)
{
  int i = 0;
  int j = 0;

  stream << "The width of the fin is " << t.width << endl;

  stream << "The height of the fin is " << t.height << endl;

  stream << "The outside temperature is " << t.boundaryTemp << endl;

  stream << "The lower left corner of the steam pipe is at " 
         << t.pipeLocationX <<      "," << t.pipeLocationY << endl;

  stream << "The steampipe width is " << t.Pipe.getWidth() << endl;

  stream << "the steampipe height is " << t.Pipe.getHeight() << endl;

  stream << "The temperature of the steam is " << t.Pipe.getSteamTemp() << endl;

  for ( i = 0; i < t.height; i++)
{
    for (  j = 0; j < t.width; j++)
    {
        if (j == t.pipeLocationX && i == t.pipeLocationY && i < t.Pipe.getHeight() + t.pipeLocationY && j < t.Pipe.getWidth() + t.pipeLocationX)
        {
            t.GridArray [j][i].getTemperature();
            stream<<t.GridArray [j][i].getsymbol();

        }
        else if (j == (t.width -1) || i == (t.height -1) || j == 0 || i == 0)
        {
            t.GridArray [j][i].getTemperature();
            stream<<t.GridArray [j][i].getsymbol();
        }
        else
        {
            t.GridArray [j][i].getTemperature();
            stream<<t.GridArray [j][i].getsymbol();
        }

    }stream<<endl;
}   

  int coorx(0),coory(0);char comma;

  stream << "Enter the coordinates of the gridpoint of interest (X,Y) >>> "
         << endl;
  cin>>coorx>>comma>>coory;
  stream<<"The temperature at location ("<<coorx<<","<<coory<<") is "
         << t.GridArray << endl;

  return stream;
} 
```

我的驱动程序文件 cpp 是：

```
#include "pipe.h"

int main()
{
  Fin one; 
  cin >> one;
  one.initialize();
  cout << one;

  return 0;
} 
```

任何建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:18:42.630

在您的代码中，以下是错误的：

```
void setTemperature (double T=0) {T=temperature;}
void setsymbol (char S='?'){S=symbol;} 
```

肯定是：

```
void setTemperature (double T=0) {temperature = T;}
void setsymbol (char S='?') { symbol = S;} 
```

顺便说一句：将函数定义放在标题中不是一个好习惯（除非它是模板），而是将它们放在源文件中，只在标题中声明。

在您的代码中，您还可以`t.GridArray`直接在输出流中使用：
`stream<<t.GridArray;`
这不起作用。它不是 ostream 可以理解的函数或类型。使用您已声明的 i 和 j 变量并逐步遍历数组的每个元素以打印它们，与初始化数组时相同。

# c# - 变量声明的部分名称

> ID：11229876
> 
> 赞同：1
> 
> 时间：2012-06-27T15:31:54.443
> 
> 标签：c#, c, variables, types

我正在尝试从使用 C# 编译的 C 程序中提取调试信息，并且需要存储全局变量。

如果我有变量：

```
const unsigned char * volatile MyVariable; 
```

变量的名称是**MyVariable**，类型是**unsigned char**。什么是**const**和**volatile**。它们是类型的一部分吗？

我必须用一个类来表示一个变量，而我不知道如何构造它。这就是我现在的表现方式：

```
public class MyVariable
{
     public string Name;
     public string Type;

     public bool IsArray;
     public bool IsPointer;
     public bool IsConstant;
     public bool IsVolatile;
     // etc...

     public int Size; // in bytes
} 
```

我应该成为类型的一部分吗`volatile`？`const`这些是什么？属性？

## 编辑

抱歉，我认为我没有正确解释自己。**我的问题应该是我应该如何构造 MyVariable 类**我知道 const 关键字对变量以及 volatile 的作用。例如，当我创建一个将由多个线程访问的变量时，我使用了 volatile 关键字。

无论如何，根据答案，我应该将我的课程构建为：

```
public class MyVariable
{
     public string Name;
     public string Type;

     public string[] TypeQualifiers;

     public int Size; // in bytes
} 
```

其中 TypeQualifiers 将是这些关键字（类型限定符）的数组。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:51:32.973

你的项目会给你带来一些麻烦，因为你显然不是很熟悉 C，最重要的是，手头没有好的语言参考......

`const`,`volatile`并且`restrict`是“类型限定符”。例如，`unsigned char`是一个*不合格*的类型。限定符为编译器提供了有关如何处理内存的额外提示。它们几乎可以以任何组合连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:58:17.033

`const`并且`volatile`都是[*类型限定符*](http://en.wikipedia.org/wiki/C_syntax#Type_qualifiers)，尽管它们是完全独立的。

`const`关键字指定不能在代码中更改对象或变量。

限定符声明数据可以以`volatile`编译器无法控制或检测的方式更改其值，从而阻止编译器对代码应用任何优化（例如将对象的值存储在寄存器而不是内存中，它可能有改变）。

一个既是`const`又`volatile`意味着在当前代码中保证不会被改变的变量，但这并不意味着它不能在外部被改变。

* * *

**编辑**：作为旁注，`unsigned`是 C 中的类型修饰符，就像`signed`and一样`long`。我建议你也有独立的类型字段，
比如`IsSigned`,除了类型本身（, , 等等...）。`IsUnsigned``IsLong``int``char`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T16:18:04.733

首先阅读最新在线[C 标准](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)的第 6.7 节（声明） 。

您将很难在诸如示例中的平面数据结构中捕获 C 声明语法的所有细微差别。“类型”的概念可能会变得非常复杂，例如

```
int *(*(*f[N])())[M]; 
```

其中`f`类型为“指向函数的 N 元素指针数组，返回指向指向 M 元素指针数组的指针`int`”。您可能永远不会在实际代码中看到任何令人讨厌的东西，但它说明了从声明中提取类型信息的难度。

# objective-c - 如何在后台从 url 加载多张照片（异步）

> ID：11229882
> 
> 赞同：0
> 
> 时间：2012-06-27T15:32:16.947
> 
> 标签：objective-c, asynchronous, uiimageview, nsurlconnection, nsurl

我有这种方法，我用它来加载许多图像以滚动视图，但是当从 url 加载图像时，我的滚动视图被卡住了，我无法理解如何在后台加载它们，所以用户不会感觉到它。

**此方法将在“for”循环中调用几次 (8)。**

```
- (void)loadPhotosToLeftscroll{

    //getting image information from JSON
    NSMutableDictionary *photoDict;
    photoDict = [leftPhotoArray lastObject];

    //getting the photo
    NSString *photoPath = [photoDict objectForKey:@"photos_path"];
    NSLog(@"photo Path:%@",photoPath);

    NSData * imageData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:photoPath]];    

            UIImage *image = [UIImage imageWithData:imageData];
            // use the image how you like, say, as your button background

            //calculating the hight of next photo
            UIImageView *leftImage = [leftBlockScroll.subviews lastObject];

            //allocating photoView
            UIImageView *photoView = [[UIImageView alloc]initWithFrame:CGRectMake(5 , leftImage.frame.origin.y + leftImage.frame.size.height+5, image.size.width/2, image.size.height/2 )];
            photoView.userInteractionEnabled=YES;
            [photoView.layer setMasksToBounds:YES];
            [photoView.layer setCornerRadius:3];

            //getting items list
            NSDictionary *sh_items = [photoDict objectForKey:@"items"];

            //adding image button
            UIButton *imageOverButton = [UIButton buttonWithType:UIButtonTypeCustom];
            imageOverButton.frame = CGRectMake(0, 0, photoView.frame.size.width, photoView.frame.size.height);
            [imageOverButton addTarget:self action:@selector(LeftimagePressed:) forControlEvents:UIControlEventTouchUpInside];
            [imageOverButton setTag:[leftPhotoArray count]-1];
            [photoView addSubview:imageOverButton];

            //adding sh button to imageView
            [self addThe_sh_signs:sh_items To_ImageView:photoView];

            //subViewing the image to the scrollView
            [self insert_Image:image toImageView:photoView in_Scroll:leftBlockScroll];

            //calclulating the position of next imageView in scroll.
            nextLeftPhotoHight = photoView.frame.size.height + photoView.frame.origin.y + 5;

            //calculating the hight of the highest scroll view in both.
            leftBlockScroll.contentSize = CGSizeMake(160, [self theSizeOfScrollViewHight]);
            rightBlocScroll.contentSize = CGSizeMake(160, [self theSizeOfScrollViewHight]);
            isLoadindContant = NO;
            [self.view reloadInputViews];
            [leftBlockScroll reloadInputViews];

} 
```

请不要将我发送到一些试图解释如何使用异步的链接。试着按照你在这里看到的方法来解释。 **我在这里有任何问题，你需要帮助我。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:00:22.987

您必须以适当的方式异步执行此操作。我不认为有任何解决办法。我子类化了一个 UIImageView 对象，并将它的许多实例放置在 talbe 的单元格中（在您的情况下，在滚动视图中）。子类对象使用 url 初始化并异步加载它们的图像（有一些缓存，因此不会每次都加载图像）。

本教程在一开始对我帮助很大：http: [//www.markj.net/iphone-asynchronous-table-image/](http://www.markj.net/iphone-asynchronous-table-image/)

您只需将其应用于您的滚动视图。基本原理保持不变。

# mysql - 寻找一种从 MySQL 数据库中查询数据并将其写入输出 txt 文件的方法

> ID：11229883
> 
> 赞同：0
> 
> 时间：2012-06-27T15:32:17.963
> 
> 标签：mysql, convert-tz

寻找一种从 MySQL 数据库中查询数据并将其写入输出 txt 文件的方法。我正在尝试从远程 Windows 框中查询 Linux 服务器数据库。

MySQL 查询：

```
mysql -u XXX -pXXX -h ttplxapp-esm01.abc.com -D telalert -e "select max(convert_tz(start_time,\"+00:00\",\"-04:00\")) AS Time,group_concat(username SEPARATOR \" \") AS Contact, message AS Message from sends where convert_tz(start_time,\"+00:00\",\"-4:00\") like \"$query_date%\" group by alert_id order by Time desc ;" 
```

java 脚本或脚本将是理想的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:38:27.040

尝试`SELECT...FROM`带有`INTO OUTFILE`子句的语句。

[选择语法](http://dev.mysql.com/doc/refman/5.1/en/select.html)。

# r - 清除 R 中的绘图点

> ID：11229889
> 
> 赞同：2
> 
> 时间：2012-06-27T15:32:29.623
> 
> 标签：r, animation, plot

我正在尝试使用动画包在地图上生成“不断变化的”点图。地图由 shapefile 生成（来自 readShapeSpatial/readShapeLines 函数）。

问题是当它被绘制在一个 for 循环中时，结果是相加的，而理想的结果是让它进化。

有没有使用我缺少的 par() 的方法？

我的问题是：有没有办法只清除从点函数绘制的点而不清除整个图形，从而不必重新绘制 shapefile？

如果有人想查看代码：

```
# plotting underlying map
newyork <- readShapeSpatial('nycpolygon.shp')
routes <- readShapeLines('nyc.shp')
par(bg="grey25")
plot(newyork, lwd=2, col ="lightgray")
plot(routes,add=TRUE,lwd=0.1,col="lightslategrey")

# plotting points and save to GIF
ani.options(interval=.05)
saveGIF({
  par(bg="grey25")
  # Begin loop
  for (i in 13:44){
    infile <-paste("Week",i,".csv",sep='')
    mydata <-read.csv(file = infile, header = TRUE, sep=",")
    plotvar <- Var$Para
    nclr <- 4
    plotclr <-brewer.pal(nclr,"RdPu")
    class<- classIntervals(plotvar,nclr,style = "pretty")
    colcode <- findColours(class,plotclr)
    points(Var$Lon,Var$Lat,col=colcode)
  }
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:32:02.597

如果您可以接受墨水的残留阴影或光晕，您可以在背景选择中使用颜色 =“白色”或 == 进行过度绘图。我们无法访问您的形状文件，但您可以通过添加以下行来尝试：

```
points(Var$Lon, Var$Lat, col="grey25") 
```

它可能会在其他先前绘制的图形或边界中留下空白，因为它绝对不是面向对象的。lattice 和 ggplot2 图形模型更加面向对象，因此如果您想发布一个可重现的示例，这可能是“前进”的替代路径。我似乎记得 rgl 包在其重复中具有动画选项。

# asp.net-mvc-3 - 导入基数不匹配异常

> ID：11229891
> 
> 赞同：0
> 
> 时间：2012-06-27T15:32:39.357
> 
> 标签：asp.net-mvc-3, mef

我有一个主应用程序和一个插件。主应用程序正在导出一个`IHost`对象，而插件正在导入一个`IHost`对象。我运行了 mefx，它可以识别这两者。但是当我`/causes`使用插件时，它会给我一个 ImportCardinalityMismatchException。我的容器看到了插件，但是当我调用`Me.container.getExports(of IController)()`它时，它什么也没返回。

我的控制器看起来像这样：

```
Class Controller 
   Implements IController   
   ' ...
    <Import()>
    Public Property Host As Lazy(Of IHost)
   ' ...
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:08:20.017

我不得不`<ImportMany()>`在我的插件中。然后对于我要导入的变量，我需要制作它`IEnumerable(Of Lazy(Of IHost))`或者`Lazy(of IHost)`如果你想做一个`<Import()>`

# c# - 如何使用 C#/.NET 代码获取 ClickOnce 应用程序路径和版本号？

> ID：11229892
> 
> 赞同：1
> 
> 时间：2012-06-27T15:32:42.400
> 
> 标签：c#, .net, windows, clickonce

我想获取 ClickOnce 应用程序的路径和版本号，提供[ClickOnce](http://en.wikipedia.org/wiki/ClickOnce)应用程序的*名称*。

当我手动搜索它时，我在路径中找到它，如下所示：

```
'C:\Users\krishnaim\AppData\Local\Apps\2.0\1HCG3KL0.K41\VO5BM4JR.RPO\head..tion_7446cb71d1187222_0005.0037_37dfcf0728461a82\HeadCount.exe' 
```

但这一直在变化，它将成为一条硬编码的路径。是否有其他方法可以使用 C#/.NET 代码获取 ClickOnce 应用程序（例如，已安装的 HeadCount.exe）路径和版本号？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T16:13:46.403

这似乎有点奇怪，但是获取正在执行的程序集的当前目录有点棘手，所以我下面的代码可能比你想象的要多，但我向你保证，它正在缓解其他人可能尝试使用[Assembly 的一些问题。 GetExecutingAssembly](https://msdn.microsoft.com/en-us/library/system.reflection.assembly.getexecutingassembly%28v=vs.110%29.aspx) [.Location](https://msdn.microsoft.com/en-us/library/system.reflection.assembly.location%28v=vs.110%29.aspx)属性。

```
static public string AssemblyDirectory
{
    get
    {
        //Don't use Assembly.GetExecutingAssembly().Location, instead use the CodeBase property
        string codeBase = Assembly.GetExecutingAssembly().CodeBase;
        UriBuilder uri = new UriBuilder(codeBase);
        string path = Uri.UnescapeDataString(uri.Path);
        return System.IO.Path.GetDirectoryName(path);
    }
}

static public string AssemblyVersion
{
    get
    {
        var asm = Assembly.GetExecutingAssembly();
        //If you want the full four-part version number:
        return asm.GetName().Version.ToString(4);

        //You can reference asm.GetName().Version to get Major, Minor, MajorRevision, MinorRevision
        //components individually and do with them as you please.
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:05:37.023

为了执行 ClickOnce 应用程序更新，您不必手动执行此操作，只要您使用标准部署清单（除非您使用它们，否则我不知道如何使用 ClickOnce）。

MSDN 文章*[选择 ClickOnce 更新策略](http://msdn.microsoft.com/en-us/library/s22azw1e.aspx)*描述了应用程序更新的不同选项。

# c# - 文本框 onchange 事件

> ID：11229893
> 
> 赞同：0
> 
> 时间：2012-06-27T15:32:43.553
> 
> 标签：c#, javascript

所以我有一个文本框，我在其中添加了一个 markAsException 的 onchange 事件。

我的 javascript 是 -

```
function markAsException(recordID) {
    //alert("Exception");

    //mark exception column
    document.getElementById("ctl00_cpMain_lblScrollException_" + recordID).innerText = "Exception";
    document.getElementById("ctl00_cpMain_lblScrollException_" + recordID).style.color = "#FF0000";
    document.getElementById("ctl00_cpMain_tdScrollException_" + recordID).style.backgroundColor = "#99CCFF";

    //enable comments ddl and remove blank (first item)
    document.getElementById("ctl00_cpMain_ddlCommentId_" + recordID).disabled = false;
    document.getElementById("ctl00_cpMain_ddlCommentId_" + recordID).focus();
    document.getElementById("ctl00_cpMain_ddlCommentId_" + recordID).options[0] = null;
} 
```

我想要做的是，当用户更改文本框中的值时，将列标记为“异常”，然后将焦点放在下拉列表中，他们必须在其中选择异常原因。

这就是发生的事情.. 如果我在那个文本框上并更改它，然后选项卡，它会跳到下拉列表。

但是，如果我更改了值，然后简单地单击表单上的另一个文本框，我不会关注下拉列表。

我将如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:40:04.477

我建议使用 JQuery 的[change()](http://api.jquery.com/change/)函数。

优点是跨不同浏览器会更稳定。

就像是：

```
 $('#<%= TextBox1.ClientID %>').change(function(){
      // extract the recordID from the textbox - perhaps with an attribute?
      markAsException(recordID);
    }); 
```

我的评论越来越长，所以我正在扩展：

查看 JQuery[文档](http://api.jquery.com/ready/)以在页面完成加载时进行设置。如果 tb 是您的文本框的 ID，您的选择器将是

```
$('#<%= tb.ClientID %>') 
```

我建议你替换你的代码并使用

```
tb.Attributes.Add("recordID", recordId.ToString()); 
```

这会将您需要的 ID 添加到文本框标签上。进入我上面概述的功能后，您可以使用以下选择器在 javascript 中获取 recordID

```
var recordID = $('#<%= TextBox1.ClientID %>').attr('recordID'); 
```

全部一起

```
 $(document.ready(function(){
    $('#<%= tb.ClientID %>').change(function(){
      var recordID = $('#<%= tb.ClientID %>').attr('recordID');
      if(recordID){
        markAsException(recordID);
      }
    });
  }); 
```

# javascript - Javascript：用相同数量的另一个字符替换一个或多个相同的字符？

> ID：11229895
> 
> 赞同：1
> 
> 时间：2012-06-27T15:32:46.363
> 
> 标签：javascript, regex

我需要从 JS 字符串中转义一些特殊字符，但我只能用单个字符替换一个或多个匹配项。

例如，我想用 & 替换，`&amp;`但是当我转义这个字符串时：`&&&`我得到`&amp;&&`.

我一直在使用

```
input = input.replace(/&/g,"&amp;"); 
```

我知道这个问题的解决方案可能与使用匿名函数有关，但是我还需要转义大约 10 个其他字符。我看不到将替换作为变量传递给函数的方法。这是否意味着我必须编写 11 个单独的函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:34:30.950

您的代码没问题，看来您已经在没有`/g`.

您还可以使用：`replace(/(&)/g,"$1amp;");`

[在此处](http://jsfiddle.net/mED5f/)查看并测试代码。

# sql - Access 2010 查询混淆

> ID：11229897
> 
> 赞同：3
> 
> 时间：2012-06-27T15:32:50.730
> 
> 标签：sql, ms-access

只需要一些快速澄清

我的 Access 数据库中有 2 个查询应该返回反向结果：

```
SELECT Equipment.title
FROM Equipment
WHERE (((Equipment.[EquipmentID]) Not In (

    select EquipmentID
    from DownPeriod
    where UpDate is null
))); 
```

第二个只是排除了 In 之前的 Not。我的困惑来自这样一个事实，即如果 EquipmentID 字段在 DownPeriod 表中至少有 1 个空值，则上面发布的查询不会返回任何结果。

如果字段被填满，它就可以正常工作，并且反向查询列表始终有效。这让我觉得空值有问题。

现在这个字段永远不应该为空，但我想知道在不太可能发生空值的情况下我是否仍然可以让它工作。

提前谢谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T15:52:57.030

尝试加入：

```
SELECT Equipment.title FROM Equipment INNER JOIN DownPeriod
ON Equipment.EquipmentID = DownPeriod.EquipmentID
WHERE DownPeriod.UpDate is null 
```

和

```
SELECT Equipment.title FROM Equipment INNER JOIN DownPeriod
ON Equipment.EquipmentID = DownPeriod.EquipmentID
WHERE DownPeriod.UpDate is not null 
```

看看语法的改变是否能解决你的问题。

这不仅应该有效，而且我相信它比使用这些`IN()` `NOT IN()`方法更快（这可能是错误的，但它看起来更好读）。它还增加了快速更改“不为空”标准的能力，就像 IN->NOT IN 一样

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T16:36:27.450

我同意 StuckAtWork 的做法。但是，如果您仍然想了解为什么您的原始方法没有产生您想要的结果，我想我可以帮助您。

空字符串可能存在问题，这可能会使情况复杂化。但无论是否涉及空字符串，您都需要考虑一些更基本的问题。

这是我的`Equipment`表格版本。

```
EquipmentID title
1           one
2           two
3           three 
```

这是我的`DownPeriod`表格版本。

```
ID EquipmentID text_field
1  1           one
2  2           two
3              Null
4  3           three 
```

我的表中没有包含您的`UpDate`字段`DownPeriod`。这与你的问题无关。

我将您的 SQL 粘贴到一个新的 Access 查询中，从子查询中丢弃了该`WHERE`子句，并得到与此查询完全相同的结果 --- 没有返回行：

```
SELECT e.title
FROM Equipment AS e
WHERE
    e.EquipmentID Not In (
        SELECT EquipmentID
        FROM DownPeriod
        ); 
```

所以从数据库引擎的角度考虑这种情况。使用我的`Downloads`表版本，它有一组来自子查询的值（1、2、Null 和 3）。您要求它向您显示不在该**值**列表中`Equipment`的`EquipmentID`行。db 引擎只会为您提供该条件为的行。**`True`**

 **`Null`是问题所在。对于 each `EquipmentID`，当它考虑该值是否*不*存在于子查询集中时，它不知道。那`Null`是一个未知值......并且未知值可能与它正在考虑的当前值相同`EquipmentID`......或者可能是其他东西。但由于 db 引擎不知道实际值，它无法将条件评估为`True`，因此不会将该行包含在结果集中。表中的每一行都会发生同样的事情`Equipment`......因此您的查询结果集是空的（没有行）。

您可以通过`Null`使用如下子句从子查询结果集中排除值来获得所需的结果`WHERE`。但我认为 StuckAtWork 的建议是一个更好的方法。

```
SELECT e.title
FROM Equipment AS e
WHERE
    e.EquipmentID Not In (
        SELECT EquipmentID
        FROM DownPeriod
        WHERE EquipmentID Is Not Null
        ); 
```**

# linq - Linq 问题 - 需要 CollectionType

> ID：11229898
> 
> 赞同：0
> 
> 时间：2012-06-27T15:32:56.813
> 
> 标签：linq, entity-framework, c#-4.0, linq-to-entities

为什么我的 linq 查询不起作用？

我怀疑这可能与延迟加载有关。它*似乎*在 linqpad 中工作。

```
public IList<PaymentDto> GetDocumentPayments(int documentId, bool? allowRepeatPayments, byte[] paymentStatuses, int[] paymentMethods)
    {
        using (var ctx = ObjectContextManager<MyDataContext>.GetManager("MyDataContext"))
        {
            var payments = new List<PaymentDto>();

            var ps = new List<byte>();        
            if (paymentStatuses != null)
            {
                ps = paymentStatuses.ToList();
            }

            var pm = new List<int>();
            if (paymentMethods != null)
            {
                pm = paymentMethods.ToList();
            }

            IQueryable<Payment> data = 
                   from payment in ctx.ObjectContext.Documents.OfType<Payment>()
                   where
                       ps.Contains(payment.Status) && 
                       pm.Contains(payment.Method) &&
                       payment.DocumentId == documentId &&
                       (allowRepeatPayments == null || payment.AllowRepeatPayments == allowRepeatPayments)
                   orderby payment.Id
                   select payment;

            foreach (var p in data) // Fails here
            {
                payments.Add(ReadData(p));
            }

            return payments;
        }
    } 
```

引发错误：**需要 CollectionType。参数名称：collectionType。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T17:36:43.523

像这样的构造`(allowRepeatPayments == null || payment.AllowRepeatPayments == allowRepeatPayments)`可以对查询做一些有趣的事情。尝试执行以下操作时会发生什么：

```
if (allowRepeatPayments.HasValue)
{
    data = data.Where(p => p.AllowRepeatPayments == allowRepeatPayments);
} 
```

你可以对`paymentStatuses`和做同样的事情`paymentMethods`。

它可能会解决您的问题，但如果没有，无论如何它是一种改进，因为仅在必要时添加条件，而在不需要时 SQL 不会混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-10T08:48:27.100

框架的内部方法在将 LINQ 查询转换为 SQL 时抛出异常，使用与您使用的相同类型的空检查构造（例如

```
.Where(data => x & y & (values == null || values.Contains(data.value)));) 
```

**我刚刚在运行最早版本的 .Net 4 RTM** (4.0.30319.1)的服务器上遇到了同样的异常。它来自

```
 exception : System.ArgumentException: A CollectionType is required.
   Parameter name: collectionType

   at System.Data.Common.CommandTrees.ExpressionBuilder.Internal.ArgumentValidation.ValidateNewEmptyCollection(TypeUsage collectionType, DbExpressionList& validElements)
   at System.Data.Objects.ELinq.ExpressionConverter.NewArrayInitTranslator.TypedTranslate(ExpressionConverter parent, NewArrayExpression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.ConstantTranslator.TypedTranslate(ExpressionConverter parent, ConstantExpression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.UnarySequenceMethodTranslator.Translate(ExpressionConverter parent, MethodCallExpression call) ... 
```

该错误在互联网上非常罕见，并且在相同条件和较新版本的情况下不会发生，因此它似乎已在较新版本的 .Net 上得到修复。

Gert Arnold 的建议可能也可以避免错误，但上面的形式经常使用（如 SQL 对应形式），它简短而有用。

所以对于那些仍然遇到这个错误并且不明白为什么它在某些机器上工作而有时不能工作的人，我建议**检查他们的 .Net FW 版本**。

# iis-6 - 在 InstallShield 2009 上设置多个 IIS 自定义 HTTP 错误消息

> ID：11229899
> 
> 赞同：0
> 
> 时间：2012-06-27T15:32:56.723
> 
> 标签：iis-6, windows-installer, iis-7.5, http-error, installshield-2009

如何在 InstallShield 2009 安装的网站上设置 HTTP 自定义错误消息？

它看起来确实很简单。有一个 Internet 信息服务视图，我们可以在其中创建网站或虚拟目录对象，这些对象的选项卡之一看起来可以让我们设置自定义 HTTP 错误消息。

它甚至可以重置 1 或 2 个错误消息，但是当我尝试重置所有 HTTP 错误消息时，它确实失败了。

具体来说，这是我的 InstallShield 项目中的 ISIISCommon 表（XML 文件格式）：

```
<table name="ISIISCommon">
    <col key="yes" def="s72">ISIISCommon</col>
    <col def="S72">ISIISCommon_Parent</col>
    <col def="L255">DisplayName</col>
    <col def="s50">RootDir</col>
    <col def="i4">Attributes</col>
    <col def="L255">DefDoc</col>
    <col def="I4">SessionTimeout</col>
    <col def="I4">ScriptTimeout</col>
    <col def="S255">AnonyUserName</col>
    <col def="S255">AnonyPasswrd</col>
    <col def="S0">CustomErrors</col>
    <col def="L255">AppName</col>
    <col def="S72">SSLCert</col>
    <col def="L72">AppPool_</col>
    <col def="S255">Aspversion</col>
    <col def="S255">SslPassword</col>
    <col def="S255">HostHeaderName</col>
    <row><td>ISIISCommonVRoot</td><td>ISIISCommonWebsite1</td><td>##ID_STRING121##</td><td>WEB</td><td>25873</td><td>Index.html</td><td>20</td><td>90</td><td/><td/><td>400,*,URL,CustomError.html;401,1,URL,CustomError.html;401,2,URL,CustomError.html;401,3,URL,CustomError.html;401,4,URL,CustomError.html;401,5,URL,CustomError.html;403,1,URL,CustomError.html;403,10,URL,CustomError.html;403,11,URL,CustomError.html;403,12,URL,CustomError.html;403,13,URL,CustomError.html;403,14,URL,CustomError.html;403,15,URL,CustomError.html;403,16,URL,CustomError.html;403,17,URL,CustomError.html;403,2,URL,CustomError.html;403,3,URL,CustomError.html;403,4,URL,CustomError.html;403,5,URL,CustomError.html;403,6,URL,CustomError.html;403,7,URL,CustomError.html;403,8,URL,CustomError.html;403,9,URL,CustomError.html;404,*,URL,CustomError.html;405,*,URL,CustomError.html;406,*,URL,CustomError.html;407,*,URL,CustomError.html;412,*,URL,CustomError.html;414,*,URL,CustomError.html;500,*,URL,CustomError.html;500,100,URL,CustomError.html;500,12,URL,CustomError.html;500,13,URL,CustomError.html;500,15,URL,CustomError.html;501,*,URL,CustomError.html;502,*,URL,CustomError.html</td><td>##ID_STRING127##</td><td/><td>##ID_STRING31##</td><td/><td/><td/></row>
</table> 
```

您可能会注意到，我尝试将虚拟目录上的所有 HTTP 错误设置为重定向到 CustomError.html 页面。另请注意，我认为将此信息存储在 TD 元素中，而不是在其自己的 TABLE 中，是错误的，尤其是在 InstallShield/Windows Installer 世界中。

这在各个层面上都行不通。

首先，这是安装日志，

```
 MSI (s) (60:14) [12:28:49:025]: Invoking remote custom action. DLL: C:\Windows\Installer\MSI72A0.tmp, Entrypoint: CreateIISVRoots
    InstallShield 12:28:49: User legacy object preference is the following: 1 . This is based on the value of the following property: IISPREFERLEGACYOBJECTS
    InstallShield 12:28:49: InitIISObject
    InstallShield 12:28:49: CreateAppPoolFunction
    InstallShield 12:28:49: OpenKeyLog, pszMDPath =/LM
    InstallShield 12:28:49: AddKey, pszMDPath = /W3SVC/AppPools/MyAppPool
    InstallShield 12:28:49: OpenKeyLog, pszMDPath =/LM/W3SVC/AppPools/MyAppPool
    InstallShield 12:28:49: getvaluelog
    InstallShield 12:28:49: SetVRtStrProperty for property '1002' with value 'IIsApplicationPool' and strSubPath '/'.
[zip]
    InstallShield 12:28:49: SetVRtStrProperty for property '6006' with value 'Index.html' and strSubPath '/'.
    InstallShield 12:28:49: SetData, pszMDPath = /
    InstallShield 12:28:49: SetVRtDelimMultiszProperty for property '6008' with value '400,*,URL,CustomError.html;401,1,URL,CustomError.html;401,2,URL,CustomError.html;401,3,URL,CustomError.html;401,4,URL,CustomError.html;401,5,URL,CustomError.html;403,1,URL,CustomError.html;403,10,URL,CustomError.html;403,11,URL,CustomError.html;403,12,URL,Cus'.
    **InstallShield 12:28:49: SetVRtMultiszProperty for property '6008' and value '400,*,URL,CustomError.html' with length '522'**. 
```

从外观上看，它不喜欢使用 522 个字符来描述自定义错误。在 IIS 中，仅使用了前 259 个字符，因此只有少数自定义错误被正确设置，最后一个错误严重错误（生成的 403.12 的自定义错误 URL 为“cus”）。

有没有办法解决这个限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:32:59.670

我将 CustomError 页面从 CustomError.html 重命名为 ce.htm。这节省了一些空间，但还不够。一个更大的字符缓冲区保护程序是旧的 *. 代替

> 401,1,URL,CustomError.html;401,2,URL,CustomError.html;...;401,13,CustomError.html;401,2,URL,CustomError.html

我最终使用：

> 401,*,文件,ce.htm;

这就是虚拟目录行现在在 ISIISCommon 表中的样子：

```
 <row><td>ISIISCommonVRoot</td><td>ISIISCommonWebsite1</td><td>##ID_STRING121##</td><td>WEB</td><td>25873</td><td>Index.html</td><td>20</td><td>90</td><td/><td/><td>400,*,FILE,ce.htm;401,*,FILE,ce.htm;403,*,FILE,ce.htm;404,*,FILE,ce.htm;405,*,FILE,ce.htm;406,*,FILE,ce.htm;407,*,FILE,ce.htm;412,*,FILE,ce.htm;414,*,FILE,ce.htm;500,*,FILE,ce.htm;501,*,FILE,ce.htm;502,*,FILE,ce.htm</td><td>##ID_STRING127##</td><td/><td>##ID_STRING31##</td><td/><td/><td/></row> 
```

这可能并不适合所有场景（如果有人希望 401.1 和 401.2 有不同的客户错误怎么办？）。

此外，我必须直接在 InstallShield XML 项目文件上进行此更改，因为 GUI 无法理解（而且仍然可以，即使加载项目并正确构建它，自定义错误选项卡也是一团糟，我只是忽略了 DEFAULT 或 suberror 专用条目，它们不在生成的 MSI 文件中，或者这就是 Orca 所说的）。

我也从 URL 移到了 FILE，因为后者似乎更正交于身份验证。

阅读更好的解决方案会很棒，我仍然想知道为什么在这样一个表格世界中，有人认为存储这样的表格是个好主意。

# php - 在 PHP 中比较 2 个具有相同键的 JSON 数组

> ID：11229903
> 
> 赞同：1
> 
> 时间：2012-06-27T15:33:11.697
> 
> 标签：php, arrays, json

2 个具有相同键的不同 JSON 数组，如下所示：

阵列 1：

```
{ "fruit1" : "Apple", "fruit2" : "Banana", "fruit3" : "Grapes" } 
```

阵列 2：

```
{ "fruit1" : "First Fruit", "fruit2" : "Second Fruit", "fruit3" : "Third Fruit" } 
```

如您所见，两个具有相同键但值不同的数组，现在我想要的是我希望结果或显示如下：

```
First Fruit is Apple
Second Fruit is Banana
Third Fruit is Grapes 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T15:42:14.983

```
$str1 = '{ "fruit1" : "Apple", "fruit2" : "Banana", "fruit3" : "Grapes" }';
$str2 = '{ "fruit1" : "First Fruit", "fruit2" : "Second Fruit", "fruit3" : "Third Fruit" }';

$array1 = json_decode($str1);
$array2 = json_decode($str2);

foreach ($array1 as $key => $value) {
    if (isset($array2[$key]) {
        echo $value . " is " . $array2[$key];
    } else {
        echo $value . " has no match in array2.";
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T15:42:42.403

```
$array1 = json_decode($json1, true);
$array2 = json_decode($json2, true);

foreach($array1 as $key => $val) {
  if (isset($array2[$key])) {
    echo $array1[$key],' is ',$array2[$key];
    echo PHP_EOL;
  }
} 
```

# mysql - mysql多条件搜索

> ID：11229906
> 
> 赞同：0
> 
> 时间：2012-06-27T15:33:22.293
> 
> 标签：mysql

需要一些帮助来编写查询，因为我有包含 1000 条记录的数据库。

基本上我有一个包含以下字段的数据库

入口ID

日期

齿数

程序名

学生姓名

导师姓名

隔离技能

隔离知识

空腔技能

空腔知识

矩阵技能

矩阵知识

恢复性技能

恢复性知识

我想编写一个查询，在所有记录中搜索特定名称（例如“Joe Bloggs”），并且 procedureName 包含“Class II”

最重要的是，我希望它返回值 N、B 和 C 出现在isolationskill -restorativeKnowldge 列中的次数。

所以最后我可以看到这样的列表

希望这是有道理的。如果您需要更多信息，请告诉我。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:45:00.043

我认为这样的事情会给你你想要的东西，而不是你发布你想看到的东西，有点难说，但这会像平常一样弹出所有行，然后给你一个计数字段给定值 n、B、C 字段。多次应用此语法以获得您在不同字段上寻找的确切结果。

```
SELECT 
entryID, 
date, 
procedurename, 
studentName, 
tutorName, 
restorativeSkill, 
isolationKnowledge, 
cavitySkill, 
cavityKnowledge, 
matrixSkill, 
matrixKnowledge,
restorativeknowledge,
SUM(IF(isolationSkill = 'N', 1,0)), 
SUM(IF(restorativeKnowldge = 'B', 1,0)) FROM records 
WHERE procedureName = 'Class II' and Name = "Joe Bloggs"; 
```

# c# - ASP.NET C# System.Linq.Enumerable+WhereSelectEnumerable 错误

> ID：11229912
> 
> 赞同：0
> 
> 时间：2012-06-27T15:33:39.100
> 
> 标签：c#, asp.net, xml, linq

得到这个奇怪的 LINQ 错误。

标题 = System.Linq.Enumerable+WhereSelectEnumerableIterator`2[System.Xml.Linq.XElement,System.String

这是我的代码：

```
if (Request.QueryString["Keywords"] != null){
        string keywords = Request.QueryString["Keywords"];
            string myAppID = "HIDDEN";
            var xml = XDocument.Load("http://svcs.ebay.com/services/search/FindingService/v1?OPERATION-NAME=findItemsByKeywords&SERVICE-VERSION=1.0.0&SECURITY-APPNAME=" + myAppID + "&RESPONSE-DATA-FORMAT=XML&REST-PAYLOAD&keywords=" + keywords + "&paginationInput.entriesPerPage=5");
            XNamespace ns = "http://www.ebay.com/marketplace/search/v1/services";
            var titles = from item in xml.Root.Descendants(ns + "title")
                              select new{
                                  title = xml.Descendants(ns + "title").Select (x => x.Value),
                              };
        foreach (var item in titles){
                Label1.Text += item;
            } 
        } 
```

XML 如下所示：

```
<findItemsByKeywordsResponse xmlns="http://www.ebay.com/marketplace/search/v1/services">
<searchReslut count="5">
<item>
    <title></title>
</item>
<item>
    <title></title>
</item>
<item>
    <title></title>
</item> 
```

试图让它正确输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T15:43:01.517

代替

```
title = xml.Descendants(ns + "title").Select (x => x.Value) 
```

改成

```
title = item.Value 
```

按照 ChrisGessler 的建议进行编辑，但根据我的建议：

```
if (Request.QueryString["Keywords"] != null)
{
    string keywords = Request.QueryString["Keywords"];
    string myAppID = "HIDDEN";
    var xml = XDocument.Load(/* snip */);
    XNamespace ns = "http://www.ebay.com/marketplace/search/v1/services";
    var titles = xml.Root.Descendants(ns + "title").Select(x => x.Value);
    Label1.Text = String.Join(null, titles);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:55:58.370

我在想这个：

```
var titles = from item in xml.Root.Descendants(ns + "title")                               
             select new{                                   
                title = xml.Descendants(ns + "title").Select (x => x.Value)}; 
```

应该：

```
var titles = from item in xml.Root.Descendants(ns + "title")                               
             select item.Value); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-28T17:54:24.867

快速片段

.. 作为在 cshtml 剃须刀页面中使用 mvc 网格时的示例..

..

```
 .RenderValueAs(
       item => @Html.ActionLink(
        (
         from tsrItem in (item.<yourColumnName>) 
         where tsrItem.<IdField> == item.<IdField> 
         select tsrItem.<desiredColumn>
        ).FirstOrDefault(), 
```

.. 希望能帮助到你

# ruby-on-rails - Ruby 1.9：如何简化删除前导和尾随 p 标记的代码

> ID：11229915
> 
> 赞同：0
> 
> 时间：2012-06-27T15:33:42.547
> 
> 标签：ruby-on-rails, ruby

我有使用 simple_format 的字符串，所以它们周围总是有 p 标签。我有一些代码可以去除周围的 p 标签，但我知道必须有更好的方法。您将如何简化以下代码？

```
<% my_string = "something" %>
<% my_string = simple_format my_string %> 
```

当然，`my_string`最终以`<p>something</p>`

```
This removes the opening p tag. 
<% my_string[0..2] = "" %>

This removes the closing p tag.
<% my_string.chop! %>
<% my_string.chop! %>
<% my_string.chop! %>
<% my_string.chop! %> 
```

注意：我不想删除所有 p 标签，只删除`simple_format`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:52:04.970

如果您已经应用了 p 标签：

```
mystring = "<p>something</p>"
# => "<p>something</p>"
mystring[3..-5]
# => "something" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:42:25.513

`<%- and -%>`抑制前导和尾随空格，包括尾随换行符，并且可以与`<% and %>`.

[http://api.rubyonrails.org/classes/ActionView/Base.html](http://api.rubyonrails.org/classes/ActionView/Base.html)

# algorithm - 在受限的 4 列报纸网格中将图像放置在故事旁边的算法

> ID：11229917
> 
> 赞同：1
> 
> 时间：2012-06-27T15:33:47.980
> 
> 标签：algorithm, layout, printing, bin-packing

这个问题是关于任何代码或指针，这些代码或指针有助于在受约束且定义明确的网格内“接近”故事的布局。

这些是基础知识和输入：

*   整个对象被称为报纸。它有一组故事（文本长度不同）
*   每个故事可以有一个与之关联的图像，也可以没有
*   报纸会自动分成 4 栏。文本从左上到右下，每列向下流动
*   图像可以放置到固定位置 - 左上、中上、右上、左中、中、右中、左下、中下、右下
*   放置图像时，它可以跨越 1 到 3 列。根据设置的跨度自动调整高度以适应比例。
*   所有实际的布局工作（以及围绕文本流动的图像）都已完成 - 算法所需的只是决策制定

总的问题是将故事以一种有趣的方式放置在固定的布局中，使图片靠近与之相关的故事，并表现出有趣的位置和跨度变化，从而使印刷的阅读体验变得有趣和美观.

这是算法所需的工作：

*   当一个带有图片的故事被放到报​​纸上时，图片的至少一个边缘必须触及它所涉及的故事。
*   我们需要决定是否对故事进行重新排序，以便图像密度不会在一个区域过于偏颇，例如前 4 页有很多图片，而报纸的其余部分只是文字。
*   如果我们选择重新排序和打乱故事，那么解决这个放置问题的最佳方法是什么？

一般来说，我不确定这是否属于装箱问题——从某种意义上说，故事可以重新排序以最小化空白；因为我们需要将图像放置在故事“附近”。

任何有关如何解决此问题的指针或有助于解决类似问题的代码都将受到赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:14:33.943

假设故事的顺序将使这些故事文本按列顺序一个接一个地出现。如果故事有图片，那么图片可以在故事文本的上方/下方/左侧/或右侧

1.  生成所有可能的故事和图片顺序
2.  如果任何图片位置不合适，则丢弃该订单（它不能位于最左侧列的左侧，或者如果放置在指定位置，则图片不会出现在允许的位置之一）。

剩下一组符合放置规则的可能故事/图片顺序。然后，您可以将它们显示为缩影，并让子编辑选择最好的。

# php - 如何使用 jquery 从 php 变量中显示 div

> ID：11229922
> 
> 赞同：3
> 
> 时间：2012-06-27T15:34:05.293
> 
> 标签：php, jquery, checkbox, doctrine

我正在从 foreach 循环中填充复选框列表，并为每个复选框提供一个 ID。我在下面添加了一组会出现的 div，具体取决于创建的复选框。我在想我可以将 id 变量加载到 jQuery if 语句中，然后使用 .toggle 来显示或隐藏相应的 div。

```
<?php 
//Call Programs
$getPrograms = Doctrine::getTable('Program')->createQuery()->where('subsection=?', 'mfa')->orWhere('subsection=?', 'mps')->orWhere('subsection=?', 'mat')->orWhere('subsection=?', 'ma')->orderBy('title ASC')->execute(); ?>

    <div class="form_row">
     <label>
    <span><sup class="required_form_item">*</sup>Select Program</span>
    </label>
        <div class="buttonColumn" style="margin-left:170px;">
        //loop the records in with checkboxes
        <?php foreach ($getPrograms as $prog): ?>
              <?php 
              $subsection = $prog->getSubsection();
              $subsection = strtoupper($subsection);

              $trimProg = trim($prog->getTitle(), ' ');
              $removeChars = array(" ", "&");
              $trimProg = str_replace( $removeChars, '', $trimProg ); 
              $trimProg = preg_replace('/\s\s+/', '_', $trimProg);

              ?>
              //custin id matches record title
              <input type="checkbox" name="program" class="isChecked" id="<?php echo $trimProg; ?>" value="<?php echo $subsection . " " . $prog->getTitle() ?>" /><?php echo $subsection . " " . $prog->getTitle() ?><br />
        <?php endforeach ?>
        </div>
    </div> 
```

在选中匹配的复选框之前，以下 div 将设置为 display:none。

```
 <div class="form_row sessionTime" id="Program1" style="display:none;">
    Please choose an session time:
    <input type="checkbox" name="schedule" value="5:00 pm" />5:00 pm<br />
    </div>

    <div class="form_row sessionTime" id="program2" style="display:none;">
    Please choose an session time:
    <input type="checkbox" name="schedule" value="10:00 pm" />10:00 pm<br />
     </div>    
    ... 
```

这就是我认为可行的方法......但是唉......它没有

```
$('.isChecked').click( function() {

    if ( $(this).is(':checked') ) {
      $thisID = $(this).attr("id");
      $('.'+ $thisID).show();
    }
    else {
      $('.'+ $thisID).hide();
    }
  }
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:56:46.837

我在@home 测试了这段代码，它可以按照您的需要工作

```
<html>
<head>
    <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    <script>
        $(document).ready(
            function()
            {
                $('.isChecked').click( 
                    function() 
                    {

                        if ( $(this).is(':checked') ) 
                        {
                             $(this).show();
                        }
                        else
                        {
                            $(this).hide();
                        }
                    }
                ); 
            }
        );
    </script>
</head>
<body>
    <form>
        <input type="checkbox" name="program" class="isChecked"/>
        <input type="checkbox" name="program" class="isChecked"/>
        <input type="checkbox" name="program" class="isChecked"/>
        <input type="checkbox" name="program" class="isChecked"/>
    </form>
</body> 
```

我认为您的代码中的问题可能来自 $(document).ready() 处理程序，该处理程序在将动作侦听器绑定到它之前等待整个 DOM 被加载。更重要的是，你的 jquery 代码对我不起作用。我的版本似乎可以工作，但是一旦隐藏了复选框，用户就无法再处理它们了。

否则，我认为在您的模板中执行一些 Doctrine 请求是一个非常糟糕的主意。

再见 ！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T19:19:53.577

您应该使用“Program1”作为`class`名称而不是`id`这样

```
<div class="form_row sessionTime Program1" style="display:none;">
  Please choose an session time:
  <input type="checkbox" name="schedule" value="5:00 pm" />5:00 pm<br />
</div> 
```

您的 jQuery 代码应该可以工作，您可以将其简化如下：

```
$('.isChecked').click( function() {
  if ( $(this).is(':checked') ) {
    $('.'+ this.id).show();
  }
  else {
    $('.'+ this.id).hide();
  }
}); 
```

# magento-1.4 - 将照片添加到 magento 电子商务网站

> ID：11229925
> 
> 赞同：0
> 
> 时间：2012-06-27T15:34:09.837
> 
> 标签：magento-1.4, magento

我最近被分配了恢复我们旧的 magento 网站的项目，该网站是为一家书店而设计的，版本为 1.4.1.1。我需要做的第一件事是更新网站上的库存，该网站有大约 95,000 件商品。做这个的最好方式是什么？我的库存目前都在一个 mysql 数据库中。其次，我需要为所有条目上传图片，有没有一种方法/地方可以为图片指定一个基本网址，然后只需添加特定位置（即 bookpic.isbn.gif 其中isbn将根据在书的isbn上）？我看到一年多以前的一篇文章列出了很好的参考网站，我在哪里可以获取更新的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:51:50.180

查看 cutesave 以轻松实现和导入简单产品： [https ://github.com/magento-hackathon/cutesave](https://github.com/magento-hackathon/cutesave)

[https://github.com/magento-hackathon/cutesave/wiki/Cutesave-Tests](https://github.com/magento-hackathon/cutesave/wiki/Cutesave-Tests)

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T16:58:01.240

我使用的另一个解决方案是从平面文件导入产品的[数据流配置文件（Admin->System->Import/Export）。](http://www.magentocommerce.com/knowledge-base/entry/introduction-to-magento-dataflow/)我将产品从另一个数据库导出到一个平面文件，然后使用数据流导入所有产品。

我[参考了一篇文章](http://www.blog.magepsycho.com/how-to-import-product-images-from-external-url-in-magento/)，该文章讨论了修改配置文件以向导入过程添加一个额外的步骤，它从平面文件中提供的 URL 下载图像并将其保存到 media/import 目录，然后再尝试检查 media/import目录以导入产品的图像。

# php - PHP 会话变量和 GET 请求

> ID：11229930
> 
> 赞同：0
> 
> 时间：2012-06-27T15:34:22.360
> 
> 标签：php, html, session, post, get

再会，

我正在创建一个用户登录名为“index.html”的网页，当用户从“index.html”提交表单时，它会将数据发布到“home.php”站点。现在我在“home.php”中，我可以检索发布的变量，对照数据库检查它们并对用户进行身份验证。一旦进入“home.php”文件，我希望用户向“home.php”站点发出 GET 请求以显示不同的数据。有没有办法做到这一点并保持身份验证？

现在我收到一条通知，说 POST 变量未定义。（显然，因为我没有发布任何东西）

```
Notice: Undefined index: pass in C:\xampp\htdocs\home.php on line 7 
```

谢谢，马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:37:29.043

听起来您想使用会话。

* * *

见：[http ://www.w3schools.com/php/php_sessions.asp](http://www.w3schools.com/php/php_sessions.asp)

见：[http ://www.tizag.com/phpT/phpsessions.php](http://www.tizag.com/phpT/phpsessions.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T15:54:27.043

一旦您执行了初始身份验证检查，即表单提交和帐户验证，您应该为用户分配某种形式的会话令牌。这是一个您可以验证其真实性的令牌，用于对后续请求进行速记验证。您可以通过以下几种方式创建此令牌：

1.  创建一个简单的表来跟踪授权的会话令牌及其到期日期。这可确保仅允许您创建的会话、绑定到单个帐户并具有保证的到期日期。
2.  创建加密令牌格式，以便会话令牌实际上是一个加密数据容器，您只能在服务器端使用私有的旋转密钥读取它。令牌将包含有关用户和过期的信息，并消除对服务器端表的需要。

除了每个令牌的基本信息之外，最好包含对初始身份验证请求的 UserAgent 和 IPAddress 的引用，这样您就可以确保不会发生会话劫持。

创建令牌后，您需要将其存储在交叉请求位置；它可以是会话或 cookie 变量。这主要是一种偏好，但无论哪种方式，您都应该确保它只能从 HTTP 请求而不是 JS 请求访问，以防止 XSS（跨站点脚本）。查看这些关于会话和 cookie 的文章：

*   [http://www.w3schools.com/php/php_sessions.asp](http://www.w3schools.com/php/php_sessions.asp)
*   [http://www.w3schools.com/php/php_cookies.asp](http://www.w3schools.com/php/php_cookies.asp)

现在您有了一个可以在站点的任何位置使用的令牌，您需要为每个页面创建一个身份验证处理程序，以检查此令牌并验证它是否有效。一旦您确认它是真实的，您就可以使用它来确定哪个用户正在查看该页面以及他们应该拥有哪些权限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T15:37:21.600

做这个

```
$pass = isset($_POST['pass']) ? $_POST['pass'] : null; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T15:39:31.160

例如，您可以这样做：

```
echo "<form method='post' action='home.php?parameter1=".$variable1."'>"; 
```

然后你有 POST 和 GET 变量。

编辑：但我想我误解了你，使用 SESSION 变量通过页面保持身份验证。

# unix - 14位日期的时差YYYYmmDDHHMMSS

> ID：11229931
> 
> 赞同：1
> 
> 时间：2012-06-27T15:34:22.393
> 
> 标签：unix

我需要一个 Unix 脚本，我可以找到 2 次之间的时间差，看起来像 YYYYmmDDHHMMSS

例子

T1=20120624192555

T2=20120624204006

所以时差将是=1:14:11

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:55:18.807

我不确定您是否可以指定日期格式，但这是一个相当冗长的`date`解决方案：

```
# Get seconds since epoch
D1=$(date --date "${T1:0:4}-${T1:4:2}-${T1:6:2} ${T1:8:2}:${T1:10:2}: ${T1:12:2}" +%s)
D2=$(date --date "${T2:0:4}-${T2:4:2}-${T2:6:2} ${T2:8:2}:${T2:10:2}: ${T2:12:2}" +%s)

date --date "0 + $(( D2 - D1 )) seconds" +%T 
```

有关 ${VAR:OFF:LEN} 参考，请参见[此处](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)。

注意：正如*jrouquie*下面提到的，超过 24 小时时会失败。这是`date`命令的限制，$(( D2 - D1 )) 仍然在几秒钟内给出正确的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:00:41.790

这是 Thor/kjp 和我的最佳解决方案：

```
#!/bin/bash
function seconds_since_epoch() {
    echo $(date --utc --date "${1:0:4}-${1:4:2}-${1:6:2}
                              ${1:8:2}:${1:10:2}:${1:12:2}" +%s)
}
difference=$(( `seconds_since_epoch $2` - `seconds_since_epoch $1` ))
echo \
`expr $difference / 3600`:\
`expr "(" $difference / 60 ")" % 60`:\
`expr $difference % 60` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:52:54.277

```
time1=`echo $1 | sed -r 's/([0-9]{4})([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})/\1-\2-\3 \4:\5:\6/'`
time2=`echo $2 | sed -r 's/([0-9]{4})([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})/\1-\2-\3 \4:\5:\6/'`

seconds1=`date --utc -d "$time1" +%s`
seconds2=`date --utc -d "$time2" +%s`
difference=`expr $seconds2 - $seconds1`

echo `expr $difference / 3600`:`expr "(" $difference / 60 ")" % 60`:`expr $difference % 60` 
```

请注意使用`--utc`which 可以防止夏令时出现错误。

注意事项：

此脚本不检查输入。

它假设 2 美元 > 1 美元。

它可以被重写以分解重复的代码

**编辑**：关于第一条评论，这里是一个没有“-r”选项到 sed 的版本（-r 表示 --regexp-extended，这里允许省去所有反斜杠）。

```
time1=`echo $1 | sed 's/\([0-9]\{4\}\)\([0-9]\{2\}\)\([0-9]\{2\}\)\([0-9]\{2\}\)\([0-9]\{2\}\)\([0-9]\{2\}\)/\1-\2-\3 \4:\5:\6/'`
time2=`echo $2 | sed 's/\([0-9]\{4\}\)\([0-9]\{2\}\)\([0-9]\{2\}\)\([0-9]\{2\}\)\([0-9]\{2\}\)\([0-9]\{2\}\)/\1-\2-\3 \4:\5:\6/'`

seconds1=`date --utc -d "$time1" +%s`
seconds2=`date --utc -d "$time2" +%s`
difference=`expr $seconds2 - $seconds1`

echo `expr $difference / 3600`:`expr "(" $difference / 60 ")" % 60`:`expr $difference % 60` 
```

# c++ - 为什么 std::set::lower_bound(x) （有效地）定义为最小数 >= x 而不是最大数 <= x？

> ID：11229934
> 
> 赞同：11
> 
> 时间：2012-06-27T15:34:35.533
> 
> 标签：c++, stl, set

也许我误解了 的技术定义，`lower bound`但我希望如果我有一个集合`a = { 0, 3, 4 }`并计算出`a.lower_bound(2)`结果会是`0`. 即我希望`std::set::lower_bound`接近下确界的数学[概念](http://en.wikipedia.org/wiki/Infimum)

然而标准库将其定义为不小于（有效地`>=`）x 的最大数。

这背后的原因是什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-27T15:49:47.297

" `[lower|upper]_bound`" 函数旨在返回集合中的一个位置，您可以在其中插入一个不会违反集合顺序的键。因为 STL 集合的迭代器指向下一个元素之前，如果`lower_bound(2)`将迭代器返回到`0`，那么插入`2`将违反集合的顺序，它现在是`{2, 0, 3, 4}`。上限用于显示您可以在不违反设置顺序的情况下插入的最后一个位置。

如果您的集合可能有重复的键条目，这将非常有用。考虑`{0, 3, 3, 4}`。`lower_bound(3)`将迭代器返回到这里：`{0, *, 3, 3, 4}`，而`upper_bound(3)`将它返回到这里：`{0, 3, 3, *, 4}`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T16:44:00.793

`lower_bound`考虑和`upper_bound`一起的行为可能会有所帮助。

在 STL 中，范围始终是闭开区间。`first`由两个迭代器和分隔的范围包括和`last`之间的所有元素，包括和不包括。使用区间表示法，我们将其表示为.`first``last``first``last``[first, last)`

`lower_bound`并被`upper_bound`定义为找到与指定值相等的元素*范围。*如果您在 and 之间进行迭代`lower_bound(x)`，`upper_bound(x)`您将遍历所有比较等于 的元素`x`。如果没有元素等于`x`，则保证`lower_bound(x) == upper_bound(x)`。

对于每个键最多有一个元素，这个特性不太重要`std::map`，但对于非唯一关联容器和`std::lower_bound`可用于任意排序元素序列的非成员来说，这是一个非常有用的特性。

[请注意，如果您想同时获得*下限*和上限，则应`equal_range`改为调用，它会同时返回。]

# perl - 多行 grep -P [ Perl extension ] 匹配的错误行号

> ID：11229938
> 
> 赞同：0
> 
> 时间：2012-06-27T15:34:46.470
> 
> 标签：perl, sed, awk, grep, pcre

我一直在使用 `grep`with `perl`extension 进行多行匹配。但是事实证明，所有匹配的行号取决于第一个多行匹配中的行数！

`grep`查找`c`函数 start的正则表达式：

```
 grep -iPn '^[^\S\n]*?\w+\s+\w+?\s*\([\w-0-9,/* \s]*\)\s*\{$' 
```

我可以用一个例子更好地解释：

假设源文件中存在这两个函数

```
 int f1(int a) {       

      int 
      f2 (int b )        
      { 
```

在这种情况下，grep 成功匹配正则表达式，输出到 stdout 的行号与源文件的行号一致。

当多行函数首先出现时会出现问题。这会改变行号输出，在检查文件一段时间后，我得出了结论。多行函数匹配但被 grep 读取为单行，因此它为整个函数分配一个单行号。函数后面的下一行根据“函数定义开始正则表达式”的行数缩短其行号占据。

我的文件中有许多多行`C`函数，并且每个函数的行号都太偏离了。

有没有办法纠正这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T16:10:45.817

对相同的正则表达式使用 pcregrep 会显示正确的行号！

```
 pcregrep -Mni '^[^\S\n]*?\w+\s+\w+?\s*\([\w-0-9,/* \s]*\)\s*\{$' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-12T19:44:44.337

您的解决方案不适用于我的 (linux, gnu) grep。

我需要添加`-z`以使其工作。用 -z “行”由空字符分隔；这样你就有一个“行”，所以行号不起作用:(但字节偏移量可以。有时这就足够了......

因此，使用 grep：

```
grep -ziPbo '^[^\S\n]*?\w+\s+\w+?\s*\([\w-0-9,/* \s]*\)\s*\{$' 
```

获得

```
24:int 
f2 (int b )        
{ 
```

# javascript - JavaScript 不能在 IE 中运行？

> ID：11229949
> 
> 赞同：-1
> 
> 时间：2012-06-27T15:35:06.317
> 
> 标签：javascript, jquery, iframe

所以，我从网上偷了剧本。基本上，它应该调整 iframe 的大小以适应其内容。

```
function sizeIFrame()
{
    var helpFrame = jQuery("#elastic");
    var innerDoc = (helpFrame.get(0).contentDocument) ? helpFrame.get(0).contentDocument : helpFrame.get(0).contentWindow.document;
    helpFrame.height(innerDoc.body.scrollHeight + 35);
} 
```

不过，它似乎在 Internet Explorer 中不起作用！iframe 源位于同一台服务器上，所以这不应该是问题。知道有什么问题吗？iframe ID 是`#elastic`. 我已经在 Firefox、Chrome 和 Safari 中对此进行了测试，并且它在所有三个中都可以正常工作，就像它应该做的那样。

* * *

**编辑**

我决定用另一个更强大的 jQuery 解决方案替换脚本。虽然它不像我希望的那样轻巧，但它似乎可以工作。

见：[http ://sonspring.com/journal/jquery-iframe-sizing](http://sonspring.com/journal/jquery-iframe-sizing)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T18:37:01.687

我设法通过简单地用这个更大的 jQuery 解决方案替换我的解决方案来让它工作。虽然更大，但它就像一个魅力！

[http://sonspring.com/journal/jquery-iframe-sizing](http://sonspring.com/journal/jquery-iframe-sizing)

# ios - 禁用的自定义 UIButton 在不同的地方显示不同的图像

> ID：11229953
> 
> 赞同：0
> 
> 时间：2012-06-27T15:35:14.847
> 
> 标签：ios, image, uibutton

我有一些自定义 UIButtons 出现在不同的地方，但使用相同的图像。禁用时，它们看起来彼此不同，即使所有设置都相同。使用按钮的一个地方是在表格视图单元格中，另一个只是作为 nib 布局的一部分。任何线索为什么这些看起来如此不同？

在表视图中启用：![在表格视图中启用](../Images/02af549b06b7332cff9da3e93a1f09a8.png)

在表视图中禁用：![在表视图中禁用](../Images/e45fc7b75c0542f368fe5baaa7ae1f5a.png)

在笔尖中禁用：![在笔尖中禁用](../Images/f5c799d60c066ab3f23789146c0edf83.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T15:42:31.373

默认情况下，按钮在禁用时会应用重影效果。`adjustsImageWhenDisabled`您可以通过将该属性设置为 NO 来关闭此行为。这在 Interface Builder 中也可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T17:02:34.600

视图控制器超类中的代码正在为禁用状态设置图像，所以它看起来当然不同。

对不起，噪音。

# ruby-on-rails - Ruby - 如何获取和循环从数据库返回的对象中的所有值？

> ID：11229954
> 
> 赞同：0
> 
> 时间：2012-06-27T15:35:16.933
> 
> 标签：ruby-on-rails, ruby

我有这条线：

```
@users = database['users'].find(:all).limit(10) 
```

它返回这个对象：

```
<Mongo::Cursor:0x8759a858 namespace='app-development.users' @selector=:all @cursor_id=> 
```

我认为它收集了从数据库中获得的 10 个用户。那是对的吗？我尝试像这样迭代它：

```
 @users.each {
        |info|
      logger.debug ".....................single user: " + info.inspect
    } 
```

但我收到了这个错误：

```
BSON::InvalidDocument (BSON.serialize takes a Hash but got a Symbol): 
```

帮助不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:50:58.550

如果您想查看文字结果，请尝试附加`to_a`到查询中。这应该会给你一个包含十个项目的数组。

```
@users = database['users'].find(:all).limit(10).to_a 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T15:50:03.753

我对 mongo 不熟悉，但试试这个：

```
@users.each do |info|
   logger.debug ".....................single user: #{info.inspect}"
end 
```

#{} 允许您在双引号字符串中评估 ruby​​ 代码。

# jquery - jquery ajax 响应有时很慢

> ID：11229959
> 
> 赞同：0
> 
> 时间：2012-06-27T15:35:30.653
> 
> 标签：jquery, ajax

我有一个关于 jquery ajax() 的问题。我创建了一个表格网格，并且需要使用 tab 键在单元格之间跳过。网格的构造使得需要调用 ajax 两次（用于保存前一个单元格并在第二个单元格中显示输入）。我的问题是，当有人使用选项卡编辑单元格时，有时响应很慢。正常响应时间约为 40-70 毫秒，然后在相同情况下响应时间超过 1 秒。这是为什么呢？在我看来，服务器没有注意，因为当编辑当前单元格有延迟时，这个问题更常见。长响应不是由编辑的数据类型或类似的东西引起的。看起来它完全是随机的..我不想重新制作网格，因为除了这个问题之外一切都很好......谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:53:54.003

我看到了两种可能的方法来解决这个问题。

1.  模块化。如果可以的话，将网格隔离到一个沙盒原型中，除了重现错误所需的之外，没有其他任何实现。如果您的代码是模块化的，这很容易，如果不是，则可能是不可能的。

    隔离行为的第二种方法是实际断开与服务器的连接。这就是我的意思：可以修改您的 ajax 以简单地返回一个“模拟”对象。这样您就知道没有延迟或意外的数据类型。这个概念被称为“数据模拟”，类似于测试驱动开发设置。这将为您证明请求响应回调中是否有问题。但是，我认为不是。

2.  事件。出于某种原因，您的描述听起来可能与事件有关。如果某些东西被破坏了，将你的网格隔离成一个原型可能会意外地解决这个问题。所以这是我在这种情况下的建议：

    A. 跨浏览器测试错误案例。事件在不同的浏览器中表现不同。这可能会给您提示根本原因。

    B. 逐步调试您的代码。如果正在产生一系列事件，或者如果另一个处理程序在不应该介入的情况下介入 - 你最好的选择是在运行时捕获它。

    C. Chrome、右键单击、检查元素、脚本选项卡和设置断点是帮助解决此问题的强大工作流程。

    D. 自定义事件有一个常见的情况，需要 stopPropagation() 或 preventDefault() 将额外的事件操作与处理程序的 DOM 堆栈链接分开。这对你来说可能是也可能不是，我提到它的原因是 - 当我过去遇到它时，它最初看起来是随机的并且难以重现。[这是 MDN 上此信息的链接](https://developer.mozilla.org/en/DOM/event.preventDefault)。

希望有帮助！纳什

# java - 如何在两个不同的 tomcat 实例中部署的两个 Web 应用程序之间共享会话

> ID：11229963
> 
> 赞同：2
> 
> 时间：2012-06-27T15:35:50.800
> 
> 标签：java, session, spring-security, single-sign-on, josso

我有两个不同的 web 应用程序在两个不同的 tomcat 实例上运行。我需要有一个包含两个应用程序链接的公共页面。但我应该只能登录一次，并且应该能够访问其他应用程序中的链接而无需再次登录。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T15:39:15.227

查看[josso](http://www.josso.org/confluence/display/JOSSO1/JOSSO+-+Java+Open+Single+Sign-On+Project+Home)，您可以使用它在您的应用程序中创建单点登录解决方案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:41:03.790

您可以使用令牌参数，其中令牌可以是用户名/一些加密的凭据。您可以在 2 个应用程序中验证凭据是否正确。

另一种方法是，如果您的应用程序位于同一域下，则可以设置 cookie 并从中重新创建会话。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T20:53:14.263

感谢您的回复。我们最终决定使用 Spring security 提供的 Pre authentication Filter 和 authentication token 来满足这个要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T02:04:08.657

最简单的方法是提供中央身份验证服务 (CAS)：单点登录。它为您的应用程序提供集中的访问控制和身份验证。并且 Spring Security 有一个与 CAS 无缝集成的 CAS 模块。为此，您需要设置一个 CAS 服务器。

有关 CAS 如何工作和实施的更多信息，请参阅文档。

[Spring-Security 文档](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/cas.html)

[CAS 架构](http://www.jasig.org/cas/cas2-architecture)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T09:52:47.477

另一种做法是创建一个Tomcat集群，并维护集群下2个节点之间的会话复制。请参考 Tomcat 手册如何创建 Tomcat 集群并启用会话复制。您可以使用 Spring RMI 更新有关会话信息等的其他节点应用程序上下文...

# python - 在python中构造类属性时访问类类型？

> ID：11229965
> 
> 赞同：2
> 
> 时间：2012-06-27T15:35:54.833
> 
> 标签：python

我想这样做：

```
class MyThing(object):
    def __init__(self,owning_cls):
        self.owning_cls = owning_cls

class MyClass(object):
    thing = MyThing(self.__class__)

print MyClass.thing.owning_cls 
```

这是行不通的——因为在 MyClass 的类构造中没有 self 可以引用。

有什么方法可以实现这一点（如果我们将事物设为实例属性显然是微不足道的，但我想成为一个类属性！）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:07:23.133

使用装饰器。我发现这是一个干净的解决方案，因为它可以让您将更多的类定义放在一起，而不必在类定义之后编写额外的类相关代码或强迫您实例化`MyClass`等。

```
class MyThing(object):
    def __init__(self,owning_cls):
        self.owning_cls = owning_cls

def set_thing(cls):
    cls.thing = MyThing(cls)
    return cls

@set_thing
class MyClass(object):
    pass

>>> print MyClass.thing.owner_cls
<class '__main__.MyClass'> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:38:04.233

在类声明之后立即执行调用：

```
class MyClass(object): pass
MyClass.thing = MyThing(MyClass) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:40:09.950

也许你可以用[`__new__`](http://docs.python.org/reference/datamodel.html#object.__new__)?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T17:21:01.890

使用[描述符](http://docs.python.org/howto/descriptor.html#descriptor-howto-guide)：

```
class Ownable(object):
    def __init__(self, clz):
        self._clz = clz
        self._inst = None
    def __get__(self, inst, owner_clz):
        self._inst = self._inst or self._clz(owner_clz)
        return self._inst

class MyThing(object):
    def __init__(self, owner_clz):
        self.owner_clz = owner_clz

class MyClass(object):
    thing = Ownable(MyThing)

>>> print MyClass.thing.owner_clz
<class '__main__.MyClass'> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T18:14:22.620

啊，使用 MetaClasses 注释在这里很有帮助。

这看起来像是一种“简单”的方式来实现我想要的

```
class MyClassMetaclass(type):
    def __new__(cls, name, bases, dct):
        cls.thing = MyThing(name)
        return super(MyClassMetaclass, cls).__new__(cls, name, bases, dct)

class MyThing(object):
    def __init__(self,owning_cls):
        self.owning_cls = owning_cls

class MyClass(object):
    __metaclass__=MyClassMetaclass

print MyClass.thing.owning_cls 
```

# javascript - json数组中的项目数

> ID：11229966
> 
> 赞同：3
> 
> 时间：2012-06-27T15:35:55.443
> 
> 标签：javascript, json

寻找一个简单的 JS 来计算 .json 文件中的项目数量（在这种情况下，每个项目代表一张被拉入网络应用程序的 instagram 照片；我想计算照片的数量）。Json的结构是这样的......

```
{
 "type":"FeatureCollection",
 "features":[
  {
     "type":"Feature",
     "geometry":{
        "coordinates":[
           -79.40916,
           43.87767
        ],
        "type":"Point"
     },
     "properties":{
        "longitude":-79.40916,
        "latitude":43.87767,
        "title":"",
        "user":"cmay2400",
        "id":"176051485697457528_13947894",
        "image":"http:\/\/distilleryimage0.instagram.com\/1d725a3a8d7511e181bd12313817987b_7.jpg",
        "images":{
           "low_resolution":{
              "url":"http:\/\/distilleryimage0.instagram.com\/1d725a3a8d7511e181bd12313817987b_6.jpg",
              "width":306,
              "height":306
           },
           "thumbnail":{
              "url":"http:\/\/distilleryimage0.instagram.com\/1d725a3a8d7511e181bd12313817987b_5.jpg",
              "width":150,
              "height":150
           },
           "standard_resolution":{
              "url":"http:\/\/distilleryimage0.instagram.com\/1d725a3a8d7511e181bd12313817987b_7.jpg",
              "width":612,
              "height":612
           }
        },
        "description":"Today's ride <span class=\"tag\">#zipcar<\/span>",
        "instagram_id":"13947894",
        "likes":1,
        "profile_picture":"http:\/\/images.instagram.com\/profiles\/profile_13947894_75sq_1322267355.jpg"
     }
  },
  {
     "type":"Feature", [...] 
```

我只想遍历json文件并计算项目数。完全不知道从哪里开始。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-27T15:40:11.953

[将 JSON 字符串解析](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/parse)为一个对象，并像使用 JavaScript 中的任何其他对象一样使用它：

```
var o = JSON.parse(jsonstring);

alert(o.features.length); /* number of items in features array */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:34:11.210

当然，首先你必须将 json 字符串转换为 js 对象。通过使用`JSON.parse()`（不支持 IE6\7）或包含 Crockford 的[JSON2 解析器](https://github.com/douglascrockford/JSON-js)，以便在 IE < 8 上支持它。

```
var obj = JSON.parse(jsonstr);
// loop the obj to find out what you want 
```

或者另一种方式，您可以尝试使用一些库，如[jsonSelect](http://jsonselect.org/#tryit)（JSON 的类似 CSS 的选择器。）或类似[JSONPath](http://www.sitepen.com/blog/2008/03/17/jsonpath-support/)的东西，然后您可以轻松地操作您的数据，例如：

```
var reslut = JSONSelect.match('css selector', obj); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:48:52.707

这或多或少是您正在寻找的代码：

```
var variable = jQuery.parseJSON( stringThatIsStoringJson );

for(var i=0;i<variable.features.length;i++) {
    doStuff(variable.features[i]);

    for(var j=0;j<variable.features[i].geometry.coordinates.length;j++) {
        doMoreStuff(variable.features[i].geometry.coordinates[j]);
    }
} 
```

假设您使用的是 jQuery。您可以使用所需的任何库解析 JSON。只是避免`eval()`，这会使您的网站面临 XSS 漏洞。

# ios - iOS：无法获取用户电子邮件地址

> ID：11229967
> 
> 赞同：6
> 
> 时间：2012-06-27T15:36:01.393
> 
> 标签：ios, email, addressbook, abperson

我想获取用户的邮件地址，如这个线程所示：[Getting user's default email address in Cocoa](https://stackoverflow.com/questions/4893099/getting-users-default-email-address-in-cocoa)

但是当我尝试时：

```
NSString *theEmailAddressWeWantToObtain = @"";
ABPerson *aPerson = [[ABAddressBook sharedAddressBook] me];
ABMultiValue *emails = [aPerson valueForProperty:kABEmailProperty];
if([emails count] > 0)
        theEmailAddressWeWantToObtain = [emails valueAtIndex:0]; 
```

我有这些错误：

*   使用未声明的标识符“aPerson”
*   使用未声明的标识符“ABAddressBook”
*   未知类型“ABMultiValue”

我已经链接了 AddressBook 和 AddressBookUI，并导入了 AddressBook/AddressBook.h

怎么了 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T16:20:02.097

**这些是对您的代码的更正**

```
NSString *theEmailAddressWeWantToObtain = @"";
ABPerson *aPerson = [[ABAddressBook sharedAddressBook] me];
ABMultiValueRef *emails = [aPerson valueForProperty:kABEmailProperty]; //No such thing as ABMultiValue; it's ABMultiValueRef
if(ABMultiValueGetCount(emails) > 0) //"emails" is not an array, so you can't use the "count" method
    theEmailAddressWeWantToObtain = [emails valueAtIndex:0]; 
```

我对键值编码不太熟悉，所以我不确定你的方法与此相关。

**这是我会做的方式**

电子邮件中存储了三个电子邮件地址`ABMultiValueRef`：家庭、工作和其他电子邮件。试试这个代码来获取家庭电子邮件：

```
NSString *email;

ABRecordRef currentPerson = (__bridge ABRecordRef)[[PSAddressBook arrayOfContacts] objectAtIndex:identifier];
ABMultiValueRef emailsMultiValueRef = ABRecordCopyValue(currentPerson, kABPersonEmailProperty);

NSUInteger emailsCount;    
//Goes through the emails to check which one is the home email
for(emailsCount = 0; emailsCount <= ABMultiValueGetCount(emailsMultiValueRef);emailsCount++){ 
    NSString *emailLabel = (__bridge_transfer NSString *)ABMultiValueCopyLabelAtIndex (emailsMultiValueRef, emailsCount);

    if([emailLabel isEqualToString:@"Home"]){

        if ((__bridge_transfer NSString *)ABMultiValueCopyValueAtIndex(emailsMultiValueRef, emailsCount) != NULL){

            email = (__bridge_transfer NSString *)ABRecordCopyValue(currentPerson, kABPersonEmailProperty);
        }   

        //If the last name property does not exist
        else{

            email = @"NULL";
        }
    }
}

CFRelease(emailsMultiValueRef); 
```

如果您对代码有任何疑问，请在评论中提问。希望这可以帮助！

## 编辑：

代码中提到的`PSAddressBook`类可以在这里找到：[https ://github.com/pasawaya/PSAddressBook](https://github.com/pasawaya/PSAddressBook)

# c - gcc：输入错误

> ID：11229970
> 
> 赞同：0
> 
> 时间：2012-06-27T15:36:11.053
> 
> 标签：c, linux, gcc

我是编程爱好者和新手，尝试这个简单的 c 语言代码并用 gnu 编译器编译它。这是我的代码：

`/*simple program:trying to printf string and get a letter*/`

```
#include "stdio.h"

int main()
{
    int i=0;
    char c;

    while(i++<100){
        if(i % 2)
            printf("%C this is even number",i);
        if(i==50){
            c=getchar();
            printf("you enter %c letter",c);
            }
    }
    return 0;
} 
```

但是，当我用 gcc 编译它并在终端中运行时，它没有显示任何内容，没有错误也没有警告。我试图通过改变我的代码行为方式来解决这个问题，但仍然无法正常工作。是错误的代码还是 gcc 有错误，或者我可能错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T15:37:51.693

`printf`尝试在文本末尾添加换行符：

```
printf("%C this is even number\n",i); 
```

也是`i`如此`int`使用`%d`格式：

```
printf("%d this is even number\n",i); 
```

**编辑**：我刚刚用更改测试了这个，它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:41:06.123

你应该`fflush(stdout)`在你的展示之后打电话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:42:14.090

它在 Windows Vista 下使用 cygwin 为我运行。

我将您的代码粘贴到一个名为 test.c 的文件中并运行`gcc test.c`该输出一个名为 a.exe 的文件，然后我运行该文件。

```
johnma@johnma-PC ~
$ ./a.exe
 this is even number♥ this is even number♣ this is even number this is even numb
 this is even numbern this is even number◄ this is even number this is even numb
er this is even number this is even number↓ this is even numberthis is even numb
er this is even number this is even number! this is even number# this is even nu
mber% this is even number' this is even number) this is even number+ this is eve
n number- this is even number/ this is even number1 this is even number
you enter
 letter3 this is even number5 this is even number7 this is even number9 this is
even number; this is even number= this is even number? this is even numberA this
 is even numberC this is even numberE this is even numberG this is even numberI
this is even numberK this is even numberM this is even numberO this is even numb
erQ this is even numberS this is even numberU this is even numberW this is even
numberY this is even number[ this is even number] this is even number_ this is e
ven numbera this is even numberc this is even number
johnma@johnma-PC ~ 
```

# sqlite - 仅限制一列不为空

> ID：11229972
> 
> 赞同：1
> 
> 时间：2012-06-27T15:36:18.720
> 
> 标签：sqlite, sqlalchemy

我有三个用于不同付款类型的表，并且想创建一个表来保存使用所有这三个付款的表。我不确定我是否以正确的方式进行此操作，但我打算在表中为这三个列中的每一个创建一个外键列，并编写一个约束，使得这些列中的一个必须是不为空。

1.  这是解决这个问题的正确方法吗？

2.  你如何编写这个约束？

3.  有什么办法可以从 SQLAlchemy 上的 sqlite 中做到这一点？（声明性类的代码将不胜感激）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:38:22.417

有一个外键列和一个单独的`type`列，以便您知道要查看哪个表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T17:32:17.053

好的，我知道了 - 这是最好的方法吗？- 我创建了一个通用 id 字段表，如下所示：

```
class PaymentDetails(Base):
    __tablename__ = 'payment_details'
    id = Column(Integer, primary_key=True)
    type = Column(PaymentType.db_type(), nullable=False) 
```

where`PaymentType`使用[声明性枚举配方](http://techspot.zzzeek.org/files/2011/decl_enum.py)，然后将其子类化为各种付款方式：

```
@concrete
@do_unique_index('paypal_unique_details', 'env', 'main_email', 'sub_email')
class Paypal(Base):
    __tablename__ = 'paypal_details'
    id = Column(ForeignKey('payment_details.id'), primary_key=True)
    # The rest of the implementation
    #
@concrete
@do_unique_index('credit_card_unique_details', 'env', 'card_number')
class CreditCard(Base):
    __tablename__ = 'card_details'
    id = Column(ForeignKey('payment_details.id'), primary_key=True)
    # The rest of the implementation
    #
@concrete
@do_unique_index('time_code_unique_details', 'env', 'code')
class TimeCodes(Base):
    __tablename__ = 'code_details'
    id = Column(ForeignKey('payment_details.id'), primary_key=True)
    # The rest of the implementation
    # 
```

（其中`concrete`和`do_unique_index`设置相关的`__mapper_args__`和`__table_args__`）。然后我将枚举值的描述​​字段设置`PaymentType`为这些类中的每一个，以便查找付款我可以查询一个 `PaymentDetails`对象，然后从中获取一个 id 和一个类型，比如`id`and `Paypal`，以执行第二个查询具有该`Paypal`ID 的。

我添加详细信息集的代码非常简单，在单个事务中，它将下一个逻辑 id 添加到`PaymentDetails`表中，其中包含我们尝试创建的付款详细信息的类型，然后在该表中添加一个包含详细信息的条目我想进入。然后，我可以向这些 ORM 类添加方法，以处理我们为每种方法处理购买、销售和退款的不同方式，以便将它们视为相同。

[然后，您需要如 van 所述](https://stackoverflow.com/a/2615603/99594)打开 FK 约束- 我通过将 FK 侦听器添加到我用于 DB 访问的帮助程序类来实现。

# c++ - A Star 不可预知的错误

> ID：11229974
> 
> 赞同：0
> 
> 时间：2012-06-27T15:36:31.193
> 
> 标签：c++, algorithm, path-finding, a-star

我对 A* 算法的微弱尝试正在产生不可预测的错误。我的 FindAdjacent() 函数显然是一团糟，当我单步执行它时它实际上不起作用。这是我第一次尝试寻路算法，所以这对我来说是全新的。

当应用程序实际上设法找到目标节点和路径（或者我认为）时，它永远无法设置路径（通过按 Enter 从 main 中调用）。通过查看 SetPath() 函数，我不知道为什么它无法做到这一点。

任何帮助将不胜感激，这是我的代码：

**节点类**

```
enum 
{
    NODE_TYPE_NONE  = 0,
    NODE_TYPE_NORMAL,
    NODE_TYPE_SOLID,
    NODE_TYPE_PATH,
    NODE_TYPE_GOAL
};

class Node
{
public:

    Node            ()          : mTypeID(0), mNodeCost(0), mX(0), mY(0), mParent(0){};

public:

    int     mTypeID;
    int     mNodeCost;
    int     mX;
    int     mY;

    Node*   mParent;
}; 
```

**寻找路径**

```
/**
 *  finds the path between star and goal
 */
void AStarImpl::FindPath()
{
    cout << "Finding Path." << endl;
    GetGoals();

    while (!mGoalFound)
        GetF();
}

 /**
 *  modifies linked list to find adjacent, walkable nodes
 */
void AStarImpl::FindAdjacent(Node* pNode)
{
    for (int i = -1; i <= 1; i++)
    {
        for (int j = -1; j <= 1; j++)
            if (i != 0 && j != 0)
                if (Map::GetInstance()->mMap[pNode->mX+i][pNode->mY+j].mTypeID != NODE_TYPE_SOLID)
                {
                    for (vector<Node*>::iterator iter = mClosedList.begin(); iter != mClosedList.end(); iter++)
                    {
                        if ((*iter)->mX != Map::GetInstance()->mMap[pNode->mX + i][pNode->mY + j].mX && (*iter)->mY != Map::GetInstance()->mMap[pNode->mX + i][pNode->mY + j].mY)
                        {
                            Map::GetInstance()->mMap[pNode->mX+i][pNode->mY+j].mParent = pNode;
                            mOpenList.push_back(&Map::GetInstance()->mMap[pNode->mX+i][pNode->mY+j]);
                        }
                    }
                }
    }

    mClosedList.push_back(pNode);
}

/**
 *  colour the found path
 */
void AStarImpl::SetPath()
{
    vector<Node*>::iterator tParent;
    mGoalNode->mTypeID = NODE_TYPE_PATH;

    Node *tNode = mGoalNode;

    while (tNode->mParent)
    {
        tNode->mTypeID  = NODE_TYPE_PATH;
        tNode           = tNode->mParent;
    }

}

/**
 *  returns a random node
 */
Node* AStarImpl::GetRandomNode()
{
    int tX      = IO::GetInstance()->GetRand(0, MAP_WIDTH - 1);
    int tY      = IO::GetInstance()->GetRand(0, MAP_HEIGHT - 1);

    Node* tNode = &Map::GetInstance()->mMap[tX][tY];

    return tNode;
}

/**
 *  gets the starting and goal nodes, then checks te starting nodes adjacent nodes
 */
void AStarImpl::GetGoals()
{
    //  get the two nodes
    mStartNode  = GetRandomNode();
    mGoalNode   = GetRandomNode();

    mStartNode->mTypeID     = NODE_TYPE_GOAL;
    mGoalNode->mTypeID      = NODE_TYPE_GOAL;

    //  insert start node into the open list
    mOpenList.push_back(mStartNode);

    //  find the starting nodes adjacent ndoes
    FindAdjacent(*mOpenList.begin());

    //  remove starting node from open list
    mOpenList.erase(mOpenList.begin());
}

/**
 *  finds the best f
 */
void AStarImpl::GetF()
{
    int     tF          = 0;
    int     tBestF      = 1000;

    vector<Node*>::const_iterator tIter;
    vector<Node*>::const_iterator tBestNode;

    for (tIter = mOpenList.begin(); tIter != mOpenList.end(); ++tIter)
    {
        tF  =   GetH(*tIter);
        tF  +=  (*tIter)->mNodeCost;

        if (tF < tBestF)
        {
            tBestF = tF;
            tBestNode = tIter;
        }
    }

    if ((*tBestNode) != mGoalNode)
    {
        Node tNode  = **tBestNode;
        mOpenList.erase(tBestNode);
        FindAdjacent(&tNode);
    }
    else
    {
        mClosedList.push_back(mGoalNode);
        mGoalFound = true;
    }
}

/**
 *  returns the heuristic from the given node to goal
 */
int AStarImpl::GetH(Node *pNode)
{
    int H =     (int) fabs((float)pNode->mX - mGoalNode->mX);
        H +=    (int) fabs((float)pNode->mY - mGoalNode->mY);
        H *=    10;

    return H;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:09:02.993

几点建议：

## 邻接测试

FindAdjacent 中的测试目前只会找到对角线邻居

```
 if (i != 0 && j != 0) 
```

如果您还想找到您想要使用的左/右/上/下邻居

```
 if (i != 0 || j != 0) 
```

## 邻接环

我认为您的代码在 FindAdjacent 中看起来很可疑

```
for (vector<Node*>::iterator iter = mClosedList.begin(); iter != mClosedList.end(); iter++) 
```

我真的不明白这里的意图。我本来希望 mClosedList 开始为空，所以这个循环永远不会执行，所以不会有任何东西被添加到 mOpenList 中。

我对算法这一部分的期望是让您测试每个邻居是否应该将其添加到打开列表中。

## 公开名单检查

如果您查看[维基百科上的 A* 算法，](http://en.wikipedia.org/wiki/A%2a_search_algorithm)您会发现您也错过了开始的部分

```
if neighbor not in openset or tentative_g_score < g_score[neighbor] 
```

在添加之前，您还应该在 FindAdjacent 中检查您的新节点是否已经在 OpenSet 中，如果是，则仅在分数更好时才添加它。

# php - 在 PHP 中检索 R 输出

> ID：11229978
> 
> 赞同：0
> 
> 时间：2012-06-27T15:36:38.647
> 
> 标签：php, r, shell, console, stdout

这是问题：

我正在使用[R](http://www.r-project.org/)进行一些统计分析。其结果最终将发送到用户客户端计算机上的嵌入式 swf。

为此，我让 PHP 执行一个 shell 脚本来运行 R 程序，并且我想检索该程序的结果，以便我可以在 PHP 中解析它们并使用适当的数据进行响应。

所以，很简单：

```
$output = shell_exec("R CMD BATCH /home/bitnami/r_script.R");
echo $output; 
```

但是，我当然什么也没收到，因为 R CMD BATCH 写入文件。我尝试以类似于此[问题](https://stackoverflow.com/questions/3592856/running-r-in-batch-mode-print-to-screen)的方式重定向输出，这将我的脚本更改为

```
$output = shell_exec('R CMD BATCH /home/bitnami/raschPL.R /dev/tty');
echo $output; 
```

但是我在控制台上得到的是源代码的巨大溢出，没有任何回应。

我还在我的 R 脚本中尝试[了这个问题的解决方案。](https://stackoverflow.com/questions/1109017/how-do-you-print-to-stderr-in-r)

tl;博士; 我需要在 PHP 中检索 R 脚本的结果。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T21:41:47.660

找到了，答案是通过Rscript。Rscript 应该包含在最新的 R 安装中。

以我的代码为例，我将在 r_script.R 的最顶部输入它

```
#!/usr/bin/Rscript --options-you-need 
```

这应该是您的 Rscript 可执行文件的路径。这可以通过键入轻松找到

```
which Rscript 
```

在终端。在我有 --options-you-need 的地方，放置执行 CMD BATCH 时通常拥有的选项，例如 --slave 以删除无关输出。

您现在应该能够像这样运行您的脚本：

```
./r_script.R arg1 arg2 
```

**重要的！如果您收到错误**

```
Error in `contrasts<-`(`*tmp*`, value = "contr.treatment") : 
could not find function "is" 
```

**您需要包含“方法”包，如下所示：**

```
require("methods"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T18:05:43.897

也许，一个更简单的解决方法是：

```
 $output = shell_exec('R CMD BATCH /home/bitnami/raschPL.R > /dev/tty 2>&1');
    echo $output; 
```

重定向 STDOUT 和 STDERR，因为默认情况下 R 输出到 STDERR。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:47:32.977

如果它写入文件也许你可以`file_get_contents`用来读取它？

[http://php.net/manual/en/function.file-get-contents.php](http://php.net/manual/en/function.file-get-contents.php)

# regex - 正则表达式 1 个正则表达式中的 2 个搜索

> ID：11229979
> 
> 赞同：0
> 
> 时间：2012-06-27T15:36:46.313
> 
> 标签：regex, actionscript-3, xml-parsing

我几乎有这个 XML 可以与 Actionscript 3.0 一起使用：

```
<view id="view_lab" class="project.views.Lab" title="-<b><font color'#FF0000'>Lab</font></b>">
<view id="view_lab" class="project.views.Lab" title="-<b><font color'#FF0000'>Lab</font></b>">
<view id="view_lab" class="project.views.Lab" title="-<b><font color'#FF0000'>Lab</font></b>"> 
```

我有这个正则表达式来获取标题标签中的所有内容：title= /"[^"]"/

问题是我只想捕获“<”和“>”来替换>和<而不使用2个正则表达式。由于该 XML 已经是一个字符串。

所以我一直在尝试这样的事情，不幸的是这似乎不起作用： /title="(<)*(>)*([^"])+"/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T22:40:54.660

因为您使用的是 Actionscript 3，所以您不应该使用正则表达式来解析 XML。下面是一些可以提取 title 属性值的伪代码：

```
var myXMLTree:XML = new XML( data );

for (var i:int = 0; i<myXMLTree.view.length(); i++){
    trace(myXMLTree.view[i].@title);
} 
```

使用正则表达式解析 XML/HTML 中的属性是一个常见的陷阱，但应该不惜一切代价避免它。

请阅读：[RegEx 匹配开放标签，XHTML 自包含标签除外](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)

# mysql - 复杂的 MySQL 查询很慢

> ID：11229983
> 
> 赞同：0
> 
> 时间：2012-06-27T15:36:58.633
> 
> 标签：mysql, performance, subquery

我一直在研究的一个程序使用一个复杂的 MySQL 查询来组合来自多个具有匹配项 ID 的表的信息。但是，由于我添加了您在下面看到的子查询，因此查询的执行时间从不到 1 秒变为超过 3 秒。你对我可以做些什么来优化这个查询更快有什么建议吗？我认为拥有一个复杂的查询比拥有 4 个或 5 个较小的查询更好吗？

```
 SELECT uninet_articles.*, 
           Unix_timestamp(uninet_articles.gmt), 
           uninet_comments.commentcount, 
           uninet_comments.lastposter, 
           Unix_timestamp(uninet_comments.maxgmt) 
    FROM   uninet_articles 
           RIGHT JOIN (SELECT aid, 
                              (SELECT poster 
                               FROM   uninet_comments AS a 
                               WHERE  b.aid = a.aid 
                               ORDER  BY gmt DESC 
                               LIMIT  1) AS lastposter, 
                              Count(*)   AS commentcount, 
                              Max(gmt)   AS maxgmt 
                       FROM   uninet_comments AS b 
                       GROUP  BY aid 
                       ORDER  BY maxgmt DESC 
                       LIMIT  10) AS uninet_comments 
                   ON uninet_articles.aid = uninet_comments.aid 
    LIMIT  10 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:40:53.553

查询可以看作是通过数据来查找匹配的内容。子查询需要多次遍历数据才能找到需要的项目。在这种情况下，您可能希望将其重写为多个查询。很多时候，多个更简单的查询会更好——我认为这是其中一种情况。

您还可以查看您的索引是否运行良好 - 如果您知道那是什么。原因与此有关：[数据库索引如何工作？](https://stackoverflow.com/questions/1108/how-does-database-indexing-work).

对于具体的建议，您可以在不同的查询中找到每个 AID 的最后一张海报，然后简单地加入它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:44:40.793

它始终取决于您拥有的数据以及您使用它的方式。

您应该在您的选择上使用说明来查看您是否正在使用索引。 [http://dev.mysql.com/doc/refman/5.5/en/explain.html](http://dev.mysql.com/doc/refman/5.5/en/explain.html)

# java - 按索引获取字符串字符

> ID：11229986
> 
> 赞同：265
> 
> 时间：2012-06-27T15:37:11.237
> 
> 标签：java, string

我知道如何计算出字符串中某个字符或数字的索引，但是有什么预定义的方法可以用来给我*第 n 个*位置的字符吗？所以在字符串“foo”中，如果我询问索引为 0 的字符，它将返回“f”。

注意 - 在上面的问题中，“字符”不是指 char 数据类型，而是字符串中的字母或数字。这里重要的是，当调用该方法时我没有收到一个字符，而是一个字符串（长度为 1）。我知道 substring() 方法，但我想知道是否有更简洁的方法。

* * *

## 回答 #1

> 赞同：383
> 
> 时间：2012-06-27T15:39:30.920

您正在寻找的方法是`charAt`. 这是一个例子：

```
String text = "foo";
char charAtZero = text.charAt(0);
System.out.println(charAtZero); // Prints f 
```

有关详细信息，请参阅[有关`String.charAt`](https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#charAt(int)). 如果你想要另一个简单的教程，[这个](https://www.tutorialspoint.com/java/java_string_charat.htm)或[这个](https://www.homeandlearn.co.uk/java/charAt.html)。

如果您不希望结果作为`char`数据类型，而是作为字符串，则可以使用以下`Character.toString`方法：

```
String text = "foo";
String letter = Character.toString(text.charAt(0));
System.out.println(letter); // Prints f 
```

如果您想了解有关`Character`该类和`toString`方法的更多信息，我从[Character.toString 的文档中](https://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Character.html#toString%28char%29)提取了我的信息。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2012-06-27T15:39:24.500

你要`.charAt()`

[这是一个教程](http://www.homeandlearn.co.uk/java/charAt.html)

```
"mystring".charAt(2) 
```

返回`s`

如果您非常想拥有一个字符串，有几种方法可以将 char 转换为字符串：

```
String mychar = Character.toString("mystring".charAt(2)); 
```

或者

```
String mychar = ""+"mystring".charAt(2); 
```

甚至

```
String mychar = String.valueOf("mystring".charAt(2)); 
```

例如。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-11-07T22:40:01.047

没有一个建议的答案适用于用于编码[Unicode Basic Multiligual Plane](https://en.wikipedia.org/wiki/Plane_%28Unicode%29#Basic_Multilingual_Plane)之外的字符的代理对。

这是一个使用三种不同技术迭代字符串“字符”的示例（包括使用 Java 8 流 API）。请注意，此示例包括 Unicode 补充多语言平面 (SMP) 的字符。您需要正确的字体才能正确显示此示例和结果。

```
// String containing characters of the Unicode 
// Supplementary Multilingual Plane (SMP)
// In that particular case, hieroglyphs.
String str = "The quick brown  jumps over the lazy "; 
```

# 字符迭代

第一个解决方案是对所有`char`字符串进行简单循环：

```
/* 1 */
System.out.println(
        "\n\nUsing char iterator (do not work for surrogate pairs !)");
for (int pos = 0; pos < str.length(); ++pos) {
    char c = str.charAt(pos);
    System.out.printf("%s ", Character.toString(c));
    //                       ^^^^^^^^^^^^^^^^^^^^^
    //                   Convert to String as per OP request
} 
```

# 代码点的迭代

第二种解决方案也使用显式循环，但使用[codePointAt](https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#codePointAt-int-)访问各个代码点并相应地将循环索引递增到[charCount](http://docs.oracle.com/javase/8/docs/api/java/lang/Character.html#charCount-int-)：

```
/* 2 */
System.out.println(
        "\n\nUsing Java 1.5 codePointAt(works as expected)");
for (int pos = 0; pos < str.length();) {
    int cp = str.codePointAt(pos);

    char    chars[] = Character.toChars(cp);
    //                ^^^^^^^^^^^^^^^^^^^^^
    //               Convert to a `char[]`
    //               as code points outside the Unicode BMP
    //               will map to more than one Java `char`
    System.out.printf("%s ", new String(chars));
    //                       ^^^^^^^^^^^^^^^^^
    //               Convert to String as per OP request

    pos += Character.charCount(cp);
    //     ^^^^^^^^^^^^^^^^^^^^^^^
    //    Increment pos by 1 of more depending
    //    the number of Java `char` required to
    //    encode that particular codepoint.
} 
```

# 使用 Stream API 迭代代码点

第三种解决方案与第二种基本相同，但使用[Java 8 Stream API](http://www.oracle.com/technetwork/articles/java/ma14-java-se-8-streams-2177646.html)：

```
/* 3 */
System.out.println(
        "\n\nUsing Java 8 stream (works as expected)");
str.codePoints().forEach(
    cp -> {
        char    chars[] = Character.toChars(cp);
        //                ^^^^^^^^^^^^^^^^^^^^^
        //               Convert to a `char[]`
        //               as code points outside the Unicode BMP
        //               will map to more than one Java `char`
        System.out.printf("%s ", new String(chars));
        //                       ^^^^^^^^^^^^^^^^^
        //               Convert to String as per OP request
    }); 
```

# 结果

当您运行该测试程序时，您将获得：

```
Using char iterator (do not work for surrogate pairs !)
T h e   q u i c k   b r o w n   ? ?   j u m p s   o v e r   t h e   l a z y   ? ? ? ? ? ? ? ? 

Using Java 1.5 codePointAt(works as expected)
T h e   q u i c k   b r o w n      j u m p s   o v e r   t h e   l a z y       

Using Java 8 stream (works as expected)
T h e   q u i c k   b r o w n      j u m p s   o v e r   t h e   l a z y 
```

如您所见（如果您能够正确显示象形文字），第一个解决方案无法正确处理 Unicode BMP 之外的字符。另一方面，其他两个解决方案可以很好地处理代理对。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-06-27T15:40:24.960

`substring()`鉴于您的要求，您非常坚持。标准方式是`charAt()`，但您说您不会接受 char 数据类型。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-06-27T15:45:31.660

您可以使用[`String.charAt(int index)`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#charAt(int))方法结果作为[String.valueOf(char c)](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#valueOf(char))的参数。

```
String.valueOf(myString.charAt(3)) // This will return a string of the character on the 3rd position. 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-06-27T15:52:02.660

它很简单：

```
String charIs = string.charAt(index) + ""; 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-06-27T15:45:48.967

结合您不获取 char 的要求的混合方法`charAt`可能是

```
newstring = String.valueOf("foo".charAt(0)); 
```

但这并不比`substring()`说实话更“整洁”。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-11-21T16:51:15.740

这是正确的代码。如果您使用的是 zybooks，这将解决所有问题。

```
for (int i = 0; i<passCode.length(); i++)
{
    char letter = passCode.charAt(i);
    if (letter == ' ' )
    {
        System.out.println("Space at " + i);
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-07-29T13:12:59.730

如果有人在 kotlin 上苦苦挣扎，代码是：

```
var oldStr: String = "kotlin"
var firstChar: String = oldStr.elementAt(0).toString()
Log.d("firstChar", firstChar.toString()) 
```

这将返回位置 1 中的字符，在这种情况下 k 记住，索引从位置 0 开始，所以在这个示例中：kotlin 将是 k=位置 0，o=位置 1，t=位置 2，l=位置 3， i=位置 4 和 n=位置 5

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-08-27T16:05:13.443

CodePointAt 而不是 charAt 使用起来更安全。当 strtng 中有表情符号时，charAt 可能会中断。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-02-09T13:51:20.783

CharAt 功能不起作用

```
Edittext.setText(YourString.toCharArray(),0,1); 
```

此代码工作正常

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2015-05-13T18:43:45.577

像这样：

```
String a ="hh1hhhhhhhh";
char s = a.charAt(3); 
```

# android - 我无法在 Android 的 Imageview 上设置 Onclick 事件

> ID：11229992
> 
> 赞同：0
> 
> 时间：2012-06-27T15:37:25.000
> 
> 标签：android, android-intent, android-button

无论我在哪里单击 ImageView，onclick 方法都不会发生。我的意思是它没有重定向到我的 main.xml

//包名：**双层**

//我的cesem.XML：

//只是一个 Textview 和一个 Image View - 缩进四个空格。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
     xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="25dp"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Select Your Semester"
        android:textSize="25dp" 
        android:gravity="center"
        android:id="@+id/tvSemCe"
        android:layout_marginBottom="20dp"
   />

<ImageView
    android:id="@+id/back"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/back"
     />

</LinearLayout>

//Class file: Cesem.java

package com.bunk;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ImageView;

public class Cesem extends Activity implements OnClickListener{

    ImageView back;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.cesem); // cesem.xml

        back=(ImageView) findViewById(R.id.back);// back is ImageView
        back.setOnClickListener(this);

    }
    public void onClick(View v) {
        // TODO Auto-generated method stub

        if (v == back) {
            setContentView(R.layout.main);
    }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:40:48.410

尝试将元素设置为可点击：

```
back.setClickable(true); 
```

或者，由于点击回调的内容（setContentView..），您可能看不到反馈

尝试在点击回调中记录一些内容，例如

```
 public void onClick(View v) {
    // TODO Auto-generated method stub

    if (v == back) {
        Toast.makeText(this, "Click", Toast.LENGTH_SHORT).show();
        setContentView(R.layout.main);
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:44:04.530

```
if (v.getId() == R.id.back) 
```

代替

```
if (v == back) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:55:24.543

将您的代码更改为：

```
public class Cesem extends Activity implements OnClickListener{

    ImageView back;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.cesem); // cesem.xml

        back=(ImageView) findViewById(R.id.back);// back is ImageView
        back.setOnClickListener(this);
    }
    public void onClick(View v) {
        // TODO Auto-generated method stub

        if (v.getId() == R.id.back) {
           Toast.makeText(getApplicationContext(), "Toast 1",Toast.LENGTH_SHORT).show();
            Activity.this.setContentView(R.layout.main);
            }
            else
            {
              Toast.makeText(getApplicationContext(), "Toast 2",Toast.LENGTH_SHORT).show();
            }
    }
   }
} 
```

并在清单中将您的活动注册为：

```
 <activity
            android:name=".Cesem" /> 
```

# video - 视频中的前 x 帧

> ID：11229995
> 
> 赞同：1
> 
> 时间：2012-06-27T15:37:32.907
> 
> 标签：video, ffmpeg, imagemagick, gif, animated-gif

我需要从视频（通常是 FLV）中获取前 x 帧并将其转换为 GIF。我们的想法是使用这些 GIF 作为真实事物的简短预览。

目前，我们正在使用 ffmpeg 和 imagemagick 来做到这一点：

```
ffmpeg -y -i movie.flv -pix_fmt rgb32 -r fps extracted/%d.png

convert extracted/0.png ... extracted/50.png -delay 4 -loop 0 \
-set dispose Background -sample 256x256> preview.gif 
```

所以基本上，首先提取帧，转换为 PNG，然后再将 PNG 组合成 GIF。这里涉及很多不必要的步骤。

有人对加快此过程有什么建议吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:49:27.360

*FFMPEG*不太擅长创建动画 gif。根据[文档](http://ffmpeg.org/general.html#Image-Formats)，它们将被解压缩。但是在读取不同的视频编解码器时，ffmpeg 非常通用。

*ImageMagick*可以创建好的动画 gif，但视频功能非常有限。但是，它[显然具有基本的 .avi 支持。](http://www.imagemagick.org/Usage/video/)

您可以通过将输入视频转换为通用 avi 流`ffmpeg`并将其直接通过管道传输到`convert`.

这对我有用：

```
ffmpeg -i movie.mov -t 1 -f avi -|convert -delay 1 - preview.gif 
```

# matlab - 在 matlab 中创建一个定制的颜色条

> ID：11229997
> 
> 赞同：0
> 
> 时间：2012-06-27T15:37:46.597
> 
> 标签：matlab, colorbar

我必须创建一个地图来显示某些值与某个范围的距离有多近，并因此为它们提供颜色。同时，该范围内的值应具有另一种不同的颜色。
例如：只有在 [-2 2] 范围内的结果才被认为是有效的。对于其他值，颜色必须显示与这些限制的距离（-3 比 -5 亮，更暗）
我已经尝试使用*颜色*条， 但我无法设置自定义色标。
任何想法？？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:09:52.830

下面是我刚刚汇总的一些代码，用于演示创建您自己的查找表并将值分配给您正在使用的图像的简单方法。我假设你的结果是一个二维数组，我只是使用随机分配的值，但概念是一样的。

我提到了将 HSV 用作着色方案的潜在用途。请注意，这要求您拥有 am by n x 3 矩阵。顶层是 H - 色调，第二层是 S - 饱和度，第三层是 V 或值（明/暗）。只需将 H 和 S 设置为您想要的颜色值，并以类似的方式改变 V，如下所示，您可以获得所需的各种浅色和深色。

```
% This is just assuming a -10:10 range and randomly generating the values.
randmat = randi(20, 100);
randmat = randmat - 10;

% This should just be a black and white image.  Black is negative and white is positive.
figure, imshow(randmat) 

% Create your lookup table.  This will illustrate having a non-uniform
% acceptable range, for funsies.
vMin = -3;
vMax = 2;

% I'm adding 10 here to account for the negative values since matlab
% doesn't like the negative indicies...
map = zeros(1,20); % initialized
map(vMin+10:vMax+10) = 1; % This will give the light color you want.

%linspace just simply returns a linearly spaced vector between the values
%you give it.  The third term is just telling it how many values to return.
map(1:vMin+10) = linspace(0,1,length(map(1:vMin+10)));
map(vMax+10:end) = linspace(1,0,length(map(vMax+10:end))); 

% The idea here is to incriment through each position in your results and
% assign the appropriate colorvalue from the map for visualization.  You
% can certainly save it to a new matrix if you want to preserve the
% results!
for X = 1:size(randmat,1)
    for Y = 1:size(randmat,2)
        randmat(X,Y) = map(randmat(X,Y)+10);
    end
end

figure, imshow(randmat) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:18:57.330

您需要为您拥有的值范围定义一个颜色图。
颜色图是 N*3 矩阵，定义了每种颜色的 RGB 值。

有关范围 -10:10 和有效值 v1、v2 的信息，请参见下面的示例：

```
v1=-3;  
v2=+3;  
a = -10:10;  
graylevels=[...  
   linspace(0,1,abs(-10-v1)+1) , ...
   ones(1, v2-v1-1) , ...
   linspace(1,0,abs(10-v2)+1)];  
c=repmat(graylevels , [3 1])';  
figure;  
imagesc(a);  
colormap(c); 
```

# javascript - ComboBox 在 ExtJS 的 EditorGridPanel 中不起作用

> ID：11229999
> 
> 赞同：1
> 
> 时间：2012-06-27T15:37:51.177
> 
> 标签：javascript, extjs, javascript-framework

我是 ExtJS 的新手，需要`ComboBox`在`EditorGridPanel`.

到目前为止，我的代码没有在 中创建组合框，`EditorGridPanel`并且`EditorGridPanel`也没有显示。

这是代码，感谢您的帮助。夺旗

```
 /*==== INVOICE DATA START =======================================================*/

/* create the ComboBox editor */
var idCombo = new Ext.form.ComboBox({
    id: 'id',
    valueField: 'id',
    displayField:'id',
    store: '',  //what do I store here?? 
    triggerAction: 'all'
});

var idRenderer = function(value,metaData,record){
   // try record.data.teacher here
   return "displayValue"

var iLineItemCM = new Ext.grid.ColumnModel([

    {
        id: 'i_line_item_id',
        header: 'Line Item ID',
        dataIndex: 'i_line_item_id',
        width: 80,
        editor: this.idCombo(),
        renderer:idRenderer

    }

,{
        id:'i_line_item_name',
        header: "Line Item Name",
        dataIndex: 'i_line_item_name',
        width: 315,
        resizable: true,
        align: 'center',
        editor: new Ext.form.TextArea({
            allowBlank: false
        })
    }
    ,{
        header: "Amount",
        dataIndex: 'i_line_item_amt',
        width: 80,
        align: 'right',
        renderer: 'usMoney',
        editor: new Ext.form.NumberField({
            allowBlank: false,
            allowNegative: false,
            maxValue: 100000
        })
    }
    ]);

var iLineItemRec =
new Ext.data.Record.create([
    {
    name: 'i_line_item_id'    ,
    mapping: 'i_line_item_id'  ,
    type: 'string'
}
,{
    name: 'i_line_item_name'    ,
    mapping: 'i_line_item_name'  ,
    type: 'string'
}
,{
    name: 'i_line_item_amt'     ,
    mapping: 'i_line_item_amt'   ,
    type: 'string'
}
]);

var iLineItemStore = new Ext.data.Store({
    url: '',
    reader: new Ext.data.JsonReader({
        root: 'rows'
    },
    iLineItemRec
    )
});

var iLineItemGrid = new Ext.grid.EditorGridPanel({
    id: 'iLineItemStore',
    store: iLineItemStore,
    cm: iLineItemCM,
    cls: 'iLineItemGrid',
    width: 'auto',
    height: 'auto',
    frame: true,
    //title:'Edit Plants?',
    //plugins:checkColumn,
    clicksToEdit:1,
    viewConfig: {
        //forceFit: true
        autoFit:true
    },
    tbar: [{
        text: 'Add',
        tooltip:'Add the line item',
        handler : function(){
            var r = new iLineItemRec({
                i_line_item_name: '',
                i_line_item_amt: ''
            });
            iLineItemGrid.stopEditing();
            iLineItemStore.insert(0, r);
            iLineItemGrid.startEditing(0, 0);
        }
    },
    {
        text: 'Delete',
        tooltip:'Remove the selected line item',
        handler: function(){
            iLineItemGrid.stopEditing();
            var r = iLineItemGrid.getSelectionModel().getSelectedCell();
            iLineItemStore.removeAt(r[1]);
        }

    }

    ]
});
/////////////////// CODE ENDS 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:27:21.120

您需要创建一个数据存储并将其绑定到您的组合框。然后在组合配置中，您可以告诉它您要显示商店中的哪个字段以及您想要哪个字段作为值。这是来自 ExtJS 4 API Docs 的示例：

```
// The data store containing the list of states
var states = Ext.create('Ext.data.Store', {
    fields: ['abbr', 'name'],  // fields that your data consists of
    data : [
        {"abbr":"AL", "name":"Alabama"},
        {"abbr":"AK", "name":"Alaska"},
        {"abbr":"AZ", "name":"Arizona"}
        //...
    ]
});

// Create the combo box, attached to the states data store
var combo = Ext.create('Ext.form.ComboBox', {
    fieldLabel: 'Choose State',
    store: states,  // here you use the store
    queryMode: 'local',
    displayField: 'name',  // you tell your combobox which field to display from the store
    valueField: 'abbr',  // you tell your combobox which field to use for value from the store
    renderTo: Ext.getBody()
}); 
```

如果您使用combo.getValue()，并且如果在您的组合框中选择了例如“阿拉斯加”，它将返回“AK”。如果您愿意，也可以使用与 displayField 和 valueField 相同的字段。