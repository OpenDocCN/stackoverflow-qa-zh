# StackOverflow 问答 11737000-11737999

# ios - 在 iOS 上无法获取没有令牌的 Facebook 图片

> ID：11737000
> 
> 赞同：0
> 
> 时间：2012-07-31T09:26:51.810
> 
> 标签：ios, facebook-graph-api, facebook-ios-sdk

我可以在不提供访问令牌的情况下使用 url 在 Web 浏览器中访问用户图片：http: [//graph.facebook.com/ID/picture](http://graph.facebook.com/ID/picture)

我知道它执行重定向，但它有效。

但是，当尝试访问 iOS HttpRequest 中的相同 url 时，我收到“invalid_token”响应。

是否可以在没有令牌的情况下在 iOS 中从 ID 获取图片？如果是这样，我该如何实现？如果没有，如何使用网络浏览器？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T13:09:12.210

万一其他人对此感到困惑，显然在某些情况下，如果您使用 POST 而不是 GET http 请求方法，您会从 facebook (graph api) 收到“无效令牌”响应。切换到 GET 为我解决了这个问题。

# java - 没有gui的java配置文件工具

> ID：11737013
> 
> 赞同：1
> 
> 时间：2012-07-31T09:27:32.747
> 
> 标签：java, jvm, profile

有没有在 Linux 中没有 GUI 的情况下工作的 java 配置文件工具，就像`top`？我无权使用 jprofile 和 jvisualvm 等工具在远程模型中工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:30:01.603

试试这个： http: [//java.sun.com/developer/technicalArticles/Programming/HPROF.html](http://java.sun.com/developer/technicalArticles/Programming/HPROF.html)您可以查询堆和 CPU 详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T09:30:26.193

您可以使用[HPROF](http://java.sun.com/developer/technicalArticles/Programming/HPROF.html)。

```
Command used: javac -J-agentlib:hprof=cpu=samples Hello.java

CPU SAMPLES BEGIN (total = 126) Fri Oct 22 12:12:14 2004
rank   self  accum   count trace method
   1 53.17% 53.17%      67 300027 java.util.zip.ZipFile.getEntry
   2 17.46% 70.63%      22 300135 java.util.zip.ZipFile.getNextEntry
   3  5.56% 76.19%       7 300111 java.lang.ClassLoader.defineClass2
   4  3.97% 80.16%       5 300140 java.io.UnixFileSystem.list
   5  2.38% 82.54%       3 300149 java.lang.Shutdown.halt0
   6  1.59% 84.13%       2 300136 java.util.zip.ZipEntry.initFields
   7  1.59% 85.71%       2 300138 java.lang.String.substring
   8  1.59% 87.30%       2 300026 java.util.zip.ZipFile.open
   9  0.79% 88.10%       1 300118 com.sun.tools.javac.code.Type$ErrorType.<init>
  10  0.79% 88.89%       1 300134 java.util.zip.ZipFile.ensureOpen 
```

# c++ - 链接我的库时未解析的外部符号

> ID：11737017
> 
> 赞同：2
> 
> 时间：2012-07-31T09:27:36.523
> 
> 标签：c++, visual-studio-2010, static-libraries, static-linking

我已经用 VS2010 编译了我自己的库文件（.lib），但是当我尝试像这样引用它时

```
#pragma comment(lib,"path/to/lib.lib") 
```

我不断收到未解析的外部符号......我做错了什么？#pragma comment(lib, "*.lib") 到目前为止适用于任何库，我也尝试在设置下链接它，但没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-11T22:11:24.327

1) 打开 VS 命令控制台（工具/Visual Studio 命令提示符）。

2) 使用`cd`命令切换到包含相关库的目录。

3) 输入：

```
dumpbin /all my_lib_name.lib > lib.txt 
```

替换`my_lib_name.lib`为您的图书馆的名称。（您需要将输出写入`lib.txt`大型库的文本文件）

4）打开这个新创建`lib.txt`的查看库的内容。更多细节可以在[这里](https://stackoverflow.com/questions/305287/how-to-see-the-contents-of-windows-library-lib)找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T23:19:53.907

1.  打开两个目录。
    *   第一个包含失败的库
    *   第二个包含带有编译器的二进制目录（对我来说它的 C:\Program Files\Microsoft Visual Studio 9.0\VC）
2.  将 mspdb*.dll（从第一个目录）复制到包含库的目录
3.  打开库目录下的cmd.exe
4.  写“%FIRST_DIRECTORY/bin/dumpbin.exe”/ALL library.lib > lib.txt（例如我写“ *C:\Program Files\Microsoft Visual Studio 9.0\VC\bin\dumpbin.exe”/ALL MyTestLibrary。库 > lib.txt* )
5.  搜索您想要的方法（按类名或方法名）

如果你没有找到 - 开发人员不要写它。或者**方法实现是内联的**

如果是第二个 - 你应该告诉 IDE whereis source。 *顺便说一句，请记住，库编译项目中没有可通过用户标头访问的方法可以是内联的。您可以做的所有事情来优化速度 - fastcall。*

# javascript - 设置右侧默认滚动条的样式

> ID：11737022
> 
> 赞同：2
> 
> 时间：2012-07-31T09:27:53.963
> 
> 标签：javascript, jquery

嗨，过去一个小时我一直在尝试更改默认滚动条在浏览器上的显示方式。我说的是右侧的主滚动条没有添加新滚动条并对其进行样式化。我正在使用 jScrollPane 插件，但它似乎没有工作，或者我做的不对。这是我的代码：

```
$("window").jScrollPane();

window
{
    width: 100%;

    overflow: auto;
}
window
{
    height: auto;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:32:32.293

如果您访问 AK 已链接的[网站](http://jscrollpane.kelvinluck.com/fullpage_scroll.html)，您将看到**所需**的Jquery 和 CSS 以使其正常工作。我让你更容易理解它们。

```
$(function()
{
    var win = $(window);
    // Full body scroll
    var isResizing = false;
    win.bind(
        'resize',
        function()
        {
            if (!isResizing) {
                isResizing = true;
                var container = $('#full-page-container'); //this should be the most parent
                // div, right beneath the <body> and covering the entire page. Change the ID HERE.
                // Temporarily make the container tiny so it doesn't influence the
                // calculation of the size of the document
                container.css(
                    {
                        'width': 1,
                        'height': 1
                    }
                );
                // Now make it the size of the window...
                container.css(
                    {
                        'width': win.width(),
                        'height': win.height()
                    }
                );
                isResizing = false;
                container.jScrollPane( //this is where outer scroll changes
                    {
                        'showArrows': true
                    }
                );
            }
        }
    ).trigger('resize');

// Workaround for known Opera issue which breaks demo (see
// http://jscrollpane.kelvinluck.com/known_issues.html#opera-scrollbar )
$('body').css('overflow', 'hidden');

// IE calculates the width incorrectly first time round (it
// doesn't count the space used by the native scrollbar) so
// we re-trigger if necessary.
if ($('#full-page-container').width() != win.width()) {
    win.trigger('resize');
}

/*Internal scrollpanes. (Not needed if you want to change only the outer)
$('.scroll-pane').jScrollPane({showArrows: true});
*/
}); 
```

现在CSS：

```
html
{
    overflow: auto;
}
#full-page-container
{
    overflow: auto;
}
/*** Optional INNER scrolls. 
.scroll-pane
{
    width: 100%;
    height: 200px;
    overflow: auto;
}
.horizontal-only
{
    height: auto;
    max-height: 200px;
}
***/ 
```

不要忘记包含 Jquery、jscrollpane.css、mousewheel.js、jscrollpane.js

# javascript - 页面加载一段时间后如何使用adsense

> ID：11737024
> 
> 赞同：2
> 
> 时间：2012-07-31T09:27:54.413
> 
> 标签：javascript, jquery, adsense

我创建了一个运行良好的小型社交网站，但在墙页中谷歌广告没有显示，它在其他页面中显示和工作正常，但在墙页中没有显示，因为页面内容用 js 显示

所以我认为关键字和描述有问题

我只是想知道一段时间后如何使用谷歌广告

我试试

```
function show(){
//My Adsense Code But Still Not Working
}

setTimeout('show()',5000); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T16:34:21.733

如果您通过 Adsense 赚了大钱，Google 将为您提供优质广告，包括可定制的 API。如果您到达那里，您可以以非常不同的方式格式化广告并提供您想要使用的关键字。

# php - Facebook Open Graph 对象动态网页

> ID：11737027
> 
> 赞同：0
> 
> 时间：2012-07-31T09:28:02.120
> 
> 标签：php, facebook, facebook-graph-api, facebook-opengraph, meta-tags

因此，我正在制作一个涉及通过 Facebook 开放图形协议共享的 iPhone 应用程序。但是，在为带有元标记的对象创建动态网页时，我遇到了困难。我遇到了这篇文章，[动态生成 Facebook Open Graph 元标记](https://stackoverflow.com/questions/8431694/dynamic-generation-of-facebook-open-graph-meta-tags)，并尝试使用该代码，但它不起作用。

这是我的 food.php 对象网页。

```
<?php

$params = array();
if(count($_GET) > 0) {
    $params = $_GET;
} else {
    $params = $_POST;
}

// defaults
if($params['type'] == "") $params['type'] = "food";
if($params['title'] == "") $params['title'] = "default title";
if($params['image'] == "") $params['image'] = "blank";
if($params['description'] == "") $params['description'] = "default description";

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

    <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# MY_APP_NAME_SPACE: http://ogp.me/ns/fb/MY_APP_NAME_SPACE#">

        <!-- Open Graph meta tags -->
        <meta property="fb:app_id" content="MY_APP_ID" />
        <meta property="og:url" content="http://mysite.com/index.php?type=<?php echo $params['type']; ?>&title=<?php echo $params['title']; ?>&image=<?php echo $params['image']; ?>&description=<?php echo $params['description']; ?>"/>
        <meta property="og:type" content="MY_APP_NAME_SPACE:<?php echo $params['type']; ?>"/>
        <meta property="og:title" content="<?php echo $params['title']; ?>"/>
        <meta property="og:image" content="http://mysite.com/img/<?php echo $params['image']; ?>.jpg"/>
        <meta property="og:description" content="<?php echo $params['description']; ?>"/>

    </head>
</html> 
```

使用此代码驻留在我的服务器中，我尝试使用带有此 url 的 fb 对象调试器工具访问该页面。

```
http://mysite.com/food.php?fb:app_id=MY_APP_ID
&og:type=MY_APP_NAME_SPACE:food
&og:title=Pizza
&og:description="Pizza"
&og:image=http://mysite.com/img/someImage.jpg 
```

*注意网址中没有空格

并且调试器抛出此错误

解析 URL 时出错：解析输入 URL 时出错，没有数据被抓取。

我想问题出在我输入的网址上，因为该工具无法解析它？如果不是，那会是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-06T19:44:17.410

```
if($params['description'] == "") $params['description'] = "default description"; 
```

“默认描述”实际上应该是您对观众将看到的网站的描述，因为这就是 facebook 在您的页面上抓取的内容。

变量 $params['description']; ?> 将在您的字符串中输出实际描述。”/>

echo 语句就像打印出实际的描述，是 facebook 的调试器将看到的。

您需要通过 URL 传递值，例如 mysite.com/pizza.php?title=pizza&description=whateveryourdescriptionis，以便 facebook 抓取该特定页面

# algorithm - 在 3D 二进制矩阵中查找连续单元组

> ID：11737033
> 
> 赞同：2
> 
> 时间：2012-07-31T09:28:19.000
> 
> 标签：algorithm, 3d, matrix

我想在矩阵中找到一组连续的单元格。

例如，让我们考虑下面的二维矩阵。

[![二维二进制矩阵](../Images/c4b683e261c0af0c84aa66bfed05169e.png)](https://i.stack.imgur.com/TuzUk.png)

在给定的矩阵中，有 2 组连续的单元格，其值为`1`：

![二进制矩阵中的连续 1](../Images/269e80fb33b6c704331898b89e4be399.png)

这是查找这些组的一种方法：

1.  为值为 1 的第一个单元格分配一个不同的值：假设`A`. 然后检查具有`1`相邻`A`值的单元格，并将这些单元格中的值设置为`A`。以这种方式搜索，直到找不到更多连续的单元格。

2.  在下一步中递增`A`到`B`并从具有 value 的单元格开始`1`。然后按照与上述相同的步骤进行操作。

这是一种蛮力，在 3D 中不会有效。有谁知道我可以通过一些调整使用的任何算法？

或者有什么简单的方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T09:50:46.373

您正在尝试做的事情通常在标签[connected component labeling](http://en.wikipedia.org/wiki/Connected-component_labeling)下进行。我不会进一步详细说明，维基百科的文章比我能够或愿意更好地解释问题。

但是在我回答的时候...

您和 SO 上的许多其他人似乎认为对数组的所有元素进行简单的迭代（您用贬义词*brute-force*来表征）是不惜一切代价避免的事情。现代计算机非常非常快。按顺序访问数组的每个元素是大多数编译器可以优化的东西。

您似乎陷入了认为访问 3D 数组的每个元素都具有时间复杂度的陷阱`O(n^3)`，其中`n`是数组每个维度上的元素数。它不是：访问数组的元素是数组`O(n)`中`n`元素的数量。

即使访问数组中每个元素的时间复杂度在`O(n^3)`许多提供更好渐近时间复杂度的复杂算法中，在实践中也将证明提供比更简单算法更差的性能。许多复杂的算法使编译器更难优化代码。而且，请记住，这`O(n^2)`是算法的等价类，其中包括具有真实时间复杂度的算法，例如和`O(m+k*n^2)`都是常量`m``k`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T12:05:06.320

这是一个简单的洪水填充算法的一些伪代码：

```
>>> def flood(i, j, matrix):
...     if 0 <= i < len(matrix) and 0 <= j < len(matrix):
...         if matrix[i][j] == 1:
...             matrix[i][j] = 0
...             for dx, dy in ((-1, 0), (1, 0), (0, -1), (0, 1)):
...                 flood(i + dx, j + dy, matrix)

>>> count = 0
>>> while True:
...     i, j = get_one(matrix)
...     if i and j: #found a one
...         count += 1
...         flood(i, j, matrix) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T09:50:50.133

这就像在图中找到[强连接的组件](http://en.wikipedia.org/wiki/Strongly_connected_component)一样，但是将整个事物扩展到 3 维。因此，您可以将任何线性时间算法用于 2D 图，并将 DFS 也用于 3 维。这应该是直截了当的。

由于这些算法是线性时间的，因此在运行时间复杂度方面您无法变得更好。

# java - 如何通过 Java 中的 Document 接口访问外部样式表？

> ID：11737034
> 
> 赞同：0
> 
> 时间：2012-07-31T09:28:20.467
> 
> 标签：java, css, dom, document, javafx-2

我有一个指向有效对象的接口引用（ **instanceof Document）。**问题是我想查看与*DOM*中特定元素关联的**样式**属性，但它只会公开**内联**属性（而*样式*已通过**外部样式表**设置）。最终目标是获取对**ViewCSS**的引用，因为我想查看关联的计算样式 - 我该怎么做？我假设，可能需要获取**DocumentView**对象（如果需要，如何，因为我没有找到任何可以返回上述对象的方法）？

 ********* * *

```
Document document = ...;

document.getImplementation().hasFeature("Views", "2.0")); 
```

这返回**true**。

```
Object obj = document.getImplementation().getFeature("Views", "2.0"); 
```

这会引发**java.lang.UnsupportedOperationException: Not supported yet。**

* * *

我做错了什么，如何解决它以及解决此问题的最佳方法是什么（我想查看/**更改**此文档的关联计算样式）？谢谢你。

**编辑**：

我认为这是最初应该提供的详细信息的重要部分：

```
java.lang.UnsupportedOperationException: Not supported yet.
    at com.sun.webpane.webkit.dom.NodeImpl.getFeature(Unknown Source) 
```

返回的**Document**对象来自在**WebEngine上触发的****javafx**包。

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T16:32:12.353

可能是这个片段解决了你的问题：

```
Document doc = ???;
HTMLDocument htmlDoc = (HTMLDocument)doc;
final HTMLBodyElement body = (HTMLBodyElement)htmlDoc.getBody();

//JS [window] access
DOMWindowImpl wnd =
        (DOMWindowImpl)((DocumentView)htmlDoc).getDefaultView();

//Style access
CSSStyleDeclaration style = wnd.getComputedStyle(body, "");
assertEquals("Style extraction", "blue", style.getPropertyValue("background-color")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T16:13:42.190

问题是 Webkit 中的 [Source/WebCore/dom/Node.idl] 不支持 [getFeature] 方法：

```
#if 0
        DOMObject          getFeature(in DOMString feature, 
                                      in DOMString version);
        DOMUserData        setUserData(in DOMString key, 
                                       in DOMUserData data, 
                                       in UserDataHandler handler);
        DOMUserData        getUserData(in DOMString key);
#endif /* 0 */ 
```

所以，我唯一能做的就是在 [com.sun.webpane.webkit.dom.DOMImplementationImpl.java]、[com.sun.webpane.webkit.dom.NodeImpl.java] 中为它创建一个存根

```
public Object getFeature(String feature, String version) {
    throw new UnsupportedOperationException("Not supported yet.");
} 
```

那是一个[特点](http://javafx-jira.kenai.com/browse/RT-23857)。问候，-uta

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T09:39:17.743

您能否检查 document.getImplementation() 返回的类（尝试打印其 .getClass()）

我最好的猜测是 .getFeature() 是 Java 5 中的一个增强，看起来在你的类路径中有一个半生不熟的 DOMImplementation 实现。获取正在加载的真实类并检查其文档，以查看它们是否具有 getFeatures() 方法的实现。**********

# facebook - j2me facebook graph api - 在用户墙上发布图像

> ID：11737035
> 
> 赞同：3
> 
> 时间：2012-07-31T09:28:24.387
> 
> 标签：facebook, api, facebook-graph-api, java-me, lwuit

我正在尝试将设备中的图像发布到用户的墙上。我发现：[http](http://codenameone.blogspot.com/2011/09/lwuit-and-facebook-api-by-chen-fishbein_18.html) ://codenameone.blogspot.com/2011/09/lwuit-and-facebook-api-by-chen-fishbein_18.html ，但它不支持发布图片，所以我写了一个简单的方法，如这个：

```
 public void postOnWallWithPhoto(String userId, String message, byte[] img) throws IOException {
    checkAuthentication();
    FacebookRESTService con = new FacebookRESTService(token, userId, FEED, true);
    con.setContentType("image/jpeg");
    con.addArgument("message", message);
    con.addArgument("type", "photo");
    con.addArgument("picture", img);
    if (slider != null) {
        SliderBridge.bindProgress(con, slider);
    }
    for (int i = 0; i < responseCodeListeners.size(); i++) {
        con.addResponseCodeListener((ActionListener) elementAt(i));
    }
    current = con;
    NetworkManager.getInstance().addToQueueAndWait(con);
} 
```

这个方法是这样调用的：

```
FileConnection fc = (FileConnection) Connector.open(path);
InputStream is = fc.openInputStream();
byte[] b = new byte[(int) fc.fileSize()];
is.read(b);
FaceBookAccess.getInstance().postOnWallWithPhoto(me.getId(), "test2", b); 
```

在我发送请求后，墙上只显示文本（在此示例中为 test2）。在应该是图像的地方，有一条消息：“invalid invalid”。

有谁知道，我做错了什么？或者有人可以与我分享一个代码，它可以帮助我在 Facebook 墙上发布图像吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:21:00.670

由于 facebook 对其登录过程进行了更改，旧的 LWUIT facebook 登录不再正常工作。

这仅适用于[Codename One](http://www.codenameone.com/)，它还支持在其当前的 facebook 演示中发布图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-13T07:35:02.990

众所周知，J2me 没有提供任何用于 facebook 支持的 api，但有一种方法我们仍然可以在 facebook 墙上发布图像，我已经做到了。下面我将分享一个简短的程序，说明我们如何使用 j2me 将图像发布到 facebook 墙上。

1.  从 facebook 获取 ACCESS TOKEN：您可以使用 PHP 或任何第三方 api 来完成它（在我的情况下，我使用 app42(shephertz) 云服务）

2.  获得访问令牌后，使用该访问令牌获取要在其上发布图像的 facebook 用户 ID。

3.  一旦你有了 userId，剩下的就是使用“MultiPart Request”将图像上传到 Facebook。以下是我的代码中的一些重要语句（我没有分享我的整个代码，因为我使用了第三方 api(app42) 来获取访问令牌和用户 ID）。

脸书网址：

```
String url = "https://graph.facebook.com/" + user_id + "/photos?access_token=" + accessToken; 
```

图像存储在字节数组中：byte fileBytes[];

多部分请求中使用的哈希表（您可以按原样复制它）：

```
Hashtable params = new Hashtable();
params.put("custom_param", "param1");
params.put("custom_param2", "param2"); 
```

发送我的多部分请求的类

```
HttpMultipartRequest req = new HttpMultipartRequest(url, params, "upload_field", "original_filename.png", "image/png", fileBytes); 
```

您可以使用以下链接参考 Multipart 请求 [http://www.developer.nokia.com/Community/Wiki/HTTP_Post_multipart_file_upload_in_Java_ME](http://www.developer.nokia.com/Community/Wiki/HTTP_Post_multipart_file_upload_in_Java_ME)

一旦你完成了它，我希望你可能已经成功地在 Facebook 墙上发布了一张图片。

快乐编码..

# magento - 折扣如何在 magento 的结帐部分呈现总计？

> ID：11737037
> 
> 赞同：4
> 
> 时间：2012-07-31T09:28:29.623
> 
> 标签：magento

折扣如何在 magento 的结帐部分呈现总计？

小计、总计是使用designs/.../tax/checkout/文件夹中的模板文件渲染的。

但是，我没有找到在 magento 的结帐页面上呈现的折扣模板。

![折扣如何在 magento 结帐页面上呈现？](../Images/9852afe0fa90811098ca101118300761.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T11:25:36.543

我得到了解决方案。它在设计/.../checkout/total/default.phtml 文件中。对于折扣，默认情况下它将采用 Mage_Checkout_Block_Cart_Totals 类中定义的 default.phtml 文件

谢谢，

普拉桑斯 P

Skype: prasanth.p88

# php - 我上传了 2 个图像文件，但只有一个保存在文件夹中

> ID：11737038
> 
> 赞同：0
> 
> 时间：2012-07-31T09:28:29.690
> 
> 标签：php, loops

我在这里遇到情况，我的想法不多了，当我上传 2 张图片时，文件夹中只保存了一张图片。谁能帮我写剧本？

```
$q = "SELECT h.hop_id,h.hop_name, n.ne_site_name, n.ne_site_code, f.fe_site_name, f.fe_site_code, p.photo_id, p.ne_photo_image, p.fe_photo_image
FROM hop AS h 
    LEFT JOIN ne_site AS n ON(h.ne_site_id = n.ne_site_id)
    LEFT JOIN fe_site AS f ON(h.fe_site_id = f.fe_site_id)
    LEFT JOIN photo AS p ON(h.hop_id = p.hop_id)
    WHERE h.hop_id = '".$_GET['kode']."'
    "; 
    $r = mysql_query($q) or die ($q);
    $data = mysql_fetch_array ($r);

$tmp_file = $_FILES[ne_photo_image][tmp_name];
$size = $_FILES[ne_photo_image][size];
$file = $_FILES[ne_photo_image][name];

$tmp_file1 = $_FILES[fe_photo_image][tmp_name];
$size1 = $_FILES[fe_photo_image][size];
$file1 = $_FILES[fe_photo_image][name];

            $q = mysql_query("insert into photo(ne_photo_image,fe_photo_image,title,hop_id)
        values ('$file','$file1','$_POST[photo_name_id]','$_POST[photo_hop_id]')") or die(mysql_error());
            if ($q) {
            } else {
                echo 'gagal';
            }

    move_uploaded_file($tmp_file, 'image/' . $file) 
```

这是我的表格：

```
 <form method="post" enctype="multipart/form-data">
    <table border="0"cellpadding="0" cellspacing="0" width= "100%">
        <tr>
            <td>Hop Name :<?echo "$data[hop_name]"?>
                <input type='hidden' name='photo_hop_id' value='<?echo"$data[hop_id]"?>'>
            </td>
        </tr>
                <table border="0"cellpadding="0" cellspacing="0" width= "100%">
    <tr>
                <td cellpadding="0" cellspacing="0" width= "50%"> 
                    Near End Site Name : <?echo "$data[ne_site_name]"?>
                        </br>
                    Near End Site Id : <?echo "$data[ne_site_code]"?>
                </td>
                <td cellpadding="0" cellspacing="0" width= "50%"> 
                    Far End Site Name : <?echo "$data[fe_site_name]"?>
                        </br>
                    Far End Site Id : <?echo "$data[fe_site_code]"?>
                </td>
    </tr>   
    <tr>
                <td cellpadding="0" cellspacing="0" width= "50%"> 
                    <?  $pm1= mysql_query("SELECT photo_name FROM photo_name WHERE photo_name_id = 1");
                        $dpm1 = mysql_fetch_array ($pm1);echo"$dpm1[0]"?> 
                    <input type='hidden' name='photo_name_id' value='<?echo"$dpm1[0]"?>'> :  
                    <input type="file" name="ne_photo_image">
                </td>
                <td cellpadding="0" cellspacing="0" width= "50%"> 
                    <?echo "$dpm1[0]"?> : <input type="file" name="fe_photo_image">
                </td>
    </tr>   

</table>

    </table>
    <input type="submit" value="tambah" />
</form> 
```

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:30:04.413

您`move_uploaded_file`仅用于第一个文件，这就是没有上传第二张图片的原因。将另一个用于第二张图像。

```
move_uploaded_file($tmp_file, 'image/' . $file)
move_uploaded_file($tmp_file1, 'image/' . $file1) 
```

UDPATE ：用于调试目的

```
if(! move_uploaded_file($tmp_file1, 'image/' . $file1))
{
  echo $_FILES["fe_photo_image"]["error"];
} 
```

# c# - 在 Web API 中使用 RedirectToAction

> ID：11737040
> 
> 赞同：6
> 
> 时间：2012-07-31T09:28:35.883
> 
> 标签：c#, redirect, asp.net-web-api, redirecttoaction

我在我的 ASP.Net WebAPI 应用程序中使用 RedirectToAction，我尝试了以下一个。

```
return RedirectToAction("AuthenticateUser", "AuthenticationServiceWebApi", new RouteValueDictionary
                                                                    {
                                                                        {"userName", model.UserName},
                                                                        {"password", model.Password}
                                                                    }); 
```

这会生成如下重定向。

```
127.0.0.1:81/authenticationservicewebapi/authenticateuser/admin/admin@123 
```

但是，由于我使用的是 WebAPI，所以我需要是如下所示的 URL。

```
127.0.0.1:81/api/authenticationservicewebapi/authenticateuser/admin/admin@123 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T09:46:08.650

如果用户未通过身份验证，则不应重定向。另一端通常没有交互式用户，因此您应该真正返回 HTTP 状态代码 401 而不是重定向。

* * *

ASP.NET Web API 中没有等价物。

**如果你坚持**这样做，那么这里是：

你扔`HttpResponseException`：

```
var httpResponseMessage = new HttpResponseMessage(HttpStatusCode.Found);
httpResponseMessage.Headers.Location = new Uri(myAddress, UriKind.Relative);
throw new HttpResponseException(httpResponseMessage); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T10:31:27.643

我不确定您的路由、Web API 操作签名是什么样的，所以我会尝试猜测。有几件事在这里并没有真正加起来（为什么要在 url 中传递密码？）

但...

鉴于您的 url 结构，我猜您的路由类似于：

```
 routes.MapHttpRoute(
        name: "DefaultApi",
        routeTemplate: "api/{controller}/{action}/{id}/{id2}",
        defaults: new { id = RouteParameter.Optional, id2 = RouteParameter.Optional }
    ); 
```

然后鉴于此，我猜您的身份验证用户必须类似于：

```
public HttpResponseMessage AuthenticateUser([FromUri]string id, [FromUri]string id2) 
```

如果是这样，那么要从 MVC 控制器重定向到此，您需要：

```
 return Redirect(
            Url.RouteUrl("DefaultApi", 
                new { httproute = "", 
                      controller = "AuthenticationServiceWebApi", 
                      action = "AuthenticateUser", 
                      id = model.UserName,
                      id2 = model.Password
            })); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:55:42.697

我还想出了一个简单的解决方案。不如上面的那么好，但值得分享。

```
 string post_data = "userName=th&password=admin@123";

        string uri = "http://127.0.0.1:81/api/authenticationservicewebapi/authenticateuser";

        // create a request
        HttpWebRequest request = (HttpWebRequest)
        WebRequest.Create(uri); 
        request.KeepAlive = false;
        request.ProtocolVersion = HttpVersion.Version10;
        request.Method = "POST";

        // turn our request string into a byte stream
        byte[] postBytes = Encoding.ASCII.GetBytes(post_data);

        // this is important - make sure you specify type this way
        request.ContentType = "application/x-www-form-urlencoded";
        request.ContentLength = postBytes.Length;
        Stream requestStream = request.GetRequestStream();

        // now send it
        requestStream.Write(postBytes, 0, postBytes.Length);
        requestStream.Close(); 
```

谢谢你们。

# gridview - 设置集合后如何更新gridview

> ID：11737043
> 
> 赞同：0
> 
> 时间：2012-07-31T09:28:43.683
> 
> 标签：gridview, microsoft-metro, observablecollection, inotifypropertychanged

我正在尝试将 a 绑定`GridView`到集合，并且我想`GridView`在集合设置后进行更新。

我不使用的原因`ObservableCollection`是，如果集合很大（超过 1000 个项目，并且我想在添加所有项目后显示所有项目），它将阻止 UI。在 Metro 风格的应用程序中，没有 C# 使用的 BindingList 类，所以我需要实现自己的集合类吗？我试图实现一个继承的类`IList`和`INotifyPropertyChanged`.

我做了这样的事情：

```
<GridView x:Name="ItemsGridView" ItemsSource="{Binding viewCollection}"/>

class MyBindingList<T> : IList<T>, INotifyPropertyChanged
{
    private List<Item> _viewCollection = new List<Item>();
    public List<Item> viewCollection 
    { get { return _viewCollection; } set { _viewCollection = value; } }
    public virtual event PropertyChangedEventHandler PropertyChanged;
    public void RaiseChanged()
    {
        this.PropertyChanged(this, new PropertyChangedEventArgs("viewCollection"));
    }
}
MyBindingList<Item> list = new MyBindingList<Item>();
ItemsGridView.DataContext = list; 
```

有人可以给我一个建议吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:58:57.173

在您的代码中，您的 GridView 将其 ItemsSource 绑定到 viewCollection。您唯一缺少的为什么它不通知的是 RaiseChanged() 方法。

```
 public List<Item> viewCollection 
{ get { return _viewCollection; } set { _viewCollection = value; RaiseChanged(); } } 
```

还有一件事，我不建议将字符串属性放在您的 RaiseChange 方法上。它至少应该接受一个字符串属性名称并将其传递给 PropertyChangedEventArgs。

通知/更新 XAML 中的 UI 控件的理想属性如下所示

```
public List<Item> viewCollection 
    { get { return _viewCollection; } set { _viewCollection = value; NotifyPropertyChanged("viewCollection"); } } 
```

因此，假设您要将 viewCollection 设置在 ViewModel 中的某个位置。它应该更新 GridView。

# html - 如何在 HTML5 中操作画布元素？

> ID：11737045
> 
> 赞同：0
> 
> 时间：2012-07-31T09:28:47.783
> 
> 标签：html, html5-canvas

考虑如果每边有两个盒子，每个盒子都有 5 个条目，左边的盒子有动物的名字，比如狗、猫、老虎、大象、猴子。右边会有牛奶、山羊、椰子、骨头、香蕉。

现在使用`canvas element`我需要映射这 2 个框元素并将结果保存在中，`Database`并且下次我还需要再次检索它。

我如何实现这个？

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:35:17.187

如果要将画布保存到数据库，则需要将画布转换为 Base64 字符串，然后将此字符串保存到数据库，如下所示：

```
<input type="text" name="mybase64" />

<script type="text/javascript">
    function saveClicked() {
        var dataURL = document.getElementsByTagName("canvas")[0].toDataURL("image/jpeg");
        $("input[name=\"mybase64\"]").val(dataURL);
    }
</script> 
```

然后，您将将此**mybase64**发布到将接收的任何 Web 服务/代码隐藏页面，并将此字符串写入您的存储介质。要将图像重绘到画布，您将从数据库中获取 base64 字符串并将其写入画布，如下所示：

```
function drawCanvas(myBase64String) {
    var canvas = document.getElementsByTagName("canvas")[0];
    var context = canvas.getContext("2d");
    var image = new Image();
    image.src = myBase64String;
    image.onload = function() {
        context.drawImage(image, 0, 0);
    }
} 
```

您问题的主要答案是，如果您想将画布存储到数据库中，则**必须**以 base64 格式完成。

# android - Android 将图像剪辑到边界

> ID：11737051
> 
> 赞同：0
> 
> 时间：2012-07-31T09:29:08.720
> 
> 标签：android, shape

我有一个自定义`@drawable`作为按钮的背景。我在它上面有一个位图和一个形状。问题是位图的角没有剪裁到形状，如下图所示。

我的问题是：有没有办法将位图剪辑到形状的边界？如何？

![在此处输入图像描述](../Images/7db7fe3a67fdf34584fc25b6f8d2182a.png)

**编辑：**这是 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true">
        <shape>
            <solid
                android:color="#8F8F8F" />
            <stroke
                android:width="1dp"
                android:color="#8f8f8f" />
            <corners
                android:radius="8dp" />
            <padding
                android:left="10dp"
                android:top="10dp"
                android:right="10dp"
                android:bottom="10dp" />
        </shape>
    </item>
    <item>
        <layer-list>
            <item>
                <!-- <nine-patch android:src="@drawable/button"/>-->
                <bitmap android:src="@drawable/background_image" />
            </item>
            <item>
                <shape>
                    <solid android:color="@android:color/transparent" />
                    <stroke android:width="1dp" android:color="#8f8f8f" />
                    <corners android:radius="12dp" />
                    <padding android:bottom="10dp" android:left="10dp" android:right="10dp" android:top="10dp" />
                </shape>
            </item>
        </layer-list>
    </item>
</selector> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:44:19.340

您必须更改角落的 Alpha 级别或使用[Draw 9-patch 工具](http://developer.android.com/tools/help/draw9patch.html)创建背景

# arrays - 数组和切片数据类型

> ID：11737053
> 
> 赞同：54
> 
> 时间：2012-07-31T09:29:19.233
> 
> 标签：arrays, go, slice, pass-by-value, func

我发现自己对`array`和`slice`数据类型感到困惑。

在 Go 文档中，数组描述如下：

> 数组在 Go 和 C 中的工作方式之间存在重大差异。在 Go 中，
> 
> *   数组是值。将一个数组分配给另一个数组会复制所有元素。
> *   特别是，如果将数组传递给函数，它将收到数组的副本，而不是指向它的指针。
> *   数组的大小是其类型的一部分。[10]int 和 [20]int 类型是不同的。

职能：

> 与 C 家族中的所有语言一样，Go 中的所有内容都是按值传递的。也就是说，一个函数总是得到一个被传递的东西的副本，就好像有一个赋值语句将值分配给参数一样。例如，将 int 值传递给函数会生成 int 的副本，传递指针值会生成指针的副本，但不会复制它指向的数据。

`sort.Ints(arrayValue)`当我将传递的变量声明为数组而不是切片时，为什么要修改它？

代码

```
var av = []int{1,5,2,3,7}

fmt.Println(av)
sort.Ints(av)
fmt.Println(av)
return 
```

输出

```
[1 5 2 3 7]
[1 2 3 5 7] 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-07-31T09:39:17.087

请参阅“[切片：用法和内部](http://golang.org/doc/articles/slices_usage_and_internals.html)”

```
var av = []int{1,5,2,3,7} 
```

那是一个切片，而不是一个数组。

> 切片文字的声明方式与数组文字一样，只是省略了元素计数。

这就解释了为什么排序函数会修改切片引用的*内容。*

正如[Kirk](https://stackoverflow.com/users/1236394/kirk)[`sort.Ints`](https://golang.org/pkg/sort/#Ints)在下面评论的那样， 如果您将数组而不是切片传递给它，则会给您一个错误。

```
func Ints(a []int) 
```

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-07-31T09:38:47.953

因为您使用的是切片，而不是数组。

那是一片：

```
var av = []int{1,5,2,3,7} 
```

这些是数组：

```
var av = [...]int{1,5,2,3,7}
var bv = [5]int{1,5,2,3,7} 
```

如果您尝试编译：

```
var av = [...]int{1,5,2,3,7}
fmt.Println(av)
sort.Ints(av)
fmt.Println(av) 
```

，你会得到一个错误：

> 不能在函数参数中使用 av (type [5]int) 作为 type []int

因为 sort.Ints 期望收到一个[切片 []int](http://golang.org/pkg/sort/#Ints)。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-31T09:47:25.787

`[]int{1,5,2,3,7}`不是数组。数组在其类型中具有长度，例如`[5]int{1,5,2,3,7}`.

制作切片的副本并对其进行排序：

```
a := []int{1,5,2,3,7}
sortedA := make([]int, len(a))
copy(sortedA, a)
sort.Ints(sortedA)
fmt.Println(a)
fmt.Println(sortedA) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-02T11:42:33.527

```
var av = []int{1,5,2,3,7} 
```

在上面的语句中，您正在像数组一样初始化切片

要创建一个数组，语法应该是

```
var av = [5]int{1,5,2,3,7} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-01-18T06:57:04.440

切片是指向数组的指针。当您将一个数组复制到另一个数组或在函数中传递一个数组时，会复制或传递数组的整个副本。如果数组大小很大，这会使操作成本更高。所以我们可以去切片。

# windows-8 - 如何在 Metro 风格应用程序中设置对 Richeditbox 的关注？

> ID：11737054
> 
> 赞同：1
> 
> 时间：2012-07-31T09:29:22.573
> 
> 标签：windows-8, setfocus

我有以下代码：

```
 private async void SendMsg_Click(object sender, RoutedEventArgs e)
{
 RichEditBox.Document.SetText(TextSetOptions.None, "");
 await Dispatcher.RunAsync(CoreDispatcherPriority.Normal, () =>
    {
       if(RichEditBox!=null)
       SendBox.Focus(Windows.UI.Xaml.FocusState.Keyboard);
    });
 } 
```

但是单击时，RichEditBox 没有获得焦点。我的代码有什么问题？谢谢

对不起，我忘了添加这个代码：“MsgWebView.NavigateToString("Hello World!");”。我发现问题出在这。所以整个代码是这样的：

```
private void SendMsg_Click(object sender, RoutedEventArgs e)
{
   MsgWebView.NavigateToString("Hello  World!");
   SendBox.Focus(Windows.UI.Xaml.FocusState.Programmatic);

} 
```

如何解决这个问题呢？此致。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:39:02.710

您需要在 FocusState（不是键盘）上使用[Programmatic选项。](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.focusstate.aspx)

```
SendBox.Focus(Windows.UI.Xaml.FocusState.Programmatic); 
```

# c# - 计时器间隔小于滴答事件中的函数

> ID：11737056
> 
> 赞同：1
> 
> 时间：2012-07-31T09:29:33.980
> 
> 标签：c#, .net, multithreading

我有一个`timer`10 秒的时间`interval`，`timer_Tick`我做一些通常需要大约一秒钟的事情，但有时需要超过 90 秒。它将如何行动？此事件是否同步以等待`eventhandler`完成执行？我测试了，但我仍然需要一个答案...

```
private void checkTimer_Tick(object sender, EventArgs e)
{
    MessageBox.Show("Test");   
    for (int i = 0; i < 2000000000; i++)
    {

    }
    MessageBox.Show("Test");
} 
```

当我在显示第一个刻度后对其进行测试时`MessageBox`。**我没有单击“确定**”并等待另一个滴答声。另一个`MessageBox`显示在秒刻度上，依此类推......

在[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)中，我读到它是同步的……有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T09:49:59.540

我通过在滴答事件开始时添加计时器禁用并在滴答事件结束时启用来解决它。像这样

```
private void checkTimer_Tick(object sender, EventArgs e)
        {
            checkTimer.Enabled = false;
            MessageBox.Show("Test");   
            for (int i = 0; i < 2000000000; i++)
            {

            }
            MessageBox.Show("Test");
            checkTimer.Enabled = true;
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T09:50:30.137

我在`System.Windows.Timers`您链接到的文档中没有看到任何内容提到它正在同步。如果您希望每个 Tick 事件都等到上一个 Tick 事件完成。在处理程序开始时停止计时器，并在工作完成后重新启动。这就是 MSDN 文档显示的内容。

# c# - 如何捕获自定义文件夹上的 Outlook 约会删除事件？

> ID：11737059
> 
> 赞同：2
> 
> 时间：2012-07-31T09:29:39.830
> 
> 标签：c#, .net, outlook-addin

我正在开发一个 Outlook 插件。其中一部分是我在特定文件夹中组织约会。我想捕获一个元素是否被删除（在这种情况下，移出“我的”文件夹算作已删除）。

我发现文章[https://stackoverflow.com/questions/10579240/how-to-capture-ac-sharp-outlook-addin-appointment-delete-event](https://stackoverflow.com/questions/10579240/how-to-capture-a-c-sharp-outlook-addin-appointment-delete-event)和他/她的解决方案有很大帮助，但我有一个很大的问题：该事件仅在创建我的文件夹的“会话”中触发，而不是在我从 Outlook 获取文件夹对象时触发。

我的代码如下所示：

```
private Outlook.MAPIFolder _CalendarMAPIFolder = null;
private Outlook.MAPIFolderEvents_12_Event _CalendarFolder = null;
private Outlook.Items _CalendarItems = null;

private void ThisAddIn_Startup(object sender, System.EventArgs e)
{
    Outlook.MAPIFolder calendarFolder =
        this.Application.GetNamespace("mapi").GetDefaultFolder(Outlook.OlDefaultFolders.olFolderCalendar);

    // get my-Folder (if not found, create it)
    try
    {
        _CalendarMAPIFolder = calendarFolder.Folders["my-Folder"];
    }
    catch
    {
        _CalendarMAPIFolder = calendarFolder.Folders.Add("my-Folder");
    }
    _CalendarItems = _CalendarMAPIFolder.Items;
    _CalendarFolder = _CalendarMAPIFolder as Outlook.MAPIFolderEvents_12_Event;
    if (_CalendarFolder == null)
    {
        MessageBox.Show("can not cast MAPIFolder to Folder");
    }

    _CalendarFolder.BeforeItemMove += new Outlook.MAPIFolderEvents_12_BeforeItemMoveEventHandler(Folder_BeforeItemMove);
    Debug.Print("events registered");
}
public void Folder_BeforeItemMove(
        Object Item,
        Outlook.MAPIFolder MoveTo,
        ref bool Cancel)
{
    Outlook.AppointmentItem aitem = Item as Outlook.AppointmentItem;
    string s = "";
    if (aitem != null) s = aitem.Subject;
    //Cancel = false;
    MessageBox.Show("Test! " + s);
} 
```

有没有人有办法解决吗？

谢谢 ;）

编辑：我仍然不知道:(((((((

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T18:59:06.783

根据定义，仅在用户（ *Outlook 客户端*）启动移动[`BeforeItemMove`](http://msdn.microsoft.com/en-us/library/office/bb147840%28v=office.12%29.aspx)时触发。它不会因同步事件而触发（*即 Exchange 同步*）。*`Item`*

 **如果您将 Outlook 连接到 Exchange 服务器，如果您希望在客户端应用程序（*即会话）之外*[收到文件夹更改事件的通知，](http://msdn.microsoft.com/en-us/library/aa579128%28v=exchg.140%29)则应该查看 EWS（*Exchange Web 服务*）。EWS 提供推送、拉取或流式通知选项。您将向[“项目删除”操作](http://msdn.microsoft.com/en-us/library/dd877045%28v=exchg.140%29)附加通知。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:43:42.767

都是微软的错！这是一个错误，我只需要更新 Outlook！***

# apache - IIS 中的服务器别名

> ID：11737065
> 
> 赞同：1
> 
> 时间：2012-07-31T09:30:03.043
> 
> 标签：apache, iis

我想在 IIS 7.5 中创建等效的 Apache 服务器别名条目。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T09:35:31.683

如果我正确理解 Apache 的服务器别名，那么您正在寻找的是一个虚拟目录。在 IIS 管理器中，右键单击网站或文件夹并选择“添加虚拟目录”。然后，您可以使用特定别名（将构成 Url 的一部分）和物理路径（可以在磁盘上的任何位置，不一定在网站的根文件夹下）将目录添加到网站。

**编辑：**怀疑我混淆了 Apache 的“别名”和“服务器别名”功能：您可能正在寻找 IIS 站点的“绑定”，它允许将多个域名映射到特定的 Web 应用程序。

# c++ - 如何在 C++ 中使用域名获取域 IP 地址？

> ID：11737066
> 
> 赞同：3
> 
> 时间：2012-07-31T09:30:02.557
> 
> 标签：c++

我正在使用视觉 C++，

我想从域名中获取域 ip 地址.. 我如何得到它.. 我已经尝试过 gethostbyname 函数...这里是我的代码...

```
 HOSTENT* remoteHost;        
    IN_ADDR addr;       
    hostName = "domainname.com"; 
    printf("Calling gethostbyname with %s\n", hostName);
remoteHost =gethostbyname(hostName);
memcpy(&addr.S_un.S_addr, remoteHost->h_addr, remoteHost->h_length);
printf("The IP address is: %s\n", inet_ntoa(addr)); 
```

但是我得到一个错误的IP地址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:10:43.973

这是我有时觉得很方便的一个小实用程序的完整源代码（我将其命名为“resolve”）。它所做的只是将域名解析为数字 IP (v4) 地址，然后将其打印出来。照原样，它适用于 Windows - 对于 Linux（或类似的），您只需要摆脱`use_WSA`类（及其对象）。

```
#include <windows.h>
#include <winsock.h>
#include <iostream>
#include <iterator>
#include <exception>
#include <algorithm>
#include <iomanip>
#include "infix_iterator.h"

class use_WSA { 
    WSADATA d; 
    WORD ver;
public:
    use_WSA() : ver(MAKEWORD(1,1)) { 
        if ((WSAStartup(ver, &d)!=0) || (ver != d.wVersion))
            throw(std::runtime_error("Error starting Winsock"));
    }
    ~use_WSA() { WSACleanup(); }    
};

int main(int argc, char **argv) {
    if ( argc < 2 ) {
        std::cerr << "Usage: resolve <host-name>";
        return EXIT_FAILURE;
    }

    try { 
        use_WSA x;

        hostent *h = gethostbyname(argv[1]);
        unsigned char *addr = reinterpret_cast<unsigned char *>(h->h_addr_list[0]);
        std::copy(addr, addr+4, infix_ostream_iterator<unsigned int>(std::cout, "."));
    }
    catch (std::exception const &exc) {
        std::cerr << exc.what() << "\n";
        return EXIT_FAILURE;
    }

    return 0;
} 
```

这也使用了[`infix_ostream_iterator`](https://stackoverflow.com/a/3497021/179910)我之前发布的。

# validation - Cakephp 电子邮件输入验证异常

> ID：11737070
> 
> 赞同：0
> 
> 时间：2012-07-31T09:30:13.840
> 
> 标签：validation, email, cakephp

我对表单中的电子邮件输入进行了验证，但我还想为字符串创建一个例外：“未给出”，因为某些联系信息没有电子邮件地址。我知道我可以删除电子邮件验证来执行此操作，但我希望对新联系人进行验证。那些没有电子邮件地址的人是一些旧联系人。所以我需要一个例外才能将这些联系人添加到这个新系统中。

我当前在模型中的电子邮件验证如下：

```
'email' => array(
        'email' => array(
            'rule' => array('email'),
            'message' => 'Please enter a valid email address',
            //'allowEmpty' => false,
            //'required' => false,
            //'last' => false, // Stop validation after this rule
            //'on' => 'create', // Limit validation to 'create' or 'update' operations
        ),
        'uniqueEmail' => array(
            'rule'=>'isUnique',
            'message' => 'This email has already been added'
        ),
    ) 
```

我如何实现这个异常以及在哪里？

任何帮助都会很棒。谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:54:45.300

只需取消注释该`'allowEmpty' => false`行并将其更改为`true`，这将允许填写的电子邮件作为空字符串提交。

# css - 语义标记和 Twitter 引导

> ID：11737076
> 
> 赞同：0
> 
> 时间：2012-07-31T09:30:29.907
> 
> 标签：css, twitter-bootstrap, less, semantic-markup

我有以下 HTML：

```
<!doctype html>
<html>
<head>
  <link rel="stylesheet/less" href="assets/stylesheets/style.less" />
  <script src="assets/stylesheets/vendor/less/less-1.3.0.min.js"></script>
</head>
<body>
  <nav>
    <ul class="tabs">
        <li class="selected">
          <a href="#">Foo</a>
        </li>
        <li><a href="#">Bar</a></li>
        <li><a href="#">Baz</a></li>
    </ul>
  <nav>
</body>
</html> 
```

我应该如何编写 style.less 以将列表样式设置为[Twitter Bootstrap Basic Tab](http://twitter.github.com/bootstrap/components.html#navs%5D)。这样做的明显方法是复制和粘贴所有相关的 css：

$cat style.less

```
@import "vendor/bootstrap/less/bootstrap.less";

.tabs {
  // .nav
  margin-left: 0;
  margin-bottom: @baseLineHeight;
  list-style: none;

  // common style for tabs and pills
  .clearfix();

  // Give the tabs something to sit on
  border-bottom: 1px solid #ddd;
}

.tabs > li {
  float: left;
}

// Make links block level
.tabs > li > a {
  display: block;
}

.tabs > li > a:hover {
  text-decoration: none;
  background-color: @grayLighter;
}

// common style for nav-tabs
.tabs > li > a {
  padding-right: 12px;
  padding-left: 12px;
  margin-right: 2px;
  line-height: 14px; // keeps the overall height an even number
}

// Make the list-items overlay the bottom border
.tabs > li {
  margin-bottom: -1px;
}

// Actual tabs (as links)
.tabs > li > a {
  padding-top: 8px;
  padding-bottom: 8px;
  line-height: @baseLineHeight;
  border: 1px solid transparent;
  .border-radius(4px 4px 0 0);
  &:hover {
    border-color: @grayLighter @grayLighter #ddd;
  }
}

// Active state, and it's :hover to override normal :hover
.tabs > .selected > a,
.tabs > .selected > a:hover {
  color: @gray;
  background-color: @white;
  border: 1px solid #ddd;
  border-bottom-color: transparent;
  cursor: default;
} 
```

有没有更好的方法来实现这一点，而无需大量复制和粘贴？注意：我无法更改 HTML 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:37:48.057

我最终通过重写或覆盖 bootstrap/less/navs.less （请参阅：[HTML and less files](http://jsfiddle.net/crh_/PfxwG/4/)）使其可混合并[允许混合适当的 LESS 类](https://github.com/twitter/bootstrap/issues/3326)

$cat 供应商/bootstrap/less/navs.less

```
// NAVIGATIONS
// -----------

// BASE CLASS
// ----------

.nav {
  margin-left: 0;
  margin-bottom: @baseLineHeight;
  list-style: none;
  > li {
    > a {
      display: block; // Make links block level
    }
    > a:hover {
      text-decoration: none;
      background-color: @grayLighter;
    }
  }
}
.nav-tabs {
  .clearfix();
  border-bottom: 1px solid #ddd; // Give the tabs something to sit on
  > li {
    float: left;
    margin-bottom: -1px; // Make the list-items overlay the bottom border
    > a {
      padding-right: 12px;
      padding-left: 12px;
      margin-right: 2px;
      line-height: 14px; // keeps the overall height an even number

      padding-top: 8px;
      padding-bottom: 8px;
      line-height: @baseLineHeight;
      border: 1px solid transparent;
      .border-radius(4px 4px 0 0);
      &:hover {
        border-color: @grayLighter @grayLighter #ddd;
      }
    }
  }
}

.nav-tabs {
  // Active state, and it's :hover to override normal :hover
  > .active {
    > a, a:hover {
      color: @gray;
      background-color: @white;
      border: 1px solid #ddd;
      border-bottom-color: transparent;
      cursor: default;
    }
  }
} 
```

$ cat style.less

```
 @import "vendor/bootstrap/less/bootstrap.less";

    .foo {
      .nav;
      .nav-tabs;
    }

    .foo > .bar {
      .nav-tabs > .active;
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-10T18:41:04.267

你的例子不起作用，对不起

但我对这个主题非常感兴趣。我想合作

在我看来，没有必要讨论给予这条道路

首先我们在页面中混合内容和样式然后他们制作 css 以将两者分开现在我们再次混合样式（将标签放在对象的类中是 mix'em）和内容在一起

所以，让我们再次分开兄弟！

# javascript - 如何在我的视图中打印 JavaScript 代码？

> ID：11737077
> 
> 赞同：0
> 
> 时间：2012-07-31T09:30:30.250
> 
> 标签：javascript, ruby-on-rails, string, view

我需要为我的用户提供 js 代码，所以我有文本区域：

```
 <%=  text_area_tag 'body',  "//<script>...</script>"%> 
```

我不能让它工作。我知道如何使用控制器中的变量来做到这一点：

```
 @payKey = @xml["payKey"].to_s()
      "#{@payKey}" 
```

**编辑。全文打印：**

```
 <script>var _p_g={id:@website.id};</script>
   <script src="..."></script> 
```

并在视图中打印，但给了我错误：

```
 E:/myapp/myapp_prev/myapp/app/controllers/websites_controller.rb:12: unknown regexp option - j
   E:/myapp/myapp_prev/myapp/app/controllers/websites_controller.rb:12: syntax error, unexpected tSTRING_BEG, expecting keyword_end
   <></script>"
                                               ^ 
```

那么解决这个麻烦的更好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T09:40:33.500

问题似乎是您将双引号放在其他引号内，导致语法错误。

尝试这个：

```
 <%=  text_area_tag 'body',  '<script src="//cdn.printitgreen.com/js/embedded.js"></script>'%> 
```

# iphone - 您如何使用 avaudioplayer 更有效地使 iphone 加速器触发声音？

> ID：11737078
> 
> 赞同：0
> 
> 时间：2012-07-31T09:30:31.080
> 
> 标签：iphone, avaudioplayer

我创建了一个简单的应用程序，它可以根据加速度计的 x、y、z 轴触发 3 种不同的声音，就像一个乐器一样。目前，如果我将加速度计的频率更新间隔设置得太低，它会播放太多声音，如果我将它设置得太高，它会响应不够。我是objective c和iphone开发的完全初学者，你能通过代码告诉你吗！..

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional 

    UIAccelerometer* accelerometer = [UIAccelerometer sharedAccelerometer];
    [accelerometer setUpdateInterval: 25.0 / 10.0f];

    [[AVAudioSession sharedInstance] setDelegate: self];
    [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error: nil];
   [accelerometer setDelegate:self];

    UInt32 audioRouteOverride = kAudioSessionOverrideAudioRoute_Speaker;
    AudioSessionSetProperty (kAudioSessionProperty_OverrideAudioRoute,sizeof (audioRouteOverride),&audioRouteOverride);

    player.volume = 0.5;
    player.numberOfLoops = 0;
    player.delegate = self;
}

- (void)accelerometer:(UIAccelerometer *)acel didAccelerate:(UIAcceleration *)aceler 
{

    if (aceler.x > 0.5) {
        NSString *fileName = [NSString stringWithFormat:@"snare"];
        NSString *soundFilePath = [[NSBundle mainBundle] pathForResource:fileName ofType:@"mp3"];
        NSURL *soundFileURL = [NSURL fileURLWithPath:soundFilePath];
        player = [[AVAudioPlayer alloc] initWithContentsOfURL:soundFileURL error:nil];
        NSLog(@"acceleration.x = %+.6f greater", aceler.x);
        [player play];

    }
    else if (aceler.y > 0.5) {
        NSString *fileName = [NSString stringWithFormat:@"kick2"];
        NSString *soundFilePath = [[NSBundle mainBundle] pathForResource:fileName ofType:@"mp3"];
        NSURL *soundFileURL = [NSURL fileURLWithPath:soundFilePath];
        player = [[AVAudioPlayer alloc] initWithContentsOfURL:soundFileURL error:nil];
        NSLog(@"acceleration.y = %+.6f greater", aceler.y);
        [player play];

    }
    else if (aceler.z > 0.5) {
        NSString *fileName = [NSString stringWithFormat:@"hat"];
        NSString *soundFilePath = [[NSBundle mainBundle] pathForResource:fileName ofType:@"mp3"];
        NSURL *soundFileURL = [NSURL fileURLWithPath:soundFilePath];
        player = [[AVAudioPlayer alloc] initWithContentsOfURL:soundFileURL error:nil];
        NSLog(@"acceleration.y = %+.6f greater", aceler.z);
        [player play];
    }

    else  {
        [player stop];
    };

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T08:23:16.080

将加速度计的更新频率设置为较低的值在这里无济于事。想象以下情况：

```
time:                          ------------------------>
real world acceleration event: ___X_____X_____X_____X___ 
acceleration update:           X_____X_____X_____X_____X
sound output started:          _________________________ 
```

该草案代表用户以与更新加速度计相同的频率摇动设备。但是抖动事件发生在两个加速度计更新之间。因此，不会注册摇晃事件，也不会播放任何声音。

与之前的方法相比，考虑高加速度计更新频率：

```
real world acceleration event: ___X_____X_____X_____X___ 
acceleration update:           XXXXXXXXXXXXXXXXXXXXXXXXX
sound output started:          ___X_____X_____X_____X___ 
```

基本上所有现实世界的事件都会在这种情况下产生声音。

修改后的代码如下：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSLog(@"viewDidLoad");

    UIAccelerometer* accelerometer = [UIAccelerometer sharedAccelerometer];
    //[accelerometer setUpdateInterval: 25.0 / 10.0f];
    [accelerometer setUpdateInterval: 0.01f];

    [[AVAudioSession sharedInstance] setDelegate: self];
    [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error: nil];
    [accelerometer setDelegate:self];

    UInt32 audioRouteOverride = kAudioSessionOverrideAudioRoute_Speaker;
    AudioSessionSetProperty (kAudioSessionProperty_OverrideAudioRoute,sizeof (audioRouteOverride),&audioRouteOverride);

    //player.volume = 0.5;
    //player.numberOfLoops = 0;
    //player.delegate = self;

}

- (void)accelerometer:(UIAccelerometer *)acel didAccelerate:(UIAcceleration *)aceler 
{

    if ((aceler.x > ACC_THRESHOLD)&&((playerX == nil)||(playerX.isPlaying == NO))) {
        NSString *fileName = [NSString stringWithFormat:@"snare"];
        NSString *soundFilePath = [[NSBundle mainBundle] pathForResource:fileName ofType:@"mp3"];
        NSURL *soundFileURL = [NSURL fileURLWithPath:soundFilePath];
        playerX = [[AVAudioPlayer alloc] initWithContentsOfURL:soundFileURL error:nil];
        NSLog(@"acceleration.x = %+.6f greater", aceler.x);
        playerX.delegate = self;
        [playerX play];

    }

    if ((aceler.y > ACC_THRESHOLD)&&((playerY == nil)||(playerY.isPlaying == NO))) {
        NSString *fileName = [NSString stringWithFormat:@"kick2"];
        NSString *soundFilePath = [[NSBundle mainBundle] pathForResource:fileName ofType:@"mp3"];
        NSURL *soundFileURL = [NSURL fileURLWithPath:soundFilePath];
        playerY = [[AVAudioPlayer alloc] initWithContentsOfURL:soundFileURL error:nil];
        NSLog(@"acceleration.y = %+.6f greater", aceler.y);
        playerY.delegate = self;
        [playerY play];

    }

    if ((aceler.z > ACC_THRESHOLD)&&((playerZ== nil)||(playerZ.isPlaying == NO))) {
        NSString *fileName = [NSString stringWithFormat:@"hat"];
        NSString *soundFilePath = [[NSBundle mainBundle] pathForResource:fileName ofType:@"mp3"];
        NSURL *soundFileURL = [NSURL fileURLWithPath:soundFilePath];
        playerZ = [[AVAudioPlayer alloc] initWithContentsOfURL:soundFileURL error:nil];
        NSLog(@"acceleration.z = %+.6f greater", aceler.z);
        playerZ.delegate = self;
        [playerZ play];
    }

    //else  {
    //    [player stop];
    //};

} 
```

请注意，多个声音播放可能仅由一个事件触发，因为现在单独评估每个维度。引入了一个常数`#define ACC_THRESHOLD 0.5f`。一个维度的新声音播放仅在之前的播放完成后开始。

在对事件处理进行这些一般更改之后，您可以使用[信号过滤器](https://stackoverflow.com/questions/142944/how-do-you-implement-a-highpass-filter-for-the-iphone-accelerometer)开始优化。

此外，您可以使用 AVAudioPlayer 的委托方法进行更详细的声音处理：

```
#pragma mark -
#pragma mark AVAudioPlayerDelegate methods

- (void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag{

    NSLog(@"audioPlayerDidFinishPlaying: %i", flag);

}

- (void)audioPlayerDecodeErrorDidOccur:(AVAudioPlayer *)player error:(NSError *)error{

    NSLog(@"audioPlayerDecodeErrorDidOccur: %@", error.description);
} 
```

# java - GAE开发服务器管理控制台(java+intellij idea)

> ID：11737080
> 
> 赞同：0
> 
> 时间：2012-07-31T09:30:37.893
> 
> 标签：java, google-app-engine, struts

我正在使用想法 11 来运行 gae 开发服务器。问题是我可以访问我的应用程序，但是当我点击 url`/_ah/admin`访问管理控制台时，我收到错误消息“ `No action config found for the specified url`”。我正在使用 struts 1.3 和 urlrewriter。我在我的 urlrewriter.xml 中没有提到这个 url 的任何规则。如何访问管理控制台？谢谢这是完整的堆栈跟踪

```
org.apache.struts.chain.commands.InvalidPathException: No action config found for the specified url.
at org.apache.struts.chain.commands.AbstractSelectAction.execute(AbstractSelectAction.java:71)
at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)
at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)
at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:305)
at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)
at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)
at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)
at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:449)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
at org.mortbay.jetty.servlet.Dispatcher.forward(Dispatcher.java:327)
at org.mortbay.jetty.servlet.Dispatcher.forward(Dispatcher.java:126)
at org.tuckey.web.filters.urlrewrite.NormalRewrittenUrl.doRewrite(NormalRewrittenUrl.java:213)
at org.tuckey.web.filters.urlrewrite.RuleChain.handleRewrite(RuleChain.java:171)
at org.tuckey.web.filters.urlrewrite.RuleChain.doRules(RuleChain.java:145)
at org.tuckey.web.filters.urlrewrite.UrlRewriter.processRequest(UrlRewriter.java:92)
at org.tuckey.web.filters.urlrewrite.UrlRewriteFilter.doFilter(UrlRewriteFilter.java:381)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:65)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:35)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:60)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:370)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:58:18.347

似乎 Struts 试图映射`/_ah/admin`到它的动作。

`/_ah/*`是最终由 GAE 处理的系统 Url。您应该将您的代码配置为不尝试将此网址映射到您的代码。

尝试使用 Strut 的排除模式：

```
<struts>
    <constant name="struts.action.excludePattern" value="/_ah/*" />
    ...

</struts> 
```

# image-processing - 车牌检测

> ID：11737093
> 
> 赞同：-1
> 
> 时间：2012-07-31T09:31:31.667
> 
> 标签：image-processing, computer-vision, edge-detection

我的任务是确定图像中的车牌号在哪里。图像不仅包含车牌号。它可能包含整辆车或任何东西。我使用高斯模糊然后灰度然后对比然后高斯的拉普拉斯来检测边缘。

现在，我不知道如何检测图像中的车牌号在哪里。我不打算读取许可证号，只是让系统知道许可证号在哪里。

你能指导我做一个关于这个的研究吗？或者也许可以用来执行此操作的算法。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T19:48:50.943

如果您在不同场景中有足够的车牌训练图像，我认为解决这个问题的更有效的方法是训练检测器。您可以尝试的几件事是 Opencv 库中的 Haar 级联分类器。它对学习模式进行多尺度检测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:16:47.693

使用一些特征识别算法，例如[SIFT](http://en.wikipedia.org/wiki/Scale-invariant_feature_transform)将是一个很好的起点。您是否需要实时识别？我建议首先尝试收紧搜索空间，例如通过从图像中过滤掉区域（您的环境是否受控？）。[这里](http://www.sciencedirect.com/science/article/pii/S1877050910005399)有一篇关于使用 SIFT 识别车牌的文章（我只是略读了一下，但看起来很合理）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T19:09:39.157

您可以尝试边缘检测或某种形式的霍夫变换。

例如，进行边缘检测，然后在图像中查找矩形（或者如果图像不是直的，则为平行四边形）。如果您知道所有板块的形状和尺寸比例都相同，您可以使用它来加快搜索速度。

编辑：

[为你找到了这个。](https://stackoverflow.com/questions/1364976/rectangle-detection-with-hough-transform)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-07T12:11:22.243

车牌或车牌具有 2 个引人注目的特性。

1.  他们有指定的颜色模式（白色、黄色或灰色背景上的黑色字母）
2.  纵横比

这些属性可用于仅提取车牌。首先使用自适应阈值对图像进行阈值处理。然后在图像中找到与标准值接近的纵横比的轮廓。这种方法应该适用于大多数情况。您还可以尝试先腐蚀，然后再对阈值图像进行膨胀以消除噪声。

# delphi - 我该如何搜索 和 使用 Delphi XE2 IDE 搜索？

> ID：11737098
> 
> 赞同：3
> 
> 时间：2012-07-31T09:31:38.407
> 
> 标签：delphi, search, boolean, delphi-xe2

我一直使用搜索来定位我的（巨大的）应用程序源中的东西，所以搜索的有效性对我来说非常重要。目前在我喜欢使用的 Delphi XE2 IDE 中：

*   在文件中查找
*   包括子目录。

没什么特别的，只是一个文本关键字。这工作正常，但我真正想做的是扩展我现在正在做的事情，以包括包含“A”和“B”的行，其中 A 和 B 是任何字符组（一种布尔搜索）。与 A 和 B 的精确匹配很好，因为现在这允许您输入两个非常不完整的关键字，并且仍然可以找到唯一的出现。多年来，我一直在自己的搜索引擎中使用这种方法。请问在Delphi IDE中有没有一种简单的方法可以做到这一点？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T16:34:16.930

您可以使用正则表达式（只需选中窗口`regular expressions`右侧的复选框）。`Find`正则表达式支持有些有限 - 它在[XE2 docwiki here](http://docwiki.embarcadero.com/RADStudio/en/Regular_Expressions)上记录了 XE2 。

我`GExperts Grep Search`改用（[GExperts IDE 专家](http://www.gexperts.org/)集的一部分），它提供更全面的正则表达式支持（尽管仍然不是很好）和更好的搜索结果显示 (IMO)。（请注意，Grep 搜索对话框的图像包含一个正则表达式，它将`WordA or WordB`以文件中的任一顺序匹配，因此它在 GExperts 中有限的正则表达式支持内满足您的搜索逻辑。它也匹配行中的单个单词，但结果对话框可以很容易地找到您感兴趣的行，双击一行将带您到 IDE 的代码编辑器中匹配的行。）

![GExperts Grep 搜索对话框](../Images/b6732f059d10a76ab88763f48d11c7e7.png)

![GExperts Grep 结果对话框](../Images/84f0476a31a2d3700b49c54019323c9e.png)

以上结果基于单个文件搜索和这些结果。对于多个文件（在这种情况下，只有两个），对话框如下所示：

![GExperts 多文件 Grep 结果对话框](../Images/663a36f137ec490e95527e07340f54ad.png)

# c++ - 如何确定状态模式的状态

> ID：11737107
> 
> 赞同：0
> 
> 时间：2012-07-31T09:32:15.183
> 
> 标签：c++, sockets, design-patterns, network-programming, state-pattern

我正在开发一个 DLL，用于通过 LAN 控制 POS（销售点）终端。

DLL 提供了执行以下操作的命令：

*   登录
*   注销
*   授权
*   读卡数据
*   消除
*   退款
*   网络诊断

DLL 还提供 Connect() 和 Disconnect() 函数。

由于 POS 终端可以处于各种状态，我认为状态模式可能会在 DLL 中使用。

伪代码：

```
// My DLL
class Pos
{
public:
    Pos();
    ~Pos();

    bool Connect();
    bool Disconnect();

    bool DoLogon() { m_pCurrentPosState->DoLogon(this); }
    bool DoLogoff() { m_pCurrentPosState->DoLogoff(this); }
    bool DoAuthorisation() { m_pCurrentPosState->DoAuthorisation(this); }
    bool DoReadCardData() { m_pCurrentPosState->DoReadCardData(this); }
    bool DoCancellation() { m_pCurrentPosState->DoCancellation(this); }
    bool DoRefund() { m_pCurrentPosState->DoRefund(this); }
    bool DoNetworkDiagnosis() { m_pCurrentPosState->DoNetworkDiagnosis(this); }
    ...

private:
    void ChangeState(PosState *pPosState) { m_pCurrentPosState = pPosState; }

private:
    friend class PosState;
    PosState *m_pCurrentPosState;
    ...
};

class PosState
{
public:
    // Implement default behavior for all command requests.
    virtual bool DoLogon(Pos *pPos) {}
    virtual bool DoLogoff(Pos *pPos) {}
    virtual bool DoAuthorisation(Pos *pPos) {}
    virtual bool DoReadCardData(Pos *pPos) {}
    virtual bool DoCancellation(Pos *pPos) {}
    virtual bool DoRefund(Pos *pPos) {}
    virtual bool DoNetworkDiagnosis(Pos *pPos) {}

protected:
    void ChangeState(Pos *pPos, PosState *pPosState);
};

class PosLoggedon : public PosState
{
public:
    static PosState* Instance();

    // Implement state-specific behavior.
    bool DoLogoff(Pos *pPos);
    bool DoAuthorisation(Pos *pPos);
    bool DoReadCardData(Pos *pPos);
    bool DoCancellation(Pos *pPos);
    bool DoRefund(Pos *pPos);
    bool DoNetworkDiagnosis(Pos *pPos);
};

class PosLoggedoff : public PosState
{
public:
    static PosState* Instance();

    // Implement state-specific behavior.
    bool DoLogon(Pos *pPos);
    bool DoAuthorisation(Pos *pPos);
    bool DoReadCardData(Pos *pPos);
    bool DoCancellation(Pos *pPos);
    bool DoRefund(Pos *pPos);
    bool DoNetworkDiagnosis(Pos *pPos);
}; 
```

PosLoggedon和**PosLoggedoff都是我认为****有效**的两个状态，但我不确定如何确定其他状态。

创建像**PosAuthorisation**、**PosReadCardData**等状态以便它们对应于 POS 函数是否有意义？大概没有意义吧……

我对如何正确使用状态模式感到困惑，因为我正在混合“当前命令进行中”和“当前 POS 状态”。

也许我需要像**PosCommandInProgress**这样的状态？

任何意见，将不胜感激。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:58:11.930

状态通常是用动词描述的东西。例如，`parsing`听起来像一个状态。`UserLogged`听起来不像是一个状态，听起来更像是一个可以改变状态的事件。

如果您想要一个状态机，您需要确定哪些操作涉及不同的状态，哪些不涉及。例如，可以有一个 state `waiting for input`。每当用户需要做某事时，机器就会进入这种状态。可能不需要创建很多状态，比如`waiting for address input`,`waiting for name input`等等，因为它们实际上都是`waiting for input`状态。

现在，在每个州都有两件事。*首先是状态机在*state 中可以做的事情的列表。例如，在等待用户输入姓名的状态下`waiting for input`，可以显示可爱的小猫图片，但绝对不能对用户的银行账户进行操作。

第二件事是机器在当前状态期间可以*更改的状态列表。*例如，`waiting for input`它可以从状态变为`showing the greeting message`.

因此，不要*将*状态与命令混为一谈。命令可以在状态下执行，命令可以使机器改变它的状态，但它们并不相同。

如果你的 DLL 可以

> ```
> Logon
> Logoff
> Authorisation
> Read card data
> Cancellation
> Refund
> Network diagnosis 
> ```

那么你可能会有像`connecting`, `waiting for authorization information input`, `authorizing`, `waiting for account operation choice`, `executing account operation`,的状态`logging off`。

因此，`connecting`您可能需要运行网络诊断以检查是否可以连接，然后建立连接，获取服务器响应，显示一些 UI 以请求用户数据，并切换到`waiting for authorization information`状态，然后执行其他操作，等等。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T10:08:15.753

通常最好在代码中实现现实世界的范式反射。状态是非常合适的，如果你：

*   可以命名它们
*   知道限制
*   知道它可以转移到哪些状态

大多数硬件模块被实现为状态机。状态模式易于理解，因此您不太可能遇到维护问题

我想你会特别喜欢重新实现不适用的虚拟成员来抛出错误而不会`if (state == XX) ... else if (state == YY) ...`:)

例如一些非代码：

```
interface AbstractBeing
{
    void sleep();
    void eat();
    void lieDownAndDie();
};

class ImAlive implements AbstractBeing
{
    void sleep() {doZzzzzzz();}
    void eat() {nomNomNomNom();}
    void lieDownAndDie() {turnUndead();}
};

class ImUndead implements AbstractBeing
{
    void sleep() {throw error("zombies aint need no sleep");}
    void eat() {seekBrainzzzz();}
    void lieDownAndDie() {throw error("no you!!");}
}; 
```

希望这可以帮助

# c++ - 如何删除回收站中路径过长的文件夹或文件？

> ID：11737109
> 
> 赞同：6
> 
> 时间：2012-07-31T09:32:26.460
> 
> 标签：c++, winapi

我有删除和复制一些具有长路径的文件夹或文件的程序（当长度> MAX_PATH）在这个程序中，我使用的前缀`\\?\`使我可以删除具有长路径的文件夹或文件，但仅限于简单的功能`Delete()`。我需要删除回收站中的文件，为此我需要使用`SHFileOperation`可以删除回收站中文件的功能，但此功能不支持前缀`\\?\`. 有人可以帮我解决这个问题吗？

SHFileOperation 是否有一些替代方案。我怎样才能绕过这个问题？

一些链接：

*   [字首](http://msdn.microsoft.com/en-us/library/aa365247.aspx) `\\?\`
*   一些关于[长路的信息](http://blogs.msdn.com/b/bclteam/archive/2007/02/13/long-paths-in-net-part-1-of-3-kim-hamilton.aspx)
*   [SH文件操作](http://msdn.microsoft.com/en-us/library/bb762164%28VS.85%29.aspx)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T14:45:52.483

回收站是一个特殊的外壳文件夹。它是外壳的一部分。然而，shell 的限制是路径不得长于 MAX_PATH。所以同样的限制也适用于回收站。

您根本不能将具有长路径的文件/文件夹放入回收站。不可能。

编辑：Windows 10 取消了 MAX_PATH 限制。请参阅[此 msdn 条目](https://docs.microsoft.com/en-us/windows/win32/fileio/naming-a-file?redirectedfrom=MSDN#enable-long-paths-in-windows-10-version-1607-and-later)

# java - ImageIO jpg resizeImage 后图像变为粉红色

> ID：11737110
> 
> 赞同：2
> 
> 时间：2012-07-31T09:32:27.657
> 
> 标签：java, image, swing, image-processing, javax.imageio

```
public static void main(String argsp[]){

    File src = new File("C:\\Users\\chang\\Desktop\\shinichi_hoshi-2011-hp.jpg");
    try {
        FileInputStream fis = new FileInputStream(src);
        BufferedImage bi = ImageIO.read(fis);
        FileOutputStream fos = new FileOutputStream("C:\\Users\\chang\\Desktop\\www1.jpg");
        BufferedImage bsi = ImageUtil.resizeImage(bi,100,100,true,0);

        ImageIO.write(bsi, "jpg", fos);
    }
    // ...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:03:02.283

问题一定出在你的`resizeImage`方法上。我对您的代码没有任何问题：

```
import java.awt.Image;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;

import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class TestImageResize {

    protected void initUI() throws MalformedURLException, IOException {
        final JFrame frame = new JFrame(TestImageResize.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        BufferedImage bi = ImageIO.read(new URL("http://noupe.com/img/wallpaper-4.jpg"));
        File file = new File(System.getProperty("user.home"), "test.jpg");
        FileOutputStream fos = new FileOutputStream(file);
        Image image = bi.getScaledInstance(100, -1, Image.SCALE_SMOOTH);
        BufferedImage bsi = new BufferedImage(image.getWidth(null), image.getHeight(null), BufferedImage.TYPE_INT_RGB);
        bsi.getGraphics().drawImage(image, 0, 0, null);
        ImageIO.write(bsi, "jpg", fos);
        JPanel panel = new JPanel();
        JLabel label = new JLabel(new ImageIcon(file.getAbsolutePath()));
        panel.add(label);
        frame.add(panel);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                try {
                    new TestImageResize().initUI();
                } catch (MalformedURLException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        });
    }
} 
```

JFrame 中显示的结果缩放图像： ![结果缩放图像](../Images/e87ee6291efcc7f9ae2e3696cbc26654.png)

结果缩放图像（由您的浏览器显示）： ![从磁盘上传的结果图像](../Images/ad40dfbfc66a7e943fd771e398568f9e.png)

原图： ![原始图像](../Images/81db94cc997363c8e26d9f3b914110bc.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T10:37:44.950

public class ImageTest {

```
public static void main(String argsp[]) {

    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            try {
                new ImageTest().initUI();
            } catch (MalformedURLException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    });

}

protected void initUI() throws MalformedURLException, IOException {
    final JFrame frame = new JFrame(ImageTest.class.getSimpleName());
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    BufferedImage bi = ImageIO.read(new URL(
            "http://www.google.co.kr/logos/2012/field_hockey-2012-hp.jpg"));
    File file = new File(System.getProperty("user.home"), "test1.jpg");
    FileOutputStream fos = new FileOutputStream(file);
    Image image = bi.getScaledInstance(100, -1, Image.SCALE_SMOOTH);
    BufferedImage bsi = new BufferedImage(image.getWidth(null),
            image.getHeight(null), BufferedImage.TYPE_INT_ARGB);
    bsi.getGraphics().drawImage(image, 0, 0, null);
    ImageIO.write(bi, "jpg", fos);
    JPanel panel = new JPanel();
    JLabel label = new JLabel(new ImageIcon(file.getAbsolutePath()));
    panel.add(label);
    frame.add(panel);
    frame.pack();
    frame.setVisible(true);
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T19:14:32.547

这个答案看起来很像你正在寻找的东西（即使我自己没有测试过）：

[无法使用 ImageIO.read（文件文件）读取 JPEG 图像](https://stackoverflow.com/questions/2408613/problem-reading-jpeg-image-using-imageio-readfile-file)

# html - 对于类似 Time Machine 的效果，CSS3 动画、SVG 或 Canvas 中的哪一个效果最好？

> ID：11737113
> 
> 赞同：2
> 
> 时间：2012-07-31T09:32:32.290
> 
> 标签：html, canvas, svg, css-transitions

**[对于我们的网站，我们正在开发一个“组件”，它会以与 Mac OS X 上的Time Machine](http://www.chicagonow.com/booth-reviews/files/2011/12/time-machine.jpeg)**类似的方式显示图像。因此它将是许多图像相互重叠，位置略有不同，并且在滚动时具有流畅的动画前进和后退。

我们有一个带有 CSS3 动画的尖峰实现，但它在 Firefox 中不是很流畅，而且根本不支持 IE9（尽管如果其他选项更糟，我们可能会接受它）。

我们正在考虑在 SVG 或 Canvas 中实现，但没有太多经验，所以我想我们先问一下。所以：

**要求：**

1.  **它必须很快**。动画必须流畅，这是一个硬性要求。
2.  它应该在尽可能多的浏览器中得到支持。
    *   所需的浏览器是 Chrome 20+、Firefox 14+ 和 IE10+。
    *   我们也非常希望能够支持 IE9，但如果绝对必要的话，可以不用它。
    *   Opera 很不错，但不是必须的。

**选项**和我们目前对它们的经验/意见：

*   **CSS3** - 似乎是该任务的“合适”技术，但不幸的是实施效果不佳。也许我们的原型代码效率低下，但目前不同浏览器之间的支持似乎完全不同。
*   **SVG** - 至少它是矢量图形/DOM 元素，但我们对它没有任何经验。
*   **画布**——我们希望它能表现良好，因为它甚至可以用于游戏，但我们无法完全想象所有像素重绘将如何工作。也许我们应该使用一些像[processingjs](http://processingjs.org)这样的库？
*   **Flash**或其他插件——我碰巧很了解 Flash，而且我知道类似 Time Machine 的效果在那里会很容易，但我们现在宁愿远离插件。

谢谢你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:45:34.993

如果组件的大小不必很大，但可以限制在 800x600 像素左右，那么听起来 Canvas 应该可以胜任。

如果您只在画布上绘制（缩放）位图，那么根据我的经验，即使在 iPad2 上，性能也非常好。性能只会在更高分辨率（1920x1080 及以上）下真正开始受到影响，所以如果你将它用于全屏功能，你需要小心！此外，阴影等花哨的功能也会大大降低性能。

Canvas 在浏览器之间几乎没有什么怪癖，因此几乎可以肯定，它比使用 CSS3 或 SVG 更容易在各种浏览器中按预期工作。

我建议用 Canvas 制作一个快速而肮脏的原型，看看它是否能满足您对性能的第一个要求。

如果你决定使用 Canvas，我肯定会推荐使用库。由于您非常了解 Flash，您可能想看看[EaselJS](http://www.createjs.com/#!/EaselJS)。它有一个受 Flash 启发的显示列表，在大多数情况下使用它的性能成本可以忽略不计。您还可以获得交互性的基本事件。此外，如果您使用 EaselJS，稍后如果您决定将代码移植到 Flash 将非常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:12:50.103

你在寻找这样的东西[吗](https://jwatt.org/svg-open/2009/demos/smil-animation/affine-flow/affine-flow.svg)？它使用 SMIL 动画，因此您必须集成[fakesmile 之](http://fakesmil.blogspot.co.uk/)类的东西才能获得 IE 支持。

# google-chrome - Chrome 打包应用和 Chrome 扩展程序可以共享本地数据吗？

> ID：11737114
> 
> 赞同：1
> 
> 时间：2012-07-31T09:32:49.000
> 
> 标签：google-chrome, google-chrome-extension

据我所知，Chrome 应用程序和 Chrome 扩展程序只是查看可以访问某些 Chrome API 的一些基本 html/js/css 文件的两种不同方式。我想知道的是——你能在他们之间分享数据吗？例如，我可以`localStorage.setItem('name', 'john');`在 Chrome 应用程序中执行操作，并在扩展程序中`localStorage.getItem('name');`返回吗？`john`如果是这样，我如何链接应用程序和扩展程序以便这成为可能？

# javascript - 获取表格行数据 td 并选择

> ID：11737117
> 
> 赞同：1
> 
> 时间：2012-07-31T09:32:54.130
> 
> 标签：javascript, jquery

这就是我想要做的。

在第一行有 tds `a = the text in the first cell`然后 `b = the selected value of the drop down that the user selected`

由于我的代码不起作用，我该怎么做？

```
$(document).ready(function () {
   var s = $('table td:first').parents('tr');

   var a = s.eq(0).text();
   var b = s.eq(1).find('option:selected').val();

   alert(a + "   " + b);
});

<table>
   <tbody>
      <tr>
         <th>ID</th>
       </tr>
       <tr>
          <td>
            test
           </td>
           <td>
             <select>
               <option value="yes">yes</option>
               <option selected="selected" value="no">no</option>
             </select>
           </td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T09:38:35.737

**工作演示** [http://jsfiddle.net/snU97/](http://jsfiddle.net/snU97/)

休息随意玩，希望它有助于您的需求`:)`

**代码**

```
$(document).ready(function () {

    var s = $('table td:first').parents('tr');

    var a = s.find('td').eq(0).text();//s.eq(0).text();
    var b = s.find('td').eq(1).find('option:selected').val();

    alert(a + "   " + b);

});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T09:42:12.893

您还可以使用以下代码

$(文档).ready(函数 () {

```
var s = $('table td:first');

var a = s.html();
var b = s.parents('tr').children().find('option:selected').val();

alert(a + "   " + b); 
```

});

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T09:46:48.447

有一个选项：

```
 <table>
        <tbody>
            <tr>
                <th>ID</th>
            </tr>
            <tr>
                <td>
                    test
                </td>
                <td>
                    <select id="mydropdown">
                        <option value="yes">yes</option>
                        <option selected="selected" value="no">no</option>
                    </select>
                </td>
            </tr>
        </tbody>
    </table>​​​

$(document).ready(function () {

    var s = $('table td:first');

    var a = s.text();
    var b = $("#mydropdown option:selected").text();

    alert(a + "   " + b);

});​ 
```

# objective-c - ABNF 构造的 Parsekit 等效项

> ID：11737119
> 
> 赞同：1
> 
> 时间：2012-07-31T09:32:57.393
> 
> 标签：objective-c, parsekit

我想将给定的 ABNF 语法翻译成有效的 ParseKit 语法。实际上，我正在尝试为这种声明找到解决方案：

```
tag = 1*<any Symbol except "C"> 
```

和

```
Symbol = "A" / "B" / "C" / "D" // a lot more symbols here... 
```

这个问题的符号定义被简化了，通常包含很多特殊字符。我目前的解决方案是硬编码所有允许的符号`tag`，比如

```
tag = ('A' | 'B' | 'D')+; 
```

但我真正想要的是“没有运算符”之类的东西

```
tag = Symbol \ 'C'; 
```

是否有任何构造可以让我保留我的符号列表并定义一些排除项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T17:07:58.463

[ParseKit](http://parsekit.com)的开发者在这里。

是的，正好有一个功能。这是一个例子：

```
allItems = 'A' | 'B' | 'C' | 'D';
someItems = allItems - 'C'; 
```

使用`-`运算符。

# symfony - 在 Symfony2 中需要登录的页面的 URL

> ID：11737121
> 
> 赞同：2
> 
> 时间：2012-07-31T09:33:01.603
> 
> 标签：symfony

我有一个 Symfony2 站点，我想根据用户尝试访问的 URL 在登录页面上显示额外信息。我正在使用“use_forward”。有没有办法在登录表单的控制器中查看 URL？

我想我可以设置多个指向不同登录页面的防火墙，但可能会有很多，所以我宁愿避免这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T10:22:03.153

如果您想要“正确”的东西，请查看[此问题](https://stackoverflow.com/questions/7414243/symfony2-help-please-with-backward-uri-referrer-during-switching-locale)的答案。

或者

如果你想快速而肮脏地做到这一点，你可以使用：

```
$this->container->get('request')->server->get('PHP_SELF'); 
```

Whick 会产生类似的东西`/project_name/web/app_dev.php/controller_name/`，您可以使用该字符串，但要考虑到它会根据您正在处理的环境而改变。[Request 类文档](http://api.symfony.com/2.0/Symfony/Component/HttpFoundation/Request.html#method_get)将成为您的盟友，即：

```
$this->container->get('request')->getBasePath() 
```

会给你`/project_name/web/`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:27:54.310

您可以尝试在某些地方查找此 URL：

```
$url = $request->get('_referer'); 
```

如果它是空的，那么你可以尝试检查标题

```
$url = $request->headers->get('Referer'); 
```

# java - 如何使用struts2和mysql在下拉列表中的jsp页面上显示从数据库中获取的数据

> ID：11737124
> 
> 赞同：0
> 
> 时间：2012-07-31T09:33:15.010
> 
> 标签：java, mysql, jsp, struts2

如何使用struts在下拉列表中显示从JSP数据库中获取的数据？我已经使用城市的数组列表完成了下拉列表的代码，但发生了错误。

```
HTTP Status 500 - type Exception report message description 
The server encountered an internal error () that prevented it from fulfilling this request.   
exception org.apache.jasper.JasperException: tag 'select', field 'list', name 
  'location': The requested list key '%{city}' could not be resolved 
   as a collection/array/map/enumeration/iterator type. 
```

我已经为城市列表做了这个代码如下：

JAVA代码

```
 public class Event extends ActionSupport{

 private String description;
 public List<String> city;
 public List<String> getCity() {
 return city;
 }
 public void setCity(List<String> city) {
 this.city = city;
 }   
 public String execute() throws Exception{

 String url = "jdbc:mysql://localhost:20976";  
 String dbName = "chetan";  
 String driverName = "com.mysql.jdbc.Driver";  
 String user = "root";
 String pass = "root121";
 Connection con = null;  
 Statement stmt = null;  
 ResultSet rs = null;  
 try {  
    Class.forName(driverName).newInstance();  
    con = DriverManager.getConnection(url + dbName, user,pass);  
    stmt = con.createStatement();  
 } catch (Exception e) {  
    System.out.println(e.getMessage());  
 }  

 rs = stmt.executeQuery("select * from City");  
 while (rs.next()) {  
    city.add(rs.getString("Location"));  

 }  

 return SUCCESS;  

 } 
```

城市的 JSP 代码

```
 <s:select name="location" label="Location" headerValue="Select City" list="city" />
 <s:submit value="Submit" method="execute" key="submit" align="center" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:07:09.010

在列表中追加项目之前初始化 arrayList

```
city = new ArrayList<String>(); 
```

在您的操作中，您已将列表名称声明为`city`，因此在您的选择中，`list`属性也应该相同

```
<s:select label="City List" headerKey="-1" list="city" name="whatever" /> 
```

此外`name`，据我所知，该属性必须不带括号，并且应该与您在提交操作中声明的变量名称相匹配。

# javascript - 使用 sturts2 进行客户端数据清理和分析

> ID：11737132
> 
> 赞同：0
> 
> 时间：2012-07-31T09:33:45.457
> 
> 标签：javascript, struts2, client-side, weka

现在我正在尝试实现一个进行数据清理和分析的 web 应用程序，并且我已经有一个用 Java 编写的原型。对于分析部分，我倾向于使用 WEKA (http://www.cs.waikato.ac.nz/ml/weka/)。由于性能原因，我认为让客户完成大部分工作可能是个好主意。我开始学习 struts2 并且我没有使用 JavaScript 的经验。我的问题是：

1.  struts2 是完成这项任务的正确选择吗？

2.  我应该编写 Java Applet 还是也可以通过 Java Script 来完成？

我没有足够的经验，也没有在互联网上找到好的解决方案。您能否发布一些教程或网站来帮助我解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:26:48.280

如果你想在客户端做，那么你需要分发一个应用程序，或者使用一个小程序。JavaScript 不是 Java，你不能使用浏览器的 JavaScript 来运行 Weka。

如果你想在客户端做，你为什么要尝试实现一个网络应用程序？

Struts 2 很好，但这取决于你实际在做什么。*有许多基于 JVM 的 Web 框架：Spring MVC、Grails、Play 等。如果您想将分析转移到客户端上，您使用什么*框架可能并不重要，但从您提供的信息中无法判断.

# android - 如何在android中显示来自asyntask非UI活动的对话框？

> ID：11737133
> 
> 赞同：-1
> 
> 时间：2012-07-31T09:33:45.130
> 
> 标签：android

我已经从下面的链接中实现了代码来检查应用程序的空闲时间 [如何打算在 android 上的另一个页面/从空闲时间弹出消息？](https://stackoverflow.com/questions/11533613/how-to-intent-to-another-page-on-android-pop-up-a-message-from-idle-time)

而是使用线程我使用了异步任务......现在我的问题一旦达到空闲时间......我想向用户应用程序显示对话框是从登录活动结束重新登录......我如何从异步任务 onpostExcute 调用对话框

```
public class session extends AsyncTask<Void,Void,Void> {
private static final String TAG=session.class.getName();
private long lastUsed;
private long period;
private boolean stop;
Context context;

final Dialog dialog = new Dialog(context);
@Override
protected Void doInBackground(Void... params) {
    // TODO Auto-generated method stub
    //here i do the process.......
}
@Override
protected void onPostExecute(Void x){
        //stuff to be done after task executes(done on UI thread)

    // For Dialog Button**********************************
    dialog.setContentView(R.layout.dialog);

    dialog.setTitle("Result");

    final TextView dialogtxt = (TextView) dialog
            .findViewById(R.id.textView1);

    final Button closeButton = (Button) dialog
            .findViewById(R.id.button1);

    closeButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            dialog.dismiss();
        }
    });

    dialogtxt.setText("session time out");
    dialog.show();

    // ****************************************************

}
@Override
protected void onPreExecute(){
        //stuff to be done after task executes(done on UI thread)

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:45:57.370

您可以通过从除 doInBackground 方法之外的任一方法调用对话框来完成此操作。

您可以在 onPreExecute 中调用它并在那里显示对话框，在您的后台任务完成后，您可以从 onPostExecite 方法中取消它。如果您想要更多控制权，也可以使用 onProgressUpdate 来实现。只需通过调用 publishProgress 并覆盖 onProgressUpdate 方法并在那里做任何你想做的事情来调度你的后台任务的进度。

[这是直接从文档](http://developer.android.com/reference/android/os/AsyncTask.html)中取出的示例。

```
private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {
     protected Long doInBackground(URL... urls) {
         int count = urls.length;
         long totalSize = 0;
         for (int i = 0; i < count; i++) {
             totalSize += Downloader.downloadFile(urls[i]);
             publishProgress((int) ((i / (float) count) * 100));
             // Escape early if cancel() is called
             if (isCancelled()) break;
         }
         return totalSize;
     }

     protected void onProgressUpdate(Integer... progress) {
         setProgressPercent(progress[0]);
     }

     protected void onPostExecute(Long result) {
         showDialog("Downloaded " + result + " bytes");
     }
 } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-31T09:37:49.723

Asynctask 需要获取 Context。如果您的 Asynctask 嵌入到活动中，只需调用 java Activity.this 作为上下文。您还可以将上下文作为字段放在 Asynctask 中，然后将其作为 arg 提供给 Asynctask。

您可以在 onPostExecute 中调用 Dialog.show，它位于 UI 线程上。

此示例 AsyncTask 嵌入到活动中

公共类 AsyncDialogBu​​ilder 扩展 AsyncTask {

```
 private Context context = DriverOnTripActivity.this;
    private final AlertDialog.Builder dialog = new AlertDialog.Builder(context);
    private Integer remoteAllWaitinOnCount;

    public Context getContext() {
        return context;
    }

    public void setContext(Context context) {
        this.context = context;
    }

    @Override
    protected void onPreExecute() {
    }

    @Override
    protected Integer doInBackground(Integer... integers) {
        remoteAllWaitinOnCount = User.getRemoteAllWaitinOnCount(latestClosestKojo.getRemoteId());
        if (remoteAllWaitinOnCount > 0) {
            try {
                makeDialog();
            } catch (Exception e) {
                e.printStackTrace();
            }
            return 100;
        } else {
            return 99;
        }
    }

    private void makeDialog() {
        dialog.setTitle(latestClosestKojo.getName()
                + " - "
                + remoteAllWaitinOnCount
                + " Kojoalas");
        dialog.setPositiveButton("S'arreter", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialogInterface, int i) {
                isDialogPrompted = false;
                dialogInterface.dismiss();
                goToOnBoardingActivity();
            }
        });
        dialog.setNegativeButton("Ignorer", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialogInterface, int i) {
                isDialogPrompted = false;
                dialogInterface.dismiss();
            }
        });
    }

    @Override
    protected void onPostExecute(Integer integers) {
        if (integers >= 100 && dialog != null) {
            dialog.show();
            isDialogPrompted = true;
        }
    }
} 
```

# javascript - 使用 JQuery 中的外部链接全屏播放 youtube 视频

> ID：11737135
> 
> 赞同：0
> 
> 时间：2012-07-31T09:33:50.420
> 
> 标签：javascript, jquery, iframe, youtube-javascript-api

您好，是否可以使用外部链接控制嵌入任何网站的 youtube 视频中的全屏选项？我正在使用 iframe 加载 youtube 网址：

```
<iframe width="640" height="360"
 src="http://www.youtube.com/embed/hrbKp5N74zE?rel=0"
 frameborder="0" allowfullscreen></iframe> 
```

现在我有一个 ID 为“showFullScreen”的链接。

这是Jquery：-

```
$(function(){
  $('a#showFullScreen').live('click',function(){
      /*
       * Full Screen code here
      */

  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:55:10.963

使用这个[jQuery 插件](http://johndyer.name/native-fullscreen-javascript-api-plus-jquery-plugin/)来切换全屏。`fullscreeneventchange`将您的视频调整为 100% 的宽度和高度并将其放置在顶部（关闭时恢复）。

# css - 伪类保持 div 在焦点/活动时可见？

> ID：11737138
> 
> 赞同：3
> 
> 时间：2012-07-31T09:33:57.663
> 
> 标签：css, pseudo-class

我有一个隐藏的 div，直到用户单击链接。使用`a:active + div`选择器显示 div。然后我必须`div:active, div:focus`保持 div 可见。

虽然让 div 看起来很简单，但保持它可见是我遇到的问题。如果我单击 div（将活动从链接中取出并将焦点/活动放在 div 上），那么 div 将再次消失。

我尝试使用`div:hover`，当我将鼠标悬停在 div 上时，它会显示 div（即使在我点击它之后）仍然消失。为什么不被应用`:active`到`:focus`我的div？

示例：http: [//jsfiddle.net/pJWPE/](http://jsfiddle.net/pJWPE/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T09:41:17.033

您可以采用不同的方法，改用`:target`伪类。说明这一点的最好方法是用一个例子：

```
#box {
  display: none;
}
#box:target {
  display: block;
}
```

```
<a href="#box">Open</a>  <a href="#">Close</a>

<div id="box">content</div>
```

警告，我不确定这个例子的浏览器支持是什么样的。它适用于我的 Chrome 版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T09:44:58.743

> 为什么 :active 和 :focus 没有应用于我的 div？

因为`:active`并且`:focus`有一些限制：

> *6.6.1.2。用户操作伪类：hover、:active 和 :focus*
> 
> 交互式用户代理有时会更改渲染以响应用户操作。选择器提供了三个伪类来选择用户正在操作的元素。
> 
> *   `:active`伪类在用户激活元素时应用。例如，在用户按下鼠标按钮并释放它的时间之间。在具有多个鼠标按钮的系统上， :active 仅适用于主要或主要激活按钮（通常是“左”鼠标按钮）及其任何别名。
> *   `:focus`伪类在元素具有焦点时应用（接受键盘或鼠标事件，或其他形式的输入）。
> 
> 对于可以成为`:active`或获取的元素，可能存在文档语言或实现特定的限制`:focus`。

[http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#dynamic-pseudos](http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#dynamic-pseudos)

A`<div>`不是任何形式的输入（`<textare>`, `<input>`, ...）或其他[交互元素](http://www.w3.org/TR/2012/WD-html5-20120329/content-models.html#interactive-content-0)（如`<a>`, `<audio>`, `<video>`）。它只是一个容器。既不`:focus`也不会`:active`被应用。

`:target`按照[Casey 的建议](https://stackoverflow.com/a/11737243/1139697)改用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-03T08:47:31.080

上下文是一个包含子菜单的菜单，我希望在单击相关菜单时显示它，并在单击链接时保持显示。（和你很相似）。

HTML 标记：

```
<nav>
    <ul>
        <li>
            <a href="#" > 
            </a>
            <div>
                <ul>
                   <li> 
                      <a href="/sites/p1.php">submenu link1</a></li>
                   <li> 
                      <a href="/sites/p2.php">submenu link2</a></li>
                   <li> 
                      <a href="/sites/p3.php">submenu link3</a></li>
                </ul>
            </div>
        </li>
    </ul> 
</nav> 
```

对于 Firefox 和 Chrome 网络浏览器，我个人使用：

```
nav > ul > li > a:focus + div, nav > ul > li > a + div:active {
   display : block;
} 
```

第一个选择器引用我的链接锚点，以便在单击/选择选项卡时获取显示哪个子菜单。第二个是在您单击链接时保持子菜单 div 打开（它一直显示活动 div）。

这对我很有效，但**不幸的是对 IE 无效**。

# python - 渲染到纹理 - 细节级别

> ID：11737142
> 
> 赞同：1
> 
> 时间：2012-07-31T09:34:12.960
> 
> 标签：python, opengl, textures

我的渲染到纹理过程有问题。当我使用宽度 = 高度 = 512 渲染场景时，它几乎没有错误，但纹理和场景越小，错误就越多。错误是纹理区域是黑色的，这没有任何意义。

这是一些截图

512*512：[http](http://www.ld-host.de/uploads/images/d9452fa0ba28494830fd96f0f15b9eba.png) ://www.ld-host.de/uploads/images/d9452fa0ba28494830fd96f0f15b9eba.png 128*128：[http ://www.ld-host.de/uploads/images/a39c141282a622f086d4a96b070a56a3.png](http://www.ld-host.de/uploads/images/a39c141282a622f086d4a96b070a56a3.png)

这是我如何渲染到纹理并稍后使用纹理的代码

```
 glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT)
    glMatrixMode(GL_MODELVIEW)
    glLoadIdentity()
    gluLookAt(0,0,200,0,0,-1,0,1,0)

    self.fbos = glGenFramebuffersEXT(1)
    glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, self.fbos)
    self.depthbuffers = (glGenRenderbuffersEXT(1)
    glBindRenderbufferEXT(GL_RENDERBUFFER_EXT, self.depthbuffers)
    glRenderbufferStorageEXT(GL_RENDERBUFFER_EXT, GL_DEPTH_COMPONENT, width, height)
    glFramebufferRenderbufferEXT(GL_FRAMEBUFFER_EXT, GL_DEPTH_ATTACHMENT_EXT, GL_RENDERBUFFER_EXT, self.depthbuffers)       

    self.textures = glGenTextures(1)
    glBindTexture(GL_TEXTURE_2D, self.textures)
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER, GL_LINEAR)
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER, GL_LINEAR)
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8,  width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, None);
    glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT0_EXT,  GL_TEXTURE_2D, self.textures, 0);
    glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, self.fbos);

    glEnable(GL_CLIP_PLANE0)
    glEnable(GL_CLIP_PLANE1)
    glClipPlane(GL_CLIP_PLANE0, (0,0,1,-1 * self.start + self.diff))       
    glClipPlane(GL_CLIP_PLANE1, (0,0,-1,self.start))   

    # render the mesh
    glTranslatef(-64,-64,-64)
    glEnableClientState(GL_VERTEX_ARRAY) # Enable something in OpenGL 
    glEnableClientState(GL_COLOR_ARRAY) # Enable something in OpenGL
    glBindBuffer(GL_ARRAY_BUFFER,self.vbo[1]) 
    glColorPointer(3,GL_FLOAT,0,None) # Tell OpenGL that it contains only ColorValues
    #Now the vertex Buffer with positions
    glBindBuffer(GL_ARRAY_BUFFER,self.vbo[0]) 
    glVertexPointer(3,GL_FLOAT,0,None) # Tell OpenGL that it contains the Positions for each Points
    glDrawArrays(GL_TRIANGLES,0,len(self.verts)+len(self.color))    # Merge both

    glDisableClientState(GL_COLOR_ARRAY); 
    glDisableClientState(GL_VERTEX_ARRAY);
    glDisable(GL_CLIP_PLANE0)
    glDisable(GL_CLIP_PLANE1)
    glBindTexture(GL_TEXTURE_2D,0)
    glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, 0); 

    #Plane for showing texture
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT)
    glMatrixMode(GL_MODELVIEW)
    glLoadIdentity()
    gluLookAt(0,0,1,0,0,0,0,1,0)
    glClearColor(1,1,1,0)

    glEnable(GL_TEXTURE_2D)

    glBindTexture(GL_TEXTURE_2D, self.textures)
    glBegin(GL_QUADS)
    glNormal3f(0.0, 1.0, 0.0)
    glTexCoord2f(0.0, 0.0)
    glVertex3f(-1, 1, -1)
    glTexCoord2f(1.0, 0.0)
    glVertex3f(1, 1, -1)
    glTexCoord2f(1.0, 1.0)
    glVertex3f(1, -1, -1)
    glTexCoord2f(0.0, 1.0)
    glVertex3f(-1, -1, -1)
    glEnd();
    glDisable(GL_TEXTURE_2D)

    pygame.display.flip() 
```

如何为较小的纹理获得更好的质量？网格没有孔，但纹理有时有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T22:29:04.167

我不知道你到底希望看到什么。您正在绘制明显小于像素/样本大小的三角形/立方体/等。因此，并非所有这些都是可见的。

这是一个标准的混叠问题：不覆盖像素/样本中心的三角形将不可见。这就是光栅化的本质。修复混叠的唯一方法是增加您使用的样本数量。您可以以更高分辨率和缩小比例进行渲染，或者您可以使用 MSAA 或其他真正的混叠技术。

# ruby-on-rails - RVM 安装 ruby 1.8.7 和 rails 2.3.4 在本机可用的 gem 中找不到 gem 'rails (= 1.8.7) ruby '。(捆绑器::GemNotFound)

> ID：11737144
> 
> 赞同：-1
> 
> 时间：2012-07-31T09:34:19.833
> 
> 标签：ruby-on-rails, gem, rvm

我需要安装 ruby​​ 1.8.7 和 rails 2.3.4 因为我需要修改旧应用程序。（RVM 中最新的 ruby​​ 和 gems 对我来说很好，但我需要使用这个旧的 gems 和 ruby​​）//runing ubuntu 12.04

问题是当我尝试运行 rake gems:install （我也不能做 rails new app）

我无法解决这个问题，而且我没有太多时间。提前感谢您的帮助。

$ rvm 使用 1.8.7 使用 /home/user/.rvm/gems/ruby-1.8.7-p370

$ rvm gemset use gemset234 使用 ruby​​-1.8.7-p370 和 gemset gemset234

$宝石清单

***当地宝石***

actionmailer (2.3.4) actionpack (2.3.4) activerecord (2.3.4) activeresource (2.3.4) activesupport (2.3.4) bundler (1.1.5, 0.9.1) rack (1.0.1) rails (2.3\. 4) rake (0.9.2.2, 0.8.7) ruby​​gems-bundler (1.0.3) ruby​​gems-update (1.8.24) rvm (1.11.3.5)

$ 耙宝石：安装

```
/home/user/.rvm/gems/ruby-1.8.7-p370@gemset234/gems/bundler-1.1.5/lib/bundler/resolver.rb:287:in `resolve': Could not find gem 'rails (= 1.8.7) ruby' in the gems available on this machine. (Bundler::GemNotFound)
    from /home/user/.rvm/gems/ruby-1.8.7-p370@gemset234/gems/bundler-1.1.5/lib/bundler/resolver.rb:161:in `start'
    from /home/user/.rvm/gems/ruby-1.8.7-p370@gemset234/gems/bundler-1.1.5/lib/bundler/resolver.rb:128:in `resolve'
    from /home/user/.rvm/gems/ruby-1.8.7-p370@gemset234/gems/bundler-1.1.5/lib/bundler/resolver.rb:127:in `catch'
    from /home/user/.rvm/gems/ruby-1.8.7-p370@gemset234/gems/bundler-1.1.5/lib/bundler/resolver.rb:127:in `resolve'
    from /home/user/.rvm/gems/ruby-1.8.7-p370@gemset234/gems/bundler-1.1.5/lib/bundler/definition.rb:192:in `resolve'
    from /home/user/.rvm/gems/ruby-1.8.7-p370@gemset234/gems/bundler-1.1.5/lib/bundler/definition.rb:127:in `specs'
    from /home/user/.rvm/gems/ruby-1.8.7-p370@gemset234/gems/bundler-1.1.5/lib/bundler/environment.rb:27:in `specs'
    from /home/user/.rvm/gems/ruby-1.8.7-p370@global/gems/rubygems-bundler-1.0.3/lib/rubygems-bundler/noexec.rb:41:in `candidate?'
    from /home/user/.rvm/gems/ruby-1.8.7-p370@global/gems/rubygems-bundler-1.0.3/lib/rubygems-bundler/noexec.rb:60:in `setup'
    from /home/user/.rvm/gems/ruby-1.8.7-p370@global/gems/rubygems-bundler-1.0.3/lib/rubygems-bundler/noexec.rb:75
    from /home/user/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:60:in `gem_original_require'
    from /home/user/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:60:in `require'
    from /home/user/.rvm/gems/ruby-1.8.7-p370@gemset234/bin/ruby_noexec_wrapper:9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:50:30.993

这是 rails 2 中 gem 安装系统的一个缺点。如果运行 rake 需要依赖项，例如本例中的 rails，您将需要手动安装它。为这些依赖项中的每一个执行 gem install 直到 rake 最终运行。

# google-maps - GoogleMaps，调用方法抛出`TypeError`

> ID：11737147
> 
> 赞同：2
> 
> 时间：2012-07-31T09:34:38.513
> 
> 标签：google-maps, gwt, google-maps-api-3

我有以下非常简单的代码序列，

```
public void onModuleLoad() {
    final MapOptions myOptions = MapOptions.create();
    myOptions.setZoom(14.0);
    myOptions.setMapTypeId(MapTypeId.ROADMAP);
    myOptions.setCenter(LatLng.create(43.8495636,25.9552082));

    GoogleMap map=GoogleMap.create(Document.get().getElementById("map_canvas"), myOptions);
    LatLngBounds bounds=map.getBounds();
    double b=bounds.getCenter().lat()+bounds.getCenter().lng();
} 
```

`double b=....`当我评论地图显示的最后一行代码时。但是当我取消注释时，我得到以下堆栈跟踪：

```
com.google.gwt.core.client.JavaScriptException: (TypeError) @com.google.maps.gwt.client.LatLngBounds::getCenter()([]): Object [object DOMWindow] has no method 'getCenter'
at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:249)
at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:570)
at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:278)
at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
at com.google.maps.gwt.client.LatLngBounds$.getCenter$(LatLngBounds.java)
at com.dianel.gps.client.DianelGPS.onModuleLoad(DianelGPS.java:53)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at com.google.gwt.dev.shell.ModuleSpace.onLoad(ModuleSpace.java:405)
at com.google.gwt.dev.shell.OophmSessionHandler.loadModule(OophmSessionHandler.java:200)
at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:526)
at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:364)
at java.lang.Thread.run(Thread.java:679) 
```

# php - 在while循环中添加朋友

> ID：11737157
> 
> 赞同：0
> 
> 时间：2012-07-31T09:35:17.717
> 
> 标签：php

我的问题始于我网站的成员页面，我使用`while`循环显示所有成员。

```
$X_query = mysql_query("SELECT * FROM users");
while($row = mysql_fetch_array($X_query)) {
  $X_id = $row['X'];
  $X_firstname = $row['X'];
  $X_lastname = $row['X'];
  $X_regdate = $row['X'];
  $X_ocupation = $row['X'];
  $X_gender = $row['X'];
  $X_main_proff = $row['X']; 

  if ($X_id == $id) { //the second is the SESSION ID
    $add_frined_button .= "";
  }
  else {
    $add_frined_button .= '<tr>
      <td><a href="#" onclick="return false" onmousedown="javascript:alertWindowFriend();"><div class="submit_buttons_blue" id="add_friend">addfriend</div></a></td>
      </tr>';
  } 
```

这实际上效果很好，按钮处理通过 jQuery 和 AJAX 添加的朋友，但是如果我与另一个用户登录，一切都会出错：

“添加朋友”按钮在循环中为他显示，尽管我进行了检查，但他的会话 ID 等于 2。
当我发送朋友请求时，它显示为 ID 为 2 的用户请求他自己的友谊。

我真的不知道这里有什么问题，如果有人有线索或需要查看更多类似朋友请求过程的代码，我会在这里发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:43:53.600

改变

`if ($X == $id) { //the second is the SESSION ID`

至

`if ($X_id == $id) { //the second is the SESSION ID`

魔术会发生:)

# android - 停止定位服务

> ID：11737161
> 
> 赞同：0
> 
> 时间：2012-07-31T09:35:24.367
> 
> 标签：android, android-service, android-location

每当我尝试在 android 上停止我的位置服务时，我都会收到 NullPointerException。有人对如何做到这一点有一些提示吗？我想在一些活动上实现 onstop() 和 ondestroy() 方法。这是我的服务代码：

定位服务.Java

包 com.storetab;

```
public class LocationService extends Service {
static LocationManager locationManager;
static Location lastknown;
final static String MY_ACTION = "MY_ACTION";
static LocationListener ll;
@Override
public IBinder onBind(Intent arg0) {
// TODO Auto-generated method stub
return null;
}

@Override
public int onStartCommand(Intent intent, int flags, int startId){

 final Criteria criteria = new Criteria();
LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
criteria.setAccuracy(Criteria.ACCURACY_FINE);
criteria.setPowerRequirement(Criteria.POWER_LOW);
criteria.setAltitudeRequired(false);
criteria.setBearingRequired(false);
criteria.setSpeedRequired(false);
criteria.setCostAllowed(true);
locationManager.getBestProvider(criteria, true);
ll = new MyLocListener();

locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, ll);

lastknown = locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
Log.d("Teste","lastknown");
Intent intent1 = new Intent();
intent.putExtra("location1", lastknown);
intent.setAction(MY_ACTION);
sendBroadcast(intent1);   
Log.d("broadcastlast","lastknown");
return START_STICKY;

}

private class MyLocListener implements LocationListener {
public void onLocationChanged(Location location) {

    }

public void onProviderDisabled(String arg0) {
// TODO Auto-generated method stub
Log.d("1Provider DIsabled", "Provider Disabled");
}

public void onProviderEnabled(String provider) {
// TODO Auto-generated method stub
Log.d("1Provider Enabled", "Provider Enabled");
}

public void onStatusChanged(String provider, int status, Bundle extras) {
// TODO Auto-generated method stub
Log.d("1Provider Changed", "Service Status Changed");
}

 }
@Override public void onDestroy() {
locationManager.removeUpdates(ll);
};
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:16:22.437

在你的`onStartCommand()`你有这个代码：

```
LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE); 
```

这将创建一个名为的**局部变量**`locationManager`，它**隐藏**了您在类顶部声明的类变量：

```
static LocationManager locationManager; 
```

**静态类变量** 永远`locationManager`不会被设置为任何东西，所以它`null`在`onDestroy()`.

要解决这个问题，只需将其更改为`onStartCommand()`：

```
locationManager = (LocationManager) getSystemService(LOCATION_SERVICE); 
```

# android - 使用 TableRows 的动态界面

> ID：11737163
> 
> 赞同：0
> 
> 时间：2012-07-31T09:35:28.100
> 
> 标签：android, user-interface, dynamic, android-tablelayout

我正在开发一个根据用户设置的字符串创建动态界面的应用程序。

我的 XML 文件中唯一的东西是 a `ScrollView`，其余的是 java 代码：

```
ScrollView sv = (ScrollView)findViewById(R.id.sv);
LinearLayout ll = new LinearLayout(this);
ll.setOrientation(LinearLayout.VERTICAL);
TableLayout tl = new TableLayout(this);
TableRow[] tr = null; 
```

然后我破译一个字符串，它会告诉我需要添加多少个按钮。每个旁边`Button`应该是一个`TextView`. 在 for 循环中，我创建`Buttons`和`TextViews`并将它们`TableRow`添加到 中`TableLayout`，然后将其添加到 中，然后将`LinearLayout`其添加到添加到`ScrollView`.

我的问题是：我希望`Buttons`200dp 宽，然后是`TextView`，但目前它的宽度来自`WRAP_CONTENT`. 当我将它`Button`添加`RelativeLayout`到.`setLayoutParams``TableRow`

```
final float scale = getBaseContext().getResources().getDisplayMetrics().density;
                int pixels = (int) (200 * scale + 0.5f);

                RelativeLayout.LayoutParams rel_btn = new RelativeLayout.LayoutParams(
                        LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
                rel_btn.height = pixels;
                rel_btn.width = pixels;
btn.setLayoutParams(rel_btn);

tr[i].addView(btn);
tr[i].addView(tv);
tl.addView(tr[i]); 
```

有谁知道如何解决我的问题`TableLayout`？

我读过嵌套`LinearLayouts`可能是一种不同的方法，但我似乎找不到任何 java 示例，只有 XML - 我需要它是动态的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:59:39.750

`RelativeLayout.LayoutParams`当您`Button`和`TextView`是 a 的孩子时使用的原因是`TableRow`什么？它应该是这样的：

```
TableRow.LayoutParams rel_btn = new TableRow.LayoutParams(pixels, pixels);
btn.setLayoutParams(rel_btn); 
```

另外，你真的需要`LinearLayout`包装`TableLayout`吗？如果您没有将其`LinearLayout`用于其他用途，则应将其删除以改善视图层次结构。

# c# - C# 中的自定义复选框

> ID：11737166
> 
> 赞同：1
> 
> 时间：2012-07-31T09:35:34.787
> 
> 标签：c#, winforms, custom-controls, custom-component

我想在 C# 中有一个自定义 CheckBox，上面有一个渐变背景。我覆盖了 OnPaint(PaintEventArgs e) 如下：

```
Graphics g = e.Graphics;

        base.OnPaint(e);
        //// Fill the background
        //SetControlSizes();

        // Paint the outer rounded rectangle
        g.SmoothingMode = SmoothingMode.AntiAlias;
        using (GraphicsPath outerPath = GeneralUtilities.RoundedRectangle(mLabelRect, 1, 0))
        {
            using (LinearGradientBrush outerBrush = new LinearGradientBrush(mLabelRect,
                   mGradientTop, mGradientBottom, LinearGradientMode.Vertical))
            {
                g.FillPath(outerBrush, outerPath);
            }
            using (Pen outlinePen = new Pen(mGradientTop, mRectOutlineWidth))
            {
                outlinePen.Alignment = PenAlignment.Inset;
                g.DrawPath(outlinePen, outerPath);
            }
        }

        //// Paint the gel highlight
        using (GraphicsPath innerPath = GeneralUtilities.RoundedRectangle(mHighlightRect, mRectCornerRadius, mHighlightRectOffset))
        {
            using (LinearGradientBrush innerBrush = new LinearGradientBrush(mHighlightRect,
                   Color.FromArgb(mHighlightAlphaTop, Color.White),
                   Color.FromArgb(mHighlightAlphaBottom, Color.White), LinearGradientMode.Vertical))
            {
                g.FillPath(innerBrush, innerPath);
            }
        }
        // Paint the text
        TextRenderer.DrawText(g, Text, Font, mLabelRect, Color.White, Color.Transparent,
        TextFormatFlags.HorizontalCenter | TextFormatFlags.VerticalCenter | TextFormatFlags.EndEllipsis); 
```

它可以工作并为背景制作渐变，但复选框在渐变下消失并且无法访问。现在，我该怎么办？？？请尽快帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:37:12.400

**编辑：**

好的，我知道出了什么问题。该复选框会自动绘制一个覆盖之前绘制的任何内容的底层背景。

在这种情况下，您必须自己绘制复选框的外观（即选中状态等）。

* * *

~~您应该重写`OnPaintBackground`用于绘制背景的函数，而不是`OnPaint`.~~

另一种选择是在绘制背景`base.OnPaint(e)` **后**调用。

该复选框不会在渐变下“消失”，您仍然可以访问它。**您刚刚在“前景”上方**绘制了“背景”。

`base.OnPaint(e)`基本控件在函数中绘制复选框的外观。如果你在调用它之后绘制任何东西，这些东西将在绘制的复选框前面绘制为“覆盖”，这就是你看不到复选框外观的原因。

* * *

如果您还打算自己绘制文本，则不希望出现内部绘制的复选框文本。在这种情况下，您还需要自己绘制复选框的外观。

~~正如我已经提到的，如果您只想绘制自定义背景，请`OnPaintBackground`改用。~~

# css - 如何在 CSS 中导入字体？

> ID：11737168
> 
> 赞同：57
> 
> 时间：2012-07-31T09:35:58.483
> 
> 标签：css, fonts

我想使用一些字体，并且我希望它能够在客户端计算机上没有这种字体的情况下工作。我已经这样做了，但它不起作用：

```
@font-face {
    font-family: EntezareZohoor2;
    src: url(Entezar2.ttf) format("truetype");
}

.EntezarFont {
    font-family: EntezareZohoor2, B Nazanin, Tahoma !important;
} 
```

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-07-31T09:44:18.107

**以下几行用于在 css 中定义字体**

```
@font-face {
    font-family: 'EntezareZohoor2';
    src: url('fonts/EntezareZohoor2.eot'), url('fonts/EntezareZohoor2.ttf') format('truetype'), url('fonts/EntezareZohoor2.svg') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

**以下几行定义/使用css中的字体**

```
#newfont{
    font-family:'EntezareZohoor2';
} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-07-31T09:40:18.897

关于此主题的最佳信息来源之一是 Paul Irish 的[Bulletproof @font-face 语法](http://paulirish.com/2009/bulletproof-font-face-implementation-syntax/)文章。

阅读它，你会以这样的方式结束：

```
/* definition */
@font-face {
  font-family: EntezareZohoor2;
  src: url('fonts/EntezareZohoor2.eot');
  src: url('fonts/EntezareZohoor2.eot?') format('☺'),
       url('fonts/EntezareZohoor2.woff') format('woff'),
       url('fonts/EntezareZohoor2.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

/* use */
body {
    font-family: EntezareZohoor2, Tahoma, serif;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-31T09:41:39.950

通过[http://www.w3.org/TR/css3-fonts/](http://www.w3.org/TR/css3-fonts/)

**试试这个：**

```
 @font-face {
        font-family: 'EntezareZohoor2';
        src: url('EntezareZohoor2.eot');
        src: local('EntezareZohoor2'), local('EntezareZohoor2'), url('EntezareZohoor2.ttf') format('svg');
       font-weight: normal;
       font-style: normal;
    } 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-08-25T17:35:38.477

当我去谷歌字体时，他们给我的都是真正的字体文件`.ttf`，根本没有解释如何使用@font-face 将它们包含到我的文档中。我也尝试了 font squirrel 的网络字体生成器，它只是一直在运行加载 gif 并且不工作......然后我找到了这个网站 -

[https://transfonter.org/](https://transfonter.org/)

我使用以下方法取得了巨大的成功：

我选择了“**添加字体**”按钮，保留默认选项，添加了`.ttf`Google 给我的所有字体`Open Sans`（大概是 10 个，我选择了很多选项......）。

然后我选择了**转换**按钮。

**这是最好的部分！**

他们给了我一个 zip 文件，其中包含我选择的所有字体格式文件`.ttf`、`.woff`和`.eot`. 在那个 zip 文件中，他们有一个`demo.html`文件，我只需双击它，它就会在我的浏览器中打开一个网页，向我展示所有不同 css 字体选项的示例用法、如何实现它们以及它们的外观等。

**`@font-face`**

在这一点上，我仍然不知道如何正确使用将字体包含到我的样式表中，`@font-face`但后来我注意到`demo.html`它在 zip 中也有它自己的样式表。我打开了样式表，它显示了如何使用所有字体，`@font-face`因此我能够快速轻松地将其复制粘贴**到**我的项目中 -

```
@font-face {
    font-family: 'Open Sans';
    src: url('fonts/Open_Sans/OpenSans-BoldItalic.eot');
    src: url('fonts/Open_Sans/OpenSans-BoldItalic.eot?#iefix') format('embedded-opentype'),
        url('fonts/Open_Sans/OpenSans-BoldItalic.woff') format('woff'),
        url('fonts/Open_Sans/OpenSans-BoldItalic.ttf') format('truetype');
    font-weight: bold;
    font-style: italic;
}

@font-face {
    font-family: 'Open Sans';
    src: url('fonts/Open_Sans/OpenSans-LightItalic.eot');
    src: url('fonts/Open_Sans/OpenSans-LightItalic.eot?#iefix') format('embedded-opentype'),
        url('fonts/Open_Sans/OpenSans-LightItalic.woff') format('woff'),
        url('fonts/Open_Sans/OpenSans-LightItalic.ttf') format('truetype');
    font-weight: 300;
    font-style: italic;
}

@font-face {
    font-family: 'Open Sans';
    src: url('fonts/Open_Sans/OpenSans-SemiBold.eot');
    src: url('fonts/Open_Sans/OpenSans-SemiBold.eot?#iefix') format('embedded-opentype'),
        url('fonts/Open_Sans/OpenSans-SemiBold.woff') format('woff'),
        url('fonts/Open_Sans/OpenSans-SemiBold.ttf') format('truetype');
    font-weight: 600;
    font-style: normal;
}

@font-face {
    font-family: 'Open Sans';
    src: url('fonts/Open_Sans/OpenSans-Regular.eot');
    src: url('fonts/Open_Sans/OpenSans-Regular.eot?#iefix') format('embedded-opentype'),
        url('fonts/Open_Sans/OpenSans-Regular.woff') format('woff'),
        url('fonts/Open_Sans/OpenSans-Regular.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: 'Open Sans';
    src: url('fonts/Open_Sans/OpenSans-Light.eot');
    src: url('fonts/Open_Sans/OpenSans-Light.eot?#iefix') format('embedded-opentype'),
        url('fonts/Open_Sans/OpenSans-Light.woff') format('woff'),
        url('fonts/Open_Sans/OpenSans-Light.ttf') format('truetype');
    font-weight: 300;
    font-style: normal;
}

@font-face {
    font-family: 'Open Sans';
    src: url('fonts/Open_Sans/OpenSans-Italic.eot');
    src: url('fonts/Open_Sans/OpenSans-Italic.eot?#iefix') format('embedded-opentype'),
        url('fonts/Open_Sans/OpenSans-Italic.woff') format('woff'),
        url('fonts/Open_Sans/OpenSans-Italic.ttf') format('truetype');
    font-weight: normal;
    font-style: italic;
}

@font-face {
    font-family: 'Open Sans';
    src: url('fonts/Open_Sans/OpenSans-SemiBoldItalic.eot');
    src: url('fonts/Open_Sans/OpenSans-SemiBoldItalic.eot?#iefix') format('embedded-opentype'),
        url('fonts/Open_Sans/OpenSans-SemiBoldItalic.woff') format('woff'),
        url('fonts/Open_Sans/OpenSans-SemiBoldItalic.ttf') format('truetype');
    font-weight: 600;
    font-style: italic;
}

@font-face {
    font-family: 'Open Sans';
    src: url('fonts/Open_Sans/OpenSans-ExtraBold.eot');
    src: url('fonts/Open_Sans/OpenSans-ExtraBold.eot?#iefix') format('embedded-opentype'),
        url('fonts/Open_Sans/OpenSans-ExtraBold.woff') format('woff'),
        url('fonts/Open_Sans/OpenSans-ExtraBold.ttf') format('truetype');
    font-weight: 800;
    font-style: normal;
}

@font-face {
    font-family: 'Open Sans';
    src: url('fonts/Open_Sans/OpenSans-ExtraBoldItalic.eot');
    src: url('fonts/Open_Sans/OpenSans-ExtraBoldItalic.eot?#iefix') format('embedded-opentype'),
        url('fonts/Open_Sans/OpenSans-ExtraBoldItalic.woff') format('woff'),
        url('fonts/Open_Sans/OpenSans-ExtraBoldItalic.ttf') format('truetype');
    font-weight: 800;
    font-style: italic;
}

@font-face {
    font-family: 'Open Sans';
    src: url('fonts/Open_Sans/OpenSans-Bold.eot');
    src: url('fonts/Open_Sans/OpenSans-Bold.eot?#iefix') format('embedded-opentype'),
        url('fonts/Open_Sans/OpenSans-Bold.woff') format('woff'),
        url('fonts/Open_Sans/OpenSans-Bold.ttf') format('truetype');
    font-weight: bold;
    font-style: normal;
} 
```

也有它自己的`demo.html`内联样式表，看起来很有趣，虽然我熟悉使用字体粗细和样式，所以我不需要太多。有关如何在 html 元素上实现字体样式以供参考的示例，您可以在类似情况下使用以下方法在`@font-face`正确使用后进行挖掘 -

```
html, body{
    margin: 0;
    font-family: 'Open Sans';
}
.banner h1{
    font-size: 43px;
    font-weight: 700;
}
.banner p{
    font-size: 24px;
    font-weight: 300;
    font-style: italic;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-31T09:59:36.173

试试这个[链接1](http://www.w3.org/TR/css3-fonts/)，[链接2](http://bavotasan.com/2010/embedding-fonts-web-site-css-font-face/)

```
@font-face {
        font-family: 'RieslingRegular';
        src: url('fonts/riesling.eot');
        src: local('Riesling Regular'), local('Riesling'), url('fonts/riesling.ttf')                       format('truetype');
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-07-19T19:33:27.673

我像这样使用了 Ataturk 的字体。我没有使用“TTF”版本。我将原始字体版本（“otf”版本）翻译为“eot”和“woof”版本。然后它在本地工作，但当我将文件上传到服务器时不起作用。所以我也像这样添加了“TTF”版本。现在，它可以在 Chrome 和 Firefox 上运行，但 Internet Explorer 仍然可以防御。当您在计算机上安装“Ataturk”字体时，也可以使用 IE。但我想在不安装的情况下使用这种字体。

```
@font-face {
    font-family: 'Ataturk';
    font-style: normal;
    font-weight: normal;
    src: url('font/ataturk.eot');
    src: local('Ataturk Regular'), url('font/ataturk.ttf') format('truetype'), 
    url('font/ataturk.woff') format('woff');
} 
```

你可以在我的网站上看到它：http: [//www.canotur.com](http://www.canotur.com)

# jquery - jQuery Mobile，在不使用 data-position="fixed" 的情况下将页脚设置为屏幕底部，这可能吗？

> ID：11737169
> 
> 赞同：2
> 
> 时间：2012-07-31T09:36:05.657
> 
> 标签：jquery, jquery-mobile, ibm-mobilefirst

我想将页脚设置为附加在屏幕底部，这可以通过`<div data-role="footer" data-id="persistent_navbar" data-position="fixed">`在 jquery[文档中详细设置来轻松完成](http://jquerymobile.com/test/docs/toolbars/bars-fixed.html)

但是，这似乎会产生以下不需要的输出：

![在此处输入图像描述](../Images/60d6832d0368d1caeecbb9c1f9cc053f.png)

因此，通过删除`data-position="fixed"`，页脚然后整齐地适合目标内容宽度，但它会浮在主要内容下方，如下所示：

![在此处输入图像描述](../Images/43c5590f7e0a7e64acd72eeb1a27496c.png)

**问题：**如何将页脚附加到屏幕底部，同时确保页脚不会从其容器中溢出？最终目标是在页眉和页脚之间有一个滚动列表。

这是我上面的 HTML：

```
<!DOCTYPE html>     
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0" />
        <title>SmartConf</title>
        <link rel="shortcut icon" href="images/favicon.png" />
        <link rel="apple-touch-icon" href="images/apple-touch-icon.png" />
        <link rel="stylesheet" href="css/reset.css" />
        <link rel="stylesheet" href="css/SmartConf.css" />
        <link rel="stylesheet" href="css/jquery.mobile-1.1.1.min.css" />
    </head>
    <body onload="WL.Client.init({})" id="content" style="display: none">

        <div data-role="page">
                <div data-role="header">
                    <h1>Welcome</h1>
                </div><!-- /header -->

                <div data-role="content">
                <a href="home.html" data-role="button">Enter</a>    

                </div><!-- /content -->

                <div data-role="footer" data-id="persistent_navbar">
                    <h4>Some footer here</h4>
                </div>

            </div><!-- /page -->

        <script src="js/SmartConf.js"></script>
        <script src="js/messages.js"></script>
        <script src="js/auth.js"></script>
        <script src="js/jquery/jquery.mobile-1.1.1.js"></script>
    </body>
</html> 
```

`SmartConf.css`: _

```
/*Worklight container div */
#content {
    height: 460px;
    margin: 0 auto;
    width: 320px;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T13:25:13.977

我用这个

```
<ul data-dojo-type="dojox.mobile.TabBar" class="tab_bar"
data-dojo-props='fixed: "bottom"' syncWithViews="true"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:30:30.887

你有没有尝试改变这个：

```
#content {
    height: 460px;
    margin: 0 auto;
    width: 320px;
} 
```

进入这个：

```
#content {
    height: auto;
    margin: 0 auto;
    width: auto;
} 
```

或者换句话说，你为什么要限制你的宽度和高度？

# bash - 批量重命名替换为原始文件名的一部分 DOS 和 Bash

> ID：11737170
> 
> 赞同：1
> 
> 时间：2012-07-31T09:36:06.973
> 
> 标签：bash, dos, batch-rename

我知道这已被多次讨论，但我似乎仍然无法为这个特定方面找到一个好的解决方案。我在 bash 和 DOS 中都有同样的问题。我有一个名为 abcYYMMDDf.csv 的许多 .csv 文件的文件，我想将文件名更改为与创建日期相对应的 YYMMDD 部分。注意 YYMMDD 之后的“f”，所以我真的想要一个相当于 excel 的 mid() 来取中间日期。

在 bash 中，我了解重命名功能，以及我尝试过的 * 通配符

```
rename abc*f.csv *.csv abc* 
```

认为 * 会代表 YYMMDD 但显然它没有。我看到了另一种涉及选择 s/([az]*) 的方法，但这肯定会占用整个文件名吗？

在DOS我试过

```
ren abc*f.csv *.csv 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:55:29.733

对于问题的“DOS”部分：假设您在 Windows 上使用命令提示符 (cmd.exe)，而不是在真正的 DOS 上使用 command.com

```
@echo off
setlocal enableDelayedExpansion
for %%F in (abc*f.csv) do (
  set "name=%%F"
  ren "%%F" "!name:~1,6!.csv"
) 
```

**更新**

有关 REN 如何使用通配符的规则，[请参阅 Windows RENAME 命令如何解释通配符？](https://superuser.com/q/475874/109090). 不幸的是，这些规则在这种情况下没有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T12:09:28.723

Bash 参数扩展可用于分两步去除“abc”和“f”，分别使用前缀删除和模式替换。

```
for f in abc*f.csv; do
    new_f=${f#abc}
    new_f=${new_f/%f.csv/.csv}
    mv $f $new_f
done 
```

您可以使用`sed`代替参数扩展来一步删除“abc”和“f”：

```
for f in abc*f.csv; do
    new_f=$(echo $f | sed 's/abc\(.*\)f/\1/')
    mv $f $new_f
done 
```

我无法回答 DOS 版本；你最好在一个单独的问题中提出这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:11:54.950

对于 bash 部分（有两个步骤）：

```
rename abc "" abc*
rename f.csv .csv *f.csv 
```

应该可以工作，因为您想用空字符串替换“abc”部分（即删除 abc 部分）。使用重命名，您只需指定要替换的部分，而不是整个文件名（有关详细信息，请参阅重命名手册页）。

第二步负责删除尾随的“f”。

对于 DOS 部分：

我认为您无法仅通过重命名来解决该问题。看看一些 Powershell 命令可能是值得的......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-04T18:11:27.910

我有一个针对 DOS 的解决方案，您可以在 excel 中创建所需的字符串，然后将它们复制并粘贴到命令行中。它将自动执行您复制到命令行中的每一行。

REN "文件夹路径\文件名" "newName"

```
REN "C:\Users\Charlie\Desktop\_Working General\L2795187.HH293.11.xml.csv" "HH293-11.csv" 
```

我用公式在 excel 中创建了上述内容，然后将其粘贴到 cmd 中。我想在 A 列中重命名的每个文件的一个单元格，它工作得很好。

# c# - 为什么事件不提供 3 种访问器方法？

> ID：11737175
> 
> 赞同：4
> 
> 时间：2012-07-31T09:36:26.143
> 
> 标签：c#

在实现事件时，可以提供代码`add`和`remove`事件处理程序。但是，可以通过三种方式访问​​事件：

```
MyEvent += Handler;                // add accessor
MyEvent -= Handler;                // remove accessor
MyEvent(this, EventArgs.Empty);    // not supported by an accessor 
```

`invoke`有另一个被称为负责的访问器不是很明显吗？我的想法是：

```
class BaseClass
{
  public virtual event EventHandler MyEvent { add; remove; protected invoke; }
}

class DerivedClass : BaseClass
{
  public override event EventHandler MyEvent
  {
    invoke
    {
      // new code before event
      base.MyEvent(this, ...);
      // new code after event
    }
  }
} 
```

我知道[旧式模式](http://msdn.microsoft.com/en-us/magazine/cc163533.aspx)，即实现一个`OnMyEvent(...)`方法。但是这种方法有两个重要的缺点：

1.  事件代码分散 -> 代码库组织较少
2.  您不能轻松地重构事件（例如，重命名它）

**编辑：**显然编译器团队已经为这个特性设计了（参见 参考资料[`GetRaiseMethod()`](http://msdn.microsoft.com/en-us/library/1a4k4e35.aspx)）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T09:39:12.003

这是故意的，这样您就不会调用您不“拥有”的事件。

编辑（解决您的编辑问题）：即使在继承的类中，您是否应该始终能够调用它也不清楚。通常是的，因此通用模式已经很好地列出：

*   定义一个事件（*不*带前缀`On`）
*   创建一个具有相同名称但前缀为 的受保护虚拟方法`On`，它接受适当的`EventArgs`并仅执行`null`检查和调用。
*   总是通过虚方法引发事件

这种模式允许更大的灵活性；可以通过继承该方法更改或省略事件或进行事件后处理。如果不存在方法，则事件调用是私有的。

# c# - listview、datapager、objectdatasource 在更新面板中不起作用

> ID：11737177
> 
> 赞同：1
> 
> 时间：2012-07-31T09:36:30.653
> 
> 标签：c#, asp.net, updatepanel, objectdatasource, datapager

当我在 datapager 中更改页面时，它会导致完全回发，即使 datapager 工作非常异常，也不知道是什么原因。通过异常我的意思是有时数据有时不显示，
以下是我在 c# 中的代码

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            BindListView();
        }           
    }

    protected void StudentListView_PagePropertiesChanging(object sender, PagePropertiesChangingEventArgs e)
    {
        BindListView();
    }
    private void BindListView()
    {
        StudentListView.DataSource = StudentDataSource;
        StudentListView.DataBind();
    }

    protected void StudentDataSource_Selecting(object sender, ObjectDataSourceSelectingEventArgs e)
    {
        e.Arguments.MaximumRows = StudentListDataPager.MaximumRows;
        e.Arguments.StartRowIndex = StudentListDataPager.StartRowIndex;
    } 
```

以下是我的标记

```
 <asp:UpdatePanel runat="server" UpdateMode="Conditional">
    <ContentTemplate>        <
    <asp:DropDownList runat="server" ID="BatchDropDownList" AutoPostBack="True">
        <asp:ListItem Text="Batch 1" Value="1" Selected="True" />
        <asp:ListItem Text="Batch 2" Value="2" />
    </asp:DropDownList>

    <asp:ListView ID="StudentListView" runat="server"       
        ItemPlaceholderID="ListViewContent" 
            EnableViewState="false" 
            onpagepropertieschanging="StudentListView_PagePropertiesChanging"> 
        <LayoutTemplate> 
            <table style="width:100%">
                <thead>
                    <tr>
                        <th class="align-left"><strong>Name</strong></th>
                        <th class="align-left"><strong>MobNo</strong></th>
                    </tr>
                </thead>
                <tbody runat="server" id="ListViewContent"> 
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="3">

                        </td>
                    </tr>
                </tfoot>
            </table>

        </LayoutTemplate>  
        <ItemTemplate>  

            <tr>
                <td style="width:70%;"><%# Eval("FirstName") %>&nbsp<%# Eval("LastName") %></td>
                <td style="width:30%;"><%# Eval("MobNo") %></td>                    
            </tr>

        </ItemTemplate>             
    </asp:ListView>
    <asp:DataPager ID="StudentListDataPager" runat="server" PageSize="5" PagedControlID="StudentListView">
        <Fields>
            <asp:NumericPagerField />
        </Fields>
    </asp:DataPager>

    <asp:ObjectDataSource ID="StudentDataSource" runat="server" 
        SelectMethod="GetStudentListBatchWise" SelectCountMethod="StudentCount" 
            TypeName="SCERPCommonUtil.Student" EnablePaging="True" 
            onselecting="StudentDataSource_Selecting">
        <SelectParameters>
            <asp:ControlParameter Name="batchId" ControlID="BatchDropDownList" PropertyName="SelectedValue" />
        </SelectParameters>
    </asp:ObjectDataSource>
    </ContentTemplate>
</asp:UpdatePanel> 
```

如果我犯了任何错误，请告诉我。

PS：请不要向我指出任何stackoverflow问题，因为我已经阅读了所有这些问题，并且没有一个特定于我的要求，

我面临的最重要的问题是数据分页器正在提供完整的回发，即使`datapager`发生`updatepanel`同样的事情也是如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:25:19.713

亲爱的，您已将 updatemode 指定为有条件的。但是您已经在更新面板中提到了任何触发器。将 AsyncPostBackTrigger 添加到更新面板

```
<asp:UpdatePanel runat="server" UpdateMode="Conditional">
<ContentTemplate> 
<Triggers>
            <asp:AsyncPostBackTrigger ControlID="StudentListView" EventName="PagePropertiesChanging" />
</Triggers>
<ContentTemplate>
</asp:UpdatePanel> 
```

**来自 MSDN：** `If the UpdateMode property is set to Conditional, and one of the following conditions occurs:`

1.  显式调用 UpdatePanel 控件的 Update 方法。
2.  回发是由使用 UpdatePanel 控件的 Triggers 属性定义为触发器的控件引起的。在这种情况下，控件显式触发面板内容的更新。该控件可以位于定义触发器的 UpdatePanel 控件内部或外部。
3.  ChildrenAsTriggers 属性设置为 true，并且 UpdatePanel 控件的子控件会导致回发。嵌套 UpdatePanel 控件的子控件不会导致对外部 UpdatePanel 控件的更新，除非它被明确定义为触发器。

**更新答案：** 为什么您没有在列表视图中提及 DataSourceID 属性？？？

```
 <asp:ListView ID="StudentListView" runat="server"  DataSourceID  ="StudentDataSource" 
```

并且您将列表视图绑定在后面的代码中

```
private void BindListView()
{
    StudentListView.DataSource = StudentDataSource; //also it should be DataSourceID 
    StudentListView.DataBind();
} 
```

您正在使用对象数据源，并且在您的代码中将其绑定为错误的数据源。将其绑定为数据源 ID 或简单提及 listview 的 datasourceID 属性，然后您不必在后面的代码中绑定它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-28T21:13:22.197

我想通了——万一有人来看——

我正在使用`<form runat="server">...<form>`标签，其中存在所有这些列表视图、数据分页器代码。当我为表单标签分配唯一`id`属性时，一切都开始正常工作。
虽然我不明白这种行为的原因。

# ios - 社交后端的最佳解决方案

> ID：11737180
> 
> 赞同：0
> 
> 时间：2012-07-31T09:36:35.023
> 
> 标签：ios, mobile, social-networking, opensocial

哪种是部署具有社交功能的后端服务器的最简单方法？基本特征是

*   用户资料
*   朋友们
*   活动流
*   通知

我发现的大多数现成解决方案都针对社交网络“网站”，而我只需要一个提供 API 以集成到移动应用程序中的后端服务。

我正在查看 Open Social，但似乎并不像我想象的那样“开箱即用”。

还有什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T23:10:46.080

您可能希望将[Apache Rave](http://rave.apache.org/)作为开箱即用的 OpenSocial 解决方案进行查看。

# python - Lighttpd 和 cgi python

> ID：11737183
> 
> 赞同：5
> 
> 时间：2012-07-31T09:36:42.460
> 
> 标签：python, lighttpd

我正在尝试通过 lighttpd 执行一些 python 脚本，但是当我尝试运行它时，我只得到一个空白文件，我被要求下载。

*lighttpd.conf*

```
server.modules  = (
            "mod_access",
            "mod_alias",
            "mod_accesslog",
            "mod_compress",
            "mod_rewrite"
)

server.port                 = 8080
server.bind                 = "127.0.0.1"
server.document-root        = "/var/www"
server.upload-dirs          = ( "/var/cache/lighttpd/uploads" )
server.errorlog             = "/var/log/lighttpd/error.log"
server.pid-file             = "/var/run/lighttpd.pid"
server.username             = "www-data"
server.groupname            = "www-data"

index-file.names            = ( "index.php", "index.html",
                                "index.htm", "default.htm",
                               " index.lighttpd.html" )

url.access-deny             = ( "~", ".inc" )

static-file.exclude-extensions = ( ".php", ".pl", ".fcgi", ".py" )

dir-listing.encoding        = "utf-8"
server.dir-listing          = "enable"

compress.cache-dir          = "/var/cache/lighttpd/compress/"
compress.filetype           = ( "application/x-javascript", "text/css", "text/html", "text/plain" )

include_shell "/usr/share/lighttpd/create-mime.assign.pl"
include_shell "/usr/share/lighttpd/include-conf-enabled.pl" 
```

*/etc/lighttpd/conf-enabled/10.cgi.conf*

```
server.modules += ( "mod_cgi" )

$HTTP["url"] =~ "^/cgi-bin/" {
    cgi.assign = ( "" => "" )
}

## Warning this represents a security risk, as it allow to execute any file
## with a .pl/.py even outside of /usr/lib/cgi-bin.
#
cgi.assign      = (
#   ".pl"  => "/usr/bin/perl",
    ".py"  => "/usr/bin/python"
) 
```

*/var/www/cgi-bin/hellopy.py*

```
print "Content-Type: text/html"
print
print "<TITLE>CGI script output</TITLE>"
print "<H1>This is my first CGI script</H1>"
print "Hello, world!" 
```

我真的不明白发生了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T09:40:54.050

删除“默认”分配

```
cgi.assign = ( "" => "" ) 
```

并且只使用第二个，也许在比赛中。

```
$HTTP["url"] =~ "^/cgi-bin/" {
    cgi.assign = ( ".py" => "/usr/bin/python" )
} 
```

**编辑**

并确保它`/usr/bin/python`存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-23T22:19:07.933

确保您的 Lighttpd 的 mimetypes 配置文件中有以下内容：

```
".py" => "text/x-python",
".pyc" => "application/x-python-code",
".pyo" => "application/x-python-code", 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-02T20:45:26.210

我也遇到了这个问题。默认情况下，该`cgi`模块被禁用。要启用，请尝试运行`sudo lighttpd-enable-mod cgi`，然后`/etc/init.d/lighttpd force-reload`重试。还要记住，如果你设置`cgi.execute-x-only = enable`了你需要使你的 cgi 脚本可执行，例如`chmod a+x index.py`.

如果这仍然不起作用，您可以尝试添加`"mod_cgi"`到您的`server.modules`阵列。

# objective-c - Facebook 帖子分享弹出窗口

> ID：11737184
> 
> 赞同：0
> 
> 时间：2012-07-31T09:36:44.640
> 
> 标签：objective-c, ios, facebook, share

我想将我的 iOS 应用程序中的一些内容分享到用户的 Facebook 墙上。我可以展示官方登录网页视图，但我想知道在用户成功登录后如何展示这种视图......

![在此处输入图像描述](../Images/cb2925e32441445f0236ba2234507c38.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:42:31.580

创建 Facebook 实例后，我们将其命名为 _facebook。您调用以下方法

```
NSMutableDictionary paramters = [NSMutableDictionary dictionaryWithObjectsAndKeys:@"<app id>", @"app_id", @"http://...", @"picture", nil];

[_facebook dialog:@"feed" andParams:parameters andDelegate:self]; 
```

参数可以在这里找到：

[https://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

# android - 微调器单击时如何调用方法？

> ID：11737189
> 
> 赞同：0
> 
> 时间：2012-07-31T09:37:12.963
> 
> 标签：android

我有一个微调器列表`"one","two","three"`，

我想为`(that means when click spinner)`微调器中的每个选择调用一个方法。

单击微调器时是否有任何默认方法可用。那么怎么做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T09:39:41.800

您可以根据 `setOnItemSelectedListener`需要使用

```
spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
@Override
public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id) {
    // your code here
}

@Override
public void onNothingSelected(AdapterView<?> parentView) {
    // your code here
}

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T09:59:36.593

这应该可以解决问题

```
 Spinner sp = new Spinner(this);         
        ArrayAdapter<String> aa = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, new
        String[]{"one", "two", "three"});       
    sp.setAdapter(aa);
        sp.setOnItemSelectedListener(new OnItemSelectedListener() {
@Override
public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id) {
    // your code here
}

@Override
public void onNothingSelected(AdapterView<?> parentView) {
    // your code here
}

}); 
```

# python - 使用 matplotlib 将 networkx 图嵌入 wxPython

> ID：11737192
> 
> 赞同：3
> 
> 时间：2012-07-31T09:37:25.547
> 
> 标签：python, matplotlib, wxpython, networkx

我用networkx创建了一个图表。

```
G=nx.DiGraph()

# ... building the graph ...
# and I can display it with matplotlib like this:

nx.draw(G)
matplotlib.pyplot.show() 
```

但我想做的是，从以下示例开始，将创建的图形嵌入到 wxPython 中。一开始我只想打印它；根本没有用户交互。

```
from numpy import arange, sin, pi
import matplotlib
matplotlib.use('WXAgg')

from matplotlib.backends.backend_wxagg import FigureCanvasWxAgg as FigureCanvas
from matplotlib.backends.backend_wx import NavigationToolbar2Wx
from matplotlib.figure import Figure

import wx

class CanvasPanel(wx.Panel):
    def __init__(self, parent):
        wx.Panel.__init__(self, parent)
        self.figure = Figure()
        self.axes = self.figure.add_subplot(111)
        self.canvas = FigureCanvas(self, -1, self.figure)
        self.sizer = wx.BoxSizer(wx.VERTICAL)
        self.sizer.Add(self.canvas, 1, wx.LEFT | wx.TOP | wx.GROW)
        self.SetSizer(self.sizer)
        self.Fit()

    def draw(self):
        t = arange(0.0, 3.0, 0.01)
        s = sin(2 * pi * t)
        self.axes.plot(t, s)

if __name__ == "__main__":
    app = wx.PySimpleApp()
    fr = wx.Frame(None, title='test')
    panel = CanvasPanel(fr)
    panel.draw()
    fr.Show()
    app.MainLoop() 
```

有人可以给我小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:04:07.950

在这里我所做的，您可以使用 plt.figure() 获取图形的实例并将其粘贴到画布中，然后使用例如 vbox 将画布添加到面板：

```
import matplotlib.pyplot as plt
import networkx as nx
import wx
from matplotlib.backends.backend_wxagg import \
FigureCanvasWxAgg as FigCanvas, \
NavigationToolbar2WxAgg as NavigationToolbar

class NetworkFrame(wx.Frame):

def __init__(self):
    wx.Frame.__init__(self, None, -1)
    self.panel = wx.Panel(self)
    self.fig = plt.figure()
    self.canvas = FigCanvas(self.panel, -1, self.fig)
    G=nx.house_graph()
pos={0:(0,0),
    1:(1,0),
    2:(0,1),
    3:(1,1),
    4:(0.5,2.0)}

nx.draw_networkx_nodes(G,pos,node_size=2000,nodelist=[4])
nx.draw_networkx_nodes(G,pos,node_size=3000,nodelist=[0,1,2,3],node_color='b')
nx.draw_networkx_edges(G,pos,alpha=0.5,width=6)
plt.axis('off')
self.vbox = wx.BoxSizer(wx.VERTICAL)
    self.vbox.Add(self.canvas, 1, wx.LEFT | wx.TOP | wx.GROW)
    self.toolbar = NavigationToolbar(self.canvas)
    self.vbox.Add(self.toolbar, 0, wx.EXPAND)
    self.panel.SetSizer(self.vbox)
    self.vbox.Fit(self)

#plt.savefig("house_with_colors.png") # save as png
#plt.show() # display

if __name__ == '__main__':
  app = wx.PySimpleApp()
  app.frame = NetworkFrame()
  app.frame.Show()
  app.MainLoop() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T12:03:15.087

解决方法：将 networkx 图形导出为 png 并使用 imread 绘制它。

```
plt.axis("off") # turn off axis
# output to a temporary file name and display it in matplotlib     
filename = "/tmp/image.png"
plt.savefig(filename, dpi=400, bbox_inches='tight') 
img = imread(filename)
self.axes.imshow(img) 
```

# r - 替换向量中的给定值

> ID：11737193
> 
> 赞同：40
> 
> 时间：2012-07-31T09:37:30.053
> 
> 标签：r, replace

我正在寻找一个函数，它将用另一个值替换所有出现的一个值。例如，我想用一替换所有零。我不想将结果存储在变量中，但希望能够匿名使用向量作为更大表达式的一部分。

我知道如何自己编写一个合适的函数：

```
> vrepl <- function(haystack, needle, replacement) {
+   haystack[haystack == needle] <- replacement
+   return(haystack)
+ }
> 
> vrepl(c(3, 2, 1, 0, 4, 0), 0, 1)
[1] 3 2 1 1 4 1 
```

但我想知道是否有一些标准功能可以完成这项工作，最好是从`base`包中，作为其他常用包的替代品。我相信使用这样的标准可能会使我的代码更具可读性，并且我不必在需要的地方重新定义该函数。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-07-31T10:02:25.333

也许`replace`是您正在寻找的：

```
> x = c(3, 2, 1, 0, 4, 0)
> replace(x, x==0, 1)
[1] 3 2 1 1 4 1 
```

或者，如果您没有`x`（任何具体原因为什么没有？）：

```
replace(c(3, 2, 1, 0, 4, 0), c(3, 2, 1, 0, 4, 0)==0, 1) 
```

很多人都熟悉`gsub`，因此您也可以尝试以下任一方法：

```
as.numeric(gsub(0, 1, x))
as.numeric(gsub(0, 1, c(3, 2, 1, 0, 4, 0))) 
```

# 更新

阅读评论后，也许`with`是一个选择：

```
with(data.frame(x = c(3, 2, 1, 0, 4, 0)), replace(x, x == 0, 1)) 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-31T10:13:40.650

另一个更简单的选择是：

```
 > x = c(1, 1, 2, 4, 5, 2, 1, 3, 2)
 > x[x==1] <- 0
 > x
 [1] 0 0 2 4 5 2 0 3 2 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-11-11T22:12:52.593

一个简单的方法是使用`ifelse`，它是矢量化的。如果满足条件，我们使用替换值，否则使用原始值。

```
v <- c(3, 2, 1, 0, 4, 0)
ifelse(v == 0, 1, v) 
```

我们可以通过使用管道来避免命名变量。

```
c(3, 2, 1, 0, 4, 0) %>% ifelse(. == 0, 1, .) 
```

一个常见的任务是进行多次替换。`ifelse`我们可以使用`case_when`from **dplyr**来代替嵌套语句：

```
case_when(v == 0 ~ 1,
          v == 1 ~ 2,
          TRUE ~ v) 
```

* * *

老答案：

对于因子或字符向量，我们可以使用`revalue`from `plyr`：

```
> revalue(c("a", "b", "c"), c("b" = "B"))
[1] "a" "B" "c" 
```

这样做的好处是只指定一次输入向量，所以我们可以使用像这样的管道

```
x %>% revalue(c("b" = "B")) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-06-15T05:42:21.200

要替换多个数字：

```
vec <- 1:10
replace(vec, vec== c(2,6), c(0,9)) #2 and 6 will be replaced by 0 and 9. 
```

**编辑：**

对于连续系列，您可以这样做，`vec <- c(1:10); replace(vec, vec %in% c(2,6), c(0,9))` 但`vec <- c(1:10,2,2,2); replace(vec, vec %in% c(2,6), 0)`我们可以用一个值替换多个值。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-02-27T09:25:59.770

为什么大惊小怪？

```
replace(haystack, haystack %in% needles, replacements) 
```

演示：

```
haystack <- c("q", "w", "e", "r", "t", "y")
needles <- c("q", "w")
replacements <- c("a", "z")

replace(haystack, haystack %in% needles, replacements)
#> [1] "a" "z" "e" "r" "t" "y" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-31T15:55:55.870

该`ifelse`功能将是一种快速简便的方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-03T10:49:36.573

如果你想一次性替换很多值，你可以使用'library(car)'。

**例子**

```
library(car)

x <- rep(1:5,3)

xr <- recode(x, '3=1; 4=2')

x
## [1] 1 2 3 4 5 1 2 3 4 5 1 2 3 4 5
xr
## [1] 1 2 1 2 5 1 2 1 2 5 1 2 1 2 5 
```

# objective-c - 从我的应用程序内部启动本机应用程序？

> ID：11737195
> 
> 赞同：0
> 
> 时间：2012-07-31T09:37:40.307
> 
> 标签：objective-c, xcode, ipad, native

不确定这是否可行，但我看到一些人通过 Web URL 这样做。是否可以通过单击按钮来设置链接以启动位于我的 ipad 上的应用程序。是通过应用商店下载的应用还是刚刚通过 xcode 添加到我的 ipad 的应用？

如果这是可能的，那就太棒了，但不确定您是否必须完全退出应用程序才能启动新应用程序，或者您是否可以将新应用程序设置为加载到新视图中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:03:05.850

您需要确定应用程序注册的 URL 方案，然后使用以下

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"tel:12313132"]]; 
```

例如，要打开电子邮件应用程序，URL 方案适用`mailto:`于电话`tel:`或`telprompt:`

# iphone - UITableView 中的 UILabel 设置大小

> ID：11737199
> 
> 赞同：2
> 
> 时间：2012-07-31T09:37:51.683
> 
> 标签：iphone, objective-c, ios, uitableview, uilabel

我想将标签子视图添加到 UITableViewCell。我可以轻松地将框架原点和大小设置为特定值，但是如何使用当前/默认单元格标签高度和位置？

```
 UILabel *labPerHour;

  cell.textLabel.text       = @"Rate";

  labPerHour = [[UILabel alloc] init];

  //labPerHour.frame = CGRectMake( 280, cell.textLabel.frame.origin.y, 80, cell.textLabel.frame.size.height );
  labPerHour.frame = CGRectMake( 260, 7, 30, 30 );
  labPerHour.text  = @"$/hr";

  [cell addSubview:labPerHour]; 
```

我希望注释掉的行起作用..或类似的东西。

有人可以帮忙吗？这段代码当然是我的 cellForRowAtIndexPath 方法的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:52:02.120

我不知道。也许它会起作用。这个我没试过！！

```
CGRect theFrame = cell.textLabel.frame;
theFrame.origin.x = 280;
theFrame.size.width = 80;
labPerHour.frame = theFrame; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T09:54:22.693

如果您尝试获取 uitable view 的默认标签框架，那么您可以试试这个

```
CGRect myframe;
myframe= cell.textlabel.frame; 
```

现在根据需要使用它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T09:55:15.597

您需要提供相对于超级视图坐标系的坐标。这些坐标需要有意义，因此您的标签仍然位于单元格的框架内，而不是在它之外。

> 因为每个视图和窗口都定义了自己的局部坐标系，所以您需要知道在任何给定时间哪个坐标系有效。每次绘制视图或更改其几何图形时，都是相对于某个坐标系进行的。在绘图的情况下，您指定相对于视图自己的坐标系的坐标。在几何变化的情况下，您指定相对于超级视图坐标系的坐标。UIWindow 和 UIView 类都包含帮助您从一个坐标系转换到另一个坐标系的方法。

[View Programming Guide for iOS](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/WindowsandViews/WindowsandViews.html)的“View Geometry and Coordinate Systems”部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T11:24:56.150

您需要首先设置您的单元格标签框架。

```
cell.textLabel.frame = CGRectMake(0, 0, 40, 10); 
```

# python - 使用pywin32在IE8中获取数据

> ID：11737200
> 
> 赞同：1
> 
> 时间：2012-07-31T09:37:58.960
> 
> 标签：python, internet-explorer-8, full-text-search, pywin32, python-2.5

* * *

我一直在尝试使用 pywin32(Internet Explorer) 获取数据，但找不到任何好的东西，基本上我想从 IE PAGE 的当前源获取数据，例如：如果[http://whoer.net](http://whoer.net)打开然后我想获取国家或国家/地区，然后执行“如果”语句工作，但我这篇文章的主要概念是使用 pywin32(Python2.5) 获取数据，或者在 python 上打印数据控制台窗口左右。目前使用：

```
import pythoncom
from win32com.client import *

pythoncom.CoInitialize()
ie = Dispatch("InternetExplorer.Application")
ie.Navigate2("http://whoer.net")
ie.Visible = True 
```

请让我知道如何搜索或查找其中的任何数据或打印它。谢谢

编辑：请注意，我不想在 IE 上使用任何其他模块/库（如 urllib/mechanize）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:13:57.060

我知道您不想使用任何外部模块，但是，您可能有更好的时间使用[Selenium](http://seleniumhq.org/)之类的东西来处理网页的内容，或者如果您想降低级别，您甚至可以使用内置[urllib2](http://docs.python.org/library/urllib2.html)。

如果您坚持只使用win32com，那么这个话题太复杂了，无法给出答案。我的建议是查看[PAMIE](http://pamie.sourceforge.net/)的源代码。它有点旧，但它是一个纯 Python 模块，它使用（大部分）只使用 win32com 进行 IE 浏览器自动化，据我所知，唯一的其他依赖项是内置模块。它在 Python 2.5 上也应该可以正常工作。

# android - 广播接收器权限

> ID：11737207
> 
> 赞同：0
> 
> 时间：2012-07-31T09:38:28.667
> 
> 标签：android, broadcastreceiver, android-permissions

在 BroadcastReceiver 的 android 文档中：

> **android:permission**广播者必须拥有向广播接收者发送消息的权限的名称。如果未设置此属性，则元素的权限属性设置的权限适用于广播接收器。如果两个属性都没有设置，则接收者不受权限保护。

**我在应用程序标签中设置了一个自定义权限，**并且我还有一个接收器试图接收**MEDIA_SCANNER_FINISHED**广播。当系统尝试广播我的侦听器事件时，我收到以下警告消息。

```
Permission Denial: broadcasting Intent {
 act=android.intent.action.MEDIA_SCANNER_FINISHED
 dat=file:///mnt/sdcard } from com.android.providers.media (pid=767,
 uid=10029) requires com.xxx.permission due to receiver
 com.xxx.myreceiver 
```

我怎样才能得到广播？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:12:01.497

确保您`scheme`还在.`data``AndroidManifest.xml`

```
<receiver android:name=".YourReceiver">
    <intent-filter>
        <action android:name="android.intent.action.MEDIA_SCANNER_FINISHED" />
        <data android:scheme="file" />
    </intent-filter>
</receiver> 
```

# ios - IOS 应用间共享数据

> ID：11737209
> 
> 赞同：1
> 
> 时间：2012-07-31T09:38:37.823
> 
> 标签：ios, iphone-privateapi, data-sharing

嗨，我想在同一台 IOS 设备上的应用程序之间共享数据/文件。

场景：一个应用程序将数据（从服务器/最多 1GB）**拉到设备上，****其他应用程序应该能够访问它**。

我怎样才能做到这一点？

*   没有越狱

可能的解决方案：

*   只是小块：钥匙串、剪贴板、自定义 URL（实际上它们有多小/有限）

**如果我不去应用商店但直接 B2B**

*   私有 API 和其他类似的东西呢（就我而言，Apple 法规不适用于内部 App Store）

*   还有其他想法吗？

感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T09:53:47.670

我无法给出完整的答案，但其中一个选项是 iCloud。如果您在您的应用程序的权利中为每个不同的应用程序设置相同的 iCloud 容器，您可以从您的应用程序读取/修改共享文件。这要求两个应用程序使用相同的团队 ID。

“如果您想授予对由您的团队发布的其他应用程序创建的文档的访问权限，请使用附加字符串来指定这些应用程序的捆绑标识符。” 更多信息[在这里](http://developer.apple.com/library/ios/#documentation/Miscellaneous/Reference/EntitlementKeyReference/Chapters/EnablingiCloud.html#//apple_ref/doc/uid/TP40011195-CH2-SW1)。

这是一个苹果友好的解决方案！

# java - 独立于容器编译 servlet - '官方' servlet-api 的来源？

> ID：11737210
> 
> 赞同：0
> 
> 时间：2012-07-31T09:38:43.240
> 
> 标签：java, servlets, maven

几年后，我重新开始构建 Web 应用程序，并意识到我从来没有在不依赖于我碰巧使用的任何容器的情况下编译 servlet。

我当然可以继续这样做，但我仍然更喜欢某种“官方”servlet api JAR。

我在这里找到了一个：[http ://repo.maven.apache.org/maven2/javax/servlet/servlet-api/2.5/](http://repo.maven.apache.org/maven2/javax/servlet/servlet-api/2.5/)

但我不明白这是怎么到那里的？奇怪的是不是以com.sun或com.oracle开头的group id？

我能想到的唯一其他官方方法是取决于 Glassfish 的实现？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:56:59.137

Maven 上的 servlet-api.jar 只包含公共定义接口的接口和抽象类。那里没有方法实现，验证类和方法签名是否正确是微不足道的。这就是编译所需要的一切。（当然运行是另外一回事，需要一个servlet容器提供的实际实现）。

com.sun 和 com.oracle 包通常包含标准 API 的“官方”*实现*，而标准类库尚未包含它们。

**tl；博士**：[http](http://repo.maven.apache.org/maven2/javax/servlet/servlet-api/2.5/) ://repo.maven.apache.org/maven2/javax/servlet/servlet-api/2.5/绝对可以用于编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:57:15.693

“javax.servlet”实际上是“Java 扩展”的官方 Sun/Oracle groupId，因此是 javax.servlet。“com.sun”用于所有内部细节实现。

# android - ORMLite 无法创建第二个表

> ID：11737214
> 
> 赞同：1
> 
> 时间：2012-07-31T09:39:02.777
> 
> 标签：android, dao, ormlite

我将 json 中的数据解析为相应的类数据，他们希望将其保存在 ORMLite 中……这里是我的类

```
public class Categories {
    ArrayList<Category> categories;

     public Categories() {
        categories = new ArrayList<Category>();
     }

      public ArrayList<Category> getCategories() { 
          return this.categories; 
     }
} 
```

和级别：

```
@DatabaseTable(tableName = "levels")
public class Level {
    @SerializedName("id")
    @DatabaseField(id = true)
    int id;

    @SerializedName("title")
    @DatabaseField(dataType = DataType.STRING)
    String title;

    public Level() { }

    public Level(int id, String title) {
         this.id = id;
         this.title = title;
     }
} 
```

DatabaseHandler 类中的 OnCreate 方法：

```
@Override
public void onCreate(SQLiteDatabase db, ConnectionSource connectionSource) {
     try {  
        TableUtils.createTable(connectionSource, Category.class);
        TableUtils.createTable(connectionSource, Level.class);
     } catch (SQLException e){
         Log.e(TAG, "error creating DB " + DATABASE_NAME);
         throw new RuntimeException(e);
     }
} 
```

以及 DatabaseHandler 中的 DAO 方法：

```
 public Dao<Category, Integer> getCategoryDao() throws SQLException {
    if (simpleCategoryDao == null) {
        simpleCategoryDao = getDao(Category.class);
    }
    return simpleCategoryDao;
}

  public Dao<Level, Integer> getLevelDao() throws SQLException {
        if (simpleLevelDao == null) {
            simpleLevelDao = getDao(Level.class);
        }
        return simpleLevelDao;
    }

    public RuntimeExceptionDao<Category, Integer> getSimpleCategoryDao() {
        if (categoryRuntimeDao == null) {
            categoryRuntimeDao = getRuntimeExceptionDao(Category.class);
        }
        return categoryRuntimeDao;
    }

    public RuntimeExceptionDao<Level, Integer> getSimpleLevelDao() {
        if (levelRuntimeDao == null) {
            levelRuntimeDao = getRuntimeExceptionDao(Level.class);
        }
        return levelRuntimeDao;
    } 
```

我以这种方式在我的 Activity 中解析来自 JSON 的数据：

```
 DatabaseHandler db = new DatabaseHandler(getApplicationContext());
    JSONObject data = json.getJSONObject(KEY_DATA);
    // getting categories
   JSONArray categories = new JSONArray();
   categories = data.getJSONArray(KEY_CATEGORIES);
     Gson gson = new Gson();
        JsonParser parser = new JsonParser();
        JsonArray array = parser.parse(categories.toString()).getAsJsonArray();
       Type listType = new TypeToken<List<Category>>() {}.getType();
       List<Category> tasks = new ArrayList<Category>();
        tasks = gson.fromJson(array.toString(), listType);
         RuntimeExceptionDao<Category, Integer> simpleDao = getHelper1().getSimpleCategoryDao();
        Dao<Category, Integer> categoryDao = databaseHandler.getCategoryDao();
         Log.i("categoryDAO",categoryDao.queryForAll().toString());

    // getting levels
    JSONArray jsonlevels =new JSONArray();
    jsonlevels = data.getJSONArray(KEY_LEVELS); 
    JsonArray levelsarray = parser.parse(jsonlevels.toString()).getAsJsonArray();
    Type listlevels = new TypeToken<List<Level>>() {}.getType();
    List<Level> levels = new ArrayList<Level>();
    levels = gson.fromJson(levelsarray.toString(), listlevels);
    Log.i("levelsgson",levels.toString());
    RuntimeExceptionDao<Level, Integer> levelDao = getHelper1().getSimpleLevelDao();
    Log.i("levelDAO",levelDao.toString());
    Dao<Level, Integer> levelsDao = databaseHandler.getLevelDao();
    Log.i("levelsDAO",levelsDao.queryForId(3).toString()); 
```

我成功获取了类别数据，但是当我想为 Level DAO 实例调用 queryForId() 时出现异常。遇到这样的异常：

```
 java.sql.SQLException: queryForOne from database failed: SELECT * FROM `levels` WHERE `id` = ?
    at com.j256.ormlite.misc.SqlExceptionUtil.create(SqlExceptionUtil.java:22)
    at com.j256.ormlite.android.AndroidDatabaseConnection.queryForOne(AndroidDatabaseConnection.java:169)

at com.j256.ormlite.stmt.mapped.MappedQueryForId.execute(MappedQueryForId.java:38)
at com.j256.ormlite.stmt.StatementExecutor.queryForId(StatementExecutor.java:84)
at com.j256.ormlite.dao.BaseDaoImpl.queryForId(BaseDaoImpl.java:219)
at com.assignmentexpert.LoginActivity$1.onClick(LoginActivity.java:119)
at android.view.View.performClick(View.java:2485)
at android.view.View$PerformClick.run(View.java:9080)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:3687)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
at dalvik.system.NativeStart.main(Native Method)
      Caused by: android.database.sqlite.SQLiteException: no such table: levels: , while compiling: SELECT * FROM `levels` WHERE `id` = ?
at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92)
at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:65)
at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:83)
at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:49)
at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:42)
at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1356)
at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1324)
at com.j256.ormlite.android.AndroidDatabaseConnection.queryForOne(AndroidDatabaseConnection.java:155)
... 15 more 
```

所以问题是不能创建“级别”表。不明白为什么如果我使用与类别表相同的机制..

* * *

经过一些分析，我知道问题出在这种方法上

```
public void saveContacts(List<Category> contacts) throws SQLException
    {

        OrmLiteSqliteOpenHelper dbHelper= DatabaseHandler.getInstance(_context);
        Dao<Category, Integer> daoContact=dbHelper.getDao(Category.class);

        QueryBuilder<Category, Integer> queryBuilder = daoContact.queryBuilder();
        Log.i("dao",queryBuilder.selectColumns("title").prepare().toString());

        for (Category contact : contacts) {
            Log.i("dao",contact.toString());
            HelperFactory.GetHelper().getCategoryDao().create(contact);
        }

    } 
```

在 create() 行上。它抛出这样的异常集：

```
 FATAL EXCEPTION: main
 java.lang.NullPointerException
    at com.library.DataParsing.saveContacts(DataParsing.java:61)
    at com.library.DataParsing.fillCategories(DataParsing.java:45)
    at com.library.DatabaseHandler.onCreate(DatabaseHandler.java:85)
    at com.j256.ormlite.android.apptools.OrmLiteSqliteOpenHelper.onCreate(OrmLiteSqliteOpenHelper.java:169)
    at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:126)
at com.j256.ormlite.android.AndroidConnectionSource.getReadWriteConnection(AndroidConnectionSource.java:63)
    at com.j256.ormlite.android.AndroidConnectionSource.getReadOnlyConnection(AndroidConnectionSource.java:51)
    at com.j256.ormlite.stmt.StatementExecutor.buildIterator(StatementExecutor.java:202)
    at com.j256.ormlite.stmt.StatementExecutor.query(StatementExecutor.java:155)
    at com.j256.ormlite.stmt.StatementExecutor.queryForAll(StatementExecutor.java:113)
    at com.j256.ormlite.dao.BaseDaoImpl.queryForAll(BaseDaoImpl.java:237)
    at com.assignmentexpert.LoginActivity$1.onClick(LoginActivity.java:97)
at android.view.View.performClick(View.java:2485)
    at android.view.View$PerformClick.run(View.java:9080)
    at android.os.Handler.handleCallback(Handler.java:587)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:123)
    at android.app.ActivityThread.main(ActivityThread.java:3687)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
    at dalvik.system.NativeStart.main(Native Method) 
```

请帮忙...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:49:44.140

因此，`onCreate()`当您的应用程序第一次运行时会调用该方法。如果您`levels`稍后添加表（或修改其架构），则需要增加数据库版本以便`onUpgrade()`可以调用。

您可以从[ORMLite](http://ormlite.com/)主页的[Android 示例](http://ormlite.com/docs/android-examples)中看到一个典型的帮助器模式。这是[helper 的源代码](http://ormlite.svn.sourceforge.net/viewvc/ormlite/examples/android/HelloAndroid/src/com/example/helloandroid/DatabaseHelper.java?view=markup)。您的助手中需要以下内容。

```
// any time you make changes to your database objects, you may have to increase
// the database version
private static final int DATABASE_VERSION = 2;
...

@Override
public void onUpgrade(SQLiteDatabase db, ConnectionSource connectionSource,
  int oldVersion, int newVersion) {
    try {
        Log.i(DatabaseHelper.class.getName(), "onUpgrade");
        TableUtils.dropTable(connectionSource, SimpleData.class, true);
        // after we drop the old databases, we create the new ones
        onCreate(db, connectionSource);
    } catch (SQLException e) {
        Log.e(DatabaseHelper.class.getName(), "Can't drop databases", e);
        throw new RuntimeException(e);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:49:08.020

问题解决了将上下文传递给我的从 OrmLiteSqliteOpenHelper 扩展的 DatabaseHandler。

# c++ - 如何在 PCM 音频中使用 IMediaSample 检测静音

> ID：11737220
> 
> 赞同：0
> 
> 时间：2012-07-31T09:39:20.867
> 
> 标签：c++, audio, directshow, pcm

我需要使用 IMediaSample 检测 PCM 音频流中的静音。信号由电视提供，通过光缆与 PC 连接到 Prodigy 7.1 HiFi 声卡。到目前为止，我有这个：

```
bool detectSound(IMediaSample *pSamples)
{
    BYTE *pData;
    pSamples->GetPointer(&pData);
    long size = pSamples->GetActualDataLength();

    long nulls = 0;
    for(long i = 0; i < size; ++i) {
        if(pData[i] == 0)
            ++nulls;
    }

    /* 0.9 to eliminate interference */
    long max_nulls = (long) (0.9 * size);
    if(nulls > max_nulls) {                 /* STOP */
        /* no audio */
        return false;
    }
    else {
        /* audio available */
        return true;
    }
} 
```

问题是，如果我在标记为“STOP”的行处放置断点，则无论我是否将电视静音，nulls 几乎总是具有相同的值并且小于 max_nulls。我注意到 pData[i] 的值始终为 0 或 255。（奇怪还是不奇怪？）

可能我不明白这个“数据”到底是什么以及如何解释它。我可以肯定的是，如果没有音频，那么波形中的所有采样值应该几乎为 0。

你能验证我的想法吗？提前致谢。

蚀

编辑：

问题出在驱动程序和 AC3 滤波器设置的某个地方，因为在“SPDIF 测试”中，我发现 DirectSound 不支持 44.1 kHz、48 kHz 和 32 kHz。Roman的想法是正确的，当我解决这个问题时会起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T10:07:18.483

更好的方法是找出 PCM 数据是什么，并且发布的问题的答案将是微不足道的。

更快的方法是：

*   将这些音频数据字节视为 SHORT 值（您没有提到，但我想您的音频是 16 位的）
*   最好是拆分成通道，分别处理
*   计算[标准差](http://en.wikipedia.org/wiki/Standard_deviation)
*   沉默是当/如果计算值低于某个小阈值

# android - Android ICS 日历问题

> ID：11737222
> 
> 赞同：1
> 
> 时间：2012-07-31T09:39:35.673
> 
> 标签：android, calendar, android-4.0-ice-cream-sandwich, android-calendar

我正在使用 ICS 日历。面临的问题是在插入、更新日历中的事件时，它工作得非常好，除非我手动从日历中删除事件并在我的应用程序中查询该事件。该特定日历的 URI 和 calendar_id 仍然存在于 android 日历应用程序的数据库中。我希望我的应用程序和日历同步。任何人都可以为此建议任何解决方法或解决方案。

提前致谢

多米尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:33:52.580

确保 CalendarContract.Events.DELETED 的值不是 1。

在注册了 SyncAdapter 的设备中，删除只会将该列的值更新为 1。这让相应的 SyncAdapter 处理删除，并对已删除的项目做任何需要做的事情。只有在 SyncAdapter 完成其任务后，该行才会真正删除。

# opencv - 使用加速度计和机器学习的运动类型检测

> ID：11737223
> 
> 赞同：4
> 
> 时间：2012-07-31T09:39:37.040
> 
> 标签：opencv, accelerometer, detection, svm, motion

我即将着手开发一个使用加速度计来检测运动类型的移动应用程序，无论是跳跃、跑步、步行等。现在我最近在网上做了很多搜索，有点明白使用机器学习可以检测从加速度计收集的样本数据中的模式。我对机器学习完全陌生，但如果我理解正确（根据其他专家在线给出的提示），我可以使用支持向量机或神经网络来识别收集样本中的模式并将其映射到特定的运动类型。我也知道 OpenCV 库提供了这两种方法。

具有该领域专业知识的人能否告诉我哪种方法更好用，并指导我完成从数据收集到结果呈现所需的步骤？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T17:15:30.240

没有确凿的证据表明 SVM 或 NN 更适合一般情况，性能很大程度上取决于应用程序以及您如何设置这两种算法。因此，找出任何新应用程序的唯一方法是使用相同的数据尝试这两个应用程序，看看哪一个表现更好。

此外，NN 的分类计算速度通常更快，但训练速度较慢。SVM 的训练速度更快，但分类速度较慢。

对于您的情况，算法的输入参数将是更大的问题。我不会将原始加速度计数据提供给 SVM 或 NN。相反，我会预处理并获取基本信息，例如总功率、标准偏差，也许还有频域中的一些系数，以确定它有多快。这样做可以让您对改进和调整分类器有更好的直觉。如果您有正确的输入参数，您甚至可能不需要 NN 或 SVM 来确定基本运动，只需简单的最近距离标识符即可。祝你好运。

# css - 可缩放字体大小，带有“px”的 SASS (LESS) 与普通 ems

> ID：11737225
> 
> 赞同：2
> 
> 时间：2012-07-31T09:39:52.567
> 
> 标签：css, sass, less

我读过一篇文章，其中建议使用 ems 单位来使字体大小可缩放以适应移动开发：

```
html {
    font-size: 16px; /* our base font size */
}
body {
    font-size: 62.5%; /* now our em = 10px */
}
/* and for example we want to make h1 = 30 pixels */
h1 {
    font-size: 3em; /* target / context = 30 / 10 = 3
}
/* quite ugly in some cases */
h3 {
    font-size: 0.6666666em; /* want 20 pixels, context 30 = 20/30 = 0.(6) */
} 
```

这当然很酷。问题是 - 如果我们使用一些 CSS 预处理（SASS、LESS、自定义），那么可能我们甚至不需要这种方法并且可以直接使用变量：

```
$base-font: 10px;
h1 {
    font-size: $base-font*3;
}
h3 {
    font-size: $base-font*2; /* it could be $base-font/3, still nice */
} 
```

第二个选项似乎好多了，我错过了什么吗？

两个选项的想法都是单点更改字体大小，对吧？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T10:57:14.363

为什么不将这两种方法结合起来呢？像这样的东西：

```
$base-font: 1em;

html {
    font-size: 16px; /* our base font size */
}
body {
    font-size: 62.5%; /* now our em = 10px */
}

h1 {
    font-size: $base-font*3;
}
h3 {
    font-size: $base-font*2;
} 
```

这样，您保留了 的良好缩放`em`，但您让预处理器完成所有工作，得出长数字。正如评论中所讨论的，您可以对边距、填充和边框执行相同的操作，以使整个元素干净地缩放，而不仅仅是字体大小。

另一件要考虑的事情可能是`rem`（root em）。有关更多信息，请参见[http://snook.ca/archives/html_and_css/font-size-with-rem](http://snook.ca/archives/html_and_css/font-size-with-rem)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T09:44:15.617

如果用户有可访问性问题并希望在用户代理样式表中设置更大的基本字体，则基于 em 的大小将相应缩放，但基于 px 的大小不会。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T14:30:16.520

您也可以使用[Fluidizer SASS 库](http://lamarciana.github.com/fluidizer/)。它旨在以像素为单位进行思考，并以灵活的单位获取`em`值`percent`。我是它的开发者，但我认为它在你的情况下可以很好地工作。

这是一个例子。为了让`em`您使用`em()`所需大小（以像素为单位）的函数作为第一个参数，相关字体大小（您所说的上下文）作为第二个参数。

```
$initial-rfs: 16px;
html {
    font-size: $initial-rfs;
}
body {
    font-size: em(10px, 16px);
}
h1 {
    font-size: em(30px, 10px);
}
h3 {
    font-size: em(20px, 30px); /*did you said your context was 30px? are you sure? h3 inside h1? I think its context would be better 10px, them em(20px, 10px)*/
} 
```

# algorithm - 动态聚合聚类？平面上的点

> ID：11737227
> 
> 赞同：1
> 
> 时间：2012-07-31T09:39:58.527
> 
> 标签：algorithm, hadoop, machine-learning, cluster-analysis, computational-geometry

问题：

我有数百万（10+）个标记，每个标记都有不同的字段：

```
 1\. lat 
 2\. lng   
 3\. area (double)
 4\. size (int)
 5\. tolerance (double)
 6\. lags (boolean)
 7\. channel (boolean)
... (more) 
```

现在，我希望每个集群都有以下聚合数据：

```
 1\. number of markers
 2\. min area
 3\. max area
 4\. avg area
 5\. min size
 6\. max size
 7\. avg size
 8\. tolerance distribution (how many where of tolerance < X, other >=X < Y and >=Y <Z where X,Y,Z constants)
 ... (more) 
```

集群是基于标记的 lat,lng（距离）和缩放级别（int）创建的。

非问题部分（**）：

> 计算所有缩放级别的集群，而不考虑“全押”条件。这是通过创建一棵树来完成的，并且为用户获取集群是直截了当的。

现在解决问题：

> 用户可以根据标记字段进行查询，例如“向我显示其区域> K 且滞后=真的所有标记”。仅对于这个查询，就需要创建一个全新的集群树。如果他更改查询“向我显示其区域 > K.0001 和 lags=true 的所有标记”，则必须创建新树。我不想为每个用户的查询计算这样的树，也不想将它存储在内存中（不确定是否可能）。

问题：

```
What approach should be taken?
given the complexity of calculation X # of markers 
(fields inside) X speed factor. 
I was thinking that there's some sort of way to use  the 
"all-in" clusters calculation(**), as it gives me ALL the markers and clusters and from 
there to manipulate in some elegant way. 
```

将要：

```
 - space-filling-curve (hilbert) can help? how?  
 - DB approach (what DBand why?)
 - k-d tree ? 
```

整个想法是预先处理大量数据和计算，以便用户可以操作它而无需在他的一侧或服务器端计算它（因此客户端集群不是解决方案，融合表也是如此）

代码示例非常受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:37:54.220

Hadoop 适合*预处理*，而不适合在线（“实时”）操作。

希尔伯特曲线和 kd 树比常规的网格文件/四叉树更复杂，实际上对您的用处更少。优化树以完全匹配您的可视化缩放级别！然后你可能根本不做任何“聚类”就离开了，而只是可视化适当的四叉树单元。

毕竟，您的空间数据只有 2d，所以所有 2d 方法都可以正常工作。而且您非常了解值范围，因为地球不会改变大小。这就是谷歌地图如此之快的原因：他们使用可以缓存、高效服务和预生成的固定图块。

鉴于您可能不需要 ACID 和事务以及这些高级功能，使用其中一种大肆宣传的 NoSQL 数据库似乎是合理的。

# sql-server - 字符串的 SQL Server 数据类型差异

> ID：11737230
> 
> 赞同：-1
> 
> 时间：2012-07-31T09:40:14.827
> 
> 标签：sql-server

我想知道 SQL Server 中存储字符串的不同数据类型之间的区别。

例如`ntext`, `nvarchar(X)`,`varchar`等`nvarchar(max)`。

在灵活性、资源使用和性能方面有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:42:40.037

*   所有字符串类型`N`都是**unicode** - 每个字符 2 个字节，将存储西里尔字母、亚洲字母、阿拉伯语、希伯来字母等内容 - 而没有前导`N`的那些不是 unicode（仅正确存储西欧/ASCII 字符）

*   `TEXT`并且`NTEXT`已弃用 - 不再使用它们 -改为使用 - 有关详细信息，`(N)VARCHAR(MAX)`请参阅[有关该主题的相关 MSDN 文档](http://msdn.microsoft.com/en-us/library/ms187993.aspx)

*   `NVARCHAR(X)`是一个“正常”字符串，最大值。8000 字节数据（4000 个 Unicode 或 8000 个非 Unicode 字符）- 存储在 SQL Server 的常规页面中

*   `NVARCHAR(MAX)`是一种特殊类型，最多 2 GB 的存储空间（10 亿个 Unicode 字符）——但它需要在存​​储中进行特殊处理，需要更多的努力，执行速度比常规字符串慢一些；**仅**在绝对需要时使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:45:57.700

请参阅下面的链接了解 nvarchar 和 varchar 之间的区别，然后选择最适合您的

[varchar 和 nvarchar 有什么区别？](https://stackoverflow.com/questions/144283/what-is-the-difference-between-varchar-and-nvarchar)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:11:46.577

对于普通英文字母使用 varchar，对于任何其他语言和外来字符使用 nvarchar。varchar 每个字符使用 1 个字节来存储，而 nvarchar 每个字符使用 2 个字节。

# sql - SELECT * 语句中的列顺序 - 保证？

> ID：11737232
> 
> 赞同：12
> 
> 时间：2012-07-31T09:40:19.103
> 
> 标签：sql, postgresql, sqlalchemy, ansi-sql

我正在使用 ORM (sqlalchemy) 从 PG 数据库中获取数据。我想避免在我手工制作的 SQL 语句中指定所有表列名称*。

到目前为止，我的假设是返回的列按照用于创建数据库表的 DDL 语句的顺序排列。到目前为止，这是可行的——但我想知道这是否只是运气，或者它是否在（ANSI）SQL 规范中得到了具体解决。

即ANSI SQL（因此可能是数据库）是否保证`SELECT *`语句中返回的列的顺序？

我使用 PostgreSQL 8.4 作为我的后端数据库

*   是的，我知道将手工制作的 SQL 语句与 ORM 一起使用会破坏 ORM 的目的，但需要必须...

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-31T09:48:11.007

`7.9 <query specification>`让我们考虑这里指定的 SQL 标准部分：

[http://www.contrib.andrew.cmu.edu/~shadow/sql/sql1992.txt](http://www.contrib.andrew.cmu.edu/~shadow/sql/sql1992.txt)

```
<query specification> ::=
          SELECT [ <set quantifier> ] <select list> <table expression>
[...]
<select list> ::=
            <asterisk>
          | <select sublist> [ { <comma> <select sublist> }... ]

[...]
Syntax Rules
1) Let T be the result of the <table expression>.
3) Case:
       a) [...]
       b) Otherwise, the <select list> "*" is equivalent to a <value
          expression> sequence in which each <value expression> is a
          <column reference> that references a column of T and each
          column of T is referenced exactly once. The columns are ref-
          erenced in the ascending sequence of their ordinal position
          within T. 
```

因此，换句话说，是的，SQL 标准指定要根据它们在`T`. 请注意，当您`<table expression>`包含多个涉及`JOIN .. USING`or`NATURAL JOIN`子句的表时，事情会变得有些棘手。但是，当从一个简单的表中进行选择时，假设顺序符合预期，您可能没问题。

`ordinal position within T`为了完整起见， for 表的含义在下面进一步解释`11.4 <column definition>`：

```
General Rules
     5) [...] The ordinal position included
        in the column descriptor is equal to the degree of T. [...] 
```

然后在`11.11 <add column definition>`(for `ALTER TABLE`statements)

```
General Rules
     4) [...] In particular, the degree of T
        is increased by 1 and the ordinal position of that column is
        equal to the new degree of T as specified in the General Rules
        of Subclause 11.4, "<column definition>". 
```

还有相当多的其他 SQL 语句和子句依赖于`ordinal positions`within的正式规范`<table expressions>`。一些例子：

```
13.8 <insert statement> 
     (when omitting the `<insert column list>`)
20.2 <direct select statement: multiple rows>
     (when `<sort specification>` contains an `<unsigned integer>`) 
```

尤其是 Postgres，它非常符合标准，所以如果你真的想要`SELECT *`，请继续！

# java - 获取特定标签的标签名称

> ID：11737233
> 
> 赞同：0
> 
> 时间：2012-07-31T09:40:23.987
> 
> 标签：java, xpath

使用 XPath。

我有这个文档：

```
<?xml version="1.0"?>
<root>
  <items>
    <item1>
      <tag1>1</tag1>
      <tag2>DFGGFDGF</tag2> 
      <tag3>3</tag3>
    </item1>

    <item2>
      <tag1>DFGD</tag1>
      <tag2>SDFSDFFSD</tag2>    
      <tag3>SDFSFDFS</tag3>
    </item2>
  </items>
</root> 
```

我想获取`item1`元素的标签名称。

现在我用它来获取标签值：

```
XPathExpression expr = xpath.compile("//"+ node_name +"/*/text()");
Object result = expr.evaluate(doc, XPathConstants.NODESET);
NodeList nodes = (NodeList) result;
for (int i = 0; i < nodes.getLength(); i++) {
  System.out.println(nodes.item(i).getNodeValue()); 
} 
```

我如何获得标签名称：`tag1`，，，？`tag2``tag3`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T10:05:20.450

像这样给

```
xpath.compile("//"+ node_name +"/*")

.......................

for (int i = 0; i < nodes.getLength(); i++) {
  System.out.println(nodes.item(i).getNodeName()); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T10:10:38.927

首先，不要在 XQuery 的末尾使用 text()。您需要节点本身。其次，不要取节点值，而是需要节点名称。

```
XPathExpression expr = xpath.compile("//"+ node_name +"/*");
Object result = expr.evaluate(doc, XPathConstants.NODESET);
NodeList nodes = (NodeList) result;
for (int i = 0; i < nodes.getLength(); i++) {
  System.out.println(nodes.item(i).getNodeName()); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T09:55:12.247

尝试`org.w3c.dom.Node#getNodeName()`获取节点的名称。

另请参阅[“org.w3c.dom.Node”](http://docs.oracle.com/javase/1.5.0/docs/api/org/w3c/dom/Node.html)

# .htaccess - Mod-rewrite 缩短图片链接

> ID：11737237
> 
> 赞同：1
> 
> 时间：2012-07-31T09:40:50.317
> 
> 标签：.htaccess, mod-rewrite

我有一个图片库，我想有一些更短的链接。

到目前为止，我有：

[http://site.com/up/fjr5Z](http://site.com/up/fjr5Z) <-这仅显示图像

[http://site.com/images.php](http://site.com/images.php) <-这显示了 html 页面中的所有图像

这是我的 .htaccess 文件，我所有的图片都在**http.//site.com/up/**

```
RewriteEngine on
RewriteRule ^img/([^/\.]+)/?$ images.php?id=$1 [L] 
```

我试图让图像像这样工作：**http.//site.com/fjr5Z**

我什至接近吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:05:39.760

看起来很接近，但你匹配的`img/`不是`up/`. 似乎这足以`/up/fjr5Z`重写为`/images.php?id=fjr5Z`：

```
RewriteRule ^up/([^/\.]+)/?$ /images.php?id=$1 [L] 
```

至于获取要重写的 url `http.//site.com/fjr5Z`，您需要确保您匹配的内容不会干扰其他内容。例如，如果您有重写`/post-title`to`/index.php?post=post-title`之类的规则，则必须有一种方法来区分**post-title**和**fjr5Z**。如果您不需要担心任何其他规则，您可以简单地尝试：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([A-Za-z0-9]+)/? /images.php?id=$1 [L] 
```

# javascript - Facebook 连接集成不再起作用

> ID：11737242
> 
> 赞同：1
> 
> 时间：2012-07-31T09:41:13.483
> 
> 标签：javascript, facebook

我成功地将 FBConnect 集成到我的应用程序中。连接和注册页面工作正常。

但是一段时间以来，当我点击 facebook 按钮时，我绑定的事件不再引发。

```
<script src="http://connect.facebook.net/fr_FR/all.js" ></script>
<script type="text/javascript">
//console integration
if(typeof console !== 'object')
console = {};
if((typeof console.debug) !== 'function'){
    if(typeof opera === 'object'){ 
        console = {
            debug : function(){return opera.postError(arguments);},
            info : function(){this.debug('[INFO] ',arguments);},
            log : function(){this.debug('[LOG] ',arguments);}
        };
    }
    else{ 
        console = {
            debug : function(){return true;},
            info : function(){return true;},
            log : function(){return true;}
        };
    }
}

/**
 * Fonction called to init and manage FB Connection
 */
handleFacebook();
$('#fb-button').click(function(){
    alert('ok');
    fbGetLoginStatus();
});

/**
 * 
 */
function handleFacebook() {
    if(!window.fbApiInit) {
        FB.init({appId: 'myAppId', xfbml: true, cookie: true});
        fbApiInit = true;
    }
}

function fbGetLoginStatus() {
    FB.getLoginStatus(function(response) {
        onStatus(response); // once on page load
        FB.Event.subscribe('auth.statusChange', onStatus); // every status change
    });
}

/**
* This will be called once on page load, and every time the status changes.
*/
function onStatus(response) {
    console.info('onStatus', response);
    if (response.status == 'connected') {
        console.info('User logged in');
        if (response.perms) {
            console.info('User granted permissions');
        }else{
            console.info('User has not granted permissions');
        }
        getAccountInfo();
    } else {
        console.info('User is logged out');
    }
}

/**
* This assumes the user is logged out, and renders a login button.
*/
function showLoginButton() {
    var button = '<fb:login-button perms="email" />';
    $('#fb-login-button').html(button);
    FB.XFBML.parse(document.getElementById('fb-login-button'));
}

function getAccountInfo() {
    FB.api(
        {
        method: 'fql.query',
        query: 'SELECT username, first_name, last_name, uid, email, sex  FROM user WHERE uid='+FB.getUserID()
        },
        function(response) {
            console.info('API Callback', response);
            var user = response[0];

            $('#usernamefb').val(user.username);
            $('#mailfb').val(user.email);

            $('#facebook-connect-form').submit();
        }
    );
}
</script>
<div id="fb-login-button">
    <fb:login-button perms="email" id="fb-button" />
</div>
<form method="post" action="/facebook-connect" id="facebook-connect-form">
    <input type="hidden" id="usernamefb" name="usernamefb"/>
    <input type="hidden" id="mailfb" name="mailfb"/>
</form> 
```

我注意到*$('#fb-button').click事件中的**警报*函数从未被调用。这里没有显示，但我在我的文件中包含了 jQuery 库。任何想法 ？

 *感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:55:50.183

Facebook改变了他们的按钮，我没有找到一种方法在他们改变之后将点击事件绑定到它。

我将我的网站更改为订阅加载时的 FB 事件。初始化 FB 时，您必须将选项“状态”设置为 false 以防止在初始化时自动登录状态检查！

```
function fbInit() {
        window.fbAsyncInit = function () {
            FB.init({
                appId: 'XXX',
                status: false,
                cookie: true,
                xfbml: true
            });

            //auth.statusChange
            FB.Event.subscribe('auth.authResponseChange', function (response) {
                if (response.status.indexOf('connected') != -1) {
                    // the user is logged in and has authenticated your
                    // app, and response.authResponse supplies
                    // the user's ID, a valid access token, a signed
                    // request, and the time the access token 
                    // and signed request each expire
                    var uid = response.authResponse.userID;
                    var accessToken = response.authResponse.accessToken;

                    //Handle the access token
                    jQuery.ajax({
                        url: 'token_handler.ashx',
                        type: 'POST',
                        data: "accessToken=" + accessToken,
                        success: function (msg) {

                        }
                    });

                } else if (response.status.indexOf('not_authorized') != -1) {
                    // the user is logged in to Facebook, 
                    // but has not authenticated your app
                } else {
                    // the user isn't logged in to Facebook.
                }
            });
        };
    (function (d) {
        var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) { return; }
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "//connect.facebook.net/en_US/all.js";
        ref.parentNode.insertBefore(js, ref);
    } (document));
} 
```*

# javascript - 向下滚动页面时如何添加计数器更新

> ID：11737244
> 
> 赞同：-1
> 
> 时间：2012-07-31T09:41:21.350
> 
> 标签：javascript, scroll, autoscroll, onscroll

向下滚动页面时如何添加计数器更新？我喜欢 chartbeat 的效果。我应该使用什么 jQuery 来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:59:50.310

有[scrollTop() 函数](http://api.jquery.com/scrollTop/)。您将事件处理程序绑定到文档上的“滚动”事件并将值放置在您想要的位置。

```
$(document).ready(function() {
  $(this).bind('scroll', function() {

    console.log($(this).scrollTop());
  });
}); 
```

# java - Java中的MongoDB聚合框架

> ID：11737245
> 
> 赞同：2
> 
> 时间：2012-07-31T09:41:29.573
> 
> 标签：java, mongodb

我有一个 MongoDB 集合，我需要在字段中找到每个不同的值，以及每个值出现的次数，有点像 SQL 中的 GROUP BY 和 COUNT 函数。

例如

```
Item name ------ count

Soap ----------- 7
Apples --------- 4
Tin Foil ------- 5 
```

我是 MongoDB 的新手，还没有真正找到任何可以帮助我解决这个问题的文档。到目前为止，我已经能够返回不同值的列表，但不能返回每个值的计数。

我需要通过 Java MongoDB 库来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-14T18:04:20.043

```
db.item.aggregate([
{
    $group: {
        _id: "$name",
        count: {
            "$sum": 1
        }
    }
},
{
    $project: {
        _id: 0,
        name: "$_id",
        count: 1
    }
}
]).pretty(); 
```

一个java实现将是这样的

```
 final MongoClient mongoClient = new MongoClient();
    final DB db = mongoClient.getDB("DB_NAME");
    final DBCollection collection = db.getCollection("item");

    final DBObject groupIdFields = new BasicDBObject("_id", "$name");

    groupIdFields.put("count", new BasicDBObject("$sum", 1));
    final DBObject group = new BasicDBObject("$group", groupIdFields);

    final DBObject projectFields = new BasicDBObject("_id", 0);
    projectFields.put("name", "$_id");
    projectFields.put("count", 1);
    final DBObject project = new BasicDBObject("$project", projectFields);

    final AggregationOutput aggregate = collection.aggregate(group, project); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T10:30:03.020

您可以通过MongoDB Java 驱动程序的[DBCollection 类](http://api.mongodb.org/java/current/com/mongodb/DBCollection.html)使用[count()](http://api.mongodb.org/java/current/com/mongodb/DBCollection.html#count%28%29)、[distinct()](http://api.mongodb.org/java/current/com/mongodb/DBCollection.html#distinct%28java.lang.String%29)和[group()](http://api.mongodb.org/java/current/com/mongodb/DBCollection.html#group%28com.mongodb.GroupCommand%29)命令进行[简单的聚合。](http://www.mongodb.org/display/DOCS/Aggregation)

对于当前 MongoDB (2.0.6) 生产版本中的更高级查询，您可以通过[MapReduceCommand 类使用](http://api.mongodb.org/java/current/com/mongodb/MapReduceCommand.html)[Map/Reduce](http://www.mongodb.org/display/DOCS/MapReduce)。

在 MongoDB 2.2（目前正在测试发布）中有一个新的[聚合框架](http://docs.mongodb.org/manual/applications/aggregation/)特性。Java 驱动程序的 2.9.0 版本将包含一个[聚合助手](https://jira.mongodb.org/browse/JAVA-590)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T09:46:34.647

我不是 mongodb 专家，但它似乎是使用[MongoDB MapReduce 功能](http://www.mongodb.org/display/DOCS/MapReduce)执行聚合或查看有关[MongoDB 聚合的](http://www.mongodb.org/display/DOCS/Aggregation)链接的好地方。

相关问题：

*   [MongoDb 聚合](https://stackoverflow.com/questions/10387592/mongodb-aggregation)
*   [http://www.quora.com/How-do-you-write-aggregate-queries-in-MongoDB](http://www.quora.com/How-do-you-write-aggregate-queries-in-MongoDB)
*   [https://groups.google.com/d/topic/mongodb-user/s11V8KaZcAE/discussion](https://groups.google.com/d/topic/mongodb-user/s11V8KaZcAE/discussion)

# html - Css 没有应用 100%

> ID：11737246
> 
> 赞同：-1
> 
> 时间：2012-07-31T09:41:34.287
> 
> 标签：html, css

以下是我的 [URL]，其中仅在滑块的第一个项目符号上未 100% 应用 CSS。我在表格中以纯 html 格式创建了它的内容，然后将其复制到实际站点中，在纯 html 中一切正常，但不是在应该正常工作的地方。我试图让左列图像垂直顶部对齐，试图在之后放置行空间`awarded most innovative in LTC`并使整个表格居中对齐，但不知道为什么没有 100% 应用 css。请帮忙。

`Note:I worked in inline styling`

[网址]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:23:41.780

居中对齐的 div

```
div.myDiv {
    width: 500px;
    margin: 0 auto;
} 
```

您定义 div 的宽度。然后使用边距自动。

# orm - ColdFusion ORM：我可以指定加载时传递给相关实体的初始化参数吗？

> ID：11737250
> 
> 赞同：4
> 
> 时间：2012-07-31T09:41:56.463
> 
> 标签：orm, coldfusion

假设我有一个**Page**实体，它可以有一组关联的**Document**实体：一个简单的一对多关系。

```
<cfcomponent entityName="Page" persistent="true" table="pages">

  <!--- A Page can have many Documents --->
  <cfproperty name="document" fieldType="one-to-many" cfc="Document" fkColumn="pageID" inverse="true">

</cfcomponent> 
```

但是，每个 Document 都需要知道其文件系统目录的路径，并且该属性的值可以根据上下文而变化，因此它不是持久的，需要在实例化时传入。

```
<cfcomponent entityName="Document" persistent="true" table="documents">

  <!--- This value needs to be set so the document knows its location --->
  <cfproperty name="directoryPath" persistent="false">

  <!--- Many Documents can belong to one Page --->
  <cfproperty name="page" fieldType="many-to-one" cfc="Page" fkColumn="pageID">

  <cffunction name="init" output="false">
    <cfreturn this/>
  </cffunction>

</cfcomponent> 
```

如果我手动加载页面的文档数组或使用 Bean 工厂，我可以将**directoryPath**变量指定为传递给 Document init() 方法的参数。但是在这里，文档的加载是由 Hibernate 自动完成的。

当 ORM 加载相关对象时，有没有办法将 init 参数传递给相关对象？

我知道一旦加载并指定目录，我就可以遍历文档，这也许是最佳实践，但在 init 上将值传递给每个文档似乎更有效。可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T15:22:11.193

查看文档似乎没有办法按照您的要求进行操作。

我建议的一件事是，您可以在 Page 对象中设置一个属性并从 Document.xml 访问它，而不是遍历文档来设置属性。

因此，在加载 Page 后，您将拥有类似`Page.setDocumentPath(documentPath);`.

然后在显示文档时，您可能会有类似`document.getPage().getDocumentPath();`.

# php - PHP、shell_exec 和输入

> ID：11737251
> 
> 赞同：2
> 
> 时间：2012-07-31T09:41:58.197
> 
> 标签：php, input, shell-exec

shell_exec 是否可以执行给定的命令，其中初始命令会要求动态输入，然后是基于输入本身的命令。

我已经研究了几个小时来寻找答案，但我似乎找不到我要找的东西。

我有一个类似于下面示例的想法的要求，任何帮助将不胜感激，因为

`$x = shell_exec("read -p 'Enter your name : ' x; echo 'Your name is' : $x");`

回显 x 输出：

*你的名字是*

如您所见，我正在运行多个命令，但我不知道可以在输入的字符串命令中插入的位置。

注意：我试着做

`$x = shell_exec("echo 'Foo' | read -p 'Enter your name : ' x; echo 'Your name is :' $x");`

`echo $x;`

输出是：

*你的名字是 ：*

我期待像

**你的名字是：傅**

很明显，有些不对劲。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:32:04.700

我在`read`其他时候遇到过和你一样的问题。如果在终端执行同一行，结果是一样的，所以这不是php问题，而是shell问题：

```
$ echo 'Foo' | read -p 'Enter your name : ' x; echo "Your name is : $x"
Your name is : 
```

如果将`read`内部包装 a `while .. do .. done`，则一切正常：

```
$ echo 'Foo' | while read -p 'Enter your name : ' x; do echo "Your name is : $x" ; done
Your name is : Foo 
```

我不知道为什么会这样。

您也可以尝试使用[`proc_open`](http://php.net/proc-open)和类似的，您将获得对输入/输出流的更多控制，但我不知道它们是否能解决这个`read`问题。

# c# - 通过 HTTP Post 发送表格复选框值数组

> ID：11737252
> 
> 赞同：0
> 
> 时间：2012-07-31T09:42:04.003
> 
> 标签：c#, asp.net, forms, http-post

我有这张表，我用它创建动态复选框（记录的数量可能/会有所不同），我的想法是我可以在任何表行上选择一个复选框并“发送”这些记录。

我想将一组 ID 发送到不同的页面进行处理 - 但我非常卡住！

这是我的表格/表格代码

```
<form action="processingpage.aspx" method="post">
  <asp:Repeater ID="GroupList" runat="server">
    <HeaderTemplate>
       <table id="grouptable" class="table"> 
         <thead>
            <tr>
              <th>Broadcast</th>
              <th>ID</th>
              <th>Name</th>
              <th>Last Modified</th>
              <th>Actions</th>
            </tr>
        </thead>
      <tbody>
    </HeaderTemplate>
    <ItemTemplate>
        <tr>
          <td>
            <input type="checkbox" name="BroadcastSelect[]" value="<%# Eval("Group_ID") %>"</input></td>
          <td><%# Eval("Group_ID") %></td>
          <td><%# Eval("DESC") %></td>
          <td><label id="test">hello</label></td>
          <td><a class="btn btn-info" href="<%# Eval("gURL") %>">Edit</a>/td>
        </tr>
    </ItemTemplate>
    <FooterTemplate>
         </tbody>
       </table>
    </FooterTemplate>
  </asp:Repeater>
  <input class="btn primary" type="submit" value="Broadcast"/>
</form> 
```

我认为这可以发送数组，因为我设法通过 Request.in 看到了这个

`BroadcastSelect[]TESTGROUP` （这是我发送的项目之一）

但是在我的接收页面上，除了尝试过的空白文本外，我什么也没有

```
Label1.Text = Page.Request.Form["BroadcastSelect[0]"]; 
```

和

```
Label1.Text = Page.Request.QueryString["BroadcastSelect[0]"]; 
```

但不打印任何值。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T10:00:32.310

我认为问题在于无法索引`<input name="BroadcastSelect[]">`through`Request.Form`或`Request.QueryString`.

如果您在代码中设置断点，您将看到 Request.Form 对象将`Request.Form["BroadcastSelect[]"]`作为可用项之一，这将返回一个 CSV 值列表。

所以尝试使用它来代替......

```
string broadcastSelect = Request.Form["BroadcastSelect[]"];
if (broadcastSelect != null)
{
   string[] broadcastSelectParts = broadcastSelect.Split(',');
   Label1.Text = broadcastSelectParts[0];
} 
```

显然，块中的代码也可以减少到一行，但是如果您想要第一项以外的内容，请检查您是否没有选择“越界”索引...

```
Label1.Text = broadcastSelect.Split(',')[0]; 
```

# c# - CodedUI 测试不等待控件存在

> ID：11737254
> 
> 赞同：2
> 
> 时间：2012-07-31T09:42:11.003
> 
> 标签：c#, visual-studio-2010, testing, coded-ui-tests

我正在等待控件存在，但在按钮存在之前测试失败。

它给出了错误：`The control is not available or not valid`

我正在使用的代码是：

```
uIOKButton.WaitForControlExist(2000000);

// Click 'OK' button
Mouse.Click(uIOKButton, new Point(46, 19)); 
```

超时，即使我将其设置为 3 小时，也会在 30 分钟后超时。所以超时没有按预期的方式工作。反正周围有吗？

除了增加超时之外，还有什么方法可以阻止它失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:00:45.383

我是这样做的：

```
while (!uIItemComboBox.Exists)
        {
            System.Threading.Thread.Sleep(1000);
        }
uIItemComboBox.SelectedItem = this.MyComboBox.UIItemComboBoxSelectedItem; 
```

我敢肯定有更好的方法，但它的工作原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T02:28:34.017

You can use while loop instead of if statement

The code looks something like this

```
loopcyle = 1;
While(!uIOKButton.WaitForControlExist(2000) && loopcycle <=20)
{
    // Click 'OK' button
    Mouse.Click(uIOKButton, new Point(46, 19));
    loopcycle ++;
    break;
} 
```

Thanks, Karthik KK

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:44:17.630

我建议您添加如下检查：

```
int count = 1;
while (btnExists() == false){ 
    if (count > 1000) {
        //fail test or say that btn is not available
     }
    count ++;
    wait (1);
} 
```

您不必等待超过所需时间。只要 btn 可用，测试就会继续进行。但请确保将“count”设置为在某个时间有一个退出点，以防 btn 永远不会出现

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T01:01:11.440

您最初所做的是正确的方法。但 30 分钟后会弹出默认测试超时。

在解决方案项目文件夹下的测试解决方案中找到 local.testsettings

双击它，转到超时并删除 30 分钟的默认超时。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-04T06:35:10.460

![](../Images/61f961cbe4334c49550b868af63d82a4.png)

使用`Timeout`属性使任何特定的测试无限。如果您知道您的测试将运行到那个时间，您也可以指定某个时间。

```
[Timeout(TestTimeout.Infinite)] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-07T17:29:06.030

试试这个，在找到控件 ID 之前，对我有用，但这需要一些时间。所以如果你想早点加载可能会寻找替代方案。

```
BrowserWindow window = new BrowserWindow();
window.WaitForControlExist(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-19T07:27:02.913

您可能还想尝试`WaitForControlReady`。

# html - 为什么我的 Chrome 和 Firefox 不显示重定向的 HTM 文档的图像？

> ID：11737257
> 
> 赞同：0
> 
> 时间：2012-07-31T09:42:14.937
> 
> 标签：html, asp.net-mvc, firefox, google-chrome, ms-word

我有一个用 ASP.NET MVC 3 制作的产品网站，需要公开一个用 Word 制作的文档。我将 Word 文档导出为 HTM 并使用...重定向视图

```
public ActionResult OnLineProductManual()
{
    return Redirect(Url.Content("~/Content/Product_DocHtml/Product_Manual.htm")); 
} 
```

在 IE9 上一切正常，但图像在 Chrome 和 Firefox 上不显示。在内部（在 htm 文件中）图像被引用为...

```
<v:imagedata src="Product_Manual_files/image009.png"
 o:title="im_ico_64_v4" cropbottom="1f"/> 
```

如何在这些主要浏览器中显示图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T10:04:59.963

不要使用 VML。Firefox、Chrome 或任何非微软浏览器确实不支持 VML。

要么用对应的 html 手动替换 vml 标签，要么找到另一种方法来创建你的 html 文件。我建议最后一种方法。

对于您拥有 word doc 的在线手册，PDF 似乎是一个不错的解决方案。

# design-patterns - 为模型提供简单 POCO 的论据

> ID：11737261
> 
> 赞同：2
> 
> 时间：2012-07-31T09:42:24.950
> 
> 标签：design-patterns, domain-driven-design

我是一名程序员，我认为我在 OO 方面受过良好的教育。我相信 POCO (C#) 和只有 get/set 方法来封装数据的模型。3层域模型。

我正在寻找支持在服务层中具有简单域模型和所有业务逻辑以及用于数据访问的 DAL 的价值的文档。

马丁·福勒：

[http://martinfowler.com/eaaCatalog/domainModel.html](http://martinfowler.com/eaaCatalog/domainModel.html)

[http://martinfowler.com/bliki/AnemicDomainModel.html](http://martinfowler.com/bliki/AnemicDomainModel.html)

是说（贫血）域模型没有价值，并且要使其具有价值，它必须处理总线逻辑或/和数据 CRUD 操作。我需要一些对 Martin Fowler 有反驳意见的好书。（这不是解雇 Martin Fowler 的情况，我尊重这项工作。我希望更好地了解我们在做什么以及为什么？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T17:22:51.793

你可以从……福勒本人那里找到反驳。

[PoEAA](https://rads.stackoverflow.com/amzn/click/com/0321127420)，页。110、*交易脚本*：

> 无论您变得多么顽固，都不要排除事务脚本。那里有很多简单的问题，一个简单的解决方案将使您更快地启动和运行。

事务脚本并不完全是您描述的那种服务（它可能不使用域对象，甚至是贫血的对象），但它非常接近。

另外，请注意 POCO 的概念并不假设对象的愚蠢或贫血。您可以拥有包含行为的富域 POCO。POCO/POJO 描述了一个简单的本机对象，而不是用注释或属性修饰的对象，或者从框架继承特殊类的对象，通常用于持久性目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T07:10:43.553

引用 Fowler，[贫血领域模型](http://martinfowler.com/eaaCatalog/transactionScript.html)：

> 本质上，贫乏领域模型的问题在于它们承担了领域模型的所有成本，而没有产生任何好处。

成本包括将您的对象映射到数据库以及您在设计（贫乏的）域模型时所付出的努力。如果您决定不需要 DDD 的好处，并且与贫血模型相关的成本是可以接受的，那么您就有了反驳的理由。

但是，请确保您的贫血模型 + 服务 + DAL（+UI？）比带有一些[事务脚本的](http://martinfowler.com/eaaCatalog/transactionScript.html)[活动记录](http://martinfowler.com/eaaCatalog/activeRecord.html)应用程序（Ruby on Rails？Grails？）便宜。

当我们想要*简化*一个复杂的问题，而不是“复杂化”一个简单的问题时，通常会应用领域驱动设计。再次引用[福勒](http://martinfowler.com/bliki/AnemicDomainModel.html)：

> 领域模型并不总是最好的工具。

分析您的需求，选择合适的架构并交付您的应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T13:05:57.230

看一下[DCI 架构](http://www.artima.com/articles/dci_vision.html)，它将数据与行为分开，试图通过拆分导致彼此变化率不同的部分来控制软件演化。它还使用角色或特征的概念来实现将数据和行为重新组合在一起的所需功能。

有一本书解决了强调 DCI 的更广泛的架构主题：James Coplien*的《敏捷软件开发的精益架构》 。*

# c++ - 'clock_gettime' 和 'gettimeofday' 的奇怪计时结果

> ID：11737263
> 
> 赞同：4
> 
> 时间：2012-07-31T09:42:36.940
> 
> 标签：c++, linux, sleep, timing, gettimeofday

我想检查 的可靠性`clock_gettime`，使用不推荐`gettimeofday`的作为参考，但有时会得到奇怪的结果：

```
#include <stdio.h>
#include <sys/time.h>
#include <iostream>

void clock_gettime_test()
{
    struct timespec tp;
    clock_gettime(CLOCK_MONOTONIC_RAW, &tp);
    long a = tp.tv_nsec;
    usleep(250000);
    clock_gettime(CLOCK_MONOTONIC_RAW, &tp);
    long b = tp.tv_nsec;
    printf("clock_gettime (%ld - %ld): %lf msec\n", b, a, (b - a)/1000000.0);
}

void gettimeofday_test()
{
    struct timeval tv;
    gettimeofday(&tv, NULL);
    long a = tv.tv_usec;
    usleep(250000);
    gettimeofday(&tv, NULL);
    long b = tv.tv_usec;
    printf("gettimeofday (%ld - %ld): %lf msec\n", b, a, (b - a)/1000.0);
}

int main()
{
    clock_gettime_test();
    gettimeofday_test();
    return 0;
} 
```

构建和运行，我有时会得到正确的结果：

```
$ g++ -Wall play.cpp -lrt && ./a.out
clock_gettime (392441961 - 142299879): 250.142082 msec
gettimeofday (592906 - 342644): 250.262000 msec 
```

但有时，我没那么幸运：

```
clock_gettime (155321165 - 905000848): -749.679683 msec
gettimeofday (352232 - 101938): 250.294000 msec 
```

甚至：

```
clock_gettime (947857371 - 697373625): 250.483746 msec
gettimeofday (225208 - 974908): -749.700000 msec 
```

我在 i686 和 amd64 上都试过了，得到了类似的结果。我也试过`nanosleep`了，结果同样悲惨。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T09:46:44.710

您只是在比较 的`tv_nsec`成员`struct timespec`，而您还应该比较`tv_sec`成员：

```
double msec = ((tpb.tv_sec - tpa.tv_sec) * 1000.0)
            + ((tpb.tv_nsec - tpa.tv_nsec) / 1000000.0); 
```

同样，您应该比较`tv_sec`和的`tv_usec`成员`struct timeval`以获取经过的时间：

```
double msec = ((tvb.tv_sec - tva.tv_sec) * 1000.0)
            + ((tvb.tv_usec - tva.tv_usec) / 1000.0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:56:06.113

来自[Unix、C 和 C++ 函数参考](http://rabbit.eng.miami.edu/info/functions/time.html)：

> timeval 有两个组件，都是整数。一（称为 tv_sec）正是时间将返回的值，即自 1970 年 1 月 1 日以来以秒为单位的时间。另一个（称为 tv_usec）是该秒的微秒数。

因此，tv_usec 将每秒重置一次。这就是为什么你会得到这个结果。考虑到秒数，您可能会有 1000 毫秒 - 749.679683 毫秒 ~ 250 毫秒。

# html - 什么是默认列表样式 (CSS)？

> ID：11737266
> 
> 赞同：99
> 
> 时间：2012-07-31T09:42:41.660
> 
> 标签：html, css, html-lists

在我的网站上，我使用 reset.css。它将这个添加到列表样式中：

```
ol, ul {
    list-style: none outside none;
}
html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, font, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td {
    background: none repeat scroll 0 0 transparent;
    border: 0 none;
    font-size: 100%;
    margin: 0;
    outline: 0 none;
    padding: 0;
    vertical-align: baseline;
} 
```

问题是所有列表样式都设置`NONE`为此。我只想恢复网站子页面上所有列表的原始列表样式（默认）（中的所有列表`.my_container`）。

`list-style-type`当我尝试设置时，类似的东西`inherit`不会仅针对此 CSS 属性继承浏览器的默认样式。

**有没有办法在不修改reset.css的情况下继承某些属性的原始浏览器样式？**

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2012-07-31T09:47:27.610

我曾经设置这个 CSS 来删除重置：

```
ul { 
   list-style-type: disc; 
   list-style-position: inside; 
}
ol { 
   list-style-type: decimal; 
   list-style-position: inside; 
}
ul ul, ol ul { 
   list-style-type: circle; 
   list-style-position: inside; 
   margin-left: 15px; 
}
ol ol, ul ol { 
   list-style-type: lower-latin; 
   list-style-position: inside; 
   margin-left: 15px; 
} 
```

编辑：当然有一个特定的课程......

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-04-18T00:12:55.977

我认为这实际上是您正在寻找的：

```
.my_container ul
{
    list-style: initial;
    margin: initial;
    padding: 0 0 0 40px;
}

.my_container li
{
    display: list-item;
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-12-17T09:53:14.377

根据文档，大多数浏览器将显示`<ul>`,`<ol>`和`<li>`具有以下默认值的元素：

**[UL](https://www.w3schools.com/tags/tag_ul.asp)或[OL](https://www.w3schools.com/tags/tag_ol.asp)标签的默认 CSS 设置：**

```
ul, ol { 
    display: block;
    list-style: disc outside none;
    margin: 1em 0;
    padding: 0 0 0 40px;
}
ol { 
    list-style-type: decimal;
} 
```

**[LI](https://www.w3schools.com/tags/tag_li.asp)标签的默认 CSS 设置：**

```
li { 
    display: list-item;
} 
```

**样式嵌套列表项也是：**

```
ul ul, ol ul {
    list-style-type: circle;
    margin-left: 15px; 
}
ol ol, ul ol { 
    list-style-type: lower-latin;
    margin-left: 15px; 
} 
```

**注意：**如果我们将上述样式与类一起使用，结果将是完美的。另请参阅不同[的列表项](https://www.w3schools.com/css/css_list.asp)标记。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-12-22T18:58:18.010

[http://www.w3schools.com/tags/tag_ul.asp](http://www.w3schools.com/tags/tag_ul.asp)

```
ul { 
    display: block;
    list-style-type: disc;
    margin-top: 1em;
    margin-bottom: 1em;
    margin-left: 0;
    margin-right: 0;
    padding-left: 40px;
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-07-31T13:50:28.347

你不能。每当应用任何将属性分配给元素的样式表时，对于元素的任何实例，都无法获取浏览器默认值。

reset.css 的（有争议的）想法是摆脱浏览器默认设置，以便您可以从干净的办公桌开始自己的样式。没有任何版本的 reset.css 可以完全做到这一点，但就他们所做的而言，使用 reset.css 的作者应该*完全*定义渲染。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-12-17T18:46:39.980

未来的答案：CSS 4 可能包含 revert 关键字，它将属性恢复为它从用户代理样式表或用户样式（或从父级继承的值，如果存在）具有的初始值[[来源](https://developer.mozilla.org/en-US/docs/Web/CSS/revert)]。

在撰写本文时，只有 Safari 支持此功能 -[请在此处](http://caniuse.com/#search=revert)查看有关浏览器支持的更新。

在您的情况下，您将使用：

```
.my_container ol, .my_container ul {
    list-style: revert;
} 
```

另请参阅[this other answer](https://stackoverflow.com/a/36256886)了解更多详细信息。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-31T09:52:39.900

您正在重置第二个 CSS 块中所有元素的边距。默认边距为 40px - 这应该可以解决问题：

```
.my_container ul {list-style:disc outside none; margin-left:40px;} 
```

# mysql - 在 MySQL 中简明地查找不到 6 个月前的行

> ID：11737273
> 
> 赞同：4
> 
> 时间：2012-07-31T09:43:15.903
> 
> 标签：mysql, date

我试图在我的表中查找 6 个月前和今天之间的条目。这是我当前正在运行的查询：

```
WHERE (DATE(l.date_fin) BETWEEN DATE(DATE_ADD(NOW(), INTERVAL -6 MONTH)) AND CURDATE()) 
```

但是，它对我来说并不正确：感觉有一种更简洁和/或更快的方法可以获得与此查询相同的结果。有没有这样的方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-31T10:01:41.917

这应该足以得到你想要的：

```
WHERE l.date_fin > CURRENT_DATE() - INTERVAL 6 MONTH; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T09:59:09.093

这样的事情怎么样？

```
SELECT l.date_fin FROM table WHERE TIMESTAMPDIFF(MONTH,l.date_fin,NOW()) < 6 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T10:45:07.700

简单的方法是：

```
WHERE DATE(l.date_fin) BETWEEN DATE_SUB(CURRENT_DATE, INTERVAL 6 MONTH) AND CURRENT_DATE; 
```

如果您在列上有索引，`date_fin`那么为了获得最佳性能，您可以使用：

```
WHERE l.date_fin BETWEEN CAST(DATE_SUB(CURRENT_DATE, INTERVAL 6 MONTH) AS DATETIME) AND
    DATE_SUB(CAST(DATE_SUB(CURRENT_DATE, INTERVAL 1 DAY) AS DATETIME), INTERVAL 1 MINUTE); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T10:37:56.547

```
SELECT l.date_fin FROM table WHERE l.date_fin between current_date and  current_date+interval -6 month 
```

# wcf - 嵌套尝试/捕获。好吗？

> ID：11737276
> 
> 赞同：0
> 
> 时间：2012-07-31T09:43:35.540
> 
> 标签：wcf, web-services, exception-handling, refactoring, try-catch

此代码在 BackgroundWorker 的 DoWork 事件处理程序中调用，我正在创建一个 WCF 客户端并在 try 块中使用它，如果有异常我想在从处理程序返回之前中止并重试 5 次。

```
 private void WorkerDoWork(object sender, DoWorkEventArgs e)
    {            
        var mmc = new ServiceClient();

        try
        {
            e.Result = mmc.SubmitData(measure);
        }
        catch (Exception)
        {
            mmc.Abort();

            mmc = new ServiceClient();

            var counter = 0;

            while ((bool)e.Result == false && counter++ < 5)
            {
                try
                {
                    e.Result = mmc.SubmitData(measure);
                }
                catch (Exception)
                {
                    mmc.Abort();
                    mmc = new ServiceClient();
                }
            }
        }
        finally
        {
            if (mmc.State == CommunicationState.Faulted)
            {
                mmc.Abort();
            }
            else
            {
                mmc.Close();
            }
        }
     } 
```

我对代码不是很满意，感觉它有些可疑！特别是嵌套的 try/catch。

这段代码可以吗？还是我应该重构它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T09:55:54.317

是的，我同意盲目地锤击 Web 服务是问题所在。

很高兴知道您可以处理哪些可能的异常。

看起来您只是在处理无法访问的端点，而您可能会收到有关数据格式、类型、限制、限制、身份验证失败、帐户使用限制命中等任何信息的警告！

但是一切都被视为重试可以修复它，如果没有，它就坏了！

关于遇到的问题的一些报告怎么样？

作为一个优秀的程序员，你应该找出在什么情况下会抛出什么异常，并尽可能以适当的方式处理它们。
如果您无法处理它们，则将它们报告给日志记录或用户（如果它是交互式的）。

# c# - 为什么输入超出范围异常时出现错误？

> ID：11737280
> 
> 赞同：-2
> 
> 时间：2012-07-31T09:43:36.907
> 
> 标签：c#, c++, algorithm, logic

```
int bNum=3;
int aNum=3;
for (int i = 0; i < bNum; i++)
        {
            for (int j = 0; j < aNum; j++)
            {
                b[i] += a[j];
                b[i + 1] += a[j + 3];
                b[i + 2] += a[j + 6];
            }
        } 
```

我基本上希望发生以下情况：

```
b[0]=a[0]+a[1]+a[2];
b[1]=a[3]+a[4]+a[5];
b[2]=a[6]+a[7]+a[8]; 
```

我的逻辑有什么问题？

哈哈！哎呀！我困倦的眼睛正在解释这个愚蠢的问题。我看到每次迭代都会计算多次。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T09:45:56.077

无论是哪种语言，您都需要为 b 创建常量索引，为 a 创建变量索引

```
 for (int j = 0; j < aNum; j++)
        {
            //here is loop-unrolling for b
            b[0] += a[j];
            b[1] += a[j + 3];
            b[2] += a[j + 6];
        }

  for(k=0;k<max;k++)
  {
  for (int j = 0; j < aNum; j++)
        {
            //without loop-unrolling
            b[k] += a[j+k*3];

        }
   } 
```

我将“k”循环放在外面，让它尽可能连续地读取 a[]。您可以在内部制作“k”循环，但它会读取 a[] 从这里跳到那里然后再次回到这里再次跳跃，这使它变慢。虽然这不是向量：P 我只是用它来填充空间

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T09:49:25.690

这个问题有点矛盾。两个数组的*长度*相等，但要求不相等。

*假设***requeirement**是正确的，您可以执行以下操作

对于每个`b`元素，都有*接下来*3 个元素的**总和***`a`*

 *```
int bNum=3;    
int aIndex = 0;
for (int i = 0; i < bNum; i++)
{
   for (int j = 0; j < 3; j++)      
       b[i] += a[aIndex ++];

} 
```

这里没有任何数组边界控制。这自然只是一个*示例代码。*

如果这不是您要搜索的内容，请澄清。*

# javascript - 访问外部javascript中的隐藏字段

> ID：11737282
> 
> 赞同：1
> 
> 时间：2012-07-31T09:43:43.733
> 
> 标签：javascript, asp.net, html, ajax

我有一个包含隐藏字段的 aspx 页面

`<asp:HiddenField ID="hdnObjectID" runat="server" />`

我想在外部 javascript 文件中获取隐藏字段的值。我已使用此代码获取 hdnObjectID 的值

```
var objectID = parseInt($('#' + '<%= hdnObjectID.ClientID %>')[0].value); 
```

但它没有得到价值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:51:19.520

您无法评估 JavaScript 文件中的服务器代码。

如果您使用[静态客户端 ID](http://msdn.microsoft.com/en-us/library/system.web.ui.clientidmode.aspx)，您可以安全地硬编码外部文件中的值。否则，将其作为参数从页面传递给您的 JavaScript 方法。

```
// in file
function foo(clientId){
    var element = document.getElementById(clientId);
} 
```

* * *

```
<%-- in page markup -->
<script>
    foo("<%=hdnObjectId.ClientID %>");
</script>

// or, register in codebehind in OnPreRender (or where suitable) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-03T10:58:10.403

尝试这个：

```
Page.ClientScript.RegisterStartupScript(this.GetType(), "Assign", "assignValues('"+ hdnSchedule.Value +"');", true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T09:47:35.770

在您的 Javascript 中尝试以下操作： var objectID = parseInt(document.getElementById('hdnObjectID').value);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T09:48:44.420

如果服务器变量写在外部 JS 文件中，您将无法访问它。我已经在这个[线程中解释了这个原因](https://stackoverflow.com/questions/11711425/is-there-is-any-appropriate-solution-to-clear-server-side-session-on-client-side/11711578#comment15558088_11711578)

在您的 aspx 页面中，声明一个全局 javascript 变量

```
var hdnTextBox = <%= hdnObjectID.ClientID %>; 
```

在您的外部文件中使用此变量。

如果您使用的是 asp.net 4.0，则可以控制该控件的客户端 ID。有关如何控制它，请参见[此处](http://www.codeguru.com/csharp/article.php/c18225/Controlling-our-ClientIDs-in-ASPNET-4.htm)

另一种选择是在 ScriptManager.RegisterStartupScript 的帮助下从服务器端编写 JS。在您的 page_load 中编写以下代码

```
 ScriptManager.RegisterStartupScript(this, GetType(), "SomeName","SomeFunc("          +hdnObjectID.ClientID + ");", true); 
```

并在您的外部文件中

```
function SomeFunc(hdnObjectClientId){
 //
} 
```

并将客户端 ID 传递给函数

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T09:48:59.567

您不能`<%= hdnObjectID.ClientID %>`在外部 js 文件中使用，因为这些服务器端表达式不会在外部 js 文件中进行评估。

不过，您可以在页面中创建一个函数以从该隐藏字段中获取值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-31T10:41:40.977

试试这个在你的外部 javascript

```
var Controls = null; 
function readHidden(){alert(Controls.hdn_val.value);} 
```

* * *

在 .aspx 文件中

```
<script type="text/javascript" src="myexternal.js"></script> 
<script type="text/javascript"> 
Controls = {hdnfld = '<%=hdn_val.ClientID %>'};
</script> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-26T11:44:29.177

在 findElement javascript 方法中传递“hdnObjectID”以获取对象

```
<script type="text/javascript">

    function findElement(e) {
        var foundElement = null;

        var elements = window.document.forms[0].elements;

        for (i = 0 ; i < elements.length; i++) {
            if (elements[i].id.indexOf(e) > -1) {
                foundElement = elements[i];
                break;
            }
        }

        return foundElement;
    }
 </script> 
```

此方法将返回具有可能名称的对象。但是，如果有两个名称相似的对象，则此方法将需要修改

希望对你有帮助 ：）

# android - CheckBox 和 setOnItemClickListener 在 android 中不起作用

> ID：11737294
> 
> 赞同：0
> 
> 时间：2012-07-31T09:44:18.857
> 
> 标签：android, listview, checkbox, onitemclicklistener

我正在`ListView`使用`CheckBox`. 我只选择了一个`CheckBox`，但它使用`ScrollView`.

示例代码（此代码运行良好）

```
 holder.checkbox.setOnClickListener( new OnClickListener()
        {
            public void onClick( View v )
            {
                CheckBox cb = ( CheckBox ) v;
                if ( cb.isChecked() )
                {
                    test[position] = true;
                    holder.checkbox.setChecked(test[position]);
                }
                else
                {
                    test[position] = false;
                    holder.checkbox.setChecked(test[position]);
                }
            }
        });
        holder.checkbox.setChecked(test[position]); 
```

但是当我使用`setOnItemClickListener`它时它不起作用。

示例代码（此代码对我不起作用）

```
 listview.setOnItemClickListener( new OnItemClickListener() 
        {
            public void onItemClick( AdapterView<?> parent, final View v, final int position, long id ) 
            {
                holder.checkbox = ( CheckBox ) v.findViewById( R.id.lock_File_CheckBox );
                if ( holder.checkbox.isChecked() )
                {
                    test[position] = false;
                    holder.checkbox.setChecked(test[position]);
                }
                else
                {
                    test[position] = true;
                    holder.checkbox.setChecked(test[position]);
                }
            }
        });
        holder.checkbox.setChecked(test[position]); 
```

在哪里我会弄错。如何避免这种`CheckBox`选择。

你能帮我么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-01T14:27:08.400

要使您的列表视图具有焦点，请从项目本身中移除焦点。实例化列表视图后添加以下内容：

```
listview.setItemsCanFocus(false); 
```

然后将以下内容添加到您的 list_item.xml

```
<CheckBox
    android:id="@+id/lock_File_CheckBox"
    android:focusable="false"
    android:focusableInTouchMode="false"/> 
```

有了这个，你的`setOnItemClickListener()`意志就会被召唤

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T09:59:05.403

`onItemClick()`您可以使用`setTag()`and获取 CheckBox 内部的实例`getTag()`。您可以在方法中将 CheckBox 实例设置`getView()`为

```
convertView.setTag(R.id.check, viewHolder.checkbox); 
```

并使用里面的实例`onItemClick()`，

```
CheckBox checkbox = (CheckBox) v.getTag(R.id.check); 
```

如果您有任何进一步的查询，您可以检查[`my blog post`](http://www.lalit3686.blogspot.in/2012/06/today-i-am-going-to-show-how-to-deal.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T09:53:28.840

不要使用 onClick。使用 OnCheckedChange

```
holder.checkbox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
        @Override
        public void onCheckedChanged(CompoundButton compoundButton, boolean isChecked) {
            if (isChecked) {
                doSomethingWithCheckedState(compoundButton);
            } else {
                doSomethingWithUnCheckedState(compoundButton);
            }
        }
    }); 
```

请记住，CheckBox 继承自 CompoundButton 以实现 ICS 的开关兼容性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T10:05:12.540

列表项中的可聚焦视图可防止在`onListItemClick()`单击`ListActivity`列表项时触发。但是用`onListItemClick()`可以达到的效果`OnClickListener`。[在此处](https://stackoverflow.com/questions/1821871/android-how-to-fire-onlistitemclick-in-listactivity-with-buttons-in-list)阅读有关此的更多信息

# c# - 使用正则表达式将字典中的单词替换为链接

> ID：11737297
> 
> 赞同：0
> 
> 时间：2012-07-31T09:44:21.123
> 
> 标签：c#, html, regex, richtext

所以我有这个html：

```
<img src="images" alt="alt" />
alt <a href ="http://google/something">alt</a>
test hallo world monkey
<p>alt</p> 
```

和包含的字典

```
{alt, test, hallo, world, monkey, something} 
```

所以我需要一个正则表达式或其他方法来替换不在 A 标签或 img 标签内的单词我尝试了以下正则表达式：

```
(?<![a-zA-ZåøæÅØÆ])alt(?![a-zA-ZåøæÅØÆ])^*(?!=)$ 
```

[http://rubular.com/r/p52ezGmVHO](http://rubular.com/r/p52ezGmVHO)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:01:54.323

您可以使用正则表达式并对字母进行否定的前瞻和后视：

```
(?<![a-zA-Z])keyword(?![a-zA-Z]) 
```

在您的示例中，这将如下所示：

```
bodyText = Regex.Replace(bodyText, "(?<![a-zA-Z])" + article.headword + "(?![a-zA-Z])", "<a class=\"dic\" href=\"#\">" + article.headword + "</a>"); 
```

我的第一个意图是对空白字符进行积极搜索，但后来我想到了标点符号之类的东西，如果关键字有 .,!? 最后，对吧？因此，前瞻和后瞻本质上是检查关键字之前或之后的内容，而无需替换这些内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:24:53.917

这就是我最终做的

```
var regex = new Regex("(?<![a-zA-Z" + SpecialChars + "])" + article.headword + "(?![a-zA-Z" + SpecialChars + "])+(?!==)");

bodyText = regex.Replace(bodyText, "<a href=\"#dic\">" + headword + "</a>"); 
```

这只会替换第一个

# jqgrid-asp.net - 模型中的编译错误 - JQGRID ASP.NET MVC

> ID：11737299
> 
> 赞同：0
> 
> 时间：2012-07-31T09:44:28.860
> 
> 标签：jqgrid-asp.net

我想使用 JQGrid 实现 CRUD 操作。我正在从这里学习教程。

[JqG​​rid](http://www.trirand.net/demoaspnetmvc.aspx)。

我使用 VS 2010 添加了一个新的 MVC3 项目。我已将名为**OrdersJqGridModel**的模型添加到项目的模型文件夹中。我没有更改默认文件夹布局。

这是它在模型中看到的代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using Trirand.Web.Mvc;
using System.Web.UI.WebControls;

namespace JQGridMVCExamples.Models
{
    public class OrdersJqGridModel
    {
        public JQGrid OrdersGrid { get; set; }

        public OrdersJqGridModel()
        {            
            OrdersGrid = new JQGrid
                             {
                                 Columns = new List() //using the generic type System.Collections.Generic.List<T> requires 1 type arguments- **ERROR HERE**
                                 {
                                     new JQGridColumn { DataField = "OrderID", 
                                                        // always set PrimaryKey for Add,Edit,Delete operations
                                                        // if not set, the first column will be assumed as primary key
                                                        PrimaryKey = true,
                                                        Editable = false,
                                                        Width = 50 },                                    
                                     new JQGridColumn { DataField = "CustomerID", 
                                                        Editable = true,
                                                        Width = 100 },
                                     new JQGridColumn { DataField = "OrderDate",                                                         
                                                        Editable = true,
                                                        Width = 100, 
                                                        DataFormatString = "{0:yyyy/MM/dd}" },
                                     new JQGridColumn { DataField = "Freight", 
                                                        Editable = true,
                                                        Width = 75 },
                                     new JQGridColumn { DataField = "ShipName",
                                                        Editable =  true
                                                      }                                     
                                 },
                                 Width = Unit.Pixel(640),
                                 Height = Unit.Percentage(100)
                             };

            OrdersGrid.ToolBarSettings.ShowRefreshButton = true;            
        }

    }
} 
```

**错误：** 它使用泛型 System.Collections.Generic.List 抱怨以下错误需要 1 个类型参数 **- 谁能指出我，为什么会发生这个错误？**

我之前使用过内置的 MVC3 网络网格，但我需要实现内联 CRUD 操作。

谁能指出我在 asp.net MVC 中使用 Grid 的任何其他内联 crud 操作教程

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:24:36.250

利用`List<JQGridColumn>()`

该演示需要更改，但他们没有这样做。但是，如果您下载试用版或拥有完整许可版本，这些将包括 VS 2010 Razor MVC3 的示例项目，它们`List<JQGridColumn>()`用于此示例。

# php - Symfony2 访问路由变量

> ID：11737304
> 
> 赞同：8
> 
> 时间：2012-07-31T09:44:54.083
> 
> 标签：php, symfony, routing

我知道我可以通过`$request->get('_route');`.

如果我的路线是这样定义的：

```
/*
 * @Route("/get_by_category/{id}", defaults={"id" = 0}, name="get_products_by_category")
 */ 
```

如何`id`从服务中检索变量？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-31T09:51:34.737

您可以从`Request`

```
$routeParams = $request->attributes->get('_route_params');
$id = $routeParams['id']; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-31T10:10:40.440

`$request->attributes->get('id')`成功了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-31T09:50:10.153

你可以做

```
/*
* @Route("/get_by_category/{id}", defaults={"id" = 0}, name="get_products_by_category")
*/
public function getProductsAction($id)
{
} 
```

该`$id`变量将在控制器中可用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-10T16:38:25.460

在 Symfony 3.4 中，我刚刚添加`function functionName(int $id)`并且变量`$id`已在函数范围内定义。我的路径是`something/{id}`。对于多个参数`like/{id}/that.{format}`，我只是在函数中添加了第二个参数：`function functionName(int $id, string $format)`，它们都在范围内。事实上，my`functionName`是`__invoke`用作路由控制器的类中的一个。

# android - 片段示例中的 Android ListView

> ID：11737308
> 
> 赞同：15
> 
> 时间：2012-07-31T09:45:02.983
> 
> 标签：android, listview, fragment

在哪里可以找到使用`ListView`in的示例`Fragment`？我知道示例中有一个示例，但不幸的是我找不到它。也许你可以提出一些建议？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-31T09:46:54.900

您的 Fragment 可以[继承 ListFragment](http://developer.android.com/reference/android/app/ListFragment.html)。
并且 onCreateView() from`ListFragment`将返回一个`ListView`然后您可以填充。

# sql - 在触发器中记录更新操作

> ID：11737314
> 
> 赞同：2
> 
> 时间：2012-07-31T09:45:22.320
> 
> 标签：sql, triggers, sql-server-2012

我有一个 UPDATE 触发器，它会生成如下所示的 INSERTED 和 DELETED 表：

**已插入**

```
Id  Name    Surname
1   Stack   Overflow
2   Luigi   Saggese 
```

**已删除**

```
Id  Name    Surname
1   Stacks  Overflow
2   Luigi   Sag 
```

我想将此更新捕获到日志表中。我的日志表（对所有表都是全局的）是这样的（然后我必须处理我的 INSERTED 和 DELETED 表）：

```
Id_Table    Table_Key_Value   Id_Value   Old_Value  New_Value
12345               1          4556645    Stack      Stacks
12345               1           544589   Overflow   Overflows
12345               2           544589   Saggese       Sag 
```

`Id_Table`是我执行 UPDATE 语句的表的系统 object_id，`Table_Key_Value is`UPDATEd 列的主键的值，`Id_Value`是我映射到每个表中的每个列的自定义 ID。仅当列被 UPDATE 更改时，才会记录列的数据。

我想到了两种方法来做到这一点：

1.  对表执行 SELECT，每列一次：

    ```
    INSERT INTO LOG (Id_Table, Table_Key_Value, Id_Value,Old_Value, New_Value)
       SELECT 12345, Id, 4556645, D.Name, I.Name
       FROM INSERTED I 
       INNER JOIN DELETED D ON I.ID = D.ID
       WHERE D.Name <> I.Name

       union

       SELECT 12345, Id, 544589, D.Surname, I.Surname
       FROM INSERTED I 
       INNER JOIN DELETED D ON I.ID = D.ID
       WHERE D.Surname <> I.Surname 
    ```

2.  对 UDF 执行单次选择：

    ```
    SELECT CustomFunction(12345,Id, I.Name, D.Name, I.Surname, D.Surname) 
    FROM INSERTED I  
    INNER JOIN DELETED D ON I.ID = D.ID

    **CustomFunction** (_Id_Table,_Table_Key_Value, _Old_Value_Name, _New_Value_Name, _Old_Value_Surname, _New_Value_Surname)

    INSERT INTO LOG(Id_Table, Table_Key_Value, Id_Value,Old_Value, New_Value)
    VALUES(_Id_Table,_Table_Key_Value, 4556645, _Old_Value_Name, _New_Value_Name)

    INSERT INTO LOG(Id_Table, Table_Key_Value, Id_Value,Old_Value, New_Value)
    VALUES(_Id_Table,_Table_Key_Value, 544589, _Old_Value_Surname, _New_Value_Surname) 
    ```

还有其他方法可以做到这一点吗？什么是最有效和可维护的方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T05:41:53.270

在回答之前，我先说一下，我认为最好不要将所有表记录到单个表中。如果您的数据库增长，您最终可能会在 Log 表上出现严重的争用。另外，您的所有数据都必须更改为 varchar 或 sql_variant 才能放在同一列中，从而迫使它占用更多空间。我还认为将每个更新的列记录到单独的行（跳过未更新的列）将使您*很难*查询。您是否知道如何将所有这些数据汇总在一起，以实际获得每行更改、何时以及由谁更改的综合且合理的视图？在我看来，每个表都有一个日志表会容易得多。然后，您将不会遇到尝试使其正常工作时遇到的问题。

另外，您知道 SQL Server 2008[变更数据捕获](http://msdn.microsoft.com/en-us/library/bb522489%28v=sql.105%29.aspx)吗？如果您使用的是 SQL Server 的 Enterprise 或 Developer 版本，请改用它！

除了这个问题，您可以使用逻辑 UNPIVOT（执行您自己的版本）来做您想做的事情。您不能真正使用 Native SQL 2005 UNPIVOT，因为您有两个目标列，而不是一个。这是 SQL Server 2005 及更高版本使用 CROSS APPLY 执行 UNPIVOT 的示例：

```
INSERT INTO dbo.LOG (Id_Table, Table_Key_Value, Id_Value, Old_Value, New_Value)
SELECT 12345, I.Id, X.Id_Value, X.Old_Value, X.New_Value
FROM
   INSERTED I 
   INNER JOIN DELETED D ON I.ID = D.ID
   CROSS APPLY (
      SELECT 4556645, D.Name, I.Name
      UNION ALL SELECT 544589, D.Surname, I.Surname
    ) X (Id_Value, Old_Value, New_Value)
WHERE
   X.Old_Value <> X.New_Value 
```

这是 SQL 2000 或其他 DBMS 的更通用方法（理论上应该在 Oracle、MySQL 等中工作——对于 Oracle 添加`FROM DUAL`到派生表中的每个 SELECT）：

```
INSERT INTO dbo.LOG (Id_Table, Table_Key_Value, Id_Value, Old_Value, New_Value)
SELECT *
FROM (
   SELECT
      12345,
      I.Id,
      X.Id_Value,
      CASE X.Id_Value
         WHEN 4556645 THEN D.Name
         WHEN 544589 THEN D.Surname
      END Old_Value,
      CASE X.Id_Value
         WHEN 4556645 THEN I.Name
         WHEN 544589 THEN I.Surname
      END New_Value   
   FROM
      INSERTED I 
      INNER JOIN DELETED D ON I.ID = D.ID
      CROSS JOIN (
         SELECT 4556645
         UNION ALL SELECT 544589
      ) X (Id_Value)
) Y
WHERE
   Y.Old_Value <> Y.New_Value 
```

SQL Server 2005 and up do have the native UNPIVOT command, though in general, even when UNPIVOT will work, I like using CROSS APPLY instead because there is more flexibility to do what I want. Specifically, the native UNPIVOT command isn't workable here because UNPIVOT can only target a single destination column, but you need two (Old_Value, New_Value). Concatenating the two columns into a single value (and separating later) is not good; creating a meaningless row correlator value to PIVOT with afterward is not good, and I can't think of another way to do it that's not a variation on those two. The CROSS APPLY solution is truly going to be the best for you to match the exact log table structure you've described.

Compared to my queries here, your method #1 will not perform as well (in a ratio of about {the number of columns}:1 worse performance). Your method #2 is a good idea but still suboptimal because calling a UDF has a large overhead, plus then you have to loop over each row (shudder).

# c - 如何确定将多字符 char 常量分配给 char 变量的结果？

> ID：11737320
> 
> 赞同：5
> 
> 时间：2012-07-31T09:45:48.837
> 
> 标签：c

为什么char变量从'ab'的赋值中得到'b'，而不是'a'？

```
char c = 'ab';

printf("c: %c\n", c); 
```

印刷：

```
c: b 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-31T09:50:42.140

根据标准，它是实现定义的。从*6.4.4.4 字符常量*：

> 整数字符常量的类型为 int。包含映射到单字节执行字符的单个字符的整数字符常量的值是被解释为整数的映射字符表示的数值。 **包含多个字符（例如，'ab'）或包含不映射到单字节执行字符的字符或转义序列的整数字符常量的值是实现定义的。**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-31T09:50:31.663

根据 C11 标准（*第 6.4.4.4 节“字符常量”al10 p69*），整数多字符常量的值是实现定义的：

> 10 - [...] 包含多个字符（例如，'ab'）或包含不映射到单字节执行字符的字符或转义序列的整数字符常量的值是**实现定义的**. [...]

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-31T10:29:26.587

这是定义为较早的答案已经说过的实现。

我的 gcc 将“ab”作为 int 处理。以下代码：

```
printf( "sizeof('ab') = %zu \n", sizeof('ab') );
printf( "'ab' = 0x%08x \n", 'ab' );
printf( "'abc' = 0x%08x \n", 'abc' ); 
```

印刷：

```
sizeof('ab') = 4
'ab' = 0x00006162
'abc' = 0x00616263 
```

在您的代码中，该行：

```
char c = 'ab'; 
```

可以认为是：

```
char c = (char)(0x00006162 & 0xFF); 
```

所以 c 得到了 'ab' 的最后一个字符的值。在这种情况下，它是“b”（0x62）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T09:49:45.917

因为`'ab'`has type`int`和 a`char`只能容纳一个字节。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-31T10:55:33.007

稍后编辑：我的回答与之前的回答相辅相成，清楚地表明这是特定于实现的行为。考虑到这一点，我的印象是OP想知道为什么编译器选择'b'而不是'a'。对不起，如果我的回答令人困惑。

字节序。这就是为什么你得到'b'而不是'a'。因为它在机器内存中的表示方式。而且你的机器可能是小端的。

在 sparc 或 mipsbe 或手臂上尝试它，您可能会得到“a”而不是“b”。

无论如何，我希望您不要依赖它来获取实际的生产代码。

# iphone - AGVTool new-version 和 what-version 不对应

> ID：11737325
> 
> 赞同：7
> 
> 时间：2012-07-31T09:46:04.387
> 
> 标签：iphone, ios, xcode, cocoa-touch, agvtool

当我做：

```
agvtool new-version -all 99 
```

它更新了我的 Info.plist 文件。但是，如果我这样做：

```
agvtool what-version 
```

或者

```
agvtool next-version 
```

我收到此错误：

```
There does not seem to be a CURRENT_PROJECT_VERSION key set for this project.
Add this key to your target's expert build settings. 
```

为什么这不对应。我是否必须使用 plist 命令行工具才能检索我的应用程序的当前版本。奇怪的是`agvtool what-marketing-version`工作正常。具有讽刺意味的是，agvtool 本身似乎没有版本；-)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-02-15T02:40:55.117

此链接对我[有用 技术问答 QA1827 使用 agvtool 自动化版本和内部版本号](https://developer.apple.com/library/mac/qa/qa1827/_index.html)

从链接如下。这有助于解决我开始使用 agvtool 时的问题。

1.  启用 agvtool。

导航到目标的“构建设置”窗格，然后针对所有构建配置对其进行更新。

将当前项目版本设置为您选择的值。我将我的设置为 1

将版本控制系统设置为 Apple Generic。

默认情况下，Xcode 不使用任何版本控制系统。将版本控制系统设置为 Apple Generic 可确保 Xcode 将所有 agvtool 生成的版本信息包含在您的项目中。

2.  设置您的版本和内部版本号。

agvtool 在您的应用程序的 Info.plist 中搜索您的版本和内部版本号。如果它们存在，它会更新它们，否则什么都不做。确保您的 Info.plist 中存在 CFBundleVersion（捆绑版本）和 CFBundleShortVersionString（捆绑版本字符串，短）键

# prototypejs - 无法在控制台中打印响应

> ID：11737329
> 
> 赞同：0
> 
> 时间：2012-07-31T09:46:15.763
> 
> 标签：prototypejs, prototype

我使用以下代码在控制台中打印响应。但我在控制台中得到了空值。

在 index.php 网址中，我有 JSON 代码

```
new Ajax.Request('http://10.239.50.92/sample/index.php', {
 method:'get', 
  onSuccess: function(products){  
                //alert(products.hasOwnProperty(value));  
                //alert(products.hasOwnProperty());
                console.log(products.responseJSON);
   }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:15:20.793

只有当 AJAX 请求的响应类型为“application/json”时，才会返回 responseJSON 字段。

我会尝试以下方法：

```
console.log(transport) 
```

查看 responseJSON 属性是否对您可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:01:20.107

也许它会有所帮助：

```
new Ajax.Request('http://10.239.50.92/sample/index.php', {
  method:'get',

  onSuccess: function (transport) {
    var response = transport.responseText;
    var json = eval('(' + response + ')')
    console.log(json);
  }
}); 
```

*或者尝试更改http响应中的标头，但是在原型中这个问题似乎存在一些困难。*

# android - Android phonegap hello world 停止应用程序启动

> ID：11737330
> 
> 赞同：0
> 
> 时间：2012-07-31T09:46:26.760
> 
> 标签：android, cordova

这是简单的hello world。但我无法运行它。
当我尝试运行时，它显示：
“对不起！应用程序意外停止！请重试。”
它抛出一个异常。我在这里附上了例外：

![输入图片描述他<code>在此处输入代码</code>re](../Images/0d4527307eed14853b4a2659f926c068.png)

//==========代码===========

```
package com.ismail.phonegap;
import android.app.Activity;
import android.os.Bundle;
import org.apache.cordova.*;
public class HomePage extends DroidGap {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);      
super.loadUrl("file:///android_asset/www/index.html");
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:01:50.403

请检查您是否将 phonegap jar 文件放在 libs 文件夹中，并检查您是否将 plugin.xml 文件放在 res 文件夹中。

# django - 中间件：在 process_request 中使用模型并在 process_response 中修改它

> ID：11737333
> 
> 赞同：1
> 
> 时间：2012-07-31T09:46:32.963
> 
> 标签：django, django-models, python-2.6, django-middleware

Django 会在 process_response 之后展平响应吗？

我有这个模型（简化版）：

```
class Ticket(models.Model):
    uuid = UUIDField(primary_key = True)
    is_active = models.BooleanField(default = False)
    remains = models.IntegerField(default = 2)

    def __unicode__(self):
        return '%s' % (self.is_active) 
```

和中间件（简化）：

```
class TicketMiddleware(object):
    def process_request(self, request):
        # ...
        try:
            request.ticket = Ticket.objects.get(uuid_exact=request.GET['ticket'], is_active=True)
            print '%s %d' % (request.ticket.is_active, request.ticket.remains)
            # first case:
            return HttpResponse(request.ticket)
            # second case:
            #return HttpResponse(request.ticket.is_active)
        except Ticket.DoesNotExists:
            return HttpResponseForbidden()

    def process_response(self, request, response):
        if request.ticket is not None and request.ticket.remains > 0:
            request.ticket.remains -= 1
            if request.ticket.remains == 0:
                request.ticket.is_active = False
            request.ticket.save()
        return response 
```

在第一种情况下，我在第四次请求时获得了禁止页面：

```
 RESPONSE     PRINT
1: True         True 2
2: False        True 1
3: False        True 1
4: Forbidden 
```

在第二种情况下，我在第三次请求时获得了禁止页面：

```
 RESPONSE     PRINT
1: True         True 2
2: True         True 1
3: Forbidden 
```

这第二种情况是我想要的方式。为什么我必须首先对模型进行字符串化才能正常流动？我误解了什么？

```
django.VERSION = (1, 2, 3, 'final', 0) 
```

* * *

## 编辑

我发现了问题。在实际代码中，我为 django.contrib.auth.models.User 使用外键，并使用关联用户的用户名对我的 Ticket 模型进行 unicoding：

```
class Ticket(models.Model):
    # ...
    user = models.ForeignKey(User)

    def __unicode__(self):
        # this works as expected
        return u'%s' % (self.is_active)
        # with this I have unexpected third step in first case
        # but I dont understand why
        #return u'%s %s' % (self.user.username, self.is_active) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T11:31:43.320

我真的怀疑第一个案例显示两次`False`。我用你的代码做了一个简单的测试，它显示第一种情况：

```
1: True
2: False
3: Forbidden 
```

这是预期的行为。只要`process_response`修改`is_active`数据并在第二次调用时保存票证，我看不出第三次调用如何返回 False ......除非票证.remains 以某种方式被修改。使用此处显示的代码，我看不出如何`process_response`使用 保存票证`is_active=False`，并且在随后的请求`process_request`中不重定向到`Forbidden`...您使用哪个 Django 版本？也打印`ticket.remains`在`__unicode__()`里面看看它是如何变化的......

`False`您在第一种情况下进行第二次调用的原因是您传递了一个模型实例

```
return HttpResponse(request.ticket) 
```

在`ticket.__unicode__()`被调用之后`process_response`，在最终`HttpResponse()`向客户端写入内容的过程中，被调用。并且由于在第一个场景`ticket.is_active`中被修改`process_response`，当 `ticket.__unicode__()`最终被调用时，它会得到修改后的`ticket.is_active`值`False`。

在第二种情况下，`__unicode__`在 process_request 中显式调用并评估为“True”。

# c# - 惯用 C#：何时返回 null 以及何时返回 NaN

> ID：11737338
> 
> 赞同：2
> 
> 时间：2012-07-31T09:46:50.827
> 
> 标签：c#

在指定和创建数字函数时，是否有任何 C# 惯用指南，说明何时返回 null 以及何时返回 NaN（当两者似乎都是有效输出时）。

导致这个问题的具体例子是我正在为 Enumerable 集合创建一个百分比扩展方法。我一直在考虑如果有空输入要返回什么。该函数可以返回 runningCount / totalCount ，这将在零长度输入上返回 NaN。但是，我不相信这与语言的一般感觉很吻合。

是否有任何指南或语言示例可以告知是否重新调整 NaN 或 null 的决定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T10:05:33.040

当要求做一些没有意义的事情时，惯用的 C# 代码会引发异常。就像计算空输入的百分比一样。那应该是一个 InvalidOperationException。

当客户端代码不检查它时，返回 null 或 NaN 之类的魔法值往往会导致更多麻烦。它不会，它也没有检查输入是否为空，所以它不会期望它们。Null 对于它生成的不起眼的 NullReferenceException 来说是令人讨厌的，它没有暗示真正的问题可能是什么。NaN 令人讨厌，因为它只是以不可检测的方式传播，将所有内容都变成 NaN 并最终产​​生无法追溯到源头的无意义结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T09:49:39.883

您可能想看看您的扩展方法可能会以何种方式使用。`NaN`是一个完全有效的`double`值，因此可用于执行计算（好吧，这些结果将始终为`NaN`，但至少您不会得到异常）。如果您的上下文需要在使用之前检查结果，那么您可能需要选择`null`.

然而，安德烈已经评论过，对于空集合的百分比（如果还没有项目，可能会导致*）*可能`0`是一个更明智的返回值。

# ruby-on-rails - Spree.config 是如何实现的？

> ID：11737342
> 
> 赞同：2
> 
> 时间：2012-07-31T09:47:07.043
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, spree

我正在研究 Spree 的源代码，我遇到了代码片段。

```
Spree.config do |config|
  # Example:
  # Uncomment to override the default site name.
  # config.site_name = "Spree Demo Site"
end 
```

这是如何实施的？我找不到在任何地方定义为方法的 Spree.config。我猜这涉及到一些元编程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T12:55:30.383

看起来它是在[https://github.com/spree/spree/blob/master/core/lib/spree/core.rb](https://github.com/spree/spree/blob/master/core/lib/spree/core.rb)中定义的（此时第 68 行）。

`config`是模块上的模块方法`Spree`。它的实现将`Spree::Config`对象传递给给定的块。

# windows-phone-7 - WP7：使用“PhotoCamera”类时相机捕捉声音

> ID：11737344
> 
> 赞同：0
> 
> 时间：2012-07-31T09:47:08.633
> 
> 标签：windows-phone-7, camera, audio, image-capture

我正在使用 PhotoCamera 类在我的应用程序中拍照。有没有办法在官方相机应用程序中启用捕捉声音？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:18:50.650

我不这么认为，但是您可以在拍照时将其作为 SoundEffect 自己播放。

可以在互联网上找到像相机快门声这样简单的免费声音文件！

# php - php查找div的内容

> ID：11737346
> 
> 赞同：2
> 
> 时间：2012-07-31T09:47:12.407
> 
> 标签：php, html

如果 div 内部有图像，我想执行一些代码，但无法正确完成第一行
（我认为其他行还可以）：

```
$page = index.php; // should be my homepage
$content = $page->find('div[id=sky]', 0)->innertext;
if($content == '<img src="img/water.png">'){
//do something
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T09:53:23.257

如果您尝试使用[Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)，就像它看起来的那样，您需要初始化它。

**更新：**您当然需要下载（[下载简单 HTML DOM 解析器](http://sourceforge.net/projects/simplehtmldom/files/simplehtmldom/1.5/)）、解包、上传到您的服务器，最后包含它以访问这些功能。

```
include('simple_html_dom.php');
$page = file_get_html('http://www.mydomain.com/index.php'); 
```

# iphone - 如何避免编译iOS 4.0提供的常量，并内置到iOS 3.1的设备中

> ID：11737349
> 
> 赞同：1
> 
> 时间：2012-07-31T09:47:17.900
> 
> 标签：iphone, compilation, runtime, version, constants

我已经尝试过以下两种代码。

运行：

```
if ([[[UIDevice currentDevice] systemVersion] floatValue] >= 4.0) {
    CFReadStreamSetProperty(theReadStream, kCFStreamNetworkServiceType, kCFStreamNetworkServiceTypeVoIP);
    CFWriteStreamSetProperty(theWriteStream, kCFStreamNetworkServiceType, kCFStreamNetworkServiceTypeVoIP); 
} 
```

编译时间：

```
#if __IPHONE_OS_VERSION_MAX_ALLOWED >= __IPHONE_4_0 {
    CFReadStreamSetProperty(theReadStream, kCFStreamNetworkServiceType, kCFStreamNetworkServiceTypeVoIP);
    CFWriteStreamSetProperty(theWriteStream, kCFStreamNetworkServiceType, kCFStreamNetworkServiceTypeVoIP); 
} 
```

`kCFStreamNetworkServiceType`并且`kCFStreamNetworkServiceTypeVoIP`是 iOS 4.0 中提供的常量。但是，由于某些原因，我需要将上述代码构建到带有 iOS 3.1 的设备中。如果我将上述代码构建到 iOS 3.1 的设备中，当我打开应用程序时它会崩溃。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:16:44.120

我同意 Apurv 的观点，您应该在 Xcode 构建设置中将**Deployment Target**设置为 iOS 3.1，并使用最新的**Base SDK**构建。但是，我不建议对操作系统版本进行测试。

操作系统版本不是浮点数。 `"3.1.3"`是有效的操作系统版本，但不是浮点数。此外，浮点数的比较从来都不是一个好主意。

相反，请使用[其他 Stack Overflow 答案中的宏](https://stackoverflow.com/a/5337804/119114)

```
if (SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(@"4.0")) {
    CFReadStreamSetProperty(theReadStream, kCFStreamNetworkServiceType, kCFStreamNetworkServiceTypeVoIP);
    CFWriteStreamSetProperty(theWriteStream, kCFStreamNetworkServiceType, kCFStreamNetworkServiceTypeVoIP); 
} 
```

**编辑：**作为为什么这是必要的示例，请考虑以下代码：

```
NSString* osVersion = @"3.1.3";
float x = [osVersion floatValue];
NSLog(@"OS version = %lf", x);
if (x >= 3.1) {
    NSLog(@"OS >= 3.1");
} else if (x < 3.1) {
    NSLog(@"OS < 3.1");
} 
```

在 iPhone 5.0 模拟器上运行它会产生以下输出，这显然不是您想要的：

> 2012-07-31 17:56:38.155 HelloWorld[5856:f803] 操作系统版本 = 3.100000
> 
> 2012-07-31 17:56:41.257 HelloWorld[5856:f803] 操作系统 < 3.1

如果您`x`在调试器中检查 的值，我将其视为`3.0999999`，这会触发不正确的比较结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:54:45.483

您应该使用最新的 SDK 构建您的应用程序，并将部署目标提供给 iOS 3.1。

如果您进行以下检查，那么它不应该崩溃。

```
if ([[[UIDevice currentDevice] systemVersion] floatValue] >= 4.0) {
    CFReadStreamSetProperty(theReadStream, kCFStreamNetworkServiceType, kCFStreamNetworkServiceTypeVoIP);
    CFWriteStreamSetProperty(theWriteStream, kCFStreamNetworkServiceType, kCFStreamNetworkServiceTypeVoIP); 
} 
```

# android - 以编程方式检测 Nook 平板电脑

> ID：11737352
> 
> 赞同：1
> 
> 时间：2012-07-31T09:47:28.073
> 
> 标签：android, nook, nook-tablet

我知道，我可以使用`android.os.Build.MANUFACTURER`Build 对象的字段。但是对于 Nook 设备，该字段必须包含什么值？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:00:44.803

`Foxconn`最好在真实设备上进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-13T01:13:57.150

测试并使用 Nook Simple Touch Glow (Eink)。警告：不知道高清角落会返回什么。

```
public static boolean isNook()
    {
    String thisManufacturer=android.os.Build.MANUFACTURER;
    Log.d(TAG, "UTIL: Manu: "+thisManufacturer);
    // 'BarnesAndNoble' on Nook Simple Touch with GlowLite

    String thisProduct=android.os.Build.PRODUCT;
    Log.d(TAG, "UTIL: PRODUCT "+thisProduct);
    // 'NOOK' on Nook Simple Touch with GlowLite

    //String thisBrand=android.os.Build.BRAND;
    //Log.d(TAG, "UTIL: Brand "+thisBrand);
    // 'nook' on Nook Simple Touch with GlowLite

    //String thisModel=android.os.Build.MODEL;
    //Log.d(TAG, "UTIL: Model "+thisModel);
    // 'unknown' on Nook Simple Touch with GlowLite

    if( thisManufacturer.equals("BarnesAndNoble") && 
        thisProduct.equals("NOOK"))
        return(true);
    else
        return(false);
    } 
```

# java - Java JSR-45 调试器/未映射的行

> ID：11737356
> 
> 赞同：1
> 
> 时间：2012-07-31T09:47:35.833
> 
> 标签：java, debugging

生成的 java 程序的其中一行无法映射到源代码行。那是因为它在一个循环中，并且每次执行时它对应于源语言的不同行。

这是我的意思的简化示例。

源语言：

```
op1();
op2(); 
```

编译成java：

```
while (true) {
    switch (opcode) {
        case 1:
            op1();
            break;
        case 2:
            op2();
            break;
    }
} 
```

问题是有switch的那一行，每次都执行，没办法给它指定源码行。我想解决这个问题，例如要求 JSR-45 引擎跳过这一行，或者其他什么。

注意：这是一个不完整的示例。我不需要关于做这种事情的必要性的讲座。谢谢你。

# azure - 将侦听器写入 Azure 队列

> ID：11737360
> 
> 赞同：4
> 
> 时间：2012-07-31T09:47:48.947
> 
> 标签：azure, azure-queues

我已经将大多数队列示例视为轮询机制。是否可以将其更改为队列的侦听器。因为轮询可能会影响工人的表现。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-31T10:08:28.000

Windows Azure 存储队列和 Windows Azure 服务总线队列都使用轮询，并且本身没有通知功能；但是，Windows Azure 服务总线队列确实支持长轮询，这与您目前可以获得的通知方法最接近。当您使用 MessageReceiver 中的 Receive 方法时，它将使用长轮询（这意味着它将请求一条消息，如果队列中没有消息，则服务器不会立即响应，但会等待一段时间，直到有一条消息到来当它响应客户端时进入队列，或者直到空闲时间过去，在这种情况下它将返回一个没有消息的响应。接收方法本身会给人一种同步调用获取消息的印象，并且不会返回直到出现消息，

在服务总线主题中，您可以设置为订阅者，但您仍将轮询主题以获取消息，因此我认为这不是 OP 所要求的核心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T10:08:25.210

使用 Windows Azure 队列，您唯一的选择是轮询。使用[Service Bus Topics/Subscription](http://msdn.microsoft.com/en-us/library/windowsazure/hh367516.aspx)时，您可以拥有完整的 pub/sub 模型，其中您的订阅者将成为“听众”。

# clojure - 保持所有模型都可以访问全球销售商连接

> ID：11737361
> 
> 赞同：1
> 
> 时间：2012-07-31T09:48:01.333
> 
> 标签：clojure, noir

作为 Clojure、Noir 和 Monger 的新手，我面临的只是一个小问题。正如 Noir 中的标准一样，我将模型保存在 src/app_name/model_name.clj

我面临的问题是我需要在每个模型中与 MongoDB 建立相同的连接，因为我不知道如何正确“共享”连接，如下所示：

```
(ns app.models.theme
 (:require [monger.collection :as mc]
            [monger.core :as mg]))

(mg/connect!)
(mg/set-db! (mg/get-db "app_development"))

; Do stuff 
```

我将如何通过整个应用程序共享此连接？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:57:09.073

如果您总是连接到同一台服务器，那么只需将其添加到您的 server.clj (src//server.clj)

```
(mg/connect!) 
```

如果您只在该服务器中使用一个数据库，您只需添加：

> (mg/set-db! (mg/get-db "dbname"))

到同一个文件

否则，您可以例如在入口点或代码中的任何位置执行

```
(defpage "/dbname/tothis" {:keys [dbname]}

  (mg/with-db (mg-get-db dbname)))..... 
```

# iphone - nsmutablearray 泄漏内存 iphone

> ID：11737368
> 
> 赞同：1
> 
> 时间：2012-07-31T09:48:20.100
> 
> 标签：iphone, ios, ipad, memory-leaks, nsmutablearray

我有一个 nsmutablearray，我在整个应用程序中都需要它，所以我在应用程序委托中声明它并在应用程序委托的 dealloc 方法中释放它。这是代码。

```
@interface AppDelegate : UIResponder <UIApplicationDelegate>{
    NSMutableArray *arr1;
    IBOutlet UINavigationController *navConroller;
}
@property (strong, nonatomic) IBOutlet UIWindow *window;
@property (nonatomic, retain) UINavigationController *navConroller;
@property (nonatomic, retain) NSMutableArray *arr1;

@implementation AppDelegate
@synthesize navConroller;
@synthesize window = _window;
@synthesize arr1;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.arr1 = [[NSMutableArray alloc] init];
    [self.window addSubview:navConroller.view];
    [self.window makeKeyAndVisible];
    return YES;
}

- (void)dealloc
{
    [self.arr1 release];
    [_window release];

    [super dealloc];
} 
```

当我检查内存性能工具时，它显示内存泄漏

```
self.arr1 = [[NSMutableArray alloc] init]; 
```

我在不同的类中使用这个数组。任何建议将不胜感激。

我使用了 Pieter Gunst 的答案并在那个地方停止泄漏。但它显示在另一个地方。我在哪里解析 json 并将记录存储在 arr1 中。这是代码。

```
-(void) apiCall:(NSString *)para1 {
    SBJSON *parser = [[SBJSON alloc] init];

    para1 = [para1 stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
    para1 = [para1 stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

    NSString *url = [[[NSString alloc] initWithFormat:@"my api url",para1] autorelease];

    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:url]];
    NSData *response = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    NSString *json_string = [[NSString alloc] initWithData:response encoding:NSUTF8StringEncoding]; 

    arr1 = [parser objectWithString:json_string error:nil];

    [json_string release];
    [parser release]; 
```

}

现在泄漏显示在下一行。

```
arr1 = [parser objectWithString:json_string error:nil]; 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T09:50:26.347

您已分配数组并通过访问属性保留它。更改以下代码行；

```
self.arr1 = [[NSMutableArray alloc] init]; 
```

与以下任何一条线..

```
arr1 = [[NSMutableArray alloc] init]; 
```

或者

```
self.arr1 = [NSMutableArray array]; 
```

或者

```
NSMutableArray *tArr1 = [[NSMutableArray alloc] init];
self.arr1 = tArr1;
[tArr1 release]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T09:51:56.967

尝试`@synthesize arr1 = _arr1;`并`_arr1 = [[NSMutableArray alloc] init];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:05:49.190

正如 Apurv 已经提到的使用

```
self.arr1 = [NSMutableArray array]; 
```

或者

```
self.arr1 = [[[NSMutableArray alloc] init] autorelease]; 
```

还要使所有属性都具有相同类型（不要混合强和保留）：

```
@property (strong, nonatomic) 
```

对于 dealloc 方法，使用自动生成的 getter/setter：

```
- (void)dealloc {
    self.arr1 = nil;
    self.window = nil;
    [super dealloc];
} 
```

提示：

主题启动器不使用 ARC，因为

```
[super dealloc]; 
```

导致错误“ARC 禁止发送‘dealloc’的显式消息”

# opencart - 自定义页面在 opencart 中显示“找不到您请求的页面”

> ID：11737369
> 
> 赞同：1
> 
> 时间：2012-07-31T09:48:28.880
> 
> 标签：opencart, file-not-found

我在 opencart 中创建了一个自定义页面。但它显示未找到...下面显示用于创建页面的代码...我是 opencart 的新手。所以我没有找到错误。任何人请帮助...谢谢

我的文件是

在 `catalog/controller/category/category.php` 代码中是

```
<?php echo $header; ?><?php //echo $column_left; ?><?php echo $column_right; ?>
<div id="rightside" style="padding-left:10px;"><?php echo $content_top; ?>  
 <div class="box">
  <div class="box-heading"><?php echo $heading_title; ?></div>
  <div class="box-content">
    <div class="box-category">
      <ul>
        <?php foreach ($categories as $category) { ?>
        <li>
          <?php if ($category['category_id'] == $category_id) { ?>
          <a href="<?php echo $category['href']; ?>" class="active"><?php echo $category['name']; ?></a>
          <?php } else { ?>
          <a href="<?php echo $category['href']; ?>"><?php echo $category['name']; ?></a>
          <?php } ?>
          <?php if ($category['children']) { ?>
          <ul>
            <?php foreach ($category['children'] as $child) { ?>
            <li>
              <?php if ($child['category_id'] == $child_id) { ?>
              <a href="<?php echo $child['href']; ?>" class="active"> - <?php echo $child['name']; ?></a>
              <?php } else { ?>
              <a href="<?php echo $child['href']; ?>"> - <?php echo $child['name']; ?></a>
              <?php } ?>
            </li>
            <?php } ?>
          </ul>
          <?php } ?>
        </li>
        <?php } ?>
      </ul>
    </div>
  </div>
</div>  
</div>
<?php echo $footer; ?> 
```

在 `catalog/view/theme/new/template/category/category.tpl` 代码中是

```
<?php

class ControllerCategoryCategory extends Controller {

    protected function index($setting) {
        $this->language->load('category/category');

        $this->data['heading_title'] = $this->language->get('heading_title');

        if (isset($this->request->get['path'])) {
            $parts = explode('_', (string) $this->request->get['path']);
        } else {
            $parts = array();
        }

        if (isset($parts[0])) {
            $this->data['category_id'] = $parts[0];
        } else {
            $this->data['category_id'] = 0;
        }

        if (isset($parts[1])) {
            $this->data['child_id'] = $parts[1];
        } else {
            $this->data['child_id'] = 0;
        }

        $this->load->model('catalog/category');
        $this->load->model('catalog/product');

        $this->data['categories'] = array();

        $categories = $this->model_catalog_category->getCategories(0);

        foreach ($categories as $category) {
            $children_data = array();

            $children = $this->model_catalog_category->getCategories($category['category_id']);

            foreach ($children as $child) {
                $data = array(
                    'filter_category_id' => $child['category_id'],
                    'filter_sub_category' => true
                );

                if ($setting['count']) {
                    $product_total = $this->model_catalog_product->getTotalProducts($data);

                    $children_data[] = array(
                        'category_id' => $child['category_id'],
                        'name' => $child['name'] . ' (' . $product_total . ')',
                        'href' => $this->url->link('product/category', 'path=' . $category['category_id'] . '_' . $child['category_id'])
                    );
                } else {
                    $children_data[] = array(
                        'category_id' => $child['category_id'],
                        'name' => $child['name'],
                        'href' => $this->url->link('product/category', 'path=' . $category['category_id'] . '_' . $child['category_id'])
                    );
                }
            }

            $data = array(
                'filter_category_id' => $category['category_id'],
                'filter_sub_category' => true
            );

            if ($setting['count']) {
                $product_total = $this->model_catalog_product->getTotalProducts($data);

                $this->data['categories'][] = array(
                    'category_id' => $category['category_id'],
                    'name' => $category['name'] . ' (' . $product_total . ')',
                    'children' => $children_data,
                    'href' => $this->url->link('product/category', 'path=' . $category['category_id'])
                );
            } else {
                $this->data['categories'][] = array(
                    'category_id' => $category['category_id'],
                    'name' => $category['name'],
                    'children' => $children_data,
                    'href' => $this->url->link('product/category', 'path=' . $category['category_id'])
                );
            }
        }

        if (file_exists(DIR_TEMPLATE . $this->config->get('config_template') . '/template/category/category.tpl')) {
            $this->template = $this->config->get('config_template') . '/template/category/category.tpl';
        } else {
            $this->template = 'default/template/category/category.tpl';
        }

        $this->render();
    }

}

?> 
```

在 `catalog/language/english/category/category.php`

代码是

```
<?php
$_['heading_title'] = 'Categories';
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:38:38.057

控制器类中的索引函数必须是公共的，而不是受保护的。尝试将其更改为公开，看看是否可以解决问题。

顺便说一句，我不知道你想如何将 $settings 传递给 index()。据我所知，你不应该这样做:)

# macos - 单击按钮时加载视图 mac osx 应用程序

> ID：11737371
> 
> 赞同：0
> 
> 时间：2012-07-31T09:48:36.810
> 
> 标签：macos, cocoa

当用户触摸按钮时如何加载新视图（例如为 iOs 推送视图）（这是针对 mac 应用程序）？在.Net中我们可以使用show，同样有什么方法可以加载视图吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:43:45.680

如果要从 xib 加载视图，最简单的方法是使用`NSViewController`.

```
- (IBAction)showMyAmazingView:(id)sender
{
    NSViewController* myViewController = [[NSViewController] alloc] initWithNibName:@"MyAmazingView" bundle:nil];

    NSView* myAmazingView = myViewController.view;

    // Do whatever you want with myAmazingView
} 
```

如果你想以编程方式创建你的（自定义）视图，你应该首先初始化它：

```
- (IBAction)showMyAmazingView:(id)sender
{
    MyAmazingViewSubclass* myAmazingView = [[MyAmazingViewSubclass] alloc] initWithFrame:NSMakeRect(0, 0, 100, 100)];

    // Do whatever you want with myAmazingView
} 
```

加载视图后，您需要将其放置到另一个视图（超级视图）以显示它。例如，对于您窗口的客户端视图：

```
[window.clientView addSubview:myAmazingView]; 
```

你也可以用`-setFrame:`方法定位你的视图。

# c# - 单击后如何禁用和启用加载项按钮

> ID：11737372
> 
> 赞同：1
> 
> 时间：2012-07-31T09:48:38.883
> 
> 标签：c#, visual-studio-2010, add-in, visual-studio-addins

我为包含两个按钮的 Visual Studio 编写插件。我希望当用户点击其中一个按钮时，此按钮将被禁用，而另一个按钮将被启用。我该怎么做？

按钮是命令类型（commands.AddNamedCommand2...）

先谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:51:27.813

```
void Btn1_Click(Object sender, EventArgs e)
{
   Btn2.Enabled = false;
}

void Btn2_Click(Object sender, EventArgs e)
{
   Btn1.Enabled = false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T10:01:57.220

你可以试试这个：

```
private void button1_Click(object sender, EventArgs e)
    {
        this.button1.Enabled = false;
        this.button2.Enabled = true;
    }

    private void button2_Click(object sender, EventArgs e)
    {
        this.button2.Enabled = false;
        this.button1.Enabled = true;
    } 
```

希望对你有帮助....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-22T18:09:25.803

您可以将一些状态变量与您的按钮相关联，以表达您的按钮是否应在您的加载项的最近状态下启用。当您的加载项初始化时，您应该根据需要设置状态。在查询中，您可以检查加载项的最近状态并将按钮设置为正确的启用/不支持状态。

可以通过接口的`QueryStatus`方法修改状态`IDTCommandTarget`（如果加载了您的加载项）。

默认模板实现：

```
public void QueryStatus(string commandName, vsCommandStatusTextWanted neededText, ref vsCommandStatus status, ref object commandText)
{
    if(neededText == vsCommandStatusTextWanted.vsCommandStatusTextWantedNone)
    {
        if(commandName == "YourAddin.Connect.YourAddinCommandName")
        {
            status = (vsCommandStatus)vsCommandStatus.vsCommandStatusSupported|vsCommandStatus.vsCommandStatusEnabled;
            return;
        }
    }
} 
```

您可以通过将状态设置为来禁用按钮`vsCommandStatus.vsCommandStatusUnsupported`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-26T09:52:07.667

此外，如果您想在初始状态下启用或禁用这些按钮。例如，您想在程序中禁用按钮 1。在说明程序后，您想在单击按钮 2 后启用按钮 1，然后您想在页面加载时添加按钮状态为跟随;

```
 private void Form1_Load(object sender, EventArgs e)
        {
            this.button1.Enabled = false;
            this.button2.Enabled = true;
        }
 private void button2_Click(object sender, EventArgs e)
    {       
        this.button1.Enabled = true;
    } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-09T11:58:32.907

```
// Remove event handler
this.button_Ping.Click -= new System.EventHandler(this.button_Ping_Click);

Some action...

// Add event handler
this.button_Ping.Click += new System.EventHandler(this.button_Ping_Click); 
```

# c# - 如何使用进度条？

> ID：11737377
> 
> 赞同：-3
> 
> 时间：2012-07-31T09:49:19.100
> 
> 标签：c#, .net, wpf, telerik

我正在处理 WPF windows 应用程序中的进度条。我的问题是我有一个 microsoft access 数据库格式的数据，我想将数据复制到数据库中，复制应该只在单击按钮后发生。在数据复制到数据库期间，进度条应该得到启用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:38:12.050

我不确定，但我认为 Background Worker 是您正在寻找的这里是链接 [BackGroundWorker](http://www.knowdotnet.com/articles/backgroundworker.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:52:26.987

为了使用进度条，您需要创建一个与 ui 线程分开的新线程。后台工作人员可能是这样做的最佳方式：

```
 private BackgroundWorker worker = new BackgroundWorker();

 worker.WorkerReportsProgress = true;
 worker.DoWork += new DoWorkEventHandler(worker_DoWork);
 worker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(worker_RunWorkerCompleted);
 Worker.ProgressChanged += new ProgressChangedEventHandler(Worker_ProgressChanged); 
```

在 worker_DoWork 事件中是你应该放置你想要做的东西的地方。在这种情况下复制数据。这也是我将进度条控件设置为可见的事件（默认情况下应该不可见）。为了更新进度条上的值，你需要做

```
 worker.ReportProgress(int amountDone) 
```

正如 Vale 在您的帖子中评论的那样，现在由您来制定一种切实可行的方法来获得已完成工作的百分比/数量，在这种情况下，行数可能是最好的方法：NumberOfRowsCopied /TotalNumberOfRows * 100 = 完成百分比？

要启动后台工作人员，请在您的按钮中单击事件/命令：

```
if (bw.IsBusy != true)
{
    bw.RunWorkerAsync();
} 
```

如果您对计算出取得的进展没有信心，那么也许使用侯爵控件，它只会向用户显示程序没有崩溃并且仍在运行。

# c# - Lync SDK 拦截文件

> ID：11737378
> 
> 赞同：0
> 
> 时间：2012-07-31T09:49:21.580
> 
> 标签：c#, .net, lync, lync-2010

我需要使用 MSPL 和 Lync SDK 拦截文件。我可以截取并获取普通文本消息的内容，但在文件传输方面，Response/Request 的 Content 属性仅包含有关文件的一些信息（例如文件名、文件大小），而不包含真实内容。是否有可能获得传输的文件内容？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T00:52:44.267

我也想做同样的事情，但我在这里看到您无法以编程方式接收文件，您只能通过 Lync UI 来完成。

[http://social.msdn.microsoft.com/Forums/en-US/communicatorsdk/thread/984e53c4-a19d-48b6-8d56-5b0428a11f52/](http://social.msdn.microsoft.com/Forums/en-US/communicatorsdk/thread/984e53c4-a19d-48b6-8d56-5b0428a11f52/)

# css - 边框图像仅在一个边框上，而其他边框是实心的

> ID：11737379
> 
> 赞同：0
> 
> 时间：2012-07-31T09:49:21.897
> 
> 标签：css

我使用边框图像在 TH 的左边框上创建渐变，但右边框必须是实心的。但是边框图像适用于所有边框，并且没有边框图像权限可以阻止它。我怎样才能解决这个问题？

```
<style>
TH {
    border-left:1px solid;
    -webkit-border-image:-webkit-linear-gradient(bottom, #BBB, rgba(255, 255, 255, 0)) 0 100%
    border-right:1px solid #CCC;
}
</style> 
```

这是它现在的样子：

![在此处输入图像描述](../Images/6a0f3446c9fa0518488541a9c907f958.png)

但它必须是这样的：

![在此处输入图像描述](../Images/d8ea77fad647b5b9bc1926af0859d25e.png)

正如你现在看到的，右边框有一个渐变，但我希望它像第二张图片一样是实心的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T10:40:07.323

您为边框添加了渐变效果。代替它创建一个要用作边框的图像。
请参阅此[链接](http://www.w3schools.com/css3/tryit.asp?filename=trycss3_border-image)并查看他们用来提供边框的原始图像。你会通过这样做得到你的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T09:59:21.403

您如何看待这样的黑客攻击：

```
<th style="width:104px; height:100px; background:url(up-down-gradient.png)">
  <div style="width:100px; height:100px; border-right:2px solid #888; margin-left:2px"></div>
</th> 
```

# advanced-installer - 使用高级安装程序，当引导程序 UI 级别处于基本 UI 和进度（或）静默安装（无 UI）时，是否可以添加 EULA

> ID：11737384
> 
> 赞同：2
> 
> 时间：2012-07-31T09:49:44.043
> 
> 标签：advanced-installer

我需要添加 EULA 对话框，在先决条件安装开始之前，在我同意 EULA 之后，先决条件和我的应用程序应该开始安装，确保 BootstrapperUI（即，UI 级别应该在基本 UI 和进度（或）静默安装（否UI））但没有完整的UI，请以正确的方式指导我，我对高级安装程序非常陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:23:30.937

基本 UI 意味着只显示一个进度条。因此，要显示 EULA 对话框，引导程序需要完整的 UI。

要隐藏先决条件，您可以简单地将它们更改为[基于特征的](http://www.advancedinstaller.com/user-guide/prerequisites.html)而不是全局的。这样，您可以在安装先决条件之前显示 LicenseAgreementDlg。之后，您可以简单地删除除 LicenseAgreementDlg 和 ProgressDlg 之外的所有对话框。

# java - 在javascript中加密字符串并在java中解密

> ID：11737390
> 
> 赞同：4
> 
> 时间：2012-07-31T09:49:55.443
> 
> 标签：java, javascript, cryptography, public-key-encryption

我想知道是否有人知道任何库可以在 javascript 中进行加密并在 java 中进行解密。我已经尝试了很多 API，但是在 java 中没有得到相同的值。
我想要公私钥加密，因此尝试使用 RSA。我用过的很少是：

1.  [http://www-cs-students.stanford.edu/~tjw/jsbn/](http://www-cs-students.stanford.edu/~tjw/jsbn/)
2.  [http://ats.oka.nu/titaniumcore/js/crypto/readme.txt](http://ats.oka.nu/titaniumcore/js/crypto/readme.txt)
3.  [http://www.ohdave.com/rsa/](http://www.ohdave.com/rsa/)

我检查的几件事，javascript将字符串分成小块，然后对它们进行加密，这使得java和javascript中的密文不同。我编辑 javascript 代码以将字符串作为一个整体使用，但没有奏效。

我还尝试将 html 页面的字符集设置为 utf-8，但它也不起作用。我成功地加密了像'K'这样的单个字符串以正确加密和解​​密，这让我认为通过将其分成小块来加密javascript中的字符串存在问题（我检查过，但它无法将其加密为所有的）。

我的java实现是：

```
BigInteger d = new BigInteger("1f3fac65c4ae222e3a3074dd4c38fbb72c0705c4bbac0385b867c12c25a44e01", 16);
BigInteger e = new BigInteger("65537");
BigInteger N = new BigInteger("b42e91fbca364cf2a125aec67ffbdab624fd401100c40ea05189ba34d1028b0d", 16);
String messageToEncrypt = "kishor";
byte [] messageByte = messageToEncrypt.getBytes();
BigInteger message = new BigInteger(messageByte);
//Encrypting and Decrypting messages
//Encrypt a message using N and e:
BigInteger ciphertext = message.modPow(e, N);
//Decrypt the message using N and d:
BigInteger plaintext = ciphertext.modPow(d, N);
byte[] plainTextByte = plaintext.toByteArray();
String decryptMessage = new String(plainTextByte);
/*System.out.println("p : " + p);
System.out.println("q : " + q);*/
System.out.println("N : " + N.toString(16));
System.out.println("e : " + e.toString(16));
System.out.println("d : " + d.toString(16));
/*System.out.println("PhiN : " + PhiN);*/
System.out.println("ciphertext : " + ciphertext.toString(16));
System.out.println("decryptMessage : " + decryptMessage);
} 
```

请让我知道是否有可能，因为我已经搜索了很多问题（在 stackoverflow 本身中）但无法找到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T03:19:18.990

尝试 Gibberish AES (JS Lib) [https://github.com/mdp/gibberish-aes/](https://github.com/mdp/gibberish-aes/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T03:33:53.907

RSA 是一种密钥传输机制。您可以使用它来加密对称算法的密钥。据我所见，将它用于其他任何事情的人都不知道他们在做什么，如果他们坚持下去，最终会建立一个毫无价值的加密系统。

我已经成功地在 Java 和[斯坦福 Javascript 加密库之间进行了互操作。](http://crypto.stanford.edu/sjcl/)对于对称加密算法，还有许多其他优秀的 JavaScript 库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T04:06:03.847

嘿伙计们，我想出了解决方案。在 javascript 中，第一个字符被跳过而导致问题的加密。修复了循环。感谢您的回复。

# html - 禁用父div，只显示子div？

> ID：11737393
> 
> 赞同：0
> 
> 时间：2012-07-31T09:50:01.180
> 
> 标签：html, css, joomla

我正在开发 Rockettheme 模板的 Joomla 侧边栏，我想禁用 parent 的所有属性`div` `module-inner3`（禁用`background`、`padding`...`border`等），只显示 children `div` `customright_content`。

我可以通过将 template.css 中的所有代码替换为`right_content`to来做到这一点`module-inner3`，但问题是我需要`module-inner3`为其他页面重用，所以如果我替换它，它会破坏所有其他页面。

有没有办法解决这个问题？

HTML 代码：

```
<div class="module-inner3">
<div class="customright_content">
blablad
</div>
</div> 
```

CSS 代码：

```
module-inner3{
background: url("../images/shadows/light/module-top2.png") repeat-x scroll 50% 0 transparent;
padding: 15px 6px 0 6px;
}

customright_content {
background: url("../images/background.png") repeat-x scroll 50% 0 transparent;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:32:53.950

如果您绝对确定没有要保留的样式，那么只需从该 div 中删除该类即可。但是，我倾向于添加一个类（你可以想出一个比这里说明的更好的名称），只是因为这样，如果你有其他样式想要保持原位`.module-inner3`（浮动、位置等），你可以保留那些。

```
<div class="module-inner3 override"> 
  <div class="customright_content"> 
    blablad 
  </div> 
</div> 
```

```
.module-inner3 { 
   background: url("../images/shadows/light/module-top2.png") repeat-x scroll 50% 0 transparent; 
   padding: 15px 6px 0 6px; 
}

.module-inner3.override {
   background: none;
   padding: 0;
}

.customright_content { 
   background: url("../images/background.png") repeat-x scroll 50% 0 transparent; 
} 
```

# javascript - asp.net div/iframe 作为目标

> ID：11737397
> 
> 赞同：0
> 
> 时间：2012-07-31T09:50:07.293
> 
> 标签：javascript, html, iframe

我有一个被调用的 div，`mainContent`如果我单击要清除的链接`maincontent`，将一个添加`iframe`到 div，然后从链接中的链接打开页面`iframe`

该怎么做呢？我假设需要一些 JS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:56:16.160

```
<a href="javascript:SetContent();">Some link</a>
<script>
    function SetContent()
    {
       document.getElementById('mainContent').innerHTML = 
          "<iframe width=" + screen.width + "px height=" + screen.height +  
          "px src='http://www.SomeUrl.com'></iframe>";
    }
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:57:10.917

像[这样](http://jsfiddle.net/tvJah/)？

```
<script type="text/javascript">
function addiframe(){
    document.getElementById("maincontent").innerHTML='<iframe name="myiframe"></iframe>';
}​
</script>
<div id="maincontent">asd</div>
<a href="//example.com" onclick="addiframe()" target="myiframe">click</a>​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:02:23.743

试试这个片段。您需要包含 jquery 库才能使用它。

```
function appendContent(){
$('#mainContent').html('');
$('#mainContent').html('<iframe name="myiframe" width=620 height=380 src="http://stackoverflow.com" frameborder="1"></iframe>');
} 
```

# web-services - WS 安全问题

> ID：11737399
> 
> 赞同：0
> 
> 时间：2012-07-31T09:50:12.337
> 
> 标签：web-services, spring-ws, spring-integration

我正在尝试使用 Spring-integration 和 Spring-ws-core 调用使用 Axis2 和 SOAP 1.2（仅轴 2）的 Web 服务。问题是它返回一个错误：

```
15:15:14,128 TRACE SaajUtils:184 - SOAPElement [com.sun.xml.internal.messaging.saaj.soap.ver1_1.Fault1_1Impl] implements SAAJ 1.3
org.springframework.integration.MessageHandlingException: error occurred in message handler [org.springframework.integration.ws.SimpleWebServiceOutboundGateway#14683c0]
    at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:79)
    at org.springframework.integration.handler.MessageHandlerChain$1.send(MessageHandlerChain.java:154)
    at org.springframework.integration.core.MessagingTemplate.doSend(MessagingTemplate.java:288)
    at org.springframework.integration.core.MessagingTemplate.send(MessagingTemplate.java:149)
    at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.sendMessage(AbstractReplyProducingMessageHandler.java:175)
    at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.sendReplyMessage(AbstractReplyProducingMessageHandler.java:159)
    at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.produceReply(AbstractReplyProducingMessageHandler.java:124)
    at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleResult(AbstractReplyProducingMessageHandler.java:118)
    at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:100)
    at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:73)
    at org.springframework.integration.handler.MessageHandlerChain.handleMessageInternal(MessageHandlerChain.java:137)
    at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:73)
    at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:114)
    at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:101)
    at org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:61)
    at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:157)
    at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:128)
    at com.csc.billingux.WebServiceClient.sendRequesttoService(WebServiceClient.java:40)
    at com.csc.billingux.rest.AccountServiceAdapter.accountService(AccountServiceAdapter.java:47)
    at com.csc.ControllerServlet.doPost(ControllerServlet.java:47)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.springframework.ws.soap.client.SoapFaultClientException: WSDoAllReceiver: Incoming message does not contain required Security header
    at org.springframework.ws.soap.client.core.SoapFaultMessageResolver.resolveFault(SoapFaultMessageResolver.java:37)
    at org.springframework.ws.client.core.WebServiceTemplate.handleFault(WebServiceTemplate.java:774)
    at org.springframework.ws.client.core.WebServiceTemplate.doSendAndReceive(WebServiceTemplate.java:600)
    at org.springframework.ws.client.core.WebServiceTemplate.sendAndReceive(WebServiceTemplate.java:537)
    at org.springframework.integration.ws.SimpleWebServiceOutboundGateway.doHandle(SimpleWebServiceOutboundGateway.java:88)
    at org.springframework.integration.ws.AbstractWebServiceOutboundGateway.handleRequestMessage(AbstractWebServiceOutboundGateway.java:176)
    at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:97)
    at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:73)
    ... 37 more 
```

我的分析是它使用的是 SOAP 1.3 而不是 1.2。我什至提供了指定 SOAP 版本 1.2 的配置：

```
<beans:bean id="messageFactory" class="org.springframework.ws.soap.saaj.SaajSoapMessageFactory">     
    <beans:property name="soapVersion">         
    <util:constant static-field="org.springframework.ws.soap.SoapVersion.SOAP_12"/>  
    </beans:property>
    </beans:bean> 
```

我是否需要包含任何特定的 jar（轴 2 的特定 jar）以便它使用 SOAP 1.2？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:30:02.160

您误解了堆栈跟踪。这是关键线

```
Incoming message does not contain required Security header 
```

这与 SAAJ 或 SOAP 无关。

# spring - JSF2.0 国际化在服务器上不起作用

> ID：11737403
> 
> 赞同：0
> 
> 时间：2012-07-31T09:50:20.607
> 
> 标签：spring, jsf, tomcat, localization, internationalization

我使用 JSF 2.0 和 Spring 3.0.2 和 tomcat 7.0.14.0 作为服务器。我在更改网站语言时遇到问题。所有代码在我的本地服务器上运行良好。但是当我在服务器上部署时，语言更改不起作用。它会自动选择意大利作为默认语言。当我点击另一种语言时，没有任何变化。这是我的 bean 代码：

```
 @ManagedBean(name="language")
           @SessionScoped
          public class LanguageBean implements Serializable{

private static final long serialVersionUID = 1L;

private String localeCode;

private static Map<String,Object> countries;
    static{
    countries = new LinkedHashMap<String,Object>();
    countries.put("English", Locale.ENGLISH); //label, value

            countries.put("Italian", Locale.ITALIAN);
}

public LanguageBean() {
    countries = new LinkedHashMap<String,Object>();

            countries.put("English", Locale.ENGLISH); //label, value
            countries.put("Italian", Locale.ITALIAN);

}

public Map<String, Object> getCountriesInMap() {
    return countries;
}

public String getLocaleCode() {
    return localeCode;
}

public void setLocaleCode(String localeCode) {
    this.localeCode = localeCode;
}

    public void countryLocaleCodeChanged(ValueChangeEvent e){

    String newLocaleValue = e.getNewValue().toString();

    for (Map.Entry<String, Object> entry : countries.entrySet()) {
            System.out.println("newLocaleValue "+newLocaleValue+"\n entry.getValue().toString()"+entry.getValue().toString());
        if(entry.getValue().toString().equals(newLocaleValue)){

            FacesContext.getCurrentInstance()
                .getViewRoot().setLocale((Locale)entry.getValue());
                    FacesContext context = FacesContext.getCurrentInstance(); 
                    System.out.println("Default : "+context.getApplication().getDefaultLocale()); 

                    context.getApplication().setDefaultLocale((Locale)entry.getValue());

        }
    }

} 
```

这是 config.xml::

```
 <locale-config>
        <default-locale>en</default-locale>
    </locale-config>
    <resource-bundle>
        <base-name>com.mad_u.welcome</base-name>
        <var>msg</var>
    </resource-bundle> 
```

请给我一些想法。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:31:04.107

我有同样的问题。我的属性文件是这样的：

*   message_en_US.properties
*   message_es_ES.properties
*   message_eu_ES.properties

它在我的本地服务器上工作，但将网络上传到我的服务器，语言更改不起作用，所以我改变了这个：

```
 countries.put("Castellano", new Locale("es"));
        countries.put("Euskara", new Locale("eu"));
        countries.put("English", new Locale("en")); 

<locale-config>
            <default-locale>es</default-locale>
            <supported-locale>es</supported-locale>
            <supported-locale>eu</supported-locale>
            <supported-locale>en</supported-locale>
        </locale-config> 
```

和

*   message_en.properties
*   message_es.properties
*   message_eu.properties

# ios - 当用户在 iOS 中删除我的应用时，我可以做些什么吗？

> ID：11737404
> 
> 赞同：0
> 
> 时间：2012-07-31T09:50:21.947
> 
> 标签：ios

当用户在 iOS 中删除应用程序时，我可以做些什么吗？我认为这是不可能的，但也许有任何技巧可以调用我的应用程序的方法，或者只是在操作系统级别做一些事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:59:24.777

不..您无法捕获应用程序删除事件..！！

# java - 如何在axis2中创建configurationContext？

> ID：11737405
> 
> 赞同：3
> 
> 时间：2012-07-31T09:50:25.037
> 
> 标签：java, axis2

我正在使用 Eclipse，我使用 AXis2 创建了存根，我需要在我的 Java 类中创建对象，所以我需要创建一个`ConfigurationContext`从存根调用创建的对象，我有如下构造函数：

```
public ZLOGIN_USERStub(org.apache.axis2.context.ConfigurationContext configurationContext) 
throws org.apache.axis2.AxisFault {
     this(configurationContext,"http://smesrv1.spartaconsulting.com:8008/sap/bc/srt/rfc/sap/zlogin_user/100/zlogin_user/zlogin_user" );           
} 
```

为此我需要通过`configurationContext`，我不知道该怎么做。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T13:26:55.157

该函数是 Axis2 为您生成的吗？您可以传递`null`配置上下文，Axis2 将使用它自己创建的上下文。事实上，如果您要检查其他存根构造函数，您应该找到一个接受 String 目标端点的单参数构造函数。该构造函数使用 null 作为配置上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-06T08:51:08.240

您甚至不需要为配置上下文传递 null。只需在构造函数中提供目标端点 url，axis2 将默认为配置上下文传递 null。

```
public ZLOGIN_USERStub(String END_POINT_URL) throws org.apache.axis2.AxisFault 
{
  this(null,END_POINT_URL);           
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-23T07:53:09.240

您可以使用 axis2 库中的 configurationContextFactory 类来创建 configurationContext 对象 configurationContextFactory 是一个有许多静态方法来创建 configurationContext 对象，其中一些在下面列出

```
ConfigurationContextFactory.createDefaultConfigurationContext();
ConfigurationContextFactory.createEmptyConfigurationContext();
ConfigurationContextFactory.createConfigurationContextFromFileSystem(String path, String axis2xml); 
```

有关更多详细信息，请参阅[http://axis.apache.org/axis2/java/core/apidocs/org/apache/axis2/context/ConfigurationContextFactory.html](http://axis.apache.org/axis2/java/core/apidocs/org/apache/axis2/context/ConfigurationContextFactory.html)

# java - 处理文件目录

> ID：11737413
> 
> 赞同：1
> 
> 时间：2012-07-31T09:50:40.673
> 
> 标签：java, command-line, directory

我正在编写一个读取文件然后处理它们的程序。目前，我正在使用 BufferedReader 从 txt 文件中读取文件列表。此 txt 文件是在命令提示符下生成的：

```
dir > filelist.txt 
```

然后将其裁剪为仅文件名。

我可以通过以下方式将其合并到我的脚本中：

```
//pseudo code(needs further directory specification)
Runtime run = Runtime.getRuntime();//pseudo code(needs further directory specification)
Process process = run.exec("dir > filelist.txt"); 
```

此命令以以下形式提供包含文件的目录：

```
dd/mm/yyyy hh:mm       (filesize) file 
```

一旦我有了这个文件，我就可以运行一个正则表达式来提取文件名。

```
Pattern file = Pattern.compile("(\d){2}/(\d){2}/(\d){4}\s(\d){2}(:)(\d){2}\s(\d+)\s(.+)\.txt");

for (String fileline : filelist) {
    Matcher matchfile = file.matcher(fileline);
    if(matchfile.find()){
        filearray.add(matchfile.group().split("\\s")[3]);
    }
} 
```

有没有更简单的方法从 Java SE 中的目录中获取文件名？这似乎有点啰嗦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:52:48.077

使用`list()`方法

```
File f = new File("d:\\MyFolder");
String[] fileNames = f.list(); 
```

您可以使用以下方法进一步**分离文件和目录**

```
isFile()
isDirectory() 
```

**/////////////////已编辑//////////////**

**假设**我想**知道这个 File 对象是文件还是目录......**

```
File f = new File("d:\\MyFolder");

if (f.isDirectory()) {

    System.out.println("Its a directory");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T09:54:39.940

在 Java 7 中，您拥有*[nio.2 工具](http://docs.oracle.com/javase/tutorial/essential/io/fileio.html)**，它们对Paths*和*Files*类更加完整和有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T11:05:23.227

在这里，您可以获取示例代码以从文件夹中获取文件列表。

```
File file = new File("C:/MyFolder/");
    File[] files = file.listFiles();
    for(File f: files){
        System.out.println(f.getName());
    } 
```

您可以从[http://java2novice.com/java-file-io-operations/file-list-from-folder/获得更多示例](http://java2novice.com/java-file-io-operations/file-list-from-folder/)

# web-services - php web 服务的私有和公共 web 服务身份验证

> ID：11737418
> 
> 赞同：0
> 
> 时间：2012-07-31T09:51:02.960
> 
> 标签：web-services, apache, authentication

我在 server1 中运行了两个 Web 服务（即 my_public_api 和 my_private_api）。（PHP，阿帕奇）

http:// ipaddress/my_public_api -- 每个人都可以访问。

http:// ipaddress/otherfuncation/my_private_api - 只能由批准的用户或特定的 ipaddress(server2) 访问

我想为此实施一些身份验证。这可以使用 htpasswd 基本身份验证来完成吗？如果不是什么可能的方式来实现这一点。如果我使用客户端身份验证，是否只能保护我的 private_api 并让 my_public_api 可供所有人访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:48:45.747

我找到了一种使用 SSL 完成此任务的方法，

1.  生成服务器和客户端证书
2.  将生成的证书指向apache。
3.  在 httpd.conf 中限制 api 位置/虚拟路径
4.  分发您要授予访问权限的客户端证书。

[在这里查看](http://www.garex.net/apache/)以了解如何设置 SSL 证书

例如：httpd.conf

```
<Location /mysite/private_api>
SSLRequireSSL
SSLVerifyClient require
SSLVerifyDepth 1
</Location> 
```

[在这里](http://httpd.apache.org/docs/2.0/ssl/ssl_howto.html#arbitraryclients)查看更多详情

# c++ - 64位整数比较情况下的奇异结果

> ID：11737419
> 
> 赞同：-2
> 
> 时间：2012-07-31T09:51:16.450
> 
> 标签：c++, aix

我`__int64`在 64 位 AIX 上使用数据类型，在与 0 进行比较的情况下，我得到了奇怪的结果。

代码片段：

```
__int64 indexExistingPart =  GetValue(); // GetValue always returns -1.

if (indexExistingPart < 0 )
{
    DoSomething(); //control never comes to this part of the code
} 
```

我还尝试将 0 分配给另一个`__int64`变量并在比较中使用。但是，这也不起作用：

```
__int64 indexExistingPart =  GetValue(); // GetValue always returns -1.

__int64 temp =0;

if (indexExistingPart < temp )
{
    DoSomething(); //control never comes to this part of the code
} 
```

为什么比较运算符不适用于 64 位整数？有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T01:09:53.257

这些症状与您项目`__int64`中的 typedef一致。`unsigned long`（`__int64`不是 AIX 提供的类型，至少根据 IBM 文档。）试试这个：

```
#include <stdint.h> // or #include <sys/types.h>, or #include <inttypes.h>

int64_t indexExistingPart = GetValue();  // or "signed long indexExistingPart ..."

if (indexExistingPart < 0 )
{
    DoSomething();
} 
```

# java - 在 Java 桌面应用程序中与数据库交互的最佳方式

> ID：11737422
> 
> 赞同：0
> 
> 时间：2012-07-31T09:51:21.430
> 
> 标签：java, database, architecture

我想用java开发一个桌面应用程序。我不喜欢纯 JDBC——它太低级了。我不喜欢 Hibernate，在桌面应用程序中使用 Hibernate 非常棘手。而且我不想写大量的xml配置......

有什么建议么？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:56:43.160

你可以试试 MyBatis：[http ://code.google.com/p/mybatis/](http://code.google.com/p/mybatis/)

如需快速描述，您可以查看 Wikipedia 文章：[http ://en.wikipedia.org/wiki/MyBatis](http://en.wikipedia.org/wiki/MyBatis)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:57:53.417

您可以使用 Spring JDBC，它简单、强大且干净。

您将不得不编写少量 XML 或尝试注释。

如果您不了解spring，则值得研究。

你也可以试试 mybatis 但是有 XML。

问候

菲利普

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:26:26.533

如果您想完全控制 SQL 数据库模式，请使用[MyBatis](http://www.mybatis.org/core/)。另一种方式选择标准且易于使用的[Java Persistence API(JPA) 。](http://www.oracle.com/technetwork/articles/javaee/jpa-137156.html)

# java - LibGDX - 调用 TiledMapRenderer.render() 时应用程序崩溃

> ID：11737426
> 
> 赞同：7
> 
> 时间：2012-07-31T09:51:31.460
> 
> 标签：java, android, 2d, render, libgdx

```
@Override
public void render(float delta) {
    Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);

    camera.update();
    sprite.setProjectionMatrix(camera.combined);

    mLevel.getTiledMapRenderer().getProjectionMatrix().set(camera.combined);
    Vector3 tmp = new Vector3();
    tmp.set(0, 0, 0);
    camera.unproject(tmp);
    mLevel.getTiledMapRenderer().render(tmp.x, tmp.y, camera.viewportWidth, camera.viewportHeight);

    sprite.begin();
    ...
    sprite.end();
} 
```

这是我在启动桌面版本时得到的：

```
Exception in thread "LWJGL Application" java.lang.IllegalArgumentException: Number of remaining buffer elements is 0, must be at least 1\. Because at most 1 elements can be returned, a buffer with at least 1 elements is required, regardless of actual returned element count
    at org.lwjgl.BufferChecks.throwBufferSizeException(BufferChecks.java:162)
    at org.lwjgl.BufferChecks.checkBufferSize(BufferChecks.java:189)
    at org.lwjgl.BufferChecks.checkBuffer(BufferChecks.java:230)
    at org.lwjgl.opengl.GL15.glBufferData(GL15.java:141)
    at com.badlogic.gdx.backends.lwjgl.LwjglGL20.glBufferData(LwjglGL20.java:93)
    at com.badlogic.gdx.graphics.glutils.VertexBufferObject.bind(VertexBufferObject.java:208)
    at com.badlogic.gdx.graphics.Mesh.bind(Mesh.java:268)
    at com.badlogic.gdx.graphics.g2d.SpriteCache.begin(SpriteCache.java:868)
    at com.badlogic.gdx.graphics.g2d.tiled.TileMapRenderer.render(TileMapRenderer.java:336)
    at com.badlogic.gdx.graphics.g2d.tiled.TileMapRenderer.render(TileMapRenderer.java:286)
    at com.crunsh.libgdx.screens.GameScreen.render(GameScreen.java:102)
    at com.badlogic.gdx.Game.render(Game.java:46)
    at com.badlogic.gdx.backends.lwjgl.LwjglApplication.mainLoop(LwjglApplication.java:202)
    at com.badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:131) 
```

我已经尝试过[这个 tuto](http://code.google.com/p/libgdx-users/wiki/Tiles#Render)和[这个](http://dpk.net/2011/05/01/libgdx-box2d-tiled-maps-full-working-example-part-1/#p5)，我在同一行得到了同样的错误`mLevel.getTiledMapRenderer().render(tmp.x, tmp.y, camera.viewportWidth, camera.viewportHeight);`。

**编辑：**我刚刚注意到我的 .tmx 文件的数据是由平铺地图编辑器自动编码的，所以我只是停用了它，但仍然得到同样的错误。
如果我复制/粘贴[这个项目](http://dpk.net/2011/05/01/libgdx-box2d-tiled-maps-full-working-example-part-1/#p5)（我的意思是整个项目，不仅是 render() 方法）它可以工作，但是当我尝试在我自己的项目中加载我自己的地图时它只会崩溃......

所以在那之后我决定`render()`通过像我之前给出的链接并使用`TiledMapHelper class`作者提供的那样来简化我的方法，所以现在有我的`render()`方法：

```
mHelper.getCamera().update();
mHelper.render(); 
```

仍然crashiiiiiiiiiiiiiiiingg .....
如果有人可以请提供一些帮助，将不胜感激，因为atm我真的要疯了！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T19:09:12.983

我找到了导致错误的原因：
1）我的“packfile”中的
所有图块的索引都为-1 2）我的“packfile”中的所有图块的名称与其原始图块文件名相同，但名称不同.png 文件包含所有打包的图块。

目前我的屏幕是黑色的，所以我认为没有绘制任何图块（可能是因为我为包文件中的图块提供了随机索引 - 已**修复，请参阅帖子末尾**）但没有抛出异常，这就是重点。

这些错误是由于我用来打包瓷砖的程序造成的，该程序本应让我赢得时间，哈哈。所以我会尝试不同的选择或使用其他东西。
如果您想知道该程序是“TexturePacker GUI”v3.1.0。

如果您知道我应该/不应该使用哪些选项来避免错误，请告诉我。

**编辑：**找到了一个有用且有效的工具来打包瓷砖，这里是： http: ~~[//freigabe.philweb.de/bubblr/texturepacker_edited.jar](http://freigabe.philweb.de/bubblr/texturepacker_edited.jar)~~（链接已失效；改用这个=> [http://bit.ly/ 1a831nv](http://bit.ly/1a831nv)或其他打包工具 => [http://bit.ly/1aLgAFt](http://bit.ly/1aLgAFt) )

要使用它，请打开 cmd 并转到下载 .jar 文件的目录，然后：

```
//You should create, in the same directory of the .jar file, two additionnal folders
//Call the first folder 'input' and put in all your tiles (rename them "level_1.png", "level_..")
//Call the 2nd folder 'output' and leave it empty
//Then just type in the command prompt : java -jar nameOfDownloadedJarFile.jar input output level
//Then rename the "input1.png" into "level.png", and "level.pack" into "level packfile"
//Open "level packfile" with notepad and change "input1.png" into "level.png"
//Then draw your map using "level.png" in TiledMapEditor
//Then just follow dpk' tutorial for rendering the map and it should work 
```

这是我提到的 dpk 的教程，请从这里开始：[http ://dpk.net/2011/05/01/libgdx-box2d-tiled-maps-full-working-example-part-1/#p4](http://dpk.net/2011/05/01/libgdx-box2d-tiled-maps-full-working-example-part-1/#p4)

如果应用程序没有崩溃但屏幕是黑色的，只需增加相机的视口的宽度和高度。

快乐的映射:)！

# regex - 用于识别句子的正则表达式

> ID：11737430
> 
> 赞同：0
> 
> 时间：2012-07-31T09:51:44.083
> 
> 标签：regex, expression

以下是我的示例行：“lonelyplanet”|| **“你同意吗？RT @wheresandynow：世界上最粗鲁的旅行者国家 - 福布斯[http://t.co/0Fcq7B6r](http://t.co/0Fcq7B6r) #forbeslife #lp”** || "zh" || “2012 年 4 月 3 日星期二 17:02:23 +0000”|| 新罕布什尔州 || 南塔姆沃思

我只想提取那些用粗体写的行。

我尝试了 (\|)(\|)\s\"(.*?)+\" 但它提取了 "en" 和 "Tue, 03 Apr 2012 17:02:23 +0000" 除了所需的一个。

请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:04:05.723

尝试这个：`/(?<=\|\|)[^|]+/`

```
'"lonelyplanet" || "Do you agree? RT @wheresandynow: The World\'s Rudest Nations For Travelers - Forbes http://t.co/0Fcq7B6r #forbeslife #lp" || "en" || "Tue, 03 Apr 2012 17:02:23 +0000" || NH || South Tamworth' =~ /(?<=\|\|)[^|]+/
=> 17

$&
=> " \"Do you agree? RT @wheresandynow: The World's Rudest Nations For Travelers - Forbes http://t.co/0Fcq7B6r #forbeslife #lp\" " 
```

# oracle - ORACLE 在 NCLOB 中查找一些前后单词

> ID：11737431
> 
> 赞同：1
> 
> 时间：2012-07-31T09:51:50.377
> 
> 标签：oracle

我在 NCLOB 列中有大字符串，我允许用户在其中搜索。我想以最好的方式显示结果。有没有办法在我的结果集中“剪切”一些前面和后面的单词？

使用`dbms_lob.instr()`函数查找结果。我找到了一些解决方案，但在这种情况下使用起来很复杂而且很慢。

什么是最有效的方法？instr 和 susbstr 的组合？还是正则表达式？我担心 LOB 列上的正则表达式性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:01:05.273

好的，我做到了！像这样

```
REGEXP_SUBSTR(dbms_lob.substr(MC.content_txt,80,dbms_lob.instr(UPPER(MC.content_txt),UPPER(:key))-40),' .+[ \/,\\]',1,1,'n') 
```

它在键周围切割 80 个字符，然后输出完整的单词（从第一个空格到最后一个空格/逗号/斜杠/反斜杠）。

# c++ - Netbeans 中的外部依赖项

> ID：11737437
> 
> 赞同：1
> 
> 时间：2012-07-31T09:52:16.140
> 
> 标签：c++, visual-studio-2010, netbeans, netbeans-7

我在 Visual Studio 2010 中创建了一个自定义操作项目，它默认设置了外部依赖项。现在我正在将项目迁移到 NetBeans。迁移时我需要记住什么，以及如何在 NetBeans 中配置外部依赖项？

# java - java.net.UnknownHostException：网址

> ID：11737439
> 
> 赞同：2
> 
> 时间：2012-07-31T09:52:18.460
> 
> 标签：java, https, telnet, ftpes

我编写了一个 java 文件，该文件打开一个到服务器的 HTTPS 连接，该服务器提供了从我们的 unix 服务器调用其 Web 服务的受限访问权限。所以我们可以ping服务器ip，用端口443远程登录服务器ip，所以网络团队已经确认我们可以开始调用webservices了。现在我们已经在 Windows 服务器上尝试了一切，将他们提供的证书安装在本地文件夹中，然后简单地运行 jar。我们能够建立连接。现在我们必须迁移到 unix 服务器。我们已将本地证书复制到 jar 中。在运行 jar 时，我们得到以下异常。

```
 java.net.UnknownHostException: wugateway2pi.westernunion.net
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:195)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
    at java.net.Socket.connect(Socket.java:529)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.connect(SSLSocketImpl.java:564)
    at com.sun.net.ssl.internal.ssl.BaseSSLSocketImpl.connect(BaseSSLSocketImpl.java:141)
    at sun.net.NetworkClient.doConnect(NetworkClient.java:163)
    at sun.net.www.http.HttpClient.openServer(HttpClient.java:388)
    at sun.net.www.http.HttpClient.openServer(HttpClient.java:523)
    at sun.net.www.protocol.https.HttpsClient.<init>(HttpsClient.java:272)        at                         
      sun.net.www.protocol.https.HttpsClient.New(HttpsClient.java:329)
    at 

       sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.getNewHttpClient
        (AbstractDelegateHttpsURLConnection.java:172)
    at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:911)
    at  sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect
         (AbstractDelegateHttpsURLConnection.java:158)
    at sun.net.www.protocol.http.HttpURLConnection.getOutputStream
          (HttpURLConnection.java:1014)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream
        (HttpsURLConnectionImpl.java:230)
    at utils.HelloWorld.heartbeat(HelloWorld.java:129)
    at utils.HelloWorld.main(HelloWorld.java:492)
     TRANSFAST: Some Error occurs during parsing the sendtrnx response
        java.lang.IllegalArgumentException: InputStream cannot be null
    at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:120)
    at utils.HelloWorld.heartbeat(HelloWorld.java:160)
    at utils.HelloWorld.main(HelloWorld.java:492)
      java.lang.RuntimeException: Exception in XML Parsing for the Response:
    at utils.HelloWorld.heartbeat(HelloWorld.java:184)
    at utils.HelloWorld.main(HelloWorld.java:492)
      Calling heartbeat  noCall 
```

不知道缺少什么。

问候，瑞奇

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T06:48:14.887

通过在我的主机文件中添加以下条目解决了该问题。（在 Linux 和 Unix 文件将在 下可用`/etc/hosts`）

```
<ip address>       wugateway2pi.westernunion.net 
```

这行得通。

# redis - 用于复制的 Redis 临时文件的位置？

> ID：11737440
> 
> 赞同：6
> 
> 时间：2012-07-31T09:52:18.607
> 
> 标签：redis, debian, replication, sync, temp

我试图在 debian 机器上设置主从同步。我总是在我的日志中得到那个错误，我不知道临时文件应该在哪里=/

```
[9559] 31 Jul 11:48:17 * Connecting to MASTER...
[9559] 31 Jul 11:48:17 * MASTER <-> SLAVE sync started
[9559] 31 Jul 11:48:17 * Non blocking connect for SYNC fired the event.
[9559] 31 Jul 11:48:22 # Opening the temp file needed for MASTER <-> SLAVE synchronization: Permission denied 
```

希望你们能帮助我:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T10:07:09.513

运行该`redis-server`进程的用户很可能无权访问工作目录。

检查您的`redis.conf`（在大多数情况下`/etc/redis.conf`）并找到`dir`设置（搜索“工作目录”以找到它和它的文档），确保该目录可由运行`redis-server`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-31T10:07:03.440

实际上，master 在 SYNC 时生成的文件是一个普通的快照文件（即 rdb 文件），与任何其他 rdb 文件写入相同的位置。

此位置在主实例的 Redis 配置文件中设置 - 请参阅 dir 和 dbfilename 参数。

例如在 /data/redis/dump.rdb 中生成转储

```
# The filename where to dump the DB
dbfilename dump.rdb

# The working directory.
#
# The DB will be written inside this directory, with the filename specified
# above using the 'dbfilename' configuration directive.
#
# Also the Append Only File will be created inside this directory.
#
# Note that you must specify a directory here, not a file name.
dir /data/redis 
```

当然，启动 Redis 的用户必须对该位置具有适当的访问权限。

现在，在从机端，从主机读取的转储文件被复制到一个临时文件中，其名称类似于 temp-%d.%ld.rdb（包括时间戳和 pid）。该文件在工作目录中创建，对应从属实例配置中的 dir 参数。所以即使RDB在slave端没有激活，也必须正确设置dir参数并指向具有合适访问权限的目录。

# java - 一行状态检查中的三个状态？（关于 Java 语法）

> ID：11737441
> 
> 赞同：0
> 
> 时间：2012-07-31T09:52:19.400
> 
> 标签：java, if-statement

那代码片段

```
if (addMore) {
    y = x + moreValue;
} else {
    y = x;
} 
```

可以压缩成：

```
y = (addMore ? x + moreValue : x); 
```

对大多数具有一定 Java 经验的程序员来说是熟悉的。但我想知道是否可以将两个以上的状态压缩成一行，例如：

```
if (addMore) {
    y = x + moreValue;
} else if (50 < x) {
    y = 50;
} else {
    y = x;
} 
```

如何将其（如果可能的话）压缩为一个语句，例如：

```
y = (addMore ? x + moreValue {SOMETHING IN HERE} : x); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T09:54:00.900

```
condition1 ? (condition1-2 ? action 1-2: action-not-1-2) : action-not-1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T09:54:58.957

```
y = (addMore ? x + moreValue : (50 < x ? 50 : x)); 
```

但正如评论中所说，这远不如 if..else 语句可读，所以我认为应该避免它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T09:59:31.353

**1.**一句臭名昭著的谚语......“**任何傻瓜都可以编写计算机可以理解的代码，但只有优秀的程序员才能编写人类可以理解的代码......** ”

**2.**更多关于`readability`和`understandability`。

但这里仍然是你的答案......

`(addMore ? x + moreValue : (50 < x ? 50 : x))` **// 将此赋值给 y**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T10:00:10.800

我经常使用这样的构造，它让人想起 Clojure 的`cond`：

```
y = 
  addMore ? x + moreValue :
  50 < x  ? 50            :
            x; 
```

我发现可读性没有问题，恰恰相反。我喜欢这样，我可以确定整个构造是关于为 y 赋值。对于经典的 if-else if 组合，这一点都不明显。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-31T10:10:27.873

```
Using Ternary operator, more than one condition can check.
if First condition is true then compare with second value.

y = (addMore ? x + moreValue : (50 < x ? 50 : x)); 
```

# vb.net - 如何使用关系和绑定从数据集表导航？

> ID：11737442
> 
> 赞同：1
> 
> 时间：2012-07-31T09:52:20.113
> 
> 标签：vb.net, binding, datagridview, navigation, relation

我有一个带有 VB.Net 的应用程序，我正在使用一个带有两个数据表的数据集。我在两个表之间建立了关系并浏览了数据。我从一个记录导航到另一个记录。但我也想使用数据集中表之间的关系，并从另一个表中获取记录。有什么办法吗？以下代码显示了我如何显示数据：

```
sql = "select * from COMPUTER"
da = New SqlDataAdapter(sql, sqlConn)
da.Fill(dsPC, "pcTable")

sql = "select * from COMPUTER_BRAND"
da = New SqlDataAdapter(sql, sqlConn)
da.Fill(dsPC, "pcBrand") 

pcLocation = New DataRelation("pcLocation", 
                              dsPC.Tables("pcTable").Columns(0),
                              dsPC.Tables("pcLocation").Columns(1))   
dsPC.Relations.Add(pcLocation) 
```

现在，如何在数据表中的记录之间导航？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:46:02.283

您必须使用[GetChildRows](http://msdn.microsoft.com/en-us/library/hbt8xha8.aspx)方法。

* * *

**例子：**

```
For Each row in dsPC.Tables("pcTable").Rows
    Dim child_rows = row.GetChildRows(pcLocation)     
    ' Do something with child rows    
Next 
```

# ruby-on-rails - 如果出现异常，则自动重新启动 rake 任务

> ID：11737445
> 
> 赞同：1
> 
> 时间：2012-07-31T09:52:25.360
> 
> 标签：ruby-on-rails, rake-task, god

我有一个必须始终运行的 rake 任务。但有时这项任务可能会失败。我需要自动重启吗？我想我需要使用[God gem](http://godrb.com/)还是有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T13:52:38.837

这完全取决于您的问题，但是纯 Ruby 解决方案如何：

```
begin
  puts "Start"
  raise "BOOOM"
rescue Exception => e
  puts e.message
  sleep(2)
  retry
end 
```

每次捕获异常时重试开始阻塞。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T14:15:35.097

就我而言，我需要的是[上帝的宝石](http://godrb.com)，谢谢您的回答！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T10:02:13.687

如果您使用的是 ubuntu，则可以通过如下配置轻松使用 upstart：

```
start on startup
stop on shutdown

pre-start script
   cd /var/www/my-app/current
end script

script
   exec RAILS_ENV=production bundle exec rake my_task_name
end script 
```

在这里阅读更多：http: [//www.stackednotion.com/blog/2012/02/09/easy-rails-daemons-with-upstart/](http://www.stackednotion.com/blog/2012/02/09/easy-rails-daemons-with-upstart/)

# javascript - JSONP 和 401 响应

> ID：11737446
> 
> 赞同：0
> 
> 时间：2012-07-31T09:52:32.907
> 
> 标签：javascript, html, jsonp

您好尝试在我的网页上使用 JSONP 并使用 javascript 生成以下代码：

```
<script src="https://{{ username }}:{{ password }}@www.link.com/api/2/project/link/resource/core/stats/?callback=updateStats&amp;random=1343727774180" id="jsonp"></script> 
```

这是使用下面的代码生成的

```
function handleRefresh(url) {
    console.log("here");

    var newScriptElement = document.createElement("script");
    newScriptElement.setAttribute("src", url);
    newScriptElement.setAttribute("id", "jsonp");
    var oldScriptElement = document.getElementById("jsonp");
    var head = document.getElementsByTagName("head")[0];
    if (oldScriptElement == null) {
        head.appendChild(newScriptElement);
    }
    else {
        head.replaceChild(newScriptElement, oldScriptElement);
    }
}

function updateStats(stats) {
    var salesDiv = document.getElementById("stats");
    var newData = [];
    if(!stats){
        alert("need to log in");
    }else{
        alert("ok");
    }
    for ( var s in stats )
    {
            var data = stats[s];
            data.language = s;
            newData.push(data.language);
        }       

    for (var i = 0; i < newData.length; i++) {
        var glossa = newData[i];
        var stat = stats[glossa];

        var div = document.createElement("div");
        div.setAttribute("id", "progressbar");
        var indicator = document.createElement("label");
        indicator.setAttribute("id","indicator");

        var checkbox = document.createElement('input');
        checkbox.type = "checkbox";
        checkboxname = glossa;
        checkbox.value = "value";
        checkbox.id = "id";

        glossesArray[i]=glossa;

        div.appendChild(checkbox);
        div.appendChild(indicator);

        var zaab = parseInt(stat.completed, 10);
            //console.log(zaab);

        if(zaab < 35){
            indicator.innerHTML = glossa;
        }else{
            indicator.innerHTML = glossa + " : " + stat.completed;
            } 
        indicator.style.width = stat.completed;
        //indicator.innerHTML = glossa + " : " + stat.completed;

        if (salesDiv.childElementCount == 0) {
            salesDiv.appendChild(div);
        }
        else {
            salesDiv.insertBefore(div, salesDiv.firstChild);
        }

    }
            //alert(zaab);

    if (stats.length > 0) {
        lastReportTime = stats[stats.length-1].time;

    }
} 
```

问题是，如果我在收到未经授权的响应（401）之前没有登录，那么我如何阅读我得到的响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:27:21.463

你设置了'callback=updateStats'。现在向你的 js 添加函数

```
function updateStats(response){
 // do something with response
} 
```

# javascript - .click() 页面加载后

> ID：11737448
> 
> 赞同：0
> 
> 时间：2012-07-31T09:52:38.480
> 
> 标签：javascript, jquery, click, persistence

我第一次尝试 url 持久性，在页面加载后，我有了想要从 URL 中单击的元素。当我加载页面时，.click() 没有注册，但如果我在控制台中键入它，它会正确执行。我曾尝试将代码（特别是`(function persistence(formvals){...})();`）放在 (document).ready(function(){...}) 部分，但这不起作用。如何让 .click() 在页面加载后注册，并在每个应该点击的元素上注册？

网址：[http ://specialorange.org/resume/index.html?gc_abstract_heading&gc_ba_analysis](http://specialorange.org/resume/index.html?gc_abstract_heading&gc_ba_analysis)

这些部分的两个 id 是 : `gc_abstract_heading`和 `gc_ba_analysis`，因此`$(gc_abstract_heading).click()`在控制台中有效，而不是在代码中。

代码：

```
var formvals = {};
var keyval = location.search.replace('?', '').split('&');
$.each(keyval, function () {
    var splitval = this.split('=');
    formvals[splitval[0]] = splitval[1];
});
console.log(keyval);
console.log(formvals);

(function persistence(formvals) {
    for ( i=0 ; i < keyval.length ; i++ ) {
        console.log(keyval[i]);         
        $(keyval[i]).click();
    };
})(); 
```

请注意，此代码不在实时页面上，它在我的本地站点上进行测试。实时页面上的持久性部分是不同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:01:12.383

试试这个：

```
$(document).ready(function () {
    var formvals = {};
    var keyval = location.search.replace('?', '').split('&');
    for (var i = 0; i < keyval.length; i++) {
        console.log('Trigger click on: '+keyval[i]);
        $('#'+keyval[i]).click();
    };
}); 
```

首先，我添加了文档就绪，因此该函数在它准备好之前不会触发。第二; `#`如果 url 中的名称指向 id，则单击处理程序需要作为前缀。如果它是您更改的`#`课程`.`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:57:19.517

在这里在黑暗中快速刺伤，但我总是发现如果你在持久性点击或在 dom 之后使用 jquery 中的实时点击更安全。

```
$(keyval[i]).live("click",function(){}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T09:59:08.000

您必须呼吁`persistence()`（`document load`或准备好）以及`formvals`声明：

```
function persistence(formvals) {
    for ( i=0 ; i < keyval.length ; i++ ) {
        console.log(keyval[i]);         
        $(keyval[i]).click();
    };
}

$(function() {
    var formvals = {};
    var keyval = location.search.replace('?', '').split('&');
    $.each(keyval, function () {
        var splitval = this.split('=');
        formvals[splitval[0]] = splitval[1];
    });
    console.log(keyval);
    console.log(formvals);

    persistence(formvals);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T10:05:26.423

如果您以 ID 为目标，则 jQuery 选择器缺少“#”。

# iphone - 在不使用“CURRENT_PROJECT_VERSION”的情况下增加内部版本号

> ID：11737451
> 
> 赞同：1
> 
> 时间：2012-07-31T09:52:40.887
> 
> 标签：iphone, ios, xcode, agvtool

由于[我无法](https://stackoverflow.com/questions/11737325/agvtool-new-version-and-what-version-do-not-correspond)使用 agvtool 增加我的内部版本号，我想知道是否有一种快速的方法可以使用命令行在我的项目中增加内部版本号。

如果可能的话，我宁愿不必解析 plist 的 XML。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-21T20:10:06.570

您可以使用“$ agvtool new-version -all xxx”在命令提示符下手动设置 Xcode 构建的所有目标的版本。希望这可以帮助！

# embedded-linux - 从内核空间禁用 LCD 控制器

> ID：11737455
> 
> 赞同：2
> 
> 时间：2012-07-31T09:52:53.347
> 
> 标签：embedded-linux, kernel, kernel-module

我正在编写简单的独立 linux 内核模块，它可以关闭 LCD 控制器。所以我在drivers/video/amba-clcd.c中找到了一些函数：

```
/*
 *  Blank the screen if blank_mode != 0, else unblank. If blank == NULL
 *  then the caller blanks by setting the CLUT (Color Look Up Table) to all
 *  black. Return 0 if blanking succeeded, != 0 if un-/blanking failed due
 *  to e.g. a video mode which doesn't support it. Implements VESA suspend
 *  and powerdown modes on hardware that supports disabling hsync/vsync:
 *    blank_mode == 2: suspend vsync
 *    blank_mode == 3: suspend hsync
 *    blank_mode == 4: powerdown
 */
static int clcdfb_blank(int blank_mode, struct fb_info *info)
{
    struct clcd_fb *fb = to_clcd(info);

    if (blank_mode != 0) {
        clcdfb_disable(fb);
    } else {
        clcdfb_enable(fb, fb->clcd_cntl);
    }
    return 0;
} 
```

如何从我的独立模块调用此函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T19:34:17.980

首先，删除“静态”关键字。

然后将此功能导出到您的模块，您可以使用

```
EXPORT_SYMBOL(clcdfb_blank); 
```

见[这里](https://stackoverflow.com/questions/9836467/whats-meaning-of-export-symbol-in-linux-kernel-code?lq=1)。

# javascript - Javascript：在 jstree 中动态添加节点

> ID：11737457
> 
> 赞同：0
> 
> 时间：2012-07-31T09:52:54.333
> 
> 标签：javascript, jstree

如何在jstree中动态添加节点？

您可以选择链接[http://www.jstree.com/documentation/crrm](http://www.jstree.com/documentation/crrm)。

```
$(function () {
    $("#alarm-treeview").jstree({ 
        "json_data" : 
        {
            "data" : 
            [
                {
                    "data" : "PI_SERVER1", 
                    "attr" : { "id" : "root.id" }, 
                     "children" : [ { "data" : "Alarms",
                                     "attr" : { "id" : "Alarms.id" },
                                     "children" : [ ] },
                                     { "data" : "Events",
                                     "attr" : { "id" : "Events.id" },
                                     "children" : [ ] }
                                 ]
                },
            ]
            $("#PI_SERVER1").jstree("create","#phtml_1","first",true);
        },
        "plugins" : [ "themes", "json_data", "crrm" ] 
    });
}); 
```

# php - 从特定 IP 地址访问时无法使用 Joomla 管理控制台

> ID：11737458
> 
> 赞同：3
> 
> 时间：2012-07-31T09:52:57.293
> 
> 标签：php, apache, joomla, firewall, mod-security

我不是这些事情的专家，这就是为什么真的希望你们中的一些人能帮助我。以下是我的问题，接下来是我为调查它所做的事情。

**问题描述：**

在过去的 2 天里，我无法从我的家庭网络使用我的 joomla 网站的管理员页面。

1) 如果我使用 URL: ，我可以成功登录到管理员帐户`example.com/administrator`。但是，登录后，无论我点击页面内的任何其他链接 - 它要么：

a) 向我发送“从服务器断开连接”消息，或

b) 浏览器尝试下载`index.php`页面本身。如果我点击保存并下载页面，它会下载一个 0 字节的 index.php 文件。

2) 如果我使用 URL，我将*无法*登录管理员帐户`example.com/administrator/index.php`。它执行上述 1.a) 和 1.b) 中描述的两件事之一。

3）无论我使用什么操作系统/浏览器，这种行为都是一致的（在 IE、Chrome、Firefox 和 iPhone 上使用 Windows 7、Mac OS、Ubuntu Linux 进行测试。清除浏览器缓存无济于事。

4) 只有当我使用家庭无线宽带时才会出现此问题。如果我使用任何其他 IP（例如单独的 ISP 帐户，在 iPhone 上使用 3g 连接等），我可以正确访问和使用管理后端。无法使用家庭宽带访问的相同机器/智能手机在连接到其他 ISP 时可以正常工作。

5) 我的网站的所有其他页面都可以通过我的家庭宽带访问，没有任何问题。问题仅在于访问 /administrator/index.php 页面。

6）使用我的家庭宽带，如果我尝试使用匿名网络代理访问，它可以工作。

**我的调查/可能的问题**

1）首先想到的是，我家宽带的出站IP被服务器主机封禁了。我联系了主机，他们确认该IP没有被禁止。事实上，他们在防火墙规则中明确允许我的 IP 范围只是为了检查。没有帮助。

2）接下来，我认为问题出在apache服务器配置上——因为每当`*.php`从浏览器访问任何文件时，服务器都不会呈现它并允许浏览器下载它。但情况并非如此，因为我可以从不同 IP 上的其他计算机访问管理页面。

3) 我检查了 .htaccess 中没有基于 IP 的过滤。我没有使用任何 Joomla 级别的软件防火墙。

> 简而言之，当从特定 IP 访问时，某些事情会导致服务器断开连接或允许下载 .php 文件（而不是渲染）。

任何想法，故障排除步骤？

# 编辑（附加细节）：

问题基本上归结为：尝试直接从特定 IP 范围访问任何 *.php 页面时导致服务器断开连接的原因。所以，

`example.com/administrator`==> 有效，但是

`example.com/administrator/index.php`==> 连接断开！

这只发生在特定的 IP 范围内（比如说 203.101... *）*。

现在，昨天晚上我的网络服务器管理员告诉了我一个有趣的细节：

> 在我的问题开始的那天早上，joomla /component/search 模块上有很多 SQL 注入攻击 - 但这些攻击被“ `mod_security`”阻止了。是否有可能以某种方式反过来阻止 IP 的“mod_security”？或者可能是一些IDS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:35:31.207

这是用于故障排除的一种：

我在我们网站的管理控制台上遇到了类似的问题。在我们的例子中，是公司防火墙阻止了该端口。

您可能会联系您的托管服务提供商并询问控制台是否使用 80 以外的端口。

然后，您可以检查家庭路由器上的设置，以确保它正在侦听的端口未被阻止。

一旦你知道了，你也可以尝试显式调用端口：“example.com:[port number]/administrator”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T04:13:11.787

现在这个问题已经解决了。这个问题是因为当 mod_security 阻止了一些 SQL 注入攻击时，它也触发了 csf 防火墙来禁止这些 IP。

# java - 如何存根/模拟 XMLBeans 对象进行测试？

> ID：11737459
> 
> 赞同：1
> 
> 时间：2012-07-31T09:53:01.257
> 
> 标签：java, unit-testing, mocking, xmlbeans, stubbing

我正在处理使用 Apache XMLBeans 的应用程序（扩展 org.apache.xmlbeans.XmlObject 的 XML 结构元素的接口，扩展 org.apache.xmlbeans.impl.values.XmlComplexContentImpl 的那些接口的实现）

我得到了以下功能：

*   将 XML 对象传递给带有一些数据的方法
*   基于此数据，为此 XML 对象生成子内容
    *   使用 XML 对象的 addFoo() 添加元素等

现在我想对此功能进行测试，但我不确定让这个 XML 对象进行测试的最佳方法是什么（我希望存根/模拟对象保持子树状态以便于测试） . 一些选项：

*   我尝试实例化这些 FooImpl 实现对象，但它们需要引用 org.apache.xmlbeans.SchemaType sType
    *   有没有办法实例化这些？
    *   添加某些内容时，提供 null / mocked SchemaType 最终会导致 NPE
*   使用少数需要的方法生成存根类会起作用，但最终会生成许多（> 100）个方法
*   使用 Mockito 可以正常工作，但是要轻松测试 xml 树结构状态，我需要使用 doAnswer() 等

一些想法？

兄弟，图科

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T10:07:59.887

发现自己的答案很简单：xmlbeans 接口具有用于实例化 bean 的工厂类，例如：

```
Address.Factory.newInstance() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T10:07:51.570

我知道这不是您正在寻找的答案，但无论如何它都会出现：

# 不要模拟你无法控制的类型

参考：

*   Steve Freeman 和 Nat Price 来自[成长中的面向对象系统，以测试为指导](http://www.growing-object-oriented-software.com/)
*   史蒂夫弗里曼关于这个主题的博客文章：http: [//stevef.truemesh.com/archives/000194.html](http://stevef.truemesh.com/archives/000194.html)
*   来自开发者的详细经验：http: [//davesquared.net/2011/04/dont-mock-types-you-dont-own.html](http://davesquared.net/2011/04/dont-mock-types-you-dont-own.html)

给你一个问题：你想测试什么？Apache XML bean 是否按预期工作？或者您正在编写 XML 工具？

# c++ - 释放分配的内存实际上并没有返回给系统

> ID：11737460
> 
> 赞同：1
> 
> 时间：2012-07-31T09:53:04.230
> 
> 标签：c++, unix, process, solaris

> **可能重复：**
> [在 Solaris/Linux 中释放分配的内存](https://stackoverflow.com/questions/2947924/freeing-of-allocated-memory-in-solaris-linux)

我在[这里的一篇文章中发现了这一点](http://developers.sun.com/solaris/articles/solaris_memory.html)

这是关于solaris。文章说，每当执行 free() 调用时，内存都会返回给应用程序而不是系统，以便应用程序可以重用释放的内存。这就是为什么进程使用的内存会随着每次释放而逐渐增加而不是减少的原因。直到现在我认为释放的内存将返回给系统，并根据系统的决定重新使用它。但实际上不是这种情况。

我面临一个实际问题，即进程占用 3.8GB 内存，并且某个时间点 sybase 库无法分配内存并突然失败。

现在我的问题是，有没有办法让应用程序将内存返回给系统？

# shell - Shell 脚本：将包装器参数传递给底层脚本

> ID：11737467
> 
> 赞同：0
> 
> 时间：2012-07-31T09:53:42.103
> 
> 标签：shell, parameters

我创建了一个包装器，它可以使用以下参数通过 SSH 执行给定脚本

```
sshwrapper.sh <server> <script with path> <username> <password> 
```

现在我想调用以下脚本：

```
start.sh param1 param2 param3 param4

stop.sh param1 param2 param3 
```

使用相同的包装器。

**是否有可能有一种机制，在将基本参数传递给包装脚本后，我可以将剩余参数发布到底层脚本？**

即我想实现以下符号：

例子：

```
sshwrapper.sh server start.sh username password param1 param2 param3 param4 
```

应该调用

```
start.sh param1 param2 param3 param4 
```

和

```
sshwrapper.sh server stop.sh username password param1 param2 param3 
```

应该调用

```
stop.sh param1 param2 param3 
```

以一般的方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T09:56:20.817

使用`shift`和`"$@"`：

```
SERVER="$1"
SCRIPT="$2"
USERNAME="$3"
PASSWORD="$4"
shift 4

"$SCRIPT" "$@" 
```

例子：

```
$ cat sshwrapper.sh 
#!/bin/sh

SERVER="$1"
SCRIPT="$2"
USERNAME="$3"
PASSWORD="$4"
shift 4

echo "$SCRIPT" "$@"

$ ./sshwrapper.sh server stop.sh username password param1 param2 param3 
stop.sh param1 param2 param3 
```

使用`shift`您可以从命令行中删除第一个参数并转移其余参数：

```
$ set 1 2 3 4 5
$ echo "$@"
1 2 3 4 5
$ shift 3
$ echo "$@"
4 5 
```

您在此处看到`shift 3`删除了前三个参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T10:19:06.067

我以前使用 ssh 在远程服务器上执行脚本，但为了让我的生活更轻松，我设置了公钥身份验证以允许*无密码*访问。

请参阅这篇文章以供参考

[http://macnugget.org/projects/publickeys/](http://macnugget.org/projects/publickeys/)

您可以使用命令行中的默认 ssh 工具执行带参数的远程脚本，如下所示

```
$ ssh user@server "script.sh param1 param2 param3" 
```

可以执行多个命令如下

```
$ ssh user@server "script1.sh param1 param2 param3; script2.sh param1 param2 param3" 
```

例如 - 登录到远程服务器并打印日期并获取正在运行的进程列表

```
$ ssh user@server "echo date; ps -ef | grep hello" 
```

您可以将上述逻辑添加到脚本中，假设您想将其作为***ssh-wrapper***的一部分调用，或者直接从命令行执行。

只需确保在 ssh 部分使用**“双引号”**而不是**“单引号”。**

# android - 安卓游戏开发

> ID：11737471
> 
> 赞同：0
> 
> 时间：2012-07-31T09:54:00.727
> 
> 标签：android, android-layout

我一直在使用 Surfaceview 进行简单的 2d 赛车开发，因为我知道在画布上使用支架整个表面正在重绘，我只想重绘汽车，因为物理位置发生了变化而不是车道，如何只重绘单个组件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T17:24:08.810

如果你不只重绘汽车，它就不会看起来正确。至少，您还*必须*绘制汽车在最后一帧中的位置。否则它将显示在两个位置。

来自[开发者指南](http://developer.android.com/guide/topics/graphics/2d-graphics.html#on-surfaceview)：

> 注意：每次从 SurfaceHolder 检索 Canvas 时，都会保留 Canvas 的先前状态。为了正确地为您的图形设置动画，您必须重新绘制整个表面。例如，您可以通过使用 drawColor() 填充颜色或使用 drawBitmap() 设置背景图像来清除 Canvas 的先前状态。否则，您将看到之前执行的绘图的痕迹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:55:31.963

您可以在 onDraw 中使用布尔值。在您的 onDraw 中，您有一张支票，例如

```
if(carMoved == false)
{
    // draw everything
}
else
{
    // draw your car
    carMoved = false; // this resets your onDraw so your whole canvas is re-drawn next time you invalidate()
} 
```

可能有很多不同的方法可以做到这一点，但我觉得这是最简单的方法。

# android - 如何通过比较用户位置和两个目标点之间的距离来获得最近的位置？

> ID：11737478
> 
> 赞同：0
> 
> 时间：2012-07-31T09:54:24.627
> 
> 标签：android, android-mapview, distance

我试图通过比较几个目标位置（用户位置-> A 目标与用户位置-> B 目标）之间的距离来找到距用户位置最近的位置，但我无法制作正确的代码。有人可以帮助我吗？这是我的代码：

……

```
public Location geoLat(GeoPoint userGeopoint)
{
    Location location = new Location("");
    location.setLatitude(userGeopoint.getLatitudeE6()/1E6);
    return location;
}

public Location geoLng(GeoPoint userGeopoint)
{
    Location location = new Location("");
    location.setLatitude(userGeopoint.getLongitudeE6()/1E6);
    return location;
}

public GeoPoint userGeopoint(Location location)
{
    Double userLat = location.getLatitude()*1E6;
    Double userLng = location.getLongitude()*1E6;
    GeoPoint point = new GeoPoint(userLat.intValue(), userLng.intValue());
    return point;
}

private void nearRSU(Location location)
{
    Location userlocation = new Location("point A");
    Location objectlocation = new Location("point B");
    userlocation.setLatitude(geoLat(userGeopoint(location())).getLatitude());
    userlocation.setLongitude(geoLng(userGeopoint(location())).getLongitude());

    double rangeconv = 0, ctrange = 0, sumrange = 0, alltimes = 0;
    String rgtype = "", tmtype = "";
    int a = 0;
    String objectaddress = null;
    GeoPoint pointB = null;

    for (int i = 0 ; i < listLocRSU.size(); i++)
    {
        GeoPoint pointA = new GeoPoint((int) (listLocRSU.get(i).lat * 1E6), 
                                      (int) (listLocRSU.get(i).lng * 1E6));

        objectlocation.setLatitude(pointA.getLatitudeE6()/1E6);
        objectlocation.setLongitude(pointA.getLongitudeE6()/1E6);

        double range = userlocation.distanceTo(objectlocation);

        if (range >= 1000)
        {
            rangeconv = range / 1000;
            rgtype = " km";
        }
        else
        {
            rangeconv = range;
            rgtype = " m";
        }

        double times = rangeconv / 40;
        if (times >= 1)
        {
            alltimes = times;
            tmtype = " h";
        }
        else
        {
            alltimes = times * 60;
            tmtype = " min";
        }

        if (ctrange > rangeconv)
        {
            ctrange = rangeconv;
            sumrange = ctrange;
            a = i;
            pointB = new GeoPoint ((int) (listLocRSU.get(a).lat * 1E6), 
                                   (int) (listLocRSU.get(a).lng * 1E6));
        }
    else if (ctrange < rangeconv)
        {
            sumrange = ctrange;
            a = a;
            pointB = new GeoPoint ((int) (listLocRSU.get(a).lat * 1E6), 
                                   (int) (listLocRSU.get(a).lng * 1E6));
        }

        double objLat = listLocRSU.get(a).lat;
        double objLng = listLocRSU.get(a).lng;

        Geocoder objectgc = new Geocoder(this, Locale.getDefault());
        try 
        {
            List<Address> addresses = objectgc.getFromLocation(objLat, objLng, 1);
            StringBuilder objaddress = new StringBuilder();
            if (addresses.size() > 0) 
            {
                Address address = addresses.get(0);
                address.getMaxAddressLineIndex();
                objaddress.append(address.getAddressLine(0)).append(", ");
                objaddress.append(address.getLocality()).append(", ");
                objaddress.append(address.getCountryName()).append(", ");
                objaddress.append(address.getPostalCode());
            }
            objectaddress = objaddress.toString();
        } 
        catch (IOException e){}

        List<Overlay> overlays = map.getOverlays();
        Drawable marker = this.getResources().getDrawable(R.drawable.marker);
        MyItemizedOverlay itemizedOverlay = new MyItemizedOverlay(marker, this);            

        OverlayItem overlayitem = new OverlayItem(pointB, listLocRSU.get(a).locname, 
                "Address:\n" + objectaddress + 
                "\n\nLongitude:\n" + listLocRSU.get(a).lng + 
                "\n\nLatitude:\n" + listLocRSU.get(a).lat + 
                "\n\nDistance:\n" + sumrange + rgtype + 
                "\n\nTime Calculation (40 km/h):\n" + alltimes + tmtype);

        itemizedOverlay.addItem(overlayitem);
        overlays.add(itemizedOverlay);
    }
} 
```

……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T09:58:37.250

[Location](http://developer.android.com/reference/android/location/Location.html)类有一个方法[distanceBetween](http://developer.android.com/reference/android/location/Location.html#distanceBetween%28double,%20double,%20double,%20double,%20float%5B%5D%29)，你不能用吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:04:41.993

尝试提高你的代码可读性

```
Location origin;
Location closest;
List<Location> list;
Double minDist = null;
Double curDist = 0d;
for(Location l : list) {
    if(minDist == null || (curDist = origin.distanceBetween(l)) < minDist) {
        closest = l;
        minDist = curDist;
    }
} 
```

# objective-c - NSXMLParser - 不解析具有相同节点值的属性

> ID：11737479
> 
> 赞同：-1
> 
> 时间：2012-07-31T09:54:30.587
> 
> 标签：objective-c, ios, xcode, nsxmlparser

我在 iOS 中解析下面的 xml。

```
<START>
    <ROW>
     <COLUMN NAME="NAME">John Smith</COLUMN>
    </ROW>
    <ROW>
     <COLUMN NAME="NAME">Steve Irwin</COLUMN>   
    </ROW>
  </START> 
```

我写了下面的代码。我需要字符串“amaps.Name”中的 John Smith，但对我来说，字符串是“NAME”。谁能帮我解析这个xml

```
 - (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName 
  namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName 
    attributes:(NSDictionary *)attributeDict {

    if([elementName isEqualToString:@"RESULTS"]) {
        //Initialize the array.
        appDelegate.maps = [[NSMutableArray alloc] init];
    }
    else if([elementName isEqualToString:@"COLUMN"]) {

        //Initialize the book.
        MapDetails* amaps = [[MapDetails alloc] init];
        amaps.NAME = [attributeDict objectForKey:@"NAME"];
        NSLog(@"Reading id value :%@", amaps.NAME);
    }

    //NSLog(@"Processing Element: %@", elementName);
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string { 

    if(!currentElementValue) 
        currentElementValue = [[NSMutableString alloc] initWithString:string];
    else
        [currentElementValue appendString:string];

    //NSLog(@"Processing Value: %@", currentElementValue);

}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName 
  namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {

    if([elementName isEqualToString:@"RESULTS"])
        return;

    //There is nothing to do if we encounter the Books element here.
    //If we encounter the Book element howevere, we want to add the book object to the array
    // and release the object.
    if([elementName isEqualToString:@"ROW"])
        return;

    if([elementName isEqualToString:@"COLUMN"]) {
        [appDelegate.maps addObject:amaps];
        //[amaps release];
        //amaps = nil;
    }
    else 
        [amaps setValue:currentElementValue forKey:[elementName lowercaseString]];

    [currentElementValue release];
    currentElementValue = nil;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:12:24.530

```
 - (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string 
 {

         strVal=string;

 }

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName 
  namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {

    if([elementName isEqualToString:@"RESULTS"])
        return;

    //There is nothing to do if we encounter the Books element here.
    //If we encounter the Book element howevere, we want to add the book object to the array
    // and release the object.
    if([elementName isEqualToString:@"ROW"])
    {
     }

    if([elementName isEqualToString:@"COLUMN"]) 
    {
         amaps.Name=strVal;
    }
    else 
        [amaps setValue:currentElementValue forKey:[elementName lowercaseString]];

    [currentElementValue release];
    currentElementValue = nil;
} 
```

这应该是工作。

# hibernate - 解析中的休眠

> ID：11737495
> 
> 赞同：0
> 
> 时间：2012-07-31T09:55:16.157
> 
> 标签：hibernate

我创建了一个休眠程序来将日期插入 mysql 得到以下错误：

```
problem parsing configurationcom\xml\hibernate.cfg.xml
Initial SessionFactory creation failed.org.hibernate.HibernateException: 
                 problem parsing configurationcom\xml\hibernate.cfg.xml
Exception in thread "main" java.lang.NullPointerException
    at com.candidjava.AddStudent.main(AddStudent.java:58) 
```

# php - 嵌入表单的表单不使用 symfony 显示

> ID：11737496
> 
> 赞同：0
> 
> 时间：2012-07-31T09:55:19.580
> 
> 标签：php, symfony1, symfony-1.4, symfony-forms

我有一个模型类（名为 KanoonGood），它对应的 Form 类是：

```
class KanoonGoodForm extends BaseKanoonGoodForm
{
    public function configure()
    {
        $this->widgetSchema['count_num']->setAttribute('size', '1');
        $this->widgetSchema['price']->setAttribute('size', '1');
    }
} 
```

当有人调用基于这个模型类的模块的新动作时，我不仅需要显示一个 KanoonGoodForm，还需要显示其中的 20 个。

所以我创建了一个表单（名为 KanoonGoodsGroup），其中嵌入了 20 个 KanoonGoodForms：

```
class KanoonGoodsGroupForm extends sfForm
{
    public function configure() 
    { 
        for ($i = 0; $i < 20; $i++) 
        {
            $this->embedForm('good_'.$i, new KanoonGoodForm());
        }
    }
} 
```

然后我重写我的模块的新动作如下：

```
public function executeNew(sfWebRequest $request)
{
    $this->form = new KanoonGoodsGroupForm();
} 
```

在 newSuccess 模板中，我已将此表单传递给 _form.php 部分：

```
 <?php include_partial('form', array('form' => $form)) ?> 
```

_form.php 部分就像：

```
<?php use_stylesheets_for_form($form) ?>
<?php use_javascripts_for_form($form) ?>
<form action="<?php echo url_for('good/'.($form->getObject()->isNew() ? 'create' : 'update').(!$form->getObject()->isNew() ? '?id='.$form->getObject()->getId() : '')) ?>" method="post" <?php $form->isMultipart() and print 'enctype="multipart/form-data" ' ?>>
<?php if (!$form->getObject()->isNew()): ?>
<input type="hidden" name="sf_method" value="put" />
<?php endif; ?>
  <table>
    <tfoot>
      <tr>
        <td colspan="2">
          <?php if (!$form->getObject()->isNew()): ?>
            &nbsp;<?php echo link_to('Delete', 'good/delete?id='.$form->getObject()->getId(), array('method' => 'delete', 'confirm' => 'are you sure?')) ?>
          <?php endif; ?>
          <input type="submit" value="save" />
        </td>
      </tr>
    </tfoot>
    <tbody>
    <?php echo $form ?>
    </tbody>
  </table>
</form> 
```

问题是当我从浏览器调用新操作时，什么都没有显示，甚至没有错误！只是一个白页，即使没有 symfony 开发工具！

我被困住了。

# c# - 将 2 个参数发送回 Main 函数

> ID：11737497
> 
> 赞同：0
> 
> 时间：2012-07-31T09:55:22.060
> 
> 标签：c#, parameters, .net-2.0

我有一个函数想要将 2 个`INT`参数发送回它被调用的位置，但不确定什么是最好的选择，a `Dictionary`？或一个`List`或一个`Array`

**已编辑**

**我正在使用 .Net 框架 2**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T09:57:30.127

我假设您的意思是向调用者返回 2 个值。如果是这样的话：

*   返回一个`Tuple<T1, T2>`
*   返回您自己的存储所需值的自定义类型，例如`MyOperationResult`
*   使用`out`参数： http: [//msdn.microsoft.com/en-us/library/t3c3bfhx (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/t3c3bfhx(v=vs.80).aspx)
*   返回一个集合

这取决于呼叫者最容易理解的内容，即最能证明您的意图的内容？

**如果结果总是**有两个值，则返回可变大小的集合可能不直观。我的偏好是元组或自定义类型。Tuple 具有作为现有类型的优点，但缺点是不清楚其成员的含义；它们只是被称为“Item1”、“Item2”等等。

该`out`关键字适用于可能不会成功并始终返回布尔值的操作，例如`public bool int.TryParse( string value, out int parsedValue )`. 这里的意图很明确。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T09:57:37.387

尝试使用此代码

```
type1 param1;
type2 param2;
void Send(out type1 param1, out type2 param2)

or

type1 param1 = ..;//You must initialize with ref
type2 param2 = ..;
void Send(ref type1 param1, ref type2 param2) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T09:57:54.580

您可以尝试使用 out 参数[msdn](http://msdn.microsoft.com/en-us/library/t3c3bfhx%28v=vs.71%29.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-31T09:58:10.193

如果您只使用两个整数，那么我会使用 2 元组 a `Tuple<int, int>`。

您可以在构造函数中使用它的两个值对其进行初始化：

```
return new Tuple<int,int>(val1, val2); 
```

或者，对于可变数量的输出，a `List<int>`（或者可能只是一个，`IEnumerable<int>`取决于预期用途）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-31T09:58:50.307

我想我需要通过引用返回它，就像这样......

```
private void ReturnByRef(ref int i1, ref int i2) {

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-31T10:05:32.073

好吧，这取决于，你有多种方法可以做到这一点。如果您只想传回两个参数，那么您可以使用“out”参数：

```
class A
{
  private static void foo(int param, out int res1, out int res2)
  {
    res1 = 1*param;
    res2 = 2*param;
  }

  public static void main(string[] args)
  {
    int res1, res2;
    foo(1, out res1, out res2);
    // Do something with your results ...
  } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-31T11:32:54.523

out 参数效果最好

```
static void Main()
{
   int a;
   int b;
   someFunction(out a,out b); //the int values will be returned in a and b
   Console.WriteLine(a);
   Console.WriteLine(b);
}
public static void someFunction(out int x,out int y)
{
   x=10;
   y=20;
 } 
```

你的输出将是

```
10
20 
```

# mysql - Mysql - 选择与日期范围不匹配的行？

> ID：11737499
> 
> 赞同：1
> 
> 时间：2012-07-31T09:55:28.183
> 
> 标签：mysql, sql

我在 mysql 中有一个包含开始和结束日期字段的表。我需要做的是查询此表以查找与我搜索的日期不匹配的所有行。我该怎么做？因此，如果我使用今天的日期并用它查询该表，那么我需要找到该日期不在表中的开始日期和结束日期之间的所有行。希望这是有道理的！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T10:01:22.933

您可以使用`BETWEEN`子句根据日期范围过滤记录并排除该日期范围，您可以将`NOT`子句用作：

```
SELECT * 
FROM my_table 
WHERE search_date NOT BETWEEN start_date AND end_date; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:56:59.673

```
Select *
from table
where [todaysdate]<datestart
or [todaysdate]>dateend 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T09:57:23.720

要选择您通常使用的范围`BETWEEN`，并且如果您想排除这些值，您可以简单地使用`NOT BETWEEN`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T10:05:41.853

另一种变体：

```
select id, start_date, end_date 
from my_table 
where end_date < CAST('2012-01-01' AS DATE) 
or start_date > CAST('2012-12-31' AS DATE) 
```

# android - 在 ActionBar / ActionBarSherlock 中以编程方式显示下拉菜单

> ID：11737500
> 
> 赞同：10
> 
> 时间：2012-07-31T09:55:43.010
> 
> 标签：android, spinner, android-actionbar, actionbarsherlock

我有一个使用`ActionBarSherlock`with的活动`ActionBar.NAVIGATION_MODE_LIST`。

进入页面时，我希望操作栏中的微调器在填充项目后以编程方式展开，因此用户需要选择一个项目。到目前为止，适配器中的第一个项目是自动选择的。

我想不出一种以编程方式扩展操作栏中的微调器的好方法。我是否需要使用自定义视图来实现此行为？

我查看了带有 的操作栏，`HierarchyViewer`并且微调器没有设置 id。有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-03T10:43:41.663

这是我如何使用 actiobBarSherlock 创建自定义操作栏的代码

```
 private void createCustomActionBar() {

    List<SiteLink> links = new ArrayList<SiteLink>();
    links.add(...)  
    LinksAdapter linkAdapter = new LinksAdapter(this, R.layout.external_link, links);

    View customNav = LayoutInflater.from(this).inflate(R.layout.custom_show_action_bar, null);
    IcsSpinner spinner = (IcsSpinner)customNav.findViewById(R.id.spinner);
    spinner.setAdapter(linkAdapter);

    ImageView refresh = (ImageView) customNav.findViewById(R.id.refresh);
    refresh.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            ...
        }
    });

    ImageView settings = (ImageView) customNav.findViewById(R.id.settings);
    settings.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            ...
        }
    });

    getSupportActionBar().setCustomView(customNav, new ActionBar.LayoutParams(Gravity.RIGHT));
    getSupportActionBar().setDisplayShowCustomEnabled(true);

} 
```

适配器

```
private static class LinksAdapter extends ArrayAdapter<SiteLink> {

    private List<SiteLink> strings;
    private Context context;

    private LinksAdapter(Context context, int textViewResourceId, List<SiteLink> objects) {
        super(context, textViewResourceId, objects);
        this.strings = objects;
        this.context = context;
    }

    @Override
    public int getCount() {
        if (strings == null) return 0;
        return strings.size();
    }

    @Override
    public SiteLink getItem(int position) {
        return super.getItem(position);
    }

    // return views of drop down items
    @Override
    public View getDropDownView(int position, View convertView, ViewGroup parent) {

        final SiteLink siteLink = strings.get(position);
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        // at 0 position show only icon

        TextView site = (TextView) inflater.inflate(R.layout.external_link, null);
        site.setText(siteLink.getName());

        site.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse(siteLink.getUrl()));
                context.startActivity(i);
            }
        });
        return site;

    }

    // return header view of drop down
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        return inflater.inflate(R.layout.icon, null);
    }
} 
```

布局

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
               android:gravity="right"
        >

    <com.actionbarsherlock.internal.widget.IcsSpinner
        android:id="@+id/spinner"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:paddingRight="20dp"
        android:layout_gravity="center"
            />

     <ImageView  android:layout_width="fill_parent"
                 android:layout_height="fill_parent"
                 android:src="@drawable/ic_navigation_refresh"
                 android:paddingRight="20dp"
                 android:paddingLeft="10dp"
                 android:layout_gravity="center"
                 android:background="@drawable/action_buttons_background"
                 android:id="@+id/refresh"/>

    <ImageView  android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:src="@drawable/ic_action_settings"
                android:paddingRight="20dp"
                android:background="@drawable/action_buttons_background"
                android:layout_gravity="center"
                android:id="@+id/settings"/>

</LinearLayout> 
```

扩展微调器调用

```
 (getSupportActionBar().getCustomView().findViewById(R.id.spinner)).performClick(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-04T20:26:36.153

如果您正在使用它，通过扩展 StringAdapter 来实现此功能的最佳且简单的方法。否则，您可以使用任何您正在使用的适配器。

脚步 ：

*   创建适配器

    ```
     class ListNavigationAdapter extends ArrayAdapter<String>{

    public Spinner mSpinner; // This is the spinner which is used in actionbar

    public ListNavigationAdapter(Context context,
            int resource,
            int textViewResourceId, 
            String[] objects) {
        super(context, resource, 
                textViewResourceId, objects);
        // TODO Auto-generated constructor stub
    }

    @Override
    public View getView(int position, 
            View convertView, 
            ViewGroup parent) {
        // TODO Auto-generated method stub

        mSpinner = (Spinner) parent;

        return super.getView(position, convertView, parent);
    } 
    ```

    }

*   将适配器设置为操作栏

> ```
> // Set up the action bar to show a dropdown list.
>     actionBar = getSupportActionBar();
>     actionBar.setDisplayShowTitleEnabled(false);
>     actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
> 
>     // Set up the dropdown list navigation in the action bar.
>     actionBar.setListNavigationCallbacks(
>             // Specify a SpinnerAdapter to populate the dropdown list.
>           mAdapter = new ListNavigationAdapter(
>                     actionBar.getThemedContext(),
>                     android.R.layout.simple_list_item_1,
>                     android.R.id.text1,
>                     new String[] {
>                             getString(R.string.title_1),
>                             getString(R.string.title_2)
>                     }),
>             this); 
> ```

*   如果你想在屏幕打开时打开它，只需使用下面提到的代码

> @Override public boolean onCreateOptionsMenu(Menu menu) {
> 
> ```
>  // Inflate the menu; this adds items to the action bar if it is present.
>     ...........
> 
>     if(mAdapter.mSpinner != null){
>       mAdapter.mSpinner.performClick();
>     }
>     return true;
> } 
> ```

试试这个 。有效（Y）

# java - Android：如果地图包含值，更改按钮资源不起作用

> ID：11737503
> 
> 赞同：0
> 
> 时间：2012-07-31T09:55:52.770
> 
> 标签：java, android, map, android-viewpager

我有一个收藏夹按钮，我希望它根据是否在收藏夹地图中找到 ID 来更改它的图像，但它似乎不起作用。这是我的代码：

```
boolean containsShop = false;
             for (Map<String, String> hashMap : TabsViewPagerFragmentActivity.favouritesData)
                {

                    containsShop = hashMap.containsValue(shopID);

                }

             if(containsShop) {
                 isFavourite = true;
                 favouritesBtn.setBackgroundResource(R.drawable.is_a_favourite);
             }  else {

                 isFavourite = false;
                 favouritesBtn.setBackgroundResource(R.drawable.favourite_normal);
             } 
```

`R.drawable.favourite_normal`即使 ID 在地图中，它似乎也将按钮设置为。我究竟做错了什么？

编辑：

对不起，我复制了错误的代码。`R.drawable.is_a_favourite`- 我刚刚注意到，如果对象是添加到 favouritesData ArrayList 的最后一个对象，它似乎只将 Button 设置为

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:57:15.447

```
containsShop = hashMap.containsValue(shopID); 
```

替换这个

```
containsVenue = hashMap.containsValue(shopID);
^^^^^^^^^^^^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:06:23.053

并在 中添加一条`break`语句`for loop`，如果您找到了该值。否则，在循环的下一次迭代中，该`boolean`值可能会被覆盖。

```
containsShop= hashMap.containsValue(shopID);
if (containsShop) break; 
```

# ios - Objective C - 按值传递和按引用传递

> ID：11737505
> 
> 赞同：29
> 
> 时间：2012-07-31T09:55:58.347
> 
> 标签：ios, objective-c, string, parameter-passing

首先，很抱歉这个简单的问题。但我需要了解正在发生的事情。

我认为输出应该是**`upper case string`**. 但事实证明是**`UPPER CASE STRING`**。

```
- (void)test
{
     NSString *stringVar = @"UPPER CASE STRING";
     [self changeString:stringVar];
     NSLog(@"value after changed : %@", stringVar);
}

- (void)changeString:(NSString*)string
{
     string = [string lowercaseString];
} 
```

发生了什么以及如何解决？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-07-31T09:59:56.037

该`[string lowercaseString]`调用创建了一个分配给局部变量的*新* `NSString`对象`string`。这不会改变函数`stringVar`外部的值`changeString`。指针本身是按值传递的。

做你想做的事情的一种方法是将指针传递给指针：

```
-(void) test
{
     NSString *stringVar = @"UPPER CASE STRING";
     [self changeString:&stringVar];
     NSLog(@"value after changed : %@", stringVar);
}

-(void) changeString:(NSString**)string
{
     *string = [*string lowercaseString];
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-31T10:02:46.683

如果您查看对`[NSString lowerCaseString]` [方法](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/lowercaseString)的引用，您可以看到它返回一个新字符串，其中包含小写字符：

> 返回接收者的小写表示。
> 
> ```
> - (NSString *)lowercaseString 
> ```

您的代码所做的只是用`lowercaseString`调用的输出覆盖对输入字符串的引用，这没有任何效果。解决此问题的最佳方法是您自己返回值，这使该方法更易于理解：

```
-(void) test
{
     NSString *stringVar = @"UPPER CASE STRING";
     stringVar = [self changeString:stringVar];
     NSLog(@"value after changed : %@", stringVar);
}

-(NSString *) changeString:(NSString*)string
{
     string = [string lowercaseString];
     return string;
} 
```

您需要了解它`NSString`是不可变的，因此除了重新分配引用之外，没有其他方法可以更改字符串的内容。但是，您可以`NSMutableString`改用它，它可以就地修改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-20T14:03:33.267

我指的是上面给出的问题并帮助你解决错误。找到我的评论

```
- (void)test
{
     NSString *stringVar = @"UPPER CASE STRING";
     //StringVar is a pointer to integer class.let us assume the address the stringVar be 0x50 and the value it has be 0x100
     //So 0x100 has the string 

     [self changeString:stringVar];
     //above we are calling the method to lowercase and argument is stringVar
     //As the method is called we pass 0x100 in the argument as this is the memory where the value is kept

     NSLog(@"value after changed : %@", stringVar);
    //Our StringVar still points to 0x100 where the value is in upperString
}

- (void)changeString:(NSString*)string
{
     string = [string lowercaseString];
    // Now operation performed on string returns a new value on suppose location 0x200
   //String parameter passed in argument is assigned the new value.But we never pass values as we pass only location under the hood
   //New parameter passed now points to new memory location 0x200

}

---------------------------------------------------------------------------------
With the new solution
-(void) test
{
     NSString *stringVar = @"UPPER CASE STRING";
     //let 0x50 be stringVar memorylocation pointing to 0x100 with above value
     [self changeString:&stringVar];
     //0x50 is passed in argument
     NSLog(@"value after changed : %@", stringVar);
     //On new location stored in address of stringVar it points to new string value
}

-(void) changeString:(NSString**)string
{
     *string = [*string lowercaseString];
     //0x200 is new memory location received.*string gives the 0x100 location and hence the value
   //LHS is assigned to new location .On LHS you find *string which will be assigned 0x200
   //As string with location 0x50 is value 0x200 which will make it to point new      location where lowercase string exist
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T10:01:18.140

string in`-(void) changeString:(NSString*)string`是局部变量，修改方法返回值：

```
-(void) test
{
     NSString *stringVar = @"UPPER CASE STRING";
     stringVar =[self changeString:stringVar];
     NSLog(@"value after changed : %@", stringVar);
}
-(NSString *) changeString:(NSString*)string
{
    return [string lowercaseString];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T10:02:51.633

`string`是一个局部变量（一个指向不可变的 NSString 的指针），你只是改变`string`了局部函数中指向的内容，但是当你返回它的值时，它的值将被丢弃。

您可能想要做的只是将字符串作为参数传递并从函数返回小写字符串。

# javascript - document.getElementById('btnid').disabled 在 Firefox 和 chrome 中不起作用

> ID：11737512
> 
> 赞同：23
> 
> 时间：2012-07-31T09:56:19.497
> 
> 标签：javascript, getelementbyid

我正在使用 JavaScript 来禁用按钮。在 IE 中运行良好，但在 FireFox 和 chrome 中运行良好，这是我正在处理的脚本：

```
function disbtn(e) { 
    if ( someCondition == true ) {
       document.getElementById('btn1').disabled = true;
    } else {
       document.getElementById('btn1').disabled = false;
    } 
```

在我的html中，我有：

```
<input type="button" id="btn1" value="submit" /> 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-07-31T10:01:40.620

使用[**setAttribute()**](https://developer.mozilla.org/en/DOM/element.setAttribute)和[**removeAttribute()**](https://developer.mozilla.org/en/DOM/element.removeAttribute)

```
function disbtn(e) { 
    if ( someCondition == true ) {
       document.getElementById('btn1').setAttribute("disabled","disabled");
    } else {
       document.getElementById('btn1').removeAttribute("disabled");
    }
} 
```

[**看演示**](http://jsfiddle.net/akhurshid/54XB2/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-31T10:01:22.413

尝试`disabled`直接设置属性：

```
if ( someCondition == true ) {
   document.getElementById('btn1').setAttribute('disabled', 'disabled');
} else {
   document.getElementById('btn1').removeAttribute('disabled');
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T10:01:15.027

浏览器对 getElementById 的支持总是存在奇怪的问题，请尝试使用以下内容：

```
// document.getElementsBySelector are part of the prototype.js library available at http://api.prototypejs.org/dom/Element/prototype/getElementsBySelector/

function disbtn(e) { 
    if ( someCondition == true ) {
        document.getElementsBySelector("#btn1")[0].setAttribute("disabled", "disabled");
    } else {
        document.getElementsBySelector("#btn1")[0].removeAttribute("disabled");
    }    
} 
```

或者，在你可以简单地这样做的地方使用 jQuery：

```
function disbtn(e) { 
    if ( someCondition == true ) {
        $("#btn1").attr("disabled", "disabled");
    } else {
        $("#btn1").removeAttr("disabled");
    }    
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T10:02:14.833

有时某些 javascript 函数在某些特定浏览器上不起作用。我建议您开始使用 JQuery，它为您提供规范化的 JS，照顾不同的浏览器需求

```
$('#btn1').each(function(){
    this.disabled = false;
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-04T09:22:17.573

另一种选择：

```
document.formname.elementname.disabled=true 
```

在 FF 和 IE 上工作！:)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-11-19T07:43:20.157

我已经尝试了所有的可能性。除了以下内容外，没有什么对我有用。var element = document.querySelectorAll("input[id=btn1]"); element[0].setAttribute("禁用",true);

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2014-02-16T13:10:25.063

忠实于原生（布尔）属性支持及其强大的语法，例如：

**[elem].disabled = 条件？真假;** //完毕！

为了我们自己良好的集体编码经验，-请坚持让其他人也支持它。

# asp.net-mvc - 如何通过 nopCommerce 在 Asp.net MVC 中实现分页？

> ID：11737514
> 
> 赞同：1
> 
> 时间：2012-07-31T09:56:19.150
> 
> 标签：asp.net-mvc, pagination, nopcommerce

如何通过 nopCommere 在 Asp.net MVC 中实现分页？我想在 nopCommerce 网站上实现分页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:45:11.713

使用 IPagedList。参考 Nop.Services.Catalog.ProductService IPagedList SearchProducts();

# ruby-on-rails - Rails CSRF 令牌真实性和设计

> ID：11737516
> 
> 赞同：8
> 
> 时间：2012-07-31T09:56:20.603
> 
> 标签：ruby-on-rails, ruby-on-rails-3, backbone.js, csrf

我在使用 Rails 真实性令牌和设计登录/注销时遇到问题。

我正在使用主干 js 构建单页应用程序，因此我使用 ajax 登录/注销用户。这是我所观察到的，我不明白为什么会发生这种情况。

我的布局中有 csrf_meta_tags。页面加载，我点击登录按钮填写表格并提交，我成功登录。我可以做登录用户应该可以做的事情。

现在我单击一个注销按钮，该按钮通过 ajax 发送一个 DELETE 请求，我已成功注销。

上面的所有过程都在一个页面上，没有页面重新加载发生，它都是 ajax。

现在，当我再次单击登录并填写它发送 ajax 请求的表单时，我会登录但在服务器控制台上显示一条警告消息。

```
WARNING: Can't verify CSRF token authenticity 
```

现在为什么它（设计）首先让我登录，如果它（rails）无法验证 CSRF 令牌的真实性。

现在，当我尝试做登录用户应该能够做的事情时，它会失败，发布表单失败并显示来自设计的错误消息

```
401 Unauthorized {"error":"You need to sign in or sign up before continuing."} 
```

和服务器控制台上的警告

```
WARNING: Can't verify CSRF token authenticity 
```

此时我已注销，如果我自己刷新页面，我可以看到我不再登录。

到底是怎么回事 ？

我第一次注销后我的第一个真实性令牌是否过期？

我在用

```
rails (3.2.3)
devise (2.1.0) 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:20:33.763

`authenticity_token`您必须使用所有 ajax 请求发送变量。您可以从页面的元标记中填充它。

# php - 使用 jquery 将字符串从 php 发送到 js 文件

> ID：11737518
> 
> 赞同：0
> 
> 时间：2012-07-31T09:56:31.997
> 
> 标签：php, jquery, get

我需要从 php 文件中获取字符串有人知道我该怎么做？

My.php 写入和读取一个文件的内容

```
<?php
 $dir = '/var/www/devData/test';

 // create new directory with 777 permissions if it does not exist yet
 // owner will be the user/group the PHP script is run under
 if ( !file_exists($dir) ) {
  mkdir ($dir, 0777);
 }
 if (isset($_POST['data'])) {

         $stringData = $_POST['data'];
         $file = "/var/www/devData/test/ciao.txt"; 
         $fh = fopen($file, 'r+') or die("can't open file");
         fwrite($fh, $stringData);
         $theData = fread($fh, filesize($myFile)); //this is the string that i have to pass
         fclose($fh); 

         return $theData;

 }

 ?> 
```

my.js 脚本，它使用 get 方法从我的 php 文件中检索字符串

```
 function addLabelCustom_options() {
  var select = document.getElementById('label_custom');

 $.get("JS/foo.php", function(result){ alert(result) }, "json");

 /* $.ajax({
  url:'/var/www/devData/test/ciao.txt',
  success: function (data){
  //parse ur data
  //you can split into lines using data.split('\n') 
  //use regex functions to effectivley parse
  var label_parsed = data.splitCSV();
    select.options[0] = new Option("-- Select Label --",0);
    var label_sort = new Array();

    for (var i=0; i<label_parsed.length-1; i++)
        label_sort.push(label_parsed[i][1]);

    label_sort.sort();
    for (var j=0; j<label_sort.length-1; j++)
        select.options[j+1] = new Option(label_sort[j],j+1);

}
});

*/
} 
```

我只需要获取字符串 $theData 的内容 看起来如果我不检索任何字符串....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:57:57.193

```
<?php
 $dir = '/var/www/devData/test';

 // create new directory with 777 permissions if it does not exist yet
 // owner will be the user/group the PHP script is run under
 if ( !file_exists($dir) ) {
  mkdir ($dir, 0777);
 }
 if (isset($_POST['data'])) {

         $stringData = $_POST['data'];
         $file = "/var/www/devData/test/ciao.txt"; 
         $fh = fopen($file, 'r+') or die("can't open file");
         fwrite($fh, $stringData);
         $theData = fread($fh, filesize($myFile)); //this is the string that i have to pass
         fclose($fh); 

         echo $theData;  // <-- ECHO

 }

 ?> 
```

您必须输出数据，而不是返回数据。也就是说，呼应它。如果字符串尚未 json 编码，请使用`echo json_encode($theData);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:15:53.817

在 php 函数 (echo $theData; ) 中回显内容后，尝试以下 jquery 代码

```
$.ajax({
 url:JS/foo.php,
 success:function(result){ alert(result) }, "json"),
 error:function(alert('Not Completed'))
}; 
```

并检查控制台中的响应以检查是否有任何错误。您可以在firefox中查看F12的控制台

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T11:22:43.593

伙计们，我解决了这个问题，就像每次都是愚蠢的事情，每次我明白我真的很愚蠢，但是我发布了解决方案。

用于创建目录并存储在文件中的第一个 php 文件

```
<?php
 $dir = '/var/www/devData/test';

 // create new directory with 777 permissions if it does not exist yet
 // owner will be the user/group the PHP script is run under
 if ( !file_exists($dir) ) {
  mkdir ($dir, 0777);
 }
 if (isset($_POST['data'])) {

         $stringData = $_POST['data'];
         $file = "/var/www/devData/test/ciao.txt"; 
         $fh = fopen($file, 'r+') or die("can't open file");
         fwrite($fh, $stringData);
         $theData = fread($fh, filesize($file));
         fclose($fh); 

        echo json_encode($theData);
 }

 ?> 
```

为了阅读内容，我创建了另一个文件 php

```
<?php

        $file = "/var/www/devData/test/ciao.txt"; 
            $fh = fopen($file, 'r') or die("can't open file");
        $theData = fread($fh, filesize($file));<--- was the error before i used Myfile but that variable wasn't declare and was empty :) lol 
        fclose($fh); 

        echo json_encode($theData);

 ?> 
```

谢谢大家！！

# c# - 使用 Regex 从 XML 字符串中删除 XML 节点名称空间前缀

> ID：11737519
> 
> 赞同：4
> 
> 时间：2012-07-31T09:56:33.707
> 
> 标签：c#, asp.net, xml, regex, xmldocument

我有一些遗留的 XML 文档作为 blob 存储在数据库中，它们不是格式良好的 XML。我正在从 SQL 数据库中读取它们，最终，当我使用 C#.NET 时，我希望将它们实例化为 XMLDocument。

当我尝试这样做时，我显然得到了一个 XMLException。查看 XML 文档后，由于特定 XML 节点中未声明的名称空间，它们都失败了。

我不关心任何具有此前缀的 XML 节点，因此我可以忽略它们或将它们丢弃。所以基本上，在我将字符串加载为 XMLDocument 之前，我想删除字符串中的前缀，这样

```
<tem:GetRouteID>
        <tem:PostCode>postcode</tem:PostCode>
        <tem:Type>ItemType</tem:Type>
</tem:GetRouteID> 
```

变成

```
<GetRouteID>
    <PostCode>postcode</PostCode>
    <Type>ItemType</Type>
</GetRouteID> 
```

和这个

```
<wsse:Security soapenv:actor="">
    <wsse:BinarySecurityToken>token</wsse:BinarySecurityToken>
</wsse:Security> 
```

变成这样：

```
<Security soapenv:actor="">
    <BinarySecurityToken>token</BinarySecurityToken>
</Security> 
```

我有一个这样的解决方案：

```
<appSettings>
  <add key="STRIP_NAMESPACES" value="wsse;tem" />
</appSettings> 
```

```
if (STRIP_NAMESPACES != null)
{
    string[] namespaces = Regex.Split(STRIP_NAMESPACES, ";");

    foreach (string ns in namespaces)
   {
        str2 = str2.Replace("<" + ns + ":", "<"); // Replace opening tag
        str2 = str2.Replace("</" + ns + ":", "</"); // Replace closing tag

    }
} 
```

但理想情况下，我想要一个通用的方法，所以我不必无休止地配置我想要删除的命名空间。

如何在 C#.NET 中实现这一点。我假设一个正则表达式是去这里的方式？

**更新 1**

下面的 Ria 正则表达式可以很好地满足上述要求。但是，我需要如何更改正则表达式来更改它

```
<wsse:Security soapenv:actor="">
    <BinarySecurityToken>authtoken</BinarySecurityToken>
</Security> 
```

到这个？

```
<Security>
    <BinarySecurityToken>authtoken</BinarySecurityToken>
</Security> 
```

**更新 2**

认为我已经根据 Ria 的回答自己制定了更新版本，如下所示：

```
<(/?)\w+:(\w+/?) ?(\w+:\w+.*)?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T10:05:59.880

**更新**

对于新问题（属性命名空间），请尝试此通用解决方案。这对节点值没有影响：

```
Regex.Replace(originalXml, 
              @"((?<=</?)\w+:(?<elem>\w+)|\w+:(?<elem>\w+)(?==\"))", 
              "${elem}"); 
```

在我的示例 xml 上尝试这个正则表达式：

```
<wsse:Security soapenv:actor="dont match soapenv:actor attrib">
    <BinarySecurityToken>authtoken</BinarySecurityToken>
</Security> 
```

* * *

尝试使用`XSL`，可以直接申请，也可以在.NET中`XSL`使用类：[`XslTransform`](http://msdn.microsoft.com/en-us/library/6509ws91)

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="no"/>

<xsl:template match="/|comment()|processing-instruction()">
    <xsl:copy>
      <xsl:apply-templates/>
    </xsl:copy>
</xsl:template>

<xsl:template match="*">
    <xsl:element name="{local-name()}">
      <xsl:apply-templates select="@*|node()"/>
    </xsl:element>
</xsl:template>

<xsl:template match="@*">
    <xsl:attribute name="{local-name()}">
      <xsl:value-of select="."/>
    </xsl:attribute>
</xsl:template>
</xsl:stylesheet> 
```

或试试这个`Regex`：

```
var finalXml = Regex.Replace(originalXml, @"<(/?)\w+:(\w+/?)>", "<$1$2>"); 
```

# .net - ExecuteReader：使用语句是否足够？

> ID：11737520
> 
> 赞同：0
> 
> 时间：2012-07-31T09:56:35.260
> 
> 标签：.net, memory-management, stored-procedures, sqldatareader

我正在使用每隔几毫秒调用一次的 Web 服务来公开一些功能。基本上这些功能是基于存储过程的，我所有的方法如下所示：

```
[WebMethod]
public bool CheckMessageForMES( out int returnCode, out int messagePK, out String messageBody, out bool isRowFetched )
    {
        using ( SqlConnection connection = new SqlConnection() )
        {
            using(SqlCommand command = _dl.GetSqlCommandForStoredProcedure(DataLayer.SP_NAME, connection)){

            SqlParameter parameterReturnCode = _dl.CreateParameter("@returnCode", DbType.Int16, ParameterDirection.Output);
            SqlParameter parameterMessagePK = _dl.CreateParameter("@messagePK", DbType.Int32, ParameterDirection.Output);
            SqlParameter parameterMessageBody = _dl.CreateParameter("@messageBody", DbType.Xml, ParameterDirection.Output);
            SqlParameter parameterIsRowFetched = _dl.CreateParameter("@isRowFetched", DbType.Int16, ParameterDirection.Output);

            SqlParameter[] parameters = {
                                            parameterReturnCode,
                                            parameterMessagePK,
                                            parameterMessageBody,
                                            parameterIsRowFetched
                                        };

            command.Parameters.AddRange(parameters);

            connection.Open();

            using (SqlDataReader r = command.ExecuteReader() )
            {
                r.Close();
            }

            connection.Close();

            returnCode = int.Parse(parameterReturnCode.Value.ToString());
            messagePK = int.Parse(parameterMessagePK.Value.ToString());
            messageBody = parameterMessageBody.Value.ToString();
            isRowFetched = int.Parse(parameterIsRowFetched.Value.ToString()) > 0;
        }
 }

        return isRowFetched;
    } 
```

Webserver 进程占用内存并且从不释放，并且使用 VS10 工具问题似乎位于 command.ExecuteReader() 中。你知道为什么吗？

我正在以正确的方式实施这种方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:02:29.140

您从不使用您读取的数据行，因此您应该使用`ExecuteNonQuery`而不是数据读取器。

# zend-framework - Nginx 与多个 zend 项目

> ID：11737521
> 
> 赞同：0
> 
> 时间：2012-07-31T09:56:39.497
> 
> 标签：zend-framework, nginx, rewrite

我正在使用 Windows 上的 zend 框架为本地开发设置一个 nginx+php Web 服务器。我通常只是在每个项目的 www 根目录中创建一个新文件夹，然后创建一个 conf 文件来进行项目重写。

这里的错误是我无法访问我的静态内容。当我尝试打开图像文件或 css 时，出现 500 错误。而且我也不认为我的项目配置是 100% 正确的.. :\

你们能帮帮我吗？

这些是我的 conf 文件：

fastcgi.conf

```
fastcgi_param  SCRIPT_FILENAME    $document_root$fastcgi_script_name;
fastcgi_param  QUERY_STRING       $query_string;
fastcgi_param  REQUEST_METHOD     $request_method;
fastcgi_param  CONTENT_TYPE       $content_type;
fastcgi_param  CONTENT_LENGTH     $content_length;

fastcgi_param  SCRIPT_NAME        $fastcgi_script_name;
fastcgi_param  REQUEST_URI        $request_uri;
fastcgi_param  DOCUMENT_URI       $document_uri;
fastcgi_param  DOCUMENT_ROOT      $document_root;
fastcgi_param  SERVER_PROTOCOL    $server_protocol;
fastcgi_param  HTTPS              $https if_not_empty;

fastcgi_param  GATEWAY_INTERFACE  CGI/1.1;
fastcgi_param  SERVER_SOFTWARE    nginx/$nginx_version;

fastcgi_param  REMOTE_ADDR        $remote_addr;
fastcgi_param  REMOTE_PORT        $remote_port;
fastcgi_param  SERVER_ADDR        $server_addr;
fastcgi_param  SERVER_PORT        $server_port;
fastcgi_param  SERVER_NAME        $server_name;

# PHP only, required if PHP was built with --enable-force-cgi-redirect
fastcgi_param  REDIRECT_STATUS    200; 
```

nginx.conf

```
worker_processes  1;

events {
    worker_connections  1024;
}

http {
    include       mime.types;
    default_type  application/octet-stream;

    keepalive_timeout  65;

    gzip  on;

    upstream php {
        server       localhost:8993;
        server       localhost:8994;
        server       localhost:8995;
        server       localhost:8996;
        server       localhost:8997;
        }

    server {
        listen       *;
        server_name_in_redirect  off;

        charset utf-8;

        location / {
            root   www;
            index  index.php index.html index.htm;
        }

        error_page   404              /404.html;
        location = /404.html {
        }

        location ~ \.php$ {
            root           www;
            try_files      $uri =404;
            fastcgi_pass   php;
            include        fastcgi.conf;
        }

        location ~ /\.ht {
            deny  all;
        }

        include sites/*.conf;
    }
} 
```

示例项目配置

```
location /zproject {
    root www/zproject;
    try_files $uri $uri/ /zproject/index.php$is_args$args;
} 
```

**----- 更新（来自评论的请求）**

来自 access.log

> 127.0.0.1 - - [31/​​Jul/2012:11:15:46 +0100] "GET /zproject/content/files/packs.png HTTP/1.1" 404 43648 `"http://localhost/zproject"`"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit /536.11（KHTML，如 Gecko）Chrome/20.0.1132.57 Safari/536.11"

来自错误日志

> 2012/07/31 11:15:46 [error] 53696#53724: *5 CreateFile() "D:\webserver/html/zproject/content/files/packs.png" failed (3: 系统找不到路径指定），客户端：127.0.0.1，服务器：，请求：“GET /zproject/content/files/packs.png HTTP/1.1”，主机：“localhost”，引荐来源网址：`"http://localhost/zproject"`

据我所知，他似乎在错误的位置寻找文件。packs.png 的正确位置是：“D:\webserver/www/zproject/content/files/packs.png”而不是“D:\webserver/html/....”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:30:09.333

好的，我只需要添加：root "D:\webserver\www"; 到主服务器配置。一切似乎都按预期工作:)

# javascript - jQuery 动画 - 无限运动

> ID：11737523
> 
> 赞同：1
> 
> 时间：2012-07-31T09:56:45.047
> 
> 标签：javascript, jquery, jquery-animate

我只是在玩[jQuery animate()](http://api.jquery.com/animate/)。我尝试制作各种无限滚动背景（[此处为小提琴](http://jsfiddle.net/S4q8b/3/)）。但是对于我的生活，我无法找到一个平稳的过渡。此处发布的代码 -

**HTML**

```
<div class='bg r hide'></div>
<div class='bg g hide'></div>
<div class='bg y hide'></div>
<div class='bg b hide'></div> 
```

**JavaScript**

```
var backgroundTimeout = 1700;

function animateMotion(){
    $('.bg').each(function(i, item) {
        var self = $(this);
        setTimeout(function() {
            self.css('opacity', '0.5').removeClass('hide')
                .animate({opacity: 1, marginLeft: '+=6'}, backgroundTimeout / 3)
                .animate({
                    marginLeft: '+=30',
                    opacity: 0,
                    queue: false,
                }, backgroundTimeout + 400, 'linear', function() {
                    self.css('marginLeft', 0);
                    self.css('opacity', 1);
                    self.addClass('hide');
                })
                if (self.index() === $('.bg').length - 1) {
                    setTimeout(animateMotion, backgroundTimeout);
                }
        }, backgroundTimeout * i + 1)
    });
} 
```

我要做什么 - 第一个 div 移出 - 淡入淡出 - 淡出中途 - 下一个 div 淡入并再次开始循环。有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T10:11:18.247

不确定这是否是您的目标，但请看一下：

```
(function loop(idx) {
  var
    $elements = $('#wrapper div'),
    idx = idx % $elements.length;

  $elements.eq(idx).css({
    opacity: 0,
    left: 0
  }).removeClass('hide').show().animate({
    opacity: 1,
    left: 30
  }, {
    duration: 1000,
    easing: 'linear',
    complete: function () {
      $(this).animate({
        opacity: 0,
        left: 60
      }, {
        duration: 1000,
        easing: 'linear',
        complete: function () {
          $(this).addClass('hide');
        }
      });

      loop(idx + 1);
    }
  });
}(0)); 
```

和：

```
<div id="wrapper">
  <div class='bg r hide'></div>
  <div class='bg g hide'></div>
  <div class='bg y hide'></div>
  <div class='bg b hide'></div>
</div> 
```

演示：http: [//jsfiddle.net/hbh7z/1/](http://jsfiddle.net/hbh7z/1/)

# html - html5网站的认证

> ID：11737524
> 
> 赞同：2
> 
> 时间：2012-07-31T09:56:49.337
> 
> 标签：html, security, authentication

我为一个应用程序开发了 HTML5 页面，我将它捆绑为一个 war 文件并部署在 WAS CE 上。

现在我想对应用程序实施身份验证和授权，以便只有授权用户才能查看网站。

我该如何实施 *

> html5页面资源的认证和授权

*就像我们使用 JAAS 或 Spring Security 保护 Java Web 应用程序一样。

问候斯里..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:00:17.910

HTML5/JavaScript 完全是客户端。此代码无法验证客户端。JAAS 或 Spring Security 的 Session 处理程序可以验证客户端是否已通过身份验证。然后在服务器端，您可以根据会话处理程序存储的身份验证凭据拒绝 html5 客户端访问资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T20:51:00.597

在服务器端，您可以使用 XML 来定义允许哪些用户查看哪些资源。

```
<security-constraint>
  <web-resource-collection>
    <web-resource-name>secure</web-resource-name>
    <url-pattern>/secure/*</url-pattern>
  </web-resource-collection>
  <auth-constraint>
    <role-name>admin</role-name>
  </auth-constraint>
</security-constraint> 
```

像这样的东西。

# ember.js - 在给定的 HTML 标记中包含一个 EmberJS 应用程序

> ID：11737539
> 
> 赞同：2
> 
> 时间：2012-07-31T09:57:35.157
> 
> 标签：ember.js

**HTML**

标题

```
`<script type="text/x-handlebars" data-template-name="application">  
    {{view App.NavbarView}}  
    {{outlet}}  
</script>` 
```

页脚

**JS**

```
`App.ApplicationController = Em.Controller.extend();  
App.ApplicationView = Em.View.extend({  
  templateName: 'application'  
});`  

App.Router = Em.Router.extend({
enableLogging: true,
location: 'hash',

root: Em.Route.extend({
  // EVENTS
  gotoAbout: Ember.Route.transitionTo('about'),

  // STATES
  about: Em.Route.extend({
    route: '/',
    connectOutlets: function (router, context) {
      router.get('applicationController').connectOutlet('about');
    }
  }) 
```

我想删除`data-template-name="application"`，因为我想立即在这段代码的位置（在页眉和页脚之间）显示它。

但是当我删除它并且`templateName: 'application'`路由器不工作时。

**问题是：**如何显示块

```
<script type="text/x-handlebars" data-template-name="application">  
  {{view App.NavbarView}}  
  {{outlet}}  
</script> 
```

页眉和页脚之间。

我知道我可以编写`<div id="content"></div>`和使用`.appendTo("content")`但可能存在更优化的方式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T10:38:18.473

您是否尝试设置 App 的`rootElement`属性？

```
App = Ember.Application.create({
  rootElement: '#app-container'
}); 
```

你在[这里](http://jsfiddle.net/MikeAski/FMV8u/2/)有一个例子，你可以很容易地推导出来。

# android - 如何使用 ndk-build 应用程序库

> ID：11737541
> 
> 赞同：0
> 
> 时间：2012-07-31T09:57:36.553
> 
> 标签：android, android-ndk, android-install-apk, apk

我不得不使用 ndk-build 构建一个库。做过某事。它产生了所有的 libXX.so 文件。它已经在 bin 目录中有一个 apk 文件。现在这是如何组合在一起的。我应该在我的android手机的lib文件夹中安装所有lib，然后安装apk并运行它。是这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:05:47.987

你使用构建系统吗？使用 Maven，我使用了本地存储库并将 .so 文件放在那里（以适当的名称命名）目录，然后我的构建过程在创建 apk 时将它们拾取。让我知道您是如何构建您的 apk 的，我可能会提供进一步的帮助。

*编辑包括一些 Maven 的东西*

对本机库的依赖：

```
<dependency>
    <groupId>android.native</groupId>
    <artifactId>libhello-jni</artifactId>
    <version>0.8</version>
    <classifier>armeabi-v7a</classifier>
    <type>so</type>
</dependency> 
```

使用本地存储库（`${third-party-jars}`系统上的路径在哪里，例如`<third-party-jars>/local/path/to/third/party/jars</third-party-jars>`：

```
<repository>
    <id>third.party.closed.source.local.repo</id>
    <name>Third Party Closed Source Local Repository</name>
    <url>file://${third-party-jars}</url>
    <!-- Files must be in groupId/artifactId/version directories and named
         artifactId-version.extension
         Example: ${groupId/$artifactId/$version/$artifactId-$version.$extension -->
</repository> 
```

然后，Maven 构建就像 jar 文件等一样将 so 作为依赖项。

# asp.net-mvc - 如何将 DevEx 文本框用作文本框？

> ID：11737544
> 
> 赞同：2
> 
> 时间：2012-07-31T09:57:47.720
> 
> 标签：asp.net-mvc, textbox, devexpress

我找不到有关此主题的任何示例。我尝试编写一些代码，但它发布了空模型。

```
@model DevExpressMvcApplication2.Models.Customers
@{
    ViewBag.Title = "MusteriEkle";
}
@using (Html.BeginForm((string)ViewBag.FormAction, "Home"))
{
<div class="editorContainer">
    @Html.DevExpress().TextBox(
            settings =>
            {
                settings.Name = "textBox1";
                settings.Width = 170;
                settings.Properties.NullText = "Enter your name...";
            }
        ).Bind(Model.customer_name).GetHtml()
</div>
<input type="submit" value="submit" />
} 
```

有没有关于这个话题的例子。我想将 devEx 元素用作带有“for”的 html.helper

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:54:28.807

需要在 [HttpPost] Controller Action 中使用 DevExpressEditorsBinder 并设置 TextBox.Name 属性 = 模型字段/属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-31T05:07:42.567

```
@Html.DevExpress().TextBoxFor(model => model.Code,
settings => {
settings.Name = "txtCode";
settings.Width = 170;
settings.Properties.NullText = "000"; }).GetHtml() 
```

# linux - 将库添加到 cmake

> ID：11737547
> 
> 赞同：2
> 
> 时间：2012-07-31T09:57:52.980
> 
> 标签：linux, makefile, cmake

我正在尝试使用 cmake 使用名为[SDL_draw的库来编译我的项目。](http://sdl-draw.sourceforge.net/)在我下载并安装它之后，库文件转到 /usr/local/lib 并命名为 libSDL_draw.a ，所以我编辑了 CMakeLists.txt 来阅读它。

```
link_directories(
    /usr/local/lib
)
include_directories(/usr/local/lib)

ADD_EXECUTABLE(point_trajectory point_trajectory.cpp)

TARGET_LINK_LIBRARIES(point_trajectory SDL_draw) 
```

cmake 成功，但是当我在 cmake 之后“制作”项目时，它仍然找不到 SDL_draw.h 。

```
fatal error: SDL_draw.h: No such file or directory
compilation terminated.
make[2]: *** [CMakeFiles/point_trajectory.dir/point_trajectory.cpp.o] Error 1
make[1]: *** [CMakeFiles/point_trajectory.dir/all] Error 2
make: *** [all] Error 2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T10:12:58.653

我以前从未使用过 SDL_draw，但有些东西看起来很有趣。通常库存档在 /usr/local/lib 但头文件在其他地方......可能是 /usr/local/include 。

您可能需要仔细检查 SDL_draw.h 的位置。如果它在 /usr/local/lib 中，请仔细检查您是否正确安装了它。

可能，这将解决您的问题：

```
include_directories(/usr/local/include) 
```

# android - 如何更改另一个应用程序的屏幕方向

> ID：11737551
> 
> 赞同：2
> 
> 时间：2012-07-31T09:58:00.580
> 
> 标签：android, screen-orientation

是否可以设置不同应用程序的活动的屏幕方向？

我的应用程序调用设备中的其他应用程序。它用于`android:Orientation="sensor"`所有活动。如果禁用自动旋转并且我在横向中使用我的应用程序，则从我的应用程序调用的其他应用程序不会采用我的方向。我怎样才能做到这一点？

我尝试使用更改系统设置

```
Settings.System.putInt(resolver, Settings.System.ACCELEROMETER_ROTATION,1); 
```

但这可能会在我的应用程序在关闭之前崩溃的情况下改变整个系统，所以我不想要这个。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-31T11:14:12.933

在活动下的android manifext.xml中使用了这些

```
android:screenOrientation="landscape"

android:configChanges="keyboardHidden|orientation" 
```

# c# - 休眠；仅使用单向映射保留子级

> ID：11737556
> 
> 赞同：0
> 
> 时间：2012-07-31T09:58:17.240
> 
> 标签：c#, .net, nhibernate

使用集合上的单向映射和 Cascade.All ，是否可以通过设置有效的 FK 然后执行 Save 或 SaveOrUpdate 只保存一个孩子？

如果我创建一个新订单，设置一个有效的 Account_id*并执行 SaveOrUpdate，则 Account_id*在数据库中设置为 NULL，而实体仍然具有先前设置的 Account_id。

为什么？我可以修改 SaveOrUpdate 方法以使其工作吗？

```
public class Account
{
    public int Id { get; set; }
    public string Name { get; set; }
    public IList<Order> Orders { get; set; }
    //...
}

public class Order
{
   public int Id { get; set; }
   public int Account__id { get; set; }
   public decimal Price { get; set; }
   //...
} 
```

映射：

```
public  class AccountMap : ClassMap<Account>
{
   public AccountMap()
       : base()
   {
       Id(x => x.Id).GeneratedBy.Identity();
       Map(x => x.Name);
       HasMany(x => x.Orders).KeyColumn("Account__id").Cascade.All(); 
   }
} 
```

存储库：

```
 public void SaveOrUpdate(T instance)
    {
        using (ISession session = FnhManager.OpenSession())
        {
            using (ITransaction transaction = session.BeginTransaction())
            {
                lock (instance)
                {
                    session.SaveOrUpdate(instance);
                    transaction.Commit();
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:27:08.380

看起来您没有在**Order**映射类中映射`Account__id`列。试着放

 **```
Map(x => x.Account_id) 
```

到您的 OrderMap 类。**

# php - PHP：每N个字符后插入一个子字符串到HTML字符串中？

> ID：11737557
> 
> 赞同：1
> 
> 时间：2012-07-31T09:58:36.050
> 
> 标签：php, html, newline

我有一个长字符串将显示在我的页面上。我希望它在每 40 个字符后换行。我怎样才能插入这些？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T10:12:59.293

使用`<br>`or`<wbr>`标签：

```
wordwrap($string, 40, "<wbr>", true); 
```

基本上，`<wbr>`表示允许浏览器在新行上换行的地方，但如果不需要，它不会显示空格。

`<br>`另一方面，*总是*会创建一个换行符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T10:04:56.627

```
$string = 'loooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooong string';
echo wordwrap($string, 40, "\n", true); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-31T10:03:07.950

使用 chunk_split[手册](http://php.net/manual/en/function.chunk-split.php)

```
chunk_split($string, 40, "\n"); 
```

# java - 发生MostOften(int[] a) - java

> ID：11737563
> 
> 赞同：0
> 
> 时间：2012-07-31T09:58:54.707
> 
> 标签：java, arrays

我试图找到在给定的 int 数组中出现最多的数字。这是我的代码，它可以工作，但有一些不一致之处。另外，如果你能让我知道如何让它变得更好，我认为我的代码太长了！！

```
public static int countOccurrences(int[] a, int x) {
    int count = 0;
    for(int i=0;i<a.length;i++) {
        if(a[i] == x) count++;
    }
    return count;
}

public static int occursMostOften(int[] a) {
    int[] count = new int[a.length];
    boolean[] duplicate = new boolean[a.length];
    for(int i = 0; i < a.length;i++) {
        if(duplicate[i] != true) {
            count[i] = countOccurrences(a,a[i]);
            duplicate[i] = true;
        }
    }
    return a[maxIndex(count)];
}
private static int maxIndex(int[] a) {
    int max = 0;
    for(int i = 1; i<a.length;i++) {
        if(a[i-1]<a[i]) max = i;
    }
    return max;     
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T10:05:09.467

如果这是一个分配（我假设它是），那么您的代码符合要求，尽管不是最佳的。

如果您了解了一种称为 Map 的数据结构，请改用它。映射中的*键*将是数组中的*值*，映射中的值是您看到该值的次数。

这将降低代码的复杂性。操作顺序为：

对于数组中的每个值

1.  如果该值在地图中存在，则更新计数
2.  如果没有，则创建一个计数为 1 的新条目

最后，您可以遍历地图以找到出现次数最多的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:07:23.117

您的代码对每个非重复数字执行完整数组的线性扫描。`n`对于具有不同值的大小数组，`n`您的代码复杂度将为 O(n^2)。

您可以使用以下算法在 O(n) 中做得更好：

*   遍历数组中的所有数字
*   对于每个数字，将其添加到`Map<Integer, Integer>`包含数字的地图 () 中并计数
*   如果地图中存在数字，则获取当前计数，递增并放回地图
*   如果数字不存在，只需将计数为 1 的条目输入到地图中
*   在所有迭代完成后，检索值和鳍最大值。

# php - 如何在 Magento 中添加自定义字段来订购？

> ID：11737570
> 
> 赞同：7
> 
> 时间：2012-07-31T09:59:08.233
> 
> 标签：php, xml, magento

我想在 Magento 的一页结帐中添加一个新的自定义字段。我用安装程序创建了一个模块：

```
$installer = $this;
$installer->startSetup();
$setup = new Mage_Eav_Model_Entity_Setup('core_setup');

$setup->addAttribute('order', 'deliverydate', array(
    'position'      => 1,
    'input'         => 'text',
    'type'          => 'varchar',
    'label'         => 'Choose delivery date',
    'visible'       => 1,
    'required'      => 0,
    'user_defined' => 1,
    'global'        => 1,
    'visible_on_front'  => 1,
));

$installer->endSetup(); 
```

我可以通过 phpmyadmin 看到该字段已添加到 mage_eav_attribute 表中。我还将它添加到 shipping-method.phtml 中：

```
<div class="form-list field">
   <label for="deliverydate"><?php echo $this->__('Choose delivery date') ?></label>
       <div class="input-box">
      <input type="text" name="deliverydate" id="deliverydate" title="<?php echo $this->__('deliverydate') ?>" class="input-text" />
   </div>
</div> 
```

当我下订单时，自定义字段不会保存。如何让它发挥作用？我用这种方式向客户添加了一些自定义字段，它们工作正常。我还可以在 admin/customer 上自动查看我的自定义客户字段，但在 admin/sales_order 中看不到我的自定义订单字段。谢谢

***编辑：**

这就是我所做的：

我将observer.php 添加到companyname/module/model/observer.php

```
class Company_Module_Model_Observer
{
    public function Deliverydate($observer){
        //get event data
        $event = $observer->getEvent();

                //get order
        $order = $event->getOrder();

        //set the country here
        $order->setDeliverydate('11.11.2012');
        //echo "observer";
        }   
} 
```

这是我的 config.xml：

```
<?xml version="1.0"?>
<config>
    <modules>
        <Company_Module>
            <version>0.1.0</version>
        </Company_Module>
    </modules>

    <global>
        <resources>
            <Company_Module_setup>
                <setup>
                    <module>Company_Module</module>
                    <class>Company_Module_Model_Resource_Mysql4_Setup</class>
                </setup>
            </Company_Module_setup>
        </resources>

        <events>
            <checkout_type_onepage_save_order>
                <observers>
                    <Company_Module_Model_Observer>
                        <type>singleton</type>
                        <class>Company_Module_Model_Observer</class>
                        <method>Deliverydate</method>
                    </Company_Module_Model_Observer>
                </observers>
            </checkout_type_onepage_save_order>
        </events>
    </global>
</config> 
```

我认为我的观察者有问题。我认为这不是射击。

***编辑：**

我的观察员现在正在工作。文件名必须是 Observer.php，而不是observer.php。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-31T13:44:14.873

添加观察者：

```
<events>
    <checkout_type_onepage_save_order>
        <observers>
            <Savefield_observer>
                <type>singleton</type>
                <class>mymodule/observer</class>
                <method>Savefield</method>
            </Savefield_observer>
        </observers>
    </checkout_type_onepage_save_order>
</events> 
```

在**mymodule/savefield/model/obsever.php**文件中添加：

```
class Mymodule_Savefield_Model_Observer
{
    public function Savefield($observer){
        //get event data
        $event = $observer->getEvent();

        //get order
        $order = $event->getOrder();

        //set the variable here
        $order->setMyField($fieldVal);
    }   
} 
```

# python - 如何在目录（python）目录中找到最近修改的文件夹？

> ID：11737572
> 
> 赞同：3
> 
> 时间：2012-07-31T09:59:09.163
> 
> 标签：python, directory

根据我找到的其他答案，我已经给了它一个不错的尝试，但没有管理任何可靠的东西（我的解决方案非常慢，但也许没有其他方法）。基本上，我有一个名为“scratch”的文件夹，用户可以在其中创建自己的文件夹来转储他们的数据。
我需要我的脚本来找出哪些用户的文件夹超过 30 天没有使用。我想我可以通过在用户文件夹中找到最近修改的目录（通过递归搜索）然后过滤掉较旧的目录来做到这一点。

获取用户目录列表的代码：

```
 dirlist = list()
    for filename in os.listdir("\\\\abg-netapp1\\Scratch\\"):
        dirlist.append(filename) 
```

然后我可以遍历“dirlist”的每个索引来创建一个完整的搜索路径：

```
 x=0
    for item in dirlist:
        max_mtime = 0
        for dirname,subdirs,files in os.walk("\\\\abg-netapp1\\Scratch\\" + dirlist[x]):
            for fname in subdirs:
                full_path = os.path.join(dirname, fname)
                mtime = os.stat(full_path).st_mtime
                if mtime > max_mtime:
                    max_mtime = mtime
                    max_dir = dirname
                    max_file = fname
        print max_dir, max_file, time.strftime('%Y-%m-%d', time.localtime(max_mtime))
        x+=1 
```

我确实知道我还没有过滤掉超过 30 天的目录，只是想看看我是否可以用这段代码更改任何内容。
我是不是走错了路，有没有更简单的解决方案？有什么问题或者其他什么都可以告诉我，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T10:48:49.990

我会使用：

```
import os
from os.path import join
from datetime import datetime, timedelta
from operator import itemgetter

def list_user_files(username):
    for root, dirs, files in os.walk(username):
        for name in files:
            fullname = join(root, name)
            try:
                yield fullname, os.stat(fullname).st_mtime
            except (IOError, OSError) as e: # will catch WindowsError but more generic
                pass # Do something here...

ROOT = '/home'
CUTOFF = timedelta(days=30)
for userdir in os.listdir(ROOT):
    most_recent = max(list_user_files(join(ROOT, userdir)), key=itemgetter(1))
    print '{}: most recent file and timestamp is {}'.format(userdir, most_recent)
    if (datetime.now() - datetime.fromtimestamp(most_recent[1])) > CUTOFF:
        print '{} has not used their folder during cutoff period'.format(userdir) 
```

调试`max` `ValueError`（将其替换为`most_recent=`行）：

```
try:
    most_recent = max(list_user_files(join(ROOT, userdir)), key=itemgetter(1))
except ValueError as e:
    print '***DEBUG***', list(list_user_files(join(ROOT, userdir))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:18:12.753

首先创建一个目录列表，然后按`st_mtime`.

```
>>> root_path = '/foo/bar/zoo/'
>>> l = [fname for fname in os.listdir(root_path) if os.path.isdir(os.path.join(root_path,fname))]
>>> sorted(l,key=lambda x: os.stat(os.path.join(root_path,x)).st_mtime) 
```

# mysql - 检查表中是否存在列并在一个查询中添加列

> ID：11737575
> 
> 赞同：0
> 
> 时间：2012-07-31T09:59:19.263
> 
> 标签：mysql

我想在 mytable 列“auto”中检查是否存在，如果不存在，添加他的。这样做：

```
 mysql-> SHOW COLUMNS FROM mytable 
```

之后，我用 PHP 检查结果是否存在“自动”，如果没有，我会：

```
 mysql-> ALTER TABLE mytable  ADD auto  VARCHAR (30) NOT NULL COLLATE utf8_general_ci 
```

问题：请告诉，如何在一个查询中进行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:04:27.283

跳过第一个查询，然后尝试添加它，如果它已经存在，它将失败，如果它丢失，它将被添加

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T10:14:10.960

您可以在存储过程中定义以下查询，如果不存在，则调用存储过程来添加列。

```
IF NOT EXISTS(
    SELECT * FROM information_schema.COLUMNS
    WHERE COLUMN_NAME='auto' AND TABLE_NAME='my_table' AND TABLE_SCHEMA='the_schema'
    )
    THEN
        ALTER TABLE `the_schema`.`my_table`
        ADD COLUMN `auto` VARCHAR (30) NOT NULL COLLATE utf8_general_ci ;

END IF; 
```

# phing - 如何在 PHING 的多个目标中使用用户的输入？

> ID：11737577
> 
> 赞同：3
> 
> 时间：2012-07-31T09:59:22.597
> 
> 标签：phing

我将所有的构建任务分成几个目标，这些目标不打算单独执行。我正在尝试使用`targetA`其他两个目标中的用户输入值，但它们似乎在不同的范围内。解决这个问题的一种方法是添加`targetA`到的`depends`属性，`targetB`但`targetC`它会导致`targetA`被调用两次。

那么有没有办法在全球范围内保存这个价值呢？或者也许确保目标只执行一次？

```
<target name="targetA" description="..." hidden="true">
    <input propertyName="property" defaultValue="default" ></input>
    <!-- some action goes on here -->
</target>

<target name="targetB" description="..." hidden="true">
    <echo message="${property}" />
    <!-- some action goes on here -->
</target>

<target name="targetC" description="..." hidden="true">
    <echo message="${property}" />
    <!-- some action goes on here -->
</target>

<target name="install">
    <phingcall target="targetA" />
    <phingcall target="targetB" />
    <phingcall target="targetC" />
</target> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T06:35:42.053

嗯，找到了解决方案。属性范围似乎相互嵌套，因此我们可以描述`input`目标，将所有输入放在那里，然后将主要目标定义`install`为依赖于`input`. 现在我们的所有属性都可用于从`install` 这样调用的所有目标：

```
<target name="input" description="..." hidden="true">
    <input propertyName="property" defaultValue="default" ></input>
    <!-- more inputs here -->
</target>

<target name="targetB" description="..." hidden="true">
    <echo message="${property}" />
    <!-- some action goes on here -->
</target>

<target name="targetC" description="..." hidden="true">
    <echo message="${property}" />
    <!-- some action goes on here -->
</target>

<target name="install" depends="input">
    <phingcall target="targetB" />
    <phingcall target="targetC" />
</target> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-13T22:58:56.807

我为此苦苦挣扎。另一种方法是从文件中保存和检索属性。这允许任务之间更灵活的依赖关系，并具有在会话之间保存值的额外好处。

例如，使每个输入目标以：

```
<propertyprompt propertyName="site_dir" promptText="Name of site directory" promptCharacter="?" useExistingValue="true" />
<if>
  <available file="${site_dir}/build.props" />
  <then>
    <echo msg="Retrieving stored settings from ${site_dir}/build.props" />
    <property file="${site_dir}/build.props" />
  </then>
</if> 
```

如果您已经有答案，如果您想跳过问题，请使用 useExistingValue="true" 获取您想要的任何输入。然后结束目标：

```
<echo msg="Updating stored settings in ${site_dir}/build.props" />
<exportproperties targetfile="${site_dir}/build.props" /> 
```

# c# - 在 Windows Phone 中转换颜色

> ID：11737583
> 
> 赞同：2
> 
> 时间：2012-07-31T09:59:31.790
> 
> 标签：c#, silverlight, windows-phone-7, silverlight-4.0

在我`Windows Phone application`的中，我从 xml 中获取颜色，然后将其绑定到某个元素。
我发现在我的情况下我得到了错误的颜色。

这是我的代码：

```
 var resources = feedsModule.getResources().getColorResource("HeaderColor") ??
     FeedHandler.GetInstance().MainApp.getResources().getColorResource("HeaderColor");
     if (resources != null)
     {
      var colourText = Color.FromArgb(255,Convert.ToByte(resources.getValue().Substring(1, 2), 16),
                       Convert.ToByte(resources.getValue().Substring(3, 2), 16),
                      Convert.ToByte(resources.getValue().Substring(5, 2), 16)); 
```

所以在转换颜色后，我得到了错误的结果。在 xml 我有这个：

```
 <Color name="HeaderColor">#FFc50000</Color> 
```

它转换成`#FFFFC500`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-31T11:53:29.403

您应该使用一些 3rd-party 转换器。

[这是其中之一](http://sharepointtaproom.com/2011/03/16/silverlight-convert-hex-string-to-color/)。

然后你可以这样使用它：

```
Color color = (Color)(new HexColor(resources.GetValue()); 
```

您也可以使用[此链接](http://silverlemma.blogspot.com/2009/03/c-converting-from-hex-string-to-color.html)中的方法，它也可以。

```
public Color ConvertStringToColor(String hex)
{
    //remove the # at the front
    hex = hex.Replace("#", "");

    byte a = 255;
    byte r = 255;
    byte g = 255;
    byte b = 255;

    int start = 0;

    //handle ARGB strings (8 characters long)
    if (hex.Length == 8)
    {
        a = byte.Parse(hex.Substring(0, 2), System.Globalization.NumberStyles.HexNumber);
        start = 2;
    }

    //convert RGB characters to bytes
    r = byte.Parse(hex.Substring(start, 2), System.Globalization.NumberStyles.HexNumber);
    g = byte.Parse(hex.Substring(start + 2, 2), System.Globalization.NumberStyles.HexNumber);
    b = byte.Parse(hex.Substring(start + 4, 2), System.Globalization.NumberStyles.HexNumber);

    return Color.FromArgb(a, r, g, b);
} 
```

# sharepoint - 什么是 rs: 和 z: 以及由 sharepoint webservices 检索的 xml 节点中的 ows

> ID：11737585
> 
> 赞同：0
> 
> 时间：2012-07-31T09:59:36.097
> 
> 标签：sharepoint, sharepoint-2010

见以下代码

```
<listitems xmlns:s="uuid:BDC6E3F0-6DA3-11d1-A2A3-00AA00C14882" 
   xmlns:dt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882" 
   xmlns:rs="urn:schemas-microsoft-com:rowset" xmlns:z="#RowsetSchema" 
   xmlns="http://schemas.microsoft.com/sharepoint/soap/">
   <rs:data ItemCount="4">
      <z:row ows_Number_Field="6555.00000000000" 
         ows_Created="2003-06-18T03:41:09Z" 
         ows_ID="3" ows_owshiddenversion="3" />
      <z:row ows_Number_Field="78905456.0000000" 
         ows_Created="2003-06-18T17:15:58Z" 
         ows_ID="4" ows_owshiddenversion="2" />
         ...
   </rs:data>
</listitems> 
```

它有**rs:**、**z:之类的标签和****ows 之**类的属性。这些值是否有任何专有名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:44:52.663

*   rs = 行集
*   z：“RowSet Shema”（我自己还没找到更好的名字）
*   ows：[Open Geospatial Consortium Web Service](http://en.wikipedia.org/wiki/Open_Geospatial_Consortium) - 基本上是 SharePoint WebServices 遵循的一组更容易数据交换的标准。

# java - Java IOException：以所有者身份运行时在 Linux 上的权限被拒绝

> ID：11737587
> 
> 赞同：1
> 
> 时间：2012-07-31T09:59:39.413
> 
> 标签：java, linux, io, file-permissions, chmod

我需要创建一些目录和文件，它们都应该具有 0600 权限。
当我从 NetBeans 调试运行时：创建目录后，当我尝试在那里存储一些文件时，我在创建`IOException`目录和文件时收到“权限被拒绝”消息同一用户同时使用相同的应用程序，所以我认为 0600（所有者读/写）应该可以工作。
并且在运行 Jar 文件时，chmod 根本不起作用！我的代码是：

```
if(!Dest.exists()){
   boolean res=dirs.mkdirs();
   if(res){
      Runtime.getRuntime().exec("chmod -R 600 '"+dirs.getAbsolutePath()+"'");                
    }
}
File Destination=new File(Dest, source.getName());
documentManager.copyFile(source, Destination); 
```

和copyFile是：

```
public static void copyFile(File sourceFile, File destFile) throws FileNotFoundException,IOException {
    if(!destFile.exists()) {
        destFile.createNewFile();
    }

    FileChannel source = null;
    FileChannel destination = null;
    try {
        source = new FileInputStream(sourceFile).getChannel();
        destination = new FileOutputStream(destFile).getChannel();
        destination.transferFrom(source, 0, source.size());
    }
    finally {
        if(source != null) {
            source.close();
        }
        if(destination != null) {
            Runtime.getRuntime().exec("chmod 600 '"+destFile.getAbsolutePath()+"'");
            destination.close();
        }
    }
} 
```

有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T10:05:29.077

该目录需要设置可执行位，以便您将文件写入其中。在目录上尝试 chmod +x。

```
mkdir tmp2323
chmod a-x tmp2323
touch tmp2323/test
touch: cannot touch `tmp2323/test': Permission denied 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:32:37.447

**对全部：**

```
dirs.setWritable(true, false); 
```

* * *

**仅限所有者：**

```
dirs.setWritable(true, true); 
```

**或者**

```
dirs.setWritable(true); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-01-30T05:41:41.073

`chmod 777 /home`如果您想在家中创建文件，只需运行。否则切换`/home`到不同的目录。然后您的简单代码将能够创建该文件。

# jquery - 浏览器问题中的 jquery + css 动画

> ID：11737589
> 
> 赞同：0
> 
> 时间：2012-07-31T09:59:40.917
> 
> 标签：jquery, css, jquery-animate

我是 js 新手，想要一个页面上有两个动画菜单。
我在这里有一个例子，但有两个问题。
[http://jsfiddle.net/misemefein/k3dKz/5/](http://jsfiddle.net/misemefein/k3dKz/5/)

1：我希望菜单 div 在页面加载时关闭屏幕并在相关点击时滑入。
  目前情况正好相反。
2：动画在 jsfiddle 中工作，但不在浏览器的测试页面上：http: [//bit.ly/M7TZrt](http://bit.ly/M7TZrt)

任何想法表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:36:09.230

您可以更改您的 JavsScript 以及 CSS。你的 CSS 和`animate()`函数没有很好地定位元素。

```
$(document).ready(function() {
  $('#slideboys button').click(function() {
        var $lefty = $(this).next();
        $lefty.animate({
          left: parseInt($lefty.css('left'),10) == 0 ?
          -$lefty.outerWidth() :
          0
        });
  });
  $('#slidegirls button').click(function() {
        var $righty = $(this).next();
        $righty.animate({
          right: parseInt($righty.css('right'),10) == 0 ?
          -$righty.outerWidth() :
          0
        });
  });
}); 
```

这是更正的工作小提琴[http://jsfiddle.net/k3dKz/7/](http://jsfiddle.net/k3dKz/7/)

还要添加这一行；

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"> 
```

或者

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"> 
```

在`<header>`您的网页部分内，以使您的代码运行。

希望这可以帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:07:11.480

1.  用css、jsfiddle将元素定位在体外：http: [//jsfiddle.net/k3dKz/6/](http://jsfiddle.net/k3dKz/6/)

仍然需要更新女孩的点击事件，以动画另一个方向。

1.  你没有在这个网站上链接 jQuery，你的控制台说'$ 没有定义'，确保你加载了 jQuery，它应该可以工作。

# javascript - jquery自动更新两个选择字段

> ID：11737591
> 
> 赞同：0
> 
> 时间：2012-07-31T09:59:54.307
> 
> 标签：javascript, jquery

我有两个`select`盒子。一个带有城市列表，第二个带有城市区。`select`当我从第二个框中的第一个框中选择（通过单击）城市时，我会看到所选城市的地区。这工作得很好，但是当另一个脚本自动选择城市时，地区列表不显示 - 我必须从列表中手动选择城市，然后出现地区列表。

这是我的脚本：

```
$.viewMap_get = {
    '0' : $([]),
    'Katowice' : $('#c1a, #c1b, #c6, #c7'),
    'Kraków' : $('#c2a, #c2b, #c6, #c7'),
    'Warszawa' : $('#c3a, #c3b, #c6, #c7'),
    'Wrocław' : $('#c4a, #c4b, #c6, #c7'),
    'Gdańsk' : $('#c5a, #c5b, #c6, #c7'),
};

$.each($.viewMap_get, function() { this.hide(); });
$('#get_city_district').hide();

$('#get_car').change(function() {
// hide all
$.each($.viewMap_get, function() { this.hide(); });
  $('#get_city_district').hide();
// show current
$.viewMap_get[$(this).val()].show();
  $('#get_city_district').show();
  var id = $.viewMap_get[$(this).val()].attr("id");   
  $('#'+id).attr('selected', 'selected');
}); 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:05:30.777

我认为您应该将所选城市的获取区绑定到

```
$('firstSelect').change(function(){
// your code
}) 
```

# json - 如何使用 JAXB 将长属性作为 JSON 字符串值返回

> ID：11737597
> 
> 赞同：3
> 
> 时间：2012-07-31T10:00:08.670
> 
> 标签：json, string, jaxb, marshalling, long-integer

我有一个用`@XmlRootElement`. 这个 Java 类有一个长属性 ( `private long id`)，我想将它返回给 JavaScript 客户端。

我按如下方式创建 JSON：

```
MyEntity myInstance = new MyEntity("Benny Neugebauer", 2517564202727464120);
StringWriter writer = new StringWriter();
JSONConfiguration config = JSONConfiguration.natural().build();
Class[] types = {MyEntity.class};
JSONJAXBContext context = new JSONJAXBContext(config, types);
JSONMarshaller marshaller = context.createJSONMarshaller();
marshaller.marshallToJSON(myInstance, writer);
json = writer.toString();
System.out.println(writer.toString()); 
```

这将生成：

```
{"name":"Benny Neugebauer","id":2517564202727464120} 
```

但问题是长值对于 JavaScript 客户端来说太大了。因此，我想将此值作为字符串返回（而不是在 Java 中将 long 设为字符串）。

是否有可以生成以下内容的注释（或类似的东西）？

```
{"name":"Benny Neugebauer","id":"2517564202727464120"} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:00:28.643

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

下面是如何使用 MOXy 作为 JSON 提供者来完成这个用例。

**我的实体**

您将使用注释您的`long`属性`@XmlSchemaType(name="string")`以指示它应该编组为`String`.

```
package forum11737597;

import javax.xml.bind.annotation.*;

@XmlRootElement
public class MyEntity {

    private String name;
    private long id;

    public MyEntity() {
    }

    public MyEntity(String name, long id) {
        setName(name);
        setId(id);
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    @XmlSchemaType(name="string")
    public long getId() {
        return id;
    }

    public void setId(long id) {
        this.id = id;
    }

} 
```

**jaxb.properties**

要将 MOXy 配置为您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件（请参阅： [http](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html) ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html ）。

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

我已经修改了您的示例代码，以显示如果您使用 MOXy 会是什么样子。

```
package forum11737597;

import java.io.StringWriter;
import java.util.*;
import javax.xml.bind.*;
import org.eclipse.persistence.jaxb.JAXBContextProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        MyEntity myInstance = new MyEntity("Benny Neugebauer", 2517564202727464120L);
        StringWriter writer = new StringWriter();
        Map<String, Object> config = new HashMap<String, Object>(2);
        config.put(JAXBContextProperties.MEDIA_TYPE, "application/json");
        config.put(JAXBContextProperties.JSON_INCLUDE_ROOT, false);
        Class[] types = {MyEntity.class};
        JAXBContext context = JAXBContext.newInstance(types, config);
        Marshaller marshaller = context.createMarshaller();
        marshaller.marshal(myInstance, writer);
        System.out.println(writer.toString());
    }

} 
```

**输出**

下面是运行演示代码的输出：

```
{"id":"2517564202727464120","name":"Benny Neugebauer"} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html](http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html)

# objective-c - 测试gmail帐户是否存在

> ID：11737599
> 
> 赞同：2
> 
> 时间：2012-07-31T10:00:21.847
> 
> 标签：objective-c

我想在我的应用程序中使用 gmail 登录是否可以在目标 c 中以编程方式测试给定的 gmail a/c 是否存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T10:10:53.977

运行这些命令：

```
telnet gmail-smtp-in.l.google.com 25
ehlo
mail from: <me@example.com> //can be any made up email
rcpt to: <somenonexistinguser@gmail.com> //the email of the user you want to check 
```

请注意，您必须包含大于和小于或等于符号。

如果您得到 OK，然后返回一个字符串，则该电子邮件是有效的。其他任何事情，都会返回一个错误（因此，电子邮件无效）。

# android - 为什么我的应用程序无法在 Hotsport 网络中使用 UDP 接收数据？

> ID：11737603
> 
> 赞同：0
> 
> 时间：2012-07-31T10:00:35.160
> 
> 标签：android, udp

为什么我的应用程序无法在 Hotsport 网络中使用 UDP 接收数据？但我的应用程序可以在普通 Wi-Fi 网络中使用 UDP 接收数据。发件人的代码是：

```
@Override
    public void run() {
        super.run();
        DatagramPacket dataPacket = null;

        try {
            udpSocket = new DatagramSocket(DEFAULT_PORT);

            dataPacket = new DatagramPacket(buffer, MAX_DATA_PACKET_LENGTH);
            while (isRunning) {
                String address = getLocalIPAddress();
                if (address != null) {
                    byte[] data = address.getBytes();
                    dataPacket.setData(data);
                    dataPacket.setLength(data.length);
                    dataPacket.setPort(DEFAULT_PORT);
                    InetAddress broadcastAddr;
                    broadcastAddr = InetAddress.getByName("255.255.255.255");
                    dataPacket.setAddress(broadcastAddr);
                    try {
                        Log.i(DazzleApplication.TAG,"Sending---->"+address);
                        sleep(3000);
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                }
            }
            if (udpSocket != null)
                udpSocket.close();
        } catch (Exception e) {
            e.printStackTrace();
        }

    } 
```

接收方代码为：

```
public void run() {
            DatagramPacket udpPacket=null;
            byte[] data=null ;
            try {
                udpSocket = new DatagramSocket(43708);
                udpSocket.setSoTimeout(3000);
                data= new byte[256];
                udpPacket= new DatagramPacket(data, 256);
            } catch (SocketException e) {
                e.printStackTrace();
                System.out.println(e.toString());
            }
            while (start) {
                System.out.println("DazzleTest Receive.....");
                try {

                    udpSocket.receive(udpPacket);
                } catch (Exception e) {
                    e.printStackTrace();
                    System.out.println(e.toString());
                }

                if (udpPacket.getLength() != 0) {
                    String codeString = new String(data, 0,
                            udpPacket.getLength());
                    Message msg = new Message();
                    msg.obj = codeString;
                    mH.sendMessageDelayed(msg, 1000);
                    System.out.println("receiver--->"+codeString);
                }else{
                    System.out.println("receiver null");
                }
            }
            if (udpSocket != null) {
                udpSocket.close();
            }

        } 
```

为什么？谁能解释一下这个案子？UDP不能在热点中工作？？

更新以下信息： 套接字的发送者在打开 Hotspot 的 HTC HD 中运行。它可以捕获异常：`java.net.SocketException: Network is unreachable: connect`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:24:33.317

如果代码在一个网络上运行而在另一个网络上不起作用，则几乎可以肯定第二个网络阻止了非 DNS UDP 流量。

# opencv - 使用 OpenCV 从多个网络摄像头（4 个）捕获图片

> ID：11737606
> 
> 赞同：0
> 
> 时间：2012-07-31T10:00:37.233
> 
> 标签：opencv

我设法从 4 个相同的 USB 网络摄像头获取图像，并将它们保存在四个不同的 .avi 文件中。

我使用 OpenCV 2.4。我的应用程序的源代码编译为：

```
g++ take_multicam_pictures.cpp -lcvaux -lopencv_highgui -lcv -lcxcore -o take_multicam_pictures 
```

（在 Ubuntu 10.04 中）。

问题是我必须选择每个设备，拍照，并且必须先释放设备，然后才能打开新设备。正因为如此，每个网络摄像头的帧数/秒非常低（例如一帧/秒）。

如果我在打开一个新设备之前没有释放每个捕获设备，我会收到以下错误：

```
VIDIOC_STREAMON: No space left on device 
```

但我设法同时启动了笔记本电脑网络摄像头和一个外部网络摄像头。这是来自的输出`lsusb`：

```
$ lsusb
Bus 008 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 007 Device 002: ID 093a:2510 Pixart Imaging, Inc. Hama Optical Mouse
Bus 007 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 006 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 005 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 004 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 003 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 002 Device 007: ID 0ac8:3450 Z-Star Microelectronics Corp. 
Bus 002 Device 006: ID 0ac8:3450 Z-Star Microelectronics Corp. 
Bus 002 Device 005: ID 0ac8:3450 Z-Star Microelectronics Corp. 
Bus 002 Device 004: ID 0ac8:3450 Z-Star Microelectronics Corp. 
Bus 002 Device 003: ID 0409:005a NEC Corp. HighSpeed Hub
Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 001 Device 002: ID 04f2:b071 Chicony Electronics Co., Ltd 2.0M UVC Webcam / CNF7129
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub 
```

这是我用于从所有四个网络摄像头获取图片并将它们保存在四个不同的视频文件中的代码。

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <iostream>
#include <stdio.h>
#include <opencv/cv.h>

using namespace cv;
using namespace std; 
IplImage* frame1 = 0;

int record_cam(int dev, CvVideoWriter *writer)
{ 
    CvCapture* capture1 = cvCaptureFromCAM(dev);    // select device 

    cvGrabFrame(capture1);                          // capture a frame

    frame1 = cvRetrieveFrame(capture1);             // retrieve the captured frame

    cvWriteFrame(writer, frame1);                   // write captured           frame to .avi file  

    cvReleaseCapture(&capture1);                    // release the capture device
}

// A Simple Camera Capture Framework 
int main() 
{
    CvVideoWriter *writer1 = 0;         //create writer device that allows us to place frames in video file
    CvVideoWriter *writer2 = 0;
    CvVideoWriter *writer3 = 0;
    CvVideoWriter *writer4 = 0;
    int isColor = 1;                    //video properties
    int fps     = 3; 
    int frameW  = 640;                  //webcam dimension
    int frameH  = 480;

    writer1 = cvCreateVideoWriter("out1.avi",CV_FOURCC('F', 'L', 'V', '1'),fps,cvSize(frameW,frameH),isColor);
    writer2 = cvCreateVideoWriter("out2.avi",CV_FOURCC('F', 'L', 'V', '1'),fps,cvSize(frameW,frameH),isColor);
    writer3 = cvCreateVideoWriter("out3.avi",CV_FOURCC('F', 'L', 'V', '1'),fps,cvSize(frameW,frameH),isColor);
    writer4 = cvCreateVideoWriter("out4.avi",CV_FOURCC('F', 'L', 'V', '1'),fps,cvSize(frameW,frameH),isColor);

    int nFrames = 20, i = 0, key;       //capture 20 frames from each webcam and saves them in video files (out1.avi, out2.avi ...)

    for(i=0;i<nFrames;i++)
    {
        record_cam(1, writer1);         //capture frames from each web cam and writes them in different .avi files
        record_cam(2, writer2);
        record_cam(3, writer3);
        record_cam(4, writer4);
    }

    cvReleaseVideoWriter(&writer1);
    cvReleaseVideoWriter(&writer2);
    cvReleaseVideoWriter(&writer3);
    cvReleaseVideoWriter(&writer4);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:07:53.427

您收到的错误消息来自 USB 总线。它基本上告诉您 USB 连接上的**数据负载****太高**。原因是在 OpenCV 中打开网络摄像头流的默认设置。

**最简单的解决方法是为要连接的每个摄像头**使用单独的 USB 总线。OpenCV 中的实现（至少 2.4.3.2）缺乏对为许多网络摄像头正确指定帧速率的支持，因此我出于自己的目的修补了源以便能够拥有多个网络摄像头。

您可以在我对 OpenCV 问答网站上的问题的**[回答中找到更多详细信息。](http://answers.opencv.org/question/4909/using-2-webcams-simultaneously/?answer=7228#post-id-7228)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-14T18:05:52.320

我已经制作了一个程序，可以使用用于 GUI 的 openCV 和 Tkinter 从多个网络摄像头捕获图片。之后可以将制作的图片推送到电影中。

[链接到我的 github 页面，您可以在其中找到源代码和 exe 文件](https://github.com/KarimAchaibou/multiple-webcam-capturing)

# android - 如何在android中动态设置可绘制的图像？

> ID：11737607
> 
> 赞同：73
> 
> 时间：2012-07-31T10:00:47.133
> 
> 标签：android

我将我的项目相关图像存储在可绘制文件夹中。此外，我将图像名称存储在字符串变量中，并且动态地尝试将这些图像设置为图像视图。但是图像没有显示。请在这方面帮助我。

我的代码：

```
int res = getResources().getIdentifier(imagename, "drawable", this.getPackageName());
imageview= (ImageView)findViewById(R.id.imageView);
imageview.setImageResource(res); 
```

在上面的代码中，“imagename”是包含图像名称的字符串变量。

提前致谢

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2012-07-31T10:08:47.987

试试这个：

```
String uri = "@drawable/myresource";  // where myresource (without the extension) is the file

int imageResource = getResources().getIdentifier(uri, null, getPackageName());

imageview= (ImageView)findViewById(R.id.imageView);
Drawable res = getResources().getDrawable(imageResource);
imageView.setImageDrawable(res); 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-07-31T10:03:53.447

在这里，我将`frnd_inactive`图像设置`drawable`为图像

```
 imageview= (ImageView)findViewById(R.id.imageView);
 imageview.setImageDrawable(getResources().getDrawable(R.drawable.frnd_inactive)); 
```

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2012-07-31T10:03:56.540

```
imageview= (ImageView)findViewById(R.id.imageView);
imageview.setImageResource(R.drawable.mydrawable); 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2012-07-31T10:11:03.380

试试这个**动态代码**

```
String fnm = "cat"; //  this is image file name
String PACKAGE_NAME = getApplicationContext().getPackageName();
int imgId = getResources().getIdentifier(PACKAGE_NAME+":drawable/"+fnm , null, null);
System.out.println("IMG ID :: "+imgId);
System.out.println("PACKAGE_NAME :: "+PACKAGE_NAME);
//    Bitmap bitmap = BitmapFactory.decodeResource(getResources(),imgId);
your_image_view.setImageBitmap(BitmapFactory.decodeResource(getResources(),imgId)); 
```

在上面的代码中，您将需要同时拥有的 Image-file-Name 和 Image-View**对象**。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-07-31T10:06:15.270

请参阅下面的代码，这对我有用

```
iv.setImageResource(getResources().getIdentifier(
                "imagename", "drawable", "com.package.application")); 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-06-22T02:59:36.430

这对我有用（不要使用图像的扩展名，只使用名称）：

```
String imagename = "myImage";
int res = getResources().getIdentifier(imagename, "drawable", this.getPackageName());
imageview= (ImageView)findViewById(R.id.imageView);
imageview.setImageResource(res); 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2016-12-14T18:03:50.740

**这是当今适用于每部手机**的最佳方式。这些答案中的大多数已被弃用或需要 API >= 19 或 22。您可以使用片段代码或活动代码取决于您的需要。

**分段**

```
//setting the bitmap from the drawable folder
Bitmap bitmap= BitmapFactory.decodeResource(getActivity().getResources(), R.drawable.my_image);

//set the image to the imageView
imageView.setImageBitmap(bitmap); 
```

**活动**

```
//setting the bitmap from the drawable folder
Bitmap bitmap= BitmapFactory.decodeResource(MyActivity.this.getResources(), R.drawable.my_image);

//set the image to the imageView
imageView.setImageBitmap(bitmap); 
```

干杯!

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2021-03-29T06:16:26.270

像这样设置`ImageView`：`imageView.setImageResource(R.drawable.image)`

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-05-06T10:10:28.850

```
imageView.setImageResource(R.drawable.picname); 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2016-11-18T12:00:59.507

`getDrawable()`已弃用，所以试试这个

```
imageView.setImageResource(R.drawable.fileName) 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-07-31T10:25:09.763

首先让我们的图像名称是**myimage**。所以你要做的就是去 Drawable 并保存图像名称**myimage**。

现在假设您只知道图像名称并且您需要访问它。使用下面的代码片段来访问它，

您所做的是正确的，请确保您保存了要在编码中使用的图像名称。

```
public static int getResourceId(Context context, String name, String resourceType) {
    return context.getResources().getIdentifier(toResourceString(name), resourceType, context.getPackageName());
}

private static String toResourceString(String name) {
    return name.replace("(", "")
               .replace(")", "")
               .replace(" ", "_")
               .replace("-", "_")
               .replace("'", "")
               .replace("&", "")
               .toLowerCase();
} 
```

除此之外，您应该确保没有空格和区分大小写

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-08-28T20:08:49.673

自 API 22 起，`getResources().getDrawable()`已弃用（另请参阅[Android getResources().getDrawable() 弃用 API 22](https://stackoverflow.com/questions/29041027/android-getresources-getdrawable-deprecated-api-22)）。这是一种动态设置图像资源的新方法：

```
String resourceId = "@drawable/myResourceName"; // where myResourceName is the name of your resource file, minus the file extension
int imageResource = getResources().getIdentifier(resourceId, null, getPackageName());
Drawable drawable = ContextCompat.getDrawable(this, imageResource); // For API 21+, gets a drawable styled for theme of passed Context
imageview = (ImageView) findViewById(R.id.imageView);
imageview.setImageDrawable(drawable); 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-09-27T06:59:12.207

***getDrawable() 已弃用。* 现在你可以使用**

```
imageView.setImageDrawable(ContextCompat.getDrawable(this,R.drawable.msg_status_client_read)) 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-03-15T16:08:07.260

以下是在循环中在**Kotlin**`i`中执行此操作的方法：

从[rfsbraz](https://stackoverflow.com/users/514802/rfsbraz)的答案中重用的代码

```
 val uri = "@drawable/pic_top${i+1}"
    val imageResource = activity.resources.getIdentifier(uri, null, activity.packageName)

    val res = activity.getResources().getDrawable(imageResource)
    holder.view.imgDigit.setImageDrawable(res) 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-07-27T10:10:39.823

这对我来说很好。

```
final R.drawable drawableResources = new R.drawable(); 
final Class<R.drawable> c = R.drawable.class;
final Field[] fields = c.getDeclaredFields();
for (int i=0; i < fields.length;i++) 
{
     resourceId[i] = fields[i].getInt(drawableResources);  
    /* till here you get all the images into the int array resourceId.*/
}
imageview= (ImageView)findViewById(R.id.imageView);
if(your condition)
{
   imageview.setImageResource(resourceId[any]);
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-06-12T06:23:32.963

```
int[] phptr=new int[5]; 
```

将图像指针添加到数组

```
for(int lv=0;lv<3;lv++)
    {
        String id="a"+String.valueOf(lv+1);
        phptr[lv]= getResources().getIdentifier(id, "drawable", getPackageName());
    }

for(int loopvariable=0;loopvariable<3;loopvariable++) 
    {
        et[loopvariable] = findViewById(p[loopvariable]);
    }

for(int lv=0;lv<3;lv++)
    {
        et[k].setImageResource(phptr[k]);
    } 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-08-16T07:15:58.380

```
ImageView imageView=findViewById(R.id.imageView) 
```

如果您在可绘制文件夹中有图像，则使用

```
imageView.setImageResource(R.drawable.imageView) 
```

如果您有 uri 并想在 imageView 中显示它，请使用

```
imageView.setImageUri("uri") 
```

如果您有位图并想在 imageView 中显示它，请使用

```
imageView.setImageBitmap(bitmap) 
```

注意：- 1.`imageView.setImageDrawable()`现在在 java 中已弃用 2\. 如果图像 uri 来自 firebase 或任何其他在线链接，则使用

```
 Picasso.get()
    .load("uri")
    .into(imageView) 
```

（[https://github.com/square/picasso](https://github.com/square/picasso)）

或使用

```
Glide.with(context)
            .load("uri")
            .into(imageView) 
```

( [https://github.com/bumptech/glide](https://github.com/bumptech/glide) )

# javascript - 从 XML 中获取 url

> ID：11737609
> 
> 赞同：0
> 
> 时间：2012-07-31T10:01:10.993
> 
> 标签：javascript, xml, coldfusion

我正在尝试获取 xml 文件中标记中的 url。我必须在程序的进一步部分使用这个 url。任何身体都可以帮忙吗？

这段代码出现在一个coldfusion文件中，我必须在其中使用我试图在FB共享中设置url的coldfusion变量。

```
<script>

window.onload=function(){

    var r_data = ranger_descp(#rang_id#);
    <cfset rang_URL = r_data>
}

function loadXMLDoc()
{ 
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
      var xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.open("GET","../rangers/js/rangers.xml",false);
    xmlhttp.send();
    xmlDoc=xmlhttp.responseXML; 
    return xmlDoc;
}

var xmlDoc=loadXMLDoc("../rangers/js/rangers.xml");
var object = xmlDoc.getElementsByTagName("site");
var url=new Array();
var id=new Array();

function ranger_descp(rang_id){
        //alert(xmlDoc);
        for(i=0; i< object.length; i++)
        {
            id[i]=object[i].getElementsByTagName("id")[0].childNodes[0].nodeValue;      
            if(id[i] == rang_id)
            {          
                url[i]=object[i].getElementsByTagName("url")[0].childNodes[0].nodeValue;
                var r_url=url[i];
                return [r_url];        
            }            
     }
} 
```

如果其中缺少任何内容，请提出建议:)

# java - 使用 Guice 启动 @EJB 注入

> ID：11737618
> 
> 赞同：0
> 
> 时间：2012-07-31T10:01:23.100
> 
> 标签：java, ejb, jndi, guice

我目前正在开发一个 Java 多模块项目，并希望通过 DI 减少耦合。作为一个最小的例子，我有两个模块。模块 A 是我通过 Guice 进行所有注入的客户端。模块 A 调用模块 B 中的类，这些类主要是 EJB，并通过 @EJB 注释注入自己。要让模块 A 调用模块 BI 中的类，请使用 JNDI 查找。我现在尝试摆脱 JNDI 并通过 guice 将类注入模块 B 中。当我这样做时，@EJB 不再起作用。有没有办法通过guice做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:42:10.857

您所做的一切都是可能的，但仅适用于测试场景，您可以从控制台访问 EJB。真实应用程序客户端代码不应该直接访问 bean。此外，尽管您可以编写自定义注入来注入 EJB 资源，但您的 bean 在 EJB 容器（实体、资源、服务调用、拦截器、事务）之外的行为会有所不同。所以一般来说：不要在生产代码中混合使用 guice 和 ejb 注入。

# mysql - Rails - 将模型与用户关联

> ID：11737632
> 
> 赞同：1
> 
> 时间：2012-07-31T10:02:04.557
> 
> 标签：mysql, ruby-on-rails, activerecord, model, associations

我刚刚启动了一个使用 Devise 设置的 Rails 应用程序。现在，我计划添加一个新模型 Product，它将与 User 建立一对多的关系。我已经使用脚手架生成器生成了 Product 模型。然后，我添加了`belongs_to :user`产品和`has_many :products`用户。添加关联后是否应该运行迁移？我正在为我的数据库使用mysql。

现在，我不确定如何将它与当前用户关联。我正在尝试在产品控制器创建操作中设置产品的用户。类似的东西`@product.user = current_user`。但它实际上不起作用。我读过我应该设置产品的 user.id 来实现这一点，但我不确定如何做到这一点。一步一步的教程链接和详细的解释真的很有帮助。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T10:10:50.087

首先运行产品迁移，然后进行另一次迁移或只是添加

```
 t.integer :user_id 
```

在产品迁移中运行迁移然后你可以

```
 @product.user = current_user 
```

# iphone - 自定义 UITabBarItem

> ID：11737633
> 
> 赞同：0
> 
> 时间：2012-07-31T10:02:06.423
> 
> 标签：iphone, cocoa, ios5, proxy, appearance

我知道可以使用在 iOS 5 中自定义 UITabBarItem

```
[[UITabBar appearance] setSelectionIndicatorImage:[UIImage imageNamed:@"tabbar_sel"]]; 
```

tabbar_sel 图像的宽度为 120px (640px/5)。对于横向模式，我需要将其更改为 190x 宽度的图像。

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
if(toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft || toInterfaceOrientation == UIInterfaceOrientationLandscapeRight) {
    NSLog(@"landscape.");
    [[UITabBar appearance] setSelectionIndicatorImage:[UIImage imageNamed:@"tabbar_sel_l"]];
    } else {
    NSLog(@"normal.");
    [[UITabBar appearance] setSelectionIndicatorImage:[UIImage imageNamed:@"tabbar_sel"]];
    }
} 
```

但是，这不起作用，无论是在委托类中还是在 ViewController 中。我也已经尝试过了，但这会导致崩溃。

```
[[UITabBar appearance] setSelectionIndicatorImage:[UIImage imageNamed:@"tabbar_sel"] 
forBarMetrics:UIBarMetricsDefault];
[[UITabBar appearance] setSelectionIndicatorImage:[UIImage imageNamed:@"tabbar_sel_l"] forBarMetrics:UIBarMetricsLandscapePhone]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:19:50.367

willRotateToInterfaceOrientation: 将在视图加载时调用，以检查它应该自动旋转的方向，但它不会在每次尝试旋转时询问这个。您可以观察方向何时改变，如下所示：

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(orientationChange:) name:UIDeviceOrientationDidChangeNotification object:nil];

- (void) orientationChange: (NSNotification *) notification {
  UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation];
  if (orientation == UIDeviceOrientationPortrait) {
     NSLog(@"portrait");
  }else if(orientation == UIDeviceOrientationLandscapeLeft || orientation == UIDeviceOrientationLandscapeRight){
     NSLog(@"landscape");
  }
} 
```

# javascript - 几年前的javascript时间戳并考虑闰年

> ID：11737642
> 
> 赞同：2
> 
> 时间：2012-07-31T10:02:30.050
> 
> 标签：javascript, datetime, date, timestamp

我将用户的出生日期存储在时间戳中。我用javascript计算时间戳。

```
day = $("#birthday-day").val();
year = $("#birthday-year").val();
month = $("#birthday-month").val()-1;     
date = new Date(Date.UTC(year, month, day));
birthdateTimestamp = Math.round(date.getTime() / 1000); 
```

在搜索页面中，我只有年龄字段。取决于这个字段，我需要显示与这个年龄相匹配的用户。我从年龄字段值时间戳计算，所以我可以在数据库中使用它作为条件。

```
now = new Date();
age = $("#age").val();
date = new Date(Date.UTC(now.getFullYear()-age));
timestampYearsAgo = date.getTime()/1000; 
```

**我的问题：** 这些方法闰年是否安全，或者我是否会因为闰年而有任何问题？我很确定第一部分没问题（如果不是请纠正我），但是对于第二部分，当我根据年龄计算时间戳时，我不确定如何考虑闰年。有人知道吗？

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:47:26.153

您在第二个示例中创建的日期对应于给定年份的 1/1（因为您只提供年、日和月默认为 0）。这可能不是你想要的。

如果您想要今天特定年龄的人，您应该创建一个与今天相对应的日期，然后减去年份，例如：

```
var lowDate = new Date;
lowDate.setFullYear(lowDate.getFullYear() - age));
lowTimestamp = lowDate.getTime()
var highDate = new Date;
highDate .setFullYear(highDate .getFullYear() - age + 1));
highTimestamp = highDate.getTime() 
```

如果生日时间戳介于 lowTimestamp 和 highTimestamp 之间，则年龄是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:50:16.547

没关系， Date 对象将为您考虑闰年，但不考虑闰秒 :)

如果您经常玩日期，您可能想查看[http://tempus-js.com/](http://tempus-js.com/)之类的内容，其中包含诸如 isLeapYear() 之类的 api 方法。

# javascript - 如何使用 JavaScript 允许标签上的特定属性？

> ID：11737645
> 
> 赞同：0
> 
> 时间：2012-07-31T10:02:34.060
> 
> 标签：javascript, regex, attributes

我有一个字符串，例如：`<div style='text-align:center;' otherattr="script">`

我想允许特定的属性，例如只允许样式属性。

它应该返回：`<div style='text-align:center;'>`

我想允许属性样式、href、src 和对齐。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:14:11.537

正如有人在评论中所说，最好的方法是将字符串解析为元素并在其上使用 DOM 方法。REGEX 通常对于 DOM 处理来说是个坏主意。

这将允许`id`属性但删除任何其他属性。

```
 //prep
    var str = "<div id='something' class='something_else'></div>",
    allowed_attrs = ['id'],
    tmp_container = document.createElement('div'),;

    //parse string as element and retrieve it as one
    tmp_container.innerHTML = str;
    var div = tmp_container.querySelector('div');

    //remove any non-allowed attributes
    for (var i=0; i<div.attributes.length; i++)
        if (allowed_attrs.indexOf(div.attributes[i].name) == -1)
            div.removeAttribute(div.attributes[i].name);

    //check
    alert(tmp_container.innerHTML); //<div id='something'></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:28:17.003

你可以使用jquery

```
var tmp = $('<div style="text-align:center;" otherattr="script">');
var elem = $('<div>');
elem.attr('style', tmp.attr('style'))
elem.attr('href', tmp.attr('href'))
elem.attr('src', tmp.attr('src'))
elem.attr('align', tmp.attr('align')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:40:34.690

此正则表达式将仅匹配您指定的属性，然后您可以将匹配项复制并粘贴到新标签中以替换您开始的那个

```
(style|href|src|align)=((".+?[^\\]")|('.+?[^\\]')) 
```

# javascript - 如何使 JQuery 模态关闭按钮更大

> ID：11737646
> 
> 赞同：2
> 
> 时间：2012-07-31T10:02:38.187
> 
> 标签：javascript, jquery, css, jquery-ui

任何人都知道使 jquery-ui 模态“关闭”（X）按钮更大的巧妙方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T10:05:14.460

如果您查看模态的渲染 html，您可以看到附加到模态对话框元素的类。您可以使用自己的 CSS 覆盖 jquery CSS 以定位按钮并应用您自己的自定义样式。

如果您需要更多帮助，您可以从模态框发布渲染的 html 并从那里开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-26T20:02:53.750

修改元素css：

```
.ui-dialog-titlebar-close { 
    width: 32px !important; 
    height: 32px !important; 
} 
```

# c# - 尝试在 x64 系统中注册我的 C# x86 dll 时，RegAsm 返回错误

> ID：11737651
> 
> 赞同：0
> 
> 时间：2012-07-31T10:02:56.190
> 
> 标签：c#, visual-studio-2008, c++-cli, x86-64, regasm

我一直在努力解决这个问题，但找不到任何解决方案。

我有 2 个 VS2008 项目，一个是 C#，另一个是 C++/CLI。

C++/CLI 项目是 Win32 并加载一些外部库。我已经成功地使用 regasm 注册了这个 dll，没有任何问题。

C# 项目配置为 x86 并引用 C++ 项目。

问题是注册我的 C# dll 时，regasm 工具有些不稳定；它要么崩溃，要么显示一个很难理解的错误：

```
D:\FikusWorks\Source\bin>regasm /tlb SwFCamTree.dll 

Microsoft (R) .NET Framework Assembly Registration Utility 2.0.50727.4927 Copyright (C) Microsoft Corporation 1998-2004\.  All rights reserved.

RegAsm : error RA0000 : An error occurred inside the user defined Register/Unregister functions: 

System.TypeInitializationException: The type initializer for 'SwFCamTree.SwAddin' threw an exception. 
---> System.TypeInitializationException: The type initializer for '<Module>' threw an exception. 
---> System.Runtime.InteropServices.SEHException: External component has thrown an exception.     
at <CrtImplementationDetails>.ThrowModuleLoadException(String , Exception )     
at <CrtImplementationDetails>.LanguageSupport.Initialize(LanguageSupport* ) in f:\dd\vctools\crt_bld\self_x86\crt\src\mstartup.cpp:line 864     
at .cctor() in f:\dd\vctools\crt_bld\self_x86\crt\src\mstartup.cpp:line 901    

--- End of inner exception stack trace ---     
at SwFCamTree.SwAddin..cctor()    
--- End of inner exception stack trace 
at SwFCamTree.SwAddin.RegisterFunction(Type t) 
```

如果我打开依赖于 C# 生成的 dll，它只显示与 MSCOREE.dll 的依赖关系并且它是 64 位 dll，这可能是导致问题的原因，但我不知道如何加载 32 位版本的 MSCOREE.dll。

非常感谢！

# c++ - 对象没有命名类型错误

> ID：11737656
> 
> 赞同：-3
> 
> 时间：2012-07-31T10:03:08.207
> 
> 标签：c++, class, object

我收到此错误

当试图为类玩家制作一个对象时......

> main.cpp|24|error: 'pic' 没有命名类型

这是代码

这是我的播放器.h

```
#ifndef PLAYER_H_INCLUDED
#define PLAYER_H_INCLUDED

#include <allegro.h>
#include <iostream>

class player
{

public:
int upperraw;
int middlerraw;
int lowerraw;
int firstcolumn;
int seccolumn;
int thirdcolumn;
};

   #endif // PLAYER_H_INCLUDED 
```

我的 main.cpp

```
#include "bitmap.h"
#include "player.h"
#include <allegro.h>
#include <iostream>

int onbitmap=1;
bool turn=true;

BITMAP *my_pic1;
BITMAP *my_pic2;
BITMAP *my_pic3;
BITMAP *my_pic4;
BITMAP *my_pic5;
BITMAP *my_pic6;
BITMAP *my_pic7;
BITMAP *my_pic8;
BITMAP *my_pic9;

player *pic;

pic->upperrow=0;

player *one;
player *two;

static void nextturn()
{
if(turn==1)
{
    turn=0;
}
else
{
    turn=1;
}
}
static void drawsquares()
{
 my_pic1 = NULL;
my_pic1 = load_bitmap("selected.bmp", NULL);
my_pic2 = NULL;
my_pic2 = load_bitmap("unselected.bmp", NULL);
my_pic3 = NULL;
my_pic3 = load_bitmap("unselected.bmp", NULL);
my_pic4 = NULL;
my_pic4 = load_bitmap("unselected.bmp", NULL);
my_pic5 = NULL;
my_pic5 = load_bitmap("unselected.bmp", NULL);
my_pic6 = NULL;
my_pic6 = load_bitmap("unselected.bmp", NULL);
my_pic7 = NULL;
my_pic7 = load_bitmap("unselected.bmp", NULL);
my_pic8 = NULL;
my_pic8 = load_bitmap("unselected.bmp", NULL);
    my_pic9 = NULL;
my_pic9 = load_bitmap("unselected.bmp", NULL);

draw_sprite(screen, my_pic1, 218,146+65*1);
draw_sprite(screen, my_pic2, 218,146+65*2);
draw_sprite(screen, my_pic3, 218,146+65*3);
draw_sprite(screen, my_pic4, 218+65,146+65*1);
draw_sprite(screen, my_pic5, 218+65,146+65*2);
draw_sprite(screen, my_pic6, 218+65,146+65*3);
draw_sprite(screen, my_pic4, 218+65,146+65*1);
draw_sprite(screen, my_pic5, 218+65,146+65*2);
draw_sprite(screen, my_pic6, 218+65,146+65*3);
draw_sprite(screen, my_pic7, 218+(65*2),146+65*1);
draw_sprite(screen, my_pic8, 218+(65*2),146+65*2);
draw_sprite(screen, my_pic9, 218+(65*2),146+65*3);
}

    static void replacebitmap(BITMAP *one,BITMAP *two)
{
}

static void readakey()
{
int val=readkey();
switch (val  >> 8)
{

case KEY_LEFT:
{

  switch (onbitmap)
{

    case 1:
    break;
    case 2:
    break;
    case 3:
    break;
    case 4:
    onbitmap=1;

         my_pic4 = load_bitmap("unselected.bmp", NULL);
    draw_sprite(screen, my_pic4, 218,146+65*1);

    my_pic1 = load_bitmap("selected.bmp", NULL);
    draw_sprite(screen, my_pic1, 218,146+65*1);
    clear_keybuf();
   readakey();
   case 5:
     onbitmap=5;

    my_pic5 = load_bitmap("unselected.bmp", NULL);
    draw_sprite(screen, my_pic1, 218,146+65*1);

    my_pic2 = load_bitmap("selected.bmp", NULL);
    draw_sprite(screen, my_pic1, 218,146+65*1);
    clear_keybuf();
   readakey();

   case 6:

         onbitmap=6;

    my_pic5 = load_bitmap("unselected.bmp", NULL);
    draw_sprite(screen, my_pic1, 218,146+65*1);

    my_pic2 = load_bitmap("selected.bmp", NULL);
    draw_sprite(screen, my_pic1, 218,146+65*1);
    clear_keybuf();
   readakey();

     case 7:

         onbitmap=7;

    my_pic7 = load_bitmap("unselected.bmp", NULL);
    draw_sprite(screen, my_pic7, 218,146+65*1);

    my_pic4 = load_bitmap("selected.bmp", NULL);
    draw_sprite(screen, my_pic4, 218,146+65*1);
    clear_keybuf();
   readakey();

            case 8:

         onbitmap=8;

    my_pic8 = load_bitmap("unselected.bmp", NULL);
    draw_sprite(screen, my_pic8, 218,146+65*1);

    my_pic5 = load_bitmap("selected.bmp", NULL);
    draw_sprite(screen, my_pic5, 218,146+65*1);
    clear_keybuf();
   readakey();
}
}
}
}

int main(int argc, char *argv[])
{
allegro_init();
install_keyboard();
set_color_depth(32);
set_gfx_mode(GFX_AUTODETECT, 640,480,0,0);
BITMAP *my_pic = NULL;
my_pic = load_bitmap("background.bmp", NULL);
draw_sprite(screen, my_pic, 0,0);

destroy_bitmap(my_pic);
drawsquares();

readakey();
}
END_OF_MAIN() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T10:09:53.707

您不能在函数之外执行此操作：

```
pic->upperrow=0; 
```

您可以声明（并初始化全局变量），但仅此而已。

# core-animation - 如何在 iOS 应用程序中链接不同的 CAAnimation

> ID：11737658
> 
> 赞同：22
> 
> 时间：2012-07-31T10:03:11.043
> 
> 标签：core-animation, caanimation, cabasicanimation

我需要链接动画、CABasicAnimation 或 CAAnimationGroup 但我不知道该怎么做，我唯一要做的就是所有动画同时针对同一层执行。

我怎么能做到？

例如，其内容设置为汽车图像的图层：

第一：向右移动X点

第二：向左旋转 90ª

第三：移动X点

第四：缩放图层

所有这些动画都必须以安全的方式执行，但我做不到：S

顺便说一句：我不是英语，如果我在语法上犯了一些错误，对不起：D

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-31T20:42:23.043

大卫建议的工作很好，但我会推荐一种不同的方式。

如果你所有的动画都在同一层，你可以创建一个动画组，并让每个动画有一个不同的`beginTime`，其中第一个动画从`beginTime`0 开始，每个新动画在之前动画的总持续时间之后开始。

但是，如果您的动画位于不同的图层上，则不能使用动画组（动画组中的所有动画都必须作用于同一图层。）在这种情况下，您需要提交单独的动画，每个动画都有`beginTime`一个从 偏移`CACurrentMediaTime()`，例如：

```
CGFloat totalDuration = 0;
CABasicAnimation *animationOne = [CABasicAnimation animationWithKeyPath: @"alpha"];
animationOne.beginTime = CACurrentMediaTime(); //Start instantly.
animationOne.duration = animationOneDuration;
...
//add animation to layer

totalDuration += animationOneDuration;

CABasicAnimation *animationTwo = [CABasicAnimation animationWithKeyPath: @"position"];
animationTwo.beginTime = CACurrentMediaTime() + totalDuration; //Start after animation one.
animationTwo.duration = animationTwoDuration;
...
//add animation to layer

totalDuration += animationTwoDuration;

CABasicAnimation *animationThree = [CABasicAnimation animationWithKeyPath: @"position"];
animationThree.beginTime = CACurrentMediaTime() + totalDuration; //Start after animation three.
animationThree.duration = animationThreeDuration;
...
//add animation to layer

totalDuration += animationThreeDuration; 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-07-31T11:09:20.800

**tl; dr：**您需要在之前的完成后手动添加每个动画。

* * *

没有内置的方式来添加顺序动画。您*可以*将每个动画的延迟设置为所有先前动画的总和，但我不建议这样做。

相反，我会创建所有动画，并按照它们应该运行的顺序将它们添加到可变数组（使用数组作为队列）。然后通过将自己设置为所有动画的动画委托，您可以在`animationDidStop:finished:`动画完成时获得回调。

在该方法中，您将从数组中删除第一个动画（即下一个动画）并将其添加到图层中。由于您是委托人，您将在该动画完成时获得第二个动画，在这种情况下，`animationDidStop:finished:`回调将再次运行，并且下一个动画将从可变数组中删除并添加到图层中。

一旦动画数组为空，所有动画都将运行。

* * *

一些示例代码可以帮助您入门。首先，您设置所有动画：

```
CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"backgroundColor"];
[animation setToValue:(id)[[UIColor redColor] CGColor]];
[animation setDuration:1.5];
[animation setDelegate:self];
[animation setValue:[view layer] forKey:@"layerToApplyAnimationTo"];

// Configure other animations the same way ...

[self setSequenceOfAnimations:[NSMutableArray arrayWithArray: @[ animation, animation1, animation2, animation3, animation4, animation5 ] ]];

// Start the chain of animations by adding the "next" (the first) animation
[self applyNextAnimation]; 
```

然后在委托回调中，您只需再次应用下一个动画

```
- (void)animationDidStop:(CAAnimation *)animation finished:(BOOL)finished {
    [self applyNextAnimation];
}

- (void)applyNextAnimation {
     // Finish when there are no more animations to run
    if ([[self sequenceOfAnimations] count] == 0) return;

    // Get the next animation and remove it from the "queue"
    CAPropertyAnimation * nextAnimation = [[self sequenceOfAnimations] objectAtIndex:0];
    [[self sequenceOfAnimations] removeObjectAtIndex:0];

    // Get the layer and apply the animation
    CALayer *layerToAnimate = [nextAnimation valueForKey:@"layerToApplyAnimationTo"];
    [layerToAnimate addAnimation:nextAnimation forKey:nil];
} 
```

我正在使用自定义键`layerToApplyAnimationTo`，以便每个动画都知道它的图层（它仅通过`setValue:forKey:`and起作用`valueForKey:`）。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-03-22T23:04:30.823

这是 Swift 中的一个解决方案：

```
var animations = [CABasicAnimation]()

var animation1 = CABasicAnimation(keyPath: "key_path_1")
// animation set up here, I've included a few properties as an example
animation1.duration = 1.0
animation1.fromValue = 1
animation1.toValue = 0
animations.append(animation1)

var animation2 = CABasicAnimation(keyPath: "key_path_2")
animation2.duration = 1.0
animation2.fromValue = 1
animation2.toValue = 0
// setting beginTime is the key to chaining these
animation2.beginTime = 1.0
animations.append(animation2)

let group = CAAnimationGroup()
group.duration = 2.0
group.repeatCount = FLT_MAX
group.timingFunction = CAMediaTimingFunction(name: kCAMediaTimingFunctionEaseInEaseOut)
group.animations = animations

yourLayer.addAnimation(group, forKey: nil) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-06T14:52:20.443

David 的方法或 beginTime 属性都可以用于链接动画。请参阅[http://wangling.me/2011/06/time-warp-in-animation.html](http://wangling.me/2011/06/time-warp-in-animation.html) - 它阐明了**beginTime**和其他**CAMediaTiming**协议属性的使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-01T08:44:42.530

使用 KVC。每个动画的 Key 的 setValue。之后在 animationDidStop 中，您可以定义哪些动画已停止并在链中下一个运行。

```
- (void)moveXrightAnimation {
    CABasicAnimation* theAnimation = ...
    [theAnimation setValue:@"movexright" forKey:@"animationID"];
//animation
}

- (void)rotate90leftAnimation {
    CABasicAnimation* theAnimation = ...
    [theAnimation setValue:@"rotate90left" forKey:@"animationID"];
//animation
}

- (void)moveXpointAnimation {
    CABasicAnimation* theAnimation = ...
    [theAnimation setValue:@"movexpoint" forKey:@"animationID"];
//animation
}

- (void)scaleAnimation {
    CABasicAnimation* theAnimation = ...
    [theAnimation setValue:@"scale" forKey:@"animationID"];
//animation
}

#pragma mark - CAAnimationDelegate

- (void)animationDidStop:(CAAnimation *)anim finished:(BOOL)flag {

    if([[anim valueForKey:@"animationID"] isEqual:@"movexright"]) {
        [self rotate90leftAnimation];
    }
    if([[anim valueForKey:@"animationID"] isEqual:@"rotate90left"]) {
        [self moveXpointAnimation];
    }
    if([[anim valueForKey:@"animationID"] isEqual:@"movexpoint"]) {
        [self scaleAnimation];
    }
}
```

# android - 如何在 Android 3.0+ 版本中裁剪相机图像以进行纵向视图？

> ID：11737659
> 
> 赞同：2
> 
> 时间：2012-07-31T10:03:12.587
> 
> 标签：android, image-processing

我已使用此[链接](https://github.com/lorensiuswlt/AndroidImageCrop)裁剪图像。它适用于 Android 2.3.3 和更早版本。我在将此源代码用于 Android 3.0+ 时遇到了问题。

问题是如果我从画廊拍摄照片，它会正常裁剪。但是，如果我在设备上拍照，则会收到 Toast 消息*“无法裁剪图像”*。我正在三星 GALAXY S II 上进行测试。我在方向更改时遇到问题.. 此代码适用于横向但我在纵向视图中遇到问题。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-01T05:14:46.597

我已经得到了改变方向的问题的答案。这是通过`android:configChanges="orientation"` 在清单文件中使用来解决的

# javascript - 更改下拉问题的内容

> ID：11737660
> 
> 赞同：0
> 
> 时间：2012-07-31T10:03:18.687
> 
> 标签：javascript, drop-down-menu

我想要一个下拉菜单，如果我选择`value1`我会得到几个输入字段，如果我选择`value2`我会得到一些其他输入字段。所以我在网上找到了这段代码，我正在尝试根据我的需要进行调整。不幸的是，它不起作用，表格总是显示。如果我不使用表格（只是纯文本），则代码有效。

**Javascript**

```
<script type='text/javascript' src='http://jsfiddle.net/js/lib/mootools-core-1.4.5-nocompat.js'></script>
<script type='text/javascript'> 

function showForm(id) {
    document.getElementById('submitForm').style.display = "block";
    if (id == 0) {
        document.getElementById('submitForm').style.display = "none";
    }
    for (var i = 1; i < 4; i++) {
        if (i == id) {
            document.getElementById(i).style.display = 'block';
        } else {
            document.getElementById(i).style.display = 'none';
        }
    }
}
</script> 
```

**HTML**

```
<table>
        <tr>
            <td>Selecteer uw materiaal: </td>
            <td>
            <select id="dropdownMenu" name="dropdownMenu" onchange="javascript: showForm(document.getElementById('dropdownMenu').value);">
                <option value="0">Choose an option</option>
                <option value="1">Option 1</option>
                <option value="2">Option 2</option>
                <option value="3">Other</option>
            </select></td>
        </tr>
    <div id="1" style="display: none;">
    <tr>
        <td>Aantal videobanden: </td>
        <td><input type="text" name="aantalVideo" value="" /></td>
    </tr>
    <tr>
        <td>Geschatte speelduur (in minuten): </td>
        <td><input type="text" name="duurVideo" value="" /></td>
    </tr>
    </div><!-- /1 -->
    <div id="2" style="display: none;">
    <tr>
        <td>Aantal spoelen: </td>
        <td><input type="text" name="aantalSpoelen" value="" /></td>
    </tr>
    <tr>
        <td>Geschatte speelduur (in minuten): </td>
        <td><input type="text" name="duurSpoelen" value="" /></td>
    </tr>       
    </div><!-- /2 -->
    <div id="3" style="display: none;">
    <tr>
        <td>&nbsp;</td>
        <td>Overig</td>
    </tr>
    </div><!-- /3 -->
    <div id="submitForm" style="display: none;">
    <tr>
        <td>&nbsp;</td>
        <td><input value=" Order aanmaken " type="submit"></td>
    </tr>
    </div><!-- /submitForm -->
    </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:20:07.963

为什么不将这些 id 提供给 tr 元素而不是创建 div。我尝试改变一些页面结构。有效。我将赋予 div 元素的 id 分配给其中的 tr 元素，并且它起作用了。

# c++ - fseeko，fseeko64；ftello, ftello64 Visual C 等价物

> ID：11737661
> 
> 赞同：3
> 
> 时间：2012-07-31T10:03:21.683
> 
> 标签：c++, c, visual-c++, unix

有人可以告诉我 fseeko 的 Visual C 等价物是什么，fseeko64；ftello，ftello64？

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T10:14:23.323

没有返回/使用 off_t 的函数，如果您需要 64 位位置，您可以使用：_fseeki64 _ftelli64

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T10:13:27.923

看这里[fseek](http://msdn.microsoft.com/en-us/library/75yw9bf3%28v=vs.71%29.aspx)、[_fseeki64](http://msdn.microsoft.com/en-us/library/75yw9bf3.aspx)、[ftell](http://msdn.microsoft.com/en-us/library/0ys3hc0b%28v=VS.71%29.aspx)和[_ftelli64](http://msdn.microsoft.com/en-us/library/0ys3hc0b.aspx)

# c# - 在 int[] 对象中存储不同数量的值

> ID：11737664
> 
> 赞同：0
> 
> 时间：2012-07-31T10:03:24.333
> 
> 标签：c#, asp.net, arrays

我需要在一个数组中存储不同数量的值，具体取决于从我的控件 ( )`int[]`中选择了多少项目。`CheckboxList``cblSections`

目前我将这些值存储在一个 中`ArrayList`，然后确定这个对象的长度，并根据它设置我的`int[]`对象的大小。

有没有更好的方法来做到这一点，它涉及更少的代码（和更少的对象！）？

```
ArrayList alSectionId = new ArrayList();
foreach (ListItem item in cblSections.Items) {
    if (item.Selected) {
        alSectionId.Add(item.Value);
    }
}

int[] sectionId = new int[(alSectionId.Count - 1) + 1];

if (alSectionId.Count > 0) {
    int i = 0;
    foreach (int sId in alSectionId) {
        sectionId[i] = sId;
        i += 1;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T10:05:04.350

你可以使用：

```
int numSelected = cblSections.Items.Count(x => x.Selected); 
```

您还可以立即生成您的数组：

```
int[] sectionId = cblSections.Items
    .Where(x => x.Selected)
    .Select(x => x.Value)
    .ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T10:08:46.657

您应该改用该`List`对象。然后，一旦您填充了它，您就可以将其直接转换为`int[]`使用该`ToArray()`函数：

```
List<int> items = new List<int>();
items.ToArray(); 
```

注意：虽然这个`ArrayList`类似乎也有一个`ToArray()`功能，但最好还是使用`List`......为什么？我不知道，这是我听过很多次的事情之一，我只是认为这是理所当然的，忘记了最初的原因：/

# c# - 在具有透明背景的画布上获取鼠标位置

> ID：11737665
> 
> 赞同：2
> 
> 时间：2012-07-31T10:03:39.467
> 
> 标签：c#, .net, wpf, canvas

我正在构建一个简单的`WPF`应用程序。我有一个*透明的最大化* `Window`和一个`Canvas`（canvas1）。

**我想将鼠标位置**移入`canvas1`或移入`MainWindow`（在这种情况下是同一件事）。

为此，我使用以下代码：

```
Point p = Mouse.GetPosition(canvas1); //and then I have p.X and p.Y 
```

此代码适用于**不透明的** `Canvas`. 问题是我有一个**透明** `Canvas`的，这段代码不起作用......（它没有给我错误，但坐标是`p.X = 0`和`p.Y = 0`）。

**我该如何解决这个问题？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T10:53:09.090

一种可能的解决方法是使用`GetCursorPos`Win32 函数：

```
 [DllImport("user32.dll")]
    [return: MarshalAs(UnmanagedType.Bool)]
    static extern bool GetCursorPos(out System.Drawing.Point lpPoint); 
```

如果要在 WPF 中使用坐标，则必须将坐标从像素转换为点。

使用示例：

```
System.Drawing.Point point;
if(!GetCursorPos(out point))
    throw new InvalidOperationException("GetCursorPos failed");
// point contains cursor's position in screen coordinates. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T10:44:56.503

C＃

```
 using System.Windows;
    using System.Windows.Input;
    using System.Diagnostics;
    using System.Runtime.InteropServices;
    using System;
    using System.Windows.Threading;
    namespace Test
    {
        public partial class MainWindow : Window
        {
            [DllImport("user32.dll")]
            [return: MarshalAs(UnmanagedType.Bool)]
            internal static extern bool GetCursorPos(ref Win32Point pt);

            [StructLayout(LayoutKind.Sequential)]
            internal struct Win32Point
            {
                public Int32 X;
                public Int32 Y;
            };
            public static Point GetMousePosition()
            {
                Win32Point w32Mouse = new Win32Point();
                GetCursorPos(ref w32Mouse);
                return new Point(w32Mouse.X, w32Mouse.Y);
            }

            private double screenWidth;
            private double screenHeight;

            public MainWindow()
            {
                InitializeComponent();
            }

            private void Window_Loaded(object sender, RoutedEventArgs e)
            {
                screenWidth = System.Windows.SystemParameters.PrimaryScreenWidth;
                screenHeight = System.Windows.SystemParameters.PrimaryScreenHeight;

                this.Width = screenWidth;
                this.Height = screenHeight;
                this.Top = 0;
                this.Left = 0;
                DispatcherTimer timer = new DispatcherTimer();
                timer.Tick += new EventHandler(timer_Tick);
                timer.Start();
            }

            void timer_Tick(object sender, EventArgs e)
            {
                var mouseLocation = GetMousePosition();
                elipse1.Margin = new Thickness(mouseLocation.X, mouseLocation.Y, screenWidth - mouseLocation.X - elipse1.Width, screenHeight - mouseLocation.Y- elipse1.Height);
            }
        }
    } 
```

XAML

```
 <Window x:Class="Test.MainWindow"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            Title="MainWindow" 
            Height="350" Width="525" 
            WindowStyle="None" 
            Topmost="True" 
            AllowsTransparency="True" 
            Background="Transparent"
            ShowInTaskbar="False"
            Loaded="Window_Loaded">
        <Grid>
                <Ellipse Width="20" Height="20" Fill="Red" Name="elipse1"/>
        </Grid>
    </Window> 
```

解决了！但迟到了:(

# javascript - 插件编程nodeJs

> ID：11737670
> 
> 赞同：0
> 
> 时间：2012-07-31T10:04:03.373
> 
> 标签：javascript, node.js, plugins, error-handling, try-catch

我正在使用nodeJs（net，express，socketIo）开发一种多用途服务器。多用途意味着它接收数据，稍后我将在自定义插件中处理这些数据，该插件也是用 nodejs 编写的。在服务器启动时，会加载一个配置，告诉应用程序应该使用 require 加载哪些额外的 js 文件。所有插件都包含一个返回对象的创建函数。该对象被推入一个数组以供参考。

```
 self.config.plugins.forEach(function(plugin){             
        var plugin = require(Path.join(pluginDir,plugin.name, index.js" )).create(self);                    
        self.apps.push(plugin);             
  }); 
```

插件必须从一个特殊的基类继承并遵循一个特殊的模式（我想使用类似 c# 风格的接口，但还没有找到解决方案）。

现在我的问题：

如果我的任何插件出现错误，整个应用程序都会崩溃。如何在不将每个插件方法放入 try/catch 语句的情况下实现错误处理？

我希望有人能理解我的问题，并能指导我正确的方向

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:35:56.710

您可以使用进程 uncaughtException 事件：[http](http://nodejs.org/api/process.html#process_event_uncaughtexception) ://nodejs.org/api/process.html#process_event_uncaughtexception ，但建议使用 try/catch 语句并在出现不希望的情况时抛出错误，这些 try/catch 语句应该放在你使用模块内容的地方。

# cakephp-2.1 - 选择深度级别为 2 时显示的字段

> ID：11737674
> 
> 赞同：0
> 
> 时间：2012-07-31T10:04:40.227
> 
> 标签：cakephp-2.1

在 CakePHP 中，我准备了一个 Json 网络服务。这是我得到的摘录：

```
{
   Offices:[
      {
         Office:{
            id:"1",
            Company:{
               id:"1",
               name:"ABC Software"
            }
         },
         Person:{
            mail:"sASa@sAAsS.it",
            OfficePersonTask:[
               {
                  office_id:"1",
                  person_id:"1",
                  task_id:"1"
               }
            ]
         }
      }
   ]
} 
```

我想要的是只显示相关数据库中的一些字段的可能性，所以查询数据库的方法有`$options['fields']`正确的设置，所以如果我想显示一个人的邮件，我写：

```
$options['fields'] = array("Person.mail"); 
```

但是如果我想显示更深一层的公司ID或公司名称怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T05:42:59.963

如果模型之间存在关联，您应该能够做到这一点：

```
$options['fields'] = array('Person.mail','Company.id','Company.name'); 
```

实际上，“公司更深一层”并不重要。这在 SELECT 子句中是正确的，例如：（请注意，SQL 入门是一个示例）

```
SELECT Person.mail, Company.id, Company.name 
FROM Persons AS p
LEFT JOIN Company AS c ON p.company_id = c.id 
```

# php - htmlspecialchars_decode() 不适用于空格

> ID：11737675
> 
> 赞同：4
> 
> 时间：2012-07-31T10:04:41.323
> 
> 标签：php, decode

我正在尝试使用 htmlspecialchars_decode() 但它不解码`&nbsp;`为空格。这个问题有什么解决方案吗？

我的代码：

```
$query = mysql_query("select * from nowosci order by id desc limit 0,3");
while($rekord = mysql_fetch_array($query))
{
$tekst .= '<h1 class="body"><div class="date" style="display:inline; color:grey; margin-right:5px;">'.$rekord[3].'</div>'.html_entity_decode($rekord[1]).'</h1><div class="main">'.html_entity_decode($rekord[2]).'</div>';
}
echo $tekst 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T10:07:47.733

改为使用`html_entity_decode()`。

`htmlspecialchars_decode()`只解码`&amp; &quot; (when ENT_NOQUOTES is not set), &#039; (when ENT_QUOTES is set), &lt; and &gt;.`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T10:11:40.903

`htmlspecialchars_decode()`解码`htmlspecialchars`，它不应该解码`&nbsp;`，因为这不属于`htmlspecialchars`. 您可以查看[htmlspecialchars list](http://www.utexas.edu/learn/html/spchar.html)。

你可以`html_entity_decode();`改用。

# actionscript-3 - 可以检测到 addEventListener 然后删除它吗？

> ID：11737679
> 
> 赞同：1
> 
> 时间：2012-07-31T10:04:58.110
> 
> 标签：actionscript-3, flash, event-listener

我想这样做：

```
if (rightBtn.addEventListener(MouseEvent.CLICK,goRight4))
{
rightBtn.removeEventListener(MouseEvent.CLICK,goRight4);
trace("YES")
}
else{trace("NO")} 
```

上面是我写给按钮的代码。

我添加了 eventListener 但结果仍然没有。

任何想法或正确的方法来做到这一点？

如果**rightBtn**有多个事件，如 MOUSE_OVER、MOUSE_OUT 怎么办？我可以只用 1 个命令将它们全部删除吗？

```
rightBtn.addEventListener(MouseEvent.CLICK,goRight4)
rightBtn.addEventListener(MouseEvent.MOUSE_OVER,goRightOver)
rightBtn.addEventListener(MouseEvent.MOUSE_OUT,goRightOut)

if (rightBtn.addEventListener(MouseEvent.CLICK,goRight4))
{
rightBtn.removeEventListener(MouseEvent.CLICK,goRight4);
rightBtn.removeEventListener(MouseEvent.MOUSE_OVER,goRightOver);
rightBtn.removeEventListener(MouseEvent.MOUSE_OUT,goRightOut);
trace("YES")
}
else{
trace("NO")
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T10:23:58.333

你的代码是错误的。根据 AS3 语言参考，`addEventListener()`返回 void。`hasEventListener()`如果要检查侦听器是否已附加到您的实例，则必须使用。

```
if (rightBtn.hasEventListener(MouseEvent.CLICK)) {
    rightBtn.removeEventListener(MouseEvent.CLICK, goRight4);
    trace("YES");
} else {
    trace("NO");
} 
```

但是删除事件侦听器的最佳方法是在不知道它是否已附加到您的实例的情况下将其删除！

```
// Will not throw any error even if no listener was attached.
rightBtn.removeEventListener(MouseEvent.CLICK, goRight4); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T10:26:41.030

您可以使用 来检查对象是否添加了事件侦听器`hasEventListener()`，如下所示：

```
if(rightBtn.hasEventListener(MouseEvent.CLICK))
{
    rightBtn.removeEventListener(MouseEvent.CLICK, goRight4);
    trace("YES");
}
else
{
    trace("NO");
} 
```

您会注意到该`hasEventListener`函数只有一个参数，即事件。不过，在大多数情况下，这是可以的，因为您可能不会为一个事件设置多个侦听器函数。

# git - 每个文件的 Git 贡献者

> ID：11737681
> 
> 赞同：8
> 
> 时间：2012-07-31T10:05:01.323
> 
> 标签：git, sh

我想列出存储库中每个文件的每个贡献者。

这是我目前所做的：

```
find . | xargs -L 1 git blame -f | cut -d' ' -f 2-4 | sort | uniq 
```

这是非常缓慢的。有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T12:59:42.950

以ДМИТРИЙ的回答为基础，我会说以下内容：

```
git ls-tree -r --name-only master ./ | while read file ; do
    echo "=== $file"
    git log --follow --pretty=format:%an -- $file | sort | uniq
done 
```

增强功能是它在其历史记录中遵循文件的重命名，并且如果文件包含空格 ( `| while read file`)则行为正确

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-31T10:58:23.230

我会写一个分析输出的小脚本`git log --stat --pretty=format:'%cN'`；类似于：

```
#!/usr/bin/env perl

my %file;
my $contributor = q();

while (<>) {
    chomp;
    if (/^\S/) {
        $contributor = $_;
    }
    elsif (/^\s*(.*?)\s*\|\s*\d+\s*[+-]+/) {
        $file{$1}{$contributor} = 1;
    }
}

for my $filename (sort keys %file) {
    print "$filename:\n";
    for my $contributor (sort keys %{$file{$filename}}) {
        print "  * $contributor\n";
    }
} 
```

（写得很快；不包括二进制文件之类的情况。）

如果您存储此脚本，例如 as `~/git-contrib.pl`，您可以使用以下命令调用它：

```
git log --stat=1000,1000 --pretty=format:'%cN' | perl ~/git-contrib.pl 
```

优点：`git`只调用一次，这意味着它相当快。缺点：它是一个单独的脚本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T10:55:27.273

**tldr**：

```
for file in `git ls-tree -r --name-only master ./`; do
    echo $file
    git shortlog -s -- $file | sed -e 's/^\s*[0-9]*\s*//'
done 
```

1.  您可以使用`git ls-tree`. `Find`真是糟糕的选择。

    例如，获取`master`当前目录（`./`）中分支中的跟踪文件列表：

    ```
    git ls-tree -r --name-only master ./ 
    ```

2.  您可以使用`get shortlog`( `git blame`is overkill) 获取文件编辑器列表：

    ```
    git shortlog -s -- $file 
    ```

因此，对于响应中的每个文件，`ls-tree`您应该根据需要调用`shortlog`并修改其输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-19T00:15:35.043

`git log --pretty=format:"%cn" <filename> | sort | uniq -c`

您还可以使用`git log`, 例如：在特定日期之后对每个文件的提交者（例如：2018-10-1 之后）执行更多操作： `git log --after="2018-10-1" --pretty=format:"%cn" <filename> | sort | uniq -c`

参考：[https ://www.atlassian.com/git/tutorials/git-log](https://www.atlassian.com/git/tutorials/git-log)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-19T15:27:21.010

`--stat`如果您不需要统计信息，请不要使用，为什么要求它重新运行所有差异，然后刮掉所有结果？只需使用`--name-only`.

```
git log --all --pretty=%x09%cN --name-only |  awk -F$'\t' '
        NF==2   { name=$2 }
        NF==1   { contribs[ $0 ][ name ] = 1 }
        END     {
                n = asorti(contribs,sorted)
                for ( i=0 ; ++i < n ; ) {
                        file = sorted[i]
                        print file
                        for ( name in contribs[file] ) print "\t"name
                }
        }
' 
```

# jquery - 如何将标签转换为文本框？

> ID：11737688
> 
> 赞同：1
> 
> 时间：2012-07-31T10:05:26.517
> 
> 标签：jquery, html, jquery-mobile

您好我想在图像点击事件上将标签字段转换为文本框。我的html文件是

```
<div>
    <div id="tagCust">Customer Details<img src="images/edit.png" class="alignright"/></div>
</div>

<div id="contactdetail">
    <div id="contactInfo">
        <label for="emailid" class="contactText" data-inline="true">Email Id*</label>
    </div>
         <label for="mobileno" class="contactText" data-inline="true">Mobile No.</br></label>
         <label for="custid" class="contactText" data-inline="true">Customer Id.</label>
</div> 
```

当用户单击编辑图像时，我想将`mobileno`和标签转换为文本框。`emailid`我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T10:11:39.423

您不能真正“转换”它，但您可以使用`.replaceWith()`标签 html 或`.hide()`它`.show()`。

例如：

```
$('.alignright').on('click', function() {
    $('label.contactText').slice(0,2).each(function() {
        $(this).replaceWith( '<input type="text"/>' );
    });
}); 
```

`.replaceWith`也可以处理节点引用而不是 HTML 字符串。但是，这将以破坏性的方式起作用，并且仅在您不再需要显示标签时才有意义。否则，在创建节点`<input>`的同时创建这些元素`<label>`，只需给它们 CSS 样式`display: none`。单击时，您可以切换这些样式（`none`阻止，反之亦然）或切换类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:15:17.313

我会建议下面或[http://jsfiddle.net/qAZZc/](http://jsfiddle.net/qAZZc/)上的代码，我也不会出于可访问性的原因删除标签，更好地附加输入并隐藏标签。

```
$("label").each(function(){
        if(($(this).attr("for") == "emailid")||($(this).attr("for") == "mobileno")){
           $(this).after("<input type='text' id='"+ $(this).attr("for") +"'/>");
           $(this).hide();
        }
    }); 
```

最好为您的按钮添加一个唯一的 id 或类，否则 .alignright 每个地方都会触发您的功能

# extjs - ExtJS 4 中的 ID 与相对路径

> ID：11737701
> 
> 赞同：2
> 
> 时间：2012-07-31T10:05:55.510
> 
> 标签：extjs, extjs4

在 ExtJS 4 中获取组件有两种主要方式。通过全局 ID 或通过相对路径。

ID 方法的好处是可以找到独立于视图中实际位置的任何组件。所以当视图发生变化时，系统仍然可以工作。但是随着系统变得越来越大，我需要使用带有命名空间的 ID 并实现一些机制来为组件的多个实例生成唯一 ID。

当我对组件查询使用相对导航时，我不必担心 ID，只需导航，例如，从单击的按钮到我想要更改的网格并进行操作。但是当视图发生变化时，查询可能不再起作用并且系统中断。

所以这两种方法似乎都不是最理想的。

有没有更好的方法？

在这里阅读答案后，我正在使用这种方法：

在视图中，我使用（本地 ID）定义我的组件，该组件`lid`必须是唯一的，但不是全局唯一的，例如`id`.

现在我可以使用这样的查询：

```
someWindowInstances[0].query( 'button[lid=myButton]' );

...

someWindowInstances[n].query( 'button[lid=myButton]' ); 
```

这使“myButton”可以位于窗口中的任何位置，如果窗口视图发生变化，我仍然可以找到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:37:30.923

使用`Ext.getCmp`, or`Ext.get`在技术上较慢，并且有缺陷：

1.  如果您有 2 个带有 的按钮`id="button"`，将返回哪一个？总的来说，这只会破坏你的程序——你提到了这一点。
2.  您现在必须向客户端发送更多代码（例如，为每个组件添加额外的代码`id='my-unique-id'`- 虽然这有点迂腐
3.  对我来说最大的一个：Ext.get 执行 dom 查找，而 Ext.getCmp 则查看 this.all[id] 这比引用对象要慢。 [http://jsperf.com/ext-js-reference-vs-lookup](http://jsperf.com/ext-js-reference-vs-lookup)

当我说引用对象时，我的意思是：

```
var grid=Ext.create('Ext.grid.Grid');
var Button =Ext.create('Ext.Button',handler:function(){
    grid.refresh();    
}) 
```

或者如果网格超出范围太远，我将使用事件侦听器：

```
Ext.Panel.getComponent(0).on("change",function(){ // can also use "getComponent("name)
    grid.refresh},
this); 
```

这有时确实会变得有些笨重，并且有其自身的缺点，因为你时不时地有 `Ext.getCompenent(0).items.items[0].getComponent[1 ].refresh()`，尽管这通常是可以避免的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T17:45:09.557

如果通过相对路径您的意思是 query() 方法，那么这就是要走的路。不要忘记，您不仅可以通过 DOM 属性查询组件，还可以通过其 xtype 和基本上任何*对象*属性来查询组件。像这样：

```
var panel = new Ext.panel.Panel({
    items: [{
        xtype: 'button',
        prop:  'foo'
    }],

    renderTo: Ext.getBody()
});

var button = panel.query('button[prop="foo"]')[0]; 
```

Actually, this is one of the most powerful and less known features of Ext JS 4\. Be descriptive, use query() instead of Ext.getCmp() and you'll get much better code: easy to read and maintain.

# java - Java，android，从 itnernet 服务器获取原子时间

> ID：11737704
> 
> 赞同：1
> 
> 时间：2012-07-31T10:05:59.060
> 
> 标签：java, android, time, ntp

我试图同步两个应用程序。如何获得精度高达 1ms 的任何服务器的服务器时间？或者也许只有 10 毫秒？

我尝试了一些 SNTP 客户端，但它们只给我我的目的地时间，或者只提供高达 1 秒的精度。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:23:17.477

您需要配置您的 SNTP 客户端以跟随时间服务器。有两种方法可以同步您的时间。SLAM 或 SLEW。

SLAM，只是占用服务器时间并将其扔给客户端。

SLEW，在接下来的几分钟内占用服务器时间并更正您的客户端时间。

在您的情况下，我建议在您的应用程序加载时使用 SLAM。

在 uxix 和网络软件世界中，有一些实用程序，如`ntpdate`slaming 和 slewing `ntpd`。

SNTP 是要走的路，这些客户端已经存在了大约 15 年，所以它非常稳定。事实上，新的开发在 8 年前就停止了。所以它应该非常稳定。只需花更多时间并正确配置即可。

[sntp 安卓](https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/net/SntpClient.java)

# eclipse - Eclipse + Equinox：无法连接到数据库，SQLException 找不到合适的驱动程序

> ID：11737705
> 
> 赞同：0
> 
> 时间：2012-07-31T10:06:02.947
> 
> 标签：eclipse, sqlexception, equinox

我正在使用 eclipse 和 equinox 开发应用程序。我有一个应用程序，我想使用 OSGi 将其转换为模块

我的应用程序适用于模块 JMS (apache activemq) 和模块数据库 (Oracle)。

它与 JMS 配合得很好。

但是当我使用 Oracle 运行时，我得到一个错误：

无法连接到数据库，SQLException: java.sql.SQLException: No suitable driver found for jdbc:oracle:thin:@192.168.0.149:1521:orcl

在我使用 lib ojdbc6.jar 并将其转移到 bundle 之前（因为它可以在带有 Eclipse + Equinox 的 OSGi 中使用，我跟随这个导师[http://wiki.eclipse.org/Create_and_Export_MySQL_JDBC_driver_bundle](http://wiki.eclipse.org/Create_and_Export_MySQL_JDBC_driver_bundle)）

我的代码：

```
Class.forName("oracle.jdbc.driver.OracleDriver");       

dbPool = new ConnectionPool("OracleDriver",
                                    20,
                                    40,
                                    1000,
                                    "jdbc:oracle:thin:@192.168.0.149:1521:orcl",
                                    "facebookvega",
                                    "facebook2012##",
                                    new DbConnectionExtFactoryImpl()); 
```

* * *

```
DbConnectionExt getConnection() throws SQLException     
        DbConnection conn = null;
        if (timeout == 0) {
            conn = dbPool.getConnection();
        } else {
            conn = dbPool.getConnection(timeout);
        } 
```

谢谢你帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:55:56.080

你有没有找到**"oracle.jdbc.driver.OracleDriver"**的 OSGi jar 。我们正在尝试使用相同的类在 Day-CQ 中使用需要 OSGi jar 的 Spring Framework 中的 JDBCTemplate。

# c# - 在 Azure 托管的 WCF 中找不到终结点

> ID：11737706
> 
> 赞同：0
> 
> 时间：2012-07-31T10:06:08.310
> 
> 标签：c#, wcf, azure

对于在 Azure 中托管 WCF 时遇到的问题，我到处搜索并放弃了。现在问这个问题，希望有人能回答。

我的 IIS7 中的 WCF 运行良好，并且我的客户端应用程序已经顺利连接到它。这一切都在本地工作。我的 WCF 配置文件中有这个绑定配置：

```
<system.serviceModel>
<standardEndpoints />
<bindings>
  <basicHttpBinding>
    <binding name="basicHttp" closeTimeout="00:10:00" openTimeout="00:10:00"
      sendTimeout="00:10:00" allowCookies="true" maxBufferSize="2147483647"
      maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647">
      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
        maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
    </binding>
  </basicHttpBinding>
  <webHttpBinding>
    <binding name="webHttp" closeTimeout="00:10:00" openTimeout="00:10:00"
      sendTimeout="00:10:00" hostNameComparisonMode="StrongWildcard"
      maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647">
      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
        maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
    </binding>
  </webHttpBinding>
</bindings>
<services>
  <service name="SurveyWCFService.SurveyService">
    <clear />
    <endpoint address="soap" binding="basicHttpBinding" bindingConfiguration="basicHttp"
      bindingName="basicHttp" contract="SurveyWCFService.SurveyService" />
    <endpoint address="json" behaviorConfiguration="jsonBehavior"
      binding="webHttpBinding" bindingConfiguration="webHttp" contract="SurveyWCFService.SurveyService" />
  </service>
</services>
<behaviors>
  <endpointBehaviors>
    <behavior name="jsonBehavior">
      <webHttp />
      <dataContractSerializer maxItemsInObjectGraph="2147483647" />
    </behavior>
  </endpointBehaviors>
  <serviceBehaviors>
    <behavior name="">
      <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
      <serviceMetadata httpGetEnabled="true"/>
      <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="false"/>
    </behavior>
  </serviceBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
</system.serviceModel> 
```

如您所见，我有 2 个端点，一个用于连接到我的服务的 C# 应用程序的 SOAP 端点，以及一个用于使用 REST 访问它的客户端的 JSON 命名端点。我使用“Azure Web Role”模板中的默认配置将其部署到 Azure，我的客户端已经可以访问 Azure 生成的给定 URL。但这里有一些奇怪的东西：

1）每当我的客户使用任何给定的服务方法时，它都会带回这个异常：

```
System.ServiceModel.EndpointNotFoundException: There was no endpoint listening at
http://<hostedservicename>/SurveyService.svc that could accept the message. 
This is often caused by an incorrect address or SOAP action. 
See InnerException, if present, for more details. ---> 
System.Net.WebException: The remote name could not be resolved: '<hostedservicename>' 
```

这很奇怪，因为这意味着我的应用程序没有连接到 .cloudapp.net。所以我尝试使用我的浏览器调用一些服务方法。Fiddler 告诉我响应是“HTTP 400”。在引用端点地址的 URL 后，我还仔细检查了生成的客户端配置文件，地址是正确的。

2) Azure 决定用自己的端点和绑定替换我的端点和绑定。当我使用 Fiddler 检查并检查 wsdl 文件时，我得出了这个结论，这里是 wsdl 文件的底部：

**本地 WSDL**

```
<wsdl:service name="SurveyService"><wsdl:port name="basicHttp_SurveyService" 
binding="tns:basicHttp_SurveyService"><soap:address location="http://localhost
/SurveyServiceLibrary/SurveyService.svc/soap"/></wsdl:port></wsdl:service> 
```

**Azure WSDL**

```
<wsdl:service name="SurveyService"><wsdl:port name="BasicHttpBinding_SurveyService" 
binding="tns:BasicHttpBinding_SurveyService"><soap:address location=
"http://<hostedservicename>.cloudapp.net/SurveyService.svc"/></wsdl:port>   
</wsdl:service> 
```

如何让我的 WCF 像在本地环境中一样工作？我需要在 WCF 上进行一些配置吗？在 Azure 上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:58:38.980

把这个留给那些偶然发现同样问题的人：

我检查了我在服务配置文件中提供的**命名空间，我在命名空间上****输入错误**，我***很傻 :)***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:17:30.523

我建议您查看**调用**WCF 服务的应用程序。我的印象是它没有使用完整的 URL。查找**客户端/端点**元素，如下所示：

```
 <?xml version="1.0" encoding="utf-8" ?>
  <configuration>
      <system.serviceModel>
          ...
          <client>
              <endpoint address="http://<hostedservicename>.cloudapp.net/SurveyService.svc" ... />
          </client>
      </system.serviceModel>
  </configuration> 
```

哦，**远程名称无法解析**错误也可能意味着您尚未获得 DNS 复制。在这些情况下，我倾向于手动将我的 DNS 服务器更改为 8.8.8.8（Google 的 DNS 服务器），并且大多数情况下这可以正常工作（您可以在几分钟后将其更改回自动）。

# android - 在加载 webview 之前，已显示黑屏

> ID：11737707
> 
> 赞同：1
> 
> 时间：2012-07-31T10:06:10.077
> 
> 标签：android

我已经显示了启动画面，在完成 splah 时间后，我开始下一个活动。在第二个活动中，我有 webview。我在 webview 上加载 html 文件。

我的问题是，关闭启动画面后，黑屏出现了。之后只有 webview 显示。

如何避免这种情况。

我使用下面的代码在 webview 上加载 html 文件。

```
webView.loadData(getString(R.string.termsofuse_content), "text/html", "utf-8"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T10:11:59.693

这是因为`WebView`加载数据需要一些时间，在加载数据之前，您将看到黑屏或空屏。

为了克服这个问题，您可以使用`WebViewClient`并显示 a`ProgressDialog`直到 WebView 完全加载数据。

```
 webview.setWebViewClient(new WebViewClient()

              {
                       @Override
                    public void onPageFinished(WebView view, final String url) {
                         progressdialog.dismiss();
                    }
                       @Override
                    public void onPageStarted(WebView view, String url,
                        Bitmap favicon) {
                    progressdialog.show();

                    }
              }); 
```

# qt - QListWidget 内的不确定的 QProgressBar

> ID：11737710
> 
> 赞同：1
> 
> 时间：2012-07-31T10:06:16.720
> 
> 标签：qt, qlistwidget, qprogressbar

作为 OP 标题的立场，是否有机会获得不确定的`QProgressBar`indide a `QListWidget`？

```
 bar = new QProgressBar();   
    bar->setMinimum(0);
    bar->setMaximum(0);
    QListWidgetItem *item = new QListWidgetItem ;
    list->setItemWidget(item, bar);
    list->setCurrentRow(0); 
```

这就是我尝试过的，但它什么也没显示？有什么提示吗？

谢谢你：

编辑：我需要等待长期过程的结果，我想在 QListWidget 中显示结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:59:16.847

将父级设置`ProgressBar`为`list`。

而不是 bar = new QProgressBar();

采用 `bar = new QProgressBar(list);`

这样就可以了。

# c# - 将文本框绑定到数据集查询的字段

> ID：11737711
> 
> 赞同：0
> 
> 时间：2012-07-31T10:06:20.747
> 
> 标签：c#, asp.net, stored-procedures, binding, dataset

我有一个存储过程，它返回一行或不返回行（0-1 行），我使用 DataSet，所以我将我的存储过程添加到我的数据集中，然后我调用它。现在我想将文本框的 Text 属性绑定到返回行的字段，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:10:27.623

试试这个..

```
 textbox.text=DtSet.Tables[0].Rows[0]["database column name"].ToString(); 
```

# android - Sqlite：遍历字符串字段的子字符串

> ID：11737713
> 
> 赞同：3
> 
> 时间：2012-07-31T10:06:34.457
> 
> 标签：android, sql, sqlite, for-loop, substring

我有一个包含一串数字的字段

```
 "2002 2005 2001 2006 2008 2344" 
```

我们最好假设空格是拆分，否则，它们每个是 4 个字符长。

我可以选择一个子字符串：

```
SELECT substr(years,1,4)  FROM TABLE 
```

但不知道如何检查每一个。我试图找到包含最接近 0 的数字的行。

我可以`ORDER BY`和`LIMIT 1`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:27:19.007

这看起来很丑，但它在一个 SQLlite 语句中选择了您需要的所有内容。如果假设日期在当前间隔内，例如 1900..2100，您也可以进行一些优化。在这种情况下，您可以先剪切 2 个选择 B,C (B: 1 union 2) (C: 9 union 0 union 1)

```
 select years2,years from 
    (
    select i1||i2||i3||i4  as years2 from (select '0' as i1 
                   union all 
                   select '1' as i1
                   union all 
                   select '2' as i1
                   union all 
                   select '3' as i1
                   union all 
                   select '4' as i1 
                   union all 
                   select '5' as i1 
                   union all 
                   select '6' as i1
                   union all 
                   select '7' as i1
                   union all 
                   select '8' as i1
                   union all 
                   select '9' as i1) B, 
    (select '0' as i2 
                   union all 
                   select '1' as i2
                   union all 
                   select '2' as i2
                   union all 
                   select '3' as i2
                   union all 
                   select '4' as i2 
                   union all 
                   select '5' as i2 
                   union all 
                   select '6' as i2
                   union all 
                   select '7' as i2
                   union all 
                   select '8' as i2
                   union all 
                   select '9' as i2) C,
    (select '0' as i3 
                   union all 
                   select '1' as i3
                   union all 
                   select '2' as i3
                   union all 
                   select '3' as i3
                   union all 
                   select '4' as i3 
                   union all 
                   select '5' as i3 
                   union all 
                   select '6' as i3
                   union all 
                   select '7' as i3
                   union all 
                   select '8' as i3
                   union all 
                   select '9' as i3) D,
                  (select '0' as i4 
                   union all 
                   select '1' as i4
                   union all 
                   select '2' as i4
                   union all 
                   select '3' as i4 
                   union all 
                   select '4' as i4 
                   union all 
                   select '5' as i4 
                   union all 
                   select '6' as i4
                   union all 
                   select '7' as i4
                   union all 
                   select '8' as i4
                   union all 
                   select '9' as i4) E
    ) YearsAll

   left join YearsTable on (YearsTable.years like '%'||YearsAll.years2||'%')

    where YearsTable.years is not null

    order by years2 limit 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-17T12:47:50.980

您可以使用公用表表达式在年份字符串中拆分年份，然后获取最接近 0 的年份。

```
WITH split_years(year, years) AS (
    values(0, '2001 2002 2003 2004 2005 2006'||' ')
    UNION ALL SELECT
    cast(substr(years, 0, instr(years, ' ')) as int),
    substr(years, instr(years, ' ')+1)
    FROM split WHERE length(years)
) SELECT year FROM split_years WHERE year>0 ORDER BY year LIMIT 1; 
```

输出是：

```
2001 
```

# java - 删除动态页面 JFace 向导

> ID：11737715
> 
> 赞同：0
> 
> 时间：2012-07-31T10:06:39.543
> 
> 标签：java, eclipse-plugin, eclipse-rcp, jface

我正在运行 JFace 向导期间添加新的动态页面，方法是覆盖该`getNext`方法

```
public IWizardPage getNextPage()
{
    for (int i=0; i<10; i++)
    {   
        MyPage dynamic = new MyPage("dynamic"+i)
        wizard.addPage(dynamic);
    }
    return dynamic0;
} 
```

是否有一个选项可以在下次流程通过`getNextPage()`方法时删除所有动态页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-26T12:33:57.503

通常，预先创建页面以使向导能够计算其最大大小。“即时”添加页面可能会在该领域产生问题。

话虽如此，没有办法进入包含要从该列表中删除页面的页面的“页面”字段。

一种替代方法是将页面“标记”为非活动状态并在 getNextPage() 计算期间跳过它。

类似于（这是来自 IWizard 的 getNextPage）：

```
public IWizardPage getNextPage(IWizardPage pPage)
{
    MyPage myPage = (MyPage) super.getNextPage(pPage);
    while(myPage != null && myPage.isInactive())
      {   
        myPage = (MyPage) super.getNextPage(myPage);
    }
    return myPage;
} 
```

# .net - Umbraco 中的自定义自动增量字段

> ID：11737716
> 
> 赞同：0
> 
> 时间：2012-07-31T10:06:45.813
> 
> 标签：.net, content-management-system, umbraco

我使用过我自己编程的 CMS，但在 Umbraco 上是新的。我正在使用 .net framework 4 开发**Umbraco 4.7**，并希望创建一个有点像这样的内容结构

```
男模
|-------------型号（可以是多个）
                 |----------- 型号 ID （问题） 
                 |----------- 姓名
                 |----------- 出生日期
                 |----------- 等等...

```

我需要为每个模型创建节点，并希望为每个模型分配一个唯一的模型 ID，但找不到任何可用于自动增量字段的数据类型（就像我在使用 SQL 编写自定义 .net 代码时所做的那样）。我知道我可以使用@pageId，但我希望模型 ID 从 100 开始，并且每个模型只有一个增量。

需要帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T20:05:34.943

一种选择是您可以在自定义库中处理 Document.AfterPublish 事件，该事件可以在创建后将自动增量值添加到“autoID”字段并再次保存/发布。您可能需要保留当前增量 id 值的计数器（例如在上面的“MaleModels”节点中），这样您就不必每次都查询所有模型来查找最高 ID。

这是一篇关于 Umbraco 事件的博客文章，可能有助于了解详细信息：http: [//www.bo-mortensen.dk/2011/10/umbraco-more-event-goodness/](http://www.bo-mortensen.dk/2011/10/umbraco-more-event-goodness/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:51:40.077

为什么不创建具有数据库的“**自定义用户控件**”，并且可以将第一列创建为自动增量，将第二列创建为 NodeId，一旦完成，请在`Page_Load()`事件中将其添加到数据库中，确保检查 NodeId 是否存在不要插入记录。

现在在 Umbraco 中创建为 DataType 然后用作属性，当您创建节点时，用户控件将获得自动增量编号，用户控件将使用 NodeId 插入记录并生成自动增量并显示到`page_load()`into `<asp:Label>`，

每次页面加载时它都会变热，因此您可以做的是每次都需要检查数据库是否存在 NodeId（如果存在）然后不要插入，否则插入数据库中，这样您就可以创建自动增加的，

您需要记住，每次数据库都会加热，只需确保您需要研究它的性能。

如果您还有其他问题，请告诉我。

谢谢

安库尔

# jquery - 是否可以在 Jquery 中使用绑定非标准客户端事件

> ID：11737717
> 
> 赞同：1
> 
> 时间：2012-07-31T10:06:48.857
> 
> 标签：jquery, asp.net, events, ajaxcontroltoolkit, unobtrusive-javascript

例如这个[AsyncFileUpload](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AsyncFileUpload/AsyncFileUpload.aspx)，有一个事件“OnClientUploadComplete”

我可以做类似的事情吗

```
$("#ctl00_MainContent_AsyncFileUpload1_ctl02")
.bind("OnClientUploadComplete", function () {  alert("test"); 
 }) 
```

> ```
> <ajaxToolkit:AsyncFileUpload  OnClientUploadComplete="uploadComplete" 
>     runat="server" ID="upload"
> Width="400px" UploaderStyle="Modern" CompleteBackColor="White" UploadingBackColor="#CCFFFF"
> ThrobberID="imgLoader" OnUploadedComplete="AsyncFileUpload1_UploadedComplete" 
>     OnClientUploadStarted = "uploadStarted" />
>  <asp:Image ID="imgLoader" runat="server" ImageUrl="~/images/loader.gif" /><br /><br />
>  <img id = "imgDisplay" alt="" src="" style = "display:none"/> 
> ```
> 
> ```
> $addHandler($("#<%=upload.ClientID %>"), 'uploadComplete', (function () { alert("test"); }));
> 
> function uploadStarted() {
>     $get("imgDisplay").style.display = "none";
> }
> function uploadComplete(sender, args) {
>     var imgDisplay = $get("imgDisplay");
>     imgDisplay.src = "images/loader.gif";
>     imgDisplay.style.cssText = "";
>     var img = new Image();
>     img.onload = function () {
>         imgDisplay.style.cssText = "height:100px;width:100px";
>         imgDisplay.src = img.src;
>     };
>     img.src = "<%=ResolveUrl(UploadFolderPath) %>" + args.get_fileName();
> } </script> 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:36:57.027

不，你不能这样做。

AJAX 控件工具包中的自定义事件是在浏览器的事件系统之外实现的。有关详细信息，请参见[此处](http://msdn.microsoft.com/en-us/library/bb398781.aspx)。

您将不得不使用`add_uploadComplete()`组件提供的方法：

```
$find("yourBehaviorID").add_uploadComplete(function() {
    alert("test").
}); 
```

`yourBehaviorID`您的扩展器在哪里`BehaviorID`（默认为`ClientID`扩展控件的）。

# smtp - LiveCode 上的 SMTP 库演示

> ID：11737728
> 
> 赞同：1
> 
> 时间：2012-07-31T10:07:22.027
> 
> 标签：smtp, gmail, livecode

我正在尝试构建一个移动应用程序，当用户按下按钮时，它会将电子邮件直接发送到电子邮件地址。我发现 Sarah 的 SMTP 库演示就是这样做的。我尝试将服务器放在服务器上，`smtp.gmail.com`但我得到了这个错误：

```
> 5.7.0 must issue a starttls command first 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T15:01:08.923

您要连接的服务器要求您进行身份验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T12:08:47.137

我相信 smtp.gmail.com 使用 SSL。莎拉的图书馆不这样做。您需要使用正确的 Gmail 用户名和密码进行身份验证，并且您可能想尝试执行 LiveCode 语法

```
libUrlSetSSLVerification false 
```

在开始使用 Sarah 的库之前，您需要这样做。我想知道您是否还需要摆弄默认标题。为此，您需要编辑 lib 的脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T18:43:43.657

莎拉的图书馆不需要套接字吗？所以在 IOS 上（直到新更改完成套接字支持）我认为您必须使用 rresockets 外部并调整 sarahs 库以使用外部功能而不是 LC 套接字。

对于 android，也没有套接字和 rresocket，尽管这些有望在不久之后实现。

一种解决方法是在 Web 服务器上使用电子邮件发送脚本，将数据发布到正确的地址并让脚本发送电子邮件。

当然可以使用桌面插座，所以 sarahs 应该可以正常工作（根据其他建议）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-19T19:34:54.747

此页面有一个示例 SMTP 堆栈。我还没有测试过它，但人们说它可以工作，只需要确保设置了端口。

[http://www2.altuit.com/webs/altuit2/RunRev/Downloads.htm](http://www2.altuit.com/webs/altuit2/RunRev/Downloads.htm)

# java - ConcurrentHashMap 如何实现其线程安全的并发行为？

> ID：11737733
> 
> 赞同：1
> 
> 时间：2012-07-31T10:07:27.017
> 
> 标签：java, java.util.concurrent

我一直在浏览 java.util.concurrent 包并试图了解该库为我们提供了什么。我遇到了类，`CopyOnWriteArrayList`并`ConcurrentHashMap`试图找出这些类如何实现线程安全。因为`CopyOnWriteArrayList`它非常直观，只要有写入操作，它们就通过制作底层数组的新副本来实现。但是我无法理解如何`ConcurrentHashMap`实现线程安全，同时提供并发性？

**编辑**：如果有人能告诉我实现背后的概念就足够了。考虑到这一点，我可以更深入地研究源代码，从而帮助我以更好的方式和结构化的方式理解它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T10:11:46.147

如果您真的想了解如何构建并发哈希映射，我可以建议您查看 IBM 文章[http://www.ibm.com/developerworks/java/library/j-jtp08223/](http://www.ibm.com/developerworks/java/library/j-jtp08223/)

# sql - 状态所有计数

> ID：11737735
> 
> 赞同：0
> 
> 时间：2012-07-31T10:07:32.273
> 
> 标签：sql

我有一张如下表（MSSql）

```
Name  Status
----  -------
kmk   Success
kmk   Success
mvk   Fail
per   Success
Per   Fail
mvk   Fail 
```

我需要给出如下结果的查询

```
Name Status  Count
---- ------- -----
kmk  Success 2
kmk  Fail    0
mvk  Success 0
mvk  Fail    2
Per  Success 1
Per  Fail    1 
```

我试过了，`group by`但我得到了如下结果我的查询是

```
(Select Name,[Status],COUNT([Status]) As Count From Checking group by [Status],Name)

Name Status  Count
---- ------- -----
kmk  Success 2
mvk  Fail    2
Per  Success 1
Per  Fail    1 
```

我尝试了很多方法，请您给我查询

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:16:25.417

您可以尝试以下方法。它适用于 sqlite3，并且根据您的 SQL 引擎，您的里程可能会有所不同：

```
select
  name,
  "Success" as status,
  sum(case when status = "Success" then 1 else 0 end) as count
from checking group by name
union
select
  name,
  "Fail" as status,
  sum (case when status = "Fail" then 1 else 0 end) as count
from checking group by name; 
```

SQLite3 的结果：

```
kmk|Fail|0
kmk|Success|2
mvk|Fail|2
mvk|Success|0
per|Fail|1
per|Success|1 
```

# objective-c - 框架集风格的 iPad 开发

> ID：11737737
> 
> 赞同：0
> 
> 时间：2012-07-31T10:07:36.440
> 
> 标签：objective-c, ios, xcode, ipad

我希望为客户设计一个使用 xCode 作为 iPad 应用程序的 Product Brochure 应用程序，由于我现阶段的知识有限（但擅长网络开发），我想知道如果我在框架集中构建应用程序可能会产生什么影响样式从网络加载我的数据。

例如，我有一个顶部菜单，其中包含以下标题。

首页 - 产品 - 行业 - 联系方式

显然，当单击产品链接时，我会假设标准的做法是通过 XML 将产品图像和数据加载到 Objective-C 中，并以某种本机应用程序方式将它们解析出来。

我的问题是这个。为什么我无法加载在一种 iPad 视图容器上显示产品并以这种方式显示我所有信息的 Web 应用程序？是不是完全不被看好？

目前我的 xCode 知识有限，想知道这是否是一种可行的做事方式？显然，用户需要网络连接，但对于许多应用程序来说可以这么说。

您对此的想法最有帮助吗？如果我的要求不是一个好主意，我可能不得不将工作外包出去。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:11:09.247

因此，您的意思是说您创建了一个包含一个 Web 视图的应用程序，并且该 Web 视图将显示来自 WEBSITE 的所有数据，以及您使用 HTML5 开发的网站以及您所解释的逻辑。没什么特别的……对吧？

在这种情况下，APPLE 将拒绝您在 Apple Store 上的应用程序，您将只有可以在任何浏览器上呈现的基于 HTML5 的网站......

您的应用程序需要具有一些本机功能，否则他们会拒绝您的应用程序。

# javascript - Knockout.js 将新项目添加到数组

> ID：11737747
> 
> 赞同：0
> 
> 时间：2012-07-31T10:08:10.543
> 
> 标签：javascript, knockout.js

我无法以编程方式将元素添加到包含在数据表中的可观察数组中。

表格的每一行都有一个我希望影响的不同数组。

HTML 如下所示：

```
<div class='liveExample'>     
<h2>Cases</h2>
<div id='contactsList'>
    <table class='contactsEditor'>
        <tr>
            <th>Case Number</th>
            <th>Stage</th>
            <th>Users</th>
            <th>Ids</th>
        </tr>
        <tbody data-bind="foreach: appearances ">
            <tr>
                <td>
                    <input data-bind='value: caseNumber' />
                </td>
                <td><input data-bind='value: caseStage' /></td>
                <td> 
                    <ul  data-bind="foreach: subjects">
                        <li style="list-style-type:none;"><label data-bind="text: Name"/></li>    
                    </ul>   
                </td>
                <td>
                    <table>
                        <tbody data-bind="foreach: ids">
                            <tr>
                                <td><input data-bind='value: $data' /></td>
                                <td><a href='#' data-bind='click: $root.removeId'>Delete</a></td>
                            </tr>
                        </tbody>
                    </table>
                    <a href='#' data-bind='click: $root.addId'>Add number</a>
                </td>
            </tr>
        </tbody>
    </table>
</div>     
<p>
    <button data-bind='click: save, enable:appearances().length > 0'>Save to JSON</button>
</p>     
<textarea data-bind='value: lastSavedJson' rows='5' cols='60' disabled='disabled'> </textarea> 
```

​</p>

数据和 JavaScript 如下所示：

```
enter code here
var initialData = [{
"Number": "12000009",
"Stage": "Inital",
"Subjects": [{
    "Name": "Andrew McAdam"},
{
    "Name": "Patrick Brown"}],
"Ids": [1]},
{
"Number": "12000010",
"Stage": "Inital",
"Subjects": [{
    "Name": "John Smith"}],
"Ids": [2, 3]},
{
"Number": "12000011",
"Stage": "Inital",
"Subjects": [{
    "Name": "James Bonner"}],
"Ids": [4]},
{
"Number": "12000012",
"Stage": "Processed",
"Subjects": [{
    "Name": "Henrik Dalgleish"}],
"Ids": [5]}]

var AppearancesModel = function(appearances) {
var self = this;
self.appearances = ko.observableArray(ko.utils.arrayMap(appearances, function(appearance) {
    return {
        caseNumber: appearance.Number,
        caseStage: appearance.Stage,
        subjects: ko.observableArray(appearance.Subjects),
        ids: ko.observableArray(appearance.Ids)
    };
}));

self.addId = function(appearance) {
    appearance.ids.push("");
};

self.removeId = function(id) {
    $.each(self.appearances(), function() {
        this.ids.remove(id)
    })
};

self.save = function() {
    self.lastSavedJson(JSON.stringify(ko.toJS(self.appearances), null, 2));
};

self.lastSavedJson = ko.observable("")
}

ko.applyBindings(new AppearancesModel(initialData));​ 
```

我遇到的问题是，在单击“添加”按钮并输入一个值后，数组中的值是空字符串（我在创建新数组元素时添加的值）。

我认为问题在于我在获得值之前将新项目添加到数组中，但我认为它将绑定到新输入，因此当我执行 Save 函数时，新值将被反映。

上面的 JsFiddle 在[http://jsfiddle.net/amcgoldrick/3h9GZ/](http://jsfiddle.net/amcgoldrick/3h9GZ/)

谢谢

安迪

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T10:41:37.800

您添加到您的值`ids` `observableArray`是不可观察的，因此绑定只是一种方式。如果你想更新里面的值，`observableArray`那么你需要在`observableArray`observable 中创建元素。

所以而不是：

```
self.addId = function(appearance) {
    appearance.ids.push("");
}; 
```

你将会拥有：

```
self.addId = function(appearance) {
    appearance.ids.push({id: ko.observable("")});
}; 
```

有关工作示例，请参阅[http://jsfiddle.net/5wKjk/3/ 。](http://jsfiddle.net/5wKjk/3/)（我没有添加代码来映射您现有的 id，因为我只是想演示所涉及的原则并且没有时间）。

# git - 如何基于樱桃采摘父母的新版本重新定位

> ID：11737749
> 
> 赞同：6
> 
> 时间：2012-07-31T10:08:16.817
> 
> 标签：git, git-rebase, gerrit

考虑以下突出显示的提交：

![GITK](../Images/da743ad8182406e71ad580f823da87ee.png)

对于当前的讨论，我将参考以下提交：提交 1：从用户设置中读取语言设置提交 2：[POC] 不审查

我们使用 Gerrit 进行代码审查。Commit 1 和 Commit 2 都在审核中，尚未合并。我正在处理 Commit 1，它需要 Commit 2 中的代码，因此必须基于它。这些是我使用的命令：

1.  Cherry Pick Commit 2\. 我使用从 Gerrit 获得的cherry-pick 命令进行该更改： ![樱桃采摘提交 2](../Images/c7592f24080eeb6bb2f5842ad8494978.png)

2.  进行我工作所需的更改并推送更改为 Commit 1。当我第一次推送 Commit 1 时，它基于 Commit 2 的补丁集 8。

当我收到关于我的提交（提交 1）的评论意见时，我会在 Gerrit 上为它推送新的补丁集。但是，当最终要合并时，它需要位于其父级的最新补丁集上（提交 2）。我现在这样做的方式如下：

1.  git结帐工作2
2.  git reset --hard remotes/origin/head
3.  Cherry-pick Commit 2 ---> 这让我得到了最新版本的 Commit 2
4.  樱桃采摘提交 1
5.  git push origin working2:refs/for/head

有没有一种方法可以让我在不执行上述所有操作的情况下获得最新的 Commit 2 补丁集？也许某种交互式樱桃挑选或变基？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T15:57:26.553

您可以简单地将 Commit 1 重新设置为 FETCH_HEAD。在 working2 分支上，

```
$ git fetch ssh://user@gerrit.dev.xyz.net:29418/management-console refs/changes/26/11926/11 
$ git rebase -i FETCH_HEAD 
```

删除带有 Commit 2 的提交消息的行（通常是第一行）。现在 Commit 1 将位于最新的 Commit 2 之上。如果您不熟悉交互式 rebase，请查看 [此处](http://codeutopia.net/blog/2009/12/10/git-interactive-rebase-tips/)。

# hadoop - 如何在 hadoop 集群上处理 id 生成？

> ID：11737750
> 
> 赞同：2
> 
> 时间：2012-07-31T10:08:18.843
> 
> 标签：hadoop, mapreduce, partitioning

我正在 hadoop 集群上构建字典，需要为每个令牌生成一个*数字id。*我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:13:47.813

你有两个问题。首先，您要确保为每个令牌准确分配一个 id。为此，您应该按标记对记录进行排序和分组，并在减速器中进行分配。一旦你确定对每个标记只调用一次 reducer 方法，你就可以使用上下文中的分区号和 reducer 维护的唯一数字 id（每个分区一个实例） - 只需使用初始化为 1 的实例变量在 setup 方法中并在 reduce 方法中递增。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:42:18.193

为了避免不属于您的业务逻辑的同步、排序和分组，您可以使用一些技巧，这样会更快。

最简单的一种是在 Reducer 中生成 UUID，每个键一个[UUID](http://docs.oracle.com/javase/6/docs/api/java/util/UUID.html) UUID.randomUUID()，但这些不是数字。

如果您想要连续的数字 id 序列并且您的输出足够小以供一个减速器处理，那么通过 org.apache.hadoop.mapreduce.Job.setNumReduceTasks(int tasks) 强制使用一个减速器来完成作业，因此所有键都将被定向到单个 Reducer。

如果 Mapper 的输出对于单个 Reducer 来说仍然太大，并且您不关心 id 的序列连续性或者您的字典可以被分区，那么您可以使用 Partitioner 的一些技巧（[请参阅](http://hadoop.apache.org/common/docs/r1.0.0/api/org/apache/hadoop/mapreduce/Partitioner.html)参考资料）。这个想法是您可以在逻辑上将键划分为 N 个已知长度的范围（例如，范围 1 可以有 1 百万个以 1 开头的键，范围 4 可以有 500 个以 3500000 开头的 id，等等）。逻辑：

1.  将 Reducer 的数量设置为 N (JobConf.setNumReduceTasks(N))；
2.  实现将 key 与其 range 匹配的 Partitioner，它将把同一 range 中的所有 key 定向到同一个 Reducer；
3.  在 Reducer 中有一个以范围的第一个 id 开头的计数器（在第一次调用 reduce 时，使用与 partitioner 中相同的逻辑来识别哪个范围是 Reducer）

如果您对范围没有任何业务知识，则可以花一些时间对键进行区分并计算范围及其长度。有了这个，您可以在结果集中获得连续的 id 序列。

如果您不想花时间在不同的键上，那么目标是为每个 Reducer 使用不同的数字开始 id（Reducer 1 生成仅以 1 开头的 id（1、10、124523、1341243），Reducer 2 与 2 （2、23、234234532）等）。为此，计算密钥第一个字节的 mod 10，并强制 10 个 Reducer，将零指向与 1 相同的分区（主要原因是没有以 0 开头的 2 位整数，它可能会导致与 ids 冲突来自其他分区），因此分区 0 的输出为空。比在 reducer 端追加（连接 2 个字符串！！！）计数器到（密钥 mod 10 的第一个字节），其中 0 更改为 1。每个 reducer 都有一个从 1 到无穷大的计数器，可以从包含用于该分区的最后一个 id 的文件。

前任。

```
key = "abc", ascii of 'a' is 97, 97 % 10 = 7 and id for that key is '7' + '1' = '71', 
for "asd" it will be '7' + '244' = '7244', 
for "bbv" is '8' + '1' = '81', 
for "bgh" is '8' + '2' = '82', 
for "ddv", 'd' is ascii 100, 100 % 100 = 0 , convert to 1, '1' + '1' = '11', 
for "edv" is 101 % 100 = 1, '1' + '2234' = '12234'. 
```

因为所有的键都以不同的数字开头，所以它们从不重叠，因此不需要在多个 Reducer 之间进行同步。它由 mod 结果和计数器的字符串连接保证，因此不会溢出到下一个前缀/前导数字。另一个优点是您不需要进行任何预排序，这不是您业务逻辑的一部分。当 Reducer 关闭时，它可以将在 id 生成中使用的最后一个计数器写入文件，该计数器可以在下一次运行中使用，并通过字典的分区提供 id 的连续性。

要将分区数量从 10 增加到 100，请使用 mod 100 并将单个数字结果与 2 数字结果合并（我们再次浪费了 10 个 reducer 的输出）。Ex 10 % 100 = 10, 1 % 100 = 1 转换为 10, 102 % 100 = 2 通过添加 '0' 作为字符串或乘以 10 转换为 20。目标是使所有前缀具有相同的位数，在这种情况下为 2。

通过巧妙的逻辑，我们可以避免浪费跳过的分区（在 mod 100 的情况下为 0、1、2、9）。

警告：此逻辑容易受到数据倾斜的影响。

我希望它有所帮助，干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T02:16:49.177

我们使用的另一个选项是**将 ID 块分配给任务**，为此您需要一种机制来管理事务。我们使用 AWS 的**SimpleDB**来跟踪交易和已使用或未使用的 ID。

在作业开始时，我们将整个 ID 块集锁定在 Simple DB 上（只有一个属性更改为“locked”），然后每个任务调用 simple db 来“签出”它使用的 ID 块。

如果任务失败，它永远不会“解锁”块并且永远不会更新最后使用的 ID，因此这些 ID 不会被失败的任务消耗。最后，当我们解锁整个 ID 块集时，我们会解锁任何由失败任务持有的块。

我们将通过从简单数据库导入/导出 ID 块来改进此过程，因此我们不必更新外部资源。相反，我们可以从与数据一起存储的文件中读取可用的 ID，将它们写入 simple db，使用 simple DB 来协调将块分配给各个任务（映射器、reducer），然后将它们写回并返回成功的结果。

一旦我们做出改进，我们可能会公开代码，所以如果有人对这种方法感兴趣，请随时与我联系，如果我们完成了，我会用代码更新这篇文章。

# python - 使用 python 和 gevent 的 http 服务器（不使用 apache）

> ID：11737754
> 
> 赞同：2
> 
> 时间：2012-07-31T10:08:27.360
> 
> 标签：python, apache, nginx, gevent, httpserver

只是使用 python & gevent.server 来服务一个简单的登录服务器（只需检查一些数据并进行一些 db 操作），当它受到 ddos​​ 攻击时会不会有问题？

如果使用 apache/ngnix 来服务器 http 请求会更好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T13:08:15.043

如果你使用 gevent.server 来实现你自己的 HTTP 服务器，我建议不要这样做，你应该使用 gevent.pywsgi，它提供了一个功能齐全、稳定且经过全面测试的 HTTP 服务器。它不如 gevent.wsgi 快，后者由 libevent-http 提供支持，但具有您可能需要的更多功能，例如 HTTPS。

Gevent 比 Apache 更有可能在 DDOS 攻击中幸存下来，但 nginx 在这方面与 gevent 一样好，尽管我不明白如果你可以在纯 Python 服务器上做得很好，为什么还要使用它。如果您通过同一服务器有多个后端，那么使用 nginx 就是这种情况，例如您的身份验证服务器以及一些静态文件服务（可以完全由 nginx 完成）以及可能的其他子系统或其他虚拟主机，所有这些都可以通过单个 nginx 配置提供服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T12:39:39.610

在我看来，使用纯 Python 服务器永远无法获得与使用主流 Web 服务器（如 Apache 和 Nginx）相同的安全级别。

这些在发布之前都经过了很好的测试，因此，通过使用稳定的构建并正确配置它，您将接近最大可能的安全性。

纯 python 服务器在开发过程中非常有用，但我不知道有任何可以声称与它们竞争安全测试/错误报告/快速修复的服务器。

这就是为什么通常建议将这些服务器之一放在纯 python 中的服务器之前的原因，例如使用 ProxyPass 之类的选项。

# json - 没有使用 $getjson 的内容

> ID：11737755
> 
> 赞同：0
> 
> 时间：2012-07-31T10:08:30.100
> 
> 标签：json, each, getjson

希望你们中的一些人可以帮助我。我是这个 json/jquery 的新手。

我在使用 getjson 渲染数组时遇到了一些问题。

我的json输出是：

```
{"item":[{"id":"24","utoken":"e43aa84cc304a1ed3722832616294516b118a5c2","st_type":"2","st_action":"cvb","st_situation":"cvbc"},{"id":"25","utoken":"e43aa84cc304a1ed3722832616294516b118a5c2","st_type":"1","st_action":"vbnv","st_situation":"vbnv"}]} 
```

我的javascript是：

```
<script type="text/javascript">
$.getJSON('showastrategy.php?utoken=<? echo $_SESSION['utoken']; ?>', 

function(data){
strategylist = data.items;
$.each(strategylist, function(index, strategy) {
    $('#altcontent').append('<li>' + strategy.id + '' +
    '<p>' +  strategy.utoken + ' ' +  strategy.st_title + '</p>' +
    '<p>' +  strategy.st_action + '</p>' +
    '' +  strategy.st_situation + '</li>');

    });
 });

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:11:53.063

首先; `data.items`不存在。

采用：

```
function(data) {
    for(var i in data['item']) {
        $('#altcontent').append('<li>' + data['item'][i].id + '' +
        '<p>' +  data['item'][i].utoken + ' ' +  data['item'][i].st_title + '</p>' +
        '<p>' +  data['item'][i].st_action + '</p>' +
        '' +  data['item'][i].st_situation + '</li>');
        });
    }
} 
```

# actionscript-3 - 关闭填充会影响性能吗？

> ID：11737756
> 
> 赞同：3
> 
> 时间：2012-07-31T10:08:35.270
> 
> 标签：actionscript-3, flash

[在 AS3 中 - 在使用beginFill()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Graphics.html#beginFill%28%29)绘制到 DisplayObject 的图形画布之后，使用[endFill()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Graphics.html#endFill%28%29)关闭填充是否会影响（提高）性能或内存消耗？

或者它只是关闭填充，以便您可以在其他地方开始新的填充？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:47:23.187

AS3 参考对这种`beginFill()`方法进行了说明：

* * *

**每当绘制三个或更多点或`endFill()`调用该方法时，应用程序都会呈现填充。**

* * *

这暗示该`endFill()`方法并非完全必要。但是，如果绘制的点少于 3 个（即，如果您只绘制一条线），则在您调用`endFill()`. 所以一般来说，`endFill()`基本上是用来渲染填充，而不是关闭它。尽管如此，该`endFill()`方法的文档指出：

* * *

**如果当前绘图位置不等于`moveTo()`方法中指定的先前位置并且定义了填充，则用一条线封闭路径然后填充。**

* * *

`endFill()`因此，如果绘图取决于用户输入，则最好使用。

总的来说，我建议`endFill()`您在完成`beginFill()`. 这样，您可以确保您的填充已正确完成。我已经看到它在我知道的每个使用的示例中都使用过`beginFill()`，所以即使没有必要，它也是一种很好的做法。我怀疑它会显着影响性能，如果确实如此，它可能会改善它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:28:46.867

我在密集型应用程序（视频游戏）中经常使用这种方法，并尝试了解这一点。我从未注意到任何差异，所以我会说它不会影响性能或内存消耗。我认为它只是更改了一个标志，以便它不会填充您稍后绘制的其他形状。

However, I couldn't find any "official" sources confirming or denying this so I am not 100% positive. I'm sorry but this is the best answer I can give you ;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-18T05:35:41.583

try this code, it doesn't call endfill(), still it renders a line.

```
var s:Sprite = new Sprite();

s.graphics.lineStyle(2, 0xff0000);
s.graphics.lineTo(200,150);
addChild(s); 
```

# git - Git合并同时丢弃任何以前的更改（在本地存储库或上次提交中）

> ID：11737759
> 
> 赞同：1
> 
> 时间：2012-07-31T10:08:47.297
> 
> 标签：git, merge

在 Git 中，在合并期间，有没有一种方法可以告诉 git 在发生冲突时丢弃本地更改并应用来自合并分支的更改？

我的意思是，如果有办法，那么我们可以像分支合并一样进行合并而不会发生冲突。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T10:35:37.423

在尝试合并之前，您可以自己丢弃本地更改`git reset --hard HEAD`。
您可以用`HEAD`您想要的任何提交哈希替换。
这将为您带来实际提交的干净状态*，*并且您将丢失所有更改。

如果你想保留它们，你可以在之前将它们存储起来`git stash`，或者将它们移动到另一个分支：

```
git checkout -b new_branch
git add .
git commit -m "My awesome commit"
git checkout - # will bring you back to the last branch you were in 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T23:09:14.777

如果您想忽略所有本地更改，以及额外的合并提交，您只想将您的分支移动到远程 HEAD。

```
git log --oneline origin/master
# assume the first sha is bbdfa17
git reset --hard bbdfa17 
```

现在您处于树的顶端，没有合并提交。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-31T10:50:42.573

听起来您想了解“他们的”和“我们的”合并策略。合并时，您可以指定当前分支（我们的）或远程分支（他们的）是正确的。

# java - 如何确定 XML 元素是否自关闭？

> ID：11737762
> 
> 赞同：1
> 
> 时间：2012-07-31T10:08:50.447
> 
> 标签：java, xml, sax, saxparser

我用谷歌搜索、搜索和阅读，但一直找不到答案。

我的 XML 文件看起来有点像这样：

```
<Patient PID="5" Disease="Flu" FavoriteBird="Norwegian Blue"/>
<Patient PID="33" Disease="Thripshaw's Disease" FavoriteBird="Dodo">
    <Contact Hospitalized="2013 05 30"/>
</Patient> 
```

我想匿名每个患者最喜欢的鸟。也就是说，产生如下所示的输出：

```
<Patient PID="5" Disease="Flu"/>
<Patient PID="33" Disease="Thripshaw's Disease">
    <Contact Hospitalized="2013 05 30"/>
</Patient> 
```

一切都很顺利，除了我只能处理最后一种类型的患者标签——也就是说，当元素没有自动关闭时。

我的“endElement”方法看起来像

```
out.write(qName + "/n>") 
```

并且永远不会为第一种类型的 Patient 标签调用。

我该怎么办？如果有办法找出标签是否自动关闭，我可以轻松修复它。

PS：我必须转换大小高达数百兆字节的文件。在建议替代解决方案时请记住这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:09:26.817

您可以在大约五行 XSLT 中完成此操作，而不是您现在拥有的无疑更多的 SAX 处理行，并且它可以正确地用于任何合法的 XML。

# oracle - Oracle-11g SQL命令行在windows中自动关闭

> ID：11737763
> 
> 赞同：0
> 
> 时间：2012-07-31T10:08:55.663
> 
> 标签：oracle, oracle11g

当我在 Windows（开始->程序->Oracle-11g->运行 SQL 命令行）中打开“运行 SQL 命令行”时，它会自动关闭。我无法弄清楚为什么会这样。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:38:36.617

从命令行启动 sqlplus，就像在 *Nix 中一样。为此，请确保您知道您的 Oracle 可执行文件在哪里。它们位于 ORACLE_HOME\bin\ 目录中。ORACLE_HOME 可以位于磁盘上的任何位置。

1.  设置 ORACLE_HOME=c:\where\you\put\it
2.  设置 PATH=%ORACLE_HOME%\bin;%PATH%

现在你可以启动 sqlplus 看看会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:30:22.527

Oracle包中有SQL*Plus，可以用来输入sql命令

# modelica - 在 Modelica.Media 中处理质量分数：是否使用 reduceX？

> ID：11737764
> 
> 赞同：1
> 
> 时间：2012-07-31T10:08:57.220
> 
> 标签：modelica

我有一个关于如何处理我正在研究的多组分介质的质量分数的问题。更具体地说，我想知道是选择简化状态模型（如 reduceX = true;）还是全状态模型（如 reduceX = false;）。

该模型目前处于简化状态，并且似乎可以正常工作。对我来说，利用 sum(X) = 1 这个事实似乎是个好主意。但是，我在 Modelica.Media-package 的文档中发现了这一点

> “（...）虽然这种模型（全状态模型）更重，因为它提供了一个额外的状态变量，它不太容易出现数字和/或符号问题，这可能是由该约束引起的（在简化状态模型中）。”

是否有人碰巧知道这些“数字和/或符号问题”是否值得担心，或者是否有任何其他原因不使用简化状态模型？或者就此而言，使用全状态模型的任何其他好处？

任何有关此事的帮助或想法将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T12:05:45.303

两种选择哪个更好取决于具体情况。全状态模型具有比严格必要的状态更多的状态，例如，当您想要线性化模型并使用线性化版本执行某些操作时，这会给您带来麻烦。这也可能导致符号例程出现问题（索引减少，但多组件媒体和流通常不需要这样做）。如果“最后一个”组分质量分数趋于零，则简化状态模型可能导致数值上的不良情况。它将根据 1 - Sum(x[1:n-1] 或类似的值计算，这意味着您减去两个大小几乎相同的数字，这会导致有效数字的取消和准确性降低。我希望没有单向答案这有帮助。

/休伯图斯

# sql-server - 在 SQL Server 行中查找和删除重复的列值

> ID：11737765
> 
> 赞同：1
> 
> 时间：2012-07-31T10:08:57.703
> 
> 标签：sql-server, tsql, sql-server-2008-r2, duplicates

是的，另一个 SQL 重复问题:)

我有一个包含多`phone number`列的 SQL Server 2008 R2 表，看起来像：

```
ID   Tel1   Tel2   Tel3   Tel4   Tel5   Tel6
 1    123    456    789   NULL   NULL   NULL
 2    123    456    123    123   NULL   NULL
 3    456    789    123    456   NULL   NULL 
```

我想从每一行中删除重复的电话号码 - 例如，在第 2 行中，我需要将 Tel3 和 Tel4 设为 NULL，在第 3 行中我需要将 Tel4 设为 NULL。我不需要检查行之间的重复项 - 相同的电话号码可以存在于多行之间，而不是同一行的不同列中。

谁能建议摆脱这些重复项的最佳方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T10:21:51.977

[Sql Fiddle 在这里](http://sqlfiddle.com/#!3/6d247/3)。

```
update PhoneNumbers
   set Tel2 = case when Tel1 = Tel2 
                   then null 
                   else Tel2 end,
       Tel3 = case when Tel3 in (Tel1, Tel2) 
                   then null 
                   else Tel3 end,
       Tel4 = case when Tel4 in (Tel1, Tel2, Tel3) 
                   then null 
                   else Tel4 end,
       Tel5 = case when Tel5 in (Tel1, Tel2, Tel3, Tel4) 
                   then null 
                   else Tel5 end,
       Tel6 = case when Tel6 in (Tel1, Tel2, Tel3, Tel4, Tel5) 
                   then null 
                   else Tel6 end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T10:13:59.920

`UNPIVOT`您可以使用...找到它们

```
select id, telNo 
from phonenumbertable
unpivot 
( telNo for tel in (tel1, tel2, tel3, tel4,tel5, tel6)) as u    
group by id,telno
having COUNT(telno)>1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T10:14:02.143

一种可能的方法是像这样更新它：

```
update tablename
set Tel6 = null
where Tel6 = Tel5 or Tel6 = Tel4 or Tel6 = Tel3 or Tel6 = Tel3 or Tel6 = Tel2 or Tel6 = Tel1 
```

然后对其他列（第一列除外）执行相同的更新（where 子句中的比较较少）。

# php - 如何在表单元素中挂钩后验证功能

> ID：11737766
> 
> 赞同：1
> 
> 时间：2012-07-31T10:09:01.760
> 
> 标签：php, zend-framework2

我正在编写一个更高级的文件表单元素，更多的是一个显示当前加载的上传图像以及验证图像大小等的小部件。

如果文件通过验证，我希望表单元素本身将文件复制到可公开访问的文件夹中。这将意味着 a) 可以显示图像，并且 b) 如果整个表单没有验证，用户不需要重新上传图像。

无论如何，这是背景故事，但基本上我需要弄清楚如何从表单元素中获取函数以在表单验证该元素时运行。类似于在表单元素类中创建 onValidate() 函数。

最重要的是，我需要一个不会溢出到控制器（或尽可能少）的解决方案。我正在努力寻找一种干净的方法来实现这一点。

我想做这样的事情......

```
class File extends Element implements InputProviderInterface
{

....

public function isValid()
{
    if ( $isValid = parent::isValid() ) {
        echo "Hi there, glad you called";
    }

    return $isValid;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T17:19:52.827

该`Zend\Form\Element::getValidator()`函数将在每次验证运行时调用。

我认为您应该调用一个担心复制文件的类。也许您想引发一个事件以使其更加解耦。

验证和过滤现在是 InputFilter 类的一部分。您的目标是编写一个专用的验证器并将其与您的元素硬连接。

如何实现这一点的一个例子，看看[Zend\Form\Element\Select](https://github.com/zendframework/zf2/blob/master/library/Zend/Form/Element/Select.php)，它作为一个硬连线`InArrayValidator`的`onValidate()`方法。

# css - 如何设置格式单选按钮的样式

> ID：11737767
> 
> 赞同：0
> 
> 时间：2012-07-31T10:09:07.673
> 
> 标签：css, ruby-on-rails, radio-button, formtastic

我的客户想要一个红绿灯风格的评论表格。垂直排列的单选按钮，颜色为绿色、黄色和红色。

我可以完成对齐，但无法设置按钮的样式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:20:28.497

单选按钮只是圆圈。您不能使用 css 更改它们的颜色，但您可以使用所需颜色创建一个像单选按钮的图像，并使用 javascript 和隐藏的输入使其充当单选按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:13:49.497

众所周知，单选按钮等难以在 CSS 中设置样式。如果您真的需要对它们进行样式设置，基于 Javascript 的解决方案通常是首选方法。

[http://ryanfait.com/resources/custom-checkboxes-and-radio-buttons/](http://ryanfait.com/resources/custom-checkboxes-and-radio-buttons/)

# java - 评估 100 * 2.55 值时得到错误结果

> ID：11737768
> 
> 赞同：5
> 
> 时间：2012-07-31T10:09:17.560
> 
> 标签：java

我使用以下方法得到错误的结果。

```
public double evaluate(final double leftOperand, final double rightOperand) {
        Double rtnValue = new Double(leftOperand * rightOperand);
        return rtnValue.doubleValue();
    } 
```

输入参数值为：leftOperand=100 and rightOperand=2.55

我得到了错误的答案： **254.99999999999997**

正确答案是**255.0**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T10:10:29.933

这是由于[浮点精度问题](http://en.wikipedia.org/wiki/Floating_point#Accuracy_problems)。不可能在 64 位内表示所有有理数。这些数字以[IEEE 754 格式](http://en.wikipedia.org/wiki/IEEE_754-2008)存储。

如果您正在创建游戏，这已经足够了，甚至浮动也可以。但如果你在做一些金融，它应该是正确的。然后你可以使用[`java.math.BigDecimal`](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html). 它比它慢得多，`double`但它是正确的。而且它需要更多的内存，因为你在内存中有一个精确的值。这是一个关于如何使用[BigDecimal](http://www.opentaps.org/docs/index.php/How_to_Use_Java_BigDecimal%3a_A_Tutorial)的不错的教程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T10:10:40.500

利用`BigDecimal`

```
BigDecimal bd = new BigDecimal("100");
BigDecimal ans = bd.multiple(new BigDecimal("2.55"));
System.out.println(ans); 
```

**也可以看看**

*   [工作 IDE One 演示](http://ideone.com/cnQDb)

*   [在 Java 中使用 double 保持精度](https://stackoverflow.com/questions/322749/retain-precision-with-doubles-in-java)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-31T10:28:48.563

**使用 Math.round()。**

```
public static double evaluate(final double leftOperand, final double rightOperand) {
        Double rtnValue = new Double(leftOperand * rightOperand);
        return Math.round(rtnValue.doubleValue());
    } 
```

# magento - 我如何集成 magento 1.7.0 和 magento 1.7.2

> ID：11737769
> 
> 赞同：0
> 
> 时间：2012-07-31T10:09:22.693
> 
> 标签：magento

我已经比较了 magento 1.7.2 的文件和我在 1.7.0 中的项目并覆盖了新文件

但我的问题是如何将我的数据库合并到 magento1.7.2 数据库中

`catalog_category_flat_store_1`,`catalog_product_flat_1`

这两个表存在于我的项目中 - magento 1.7.0 但不存在于 magento1.7.2

我如何合并数据库

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:03:45.523

1.  没有 Magento 1.7.2。当前版本是 1.7.0.2。
2.  这种类型的操作不是“集成”。在用新版本文件覆盖 1.7.0.0 文件、清除缓存和浏览任何页面后，您的数据库将就地升级。

# java - 如何将文本文件转换为xml

> ID：11737770
> 
> 赞同：1
> 
> 时间：2012-07-31T10:09:26.240
> 
> 标签：java, android

我想将其转换`text file`为`xml file`.我有大量的字符串，但我不想直接写在 xml 中。

所以我现在制作了一个文本文件，我想转换它

将文本文件转换为 xml 格式，但是当我运行此文件时没有输出。这是我的

代码：

```
public void convert() throws Exception {

 String text[]=new String[10];

 FileOutputStream fout = new FileOutputStream("res/values/mysml.xml");

 OutputStreamWriter out = new OutputStreamWriter(fout);  

 InputStream in= getAssets().open("myText.txt");

 Scanner scn = new Scanner(is);

for(int i=0;i<10;i++)

text[i]=bin.readLine();

out.write("<?xml version=\"1.0\"?>\r\n");  

out.write("<resources>\r\n");  

for (int i = 0; i < 10; i++){

out.write("<item>"+text[i]+"</item>");

}

out.write("</resources>");

out.flush();

out.close(); 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T10:27:12.093

据我了解，您希望在运行时动态创建应用程序`res/values/`文件夹中的 xml。我认为这是不可能的，因为您只有应用程序资源的读取权限。不要将您的 xml 存储到您的`res`文件夹中，而是尝试使用内部或外部内存。有关 android 存储选项的更多信息，请参见[此处](http://developer.android.com/guide/topics/data/data-storage.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T10:44:22.430

如果**必须**这样做，请使用 StAX。您可以以更简单的方式打开关闭标签，并且作者也会处理您的文件。

```
XMLOutputFactory output = XMLOutputFactory.newInstance();
XMLStreamWriter writer = output.createXMLStreamWriter(new BufferedWriter(new FileWriter(new File(FILE_PATH))));
writer.writeStartDocument("UTF-8","1.0");
// Write Whatever file you have as string
writer.flush();
writer.close(); 
```

StAX 附带 JDK 1.6

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T10:17:35.093

尝试

```
BufferedReader reader=new BufferedReader(new InputStreamReader(in));

String line=null;
out.write("<?xml version=\"1.0\"?>\r\n");  
out.write("<resources>\r\n");  
while((line=reader.readLine())!=null)
{
  out.write("<item>"+line+"</item>");
}
out.write("</resources>");
out.close(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T10:17:51.660

```
for(int i=0;i<10;i++){
    text[i]=bin.readLine();
} <-----

out.write("<?xml version=\"1.0\"?>\r\n");  

out.write("<resources>\r\n"); 

for (int i = 0; i < 10; i++){
    out.write("<item>"+text[i]+"</item>");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T10:18:36.400

要刷新到流，请在此处添加此行：

```
out.write("</resources>");
//line
out.flush();

out.close(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-14T13:37:09.787

[使用http://www.xml-sitemaps.com/](http://www.xml-sitemaps.com/)检查您的站点。

在滚动窗口中进行更改，例如在子文件夹中添加 html 文件。如您所见，将编码放入其中。

不要保存网页中的 XML 文件。它将在窗口中为您提供未更改的代码。

从滚动窗口复制文本。将其粘贴到空白记事本页面中。

将其保存为“sitemap.xml”。

请记住，将引号保存为 xml 文件。

# c# - 按进程获取电池使用情况

> ID：11737773
> 
> 赞同：3
> 
> 时间：2012-07-31T10:10:15.630
> 
> 标签：c#, process

我有一个代码（在 c# 中）用于管理我的计算机中的所有进程。

我使用[PerformanceCounter](http://msdn.microsoft.com/fr-fr/library/system.diagnostics.performancecounter%28v=vs.90%29.aspx)类来查找在一个特定进程中链接的所有值。

例如，此代码检索了 Firefox 的处理器时间使用：

```
PerformanceCounter processorTime = new PerformanceCounter("Process", "% Processor Time", "firefox");

double processTime = 0;

while(true){
    processTime = processorTime.NextValue();
} 
```

另外，我知道如何检索我的电池百分比：

```
PowerStatus power = SystemInformation.PowerStatus;
float secondsRemaining = power.BatteryLifePercent;
if (secondsRemaining >= 0)
{
    kpiBattery.batteryLevel = (secondsRemaining * 100).ToString();
} 
```

我想按过程而不是全局获得使用电池。

例如，在使用“firefox”的过程中，使用了多少电池？

我知道我想在进程启动和进程被终止时获取电池电量，并有所作为，但是，这不是真正的电池使用水平，因为在开始和结束时间进程之间，可能还有很多其他进程正在运行，并且也消耗电池。

如果您有任何想法，或者您知道解决方案，我很感兴趣。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T10:15:14.800

正如您已经说过的，许多进程可以同时运行。此外，电池使用量与 CPU 使用率没有直接关系。它可能是 HDD 活动、图形芯片等。因此，无法计算每个进程的足够电池使用量。

# .net - .NET 本地化 - 日文字符显示为方框

> ID：11737777
> 
> 赞同：1
> 
> 时间：2012-07-31T10:10:28.690
> 
> 标签：.net, localization, fonts

我正在通过附属程序集本地化 WinForms 应用程序。问题是表单标题、组框文本和组合框项等元素显示为框。标签和按钮文本等其他元素显示正常。所有这些元素都使用相同的字体设置。

原因之一可能是使用的字体中缺少日文字符，但其他元素使用相同的字体显示良好。GroupBox、ComboBox 等是否在内部使用其他字体？

我正在通过在代码中显式更改线程文化来在英文 Windows 7 x64 上测试我的应用程序。表单标题字体可以绑定到系统字体（当我使用带有日语语言包的 Win 7 时可能会改变）但是 ComboBoxes 和 GroupBox 标题呢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:24:39.537

这是一些 Windows 控件（如文本框、组合框和列表框）中出现的老问题。我们在较旧的 Windows 版本（2000，XP）中遇到了这个问题，但我认为它必须在 Win7 中消失。尝试更改您的系统区域设置（在“区域设置”中的某处称为“非 Unicode 程序的语言”），然后运行您的程序以查看会发生什么。如果它运作良好 - 那么这不是你的错，你可以放松，因为这些文本对于日本用户来说是正常的。

# jquery - Ajax.BeginForm() 不发送提交按钮的名称/值

> ID：11737779
> 
> 赞同：1
> 
> 时间：2012-07-31T10:10:30.167
> 
> 标签：jquery, asp.net-mvc-3, asp.net-ajax

我有以下代码，当我单击提交按钮时，它的名称和值没有被发送到服务器

```
@using(Ajax.BeginForm(new AjaxOptions{Url = "http://localhost/controller/action"}))
{
    <button name="action" type="submit" value="Save">
        <span>Save</span>
        <!-- More HTML tags here -->
    </button>
} 
```

我查看了`jquery.unobtrusive-ajax.js`文件，看看它是否应该发送被单击的按钮的名称/值，并找到了将这些值作为属性附加到表单的代码，该表单稍后在发布请求中传递。

```
$("form[data-ajax=true] :submit").live("click", function (evt) {
    var name = evt.target.name,
        form = $(evt.target).parents("form")[0];

    $(form).data(data_click, name ? [{ name: name, value: evt.target.value }] : []);

    setTimeout(function () {
        $(form).removeData(data_click);
    }, 0);
}); 
```

的值`evt.target.name`和`evt.target.value`包含来自注册点击的按钮标记内的 HTML 元素的名称/值。

`evt.target`我设法通过替换上面的代码来让它工作，`evt.currentTarget`但我有点担心这可能会产生意想不到的副作用。

有没有更好的方法将提交按钮的名称/值发送到服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:05:06.447

我已经重现了您描述的问题，并且您提出的代码修复似乎对我有用。

我可以理解您不愿意修改标准`jquery.unobtrusive-ajax.js`库，因为您必须记住在发布新版本时合并您的更改。一个更好的选择是提交一个补丁，以便您的修复可以被审查，并有望被纳入标准库。我不知道解决这个问题的最佳方式，但我相信大部分 ASP.NET 代码现在都是开源的，[包括 MVC](http://weblogs.asp.net/scottgu/archive/2012/03/27/asp-net-mvc-web-api-razor-and-open-source.aspx)，并且微软已经开始接受来自社区的代码贡献。我建议查看[http://aspnetwebstack.codeplex.com/](http://aspnetwebstack.codeplex.com/)了解更多信息。

作为更改库的替代方法，您是否考虑过消除在按钮中包含子元素的需要？如果您的按钮仅包含文本（并且没有标签），则标准库可以正常工作并发布按钮的名称和值。如果您需要图像，您可以使用 CSS background-image 属性而不是嵌套的 img 标签。

# asp.net-mvc-3 - MVC 客户端验证

> ID：11737781
> 
> 赞同：0
> 
> 时间：2012-07-31T10:10:31.990
> 
> 标签：asp.net-mvc-3, validation, jquery, client-side

学习 MVC 3，我正在尝试使用 AJAX 在 MVC 中使用客户端验证：

我在文章**Call MVC 3 Client Side Validation Manually for ajax posts**中包含了建议，但这对我不起作用，它仍然认为表单是有效的。我错过了什么？？

我在我的申请中包含了以下内容：

**根 web.config 文件：**

```
<appSettings>
    <add key="webpages:Version" value="1.0.0.0" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings> 
```

**布局页面脚本：**

```
<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/modernizr-1.7.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")" type="text/javascript"></script> 
```

**我的模型：**

```
[Table("Person")]     
public class Person
    {
        [Key]
        public int PersonID { get; set; }
        [Column("FullName")]
        [Required(ErrorMessage = "Give me a name.")]
        public string NameFull { get; set; }
        [Required(ErrorMessage = "Give me an email.")]
        public string EmailAddress { get; set; }
        [Required(ErrorMessage = "Give me a mobile number.")]
        public string MobileNo { get; set; }
        [ForeignKey("Agency")]
        [Required(ErrorMessage = "Give me an agency.")]
        public int AgencyID { get; set; }
        public virtual Agency Agency { get; set; }
    } 
```

**执行 ajax 调用的方法（触发 onclick 事件）：**

```
function LoadPage(SFORM, SACTION, SMETHOD) {
    $('#divLoading').slideDown(1);
    var doc = document.getElementById(SFORM)
    var dataform = $(doc).serialize();
    var $form = $(doc);
    if ($form.valid()) { 
        //Ajax call here 
        $.ajax({
            type: SMETHOD,
            url: SACTION,
            data: dataform,
            complete: function () {
                $("#divLoading").slideUp(1, function () { FinishLoad() });

            },
            success: function (data) {
                $("#divMain").html(data)

            }
        });
    }
} 
```

**视图（.cshtml）：**

```
<form id="frmCreate" name="frmCreate">
    @Html.ValidationSummary(true)
            <fieldset>
                <legend>Person</legend>

                <div class="editor-label">
                    @Html.LabelFor(model => model.NameFull)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(model => model.NameFull)
                    @Html.ValidationMessageFor(model => model.NameFull)
                </div>

                <div class="editor-label">
                    @Html.LabelFor(model => model.EmailAddress)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(model => model.EmailAddress)
                    @Html.ValidationMessageFor(model => model.EmailAddress)
                </div>

                <div class="editor-label">
                    @Html.LabelFor(model => model.MobileNo)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(model => model.MobileNo)
                    @Html.ValidationMessageFor(model => model.MobileNo)
                </div>

                <div class="editor-label">
                    @Html.LabelFor(model => model.AgencyID, "Agency")
                </div>
                <div class="editor-field">
                    @Html.DropDownList("AgencyID", String.Empty)
                    @Html.ValidationMessageFor(model => model.AgencyID)

                </div>

                <p>
                   <input type="button" value="Create" onclick="LoadMenuItem('frmCreate','@Url.Action("Create", "Person")', 'POST')" />
                </p>
            </fieldset>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:24:06.180

似乎已经弄清楚了，看来您必须使用`@using (Html.BeginForm(null, null, FormMethod.Get, new { name = "validator", id = "validator" }))`创建表单而不是标准标签，然后使用要验证的视图底部的脚本分配要验证的表单`$.validator.unobtrusive.parse("#validator");`

这样做的好处是，在您的布局页面上，您可能有一个具有不同 ID 的“父表单”，其中可能包含您可能希望使用经过验证的表单发布的隐藏字段，您所要做的就是发布父表单，但是验证仍将发生在您在`$.validator.unobtrusive.parse("#validator");`部分视图的脚本中分配的表单上。

# asp.net-mvc - 在 onclick 事件中使用 iframe

> ID：11737785
> 
> 赞同：0
> 
> 时间：2012-07-31T10:10:42.613
> 
> 标签：asp.net-mvc, visual-studio-2010, kendo-ui

我正在使用 kendoUI。我的拆分器在左窗格、中心窗格和右窗格中有三个视图。我已经使用 iframe 在拆分器中加载了左窗格和中心窗格视图，第三个视图是空的。

我的中心窗格中的视图包含一个“详细信息”按钮，当我单击此按钮时，相应的详细信息必须显示在右窗格中的视图页面上。

有什么建议么..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:08:33.563

您可以使用 Splitter API 提供的[ajaxRequest](http://docs.kendoui.com/api/web/splitter#ajaxrequest)方法来表示应该从您传递的某个 URL 加载#rightpane，如果需要，您还可以传递其他数据。试一试，真的很方便。

# sql-server-2008 - T SQL 序号列

> ID：11737793
> 
> 赞同：0
> 
> 时间：2012-07-31T10:11:10.047
> 
> 标签：sql-server-2008, rollback

> **可能重复：**
> [在 SQL Server 中读取并增加 int 值](https://stackoverflow.com/questions/7408414/read-and-increment-int-value-in-sql-server)

我目前正在研究关系数据库中的“双重记账”。

根据文章，它引用

“'POSTING'表的主键或主键的一部分应该是系统生成的序列号。它还应该以序列中不会出现间隙的方式生成（例如通过事务回滚） )。这是确保不删除任何条目的一部分。

我正在努力寻找实现这一目标的方法。我不能使用标识列，因为事务回滚，所以我的“发布”表有一个名为 seqNum 的列，将用于此，但我如何确保该列中的值是按顺序排列的。我们有很多用户可以同时使用我们的网站。

在提交事务之前，我是否必须使用表锁来确保对该表的顺序访问？但是怎么做？

我目前正在使用 Microsoft Sql Server 2008。

# css - Codeigniter nivoslider 图像和 css 背景图像未显示？

> ID：11737798
> 
> 赞同：0
> 
> 时间：2012-07-31T10:11:26.467
> 
> 标签：css, codeigniter

我正在用 CI 写一个网页。我是新手。我无法在页面上显示我的图像文件。我的目录结构是

```
+application
+system
+assets
  +css
  +js
  +images 
```

我在一部分中使用了 nivoslider，这里是 div 部分：

```
<div id="slider-nivo">
<img src="<?php echo base_url(); ?>assets/images/nivoslider1.jpg" alt="" />
<img src="<?php echo base_url(); ?>assets/images/nivoslider2.jpg" alt="" />
<img src="<?php echo base_url(); ?>assets/images/nivoslider3.jpg" alt="" /> 
```

而且在 css 中有一个部分纹理菜单，我不能使背景图片工作：

```
 #sidebar #sidebar-content #menu  li {background-image: url('../images/menu_li.png'); 
```

如何在视图和 CSS 背景中显示图片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:36:54.440

我找到了 。这是一个权限错误。我已经授予其他人读/写的权利，现在它现在可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:31:02.887

尝试这样的事情

```
<img src="<?php echo base_url(); ?>/assets/images/nivoslider3.jpg" alt="" /> 
```

也许，你`base_url`不是`http://example.com/`，但`http://example.com`你得到`http://example.comassets/images/nivoslider1.jpg`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T21:04:17.890

@Vukašin 通常在回显 *base_url()* 函数后不需要前斜杠。

我在将 nivoslider 实施到 codeigniter 时遇到了问题，并且在 codeigniter 论坛上看到它不是很好推荐的东西。我决定实现 jquery 循环所有插件。它为我完成了所有工作。

# c++ - 如何保持 WiFly 屏蔽连接以发送或接收缓冲区（Arduino，客户端）

> ID：11737799
> 
> 赞同：0
> 
> 时间：2012-07-31T10:11:28.723
> 
> 标签：c++, client, wifi, arduino

如何保持[WiFly](https://www.sparkfun.com/products/9367)屏蔽连接以从缓冲区发送或接收？

我需要让它与服务器保持连接状态，并等待服务器多次发送数据。

我已经测试过，但是看到它只能从服务器接收一次，然后它就不能再接收了，除非我关闭连接并重新连接。但我不想重新连接！

代码：

```
loop{
    Package sendbuf;  //Package is a structure for converting buffer to Package struct
    sendbuf.header = 0xaa;
    if (client.connect())
        logon(sendbuf,client); //Send message to server; request log in.

    while (client.connected()) {
        //=====================================//
        //      while receive buffer           //
        //=====================================//

        if (client.available()) {
            unsigned char rxBuffer[256] = {};
            delay(10);

            //=======Receive buffer process=======
            int index=-1;
            do{
                index++;
                rxBuffer[index] = client.read();

                if (rxBuffer[index] == 0xff)
                {
                  index--;
                }
            } while (client.available());

            Package* buf = (Package*)rxBuffer;
            int result = readBufferfromServer(buf);

            if (result == 2)  //result:2 mean log in is a success!
            {
                security(sendbuf, client); //Send security message to the server.
            }
            else
                if (result == 1)  //result:1 mean security checking is a success!
                {
                    //Do something
                }

        }// end of client avaliable
    } 
```

# jquery - 动态克隆创建的表中的遍历

> ID：11737800
> 
> 赞同：0
> 
> 时间：2012-07-31T10:11:30.800
> 
> 标签：jquery, html, html-table, cloning

我创建了一个页面，在其中执行搜索，产品数量以行的形式返回，其中包含名称、价格和所有内容。这些行是使用`clone`jQuery 的特性动态创建的。每行都有一个复选框，也是通过克隆创建的。

我现在正在尝试的是遍历每一行并根据复选框是否被选中来获取每一行中的值。但是在动态克隆的表中，遍历似乎是一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T23:52:35.843

我希望我正确理解了您的挑战。此示例显示一个警报，其中包含选中复选框的克隆行的复选框值，忽略未选中的复选框。虽然我确定这不是您正在寻找的内容，但您可以以此为例说明如何遍历克隆表。

[这是 jsFiddle 上的示例。](http://jsfiddle.net/seanmcmills/UvUGm/)

```
<!DOCTYPE html>
<html>
<head>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>

  <script type="text/javascript">

    $(document).ready(function() {

      var orig_table_rows = $('#original_table').children().clone();

      $("#new_table").append(orig_table_rows);

      orig_table_rows.children().each(function() {
        $(this).find("input:checked").each(function() {
          alert( $(this).val() );
        });
      });

    });

  </script>
</head>
<body>

original table:
<table id="original_table" style="border:1px solid red;">
  <tr>
    <td><input type="checkbox" name="checkbox_name" value="not_checked_value"></td>
    <td>name</td>
    <td>price</td>
    <td>everything</td>
  </tr>
  <tr>
    <td><input type="checkbox" name="checkbox_name" value="checked_value" checked></td>
    <td>name</td>
    <td>price</td>
    <td>everything</td>
  </tr>
  <tr>
    <td><input type="checkbox" name="checkbox_name" value="another_checked_value" checked></td>
    <td>name</td>
    <td>price</td>
    <td>everything</td>
  </tr>
  <tr>
    <td><input type="checkbox" name="checkbox_name" value="not_checked_value"></td>
    <td>name</td>
    <td>price</td>
    <td>everything</td>
  </tr>
</table>

<br>
<br>

table using the cloned rows:
<table id="new_table" style="border:1px solid blue;">
</table>

</body>
</html> 
```

# javascript - 迭代 JSON 对象

> ID：11737801
> 
> 赞同：0
> 
> 时间：2012-07-31T10:11:32.957
> 
> 标签：javascript

我有以下 JSON 对象：

```
{
  "a1_1_on" : "on",
  "a1_1_thr" : "",
  "a1_2_on" : "on",
  "a1_2_thr" : "",
} 
```

我想使用 for 循环来检查字段，例如：

```
for (var i=1; i<2; i++) {
    //alarm
    var al = 'ai_' + i + '_on';
    //alarm threshold
    var althr = 'ai_' + i + '_thr'

    //console.log(form_infos.al);

    if(form_infos.al == "on" && form_infos.althr == "") {
        alert("Alarm for Analog " + i + "is on and you did not specified a threshold. Please specify a threshold before submittiing");
        return false;
    }
} 
```

但它表明`undefined`我是否这样做`console.log(form_infos.al)`。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T10:23:00.517

您的代码中有几个错误。

**首先**，在 JSON 中，':' 用于键和值之间，所以它必须是

```
{
  "a1_1_on": "on",
  "a1_1_thr": "",
  "a1_2_on": "on",
  "a1_2_thr": "",
} 
```

顺便说一下，这不是 JSON，而是一个简单的 Javascript 对象。JSON 将是该对象的字符串表示形式。

**其次**，您索引元素的字符串有错字，您有

```
 "a1..." 
```

在您的对象中，但您使用

```
 var al = 'ai_' + i + '_on'; 
```

在您的代码中（i 而不是 1）

**第三**，al不是form_infos的子对象，而是一个包含字符串的变量。要使用字符串索引访问子对象，请使用

```
form_infos[al] 
```

代替

```
form_infos.al 
```

就是这样

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T10:22:52.060

我会为此使用jQuery。例如：

```
var obj = {
  "a1_1_on" : "on",
  "a1_1_thr" : "",
  "a1_2_on" : "on",
  "a1_2_thr" : ""
}

$.each(obj,function(i,value) {
    ...
}); 
```

[jQuery 每个引用](http://api.jquery.com/jQuery.each/)

# javascript - 使用 HTML5 和 JavaScript 将文件写入当前文件夹

> ID：11737802
> 
> 赞同：2
> 
> 时间：2012-07-31T10:11:38.260
> 
> 标签：javascript, html

您好我正在尝试使用以下代码使用 HTML 编写文本文件。

```
function onInitFs(fs) {
     fs.root.getFile('paths.txt', { create: true }, function (fileEntry) {
        fileEntry.createWriter(function (fileWriter) {                            
                        fileWriter.onwriteend = function (e) {
                            alert('Paths are Stored :-)');
                        };
                        fileWriter.onerror = function (e) {
                            alert('Write failed: ' + e.toString());
                        };
                        var bb = new (window.BlobBuilder || window.WebKitBlobBuilder)();
                        bb.append($.stringify(options));                            
                        fileWriter.write(bb.getBlob('text/plain'));
          }, errorHandler);
     }, errorHandler);

  } 
```

但据我所知，它存储在临时内存中。但我只想将文件放在放置此函数的同一文件夹中（HTML5）。例如，如果我正在运行来自域的文件`Project/html/`。当我调用该函数时，它应该将文本文件写入同一目录中。

请让我知道这是否可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:20:25.027

我想您知道它`FileWriter API`仍然仅受 Chrome 支持，因此在任何严肃的应用程序中它几乎都是一个 nono。`webkitStorageInfo.requestQuota()`但是，你有没有用`PERSISTENT`旗帜打电话？

这是保存文件所必需的。Afaik，Chrome 永远不会真正将文件写入磁盘。它几乎是一个沙盒环境，就像一个伪造文件系统的自己的小数据库。

但是这些知识只是来自我自己的小实验，如果我错了，有人会纠正我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T07:14:11.807

本文`PERSISTENT`更深入地解释了标志的使用和请求配额：http: [//www.html5rocks.com/en/tutorials/file/filesystem/](http://www.html5rocks.com/en/tutorials/file/filesystem/)

但`FileWriter`到目前为止只是一个草稿，它在 Firefox 的路线图中，但没有确定的日期：[https ://wiki.mozilla.org/Features/Platform/FileWriter](https://wiki.mozilla.org/Features/Platform/FileWriter)

# javascript - 无法在我的页面加载时调用参数化的 javascript 函数

> ID：11737811
> 
> 赞同：0
> 
> 时间：2012-07-31T10:11:57.890
> 
> 标签：javascript, asp.net

我有一个javascript函数如下：

```
 function textCounter(field, rem, maxlimit) {
        if (field.value.length > maxlimit)
            field.value = field.value.substring(0, maxlimit);
        else
            rem.value = maxlimit - field.value.length;
    } 
```

在这里，我试图根据另一个多行文本框（字段）中的字符串长度来设置文本框（rem）中的值。在我的页面加载中，我试图调用它，如下所示：

```
this.Page.ClientScript.RegisterStartupScript(this.GetType(), "testFunction", "textCounter(txtRemark," + txtRemarksRem.ClientID + ", '2000')", true); 
```

但这似乎不起作用。我在这里做错了什么。

我要解决的问题是多行文本框的 onkey up 和 keydown 属性我能够调用该函数并在计数器文本框（rem）中设置正确的值，但在页面加载时，它的值再次设置为默认值。如果有其他解决方案，请提出建议。

```
txtRemark.Attributes.Add("onKeyUp", "textCounter(this," + txtRemarksRem.ClientID + ", '2000')");
        txtRemark.Attributes.Add("onkeydown", "textCounter(this," + txtRemarksRem.ClientID + ", '2000')"); 
```

上面的代码似乎工作正常（在 keyup 或 down 上设置计数器值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:30:56.680

如果事件未附加到它，您必须同时传递文本框（rem）和文本框（字段）的客户端 ID。

```
this.Page.ClientScript.RegisterStartupScript(this.GetType(), "testFunction", "textCounter(" + txtRemark.ClientID + "," + txtRemarksRem.ClientID + ", '2000')", true); 
```

然后在你的 JS 函数中

```
function textCounter(f, r, maxlimit) {
        //get the refernce of both element in dom by their client id
        var field =  document.getElementById(f);
        var rem = document.getElementById(r);
        //now this code would run correctly
        if (field.value.length > maxlimit)
            field.value = field.value.substring(0, maxlimit);
        else
            rem.value = maxlimit - field.value.length;
    } 
```

# python - 支持模板和上下文机制的最简单的语言是什么？

> ID：11737817
> 
> 赞同：0
> 
> 时间：2012-07-31T10:12:22.640
> 
> 标签：python, django, templates, programming-languages, django-context

我需要找到从下载的文章中自动构建电子书的最简单方法。

我想自动生成目录，它将基于 HTML 模板。

我知道 python django 有模板和上下文机制，但是 django 对于我准备整个机制的人来说有点复杂。我不需要所有与网络相关的功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T10:20:59.807

恕我直言，如果您熟悉 Django：

*   如果您想构建命令行应用程序或抽象库，请查看[Jinja2](http://jinja.pocoo.org/docs/)模板引擎。
*   如果您正在寻找比 Django 更简单的 Web 框架，请查看[Flask](http://flask.pocoo.org/docs/)（Flask 使用 Jinja2 作为默认模板引擎）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:11:29.813

如果您想构建命令行应用程序，对于不了解 django 模板引擎的人 - 深入了解[`markdown`](http://daringfireball.net/projects/markdown/). 它周围有一些[图书馆](http://freewisdom.org/projects/python-markdown/)，希望你能找到你需要的东西。

# objective-c - 如何检查文件是否在 Cocoa 中被锁定？

> ID：11737819
> 
> 赞同：5
> 
> 时间：2012-07-31T10:12:26.750
> 
> 标签：objective-c, macos, cocoa, nsfilemanager

是否有任何 API 可以检查文件是否被锁定？我在类中找不到任何 API。`NSFileManager`如果有任何 API 可以检查文件的锁定，请告诉我。

我找到了与文件锁定相关的以下链接

[http://lists.apple.com/archives/cocoa-dev/2006/Nov/msg01399.html](http://lists.apple.com/archives/cocoa-dev/2006/Nov/msg01399.html)

我可以调用 – isWritableFileAtPath: on file。有没有其他方法可以查看文件是否被锁定？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-31T12:17:11.043

遵循代码对我有用。

```
NSError * error;
NSDictionary *attributes = [[NSFileManager defaultManager] attributesOfItemAtPath:filePath error:&error];
BOOL isLocked = [[attributes objectForKey:NSFileImmutable] boolValue];

if (isLocked) {
    NSLog(@"File is locked");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T10:39:52.840

我真的不知道这个问题的答案，因为我不知道 OS X 如何实现其锁定机制。

它*可能使用手册*`flock()` [页](http://developer.apple.com/library/prerelease/mac/#documentation/Darwin/Reference/ManPages/man2/flock.2.html)中记录的 POSIX 咨询锁定，如果我是你，我会用 C 编写一个~~10~~ 31 行的测试程序来显示`fcntl()`（[手册页](http://developer.apple.com/library/prerelease/mac/#documentation/Darwin/Reference/ManPages/man2/fcntl.2.html)）对您在 Finder 中所做的咨询锁定的看法。

类似（未经测试）：

```
#include <fcntl.h>
#include <errno.h>
#include <stdio.h>

int main(int argc, const char **argv)
{
    for (int i = 1; i < argc; i++)
    {
        const char *filename = argv[i];
        int fd = open(filename, O_RDONLY);
        if (fd >= 0)
        {
            struct flock flock;
            if (fcntl(fd, F_GETLK, &flock) < 0)
            {
                fprintf(stderr, "Failed to get lock info for '%s': %s\n", filename, strerror(errno));
            }
            else
            {
                // Possibly print out other members of flock as well...
                printf("l_type=%d\n", (int)flock.l_type);
            }
            close(fd);
        }
        else
        {
            fprintf(stderr, "Failed to open '%s': %s\n", filename, strerror(errno));
        }
    }
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-29T10:10:45.990

如有必要，也可以使用 POSIX C 函数确定不可变标志（OS X '文件锁定'）。不可变属性不是 unix 术语中的锁，而是文件标志。可以通过以下`stat`函数获得：

```
struct stat buf;
stat("my/file/path", &buf);
if (0 != (buf.st_flags & UF_IMMUTABLE)) {
     //is immutable
} 
```

如需参考，请参阅：[https ://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man2/stat.2.html](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man2/stat.2.html)

可以使用以下`chflags`函数设置不可变标志：

```
chflags("my/file/path", UF_IMMUTABLE); 
```

如需参考，请参阅：[https ://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man2/chflags.2.html](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man2/chflags.2.html)

# sql - 如何将 JOIN 中的多条记录作为列返回？

> ID：11737820
> 
> 赞同：1
> 
> 时间：2012-07-31T10:12:34.923
> 
> 标签：sql, sqlite, join

我有以下 SQL 语句（SQLite 3.0），它连接了两个表，结果是我每天有一条记录，当天的总计，但是将它加入到语言表中，它**每天给我五条记录**，一条用于每种语言。

```
SELECT 
re.day,
re.flashcardsAdded,
re.flashcardsTested,
re.flashcardsLearned,
re.totalPoints AS totalForDay,
la.language,
la.total AS totalForLanguage

FROM dpod_site_reportDays AS re
JOIN dpod_site_reportDayLanguageTotals AS la ON re.day=la.day
ORDER BY re.day DESC 
```

但是，**我希望每天只记录一条记录**，而不是例如“法语”是数据，我希望它是一个列名，其中该语言的总数作为该列的数据。

**如何更改 SQL 语句，以便在具有适当字段名称的同一记录中获得语言总计？**例如：

```
day | flashcardsAdded | flashcardsTested | flashcardsLearned | totalForDay | french | german | italian | russian | german 
```

![在此处输入图像描述](../Images/e44b3354642303000e29ee73d17ef5fb.png)

以下是表格：

```
CREATE TABLE dpod_site_reportDayLanguageTotals(
day VARCHAR(50), 
language VARCHAR(1024), 
total INT(12), 
extras VARCHAR(1024), 
idCode VARCHAR(1024), 
whenCreated VARCHAR(50), 
whenChanged VARCHAR(50), 
id INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL  UNIQUE)

CREATE TABLE dpod_site_reportDays(
day VARCHAR(50), 
flashcardsAdded INT(12), 
flashcardsTested INT(12), 
flashcardsLearned INT(12), 
journalPoints INT(12), 
readingPoints INT(12), 
correctionPoints INT(12), 
extrasData TEXT, 
totalPoints INT(12), 
extras VARCHAR(1024), 
idCode VARCHAR(1024), 
whenCreated VARCHAR(50), 
whenChanged VARCHAR(50), 
id INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL  UNIQUE) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T10:18:42.397

```
SELECT  
re.day, 
re.flashcardsAdded, 
re.flashcardsTested, 
re.flashcardsLearned, 
re.totalPoints AS totalForDay, 
Sum(CASE la.language WHEN 'french' THEN  la.total ELSE 0 END) AS french, 
Sum(CASE la.language WHEN 'german' THEN  la.total ELSE 0 END) AS german, 
Sum(CASE la.language WHEN 'italian' THEN  la.total ELSE 0 END) AS italian, 
Sum(CASE la.language WHEN 'russian' THEN  la.total ELSE 0 END) AS russian

FROM dpod_site_reportDays AS re 
JOIN dpod_site_reportDayLanguageTotals AS la ON re.day=la.day
GROUP BY re.day, 
re.flashcardsAdded, 
re.flashcardsTested, 
re.flashcardsLearned, 
re.totalPoints
ORDER BY re.day DESC 
```

# c++ - C++：将字符串中出现的十六进制 ascii 值转换为普通字符

> ID：11737821
> 
> 赞同：1
> 
> 时间：2012-07-31T10:12:46.893
> 
> 标签：c++, ascii

我有一个 std::string 包含正常的字母和数字，但所有标点符号（例如括号、方括号、逗号和冒号）都在它们的 ASCII 表示中（例如、`%28`和`%29`）。 `%2C``%3A`

解析我的字符串、保留“普通”字符并将十六进制值转换为它们的 ASCII 表示的最快方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T10:17:54.513

您可以使用例如该[`find`](http://en.cppreference.com/w/cpp/string/basic_string/find)功能来搜索`'%'`字符。如果接下来的两个字符是十六进制数字，则将这三个字符替换为实际字符。在你找到`'%'`.

您可以遍历字符串，将普通字符附加到另一个字符串，而不是进行就地替换，当您到达 a 时，`'%'`您检查它是否是有效的 URL 转义，并将正确的字符附加到输出字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T10:19:56.403

libcurl 具有[curl_easy_unescape](http://curl.haxx.se/libcurl/c/curl_easy_unescape.html)功能：

```
char *curl_easy_unescape( CURL * curl , char * url , 
        int inlength , int * outlength ); 
```

> 此函数将给定的 URL 编码输入字符串转换为“纯字符串”并将其返回到分配的内存区域。所有经过 URL 编码的输入字符（%XX，其中 XX 是两位十六进制数）都将转换为其二进制版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:48:49.557

这是一个就地版本：

```
void unescape(std::string & s)
{
    for (std::size_t r = 0, w = 0; r != s.size(); )
    {
        char digit;

        if (s[r] != '%')
        {
            ++r;
            ++w;
        }
        else if (r + 1 < s.size() && s[r + 1] == '%')
        {
            r += 2;
            ++w;
        }
        else if (r + 2 < s.size()) && is_hex(s, r + 1, digit))
        {
            s[w] = digit;
            ++w;
            r += 3;
        }
        else
        {
            // error, throw exception?
        }
    }

    s.erase(s.begin() + r, s.end());
}

bool is_hex(std::string const & s, std::size_t offset, char & result)
{
    unsigned char d1, d2;
    if (hex_digit(s[offset], d1) && hex_digit(s[offset + 1], d2))
    {
        result = d1 * 16 + d2;
        return true;
    }
    return false;
}

bool hex_digit(char c, unsigned char & value)
{
    if (c >= '0' && c <= '9') { value = c - '0'; return true; }

    if (c >= 'a' && c <= 'f') { value = c - 'a' + 10; return true; }

    if (c >= 'A' && c <= 'F') { value = c - 'A' + 10; return true; }

    return false;
} 
```

# oracle - oracle数据库中的NCLOB列与NVARCHAR

> ID：11737824
> 
> 赞同：0
> 
> 时间：2012-07-31T10:12:55.903
> 
> 标签：oracle, oracle11g

我必须在 oracle 表中存储可变长度的文本。它们中的大多数将少于 200 个字符，但其中一些偶尔会有数千个字符。

我很想将列定义为`NCLOB`，因为这种数据类型最多可存储 4 GB，但我想知道这样做会有什么问题，因为在 98% 的情况下，一`NVARCHAR`列就足够了。

*   插入后，这些值不会频繁更改。
*   将有数十万条记录。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:18:05.690

即使是`%2`，数据就是数据，对吧？您必须存储这些少数数据，因此您必须使用`CLOB`.

# ios - 在杯子上合并和包装 UIImage

> ID：11737828
> 
> 赞同：2
> 
> 时间：2012-07-31T10:13:12.893
> 
> 标签：ios, xcode, ios5, uiimage

我有两个图像，我想合并这两个图像，就像我有一个杯子的图像，第二个图像是任何图像。现在我想与它合并到杯子中，我怎么能做到这一点，就像放置在杯子上的图像必须首先包裹起来，就像我从相机拍摄照片然后将其粘贴到杯子中一样，但是我如何包裹那个图像！

![](../Images/243c8ab041292a02e363e22edf91cc60.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T00:22:49.577

@Akhil：您问的是一个非常复杂的问题，超出了简单的 iOS 开发领域。如果您的问题具体是“将图像包装在杯子上”，那么可以将其处理为“将纹理应用于网格对象”，在这种情况下，您将希望使用 OpenGL ES，并具有预定义的模型（使用 UV 映射）将图像/纹理应用到。

此外，您可以使用 OpenGL 并执行网格网格平移（网格变形）——也就是说，您将在网格上拍摄图像（具有（网格）分辨率），然后操纵所有点以创建变形影响。此外，GLKit 可能会在这个过程中提供帮助，Core Image 也可能会提供一个简单的解决方案。

如果你的问题是，我有一张随机图像，我想导出它的 3D 形状，然后将第二张图像应用于派生的形状并将它们合成在一起，这更加棘手，因为第一部分将采用高级图像处理来确定原始对象/选择形状。

以下是一些附加信息：

*   Apple 的 GLCameraRipple 示例代码：http: [//developer.apple.com/library/ios/#samplecode/GLCameraRipple/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/GLCameraRipple/Introduction/Intro.html)
*   关于图像变形的论文 (PDF)：[http ://www.seas.upenn.edu/~cse399b/Lectures/CSE399b-07-warp-mesh.pdf](http://www.seas.upenn.edu/~cse399b/Lectures/CSE399b-07-warp-mesh.pdf)
*   图像变形的 OpenGL 参考：http: [//paulbourke.net/dataformats/meshwarp/](http://paulbourke.net/dataformats/meshwarp/)
*   GLKit 教程：http: [//maniacdev.com/ios-5-sdk-tutorial-and-guide/glkit/](http://maniacdev.com/ios-5-sdk-tutorial-and-guide/glkit/)
*   Core Image 教程：http: [//maniacdev.com/ios-5-sdk-tutorial-and-guide/core-image-example/](http://maniacdev.com/ios-5-sdk-tutorial-and-guide/core-image-example/)
*   南大关于图像变形的讲义（PDF）：[http ://www.csie.ntu.edu.tw/~cyy/courses/vfx/05spring/lectures/handouts/lec03_morphing_4up.pdf](http://www.csie.ntu.edu.tw/~cyy/courses/vfx/05spring/lectures/handouts/lec03_morphing_4up.pdf)
*   来自 StackOverflow 的相关信息：[气泡效果中的 iOS 图像](https://stackoverflow.com/questions/11614162/ios-images-in-a-bubble-effect)

干杯和好运！

# c++ - 用零填充阵列 - openCV

> ID：11737831
> 
> 赞同：11
> 
> 时间：2012-07-31T10:13:25.867
> 
> 标签：c++, opencv

`cv::Mat`如何在 OpenCV 中用零填充数组（ ）？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-07-02T08:50:21.870

另一种填充图像的方法是使用[copyMakeBorder](http://docs.opencv.org/modules/imgproc/doc/filtering.html?highlight=copymakeborder#copymakeborder)函数：

```
 C++: void copyMakeBorder(InputArray src, OutputArray dst, int top, int bottom, int left, int right, int borderType, const Scalar& value=Scalar() ) 
```

然后用零填充就是这样

```
Mat image,image_pad;
copyMakeBorder(image,image_pad,1,1,1,1,BORDER_CONSTANT,Scalar(0)); 
```

最后，这里是[为您的图像添加边框](http://docs.opencv.org/doc/tutorials/imgproc/imgtrans/copyMakeBorder/copyMakeBorder.html)的教程。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-31T11:52:07.187

这是一种方法

```
cv::Mat img(100, 100, CV_8UC3);
cv::Mat padded;
int padding = 3;
padded.create(img.rows + 2*padding, img.cols + 2*padding, img.type());
padded.setTo(cv::Scalar::all(0));

img.copyTo(padded(Rect(padding, padding, img.cols, img.rows))); 
```

# .net - ASP.NET MVC 路由。空格和类别

> ID：11737837
> 
> 赞同：0
> 
> 时间：2012-07-31T10:13:40.903
> 
> 标签：.net, asp.net-mvc, url

我有一个主导航，其中一个列表项呈现一个动作：

```
[ChildActionOnly]
public ActionResult BuildMenu(String category = null) {
    ViewBag.SelectedCategory = category;
    return View("~/Views/Article/CategoriesList.cshtml", this.GetItems());
} 
```

其中`GetItems`方法是：

```
[NonAction]
public IEnumerable<String> GetItems() {
    return this.session.Query<Article>()
        .Select(x => x.Category)
        .Distinct().ToList()
        .OrderBy(x => x);
} 
```

发布文章时，可以指定如下类别：*`Fringe Division`*. 所以在地址栏中它看起来像*`Fringe%20Division`*.

在视图中（菜单部分）我有这个：

```
@model IEnumerable<String>
@{ Layout = null; }

<ul class="transparent-custom">
@foreach(var link in Model) {
    <li>@Html.RouteLink(
        link, 
        new { 
            controller = "Article", action = "Index", 
            category = link
        },
        new {
            @class = link == ViewBag.SelectedCategory ? "selected" : ""
        }
    )
    </li>
}
</ul> 
```

如果我在这里应用类似的东西`category = Url.ToUrlFriendly(link)`（用破折号或任何其他字符替换所有不可接受的字符），而它在地址栏中看起来很酷，我的控制器无法识别该类别（这很明显：它与原来的不同）：

```
public ActionResult Index(String category, Int32? page) {

    // there's no such a category in DB...

    ViewBag.CurrentCategory = category;
    if(category == "All") {
        return View(this.GetAllArticles().ToPagedList(page ?? 1, this.PageSize));
    }
    var entries = this.session.Query<Article>()
        .Where(c => c.Category == category)
        .OrderBy(d => d.CreatedOn);
        return View(entries.ToPagedList(page ?? 1, this.PageSize));
    } 
```

我如何以最好的方式处理它？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:20:24.557

我认为最好的办法是存储一个对 url 友好的类别 url 部分，例如，for `Fringe Division`，使用类似的东西`fringe-division`，它与类别信息一起存储。这样，它会在数据库和 uri 中保留类别。

如果你有的话，你可以让这个 url 组件的生成成为你的 CMS 的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:20:44.853

通常，您会将类别的 URL 友好名称作为附加列保存在数据库中，以便您可以针对该列进行查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:19:48.380

您还必须以相反的顺序执行此操作。如果您对某些内容进行编码（例如用破折号替换空格），那么您必须解码（用空格替换破折号）。类似于 Server.Encode 和相反的 Server.Decode。写一些 Url.DecodeUrlFriendly 函数。但如果您的字符串已经包含破折号，请小心。

# box-api - Box api v2“文件夹”响应太有限

> ID：11737844
> 
> 赞同：4
> 
> 时间：2012-07-31T10:14:07.093
> 
> 标签：box-api

我正在使用 Box v2.0 api 将 Box 集成到 iOS 应用程序中。

我遇到的第一个问题是“文件夹”api 请求对“条目”的 API 调用的响应太有限了。api 当前为每个文件夹“条目”返回的内容类似于：

```
"entries" : 
[
    {
        "sequence_id": "0",
        "type": "file",
        "id": "2631999573",
        "name":"IMG_1312.JPG"
    },
    {
        "type":"folder",
        "id":"2305623799",
        "sequence_id":"1",
        "name":"a child folder"
    }
] 
```

这意味着要检索子条目的基本元数据（大小、修改日期等），我必须为*每个*项目发出 REST 请求。这显然是非常低效的。

有没有办法在“文件夹/”响应中获得更丰富的元数据？可以通过在请求中提供合适的查询来过滤它。例如

```
GET /folders/980980989?fields=name,id,type,size,modified_at 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T12:12:09.693

@auny

这是非常非常低效的。例如，我们的 iOS 应用程序是一个文件查看器 - 当用户导航到 Box 目录时，他们会看到该目录中所有文件的列表（在表格视图中）。该视图由存储基本文件元数据（名称、大小、修改日期等）的本地“模型”备份。每个文件显示其名称、大小和修改日期。

*使用 v2 api Box 期望我们对目录中的每个*文件（可能是 100、1000 或更多）进行单独的 REST api 调用，以确定大小和修改日期。这对于移动应用程序来说是非常低效的。

不要忘记，通常使用移动设备的延迟（而不是带宽）会影响性能。好吧，带宽可能也不是很好，但是 100 次 REST 调用的延迟将是一个主要问题。

1 次 REST 调用来确定目录的基本元数据，即使这需要在响应中增加几 KB，也比 100 次单独的 REST 调用要好得多。

文件夹响应已经为每个目录条目提供*了一些*元数据，包含其他字段并不难，即使这些字段只能通过请求获得。

疯狂的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-31T18:38:41.003

是的，您必须查询每个子项才能在 V2 中获取其信息。没有其他方法

# sql-server - Sql Server 中的通用对象

> ID：11737847
> 
> 赞同：3
> 
> 时间：2012-07-31T10:14:13.417
> 
> 标签：sql-server

Sql Server 中的通用对象是什么意思？是否有任何对象在同一服务器中的每个和任何数据库中都可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T06:19:08.327

我认为您可能对通用对象模型/通用对象格式感到困惑 - 这是任何对象都可以（独立于技术）以可以跨技术比较的方式表示的想法。

例如，如果您要将它放在数据库的上下文中，您可能想查看您的 SQL Server User 表是否实际上与 Oracle User 表相同。

从理论上讲，有些东西可以让您从两个非常不同的 DBMS 中提取表的定义并测试相等性等。

这不是 SQL Server 概念——它甚至不是数据库概念本身。这只是一个数据/编程/IT概念。[您可能会发现相关](http://rd.springer.com/chapter/10.1007/978-3-642-00563-3_59)的有趣文章。

# oracle - Declare bind variables in SQL*Plus

> ID：11737849
> 
> 赞同：3
> 
> 时间：2012-07-31T10:14:20.107
> 
> 标签：oracle, sqlplus

I am using SQL*Plus. When I am using the below query, it is giving error

```
Error report:
ORA-06550: line 4, column 1:
PLS-00428: an INTO clause is expected in this SELECT statement 
```

Query

```
declare 
id varchar2(80) :='test123'; 
begin
select test_quote,test_id from order_link where id = 'test123';
end; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-31T10:29:01.053

Not sure why you're using a PL/SQL block for that. You aren't using the `id` you declare, and it would be better to give it a name different to the column name to avoid confusion.

You can declare a bind variable in SQL*Plus though, and select into that:

```
var l_test_quote varchar2(80); -- or whatever type/size you need
var l_test_id varchar2(80);

declare 
    l_id varchar2(80) :='test123'; 
begin
    select test_quote, test_id
    into :l_test_quote, :l_test_id
    from order_link
    where id = l_id;
end;
/

print l_test_quote
print l_test_id 
```

Note the `:` before the references to the variables defined outside the block, indicating they are bind variables. `l_id` is declared inside the block so it does not have a preceding `:`.

In this case you could also define `l_id` outside the block, and avoid PL/SQL while still using a bind variable for that:

```
var l_id varchar2(80);

exec :l_id := 'test123';

select test_quote, test_id
from order_link
where id = :l_id; 
```

Because the main query isn't PL/SQL any more (although the `exec` is; that's just a shorthand for a one-line anonymous block), you don't need to `select ... into` so you don't need to declare those variables.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T10:26:38.217

try this:

```
declare 
id varchar2(80) :='test123'; 
  v_test_quote order_link.test_quote%type;
  v_test_id    order_link.test_id%type;
begin
  select  test_quote,test_id 
  into    v_test_qoute, v_test_id 
  from    order_link 
  where   id = 'test123';
end; 
```

# java - 使用 RADIUS 的 RSA 新 pin 模式的服务器通信

> ID：11737850
> 
> 赞同：0
> 
> 时间：2012-07-31T10:14:21.437
> 
> 标签：java, security, authentication, rsa, radius

我正在 java 应用程序中的客户端上实现 RADIUS 身份验证过程。

RADIUS 服务器使用[RSA SecurID](https://en.wikipedia.org/wiki/SecurID)对用户进行身份验证。众所周知，[RSA SecurID](https://en.wikipedia.org/wiki/SecurID)使用令牌。当用户忘记了令牌的密码时，可以在服务器上将令牌设置为特殊的新密码模式，强制用户在下次登录尝试时设置新密码。

据我所知，与服务器的通信工作流程如下所示：

1.  客户端：使用通常的属性向服务器发送访问请求包。
2.  服务器：回复一个包，表示特殊的新pin模式
3.  客户端：向用户显示一个界面以输入新的密码。将包含新 pin 的包发送到服务器。
4.  服务器：回复一个包，说明已成功设置引脚。
5.  客户：显示一条确认消息并要求用户输入他使用令牌上的新密码创建的新密码。我认为这与步骤 1 中的包基本相同。
6.  服务器：如果 OK 则回复 Access-Accept 包，如果 Not-OK 则回复 Access-Reject

对于第 2、3、4 和 5 步，我不知道包结构是什么样的，因此无法在客户端上实现任何逻辑。有没有人知道服务器与令牌的通信处于新的 pin 模式？

干杯西蒙

使用的令牌如下所示。要创建有效的密码，您需要首先输入您的 PIN 并点击 7 下方的菱形键：

[![这](../Images/805844e36612156ec5a0938a9b259e1d.png)](https://i.stack.imgur.com/5J77d.jpg)
[（来源：[comprosec.ch](http://www.comprosec.ch/fileadmin/images/rsa/securid/SD520_450x297_72dpi_crop.jpg)）]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-15T09:57:21.563

事实证明，您需要查看在服务器的 RADIUS 数据包中发送的“回复消息”（类型 18）属性。这很 hacky，但它是官方的解决方案，因为 RADIUS 协议不支持这种状态（请参阅[RFC 2865](https://www.ietf.org/rfc/rfc2865.txt)）。与您的 RSA 联系人交谈，他们可以为您提供一个测试服务器和 2 个测试令牌来测试您的解析代码。

这是我到目前为止发现的：

*   新 PIN 模式进入

回复消息包含“输入具有 4 到 6 位数字的新 PIN：”

*   新 PIN 模式请求确认 PIN

回复消息包含“请重新输入新 PIN：”

*   新密码模式成功

回复消息包含“PIN 已接受”

*   下一个令牌代码模式开始

回复消息包含“输入新的令牌代码”

# java - 如何使用 Eclipse 发布在 Java 中创建的 Web 服务？

> ID：11737852
> 
> 赞同：0
> 
> 时间：2012-07-31T10:14:31.337
> 
> 标签：java, eclipse, web-services

我已经使用 Eclipse 在 Java 中创建了一个 Web 服务，现在我需要发布该 Web 服务。如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T10:17:19.983

您可以在 tomcat 服务器上部署用 java 开发的 ws，并且可以按照[如何在 Tomcat 6 上手动部署 Web 服务的说明进行操作？](https://stackoverflow.com/questions/2511547/how-to-manually-deploy-a-web-service-on-tomcat-6)

现在 TomCat7 可用，您必须查看此 PDF，它可以帮助您从 Eclipse 中在 Tomcat上部署[Web服务。](http://www.eclipse.org/webtools/community/education/web/t320/Deploying_a_web_service.pdf)它是自我解释的图形表示，正是您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T10:17:26.687

导出战争并将其部署到应用程序服务器。

# c++ - '对 Class::method() 的未定义引用'

> ID：11737853
> 
> 赞同：1
> 
> 时间：2012-07-31T10:14:39.013
> 
> 标签：c++, class, methods, header, instance

最近我一直在学习如何在类中创建方法，这样我只需要编写一次方法，对于我实例化的每个类，我都可以调用一个方法，它只适用于调用它的对象的变量，我知道在只使用 main.cpp 而没有头文件时如何做到这一点，但是当我使用类头文件和 cpp 时，我对如何编写这个感到困惑。
我有一个类似于我想要实现的代码示例：

```
#include <iostream>

using namespace::std;

class Object
{
public:
    int stuff;
    void manageStuff();
    Object();
};
void Object::manageStuff()
{
    stuff++;
}

Object::Object() : stuff(0) {}

Object object1, object2;

int main() {
  for (int i = 0; i < 10; i++)
  {
      object1.manageStuff();
      object2.manageStuff();
      cout << object1.stuff << "\n";
      cout << object2.stuff << "\n";
  }
} 
```

这很好用，允许我有两个 Object 实例和一个为每个实例独立工作的方法，这是我当前的项目：
main.cpp：

```
#include <iostream>
#include "Test.h"

using namespace std;

int main()
{

    Test test;

    for (int i = 0; i < 10; i++)
    {
        test.count(); // Here's my error "undefined reference to Test::count"
    }

    return 0;
} 
```

测试.cpp

```
#include <iostream>
#include "Test.h"

using namespace std;

Test::Test()
{
    //ctor
}

Test::~Test()
{
    //dtor
} 
```

测试.h

```
#include <iostream>

#ifndef TEST_H
#define TEST_H

class Test
{
    public:
        Test();
        virtual ~Test();
        void count();
        int counter();
};

#endif // TEST_H 
```

最后是 TestFunctions.h

```
#include <iostream>
#include "Test.h"

#ifndef TESTFUNCTIONS_H_INCLUDED
#define TESTFUNCTIONS_H_INCLUDED

void Test::count()
{
    Test::counter++;
    std::cout << Test::counter;
}

#endif // TESTFUNCTIONS_H_INCLUDED 
```

我敢肯定，对于经验更丰富的程序员来说，会有一些非常明显的错误，我看起来有点厚，但任何帮助将不胜感激
谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T10:18:45.500

我建议摆脱`TestFunctions.h`并添加 to 的`Test::count()`实现`Test.cpp`。目前，`TestFunctions.h`标头不包含在任何地方，因此您无法从 main 访问定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T10:20:29.257

您在头文件 (TestFunctions.h) 中定义（即实现）Test::count()，但您从未将它包含在任何地方，因此没有编译那里的代码。

您应该将其更改为 .cpp 文件，对其进行编译并将其与其他源文件链接。没有理由不将它放在 Test.cpp 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:22:17.123

将 TestFunctions.h 重命名为 TestFunctions.cpp，使其编译方式与 main.cpp 相同并链接。

或者，在某处包含 TestFunctions.h，例如 main.cpp

# r - R中的动态图

> ID：11737854
> 
> 赞同：1
> 
> 时间：2012-07-31T10:14:44.383
> 
> 标签：r, plot

例如，是否可以每 2 秒更新一次绘图？

或者，更好的是，只调用一个函数，在给定新的 x、y 值的情况下更新绘图？

附加信息 -

我正在开发一个神经网络，并希望在每次迭代后更新一个显示输出与目标的折线图。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:52:32.920

你是如何创建神经网络的？可以将代码插入到您已经在做的事情中，以更新您的情节。

包中有一些函数`tcltk2`会在指定的等待时间后运行代码，并允许其他函数在等待时运行，但这些函数在创建竞争条件或更改其他代码所依赖的对象时可能非常危险。您仍然需要一种在创建网络信息时访问网络信息的方法（如果它在另一个函数内部，这将非常困难），这可能也会减慢拟合代码的速度，因为它需要继续检查时间并进行其他计算。

最好将更新代码插入到拟合代码中，而不是取决于时间。如果您向我们展示更多有关您如何适应网络的信息（可重复的示例），那么我们可能会给出更详细的答案。

# hibernate - 休眠：保存多对多连接后集合不会重新填充

> ID：11737856
> 
> 赞同：0
> 
> 时间：2012-07-31T10:14:54.123
> 
> 标签：hibernate, collections, many-to-many

我只需要弄清楚为什么我的角色集合在保存（添加）后不会填充成员属性。我有两个表，用户和角色，以及连接表 UserRole。

```
public class User implements Serializable {
private int id;
@NotBlank(message = "{User.userName.notBlank}")
@AlphaNumeric(message = "{User.userName.alphaNumeric}")
private String name;
@NotBlank(message = "{User.password.notBlank}")
@AlphaNumeric(message = "{User.password.alphaNumeric}")
private String password;
private boolean enabled;
private boolean deleteSafe; 
@NotEmpty(message="{User.roles.notEmpty}")

private Set<Role> roles; <-- this is my problem 
```

这是我的 Hibernate XML 映射

```
<class name="User">
    <id name="id">
        <generator class="identity" />
    </id>
    <property name="name"></property>
    <property name="password"></property>
    <set name="roles" table="UserRoles" lazy="false">
        <key column="userId"></key>
        <many-to-many column="roleId" class="Role"></many-to-many>
    </set>
</class> 
```

这是简单的角色类

```
public class Role implements Serializable {
private int id; 
private String authority;
private String name; 
```

我的 UserRole 表只包含两列，userId 映射到 User 的 id，roleId 映射到 Role 中的 id。

我传递了一个带有名称、密码和一组角色的用户对象。此列表中的每个角色仅填充了 id。UserRole 表已正确保存，但我希望在保存后，我的 User 对象中的 Set 将填充权限和名称属性。

这些属性使用相同的映射填充在普通的“获取”用户中，我希望它在“保存”后会做同样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:59:06.150

休眠不会那样做。您基本上在这里有一个损坏的模型，并且休眠无法区分密码设置为 null 的角色和您希望它填充的虚拟角色。如果您只想将具有已知 ID 的角色分配给新创建的用户，请使用 session.load()。

```
for(long roleId : roleIds)
{
    newUser.getRoles().add(session.load(Role.class, roleId));
} 
```

session.Load 返回的角色是代理，在访问它们之前不会生成往返。

更新：如果您知道以后需要这些角色，那么急切加载它们会更好

```
for(Role role : session.CreateCriteria(Role.class).add(Expression.in("id", roleIds)).list())
{
    newUser.getRoles().add(role);
} 
```

# java - 为什么 Hibernate 认为 @GeneratedValue 从根本上是错误的？

> ID：11737859
> 
> 赞同：4
> 
> 时间：2012-07-31T10:15:08.917
> 
> 标签：java, hibernate

我只是在阅读 Hibernate 文档并在此页面上遇到了警告

[http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#d0e1150](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#d0e1150)

“警告 Hibernate 团队一直认为这样的结构是根本错误的。在使用此功能之前，请努力修复您的数据模型。” 关于部分标识符生成

有人可以更详细地向我解释一下这实际上有什么问题吗？为什么 Hibernate 看不起生成的值？这是否包括 Hibernate 中的自动递增值？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T10:24:09.227

警告不是关于在只有一个 id 字段的类上使用 @GeneratedValue 。警告是关于在复合键的一列中使用@GeneratedValue，这是一个非常奇怪的用例（12 年来从未见过这样的需求）。

所以警告是：如果您需要在复合键中使用@GeneratedValue，请检查您的模型，因为它很可能有问题。

如果您认为这不能回答您的问题，您能否提供一个可能需要此功能的示例？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:28:50.467

有一个代理标识符，它应该始终是在数据库级别被声明为主键的单个属性（以及列）。并且有一个业务标识符（也称为业务密钥），它具有业务含义并且可能由多个属性（以及列）组成。

生成单个代理标识符没有任何问题。Hibernate 团队最可能的意思是生成业务标识符的某些部分（在多个属性的情况下）是错误的。

# php - 将 POST 变量定义为 href 链接，target='blank'

> ID：11737864
> 
> 赞同：0
> 
> 时间：2012-07-31T10:15:19.600
> 
> 标签：php, html

我正在尝试编辑此代码以使其成为在新选项卡中打开的链接，但是无论我在代码中插入“target ='blank'”部分的任何位置，都会出现解析错误，请任何人帮助我。谢谢。

```
$websiteurl = "<a href=\"" . $_POST['websiteurl'] . "\">" . $_POST['websiteurl'] . "</a>"; 
```

需要补充：

```
target='blank' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T10:16:13.307

```
$websiteurl = '<a target="_blank" href="' . 
      $_POST['websiteurl'] . '">' . $_POST['websiteurl'] . '</a>'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T10:16:55.527

你错过了`_`。

放`target="_blank"`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T21:06:58.697

我的是这样的：

```
$output .= "<p class='fb-page-name'><a href='". $app['link'] ."' title='". $app['name'] ."'>". $app['name'] ."</a></p>\n"; 
```

我不得不使用`target='_blank'`而不是`target="_blank"`.

我只是说，因为也许有人和我一样挣扎。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T10:19:32.340

```
$websiteurl = '<a href="' . $_POST['websiteurl'] . '" target="_blank">' . $_POST['websiteurl'] . '</a>'; 
```

# regex - 使用 GXT 验证文本字段

> ID：11737865
> 
> 赞同：1
> 
> 时间：2012-07-31T10:15:21.997
> 
> 标签：regex, gwt, gxt

我必须使用以下正则表达式检查一些 textField：

```
[\sa-zA-Z.'-àáâãäåçèéêëìíîïðòóôõöùúûüýÿ]+ 
```

它适用于正则表达式检查器，但不适用于我的 GWT/GXT 应用程序。我在扩展 AbstractValidator 的类中使用上面的函数。

```
public static native boolean isValidName(String name) /*-{
    var pattern =  /[\sa-zA-Z.\'-àáâãäåçèéêëìíîïðòóôõöùúûüýÿ]+/;
    return pattern.test(name);
}-*/; 
```

我使用 GXT2 和 GWT 1.6.4。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T16:53:05.900

您是否尝试过`String.macthes`用于验证 gxt 中的值和`Validator`类`TextField`？

```
 someTextField.setValidator(new Validator() {
        @Override
        public String validate(Field<?> field, String value) {
            return value.matches("[\\sa-zA-Z.'-àáâãäåçèéêëìíîïðòóôõöùúûüýÿ]+") 
                                 ? null : "not a valid value";
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:43:37.170

对gxt2没问题...

相应的方法是[setRegex(String regex)](http://www.jarvana.com/jarvana/view/com/extjs/gxt/2.2.0/gxt-2.2.0-javadoc.jar!/com/extjs/gxt/ui/client/widget/form/TextField.html#setRegex%28java.lang.String%29)如果所有其他验证器都通过了，它将被调用

[http://www.jarvana.com/jarvana/view/com/extjs/gxt/2.2.0/gxt-2.2.0-javadoc.jar!/com/extjs/gxt/ui/client/widget/form/TextField .html](http://www.jarvana.com/jarvana/view/com/extjs/gxt/2.2.0/gxt-2.2.0-javadoc.jar!/com/extjs/gxt/ui/client/widget/form/TextField.html)

为什么不使用（对于 gxt3）：

```
 com.sencha.gxt.widget.core.client.form.Field<T>.addValidator(Validator<T> validator) 

 field.addValidator(new RegExValidator( "[\sa-zA-Z.\'-àáâãäåçèéêëìíîïðòóôõöùúûüýÿ]", "some message")); 
```

见[gxt 字段 api](http://dev.sencha.com/deploy/gxt-3.0.0/javadoc/gxt/com/sencha/gxt/widget/core/client/form/Field.html#addValidator%28com.sencha.gxt.widget.core.client.form.Validator%29)

见[gxt RegExValidator](http://dev.sencha.com/deploy/gxt-3.0.0/javadoc/gxt/com/sencha/gxt/widget/core/client/form/validator/RegExValidator.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:46:35.220

为什么要原生，而您仍然可以使用`Java`？或者更好的是，尝试看看是否`GXT`为您提供了一些验证工具。喜欢`Validators`

*相关：* [正则表达式和 GWT](https://stackoverflow.com/questions/1162240/regular-expressions-and-gwt)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-28T02:23:12.540

煎茶GXT4：

枚举 VType

* * *

```
 public enum VType {
    ALPHABET("^[a-zA-Z_]+$", "Alphabet"), ALPHANUMERIC("^[a-zA-Z0-9_]+$",
            "Alphanumeric"), NUMERIC("^[+0-9]+$", "Numeric"), EMAIL("^(\\w+)([-+.][\\w]+)*@(\\w[-\\w]*\\.){1,5}([A-Za-z]){2,4}$","Email");
    String regex;
    String name;

    VType(String regex, String name) {
        this.regex = regex;
        this.name = name;
    }

} 
```

验证器类

* * *

```
import java.util.ArrayList;
import java.util.List;

import com.google.gwt.editor.client.Editor;
import com.google.gwt.editor.client.EditorError;
import com.sencha.gxt.widget.core.client.form.Validator;
import com.sencha.gxt.widget.core.client.form.error.DefaultEditorError;

public class VTypeValidator implements Validator<String> {

    private String message;  
    private final VType type;

    public VTypeValidator(VType type,String message){
      this.type = type;
      this.message=message;
    }

  @Override
  public List<EditorError> validate(Editor<String> editor, String value) {
      List<EditorError> res = null;
      if (!value.matches(type.regex)) {
          List<EditorError> errors = new ArrayList<EditorError>();
          errors.add(new DefaultEditorError(editor, message,""));
          return errors;
        }
      return res;
  }
} 
```

如何与 textField 一起使用

* * *

```
 field.addValidator(new VTypeValidator(VType.EMAIL,"Invalid email")); 
```

# java - Java Web 应用程序中的可选数据源

> ID：11737866
> 
> 赞同：1
> 
> 时间：2012-07-31T10:15:26.903
> 
> 标签：java, websphere, datasource, web.xml

我正在创建一个 java web 应用程序，它应该在多个应用程序服务器（jetty、tomcat、websphere、jboss）上运行。此应用程序中有一个可选数据源。如果已配置，应用程序将使用它，否则应用程序中的某些功能将被禁用。

问题是，如果我在 web.xml 中定义资源引用，则需要在应用程序上下文中定义它。如果我没有在 web.xml 中定义它，那么当我尝试在 websphere 中部署应用程序时，就无法在应用程序中引用数据源。

有没有办法让 websphere 知道可选数据源，而不必总是在应用程序上下文中定义它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:43:17.750

不要使用“可选数据源”。相反，始终定义资源引用，并添加一个 env-entry：

```
@Resource(name="useDataSource")
private boolean useDataSource; 
```

...或相应的 XML：

```
<env-entry>
  <env-entry-name>useDataSource</env-entry-name>
  <env-entry-type>java.lang.Boolean</env-entry-type>
  <env-entry-value>false</env-entry-value>
</env-entry> 
```

env-entry 的值可以在部署时更改。

# android - 具有固定节标题和可滚动的 TableLayout

> ID：11737868
> 
> 赞同：0
> 
> 时间：2012-07-31T10:15:36.250
> 
> 标签：android, tablerow, android-tablelayout, sectionheader, tableheader

我正在尝试创建这样的视图：

![表格布局](../Images/5e5834dc0f9e2a1f5c58362462bd1cc4.png)

...有两个固定的标题。整个表格布局是可滚动的，内表视图也是可滚动的，如图所示。标题和数据是动态的。当我向上滚动到 header-2 时，它会隐藏 header-1 而不是 header-1 的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:17:29.820

```
 <?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/ll"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="list1" />
<ListView
    android:id="@+id/list1"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:scrollbars="vertical" />
<View
    android:layout_width="fill_parent"
    android:layout_height="2dp"
    android:background="#FF4500" />
<TextView
    android:id="@+id/textView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="list2" />
<ListView
    android:id="@+id/con_listView"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:scrollbars="vertical" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:19:29.160

为此，您需要维护一个适配器类。这样您就可以根据需要对齐元素

检查[这个](http://w2davids.wordpress.com/android-sectioned-headers-in-listviews/)。

而[这个](http://blogingtutorials.blogspot.in/2010/11/android-listview-header-two-or-more-in.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:32:45.873

我可以解释如何在**不使用 ListView**的情况下轻松完成它。对于较少的数据量，您不应该使用 ListView 它会影响您的效率。

**步骤1 ：**

利用权重属性并给两个标题相等的一半

**第2步：**

标题名称为静态，在 Scroll View 中创建一个 TableLayout

**第 3 步：**

将 TableRow 创建为动态单独或在同一布局中，并将表格行动态添加到 TableLayout 中。

对您将获得的第二个标题重复相同的操作。

[对于动态表格布局，请检查此链接](https://stackoverflow.com/questions/7683154/android-softkeyboard-enter-the-numeric-value-into-edittext-very-slow)

# javascript - 为什么内联事件处理程序属性在现代语义 HTML 中是个坏主意？

> ID：11737873
> 
> 赞同：16
> 
> 时间：2012-07-31T10:16:10.273
> 
> 标签：javascript, html, events

内联事件处理程序是否被认为是一种不好的做法？

例如：`<button onclick=someFunction()>Click me!</button>`

如果是这样，使用内联事件处理程序的缺点是什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-31T14:46:24.243

这是个坏主意，因为...

1.  最佳实践建议明确区分内容、风格和脚本。使用内联 JavaScript（或 CSS）混淆 HTML 与此不一致。

2.  您只能使用`on*`-style events 绑定每种类型的一个事件，例如，您不能有两个`onclick`事件处理程序。

3.  如果内联指定了事件，则将 JS 指定为字符串（属性值始终为字符串）并在事件触发时进行评估。评价是邪恶的。

4.  您必须引用命名函数。这并不总是理想的（事件处理程序通常采用匿名函数）并且对需要全局访问的函数有影响

5.  您的内容安全策略 (CSP) 必须（不明智地）扩展以允许评估内联 JavaScript。

简而言之，通过专用`addEventListener`API 或通过 jQuery 或其他方式集中处理事件。

[2021年编辑]

如今，响应式框架在一定程度上扭转了这一趋势。反应式框架中的事件通常被指定为属性，例如在 Vue 中：

```
<p v-on:click=foo>Hello</p> 
```

...其中`foo`是当前组件的数据对象的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-06-02T09:26:31.937

除了在接受的答案中表达的语义和其他意见外，所有内联脚本都被视为漏洞和高安全风险。任何希望在现代浏览器上运行的网站都应该通过元属性或标头设置“内容安全策略”（CSP）属性。

这样做与所有内联脚本和样式不兼容，除非明确允许它们作为排除项。虽然 CSP 的目标主要是防止持久的跨站点脚本 (xss) 威胁，其中内联脚本和样式是 xss 的向量，但它不是当前浏览器中的默认行为，但将来可能会改变。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-06-25T07:19:52.580

基于@Mitya 的回答。

在大多数现代 JS 库*React*、*Vue*等中。内联事件处理程序被认为是惯用的，但@Mitya 提到的大部分限制都消失了。作为案例研究，我们将查看*Vuejs*并将其与上面列出的点进行比较：

1.  你可以有多个事件处理程序，看[这里](https://stackoverflow.com/questions/38744932/how-to-call-multiple-functions-with-click-in-vue)
2.  事件值（处理程序）例如`onclick`不是纯字符串，而是 js 表达式看[这里](https://vuejs.org/v2/guide/syntax.html#Using-JavaScript-Expressions)
3.  全局范围问题根本不存在（因为您的代码将被翻译成小型化，被*webpack*或其他工具重新打包）。

在我自己看来，内联事件处理程序主要增强了可读性，但意见可能会有所不同。

# mysql - 复杂的mysql ORDER BY

> ID：11737880
> 
> 赞同：5
> 
> 时间：2012-07-31T10:16:37.590
> 
> 标签：mysql, sql

执行以下查询：

```
SELECT title FROM table ORDER BY title 
```

给我：

```
"Hello"
"Zebra"
Apple
Beta
Cactus 
```

我将如何按第一个字母字符排序，以获得：

```
Apple
Beta
Cactus
"Hello"
"Zebra" 
```

?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T10:17:55.877

在对数据进行排序之前，您必须删除引号。`TRIM`您可以使用MySQL 中的函数轻松删除它们：

```
SELECT title 
FROM table 
ORDER BY TRIM(BOTH '"' FROM title); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T10:18:27.797

```
...ORDER BY REPLACE(title, '"', ''); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-31T10:19:21.377

```
SELECT title FROM table ORDER BY TRIM(LEADING '"' FROM title) 
```

# php - 需要 PIN 才能使用 Symfony2 登录

> ID：11737882
> 
> 赞同：0
> 
> 时间：2012-07-31T10:16:44.960
> 
> 标签：php, user-interface, login, symfony

我正在尝试在 Symfony2 中创建一个需要用户名/密码和 PIN 的登录系统。这意味着当用户按下登录提交按钮时，Symfony2 应该检查用户名、密码和密码。

我真的不知道从哪里开始。我有一个有效的登录系统，使用用户界面只使用用户名/密码。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:35:48.230

[按照本教程](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html)在侦听器中使用 RedirectResponse 到您的登录页面捕获错误并设置会话变量：

```
$session->set(SecurityContext::AUTHENTICATION_ERROR, array('message' => 'The details entered are invalid')); 
```

# python - 将图像转换为黑白并将其用作数组

> ID：11737886
> 
> 赞同：7
> 
> 时间：2012-07-31T10:16:53.217
> 
> 标签：python, image, image-processing, computer-vision

我正在尝试将彩色图像转换为黑白图像。

原图如下：

![](../Images/b8e846cc0926f022058b9475857de107.png)

我有几个问题。第一的：

```
import pylab as pl
import Image

im = Image.open('joconde.png')

pl.imshow(im)
pl.axis('off')
pl.show() 
```

我明白了：

![第一个结果](../Images/b008644481a2164c914b1e9e8b51c552.png)

为什么会旋转？这不是重点，但我想知道为什么。

```
im_gray = im.convert('1')

pl.imshow(im_gray)
pl.show() 
```

这是处理后的黑白图像：

![](../Images/ea33c1fd8cbb7e13446efe06a032a088.png)

现在一切看起来都正常。但我需要将该图像用作 numpy 数组来进行一些图像处理。我所要做的就是：

```
import numpy as np

im_arr = np.array(im_gray)

pl.imshow(im_arr)
pl.axis('off')
pl.show() 
```

但我明白了：

![](../Images/62304d710e07444ba55eb15194b7125b.png)

为什么会这样？我也试过：

```
im_arr = np.array(im_gray, dtype='float') 
```

或者：

```
im_arr = np.asarray(im_gray) 
```

但似乎没有任何效果。也许问题出在`show`方法上，但我不知道。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T11:40:03.670

由于原点问题，您的图像被旋转。

如果您使用此代码段，图像将不会倒置旋转。

```
pl.imshow(im, origin='lower')
pl.show() 
```

您也可以简单地使用`im.show()`来显示图像。

现在，回到最初的问题。我认为问题出在 pylab 无法处理双层图像这一事实。您当然想使用灰度图像，因此这样做

```
import pylab as pl
import matplotlib.cm as cm
import numpy as np
import Image

im = Image.open('your/image/path')
im_grey = im.convert('L') # convert the image to *greyscale*
im_array = np.array(im_grey)
pl.imshow(im_array, cmap=cm.Greys_r)
pl.show() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T11:21:44.643

问题在于您将图像转换为 numpy 数组的方式。如果你看看函数的输出是什么，这就很清楚了

```
>> np.array(im_gray)
array([[False, False, False, ...,  True, False, False],
   [ True,  True,  True, ...,  True,  True, False],
   [ True,  True,  True, ...,  True,  True, False],
   ..., 
   [False, False, False, ..., False, False, False],
   [False, False, False, ..., False, False, False],
   [False, False, False, ..., False, False, False]], dtype=bool) 
```

这不可能。`pl.imshow`接受一个`floats` `uint8`或`PIL`图像的数组，而不是一个布尔数组。因此，您需要更明确地转换为数组，确保

```
cols,rows = im_gray.size
pixels = list(im_gray.getdata())

# an indexer into the flat list of pixels
# head ranges from 0 to len(pixels) with step cols
# tail ranges from cols to len(pixels) with step cols
head_tail = zip(range(0,len(pixels)+1,cols),range(cols,len(pixels)+1,cols))
im_data = np.ndarray(shape=(cols,rows), dtype=np.uint8)

# extract each row of pixels and save it to the numpy array
for i,(head,tail) in enumerate(head_tail):
    im_data[i] = np.array(pixels[head:tail], dtype=np.uint8)

pl.imshow(im_data, cmap='bone') 
```

最后`pl.imshow`需要您定义颜色图。`'bone'`颜色图是黑白的。我假设将`PIL`图像传递给函数会自动定义颜色图。

# eclipse - Eclipse 将重写的方法重构为最终部分和抽象部分

> ID：11737887
> 
> 赞同：3
> 
> 时间：2012-07-31T10:16:53.550
> 
> 标签：eclipse, refactoring

我有一个我想重构的方法

基本上我想将顶级方法拆分为摘要和最终部分。有问题的方法在很多添加了附加功能的地方被覆盖，但最终总是进行超级调用。

代码现在基本上看起来像：（并非所有扩展类都覆盖，但那些这样做的，这样做）

```
class Base {

public Object getStuff(String key) {
 out = //code to get data from the Database.
 return out
}

class Extended1 extends Base {
   public Object getStuff(String key) {
      if("some_non_db_value".equals(key)) {
         return "some custom stuff";
      }
      return super.getStuff(key);
    }
} 
```

我想要的结果是：

```
class Base {

public final Object getStuff(String key) {
   out = getCustom(key);
   if(out != null) {
      return custom;
   }

   out = //code to get data from the Database.
   return out
}

public abstract Object getCustom(String key); 
```

}

```
class Extended1 extends Base {
   public Object getCustom(String key) {
      if("some_non_db_value".equals(key)) {
         return "some custom stuff";
      }
      return null;
    }
} 
```

我希望有一个重构动作（或部分重构）来达到（或接近）这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T09:37:05.050

我首先将 getStuff() 重命名为 getCustom() ，这将处理所有扩展类。那么更改 Base 类应该相对容易。

# php - 带有日文字符问题的 substr

> ID：11737890
> 
> 赞同：10
> 
> 时间：2012-07-31T10:17:06.760
> 
> 标签：php, utf-8, character-encoding

我很好地回显日文字符，但是当我尝试 substr 并回显部分字符串时，它只会变成问号 ��</p>

注意：我将标题设置为 utf-8

```
header('Content-Type: text/html; charset=utf-8'); 
```

并制作了元 `<meta http-equiv="Content-type" content="text/html; charset=utf-8" />`

```
$word = "せんせい";
echo $word;       //works just fine

echo substr($word,-1);    //now it just echoes �

//this one also failed
echo $word[0];    //echoes � 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T10:18:03.487

使用多字节字符串时，您需要使用[`multibyte string`](http://php.net/mbstring)函数，在这种情况下是[`mb_substr`](http://php.net/manual/en/function.mb-substr.php).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T10:19:26.390

[尝试多字节子字符串，在这里](http://php.net/manual/en/function.mb-substr.php)找到 mb_substr() 信息此函数适用于不在英语 ascii 代码集中的字符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-07T05:10:57.847

```
mb_substr 
```

将工作。但是，请记住在脚本顶部添加以下行：

```
mb_internal_encoding("UTF-8");//Sets the internal character encoding to UTF-8, for mb_substr to work 
```

# iphone - 应用程序 info.plist 的位置

> ID：11737893
> 
> 赞同：0
> 
> 时间：2012-07-31T10:17:14.050
> 
> 标签：iphone, xcode, ios5, plist, project

我正在重新组织一个项目的结构，并且我想将我的应用程序的 info.plist 文件移动到我的项目中的一个嵌套文件夹中。这是一个坏主意吗？据我所见，其中没有相对路径，只要我的项目知道它在哪里，事情似乎就可以了，但是我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:23:30.350

是的，只要您在目标的构建设置中设置正确的路径，您就可以将它放在子目录中。

`Info.plist File`在构建设置中调用密钥。

# android - 如何将 AdView 置于底部？

> ID：11737898
> 
> 赞同：0
> 
> 时间：2012-07-31T10:17:27.467
> 
> 标签：android, android-layout, admob

`AdView`如果我添加以下内容，我在放置在底部时会遇到一些问题：

```
<LinearLayout android:id="@+id/adview_preview_layout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"></LinearLayout> 
```

`AdView`底部的代码，它将重叠或到达屏幕顶部。

请帮助我在`AdView`底部运行它。这是完整的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:padding="6dip"
    >

    <TextView
        android:id="@+id/Name"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_marginTop="2dp"
        android:layout_width="fill_parent"
        android:focusable="true" 
        android:focusableInTouchMode="true" 
        android:freezesText="true"
        android:singleLine="true"
        android:gravity="center"
        android:textStyle="bold"
        android:textSize="30dip"
        android:textColor="#FFFFFF"
        android:background="#585858" />

    <ImageView
        android:id="@+id/icon"
        android:layout_width="100dip"
        android:layout_height="100dip"
        android:layout_below="@+id/serviceName"
        android:layout_alignParentLeft="true"
        android:layout_marginRight="6dip"
        android:layout_marginTop="10dip"
        android:scaleType="center"
        android:background="@drawable/list_item_bg"
        android:src="@drawable/ic_launcher"/>

  <TabHost
    android:id="@android:id/tabhost"
    android:layout_below="@+id/icon"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginTop="12dip"
    >

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        >

        <TabWidget
            android:id="@android:id/tabs"
            android:orientation="horizontal"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0"/>

          <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_weight="0"/>

        <FrameLayout
            android:id="@+android:id/realtabcontent"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"/>

    </LinearLayout>

</TabHost>

    <LinearLayout android:id="@+id/adview_preview_layout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"></LinearLayout>  
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:21:25.780

将此行添加到您的`TabHost`：

```
android:layout_above="@+id/adview_preview_layout" 
```

像这样：

```
<TabHost
    android:id="@android:id/tabhost"
    android:layout_below="@+id/icon"
    android:layout_above="@+id/adview_preview_layout"  /// add this line
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginTop="12dip" /> 
```

# android - 标签出现在 标签

> ID：11737899
> 
> 赞同：4
> 
> 时间：2012-07-31T10:17:28.807
> 
> 标签：android, android-manifest

我的 AndroidManifest.xml 看起来像这样：

```
<manifest ...>
    <application ...>
        ...
    </application>
    <uses-sdk ... />
</manifest> 
```

这在早期版本的 Eclipse 中很好，但自从我升级后，我收到了这个警告：

```
<uses-sdk> tag appears after <application> tag 
```

这里的最佳做法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T10:20:10.080

警告由 lint 解释。这不是什么严重的问题，而是“比后悔更安全”的政策。

引用 lint：

```
<uses-sdk> tag appears after <application> tag

Issue: Checks for manifest problems like <uses-sdk> after the <application> tag
Id: ManifestOrder 
```

> 标签应该出现在声明您需要哪个版本、需要哪些功能、需要哪些库等元素之后。过去，当标签出现在其他一些元素之前时，会出现一些细微的错误（例如未正确应用主题），因此最好按照逻辑依赖顺序对清单进行排序。

# java - 如何将属性设置为可从 Java 代码执行的 Groovy 脚本？

> ID：11737904
> 
> 赞同：0
> 
> 时间：2012-07-31T10:17:38.767
> 
> 标签：java, groovy

在我的 Groovy 脚本中，我有以下代码：

```
def username = System.getenv()['USER']
def password = System.getenv()['PASS'] 
```

这是因为我不能将此信息用作 Groovy 脚本的参数，因为其他用户不应该知道它。当我运行这个脚本时，我在我的系统中设置了这个参数。现在我有一个问题。我有一个远程运行 Groovy 脚本的 Java 应用程序。有什么方法可以在 Java 代码中设置环境变量？（[在这里](https://stackoverflow.com/questions/7054972/java-system-properties-and-environment-variables)我发现这是不可能的）。还是有一些安全的方法可以将这些属性从 Java 发送到 Groovy？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:28:35.387

`Runtime.exec`如果您通过（或类似）的最低公分母启动 groovy 脚本，那么您可以在[其中一种重载方法](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#exec%28java.lang.String,%20java.lang.String%5B%5D%29)中指定环境：

> 在具有指定环境的单独进程中执行指定的字符串命令。
> 
> ...
> 
> `envp`- 字符串数组，其中每个元素都具有格式 name=value 的环境变量设置，如果子进程应该继承当前进程的环境，则为 null。

另一方面，如果您在同一个 Java 进程中调用 Groovy 脚本，那么它将具有与正在运行的进程相同的属性。因此，`System.setProperty("USER", xxx)`在调用 Groovy 脚本之前简单地调用将意味着该属性对您的 Groovy 逻辑可见。

* * *

您应该注意，*环境*是操作系统级别的东西；对运行进程的操作系统属性的度量。

如果您正在寻找应用程序级别的设置，那么您真的应该检查一下`System.properties`。

# perl - 使用 R 包 gdata 时的 PATH 规范

> ID：11737906
> 
> 赞同：3
> 
> 时间：2012-07-31T10:17:41.720
> 
> 标签：perl, r, xls

问题：使用 gdata 将 .xls 读入 R 时，助手失败

我有一些我想读入 R 的 .xls。我可以`read.xls`在`gdata`包中使用它，但是帮助器功能`sheetNames`和`sheetCount`失败 - 我想了解我做错了什么，以便我可以使用因为它们会非常有用。

```
require(gdata)
fp <- file.path('~/data/first.xls') 
```

当我知道工作表的结构并能够将其指向我想要的数据表时，perl 脚本运行得很好：

```
firstdata <- read.xls(fp, sheet=2) 
```

我有我的数据......在`firstdata`。

然而，在同一张纸上，助手失败了。

我发现自己在 excel 中打开 .xls，找出它们，然后使用加载到 R 中`read.xls(fp, sheet=N)`——这不是一场灾难，但也不是理想的。

特别是，当工作表不是我自己的，并且在我可以设置之前我需要有关它们的信息`sheet=N`时`read.xls()`，辅助函数`sheetNames`会`sheetCount`非常有用，但是它们会失败 - 为什么？

```
sheetCount(fp)

> sheetNames(fp)
Error in read.table(tc, as.is = TRUE, header = FALSE) : 
  no lines available in input
In addition: Warning message:
running command ''/usr/bin/perl'     '~/R/wd/raRpackages/gdata/perl/sheetNames.pl' '~/data/first.xls'' had status 2 
Unable to open file '~/data/first.xls'. 
```

和：

```
> sheetCount(fp)
Error in read.table(tc, as.is = TRUE, header = FALSE) :  
  no lines available in input
In addition: Warning message:
running command ''/usr/bin/perl'     '~/R/wd/raRpackages/gdata/perl/sheetCount.pl' '~/data/first.xls'' had status 2 
Unable to open file '~/data/first.xls'. 
```

经过一番摆弄，我（很偶然）发现使用完整路径可以解决这个问题：

```
fp2 <- file.path("/Users/ricardo/data/first.xls")
sheetcount(fp2)
[1] 13 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T11:34:26.383

看起来`~`没有扩展到您的主目录。这种扩展通常由 shell 完成，所以 R 可能不会这样做，而 perl 肯定不会。

相反，在 Perl 程序中使用显式路径 or`$HOME`或from。`$ENV{HOME}`

# c# - Windows Phone 7 中的 AES 加密

> ID：11737908
> 
> 赞同：0
> 
> 时间：2012-07-31T10:17:46.167
> 
> 标签：c#, windows-phone-7, encryption, aes

我正在尝试使用 Windows Phone 7实现我在 James Craig 在[gutgames上找到的这个实用程序类（您可以在](http://www.gutgames.com)[此处](http://www.gutgames.com/post/AES-Encryption-in-C.aspx)查看该类）。

我不得不将对 System.Text.Encoding.ASCII 的所有引用替换为 System.Text.Encoding.UTF8，因为 WP7 显然不支持 ASCII。除此之外，由于找不到引用/命名空间，我仍然遇到一些错误：

*   密码导出字节
*   Rijndael管理
*   密码模式

首先，我不知道这是什么，其次，是否有任何类可以用来替换 Windows Phone 7 框架中确实可用的这些类？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T10:20:32.023

Silverlight 中未实现[PasswordDeriveBytes](http://msdn.microsoft.com/en-us/library/system.security.cryptography.passwordderivebytes.aspx)、[RijndaelManaged](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rijndaelmanaged.aspx)和[CipherMode](http://msdn.microsoft.com/en-us/library/system.security.cryptography.ciphermode.aspx)类型。所以你需要提供你自己的这些类型的实现。

**但**我想 use 可以使用[AesManaged](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aesmanaged%28v=vs.95%29.aspx)类来做你想做的事。从 MSDN 页面：

> AES 算法本质上是具有固定块大小和迭代次数的 Rijndael 对称算法。此类的功能与 .NET Framework RijndaelManaged 类相同，但将块限制为 128 位，并且不允许使用反馈模式。
> 
> 密码模式始终为 CBC，填充模式始终为 PKCS7。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T10:53:12.740

作为@ie。已经提到，这些类型不包含在 Silverlight 中。

如果你想使用它们，你可以下载“充气城堡库”的 WP7 版本。

请参阅此主题：[在 Windows Phone 7 上使用 Bouncy Castle](http://awkwardcoder.blogspot.com/2011/08/using-bouncy-castle-on-windows-phone-7.html)

下载链接在本页底部。[直接链接](https://skydrive.live.com/?cid=8503dda7ad75860b&resid=8503DDA7AD75860B!176&id=8503DDA7AD75860B!176)（BouncyCastle.Crypto.WP7 或 BouncyCastle.Crypto.WP71）

# java - java中的网络用于客户端服务器通信

> ID：11737918
> 
> 赞同：0
> 
> 时间：2012-07-31T10:18:14.943
> 
> 标签：java, linux, networking

我需要在java中制作一个故障排除工具

从 java 代码中，我需要与 tethereal（linux 命令）进行通信以帮助我生成`.pkt`文件。该`.pkt`文件将包含客户端和服务器之间发生的所有通信内容——即客户端和服务器之间的所有数据包通信。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T10:21:15.543

你知道[WireShark](http://www.wireshark.org)吗？那是一个跨平台的网络数据包捕获应用程序。

这个想法是它捕获通过一个网络设备（例如：WiFi 卡）的所有数据包（TCP 和 UDP），并且您在应用程序使用的端口上应用过滤器，并最终应用 IP 地址。非常有用的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:44:05.610

如果您真的需要在 java 中执行此操作，您可以使用[http://jnetpcap.com/](http://jnetpcap.com/)，它是 libpcap 的包装器，其工作方式类似于 tethereal。

# python - Python读取目录中的文件

> ID：11737920
> 
> 赞同：2
> 
> 时间：2012-07-31T10:18:29.163
> 
> 标签：python, python-2.7

我有一个 .csv，在 2 列中有 3000 行数据，如下所示：

```
uc007ayl.1  ENSMUSG00000041439
uc009mkn.1  ENSMUSG00000031708
uc009mkn.1  ENSMUSG00000035491 
```

在另一个文件夹中，我有一个名称如下的图表：

```
uc007csg.1_nt_counts.txt
uc007gjg.1_nt_counts.txt 
```

您应该注意到这些图表的名称与我的第一列的格式相同

我正在尝试使用 python 来识别那些具有图形的行并在新的 .txt 文件中打印第二列的名称

这些是我的代码

```
import csv
with open("C:/*my dir*/UCSC to Ensembl.csv", "r") as f:
reader = csv.reader(f, delimiter = ',')
    for row in reader:
        print row[0] 
```

但据我所知，我被困住了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T10:25:46.183

您快到了：

```
import csv
import os.path
with open("C:/*my dir*/UCSC to Ensembl.csv", "rb") as f:
    reader = csv.reader(f, delimiter = ',')
    for row in reader:
        graph_filename = os.path.join("C:/folder", row[0] + "_nt_counts.txt")
        if os.path.exists(graph_filename):
            print (row[1]) 
```

请注意，重复调用[`os.path.exists`](http://docs.python.org/library/os.path.html#os.path.exists)可能会减慢进程，尤其是当目录位于远程文件系统上并且文件数量不超过 CSV 文件中的行数时。您可能想[`os.listdir`](https://stackoverflow.com/a/11738276/4279)改用：

```
import csv
import os

graphs = set(os.listdir("C:/graph folder"))
with open("C:/*my dir*/UCSC to Ensembl.csv", "rb") as f:
    reader = csv.reader(f, delimiter = ',')
    for row in reader:
        if row[0] + "_nt_counts.txt" in graphs:
            print (row[1]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T10:24:18.073

首先，尝试查看是否`print row[0]`确实给出了正确的文件标识符。

其次，连接文件的路径`row[0]`并检查这个完整路径是否存在（如果文件确实存在）`os.path.exists(path)`（参见[http://docs.python.org/library/os.path.html#os.path.exists](http://docs.python.org/library/os.path.html#os.path.exists)）。

如果它退出，您可以将行[1]（第二列）写入一个新文件`f2.write("%s\n" % row[1]`（当然首先您必须打开`f2`写入）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:28:28.003

```
result = open('result.txt', 'w')
for line in open('C:/*my dir*/UCSC to Ensembl.csv', 'r'):
    line = line.split(',')
    try:
        open('/path/to/dir/' + line[0] + '_nt_counts.txt', 'r')
    except:
        continue
    else:
        result.write(line[1] + '\n')
result.close() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T10:25:19.930

那么，下一步是检查文件是否存在？有几种方法，但我喜欢 [EAFP](http://docs.python.org/glossary.html#term-eafp)方法。

```
try:
   with open(os.path.join(the_dir,row[0])) as f: pass
except IOError:
   print 'Oops no file' 
```

`the_dir`是文件所在的目录。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T10:41:17.700

```
import csv
import os

# get prefixes of all graphs in another directory
suff = '_nt_counts.txt'
graphs = set(fn[:-len(suff)] for fn in os.listdir('another dir') if fn.endswith(suff))

with open(r'c:\path to\file.csv', 'rb') as f:
    # extract 2nd column if the 1st one is a known graph prefix
    names = (row[1] for row in csv.reader(f, delimiter='\t') if row[0] in graphs)
    # write one name per line
    with open('output.txt', 'w') as output_file:
        for name in names:
            print >>output_file, name 
```

# actionscript-3 - AS3 setChildIndex 到前面

> ID：11737925
> 
> 赞同：2
> 
> 时间：2012-07-31T10:18:45.257
> 
> 标签：actionscript-3, flash, movieclip

有没有办法将特定的影片剪辑发送到舞台上所有其他影片剪辑的前面？

我知道 setChildIndex，但我想不出一种动态计算顶部位置的方法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-31T10:25:20.330

您可以`setChildIndex()`使用`numChildren`.

```
setChildIndex(childClip, numChildren - 1); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-22T16:50:23.213

您不需要使用 setChildIndex。addChild 在所有剪辑的顶部发送孩子。您可能认为 addChild 会双重添加您的 MC，但它不会，第二次它只会更新它的子索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:24:35.930

默认情况下，flash 将影片剪辑添加到显示列表的顶部，因此您可以重复将子项添加到容器中。

```
stage.addChild(bottom);
stage.addChild(top);
// top is now on bottom.

stage.addChild(bottom);
// bottom is now on top. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-23T10:33:54.870

在画布上添加了movieclip(mc)，

```
canvas.setChildIndex(mc, 0); 
```

画布被添加到舞台上，

```
stage.setChildIndex(canvas, 0); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-31T10:33:13.763

```
/* Bring Any Clicked Object to the Front
Clicking on any symbol on the Stage moves it in front of all other instances.
*/

// This code makes all symbol instances on stage clickable by making them listen for the CLICK event.
for (var fl_ChildIndex:int = 0;
    fl_ChildIndex < this.numChildren;
    fl_ChildIndex++)
{
    this.getChildAt(fl_ChildIndex).addEventListener(MouseEvent.CLICK, fl_ClickToBringToFront);
}

// This is the function that moves the clicked object to the front of the display list

function fl_ClickToBringToFront(event:MouseEvent):void
{
    this.addChild(event.currentTarget as DisplayObject);
} 
```

来自 Adob​​e Flash Professional 代码片段。

# node.js - 在 Mongoose 虚拟属性中引用基于会话的数据

> ID：11737930
> 
> 赞同：0
> 
> 时间：2012-07-31T10:18:57.473
> 
> 标签：node.js, express, mongoose

我有一个包含 Places 的 Mongoose 模型。每个*地方*都有一个纬度/经度。我可以定义一个名为*distance*的 Mongoose[虚拟属性](http://mongoosejs.com/docs/virtuals.html)，用于按升序对 Places 进行排序。*从距离*虚拟属性内部引用用户位置信息（假设它现在存储在会话变量中）的最佳方式是什么？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:41:12.417

对于涉及外部数据的任何事情，向模式添加[方法](http://mongoosejs.com/docs/methods-statics.html)将是比虚拟属性更好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T09:08:07.910

我正在解决一个类似的问题。问题是，如果您想对单个值执行操作，但我正在检索一个列表并希望将一个新的虚拟字段注入到列表中的每条记录中，那么这些方法很好 - 但使用会话数据来生成该字段。**为了安全地**做到这一点（避免全局变量），我认为我需要使用[QueryStream并使用](http://mongoosejs.com/docs/api.html#querystream_QueryStream)[ArrayFormatter](https://gist.github.com/1403797)注入新字段，该ArrayFormatter 将会话变量作为构造函数参数。

这看起来也像是 LINQ 的工作，因此另一种方法可能是使用 LINQ to JS 的一个端口。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-19T11:42:29.480

如果您更喜欢使用虚拟，您可以将用户位置信息存储在 NodeJs 全局变量中。例如，此代码可以在用户登录后设置：

```
global.user_location = user.location; 
```**

# android - 如何在 Eclipse 中更改 Android 应用程序的图标？

> ID：11737932
> 
> 赞同：154
> 
> 时间：2012-07-31T10:19:18.410
> 
> 标签：android, eclipse, android-icons, application-icon

我正在使用 Eclipse IDE Juno 和 Android SDK 开发应用程序。

如何更改我的应用程序的图标？

* * *

## 回答 #1

> 赞同：325
> 
> 时间：2012-11-29T16:23:34.783

进入你的**AndroidManifest.xml**文件

*   单击应用程序选项卡
*   找到标有“图标”的文本框
*   然后单击文本框末尾的“浏览”按钮
*   单击标有：“创建新图标...”的按钮

*   创建你的图标
*   点击完成

*   如果您已经将图标设置为其他内容，请单击“全部同意”。

享受使用 gui 而不是使用图像编辑器！希望这可以帮助！

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-07-31T10:21:13.500

在您的**AndroidManifest.xml**文件中

```
<application
        android:name="ApplicationClass"
        android:icon="@drawable/ic_launcher"  <--------
        android:label="@string/app_name"
        android:theme="@style/AppTheme" > 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-10-25T21:52:53.943

***图标创建向导***

*   选择您的项目
*   Ctrl+n
*   安卓图标集

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-10-23T08:46:53.013

**在您的Manifest.xml** 中查找此内容，`android:icon="@drawable/ic_launcher"`然后将其更改为文件夹`ic_launcher`中图标的名称。`@drawable`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-07-31T10:24:51.907

[你可以在这里](http://envyandroid.com/archives/301/change-the-android-app-icon)找到一个简单的指南

步骤是 2： - 将图标复制到正确的文件夹/文件夹中 - 更改 AndroidManifest.xml

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-08-25T05:10:04.443

Rob R.的回答绝对是要走的路。我尝试从另一个项目复制 ic_launcher.png 文件，但 Eclipse 仍然不会读取它们。通过清单更快更容易。

# c++ - 如何使用自定义修改的 v8::Arguments 调用 v8::Function？

> ID：11737933
> 
> 赞同：1
> 
> 时间：2012-07-31T10:19:19.590
> 
> 标签：c++, v8, embedded-v8

我想用修改过的参数从 C++ 端调用 JSON.stringify 方法，但是我想到的任何解决方案都会导致一个奇怪的段错误，所有帧都在“??”。

我想做以下事情：api::Console 是用于调试目的的自定义控制台实现，因此具有静态方法，如 api::Console::handleLog 或 api::Console::handleDebug。

对于正确传递给控制台的 ObjectTemplate 的 handleDebug，以下内容不起作用，v8gl::context 是当前执行上下文，并且可以在其他 api 实现中正确使用：

```
v8::Handle<v8::Value> Console::handleDebug(const v8::Arguments& args) {

    if (args.Length() < 1) {
        return v8::Undefined();
    }

    v8::HandleScope scope;

    v8::Handle<v8::Object> global = v8gl::context->Global();
    v8::Handle<v8::Object> JSON = global->Get(v8::String::New("JSON"))->ToObject();
    v8::Handle<v8::Function> JSON_stringify = v8::Handle<v8::Function>::Cast(JSON->Get(v8::String::New("stringify")));

    for (signed a = 0; a < args.Length(); a++) {

        for (int m = 0; m < consoleMargin; m++) {
            fprintf(stdout, "\t");
        }

        v8::Handle<v8::Value> passargs[1];
        // alternative try was:
        // passargs[0] = v8::String::New("{foo:'bar'}");
        passargs[0] = v8::String::New(*v8::String::Utf8Value(args[a]->ToString()));

        v8::String::Utf8Value value(JSON_stringify->Call(JSON, 1, passargs));
        char* message = *value;

        fprintf(stdout, "%s\n", message);

    }

    return scope.Close(v8::Undefined());

} 
```

gdb 中的回溯有点奇怪，我不知道为什么：

```
(gdb) backtrace
#0  0x00000000004a0880 in v8::Context::Global() ()
#1  0x00000000004128ea in api::Console::handleDebug(v8::Arguments const&) ()
#2  0x00000000004b9eab in v8::internal::Builtin_HandleApiCall(v8::internal::(anonymous namespace)::BuiltinArguments<(v8::internal::BuiltinExtraArguments)1>, v8::internal::Isolate*) ()
#3  0x000004cd67f0618e in ?? ()
#4  0x000004cd67f12998 in ?? ()
#5  0x000004cd67f060e1 in ?? ()
# (... etc ...) 
```

所以我的问题如下：

**如何正确地从本地值“v8::Arguments& args”转换为“v8::Handle<v8::Value>*”以便与 v8::Function 的 Call() 方法一起使用？**

如果我想直接在循环中使用 args[a]，编译器会因 v8::Function::Call 的不同签名引发编译器错误，这是正确的，因为 args 是本地值。v8::Function::Call 的签名如下：

v8::Local<v8::Value> v8::Function::Call(v8::Handle<v8::Object>, int, v8::Handle <v8::Value>*)

// 编辑：更新 passargs[false index]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T10:26:15.493

你有错误：

```
 v8::Handle<v8::Value> passargs[1];

    passargs[1/* SHOULD BE 0!!!*/] = 
         v8::String::New(*v8::String::Utf8Value(args[a]->ToString())); 
```

因此，您尝试访问数组边界之外的元素。

**顺便说一句：** `v8::Local<>`继承自，`v8::Handle<>`因此您不需要任何魔法即可转换`Local`为`Handle`.

**编辑：**大多数 v8 功能不仅需要，`v8::HandleScope`而且`v8::Context::Scope`您似乎也需要创建上下文范围。您可以获得有效的上下文形式`args`：

```
Local<Object> self = args.Holder();
Persistent<Context> context(self->CreationContext()); 
```

然后创建句柄范围和上下文范围：

```
Context::Scope work_in_context_scope(context);
HandleScope work_in_this_function_scope; 
```

那你干活。

# c# - Chrome.manifest 资源文件没有为 Gecko Webbrowser 加载某些文件

> ID：11737944
> 
> 赞同：0
> 
> 时间：2012-07-31T10:19:55.680
> 
> 标签：c#, .net, html5-video, geckofx

我正在使用 Gecko Webbrowser 插件在 chrome.manifest 文件中添加资源（实际上是 binary.manifest 文件，但这是由前者加载的），我遇到了一个问题，我似乎只能加载 .png 文件。使用相同的位置：

```
resource filesLocations file:///C:/foo/ 
```

使用类似的图片

```
<img src="resource://filesLocations/foo.png"/> 
```

但是将显示来自该资源文件的图片

```
<video autoplay="autoplay" id="my_player" loop="" controls="">
   <source src="resource://filesLocations/foo.webm" type='video/webm; codecs="vp8, vorbis"' />
</video> 
```

关于该主题的各种阅读表明文件没有安全限制，但图片可以正常加载，但 .webm 视频不会但是我在 Gecko 代码中找不到任何内容表明它有任何东西阻止文件加载。有谁知道这里出了什么问题？

（浏览器确实支持html5）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T06:22:23.640

这个错误刚刚在 Geckofx 15 中得到修复。

可以在这里看到修复：

[https://bitbucket.org/geckofx/geckofx-15.0/changeset/b9b2f044370ea93db954a1084ddd912db0940fec](https://bitbucket.org/geckofx/geckofx-15.0/changeset/b9b2f044370ea93db954a1084ddd912db0940fec)

# excel - 是否可以在通过 ODBC 连接连接到 SQL Server 数据库的 Excel 2010 数据透视表中插入切片器？

> ID：11737946
> 
> 赞同：0
> 
> 时间：2012-07-31T10:19:59.023
> 
> 标签：excel, odbc, excel-2010, pivot-table

数据源通过连接字符串和命令文本连接，如下所示：

```
With objPivotCache
    .connection = "DRIVER=SQL Server;Integrated Security=SSPI;SERVER=Server035;WSID=;DATABASE=db_Warehouse"
    .CommandText = strSomeCommandString
End With 
```

我问的原因是因为当我尝试在数据透视表的选项选项卡中插入切片器时，“插入切片器”选项显示为灰色。

# java - 一对多休眠

> ID：11737954
> 
> 赞同：2
> 
> 时间：2012-07-31T10:20:10.953
> 
> 标签：java, hibernate

嗨，我正在尝试进行一对多插入，但我遇到了问题。我有两张桌子：

```
CREATE TABLE users_app (
  user_id int UNSIGNED NOT NULL AUTO_INCREMENT,
  user_number varchar(45) NOT NULL default '0',
  user_password varchar(45) NOT NULL default '0',
  os int(1) unsigned NOT NULL,
  token varchar(500) NOT NULL,
  PRIMARY KEY (`user_id`)
) ENGINE=InnoDB AUTO_INCREMENT=20 DEFAULT CHARSET=utf8;

CREATE TABLE user_app_devices(  
    id int AUTO_INCREMENT PRIMARY KEY,  
    user_id int UNSIGNED NOT NULL,
    device_name varchar(45) NOT NULL,
    FOREIGN KEY (user_id) REFERENCES users_app (user_id)  
)ENGINE=InnoDB CHARSET=utf8; 
```

我的课程：

```
@Entity
@Table(name="user_app_devices")
public class UserAppDevice implements Serializable {
private static final long serialVersionUID = 1L;

@Id
private int id;

@Column(name="device_name")
private String deviceName;

//bi-directional many-to-one association to UsersApp
@ManyToOne
@JoinColumn(name="user_id")
private UsersApp usersApp;

public UserAppDevice() {
}

public int getId() {
    return this.id;
}

public void setId(int id) {
    this.id = id;
}

public String getDeviceName() {
    return this.deviceName;
}

public void setDeviceName(String deviceName) {
    this.deviceName = deviceName;
}

public UsersApp getUsersApp() {
    return this.usersApp;
}

public void setUsersApp(UsersApp usersApp) {
    this.usersApp = usersApp;
}

}

@Entity
@Table(name="users_app")
public class UsersApp implements Serializable {
private static final long serialVersionUID = 1L;

@Id
@Column(name="user_id")
private int userId;

private int os;

private String token;

@Column(name="user_number")
private String userNumber;

@Column(name="user_password")
private String userPassword;

//bi-directional many-to-one association to UserAppDevice
@OneToMany(mappedBy="usersApp")
private List<UserAppDevice> userAppDevices;

public UsersApp() {
}

public int getUserId() {
    return this.userId;
}

public void setUserId(int userId) {
    this.userId = userId;
}

public int getOs() {
    return this.os;
}

public void setOs(int os) {
    this.os = os;
}

public String getToken() {
    return this.token;
}

public void setToken(String token) {
    this.token = token;
}

public String getUserNumber() {
    return this.userNumber;
}

public void setUserNumber(String userNumber) {
    this.userNumber = userNumber;
}

public String getUserPassword() {
    return this.userPassword;
}

public void setUserPassword(String userPassword) {
    this.userPassword = userPassword;
}

public List<UserAppDevice> getUserAppDevices() {
    return this.userAppDevices;
}

public void setUserAppDevices(List<UserAppDevice> userAppDevices) {
    this.userAppDevices = userAppDevices;
}

public UsersApp(int os, String token, String userNumber, String userPassword) {
    this.os = os;
    this.token = token;
    this.userNumber = userNumber;
    this.userPassword = userPassword;
} 
```

我想用设备添加新用户

我试试这段代码：

```
 Session session = (Session) em.getDelegate();
    session.beginTransaction();

    UsersApp user = new UsersApp(os, token, userNumber, userPassword);

    session.save(user);

    UserAppDevice ud = new UserAppDevice();

    ud.setUsersApp(user);
    ud.setDeviceName(device);

    session.save(ud);

    session.getTransaction().commit(); 
```

但我面临例外：

```
13:16:48,516 WARN  [org.hibernate.engine.jdbc.spi.SqlExceptionHelper] (http--0.0.0.0-8080-3) SQL Error: 1452, SQLState: 23000
13:16:48,517 ERROR [org.hibernate.engine.jdbc.spi.SqlExceptionHelper] (http--0.0.0.0-8080-3) Cannot add or update a child row: a foreign key constraint fails (`application`.`user_a
pp_devices`, CONSTRAINT `user_app_devices_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users_app` (`user_id`))
13:16:48,520 ERROR [org.jboss.as.ejb3.tx.CMTTxInterceptor] (http--0.0.0.0-8080-3) javax.ejb.EJBTransactionRolledbackException: Cannot add or update a child row: a foreign key const
raint fails (`application`.`user_app_devices`, CONSTRAINT `user_app_devices_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users_app` (`user_id`))
13:16:48,524 ERROR [org.jboss.ejb3.invocation] (http--0.0.0.0-8080-3) JBAS014134: EJB Invocation failed on component DeviceRegisterDAOImpl for method public abstract void com.break
id.ejb.model.DeviceRegisterDAO.add(int,java.lang.String,java.lang.String,java.lang.String,java.lang.String): javax.ejb.EJBTransactionRolledbackException: Cannot add or update a chi
ld row: a foreign key constraint fails (`application`.`user_app_devices`, CONSTRAINT `user_app_devices_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users_app` (`user_id`))
        at org.jboss.as.ejb3.tx.CMTTxInterceptor.handleInCallerTx(CMTTxInterceptor.java:139) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInCallerTx(CMTTxInterceptor.java:204) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.as.ejb3.tx.CMTTxInterceptor.required(CMTTxInterceptor.java:306) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.as.ejb3.tx.CMTTxInterceptor.processInvocation(CMTTxInterceptor.java:190) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
        at org.jboss.as.ejb3.remote.EJBRemoteTransactionPropagatingInterceptor.processInvocation(EJBRemoteTransactionPropagatingInterceptor.java:80) [jboss-as-ejb3-7.1.1.Final.jar:
7.1.1.Final] 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:26:25.917

您还没有告诉 Hibernate UserApp 的 ID 是由数据库自动生成的：

```
@Id
@GeneratedValue(strategy = IDENTITY)
@Column(name="user_id")
private int userId; 
```

（并对其他实体做同样的事情）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:34:52.987

由于您使用的是双向的，因此请如下更改您的客户端代码。

```
Session session = (Session) em.getDelegate();
session.beginTransaction();
UserAppDevice ud = new UserAppDevice();
ud.setDeviceName(device);
UsersApp user = new UsersApp(os, token, userNumber, userPassword);
user.setUserAppDevices(new ArrayList<UserAppDevice>())
user.getUserAppDevices().add(ud);
session.save(user);
session.getTransaction().commit(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:38:52.727

正如 JB Nizet 所提到的，您缺少自动生成的策略。

另一种方法是`UUID`用作您的`id`列并自己创建值

```
@Id
private UUID id = UUID.randomUUID(); 
```

另外，不要忘记设置`equals/hashCode`使用[JPA hashCode() / equals() dilemma](https://stackoverflow.com/questions/5031614)`id`中讨论死的字段

顺便说一句，您为什么使用`Session`（特定于休眠）而不是坚持使用 JPA 的 API？

# sqlite - 在 sqlite 数据库中存储为 BLOB 的图像的最大大小是多少？

> ID：11737955
> 
> 赞同：9
> 
> 时间：2012-07-31T10:20:20.757
> 
> 标签：sqlite

我将图像作为 BLOB 存储在 sqlite 数据库中。谁能告诉我要在 sqlite 数据库中存储为 BLOB 的图像的最大大小。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-31T10:26:20.363

查看[SQLite 的限制](https://www.sqlite.org/limits.html)

> SQLite 中字符串或 BLOB 中的最大字节数由预处理器宏 SQLITE_MAX_LENGTH 定义。该宏的默认值为 10 亿（1 亿或 1,000,000,000）。

这大致相当于 1 Gb。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-17T10:18:29.083

存储在 BLOB 中的最大数据大小在 sqlite 数据库中可以达到 2.1 Gb。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-24T18:57:01.287

截至 2020 年 9 月：**2.15GB**

> [https://www.sqlite.org/limits.html](https://www.sqlite.org/limits.html)
> 
> 当前实现仅支持长度为 231-1 或 2147483647 的字符串或 BLOB

解决方法：

*   压缩你的文件。
*   按列拆分文件。
*   按行拆分文件。
*   使用多个 blob 字段。

# android - 将新列添加到数据库表中

> ID：11737956
> 
> 赞同：1
> 
> 时间：2012-07-31T10:20:23.127
> 
> 标签：android, sqlite

如何将新列添加到表中？我有一个名为的表`Subject`和一个名为 的列`module`。现在我想在表中添加名为and 的`question`新列。例子：`answer``Subject`

表：主题

模块：数学

问题：2x2

答案：4

*数据库助手：*

```
public class DBHelper extends SQLiteOpenHelper {
// Database Version
private static final int DATABASE_VERSION = 1;

// Database Name
private static final String DATABASE_NAME = "Voting";

// Set table name
static final String TABLE_NAME = "Subject";

// Set Table Columns
private static final String KEY_ID = "id";
static final String KEY_MODULE = "module";
static final String KEY_QUESTION = "question";
static final String KEY_ANSWER = "answer";

public DBHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

// Creating Tables
@Override
public void onCreate(SQLiteDatabase db) {
    // Category table create query
    String CREATE_CATEGORIES_TABLE = "CREATE TABLE " + TABLE_NAME + "("
            + KEY_ID + " INTEGER PRIMARY KEY," + KEY_MODULE + " TEXT" + KEY_QUESTION + "TEXT" + KEY_ANSWER + "TEXT)";
    db.execSQL(CREATE_CATEGORIES_TABLE);
}

// Upgrading database
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // Drop older table if existed
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);

    // Create tables again
    onCreate(db);
}

/**
 * Inserting new Column into subjects table
 * */
public void insertColumn(String column){
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_MODULE, column);

    // Inserting Row
    db.insert(TABLE_NAME, null, values);
    db.close(); // Closing database connection
} 
```

如果我的代码在答案中更新以便我可以轻松理解，这将很有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T10:25:43.527

使用[`ALTER TABLE`](http://www.sqlite.org/lang_altertable.html)：

```
db.execSQL("ALTER TABLE " + TABLE_NAME + " ADD COLUMN " + column + " TEXT"); 
```

您可以将列类型 (TEXT) 更改为您需要的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-08T10:42:44.537

如果要添加列而不丢失数据，则必须更改列而不是删除并创建新表...

```
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
{

    if(newVersion > oldVersion)
    {
        db.execSQL("alter table table_name add column ....");
    }
} 
```

此外，如果您想检查和平衡是否存在列，您可以检查然后更改哪些有助于不让您的应用崩溃....谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:29:28.760

如果您放下桌子，您将丢失所有数据。而不是这个使用这个；

```
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    if(oldVersion==1){
        db.execSQL("alter table xxx add column ....");
    }
} 
```

永远不要丢桌子。否则你会丢失你的数据！！！

# sql - SQL Query 需要很长时间才能返回数据

> ID：11737959
> 
> 赞同：0
> 
> 时间：2012-07-31T10:20:25.047
> 
> 标签：sql, oracle

寻找一种更好的方法来编写这个查询，我的 SQL 技能不是很好，基本真的所以寻找任何指针来使它更好。这只是前两列，完整报告还有 10 列。

我正在采用一组特定的维修类型，并通过计数和计算对它们进行分析。第一个是提前到本财政年度的工作，第二个是当前收到的工作总数。

```
SELECT
    "Type",
    (
        SELECT
            NVL (COUNT(jjo.jjobno), 0)
        FROM
            jjobh jjo
        WHERE
            jjo.jclcode = 'L'
        AND jjo.jstatus <> '6'
        AND jjo.year_rec <> (
            SELECT
                sub_code
            FROM
                code_table
            WHERE
                main_code = 'YEAR'
        )
        AND (
            week_comp IS NULL
            OR year_comp = (
                SELECT
                    sub_code
                FROM
                    code_table
                WHERE
                    main_code = 'YEAR'
            )
        )
        AND jjo.jrepair_type = "Type"
    ) AS "B/F",
    (
        SELECT
            NVL (COUNT(jjo.jjobno), 0)
        FROM
            jjobh jjo
        WHERE
            jjo.jclcode = 'L'
        AND jjo.jstatus <> '6'
        AND jjo.year_rec = (
            SELECT
                sub_code
            FROM
                code_table
            WHERE
                main_code = 'YEAR'
        )
        AND jjo.jrepair_type = "Type"
    ) AS "Recvd"
FROM
    (
        SELECT
            rep.repair_type_code AS "Type"
        FROM
            repair_type rep
        WHERE
            rep.client = 'L'
        AND rep.work_centre = '004682'
        ORDER BY
            rep.repair_type_code
    )
ORDER BY
    "Type"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:58:54.233

你的代码是一团糟。我怀疑你想要类似的东西：

```
SELECT jjo.jrepair_type, count(*) as valbf
FROM (SELECT coalesce(COUNT(jjo.jjobno), 0)
      FROM jjobh jjo cross join
           (SELECT sub_code
            FROM code_table
            WHERE main_code = 'YEAR'
           ) sc
      WHERE jjo.jclcode = 'L' AND
            jjo.jstatus <> '6' AND
            jjo.year_rec <> sc.sub_code AND
            (week_comp IS NULL OR
             year_comp = sc.sub_code
            ) 
     ) jjo join
     (SELECT rep.repair_type_code AS "Type"
      FROM repair_type rep
      WHERE rep.client = 'L' AND
            rep.work_centre = '004682'
     ) rtc
     on jjo.jrepair_type = rtc.repair_type_code
group by jjo.jrepair_type; 
```

看起来您想将“jjo”表连接到“修复类型代码”表，生成有关每种修复类型的信息。子查询中的 order by 是没用的。

我的建议是将“jjo”表移到外部“from”。您还应该将 WHERE 子句移到最外面的 WHERE 子句（我没有这样做）。我还没有完全弄清楚日期逻辑，但这可能会让你走上正轨。

# iphone - 图像编辑问题

> ID：11737960
> 
> 赞同：0
> 
> 时间：2012-07-31T10:20:28.090
> 
> 标签：iphone, ios

我正在开发一个需要在图像上提供“Droste 效果”的应用程序。我在 Google 上进行了更多搜索，但没有找到这种效果的编程解决方案。下面的效果示例。

[http://apping.me/ios/4eb514ba8491783f5b0001e2/droste+vision.html](http://apping.me/ios/4eb514ba8491783f5b0001e2/droste+vision.html)

[http://www.pmavridis.com/iDroste/iDroste.html](http://www.pmavridis.com/iDroste/iDroste.html)

请给我建议或任何教程链接。我将如何完成这项任务？提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T10:29:54.980

Droste 效应是一种用一些密集的数学和递归函数制成的技巧。请阅读[http://www.josleys.com/article_show.php?id=82](http://www.josleys.com/article_show.php?id=82)。如果您不了解递归，请阅读[http://en.wikipedia.org/wiki/Recursion](http://en.wikipedia.org/wiki/Recursion)。由于您的要求非常具体，我怀疑会有很多人碰巧拥有用 iphone 编程语言编写的 Droste 效果代码，但上面的链接应该可以帮助您了解创建自己的数学背后的数学原理。祝你好运。

# python - 在 Python 中处理列表列表

> ID：11737965
> 
> 赞同：2
> 
> 时间：2012-07-31T10:20:44.440
> 
> 标签：python, list, iteration

所以我有一个 biiiig 列表，看起来像：

`big_list = [[17465, [22, 33, 1, 7, 83, 54, 84, -5], '123-432-3'], [13254, [42, 64, 4, -5, 75, -2, 1, 6], '1423-1762-4'], [...........................................................................................................], [17264, [22, 75, 54, 2, 87, 12, 23, 86], '14234-453-1']]`

我需要遍历整个列表列表，当它检测到两个或多个相同的字符串（每个内部列表的元素 [2]，例如'123-423-3'）时，它将合并整数列表（元素 [ 1]) 与该字符串相关，其中包含与检测到的最后一个相同值字符串相关的整数列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:53:56.140

我认为这可以解决您的问题。

```
big_list = [[17465, [22, 33, 1, 7, 83, 54, 84, -5], '123-432-3'], \
            [13254, [42, 64, 4, -5, 75, -2, 1, 6], '1423-1762-4'], \
            [17264, [22, 75, 54, 2, 87, 12, 23, 86], '14234-453-1']]

# adding same string element to big_list
big_list.append([22222, [10, 12, 13], '14234-453-1'])
#now should itterate big_list, and when '14234-453-1' is found in 2 inner lists.
#it will put the values [10, 12, 13] into the first instance and remove the second.

print "Before:"
for l in big_list:
      print l

seen_list = {}
del_list = []
for inner in xrange(len(big_list)):
      if big_list[inner][2] in seen_list:
            for item in big_list[inner][1]:
                  big_list[seen_list[big_list[inner][2]]][1].append(item)
            del_list.append(inner)
      else:
            seen_list[big_list[inner][2]] = inner

for i in reversed(del_list):
      del big_list[i]

print "after:"

for l in big_list:
      print l 
```

结果：

```
>>> 
Before:
[17465, [22, 33, 1, 7, 83, 54, 84, -5], '123-432-3']
[13254, [42, 64, 4, -5, 75, -2, 1, 6], '1423-1762-4']
[17264, [22, 75, 54, 2, 87, 12, 23, 86], '14234-453-1']
[22222, [10, 12, 13], '14234-453-1']
after:
[17465, [22, 33, 1, 7, 83, 54, 84, -5], '123-432-3']
[13254, [42, 64, 4, -5, 75, -2, 1, 6], '1423-1762-4']
[17264, [22, 75, 54, 2, 87, 12, 23, 86, 10, 12, 13], '14234-453-1'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:12:01.920

如果您在以下任何地方寻找字符串匹配项，这就是我的解决方案`big_list`：

```
>>> from collections import OrderedDict
>>> big_list = [[17465, [1, 2, 3], '123-432-3'], [13254, [4, 5, 6], '1423-1762-4'], [17264, [7, 8, 9], '14234-453-1'], [12354, [10, 11, 12], '14234-453-1'], [12358, [13, 14], '14234-453-1'], [99213, [15], '123-999-3'], [27461, [16, 17, 18], '123-432-3']]
>>> def amalgamate(seq):
        d = OrderedDict()
        for num, ints, text in big_list:
            d.setdefault(text, [num, [], text])[1].extend(ints)
        return d.values()

>>> amalgamate(big_list)
[[17465, [1, 2, 3, 16, 17, 18], '123-432-3'], [13254, [4, 5, 6], '1423-1762-4'], [17264, [7, 8, 9, 10, 11, 12, 13, 14], '14234-453-1'], [99213, [15], '123-999-3']] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:51:12.117

以目前的形式，问题尚不清楚，但这可能是您正在寻找的（这适用于连续匹配）：

```
>>> from itertools import groupby
>>> from operator import itemgetter
>>> big_list = [[17465, [1, 2, 3], '123-432-3'], [13254, [4, 5, 6], '1423-1762-4'], [17264, [7, 8, 9], '14234-453-1'], [12354, [10, 11, 12], '14234-453-1'], [12358, [13, 14], '14234-453-1'], [99213, [1], '123-999-3']]
>>> def amalgamate(seq):
        for k, g in groupby(seq, itemgetter(2)):
            num, ints, text = next(g)
            for sublist in g:
                ints.extend(sublist[1])
            yield [num, ints, text]

>>> list(amalgamate(big_list))
[[17465, [1, 2, 3], '123-432-3'], [13254, [4, 5, 6], '1423-1762-4'], [17264, [7, 8, 9, 10, 11, 12, 13, 14], '14234-453-1'], [99213, [1], '123-999-3']] 
```

# ruby - 在 github 页面中使用 Jekyllbootstrap 创建站点？

> ID：11737969
> 
> 赞同：0
> 
> 时间：2012-07-31T10:20:55.610
> 
> 标签：ruby, jekyll, github-pages

我最近使用[Jekyll](http://jekyllbootstrap.com/)创建了一个站点。我的网站在 github 中启动并运行。在我的本地目录中，我有一个名为`_sites`. `index.hmtl`我按照自己的意愿更改了那里的内容（我的编辑和其他文件）。

我尝试运行：

```
jekyll --server 
```

我可以看到我在本地机器上所做的所有更改。

但是当我提交并推动时。我无法在我的网站上看到更改。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:13:44.613

如果你有插件，GitHub Pages 不会自动为你的 Jekyll 网站提供服务。

# joomla - Joomla：我可以在注册时自动分配国家/语言用户组吗？

> ID：11737970
> 
> 赞同：1
> 
> 时间：2012-07-31T10:20:55.743
> 
> 标签：joomla, multilingual

我正在为 Joomla 2.5 中的客户开发一个多语言网站。我想知道是否有任何方法可以根据新注册用户注册时使用的语言自动将他们分配到组中。

也就是说，如果我访问意大利网站并注册，我将自动进入“意大利”组。

我想要这样做的根本原因是为了更好地分隔我的 Kunena 论坛中的论坛部分，例如，意大利用户只能访问意大利论坛。有没有办法以更好的方式解决这个问题？

此外，我知道这绝不是对坚持各自语言论坛的人的任何保证，而是希望尽可能多地指导用户的客户的要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T14:53:52.483

据我所知，语言信息存储在 cookie 中，因此您无法在服务器端访问它们。

您应该创建一个用户插件：当用户注册时，您可以尝试使用IP查找来猜测国家，然后将其添加到链接的用户组中。

# java - 在不使用策略文件的情况下以编程方式授予权限

> ID：11737971
> 
> 赞同：12
> 
> 时间：2012-07-31T10:20:57.123
> 
> 标签：java, permissions, rmi, policyfiles

如何在不使用策略文件的情况下以编程方式授予 RMI 应用`AllPermissions`程序**？**

**更新：**

经过一番研究，我编写了这个自定义策略类并通过`Policy.setPolicy(new MyPolicy())`.

**现在我收到以下错误：**

> 无效权限：（java.io.FilePermission \C:\eclipse\plugins\org.eclipse.osgi_3.7.0.v20110613.jar 读取

```
class MyPolicy extends Policy {

    @Override
    public PermissionCollection getPermissions(CodeSource codesource) {
        return (new AllPermission()).newPermissionCollection();
    }

} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-01T13:39:52.917

根据**@EJP**的建议，我使用`-Djava.security.debug=access`并在策略文件中找到了所有需要的权限：

> 授予 { 权限 java.net.SocketPermission "*:1024-", "connect, resolve"; };
> 
> 授予 { 权限 java.util.PropertyPermission "*", "read, write"; };
> 
> 授予 { 权限 java.io.FilePermission "<>", "read"; };

但是因为我不想创建策略文件，所以我找到了一种通过扩展`java.security.Policy`类并在我的应用程序启动时使用设置策略以编程方式复制它的方法`Policy.setPolicy(new MinimalPolicy());`

```
public class MinimalPolicy extends Policy {

    private static PermissionCollection perms;

    public MinimalPolicy() {
        super();
        if (perms == null) {
            perms = new MyPermissionCollection();
            addPermissions();
        }
    }

    @Override
    public PermissionCollection getPermissions(CodeSource codesource) {
        return perms;
    }

    private void addPermissions() {
        SocketPermission socketPermission = new SocketPermission("*:1024-", "connect, resolve");
        PropertyPermission propertyPermission = new PropertyPermission("*", "read, write");
        FilePermission filePermission = new FilePermission("<<ALL FILES>>", "read");

        perms.add(socketPermission);
        perms.add(propertyPermission);
        perms.add(filePermission);
    }

} 
```

* * *

```
class MyPermissionCollection extends PermissionCollection {

    private static final long serialVersionUID = 614300921365729272L;

    ArrayList<Permission> perms = new ArrayList<Permission>();

    public void add(Permission p) {
        perms.add(p);
    }

    public boolean implies(Permission p) {
        for (Iterator<Permission> i = perms.iterator(); i.hasNext();) {
            if (((Permission) i.next()).implies(p)) {
                return true;
            }
        }
        return false;
    }

    public Enumeration<Permission> elements() {
        return Collections.enumeration(perms);
    }

    public boolean isReadOnly() {
        return false;
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-20T22:17:32.740

因为你的

> 新的 AllPermission()).newPermissionCollection()

被Java视为不可变的（为什么要向已经允许所有权限的集合添加权限？），并且因为Java会尝试向集合添加权限。这就是错误消息的来源 - Java 尝试将 java.io.FilePermission 添加到您的 AllPermission。

相反，请执行以下操作：

```
class MyPolicy extends Policy {
    @Override
    public PermissionCollection getPermissions(CodeSource codesource) {
        Permissions p = new Permissions();
        p.add(new PropertyPermission("java.class.path", "read"));
        p.add(new FilePermission("/home/.../classes/*", "read"));
        ... etc ...
        return p;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T13:01:05.287

不要安装 SecurityManager。仅当您使用代码库功能时才需要它，并且如果您需要适当的 .policy 文件，

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-20T15:55:20.773

## 简短的解决方案

将更新后的解决方案扩展到：

```
public class MyPolicy extends Policy
{
    @Override
    public PermissionCollection getPermissions(CodeSource codesource)
    {
        Permissions p = new Permissions();
        p.add(new AllPermission());
        return p;
    }
} 
```

考虑一下，[Policy.getPermissions()](https://docs.oracle.com/javase/8/docs/api/java/security/Policy.html#getPermissions-java.security.CodeSource- "JavaDoc")必须始终返回一个**可变**的PermissionCollection

> **返回：** ...如果支持此操作，则返回的权限集必须是新的可变实例，并且必须支持异构权限类型...

该解决方案已经有效，因为它将 AllPermission 对象添加到 的每次调用中`Policy.getPermissions(ProtectionDomain)`，即`Policy.getPermissions(CodeSource)`.

## 清洁溶液

但是有一个更干净的解决方案，它不会跟踪任何不必要的其他权限，因为 AllPermissions 已经允许几乎所有内容。

```
public class MyPolicy extends Policy
{
    private static class AllPermissionsSingleton extends PermissionCollection
    {
        private static final long serialVersionUID = 1L;
        private static final Vector<Permission> ALL_PERMISSIONS_VECTOR = new Vector<Permission>(Arrays.asList(new AllPermission()));

        @Override
        public void add(Permission permission)
        {
        }

        @Override
        public boolean implies(Permission permission)
        {
            return true;
        }

        @Override
        public Enumeration<Permission> elements()
        {
            return ALL_PERMISSIONS_VECTOR.elements();
        }

        @Override
        public boolean isReadOnly()
        {
            return false;
        }
    }

    private static final AllPermissionsSingleton ALL_PERMISSIONS_SINGLETON = new AllPermissionsSingleton();

    @Override
    public PermissionCollection getPermissions(CodeSource codesource)
    {
        return ALL_PERMISSIONS_SINGLETON;
    }
} 
```

# c++ - 基于服务器的嵌入式数据库

> ID：11737978
> 
> 赞同：2
> 
> 时间：2012-07-31T10:21:17.107
> 
> 标签：c++, sql, database

我试图找出哪个数据库适合我的需要。我的 c++ 项目需要一个在出售给客户的设备上运行的数据库。主要是它只会将数据和事件记录到本地 SSD 磁盘上的数据库中。写入速度是最重要的，因为记录频率可高达 1000Hz（每 1ms 1 次写入）。必须能够从其他设备远程访问数据，以对数据进行图形可视化。我已经用 3rd 方服务器、mysql 和 postgres 测试了 sqlite。与其他相比，Postgres 似乎相当慢。正如我所读到的，如果并发性增加，Postgres 会变得更好，但在我的情况下，并发性将会非常低。我想知道是否还有其他数据库可以满足此类需求。它还觉得 mysql 和 postgres 对于这样的要求来说会有点矫枉过正。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T10:25:54.800

PostgreSQL 是企业级数据库，不适合嵌入式设备。MySQL 虽然更小，但也非常适合嵌入式设备。SQLite 是最常见的，并且广泛用于嵌入式设备，甚至很小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T10:24:34.083

选择 sqlite，因为您的要求表明您的应用程序将在 DEVICES 上运行，并且大多数情况下我来宾他们是移动设备，几乎所有移动设备都支持 sqlite .... 所以去吧...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:44:24.350

考虑一下 BerkeleyDB。如果您需要支持等，它是一个占用空间小的嵌入式数据库，拥有大量商业支持者。有开源版本和商业许可版本。不支持 SQL 查询，但除非您执行非常复杂的关系查询，否则这应该不是问题。并发支持非常好，尽管初始数据库配置往往很笨拙。

可扩展存储引擎形式有一个仅限 Microsoft 的替代方案，它是免费的，可在大多数版本的 Windows 上使用。只要您觉得不需要 SQL，还有各种其他类似“DBM”的简单嵌入式数据库。

您也可以考虑使用内存中的“NoSQL”式数据库；像 Redis 这样的东西会非常高效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T00:37:26.873

[RDM Embedded](http://www.raima.com/products/rdm-embedded/)可能非常适合您。我与 Raima 合作，该产品允许您远程访问数据，如果需要，您可以使用内存或混合磁盘/内存数据库功能 (www.raima.com/in-memory-database)至。在这种特殊情况下，对您有用的是 RDM 产品可以一起用于管理嵌入式、移动、桌面或服务器设备之间的数据。这可以通过我们的产品 RDM Embedded、RDM Mobile、RDM Workgroup 和 RDM Server 轻松设置。

如果您想在下载完整产品之前快速测试我们数据库的性能，请访问我们的[数据库性能爆米花示例](http://www.raima.com/performance/)。

# cocoa - NSTableHeaderView 防止自动布局在拆分视图中调整滚动视图的大小

> ID：11737981
> 
> 赞同：3
> 
> 时间：2012-07-31T10:21:44.630
> 
> 标签：cocoa, interface-builder, nssplitview, autolayout

问题：为什么有一个标题视图会阻止滚动视图被自动布局调整大小？

我正在尝试将我的自定义视图嵌入到滚动视图中，而滚动视图又包含在拆分视图中。我在 Xcode 4.5 DP 4 中使用 Interface Builder 创建了以下视图层次结构，但在 Xcode 4.4 中似乎也发生了同样的问题。

```
NSWindow
  NSView (content view of the window)
    NSSplitView
      NSView (split view panel)
      NSView (split view panel)
        NSScrollView
          TestView (my custom view) 
```

现在，如果 TestView 提供了 NSTableHeaderView（通过 -headerView）属性，则拆分视图分隔线不能一直拖到底部（或右侧）以隐藏 TestView，而是停止到 TestView 的初始宽度或高度的边界。如果 -headerView 属性返回 nil，则可以自由拖动分隔线。

每次都可以重现这一点，只需创建一个新的 Cocoa 应用程序项目，添加视图并运行项目即可。步骤：

1.  创建一个新的 Cocoa 应用程序项目
2.  使用返回 NSTableHeaderView 实例的 headerView 属性创建 TestView 类。
3.  编辑 MainMenu.xib 并添加拆分视图
4.  添加自定义视图并使其成为 TestView
5.  选择编辑器 -> 嵌入 -> 滚动视图
6.  运行项目

（没有约束或其他界面生成器菜单）

测试视图.m：

```
@implementation TestView {
    NSTableHeaderView *_header;
}

- (NSTableHeaderView *)headerView
{
    if (!_header) {
        _header = [[NSTableHeaderView alloc]
                   initWithFrame:NSMakeRect(0.0, 0.0, 100.0, 17.0)];
    }

    return _header;
}

@end 
```

任何指针，我应该怎么做才能让拆分视图分隔线再次移动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T07:27:27.143

在一个方便的类中实现这个 NSSplitViewProtocol 方法：

```
- (BOOL)splitView:(NSSplitView *)splitView shouldAdjustSizeOfSubview:(NSView *)subview {return TRUE;} 
```

确保将拆分视图的委托输出连接到类对象。

现在可以将拆分视图调整为任何大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T07:53:26.577

我的解决方案是手动删除表头的自动调整大小约束：

```
NSTableHeaderView *headerView = outlineView.headerView;
NSView *headerViewSuperview = headerView.superview;
[headerViewSuperview removeFromSuperview];
headerView.superview.translatesAutoresizingMaskIntoConstraints = NO;
[scrollView addSubview:headerViewSuperview]; 
```

# qt - Qt 多语言 QCombobox

> ID：11737982
> 
> 赞同：0
> 
> 时间：2012-07-31T10:21:48.563
> 
> 标签：qt, qcombobox, multilingual

我遇到了多语言 qt 的问题（即时更改语言）。我的表格有一个组合框，当语言改变时应该翻译。当 languageChanged 时，应用调用方法 retranslateUi() 来翻译组合框中的项目。组合框有对应于信号 currentIndexChanged() 的槽。

```
void on_comboBox_currentIndexChanged(int index)
{
//do something
} 
```

但是当调用方法 retranslateUi() 时，我这样做：

```
void retranslateUi()
{
ui->comboBox->clear();
ui->comboBox->insertItems(0, QStringList()
         << QApplication::translate("SettingDialog", "English", 0, QApplication::UnicodeUTF8)
         << QApplication::translate("SettingDialog", "French", 0, QApplication::UnicodeUTF8)
        );
} 
```

问题是：retranslateUi() 中的每个语句都会发出信号 currentIndexChanged()，然后插槽会再次调用。

我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-09T10:58:42.843

另一种解决方案是临时阻止对象的信号：

```
void retranslateUi()
{
    auto isBlocked = ui->comboBox->blockSignals(true);
    ui->comboBox->clear();
    ui->comboBox->insertItems(0, QStringList()
     << QApplication::translate("SettingDialog", "English", 0, QApplication::UnicodeUTF8)
     << QApplication::translate("SettingDialog", "French", 0, QApplication::UnicodeUTF8);
    );
    ui->comboBox->blockSignals(isBlocked);
} 
```

或者从 Qt 5.3 开始使用异常安全的 RAII QSignalBlocker

```
QSignalBlocker blocker(ui->comboBox); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:11:37.317

`clear()`并且`insertItems()`将触发`currentIndexchanged(int)` 组合框的 SLOT 功能，因为前者将索引更改为 -1，稍后也会在您在位置 0 处插入项目时更改索引。

所以`on_comboBox_currentIndexChanged(int)`通过使用标志来限制如下......

```
void on_comboBox_currentIndexChanged(int index)
{
if(!retranslateFlag)
//do something
}

void retranslateUi()
{
retranslateFlag = true;
ui->comboBox->clear();
ui->comboBox->insertItems(0, QStringList()
     << QApplication::translate("SettingDialog", "English", 0, QApplication::UnicodeUTF8)
     << QApplication::translate("SettingDialog", "French", 0, QApplication::UnicodeUTF8)
    );
retranslateFlag = false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-07T08:06:01.067

而不是清除`comboBox`您只能通过更改项目的文本`void QComboBox::setItemText(int index, const QString &text)`

```
void retranslateUi()
{
    ui->comboBox->setItemText(0, QApplication::translate("SettingDialog", "English", 0, QApplication::UnicodeUTF8));
    ui->comboBox->setItemText(1, QApplication::translate("SettingDialog", "French", 0, QApplication::UnicodeUTF8));
} 
```

我假设您的解决方案和 ScarCode 的答案将丢失组合框中的当前选定项目。此解决方案不应丢失它。（未测试）

# c++ - 使用 C++ 和 STL 的向量元素乘积

> ID：11737985
> 
> 赞同：4
> 
> 时间：2012-07-31T10:21:52.007
> 
> 标签：c++, stl

在 C++ 中实现元素乘积并不难：

```
vector<float> a_array;
vector<float> b_array;
vector<float> c_array;
vector<float> dot_array;
....
for(int i=0; i<a_array.size(); i++)
{
   float temp;
   temp = a_array[i]*b_array[i]*c_array[i];
   dot_array[i] = temp;
} 
```

这是一个非常简单的实现，我想知道 STL 中是否已经有更有效的算法可用。谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-31T10:35:51.973

`std::transform`可用于将两个向量相乘：

```
#include <algorithm>
#include <functional>

// Precondition: b.size() >= a.size() && r.size() >= a.size()
std::transform(a.begin(), a.end(), b.begin(), r.begin(), std::multiplies<float>()); 
```

没有超过两个输入序列的类似标准算法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-31T10:24:06.107

看看[std::inner_product](http://en.cppreference.com/w/cpp/algorithm/inner_product)。

**编辑**当问题是关于点积时，我发布了这个答案。对于元素产品，请参阅[std::transform](http://en.cppreference.com/w/cpp/algorithm/transform)的第二个版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:24:54.983

该类`std::vector`实际上不是一个数学向量，而是一个动态大小的数组，一个集合。你可能会因为它的名字而感到困惑。最好定义一个`vector`实现数学运算的真实类，而不是（错误）使用`std::vector`.

# c++ - 在 C++ 中摆脱 CString 中的换行符

> ID：11737986
> 
> 赞同：0
> 
> 时间：2012-07-31T10:21:56.403
> 
> 标签：c++, xml, string, newline, cstring

我有一个最初是 CString 的 html/xml 文档，我想去掉所有的换行符，基本上把所有的东西都放在一行中。我尝试将其转换为 std::String 并使用：

```
#include <algorithm>
#include <string>

str.erase(std::remove(str.begin(), str.end(), '\n'), str.end()); 
```

但它没有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T10:57:33.870

为了阻止您的文本块看起来很奇怪，您需要用空格替换换行符。确保同时替换换行符('\n') 和回车符('\r') 字符。

```
CString str = "Line 1 Windows Style\r\n Line 2 Unix Style\n Line 3";
str.Replace('\r', " ");
str.Replace('\n', " ");
str.Replace("  ", " "); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T10:40:00.383

你只需要使用方法 remove

```
CString str = _T("Test newline \nremove"), str2;
str.Remove('\n'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:34:00.530

怎么样？

```
str.Replace("\n", ""); 
```

记录[在这里](http://msdn.microsoft.com/en-us/library/ztyt5e9c)

# c++ - 如何在不使用外部库的情况下使用 SDL 画线

> ID：11737988
> 
> 赞同：4
> 
> 时间：2012-07-31T10:21:57.660
> 
> 标签：c++, sdl

如何使用 SDL c++ 库在两个给定点之间绘制二维线。我不想使用任何其他外部库，例如 SDL_draw 或 SDL_gfx 。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-10-23T16:53:23.883

为遇到相同问题的编码人员提供最新答案。

在 SDL2 中，SDL_Render.h 中有几个函数可以实现这一点，而无需实现您自己的线条绘制引擎或使用外部库。

您可能想要使用：

```
 int SDL_RenderDrawLine( SDL_Renderer* renderer, int x1, int y1, int x2, int y2 ); 
```

其中 renderer 是您之前创建的渲染器，x1 & y1 为开头，x2 & y2 为结尾。

还有一个替代函数，您可以立即绘制一条具有多个点的线，而不是多次调用上述函数：

```
 int SDL_RenderDrawPoints( SDL_Renderer* renderer, const SDL_Point* points, int count ); 
```

其中*renderer*是您之前创建的渲染器，*points*是已知点的固定数组，并*计算*该固定数组中的点数。

所有提到的函数在出错时返回 -1，在成功时返回 0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T10:29:54.907

您可以使用任何线条绘制算法。

> 一些常见且简单的方法是：
> 
> 数字差分分析仪 (DDA)
> 
> Bresenham 线算法
> 
> 吴小林的线算法

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T16:27:40.963

Rosetta Code 有[一些例子](http://rosettacode.org/wiki/Bitmap/Bresenham%27s_line_algorithm#C.2B.2B)：

```
void Line( float x1, float y1, float x2, float y2, const Color& color )
{
    // Bresenham's line algorithm
    const bool steep = (fabs(y2 - y1) > fabs(x2 - x1));
    if(steep)
    {
        std::swap(x1, y1);
        std::swap(x2, y2);
    }

    if(x1 > x2)
    {
        std::swap(x1, x2);
        std::swap(y1, y2);
    }

    const float dx = x2 - x1;
    const float dy = fabs(y2 - y1);

    float error = dx / 2.0f;
    const int ystep = (y1 < y2) ? 1 : -1;
    int y = (int)y1;

    const int maxX = (int)x2;

    for(int x=(int)x1; x<maxX; x++)
    {
        if(steep)
        {
            SetPixel(y,x, color);
        }
        else
        {
            SetPixel(x,y, color);
        }

        error -= dy;
        if(error < 0)
        {
            y += ystep;
            error += dx;
        }
    }
} 
```

# android - 导入示例时出现奇怪的错误

> ID：11737991
> 
> 赞同：1
> 
> 时间：2012-07-31T10:22:01.727
> 
> 标签：android, android-emulator

并感谢您的帮助

我下载了 android book 的示例`android 4 application develop`，现在我导入了项目，但我看到我在控制台中有这个错误

```
 [2012-07-31 12:07:13 - PA4AD_Ch09_MyService] Unable to resolve target 'android-15' 
```

在所有课程中我都有这个：

```
 `import android.app.Activity; // for all import pachage` 
```

我有这个错误：无法解析导入android我看到所有导入包的这个错误

如果我创建一个新项目一切正常。当我使用android sdk tool 15时一切正常，现在我不知道该怎么做，你能帮我吗？

最好的问候

安东尼奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:25:14.693

转到**窗口**菜单 ->**首选项**-> 选择**Android** -> 检查**SDK 位置**

# asp.net - 连接字符串失败

> ID：11737995
> 
> 赞同：1
> 
> 时间：2012-07-31T10:22:15.607
> 
> 标签：asp.net

有人可以帮我解决以下问题吗？

我在笔记本电脑上开发了一个带有登录页面的 ASP.net 应用程序，我的笔记本电脑上有一个本地 SQL 数据库，里面有几个表。它是这样工作的；在visual studio中我调试我的APP，我的登录页面打开，我使用我的凭据登录，它可以工作！但是，我将应用程序移至专用服务器，我在该机器上安装了一个带有 OS W2003 服务器的 sql 服务器，我导入了表格并复制了我的 ASP 文件，还安装了 IIS！当我尝试浏览我的网站时，出现以下错误；（在连接中，我更改了 IP 地址！）

## “/”应用程序中的服务器错误。

配置错误描述：处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。

解析器错误消息：无法识别的配置部分“connectionString”

源错误：

```
<configuration>
<connectionString>
  <add name="TelefoonConnectionString" connectionString="Data Source=172.30.111.174;Initial Catalog=Telefoon;Integrated Security=True"
   providerName="System.Data.SqlClient" /> 
```

> 源文件：C:\Telefoon\Telefoon\web.config 行：9

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:24:56.387

这是connectionStrings afaik ...

```
 <connectionStrings>
      <add name="TelefoonConnectionString" connectionString="Data Source=172.30.111.174;Initial Catalog=Telefoon;Integrated Security=True"
   providerName="System.Data.SqlClient" />
    </connectionStrings> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T10:25:09.467

它的**connectionStrings**而不是**connectionString**

使用以下更正的条目

```
<connectionStrings>
    <add name="TelefoonConnectionString" connectionString="Data Source=172.30.111.174;Initial Catalog=Telefoon;Integrated Security=True"
   providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

# http - 对于可以更改的内容，哪些是与缓存相关的最佳 HTTP 标头？

> ID：11737996
> 
> 赞同：4
> 
> 时间：2012-07-31T10:22:15.183
> 
> 标签：http, caching, cache-control, http-caching, no-cache

我们有几个文件通过 HTTP 提供，并且不时更改。

哪些是与缓存相关的 HTTP 标头，我们应该在 HTTP 响应中返回以优化浏览器加载速度，同时强制浏览器验证它是否具有文件的最新版本？

我们已经设置了一个带有过去日期的“Expires”标题（此时似乎达成了共识）。

但是有些人建议设置此标头：

```
Cache-Control: no-cache, no-store, must-revalidate 
```

但是这个头的问题是它阻止了浏览器保留文件的本地副本，所以每次下载文件，即使它没有改变，也有 200 响应代码。

如果我只是使用：

```
Cache-Control: no-cache 
```

然后浏览器（至少 Firefox 14 和 Chrome 20）保留本地副本，发送`If-Modified-Since`和`If-None-Match`headers，服务器返回 304 代码并且文件内容没有下载。 **这是这些文件可以随时更改的最佳行为。**

问题是我不知道仅设置“无缓存”是否足以强制所有浏览器（包括旧但仍在使用的版本）和代理服务器使用服务器重新验证其本地缓存的副本。

最后，`Pragma: no-cache`标题呢？它也应该包含在 HTTP 响应中吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-01-28T12:12:14.430

Google 开发人员文档有一个[很好的缓存文档，](https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching)并提供了一些很好的使用模式。

例如，它有一个用于定义最佳缓存控制策略的流程图。

![在此处输入图像描述](../Images/d9247a1d7ea1c36237a55d5d231e5ef4.png)

此外，它定义了一个很好的模式来为文件添加指纹并设置更长的期限，例如一年。

> *   使用本地缓存的响应，直到资源“过期”
> *   在 URL 中嵌入文件内容指纹使我们能够强制客户端更新到新版本的响应
> *   每个应用程序都需要定义自己的缓存层次结构以获得最佳性能

![在此处输入图像描述](../Images/d760d52685dc1ff63a7df7b2fdca975e.png)

> 定义每个资源缓存策略的能力允许我们定义“缓存层次结构”，它不仅允许我们控制每个缓存的时间长度，还可以控制访问者看到新版本的速度。例如，我们来分析上面的例子：
> 
> *   HTML 标有“无缓存”，这意味着浏览器将始终在每次请求时重新验证文档，并在内容发生更改时获取最新版本。此外，在 HTML 标记中，我们将指纹嵌入到 CSS 和 JavaScript 资产的 URL 中：如果这些文件的内容发生变化，那么页面的 HTML 也会发生变化，并且将下载 HTML 响应的新副本。
> *   CSS 允许被浏览器和中间缓存（例如 CDN）缓存，并设置为 1 年到期。请注意，我们可以
>     安全地使用 1 年的“远期到期”，因为我们将文件
>     指纹嵌入其文件名：如果 CSS 更新，URL 也会改变
>     。
> *   JavaScript 也设置为 1 年后到期，但被标记为私有，可能是因为它包含一些
>     CDN 不应缓存的私有用户数据。
> *   该图像在没有版本或唯一指纹的情况下被缓存，并设置为 1 天后过期。
> 
> ETag、Cache-Control 和唯一 URL 的组合使我们能够提供所有世界中最好的：长期有效的到期时间、控制可以缓存响应的位置以及按需更新

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T10:57:37.413

最好的方法，也许不是 100% 满足您的需求是：

```
Cache-Control:max-age=315360000, public
Expires:Tue, 23 Aug 2022 10:53:13 GMT 
```

并给文件一个“依赖于内容的文件名”，例如 stylesheet_v32.css。一旦内容发生变化，更改文件名+引用，浏览器就会获得最新版本。如果文件名保持不变，则浏览器不需要请求它。

这在所有浏览器中都是安全且一致的。

无论如何，依靠`Cache-Control: no-cache`浏览器保存它是我不想做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-29T22:01:09.380

我找到了两种强制客户端重新检查缓存的方法：

```
Cache-Control: max-age=0, must-revalidate
Expires: Thu, 01 Jan 1970 00:00:00 GMT 
```

这至少适用于 Firefox。我想 IE 和 Chrome 也会做出正确的反应。它应该适用于使用 HTTP/1.0 的旧浏览器。

使用 HTTP 1.1，您可以使用`ETag`. 在这种情况下，该`must-revalidate`选项不是必需的，因为拥有`ETag`足以让客户做出反应，就好像`must-revalidate`在那里：

```
Cache-Control: max-age=0
ETag: 123
Expires: Thu, 01 Jan 1970 00:00:00 GMT 
```

这将告诉客户端使用`ETag`123 创建数据的缓存版本，并在每次需要该数据的副本时重新检查服务器。然后，您可以使用 回复`304 Not Modified`。

绝对不能使用的两个选项是：`no-cache`和`no-store`.

如果要防止中间缓存缓存数据，请确保添加`private`到`Cache-Control`选项中。

作为一个有趣的功能，您还可以使用一个小的 max-age，例如几分钟，让客户端在这段时间内缓存数据，然后发送一个`GET`您可以回答的 a `304`：

```
Cache-Control: max-age=300
ETag: 123
Expires: Tue, 29 Mar 2015 15:05:00 GMT 
```

在这种情况下，预计浏览器将在 5 分钟内不检查新数据。之后，它会向您发送`If-None-Match: 123`.

# c# - 是否有可能获得某种总是被调用的基本方法？

> ID：11737999
> 
> 赞同：0
> 
> 时间：2012-07-31T10:22:26.343
> 
> 标签：c#, aop, implementation

我有一个抽象的数据提供者，有很多方法。

在实现中，每个方法都需要做一些检查，然后再继续该方法的其余部分。这个检查总是一样的。

所以现在在每种方法中，我都这样做：

```
public override string Method1 {
    if(myCheck()) throw new Exception(...);
    ...Rest of my method1...
}
public override string Method2 {
    if(myCheck()) throw new Exception(...);
    ...Rest of my method2...
}
public override string Method3 {
    if(myCheck()) throw new Exception(...);
    ...Rest of my method3...
} 
```

你明白了..

有没有更简单/更好/更短的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T10:24:29.410

在 C# 中没有内置功能。不过，您可以在[PostSharp](http://www.sharpcrafters.com/)中执行此操作。

```
public sealed class RequiresCheckAttribute : OnMethodBoundaryAspect
{
    public override void OnEntry(MethodExecutionEventArgs e)
    {
        // Do check here.
    }
} 
```

如果您想在纯 C# 中执行此操作，可以让您的生活更轻松的一个小改进是将代码重构为一个单独的方法：

```
public void throwIfCheckFails() {
    if(myCheck()) throw new Exception(...);
}

public override string Method1 {
    throwIfCheckFails();
    // ...Rest of my method1...
} 
```

这并不*强制*每个方法都执行检查 - 它只是让它更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T10:50:03.427

您可以通过以下方式实现基类：

```
public virtual string MethodCalledByMethod1 {
}

public virtual string MethodCalledByMethod2 {
}

public virtual string MethodCalledByMethod3 {
}

public string Method1 {
    if(myCheck()) throw new Exception(...);
    return MethodCalledByMethod1();
}
public string Method2 {
    if(myCheck()) throw new Exception(...);
    return MethodCalledByMethod2();
}
public string Method3 {
    if(myCheck()) throw new Exception(...);
    return MethodCalledByMethod3();
} 
```

然后在你的孩子班

```
public override string MethodCalledByMethod1 {
    ...Rest of my method1...
}

public override string MethodCalledByMethod2 {
    ...Rest of my method1...
}

public override string MethodCalledByMethod3 {
    ...Rest of my method1...
} 
```

基本上，您覆盖由基类实现调用的方法 1 到 3。基类实现包含 mycheck()，因此您只需担心编写一次（即在基类实现中）。